/*!
 THEOplayer

 Usage of this software is limited by the THEOplayer License.

 It is prohibited to reverse engineer, decompile, translate,
 disassemble, decipher, decrypt, or otherwise attempt to
 discover the source code of this software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 OTHER DEALINGS IN THE SOFTWARE.

 For more information, visit https://www.theoplayer.com or contact
 contact @ theoplayer . com

 This product makes use of Open Source Software: video.js
 (Apache 2.0 - Copyright Brightcove, Inc.), long.js (Apache 2.0),
 nodejs-langs (MIT - Copyright Andrew Lawson), promise-polyfill
 (MIT - Copyright (c) 2014 Taylor Hakes & Forbes Lindesay),
 shaka-player (Apache 2.0 - Copyright 2016 Google LLC)
 The code of these projects has been heavily modified during
 integration.
 More information on the licenses can be found here: Apache 2.0
 (http://www.apache.org/licenses/LICENSE-2.0), MIT
 (https://opensource.org/licenses/MIT)


 THEOplayer is based on patented technology developed by
 THEO Technologies (https://www.theoplayer.com).

 Version: 10.3.0
 Created: 2025-10-23T15:33:11.023Z
 */
var Io,td,f,Nt,id,ed,sd,nd,y,rd,a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:void 0!==s?s:"undefined"!=typeof global?global:this,s=a.window,h=a.document,hd=a.location,od=a.navigator,u=a.setTimeout,c=a.clearTimeout,v=a.setInterval,p=a.clearInterval,m=a.Error,g=a.TypeError,w=(a.SyntaxError,a.Object),_=a.Math,x=a.parseInt,C=a.parseFloat,S=a.isNaN,j=a.Uint8Array,ad=a.Worker,ud=(a.WorkerGlobalScope,a.XMLHttpRequest),cd=w.create,dd=w.defineProperty,ld=w.getOwnPropertyDescriptor,fd=w.getOwnPropertyNames,vd=w.getPrototypeOf,_d=w.prototype.hasOwnProperty,E=(t,i)=>()=>(i||t((i={exports:{}}).exports,i),i.exports),gd=(t,i,e)=>(e=null!=t?cd(vd(t)):{},((t,i,e,s)=>{if(i&&"object"==typeof i||"function"==typeof i)for(let n of fd(i))_d.call(t,n)||n===e||dd(t,n,{get:()=>i[n],enumerable:!(s=ld(i,n))||s.enumerable});return t})(!i&&t&&t.__esModule?e:dd(e,"default",{value:t,enumerable:!0}),t)),r=(y=()=>{"use strict";if("function"==typeof Symbol&&Symbol.iterator)Io=Symbol,td=null!=(ed=Symbol.for)?ed:Symbol,f=Symbol.iterator,Nt=null!=(sd=Symbol.dispose)?sd:td("Symbol.dispose"),id=null!=(nd=Symbol.asyncDispose)?nd:td("Symbol.asyncDispose");else{let t=0;Io=function(i){return"hd"+i+"_"+ ++t},f=(td=function(t){return"hd"+t})("Symbol.iterator"),Nt=td("Symbol.dispose"),id=td("Symbol.asyncDispose"),Io.for=td,Io.iterator=f,Io.dispose=Nt,Io.asyncDispose=id}},()=>(y&&(rd=y(y=0)),rd)),pd=E((t,i)=>{r(),function(e,s){"object"==typeof t&&void 0!==i?s(t):"function"==typeof define&&define.amd?define(["exports"],s):s((e=e||self).WebStreamsPolyfill={})}(t,function(t){"use strict";var i="function"==typeof Io&&"symbol"==typeof f?Io:function(t){return"Symbol("+t+")"};function e(){}var s=Number.isNaN||function(t){return t!=t},n=e;function r(t){return"object"==typeof t&&null!==t||"function"==typeof t}function h(t){return t.slice()}function o(t,i,e,s,n){new j(t).set(new j(e,s,n),i)}function a(t){return!1!==function(t){if("number"!=typeof t)return!1;if(s(t))return!1;if(t<0)return!1;return!0}(t)&&t!==1/0}function u(t,i,e){if("function"!=typeof t)throw new g("Argument is not a function");return Function.prototype.apply.call(t,i,e)}function c(t,i,e,s){var n=t[i];if(void 0!==n){if("function"!=typeof n)throw new g(n+" is not a method");switch(e){case 0:return function(){return l(n,t,s)};case 1:return function(i){var e=[i].concat(s);return l(n,t,e)}}}return function(){return k(void 0)}}function d(t,i,e){var s=t[i];if(void 0!==s)return u(s,t,e)}function l(t,i,e){try{return k(u(t,i,e))}catch(t){return E(t)}}function v(t){if(t=Number(t),s(t)||t<0)throw new RangeError("highWaterMark property of a queuing strategy must be non-negative and non-NaN");return t}function p(t){if(void 0===t)return function(){return 1};if("function"!=typeof t)throw new g("size property of a queuing strategy must be a function");return function(i){return t(i)}}var y=Promise,b=Promise.prototype.then,A=Promise.resolve.bind(y),S=Promise.reject.bind(y);function T(t){return new y(t)}function k(t){return A(t)}function E(t){return S(t)}function x(t,i,e){return b.call(t,i,e)}function P(t,i,e){x(x(t,i,e),void 0,n)}function I(t,i){P(t,i)}function C(t,i){P(t,void 0,i)}function R(t,i,e){return x(t,i,e)}function D(t){x(t,void 0,n)}var N=function(){function t(){this.Rd=0,this.Dd=0,this.Ld={Od:[],Fd:void 0},this.Ud=this.Ld,this.Rd=0,this.Dd=0}return w.defineProperty(t.prototype,"length",{get:function(){return this.Dd},enumerable:!0,configurable:!0}),t.prototype.push=function(t){var i=this.Ud,e=i;16383===i.Od.length&&(e={Od:[],Fd:void 0}),i.Od.push(t),e!==i&&(this.Ud=e,i.Fd=e),++this.Dd},t.prototype.shift=function(){var t=this.Ld,i=t,e=this.Rd,s=e+1,n=t.Od,r=n[e];return 16384===s&&(i=t.Fd,s=0),--this.Dd,this.Rd=s,t!==i&&(this.Ld=i),n[e]=void 0,r},t.prototype.forEach=function(t){for(var i=this.Rd,e=this.Ld,s=e.Od;!(i===s.length&&void 0===e.Fd||i===s.length&&(i=0,0===(s=(e=e.Fd).Od).length));)t(s[i]),++i},t.prototype.peek=function(){var t=this.Ld,i=this.Rd;return t.Od[i]},t}();function B(t,i,e){var s=null;!0===e&&(s=w.prototype);var n=w.create(s);return n.value=t,n.done=i,n}function M(t,i){t.Vd=!0,t.Hd=i,i.Wd=t,"readable"===i.Ra?U(t):"closed"===i.Ra?function(t){U(t),W(t)}(t):V(t,i.qd)}function L(t,i){return ji(t.Hd,i)}function O(t){"readable"===t.Hd.Ra?H(t,new g("Reader was released and can no longer be used to monitor the stream's closedness")):function(t,i){V(t,i)}(t,new g("Reader was released and can no longer be used to monitor the stream's closedness")),t.Hd.Wd=void 0,t.Hd=void 0}function F(t){return new g("Cannot "+t+" a stream using a released reader")}function U(t){t.zd=T(function(i,e){t.Gd=i,t.Xd=e})}function V(t,i){U(t),H(t,i)}function H(t,i){D(t.zd),t.Xd(i),t.Gd=void 0,t.Xd=void 0}function W(t){t.Gd(void 0),t.Gd=void 0,t.Xd=void 0}var q=i("[[CancelSteps]]"),z=i("[[PullSteps]]");function G(t,i){void 0===i&&(i=!1);var e=new $(t);return e.Vd=i,e}function X(t){return T(function(i,e){var s={Qd:i,Kd:e};t.Wd.Yd.push(s)})}function Q(t,i,e){var s=t.Wd;s.Yd.shift().Qd(B(i,e,s.Vd))}function K(t){return t.Wd.Yd.length}function Y(t){var i=t.Wd;return void 0!==i&&!!tt(i)}var J,Z,$=function(){function t(t){if(!1===Gi(t))throw new g("ReadableStreamDefaultReader can only be constructed with a ReadableStream instance");if(!0===Xi(t))throw new g("This stream has already been locked for exclusive reading by another reader");M(this,t),this.Yd=new N}return w.defineProperty(t.prototype,"closed",{get:function(){return tt(this)?this.zd:E(et("closed"))},enumerable:!0,configurable:!0}),t.prototype.cancel=function(t){return tt(this)?void 0===this.Hd?E(F("cancel")):L(this,t):E(et("cancel"))},t.prototype.read=function(){return tt(this)?void 0===this.Hd?E(F("read from")):it(this):E(et("read"))},t.prototype.releaseLock=function(){if(!tt(this))throw et("releaseLock");if(void 0!==this.Hd){if(this.Yd.length>0)throw new g("Tried to release a reader lock when that reader has pending read() calls un-settled");O(this)}},t}();function tt(t){return!!r(t)&&!!w.prototype.hasOwnProperty.call(t,"Yd")}function it(t){var i=t.Hd;return i.Jd=!0,"closed"===i.Ra?k(B(void 0,!0,t.Vd)):"errored"===i.Ra?E(i.qd):i.Zd[z]()}function et(t){return new g("ReadableStreamDefaultReader.prototype."+t+" can only be used on a ReadableStreamDefaultReader")}"symbol"==typeof i.asyncIterator&&((J={})[i.asyncIterator]=function(){return this},Z=J,w.defineProperty(Z,i.asyncIterator,{enumerable:!1}));var st={next:function(){if(!1===nt(this))return E(rt("next"));var t=this.$d;return void 0===t.Hd?E(F("iterate")):R(it(t),function(i){var e=i.done;return e&&O(t),B(i.value,e,!0)})},return:function(t){if(!1===nt(this))return E(rt("next"));var i=this.$d;if(void 0===i.Hd)return E(F("finish iterating"));if(i.Yd.length>0)return E(new g("Tried to release a reader lock when that reader has pending read() calls un-settled"));if(!1===this.ul){var e=L(i,t);return O(i),R(e,function(){return B(t,!0,!0)})}return O(i),k(B(t,!0,!0))}};function nt(t){return!!r(t)&&!!w.prototype.hasOwnProperty.call(t,"$d")}function rt(t){return new g("ReadableStreamAsyncIterator."+t+" can only be used on a ReadableSteamAsyncIterator")}function ht(t){var i=t.tf.shift();return t.if-=i.size,t.if<0&&(t.if=0),i.value}function ot(t,i,e){if(!a(e=Number(e)))throw new RangeError("Size must be a finite, non-NaN, non-negative number.");t.tf.push({value:i,size:e}),t.if+=e}function at(t){t.tf=new N,t.if=0}void 0!==Z&&w.setPrototypeOf(st,Z),w.defineProperty(st,"next",{enumerable:!1}),w.defineProperty(st,"return",{enumerable:!1});var ut=i("[[AbortSteps]]"),ct=i("[[ErrorSteps]]"),dt=function(){function t(t,i){void 0===t&&(t={}),void 0===i&&(i={}),ft(this);var e=i.size,s=i.highWaterMark;if(void 0!==t.type)throw new RangeError("Invalid type is specified");var n=p(e);void 0===s&&(s=1),function(t,i,e,s){var n=w.create(Rt.prototype);function r(){return d(i,"start",[n])}var h=c(i,"write",1,[n]),o=c(i,"close",0,[]),a=c(i,"abort",1,[]);Dt(t,n,r,h,o,a,e,s)}(this,t,s=v(s),n)}return w.defineProperty(t.prototype,"locked",{get:function(){if(!1===vt(this))throw Ut("locked");return _t(this)},enumerable:!0,configurable:!0}),t.prototype.abort=function(t){return!1===vt(this)?E(Ut("abort")):!0===_t(this)?E(new g("Cannot abort a stream that already has a writer")):gt(this,t)},t.prototype.close=function(){return!1===vt(this)?E(Ut("close")):!0===_t(this)?E(new g("Cannot close a stream that already has a writer")):!0===bt(this)?E(new g("Cannot close an already-closing stream")):pt(this)},t.prototype.getWriter=function(){if(!1===vt(this))throw Ut("getWriter");return lt(this)},t}();function lt(t){return new Tt(t)}function ft(t){t.Ra="writable",t.qd=void 0,t.ef=void 0,t.nf=void 0,t.rf=new N,t.hf=void 0,t.uf=void 0,t.cf=void 0,t.df=void 0,t.lf=!1}function vt(t){return!!r(t)&&!!w.prototype.hasOwnProperty.call(t,"nf")}function _t(t){return void 0!==t.ef}function gt(t,i){var e=t.Ra;if("closed"===e||"errored"===e)return k(void 0);if(void 0!==t.df)return t.df.vf;var s=!1;"erroring"===e&&(s=!0,i=void 0);var n=T(function(e,n){t.df={vf:void 0,Qd:e,Kd:n,_f:i,gf:s}});return t.df.vf=n,!1===s&&wt(t,i),n}function pt(t){var i=t.Ra;if("closed"===i||"errored"===i)return E(new g("The stream (in "+i+" state) is not in the writable state and cannot be closed"));var e=T(function(i,e){var s={Qd:i,Kd:e};t.uf=s}),s=t.ef;return void 0!==s&&!0===t.lf&&"writable"===i&&Yt(s),function(t){ot(t,"close",0),Mt(t)}(t.nf),e}function mt(t,i){"writable"!==t.Ra?yt(t):wt(t,i)}function wt(t,i){var e=t.nf;t.Ra="erroring",t.qd=i;var s=t.ef;void 0!==s&&Pt(s,i),!1===function(t){if(void 0===t.hf&&void 0===t.cf)return!1;return!0}(t)&&!0===e.pf&&yt(t)}function yt(t){t.Ra="errored",t.nf[ct]();var i=t.qd;if(t.rf.forEach(function(t){t.Kd(i)}),t.rf=new N,void 0!==t.df){var e=t.df;if(t.df=void 0,!0===e.gf)return e.Kd(i),void At(t);P(t.nf[ut](e._f),function(){e.Qd(),At(t)},function(i){e.Kd(i),At(t)})}else At(t)}function bt(t){return void 0!==t.uf||void 0!==t.cf}function At(t){void 0!==t.uf&&(t.uf.Kd(t.qd),t.uf=void 0);var i=t.ef;void 0!==i&&zt(i,t.qd)}function St(t,i){var e=t.ef;void 0!==e&&i!==t.lf&&(!0===i?function(t){Xt(t)}(e):Yt(e)),t.lf=i}var Tt=function(){function t(t){if(!1===vt(t))throw new g("WritableStreamDefaultWriter can only be constructed with a WritableStream instance");if(!0===_t(t))throw new g("This stream has already been locked for exclusive writing by another writer");this.mf=t,t.ef=this;var i=t.Ra;if("writable"===i)!1===bt(t)&&!0===t.lf?Xt(this):Qt(this),Wt(this);else if("erroring"===i)jt(this,t.qd),Wt(this);else if("closed"===i)Qt(this),function(t){Wt(t),Gt(t)}(this);else{var e=t.qd;jt(this,e),qt(this,e)}}return w.defineProperty(t.prototype,"closed",{get:function(){return!1===kt(this)?E(Vt("closed")):this.zd},enumerable:!0,configurable:!0}),w.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===kt(this))throw Vt("desiredSize");if(void 0===this.mf)throw Ht("desiredSize");return function(t){var i=t.mf,e=i.Ra;if("errored"===e||"erroring"===e)return null;if("closed"===e)return 0;return Bt(i.nf)}(this)},enumerable:!0,configurable:!0}),w.defineProperty(t.prototype,"ready",{get:function(){return!1===kt(this)?E(Vt("ready")):this.wf},enumerable:!0,configurable:!0}),t.prototype.abort=function(t){return!1===kt(this)?E(Vt("abort")):void 0===this.mf?E(Ht("abort")):function(t,i){var e=t.mf;return gt(e,i)}(this,t)},t.prototype.close=function(){if(!1===kt(this))return E(Vt("close"));var t=this.mf;return void 0===t?E(Ht("close")):!0===bt(t)?E(new g("Cannot close an already-closing stream")):Et(this)},t.prototype.releaseLock=function(){if(!1===kt(this))throw Vt("releaseLock");void 0!==this.mf&&It(this)},t.prototype.write=function(t){return!1===kt(this)?E(Vt("write")):void 0===this.mf?E(Ht("write to")):Ct(this,t)},t}();function kt(t){return!!r(t)&&!!w.prototype.hasOwnProperty.call(t,"mf")}function Et(t){return pt(t.mf)}function xt(t,i){"pending"===t.yf?zt(t,i):function(t,i){qt(t,i)}(t,i)}function Pt(t,i){"pending"===t.bf?Kt(t,i):function(t,i){jt(t,i)}(t,i)}function It(t){var i=t.mf,e=new g("Writer was released and can no longer be used to monitor the stream's closedness");Pt(t,e),xt(t,e),i.ef=void 0,t.mf=void 0}function Ct(t,i){var e=t.mf,s=e.nf,n=function(t,i){try{return t.Af(i)}catch(i){return Lt(t,i),1}}(s,i);if(e!==t.mf)return E(Ht("write to"));var r=e.Ra;if("errored"===r)return E(e.qd);if(!0===bt(e)||"closed"===r)return E(new g("The stream is closing or closed and cannot be written to"));if("erroring"===r)return E(e.qd);var h=function(t){return T(function(i,e){var s={Qd:i,Kd:e};t.rf.push(s)})}(e);return function(t,i,e){var s={chunk:i};try{ot(t,s,e)}catch(i){return void Lt(t,i)}var n=t.Sf;if(!1===bt(n)&&"writable"===n.Ra){St(n,Ot(t))}Mt(t)}(s,i,n),h}var Rt=function(){function t(){throw new g("WritableStreamDefaultController cannot be constructed explicitly")}return t.prototype.error=function(t){if(!1===function(t){if(!r(t))return!1;if(!w.prototype.hasOwnProperty.call(t,"Sf"))return!1;return!0}(this))throw new g("WritableStreamDefaultController.prototype.error can only be used on a WritableStreamDefaultController");"writable"===this.Sf.Ra&&Ft(this,t)},t.prototype[ut]=function(t){var i=this.Tf(t);return Nt(this),i},t.prototype[ct]=function(){at(this)},t}();function Dt(t,i,e,s,n,r,h,o){i.Sf=t,t.nf=i,i.tf=void 0,i.if=void 0,at(i),i.pf=!1,i.Af=o,i.kf=h,i.Ef=s,i.xf=n,i.Tf=r;var a=Ot(i);St(t,a),P(k(e()),function(){i.pf=!0,Mt(i)},function(e){i.pf=!0,mt(t,e)})}function Nt(t){t.Ef=void 0,t.xf=void 0,t.Tf=void 0,t.Af=void 0}function Bt(t){return t.kf-t.if}function Mt(t){var i=t.Sf;if(!1!==t.pf&&void 0===i.hf)if("erroring"!==i.Ra){if(0!==t.tf.length){var e=function(t){return t.tf.peek().value}(t);"close"===e?function(t){var i=t.Sf;(function(t){t.cf=t.uf,t.uf=void 0})(i),ht(t);var e=t.xf();Nt(t),P(e,function(){!function(t){t.cf.Qd(void 0),t.cf=void 0,"erroring"===t.Ra&&(t.qd=void 0,void 0!==t.df&&(t.df.Qd(),t.df=void 0)),t.Ra="closed";var i=t.ef;void 0!==i&&Gt(i)}(i)},function(t){!function(t,i){t.cf.Kd(i),t.cf=void 0,void 0!==t.df&&(t.df.Kd(i),t.df=void 0),mt(t,i)}(i,t)})}(t):function(t,i){var e=t.Sf;!function(t){t.hf=t.rf.shift()}(e);var s=t.Ef(i);P(s,function(){!function(t){t.hf.Qd(void 0),t.hf=void 0}(e);var i=e.Ra;if(ht(t),!1===bt(e)&&"writable"===i){var s=Ot(t);St(e,s)}Mt(t)},function(i){"writable"===e.Ra&&Nt(t),function(t,i){t.hf.Kd(i),t.hf=void 0,mt(t,i)}(e,i)})}(t,e.chunk)}}else yt(i)}function Lt(t,i){"writable"===t.Sf.Ra&&Ft(t,i)}function Ot(t){return Bt(t)<=0}function Ft(t,i){var e=t.Sf;Nt(t),wt(e,i)}function Ut(t){return new g("WritableStream.prototype."+t+" can only be used on a WritableStream")}function Vt(t){return new g("WritableStreamDefaultWriter.prototype."+t+" can only be used on a WritableStreamDefaultWriter")}function Ht(t){return new g("Cannot "+t+" a stream using a released writer")}function Wt(t){t.zd=T(function(i,e){t.Gd=i,t.Xd=e,t.yf="pending"})}function qt(t,i){Wt(t),zt(t,i)}function zt(t,i){D(t.zd),t.Xd(i),t.Gd=void 0,t.Xd=void 0,t.yf="rejected"}function Gt(t){t.Gd(void 0),t.Gd=void 0,t.Xd=void 0,t.yf="resolved"}function Xt(t){t.wf=T(function(i,e){t.Pf=i,t.If=e}),t.bf="pending"}function jt(t,i){Xt(t),Kt(t,i)}function Qt(t){Xt(t),Yt(t)}function Kt(t,i){D(t.wf),t.If(i),t.Pf=void 0,t.If=void 0,t.bf="rejected"}function Yt(t){t.Pf(void 0),t.Pf=void 0,t.If=void 0,t.bf="fulfilled"}function Jt(t){if("object"!=typeof t||null===t)return!1;try{return"boolean"==typeof t.aborted}catch(t){return!1}}var Zt="undefined"!=typeof DOMException?DOMException:void 0;var $t,ti=function(t){if("function"!=typeof t&&"object"!=typeof t)return!1;try{return new t,!0}catch(t){return!1}}(Zt)?Zt:(($t=function(t,i){this.message=t||"",this.name=i||"Error",m.captureStackTrace&&m.captureStackTrace(this,this.constructor)}).prototype=w.create(m.prototype),w.defineProperty($t.prototype,"constructor",{value:$t,writable:!0,configurable:!0}),$t);function ii(t,i,s,n,r,h){var o=G(t),a=lt(i);t.Jd=!0;var u=!1,c=k(void 0);return T(function(d,l){var f,v,_,p;if(void 0!==h){if(f=function(){var e=new ti("Aborted","AbortError"),s=[];!1===n&&s.push(function(){return"writable"===i.Ra?gt(i,e):k(void 0)}),!1===r&&s.push(function(){return"readable"===t.Ra?ji(t,e):k(void 0)}),b(function(){return Promise.all(s.map(function(t){return t()}))},!0,e)},!0===h.aborted)return void f();h.addEventListener("abort",f)}if(y(t,o.zd,function(t){!1===n?b(function(){return gt(i,t)},!0,t):A(!0,t)}),y(i,a.zd,function(i){!1===r?b(function(){return ji(t,i)},!0,i):A(!0,i)}),v=t,_=o.zd,p=function(){!1===s?b(function(){return function(t){var i=t.mf,e=i.Ra;return!0===bt(i)||"closed"===e?k(void 0):"errored"===e?E(i.qd):Et(t)}(a)}):A()},"closed"===v.Ra?p():I(_,p),!0===bt(i)||"closed"===i.Ra){var m=new g("the destination writable stream closed before all data could be piped to it");!1===r?b(function(){return ji(t,m)},!0,m):A(!0,m)}function w(){var t=c;return x(c,function(){return t!==c?w():void 0})}function y(t,i,e){"errored"===t.Ra?e(t.qd):C(i,e)}function b(t,e,s){function n(){P(t(),function(){return S(e,s)},function(t){return S(!0,t)})}!0!==u&&(u=!0,"writable"===i.Ra&&!1===bt(i)?I(w(),n):n())}function A(t,e){!0!==u&&(u=!0,"writable"===i.Ra&&!1===bt(i)?I(w(),function(){return S(t,e)}):S(t,e))}function S(t,i){It(a),O(o),void 0!==h&&h.removeEventListener("abort",f),t?l(i):d(void 0)}D(T(function(t,i){!function s(n){n?t():x(!0===u?k(!0):x(a.wf,function(){return x(it(o),function(t){return!0===t.done||(c=x(Ct(a,t.value),void 0,e),!1)})}),s,i)}(!1)}))})}var ei=function(){function t(){throw new g}return w.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===si(this))throw fi("desiredSize");return ci(this)},enumerable:!0,configurable:!0}),t.prototype.close=function(){if(!1===si(this))throw fi("close");if(!1===di(this))throw new g("The stream is not in a state that permits close");oi(this)},t.prototype.enqueue=function(t){if(!1===si(this))throw fi("enqueue");if(!1===di(this))throw new g("The stream is not in a state that permits enqueue");return ai(this,t)},t.prototype.error=function(t){if(!1===si(this))throw fi("error");ui(this,t)},t.prototype[q]=function(t){at(this);var i=this.Cf(t);return hi(this),i},t.prototype[z]=function(){var t=this.Rf;if(this.tf.length>0){var i=ht(this);return!0===this.Df&&0===this.tf.length?(hi(this),Qi(t)):ni(this),k(B(i,!1,t.Wd.Vd))}var e=X(t);return ni(this),e},t}();function si(t){return!!r(t)&&!!w.prototype.hasOwnProperty.call(t,"Rf")}function ni(t){!1!==ri(t)&&(!0!==t.Nf?(t.Nf=!0,P(t.Bf(),function(){t.Nf=!1,!0===t.Mf&&(t.Mf=!1,ni(t))},function(i){ui(t,i)})):t.Mf=!0)}function ri(t){var i=t.Rf;return!1!==di(t)&&(!1!==t.pf&&(!0===Xi(i)&&K(i)>0||ci(t)>0))}function hi(t){t.Bf=void 0,t.Cf=void 0,t.Af=void 0}function oi(t){var i=t.Rf;t.Df=!0,0===t.tf.length&&(hi(t),Qi(i))}function ai(t,i){var e=t.Rf;if(!0===Xi(e)&&K(e)>0)Q(e,i,!1);else{var s=void 0;try{s=t.Af(i)}catch(i){throw ui(t,i),i}try{ot(t,i,s)}catch(i){throw ui(t,i),i}}ni(t)}function ui(t,i){var e=t.Rf;"readable"===e.Ra&&(at(t),hi(t),Ki(e,i))}function ci(t){var i=t.Rf.Ra;return"errored"===i?null:"closed"===i?0:t.kf-t.if}function di(t){var i=t.Rf.Ra;return!1===t.Df&&"readable"===i}function li(t,i,e,s,n,r,h){i.Rf=t,i.tf=void 0,i.if=void 0,at(i),i.pf=!1,i.Df=!1,i.Mf=!1,i.Nf=!1,i.Af=h,i.kf=r,i.Bf=s,i.Cf=n,t.Zd=i,P(k(e()),function(){i.pf=!0,ni(i)},function(t){ui(i,t)})}function fi(t){return new g("ReadableStreamDefaultController.prototype."+t+" can only be used on a ReadableStreamDefaultController")}var vi=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&_.floor(t)===t},_i=function(){function t(){throw new g("ReadableStreamBYOBRequest cannot be used directly")}return w.defineProperty(t.prototype,"view",{get:function(){if(!1===mi(this))throw Bi("view");return this.Lf},enumerable:!0,configurable:!0}),t.prototype.respond=function(t){if(!1===mi(this))throw Bi("respond");if(void 0===this.Of)throw new g("This BYOB request has been invalidated");this.Lf.buffer,function(t,i){if(i=Number(i),!1===a(i))throw new RangeError("bytesWritten must be a finite");Pi(t,i)}(this.Of,t)},t.prototype.respondWithNewView=function(t){if(!1===mi(this))throw Bi("respond");if(void 0===this.Of)throw new g("This BYOB request has been invalidated");if(!ArrayBuffer.isView(t))throw new g("You can only respond with array buffer views");t.buffer,function(t,i){var e=t.Ff.peek();if(e.byteOffset+e.bytesFilled!==i.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(e.byteLength!==i.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");e.buffer=i.buffer,Pi(t,i.byteLength)}(this.Of,t)},t}(),gi=function(){function t(){throw new g("ReadableByteStreamController constructor cannot be used directly")}return w.defineProperty(t.prototype,"byobRequest",{get:function(){if(!1===pi(this))throw Mi("byobRequest");if(void 0===this.Uf&&this.Ff.length>0){var t=this.Ff.peek(),i=new j(t.buffer,t.byteOffset+t.bytesFilled,t.byteLength-t.bytesFilled),e=w.create(_i.prototype);!function(t,i,e){t.Of=i,t.Lf=e}(e,this,i),this.Uf=e}return this.Uf},enumerable:!0,configurable:!0}),w.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===pi(this))throw Mi("desiredSize");return Di(this)},enumerable:!0,configurable:!0}),t.prototype.close=function(){if(!1===pi(this))throw Mi("close");if(!0===this.Df)throw new g("The stream has already been closed; do not close it again!");var t=this.Vf.Ra;if("readable"!==t)throw new g("The stream (in "+t+" state) is not in the readable state and cannot be closed");!function(t){var i=t.Vf;if(t.if>0)return void(t.Df=!0);if(t.Ff.length>0){if(t.Ff.peek().bytesFilled>0){var e=new g("Insufficient bytes to fill elements in the given buffer");throw Ri(t,e),e}}Ci(t),Qi(i)}(this)},t.prototype.enqueue=function(t){if(!1===pi(this))throw Mi("enqueue");if(!0===this.Df)throw new g("stream is closed or draining");var i=this.Vf.Ra;if("readable"!==i)throw new g("The stream (in "+i+" state) is not in the readable state and cannot be enqueued to");if(!ArrayBuffer.isView(t))throw new g("You can only enqueue array buffer views when using a ReadableByteStreamController");t.buffer,function(t,i){var e=t.Vf,s=i.buffer,n=i.byteOffset,r=i.byteLength,h=s;if(!0===Y(e)){if(0===K(e))Ai(t,h,n,r);else Q(e,new j(h,n,r),!1)}else!0===Fi(e)?(Ai(t,h,n,r),xi(t)):Ai(t,h,n,r);wi(t)}(this,t)},t.prototype.error=function(t){if(!1===pi(this))throw Mi("error");Ri(this,t)},t.prototype[q]=function(t){this.Ff.length>0&&(this.Ff.peek().bytesFilled=0);at(this);var i=this.Cf(t);return Ci(this),i},t.prototype[z]=function(){var t=this.Vf;if(this.if>0){var i=this.tf.shift();this.if-=i.byteLength,ki(this);var e=void 0;try{e=new j(i.buffer,i.byteOffset,i.byteLength)}catch(t){return E(t)}return k(B(e,!1,t.Wd.Vd))}var s=this.Hf;if(void 0!==s){var n=void 0;try{n=new ArrayBuffer(s)}catch(t){return E(t)}var r={buffer:n,byteOffset:0,byteLength:s,bytesFilled:0,elementSize:1,ctor:j,readerType:"default"};this.Ff.push(r)}var h=X(t);return wi(this),h},t}();function pi(t){return!!r(t)&&!!w.prototype.hasOwnProperty.call(t,"Vf")}function mi(t){return!!r(t)&&!!w.prototype.hasOwnProperty.call(t,"Of")}function wi(t){var i=function(t){var i=t.Vf;if("readable"!==i.Ra)return!1;if(!0===t.Df)return!1;if(!1===t.pf)return!1;if(!0===Y(i)&&K(i)>0)return!0;if(!0===Fi(i)&&Oi(i)>0)return!0;var e=Di(t);if(e>0)return!0;return!1}(t);!1!==i&&(!0!==t.Nf?(t.Nf=!0,P(t.Bf(),function(){t.Nf=!1,!0===t.Mf&&(t.Mf=!1,wi(t))},function(i){Ri(t,i)})):t.Mf=!0)}function yi(t,i){var e=!1;"closed"===t.Ra&&(e=!0);var s=bi(i);"default"===i.readerType?Q(t,s,e):function(t,i,e){var s=t.Wd,n=s.Wf.shift();n.Qd(B(i,e,s.Vd))}(t,s,e)}function bi(t){var i=t.bytesFilled,e=t.elementSize;return new t.ctor(t.buffer,t.byteOffset,i/e)}function Ai(t,i,e,s){t.tf.push({buffer:i,byteOffset:e,byteLength:s}),t.if+=s}function Si(t,i){var e=i.elementSize,s=i.bytesFilled-i.bytesFilled%e,n=_.min(t.if,i.byteLength-i.bytesFilled),r=i.bytesFilled+n,h=r-r%e,a=n,u=!1;h>s&&(a=h-i.bytesFilled,u=!0);for(var c=t.tf;a>0;){var d=c.peek(),l=_.min(a,d.byteLength),f=i.byteOffset+i.bytesFilled;o(i.buffer,f,d.buffer,d.byteOffset,l),d.byteLength===l?c.shift():(d.byteOffset+=l,d.byteLength-=l),t.if-=l,Ti(t,l,i),a-=l}return u}function Ti(t,i,e){Ei(t),e.bytesFilled+=i}function ki(t){0===t.if&&!0===t.Df?(Ci(t),Qi(t.Vf)):wi(t)}function Ei(t){void 0!==t.Uf&&(t.Uf.Of=void 0,t.Uf.Lf=void 0,t.Uf=void 0)}function xi(t){for(;t.Ff.length>0;){if(0===t.if)return;var i=t.Ff.peek();!0===Si(t,i)&&(Ii(t),yi(t.Vf,i))}}function Pi(t,i){var e=t.Ff.peek();if("closed"===t.Vf.Ra){if(0!==i)throw new g("bytesWritten must be 0 when calling respond() on a closed stream");!function(t,i){i.buffer=i.buffer;var e=t.Vf;if(!0===Fi(e))for(;Oi(e)>0;)yi(e,Ii(t))}(t,e)}else!function(t,i,e){if(e.bytesFilled+i>e.byteLength)throw new RangeError("bytesWritten out of range");if(Ti(t,i,e),!(e.bytesFilled<e.elementSize)){Ii(t);var s=e.bytesFilled%e.elementSize;if(s>0){var n=e.byteOffset+e.bytesFilled,r=e.buffer.slice(n-s,n);Ai(t,r,0,r.byteLength)}e.buffer=e.buffer,e.bytesFilled-=s,yi(t.Vf,e),xi(t)}}(t,i,e);wi(t)}function Ii(t){var i=t.Ff.shift();return Ei(t),i}function Ci(t){t.Bf=void 0,t.Cf=void 0}function Ri(t,i){var e=t.Vf;"readable"===e.Ra&&(!function(t){Ei(t),t.Ff=new N}(t),at(t),Ci(t),Ki(e,i))}function Di(t){var i=t.Vf.Ra;return"errored"===i?null:"closed"===i?0:t.kf-t.if}function Ni(t,i,e){var s=w.create(gi.prototype);var n=c(i,"pull",0,[s]),r=c(i,"cancel",1,[]),h=i.autoAllocateChunkSize;if(void 0!==h&&(h=Number(h),!1===vi(h)||h<=0))throw new RangeError("autoAllocateChunkSize must be a positive integer");!function(t,i,e,s,n,r,h){i.Vf=t,i.Mf=!1,i.Nf=!1,i.Uf=void 0,i.tf=i.if=void 0,at(i),i.Df=!1,i.pf=!1,i.kf=v(r),i.Bf=s,i.Cf=n,i.Hf=h,i.Ff=new N,t.Zd=i,P(k(e()),function(){i.pf=!0,wi(i)},function(t){Ri(i,t)})}(t,s,function(){return d(i,"start",[s])},n,r,e,h)}function Bi(t){return new g("ReadableStreamBYOBRequest.prototype."+t+" can only be used on a ReadableStreamBYOBRequest")}function Mi(t){return new g("ReadableByteStreamController.prototype."+t+" can only be used on a ReadableByteStreamController")}function Li(t){return T(function(i,e){var s={Qd:i,Kd:e};t.Wd.Wf.push(s)})}function Oi(t){return t.Wd.Wf.length}function Fi(t){var i=t.Wd;return void 0!==i&&!!Vi(i)}var Ui=function(){function t(t){if(!Gi(t))throw new g("ReadableStreamBYOBReader can only be constructed with a ReadableStream instance given a byte source");if(!1===pi(t.Zd))throw new g("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");if(Xi(t))throw new g("This stream has already been locked for exclusive reading by another reader");M(this,t),this.Wf=new N}return w.defineProperty(t.prototype,"closed",{get:function(){return Vi(this)?this.zd:E(Hi("closed"))},enumerable:!0,configurable:!0}),t.prototype.cancel=function(t){return Vi(this)?void 0===this.Hd?E(F("cancel")):L(this,t):E(Hi("cancel"))},t.prototype.read=function(t){return Vi(this)?void 0===this.Hd?E(F("read from")):ArrayBuffer.isView(t)?(t.buffer,0===t.byteLength?E(new g("view must have non-zero byteLength")):function(t,i){var e=t.Hd;if(e.Jd=!0,"errored"===e.Ra)return E(e.qd);return function(t,i){var e=t.Vf,s=1;i.constructor!==DataView&&(s=i.constructor.BYTES_PER_ELEMENT);var n=i.constructor,r={buffer:i.buffer,byteOffset:i.byteOffset,byteLength:i.byteLength,bytesFilled:0,elementSize:s,ctor:n,readerType:"byob"};if(t.Ff.length>0)return t.Ff.push(r),Li(e);if("closed"===e.Ra)return k(B(new n(r.buffer,r.byteOffset,0),!0,e.Wd.Vd));if(t.if>0){if(!0===Si(t,r)){var h=bi(r);return ki(t),k(B(h,!1,e.Wd.Vd))}if(!0===t.Df){var o=new g("Insufficient bytes to fill elements in the given buffer");return Ri(t,o),E(o)}}t.Ff.push(r);var a=Li(e);return wi(t),a}(e.Zd,i)}(this,t)):E(new g("view must be an array buffer view")):E(Hi("read"))},t.prototype.releaseLock=function(){if(!Vi(this))throw Hi("releaseLock");if(void 0!==this.Hd){if(this.Wf.length>0)throw new g("Tried to release a reader lock when that reader has pending read() calls un-settled");O(this)}},t}();function Vi(t){return!!r(t)&&!!w.prototype.hasOwnProperty.call(t,"Wf")}function Hi(t){return new g("ReadableStreamBYOBReader.prototype."+t+" can only be used on a ReadableStreamBYOBReader")}var Wi=function(){function t(t,i){void 0===t&&(t={}),void 0===i&&(i={}),zi(this);var e=i.size,s=i.highWaterMark,n=t.type;if("bytes"===String(n)){if(void 0!==e)throw new RangeError("The strategy for a byte stream cannot have a size function");void 0===s&&(s=0),Ni(this,t,s=v(s))}else{if(void 0!==n)throw new RangeError("Invalid type is specified");var r=p(e);void 0===s&&(s=1),function(t,i,e,s){var n=w.create(ei.prototype),r=c(i,"pull",0,[n]),h=c(i,"cancel",1,[]);li(t,n,function(){return d(i,"start",[n])},r,h,e,s)}(this,t,s=v(s),r)}}return w.defineProperty(t.prototype,"locked",{get:function(){if(!1===Gi(this))throw Yi("locked");return Xi(this)},enumerable:!0,configurable:!0}),t.prototype.cancel=function(t){return!1===Gi(this)?E(Yi("cancel")):!0===Xi(this)?E(new g("Cannot cancel a stream that already has a reader")):ji(this,t)},t.prototype.getReader=function(t){var i=(void 0===t?{}:t).mode;if(!1===Gi(this))throw Yi("getReader");if(void 0===i)return G(this,!0);if("byob"===(i=String(i)))return function(t,i){void 0===i&&(i=!1);var e=new Ui(t);return e.Vd=i,e}(this,!0);throw new RangeError("Invalid mode is specified")},t.prototype.pipeThrough=function(t,i){var e=t.writable,s=t.readable,n=void 0===i?{}:i,r=n.preventClose,h=n.preventAbort,o=n.preventCancel,a=n.signal;if(!1===Gi(this))throw Yi("pipeThrough");if(!1===vt(e))throw new g("writable argument to pipeThrough must be a WritableStream");if(!1===Gi(s))throw new g("readable argument to pipeThrough must be a ReadableStream");if(r=Boolean(r),h=Boolean(h),o=Boolean(o),void 0!==a&&!Jt(a))throw new g("ReadableStream.prototype.pipeThrough's signal option must be an AbortSignal");if(!0===Xi(this))throw new g("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(!0===_t(e))throw new g("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");return D(ii(this,e,r,h,o,a)),s},t.prototype.pipeTo=function(t,i){var e=void 0===i?{}:i,s=e.preventClose,n=e.preventAbort,r=e.preventCancel,h=e.signal;return!1===Gi(this)?E(Yi("pipeTo")):!1===vt(t)?E(new g("ReadableStream.prototype.pipeTo's first argument must be a WritableStream")):(s=Boolean(s),n=Boolean(n),r=Boolean(r),void 0===h||Jt(h)?!0===Xi(this)?E(new g("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):!0===_t(t)?E(new g("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):ii(this,t,s,n,r,h):E(new g("ReadableStream.prototype.pipeTo's signal option must be an AbortSignal")))},t.prototype.tee=function(){if(!1===Gi(this))throw Yi("tee");var t=function(t){var i,e,s,n,r,o=G(t),a=!1,u=!1,c=!1,d=T(function(t){r=t});function l(){return!0===a||(a=!0,D(R(it(o),function(t){if(a=!1,!0===t.done)return!1===u&&oi(s.Zd),void(!1===c&&oi(n.Zd));var i=t.value,e=i,r=i;!1===u&&ai(s.Zd,e),!1===c&&ai(n.Zd,r)}))),k(void 0)}function f(){}return s=qi(f,l,function(s){if(u=!0,i=s,!0===c){var n=h([i,e]),o=ji(t,n);r(o)}return d}),n=qi(f,l,function(s){if(c=!0,e=s,!0===u){var n=h([i,e]),o=ji(t,n);r(o)}return d}),C(o.zd,function(t){ui(s.Zd,t),ui(n.Zd,t)}),[s,n]}(this);return h(t)},t.prototype.getIterator=function(t){var i=(void 0===t?{}:t).preventCancel,e=void 0!==i&&i;if(!1===Gi(this))throw Yi("getIterator");return function(t,i){void 0===i&&(i=!1);var e=G(t),s=w.create(st);return s.$d=e,s.ul=Boolean(i),s}(this,e)},t}();function qi(t,i,e,s,n){void 0===s&&(s=1),void 0===n&&(n=function(){return 1});var r=w.create(Wi.prototype);return zi(r),li(r,w.create(ei.prototype),t,i,e,s,n),r}function zi(t){t.Ra="readable",t.Wd=void 0,t.qd=void 0,t.Jd=!1}function Gi(t){return!!r(t)&&!!w.prototype.hasOwnProperty.call(t,"Zd")}function Xi(t){return void 0!==t.Wd}function ji(t,i){return t.Jd=!0,"closed"===t.Ra?k(void 0):"errored"===t.Ra?E(t.qd):(Qi(t),R(t.Zd[q](i),e))}function Qi(t){t.Ra="closed";var i=t.Wd;void 0!==i&&(tt(i)&&(i.Yd.forEach(function(t){t.Qd(B(void 0,!0,i.Vd))}),i.Yd=new N),W(i))}function Ki(t,i){t.Ra="errored",t.qd=i;var e=t.Wd;void 0!==e&&(tt(e)?(e.Yd.forEach(function(t){t.Kd(i)}),e.Yd=new N):(e.Wf.forEach(function(t){t.Kd(i)}),e.Wf=new N),H(e,i))}function Yi(t){return new g("ReadableStream.prototype."+t+" can only be used on a ReadableStream")}"symbol"==typeof i.asyncIterator&&w.defineProperty(Wi.prototype,i.asyncIterator,{value:Wi.prototype.getIterator,enumerable:!1,writable:!0,configurable:!0});var Ji=function(){function t(t){var i=t.highWaterMark;this.highWaterMark=i}return t.prototype.size=function(t){return t.byteLength},t}(),Zi=function(){function t(t){var i=t.highWaterMark;this.highWaterMark=i}return t.prototype.size=function(){return 1},t}(),$i=function(){function t(t,i,e){void 0===t&&(t={}),void 0===i&&(i={}),void 0===e&&(e={});var s=i.size,n=i.highWaterMark,r=e.size,h=e.highWaterMark;if(void 0!==t.writableType)throw new RangeError("Invalid writable type specified");var o=p(s);if(void 0===n&&(n=1),n=v(n),void 0!==t.readableType)throw new RangeError("Invalid readable type specified");var a,u=p(r);void 0===h&&(h=0),h=v(h),function(t,i,e,s,n,r){function h(){return i}function o(i){return function(t,i){var e=t.qf;if(!0===t.lf){return R(t.zf,function(){var s=t.Gf;if("erroring"===s.Ra)throw s.qd;return ae(e,i)})}return ae(e,i)}(t,i)}function a(i){return function(t,i){return ie(t,i),k(void 0)}(t,i)}function u(){return function(t){var i=t.Xf,e=t.qf,s=e.jf();return he(e),R(s,function(){if("errored"===i.Ra)throw i.qd;var t=i.Zd;!0===di(t)&&oi(t)},function(e){throw ie(t,e),i.qd})}(t)}function c(){return function(t){return se(t,!1),t.zf}(t)}function d(i){return ee(t,i),k(void 0)}t.Gf=function(t,i,e,s,n,r){void 0===n&&(n=1),void 0===r&&(r=function(){return 1});var h=w.create(dt.prototype);return ft(h),Dt(h,w.create(Rt.prototype),t,i,e,s,n,r),h}(h,o,u,a,e,s),t.Xf=qi(h,c,d,n,r),t.lf=void 0,t.zf=void 0,t.Qf=void 0,se(t,!0),t.qf=void 0}(this,T(function(t){a=t}),n,o,h,u),function(t,i){var e=w.create(ne.prototype),s=function(t){try{return oe(e,t),k(void 0)}catch(t){return E(t)}},n=i.transform;if(void 0!==n){if("function"!=typeof n)throw new g("transform is not a method");s=function(t){return l(n,i,[t,e])}}var r=c(i,"flush",0,[e]);!function(t,i,e,s){i.Kf=t,t.qf=i,i.Yf=e,i.jf=s}(t,e,s,r)}(this,t);var f=d(t,"start",[this.qf]);a(f)}return w.defineProperty(t.prototype,"readable",{get:function(){if(!1===te(this))throw ce("readable");return this.Xf},enumerable:!0,configurable:!0}),w.defineProperty(t.prototype,"writable",{get:function(){if(!1===te(this))throw ce("writable");return this.Gf},enumerable:!0,configurable:!0}),t}();function te(t){return!!r(t)&&!!w.prototype.hasOwnProperty.call(t,"qf")}function ie(t,i){ui(t.Xf.Zd,i),ee(t,i)}function ee(t,i){he(t.qf),Lt(t.Gf.nf,i),!0===t.lf&&se(t,!1)}function se(t,i){void 0!==t.zf&&t.Qf(),t.zf=T(function(i){t.Qf=i}),t.lf=i}var ne=function(){function t(){throw new g("TransformStreamDefaultController instances cannot be created directly")}return w.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===re(this))throw ue("desiredSize");return ci(this.Kf.Xf.Zd)},enumerable:!0,configurable:!0}),t.prototype.enqueue=function(t){if(!1===re(this))throw ue("enqueue");oe(this,t)},t.prototype.error=function(t){if(!1===re(this))throw ue("error");!function(t,i){ie(t.Kf,i)}(this,t)},t.prototype.terminate=function(){if(!1===re(this))throw ue("terminate");!function(t){var i=t.Kf,e=i.Xf.Zd;!0===di(e)&&oi(e);var s=new g("TransformStream terminated");ee(i,s)}(this)},t}();function re(t){return!!r(t)&&!!w.prototype.hasOwnProperty.call(t,"Kf")}function he(t){t.Yf=void 0,t.jf=void 0}function oe(t,i){var e=t.Kf,s=e.Xf.Zd;if(!1===di(s))throw new g("Readable side is not in a state that permits enqueue");try{ai(s,i)}catch(t){throw ee(e,t),e.Xf.qd}var n=function(t){return!0!==ri(t)}(s);n!==e.lf&&se(e,!0)}function ae(t,i){return R(t.Yf(i),void 0,function(i){throw ie(t.Kf,i),i})}function ue(t){return new g("TransformStreamDefaultController.prototype."+t+" can only be used on a TransformStreamDefaultController")}function ce(t){return new g("TransformStream.prototype."+t+" can only be used on a TransformStream")}t.ByteLengthQueuingStrategy=Ji,t.CountQueuingStrategy=Zi,t.ReadableStream=Wi,t.TransformStream=$i,t.WritableStream=dt,w.defineProperty(t,"__esModule",{value:!0})})}),md=E(t=>{"use strict";function i(){const t=pd();return i=function(){return t},t}r(),w.defineProperty(t,"__esModule",{value:!0}),function(t,i){for(var e in i)w.defineProperty(t,e,{enumerable:!0,get:w.getOwnPropertyDescriptor(i,e).get})}(t,{get ByteLengthQueuingStrategy(){return i().ByteLengthQueuingStrategy},get CountQueuingStrategy(){return i().CountQueuingStrategy},get ReadableStream(){return i().ReadableStream},get TransformStream(){return i().TransformStream},get WritableStream(){return i().WritableStream}})}),wd=E((t,i)=>{r(),function(e,s){"object"==typeof t&&typeof i<"u"?s(t):"function"==typeof define&&define.amd?define(["exports"],s):s((e=typeof globalThis<"u"?globalThis:e||self).millicast={})}(t,function(t){"use strict";var i,e=w.defineProperty,n=w.defineProperties,r=w.getOwnPropertyDescriptors,o=w.getOwnPropertySymbols,a=w.prototype.hasOwnProperty,c=w.prototype.propertyIsEnumerable,d=(t,i,s)=>i in t?e(t,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[i]=s,l=(t,i)=>{for(var e in i||(i={}))a.call(i,e)&&d(t,e,i[e]);if(o)for(var e of o(i))c.call(i,e)&&d(t,e,i[e]);return t},f=(t,i)=>n(t,r(i)),y=(t,i)=>{var e={};for(var s in t)a.call(t,s)&&i.indexOf(s)<0&&(e[s]=t[s]);if(null!=t&&o)for(var s of o(t))i.indexOf(s)<0&&c.call(t,s)&&(e[s]=t[s]);return e},b=typeof globalThis<"u"?globalThis:typeof s<"u"?s:typeof global<"u"?global:typeof self<"u"?self:{};function A(t){return t&&t.__esModule&&w.prototype.hasOwnProperty.call(t,"default")?t.default:t}var T,k={exports:{}};var E,P=(T||(T=1,E=k,function(t){var i,e={VERSION:"1.6.1"},s={},n=function(t,i){return function(){return i.apply(t,arguments)}},r=function(){var t,i,e=arguments,s=e[0];for(i=1;i<e.length;i++)for(t in e[i])!(t in s)&&e[i].hasOwnProperty(t)&&(s[t]=e[i][t]);return s},h=function(t,i){return{value:t,name:i}};e.TRACE=h(1,"TRACE"),e.DEBUG=h(2,"DEBUG"),e.INFO=h(3,"INFO"),e.TIME=h(4,"TIME"),e.WARN=h(5,"WARN"),e.ERROR=h(8,"ERROR"),e.OFF=h(99,"OFF");var o=function(t){this.context=t,this.setLevel(t.filterLevel),this.log=this.info};o.prototype={setLevel:function(t){t&&"value"in t&&(this.context.filterLevel=t)},getLevel:function(){return this.context.filterLevel},enabledFor:function(t){var i=this.context.filterLevel;return t.value>=i.value},trace:function(){this.invoke(e.TRACE,arguments)},debug:function(){this.invoke(e.DEBUG,arguments)},info:function(){this.invoke(e.INFO,arguments)},warn:function(){this.invoke(e.WARN,arguments)},error:function(){this.invoke(e.ERROR,arguments)},time:function(t){"string"==typeof t&&t.length>0&&this.invoke(e.TIME,[t,"start"])},timeEnd:function(t){"string"==typeof t&&t.length>0&&this.invoke(e.TIME,[t,"end"])},invoke:function(t,e){i&&this.enabledFor(t)&&i(e,r({level:t},this.context))}};var a,u=new o({filterLevel:e.OFF});(a=e).enabledFor=n(u,u.enabledFor),a.trace=n(u,u.trace),a.debug=n(u,u.debug),a.time=n(u,u.time),a.timeEnd=n(u,u.timeEnd),a.info=n(u,u.info),a.warn=n(u,u.warn),a.error=n(u,u.error),a.log=a.info,e.setHandler=function(t){i=t},e.setLevel=function(t){for(var i in u.setLevel(t),s)s.hasOwnProperty(i)&&s[i].setLevel(t)},e.getLevel=function(){return u.getLevel()},e.get=function(t){return s[t]||(s[t]=new o(r({name:t},u.context)))},e.createDefaultHandler=function(t){(t=t||{}).formatter=t.formatter||function(t,i){i.name&&t.unshift("["+i.name+"]")};var i={},s=function(t,i){Function.prototype.apply.call(t,console,i)};return typeof console>"u"?function(){}:function(n,r){n=Array.prototype.slice.call(n);var h,o=console.log;r.level===e.TIME?(h=(r.name?"["+r.name+"] ":"")+n[0],"start"===n[1]?console.time?console.time(h):i[h]=(new Date).getTime():console.timeEnd?console.timeEnd(h):s(o,[h+": "+((new Date).getTime()-i[h])+"ms"])):(r.level===e.WARN&&console.warn?o=console.warn:r.level===e.ERROR&&console.error?o=console.error:r.level===e.INFO&&console.info?o=console.info:r.level===e.DEBUG&&console.debug?o=console.debug:r.level===e.TRACE&&console.trace&&(o=console.trace),t.formatter(n,r),s(o,n))}},e.useDefaults=function(t){e.setLevel(t&&t.defaultLevel||e.DEBUG),e.setHandler(e.createDefaultHandler(t))},e.setDefaults=e.useDefaults,E.exports?E.exports=e:(e.Jf=t.Logger,e.noConflict=function(){return t.Logger=e.Jf,e},t.Logger=e)}(k.exports)),k.exports);const I=A(P),C="0.6.0",R=(null==(i=null==s?void 0:s.navigator)?void 0:i.userAgent)||"No user agent available";let D="",N="",B="",M="",L="",O="",F="",U=0;const V=[];const H=t=>{D=""===D?t:D},W=t=>{N=""===N?t:N},q=t=>{B=""===B?t:B},z=t=>{M=""===M?t:M},G=t=>{L=""===L?t:L},X=t=>{U=0===U?t:U},Q=t=>{O=t},K=t=>{F=""===F?t:F},Y=t=>{60===V.length&&V.shift(),V.push(t)},J=(t,i)=>{let e;void 0===t&&(t=60),void 0===i&&(i="JSON"),e=!Number.isInteger(t)||t>60||t<=0?60:t;const s={client:"@millicast/millicast-sdk",version:C,timestamp:(new Date).toISOString(),userAgent:R,clusterId:F,accountId:D,streamName:N,subscriberId:B,connection:O,stats:V.slice(-e),connectionDurationMs:(new Date).getTime()-U};return""!==L?s.feedId=L:""!==M&&(s.streamViewId=M),"CMCD"===i?function(t){function i(t,i){return{ts:_.round(i.timestamp)||"",ot:"audio"===t?"a":"v",bl:i.jitterBufferDelay||0,br:_.round(i.bitrateBitsPerSecond||0),pld:i.packetsLostDeltaPerSecond||0,j:i.jitter||0,mtp:i.packetRate||0,mid:i.mid||"",mimeType:i.mimeType||""}}return t.stats=t.stats.reduce((t,e)=>{const s=0!==e.audio.inbounds.length?e.audio.inbounds.map(t=>i("audio",t)):e.audio.outbounds.map(t=>i("audio",t)),n=0!==e.video.inbounds.length?e.video.inbounds.map(t=>i("video",t)):e.video.outbounds.map(t=>i("video",t));return t.concat([...s,...n])},[]),t}(s):s};I.useDefaults({defaultLevel:I.TRACE});const Z=["TRACE","DEBUG","INFO","WARN","ERROR"],tt=(t,i)=>{t.unshift("[".concat(i.name||"Global","] ").concat((new Date).toISOString()," - ").concat(i.level.name," -"))},it=(t,i)=>i?t.value>=ht[i].value:t.value>=rt.value,et=I.createDefaultHandler({formatter:tt});I.setHandler((t,i)=>{((t,i)=>{t=(t=Array.prototype.slice.call(t)).map(t=>"object"==typeof t?JSON.stringify(t):t),tt(t,i),0!==st?(nt.push(t.join(" ")),nt.length>=st&&(nt=nt.slice(-st))):nt=[]})(t,i),it(i.level,i.name)&&et(t,i);for(const{handler:e,level:s}of ot)i.level.value>=s.value&&e(t,i)});let st=1e4,nt=[],rt=I.OFF;const ht={},ot=[],at=f(l({},I),{enabledFor:it,getHistory:()=>nt,getHistoryMaxSize:()=>st,setHistoryMaxSize:t=>{st=t},setLevel:t=>{rt=t;for(const i in ht)ht[i]=t},getLevel:()=>rt,get:t=>{ht[t]||(ht[t]=rt);const i=I.get(t);return i.setLevel=i=>{ht[t]=i},i.getLevel=()=>ht[t],i},setHandler:(t,i)=>{ot.push({handler:t,level:i})},diagnose:t=>{let i;void 0===t&&(t={});const e={statsCount:60,historySize:1e3,minLogLevel:"TRACE",statsFormat:"JSON"};"number"==typeof t?(e.statsCount=t,i=e):i=l(l({},e),t);const{statsCount:s,historySize:n,minLogLevel:r,statsFormat:h}=i,o=J(s,h),a=at.getHistory();if(!Number.isInteger(n)||n<=0)throw new m("Invalid Argument Exception : historySize must be a positive integer.");if(!Z.includes(r.toUpperCase()))throw new m('Invalid Argument Exception : the minLogLevel parameter only excepts "trace", "debug", "info", "warn", and "error" as arguments.');if(Z.includes(r.toUpperCase())){const t=Z.slice(Z.indexOf(r.toUpperCase())),i=a.filter(i=>t.some(t=>i.includes(t)));o.history=i.slice(-n)}return o},JSON:"JSON",CMCD:"CMCD",VERSION:C});var ut,ct={exports:{}};function dt(){if(ut)return ct.exports;ut=1;var t,i="object"==typeof Reflect?Reflect:null,e=i&&"function"==typeof i.apply?i.apply:function(t,i,e){return Function.prototype.apply.call(t,i,e)};t=i&&"function"==typeof i.ownKeys?i.ownKeys:w.getOwnPropertySymbols?function(t){return w.getOwnPropertyNames(t).concat(w.getOwnPropertySymbols(t))}:function(t){return w.getOwnPropertyNames(t)};var s=Number.isNaN||function(t){return t!=t};function n(){n.init.call(this)}ct.exports=n,ct.exports.once=function(t,i){return new Promise(function(e,s){function n(e){t.removeListener(i,r),s(e)}function r(){"function"==typeof t.removeListener&&t.removeListener("error",n),e([].slice.call(arguments))}v(t,i,r,{once:!0}),"error"!==i&&function(t,i,e){"function"==typeof t.on&&v(t,"error",i,e)}(t,n,{once:!0})})},n.EventEmitter=n,n.prototype.Zf=void 0,n.prototype.$f=0,n.prototype.rv=void 0;var r=10;function h(t){if("function"!=typeof t)throw new g('The "listener" argument must be of type Function. Received type '+typeof t)}function o(t){return void 0===t.rv?n.defaultMaxListeners:t.rv}function a(t,i,e,s){var n,r,a;if(h(e),void 0===(r=t.Zf)?(r=t.Zf=w.create(null),t.$f=0):(void 0!==r.newListener&&(t.emit("newListener",i,e.listener?e.listener:e),r=t.Zf),a=r[i]),void 0===a)a=r[i]=e,++t.$f;else if("function"==typeof a?a=r[i]=s?[e,a]:[a,e]:s?a.unshift(e):a.push(e),(n=o(t))>0&&a.length>n&&!a.warned){a.warned=!0;var u=new m("Possible EventEmitter memory leak detected. "+a.length+" "+String(i)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=i,u.count=a.length,function(t){console&&console.warn&&console.warn(t)}(u)}return t}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function c(t,i,e){var s={fired:!1,wrapFn:void 0,target:t,type:i,listener:e},n=u.bind(s);return n.listener=e,s.wrapFn=n,n}function d(t,i,e){var s=t.Zf;if(void 0===s)return[];var n=s[i];return void 0===n?[]:"function"==typeof n?e?[n.listener||n]:[n]:e?function(t){for(var i=new Array(t.length),e=0;e<i.length;++e)i[e]=t[e].listener||t[e];return i}(n):f(n,n.length)}function l(t){var i=this.Zf;if(void 0!==i){var e=i[t];if("function"==typeof e)return 1;if(void 0!==e)return e.length}return 0}function f(t,i){for(var e=new Array(i),s=0;s<i;++s)e[s]=t[s];return e}function v(t,i,e,s){if("function"==typeof t.on)s.once?t.once(i,e):t.on(i,e);else{if("function"!=typeof t.addEventListener)throw new g('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(i,function n(r){s.once&&t.removeEventListener(i,n),e(r)})}}return w.defineProperty(n,"defaultMaxListeners",{enumerable:!0,get:function(){return r},set:function(t){if("number"!=typeof t||t<0||s(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");r=t}}),n.init=function(){(void 0===this.Zf||this.Zf===w.getPrototypeOf(this).Zf)&&(this.Zf=w.create(null),this.$f=0),this.rv=this.rv||void 0},n.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||s(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this.rv=t,this},n.prototype.getMaxListeners=function(){return o(this)},n.prototype.emit=function(t){for(var i=[],s=1;s<arguments.length;s++)i.push(arguments[s]);var n="error"===t,r=this.Zf;if(void 0!==r)n=n&&void 0===r.error;else if(!n)return!1;if(n){var h;if(i.length>0&&(h=i[0]),h instanceof m)throw h;var o=new m("Unhandled error."+(h?" ("+h.message+")":""));throw o.context=h,o}var a=r[t];if(void 0===a)return!1;if("function"==typeof a)e(a,this,i);else{var u=a.length,c=f(a,u);for(s=0;s<u;++s)e(c[s],this,i)}return!0},n.prototype.addListener=function(t,i){return a(this,t,i,!1)},n.prototype.on=n.prototype.addListener,n.prototype.prependListener=function(t,i){return a(this,t,i,!0)},n.prototype.once=function(t,i){return h(i),this.on(t,c(this,t,i)),this},n.prototype.prependOnceListener=function(t,i){return h(i),this.prependListener(t,c(this,t,i)),this},n.prototype.removeListener=function(t,i){var e,s,n,r,o;if(h(i),void 0===(s=this.Zf))return this;if(void 0===(e=s[t]))return this;if(e===i||e.listener===i)0===--this.$f?this.Zf=w.create(null):(delete s[t],s.removeListener&&this.emit("removeListener",t,e.listener||i));else if("function"!=typeof e){for(n=-1,r=e.length-1;r>=0;r--)if(e[r]===i||e[r].listener===i){o=e[r].listener,n=r;break}if(n<0)return this;0===n?e.shift():function(t,i){for(;i+1<t.length;i++)t[i]=t[i+1];t.pop()}(e,n),1===e.length&&(s[t]=e[0]),void 0!==s.removeListener&&this.emit("removeListener",t,o||i)}return this},n.prototype.off=n.prototype.removeListener,n.prototype.removeAllListeners=function(t){var i,e,s;if(void 0===(e=this.Zf))return this;if(void 0===e.removeListener)return 0===arguments.length?(this.Zf=w.create(null),this.$f=0):void 0!==e[t]&&(0===--this.$f?this.Zf=w.create(null):delete e[t]),this;if(0===arguments.length){var n,r=w.keys(e);for(s=0;s<r.length;++s)"removeListener"!==(n=r[s])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this.Zf=w.create(null),this.$f=0,this}if("function"==typeof(i=e[t]))this.removeListener(t,i);else if(void 0!==i)for(s=i.length-1;s>=0;s--)this.removeListener(t,i[s]);return this},n.prototype.listeners=function(t){return d(this,t,!0)},n.prototype.rawListeners=function(t){return d(this,t,!1)},n.listenerCount=function(t,i){return"function"==typeof t.listenerCount?t.listenerCount(i):l.call(t,i)},n.prototype.listenerCount=l,n.prototype.eventNames=function(){return this.$f>0?t(this.Zf):[]},ct.exports}const lt=A(dt());var ft,vt={exports:{}};var _t=function(){if(ft)return vt.exports;ft=1,vt.exports=i,vt.exports.filter=function(e,s){var n=new t;return i(e,n,s),n};var t=dt().EventEmitter;function i(t,i,e){Array.isArray(e)||(e=[e]);var s=[];return e.forEach(function(e){var n=function(){var t=[].slice.call(arguments);t.unshift(e),i.emit.apply(i,t)};s.push(n),t.on(e,n)}),function(){e.forEach(function(i,e){t.removeListener(i,s[e])})}}return vt.exports}();const gt=A(_t);var pt,mt={exports:{}};var wt=(pt||(pt=1,function(t){var i;self,i=()=>{return t={7:t=>{var i,e="object"==typeof Reflect?Reflect:null,s=e&&"function"==typeof e.apply?e.apply:function(t,i,e){return Function.prototype.apply.call(t,i,e)};i=e&&"function"==typeof e.ownKeys?e.ownKeys:w.getOwnPropertySymbols?function(t){return w.getOwnPropertyNames(t).concat(w.getOwnPropertySymbols(t))}:function(t){return w.getOwnPropertyNames(t)};var n=Number.isNaN||function(t){return t!=t};function r(){r.init.call(this)}t.exports=r,t.exports.once=function(t,i){return new Promise(function(e,s){function n(e){t.removeListener(i,r),s(e)}function r(){"function"==typeof t.removeListener&&t.removeListener("error",n),e([].slice.call(arguments))}var h,o;_(t,i,r,{once:!0}),"error"!==i&&(o=n,"function"==typeof(h=t).on&&_(h,"error",o,{once:!0}))})},r.EventEmitter=r,r.prototype.Zf=void 0,r.prototype.$f=0,r.prototype.rv=void 0;var h=10;function o(t){if("function"!=typeof t)throw new g('The "listener" argument must be of type Function. Received type '+typeof t)}function a(t){return void 0===t.rv?r.defaultMaxListeners:t.rv}function u(t,i,e,s){var n,r,h,u;if(o(e),void 0===(r=t.Zf)?(r=t.Zf=w.create(null),t.$f=0):(void 0!==r.newListener&&(t.emit("newListener",i,e.listener?e.listener:e),r=t.Zf),h=r[i]),void 0===h)h=r[i]=e,++t.$f;else if("function"==typeof h?h=r[i]=s?[e,h]:[h,e]:s?h.unshift(e):h.push(e),(n=a(t))>0&&h.length>n&&!h.warned){h.warned=!0;var c=new m("Possible EventEmitter memory leak detected. "+h.length+" "+String(i)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=t,c.type=i,c.count=h.length,u=c,console&&console.warn&&console.warn(u)}return t}function c(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(t,i,e){var s={fired:!1,wrapFn:void 0,target:t,type:i,listener:e},n=c.bind(s);return n.listener=e,s.wrapFn=n,n}function l(t,i,e){var s=t.Zf;if(void 0===s)return[];var n=s[i];return void 0===n?[]:"function"==typeof n?e?[n.listener||n]:[n]:e?function(t){for(var i=new Array(t.length),e=0;e<i.length;++e)i[e]=t[e].listener||t[e];return i}(n):v(n,n.length)}function f(t){var i=this.Zf;if(void 0!==i){var e=i[t];if("function"==typeof e)return 1;if(void 0!==e)return e.length}return 0}function v(t,i){for(var e=new Array(i),s=0;s<i;++s)e[s]=t[s];return e}function _(t,i,e,s){if("function"==typeof t.on)s.once?t.once(i,e):t.on(i,e);else{if("function"!=typeof t.addEventListener)throw new g('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(i,function n(r){s.once&&t.removeEventListener(i,n),e(r)})}}w.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return h},set:function(t){if("number"!=typeof t||t<0||n(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");h=t}}),r.init=function(){void 0!==this.Zf&&this.Zf!==w.getPrototypeOf(this).Zf||(this.Zf=w.create(null),this.$f=0),this.rv=this.rv||void 0},r.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||n(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this.rv=t,this},r.prototype.getMaxListeners=function(){return a(this)},r.prototype.emit=function(t){for(var i=[],e=1;e<arguments.length;e++)i.push(arguments[e]);var n="error"===t,r=this.Zf;if(void 0!==r)n=n&&void 0===r.error;else if(!n)return!1;if(n){var h;if(i.length>0&&(h=i[0]),h instanceof m)throw h;var o=new m("Unhandled error."+(h?" ("+h.message+")":""));throw o.context=h,o}var a=r[t];if(void 0===a)return!1;if("function"==typeof a)s(a,this,i);else{var u=a.length,c=v(a,u);for(e=0;e<u;++e)s(c[e],this,i)}return!0},r.prototype.addListener=function(t,i){return u(this,t,i,!1)},r.prototype.on=r.prototype.addListener,r.prototype.prependListener=function(t,i){return u(this,t,i,!0)},r.prototype.once=function(t,i){return o(i),this.on(t,d(this,t,i)),this},r.prototype.prependOnceListener=function(t,i){return o(i),this.prependListener(t,d(this,t,i)),this},r.prototype.removeListener=function(t,i){var e,s,n,r,h;if(o(i),void 0===(s=this.Zf))return this;if(void 0===(e=s[t]))return this;if(e===i||e.listener===i)0==--this.$f?this.Zf=w.create(null):(delete s[t],s.removeListener&&this.emit("removeListener",t,e.listener||i));else if("function"!=typeof e){for(n=-1,r=e.length-1;r>=0;r--)if(e[r]===i||e[r].listener===i){h=e[r].listener,n=r;break}if(n<0)return this;0===n?e.shift():function(t,i){for(;i+1<t.length;i++)t[i]=t[i+1];t.pop()}(e,n),1===e.length&&(s[t]=e[0]),void 0!==s.removeListener&&this.emit("removeListener",t,h||i)}return this},r.prototype.off=r.prototype.removeListener,r.prototype.removeAllListeners=function(t){var i,e,s;if(void 0===(e=this.Zf))return this;if(void 0===e.removeListener)return 0===arguments.length?(this.Zf=w.create(null),this.$f=0):void 0!==e[t]&&(0==--this.$f?this.Zf=w.create(null):delete e[t]),this;if(0===arguments.length){var n,r=w.keys(e);for(s=0;s<r.length;++s)"removeListener"!==(n=r[s])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this.Zf=w.create(null),this.$f=0,this}if("function"==typeof(i=e[t]))this.removeListener(t,i);else if(void 0!==i)for(s=i.length-1;s>=0;s--)this.removeListener(t,i[s]);return this},r.prototype.listeners=function(t){return l(this,t,!0)},r.prototype.rawListeners=function(t){return l(this,t,!1)},r.listenerCount=function(t,i){return"function"==typeof t.listenerCount?t.listenerCount(i):f.call(t,i)},r.prototype.listenerCount=f,r.prototype.eventNames=function(){return this.$f>0?i(this.Zf):[]}},156:function(t,i,e){var s=this&&this.hv||(w.create?function(t,i,e,s){void 0===s&&(s=e);var n=w.getOwnPropertyDescriptor(i,e);n&&!("get"in n?!i.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return i[e]}}),w.defineProperty(t,s,n)}:function(t,i,e,s){void 0===s&&(s=e),t[s]=i[e]}),n=this&&this.ov||function(t,i){for(var e in t)"default"===e||w.prototype.hasOwnProperty.call(i,e)||s(i,t,e)},r=this&&this.uv||function(t){return t&&t.__esModule?t:{default:t}};w.defineProperty(i,"__esModule",{value:!0}),i.Logger=void 0;var h=e(586);w.defineProperty(i,"Logger",{enumerable:!0,get:function(){return r(h).default}}),n(e(284),i),n(e(280),i),n(e(738),i),n(e(767),i)},185:(t,i)=>{w.defineProperty(i,"__esModule",{value:!0}),i.calculatePacketsLostRatio=i.calculateRate=i.getMediaKind=void 0,i.getMediaKind=t=>{let i=t.kind||t.mediaType;return["audio","video"].includes(i)||"inbound-rtp"!==t.type||(i=t.id.toLocaleLowerCase().includes("video")?"video":"audio"),i},i.calculateRate=(t,i,e,s)=>e&&s?(i-s)/((t-e)/1e3):0,i.calculatePacketsLostRatio=(t,i,e,s)=>{const n=t-(null!=e?e:0),r=n+(i-(null!=s?s:0));return 0===r?0:n/r}},280:(t,i)=>{w.defineProperty(i,"__esModule",{value:!0})},284:function(t,i,e){var s,n,r,h,o,a,u,c,d,l,f,_,m,y,b,A,S=this&&this.fv||function(t,i,e,s){return new(e||(e=Promise))(function(n,r){function h(t){try{a(s.next(t))}catch(t){r(t)}}function o(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e(function(t){t(i)})).then(h,o)}a((s=s.apply(t,i||[])).next())})},T=this&&this.vv||function(t,i,e,s,n){if("m"===s)throw new g("Private method is not writable");if("a"===s&&!n)throw new g("Private accessor was defined without a setter");if("function"==typeof i?t!==i||!n:!i.has(t))throw new g("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(t,e):n?n.value=e:i.set(t,e),e},k=this&&this._v||function(t,i,e,s){if("a"===e&&!s)throw new g("Private accessor was defined without a getter");if("function"==typeof i?t!==i||!s:!i.has(t))throw new g("Cannot read private member from an object whose class did not declare it");return"m"===e?s:"a"===e?s.call(t):s?s.value:i.get(t)},E=this&&this.uv||function(t){return t&&t.__esModule?t:{default:t}};w.defineProperty(i,"__esModule",{value:!0}),i.WebRTCStats=void 0;const x=e(7),P=E(e(586)),I=e(738),C=e(185);class R extends x.EventEmitter{constructor(t){super(),s.add(this),n.set(this,void 0),r.set(this,void 0),h.set(this,void 0),o.set(this,null),a.set(this,void 0),u.set(this,null),this.start=()=>{k(this,a,"f").info("WebRTC statistics collection is starting..."),T(this,u,null,"f"),T(this,o,v(k(this,c,"f"),k(this,r,"f")),"f")},this.stop=()=>{k(this,o,"f")&&(p(k(this,o,"f")),T(this,o,null,"f"),k(this,a,"f").info("WebRTC statistics collection has stopped."))},c.set(this,()=>S(this,void 0,void 0,function*(){let t,i;try{k(this,a,"f").trace("Requesting WebRTC statistics..."),t=yield k(this,n,"f").call(this),i=(new Date).toISOString()}catch(t){return k(this,a,"f").error("Problem collecting the WebRTC statistics.",t),void this.emit("error","Problem collecting the WebRTC statistics - ".concat(t))}const e=Array.from(t.values()),r={timestamp:i,input:{audio:[],video:[]},output:{audio:[],video:[]}};k(this,h,"f")&&(r.rawStats=t);for(let i=0;i<w.keys(e).length;i++){const n=e[i];switch(n.type){case"outbound-rtp":const i=n,e=(0,C.getMediaKind)(i);"audio"===e?yield k(this,s,"m",f).call(this,t,i,r):"video"===e&&(yield k(this,s,"m",_).call(this,t,i,r));break;case"inbound-rtp":const h=n;let o=(0,C.getMediaKind)(h);"audio"===o?yield k(this,s,"m",y).call(this,t,h,r):"video"===o&&(yield k(this,s,"m",b).call(this,t,h,r));break;case"candidate-pair":const a=n;a.nominated&&k(this,s,"m",A).call(this,a,r)}}T(this,u,r,"f"),this.emit("stats",r)})),T(this,a,P.default.get("WebRTCStats"),"f"),T(this,n,t.getStats,"f"),T(this,r,t.getStatsInterval||1e3,"f"),T(this,h,!!t.includeRawStats,"f")}}i.WebRTCStats=R,n=new WeakMap,r=new WeakMap,h=new WeakMap,o=new WeakMap,a=new WeakMap,u=new WeakMap,c=new WeakMap,s=new WeakSet,d=function(t,i){if(i){const e=t.get(i);if(e)return{mimeType:e.mimeType}}return{}},l=function(t,i,e){return S(this,void 0,void 0,function*(){var n,r,h,o;const a=(0,C.calculateRate)(i.timestamp,i.bytesSent,null==e?void 0:e.timestamp,null==e?void 0:e.totalBytesSent),u=(0,C.calculateRate)(i.timestamp,i.packetsSent,null==e?void 0:e.timestamp,null==e?void 0:e.totalPacketsSent),c=k(this,s,"m",d).call(this,t,i.codecId);return w.assign({id:i.id,timestamp:i.timestamp,mid:i.mid,totalBytesSent:i.bytesSent,bytesSentDelta:i.bytesSent-(null!==(n=null==e?void 0:e.totalBytesSent)&&void 0!==n?n:0),totalPacketsSent:i.packetsSent,packetsSentDelta:i.packetsSent-(null!==(r=null==e?void 0:e.totalPacketsSent)&&void 0!==r?r:0),bitrate:a,packetRate:u,targetBitrate:i.targetBitrate,retransmittedPacketsSent:i.retransmittedPacketsSent,retransmittedPacketsSentDelta:i.retransmittedPacketsSent-(null!==(h=null==e?void 0:e.retransmittedPacketsSent)&&void 0!==h?h:0),retransmittedBytesSent:i.retransmittedBytesSent,retransmittedBytesSentDelta:i.retransmittedBytesSent-(null!==(o=null==e?void 0:e.retransmittedBytesSent)&&void 0!==o?o:0)},c)})},f=function(t,i,e){return S(this,void 0,void 0,function*(){var n;const r=null===(n=k(this,u,"f"))||void 0===n?void 0:n.output.audio.find(t=>t.id===i.id);if(r&&i.timestamp-r.timestamp<=0)return;const h=yield k(this,s,"m",l).call(this,t,i,r),o=w.assign({},h);e.output.audio.push(o)})},_=function(t,i,e){return S(this,void 0,void 0,function*(){var n;const r=null===(n=k(this,u,"f"))||void 0===n?void 0:n.output.video.find(t=>t.id===i.id);if(r&&i.timestamp-r.timestamp<=0)return;const h=yield k(this,s,"m",l).call(this,t,i,r);let o=I.QualityLimitationReason.none;i.qualityLimitationReason&&(o=i.qualityLimitationReason);const a=w.assign(w.assign({},h),{frameWidth:i.frameWidth,frameHeight:i.frameHeight,framesPerSecond:i.framesPerSecond,framesSent:i.framesSent,qualityLimitationReason:o,qualityLimitationDurations:i.qualityLimitationDurations});e.output.video.push(a)})},m=function(t,i,e){return S(this,void 0,void 0,function*(){var n,r;const h=(0,C.calculateRate)(i.timestamp,i.bytesReceived,null==e?void 0:e.timestamp,null==e?void 0:e.totalBytesReceived),o=(0,C.calculateRate)(i.timestamp,i.packetsReceived,null==e?void 0:e.timestamp,null==e?void 0:e.totalPacketsReceived),a=(0,C.calculatePacketsLostRatio)(i.packetsLost,i.packetsReceived,null==e?void 0:e.totalPacketsLost,null==e?void 0:e.totalPacketsReceived),u=(null!==(n=i.packetsLost)&&void 0!==n?n:0)-(null!==(r=null==e?void 0:e.totalPacketsLost)&&void 0!==r?r:0),c=k(this,s,"m",d).call(this,t,i.codecId);return w.assign({id:i.id,timestamp:i.timestamp,mid:i.mid,trackIdentifier:i.trackIdentifier,jitter:i.jitter,jitterBufferDelay:i.jitterBufferDelay,jitterBufferEmittedCount:i.jitterBufferEmittedCount,totalBytesReceived:i.bytesReceived,totalPacketsReceived:i.packetsReceived,totalPacketsLost:i.packetsLost,bitrate:h,packetRate:o,packetLossRatio:a,packetLossDelta:u},c)})},y=function(t,i,e){return S(this,void 0,void 0,function*(){var n;const r=null===(n=k(this,u,"f"))||void 0===n?void 0:n.input.audio.find(t=>t.id===i.id);if(r&&i.timestamp-r.timestamp<=0)return;const h=yield k(this,s,"m",m).call(this,t,i,r);e.input.audio.push(h)})},b=function(t,i,e){return S(this,void 0,void 0,function*(){var n;const r=null===(n=k(this,u,"f"))||void 0===n?void 0:n.input.video.find(t=>t.id===i.id);if(r&&i.timestamp-r.timestamp<=0)return;const h=yield k(this,s,"m",m).call(this,t,i,r),o=w.assign(w.assign({},h),{keyFramesDecoded:i.keyFramesDecoded,frameHeight:i.frameHeight,frameWidth:i.frameWidth,framesDecoded:i.framesDecoded,framesDropped:i.framesDropped,framesPerSecond:i.framesPerSecond,framesReceived:i.framesReceived});e.input.video.push(o)})},A=function(t,i){i.totalRoundTripTime=t.totalRoundTripTime,i.currentRoundTripTime=t.currentRoundTripTime,i.responsesReceived=t.responsesReceived,i.availableOutgoingBitrate=t.availableOutgoingBitrate,i.availableIncomingBitrate=t.availableIncomingBitrate}},586:function(t,i,e){var s,n;!function(){var r,h={VERSION:"1.6.1"},o={},a=function(t,i){return function(){return i.apply(t,arguments)}},u=function(){var t,i,e=arguments,s=e[0];for(i=1;i<e.length;i++)for(t in e[i])!(t in s)&&e[i].hasOwnProperty(t)&&(s[t]=e[i][t]);return s},c=function(t,i){return{value:t,name:i}};h.TRACE=c(1,"TRACE"),h.DEBUG=c(2,"DEBUG"),h.INFO=c(3,"INFO"),h.TIME=c(4,"TIME"),h.WARN=c(5,"WARN"),h.ERROR=c(8,"ERROR"),h.OFF=c(99,"OFF");var d=function(t){this.context=t,this.setLevel(t.filterLevel),this.log=this.info};d.prototype={setLevel:function(t){t&&"value"in t&&(this.context.filterLevel=t)},getLevel:function(){return this.context.filterLevel},enabledFor:function(t){var i=this.context.filterLevel;return t.value>=i.value},trace:function(){this.invoke(h.TRACE,arguments)},debug:function(){this.invoke(h.DEBUG,arguments)},info:function(){this.invoke(h.INFO,arguments)},warn:function(){this.invoke(h.WARN,arguments)},error:function(){this.invoke(h.ERROR,arguments)},time:function(t){"string"==typeof t&&t.length>0&&this.invoke(h.TIME,[t,"start"])},timeEnd:function(t){"string"==typeof t&&t.length>0&&this.invoke(h.TIME,[t,"end"])},invoke:function(t,i){r&&this.enabledFor(t)&&r(i,u({level:t},this.context))}};var l,f=new d({filterLevel:h.OFF});(l=h).enabledFor=a(f,f.enabledFor),l.trace=a(f,f.trace),l.debug=a(f,f.debug),l.time=a(f,f.time),l.timeEnd=a(f,f.timeEnd),l.info=a(f,f.info),l.warn=a(f,f.warn),l.error=a(f,f.error),l.log=l.info,h.setHandler=function(t){r=t},h.setLevel=function(t){for(var i in f.setLevel(t),o)o.hasOwnProperty(i)&&o[i].setLevel(t)},h.getLevel=function(){return f.getLevel()},h.get=function(t){return o[t]||(o[t]=new d(u({name:t},f.context)))},h.createDefaultHandler=function(t){(t=t||{}).formatter=t.formatter||function(t,i){i.name&&t.unshift("["+i.name+"]")};var i={},e=function(t,i){Function.prototype.apply.call(t,console,i)};return typeof console>"u"?function(){}:function(s,n){s=Array.prototype.slice.call(s);var r,o=console.log;n.level===h.TIME?(r=(n.name?"["+n.name+"] ":"")+s[0],"start"===s[1]?console.time?console.time(r):i[r]=(new Date).getTime():console.timeEnd?console.timeEnd(r):e(o,[r+": "+((new Date).getTime()-i[r])+"ms"])):(n.level===h.WARN&&console.warn?o=console.warn:n.level===h.ERROR&&console.error?o=console.error:n.level===h.INFO&&console.info?o=console.info:n.level===h.DEBUG&&console.debug?o=console.debug:n.level===h.TRACE&&console.trace&&(o=console.trace),t.formatter(s,n),e(o,s))}},h.useDefaults=function(t){h.setLevel(t&&t.defaultLevel||h.DEBUG),h.setHandler(h.createDefaultHandler(t))},h.setDefaults=h.useDefaults,void 0===(n="function"==typeof(s=h)?s.call(i,e,i,t):s)||(t.exports=n)}()},738:(t,i)=>{var e,s;w.defineProperty(i,"__esModule",{value:!0}),i.QualityLimitationReason=void 0,(s=e||(i.QualityLimitationReason=e={}))[s.none=0]="none",s[s.cpu=1]="cpu",s[s.bandwidth=2]="bandwidth",s[s.other=3]="other"},767:(t,i)=>{w.defineProperty(i,"__esModule",{value:!0})}},i={},function e(s){var n=i[s];if(void 0!==n)return n.exports;var r=i[s]={exports:{}};return t[s].call(r.exports,r,r.exports,e),r.exports}(156);var t,i},t.exports=i()}(mt)),mt.exports);const yt=at.get("PeerConnectionStats"),bt="stats";class At extends lt{init(t){if(this.initialized)return void yt.warn("PeerConnectionStats.init() has already been called. Automatic initialization occurs when the PeerConnectionStats object is constructed.");yt.info("Initializing peer connection stats");const i=this.peer;try{this.collection=new wt.WebRTCStats({getStatsInterval:t,getStats:()=>i.getStats(),includeRawStats:!0}),this.collection.on("stats",t=>{const i=(t=>{const i=t,{input:e,output:s,rawStats:n}=i,r=y(i,["input","output","rawStats"]);return f(l({},r),{audio:{inbounds:t.input.audio.map(t=>{var i=t,{packetLossRatio:e,packetLossDelta:s,bitrate:n}=i,r=y(i,["packetLossRatio","packetLossDelta","bitrate"]);return l({packetsLostRatioPerSecond:e,packetsLostDeltaPerSecond:s,bitrateBitsPerSecond:8*n,bitrate:n},r)}),outbounds:t.output.audio.map(t=>{var i=t,{packetLossRatio:e,packetLossDelta:s,bitrate:n}=i,r=y(i,["packetLossRatio","packetLossDelta","bitrate"]);return l({packetsLostRatioPerSecond:e,packetsLostDeltaPerSecond:s,bitrateBitsPerSecond:8*n,bitrate:n},r)})},video:{inbounds:t.input.video.map(t=>{var i=t,{packetLossRatio:e,packetLossDelta:s,bitrate:n}=i,r=y(i,["packetLossRatio","packetLossDelta","bitrate"]);return l({packetsLostRatioPerSecond:e,packetsLostDeltaPerSecond:s,bitrateBitsPerSecond:8*n,bitrate:n},r)}),outbounds:t.output.video.map(t=>{var i=t,{packetLossRatio:e,packetLossDelta:s,bitrate:n}=i,r=y(i,["packetLossRatio","packetLossDelta","bitrate"]);return l({packetsLostRatioPerSecond:e,packetsLostDeltaPerSecond:s,bitrateBitsPerSecond:8*n,bitrate:n},r)})},raw:t.rawStats})})(t);Y(i),this.emit(bt,i)}),this.collection.start(),this.initialized=!0}catch(t){yt.error(t)}}parseStats(t){return yt.warn("The parseStats method is deprecated and will be removed in future releases."),null}stop(){yt.info("Stopping peer connection stats"),this.collection.stop()}constructor(t,i={statsIntervalMs:1e3,autoInitStats:!0}){super(),this.peer=t,this.collection=null,this.initialized=!1,i.autoInitStats&&this.init(i.statsIntervalMs)}}var St,Tt,kt,Et,xt,Pt,It,Ct,Rt,Dt,Nt,Bt,Mt,Lt,Ot,Ft,Ut,Vt,Ht,Wt,qt,zt={},Gt={},Xt={},jt={exports:{}};function Qt(){if(St)return jt.exports;St=1;var t=jt.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(t){return t.encoding?"rtpmap:%d %s/%s/%s":t.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(t){return null!=t.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(t){return null!=t.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(t){return"extmap:%d"+(t.direction?"/%s":"%v")+(t["encrypt-uri"]?" %s":"%v")+" %s"+(t.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(t){return null!=t.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(t){var i="candidate:%s %d %s %d %s %d typ %s";return i+=null!=t.raddr?" raddr %s rport %d":"%v%v",i+=null!=t.tcptype?" tcptype %s":"%v",null!=t.generation&&(i+=" generation %d"),i+=null!=t["network-id"]?" network-id %d":"%v",i+=null!=t["network-cost"]?" network-cost %d":"%v"}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(t){var i="ssrc:%d";return null!=t.attribute&&(i+=" %s",null!=t.value&&(i+=":%s")),i}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(t){return null!=t.maxMessageSize?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(t){return t.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(t){return"imageattr:%s %s %s"+(t.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(t){return"simulcast:%s %s"+(t.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(t){return"ts-refclk:%s"+(null!=t.clksrcExt?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(t){var i="mediaclk:";return i+=null!=t.id?"id=%s %s":"%v%s",i+=null!=t.mediaClockValue?"=%s":"",i+=null!=t.rateNumerator?" rate=%s":"",i+=null!=t.rateDenominator?"/%s":""}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};return w.keys(t).forEach(function(i){t[i].forEach(function(t){t.reg||(t.reg=/(.*)/),t.format||(t.format="%s")})}),jt.exports}function Kt(){return Tt||(Tt=1,function(t){var i=function(t){return String(Number(t))===t?Number(t):t},e=function(t,e,s){var n=t.name&&t.names;t.push&&!e[t.push]?e[t.push]=[]:n&&!e[t.name]&&(e[t.name]={});var r=t.push?{}:n?e[t.name]:e;(function(t,e,s,n){if(n&&!s)e[n]=i(t[1]);else for(var r=0;r<s.length;r+=1)null!=t[r+1]&&(e[s[r]]=i(t[r+1]))})(s.match(t.reg),r,t.names,t.name),t.push&&e[t.push].push(r)},s=Qt(),n=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(t){var i={},r=[],h=i;return t.split(/(\r\n|\r|\n)/).filter(n).forEach(function(t){var i=t[0],n=t.slice(2);"m"===i&&(r.push({rtp:[],fmtp:[]}),h=r[r.length-1]);for(var o=0;o<(s[i]||[]).length;o+=1){var a=s[i][o];if(a.reg.test(n))return e(a,h,n)}}),i.media=r,i};var r=function(t,e){var s=e.split(/=(.+)/,2);return 2===s.length?t[s[0]]=i(s[1]):1===s.length&&e.length>1&&(t[s[0]]=void 0),t};t.parseParams=function(t){return t.split(/;\s?/).reduce(r,{})},t.parseFmtpConfig=t.parseParams,t.parsePayloads=function(t){return t.toString().split(" ").map(Number)},t.parseRemoteCandidates=function(t){for(var e=[],s=t.split(" ").map(i),n=0;n<s.length;n+=3)e.push({component:s[n],ip:s[n+1],port:s[n+2]});return e},t.parseImageAttributes=function(t){return t.split(" ").map(function(t){return t.substring(1,t.length-1).split(",").reduce(r,{})})},t.parseSimulcastStreamList=function(t){return t.split(";").map(function(t){return t.split(",").map(function(t){var e,s=!1;return"~"!==t[0]?e=i(t):(e=i(t.substring(1,t.length)),s=!0),{scid:e,paused:s}})})}}(Xt)),Xt}function Yt(){if(Et)return kt;Et=1;var t=Qt(),i=/%[sdv%]/g,e=function(t){var e=1,s=arguments,n=s.length;return t.replace(i,function(t){if(e>=n)return t;var i=s[e];switch(e+=1,t){case"%%":return"%";case"%s":return String(i);case"%d":return Number(i);case"%v":return""}})},s=function(t,i,s){var n=[t+"="+(i.format instanceof Function?i.format(i.push?s:s[i.name]):i.format)];if(i.names)for(var r=0;r<i.names.length;r+=1){var h=i.names[r];i.name?n.push(s[i.name][h]):n.push(s[i.names[r]])}else n.push(s[i.name]);return e.apply(null,n)},n=["v","o","s","i","u","e","p","c","b","t","r","z","a"],r=["i","c","b","a"];return kt=function(i,e){e=e||{},null==i.version&&(i.version=0),null==i.name&&(i.name=" "),i.media.forEach(function(t){null==t.payloads&&(t.payloads="")});var h=e.outerOrder||n,o=e.innerOrder||r,a=[];return h.forEach(function(e){t[e].forEach(function(t){t.name in i&&null!=i[t.name]?a.push(s(e,t,i)):t.push in i&&null!=i[t.push]&&i[t.push].forEach(function(i){a.push(s(e,t,i))})})}),i.media.forEach(function(i){a.push(s("m",t.m[0],i)),o.forEach(function(e){t[e].forEach(function(t){t.name in i&&null!=i[t.name]?a.push(s(e,t,i)):t.push in i&&null!=i[t.push]&&i[t.push].forEach(function(i){a.push(s(e,t,i))})})})}),a.join("\r\n")+"\r\n"}}function Jt(){if(Rt)return Ct;Rt=1;class t{equals(t){return t.foundation===this.foundation&&t.componentId===this.componentId&&t.transport===this.transport&&t.priority===this.priority&&t.address===this.address&&t.port===this.port&&t.type===this.type&&t.relAddr===this.relAddr&&t.relPort===this.relPort}clone(){return new t(this.foundation,this.componentId,this.transport,this.priority,this.address,this.port,this.type,this.relAddr,this.relPort)}plain(){const t={foundation:this.foundation,componentId:this.componentId,transport:this.transport,priority:this.priority,address:this.address,port:this.port,type:this.type};return this.relAddr&&(t.relAddr=this.relAddr),this.relPort&&(t.relPort=this.relPort),t}getFoundation(){return this.foundation}getComponentId(){return this.componentId}getTransport(){return this.transport}getPriority(){return this.priority}getAddress(){return this.address}getPort(){return this.port}getType(){return this.type}getRelAddr(){return this.relAddr}getRelPort(){return this.relPort}constructor(t,i,e,s,n,r,h,o,a){this.foundation=t,this.componentId=i,this.transport=e,this.priority=s,this.address=n,this.port=r,this.type=h,this.relAddr=o,this.relPort=a}}return t.expand=function(i){return"CandidateInfo"===i.constructor.name?i:new t(i.foundation,i.componentId,i.transport,i.priority,i.address,i.port,i.type,i.relAddr,i.relPort)},t.clone=function(i){return"CandidateInfo"===i.constructor.name?i.clone():t.expand(i)},Ct=t}function Zt(){if(Nt)return Dt;Nt=1;class t{clone(){return new t(this.id,this.params)}plain(){return this.params.length?{id:this.id,params:this.params}:{id:this.id}}getId(){return this.id}getParams(){return this.params}constructor(t,i){this.id=t,this.params=i||[]}}return t.expand=function(i){return"RTCPFeedbackInfo"===i.constructor.name?i:new t(i.id,i.params)},t.clone=function(i){return"RTCPFeedbackInfo"===i.constructor.name?i.clone():t.expand(i)},Dt=t}function $t(){if(Mt)return Bt;Mt=1;const t=Zt();class i{clone(){const t=new i(this.codec,this.type,this.params);this.hasRTX()&&t.setRTX(this.getRTX());for(const i of this.rtcpfbs)t.addRTCPFeedback(i.clone());return this.hasChannels()&&t.setChannels(this.getChannels()),t}plain(){const t={codec:this.codec,type:this.type};this.rtx&&(t.rtx=this.rtx),this.channels&&(t.channels=this.channels),w.keys(this.params).length&&(t.params=this.params);for(const i of this.rtcpfbs)t.rtcpfbs||(t.rtcpfbs=[]),t.rtcpfbs.push(i.plain());return t}setRTX(t){this.rtx=t}getType(){return this.type}setType(t){this.type=t}getCodec(){return this.codec}getParams(){return this.params}addParams(t){for(const i in t)this.params[i]=t[i]}addParam(t,i){this.params[t]=i}hasParam(t){return w.hasOwnProperty.call(this.params,t)}getParam(t,i){if(void 0===i&&(i=void 0),this.hasParam(t))return this.params[t];if(void 0===i)throw new m("param ".concat(t," not found and no default value provided"));return""+i}hasRTX(){return this.rtx}getRTX(){return this.rtx}hasChannels(){return this.channels}getChannels(){return this.channels}setChannels(t){this.channels=t}addRTCPFeedback(t){this.rtcpfbs.add(t)}getRTCPFeedbacks(){return this.rtcpfbs}constructor(t,i,e){this.codec=t,this.type=i,this.params={},this.rtcpfbs=new Set,e&&this.addParams(e)}}return i.expand=function(e){if("CodecInfo"===e.constructor.name)return e;const s=new i(e.codec,e.type,e.params);e.rtx&&s.setRTX(e.rtx),e.channels&&s.setChannels(e.channels);for(const i of e.rtcpfbs||[]){const e=t.expand(i);s.addRTCPFeedback(e)}return s},i.clone=function(t){return"CodecInfo"===t.constructor.name?t.clone():i.expand(t)},i.MapFromNames=function(e,s,n){var r;const h=new Map;let o=96;for(const a of e){let e;const u=a.split(";"),c=u.shift().toLowerCase().trim();e="pcmu"===c?0:"pcma"===c?8:++o;const d=new i(c,e);"opus"===c?d.setChannels(2):"multiopus"===c&&d.setChannels(6),s&&"ulpfec"!==c&&"flexfec-03"!==c&&"red"!==c&&d.setRTX(++o);for(const i of n||[])d.addRTCPFeedback(new t(i.id,i.params));for(const t of u){let i=t.split("=");d.addParam(i[0].trim(),null===(r=i[1])||void 0===r?void 0:r.trim())}h.set(e,d)}return h},Bt=i}function ti(){if(Ot)return Lt;return Ot=1,Lt=function t(){var i=this;if(!(this instanceof t))return new(Function.prototype.bind.apply(t,[null].concat(Array.prototype.slice.call(arguments))));Array.from(arguments).forEach(function(t){i[t]=td("pv"+t)})},Lt}function ii(){if(Ut)return Ft;Ut=1;const t=ti()("ACTIVE","PASSIVE","ACTPASS","INACTIVE");return t.byValue=function(i){switch(i){case t.ACTIVE:case t.PASSIVE:case t.ACTPASS:case t.INACTIVE:return i}return t[i.toUpperCase()]},t.toString=function(i){switch(i){case t.ACTIVE:return"active";case t.PASSIVE:return"passive";case t.ACTPASS:return"actpass";case t.INACTIVE:return"inactive"}},t.reverse=function(i,e){switch(i){case t.ACTIVE:return t.PASSIVE;case t.PASSIVE:return t.ACTIVE;case t.ACTPASS:return e?t.ACTIVE:t.PASSIVE;case t.INACTIVE:return t.INACTIVE}},Ft=t}function ei(){if(Ht)return Vt;Ht=1;const t=ii();class i{clone(){return new i(this.setup,this.hash,this.fingerprint)}plain(){return{setup:t.toString(this.setup),hash:this.hash,fingerprint:this.fingerprint}}getFingerprint(){return this.fingerprint}getHash(){return this.hash}getSetup(){return this.setup}setSetup(t){this.setup=t}constructor(t,i,e){this.setup=t,this.hash=i,this.fingerprint=e}}return i.expand=function(e){return"DTLSInfo"===e.constructor.name?e:new i(e.setup?t.byValue(e.setup):t.ACTPASS,e.hash,e.fingerprint)},i.clone=function(t){return"DTLSInfo"===t.constructor.name?t.clone():i.expand(t)},Vt=i}function si(){if(qt)return Wt;qt=1;class t{clone(){return new t(this.tag,this.suite,this.keyParams,this.sessionParams)}plain(){return{tag:this.tag,suite:this.suite,keyParams:this.keyParams,sessionParams:this.sessionParams}}getSessionParams(){return this.sessionParams}getKeyParams(){return this.keyParams}getSuite(){return this.suite}getTag(){return this.tag}constructor(t,i,e,s){this.tag=t,this.suite=i,this.keyParams=e,this.sessionParams=s}}return t.expand=function(i){return"CryptoInfo"===i.constructor.name?i:new t(i.tag,i.suite,i.keyParams,i.sessionParams)},t.clone=function(i){return"CryptoInfo"===i.constructor.name?i.clone():t.expand(i)},Wt=t}var ni,ri={exports:{}},hi={exports:{}},oi={},ai={};var ui,ci,di,li,fi,vi,_i,gi,pi,mi,wi,yi,bi,Ai,Si,Ti,ki,Ei,xi,Pi,Ii,Ci,Ri,Di,Ni,Bi,Mi,Li,Oi,Fi,Ui,Vi,Hi,Wi={};function qi(){return ci||(ci=1,function(t){const i=function(){if(ni)return ai;ni=1,ai.byteLength=function(t){var i=r(t),e=i[0],s=i[1];return 3*(e+s)/4-s},ai.toByteArray=function(t){var s,n,h=r(t),o=h[0],a=h[1],u=new e(function(t,i,e){return 3*(i+e)/4-e}(0,o,a)),c=0,d=a>0?o-4:o;for(n=0;n<d;n+=4)s=i[t.charCodeAt(n)]<<18|i[t.charCodeAt(n+1)]<<12|i[t.charCodeAt(n+2)]<<6|i[t.charCodeAt(n+3)],u[c++]=s>>16&255,u[c++]=s>>8&255,u[c++]=255&s;return 2===a&&(s=i[t.charCodeAt(n)]<<2|i[t.charCodeAt(n+1)]>>4,u[c++]=255&s),1===a&&(s=i[t.charCodeAt(n)]<<10|i[t.charCodeAt(n+1)]<<4|i[t.charCodeAt(n+2)]>>2,u[c++]=s>>8&255,u[c++]=255&s),u},ai.fromByteArray=function(i){for(var e,s=i.length,n=s%3,r=[],h=16383,a=0,u=s-n;a<u;a+=h)r.push(o(i,a,a+h>u?u:a+h));return 1===n?(e=i[s-1],r.push(t[e>>2]+t[e<<4&63]+"==")):2===n&&(e=(i[s-2]<<8)+i[s-1],r.push(t[e>>10]+t[e>>4&63]+t[e<<2&63]+"=")),r.join("")};for(var t=[],i=[],e=typeof j<"u"?j:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=0;n<64;++n)t[n]=s[n],i[s.charCodeAt(n)]=n;function r(t){var i=t.length;if(i%4>0)throw new m("Invalid string. Length must be a multiple of 4");var e=t.indexOf("=");return-1===e&&(e=i),[e,e===i?0:4-e%4]}function h(i){return t[i>>18&63]+t[i>>12&63]+t[i>>6&63]+t[63&i]}function o(t,i,e){for(var s,n=[],r=i;r<e;r+=3)s=(t[r]<<16&16711680)+(t[r+1]<<8&65280)+(255&t[r+2]),n.push(h(s));return n.join("")}return i[45]=62,i[95]=63,ai}(),e=(ui||(ui=1,Wi.read=function(t,i,e,s,n){var r,h,o=8*n-s-1,a=(1<<o)-1,u=a>>1,c=-7,d=e?n-1:0,l=e?-1:1,f=t[i+d];for(d+=l,r=f&(1<<-c)-1,f>>=-c,c+=o;c>0;r=256*r+t[i+d],d+=l,c-=8);for(h=r&(1<<-c)-1,r>>=-c,c+=s;c>0;h=256*h+t[i+d],d+=l,c-=8);if(0===r)r=1-u;else{if(r===a)return h?NaN:1/0*(f?-1:1);h+=_.pow(2,s),r-=u}return(f?-1:1)*h*_.pow(2,r-s)},Wi.write=function(t,i,e,s,n,r){var h,o,a,u=8*r-n-1,c=(1<<u)-1,d=c>>1,l=23===n?_.pow(2,-24)-_.pow(2,-77):0,f=s?0:r-1,v=s?1:-1,g=i<0||0===i&&1/i<0?1:0;for(i=_.abs(i),S(i)||i===1/0?(o=S(i)?1:0,h=c):(h=_.floor(_.log(i)/_.LN2),i*(a=_.pow(2,-h))<1&&(h--,a*=2),(i+=h+d>=1?l/a:l*_.pow(2,1-d))*a>=2&&(h++,a/=2),h+d>=c?(o=0,h=c):h+d>=1?(o=(i*a-1)*_.pow(2,n),h+=d):(o=i*_.pow(2,d-1)*_.pow(2,n),h=0));n>=8;t[e+f]=255&o,f+=v,o/=256,n-=8);for(h=h<<n|o,u+=n;u>0;t[e+f]=255&h,f+=v,h/=256,u-=8);t[e+f-v]|=128*g}),Wi),s="function"==typeof Io&&"function"==typeof td?td("nodejs.util.inspect.custom"):null;t.Buffer=h,t.SlowBuffer=function(t){return+t!=t&&(t=0),h.alloc(+t)},t.INSPECT_MAX_BYTES=50;const n=2147483647;function r(t){if(t>n)throw new RangeError('The value "'+t+'" is invalid for option "size"');const i=new j(t);return w.setPrototypeOf(i,h.prototype),i}function h(t,i,e){if("number"==typeof t){if("string"==typeof i)throw new g('The "string" argument must be of type string. Received type number');return u(t)}return o(t,i,e)}function o(t,i,e){if("string"==typeof t)return function(t,i){if(("string"!=typeof i||""===i)&&(i="utf8"),!h.isEncoding(i))throw new g("Unknown encoding: "+i);const e=0|f(t,i);let s=r(e);const n=s.write(t,i);return n!==e&&(s=s.slice(0,n)),s}(t,i);if(ArrayBuffer.isView(t))return function(t){if(tt(t,j)){const i=new j(t);return d(i.buffer,i.byteOffset,i.byteLength)}return c(t)}(t);if(null==t)throw new g("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(tt(t,ArrayBuffer)||t&&tt(t.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(tt(t,SharedArrayBuffer)||t&&tt(t.buffer,SharedArrayBuffer)))return d(t,i,e);if("number"==typeof t)throw new g('The "value" argument must not be of type number. Received type number');const s=t.valueOf&&t.valueOf();if(null!=s&&s!==t)return h.from(s,i,e);const n=function(t){if(h.isBuffer(t)){const i=0|l(t.length),e=r(i);return 0===e.length||t.copy(e,0,0,i),e}if(void 0!==t.length)return"number"!=typeof t.length||it(t.length)?r(0):c(t);if("Buffer"===t.type&&Array.isArray(t.data))return c(t.data)}(t);if(n)return n;if(typeof Io<"u"&&null!=Io.toPrimitive&&"function"==typeof t[Io.toPrimitive])return h.from(t[Io.toPrimitive]("string"),i,e);throw new g("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function a(t){if("number"!=typeof t)throw new g('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function u(t){return a(t),r(t<0?0:0|l(t))}function c(t){const i=t.length<0?0:0|l(t.length),e=r(i);for(let s=0;s<i;s+=1)e[s]=255&t[s];return e}function d(t,i,e){if(i<0||t.byteLength<i)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<i+(e||0))throw new RangeError('"length" is outside of buffer bounds');let s;return s=void 0===i&&void 0===e?new j(t):void 0===e?new j(t,i):new j(t,i,e),w.setPrototypeOf(s,h.prototype),s}function l(t){if(t>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return 0|t}function f(t,i){if(h.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||tt(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new g('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const e=t.length,s=arguments.length>2&&!0===arguments[2];if(!s&&0===e)return 0;let n=!1;for(;;)switch(i){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":return J(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*e;case"hex":return e>>>1;case"base64":return Z(t).length;default:if(n)return s?-1:J(t).length;i=(""+i).toLowerCase(),n=!0}}function v(t,i,e){let s=!1;if((void 0===i||i<0)&&(i=0),i>this.length||((void 0===e||e>this.length)&&(e=this.length),e<=0)||(e>>>=0)<=(i>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return B(this,i,e);case"utf8":case"utf-8":return C(this,i,e);case"ascii":return D(this,i,e);case"latin1":case"binary":return N(this,i,e);case"base64":return I(this,i,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,i,e);default:if(s)throw new g("Unknown encoding: "+t);t=(t+"").toLowerCase(),s=!0}}function p(t,i,e){const s=t[i];t[i]=t[e],t[e]=s}function y(t,i,e,s,n){if(0===t.length)return-1;if("string"==typeof e?(s=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),it(e=+e)&&(e=n?0:t.length-1),e<0&&(e=t.length+e),e>=t.length){if(n)return-1;e=t.length-1}else if(e<0){if(!n)return-1;e=0}if("string"==typeof i&&(i=h.from(i,s)),h.isBuffer(i))return 0===i.length?-1:b(t,i,e,s,n);if("number"==typeof i)return i&=255,"function"==typeof j.prototype.indexOf?n?j.prototype.indexOf.call(t,i,e):j.prototype.lastIndexOf.call(t,i,e):b(t,[i],e,s,n);throw new g("val must be string, number or Buffer")}function b(t,i,e,s,n){let r,h=1,o=t.length,a=i.length;if(void 0!==s&&("ucs2"===(s=String(s).toLowerCase())||"ucs-2"===s||"utf16le"===s||"utf-16le"===s)){if(t.length<2||i.length<2)return-1;h=2,o/=2,a/=2,e/=2}function u(t,i){return 1===h?t[i]:t.readUInt16BE(i*h)}if(n){let s=-1;for(r=e;r<o;r++)if(u(t,r)===u(i,-1===s?0:r-s)){if(-1===s&&(s=r),r-s+1===a)return s*h}else-1!==s&&(r-=r-s),s=-1}else for(e+a>o&&(e=o-a),r=e;r>=0;r--){let e=!0;for(let s=0;s<a;s++)if(u(t,r+s)!==u(i,s)){e=!1;break}if(e)return r}return-1}function A(t,i,e,s){e=Number(e)||0;const n=t.length-e;s?(s=Number(s))>n&&(s=n):s=n;const r=i.length;let h;for(s>r/2&&(s=r/2),h=0;h<s;++h){const s=x(i.substr(2*h,2),16);if(it(s))return h;t[e+h]=s}return h}function T(t,i,e,s){return $(J(i,t.length-e),t,e,s)}function k(t,i,e,s){return $(function(t){const i=[];for(let e=0;e<t.length;++e)i.push(255&t.charCodeAt(e));return i}(i),t,e,s)}function E(t,i,e,s){return $(Z(i),t,e,s)}function P(t,i,e,s){return $(function(t,i){let e,s,n;const r=[];for(let h=0;h<t.length&&!((i-=2)<0);++h)e=t.charCodeAt(h),s=e>>8,n=e%256,r.push(n),r.push(s);return r}(i,t.length-e),t,e,s)}function I(t,e,s){return 0===e&&s===t.length?i.fromByteArray(t):i.fromByteArray(t.slice(e,s))}function C(t,i,e){e=_.min(t.length,e);const s=[];let n=i;for(;n<e;){const i=t[n];let r=null,h=i>239?4:i>223?3:i>191?2:1;if(n+h<=e){let e,s,o,a;switch(h){case 1:i<128&&(r=i);break;case 2:e=t[n+1],128==(192&e)&&(a=(31&i)<<6|63&e,a>127&&(r=a));break;case 3:e=t[n+1],s=t[n+2],128==(192&e)&&128==(192&s)&&(a=(15&i)<<12|(63&e)<<6|63&s,a>2047&&(a<55296||a>57343)&&(r=a));break;case 4:e=t[n+1],s=t[n+2],o=t[n+3],128==(192&e)&&128==(192&s)&&128==(192&o)&&(a=(15&i)<<18|(63&e)<<12|(63&s)<<6|63&o,a>65535&&a<1114112&&(r=a))}}null===r?(r=65533,h=1):r>65535&&(r-=65536,s.push(r>>>10&1023|55296),r=56320|1023&r),s.push(r),n+=h}return function(t){const i=t.length;if(i<=R)return String.fromCharCode.apply(String,t);let e="",s=0;for(;s<i;)e+=String.fromCharCode.apply(String,t.slice(s,s+=R));return e}(s)}t.kMaxLength=n,h.TYPED_ARRAY_SUPPORT=function(){try{const t=new j(1),i={foo:function(){return 42}};return w.setPrototypeOf(i,j.prototype),w.setPrototypeOf(t,i),42===t.foo()}catch(t){return!1}}(),!h.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),w.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.buffer}}),w.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.byteOffset}}),h.poolSize=8192,h.from=function(t,i,e){return o(t,i,e)},w.setPrototypeOf(h.prototype,j.prototype),w.setPrototypeOf(h,j),h.alloc=function(t,i,e){return function(t,i,e){return a(t),t<=0?r(t):void 0!==i?"string"==typeof e?r(t).fill(i,e):r(t).fill(i):r(t)}(t,i,e)},h.allocUnsafe=function(t){return u(t)},h.allocUnsafeSlow=function(t){return u(t)},h.isBuffer=function(t){return null!=t&&!0===t.mv&&t!==h.prototype},h.compare=function(t,i){if(tt(t,j)&&(t=h.from(t,t.offset,t.byteLength)),tt(i,j)&&(i=h.from(i,i.offset,i.byteLength)),!h.isBuffer(t)||!h.isBuffer(i))throw new g('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===i)return 0;let e=t.length,s=i.length;for(let n=0,r=_.min(e,s);n<r;++n)if(t[n]!==i[n]){e=t[n],s=i[n];break}return e<s?-1:s<e?1:0},h.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(t,i){if(!Array.isArray(t))throw new g('"list" argument must be an Array of Buffers');if(0===t.length)return h.alloc(0);let e;if(void 0===i)for(i=0,e=0;e<t.length;++e)i+=t[e].length;const s=h.allocUnsafe(i);let n=0;for(e=0;e<t.length;++e){let i=t[e];if(tt(i,j))n+i.length>s.length?(h.isBuffer(i)||(i=h.from(i)),i.copy(s,n)):j.prototype.set.call(s,i,n);else{if(!h.isBuffer(i))throw new g('"list" argument must be an Array of Buffers');i.copy(s,n)}n+=i.length}return s},h.byteLength=f,h.prototype.mv=!0,h.prototype.swap16=function(){const t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let i=0;i<t;i+=2)p(this,i,i+1);return this},h.prototype.swap32=function(){const t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let i=0;i<t;i+=4)p(this,i,i+3),p(this,i+1,i+2);return this},h.prototype.swap64=function(){const t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let i=0;i<t;i+=8)p(this,i,i+7),p(this,i+1,i+6),p(this,i+2,i+5),p(this,i+3,i+4);return this},h.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?C(this,0,t):v.apply(this,arguments)},h.prototype.toLocaleString=h.prototype.toString,h.prototype.equals=function(t){if(!h.isBuffer(t))throw new g("Argument must be a Buffer");return this===t||0===h.compare(this,t)},h.prototype.inspect=function(){let i="";const e=t.INSPECT_MAX_BYTES;return i=this.toString("hex",0,e).replace(/(.{2})/g,"$1 ").trim(),this.length>e&&(i+=" ... "),"<Buffer "+i+">"},s&&(h.prototype[s]=h.prototype.inspect),h.prototype.compare=function(t,i,e,s,n){if(tt(t,j)&&(t=h.from(t,t.offset,t.byteLength)),!h.isBuffer(t))throw new g('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===i&&(i=0),void 0===e&&(e=t?t.length:0),void 0===s&&(s=0),void 0===n&&(n=this.length),i<0||e>t.length||s<0||n>this.length)throw new RangeError("out of range index");if(s>=n&&i>=e)return 0;if(s>=n)return-1;if(i>=e)return 1;if(this===t)return 0;let r=(n>>>=0)-(s>>>=0),o=(e>>>=0)-(i>>>=0);const a=_.min(r,o),u=this.slice(s,n),c=t.slice(i,e);for(let t=0;t<a;++t)if(u[t]!==c[t]){r=u[t],o=c[t];break}return r<o?-1:o<r?1:0},h.prototype.includes=function(t,i,e){return-1!==this.indexOf(t,i,e)},h.prototype.indexOf=function(t,i,e){return y(this,t,i,e,!0)},h.prototype.lastIndexOf=function(t,i,e){return y(this,t,i,e,!1)},h.prototype.write=function(t,i,e,s){if(void 0===i)s="utf8",e=this.length,i=0;else if(void 0===e&&"string"==typeof i)s=i,e=this.length,i=0;else{if(!isFinite(i))throw new m("Buffer.write(string, encoding, offset[, length]) is no longer supported");i>>>=0,isFinite(e)?(e>>>=0,void 0===s&&(s="utf8")):(s=e,e=void 0)}const n=this.length-i;if((void 0===e||e>n)&&(e=n),t.length>0&&(e<0||i<0)||i>this.length)throw new RangeError("Attempt to write outside buffer bounds");s||(s="utf8");let r=!1;for(;;)switch(s){case"hex":return A(this,t,i,e);case"utf8":case"utf-8":return T(this,t,i,e);case"ascii":case"latin1":case"binary":return k(this,t,i,e);case"base64":return E(this,t,i,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,t,i,e);default:if(r)throw new g("Unknown encoding: "+s);s=(""+s).toLowerCase(),r=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this.yv||this,0)}};const R=4096;function D(t,i,e){let s="";e=_.min(t.length,e);for(let n=i;n<e;++n)s+=String.fromCharCode(127&t[n]);return s}function N(t,i,e){let s="";e=_.min(t.length,e);for(let n=i;n<e;++n)s+=String.fromCharCode(t[n]);return s}function B(t,i,e){const s=t.length;(!i||i<0)&&(i=0),(!e||e<0||e>s)&&(e=s);let n="";for(let s=i;s<e;++s)n+=et[t[s]];return n}function M(t,i,e){const s=t.slice(i,e);let n="";for(let t=0;t<s.length-1;t+=2)n+=String.fromCharCode(s[t]+256*s[t+1]);return n}function L(t,i,e){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+i>e)throw new RangeError("Trying to access beyond buffer length")}function O(t,i,e,s,n,r){if(!h.isBuffer(t))throw new g('"buffer" argument must be a Buffer instance');if(i>n||i<r)throw new RangeError('"value" argument is out of bounds');if(e+s>t.length)throw new RangeError("Index out of range")}function F(t,i,e,s,n){X(i,s,n,t,e,7);let r=Number(i&BigInt(4294967295));t[e++]=r,r>>=8,t[e++]=r,r>>=8,t[e++]=r,r>>=8,t[e++]=r;let h=Number(i>>BigInt(32)&BigInt(4294967295));return t[e++]=h,h>>=8,t[e++]=h,h>>=8,t[e++]=h,h>>=8,t[e++]=h,e}function U(t,i,e,s,n){X(i,s,n,t,e,7);let r=Number(i&BigInt(4294967295));t[e+7]=r,r>>=8,t[e+6]=r,r>>=8,t[e+5]=r,r>>=8,t[e+4]=r;let h=Number(i>>BigInt(32)&BigInt(4294967295));return t[e+3]=h,h>>=8,t[e+2]=h,h>>=8,t[e+1]=h,h>>=8,t[e]=h,e+8}function V(t,i,e,s,n,r){if(e+s>t.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function H(t,i,s,n,r){return i=+i,s>>>=0,r||V(t,0,s,4),e.write(t,i,s,n,23,4),s+4}function W(t,i,s,n,r){return i=+i,s>>>=0,r||V(t,0,s,8),e.write(t,i,s,n,52,8),s+8}h.prototype.slice=function(t,i){const e=this.length;(t=~~t)<0?(t+=e)<0&&(t=0):t>e&&(t=e),(i=void 0===i?e:~~i)<0?(i+=e)<0&&(i=0):i>e&&(i=e),i<t&&(i=t);const s=this.subarray(t,i);return w.setPrototypeOf(s,h.prototype),s},h.prototype.readUintLE=h.prototype.readUIntLE=function(t,i,e){t>>>=0,i>>>=0,e||L(t,i,this.length);let s=this[t],n=1,r=0;for(;++r<i&&(n*=256);)s+=this[t+r]*n;return s},h.prototype.readUintBE=h.prototype.readUIntBE=function(t,i,e){t>>>=0,i>>>=0,e||L(t,i,this.length);let s=this[t+--i],n=1;for(;i>0&&(n*=256);)s+=this[t+--i]*n;return s},h.prototype.readUint8=h.prototype.readUInt8=function(t,i){return t>>>=0,i||L(t,1,this.length),this[t]},h.prototype.readUint16LE=h.prototype.readUInt16LE=function(t,i){return t>>>=0,i||L(t,2,this.length),this[t]|this[t+1]<<8},h.prototype.readUint16BE=h.prototype.readUInt16BE=function(t,i){return t>>>=0,i||L(t,2,this.length),this[t]<<8|this[t+1]},h.prototype.readUint32LE=h.prototype.readUInt32LE=function(t,i){return t>>>=0,i||L(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},h.prototype.readUint32BE=h.prototype.readUInt32BE=function(t,i){return t>>>=0,i||L(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},h.prototype.readBigUInt64LE=st(function(t){Q(t>>>=0,"offset");const i=this[t],e=this[t+7];(void 0===i||void 0===e)&&K(t,this.length-8);const s=i+256*this[++t]+65536*this[++t]+this[++t]*2**24,n=this[++t]+256*this[++t]+65536*this[++t]+e*2**24;return BigInt(s)+(BigInt(n)<<BigInt(32))}),h.prototype.readBigUInt64BE=st(function(t){Q(t>>>=0,"offset");const i=this[t],e=this[t+7];(void 0===i||void 0===e)&&K(t,this.length-8);const s=i*2**24+65536*this[++t]+256*this[++t]+this[++t],n=this[++t]*2**24+65536*this[++t]+256*this[++t]+e;return(BigInt(s)<<BigInt(32))+BigInt(n)}),h.prototype.readIntLE=function(t,i,e){t>>>=0,i>>>=0,e||L(t,i,this.length);let s=this[t],n=1,r=0;for(;++r<i&&(n*=256);)s+=this[t+r]*n;return n*=128,s>=n&&(s-=_.pow(2,8*i)),s},h.prototype.readIntBE=function(t,i,e){t>>>=0,i>>>=0,e||L(t,i,this.length);let s=i,n=1,r=this[t+--s];for(;s>0&&(n*=256);)r+=this[t+--s]*n;return n*=128,r>=n&&(r-=_.pow(2,8*i)),r},h.prototype.readInt8=function(t,i){return t>>>=0,i||L(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},h.prototype.readInt16LE=function(t,i){t>>>=0,i||L(t,2,this.length);const e=this[t]|this[t+1]<<8;return 32768&e?4294901760|e:e},h.prototype.readInt16BE=function(t,i){t>>>=0,i||L(t,2,this.length);const e=this[t+1]|this[t]<<8;return 32768&e?4294901760|e:e},h.prototype.readInt32LE=function(t,i){return t>>>=0,i||L(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},h.prototype.readInt32BE=function(t,i){return t>>>=0,i||L(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},h.prototype.readBigInt64LE=st(function(t){Q(t>>>=0,"offset");const i=this[t],e=this[t+7];(void 0===i||void 0===e)&&K(t,this.length-8);const s=this[t+4]+256*this[t+5]+65536*this[t+6]+(e<<24);return(BigInt(s)<<BigInt(32))+BigInt(i+256*this[++t]+65536*this[++t]+this[++t]*2**24)}),h.prototype.readBigInt64BE=st(function(t){Q(t>>>=0,"offset");const i=this[t],e=this[t+7];(void 0===i||void 0===e)&&K(t,this.length-8);const s=(i<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(s)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+e)}),h.prototype.readFloatLE=function(t,i){return t>>>=0,i||L(t,4,this.length),e.read(this,t,!0,23,4)},h.prototype.readFloatBE=function(t,i){return t>>>=0,i||L(t,4,this.length),e.read(this,t,!1,23,4)},h.prototype.readDoubleLE=function(t,i){return t>>>=0,i||L(t,8,this.length),e.read(this,t,!0,52,8)},h.prototype.readDoubleBE=function(t,i){return t>>>=0,i||L(t,8,this.length),e.read(this,t,!1,52,8)},h.prototype.writeUintLE=h.prototype.writeUIntLE=function(t,i,e,s){if(t=+t,i>>>=0,e>>>=0,!s){O(this,t,i,e,_.pow(2,8*e)-1,0)}let n=1,r=0;for(this[i]=255&t;++r<e&&(n*=256);)this[i+r]=t/n&255;return i+e},h.prototype.writeUintBE=h.prototype.writeUIntBE=function(t,i,e,s){if(t=+t,i>>>=0,e>>>=0,!s){O(this,t,i,e,_.pow(2,8*e)-1,0)}let n=e-1,r=1;for(this[i+n]=255&t;--n>=0&&(r*=256);)this[i+n]=t/r&255;return i+e},h.prototype.writeUint8=h.prototype.writeUInt8=function(t,i,e){return t=+t,i>>>=0,e||O(this,t,i,1,255,0),this[i]=255&t,i+1},h.prototype.writeUint16LE=h.prototype.writeUInt16LE=function(t,i,e){return t=+t,i>>>=0,e||O(this,t,i,2,65535,0),this[i]=255&t,this[i+1]=t>>>8,i+2},h.prototype.writeUint16BE=h.prototype.writeUInt16BE=function(t,i,e){return t=+t,i>>>=0,e||O(this,t,i,2,65535,0),this[i]=t>>>8,this[i+1]=255&t,i+2},h.prototype.writeUint32LE=h.prototype.writeUInt32LE=function(t,i,e){return t=+t,i>>>=0,e||O(this,t,i,4,4294967295,0),this[i+3]=t>>>24,this[i+2]=t>>>16,this[i+1]=t>>>8,this[i]=255&t,i+4},h.prototype.writeUint32BE=h.prototype.writeUInt32BE=function(t,i,e){return t=+t,i>>>=0,e||O(this,t,i,4,4294967295,0),this[i]=t>>>24,this[i+1]=t>>>16,this[i+2]=t>>>8,this[i+3]=255&t,i+4},h.prototype.writeBigUInt64LE=st(function(t,i){return void 0===i&&(i=0),F(this,t,i,BigInt(0),BigInt("0xffffffffffffffff"))}),h.prototype.writeBigUInt64BE=st(function(t,i){return void 0===i&&(i=0),U(this,t,i,BigInt(0),BigInt("0xffffffffffffffff"))}),h.prototype.writeIntLE=function(t,i,e,s){if(t=+t,i>>>=0,!s){const s=_.pow(2,8*e-1);O(this,t,i,e,s-1,-s)}let n=0,r=1,h=0;for(this[i]=255&t;++n<e&&(r*=256);)t<0&&0===h&&0!==this[i+n-1]&&(h=1),this[i+n]=(t/r|0)-h&255;return i+e},h.prototype.writeIntBE=function(t,i,e,s){if(t=+t,i>>>=0,!s){const s=_.pow(2,8*e-1);O(this,t,i,e,s-1,-s)}let n=e-1,r=1,h=0;for(this[i+n]=255&t;--n>=0&&(r*=256);)t<0&&0===h&&0!==this[i+n+1]&&(h=1),this[i+n]=(t/r|0)-h&255;return i+e},h.prototype.writeInt8=function(t,i,e){return t=+t,i>>>=0,e||O(this,t,i,1,127,-128),t<0&&(t=255+t+1),this[i]=255&t,i+1},h.prototype.writeInt16LE=function(t,i,e){return t=+t,i>>>=0,e||O(this,t,i,2,32767,-32768),this[i]=255&t,this[i+1]=t>>>8,i+2},h.prototype.writeInt16BE=function(t,i,e){return t=+t,i>>>=0,e||O(this,t,i,2,32767,-32768),this[i]=t>>>8,this[i+1]=255&t,i+2},h.prototype.writeInt32LE=function(t,i,e){return t=+t,i>>>=0,e||O(this,t,i,4,2147483647,-2147483648),this[i]=255&t,this[i+1]=t>>>8,this[i+2]=t>>>16,this[i+3]=t>>>24,i+4},h.prototype.writeInt32BE=function(t,i,e){return t=+t,i>>>=0,e||O(this,t,i,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[i]=t>>>24,this[i+1]=t>>>16,this[i+2]=t>>>8,this[i+3]=255&t,i+4},h.prototype.writeBigInt64LE=st(function(t,i){return void 0===i&&(i=0),F(this,t,i,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),h.prototype.writeBigInt64BE=st(function(t,i){return void 0===i&&(i=0),U(this,t,i,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),h.prototype.writeFloatLE=function(t,i,e){return H(this,t,i,!0,e)},h.prototype.writeFloatBE=function(t,i,e){return H(this,t,i,!1,e)},h.prototype.writeDoubleLE=function(t,i,e){return W(this,t,i,!0,e)},h.prototype.writeDoubleBE=function(t,i,e){return W(this,t,i,!1,e)},h.prototype.copy=function(t,i,e,s){if(!h.isBuffer(t))throw new g("argument should be a Buffer");if(e||(e=0),!s&&0!==s&&(s=this.length),i>=t.length&&(i=t.length),i||(i=0),s>0&&s<e&&(s=e),s===e||0===t.length||0===this.length)return 0;if(i<0)throw new RangeError("targetStart out of bounds");if(e<0||e>=this.length)throw new RangeError("Index out of range");if(s<0)throw new RangeError("sourceEnd out of bounds");s>this.length&&(s=this.length),t.length-i<s-e&&(s=t.length-i+e);const n=s-e;return this===t&&"function"==typeof j.prototype.copyWithin?this.copyWithin(i,e,s):j.prototype.set.call(t,this.subarray(e,s),i),n},h.prototype.fill=function(t,i,e,s){if("string"==typeof t){if("string"==typeof i?(s=i,i=0,e=this.length):"string"==typeof e&&(s=e,e=this.length),void 0!==s&&"string"!=typeof s)throw new g("encoding must be a string");if("string"==typeof s&&!h.isEncoding(s))throw new g("Unknown encoding: "+s);if(1===t.length){const i=t.charCodeAt(0);("utf8"===s&&i<128||"latin1"===s)&&(t=i)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(i<0||this.length<i||this.length<e)throw new RangeError("Out of range index");if(e<=i)return this;let n;if(i>>>=0,e=void 0===e?this.length:e>>>0,t||(t=0),"number"==typeof t)for(n=i;n<e;++n)this[n]=t;else{const r=h.isBuffer(t)?t:h.from(t,s),o=r.length;if(0===o)throw new g('The value "'+t+'" is invalid for argument "value"');for(n=0;n<e-i;++n)this[n+i]=r[n%o]}return this};const q={};function z(t,i,e){q[t]=class extends e{get code(){return t}set code(t){w.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return"".concat(this.name," [").concat(t,"]: ").concat(this.message)}constructor(){super(),w.defineProperty(this,"message",{value:i.apply(this,arguments),writable:!0,configurable:!0}),this.name="".concat(this.name," [").concat(t,"]"),this.stack,delete this.name}}}function G(t){let i="",e=t.length;const s="-"===t[0]?1:0;for(;e>=s+4;e-=3)i="_".concat(t.slice(e-3,e)).concat(i);return"".concat(t.slice(0,e)).concat(i)}function X(t,i,e,s,n,r){if(t>e||t<i){const e="bigint"==typeof i?"n":"";let s;throw s=0===i||i===BigInt(0)?">= 0".concat(e," and < 2").concat(e," ** ").concat(8*(r+1)).concat(e):">= -(2".concat(e," ** ").concat(8*(r+1)-1).concat(e,") and < 2 ** ")+"".concat(8*(r+1)-1).concat(e),new q.ERR_OUT_OF_RANGE("value",s,t)}!function(t,i,e){Q(i,"offset"),(void 0===t[i]||void 0===t[i+e])&&K(i,t.length-(e+1))}(s,n,r)}function Q(t,i){if("number"!=typeof t)throw new q.ERR_INVALID_ARG_TYPE(i,"number",t)}function K(t,i,e){throw _.floor(t)!==t?(Q(t,e),new q.ERR_OUT_OF_RANGE("offset","an integer",t)):i<0?new q.ERR_BUFFER_OUT_OF_BOUNDS:new q.ERR_OUT_OF_RANGE("offset",">= 0 and <= ".concat(i),t)}z("ERR_BUFFER_OUT_OF_BOUNDS",function(t){return t?"".concat(t," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),z("ERR_INVALID_ARG_TYPE",function(t,i){return'The "'.concat(t,'" argument must be of type number. Received type ').concat(typeof i)},g),z("ERR_OUT_OF_RANGE",function(t,i,e){let s='The value of "'.concat(t,'" is out of range.'),n=e;return Number.isInteger(e)&&_.abs(e)>2**32?n=G(String(e)):"bigint"==typeof e&&(n=String(e),(e>BigInt(2)**BigInt(32)||e<-(BigInt(2)**BigInt(32)))&&(n=G(n)),n+="n"),s+=" It must be ".concat(i,". Received ").concat(n),s},RangeError);const Y=/[^+/0-9A-Za-z-_]/g;function J(t,i){let e;i=i||1/0;const s=t.length;let n=null;const r=[];for(let h=0;h<s;++h){if(e=t.charCodeAt(h),e>55295&&e<57344){if(!n){if(e>56319){(i-=3)>-1&&r.push(239,191,189);continue}if(h+1===s){(i-=3)>-1&&r.push(239,191,189);continue}n=e;continue}if(e<56320){(i-=3)>-1&&r.push(239,191,189),n=e;continue}e=65536+(n-55296<<10|e-56320)}else n&&(i-=3)>-1&&r.push(239,191,189);if(n=null,e<128){if((i-=1)<0)break;r.push(e)}else if(e<2048){if((i-=2)<0)break;r.push(e>>6|192,63&e|128)}else if(e<65536){if((i-=3)<0)break;r.push(e>>12|224,e>>6&63|128,63&e|128)}else{if(!(e<1114112))throw new m("Invalid code point");if((i-=4)<0)break;r.push(e>>18|240,e>>12&63|128,e>>6&63|128,63&e|128)}}return r}function Z(t){return i.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(Y,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function $(t,i,e,s){let n;for(n=0;n<s&&!(n+e>=i.length||n>=t.length);++n)i[n+e]=t[n];return n}function tt(t,i){return t instanceof i||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===i.name}function it(t){return t!=t}const et=function(){const t="0123456789abcdef",i=new Array(256);for(let e=0;e<16;++e){const s=16*e;for(let n=0;n<16;++n)i[s+n]=t[e]+t[n]}return i}();function st(t){return typeof BigInt>"u"?nt:t}function nt(){throw new m("BigInt not supported")}}(oi)),oi}function zi(){if(li)return ri.exports;li=1;var t=65536;var i=(di||(di=1,function(t,i){var e=qi(),s=e.Buffer;function n(t,i){for(var e in t)i[e]=t[e]}function r(t,i,e){return s(t,i,e)}s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?t.exports=e:(n(e,i),i.Buffer=r),r.prototype=w.create(s.prototype),n(s,r),r.from=function(t,i,e){if("number"==typeof t)throw new g("Argument must not be a number");return s(t,i,e)},r.alloc=function(t,i,e){if("number"!=typeof t)throw new g("Argument must be a number");var n=s(t);return void 0!==i?"string"==typeof e?n.fill(i,e):n.fill(i):n.fill(0),n},r.allocUnsafe=function(t){if("number"!=typeof t)throw new g("Argument must be a number");return s(t)},r.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new g("Argument must be a number");return e.SlowBuffer(t)}}(hi,hi.exports)),hi.exports).Buffer,e=b.crypto||b.msCrypto;return e&&e.getRandomValues?ri.exports=function(s,n){if(s>4294967295)throw new RangeError("requested too many random bytes");var r=i.allocUnsafe(s);if(s>0)if(s>t)for(var h=0;h<s;h+=t)e.getRandomValues(r.slice(h,h+t));else e.getRandomValues(r);return"function"==typeof n?process.nextTick(function(){n(null,r)}):r}:ri.exports=function(){throw new m("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")},ri.exports}function Gi(){if(vi)return fi;vi=1;const t=zi();class i{clone(){const t=new i(this.ufrag,this.pwd);return t.setLite(this.lite),t.setEndOfCandidates(this.endOfCandidates),t}plain(){const t={ufrag:this.ufrag,pwd:this.pwd};return this.lite&&(t.lite=this.lite),this.endOfCandidates&&(t.endOfCandidates=this.endOfCandidates),t}getUfrag(){return this.ufrag}getPwd(){return this.pwd}isLite(){return this.lite}setLite(t){this.lite=t}isEndOfCandidates(){return this.endOfCandidates}setEndOfCandidates(t){this.endOfCandidates=t}constructor(t,i){this.ufrag=t,this.pwd=i,this.lite=!1,this.endOfCandidates=!1}}return i.generate=function(e){const s=new i,n=t(8),r=t(24);return s.ufrag=n.toString("hex"),s.pwd=r.toString("hex"),s.lite=e,s},i.expand=function(t){if("ICEInfo"===t.constructor.name)return t;const e=new i(t.ufrag,t.pwd);return e.setLite(t.lite),e.setEndOfCandidates(t.endOfCandidates),e},i.clone=function(t){return"ICEInfo"===t.constructor.name?t.clone():i.expand(t)},fi=i}function Xi(){if(gi)return _i;gi=1;const t=ti()("SEND","RECV");return t.byValue=function(i){return t[i.toUpperCase()]},t.toString=function(i){switch(i){case t.SEND:return"send";case t.RECV:return"recv"}},t.reverse=function(i){switch(i){case t.SEND:return t.RECV;case t.RECV:return t.SEND}},_i=t}function ji(){if(mi)return pi;mi=1;const t=Xi();class i{clone(){var t=new i(this.id,this.direction);return t.setFormats(this.formats),t.setParams(this.params),t}plain(){var i={id:this.id,direction:t.toString(this.direction)};for(var[e,s]of(this.formats&&(i.formats=this.formats),this.params.entries()))i.params||(i.params={}),i.params[e]=s;return i}getId(){return this.id}getDirection(){return this.direction}setDirection(t){this.direction=t}getFormats(){return this.formats}setFormats(t){this.formats=[];for(let i=0;i<t.length;++i)this.formats.push(x(t[i]))}getParams(){return this.params}setParams(t){this.params=new Map(t)}addParam(t,i){this.params.set(t,i)}constructor(t,i){this.id=t,this.direction=i,this.formats=[],this.params=new Map}}return i.expand=function(e){if("RIDInfo"===e.constructor.name)return e;const s=new i(e.id,t.byValue(e.direction));for(const[t,i]of w.entries(e.params||{}))s.addParam(t,i);return e.formats&&s.setFormats(e.formats),s},i.clone=function(t){return"RIDInfo"===t.constructor.name?t.clone():i.expand(t)},pi=i}function Qi(){if(yi)return wi;yi=1;class t{clone(){return new t(this.id,this.paused)}plain(){return{id:this.id,paused:this.paused}}isPaused(){return this.paused}getId(){return this.id}constructor(t,i){this.paused=i,this.id=t}}return t.expand=function(i){return"SimulcastStreamInfo"===i.constructor.name?i:new t(i.id,i.paused)},t.clone=function(i){return"SimulcastStreamInfo"===i.constructor.name?i.clone():t.expand(i)},wi=t}function Ki(){if(Ai)return bi;Ai=1;const t=Qi(),i=Xi();class e{clone(){const t=new e;for(const e of this.send)t.addSimulcastAlternativeStreams(i.SEND,e.map(t=>t.clone()));for(const e of this.recv)t.addSimulcastAlternativeStreams(i.RECV,e.map(t=>t.clone()));return t}plain(){const t={send:[],recv:[]};for(const i of this.send)t.send.push(i.map(t=>t.plain()));for(const i of this.recv)t.recv.push(i.map(t=>t.plain()));return t}addSimulcastAlternativeStreams(t,e){return t===i.SEND?this.send.push(e):this.recv.push(e)}addSimulcastStream(t,e){return t===i.SEND?this.send.push([e]):this.recv.push([e])}getSimulcastStreams(t){return t===i.SEND?this.send:this.recv}constructor(){this.send=[],this.recv=[]}}return e.expand=function(s){if("SimulcastInfo"===s.constructor.name)return s;const n=new e;for(const e of s.send||[])n.addSimulcastAlternativeStreams(i.SEND,e.map(t.expand));for(const e of s.recv||[])n.addSimulcastAlternativeStreams(i.RECV,e.map(t.expand));return n},e.clone=function(t){return"SimulcastInfo"===t.constructor.name?t.clone():e.expand(t)},bi=e}function Yi(){if(Ti)return Si;Ti=1;const t=ti()("SENDRECV","SENDONLY","RECVONLY","INACTIVE");return t.byValue=function(i){return t[i.toUpperCase()]},t.toString=function(i){switch(i){case t.SENDRECV:return"sendrecv";case t.SENDONLY:return"sendonly";case t.RECVONLY:return"recvonly";case t.INACTIVE:return"inactive"}},t.reverse=function(i){switch(i){case t.SENDRECV:return t.SENDRECV;case t.SENDONLY:return t.RECVONLY;case t.RECVONLY:return t.SENDONLY;case t.INACTIVE:return t.INACTIVE}},Si=t}function Ji(){if(Ei)return ki;Ei=1;class t{clone(){return new t(this.port,this.maxMessageSize)}plain(){return{port:this.port,maxMessageSize:this.maxMessageSize}}getPort(){return this.port}getMaxMessageSize(){return this.maxMessageSize}constructor(t,i){this.port=t,this.maxMessageSize=i}}return t.expand=function(i){return"DataChannelInfo"===i.constructor.name?i:new t(i.port,i.maxMessageSize)},t.clone=function(i){return"DataChannelInfo"===i.constructor.name?i.clone():t.expand(i)},ki=t}function Zi(){if(Pi)return xi;Pi=1;const t=$t(),i=ji(),e=Ki(),s=Yi(),n=Xi();Zt();const r=Ji();class h{clone(){const t=new h(this.id,this.type);t.setDirection(this.direction),t.setBitrate(this.bitrate);for(const i of this.codecs.values())t.addCodec(i.clone());for(const[i,e]of this.extensions.entries())t.addExtension(i,e);for(const i of this.rids.values())t.addRID(i.clone());return this.simulcast&&t.setSimulcast(this.simulcast.clone()),this.control&&t.setControl(this.control),this.dataChannel&&t.setDataChannel(this.dataChannel.clone()),t}plain(){const t={id:this.id,type:this.type,direction:s.toString(this.direction),codecs:[]};this.dataChannel&&(t.dataChannel=this.dataChannel.plain()),this.bitrate&&(t.bitrate=this.bitrate);for(const i of this.codecs.values())t.codecs.push(i.plain());for(const[i,e]of this.extensions.entries())t.extensions||(t.extensions={}),t.extensions[i]=e;for(const i of this.rids.values())t.rids||(t.rids=[]),t.rids.push(i.plain());return this.simulcast&&(t.simulcast=this.simulcast.plain()),this.control&&(t.control=this.control),t}getType(){return this.type}getId(){return this.id}setId(t){this.id=t}addExtension(t,i){this.extensions.set(t,i)}addRID(t){this.rids.set(t.getId(),t)}addCodec(t){this.codecs.set(t.getType(),t)}setCodecs(t){this.codecs=t}getCodecForType(t){return this.codecs.get(t)}getCodec(t){for(const i of this.codecs.values())if(i.getCodec().toLowerCase()===t.toLowerCase())return i;return null}hasCodec(t){return null!==this.getCodec(t)}getCodecs(){return this.codecs}hasRTX(){for(const t of this.codecs.values())if(t.hasRTX())return!0;return!1}getExtensions(){return this.extensions}getRIDs(){return this.rids}getRID(t){return this.rids.get(t)}getBitrate(){return this.bitrate}setBitrate(t){this.bitrate=t}getDirection(){return this.direction}setDirection(t){this.direction=t}hasControl(){return!!this.control}getControl(){return this.control}setControl(t){this.control=t}hasDataChannel(){return!!this.dataChannel}getDataChannel(){return this.dataChannel}setDataChannel(t){this.dataChannel=t}answer(i){const o=new h(this.id,this.type);if(i){o.setDirection(s.reverse(this.direction));const{codecs:h,dataChannel:a}=i;if(h){let e;e=Array.isArray(h)?t.MapFromNames(h,i.rtx,i.rtcpfbs):h;for(let t of this.codecs.values())for(let i of e.values()){if(i.getCodec().toLowerCase()!==t.getCodec().toLowerCase()||"h264"===i.getCodec()&&i.hasParam("packetization-mode")&&i.getParam("packetization-mode")!=t.getParam("packetization-mode","0")||"h264"===i.getCodec()&&i.hasParam("profile-level-id")&&t.hasParam("profile-level-id")&&i.getParam("profile-level-id")!=t.getParam("profile-level-id")||"multiopus"===i.getCodec()&&i.hasParam("num_streams")&&t.hasParam("num_streams")&&i.getParam("num_streams")!=t.getParam("num_streams"))continue;const e=i.clone();e.setType(t.getType()),e.hasRTX()&&e.setRTX(t.getRTX()),t.hasChannels()&&e.setChannels(t.getChannels()),e.addParams(t.getParams()),o.addCodec(e);break}}const u=new Set(i.extensions);for(let[t,i]of this.extensions)u.has(i)&&o.addExtension(t,i);if(i.simulcast&&this.simulcast){const t=new e,i=this.simulcast.getSimulcastStreams(n.SEND);if(i)for(const e of i){const i=e.map(t=>t.clone());t.addSimulcastAlternativeStreams(n.RECV,i)}const s=this.simulcast.getSimulcastStreams(n.RECV);if(s)for(const i of s){const e=i.map(t=>t.clone());t.addSimulcastAlternativeStreams(n.SEND,e)}for(const t of this.rids.values()){const i=t.clone();i.setDirection(n.reverse(t.getDirection())),o.addRID(i)}o.setSimulcast(t)}if(a&&this.dataChannel){const t=new r(this.dataChannel.getPort(),a.maxMessageSize?a.maxMessageSize:this.dataChannel.getMaxMessageSize());o.setDataChannel(t)}}else o.setDirection(s.INACTIVE);return o}getSimulcast(){return this.simulcast}setSimulcast(t){this.simulcast=t}constructor(t,i){this.id=t,this.type=i,this.direction=s.SENDRECV,this.extensions=new Map,this.codecs=new Map,this.rids=new Map,this.simulcast=null,this.bitrate=0,this.control=null,this.dataChannel=null}}function o(t){const i=t.toString();if(!/^\d+$/.test(i))throw new m("invalid integer ".concat(i));return x(i)}return h.create=function(i,e,n){!n&&"string"!=typeof e&&(n=e,e=i);const r=new h(i,e);if(n){const{codecs:i}=n;i&&(Array.isArray(i)?r.setCodecs(t.MapFromNames(i,n.rtx,n.rtcpfbs)):r.setCodecs(i))}else r.setDirection(s.INACTIVE);return r},h.expand=function(n){if("MediaInfo"===n.constructor.name)return n;const a=new h(n.id,n.type);if(n.direction&&a.setDirection(s.byValue(n.direction)),a.setBitrate(n.bitrate),n.dataChannel){const t=r.expand(n.dataChannel);t&&a.setDataChannel(t)}for(const[t,i]of w.entries(n.extensions))a.addExtension(o(t),i);for(const i of n.codecs){const e=t.expand(i);e&&a.addCodec(e)}for(const t of n.rids||[]){const e=i.expand(t);a.addRID(e)}return n.simulcast&&a.setSimulcast(e.expand(n.simulcast)),n.control&&a.setControl(n.control),a},h.clone=function(t){return"MediaInfo"===t.constructor.name?t.clone():h.expand(t)},xi=h}function $i(){if(Ci)return Ii;Ci=1;class t{clone(){return new t(this.semantics,this.ssrcs)}plain(){const t={semantics:this.semantics,ssrcs:[]};for(let i=0;i<this.ssrcs.length;++i)t.ssrcs.push(this.ssrcs[i]);return t}getSemantics(){return this.semantics}getSSRCs(){return this.ssrcs}constructor(t,i){this.semantics=t,this.ssrcs=[];for(let t=0;t<i.length;++t)this.ssrcs.push(x(i[t]))}}return t.expand=function(i){return"SourceGroupInfo"===i.constructor.name?i:new t(i.semantics,i.ssrcs)},t.clone=function(i){return"SourceGroupInfo"===i.constructor.name?i.clone():t.expand(i)},Ii=t}function te(){if(Di)return Ri;Di=1;class t{clone(){const i=new t(this.ssrc);return i.setCName(this.cname),i.setStreamId(this.streamId),i.setTrackId(this.trackId),i}plain(){const t={ssrc:this.ssrc};return this.cname&&(t.cname=this.cname),this.streamId&&(t.streamId=this.streamId),this.trackId&&(t.trackId=this.trackId),t}getCName(){return this.cname}setCName(t){this.cname=t}getStreamId(){return this.streamId}setStreamId(t){this.streamId=t}getTrackId(){return this.trackId}setTrackId(t){this.trackId=t}getSSRC(){return this.ssrc}constructor(t){this.ssrc=t}}return t.expand=function(i){if("SourceInfo"===i.constructor.name)return i;const e=new t(i.ssrc);return e.setCName(i.cname),e.setStreamId(i.streamId),e.setTrackId(i.trackId),e},t.clone=function(i){return"SourceInfo"===i.constructor.name?i.clone():t.expand(i)},Ri=t}function ie(){if(Bi)return Ni;Bi=1;const t=$t();class i{clone(){var t=new i(this.id,this.paused);for(let i of this.codecs.values())t.addCodec(i.clone());return t.setParams(this.params),t}plain(){var t={id:this.id,paused:this.paused,codecs:{},params:{}};for(var[i,e]of this.codecs.entries())t.codecs[i]=e.plain();for(var[i,s]of this.params.entries())t.params[i]=s;return t}getId(){return this.id}getCodecs(){return this.codecs}addCodec(t){this.codecs.set(t.getType(),t)}getParams(){return this.params}setParams(t){this.params=new Map(t)}addParam(t,i){this.params.set(t,i)}isPaused(){return this.paused}constructor(t,i=!1){this.id=t,this.paused=i,this.codecs=new Map,this.params=new Map}}return i.expand=function(e){if("TrackEncodingInfo"===e.constructor.name)return e;const s=new i(e.id,e.paused);for(const i of w.values(e.codecs||{}))s.addCodec(t.expand(i));for(const[t,i]of w.entries(e.params||{}))s.addParam(t,i);return s},i.clone=function(t){return"TrackEncodingInfo"===t.constructor.name?t.clone():i.expand(t)},Ni=i}function ee(){if(Li)return Mi;Li=1;const t=$i(),i=ie();class e{clone(){const t=new e(this.media,this.id);this.mediaId&&t.setMediaId(this.mediaId);for(let i=0;i<this.ssrcs.length;++i)t.addSSRC(this.ssrcs[i]);for(let i=0;i<this.groups.length;++i)t.addSourceGroup(this.groups[i].clone());for(let i=0;i<this.encodings.length;++i){const e=[];for(let t=0;t<this.encodings[i].length;++t)e.push(this.encodings[i][t].clone());t.addAlternativeEncodings(e)}return t}plain(){const t={media:this.media,id:this.id,ssrcs:[]};this.mediaId&&(t.mediaId=this.mediaId);for(let i=0;i<this.ssrcs.length;++i)t.ssrcs.push(this.ssrcs[i]);for(let i=0;i<this.groups.length;++i)t.groups||(t.groups=[]),t.groups.push(this.groups[i].plain());for(let i=0;i<this.encodings.length;++i){const e=[];for(let t=0;t<this.encodings[i].length;++t)e.push(this.encodings[i][t].plain());e.length&&(t.encodings||(t.encodings=[]),t.encodings.push(e))}return t}getMedia(){return this.media}setMediaId(t){this.mediaId=t}getMediaId(){return this.mediaId}getId(){return this.id}addSSRC(t){this.ssrcs.push(t)}getSSRCs(){return this.ssrcs}addSourceGroup(t){this.groups.push(t)}getSourceGroup(t){for(const i of this.groups)if(i.getSemantics().toLowerCase()===t.toLowerCase())return i;return null}getSourceGroups(){return this.groups}getSourceGroupsForMediaSSRC(t){return this.groups.filter(i=>i.getSSRCs()[0]===t)}hasSourceGroup(t){for(const i of this.groups)if(i.getSemantics().toLowerCase()===t.toLowerCase())return!0;return!1}getEncodings(){return this.encodings}addEncoding(t){this.encodings.push([t])}addAlternativeEncodings(t){this.encodings.push(t)}setEncodings(t){this.encodings=t}getEncodingSources(){const t=[];if(this.encodings.length)for(const i of this.encodings)for(const e of i){const i={id:e.getId(),rid:e.getId()},s=e.getParams(),n=null==s?void 0:s.get("ssrc");if(void 0!==n){i.media=x(n);for(const t of this.getSourceGroupsForMediaSSRC(i.media))switch(t.getSemantics()){case"FID":i.rtx=t.getSSRCs()[1];break;case"FEC-FR":i.fec=t.getSSRCs()[1]}}t.push(i)}else if(this.hasSourceGroup("SIM")){const i=this.getSourceGroup("SIM").getSSRCs();this.getSourceGroups();for(const e of i){const i={id:String(e),media:e};for(const t of this.getSourceGroupsForMediaSSRC(i.media))switch(t.getSemantics()){case"FID":i.rtx=t.getSSRCs()[1];break;case"FEC-FR":i.fec=t.getSSRCs()[1]}t.push(i)}}else{const i={id:""};if(this.ssrcs.length){i.media=this.ssrcs[0];for(const t of this.getSourceGroupsForMediaSSRC(i.media))switch(t.getSemantics()){case"FID":i.rtx=t.getSSRCs()[1];break;case"FEC-FR":i.fec=t.getSSRCs()[1]}}t.push(i)}return t}constructor(t,i){this.media=t,this.id=i,this.ssrcs=[],this.groups=[],this.encodings=[]}}return e.expand=function(s){var n,r;if("TrackInfo"===s.constructor.name)return s;const h=new e(s.media,s.id);if(s.mediaId&&h.setMediaId(s.mediaId),Array.isArray(s.ssrcs))for(const t of s.ssrcs)h.addSSRC(t);else if(void 0!==(null===(n=s.ssrcs)||void 0===n?void 0:n.media)){const i=s.ssrcs.media;if(h.addSSRC(i),void 0!==s.ssrcs.rtx){const e=s.ssrcs.rtx;h.addSSRC(e),h.addSourceGroup(new t("FID",[i,e]))}if(void 0!==s.ssrcs.fec){const e=s.ssrcs.fec;h.addSSRC(e),h.addSourceGroup(new t("FEC-FR",[i,e]))}}if(s.rid){const t=new i(s.rid);void 0!==(null===(r=s.ssrcs)||void 0===r?void 0:r.media)&&t.addParam("ssrc",s.ssrcs.media),h.addAlternativeEncodings([t])}for(const i of s.groups||[])h.addSourceGroup(t.expand(i));for(const t of s.encodings||[]){const e=[];for(const s of t)e.push(i.expand(s));h.addAlternativeEncodings(e)}return h},e.clone=function(t){return"TrackInfo"===t.constructor.name?t.clone():e.expand(t)},Mi=e}function se(){if(Fi)return Oi;Fi=1;const t=ee();class i{clone(){const t=new i(this.id);for(const i of this.tracks.values())t.addTrack(i.clone());return t}plain(){const t={id:this.id,tracks:[]};for(const i of this.tracks.values())t.tracks.push(i.plain());return t}getId(){return this.id}addTrack(t){this.tracks.set(t.getId(),t)}removeTrack(t){return this.tracks.delete(t.getId())}removeTrackById(t){return this.tracks.delete(t)}getFirstTrack(t){for(let i of this.tracks.values())if(i.getMedia().toLowerCase()===t.toLowerCase())return i;return null}getTracks(){return this.tracks}removeAllTracks(){this.tracks.clear()}getTrack(t){return this.tracks.get(t)}constructor(t){this.id=t,this.tracks=new Map}}return i.expand=function(e){if("StreamInfo"===e.constructor.name)return e;const s=new i(e.id);for(const i of e.tracks||[]){const e=t.expand(i);e&&s.addTrack(e)}return s},i.clone=function(t){return"StreamInfo"===t.constructor.name?t.clone():i.expand(t)},Oi=i}function ne(){if(Vi)return Ui;Vi=1;const t=function(){if(xt)return Gt;xt=1;var t=Kt(),i=Yt();return Gt.write=i,Gt.parse=t.parse,Gt.parseParams=t.parseParams,Gt.parseFmtpConfig=t.parseFmtpConfig,Gt.parsePayloads=t.parsePayloads,Gt.parseRemoteCandidates=t.parseRemoteCandidates,Gt.parseImageAttributes=t.parseImageAttributes,Gt.parseSimulcastStreamList=t.parseSimulcastStreamList,Gt}(),i=(It||(It=1,Pt=function(t){const i=new Intl.Collator(t,{sensitivity:"base"});return(t,e)=>0==i.compare(t,e)}),Pt)("en-US"),e=Jt(),s=$t(),n=Zt(),r=ei(),h=si(),o=Gi(),a=Zi(),u=ii(),c=Yi(),d=Xi(),l=$i(),f=te(),v=se(),_=ee(),g=ie(),p=Ki(),m=Qi(),y=ji(),b=Ji();class A{clone(){const t=new A(this.version);for(const i of this.medias)t.addMedia(i.clone());for(const i of this.streams.values())t.addStream(i.clone());for(const i of this.candidates)t.addCandidate(i.clone());return t.setICE(this.ice.clone()),this.dtls&&t.setDTLS(this.dtls.clone()),this.crypto&&t.setCrypto(this.crypto.clone()),t.setExtmapAllowMixed(this.extmapAllowMixed),t}plain(){const t={version:this.version,streams:[],medias:[],candidates:[]};for(const i of this.medias)t.medias.push(i.plain());for(const i of this.streams.values())t.streams.push(i.plain());for(const i of this.candidates)t.candidates.push(i.plain());return this.ice&&(t.ice=this.ice.plain()),this.dtls&&(t.dtls=this.dtls.plain()),this.crypto&&(t.crypto=this.crypto.plain()),this.extmapAllowMixed||(t.extmapAllowMixedNotSupported=!this.extmapAllowMixed),t}unify(){const t=new A(this.version);for(const i of this.medias)t.addMedia(i.clone());const i={audio:t.getMediasByType("audio"),video:t.getMediasByType("video")};for(const e of this.streams.values()){const s=e.clone();for(const e of s.getTracks().values()){let s=i[e.getMedia()].pop();s||(s=this.getMedia(e.getMedia()).clone(),s.setId(e.getId()),t.addMedia(s)),e.setMediaId(s.getId())}t.addStream(s)}for(const i of this.candidates)t.addCandidate(i.clone());return this.ice&&t.setICE(this.ice.clone()),this.dtls&&t.setDTLS(this.dtls.clone()),this.crypto&&t.setCrypto(this.crypto.clone()),t}setVersion(t){this.version=t}addMedia(t){this.medias.push(t)}getMedia(t){for(let e in this.medias){let s=this.medias[e];if(i(s.getType(),t))return s}return null}getMediasByType(t){let e=[];for(let s in this.medias){let n=this.medias[s];i(n.getType(),t)&&e.push(n)}return e}getMediaById(t){for(const e of this.medias)if(i(e.getId(),t))return e;return null}replaceMedia(t){for(let i in this.medias)if(this.medias[i].getId()==t.getId())return this.medias[i]=t,!0;return!1}getMedias(){return this.medias}getVersion(){return this.version}getDTLS(){return this.dtls}setDTLS(t){this.dtls=t}hasCrypto(){return!!this.crypto}getCrypto(){return this.crypto}setCrypto(t){this.crypto=t}hasICE(){return!!this.ice}getICE(){return this.ice}setICE(t){this.ice=t}addCandidate(t){for(const i of this.candidates)if(i.equals(t))return;this.candidates.push(t)}addCandidates(t){for(const i of t)this.addCandidate(i)}getCandidates(){return this.candidates}getStream(t){return this.streams.get(t)}getStreams(){return this.streams}getFirstStream(){for(const t of this.streams.values())return t;return null}addStream(t){this.streams.set(t.getId(),t)}removeStream(t){return this.streams.delete(t.getId())}removeAllStreams(){this.streams.clear()}getTracksByMediaType(t){let e=[];for(const s of this.streams.values())for(const[n,r]of s.getTracks())i(r.getMedia(),t)&&e.push(r);return e}getTrackByMediaId(t){for(const i of this.streams.values())for(const[e,s]of i.getTracks())if(s.getMediaId()==t)return s;return null}getStreamByMediaId(t){for(const i of this.streams.values())for(const[e,s]of i.getTracks())if(s.getMediaId()==t)return i;return null}getExtmapAllowMixed(){return this.extmapAllowMixed}setExtmapAllowMixed(t){this.extmapAllowMixed=t}answer(t){const i=new A;t.ice&&(t.ice instanceof o?i.setICE(t.ice.clone()):i.setICE(o.expand(t.ice))),t.dtls&&(t.dtls instanceof r?i.setDTLS(t.dtls):i.setDTLS(r.expand(t.dtls))),t.crypto&&(t.crypto instanceof h?i.setCrypto(t.crypto):i.setCrypto(h.expand(t.crypto)));for(let s=0;t.candidates&&s<t.candidates.length;++s)t.candidates[s]instanceof e?i.addCandidate(t.candidates[s].clone()):i.addCandidate(e.expand(t.candidates[s]));for(const e of this.medias){const s=t&&t.capabilities&&t.capabilities[e.getType()];i.addMedia(e.answer(s))}return i.setExtmapAllowMixed(this.extmapAllowMixed),i}toString(){let e={version:0,media:[]};e.version=0,e.origin={username:"-",sessionId:(new Date).getTime(),sessionVersion:this.version,netType:"IN",ipVer:4,address:"127.0.0.1"},e.name="semantic-sdp",e.connection={version:4,ip:"0.0.0.0"},e.timing={start:0,stop:0},this.hasICE()&&this.getICE().isLite()&&(e.icelite="ice-lite"),e.msidSemantic={semantic:"WMS",token:"*"},e.groups=[],this.extmapAllowMixed&&(e.extmapAllowMixed="extmap-allow-mixed");const s=[];for(const t of this.medias){let n={type:t.getType(),port:9,protocol:"",fmtp:[],rtp:[],rtcpFb:[],ext:[],bandwidth:[],candidates:[],ssrcGroups:[],ssrcs:[],rids:[]};n.direction=c.toString(t.getDirection()),this.extmapAllowMixed&&(n.extmapAllowMixed="extmap-allow-mixed"),n.mid=t.getId(),s.push(t.getId()),t.hasControl()&&(n.control=t.getControl()),t.getBitrate()>0&&(n.bandwidth.push({type:"AS",limit:t.getBitrate()}),n.bandwidth.push({type:"TIAS",limit:1e3*t.getBitrate()}));let r=this.getCandidates();for(const t of r)n.candidates.push({foundation:t.getFoundation(),component:t.getComponentId(),transport:t.getTransport(),priority:t.getPriority(),ip:t.getAddress(),port:t.getPort(),type:t.getType(),raddr:t.getRelAddr(),rport:t.getRelPort()});if(this.getICE()&&(n.iceUfrag=this.getICE().getUfrag(),n.icePwd=this.getICE().getPwd()),i("audio",t.getType())||i("video",t.getType())){n.rtcpMux="rtcp-mux",n.rtcpRsize="rtcp-rsize",this.getDTLS()?(n.protocol="UDP/TLS/RTP/SAVPF",n.fingerprint={type:this.getDTLS().getHash(),hash:this.getDTLS().getFingerprint()},n.setup=u.toString(this.getDTLS().getSetup())):this.getCrypto()?(n.protocol="RTP/SAVPF",n.crypto=[{id:this.getCrypto().getTag(),suite:this.getCrypto().getSuite(),config:this.getCrypto().getKeyParams()}]):n.protocol="RTP/AVP";for(const e of t.getCodecs().values()){i("video",t.getType())?n.rtp.push({payload:e.getType(),codec:e.getCodec().toUpperCase(),rate:9e4}):i("opus",e.getCodec())||i("multiopus",e.getCodec())?n.rtp.push({payload:e.getType(),codec:e.getCodec(),rate:48e3,encoding:e.getChannels()}):n.rtp.push({payload:e.getType(),codec:e.getCodec(),rate:8e3});for(const t of e.getRTCPFeedbacks())n.rtcpFb.push({payload:e.getType(),type:t.getId(),subtype:t.getParams().join(" ")});e.hasRTX()&&(n.rtp.push({payload:e.getRTX(),codec:"rtx",rate:9e4}),n.fmtp.push({payload:e.getRTX(),config:"apt="+e.getType()}));const s=e.getParams();if(w.keys(s).length){const t={payload:e.getType(),config:""};for(const i in s)t.config.length&&(t.config+=";"),w.hasOwnProperty.call(s,i)?t.config+=i+"="+s[i]:t.config+=i;n.fmtp.push(t)}}const e=[];for(const t of n.rtp)e.push(t.payload);n.payloads=e.join(" ");for(let[i,e]of t.getExtensions().entries())n.ext.push({value:i,uri:e});for(let i of t.getRIDs().values()){let t={id:i.getId(),direction:d.toString(i.getDirection()),params:""};i.getFormats().length&&(t.params="pt="+i.getFormats().join(","));for(let[e,s]of i.getParams().entries())t.params+=(t.params.length?";":"")+e+"="+s;n.rids.push(t)}const s=t.getSimulcast();if(s){let t=1;n.simulcast={};const i=s.getSimulcastStreams(d.SEND),e=s.getSimulcastStreams(d.RECV);if(i&&i.length){let e="";for(const t of i){let i="";for(const e of t)i+=(i.length?",":"")+(e.isPaused()?"~":"")+e.getId();e+=(e.length?";":"")+i}n.simulcast["dir"+t]="send",n.simulcast["list"+t]=e,t++}if(e&&e.length){let i="";for(const t of e){let e="";for(const i of t)e+=(e.length?",":"")+(i.isPaused()?"~":"")+i.getId();i+=(i.length?";":"")+e}n.simulcast["dir"+t]="recv",n.simulcast["list"+t]=i,t++}}}else if(t.hasDataChannel()){n.protocol="UDP/DTLS/SCTP",n.payloads="webrtc-datachannel";const i=t.getDataChannel();n.sctpPort=i.getPort(),n.maxMessageSize=i.getMaxMessageSize()}e.media.push(n)}for(let t of this.streams.values())for(let s of t.getTracks().values())for(let n in e.media){let r=e.media[n];if(s.getMediaId()){if(s.getMediaId()==r.mid){let i=s.getSourceGroups();for(let t in i){let e=i[t];r.ssrcGroups.push({semantics:e.getSemantics(),ssrcs:e.getSSRCs().join(" ")})}let e=s.getSSRCs();for(let i in e)r.ssrcs.push({id:e[i],attribute:"cname",value:t.getId()}),r.ssrcs.push({id:e[i],attribute:"msid",value:t.getId()+" "+s.getId()});r.msid=t.getId()+" "+s.getId();break}}else if(i(r.type,s.getMedia())){let i=s.getSourceGroups();for(let t in i){let e=i[t];r.ssrcGroups.push({semantics:e.getSemantics(),ssrcs:e.getSSRCs().join(" ")})}let e=s.getSSRCs();for(let i in e)r.ssrcs.push({id:e[i],attribute:"cname",value:t.getId()}),r.ssrcs.push({id:e[i],attribute:"msid",value:t.getId()+" "+s.getId()});break}}const n={type:"BUNDLE",mids:s.join(" ")};return e.groups.push(n),t.write(e)}toIceFragmentString(){let i={version:0,media:[],candidates:[]};this.hasICE()&&this.getICE().isLite()&&(i.icelite="ice-lite"),this.getICE()&&(i.iceUfrag=this.getICE().getUfrag(),i.icePwd=this.getICE().getPwd());for(const t of this.getCandidates())i.candidates.push({foundation:t.getFoundation(),component:t.getComponentId(),transport:t.getTransport(),priority:t.getPriority(),ip:t.getAddress(),port:t.getPort(),type:t.getType(),raddr:t.getRelAddr(),rport:t.getRelPort()});return t.write(i).slice(10)}constructor(t){this.version=t||1,this.streams=new Map,this.medias=new Array,this.candidates=new Array,this.ice=null,this.dtls=null,this.crypto=null,this.extmapAllowMixed=!0}}return A.create=function(t){var i;const s=new A;if(t.streams)for(const i of t.streams)s.addStream(v.expand(i));t.ice&&(t.ice instanceof o?s.setICE(t.ice.clone()):s.setICE(o.expand(t.ice))),t.dtls&&(t.dtls instanceof r?s.setDTLS(t.dtls):s.setDTLS(r.expand(t.dtls))),t.crypto&&(t.crypto instanceof h?s.setCrypto(t.crypto):s.setCrypto(h.expand(t.crypto)));for(const i of t.candidates||[])i instanceof e?s.addCandidate(i.clone()):s.addCandidate(e.expand(i));let n=96,u=1,c=0;for(const[e,r]of w.entries(t.capabilities||{}))if(t.unified&&null!==(i=t.streams)&&void 0!==i&&i.length)for(const t of s.getTracksByMediaType(e)){const i=a.create(t.getMediaId(),e,r);for(const[t,e]of i.getCodecs())e.getType()>=96&&e.setType(n++),e.getRTX()&&e.setRTX(n++);if(r.extensions)for(let t of r.extensions)15===u&&u++,i.addExtension(u++,t);s.addMedia(i)}else{const i=a.create(t.unified?String(c++):e,e,r);for(const[t,e]of i.getCodecs())e.getType()>=96&&e.setType(n++),e.getRTX()&&e.setRTX(n++);if(r.extensions)for(let t of r.extensions)15===u&&u++,i.addExtension(u++,t);s.addMedia(i)}return s},A.expand=function(t){if("SDPInfo"===t.constructor.name)return t;const i=new A(t.version);for(const e of t.medias||[]){const t=a.expand(e);t&&i.addMedia(t)}for(const e of t.streams||[]){const t=v.expand(e);t&&i.addStream(t)}for(const s of t.candidates||[]){const t=e.expand(s);t&&i.addCandidate(t)}return t.ice&&i.setICE(o.expand(t.ice)),t.dtls&&i.setDTLS(r.expand(t.dtls)),t.crypto&&i.setCrypto(h.expand(t.crypto)),t.extmapAllowMixedNotSupported&&(this.extmapAllowMixed=!t.extmapAllowMixedNotSupported),i},A.clone=function(t){return"SDPInfo"===t.constructor.name?t.clone():A.expand(t)},A.process=function(t){return A.parse(t)},A.parse=function(w){const S=t.parse(w),T=new A;if(T.setVersion(S.version),S.iceUfrag&&S.icePwd){const t=String(S.iceUfrag),i=String(S.icePwd),e=new o(t,i);e.setLite("ice-lite"==S.icelite),e.setEndOfCandidates("end-of-candidates"==S.endOfCandidates),T.setICE(e)}for(let w in S.media){const A=S.media[w],k=A.type,E=A.mid?A.mid.toString():w,P=new a(E,k);if(A.iceUfrag&&A.icePwd){const t=String(A.iceUfrag),i=String(A.icePwd),e=new o(t,i);e.setLite("ice-lite"==S.icelite),e.setEndOfCandidates("end-of-candidates"==A.endOfCandidates),T.setICE(e)}for(let t=0;A.candidates&&t<A.candidates.length;++t){const i=A.candidates[t],s=new e(i.foundation,i.component,i.transport,i.priority,i.ip,i.port,i.type,i.raddr,i.rport);T.addCandidate(s)}const I=A.fingerprint||S.fingerprint;if(I){const t=I.type,i=I.hash;let e=u.ACTPASS;A.setup&&(e=u.byValue(A.setup)),T.setDTLS(new r(e,t,i))}if(A.crypto){const t=A.crypto[0];T.setCrypto(new h(t.id,t.suite,t.config,t.sessionConfig))}let C=c.SENDRECV;A.direction&&(C=c.byValue(A.direction),P.setDirection(C)),A.control&&P.setControl(A.control),T.setExtmapAllowMixed("extmap-allow-mixed"==A.extmapAllowMixed||"extmap-allow-mixed"==S.extmapAllowMixed);const R=new Map;for(let t in A.rtp){const i=A.rtp[t],e=i.payload,n=i.codec;if("RED"===n.toUpperCase()||"ULPFEC"===n.toUpperCase())continue;let r={};for(let t in A.fmtp){const i=A.fmtp[t];if(i.payload===e){const t=i.config.split(";");for(let i in t){const e=t[i].split("="),s=e[0].trim(),n=e.splice(1).join("=").trim();r[s]=n}}}if("RTX"===n.toUpperCase())R.set(x(r.apt),e);else{const t=new s(n,e,r);i.encoding>1&&t.setChannels(i.encoding),P.addCodec(t)}}for(let t of R.entries()){const i=P.getCodecForType(t[0]);i&&i.setRTX(t[1])}for(let t=0;A.rtcpFb&&t<A.rtcpFb.length;++t){const i=P.getCodecForType(A.rtcpFb[t].payload);if(i){const e=A.rtcpFb[t].type,s=A.rtcpFb[t].subtype?A.rtcpFb[t].subtype.split(" "):null;i.addRTCPFeedback(new n(e,s))}}const D=A.ext;for(let t in D){const i=D[t];P.addExtension(i.value,i.uri)}const N=A.rids;for(let i in N){const e=N[i],s=new y(e.id,d.byValue(e.direction));let n=[];const r=new Map;if(e.params){const i=t.parseParams(e.params);for(let t in i)"pt"===t?n=i[t].split(","):r.set(t,i[t]);s.setFormats(n),s.setParams(r)}P.addRID(s)}const B=[];if(A.simulcast){const i=new p;if(A.simulcast.dir1){const e=d.byValue(A.simulcast.dir1),s=t.parseSimulcastStreamList(A.simulcast.list1);for(let t=0;t<s.length;++t){const n=[];for(let i=0;i<s[t].length;++i)n.push(new m(s[t][i].scid,s[t][i].paused));i.addSimulcastAlternativeStreams(e,n)}}if(A.simulcast.dir2){const e=d.byValue(A.simulcast.dir2),s=t.parseSimulcastStreamList(A.simulcast.list2);for(let t=0;t<s.length;++t){const n=[];for(let i=0;i<s[t].length;++i)n.push(new m(s[t][i].scid,s[t][i].paused));i.addSimulcastAlternativeStreams(e,n)}}for(let t of i.getSimulcastStreams(d.SEND)){const i=[];for(let e=0;e<t.length;e++){const s=new g(t[e].getId(),t[e].isPaused()),n=P.getRID(s.getId());if(n){const t=n.getFormats();for(let i=0;t&&i<t.length;++i){const e=P.getCodecForType(t[i]);e&&s.addCodec(e)}s.setParams(n.getParams()),i.push(s)}}i.length&&B.push(i)}P.setSimulcast(i)}const M=new Map;if(A.ssrcs)for(let t in A.ssrcs){let e=A.ssrcs[t],s=e.id,n=e.attribute,r=e.value,h=M.get(s);if(h||(h=new f(s),M.set(h.getSSRC(),h)),i("cname",n))h.setCName(r);else if(i("msid",n)){let t=r.split(" "),i=t[0],e=t[1];h.setStreamId(i),h.setTrackId(e);let n=T.getStream(i);n||(n=new v(i),T.addStream(n));let o=n.getTrack(e);o||(o=new _(k,e),o.setMediaId(E),o.setEncodings(B),n.addTrack(o)),o.addSSRC(s)}}if(A.msid){let t=A.msid.split(" "),i=t[0],e=t[1],s=T.getStream(i);s||(s=new v(i),T.addStream(s));let n=s.getTrack(e);n||(n=new _(k,e),n.setMediaId(E),n.setEncodings(B),s.addTrack(n));for(let[t,s]of M.entries())s.getStreamId()||(s.setStreamId(i),s.setTrackId(e),n.addSSRC(t))}for(let[t,i]of M.entries())if(!i.getStreamId()){let e=i.getCName(),s=E;i.setStreamId(e),i.setTrackId(s);let n=T.getStream(e);n||(n=new v(e),T.addStream(n));let r=n.getTrack(s);r||(r=new _(k,s),r.setMediaId(E),r.setEncodings(B),n.addTrack(r)),r.addSSRC(t)}if(A.ssrcGroups)for(let t in A.ssrcGroups){let i=A.ssrcGroups[t],e=i.ssrcs.split(" "),s=new l(i.semantics,e),n=M.get(x(e[0]));n&&T.getStream(n.getStreamId()).getTrack(n.getTrackId()).addSourceGroup(s)}if("application"==A.type&&"webrtc-datachannel"==A.payloads){const t=new b(A.sctpPort,A.maxMessageSize);P.setDataChannel(t)}T.addMedia(P)}return T},Ui=A}var re,he=(Hi||(Hi=1,w.defineProperty(zt,"__esModule",{value:!0}),zt.SDPInfo=ne(),zt.CandidateInfo=Jt(),zt.CodecInfo=$t(),zt.DTLSInfo=ei(),zt.CryptoInfo=si(),zt.ICEInfo=Gi(),zt.MediaInfo=Zi(),zt.Setup=ii(),zt.SourceGroupInfo=$i(),zt.SourceInfo=te(),zt.StreamInfo=se(),zt.TrackInfo=ee(),zt.RTCPFeedbackInfo=Zt(),zt.TrackEncodingInfo=ie(),zt.RIDInfo=ji(),zt.SimulcastInfo=Ki(),zt.SimulcastStreamInfo=Qi(),zt.DataChannelInfo=Ji(),zt.Direction=Yi()),zt),oe={exports:{}},ae=oe.exports;var ue=(re||(re=1,function(t,i){!function(e,s){var n="function",r="undefined",h="object",o="string",a="major",u="model",c="name",d="type",l="vendor",f="version",v="architecture",_="console",g="mobile",p="tablet",m="smarttv",w="wearable",y="embedded",b="Amazon",A="Apple",S="ASUS",T="BlackBerry",k="Browser",E="Chrome",x="Firefox",P="Google",I="Huawei",C="LG",R="Microsoft",D="Motorola",N="Opera",B="Samsung",M="Sharp",L="Sony",O="Xiaomi",F="Zebra",U="Facebook",V="Chromium OS",H="Mac OS",W=" Browser",q=function(t){for(var i={},e=0;e<t.length;e++)i[t[e].toUpperCase()]=t[e];return i},z=function(t,i){return typeof t===o&&-1!==G(i).indexOf(G(t))},G=function(t){return t.toLowerCase()},X=function(t,i){if(typeof t===o)return t=t.replace(/^\s\s*/,""),typeof i===r?t:t.substring(0,500)},j=function(t,i){for(var e,r,o,a,u,c,d=0;d<i.length&&!u;){var l=i[d],f=i[d+1];for(e=r=0;e<l.length&&!u&&l[e];)if(u=l[e++].exec(t))for(o=0;o<f.length;o++)c=u[++r],typeof(a=f[o])===h&&a.length>0?2===a.length?typeof a[1]==n?this[a[0]]=a[1].call(this,c):this[a[0]]=a[1]:3===a.length?typeof a[1]!==n||a[1].exec&&a[1].test?this[a[0]]=c?c.replace(a[1],a[2]):s:this[a[0]]=c?a[1].call(this,c,a[2]):s:4===a.length&&(this[a[0]]=c?a[3].call(this,c.replace(a[1],a[2])):s):this[a]=c||s;d+=2}},Q=function(t,i){for(var e in i)if(typeof i[e]===h&&i[e].length>0){for(var n=0;n<i[e].length;n++)if(z(i[e][n],t))return"?"===e?s:e}else if(z(i[e],t))return"?"===e?s:e;return i.hasOwnProperty("*")?i["*"]:t},K={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Y={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[f,[c,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[f,[c,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[c,f],[/opios[\/ ]+([\w\.]+)/i],[f,[c,N+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[f,[c,N+" GX"]],[/\bopr\/([\w\.]+)/i],[f,[c,N]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[f,[c,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[c,f],[/quark(?:pc)?\/([-\w\.]+)/i],[f,[c,"Quark"]],[/\bddg\/([\w\.]+)/i],[f,[c,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[f,[c,"UC"+k]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[f,[c,"WeChat"]],[/konqueror\/([\w\.]+)/i],[f,[c,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[f,[c,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[f,[c,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[f,[c,"Smart Lenovo "+k]],[/(avast|avg)\/([\w\.]+)/i],[[c,/(.+)/,"$1 Secure "+k],f],[/\bfocus\/([\w\.]+)/i],[f,[c,x+" Focus"]],[/\bopt\/([\w\.]+)/i],[f,[c,N+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[f,[c,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[f,[c,"Dolphin"]],[/coast\/([\w\.]+)/i],[f,[c,N+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[f,[c,"MIUI "+k]],[/fxios\/([-\w\.]+)/i],[f,[c,x]],[/\bqihu|(qi?ho?o?|360)browser/i],[[c,"360"+W]],[/\b(qq)\/([\w\.]+)/i],[[c,/(.+)/,"$1Browser"],f],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[c,/(.+)/,"$1"+W],f],[/samsungbrowser\/([\w\.]+)/i],[f,[c,B+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[c,/_/g," "],f],[/metasr[\/ ]?([\d\.]+)/i],[f,[c,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[c,"Sogou Mobile"],f],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[c,f],[/(lbbrowser|rekonq)/i,/\[(linkedin)app\]/i],[c],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[c,U],f],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[c,f],[/\bgsa\/([\w\.]+) .*safari\//i],[f,[c,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[f,[c,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[f,[c,E+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[c,E+" WebView"],f],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[f,[c,"Android "+k]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[c,f],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[f,[c,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[f,c],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[c,[f,Q,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[c,f],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[c,"Netscape"],f],[/(wolvic)\/([\w\.]+)/i],[c,f],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[f,[c,x+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[c,[f,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[c,[f,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[v,"amd64"]],[/(ia32(?=;))/i],[[v,G]],[/((?:i[346]|x)86)[;\)]/i],[[v,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[v,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[v,"armhf"]],[/windows (ce|mobile); ppc;/i],[[v,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[v,/ower/,"",G]],[/(sun4\w)[;\)]/i],[[v,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[v,G]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[u,[l,B],[d,p]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr])[-\w]+)/i,/sec-(sgh\w+)/i],[u,[l,B],[d,g]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[u,[l,A],[d,g]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[u,[l,A],[d,p]],[/(macintosh);/i],[u,[l,A]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[u,[l,M],[d,g]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[u,[l,I],[d,p]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[u,[l,I],[d,g]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i],[[u,/_/g," "],[l,O],[d,g]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[u,/_/g," "],[l,O],[d,p]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[u,[l,"OPPO"],[d,g]],[/\b(opd2\d{3}a?) bui/i],[u,[l,"OPPO"],[d,p]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[u,[l,"Vivo"],[d,g]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[u,[l,"Realme"],[d,g]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[u,[l,D],[d,g]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[u,[l,D],[d,p]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[u,[l,C],[d,p]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[u,[l,C],[d,g]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[u,[l,"Lenovo"],[d,p]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[u,/_/g," "],[l,"Nokia"],[d,g]],[/(pixel c)\b/i],[u,[l,P],[d,p]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[u,[l,P],[d,g]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[u,[l,L],[d,g]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[u,"Xperia Tablet"],[l,L],[d,p]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[u,[l,"OnePlus"],[d,g]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[u,[l,b],[d,p]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[u,/(.+)/g,"Fire Phone $1"],[l,b],[d,g]],[/(playbook);[-\w\),; ]+(rim)/i],[u,l,[d,p]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[u,[l,T],[d,g]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[u,[l,S],[d,p]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[u,[l,S],[d,g]],[/(nexus 9)/i],[u,[l,"HTC"],[d,p]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[l,[u,/_/g," "],[d,g]],[/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])\w*(\)| bui)/i],[u,[l,"TCL"],[d,p]],[/(itel) ((\w+))/i],[[l,G],u,[d,Q,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[u,[l,"Acer"],[d,p]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[u,[l,"Meizu"],[d,g]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[u,[l,"Ulefone"],[d,g]],[/droid.+; (a(?:015|06[35]|142p?))/i],[u,[l,"Nothing"],[d,g]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[l,u,[d,g]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[l,u,[d,p]],[/(surface duo)/i],[u,[l,R],[d,p]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[u,[l,"Fairphone"],[d,g]],[/(u304aa)/i],[u,[l,"AT&T"],[d,g]],[/\bsie-(\w*)/i],[u,[l,"Siemens"],[d,g]],[/\b(rct\w+) b/i],[u,[l,"RCA"],[d,p]],[/\b(venue[\d ]{2,7}) b/i],[u,[l,"Dell"],[d,p]],[/\b(q(?:mv|ta)\w+) b/i],[u,[l,"Verizon"],[d,p]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[u,[l,"Barnes & Noble"],[d,p]],[/\b(tm\d{3}\w+) b/i],[u,[l,"NuVision"],[d,p]],[/\b(k88) b/i],[u,[l,"ZTE"],[d,p]],[/\b(nx\d{3}j) b/i],[u,[l,"ZTE"],[d,g]],[/\b(gen\d{3}) b.+49h/i],[u,[l,"Swiss"],[d,g]],[/\b(zur\d{3}) b/i],[u,[l,"Swiss"],[d,p]],[/\b((zeki)?tb.*\b) b/i],[u,[l,"Zeki"],[d,p]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[l,"Dragon Touch"],u,[d,p]],[/\b(ns-?\w{0,9}) b/i],[u,[l,"Insignia"],[d,p]],[/\b((nxa|next)-?\w{0,9}) b/i],[u,[l,"NextBook"],[d,p]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[l,"Voice"],u,[d,g]],[/\b(lvtel\-)?(v1[12]) b/i],[[l,"LvTel"],u,[d,g]],[/\b(ph-1) /i],[u,[l,"Essential"],[d,g]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[u,[l,"Envizen"],[d,p]],[/\b(trio[-\w\. ]+) b/i],[u,[l,"MachSpeed"],[d,p]],[/\btu_(1491) b/i],[u,[l,"Rotor"],[d,p]],[/(shield[\w ]+) b/i],[u,[l,"Nvidia"],[d,p]],[/(sprint) (\w+)/i],[l,u,[d,g]],[/(kin\.[onetw]{3})/i],[[u,/\./g," "],[l,R],[d,g]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[u,[l,F],[d,p]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[u,[l,F],[d,g]],[/smart-tv.+(samsung)/i],[l,[d,m]],[/hbbtv.+maple;(\d+)/i],[[u,/^/,"SmartTV"],[l,B],[d,m]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[l,C],[d,m]],[/(apple) ?tv/i],[l,[u,A+" TV"],[d,m]],[/crkey/i],[[u,E+"cast"],[l,P],[d,m]],[/droid.+aft(\w+)( bui|\))/i],[u,[l,b],[d,m]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[u,[l,M],[d,m]],[/(bravia[\w ]+)( bui|\))/i],[u,[l,L],[d,m]],[/(mitv-\w{5}) bui/i],[u,[l,O],[d,m]],[/Hbbtv.*(technisat) (.*);/i],[l,u,[d,m]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[l,X],[u,X],[d,m]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[d,m]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[l,u,[d,_]],[/droid.+; (shield) bui/i],[u,[l,"Nvidia"],[d,_]],[/(playstation [345portablevi]+)/i],[u,[l,L],[d,_]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[u,[l,R],[d,_]],[/\b(sm-[lr]\d\d[05][fnuw]?s?)\b/i],[u,[l,B],[d,w]],[/((pebble))app/i],[l,u,[d,w]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[u,[l,A],[d,w]],[/droid.+; (glass) \d/i],[u,[l,P],[d,w]],[/droid.+; (wt63?0{2,3})\)/i],[u,[l,F],[d,w]],[/(quest( \d| pro)?)/i],[u,[l,U],[d,w]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[l,[d,y]],[/(aeobc)\b/i],[u,[l,b],[d,y]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[u,[d,g]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[u,[d,p]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[d,p]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[d,g]],[/(android[-\w\. ]{0,9});.+buil/i],[u,[l,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[f,[c,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[f,[c,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[c,f],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[f,c]],os:[[/microsoft (windows) (vista|xp)/i],[c,f],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[c,[f,Q,K]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[f,Q,K],[c,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[f,/_/g,"."],[c,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[c,H],[f,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[f,c],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[c,f],[/\(bb(10);/i],[f,[c,T]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[f,[c,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[f,[c,x+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[f,[c,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[f,[c,"watchOS"]],[/crkey\/([\d\.]+)/i],[f,[c,E+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[c,V],f],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[c,f],[/(sunos) ?([\w\.\d]*)/i],[[c,"Solaris"],f],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[c,f]]},J=function(t,i){if(typeof t===h&&(i=t,t=s),!(this instanceof J))return new J(t,i).getResult();var _=typeof e!==r&&e.navigator?e.navigator:s,m=t||(_&&_.userAgent?_.userAgent:""),w=_&&_.userAgentData?_.userAgentData:s,y=i?function(t,i){var e={};for(var s in t)i[s]&&i[s].length%2==0?e[s]=i[s].concat(t[s]):e[s]=t[s];return e}(Y,i):Y,b=_&&_.userAgent==m;return this.getBrowser=function(){var t={};return t[c]=s,t[f]=s,j.call(t,m,y.browser),t[a]=function(t){return typeof t===o?t.replace(/[^\d\.]/g,"").split(".")[0]:s}(t[f]),b&&_&&_.brave&&typeof _.brave.isBrave==n&&(t[c]="Brave"),t},this.getCPU=function(){var t={};return t[v]=s,j.call(t,m,y.cpu),t},this.getDevice=function(){var t={};return t[l]=s,t[u]=s,t[d]=s,j.call(t,m,y.device),b&&!t[d]&&w&&w.mobile&&(t[d]=g),b&&"Macintosh"==t[u]&&_&&typeof _.standalone!==r&&_.maxTouchPoints&&_.maxTouchPoints>2&&(t[u]="iPad",t[d]=p),t},this.getEngine=function(){var t={};return t[c]=s,t[f]=s,j.call(t,m,y.engine),t},this.getOS=function(){var t={};return t[c]=s,t[f]=s,j.call(t,m,y.os),b&&!t[c]&&w&&w.platform&&"Unknown"!=w.platform&&(t[c]=w.platform.replace(/chrome os/i,V).replace(/macos/i,H)),t},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return m},this.setUA=function(t){return m=typeof t===o&&t.length>500?X(t,500):t,this},this.setUA(m),this};J.VERSION="0.7.39",J.BROWSER=q([c,f,a]),J.CPU=q([v]),J.DEVICE=q([u,l,d,_,g,m,p,w,y]),J.ENGINE=J.OS=q([c,f]),t.exports&&(i=t.exports=J),i.UAParser=J;var Z=typeof e!==r&&(e.jQuery||e.Zepto);if(Z&&!Z.ua){var $=new J;Z.ua=$.getResult(),Z.ua.get=function(){return $.getUA()},Z.ua.set=function(t){$.setUA(t);var i=$.getResult();for(var e in i)Z.ua[e]=i[e]}}}("object"==typeof s?s:ae)}(oe,oe.exports)),oe.exports);const ce=A(ue),de=["iOS"];class le extends ce{isChromium(){return this.getUA().match(/Chrome/i)}isChrome(){const t=this.getBrowser();if(!t.name)return!1;const i=this.getOS();let e=!0;return e=!new RegExp(de.join("|"),"i").test(i.name),t.name.match(/Chrome/i)&&e}isFirefox(){const t=this.getBrowser();return!!t.name&&t.name.match(/Firefox/i)}isOpera(){const t=this.getBrowser();return!!t.name&&t.name.match(/Opera/i)}isSafari(){const t=this.getBrowser();return!!t.name&&t.name.match(/Safari/i)}constructor(){super(s.navigator.userAgent)}}const fe=at.get("SdpParser"),ve=Array.from({length:31},(t,i)=>i+35),_e=Array.from({length:32},(t,i)=>i+96),ge=Array.from({length:14},(t,i)=>i+1),pe=Array.from({length:240},(t,i)=>i+16),me={setSimulcast(t,i){if(fe.info("Setting simulcast. Codec: ",i),!(new le).isChromium())return fe.warn("Your browser does not appear to support Simulcast. For a better experience, use a Chromium based browser."),t;if("h264"!==i&&"vp8"!==i)return fe.warn("Your selected codec ".concat(i," does not appear to support Simulcast.  To broadcast using simulcast, please use H.264 or VP8.")),t;if(!/m=video/.test(t))return fe.warn("There is no available video for simulcast to be enabled."),t;try{const i=new RegExp("m=video.*?a=ssrc:(\\d*) cname:(.+?)\\r\\n","s"),e=new RegExp("m=video.*?a=ssrc:(\\d*) msid:(.+?)\\r\\n","s"),s=i.exec(t),n=s[1],r=s[2],h=e.exec(t)[2],o=2,a=[n];for(let i=0;i<o;++i){const e=100+2*i,s=e+1;a.push(e),t+="a=ssrc-group:FID "+e+" "+s+"\r\na=ssrc:"+e+" cname:"+r+"\r\na=ssrc:"+e+" msid:"+h+"\r\na=ssrc:"+s+" cname:"+r+"\r\na=ssrc:"+s+" msid:"+h+"\r\n"}return t+="a=ssrc-group:SIM "+a.join(" ")+"\r\n",fe.info("Simulcast setted"),fe.debug("Simulcast SDP: ",t),t}catch(t){throw fe.error("Error setting SDP for simulcast: ",t),t}},setStereo:t=>(fe.info("Replacing SDP response for support stereo"),t=t.replace(/useinbandfec=1/g,"useinbandfec=1; stereo=1"),fe.info("Replaced SDP response for support stereo"),fe.debug("New SDP value: ",t),t),setDTX:t=>(fe.info("Replacing SDP response for support dtx"),t=t.replace("useinbandfec=1","useinbandfec=1; usedtx=1"),fe.info("Replaced SDP response for support dtx"),fe.debug("New SDP value: ",t),t),setAbsoluteCaptureTime(t){const i="a=extmap:"+me.getAvailableHeaderExtensionIdRange(t)[0]+" http://www.webrtc.org/experiments/rtp-hdrext/abs-capture-time\r\n";return t=t.replace(/(m=.*\r\n(?:.*\r\n)*?)(a=extmap.*\r\n)/gm,(t,e,s)=>e+i+s),fe.info("Replaced SDP response for setting absolute capture time"),fe.debug("New SDP value: ",t),t},setDependencyDescriptor(t){const i="a=extmap:"+me.getAvailableHeaderExtensionIdRange(t)[0]+" https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension\r\n";return t=t.replace(/(m=.*\r\n(?:.*\r\n)*?)(a=extmap.*\r\n)/gm,(t,e,s)=>e+i+s),fe.info("Replaced SDP response for setting depency descriptor"),fe.debug("New SDP value: ",t),t},setVideoBitrate(t,i){if(i<1)fe.info("Remove bitrate restrictions"),t=t.replace(/b=AS:.*\r\n/,"").replace(/b=TIAS:.*\r\n/,"");else{const e=he.SDPInfo.parse(t),s=e.getMedia("video");fe.info("Setting video bitrate"),s.setBitrate(i),t=e.toString()}return t},removeSdpLine:(t,i)=>(fe.debug("SDP before trimming: ",t),t=t.split("\n").filter(t=>t.trim()!==i).join("\n"),fe.debug("SDP trimmed result: ",t),t),adaptCodecName(t,i,e){if(!t)return t;const s=new RegExp("".concat(i),"i");return t.replace(s,e)},setMultiopus(t,i){if(!(new le).isFirefox()&&(!i||we(i)))if(t.includes("multiopus/48000/6"))fe.info("Multiopus already setted");else{fe.info("Setting multiopus");const i=/m=audio 9 UDP\/TLS\/RTP\/SAVPF (.*)\r\n/.exec(t)[0],e=me.getAvailablePayloadTypeRange(t)[0],s=i.replace("\r\n"," ")+e+"\r\na=rtpmap:"+e+" multiopus/48000/6\r\na=fmtp:"+e+" channel_mapping=0,4,1,2,3,5;coupled_streams=2;minptime=10;num_streams=4;useinbandfec=1\r\n";t=t.replace(i,s),fe.info("Multiopus offer created"),fe.debug("SDP parsed for multioups: ",t)}return t},getAvailablePayloadTypeRange(t){const i=t.matchAll(/m=(?:.*) (?:.*) UDP\/TLS\/RTP\/SAVPF (.*)\r\n/gm);let e=_e.concat(ve);for(const t of i){const i=t[1].split(" ").map(t=>x(t));e=e.filter(t=>!i.includes(t))}return e},getAvailableHeaderExtensionIdRange(t){const i=t.matchAll(/a=extmap:(\d+)(?:.*)\r\n/gm);let e=ge.concat(pe);for(const t of i){const i=t[1].split(" ").map(t=>x(t));e=e.filter(t=>!i.includes(t))}return e},renegotiate(t,i){const e=he.SDPInfo.parse(t),s=he.SDPInfo.parse(i);for(const t of e.getMedias()){let i=s.getMediaById(t.getId());if(!i){i=new he.MediaInfo(t.getId(),t.getType()),i.setDirection(he.Direction.reverse(t.getDirection()));const e=s.getMedia(t.getType());if(e){i.setCodecs(e.getCodecs());for(const[t,s]of e.getExtensions())i.addExtension(t,s)}s.addMedia(i)}}return s.toString()},updateMissingVideoExtensions(t,i){var e;const s=he.SDPInfo.parse(t),n=null==(e=he.SDPInfo.parse(i).getMediasByType("video")[0])?void 0:e.getExtensions();if(n||n.length){for(const i of s.getMediasByType("video")){const e=i.getExtensions();n.forEach((s,n)=>{if(!e.get(n)){const e=i.getId(),r="a=extmap:"+n+" "+s+"\r\n",h=new RegExp("(a=mid:"+e+"\r\n(?:.*\r\n)*?)","g");t=t.replace(h,(t,i,e)=>i+r)}})}return t}},getCodecPayloadType(t){const i=t.matchAll(/a=rtpmap:(\d+) (\w+)\/\d+/g),e={};for(const t of i)e[t[1]]=t[2];return e}},we=t=>t.getAudioTracks().some(t=>t.getSettings().channelCount>2),ye={VP8:"vp8",VP9:"vp9",H264:"h264",AV1:"av1",H265:"h265"},be={OPUS:"opus",MULTIOPUS:"multiopus"},Ae=at.get("PeerConnection"),Se="Publisher",Te="Viewer",ke={track:"track",connectionStateChange:"connectionStateChange"},Ee={stereo:!1,mediaStream:null,codec:"h264",simulcast:!1,scalabilityMode:null,disableAudio:!1,disableVideo:!1,setSDPToPeer:!0};class xe extends lt{async createRTCPeer(t,i){void 0===t&&(t={autoInitStats:!0,statsIntervalMs:1e3}),void 0===i&&(i=Te),Ae.info("Creating new RTCPeerConnection"),Ae.debug("RTC configuration provided by user: ",t),this.peer=Ce(this,t),this.mode=i,t.autoInitStats&&this.initStats(t)}getRTCPeer(){return Ae.info("Getting RTC Peer"),this.peer}async closeRTCPeer(){var t;Ae.info("Closing RTCPeerConnection"),null==(t=this.peer)||t.close(),this.peer=null,this.stopStats(),this.emit(ke.connectionStateChange,"closed")}async setRTCRemoteSDP(t){Ae.info("Setting RTC Remote SDP");const i={type:"answer",sdp:t};try{await this.peer.setRemoteDescription(i),Ae.info("RTC Remote SDP was set successfully."),Ae.debug("RTC Remote SDP new value: ",t)}catch(t){throw Ae.error("Error while setting RTC Remote SDP: ",t),t}}async getRTCLocalSDP(t){void 0===t&&(t=Ee),Ae.info("Getting RTC Local SDP"),t=l(l({},Ee),t),Ae.debug("Options: ",t);const i=Ie(t.mediaStream);i?Ne(this.peer,i,t):Be(this.peer,t),Ae.info("Creating peer offer");const e=await this.peer.createOffer();return Ae.info("Peer offer created"),Ae.debug("Peer offer response: ",e.sdp),this.sessionDescription=e,t.disableAudio||(t.stereo&&(this.sessionDescription.sdp=me.setStereo(this.sessionDescription.sdp)),t.dtx&&(this.sessionDescription.sdp=me.setDTX(this.sessionDescription.sdp)),this.sessionDescription.sdp=me.setMultiopus(this.sessionDescription.sdp,i)),!t.disableVideo&&t.simulcast&&(this.sessionDescription.sdp=me.setSimulcast(this.sessionDescription.sdp,t.codec)),t.absCaptureTime&&(this.sessionDescription.sdp=me.setAbsoluteCaptureTime(this.sessionDescription.sdp)),t.dependencyDescriptor&&(this.sessionDescription.sdp=me.setDependencyDescriptor(this.sessionDescription.sdp)),t.setSDPToPeer&&(await this.peer.setLocalDescription(this.sessionDescription),Ae.info("Peer local description set")),this.sessionDescription.sdp}async addRemoteTrack(t,i){return new Promise((e,s)=>{try{const s=this.peer.addTransceiver(t,{direction:"recvonly",streams:i});this.transceiverMap.set(s,e)}catch(t){s(t)}})}updateBandwidthRestriction(t,i){if(this.mode===Te)throw Ae.error("Viewer attempting to update bitrate, this is not allowed"),new m("It is not possible for a viewer to update the bitrate.");return Ae.info("Updating bandwidth restriction, bitrate value: ",i),Ae.debug("SDP value: ",t),me.setVideoBitrate(t,i)}async updateBitrate(t){if(void 0===t&&(t=0),this.mode===Te)throw Ae.error("Viewer attempting to update bitrate, this is not allowed"),new m("It is not possible for a viewer to update the bitrate.");if(!this.peer)throw Ae.error("Cannot update bitrate. No peer found."),new m("Cannot update bitrate. No peer found.");Ae.info("Updating bitrate to value: ",t),this.sessionDescription=await this.peer.createOffer(),await this.peer.setLocalDescription(this.sessionDescription);const i=this.updateBandwidthRestriction(this.peer.remoteDescription.sdp,t);await this.setRTCRemoteSDP(i),Ae.info("Bitrate restrictions updated: ","".concat(t>0?t:"unlimited"," kbps"))}getRTCPeerStatus(){if(Ae.info("Getting RTC peer status"),!this.peer)return null;const t=Me(this.peer);return Ae.info("RTC peer status getted, value: ",t),t}replaceTrack(t){if(!this.peer)return void Ae.error("Could not change track if there is not an active connection.");const i=this.peer.getSenders().find(i=>i.track.kind===t.kind);i?i.replaceTrack(t):Ae.error("There is no ".concat(t.kind," track in active broadcast."))}static getCapabilities(t){const i=new le,e=RTCRtpSender.getCapabilities(t);if(e){const s={};let n=new RegExp("^video/(".concat(w.values(ye).join("|"),")x?$"),"i");"audio"===t&&(n=new RegExp("^audio/(".concat(w.values(be).join("|"),")$"),"i"),i.isChrome()&&(s.multiopus={mimeType:"audio/multiopus",channels:6}));for(const t of e.codecs){const i=t.mimeType.match(n);if(i){const e=i[1].toLowerCase();if(s[e]=f(l({},s[e]),{mimeType:t.mimeType}),t.scalabilityModes){let i=s[e].scalabilityModes||[];i=[...i,...t.scalabilityModes],s[e].scalabilityModes=[...new Set(i)]}t.channels&&(s[e].channels=t.channels)}}e.codecs=w.keys(s).map(t=>l({codec:t},s[t]))}return e}getTracks(){var t,i;return null==(i=null==(t=this.peer)?void 0:t.getSenders())?void 0:i.map(t=>t.track)}initStats(t){this.peerConnectionStats?Ae.warn("PeerConnection.initStats() has already been called. Automatic initialization occurs via View.connect(), Publish.connect() or this.createRTCPeer(). See options"):this.peer?(this.peerConnectionStats=new At(this.peer,t),gt(this.peerConnectionStats,this,[bt])):Ae.warn("Cannot init peer stats: RTCPeerConnection not initialized")}stopStats(){var t;null==(t=this.peerConnectionStats)||t.stop(),this.peerConnectionStats=null}constructor(){super(),this.mode=null,this.sessionDescription=null,this.peer=null,this.peerConnectionStats=null,this.transceiverMap=new Map}}const Pe=t=>(null==t?void 0:t.getAudioTracks().length)<=1&&(null==t?void 0:t.getVideoTracks().length)<=1,Ie=t=>{if(!t)return null;if(t instanceof MediaStream&&Pe(t))return t;if(!(t instanceof MediaStream)){Ae.info("Creating MediaStream to add received tracks.");const i=new MediaStream;for(const e of t)i.addTrack(e);if(Pe(i))return i}throw Ae.error("MediaStream must have 1 audio track and 1 video track, or at least one of them."),new m("MediaStream must have 1 audio track and 1 video track, or at least one of them.")},Ce=(t,i)=>{const e=new RTCPeerConnection(i);return De(t,e),e};async function Re(t){return new Promise(i=>u(i,t))}const De=(t,i)=>{i.ontrack=async i=>{Ae.info("New track from peer."),Ae.debug("Track event value: ",i);const e=t.transceiverMap.get(i.transceiver);if(e){for(;!i.transceiver.mid;)await Re(100);e(i.transceiver),t.transceiverMap.delete(i.transceiver)}u(()=>{t.emit(ke.track,i)},0)},i.connectionState?i.onconnectionstatechange=e=>{Ae.info("Peer connection state change: ",i.connectionState),t.emit(ke.connectionStateChange,i.connectionState)}:i.oniceconnectionstatechange=e=>{Ae.info("Peer ICE connection state change: ",i.iceConnectionState),t.emit(ke.connectionStateChange,i.iceConnectionState)},i.onnegotiationneeded=async t=>{if(!i.remoteDescription)return;Ae.info("Peer onnegotiationneeded, updating local description");const e=await i.createOffer();Ae.info("Peer onnegotiationneeded, got local offer",e.sdp),e.sdp=me.updateMissingVideoExtensions(e.sdp,i.remoteDescription.sdp),await i.setLocalDescription(e);const s=me.renegotiate(e.sdp,i.remoteDescription.sdp);Ae.info("Peer onnegotiationneeded, updating remote description",s),await i.setRemoteDescription({type:"answer",sdp:s}),Ae.info("Peer onnegotiationneeded, renegotiation done")}},Ne=(t,i,e)=>{Ae.info("Adding mediaStream tracks to RTCPeerConnection");for(const s of i.getTracks()){const n={streams:[i]};"audio"===s.kind&&(n.direction=e.disableAudio?"inactive":"sendonly"),"video"===s.kind&&(n.direction=e.disableVideo?"inactive":"sendonly",e.scalabilityMode&&(new le).isChrome()?(Ae.debug("Video track with scalability mode: ".concat(e.scalabilityMode,".")),n.sendEncodings=[{scalabilityMode:e.scalabilityMode}]):e.scalabilityMode&&Ae.warn("SVC is only supported in Google Chrome")),t.addTransceiver(s,n),Ae.info("Track '".concat(s.label,"' added: "),"id: ".concat(s.id),"kind: ".concat(s.kind))}},Be=(t,i)=>{const e=new le;if(!i.disableVideo){const i=t.addTransceiver("video",{direction:"recvonly"});e.isOpera()&&i.setCodecPreferences(RTCRtpReceiver.getCapabilities("video").codecs.filter(t=>"video/H264"!==t.mimeType||t.sdpFmtpLine.includes("profile-level-id=4")))}i.disableAudio||t.addTransceiver("audio",{direction:"recvonly"});for(let e=0;e<i.multiplexedAudioTracks;e++)t.addTransceiver("audio",{direction:"recvonly"})},Me=t=>{var i;const e=null!=(i=t.connectionState)?i:t.iceConnectionState;switch(e){case"checking":return"connecting";case"completed":return"connected";default:return e}};var Le,Oe,Fe,Ue={};var Ve=function(){if(Fe)return Oe;Fe=1;const{TypedEmitter:t}=(Le||(Le=1,w.defineProperty(Ue,"__esModule",{value:!0}),Ue.TypedEmitter=dt().EventEmitter),Ue);class i extends t{cmd(t,i){return this.tm.cmd(t,i,this.namespace)}event(t,i){return this.tm.event(t,i,this.namespace)}close(){return this.tm.namespaces.delete(this.namespace)}constructor(t,i){super(),this.namespace=t,this.tm=i}}return Oe=class extends t{bv(t){this.transport.send(JSON.stringify(t))}cmd(t,i,e){return void 0===e&&(e=void 0),new Promise((s,n)=>{if(!t||0===t.length)throw new m("Bad command name");const r={type:"cmd",transId:this.maxId++,name:t,data:i};e&&(r.namespace=e),this.transactions.set(r.transId,f(l({},r),{resolve:s,reject:n}));try{this.bv(r)}catch(t){throw this.transactions.delete(r.transId),t}})}event(t,i,e){if(void 0===e&&(e=void 0),!t||0===t.length)throw new m("Bad event name");const s={type:"event",name:t,data:i};e&&(s.namespace=e),this.bv(s)}namespace(t){let e=this.namespaces.get(t);return e||(e=new i(t,this),this.namespaces.set(t,e),e)}close(){for(const t of this.namespaces.values())t.close();this.transport.removeListener?this.transport.removeListener("message",this.listener):this.transport.removeEventListener("message",this.listener)}constructor(t){super(),this.maxId=0,this.namespaces=new Map,this.transactions=new Map,this.transport=t,this.listener=t=>{let i;try{i=JSON.parse(t.utf8Data||t.data||t)}catch(t){return}switch(i.type){case"cmd":const{transId:t}=i,s={name:i.name,data:i.data,namespace:i.namespace,accept:i=>{this.bv({type:"response",transId:t,data:i})},reject:i=>{this.bv({type:"error",transId:t,data:i})}};if(s.namespace){const t=this.namespaces.get(s.namespace);t?t.emit("cmd",s):this.emit("cmd",s)}else this.emit("cmd",s);break;case"response":{const t=this.transactions.get(i.transId);if(!t)return;this.transactions.delete(i.transId),t.resolve(i.data);break}case"error":{const t=this.transactions.get(i.transId);if(!t)return;this.transactions.delete(i.transId),t.reject(i.data);break}case"event":const n={name:i.name,data:i.data,namespace:i.namespace};if(n.namespace){var e=this.namespaces.get(n.namespace);e?e.emit("event",n):this.emit("event",n)}else this.emit("event",n)}},this.transport.addListener?this.transport.addListener("message",this.listener):this.transport.addEventListener("message",this.listener)}}}();const He=A(Ve),We=at.get("Signaling"),qe="wsConnectionSuccess",ze="wsConnectionError",Ge="wsConnectionClose",Xe="broadcastEvent";class je extends lt{async connect(){var t;return We.info("Connecting to Signaling Server"),this.transactionManager&&(null==(t=this.webSocket)?void 0:t.readyState)===WebSocket.OPEN?(We.info("Connected to server: ",this.webSocket.url),We.debug("WebSocket value: ",{url:this.webSocket.url,protocol:this.webSocket.protocol,readyState:this.webSocket.readyState,binaryType:this.webSocket.binaryType,extensions:this.webSocket.extensions}),this.emit(qe,{ws:this.webSocket,tm:this.transactionManager}),this.webSocket):new Promise((t,i)=>{this.webSocket=new WebSocket(this.wsUrl),this.transactionManager=new He(this.webSocket),this.webSocket.onopen=()=>{We.info("WebSocket opened"),this.transactionManager.on("event",t=>{this.emit(Xe,t)}),We.info("Connected to server: ",this.webSocket.url),We.debug("WebSocket value: ",{url:this.webSocket.url,protocol:this.webSocket.protocol,readyState:this.webSocket.readyState,binaryType:this.webSocket.binaryType,extensions:this.webSocket.extensions}),this.emit(qe,{ws:this.webSocket,tm:this.transactionManager}),t(this.webSocket)},this.webSocket.onerror=()=>{We.error("WebSocket not connected: ",this.webSocket.url),this.emit(ze,this.webSocket.url),i(this.webSocket.url)},this.webSocket.onclose=()=>{this.webSocket=null,this.transactionManager=null,We.info("Connection closed with Signaling Server."),this.emit(Ge)}})}close(){var t;We.info("Closing connection with Signaling Server."),null==(t=this.webSocket)||t.close()}async subscribe(t,i,e,s){var n,r,h,o,a;void 0===e&&(e=null),void 0===s&&(s=null),We.info("Starting subscription to streamName: ",this.streamName),We.debug("Subcription local description: ",t);const u=Qe(i,e,s),c={sdp:t=me.adaptCodecName(t,"AV1X",ye.AV1),streamId:this.streamName,pinnedSourceId:u.pinnedSourceId,excludedSourceIds:u.excludedSourceIds,events:["active","inactive","layers","viewercount","vad","updated","migrate","stopped"]};u.vad&&(c.vad=!0),Array.isArray(u.events)&&(c.events=u.events),u.forcePlayoutDelay&&(c.forcePlayoutDelay=u.forcePlayoutDelay),u.layer&&(c.layer=u.layer),u.abrConfiguration&&(c.abr={initialBitrate:null==(n=u.abrConfiguration.metadata)?void 0:n.bitrate,strategy:u.abrConfiguration.strategy}),u.customKeys&&(c.customKeys=u.customKeys),u.forceSmooth&&(c.abr=f(l({},c.abr||{}),{forceSmooth:u.forceSmooth}));try{if(u.disableVideo&&u.disableAudio)throw new m("Not attempting to connect as video and audio are disabled");await this.connect(),We.info("Sending view command",c);const t=await this.transactionManager.cmd("view",c),i=null==(a=null==(o=null==(h=null==(r=RTCRtpReceiver.getCapabilities)?void 0:r.call(RTCRtpReceiver,"video"))?void 0:h.codecs)?void 0:o.find)?void 0:a.call(o,t=>"video/AV1X"===t.mimeType);return t.sdp=i?me.adaptCodecName(t.sdp,ye.AV1,"AV1X"):t.sdp,We.info("Command sent, subscriberId: ",t.subscriberId),We.debug("Command result: ",t),this.serverId=t.subscriberId,this.clusterId=t.clusterId,this.streamViewId=t.streamViewId,W(this.streamName),q(this.serverId),z(t.streamViewId),K(this.clusterId),t.sdp}catch(t){throw We.error("Error sending view command, error: ",t),t}}async publish(t,i,e,s){var n,r,h,o,a,u,c,d;void 0===e&&(e=null),void 0===s&&(s=null);const l=Ke(i,e,s);We.info("Starting publishing to streamName: ".concat(this.streamName,", codec: ").concat(l.codec)),We.debug("Publishing local description: ",t);const f=null!=(o=null==(h=null==(r=null==(n=xe.getCapabilities)?void 0:n.call(xe,"video"))?void 0:r.codecs)?void 0:h.map(t=>t.codec))?o:[],v=w.values(ye);if(-1===v.indexOf(l.codec))throw We.error("Invalid codec ".concat(l.codec,". Possible values are: "),v),new m("Invalid codec ".concat(l.codec,". Possible values are: ").concat(v));if(f.length>0&&-1===f.indexOf(l.codec))throw We.error("Unsupported codec ".concat(l.codec,". Possible values are: "),f),new m("Unsupported codec ".concat(l.codec,". Possible values are: ").concat(f));l.codec===ye.AV1&&(t=me.adaptCodecName(t,"AV1X",ye.AV1));const _={name:this.streamName,sdp:t,codec:l.codec,sourceId:l.sourceId};if(l.priority){if(!(Number.isInteger(l.priority)&&l.priority>=-2147483648&&l.priority<=2147483647))throw new m("Invalid value for priority option. It should be a decimal integer between the range [-2^31, +2^31 - 1]");_.priority=l.priority}null!==l.record&&(_.record=l.record),Array.isArray(l.events)&&(_.events=l.events);try{if(l.disableVideo&&l.disableAudio)throw new m("Not attempting to connect as video and audio are disabled");await this.connect(),We.info("Sending publish command");const t=await this.transactionManager.cmd("publish",_);if(l.codec===ye.AV1){const i=null==(d=null==(c=null==(u=null==(a=RTCRtpSender.getCapabilities)?void 0:a.call(RTCRtpSender,"video"))?void 0:u.codecs)?void 0:c.find)?void 0:d.call(c,t=>"video/AV1X"===t.mimeType);t.sdp=i?me.adaptCodecName(t.sdp,ye.AV1,"AV1X"):t.sdp}return We.info("Command sent, publisherId: ",t.publisherId),We.debug("Command result: ",t),this.serverId=t.publisherId,this.clusterId=t.clusterId,W(this.streamName),q(this.serverId),G(t.feedId),K(this.clusterId),t.sdp}catch(t){throw We.error("Error sending publish command, error: ",t),t}}async cmd(t,i){return We.info("Sending cmd: ".concat(t)),this.transactionManager.cmd(t,i)}constructor(t={streamName:null,url:"ws://localhost:8080/"}){super(),this.streamName=t.streamName,this.wsUrl=t.url,this.webSocket=null,this.transactionManager=null,this.serverId=null,this.clusterId=null,this.streamViewId=null}}const Qe=(t,i,e)=>{let s="object"==typeof t?t:{};return 0===w.keys(s).length&&(s={vad:t,pinnedSourceId:i,excludedSourceIds:e}),s},Ke=(t,i,e)=>{let s="object"==typeof t?t:{};if(0===w.keys(s).length){s={codec:null!=t?t:ye.H264,record:i,sourceId:e}}return s};class Ye extends m{constructor(t,i){super(t),this.name="FetchError",this.status=i}}const Je=at.get("Director"),Ze="WebRtc";let $e="",ts="https://director.millicast.com";const is={setEndpoint:t=>{ts=t.replace(/\/$/,"")},getEndpoint:()=>ts,setLiveDomain:t=>{$e=t.replace(/\/$/,"")},getLiveDomain:()=>$e,getPublisher:async(t,i,e)=>{void 0===i&&(i=null),void 0===e&&(e=Ze);const s=es(t,i,e);Je.info("Getting publisher connection path for stream name: ",s.streamName);const n={streamName:s.streamName,streamType:s.streamType},r={"Content-Type":"application/json",Authorization:"Bearer ".concat(s.token)},h="".concat(is.getEndpoint(),"/api/director/publish");try{const t=await fetch(h,{method:"POST",headers:r,body:JSON.stringify(n)});let i=await t.json();if("fail"===i.status)throw new Ye(i.data.message,t.status);return i=ns(i),Je.debug("Getting publisher response: ",i),H(i.data.streamAccountId),i.data}catch(t){throw Je.error("Error while getting publisher connection path. ",t),t}},getSubscriber:async(t,i,e)=>{void 0===i&&(i=null),void 0===e&&(e=null);const s=ss(t,i,e);H(s.streamAccountId),Je.info("Getting subscriber connection data for stream name: ".concat(s.streamName," and account id: ").concat(s.streamAccountId));const n={streamAccountId:s.streamAccountId,streamName:s.streamName};let r={"Content-Type":"application/json"};s.subscriberToken&&(r=f(l({},r),{Authorization:"Bearer ".concat(s.subscriberToken)}));const h="".concat(is.getEndpoint(),"/api/director/subscribe");try{const t=await fetch(h,{method:"POST",headers:r,body:JSON.stringify(n)});let i=await t.json();if("fail"===i.status)throw new Ye(i.data.message,t.status);return i=ns(i),Je.debug("Getting subscriber response: ",i),s.subscriberToken&&(i.data.subscriberToken=s.subscriberToken),i.data}catch(t){throw Je.error("Error while getting subscriber connection path. ",t),t}}},es=(t,i,e)=>{let s="object"==typeof t?t:{};return 0===w.keys(s).length&&(s={token:t,streamName:i,streamType:e}),s},ss=(t,i,e)=>{let s="object"==typeof t?t:{};return 0===w.keys(s).length&&(s={streamName:t,streamAccountId:i,subscriberToken:e}),s},ns=t=>{if(is.getLiveDomain()){const i=/\/\/(.*?)\//,e=t.data.urls.map(t=>{const e=i.exec(t);return t.replace(e[1],is.getLiveDomain())});t.data.urls=e}if(t.data.drmObject){const i=t.data.drmObject.playReadyUrl;i&&(t.data.drmObject.playReadyUrl="".concat(is.getEndpoint()).concat(i));const e=t.data.drmObject.widevineUrl;e&&(t.data.drmObject.widevineUrl="".concat(is.getEndpoint()).concat(e));const s=t.data.drmObject.fairPlayUrl;s&&(t.data.drmObject.fairPlayUrl="".concat(is.getEndpoint()).concat(s));const n=t.data.drmObject.fairPlayCertUrl;n&&(t.data.drmObject.fairPlayCertUrl="".concat(is.getEndpoint()).concat(n))}return t};function rs(t){this.message=t}rs.prototype=new m,rs.prototype.name="InvalidCharacterError";var hs=typeof s<"u"&&s.atob&&s.atob.bind(s)||function(t){var i=String(t).replace(/=+$/,"");if(i.length%4==1)throw new rs("'atob' failed: The string to be decoded is not correctly encoded.");for(var e,s,n=0,r=0,h="";s=i.charAt(r++);~s&&(e=n%4?64*e+s:s,n++%4)?h+=String.fromCharCode(255&e>>(-2*n&6)):0)s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(s);return h};function os(t){this.message=t}function as(t,i){if("string"!=typeof t)throw new os("Invalid token specified");var e=!0===(i=i||{}).header?0:1;try{return JSON.parse(function(t){var i=t.replace(/-/g,"+").replace(/_/g,"/");switch(i.length%4){case 0:break;case 2:i+="==";break;case 3:i+="=";break;default:throw"Illegal base64url string!"}try{return decodeURIComponent(hs(i).replace(/(.)/g,function(t,i){var e=i.charCodeAt(0).toString(16).toUpperCase();return e.length<2&&(e="0"+e),"%"+e}))}catch(t){return hs(i)}}(t.split(".")[e]))}catch(t){throw new os("Invalid token specified: "+t.message)}}os.prototype=new m,os.prototype.name="InvalidTokenError";var us,cs={exports:{}};var ds=(us||(us=1,function(t,i){!function(e){if(null!=i&&"number"!=typeof i.nodeType)t.exports=e();else{var s=e(),n=typeof self<"u"?self:$.global;"function"!=typeof n.btoa&&(n.btoa=s.btoa),"function"!=typeof n.atob&&(n.atob=s.atob)}}(function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function i(t){this.message=t}return i.prototype=new m,i.prototype.name="InvalidCharacterError",{btoa:function(e){for(var s,n,r,h,o=String(e),a=0,u="";a<o.length;){if(s=o.charCodeAt(a++),n=o.charCodeAt(a++),r=o.charCodeAt(a++),s>255||n>255||r>255)throw new i("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");u+=t.charAt((h=s<<16|n<<8|r)>>18&63)+t.charAt(h>>12&63)+t.charAt(h>>6&63)+t.charAt(63&h)}switch(o.length%3){case 0:return u;case 1:return u.slice(0,-2)+"==";case 2:return u.slice(0,-1)+"="}},atob:function(e){var s=String(e).replace(/[=]+$/,"");if(s.length%4==1)throw new i("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,r,h=0,o=0,a="";r=s.charAt(o++);~r&&(n=h%4?64*n+r:r,h++%4)?a+=String.fromCharCode(255&n>>(-2*h&6)):0)r=t.indexOf(r);return a}}})}(cs,cs.exports)),cs.exports);function ls(t){var i,e,s;return{lang:null!=(i=null==t?void 0:t.lang)?i:void 0,message:null==t?void 0:t.message,abortEarly:null!=(e=null==t?void 0:t.abortEarly)?e:void 0,abortPipeEarly:null!=(s=null==t?void 0:t.abortPipeEarly)?s:void 0}}function fs(t){var i,e,s;const n=typeof t;return"string"===n?'"'.concat(t,'"'):"number"===n||"bigint"===n||"boolean"===n?"".concat(t):"object"===n||"function"===n?null!=(s=t&&(null==(e=null==(i=w.getPrototypeOf(t))?void 0:i.constructor)?void 0:e.name))?s:"null":n}function vs(t,i,e,s,n){var r,h,o,a,u,c,d,l;const f=n&&"input"in n?n.input:e.value,v=null!=(h=null!=(r=null==n?void 0:n.expected)?r:t.expects)?h:null,_=null!=(o=null==n?void 0:n.received)?o:fs(f),g={kind:t.kind,type:t.type,input:f,expected:v,received:_,message:"Invalid ".concat(i,": ").concat(v?"Expected ".concat(v," but r"):"R","eceived ").concat(_),requirement:t.requirement,path:null==n?void 0:n.path,issues:null==n?void 0:n.issues,lang:s.lang,abortEarly:s.abortEarly,abortPipeEarly:s.abortPipeEarly},p="schema"===t.kind,m=null!=(l=null!=(d=null!=(c=null!=(u=null!=(a=null==n?void 0:n.message)?a:t.message)?u:function(t,i){var e;return null==(e=void 0)?void 0:e.get(i)}(t.reference,g.lang))?c:p?void g.lang:null)?d:s.message)?l:void g.lang;void 0!==m&&(g.message="function"==typeof m?m(g):m),p&&(e.typed=!1),e.issues?e.issues.push(g):e.issues=[g]}function _s(t){return{version:1,vendor:"valibot",validate:i=>t["~run"]({value:i},ls())}}function gs(t,i){return w.hasOwn(t,i)&&"__proto__"!==i&&"prototype"!==i&&"constructor"!==i}function ps(t,i){var e;const s=[...new Set(t)];return s.length>1?"(".concat(s.join(" ".concat(i," ")),")"):null!=(e=s[0])?e:"never"}var ms=class extends m{constructor(t){super(t[0].message),this.name="ValiError",this.issues=t}};function ws(t,i,e){return"function"==typeof t.fallback?t.fallback(i,e):t.fallback}function ys(t,i,e){return"function"==typeof t.default?t.default(i,e):t.default}function bs(t,i){return{kind:"schema",type:"array",reference:bs,expects:"Array",async:!1,item:t,message:i,get"~standard"(){return _s(this)},"~run"(t,i){var e;const s=t.value;if(Array.isArray(s)){t.typed=!0,t.value=[];for(let n=0;n<s.length;n++){const r=s[n],h=this.item["~run"]({value:r},i);if(h.issues){const o={type:"array",origin:"value",input:s,key:n,value:r};for(const i of h.issues)i.path?i.path.unshift(o):i.path=[o],null==(e=t.issues)||e.push(i);if(t.issues||(t.issues=h.issues),i.abortEarly){t.typed=!1;break}}h.typed||(t.typed=!1),t.value.push(h.value)}}else vs(this,"type",t,i);return t}}}function As(t){return{kind:"schema",type:"boolean",reference:As,expects:"boolean",async:!1,message:t,get"~standard"(){return _s(this)},"~run"(t,i){return"boolean"==typeof t.value?t.typed=!0:vs(this,"type",t,i),t}}}function Ss(t,i){return{kind:"schema",type:"loose_object",reference:Ss,expects:"Object",async:!1,entries:t,message:i,get"~standard"(){return _s(this)},"~run"(t,i){var e;const s=t.value;if(s&&"object"==typeof s){t.typed=!0,t.value={};for(const n in this.entries){const r=this.entries[n];if(n in s||("exact_optional"===r.type||"optional"===r.type||"nullish"===r.type)&&void 0!==r.default){const h=n in s?s[n]:ys(r),o=r["~run"]({value:h},i);if(o.issues){const r={type:"object",origin:"value",input:s,key:n,value:h};for(const i of o.issues)i.path?i.path.unshift(r):i.path=[r],null==(e=t.issues)||e.push(i);if(t.issues||(t.issues=o.issues),i.abortEarly){t.typed=!1;break}}o.typed||(t.typed=!1),t.value[n]=o.value}else if(void 0!==r.fallback)t.value[n]=ws(r);else if("exact_optional"!==r.type&&"optional"!==r.type&&"nullish"!==r.type&&(vs(this,"key",t,i,{input:void 0,expected:'"'.concat(n,'"'),path:[{type:"object",origin:"key",input:s,key:n,value:s[n]}]}),i.abortEarly))break}if(!t.issues||!i.abortEarly)for(const i in s)gs(s,i)&&!(i in this.entries)&&(t.value[i]=s[i])}else vs(this,"type",t,i);return t}}}function Ts(t,i){return{kind:"schema",type:"nullish",reference:Ts,expects:"(".concat(t.expects," | null | undefined)"),async:!1,wrapped:t,default:i,get"~standard"(){return _s(this)},"~run"(t,i){return null!==t.value&&void 0!==t.value||(void 0!==this.default&&(t.value=ys(this,t,i)),null!==t.value&&void 0!==t.value)?this.wrapped["~run"](t,i):(t.typed=!0,t)}}}function ks(t){return{kind:"schema",type:"number",reference:ks,expects:"number",async:!1,message:t,get"~standard"(){return _s(this)},"~run"(t,i){return"number"!=typeof t.value||S(t.value)?vs(this,"type",t,i):t.typed=!0,t}}}function Es(t,i){return{kind:"schema",type:"picklist",reference:Es,expects:ps(t.map(fs),"|"),async:!1,options:t,message:i,get"~standard"(){return _s(this)},"~run"(t,i){return this.options.includes(t.value)?t.typed=!0:vs(this,"type",t,i),t}}}function xs(t){return{kind:"schema",type:"string",reference:xs,expects:"string",async:!1,message:t,get"~standard"(){return _s(this)},"~run"(t,i){return"string"==typeof t.value?t.typed=!0:vs(this,"type",t,i),t}}}function Ps(t){let i;if(t)for(const e of t)i?i.push(...e.issues):i=e.issues;return i}function Is(t,i){return{kind:"schema",type:"union",reference:Is,expects:ps(t.map(t=>t.expects),"|"),async:!1,options:t,message:i,get"~standard"(){return _s(this)},"~run"(t,i){let e,s,n;for(const r of this.options){const h=r["~run"]({value:t.value},i);if(h.typed){if(!h.issues){e=h;break}s?s.push(h):s=[h]}else n?n.push(h):n=[h]}if(e)return e;if(s){if(1===s.length)return s[0];vs(this,"type",t,i,{issues:Ps(s)}),t.typed=!0}else{if(1===(null==n?void 0:n.length))return n[0];vs(this,"type",t,i,{issues:Ps(n)})}return t}}}function Cs(){return{kind:"schema",type:"unknown",reference:Cs,expects:"unknown",async:!1,get"~standard"(){return _s(this)},"~run":t=>(t.typed=!0,t)}}let Rs;class Ds extends lt{getRTCPeerConnection(){return this.webRTCPeer?this.webRTCPeer.getRTCPeer():null}stop(){var t;Rs.info("Stopping"),this.webRTCPeer.closeRTCPeer(),null==(t=this.signaling)||t.close(),this.signaling=null,this.stopReconnection=!0,this.webRTCPeer=new xe}isActive(){const t=this.webRTCPeer.getRTCPeerStatus();return Rs.info("Broadcast status: ",t||"not_established"),"connected"===t}setReconnect(){this.signaling.on("migrate",()=>this.replaceConnection()),this.autoReconnect&&(this.signaling.on(ze,()=>{(this.firstReconnection||!this.alreadyDisconnected)&&(this.firstReconnection=!1,this.reconnect({error:new m("Signaling error: wsConnectionError")}))}),this.webRTCPeer.on(ke.connectionStateChange,t=>{Q(t),"connected"===t&&X(new Date),("failed"===t||"disconnected"===t&&this.alreadyDisconnected)&&this.firstReconnection?(this.firstReconnection=!1,this.reconnect({error:new m("Connection state change: RTCPeerConnectionState disconnected")})):"disconnected"===t?(this.alreadyDisconnected=!0,u(()=>this.reconnect({error:new m("Connection state change: RTCPeerConnectionState disconnected")}),1500)):this.alreadyDisconnected=!1}))}async reconnect(t){try{Rs.info("Attempting to reconnect..."),!this.isActive()&&!this.stopReconnection&&!this.isReconnecting&&(this.stop(),this.emit("reconnect",{timeout:Ns(this.reconnectionInterval),error:null!=t&&t.error?null==t?void 0:t.error:new m("Attempting to reconnect")}),this.isReconnecting=!0,await this.connect(this.options),this.alreadyDisconnected=!1,this.reconnectionInterval=1e3,this.firstReconnection=!0,this.isReconnecting=!1)}catch(t){this.isReconnecting=!1,this.reconnectionInterval=Ns(this.reconnectionInterval),Rs.error("Reconnection failed, retrying in ".concat(this.reconnectionInterval,"ms. "),t),u(()=>this.reconnect({error:t}),this.reconnectionInterval)}}constructor(t,i,e,s){if(super(),Rs=e,!i)throw Rs.error("Token generator is required to construct this module."),new m("Token generator is required to construct this module.");this.webRTCPeer=new xe,this.signaling=null,this.autoReconnect=s,this.reconnectionInterval=1e3,this.alreadyDisconnected=!1,this.firstReconnection=!0,this.stopReconnection=!1,this.isReconnecting=!1,this.tokenGenerator=i,this.options=null}}const Ns=t=>t<32e3?2*t:t,Bs=s.RTCRtpSender&&!!RTCRtpSender.prototype.createEncodedStreams&&s.RTCRtpReceiver&&!!RTCRtpReceiver.prototype.createEncodedStreams,Ms="RTCRtpScriptTransform"in s,Ls='(function(){"use strict";function z(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var U={exports:{}};/*!\n * js-logger - http://github.com/jonnyreeves/js-logger\n * Jonny Reeves, http://jonnyreeves.co.uk/\n * js-logger may be freely distributed under the MIT license.\n */var q=U.exports,D;function V(){return D||(D=1,function(t){(function(n){var e={};e.VERSION="1.6.1";var i,r={},o=function(s,u){return function(){return u.apply(s,arguments)}},a=function(){var s=arguments,u=s[0],h,c;for(c=1;c<s.length;c++)for(h in s[c])!(h in u)&&s[c].hasOwnProperty(h)&&(u[h]=s[c][h]);return u},d=function(s,u){return{value:s,name:u}};e.TRACE=d(1,"TRACE"),e.DEBUG=d(2,"DEBUG"),e.INFO=d(3,"INFO"),e.TIME=d(4,"TIME"),e.WARN=d(5,"WARN"),e.ERROR=d(8,"ERROR"),e.OFF=d(99,"OFF");var l=function(s){this.context=s,this.setLevel(s.filterLevel),this.log=this.info};l.prototype={setLevel:function(s){s&&"value"in s&&(this.context.filterLevel=s)},getLevel:function(){return this.context.filterLevel},enabledFor:function(s){var u=this.context.filterLevel;return s.value>=u.value},trace:function(){this.invoke(e.TRACE,arguments)},debug:function(){this.invoke(e.DEBUG,arguments)},info:function(){this.invoke(e.INFO,arguments)},warn:function(){this.invoke(e.WARN,arguments)},error:function(){this.invoke(e.ERROR,arguments)},time:function(s){typeof s=="string"&&s.length>0&&this.invoke(e.TIME,[s,"start"])},timeEnd:function(s){typeof s=="string"&&s.length>0&&this.invoke(e.TIME,[s,"end"])},invoke:function(s,u){i&&this.enabledFor(s)&&i(u,a({level:s},this.context))}};var f=new l({filterLevel:e.OFF});(function(){var s=e;s.enabledFor=o(f,f.enabledFor),s.trace=o(f,f.trace),s.debug=o(f,f.debug),s.time=o(f,f.time),s.timeEnd=o(f,f.timeEnd),s.info=o(f,f.info),s.warn=o(f,f.warn),s.error=o(f,f.error),s.log=s.info})(),e.setHandler=function(s){i=s},e.setLevel=function(s){f.setLevel(s);for(var u in r)r.hasOwnProperty(u)&&r[u].setLevel(s)},e.getLevel=function(){return f.getLevel()},e.get=function(s){return r[s]||(r[s]=new l(a({name:s},f.context)))},e.createDefaultHandler=function(s){s=s||{},s.formatter=s.formatter||function(p,_){_.name&&p.unshift("["+_.name+"]")};var u={},h=function(c,p){Function.prototype.apply.call(c,console,p)};return typeof console>"u"?function(){}:function(c,p){c=Array.prototype.slice.call(c);var _=console.log,g;p.level===e.TIME?(g=(p.name?"["+p.name+"] ":"")+c[0],c[1]==="start"?console.time?console.time(g):u[g]=new Date().getTime():console.timeEnd?console.timeEnd(g):h(_,[g+": "+(new Date().getTime()-u[g])+"ms"])):(p.level===e.WARN&&console.warn?_=console.warn:p.level===e.ERROR&&console.error?_=console.error:p.level===e.INFO&&console.info?_=console.info:p.level===e.DEBUG&&console.debug?_=console.debug:p.level===e.TRACE&&console.trace&&(_=console.trace),s.formatter(c,p),h(_,c))}},e.useDefaults=function(s){e.setLevel(s&&s.defaultLevel||e.DEBUG),e.setHandler(e.createDefaultHandler(s))},e.setDefaults=e.useDefaults,t.exports?t.exports=e:(e._prevLogger=n.Logger,e.noConflict=function(){return n.Logger=e._prevLogger,e},n.Logger=e)})(q)}(U)),U.exports}var j=V(),R=z(j);class w{constructor(n){this.data=n,this.bitOffset=0}readBits(n){if(this.bitOffset+n>this.data.length*8)throw new Error("Attempted to read past the end of the bitstream");let e=0;for(let i=0;i<n;i++){const r=Math.floor(this.bitOffset/8),o=7-this.bitOffset%8,a=this.data[r]>>o&1;e|=a<<n-1-i,this.bitOffset++}return e}skip(n){this.bitOffset+=n}readExpGolombUnsigned(){let n=-1;for(let e=0;e===0;n++)e=this.readBits(1);return(1<<n)-1+this.readBits(n)}readExpGolombSigned(){const n=this.readExpGolombUnsigned();return n%2===0?-(n/2):(n+1)/2}}const m={SLICE_NON_IDR:1,SLICE_PARTITION_A:2,SLICE_IDR:5,SEI_H264:6,SEI_H265_PREFIX:39,SEI_H265_SUFFIX:40,SPS_H264:7,SPS_H265:33,PPS_H264:8,PPS_H265:34},G={PIC_TIMING:1,USER_DATA_UNREGISTERED:5},E={LEGACY:1,NEW:2,TIMECODE:3,OTHER:4},Y="6e9cfd2a-5907-49ff-b363-8978a6e8340e",X="9a21f3be-31f0-4b78-b0be-c7f7dbb97250",P="d40e38ea-d419-4c62-94ed-20ac37b4e4fa";class ${constructor(n="H264"){this.sps=new Map,this.pps=new Map,this.activeSPS=null,this.codec=n}collectPPS(n){this.codec==="H264"?this.collectH264PPS(n):this.collectH265PPS(n)}collectSPS(n){this.codec==="H264"?this.collectH264SPS(n):this.collectH265SPS(n)}collectH264SPS(n){const e=new w(n),i=e.readBits(8),r=[100,110,122,244,44,83,86,118,128,138,139,134,135];e.skip(8),e.skip(8);const o=e.readExpGolombUnsigned();if(o>31||o<0)throw new Error("Invalid seq_parameter_set_id");if(r.includes(i)){const l=e.readExpGolombUnsigned();if(l===3&&e.skip(1),e.readExpGolombUnsigned(),e.readExpGolombUnsigned(),e.skip(1),e.readBits(1)){const s=l!==3?8:12;for(let u=0;u<s;u++)if(e.readBits(1)){const h=u<6?16:64;let c=8,p=8;for(let _=0;_<h;_++){if(p!==0){const g=e.readExpGolombSigned();p=(c+g+256)%256}c=p===0?c:p}}}}e.readExpGolombUnsigned();const a=e.readExpGolombUnsigned();if(a===0)e.readExpGolombUnsigned();else if(a===1){e.skip(1),e.readExpGolombSigned(),e.readExpGolombSigned();const l=e.readExpGolombUnsigned();for(let f=0;f<l;f++)e.readExpGolombSigned()}e.readExpGolombUnsigned(),e.skip(1),e.readExpGolombUnsigned(),e.readExpGolombUnsigned(),e.readBits(1)===0&&e.skip(1),e.skip(1),e.readBits(1)&&(e.readExpGolombUnsigned(),e.readExpGolombUnsigned(),e.readExpGolombUnsigned(),e.readExpGolombUnsigned());let d;if(e.readBits(1)){let f=function(c){const p=c.readExpGolombUnsigned();c.skip(4),c.skip(4);for(let x=0;x<=p;x++)c.readExpGolombUnsigned(),c.readExpGolombUnsigned(),c.skip(1);c.skip(5);const _=c.readBits(5),g=c.readBits(5),B=c.readBits(5);return{cpb_removal_delay_length_minus1:_,dpb_output_delay_length_minus1:g,time_offset_length:B}};e.readBits(1)&&e.readBits(8)===255&&(e.skip(16),e.skip(16)),e.readBits(1)&&e.skip(1),e.readBits(1)&&(e.skip(3),e.skip(1),e.readBits(1)&&e.skip(24)),e.readBits(1)&&(e.readExpGolombUnsigned(),e.readExpGolombUnsigned());const l=e.readBits(1)?{num_units_in_tick:e.readBits(32),time_scale:e.readBits(32),fixed_frame_rate_flag:e.readBits(1)}:void 0,s=e.readBits(1)?f(e):void 0,u=e.readBits(1)?f(e):void 0;(s||u)&&e.skip(1);const h=e.readBits(1);d={timing_info:l,nal_hrd_parameters:s,vcl_hrd_parameters:u,pic_struct_present_flag:h}}this.sps.set(o,{vui_parameters:d})}collectH265SPS(n){}collectH264PPS(n){const e=new w(n),i=e.readExpGolombUnsigned();if(i>255||i<0)throw new Error("Invalid pic_parameter_set_id");const r=e.readExpGolombUnsigned();this.pps.set(i,{seq_parameter_set_id:r})}collectH265PPS(n){}findActiveSPS(n){const e=new w(n);e.readExpGolombUnsigned(),e.readExpGolombUnsigned();const i=e.readExpGolombUnsigned(),r=this.pps.get(i);if(r){const o=this.sps.get(r.seq_parameter_set_id);if(o){this.activeSPS=o;return}}throw new Error("Cannot find the active SPS")}}const S=new $;function O(t,n){for(;n<t.byteLength-4;){if(t[n]===0&&t[n+1]===0&&(t[n+2]===1||t[n+2]===0&&t[n+3]===1))return n;n+=1}return-1}function T(t){const n=new Uint8Array(t.byteLength);let e=0,i=0;for(let r=2;r<t.byteLength;r++)t[r]===3&&t[r-1]===0&&t[r-2]===0&&(n.set(t.subarray(i,r),e),e+=r-i,i=r+1);return i<t.byteLength&&n.set(t.subarray(i),e),n}function J(t,n){let e=0;const i=n==="H264"?1:2,r=[];for(;e<t.byteLength-4;){const o=O(t,e);if(o>=e){const a=t[o+2]===1?3:4,d=O(t,o+a+i);if(d>o)r.push(t.subarray(o,d)),e=d;else{r.push(t.subarray(o));break}}else break}return r}function K(t,n){let e=!0;return J(t,n).filter(i=>{const r=i[2]===1?3:4,o=n==="H264"?1:2,a=i[r],d=n==="H264"?a&31:a>>1&63;if(e)switch(d){case m.PPS_H264:case m.PPS_H265:S.collectPPS(T(i.subarray(r+o)));break;case m.SPS_H264:case m.SPS_H265:S.collectSPS(T(i.subarray(r+o)));break;case m.SLICE_IDR:case m.SLICE_NON_IDR:case m.SLICE_PARTITION_A:try{S.findActiveSPS(T(i.subarray(r+o))),e=!1}catch(l){console.info("Failed to find active SPS. Will not be able to extract PIC timing metadata")}break}return[m.SEI_H264,m.SEI_H265_PREFIX,m.SEI_H265_SUFFIX].includes(d)})}function Z(t){let n=0,e=0;for(;t[e]===255;)n+=255,e++;n+=t[e],e++;let i=0;for(;t[e]===255;)i+=255,e++;return i+=t[e],e++,{type:n,content:t.subarray(e,e+i)}}function Q(t){const n=new Uint8Array(L(X)),e=new Uint8Array(L(Y)),i=new Uint8Array(L(P));return n.every((r,o)=>r===t[o])?E.TIMECODE:e.every((r,o)=>r===t[o])?E.LEGACY:i.every((r,o)=>r===t[o])?E.NEW:E.OTHER}function ee(t,n){let e=0;t.uuid=n.subarray(e,e+16),e+=16;const i=Q(t.uuid),r=n.subarray(e);switch(i){case E.LEGACY:case E.OTHER:t.unregistered=r;break;case E.TIMECODE:t.timecode=C(r);break;case E.NEW:{let o=0;const a=H(Date.now()).length,d=r.subarray(o,a);o+=a;const l=r.subarray(o);t.timecode=C(d),t.unregistered=l;break}}}function C(t){const n=t.reduce((o,a)=>(o<<BigInt(8))+BigInt(a),BigInt(0)),e=Number(n),i=new Date(e);return new TextEncoder().encode(i.toISOString())}function te(t,n){var f,s,u,h,c;if(!S.activeSPS){console.warn("Cannot find the active SPS");return}const e=(f=S.activeSPS.vui_parameters.nal_hrd_parameters)!=null?f:S.activeSPS.vui_parameters.vcl_hrd_parameters,i={cpb_dpb_delays_present_flag:e?1:0,cpb_removal_delay_length_minus1:(s=e==null?void 0:e.cpb_removal_delay_length_minus1)!=null?s:23,dpb_output_delay_length_minus1:(u=e==null?void 0:e.dpb_output_delay_length_minus1)!=null?u:23,time_offset_length:e?(h=e.time_offset_length)!=null?h:24:void 0,pic_struct_present_flag:(c=S.activeSPS.vui_parameters.pic_struct_present_flag)!=null?c:0};if(!i.pic_struct_present_flag){console.warn("pic_struct_present_flag is not present");return}const r=new w(n);i.cpb_dpb_delays_present_flag&&(r.skip(i.cpb_removal_delay_length_minus1+1),r.skip(i.dpb_output_delay_length_minus1+1));const o=[1,1,1,2,2,3,3,2,3],a=r.readBits(4);if(a>=o.length)throw new Error("Invalid pic_struct");const d=o[a],l=[];for(let p=0;p<d;p++)if(r.readBits(1)){const g={};r.skip(2),r.skip(1),r.skip(5);const B=r.readBits(1);if(r.skip(2),g.n_frames=r.readBits(8),B?(g.seconds_value=r.readBits(6),g.minutes_value=r.readBits(6),g.hours_value=r.readBits(5)):r.readBits(1)&&(g.seconds_value=r.readBits(6),r.readBits(1)&&(g.minutes_value=r.readBits(6),r.readBits(1)&&(g.hours_value=r.readBits(5)))),i.time_offset_length)try{g.time_offset=r.readBits(i.time_offset_length)}catch(x){console.error("Failed to read time_offset",x),g.time_offset=0}else g.time_offset=0;l.push(g)}t.seiPicTimingTimeCodeArray=l}function ne(t,n){if(n!=="H264"&&n!=="H265")throw new Error("Unsupported codec ".concat(n));const e={};return S.codec=n,K(new Uint8Array(t.data),n).forEach(i=>{const r=i[2]===1?3:4,o=n==="H264"?1:2,a=T(i.subarray(r+o)),d=Z(a);switch(d.type){case G.PIC_TIMING:te(e,d.content);break;case G.USER_DATA_UNREGISTERED:ee(e,d.content);break}}),e}function re(t){return/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/.test(t)}function L(t){return t.replace(/-/g,"").match(/.{1,2}/g).map(n=>parseInt(n,16))}function ie(t,n,e){const i=new Uint8Array(L(t)),r=H(e),o=new TextEncoder().encode(JSON.stringify(n)),a=new Uint8Array(i.length+r.length+o.length);return a.set(i),a.set(r,i.length),a.set(o,r.length+i.length),a}function se(t){const n=[],e=Math.floor(t.byteLength/255),i=t.byteLength%255;for(let r=0;r<e;r++)n.push(255);return n.push(i),new Uint8Array([5,...n])}function oe(t){const n=[];for(let e=0;e<t.byteLength;e++)e+2<t.byteLength&&[0,1,2,3].includes(t[e+2])&&t[e]===0&&t[e+1]===0?(n.push(t[e]),n.push(t[e+1]),e+=2,n.push(3)):n.push(t[e]);return n.push(128),new Uint8Array(n)}function H(t){const n=[];if(!isNaN(t)){const e=BigInt(t);for(let i=0;i<Math.ceil(Math.floor(Math.log2(new Number(t))+1)/8);i++)n.unshift(new Number(e>>BigInt(8*i)&BigInt(255)))}return new Uint8Array(n)}function ae({uuid:t,payload:n,timecode:e}){const i=[0,0,0,1],r=[102],o=ie(t,n,e),a=se(o),d=oe(o),l=new Uint8Array(i.length+r.length+a.length+d.length);return l.set(i),l.set(r,i.length),l.set(a,i.length+r.length),l.set(d,i.length+r.length+a.length),l}function ce({uuid:t,payload:n,timecode:e},i){if(t===""||n==="")throw new Error("uuid and payload cannot be empty");re(t)||(console.warn("Invalid UUID. Using default UUID."),t=P,e=Date.now());const r=ae({uuid:t,payload:n,timecode:e}),o=new DataView(i.data),a=new ArrayBuffer(i.data.byteLength+r.byteLength),d=new DataView(a);for(let l=0;l<i.data.byteLength;l++)d.setUint8(l,o.getUint8(l));for(let l=0;l<r.byteLength;l++)d.setUint8(i.data.byteLength+l,r[l]);i.data=a}R.get("TransformWorker").setLevel(R.DEBUG);const le=2e3,b=[];let y="",k={};const v={};let I=[];function M(t){return new TransformStream({start(){},flush(){},async transform(n,e){var i,r;if(N(n)){const o=((i=k[n.getMetadata().payloadType])==null?void 0:i.toUpperCase())||(y==null?void 0:y.toUpperCase());if(o==="H264"){const a=ne(n,o);(a.timecode||a.unregistered||((r=a.seiPicTimingTimeCodeArray)==null?void 0:r.length)>0)&&self.postMessage({event:"metadata",mid:t,metadata:a})}self.postMessage({event:"complete",frame:{type:n.type,timestamp:n.timestamp,data:n.data}})}e.enqueue(n)}})}function N(t){if(typeof RTCEncodedVideoFrame<"u")try{if(t instanceof RTCEncodedVideoFrame)return!0}catch(n){}return!!(t.constructor&&t.constructor.name==="RTCEncodedVideoFrame"||typeof t.width=="number"&&typeof t.height=="number"||t.type==="video")}function F(){Object.keys(v).sort().join()===I.sort().join()&&(b.shift(),I=[])}function de(t){const n=new Date().getTime();v[t]=n,Object.keys(v).filter(i=>n-v[i]>le).forEach(i=>{delete v[i],delete I[i]}),F()}function W(){return new TransformStream({start(){},flush(){},async transform(t,n){if(N(t)){const i=t.getMetadata().synchronizationSource;if(de(i),!I.includes(i)&&b.length)try{if(!/(h26[4])/.test(y))throw new Error("Sending metadata is not supported with any other codec other than H.264");b[0].uuid===P&&(b[0].timecode=Date.now()),ce(b[0],t),I.push(i)}catch(r){console.error(r)}finally{F()}}n.enqueue(t)}})}function A({readable:t,writable:n},e){t.pipeThrough(e).pipeTo(n)}addEventListener("rtctransform",t=>{let n;if(t.transformer.options.name==="senderTransform")y=t.transformer.options.codec,n=W();else if(t.transformer.options.name==="receiverTransform")k=t.transformer.options.payloadTypeCodec||{},y=t.transformer.options.codec||"",n=M(t.transformer.options.mid);else return;A(t.transformer,n)}),addEventListener("message",t=>{const{action:n}=t.data;switch(n){case"insertable-streams-sender":y=t.data.codec,A(t.data,W());break;case"insertable-streams-receiver":k=t.data.payloadTypeCodec||{},y=t.data.codec||"",A(t.data,M(t.data.mid));break;case"metadata-sei-user-data-unregistered":b.push({uuid:t.data.uuid,payload:t.data.payload});break}})})();\n',Os=typeof self<"u"&&self.Blob&&new Blob([Ls],{type:"text/javascript;charset=utf-8"});function Fs(t){let i;try{if(i=Os&&(self.URL||self.webkitURL).createObjectURL(Os),!i)throw"";const e=new ad(i,{name:null==t?void 0:t.name});return e.addEventListener("error",()=>{(self.URL||self.webkitURL).revokeObjectURL(i)}),e}catch(i){return new ad("data:text/javascript;charset=utf-8,"+encodeURIComponent(Ls),{name:null==t?void 0:t.name})}finally{i&&(self.URL||self.webkitURL).revokeObjectURL(i)}}const Us=at.get("Publish"),Vs={mediaStream:null,bandwidth:0,metadata:!1,disableVideo:!1,disableAudio:!1,codec:ye.H264,simulcast:!1,scalabilityMode:null,peerConfig:{autoInitStats:!0,statsIntervalMs:1e3}};let Hs;const Ws=t=>{Hs=Hs||Ss({sourceId:Ts(xs()),stereo:Ts(As()),dtx:Ts(As()),absCaptureTime:Ts(As()),dependencyDescriptor:Ts(As()),mediaStream:Ts(Is([bs(Cs()),Cs()])),bandwidth:Ts(ks()),metadata:Ts(As()),disableVideo:Ts(As()),disableAudio:Ts(As()),codec:Ts(Es(w.values(ye))),simulcast:Ts(As()),scalabilityMode:Ts(xs()),peerConfig:Ts(Ss({autoInitStats:Ts(As()),statsIntervalMs:Ts(ks())})),record:Ts(As()),events:Ts(bs(Es(["active","inactive","viewercount"]))),priority:Ts(ks())});const{success:i,issues:e}=function(t,i,e){const s=t["~run"]({value:i},ls(e));return{typed:s.typed,success:!s.issues,output:s.value,issues:s.issues}}(Hs,t);i||Us.warn(new ms(e),t)};function qs(t){if(!t)return new j;const i=t.length,e=new j(i/2);for(let s=0;s<i;s+=2)e[s/2]=x(t.substr(s,2),16);return e}function zs(t,i,e){if(w.prototype.hasOwnProperty.call(t,e)&&w.prototype.hasOwnProperty.call(i,e)){const s=t[e];t[e]=i[e],i[e]=s}else console.error('One or both objects do not have the property "'.concat(e,'"'))}function Gs(t,i,e,s){return new(e||(e=Promise))(function(n,r){function h(t){try{a(s.next(t))}catch(t){r(t)}}function o(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e(function(t){t(i)})).then(h,o)}a((s=s.apply(t,i||[])).next())})}const Xs=Qs;var js;function Qs(t,i){const e=nn();return(Qs=function(t,i){return e[t-=440]})(t,i)}!function(){const t=Qs,i=nn();for(;;)try{if(-x(t(447))/1+x(t(445))/2+x(t(449))/3*(x(t(454))/4)+x(t(453))/5+-x(t(456))/6+x(t(450))/7+-x(t(441))/8*(-x(t(455))/9)==847340)break;i.push(i.shift())}catch(t){i.push(i.shift())}}();const Ks=od&&od[Xs(448)]||"",Ys=od&&od[Xs(443)]||"",Js=!(null==s||!s.RTCRtpScriptTransform),Zs=Ks.includes("Firefox"),$s=!Zs&&Ys.includes("Apple"),tn=!Zs&&!$s&&Ks[Xs(440)](Xs(451)),en=!Zs&&!$s&&!tn&&Ks[Xs(440)](Xs(446)),sn=(null===(js=null==od?void 0:od[Xs(442)])||void 0===js?void 0:js[Xs(452)])||(null==od?void 0:od[Xs(452)])||"";function nn(){const t=["1583117AOxBcs","userAgent","153Sdjzsk","5371359GvUFPp","Edg","platform","7141470dfeDnP","10068LWEgOs","243621EPkoPw","8310150fEFCnA","includes","328VMcnkw","userAgentData","vendor","Win32","763310RGZQro","Chrome"];return(nn=function(){return t})()}const rn={supportsRtpScriptTransform:Js,isFirefox:Zs,isSafari:$s,isEdge:tn,isChrome:en,platform:sn,isWindows:"Windows"===sn||sn===Xs(444)},hn=on;function on(t,i){const e=ln();return(on=function(t,i){return e[t-=300]})(t,i)}!function(){const t=on,i=ln();for(;;)try{if(-x(t(327))/1+x(t(304))/2*(x(t(300))/3)+-x(t(332))/4*(x(t(316))/5)+-x(t(322))/6*(x(t(311))/7)+x(t(308))/8*(-x(t(307))/9)+x(t(314))/10*(x(t(302))/11)+x(t(329))/12==997665)break;i.push(i.shift())}catch(t){i.push(i.shift())}}();class an{[hn(323)](){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];const s=hn;cn[s(319)]>=4&&console[s(323)](this[s(310)],...i)}[hn(331)](){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];const s=hn;cn[s(319)]>=3&&console[s(331)](this[s(310)],...i)}[hn(320)](){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];const s=hn;cn[s(319)]>=2&&console[s(320)](this[s(310)],...i)}error(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];cn[hn(319)]>=1&&console.error(this.tag,...i)}constructor(t){this[on(310)]=t}}function un(t){return new an(t)}const cn={logLevel:3,mediaDumps:{video:{in:{durationMs:0,delimited:!0},out:{durationMs:0}},audio:{in:{durationMs:0},out:{durationMs:0}}}};function dn(){return(new Date)[hn(317)]().slice(11,-1)}function ln(){const t=["mediaBuffer","click","529321KfbOwo","endTimestampMs","28972188cmcnxe","containerFileExt","info","4ZlZeJQ","9kyfNFe","mediaType","172953TzXwsI","byteLength","1327806tybvjI","href","createObjectURL","1089qysnCz","112088WLFXHK","substring","tag","692993ZcAeLj","set","download","810qiScYX","startTimestampMs","8821555KArxhe","toISOString","application/octet-stream","logLevel","warn","revokeObjectURL","42PDuKrJ","debug","targetDurationMs"];return(ln=function(){return t})()}class fn{append(t,i){const e=hn;if(!this[e(325)])return!1;if(this[e(325)]=function(t,i){const e=hn,s=new j((0|t[e(303)])+(0|i.byteLength));return s[e(312)](t,0),s[e(312)](i,0|t.byteLength),s}(this[e(325)],t),void 0!==i)if(-1===this[e(315)])this.startTimestampMs=i,this[e(328)]=i+this[e(324)];else if(i>=this[e(328)]){const t=(new Date)[e(317)]()[e(309)](0,19).replace(/:/g,"-"),i=this.mediaType+"-"+t+"."+this.containerFileExt;return function(t,i,e){void 0===e&&(e=hn(318));const s=hn,n=h.createElement("a"),r=new Blob([t],{type:e});n.href=URL[s(306)](r),n[s(313)]=i,n[s(326)](),URL[s(321)](n[s(305)])}(this[e(325)],i),this.mediaBuffer=null,!1}return!0}constructor(t,i,e){const s=hn;this[s(325)]=null,this[s(315)]=-1,this.endTimestampMs=-1,this[s(301)]=t,this[s(330)]=i,this[s(324)]=e,e>0&&(this[s(325)]=new j)}}const vn=mn;!function(){const t=mn,i=Rn();for(;;)try{if(x(t(160))/1+-x(t(363))/2+-x(t(321))/3*(-x(t(401))/4)+x(t(229))/5+-x(t(276))/6+x(t(400))/7*(-x(t(153))/8)+-x(t(223))/9==858456)break;i.push(i.shift())}catch(t){i.push(i.shift())}}();const _n=un("[MUX]"),gn=rn[vn(387)];function pn(t,i){const e=vn;let s=new j((0|t[e(413)])+(0|i[e(413)]));return s.set(t,0),s[e(251)](i,0|t[e(413)]),s}function mn(t,i){const e=Rn();return(mn=function(t,i){return e[t-=147]})(t,i)}function wn(t,i,e){return void 0===i&&(i=0),void 0===e&&(e=1/0),((t,i,e,s)=>{const n=vn,r=s[n(425)]||1;i*=r,e*=r;const h=(u=t)instanceof ArrayBuffer?u:u[vn(366)],o=(t[n(188)]||0)+t[n(413)],a=(t[n(188)]||0)+i;var u;let c=_[n(177)](0,_[n(291)](a,o)),d=_[n(291)](c+_[n(177)](e,0),o);return c/=r,d/=r,new s(h,c,d-c)})(t,i,e,j)}function yn(t){const i=vn,e=Array.from(t)[i(238)](t=>t[i(384)](0));return new j(e)}class bn{static get[vn(449)](){return 1}static get[vn(427)](){return 5}static get SEI(){return 6}static get[vn(324)](){return 7}static get[vn(379)](){return 8}static get[vn(272)](){return 9}static get[vn(159)](){const t=vn;return{[bn[t(427)]]:t(427),[bn[t(273)]]:t(273),[bn[t(324)]]:t(324),[bn.PPS]:"PPS",[bn[t(449)]]:"NDR",[bn.AUD]:t(272)}}static[vn(234)](t){const i=vn;return t[i(186)]in bn[i(159)]?bn[i(159)][t.ntype]:i(344)}[vn(365)](){const t=vn;return bn[t(234)](this)+": NRI: "+this[t(209)]()}[vn(209)](){return this[vn(402)]}[vn(234)](){return this[vn(186)]}[vn(306)](){return this[vn(186)]===bn.IDR}[vn(203)](){return this[vn(452)]}[vn(327)](){return this[vn(452)].byteLength}[vn(194)](){return 4+this[vn(327)]()}[vn(341)](){const t=vn,i=new j(this[t(194)]());return new DataView(i[t(366)]).setUint32(0,this[t(194)]()-4),i[t(251)](this.getPayload(),4),i}constructor(t){const i=vn;this[i(452)]=t,this[i(402)]=(96&this[i(452)][0])>>5,this[i(186)]=31&this[i(452)][0],this.isvcl=1==this[i(186)]||5==this[i(186)],this[i(309)]="",this.isfmb=!1}}class An{[vn(433)](t){const i=vn;this.data=t,this[i(368)]=0,this.bitLength=8*t[i(413)]}get[vn(451)](){return this[vn(157)]-this.index}skipBits(t){const i=vn;if(this[i(451)]<t)return!1;this[i(368)]+=t}[vn(338)](t,i){void 0===i&&(i=!0);const e=vn;return this[e(259)](t,this[e(368)],i)}getBits(t,i,e){void 0===e&&(e=!0);const s=vn;if(this[s(451)]<t)return 0;const n=i%8,r=this.data[i/8|0]&255>>>n,h=8-n;if(h>=t)return e&&(this[s(368)]+=t),r>>h-t;{e&&(this[s(368)]+=h);const n=t-h;return r<<n|this[s(259)](n,i+h,e)}}[vn(444)](){const t=vn;let i;for(i=0;i<this[t(157)]-this[t(368)];++i)if(0!==this[t(259)](1,this[t(368)]+i,!1))return this[t(368)]+=i,i;return i}[vn(334)](){const t=vn;this[t(155)](1+this[t(444)]())}skipEG(){const t=vn;this[t(155)](1+this[t(444)]())}[vn(179)](){const t=vn,i=this.skipLZ();return this[t(338)](i+1)-1}[vn(248)](){const t=this[vn(179)]();return 1&t?1+t>>>1:-1*(t>>>1)}[vn(239)](){return 1===this[vn(338)](1)}[vn(419)](t){return void 0===t&&(t=1),this.readBits(8*t)}[vn(232)](){return this.readBits(16)}readUInt(){return this[vn(338)](32)}constructor(t){const i=vn;this[i(316)]=t,this[i(368)]=0,this[i(157)]=8*t.byteLength}}class Sn{static[vn(267)](t,i){const e=vn;let s=[],n=!1,r=!1,h=!1,o=!1,a=0,u=0,c=0,d=[];for(;a<=t.byteLength;){if(a<t.byteLength){const i=t[a++];0!==i?(1===i&&u>1&&(c=u>2?4:3,d.push(a)),u=0):++u}else c=0,d.push(a++);if(d.length>1){const e=d.shift(),l=d[0]-c;if(e<l){let c=!1;const d=31&t[e];if(d===bn.NDR?r=!0:d===bn.IDR?n=!0:d===bn.SPS?(c=h,h=!0):d===bn.PPS&&(c=o,o=!0),!c)if(!i||d!==bn.NDR&&d!==bn.IDR)s.push(t.subarray(e,l));else{const i=new j(l-e);let n=0;for(a=e,u=0;a<l;){let e=t[a++];u>1&&3===e&&(u=0,e=t[a++]),0!==e?u=0:++u,i[n++]=e}s.push(i.subarray(0,n))}}}}let l=!0,f=!1;return r||n?r&&n&&(_n[e(265)](e(331)),l=!1):(_n[e(265)]("[H264Parser] No VCL NALUs found"),l=!1),n&&(h&&o?f=!0:_n.warn(e(158))),{valid:l,idr:f,nalus:s}}static[vn(333)](t,i){let e,s=8,n=8;for(let r=0;r<i;r++)0!==n&&(e=t.readEG(),n=(s+e+256)%256),s=0===n?s:n}static[vn(432)](t){const i=vn;let e,s,n,r,h,o,a=new An(t),u=0,c=0,d=0,l=0,f=1;if(a.readUByte(),e=a[i(419)](),a.readBits(5),a[i(155)](3),a[i(419)](),a[i(334)](),100===e||110===e||122===e||244===e||44===e||83===e||86===e||118===e||128===e){var v=a.readUEG();if(3===v&&a[i(155)](1),a[i(334)](),a[i(334)](),a[i(155)](1),a[i(239)]()){o=3!==v?8:12;for(let t=0;t<o;++t)a[i(239)]()&&(t<6?Sn[i(333)](a,16):Sn[i(333)](a,64))}}a[i(334)]();var g=a[i(179)]();if(0===g)a.readUEG();else if(1===g){a.skipBits(1),a[i(221)](),a[i(221)](),s=a[i(179)]();for(let t=0;t<s;++t)a[i(221)]()}if(a[i(334)](),a.skipBits(1),n=a[i(179)](),r=a.readUEG(),h=a[i(338)](1),0===h&&a[i(155)](1),a[i(155)](1),a.readBoolean()&&(u=a[i(179)](),c=a[i(179)](),d=a[i(179)](),l=a[i(179)]()),a[i(239)]()){if(a.readBoolean()){let t;switch(a.readUByte()){case 1:t=[1,1];break;case 2:t=[12,11];break;case 3:t=[10,11];break;case 4:t=[16,11];break;case 5:t=[40,33];break;case 6:t=[24,11];break;case 7:t=[20,11];break;case 8:t=[32,11];break;case 9:t=[80,33];break;case 10:t=[18,11];break;case 11:t=[15,11];break;case 12:t=[64,33];break;case 13:t=[160,99];break;case 14:t=[4,3];break;case 15:t=[3,2];break;case 16:t=[2,1];break;case 255:t=[a[i(419)]()<<8|a[i(419)](),a[i(419)]()<<8|a[i(419)]()]}t&&t[0]>0&&t[1]>0&&(f=t[0]/t[1])}a.readBoolean()&&a[i(155)](1),a[i(239)]()&&(a[i(155)](4),a[i(239)]()&&a[i(155)](24)),a[i(239)]()&&(a[i(334)](),a[i(334)]()),a.readBoolean()&&(a.readUInt(),a[i(187)](),a.readBoolean())}return{width:_[i(440)]((16*(n+1)-2*u-2*c)*f),height:(2-h)*(r+1)*16-(h?2:4)*(d+l)}}static[vn(386)](t){const i=vn;let e=new An(t[i(203)]());e[i(419)](),t[i(196)]=0===e[i(179)](),t[i(309)]=e[i(179)]()}[vn(256)](t){const i=vn;var e=Sn[i(432)](new j(t));this.track[i(237)]=e.width,this[i(233)].height=e.height,this.track[i(382)]=[new j(t)],this.track[i(210)]=i(292);let s=new DataView(t.buffer,t[i(188)]+1,4);for(let t=0;t<3;++t){var n=s[i(313)](t)[i(365)](16);n[i(268)]<2&&(n="0"+n),this.track[i(210)]+=n}}[vn(345)](t){const i=vn;this[i(233)][i(434)]=[new j(t)]}[vn(378)](t){const i=vn;if(!t)return!1;let e=!1;switch(t[i(234)]()){case bn[i(427)]:case bn.NDR:e=!0;break;case bn[i(379)]:!this[i(233)][i(434)]&&(this[i(345)](t.getPayload()),!this[i(175)][i(296)]&&this[i(233)][i(434)]&&this.track[i(382)]&&(this.remuxer[i(296)]=!0)),e=!0;break;case bn[i(324)]:!this.track.sps&&(this[i(256)](t[i(203)]()),!this[i(175)][i(296)]&&this[i(233)].pps&&this[i(233)][i(382)]&&(this.remuxer[i(296)]=!0)),e=!0;break;case bn[i(272)]:break;case bn.SEI:e=!0}return e}constructor(t){const i=vn;this.remuxer=t,this[i(233)]=t.mp4track}}class Tn{on(t,i){const e=vn;return!this[e(270)][t]&&(this.listener[t]=[]),this[e(270)][t].push(i),!0}off(t,i){const e=vn;if(this[e(270)][t]){var s=this[e(270)][t].indexOf(i);return s>-1&&this[e(270)][t][e(369)](s,1),!0}return!1}[vn(219)](){this.listener={}}[vn(225)](t,i){const e=vn;return!!this[e(270)][t]&&(this[e(270)][t].map(t=>{t[e(200)](null,[i])}),!0)}constructor(t){const i=vn;this.listener={},this[i(234)]=""|t}}class kn{static box(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];const n=vn;let r,h=8,o=e.length,a=o;for(;o--;)e[o]&&(h+=e[o].byteLength);for(r=new j(h),r[0]=h>>>24,r[1]=h>>>16&255,r[2]=h>>>8&255,r[3]=255&h,r[n(251)](t,4),o=0,h=8;o<a;++o)e[o]&&(r[n(251)](e[o],h),h+=e[o][n(413)]);return r}[vn(190)](t){const i=vn;return kn[i(347)](kn[i(212)][i(190)],kn[i(418)][t])}[vn(244)](t){const i=vn;return kn[i(347)](kn[i(212)][i(244)],t)}[vn(380)](t,i){const e=vn;return kn[e(347)](kn[e(212)][e(380)],new j([0,0,0,0,0,0,0,0,0,0,0,0,t>>>24,t>>>16&255,t>>>8&255,255&t,0,0,0,0,85,196,0,0]))}[vn(215)](t){const i=vn;return kn[i(347)](kn[i(212)].mdia,this[i(380)](t[i(274)],t[i(290)]),this[i(190)](t[i(234)]),this[i(230)](t))}[vn(443)](t){const i=vn;return kn.box(kn[i(212)][i(443)],new j([0,0,0,0,t>>>24,t>>>16&255,t>>>8&255,255&t]))}[vn(230)](t){const i=vn;return t[i(234)]===i(407)?kn[i(347)](kn[i(212)][i(230)],kn.box(kn.types[i(255)],kn.SMHD),kn[i(147)],this[i(362)](t)):kn[i(347)](kn.types[i(230)],kn[i(147)],this[i(362)](t),kn[i(347)](kn[i(212)].vmhd,kn[i(438)]))}[vn(370)](t,i,e){const s=vn;return kn[s(347)](kn.types.moof,this[s(443)](t),this[s(293)](e,i))}[vn(295)](t,i,e){const s=vn;let n=t[s(268)],r=[];for(;n--;)r[n]=this.trak(t[n]);return kn.box[s(200)](null,[kn[s(212)][s(295)],this[s(240)](e,i),this[s(447)](t)][s(389)](r)[s(389)](this[s(322)](t)))}[vn(322)](t){const i=vn;let e=t[i(268)],s=[];for(;e--;)s[e]=this[i(305)](t[e]);return kn[i(347)][i(200)](null,[kn[i(212)][i(322)]][i(389)](s))}[vn(240)](t,i){const e=vn;let s=new j([0,0,0,0,0,0,0,0,0,0,0,0,t>>>24,t>>>16&255,t>>>8&255,255&t,i>>>24,i>>>16&255,i>>>8&255,255&i,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return kn[e(347)](kn.types.mvhd,s)}[vn(420)](t){const i=vn;let e=t[i(428)]||[],s=new j(4+e.length);for(let t=0;t<e[i(268)];t++){const n=e[t][i(375)];s[t+4]=n.dependsOn<<4|n[i(149)]<<2|n[i(422)]}return kn[i(347)](kn[i(212)][i(420)],s)}[vn(362)](t){const i=vn;return kn[i(347)](kn.types[i(362)],this[i(165)](t),kn.box(kn[i(212)][i(329)],kn[i(421)]),kn[i(347)](kn.types[i(227)],kn[i(377)]),kn[i(347)](kn.types[i(235)],kn[i(218)]),kn[i(347)](kn[i(212)].stco,kn[i(213)]))}[vn(303)](t){const i=vn;let e,s,n,r=[],h=[];for(e=0;e<t[i(382)].length;e++)s=t.sps[e],n=s[i(413)],r.push(n>>>8&255),r.push(255&n),r=r[i(389)](Array.prototype[i(314)][i(395)](s));for(e=0;e<t[i(434)][i(268)];e++)s=t[i(434)][e],n=s[i(413)],h[i(406)](n>>>8&255),h[i(406)](255&n),h=h.concat(Array.prototype[i(314)].call(s));const o=kn[i(347)](kn[i(212)][i(408)],new j([1,r[3],r[4],r[5],255,224|t.sps[i(268)]].concat(r)[i(389)]([t[i(434)][i(268)]]).concat(h))),a=t[i(237)],u=t[i(374)],c=kn[i(347)](kn.types[i(441)],kn.box(kn[i(212)][i(318)],new j([97,118,99,49])),kn[i(347)](kn[i(212)][i(349)],new j([0,0,0,0,...yn(this[i(285)][i(154)][i(415)][i(201)]),0,1,0,0])),kn.box(kn.types[i(217)],this[i(298)](i(415))));return kn[i(347)](kn[i(212)].encv,new j([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,a>>>8&255,255&a,u>>>8&255,255&u,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,65,86,67,32,67,111,100,105,110,103,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]),o,c)}[vn(372)](t){const i=vn;let e=t[i(154)][i(413)],s=new j(26+e+3);return s[i(251)]([0,0,0,0,3,23+e,0,1,0,4,15+e,64,21,0,0,0,0,0,0,0,0,0,0,0,5,e]),s[i(251)](t[i(154)],26),s.set([6,1,2],26+e),s}[vn(403)](t){const i=vn,e=t[i(354)];return kn[i(347)](kn[i(212)][i(403)],new j([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t[i(390)],0,16,0,0,0,0,e>>>8&255,255&e,0,0]),kn[i(347)](kn[i(212)][i(372)],this[i(372)](t)))}[vn(266)](t){const i=vn,e=t[i(354)];return new j([0,t[i(390)],1,56,0,0,e>>>8&255,255&e,0,0,0])}[vn(416)](t){const i=vn,e=t.audiosamplerate;return kn[i(347)](kn.types[i(416)],new j([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t[i(390)],0,16,0,0,0,0,e>>>8&255,255&e,0,0]),kn[i(347)](kn[i(212)][i(266)],this[i(266)](t)))}[vn(394)](t){const i=vn,e=kn[i(347)](kn.types[i(266)],this.dOps(t)),s=kn[i(347)](kn.types[i(441)],kn.box(kn.types.frma,new j([79,112,117,115])),kn[i(347)](kn.types.schm,new j([0,0,0,0,...yn(this[i(285)][i(154)].audio[i(201)]),0,1,0,0])),kn.box(kn.types[i(217)],this[i(298)](i(407)))),n=t[i(354)];return kn[i(347)](kn[i(212)].enca,new j([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t[i(390)],0,16,0,0,0,0,n>>>8&255,255&n,0,0]),e,s)}[vn(165)](t){const i=vn;return t[i(234)]===i(407)?kn[i(347)](kn[i(212)][i(165)],kn[i(168)],t[i(199)]?this[i(394)](t):this[i(416)](t)):kn[i(347)](kn.types[i(165)],kn[i(168)],this[i(303)](t))}[vn(278)](t){const i=vn,e=t.id,s=t[i(290)],n=t[i(237)],r=t[i(374)],h=t[i(388)];return kn[i(347)](kn[i(212)].tkhd,new j([0,0,0,7,0,0,0,0,0,0,0,0,e>>>24,e>>>16&255,e>>>8&255,255&e,0,0,0,0,s>>>24,s>>>16&255,s>>>8&255,255&s,0,0,0,0,0,0,0,0,0,0,0,0,255&h,h%1*10&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,n>>>8&255,255&n,0,0,r>>>8&255,255&r,0,0]))}[vn(293)](t,i){var e;const s=vn,n=t.id,r=t[s(428)][0][s(171)],h=t.samples[0][s(290)],o=t[s(428)][0].flags,a=kn[s(347)](kn[s(212)].tfhd,new j([0,2,0,58,n>>>24,n>>>16&255,n>>>8&255,255&n,0,0,0,1,h>>>24,n>>>16&255,h>>>8&255,255&h,r>>>24,r>>>16&255,r>>>8&255,255&r,0,o[s(264)],0,0])),u=kn[s(347)](kn[s(212)].tfdt,new j([0,0,0,0,i>>>24,i>>>16&255,i>>>8&255,255&i]));if(t.encrypted){let i,n;if(t[s(234)]===s(415)?(i=!0,n=this[s(350)][s(415)]+(null==(e=t.samples[0][s(191)])?void 0:e.byteLength)):(i=!1,n=this[s(350)].audio),n>0){const e=this[s(242)](n),r=this[s(340)](t[s(428)],i),h=e[s(268)]+20+r[s(268)]+a[s(268)]+u[s(268)]+8+16+8+8,o=this[s(271)](t,h);return kn[s(347)](kn[s(212)][s(293)],a,u,o,e,this.saio(h-r[s(268)]+o.length+8),r)}{const i=this[s(340)](null,!1),e=i.length+a[s(268)]+u[s(268)]+8+16+8+8,n=this[s(271)](t,e);return kn[s(347)](kn.types[s(293)],a,u,n,i)}}return kn.box(kn[s(212)].traf,a,u,this.trun(t,a[s(268)]+u.length+8+16+8+8))}trak(t){const i=vn;return t.duration=t[i(290)]||4294967295,kn.box(kn[i(212)].trak,this[i(278)](t),this[i(215)](t))}[vn(305)](t){const i=vn,e=t.id;return kn[i(347)](kn.types[i(305)],new j([0,0,0,0,e>>>24,e>>>16&255,e>>>8&255,255&e,0,0,0,1,0,0,0,16,0,0,0,0,0,0,0,0]))}trun(t,i){const e=vn;let s=(t[e(428)]||[])[e(268)],n=new j(12);return i+=20,n.set([0,0,0,1,s>>>24,s>>>16&255,s>>>8&255,255&s,i>>>24,i>>>16&255,i>>>8&255,255&i],0),kn[e(347)](kn.types[e(271)],n)}[vn(224)](t,i){const e=vn,s=e(445),n=function(t){const i=function(t){const i=vn;let e="";for(let s=0;s<t[i(268)];s+=16e3){const n=t.subarray(s,s+16e3);e+=String[i(358)].apply(null,n)}return e}(wn(t));return btoa(i)}(function(t){const i=vn,e=[];return e[i(406)](t[3]),e[i(406)](t[2]),e.push(t[1]),e.push(t[0]),e[i(406)](t[5]),e[i(406)](t[4]),e.push(t[7]),e.push(t[6]),(t=wn(t))[i(251)](e,0),t}(t));return wn(function(t){const i=vn,e=new j(2*t[i(268)]),s=new DataView(e[i(366)]);for(let e=0;e<t[i(268)];++e){const n=t.charCodeAt(e);s[i(253)](2*e,n,true)}return e[i(366)]}([e(328)+s+'" version="4.3.0.0">',e(308),"<PROTECTINFO>",e(398),e(353),e(216)+n+'"',">",e(412),e(249),e(391),i?"<LA_URL>"+i+e(423):"",e(351),e(269)].join("")))}pssh(t){const i=vn;if(this[i(285)][i(383)][i(202)](i(178)))return kn[i(347)](kn.types[i(447)],new j([0,0,0,0,237,239,139,169,121,214,74,206,163,200,39,220,213,29,33,237,0,0,0,18,18,16,...this[i(285)][i(154)][t[0][i(234)]].keyId]));if(this[i(285)][i(383)]===i(356)){const e=this[i(224)](this[i(285)][i(154)][t[0][i(234)]][i(429)],this.drm[i(371)]),s=e[i(413)];return kn[i(347)](kn[i(212)][i(447)],new j([0,0,0,0,154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149,s>>>24,s>>>16&255,s>>>8&255,255&s,...e]))}return this.drm[i(383)]===i(323)?kn[i(347)](kn[i(212)][i(447)],new j([1,0,0,0,16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75,0,0,0,1,...this.drm[i(154)][t[0].type].keyId,0,0,0,0])):this.drm[i(383)]===i(397)?null:void _n[i(189)](i(393)+this[i(285)][i(383)])}[vn(298)](t){const i=vn;let e,s,n=this[i(285)][i(154)][t];return n[i(201)]===i(226)?(e=new j([16,...n.iv]),s=25):(e=new j([]),s=0),kn[i(347)](kn[i(212)][i(298)],new j([1,0,0,0,0,s,1,this[i(350)][t],...n[i(429)],...e]))}[vn(242)](t){const i=vn;return kn[i(347)](kn[i(212)][i(242)],new j([0,0,0,0,t,0,0,0,1]))}[vn(204)](t){const i=vn;return kn[i(347)](kn[i(212)][i(204)],new j([0,0,0,0,0,0,0,1,t>>>24,t>>>16&255,t>>>8&255,255&t]))}[vn(340)](t,i){const e=vn;let s=null;return t&&(1!==t[e(268)]&&_n[e(189)](e(182)+t[e(268)]+" samples - expected 1"),s=t[0][e(191)]),s&&s[e(413)]?kn[e(347)](kn[e(212)].senc,new j([0,0,0,i?2:0,0,0,0,1,...s])):kn.box(kn[e(212)][e(340)],new j([0,0,0,0,0,0,0,1]))}[vn(439)](t,i,e){const s=vn,n=this[s(295)](t,i,e);let r=new j(kn[s(183)].byteLength+n[s(413)]);return r[s(251)](kn[s(183)]),r[s(251)](n,kn[s(183)][s(413)]),r}constructor(t){var i,e;const s=vn;this[s(285)]=t,this.saiIvSize={video:"cenc"===(null==(i=t.config[s(415)])?void 0:i[s(201)])?16:0,audio:"cenc"===(null==(e=t[s(154)][s(407)])?void 0:e[s(201)])?16:0},kn[s(212)]={avc1:[],encv:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],Opus:[],dOps:[],enca:[],mvex:[],mvhd:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[],pssh:[],sinf:[],frma:[],schm:[],schi:[],tenc:[],saiz:[],saio:[],senc:[]};for(let t in kn[s(212)])kn.types[t]=[t[s(384)](0),t[s(384)](1),t[s(384)](2),t.charCodeAt(3)];const n=new j([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),r=new j([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);kn.HDLR_TYPES={video:n,audio:r};const h=new j([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),o=new j([0,0,0,0,0,0,0,0]);kn.STTS=kn[s(377)]=kn[s(213)]=o,kn.STSZ=new j([0,0,0,0,0,0,0,0,0,0,0,0]),kn[s(438)]=new j([0,0,0,1,0,0,0,0,0,0,0,0]),kn[s(307)]=new j([0,0,0,0,0,0,0,0]),kn[s(168)]=new j([0,0,0,0,0,0,0,1]);const a=new j([105,115,111,109]),u=new j([97,118,99,49]),c=new j([0,0,0,1]);kn[s(183)]=kn[s(347)](kn[s(212)].ftyp,a,c,a,u),kn[s(147)]=kn[s(347)](kn.types.dinf,kn[s(347)](kn[s(212)][s(280)],h))}}let En=1;class xn{static[vn(411)](){return En++}[vn(246)](){const t=vn;this.mp4track[t(263)]=0,this[t(207)][t(428)]=[]}[vn(211)](){const t=vn;return!(!this[t(296)]||!this[t(428)][t(268)])}constructor(){this.seq=1}}class Pn extends xn{resetTrack(){const t=vn;this[t(437)]=1,this[t(222)]=0,this[t(336)]=0}[vn(181)](t,i,e){const s=vn;if(t[s(268)]>0)for(let n=0;n<t.length;n++){let r=t[n],h=r[s(392)],o=h[s(413)];this.samples[s(406)]({units:h,size:o,duration:r.duration,sampleAuxInfo:i,timestamp:e}),this[s(207)][s(263)]+=o}}[vn(161)](){const t=vn;if(!this.samples)return null;let i,e=this[t(207)][t(428)];for(;this[t(428)][t(268)];){let s=this.samples[t(342)](),n=(1e3*s.timestamp|0)-this[t(222)]|0;n<5&&(n=5),this[t(336)]=this[t(222)],this.nextDts+=n,i={size:s[t(171)],duration:n,cts:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1},sampleAuxInfo:s[t(191)]};let r=new j(s[t(171)]);return r[t(251)](s.units,0),e[t(406)](i),new j(r[t(366)],0,s[t(171)])}return null}constructor(t){const i=vn;super(),this[i(296)]=!0,this[i(222)]=0,this.dts=0,this.mp4track={id:xn[i(411)](),type:i(407),channelCount:2,audiosamplerate:48e3,len:0,fragmented:!0,timescale:t,duration:t,samples:[],codec:i(364),encrypted:!0},this[i(428)]=[]}}class In extends xn{[vn(297)](){const t=vn;this[t(437)]=1,this[t(296)]=!1,this[t(207)][t(382)]="",this.mp4track[t(434)]="",this.nextDts=0,this.dts=0}remux(t,i,e){const s=vn;for(let n of t){let t=[],r=0;for(let i of n[s(392)])this[s(302)].parseNAL(i)&&(t[s(406)](i),r+=i[s(194)]());t[s(268)]>0&&this.readyToDecode&&(this[s(207)][s(263)]+=r,this[s(428)].push({units:t,size:r,keyFrame:n.keyFrame,duration:n[s(290)],sampleAuxInfo:i,timestamp:e}))}}[vn(161)](){const t=vn;if(!this[t(211)]()||!this[t(428)])return null;let i,e=this.mp4track[t(428)],s=this.samples[t(342)](),n=s.units,r=(1e3*s[t(332)]|0)-this[t(222)]|0;r<5&&(r=5),r>5e3&&_n[t(381)](t(430)+(r/1e3|0)+" s"),this.dts=this[t(222)],this[t(222)]+=r,i={size:s.size,duration:r,cts:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,isNonSync:s[t(148)]?0:1,dependsOn:s[t(148)]?2:1},sampleAuxInfo:s[t(191)]};let h=0;for(const i of n)h+=i[t(194)]();let o=0,a=new j(h);for(const i of n)a[t(251)](i[t(341)](),o),o+=i[t(194)]();return e.push(i),new j(a[t(366)],0,h)}constructor(t,i){const e=vn;super(),this[e(296)]=!1,this[e(222)]=0,this[e(336)]=0,this[e(361)]=i,this[e(207)]={id:xn[e(411)](),type:e(415),len:0,fragmented:!0,sps:"",pps:"",width:0,height:0,timescale:t,duration:t,samples:[],encrypted:!0},this[e(428)]=[],this[e(302)]=new Sn(this)}}class Cn extends Tn{[vn(281)](t){const i=vn;("video"===t||"both"===t)&&(this[i(357)][i(415)]=new In(this.timescale,this[i(361)]),this[i(335)][i(406)](i(415))),(t===i(407)||t===i(417))&&(this[i(357)][i(407)]=new Pn(this.timescale),this.trackTypes[i(406)](i(407)))}[vn(250)](){const t=vn;for(let i of this[t(335)])this.tracks[i].resetTrack();this[t(260)]=!1}[vn(262)](){const t=vn;this.tracks={},this[t(219)]()}[vn(246)](){const t=vn;if(this[t(260)])for(let i of this[t(335)]){let e=this[t(357)][i];for(;;){let s=e[t(161)]();if(!s||!s.byteLength)break;let n={type:i,payload:pn(this[t(164)][t(370)](e[t(437)]++,e[t(336)],e[t(207)]),this.mp4[t(244)](s)),dts:e[t(336)]};this[t(225)](t(366),n),e[t(246)]()}}else this[t(211)]()&&(this[t(225)]("ready"),this.initSegment(),this[t(260)]=!0,this[t(246)]())}[vn(439)](){const t=vn;for(let i of this[t(335)]){let e=this[t(357)][i],s={type:i,payload:this[t(164)][t(439)]([e[t(207)]],this[t(163)],this.timescale)};this[t(225)]("buffer",s)}}isReady(){const t=vn;for(let i of this[t(335)])if(!this.tracks[i][t(296)]||!this[t(357)][i][t(428)][t(268)])return!1;return!0}[vn(181)](t){const i=vn;for(let e of this[i(335)]){let s=t[e];s.length>0&&this[i(357)][e][i(181)](s,"audio"===e?t.audioSampleAuxInfo:t[i(310)],t[i(332)])}this[i(246)]()}constructor(t,i){const e=vn;super(e(175)),this[e(260)]=!1,this.trackTypes=[],this[e(357)]={},this[e(274)]=1e3,this[e(163)]=0,this[e(361)]=t,this.mp4=i}}function Rn(){const t=["stsd","isSupported","src","STSD","endMSE","abort","size","appendBufferError","addSourceBuffer","setupMSE","remuxer","addEventListener","max","com.widevine","readUEG"," - ","remux","Received ","FTYP","readyState","valid","ntype","readUInt","byteOffset","error","hdlr","sampleAuxInfo","webkitsourceopen","Checking codec","getSize","irrecoverableError","isfmb","[MSE] buffer error:","url","encrypted","apply","encryption","startsWith","getPayload","saio","open","[MSE] source buffer error","mp4track","append","getNri","codec","isReady","types","STCO","feed","mdia",'VALUE="',"schi","STSZ","offAll","jmuxer","skipEG","nextDts","1036611gAoRea","generatePlayReadyHeader","dispatch","cbcs","stsc","endOfStream","6576815frVeWy","minf","releaseBuffer","readUShort","track","type","stsz","isvcl","width","map","readBoolean","mvhd","onReady","saiz","reportDiscontinuity","mdat","bufferControllers","flush","patchSampleAuxinfo","readEG","</KIDS>","reset","set","onMSEClose","setUint16","idr","smhd","parseSPS","bind","message","getBits","initialized","sourceBuffer","destroy","len","isNonSync","warn","dOps","extractNALUs","length","</WRMHEADER>","listener","trun","AUD","SEI","timescale","Num frames in chunk: ","7620738FWzrwf","mode","tkhd","dbgMediaDump","dref","addTrack","doAppend","options","[MSE] sourceclose","drm","mediaSource","Failure: Browser doesn't support MSE/MMS",'/mp4; codecs="',"function","duration","min","avc1.","traf","[MSE] sourceopen","moov","readyToDecode","resetTrack","tenc","onMSEOpen","MediaSource","removeSourceBuffer","h264","encv","sourceopen","trex","isKeyframe","SMHD","<DATA>","stype","videoSampleAuxInfo","ended","getElementById","getUint8","slice","audioSampleAuxInfo","data","ready","frma","mseReady","string","4760043VatbTq","mvex","org.w3.clearkey","SPS","buffered","no video element were found to render, provide a valid video element","getPayloadSize",'<WRMHEADER xmlns="',"stts","start","[H264Parser] Both IDR and non-IDR VCL NALUs found in the same frame","timestamp","skipScalingList","skipUEG","trackTypes","dts","queue","readBits","mseEnded","senc","getData","shift","[MSE] error: ","UNKNOWN","parsePPS","appendBuffer","box","initBrowser","schm","saiIvSize","</DATA>","out",'<KID ALGID="AESCTR" ',"audiosamplerate","reduce","com.microsoft.playready.recommendation","tracks","fromCharCode","updating","calculateExpectedSizeFromSai","videoElement","stbl","1159252OkMfWN","opus","toString","buffer","nalus","index","splice","moof","licenseUrl","esds","disableRemotePlayback","height","flags","createBuffer","STSC","parseNAL","PPS","mdhd","debug","sps","keySystem","charCodeAt","mse","parseHeader","isSafari","volume","concat","channelCount","</PROTECTINFO>","units","Unsupported DRM type ","enca","call","POSITIVE_INFINITY","com.apple.fps","<KIDS>","getVideoFrames","646233hEZDuD","4LuRDMh","nri","mp4a","ManagedMediaSource","buffer error","push","audio","avcC","onError","Buffered range ","getTrackID","</KID>","byteLength","No A/V data","video","Opus","both","HDLR_TYPES","readUByte","sdtp","STTS","hasRedundancy","</LA_URL>","revokeObjectURL","BYTES_PER_ELEMENT","webkitsourceclose","IDR","samples","keyId","timestamp gap: ","node","readSPS","setData","pps","onBuffer","remuxController","seq","VMHD","initSegment","ceil","sinf","sourceclose","mfhd","skipLZ","http://schemas.microsoft.com/DRM/2007/03/PlayReadyHeader","Browser does not support codec","pssh","mediasource is not available to end: ","NDR","isReset","bitsAvailable","payload","DINF","keyFrame","isDependedOn","isTypeSupported","assign","waitingForIdr","8hmeyto","config","skipBits","remove","bitLength","[H264Parser] IDR without SPS/PPS, not suitable for recovery","TYPES","13659xNePtU","getFramePayload","onBufferError","mediaDuration","mp4"];return(Rn=function(){return t})()}class Dn extends Tn{[vn(262)](){const t=vn;this[t(337)]=null,this[t(279)]=null;try{this[t(261)]&&(this.sourceBuffer[t(170)](),this.mse[t(301)](this[t(261)]),this.sourceBuffer=null)}catch(t){}this.offAll()}[vn(282)](){const t=vn;if(this[t(337)][t(268)]&&this[t(261)]&&!this.sourceBuffer.updating){if(this[t(261)].buffered.length>1){for(let i=0;i<this[t(261)][t(325)][t(268)];++i){const e=i<this[t(261)].buffered.length-1;_n[t(381)](t(410)+i+(e?" (remove)":"")+": "+this[t(261)][t(325)][t(330)](i)+t(180)+this[t(261)][t(325)].end(i)),e&&this[t(261)][t(156)](this[t(261)].buffered[t(330)](i),this[t(261)][t(325)].end(i))}if(this[t(261)][t(359)])return}try{this[t(261)][t(346)](this[t(337)]),this[t(337)]=new j}catch(i){this[t(225)](t(189),{type:this.type,name:t(172),error:i})}}}[vn(214)](t,i){const e=vn;this.dbgMediaDump&&(this[e(279)][e(208)](t,i)||(this[e(279)]=null)),this[e(195)]||(this.queue=pn(this.queue,t)),this[e(282)]()}constructor(t,i,e){var s;const n=vn;super(n(366)),this[n(234)]=i,this[n(337)]=new j;const r=null==(s=cn.mediaDumps[i])?void 0:s[n(352)].durationMs;r>0&&(this[n(279)]=new fn(i,n(164),r)),this.sourceBuffer=t,this[n(385)]=e,this[n(195)]=!1,this[n(261)].addEventListener(n(189),t=>{const i=n;_n.warn(i(206),t,this.type),this[i(195)]=!0,this.dispatch("error",{type:this[i(234)],name:i(366),error:i(405)})})}}class Nn extends Tn{static isSupported(t){const i=vn;return s[i(404)]?s.ManagedMediaSource[i(150)](t):!!s[i(300)]&&s[i(300)][i(150)](t)}[vn(348)](){const t=vn;typeof this[t(283)][t(431)]===t(320)&&""==this.options[t(431)]&&_n[t(189)](t(326)),this[t(319)]=!1,this[t(174)]()}[vn(174)](){const t=vn;if(!s.ManagedMediaSource&&!s[t(300)])throw t(287);s.ManagedMediaSource?(this.node[t(373)]=!0,this[t(286)]=new ManagedMediaSource):this[t(286)]=new MediaSource,this[t(198)]=URL.createObjectURL(this[t(286)]),this.node[t(167)]=this[t(198)],this[t(339)]=!1,this[t(286)][t(176)](t(304),this[t(299)][t(257)](this)),this.mediaSource.addEventListener(t(442),this[t(252)][t(257)](this)),this.mediaSource.addEventListener(t(192),this[t(299)][t(257)](this)),this[t(286)][t(176)](t(426),this[t(252)][t(257)](this)),this[t(286)][t(176)](t(189),function(i){const e=t;_n[e(189)](e(343),i[e(258)])})}[vn(169)](){const t=vn;if(!this.mseEnded)try{this[t(339)]=!0,this[t(286)][t(184)]===t(205)&&this[t(286)][t(228)]()}catch(i){_n[t(189)](t(448),i)}}[vn(243)](){const t=vn;_n[t(381)]("Discontinuity!"),this[t(152)]=!0}feed(t){const i=vn;let e={video:[],audio:[]};if(this[i(195)]||this[i(339)]||!t||!this.remuxController)return-1;if(t[i(415)]){e[i(332)]=t.timestamp;const s=this[i(360)](t[i(310)],this[i(164)][i(350)][i(415)]),n=s!=t.video[i(413)];let r=Sn[i(267)](t[i(415)],n);if(!r[i(185)]||r[i(367)].length<1)return 0;if(this.waitingForIdr){if(!r[i(254)])return 0;this[i(152)]=!1}if(!gn&&t[i(310)]){const e=r[i(367)][i(355)]((t,e)=>t+4+e[i(413)],0);e!==s&&this.patchSampleAuxinfo(t[i(310)],this[i(164)][i(350)][i(415)],e-s)}e[i(415)]=this[i(399)](r[i(367)]),e[i(310)]=t[i(310)]}return t[i(407)]&&(e[i(332)]=t.timestamp,e[i(407)]=[{units:t[i(407)]}],e[i(315)]=t[i(315)]),t[i(415)]||t[i(407)]?(this[i(436)][i(181)](e),0):(_n[i(189)](i(414)),0)}[vn(399)](t){const i=vn;let e=[],s=[],n=!1,r=!1;for(let h of t){let t=new bn(h);t[i(234)]()!==bn[i(427)]&&t[i(234)]()!==bn[i(449)]||Sn[i(386)](t),e.length&&r&&(t[i(196)]||!t[i(236)])&&(s[i(406)]({units:e,keyFrame:n}),e=[],n=!1,r=!1),e.push(t),n=n||t.isKeyframe(),r=r||t[i(236)]}if(e[i(268)])if(r)s.push({units:e,keyFrame:n});else{let t=s[i(268)]-1;t>=0&&(s[t][i(392)]=s[t][i(392)].concat(e))}return 1!==s[i(268)]&&_n.warn(i(275)+s[i(268)]),s}[vn(360)](t,i){if(!t)return 0;const e=(t[0]<<8)+t[1],s=i+2+4;let n=0,r=2;for(;0<e&&r+s<=t.byteLength;){r+=i;const e=(t[r]<<8)+t[r+1],s=(t[r+2]<<24)+(t[r+3]<<16)+(t[r+4]<<8)+t[r+5];r+=6,n+=e+s}return n}[vn(247)](t,i,e){let s=2;if(0<(t[0]<<8)+t[1]&&s+(i+2+4)<=t.byteLength){s+=i;let n=(t[s]<<8)+t[s+1];n+=e,n>=0&&(t[s]=n>>>8&255,t[s+1]=255&n)}return 0}[vn(376)](){const t=vn;if(this[t(319)]&&this[t(436)]&&this[t(436)][t(211)]()&&!this[t(245)]){this[t(245)]={};for(let i in this[t(436)][t(357)]){let e=this.remuxController[t(357)][i];const s=""[t(389)](i,t(288)).concat(e.mp4track[t(210)],'"');if(_n[t(381)](t(193),s),!Nn[t(166)](s))return _n.error(t(446)),!1;let n=this.mediaSource[t(173)](s);this[t(245)][i]=new Dn(n,i,this[t(286)]),this[t(245)][i].on(t(189),this[t(162)][t(257)](this))}}}[vn(231)](){const t=vn;for(let i in this.bufferControllers)this[t(245)][i][t(282)]()}[vn(435)](t){const i=vn;this[i(319)]&&this[i(245)]&&this[i(245)][t[i(234)]]&&this[i(245)][t[i(234)]].feed(t[i(452)],t[i(336)])}onMSEOpen(){const t=vn;_n[t(381)](t(294)),this[t(286)].readyState!==t(311)&&(this[t(286)][t(290)]=Number[t(396)],this[t(319)]=!0,typeof this[t(283)].onReady===t(289)&&this[t(283)][t(241)][t(395)](null,this.isReset),URL[t(424)](this[t(198)]),this[t(376)]())}[vn(252)](){const t=vn;_n[t(381)](t(284)),this.mseReady=!1,this[t(169)]()}onBufferError(t){const i=vn;_n.warn(i(197),t),this[i(195)]=!0,this.endMSE(),typeof this.options[i(409)]===i(289)&&this[i(283)][i(409)][i(395)](null,t)}constructor(t){const i=vn;super(i(220)),this[i(195)]=!1,this[i(152)]=!0,this[i(450)]=!1,this[i(319)]=!1,this.mseEnded=!1;let e={node:"",mode:i(415),debug:!1,onReady:function(){},onError:function(t){}};this.options=w[i(151)]({},e,t),this[i(431)]=typeof this.options[i(431)]===i(320)?h[i(312)](this[i(283)][i(431)]):this[i(283)][i(431)],this[i(285)]=t.drm,this[i(164)]=new kn(this[i(285)]),this[i(436)]=new Cn(this.node,this[i(164)]),this[i(436)][i(281)](this[i(283)][i(277)]),this[i(436)].on(i(366),this.onBuffer[i(257)](this)),this[i(436)].on(i(317),this[i(376)][i(257)](this)),this[i(348)]()}}function Bn(t,i){const e=Mn();return(Bn=function(t,i){return e[t-=182]})(t,i)}function Mn(){const t=["1247170HwkwNv","Av","gitVersion","352GaBvIm","toISOString","14XlATBT","2568948xDjIMf","1027225mjPCDe","19691yiLZrh","195999uPnZlk","3038288UlnUQm","2033937CLMUfn"];return(Mn=function(){return t})()}!function(){const t=Bn,i=Mn();for(;;)try{if(x(t(182))/1+x(t(192))/2*(x(t(184))/3)+-x(t(185))/4+-x(t(187))/5+x(t(193))/6+-x(t(183))/7*(x(t(190))/8)+-x(t(186))/9==553943)break;i.push(i.shift())}catch(t){i.push(i.shift())}}();const Ln=Hn;function On(){const t=["1236858jPUtaw","certificate","11225xsjioT","275391VrsSlK","5816evMpkd","CrsCCAMSEKDc0WAwLAQT1SB2ogyBJEwYv4Tx7gUijgIwggEKAoIBAQC8Xc/GTRwZDtlnBThq8","7299lkgbxa","1470Lkqtku","production","Development","charCodeAt","xUuwokpsqVIHZrJfu62ar+BF8UVUKdK5oYQoiTZd9OzK3kr29kqGGk3lSgM0/p499p/FUL8oH","baseUrl","375060LzZhzk","230861ZKueQt","12pvGCSu","https://lic.drmtoday.com","35fxICRY","pQnNI61gzHO42XZOMuxytMm0F6puNHTTqhyY3Z290YqvSDdOB+UY5QJuXJgjhvOUD9+oaLlvT","Production","development","https://lic.test.drmtoday.com","UrTEfQxfPR4dJTquE+IDLAi5yeVVxzbAgMBAAE6DGNhc3RsYWJzLmNvbUABEoADMmGXpXg/0q","from","RL9KsD0v7ysBQVdUXEbJotcFz71tI5qc3jwr6GjYIPA3VzusD17PN6AGQniMwxJV12z/EgnUo","baigovcoURAZcr1d/G0rpREjLdVLG0Gjqk63Gx688W5gh3TKemsK3R1jV0dOfj3e6uV/kTpsN","pcFB13osydpD2AaDsgWo5RWJcNf+fzCgtUQx/0Au9+xVm5LQBdv8Ja4f2oiHN3dw","V382D1oJAM0F/YgCQtNDLz7vTWJ+QskNGi5Dd2qzO4s48Cnx5BLvL4H0xCRSw2Ed6ekHSdrRU","27eI5MATX39gYtCnn7dDXVxo4/rCYK0A4VemC3HRai2X3pSGcsKY7+6we7h4IycjqtuGtYg8A","HzgsJ7Hajdsyzn0Vs3+VysAgaJAkXZ+k+N6Ka0WBiZlCtcunVJDiHQbz1sF9GvcePUUi2fM/h","Staging","staging","name"];return(On=function(){return t})()}!function(){const t=Hn,i=On();for(;;)try{if(x(t(326))/1+x(t(325))/2+x(t(315))/3+x(t(327))/4*(-x(t(314))/5)+-x(t(312))/6+x(t(329))/7*(x(t(316))/8)+-x(t(318))/9*(x(t(319))/10)==181728)break;i.push(i.shift())}catch(t){i.push(i.shift())}}();const Fn=Ln(317)+Ln(306)+"wyoYOE+M/t1oIbccwlTQ7o+BpV1X6TB7fxFyx1jsBtRsBWphU65w121zqmSiwzZzJ4xsXVQCJ"+Ln(330)+"+vwmV2/NJWxKqHBKdL9JqvOnNiQUF0hDI7Wf8Wb63RYSXKE27Ky31hKgx1wuq7TTWkA+kHnJT"+Ln(334)+Ln(323)+Ln(308)+"7hyskG5ZLAyJMzTvgnV3D8/I5Y6mCFBPb/+/Ri+9bEvquPF3Ff9ip3yEHu9mcQeEYCeGe9zR/"+Ln(307)+Ln(304)+Ln(336)+Ln(305),Un=j[Ln(335)](s.atob(Fn),t=>t[Ln(322)](0));class Vn{toString(){return this.name}[Ln(324)](){const t=Ln;switch(this[t(311)]){case"staging":return"https://lic.staging.drmtoday.com";case"development":return t(333);default:return t(328)}}[Ln(313)](){return Un}constructor(t){this[Ln(311)]=t}}function Hn(t,i){const e=On();return(Hn=function(t,i){return e[t-=304]})(t,i)}Vn[Ln(309)]=new Vn(Ln(310)),Vn[Ln(331)]=new Vn(Ln(320)),Vn[Ln(321)]=new Vn(Ln(332));const Wn=qn;function qn(t,i){const e=zn();return(qn=function(t,i){return e[t-=252]})(t,i)}function zn(){const t=["SampleAuxInfo corrupted","error","50012RXzLep","3301necisu","[RTC-DRM]","subarray","buffer","64zGPhLV","162pDdDkb","659466dfDPqj","SampleAuxInfo corrupted (postfix not found)","data","4199670WddvRf","95WaGAXy","getUint8","137436hbCkvG","1351035XuhSnW","getUint16","byteLength","184863QcuifQ"];return(zn=function(){return t})()}!function(){const t=qn,i=zn();for(;;)try{if(-x(t(253))/1*(x(t(258))/2)+x(t(259))/3+x(t(252))/4*(-x(t(263))/5)+-x(t(265))/6+-x(t(269))/7*(-x(t(257))/8)+-x(t(266))/9+x(t(262))/10==173102)break;i.push(i.shift())}catch(t){i.push(i.shift())}}();const Gn=un(Wn(254));!function(){const t=jn,i=Yn();for(;;)try{if(x(t(369))/1+x(t(374))/2+x(t(366))/3+-x(t(373))/4+-x(t(365))/5+-x(t(368))/6*(x(t(370))/7)+x(t(367))/8==110661)break;i.push(i.shift())}catch(t){i.push(i.shift())}}();const Xn=[];function jn(t,i){const e=Yn();return(jn=function(t,i){return e[t-=365]})(t,i)}let Qn=null,Kn=0;function Yn(){const t=["799144UpkRWz","356926NfeJZx","set","slice","237700RBIjTO","627444ELwjUL","76968OxbdcX","6xPMWky","172231EpHRtx","1480332fEizHX","push","buffer"];return(Yn=function(){return t})()}const Jn=vr;!function(){const t=vr,i=sr();for(;;)try{if(-x(t(452))/1+-x(t(412))/2+-x(t(478))/3*(x(t(441))/4)+-x(t(485))/5*(-x(t(415))/6)+-x(t(400))/7+x(t(460))/8*(-x(t(486))/9)+-x(t(437))/10*(-x(t(470))/11)==412983)break;i.push(i.shift())}catch(t){i.push(i.shift())}}();const Zn=un(Jn(424));let $n={licenseUrl:"",onFetch:void 0};const tr={},ir=(t,i,e)=>(void 0===i&&(i=0),void 0===e&&(e=1/0),((t,i,e)=>{const s=Jn,n=j.BYTES_PER_ELEMENT;i*=n,e*=n;const r=(a=t)instanceof ArrayBuffer?a:a[Jn(484)],h=t[s(483)],o=i;var a;let u=_[s(432)](0,_.min(o,h)),c=_.min(u+_[s(432)](e,0),h);return u/=n,c/=n,new j(r,u,c-u)})(t,i,e));const er=t=>{const i=Jn;let e="";for(const s of t){let t=s.toString(16);1==t[i(433)]&&(t="0"+t),e+=t}return e};function sr(){const t=["360308tFqTFd","usable for decryption (status: ","oct","decode","parse","license","parseFromString","message","8pQccIM","No clear key test key provided!","generateRequest","text/xml","Failed to update the session: ","output-downscaled","target","apply","bind","Failed to update the session","24280927IKsRHd","No PR challenge data!","kids","status","getElementsByTagName","rtcdrmerror","CK license request:","A128KW","3KcCnPp","createSession","License acquisition failed with error ","No media keys for media element!","stringify","byteLength","buffer","82765KyOCry","7206525fRtYVA","error","btoa","9a04f07998404286ab92e65be0885f95","set","[PR] License fetched:","getUint16","onFetch","4630892EspqDe","addEventListener","debug","has","json","Previous lic will be reused","internal-error","subarray","fromCharCode","expired","text","temporary","665922eWbQGg","then","[FPS] License fetched:","174puebov","Content-Type","update","POST","<Challenge","nodeValue","replace","sessionId","initData","[CDM]","[WV] License fetched:","No media element available!","CDM error generating license request: ","Failed to load previous EME session","initDataType","keyStatuses","forEach","max","length","indexOf","New lic will be requested","edef8ba979d64acea3c827dcd51d21ed","10DoxNsv","atob","catch","arrayBuffer","475444JqsldJ","No init data available!","append","warn","licenseUrl","dispatchEvent","floor","Data has an incorrect length, must be even.","EME createSession() failed - no DRM available","keystatuseschange","Failed to reuse previous EME session: "];return(sr=function(){return t})()}let nr=null;const rr=t=>{const i=Jn;return s[i(394)](String[i(408)][i(467)](null,t))[i(421)](/\+/g,"-")[i(421)](/\//g,"_")[i(421)](/=*$/,"")},hr=(t,i)=>{const e=Jn,s=(t=>{const i=Jn,e=JSON[i(456)]((new TextDecoder)[i(455)](t));if(Zn[i(402)](i(476),e),null===nr)throw new m(i(461));const s=[];for(const t of e[i(472)]){const e={kty:i(454),alg:i(477),kid:t,k:rr(nr)};s.push(e)}return(new TextEncoder).encode(JSON[i(482)]({keys:s}))})(i.message);i.target.update(s)[e(439)](function(t){const i=e;Zn[i(393)](i(469),t)})},or=t=>{const i=Jn,e=s[i(438)](t.replace(/-/g,"+")[i(421)](/_/g,"/")),n=new j(e[i(433)]);for(let t=0;t<e.length;++t)n[t]=e.charCodeAt(t);return n},ar=function(t,i){for(var e=arguments.length,s=new Array(e>2?e-2:0),n=2;n<e;n++)s[n-2]=arguments[n];return Gs(void 0,[t,i,...s],void 0,function*(t,i,e){void 0===e&&(e=!1);const s=Jn,n=new Headers(tr);e&&n[s(443)](s(416),s(463));const r={method:s(418),headers:n,body:i},h=yield $n[s(399)]?$n.onFetch(t,r):fetch(t,r);if(!h.ok)throw new m(s(480)+h[s(473)]);return h})},ur=(t,i)=>{const e=Jn;ar($n[e(445)],i[e(459)])[e(413)](t=>t[e(404)]()).then(t=>{const s=e;Zn[s(402)](s(425),t[s(457)]);const n=or(t[s(457)])[s(484)];i[s(466)][s(417)](n)[s(439)](t=>{const i=s;Zn[i(393)](i(469),t)})})[e(439)](i=>{const s=e;t[s(446)](new CustomEvent(s(475),{detail:{message:""+i}})),Zn[s(393)](i)})},cr=(t,i)=>{const e=Jn,s=((t,i)=>{const e=Jn,s=new DOMParser;try{const t=function(t,i,e){void 0===e&&(e=!1);const s=Jn;if(!t)return"";let n=t;if(!e&&n[s(483)]%2!=0)throw Zn[s(393)](s(448)),new m("Data does not seem to be UTF-16 encoded!");const r=ir(n);let h;if((255===r[0]&&254===r[1]||254===r[0]&&255===r[1])&&(n=r[s(407)](2)),n instanceof ArrayBuffer)h=n;else{const t=new j(n[s(483)]);t[s(396)](ir(n)),h=t[s(484)]}const o=_[s(447)](n[s(483)]/2),a=new Uint16Array(o),u=new DataView(h);for(let t=0;t<o;t++)a[t]=u[s(398)](2*t,i);return function(t){const i=Jn;let e="";for(let s=0;s<t[i(433)];s+=16e3){const n=t.subarray(s,s+16e3);e+=String[i(408)][i(467)](null,n)}return e}(a)}(i,!0);if(t[e(434)](e(419))>-1){const i=s[e(458)](t,e(463))[e(474)]("Challenge")[0].childNodes[0][e(420)];if(null===i)throw new m(e(471));return or(i)}Zn[e(444)]("[PR] Challenge node not found")}catch(i){t[e(446)](new CustomEvent(e(475),{detail:{message:""+i}})),Zn[e(393)](i)}return null})(t,i.message);if(null===s)return t[e(446)](new CustomEvent("rtcdrmerror",{detail:{message:e(471)}})),void Zn[e(393)](e(471));ar($n[e(445)],s[e(484)],!0)[e(413)](t=>t[e(440)]())[e(413)](s=>{const n=e;Zn[n(402)](n(397),s),i[n(466)][n(417)](s)[n(439)](function(i){const e=n;t[e(446)](new CustomEvent(e(475),{detail:{message:e(464)+i}})),Zn[e(393)]("Failed to update the session",i)})}).catch(i=>{const s=e;t.dispatchEvent(new CustomEvent(s(475),{detail:{message:""+i}})),Zn[s(393)](i)})},dr=(t,i)=>{const e=Jn;ar($n.licenseUrl,i[e(459)])[e(413)](t=>{const i=e,s=t[i(410)]();return Zn[i(402)](i(414),t,s),s})[e(413)](t=>{const s=e;i.target[s(417)](or(t))})[e(439)](i=>{const s=e;t[s(446)](new CustomEvent(s(475),{detail:{message:""+i}})),Zn.error(i)})},lr=(t,i)=>{tr[t]=i},fr=rn.isSafari;function vr(t,i){const e=sr();return(vr=function(t,i){return e[t-=393]})(t,i)}let _r=!fr;const gr=new Map;function pr(t){return Gs(this,void 0,void 0,function*(){const i=vr;if(null===t.initData)throw new m(i(442));const e=t[i(466)];if(null===e)throw new m(i(426));const s=e.mediaKeys;if(null===s)throw new m(i(481));const n=er(new j(t[i(423)])),r=n+e.id;let h=null;gr[i(403)](r)&&(h=gr.get(r),null!=h&&h.close(),gr.delete(r)),Zn[i(402)](i(h?405:435));let o=null;try{o=s.createSession(_r?"persistent-license":"temporary")}catch(t){Zn[i(402)]("EME createSession(persistent) failed:",t)}if(!o&&_r){_r=!1;try{o=s[i(479)](i(411))}catch(t){Zn.error("EME createSession(temporary) failed:",t)}}if(o)if(o.addEventListener(i(450),t=>{const s=i;t[s(466)][s(430)][s(431)]((t,i)=>{const n=s;(t===n(409)||"output-restricted"===t||t===n(465)||t===n(406))&&e[n(446)](new CustomEvent(n(475),{detail:{message:"Key "+er(new j(i))+" is not "+(n(453)+t)+")",keyId:i}}))})}),fr?o[i(401)](i(459),dr.bind(null,e),!1):-1!==n.indexOf(i(436))?o[i(401)](i(459),ur[i(468)](null,e),!1):-1!==n[i(434)](i(395))?o.addEventListener(i(459),cr[i(468)](null,e),!1):o.addEventListener(i(459),hr[i(468)](null,e),!1),h)try{(yield o.load(h[i(422)]))?gr[i(396)](r,o):e[i(446)](new CustomEvent(i(475),{detail:{message:i(428)}}))}catch(t){e[i(446)](new CustomEvent(i(475),{detail:{message:i(451)+t}}))}else o[i(462)](t[i(429)],t[i(423)])[i(413)](()=>{_r&&gr[i(396)](r,o)})[i(439)](t=>{const s=i;e.dispatchEvent(new CustomEvent(s(475),{detail:{message:s(427)+t}}))});else e[i(446)](new CustomEvent(i(475),{detail:{message:i(449)}}))})}const mr=Vr;!function(){const t=Vr,i=Or();for(;;)try{if(-x(t(462))/1*(-x(t(532))/2)+-x(t(543))/3+x(t(682))/4+-x(t(692))/5*(x(t(588))/6)+-x(t(539))/7+x(t(496))/8+-x(t(549))/9==672532)break;i.push(i.shift())}catch(t){i.push(i.shift())}}();const wr=un(mr(673)),yr=rn[mr(607)],br=rn[mr(540)],Ar=rn[mr(647)],Sr=rn[mr(489)],Tr=rn[mr(478)],kr=rn.platform,Er=rn[mr(620)],xr=Sr||Tr&&kr===mr(578),Pr=1e6*(br?82:Ar?220:120),Ir=br?5e3:2e3,Cr=br?1.5:.5;function Rr(t){const i=mr;return typeof t!==i(672)||null===t||t instanceof Element||t instanceof Vn?t:(null==(e=t)?void 0:e[mr(584)])instanceof ArrayBuffer&&null!=e&&e.BYTES_PER_ELEMENT?t[i(550)]():Array[i(636)](t)?t.reduce((t,i,e)=>(t[e]=Rr(i),t),[]):t instanceof w?w.keys(t).reduce((i,e)=>(i[e]=Rr(t[e]),i),{}):t;var e}class Dr{constructor(t){const i=mr;this[i(547)]="",this[i(471)]="",this.keySystem="",this[i(603)]=[],this[i(479)]=Rr(t),this.jmuxer=null,this.keyFrameLogCntr=0,this[i(561)]=Date[i(658)](),this[i(585)]=0,this[i(602)]=0,this[i(490)]=-1,this[i(680)]=0,this[i(596)]=0,this[i(491)]=!0,this.keyFrameNeededPosted=!1,this[i(617)]=Ir,this[i(500)]=null,this.dbgMediaDump={video:null,audio:null}}}const Nr=new Map,Br=new j([60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60]),Mr=new j([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1]),Lr=new j([213,251,214,184,46,217,62,78,249,138,228,9,49,238,51,183]);function Or(){const t=["isSafari","ansform=$=>{let e=$.transformer;handleTransform(e.options.operation,e.readable,e.writable)}),onmessage=$=>{keyFra","status","DRM config:","key","Development"," will be used","Staging","const DUMMY_IDR_FRAME_SLICE_HDR0=new Uint8Array([32,0,203]),DUMMY_IDR_FRAME_SLICE_HDR1=new Uint8Array([16,0,50]);","enabled","playback at ","now",".experiment","seq","videoElement","data","btoa","PlayReady might not support '","logLevel","cbcs-1-9","encryption"," to ","offset","x-dt-custom-data","let brokenFrame=null,idrFrames=[];function initializeDummyFrames(){brokenFrame=new Uint8Array([0,0,0,1,65,154,255","object","[RTC-DRM]","not-allowed","durationMs","Default transform mode enabled, ","keySystem","timestamp","DRM config keyId must be an instance of 16-byte long Uint8Array.","lastKeyFrameTime","H264 is the only supported video codec.","2533916KeNZJm","out","Applying pre-configured certificate (","buffered","Widevine","x-dt-auth-token"," ms)","com.microsoft.playready.recommendation","error","currentTime","225RwtgWL","end","requestMediaKeySystemAccess","50705YjLCIv","onmessage","environment","wvLicenseUrl","a1d1f1"," requesting a new key frame (latency ","userId","ClearKey","createEncodedStreams","licenseUrl","PlayReady license acquisition might fail without output protection enabled (sessionId is ","feed","dbgMediaDump","jmuxer","MSE (re)init",",255]).buffer,idrFrames.push(new Uint8Array([0,0,0,1,39,100,0,13,172,87,5,6,100,0,0,0,1,40,238,60,176,0,0,0,1,37,","isChrome","config","forEach","Invalid config argument type, DRM config must be an object.","hwSecurity","audioEncrypted","setMediaKeys","fpsCertificate","Unable to create Worker!","GET","customTransform","isEdge","prevSeqNum","keyFrameNeeded","encrypted","targetLatency not set!","opus","FairPlay","7963992IJNztq","streamType","SampleAuxInfo extraction failed (video)"," seeking from ","worker","]: ","video","kind","audio","jitterBufferDelayHint","size","No target media element!","fpsCertificateUrl","wvCertificate","delimited","3000","pipeThrough","/license-server-fairplay/cert/","string",") not found in [","indexOf","warn","ignoreAudio","append","jitterBufferTarget","prLicenseUrl","sessionTypes","authToken","get","RTCRtpScriptTransform","audioElement","catch","trim","join","waitingForIdr","info","52hXHKkY","enqueue","). It has to be a string containing a JWT.","playbackRate","sai","persistent-license","Blob","2699340CvuQCI","isFirefox","transform",'rame:{type:$.type,timestamp:$.timestamp,data:$.data}}),"key"===$.type&&(keyFrameNeeded=!1),$.data=generateDummyFr',"554109usxuWq"," will not be created, use rtcDrmFeedFrame to push frames manually","bind","streams","serverCertificateUrl","includes","3473577nNrBJc","slice","URL","serverCertificate","length","Invalid authToken type (","addEventListener","', it's safer to use 'cbcs' instead.","srcObject","ClearKey is not supported by Safari.","meNeeded=$.data};","value","nextKeyFrameAllowedTime","Error recovery attempted","rtcdrmerror","184,32,0,203,255,38,29,217,24,192,161,96,0,0,12,229,174,166,6,7,20,3,84,0,247,96,193,181,229,128,0,32,32]).buffer"," bytes","both","debug","No valid DRM config found, call rtcDrmConfigure first.","dispatchEvent","certificate","mediaBufferMs","clear","merchant","src","sessionId","reportDiscontinuity","mediaBufferMs should be an integer.","Android","rtcDrmConfigure did not specify audioElement, audio will be dropped","/license-proxy-widevine/cenc/","arrayBuffer","). Edge only supports PlayReady, Widevine and ClearKey.","). Chrome only supports Widevine and ClearKey.","buffer","videoStartTimestamp",'audio/mp4; codecs="opus"',"set","175800AyhMKK","PlayReady","SampleAuxInfo extraction failed (audio)","cenc","codec","videoCapabilities",".. ","Duplicate/reordered frame, prev seq: ","bytesSinceKey","wvCertificateUrl","/license-proxy-headerauth/drmtoday/RightsManager.asmx","robustness","baseUrl","type","audioStartTimestamp","emeConfig","com.widevine.alpha","SW_SECURE_CRYPTO","fpsLicenseUrl","supportsRtpScriptTransform","Target video element (","?audioTransformFunction:videoTransformFunction});e.pipeThrough(a).pipeTo(x)}self.RTCTransformEvent&&(self.onrtctr","createObjectURL","playoutDelayHint","POSITIVE_INFINITY",'ame(keyFrameNeeded),e.enqueue($)}function handleTransform($,e,x){let a=new TransformStream({transform:"audio"===$',"track",'video/mp4; codecs="avc1.640032"',"cbcs","keyFrameRequestInterval","Frame gap: ","keyFrameNeededPosted","isWindows","HW_SECURE_ALL"," bytes, ","GOP is getting too long, requesting a new key frame","temporary","Safari does not support Opus, audio will not be rendered.","stringify","byteLength","message"," frame","H264","mediaDumps","h264","keyFrameLogCntr","requestMediaKeySystemAccess(","Safari doesn't support 'cenc'/AES-CTR, use 'cbcs' instead if possible.","isArray","Invalid DRM type (","DRM config iv must be an instance of 16-byte long Uint8Array.","keyId","pipeTo"," - ","receiver","isInteger","toString","onFetch","next"];return(Or=function(){return t})()}function Fr(t){const i=mr;let e=!1;if((t[i(479)][i(502)]&&t[i(479)].video[i(667)]!==i(572)&&"HW"===t[i(479)][i(502)][i(599)]||t[i(479)][i(504)]&&t[i(479)][i(504)][i(667)]!==i(572)&&"HW"===t.config[i(504)][i(599)])&&(e=!0),t.hwSecurity=e,function(t,i){const e=mr;void 0!==i&&(t[e(479)].mediaBufferMs=i),(void 0===t[e(479)][e(571)]||t.config[e(571)]<0)&&(t[e(479)].mediaBufferMs=100,br?t[e(479)][e(571)]=350:!Ar&&Er&&("PlayReady"===t.config[e(601)]||t[e(482)])&&(t.config[e(571)]=1400))}(t,t[i(479)][i(571)]),void 0===t.config[i(523)]){void 0===t[i(479)][i(468)]&&(t[i(479)][i(468)]="purchase"),void 0===t[i(479)][i(575)]&&(t.config[i(575)]=i(466));const e=s[i(663)](JSON[i(626)]({userId:t[i(479)].userId,sessionId:t.config.sessionId,merchant:t[i(479)].merchant}));lr(i(670),e)}else lr(i(687),t[i(479)][i(523)]);for(const e of[t[i(479)][i(504)],t[i(479)][i(502)]])e&&e.encryption!==i(572)&&(e.keyId||(e[i(639)]=Mr),e.iv||(e.iv=Lr));t[i(552)]=void 0,t[i(547)]="",t[i(471)]="";const n=t[i(479)][i(464)][i(600)]();var r;if(t[i(479)].type===i(469)?(t[i(677)]="org.w3.clearkey",nr=Br):t[i(479)][i(601)]===i(686)?(t[i(677)]=i(604),Er&&e&&(t[i(677)]+=i(659)),t[i(479)][i(509)]?t[i(552)]=t[i(479)][i(509)]:t[i(479)][i(597)]?t[i(547)]=t.config[i(597)]:t[i(552)]=t.config[i(464)][i(570)](),t[i(479)].wvLicenseUrl?t[i(471)]=t.config[i(465)]:t[i(471)]=n+i(580)):t[i(479)][i(601)]===i(589)?(t.keySystem=i(689),t[i(479)][i(521)]?t[i(471)]=t[i(479)][i(521)]:t[i(471)]=n+i(598)):t.config[i(601)]===i(495)&&(t.keySystem="com.apple.fps",t[i(479)][i(485)]?t[i(552)]=t[i(479)][i(485)]:t[i(479)][i(508)]?t[i(547)]=t.config.fpsCertificateUrl:t[i(547)]=n+i(513)+t[i(479)][i(573)],t[i(479)].fpsLicenseUrl?t[i(471)]=t.config[i(606)]:t[i(471)]=n+"/license-server-fairplay/"),r={licenseUrl:t[i(471)],onFetch:t[i(479)][i(645)]},$n=r,t[i(603)]=[],t[i(479)][i(601)]!==i(495)){t[i(603)].push({initDataTypes:[i(591)],sessionTypes:[i(537),i(624)]});for(const e of[t[i(479)][i(502)],t.config[i(504)]])if(e&&e[i(667)]!==i(572)){const s=e==t.config[i(502)]?i(502):i(504);let n;"Widevine"===t.config[i(601)]?n="HW"===e[i(599)]?i(621):i(605):"PlayReady"===t.config[i(601)]&&(n="HW"===e[i(599)]?i(511):"2000"),"video"===s?t[i(603)][0][i(593)]=[{contentType:i(615),encryptionScheme:e[i(667)]===i(591)?i(591):"cbcs-1-9",robustness:n||void 0}]:t[i(603)][0].audioCapabilities=[{contentType:i(586),encryptionScheme:e[i(667)]===i(591)?i(591):i(666),robustness:n||void 0}]}}else t.emeConfig=[{initDataTypes:["sinf"],videoCapabilities:[{contentType:"video/mp4",robustness:""}],distinctiveIdentifier:i(674),persistentState:"not-allowed",sessionTypes:[i(624)]}];wr[i(567)](i(650),t)}function Ur(t){const i=mr;wr[i(567)](i(476));let e=t[i(479)][i(661)];(!t[i(479)][i(502)]||t[i(479)][i(502)][i(667)]===i(572))&&(e=t.config.audioElement),t[i(475)]=null;const s=!t[i(518)]&&t[i(479)].audio&&t[i(479)][i(504)][i(667)]!==i(572),n=t[i(479)][i(502)]&&t[i(479)].video.encryption!==i(572);t[i(596)]=0,t.keyFrameNeeded=!0,t[i(619)]=!1,t[i(617)]=Ir,t[i(585)]=0,t[i(602)]=0,t[i(490)]=-1,t[i(680)]=0,t[i(475)]=new Nn({node:e,mode:i(s?n?566:504:502),fps:60,drm:t}),Ar&&t[i(479)][i(661)]&&t.config.videoElement.play().then(()=>{})[i(527)](()=>{})}function Vr(t,i){const e=Or();return(Vr=function(t,i){return e[t-=461]})(t,i)}function Hr(t,i,e){const s=mr;if(t[s(474)][s(502)]){cn.mediaDumps[s(502)].in[s(510)]&&t[s(474)][s(502)][s(519)](new j([0,0,0,1,9,80]));const e=i[s(678)]/90;t[s(474)][s(502)][s(519)](new j(i[s(662)]),e)||(t[s(474)][s(502)]=null)}if(t[s(479)][s(502)]&&"clear"===t[s(479)][s(502)][s(667)])return null==e||e[s(533)](i),!1;const n=Date[s(658)]();if(i[s(601)]===s(651)){const e=cn.logLevel>=4;++t[s(633)]<(e?Number[s(612)]:5)&&(wr.debug(dn()+" "+i[s(601)]+", "+i.data.byteLength+s(622)+(s(657)+t.config[s(661)].currentTime)),e&&1===t.keyFrameLogCntr&&function(t,i,e){void 0===i&&(i=64),void 0===e&&(e=64);const s=mr,n=new j(t[s(662)]);let r="",h=0;for(let t=0;t<i&&t<n[s(553)];++t)r+=(n[t]<16?"0":"")+n[t][s(644)](16)+" ";if(h<n[s(553)])for(h<n[s(553)]-e&&(r+=s(594),h=n[s(553)]-e);h<n[s(553)];h++)r+=(n[h]<16?"0":"")+n[h][s(644)](16)+" ";wr[s(531)]("["+((t[s(601)]||s(504))+s(629))+s(501)+r[s(528)]())}(i,128,8)),t.keyFrameNeeded=!1,t[s(596)]=0,t[s(561)]=n+t[s(617)]}return t[s(596)]+=i[s(662)][s(627)],!t[s(491)]&&t[s(596)]>Pr&&(wr.info(s(623)),t[s(491)]=!0),t[s(475)]&&(function(t,i){const e=mr;0===t.videoStartTimestamp&&(t.videoStartTimestamp=i.timestamp,t[e(617)]=Ir,t[e(561)]=Date.now()+2e3);let s=null,n=!1;if(i[e(662)][e(627)]<=4)wr[e(517)]("Discarding corrupted video frame (too small)"),n=!0;else{const r=new j(i[e(662)],0,4);0!=r[0]||0!=r[1]||0!=r[2]||1!=r[3]?(wr.warn("Discarding corrupted video frame (no Annex B startcode)"),n=!0):(s=function(t,i){const e=Wn,s=new DataView(t.data),n=t.data[e(268)]-2,r=s[e(267)](n);if(r<n){let t=n-r;if(69!==s[e(264)](n-1))return Gn[e(271)](e(260)),null;if(s[e(264)](t++)>>>4!=1)return Gn[e(271)]("Unsupported SampleAuxInfo version"),null;const h=new j(r-2);let o=0,a=0;for(;t<n-1;){let i=s[e(264)](t++);a>1&&3===i&&(a=0,i=s.getUint8(t++)),0!==i?a=0:++a,h[o++]=i}const u=new DataView(h[e(256)]),c="cenc"===i?16:0,d=c+2+6*u[e(267)](c);return d+2>o?(Gn[e(271)](e(270)),null):{sai:h[e(255)](0,d),offset:n-r,seq:u[e(267)](d)}}return null}(i,t.config[e(502)][e(667)]),!s&&(wr.warn(e(498)),n=!0))}if(s)if(i[e(601)]===e(651))t[e(490)]=s.seq;else{if(-1===t[e(490)])return 0;{let r=s[e(660)]-t[e(490)];if(r<-32767&&(r+=65536),r<=0)return wr.debug(e(595)+t.prevSeqNum+", curr: "+s.seq),0;r>1&&(n=i[e(601)]!==e(651),wr[e(517)](e(618)+t[e(490)]+e(641)+s[e(660)]+", restart required: "+n)),t.prevSeqNum=s[e(660)]}}let r=0;n&&!t[e(475)][e(530)]&&(r=-1,t[e(475)][e(576)]());const h=(i[e(678)]-t[e(585)])/9e4;return s&&t[e(475)][e(473)]({video:new j(i[e(662)],0,s.offset),videoSampleAuxInfo:s[e(536)],timestamp:h})<0&&(r=-1,wr[e(517)](e(562)),Ur(t)),r>=0&&i[e(601)]===e(651)&&(t[e(680)]=h),r}(t,i)<0?t[s(491)]=!0:function(t){const i=mr,e=t[i(479)][i(661)];if(!e||e[i(685)][i(553)]<1||e.paused||e[i(691)]<Cr)return;const s=t[i(479)][i(571)];if(void 0===s||s<0)throw new m(i(493));const n=e[i(685)].end(e.buffered[i(553)]-1),r=1e3*(n-e[i(691)])|0;if(!t[i(483)]&&function(t,i,e){const s=mr;let n;n=i<3*e>>>2?.875:i<=e?1:i<7*e>>>2?1.125:i<9*e>>>2?1.25:i<11*e>>>2?1.375:1.5,n!==t.playbackRate&&(t[s(535)]=n)}(e,r,s),!(r<s+50||r<5*s>>>2))if(t[i(680)]>e[i(691)]+.1){const r=1e3*(n-t.lastKeyFrameTime)|0;r>40&&r>s-100?(wr.debug(dn()+i(499)+(e[i(691)]+i(668)+t.lastKeyFrameTime+" (")+(t[i(680)]-e[i(691)])+")"),e[i(691)]=t[i(680)]):wr[i(567)](dn()+" too close to seek, "+r)}else!t.keyFrameNeeded&&Date[i(658)]()>t[i(561)]&&r>s+100&&r>3*s>>>1&&(wr[i(567)](dn()+i(467)+r+i(688)),t[i(491)]=!0,t[i(617)]<16e3&&(t[i(617)]<<=1))}(t)),e?(!t[s(491)]||!xr)&&(i[s(662)]=function(t){return!Qn&&function(){const t=jn;Qn=new j([0,0,0,1,65,154,255,255])[t(372)],Xn[t(371)](new j([0,0,0,1,39,100,0,13,172,87,5,6,100,0,0,0,1,40,238,60,176,0,0,0,1,37,184,32,0,203,255,38,29,217,24,192,161,96,0,0,12,229,174,166,6,7,20,3,84,0,247,96,193,181,229,128,0,32,32])[t(372)]),Xn[t(371)](Xn[0][t(376)](0)),new j(Xn[1])[t(375)]([16,0,50],27)}(),t?Qn:(Kn^=1,Xn[Kn])}(t[s(491)]),e[s(533)](i)):t[s(491)]!=t.keyFrameNeededPosted&&(t[s(500)]&&t.worker.postMessage(t[s(491)]),t.keyFrameNeededPosted=t[s(491)]),t.keyFrameNeeded}function Wr(t,i,e){const s=mr;if(t.dbgMediaDump.audio){const e=i[s(678)]/48;t[s(474)][s(504)][s(519)](new j(i.data),e)||(t.dbgMediaDump[s(504)]=null)}return t[s(479)].audio&&t[s(479)].audio[s(667)]!==s(572)?i[s(662)][s(627)]>0&&function(t,i){const e=mr;var s;if(!t[e(475)]||t[e(518)])return 0;0===t[e(602)]&&(t.audioStartTimestamp=i[e(678)]);const n=(i[e(678)]-t[e(602)])/48e3;if((null===(s=t[e(479)][e(504)])||void 0===s?void 0:s[e(667)])===e(616))return t.jmuxer[e(473)]({audio:new j(i[e(662)]),timestamp:n});const r=function(t){const i=Wn,e=new DataView(t[i(261)]),s=t.data[i(268)]-2,n=e[i(267)](s);if(n<s){let t=s-n;if(69!==e[i(264)](s-1))return Gn.error("SampleAuxInfo corrupted (postfix not found)"),null;if(e[i(264)](t++)>>>4!=1)return Gn[i(271)]("Unsupported SampleAuxInfo version"),null;const r=new j(n-2);let h=0;for(;t<s-1;){const s=e[i(264)](t++);if(r[h++]=s,h>=16)break}return{sai:r,offset:s-n}}return null}(i);r?t.jmuxer[e(473)]({audio:new j(i[e(662)],0,r[e(669)]),audioSampleAuxInfo:r[e(536)],timestamp:n}):wr[e(690)](e(590))}(t,i):e&&e[s(533)](i),!1}function qr(t){const i=mr;var e,s,n,r,h;if(!t||typeof t!==i(672))throw new g(i(481));if(!(t.videoElement instanceof HTMLVideoElement))throw new g("Invalid videoElement, it must be an instance of HTMLVideoElement.");if(t[i(526)]&&!(t[i(526)]instanceof HTMLMediaElement))throw new g("Invalid audioElement, it must be an instance of HTMLMediaElement.");if(void 0!==t[i(571)]&&!Number[i(643)](t[i(571)]))throw new g("DRM config mediaBufferMs should be an integer.");let o=!1,a=!1,u=!1;const c=[i(616),"cenc",i(572)],d=["SW","HW"];for(const e of[t.video,t[i(504)]])if(e){if(!c[i(548)](e[i(667)]))throw new RangeError("DRM config encryption value must be one of: "+c[i(529)](", "));if(Ar&&e.encryption===i(591))throw new RangeError(i(635));if("clear"!==e[i(667)]){if(a=!0,e.keyId){if(!(e[i(639)]instanceof j)||16!==e[i(639)][i(553)])throw new g(i(679));u=!0}else if(Ar)throw new ReferenceError(i(558));if(e.iv&&(!(e.iv instanceof j)||16!==e.iv[i(553)]))throw new g(i(638));if(e[i(599)]&&!d[i(548)](e[i(599)]))throw new RangeError("DRM config robustness can only be one of: "+d[i(529)](", "));if(e===t.video&&e.codec!==i(630))throw new RangeError(i(681));Ar&&e===t.audio&&e[i(592)]===i(494)&&(o=!0,wr.warn(i(625))),t[i(601)]===i(589)&&("cenc"!==e[i(667)]&&wr[i(517)](i(664)+e[i(667)]+i(556)),void 0===t.sessionId||t[i(575)][i(548)]("f1")||wr[i(517)](i(472)+t[i(575)]+", a1d1f1 is recommended)."))}}if(a){const e=[Vn[i(652)],Vn[i(654)],Vn.Production];if(!e[i(548)](t[i(464)]))throw new RangeError("DRM config env value must be one of: "+e.join(", "));if(t[i(523)]&&typeof t.authToken!==i(514))throw new g(i(554)+typeof t[i(523)]+i(534));if(t[i(601)])if(Ar){if("FairPlay"!==t.type)throw new RangeError(i(637)+t[i(601)]+"). Safari only supports FairPlay.")}else if(Tr){if(t[i(601)]!==i(686)&&"ClearKey"!==t.type)throw new RangeError(i(637)+t[i(601)]+i(583))}else if(Sr&&t[i(601)]!==i(589)&&"Widevine"!==t[i(601)]&&t[i(601)]!==i(469))throw new RangeError(i(637)+t.type+i(582))}if(void 0!==t[i(665)]&&(cn[i(665)]=t[i(665)]),void 0!==t.mediaDumps){if(t.mediaDumps[i(502)]){const r=t[i(631)].video,h=cn[i(631)][i(502)];!(null===(e=r.in)||void 0===e)&&e.durationMs&&(h.in[i(675)]=r.in.durationMs),!(null===(s=r.in)||void 0===s)&&s.delimited&&(h.in.delimited=r.in[i(510)]),null!==(n=r[i(683)])&&void 0!==n&&n.durationMs&&(h[i(683)][i(675)]=r[i(683)].durationMs)}if(t[i(631)][i(504)]){const e=t[i(631)][i(504)],s=cn[i(631)][i(504)];!(null===(r=e.in)||void 0===r)&&r.durationMs&&(s.in.durationMs=e.in.durationMs),null!==(h=e.out)&&void 0!==h&&h[i(675)]&&(s[i(683)][i(675)]=e[i(683)].durationMs)}}let l=Nr[i(524)](t[i(661)]);!l&&(l=new Dr(t),Nr[i(587)](t.videoElement,l)),l[i(656)]=a,l.ignoreAudio=o,l[i(483)]=!o&&l[i(479)][i(504)]&&l[i(479)][i(504)][i(667)]!==i(572),a&&(l[i(479)][i(601)]||(l[i(479)][i(601)]=Ar?"FairPlay":i(686)),u||l.config.type===i(469)||(l[i(479)][i(601)]=i(469)),Fr(l),function(t){Gs(this,void 0,void 0,function*(){const i=Vr;var e,s;let n=t.config[i(661)];if((!t.config[i(502)]||t[i(479)].video[i(667)]===i(572))&&(n=t[i(479)][i(526)]),!n)throw new m(i(507));n[i(574)]="",n[i(557)]=null,yield n[i(484)](null);let r=null;try{r=yield od[i(461)](t[i(677)],t[i(603)])}catch(t){}if(!r&&t.emeConfig[0]){const n=null===(e=t.emeConfig[0][i(522)])||void 0===e?void 0:e[i(516)](i(537));if(void 0!==n&&n>=0){null===(s=t[i(603)][0][i(522)])||void 0===s||s.splice(n,1);try{r=yield od[i(461)](t[i(677)],t[i(603)])}catch(t){}}}if(!r){const e=i(634)+t[i(677)]+") failed";return n[i(569)](new CustomEvent(i(563),{detail:{message:e}})),void wr[i(690)](e)}let h=null;try{h=yield r.createMediaKeys()}catch(t){}if(!h){const e="createMediaKeys("+t.keySystem+") failed";return n.dispatchEvent(new CustomEvent(i(563),{detail:{message:e}})),void wr[i(690)](e)}if(t.serverCertificate)wr[i(567)](i(684)+t[i(552)][i(627)]+" bytes)"),yield h.setServerCertificate(t[i(552)]);else if(t[i(547)]){const e={method:i(487)},s=t.serverCertificateUrl;try{const r=yield t.config[i(645)]?t[i(479)][i(645)](s,e):fetch(s,e);if(!r.ok){const t="Server certificate fetch failed with error "+r[i(649)];return void n[i(569)](new CustomEvent(i(563),{detail:{message:t}}))}const o=yield r[i(581)]();wr[i(567)]("Fetched certificate from "+s+", "+o.byteLength+i(565)),yield h.setServerCertificate(o)}catch(t){const e=t.name+": "+t[i(628)];return wr[i(690)](e),void n[i(569)](new CustomEvent("rtcdrmerror",{detail:{message:e}}))}}yield n[i(484)](h),n[i(555)](i(492),pr),Ur(t)})}(l)),l[i(479)][i(661)][i(555)]("play",function(){const t=i;l[t(479)][t(661)][t(691)]>.5&&(l[t(561)]=Date[t(658)]())})}const zr=mr(655)+mr(671)+mr(477)+mr(564)+'),idrFrames.push(idrFrames[0].slice());let $=new Uint8Array(idrFrames[1]);$.set([16,0,50],27)}let idrPicIdToggle=0;function generateDummyFrame($){return(brokenFrame||initializeDummyFrames(),$)?brokenFrame:idrFrames[idrPicIdToggle^=1]}function audioTransformFunction($,e){postMessage({streamType:"audio",frame:{timestamp:$.timestamp,data:$.data}}),e.enqueue($)}let keyFrameNeeded=!1;function videoTransformFunction($,e){postMessage({streamType:"video",f'+mr(542)+mr(613)+mr(609)+mr(648)+mr(559);function Gr(t){const i=mr;if(0===Nr[i(506)])throw new g(i(568));let e;if(t&&t[i(661)])e=t.videoElement;else{if(1!==Nr[i(506)])throw new g("Several DRM configs detected, rtcDrmOnTrack have to be called with target DRM config.");e=Nr.keys()[i(646)]()[i(560)]}const s=Nr[i(524)](e);if(!s){let t="";throw Nr[i(480)]((i,e)=>{t+=e.id+", "}),t=t[i(550)](0,-2),new g(i(608)+e.id+i(515)+t+"]")}return s}function Xr(t,i){const e=mr;if(t&&t.config[e(661)]){const s=t.config[e(661)];if(s.buffered[e(553)]>0){const t=s.buffered[e(693)](s.buffered[e(553)]-1)-s.currentTime;i[e(611)]=i.jitterBufferDelayHint=i[e(520)]=t}u(Xr,1e3,t,i)}}const jr=at.get("View");jr.setLevel(at.DEBUG);const Qr={metadata:!1,enableDRM:!1,disableVideo:!1,disableAudio:!1,peerConfig:{autoInitStats:!0,statsIntervalMs:1e3}};t.Director=is,t.Logger=at,t.PeerConnection=xe,t.Publish=class extends Ds{async connect(t){void 0===t&&(t=Vs),Ws(t),this.options=f(l(l({},Vs),t),{peerConfig:l(l({},Vs.peerConfig),t.peerConfig),setSDPToPeer:!1}),this.options.metadata=this.options.metadata&&this.options.codec===ye.H264&&!this.options.disableVideo,await this.initConnection({migrate:!1})}async reconnect(t){var i,e;this.options.mediaStream=null!=(e=null==(i=this.webRTCPeer)?void 0:i.getTracks())?e:this.options.mediaStream,super.reconnect(t)}async replaceConnection(){var t,i;Us.info("Migrating current connection"),this.options.mediaStream=null!=(i=null==(t=this.webRTCPeer)?void 0:t.getTracks())?i:this.options.mediaStream,await this.initConnection({migrate:!0})}async record(){var t;this.recordingAvailable?(this.options.record=!0,await(null==(t=this.signaling)?void 0:t.cmd("record")),Us.info("Broadcaster start recording")):Us.error("Record not available")}async unrecord(){var t;this.recordingAvailable?(this.options.record=!1,await(null==(t=this.signaling)?void 0:t.cmd("unrecord")),Us.info("Broadcaster stop recording")):Us.error("Unrecord not available")}stop(){var t;super.stop(),null==(t=this.worker)||t.terminate(),this.worker=null}async initConnection(t){var i,e;let s,n;if(Us.debug("Broadcast option values: ",this.options),this.stopReconnection=!1,!this.options.mediaStream)throw Us.error("Error while broadcasting. MediaStream required"),new m("MediaStream required");if(!t.migrate&&this.isActive())throw Us.warn("Broadcast currently working"),new m("Broadcast currently working");try{n=await this.tokenGenerator(),this.options.peerConfig.iceServers=null==n?void 0:n.iceServers,this.options.peerConfig.encodedInsertableStreams=this.options.metadata}catch(t){throw Us.error("Error generating token."),t instanceof Ye&&(401!==t.status&&this.autoReconnect?this.reconnect():this.stopReconnection=!0),t}if(!n)throw Us.error("Error while broadcasting. Publisher data required"),new m("Publisher data required");const r=as(n.jwt);if(this.streamName=r.millicast.streamName,this.recordingAvailable=r[ds.atob("bWlsbGljYXN0")].record,this.options.record&&!this.recordingAvailable)throw Us.error("Error while broadcasting. Record option detected but recording is not available"),new m("Record option detected but recording is not available");const h=new je({streamName:this.streamName,url:"".concat(n.urls[0],"?token=").concat(n.jwt)}),o=t.migrate?new xe:this.webRTCPeer;await o.createRTCPeer(this.options.peerConfig,Se),null==(i=this.stopReemitingWebRTCPeerInstanceEvents)||i.call(this),null==(e=this.stopReemitingSignalingInstanceEvents)||e.call(this),this.stopReemitingWebRTCPeerInstanceEvents=gt(o,this,[ke.connectionStateChange]),this.stopReemitingSignalingInstanceEvents=gt(h,this,[Xe]);const a=o.getRTCLocalSDP(this.options),u=h.connect();s=await Promise.all([a,u]);const c=s[0];this.options.metadata&&(this.worker||(this.worker=new Fs),this.getRTCPeerConnection().getSenders().forEach(t=>{if(Ms)t.transform=new RTCRtpScriptTransform(this.worker,{name:"senderTransform",codec:this.options.codec});else if(Bs){const{readable:i,writable:e}=t.createEncodedStreams();this.worker.postMessage({action:"insertable-streams-sender",codec:this.options.codec,readable:i,writable:e},[i,e])}}));let d=this.signaling;this.signaling=h;const l=this.signaling.publish(c,this.options),f=o.peer.setLocalDescription(o.sessionDescription);s=await Promise.all([l,f]);let v=s[0];!this.options.disableVideo&&this.options.bandwidth>0&&(v=o.updateBandwidthRestriction(v,this.options.bandwidth)),await o.setRTCRemoteSDP(v),Us.info("Broadcasting to streamName: ",this.streamName);let _=this.webRTCPeer;this.webRTCPeer=o,this.setReconnect(),t.migrate&&this.webRTCPeer.on(ke.connectionStateChange,t=>{var i,e;["connected","disconnected","failed","closed"].includes(t)&&(null==(i=null==d?void 0:d.close)||i.call(d),null==(e=null==_?void 0:_.closeRTCPeer)||e.call(_),d=_=null)})}sendMetadata(t,i){var e;if(void 0===i&&(i="d40e38ea-d419-4c62-94ed-20ac37b4e4fa"),null!=(e=this.options)&&e.metadata&&this.worker)this.worker.postMessage({action:"metadata-sei-user-data-unregistered",uuid:i,payload:t});else{let t="Could not send metadata due to:";this.options?this.options.metadata?this.worker||(t+="\n- Stream not being published."):(t+="\n- Metadata option is not enabled.",this.options.codec!==ye.H264&&(t+="\n- Incompatible codec. Only H264 available."),this.options.disableVideo&&(t+="\n- Video disabled.")):t+="\n- Stream not being published.",Us.warn(t)}}constructor(t,i,e=!0){t&&Us.warn("The streamName property has been deprecated. In a future release, this will be removed. Please do not rely on this value. Instead, set via token generator"),super(null,i,Us,e)}},t.Signaling=je,t.View=class extends Ds{async connect(t){void 0===t&&(t=Qr),this.options=f(l(l({},Qr),t),{peerConfig:l(l({},Qr.peerConfig),t.peerConfig),setSDPToPeer:!1}),this.eventQueue.length=0,await this.initConnection({migrate:!1})}async select(t){void 0===t&&(t={}),jr.debug("Viewer select layer values: ",t),await this.signaling.cmd("select",{layer:t}),jr.info("Connected to streamName: ",this.streamName)}async addRemoteTrack(t,i){jr.info("Viewer adding remote track",t);const e=await this.webRTCPeer.addRemoteTrack(t,i);for(const t of i)t.addTrack(e.receiver.track);return e}async project(t,i){for(const t of i){if(!t.trackId&&!t.media)throw jr.error("Error in projection mapping, trackId or mediaId must be set"),new m("Error in projection mapping, trackId or mediaId must be set");const i=this.webRTCPeer.getRTCPeer();if(t.mediaId&&!i.getTransceivers().find(i=>i.mid===t.mediaId.toString()))throw jr.error("Error in projection mapping, ".concat(t.mediaId," mid not found in local transceivers")),new m("Error in projection mapping, ".concat(t.mediaId," mid not found in local transceivers"))}jr.debug("Viewer project source: layer mappings: ",t,i),await this.signaling.cmd("project",{sourceId:t,mapping:i}),jr.info("Projection done")}async unproject(t){jr.debug("Viewer unproject mediaIds: ",t),await this.signaling.cmd("unproject",{mediaIds:t}),jr.info("Unprojection done")}async replaceConnection(){jr.info("Migrating current connection"),await this.initConnection({migrate:!0})}stop(){var t,i;super.stop(),null==(t=this.drmOptionsMap)||t.clear(),this.DRMProfile=null,null==(i=this.worker)||i.terminate(),this.worker=null,this.payloadTypeCodec={},this.tracksMidValues={},this.eventQueue.length=0}async initConnection(t){var i;let e,s;if(jr.debug("Viewer connect options values: ",this.options),this.stopReconnection=!1,t.abrConfiguration&&t.abrConfiguration.metadata){const i=t.abrConfiguration.metadata.bitrate;if(!i||i<0)throw new m("Invalid bitrate ".concat(i," supplied for ABR. The value must be a non-negative integer value."))}if(!t.migrate&&this.isActive())throw jr.warn("Viewer currently subscribed"),new m("Viewer currently subscribed");try{s=await this.tokenGenerator(),this.options.peerConfig.iceServers=null==s?void 0:s.iceServers,this.options.peerConfig.encodedInsertableStreams=Bs&&(this.options.enableDRM||this.options.metadata)}catch(t){throw jr.error("Error generating token."),t instanceof Ye&&(401!==t.status&&this.autoReconnect?this.reconnect():this.stopReconnection=!0),t}if(!s)throw jr.error("Error while subscribing. Subscriber data required"),new m("Subscriber data required");const n=as(s.jwt);this.streamName=n.millicast.streamName;const r=new je({streamName:this.streamName,url:"".concat(s.urls[0],"?token=").concat(s.jwt)});s.subscriberToken&&(this.subscriberToken=s.subscriberToken);const h=t.migrate?new xe:this.webRTCPeer;await h.createRTCPeer(this.options.peerConfig),null==(i=this.stopReemitingWebRTCPeerInstanceEvents)||i.call(this),this.stopReemitingWebRTCPeerInstanceEvents=gt(h,this,w.values(ke).filter(t=>t!==ke.track)),this.options.metadata&&(this.worker||(this.worker=new Fs),this.worker.onmessage=t=>{if("metadata"===t.data.event){const i=new TextDecoder,e=t.data.metadata;if(e.mid=t.data.mid,e.track=this.tracksMidValues[t.data.mid],e.uuid){const t=e.uuid;e.uuid=t.reduce((t,i)=>t+i.toString(16).padStart(2,"0"),""),e.uuid=e.uuid.replace(/(.{8})(.{4})(.{4})(.{4})(.{12})/,"$1-$2-$3-$4-$5")}if(e.timecode&&(e.timecode=new Date(i.decode(e.timecode))),e.unregistered){const t=i.decode(e.unregistered);try{const i=JSON.parse(t);e.unregistered=i}catch(t){jr.info("The content could not be converted to JSON, returning raw bytes instead")}}this.emit("metadata",e)}}),h.on(ke.track,t=>{this.isMainStreamActive?this.onTrackEvent(t):this.eventQueue.push(t)}),r.on(Xe,async t=>{if(this.isMainStreamActive||"active"!==t.name)"inactive"===t.name&&this.isMainStreamActive&&this.mainSourceId===t.data.sourceId&&(this.isMainStreamActive=!1),this.emit(Xe,t);else{if(this.mainSourceId=t.data.sourceId,!this.DRMProfile&&t.data.encryption){const t=await this.tokenGenerator();t.drmObject&&(this.DRMProfile=t.drmObject)}for(this.emit(Xe,t),this.isMainStreamActive=!0;this.eventQueue.length>0;)this.onTrackEvent(this.eventQueue.shift())}});const o=h.getRTCLocalSDP(f(l({},this.options),{stereo:!0})),a=r.connect();e=await Promise.all([o,a]);const c=e[0];let d=this.signaling;this.signaling=r;const v=this.signaling.subscribe(c,f(l({},this.options),{vad:this.options.multiplexedAudioTracks>0})),_=h.peer.setLocalDescription(h.sessionDescription);e=await Promise.all([v,_]);const g=e[0];this.payloadTypeCodec=me.getCodecPayloadType(g),await h.setRTCRemoteSDP(g),jr.info("Connected to streamName: ",this.streamName);let p=this.webRTCPeer;this.webRTCPeer=h,this.setReconnect(),t.migrate&&this.webRTCPeer.on(ke.connectionStateChange,t=>{var i,e;"connected"===t?u(()=>{var t,i;null==(t=null==d?void 0:d.close)||t.call(d),null==(i=null==p?void 0:p.closeRTCPeer)||i.call(p),d=p=null,jr.info("Current connection migrated")},1e3):["disconnected","failed","closed"].includes(t)&&(null==(i=null==d?void 0:d.close)||i.call(d),null==(e=null==p?void 0:p.closeRTCPeer)||e.call(p),d=p=null)})}onTrackEvent(t){var i,e,n;if(this.tracksMidValues[null==(i=t.transceiver)?void 0:i.mid]=t.track,this.isDRMOn){const i=t.transceiver.mid,e=this.getDRMConfiguration(i);try{!function(t,i){const e=mr;var n,r;const h=t[e(614)][e(503)];h===e(502)&&(t[e(642)][e(611)]=t.receiver[e(505)]=t[e(642)][e(520)]=0);const o=Gr(i),a=o[e(479)][e(661)],u=o.config.audioElement;if(o.enabled){const i=""+e(yr?525:470);if(o[e(479)][e(488)])wr[e(567)](i+e(544));else{if(wr[e(567)](e(676)+i+e(653)),h===e(502)){const t=cn[e(631)][e(502)].in[e(675)];t>0&&(o.dbgMediaDump[e(502)]=new fn(e(502),e(632),t))}else if(h===e(504)){const t=cn[e(631)][e(504)].in[e(675)];t>0&&(o[e(474)][e(504)]=new fn(e(504),e(494),t))}if(yr){if(o[e(500)]=function(t){const i=mr,e=s[i(551)]||s.webkitURL,n=s[i(538)],r=s.Worker;if(!(e&&n&&r&&t))return null;const h=new n([t]);return new r(e[i(610)](h))}(zr),null==o[e(500)])throw new m(e(486));o[e(500)][e(463)]=t=>{const i=e;t[i(662)][i(497)]===i(502)?Hr(o,t.data.frame,null):Wr(o,t.data.frame,null)},t[e(642)][e(541)]=new RTCRtpScriptTransform(o.worker,{operation:h})}else{const i=h===e(502)?Hr:Wr,s={drm:o,transform:(t,e)=>{i(o,t,e)}},n=t[e(642)][e(470)](),r=new TransformStream({transform:s[e(541)][e(545)](s)}),{readable:a,writable:u}=n;a[e(512)](r)[e(640)](u)}}if("audio"===h&&(null===(n=o.config[e(504)])||void 0===n?void 0:n.encryption)===e(572)){if(!u)return void wr[e(517)](e(579));u[e(557)]!==t[e(546)][0]&&(u[e(557)]=t.streams[0]),o[e(479)][e(661)]&&(t[e(642)].playoutDelayHint=t.receiver.jitterBufferDelayHint=t[e(642)][e(520)]=o[e(479)][e(571)],Xr(o,t[e(642)]))}else h===e(502)&&(null===(r=o[e(479)][e(502)])||void 0===r?void 0:r.encryption)===e(572)&&a[e(557)]!==t[e(546)][0]&&(a.srcObject=t[e(546)][0])}else a[e(557)]!==t[e(546)][0]&&(a.srcObject=t[e(546)][0])}(t,e)}catch(t){jr.error("Failed to apply DRM on media Id:",i,"error is: ",t),this.emit("error",new m("Failed to apply DRM on media Id: "+i+" error is: "+t))}this.worker||(this.worker=new Fs),this.worker.addEventListener("message",t=>{"complete"===t.data.event&&function(t,i,e){const s=mr,n=Gr(e);t[s(601)]?Hr(n,t,i):Wr(n,t,i)}(t.data.frame,null,e)})}if(this.options.metadata)if(Ms)t.receiver.transform=new RTCRtpScriptTransform(this.worker,{name:"receiverTransform",payloadTypeCodec:l({},this.payloadTypeCodec),codec:this.options.metadata&&"h264",mid:null==(e=t.transceiver)?void 0:e.mid});else if(Bs){const{readable:i,writable:e}=t.receiver.createEncodedStreams();this.worker.postMessage({action:"insertable-streams-receiver",payloadTypeCodec:l({},this.payloadTypeCodec),codec:this.options.metadata&&"h264",mid:null==(n=t.transceiver)?void 0:n.mid,readable:i,writable:e},[i,e])}this.emit(ke.track,t)}getDRMConfiguration(t){return this.drmOptionsMap?this.drmOptionsMap.get(t):null}async onRtcDrmFetch(t,i){return i.headers||(i.headers=new Headers),i.headers.get("x-dt-custom-data")&&i.headers.delete("x-dt-custom-data"),this.subscriberToken?i.headers.append("Authorization","Bearer ".concat(this.subscriberToken)):jr.warn("onRtcDrmFetch: no subscriberToken"),fetch(t,i)}configureDRM(t){if(!t)throw new m("Required DRM options is not provided");this.drmOptionsMap||(this.drmOptionsMap=new Map);const i={merchant:"dolby",environment:Vn.Production,customTransform:this.options.metadata,videoElement:t.videoElement,audioElement:t.audioElement,video:{codec:"H264",encryption:"cbcs",keyId:qs(t.videoEncryptionParams.keyId),iv:qs(t.videoEncryptionParams.iv)},audio:{codec:"opus",encryption:"clear"},onFetch:this.onRtcDrmFetch.bind(this)};t.mediaBufferMs&&(i.mediaBufferMs=t.mediaBufferMs),this.DRMProfile&&(this.DRMProfile.playReadyUrl&&(i.prLicenseUrl=this.DRMProfile.playReadyUrl),this.DRMProfile.widevineUrl&&(i.wvLicenseUrl=this.DRMProfile.widevineUrl),this.DRMProfile.fairPlayUrl&&(i.fpsLicenseUrl=this.DRMProfile.fairPlayUrl),this.DRMProfile.fairPlayCertUrl&&(i.fpsCertificateUrl=this.DRMProfile.fairPlayCertUrl));try{qr(i),this.drmOptionsMap.set(t.videoMid,i),t.audioMid&&this.drmOptionsMap.set(t.audioMid,i),i.videoElement.addEventListener("rtcdrmerror",t=>{jr.error("DRM error: ",t.detail.message,"in video element:",i.videoElement.id),this.emit("error",new m(t.detail.message))})}catch(i){jr.error("Failed to configure DRM with options:",t,"error is:",i)}}removeDRMConfiguration(t){var i;null==(i=this.drmOptionsMap)||i.delete(t)}get isDRMOn(){return!!this.drmOptionsMap&&this.drmOptionsMap.size>0}exchangeDRMConfiguration(t,i){const e=this.getDRMConfiguration(t),s=this.getDRMConfiguration(i);if(null===e)throw new m("No DRM configuration found for "+t);if(null===s)throw new m("No DRM configuration found for "+i);zs(e.video,s.video,"keyId"),zs(e.video,s.video,"iv");try{qr(e)}catch(t){jr.error("Failed to configure DRM with options:",e,"error is:",t)}try{qr(s)}catch(t){jr.error("Failed to configure DRM with options:",s,"error is:",t)}}constructor(t,i,e=null,s=!0){t&&jr.warn("The streamName property has been deprecated. In a future release, this will be removed. Please do not rely on this value. Instead, set via token generator"),super(null,i,jr,s),this.payloadTypeCodec={},this.tracksMidValues={},this.drmOptionsMap=null,this.eventQueue=[],this.isMainStreamActive=!1,e&&(this.on(ke.track,t=>{e.srcObject=t.streams[0]}),jr.warn("The mediaElement property has been deprecated. In a future release, this will be removed. Please do not rely on this value. Instead, do this in either the `track` or the `active` broadcast event."))}},w.defineProperty(t,Io.toStringTag,{value:"Module"})})}),yd=E(t=>{"use strict";function i(){const t=wd();return i=function(){return t},t}r(),w.defineProperty(t,"__esModule",{value:!0}),function(t,i){for(var e in i)w.defineProperty(t,e,{enumerable:!0,get:w.getOwnPropertyDescriptor(i,e).get})}(t,{get Director(){return i().Director},get Logger(){return i().Logger},get View(){return i().View}})}),bd=E((t,i)=>{r(),i.exports=function(){var t=new Float32Array(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}}),Ad=E((t,i)=>{r(),i.exports=function(t,i){var e=i[0],s=i[1],n=i[2],r=i[3],h=e+e,o=s+s,a=n+n,u=e*h,c=s*h,d=s*o,l=n*h,f=n*o,v=n*a,_=r*h,g=r*o,p=r*a;return t[0]=1-d-v,t[1]=c+p,t[2]=l-g,t[3]=0,t[4]=c-p,t[5]=1-u-v,t[6]=f+_,t[7]=0,t[8]=l+g,t[9]=f-_,t[10]=1-u-d,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}}),Sd=E((t,i)=>{r(),i.exports=function(t,i,e){var s,n,r,h=e[0],o=e[1],a=e[2],u=_.sqrt(h*h+o*o+a*a);if(_.abs(u)<1e-6)return null;return h*=u=1/u,o*=u,a*=u,s=_.sin(i),n=_.cos(i),r=1-n,t[0]=h*h*r+n,t[1]=o*h*r+a*s,t[2]=a*h*r-o*s,t[3]=0,t[4]=h*o*r-a*s,t[5]=o*o*r+n,t[6]=a*o*r+h*s,t[7]=0,t[8]=h*a*r+o*s,t[9]=o*a*r-h*s,t[10]=a*a*r+n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}}),Td=E((t,i)=>{r(),i.exports=function(t,i){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}}),kd=E((t,i)=>{r(),i.exports=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}}),Ed=E((t,i)=>{r(),i.exports=function(t,i){var e=i[0],s=i[1],n=i[2],r=i[3],h=i[4],o=i[5],a=i[6],u=i[7],c=i[8],d=i[9],l=i[10],f=i[11],v=i[12],_=i[13],g=i[14],p=i[15],m=e*o-s*h,w=e*a-n*h,y=e*u-r*h,b=s*a-n*o,A=s*u-r*o,S=n*u-r*a,T=c*_-d*v,k=c*g-l*v,E=c*p-f*v,x=d*g-l*_,P=d*p-f*_,I=l*p-f*g,C=m*I-w*P+y*x+b*E-A*k+S*T;if(!C)return null;return C=1/C,t[0]=(o*I-a*P+u*x)*C,t[1]=(n*P-s*I-r*x)*C,t[2]=(_*S-g*A+p*b)*C,t[3]=(l*A-d*S-f*b)*C,t[4]=(a*E-h*I-u*k)*C,t[5]=(e*I-n*E+r*k)*C,t[6]=(g*y-v*S-p*w)*C,t[7]=(c*S-l*y+f*w)*C,t[8]=(h*P-o*E+u*T)*C,t[9]=(s*E-e*P-r*T)*C,t[10]=(v*A-_*y+p*m)*C,t[11]=(d*y-c*A-f*m)*C,t[12]=(o*k-h*x-a*T)*C,t[13]=(e*x-s*k+n*T)*C,t[14]=(_*w-v*b-g*m)*C,t[15]=(c*b-d*w+l*m)*C,t}}),xd=E((t,i)=>{r(),i.exports=function(t,i,e){var s=i[0],n=i[1],r=i[2],h=i[3],o=i[4],a=i[5],u=i[6],c=i[7],d=i[8],l=i[9],f=i[10],v=i[11],_=i[12],g=i[13],p=i[14],m=i[15],w=e[0],y=e[1],b=e[2],A=e[3];return t[0]=w*s+y*o+b*d+A*_,t[1]=w*n+y*a+b*l+A*g,t[2]=w*r+y*u+b*f+A*p,t[3]=w*h+y*c+b*v+A*m,w=e[4],y=e[5],b=e[6],A=e[7],t[4]=w*s+y*o+b*d+A*_,t[5]=w*n+y*a+b*l+A*g,t[6]=w*r+y*u+b*f+A*p,t[7]=w*h+y*c+b*v+A*m,w=e[8],y=e[9],b=e[10],A=e[11],t[8]=w*s+y*o+b*d+A*_,t[9]=w*n+y*a+b*l+A*g,t[10]=w*r+y*u+b*f+A*p,t[11]=w*h+y*c+b*v+A*m,w=e[12],y=e[13],b=e[14],A=e[15],t[12]=w*s+y*o+b*d+A*_,t[13]=w*n+y*a+b*l+A*g,t[14]=w*r+y*u+b*f+A*p,t[15]=w*h+y*c+b*v+A*m,t}}),Pd=E((t,i)=>{r(),i.exports=function(t,i,e,s,n){var r=1/_.tan(i/2),h=1/(s-n);return t[0]=r/e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(n+s)*h,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*n*s*h,t[15]=0,t}}),Id=E((t,i)=>{r(),i.exports=function(t,i,e,s){var n,r,h,o,a,u,c,d,l,f,v,g,p,m,w,y,b,A,S,T,k,E,x,P,I=s[0],C=s[1],R=s[2],D=_.sqrt(I*I+C*C+R*R);if(_.abs(D)<1e-6)return null;I*=D=1/D,C*=D,R*=D,n=_.sin(e),r=_.cos(e),h=1-r,o=i[0],a=i[1],u=i[2],c=i[3],d=i[4],l=i[5],f=i[6],v=i[7],g=i[8],p=i[9],m=i[10],w=i[11],y=I*I*h+r,b=C*I*h+R*n,A=R*I*h-C*n,S=I*C*h-R*n,T=C*C*h+r,k=R*C*h+I*n,E=I*R*h+C*n,x=C*R*h-I*n,P=R*R*h+r,t[0]=o*y+d*b+g*A,t[1]=a*y+l*b+p*A,t[2]=u*y+f*b+m*A,t[3]=c*y+v*b+w*A,t[4]=o*S+d*T+g*k,t[5]=a*S+l*T+p*k,t[6]=u*S+f*T+m*k,t[7]=c*S+v*T+w*k,t[8]=o*E+d*x+g*P,t[9]=a*E+l*x+p*P,t[10]=u*E+f*x+m*P,t[11]=c*E+v*x+w*P,i!==t&&(t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15]);return t}}),Cd=E((t,i)=>{r(),i.exports=function(t,i,e){var s,n,r,h,o,a,u,c,d,l,f,v,_=e[0],g=e[1],p=e[2];i===t?(t[12]=i[0]*_+i[4]*g+i[8]*p+i[12],t[13]=i[1]*_+i[5]*g+i[9]*p+i[13],t[14]=i[2]*_+i[6]*g+i[10]*p+i[14],t[15]=i[3]*_+i[7]*g+i[11]*p+i[15]):(s=i[0],n=i[1],r=i[2],h=i[3],o=i[4],a=i[5],u=i[6],c=i[7],d=i[8],l=i[9],f=i[10],v=i[11],t[0]=s,t[1]=n,t[2]=r,t[3]=h,t[4]=o,t[5]=a,t[6]=u,t[7]=c,t[8]=d,t[9]=l,t[10]=f,t[11]=v,t[12]=s*_+o*g+d*p+i[12],t[13]=n*_+a*g+l*p+i[13],t[14]=r*_+u*g+f*p+i[14],t[15]=h*_+c*g+v*p+i[15]);return t}});r();var me=function(t){return t[t.CONFIGURATION_ERROR=1e3]="CONFIGURATION_ERROR",t[t.LICENSE_ERROR=2e3]="LICENSE_ERROR",t[t.LICENSE_INVALID_DOMAIN=2001]="LICENSE_INVALID_DOMAIN",t[t.LICENSE_INVALID_SOURCE=2002]="LICENSE_INVALID_SOURCE",t[t.LICENSE_EXPIRED=2003]="LICENSE_EXPIRED",t[t.LICENSE_INVALID_FEATURE=2004]="LICENSE_INVALID_FEATURE",t[t.SOURCE_INVALID=3e3]="SOURCE_INVALID",t[t.SOURCE_NOT_SUPPORTED=3001]="SOURCE_NOT_SUPPORTED",t[t.MANIFEST_LOAD_ERROR=4e3]="MANIFEST_LOAD_ERROR",t[t.MANIFEST_CORS_ERROR=4001]="MANIFEST_CORS_ERROR",t[t.MANIFEST_PARSE_ERROR=4002]="MANIFEST_PARSE_ERROR",t[t.MEDIA_NOT_SUPPORTED=5e3]="MEDIA_NOT_SUPPORTED",t[t.MEDIA_LOAD_ERROR=5001]="MEDIA_LOAD_ERROR",t[t.MEDIA_DECODE_ERROR=5002]="MEDIA_DECODE_ERROR",t[t.MEDIA_AVPLAYER_ERROR=5003]="MEDIA_AVPLAYER_ERROR",t[t.MEDIA_ABORTED=5004]="MEDIA_ABORTED",t[t.NETWORK_ERROR=6e3]="NETWORK_ERROR",t[t.NETWORK_TIMEOUT=6001]="NETWORK_TIMEOUT",t[t.CONTENT_PROTECTION_ERROR=7e3]="CONTENT_PROTECTION_ERROR",t[t.CONTENT_PROTECTION_NOT_SUPPORTED=7001]="CONTENT_PROTECTION_NOT_SUPPORTED",t[t.CONTENT_PROTECTION_CONFIGURATION_MISSING=7002]="CONTENT_PROTECTION_CONFIGURATION_MISSING",t[t.CONTENT_PROTECTION_CONFIGURATION_INVALID=7003]="CONTENT_PROTECTION_CONFIGURATION_INVALID",t[t.CONTENT_PROTECTION_INITIALIZATION_INVALID=7004]="CONTENT_PROTECTION_INITIALIZATION_INVALID",t[t.CONTENT_PROTECTION_CERTIFICATE_ERROR=7005]="CONTENT_PROTECTION_CERTIFICATE_ERROR",t[t.CONTENT_PROTECTION_CERTIFICATE_INVALID=7006]="CONTENT_PROTECTION_CERTIFICATE_INVALID",t[t.CONTENT_PROTECTION_LICENSE_ERROR=7007]="CONTENT_PROTECTION_LICENSE_ERROR",t[t.CONTENT_PROTECTION_LICENSE_INVALID=7008]="CONTENT_PROTECTION_LICENSE_INVALID",t[t.CONTENT_PROTECTION_KEY_EXPIRED=7009]="CONTENT_PROTECTION_KEY_EXPIRED",t[t.CONTENT_PROTECTION_KEY_MISSING=7010]="CONTENT_PROTECTION_KEY_MISSING",t[t.CONTENT_PROTECTION_OUTPUT_RESTRICTED=7011]="CONTENT_PROTECTION_OUTPUT_RESTRICTED",t[t.CONTENT_PROTECTION_INTERNAL_ERROR=7012]="CONTENT_PROTECTION_INTERNAL_ERROR",t[t.SUBTITLE_LOAD_ERROR=8e3]="SUBTITLE_LOAD_ERROR",t[t.SUBTITLE_CORS_ERROR=8001]="SUBTITLE_CORS_ERROR",t[t.SUBTITLE_PARSE_ERROR=8002]="SUBTITLE_PARSE_ERROR",t[t.VR_PLATFORM_UNSUPPORTED=9e3]="VR_PLATFORM_UNSUPPORTED",t[t.VR_PRESENTATION_ERROR=9001]="VR_PRESENTATION_ERROR",t[t.AD_ERROR=1e4]="AD_ERROR",t[t.AD_BLOCKER_DETECTED=10001]="AD_BLOCKER_DETECTED",t[t.FULLSCREEN_ERROR=11e3]="FULLSCREEN_ERROR",t[t.PICTURE_IN_PICTURE_ERROR=11001]="PICTURE_IN_PICTURE_ERROR",t[t.CACHE_SOURCE_ERROR=12e3]="CACHE_SOURCE_ERROR",t[t.CACHE_CONTENT_PROTECTION_ERROR=12001]="CACHE_CONTENT_PROTECTION_ERROR",t[t.THEO_LIVE_UNKNOWN_ERROR=13e3]="THEO_LIVE_UNKNOWN_ERROR",t[t.THEO_LIVE_CHANNEL_NOT_FOUND=13001]="THEO_LIVE_CHANNEL_NOT_FOUND",t[t.THEO_LIVE_END_OF_DEMO=13002]="THEO_LIVE_END_OF_DEMO",t[t.THEO_LIVE_ANALYTICS_ERROR=13003]="THEO_LIVE_ANALYTICS_ERROR",t}({}),L=function(t){return t[t.CONFIGURATION=1]="CONFIGURATION",t[t.LICENSE=2]="LICENSE",t[t.SOURCE=3]="SOURCE",t[t.MANIFEST=4]="MANIFEST",t[t.MEDIA=5]="MEDIA",t[t.NETWORK=6]="NETWORK",t[t.CONTENT_PROTECTION=7]="CONTENT_PROTECTION",t[t.SUBTITLE=8]="SUBTITLE",t[t.VR=9]="VR",t[t.AD=10]="AD",t[t.FULLSCREEN=11]="FULLSCREEN",t[t.CACHE=12]="CACHE",t[t.THEOLIVE=13]="THEOLIVE",t}({});!function(t){t.fromCode=function(i){const e=_.floor(i/1e3);if(e in t)return e;throw new g("Invalid error code: "+i)}}(L||(L={})),r(),r(),r(),r(),r(),r(),r(),r();var W=function(t){return t.Sv="web",t.Tv="android",t.Ev="android-tv",t.xv="ios",t.Pv="tvos",t.Iv="chromecast",t.Cv="theoliveweb",t}({});var F=od?od.userAgent:"",Rd=F.match(/chrome\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/i),Dd=F.match(/Edg\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/i),Nd=F.match(/Android ([0-9\.]+)/i),Bd=F.match(/Windows NT ([0-9\.]+)/i),Md=F.match(/(Version)\/((\d+)\.(\d+)(?:\.(\d+))?).*Safari/),Ld=F.match(/Firefox\/([0-9\.]+)/i),Od=F.match(/OPR\/(\d+\.\d+)/i),Fd=F.match(/Tizen ([0-9\.]+)/i),Ud=F.match(/(iPhone OS|iPad OS|iPod OS|Mac OS X) (\d+)_(\d+)_?(\d+)?/),Vd=F.match(/HbbTV\/([0-9.]+)/i),Hd=F.match(/(AFT.*) Build/i),Wd=class{get Ke(){return this.Rv}get Dv(){return this.Nv}get Bv(){return this.Mv}get Lv(){return this.Ov}get Fv(){return this.Uv}get Vv(){return this.Hv}get Wv(){return this.qv}get zv(){return this.Gv}get Xv(){return this.Qv}get Kv(){return this.Yv}get Jv(){return this.Zv}get ru(){return this.$v}get t_(){return this.i_}get e_(){return this.s_||this.n_}get vd(){return this.r_}get Ks(){return this.h_}get o_(){return this.a_}get u_(){return this.c_}get d_(){var t;return null!=(t=this.l_)?t:this.f_}get v_(){return this.__}get g_(){var t;return(null==(t=s.chrome)?void 0:t.webview)&&this.p_>0}get m_(){return this.p_}get w_(){return this.y_}get b_(){return this.A_}get S_(){return this.T_}get k_(){return this.E_}get x_(){return this.P_}get I_(){return this.C_}get IS_FIRETV_AFTMM(){return"AFTMM"===this.R_}get D_(){return this.N_}get B_(){return this.M_}get L_(){return this.O_}get F_(){return this.U_}get V_(){return this.H_}get W_(){return this.q_}get z_(){return this.G_}get X_(){return this.j_}get Q_(){return 0===this.K_&&zs.ru?this.i_:this.K_}get Y_(){return this.J_}get Z_(){return this.eg}get rg(){return this.hg}get og(){return this.ag}get cg(){return!(!this.S_&&!this.w_)&&this.d_<=56}get dg(){return this.fg}get vg(){return this._g}get gg(){return this.pg}get wg(){return this.yg}get Ag(){return this.Sg}get Tg(){return this.Eg}get xg(){return this.Pg}get Ig(){return this.Cg}get Rg(){return this.Dg}get IS_IOS_CHROME(){return this.Ng}constructor(){this.Rv=Boolean("ontouchstart"in self||self.DocumentTouch&&h instanceof self.DocumentTouch||od&&od.msMaxTouchPoints),this.Nv=/(mac\sos\sx)\s?([\w\s\.]+\w)*/i.test(F)||/(macintosh|mac(?=_powerpc)\s)/i.test(F),this.Mv=/Windows NT/i.test(F),this.Ov=Bd?C(Bd[1]):0,this.Uv=/Android/i.test(F),this.Hv=Nd?C(Nd[1]):0,this.qv=/windows phone (8|8\.1)/i.test(F),this.Gv=/iPhone/i.test(F),this.Qv=/iPad/i.test(F),this.Yv=this.Nv&&this.Rv&&!this.Qv,this.Zv=/iPod/i.test(F),this.r_=/Mobile Safari/i.test(F),this.s_=/EOS\d*STB/i.test(F),this.n_=/APP\d*STB/i.test(F),this.$v=(this.Gv||this.Qv||this.Yv||this.Zv)&&!this.qv,this.i_=Ud?C(Ud[2]):0,this.h_=this.qv||this.$v||this.Uv||this.r_,this.a_=/CriOS/i.test(F),this.c_=Boolean(self.chrome&&/google/i.test(od.vendor))||this.a_,this.__=this.c_&&/Edg\//i.test(od.userAgent),this.p_=Dd?x(Dd[1],10):0,this.Ng=Boolean(/CriOS/i.test(F)),this.Dg=Boolean(self.chrome||/Chrome/i.test(F)||this.Ng),this.f_=Rd?x(Rd[1],10):0,this.y_=/SMART-TV.*Tizen/i.test(F),this.A_=Fd?C(Fd[1]):0,this.l_=this.A_>0?function(t){return t>=8?108:t>=7?94:t>=6.5?85:t>=6?76:t>=5.5?69:t>=5?63:t>=4?56:t>=3?47:0}(this.A_):void 0,this.T_=/webos|web0s/i.test(F),this.E_=/HbbTV/i.test(F),this.P_=!!Vd&&function(t){if(!t)return!1;const i=t.split(".").map(Number);return 3===i.length&&1===i[0]&&2===i[1]}(Vd[1]),this.C_=/AFT.* Build/i.test(F),this.R_=Hd?Hd[1]:void 0,this.N_=/VIZIO/i.test(F),this.M_=/Edge\/\d+/i.test(F),this.O_=/Trident/i.test(F),this.U_=this.O_&&!self.ActiveXObject&&"ActiveXObject"in self,this.H_=/Vivaldi/i.test(F),this.q_=/Firefox/i.test(F)&&!/Seamonkey/i.test(F),this.G_=Ld?C(Ld[1]):0,this.j_=/Safari/i.test(F)&&!/Chrome/i.test(F)&&!this.qv&&!this.y_,this.K_=Md?C(Md[2]):0,this.J_=Boolean(Od),this.eg=Od?C(Od[1]):0,this.hg=/CrKey/.test(F),this.ag=/\b(tv|smart-tv|smarttv|appletv|crkey|googletv|hbbtv|pov_tv|roku|viera|nettv|philipstv|vizio)\b/i.test(F),this.fg=/PlayStation 4/i.test(F),this._g=/PlayStation 5/i.test(F),this.pg="web"===W.Ev,this.yg="web"===W.Tv,this.Sg=this.yg||this.pg,this.Eg="web"===W.xv,this.Pg="web"===W.Pv,this.Cg="web"===W.Iv}};Wd.Bg=new Wd;var zs=Wd.Bg;r();var _u={}.hasOwnProperty,qd={}.toString;function it(t){return null!=t}function vc(t){return void 0===t}var zd,hi=Array.isArray||function(t){return"[object Array]"===qd.call(t)};function ln(t){return Mc(t)&&_u.call(t,"length")&&lo(t.length)}function Mc(t){return"object"==typeof t&&null!==t}function Gd(t){return Mc(t)&&t.constructor&&t.constructor===w}function Q(t){return"string"==typeof t}function _r(t){return"boolean"==typeof t}function vo(t){return it(t)&&"function"==typeof t.then}function Xd(t){return"[object Date]"===qd.call(t)}function lo(t){return"number"==typeof t}function jd(t){return"function"==typeof t}function I(t){return jd(t)||Mc(t)}function Qd(t){return Mc(t)&&!hi(t)}function Ao(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function no(t){let i;for(;it(i=t.firstChild);)t.removeChild(i)}function Kd(t,i){let e;for(;it(e=t.firstChild);)i.appendChild(e)}function Yd(t,i){t.insertBefore(i,t.firstChild)}function Jd(t){return t&&t.nodeName&&t.nodeName.toLowerCase()||""}function Zd(t){const i=t.className;return"string"==typeof i?i:i&&"string"==typeof i.baseVal?i.baseVal:""}function $d(t,i){const e=t.className;"string"==typeof e?t.className=i:e&&"string"==typeof e.baseVal&&(e.baseVal=i)}function El(t,i){return void 0!==t.classList?t.classList.contains(i):void 0!==t.className&&-1!==(" "+Zd(t)+" ").indexOf(" "+i+" ")}function Pl(t,i){if(void 0!==t.classList)t.classList.add(i);else if(void 0!==t.className){const e=Zd(t);-1===(" "+e+" ").indexOf(" "+i+" ")&&$d(t,(e+" "+i).trim())}}function Il(t,i){if(void 0!==t.classList)t.classList.remove(i);else if(void 0!==t.className){let e=" "+Zd(t)+" ";const s=" "+i+" ";for(;-1!==e.indexOf(s);)e=e.replace(s," ");$d(t,e.trim())}}function Rl(t,i,e){void 0===e&&(e=!El(t,i)),e?Pl(t,i):Il(t,i)}function Dl(t){t.stopPropagation()}function Nl(t,i){zs.w_&&zs.b_<3?function(t,i){let e=i;switch(i){case"flex":e="-webkit-flex";break;case"inline-flex":e="-webkit-inline-flex"}t.display=e}(t,i):function(t,i){if(t.display=i,t.display!==i){let e=i;switch(i){case"flex":e="-ms-flexbox";break;case"inline-flex":e="-ms-inline-flexbox"}t.display=e}}(t,i)}function Bl(t,i){const e=i.style;if(e)for(const i of w.keys(t)){const s=t[i];void 0!==s&&(e[i]=s)}}function Go(t){const i=t.style;i.position="absolute",i.left="0",i.right="0",i.top="0",i.bottom="0",i.width="100%",i.height="100%"}function Ll(t){const i=t.style;i.position="",i.left="",i.right="",i.top="",i.bottom="",i.width="",i.height=""}function Ol(t){t.removeAttribute("title")}function Fl(t){t.addEventListener("mouseover",t=>{Ol(t.target)})}function Ul(t){try{return Boolean(t)&&t.parent!==t}catch(t){return!1}}r(),r();var gs=()=>{},pc=t=>t;function to(t,i){let e=-1/0;return function(){for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];const h=zd.Mg();h-e>=i&&(t.apply(this,n),e=h)}}function Vl(t,i){let e=0;return function(){for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];const h=this;0!==e&&zd.Lg(e),e=zd.Og(()=>{e=0,t.apply(h,n)},i)}}function Oc(t){let i;return()=>(void 0!==t&&(i=t(),t=void 0),i)}function Es(t,i,e){if(null!=i){if("object"!=typeof i&&"function"!=typeof i)throw new g("Object expected.");var s,n;if(e){if(!id)throw new g("Symbol.asyncDispose is not defined.");s=i[id]}if(void 0===s){if(!Nt)throw new g("Symbol.dispose is not defined.");s=i[Nt],e&&(n=s)}if("function"!=typeof s)throw new g("Object not disposable.");n&&(s=function(){try{n.call(this)}catch(t){return Promise.reject(t)}}),t.stack.push({value:i,dispose:s,async:e})}else e&&t.stack.push({async:!0});return i}r(),r(),r();var Hl="function"==typeof SuppressedError?SuppressedError:function(t,i,e){var s=new m(e);return s.name="SuppressedError",s.error=t,s.suppressed=i,s};function Zs(t){function i(i){t.error=t.hasError?new Hl(i,t.error,"An error was suppressed during disposal."):i,t.hasError=!0}var e,s=0;return function n(){for(;e=t.stack.pop();)try{if(!e.async&&1===s)return s=0,t.stack.push(e),Promise.resolve().then(n);if(e.dispose){var r=e.dispose.call(e.value);if(e.async)return s|=2,Promise.resolve(r).then(n,function(t){return i(t),n()})}else s|=1}catch(t){i(t)}if(1===s)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}()}function Xn(t,i){return ql(t.slice(),i)}function Wl(t,i){const e=ql(t,i);return e!==t&&zl(e,void 0,t.length,t),t}function ql(t,i){let e=t;const s=e.length;if(s<=1)return e;let n=new Array(s);for(let t=1;t<s;t*=2){zl(e,i,t,n);const s=e;e=n,n=s}return e}function zl(t,i,e,s){const n=t.length;let r=0;const h=2*e;let o,a,u,c,d;for(a=0;a<n;a+=h)for(u=a+e,o=u+e,u>n&&(u=n),o>n&&(o=n),c=a,d=u;;)if(c<u&&d<o)i&&i(t[c],t[d])<=0?s[r++]=t[c++]:s[r++]=t[d++];else if(c<u)s[r++]=t[c++];else{if(!(d<o))break;s[r++]=t[d++]}}r(),r(),r(),r(),r(),r();var Gl=9007199254740991,Xl=2**-52;function No(t,i,e){return _.min(_.max(t,i),e)}function rs(t,i,e){return t===i||_.abs(t-i)<=e}function Ql(t,i){if(t===i)return!0;const e=_.abs(t-i);if(e<Xl)return!0;return e<_.max(_.abs(t),_.abs(i))*Xl}function Kl(t,i){return t%i+(t<0?i:0)}function Yl(t){return t!=t}function Jl(t,i){return t===i||Yl(t)&&Yl(i)}function Zl(t,i){let e=t,s=i;for(;0!==s;){const t=e%s;e=s,s=t}return e<0?-e:e}function $l(t,i){return t.reduce((t,e)=>t+i(e),0)}var hl=function(t){return t[t.rh=0]="rh",t[t.Fg=1]="Fg",t[t.Ug=-1]="Ug",t}({}),xc=(t,i)=>(0|t)-(0|i),Nu=(t,i)=>t===i?0:t<i?-1:t>i?1:S(t)?S(i)?0:1:-1;function tf(t,i,e){return rs(t,i,e)?0:Nu(t,i)}var ef=(t,i)=>Ql(t,i)?0:Nu(t,i);var sf="function"==typeof Array.prototype.find?(t,i)=>t.find(i):(t,i)=>{const e=tt(t,i);return-1===e?void 0:t[e]},hh=sf,nf="function"==typeof Array.prototype.findLast?(t,i)=>t.findLast(i):(t,i)=>{const e=rf(t,i);return-1===e?void 0:t[e]},dr=nf,tt="function"==typeof Array.prototype.findIndex?(t,i)=>t.findIndex(i):(t,i)=>{for(let e=0;e<t.length;e+=1){if(i(t[e],e,t))return e}return-1},rf="function"==typeof Array.prototype.findLastIndex?(t,i)=>t.findLastIndex(i):(t,i)=>{for(let e=t.length-1;e>=0;e-=1){if(i(t[e],e,t))return e}return-1},hf="function"==typeof Array.prototype.at?(t,i)=>t.at(i):(t,i)=>{const e=t.length,s=i>=0?i:e+i;return s<0||s>=e?void 0:t[s]};function _e(t,i){const e=t.indexOf(i);return-1!==e&&(Ra(t,e),!0)}function Ra(t,i){0===i?t.shift():t.splice(i,1)}function of(t,i){const e=new Array(t.length);let s=0,n=0;for(;n<t.length;){if(t[n]===i){n++,e.length-=1;break}e[s++]=t[n++]}for(;n<t.length;)e[s++]=t[n++];return e}function Ct(t,i){return-1!==t.indexOf(i)}function af(t,i,e){if(t===i)return!0;if(t.length!==i.length)return!1;for(let s=0;s<t.length;s+=1)if(!e(t[s],i[s]))return!1;return!0}function Wt(t){t.length=0}function wc(t,i){if(t.length!==i.length)return!1;for(const e of t)if(!Ct(i,e))return!1;return!0}Array.prototype.flat;var hs="function"==typeof Array.prototype.flatMap?(t,i)=>t.flatMap(i):(t,i)=>{const e=[];for(let s=0;s<t.length;s++)e.push(...i(t[s],s));return e};function $i(t,i){return cf(t,(t,e)=>Nu(i(t),i(e)))}function uf(t,i){return df(t,(t,e)=>Nu(i(t),i(e)))}function cf(t,i){if(0!==t.length)return t.reduce((t,e)=>i(t,e)<=0?t:e)}function df(t,i){return cf(t,(t,e)=>i(e,t))}function Cc(t){return t.filter((i,e)=>t.indexOf(i)===e)}function lf(t,i){return Promise.all(t.map(i)).then(i=>t.filter((t,e)=>i[e]))}function ff(t,i,e){if(t.length!==i.length)return!1;for(let s=0;s<t.length;s++)if(!e(t[s],i[s]))return!1;return!0}function vf(t,i){return function(t,i){const e=new Array(t);for(let s=0;s<t;s++)e[s]=i(s);return e}(t,i)}var _f=class{Vg(){if(!this.Hg&&!this.Wg){this.Hg=!0;for(const t of this.qg.slice())t();this.zg()}}zg(){if(!this.Wg){this.Wg=!0;for(const t of this.Gg.slice())t();Wt(this.qg),Wt(this.Gg)}}Xg(t){this.Wg||this.qg.push(t)}jg(t){this.Wg||_e(this.qg,t)}Qg(t){this.Wg||this.Gg.push(t)}Kg(t){this.Wg||_e(this.Gg,t)}constructor(){this.Hg=!1,this.Wg=!1,this.qg=[],this.Gg=[]}},Zc=class t{get Yg(){return this.Jg}Zg(){this.Jg.Vg()}zg(){this.Jg.zg()}$g(t){const i=this.Jg;if(i.Hg)return;if(t.Hg)return void i.Vg();if(i.Wg||t.Wg)return;const e=()=>{s(),i.Vg()},s=()=>{t.jg(e),t.Kg(s),i.jg(e),i.Kg(s)};t.Xg(e),t.Qg(s),i.Xg(e),i.Qg(s)}tp(){const i=new t,e=new t,s=i.Yg,n=e.Yg,r=this.Jg,h=()=>{s.Hg&&n.Wg||n.Hg&&s.Wg?r.Vg():s.Wg&&n.Wg&&r.zg()};s.Xg(h),n.Xg(h),s.Qg(h),n.Qg(h),i.$g(r),e.$g(r);return r.Qg(()=>{s.jg(h),n.jg(h),s.Kg(h),n.Kg(h)}),[i,e]}static ep(i){const e=new t;for(const t of i)void 0!==t&&e.$g(t);return e}[Nt](){this.Zg()}constructor(){this.Jg=new _f}};r(),r();var gf=function(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];m.apply(this,i)};(gf.prototype=w.create(m.prototype)).constructor=gf;var Qr=class extends gf{get name(){return"BaseError"}constructor(t,i){super(),this.cause=void 0,this.message=t||"Unknown error",this.cause=i,m.captureStackTrace&&m.captureStackTrace(this,this.constructor)}},Qc=class extends Qr{get name(){return"AbortError"}constructor(t,i){super(t||"Aborted",i)}};function Ce(t){return t instanceof m&&"AbortError"===t.name}function fr(t){if(t&&t.Hg)throw new Qc}function sa(t){if(Ce(t))throw t}function bu(t){if(!Ce(t))throw t}function ua(t,i){return i?new Promise((e,s)=>{if(i.Hg)return t.catch(gs),s(new Qc);const n=()=>{i.jg(n),s(new Qc)};i.Xg(n),t.then(t=>{i.jg(n),e(t)},t=>{i.jg(n),s(t)})}):t}async function Cu(t,i){const e={stack:[],error:void 0,hasError:!1};try{Es(e,i,!1);return await t}catch(t){e.error=t,e.hasError=!0}finally{Zs(e)}}async function pf(t,i){const e={stack:[],error:void 0,hasError:!1};try{Es(e,i,!1);return await t(i.Yg)}catch(t){e.error=t,e.hasError=!0}finally{Zs(e)}}var mf=Promise.resolve(),Ht="function"==typeof queueMicrotask?queueMicrotask:t=>{mf.then(t)};function Wr(t){t.then(gs,gs)}async function pr(t){try{return await Promise.all(t)}catch(i){throw await Promise.all(t.map(t=>t.catch(gs))),i}}function Ze(t,i){return new Promise((e,s)=>{if(void 0!==i&&i.Hg)return void s(new Qc);const n=zd.Og(()=>{void 0!==i&&i.jg(r),e()},t),r=()=>{zd.Lg(n),s(new Qc)};void 0!==i&&i.Xg(r)})}async function wf(t,i){const e={stack:[],error:void 0,hasError:!1};try{const s=Es(e,new Zc,!1);return await Promise.race([t,Ze(i,s.Yg).then(()=>{throw new m("Timeout")})])}catch(t){e.error=t,e.hasError=!0}finally{Zs(e)}}function br(t){return"video"===Jd(t)}function yf(t){t.src&&(t.removeAttribute("src"),t.load()),t.srcObject&&(t.srcObject=null,t.load()),t.hasChildNodes()&&(!function(t,i){const e=t.childNodes;for(let s=e.length-1;s>=0;s--){const n=e.item(s);Jd(n)===i&&t.removeChild(n)}}(t,"source"),t.load())}function bf(){return void 0!==h?h.createElement("video"):void 0}var Af=Oc(bf),Sf=Oc(()=>"undefined"!=typeof HTMLVideoElement&&Af()instanceof HTMLVideoElement);function Tf(t){const i=h.createElement(t);return br(i)&&i.addEventListener("contextmenu",Pf),Ef(i),i}function kf(t){Ef(t),t.removeEventListener("contextmenu",Pf)}function Ef(t){t.removeAttribute("id"),t.removeAttribute("class"),t.removeAttribute("style"),no(t),yf(t),t.pause(),t.playbackRate=1,t.disableRemotePlayback=!1,t.preload="auto",t.controls=!1,t.style.display="none",br(t)&&(t.style.width="100%",t.style.height="100%",t.style.pointerEvents="none",t.playsInline=!0,t.setAttribute("webkit-playsinline",""))}function xf(t,i){if(i.sp){const i=t.muted;t.muted=!0,t.muted=!1,t.muted=i}else if(t.paused){const i=t.play();vo(i)&&Wr(i),t.pause()}}function Pf(t){t.preventDefault()}r(),r(),r();var If=null;try{If=new WebAssembly.Instance(new WebAssembly.Module(new j([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(y){}function ta(t,i,e){this.low=0|t,this.high=0|i,this.unsigned=!!e}function Ki(t){return!0===(t&&t.np)}function Cf(t){var i=_.clz32(t&-t);return t?31-i:i}ta.prototype.np,w.defineProperty(ta.prototype,"np",{value:!0}),ta.isLong=Ki;var Rf={},Df={};function Nf(t,i){var e,s,n;return i?(n=0<=(t>>>=0)&&t<256)&&(s=Df[t])?s:(e=At(t,0,!0),n&&(Df[t]=e),e):(n=-128<=(t|=0)&&t<128)&&(s=Rf[t])?s:(e=At(t,t<0?-1:0,!1),n&&(Rf[t]=e),e)}function Bf(t,i){if(S(t))return i?Cr:Vu;if(i){if(t<0)return Cr;if(t>=Uf)return Xf}else{if(t<=-Vf)return rt;if(t+1>=Vf)return Gf}return t<0?Bf(-t,i).neg():At(t%Ff|0,t/Ff|0,i)}function At(t,i,e){return new ta(t,i,e)}ta.fromInt=Nf,ta.fromNumber=Bf,ta.fromBits=At;var Mf=_.pow;function Lf(t,i,e){if(0===t.length)throw m("empty string");if("number"==typeof i?(e=i,i=!1):i=!!i,"NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return i?Cr:Vu;if((e=e||10)<2||36<e)throw RangeError("radix");var s;if((s=t.indexOf("-"))>0)throw m("interior hyphen");if(0===s)return Lf(t.substring(1),i,e).neg();for(var n=Bf(Mf(e,8)),r=Vu,h=0;h<t.length;h+=8){var o=_.min(8,t.length-h),a=x(t.substring(h,h+o),e);if(o<8){var u=Bf(Mf(e,o));r=r.mul(u).add(Bf(a))}else r=(r=r.mul(n)).add(Bf(a))}return r.unsigned=i,r}function Of(t,i){return"number"==typeof t?Bf(t,i):"string"==typeof t?Lf(t,i):At(t.low,t.high,"boolean"==typeof i?i:t.unsigned)}ta.fromString=Lf,ta.fromValue=Of;var Ff=4294967296,Uf=Ff*Ff,Vf=Uf/2,Hf=Nf(1<<24),Vu=Nf(0);ta.ZERO=Vu;var Cr=Nf(0,!0);ta.UZERO=Cr;var Wf=Nf(1);ta.ONE=Wf;var qf=Nf(1,!0);ta.UONE=qf;var zf=Nf(-1);ta.NEG_ONE=zf;var Gf=At(-1,2147483647,!1);ta.MAX_VALUE=Gf;var Xf=At(-1,-1,!0);ta.MAX_UNSIGNED_VALUE=Xf;var rt=At(0,-2147483648,!1);ta.MIN_VALUE=rt;var $s=ta.prototype;$s.toInt=function(){return this.unsigned?this.low>>>0:this.low},$s.toNumber=function(){return this.unsigned?(this.high>>>0)*Ff+(this.low>>>0):this.high*Ff+(this.low>>>0)},$s.toString=function(t){if((t=t||10)<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(rt)){var i=Bf(t),e=this.div(i),s=e.mul(i).sub(this);return e.toString(t)+s.toInt().toString(t)}return"-"+this.neg().toString(t)}for(var n=Bf(Mf(t,6),this.unsigned),r=this,h="";;){var o=r.div(n),a=(r.sub(o.mul(n)).toInt()>>>0).toString(t);if((r=o).isZero())return a+h;for(;a.length<6;)a="0"+a;h=""+a+h}},$s.getHighBits=function(){return this.high},$s.getHighBitsUnsigned=function(){return this.high>>>0},$s.getLowBits=function(){return this.low},$s.getLowBitsUnsigned=function(){return this.low>>>0},$s.getNumBitsAbs=function(){if(this.isNegative())return this.eq(rt)?64:this.neg().getNumBitsAbs();for(var t=0!=this.high?this.high:this.low,i=31;i>0&&!(t&1<<i);i--);return 0!=this.high?i+33:i+1},$s.isSafeInteger=function(){var t=this.high>>21;return!t||!this.unsigned&&(-1===t&&!(0===this.low&&-2097152===this.high))},$s.isZero=function(){return 0===this.high&&0===this.low},$s.eqz=$s.isZero,$s.isNegative=function(){return!this.unsigned&&this.high<0},$s.isPositive=function(){return this.unsigned||this.high>=0},$s.isOdd=function(){return!(1&~this.low)},$s.isEven=function(){return!(1&this.low)},$s.equals=function(t){return Ki(t)||(t=Of(t)),(this.unsigned===t.unsigned||this.high>>>31!=1||t.high>>>31!=1)&&(this.high===t.high&&this.low===t.low)},$s.eq=$s.equals,$s.notEquals=function(t){return!this.eq(t)},$s.neq=$s.notEquals,$s.ne=$s.notEquals,$s.lessThan=function(t){return this.comp(t)<0},$s.lt=$s.lessThan,$s.lessThanOrEqual=function(t){return this.comp(t)<=0},$s.lte=$s.lessThanOrEqual,$s.le=$s.lessThanOrEqual,$s.greaterThan=function(t){return this.comp(t)>0},$s.gt=$s.greaterThan,$s.greaterThanOrEqual=function(t){return this.comp(t)>=0},$s.gte=$s.greaterThanOrEqual,$s.ge=$s.greaterThanOrEqual,$s.compare=function(t){if(Ki(t)||(t=Of(t)),this.eq(t))return 0;var i=this.isNegative(),e=t.isNegative();return i&&!e?-1:!i&&e?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},$s.comp=$s.compare,$s.negate=function(){return!this.unsigned&&this.eq(rt)?rt:this.not().add(Wf)},$s.neg=$s.negate,$s.add=function(t){Ki(t)||(t=Of(t));var i=this.high>>>16,e=65535&this.high,s=this.low>>>16,n=65535&this.low,r=t.high>>>16,h=65535&t.high,o=t.low>>>16,a=0,u=0,c=0,d=0;return c+=(d+=n+(65535&t.low))>>>16,u+=(c+=s+o)>>>16,a+=(u+=e+h)>>>16,a+=i+r,At((c&=65535)<<16|(d&=65535),(a&=65535)<<16|(u&=65535),this.unsigned)},$s.subtract=function(t){return Ki(t)||(t=Of(t)),this.add(t.neg())},$s.sub=$s.subtract,$s.multiply=function(t){if(this.isZero())return this;if(Ki(t)||(t=Of(t)),If)return At(If.mul(this.low,this.high,t.low,t.high),If.get_high(),this.unsigned);if(t.isZero())return this.unsigned?Cr:Vu;if(this.eq(rt))return t.isOdd()?rt:Vu;if(t.eq(rt))return this.isOdd()?rt:Vu;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(Hf)&&t.lt(Hf))return Bf(this.toNumber()*t.toNumber(),this.unsigned);var i=this.high>>>16,e=65535&this.high,s=this.low>>>16,n=65535&this.low,r=t.high>>>16,h=65535&t.high,o=t.low>>>16,a=65535&t.low,u=0,c=0,d=0,l=0;return d+=(l+=n*a)>>>16,c+=(d+=s*a)>>>16,d&=65535,c+=(d+=n*o)>>>16,u+=(c+=e*a)>>>16,c&=65535,u+=(c+=s*o)>>>16,c&=65535,u+=(c+=n*h)>>>16,u+=i*a+e*o+s*h+n*r,At((d&=65535)<<16|(l&=65535),(u&=65535)<<16|(c&=65535),this.unsigned)},$s.mul=$s.multiply,$s.divide=function(t){if(Ki(t)||(t=Of(t)),t.isZero())throw m("division by zero");var i,e,s;if(If)return this.unsigned||-2147483648!==this.high||-1!==t.low||-1!==t.high?At((this.unsigned?If.div_u:If.div_s)(this.low,this.high,t.low,t.high),If.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?Cr:Vu;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return Cr;if(t.gt(this.shru(1)))return qf;s=Cr}else{if(this.eq(rt))return t.eq(Wf)||t.eq(zf)?rt:t.eq(rt)?Wf:(i=this.shr(1).div(t).shl(1)).eq(Vu)?t.isNegative()?Wf:zf:(e=this.sub(t.mul(i)),s=i.add(e.div(t)));if(t.eq(rt))return this.unsigned?Cr:Vu;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();s=Vu}for(e=this;e.gte(t);){i=_.max(1,_.floor(e.toNumber()/t.toNumber()));for(var n=_.ceil(_.log(i)/_.LN2),r=n<=48?1:Mf(2,n-48),h=Bf(i),o=h.mul(t);o.isNegative()||o.gt(e);)o=(h=Bf(i-=r,this.unsigned)).mul(t);h.isZero()&&(h=Wf),s=s.add(h),e=e.sub(o)}return s},$s.div=$s.divide,$s.modulo=function(t){return Ki(t)||(t=Of(t)),If?At((this.unsigned?If.rem_u:If.rem_s)(this.low,this.high,t.low,t.high),If.get_high(),this.unsigned):this.sub(this.div(t).mul(t))},$s.mod=$s.modulo,$s.rem=$s.modulo,$s.not=function(){return At(~this.low,~this.high,this.unsigned)},$s.countLeadingZeros=function(){return this.high?_.clz32(this.high):_.clz32(this.low)+32},$s.clz=$s.countLeadingZeros,$s.countTrailingZeros=function(){return this.low?Cf(this.low):Cf(this.high)+32},$s.ctz=$s.countTrailingZeros,$s.and=function(t){return Ki(t)||(t=Of(t)),At(this.low&t.low,this.high&t.high,this.unsigned)},$s.or=function(t){return Ki(t)||(t=Of(t)),At(this.low|t.low,this.high|t.high,this.unsigned)},$s.xor=function(t){return Ki(t)||(t=Of(t)),At(this.low^t.low,this.high^t.high,this.unsigned)},$s.shiftLeft=function(t){return Ki(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?At(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):At(0,this.low<<t-32,this.unsigned)},$s.shl=$s.shiftLeft,$s.shiftRight=function(t){return Ki(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?At(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):At(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},$s.shr=$s.shiftRight,$s.shiftRightUnsigned=function(t){return Ki(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?At(this.low>>>t|this.high<<32-t,this.high>>>t,this.unsigned):At(32===t?this.high:this.high>>>t-32,0,this.unsigned)},$s.shru=$s.shiftRightUnsigned,$s.shr_u=$s.shiftRightUnsigned,$s.rotateLeft=function(t){var i;return Ki(t)&&(t=t.toInt()),0==(t&=63)?this:32===t?At(this.high,this.low,this.unsigned):t<32?(i=32-t,At(this.low<<t|this.high>>>i,this.high<<t|this.low>>>i,this.unsigned)):(i=32-(t-=32),At(this.high<<t|this.low>>>i,this.low<<t|this.high>>>i,this.unsigned))},$s.rotl=$s.rotateLeft,$s.rotateRight=function(t){var i;return Ki(t)&&(t=t.toInt()),0==(t&=63)?this:32===t?At(this.high,this.low,this.unsigned):t<32?(i=32-t,At(this.high<<i|this.low>>>t,this.low<<i|this.high>>>t,this.unsigned)):(i=32-(t-=32),At(this.low<<i|this.high>>>t,this.high<<i|this.low>>>t,this.unsigned))},$s.rotr=$s.rotateRight,$s.toSigned=function(){return this.unsigned?At(this.low,this.high,!1):this},$s.toUnsigned=function(){return this.unsigned?this:At(this.low,this.high,!0)},$s.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},$s.toBytesLE=function(){var t=this.high,i=this.low;return[255&i,i>>>8&255,i>>>16&255,i>>>24,255&t,t>>>8&255,t>>>16&255,t>>>24]},$s.toBytesBE=function(){var t=this.high,i=this.low;return[t>>>24,t>>>16&255,t>>>8&255,255&t,i>>>24,i>>>16&255,i>>>8&255,255&i]},ta.fromBytes=function(t,i,e){return e?ta.fromBytesLE(t,i):ta.fromBytesBE(t,i)},ta.fromBytesLE=function(t,i){return new ta(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,i)},ta.fromBytesBE=function(t,i){return new ta(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],i)},"function"==typeof BigInt&&(ta.fromBigInt=function(t,i){return At(Number(BigInt.asIntN(32,t)),Number(BigInt.asIntN(32,t>>BigInt(32))),i)},ta.fromValue=function(t,i){return"bigint"==typeof t?ta.fromBigInt(t,i):Of(t,i)},$s.toBigInt=function(){var t=BigInt(this.low>>>0);return BigInt(this.unsigned?this.high>>>0:this.high)<<BigInt(32)|t});var yo=ta;function jf(t,i){return t.lessThan(i)?t:i}function Qf(t){return!S(t.getTime())}function zo(){return Date.now()||(new Date).getTime()}function Kf(t){return t/1e3}function rn(t){return 1e3*t}var Zt=1/6,Yf=yo.fromNumber(Gl);function Ls(t,i){if(0===i)return t.isZero()?NaN:t.isNegative()?-1/0:1/0;if(t.lessThanOrEqual(Yf))return t.toNumber()/i;const e=t.divide(i),s=t.subtract(e.multiply(i));return e.toNumber()+s.toNumber()/i}var Jf=Boolean("ontouchstart"in self||self.DocumentTouch&&h instanceof self.DocumentTouch)||Boolean(od&&od.msMaxTouchPoints),Zf=Af(),$f=Boolean(Zf&&Zf.webkitShowPlaybackTargetPicker),iv=class{get rp(){return void 0===this.hp&&(this.hp=this.op()),this.hp}op(){return 0}get ap(){return zs.Fv?"android":zs.Dv?"macos":zs.ru?"ios":zs.Bv?"windows":"other"}get cp(){return zs.og?"tv":zs.Ks?"mobile":"desktop"}get dp(){return!zs.og}get lp(){if(s.screen)return{width:s.screen.width*this.fp,height:s.screen.height*this.fp}}get fp(){return s.devicePixelRatio||1}get vp(){return $f}get _p(){return!1}get gp(){return!0}get pp(){return!!(zs.X_||zs.ru||zs.g_)||!!zs.D_}get mp(){return zs.D_}get wp(){return!zs.ru}get yp(){return!0}get bp(){return!0}get Ap(){return!1}get Sp(){}get Tp(){return!0}get kp(){return!1}get Ep(){return zs.D_}get xp(){return!1}Pp(t,i){return!0}Ip(t){return t>=2*Zt}get Cp(){return!1}get Rp(){return!1}get Dp(){return!0}constructor(){this.hp=void 0,this.Np=!1,this.Ke=Jf,this.Ks=!1,this.sp=!0}},ev=class extends iv{constructor(){super()}};r();var sv=class extends ev{get Sp(){if(zs.Dv)return 4096}Pp(t,i){if(t&&t.Bp&&i&&i.Bp){const e=nv(t.Bp,"mp4a.40.2")&&nv(i.Bp,"mp4a.40.5"),s=nv(t.Bp,"mp4a.40.5")&&nv(i.Bp,"mp4a.40.2"),n=nv(t.Bp,"mp4a.40.2")&&nv(i.Bp,"mp4a.40.34"),r=nv(t.Bp,"mp4a.40.34")&&nv(i.Bp,"mp4a.40.2"),h=nv(t.Bp,"mp4a.40.5")&&nv(i.Bp,"mp4a.40.34"),o=nv(t.Bp,"mp4a.40.34")&&nv(i.Bp,"mp4a.40.5");return!(e||s||n||r||h||o)}return!0}};function nv(t,i){return t.indexOf(i)>-1}r();var rv=class extends ev{Ip(t){return t>=2}};r();var hv=class extends ev{get xp(){return zs.Q_<17}get Cp(){return!0}constructor(){super(),this.Np=zs.Q_>=11,this.sp=zs.X_&&!(zs.ru&&zs.Q_<10)}};r();var ov,av=class extends ev{get Tp(){return!(zs.d_>=133)}};r(),r(),r(),r(),r();var uv=function(){const t=bf();if(!t)return!1;const i=t.muted;return t.muted=!i,t.muted!==i}(),cv=function(){if(zs.Kv)return!1;const t=bf();if(!t)return!1;const i=t.volume;return t.volume=i/2+.1,i!==t.volume}();var K=class extends iv{op(){return this.Mp.rp}get Sp(){return this.Mp.Sp}get Tp(){return this.Mp.Tp}Pp(t,i){return this.Mp.Pp(t,i)}Ip(t){return this.Mp.Ip(t)}get xp(){return this.Mp.xp}constructor(t){super(),this.Mp=void 0,this.Mp=t,this.Np=this.Mp.Np,this.Ke=this.Mp.Ke,this.sp=uv&&this.Mp.sp}},dv=class extends K{get Ap(){return zs.ru}constructor(t){super(t),this.Np=!0,this.Ks=!0}};r();var lv=class{Lp(){return new this.Op}Fp(t){return this.Op.isTypeSupported(t)}constructor(t){this.Op=void 0,this.Op=fv(t)}};function fv(t){return t&&I(s.ManagedMediaSource)?s.ManagedMediaSource:I(s.MediaSource)?s.MediaSource:void 0}var vv=class extends dv{get Ap(){return!0}op(){return fv(!0)?super.op():1}};r();var _v=class extends K{get _p(){return zs.b_<3}get gp(){return zs.b_>=3}get lp(){return s.tizen&&!this.Up&&s.tizen.systeminfo.getPropertyValue("DISPLAY",t=>{const i=t.resolutionWidth,e=t.resolutionHeight;1===i&&1===e||(this.Up={width:i,height:e})}),this.Up}get kp(){return zs.b_<3}Pp(t,i){return super.Pp(t,i)}constructor(...t){super(...t),this.Up=void 0}};r();var gv=class extends K{get lp(){return s.webOS&&!this.Up&&s.webOS.deviceInfo(t=>{this.Up={width:t.screenWidth,height:t.screenHeight}}),this.Up}get yp(){return!1}constructor(...t){super(...t),this.Up=void 0}};r();var pv=class extends K{get Ap(){return!0}get Cp(){return this.Mp.Cp}};r();var mv=class extends K{get Rp(){return zs.IS_FIRETV_AFTMM}};!function(t){ov=t}(function(){const t=function(){if(zs.W_)return new sv;if(zs.B_||zs.L_)return new rv;if(zs.X_)return new hv;if(zs.Rg)return new av;return new ev}();return zs.ru?new vv(t):zs.I_?new mv(t):zs.Ks?new dv(t):zs.w_?new _v(t):zs.S_?new gv(t):zs.Dv?new pv(t):new K(t)}()),r(),r(),r();var wv=!(zs.L_&&!zs.F_),Dc=self.console;function yv(t){if(Mc(t))try{return JSON.stringify(t)}catch(t){}return t}function bv(t){return t.map(yv).join(" ")}function Av(t){const i=Dc&&Dc[t];return i?i.bind&&wv?i.bind(Dc):function(){for(var i=arguments.length,e=new Array(i),s=0;s<i;s++)e[s]=arguments[s];Dc[t](bv(e))}:void 0}var Sv=Av("log")||gs,uh=Av("warn")||Sv.bind(void 0,"WARNING:"),Tv=Av("error")||Sv.bind(void 0,"ERROR:"),kv=(()=>{const t=Dc&&Dc.assert;return t?t.bind&&wv?t.bind(Dc):function(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];Dc.assert(t,bv(e))}:function(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];t||Tv("Assertion failed:",...e)}})();function Ev(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),w.defineProperty(t,s.key,s)}}function xv(t,i){var e=function(t,i){var e=t.length;if(e<=1)return t;for(var s=new Array(e),n=1;n<e;n*=2){Pv(t,i,n,s);var r=t;t=s,s=r}return t}(t,i);return e!==t&&Pv(e,null,t.length,t),t}function Pv(t,i,e,s){var n,r,h,o,a,u=t.length,c=0,d=2*e;for(n=0;n<u;n+=d)for(h=(r=n+e)+e,r>u&&(r=u),h>u&&(h=u),o=n,a=r;;)if(o<r&&a<h)i(t[o],t[a])<=0?s[c++]=t[o++]:s[c++]=t[a++];else if(o<r)s[c++]=t[o++];else{if(!(a<h))break;s[c++]=t[a++]}}r();var Iv=/[a-zA-Z]/,Cv=/[0-9]/,Rv=/[0-9a-fA-F]/,Dv=/^0x/i,Nv=/^[0-9]+$/,Bv=/^[0-9a-fA-F]+$/,Mv=/^[0-7]+$/,Lv=w.prototype.toString,Ov=Array.isArray||function(t){return"[object Array]"===Lv.call(t)},Fv=void 0!==Io&&"symbol"==typeof f;function Uv(t){return Ov(t)?t:Array.from(t)}function Vv(t,i,e){var s=t[i];t[i]=t[e],t[e]=s}function Hv(t){return t>=65&&t<=90}function Wv(t){return Hv(t)||function(t){return t>=97&&t<=122}(t)}function qv(t){return t>=48&&t<=57}function zv(t){return qv(t)||Wv(t)}function Gv(t){return qv(t)||t>=65&&t<=70||t>=97&&t<=102}function Xv(t){return Hv(t)?t+32:t}function jv(t){return qv(t)?t-48:t>=65&&t<=70?t-65+10:t>=97&&t<=102?t-97+10:-1}function Qv(t,i){return void 0===i&&(i=!1),0<=t&&t<=9?t+48:10<=t&&t<=15?t+(i?87:55):-1}var Kv=_.min,Yv=String.fromCharCode;function Jv(t){for(var i=t.length,e=[],s=0;s<i;s+=16384){var n=Kv(s+16384,i);e.push(Yv.apply(null,t.slice(s,n)))}return e.join("")}var Zv=2147483647,$v=/[^\0-\x7E]/,t_=/[\x2E\u3002\uFF0E\uFF61]/g,i_={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},e_=_.floor,s_=String.fromCharCode;function n_(t){throw new RangeError(i_[t])}function r_(t){for(var i=[],e=0,s=t.length;e<s;){var n=t.charCodeAt(e++);if(n>=55296&&n<=56319&&e<s){var r=t.charCodeAt(e++);56320==(64512&r)?i.push(((1023&n)<<10)+(1023&r)+65536):(i.push(n),e--)}else i.push(n)}return i}var h_,o_,al,a_=function(t,i){return t+22+75*(t<26)-((0!=i)<<5)},u_=function(t,i,e){var s=0;for(t=e?e_(t/700):t>>1,t+=e_(t/i);t>455;s+=36)t=e_(t/35);return e_(s+36*t/(t+38))},c_=function(t){return function(t,i){var e=t.split("@"),s="";e.length>1&&(s=e[0]+"@",t=e[1]);var n=function(t,i){for(var e=[],s=t.length;s--;)e[s]=i(t[s]);return e}((t=t.replace(t_,".")).split("."),i).join(".");return s+n}(t,function(t){return $v.test(t)?"xn--"+function(t){for(var i=[],e=(t=r_(t)).length,s=128,n=0,r=72,h=0,o=t;h<o.length;h++){var a=o[h];a<128&&i.push(s_(a))}var u=i.length,c=u;for(u&&i.push("-");c<e;){for(var d=Zv,l=0,f=t;l<f.length;l++){var v=f[l];v>=s&&v<d&&(d=v)}var _=c+1;d-s>e_((Zv-n)/_)&&n_("overflow"),n+=(d-s)*_,s=d;for(var g=0,p=t;g<p.length;g++){var m=p[g];if(m<s&&++n>Zv&&n_("overflow"),m==s){for(var w=n,y=36;;y+=36){var b=y<=r?1:y>=r+26?26:y-r;if(w<b)break;var A=w-b,S=36-b;i.push(s_(a_(b+A%S,0))),w=e_(A/S)}i.push(s_(a_(w,0))),r=u_(n,_,c==u),n=0,++c}}++n,++s}return i.join("")}(t):t})};function d_(t){for(var i=[],e=0;e<t.length;e++){var s=t[e];s>65535&&(s-=65536,i.push(s>>>10&1023|55296),s=56320|1023&s),i.push(s)}return Jv(i)}function l_(t){if(t>=55296&&t<=57343)throw new m("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value")}function f_(t,i){return t>>i&63|128}function v_(t,i){4294967168&t?(4294965248&t?4294901760&t?4292870144&t||(i.push(t>>18&7|240),i.push(f_(t,12)),i.push(f_(t,6))):(l_(t),i.push(t>>12&15|224),i.push(f_(t,6))):i.push(t>>6&31|192),i.push(63&t|128)):i.push(t)}function __(t){for(var i=[],e=0;e<t.length;e++){v_(t[e],i)}return i}function g_(){if(al>=o_)throw new m("Invalid byte index");var t=255&h_[al];if(al++,128==(192&t))return 63&t;throw new m("Invalid continuation byte")}function p_(){var t,i;if(al>o_)throw new m("Invalid byte index");if(al===o_)return!1;if(t=255&h_[al],al++,!(128&t))return t;if(192==(224&t)){if((i=(31&t)<<6|g_())>=128)return i;throw new m("Invalid continuation byte")}if(224==(240&t)){if((i=(15&t)<<12|g_()<<6|g_())>=2048)return l_(i),i;throw new m("Invalid continuation byte")}if(240==(248&t)&&(i=(7&t)<<18|g_()<<12|g_()<<6|g_())>=65536&&i<=1114111)return i;throw new m("Invalid UTF-8 detected")}function m_(t){return[37,Qv(t>>4),Qv(15&t)]}function w_(t){return function(t){return t>=0&&t<=31}(t)||t>126}function y_(t){return w_(t)||32===t||34===t||60===t||62===t||96===t}function b_(t){return y_(t)||35===t||63===t||123===t||125===t}function A_(t){return b_(t)||47===t||58===t||59===t||61===t||64===t||t>=91&&t<=94||124===t}function S_(t){return t<33||t>126||34===t||35===t||60===t||62===t}function T_(t){return S_(t)||39===t}function k_(t,i){if(!i(t))return[t];for(var e=__([t]),s=[],n=0;n<e.length;n++){var r=e[n];s.push.apply(s,m_(r))}return s}function E_(t,i){for(var e=[],s=0,n=r_(t);s<n.length;s++){var r=n[s];e.push.apply(e,k_(r,i))}return d_(e)}function x_(t){return function(t){for(var i=[],e=t.length,s=0;s<e;s++){var n=t[s];if(37===n&&s+2<e&&Gv(t[s+1])&&Gv(t[s+2])){var r=jv(t[s+1])<<4|jv(t[s+2]);i.push(r),s+=2}else i.push(n)}return i}(__(t))}function P_(t){return d_(function(t){h_=t.slice(),o_=h_.length,al=0;for(var i,e=[];!1!==(i=p_());)e.push(i);return e}(x_(r_(t))))}function I_(t){var i=t.length,e=[0,0,0,0,0,0,0,0],s=0,n=null,r=0;if(r<i&&":"===t[r]){if(!(r+1<i&&":"===t[r+1]))throw new g;r+=2,n=s+=1}for(;r<i;){if(8===s)throw new g("Too many groups");if(":"!==t[r]){for(var h=0,o=0;o<4&&r<i&&Rv.test(t[r]);)h=h<<4|x(t[r],16),r+=1,o+=1;if("."===t[r]){if(0===o)throw new g;if(r-=o,s>6)throw new g;for(var a=0;r<i;){var u=null;if(a>0){if(!("."===t[r]&&a<4))throw new g;r+=1}if(!Cv.test(t[r]))throw new g;for(;r<i&&Cv.test(t[r]);){var c=x(t[r],10);if(null===u)u=c;else{if(0===u)throw new g;if((u=10*u+c)>255)throw new g}r+=1}e[s]=e[s]<<8|u,2!==(a+=1)&&4!==a||(s+=1)}if(4!==a)throw new g;break}if(":"===t[r]){if((r+=1)===i)throw new g}else if(r<i)throw new g;e[s]=h,s+=1}else{if(null!==n)throw new g("Too many :: groups");r+=1,n=s+=1}}if(null!==n){var d=s-n;for(s=7;0!==s&&d>0;)Vv(e,s,n+d-1),s-=1,d-=1}else if(8!==s)throw new g;return e}function C_(t){var i=10,e=Nv;return Dv.test(t)?(t=t.slice(2),i=16,e=Bv):t.length>=2&&"0"===t[0]&&(t=t.slice(1),i=8,e=Mv),""===t?0:e.test(t)?x(t,i):void 0}var Fc={Vp:4},R_=/[\0\t\n\r #%/:?@\[\\\]]/,D_=/[\0\t\n\r #/:?@\[\\\]]/;function N_(t,i){if("["===t[0]){if("]"!==t[t.length-1])throw new g("Invalid IPv6 address");return{Vp:2,Hp:I_(t.slice(1,-1))}}if(!i)return function(t){if(D_.test(t))throw new g("Invalid code point in opaque host");var i=E_(t,w_);return""===i?Fc:{Vp:3,Wp:i}}(t);var e=function(t){var i=function(t){return c_(t.toLowerCase())}(t);return i}(P_(t));if(R_.test(e))throw new g("Invalid code point in host");var s=function(t){var i=t.split(".");if(""===i[i.length-1]&&i.pop(),!(i.length>4)){for(var e=[],s=0;s<i.length;s++){var n=i[s];if(""===n)return;var r=C_(n);if(void 0===r)return;e.push(r)}for(var h=0;h<e.length-1;h++)if(e[h]>255)throw new g;if(e[e.length-1]>=_.pow(256,5-e.length))throw new g;for(var o=e.pop(),a=0;a<e.length;a++)o+=e[a]*_.pow(256,3-a);return o}}(e);return void 0!==s?{Vp:1,Hp:s}:""===e?Fc:{Vp:0,qp:e}}function B_(t){switch(t.Vp){case 0:return t.qp;case 1:return function(t){for(var i=[],e=t,s=1;s<=4;s++)i.push(""+(255&e)),4!==s&&i.push("."),e>>>=8;return i.reverse().join("")}(t.Hp);case 2:return"["+function(t){for(var i="",e=function(t){for(var i=0,e=0,s=0,n=0,r=0;r<8;r++)0===t[r]?(0===n&&(s=r),n++):(n>e&&(i=s,e=n),n=0);return n>e&&(i=s,e=n),e>1?i:null}(t),s=!1,n=0;n<8;n++){if(s){if(0===t[n])continue;s=!1}e!==n?(i+=t[n].toString(16),7!==n&&(i+=":")):(i+=0===n?"::":":",s=!0)}return i}(t.Hp)+"]";case 3:return t.Wp;case 4:return""}}var M_=/\+/g;function L_(t){return 42===t||45===t||46===t||95===t||zv(t)}function O_(t){for(var i=t.split("&"),e=[],s=0;s<i.length;s++){var n=i[s];if(""!==n){var r=n.indexOf("="),h=void 0,o=void 0;-1!==r?(h=n.slice(0,r),o=n.slice(r+1)):(h=n,o=""),h=h.replace(M_," "),o=o.replace(M_," ");var a=P_(h),u=P_(o);e.push([a,u])}}return e}function F_(t){for(var i="",e=0;e<t.length;e++){var s=t[e];e>0&&(i+="&"),i+=U_(__(r_(s[0])))+"="+U_(__(r_(s[1])))}return i}function U_(t){for(var i=[],e=0;e<t.length;e++){var s=t[e];32===s?i.push(43):L_(s)?i.push(s):i.push.apply(i,m_(s))}return Jv(i)}var V_=/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/;function ut(t){var i=""+t,e=V_.exec(i);return e?function(t,i){for(var e=t.length,s=[],n=i;n<e;n++){var r=t.charCodeAt(n);if(W_(r))if(q_(r)||n===e-1)s.push(H_);else{var h=t.charCodeAt(n+1);q_(h)?(s.push(r,h),n++):s.push(H_)}else s.push(r)}return t.slice(0,i)+Jv(s)}(i,e.index):i}var H_=65533,W_=function(t){return 55296==(63488&t)},q_=function(t){return!!(1024&t)};function z_(t,i){var e=t[0],s=i[0];return e===s?0:e<s?-1:1}function G_(t){t.zp.length=0}function X_(t,i){!function(t,i){for(var e=0;e<i.length;e++)t[e]=i[e];t.length=i.length}(t.zp,O_(i))}function j_(t){if(t.rc){var i=F_(t.zp);""===i&&(i=null),t.rc.rc.Gp=i}}var xr=function(){function t(t){if(void 0===t&&(t=void 0),this.rc=null,null==t)this.zp=[];else if("object"==typeof t||"function"==typeof t)if(function(t){return t instanceof xr&&!!Ov(t.zp)&&(!Fv||t[f]===Q_)}(t))this.zp=t.zp.slice();else if(function(t){return null!=t&&(!!Ov(t)||!!Fv&&"function"==typeof t[f])}(t)){this.zp=[];for(var i=0,e=Uv(t);i<e.length;i++){var s=Uv(e[i]);if(2!==s.length)throw new g("Invalid name-value pair");this.zp.push([ut(s[0]),ut(s[1])])}}else for(var n in this.zp=[],t)w.prototype.hasOwnProperty.call(t,n)&&this.zp.push([ut(n),ut(t[n])]);else(t=ut(t)).length>0&&"?"===t[0]&&(t=t.slice(1)),this.zp=O_(t)}var i=t.prototype;return i.append=function(t,i){t=ut(t),i=ut(i),this.zp.push([t,i]),j_(this)},i.delete=function(t){t=ut(t);for(var i=this.zp,e=0;e<i.length;){i[e][0]===t?i.splice(e,1):e++}j_(this)},i.get=function(t){t=ut(t);for(var i=this.zp,e=0;e<i.length;e++){var s=i[e];if(s[0]===t)return s[1]}return null},i.getAll=function(t){t=ut(t);for(var i=this.zp,e=[],s=0;s<i.length;s++){var n=i[s];n[0]===t&&e.push(n[1])}return e},i.has=function(t){t=ut(t);for(var i=this.zp,e=0;e<i.length;e++){if(i[e][0]===t)return!0}return!1},i.set=function(t,i){t=ut(t),i=ut(i);for(var e=this.zp,s=!1,n=0;n<e.length;){var r=e[n];r[0]===t?s?e.splice(n,1):(r[1]=i,s=!0,n++):n++}s||e.push([t,i]),j_(this)},i.sort=function(){xv(this.zp,z_),j_(this)},i.toString=function(){return F_(this.zp)},i.entries=function(){return new Z_(this.zp,K_)},i.keys=function(){return new Z_(this.zp,Y_)},i.values=function(){return new Z_(this.zp,J_)},i.forEach=function(t){var i=this;this.zp.forEach(function(e){return t(e[1],e[0],i)})},t}(),Q_=xr.prototype.entries;Fv&&(xr.prototype[f]=Q_);var K_=function(t){return[t[0],t[1]]},Y_=function(t){return t[0]},J_=function(t){return t[1]},Z_=function(){function t(t,i){this.Xp=0,this.zp=t,this.jp=i}return t.prototype.next=function(){return this.Xp<this.zp.length?{done:!1,value:this.jp(this.zp[this.Xp++])}:{done:!0,value:void 0}},t}(),$_="null";var eo=w.create(null);eo.ftp=21,eo.file=0,eo.gopher=70,eo.http=80,eo.https=443,eo.ws=80,eo.wss=443;var tg=/^(?:\.|%2e)$/i,ig=/^(?:\.|%2e){2}$/i;function eg(t){return tg.test(t)}function sg(t){return ig.test(t)}function ng(t){return void 0!==eo[t]}function Yt(t){return ng(t.Qp)}function rg(t){return""!==t.Kp||""!==t.Yp}function hg(t){var i=t.length;if(!(i>=2))return!1;if(!ag(t.slice(0,2)))return!1;if(2!==i){var e=t[2];if(47!==e&&92!==e&&63!==e&&35!==e)return!1}return!0}function og(t){return 2===t.length&&Iv.test(t[0])&&(":"===t[1]||"|"===t[1])}function ag(t){return 2===t.length&&og(Jv(t))}function ug(t){return og(t)&&":"===t[1]}function cg(t){var i=t.Jp;0!==i.length&&("file"===t.Qp&&1===i.length&&ug(i[0])||i.pop())}function dg(t){return null===t.Zp||Fc===t.Zp||t.$p||"file"===t.Qp}var lg=-1,fg=/\t|\n|\r/g,vg=/^[\x00-\x1f ]+|[\x00-\x1f ]+$/g;function _g(t,i,e,s){void 0===e&&(e=null),void 0===s&&(s=null),e||(e=new pg,t=t.replace(vg,""));var n=null!==s?s:0;i=i||null;for(var r=[],h=!1,o=!1,a=!1,u=r_(t=t.replace(fg,"")),c=u.length,d=0;d<=c;){var l=d<c?u[d]:lg;switch(n){case 0:if(!Wv(l)){if(null===s){r.length=0,n=2;continue}throw new g("Invalid scheme")}r.push(Xv(l)),n=1;break;case 1:if(zv(l)||43===l||45===l||46===l)r.push(Xv(l));else{if(58!==l){if(null===s){r.length=0,n=2,d=0;continue}throw new g("Invalid scheme")}var f=d_(r);if(null!==s){if(ng(e.Qp)&&!ng(f))return;if(!ng(e.Qp)&&ng(f))return;if((rg(e)||null!==e.im)&&"file"===f)return;if("file"===e.Qp&&(e.Zp===Fc||null===e.Zp))return}if(e.Qp=f,null!==s)return void(Yt(e)&&e.im===eo[e.Qp]&&(e.im=null));r.length=0,"file"===e.Qp?n=13:Yt(e)&&i&&i.Qp===e.Qp?n=3:Yt(e)?n=7:47===u[d+1]?(n=4,d+=1):(e.$p=!0,e.Jp.push(""),n=18)}break;case 2:if(!i||i.$p&&35!==l)throw new g("Invalid scheme");i.$p&&35===l?(e.Qp=i.Qp,e.Jp=i.Jp.slice(),e.Gp=i.Gp,e.nm="",e.$p=!0,n=20):"file"!==i.Qp?(n=5,d-=1):(n=13,d-=1);break;case 3:47===l&&47===u[d+1]?n=8:(n=5,d-=1);break;case 4:47===l?n=9:(n=17,d-=1);break;case 5:e.Qp=i.Qp,lg===l?(e.Kp=i.Kp,e.Yp=i.Yp,e.Zp=i.Zp,e.im=i.im,e.Jp=i.Jp.slice(),e.Gp=i.Gp):47===l?n=6:63===l?(e.Kp=i.Kp,e.Yp=i.Yp,e.Zp=i.Zp,e.im=i.im,e.Jp=i.Jp.slice(),e.Gp="",n=19):35===l?(e.Kp=i.Kp,e.Yp=i.Yp,e.Zp=i.Zp,e.im=i.im,e.Jp=i.Jp.slice(),e.Gp=i.Gp,e.nm="",n=20):92===l&&Yt(e)?n=6:(e.Kp=i.Kp,e.Yp=i.Yp,e.Zp=i.Zp,e.im=i.im,e.Jp=i.Jp.slice(),e.Jp.pop(),n=17,d-=1);break;case 6:!Yt(e)||47!==l&&92!==l?47===l?n=9:(e.Kp=i.Kp,e.Yp=i.Yp,e.Zp=i.Zp,e.im=i.im,n=17,d-=1):n=8;break;case 7:if(47!==l||47!==u[d+1]){n=8;continue}n=8,d+=1;break;case 8:47!==l&&92!==l&&(n=9,d-=1);break;case 9:if(64===l){h&&r.unshift(37,52,48),h=!0;for(var v=0;v<r.length;v++){var _=r[v];if(58!==_||a){var p=d_(k_(_,A_));a?e.Yp+=p:e.Kp+=p}else a=!0}r.length=0}else if(lg===l||47===l||63===l||35===l||Yt(e)&&92===l){if(h&&0===r.length)throw new g("Invalid host");d-=r.length+1,r.length=0,n=10}else r.push(l);break;case 10:case 11:if(null!==s&&"file"===e.Qp)d-=1,n=15;else if(58!==l||o)if(lg===l||47===l||63===l||35===l||Yt(e)&&92===l){if(d-=1,Yt(e)&&0===r.length)throw new g("Invalid host");if(null!==s&&0===r.length&&(rg(e)||null!==e.im))return;var m=N_(d_(r),Yt(e));if(e.Zp=m,r.length=0,n=16,null!==s)return}else 91===l?o=!0:93===l&&(o=!1),r.push(l);else{if(0===r.length)throw new g("Invalid host");var w=N_(d_(r),Yt(e));if(e.Zp=w,r.length=0,n=12,11===s)return}break;case 12:if(qv(l))r.push(l);else{if(!(lg===l||47===l||63===l||35===l||Yt(e)&&92===l||null!==s))throw new g("Invalid port");if(0!==r.length){var y=x(d_(r),10);if(y>65535)throw new g("Invalid port");e.im=y===eo[e.Qp]?null:y,r.length=0}if(null!==s)return;n=16,d-=1}break;case 13:e.Qp="file",47===l||92===l?n=14:i&&"file"===i.Qp?lg===l?(e.Zp=i.Zp,e.Jp=i.Jp.slice(),e.Gp=i.Gp):63===l?(e.Zp=i.Zp,e.Jp=i.Jp.slice(),e.Gp="",n=19):35===l?(e.Zp=i.Zp,e.Jp=i.Jp.slice(),e.Gp=i.Gp,e.nm="",n=20):(hg(u.slice(d))||(e.Zp=i.Zp,e.Jp=i.Jp.slice(),cg(e)),n=17,d-=1):(n=17,d-=1);break;case 14:47===l||92===l?n=15:(i&&"file"===i.Qp&&!hg(u.slice(d))&&(ug(i.Jp[0])?e.Jp.push(i.Jp[0]):e.Zp=i.Zp),n=17,d-=1);break;case 15:if(lg===l||47===l||92===l||63===l||35===l)if(d-=1,null===s&&ag(r))n=17;else if(0===r.length){if(e.Zp=Fc,null!==s)return;n=16}else{var b=N_(d_(r),Yt(e));if(0===b.Vp&&"localhost"===b.qp&&(b=Fc),e.Zp=b,null!==s)return;r.length=0,n=16}else r.push(l);break;case 16:Yt(e)?(n=17,47!==l&&92!==l&&(d-=1)):null===s&&63===l?(e.Gp="",n=19):null===s&&35===l?(e.nm="",n=20):lg!==l&&(n=17,47!==l&&(d-=1));break;case 17:if(lg===l||47===l||Yt(e)&&92===l||null===s&&(63===l||35===l)){var A=d_(r);if(sg(A)?(cg(e),47===l||Yt(e)&&92===l||e.Jp.push("")):!eg(A)||47===l||Yt(e)&&92===l?eg(A)||("file"===e.Qp&&0===e.Jp.length&&ag(r)&&(Fc!==e.Zp&&null!==e.Zp&&(e.Zp=Fc),r[1]=58,A=d_(r)),e.Jp.push(A)):e.Jp.push(""),r.length=0,"file"===e.Qp&&(lg===l||63===l||35===l))for(;e.Jp.length>1&&""===e.Jp[0];)e.Jp.shift();63===l?(e.Gp="",n=19):35===l&&(e.nm="",n=20)}else r.push.apply(r,k_(l,b_));break;case 18:63===l?(e.Gp="",n=19):35===l?(e.nm="",n=20):lg!==l&&(e.Jp[0]+=d_(k_(l,w_)));break;case 19:null===s&&35===l?(e.nm="",n=20):lg!==l&&(e.Gp+=d_(k_(l,Yt(e)?T_:S_)));break;case 20:lg===l||0===l||(e.nm+=d_(k_(l,y_)))}d++}return e}function gg(t,i,e,s){try{_g(t,i,e,s)}catch(t){}}var pg=function(){this.Qp="",this.Kp="",this.Yp="",this.Zp=null,this.im=null,this.Jp=[],this.Gp=null,this.nm=null,this.$p=!1};function mg(t){switch(t.Qp){case"blob":var i;try{i=_g(t.Jp[0],null)}catch(t){return $_}return mg(i);case"ftp":case"gopher":case"http":case"https":case"ws":case"wss":return function(t,i,e){return t+"://"+B_(i)+(null===e?"":":"+e)}(t.Qp,t.Zp,t.im);default:return $_}}var wg=function(){function t(t,i){var e,s=null;if(null!=i)if(function(t){return null!=t&&t instanceof wg&&"object"==typeof t.rc}(i))s=i.rc;else try{s=_g(String(i),null)}catch(t){throw new g("Invalid base URL: "+t.message)}try{e=_g(String(t),s)}catch(t){throw new g("Invalid URL: "+t.message)}var n=e.Gp;this.rc=e,this.Gp=function(t){var i=new xr;return null!==t&&X_(i,t),i}(n),this.Gp.rc=this}var i=t.prototype;return i.toString=function(){return this.href},i.toJSON=function(){return this.href},function(t,i,e){i&&Ev(t.prototype,i),e&&Ev(t,e)}(t,[{key:"href",get:function(){return function(t,i){void 0===i&&(i=!1);var e=t.Qp+":";if(null!==t.Zp?(e+="//",rg(t)&&(e+=t.Kp,""!==t.Yp&&(e+=":"+t.Yp),e+="@"),e+=B_(t.Zp),null!==t.im&&(e+=":"+t.im)):null===t.Zp&&"file"===t.Qp&&(e+="//"),t.$p)e+=t.Jp[0];else for(var s=0,n=t.Jp;s<n.length;s++)e+="/"+n[s];return null!==t.Gp&&(e+="?"+t.Gp),i||null===t.nm||(e+="#"+t.nm),e}(this.rc)},set:function(t){var i;try{i=_g(String(t),null)}catch(t){throw new g("Invalid URL: "+t.message)}this.rc=i,G_(this.Gp);var e=this.rc.Gp;null!==e&&X_(this.Gp,e)}},{key:"origin",get:function(){return mg(this.rc)}},{key:"protocol",get:function(){return this.rc.Qp+":"},set:function(t){gg(t+":",null,this.rc,0)}},{key:"username",get:function(){return this.rc.Kp},set:function(t){dg(this.rc)||(this.rc.Kp=E_(t,A_))}},{key:"password",get:function(){return this.rc.Yp},set:function(t){dg(this.rc)||(this.rc.Yp=E_(t,A_))}},{key:"host",get:function(){var t=this.rc,i=t.Zp;if(null===i)return"";var e=t.im,s=B_(i);return null!==e&&(s+=":"+e),s},set:function(t){this.rc.$p||gg(t,null,this.rc,10)}},{key:"hostname",get:function(){var t=this.rc.Zp;return null===t?"":B_(t)},set:function(t){this.rc.$p||gg(t,null,this.rc,11)}},{key:"port",get:function(){var t=this.rc.im;return null===t?"":""+t},set:function(t){dg(this.rc)||(""===t?this.rc.im=null:gg(t,null,this.rc,12))}},{key:"pathname",get:function(){var t=this.rc.Jp;return this.rc.$p?t[0]:0===t.length?"":"/"+t.join("/")},set:function(t){this.rc.$p||(this.rc.Jp.length=0,gg(t,null,this.rc,16))}},{key:"search",get:function(){var t=this.rc.Gp;return null===t||""===t?"":"?"+t},set:function(t){t=ut(t);var i=this.rc;if(""===t)return i.Gp=null,void G_(this.Gp);"?"===t[0]&&(t=t.slice(1)),i.Gp="",gg(t,null,i,19),X_(this.Gp,t)}},{key:"searchParams",get:function(){return this.Gp}},{key:"hash",get:function(){var t=this.rc.nm;return null===t||""===t?"":"#"+t},set:function(t){""!==t?("#"===t[0]&&(t=t.slice(1)),this.rc.nm="",gg(t,null,this.rc,20)):this.rc.nm=null}}]),t}();function yg(t){return t.document&&t.document.baseURI||t.location.href||""}function bg(){let t=s,i=t.location.href;for(;t!==s.top;){t=t.parent;try{i=t.location.href}catch(t){}}return i}r();var Ag=class{hm(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];Sv(...i)}um(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];uh(...i)}dm(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];Tv(...i)}lm(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];kv(t,...e)}Og(t,i){return u(t,i)}fm(t,i){return v(t,i)}Lg(t){c(t)}vm(t){p(t)}_m(){return this.gm._m()}pm(){return this.gm.pm()}wm(){return this.gm.wm()}ym(){return this.gm.ym()}Am(){return this.gm.Am()}Sm(t,i){return this.gm.Sm(t,i)}Tm(t){return this.gm.Tm(t)}get Em(){return this.xm}Dh(t,i){let e;return void 0===i&&(i=yg(s)),e="object"!=typeof i||i instanceof wg?i:i.href,new wg(t,e)}Pm(t,i){if(void 0===i&&(i=yg(s)),this.Im){const e=Q(i)?i:i.toString();return new self.URL(t,e).href}return this.Dh(t,i).href}get Zs(){return this.Cm}get Rm(){return{Dm:od&&od.userAgent.match(/Android /i)?"Android":"other",Nm:Boolean(od&&od.userAgent.match(/Android 8.0.0/i))}}get Bm(){return self&&self.location&&"https:"===self.location.protocol}get Mm(){return"languages"in od?od.languages.slice():[od.language]}constructor(){this.Mg=void 0,this.xm=new Sg,this.Cm=ov,this.Im=Tg(),self.performance&&self.performance.now?this.Mg=()=>self.performance.now():this.Mg=zo}},Sg=class{get Lm(){return od.oscpu}get Zs(){return od.platform}get Om(){return od.vendor}get Fm(){return od.vendorSub}};function Tg(){if(self.URL)try{const t=new self.URL("b","http://a");return t.pathname="c d","http://a/c%20d"===t.href}catch(t){}return!1}function Y(){return Y=w.assign||function(t){for(var i=1;i<arguments.length;i++){var e=arguments[i];for(var s in e)w.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},Y.apply(this,arguments)}function kg(){const t=w.create(null);return t.Um=void 0,delete t.Um,t}function Ba(){return new Ig}function re(){return new Cg}function Eg(t){const i=Ba();for(const e in t)_u.call(t,e)&&i.set(e,t[e]);return i}function xg(t){const i=[];return t.forEach(t=>i.push(t)),i}r(),r(),r();var Pg="undefined"!=typeof Map&&"entries"in Map.prototype?Map:void 0,Ig=Pg||function(){class t{next(){const t=this.index;return t<this.keys.length?(this.index++,{value:this.selector(this.data,this.keys[t]),done:!1}):{value:void 0,done:!0}}constructor(t,i){this.data=void 0,this.keys=void 0,this.index=0,this.selector=void 0,this.data=t,this.selector=i,this.keys=w.keys(t)}}return class{get(t){return this.data[t]}set(t,i){return this.has(t)||this.size++,this.data[t]=i,this}has(t){return t in this.data}delete(t){return!!this.has(t)&&(this.size--,delete this.data[t],!0)}clear(){this.data=kg(),this.size=0}keys(){return new t(this.data,(t,i)=>i)}values(){return new t(this.data,(t,i)=>t[i])}entries(){return new t(this.data,(t,i)=>[i,t[i]])}forEach(t){for(const i in this.data)t(this.data[i],i)}constructor(){this.data=kg(),this.size=0}}}();var Cg=Pg||function(){class t{next(){const t=this.Vm.next();return t.done?t:{value:this.Hm(t.value),done:!1}}constructor(t,i){this.Vm=void 0,this.Hm=void 0,this.Vm=t,this.Hm=i}}return class{get size(){return this.Wm.size}get(t){return this.Wm.get(""+t)}set(t,i){return this.Wm.set(""+t,i),this}has(t){return this.Wm.has(""+t)}delete(t){return this.Wm.delete(""+t)}clear(){this.Wm.clear()}keys(){return new t(this.Wm.keys(),t=>Number(t))}values(){return this.Wm.values()}entries(){return new t(this.Wm.entries(),t=>{let[i,e]=t;return[Number(i),e]})}forEach(t){this.Wm.forEach((i,e)=>{t(i,Number(e))})}constructor(){this.Wm=Ba()}}}();r(),r();var Rg=function(t){return t.qm="9a04f079-9840-4286-ab92-e65be0885f95",t.zm="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",t.Gm="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",t.Xm="e2719d58-a985-b3c9-781a-b030af78d30e",t.jm="94ce86fb-07ff-4f43-adb8-93d2fa968ca2",t}({}),Dg="urn:mpeg:dash:mp4protection:2011",Ng="cenc",Bg="sinf",Mg="skd",Lg="keyids",Og="9a04f079-9840-4286-ab92-e65be0885f95",Fg="urn:uuid:"+Og,Ug="com.microsoft.playready",Vg="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",Hg="urn:uuid:"+Vg,Wg="com.widevine.alpha",qg="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",zg="urn:uuid:"+qg,Gg="org.w3.clearkey",Xg="e2719d58-a985-b3c9-781a-b030af78d30e",jg="urn:uuid:"+Xg,Qg="94ce86fb-07ff-4f43-adb8-93d2fa968ca2",de="urn:uuid:"+Qg,Kg="com.apple.fps.1_0",Yg="identity";r();var po=function(t){return t.qm="playready",t.zm="widevine",t.jm="fairplay",t.Gm="clearkey",t.Xm="clearkey_dash_if",t.Qm="aes128",t}({}),Jg={Km:po.qm,Ym:Ug,Jm:"cenc",Zm:Og,$m:Fg,iw:"PlayReady"},ot={Km:po.zm,Ym:Wg,Jm:"cenc",Zm:Vg,$m:Hg,iw:"Widevine"},Zg={Km:po.jm,Ym:Kg,Jm:"skd",Zm:Qg,$m:de,iw:"FairPlay"},$g={Km:po.jm,Ym:"com.apple.fps",Jm:"sinf",Zm:Qg,$m:de,iw:"FairPlay"},Xc={Km:po.Gm,Ym:Gg,Jm:"cenc",Zm:qg,$m:zg,iw:"ClearKey"},tp={Km:po.Xm,Ym:Gg,Jm:"keyids",Zm:Xg,$m:jg,iw:"ClearKey DASH-IF"},ip=[Jg,ot,Zg,Xc,tp],ep=[Jg,ot,$g,Xc,tp];function sp(t){return ip.filter(i=>i.$m===t.toLowerCase())}r();var zh="function"==typeof String.prototype.replaceAll?(t,i,e)=>t.replaceAll(i,e):(t,i,e)=>t.split(i).join(e);function nl(t,i){return it(t)&&-1!==t.indexOf(i)}var Xt="function"==typeof String.prototype.startsWith?(t,i)=>it(t)&&t.startsWith(i):(t,i)=>it(t)&&t.substr(0,i.length)===i,Rc="function"==typeof String.prototype.endsWith?(t,i)=>it(t)&&t.endsWith(i):(t,i)=>it(t)&&t.substr(t.length-i.length,i.length)===i;function Jh(t,i){return t.length===i.length&&t.toUpperCase()===i.toUpperCase()}var np="function"==typeof String.prototype.repeat?(t,i)=>t.repeat(i):(t,i)=>{let e=0|i;if(0===t.length||0===e)return"";let s=t,n="";for(;1&~e||(n+=s),e>>>=1,0!==e;)s+=s;return n},Wa="function"==typeof String.prototype.padStart?(t,i,e)=>(void 0===e&&(e=" "),t.padStart(i,e)):(t,i,e)=>{void 0===e&&(e=" ");let s=e;const n=(0|i)-t.length;return n<=0?t:(n>s.length&&(s+=np(s,n/s.length)),s.slice(0,n)+t)},rp=(String.prototype.padEnd,16384),hp="function"==typeof String.fromCodePoint?t=>t.length<=rp?String.fromCodePoint(...t):ap(t,String.fromCodePoint):t=>{const i=[];for(let e of t)e>65535&&(e-=65536,i.push(e>>>10&1023|55296),e=56320|1023&e),i.push(e);return op(i)};function op(t){return t.length<=rp?String.fromCharCode(...t):ap(t,String.fromCharCode)}function ap(t,i){const e=[];for(let s=0;s<t.length;s+=rp)e.push(i(...t.slice(s,s+rp)));return e.join("")}function up(t){return t.replace(/[\\"]/g,t=>"\\"+t)}var cp=zs.u_&&zs.d_>=42||zs.W_&&zs.z_>=38||zs.B_||zs.F_||zs.Y_&&zs.Z_>=29;function dp(t,i){return nl(t,"audio")?{initDataTypes:["cenc"],audioCapabilities:[Y({contentType:t},i?{robustness:"SW_SECURE_CRYPTO"}:{})]}:{initDataTypes:["cenc"],videoCapabilities:[Y({contentType:t},i?{robustness:"SW_SECURE_CRYPTO"}:{})]}}function Vc(){return void 0!==od&&"function"==typeof od.requestMediaKeySystemAccess}function lp(){return"undefined"!=typeof HTMLMediaElement&&void 0!==HTMLMediaElement.prototype.webkitGenerateKeyRequest&&void 0!==HTMLMediaElement.prototype.webkitAddKey&&void 0!==HTMLMediaElement.prototype.webkitCancelKeyRequest}var fp=class{Am(){return this.Tm(ot)}pm(){return this.Tm(Xc)}ym(){return this.Tm(Jg)}wm(){return this.Tm(Zg)}Tm(t){const i=t.$m,e=this.ew.get(i);if(e)return e;const s=this.Sm(t,'video/mp4; codecs="avc1.42000a"');return this.ew.set(i,s),s}async Sm(t,i){try{return await this.hw.nw(t.Ym,[dp(i,!0)]),!0}catch(e){try{return await this.hw.nw(t.Ym,[dp(i,!1)]),!0}catch(t){return!1}}}_m(){return this.ow||(this.ow=this.aw()),this.ow}async aw(){return"https:"!==s.location.protocol&&(!!cp&&!await this.pm())}constructor(t){this.hw=void 0,this.ew=Ba(),this.ow=void 0,this.hw=t}};function vp(t,i,e){if("function"==typeof e)e.call(t,i);else for(const s of e)s.call(t,i)}r(),r(),r(),r(),r(),r();var Ne=class{wn(t,i){if("function"==typeof i)if("string"==typeof t)this.uw(t,i);else for(const e of t)this.uw(e,i)}uw(t,i){const e=this.cw[t];void 0===e?this.cw[t]=i:"function"==typeof e?this.cw[t]=[e,i]:0===this.dw?e.push(i):this.cw[t]=e.concat(i)}lw(t){if("function"!=typeof t)return;const i=this.fw;void 0===i?this.fw=t:"function"==typeof i?this.fw=[i,t]:0===this.dw?i.push(t):this.fw=i.concat(t)}Vo(){this.cw=kg(),this.fw=void 0}So(t){this.dw++;const i=this.cw[t.type],e=this.fw;void 0!==i&&vp(this._w,t,i),void 0!==e&&vp(this._w,t,e),this.dw--}mn(t,i){if("function"==typeof i)if("string"==typeof t)this.gw(t,i);else for(const e of t)this.gw(e,i)}gw(t,i){const e=this.cw[t];void 0!==e&&("function"==typeof e?e===i&&(this.cw[t]=void 0):0===this.dw?_e(e,i):this.cw[t]=of(e,i))}pw(t){if("string"==typeof t)this.cw[t]=void 0;else for(const i of t)this.cw[i]=void 0}mw(t){const i=this.fw;void 0!==i&&("function"==typeof i?i===t&&(this.fw=void 0):0===this.dw?_e(i,t):this.fw=of(i,t))}ww(t,i){return new Promise((e,s)=>{if(i&&i.Hg)return s(new Qc);const n=t=>{h(),e(t)},r=()=>{h(),s(new Qc)},h=()=>{this.mn(t,n),i&&i.jg(r)};this.wn(t,n),i&&i.Xg(r)})}constructor(t){this.cw=kg(),this.fw=void 0,this.dw=0,this._w=void 0,this.Rs=t=>{this.So(t)},this._w=null!=t?t:this}},_p=class extends Ne{So(t){Ht(()=>{super.So(t)})}},je=class extends Ne{lw(t){super.lw(t)}mw(t){super.mw(t)}};r(),r();var gp=class{constructor(t,i=new Date){this.type=void 0,this.date=void 0,this.type=t,this.date=i}};r();var d=function(t){return t.yw="Aw",t.Sw="Tw",t.Ew="contentprotectionerror",t.xw="contentprotectionsuccess",t.Pw="currentsourcechange",t.Iw="destroy",t.Cw="durationchange",t.Rw="emptied",t.Dw="encrypted",t.Nw="ended",t.Bw="Mw",t.Lw="Ow",t.Fw="Uw",t.Vw="Hw",t.Ww="loadstart",t.qw="manifestupdate",t.zw="nosupportedrepresentationfound",t.Gw="offline",t.Xw="online",t.jw="pause",t.uo="play",t.Qw="progress",t.Kw="ratechange",t.Yw="representationchange",t.Jw="resize",t.Zw="seeked",t.$w="seeking",t.iy="segmenterror",t.ey="segmentnotfound",t.sy="manifesterror",t.oy="uy",t.ly="vy",t._y="gy",t.do="sourcechange",t.py="timeupdate",t.wy="volumechange",t.yy="by",t.Ay="Sy",t.LICENSE_REQUEST_GENERATED="Ty",t.Ey="metricschange",t}({}),pp=["cenc"],mp=["cbcs","cbcs-1-9"],wp=class extends gp{constructor(t){super(d.Ay),this.xy=void 0,this.xy=t}},yp=class extends gp{constructor(t){super(d.LICENSE_REQUEST_GENERATED),this.Py=void 0,this.Py=t}},bp=class extends gp{constructor(t,i,e,s){super("Iy"),this.Cy=void 0,this.Ry=void 0,this.Iy=void 0,this.Dy=void 0,this.Cy=t,this.Ry=i,this.Iy=e,this.Dy=s}},Ap=class extends gp{constructor(){super("lt")}},jr=function(t){return t.Dw="Ny",t.By="My",t}({}),Sp=class extends gp{constructor(t,i){super("Ny"),this.Jm=void 0,this.Py=void 0,this.Jm=t,this.Py=i}},Tp=class extends gp{constructor(){super("My")}};r(),r(),r();var Pr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),kp=/[\t\n\f\r ]/g;function Mr(t){return 43===t?62:47===t?63:t>=48&&t<=57?t-48+52:t>=65&&t<=90?t-65:t>=97&&t<=122?t-97+26:Ep()}function Ep(){throw new m("Invalid base64 input")}function Cn(t){let i=t;kp.test(i)&&(i=i.replace(kp,""));let e=i.length;e%4==0&&e>=1&&"="===i[e-1]&&(e>=2&&"="===i[e-2]?e-=2:e-=1,i=i.substr(0,e));const s=e%4;if(1===s)return Ep();const n=0===s?0:4-s,r=new j(function(t,i){return 3*(t+i)/4-i}(e,n)),h=n>0?e-4:e;let o,a=0,u=0;for(;a<h;a+=4)o=Mr(i.charCodeAt(a))<<18|Mr(i.charCodeAt(a+1))<<12|Mr(i.charCodeAt(a+2))<<6|Mr(i.charCodeAt(a+3)),r[u++]=o>>16&255,r[u++]=o>>8&255,r[u++]=255&o;return 2===n?(o=Mr(i.charCodeAt(a))<<2|Mr(i.charCodeAt(a+1))>>4,r[u++]=255&o):1===n&&(o=Mr(i.charCodeAt(a))<<10|Mr(i.charCodeAt(a+1))<<4|Mr(i.charCodeAt(a+2))>>2,r[u++]=o>>8&255,r[u++]=255&o),r}function xp(t,i,e){return Pr[t>>2]+Pr[(3&t)<<4|i>>4]+Pr[(15&i)<<2|e>>6]+Pr[63&e]}function Pp(t,i,e){const s=[];for(let n=i;n<e;n+=3)s.push(xp(t[n],t[n+1],t[n+2]));return s.join("")}function wa(t){const i=t.length,e=i%3,s=[],n=i-e;for(let i=0;i<n;i+=16383)s.push(Pp(t,i,_.min(n,i+16383)));if(1===e){const e=t[i-1];s.push(Pr[e>>2]+Pr[(3&e)<<4]+"==")}else if(2===e){const e=t[i-2],n=t[i-1];s.push(Pr[e>>2]+Pr[(3&e)<<4|n>>4]+Pr[(15&n)<<2]+"=")}return s.join("")}function Ip(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/[=]/g,"")}function Ru(t,i){const e=i.ac,s=t.getUint8(e>>3),n=1<<7-(7&e);return i.Ly(1),(s&n)===n?1:0}function vs(t,i,e){let s=0;for(let n=0;n<e;n++)s=2*s+Ru(t,i);return s}r(),r();var Cp=class t{get ac(){return this.uc}Ly(t){this.uc+=t}Oy(t){this.uc=t}Fy(){return new t(this.ac)}constructor(t=0){this.uc=void 0,this.uc=t}};var Rp=_.clz32||function(t){let i=32,e=t>>16;return e&&(i-=16,t=e),e=t>>8,e&&(i-=8,t=e),e=t>>4,e&&(i-=4,t=e),e=t>>2,e&&(i-=2,t=e),e=t>>1,e?i-2:i-t};function Dp(t){if(t>=55296&&t<=57343)throw new m("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value")}function Np(t,i){return t>>i&63|128}function Bp(t,i){4294967168&t?(4294965248&t?4294901760&t?4292870144&t||(i.push(t>>18&7|240),i.push(Np(t,12)),i.push(Np(t,6))):(Dp(t),i.push(t>>12&15|224),i.push(Np(t,6))):i.push(t>>6&31|192),i.push(63&t|128)):i.push(t)}function Mp(t,i){if(i.ac>=t.length)throw new m("Invalid byte index");const e=255&t[i.ac];if(i.Ly(1),128==(192&e))return 63&e;throw new m("Invalid continuation byte")}function Lp(t,i){const e=i.ac;if(e>t.length)throw new m("Invalid byte index");if(e===t.length)return!1;const s=255&t[e];if(i.Ly(1),!(128&s))return s;if(192==(224&s)){const e=(31&s)<<6|Mp(t,i);if(e>=128)return e;throw new m("Invalid continuation byte")}if(224==(240&s)){const e=(15&s)<<12|Mp(t,i)<<6|Mp(t,i);if(e>=2048)return Dp(e),e;throw new m("Invalid continuation byte")}if(240==(248&s)){const e=(7&s)<<18|Mp(t,i)<<12|Mp(t,i)<<6|Mp(t,i);if(e>=65536&&e<=1114111)return e}throw new m("Invalid UTF-8 detected")}r(),r();var Op=[128,64,32,16,8,4,2,1],Fp=class{Uy(t){return Up(this.Vy,t)}constructor(t){this.Vy=void 0,this.Vy=t}};function Up(t,i){return(t&i)===i}function Ut(t,i){return Up(t,Op[i])}function Cl(t,i){const e=t.getUint8(i.ac);return i.Ly(1),e}function Vp(t,i,e){t.setUint8(i.ac,e),i.Ly(1)}function kt(t,i,e){const s=yi(ye(t),i.ac,i.ac+e);return i.Ly(s.byteLength),s}function Ar(t,i,e){ye(t).set(ye(e),i.ac),i.Ly(e.byteLength)}function Hp(t,i,e){return i.ac+e<=t.byteLength}function Wp(t,i,e,s){return void 0===s&&(s=!1),s?function(t,i,e){let s=0,n=1;for(let r=0;r<e;r++)s+=Cl(t,i)*n,n*=256;return s}(t,i,e):function(t,i,e){let s=0;for(let n=0;n<e;n++)s=256*s+Cl(t,i);return s}(t,i,e)}function qp(t,i){const e=t.getUint8(i.ac);return i.Ly(1),e}function Rn(t,i,e){void 0===e&&(e=!1);const s=t.getUint16(i.ac,e);return i.Ly(2),s}function zp(t,i,e,s){void 0===s&&(s=!1),t.setUint16(i.ac,e,s),i.Ly(2)}function ti(t,i,e){void 0===e&&(e=!1);const s=t.getUint32(i.ac,e);return i.Ly(4),s}function kl(t,i,e,s){void 0===s&&(s=!1),t.setUint32(i.ac,e,s),i.Ly(4)}function qt(t,i,e){void 0===e&&(e=!1);const s=ti(t,i,e),n=ti(t,i,e),r=e?n:s,h=e?s:n;return yo.fromBits(h,r,!0)}function Gp(t,i,e,s){void 0===s&&(s=!1);const n=e.getHighBitsUnsigned(),r=e.getLowBitsUnsigned(),h=s?n:r;kl(t,i,s?r:n,s),kl(t,i,h,s)}function Xp(t,i){return lt(t,i)}function jp(t,i,e){return op(am(kt(t,i,e)))}function Qp(t,i){const e=Cl(t,i);let s;return 128&e?192==(224&e)?s=64*(31&e)+(63&Cl(t,i)):224==(240&e)?s=4096*(15&e)+64*(63&Cl(t,i))+(63&Cl(t,i)):240==(248&e)&&(s=262144*(7&e)+4096*(63&Cl(t,i))+64*(63&Cl(t,i))+(63&Cl(t,i))):s=e,s}function lt(t,i){return Kp(t,i,!0)}function Kp(t,i,e){const s=[];for(;i.ac<t.byteLength;){const n=Cl(t,i);if(e&&!n)break;s.push(n)}return op(s)}function Yp(t,i,e){const s=e.length;for(let n=0;n<s;n+=1){Vp(t,i,e.charCodeAt(n))}}function Jp(t,i){if(!(i.ac+2<=t.byteLength))return;const e=t.getUint8(i.ac),s=t.getUint8(i.ac+1);return(254!==e||255!==s)&&(255===e&&254===s||void 0)}function Zp(t,i){const e=Jp(t,i);return void 0!==e&&i.Ly(2),zc(t,i,!0===e)}function zc(t,i,e){return void 0===e&&(e=!1),$p(t,i,e,!0)}function $p(t,i,e,s){const n=[];for(;i.ac+2<=t.byteLength;){const r=Rn(t,i,e);if(s&&!r)break;n.push(r)}return op(n)}function tm(t,i,e,s){void 0===s&&(s=!1);const n=e.length;for(let r=0;r<n;r+=1){zp(t,i,e.charCodeAt(r),s)}}function io(t){return Kp(dh(t),new oi,!1)}function Gc(t){const i=new j(t.length);return Yp(dh(i),new oi,t),i}function im(t,i){return void 0===i&&(i=!1),$p(dh(t),new oi,i,!1)}function em(t,i){void 0===i&&(i=!1);const e=new j(2*t.length);return tm(dh(e),new oi,t,i),e}function sm(t,i){return i.ac+3<=t.byteLength&&(239===t.getUint8(i.ac)&&187===t.getUint8(i.ac+1)&&191===t.getUint8(i.ac+2))}function nm(t,i){return function(t,i,e){const s=[],n=sm(t,i);n&&i.Ly(3);for(;i.ac<t.byteLength;){const n=Qp(t,i);if(void 0===n)break;if(e&&0===n)break;s.push(n)}return hp(s)}(t,i,!0)}function qc(t){return function(t){return hp(t)}(function(t,i){const e=[],s=new oi;let n;if(!i){if(n=Lp(t,s),!1===n)return e;65279===n||e.push(n)}for(;!1!==(n=Lp(t,s));)e.push(n);return e}(ye(t)))}function rm(t){return new j(function(t){const i=[];for(const e of t)Bp(e,i);return i}(function(t){const i=[];let e=0;const s=t.length;for(;e<s;){const n=t.charCodeAt(e++);if(n>=55296&&n<=56319&&e<s){const s=t.charCodeAt(e++);56320==(64512&s)?i.push(((1023&n)<<10)+(1023&s)+65536):(i.push(n),e--)}else i.push(n)}return i}(t)))}function hm(t,i){if(sm(t,i))return nm(t,i);if(void 0!==Jp(t,i))return Zp(t,i);if(i.ac+4<=t.byteLength){if(0===t.getUint8(i.ac)&&0===t.getUint8(i.ac+2))return zc(t,i,!1);if(0===t.getUint8(i.ac+1)&&0===t.getUint8(i.ac+3))return zc(t,i,!0)}return nm(t,i)}function yi(t,i,e){return void 0===i&&(i=0),void 0===e&&(e=t.byteLength),new j(t.buffer,t.byteOffset+i,e-i)}function Wu(t,i,e){return void 0===i&&(i=0),void 0===e&&(e=t.byteLength),new DataView(t.buffer,t.byteOffset+i,e-i)}function dh(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function ye(t){return new j(t.buffer,t.byteOffset,t.byteLength)}function om(t){return t instanceof ArrayBuffer||Kc(t)}function aa(t){return t instanceof ArrayBuffer?new j(t):ye(t)}function di(t,i,e){return void 0===i&&(i=0),void 0===e&&(e=t.byteLength),t.slice?t.slice(i,e):nr(yi(t,i,e))}function nr(t){if(t.slice)return t.slice(0);{const i=new j(t.byteLength);return i.set(t,0),i}}function am(t){return[].slice.call(t)}var oi=class t{get ac(){return this.uc}Ly(t){this.uc+=t}Oy(t){this.uc=t}Fy(){return new t(this.ac)}Hy(){return new Cp(this.ac<<3)}constructor(t=0){this.uc=void 0,this.uc=t}};function um(t){let i=t.toLowerCase(),e=0,s=0;Xt(i,"0x")&&(i=i.substring(2));const n=new j(_.ceil(i.length/2));for(1&~i.length||(e=1,n[s++]=x(i[0],16));e<i.length;e+=2)n[s++]=x(i.substr(e,2),16);return n}function cm(t){return.001*t}var dm=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]","[object DataView]"],Kc=ArrayBuffer.isView||(t=>t&&Ct(dm,qd.call(t)));function Qo(t,i){if(t===i)return!0;if(t.byteLength!==i.byteLength)return!1;return ko(new j(t),new j(i))}function ko(t,i){if(t===i)return!0;if(t.byteLength!==i.byteLength)return!1;if(t.buffer===i.buffer&&t.byteOffset===i.byteOffset)return!0;for(let e=0;e<t.length;e+=1)if(t[e]!==i[e])return!1;return!0}function lm(t,i){return t===i||ko(aa(t),aa(i))}function fm(t){const i=t.reduce((t,i)=>t+i.byteLength,0);return vm(t,i)}function vm(t,i){const e=new j(i);let s=0;for(const i of t)e.set(i,s),s+=i.byteLength;return e}function _m(t,i,e){const s=new j(t.byteLength+i.byteLength),n=yi(t,0,e),r=yi(t,e);return s.set(n),s.set(i,e),s.set(r,e+i.byteLength),s}function gm(t){return Cn(t).buffer}function pm(t){return wa(new j(t))}function ll(t){return wa(Gc(t))}var Yc=new j([0]).buffer,mm=class{get Wy(){return this.nc.length}qy(t){for(const i of this.nc)if(lm(i[0],t))return!0;return!1}zy(t){for(const i of this.nc)if(lm(i[0],t))return i[1]}Gy(t,i){for(const e of this.nc)if(lm(e[0],t))return void(e[1]=i);this.nc.push([t,i])}Xy(t,i){this.nc.forEach(i=>t(i[1],i[0]),i)}jy(){Wt(this.nc)}constructor(){this.nc=void 0,this.nc=[]}};r();var Ga=class{Qy(t){this.Qd&&(this.Qd(t),this.zg())}Ky(t){this.Kd&&(this.Kd(t),this.zg())}Zg(){this.Yy.catch(gs),this.Ky(new Qc)}$g(t){t.then(t=>this.Qy(t),t=>this.Ky(t))}zg(){this.Qd=void 0,this.Kd=void 0}constructor(){this.Yy=void 0,this.Qd=void 0,this.Kd=void 0,this.Yy=new Promise((t,i)=>{this.Qd=t,this.Kd=i})}};function wm(){return new j([8,4]).buffer}function ym(t,i){return t===Ug?function(t){if(t.byteLength<2*bm.length)return t;const i=new DataView(t,0,2*bm.length),e=im(i,!0);if(e===bm)return t;return function(t){const i='<PlayReadyKeyMessage type="LicenseAcquisition"><LicenseAcquisition Version="1"><Challenge encoding="base64encoded">',e='</Challenge><HttpHeaders><HttpHeader><name>Content-Type</name><value>text/xml; charset=utf-8</value></HttpHeader><HttpHeader><name>SOAPAction</name><value>"http://schemas.microsoft.com/DRM/2007/03/protocols/AcquireLicense"</value></HttpHeader></HttpHeaders></LicenseAcquisition></PlayReadyKeyMessage>',s=""+i+pm(t)+e;return em(s,!0).buffer}(t)}(i):i}r();var bm="<PlayReady";r(),r();var Am=class extends Qr{constructor(t,i,e,s){super(t,s),this.Jy=void 0,this.Zy=void 0,this.Jy=i,this.Zy=e}};r(),r(),r(),r(),r();var Sm=function(t,i){return(Sm=w.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)w.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])})(t,i)};function Dt(t,i){if("function"!=typeof i&&null!==i)throw new g("Class extends value "+String(i)+" is not a constructor or null");function e(){this.constructor=t}Sm(t,i),t.prototype=null===i?w.create(i):(e.prototype=i.prototype,new e)}var Tm=function(){return Tm=w.assign||function(t){for(var i,e=1,s=arguments.length;e<s;e++)for(var n in i=arguments[e])w.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n]);return t},Tm.apply(this,arguments)};function km(t,i,e){return t.indexOf?t.indexOf(i,e):Array.prototype.indexOf.call(t,i,e)}r(),r(),r(),r(),r(),r(),r();var Em=function(){function t(t,i){this.$y=t,this.ib=i}return t.prototype.get=function(t){var i=this.$y.get(t);if(0===this.ib||void 0===i)return i;var e=this.$y.get(t+1)||0,s=i&(1<<8-this.ib)-1,n=e>>8-this.ib;return(s<<this.ib)+n},t.prototype.getBit=function(t){if(!(t<0)){var i=this.$y.get(_.floor((t+this.ib)/8));if(void 0!==i)return(i&1<<7-this.ib-t%8)>0?1:0}},w.defineProperty(t.prototype,"bitLength",{get:function(){return this.$y.bitLength-this.ib},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"length",{get:function(){return this.$y.length},enumerable:!1,configurable:!0}),t}();r(),r();_.pow(2,-52);function xm(t,i,e){return _.min(_.max(t,i),e)}function Pm(t){if(t<=0)return 0;for(var i=0;t>>i>0;)i++;return i>0&&t===1<<i-1&&i--,i}function Im(t,i){return t>>8-i}function Cm(t,i){return t&(1<<i)-1}var H=function(){function t(t){this.eb=t,this.sb=0,this.hb=0}return w.defineProperty(t.prototype,"totalBitsRead",{get:function(){return 8*this.sb+this.hb},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"done",{get:function(){return this.sb===this.eb.length&&0===this.hb},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"location",{get:function(){return{byte:this.sb,bit:this.hb}},enumerable:!1,configurable:!0}),t.prototype.copy=function(){var i=new t(this.eb);return i.seek(this.sb,this.hb),i},t.prototype.canReadBits=function(t){return 8*this.sb+t+this.hb<=8*this.eb.length},t.prototype.canReadBytes=function(t){return 0===this.hb?this.sb+t<=this.eb.length:this.sb+t<this.eb.length},t.prototype.incBit=function(){this.hb++,this.hb>7&&(this.sb++,this.hb=0)},t.prototype.seek=function(t,i){this.sb=t,this.hb=i},t.prototype.peekBit=function(){if(!this.canReadBits(1))throw new m("Cannot read past end of buffer.");return this.eb.get(this.sb)>>7-this.hb&1},t.prototype.readBit=function(){var t=this.peekBit();return this.incBit(),t},t.prototype.readByte=function(){if(!this.canReadBytes(1))throw new m("Cannot read past end of buffer.");if(0===this.hb)return this.eb.get(this.sb++);var t=Cm(this.eb.get(this.sb),8-this.hb),i=Im(this.eb.get(this.sb+1),this.hb);return this.sb++,t<<this.hb|i},t.prototype.readBits=function(t){if(!this.canReadBits(t))throw new m("Cannot read past end of buffer.");for(var i=[],e=0;e<t;e++)i.push(this.readBit());return i},t.prototype.readUInt=function(t){if(t>32)throw new m("The max bitlength that can be provided is 32.");if(!this.canReadBits(t))throw new m("Cannot read past end of buffer.");var i=0;if(0===this.hb&&t%8==0)for(var e=t-8;e>=0;e-=8)i|=this.readByte()<<e;else for(e=t-1;e>=0;e--)i|=this.readBit()<<e;return i},t.prototype.readInt=function(t){if(t>32)throw new m("The max bitlength that can be provided is 32.");if(!this.canReadBits(t))throw new m("Cannot read past end of buffer.");var i=this.readUInt(t);return 0===(i&1<<t-1)?i:i-_.pow(2,t)},t.prototype.readExponentialGolombCode=function(){for(var t=0;0===this.readBit();)t++;var i=1<<t;return i+=this.readUInt(t)-1},t.prototype.readSignedExponentialGolombCode=function(){var t=this.readExponentialGolombCode();return 1&t?(t+1)/2:-t/2},t.prototype.skipBits=function(t){if(!this.canReadBits(t))throw new m("Skipping over the buffer edge is not allowed.");var i=this.hb+t;this.sb+=i>>3,this.hb=7&i},t.prototype.readBool=function(){return this.readBit()>0},t.prototype.readString=function(t){if(!this.canReadBytes(t))throw new m("Cannot read past end of buffer.");for(var i=[],e=0;e<t;e++)i.push(this.readByte());return String.fromCharCode.apply(String,i)},t}();r(),r(),r();var Rm=function(t,i){return t===i?0:t<i?-1:t>i?1:S(t)?S(i)?0:1:-1},Pi=function(){function t(){this.ob=[],this.ub=[],this.fb=0}return t.from=function(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];for(var s=new t,n=0,r=i;n<r.length;n++){var h=r[n];s.pushRange(h)}return s},t.prototype.pushRange=function(t,i,e){if(void 0===i&&(i=0),void 0===e&&(e=t.length),e<0)throw new m("The buffer length must be positive.");if(0!==e){if(0===this.ub.length)this.ub.push(0);else{var s=this.ub[this.ub.length-1]+this.ob[this.ob.length-1].length;this.ub.push(s)}this.ob.push(t.subarray(i,i+e)),this.fb+=e}},t.prototype.concat=function(i){var e=new t;return e.pushRange(this.join()),e.pushRange(i.join()),e},t.prototype.copy=function(t,i,e,s){if(void 0===i&&(i=0),void 0===e&&(e=0),void 0===s&&(s=this.length),i<0||e<0||s<0)throw new RangeError;return this.slice(e,s).copyInternal(t,i)},t.prototype.copyInternal=function(t,i){for(var e=0,s=i,n=0,r=this.ob;n<r.length;n++){var h=r[n];t.set(h,s),e+=h.length,s+=h.length}return e},t.prototype.clear=function(){this.ob=[],this.ub=[],this.fb=0},t.prototype.get=function(t){if(!(t<0||t>=this.length)){var i=this.findContainingBufferIndex(t),e=t-this.ub[i];return this.ob[i][e]}},w.defineProperty(t.prototype,"first",{get:function(){return this.get(0)},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){if(this.ob.length<1)return-1;if(this.ob.length>1){var i=this.join();this.clear(),this.pushRange(i)}var e=this.ob[0];return"number"==typeof t?km(e,t):"undefined"!=typeof Buffer?Buffer.from(e.buffer,e.byteOffset,e.byteLength).indexOf(t):function(t,i){if(0===i.length)return 0;for(var e=i[0],s=i.length,n=t.length-s,r=0;r<=n&&!((r=km(t,e,r))<0||r>n);r++){for(var h=r+1,o=r+s,a=1;h<o&&t[h]===i[a];h++,a++);if(h===o)return r}return-1}(e,t)},t.prototype.findContainingBufferIndex=function(t){return function(t,i,e){if(0!==t.length){var s=0,n=t.length-1;if(1!==e(t[s],i)){if(1===e(i,t[n]))return n;for(;s!==n;){var r=_.ceil((s+n)/2);e(t[r],i)<=0?s=r:n=r-1}return s}}}(this.ub,t,Rm)},t.prototype.join=function(){if(1===this.ob.length)return this.ob[0];var t=new j(this.length);return this.copyInternal(t,0),t},w.defineProperty(t.prototype,"length",{get:function(){return this.fb},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"bitLength",{get:function(){return 8*this.length},enumerable:!1,configurable:!0}),t.prototype.readUIntBE=function(t,i){if(i<=0||i>4)throw new m("Expected byteLength to be between 0 and 4 but was "+i);if(t<0||t>this.length-i)throw new m("Offset must be between 0 and buffer.length - byteLength, but was "+t+" (max allowed "+(this.length-i)+")");if(1===i)return this.get(t);for(var e=0,s=0;s<i;s++)e+=this.get(t+s)*_.pow(2,8*(i-s-1));return e},t.prototype.slice=function(i,e){void 0===e&&(e=this.length);var s=xm(i,0,this.length),n=xm(e,0,this.length);if(s>n)return new t;if(s===n)return new t;for(var r=new t,h=this.findContainingBufferIndex(s),o=this.ob[h],a=s,u=a-this.ub[h];a+o.length-u<n;)r.pushRange(o,u,o.length-u),h+=1,u=(a+=o.length-u)-this.ub[h],o=this.ob[h];var c=n-a;return r.pushRange(o,u,c),r},t.prototype.trim=function(){if(0===this.length)return new t;for(var i=this.length-1,e=this.ob.length-1,s=this.ob[e],n=s.length-1;i>=0&&e>=0;){if(0!==s[n])break;if(0===n){if(0===e)return new t;e-=1,n=(s=this.ob[e]).length-1}else n-=1;i-=1}return this.slice(0,i+1)},t}(),Dm=function(){function t(i){this._b=i||t.BUFFER_CHUNK_SIZE,this.gb=!1,this.pb=new Pi,this.eb=new j(this._b),this.mb=0,this.wb=0,this.hb=7}return t.prototype.closeByte=function(){this.eb[this.mb++]=this.wb,this.mb>=this._b&&this.closeBuffer(),this.wb=0,this.hb=7},t.prototype.closeBuffer=function(t){void 0===t&&(t=!0),0!==this.mb&&(this.pb.pushRange(this.eb,0,this.mb),t&&(this.eb=new j(this._b)),this.mb=0)},w.defineProperty(t.prototype,"isWritingStartBit",{get:function(){return 7===this.hb},enumerable:!1,configurable:!0}),t.prototype.close=function(){if(this.gb)throw new m("Cannot close a closed BitWriter.");return this.isWritingStartBit||this.closeByte(),this.closeBuffer(!1),this.gb=!0,this.pb},t.prototype.writeBit=function(t){if(this.gb)throw new m("Cannot write to a closed BitWriter.");this.wb|=t<<this.hb,0===this.hb?this.closeByte():this.hb--},t.prototype.writeByte=function(t){if(this.gb)throw new m("Cannot write to a closed BitWriter.");this.isWritingStartBit?(this.wb=t,this.closeByte()):this.writeByteUnaligned(t)},t.prototype.writeByteUnaligned=function(t){var i=this.hb;this.wb|=Im(t,i+1),this.closeByte(),this.wb=Cm(t,8-i)<<i+1,this.hb=i},t.prototype.writeBits=function(t){for(var i=0,e=t;i<e.length;i++){var s=e[i];this.writeBit(s)}},t.prototype.writeBytes=function(t){if(this.gb)throw new m("Cannot write to a closed BitWriter.");this.isWritingStartBit?this.writeBytesAligned(t):this.writeBytesUnaligned(t)},t.prototype.writeBytesAligned=function(t){this.mb+t.length<=this._b?(this.eb.set(t,this.mb),this.mb+=t.length,this.mb===this._b&&this.closeBuffer()):(this.closeBuffer(),this.pb.pushRange(t))},t.prototype.writeBytesUnaligned=function(t){if(0!==t.length){var i=this.hb;this.wb|=Im(t[0],i+1),this.closeByte();for(var e=1;e<t.length;e++){var s=Cm(t[e-1],8-i),n=Im(t[e],i+1);this.wb=s<<i+1|n,this.closeByte()}this.wb=Cm(t[t.length-1],8-i)<<i+1,this.hb=i}},t.prototype.writeUInt=function(t,i){if(t<0)throw new m("Received a negative number.");if(i>32)throw new m("The max bitlength that can be provided is 32.");if(t>=_.pow(2,i))throw new m("Uint "+t+" cannot be represented in "+i+" bit(s).");if(this.isWritingStartBit&&i%8==0)for(var e=i-8;e>=0;e-=8)this.writeByte(t>>e&255);else for(e=i-1;e>=0;e--)this.writeBool((t&1<<e)>0)},t.prototype.writeInt=function(t,i){if(i>32)throw new m("The max bitlength that can be provided is 32.");if(_.abs(t)>=_.pow(2,i-1))throw new m("Signed integer "+t+" cannot be represented in "+i+" bit(s).");t<0?this.writeUInt(t+_.pow(2,i),i):this.writeUInt(t,i)},t.prototype.writeExponentialGolombCode=function(t){if(t<0)throw new m("Received a negative number.");for(var i=_.floor(_.log2(t+1))+1,e=0;e<i-1;e++)this.writeBit(0);this.writeUInt(t+1,i)},t.prototype.writeSignedExponentialGolombCode=function(t){0===t?this.writeExponentialGolombCode(0):t<0?this.writeExponentialGolombCode(-2*t):this.writeExponentialGolombCode(2*t-1)},t.prototype.padByte=function(t){for(;!this.isWritingStartBit;)this.writeBit(t)},t.prototype.writeBool=function(t){this.writeBit(t?1:0)},t.prototype.writeString=function(t){for(var i=function(t){for(var i=new j(t.length),e=0;e<t.length;e++)i[e]=t.charCodeAt(e);return i}(t),e=0;e<i.length;e++)this.writeByte(i[e])},t.BUFFER_CHUNK_SIZE=1024,t}();r();var Nm=function(){function t(t){this.rb=new Pi,this.ef=t}return t.prototype.closeWriter=function(){void 0!==this.ef&&(this.rb=this.rb.concat(this.ef.close()),this.ef=void 0)},w.defineProperty(t.prototype,"writer",{get:function(){return void 0===this.ef&&(this.ef=new Dm),this.ef},enumerable:!1,configurable:!0}),t.prototype.concat=function(t){this.closeWriter(),this.rb=this.rb.concat(t)},t.prototype.toRangedBuffer=function(){return this.closeWriter(),this.rb},t}(),Bm=function(){function t(t){if(this.boxType=t,4!==t.length&&16!==t.length)throw new m("The provided box type does not conform to either a 4 character type or a 16 byte uuid.")}return t.prototype.serializeCommonBoxHeader=function(i){var e=this.getSize(),s=e>=t.LARGE_SIZE/8,n=16===this.boxType.length;i.writeUInt(s?1:e,32),i.writeString(n?"uuid":this.boxType),s&&(i.writeUInt(_.floor(e/t.LARGE_SIZE),32),i.writeUInt(e%t.LARGE_SIZE,32)),n&&i.writeString(this.boxType)},t.prototype.getSize=function(){var i=8+(this.boxType.length>4?16:0),e=this.getBoxContentSize()+i;return e>=t.LARGE_SIZE/8&&(e+=8),e},t.prototype.serialize=function(){var t=new Nm;return this.serializeCommonBoxHeader(t.writer),this.serializeBoxContent(t),t.toRangedBuffer()},t.LARGE_SIZE=_.pow(2,32),t}();function fa(t,i){return t instanceof yo?64===i:t<_.pow(2,i)}function P(t,i){return _.round(t*_.pow(2,i))}function Mm(t,i){for(var e=0;e<i.length;e++)t.writeByte(i[e])}function qr(t,i){return t/_.pow(2,i)}r();var en=function(t){function i(i,e,s){var n=t.call(this,i)||this;if(n.version=e,!fa(e,8))throw new m("the provided version cannot fit in 8 bits.");return n.flags=s,n}return Dt(i,t),w.defineProperty(i.prototype,"flags",{get:function(){return this.yb},set:function(t){this.yb=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 4},i.prototype.serializeFlags=function(t){if("number"!=typeof this.flags)throw new m("Missing custom serializeFlags method.");t.writer.writeUInt(this.flags,24)},i.prototype.serializeBoxContent=function(t){t.writer.writeByte(this.version),this.serializeFlags(t)},i}(Bm);r(),r();var Lm=function(t){function i(i,e){var s=t.call(this,i)||this;return s.data=e,s}return Dt(i,t),i.prototype.getBoxContentSize=function(){return this.data.length},i.prototype.serializeBoxContent=function(t){t.concat(Pi.from(this.data))},i}(Bm);r(),r();var Om=function(){function t(t){void 0===t&&(t=0),this.offset=t}return t.prototype.shift=function(t){this.offset+=t},t.prototype.seek=function(t){this.offset=t},t.prototype.clone=function(){return new t(this.offset)},t}();r();var Fm=16384;function Um(t){var i=t.length;if(i<=Fm)return String.fromCharCode.apply(String,t);for(var e=[],s=0;s<i;s+=Fm)e.push(String.fromCharCode.apply(String,t.slice(s,s+Fm)));return e.join("")}var Vm=function(){function t(t){this.raw=t}return t.prototype.isSet=function(t){return function(t,i){return(t&i)===i}(this.raw,t)},t}();function $r(t,i){var e=t.getUint8(i.offset);return i.shift(1),e}function Hm(t,i,e){var s=jm(Ym(t),i.offset,i.offset+e);return i.shift(s.byteLength),s}function Wm(t,i,e){return i.offset+e<=t.byteLength}function Ir(t,i,e){void 0===e&&(e=!1);var s=t.getUint32(i.offset,e);return i.shift(4),s}function qm(t,i,e){void 0===e&&(e=!1);var s=Ir(t,i,e),n=Ir(t,i,e),r=e?n:s,h=e?s:n;return yo.fromBits(h,r,!0)}function zm(t,i,e){return Um(function(t){return[].slice.call(t)}(Hm(t,i,e)))}function Gm(t,i){var e,s=$r(t,i);return 128&s?192==(224&s)?e=64*(31&s)+(63&$r(t,i)):224==(240&s)?e=4096*(15&s)+64*(63&$r(t,i))+(63&$r(t,i)):240==(248&s)&&(e=262144*(7&s)+4096*(63&$r(t,i))+64*(63&$r(t,i))+(63&$r(t,i))):e=s,e}function Xm(t,i){return function(t,i,e){var s=[],n=function(t,i){return i.offset+3<=t.byteLength&&239===t.getUint8(i.offset)&&187===t.getUint8(i.offset+1)&&191===t.getUint8(i.offset+2)}(t,i);n&&i.shift(3);for(;i.offset<t.byteLength;){var r=Gm(t,i);if(void 0===r)break;if(e&&0===r)break;s.push(r)}return function(t){for(var i=[],e=0,s=t;e<s.length;e++){var n=s[e];n>65535&&(n-=65536,i.push(n>>>10&1023|55296),n=56320|1023&n),i.push(n)}return Um(i)}(s)}(t,i,!0)}function jm(t,i,e){return void 0===i&&(i=0),void 0===e&&(e=t.byteLength),new j(t.buffer,t.byteOffset+i,e-i)}function Qm(t,i,e){return void 0===i&&(i=0),void 0===e&&(e=t.byteLength),new DataView(t.buffer,t.byteOffset+i,e-i)}function Km(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Ym(t){return new j(t.buffer,t.byteOffset,t.byteLength)}var Jm=function(){function t(t){void 0===t&&(t=0),this.offset=t}return t.prototype.shift=function(t){this.offset+=t},t.prototype.seek=function(t){this.offset=t},t.prototype.clone=function(){return new t(this.offset)},t.prototype.toBit=function(){return new Om(this.offset<<3)},t}();r();var Zm=function(){function t(t,i){this.data=t,this.cursor=i}return t.prototype.nextUint8=function(){return $r(this.data,this.cursor)},t.prototype.nextUint16=function(){return function(t,i,e){void 0===e&&(e=!1);var s=t.getUint16(i.offset,e);return i.shift(2),s}(this.data,this.cursor)},t.prototype.nextInt16=function(){return function(t,i,e){void 0===e&&(e=!1);var s=t.getInt16(i.offset,e);return i.shift(2),s}(this.data,this.cursor)},t.prototype.nextUint32=function(){return Ir(this.data,this.cursor)},t.prototype.nextInt32=function(){return function(t,i,e){void 0===e&&(e=!1);var s=t.getInt32(i.offset,e);return i.shift(4),s}(this.data,this.cursor)},t.prototype.nextInt64=function(){return function(t,i,e){void 0===e&&(e=!1);var s=Ir(t,i,e),n=Ir(t,i,e),r=e?n:s,h=e?s:n;return yo.fromBits(h,r,!1)}(this.data,this.cursor)},t.prototype.nextUint64=function(){return qm(this.data,this.cursor)},t.prototype.nextUint8Array=function(t){return Hm(this.data,this.cursor,t)},t.prototype.nextUint32Array=function(t){return function(t,i,e){for(var s=[],n=0;n<e;n++)s.push(Ir(t,i));return s}(this.data,this.cursor,t)},t.prototype.nextChars=function(t){return zm(this.data,this.cursor,t)},t.prototype.nextUTF8String=function(){return Xm(this.data,this.cursor)},t.prototype.skip=function(t){this.cursor.shift(t)},t.prototype.clone=function(){return new t(this.data,this.cursor.clone())},t}();function yn(t,i){return t.type===i}function es(t){var i=function(t,i){var e=[];for(;i.offset<t.byteLength;){var s=$m(t,i);if(!s.complete)return{complete:!1,boxes:e};e.push(s.box)}return{complete:!0,boxes:e}}(t.data,t.cursor);if(!i.complete)throw new m("Data incomplete");return i.boxes}function $m(t,i){var e=i.offset,s=function(t,i){var e=i.offset;if(!Wm(t,i,8)){return{complete:!1,neededOffset:r=i.offset+8}}var s=Ir(t,i),n=zm(t,i,4);if(1===s){if(!Wm(t,i,8)){var r=i.offset+8;return i.seek(e),{complete:!1,neededOffset:r}}s=qm(t,i).toNumber()}if("uuid"===n){if(!Wm(t,i,16)){r=i.offset+16;return i.seek(e),{complete:!1,neededOffset:r}}n=zm(t,i,16)}var h=i.offset,o={type:n,size:s,headerSize:h-e};return{complete:!0,header:o}}(t,i);if(!s.complete)return s;var n=s.header,r=n.size;0===r&&(r=t.byteLength-e);var h=e+r;if(h>t.byteLength){var o=h;return i.seek(e),{complete:!1,neededOffset:o}}var a={type:n.type,offset:e,data:new Zm(Qm(t,e,h),new Jm(n.headerSize))};return i.seek(h),{complete:!0,box:a}}function _i(t){return{version:t>>24,flags:new Vm(16777215&t)}}function tw(t,i){var e,s,n,r;return 1===i?(e=t.nextUint64(),s=t.nextUint64(),n=t.nextUint32(),r=t.nextUint64()):(e=t.nextUint32(),s=t.nextUint32(),n=t.nextUint32(),r=t.nextUint32()),{creation:e,modification:s,scale:n,duration:r}}function iw(t){return t.skipBits(4),{isLeading:t.readUInt(2),sampleDependsOn:t.readUInt(2),sampleIsDependedOn:t.readUInt(2),sampleHasRedundancy:t.readUInt(2),samplePaddingValue:t.readUInt(3),sampleIsNonSyncSample:Boolean(t.readBit()),sampleDegradationPriority:t.readUInt(16)}}function ew(t){var i=t.nextUint32Array(9);return{a:qr(i[0],16),b:qr(i[1],16),u:qr(i[2],30),c:qr(i[3],16),d:qr(i[4],16),v:qr(i[5],30),x:qr(i[6],16),y:qr(i[7],16),w:qr(i[8],30)}}function ts(t){return new Lm(t.type,jm(Ym(t.data.data),t.data.cursor.offset))}var sw=function(t){function i(i,e,s,n){void 0===s&&(s=0),void 0===n&&(n=0);var r=t.call(this,"hdlr",s,n)||this;return r.name=e,r.handlerType=i,r}return Dt(i,t),w.defineProperty(i.prototype,"handlerType",{get:function(){return this.bb},set:function(t){this.bb=t},enumerable:!1,configurable:!0}),i.prototype.serializeReserved=function(t){t.writer.writeUInt(0,32),t.writer.writeUInt(0,32),t.writer.writeUInt(0,32)},i.prototype.getBoxContentSize=function(){var i,e;return t.prototype.getBoxContentSize.call(this)+4+4+12+(null!==(e=null===(i=this.name)||void 0===i?void 0:i.length)&&void 0!==e?e:0)+1},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(0,32),i.writer.writeString(this.handlerType),this.serializeReserved(i),this.name&&i.writer.writeString(this.name),i.writer.writeByte(0)},i}(en);function nw(t){var i=t.data,e=_i(i.nextUint32()),s=e.version,n=e.flags;i.skip(4);var r=i.nextChars(4);i.skip(12);var h=i.nextUTF8String();return new sw(r,h,s,n.raw)}!function(t){function i(){return t.call(this,"mdir")||this}Dt(i,t),i.prototype.serializeReserved=function(t){t.writer.writeString("appl"),t.writer.writeUInt(0,32),t.writer.writeUInt(0,32)}}(sw);r(),r(),r();var yl=function(){function t(t,i){void 0===i&&(i=!1),this.fixed28BitMode=i,this.tag=t}return t.prototype.encodeSize=function(t){for(var i=[];t>0;)i.length>0&&(i[i.length-1]+=128),i.push(t%128),t>>=7;if(this.fixed28BitMode)for(;i.length<4;)i.push(128);return i.reverse()},w.defineProperty(t.prototype,"tag",{get:function(){return this.Ab},set:function(t){if(!fa(t,8))throw new m("Provided tag does not fit in 8 bits.");this.Ab=t},enumerable:!1,configurable:!0}),t.prototype.getSize=function(){return this.getDescriptorSize()+1+this.encodeSize(this.getDescriptorSize()).length},t.prototype.serialize=function(t){t.writer.writeByte(this.tag);for(var i=0,e=this.encodeSize(this.getDescriptorSize());i<e.length;i++){var s=e[i];t.writer.writeByte(s)}this.serializeDescriptorContent(t)},t}();r();!function(t){function i(i,e,s,n,r,h,o){void 0===o&&(o={});var a=t.call(this,4,o.fixed28BitMode)||this;return a.upStream=s,a.decoderSpecificInfo=h,a.objectTypeIndication=i,a.streamType=e,a.bufferSizeDb=n,a.maxBitrate=r.max,a.avgBitrate=r.avg,a}Dt(i,t),w.defineProperty(i.prototype,"objectTypeIndication",{get:function(){return this.Sb},set:function(t){if(!fa(t,8))throw new m("Provided objectTypeIndication does not fit in 8 bits.");this.Sb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"streamType",{get:function(){return this.Tb},set:function(t){if(!fa(t,6))throw new m("Provided streamType does not fit in 6 bits.");this.Tb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"bufferSizeDb",{get:function(){return this.kb},set:function(t){if(!fa(t,24))throw new m("Provided bufferSizeDb does not fit in 24 bits.");this.kb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"maxBitrate",{get:function(){return this.Eb},set:function(t){if(!fa(t,32))throw new m("Provided maxBitrate does not fit in 32 bits.");this.Eb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"avgBitrate",{get:function(){return this.xb},set:function(t){if(!fa(t,32))throw new m("Provided avgBitrate does not fit in 32 bits.");this.xb=t},enumerable:!1,configurable:!0}),i.prototype.getDescriptorSize=function(){return 13+this.decoderSpecificInfo.reduce(function(t,i){return t+i.getSize()},0)},i.prototype.serializeDescriptorContent=function(t){t.writer.writeByte(this.objectTypeIndication),t.writer.writeUInt(this.streamType,6),t.writer.writeBool(this.upStream),t.writer.writeBit(1),t.writer.writeUInt(this.bufferSizeDb,24),t.writer.writeUInt(this.maxBitrate,32),t.writer.writeUInt(this.avgBitrate,32);for(var i=0,e=this.decoderSpecificInfo;i<e.length;i++){e[i].serialize(t)}}}(yl);r();!function(t){function i(i,e){void 0===e&&(e={});var s=t.call(this,5,e.fixed28BitMode)||this;return s.data=i,s}Dt(i,t),i.prototype.getDescriptorSize=function(){return this.data.length},i.prototype.serializeDescriptorContent=function(t){t.concat(Pi.from(this.data))}}(yl);r(),r();var rw=function(t){function i(i){void 0===i&&(i=!1);var e=t.call(this,6,i)||this;return e.predefined=2,e}return Dt(i,t),i.prototype.getDescriptorSize=function(){return 1},i.prototype.serializeDescriptorContent=function(t){t.writer.writeByte(this.predefined)},i}(yl);!function(t){function i(i,e,s,n){void 0===n&&(n={});var r=t.call(this,3,n.fixed28BitMode)||this;return r.decoderConfigDescriptor=s,r.esId=i,r.streamPriority=e,r.dependsOnEsId=null==n?void 0:n.dependsOnEsId,r.urlString=null==n?void 0:n.url,r.ocrEsId=null==n?void 0:n.ocrEsId,r.slConfigDescriptor=new rw(n.fixed28BitMode),r}Dt(i,t),w.defineProperty(i.prototype,"streamDependenceFlag",{get:function(){return void 0!==this.dependsOnEsId},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"urlFlag",{get:function(){return void 0!==this.urlString},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"ocrStreamFlag",{get:function(){return void 0!==this.ocrEsId},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"esId",{get:function(){return this.Pb},set:function(t){if(!fa(t,16))throw new m("Provided esId does not fit in 16 bits.");this.Pb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"streamPriority",{get:function(){return this.Ib},set:function(t){if(!fa(t,5))throw new m("Provided streamPriority does not fit in 5 bits.");this.Ib=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"dependsOnEsId",{get:function(){return this.Cb},set:function(t){if(t&&!fa(t,16))throw new m("Provided dependsOnEsId does not fit in 16 bits.");this.Cb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"ocrEsId",{get:function(){return this.Rb},set:function(t){if(t&&!fa(t,16))throw new m("Provided ocrEsId does not fit in 16 bits.");this.Rb=t},enumerable:!1,configurable:!0}),i.prototype.getDescriptorSize=function(){return 3+(this.streamDependenceFlag?2:0)+(this.urlFlag?1+this.urlString.length:0)+(this.ocrStreamFlag?2:0)+this.decoderConfigDescriptor.getSize()+this.slConfigDescriptor.getSize()},i.prototype.serializeDescriptorContent=function(t){t.writer.writeUInt(this.esId,16),t.writer.writeBool(this.streamDependenceFlag),t.writer.writeBool(this.urlFlag),t.writer.writeBool(this.ocrStreamFlag),t.writer.writeUInt(this.streamPriority,5),this.streamDependenceFlag&&t.writer.writeUInt(this.dependsOnEsId,16),this.urlFlag&&(t.writer.writeByte(this.urlString.length),t.writer.writeString(this.urlString)),this.ocrStreamFlag&&t.writer.writeUInt(this.ocrEsId,16),this.decoderConfigDescriptor.serialize(t),this.slConfigDescriptor.serialize(t)}}(yl);r(),r(),r(),r(),r();var hw=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.boxes=[],i}return Dt(i,t),i.prototype.getSize=function(){return t.prototype.getSize.call(this)+this.boxes.reduce(function(t,i){return t+i.getSize()},0)},i.prototype.serialize=function(){for(var i=t.prototype.serialize.call(this),e=0,s=this.boxes;e<s.length;e++){var n=s[e];i=i.concat(n.serialize())}return i},i}(Bm),ou=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return Dt(i,t),i.prototype.serializeBoxContent=function(t){},i.prototype.getBoxContentSize=function(){return 0},i}(hw),ow=function(t){function i(i,e){var s=t.call(this,i)||this;return s.dataReferenceIndex=e,s}return Dt(i,t),w.defineProperty(i.prototype,"dataReferenceIndex",{get:function(){return this.Db},set:function(t){if(!fa(t,16))throw new m("Provided dataReferenceIndex does not fit in 16 bits.");this.Db=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 8},i.prototype.serializeBoxContent=function(t){for(var i=0;i<6;i++)t.writer.writeByte(0);t.writer.writeUInt(this.dataReferenceIndex,16)},i}(ou),aw=function(t){function i(i,e,s,n){var r,h,o=this;return(o=t.call(this,i,e)||this).extra=n,o.channelCount=null!==(r=s.channelCount)&&void 0!==r?r:2,o.sampleSize=null!==(h=s.sampleSize)&&void 0!==h?h:16,o.sampleRate=s.sampleRate,o}return Dt(i,t),w.defineProperty(i.prototype,"channelCount",{get:function(){return this.Nb},set:function(t){if(!fa(t,16))throw new m("Provided channelCount does not fit in 16 bits.");this.Nb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"sampleSize",{get:function(){return this.Bb},set:function(t){if(!fa(t,16))throw new m("Provided sampleSize does not fit in 16 bits.");this.Bb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"sampleRate",{get:function(){return this.Mb},set:function(t){if(!fa(P(t,16),32))throw new m("Provided rate does not fit in 32 bits (fixed 16.16).");this.Mb=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){var i,e;return t.prototype.getBoxContentSize.call(this)+8+2+2+2+2+(void 0!==this.sampleRate?4:0)+(null!==(e=null===(i=this.extra)||void 0===i?void 0:i.length)&&void 0!==e?e:0)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(0,32),i.writer.writeUInt(0,32),i.writer.writeUInt(this.channelCount,16),i.writer.writeUInt(this.sampleSize,16),i.writer.writeUInt(0,16),i.writer.writeUInt(0,16),i.writer.writeUInt(P(this.sampleRate,16),32),this.extra&&Mm(i.writer,this.extra)},i}(ow);r();!function(t){function i(i){var e=t.call(this,"stco",0,0)||this;return e.entries=i,e}Dt(i,t),w.defineProperty(i.prototype,"entries",{get:function(){return this.Lb},set:function(t){if(!fa(t.length,32))throw new m("Number of allowed entries cannot fit in 32 bits.");if(t.some(function(t){return!fa(t,32)}))throw new m("Not all entries can be represented in 32 bits.");this.Lb=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4*this.entries.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.entries.length,32);for(var e=0,s=this.entries;e<s.length;e++){var n=s[e];i.writer.writeUInt(n,32)}}}(en);r();!function(t){function i(i){var e=t.call(this,"clap")||this;return e.cleanApertureWidthN=i.cleanApertureWidthN,e.cleanApertureWidthD=i.cleanApertureWidthD,e.cleanApertureHeightN=i.cleanApertureHeightN,e.cleanApertureHeightD=i.cleanApertureHeightD,e.horizOffN=i.horizOffN,e.horizOffD=i.horizOffD,e.vertOffN=i.vertOffN,e.vertOffD=i.vertOffD,e}Dt(i,t),w.defineProperty(i.prototype,"cleanApertureWidthN",{get:function(){return this.Ob},set:function(t){if(!fa(t,32))throw new m("Provided cleanApertureWidthN does not fit in 32 bits.");this.Ob=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"cleanApertureWidthD",{get:function(){return this.Fb},set:function(t){if(!fa(t,32))throw new m("Provided cleanApertureWidthD does not fit in 32 bits.");this.Fb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"cleanApertureHeightN",{get:function(){return this.Ub},set:function(t){if(!fa(t,32))throw new m("Provided cleanApertureHeightN does not fit in 32 bits.");this.Ub=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"cleanApertureHeightD",{get:function(){return this.Vb},set:function(t){if(!fa(t,32))throw new m("Provided cleanApertureHeightD does not fit in 32 bits.");this.Vb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"horizOffN",{get:function(){return this.Hb},set:function(t){if(!fa(t,32))throw new m("Provided horizOffN does not fit in 32 bits.");this.Hb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"horizOffD",{get:function(){return this.Wb},set:function(t){if(!fa(t,32))throw new m("Provided horizOffD does not fit in 32 bits.");this.Wb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"vertOffN",{get:function(){return this.qb},set:function(t){if(!fa(t,32))throw new m("Provided vertOffN does not fit in 32 bits.");this.qb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"vertOffD",{get:function(){return this.zb},set:function(t){if(!fa(t,32))throw new m("Provided vertOffD does not fit in 32 bits.");this.zb=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 32},i.prototype.serializeBoxContent=function(t){t.writer.writeUInt(this.cleanApertureWidthN,32),t.writer.writeUInt(this.cleanApertureWidthD,32),t.writer.writeUInt(this.cleanApertureHeightN,32),t.writer.writeUInt(this.cleanApertureHeightD,32),t.writer.writeUInt(this.horizOffN,32),t.writer.writeUInt(this.horizOffD,32),t.writer.writeUInt(this.vertOffN,32),t.writer.writeUInt(this.vertOffD,32)}}(Bm);r();!function(t){function i(i,e){var s=t.call(this,"ctts",i,0)||this;return s.entries=e,s}Dt(i,t),w.defineProperty(i.prototype,"entries",{get:function(){return this.Lb},set:function(t){if(!fa(t.length,32))throw new m("Number of allowed entries cannot fit in 32 bits.");if(t.some(function(t){return!fa(t.sampleCount,32)||!fa(t.sampleOffset,32)}))throw new m("Not all entries can be represented in 64 bits.");this.Lb=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+8*this.entries.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.entries.length,32);for(var e=0,s=this.entries;e<s.length;e++){var n=s[e];i.writer.writeUInt(n.sampleCount,32),0===this.version?i.writer.writeUInt(n.sampleOffset,32):1===this.version&&i.writer.writeInt(n.sampleOffset,32)}}}(en);r();!function(t){function i(i){var e=t.call(this,"url ",0,void 0===i?1:0)||this;return e.location=i,e}Dt(i,t),w.defineProperty(i.prototype,"location",{get:function(){return this.Gb},set:function(t){this.flags=void 0===t?1:0,this.Gb=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){var i=t.prototype.getBoxContentSize.call(this);return this.location?i+this.location.length+1:i},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.location&&(i.writer.writeString(this.location),i.writer.writeByte(0))}}(en);r();!function(t){function i(i,e,s){var n=t.call(this,"urn ",0,s)||this;return n.name=i,n.location=e,n}Dt(i,t),w.defineProperty(i.prototype,"location",{get:function(){return this.Gb},set:function(t){if(1&this.flags)throw new m("The moov containment flag is set, a DataEntryUrlBox should be used instead.");this.Gb=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){var i=t.prototype.getBoxContentSize.call(this)+this.name.length+1;return this.location?i+this.location.length+1:i},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeString(this.name),i.writer.writeByte(0),this.location&&(i.writer.writeString(this.location),i.writer.writeByte(0))}}(en);r();!function(t){function i(){return t.call(this,"dinf")||this}Dt(i,t)}(ou);r(),r();var ml=function(t){function i(i,e,s){var n=t.call(this,i)||this;if(n.version=e,!fa(e,8))throw new m("the provided version cannot fit in 8 bits.");return n.flags=s,n}return Dt(i,t),w.defineProperty(i.prototype,"flags",{get:function(){return this.yb},set:function(t){this.yb=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 4},i.prototype.serializeFlags=function(t){if("number"!=typeof this.flags)throw new m("Missing custom serializeFlags method.");t.writer.writeUInt(this.flags,24)},i.prototype.serializeBoxContent=function(t){t.writer.writeByte(this.version),this.serializeFlags(t)},i}(hw);!function(t){function i(){return t.call(this,"dref",0,0)||this}Dt(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.boxes.length,32)}}(ml);r(),r();var uw=function(t){function i(i,e,s){void 0===s&&(s=0);var n=t.call(this,"elst",e,s)||this;return n.entries=i,n}return Dt(i,t),w.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"entries",{get:function(){return this.Lb},set:function(t){for(var i=0,e=t;i<e.length;i++){var s=e[i];if(!fa(s.segmentDuration,this.bitSize))throw new m("SegmentDuration of one of the entries does not fit in ".concat(this.bitSize," bits."));if(!fa(s.mediaTime,this.bitSize))throw new m("MediaTime of one of the entries does not fit in ".concat(this.bitSize," bits."));if(!fa(s.mediaRateInteger,16))throw new m("Provided mediaRateInteger does not fit in 16 bits.");if(s.mediaRateFraction&&!fa(s.mediaRateFraction,16))throw new m("Provided mediaRateFraction does not fit in 16 bits.")}this.Lb=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+this.entries.length*(2*this.bitSize/8+2+2)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.entries.length,32),this.serializeElstBoxContent(i)},i}(en),cw=function(t){function i(i,e){return void 0===e&&(e=0),t.call(this,i,0,e)||this}return Dt(i,t),i.prototype.serializeElstBoxContent=function(t){for(var i,e=0,s=this.entries;e<s.length;e++){var n=s[e];t.writer.writeUInt(n.segmentDuration,32),t.writer.writeInt(n.mediaTime,32),t.writer.writeUInt(n.mediaRateInteger,16),t.writer.writeUInt(null!==(i=n.mediaRateFraction)&&void 0!==i?i:0,16)}},i}(uw),dw=function(t){function i(i,e){return void 0===e&&(e=0),t.call(this,i,1,e)||this}return Dt(i,t),i.prototype.serializeElstBoxContent=function(t){for(var i,e=0,s=this.entries;e<s.length;e++){var n=s[e];t.writer.writeUInt(n.segmentDuration.getHighBitsUnsigned(),32),t.writer.writeUInt(n.segmentDuration.getLowBitsUnsigned(),32),t.writer.writeInt(n.mediaTime.getHighBits(),32),t.writer.writeInt(n.mediaTime.getLowBits(),32),t.writer.writeUInt(n.mediaRateInteger,16),t.writer.writeUInt(null!==(i=n.mediaRateFraction)&&void 0!==i?i:0,16)}},i}(uw);function lw(t){for(var i=t.data,e=_i(i.nextUint32()),s=e.version,n=e.flags,r=i.nextUint32(),h=[],o=0;o<r;o++){var a=void 0,u=void 0;0===s?(a=i.nextUint32(),u=i.nextInt32()):(a=i.nextUint64(),u=i.nextInt64());var c=i.nextInt16(),d=i.nextInt16();h.push({segmentDuration:a,mediaTime:u,mediaRateFraction:d,mediaRateInteger:c})}return 0===s?new cw(h,n.raw):new dw(h,n.raw)}var fw=function(t){function i(){return t.call(this,"edts")||this}return Dt(i,t),i}(ou);function vw(t){for(var i=new fw,e=0,s=es(t.data);e<s.length;e++){var n=s[e];yn(n,"elst")?i.boxes.push(lw(n)):i.boxes.push(ts(n))}return i}r(),r();var _w=function(t){function i(i,e,s,n){var r=t.call(this,i)||this;return r.majorBrand=e,r.minorVersion=s,r.compatibleBrands=n,r}return Dt(i,t),w.defineProperty(i.prototype,"majorBrand",{get:function(){return this.Xb},set:function(t){if(4!==t.length)throw new m("the provided major brand does not conform to the 4 character requirement");this.Xb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"minorVersion",{get:function(){return this.jb},set:function(t){if(!fa(t,32))throw new m("the provided minor version does not fit in 32 bits.");this.jb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"compatibleBrands",{get:function(){return this.Qb},set:function(t){if(t.some(function(t){return 4!==t.length}))throw new m("Some of the compatible brands do not conform to the 4 character requirement");this.Qb=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 4*(2+this.compatibleBrands.length)},i.prototype.serializeBoxContent=function(t){t.writer.writeString(this.majorBrand),t.writer.writeUInt(this.minorVersion,32);for(var i=0,e=this.compatibleBrands;i<e.length;i++){var s=e[i];t.writer.writeString(s)}},i}(Bm),gw=function(t){function i(i,e,s){return t.call(this,"ftyp",i,e,s)||this}return Dt(i,t),i}(_w);function pw(t){for(var i=t.data,e=i.nextChars(4),s=i.nextUint32(),n=[];i.cursor.offset<i.data.byteLength;)n.push(i.nextChars(4));return new gw(e,s,n)}r();var mw=function(t){function i(i,e){void 0===e&&(e="free");var s=t.call(this,e)||this;return s.data=i,s}return Dt(i,t),i.prototype.getBoxContentSize=function(){var t,i;return null!==(i=null===(t=this.data)||void 0===t?void 0:t.length)&&void 0!==i?i:0},i.prototype.serializeBoxContent=function(t){this.data&&t.concat(Pi.from(this.data))},i}(Bm);r(),r();var ww=function(t){function i(i,e,s,n){void 0===n&&(n=0);var r=t.call(this,"mdhd",s,n)||this;return r.creationTime=i.creation,r.modificationTime=i.modification,r.timescale=i.scale,r.duration=i.duration,r.language=e,r}return Dt(i,t),w.defineProperty(i.prototype,"creationTime",{get:function(){return this.Kb},set:function(t){if(!fa(t,this.bitSize))throw new m("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.Kb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"modificationTime",{get:function(){return this.Yb},set:function(t){if(!fa(t,this.bitSize))throw new m("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.Yb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"timescale",{get:function(){return this.Jb},set:function(t){if(!fa(t,32))throw new m("Provided sequence number does not fit in 32 bits.");this.Jb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"duration",{get:function(){return this.Zb},set:function(t){if(!fa(t,this.bitSize))throw new m("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.Zb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"language",{get:function(){return this.$b},set:function(t){if(!Sw(t))throw new m("Expected an ISO-639-2/T language code");this.$b=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8*3+4+2+2},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.serializeMdiaContent(i),i.writer.writeBit(0);for(var e=0,s=this.language;e<s.length;e++){var n=s[e];i.writer.writeUInt(n.charCodeAt(0)-96,5)}i.writer.writeUInt(0,16)},i}(en),yw=function(t){function i(i,e,s){return void 0===s&&(s=0),t.call(this,i,e,0,s)||this}return Dt(i,t),i.prototype.serializeMdiaContent=function(t){t.writer.writeUInt(this.creationTime,32),t.writer.writeUInt(this.modificationTime,32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration,32)},i}(ww),bw=function(t){function i(i,e,s){return void 0===s&&(s=0),t.call(this,i,e,1,s)||this}return Dt(i,t),i.prototype.serializeMdiaContent=function(t){t.writer.writeUInt(this.creationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.creationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration.getHighBitsUnsigned(),32),t.writer.writeUInt(this.duration.getLowBitsUnsigned(),32)},i}(ww);function Aw(t){var i=t.data,e=_i(i.nextUint32()),s=e.version,n=e.flags,r=tw(i,s),h=new H(Pi.from(i.nextUint8Array(2)));h.skipBits(1);for(var o=[],a=0;a<3;a++)o.push(h.readUInt(5));var u=o.map(function(t){return String.fromCharCode(t+96)}).join("");return Sw(u)||(u="und"),i.skip(2),0===s?new yw(r,u,n.raw):new bw(r,u,n.raw)}function Sw(t){return/^[a-z]{3}$/.test(t)}var Tw=function(t){function i(){return t.call(this,"mdia")||this}return Dt(i,t),i}(ou);function kw(t){for(var i=new Tw,e=0,s=es(t.data);e<s.length;e++){var n=s[e];yn(n,"mdhd")?i.boxes.push(Aw(n)):yn(n,"hdlr")?i.boxes.push(nw(n)):i.boxes.push(ts(n))}return i}r();var Ew=function(t){function i(){var i=t.call(this,"mdat")||this;return i.data=new Pi,i}return Dt(i,t),i.prototype.getBoxContentSize=function(){return this.data.length},i.prototype.serializeBoxContent=function(t){t.concat(this.data)},i}(Bm);function xw(t){var i=t.data,e=i.nextUint8Array(i.data.byteLength-i.cursor.offset),s=new Ew;return s.data.pushRange(e),s}r();!function(t){function i(){return t.call(this,"minf")||this}Dt(i,t)}(ou);r();var Pw;!function(t){function i(i){var e=t.call(this,"meta",0,0)||this;return e.handler=i,e}Dt(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.handler.getSize()},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.concat(this.handler.serialize())}}(ml);r(),r(),function(t){t.VIDEO="vide",t.AUXILIARY_VIDEO="auxv",t.AUDIO="soun",t.METADATA="meta",t.HINT="hint",t.TEXT="text",t.SUBTITLE="subt",t.FONT="fdsm"}(Pw||(Pw={})),r();var Iw,Cw,Rw={a:1,b:0,u:0,c:0,d:1,v:0,x:0,y:0,w:1};function Dw(t,i){i.writer.writeUInt(P(t.a,16),32),i.writer.writeUInt(P(t.b,16),32),i.writer.writeUInt(P(0,30),32),i.writer.writeUInt(P(t.c,16),32),i.writer.writeUInt(P(t.d,16),32),i.writer.writeUInt(P(0,30),32),i.writer.writeUInt(P(t.x,16),32),i.writer.writeUInt(P(t.y,16),32),i.writer.writeUInt(P(1,30),32)}function Nw(t,i){var e,s,n,r;i.writer.writeUInt(null!==(e=t.isLeading)&&void 0!==e?e:Iw.UNKNOWN,2),i.writer.writeUInt(null!==(s=t.sampleDependsOn)&&void 0!==s?s:Cw.UNKNOWN,2),i.writer.writeUInt(null!==(n=t.sampleIsDependedOn)&&void 0!==n?n:Cw.UNKNOWN,2),i.writer.writeUInt(null!==(r=t.sampleHasRedundancy)&&void 0!==r?r:Cw.UNKNOWN,2)}function Bw(t,i){var e,s,n;i.writer.writeUInt(0,4),Nw(t,i),i.writer.writeUInt(null!==(e=t.samplePaddingValue)&&void 0!==e?e:0,3),i.writer.writeBool(null!==(s=t.sampleIsNonSyncSample)&&void 0!==s&&s),i.writer.writeUInt(null!==(n=t.sampleDegradationPriority)&&void 0!==n?n:0,16)}r(),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WITH_DEPENDENCY=1]="WITH_DEPENDENCY",t[t.NO=2]="NO",t[t.WITHOUT_DEPENDENCY=3]="WITHOUT_DEPENDENCY"}(Iw||(Iw={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.YES=1]="YES",t[t.NO=2]="NO",t[t.RESERVED=3]="RESERVED"}(Cw||(Cw={})),r(),r();var Mw=function(){};r(),r(),r();var Lw=function(t){function i(i,e,s){var n=t.call(this,"pssh",i,0)||this;return n.systemId=e,n.data=s,n}return Dt(i,t),w.defineProperty(i.prototype,"systemId",{get:function(){return this.tA},set:function(t){if(16!==t.length)throw new m("Provided systemId length is not 16.");this.tA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"data",{get:function(){return this.Wp},set:function(t){if(!fa(t.length,32))throw new m("Provided data length does not fit in 32 bits.");this.Wp=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+16+4+this.data.length},i.prototype.serializeVersionBoxContent=function(t){},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.concat(Pi.from(this.systemId)),this.serializeVersionBoxContent(i),i.writer.writeUInt(this.data.length,32),i.concat(Pi.from(this.data))},i}(en),Ow=function(t){function i(i,e){return t.call(this,0,i,e)||this}return Dt(i,t),i}(Lw),Fw=function(t){function i(i,e,s){var n=t.call(this,1,i,e)||this;return n.kIds=s,n}return Dt(i,t),w.defineProperty(i.prototype,"kIds",{get:function(){return this.iA},set:function(t){if(!fa(t.length,32))throw new m("Provided kIds length cannot fit in 32 bits.");if(t.some(function(t){return 16!==t.length}))throw new m("Not all provided key ids are 16 bytes long.");this.iA=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+16*this.kIds.length},i.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.kIds.length,32);for(var i=0,e=this.kIds;i<e.length;i++){var s=e[i];t.concat(Pi.from(s))}},i}(Lw);function Uw(t){var i=t.data.nextUint8();t.data.skip(3);var e=t.data.nextUint8Array(16),s=[];if(1===i)for(var n=t.data.nextUint32(),r=0;r<n;r++)s.push(t.data.nextUint8Array(16));var h=t.data.nextUint32(),o=t.data.nextUint8Array(h);return 1===i?new Fw(e,o,s):new Ow(e,o)}r(),r();var Vw=function(t){function i(i,e,s){void 0===s&&(s=0);var n=t.call(this,"mehd",e,s)||this;return n.fragmentDuration=i,n}return Dt(i,t),w.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"fragmentDuration",{get:function(){return this.eA},set:function(t){if(!fa(t,this.bitSize))throw new m("The provided fragmentDuration does not fit in ".concat(this.bitSize," bits."));this.eA=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8},i}(en),Hw=function(t){function i(i,e){return void 0===e&&(e=0),t.call(this,i,0,e)||this}return Dt(i,t),i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.fragmentDuration,32)},i}(Vw),Ww=function(t){function i(i,e){return void 0===e&&(e=0),t.call(this,i,1,e)||this}return Dt(i,t),i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.fragmentDuration.getHighBitsUnsigned(),32),i.writer.writeUInt(this.fragmentDuration.getLowBitsUnsigned(),32)},i}(Vw);function qw(t){var i=t.data,e=_i(i.nextUint32()),s=e.version,n=e.flags;return 0===s?new Hw(i.nextUint32(),n.raw):new Ww(i.nextUint64(),n.raw)}r();var Vi=function(t){function i(i,e,s,n){void 0===e&&(e={}),void 0===s&&(s=0),void 0===n&&(n=0);var r,h,o,a=this;return(a=t.call(this,"trex",s,n)||this).trackId=i,a.defaultSampleDescriptionIndex=null!==(r=null==e?void 0:e.sampleDescriptionIndex)&&void 0!==r?r:0,a.defaultSampleDuration=null!==(h=e.sampleDuration)&&void 0!==h?h:0,a.defaultSampleSize=null!==(o=e.sampleSize)&&void 0!==o?o:0,a.defaultSampleFlags=e.sampleFlags,a}return Dt(i,t),w.defineProperty(i.prototype,"trackId",{get:function(){return this.sA},set:function(t){if(!fa(t,32))throw new m("Provided track id does not fit in 32 bits.");this.sA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"defaultSampleDescriptionIndex",{get:function(){return this.nA},set:function(t){if(!fa(t,32))throw new m("Provided default sample description index does not fit in 32 bits.");this.nA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"defaultSampleDuration",{get:function(){return this.rA},set:function(t){if(!fa(t,32))throw new m("Provided default sample duration does not fit in 32 bits.");this.rA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"defaultSampleSize",{get:function(){return this.hA},set:function(t){if(!fa(t,32))throw new m("Provided default sample size does not fit in 32 bits.");this.hA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"defaultSampleFlags",{get:function(){return this.oA},set:function(t){if((null==t?void 0:t.samplePaddingValue)&&!fa(t.samplePaddingValue,3))throw new m("Provided sample padding value does not fit in 3 bits.");if((null==t?void 0:t.sampleDegradationPriority)&&!fa(t.sampleDegradationPriority,16))throw new m("Provided sample degradation priority does not fit in 16 bits.");this.oA=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+20},i.prototype.serializeBoxContent=function(i){var e;t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.trackId,32),i.writer.writeUInt(this.defaultSampleDescriptionIndex,32),i.writer.writeUInt(this.defaultSampleDuration,32),i.writer.writeUInt(this.defaultSampleSize,32),Bw(null!==(e=this.defaultSampleFlags)&&void 0!==e?e:{},i)},i}(en);function zw(t){var i=t.data,e=_i(i.nextUint32()),s=e.version,n=e.flags,r=i.nextUint32(),h=i.nextUint32(),o=i.nextUint32(),a=i.nextUint32(),u=iw(new H(Pi.from(i.nextUint8Array(4))));return new Vi(r,{sampleDescriptionIndex:h,sampleDuration:o,sampleSize:a,sampleFlags:u},s,n.raw)}var bl=function(t){function i(){return t.call(this,"mvex")||this}return Dt(i,t),i}(ou);function Gw(t){for(var i=new bl,e=0,s=es(t.data);e<s.length;e++){var n=s[e];yn(n,"mehd")?i.boxes.push(qw(n)):yn(n,"trex")?i.boxes.push(zw(n)):i.boxes.push(ts(n))}return i}r();var Xw=function(t){function i(e,s,n,r,h){void 0===h&&(h=0);var o,a,u,c=this;return(c=t.call(this,"mvhd",r,h)||this).creationTime=e.creation,c.modificationTime=e.modification,c.timescale=e.scale,c.duration=e.duration,c.rate=null!==(o=n.rate)&&void 0!==o?o:i.DEFAULT_RATE,c.volume=null!==(a=n.volume)&&void 0!==a?a:i.DEFAULT_VOLUME,c.matrix=null!==(u=n.matrix)&&void 0!==u?u:Rw,c.aA=s,c}return Dt(i,t),w.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"creationTime",{get:function(){return this.Kb},set:function(t){if(!fa(t,this.bitSize))throw new m("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.Kb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"modificationTime",{get:function(){return this.Yb},set:function(t){if(!fa(t,this.bitSize))throw new m("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.Yb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"timescale",{get:function(){return this.Jb},set:function(t){if(!fa(t,32))throw new m("Provided sequence number does not fit in 32 bits.");this.Jb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"duration",{get:function(){return this.Zb},set:function(t){if(!fa(t,this.bitSize))throw new m("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.Zb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"rate",{get:function(){return this.uA},set:function(t){if(!fa(P(t,16),32))throw new m("Provided rate does not fit in 32 bits (fixed 16.16).");this.uA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"volume",{get:function(){return this.cA},set:function(t){if(!fa(P(t,8),16))throw new m("Provided volume does not fit in 16 bits (fixed 8.8).");this.cA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"matrix",{get:function(){return this.dA},set:function(t){if(0!==t.u||0!==t.v||1!==t.w)throw new m("(u, v, w) does not match the required (0, 0, 1)");this.dA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"nextTrackId",{get:function(){return this.aA},set:function(t){if(0===t)throw new m("NextTrackId cannot be 0.");if(!fa(t,32))throw new m("NextTrackId cannot exceed 32 bits.");this.aA=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8*3+4+4+2+2+8+36+24+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.serializeMvhdContent(i),i.writer.writeUInt(P(this.rate,16),32),i.writer.writeUInt(P(this.volume,8),16),i.writer.writeUInt(0,16),i.writer.writeUInt(0,32),i.writer.writeUInt(0,32),Dw(this.matrix,i);for(var e=0;e<6;e++)i.writer.writeUInt(0,32);i.writer.writeUInt(this.nextTrackId,32)},i.DEFAULT_RATE=1,i.DEFAULT_VOLUME=1,i}(en),jw=function(t){function i(i,e,s,n){return void 0===s&&(s={}),void 0===n&&(n=0),t.call(this,i,e,s,0,n)||this}return Dt(i,t),i.prototype.serializeMvhdContent=function(t){t.writer.writeUInt(this.creationTime,32),t.writer.writeUInt(this.modificationTime,32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration,32)},i}(Xw),Qw=function(t){function i(i,e,s,n){return void 0===s&&(s={}),void 0===n&&(n=0),t.call(this,i,e,s,1,n)||this}return Dt(i,t),i.prototype.serializeMvhdContent=function(t){t.writer.writeUInt(this.creationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.creationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration.getHighBitsUnsigned(),32),t.writer.writeUInt(this.duration.getLowBitsUnsigned(),32)},i}(Xw);function Kw(t){var i=t.data,e=_i(i.nextUint32()),s=e.version,n=e.flags,r=tw(i,s),h=qr(i.nextUint32(),16),o=qr(i.nextUint16(),8);i.skip(2),i.skip(8);var a=ew(i);i.skip(24);var u=i.nextUint32();return 0===s?new jw(r,u,{rate:h,volume:o,matrix:a},n.raw):new Qw(r,u,{rate:h,volume:o,matrix:a},n.raw)}r(),r();var Yw=function(t){function i(i,e,s,n,r,h,o){void 0===o&&(o={});var a,u,c,d=this;return d=t.call(this,"tkhd",i,function(t){var i,e,s,n;return{trackEnabled:null===(i=null==t?void 0:t.trackEnabled)||void 0===i||i,trackInMovie:null===(e=null==t?void 0:t.trackInMovie)||void 0===e||e,trackInPreview:null===(s=null==t?void 0:t.trackInPreview)||void 0===s||s,trackSizeIsAspectRatio:null!==(n=null==t?void 0:t.trackSizeIsAspectRatio)&&void 0!==n&&n}}(o))||this,d.creationTime=e.creation,d.modificationTime=e.modification,d.trackId=s,d.duration=e.duration,d.volume=n,d.width=r,d.height=h,d.layer=null!==(a=o.layer)&&void 0!==a?a:0,d.alternateGroup=null!==(u=o.alternateGroup)&&void 0!==u?u:0,d.matrix=null!==(c=o.matrix)&&void 0!==c?c:Rw,d}return Dt(i,t),w.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"creationTime",{get:function(){return this.Kb},set:function(t){if(!fa(t,this.bitSize))throw new m("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.Kb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"modificationTime",{get:function(){return this.Yb},set:function(t){if(!fa(t,this.bitSize))throw new m("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.Yb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"trackId",{get:function(){return this.sA},set:function(t){if(0===t)throw new m("trackId cannot be 0.");if(!fa(t,32))throw new m("trackId cannot exceed 32 bits.");this.sA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"duration",{get:function(){return this.Zb},set:function(t){if(!fa(t,this.bitSize))throw new m("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.Zb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"volume",{get:function(){return this.cA},set:function(t){if(!fa(P(t,8),16))throw new m("Provided volume does not fit in 16 bits (fixed 8.8).");this.cA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"width",{get:function(){return this.lA},set:function(t){if(!fa(P(t,16),32))throw new m("Provided width does not fit in 32 bits (fixed 16.16).");this.lA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"height",{get:function(){return this.fA},set:function(t){if(!fa(P(t,16),32))throw new m("Provided height does not fit in 32 bits (fixed 16.16).");this.fA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"layer",{get:function(){return this.vA},set:function(t){if(!fa(t,16))throw new m("Provided layer does not fit in 16 bits.");this.vA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"alternateGroup",{get:function(){return this._A},set:function(t){if(!fa(t,16))throw new m("Provided alternateGroup does not fit in 16 bits.");this._A=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"matrix",{get:function(){return this.dA},set:function(t){if(0!==t.u||0!==t.v||1!==t.w)throw new m("(u, v, w) does not match the required (0, 0, 1)");this.dA=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8*3+4+4+8+2+2+2+2+36+4+4},i.prototype.serializeFlags=function(t){t.writer.writeUInt(0,20),t.writer.writeBool(this.flags.trackSizeIsAspectRatio),t.writer.writeBool(this.flags.trackInPreview),t.writer.writeBool(this.flags.trackInMovie),t.writer.writeBool(this.flags.trackEnabled)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.serializeTkhdContent(i),i.writer.writeUInt(0,32),i.writer.writeUInt(0,32),i.writer.writeUInt(this.layer,16),i.writer.writeUInt(this.alternateGroup,16),i.writer.writeUInt(P(this.volume,8),16),i.writer.writeUInt(0,16),Dw(this.matrix,i),i.writer.writeUInt(P(this.width,16),32),i.writer.writeUInt(P(this.height,16),32)},i}(en),Jw=function(t){function i(i,e,s,n,r,h){return t.call(this,0,i,e,s,n,r,h)||this}return Dt(i,t),i.prototype.serializeTkhdContent=function(t){t.writer.writeUInt(this.creationTime,32),t.writer.writeUInt(this.modificationTime,32),t.writer.writeUInt(this.trackId,32),t.writer.writeUInt(0,32),t.writer.writeUInt(this.duration,32)},i}(Yw),Zw=function(t){function i(i,e,s,n,r,h){return t.call(this,1,i,e,s,n,r,h)||this}return Dt(i,t),i.prototype.serializeTkhdContent=function(t){t.writer.writeUInt(this.creationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.creationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.trackId,32),t.writer.writeUInt(0,32),t.writer.writeUInt(this.duration.getHighBitsUnsigned(),32),t.writer.writeUInt(this.duration.getLowBitsUnsigned(),32)},i}(Yw);function $w(t){var i,e,s,n,r=t.data,h=_i(r.nextUint32()),o=h.version,a=h.flags,u=a.isSet(8),c=a.isSet(4),d=a.isSet(2),l=a.isSet(1);0===o?(i=r.nextUint32(),e=r.nextUint32(),s=r.nextUint32(),r.skip(4),n=r.nextUint32()):(i=r.nextUint64(),e=r.nextUint64(),s=r.nextUint32(),r.skip(4),n=r.nextUint64()),r.skip(8);var f=r.nextInt16(),v=r.nextInt16(),_=qr(r.nextInt16(),8);r.skip(2);var g=ew(r),p=qr(r.nextUint32(),16),m=qr(r.nextUint32(),16);return 0===o?new Jw({creation:i,modification:e,duration:n},s,_,p,m,{layer:f,matrix:g,alternateGroup:v,trackSizeIsAspectRatio:u,trackEnabled:l,trackInPreview:c,trackInMovie:d}):new Zw({creation:i,modification:e,duration:n},s,_,p,m,{layer:f,matrix:g,alternateGroup:v,trackSizeIsAspectRatio:u,trackEnabled:l,trackInPreview:c,trackInMovie:d})}var ty=function(t){function i(){return t.call(this,"trak")||this}return Dt(i,t),i}(ou);function iy(t){for(var i=new ty,e=0,s=es(t.data);e<s.length;e++){var n=s[e];yn(n,"tkhd")?i.boxes.push($w(n)):yn(n,"mdia")?i.boxes.push(kw(n)):yn(n,"edts")?i.boxes.push(vw(n)):i.boxes.push(ts(n))}return i}var ey=function(t){function i(){return t.call(this,"moov")||this}return Dt(i,t),i}(ou);function sy(t){for(var i=new ey,e=0,s=es(t.data);e<s.length;e++){var n=s[e];yn(n,"mvhd")?i.boxes.push(Kw(n)):yn(n,"trak")?i.boxes.push(iy(n)):yn(n,"mvex")?i.boxes.push(Gw(n)):yn(n,"pssh")?i.boxes.push(Uw(n)):i.boxes.push(ts(n))}return i}r(),r(),r();var ny=function(t){function i(i,e,s){void 0===s&&(s=0);var n=t.call(this,"tfdt",e,s)||this;return n.baseMediaDecodeTime=i,n}return Dt(i,t),w.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"baseMediaDecodeTime",{get:function(){return this.gA},set:function(t){if(!fa(t,this.bitSize))throw new m("Provided baseMediaDecodeTime does not fit in ".concat(this.bitSize," bits."));this.gA=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8},i}(en),ry=function(t){function i(i,e){return void 0===e&&(e=0),t.call(this,i,0,e)||this}return Dt(i,t),i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.baseMediaDecodeTime,32)},i}(ny),hy=function(t){function i(i,e){return void 0===e&&(e=0),t.call(this,i,1,e)||this}return Dt(i,t),i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.baseMediaDecodeTime.getHighBitsUnsigned(),32),i.writer.writeUInt(this.baseMediaDecodeTime.getLowBitsUnsigned(),32)},i}(ny);function oy(t){var i=t.data,e=_i(i.nextUint32()),s=e.version,n=e.flags;return 0===s?new ry(i.nextUint32(),n.raw):new hy(i.nextUint64(),n.raw)}r();var ay=function(t){function i(i,e){void 0===e&&(e=0);var s=t.call(this,"tfhd",e,function(t){return{baseDataOffsetPresent:void 0!==t.baseDataOffset,sampleDescriptionIndexPresent:void 0!==t.sampleDescriptionIndex,defaultSampleDurationPresent:void 0!==t.defaultSampleDuration,defaultSampleSizePresent:void 0!==t.defaultSampleSize,defaultSampleFlagsPresent:void 0!==t.defaultSampleFlags,durationIsEmpty:t.durationIsEmpty,defaultBaseIsMoof:t.defaultBaseIsMoof}}(i))||this;return s.trackId=i.trackId,s.baseDataOffset=i.baseDataOffset,s.sampleDescriptionIndex=i.sampleDescriptionIndex,s.defaultSampleDuration=i.defaultSampleDuration,s.defaultSampleSize=i.defaultSampleSize,s.defaultSampleFlags=i.defaultSampleFlags,s}return Dt(i,t),w.defineProperty(i.prototype,"trackId",{get:function(){return this.sA},set:function(t){if(!fa(t,32))throw new m("Provided track id does not fit in 32 bits.");this.sA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"baseDataOffset",{get:function(){return this.pA},set:function(t){if(void 0===t&&this.flags.baseDataOffsetPresent)throw new m("The base data offset present flag is set.");if(void 0!==t&&!this.flags.baseDataOffsetPresent)throw new m("The base data offset present flag is not set.");if(t&&!fa(t,64))throw new m("Provided baseDataOffset does not fit in 32 bits.");this.pA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"sampleDescriptionIndex",{get:function(){return this.mA},set:function(t){if(void 0===t&&this.flags.sampleDescriptionIndexPresent)throw new m("The sample description index flag is set.");if(void 0!==t&&!this.flags.sampleDescriptionIndexPresent)throw new m("The sample description index flag is not set.");if(t&&!fa(t,32))throw new m("Provided sampleDescriptionIndex does not fit in 32 bits.");this.mA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"defaultSampleDuration",{get:function(){return this.rA},set:function(t){if(void 0===t&&this.flags.defaultSampleDurationPresent)throw new m("The default sample duration present flag is set.");if(void 0!==t&&!this.flags.defaultSampleDurationPresent)throw new m("The default sample duration present flag is not set.");if(t&&!fa(t,32))throw new m("Provided defaultSampleDuration does not fit in 32 bits.");this.rA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"defaultSampleSize",{get:function(){return this.hA},set:function(t){if(void 0===t&&this.flags.defaultSampleSizePresent)throw new m("The default sample size present flag is set.");if(void 0!==t&&!this.flags.defaultSampleSizePresent)throw new m("The default sample size present flag is not set.");if(t&&!fa(t,32))throw new m("Provided defaultSampleSize does not fit in 32 bits.");this.hA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"defaultSampleFlags",{get:function(){return this.oA},set:function(t){if(void 0===t&&this.flags.defaultSampleFlagsPresent)throw new m("The default sample flags present flag is set.");if(void 0!==t&&!this.flags.defaultSampleFlagsPresent)throw new m("The default sample flags present flag is not set.");if((null==t?void 0:t.samplePaddingValue)&&!fa(t.samplePaddingValue,3))throw new m("Provided sample padding value does not fit in 3 bits.");if((null==t?void 0:t.sampleDegradationPriority)&&!fa(t.sampleDegradationPriority,16))throw new m("Provided sample degradation priority does not fit in 16 bits.");this.oA=t},enumerable:!1,configurable:!0}),i.prototype.serializeFlags=function(t){t.writer.writeUInt(0,6),t.writer.writeBool(this.flags.defaultBaseIsMoof),t.writer.writeBool(this.flags.durationIsEmpty),t.writer.writeByte(0),t.writer.writeUInt(0,2),t.writer.writeBool(this.flags.defaultSampleFlagsPresent),t.writer.writeBool(this.flags.defaultSampleSizePresent),t.writer.writeBool(this.flags.defaultSampleDurationPresent),t.writer.writeBit(0),t.writer.writeBool(this.flags.sampleDescriptionIndexPresent),t.writer.writeBool(this.flags.baseDataOffsetPresent)},i.prototype.getBoxContentSize=function(){var i=t.prototype.getBoxContentSize.call(this)+4;return this.flags.baseDataOffsetPresent&&(i+=8),this.flags.sampleDescriptionIndexPresent&&(i+=4),this.flags.defaultSampleDurationPresent&&(i+=4),this.flags.defaultSampleSizePresent&&(i+=4),this.flags.defaultSampleFlagsPresent&&(i+=4),i},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.trackId,32),this.flags.baseDataOffsetPresent&&(i.writer.writeUInt(this.baseDataOffset.getHighBitsUnsigned(),32),i.writer.writeUInt(this.baseDataOffset.getLowBitsUnsigned(),32)),this.flags.sampleDescriptionIndexPresent&&i.writer.writeUInt(this.sampleDescriptionIndex,32),this.flags.defaultSampleDurationPresent&&i.writer.writeUInt(this.defaultSampleDuration,32),this.flags.defaultSampleSizePresent&&i.writer.writeUInt(this.defaultSampleSize,32),this.flags.defaultSampleFlagsPresent&&Bw(this.defaultSampleFlags,i)},i}(en);function uy(t){var i=t.data,e=i.nextUint8(),s=new H(Pi.from(i.nextUint8Array(3)));s.skipBits(6);var n=Boolean(s.readBit()),r=Boolean(s.readBit());s.skipBits(10);var h=Boolean(s.readBit()),o=Boolean(s.readBit()),a=Boolean(s.readBit());s.skipBits(1);var u=Boolean(s.readBit()),c=Boolean(s.readBit()),d=i.nextUint32(),l=c?i.nextUint64():void 0,f=u?i.nextUint32():void 0,v=a?i.nextUint32():void 0,_=o?i.nextUint32():void 0,g=h?iw(new H(Pi.from(i.nextUint8Array(4)))):void 0;return new ay({trackId:d,defaultBaseIsMoof:n,durationIsEmpty:r,baseDataOffset:l,sampleDescriptionIndex:f,defaultSampleDuration:v,defaultSampleSize:_,defaultSampleFlags:g},e)}r();var cy=function(t){function i(i,e,s){var n=t.call(this,"trun",i,function(t){var i,e,s,n;return{dataOffsetPresent:void 0!==t.dataOffset,firstSampleFlagsPresent:void 0!==t.firstSampleFlags,sampleDurationPresent:null!==(i=t.sampleDurationPresent)&&void 0!==i&&i,sampleSizePresent:null!==(e=t.sampleSizePresent)&&void 0!==e&&e,sampleFlagsPresent:null!==(s=t.sampleFlagsPresent)&&void 0!==s&&s,sampleCompositionTimeOffsetsPresent:null!==(n=t.sampleCompositionTimeOffsetsPresent)&&void 0!==n&&n}}(e))||this;return n.dataOffset=e.dataOffset,n.samples=s,n.firstSampleFlags=e.firstSampleFlags,n}return Dt(i,t),w.defineProperty(i.prototype,"dataOffset",{get:function(){return this.wA},set:function(t){if(t&&!fa(t,32))throw new m("Provided data offset does not fit in 32 bits.");this.wA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"firstSampleFlags",{get:function(){return this.yA},set:function(t){if((null==t?void 0:t.samplePaddingValue)&&!fa(t.samplePaddingValue,3))throw new m("Provided sample padding value does not fit in 3 bits.");if((null==t?void 0:t.sampleDegradationPriority)&&!fa(t.sampleDegradationPriority,16))throw new m("Provided sample degradation priority does not fit in 16 bits.");this.yA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"samples",{get:function(){return this.bA},set:function(t){var i,e;if(!fa(t.length,32))throw new m("The sample count cannot be represented in 32 bits.");for(var s=0,n=t;s<n.length;s++){var r=n[s];if(void 0===r.duration&&this.flags.sampleDurationPresent)throw new m("The sample duration present flag is set.");if(void 0!==r.duration&&!this.flags.sampleDurationPresent)throw new m("The sample duration present flag is not set.");if(r.duration&&!fa(r.duration,32))throw new m("Provided sample duration does not fit in 32 bits.");if(void 0===r.size&&this.flags.sampleSizePresent)throw new m("The sample size present flag is set.");if(void 0!==r.size&&!this.flags.sampleSizePresent)throw new m("The sample size present flag is not set.");if(r.size&&!fa(r.size,32))throw new m("Provided sample size does not fit in 32 bits.");if(void 0===r.flags&&this.flags.sampleFlagsPresent)throw new m("The sample flags present flag is set.");if(void 0!==r.flags&&!this.flags.sampleFlagsPresent)throw new m("The sample flags present flag is not set.");if((null===(i=r.flags)||void 0===i?void 0:i.samplePaddingValue)&&!fa(r.flags.samplePaddingValue,3))throw new m("Provided sample padding value does not fit in 3 bits.");if((null===(e=r.flags)||void 0===e?void 0:e.sampleDegradationPriority)&&!fa(r.flags.sampleDegradationPriority,16))throw new m("Provided sample degradation priority does not fit in 16 bits.");if(void 0===r.compositionTimeOffset&&this.flags.sampleCompositionTimeOffsetsPresent)throw new m("The sample compositionTimeOffset present flag is set.");if(void 0!==r.compositionTimeOffset&&!this.flags.sampleCompositionTimeOffsetsPresent)throw new m("The sample compositionTimeOffset present flag is not set.");if(r.compositionTimeOffset&&!fa(r.compositionTimeOffset,32))throw new m("Provided sample compositionTimeOffset does not fit in 32 bits.")}this.bA=t},enumerable:!1,configurable:!0}),i.prototype.serializeFlags=function(t){t.writer.writeByte(0),t.writer.writeUInt(0,4),t.writer.writeBool(this.flags.sampleCompositionTimeOffsetsPresent),t.writer.writeBool(this.flags.sampleFlagsPresent),t.writer.writeBool(this.flags.sampleSizePresent),t.writer.writeBool(this.flags.sampleDurationPresent),t.writer.writeUInt(0,5),t.writer.writeBool(this.flags.firstSampleFlagsPresent),t.writer.writeBit(0),t.writer.writeBool(this.flags.dataOffsetPresent)},i.prototype.getBoxContentSize=function(){var i=t.prototype.getBoxContentSize.call(this)+4;return this.flags.dataOffsetPresent&&(i+=4),this.flags.firstSampleFlagsPresent&&(i+=4),this.flags.sampleDurationPresent&&(i+=4*this.samples.length),this.flags.sampleSizePresent&&(i+=4*this.samples.length),this.flags.sampleFlagsPresent&&(i+=4*this.samples.length),this.flags.sampleCompositionTimeOffsetsPresent&&(i+=4*this.samples.length),i},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.samples.length,32),this.flags.dataOffsetPresent&&i.writer.writeUInt(this.dataOffset,32),this.flags.firstSampleFlagsPresent&&Bw(this.firstSampleFlags,i);for(var e=0,s=this.samples;e<s.length;e++){var n=s[e];this.flags.sampleDurationPresent&&i.writer.writeUInt(n.duration,32),this.flags.sampleSizePresent&&i.writer.writeUInt(n.size,32),this.flags.sampleFlagsPresent&&Bw(n.flags,i),this.flags.sampleCompositionTimeOffsetsPresent&&(0===this.version?i.writer.writeUInt(n.compositionTimeOffset,32):i.writer.writeInt(n.compositionTimeOffset,32))}},i}(en);function dy(t){var i=t.data,e=i.nextUint8(),s=new H(Pi.from(i.nextUint8Array(3)));s.skipBits(12);var n=Boolean(s.readBit()),r=Boolean(s.readBit()),h=Boolean(s.readBit()),o=Boolean(s.readBit());s.skipBits(5);var a=Boolean(s.readBit());s.skipBits(1);var u=Boolean(s.readBit()),c=i.nextUint32(),d={sampleDurationPresent:o,sampleSizePresent:h,sampleFlagsPresent:r,sampleCompositionTimeOffsetsPresent:n};u&&(d.dataOffset=i.nextInt32()),a&&(d.firstSampleFlags=iw(new H(Pi.from(i.nextUint8Array(4)))));for(var l=[],f=0;f<c;f++){var v={};o&&(v.duration=i.nextUint32()),h&&(v.size=i.nextUint32()),r&&(v.flags=iw(new H(Pi.from(i.nextUint8Array(4))))),n&&(v.compositionTimeOffset=0===e?i.nextUint32():i.nextInt32()),l.push(v)}return new cy(e,d,l)}var Kh=function(t){function i(){return t.call(this,"traf")||this}return Dt(i,t),i}(ou);function ly(t){for(var i=new Kh,e=0,s=es(t.data);e<s.length;e++){var n=s[e];yn(n,"tfhd")?i.boxes.push(uy(n)):yn(n,"tfdt")?i.boxes.push(oy(n)):yn(n,"trun")?i.boxes.push(dy(n)):i.boxes.push(ts(n))}return i}var fy=function(t){function i(){return t.call(this,"moof")||this}return Dt(i,t),i}(ou);function vy(t){for(var i=new fy,e=0,s=es(t.data);e<s.length;e++){var n=s[e];yn(n,"traf")?i.boxes.push(ly(n)):yn(n,"pssh")?i.boxes.push(Uw(n)):i.boxes.push(ts(n))}return i}r();!function(t){function i(i){var e=t.call(this,"mfhd",0,0)||this;return e.sequenceNumber=i,e}Dt(i,t),w.defineProperty(i.prototype,"sequenceNumber",{get:function(){return this.AA},set:function(t){if(!fa(t,32))throw new m("Provided sequence number does not fit in 32 bits.");this.AA=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.sequenceNumber,32)}}(en);r();var _y=function(t){function i(i){var e=t.call(this,"frma")||this;return e.codingName=i,e}return Dt(i,t),w.defineProperty(i.prototype,"codingName",{get:function(){return this.SA},set:function(t){if(4!==t.length)throw new m("Provided coding name was not 4 characters long.");this.SA=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 4},i.prototype.serializeBoxContent=function(t){t.writer.writeString(this.codingName)},i}(Bm);r();!function(t){function i(i,e){var s=t.call(this,"pasp")||this;return s.hSpacing=i,s.vSpacing=e,s}Dt(i,t),w.defineProperty(i.prototype,"hSpacing",{get:function(){return this.TA},set:function(t){if(!fa(t,32))throw new m("Provided hSpacing does not fit in 32 bits.");this.TA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"vSpacing",{get:function(){return this.kA},set:function(t){if(!fa(t,32))throw new m("Provided vSpacing does not fit in 32 bits.");this.kA=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 8},i.prototype.serializeBoxContent=function(t){t.writer.writeUInt(this.hSpacing,32),t.writer.writeUInt(this.vSpacing,32)}}(Bm);r();!function(t){function i(i,e,s){var n=t.call(this,i)||this;return n.sample=e,n.sinf=s,n}Dt(i,t),i.prototype.getBoxContentSize=function(){return this.sample.getBoxContentSize()+this.sinf.getSize()},i.prototype.serializeBoxContent=function(t){this.sample.serializeBoxContent(t),t.concat(this.sinf.serialize())}}(ou);r();!function(t){function i(i,e,s){var n=t.call(this,"sinf")||this;return n.schm=e,n.schi=s,n.frma=new _y(i),n}Dt(i,t),i.prototype.getBoxContentSize=function(){var t,i,e,s;return this.frma.getSize()+(null!==(i=null===(t=this.schm)||void 0===t?void 0:t.getSize())&&void 0!==i?i:0)+(null!==(s=null===(e=this.schi)||void 0===e?void 0:e.getSize())&&void 0!==s?s:0)},i.prototype.serializeBoxContent=function(t){t.concat(this.frma.serialize()),this.schm&&t.concat(this.schm.serialize()),this.schi&&t.concat(this.schi.serialize())}}(Bm);r();var gy=function(t){function i(i,e,s){var n=t.call(this,"saio",i,void 0===s?0:1)||this;return n.entries=e,n.explicitAuxInfoType=s,n}return Dt(i,t),w.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"entries",{get:function(){return this.Lb},set:function(t){var i=this;if(!fa(t.length,32))throw new m("Number of entries provided does not fit in 32 bits.");if(t.some(function(t){return!fa(t,i.bitSize)}))throw new m("Not all provided entries fit in ".concat(this.bitSize," bits."));this.Lb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"explicitAuxInfoType",{get:function(){return this.EA},set:function(t){if(void 0===t)this.flags=0;else{if(!fa(t.auxInfoType,32))throw new m("Provided auxInfoType does not fit in 32 bits.");if(!fa(t.auxInfoTypeParameter,32))throw new m("Provided auxInfoTypeParameter does not fit in 32 bits.");this.flags=1}this.EA=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+(void 0===this.explicitAuxInfoType?0:8)+4+this.entries.length*this.bitSize/8},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),void 0!==this.explicitAuxInfoType&&(i.writer.writeUInt(this.explicitAuxInfoType.auxInfoType,32),i.writer.writeUInt(this.explicitAuxInfoType.auxInfoTypeParameter,32)),i.writer.writeUInt(this.entries.length,32),this.serializeSaioContent(i)},i}(en);(function(t){function i(){return null!==t&&t.apply(this,arguments)||this}Dt(i,t),i.prototype.serializeSaioContent=function(t){for(var i=0,e=this.entries;i<e.length;i++){var s=e[i];t.writer.writeUInt(s,32)}}})(gy),function(t){function i(){return null!==t&&t.apply(this,arguments)||this}Dt(i,t),i.prototype.serializeSaioContent=function(t){for(var i=0,e=this.entries;i<e.length;i++){var s=e[i];t.writer.writeUInt(s.getHighBitsUnsigned(),32),t.writer.writeUInt(s.getLowBitsUnsigned(),32)}}}(gy);r();!function(t){function i(i,e,s){var n=t.call(this,"saiz",0,void 0===s?0:1)||this;return n.defaultSampleInfoSize=i,n.sampleInfoSizes=e,n.explicitAuxInfoType=s,n}Dt(i,t),w.defineProperty(i.prototype,"defaultSampleInfoSize",{get:function(){return this.xA},set:function(t){if(!fa(t,8))throw new m("Provided defaultSampleInfoSize does not fit in a single byte.");this.xA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"sampleInfoSizes",{get:function(){return this.PA},set:function(t){if(!fa(t.length,32))throw new m("Number of sampleInfoSizes provided does not fit in 32 bits.");if(t.some(function(t){return!fa(t,8)}))throw new m("Not all provided sampleInfoSizes fit in a byte.");this.PA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"explicitAuxInfoType",{get:function(){return this.EA},set:function(t){if(void 0===t)this.flags=0;else{if(!fa(t.auxInfoType,32))throw new m("Provided auxInfoType does not fit in 32 bits.");if(!fa(t.auxInfoTypeParameter,32))throw new m("Provided auxInfoTypeParameter does not fit in 32 bits.");this.flags=1}this.EA=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+(void 0===this.explicitAuxInfoType?0:8)+1+4+(0!==this.defaultSampleInfoSize?0:this.sampleInfoSizes.length)},i.prototype.serializeBoxContent=function(i){if(0!==this.defaultSampleInfoSize&&this.sampleInfoSizes.length>0)throw new m("Both a default size and specific sizes are provided.  This is prohibited.");t.prototype.serializeBoxContent.call(this,i),void 0!==this.explicitAuxInfoType&&(i.writer.writeUInt(this.explicitAuxInfoType.auxInfoType,32),i.writer.writeUInt(this.explicitAuxInfoType.auxInfoTypeParameter,32)),i.writer.writeByte(this.defaultSampleInfoSize),i.writer.writeUInt(this.sampleInfoSizes.length,32);for(var e=0,s=this.sampleInfoSizes;e<s.length;e++){var n=s[e];i.writer.writeByte(n)}}}(en);r();!function(t){function i(i){var e=t.call(this,"sdtp",0,0)||this;return e.samples=i,e}Dt(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.samples.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i);for(var e=0,s=this.samples;e<s.length;e++){Nw(s[e],i)}}}(en);r();!function(t){function i(i){return t.call(this,"stsd",i,0)||this}Dt(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.boxes.length,32)}}(ml);r();var py=function(t){function i(i,e,s){var n=t.call(this,"sgpd",i,0)||this;return n.entries=s,n.groupingType=e,n}return Dt(i,t),w.defineProperty(i.prototype,"groupingType",{get:function(){return this.IA},set:function(t){if(4!==t.length)throw new m("The provided groupingType does not equal 4 characters.");this.IA=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeString(this.groupingType),this.serializeVersionBoxContent(i),i.writer.writeUInt(this.entries.length,32);for(var e=0,s=this.entries;e<s.length;e++){var n=s[e];this.serializeEntryBoxContent(i,n)}},i.prototype.serializeEntryBoxContent=function(t,i){i.serializeBoxContent(t)},i}(en);(function(t){function i(i,e){return t.call(this,0,i,e)||this}Dt(i,t),i.prototype.serializeVersionBoxContent=function(t){}})(py),function(t){function i(i,e,s){var n=t.call(this,1,i,s)||this;return n.defaultLength=e,n}Dt(i,t),w.defineProperty(i.prototype,"defaultLength",{get:function(){return this.CA},set:function(t){if(!fa(t,32))throw new m("The provided defaultLength does not fit in 32 bits.");this.CA=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+this.entries.length*(this.defaultLength||4)},i.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.defaultLength,32)},i.prototype.serializeEntryBoxContent=function(t,i){0===this.defaultLength&&t.writer.writeUInt(i.getBoxContentSize(),32),i.serializeBoxContent(t)}}(py),function(t){function i(i,e,s,n){void 0===n&&(n=0);var r=this;if(i<2)throw new m("This constructor is only meant for versions 2 and up.");return(r=t.call(this,i,e,s)||this).defaultSampleDescriptionIndex=n,r}Dt(i,t),w.defineProperty(i.prototype,"defaultSampleDescriptionIndex",{get:function(){return this.nA},set:function(t){if(!fa(t,32))throw new m("The provided defaultSampleDescriptionIndex does not fit in 32 bits.");this.nA=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},i.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.defaultSampleDescriptionIndex,32)}}(py);r();(function(t){function i(i){void 0===i&&(i=[]);var e=t.call(this,"stsz",0,0)||this;return e.sampleSizes=i,e}Dt(i,t),w.defineProperty(i.prototype,"sampleSizes",{get:function(){return this.RA},set:function(t){if(!fa(t.length,32))throw new m("Number of allowed samples cannot fit in 32 bits.");if(t.some(function(t){return!fa(t,32)}))throw new m("Not all sampleSizes can be represented in 32 bits.");this.RA=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4+4*this.sampleSizes.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(0,32),i.writer.writeUInt(this.sampleSizes.length,32);for(var e=0,s=this.sampleSizes;e<s.length;e++){var n=s[e];i.writer.writeUInt(n,32)}}})(en),function(t){function i(i,e){void 0===i&&(i=0),void 0===e&&(e=0);var s=t.call(this,"stsz",0,0)||this;return s.defaultSampleSize=i,s.samples=e,s}Dt(i,t),w.defineProperty(i.prototype,"defaultSampleSize",{get:function(){return this.hA},set:function(t){if(!fa(t,32))throw new m("Provided defaultSampleSize does not fit in 32 bits.");this.hA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"samples",{get:function(){return this.bA},set:function(t){if(!fa(t,32))throw new m("Number of allowed samples cannot fit in 32 bits.");this.bA=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.defaultSampleSize,32),i.writer.writeUInt(this.samples,32)}}(en);r();!function(t){function i(){return t.call(this,"stbl")||this}Dt(i,t)}(ou);r();!function(t){function i(i){var e=t.call(this,"stsc",0,0)||this;return e.entries=i,e}Dt(i,t),w.defineProperty(i.prototype,"entries",{get:function(){return this.Lb},set:function(t){if(!fa(t.length,32))throw new m("Number of allowed entries cannot fit in 32 bits.");if(t.some(function(t){return!fa(t.firstChunk,32)||!fa(t.sampleDescriptionIndex,32)||!fa(t.samplesPerChunk,32)}))throw new m("Not all entries can be represented in 96 bits.");this.Lb=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+12*this.entries.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.entries.length,32);for(var e=0,s=this.entries;e<s.length;e++){var n=s[e];i.writer.writeUInt(n.firstChunk,32),i.writer.writeUInt(n.samplesPerChunk,32),i.writer.writeUInt(n.sampleDescriptionIndex,32)}}}(en);r();!function(t){function i(){return t.call(this,"schi")||this}Dt(i,t)}(ou);r();!function(t){function i(i,e,s){var n=t.call(this,"schm",0,void 0===s?0:1)||this;return n.schemeType=i,n.schemeVersion=e,n.schemeUri=s,n}Dt(i,t),w.defineProperty(i.prototype,"schemeType",{get:function(){return this.DA},set:function(t){if(4!==t.length)throw new m("The provided schemeType does not have a length of 4.");this.DA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"schemeVersion",{get:function(){return this.NA},set:function(t){if(!fa(t,32))throw new m("The provided schemeVersion does not fit in 23 bits.");this.NA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"schemeUri",{get:function(){return this.BA},set:function(t){if(t&&4!==t.length)throw new m("The provided schemeUri does not have a length of 4.");this.flags=void 0===t?0:1,this.BA=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4+(void 0===this.schemeUri?0:this.schemeUri.length+1)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeString(this.schemeType),i.writer.writeUInt(this.schemeVersion,32),this.schemeUri&&(i.writer.writeString(this.schemeUri),i.writer.writeByte(0))}}(en);r();var my=function(t){function i(i,e,s,n,r,h,o){void 0===o&&(o=0);var a=t.call(this,"sidx",i,o)||this;return a.referenceId=e,a.timescale=s,a.earliestPresentationTime=n,a.firstOffset=r,a.references=h,a}return Dt(i,t),w.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"referenceId",{get:function(){return this.MA},set:function(t){if(!fa(t,32))throw new m("Provided referenceId does not fit in 32 bits.");this.MA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"timescale",{get:function(){return this.Jb},set:function(t){if(!fa(t,32))throw new m("Provided timescale does not fit in 32 bits.");this.Jb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"earliestPresentationTime",{get:function(){return this.LA},set:function(t){if(!fa(t,this.bitSize))throw new m("Provided earliestPresentationTime does not fit in ".concat(this.bitSize," bits."));this.LA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"firstOffset",{get:function(){return this.OA},set:function(t){if(!fa(t,this.bitSize))throw new m("Provided timescale does not fit in ".concat(this.bitSize," bits."));this.OA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"references",{get:function(){return this.FA},set:function(t){if(!fa(t.length,16))throw new m("The number of provided reference items does not fit in 16 bits.");for(var i=0,e=t;i<e.length;i++){var s=e[i];if(!fa(s.referencedSize,31))throw new m("Provided referenced size does not fit in 31 bits.");if(!fa(s.subsegmentDuration,32))throw new m("Provided subsegment duration does not fit in 31 bits.");if(!fa(s.sapType,3))throw new m("Provided SAP type does not fit in 3 bits.");if(!fa(s.sapDeltaTime,28))throw new m("Provided SAP delta time does not fit in 28 bits.")}this.FA=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4+this.bitSize/8*2+2+2+12*this.references.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.referenceId,32),i.writer.writeUInt(this.timescale,32),this.serializeSidxBoxContent(i),i.writer.writeUInt(0,16),i.writer.writeUInt(this.references.length,16);for(var e=0,s=this.references;e<s.length;e++){var n=s[e];i.writer.writeBit(n.referenceType),i.writer.writeUInt(n.referencedSize,31),i.writer.writeUInt(n.subsegmentDuration,32),i.writer.writeBool(n.startsWithSap),i.writer.writeUInt(n.sapType,3),i.writer.writeUInt(n.sapDeltaTime,28)}},i}(en),wy=function(t){function i(i,e,s,n,r,h){return void 0===h&&(h=0),t.call(this,0,i,e,s,n,r,h)||this}return Dt(i,t),i.prototype.serializeSidxBoxContent=function(t){t.writer.writeUInt(this.earliestPresentationTime,32),t.writer.writeUInt(this.firstOffset,32)},i}(my),yy=function(t){function i(i,e,s,n,r,h){return void 0===h&&(h=0),t.call(this,1,i,e,s,n,r,h)||this}return Dt(i,t),i.prototype.serializeSidxBoxContent=function(t){t.writer.writeUInt(this.earliestPresentationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.earliestPresentationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.firstOffset.getHighBitsUnsigned(),32),t.writer.writeUInt(this.firstOffset.getLowBitsUnsigned(),32)},i}(my);r();var by=function(t){function i(i,e,s){return t.call(this,"styp",i,e,s)||this}return Dt(i,t),i}(_w);function Ay(t){for(var i=t.data,e=i.nextChars(4),s=i.nextUint32(),n=[];i.cursor.offset<i.data.byteLength;)n.push(i.nextChars(4));return new by(e,s,n)}r();!function(t){function i(i){void 0===i&&(i=0);var e=t.call(this,"smhd",0,0)||this;return e.balance=i,e}Dt(i,t),w.defineProperty(i.prototype,"balance",{get:function(){return this.UA},set:function(t){if(t<-1||t>1)throw new m("Provided balance does not fit in the allowed range [-1, 1].");if(!fa(P(t,8),16))throw new m("Provided balance does not fit in 16 bits (fixed 8.8).");this.UA=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+2+2},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(P(this.balance,8),16),i.writer.writeUInt(0,16)}}(en);r();!function(t){function i(i){var e=t.call(this,"stss",0,0)||this;return e.entries=i,e}Dt(i,t),w.defineProperty(i.prototype,"entries",{get:function(){return this.Lb},set:function(t){if(!fa(t.length,32))throw new m("Number of allowed entries cannot fit in 32 bits.");if(t.some(function(t){return!fa(t,32)}))throw new m("Not all entries can be represented in 32 bits.");this.Lb=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4*this.entries.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.entries.length,32);for(var e=0,s=this.entries;e<s.length;e++){var n=s[e];i.writer.writeUInt(n,32)}}}(en);r();!function(t){function i(i){var e=t.call(this,"stts",0,0)||this;return e.entries=i,e}Dt(i,t),w.defineProperty(i.prototype,"entries",{get:function(){return this.Lb},set:function(t){if(!fa(t.length,32))throw new m("Number of allowed entries cannot fit in 32 bits.");if(t.some(function(t){return!fa(t.sampleCount,32)||!fa(t.sampleDelta,32)}))throw new m("Not all entries can be represented in 64 bits.");this.Lb=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+8*this.entries.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.entries.length,32);for(var e=0,s=this.entries;e<s.length;e++){var n=s[e];i.writer.writeUInt(n.sampleCount,32),i.writer.writeUInt(n.sampleDelta,32)}}}(en);r();!function(t){function i(i){var e=t.call(this,"trep",0,0)||this;return e.trackId=i,e}Dt(i,t),w.defineProperty(i.prototype,"trackId",{get:function(){return this.sA},set:function(t){if(!fa(t,32))throw new m("The provided trackId does not fit in 32 bits.");this.sA=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.trackId,32)}}(ml);r();!function(t){function i(){return t.call(this,"udta")||this}Dt(i,t)}(ou);r();var Sy={red:0,green:0,blue:0};!function(t){function i(i,e){void 0===i&&(i=0),void 0===e&&(e=Sy);var s=t.call(this,"vmhd",0,1)||this;return s.graphicsMode=i,s.opColor=e,s}Dt(i,t),w.defineProperty(i.prototype,"opColor",{get:function(){return this.VA},set:function(t){if(!fa(t.red,16)||!fa(t.green,16)||!fa(t.blue,16))throw new m("Not all colors could be represented in 16 bits.");this.VA=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+2+6},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.graphicsMode,16),i.writer.writeUInt(this.opColor.red,16),i.writer.writeUInt(this.opColor.green,16),i.writer.writeUInt(this.opColor.blue,16)}}(en);r();var Ty=function(t){function i(i,e,s,n,r){void 0===n&&(n={}),void 0===r&&(r=void 0);var h,o,a,u,c,d=this;return(d=t.call(this,i,e)||this).width=s.width,d.height=s.height,d.horizontalResolution=null!==(h=s.horizontal)&&void 0!==h?h:72,d.verticalResolution=null!==(o=s.vertical)&&void 0!==o?o:72,d.compressorName=null!==(a=n.compressorName)&&void 0!==a?a:"",d.frameCount=null!==(u=n.frameCount)&&void 0!==u?u:1,d.depth=null!==(c=n.depth)&&void 0!==c?c:24,d.clap=n.clap,d.pasp=n.pasp,d.extra=r,d}return Dt(i,t),w.defineProperty(i.prototype,"width",{get:function(){return this.lA},set:function(t){if(!fa(t,16))throw new m("Provided width does not fit in 16 bits.");this.lA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"height",{get:function(){return this.fA},set:function(t){if(!fa(t,16))throw new m("Provided height does not fit in 16 bits.");this.fA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"horizontalResolution",{get:function(){return this.HA},set:function(t){if(!fa(P(t,16),32))throw new m("Provided horizontalResolution does not fit in 32 bits (fixed 16.16).");this.HA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"verticalResolution",{get:function(){return this.WA},set:function(t){if(!fa(P(t,16),32))throw new m("Provided verticalResolution does not fit in 32 bits (fixed 16.16).");this.WA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"compressorName",{get:function(){return this.qA},set:function(t){if(t.length>31)throw new m("The provided compressorName should at most be 31 characters long.");this.qA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"frameCount",{get:function(){return this.zA},set:function(t){if(!fa(t,16))throw new m("Provided frameCount does not fit in 16 bits.");this.zA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"depth",{get:function(){return this.GA},set:function(t){if(!fa(t,16))throw new m("Provided depth does not fit in 16 bits.");this.GA=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){var i,e,s,n,r,h;return t.prototype.getBoxContentSize.call(this)+2+2+12+2+2+4+4+4+2+32+2+2+(null!==(e=null===(i=this.clap)||void 0===i?void 0:i.getSize())&&void 0!==e?e:0)+(null!==(n=null===(s=this.pasp)||void 0===s?void 0:s.getSize())&&void 0!==n?n:0)+(null!==(h=null===(r=this.extra)||void 0===r?void 0:r.length)&&void 0!==h?h:0)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(0,16),i.writer.writeUInt(0,16),i.writer.writeUInt(0,32),i.writer.writeUInt(0,32),i.writer.writeUInt(0,32),i.writer.writeUInt(this.width,16),i.writer.writeUInt(this.height,16),i.writer.writeUInt(P(this.horizontalResolution,16),32),i.writer.writeUInt(P(this.verticalResolution,16),32),i.writer.writeUInt(0,32),i.writer.writeUInt(this.frameCount,16),i.writer.writeByte(this.compressorName.length),i.writer.writeString(this.compressorName);for(var e=0;e<31-this.compressorName.length;e++)i.writer.writeByte(0);i.writer.writeUInt(this.depth,16),i.writer.writeInt(-1,16),this.clap&&i.concat(this.clap.serialize()),this.pasp&&i.concat(this.pasp.serialize()),this.extra&&Mm(i.writer,this.extra)},i}(ow);r(),r();!function(t){function i(i){var e=t.call(this,"esds",0,0)||this;return e.esDescriptor=i,e}Dt(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+(this.esDescriptor instanceof j?this.esDescriptor.length:this.esDescriptor.getSize())},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.esDescriptor instanceof j?i.concat(Pi.from(this.esDescriptor)):this.esDescriptor.serialize(i)}}(en);r();!function(t){function i(i,e,s){var n=t.call(this,"mp4a",i,s)||this;return n.esd=e,n}Dt(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.esd.getSize()},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.concat(this.esd.serialize())}}(aw);r();!function(t){function i(i,e,s,n){void 0===n&&(n={});var r=t.call(this,"mp4v",i,e,n)||this;return r.esDescriptor=s,r}Dt(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.esDescriptor.getSize()},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.esDescriptor.serialize(i)}}(Ty);r();!function(t){function i(i,e){var s=t.call(this,"mp4s",i)||this;return s.esDescriptor=e,s}Dt(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.esDescriptor.getSize()},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.esDescriptor.serialize(i)}}(ow);r(),r();!function(t){function i(i){var e=t.call(this,"avcC")||this;return e.decoderConfig=i,e}Dt(i,t),i.prototype.getBoxContentSize=function(){return this.decoderConfig.getSize()},i.prototype.serializeBoxContent=function(t){this.decoderConfig.serialize(t)}}(Bm);r();!function(){function t(t,i,e,s,n,r){void 0===r&&(r=1),this.lengthSizeMinusOne=e,this.version=r,this.profileIndication=t.indication,this.profileCompatibility=t.compatibility,this.levelIndication=i,this.spsSets=s,this.ppsSets=n}w.defineProperty(t.prototype,"version",{get:function(){return this.XA},set:function(t){if(!fa(t,8))throw new m("Provided version does not fit in 8 bits.");this.XA=t},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"profileIndication",{get:function(){return this.jA},set:function(t){if(!fa(t,8))throw new m("Provided profileIndication does not fit in 8 bits.");this.jA=t},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"profileCompatibility",{get:function(){return this.QA},set:function(t){if(!fa(t,8))throw new m("Provided profileCompatibility does not fit in 8 bits.");this.QA=t},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"levelIndication",{get:function(){return this.KA},set:function(t){if(!fa(t,8))throw new m("Provided levelIndication does not fit in 8 bits.");this.KA=t},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"spsSets",{get:function(){return this.YA},set:function(t){if(!fa(t.length,5))throw new m("Provided number of spsSets exceeds the max (32)");this.YA=t},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"ppsSets",{get:function(){return this.JA},set:function(t){if(!fa(t.length,8))throw new m("Provided number of ppsSets exceeds the max (256)");this.JA=t},enumerable:!1,configurable:!0}),t.prototype.getSize=function(){return 7+2*this.spsSets.length+this.spsSets.reduce(function(t,i){return t+i.length},0)+2*this.ppsSets.length+this.ppsSets.reduce(function(t,i){return t+i.length},0)},t.prototype.serialize=function(t){t.writer.writeByte(this.version),t.writer.writeByte(this.profileIndication),t.writer.writeByte(this.profileCompatibility),t.writer.writeByte(this.levelIndication),t.writer.writeBits([1,1,1,1,1,1]),t.writer.writeUInt(this.lengthSizeMinusOne,2),t.writer.writeBits([1,1,1]),t.writer.writeUInt(this.spsSets.length,5);for(var i=0,e=this.spsSets;i<e.length;i++){var s=e[i];t.writer.writeUInt(s.length,16),t.concat(Pi.from(s))}t.writer.writeByte(this.ppsSets.length);for(var n=0,r=this.ppsSets;n<r.length;n++){var h=r[n];t.writer.writeUInt(h.length,16),t.concat(Pi.from(h))}}}();r();!function(t){function i(i,e,s,n,r){void 0===n&&(n={}),void 0===r&&(r=void 0);var h=t.call(this,"avc1",i,e,n)||this;return h.configurationBox=s,h.bitrateBox=r,h}Dt(i,t),i.prototype.getBoxContentSize=function(){var i,e;return t.prototype.getBoxContentSize.call(this)+this.configurationBox.getSize()+(null!==(e=null===(i=this.bitrateBox)||void 0===i?void 0:i.getSize())&&void 0!==e?e:0)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.concat(this.configurationBox.serialize()),this.bitrateBox&&i.concat(this.bitrateBox.serialize())}}(Ty);r();!function(t){function i(i,e,s){var n=t.call(this,"btrt")||this;return n.bufferSizeDb=i,n.max=e,n.avg=s,n}Dt(i,t),w.defineProperty(i.prototype,"bufferSizeDb",{get:function(){return this.kb},set:function(t){if(!fa(t,32))throw new m("Provided bufferSizeDb does not fit in 32 bits.");this.kb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"max",{get:function(){return this.ZA},set:function(t){if(!fa(t,32))throw new m("Provided max does not fit in 32 bits.");this.ZA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"avg",{get:function(){return this.$A},set:function(t){if(!fa(t,32))throw new m("Provided avg does not fit in 32 bits.");this.$A=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 12},i.prototype.serializeBoxContent=function(t){t.writer.writeUInt(this.bufferSizeDb,32),t.writer.writeUInt(this.max,32),t.writer.writeUInt(this.avg,32)}}(Bm);r(),r(),r();var ky=function(t){function i(i,e){var s,n,r,h,o=this;if(o=t.call(this,"tenc",i,0)||this,e.perSampleIvSize>0&&(null!==(n=null===(s=e.constantIv)||void 0===s?void 0:s.length)&&void 0!==n?n:0)>0)throw new m("Either perSampleSize should be > 0 or constantIv should be defined. Not both.");return o.kId=e.kId,o.isProtected=null!==(r=e.isProtected)&&void 0!==r?r:1,e.perSampleIvSize>0?o.perSampleIvSize=e.perSampleIvSize:o.constantIv=null!==(h=e.constantIv)&&void 0!==h?h:new j(0),o}return Dt(i,t),w.defineProperty(i.prototype,"isProtected",{get:function(){return this.tS},set:function(t){if(!fa(t,8))throw new m("Provided isProtected does not fit in 1 byte.");this.tS=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"perSampleIvSize",{get:function(){return this.iS},set:function(t){if(![8,16].includes(t))throw new m("Provided perSampleIvSize does not match any allowed value [8, 16].");this.iS=t,this.eS=new j(0)},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"kId",{get:function(){return this.sS},set:function(t){if(16!==t.length)throw new m("Provided kId length is not 16.");this.sS=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"constantIv",{get:function(){return this.eS},set:function(t){if(![8,16].includes(t.length))throw new m("Provided constant IV length does not match any allowed value [8, 16].");this.eS=t,this.iS=0},enumerable:!1,configurable:!0}),i.prototype.getTencHeaderSize=function(){return 20+(this.constantIv.length>0?1+this.constantIv.length:0)},i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.getTencHeaderSize()},i.prototype.serializeVersionBoxContent=function(t){t.writer.writeByte(0)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.serializeOwnContent(i)},i.prototype.serializeOwnContent=function(t){t.writer.writeByte(0),this.serializeVersionBoxContent(t),t.writer.writeByte(this.isProtected),t.writer.writeByte(this.perSampleIvSize),Mm(t.writer,this.kId),0===this.perSampleIvSize&&(t.writer.writeByte(this.constantIv.length),Mm(t.writer,this.constantIv))},i}(en),Ey=(function(t){function i(i){return t.call(this,0,i)||this}Dt(i,t)}(ky),function(t){function i(i){var e=t.call(this,1,i)||this;return e.cryptByteBlocks=i.cryptByteBlock,e.skipByteBlocks=i.skipByteBlock,e}return Dt(i,t),w.defineProperty(i.prototype,"cryptByteBlocks",{get:function(){return this.nS},set:function(t){if(!fa(t,4))throw new m("Provided cryptByteBlocks does not fit in 4 bits.");this.nS=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"skipByteBlocks",{get:function(){return this.rS},set:function(t){if(!fa(t,4))throw new m("Provided skipByteBlocks does not fit in 4 bits.");this.rS=t},enumerable:!1,configurable:!0}),i.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.cryptByteBlocks,4),t.writer.writeUInt(this.skipByteBlocks,4)},i}(ky));!function(t){function i(i){var e=t.call(this)||this;return e.tencBox=new Ey(i),e}Dt(i,t),i.prototype.serializeBoxContent=function(t){this.tencBox.serializeOwnContent(t)},i.prototype.getBoxContentSize=function(){return this.tencBox.getTencHeaderSize()}}(Mw);function xy(t){return void 0!==t.iv}function Py(t){return void 0!==t.subsamples}r();!function(t){function i(i){var e=t.call(this,"senc",0,{useSubsampleEncryption:!1})||this;return e.samples=i,e}Dt(i,t),w.defineProperty(i.prototype,"samples",{get:function(){return this.bA},set:function(t){var i;if(!fa(t.length,32))throw new m("The number of samples provided does not fit in 32 bits.");for(var e=0,s=t;e<s.length;e++){var n=s[e];if(xy(n)&&![8,16].includes(n.iv.length))throw new m("IV of one of the provided samples did not satisfy the required length constraints. [8, 16]");if(void 0===i&&(i=Py(n)),!0===i&&!Py(n)||!1===i&&Py(n))throw new m("Mix of samples with and without subsamples detected.");if(Py(n)){if(!fa(n.subsamples.length,16))throw new m("Subsample length of one of the provided samples does not fit in 16 bits.");for(var r=0,h=n.subsamples;r<h.length;r++){var o=h[r];if(!fa(o.clearData,16))throw new m("Subsample clearData of one of the provided samples does not fit in 16 bits.");if(!fa(o.protectedData,23))throw new m("Subsample protectedData of one of the provided samples does not fit in 23 bits.")}}}this.flags.useSubsampleEncryption=null!=i&&i,this.bA=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){for(var i=0,e=0,s=this.samples;e<s.length;e++){var n=s[e];xy(n)&&(i+=n.iv.length),Py(n)&&(i+=2+6*n.subsamples.length)}return t.prototype.getBoxContentSize.call(this)+4+i},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.samples.length,32);for(var e=0,s=this.samples;e<s.length;e++){var n=s[e];if(xy(n)&&Mm(i.writer,n.iv),Py(n)){i.writer.writeUInt(n.subsamples.length,16);for(var r=0,h=n.subsamples;r<h.length;r++){var o=h[r];i.writer.writeUInt(o.clearData,16),i.writer.writeUInt(o.protectedData,32)}}}},i.prototype.serializeFlags=function(t){t.writer.writeUInt(this.flags.useSubsampleEncryption?2:0,24)}}(en);r(),r();!function(t){function i(i,e,s,n,r){var h=t.call(this,"emsg",0,0)||this;return h.schemeIdUri=i,h.value=e,h.data=r,h.id=s,h.timescale=n.timescale,h.presentationTimeDelta=n.presentationTimeDelta,h.eventDuration=n.eventDuration,h}Dt(i,t),w.defineProperty(i.prototype,"timescale",{get:function(){return this.Jb},set:function(t){if(!fa(t,32))throw new m("The provided timescale does not fit in 32 bits.");this.Jb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"presentationTimeDelta",{get:function(){return this.hS},set:function(t){if(!fa(t,32))throw new m("The provided presentationTimeDelta does not fit in 32 bits.");this.hS=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"eventDuration",{get:function(){return this.oS},set:function(t){if(!fa(t,32))throw new m("The provided eventDuration does not fit in 32 bits.");this.oS=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"id",{get:function(){return this.aS},set:function(t){if(!fa(t,32))throw new m("The provided id does not fit in 32 bits.");this.aS=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.schemeIdUri.length+1+this.value.length+1+16+this.data.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeString(this.schemeIdUri),i.writer.writeByte(0),i.writer.writeString(this.value),i.writer.writeByte(0),i.writer.writeUInt(this.timescale,32),i.writer.writeUInt(this.presentationTimeDelta,32),i.writer.writeUInt(this.eventDuration,32),i.writer.writeUInt(this.id,32),i.concat(Pi.from(this.data))}}(en);r(),r(),r();var Iy=function(){function t(){this.boxes=[]}return t.prototype.serialize=function(){for(var t=new Nm,i=0,e=this.boxes;i<e.length;i++){var s=e[i];t.concat(s.serialize())}return t.toRangedBuffer()},t}();function Cy(t,i){return function(e){var s=function(t,i){for(var e=t.data,s=t.cursor;s.offset<e.byteLength;){var n=$m(e,s);if(!n.complete)return;if(yn(n.box,i))return n.box}}(new Zm(Km(e),new Jm),t);if(!s)throw new m("".concat(t," box not found"));return i(s)}}var Ry=Cy("moov",sy),Dy=Cy("sidx",function(t){var i,e,s=t.data,n=_i(s.nextUint32()),r=n.version,h=n.flags,o=s.nextUint32(),a=s.nextUint32();0===r?(i=s.nextUint32(),e=s.nextUint32()):(i=s.nextUint64(),e=s.nextUint64()),s.skip(2);for(var u=s.nextUint16(),c=[],d=0;d<u;d++){var l=new H(Pi.from(s.nextUint8Array(12))),f=l.readBit(),v=l.readUInt(31),_=l.readUInt(32),g=Boolean(l.readBit()),p=l.readUInt(3),m=l.readUInt(28);c.push({referenceType:f,referencedSize:v,subsegmentDuration:_,startsWithSap:g,sapType:p,sapDeltaTime:m})}return 0===r?new wy(o,a,i,e,c,h.raw):new yy(o,a,i,e,c,h.raw)}),Ny=Cy("moof",vy),By=Cy("pssh",Uw);function My(t){return function(t){for(var i=new Iy,e=0,s=es(t);e<s.length;e++){var n=s[e];yn(n,"ftyp")?i.boxes.push(pw(n)):yn(n,"styp")?i.boxes.push(Ay(n)):yn(n,"moov")?i.boxes.push(sy(n)):yn(n,"moof")?i.boxes.push(vy(n)):yn(n,"mdat")?i.boxes.push(xw(n)):i.boxes.push(ts(n))}return i}(new Zm(Km(t),new Jm))}var Ly=class extends Ne{get uS(){return this.zd}get cS(){return this.dS.expiration}get xy(){return this.lS}get fS(){return this.dS.sessionId}Xs(){if(this.vS)return this.zd;const t=[];return t.push(Promise.resolve(this.dS.close())),t.push(Ze(1e3)),this._S.$g(Promise.race(t).catch(Oy)),this.vS=!0,this.zd}gS(t,i,e){if(zs.e_){const t=By(aa(i));if(1===t.version){i=new Ow(t.systemId,t.data).serialize().join()}}return Promise.resolve(this.dS.generateRequest(t,i)).catch(Oy)}Un(t){return Promise.resolve(this.dS.load(t)).catch(Oy)}pS(){return Promise.resolve(this.dS.remove()).catch(Oy)}er(t){return Promise.resolve(this.dS.update(t)).catch(Oy)}mS(){this.lS.jy(),this.dS.keyStatuses.forEach((t,i)=>{this.wS(i,t)}),this.So(new wp(this.lS))}wS(t,i){if("string"==typeof t){const e=t;t=i,i=e}const e=aa(t);if(this.yS===Ug&&16===e.byteLength&&(zs.v_||zs.dg)){const t=dh(e),i=t.getUint32(0,!0),s=t.getUint16(4,!0),n=t.getUint16(6,!0);t.setUint32(0,i,!1),t.setUint16(4,s,!1),t.setUint16(6,n,!1)}this.yS===Ug&&"status-pending"===i&&(i="usable"),this.lS.Gy(e,i)}constructor(t,i){super(),this.dS=void 0,this.yS=void 0,this.lS=void 0,this.vS=void 0,this.zd=void 0,this._S=void 0,this.bS=void 0,this.SS=void 0,this.TS=void 0,this.dS=t,this.yS=i,this.vS=!1,this.bS=()=>{this.mS()},this.SS=t=>{this.So(new bp(this,t.messageType,ym(this.yS,t.message)))},this.TS=()=>{this.vS=!0,this.lS.Wy>0&&(this.lS.jy(),this.So(new wp(this.lS))),this.dS.removeEventListener("keystatuseschange",this.bS),this.dS.removeEventListener("message",this.SS)},this.dS.addEventListener("keystatuseschange",this.bS),this.dS.addEventListener("message",this.SS),this.lS=new mm;const e=[];this.dS.closed&&e.push(Promise.resolve(this.dS.closed)),this._S=new Ga,e.push(this._S.Yy),this.zd=Promise.race(e).then(this.TS,this.TS),this.mS()}};function Oy(t){let i;if(t.message){const e=t.message.match(/^SystemCode:0x([0-9a-fA-F]+)$/);e&&(i=0|x(e[1],16))}throw new Am(t.message,void 0,i,t)}var Fy=class{async kS(t){return new Ly(this.ES.createSession(t),this.xS)}PS(t){return Promise.resolve(this.ES.setServerCertificate(t))}_n(t){return Promise.resolve(t.setMediaKeys(this.ES))}IS(t){return Promise.resolve(t.setMediaKeys(null))}hr(){return Promise.resolve()}constructor(t,i,e){this.ES=void 0,this.xS=void 0,this.Cd=void 0,this.ES=t,this.xS=i,this.Cd=e}},Uy=class{get xS(){return this.CS.keySystem}async RS(){const t=await this.CS.createMediaKeys();return new Fy(t,this.yS,this.DS)}NS(){return this.DS}constructor(t,i,e){this.CS=void 0,this.yS=void 0,this.DS=void 0,this.CS=t,this.yS=i,this.DS=e}};r(),r();var Vy="video/avc",Hy="video/hevc",Wy="video/mp4",qy="video/mpeg",zy="video/mpeg2",Gy="video/webm",Xy="video/x-unknown",jy="audio/mp4",Qy="audio/webm",Ky="image/jpeg",Yy="application/ttml+xml",Jy="application/mp4",Zy="text/vtt";function St(t){return Xt(t,"audio/")}function $y(t){return Xt(t,"video/")}function To(t){return nl(t,Jy)||nl(t,Wy)||nl(t,jy)}function tb(t){return nl(t,Gy)||nl(t,Qy)}var ib=class{MS(t){for(const[i,e]of this.LS)if(i.toLowerCase()===t.toLowerCase())return e}constructor(t,i){this.Km=void 0,this.LS=void 0,this.Km=t,this.LS=i}};function eb(t){const i=t.trim(),e=i.indexOf(";");if(e<0)return new ib(i,[]);const s=i.substr(0,e).trim(),n=i.substr(e+1).trim(),r=[];let h=0,o=!1;for(let t=0;t<n.length;t++){const i=n[t];if(o||";"!==i)'"'===i&&(o=!o);else{const i=sb(n.substr(h,t));i&&r.push(i),h=t+1}}if(h!==n.length){const t=sb(n.substr(h));t&&r.push(t)}return new ib(s,r)}function sb(t){const i=t.indexOf("=");if(i<0)return;const e=t.substr(0,i).trim();let s=t.substr(i+1).trim();return'"'===s[0]&&(s=s.substring(1,s.length-1)),[e,s]}function nb(t){const i=t.trim(),e=i.indexOf(";");return e<0?i:i.substr(0,e).trim()}function rb(t){let i=t;const e=i.match(/^avc1\.(\d+)\.(\d+)$/);if(e){const t=Number(e[1]),s=Number(e[2]);i="avc1."+Wa((t<<16|s).toString(16),6,"0")}return i}function hb(t,i,e,s){let n=!1;if(s.persistentState&&"optional"!==s.persistentState)return;if(s.distinctiveIdentifier&&"optional"!==s.distinctiveIdentifier)return;const r={audioCapabilities:[],videoCapabilities:[],persistentState:s.persistentState||"optional",distinctiveIdentifier:s.distinctiveIdentifier||"optional",initDataTypes:s.initDataTypes,sessionTypes:["temporary"],label:s.label,FS:s.FS};let h=!1;if(s.audioCapabilities){const o=s.audioCapabilities.filter(t=>Boolean(t.contentType));o.length&&(r.audioCapabilities=o.filter(s=>ob(t,i,e,s)),h=!0,r.audioCapabilities.length&&(n=!0))}if(s.videoCapabilities){const o=s.videoCapabilities.filter(t=>Boolean(t.contentType));o.length&&(r.videoCapabilities=o.filter(s=>ob(t,i,e,s)),h=!0,r.videoCapabilities.length&&(n=!0))}return h||(n=t(e,"video/mp4")),n?r:void 0}function ob(t,i,e,s){if(!s.contentType)return!1;if(s.encryptionScheme&&!Ct(i,s.encryptionScheme))return!1;if(s.robustness)return!1;return t(e,nb(s.contentType))}function ab(t){if(t.videoCapabilities)for(const i of t.videoCapabilities)if(i.contentType)return i.contentType;if(t.audioCapabilities)for(const i of t.audioCapabilities)if(i.contentType)return i.contentType}function ub(t){const i=[];for(const e of t)e.encryptionScheme&&i.push({contentType:e.contentType,robustness:e.robustness});return t.concat(i)}function cb(t){return!(!t.audioCapabilities||!t.audioCapabilities.some(db))||!(!t.videoCapabilities||!t.videoCapabilities.some(db))}function db(t){return!t.robustness}function lb(t,i){const e=[];for(const s of t)s.robustness?e.push(s):e.push(Y({},s,{robustness:i}));return e}var fb=class{async nw(t,i){i=i.filter(t=>!t.FS);for(const t of i)t.audioCapabilities&&(t.audioCapabilities=ub(t.audioCapabilities)),t.videoCapabilities&&(t.videoCapabilities=ub(t.videoCapabilities));if(t===Wg&&i.some(cb)){const e=i.map(t=>function(t,i){return Y({},t,{videoCapabilities:t.videoCapabilities?lb(t.videoCapabilities,i):void 0,audioCapabilities:t.audioCapabilities?lb(t.audioCapabilities,i):void 0})}(t,"SW_SECURE_CRYPTO"));try{const i=await od.requestMediaKeySystemAccess(t,e),s=i.getConfiguration();return new Uy(i,t,s)}catch(t){}}const e=await od.requestMediaKeySystemAccess(t,i),s=e.getConfiguration();return new Uy(e,t,s)}static US(){return Vc()}};r(),r(),r(),r();var vb=class extends Ne{get fS(){return this.VS&&this.VS.sessionId||""}get cS(){return NaN}get uS(){return this.HS.Yy}get xy(){return this.WS}async gS(t,i,e){this.qS(),this.zS=new Ga,this.kS(aa(i),e),await this.zS.Yy}kS(t,i){if(!t)throw new g("Expected initData to be defined but was "+t+".");const e=i&&i.playready&&i.playready.GS;let s;return s=i?this.XS.createSession(this.jS,t,e):this.XS.createSession(this.jS,t),s.addEventListener("mskeyclose",this.TS),s.addEventListener("mskeymessage",this.QS),s.addEventListener("mskeyerror",this.Ts),s.addEventListener("mskeyadded",this.KS),this.VS=s,this.YS("status-pending"),s}async Un(t){return this.qS(),!0}async er(t){if(this.JS=new Ga,this.qS(),!this.VS)return Promise.resolve();const i=aa(t);if(0===i.byteLength)throw new g("Cannot call update with an empty response.");this.VS.update(i),await this.JS.Yy}Xs(){return!this.vS&&this.VS&&(this.vS=!0,this.VS.close()),this.HS.Yy}async pS(){this.qS()}qS(){if(this.vS)throw new g("Already closing or closed.")}YS(t){this.WS.jy(),this.WS.Gy(Yc,t),this.So(new wp(this.WS))}constructor(t,i){super(),this.XS=void 0,this.jS=void 0,this.vS=void 0,this.HS=void 0,this.JS=void 0,this.zS=void 0,this.WS=void 0,this.VS=void 0,this.TS=void 0,this.QS=void 0,this.Ts=void 0,this.KS=void 0,this.XS=t,this.jS=i,this.vS=!1,this.JS=void 0,this.zS=void 0,this.VS=void 0,this.TS=()=>{this.vS=!0,this.HS.Qy(void 0),this.VS&&(this.VS.removeEventListener("mskeyclose",this.TS),this.VS.removeEventListener("mskeymessage",this.QS),this.VS.removeEventListener("mskeyerror",this.Ts),this.VS.removeEventListener("mskeyadded",this.KS))},this.QS=t=>{this.zS&&(this.zS.Qy(void 0),this.zS=void 0),this.So(new bp(this,"license-request",nr(t.message).buffer,t.destinationURL||void 0))},this.Ts=()=>{const t=this.VS&&this.VS.error;if(!t)return;const i=new Am("Unknown CDM error",t.code,t.systemCode);if(this.zS)this.zS.Ky(i),this.zS=void 0;else if(this.JS)this.JS.Ky(i),this.JS=void 0;else switch(i.Jy){case MSMediaKeyError.MS_MEDIA_KEYERR_OUTPUT:case MSMediaKeyError.MS_MEDIA_KEYERR_HARDWARECHANGE:this.YS("output-not-allowed");break;default:this.YS("internal-error")}},this.KS=()=>{this.zS&&(this.YS("usable"),this.zS.Qy(void 0),this.zS=void 0),this.JS&&(this.YS("usable"),this.JS.Qy(void 0),this.JS=void 0)},this.HS=new Ga,this.WS=new mm}},_b=class{async kS(t){return new vb(this.XS,this.jS)}PS(t){return Promise.resolve(!1)}_n(t){const i=()=>{t.msSetMediaKeys(this.XS),t.removeEventListener("loadedmetadata",i)};return t.readyState>=1?t.msSetMediaKeys(this.XS):t.addEventListener("loadedmetadata",i),Promise.resolve()}IS(t){return Promise.resolve()}hr(){return Promise.resolve()}constructor(t,i,e){this.XS=void 0,this.xS=void 0,this.Cd=void 0,this.jS=void 0,this.XS=t,this.xS=i,this.Cd=e;const s=ab(e)||"video/mp4";this.jS=nb(s)}},gb=class{get xS(){return this.yS}NS(){return this.ZS}RS(){const t=new s.MSMediaKeys(this.yS);return Promise.resolve(new _b(t,this.yS,this.ZS))}constructor(t,i){this.yS=void 0,this.ZS=void 0,this.yS=t,this.ZS=i}},pb=class{nw(t,i){try{return Promise.resolve(function(t,i){if(!mb())throw new g("Unsupported key system "+t);for(const e of i){const i=hb(wb,pp,t,e);if(i)return new gb(t,i)}throw new g("Unsupported key system configuration for "+t)}(t,i))}catch(t){return Promise.reject(t)}}static US(){return mb()}};function mb(){return void 0!==s.MSMediaKeys&&"function"==typeof s.MSMediaKeys.isTypeSupported}function wb(t,i){return s.MSMediaKeys.isTypeSupported(t,i)}r(),r(),r(),r();var yb=class extends Ne{get fS(){return this.$S?this.$S.sessionId:""}get cS(){return NaN}get uS(){return this.HS.Yy}get xy(){return this.WS}gS(t,i,e){const s=e&&e.fairplay&&e.fairplay.tT;if(!s)throw new g("Expected FairPlay contentId to be defined but was "+s+".");const n=function(t,i,e){const s=qc(t),n=2*s.length,r=2*i.length,h=new ArrayBuffer(4+n+4+r+4+e.byteLength),o=new DataView(h),a=new oi;return kl(o,a,n,!0),tm(o,a,s,!0),kl(o,a,r,!0),tm(o,a,i,!0),kl(o,a,e.byteLength,!0),Ar(o,a,e),new j(h)}(aa(i),s,this.iT);return this.$S=this.eT.createSession(this.jS,n),this.$S.addEventListener("webkitkeymessage",this.QS,!1),this.$S.addEventListener("webkitkeyadded",this.KS,!1),this.$S.addEventListener("webkitkeyerror",this.Ts,!1),this.YS("status-pending"),this.sT.Qy(this.$S),this.sT=new Ga,Promise.resolve()}Un(t){return Promise.resolve(!0)}async er(t){const i=aa(t);if(0===i.byteLength)throw new g("Cannot call update with an empty response.");this.nT=new Ga;(this.$S||await this.sT.Yy).update(i),await this.nT.Yy}Xs(){var t;const i=this.$S;return i&&(i.removeEventListener("webkitkeymessage",this.QS,!1),i.removeEventListener("webkitkeyadded",this.KS,!1),i.removeEventListener("webkitkeyerror",this.Ts,!1),i.close()),this.sT.Zg(),null==(t=this.nT)||t.Zg(),this.HS.Qy(void 0),this.HS.Yy}pS(){return Promise.resolve(void 0)}YS(t){this.WS.jy(),this.WS.Gy(Yc,t),this.So(new wp(this.WS))}constructor(t,i,e){super(),this.eT=void 0,this.jS=void 0,this.iT=void 0,this.HS=void 0,this.nT=void 0,this.WS=void 0,this.$S=void 0,this.sT=void 0,this.Ts=void 0,this.QS=void 0,this.KS=void 0,this.eT=t,this.jS=i,this.iT=e,this.HS=new Ga,this.nT=void 0,this.WS=new mm,this.$S=void 0,this.sT=new Ga,this.Ts=()=>{const t=this.$S&&this.$S.error;if(!t)return;const i=new Am("Unknown CDM error",t.code,t.systemCode);this.nT?(this.nT.Ky(i),this.nT=void 0):i.Jy===WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT?this.YS("output-not-allowed"):this.YS("internal-error"),this.So(new Ap)},this.QS=t=>{this.So(new bp(this,"license-request",nr(t.message).buffer,"this is a test string"===t.destinationURL?void 0:t.destinationURL))},this.KS=()=>{this.nT&&(this.nT.Qy(void 0),this.nT=void 0),this.YS("usable")}}};r();var as=class extends Qr{get name(){return"THEOplayerError"}get category(){return L.fromCode(this.code)}constructor(t,i,e){super(i,e),this.code=void 0,this.code=t}};function bb(t,i){return t instanceof as?t:t instanceof m?new as(i,t.message,t):new as(i,String(t))}var Ab=class{getInternalMediaKeys(){return this.eT}async kS(t){if(!this.iT)throw new as(me.CONTENT_PROTECTION_CERTIFICATE_ERROR,"No valid certificate was provided.");return new yb(this.eT,this.jS,this.iT)}PS(t){return this.iT=aa(t),Promise.resolve(!0)}_n(t){return t.webkitSetMediaKeys(this.eT),Promise.resolve()}IS(t){return t.webkitSetMediaKeys(null),Promise.resolve()}hr(){return Promise.resolve()}constructor(t,i,e){this.eT=void 0,this.xS=void 0,this.Cd=void 0,this.jS=void 0,this.iT=void 0,this.eT=t,this.xS=i,this.Cd=e,this.iT=void 0;const s=ab(e)||"video/mp4";this.jS=nb(s)}},Sb=class{get xS(){return this.yS}NS(){return this.ZS}RS(){const t=new s.WebKitMediaKeys(this.yS);return Promise.resolve(new Ab(t,this.yS,this.ZS))}constructor(t,i){this.yS=void 0,this.ZS=void 0,this.yS=t,this.ZS=i}},Tb=class{nw(t,i){try{return Promise.resolve(function(t,i){if(t!==Kg)throw new g(t+" is not supported with webkit-prefixed Encrypted Media Extensions.");if(!kb())throw new g("Unsupported key system "+t);for(const e of i){const i=hb(Eb,mp,t,e);if(i)return new Sb(t,i)}throw new g("Unsupported key system configuration for "+t)}(t,i))}catch(t){return Promise.reject(t)}}static US(){return kb()}};function kb(){return void 0!==s.WebKitMediaKeys&&"function"==typeof s.WebKitMediaKeys.isTypeSupported}function Eb(t,i){return s.WebKitMediaKeys.isTypeSupported(t,i)}r();var xb=class{async nw(t,i){for(const e of this.rT)try{return await e.nw(t,i)}catch(t){}throw new g("Unsupported key system configuration for "+t)}constructor(t){this.rT=void 0,this.rT=t}};r(),r(),r(),r(),r();var Zn=class{Zo(t,i){return new Promise(e=>{const s=Zc.ep([this.hT.Yg,i]),n=()=>{s.zg()};this.oT.push(()=>{const i=Pb(t,s.Yg);return e(i),i.then(n,n)}),this.aT||(this.aT=this.uT())})}Zg(){return this.cT(!0)}kn(){return this.dT=void 0,this.cT(!1)}cT(t){const i=this.aT;return this.hT.Zg(),t&&(this.hT=new Zc),Promise.resolve(i)}constructor(t){this.oT=[],this.aT=void 0,this.hT=new Zc,this.dT=void 0,this.uT=()=>{if(0===this.oT.length)return this.dT?Pb(this.dT,this.hT.Yg).then(this.lT,this.lT):this.lT();return this.oT.shift()().then(this.uT)},this.lT=()=>{if(0!==this.oT.length)return this.uT();this.aT=void 0},this.dT=t}};function Pb(t,i){return new Promise(e=>e(t(i)))}var Ib=new Zn,Cb=class extends Ne{fT(){this.nT&&(this.YS("usable"),this.nT.Qy(void 0),this.nT=void 0)}vT(t){const i=new Am("Unknown CDM error",t.errorCode,t.systemCode);this.nT?(this.nT.Ky(i),this.nT=void 0):this.zS?(this.zS.Ky(i),this.zS=void 0):i.Jy===WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT?this.YS("output-restricted"):1===i.Zy?this.YS("expired"):this.YS("internal-error")}_T(t){0!==t.message.byteLength?(this.zS&&(this.zS.Qy(void 0),this.zS=void 0),this.So(new bp(this,"license-request",ym(this.yS,nr(t.message).buffer),t.defaultURL||void 0))):this.zS&&(this.zS.Ky("Empty key message"),this.zS=void 0)}gT(t){this.pT||(this.pT=t,this.mT.Qy(t))}get xy(){return this.wT}get fS(){return this.yT}set fS(t){this.yT=t}get uS(){return this.HS.Yy}get cS(){return NaN}async Xs(){this.throwIfClosed(),this.nT&&(this.nT.Ky(void 0),this.nT=void 0),this.gb=!0,this.HS.Qy(void 0)}async gS(t,i){this.throwIfClosed(),this.zS=new Ga,this.bT=aa(i);(this.pT||await this.mT.Yy).webkitGenerateKeyRequest(this.yS,this.bT),await this.zS.Yy}async Un(t){return this.throwIfClosed(),!1}async pS(){this.throwIfClosed()}async er(t){if(this.throwIfClosed(),this.nT=new Ga,zs.S_||zs.w_)return Ib.Zo(async()=>{await this.doUpdate(t)});await this.doUpdate(t)}async doUpdate(t){if(void 0===this.nT)return;(this.pT||await this.mT.Yy).webkitAddKey(this.yS,aa(t),this.bT,this.fS),await this.nT.Yy,zs.w_&&await Ze(500)}throwIfClosed(){if(this.gb)throw new g("Already closing or closed.")}YS(t){this.wT.jy(),this.wT.Gy(Yc,t),this.So(new wp(this.wT))}async AT(){const t=this.pT||await this.mT.Yy;if(t.webkitCancelKeyRequest)try{t.webkitCancelKeyRequest(this.yS,this.yT)}catch(t){}finally{await Ze(500)}}constructor(t){super(),this.yS=void 0,this.zS=void 0,this.nT=void 0,this.HS=void 0,this.gb=void 0,this.bT=void 0,this.yT=void 0,this.wT=void 0,this.pT=void 0,this.mT=void 0,this.yS=t,this.zS=void 0,this.nT=void 0,this.gb=!1,this.bT=void 0,this.pT=void 0,this.HS=new Ga,this.yT="",this.mT=new Ga,this.wT=new mm}},Rb=class{_n(t){return this.pT=t,this.pT.addEventListener("webkitkeyadded",this.KS),this.pT.addEventListener("webkitkeyerror",this.ST),this.pT.addEventListener("webkitkeymessage",this.TT),this.kT.forEach((i,e)=>i.gT(t)),this.ET.forEach(i=>i.gT(t)),Promise.resolve()}IS(t){return t.removeEventListener("webkitkeyadded",this.KS),t.removeEventListener("webkitkeyerror",this.ST),t.removeEventListener("webkitkeymessage",this.TT),this.pT=void 0,Promise.resolve()}async hr(){const t=this.kT.entries();let i=t.next();for(;!i.done;)await i.value[1].AT(),i=t.next();this.kT.clear()}async kS(t,i,e){const s=new Cb(this.xS);return this.pT&&s.gT(this.pT),this.ET.push(s),s}PS(t){return Promise.resolve(!1)}xT(t){if(!t)return;let i=this.kT.get(t);return i||(i=this.ET.shift(),i?(i.fS=t,this.kT.set(t,i),i):void 0)}constructor(t,i){this.xS=void 0,this.Cd=void 0,this.pT=void 0,this.kT=void 0,this.ET=void 0,this.KS=void 0,this.ST=void 0,this.TT=void 0,this.xS=t,this.Cd=i,this.pT=void 0,this.kT=Ba(),this.ET=[],this.KS=t=>{const i=this.xT(t.sessionId);i&&i.fT()},this.ST=t=>{const i=this.xT(t.sessionId);i&&i.vT(t)},this.TT=t=>{const i=this.xT(t.sessionId);i&&i._T(t)}}},Db=class{RS(){return Promise.resolve(new Rb(this.xS,this.PT))}NS(){return this.PT}constructor(t,i){this.xS=void 0,this.PT=void 0,this.xS=t,this.PT=i}},Nb=class{nw(t,i){try{return Promise.resolve(function(t,i){if(!Nb.US())throw new g("Unsupported key system "+t);for(const e of i){const i=hb(Bb,pp,t,e);if(i)return new Db(t,i)}throw new g("Unsupported key system configuration for "+t)}(t,i))}catch(t){return Promise.reject(t)}}static US(){return lp()}};function Bb(t,i){const e=Af();return Boolean(e&&e.canPlayType&&""!==e.canPlayType(i,t))}r();var Mb,Lb=class{nw(t,i){return t===Wg||t===Ug?Promise.resolve(void 0):Promise.reject(new m("DRM configuration not supported"))}};function Ob(){return Mb||(Mb=function(){const t=[];Tb.US()&&t.push(new Tb);fb.US()&&t.push(new fb);pb.US()&&t.push(new pb);Nb.US()&&t.push(new Nb);zs.k_&&t.push(new Lb);return new xb(t)}()),Mb}r(),r();var Fb=class{jy(t){this.IT.delete(t)}CT(){this.IT.clear()}zy(t){return this.IT.get(t)}Gy(t,i){this.IT.set(t,i)}constructor(){this.IT=Ba()}},Ub=class t{static DT(){return t.Bg||(t.Bg=Vb.US()?new Vb:new Fb),t.Bg}static jy(i){t.DT().jy(i)}static CT(){t.DT().CT()}static zy(i){return t.DT().zy(i)}static Gy(i,e){t.DT().Gy(i,e)}};Ub.Bg=void 0;var Vb=class extends Ub{static US(){const t="foobar";try{return self.sessionStorage.setItem(t,t),self.sessionStorage.removeItem(t),!0}catch(t){return!1}}jy(t){self.sessionStorage.removeItem(t)}CT(){self.sessionStorage.clear()}zy(t){var i;return null!=(i=self.sessionStorage.getItem(t))?i:void 0}Gy(t,i){self.sessionStorage.setItem(t,i)}};r(),r();var Hb=(()=>{const t=self.Blob;if(t)try{new t;return function(t){return(i,e)=>new t(i,e)}(t)}catch(t){}const i=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder;if(i)return function(t){return(i,e)=>{const s=new t;if(i)for(const t of i)s.append(t);return s.getBlob(e&&e.type||"")}}(i)})();function Wb(t,i,e){const s=Hb([i],{type:"application/octet-stream"}),n=URL.createObjectURL(s),r=function(t,i){let e=t;const s=e.indexOf("?");if(s>=0&&(e=e.substr(0,s)),e=e.substr(e.lastIndexOf("/")+1),i){let t=e.indexOf(".");t<0&&(t=e.length),e=e.substr(0,t)+i+e.substr(t)}return e}(t,e),o=h.createElement("a");o.href=n,o.download=r,h.body.appendChild(o),o.click(),h.body.removeChild(o),URL.revokeObjectURL(n)}r();var qb="default";r(),r(),r(),r();var Bi=function(t){return t.NT="arraybuffer",t.BT="json",t.MT="stream",t.LT="text",t}({});r();var cc=class t{append(t,i){let e=t,s=i;e=zb(e),s=Gb(s);const n=e.toLowerCase();if(this.Wm.hasOwnProperty(n)){const t=this.Wm[n],i=t[1];t[1]=i?i+", "+s:s}else this.Wm[n]=[e,s]}delete(t){const i=zb(t).toLowerCase();delete this.Wm[i]}get(t){const i=zb(t).toLowerCase();return this.Wm.hasOwnProperty(i)?this.Wm[i][1]:null}has(t){const i=zb(t).toLowerCase();return this.Wm.hasOwnProperty(i)}set(t,i){let e=t;e=zb(e);const s=e.toLowerCase();this.Wm[s]=[e,Gb(i)]}forEach(t,i){for(const e in this.Wm)this.Wm.hasOwnProperty(e)&&t.call(i,this.Wm[e][1],e,this)}asList(){const t=[];for(const i in this.Wm)if(this.Wm.hasOwnProperty(i)){const[e,s]=this.Wm[i];t.push([e,s])}return t}OT(){const t={};return this.forEach((i,e)=>{t[e]=i}),t}FT(t){t.forEach((t,i)=>{this.append(i,t)})}UT(t){t.forEach((t,i)=>{this.set(i,t)})}constructor(i){if(this.Wm=void 0,this.Wm={},i)if(i instanceof t)i.asList().forEach(t=>{let[i,e]=t;this.append(i,e)});else if(function(t){return Mc(t)&&"function"==typeof t.forEach}(i))i.forEach((t,i)=>{Array.isArray(t)&&2===t.length?this.append(t[0],t[1]):this.append(i,t)});else if(function(t){return void 0!==f&&Mc(t)&&f in t}(i))for(const[t,e]of i)this.append(t,e);else w.getOwnPropertyNames(i).forEach(t=>{this.append(t,i[t])});else;}};function zb(t){let i=t;if("string"!=typeof i&&(i=String(i)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(i))throw new g("Invalid character in header field name");return i}function Gb(t){let i=t;return"string"!=typeof i&&(i=String(i)),i}r(),r(),r();var ya=gd(md());r();var Xb=class extends Qr{get name(){return"AggregateError"}constructor(t){super(""+t.join("\n"),t[0]),this.causes=void 0,this.causes=t}},jb=a,Qb=I(jb.ReadableStream)&&I(jb.WritableStream)&&I(jb.TransformStream)&&jd(jb.ReadableStream.prototype.pipeThrough)&&!ov.xp,Kb=Qb?jb.ReadableStream:ya.ReadableStream,Yb=(Qb?jb.WritableStream:ya.WritableStream,Qb?jb.TransformStream:ya.TransformStream),Jb=(Qb&&jb.ByteLengthQueuingStrategy?jb.ByteLengthQueuingStrategy:ya.ByteLengthQueuingStrategy,Qb&&jb.CountQueuingStrategy?jb.CountQueuingStrategy:ya.CountQueuingStrategy);function Zb(t){return function(t){return new Kb({start(i){for(const e of t)i.enqueue(e);i.close()}})}([t])}function $b(t){return Zb(function(t){return new j(t)}(t))}function tA(t,i){return function(t,i){let e=i;const s=t.getReader(),n=new Ga,r=()=>{h();const t=new Qc;s.cancel(t).catch(gs),n.Ky(t)},h=()=>{e&&(e.jg(r),e=void 0)};e&&(e.Hg?r():e.Xg(r));const o=[],a=t=>t.done?(h(),Promise.resolve(o)):(o.push(t.value),Promise.resolve(s.read()).then(a));return Promise.resolve(s.read()).then(a).then(t=>{h(),n.Qy(t)},t=>{h(),n.Ky(t)}),n.Yy}(t,i).then(t=>fm(t).buffer)}function iA(t,i){let e=i;const{readable:s,writable:n}=new Yb,r=n.getWriter(),h=()=>{e&&e.Zg()};return r.closed.then(h,h),t.then(t=>(e=void 0,r.releaseLock(),t.pipeTo(n).catch(gs)),t=>(e=void 0,r.releaseLock(),n.abort(t).catch(gs))),s}function eA(t){const{readable:i,writable:e}=new Yb;return t.pipeTo(e,{preventCancel:!0}).catch(i=>{let e;e=hi(i)?i[0]===i[1]||Ce(i[0])&&Ce(i[1])?i[0]:new Xb(i):i,t.cancel(e).catch(gs)}),i.tee()}function sA(t){return qc(new j(t))}function nA(t){return rm(t).buffer}r();var rA="text/plain;charset=UTF-8",Qi=class{VT(t){return this.HT(t).then(JSON.parse)}WT(t,i){switch(t){case Bi.NT:return this.qT(i);case Bi.BT:return this.VT(i);case Bi.MT:return this.zT();case Bi.LT:return this.HT(i);default:throw new g}}};function hA(t,i,e){if(t instanceof Qi)return t;if(t instanceof Kb)return function(t,i){return new aA({Km:0,zT:t,GT:oA(i)})}(t,e);const s=oA(e),n=Promise.resolve(t).then(t=>function(t,i){if(t){if("string"==typeof t)return{Km:Bi.LT,XT:t,GT:i||rA};if(t instanceof ArrayBuffer||Kc(t))return{Km:Bi.NT,XT:_A(t),GT:i};if(Gd(t)||hi(t))return{Km:Bi.BT,XT:t,GT:i};throw new g("Unsupported BodyInit type")}return{Km:Bi.LT,XT:null,GT:i}}(t,s));return new aA({Km:1,Yy:n,jT:i})}function oA(t){return(t.get("content-type")||"").toLowerCase()}var aA=class t extends Qi{get QT(){return this.KT}get YT(){return 0===this.JT.Km}ZT(){return this.$T.Yy}HT(t){return this.ek(uA,t)}VT(t){return this.ek(dA,t)}qT(t){return this.ek(fA,t)}zT(){return this.nk(function(t){return 0===t.Km?t.zT:iA(t.Yy.then(vA).then($b),t.jT)}(this.JT))}ek(t,i){if(this.KT)return Promise.reject(new g("Already used"));this.KT=!0;const e=t(this.JT,i);return this.$T.$g(e.then(gs)),e}nk(t){if(this.KT)throw new g("Already used");if(t.locked)throw new g("Body stream is locked");this.KT=!0;const i=new Yb,e=Promise.resolve(t.pipeTo(i.writable));return this.$T.$g(e),i.readable}rk(t){this.JT=t,1===t.Km&&t.Yy.catch(gs)}hk(){if(this.KT)throw new g("Already used");const i=function(t){if(0===t.Km){const[i,e]=t.zT.tee();return[{Km:t.Km,zT:i,GT:t.GT},{Km:t.Km,zT:e,GT:t.GT}]}{const[i,e]=t.jT.tp();return[{Km:t.Km,Yy:t.Yy,jT:i},{Km:t.Km,Yy:t.Yy,jT:e}]}}(this.JT),e=i[0],s=i[1];return this.rk(e),new t(s)}constructor(t){super(),this.KT=!1,this.JT=void 0,this.$T=new Ga,this.$T.Yy.catch(gs),this.rk(t)}};function uA(t,i){return 0===t.Km?tA(t.zT,i).then(sA):(i&&t.jT.$g(i),Cu(t.Yy.then(cA),t.jT))}function cA(t){switch(t.Km){case Bi.LT:return Promise.resolve(t.XT||"");case Bi.NT:return Promise.resolve(t.XT).then(sA);case Bi.BT:return Promise.resolve(t.XT).then(JSON.stringify)}}function dA(t,i){return 0===t.Km?uA(t,i).then(JSON.parse):(i&&t.jT.$g(i),Cu(t.Yy.then(lA),t.jT))}function lA(t){return t.Km===Bi.BT?Promise.resolve(t.XT):cA(t).then(JSON.parse)}function fA(t,i){return 0===t.Km?tA(t.zT,i):(i&&t.jT.$g(i),Cu(t.Yy.then(vA),t.jT))}function vA(t){switch(t.Km){case Bi.NT:return Promise.resolve(t.XT);case Bi.LT:case Bi.BT:return cA(t).then(nA)}}function _A(t){return t instanceof ArrayBuffer?t:nr(ye(t)).buffer}var gA=class extends Qi{get QT(){return this.ck.QT}get YT(){return this.ck.YT}ZT(){return this.ck.ZT()}HT(t){return this.ck.HT(t)}VT(t){return this.ck.VT(t)}qT(t){return this.ck.qT(t)}zT(t){return this.ck.zT(t)}hk(){return this.ck.hk()}constructor(t){super(),this.ck=void 0,this.ck=t}};function pA(t){return t.dk>=200&&t.dk<=299||304===t.dk}var il=class t extends gA{lk(t){return this.WT(this.fk,t)}Fy(){return new t({lk:this.hk(),vk:this.vk},this)}constructor(t,i){let e,s,n,r,h;i?(e=i._k,s=i.fk,n=i.dk,r=i.gk,h=i.pk):(e=[],s=Bi.LT,n=200,r="OK",h=!1);const o=t.vk,a=new cc(t._k||e),u=t.fk||s,c=t.wk||(i&&i.vk===o?i.wk:o.Yu),d=i?i.ck:null;super(hA(void 0!==t.lk?t.lk:d,t.jT||new Zc,a)),this._k=void 0,this.vk=void 0,this.wk=void 0,this.fk=void 0,this.dk=void 0,this.gk=void 0,this.pk=void 0,this._k=a,this.vk=o,this.wk=c,this.fk=u,this.dk=void 0!==t.dk?t.dk:n,this.gk=void 0!==t.gk?String(t.gk):r,this.pk=t.pk||h}};r();var Qe=function(t){return t.DELETE="DELETE",t.GET="GET",t.HEAD="HEAD",t.OPTIONS="OPTIONS",t.POST="POST",t.PUT="PUT",t}({}),q=function(t){return t.yk="",t.bk="manifest",t.Ak="segment",t.Sk="preload-hint",t.Tk="content-protection",t}({}),he=function(t){return t.yk="",t.Ek="initialization-segment",t.xk="fairplay-license",t.Pk="fairplay-certificate",t.Ik="widevine-license",t.Ck="widevine-certificate",t.Rk="playready-license",t.Dk="clearkey-license",t.Nk="aes128-key",t}({}),$a=function(t){return t.yk="",t.Bk="audio",t.Mk="video",t.LT="text",t.Lk="image",t}({}),mA=function(t){return t.Ok="same-origin",t.Fk="no-cors",t.Uk="cors",t.Vk="navigate",t}({}),ro=class{constructor(t,i){this.XT=void 0,this._k=void 0,this.Hk=void 0,this.fk=void 0,this.Wk=void 0,this.qk=void 0,this.Yg=void 0,this.Km=void 0,this.zk=void 0,this.Gk=void 0,this.Yu=void 0,this.Xk=void 0,this.jk=void 0,this.Qk=void 0,this.Kk=void 0,this.Yk=void 0;const e=t.Yu;let s,n,r,h,o,a,u,c,d,l,f,v,_,g,p;var m,w,y;i?(s=i.XT,n=i._k,r=i.Hk,h=i.fk,o=i.Wk,a=i.qk,u=i.Yg,c=i.Km,d=i.zk,l=i.Gk,f=i.Xk,v=i.jk,_=i.Qk,g=i.Kk,p=i.Yk):(s=null,n={},r="GET",h=Bi.LT,o=0,a=0,c="",d="",l="",f=!1,_=void 0,g=!1,p=void 0),this.Yu=e,this.XT=t.XT||s,this._k=new cc(t._k||n),this.Hk=t.Hk||r,this.fk=t.fk||h,this.Wk=void 0!==t.Wk?Number(t.Wk)||0:o,this.qk=void 0!==t.qk?Number(t.qk)||0:a,this.Yg=t.Yg||u||(new Zc).Yg,this.Km=t.Km||c,this.zk=t.zk||d,this.Gk=t.Gk||l,this.Xk=void 0!==t.Xk?Boolean(t.Xk):f,this.jk=t.jk||v,this.Qk=null!=(m=t.Qk)?m:_,this.Kk=null!=(w=t.Kk)?w:g,this.Yk=null!=(y=t.Yk)?y:p}},wA=class{vk(t){const i=function(t){return new il({lk:null,_k:{},vk:t,wk:t.Yu,fk:t.fk,dk:0,gk:d.Gw})}(new ro(t));return Promise.resolve(i)}Jk(t){}kn(){}};var yA=class t{static get Zk(){return t.$k||(t.$k=new t(new wA)),t.$k}vk(t){const i=this.tE(t);return this.iE.vk(i)}Jk(t){return this.iE.Jk(this.eE(t))}tE(i){let e=new ro(i);if(!this.sE){const i=t.nE(e.Yu);e=new ro({Yu:i},e)}return e}eE(i){let e=i.Yu;return this.sE||(e=t.nE(e)),{Yu:e,XT:i.XT}}static nE(t){return zd.Bm&&Xt(t,"http://")?t.replace(":","s:"):t}kn(){this.iE.kn()}constructor(t,i=!0){this.iE=void 0,this.sE=void 0,this.iE=t,this.sE=i}};function bA(t,i){const e=zd.Dh(t);return AA(e,i),e.toString()}function AA(t,i){for(const e of w.keys(i))t.searchParams.set(e,i[e])}function Vn(t,i){let e=zd.Pm(t);return i&&!Rc(e,"/")&&(e+="/"),e}yA.$k=void 0,r(),r(),r();var SA=/cache:(.+)?(?=&|$)/;function TA(t){if(!Xt(t,"http://webcache.googleusercontent.com/search?q=cache:"))return"";const i=zd.Dh(t).search.match(SA);return i&&i.length>1?i[1]:""}function kA(t){return zd.Dh(".",t)}r(),r();var EA=function(t){return t.rE="HttpOpenError",t.hE="HttpResponseError",t.oE="HttpTimeoutError",t}({}),xA=class extends Qr{get vk(){return this.aE}constructor(t,i,e){super(i,e),this.aE=void 0,this.aE=t}},PA=class extends xA{get name(){return EA.rE}constructor(t,i){super(t,"Error while opening "+t.Yu+".",i)}};r();var ir=class extends xA{get name(){return EA.hE}get uE(){return this.cE}constructor(t,i,e){super(t.vk,null!=e?e:function(t){return"Error while loading "+t.vk.Yu+", status code "+t.dk}(t),i),this.cE=void 0,this.cE=t}};r();var Ri=class extends xA{get name(){return EA.oE}constructor(t,i){super(t,function(t){return"Request for "+t.Yu+" timed out after "+t.Wk+" seconds."}(t),i)}};r();var IA=self.fetch,CA=self.Request,RA=self.Response,DA=self.Headers,NA=self.ReadableStream,BA=self.AbortSignal,MA=self.AbortController,LA=Oc(()=>{try{return jd(IA)&&I(CA)&&I(RA)&&I(DA)&&"forEach"in DA.prototype&&Tg()}catch(t){return!1}}),OA=["http:","https:"];var FA=Oc(()=>{try{return LA()&&I(BA)&&I(MA)&&"signal"in CA.prototype}catch(t){return!1}}),UA=Oc(()=>{try{return LA()&&I(NA)&&"body"in RA.prototype&&!zs.e_}catch(t){return!1}});function Ei(t){return t instanceof xA}function Qn(t){return t instanceof ir}function VA(t){return t instanceof Ri}function HA(t,i){const e=t._k.has("content-length")?Number(t._k.get("content-length")):void 0;let s;return s=t.YT?function(t,i,e){return t.pipeThrough(new Yb(new WA(i,e)))}(t.zT(),i,e):async function(t,i,e){await Promise.resolve(),i(0,e);const s=await t,n=s.byteLength;return i(n,null!=e?e:n),s}(t.qT(),i,e),new il({lk:s,vk:t.vk},t)}r(),r();var WA=class{transform(t,i){this.dE+=t.byteLength,this.lE(this.dE,this.fE),i.enqueue(t)}flush(t){var i;this.lE(this.dE,null!=(i=this.fE)?i:this.dE)}constructor(t,i){this.lE=void 0,this.fE=void 0,this.dE=void 0,this.lE=t,this.fE=i,this.dE=0}};var qA=class{async vE(){const t=this.aE;let i,e;t.Wk&&(this._E=u(()=>{this.gE=!0,this.hT.Zg()},t.Wk),this.hT.Yg.Qg(()=>{c(this._E)}));try{i=IA(t.Yu,{method:t.Hk,headers:t._k.OT(),body:t.XT,credentials:t.Xk?"include":"same-origin",signal:XA(this.hT.Yg),mode:t.Qk,keepalive:t.Yk})}catch(i){throw new PA(t,i)}try{e=await i}catch(t){const i=this.pE(t);throw Ce(i)&&this.hT.Zg(),i}const s=e.url||t.Yu,n=0===e.status&&"file:"===function(t){return zd.Dh(t).protocol}(s)?200:e.status,r=new zA(this,e,this.hT);let h=new il({lk:r,vk:t,fk:t.fk,_k:new cc(e.headers),dk:n,gk:e.statusText,wk:s});if(!pA(h))throw new ir(h);return t.jk&&(h=HA(h,t.jk)),h}pE(t){return Ei(t)?t:Ce(t)?this.gE?new Ri(this.aE):new Qc(t.message,t):this.cE?new ir(this.cE,t):new PA(this.aE,t)}constructor(t){this.uE=void 0,this.aE=void 0,this.hT=new Zc,this.cE=void 0,this._E=0,this.gE=!1,this.aE=t,this.hT.$g(t.Yg),this.uE=this.vE()}},zA=class t extends Qi{get QT(){return this.mE.bodyUsed}get YT(){return it(this.mE.body)}ZT(){return this.$T.Yy}HT(t){return this.ek(this.mE.text(),t)}qT(t){return this.ek(this.mE.arrayBuffer(),t)}zT(){const t=this.mE.body;return t?this.nk(t):iA(this.qT().then($b),this.hT)}hk(){const i=this.mE.clone(),[e,s]=this.hT.tp();return this.hT=e,new t(this.wE,i,s)}ek(t,i){i&&this.hT.$g(i);let e=ua(Promise.resolve(t),this.hT.Yg).catch(t=>{throw this.wE.pE(t)});return e=Cu(e,this.hT),this.$T.$g(e.then(gs)),e}nk(t){return new Kb(new jA(t,t=>this.wE.pE(t),this.hT,this.$T),{highWaterMark:0})}constructor(t,i,e){super(),this.wE=void 0,this.mE=void 0,this.hT=void 0,this.$T=new Ga,this.wE=t,this.mE=i,this.hT=e,this.$T.Yy.catch(gs)}},GA="abort";function XA(t){if(!FA())return;const i=new MA;if(t.Hg)i.abort();else if(!t.Wg){const e=()=>{s(),i.abort()},s=()=>{i.signal.removeEventListener(GA,e),t.jg(e),t.Kg(s)};i.signal.addEventListener(GA,e),t.Xg(e),t.Qg(s)}return i.signal}var jA=class{start(t){this.Wd=this.yE.getReader()}async pull(t){let i;try{i=await ua(this.Wd.read(),this.hT.Yg)}catch(i){const e=this.bE(i);return this.$T.Ky(e),this.hT.Zg(),this.Wd.cancel(e).catch(gs),void t.error(e)}i.done?(this.$T.Qy(),this.hT.Zg(),t.close()):t.enqueue(i.value)}cancel(t){return this.hT.Zg(),this.$T.Ky(t),this.Wd.cancel(t)}constructor(t,i,e,s){this.yE=void 0,this.bE=void 0,this.hT=void 0,this.$T=void 0,this.Wd=void 0,this.yE=t,this.bE=i,this.hT=e,this.$T=s}};r();var QA=class{get uE(){return this.AE.Yy}vE(){const t=this.SE,i=this.aE;if(i.Yg.Hg)return this.TE();t.onreadystatechange=()=>this.kE(),t.onprogress=t=>this.lE(t),t.onload=()=>this.EE(),t.onloadend=()=>this.xE(),t.onerror=()=>this.PE(),t.ontimeout=()=>this.CE(),t.onabort=()=>this.TE(),t.open(i.Hk,i.Yu,!0),t.withCredentials=Boolean(i.Xk),"responseType"in t&&i.fk&&(i.fk===Bi.LT?t.responseType="text":t.responseType="arraybuffer"),i._k.forEach((i,e)=>{t.setRequestHeader(e,i)}),i.Wk&&(t.timeout=i.Wk),this.hT.Yg.Xg(this.RE);const e=i.XT;e?t.send(e):t.send()}kE(){const t=this.SE;void 0!==t&&t.readyState>=2&&!this.DE&&(this.DE=!0,this.NE())}NE(){var t;const i=this.SE,e=function(t){const i=new cc,e=t.replace(/\r?\n[\t ]+/g," ");return e.split(/\r?\n/).forEach(t=>{const e=t.split(":"),s=e.shift().trim();if(s){const t=e.join(":").trim();i.append(s,t)}}),i}(i.getAllResponseHeaders()||""),s=this.aE;var n;this.BE=new Ga,this.cE=new il({vk:s,fk:s.fk,lk:this.BE.Yy,dk:i.status,gk:i.statusText,_k:e,wk:null!=(n=i.responseURL)?n:e.get("X-Request-URL")}),null==(t=this.AE)||t.Qy(this.cE)}EE(){var t;const i=this.SE;if(void 0===i)return;let e=i.response;if(!it(e)){const t=this.aE.fk;e=t===Bi.LT?i.responseText:t===Bi.NT?new ArrayBuffer(0):{}}null==(t=this.BE)||t.Qy(e)}xE(){this.kn()}lE(t){void 0!==this.SE&&(null==this.aE.jk||this.aE.jk.call(this.aE,t.loaded,t.lengthComputable?t.total:void 0))}PE(){const t=new m("Network request failed");this.cE?this.Ts(new ir(this.cE,t)):this.Ts(new PA(this.aE,t))}CE(){this.Ts(new Ri(this.aE))}TE(){this.Ts(new Qc),this.kn()}Ts(t){var i,e;null==(i=null!=(e=this.BE)?e:this.AE)||i.Ky(t)}kn(){this.SE=void 0,this.cE=void 0,this.AE=void 0,this.BE=void 0,this.hT.zg()}constructor(t){this.SE=void 0,this.aE=void 0,this.hT=new Zc,this.cE=void 0,this.AE=new Ga,this.BE=void 0,this.DE=!1,this.RE=()=>{var t;this.TE(),null==(t=this.SE)||t.abort()},this.aE=t,this.hT.$g(t.Yg),this.SE=new ud,this.vE()}};function KA(t,i,e){return new Promise((s,n)=>{if(e&&e.Hg)return n(new Qc);const r=t=>{o(),s(t)},h=()=>{o(),n(new Qc)},o=()=>{t.removeEventListener(i,r),e&&e.jg(h)};t.addEventListener(i,r),e&&e.Xg(h)})}r();var YA=class{vk(t){return function(t){if(!LA()||!function(t){try{return OA.indexOf(new self.URL(t,self.location.href).protocol)>=0}catch(t){return!1}}(t.Yu))return!1;if(!UA()&&t.jk)return!1;if(!t.Kk&&t.Hk!==Qe.POST){if(zs.S_&&zs.d_<=68)return!1;if(zs.w_)return!1}return!0}(t)?new qA(t).uE:new QA(t).uE}Jk(t){const i=s.navigator;if(i&&i.sendBeacon)i.sendBeacon(t.Yu,Hb([t.XT],{type:t.GT}));else{const i=t.GT?{"Content-type":t.GT}:void 0;this.vk(new ro({Hk:Qe.POST,Yu:t.Yu,XT:t.XT,_k:i,Qk:mA.Fk})).then(t=>{Wr(t.qT())},gs)}}kn(){}};r(),r();var Xu=function(t){return t[t.LE=1]="LE",t[t.OE=2]="OE",t[t.LT=3]="LT",t[t.FE=4]="FE",t[t.UE=9]="UE",t}({});function JA(t){return 1===t.VE}function ZA(t){return 3===t.VE}r();var $A=class extends Qr{constructor(t){super("Invalid XML",t)}},tS=class{HE(t){const i=new DOMParser;let e;try{e=i.parseFromString(t,"text/xml")}catch(t){throw new $A(t)}if(!e||e.getElementsByTagName("parsererror").length>0)throw new $A;return new oS(e)}},iS=class t{get VE(){return Xu.OE}get WE(){var t;return null!=(t=this.qE.localName)?t:cS(this.qE.nodeName)}get l(){return this.qE.nodeName}get zE(){var t;return null!=(t=this.qE.namespaceURI)?t:void 0}get GE(){var t;return null!=(t=this.qE.prefix)?t:void 0}get XE(){return this.qE.nodeValue}jE(t){return this.qE.isEqualNode(t.qE)}QE(i){return new t(this.qE.cloneNode(i))}constructor(t){this.qE=void 0,this.qE=t}},eS=class{get KE(){return void 0===this.YE&&(this.YE=function(t){const i=[];for(let e=0;e<t.length;e++){const s=uS(t.item(e));s&&i.push(s)}return i}(this.JE.childNodes)),this.YE}get m(){return this.KE.filter(aS)}ZE(t){return this.KE.filter(i=>aS(i)&&i.$E===t)}tx(t,i){return this.KE.filter(e=>aS(e)&&e.WE===i&&e.zE===t)}get ix(){return this.JE}sx(t){this.JE.appendChild(t.ix),this.YE&&this.YE.push(t)}jE(t){return this.JE.isEqualNode(t.ix)}constructor(t){this.JE=void 0,this.YE=void 0,this.JE=t}},sS=class t extends eS{get VE(){return Xu.LE}get WE(){var t;return null!=(t=this.JE.localName)?t:cS(this.JE.nodeName)}get zE(){var t;return null!=(t=this.JE.namespaceURI)?t:void 0}get GE(){var t;return null!=(t=this.JE.prefix)?t:void 0}get $E(){return this.JE.nodeName}get nx(){return function(t){const i=[];for(let e=0;e<t.length;e++)i.push(new iS(t.item(e)));return i}(this.JE.attributes)}get hx(){return this.JE.textContent}ox(t){if(this.JE.hasAttribute(t))return this.JE.getAttribute(t)}ux(t,i){if(this.JE.hasAttributeNS(t,i))return this.JE.getAttributeNS(t,i)}lx(t){this.JE.removeAttribute(t)}vx(t,i){this.JE.removeAttributeNS(t,i)}_x(t,i){this.JE.setAttribute(t,i)}gx(t,i,e){this.JE.setAttributeNS(t,i,e)}QE(i){return new t(this.JE.cloneNode(i))}constructor(t){super(t)}},nS=class{get lk(){return this.JE.nodeValue}get ix(){return this.JE}jE(t){return this.lk===t.lk}constructor(t){this.JE=void 0,this.JE=t}},rS=class t extends nS{get VE(){return Xu.LT}QE(i){return new t(this.JE.cloneNode(i))}constructor(t){super(t)}},hS=class t extends nS{get VE(){return Xu.FE}QE(i){return new t(this.JE.cloneNode(i))}constructor(t){super(t)}},oS=class t extends eS{get VE(){return Xu.UE}get mx(){return new sS(this.JE.documentElement)}QE(i){return new t(this.JE.cloneNode(i))}constructor(t){super(t)}};function aS(t){return JA(t)}function uS(t){switch(t.nodeType){case Xu.LE:return new sS(t);case Xu.LT:return new rS(t);case Xu.FE:return new hS(t)}}function cS(t){const i=t.indexOf(":");return i<0?t:t.substr(i+1)}!function(t){zd=t}(new class extends Ag{get gm(){return this.wx||(this.wx=new fp(Ob())),this.wx}get yx(){return this.bx}get Ax(){return this.Sx}get Tx(){return this.kx}get Ex(){return!1}get xx(){return Ub.DT()}get Px(){return{Ix:Wb}}get Cx(){return od.connection&&od.connection.effectiveType||qb}get Rx(){return od.connection&&od.connection.type||"unknown"}get Dx(){return this.Nx||(this.Nx=new yA(new YA)),this.Nx}HE(t){return this.Bx.HE(t)}constructor(...t){super(...t),this.wx=void 0,this.bx=UA(),this.Sx=zs.cg||zs.e_,this.kx=function(){if(zs.w_&&zs.b_<3)return!1;if(zs.cg)return!0;if(zs.S_&&zs.d_<=68)return!0;if(zs.e_)return!0;if(zs.D_)return!0;return!1}(),this.Nx=void 0,this.Bx=new tS}}),r(),r(),r(),r(),r(),r();var dS=class extends je{},lS=class extends je{get ht(){return this.Mx()}Mx(){return this.Lx.ht}Ox(){return this.Lx.Ox()}get Fx(){return this.Ux()}Ux(){return this.Lx.Fx}get Vx(){return this.Hx()}set Vx(t){this.Wx(t)}Hx(){return this.Lx.Vx}Wx(t){this.Lx.Vx=t}get bt(){return this.qx()}qx(){return this.Lx.bt}get zx(){return this.Gx()}set zx(t){this.Xx(t)}Gx(){return this.Lx.zx}Xx(t,i){this.Lx.Xx(t,i)}get ct(){return this.Nd()}Nd(){return this.Lx.ct}get xe(){return this.jx()}jx(){return this.Lx.xe}get Qx(){return this.Kx()}Kx(){return this.Lx.Qx}get lt(){return this.Yx()}get Jx(){return this.Zx()}Yx(){return this.Lx.lt}Zx(){return this.Lx.Jx}get $x(){return this.tP()}get iP(){return this.eP()}tP(){return this.Lx.$x}eP(){return this.Lx.iP}get sP(){return this.nP()}nP(){return this.Lx.sP}get rP(){return this.hP()}hP(){return this.Lx.rP}get oP(){return this.aP()}set oP(t){this.uP(t)}aP(){return this.Lx.oP}uP(t){this.Lx.oP=t}get cP(){return this.dP()}dP(){return this.Lx.cP}get lP(){return this.fP()}fP(){return this.Lx.lP}get vP(){return this._P()}set vP(t){this.gP(t)}_P(){return this.Lx.vP}gP(t){this.Lx.vP=t}get pP(){return this.mP()}mP(){return this.Lx.pP}get wP(){return this.yP()}set wP(t){this.bP(t)}yP(){return this.Lx.wP}bP(t){this.Lx.wP=t}get AP(){return this.TP()}TP(){return this.Lx.AP}get kP(){return this.EP()}EP(){return this.Lx.kP}get xP(){return this.PP()}PP(){return this.Lx.xP}nu(){return this.Lx.nu()}Ta(t,i){return this.Lx.Ta(t,i)}IP(t,i,e){return this.Lx.IP(t,i,e)}CP(){return this.Lx.CP()}get nt(){return this.RP()}RP(){return this.Lx.nt}get DP(){return this.NP()}NP(){return this.Lx.DP}get rt(){return this.BP()}BP(){return this.Lx.rt}get MP(){return this.LP()}LP(){return this.Lx.MP}get OP(){return this.FP()}set OP(t){this.UP(t)}get VP(){return this.HP()}HP(){return this.Lx.VP}FP(){return this.Lx.OP}UP(t){this.Lx.OP=t}get WP(){return this.Lx.WP}set WP(t){this.Lx.WP=t}qP(){return this.Lx.qP()}Aa(){return this.Lx.Aa()}zP(){return this.Lx.zP()}gr(t){this.Lx.gr(t)}mr(){this.Lx.mr()}we(){this.Lx.we()}GP(){this.Lx.GP()}jP(){this.Lx.jP()}QP(){this.Lx.QP()}be(){this.Lx.be()}KP(){return this.Lx.KP()}YP(){return this.Lx.YP()}JP(){this.Lx.JP()}ZP(){this.Lx.ZP()}hr(){return this.Lx.hr()}$P(){this.Lx.$P()}tI(){this.Lx.tI()}iI(t){return this.Lx.iI(t)}eI(t){return!1}async kn(){this.Vo(),await this.Lx.kn()}sI(t){return this.Lx.sI(t)}constructor(t){super(),this.Lx=void 0,this.nI=t=>{this.eI(t)||this.So(t)},this.Lx=t,t.lw(this.nI)}};r(),r(),r();var N=function(t){return t.rI="hI",t.oI="aI",t}({});r(),r(),r(),r();var Oi=class extends gp{get Ca(){return this.hu||(this.hu=this.xa()),this.hu}constructor(t,i){super(t,i),this.hu=void 0}};function fS(t){return Boolean(t&&t.Ca)}var Fs=class extends Oi{constructor(t){super(t)}},Eh=class extends gp{constructor(t){super(t)}},vS=class extends Fs{xa(){return new _S(this.Ht.Ca)}constructor(t){super(N.rI),this.Ht=void 0,this.Ht=t}},_S=class extends Eh{constructor(t){super("addtrack"),this.track=void 0,this.track=t}};r();var gS=class extends Fs{xa(){return new pS(this.Ht.Ca)}constructor(t){super(N.oI),this.Ht=void 0,this.Ht=t}},pS=class extends Eh{constructor(t){super("removetrack"),this.track=void 0,this.track=t}};r();var Te=function(t){return t.uI="cI",t.dI="lI",t.fI="vI",t._I="gI",t.pI="mI",t.wI="yI",t.pa="bI",t.AI="TI",t.kI="EI",t.xI="er",t.II="CI",t.RI="DI",t.QUALITY_UNAVAILABLE="qualityunavailable",t.NO_QUALITY="noquality",t}({}),mS=class extends Ne{get NI(){return this.BI}get Ca(){return this.hu||(this.hu=this.xa()),this.hu}get V(){return this.BI.length}MI(t){return this.BI[t]}tt(t){return!(!t||Ct(this.BI,t))&&(this.BI.push(t),this.hu&&this.hu.push(t.Ca),t.wn(Te.pa,this.Rs),this.So(new vS(t)),!0)}it(t){if(!t)return!1;const i=this.BI.indexOf(t);return!(i<0)&&(Ra(this.BI,i),this.hu&&Ra(this.hu,i),t.mn(Te.pa,this.Rs),this.So(new gS(t)),!0)}LI(t){return Ct(this.BI,t)}hr(){const t=this.BI;for(let i=t.length-1;i>=0;i-=1)this.it(t[i])}kn(){this.hr(),this.Vo()}constructor(){super(),this.BI=[],this.hu=void 0}};r();var Rh=class extends Fs{xa(){return new wS(this.Ht.Ca)}constructor(t){super(Te.pa),this.Ht=void 0,this.Ht=t}},wS=class extends Eh{constructor(t){super("change"),this.track=void 0,this.track=t}},yS=class extends mS{get OI(){return this.FI}set OI(t){const i=this.FI;if(t!==i){if(i){this.UI(i);for(const e of i.NI)t&&t.LI(e)||this.it(e)}if(this.FI=t,t){const i=[];for(const e of t.NI)this.tt(e),this.VI(e)&&i.push(e);this.HI(t);for(const t of i)t.So(new Rh(t))}}}HI(t){t.wn(N.rI,this.WI),t.wn(N.oI,this.qI)}UI(t){t.mn(N.rI,this.WI),t.mn(N.oI,this.qI)}kn(t){!t&&this.FI&&this.FI.kn(),super.kn()}constructor(){super(),this.FI=void 0,this.WI=t=>{const i=t.Ht;this.tt(i)},this.qI=t=>{const i=t.Ht;this.it(i)}}};r(),r(),r();var bS=w.freeze||pc;function AS(t,i,e){w.defineProperty(t,i,{writable:!1,enumerable:!0,value:e})}function SS(t){return bS(t)}function Gi(t,i){for(const e of w.getOwnPropertyNames(i))w.defineProperty(t,e,w.getOwnPropertyDescriptor(i,e));return t}function ru(t){if(Gd(t)){const i={};for(const e in t)_u.call(t,e)&&(i[e]=ru(t[e]));return i}if(hi(t)){const i=new Array(t.length);for(let e=0;e<i.length;e++)e in t&&(i[e]=ru(t[e]));return i}return t}function Gr(t,i){return t===i||!(!t||!i)&&(!(!Mc(t)||!Mc(i))&&(ln(t)?!!ln(i)&&function(t,i){const e=t.length,s=i.length;if(e!==s)return!1;for(let s=0;s<e;s+=1)if(!Gr(t[s],i[s]))return!1;return!0}(t,i):!ln(i)&&function(t,i){const e=w.keys(t),s=w.keys(i);if(!e||!s||e.length!==s.length)return!1;for(const s of e)if(!_u.call(i,s)||!Gr(t[s],i[s]))return!1;return!0}(t,i)))}function TS(t,i){if(!Mc(t))return!1;for(const e of i)if(!(e in t))return!1;return!0}function kS(t,i){return t.constructor===i.constructor}function ES(t){const i={};for(const e of w.keys(t)){const s=t[e];null!=s&&(i[e]=s)}return i}function xS(t){const i={};for(const e of w.keys(t)){const s=t[e];if(ln(s)){const t=[];for(let i=0;i<s.length;i+=1){const e=s[i];if(null!=e){const i=Mc(e)?xS(e):e;t.push(i)}}i[e]=t}else null!=s&&(i[e]=Mc(s)?xS(s):s)}return i}function Th(t){let i=t;if("string"==typeof i){if(i=i.toLowerCase(),"true"===i)return!0;if("false"===i)return!1}return Boolean(i)}function Lt(t){return it(t)?Th(t):void 0}function bs(t){return"string"==typeof t?""===t?NaN:Number(t):"boolean"==typeof t||null==t||t instanceof Date||"number"!=typeof Number(t)&&!t?NaN:Number(t)}function PS(t){const i=bs(t);if(S(i))throw new m("Expected a valid number.");return i}function Ts(t){return"string"==typeof t?t:""}function IS(t,i){if(!ln(t))return[];const e=0|t.length,s=new Array(e);for(let n=0;n<e;n++)s[n]=i(t[n]);return s}function vu(t,i){let e;return e=ln(t)?IS(t,i):i(t),e}r();var CS=[N.rI,N.oI,Te.pa];function RS(t){let i;const e=t.NI.map(t=>t.Ca);return e.item=i=>{const e=0|i,s=t.MI(e);return s&&s.Ca||void 0},e.addEventListener=(t,e)=>{i.wn(t,e)},e.removeEventListener=(t,e)=>{i.mn(t,e)},i=new _p(e),t.wn(CS,t=>i.So(t.Ca)),e}r();var Je=function(t){return t[t.zI=0]="zI",t[t.GI=1]="GI",t[t.XI=2]="XI",t[t.jI=3]="jI",t[t.QI=4]="QI",t[t.TRANSCRIBES_SPOKEN_DIALOG=5]="TRANSCRIBES_SPOKEN_DIALOG",t[t.DESCRIBES_MUSIC_AND_SOUND=6]="DESCRIBES_MUSIC_AND_SOUND",t[t.KI=7]="KI",t}({});function DS(t){switch(t){case 0:return"caption";case 2:return"sign";case 1:return"description";case 3:return"enhanced audio intelligibility";case 4:return"easy reader";case 5:return"transcribes spoken dialog";case 6:return"describes music and sound";case 7:return"describes video"}}function NS(){}function cs(t){const i=[Te.xI,Te.pa,Te.II,Te.RI,Te.QUALITY_UNAVAILABLE];let e;const s={get activeQuality(){return t.YI&&t.YI.Ca},get enabled(){return t.Rt},set enabled(i){t.Rt=Th(i)},get id(){return t.o},get uid(){return t.JI},get kind(){return t.Lt},get label(){return t.Th},set label(i){t.Th=Ts(i)},get accessibility(){var i,e;return null!=(e=null==(i=t.ZI)?void 0:i.map(DS))?e:[]},get language(){return t.bs},get qualities(){return t.$I.Ca},set targetQuality(i){let e;e=i?function(t,i){const e=[];for(const s of t.$I.NI)for(const t of i)s.Ca===t&&e.push(s);return e}(t,hi(i)?i:[i]):[],e.length>0?t.tC=e:t.tC=void 0},get targetQuality(){if(t.tC)return 1===t.tC.length?t.tC[0].Ca:t.tC.map(t=>t.Ca)},addEventListener(t,i){const s=vu(t,Ts);e.wn(s,i)},removeEventListener(t,i){const s=vu(t,Ts);e.mn(s,i)}};return e=new _p(s),t.wn(i,t=>e.So(t.Ca)),w.defineProperty(s,"constructor",{value:NS}),s}function BS(){}function MS(t){const i=RS(t);return w.defineProperty(i,"constructor",{value:BS}),i}var Gh=class extends yS{xa(){return MS(this)}VI(t){return t.Rt}};r(),r(),r();var xh=function(t){return t.Nh="disabled",t.iC="hidden",t.Kn="showing",t}({});function LS(t){if("string"==typeof t){const i=t.toLowerCase();switch(i){case"disabled":case"hidden":case"showing":return i}}else if("number"==typeof t)switch(t){case 0:return"disabled";case 1:return"hidden";case 2:return"showing"}return"disabled"}r();var hc=function(t){return t.ma="error",t}({});function OS(){}function qo(t){const i=[Te.pa,Te.xI,Te.uI,Te.dI,Te._I,Te.pI,Te.fI,Te.wI,Te.AI,Te.kI],e=[hc.ma];let s;const n={get kind(){return t.Lt},get label(){return t.Th},set label(i){t.Th=Ts(i)},get language(){return t.bs},get id(){return t.o},get uid(){return t.JI},get inBandMetadataTrackDispatchType(){return t.eC},get mode(){return t.Qk},set mode(i){i!==xh.Kn&&i!==xh.iC&&i!==xh.Nh||t.sC(i)},get forced(){return Boolean(t.nC)},get accessibility(){var i,e;return null!=(e=null==(i=t.ZI)?void 0:i.map(DS))?e:[]},get type(){return t.Km},get readyState(){return t.AP},get cues(){return t.Qk===xh.Nh?null:t.L.Ca},get activeCues(){return t.Qk===xh.Nh?null:t.q.Ca},get src(){return t.rC||""},addEventListener(t,i){const e=vu(t,Ts);s.wn(e,i)},removeEventListener(t,i){const e=vu(t,Ts);s.mn(e,i)}};return s=new _p(t),t.wn(i,t=>s.So(t.Ca)),t.wn(e,t=>s.So(t)),w.defineProperty(n,"constructor",{value:OS}),n}function FS(){}function US(t){const i=RS(t);return w.defineProperty(i,"constructor",{value:FS}),i}var ai=class extends yS{xa(){return US(this)}VI(t){return t.Qk===xh.Kn}};r(),r();var VS=class extends Ne{get hC(){}get oC(){}get aC(){}get uC(){return!1}get cC(){}get Ca(){var t;return null!=(t=this.hu)?t:this.hu=HS(this)}dC(){}constructor(...t){super(...t),this.hu=void 0}};function HS(t){return{goLive:()=>t.dC(),get isLive(){return t.uC},get latencies(){return t.hC},get videoLatencies(){return t.oC},get audioLatencies(){return t.aC},get manifest(){return t.cC},addEventListener(i,e){t.wn(qS(i),e)},removeEventListener(i,e){t.mn(qS(i),e)}}}var WS=["golive","latencyrecoveryseek"];function qS(t){const i=vu(t,Ts);return(Q(i)?[i]:i).filter(t=>Ct(WS,t))}var zS=class extends Ne{set OI(t){const i=this.FI;t!==i&&(i&&this.UI(i),t&&this.HI(t),this.FI=t)}get OI(){return this.FI}get Ca(){return this.hu||(this.hu=HS(this)),this.hu}HI(t){t.wn(WS,this.Rs)}UI(t){t.mn(WS,this.Rs)}dC(){var t;null==(t=this.FI)||t.dC()}get hC(){var t;return null==(t=this.FI)?void 0:t.hC}get oC(){var t;return null==(t=this.FI)?void 0:t.oC}get aC(){var t;return null==(t=this.FI)?void 0:t.aC}get uC(){return!!this.FI&&this.FI.uC}get cC(){var t;return null==(t=this.FI)?void 0:t.cC}kn(){this.Vo(),this.FI&&this.UI(this.FI),this.FI=void 0}constructor(){super(),this.FI=void 0,this.hu=void 0,this.FI=void 0}};r(),r();var GS=function(t){return t.AUTO="auto",t.MANUAL="manual",t.DISABLED="disabled",t}({});function XS(t){return{appID:t&&t.appID?Ts(t.appID):"8E80B9CE"}}r(),r();var Fa=function(t){return t.Fk="",t.lC="anonymous",t.fC="use-credentials",t}({}),Hi=function(t){return t.vC="application/dash+xml",t._C="application/vnd.apple.mpegurl",t.gC="application/x-mpegurl",t.pC="video/mp4",t.mC="application/vnd.theoplayer.hesp+json",t.wC="application/vnd.theo.hesp+json",t.yC="millicast",t.bC="theolive",t}({});function jS(t){if(null!==t)return t}function QS(t){const i={apiKey:t.apiKey,integration:t.integration,streamActivityMonitorID:jS(t.streamActivityMonitorID),adTagParameters:Mc(t.adTagParameters)?t.adTagParameters:{},authToken:jS(t.authToken),omidAccessModeRules:jS(t.omidAccessModeRules)};if(t.enableNonce&&(i.enableNonce=!0),"vod"===(null==t?void 0:t.availabilityType)||function(t){const i=t;return Boolean(i.videoID&&i.contentSourceID)}(t)){const e=t.videoID,s=t.contentSourceID;return e?s?Y({},i,{availabilityType:"vod",videoID:e,contentSourceID:s}):void zd.um("A VOD DAI configuration was provided without valid contentSourceID which is required."):void zd.um("A VOD DAI configuration was provided without valid videoID which is required.")}if("live"===(null==t?void 0:t.availabilityType)||function(t){const i=t;return Boolean(i.assetKey)}(t)){const e=t.assetKey;return e?Y({},i,{availabilityType:"live",assetKey:e}):void zd.um("A Live DAI configuration was provided without valid assetKey which is required.")}zd.um("A DAI configuration was provided without a valid availabilityType which is required.")}function KS(t){return"google-dai"===t.integration?QS(t):Y({},t,{integration:String(t.integration)})}r(),r(),r(),r(),r(),r();var Uh,Br="titanium",YS="conax",JS="ezdrm",ZS="irdeto",$S="vudrm",tT="verimatrix",iT="keyos",eT="drmtoday",sT="expressplay",nT="azure",rT="xstream",hT="vimond",oT="axinom",aT="uplynk",uT="comcast",cT="custom";function dT(t,i){if(null==t)return{};var e,s,n={},r=w.keys(t);for(s=0;s<r.length;s++)e=r[s],i.indexOf(e)>=0||(n[e]=t[e]);return n}function lT(t){return it(t.token&&t.deviceId)}function fT(t){var i;const e=null==(i=t.fairplay)?void 0:i.headers;return void 0!==e&&it(e.PreAuthorization)}function vT(t){const i=t;return lT(i)&&""!==i.token&&""!==i.deviceId&&!fT(i)}r(),r(),r(),r(),r(),function(t){t.AC=!1,t.SC=!1,t.TC=!1,t.kC=!1,t.LOG_ADS_DETAILS=!1,t.LOG_CHROMECAST_DETAILS=!1,t.LOG_CUSTOM_DRM=!1,t.LOG_BUFFERING_VIDEO_MAIN=!1,t.LOG_BUFFERING_VIDEO_SELECTION=!1,t.LOG_BUFFERING_AUDIO_MAIN=!1,t.LOG_BUFFERING_AUDIO_SELECTION=!1,t.EC=!1,t.xC=!1,t.LOG_LCEVC_DETAILS=!1}(Uh||(Uh={})),r();var fs=class extends as{get name(){return"ContentProtectionError"}constructor(t,i,e,s,n,r,h,o){super(t,i,e),this.url=void 0,this.status=void 0,this.statusText=void 0,this.response=void 0,this.systemCode=void 0,this.url=s,this.status=n,this.statusText=r,this.response=h,this.systemCode=o}};r();var _T=class{get IC(){return this.RC}get xS(){return this.yS}DC(t){return function(t){const i=t.onCertificateRequest;if(void 0!==i&&"function"!=typeof i)throw new g("ContentProtectionIntegration.onCertificateRequest is not a function.");const e=t.onCertificateResponse;if(void 0!==e&&"function"!=typeof e)throw new g("ContentProtectionIntegration.onCertificateResponse is not a function.");const s=t.onLicenseRequest;if(void 0!==s&&"function"!=typeof s)throw new g("ContentProtectionIntegration.onLicenseRequest is not a function.");const n=t.onLicenseResponse;if(void 0!==n&&"function"!=typeof n)throw new g("ContentProtectionIntegration.onLicenseResponse is not a function.");const r=t.extractFairplayContentId;if(void 0!==r&&"function"!=typeof r)throw new g("ContentProtectionIntegration.extractFairplayContentId is not a function.");return t}(this.NC.build(t))}constructor(t,i,e){this.RC=void 0,this.yS=void 0,this.NC=void 0,this.RC=t,this.yS=i,this.NC=e}};r();var gT=function(t){return t.FAILED="FAILED",t.OVERRIDDEN="OVERRIDDEN",t.SUCCEEDED="SUCCEEDED",t}({}),A=class{registerContentProtectionIntegration(t,i,e){switch(this.BC(t,i,e)){case gT.FAILED:throw new fs(me.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The keySystem should be 'widevine', 'playready' or 'fairplay', but was "+i+".");case gT.OVERRIDDEN:{const e=FT(i);zd.um("Warning: Overwriting an earlier registered integration for "+t+" and "+e+".");break}case gT.SUCCEEDED:FT(i);0;break}}BC(t,i,e){const s=FT(i);if(!s)return gT.FAILED;let n=gT.SUCCEEDED;for(const i of this.MC.slice())i.IC===t&&i.xS===s&&(n=gT.OVERRIDDEN,_e(this.MC,i));return this.MC.push(new _T(t,s,e)),n}LC(t,i){return void 0!==this.OC(t,i)}FC(t,i,e){const s=this.OC(t,i);if(!s)throw m("No ContentProtectionIntegrationInit was found for integration id "+t+" and key system "+i);return s.DC(e)}OC(t,i){for(const e of this.MC)if(e.IC===t&&(!i||e.xS===i))return e}constructor(){this.MC=[]}};A.VC=new A,r(),r();var ui=function(t){return t.HC="moov",t.WC="mvhd",t.qC="trak",t.zC="tkhd",t.GC="mdia",t.XC="mdhd",t.jC="hdlr",t.QC="minf",t.KC="stbl",t.YC="stsd",t.JC="stsc",t.ZC="mvex",t.$C="trex",t.tR="avc1",t.iR="avcC",t.eR="hev1",t.sR="hvc1",t.nR="hvcC",t.rR="vp09",t.hR="vpcC",t.oR="av01",t.aR="av1C",t.uR="dvcC",t.cR="dvvC",t.dR="dvwC",t.lR="dac3",t.fR="dec3",t.vR="dvav",t._R="dva1",t.gR="dvhe",t.pR="dvh1",t.mR="ac-3",t.wR="ec-3",t.yR="colr",t.bR="pasp",t.AR="mp4a",t.SR="esds",t.kR="fLaC",t.ER="dfLa",t.xR="wvtt",t.PR="vttC",t.IR="vlab",t.RR="enca",t.DR="encv",t.NR="moof",t.MR="mfhd",t.LR="traf",t.OR="tfhd",t.FR="trun",t.UR="tfdt",t.HR="senc",t.WR="mdat",t.qR="pssh",t.zR="emsg",t.GR="sidx",t.XR="styp",t.jR="ftyp",t.QR="sinf",t.KR="frma",t.YR="schi",t.JR="tenc",t}({}),pT=function(t){return t.ON_SCREEN_COLOURS="nclx",t.RESTRICTED_ICC_PROFILE="rICC",t.UNRESTRICED_ICC_PROFILE="prof",t}({}),bo=function(t){return t[t.BASE_DATA_OFFSET_PRESENT=1]="BASE_DATA_OFFSET_PRESENT",t[t.SAMPLE_DESCRIPTION_INDEX_PRESENT=2]="SAMPLE_DESCRIPTION_INDEX_PRESENT",t[t.DEFAULT_SAMPLE_DURATION_PRESENT=8]="DEFAULT_SAMPLE_DURATION_PRESENT",t[t.DEFAULT_SAMPLE_SIZE_PRESENT=16]="DEFAULT_SAMPLE_SIZE_PRESENT",t[t.DEFAULT_SAMPLE_FLAGS_PRESENT=32]="DEFAULT_SAMPLE_FLAGS_PRESENT",t[t.DURATION_IS_EMPTY=65536]="DURATION_IS_EMPTY",t[t.DEFAULT_BASE_IS_MOOF=131072]="DEFAULT_BASE_IS_MOOF",t}({}),Rr=function(t){return t[t.DATA_OFFSET_PRESENT=1]="DATA_OFFSET_PRESENT",t[t.FIRST_SAMPLE_FLAGS_PRESENT=4]="FIRST_SAMPLE_FLAGS_PRESENT",t[t.SAMPLE_DURATION_PRESENT=256]="SAMPLE_DURATION_PRESENT",t[t.SAMPLE_SIZE_PRESENT=512]="SAMPLE_SIZE_PRESENT",t[t.SAMPLE_FLAGS_PRESENT=1024]="SAMPLE_FLAGS_PRESENT",t[t.SAMPLE_COMPOSITION_TIME_OFFSET_PRESENT=2048]="SAMPLE_COMPOSITION_TIME_OFFSET_PRESENT",t}({});r();var yu=class t{ZR(){return Cl(this.lk,this.$R)}tD(){return Rn(this.lk,this.$R)}iD(){return function(t,i,e){void 0===e&&(e=!1);const s=t.getInt16(i.ac,e);return i.Ly(2),s}(this.lk,this.$R)}eD(){return ti(this.lk,this.$R)}sD(){return function(t,i,e){void 0===e&&(e=!1);const s=t.getInt32(i.ac,e);return i.Ly(4),s}(this.lk,this.$R)}nD(){return qt(this.lk,this.$R)}rD(t){return kt(this.lk,this.$R,t)}hD(t){return function(t,i,e){const s=[];for(let n=0;n<e;n++)s.push(ti(t,i));return s}(this.lk,this.$R,t)}oD(t){return jp(this.lk,this.$R,t)}aD(){return nm(this.lk,this.$R)}uD(t){this.$R.Ly(t)}Fy(){return new t(this.lk,this.$R.Fy())}constructor(t,i){this.lk=void 0,this.$R=void 0,this.lk=t,this.$R=i}};r(),r();function mT(t,i){return t.Km===i}function wT(t,i){for(const e of t)if(mT(e,i))return e}var yT=class extends Qr{get name(){return"DataIncompleteError"}constructor(t,i){super(),this.cD=void 0,this.dD=void 0,this.cD=t,this.dD=i}},ha=class t{static lD(i){const e=i.lk,s=i.$R,n=t.fD(e,s,!1);if(!n.vD)throw new yT(s.ac,n.m);return n.m}static fD(i,e,s){const n=[];for(;e.ac<i.byteLength;){const r=t._D(i,e,s);if(!r.vD)return{vD:!1,m:n};n.push(r.gD)}return{vD:!0,m:n}}static pD(i,e){const s=t._D(i,e,!1);if(!s.vD)throw new yT(e.ac);return s.gD}static mD(i,e){const s=i.lk,n=i.$R;for(;n.ac<s.byteLength;){const i=t._D(s,n,!1);if(!i.vD)return;if(i.gD.Km===e)return i.gD}}static _D(i,e,s){const n=e.ac,r=t.wD(i,e);if(!r.vD)return r;const h=r.yD;let o=h.Wy;if(0===o){if(s)return e.Oy(n),{vD:!1,bD:1/0};o=i.byteLength-n}const a=n+o;if(a>i.byteLength){const t=a;return e.Oy(n),{vD:!1,bD:t}}const u={Km:h.Km,ac:n,lk:new yu(Wu(i,n,a),new oi(h.SD))};return e.Oy(a),{vD:!0,gD:u}}static wD(t,i){const e=i.ac;if(!Hp(t,i,8)){return{vD:!1,bD:i.ac+8}}let s=ti(t,i),n=jp(t,i,4);if(1===s){if(!Hp(t,i,8)){const t=i.ac+8;return i.Oy(e),{vD:!1,bD:t}}s=qt(t,i).toNumber()}if("uuid"===n){if(!Hp(t,i,16)){const t=i.ac+16;return i.Oy(e),{vD:!1,bD:t}}n=jp(t,i,16)}return{vD:!0,yD:{Km:n,Wy:s,SD:i.ac-e}}}static TD(t,i,e){const s=t.lk,n=t.$R;let r=yi(ye(s),n.ac,s.byteLength);return e&&(r=nr(r)),n.Ly(r.byteLength),{Km:i,lk:r}}static kD(i,e,s){const n=i.eD(),{version:r,flags:h}=AT(n);return{Km:e,ED:r,xD:h,lk:t.TD(i,e,s).lk}}};function Wh(t,i){const e=ls(t,i);if(!e)throw new m("Missing "+i+" atom");return e}function ls(t,i){for(const e of t)if(e.Km===i)return e.lk}function bT(t,i){const e=[];for(const s of t)s.Km===i&&e.push(s.lk);return e}function AT(t){return{version:t>>24,flags:new Fp(16777215&t)}}var Hn=class t{static PD(i){const e=[],s=ha.lD(new yu(i,new oi));for(const i of s){const s=t.CD(i);s&&e.push(s)}return e}static RD(t){return ha.fD(t,new oi,!1).m.some(this.DD)}static ND(i){return bT(ha.lD(new yu(i,new oi)),ui.qR).map(t.BD)}static MD(i){return bT(ha.lD(i.lk),ui.qR).map(t.BD)}static DD(t){return t.Km===ui.jR||t.Km===ui.XR||t.Km===ui.HC||t.Km===ui.NR||t.Km===ui.WR||t.Km===ui.GR||t.Km===ui.zR}static CD(i){switch(i.Km){case ui.HC:return t.LD(i.lk);case ui.NR:return t.OD(i.lk,i.ac);case ui.WR:return t.FD(i.lk);case ui.GR:return t.UD(i.lk);case ui.zR:return t.VD(i.lk)}}static LD(i){const e=ha.lD(i),s=Wh(e,ui.WC),n=bT(e,ui.qC),r=ls(e,ui.ZC),h=t.HD(s),o=n.map(t.WD),a=r?t.qD(r):void 0;return{Km:ui.HC,yD:h,Z:o,zD:a}}static HD(t){const i=t.eD(),{version:e,flags:s}=AT(i),n=1===e?t.nD():t.eD(),r=1===e?t.nD():t.eD(),h=t.eD(),o=1===e?t.nD():t.eD(),a=t.eD(),u=t.tD()>>8;t.uD(2),t.uD(8);const c=t.hD(9);t.uD(24);const d=t.eD();return{Km:ui.WC,ED:e,xD:s,GD:n,XD:r,jD:h,ct:o,QD:a,OP:u,KD:c,YD:d}}static WD(i){const e=ha.lD(i),s=Wh(e,ui.zC),n=Wh(e,ui.GC),r=t.JD(s),h=t.ZD(n);return{Km:ui.qC,yD:r,$D:h}}static JD(t){const i=t.eD(),{version:e,flags:s}=AT(i),n=1===e?t.nD():t.eD(),r=1===e?t.nD():t.eD(),h=t.eD();t.uD(4);const o=1===e?t.nD():t.eD();t.uD(8);const a=t.iD(),u=t.iD(),c=t.iD()/256;t.uD(2);const d=t.hD(9),l=t.eD()/65536,f=t.eD()/65536;return{Km:ui.zC,tN:s.Uy(1),iN:s.Uy(2),eN:s.Uy(4),GD:n,XD:r,sN:h,ct:o,nN:a,rN:u,OP:c,KD:d,Ti:l,Mi:f}}static ZD(i){const e=ha.lD(i),s=Wh(e,ui.XC),n=Wh(e,ui.jC),r=Wh(e,ui.QC),h=t.hN(s),o=t.oN(n),a=t.aN(r);return{Km:ui.GC,yD:h,uN:o,cN:a}}static hN(t){const i=t.eD(),{version:e,flags:s}=AT(i),n=1===e?t.nD():t.eD(),r=1===e?t.nD():t.eD(),h=t.eD(),o=1===e?t.nD():t.eD();t.tD();return t.uD(2),{Km:ui.XC,ED:e,xD:s,GD:n,XD:r,jD:h,ct:o}}static oN(t){const i=t.eD(),{version:e,flags:s}=AT(i);t.uD(4);const n=t.oD(4);t.uD(12);const r=t.aD();return{Km:ui.jC,ED:e,xD:s,dN:n,l:r}}static aN(i){const e=Wh(ha.lD(i),ui.KC),s=t.lN(e);return{Km:ui.QC,fN:s}}static lN(i){const e=Wh(ha.lD(i),ui.YC),s=t.vN(e);return{Km:ui.KC,_N:s}}static vN(i){const e=i.eD(),{version:s,flags:n}=AT(e),r=(i.eD(),[]),h=ha.lD(i);for(const i of h){const e=t.gN(i.lk,i.Km);e&&r.push(e)}return{Km:ui.YC,ED:s,xD:n,pN:r}}static gN(i,e){let s=t.mN(i,e);return s||(s=t.wN(i,e),s||(e===ui.xR?t.yN(i):void 0))}static mN(i,e){return e===ui.AR?t.bN(i):e===ui.kR||e===ui.kR.toLowerCase()||e===ui.kR.toUpperCase()?t.AN(i):e===ui.RR?t.SN(i):e===ui.mR?t.TN(i):e===ui.wR?t.kN(i):void 0}static wN(i,e){return e===ui.tR?t.EN(i):e===ui.eR||e===ui.sR?t.xN(i,e):e===ui.rR?t.PN(i,e):e===ui.oR?t.CN(i,e):e===ui.DR?t.RN(i):e===ui.vR||e===ui._R||e===ui.gR||e===ui.pR?t.DN(i,e):void 0}static NN(t,i){t.uD(6);return{Km:i,BN:t.tD()}}static MN(i,e){const s=t.NN(i,e);i.uD(8);const n=i.tD(),r=i.tD();i.uD(2),i.uD(2);return Y({},s,{LN:n,ON:r,FN:i.eD()>>>16})}static UN(i,e){const s=t.NN(i,e);i.uD(2),i.uD(2),i.uD(12);const n=i.tD(),r=i.tD(),h=i.eD(),o=i.eD();i.uD(4);const a=i.tD();i.uD(32);const u=i.tD();return i.uD(2),Y({},s,{Ti:n,Mi:r,VN:h,HN:o,WN:a,qN:u})}static bN(i){const e=t.MN(i,ui.AR),s=Wh(ha.lD(i),ui.SR);return Y({},e,{zN:t.GN(s)})}static AN(i){const e=t.MN(i,ui.kR),s=Wh(ha.lD(i),ui.ER);return Y({},e,{XN:t.jN(s)})}static yN(i){const e=t.NN(i,ui.xR),s=ha.lD(i),n=Wh(s,ui.PR),r=t.QN(n),h=ls(s,ui.IR);return Y({},e,{KN:r,YN:h?t.JN(h):void 0})}static QN(t){return{Km:ui.PR,Cd:t.aD()}}static JN(t){return{Km:ui.IR,Th:t.aD()}}static GN(t){return ha.kD(t,ui.SR,!0)}static jN(t){return ha.kD(t,ui.ER,!0)}static EN(i){const e=t.UN(i,ui.tR),s=ha.lD(i),n=Wh(s,ui.iR),r=ls(s,ui.bR);return Y({},e,{ZN:t.$N(n),tB:r?t.iB(r):void 0})}static xN(i,e){const s=t.UN(i,e),n=Wh(ha.lD(i),ui.nR);return Y({},s,{eB:t.sB(n)})}static PN(i,e){const s=t.UN(i,e),n=Wh(ha.lD(i),ui.hR);return Y({},s,{nB:t.rB(n)})}static CN(i,e){const s=t.UN(i,e),n=ha.lD(i),r=Wh(n,ui.aR),h=t.hB(r),o=ls(n,ui.yR);return Y({},s,{oB:h,aB:o?t.uB(o):void 0})}static RN(i){const e=i.Fy(),s=t.UN(i,ui.DR),n=Wh(ha.lD(i),ui.QR),r=t.cB(n);return Y({},s,{dB:t.wN(e,r.fB.lB),vB:r})}static DN(i,e){const s=t.UN(i,e),n=ha.lD(i);return Y({},s,{_B:t.gB(n)})}static TN(i){const e=t.MN(i,ui.mR),s=Wh(ha.lD(i),ui.lR);return Y({},e,{pB:t.mB(s)})}static kN(i){const e=t.MN(i,ui.wR),s=Wh(ha.lD(i),ui.fR);return Y({},e,{wB:t.yB(s)})}static SN(i){const e=i.Fy(),s=t.MN(i,ui.RR),n=Wh(ha.lD(i),ui.QR),r=t.cB(n);return Y({},s,{dB:t.mN(e,r.fB.lB),vB:r})}static cB(i){const e=ha.lD(i),s=Wh(e,ui.KR),n=t.bB(s),r=Wh(e,ui.YR),h=t.AB(r);return{Km:ui.QR,fB:n,SB:h}}static bB(t){const i=t.oD(4);return{Km:ui.KR,lB:i}}static AB(i){const e=Wh(ha.lD(i),ui.JR),s=t.TB(e);return{Km:ui.YR,kB:s}}static TB(t){const i=ti(t.lk,t.$R),{version:e,flags:s}=AT(i),n=t.ZR()>0,r=t.ZR(),h=t.rD(16);return{Km:ui.JR,ED:e,xD:s,EB:n,xB:r,PB:h}}static $N(t){return ha.TD(t,ui.iR,!0)}static sB(t){return ha.TD(t,ui.nR,!0)}static gB(t){const i=ls(t,ui.uR);if(void 0!==i)return ha.TD(i,ui.uR,!0);const e=ls(t,ui.cR);if(void 0!==e)return ha.TD(e,ui.cR,!0);const s=ls(t,ui.dR);if(void 0!==s)return ha.TD(s,ui.dR,!0);throw m("Error parsing Dolby Vision configuration box.")}static mB(t){return ha.TD(t,ui.lR,!0)}static yB(t){return ha.TD(t,ui.fR,!0)}static rB(t){return ha.TD(t,ui.hR,!0)}static hB(t){return ha.TD(t,ui.aR,!0)}static uB(t){const i=t.oD(4);switch(i){case"nclx":return{IB:pT.ON_SCREEN_COLOURS,CB:t.tD(),RB:t.tD(),DB:t.tD(),NB:!!(128&t.ZR())};case"rICC":return{IB:pT.RESTRICTED_ICC_PROFILE};case"prof":return{IB:pT.UNRESTRICED_ICC_PROFILE};default:throw m("Could not parse ColourInformationBox: unknown type '"+i+"'.")}}static iB(t){const i=t.eD(),e=t.eD();return{Km:ui.bR,BB:i,MB:e}}static qD(i){const e=bT(ha.lD(i),ui.$C).map(t.LB);return{Km:ui.ZC,Z:e}}static LB(t){const i=t.eD(),{version:e,flags:s}=AT(i),n=t.eD(),r=t.eD(),h=t.eD(),o=t.eD(),a=t.eD();return{Km:ui.$C,ED:e,xD:s,sN:n,OB:r,FB:h,UB:o,VB:a}}static OD(i,e){const s=ha.lD(i),n=Wh(s,ui.MR),r=bT(s,ui.LR),h=t.HB(n),o=r.map(t.WB);return{Km:ui.NR,qB:e,yD:h,Z:o}}static HB(t){const i=t.eD(),{version:e,flags:s}=AT(i),n=t.eD();return{Km:ui.MR,ED:e,xD:s,zB:n}}static WB(i){const e=ha.lD(i),s=Wh(e,ui.OR),n=bT(e,ui.FR),r=ls(e,ui.UR),h=t.GB(s),o=n.map(i=>t.XB(i,h)),a=r?t.jB(r):void 0;return{Km:ui.LR,yD:h,QB:o,KB:a}}static GB(t){const i=t.eD(),{version:e,flags:s}=AT(i),n=t.eD(),r=s.Uy(bo.BASE_DATA_OFFSET_PRESENT)?t.nD():void 0,h=s.Uy(bo.SAMPLE_DESCRIPTION_INDEX_PRESENT)?t.eD():void 0,o=s.Uy(bo.DEFAULT_SAMPLE_DURATION_PRESENT)?t.eD():void 0,a=s.Uy(bo.DEFAULT_SAMPLE_SIZE_PRESENT)?t.eD():void 0,u=s.Uy(bo.DEFAULT_SAMPLE_FLAGS_PRESENT)?t.eD():void 0;return{Km:ui.OR,ED:e,xD:s,sN:n,YB:r,JB:h,FB:o,UB:a,VB:u}}static XB(i,e){const s=i.eD(),{version:n,flags:r}=AT(s),h=i.eD(),o=r.Uy(Rr.DATA_OFFSET_PRESENT)?i.sD():void 0,a=r.Uy(Rr.FIRST_SAMPLE_FLAGS_PRESENT)?i.eD():void 0,u=[];for(let s=0;s<h;s++){const h=t.ZB(i,r,n,e);0===s&&void 0!==a&&(h.xD=a),u.push(h)}return{Km:ui.FR,ED:n,xD:r,$B:h,qB:o,tM:a,iM:u}}static ZB(t,i,e,s){return{ct:i.Uy(Rr.SAMPLE_DURATION_PRESENT)?t.eD():s.FB,Wy:i.Uy(Rr.SAMPLE_SIZE_PRESENT)?t.eD():s.UB,xD:i.Uy(Rr.SAMPLE_FLAGS_PRESENT)?t.eD():s.VB,eM:i.Uy(Rr.SAMPLE_COMPOSITION_TIME_OFFSET_PRESENT)?0===e?t.eD():t.sD():void 0}}static VD(t){const i=t.lk,e=t.$R,s=ti(i,e),{version:n,flags:r}=AT(s);if(1===n){const t=ti(i,e),s=qt(i,e),h=ti(i,e),o=ti(i,e),a=Xp(i,e),u=Xp(i,e),c=di(ye(i),e.ac,i.byteLength);return e.Ly(c.byteLength),{Km:ui.zR,ED:n,xD:r,sM:a,XE:u,jD:t,nM:s,rM:h,o:o,hM:c}}{const t=Xp(i,e),s=Xp(i,e),h=ti(i,e),o=ti(i,e),a=ti(i,e),u=ti(i,e),c=di(ye(i),e.ac,i.byteLength);return e.Ly(c.byteLength),{Km:ui.zR,xD:r,ED:n,sM:t,XE:s,jD:h,oM:o,rM:a,o:u,hM:c}}}static FD(t){return ha.TD(t,ui.WR,!1)}static BD(i){const e=i.lk,s=i.$R,n=nr(ye(e)).buffer,r=ti(e,s),{version:h,flags:o}=AT(r),a=t.aM(e,s),u=[];if(h>0){const t=ti(e,s);for(let i=0;i<t;i++){const t=kt(e,s,16);u.push(t)}}const c=ti(e,s),d=new j(n,s.ac,c);return s.Ly(e.byteLength),{Km:ui.qR,ED:h,xD:o,uM:a,cM:u,dM:c,lk:d,lM:n}}static aM(t,i){let e="";for(let s=0;s<4;s++){const s=Cl(t,i).toString(16);e+=1===s.length?"0"+s:s}e+="-";for(let s=0;s<2;s++){const s=Cl(t,i).toString(16);e+=1===s.length?"0"+s:s}e+="-";for(let s=0;s<2;s++){const s=Cl(t,i).toString(16);e+=1===s.length?"0"+s:s}e+="-";for(let s=0;s<2;s++){const s=Cl(t,i).toString(16);e+=1===s.length?"0"+s:s}e+="-";for(let s=0;s<6;s++){const s=Cl(t,i).toString(16);e+=1===s.length?"0"+s:s}return e.toLowerCase()}static UD(t){const i=t.lk,e=t.$R,s=ti(i,e),{version:n,flags:r}=AT(s),h=ti(i,e),o=ti(i,e);let a,u;0===n?(a=yo.fromBits(ti(i,e),0,!0),u=yo.fromBits(ti(i,e),0,!0)):(a=qt(i,e),u=qt(i,e)),e.Ly(2);const c=Rn(i,e),d=[];for(let t=0;t<c;t+=1){const t=ti(i,e),s=t>>31&1,n=2147483647&t,r=ti(i,e),h=ti(i,e),o=h>>31&1,a=h>>28&7,u=268435455&h;d.push({fM:s,vM:n,ct:r,_M:o,gM:a,pM:u})}return{Km:ui.GR,ED:n,xD:r,mM:h,jD:o,wM:a,yM:u,bM:c,AM:d}}static jB(t){const i=t.lk,e=t.$R,s=ti(i,e),{version:n,flags:r}=AT(s);let h;return h=0===n?yo.fromBits(ti(i,e),0,!0):qt(i,e),{Km:ui.UR,ED:n,xD:r,KB:h}}},ST={playready:"https://pr-keyos.licensekeyserver.com/core/rightsmanager.asmx",widevine:"https://wv-keyos.licensekeyserver.com/",fairplay:"https://fp-keyos.licensekeyserver.com/getkey"};function TT(t){if(!t)return!0;const i=t.licenseAcquisitionURL,e=t.certificateURL,s=t.keys,n=t.headers,r=t.useCredentials,h=t.queryParameters;return!(i||e||s||n||r||h)}function kT(t){return t&&void 0!==t.licenseAcquisitionURL}var ET=kT,xT=kT;function PT(t){if(!t)return!0;if(RT(t))return!1;const i=t.fairplay,e=t.playready,s=t.widevine,n=t.clearkey,r=t.aes128;return TT(i)&&TT(e)&&TT(s)&&void 0===n&&TT(r)}function IT(t){const i=vT(t),e=function(t){var i;const e=t;return fT(e)&&""!==(null==(i=e.fairplay)?void 0:i.headers.PreAuthorization)&&!lT(e)}(t);return(!i||!e)&&(i||e)}function Fr(t){return t.integration===ZS}function CT(t){const i=t;if(!i)return!1;if(PT(i))return!1;const e=i.fairplay,s=i.playready,n=i.widevine,r=i.clearkey;if(RT(t))return!0;if(e&&!function(t){const i=t;return i&&(void 0!==i.certificateURL||void 0!==i.certificate)}(e))return!1;if(s&&!ET(s))return!1;if(n&&!xT(n))return!1;if(r&&!function(t){return void 0!==t}(r))return!1;if(i.integration){if(A.VC.LC(i.integration))return!0;switch(i.integration){case Br:if(!function(t){const i=t,e=i.integration===Br;return e&&(DT(t)||NT(t))}(t))return!1;break;case $S:if(!BT(t))return!1;break;case tT:if(!function(t){const i=t;return i.integration===tT}(t))return!1;break;case ZS:if(!Fr(t))return!1;break;case YS:if(!IT(t))return!1;break;case JS:if(!function(t){const i=t;return i.integration===JS}(t))return!1;break;case iT:if(!RT(t))return!1;break;case eT:if(!function(t){const i=t;return i.integration===eT&&(void 0!==i.token||function(t){return void 0!==t.merchant&&void 0!==t.sessionId&&void 0!==t.userId}(i))}(t))return!1;break;case sT:if(!function(t){const i=t;return i.integration===sT}(t))return!1;break;case rT:if(!MT(t))return!1;break;case hT:if(!function(t){return t.integration===hT}(t))return!1;break;case oT:if(!LT(t))return!1;break;case nT:if(!function(t){const i=t;return i.integration===nT&&void 0!==i.token}(t))return!1;break;case aT:if(!function(t){const i=t;return i.integration===aT}(t))return!1;break;case uT:if(!function(t){const i=t;return i&&it(i.releasePid)&&it(i.accountId)&&it(i.token)}(t))return!1;break;case cT:return!0;default:return!1}}return!0}function RT(t){return t.integration===iT}function DT(t){return void 0!==t.authToken}function NT(t){const i=t;return void 0!==i.accountName&&void 0!==i.customerName&&void 0!==i.portalId}function BT(t){const i=t;return i.integration===$S&&void 0!==i.token}function MT(t){const i=t;return i&&i.integration===rT&&Q(i.ticketAcquisitionURL)&&Q(i.streamId)}function LT(t){const i=t;return i.integration===oT&&void 0!==i.token}function OT(t,i){const e=i[t];var s;const n=null!=(s=null==e?void 0:e.licenseAcquisitionURL)?s:ST[t];var r;const h=null!=(r=null==e?void 0:e.customdata)?r:i.customdata,o=h?{customData:h}:{};var a;const u=Y({},null!=(a=null==e?void 0:e.headers)?a:{},o),c=null!=e?e:{},{customdata:d}=c;return Y({},dT(c,["customdata"]),{licenseAcquisitionURL:n,headers:u})}function FT(t){switch(t.toLowerCase()){case"widevine":case Hg:return Hg;case"playready":case Fg:return Fg;case"fairplay":case de:return de}}function UT(t,i){switch(t){case Ng:return function(t){const i={},e=Hn.ND(new DataView(t));for(const t of e)i[t.uM]=t.lM;return i}(i);case Bg:case Mg:return function(t){return{[Qg]:t}}(i);case Lg:return function(t){return{[Xg]:t}}(i);default:throw new as(me.CONTENT_PROTECTION_INITIALIZATION_INVALID,"Unsupported initDataType "+t)}}async function VT(t,i){return void 0===i&&(i=!1),!(!t.widevine||!await zd.Am())||(!(!t.playready||!await zd.ym())||(!(!t.clearkey||!await zd.pm())||!(i||!t.fairplay||!await zd.wm())))}function ue(t,i,e){const s=function(t,i,e){var s;const{useCredentials:n,crossOrigin:r}=function(t,i){let e=Fa.Fk;return t.useCredentials?e=Fa.fC:t.crossOrigin&&(e=_k(t.crossOrigin)),e===Fa.Fk&&i&&i.vr&&i.vr[360]&&(e=Fa.lC),{useCredentials:e===Fa.fC,crossOrigin:e}}(t,i);let h=t.liveOffset;it(h)||(h=e&&it(e.liveOffset)?e.liveOffset:void 0);let o=t.timeServer;it(o)||(o=i&&it(i.timeServer)?i.timeServer:void 0);let a=t.hlsDateRange;it(a)||(a=e&&it(e.hlsDateRange)?Boolean(e.hlsDateRange):void 0);const u=Boolean(t.experimentalRendering),c=Boolean(t.nativeUiRendering),d=Boolean(t.lowLatency),l=Boolean(t.useNativePlayback),f=Boolean(t.useManagedMediaSource),v=it(t.dash)?WT(t.dash):void 0,_=it(t.hls)?qT(t.hls):void 0,g=jT(XT(t.abr),null==e?void 0:e.abr),p=Lt(t.lcevc),m=it(t.ignoreEmbeddedTextTrackTypes)?Pk(t.ignoreEmbeddedTextTrackTypes):[];var w;const y=ck(null!=(w=t.seamlessSwitchStrategy)?w:null==(s=t.dash)?void 0:s.useSeamlessPeriodSwitch),b=ok(t.latencyConfiguration);return{crossOrigin:r,useCredentials:n,liveOffset:h,timeServer:o,hlsDateRange:a,experimentalRendering:u,nativeUiRendering:c,lowLatency:d,useNativePlayback:l,useManagedMediaSource:f,dash:v,hls:_,abr:g,lcevc:p,ignoreEmbeddedTextTrackTypes:m,seamlessSwitchStrategy:y,latencyConfiguration:b}}(t,i,e),n=jS(t.src);let r=t.type;r||(r=t.src?qu(t.src):void 0);const h=function(t,i){let e;e=it(t.contentProtection)?t.contentProtection:it(t.drm)?t.drm:it(i)&&it(i.contentProtection)?i.contentProtection:it(i)&&it(i.drm)?i.drm:void 0;return HT(e)}(t,i);return Y({},s,{src:n,type:r,contentProtection:h,ssai:it(t.ssai)?KS(t.ssai):void 0,integrationData:void 0,isAdvertisement:Boolean(t.isAdvertisement)})}function HT(t){return CT(t)&&t.integration&&t.integration===iT?function(t){const i=OT(po.zm,t),e=OT(po.qm,t),s=t[po.jm]&&OT(po.jm,t);return Y({integration:"keyos",widevine:i,playready:e},s?{fairplay:s}:{})}(t):t}function WT(t){return{useSeamlessPeriodSwitch:ck(null==t?void 0:t.useSeamlessPeriodSwitch),needsTimescaleShifting:Lt(null==t?void 0:t.needsTimescaleShifting),desiredTimescale:void 0!==(null==t?void 0:t.desiredTimescale)?bs(null==t?void 0:t.desiredTimescale):void 0,forceSeekToSynchronize:Lt(null==t?void 0:t.forceSeekToSynchronize),ignoreAvailabilityWindow:Lt(null==t?void 0:t.ignoreAvailabilityWindow),forceHardSwitchWhenSeekingBackwards:Lt(null==t?void 0:t.forceHardSwitchWhenSeekingBackwards),segmentRelativeVttTiming:Lt(null==t?void 0:t.segmentRelativeVttTiming),forceRecreateMediaSourceOnAudioSwitch:Lt(null==t?void 0:t.forceRecreateMediaSourceOnAudioSwitch)}}function qT(t){return{discontinuityAlignment:zT(null==t?void 0:t.discontinuityAlignment),delaySubtitlePreload:Th(null==t?void 0:t.delaySubtitlePreload)}}function zT(t){if(!t||!Q(t))return"auto";switch(t){case"playlist":return"playlist";case"media":return"media";default:return"auto"}}r(),r(),r(),r();var at=function(t){return t.Bk="audio",t.Mk="video",t.LT="text",t.Lk="image",t.yk="unknown",t}({});function GT(t){return"audio"===t||"video"===t}function XT(t){if(!it(t))return;return QT(IS(null==t?void 0:t.preferredAudioCodecs,Ts),IS(null==t?void 0:t.preferredVideoCodecs,Ts),Lt(null==t?void 0:t.restrictToPlayerSize))}function jT(t,i){if(!it(t)&&!it(i))return;var e;return QT(KT(null==t?void 0:t.preferredAudioCodecs,null==i?void 0:i.preferredAudioCodecs),KT(null==t?void 0:t.preferredVideoCodecs,null==i?void 0:i.preferredVideoCodecs),null!=(e=null==t?void 0:t.restrictToPlayerSize)?e:null==i?void 0:i.restrictToPlayerSize)}function QT(t,i,e){if(0!==t.length||0!==i.length||void 0!==e)return{preferredAudioCodecs:0===t.length?void 0:t,preferredVideoCodecs:0===i.length?void 0:i,restrictToPlayerSize:e}}function KT(t,i){return void 0!==t&&(null==t?void 0:t.length)>0?t:null!=i?i:[]}function YT(t,i){if(void 0!==i)switch(t){case at.Mk:return i.preferredVideoCodecs;case at.Bk:return i.preferredAudioCodecs;default:return}}r(),r(),r();var JT=!1;r();var Jr=function(t){return t.SM="canplay",t.TM="canplaythrough",t.kM="loadeddata",t.EM="loadedmetadata",t.AI="readystatechange",t.xM="waiting",t.PM="playing",t}({}),Ii=["canplay","canplaythrough","loadeddata","loadedmetadata","readystatechange","waiting","playing"];function ZT(t,i,e){return e?t<=i:t<i}r();var Uo=class t{get IM(){return this.CM.slice()}Tn(t){return this.CM[2*t]}An(t){return this.CM[2*t+1]}RM(t){return this.DM[2*t]}NM(t){return this.DM[2*t+1]}_s(){const t=this;return{get length(){return t.V},start(i){const e=0|i;return t.BM(e),t.Tn(e)},end(i){const e=0|i;return t.BM(e),t.An(e)}}}MM(){const i=new Array(2*this.V),e=new Array(2*this.V);for(let t=0;t<this.V;t++)i[2*t]=this.Tn(t),i[2*t+1]=this.An(t),e[2*t]=!0,e[2*t+1]=!0;return new t(i,e)}BM(t){if(t<0)throw new m("The index provided ("+t+") must be non-negative");if(t>=this.V)throw new m("The index provided ("+t+") is greater than the maximum bound ("+this.V+")")}LM(t){if(0===this.V)return 0;if(this.Cr(t))return t;if(t<=this.Tn(0))return this.Tn(0);if(t>=this.An(this.V-1))return this.An(this.V-1);{let i=0,e=1/0;for(let s=0;s<this.V;s++){const n=this.Tn(s),r=_.abs(n-t);r<e&&(i=n,e=r);const h=this.An(s),o=_.abs(h-t);o<e&&(i=h,e=o)}return i}}Mn(i){let e=0,s=0;const n=[],r=[];for(;e<this.V&&s<i.V;){const t=this.Tn(e),h=this.An(e),o=this.RM(e),a=this.NM(e),u=i.Tn(s),c=i.An(s),d=i.RM(s),l=i.NM(s),f=_.max(t,u),v=_.min(h,c);let g,p;g=t===u?o&&d:f===t?o:d,p=h===c?a&&l:v===h?a:l,(f<v||g&&p&&f===v)&&(n.push(f,v),r.push(g,p)),h===c?(e+=1,s+=1):h<c?e+=1:s+=1}return new t(n,r)}OM(){const i=this.FM(),e=i.V;if(0===e)return new t([-1/0,1/0],[!1,!1]);const s=[],n=[],r=i.Tn(0);r!==-1/0&&(s.push(-1/0,r),n.push(!1,!i.RM(0)));for(let t=0;t<e-1;t++)s.push(i.An(t),i.Tn(t+1)),n.push(!i.NM(t),!i.RM(t+1));const h=i.An(e-1);return h!==1/0&&(s.push(h,1/0),n.push(!i.NM(e-1),!1)),new t(s,n)}UM(i){let e=0,s=0;const n=this.V,r=i.V,h=new Array(2*(n+r)),o=new Array(2*(n+r));let a=0;for(;e<n&&s<r;){const t=this.Tn(e),n=this.An(e),r=i.Tn(s),u=i.An(s);t<r||t===r&&n<u?(h[a]=t,h[a+1]=n,o[a]=this.RM(e),o[a+1]=this.NM(e),e++):(h[a]=r,h[a+1]=u,o[a]=i.RM(s),o[a+1]=i.NM(s),s++),a+=2}for(;e<n;)h[a]=this.Tn(e),h[a+1]=this.An(e),o[a]=this.RM(e),o[a+1]=this.NM(e),e++,a+=2;for(;s<r;)h[a]=i.Tn(s),h[a+1]=i.An(s),o[a]=i.RM(s),o[a+1]=i.NM(s),s++,a+=2;return new t(h,o)}VM(i){void 0===i&&(i=0);const e=this.V;if(e<2)return this;const s=[],n=[];let r=this.Tn(0),h=this.An(0),o=this.RM(0),a=this.NM(0);for(let t=1;t<e;t++){const e=this.Tn(t),u=this.An(t);let c=this.RM(t),d=this.NM(t);r<e&&h>u||(r===e&&(c=o||c,o=c),h===u&&(d=a||d,a=d),ZT(e,h+i,a||c)?(h=u,a=d):(s.push(r,h),n.push(o,a),r=e,h=u,o=c,a=d))}return s.push(r,h),n.push(o,a),new t(s,n).FM()}FM(){const i=[],e=[];for(let t=0;t<this.V;t++){const s=this.Tn(t),n=this.An(t),r=this.RM(t),h=this.NM(t);s===n?(r||h)&&(i.push(s,n),e.push(!0,!0)):(i.push(s,n),e.push(r,h))}return new t(i,e)}HM(t){if(0===this.V)return t;if(0===t.V)return this;return this.UM(t).VM()}WM(t){const i=this.FM(),e=t.FM(),s=i.OM(),n=e.OM(),r=s.Mn(e),h=n.Mn(i);return r.HM(h)}Ly(i){if(0===this.V||0===i)return this;const e=[],s=[];for(let t=0;t<this.V;t++){const n=this.Tn(t)+i,r=this.An(t)+i;e.push(n,r),s.push(this.RM(t),this.NM(t))}return new t(e,s)}qM(t){return 0===this.V||0===t.V?this:this.FM().Mn(t.FM().OM())}Cr(t,i){return this.zM(t,i)>=0}GM(t,i,e,s,n){return this.XM(t,i,e,s,n)>=0}jM(t,i,e,s,n){return this.QM(t,i,e,s,n)>=0}KM(t){if(t.V!==this.V)return!1;for(let i=0;i<this.V;i++)if(this.Tn(i)!==t.Tn(i)||this.An(i)!==t.An(i)||this.RM(i)!==t.RM(i)||this.NM(i)!==t.NM(i))return!1;return!0}YM(i){const e=[],s=[];for(let t=0;t<this.V;t++){const n=this.Tn(t),r=this.An(t),h=this.RM(t),o=this.NM(t);i(n,r,h,o)&&(e.push(n,r),s.push(h,o))}return new t(e,s)}QM(t,i,e,s,n){void 0===e&&(e=!0),void 0===s&&(s=!0),void 0===n&&(n=0);const r=t-n,h=i+n;for(let t=0;t<this.V;t+=1)if(ZT(this.Tn(t),h,!s||this.RM(t))&&ZT(r,this.An(t),!e||this.NM(t)))return t;return-1}XM(t,i,e,s,n){void 0===e&&(e=!0),void 0===s&&(s=!1),void 0===n&&(n=0);const r=t+n,h=i-n;for(let t=0;t<this.V;t+=1)if(ZT(this.Tn(t),r,!e||this.RM(t))&&ZT(h,this.An(t),!s||this.NM(t)))return t;return-1}zM(t,i){return this.XM(t,t,!0,!0,i)}JM(t,i){void 0===i&&(i=0);const e=t+i;for(let t=this.V-1;t>=0;t-=1)if(ZT(this.Tn(t),e,this.RM(t)))return t;return-1}ZM(t,i){void 0===i&&(i=0);const e=t-i;for(let t=0;t<this.V;t+=1)if(ZT(e,this.An(t),this.NM(t)))return t;return-1}$M(t,i){void 0===i&&(i=0);const e=t+i;for(let t=0;t<this.V;t+=1)if(this.Tn(t)>e)return t;return-1}tL(i){return this.BM(i),new t([this.Tn(i),this.An(i)],[this.RM(i),this.NM(i)])}iL(t,i){const e=this.zM(t,i);return e<0?void 0:this.tL(e)}get eL(){let t=0;for(let i=0;i<this.V;i++){t+=this.An(i)-this.Tn(i)}return t}static jn(i){const e=[];for(let t=0;t<i.length;t++)e.push(i.start(t),i.end(t));return new t(e)}static sL(i){return new t([i,i],[!0,!0])}static nL(i,e){return i<=e?new t([i,e]):t.rL()}static rL(){return $T}static hL(){return tk}constructor(t,i){this.V=void 0,this.CM=void 0,this.DM=void 0,this.V=t.length>>1,this.CM=t,this.DM=i||function(t){const i=new Array(2*t);for(let e=0,s=0;e<t;e+=1,s+=2)i[s]=!0,i[s+1]=!1;return i}(this.V)}},$T=new Uo([]),tk=new Uo([0,1/0]),ik=.92,ih=1.08,ek=.25,sk=class extends Ne{get oL(){return this.We&&this.ho}get aL(){return this.uL}get Rt(){return this.We}set Rt(t){this.We=t,t?this.Tn():this.KP()}cL(t){this.dL.push(t),this.lL()}fL(t){_e(this.dL,t),this.lL()}lL(){this.uL=this.vL(),this.ho&&this._L()}vL(){const t=this.gL,i=function(t,i){const e=i-t.targetOffset;return{minimumOffset:t.minimumOffset+e,targetOffset:t.targetOffset+e,maximumOffset:t.maximumOffset+e,forceSeekOffset:t.forceSeekOffset+e,minimumPlaybackRate:t.minimumPlaybackRate,maximumPlaybackRate:t.maximumPlaybackRate,leniency:t.leniency}}(this.pL,this.mL),e=[i,...this.dL],s=e.reduce((t,i)=>{var e;return _.max(t,null!=(e=null==i?void 0:i.minimumOffset)?e:0)},t),n=e.reduce((t,i)=>{var e;return _.max(t,null!=(e=null==i?void 0:i.targetOffset)?e:0)},s+ek),r=e.reduce((t,i)=>{var e;return _.max(t,null!=(e=null==i?void 0:i.maximumOffset)?e:0)},n+ek);return{minimumOffset:s,targetOffset:n,maximumOffset:r,forceSeekOffset:e.reduce((t,i)=>{var e;return _.max(t,null!=(e=null==i?void 0:i.forceSeekOffset)?e:0)},r+ek),minimumPlaybackRate:e.reduce((t,i)=>{var e;return _.min(t,null!=(e=i.minimumPlaybackRate)?e:ik)},ik),maximumPlaybackRate:e.reduce((t,i)=>{var e;return _.max(t,null!=(e=i.maximumPlaybackRate)?e:ih)},ih)}}wL(){var t;const i=null==(t=Uo.jn(this.oa.Fx).iL(this.oa.zx))?void 0:t.An(0),e=void 0!==i?i-this.oa.zx:0;this.yL=_.min(this.yL,e),this.bL+=1}AL(){if(this.bL<10)return;const t=.25-this.yL,i=No(this.mL+t,this.mL-.1,this.mL+.1);this.mL=No(i,this.SL,this.TL),this.yL=1/0,this.bL=0}kL(){this.EL(),this._E=zd.Og(()=>this._L(),500)}EL(){void 0!==this._E&&(zd.Lg(this._E),this._E=void 0)}Tn(){this.We&&this.xL&&(this.ho||this.PL.wn(d.py,this._L),this.IL=zd.fm(()=>this.wL(),1e3),this.CL=zd.fm(()=>this.AL(),6e4),this.kL(),this.ho=!0)}KP(){this.ho&&(this.EL(),this.IL&&zd.vm(this.IL),this.CL&&zd.vm(this.CL),this.PL.mn(d.py,this._L),this.RL(1),this.ho=!1)}zg(){this.KP(),this.oa.mn(Jr.xM,this.DL),this.oa.mn(Jr.PM,this.NL),this.Vo()}RL(t){this.PL.ML.BL||this.oa.vP!==t&&(this.oa.vP=t)}get LL(){return this.oa.OL}constructor(t,i,e){var s;super(),this.oa=void 0,this.PL=void 0,this.ho=!1,this.We=!1,this.mL=void 0,this.uL=void 0,this.SL=void 0,this.TL=void 0,this.pL=void 0,this.dL=[],this.xL=!1,this.gL=0,this._E=void 0,this.bL=0,this.yL=1/0,this.IL=void 0,this.CL=void 0,this.DL=()=>{const t=this.PL.Fx,i=this.PL.zx,e=t.iL(i);e&&(this.gL=No(e.An(0)-i,this.gL,.5),this.lL())},this.NL=()=>{this.xL=!0,this.oa.mn(Jr.PM,this.NL),this.We&&this.Tn()},this._L=()=>{this.EL(),this.kL();const t=this.LL;if(!t)return;const i=this.FL();if(t>this.uL.forceSeekOffset)return this.So(new gp("latencyrecoveryseek")),void this.dC();const{minimumOffset:e,targetOffset:s,maximumOffset:n}=this.uL,r=this.PL.vP;if(!this.UL(i,e,n))if(i>n&&this.VL()){const t=this.uL.maximumPlaybackRate;JT,this.RL(t)}else if(i<e&&!zd.Zs.pp){const t=this.uL.minimumPlaybackRate;JT,this.RL(t)}else if(r>1&&i<s){const t=1;JT,this.RL(t)}else if(r<1&&i>s){const t=1;JT,this.RL(t)}},this.oa=t,this.PL=i,this.pL=e,this.SL=e.targetOffset,this.TL=e.targetOffset+(null!=(s=e.leniency)?s:0),this.mL=e.targetOffset,this.uL=this.vL(),this.oa.wn(Jr.xM,this.DL),this.oa.wn(Jr.PM,this.NL)}},nk=.66,rk=1.5,hk=3;function ok(t){if(!it(t))return;const i=zd.Zs.mp?10:0,e=t.targetOffset;var s;var n;var r;var h;var o;var a;return{minimumOffset:null!=(s=t.minimumOffset)?s:e*nk,targetOffset:e,maximumOffset:null!=(n=t.maximumOffset)?n:e*rk,forceSeekOffset:_.max(null!=(r=t.forceSeekOffset)?r:e*hk,i),minimumPlaybackRate:null!=(h=t.minimumPlaybackRate)?h:ik,maximumPlaybackRate:null!=(o=t.maximumPlaybackRate)?o:ih,leniency:null!=(a=t.leniency)?a:void 0}}var ak=function(t){return t.HL="auto",t.WL="always",t.qL="never",t.CLEAR_ONLY="clear-only",t.SAME_DRM_ONLY="same-drm-only",t}({}),uk=function(t){return t.UPLYNK="uplynk",t.MEDIATAILOR="mediatailor",t}({});function ck(t){if(!t||!Q(t))return"auto";switch(t){case"always":return"always";case"never":return"never";case"clear-only":return"clear-only";case"same-drm-only":return"same-drm-only";default:return"auto"}}r(),r();var dk=function(t){return t.ENABLED="enabled",t.INSECURE="insecure",t.DISABLED="disabled",t}({});r();var lk=!1;r();var fk=function(t){return t.NONE="none",t.MIDROLL_AND_POSTROLL="midroll-and-postroll",t}({});r();var nh=function(t){return t.DEFAULT="",t.SRT="srt",t.TTML="ttml",t.WEBVTT="webvtt",t.EMSG="emsg",t.EVENT_STREAM="eventstream",t.ID3="id3",t.CEA608="cea608",t.DATE_RANGE="daterange",t.MILLICAST="millicast",t}({});function vk(t){switch(t){case"":case"srt":case"ttml":case"webvtt":case"emsg":case"eventstream":case"id3":case"cea608":case"daterange":case"millicast":return!0;default:return!1}}function qu(t){const i=null==t?void 0:t.match(/\b(?:m3u8|mpd)\b/i);if(!i)return Hi.pC;switch(i[0].toLowerCase()){case"mpd":return Hi.vC;case"m3u8":return Hi._C;default:return Hi.pC}}function _k(t){switch(t){case Fa.lC:case Fa.fC:return t;default:return Fa.Fk}}function tu(t){if(!t)return!1;const i=t.toLowerCase();return Xt(i,Hi.vC)}function gk(t){if(!t)return!1;const i=t.toLowerCase();return Xt(i,Hi._C)||Xt(i,Hi.gC)}function pk(t){return Mc(t)&&Mc(t.ssai)&&"google-dai"===t.ssai.integration}function mk(t){return Mc(t)&&"uplynk"===t.integration}function wk(t){return Mc(t)&&"theolive"===t.type}function yk(t){return Mc(t)&&"mediatailor"===t.integration}function Xo(t){return Mc(t)&&"millicast"===t.type}function bk(t){if(t.sources)if(hi(t.sources)){for(const i of t.sources)if(Xo(i))return!0}else if(Mc(t.sources))return Xo(t.sources);return!1}function Ak(t){if(Q(t))return!t;if(mk(t))return!t.id;if(pk(t)){const i=t.ssai,e="live"===i.availabilityType&&i.assetKey,s="vod"===i.availabilityType&&i.contentSourceID&&i.videoID;return Boolean(e&&s)}return Xo(t)?!t.src||!t.streamAccountId:!t.src}function ei(t){return Boolean(Mc(t)&&Q(t.src))}function Ms(t){return t.type===Hi.mC||t.type===Hi.wC}function Ds(t){return Q(t)||ei(t)||pk(t)||mk(t)||Xo(t)}function Ns(t){if(t){if(Ds(t))return Ak(t);for(const i of t)if(!Ak(i))return!1;return!0}return!0}function Sk(){return{crossOrigin:Fa.Fk,useCredentials:!1,liveOffset:void 0,timeServer:void 0,hlsDateRange:void 0,experimentalRendering:!1,nativeUiRendering:!1,lowLatency:!1,useNativePlayback:!1,useManagedMediaSource:!1,dash:void 0,hls:void 0,abr:void 0,lcevc:void 0,ignoreEmbeddedTextTrackTypes:[],seamlessSwitchStrategy:ak.HL,latencyConfiguration:void 0}}function Tk(){return Y({},Sk(),{src:void 0,type:Hi.pC,contentProtection:void 0,ssai:void 0,integrationData:void 0,isAdvertisement:void 0})}function kk(t){const i={allowedMimeTypes:void 0,preload:"midroll-and-postroll",showCountdown:!0,vpaidMode:dk.ENABLED,googleIma:{useNativeIma:!1,useAdUiElementForSsai:!0,bitrate:-1,language:void 0,uiElements:void 0,allowSeekingForGoogleDai:!1},theoads:lk,allowSkipAdBreak:!1};return void 0===t||(void 0!==t.preload&&(i.preload=function(t){return"none"===t?fk.NONE:fk.MIDROLL_AND_POSTROLL}(t.preload)),void 0!==t.showCountdown&&(i.showCountdown=Th(t.showCountdown)),void 0!==t.vpaidMode&&(i.vpaidMode=function(t){switch(t){case"insecure":return dk.INSECURE;case"disabled":return dk.DISABLED;default:return dk.ENABLED}}(t.vpaidMode)),hi(t.allowedMimeTypes)&&(i.allowedMimeTypes=t.allowedMimeTypes.filter(Q)),void 0!==t.googleIma&&(i.googleIma=function(t){return void 0===t?{useNativeIma:!1,useAdUiElementForSsai:!0,bitrate:-1,language:void 0,uiElements:void 0,allowSeekingForGoogleDai:!1}:{useNativeIma:Th(t.useNativeIma),useAdUiElementForSsai:null==(i=Lt(t.useAdUiElementForSsai))||i,bitrate:null!=(e=t.bitrate)?e:-1,language:it(t.language)?Ts(t.language):void 0,uiElements:t.uiElements,allowSeekingForGoogleDai:Th(t.allowSeekingForGoogleDai)};var i,e}(t.googleIma)),void 0!==t.theoads?i.theoads=Th(t.theoads):i.theoads=lk,i.allowSkipAdBreak=Th(t.allowSkipAdBreak)),i}function Ek(t){if(!ln(t))return[];const i=[];for(const e of t)Mc(e)&&i.push(e);return i}function xk(t){return Q(t.src)||Xo(t)}function Pk(t){return hi(t)?t.filter(vk):[]}r(),r();var Lr=function(t){return t[t.zL=0]="zL",t[t.Qn=1]="Qn",t[t.GL=2]="GL",t[t.XL=3]="XL",t[t.jL=4]="jL",t}({}),ho=class extends gp{constructor(t,i=Lr.zL){super(d.Rw),this.currentTime=void 0,this.readyState=void 0,this.currentTime=t,this.readyState=i}};r();var Si=class extends gp{constructor(t){super(d.jw),this.currentTime=void 0,this.currentTime=t}};r();var vt=class extends gp{constructor(t){super(d.uo),this.currentTime=void 0,this.currentTime=t}};r();var Tt=class extends gp{constructor(t,i=Lr.Qn){super(Jr.EM),this.currentTime=void 0,this.readyState=void 0,this.currentTime=t,this.readyState=i}};r();var zr=class extends gp{constructor(t){super(d.Cw),this.duration=void 0,this.duration=t}};r();var Ik=class extends gp{constructor(t,i){super(d.Kw),this.currentTime=void 0,this.playbackRate=void 0,this.currentTime=t,this.playbackRate=i}};r();var B=class extends gp{constructor(t,i){super(d.py),this.currentTime=void 0,this.currentProgramDateTime=void 0,this.currentTime=t,this.currentProgramDateTime=i}};r();var ur=class extends gp{constructor(t){super(d.Nw),this.currentTime=void 0,this.currentTime=t}};r();var M=class extends gp{constructor(t,i=Lr.GL){super(Jr.kM),this.currentTime=void 0,this.readyState=void 0,this.currentTime=t,this.readyState=i}};r();var ji=class extends gp{constructor(t){super(d.$w),this.currentTime=void 0,this.currentTime=t}};r();var Yr=class extends gp{constructor(t){super(d.Zw),this.currentTime=void 0,this.currentTime=t}};r();var Wi=class extends gp{constructor(t,i){super(d.wy),this.currentTime=void 0,this.volume=void 0,this.currentTime=t,this.volume=i}};r();var Is=class extends gp{constructor(t,i=Lr.XL){super(Jr.SM),this.currentTime=void 0,this.readyState=void 0,this.currentTime=t,this.readyState=i}};r();var Zi=class extends gp{constructor(t,i=Lr.jL){super(Jr.TM),this.currentTime=void 0,this.readyState=void 0,this.currentTime=t,this.readyState=i}};r();var Ka=class extends gp{constructor(t,i){super(Jr.AI),this.currentTime=void 0,this.readyState=void 0,this.currentTime=t,this.readyState=i}};r();var el=class extends Oi{get error(){return this.errorObject.message}xa(){return this}constructor(t){super(hc.ma),this.errorObject=void 0,this.errorObject=t}};async function ws(t,i,e,s,n){void 0===e&&(e=3),void 0===s&&(s=1e3),void 0===n&&(n=1/0);let r=0;for(;;)try{return await t(r,i)}catch(t){if(sa(t),r<e){const t=_.min(s*2**r,n);r++,await Ze(t,i);continue}throw t}}r();var Ck={maxRetries:void 0,minimumBackoff:200,maximumBackoff:3e4},Rk=Y({},Ck,{maxRetries:1/0});r();var Yu=function(t){return t.INLINE="inline",t.FULLSCREEN="fullscreen",t.PICTURE_IN_PICTURE="picture-in-picture",t.NATIVE_PICTURE_IN_PICTURE="native-picture-in-picture",t}({}),Dk=function(t){return t.NONE="none",t.ALL="all",t.CONTENT="content",t}({});function Nk(t){switch(t){case"all":case"content":return t;default:return"none"}}function Bk(t){const i=ru(t||{});return i.libraryLocation&&(i.libraryLocation=Vn(i.libraryLocation,!0)),i.isEmbeddable=Boolean(i.isEmbeddable),i.cast=function(t){const i=XS(t?t.chromecast:void 0),e=function(t){switch(t){case"auto":return"auto";case"manual":default:return"manual";case"disabled":return"disabled"}}(t?t.strategy:void 0);return{chromecast:i,strategy:e}}(i.cast),i.ads=kk(i.ads),i.analytics=Ek(i.analytics),i.mutedAutoplay=Nk(i.mutedAutoplay),i.allowNativeFullscreen=Boolean(i.allowNativeFullscreen),i.allowMixedContent=Boolean(i.allowMixedContent),i.persistVolume=Boolean(i.persistVolume),i.liveOffset=function(t){return Number(t)||void 0}(i.liveOffset),i.hlsDateRange=function(t){return Boolean(t)}(i.hlsDateRange),i.retainPlaybackRateOnSourceChange=Boolean(i.retainPlaybackRateOnSourceChange),i.license=function(t){return Q(t)?t:void 0}(i.license),i.licenseUrl=function(t){if(!t)return;try{return Vn(t)}catch(t){return void zd.um("Invalid 'licenseUrl', falling back to default URL")}}(i.licenseUrl),i.abr=XT(i.abr),i.retryConfiguration=function(t){const i=Y({},Ck);return void 0!==t&&(void 0!==t.maxRetries&&(i.maxRetries=Number(t.maxRetries)),void 0!==t.minimumBackoff&&(i.minimumBackoff=Number(t.minimumBackoff)),void 0!==t.maximumBackoff&&(i.maximumBackoff=Number(t.maximumBackoff))),i}(i.retryConfiguration),i.hideDeprecationWarnings=Boolean(i.hideDeprecationWarnings),i.theoLive=function(t){if(!t)return t;return Y({},t,{externalSessionId:t.externalSessionId?Ts(t.externalSessionId):void 0,fallbackEnabled:Lt(t.fallbackEnabled)})}(i.theoLive),i.ps5=function(t){var i;return Y({},t,{playMode:"2K"===(null==t?void 0:t.playMode)?"2K":"4K",passThrough:null==(i=Lt(null==t?void 0:t.passThrough))||i})}(i.ps5),i}function Mk(t){return{bt:t.bt,zx:t.zx,ct:t.ct,Qx:t.Qx,lt:t.lt,Jx:t.Jx,oP:t.oP,lP:t.lP,vP:t.vP,AP:t.AP,xP:t.xP,DP:t.DP,MP:t.MP,OP:t.OP}}function Lk(t,i){const e=i.OP,s=i.oP;t.OP=e,t.oP=s}function Ok(t,i,e){if(i===e)return;const s=i.bt!==e.bt,n=i.zx,r=i.ct,h=i.oP,o=i.lP,a=i.vP,u=i.AP,c=i.xP,d=(i.MP,i.DP,i.OP),l=e.zx,f=e.ct,v=e.Qx,_=e.Jx,g=e.oP,p=e.lP,m=e.vP,w=e.AP,y=e.xP,b=(e.MP,e.DP,e.OP);(s||u>Lr.zL&&w===Lr.zL)&&t.So(new ho(l,w)),p&&!o?t.So(new Si(l)):!p&&o&&t.So(new vt(l)),w>=Lr.Qn&&(s||u<Lr.Qn)&&t.So(new Tt(l,w)),f===r||S(f)&&S(r)||t.So(new zr(f)),m!==a&&t.So(new Ik(l,m)),l!==n&&t.So(new B(l,void 0)),v&&t.So(new ur(l)),w>=Lr.GL&&(s||u<Lr.GL)&&t.So(new M(l,w)),y&&!c?t.So(new ji(l)):!y&&c&&t.So(new Yr(l)),b===d&&g===h||t.So(new Wi(l,b)),w>=Lr.XL&&(s||u<Lr.XL)&&t.So(new Is(l,w)),w>=Lr.jL&&(s||u<Lr.jL)&&t.So(new Zi(l,w)),w!==u&&t.So(new Ka(l,w)),_&&t.So(new el(_))}function Fk(t){switch(t){case Yu.INLINE:case Yu.FULLSCREEN:case Yu.PICTURE_IN_PICTURE:case Yu.NATIVE_PICTURE_IN_PICTURE:return t;default:return}}r();var Uk=class extends gp{constructor(t){super(d.Pw),this.currentSource=void 0,this.currentSource=t}};r();var Vk=class extends gp{constructor(){super(d.Bw)}};r();var Hk=class extends gp{constructor(){super(d.Lw)}};r(),r(),r();var na=function(t){return t.QL="enterpictureinpicture",t.KL="exitpictureinpicture",t.ma="pictureinpictureerror",t}({}),Wk=class extends gp{constructor(){super(na.QL)}};r();var qk=class extends gp{constructor(){super(na.KL)}},zk=class extends Ne{get OI(){return this.FI}set OI(t){if(t===this.FI)return;this.UI(this.FI);const i=this.FI.YL;this.FI=t,this.HI(t),!i&&this.FI.YL?this.So(new Wk):i&&!this.FI.YL&&this.So(new qk)}HI(t){t.wn(na.QL,this.Rs),t.wn(na.KL,this.Rs),t.wn(na.ma,this.Rs)}UI(t){t.mn(na.QL,this.Rs),t.mn(na.KL,this.Rs),t.mn(na.ma,this.Rs)}get JL(){return this.FI.JL}get YL(){return this.FI.YL}yo(){return this.FI.yo()}jo(){return this.FI.jo()}kn(t){this.Vo(),this.UI(this.FI),t||this.FI.kn()}constructor(t){super(),this.FI=void 0,this.FI=t,this.HI(this.FI)}};r(),r();var Gk=class extends Ne{get Ca(){var t;return null!=(t=this.hu)?t:this.hu=Xk(this)}ZL(t){return{}}constructor(...t){super(...t),this.hu=void 0}};function Xk(t){return{diagnose:i=>t.ZL(i),addEventListener(i,e){t.wn(Qk(i),e)},removeEventListener(i,e){t.mn(Qk(i),e)}}}var jk=["stats"];function Qk(t){const i=vu(t,Ts);return(Q(i)?[i]:i).filter(t=>Ct(jk,t))}var se=class extends Ne{set OI(t){const i=this.FI;t!==i&&(i&&this.UI(i),t&&this.HI(t),this.FI=t)}get OI(){return this.FI}get Ca(){return this.hu||(this.hu=Xk(this)),this.hu}HI(t){t.wn(jk,this.Rs)}UI(t){t.mn(jk,this.Rs)}ZL(t){var i,e;return null!=(e=null==(i=this.FI)?void 0:i.ZL(t))?e:{}}kn(){this.Vo(),this.FI&&this.UI(this.FI),this.FI=void 0}constructor(){super(),this.FI=void 0,this.hu=void 0,this.FI=void 0}},Kk=class extends lS{Aa(){return this.$L}Mx(){return this.tO}get $x(){return this.tP()}get iP(){var t;return null!=(t=this.eP())?t:this.iO}tP(){return this.eO}eP(){return this.iO}RP(){return this.Gl}BP(){return this.sO}nO(t){const i=this.Lx;if(i===t)return;i.mw(this.nI);const e=Mk(this),s=this.qx(),n=this.qP(),r=this.zP();this.Lx=t,this.tO.OI=t.ht,this.sO.OI=t.rt,this.Gl.OI=t.nt,this.$L.OI=t.Aa(),this.eO.OI=t.$x,this.iO.OI=t.iP,void 0!==e&&Ok(this,e,this);const h=this.qx();h!==s&&this.So(new Uk(h)),this.qP()!==n&&this.So(new Vk),this.zP()!==r&&this.So(new Hk),t.lw(this.nI)}async kn(){await super.kn(),this.$L.kn(),this.tO.kn(),this.sO.kn(),this.Gl.kn(),this.eO.kn(),this.iO.kn()}constructor(t){super(t),this.tO=new Gh,this.sO=new Gh,this.Gl=new ai,this.$L=void 0,this.eO=new zS,this.iO=new se,this.$L=new zk(t.Aa()),this.tO.OI=t.ht,this.sO.OI=t.rt,this.Gl.OI=t.nt,this.eO.OI=t.$x,this.iO.OI=t.iP}};r();var Yk=class extends Kk{hP(){return function(t){let i=0,e=0,s=0,n=0,r=0,h=0,o=0;for(const a of t)i+=a.rO,e+=a.hO,s+=a.oO,n+=a.aO,r+=a.uO,h+=a.cO.amountOfBufferedAudioSegments,o+=a.cO.amountOfBufferedVideoSegments;return{rO:i,hO:e,oO:s,aO:n,uO:r,cO:{amountOfBufferedAudioSegments:h,amountOfBufferedVideoSegments:o}}}(this.dO.map(t=>t.rP))}KP(){return pr(this.dO.map(t=>t.KP())).then(gs)}hr(){return pr(this.dO.map(t=>t.hr())).then(gs)}GP(){if(!this.ko){for(const t of this.dO)t.GP();this.ko=!0}}Ox(){const t=[];for(const i of this.dO)t.push(...i.Ox());return t}iI(t){let i=!1;for(const e of this.dO)i=e.iI(t)||i;return i}So(t){this.iI(t)||super.So(t)}get OI(){return this.Lx}set OI(t){this.nO(t)}lO(t){this.dO.push(t)}fO(t){_e(this.dO,t)}nO(t){if(t===this.Lx)return;const i=this.Lx;i.mr(),super.nO(t),t.gr(i)}$P(){for(const t of this.dO)t.$P()}async kn(){this.Vo(),this.Lx.mr();for(const t of this.dO)this.Lx!==t&&await t.kn();await super.kn()}constructor(t){super(t),this.dO=[],this.ko=!1,this.vO=!1,this.lO(t)}};r();var Mi=function(t){return t[t.ABORTED=1]="ABORTED",t[t.NETWORK=2]="NETWORK",t[t.DECODE=3]="DECODE",t[t.SRC_NOT_SUPPORTED=4]="SRC_NOT_SUPPORTED",t[t.ENCRYPTED=5]="ENCRYPTED",t[t.LICENSE_INVALID=6]="LICENSE_INVALID",t[t.ADVERTISEMENT_ERROR=7]="ADVERTISEMENT_ERROR",t}({}),mu=class extends gf{get name(){return"MediaError"}constructor(t,i,e,s){super(i),this.code=void 0,this.message=void 0,this.cause=void 0,this.systemCode=void 0,this.code=t,this.message=null!=i?i:"Unknown error",this.cause=e,this.systemCode=s,m.captureStackTrace&&m.captureStackTrace(this,this.constructor)}};function Jk(t){AS(t,"MEDIA_ERR_ABORTED",1),AS(t,"MEDIA_ERR_NETWORK",2),AS(t,"MEDIA_ERR_DECODE",3),AS(t,"MEDIA_ERR_SRC_NOT_SUPPORTED",4),AS(t,"MEDIA_ERR_ENCRYPTED",5)}function ar(t){var i,e;return function(t){return t.category===L.CONTENT_PROTECTION}(t)?new mu(5,t.message,null==(i=t.cause)?void 0:i.message,t.systemCode):new mu(Zk(t.code),t.message,null==(e=t.cause)?void 0:e.message)}function Zk(t){if(t===me.MEDIA_ABORTED)return 1;if(t===me.MANIFEST_LOAD_ERROR||t===me.MEDIA_LOAD_ERROR||t===me.SUBTITLE_LOAD_ERROR)return 2;if(t===me.MEDIA_DECODE_ERROR)return 3;if(t===me.MEDIA_NOT_SUPPORTED)return 4;const i=L.fromCode(t);return i===L.NETWORK?2:i===L.SOURCE?4:i===L.LICENSE?6:i===L.CONTENT_PROTECTION?5:i===L.AD?7:3}function $k(t){return new as(tE(t.code),t.message,t)}function tE(t){switch(t){case 1:return me.MEDIA_ABORTED;case 2:return me.NETWORK_ERROR;case 3:return me.MEDIA_DECODE_ERROR;case 4:return me.SOURCE_NOT_SUPPORTED;case 5:return me.CONTENT_PROTECTION_ERROR;case 6:return me.LICENSE_ERROR;case 7:return me.AD_ERROR}}Jk(mu),Jk(mu.prototype),r(),r(),r(),r(),r();var Ws=class extends mS{tt(t){return super.tt(t)}xa(){return MS(this)}};r(),r(),r(),r();var iE=class{get NI(){return this._O}get V(){return this._O.length}get Ca(){return this.hu||(this.hu=function(t){const i=t.NI.map(t=>t.Ca);return i.item=i=>{const e=0|i,s=t.MI(e);return s&&s.Ca||void 0},i}(this)),this.hu}gO(t){this._O.push(t),this.hu&&this.hu.push(t.Ca)}pS(t){_e(this._O,t),this.hu&&_e(this.hu,t.Ca)}MI(t){return this._O[t]}pO(t){return hi(t)?function(t,i){for(const e of i)if(!Ct(t,e))return!1;return!0}(this._O,t):Ct(this._O,t)}hr(){Wt(this._O),this.hu&&Wt(this.hu)}constructor(){this._O=[],this.hu=void 0}};r();var Xh=class extends Fs{xa(){return new eE(this.Ht.Ca)}constructor(t){super(Te.xI),this.Ht=void 0,this.Ht=t}},eE=class extends Eh{constructor(t){super("update"),this.track=void 0,this.track=t}};r();var sE=0;function mi(){return sE++}var nE=0;var rE=0;function hE(){return rE++}var oE=0;function aE(){return oE++}var uE=0;var cE=class extends Ne{get YI(){}get Rt(){return this.We}set Rt(t){this.We!==t&&(this.We=t,this.mO=t,this.So(new Rh(this)))}get mO(){return this.wO.enabled}set mO(t){this.wO.enabled=t}get Ca(){return this.hu||(this.hu=cs(this)),this.hu}get o(){return this.aS}get JI(){return this.yO}get Lt(){return this.wO.kind}get Th(){return this.bO}set Th(t){t!==this.bO&&(this.bO=t,this.So(new Xh(this)))}get bs(){return this.wO.language}get Qk(){return this.Rt?"enabled":"disabled"}get AO(){return this.wO}get $I(){return this._O}get tC(){}set tC(t){}SO(t){this.Rt=t}TO(){this.Rt=this.mO}constructor(t){super(),this.Km=at.Bk,this.wO=void 0,this.aS=void 0,this.bO=void 0,this.yO=void 0,this.We=!1,this._O=void 0,this.hu=void 0,this.wO=t,this.yO=mi(),this.aS=""+uE++,this.bO=t.label,this._O=new iE,this.TO()}};r();var dE=0;var lE=class extends Ne{get YI(){}get Rt(){return this.We}set Rt(t){this.We!==t&&(this.We=t,this.mO=t,this.So(new Rh(this)))}get mO(){return Boolean(this.wO.selected)}set mO(t){this.wO.selected=t}get Ca(){return this.hu||(this.hu=cs(this)),this.hu}get o(){return this.aS}get JI(){return this.yO}get Lt(){return"main"}get Th(){return this.bO}set Th(t){t!==this.bO&&(this.bO=t,this.So(new Xh(this)))}get bs(){return this.wO.language}get Qk(){return this.Rt?"enabled":"disabled"}get AO(){return this.wO}get $I(){return this._O}get tC(){}set tC(t){}TO(){this.Rt=this.mO}SO(t){this.Rt=t}constructor(t){super(),this.Km=at.Mk,this.wO=void 0,this.aS=void 0,this.yO=void 0,this.We=!1,this._O=void 0,this.bO=void 0,this.hu=void 0,this.wO=t,this.yO=mi(),this.aS=""+dE++,this._O=new iE,this.bO=t.label,this.TO()}};r();var fE=class extends gp{constructor(t){super(d.yw),this.sP=void 0,this.sP=t}};r(),r();var dc=function(t){return t[t.NONE=0]="NONE",t[t.LOADING=1]="LOADING",t[t.LOADED=2]="LOADED",t[t.ERROR=3]="ERROR",t}({});r(),r();var vE=function(t){return t.kO="cue",t.EO="region",t.xO="stylesheet",t}({});r(),r();var _E={"line-left":"start",center:"middle","line-right":"end"},gE={start:"line-left",middle:"center",end:"line-right"};function pE(t,i){if("auto"===t)switch(i){case"start":case"left":return"line-left";case"end":case"right":return"line-right";default:return"center"}return t}function mE(t,i){if("auto"===t)switch(i){case"left":return 0;case"right":return 100;default:return 50}return function(t,i){const e="number"==typeof t?t:C(t);return S(e)?i:e}(t,50)}r(),r(),r();var Js=function(t){return t.QL="yo",t.KL="jo",t.xI="er",t}({}),Ee=class extends Fs{constructor(t,i){super(t),this.PO=void 0,this.PO=i}},Ys=class extends Eh{constructor(t,i){super(t),this.cue=void 0,this.cue=i}};function U(t){const i=[Js.QL,Js.KL,Js.xI];let e;const s={get IO(){return t},get track(){return t.Ht.Ca},get id(){return t.o},get uid(){return t.JI},get startTime(){return t.CO},set startTime(i){t.CO=i},get endTime(){return t.RO},set endTime(i){t.RO=i},get content(){return t.U},addEventListener(t,i){const s=vu(t,Ts);e.wn(s,i)},removeEventListener(t,i){const s=vu(t,Ts);e.mn(s,i)}};return e=new _p(s),t.wn(i,t=>e.So(t.Ca)),s}function wE(){}function yE(t){return Gi(U(t),{get align(){return t.DO},get line(){return t.BO},get lineAlign(){return t.MO},get position(){return t.mo},get positionAlign(){return t.LO},get region(){return t.OO?t.OO.Ca:null},get size(){return t.Wy},get snapToLines(){return t.FO},get text(){return t.U},get vertical(){return t.Pt}})}r(),r();var bE=class extends Ee{xa(){return new AE(this.PO.Ca)}constructor(t){super(Js.xI,t)}},AE=class extends Ys{constructor(t){super("update",t)}};r();var Oe=class extends Fs{xa(){return new SE(this.PO.Ca)}constructor(t){super(Te.fI),this.PO=void 0,this.PO=t}},SE=class extends Eh{constructor(t){super("updatecue"),this.cue=void 0,this.cue=t}},TE=.02;function kE(t,i){return rs(t.UO,i.UO,TE)&&rs(t.VO,i.VO,TE)&&t.o===i.o}var Oh=class extends Ne{get CO(){return this.HO}set CO(t){var i,e;this.HO!==t&&(this.HO=t,null==(i=this.WO)||i.qO(this),this.So(new bE(this)),null==(e=this.WO)||e.So(new Oe(this)))}get RO(){return this.zO}set RO(t){var i,e;this.zO!==t&&(this.zO=t,null==(i=this.WO)||i.qO(this),this.So(new bE(this)),null==(e=this.WO)||e.So(new Oe(this)))}get o(){return this.aS}get JI(){return this.yO}get Ca(){return this.hu||(this.hu=this.xa()),this.hu}xa(){return U(this)}get ro(){return this.ho}set ro(t){this.ho=t}get Ht(){return this.WO}set Ht(t){this.WO=t}get U(){return this.GO}set U(t){var i;this.GO!==t&&(this.GO=t,this.So(new bE(this)),null==(i=this.WO)||i.So(new Oe(this)))}get XO(){return this.jO}set XO(t){this.jO=t}QO(t){return this===t||kS(this,t)&&kE(this,t)&&this.KO(t)}KO(t){return Gr(this.U,t.U)}YO(t,i){this.HO=t,this.zO=i,this.UO=t,this.VO=i}kn(){this.Vo()}constructor(t,i,e,s,n){super(),this.yO=void 0,this.aS=void 0,this.UO=void 0,this.VO=void 0,this.HO=void 0,this.zO=void 0,this.hu=void 0,this.WO=void 0,this.ho=!1,this.GO=void 0,this.jO=void 0,this.JO=-1,this.yO=aE(),this.HO=t,this.zO=i,this.UO=t,this.VO=i,this.GO=e,this.jO=Boolean(s),this.aS=null!=n?n:""}};function EE(t,i){return t.U===i.U&&t.BO===i.BO&&t.MO===i.MO&&t.mo===i.mo&&t.LO===i.LO&&t.OO===i.OO&&t.FO===i.FO&&t.Wy===i.Wy&&t.DO===i.DO&&t.Pt===i.Pt}var xE=class extends Oh{get Ca(){return this.hu||(this.hu=yE(this)),this.hu}get Km(){return vE.kO}KO(t){return EE(this,t)}constructor(t,i,e,s,n){super(t,i,e,s,n),this.BO="auto",this.MO="start",this.mo="auto",this.LO="auto",this.OO=void 0,this.FO=!0,this.Wy=100,this.DO="center",this.Pt=""}};function PE(t){const i=t.BO,e=lo(i);return e&&!t.FO&&(i<0||i>100)?100:e?Number(i):t.FO?-1:100}function IE(t){return mE(t.mo,t.DO)}function CE(t){return pE(t.LO,t.DO)}function RE(t){const i=CE(t),e=IE(t);let s;switch(i){case"line-left":s=100-e;break;case"line-right":s=e;break;case"center":s=e<=50?2*e:2*(100-e)}return _.min(t.Wy,s)}function DE(t){return{get id(){return t.o},get lines(){return t.ZO},get regionAnchorX(){return t.$O},get regionAnchorY(){return t.tF},get scrollValue(){return t.iF},get viewportAnchorX(){return t.eF},get viewportAnchorY(){return t.sF},get width(){return t.Ti}}}r(),r();var NE=class{get Ca(){return this.hu||(this.hu=DE(this)),this.hu}get Km(){return vE.EO}constructor(t,i,e,s,n,r,h,o){this.o=void 0,this.Ti=void 0,this.ZO=void 0,this.$O=void 0,this.tF=void 0,this.eF=void 0,this.sF=void 0,this.iF=void 0,this.hu=void 0,this.o=t,this.Ti=i,this.ZO=e,this.$O=s,this.tF=n,this.eF=r,this.sF=h,this.iF=o}};r(),r();var Ur=1e6,BE=class{nF(t){return this.rF()*t}hF(t){return this.oF(t)>0}aF(t){return this.oF(t)>=0}uF(t,i){return this.dF(t).cF(i)}QO(t){return 0===this.oF(t)}lF(t){return this.oF(t)<0}cF(t){return this.oF(t)<=0}fF(){return this.vF()?this._F():this}gF(t){return this.gO(t._F())}dF(t){return this.gF(t).fF()}};function ME(t,i){return t.pF()?i.pF()?hl.rh:hl.Fg:i.pF()?hl.Ug:t.mF()?i.mF()&&t.vF()===i.vF()?hl.rh:t.vF()?hl.Ug:hl.Fg:i.vF()?hl.Fg:hl.Ug}r(),r();var LE=4294967296,OE=LE*LE,FE=OE*OE,UE=FE/2,Ae=class t{static wF(i,e,s){return s?new t(i.toUnsigned(),e.toUnsigned()):new t(i.toSigned(),e.toSigned())}static yF(i){return i.unsigned?new t(i,yo.UZERO):new t(i,i.isNegative()?yo.NEG_ONE:yo.ZERO)}static bF(i,e){if(S(i))return e?t.AF:t.SF;if(e){if(i<0)return t.AF;if(i>=FE)return t.TF}else{if(i<=-UE)return t.kF;if(i+1>=UE)return t.EF}return i<0?t.bF(-i,e)._F():t.wF(yo.fromNumber(i%OE),yo.fromNumber(i/OE),e)}xF(){return this.PF.unsigned}IF(){return this.CF.isZero()&&this.PF.isZero()}vF(){return this.PF.isNegative()}RF(){return this.xF()?t.wF(this.CF,this.PF,!1):this}DF(){return this.xF()?this:t.wF(this.CF,this.PF,!0)}NF(){return this.CF}rF(){return this.vF()?-this._F().rF():this.PF.toNumber()*OE+this.CF.toUnsigned().toNumber()}BF(){return this.CF.toInt()}QO(t){return(this.xF()===t.xF()||this.PF.getHighBits()>>>31!=1||t.PF.getHighBits()>>>31!=1)&&(this.PF.toUnsigned().eq(t.PF.toUnsigned())&&this.CF.toUnsigned().eq(t.CF.toUnsigned()))}oF(t){if(this.QO(t))return hl.rh;const i=this.vF(),e=t.vF();if(i&&!e)return hl.Ug;if(!i&&e)return hl.Fg;if(!this.xF())return this.gF(t).vF()?hl.Ug:hl.Fg;const s=this.DF(),n=t.DF(),r=n.PF.comp(s.PF);return r>0||0===r&&n.CF.gt(s.CF)?hl.Ug:hl.Fg}lF(t){return this.oF(t)<0}cF(t){return this.oF(t)<=0}MF(t){return this.oF(t)>0}LF(t){return this.oF(t)>=0}OF(){return new t(this.CF.not(),this.PF.not())}FF(i){return new t(this.CF.and(i.CF),this.PF.and(i.PF))}UF(i){return new t(this.CF.or(i.CF),this.PF.or(i.PF))}VF(i){const e=127&i;return 0===e?this:e<64?t.wF(this.CF.shl(e),this.PF.shl(e).or(this.CF.shru(64-e)),this.xF()):t.wF(yo.ZERO,this.CF.shl(e-64),this.xF())}HF(i){const e=127&i;return 0===e?this:e<64?t.wF(this.CF.shru(e).or(this.PF.shl(64-e)),this.PF.shr(e),this.xF()):t.wF(this.PF.shr(e-64),this.PF.isNegative()?yo.NEG_ONE:yo.ZERO,this.xF())}WF(i){const e=127&i;return 0===e?this:e<64?t.wF(this.CF.shru(e).or(this.PF.shl(64-e)),this.PF.shru(e),this.xF()):64===e?t.wF(this.PF,yo.ZERO,this.xF()):t.wF(this.PF.shru(e-64),yo.ZERO,this.xF())}gO(i){const e=this.PF.high>>>16,s=65535&this.PF.high,n=this.PF.low>>>16,r=65535&this.PF.low,h=this.CF.high>>>16,o=65535&this.CF.high,a=this.CF.low>>>16,u=65535&this.CF.low,c=i.PF.high>>>16,d=65535&i.PF.high,l=i.PF.low>>>16,f=65535&i.PF.low,v=i.CF.high>>>16,_=65535&i.CF.high,g=i.CF.low>>>16;let p=0,m=0,w=0,y=0,b=0,A=0,S=0,T=0;T+=u+(65535&i.CF.low),S+=T>>>16,T&=65535,S+=a+g,A+=S>>>16,S&=65535,A+=o+_,b+=A>>>16,A&=65535,b+=h+v,y+=b>>>16,b&=65535,y+=r+f,w+=y>>>16,y&=65535,w+=n+l,m+=w>>>16,w&=65535,m+=s+d,p+=m>>>16,m&=65535,p+=e+c,p&=65535;const k=this.xF(),E=yo.fromBits(w<<16|y,p<<16|m,k),x=yo.fromBits(S<<16|T,b<<16|A,k);return t.wF(x,E,k)}gF(t){return this.gO(t._F())}_F(){return this.OF().gO(t.qF)}zF(i){if(this.IF()||i.IF())return this.xF()?t.AF:t.SF;if(this.vF())return i.vF()?this._F().zF(i._F()):this._F().zF(i)._F();if(i.vF())return this.zF(i._F())._F();if(this.PF.isZero()&&0===this.CF.high&&i.PF.isZero()&&0===i.CF.high)return t.yF(this.CF.multiply(i.CF));const e=yo.fromBits(4294967295,0,!0),s=this.CF.and(e),n=this.CF.shru(32),r=this.PF.and(e),h=this.PF.shru(32),o=i.CF.and(e),a=i.CF.shru(32),u=i.PF.and(e),c=i.PF.shru(32);let d=yo.UZERO,l=yo.UZERO,f=yo.UZERO,v=yo.UZERO;d=d.add(s.mul(o)),l=l.add(d.shru(32)),d=d.and(e),l=l.add(n.mul(o)),f=f.add(l.shru(32)),l=l.and(e),l=l.add(s.mul(a)),f=f.add(l.shru(32)),l=l.and(e),f=f.add(r.mul(o)),v=v.add(f.shru(32)),f=f.and(e),f=f.add(n.mul(a)),v=v.add(f.shru(32)),f=f.and(e),f=f.add(s.mul(u)),v=v.add(f.shru(32)),f=f.and(e),v=v.add(h.mul(o)).add(r.mul(a)).add(n.mul(u)).add(s.mul(c)).and(e);const _=yo.fromBits(d.getLowBitsUnsigned(),l.getLowBitsUnsigned(),!0),g=yo.fromBits(f.getLowBitsUnsigned(),v.getLowBitsUnsigned(),!0);return t.wF(_,g,this.xF())}GF(i){let e,s,n=i;if(n.IF())throw new RangeError("division by zero");if(this.IF())return this.xF()?[t.AF,t.AF]:[t.SF,t.SF];if(this.xF()){if(n.xF()||(n=n.DF()),n.MF(this))return[t.AF,this];if(n.MF(this.WF(1)))return s=t.XF,e=this.gF(n),[s,e];s=t.AF}else{if(this.QO(t.kF)){if(n.QO(t.qF)||n.QO(t.jF))return[t.kF,t.SF];if(n.QO(t.kF))return[t.qF,t.SF];{const i=this.HF(1).QF(n).VF(1);return i.QO(t.SF)?s=n.vF()?t.qF:t.jF:(e=this.gF(n.zF(i)),s=i.gO(e.QF(n))),e=this.gF(n.zF(s)),[s,e]}}if(n.QO(t.kF))return this.xF()?[t.AF,this]:[t.SF,this];if(this.vF())return n.vF()?this._F().GF(n._F()):([s,e]=this._F().GF(n),[s._F(),e._F()]);if(n.vF())return[s,e]=this.GF(n._F()),[s._F(),e._F()];s=t.SF}for(e=this;e.LF(n);){let i=_.max(1,_.floor(e.rF()/n.rF()));const r=_.ceil(_.log(i)/_.LN2),h=r<=48?1:2**(r-48);let o=t.bF(i),a=o.zF(n);for(;a.vF()||a.MF(e);)i-=h,o=t.bF(i,this.xF()),a=o.zF(n);o.IF()&&(o=t.qF),s=s.gO(o),e=e.gF(a)}return[s,e]}QF(t){return this.GF(t)[0]}KF(t){return this.GF(t)[1]}toString(i){const e=i||10;if(e<2||e>36)throw new RangeError("radix");if(this.IF())return"0";if(this.vF()){if(this.QO(t.kF)){const i=t.bF(e),s=this.QF(i),n=s.zF(i).gF(this);return s.toString(e)+n.BF().toString(e)}return"-"+this._F().toString(e)}const s=t.bF(e**6,this.xF());let n=this,r="";for(;;){const t=n.QF(s);let i=(n.gF(t.zF(s)).BF()>>>0).toString(e);if(n=t,n.IF())return i+r;for(;i.length<6;)i="0"+i;r=String(i)+r}}constructor(t,i){this.CF=void 0,this.PF=void 0,this.CF=t,this.PF=i}};Ae.SF=Ae.yF(yo.ZERO),Ae.AF=Ae.yF(yo.UZERO),Ae.qF=Ae.yF(yo.ONE),Ae.XF=Ae.yF(yo.UONE),Ae.jF=Ae.yF(yo.NEG_ONE),Ae.EF=Ae.wF(yo.NEG_ONE,yo.MAX_VALUE,!1),Ae.TF=Ae.wF(yo.MAX_UNSIGNED_VALUE,yo.MAX_UNSIGNED_VALUE,!0),Ae.kF=Ae.wF(yo.ZERO,yo.MIN_VALUE,!1),r();var VE=class t{get mF(){return!isFinite(this.YF)}get dd(){return this.YF/this.jD}static JF(i){return new t(_.ceil(i.YF),i.jD)}static ZF(i){return new t(_.floor(i.YF),i.jD)}static tU(t,i){return t.aF(i)?t:i}static iU(t,i){return t.cF(i)?t:i}gO(i){return this.jD>=i.jD?new t(this.YF+i.eU(this.jD).YF,this.jD):new t(this.eU(i.jD).YF+i.YF,i.jD)}hF(t){return t.lF(this)}aF(t){return t.cF(this)}dF(i){if(this.jD>=i.jD){const e=_.abs(this.YF-i.eU(this.jD).YF),s=this.jD;return new t(e,s)}return i.dF(this)}uF(t,i){return this.dF(t).cF(i)}oF(t){return function(t,i){return t.jD>=i.jD?ef(t.YF,i.eU(t.jD).YF):ef(t.eU(i.jD).YF,i.YF)}(this,t)}QO(t){return 0===this.oF(t)}lF(t){return this.oF(t)<0}cF(t){return this.oF(t)<=0}eU(i){return new t(this.YF*(i/this.jD),i)}gF(i){return this.jD>=i.jD?new t(this.YF-i.eU(this.jD).YF,this.jD):new t(this.eU(i.jD).YF-i.YF,i.jD)}sU(i){return new t(this.YF*i,this.jD)}constructor(t,i=1){this.YF=void 0,this.jD=void 0,this.YF=t,this.jD=i}};VE.fd=new VE(1/6,1),VE.SF=new VE(0),VE.nU=new VE(1/0),VE.rU=1e6;var ps=class t extends BE{static hU(i,e){return void 0===e&&(e=Ur),t.bF(i*e,e)}static bF(i,e){return S(i)?t.oU:i===1/0?t.aU:i===-1/0?t.uU:new t(yo.fromNumber(i),e)}static yF(i,e){return new t(i,e)}static cU(i){return t.hU(i.dd,Ur)}static dU(i){return new t(yo.fromNumber(i.getTime()),1e3)}static tU(t,i){return t.aF(i)?t:i}static iU(t,i){return t.cF(i)?t:i}static lU(i,e,s){return t.tU(e,t.iU(s,i))}vF(){return this.XE.isNegative()}IF(){return 0!==this.jD&&this.XE.isZero()}mF(){return 0===this.jD&&!this.XE.isZero()}pF(){return 0===this.jD&&this.XE.isZero()}rF(){if(0===this.jD)return this.XE.isZero()?NaN:this.XE.isNegative()?-1/0:1/0;const t=this.XE.divide(this.jD),i=this.XE.subtract(t.multiply(this.jD));return t.toNumber()+i.toNumber()/this.jD}NF(){if(0===this.jD)throw new m("Failed to convert timestamp");return this.XE}fU(){return new Date(0===this.jD?NaN:this.eU(1e3).XE.toNumber())}vU(){return new VE(0===this.jD?this.rF():this.XE.toNumber(),this.jD)}eU(i,e){void 0===e&&(e=Ss._U);const s=this.jD;if(s===i)return this;if(0===s)return this;const n=Zl(s,i),r=function(t,i,e){const[s,n]=t.GF(i);if(n.IF())return s;if(e===Ss._U)return n.vF()?s.gF(Ae.qF):s;if(e===Ss.gU)return n.vF()?s:s.gO(Ae.qF);{const t=n.zF(Ae.bF(2));return t.vF()?t._F().lF(i)?s:s.gF(Ae.qF):t.lF(i)?s:s.gO(Ae.qF)}}(Ae.yF(this.XE).zF(Ae.bF(i/n)),Ae.bF(s/n),e);return new t(r.NF(),i)}oF(t){if(this===t)return hl.rh;if(0===this.jD||0===t.jD)return ME(this,t);if(this.IF())return t.IF()?hl.rh:t.vF()?hl.Fg:hl.Ug;if(t.IF())return this.vF()?hl.Ug:hl.Fg;const i=_.min(this.jD,t.jD),e=this.eU(i,Ss.pU).XE,s=t.eU(i,Ss.pU).XE;return e.compare(s)}_F(){return 0===this.jD?function(t){0;return t.pF()?t:t.vF()?ps.aU:ps.uU}(this):new t(this.XE.negate(),this.jD)}gO(i){if(0===this.jD||0===i.jD)return function(t,i){0;if(t.pF()||i.pF())return ps.oU;if(t.mF()&&i.mF())return t.vF()===i.vF()?t:ps.oU;return t.mF()?t:i}(this,i);if(this.IF())return i;if(i.IF())return this;const e=_.max(this.jD,i.jD),s=this.eU(e,Ss.pU),n=i.eU(e,Ss.pU);return new t(s.XE.add(n.XE),e)}zF(i){if(this.pF()||S(i))return t.oU;if(this.mF()||!isFinite(i)){if(this.IF()||0===i)return t.oU;{const e=this.vF()?t.uU:t.aU;return i<0?e._F():e}}return this.IF()?this:new t(0===i?yo.ZERO:this.XE.multiply(i),this.jD)}QF(i){if(this.pF()||S(i))return t.oU;if(this.mF())return isFinite(i)?0===i?1/i<0?this._F():this:i<0?this._F():this:t.oU;if(!isFinite(i))return new t(yo.ZERO,this.jD);if(this.IF())return 0===i?t.oU:new t(yo.ZERO,this.jD);if(0===i){const e=this.vF()?t.uU:t.aU;return 1/i<0?e._F():e}return new t(this.XE.divide(i),this.jD)}mU(){return[this.XE.low,this.XE.high,this.jD]}constructor(t,i){super(),this.XE=void 0,this.jD=void 0,this.XE=t.toSigned(),this.jD=i>>>0}};ps.SF=new ps(yo.ZERO,Ur),ps.oU=new ps(yo.ZERO,0),ps.aU=new ps(yo.ONE,0),ps.uU=new ps(yo.NEG_ONE,0),r();var HE=class t extends BE{static hU(i,e){return void 0===e&&(e=Ur),t.bF(i*e,e)}static bF(i,e){return S(i)?t.oU:i===1/0?t.aU:i===-1/0?t.uU:new t(BigInt(_.floor(i)),e)}static yF(i,e){return new t(BigInt(i.high)<<BigInt(32)|BigInt(i.low>>>0),e)}static cU(i){return t.hU(i.dd,Ur)}static dU(i){return t.bF(i.getTime(),1e3)}static get SF(){return t.wU||(t.wU=new t(BigInt(0),Ur)),t.wU}static get oU(){return t.yU||(t.yU=new t(BigInt(0),0)),t.yU}static get aU(){return t.bU||(t.bU=new t(BigInt(1),0)),t.bU}static get uU(){return t.AU||(t.AU=new t(BigInt(-1),0)),t.AU}static tU(t,i){return t.aF(i)?t:i}static iU(t,i){return t.cF(i)?t:i}static lU(i,e,s){return t.tU(e,t.iU(s,i))}vF(){return this.XE<BigInt(0)}IF(){return 0!==this.jD&&this.XE===BigInt(0)}mF(){return 0===this.jD&&this.XE!==BigInt(0)}pF(){return 0===this.jD&&this.XE===BigInt(0)}rF(){if(0===this.jD)return this.XE===BigInt(0)?NaN:this.XE<BigInt(0)?-1/0:1/0;const t=this.XE/BigInt(this.jD),i=this.XE-t*BigInt(this.jD);return Number(t)+Number(i)/this.jD}NF(){if(0===this.jD)throw new m("Failed to convert timestamp");return this.SU()}SU(){const t=this.XE&BigInt(4294967295),i=this.XE>>BigInt(32)&BigInt(4294967295);return yo.fromBits(Number(t),Number(i))}fU(){return new Date(0===this.jD?NaN:Number(this.eU(1e3).XE))}vU(){return new VE(0===this.jD?this.rF():Number(this.XE),this.jD)}eU(i,e){void 0===e&&(e=Ss._U);const s=this.jD;if(s===i)return this;if(0===s)return this;const n=Zl(s,i),r=function(t,i,e){const s=t/i,n=t-s*i;if(n===BigInt(0))return s;if(e===Ss._U)return n<BigInt(0)?s-BigInt(1):s;if(e===Ss.gU)return n<BigInt(0)?s:s+BigInt(1);{const t=n*BigInt(2);return t<BigInt(0)?-t<i?s:s-BigInt(1):t<i?s:s+BigInt(1)}}(this.XE*BigInt(i/n),BigInt(s/n),e);return new t(r,i)}oF(t){if(this===t)return hl.rh;if(0===this.jD||0===t.jD)return ME(this,t);if(this.IF())return t.IF()?hl.rh:t.vF()?hl.Fg:hl.Ug;if(t.IF())return this.vF()?hl.Ug:hl.Fg;const i=_.min(this.jD,t.jD),e=this.eU(i,Ss.pU).XE,s=t.eU(i,Ss.pU).XE;return e>s?hl.Fg:e<s?hl.Ug:hl.rh}_F(){return 0===this.jD?function(t){0;return t.pF()?t:t.vF()?HE.aU:HE.uU}(this):new t(-this.XE,this.jD)}gO(i){if(0===this.jD||0===i.jD)return function(t,i){0;if(t.pF()||i.pF())return HE.oU;if(t.mF()&&i.mF())return t.vF()===i.vF()?t:HE.oU;return t.mF()?t:i}(this,i);if(this.IF())return i;if(i.IF())return this;const e=_.max(this.jD,i.jD),s=this.eU(e,Ss.pU),n=i.eU(e,Ss.pU);return new t(s.XE+n.XE,e)}zF(i){if(this.pF()||S(i))return t.oU;if(this.mF()||!isFinite(i)){if(this.IF()||0===i)return t.oU;{const e=this.vF()?t.uU:t.aU;return i<0?e._F():e}}return this.IF()?this:new t(0===i?BigInt(0):this.XE*BigInt(i),this.jD)}QF(i){if(this.pF()||S(i))return t.oU;if(this.mF())return isFinite(i)?0===i?1/i<0?this._F():this:i<0?this._F():this:t.oU;if(!isFinite(i))return new t(BigInt(0),this.jD);if(this.IF())return 0===i?t.oU:new t(BigInt(0),this.jD);if(0===i){const e=this.vF()?t.uU:t.aU;return 1/i<0?e._F():e}return new t(this.XE/BigInt(i),this.jD)}mU(){const t=this.SU();return[t.low,t.high,this.jD]}constructor(t,i){super(),this.XE=void 0,this.jD=void 0,this.XE=BigInt.asIntN(64,t),this.jD=i>>>0}};HE.wU=void 0,HE.yU=void 0,HE.bU=void 0,HE.AU=void 0;var Ss=function(t){return t[t._U=0]="_U",t[t.gU=1]="gU",t[t.pU=2]="pU",t}({}),ul=function(){try{return"function"==typeof BigInt&&"bigint"==typeof BigInt(0)}catch(t){return!1}}()?HE:ps;function WE(t,i){return t.oF(i)}function qE(t,i){return void 0!==t?void 0!==i?ul.iU(t,i):t:i}r();var zE=2**33,GE=Oc(()=>ul.bF(zE,9e4)),XE=Oc(()=>GE().QF(2));r();var jE={TU:0,kU:1/0,EU:0},QE=["WEBVTT","WEBVTT ","WEBVTT\t","WEBVTT\n"],KE=[" ","\t","\n","\f","\r"],YE=/^\d*$/,JE=/.*[0-9]+.*/,ZE=/^[\d.-]+$/,$E=/(^\.|\.$)/,tx=/(\D\.|\.\D)/;function ix(t,i,e){void 0===i&&(i=jE),void 0===e&&(e=!0);return ex(hm(dh(t),new oi),i,e)}function ex(t,i,e){void 0===i&&(i=jE),void 0===e&&(e=!0);const s={L:[],xU:[],PU:[]},n=sx(t),r=new oi,h=!1;if(fx(n),Ue(n,t=>"\n"!==t,r),r.ac>=n.length)return s;if(r.Ly(1),"\n"!==n.charAt(r.ac)){ax(nx(n,r,h,!0,s,i,e),s)}else r.Ly(1);for(Ue(n,t=>"\n"===t,r);r.ac<n.length;){ax(nx(n,r,h,!1,s,i,e),s),Ue(n,t=>"\n"===t,r)}return s}function sx(t){const i=zh(t,"\0"," "),e=zh(i,"\r\n","\n");return zh(e,"\r","\n")}function Ue(t,i,e){const s=e.ac;for(;e.ac<t.length&&i(t.charAt(e.ac));)e.Ly(1);return t.substring(s,e.ac)}function nx(t,i,e,s,n,r,h){let o,a=0,u=i.ac,c="",d=!1,l=!1,f=null,v=null,_=null;for(;!d;)if(o=Ue(t,t=>"\n"!==t,i),a++,i.ac>=t.length?d=!0:i.Ly(1),nl(o,"--\x3e")){if(s||1!==a&&(2!==a||l)){i.Oy(u);break}l=!0,u=i.ac,f=new xE(0,0,"",!1,c);try{ux(o,n.xU,f,r,h),c=""}catch(t){zd.um(t),f=null}}else{if(""===o)break;s&&Xt(o,"X-TIMESTAMP-MAP")&&(n.IU=rx(o)),s||2!==a||e||(Jh("STYLE",c.replace(/ /g,""))?(v={Km:vE.xO},c=""):Jh("REGION",c.replace(/ /g,""))&&(_=new NE("",100,3,0,100,0,100,""),c="")),c&&(c+="\n"),c+=o,u=i.ac}if(f)return f.U=c,f;if(v);else if(_)return function(t,i){const e=t.split(/\s/),s=":";for(const t of e)if(0!==t.length&&nl(t,s)&&t.charAt(0)!==s&&t.charAt(t.length-1)!==s){const e=t.indexOf(s),n=t.substring(0,e),r=t.substring(e+1,t.length);switch(n.toUpperCase()){case"ID":kx(r,i);break;case"WIDTH":Px(r,i);break;case"LINES":xx(r,i);break;case"REGIONANCHOR":{const t=Tx(r);t&&(i.$O=t[0],i.tF=t[1]);break}case"VIEWPORTANCHOR":{const t=Tx(r);t&&(i.eF=t[0],i.sF=t[1]);break}case"SCROLL":Ex(r,i)}}}(c,_),_;return null}function rx(t){const i=t.split("=")[1].trim().split(","),e=ox(i[0].trim(),"MPEGTS")?i[0]:i[1],s=ox(i[0].trim(),"LOCAL")?i[0]:i[1];var n;return{CU:hx(Number(e.split(/:(.*)/)[1].trim())||0),bh:ul.hU(null!=(n=Ku(s.split(/:(.*)/)[1].trim(),new oi))?n:0)}}function hx(t){return ul.bF(t,9e4)}function ox(t,i){return Xt(t,i)}function ax(t,i){t&&function(t){return"cue"===t.Km}(t)?i.L.push(t):t&&function(t){return"region"===t.Km}(t)?i.xU.push(t):t&&function(t){return"stylesheet"===t.Km}(t)&&i.PU.push(t)}function ux(t,i,e,s,n){const r=new oi;_x(t,r);const h=cx(Ku(t,r),s,n);if(_x(t,r),"--\x3e"!==t.substring(r.ac,r.ac+3))throw m("Something went wrong with parsing a WebVTT Cue");r.Ly(3),_x(t,r);const o=cx(Ku(t,r),s,n);e.YO(h,o);!function(t,i,e){const s=t.split(/\s/),n=":";for(const t of s)if(0!==t.length&&nl(t,n)&&t.charAt(0)!==n&&t.charAt(t.length-1)!==n){const s=t.indexOf(n),r=t.substring(0,s),h=t.substring(s+1,t.length);switch(r.toUpperCase()){case"REGION":yx(h,i,e);break;case"VERTICAL":Ax(h,i);break;case"D":Sx(h,i);break;case"LINE":case"L":mx(h,i);break;case"POSITION":case"T":wx(h,i);break;case"SIZE":case"S":bx(h,i);break;case"ALIGN":case"A":px(h,i)}}}(t.substring(r.ac,t.length),e,i)}function cx(t,i,e){return e?t+i.TU:t}function dx(t){return/^[0-9]$/.test(t)}function Ku(t,i){const e=zh(t,",",".");let s,n,r,h=!1;if(i.ac>=e.length||!dx(e.charAt(i.ac)))throw new m("Something went wrong with parsing a WebVTT Cue timestamp");const o=Ue(e,dx,i),a=x(o,10);if((o.length>2||a>59)&&(h=!0),i.ac>=e.length||":"!==e.charAt(i.ac))throw new m("Something went wrong with parsing a WebVTT Cue timestamp");i.Ly(1);const u=Ue(e,dx,i);if(2!==u.length)throw new m("Something went wrong with parsing a WebVTT Cue timestamp");const c=x(u,10);if(h||i.ac<e.length&&":"===e.charAt(i.ac)){if(i.ac>=e.length||":"!==e.charAt(i.ac))throw new m("Something went wrong with parsing a WebVTT Cue timestamp");i.Ly(1);const t=Ue(e,dx,i);if(2!==u.length)throw new m("Something went wrong with parsing a WebVTT Cue timestamp");s=a,n=c,r=x(t,10)}else s=0,n=a,r=c;if(i.ac>=e.length||"."!==e.charAt(i.ac))throw new m("Something went wrong with parsing a WebVTT Cue timestamp");i.Ly(1);const d=Ue(e,dx,i),l=x(d,10);if(c>59||r>59)throw new m("Something went wrong with parsing a WebVTT Cue timestamp");return 60*s*60+60*n+r+l/1e3}function lx(t){return fx(sx(t))}function fx(t){if(t.length<6)return!1;for(const i of QE)if(Xt(t,i))return!0;return!1}function vx(t){return Ct(KE,t)}function _x(t,i){for(;i.ac<t.length&&vx(t.charAt(i.ac));)i.Ly(1)}function gx(t){const i=t.lastIndexOf("%");if(i>-1){const e=C(t.substring(0,i));if(!S(e)&&e>=0&&e<=100)return e}return null}function px(t,i){const e=t.toLowerCase();switch(e){case"start":case"center":case"end":case"left":case"right":i.DO=e;break;case"middle":i.DO="center"}}function mx(t,i){let e,s;const n=t.indexOf(",");if(n>=0?(e=t.substring(0,n),s=t.substring(n+1,t.length)):(e=t,s=""),!JE.test(e))return;let r,h;if(Rc(e,"%")){const t=gx(e);if(null===t)return;r=t,h=!1}else{if(!ZE.test(e)||e.lastIndexOf("-")>0)return;const t=e.indexOf(".");if(t>=0&&(t!==e.lastIndexOf(".")||!tx.test(e)||$E.test(e)))return;if(r=C(e),S(r))return;h=!0}switch(i.BO=r,i.FO=h,s=s.toLowerCase(),s){case"start":case"center":case"end":i.MO=s;break;case"middle":i.MO="center"}}function wx(t,i){let e,s;const n=t.indexOf(",");n>=0?(e=t.substring(0,n),s=t.substring(n+1,t.length)):(e=t,s="");const r=gx(e);if(null!==r)switch(i.mo=r,s=s.toLowerCase(),s){case"line-left":case"center":case"line-right":case"auto":i.LO=s;break;case"start":i.LO="line-left";break;case"middle":i.LO="center";break;case"end":i.LO="line-right"}}function yx(t,i,e){const s=dr(e,i=>i.o===t);void 0!==s&&(i.OO=s)}function bx(t,i){const e=gx(t);null!==e&&(i.Wy=e)}function Ax(t,i){switch(t.toLowerCase()){case"rl":case"vertical:rl":case"vertical-rl":i.Pt="rl";break;case"lr":case"vertical:lr":case"vertical-lr":i.Pt="lr";break;default:i.Pt=""}}function Sx(t,i){"VERTICAL"===t.toUpperCase()?i.Pt="rl":"VERTICAL-LR"===t.toUpperCase()&&(i.Pt="lr")}function Tx(t){if(t.indexOf(",")>=0){const i=gx(t.substring(0,t.indexOf(","))),e=gx(t.substring(t.indexOf(",")+1,t.length));return[No(i||0,0,100),No(e||100,0,100)]}return null}function kx(t,i){i.o=t}function Ex(t,i){"up"===t.toLowerCase()&&(i.iF="up")}function xx(t,i){YE.test(t)&&(i.ZO=x(t))}function Px(t,i){const e=gx(t);null!==e&&(i.Ti=e)}function Ix(t){return t&&"ix"in t?t.ix:t}r(),r(),r();var Cx=class extends Oh{get RU(){return this.DU}get NU(){return this.BU}get xU(){return this.MU}get LU(){return this.OU}get Ca(){return this.hu||(this.hu=function(t){return Gi(U(t),{get extent(){return t.RU},get styles(){return t.NU},get regions(){return t.xU},get metadata(){return Ix(t.LU)},get content(){return Ix(t.U)}})}(this)),this.hu}KO(t){return!!Gr(this.RU,t.RU)&&(!!Gr(this.NU,t.NU)&&(!!Gr(this.xU,t.xU)&&(this.LU&&t.LU?!!this.LU.jE(t.LU)&&(this.U&&t.U?this.U.jE(t.U):this.U===t.U):this.LU===t.LU)))}constructor(t,i,e,s,n,r,h,o){super(t,i,e,s),this.DU=void 0,this.BU=void 0,this.MU=void 0,this.OU=void 0,this.DU=n,this.BU=r,this.MU=h,this.OU=o||void 0}};r();var Rx=class{get FU(){return this.Lf.QE(!0)}get CO(){return this.UU}get RO(){return this.VU}constructor(t,i,e){this.Lf=void 0,this.UU=void 0,this.VU=void 0,this.UU=t,this.VU=i,JA(e)?this.Lf=function(t,i,e){for(const t of["begin","end","dur"])e.lx(t);return e}(0,0,e):this.Lf=e}};r();var Dx="http://www.w3.org/XML/1998/namespace";function Nx(t,i,e,s){let n=t.tx(e,i);return 0===n.length&&(n=t.ZE(s+":"+i)),n}function Bx(t){const i={};for(const e of t.nx)i[e.WE]=e.XE;return i}var Mx=/^(\d\d+):(\d\d):(\d+)((\.(\d+))?|(:(\d\d+)(\.(\d+))?))$/,Lx=/^(\d+)(\.(\d+))?(h|m|s|ms|f|t)$/,Ox="http://www.w3.org/ns/ttml";function Fx(t,i,e,s){void 0===e&&(e=jE),void 0===s&&(s=Yy);let n=[];const r=dh(t);return s===Jy?n=function(t,i,e){const s=Hn.PD(t),n=wT(s,ui.WR);if(!n)return[];return Hx(dh(n.lk),i,e)}(r,i,e):s===Yy&&(n=Hx(r,i,e)),n}function Ux(t,i,e){return void 0===e&&(e=jE),Wx(t,i,e)}function Vx(t,i){const e=Kx(i.FU),s={};for(const i of e)s[i]=t[i];return s}function Hx(t,i,e){return Wx(hm(t,new oi),i,e)}function Wx(t,i,e){const s=[];let n;try{n=zd.HE(t)}catch(t){return s}const r=n.mx;if("tt"!==r.WE)return s;const h=r.tx(Ox,"head")[0],o=r.tx(Ox,"body")[0];if(!o||!h)return s;const a=zx(r.ox("tts:extent")),u=a?{width:a[0],height:a[1]}:void 0,c=function(t){const i={},e=t.tx(Ox,"styling")[0],s=e&&e.tx(Ox,"style")||[];for(const t of s){i[t.ux(Dx,"id")]=Bx(t)}return i}(h),d=function(t){const i={},e=t.tx(Ox,"layout")[0],s=e&&e.tx(Ox,"region")||[];for(const t of s){const e=t.ux(Dx,"id");if(!e)continue;i[e]=Bx(t);const s=Qx(t);for(const t in s)_u.call(s,t)&&(i[e][t]=s[t])}return i}(h),l=a?function(t,i){const e=ru(t);for(const t of w.keys(e)){const s=zx(e[t].extent);if(s){const n=qx(s[0],i[0]),r=qx(s[1],i[1]);e[t].extent=n+" "+r}const n=zx(e[t].origin);if(n){const s=qx(n[0],i[0]),r=qx(n[1],i[1]);e[t].origin=s+" "+r}}return e}(d,a):d,f=h.tx(Ox,"metadata")[0],v=Gx(o,e.TU,e.kU,e.EU);for(const t of v){const i=Vx(l,t);s.push(new Cx(t.CO,t.RO,t.FU,!1,u,c,i,f))}return s}function qx(t,i){return t/i*100+"%"}function zx(t){if(!t)return;const i=t.split(" ",2);if(2!==i.length)return;const[e,s]=i;if(!Rc(e,"px")||!Rc(s,"px"))return;return[Number(e.slice(0,-2)),Number(s.slice(0,-2))]}function Gx(t,i,e,s){let n,r=i,h=e,o=[];const a=[];if(JA(t)){var u,c;r=null!=(u=jx(t.ox("begin"),s))?u:r,n=jx(t.ox("dur"),0),h=null!=(c=jx(t.ox("end"),s))?c:void 0!==n?r+n:h;const i=t.KE;for(let e=0;e<i.length;e++)("body"===t.WE||"div"===t.WE)&&i[e].VE>1||(o=o.concat(Gx(i[e],r,h,s)))}const d=function(t,i,e){const s=[];s.push(t,i);for(const t of e)s.push(t.CO,t.RO);s.sort(Nu);let n=s.length;for(let t=0;t<n-1;t++)s[t+1]===s[t]&&(Ra(s,t+1),t--,n=s.length);return s}(r,h,o);for(let i=0;i<d.length-1;i++){const e=Xx(d[i],d[i+1],o);if(e.length<=0&&Yx(t)){const e=t.QE(!1);a.push(new Rx(d[i],d[i+1],e))}else if(e.length>0){const s=t.QE(!1);e.forEach(t=>s.sx(t.FU)),a.push(new Rx(d[i],d[i+1],s))}}return a}function Xx(t,i,e){const s=[];for(let n=0;n<e.length;n++){const r=e[n].CO,h=e[n].RO;(r>=t&&h<=i||r<i&&h>=i||r<t&&h>t)&&s.push(e[n])}return s}function jx(t,i){if(t){if(Mx.test(t)){const e=Mx.exec(t);if(!e)return;const s=Number(e[1])||0,n=Number(e[2])||0,r=Number(e[3])||0,h=e[6];return 3600*s+60*n+r+(h?Number(h)*.1**h.length:0)+i}if(Lx.test(t)){const e=Lx.exec(t);if(!e)return;const s=Number(e[1]);let n;switch(e[4]){case"h":n=3600*s;break;case"m":n=60*s;break;case"s":n=s;break;case"ms":n=.001*s;break;default:n=NaN}return n+i}}}function Qx(t){const i={},e=t.ZE("style")||[];for(const t of e){const e=Bx(t);for(const t in e)_u.call(e,t)&&(i[t]=e[t])}return i}function Kx(t){let i,e=[];if(JA(t)){i=t.ox("region"),i&&e.push(i);const s=t.KE;for(let t=0;t<s.length;t++)e=e.concat(Kx(s[t]))}return e}function Yx(t){if(JA(t)){const i=t.WE.toUpperCase(),e=Boolean(t.ox("smpte:backgroundImage"));return"BR"===i||e}return t.VE===Xu.LT}function Jx(t){const i=function(t){try{return zd.HE(t).mx}catch(t){}}(t);return"tt"===(null==i?void 0:i.WE)}r(),r();var bc=class extends mS{tt(t){return super.tt(t)}it(t){const i=super.it(t);return i&&(t.Qk=xh.Nh),i}xa(){return US(this)}};r(),r();var us=function(t){return t.HU="subtitles",t.WU="captions",t.qU="descriptions",t.Yn="chapters",t.zU="metadata",t.GU="thumbnails",t}({}),Zx=["subtitles","captions","descriptions","chapters","metadata","thumbnails"];function $x(t){return"string"==typeof t&&Ct(Zx,t)}function tP(t,i){return!(!$x(t)||!$x(i))&&(t===i||"subtitles"===t&&"captions"===i||"captions"===t&&"subtitles"===i)}r();var iP=class extends as{constructor(t,i,e,s,n){super(t,i,n),this.url=void 0,this.status=void 0,this.url=e,this.status=s}};function eP(t){return t===us.HU||t===us.WU}function sP(t){return t.some(nP)}function nP(t){return nl(t,"stpp")}function rP(t){return t.some(hP)}function hP(t){return nl(t,"vtt")||nl(t,"wvtt")}function oP(t,i){return To(t)&&rP(i)}function aP(t,i){return t===us.GU||t===us.zU&&i===us.GU}function uP(t,i,e,s){for(const n of t.L.NI){if(n.CO>e)break;i<=n.RO&&!Ct(s,n)&&s.push(n)}}function cP(t,i){return xc(t.JI,i.JI)}function dP(t,i,e,s){const n=function(t){switch(t){case nh.WEBVTT:return"WebVTT";case nh.SRT:return"SRT";case nh.TTML:return"TTML";default:return""}}(t);return new iP(me.SUBTITLE_PARSE_ERROR,"Could not parse the "+(n?n+" ":"")+"subtitle file.",i,e,s)}function Re(t,i){const e=[];for(const s of t.L.NI)if(s.RO<=i)e.push(s);else if(s.CO>=i)break;for(const i of e)t.XU(i)}function lP(t,i){if(t.V>0){const e=t.Tn(0),s=_.max(0,e-10);for(const t of i)t.jU(s)}}var ms=class extends Ne{get EU(){return this.QU}set EU(t){this.QU=t;for(const i of this.Z.NI)i.EU=t}tt(t){t.wn(Te.pa,this.KU),t.EU=this.EU,this.Z.tt(t),this.YU(t)}it(t){t.mn(Te.pa,this.KU),t.Qk=xh.Nh,this.Z.it(t)}JU(t){}ZU(t){}YU(t){t.Qk!==xh.Nh?this.JU(t):this.ZU(t)}$U(){for(const t of this.Z.NI)t.mn(Te.pa,this.KU),t.kn()}jU(t){if(t>0)for(const i of this.Z.NI)Re(i,t)}tV(t){const i=this.iV;if(t===i)return;this.iV=t;const e=this.Z.NI.slice();for(const s of e){const e=this.eV(s,i,t);s!==e&&(this.it(s),this.tt(e),s.kn())}}hr(){return this.$U(),this.Z.hr(),Promise.resolve()}async kn(){this.Vo(),await this.hr(),this.Z.kn()}constructor(t){super(),this.iV=void 0,this.Z=new bc,this.QU=0,this.KU=t=>{const i=t.Ht;this.YU(i)},this.iV=t}};function ht(t,i,e){const s=e.sI(t.Lt,t.o,t.Th,t.bs,t.sV,t.Km,t.nC,t.ZI);s.rC=t.rC,s.AP=t.AP,s.eC=t.eC,s.EU=t.EU;const n=t.L.NI.slice();for(const i of n)t.XU(i),s.nV(i);return s.Qk=t.Qk,i.rV(t),s}r();var fP=class extends Oi{get error(){return this.errorObject.message}xa(){return this}constructor(t){super(hc.ma),this.errorObject=void 0,this.errorObject=t}},eu=class extends ms{hV(t){if(!t.src)return;const i=t.kind||us.HU,e=this.iV.sI(i,t.id,t.label,t.srclang,t.default);return e.rC=Vn(t.src),this.tt(e),e}async oV(t,i){t.AP=dc.LOADING;const e=new ro({Yu:t.rC,fk:Bi.LT,Hk:Qe.GET,Yg:i});let s,n;try{const t=await this.aV.vk(e);n=t.dk,s=await t.HT()}catch(i){return sa(i),t.AP=dc.ERROR,void t.So(new fP(function(t,i){let e=i,s=0;if(Ei(t)&&t.name===EA.rE)e=t.vk.Yu;else if(Qn(t)){const i=t.uE;if(e=i.wk,s=i.dk,0===s)return new iP(me.SUBTITLE_CORS_ERROR,"Could not load the subtitle file. Make sure the source is set correctly and that CORS support is enabled.",e,s,t)}return new iP(me.SUBTITLE_LOAD_ERROR,"Could not load the subtitle file.",e,s,t)}(i,t.rC)))}try{const i=function(t){return lx(t)?nh.WEBVTT:Jx(t)?nh.TTML:nh.SRT}(s);t.Km=i;let e=[];if(i===nh.WEBVTT||i===nh.SRT){e=ex(s).L}else i===nh.TTML&&(e=Ux(s,t));for(const i of e)t.nV(i)}catch(i){return sa(i),t.AP=dc.ERROR,void t.So(new fP(dP(t.Km,t.rC,n,i)))}t.AP=dc.LOADED}JU(t){Ct(this.Z.NI,t)&&t.AP===dc.NONE&&this.oV(t,this.uV.Yg).catch(bu)}Un(){}eV(t,i,e){return ht(t,i,e)}async hr(){this.uV.Zg(),this.uV=new Zc;for(const t of this.Z.NI)this.iV.rV(t);await super.hr()}constructor(t,i){super(t),this.aV=void 0,this.uV=new Zc,this.aV=i}};function vP(t){return"TXXX"===t.id||"TXX"===t.id}r(),r();var _P=class extends ms{cV(){this.dV.wn(N.rI,this.lV),this.dV.wn(N.oI,this.fV)}vV(){this.dV.mn(N.rI,this.lV),this.dV.mn(N.oI,this.fV)}_V(t){const i=t.L.NI[0];if(!gP(i))return;const e=function(t){const i=t.match(pP);if(!i)return;return{Ht:i[1],bs:i[2]}}(i.U.description),s=e.Ht,n=e.bs;if(this.gV(s,n))return;const r=this.iV.sI(us.HU,t.o,s,n,!1,nh.TTML);this.tt(r),this.pV.set(t.JI,r);for(const i of t.L.NI)gP(i)&&this.mV(i);t.wn(Te.uI,this.wV)}gV(t,i){return this.Z.NI.some(e=>e.Th===t&&e.bs===i)}mV(t){if(!t.Ht)return;const i=this.pV.get(t.Ht.JI),e=Ux(t.U.text,i,{TU:0,kU:1/0,EU:t.CO});for(const t of e)i.nV(t)}eV(t,i,e){const s=ht(t,i,e);return this.pV.forEach((i,e)=>{i===t&&this.pV.set(e,s)}),s}async hr(){for(const t of this.dV.NI)t.mn(Te.kI,this.lV),t.mn(Te.uI,this.yV),t.mn(Te.uI,this.wV);for(const t of this.Z.NI)this.iV.rV(t);this.pV.clear(),await super.hr()}async kn(){this.vV(),await super.kn()}constructor(t,i){super(t),this.dV=void 0,this.pV=void 0,this.bV=void 0,this.lV=void 0,this.yV=void 0,this.fV=void 0,this.wV=void 0,this.dV=i,this.pV=re(),this.bV=t=>{t.mn(Te.kI,this.lV),t.Km?t.Km===nh.ID3&&(t.mn(Te.uI,this.yV),0!==t.L.V?this._V(t):t.wn(Te.uI,this.yV)):t.wn(Te.kI,this.lV)},this.lV=t=>{this.bV(t.Ht)},this.yV=t=>{this.bV(t.PO.Ht)},this.fV=t=>{const i=t.Ht;if(i.Km!==nh.ID3||!this.pV.has(i.JI))return;const e=this.pV.get(i.JI);this.it(e),this.iV.rV(e),i.mn(Te.kI,this.lV),i.mn(Te.uI,this.yV),i.mn(Te.uI,this.wV)},this.wV=t=>{gP(t.PO)&&this.mV(t.PO)},this.cV()}};function gP(t){return function(t){return vP(t)&&pP.test(t.description)}(t.U)}var pP=/^Track:(.+),Lang:(.+)$/;function mP(t,i){for(const e of t)if(e.Lt===i&&e.sV)return e}function wP(t,i){yP(mP(t.NI,i))}function yP(t){void 0!==t&&(t.Qk=xh.Kn)}function bP(t,i){const e=mP(t.NI,i)||function(t,i){for(const e of t)if(e.Lt===i)return e}(t.NI,i);yP(e)}function AP(t){for(const i of Zx)i===us.Yn?bP(t,i):wP(t,i)}r(),r();var Vs=class extends gp{constructor(){super(d.Jw)}};r(),r();var O=function(t){return t[t.AV=0]="AV",t[t.SV=1]="SV",t}({});r(),r();var SP=class extends gp{constructor(t){super(Jr.xM),this.currentTime=void 0,this.currentTime=t}};r();var mo=class extends gp{constructor(t){super(Jr.PM),this.currentTime=void 0,this.currentTime=t}},TP=[Jr.AI,Jr.PM,d.uo,d.jw],_s=class extends Ne{TV(t,i){!this.kV&&i>=Lr.Qn&&(this.kV=!0,this.So(new Tt(t,i)))}EV(t,i){!this.xV&&i>=Lr.GL&&(this.xV=!0,this.So(new M(t,i)))}PV(t,i){this.CV||(i>=Lr.XL&&this.RV<Lr.XL&&!this.DV.lP||this.NV&&i>=Lr.XL)&&this.So(new mo(t))}BV(t,i){!this.MV(i)||this.DV.Qx||this.DV.lt||this.So(new SP(t))}LV(t,i){this.RV<=Lr.GL&&i>=Lr.XL&&this.So(new Is(t,i))}OV(t,i){i===Lr.jL&&this.So(new Zi(t,i))}MV(t){const i=!this.DV.lP&&t<=Lr.GL,e=!this.FV&&this.RV<=Lr.GL;return i&&!e}get NV(){return!this.DV.lP&&this.FV}hr(){this.RV=Lr.zL,this.FV=!0,this.xV=!1,this.kV=!1}kn(){this.Vo(),this.CV&&this.DV.mn(Jr.PM,this.VV),this.DV.mn(d.uo,this.HV),this.DV.mn(d.jw,this.WV),this.DV.mn(Jr.AI,this.qV)}constructor(t,i=!1){super(),this.DV=void 0,this.CV=void 0,this.RV=void 0,this.FV=void 0,this.xV=void 0,this.kV=void 0,this.qV=void 0,this.HV=void 0,this.WV=void 0,this.VV=void 0,this.DV=t,this.CV=i,this.RV=Lr.zL,this.FV=!0,this.xV=!1,this.kV=!1,this.qV=t=>{const i=this.DV.zx,e=this.DV.AP;e!==this.RV&&this.So(new Ka(i,e)),e===Lr.zL&&(this.xV=!1,this.kV=!1),this.TV(i,e),this.EV(i,e),this.LV(i,e),this.OV(i,e),this.PV(i,e),this.BV(i,e),this.RV=e},this.HV=()=>{const t=this.DV.zx;this.BV(t,this.RV),this.PV(t,this.RV),this.FV=this.DV.lP},this.WV=()=>{this.FV=this.DV.lP},this.VV=()=>{this.So(new mo(this.DV.zx))},this.DV.wn(Jr.AI,this.qV),this.DV.wn(d.uo,this.HV),this.DV.wn(d.jw,this.WV),this.CV&&this.DV.wn(Jr.PM,this.VV)}};r();var Gt=class extends Ne{get zx(){return this.oa.zx}get Qx(){return this.oa.Qx}get lt(){return this.PL.lt}get lP(){return this.PL.lP}get AP(){return this.oa.AP}zg(){this.Vo(),this.PL.mn(TP,this.Rs)}zV(){this.So(new Ka(this.zx,this.AP))}constructor(t,i){super(),this.oa=void 0,this.PL=void 0,this.oa=t,this.PL=i,this.PL.wn(TP,this.Rs)}};r(),r(),r(),r();var Du=class{GV(){return this.XV}jV(t){this.XV=t}get Dx(){return this.aV}get QV(){return!1}get KV(){const t=this.YV.certificate;if(t)return Q(t)?Cn(t):aa(t)}JV(){return this.YV.licenseAcquisitionURL||this.GV()}get ZV(){return!1}$V(t){return Promise.resolve()}tH(t,i){return Promise.resolve(void 0)}get Xk(){return Boolean(this.YV.useCredentials)}async iH(t,i,e,s){const n=this.eH(t,i,e,s);if(""===n.Yu)throw new fs(me.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The license request URL has not been correctly configured.");try{const t=await this.Dx.vk(n);return await t.WT(i)}catch(t){return sa(t),void await this.sH(t,n.Yu,s)}}eH(t,i,e,s){const n=this.nH().OT(),r=this.Xk,h={Yu:this.rH(),fk:i,_k:n,XT:t,Xk:r,Hk:Qe.POST,Wk:0,Yg:s,Km:q.Tk,zk:e};return new ro(h)}hH(t,i){return Promise.resolve(t)}oH(t,i,e,s){return Promise.resolve(t)}nH(){return new cc(this.YV.headers||{})}async sH(t,i,e){throw new fs(me.CONTENT_PROTECTION_LICENSE_ERROR,"Error during license server request",t)}rH(t,i){let e=i;const s=this.YV.queryParameters;if(!e){const t=this.JV();if(!t)return"";e=t}if(s||t){const i=zd.Dh(e);t&&AA(i,t),s&&AA(i,s),e=i.href}return e}aH(t,i){return kP(t)}uH(t){return new j(t)}async cH(t,i,e){const s=await this.aH(t,e),n=await this.iH(s,this.dH,i,e);return this.uH(n)}kn(){}constructor(t,i,e,s,n){this.xS=void 0,this.lH=void 0,this.fH=void 0,this.YV=void 0,this.aV=void 0,this.XV=void 0,this.dH=void 0,this.xS=t,this.lH=i,this.fH=e,this.aV=s,this.dH=n,this.YV=this.vH(i)}};function kP(t){return Promise.resolve(nr(t).buffer)}var Hc=class extends Du{vH(t){return t.widevine||{}}async _H(t,i){return this.KV?this.KV:this.gH(new j(t),i)}gH(t,i){return super.cH(t,he.Ik,i)}constructor(t,i,e,s){super(ot,t,i,e,s)}};r();var Wo=function(t){return t.zm="Widevine",t.pH="PlayreadyV2",t.mH="PlayreadyV3",t.qm="PlayreadyV2",t.jm="Fairplay",t}({}),EP={Widevine:{DRMProvider:"Google",DRMVersion:"1.4.8.86",DRMType:"Widevine"},PlayreadyV2:{DRMProvider:"Microsoft",DRMVersion:"2.9",DRMType:"Playready"},PlayreadyV3:{DRMProvider:"Microsoft",DRMVersion:"3",DRMType:"Playready"},Fairplay:{DRMProvider:"Apple",DRMType:"FairPlay",DRMVersion:"1.0"}};function xP(t,i){var e,s,n,r;const h=EP[i],o=t.accountName;return{CustomerName:t.customerName,AccountName:o,PortalId:t.portalId,FriendlyName:t.friendlyName,DeviceInfo:{FormatVersion:"1",DeviceType:"PC",OSType:null==(e=zd.Em)?void 0:e.Zs,OSVersion:null==(s=zd.Em)?void 0:s.Lm,DRMProvider:h.DRMProvider,DRMVersion:h.DRMVersion,DRMType:h.DRMType,DeviceVendor:null==(n=zd.Em)?void 0:n.Om,DeviceModel:null==(r=zd.Em)?void 0:r.Fm}}}function PP(t,i){if(!t.accountName)throw new fs(me.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium "+i+" DRM configuration, accountName is not set.");if(!t.customerName)throw new fs(me.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium "+i+" DRM configuration, customerName is not set.");if(!t.portalId)throw new fs(me.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium "+i+" DRM configuration, portalId is not set.");throw new fs(me.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium "+i+" DRM configuration.")}function IP(t,i,e){let s;if(DT(t))s={AuthToken:t.authToken,Payload:i};else{if(!NT(t))throw PP(t,e);s={LatensRegistration:xP(t,e),Payload:i}}return ll(JSON.stringify(s))}async function CP(t,i,e){const s=t.uE;if(!s)throw new fs(me.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Titanium server request",t,i);const n=s;let r,h;try{r=await n.VT(e),h=function(t){if(t){if(t.WvProxyErr)return t.WvProxyErr.desc;if(t.DrmErr)return t.DrmErr.desc}return}(r)}catch(t){h=""}throw new fs(me.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Titanium server request",t,n.vk.Yu,n.dk,n.gk,h)}r();var RP=class extends Hc{static wH(){return zd.Zs.yp?"required":"optional"}sH(t,i,e){return CP(t,i,e)}$V(t){return this.yH?ua(this.yH.Yy,t):(this.yH=new Ga,Promise.resolve())}async aH(t,i){const e=this.lH;if(!e)throw new fs(me.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium Widevine DRM configuration.");return IP(e,wa(t),Wo.zm)}uH(t){let i;if(!t.license)throw new fs(me.CONTENT_PROTECTION_LICENSE_INVALID,"Could not process the response from the Titanium Widevine license server");return i=Cn(t.license),i}bH(t){return Promise.resolve(new j(t))}async _H(t,i){this.AH();const e=await this.aH(t,i),s=await this.iH(e,Bi.NT,he.Ck,i);return await this.bH(s)}async gH(t,i){const e=await super.gH(t,i);return this.AH(),e}AH(){this.yH||(this.yH=new Ga),this.yH.Qy()}kn(){this.yH&&this.yH.Zg(),super.kn()}constructor(t,i,e){super(t,i,e,Bi.BT),this.yH=void 0}};r();var DP=class extends Hc{get SH(){if(BT(this.lH))return this.lH.token}async aH(t,i){const e=await kP(t),s=this.fH,n=am(new j(e)),r=this.SH;if(void 0===r)throw new fs(me.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The Widevine vuDRM token has not been correctly configured.");return JSON.stringify({token:r,drm_info:n,kid:s})}constructor(t,i,e){super(t,i,e,Bi.NT),this.jV("https://widevine-proxy.drm.technology/proxy")}};function NP(t,i){let e=i||{};return t.ticket&&t.sessionId&&(e=Y({},e,{SessionId:t.sessionId,Ticket:t.ticket})),Y({},e,{CrmId:t.crmId,AccountId:t.accountId,ContentId:t.contentId})}r(),r();var BP=class extends Hc{rH(t,i){let e=t;return Fr(this.lH)&&(e=NP(this.lH,e)),super.rH(e,i)}constructor(t,i,e){super(t,i,e,Bi.NT),this.jV("https://emeademo.dev.ott.irdeto.com/Widevine/getlicense")}};r(),r();var MP="Conax-Custom-Data";function LP(t,i,e){const s=t&&IT(t)&&t;if(s&&!e.has(MP)){const t=vT(s)?s.token:void 0,n=vT(s)?s.deviceId:void 0,r=JSON.stringify({Version:"1.0.0",CxAuthenticationDataToken:t,CxClientInfo:{DeviceType:"Browser",DrmClientType:i+"-HTML5",DrmClientVersion:"1.0.0",CxDeviceId:n}});e.set(MP,r)}return e}var OP=class extends Hc{nH(){const t=super.nH();return LP(this.lH,"Widevine",t)}constructor(t,i,e){super(t,i,e,Bi.NT),this.jV("https://connect.conax.com:8094/license")}};function FP(t){const i=io(new j(t));return Cn(JSON.parse(i).license)}function UP(t){return"string"==typeof t.token?t.token:ll(JSON.stringify({userId:t.userId,sessionId:t.sessionId,merchant:t.merchant}))}function VP(t,i,e){let s;return s=e.token?"x-dt-auth-token":"dt-custom-data",t.set(s,i),t}r(),r();var HP=class extends Hc{get SH(){return UP(this.lH)}uH(t){return FP(t)}nH(){return VP(super.nH(),this.SH,this.lH)}constructor(t,i,e){super(t,i,e,Bi.NT),this.jV("https://lic.drmtoday.com/license-proxy-widevine/cenc/")}};r();var WP=class extends Hc{nH(){const t=super.nH(),i=this.lH.token;return t.set("Authorization","Bearer "+i),t}constructor(t,i,e){super(t,i,e,Bi.NT)}};async function qP(t,i,e,s){if(!MT(t))throw new fs(me.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Xstream DRM Configuration");const n=new cc;n.append("Cache-Control","no-cache"),n.append("Content-Type","application/json");const r=t.sessionId;r&&n.append("XSSESSION",r);const h=t.streamId;let o;o=t.fairplay?"persistent"===t.fairplay.licenseType?"persistent":"non-persistent":t.widevine&&"persistent"===t.widevine.licenseType?"persistent":"non-persistent";const a={drmType:i,licenseType:o,streamId:h},u={Yu:t.ticketAcquisitionURL,fk:Bi.BT,_k:n,Hk:Qe.POST,XT:JSON.stringify(a),Yg:s},c=await e.vk(u);return await c.VT()}r(),r();var zP=class extends Hc{nH(){const t=super.nH();return t.set("Content-Type","application/json"),t}async aH(t,i){const e=pm(t.buffer),s=this.lH,n=await qP(s,"widevine_modular",this.Dx,i);this.jV(n.licenseServerUrl);const r=Gc(JSON.stringify({payload:e,ticket:n.ticket}));return super.aH(r,i)}uH(t){return Cn(t.license)}constructor(t,i,e){super(t,i,e,Bi.BT)}};r();var GP=class extends Hc{nH(){if(!LT(this.lH))throw new fs(me.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Axinom configuration");const t=super.nH();return t.set("X-AxDRM-Message",this.lH.token),t}constructor(t,i,e){super(t,i,e,Bi.NT)}};function XP(t){const i=new j(2*t.length);for(let e=0;e<t.length;e+=1)i[2*e]=t.charCodeAt(e),i[2*e+1]=0;return i}r();var Jc=class extends Du{vH(t){return t.playready||{}}nH(){const t=new cc(this.TH);return t.UT(super.nH()),t}kH(t){return t.length>=1&&t[0].KE.length>0}tH(t){const i=this.lH.playready.customData;if(i){const t=XP(i),e=XP('<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">'+wa(t)+"</CustomData></LicenseAcquisition></PlayReadyCDMData>");return Promise.resolve({playready:{GS:e}})}return super.tH(t)}async aH(t,i){const e=await kP(t);return this.EH(e)}async EH(t){var i,e;let s=null;const n=zc(new DataView(t),new oi,!0);let r;try{r=zd.HE(n)}catch(t){return s}const h=null==(i=r.ZE("PlayReadyKeyMessage")[0])?void 0:i.ZE("LicenseAcquisition")[0];var o;const a=null!=(o=null==h?void 0:h.ZE("Challenge"))?o:[];this.kH(a)&&(s=gm(a[0].hx));const u=new cc;var c;const d=null!=(c=null==h||null==(e=h.ZE("HttpHeaders")[0])?void 0:e.ZE("HttpHeader"))?c:[];for(const t of d){const i=t.ZE("name")[0].hx,e=t.ZE("value")[0].hx;u.append(i,e)}return this.TH=u,s}_H(t,i){return Promise.resolve(t)}gH(t,i){return super.cH(t,he.Rk,i)}constructor(t,i,e){super(Jg,t,i,e,Bi.NT),this.TH=void 0}};r(),r();var jP=class t{static xH(t){return"3"===t.version?Wo.mH:Wo.pH}PH(){const t={};if(this.XA===Wo.mH){const i={LatensRegistration:xP(this.IH,Wo.mH)};t["X-TITANIUM-DRM-CDATA"]=ll(JSON.stringify(i))}return t}get CH(){return this.XA}get FS(){return this.XA===Wo.pH}constructor(i){this.IH=void 0,this.XA=void 0,this.IH=i,this.XA=t.xH(i)}};var QP=class extends Jc{tH(t){const i=this.lH;if(!this.lH)throw new fs(me.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium PlayReady DRM configuration.");if(NT(i)){const t={};return t.playready={GS:KP(i,this.RH.CH)},Promise.resolve(t)}return Promise.reject(PP(i,Wo.qm))}nH(){const t=new cc(this.RH.PH());return t.UT(super.nH()),t}async sH(t,i,e){const s=t.uE;if(!s)throw new fs(me.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Titanium PlayReady license request",t,i);let n,r;try{const t=await s.qT(e),i=io(new j(t)),o=zd.HE(i);if(o){const t=function(t,i){return function(t,i){const e=t.m.slice(),s=[];for(;e.length>0;){const t=e.shift();i(t)?s.push(t):e.push(...t.m)}return s}(t,t=>t.$E===i)}(o,"CustomData");var h;if(t.length>0)n=JSON.parse(t[0].hx),r=null==(h=n.DrmErr)?void 0:h.desc}}catch(t){}throw new fs(me.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Titanium PlayReady license request",t,i,s.dk,s.gk,r)}kH(t){if(1!==t.length)throw new fs(me.CONTENT_PROTECTION_INITIALIZATION_INVALID,"PlayReady license message incorrectly formatted, Challenge not found.");return!0}constructor(t,i,e){super(t,i,e),this.RH=void 0,this.RH=new jP(this.lH)}};function KP(t,i){const e=xP(t,i),s=e.DeviceInfo.FormatVersion,n=function(t){return t.replace(/&lt;/g,"<").replace(/&gt;/g,">")}(function(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}("<TitaniumCustomData>"+ll('<LatensRegistration formatversion="'+s+'"><AccountName>'+e.AccountName+"</AccountName><CustomerName>"+e.CustomerName+"</CustomerName><PortalID>"+e.PortalId+'</PortalID><DeviceInfo formatversion="'+s+'"><DeviceType>'+e.DeviceInfo.DeviceType+"</DeviceType><OSType>"+e.DeviceInfo.OSType+"</OSType><OSVersion>"+e.DeviceInfo.OSVersion+"</OSVersion><DRMProvider>"+e.DeviceInfo.DRMProvider+"</DRMProvider><DRMVersion>"+e.DeviceInfo.DRMVersion+"</DRMVersion><DRMType>"+e.DeviceInfo.DRMType+"</DRMType><DeviceVendor>"+e.DeviceInfo.DeviceVendor+"</DeviceVendor><DeviceModel>"+e.DeviceInfo.DeviceModel+"</DeviceModel></DeviceInfo></LatensRegistration>")+"</TitaniumCustomData>")),r=em(n,!0);return em('<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0"><CustomData encoding="base64encoded">'+wa(r)+"</CustomData></LicenseAcquisition></PlayReadyCDMData>",!0)}r();var YP=class extends Jc{get SH(){if(BT(this.lH))return this.lH.token}kH(t){if(1!==t.length)throw new fs(me.CONTENT_PROTECTION_INITIALIZATION_INVALID,"Vudrm PlayReady license message incorrectly formatted, Challenge not found.");return!0}rH(t,i){const e=Y({},t||{},{token:this.SH});return super.rH(e,i)}constructor(t,i,e){super(t,i,e),this.jV("https://playready-license.drm.technology/rightsmanager.asmx")}};r();var JP=class extends Jc{rH(t,i){let e=t;return Fr(this.lH)&&(e=NP(this.lH,e)),super.rH(e,i)}constructor(t,i,e){super(t,i,e),this.jV("https://emeademo.dev.ott.irdeto.com/playready/rightsmanager.asmx")}};r();var ZP=class extends Jc{nH(){const t=super.nH();return LP(this.lH,"PlayReady",t)}constructor(t,i,e){super(t,i,e),this.jV("https://connect.conax.com:8010/cxplayready/rightsmanager.asmx")}};r();var $P=class extends Jc{get SH(){return UP(this.lH)}uH(t){const i=function(t){const i=io(new j(t));return Xt(i,"<?xml")?0:1}(t);return 1===i?FP(t):super.uH(t)}nH(){return VP(super.nH(),this.SH,this.lH)}constructor(t,i,e){super(t,i,e),this.jV("https://lic.drmtoday.com/license-proxy-headerauth/drmtoday/RightsManager.asmx")}};r();var tI=class extends Jc{nH(){const t=super.nH();return this.DH&&t.set("Ticket",this.DH),t.set("Content-Type","text/xml"),t}async aH(t,i){const e=this.lH,s=await qP(e,"playready",this.Dx,i);return this.jV(s.licenseServerUrl),this.DH=s.ticket,super.aH(t,i)}constructor(t,i,e){super(t,i,e),this.DH=void 0}};r();var iI=class extends Jc{nH(){if(!LT(this.lH))throw new fs(me.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Axinom configuration");const t=super.nH();return t.set("X-AxDRM-Message",this.lH.token),t}};r(),r();var Ju=function(t){return t.BT="application/json",t.NH="application/x-www-form-urlencoded",t.BH="application/octet-stream",t.LT="text/plain;charset=UTF-8",t}({}),ce=class extends Du{get ZV(){return!0}MH(){return this.YV.certificateURL||this.LH}OH(t){this.LH=t}aH(t){return Promise.resolve(this.FH(t,this.UH))}FH(t,i){return"spc="+encodeURIComponent(wa(t))+"&assetId="+encodeURIComponent(i)}get VH(){return Ju.NH}vH(t){return t.fairplay||{}}HH(t){const i=t.indexOf("?");if(i>=0)return Promise.resolve(t.substr(i+1));{const i=t.split("skd://").pop();if(i){if(/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/.test(i))return Promise.resolve(i)}const e=t.split("/");return Promise.resolve(e[e.length-1])}}async tH(t){var i;const e=null!=(i=this.WH)?i:qc(new j(t)),s=await this.HH(e);this.UH=s;const n={};return n.fairplay={tT:s},n}nH(){const t=super.nH();return t.set("Content-Type",this.VH),t}async _H(t,i){return this.KV?this.KV:await this.qH(i)}gH(t,i){return super.cH(t,he.xk,i)}zH(t){const i=this.MH(),e=this.nH(),s={Yu:i,fk:Bi.NT,_k:e,Hk:Qe.GET,Xk:!1,XT:null,Wk:0,Yg:t,Km:q.Tk,zk:he.Pk};return new ro(s)}async qH(t){const i=this.zH(t),e=await this.Dx.vk(i),s=await e.qT();return new j(s)}uH(t){let i;if("string"==typeof t){let e=t.trim();"<ckc>"===e.substr(0,5)&&"</ckc>"===e.substr(-6)&&(e=e.slice(5,-6)),i=Cn(e)}else i=new j(t);return i}rH(t,i){let e=super.rH(t,i);return Xt(e,"skd:")&&(e=e.substr(4)),e}constructor(t,i,e,s,n){super(t.xS,i,e,s,n),this.UH="",this.LH=void 0,this.WH=void 0,this.WH=t.GH}};r();var eI=class extends ce{get VH(){return Ju.BH}HH(t){let i=t.split("://",1);return"skd"!==i[0].slice(-3).toLowerCase()?Promise.resolve(""):(i=t.split(";",2),i.length>1?Promise.resolve(i[1]):Promise.resolve(super.HH(t)))}async aH(t){return t}uH(t){return new j(t)}rH(t,i){const e=t||{};return e.p1=zo(),super.rH(e,i)}constructor(t,i,e,s){super(t,i,e,s,Bi.NT)}};r();var sI=class extends ce{get VH(){return Ju.BT}get SH(){if(!BT(this.lH))throw new fs(me.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Token is required for FairPlay VuDrm.");return this.lH.token}FH(t,i){const e={token:this.SH,contentId:i,payload:wa(t)};return JSON.stringify(e)}uH(t){return new j(t)}nH(){const t=super.nH();return t.set("x-vudrm-token",this.SH),t}constructor(t,i,e,s){super(t,i,e,s,Bi.NT),this.jV("https://fairplay-license.drm.technology/license"),this.OH("https://fairplay-license.drm.technology/certificate")}};r();var nI="Verimatrix Fairplay license response incorrectly formatted. Invalid json.",rI="Verimatrix Fairplay license response incorrectly formatted. Ckc not found.",hI=class extends ce{uH(t){const i=function(t){let i;try{i=JSON.parse(t).ckc}catch(t){throw new fs(me.CONTENT_PROTECTION_LICENSE_INVALID,nI)}if(!i)throw new fs(me.CONTENT_PROTECTION_LICENSE_ERROR,rI);return i}(io(new DataView(t)));return super.uH(i)}constructor(t,i,e,s){super(t,i,e,s,Bi.NT)}};r();var oI=class extends ce{get VH(){return Ju.BT}async aH(t){const i=this.lH;if(!i)throw new fs(me.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium Fairplay DRM configuration.");return IP(i,wa(t),Wo.jm)}uH(t){try{let i;if(Q(t)){const e=t.trim();i=JSON.parse(e)}else i=t;if(i.license){const t=gm(i.license);return new j(t)}throw new fs(me.CONTENT_PROTECTION_LICENSE_ERROR,"No license received from the Titanium Fairplay license server")}catch(t){throw new fs(me.CONTENT_PROTECTION_LICENSE_INVALID,"Could not process the response from the Titanium Fairplay license server")}}sH(t,i,e){return CP(t,i,e)}constructor(t,i,e,s){super(t,i,e,s,Bi.BT)}};r();var aI=class extends ce{MH(){const t=super.MH();if(!t)return t;const i=zd.Dh(t),e=this.lH;return Fr(e)&&AA(i,{accountId:e.accountId,applicationId:e.applicationId||""}),i.href}HH(t){return Fr(this.lH)?Promise.resolve(this.lH.contentId):super.HH(t)}async aH(t){return t}uH(t){return new j(t)}get VH(){return Ju.BH}rH(t,i){let e=t;return Fr(this.lH)&&(e=function(t,i){return Y({},NP(t,i),{KeyId:t.keyId})}(this.lH,e)),super.rH(e,i)}constructor(t,i,e,s){super(t,i,e,s,Bi.NT),this.jV("https://emeademo.dev.ott.irdeto.com/streaming/getckc"),this.OH("https://emeademo.dev.ott.irdeto.com/streaming/getcertificate")}};r();var uI=class extends ce{nH(){const t=super.nH();return LP(this.lH,"FairPlay",t)}async qH(t){const i={Yu:this.MH(),fk:Bi.NT,_k:{},Hk:Qe.GET,Xk:!1,XT:null,Wk:0,Yg:t,Km:q.Tk,zk:he.Pk},e=await this.Dx.vk(i),s=await e.qT();return new j(s)}async aH(t){return t}HH(t){const i=t.indexOf("?");if(0===t.indexOf("skd://")){let e;return e=i>=0?t.substring(6,i):t.substring(6),Promise.resolve(function(t){return io(Cn(t))}(e))}return Promise.resolve("unknown")}uH(t){try{const i=JSON.parse(t);return new j(gm(i.CkcMessage))}catch(t){throw new m("CFLRW-66")}}constructor(t,i,e,s){if(super(t,i,e,s,Bi.LT),!IT(i))throw new fs(me.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Conax configuration");this.jV("https://connect.conax.com:8097/license")}};r();var cI=class extends ce{HH(t){return Xt(t,"skd://")?Promise.resolve(t.substring(6,40)):Promise.reject(new fs(me.CONTENT_PROTECTION_INITIALIZATION_INVALID,"Error while determining the KeyOS Content ID."))}FH(t,i){return"spc="+wa(t)+"&assetId="+i}constructor(t,i,e,s){super(t,i,e,s,Bi.LT),this.jV(ST[po.jm])}};r();var dI=class extends ce{get SH(){return UP(this.lH)}FH(t,i){const e="spc="+encodeURIComponent(wa(t))+"&"+encodeURI(i);return"persistent"===this.YV.licenseType?e+"&offline=true":e}nH(){return VP(super.nH(),this.SH,this.lH)}constructor(t,i,e,s){super(t,i,e,s,Bi.LT),this.jV("https://lic.drmtoday.com/license-server-fairplay/")}};r();var lI=class extends ce{HH(t){let i=t;return Xt(i,"skd:")&&(i="http:"+i.substring(4)),Xt(i,"http:")||Xt(i,"https:")?Promise.resolve(zd.Dh(i).hostname):Promise.reject(new m("Could not parse ExpressPlay FairPlay content ID."))}async aH(t){return t}uH(t){return new j(t)}get VH(){return Ju.BH}constructor(t,i,e,s){super(t,i,e,s,Bi.NT)}};r();var fI=class extends ce{nH(){const t=super.nH(),i=this.lH.token;return t.set("Authorization","Bearer "+i),t}constructor(t,i,e,s){super(t,i,e,s,Bi.LT)}};r();var vI=class extends ce{async qH(t){const i=this.MH(),e=this.nH(),s={Yu:i,fk:Bi.BT,_k:e,Hk:Qe.POST,Yg:t,Km:q.Tk,zk:he.Pk},n=await this.Dx.vk(s),r=await n.VT();return new j(Cn(r.certificate))}get VH(){return Ju.BT}async gH(t,i,e){void 0===e&&(e=Bi.LT);const s=wa(t),n=this.lH,r=await qP(n,"fairplay",this.Dx,i),h=Gc(JSON.stringify({spc:s,ticket:r.ticket})),o={Yu:this.JV(),fk:Bi.BT,_k:this.nH(),Hk:Qe.POST,XT:h,Wk:0,Yg:i,Km:q.Tk,zk:he.xk},a=await this.Dx.vk(o);return Cn((await a.VT()).licence)}constructor(t,i,e,s){if(super(t,i,e,s,Bi.BT),!MT(i))throw new m("Invalid Xstream DRM configuration")}};r();var _I=class extends ce{FH(t,i){return wa(t)}uH(t){if(0===t.length)throw new fs(me.CONTENT_PROTECTION_LICENSE_ERROR,"Vimond license request error.");return super.uH(t)}nH(){const t=super.nH();return t.set("Content-Type","text/plain"),t}constructor(t,i,e,s){super(t,i,e,s,Bi.LT)}};r();var gI=class extends ce{get VH(){return Ju.BT}FH(t,i){return t}uH(t){return new j(t)}nH(){if(!LT(this.lH))throw new fs(me.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Axinom configuration");const t=super.nH();return t.set("X-AxDRM-Message",this.lH.token),t}constructor(t,i,e,s){super(t,i,e,s,Bi.NT)}};r();var pI=class extends ce{get VH(){return Ju.LT}FH(t,i){const e={spc:wa(t)};return JSON.stringify(e)}HH(t){const i=zd.Dh(t);return this.XH=t,i.searchParams.has("b")?Promise.resolve(i.searchParams.get("b")):Promise.reject(new fs(me.CONTENT_PROTECTION_INITIALIZATION_INVALID,"Error during license server request: Could not extract content id"))}rH(t,i){let e=this.JV();return!e&&this.XH&&(e=this.XH),e&&(e=e.replace("skd://","https://")),super.rH(t,i||e)}uH(t){try{let i;if(i=Q(t)?JSON.parse(t.trim()):t,i.ckc)return Cn(i.ckc)}catch(t){throw new fs(me.CONTENT_PROTECTION_LICENSE_INVALID,"Could not process the response from the Uplynk Fairplay license server")}throw new fs(me.CONTENT_PROTECTION_LICENSE_ERROR,"No license received from the Uplynk Fairplay license server")}constructor(t,i,e,s){super(t,i,e,s,Bi.BT),this.XH=void 0}};r(),r(),r();var mI=class{jH(t){return this.QH(t)}KH(t,i){throw new g(i+" must be "+this.YH+". (Received: "+t+")")}constructor(t,i){this.QH=void 0,this.YH=void 0,this.QH=t,this.YH=i}},an=(new mI(function(t){return!0},"any"),new mI(lo,"a number")),Ye=new mI(Q,"a string"),wI=new mI(_r,"a boolean"),Pa=(new mI(Xd,"a date"),new mI(vc,"undefined")),yI=new mI(Mc,"an object"),bI=new mI(function(t){return null===t},"null");new mI(function(t){return null==t},"null or undefined");function AI(t,i){throw new g(i+" has an incorrect type")}var SI=class{jH(t){if(!Mc(t))return!1;for(const i of w.keys(this.Qp)){if(!this.Qp[i].jH(t[i]))return!1}return!0}KH(t,i){if(!Mc(t))throw new g(i+" must be an object.");for(const e of w.keys(this.Qp)){const s=this.Qp[e];if(!s.jH(t[e]))return s.KH(t[e],i+"."+String(e))}throw new g}constructor(t){this.Qp=void 0,this.Qp=t}};function Zh(t){return new SI(t)}function TI(t){return w.keys(t).map(i=>t[i])}var kI=class{jH(t){return Ct(this.JH,t)}KH(t,i){return AI(0,i)}constructor(t){this.JH=void 0,this.JH=t}};function EI(t){return new kI(t)}var xI=class{jH(t){return this.ZH.some(i=>i.jH(t))}KH(t,i){return AI(0,i)}constructor(t){this.ZH=void 0,this.ZH=t}};function Dh(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];return new xI(i)}var PI=class{jH(t){return hi(t)&&t.every(t=>this.$H.jH(t))}KH(t,i){if(!hi(t))throw new g(i+" must be an array.");for(let e=0;e<t.length;e++){const s=t[e];this.$H.jH(s)||this.$H.KH(s,i+"["+e+"]")}return AI(0,i)}constructor(t){this.$H=void 0,this.$H=t}};function _h(t){return new PI(t)}var II=class{jH(t){return Mc(t)&&w.keys(t).every(i=>this.$H.jH(t[i]))}KH(t,i){if(!Mc(t))throw new g(i+" must be an object.");for(const e of w.keys(t))if(!this.$H.jH(t[e]))return this.$H.KH(t[e],i+"."+e);return AI(0,i)}constructor(t){this.$H=void 0,this.$H=t}};function CI(t){return new II(t)}var RI=class{jH(t){return this.$H().jH(t)}KH(t,i){return this.$H().KH(t,i)}constructor(t){this.$H=void 0,this.$H=Oc(t)}};var DI=Zh({responseCode:an,isException:wI,description:Ye,title:Ye,correlationId:Ye});async function NI(t,i,e,s,n){const r=function(t,i,e,s){const n={token:i.token,account:i.accountId,form:"json"},r=decodeURIComponent(bA(e,n)),h=new cc({});h.append("Content-Type","application/json");const o=wa(t),a={getFairplayLicense:{releasePid:i.releasePid,spcMessage:o}};return{Yu:r,fk:Bi.LT,_k:h,Hk:Qe.POST,XT:JSON.stringify(a),Yg:s,Km:q.Tk,zk:he.xk}}(t,i,e,n);return await async function(t,i){const e=await i.vk(t),s=await e.VT();if(DI.jH(s))throw new fs(me.CONTENT_PROTECTION_LICENSE_ERROR,s.description,void 0,t.Yu,s.responseCode);return Cn(s.getFairplayLicenseResponse.ckcResponse)}(r,s)}var BI=class extends ce{HH(t){const i=t.replace("FairPlay",this.tW.releasePid);return super.HH(i)}async gH(t,i){return await NI(t,this.tW,this.JV(),this.Dx,i)}constructor(t,i,e,s){super(t,i,e,s,Bi.NT),this.tW=void 0,this.tW=i}};r();var MI=class extends Du{vH(t){return t.clearkey||{}}async iH(t,i,e,s){const n=this.YV;if(this.JV())return super.iH(t,this.dH,e,s);if(n.keys&&n.keys.length){const t={keys:n.keys.map(t=>({kty:"oct",kid:t.id,k:t.value}))};return rm(JSON.stringify(t)).buffer}throw new fs(me.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The clearkey license has not been configured correctly.")}_H(t,i){return Promise.resolve(new j(0))}async gH(t,i){const e=await super.cH(t,he.Dk,i),s=JSON.parse(qc(e));if(s.keys)for(const t of s.keys)t.k&&(t.k=Ip(t.k)),t.kid&&(t.kid=Ip(t.kid));return rm(JSON.stringify(s))}constructor(t,i,e,s){super(t,i,e,s,Bi.NT)}},LI=class extends MI{constructor(t,i,e){super(Xc,t,i,e)}},OI=class extends MI{constructor(t,i,e){super(tp,t,i,e)}};r();var FI=class extends Hc{};r(),r();var UI={url:"",method:"GET",headers:{},body:null,useCredentials:!1};async function VI(t,i,e){const s=jI(i),n=t.onCertificateRequest;if(!n||"function"!=typeof n)return Promise.resolve(i);const r=await ua(Promise.resolve(n.call(t,s)),e);return om(r)?aa(r):XI(Y({},UI,r))}async function HI(t,i,e,s,n){const r=t.onCertificateResponse,h=GI(i,e,s);if(!r||"function"!=typeof r)return Promise.resolve(i);return aa(await ua(Promise.resolve(r.call(t,h)),n))}async function WI(t,i,e,s){const n=await async function(t,i,e,s){const n=null==t?void 0:t.onLicenseRequest,r=zI(i,e);if(!n||"function"!=typeof n)return Promise.resolve(r);0;const h=await ua(Promise.resolve(n.call(t,r)),s);if(om(h))return aa(h).buffer;return Y({fairplaySkdUrl:void 0},UI,h)}(t,i,e,s);return n instanceof ArrayBuffer?n:XI(n)}async function qI(t,i,e,s,n,r){const h=zI(e,n),o=await async function(t,i,e,s,n){const r=null==t?void 0:t.onLicenseResponse,h=GI(i,e,s);if(!r||"function"!=typeof r)return Promise.resolve(i);0;const o=await ua(Promise.resolve(r.call(t,h)),n);return aa(o)}(t,new j(i),h,s,r);return aa(o)}function zI(t,i){return Y({},jI(t),{fairplaySkdUrl:i})}function GI(t,i,e){return{url:e.wk,status:e.dk,statusText:e.gk,headers:e._k.OT(),body:t,request:i}}function XI(t){return new ro({Yu:t.url,Hk:t.method,_k:t.headers,XT:t.body,Xk:t.useCredentials,Km:q.Tk})}function jI(t){var i;return{url:t.Yu,body:null!=(i=QI(t.XT))?i:null,headers:t._k.OT(),method:t.Hk,useCredentials:t.Xk}}function QI(t){if(t)return"string"==typeof t?rm(t):t instanceof ArrayBuffer?new j(t):Kc(t)?ye(t):void 0}var KI=class extends Jc{_H(t,i){return Promise.resolve(t)}async gH(t,i){const e=await this.EH(nr(t).buffer),s=this.eH(e,Bi.NT,he.Rk,i),n=await WI(this.iW,s,void 0,i);if(n instanceof ArrayBuffer)return new j(n);if(""===n.Yu)throw new fs(me.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The license request URL has not been correctly configured.");try{const t=await this.Dx.vk(n),e=await t.qT(i);return await qI(this.iW,e,s,t,void 0,i)}catch(t){throw sa(t),new fs(me.CONTENT_PROTECTION_LICENSE_ERROR,"Error during PlayReady license request",t)}}constructor(t,i,e,s){super(t,i,e),this.iW=void 0,this.iW=s}};r();var YI=class extends FI{async _H(t,i){if(this.KV)return this.KV;const e=this.eH(t,Bi.NT,he.Ck,i),s=await VI(this.iW,e,i);if(s instanceof j)return s;if(""===s.Yu)throw new fs(me.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The certificate request URL has not been correctly configured.");let n,r;try{n=await this.Dx.vk(s),r=await n.qT(i)}catch(t){throw sa(t),new fs(me.CONTENT_PROTECTION_CERTIFICATE_ERROR,"Error during Widevine certificate request",t)}const h=zI(e,void 0);return await HI(this.iW,new j(r),h,n,i)}async gH(t,i){const e=this.eH(t,Bi.NT,he.Ik,i),s=await WI(this.iW,e,void 0,i);if(s instanceof ArrayBuffer)return new j(s);if(""===s.Yu)throw new fs(me.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The license request URL has not been correctly configured.");try{const t=await this.Dx.vk(s),n=await t.qT(i);return await qI(this.iW,n,e,t,void 0,i)}catch(t){throw sa(t),new fs(me.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Widevine license request",t)}}constructor(t,i,e,s){super(t,i,e,Bi.NT),this.iW=void 0,this.iW=s}};r();var JI=class extends ce{async _H(t,i){if(this.KV)return this.KV;const e=this.zH(i),s=await VI(this.iW,e,i);if(Kc(s))return s;try{const t=await this.Dx.vk(s),n=await t.qT(),r=zI(e,void 0);return await HI(this.iW,new j(n),r,t,i)}catch(t){throw sa(t),new fs(me.CONTENT_PROTECTION_CERTIFICATE_ERROR,"Error during FairPlay certificate request",t)}}async gH(t,i){const e=this.eH(t,Bi.NT,he.xk,i),s=await WI(this.iW,e,this.eW,i);if(s instanceof ArrayBuffer)return new j(s);if(""===s.Yu)throw new fs(me.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The license request URL has not been correctly configured.");try{const t=await this.Dx.vk(s),n=await t.qT(i);return await qI(this.iW,n,e,t,this.eW,i)}catch(t){throw sa(t),new fs(me.CONTENT_PROTECTION_LICENSE_ERROR,"Error during FairPlay license request",t)}}HH(t){var i;return this.eW=t,(null==(i=this.iW)?void 0:i.extractFairplayContentId)?Promise.resolve(this.iW.extractFairplayContentId(t)):super.HH(t)}constructor(t,i,e,s,n){super(t,i,e,s,Bi.NT),this.iW=void 0,this.eW=void 0,this.iW=n}},ZI=class{sW(t,i,e,s){switch(t.xS.Km){case po.zm:return this.nW(i,e,s);case po.qm:return this.rW(i,e,s);case po.jm:return this.hW(t,i,e,s);case po.Xm:return this.oW(i,e,s);case po.Gm:default:return this.aW(i,e,s)}}nW(t,i,e){const s=function(t){return t.integration===cT&&Q(t.customIntegrationId)}(t)?t.customIntegrationId:t.integration;if(s&&A.VC.LC(s,Hg)){const n=A.VC.FC(s,Hg,t);return new YI(t,i,e,n)}switch(s){case Br:return new RP(t,i,e);case $S:return new DP(t,i,e);case ZS:return new BP(t,i,e);case YS:return new OP(t,i,e);case eT:return new HP(t,i,e);case nT:return new WP(t,i,e);case rT:return new zP(t,i,e);case oT:return new GP(t,i,e);default:return new FI(t,i,e,Bi.NT)}}rW(t,i,e){const s=t.integration;if(s&&A.VC.LC(s,Fg)){const n=A.VC.FC(s,Fg,t);return new KI(t,i,e,n)}switch(s){case Br:return new QP(t,i,e);case $S:return new YP(t,i,e);case ZS:return new JP(t,i,e);case YS:return new ZP(t,i,e);case eT:return new $P(t,i,e);case rT:return new tI(t,i,e);case oT:return new iI(t,i,e);default:return new Jc(t,i,e)}}hW(t,i,e,s){const n=i.integration;if(n&&A.VC.LC(n,de)){const r=A.VC.FC(n,de,i);return new JI(t,i,e,s,r)}switch(n){case JS:return new eI(t,i,e,s);case $S:return new sI(t,i,e,s);case tT:return new hI(t,i,e,s);case Br:return new oI(t,i,e,s);case ZS:return new aI(t,i,e,s);case YS:return new uI(t,i,e,s);case iT:return new cI(t,i,e,s);case eT:return new dI(t,i,e,s);case sT:return new lI(t,i,e,s);case nT:return new fI(t,i,e,s);case rT:return new vI(t,i,e,s);case hT:return new _I(t,i,e,s);case oT:return new gI(t,i,e,s);case aT:return new pI(t,i,e,s);case uT:return new BI(t,i,e,s);default:return new ce(t,i,e,s,Bi.LT)}}aW(t,i,e){return new LI(t,i,e)}oW(t,i,e){return new OI(t,i,e)}uW(t){return t.Km===po.qm||t.Km===po.zm||t.Km===po.jm||t.Km===po.Gm||t.Km===po.Xm}FS(t,i){var e;if(t.Km!==po.qm)return!1;if(it(null==(e=i.playready)?void 0:e.customData))return!0;const s=i.integration;return(!s||!A.VC.LC(s,de))&&(s===Br&&new jP(i).FS)}wH(t,i){if(t.Km!==po.zm)return;const e=i.integration;return e&&A.VC.LC(e,de)?void 0:e===Br?RP.wH():void 0}};r(),r(),r();var $I="theoplayer-stored-network-info-v2",tC=25e5,sc=class{cW(t){var i;const e=null==(i=zd.xx)?void 0:i.zy(t);if(void 0===e)return;const s=JSON.parse(e);if(void 0!==s&&void 0!==s[this.dW]){if(!this.lW(s))return s[this.dW].availableBandwidth;var n;null==(n=zd.xx)||n.Gy(t,JSON.stringify({}))}}fW(){const t=this.cW($I);if(void 0!==t)return t;const i=this.cW("theoplayer-stored-network-info");return i?8*i:void 0}lW(t){const i=t[this.dW].storedTimestamp;return!!i&&zo()-i>36e5}vW(t){this._W=t,this.gW()}pW(){var t;return null!=this._W||(this._W=null!=(t=this.fW())?t:tC),this._W}constructor(){this.dW=qb,this._W=void 0,this.gW=to(()=>{var t;const i={[this.dW]:{availableBandwidth:this._W,storedTimestamp:zo()}};null==(t=zd.xx)||t.Gy($I,JSON.stringify(i))},1e4)}};sc.Bg=new sc,r();var $=function(t){return t[t.mW=0]="mW",t[t.wW=1]="wW",t[t.yW=2]="yW",t[t.bW=3]="bW",t[t.AW=4]="AW",t[t.TW=5]="TW",t[t._C=6]="_C",t[t.kW=7]="kW",t[t.EW=8]="EW",t[t.wC=9]="wC",t[t.xW=10]="xW",t[t.yC=11]="yC",t[t.PW=12]="PW",t}({});r();var hu=class{get IW(){return 0}get RW(){return 0}DW(t){}};r(),r();var iC=class extends gp{constructor(t){super("contentProtectionsTracked"),this.NW=void 0,this.NW=t}},eC=class extends Ne{BW(t){this.IH=t}wH(t){const i=this.IH;if(void 0!==i)return this.MW.wH(t,i)}FS(t){const i=this.IH;return void 0!==i&&this.MW.FS(t,i)}LW(t){const i={xS:t.xS,OW:t.OW||[],FW:t.FW,GH:t.GH,UW:t.UW||[]},e=this.MW.sW(i,this.IH||{},t.fH,this.aV);return i.FW&&e.jV(i.FW),new sC(e)}VW(t){if(!t)return;hh(t,t=>void 0!==t.fH)&&this.So(new iC(t))}constructor(t,i=new ZI){super(),this.aV=void 0,this.MW=void 0,this.IH=void 0,this.aV=t,this.MW=i}},sC=class{$V(t){return this.WW.$V(t)}tH(t,i,e){return this.WW.tH(i,e)}ZV(){return this.WW.ZV||void 0!==this.WW.KV}_H(t,i){return this.WW._H(t,i)}gH(t,i,e){return i&&this.WW.jV(i),this.WW.gH(t,e)}zg(){this.WW.kn()}constructor(t){this.WW=void 0,this.WW=t}};r();var Tu=class extends mS{qW(t){this.zW.push(t);for(const i of t.NI)this.tt(i);this.GW(t)}XW(t){_e(this.zW,t),this.jW(t);for(const i of t.NI)this.QW(i)||this.it(i)}QW(t){for(const i of this.zW)if(i.LI(t))return!0;return!1}GW(t){t.wn(N.rI,this.KW),t.wn(N.oI,this.fV)}jW(t){t.mn(N.rI,this.KW),t.mn(N.oI,this.fV)}kn(){for(;this.zW.length>0;)this.XW(this.zW[0]);super.kn()}xa(){return US(this)}constructor(t){super(),this.zW=[],this.KW=t=>{this.tt(t.Ht)},this.fV=t=>{const i=t.Ht;this.QW(i)||this.it(i)};for(const i of t)this.qW(i)}};r(),r();var nC,rC={forceSeekOffset:0,maximumOffset:0,maximumPlaybackRate:0,minimumOffset:0,minimumPlaybackRate:0,targetOffset:0},Jo=class{get Ca(){return null!=this.hu||(this.hu=function(t){return{get enabled(){return t.Rt},set enabled(i){t.Rt=Th(i)},get monitoringLivePlayback(){return t.YW},get currentLatency(){return t.OL},get currentConfiguration(){return function(t){if(void 0!==t)return{get minimumOffset(){return t.minimumOffset},get maximumOffset(){return t.maximumOffset},get targetOffset(){return t.targetOffset},get forceSeekOffset(){return t.forceSeekOffset},get minimumPlaybackRate(){return t.minimumPlaybackRate},get maximumPlaybackRate(){return t.maximumPlaybackRate}}}(t.Cd)}}}(this)),this.hu}get Rt(){var t,i;return null!=(i=this.We)?i:Boolean(null==(t=this.JW)?void 0:t.Rt)}set Rt(t){this.We=t,this.JW&&(this.JW.Rt=t)}get YW(){var t,i;return null!=(i=null==(t=this.JW)?void 0:t.oL)&&i}get OL(){var t;return null==(t=this.JW)?void 0:t.LL}get Cd(){return this.JW?this.JW.aL:rC}Ea(t){this.JW=t,void 0!==this.We&&(this.JW.Rt=this.We)}hr(){this.JW=void 0,this.We=void 0}constructor(){this.hu=void 0,this.JW=void 0,this.We=void 0}};var hC=Boolean(s&&s.TextTrack),oC=class extends je{get OL(){}get ZW(){const t=this.PL.Fx,i=this.zx;return t.Cr(i,.01)}get ht(){return this.tO}get Fx(){return this.PL.Fx._s()}get Vx(){return this.PL.Vx}set Vx(t){t&&this.PL.$W(t)}get bt(){return this.Ac}get zx(){return void 0!==this.tq?this.tq:this.PL.zx}set zx(t){this.Xx(t)}Xx(t,i){this.sP&&(this.tq=t),this.PL.Oy(t,null==i?void 0:i.iq)}get ct(){return this.PL.ct}get Qx(){return this.PL.Qx}get lt(){return this.nq}get Jx(){return this.rq}get $x(){}get iP(){}get sP(){return this.PL.sP}get rP(){return Y({},{rO:0,hO:0,oO:0,aO:0,uO:0,cO:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}},this.PL.hP())}get oP(){return this.PL.oP}set oP(t){this.PL.oP=t}get cP(){return!0}get lP(){return this.PL.lP}get vP(){return this.PL.vP}set vP(t){this.PL.vP=t}get pP(){return this.PL.hq.played}get wP(){return this.oq}set wP(t){this.oq=t,this.aq&&(this.aq.wP=t)}get AP(){return this.PL.AP}get kP(){return this.PL.kP._s()}get xP(){return this.PL.xP}get uq(){return this.PL.uq}get nt(){return this.Gl}get rt(){return this.sO}get DP(){return this.PL.DP}get MP(){return this.PL.MP}get OP(){return this.PL.OP}set OP(t){this.PL.OP=t}get VP(){return this.cq}get WP(){return this.PL.WP}set WP(t){this.PL.WP=t}get dq(){return this.lq}we(){this.PL.we()}be(){this.PL.be()}async Ta(t,i,e){fr(e),this.Ac=t;const s={Km:O.AV,rC:t.src,GT:t.type,fq:this.vq(t),wP:this.oq,_q:t.crossOrigin,gq:i.metadata&&i.metadata.title};this.pq.BW(t.contentProtection),this.aq=await this.PL.Un(s),fr(e),i.textTracks&&this.mq(i.textTracks),AP(this.nt)}IP(t,i,e,s){return Promise.resolve()}CP(){return Promise.resolve()}mq(t){for(const e of t)if(this.PL.wq()&&zs.ru&&hC&&!aP(e.kind,e.label)&&this.yq(e)){var i;const t=null!=(i=e.kind)?i:us.HU;this.PL.bq(e.src,t,e.label,e.srclang,e.default)}else{if(void 0===e.src)continue;this.Aq.hV(e)}}yq(t){return!t.format||"webvtt"===t.format}async QP(){try{await this.PL.QP()}catch(t){}for(;!this.ZW;)await this.PL.ww(d.Qw)}jP(){this.PL.jP()}YP(){return void 0!==this.PL.hq.webkitShowPlaybackTargetPicker}JP(){this.PL.hq.webkitShowPlaybackTargetPicker&&this.PL.hq.webkitShowPlaybackTargetPicker()}ZP(){this.PL.hq.webkitShowPlaybackTargetPicker&&this.PL.hq.webkitShowPlaybackTargetPicker()}zP(){return this.PL.hq}qP(){return this.PL.Ma}Aa(){return this.PL.Sq}sI(t){return this.PL.Tq(t)}async hr(){this.Ac=void 0,this.nq=void 0,this.rq=void 0,this.aq=void 0,await this.Aq.hr(),await this.kq.hr(),this.PL.Eq(),await this.PL.hr(),this.xq.hr(),this.wP=this.oq,this.ht.hr(),this.rt.hr(),this.tq=void 0}async kn(){await this.hr(),this.Vo(),this.Pq(),this.Iq(),this.xq.kn(),this.Cq.zg(),this.PL.Rq=void 0,await this.Nq.Dq(this.PL),this.tO.kn(),this.sO.kn(),this.Gl.kn(),await this.Aq.kn(),await this.kq.kn()}Bq(){this.PL.wn(d.uo,this.Rs),this.PL.wn(d.jw,this.Rs),this.PL.wn(d.py,this.Nc),this.PL.wn(d.Qw,this.Rs),this.PL.wn(d.Ww,this.Rs),this.PL.wn(d.$w,this.Rs),this.PL.wn(d.Zw,this.Mq),this.PL.wn(d.Nw,this.Rs),this.PL.wn(d.Kw,this.Rs),this.PL.wn(d.wy,this.Rs),this.PL.wn(d.Cw,this.Rs),this.PL.wn(d.Jw,this.Lq),this.PL.wn(Jr.PM,this.NL),this.PL.wn(hc.ma,this.Oq),this.PL.wn(d.xw,this.Rs),this.PL.wn(d.Ew,this.Fq),this.PL.hq.addEventListener("webkitcurrentplaybacktargetiswirelesschanged",this.Uq)}Pq(){this.PL.mn(d.uo,this.Rs),this.PL.mn(d.jw,this.Rs),this.PL.mn(d.py,this.Nc),this.PL.mn(d.Qw,this.Rs),this.PL.mn(d.Ww,this.Rs),this.PL.mn(d.$w,this.Rs),this.PL.mn(d.Zw,this.Mq),this.PL.mn(d.Nw,this.Rs),this.PL.mn(d.Kw,this.Rs),this.PL.mn(d.wy,this.Rs),this.PL.mn(d.Cw,this.Rs),this.PL.mn(d.Jw,this.Lq),this.PL.mn(Jr.PM,this.NL),this.PL.mn(hc.ma,this.Oq),this.PL.mn(d.xw,this.Rs),this.PL.mn(d.Ew,this.Fq),this.PL.hq.removeEventListener("webkitcurrentplaybacktargetiswirelesschanged",this.Uq)}vq(t){if(!t.contentProtection||!t.contentProtection.fairplay)return[];return[{xS:Zg,Vq:[{initDataTypes:[Zg.Jm],videoCapabilities:[{contentType:"video/mp4",encryptionScheme:"cbcs"}]}]}]}Hq(){const t=this.PL.hq.audioTracks,i=this.PL.hq.videoTracks;t&&(t.addEventListener("addtrack",this.Wq),t.addEventListener("removetrack",this.qq),t.addEventListener("change",this.zq)),i&&(i.addEventListener("addtrack",this.Gq),i.addEventListener("removetrack",this.Xq),i.addEventListener("change",this.jq))}Iq(){const t=this.PL.hq.audioTracks,i=this.PL.hq.videoTracks;t&&(t.removeEventListener("addtrack",this.Wq),t.removeEventListener("removetrack",this.qq),t.removeEventListener("change",this.zq)),i&&(i.removeEventListener("addtrack",this.Gq),i.removeEventListener("removetrack",this.Xq),i.removeEventListener("change",this.jq))}dh(t){for(let i=0;i<t.V;i++){t.MI(i).TO()}}$P(){this.PL.$P()}tI(){}Qq(t,i){this.nq||(this.nq=i,this.rq=t,this.So(new el(t)))}constructor(t,i,e,s,n,r,h=new ZI,o=Ob()){super(),this.Nq=void 0,this.PL=void 0,this.aq=void 0,this.tO=void 0,this.sO=void 0,this.Gl=void 0,this.kq=void 0,this.Ac=void 0,this.nq=void 0,this.rq=void 0,this.oq=void 0,this.Cq=void 0,this.xq=void 0,this.Aq=void 0,this.aV=void 0,this.hw=void 0,this.pq=void 0,this.tq=void 0,this.lq=new hu,this.cq=new Jo,this.Oq=t=>{const i=t.lt,e=i.code,s=new as(tE(e),"Something went wrong during native playback.",i),n=new mu(e,s.message,i.message);this.Qq(s,n)},this.Nc=()=>{this.So(new B(this.zx,this.Vx))},this.Kq=()=>{zs.X_&&this.ct===1/0&&this.Xx(1/0)},this.Mq=t=>{this.lP||(this.tq=void 0),this.So(t)},this.NL=t=>{this.tq=void 0},this.Uq=()=>{this.So(new fE(this.sP))},this.Lq=()=>{this.MP>0&&this.DP>0&&this.So(new Vs)},this.Wq=t=>{const i=this.PL.hq.audioTracks;if(i)for(let t=0;t<i.length;t++){const e=i[t];cC(this.tO,e)||this.tO.tt(new cE(e))}},this.qq=t=>{const i=[],e=this.PL.hq.audioTracks;if(e){for(const t of this.tO.NI)dC(e,t.AO)||i.push(t);for(const t of i)this.tO.it(t)}},this.zq=()=>{this.dh(this.tO)},this.Gq=t=>{const i=this.PL.hq.videoTracks;if(i)for(let t=0;t<i.length;t++){const e=i[t];cC(this.sO,e)||this.sO.tt(new lE(e))}},this.Xq=t=>{const i=[],e=this.PL.hq.videoTracks;if(e){for(const t of this.sO.NI)dC(e,t.AO)||i.push(t);for(const t of i)this.sO.it(t)}},this.jq=()=>{this.dh(this.sO)},this.Fq=t=>{this.So(t),this.Qq(t.errorObject,ar(t.errorObject))},this.Nq=i,this.aV=e,this.hw=o,this.PL=this.Nq.Yq(at.Mk),this.oq=this.PL.hq.preload,this.Cq=new Gt(this,this.PL),this.xq=new _s(this.Cq,!0),this.xq.wn(Ii,this.Rs),this.xq.wn(Jr.EM,this.Kq),this.pq=new eC(e,h),this.PL.Rq=this.pq,this.Bq(),this.tO=new Ws,this.sO=new Ws,this.Hq(),this.Aq=new eu(this.PL,this.aV),this.kq=new _P(this.PL,this.PL.nt),this.Gl=new Tu([this.PL.nt,this.Aq.Z,this.kq.Z]),this.be()}};function aC(t){var i,e;if(!(null==(i=(nC||(nC=s&&s.document&&s.document.createElement("video")),e=nC).canPlayType)?void 0:i.call(e,t.type)))return!1;if(t.useNativePlayback)return!0;const n=zs.ru||zs.Tg;return!t.useManagedMediaSource||!n}var uC=class{DC(t,i,e,s,n,r,h){return new oC(t,i,e,s,n,r)}Jq(t,i){return aC(t)}Zq(t){return VT(t)}$q(){return!1}constructor(){this.tz=$.PW}};function cC(t,i){for(const e of t.NI)if(e.AO===i)return e}function dC(t,i){for(let e=0;e<t.length;e++)if(t[e]===i)return!0;return!1}var lC=class{static iz(){return this.Bg}ez(t){this.nz.push(t)}get tz(){return this.rz.tz}DC(t,i,e,s,n,r,h){let o=this.rz.DC(t,i,e,s,n,r,h);for(const t of this.nz)o=t(o,e,s);return o}Jq(t,i){return this.rz.Jq(t,i)}Zq(t){return this.rz.Zq(t)}$q(){return!1}constructor(){this.rz=new uC,this.nz=[]}};function fC(t,i){return xc(t.tz,i.tz)}lC.Bg=new lC,r(),r();var vC=class{oz(t){this.cz.push(t),this.cz.sort(fC)}async lz(t,i){for(const e of this.cz){const s=e.Jq(t,i);if(vo(s)?await s:Boolean(s))return e}}constructor(){this.cz=[]}};function oe(t){_C.Bg.oz(t)}r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r();var _C=class extends vC{fz(t){this.vz=t}_z(){return this.vz}async gz(t,i){const e=this.vz;let s=!1;for(const n of t){const t=await this.lz(n,i);if(t){if(PT(n.contentProtection)||await t.Zq(n.contentProtection))return{Mc:n,t:t};n.contentProtection&&(s=!0)}const r=e.Jq(n,i);if(vo(r)?await r:Boolean(r)){if(PT(n.contentProtection)||await e.Zq(n.contentProtection))return{Mc:n,t:e};n.contentProtection&&(s=!0)}}if(s)throw await zd._m()?new as(me.CONTENT_PROTECTION_NOT_SUPPORTED,"Encrypted content over an insecure connection is not supported."):new as(me.CONTENT_PROTECTION_NOT_SUPPORTED,"The DRM configuration is not supported by this platform.");return{Mc:t[0],t:e}}constructor(...t){super(...t),this.vz=lC.iz()}};_C.Bg=new _C,r();var gC=class{kn(){Ao(this.Ls)}constructor(t){this.Ls=void 0,this.Ls=s&&s.document&&s.document.createElement("div"),Go(this.Ls),t.appendChild(this.Ls)}};r(),r();var Dn=function(t){return t.PW="",t.pz="none",t.zU="metadata",t.HL="auto",t}({});var pC=[hc.ma,d.Rw,d.Dw,d.Ey,d.yw,d.Bw,d.Lw,d.Gw,d.Xw,d.ly,d._y,Jr.SM,Jr.TM,Jr.kM,Jr.EM,Jr.AI,Jr.xM,Jr.PM,d.Ew,d.xw,d.Cw,d.Nw,d.Ww,d.qw,d.uo,d.Qw,d.jw,d.Kw,d.Jw,d.$w,d.Zw,d.py,d.wy,d.Yw,d.zw,d.ey,d.iy,d.oy,d.sy],mC=class extends je{get ht(){return this.tO}get Fx(){return this.oa.Fx}get lt(){return this.oa.lt}get Jx(){return this.oa.Jx}get Vx(){return this.oa.Vx}set Vx(t){this.oa.Vx=t}get bt(){return this.mz}get zx(){return this.oa.zx}set zx(t){this.oa.zx=t}get ct(){return this.oa.ct}get Qx(){return this.oa.Qx}get $x(){return this.eO}get iP(){return this.iO}get sP(){return this.oa.sP}get rP(){return this.oa.rP}get oP(){return this.oa.oP}set oP(t){this.oa.oP=t}get cP(){return this.oa.cP}get lP(){return this.oa.lP}get vP(){return this.oa.vP}set vP(t){this.oa.vP=t}get pP(){return this.oa.pP}get wP(){return this.oq}set wP(t){this.oq=t,this.oa&&(this.oa.wP=this.oq)}get AP(){return this.oa.AP}get kP(){return this.oa.kP}get xP(){return this.oa.xP}get nt(){return this.Gl}get DP(){return this.oa.DP}get rt(){return this.sO}get MP(){return this.oa.MP}get OP(){return this.oa.OP}set OP(t){this.oa.OP=t}get VP(){return this.oa.VP}get dq(){return this.oa.dq}jP(){this.oa.jP()}QP(){const t=this.oa.QP();vo(t)&&Wr(t)}KP(){return this.Ta(void 0)}GP(){}wz(){this.$L.OI=this.oa.Aa(),this.tO.OI=this.oa.ht,this.sO.OI=this.oa.rt,this.Gl.OI=this.oa.nt,this.eO.OI=this.oa.$x,this.iO.OI=this.oa.iP,this.oa.wn(pC,this.Rs)}yz(){this.oa.mn(pC,this.Rs),this.tO.OI=void 0,this.sO.OI=void 0,this.Gl.OI=void 0,this.eO.OI=void 0,this.iO.OI=void 0}nu(){return this.bz}async Ta(t,i){if(fr(i),this.bz=t,!t)return;const e=t.sources.filter(xk);if(Ns(e))return;const s=await this.Az.gz(e,t);fr(i);const n=s.Mc,r=s.t,h=this.qP(),o=Mk(this);(this.Sz!==r||this.lt)&&(this.yz(),await this.oa.kn(),fr(i),this.Sz=r,this.oa=this.Tz(r,n),function(t,i){t.oP!==i.oP&&(t.oP=i.oP);t.OP!==i.OP&&(t.OP=i.OP);t.vP!==i.vP&&(t.vP=i.vP)}(this.oa,o),Ok(this,o,this),this.wz()),this.oa.wP=this.wP,this.kz?this.oa.be():this.oa.we(),await this.oa.Ta(n,t,i),fr(i),this.Ez(n),this.qP()!==h&&this.So(new Vk)}async IP(t,i,e){fr(e);const s=t.sources.filter(xk);if(Ns(s))return;const n=await this.Az.gz(s,t);fr(e);const r=n.Mc,h=n.t;this.Sz!==h||this.lt||await this.oa.IP(r,t,i,e)}CP(){return this.oa.CP()}Ez(t){this.mz!==t&&(this.mz=t,this.So(new Uk(t)))}YP(){return this.oa.YP()}JP(){this.oa.JP()}ZP(){this.oa.ZP()}qP(){return this.oa.qP()}Aa(){return this.$L}$P(){this.oa.$P()}tI(){this.oa.tI()}sI(t){return this.oa.sI(t)}async hr(){this.bz=void 0,this.Ez(void 0),await this.oa.hr()}async kn(){this.Vo(),await this.hr(),await this.oa.kn(),this.tO.kn(),this.sO.kn(),this.Gl.kn(),this.$L.kn(),this.eO.kn(),this.iO.kn()}be(){this.kz=!0,this.oa.be()}we(){this.kz=!1,this.oa.we()}constructor(t,i){super(),this.Az=void 0,this.Sz=void 0,this.oa=void 0,this.mz=void 0,this.oq=Dn.pz,this.bz=void 0,this.kz=!0,this.tO=new Gh,this.sO=new Gh,this.Gl=new ai,this.$L=void 0,this.eO=new zS,this.iO=new se,this.Az=t,this.oa=i,this.oa.wP=this.wP,this.$L=new zk(i.Aa()),this.wz()}};r(),r(),r(),r();var Bs=function(t){return t.pa="fullscreenchange",t.ka="fullscreensupportchange",t.ma="fullscreenerror",t}({});r();var wC=class extends gp{constructor(){super(Bs.ma)}},ks=(Bs.pa,Bs.ka,Bs.ma,class extends Ne{get ds(){return!1}get ca(){return!1}yo(){this.So(new wC)}jo(){}kn(){this.Vo()}});r(),r();var yC=class extends gp{constructor(){super(na.ma)}},Pu=class extends Ne{get JL(){return!1}get YL(){return!1}async yo(){this.So(new yC)}async jo(){this.So(new yC)}kn(){this.Vo()}},bC=class extends Ne{get Vx(){}set Vx(t){}get bt(){}get zx(){return this.xz}set zx(t){this.Xx(t)}Xx(t,i){this.xz!==t&&(this.xz=t,this.Pz=!0,this.So(new ji(this.zx)))}get rP(){return{rO:0,hO:0,oO:0,aO:0,uO:0,cO:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}}}get oP(){return this.Iz}set oP(t){this.Iz!==t&&(this.Iz=t,this.So(new Wi(this.zx,this.OP)))}get lP(){return this.Cz}get vP(){return this.Rz}set vP(t){this.Rz!==t&&(this.Rz=t,this.So(new Ik(this.zx,this.vP)))}get xP(){return this.Pz}get OP(){return this.cA}set OP(t){this.cA!==t&&(this.cA=t,this.So(new Wi(this.zx,this.OP)))}get WP(){return!1}set WP(t){}get dq(){return this.lq}get OL(){}be(){}we(){}QP(){this.Cz&&(this.Cz=!1,this.So(new vt(this.zx)),this.So(new SP(this.zx)))}jP(){this.Cz||(this.Cz=!0,this.So(new B(this.zx,this.Vx)),this.So(new Si(this.zx)))}Ta(t,i){return Promise.resolve()}IP(t,i,e,s){return Promise.resolve()}CP(){return Promise.resolve()}YP(){return!1}JP(){}ZP(){}qP(){return this.ha}Aa(){return this.ea}sI(t){throw new m("Adding a CustomTextTrack is not supported without setting a source.")}$P(){}tI(){}async hr(){this.xz=0,this.Pz=!1,this.jP(),this.So(new ho(this.xz))}async kn(){this.Vo(),this.ht.kn(),this.nt.kn(),this.rt.kn()}constructor(...t){super(...t),this.xz=0,this.Iz=!1,this.Cz=!0,this.Rz=1,this.Pz=!1,this.cA=1,this.ht=new Ws,this.Fx=Uo.rL()._s(),this.ct=NaN,this.Qx=!1,this.lt=void 0,this.Jx=void 0,this.$x=void 0,this.iP=void 0,this.sP=!1,this.cP=!0,this.pP=Uo.rL()._s(),this.wP=Dn.pz,this.AP=Lr.zL,this.kP=Uo.rL()._s(),this.uq=void 0,this.nt=new bc,this.DP=0,this.rt=new Ws,this.MP=0,this.VP=new Jo,this.lq=new hu,this.ha=new ks,this.ea=new Pu}},AC=class extends bC{set Dz(t){this.Nq=t,this.PL=t.Yq(at.Mk)}zP(){var t;return null==(t=this.PL)?void 0:t.hq}async kn(){await super.kn(),this.PL&&(await this.Nq.Dq(this.PL),this.PL=void 0)}constructor(...t){super(...t),this.Nq=void 0,this.PL=void 0}},SC=class extends mC{get xe(){return this.Tu}get WP(){return this.oa.WP}set WP(t){this.oa.WP=t}GP(){super.GP(),this.Bz.Nz()}gr(t){Lk(this,t)}mr(){}iI(t){return!1}async Ta(t,i){const e=this.qP(),s=this.zP();await super.Ta(t,i),this.qP()!==e&&this.So(new Vk),this.zP()!==s&&this.So(new Hk)}Xx(t,i){this.oa.Xx(t,i)}Tz(t,i){return t.DC(this.Tu,this.Bz,this.aV,this.ZS,this.Mz,this.Lz,this.Oz,i)}zP(){return this.oa.zP()}Ox(){return this.Bz.Fz.map(t=>t.hq)}async kn(){await super.kn(),this.Bz.kn(),this.Uz.kn()}constructor(t,i,e,s,n,r,h){const o=new AC;super(_C.Bg,o),this.ZS=void 0,this.Bz=void 0,this.Tu=void 0,this.Oz=void 0,this.aV=void 0,this.Mz=void 0,this.Lz=void 0,this.Uz=void 0,this.Tu=t,this.ZS=i,this.aV=e,this.Mz=s,this.Lz=n,this.Oz=h,this.Bz=r,o.Dz=r,this.Uz=new gC(this.Tu)}};r(),r();var TC=class extends je{get ht(){return this.Vz}get Fx(){return Uo.rL()._s()}get Vx(){return new Date(NaN)}set Vx(t){}get bt(){}get zx(){return 0}set zx(t){}Xx(t,i){}get ct(){return 0}get xe(){return this.Tu}get Qx(){return!0}get lt(){return this.Wz}get Jx(){return this.qz}get $x(){}get iP(){}get rP(){return{rO:0,hO:0,oO:0,aO:0,uO:0,cO:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}}}get oP(){return!1}set oP(t){}get cP(){return!0}get lP(){return!0}get vP(){return 0}set vP(t){}get pP(){return Uo.rL()._s()}get wP(){return Dn.pz}set wP(t){}get AP(){return Lr.zL}get kP(){return Uo.rL()._s()}get xP(){return!1}get nt(){return this.zz}get DP(){return 0}get rt(){return this.Vz}get MP(){return 0}get OP(){return 1}set OP(t){}get VP(){return this.cq}get WP(){return!1}set WP(t){}iI(t){return!0}we(){}QP(){throw this.So(new el(this.qz)),this.Wz}jP(){}nu(){}async Ta(t,i){throw fr(i),this.So(new el(this.qz)),this.Wz}IP(t,i,e){return Promise.resolve()}CP(){return Promise.resolve()}be(){}KP(){return Promise.resolve()}zP(){}qP(){return this.ha}Aa(){return this.ea}Ox(){return[]}GP(){}gr(t){}mr(){}get sP(){return!1}YP(){return!1}JP(){}ZP(){}$P(){}tI(){}sI(t){}hr(){return Promise.resolve()}kn(){return this.Vo(),this.Vz.kn(),this.zz.kn(),Promise.resolve()}constructor(t,i,e){super(),this.Tu=void 0,this.Wz=void 0,this.qz=void 0,this.Vz=void 0,this.zz=void 0,this.ha=new ks,this.ea=new Pu,this.cq=new Jo,this.Tu=t,this.Wz=i,this.Vz=new Ws,this.zz=new bc,this.qz=e}};function kC(t){if(t&&Mc(t))return Y({},t,{integration:EC(t.integration),fairplay:DC(t.fairplay),widevine:xC(t.widevine),playready:PC(t.playready),clearkey:NC(t.clearkey),aes128:BC(t.aes128),integrationParameters:MC(t.integrationParameters),preferredKeySystems:LC(t.preferredKeySystems),useOipfDrmAgent:Th(t.useOipfDrmAgent)})}function EC(t){if(Q(t))return t}function xC(t){if(t&&Mc(t))return{persistentState:IC(t.persistentState),distinctiveIdentifier:IC(t.distinctiveIdentifier),audioRobustness:CC(t.audioRobustness),videoRobustness:CC(t.videoRobustness),licenseAcquisitionURL:Q(t.licenseAcquisitionURL)?t.licenseAcquisitionURL:void 0,licenseType:RC(t.licenseType),headers:t.headers,useCredentials:!!_r(t.useCredentials)&&t.useCredentials,queryParameters:t.queryParameters,certificate:Q(t.certificate)||om(t.certificate)?t.certificate:void 0}}function PC(t){if(!t)return;const i=xC(t);if(!i)return;return Y({},i,{customData:Q(t.customData)?t.customData:void 0})}function IC(t){switch(null==t?void 0:t.toLowerCase()){case"required":return"required";case"optional":return"optional";case"not-allowed":return"not-allowed"}}function CC(t){switch(t){case"HW_SECURE_ALL":return"HW_SECURE_ALL";case"HW_SECURE_DECODE":return"HW_SECURE_DECODE";case"HW_SECURE_CRYPTO":return"HW_SECURE_CRYPTO";case"SW_SECURE_DECODE":return"SW_SECURE_DECODE";case"SW_SECURE_CRYPTO":return"SW_SECURE_CRYPTO";case"":return""}}function RC(t){switch(null==t?void 0:t.toLowerCase()){case"temporary":return"temporary";case"persistent":return"persistent"}}function DC(t){if(!t)return;const i=xC(t);if(!i)return;return Y({},i,{certificateURL:Q(t.certificateURL)?t.certificateURL:void 0})}function NC(t){if(!t)return;const i=xC(t);if(!i)return;const e=hi(t.keys)?t.keys.map(t=>function(t){if(!t||!Mc(t))return;const i=t.id,e=t.value;if(!Q(i)||!Q(e))return;return{id:i,value:e}}(t)).filter(it):void 0;return Y({},i,{keys:e})}function BC(t){if(Mc(t))return{useCredentials:_r(t.useCredentials)?t.useCredentials:void 0}}function MC(t){if(Mc(t))return t}function LC(t){return t&&hi(t)?t.map(t=>FT(t)).filter(it):[Hg,Fg,de]}r(),r(),r(),r();var OC={bt:void 0,zx:0,ct:NaN,Qx:!1,lt:void 0,Jx:void 0,oP:!1,lP:!0,vP:1,AP:Lr.zL,xP:!1,DP:0,MP:0,OP:1};r();var FC=function(t){return t.DEFAULT="",t.THEO="theo",t.CSAI="csai",t.GOOGLE_IMA="google-ima",t.SPOTX="spotx",t.FREEWHEEL="freewheel",t.MEDIATAILOR="mediatailor",t.THEOADS="theoads",t.UPLYNK="uplynk",t}({}),va=class{get Gz(){return this.Xz}jz(t){const i=this.Xz.filter(i=>i.Qz(t));if(i.length>1)0;else if(0===i.length)throw m("Unknown ad integration: "+t.integration);return i[0]||null}Kz(t){this.Xz.push(t)}constructor(){this.Xz=[]}};va.Bg=new va,r(),r(),r(),r();var ri=function(t){return t.PM="PLAYING",t.Yz="PAUSED",t.Jz="SEEK",t.Zz="STALLED",t.$z="FAILED",t.tG="INITIAL_BUFFERING",t.iG="NO_ACCESS",t}({}),ba=function(t){return t.eG="HTTP_REQUEST_STATUS_CODE_1XX",t.sG="HTTP_REQUEST_STATUS_CODE_2XX",t.nG="HTTP_REQUEST_STATUS_CODE_3XX",t.rG="HTTP_REQUEST_STATUS_CODE_4XX",t.hG="HTTP_REQUEST_STATUS_CODE_5XX",t.oG="BUFFER_LENGTH",t.aG="BYTES_RECEIVED",t.uG="SEGMENT_READ_BITRATE",t.cG="SEGMENT_PROFILE_BITRATE",t.dG="VIDEO_PROFILE_BITRATE",t.lG="NUMBER_OF_FRAMES_DROPPED",t.fG="PLAYBACK_POSITION",t.vG="NUMBER_OF_FRAMES_DECODED",t._G="PLAYBACK_DELTA_TO_ORIGIN",t.gG="STREAM_DELTA_TO_ORIGIN",t.pG="ORIGIN_TIMESTAMP",t}({}),ct=function(t){return t.mG="MANIFEST_URI",t.wG="ASSET_DURATION",t.yG="NUMBER_OF_CONTENT_PROFILES",t.bG="CDN",t.AG="CONTENT_TITLE",t.SG="SERVICE_NAME",t.TG="CONTENT_TYPE",t.kG="CONTENT_DESCRIPTION",t}({}),UC=function(t){return t.EG="shutdown_normal_shutdown",t}({}),VC=function(t){return t.xG="session/",t.IG="content/",t.CG="internalError/",t.DG="drmError/",t.NG="caError/",t.BG="networkError/",t}({}),HC=class{get code(){return this.category+this.statusCode}constructor(t,i){this.category=void 0,this.statusCode=void 0,this.category=t,this.statusCode=i}},WC=class extends Ne{};r(),r(),r();var qC=function(t){return t.PAUSE="MG",t.RESUME="OG",t}({}),zC=class extends gp{constructor(){super("FG")}},Ge=class extends Ne{UG(){this.VG=!0}HG(){}kn(){this.VG=!1,this.WG.mn(qC.PAUSE,this.qG),this.WG.mn(qC.RESUME,this.zG)}GG(){return isFinite(this.oa.Nd())}constructor(t,i){super(),this.oa=void 0,this.WG=void 0,this.VG=void 0,this.qG=void 0,this.zG=void 0,this.oa=t,this.WG=i,this.VG=!1,this.qG=()=>{this.HG(),this.VG=!1},this.zG=()=>{this.VG=!0},this.WG.wn(qC.PAUSE,this.qG),this.WG.wn(qC.RESUME,this.zG)}},GC=class extends Ge{UG(){super.UG(),this.XG()}kn(){this.jG(),super.kn()}XG(){this.oa.wn(Jr.xM,this.QG),this.oa.wn(d.jw,this.KG),this.oa.wn(Jr.PM,this.YG),this.oa.wn(d.$w,this.JG),this.oa.wn(d.Zw,this.ZG)}jG(){this.oa.mn(Jr.xM,this.QG),this.oa.mn(d.jw,this.KG),this.oa.mn(Jr.PM,this.YG),this.oa.mn(d.$w,this.JG),this.oa.mn(d.Zw,this.ZG)}$G(){this.tX=!0}iX(){const t=this.oa.Yx(),i=new HC(VC.CG,String(t.code));this.eX(ri.$z,i,t.message)}sX(t){this.VG&&(this.WG.nX(t),this.So(new zC))}eX(t,i,e){this.WG.rX(t,i,e),this.So(new zC)}hX(t,i){this.WG.oX(t,i)}constructor(...t){super(...t),this.tX=!1,this.aX=!1,this.uX=!1,this.QG=()=>{this.aX&&!this.uX&&this.sX(ri.Zz)},this.YG=()=>{this.oa.lP||(this.aX||this.hX(new HC(VC.IG,"firstFrameDisplayed"),"now"),this.aX=!0,this.sX(ri.PM))},this.KG=()=>{this.oa.lP&&(this.aX=!0,this.sX(ri.Yz))},this.JG=()=>{this.tX&&(this.uX=!0,this.tX=!1,this.sX(ri.Jz))},this.ZG=()=>{this.uX=!1,this.oa.lP&&this.sX(ri.Yz)}}};r();var XC=class extends Ge{UG(){super.UG(),this.cX(),this.XG()}kn(){this.jG(),super.kn()}XG(){this.oa.rt.wn(Te.pa,this.cX),this.oa.lX.dX(this.fX),this.oa.wn(d.Cw,this.vX)}jG(){this.oa.rt.mn(Te.pa,this.cX),this.oa.lX._X(this.fX),this.oa.mn(d.Cw,this.vX)}gX(t){t.serviceName&&this.pX(ct.SG,t.serviceName),t.cdn&&this.pX(ct.bG,t.cdn),t.contentTitle&&this.pX(ct.AG,t.contentTitle),t.contentType&&this.pX(ct.TG,t.contentType),t.contentDescription&&this.pX(ct.kG,t.contentDescription)}pX(t,i){this.VG&&this.WG.mX(t,i)}constructor(...t){super(...t),this.vX=()=>{this.GG()&&this.pX(ct.wG,_.round(this.oa.Nd()))},this.fX=t=>{"manifest"===t.request.type&&this.pX(ct.mG,t.url)},this.cX=()=>{const t=hh(this.oa.rt.NI,t=>t.Rt);t&&this.pX(ct.yG,t.$I.V)}}};r();var jC=class extends Ge{UG(){super.UG(),this.wX=this.oa.rP.rO,this.yX=this.oa.rP.oO,this.XG(),this.bX.push(v(this.AX,1e3))}HG(){super.HG(),this.SX()}kn(){this.SX(),this.jG(),this.bX.forEach(p),Wt(this.bX),super.kn()}XG(){this.oa.lX.dX(this.TX),this.oa.wn(d._y,this.kX)}jG(){this.oa.lX._X(this.TX),this.oa.mn(d._y,this.kX)}EX(){this.SX()}xX(t){this.PX+=t,this.IX(ba.aG,this.PX)}CX(t,i){const e=this.RX.get(i)||0;this.IX(t,e)}DX(){const t=this.oa.rP.rO-this.wX;this.IX(ba.lG,t)}NX(){const t=this.oa.rP.oO-this.yX;this.IX(ba.vG,t)}BX(){const t=sc.Bg.pW();this.IX(ba.uG,cm(t))}MX(t){this.IX(ba.cG,cm(t)),this.IX(ba.dG,cm(t))}SX(){if(!this.GG())return;const t=_.round(rn(this.oa.Gx()));this.IX(ba.fG,t)}LX(){const t=Uo.jn(this.oa.Ux()),i=this.oa.Gx(),e=t.iL(i),s=e?rn(e.An(0)-i):0;this.IX(ba.oG,s)}IX(t,i){this.VG&&this.WG.OX(t,i)}constructor(...t){super(...t),this.RX=Ba(),this.PX=0,this.wX=0,this.yX=0,this.bX=[],this.AX=()=>{this.DX(),this.NX(),this.LX()},this.kX=t=>{t.Gk===at.Mk&&(this.xX(t.uO),this.BX(),this.MX(t.FX),this.SX())},this.TX=t=>{const i=t.status.toString()[0],e=this.RX.get(i)||0;this.RX.set(i,e+1),this.CX(ba.eG,"1"),this.CX(ba.sG,"2"),this.CX(ba.nG,"3"),this.CX(ba.rG,"4"),this.CX(ba.hG,"5")}}};r();function QC(t){return t&&t.integration===tR}function KC(t){if(!Q(t.asset))throw new g("Agama source configuration: expected 'asset' to be a string");if(!function(t){return!!Q(t)&&("live"===t||"vod"===t)}(t.streamType))throw new g("Agama source configuration: expected 'streamType' to be 'live' or 'vod'");if(void 0!==t.serviceName&&!function(t){return!!Q(t)&&("live"===t||"svod"===t||"nvod"===t||"tvod"===t||"avod"===t||"catchuptv"===t)}(t.serviceName))throw new g("Agama source configuration: expected 'serviceName' to be 'live', 'svod', 'nvod','tvod', 'avod' or 'catchuptv'");if(void 0!==t.cdn&&!Q(t.cdn))throw new g("Agama source configuration: expected 'cdn' to be a string");if(void 0!==t.contentTitle&&!Q(t.contentTitle))throw new g("Agama source configuration: expected 'contentTitle' to be a string");if(void 0!==t.contentType&&!Q(t.contentType))throw new g("Agama source configuration: expected 'contentType' to be a string");if(void 0!==t.contentDescription&&!Q(t.contentDescription))throw new g("Agama source configuration: expected 'contentDescription' to be a string");return t}function YC(t){if(!Q(t.config))throw new g("Agama player configuration: expected 'config' to be a string");if(void 0!==t.logLevel&&!function(t){return!!Q(t)&&("info"===t||"debug"===t||"warning"===t||"error"===t||"fatal"===t)}(t.logLevel))throw new g("Agama player configuration: expected 'logLevel' to be 'info', 'debug', 'warning','error' or 'fatal'");if(void 0!==t.application&&!Q(t.application))throw new g("Agama player configuration: expected 'application' to be a string");if(void 0!==t.applicationVersion&&!Q(t.applicationVersion))throw new g("Agama player configuration: expected 'applicationVersion' to be a string");if(void 0!==t.userAccountID&&!Q(t.userAccountID))throw new g("Agama player configuration: expected 'userAccountID' to be a string");if(void 0!==t.deviceID&&!Q(t.deviceID))throw new g("Agama player configuration: expected 'deviceID' to be a string");return t}function JC(){let t="00000000-0000-0000-0000-000000000000";const i=s.navigator,e=s.screen;let n=""+i.mimeTypes.length;n+=i.userAgent.replace(/\D+/g,""),n+=i.plugins.length,n+=e.height||"",n+=e.width||"",n+=e.pixelDepth||"",n+=_.floor(1e3*_.random());const r=function(t){let i,e,s=0;if(0===t.length)return"0";for(i=0;i<t.length;i++)e=t.charCodeAt(i),s=(s<<5)-s+e,s|=0;return _.abs(s).toString().substring(0,12)}(n);return t=[t.slice(0,t.length-r.length),r].join(""),t}function ZC(t,i,e){const s=i,n=function(t,i){return gk(i)?t.DsProtocol.APPLE_HLS:t.DsProtocol.MPEG_DASH}(t,s.type),r=function(t,i){let e=t.DsPlaylistType.VOD;"live"===i&&(e=t.DsPlaylistType.LIVE);return e}(t,e.streamType);return{asset:e.asset,playlistType:r,protocol:n,uri:s.src}}r();var Co=function(t){return t.UNAVAILABLE="unavailable",t.AVAILABLE="available",t.CONNECTING="connecting",t.CONNECTED="connected",t}({}),$C=class{UX(){this.oa.mn(hc.ma,this.VX),this.HX(),this.WX(),this.WG.qX()}zX(){this.oa.GX.Ca.chromecast&&this.oa.GX.Ca.chromecast.addEventListener("statechange",this.XX)}WX(){this.oa.GX.Ca.chromecast&&this.oa.GX.Ca.chromecast.removeEventListener("statechange",this.XX)}jX(){return void 0!==this.oa.GX.Ca.chromecast&&this.oa.GX.Ca.chromecast.state===Co.CONNECTED}kn(){this.oa.mn(d.do,this.fo),this.oa.mn(d.uo,this.QX),this.oa.mn(d.Nw,this.KX),this.UX(),this.WG.kn()}YX(){this.JX||(this.JX=new GC(this.oa,this.WG)),this.ZX||(this.ZX=new jC(this.oa,this.WG)),this.$X||(this.$X=new XC(this.oa,this.WG))}UG(){this.JX&&(this.JX.UG(),this.JX.wn("FG",this.tj)),this.ZX&&this.ZX.UG(),this.$X&&this.$X.UG()}HX(){this.JX&&(this.JX.mn("FG",this.tj),this.JX.kn(),this.JX=void 0),this.ZX&&(this.ZX.kn(),this.ZX=void 0),this.$X&&(this.$X.kn(),this.$X=void 0)}gX(t){this.$X&&this.$X.gX(t)}ij(){this.JX&&this.JX.iX()}$G(){this.JX&&this.JX.$G()}constructor(t,i,e){this.oa=void 0,this.WG=void 0,this.JX=void 0,this.$X=void 0,this.ZX=void 0,this.ej=void 0,this.fo=void 0,this.sj=void 0,this.KX=void 0,this.QX=void 0,this.XX=void 0,this.VX=void 0,this.tj=void 0,this.oa=t,this.WG=i,this.fo=()=>{this.sj(),this.KX()},this.sj=()=>{const t=this.oa.nu(),i=t&&t.analytics;this.ej=function(t){void 0===t&&(t=[]);for(const i of t)if(QC(i))return KC(i)}(i)},this.KX=()=>{this.UX(),this.oa.mn(d.uo,this.QX),!this.jX()&&this.WG.nj()&&this.oa.bt&&this.ej&&(this.YX(),this.oa.lP||this.oa.Qx?this.oa.wn(d.uo,this.QX):this.QX())},this.QX=()=>{this.oa.bt&&this.ej&&(this.WG.rj(this.oa.bt,this.ej),this.UG(),this.gX(this.ej),this.zX(),this.oa.wn(hc.ma,this.VX),this.oa.mn(d.uo,this.QX))},this.XX=()=>{this.jX()&&this.UX()},this.VX=()=>{this.ij(),this.UX()},this.tj=()=>{this.ZX&&this.ZX.EX()};const s=function(t){void 0===t&&(t=[]);for(const i of t)if(QC(i))return YC(i)}(e.analytics);s&&this.WG.hj()&&(this.WG.GP(s),this.WG.nj()?(this.WG.aj(),this.oa.wn(d.do,this.fo),this.oa.wn(d.Nw,this.KX)):console.warn("An error occurred while initializing an Agama EMP client. Please check your configuration"))}},tR="agama";r(),r();var Qu=function(t){return t.NONE="",t.HORIZONTAL="horizontal",t.VERTICAL="vertical",t}({});r();var Zo=function(t){return t.NONE="",t.PM360="360",t.PM180="180",t}({});function iR(t){switch(t){case"":return Qu.NONE;case"horizontal":return Qu.HORIZONTAL;case"vertical":return Qu.VERTICAL;default:throw new g}}function eR(t,i){if(i)return Zo.PM360;if(null==t)return Zo.NONE;switch(t){case"":return Zo.NONE;case"360":return Zo.PM360;case"180":return Zo.PM180;default:throw new g("Provided panoramaMode value is not recognized. Expected '', '360' or '180' but value was "+t)}}r();var sR=function(t){return t.ASSET="asset",t.CHANNEL="channel",t.EVENT="event",t}({});r();var nR="https://content.uplynk.com";function Uu(t){if(!t)return!0;const i=!function(t){return Ds(t)||ln(t)&&Ds(t[0])}(t.sources)||Ns(t.sources),e=!t.ads||rR(t.ads),s=""!==t.poster&&!t.poster;return i&&e&&s}function rR(t){return!t||hi(t)&&0===t.length}function hR(t){if(t&&t.sources)return oR(t.sources)}function oR(t){return Q(t)?qu(t):ei(t)?t.type||t.src&&qu(t.src):ln(t)&&t.length>0?oR(t[0]):void 0}function aR(t){if(t&&t.sources)return uR(t.sources)}function uR(t){return Q(t)?t:ei(t)?t.src:ln(t)&&t.length>0?uR(t[0]):void 0}function cR(t,i,e){return mk(t)?function(t,i,e){let s=Y({},Sk(),{ping:{adImpressions:!1,freeWheelVideoViews:!1,linearAdData:!1},integration:uk.UPLYNK,id:"",prefix:nR,preplayParameters:{},playbackUrlParameters:{},assetType:sR.ASSET,contentProtected:!1,assetInfo:!0});s.id=function(t){if(Q(t))return t;if(ln(t)&&Q(t[0]))return t;if(function(t){return Mc(t)&&Q(t.userId)&&(ln(t.externalId)||Q(t.externalId))}(t))return t;return""}(t.id),t.preplayParameters&&(s.preplayParameters=t.preplayParameters);t.playbackUrlParameters&&(s.playbackUrlParameters=t.playbackUrlParameters);t.assetType&&(s.assetType=function(t){switch(t){case"channel":return sR.CHANNEL;case"event":return sR.EVENT;default:return sR.ASSET}}(t.assetType));t.contentProtected&&(s.contentProtected=Th(t.contentProtected));t.assetInfo?s.assetInfo=Th(t.assetInfo):s.assetInfo="asset"===s.assetType;t.prefix&&(s.prefix=Ts(t.prefix)||nR);return s.ping=function(t,i){let e=!1,s=!1,n=!1;i?(e=!!_r(i.adImpressions)&&i.adImpressions,s=!!_r(i.freeWheelVideoViews)&&i.freeWheelVideoViews,n=_r(i.linearAdData)?i.linearAdData:t!==sR.ASSET):t!==sR.ASSET&&(n=!0);return{adImpressions:e,freeWheelVideoViews:s,linearAdData:n}}(s.assetType,t.ping),s=vR(s,t),s=gR(s,i,e),s=_R(s,t,e),s}(t,i,e):yk(t)?function(t,i,e){var s;return Y({},dR(t,i,e),{integration:uk.MEDIATAILOR,adsParams:null!=(s=t.adsParams)?s:{}})}(t,i,e):wk(t)?function(t,i,e){return Y({},dR(t,i,e),{type:"theolive"})}(t,i,e):Xo(t)?lR(t,i,e):dR(t,i,e)}function dR(t,i,e){let s=Tk();const n=i&&(i.contentProtection||i.drm);if(Q(t)){if(s.src=t,s.type=qu(t),n){const t=kC(n);s.contentProtection=HT(t)}}else if(ei(t)||pk(t)||Xo(t)){s.src=t.src,s.type=t.type||qu(t.src),s.isAdvertisement=t.isAdvertisement;const i=Ms(t)?t.hesp:void 0;void 0!==i&&(s.hesp=i);yk(t)&&(s.integration=t.integration);const e=kC(t.contentProtection||t.drm||n);s.contentProtection=HT(e),t.ssai&&(s.ssai=KS(t.ssai)),s=vR(s,t)}return s=gR(s,i,e),s=_R(s,t,e),s}function lR(t,i,e){return Y({},dR(t,i,e),{type:Hi.yC,src:t.src,streamAccountId:t.streamAccountId,subscriberToken:t.subscriberToken,connectOptions:wR(t.connectOptions),apiUrl:t.apiUrl,statsIntervalMs:fR(t.statsIntervalMs)})}function fR(t){if(lo(t)&&t>0)return t}function vR(t,i){var e,s;i.useCredentials?t.crossOrigin=Fa.fC:i.crossOrigin&&(t.crossOrigin=_k(i.crossOrigin)),Q(i.timeServer)&&(t.timeServer=i.timeServer),i.liveOffset&&(t.liveOffset=i.liveOffset),i.hlsDateRange&&(t.hlsDateRange=i.hlsDateRange),i.lowLatency&&(t.lowLatency=Th(i.lowLatency)),i.useNativePlayback&&(t.useNativePlayback=Th(i.useNativePlayback)),i.useManagedMediaSource&&(t.useManagedMediaSource=Th(i.useManagedMediaSource)),i.dash&&(t.dash=WT(i.dash)),i.hls&&(t.hls=qT(i.hls)),i.lcevc&&(t.lcevc=Th(i.lcevc)),i.ignoreEmbeddedTextTrackTypes&&(t.ignoreEmbeddedTextTrackTypes=Pk(i.ignoreEmbeddedTextTrackTypes)),i.latencyConfiguration&&(t.latencyConfiguration=ok(i.latencyConfiguration)),t.seamlessSwitchStrategy=ck(null!=(s=i.seamlessSwitchStrategy)?s:null==(e=i.dash)?void 0:e.useSeamlessPeriodSwitch);const n=Lt(i.experimentalRendering);void 0!==n&&(t.experimentalRendering=n);const r=Lt(i.nativeUiRendering);return void 0!==r&&(t.nativeUiRendering=r),t}function _R(t,i,e){return t.abr=jT(Q(i)?void 0:XT(i.abr),null==e?void 0:e.abr),t}function gR(t,i,e){var s;const n=i&&i.timeServer;return e&&e.liveOffset&&!it(t.liveOffset)&&(t.liveOffset=e.liveOffset),e&&e.hlsDateRange&&!it(t.hlsDateRange)&&(t.hlsDateRange=e.hlsDateRange),t.crossOrigin===Fa.Fk&&(null==i||null==(s=i.vr)?void 0:s[360])&&(t.crossOrigin=Fa.lC),t.useCredentials=t.crossOrigin===Fa.fC,Q(n)&&!t.timeServer&&(t.timeServer=n),t}function pR(t){const i={src:""};if(t&&t.src){if(i.src=Ts(t.src),"default"in t&&(i.default=Th(t.default)),i.kind=function(t){const i=String(t||"").toLowerCase();return $x(i)?i:i?"metadata":"subtitles"}(t.kind),vk(t.format)&&(i.format=t.format),"srclang"in t){const e=t.srclang;"string"==typeof e&&""!==e&&(i.srclang=e)}if("label"in t){const e=t.label;"string"==typeof e&&""!==e&&(i.label=e)}}return i}function mR(t,i){if(Mc(t))try{return i.jz(t).uj(t)}catch(t){return}}function wR(t){if(null==t)return t;if(!Mc(t))throw new m("connectOptions must be an object");return t}function ra(t,i,e){if(void 0===e&&(e=va.Bg),Uu(t))return{sources:[Tk()]};const s=ru(t);if(s.sources=function(t,i,e){if(Ds(t))return[cR(t,i,e)];if(ln(t)&&Ds(t[0])){const s=[];for(const n of t)s.push(cR(n,i,e));return s}return[Tk()]}(s.sources,s,i),"contentProtection"in s&&delete s.contentProtection,"drm"in s&&delete s.drm,"ads"in s){const t=function(t,i){if(!ln(t))return[];const e=[];for(let s of t)s=mR(s,i),s&&e.push(s);return e}(s.ads,e);0===t.length?delete s.ads:s.ads=t}const n=!Ns(s.sources),r=s.ads&&s.ads.length>0;if(n&&!r?delete s.ads:r&&!n&&(s.sources=[]),"textTracks"in s){const t=function(t){if(!ln(t))return[];const i=[];for(let e of t)e=pR(e),""!==e.src&&i.push(e);return i}(s.textTracks);0===t.length?delete s.textTracks:s.textTracks=t}"poster"in s&&(s.poster=Ts(s.poster)),"streamType"in s&&(s.streamType=function(t){switch(t){case"live":case"dvr":case"vod":return t}}(s.streamType)),"vr"in s&&(s.vr=function(t){const i=t||{};return i.stereoMode=function(t){return function(t){switch(t){case"":case"horizontal":case"vertical":return!0;default:return!1}}(t)?t:""}(i.stereoMode),{panoramaMode:eR(i.panoramaMode,Boolean(i[360])),stereoMode:i.stereoMode?iR(i.stereoMode):Qu.NONE,nativeVR:Boolean(i.nativeVR)}}(s.vr));if("analytics"in s||(null==i?void 0:i.analytics)){const t=Ek(s.analytics),e=i&&i.analytics||[];s.analytics=function(t,i){const e=ru(t);for(const s of i){const i=!t.some(t=>t.integration===s.integration);i&&s.integration!==tR&&e.push(s)}return e}(t,e)}return"mutedAutoplay"in s&&(s.mutedAutoplay=Nk(s.mutedAutoplay)),"timeServer"in s&&delete s.timeServer,"playAdsAfterTime"in s&&(s.playAdsAfterTime=bs(s.playAdsAfterTime)),s.blockContentIfAdError=function(t){return void 0!==t&&"boolean"==typeof t&&Boolean(t)}(s.blockContentIfAdError),s}r(),r(),r();var yR=function(){function t(t){this.cj=t}return t.prototype.dj=function(t){var i,e,s,n,r,h,o,a=[];if(!t)return"";var u=t.length%4;if(u>0)for(;u++<4;)t+=this.cj.charAt(64);for(i=0;i<t.length;i+=4)e=(o=this.cj.indexOf(t.charAt(i))<<18|this.cj.indexOf(t.charAt(i+1))<<12|(r=this.cj.indexOf(t.charAt(i+2)))<<6|(h=this.cj.indexOf(t.charAt(i+3))))>>>16&255,s=o>>>8&255,n=255&o,a[i/4]=String.fromCharCode(e,s,n),64===h&&(a[i/4]=String.fromCharCode(e,s)),64===r&&(a[i/4]=String.fromCharCode(e));return a.join("")},t.prototype.lj=function(t,i){var e,s,n,r,h,o,a,u=[],c="";if((o=t.length%3)>0)for(;o++<3;)c+=this.cj.charAt(64),t+="\0";for(o=0;o<t.length;o+=3)s=(e=t.charCodeAt(o)<<16|t.charCodeAt(o+1)<<8|t.charCodeAt(o+2))>>18&63,n=e>>12&63,r=e>>6&63,h=63&e,u[o/3]=this.cj.charAt(s)+this.cj.charAt(n)+this.cj.charAt(r)+this.cj.charAt(h);return a=(a=u.join("")).slice(0,a.length-c.length),i||(a+=c),a},t.bh=new t(function(){var t,i,e,s,n=[],r=["object","$","undefined","function","Cannot find module '","MODULE_NOT_FOUND","*","com.widevine.alpha","urn:mpeg:dash:mp4protection:2011","^","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed","__proto__","@@iterator","getUTCHours","setUTCFullYear","25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?","SegmentBase","RateChangeEvent","Symbol(","Symbol.",'; codecs="'];for(t=0;t<r.length;t+=1)for(i=r[t],e=0;e<i.length;e+=1)s=i.charAt(e),-1===n.indexOf(s)&&n.push(s);return n.join("")}()),t.vj=new t(function(t){return t.dj("aDtm.Dd_DE.4DuN$CeaD $t?FUa0ac'NlYsgU]dU*|sMCON9NL.i'YU M:.LiEb5TLaTOu18F|'v*:s7C41nOMop")}(t.bh)),t}();function rc(t){return"string"==typeof t}function bR(t){return"number"==typeof t}r(),r(),r();var AR={}.toString;var SR,TR=Array.isArray||function(t){return"[object Array]"===AR.call(t)};function ec(t,i){return TR(t)&&t.every(i)}!function(t){t.HTML5="html5",t.ANDROID="android",t.IOS="ios",t.TVOS="tvos",t.ANDROIDTV="androidtv",t.TIZEN="tizen",t.WEBOS="webos",t.CHROMECAST="chromecast",t.ROKU="roku",t.FIRETV="firetv",t.CHROMECASTCAF="chromecastcaf",t.THEOLIVEWEB="theoliveweb",t.KEPLER="kepler"}(SR||(SR={}));var kR,ER=w.keys(SR).map(function(t){return SR[t]});function xR(t){return-1!==ER.indexOf(t)}!function(t){t.HESP="hesp",t.MULTIVIEW="multiview",t.THEOADS="theoads",t.MILLICAST="millicast"}(kR||(kR={}));var PR,IR=w.keys(kR).map(function(t){return kR[t]});function CR(t){return-1!==IR.indexOf(t)}function RR(t){try{var i=yR.vj.dj(t),e=JSON.parse(i);if(!function(t,i){var e,s=function(t){return"object"==typeof t&&null!==t}(t),n=rc(t.key),r=rc(t.customer_id),h=bR(t.generation_date),o=bR(t.expiration_date),a=ec(t.domains_page,rc),u=ec(t.domains_source,rc),c=ec(t.sdks,i?xR:rc),d=function(t){return"boolean"==typeof t}(t.send_impression);t.features?e=ec(t.features,i?CR:rc):(e=!0,t.features=[]);if(!(s&&n&&r&&h&&o&&a&&u&&c&&d&&e))return!1;return!0}(e,!1))throw new m("The provided license could not be decoded correctly.");return e}catch(t){throw new m("The provided license could not be decoded correctly.")}}function DR(){return PR||(PR={Yu:s.location.href,_j:s.parent&&s.parent!==s,gj:BR()}),PR}var NR=["http:","https:","ftp:","ws:","wss:"];function BR(){var t,i;try{var e;if(null==(e=s)?void 0:e.top)return s.top.location.href}catch(t){}return null==(i=s)||null==(t=i.document)?void 0:t.referrer}var MR=function(t){return t[t.pj=0]="pj",t[t.mj=1]="mj",t[t.wj=2]="wj",t}({}),LR=class{constructor(t,i,e,s,n=[],r="",h=Date.now(),o=[],a=!0){this.yj=void 0,this.bj=void 0,this.Aj=void 0,this.Sj=void 0,this.Tj=void 0,this.Ej=void 0,this.xj=void 0,this.Pj=void 0,this.Ij=void 0,this.yj=t,this.bj=i,this.Aj=e,this.Sj=s,this.Tj=n,this.Ej=r,this.xj=h,this.Pj=o,this.Ij=a}},OR=function(t){return t.mj="expired",t.Cj="invaliddomain",t.Rj="invalidsource",t.Dj="invalidfeature",t.ma="error",t}({}),FR=class t{Nj(t,i){let e=[];Ds(t.sources)?e=[t.sources]:ln(t.sources)&&(e=t.sources),this.Bj(t,e,i),this.Mj(e,i)}Bj(t,i,e){if(Uu(t)||0===e.Aj.length||zR(e.Aj))return;if(!i.every(t=>this.Lj(t,e))){const t="invalidsource",i=ea.Oj(t);throw new as(VR(t),i)}}Mj(t,i){for(const e of t)ei(e)&&Ms(e)&&!e.bypassLicense&&this.Fj([kR.HESP],i)}Uj(i){return this.Vj(i.Pj)&&this.Hj(i)?t.Wj(i.Sj)?0:1:2}Fj(t,i){for(const e of t)if(!Ct(i.Tj,e)){const t="invalidfeature",i=ea.qj(t,e);throw new as(VR(t),i)}}Vj(t){return 0===t.length||t.some(t=>this.zj(t))}zj(t){return"web"===function(t){switch(t){case SR.ANDROID:return W.Tv;case SR.ANDROIDTV:case SR.FIRETV:return W.Ev;case SR.IOS:return W.xv;case SR.TVOS:return W.Pv;case SR.CHROMECAST:case SR.CHROMECASTCAF:return W.Iv;case SR.THEOLIVEWEB:return W.Cv;default:return W.Sv}}(t)}static Wj(t){const i=Number(new Date);return!!t&&i<=t}Hj(t){return!(this.Gj&&0!==t.bj.length&&!zR(t.bj))||!!(this.Gj&&this.Xj(t.bj)&&this.jj(t.bj))}Xj(t){return GR(this.Gb.Yu,t)}jj(t){if(!this.Gb._j)return!0;if(this.Qj)return!0;const i=this.Kj();return!!i&&GR(i,t)}Kj(){if(!this.Gb._j)return;const t=hd.ancestorOrigins;return t&&t.length>0?t[t.length-1]:this.Gb.gj?this.Gb.gj:void 0}Lj(i,e){return!!t.Yj(i,e.Aj)}static Yj(t,i){return GR(this.Jj(t),i)}static Jj(t){return Q(t)?t:ei(t)&&t.src||""}constructor(t,i,e){this.Qj=void 0,this.Zj=void 0,this.Gb=void 0,this.Gj=void 0,this.Qj=t,this.Zj=i,this.Gb=e,this.Gj=jR(this.Gb)}},UR=class{Uj(t){return 0}Nj(t,i){}Fj(t,i){}};function VR(t){switch(t){case"invaliddomain":return me.LICENSE_INVALID_DOMAIN;case"invalidsource":return me.LICENSE_INVALID_SOURCE;case"expired":return me.LICENSE_EXPIRED;case"invalidfeature":return me.LICENSE_INVALID_FEATURE;case"error":return me.LICENSE_ERROR}}var HR="25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?",WR=Oc(()=>{const t="\\.",i="(\\*|"+HR+")";return new RegExp("ip-range\\("+i+t+i+t+i+t+i+"\\)")});function qR(t,i){let e=t,s=i;if(!e)return!1;if(s=s.trim(),"*"===s)return!0;if(e=e.replace(/\.+$/,""),s===e)return!0;if(Xt(s,"ip-range(")){const t="\\.",i=s.match(WR()),n=t=>"*"===t?"("+HR+")":t;if(null!==i&&5===i.length){const s=new RegExp("^"+i[1]+t+n(i[2])+t+n(i[3])+t+n(i[4])+"$");return null!==e.match(s)}}return s="."+s,-1!==e.indexOf(s,e.length-s.length)}function zR(t){return t.some(t=>"*"===t)}function GR(t,i){const e=zd.Dh(t);if(!XR(e))return!0;for(const s of i){if(qR(e.hostname,s))return!0;if(qR(TA(t),s))return!0}return!1}function XR(t){return-1!==NR.indexOf(t.protocol)}function jR(t){const i=zd.Dh(t.Yu);return XR(i)&&!function(t){return qR(t.hostname,"localhost")}(i)&&!function(t){return qR(t.hostname,"theoplayer.doubleclick.net")}(i)}var ea=class{static qj(t,i){return"The requested feature '"+i+"' is not available with the license for this player."}static Oj(t){return"invaliddomain"===t?this.$j:"invalidsource"===t?this.tQ:"expired"===t?this.iQ:"invalidfeature"===t?this.eQ:this.sQ}};ea.sQ="The license for this player is invalid.",ea.iQ="The usage license for this video player has expired.",ea.$j="The current domain is incompatible with the license for this player.",ea.tQ="The provided video source is incompatible with the license for this player.",ea.eQ="The requested feature is not available with the license for this player.",r(),r();var QR=function(t){return t[t.nQ=1]="nQ",t[t.rQ=4]="rQ",t[t.hQ=5]="hQ",t[t.oQ=9]="oQ",t}({});function KR(t){const i=[t.zB,t.aQ,t.uQ];switch(t.aQ){case 1:i.push(t.rC);break;case 4:i.push(t.zx),i.push(t.lt);break;case 5:i.push(t.lt);break;case 9:i.push(t.Km)}return i}r();var oo=new Array(256);for(let t=0;t<256;t+=1)oo[t]=(t<16?"0":"")+t.toString(16);function Ve(){const t=zo(),i=(4294967296*_.random()|0)+t&3029421624,e=(4294967296*_.random()|0)+t&3595553209,s=(4294967296*_.random()|0)+t&1130486254,n=(4294967296*_.random()|0)+t&1284287105;return oo[255&i]+oo[i>>>8&255]+oo[i>>>16&255]+oo[i>>>24&255]+"-"+oo[255&e]+oo[e>>>8&255]+"-"+oo[e>>>16&15|64]+oo[e>>>24&255]+"-"+oo[63&s|128]+oo[s>>>8&255]+"-"+oo[s>>>16&255]+oo[s>>>24&255]+oo[255&n]+oo[n>>>8&255]+oo[n>>>16&255]+oo[n>>>24&255]}function Xe(t){return um(t.replace(/-/g,""))}function un(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const i=16*_.random()|0;return("x"===t?i:3&i|8).toString(16)})}function YR(){return zd.Mg()}r(),r(),r();var JR,ZR="theoplayer-session-id";function $R(){if(!JR){const t=Ub.zy(ZR);t?JR=t:(JR=Ve(),Ub.Gy(ZR,JR))}return JR}r(),r();var tD=/[^\x00-\x7E]/g;function iD(t){return"\\u"+Wa(t.charCodeAt(0).toString(16),4,"0")}var eD="https://license.theoplayer.com";function sD(t){const i=function(t){const i=[];return function(t,i,e){return JSON.stringify(t,i,e).replace(tD,iD)}(t,(t,e)=>{if(Mc(e)){if(-1!==i.indexOf(e))return null;i.push(e)}return e})}(function(t){return[t.cQ,t.fS,t.yj,t.ED,t.dQ,t.lQ,t.fQ.map(KR)]}(t));return yR.vj.lj(i)}var nD=class{get fQ(){return this.Zf}vQ(){return Boolean(this.dQ)}get dQ(){return this._Q}async gQ(t){if(!(await this.mQ.pQ()).Ij)return;const i={aQ:QR.nQ,uQ:zo(),rC:t};await this.hX(i)}async wQ(t){if(!(await this.mQ.pQ()).Ij)return;const i={aQ:QR.oQ,uQ:zo(),Km:t};await this.hX(i)}async yQ(t,i){const e={aQ:QR.rQ,uQ:zo(),zx:i,lt:t};await this.hX(e)}async bQ(t){const i={aQ:QR.hQ,uQ:zo(),lt:t};await this.hX(i)}async hX(t){const i=await this.mQ.pQ();"a:n[_O*[C4C-N$_@_MYY $D]iOp]N$_-_]th_:c|aen?C:pH"===this.AQ.lj(i.yj)&&t.aQ!==QR.hQ||(t.aQ===QR.nQ?this.SQ():this.vQ()||this.SQ(),t.zB=this.AA++,this.Zf.push(t),!function(t){return t===QR.nQ||t===QR.hQ}(t.aQ)?this.Zf.length>this.TQ&&await this.kQ():await this.EQ())}async EQ(t){for(void 0===t&&(t=!1);this.Zf.length>0;)await this.kQ(t)}async xQ(t){const i=await this.mQ.pQ();return{cQ:zo(),fS:$R(),yj:this.AQ.lj(i.yj)||"dev",ED:this.XA,dQ:this._Q,lQ:this.IQ,fQ:t}}async kQ(t){void 0===t&&(t=!1);const i=this.Zf.splice(0,this.CQ),e=await this.xQ(i);t?this.Jk(e):this.RQ(e),this.DQ=YR()}async RQ(t){const i=sD(t),e=new ro({Yu:eD,XT:i,Xk:!1,fk:Bi.LT,_k:{"Content-Type":Ju.NH},Wk:4e3,Hk:Qe.POST});try{const t=await this.aV.vk(e);await t.qT()}catch(t){(new Image).src="https://licensing.theoplayer.com/t?"+i}}Jk(t){const i=sD(t);this.aV.Jk({Yu:eD,XT:i,GT:Ju.NH})}SQ(){this.vQ()&&this.EQ(),this._Q=Ve(),this.AA=0}kn(){s.removeEventListener("beforeunload",this.NQ),p(this.BQ),this.EQ()}constructor(t,i,e,n=yR.bh,r=0,h=1){this.XA=void 0,this.aV=void 0,this.mQ=void 0,this.AQ=void 0,this.TQ=void 0,this.CQ=void 0,this.Zf=void 0,this._Q=void 0,this.DQ=void 0,this.IQ=void 0,this.AA=void 0,this.BQ=void 0,this.MQ=void 0,this.NQ=void 0,this.XA=t,this.aV=i,this.mQ=e,this.AQ=n,this.TQ=r,this.CQ=h,this.Zf=[],this._Q=null,this.DQ=0,this.IQ="unknown",this.AA=0,this.MQ=()=>{YR()-this.DQ>6e4&&this.EQ()},this.NQ=()=>{this.EQ(!0)},s.addEventListener("beforeunload",this.NQ),this.BQ=v(this.MQ,6e4)}};r(),r(),r();var rD=0;var hD=c,Os=self.requestAnimationFrame||self.webkitRequestAnimationFrame||self.mozRequestAnimationFrame,Le=self.cancelAnimationFrame||self.webkitCancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelRequestAnimationFrame;Os&&Le||(Os=function(t){const i=YR(),e=_.max(0,16-(i-rD)),s=u(()=>t(i+e),e);return rD=i+e,s},Le=hD),Os=Os.bind(self),Le=Le.bind(self);var oD=zs.L_||zs.ru&&zs.Q_<13;function aD(t,i,e){const s=t.getImageData(i,e,1,1).data;return 0===s[0]&&0===s[1]&&0===s[2]&&0===s[3]}var uD=class{get Ca(){var t;return null!=(t=this.hu)?t:this.hu=function(t){return{drawImage(i){for(var e=arguments.length,s=new Array(e>1?e-1:0),n=1;n<e;n++)s[n-1]=arguments[n];return t.LQ(i,...s)},texImage2D:(i,e,s,n,r,h)=>t.OQ(i,e,s,n,r,h),requestVideoFrameCallback:i=>t.FQ(i),cancelVideoFrameCallback:i=>t.UQ(i)}}(this)}LQ(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];const n=this.VQ;return void 0!==n&&(t.drawImage(n,...e),!0)}OQ(t,i,e,s,n,r){let h=this.VQ;return void 0!==h&&(oD&&(h=this.HQ(h)),t.texImage2D(i,e,s,n,r,h),!0)}FQ(t){const i=this.WQ++,e=this.qQ(t,i);return this.zQ.set(i,{GQ:t,XQ:e}),i}UQ(t){const i=this.zQ.get(t);void 0!==i&&(this.zQ.delete(t),i.XQ())}qQ(t,i){const e=this.VQ;if(void 0===e)return gs;if(e instanceof HTMLVideoElement&&e.requestVideoFrameCallback){const s=e.requestVideoFrameCallback((e,s)=>{this.zQ.delete(i),t(e,s)});return()=>e.cancelVideoFrameCallback(s)}{let e;const s=n=>{this.jQ()?(this.zQ.delete(i),this.QQ=!1,t(n,void 0)):e=Os(s)};return e=Os(s),()=>Le(e)}}jQ(){return(!this.t.lP||this.QQ)&&!this.t.xP&&this.t.AP>=Lr.GL}HQ(t){let i=this.KQ;void 0===i&&(i=h.createElement("canvas"),this.KQ=i);const e=i.getContext("2d"),s=this.t,n=s.MP,r=s.DP,o=i.width,a=i.height;e.clearRect(0,0,i.width,i.height),o===n&&a===r||(i.width=n,i.height=r),e.drawImage(t,0,0,n,r);let u=!1;return n>0&&aD(e,n-1,0)&&(i.width=o,u=!0),r>0&&aD(e,0,r-1)&&(i.height=a,u=!0),u&&e.drawImage(t,0,0,n,r),i}kn(){this.zQ.forEach(t=>t.XQ()),this.zQ.clear(),this.t.mn(d.Lw,this.YQ),this.t.mn(d.Zw,this.JQ),this.VQ=void 0,this.KQ=void 0}constructor(t){this.t=void 0,this.VQ=void 0,this.hu=void 0,this.KQ=void 0,this.zQ=re(),this.WQ=1,this.QQ=!0,this.JQ=()=>{this.QQ=!0},this.YQ=()=>{this.VQ=this.t.zP(),this.zQ.forEach((t,i)=>{t.XQ(),t.XQ=this.qQ(t.GQ,i)})},this.t=t,this.t.wn(d.Lw,this.YQ),this.t.wn(d.Zw,this.JQ),this.YQ()}};r(),r(),r();var Qh=function(t){return t.yn="dimensionchange",t}({}),cD=class extends gp{constructor(t,i){super(Qh.yn),this.width=void 0,this.height=void 0,this.width=t,this.height=i}};r(),r();var dD,lD=class{constructor(t,i){this.xe=void 0,this.GQ=void 0,this.xe=t,this.GQ=i}},fD=class extends lD{get Iu(){return this.ZQ}get Eu(){return this.$Q}kn(){this.tK.disconnect()}constructor(t,i){super(t,i),this.tK=void 0,this.ZQ=0,this.$Q=0,this.iK=t=>{if(t.length>0){const i=t[t.length-1].contentRect;this.$Q=i.width,this.ZQ=i.height,this.GQ(this.$Q,this.ZQ)}},this.tK=new s.ResizeObserver(this.iK),this.tK.observe(this.xe)}};r(),r();var vD=["Webkit","Moz","O","ms"],_D=(()=>{let t=!1;try{if(void 0!==s&&"function"==typeof s.addEventListener){const i=w.defineProperty({},"passive",{get(){t=!0}});s.addEventListener("testPassiveEventSupport",gs,i),s.removeEventListener("testPassiveEventSupport",gs,i)}}catch(t){}return t})(),gD=Ba();function pD(t){return gD.has(t)||gD.set(t,function(t){const i=(dD||(dD=s&&s.document&&s.document.createElement("span")),dD);if(!i||!i.style)return t;if(void 0!==i.style[t])return t;const e=t.charAt(0).toUpperCase()+t.slice(1);for(const t of vD){const s=t+e;if(void 0!==i.style[s])return s}return t}(t)),gD.get(t)}function mD(t){const i=t.style;i.position="absolute",i.left="0",i.right="0",i.bottom="0",i.top="0",i.overflow="scroll",i.zIndex="-1",i.visibility="hidden"}function wD(t){const i=t.style;i.position="absolute",i.left="0",i.top="0",i[pD("transition")]="0s"}var yD=class extends lD{kn(){Le(this.eK),this.eK=0,this.sK.removeEventListener("scroll",this.nK),this.rK.removeEventListener("scroll",this.nK),Ao(this.hK),s&&s.removeEventListener("resize",this.oK)}get Iu(){return this.xe.getBoundingClientRect().height||this.ZQ||0}get Eu(){return this.xe.getBoundingClientRect().width||this.$Q||0}constructor(t,i,e){super(t,i),this.hK=void 0,this.eK=0,this.$Q=NaN,this.ZQ=NaN,this.sK=void 0,this.aK=void 0,this.rK=void 0,this.uK=void 0,this.cK=void 0,this.hr=()=>{const t=1e5;this.aK.style.width=t+"px",this.aK.style.height=t+"px",this.sK.scrollLeft=t,this.sK.scrollTop=t,this.rK.scrollLeft=t,this.rK.scrollTop=t,0===this.rK.scrollTop&&Os(this.hr)},this.dK=()=>{const t=this.Eu,i=this.Iu;this.GQ(t,i),this.$Q=t,this.ZQ=i,this.hr(),this.eK=0},this.nK=()=>{if(this.eK)return;const t=this.Eu,i=this.Iu;t===this.$Q&&i===this.ZQ||(this.eK=Os(this.dK))},this.oK=()=>{this.cK||(this.cK=u(this.lK,66))},this.lK=()=>{this.cK=void 0,this.fK()},this.fK=()=>{this.nK()};const n=function(t,i){return s.getComputedStyle(t,void 0).getPropertyValue(i)||t.style[i]}(t,"position");e||"static"!==n||(t.style.position="relative");const r=h.createElement("div");this.hK=r,this.sK=h.createElement("div"),this.aK=h.createElement("div"),this.rK=h.createElement("div"),this.uK=h.createElement("div"),mD(this.sK),mD(this.rK),wD(this.aK),function(t){wD(t),t.style.width="200%",t.style.height="200%"}(this.uK),r.appendChild(this.sK),r.appendChild(this.rK),this.sK.appendChild(this.aK),this.rK.appendChild(this.uK),t.appendChild(r),this.sK.addEventListener("scroll",this.nK),this.rK.addEventListener("scroll",this.nK),s&&s.addEventListener("resize",this.oK),this.nK()}},bD=class extends Ne{_n(t){this.tK||("function"==typeof s.ResizeObserver?this.tK=new fD(this.xe,this.iK):this.tK=new yD(this.xe,this.iK,t))}kn(){this.Vo(),this.tK&&(this.tK.kn(),this.tK=void 0)}get Iu(){return this.tK?this.tK.Iu:0}get Eu(){return this.tK?this.tK.Eu:0}constructor(t){super(),this.xe=void 0,this.tK=void 0,this.iK=(t,i)=>{this.So(new cD(t,i))},this.xe=t}};r(),r();var AD=class extends gp{constructor(){super(Bs.pa)}};r();var Ps=function(){if(!h)return;const t=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]];for(const i of t)if(i[1]in h)return{vK:i[0],sa:i[1],_K:i[2],gK:i[3],Ze:i[4],pK:i[5]}}();r();var SD=class extends gp{constructor(){super(Bs.ka)}},TD=class t extends Ne{static la(t){return Boolean(Ps&&h[Ps.gK]&&Ps.vK in t)}yo(){const t=this.xe[Ps.vK]();t&&t.then?t.then(this.mK,this.wK):(h.removeEventListener(Ps.pK,this.wK),h.addEventListener(Ps.pK,this.wK))}jo(){const t=h[Ps.sa]();t&&t.then?t.then(this.mK,this.wK):(h.removeEventListener(Ps.pK,this.wK),h.addEventListener(Ps.pK,this.wK))}yK(){const t=this.ds,i=this.xe===h[Ps._K];this.ds=i,t!==i&&this.So(new AD)}bK(){this.So(new wC)}kn(){this.Vo(),h.removeEventListener(Ps.Ze,this.mK),h.removeEventListener(Ps.pK,this.wK)}constructor(i){super(),this.xe=void 0,this.ca=void 0,this.ds=!1,this.mK=()=>this.yK(),this.wK=()=>this.bK(),this.xe=i,this.ca=t.la(i),h.addEventListener(Ps.Ze,this.mK),this.yK()}},kD=class t extends Ne{static la(t){return zs.ru&&("webkitEnterFullscreen"in t||"webkitSupportsPresentationMode"in t)}yo(){this.xe.webkitSupportsPresentationMode&&this.xe.webkitSupportsPresentationMode("fullscreen")?zs.ru?requestAnimationFrame(()=>this.xe.webkitSetPresentationMode("fullscreen")):this.xe.webkitSetPresentationMode("fullscreen"):this.xe.webkitEnterFullscreen()}jo(){this.xe.webkitSupportsPresentationMode&&this.xe.webkitSupportsPresentationMode("inline")?this.xe.webkitSetPresentationMode("inline"):this.xe.webkitExitFullscreen()}yK(){const t=this.ds;let i;i=this.xe.webkitPresentationMode?"fullscreen"===this.xe.webkitPresentationMode:Boolean(this.xe.webkitDisplayingFullscreen),this.ds=i,t!==i&&this.So(new AD)}kn(){this.Vo(),this.xe.removeEventListener("webkitbeginfullscreen",this.mK),this.xe.removeEventListener("webkitendfullscreen",this.mK),this.xe.removeEventListener("webkitpresentationmodechanged",this.mK)}constructor(i){super(),this.xe=void 0,this.ca=void 0,this.ds=!1,this.mK=()=>this.yK(),this.xe=i,this.ca=t.la(i),this.xe.addEventListener("webkitbeginfullscreen",this.mK),this.xe.addEventListener("webkitendfullscreen",this.mK),this.xe.addEventListener("webkitpresentationmodechanged",this.mK),this.yK()}},ED=class extends Ne{get ca(){return!!this.AK&&this.AK.ca}get ds(){return this.SK}yo(){this.AK?this.AK.yo():this.So(new wC)}jo(){for(const t of this.TK)t.ds&&t.jo()}kK(t){this.AK=t}EK(t){this.TK.push(t),t.wn(Bs.pa,this.yK),t.wn(Bs.ma,this.Rs),this.yK()}xK(t){_e(this.TK,t),t.mn(Bs.pa,this.yK),t.mn(Bs.ma,this.Rs)}PK(){for(const t of this.TK)if(t.ds)return!0;return!1}hr(){this.AK=void 0,this.SK=!1;const t=this.TK.slice();for(const i of t)this.xK(i),i.kn();this.yK()}kn(){this.Vo(),this.hr()}constructor(...t){super(...t),this.TK=[],this.AK=void 0,this.SK=!1,this.yK=()=>{const t=this.SK,i=this.PK();t!==i&&(this.SK=i,this.So(new AD))}}},xD=class extends Ne{get ca(){return!!this.IK&&this.CK.ca}get ds(){return this.CK.ds}yo(){this.IK&&this.CK.yo()}jo(){this.CK.jo()}RK(){this.CK.wn([Bs.pa,Bs.ka],this.yK),this.CK.wn(Bs.ma,this.Rs)}DK(){this.CK.mn([Bs.pa,Bs.ka],this.yK),this.CK.mn(Bs.ma,this.Rs)}er(){const t=this.CK,i=this.t.qP();if(t===i)return;this.ga=!0;const e=this.ds,s=this.ca;e&&this.jo(),this.DK(),this.CK=i,this.RK(),e&&!this.ds&&this.ca?this.yo():this.jo(),this.ga=!1,s!==this.ca&&this.So(new SD),e!==this.ds&&this.So(new AD)}kn(){this.Vo(),this.DK(),this.t.mn(d.Bw,this.NK)}constructor(t,i){super(),this.t=void 0,this.IK=void 0,this.CK=void 0,this.ga=!1,this.NK=()=>this.er(),this.yK=t=>{this.ga||this.So(t)},this.t=t,this.IK=i,this.CK=new ks,this.RK(),this.t.wn(d.Bw,this.NK),this.er()}};r(),r(),r();var oc=function(t){return t.MODE_CHANGE="presentationmodechange",t.ERROR="error",t}({}),PD=class extends gp{constructor(t){super(oc.MODE_CHANGE),this.presentationMode=void 0,this.presentationMode=t}};r(),r();var ID=class extends Ne{au(t){for(const i of this.Zf)t.wn(i,this.BK);this.MK.push(t)}LK(t){for(const i of this.Zf)t.mn(i,this.BK);this.MK.push(t)}kn(){this.Vo();for(const t of this.MK)this.LK(t);Wt(this.MK)}constructor(t,i=!1,e){super(e),this.MK=[],this.Zf=void 0,this.BK=void 0,this.FK=t=>{Ht(()=>{this.Rs(t)})},this.Zf=t,this.BK=i?this.FK:this.Rs}},tl=class extends je{au(t){t.lw(this.UK),this.MK.push(t)}LK(t){t.mw(this.UK),_e(this.MK,t)}kn(){this.Vo();for(const t of this.MK)t.mw(this.UK);Wt(this.MK)}constructor(t,i=!1){super(t),this.MK=[],this.UK=void 0,this.FK=t=>{Ht(()=>{this.Rs(t)})},this.UK=i?this.FK:this.Rs}};r();var CD=class extends Oi{get error(){return this.errorObject.message}xa(){return this}constructor(t){super(oc.ERROR),this.errorObject=void 0,this.errorObject=t}};r();var RD=class extends as{constructor(t,i,e){super(t,i,e)}},DD=class extends je{get Ca(){return this.hu||(this.hu=this.xa()),this.hu}xa(){return function(t){let i;const e={get currentMode(){return t.Wo()},requestMode(i){const e=Fk(i);e&&t.Jo(e)},supportsMode(i){const e=Fk(i);return!!e&&t.Xo(e)},addEventListener(t,e){i.wn(t,e)},removeEventListener(t,e){i.mn(t,e)}};return i=new tl(e,!0),i.au(t),e}(this)}Jo(t){this.Yo!==t&&(this.Yo=t,this.ra=!0,this.Ko(t))}Wo(){return this.Yo}Xo(t){switch(t){case Yu.NATIVE_PICTURE_IN_PICTURE:return this.ea.JL;case Yu.FULLSCREEN:return this.ha.ca;case Yu.INLINE:return!0}return!1}Ko(t){switch(this.ta.Zg(),t){case Yu.FULLSCREEN:Wr(this.ta.Zo(t=>this.VK(t)));break;case Yu.NATIVE_PICTURE_IN_PICTURE:Wr(this.ta.Zo(t=>this.HK(t)));break;case Yu.INLINE:Wr(this.ta.Zo(t=>this.WK(t)))}}async VK(t){fr(t),await this.ea.jo().catch(gs),fr(t);try{await this.qK(),this.So(new PD(this.Yo))}catch(i){const e=new RD(me.FULLSCREEN_ERROR,"Failed to enter fullscreen.");throw this.So(new CD(e)),fr(t),this.Jo(Yu.INLINE),e}finally{this.ra=!1}}async HK(t){fr(t),await this.sa().catch(gs),fr(t);try{await this.ea.yo(),this.So(new PD(this.Yo))}catch(i){const e=new RD(me.PICTURE_IN_PICTURE_ERROR,"Failed to enter native picture-in-picture.");throw this.So(new CD(e)),fr(t),this.Jo(Yu.INLINE),e}finally{this.ra=!1}}async WK(t){fr(t),await this.sa().catch(gs),fr(t),await this.ea.jo().catch(gs),this.So(new PD(this.Yo)),this.ra=!1}async qK(){if(this.ha.ds)return;const t=this.ha.ww([Bs.pa,Bs.ma]);if(this.ha.yo(),await t,!this.ha.ds)throw new m("Failed to enter fullscreen.")}async sa(){if(!this.ha.ds)return;const t=this.ha.ww([Bs.pa,Bs.ma]);if(this.ha.jo(),await t,this.ha.ds)throw new m("Failed to exit fullscreen.")}_i(){this.ra||(this.Yo!==Yu.FULLSCREEN||this.ha.ds?this.Yo!==Yu.FULLSCREEN&&this.ha.ds&&this.Jo(Yu.FULLSCREEN):this.Jo(Yu.INLINE))}kn(){this.ha.mn(Bs.pa,this.yK),this.ha.mn(Bs.ma,this.bK),this.ea.mn(na.QL,this.zK),this.ea.mn(na.KL,this.zK),this.ea.mn(na.ma,this.GK),this.Vo()}constructor(t,i){super(),this.Yo=Yu.INLINE,this.ra=!1,this.ha=void 0,this.ea=void 0,this.ta=new Zn,this.hu=void 0,this.yK=()=>{this._i()},this.bK=()=>{this.ra||(this.So(new el(new as(me.FULLSCREEN_ERROR,"Failed to enter fullscreen."))),this._i())},this.zK=()=>{this.ra||(this.Yo!==Yu.NATIVE_PICTURE_IN_PICTURE||this.ea.YL?this.Yo!==Yu.NATIVE_PICTURE_IN_PICTURE&&this.ea.YL&&this.Jo(Yu.NATIVE_PICTURE_IN_PICTURE):this.Jo(Yu.INLINE))},this.GK=()=>{this.ra||(this.So(new CD(new RD(me.PICTURE_IN_PICTURE_ERROR,"Unexpected native picture-in-picture error."))),this.zK())},this.ha=t,this.ea=i,this.ha.wn(Bs.pa,this.yK),this.ha.wn(Bs.ma,this.bK),this.ea.wn(na.QL,this.zK),this.ea.wn(na.KL,this.zK),this.ea.wn(na.ma,this.GK)}};r();var ND=class t{XK(t){return this.jK.Zo(()=>this.QK(t))}GP(){this.Bz.Nz()}async QK(i){const e=this.Bz.Yq(at.Mk),s=e.hq,n=await t.KK(s,i);return await this.Bz.Dq(e),n}static async KK(i,e){return zs.S_||zs.w_?"all":(i.src||(i.src="data:video/mp4;base64,AAAAHGZ0eXBNNFYgAAACAGlzb21pc28yYXZjMQAAAAhmcmVlAAAGF21kYXTeBAAAbGliZmFhYyAxLjI4AABCAJMgBDIARwAAArEGBf//rdxF6b3m2Ui3lizYINkj7u94MjY0IC0gY29yZSAxNDIgcjIgOTU2YzhkOCAtIEguMjY0L01QRUctNCBBVkMgY29kZWMgLSBDb3B5bGVmdCAyMDAzLTIwMTQgLSBodHRwOi8vd3d3LnZpZGVvbGFuLm9yZy94MjY0Lmh0bWwgLSBvcHRpb25zOiBjYWJhYz0wIHJlZj0zIGRlYmxvY2s9MTowOjAgYW5hbHlzZT0weDE6MHgxMTEgbWU9aGV4IHN1Ym1lPTcgcHN5PTEgcHN5X3JkPTEuMDA6MC4wMCBtaXhlZF9yZWY9MSBtZV9yYW5nZT0xNiBjaHJvbWFfbWU9MSB0cmVsbGlzPTEgOHg4ZGN0PTAgY3FtPTAgZGVhZHpvbmU9MjEsMTEgZmFzdF9wc2tpcD0xIGNocm9tYV9xcF9vZmZzZXQ9LTIgdGhyZWFkcz02IGxvb2thaGVhZF90aHJlYWRzPTEgc2xpY2VkX3RocmVhZHM9MCBucj0wIGRlY2ltYXRlPTEgaW50ZXJsYWNlZD0wIGJsdXJheV9jb21wYXQ9MCBjb25zdHJhaW5lZF9pbnRyYT0wIGJmcmFtZXM9MCB3ZWlnaHRwPTAga2V5aW50PTI1MCBrZXlpbnRfbWluPTI1IHNjZW5lY3V0PTQwIGludHJhX3JlZnJlc2g9MCByY19sb29rYWhlYWQ9NDAgcmM9Y3JmIG1idHJlZT0xIGNyZj0yMy4wIHFjb21wPTAuNjAgcXBtaW49MCBxcG1heD02OSBxcHN0ZXA9NCB2YnZfbWF4cmF0ZT03NjggdmJ2X2J1ZnNpemU9MzAwMCBjcmZfbWF4PTAuMCBuYWxfaHJkPW5vbmUgZmlsbGVyPTAgaXBfcmF0aW89MS40MCBhcT0xOjEuMDAAgAAAAFZliIQL8mKAAKvMnJycnJycnJycnXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXiEASZACGQAjgCEASZACGQAjgAAAAAdBmjgX4GSAIQBJkAIZACOAAAAAB0GaVAX4GSAhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGagC/AySEASZACGQAjgAAAAAZBmqAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZrAL8DJIQBJkAIZACOAAAAABkGa4C/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmwAvwMkhAEmQAhkAI4AAAAAGQZsgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGbQC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm2AvwMkhAEmQAhkAI4AAAAAGQZuAL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGboC/AySEASZACGQAjgAAAAAZBm8AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZvgL8DJIQBJkAIZACOAAAAABkGaAC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmiAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpAL8DJIQBJkAIZACOAAAAABkGaYC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmoAvwMkhAEmQAhkAI4AAAAAGQZqgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGawC/AySEASZACGQAjgAAAAAZBmuAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZsAL8DJIQBJkAIZACOAAAAABkGbIC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm0AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZtgL8DJIQBJkAIZACOAAAAABkGbgCvAySEASZACGQAjgCEASZACGQAjgAAAAAZBm6AnwMkhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AAAAhubW9vdgAAAGxtdmhkAAAAAAAAAAAAAAAAAAAD6AAABDcAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAzB0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAABAAAAAAAAA+kAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAALAAAACQAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAPpAAAAAAABAAAAAAKobWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAB1MAAAdU5VxAAAAAAALWhkbHIAAAAAAAAAAHZpZGUAAAAAAAAAAAAAAABWaWRlb0hhbmRsZXIAAAACU21pbmYAAAAUdm1oZAAAAAEAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAhNzdGJsAAAAr3N0c2QAAAAAAAAAAQAAAJ9hdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAALAAkABIAAAASAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAALWF2Y0MBQsAN/+EAFWdCwA3ZAsTsBEAAAPpAADqYA8UKkgEABWjLg8sgAAAAHHV1aWRraEDyXyRPxbo5pRvPAyPzAAAAAAAAABhzdHRzAAAAAAAAAAEAAAAeAAAD6QAAABRzdHNzAAAAAAAAAAEAAAABAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAABAAAAAQAAAIxzdHN6AAAAAAAAAAAAAAAeAAADDwAAAAsAAAALAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAAiHN0Y28AAAAAAAAAHgAAAEYAAANnAAADewAAA5gAAAO0AAADxwAAA+MAAAP2AAAEEgAABCUAAARBAAAEXQAABHAAAASMAAAEnwAABLsAAATOAAAE6gAABQYAAAUZAAAFNQAABUgAAAVkAAAFdwAABZMAAAWmAAAFwgAABd4AAAXxAAAGDQAABGh0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAACAAAAAAAABDcAAAAAAAAAAAAAAAEBAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAQkAAADcAABAAAAAAPgbWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAC7gAAAykBVxAAAAAAALWhkbHIAAAAAAAAAAHNvdW4AAAAAAAAAAAAAAABTb3VuZEhhbmRsZXIAAAADi21pbmYAAAAQc21oZAAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAADT3N0YmwAAABnc3RzZAAAAAAAAAABAAAAV21wNGEAAAAAAAAAAQAAAAAAAAAAAAIAEAAAAAC7gAAAAAAAM2VzZHMAAAAAA4CAgCIAAgAEgICAFEAVBbjYAAu4AAAADcoFgICAAhGQBoCAgAECAAAAIHN0dHMAAAAAAAAAAgAAADIAAAQAAAAAAQAAAkAAAAFUc3RzYwAAAAAAAAAbAAAAAQAAAAEAAAABAAAAAgAAAAIAAAABAAAAAwAAAAEAAAABAAAABAAAAAIAAAABAAAABgAAAAEAAAABAAAABwAAAAIAAAABAAAACAAAAAEAAAABAAAACQAAAAIAAAABAAAACgAAAAEAAAABAAAACwAAAAIAAAABAAAADQAAAAEAAAABAAAADgAAAAIAAAABAAAADwAAAAEAAAABAAAAEAAAAAIAAAABAAAAEQAAAAEAAAABAAAAEgAAAAIAAAABAAAAFAAAAAEAAAABAAAAFQAAAAIAAAABAAAAFgAAAAEAAAABAAAAFwAAAAIAAAABAAAAGAAAAAEAAAABAAAAGQAAAAIAAAABAAAAGgAAAAEAAAABAAAAGwAAAAIAAAABAAAAHQAAAAEAAAABAAAAHgAAAAIAAAABAAAAHwAAAAQAAAABAAAA4HN0c3oAAAAAAAAAAAAAADMAAAAaAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAACMc3RjbwAAAAAAAAAfAAAALAAAA1UAAANyAAADhgAAA6IAAAO+AAAD0QAAA+0AAAQAAAAEHAAABC8AAARLAAAEZwAABHoAAASWAAAEqQAABMUAAATYAAAE9AAABRAAAAUjAAAFPwAABVIAAAVuAAAFgQAABZ0AAAWwAAAFzAAABegAAAX7AAAGFwAAAGJ1ZHRhAAAAWm1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAALWlsc3QAAAAlqXRvbwAAAB1kYXRhAAAAAQAAAABMYXZmNTUuMzMuMTAw"),await t.YK(),!e&&await t.JK(i,!1)?"all":await t.JK(i,!0)?"muted":"none")}static async JK(t,i){t.muted=i;const e=t.play();try{if(!vo(e))return!zs.Ks;const t=Ze(250);return await Promise.race([e,t]),!0}catch(t){return!1}finally{t.pause(),t.muted=!0}}static YK(){return new Promise(t=>{if("function"==typeof MessageChannel){const i=new MessageChannel;i.port1.onmessage=()=>t(),i.port2.postMessage("")}else u(t,0)})}kn(){this.jK.kn()}constructor(t){this.Bz=void 0,this.jK=void 0,this.Bz=t,this.jK=new Zn}},BD=ND;function MD(t){BD=t}function LD(t){let i;return{get url(){return t.Yu},get method(){return t.Hk},get headers(){return i||(i=t._k.OT()),i},get body(){return t.XT},get useCredentials(){return t.Xk},get type(){return t.Km},get subType(){return t.zk},get mediaType(){return t.Gk},get responseType(){return t.fk}}}function OD(t){switch(t.toLowerCase()){case"arraybuffer":return Bi.NT;case"json":return Bi.BT;case"stream":return Bi.MT;default:return Bi.LT}}function FD(t){switch(t.toUpperCase()){case"POST":return Qe.POST;case"PUT":return Qe.PUT;case"DELETE":return Qe.DELETE;case"HEAD":return Qe.HEAD;case"OPTIONS":return Qe.OPTIONS;default:return Qe.GET}}function UD(t){switch(t.toLowerCase()){case"manifest":return q.bk;case"segment":return q.Ak;case"preload-hint":return q.Sk;case"content-protection":return q.Tk;default:return q.yk}}function VD(t){switch(t.toLowerCase()){case"initialization-segment":return he.Ek;case"fairplay-license":return he.xk;case"fairplay-certificate":return he.Pk;case"widevine-license":return he.Ik;case"widevine-certificate":return he.Ck;case"playready-license":return he.Rk;case"clearkey-license":return he.Dk;case"aes128-key":return he.Nk;default:return he.yk}}function HD(t){switch(t.toLowerCase()){case"audio":return $a.Bk;case"video":return $a.Mk;case"text":return $a.LT;case"image":return $a.Lk;default:return $a.yk}}r(),r(),r(),r();var WD=class{get ZK(){return this.$K.Yy}get Ca(){return this.hu||(this.hu=this.tY()),this.hu}get iY(){return this.eY}get sY(){return!this.eY}get nY(){return this.rY>0}get uE(){return this.cE}vD(){this.eY=!0,this.$K.Qy(null)}hY(){this.$K.Ky(new Xb(this.oY))}aY(t){if(!this.sY)throw new g("Cannot respond more than once");if(!Mc(t))throw new g("Expected valid response");this.cE=this.uY(t),this.vD()}cY(){try{const t=this.dY(this.Ca);t?this.lY(t):this.nY||this.iY||this.vD()}catch(t){this.oY.push(t),this.hY()}}lY(t){if(this.iY)throw new m("Request has been redirected or a response already exists");if(vo(t))this.fY(t);else{if("function"!=typeof t)throw new g("Expected promise or function");{const i=new Ga,e=t=>{t?i.Ky(t):i.Qy(void 0)};try{const s=t(e);vo(s)&&i.$g(s)}catch(t){i.Ky(t)}this.fY(i.Yy)}}}async fY(t){try{this.rY++,await t,this.rY--,this.nY||this.iY||(this.oY.length?this.hY():this.vD())}catch(t){this.rY--,this.oY.push(t),this.nY||this.iY||this.hY()}}constructor(t,i){this.vY=void 0,this.dY=void 0,this.$K=void 0,this.oY=void 0,this.hu=void 0,this.eY=void 0,this.cE=void 0,this.rY=void 0,this.vY=t,this.dY=i,this.$K=new Ga,this.oY=[],this.hu=void 0,this.eY=!1,this.cE=void 0,this.rY=0}},qD=class t extends WD{get XT(){return this._Y}get _k(){return this.vY._k}get vk(){return this.vY.vk}get uE(){return this.cE}get dk(){return this.vY.dk}get gk(){return this.vY.gk}get Yu(){return this.vY.wk}static gY(t,i,e){const s=void 0===t.body?e:t.body;return new il({lk:s,vk:i.vk,fk:i.vk.fk,_k:t.headers,dk:t.status,gk:t.statusText,wk:t.url,pk:!0},i)}tY(){return function(t){let i;const e=LD(t.vk);return{get closed(){return!t.sY},get request(){return e},get url(){return t.Yu},get status(){return t.dk},get statusText(){return t.gk},get headers(){return i||(i=t._k.OT()),i},get body(){return t.XT},respondWith:i=>t.aY(i),waitUntil:i=>t.lY(i)}}(this)}uY(i){return t.gY(i,this.vY,this._Y)}constructor(t,i,e){super(t,i),this._Y=void 0,this._Y=e,this.cY()}};r();var zD=class extends WD{get XT(){return this.vY.XT}get sY(){return this.pY&&!this.eY}get _k(){return this.vY._k}get Hk(){return this.vY.Hk}get mY(){return this.wY}get uE(){return this.cE}get fk(){return this.vY.fk}get Wk(){return this.vY.Wk}get qk(){return this.vY.qk}get Yg(){return this.vY.Yg}get Km(){return this.vY.Km}get zk(){return this.vY.zk}get Gk(){return this.vY.Gk}get Yu(){return this.vY.Yu}get Xk(){return this.vY.Xk}get Kk(){return this.vY.Kk}get jk(){return this.vY.jk}get Qk(){return this.vY.Qk}get Yk(){return this.vY.Yk}tY(){return function(t){let i;return{get url(){return t.Yu},get method(){return t.Hk},get headers(){return i||(i=t._k.OT()),i},get body(){return t.XT},get closed(){return!t.sY},get useCredentials(){return t.Xk},get type(){return t.Km},get subType(){return t.zk},get mediaType(){return t.Gk},get responseType(){return t.fk},redirect:i=>t.yY(i),respondWith:i=>t.aY(i),waitUntil:i=>t.lY(i)}}(this)}uY(t){const i=this.vY.XT,e=new il({lk:i,_k:{},vk:this.vY,wk:this.vY.Yu,fk:this.vY.fk,dk:200,gk:"OK"});return qD.gY(t,e,i)}yY(t){if(!this.sY)throw new g("Cannot redirect, already redirected or has a response");let i;i=Q(t)?{url:t}:t,this.wY=function(t,i){return new ro({Yu:void 0===t.url?i.Yu:t.url,Hk:void 0!==t.method?FD(t.method):void 0,_k:t.headers,XT:t.body,Xk:t.useCredentials,Km:void 0!==t.type?UD(t.type):void 0,zk:void 0!==t.subType?VD(t.subType):void 0,Gk:void 0!==t.mediaType?HD(t.mediaType):void 0,fk:void 0!==t.responseType?OD(t.responseType):void 0},i)}(i,this.vY),this.vD()}constructor(t,i,e){super(t,i),this.wY=void 0,this.pY=void 0,this.pY=e,this.cY()}};var GD=class extends yA{bY(t){this.AY.bY(t)}SY(t){this.AY.SY(t)}TY(t){this.AY.TY(t)}dX(t){this.AY.dX(t)}_X(t){this.AY._X(t)}constructor(t,i=!0){const e=new XD(t);super(e,i),this.AY=void 0,this.AY=e}},XD=class{async vk(t){let i;try{i=await this.kY(t,t.Yg)}catch(i){if(i instanceof xA)return await this.EY(i,t.Yg);throw i}if(i=await this.xY(i,t.Yg),pA(i))return i;throw new ir(i)}Jk(t){return this.iE.Jk(t)}async kY(t,i){fr(i);let e,s=t;for(const t of this.PY.slice()){fr(i);const n=new zD(s,t,!e);if(!n.iY)try{await n.ZK}catch(t){0;continue}n.mY&&!e?s=n.mY:n.uE&&!e&&(e=n.uE)}return e||this.iE.vk(s)}async EY(t,i){let e;if(t instanceof ir)e=t.uE;else{const i=t.vk;e=new il({lk:null,vk:i,fk:i.fk,dk:0,gk:""})}const s=await this.xY(e,i);if(s===e)throw t;if(pA(s))return s;throw new ir(s)}async xY(t,i){let e=t;for(const t of this.IY.slice()){fr(i);const s=await Promise.resolve(e.Fy().lk(i)),n=new qD(e,t,s);if(!n.iY)try{await n.ZK}catch(t){0;continue}e=n.uE||e}return e}bY(t){this.PY.unshift(t)}SY(t){this.PY.push(t)}TY(t){_e(this.PY,t)}dX(t){this.IY.unshift(t)}_X(t){_e(this.IY,t)}kn(){this.iE.kn(),Wt(this.PY),Wt(this.IY)}constructor(t){this.iE=void 0,this.PY=[],this.IY=[],this.iE=t}};r();var jD=class{get Ca(){return this.hu||(this.hu=function(t){return{addRequestInterceptor(i){t.bY(i)},removeRequestInterceptor(i){t.TY(i)},addResponseInterceptor(i){t.dX(i)},removeResponseInterceptor(i){t._X(i)}}}(this)),this.hu}bY(t){this.aV.bY(t)}TY(t){this.aV.TY(t)}dX(t){this.aV.dX(t)}_X(t){this.aV._X(t)}constructor(t){this.aV=void 0,this.hu=void 0,this.aV=t}},QD=class extends Ne{get Ca(){return this.hu||(this.hu=function(t){return{get online(){return t.cP},get estimator(){return function(t){return{get bandwidth(){return t.IW},get roundTripTime(){return t.RW}}}(t.CY)},setEstimator(i){t.RY(function(t){if(!t)return;return{get IW(){return PS(t.bandwidth)},get RW(){return PS(t.roundTripTime)},DW:i=>function(t){if(!t)return;return{DY(i){t.markRequestStart(i)},NY(i){t.markResponseStart(i)},BY(i,e){t.markResponseData(i,e)},MY(i){t.markResponseEnd(i)}}}(t.createMeasurer(LD(i)))}}(i))},addRequestInterceptor(i){t.bY(i)},removeRequestInterceptor(i){t.TY(i)},addResponseInterceptor(i){t.dX(i)},removeResponseInterceptor(i){t._X(i)},addEventListener(i,e){t.wn(i,e)},removeEventListener(i,e){t.mn(i,e)}}}(this)),this.hu}get cP(){return this.LY.cP}get CY(){return this.Mz.CY}RY(t){this.Mz.RY(t)}bY(t){this.aV.bY(t)}TY(t){this.aV.TY(t)}dX(t){this.aV.dX(t)}_X(t){this.aV._X(t)}kn(){this.Vo(),this.LY.mn(d.Xw,this.OY),this.LY.mn(d.Gw,this.FY)}constructor(t,i,e){super(i),this.LY=void 0,this.aV=void 0,this.Mz=void 0,this.hu=void 0,this.OY=void 0,this.FY=void 0,this.LY=t,this.aV=i,this.Mz=e,this.OY=t=>{this.So(t)},this.FY=t=>{this.So(t)},this.LY.wn(d.Xw,this.OY),this.LY.wn(d.Gw,this.FY)}};r(),r(),r();var xa=function(t){return t.PERFORMANCE="performance",t.QUALITY="quality",t.BANDWIDTH="bandwidth",t}({});r();function KD(t,i,e,s,n,r){const h=[];let o=t-_.max(r,1),a=t+n;if(i&&e){const t=No(e,1,5),s=i-t;o=_.min(o,s);const n=i+e+t;a=_.max(a,n)}0!==o&&s.jM(0,o)&&h.push([0,o]);return s.jM(a,1/0)&&h.push([a,1/0]),h}function YD(t){return t instanceof m&&"QuotaExceededError"===t.name}r();var JD={type:xa.BANDWIDTH};function ZD(t){const i=ru(JD);return Q(t)?i.type=$D(t):Mc(t)&&function(t){switch(t){case xa.PERFORMANCE:case xa.QUALITY:case xa.BANDWIDTH:return!0;default:return!1}}(t.type)&&(i.type=$D(t.type)),Mc(t)&&Mc(t.metadata)&&(i.metadata=function(t){const i={},e=bs(t.bitrate);return S(e)||(i.bitrate=e),i}(t.metadata)),i}function $D(t){switch(t){case"bandwidth":return xa.BANDWIDTH;case"performance":return xa.PERFORMANCE;case"quality":return xa.QUALITY}}r();var tN=class extends gp{constructor(t){super("UY"),this.VY=void 0,this.VY=t}};r();var iN=class extends gp{constructor(t){super("HY"),this.WY=void 0,this.WY=t}};r();var eN=class extends gp{constructor(t){super("qY"),this.zY=void 0,this.zY=t}},sN=class extends Ne{GY(t){this.XY=t}get jY(){switch(this.QY.type){case xa.PERFORMANCE:return 0;case xa.QUALITY:return 1/0;case xa.BANDWIDTH:return this.QY.metadata&&void 0!==this.QY.metadata.bitrate?this.QY.metadata.bitrate:sc.Bg.pW();default:return sc.Bg.pW()}}get Ca(){return this.hu}get WY(){return this.QY}set WY(t){this.QY=t,this.So(new iN(t))}get VY(){return this.KY}set VY(t){this.KY=t,this.So(new tN(t))}get YY(){return _.min(this.KY,this.JY)}get zY(){return this.ZY}set zY(t){this.ZY=t,this.So(new eN(t))}get $Y(){return this.JY}get CY(){var t;return null!=(t=this.tJ)?t:this.XY.dq}RY(t){this.tJ=t}iJ(t){let i=_.min(t,.8*this.JY);if(i=_.max(10,i),this.JY===i)return!1;const e=this.YY;this.JY=i;const s=this.YY;return s!==e&&this.So(new tN(s)),!0}get eJ(){return this.sJ}set eJ(t){this.sJ=t}constructor(...t){super(...t),this.hu=function(t){return{get strategy(){return function(t){return{metadata:t.metadata,type:t.type}}(t.WY)},set strategy(i){t.WY=ZD(i)},get targetBuffer(){return t.VY},set targetBuffer(i){const e=bs(i);S(e)||(t.VY=e)},get bufferLookbackWindow(){return t.zY},set bufferLookbackWindow(i){const e=bs(i);S(e)||(t.zY=e<=0?30:e)},get maxBufferLength(){return t.$Y},get clearBufferWhenSettingTargetQuality(){return t.eJ},set clearBufferWhenSettingTargetQuality(i){t.eJ=Th(i)}}}(this),this.QY=JD,this.KY=20,this.ZY=30,this.JY=1/0,this.sJ=!1,this.tJ=void 0,this.XY=void 0}};r(),r();var nN=class extends Oi{xa(){return new rN}constructor(){super("bI")}},rN=class extends gp{constructor(){super("change")}};r(),r();var hN=class extends Ne{kn(){this.Vo();for(const t of this.Zf)this.nJ.mn(t,this.rJ)}constructor(t,i,e){super(e),this.nJ=void 0,this.Zf=void 0,this.rJ=t=>{fS(t)&&Ht(()=>{this.So(t.Ca)})},this.nJ=t,this.Zf=i;for(const t of this.Zf)this.nJ.wn(t,this.rJ)}},le=class extends je{kn(){this.Vo(),this.nJ.mw(this.rJ)}constructor(t,i){super(i),this.nJ=void 0,this.rJ=t=>{fS(t)&&Ht(()=>{this.So(t.Ca)})},this.nJ=t,this.nJ.lw(this.rJ)}};var oN=class extends je{get CO(){return this.HO}set CO(t){if(this.RO<=t)throw new m("Start time of a clip should be smaller than the end time.");this.HO!==t&&(this.HO=t,this.So(new nN))}get RO(){return this.zO}set RO(t){if(t<=this.CO)throw new m("End time of a clip should be larger than the start time.");this.zO!==t&&(this.zO=t,this.So(new nN))}get Ca(){return this.hu||(this.hu=function(t){let i;const e={get startTime(){return t.CO},set startTime(i){t.CO=i},get endTime(){return t.RO},set endTime(i){t.RO=i},addEventListener(t,e){i.wn(t,e)},removeEventListener(t,e){i.mn(t,e)}};return i=new le(t,e),e}(this)),this.hu}hr(){0===this.HO&&this.zO===1/0||(this.HO=0,this.zO=1/0,this.So(new nN))}hJ(){return new Uo([this.CO,this.RO],[!0,!0])}constructor(...t){super(...t),this.HO=0,this.zO=1/0,this.hu=void 0}};r();var aN=class t extends lS{Xx(t,i){const e=this.oJ.hJ().LM(t);super.Xx(e,i),this.aJ()}Kx(){return super.Kx()||this.uJ}get cJ(){return this.EP().length?this.EP():this.oJ.hJ()._s()}EP(){return Uo.jn(super.EP()).Mn(this.oJ.hJ())._s()}QP(){this.Kx()?this.Xx(this.cJ.start(0)):this.dJ(),super.QP(),this.aJ()}async Ta(t,i){fr(i),this.uJ=!1,this.oJ.hr(),await super.Ta(t,i)}kn(){return this.oJ.mn("bI",this.lJ),this.Lx.mn(d.py,this.Nc),this.fJ(),super.kn()}eI(t){switch(t.type){case d.$w:return this.So(t),this.vJ(),!0;case d.Zw:case d.Rw:return this.So(t),this._J(),!0;case d.Nw:if(this.gJ)return!0}return super.eI(t)}get gJ(){return this.oJ.RO<this.ct}fJ(){this.pJ&&(Le(this.pJ),this.pJ=void 0)}aJ(){const i=this.zx,e=this.gJ&&i>=this.oJ.RO-t.fd;this.uJ&&!e?(this.uJ=!1,this.lP&&this.QP()):this.uJ||!e||this.xP||this.mJ||(this.uJ=!0,this.So(new ur(i)),this.jP())}dJ(){if(this.ct===1/0)return;const i=this.cJ,e=Uo.jn(i).LM(this.zx);rs(this.zx,e,t.fd)||this.Xx(e)}constructor(i,e){super(i),this.oJ=void 0,this.uJ=!1,this.pJ=void 0,this.mJ=!1,this.lJ=()=>{this.dJ(),this.aJ()},this.Nc=()=>{this.fJ(),this.aJ();this.gJ&&this.zx>=this.oJ.RO-t.wJ&&!this.Qx&&(this.pJ=Os(this.Nc))},this.vJ=()=>{this.mJ=!0},this._J=()=>{this.mJ&&(this.mJ=!1,this.aJ())},this.oJ=e,this.oJ.wn("bI",this.lJ),this.Lx.wn(d.py,this.Nc)}};aN.wJ=1,aN.fd=.001,r();var uN=class{get yJ(){return this.bJ}set yJ(t){this.bJ=t}constructor(){this.bJ=void 0,this.bJ=!1}};r();var cN=class extends lS{Kx(){return!this.bJ.yJ&&super.Kx()}jP(){this.AJ=!0,super.jP()}QP(){this.AJ=!1,super.QP()}eI(t){if(this.bJ.yJ)switch(t.type){case d.Nw:return this.zx=0,this.AJ||(this.xP?this.SJ=!0:this.QP()),!0;case d.Zw:this.SJ&&(this.SJ=!1,this.QP());break;case d.jw:if(this.SJ||super.Kx())return!0}return super.eI(t)}constructor(t,i){super(t),this.bJ=void 0,this.SJ=!1,this.AJ=!1,this.bJ=i}};r(),r();var dN=class{get Ca(){return this.hu}get hO(){return this.oa.rP.hO}get aO(){return this.oa.rP.aO}get rO(){return this.oa.rP.rO}get TJ(){throw new m("Not implemented")}get kJ(){throw new m("Not implemented")}get uO(){return this.oa.rP.uO}get oO(){return this.oa.rP.oO}get cO(){return this.oa.rP.cO}constructor(t){this.oa=void 0,this.hu=void 0,this.oa=t,this.hu=function(t){return{get currentBandwidthEstimate(){return t.aO},get corruptedVideoFrames(){return t.hO},get droppedVideoFrames(){return t.rO},get totalVideoFrames(){return t.oO},get totalBytesLoaded(){return t.uO},get bufferedSegments(){return t.cO}}}(this)}};function lN(t){if(!t||!br(t))return{rO:0,hO:0,oO:0,aO:0,uO:0,cO:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}};if("function"==typeof t.getVideoPlaybackQuality){const i=t.getVideoPlaybackQuality();return{rO:i.droppedVideoFrames,hO:i.corruptedVideoFrames||0,oO:i.totalVideoFrames}}return{rO:t.webkitDroppedFrameCount||0,hO:0,oO:t.webkitDecodedFrameCount||0}}r(),r();var fN=class extends Oi{xa(){return new vN}constructor(){super("EJ")}},vN=class extends gp{constructor(){super("castingchange")}};r();var _N=class extends Ne{get xJ(){var t,i;return(null==(t=this.PJ)?void 0:t.xJ)||(null==(i=this.IJ)?void 0:i.xJ)||!1}get CJ(){return this.PJ}get RJ(){return this.IJ}DJ(t){this.PJ=t,this.NJ(t)}BJ(t){this.IJ=t,this.NJ(t)}NJ(t){t.wn("statechange",this.MJ)}LJ(t){t.mn("statechange",this.MJ)}get Ca(){return this.hu||(this.hu=function(t){let i;const e={get casting(){return t.xJ},get airplay(){var i;return null==(i=t.CJ)?void 0:i.Ca},get chromecast(){var i;return null==(i=t.RJ)?void 0:i.Ca},addEventListener(t,e){i.wn(t,e)},removeEventListener(t,e){i.mn(t,e)}};return i=new hN(t,["EJ"],e),e}(this)),this.hu}kn(){this.Vo(),this.PJ&&(this.LJ(this.PJ),this.PJ=void 0),this.IJ&&(this.LJ(this.IJ),this.IJ=void 0)}constructor(...t){super(...t),this.PJ=void 0,this.IJ=void 0,this.OJ=!1,this.hu=void 0,this.MJ=()=>{const t=this.OJ,i=this.xJ;t!==i&&(this.OJ=i,this.So(new fN))}}};r(),r();var gN=class{static async FJ(t,i){try{const e=new ro({Yu:t,fk:Bi.LT,Hk:Qe.GET}),s=await i.vk(e);return(await s.lk()).trim()}catch(t){return void Ce(t)}}static UJ(t){try{const i=RR(t);return new LR(i.key,i.domains_page,i.domains_source,i.expiration_date,i.features,i.customer_id,i.generation_date,i.sdks,i.send_impression)}catch(t){throw new as(me.LICENSE_ERROR,"Invalid license. No valid license was configured.")}}static VJ(t){void 0===t&&(t=yR.bh),zd.um("The baked-in license is used. Please update the configuration with your license.");const i=t.dj("F2b-iL'[FL[S"),e=JSON.parse('["F$(:_L50F|aY"]').map(i=>t.dj(i)),s=JSON.parse('[".$hsF|b9_Ess*rS:F]Y\\""]').map(i=>t.dj(i)),n=Number(new Date(Number(t.dj('COD|aHpHa:p3Ceo3Co""')))),r=JSON.parse("[]").map(i=>t.dj(i));return new LR(i,e,s,n,r)}static convertLicenseToDummyLicense(t){return new LR(t.yj,t.bj,t.Aj,864e13,t.Tj,t.Ej,Date.now(),t.Pj,t.Ij)}};r();var cu=class t{static DT(){return t.Bg||(t.Bg=pN.US()?new pN:new Fb),t.Bg}static jy(i){t.DT().jy(i)}static CT(){t.DT().CT()}static zy(i){return t.DT().zy(i)}static Gy(i,e){t.DT().Gy(i,e)}static HJ(i){const e=t.zy(i);if(void 0!==e)return C(e)}static WJ(i){return"true"===t.zy(i)}};cu.Bg=void 0;var pN=class extends cu{static US(){const t="foobar";try{return self.localStorage.setItem(t,t),self.localStorage.removeItem(t),!0}catch(t){}return!1}jy(t){self.localStorage.removeItem(t)}CT(){self.localStorage.clear()}zy(t){var i;return null!=(i=self.localStorage.getItem(t))?i:void 0}Gy(t,i){self.localStorage.setItem(t,i)}},mN="https://validate.theoplayer.com/1/",wN=72e5,yN=_.floor(14399999*_.random()-wN),bN="THEOplayer.license",AN=class{async qJ(){const t=await this.zJ(this.GJ.license,this.GJ.licenseUrl);this.mQ.XJ(t)}async zJ(t,i){let e,s=i;t?e=gN.UJ(t):s||(e=gN.VJ()),s||(s=mN+e.yj);const n=this.jJ();let r;if(e&&(r=this.QJ.Uj(e),r===MR.pj)){if(this.KJ(e.Sj)&&this.KJ(null==n?void 0:n.Sj)){const t=await this.YJ(s);if(t)return t}return e}if(n){if(this.QJ.Uj(n)===MR.pj){if(this.KJ(null==n?void 0:n.Sj)){const t=await this.YJ(s);if(t)return t}return n}cu.jy(bN)}const h=await gN.FJ(s,this.aV);let o;if(h){o=gN.UJ(h);if(this.QJ.Uj(o)===MR.pj)return cu.Gy(bN,h),o;cu.jy(bN)}else if(!this.Gj&&e&&r===MR.mj&&s===mN+e.yj)return gN.convertLicenseToDummyLicense(e);if(!e&&!o)throw new as(me.LICENSE_ERROR,"The given license is invalid!");this.JJ(null!=e?e:o,new as(me.LICENSE_ERROR,"The given license is invalid!"))}async Nj(t){let i=await this.mQ.pQ();if(this.KJ(i.Sj)){var e;const t=null!=(e=this.GJ.licenseUrl)?e:mN+i.yj,s=await this.YJ(t);s&&(this.mQ.XJ(s),i=s)}try{const e=this.QJ.Uj(i);if(e===MR.wj){const t=OR.Cj;throw new as(VR(t),ea.Oj(t))}if(e===MR.mj){const t=OR.mj;throw new as(VR(t),ea.Oj(t))}this.QJ.Nj(t,i)}catch(t){this.ZJ(t)}}async Fj(t){const i=await this.mQ.pQ();try{this.QJ.Fj(t,i)}catch(t){this.ZJ(t)}}async YJ(t){try{const i=await gN.FJ(t,this.aV);if(void 0===i)return;const e=gN.UJ(i);return this.QJ.Uj(e)===MR.pj?(cu.Gy(bN,i),e):void 0}catch(t){return}}KJ(t){return!t||Number(new Date)+2592e5+yN>=t}jJ(){const t=cu.zy(bN);if(t)return gN.UJ(t)}JJ(t,i){this.mQ.XJ(t),this.ZJ(i)}ZJ(t){throw Tv(t.message),this.$J.bQ(t.message),t}constructor(t,i,e,s,n,r){this.aV=void 0,this.QJ=void 0,this.$J=void 0,this.mQ=void 0,this.GJ=void 0,this.Gb=void 0,this.Gj=void 0,this.aV=t,this.QJ=i,this.$J=e,this.mQ=s,this.GJ=n,this.Gb=r,this.Gj=jR(r)}};r();var SN=class{XJ(t){this.tZ=t,this.iZ.Qy()}get eZ(){return this.tZ}async pQ(){return this.tZ?Promise.resolve(this.tZ):(await this.iZ.Yy,this.tZ)}constructor(){this.tZ=void 0,this.iZ=new Ga}};r(),r();var TN=class extends Oi{xa(){return new kN}constructor(){super("bI")}},kN=class extends gp{constructor(){super("change")}};function EN(t){let i;const e={get fontFamily(){return t.sZ},set fontFamily(i){t.sZ=i},get fontColor(){return t.nZ},set fontColor(i){t.nZ=i},get fontSize(){return t.rZ},set fontSize(i){t.rZ=i},get backgroundColor(){return t.hZ},set backgroundColor(i){t.hZ=i},get windowColor(){return t.oZ},set windowColor(i){t.oZ=i},get edgeStyle(){return t.aZ},set edgeStyle(i){t.aZ=i},get marginTop(){return t.uZ},set marginTop(i){t.uZ=i},get marginBottom(){return t.cZ},set marginBottom(i){t.cZ=i},get marginLeft(){return t.dZ},set marginLeft(i){t.dZ=i},get marginRight(){return t.lZ},set marginRight(i){t.lZ=i},addEventListener(t,e){const s=vu(t,Ts);i.wn(s,e)},removeEventListener(t,e){const s=vu(t,Ts);i.mn(s,e)}};return i=new _p(e),t.wn(["bI"],t=>i.So(t.Ca)),e}r();var xN={sZ:void 0,nZ:void 0,rZ:void 0,hZ:void 0,oZ:void 0,aZ:void 0,uZ:void 0,cZ:void 0,dZ:void 0,lZ:void 0},ia="THEOplayer.textTrackStyle.",PN=class t extends Ne{get fZ(){return this.vZ}get sZ(){return this.vZ.sZ}set sZ(t){this.er({sZ:t})}get nZ(){return this.vZ.nZ}set nZ(t){this.er({nZ:t})}get rZ(){return this.vZ.rZ}set rZ(t){this.er({rZ:t})}get hZ(){return this.vZ.hZ}set hZ(t){this.er({hZ:t})}get oZ(){return this.vZ.oZ}set oZ(t){this.er({oZ:t})}get aZ(){return this.vZ.aZ}set aZ(t){this.er({aZ:t})}get uZ(){return this.vZ.uZ}set uZ(t){this.er({uZ:t})}get cZ(){return this.vZ.cZ}set cZ(t){this.er({cZ:t})}get lZ(){return this.vZ.lZ}set lZ(t){this.er({lZ:t})}get dZ(){return this.vZ.dZ}set dZ(t){this.er({dZ:t})}get Ca(){return this.hu||(this.hu=EN(this)),this.hu}hr(){this.er(xN)}er(i){this.vZ=Y({},this.vZ,i),t._Z(this.vZ),this.So(new TN)}static gZ(){const t=Y({},xN);return t.sZ=cu.zy(ia+"fontFamily")||t.sZ,t.nZ=cu.zy(ia+"fontColor")||t.nZ,t.rZ=cu.zy(ia+"fontSize")||t.rZ,t.hZ=cu.zy(ia+"backgroundColor")||t.hZ,t.oZ=cu.zy(ia+"windowColor")||t.oZ,t.aZ=cu.zy(ia+"edgeStyle")||t.aZ,t}static _Z(t){cu.Gy(ia+"fontFamily",t.sZ||""),cu.Gy(ia+"fontColor",t.nZ||""),cu.Gy(ia+"fontSize",t.rZ||""),cu.Gy(ia+"backgroundColor",t.hZ||""),cu.Gy(ia+"windowColor",t.oZ||""),cu.Gy(ia+"edgeStyle",t.aZ||"")}constructor(){super(),this.vZ=void 0,this.hu=void 0,this.vZ=t.gZ()}};function IN(t,i){var e,s;t.style.marginLeft=(null!=(e=i.dZ)?e:0)+"px",t.style.marginRight=(null!=(s=i.lZ)?s:0)+"px",t.style.width="calc(100% - "+t.style.marginLeft+" - "+t.style.marginRight+")"}function CN(t){return(null==t?void 0:t.Cd.Km)===O.AV}function yr(t){return(null==t?void 0:t.Cd.Km)===O.SV}r(),r(),r(),r(),r();var RN=[d.uo,d.jw,Jr.PM,d.py,d.Qw,d.Ww,d.$w,d.Zw,d.Nw,d.Kw,d.wy,d.Cw,Jr.AI,d.Jw,hc.ma,jr.Dw,jr.By,d.xw,d.Ew,d.yy,d.Ay,d.LICENSE_REQUEST_GENERATED,d.Fw,d.Vw,d.Lw,d.Bw],DN={BL:!1};function NN(t){return void 0!==t.DP}function BN(t){return t.Cd.Km===O.SV}r();var bi=function(t){return t.pZ="mZ",t}({}),MN=["mZ"],We=function(t){return t[t.wZ=0]="wZ",t[t.MT=1]="MT",t[t.yZ=2]="yZ",t}({});r(),r();var LN=["loadstart","encrypted","waitingforkey","webkitneedkey","msneedkey"],ON=function(t){return t.bZ="AZ",t.SZ="TZ",t.kZ="EZ",t}({}),FN=class extends Ne{get Cd(){return this.ZS}get hq(){return this.pT}async xZ(t,i){const e=await this.hw.nw(t.Ym,i),s=await e.RS();return await this.PZ(s),s}IZ(t){const i=this.ES;return i?0!==t.fq.length&&t.fq.some(t=>t.xS.Ym===i.xS):0!==this.ZS.fq.length?t.fq.some(t=>this.ZS.fq.some(i=>t.xS===i.xS)):0===t.fq.length||!this.CZ}RZ(t){return this.DZ.RZ(t),this.ZS=t,Promise.resolve()}NZ(t){this.DZ.NZ(t)}BZ(){if(!zs.vg)return"";const t=this.GJ.ps5;return"; pass_through="+t.passThrough+'; playmode="'+t.playMode+'";'}async zg(){this.Vo(),this.pT.removeEventListener("loadedmetadata",this.MZ);for(const t of LN)this.pT.removeEventListener(t,this.LZ);await this.ta.kn(),this.OZ(),await this.DZ.hr(),await this.FZ(void 0)}UZ(t){t!==this.VZ&&(this.VZ=t,t?this.HZ.Qy(void 0):this.HZ=new Ga)}PZ(t){return this.ta.Zo(()=>this.FZ(t))}async FZ(t){if(t&&!this.pT.src&&!this.pT.srcObject)throw new fs(me.CONTENT_PROTECTION_ERROR,"Attempted to attach MediaKeys to a sourceless MediaElement");if(!t&&(this.pT.src||this.pT.srcObject))throw new fs(me.CONTENT_PROTECTION_ERROR,"Attempted to remove MediaKeys from a non-empty MediaElement");t&&!this.VZ&&await this.HZ.Yy;const i=this.ES;i&&(await i.IS(this.pT),this.ES=void 0),t&&(await t._n(this.pT),this.ES=t)}Ta(t,i){return this.ta.Zo(()=>this.WZ(t,i))}WZ(t,i){this.UZ(!1);const e=this.PL.vP;if(Q(t)&&i){const e=this.qZ(t,i);this.pT.appendChild(e)}else if(Q(t))this.pT.src=t;else if(function(t){if(void 0!==s.ManagedMediaSource&&t instanceof s.ManagedMediaSource)return!0;if("undefined"!=typeof MediaSource&&t instanceof MediaSource)return!0;return!1}(t))if(function(t){return"srcObject"in t&&zs.ru&&zs.Q_>=17}(this.pT))try{this.pT.srcObject=t}catch(i){this.pT.src=URL.createObjectURL(t)}else this.pT.src=URL.createObjectURL(t);else UN(t)&&(this.pT.srcObject=t);this.PL.vP=e}qZ(t,i){const e=h.createElement("source");return e.src=t,e.type=i+this.BZ(),e}zZ(t){return this.ta.Zo(()=>this.GZ(t))}GZ(t){this.WZ(t),this.pT.load()}OZ(){this.UZ(!1),yf(this.pT)}async XZ(){this.ES&&await this.ES.hr()}constructor(t,i,e,s,n){super(),this.ZS=void 0,this.PL=void 0,this.pT=void 0,this.VZ=!1,this.HZ=new Ga,this.CZ=!1,this.ta=new Zn,this.DZ=void 0,this.hw=void 0,this.GJ=void 0,this.ES=void 0,this.MZ=()=>{this.CZ=!0},this.LZ=()=>{this.UZ(!0)},this.ZS=t,this.PL=i,this.pT=i.hq,this.DZ=e,this.hw=s,this.GJ=n,this.pT.addEventListener("loadedmetadata",this.MZ);for(const t of LN)this.pT.addEventListener(t,this.LZ)}};function UN(t){return"undefined"!=typeof MediaStream&&t instanceof MediaStream}var VN=class extends FN{get Fx(){return Uo.jn(this.pT.buffered)}get ct(){return this.pT.duration}get jZ(){const t=this.ct;if(!isFinite(t))return!1;const i=this.Fx;if(0===i.V)return!1;return t-i.An(i.V-1)<Zt}get wP(){return this.pT.preload}set wP(t){this.pT.preload=t}get kP(){return Uo.jn(this.pT.seekable)}get QZ(){return this.Fx}get KZ(){if(br(this.pT)&&(this.pT.videoWidth>0||this.pT.videoHeight>0))return this.Fx}async GY(){const t=this.Cd;switch(t._q){case Fa.lC:case Fa.fC:this.pT.setAttribute("crossorigin",t._q);break;case Fa.Fk:default:this.pT.removeAttribute("crossorigin")}void 0!==t.wP?this.pT.preload=t.wP:this.pT.preload=Dn.PW,void 0!==t.gq?this.pT.title=t.gq:Ol(this.pT),t.YZ?await this.zZ(t.YZ):zs.vg?await this.Ta(t.rC,t.GT):await this.Ta(t.rC),this.DZ.Un(this,t)}IZ(t){return!1}RZ(t){return Promise.resolve(void 0)}JZ(t){return!1}ZZ(){return!UN(this.ZS.YZ)}async zg(){Ol(this.pT),await super.zg()}static $Z(t,i){return!!i.canPlayType&&Boolean(i.canPlayType(t.GT))}};r();var Et=class extends gp{constructor(t){super(d.Qw),this.currentTime=void 0,this.currentTime=t}};r();var ke=class extends gp{constructor(){super(d.Ww)}};r(),r();var HN=function(t){return t.t$="i$",t}({}),WN=class extends gp{constructor(t){super("i$"),this.e$=void 0,this.e$=t}},qN=class extends Ne{get s$(){return this.n$}r$(t,i){if(rs(t,i,1e-5))return;const e=new Uo([t,i]);this.n$=this.n$.HM(e),this.So(new WN(e))}h$(t,i){this.n$=this.n$.qM(new Uo([t,i]))}hr(){this.n$=Uo.rL()}kn(){this.Vo()}constructor(...t){super(...t),this.n$=Uo.rL()}};function zN(t,i){return void 0===i&&(i=new Jb({highWaterMark:1/0})),new Kb(new GN(t,i),{highWaterMark:0})}r(),r(),r();var GN=class{start(t){this.iZ=t,this.o$()&&this.a$()}pull(){this.tf.length>0?this.u$():this.c$=!0,this.o$()&&this.a$()}cancel(t){return Wt(this.tf),this.if=0,this.c$=!1,this.Wd.cancel(t)}u$(){if(0===this.tf.length)return;const t=this.tf;this.tf=[],this.if=0,this.c$=!1,this.iZ.enqueue(t)}o$(){if(this.c$)return!0;return this.d$-this.if>0}a$(){if(this.l$)return;const t=this.Wd.read().then(this.f$).catch(this.PE);this.l$=t;const i=()=>{this.l$===t&&(this.l$=void 0)};t.then(i,i)}constructor(t,{size:i=()=>1,highWaterMark:e=1}){this.Wd=void 0,this.v$=void 0,this.d$=void 0,this.tf=[],this.if=0,this.iZ=void 0,this.c$=!1,this.l$=void 0,this.f$=t=>t.done?(this.u$(),void this.iZ.close()):(this.tf.push(t.value),this.if+=this.v$(t.value),this.c$&&this.u$(),this.o$()?this.Wd.read().then(this.f$):void 0),this.PE=t=>{this.u$(),this.iZ.error(t)},this.Wd=t.getReader(),this.v$=i,this.d$=e}};r(),r(),r(),r();var XN=class{_$(t){this.g$.push(t),this.Wy+=t.byteLength}p$(t){if(this.Wy<=t)return this.m$();const i=this.g$;let e=0,s=0;for(;s<i.length&&e+i[s].byteLength<=t;)e+=i[s].byteLength,s++;const n=i.slice(0,s);if(s<i.length&&e<t){const r=t-e;0,n.push(yi(i[s],0,r)),e+=r}return{g$:n,Wy:e}}w$(t){const i=this.p$(t);return 1===i.g$.length?i.g$[0]:vm(i.g$,i.Wy)}m$(){return{g$:this.g$,Wy:this.Wy}}y$(t){if(this.Wy<=t)return this.b$();const i=this.g$;let e=0,s=0;for(;s<i.length&&e+i[s].byteLength<=t;)e+=i[s].byteLength,s++;const n=i.splice(0,s);if(i.length>0&&e<t){const s=t-e;0,n.push(yi(i[0],0,s)),i[0]=yi(i[0],s),e+=s}return this.Wy-=e,{g$:n,Wy:e}}A$(t){const i=this.y$(t);return 1===i.g$.length?i.g$[0]:vm(i.g$,i.Wy)}b$(){const t=this.m$();return this.g$=[],this.Wy=0,t}S$(){const t=1===this.g$.length?this.g$[0]:vm(this.g$,this.Wy);return this.g$=[],this.Wy=0,t}constructor(){this.g$=[],this.Wy=0}},Qa=class{T$(t,i){}k$(){}E$(t){this.tf._$(t),this.x$(!1)}P$(){this.x$(!0)}I$(){return 0!==this.Ra||0!==this.tf.Wy}x$(t){for(;0!==this.tf.Wy;){if(!t&&this.C$>this.tf.Wy)return;switch(this.Ra){case 0:this.R$(t);break;case 1:this.D$(t);break;case 2:this.N$(t)}}}B$(){this.Ra=0,this.C$=8}R$(t){const i=dh(this.tf.w$(this.C$)),e=new oi,s=ha.wD(i,e);if(!s.vD)return this.C$=s.bD,void(t&&this.C$>this.tf.Wy&&this.M$(this.tf.Wy));const n=s.yD.Km;let r=s.yD.Wy;0===r&&(r=1/0),this.T$(n,r),this.L$(n)?this.O$(r):this.M$(r)}O$(t){this.Ra=1,this.C$=t}D$(t){const i=dh(this.tf.A$(this.C$)),e=new oi,s=ha._D(i,e,!t);if(!s.vD)throw new yT(e.ac);this.k$(),this.F$(s.gD),this.B$()}M$(t){this.Ra=2,this.C$=0,this.U$=t}N$(t){const i=this.tf.y$(this.U$);this.U$-=i.Wy;for(const t of i.g$)this.V$(t);(0===this.U$||t&&this.U$===1/0)&&(this.k$(),this.B$())}constructor(){this.tf=new XN,this.Ra=0,this.C$=0,this.U$=0,this.B$()}};function jN(t){return t instanceof ey}function QN(t){return t instanceof ty}function KN(t){return t instanceof Jw||t instanceof Zw}function YN(t){return t instanceof Tw}function JN(t){return t instanceof sw}function ZN(t){return t instanceof bl}function $N(t){return t instanceof Vi}function tB(t){return t instanceof fy}function iB(t){return t instanceof Kh}function eB(t){return t instanceof ay}function sB(t){return t instanceof cy}function nB(t,i){const e=hh(t.boxes,eB);if(e&&e.flags.baseDataOffsetPresent)e.baseDataOffset=e.baseDataOffset.add(i);else for(const e of t.boxes)e instanceof cy&&e.flags.dataOffsetPresent&&(e.dataOffset=e.dataOffset+i)}r();var rB=class extends Qa{start(t){this.iZ=t}transform(t){this.E$(t)}flush(){this.P$()}L$(t){return t===ui.HC||t===ui.NR||t===ui.GR}F$(t){const i=this.H$(t);this.iZ.enqueue(i)}V$(t){this.iZ.enqueue(t)}H$(t){const i=ye(t.lk.lk);switch(t.Km){case"moov":return this.W$(i);case"sidx":return this.q$(i);case"moof":return this.z$(i)}return i}get G$(){if(void 0===this.X$)throw new m("Expected to have found a movie header timescale.");return this.X$}j$(t){const i=this.Q$.get(t);if(void 0===i)throw new m("Expected to have found a media header timescale for track ID "+t+".");return i}W$(t){const i=Ry(t);for(let t=0;t<i.boxes.length;t++){const e=i.boxes[t];e instanceof jw?i.boxes[t]=this.K$(e):e instanceof Qw?i.boxes[t]=this.Y$(e):e instanceof ty&&this.J$(e)}for(const t of i.boxes)t instanceof bl&&this.Z$(t);return i.serialize().join()}K$(t){this.X$=t.timescale;const i=Ks(yo.fromNumber(t.duration,!0),this.G$,this.t0);return 0!==i.getHighBits()?this.Y$(function(t){return new Qw({creation:yo.fromNumber(t.creationTime,!0),modification:yo.fromNumber(t.modificationTime,!0),scale:t.timescale,duration:yo.fromNumber(t.duration,!0)},t.nextTrackId,{rate:t.rate,volume:t.volume,matrix:t.matrix},t.flags)}(t)):(t.timescale=this.t0,t.duration=i.toInt(),t)}Y$(t){return this.X$=t.timescale,t.timescale=this.t0,t.duration=Ks(t.duration,this.G$,this.t0),t}J$(t){let i;for(let e=0;e<t.boxes.length;e++){const s=t.boxes[e];s instanceof Jw?(i=s.trackId,t.boxes[e]=this.i0(s)):s instanceof Zw?(i=s.trackId,t.boxes[e]=this.e0(s)):s instanceof Tw?this.s0(s,i):s instanceof fw&&this.n0(s)}}i0(t){const i=Ks(yo.fromNumber(t.duration,!0),this.G$,this.t0);return 0!==i.getHighBits()?this.e0(function(t){return new Zw({creation:yo.fromNumber(t.creationTime,!0),modification:yo.fromNumber(t.modificationTime,!0),duration:yo.fromNumber(t.duration,!0)},t.trackId,t.volume,t.width,t.height,{layer:t.layer,alternateGroup:t.alternateGroup,matrix:t.matrix})}(t)):(t.duration=i.toInt(),t)}e0(t){return t.duration=Ks(t.duration,this.G$,this.t0),t}s0(t,i){for(let e=0;e<t.boxes.length;e++){const s=t.boxes[e];s instanceof yw?t.boxes[e]=this.r0(s,i):s instanceof bw&&(t.boxes[e]=this.h0(s,i))}}r0(t,i){this.Q$.set(i,t.timescale);const e=Ks(yo.fromNumber(t.duration,!0),t.timescale,this.t0);return 0!==e.getHighBits()?this.h0(function(t){return new bw({creation:yo.fromNumber(t.creationTime,!0),modification:yo.fromNumber(t.modificationTime,!0),scale:t.timescale,duration:yo.fromNumber(t.duration,!0)},t.language,t.flags)}(t),i):(t.timescale=this.t0,t.duration=e.toInt(),t)}h0(t,i){return this.Q$.set(i,t.timescale),t.timescale=this.t0,t.duration=Ks(t.duration,t.timescale,this.t0),t}n0(t){for(const i of t.boxes)i instanceof cw?this.o0(i):i instanceof dw&&this.a0(i)}o0(t){for(const i of t.entries)i.mediaTime=oB(i.mediaTime,this.G$,this.t0),i.segmentDuration=oB(i.segmentDuration,this.G$,this.t0)}a0(t){for(const i of t.entries)i.mediaTime=Ks(i.mediaTime,this.G$,this.t0),i.segmentDuration=Ks(i.segmentDuration,this.G$,this.t0)}Z$(t){for(let i=0;i<t.boxes.length;i++){const e=t.boxes[i];e instanceof Vi?this.u0(e):e instanceof Hw?t.boxes[i]=this.c0(e):e instanceof Ww&&(t.boxes[i]=this.d0(e))}}u0(t){const i=this.j$(t.trackId);t.defaultSampleDuration=oB(t.defaultSampleDuration,i,this.t0)}c0(t){const i=Ks(yo.fromNumber(t.fragmentDuration,!0),this.G$,this.t0);return 0!==i.getHighBits()?this.d0(function(t){return new Ww(yo.fromNumber(t.fragmentDuration,!0),t.flags)}(t)):(t.fragmentDuration=i.toInt(),t)}d0(t){return t.fragmentDuration=Ks(t.fragmentDuration,this.G$,this.t0),t}q$(t){let i=Dy(t);return i=i instanceof wy?this.f0(i):this.v0(i),i.serialize().join()}f0(t){const i=t.timescale,e=Ks(yo.fromNumber(t.earliestPresentationTime,!0),i,this.t0);if(0!==e.getHighBits())return this.v0(function(t){return new yy(t.referenceId,t.timescale,yo.fromNumber(t.earliestPresentationTime,!0),yo.fromNumber(t.firstOffset,!0),t.references,t.flags)}(t));t.timescale=this.t0,t.earliestPresentationTime=e.toInt();for(const e of t.references)e.subsegmentDuration=oB(e.subsegmentDuration,i,this.t0);return t}v0(t){const i=t.timescale;t.timescale=this.t0,t.earliestPresentationTime=Ks(t.earliestPresentationTime,i,this.t0);for(const e of t.references)e.subsegmentDuration=oB(e.subsegmentDuration,i,this.t0);return t}z$(t){const i=Ny(t),e=i.getSize();for(const t of i.boxes)t instanceof Kh&&this._0(t);const s=i.getSize();if(s!==e){const t=s-e;for(const e of i.boxes)e instanceof Kh&&nB(e,t)}return i.serialize().join()}_0(t){let i;for(let e=0;e<t.boxes.length;e++){const s=t.boxes[e];s instanceof ay?(i=this.j$(s.trackId),this.g0(s,i)):s instanceof ry?t.boxes[e]=this.p0(s,i):s instanceof hy?t.boxes[e]=this.m0(s,i):s instanceof cy&&this.w0(s,i)}}g0(t,i){void 0!==t.defaultSampleDuration&&(t.defaultSampleDuration=oB(t.defaultSampleDuration,i,this.t0))}p0(t,i){const e=Ks(yo.fromNumber(t.baseMediaDecodeTime,!0),i,this.t0);return 0!==e.getHighBits()?this.m0(function(t){return new hy(yo.fromNumber(t.baseMediaDecodeTime,!0),t.flags)}(t),i):(t.baseMediaDecodeTime=e.toInt(),t)}m0(t,i){return t.baseMediaDecodeTime=Ks(t.baseMediaDecodeTime,i,this.t0),t}w0(t,i){let e=0,s=0;for(const n of t.samples){if(void 0!==n.duration){s+=n.duration;const t=oB(s,i,this.t0);n.duration=t-e,e=t}void 0!==n.compositionTimeOffset&&(n.compositionTimeOffset=hB(n.compositionTimeOffset,i,this.t0))}}constructor(t){super(),this.iZ=void 0,this.t0=void 0,this.X$=void 0,this.Q$=re(),this.t0=t}};function hB(t,i,e){return yo.fromInt(t,!1).multiply(e).divide(i).toNumber()}function oB(t,i,e){return yo.fromInt(t,!0).multiply(e).divide(i).toNumber()}function Ks(t,i,e){return Ae.yF(t).zF(Ae.bF(e,!0)).QF(Ae.bF(i,!0)).NF()}var aB=class{y0(t){return t.pipeThrough(new Yb(this.b0))}constructor(t){this.b0=void 0,this.b0=new rB(t)}};r(),r();var uB=function(t){return t[t.A0=64]="A0",t[t.S0=103]="S0",t[t.T0=107]="T0",t}({});function cB(t,i,e){const s=Cl(t,i);if(s!==e)throw new g("Expected descriptor with tag "+e+", but found "+s)}function dB(t,i){cB(t,i,3);const e=lB(t,i),s=i.ac+e,n=Rn(t,i),r=Cl(t,i),h=!!(64&r),o=!!(32&r),a=31&r;let u,c,d;if(!!(128&r)&&(u=Rn(t,i)),h){c=jp(t,i,Cl(t,i))}o&&(d=jp(t,i,2));const l=function(t,i){cB(t,i,4);const e=lB(t,i),s=i.ac+e,n=Cl(t,i),r=Cl(t,i),h=r>>2,o=!!(2&r),a=Wp(t,i,3),u=ti(t,i),c=ti(t,i);let d;if(i.ac<s){const e=function(t,i){return t.getUint8(i.ac)}(t,i);5===e&&(d=function(t,i){cB(t,i,5);const e=lB(t,i),s=kt(t,i,e);return{k0:5,E0:s}}(t,i))}return i.Oy(s),{k0:4,x0:n,P0:h,I0:o,C0:a,R0:u,D0:c,N0:d}}(t,i);return i.Oy(s),{k0:3,o:n,B0:u,Yu:c,M0:a,L0:d,O0:l}}function lB(t,i){let e=0;for(let s=0;s<4;s++){const s=Cl(t,i);if(e=e<<7|127&s,!(128&s))break}return e}function fB(t,i){const e=Cl(t,i),s=Cl(t,i),n=Cl(t,i),r=Cl(t,i),h=3&Cl(t,i),o=31&Cl(t,i),a=[];for(let e=0;e<o;e++){const e=Rn(t,i);a.push(kt(t,i,e))}const u=Cl(t,i),c=[];for(let e=0;e<u;e++){const e=Rn(t,i);c.push(kt(t,i,e))}return{F0:e,U0:s,V0:n,H0:r,W0:h,q0:a,z0:c}}function kr(t,i,e){if(e&&i.byte>=e)return;const s=t.zy(i.byte);return i.byte+=1,s}function vB(t,i){return function(t,i,e){let s=0,n=e;for(;n>0;)n-=1,s=256*s+kr(t,i);return s}(t,i,2)}r(),r(),r(),r(),r(),r();var wl=class t{G0(t){this.X0=this.X0.concat(t.X0),this.j0+=t.V}Q0(t,i,e){const s=this.j0,n=e-i;n>0&&(this.X0.push({K0:i,Y0:e,J0:n,Z0:s,$0:t}),this.j0+=n)}zy(t){for(const i of this.X0)if(i.Z0<=t&&t<i.Z0+i.J0)return i.$0[t+i.K0-i.Z0]}t1(t,i){let e=i;for(const i of this.X0){const s=i.Y0;for(let n=i.K0;n<s;n+=1,e+=1)t[e]=i.$0[n]}return e}get V(){return this.j0}set V(t){const i=this.X0;let e=this.j0-t;if(!(t>=this.j0))if(this.j0=t,0!==t)for(let t=i.length-1;t>=0;t-=1){const s=i[t];if(e<=s.J0)return s.Y0-=e,s.J0-=e,void(i.length!==t+1&&(i.length=t+1));e-=s.J0}else i.length=0}get lk(){const t=new Array(this.j0);let i=0;for(const e of this.X0){const s=e.Y0;for(let n=e.K0;n<s;n+=1,i+=1)t[i]=e.$0[n]}return t}i1(){const t=new j(this.j0);let i=0;for(const e of this.X0){const s=e.Y0;for(let n=e.K0;n<s;n+=1,i+=1)t[i]=e.$0[n]}return t}Fy(i){const e=new t;for(const t of this.X0)e.Q0(t.$0,t.K0,t.Y0);return e.LU=i||Y({},this.LU),e}constructor(){this.j0=0,this.X0=[],this.LU={}}};r();var _B=[128,64,32,16,8,4,2,1];function ku(t,i){const e=_.floor(i.bit/8),s=0===(t.zy(e)&_B[i.bit%8])?0:1;return i.bit+=1,s}function $u(t,i,e){let s=0,n=e;for(;n>0;)n-=1,s=2*s+ku(t,i);return s}function yt(t,i){let e=0;for(;0===ku(t,i)&&e<32;)e+=1;return $u(t,i,e)+2**e-1}function gB(t,i){const e=yt(t,i);return 1&e?_.floor((e+1)/2):-_.floor(e/2)}function pB(t,i){const e=[],s={byte:1};let n;do{e.push(wB(t,i,s)),n=i.zy(s.byte)}while(void 0!==n&&128!==n);return e}function mB(t,i){let e,s=0;do{e=kr(t,i),s+=e}while(255===e);return s}function wB(t,i,e){const s=mB(i,e),n=mB(i,e),r=e.byte,h=r+n;return e.byte=h,{e1:t,s1:s,n1:n,h1:r,o1:h,a1:i}}var yB=function(t){return t[t.u1=1]="u1",t[t.c1=2]="c1",t[t.d1=3]="d1",t[t.v1=4]="v1",t[t._1=5]="_1",t[t.g1=6]="g1",t[t.m1=7]="m1",t[t.w1=8]="w1",t[t.b1=9]="b1",t}({}),bB=[void 0,[1,1],[12,11],[10,11],[16,11],[40,33],[24,11],[20,11],[32,11],[80,33],[18,11],[15,11],[64,33],[160,99],[4,3],[3,2],[2,1]];function AB(t,i,e){let s=8,n=8;for(let r=0;r<e;r+=1){if(0!==n){n=(s+gB(t,i)+256)%256}s=0===n?s:n}}var SB=class{A1(){const t=this.S1;let i=_.max(0,this.T1+t.length-2);const e=this.E1,s=e.V;let n=0;for(;i<s;i+=1){const s=e.zy(i);0===s?n+=1:(3===s&&n>=2&&t.push(i),n=0)}this.T1=i-t.length}P1(t){const i=this.S1;let e=t;for(const t of i){if(!(t<=e))return e;e+=1}return e}zy(t){if(!(t>this.E1.V))return t>this.T1&&this.A1(),this.E1.zy(this.P1(t))}constructor(t){this.E1=void 0,this.S1=[],this.T1=0,this.E1=t}};function TB(t){const i=new SB(t);let e,s,n,r,h,o,a=0,u=0,c=0,d=0;const l=i.zy(1),f={bit:32};if(yt(i,f),100===l||110===l||122===l||144===l){const t=yt(i,f);3===t&&(e=ku(i,f)),yt(i,f),yt(i,f),ku(i,f);if(1===ku(i,f))for(let e=0;e<(3!==t?8:12);e+=1){1===ku(i,f)&&AB(i,f,e<6?16:64)}}const v=yt(i,f),g=yt(i,f);if(0===g)yt(i,f);else if(1===g){ku(i,f),gB(i,f),gB(i,f);const t=yt(i,f);for(let e=0;e<t;e+=1)gB(i,f)}yt(i,f),ku(i,f);const p=yt(i,f),m=yt(i,f),w=ku(i,f);0===w&&ku(i,f),ku(i,f);1===ku(i,f)&&(a=yt(i,f),u=yt(i,f),c=yt(i,f),d=yt(i,f));if(1===ku(i,f)){if(1===ku(i,f)){const t=$u(i,f,8);if(255===t)s=$u(i,f,16),n=$u(i,f,16);else{const i=bB[t];i&&(s=i[0],n=i[1])}}1===ku(i,f)&&ku(i,f);if(1===ku(i,f)){$u(i,f,3),ku(i,f);1===ku(i,f)&&($u(i,f,8),$u(i,f,8),$u(i,f,8))}1===ku(i,f)&&(yt(i,f),yt(i,f)),r=ku(i,f),1===r&&(h=$u(i,f,32),o=$u(i,f,32),ku(i,f))}return{width:_.floor(16*(p+1)-2*a-2*u),height:_.floor((2-w)*(m+1)*16-2*c-2*d),BB:s,MB:n,I1:r?o/(2*h):void 0,C1:e,R1:v}}function kB(t){const i=wT(Hn.PD(t),ui.HC);if(!i)return;const e=i.yD.jD,s=[];for(const t of i.Z){const i=t.yD.sN,e=t.$D.yD.jD;let o,a,u;for(const i of t.$D.cN.fN._N.pN){const t=EB(i);var n,r,h;if(t)o=null!=(n=t.D1)?n:o,a=null!=(r=t.N1)?r:a,u=null!=(h=t.B1)?h:u}s.push({sN:i,jD:e,D1:o,N1:a,B1:u})}return{jD:e,Z:s}}function EB(t){let i,e,s;if(t.Km===ui.tR){var n;const e=fB(dh(t.ZN.lk),new oi);i=function(t){return"avc1."+xB(t.U0,2)+xB(t.V0,2)+xB(t.H0,2)}(e),s=null==(n=function(t){if(0===t.q0.length)return;const i=t.q0[0],e=new wl;return e.Q0(i,0,i.byteLength),TB(e)}(e))?void 0:n.I1}else if(t.Km===ui.eR||t.Km===ui.sR){const e=function(t,i){const e=i.Hy(),s=vs(t,e,8),n=vs(t,e,2),r=vs(t,e,1),h=vs(t,e,5),o=vs(t,e,32),a=[];for(let i=0;i<6;i++)a.push(vs(t,e,8));const u=vs(t,e,8);e.Ly(4);const c=vs(t,e,12);e.Ly(6);const d=vs(t,e,2);e.Ly(6);const l=vs(t,e,2);e.Ly(5);const f=vs(t,e,3);e.Ly(5);const v=vs(t,e,3),_=vs(t,e,16),g=vs(t,e,2),p=vs(t,e,3),m=vs(t,e,1),w=vs(t,e,2),y=vs(t,e,8),b=[];for(let i=0;i<y;i++){const i=vs(t,e,1);e.Ly(1);const s=vs(t,e,6),n=vs(t,e,16),r=[];for(let i=0;i<n;i++){const i=vs(t,e,16),s=kt(t,new oi(e.ac>>3),i);e.Ly(8*i),r.push({M1:i,L1:s})}b.push({O1:i,F1:s,U1:n,V1:r})}return{F0:s,H1:n,W1:r,q1:h,z1:a,G1:u,X1:c,j1:d,Q1:o,K1:l,Y1:f,J1:v,Z1:_,t2:p,i2:m,e2:g,W0:w,s2:y,n2:b}}(dh(t.eB.lk),new oi);i=function(t,i){let e=t.toString()+".";switch(i.H1){case 0:break;case 1:e+="A";break;case 2:e+="B";break;case 3:e+="C";break;default:return}switch(e+=i.q1.toString()+".",e+=function(t){let i=t;return i=i>>>1&1431655765|(1431655765&i)<<1,i=i>>>2&858993459|(858993459&i)<<2,i=i>>>4&252645135|(252645135&i)<<4,i=i>>>8&16711935|(16711935&i)<<8,i=i>>>16|i<<16,i}(i.Q1).toString(16)+".",i.W1){case 0:e+="L";break;case 1:e+="H";break;default:return}e+=i.G1.toString();const s=i.z1.reduce((t,i)=>0===t?i:i+1,0);for(let t=0;t<s;t++)e+="."+i.z1[t].toString(16).toUpperCase();return e}(t.Km,e)}else if(t.Km===ui.vR||t.Km===ui._R||t.Km===ui.gR||t.Km===ui.pR){const e=function(t,i){const e=i.Hy(),s=vs(t,e,8),n=vs(t,e,8),r=vs(t,e,7),h=vs(t,e,6),o=Boolean(vs(t,e,1)),a=Boolean(vs(t,e,1)),u=Boolean(vs(t,e,1)),c=vs(t,e,4);return vs(t,e,28),vs(t,e,32),vs(t,e,32),vs(t,e,32),vs(t,e,32),{h2:s,o2:n,a2:r,u2:h,c2:o,d2:a,l2:u,f2:c}}(dh(t._B.lk),new oi);i=function(t,i){const e=t.toString(),s=Wa(i.a2.toString(),2,"0"),n=Wa(i.u2.toString(),2,"0");return e+"."+s+"."+n}(t.Km,e)}else if(t.Km===ui.rR){const e=function(t,i){const e=i.Hy(),s=vs(t,e,8);e.Ly(24);const n=vs(t,e,8),r=vs(t,e,8),h=vs(t,e,4),o=vs(t,e,3),a=Ru(t,e),u=vs(t,e,8),c=vs(t,e,8),d=vs(t,e,8),l=vs(t,e,16),f=new Array(8);for(let i=0;i<l;i++)f[i]=vs(t,e,8);return{F0:s,a2:n,u2:r,_2:h,g2:o,m2:a,CB:u,RB:c,DB:d,w2:l,b2:f}}(dh(t.nB.lk),new oi);i=function(t,i){let e=t.toString()+".";return e+="0"+i.a2+".",e+=Wa(""+i.u2,2,"0")+".",e+=Wa(""+i._2,2,"0")+".",e+=Wa(""+i.g2,2,"0")+".",e+=Wa(""+i.CB,2,"0")+".",e+=Wa(""+i.RB,2,"0")+".",e+=Wa(""+i.DB,2,"0")+".",e+="0"+i.m2,e}(t.Km,e)}else if(t.Km===ui.oR){const e=function(t,i){const e=i.Hy();e.Ly(1);const s=vs(t,e,7),n=vs(t,e,3),r=vs(t,e,5),h=Ru(t,e),o=Ru(t,e),a=Ru(t,e),u=Ru(t,e),c=Ru(t,e),d=Ru(t,e),l=vs(t,e,2);e.Ly(3);const f=Ru(t,e);let v;return f?v=vs(t,e,4):e.Ly(4),{ED:s,A2:n,S2:r,T2:h,E2:o,P2:a,I2:u,C2:c,R2:d,D2:l,N2:f,B2:v}}(dh(t.oB.lk),new oi);i=function(t,i,e){let s=t.toString()+".";if(s+=i.A2+".",s+=""+Wa(""+i.S2,2,"0"),s+=(0===i.T2?"M":"H")+".",s+=(1===i.P2?12:10)+".",s+=(1===i.A2?0:i.I2)+".",s+=""+i.C2+i.R2+(1===i.C2&&1===i.R2?i.D2:"0"),e&&e.IB===pT.ON_SCREEN_COLOURS){const t=e;s+="."+Wa(""+t.CB,2,"0")+"."+Wa(""+t.RB,2,"0")+"."+Wa(""+t.DB,2,"0")+"."+(t.NB?1:0)}return s}(t.Km,e,t.aB)}else if(t.Km===ui.AR){e=function(t){const i=t.O0;switch(i.x0){case uB.A0:return function(t){var i;if(!(null==(i=t.N0)?void 0:i.E0))return"mp4a.40";const e=function(t,i){let e=vs(t,i,5);31===e&&(e=32+vs(t,i,6));const s=vs(t,i,4);let n;return 15===s&&(n=vs(t,i,24)),{M2:e,L2:s,O2:n,F2:vs(t,i,4)}}(dh(t.N0.E0),new Cp);return"mp4a.40."+e.M2}(i);case uB.S0:return"mp4a.40.2";case uB.T0:return"mp4a.40.34"}}(dB(dh(t.zN.lk),new oi))}else if(t.Km===ui.kR)e="fLaC";else if(t.Km===ui.mR)e="ac-3";else{if(t.Km!==ui.wR)return(t.Km===ui.DR||t.Km===ui.RR)&&t.dB?EB(t.dB):void 0;e="ec-3"}return{D1:i,N1:e,B1:s}}function xB(t,i){const e=t.toString(16);return Wa(e,i,"0")}function PB(t,i){const e=Hn.PD(dh(t)),s=function(t,i){let e;for(const n of t.Z){var s;const t=null==(s=n.KB)?void 0:s.KB;if(t){const s=n.yD.sN,r=hh(i.Z,t=>t.sN===s),h=ul.yF(t,r.jD);e&&!h.lF(e)||(e=h)}}return e}(wT(e,ui.NR),i),n=wT(e,ui.WR);return{CO:s.rF(),U2:n.lk}}function _l(t){const i=t.MS("codecs");return i?i.split(",").map(t=>t.trim()):[]}function IB(t,i){return ff(t,i,Tr)}function CB(t,i){return!("opus"===t)&&!("opus"===i)||t===i}function RB(t,i){const e=DB(t),s=DB(i);if((e||s)&&zd.Zs.Cp)return!0;const n=e||NB(t),r=s||NB(i);return!n&&!r||t.split(".")[0]===i.split(".")[0]}function DB(t){return/^(ac-3|dac3|ec-3|dec3|ec\+3|ac-4|dac4)/.test(t)}function NB(t){return/^(dvav|dva1|dvhe|dvh1)/.test(t)}function Tr(t,i){if(t===i)return!0;const e=t.split("."),s=i.split("."),n=e[0];if(n!==s[0])return!1;if("mp4a"===n){const[,t,i]=e,[,n,r]=s;if(t!==n)return!1;if(Number(i)!==Number(r))return!1}return!0}r(),r(),r();var BB=class extends Qr{get H2(){return this.W2}get q2(){return this.z2}constructor(t,i,e,s){super(e),this.W2=void 0,this.z2=void 0,this.G2=void 0,this.W2=t,this.z2=i,this.G2=e}};var MB=zs.X_,LB=class extends Ne{get VY(){return this.KY}set VY(t){this.KY=t}get zY(){return this.ZY}set zY(t){this.ZY=t}get ga(){return this.X2||this.j2.updating}Q2(t,i,e){switch(t.Km){case We.wZ:case We.MT:return this.K2(e=>this.Y2(t,i,e),e);case We.yZ:throw new m("Opaque segments are not supported on web.")}}J2(t,i){switch(t.Km){case We.wZ:return this.K2(i=>this.Z2(t,i),i);case We.MT:throw new m("Streaming initialization segments are not supported on web.");case We.yZ:throw new m("Opaque initialization segments are not supported on web.")}}async Z2(t,i){this.t3?this.i3=kB(dh(t.lk)):(await this.e3(t,void 0,i),MB&&(this.s3=!1,this.n3=t))}async Y2(t,i,e){MB&&this.s3&&this.n3&&await this.Z2(this.n3,e);try{if(fr(e),this.t3&&this.i3){const n=await async function(t,i){switch(t.Km){case We.wZ:return t;case We.MT:{const e=await tA(t.lk,i);return fr(i),{Km:We.wZ,lk:new j(e)}}case We.yZ:throw new m("Cannot convert opaque SegmentData to ArraySegmentData.")}}(t,e),r=PB(n.lk,this.i3);var s;t={Km:We.wZ,lk:r.U2},i=Y({},i,{EU:r.CO+(null!=(s=i.EU)?s:0)})}await this.e3(t,i,e),this.So(new gp(bi.pZ))}finally{t.Km===We.MT&&t.lk.cancel(new Qc).catch(gs)}}async e3(t,i,e){switch(fr(e),i&&await this.r3(i),t.Km){case We.wZ:if(this.h3){const i=this.h3.y0(Zb(t.lk));return await this.o3(i,e)}return await this.a3(t.lk);case We.MT:if(this.h3){const i=this.h3.y0(t.lk);return await this.o3(i,e)}return await this.o3(t.lk,e)}}async o3(t,i){const e=this.u3.Fx,s=zN(t).getReader();let n=!1;try{for(;;){const t=await ua(s.read(),i);if(t.done){n=!1;break}fr(i);const e=fm(t.value);n=!0,await this.a3(e)}}catch(t){if(s.cancel(t).catch(gs),n){await this.d3();const t=this.u3.Fx.Mn(e.OM());for(let i=0;i<t.V;i++)await this.l3(t.Tn(i),t.An(i))}throw t}}f3(t,i){return this.K2(()=>this.v3(t,i))}async v3(t,i){this.j2.appendWindowStart===t&&this.j2.appendWindowEnd===i||(await this.d3(),this.j2.appendWindowStart=0,this.j2.appendWindowEnd=i,this.j2.appendWindowStart=t)}async r3(t){if(!rs(this.j2.timestampOffset,t.EU,.001))try{this.j2.timestampOffset=t.EU}catch(i){await this.d3(),this.j2.timestampOffset=t.EU}}async a3(t){this.j2.appendBuffer(t),this._3=!0,await this.g3()}m3(t,i,e){return this.K2(e=>this.l3(t,i,e),e)}async l3(t,i,e){fr(e),this.j2.remove(t,i),await this.g3()}g3(){const t=this.u3.Fx;return new Promise((i,e)=>{let s,n=!1;const r=()=>{n=!0},h=()=>{n=!1,s="error"},o=()=>{n=!1,s="aborted"},a=()=>{n=!1,s="sourceclose",u()},u=()=>{c(),n&&!s?(t.KM(this.u3.Fx)||this.So(new gp(bi.pZ)),i()):e(new m(s))},c=()=>{this.j2.removeEventListener("update",r),this.j2.removeEventListener("error",h),this.j2.removeEventListener("abort",o),this.j2.removeEventListener("updateend",u),this.w3.mn(ON.SZ,a)};this.j2.addEventListener("update",r),this.j2.addEventListener("error",h),this.j2.addEventListener("abort",o),this.j2.addEventListener("updateend",u),zs.w_&&zs.b_<3&&this.w3.wn(ON.SZ,a)})}y3(){return this.K2(()=>this.d3())}async d3(){if(this.w3.AP===xl.rE){MB&&(this.s3=!0),this.j2.updating&&(this.X2=!0);try{this.j2.abort()}catch(t){0,this.X2=!1}this.ga&&await this.g3().catch(gs)}}b3(){return"function"==typeof this.j2.changeType&&!zs.g_}RZ(t){if(this.A3(),this.w3.AP===xl.S3)return;var i;this.T3=t;const e=null!=(i=this.w3.E3(t.GT))?i:t.GT;if(this.t3=OB(t.GT,this.x3),this.b3()&&this.P3(e)){this.x3=e;const t=this.w3.BZ();this.j2.changeType(""+e+t)}}P3(t){if(Jh(this.x3,t))return!1;const i=eb(this.x3),e=eb(t);if(i.Km!==e.Km)return!0;return!IB(_l(i),_l(e))||!(zs.Bv&&zs.v_)}I3(){this.w3.AP!==xl.Nw||this.C3||this.ga||(this.j2.timestampOffset=this.j2.timestampOffset,this.w3.R3())}async K2(t,i){this.A3();const e=new Zc;e.$g(this.D3.Yg),i&&e.$g(i);try{this.C3=t(e.Yg),await this.C3,this.w3.R3(),this.ga&&await this.g3()}finally{this.C3=void 0,e.zg()}}A3(){if(this.C3)throw new m("Internal error")}async zg(){this.Vo(),this.D3.Zg(),this.C3&&(await this.C3.catch(gs),this.C3=void 0),this.j2.removeEventListener("updateend",this.N3),this.j2.removeEventListener("bufferedchange",this.B3)}constructor(t,i,e,s,n){var r;if(super(),this.w3=void 0,this.u3=void 0,this.j2=void 0,this.T3=void 0,this.x3=void 0,this.KY=20,this.ZY=30,this.X2=!1,this._3=!1,this.C3=void 0,this.D3=new Zc,this.h3=void 0,this.s3=!1,this.n3=void 0,this.t3=!1,this.i3=void 0,this.N3=()=>{this.X2=!1},this.B3=t=>{t.removedRanges&&this.So(new gp(bi.pZ))},this.w3=i,this.u3=t,this.j2=e,this.j2.addEventListener("updateend",this.N3),this.j2.addEventListener("bufferedchange",this.B3),this.T3=s,this.x3=n,this.t3=OB(s.GT,n),null==(r=i.Cd)?void 0:r.kp){var h;const t=null!=(h=i.Cd.M3)?h:1e5;this.h3=new aB(t)}}};function OB(t,i){return Xt(t,"audio/mp4")&&Xt(i,"audio/mpeg")}r();var FB=class{get Fx(){if(this.L3.AP===xl.S3)return Uo.rL();let t=Uo.jn(this.j2.buffered).Mn(Uo.hL());const i=this.O3;return void 0!==i&&t.V>0&&t.An(t.V-1)===i&&(t=t.HM(Uo.sL(i))),t}jZ(){return!!this.O3&&this.Fx.MM().Cr(this.O3)}F3(){const t=this.Fx;this.O3=t.V>0?t.An(t.V-1):0,this.L3.U3()}I3(){this.O3=void 0}constructor(t,i){this.L3=void 0,this.j2=void 0,this.O3=void 0,this.L3=i,this.j2=t}};function UB(t,i,e,s,n,r,h){const o=new FB(n,t),a=new LB(o,t,n,e,r);return new VB(t,i,e,s,o,a,h)}var VB=class extends Ne{get Fx(){return this.u3.Fx}get Cd(){return this.ZS}get GT(){return this.jS}get V3(){return this.H3}get W3(){return this.q3.s$}get VY(){return this.z3.VY}set VY(t){this.z3.VY=t}get zY(){return this.z3.zY}set zY(t){this.z3.zY=t}get ga(){return this.z3.ga}jZ(){return this.u3.jZ()}F3(){this.u3.F3()}I3(){this.u3.I3(),this.z3.I3()}G3(t,i){this.q3.r$(t,i)}X3(t,i){this.q3.h$(t,i)}j3(){return this.z3.y3()}Q2(t,i,e){return this.z3.Q2(t,i,e)}J2(t,i,e){return this.z3.J2(t,e)}f3(t,i){return zs.w_&&zs.b_<3?this.z3.f3(t,1/0):this.z3.f3(t,i)}async pS(t,i,e){this.X3(t,i);const s=this.Fx;await this.z3.m3(t,i,e);const n=0!==s.V&&0===this.Fx.V;(zs.rg||zs.S_)&&n&&this.PL.Oy(this.PL.zx)}IZ(t){const i=t.GT;if(this.jS===i)return!0;const e=this.Q3.get(i);if(void 0!==e)return e;const s=this.K3(t);return this.Q3.set(i,s),s}K3(t){const i=this.w3.E3(t.GT);if(void 0===i)return!1;const e=eb(this.jS),s=eb(i),n=_l(e),r=_l(s);if(this.z3.b3()){if(!function(t,i){return ff(t,i,RB)}(n,r))return!1;if(zs.og&&!function(t,i){return ff(t,i,CB)}(n,r))return!1}else{if(e.Km!==s.Km)return!1;if(!IB(n,r))return!1}return!0}async RZ(t){const i=t.GT;this.jS!==i&&(this.Q3.clear(),this.z3.RZ(t),this.jS=i),this.ZS=t,this.w3.Y3()}async zg(){this.Q3.clear(),this.Vo(),this.q3.kn();try{this.z3.mn(bi.pZ,this.Rs),await this.z3.zg()}catch(t){}}constructor(t,i,e,s,n,r,h){super(),this.w3=void 0,this.ZS=void 0,this.H3=void 0,this.PL=void 0,this.jS=void 0,this.q3=void 0,this.u3=void 0,this.z3=void 0,this.Q3=Ba(),this.w3=t,this.ZS=e,this.jS=e.GT,this.H3=s,this.PL=i,this.u3=n,this.z3=r,this.q3=h,this.z3.wn(bi.pZ,this.Rs)}};r();var rh=class{J3(){let t=this.Tn,i=this.An;if(this.Z3||this.t4){const e=.001*(zd.Mg()-this.i4);this.Z3&&(t+=e),this.t4&&(i+=e)}return Uo.nL(t,i)}constructor(t,i,e=!1,s=!1){this.Tn=void 0,this.An=void 0,this.Z3=void 0,this.t4=void 0,this.i4=void 0,this.Tn=t,this.An=i,this.Z3=e,this.t4=s,this.i4=zd.Mg()}};function HB(t){const i=[];if(t.e4&&i.push(t.e4.Fx),t.s4&&i.push(t.s4.Fx),0===i.length)return Uo.rL();let e=0;for(const t of i)t.V>0&&(e=_.max(e,t.An(t.V-1)));const s=t.jZ;let n=new Uo([0,e],[!0,s]);for(let t of i)s&&t.V>0&&(t=t.HM(new Uo([t.An(t.V-1),e],[!0,!0]))),n=n.Mn(t);return n}function WB(t,i,e){const s=t.Fx;let n,r=s.zM(i);if(r>=0){if(!(r+1<s.V))return Promise.resolve();n=s.Tn(r+1)}else{if(r=s.$M(i),!(r>=0))return Promise.resolve();n=s.Tn(r)}return t.pS(n,1/0,e)}function qB(t,i,e){if(!t.Cr(i)){const s=t.zM(i,e);if(s>=0){const e=t.Tn(s);if(i<e)return e}}return i}r(),r(),r(),r();var zB=.5,GB=[d.uo,d.jw,d.$w,d.Zw,d.Fw,d.Vw,d.Nw,d.Kw,Jr.AI,hc.ma],XB=class{n4(t){this.r4.push(t),t.wn(HN.t$,this.h4)}get s$(){return this.r4.reduce((t,i)=>t.HM(i.s$),Uo.rL())}kn(){this.o4(),this.a4.mn(Jr.AI,this.u4),this.PL.mn(d.Qw,this.u4),this.PL.mn(GB,this.c4),this.r4.forEach(t=>t.mn(HN.t$,this.h4)),this.d4(),this.l4=!0}JZ(t){if(this.PL.Qx)return!1;if(0!==this.f4)return!1;const i=this.u3.Fx,e=i.zM(t);if(e>=0&&t+zB<i.An(e))return!1;const s=e>=0?e+1:i.$M(t);if(s<0||s>=i.V)return!1;const n=i.Tn(s);if(Uo.nL(t,n).qM(this.s$).eL>1)return!1;if(0===t&&!this.PL.xP)return this.v4(t,n,2e3),!0;if(zd.Ax)return this.v4(t,n,250),!0;return!(_.abs(n-t)<=.001)&&(this._4(n),!0)}v4(t,i,e){this.d4(),this.g4=t,this.PL.wn(d.$w,this.m4),this.f4=zd.Og(()=>{this.g4===this.PL.zx&&this._4(i),this.d4()},e)}d4(){0!==this.f4&&(this.PL.mn(d.$w,this.m4),zd.Lg(this.f4),this.f4=0)}_4(t){this.PL.Oy(t,!1,!0)}w4(){0!==this.y4&&(zd.Lg(this.y4),this.y4=0),this.PL.mn(d.py,this.ad)}b4(){this.l4||0===this.A4&&(this.w4(),this.A4=zd.fm(this.S4,250))}o4(){0!==this.A4&&(zd.vm(this.A4),this.A4=0),this.w4(),this.PL.xP||(this.T4=0)}E4(){return!this.PL.lP&&(!this.PL.xP||this.x4())&&0!==this.PL.vP&&!this.PL.Qx&&!this.PL.lt&&(this.P4()||this.a4.AP>=Lr.XL)}x4(){return!1}P4(){const t=this.PL.zx,i=this.u3.Fx,e=i.zM(t);return-1!==e&&i.An(e)>t+zB}I4(t,i){const e=i.zM(t);return e>-1?i.An(e):t}constructor(t,i,e,s){this.u3=void 0,this.a4=void 0,this.PL=void 0,this.l4=void 0,this.r4=void 0,this.f4=void 0,this.y4=void 0,this.C4=void 0,this.g4=void 0,this.T4=void 0,this.A4=void 0,this.R4=void 0,this.D4=void 0,this.N4=void 0,this.h4=void 0,this.u4=void 0,this.ad=void 0,this.m4=void 0,this.c4=void 0,this.S4=void 0,this.u3=t,this.a4=i,this.PL=e,this.l4=!1,this.r4=[],this.f4=0,this.y4=0,this.C4=0,this.g4=0,this.T4=0,this.A4=0,this.R4=1,this.h4=t=>{const i=this.PL.zx,e=t.e$.Cr(i),s=t.e$.Cr(i,zB)&&this.PL.AP<=Lr.GL;(e||s)&&this.JZ(i)},this.u4=Vl(t=>{if(this.l4)return;if(this.a4.AP<=Lr.GL){const t=this.PL.zx;this.JZ(t)||this.S4()}else this.d4()},100),this.ad=Vl(t=>{this.b4()},100),this.m4=t=>{t.currentTime!==this.g4&&this.d4()},this.c4=()=>{this.E4()?0===this.A4&&(this.PL.wn(d.py,this.ad),this.y4=zd.Og(()=>{this.b4()},3500)):this.o4()},this.S4=()=>{const t=this.C4,i=this.T4,e=this.PL.zx,s=zd.Mg(),n=this.u3.Fx;if(t!==e)return this.C4=e,this.T4=s,this.R4=1,void(this.D4=zd.Tx?5e3:1e3);if(this.E4()&&0!==n.V&&i>0&&s>i+this.D4){let t;const i=this.s$.MM().qM(n),s=i.ZM(e);if(-1!==s){const n=i.Tn(s);if(n-e<1||this.x4()){const e=i.An(s);0,t=e}}var r;if(!t)t=null==(r=this.N4)?void 0:r.determineStallJumpTarget(),t&&t!==e||(t=e+.01*this.R4,n.Cr(t)||(t=this.I4(e,n)));0,this.C4=t,this.R4++,this.D4=_.min(2*this.D4,1e4),this._4(t)}},this.a4.wn(Jr.AI,this.u4),this.PL.wn(d.Qw,this.u4),this.PL.wn(GB,this.c4),this.N4=s,this.D4=zd.Tx?5e3:1e3}},jB=class extends XB{x4(){if(!zs.S_||!this.PL.xP)return!1;const t=this.PL.zx,i=this.u3.Fx,e=this.s$.MM().qM(i),s=e.ZM(t);if(-1===s)return!1;return e.Tn(s)-t<=3e3}},QB=zs.B_||zs.L_,KB=zs.W_||zs.X_||zs.ru,xl=function(t){return t.S3="closed",t.rE="open",t.Nw="ended",t}({}),YB=class extends FN{get e4(){return this.B4}get s4(){return this.M4}get ct(){if(void 0!==this.L4)return this.L4;if(void 0!==this.O4)return this.O4;const t=this.aq.duration;return t===Gl?1/0:t}F4(t){if(t<0)throw new m("Invalid duration");this.U4()?this.V4(t):this.L4=t}V4(t){const i=t===1/0;if(i&&this.aq.setLiveSeekableRange){const t=2**39;this.aq.setLiveSeekableRange(0,t)}S(t)?(this.aq.duration=Gl,this.O4=NaN):(this.aq.duration=i?KB?1/0:Gl:t,this.O4=void 0),this.L4=void 0}get Fx(){return QB?HB(this):function(t,i){let e=i;return e.V>0&&t.jZ&&(e=e.HM(Uo.sL(e.An(e.V-1)))),e}(this,Uo.jn(this.pT.buffered))}get QZ(){var t;return null==(t=this.B4)?void 0:t.Fx}get KZ(){var t;return null==(t=this.M4)?void 0:t.Fx}get kP(){return this.H4.J3().Mn(new Uo([0,this.ct],[!0,!0]))}W4(t,i,e,s){this.H4=new rh(t,i,Boolean(e),Boolean(s))}get jZ(){return(!this.B4||this.B4.jZ())&&(!this.M4||this.M4.jZ())}get AP(){return this.aq.readyState}async GY(){const t=this.ZS,i=hh(t.q4,t=>St(t.GT)),e=hh(t.q4,t=>$y(t.GT));this.pT.disableRemotePlayback=!0,await this.z4();const s=this.BZ();if(i){const t=new qN;var n;this.G4.n4(t);const e=null!=(n=this.E3(i.GT))?n:i.GT;this.X4=this.aq.addSourceBuffer(""+e+s),this.B4=UB(this,this.PL,i,at.Bk,this.X4,e,t),this.B4.wn(bi.pZ,this.B3)}if(e){const t=new qN;var r;this.G4.n4(t);const i=null!=(r=this.E3(e.GT))?r:e.GT;this.j4=this.aq.addSourceBuffer(""+i+s),this.M4=UB(this,this.PL,e,at.Mk,this.j4,i,t),this.M4.wn(bi.pZ,this.B3)}this.DZ.Un(this,t)}async z4(){await super.zZ(this.aq),"open"!==this.AP&&await KA(this.aq,"sourceopen")}U4(){if("open"!==this.AP)return!1;const t=this.B4&&this.B4.ga,i=this.M4&&this.M4.ga;return!(t||i)}F3(){this.Q4=!0,this.B4&&this.B4.F3(),this.M4&&this.M4.F3(),this.Q4=!1,this.K4()}I3(){this.B4&&this.B4.I3(),this.M4&&this.M4.I3()}IZ(t){const i=hh(t.q4,t=>St(t.GT)),e=hh(t.q4,t=>$y(t.GT));if(this.B4){if(!i)return!1;if(!this.B4.IZ(i))return!1}else if(i)return!1;if(this.M4){if(!e)return!1;if(!this.M4.IZ(e))return!1}else if(e)return!1;return!!super.IZ(t)}async RZ(t){const i=hh(t.q4,t=>St(t.GT)),e=hh(t.q4,t=>$y(t.GT)),s=[];this.B4&&s.push(this.B4.RZ(i)),this.M4&&s.push(this.M4.RZ(e)),await Promise.all(s),await super.RZ(t)}NZ(t){super.NZ(t)}async zg(){if(this.aq.removeEventListener("sourceclose",this.Y4),zs.S_&&await this.XZ(),this.B4){if(await this.B4.zg(),this.B4=void 0,lp()&&(zs.S_||zs.w_))try{this.aq.removeSourceBuffer(this.X4)}catch(t){}this.X4=void 0}if(this.M4){if(await this.M4.zg(),this.M4=void 0,lp()&&(zs.S_||zs.w_))try{this.aq.removeSourceBuffer(this.j4)}catch(t){}this.j4=void 0}this.pT.src&&URL.revokeObjectURL(this.pT.src),this.pT.disableRemotePlayback=!1,this.PL.mn([d.py,d.$w,d.Fw],this.bd),this.G4.kn(),zs.w_&&await this.XZ(),await super.zg()}Y3(){const t=this.ZS,i=t.q4.map(t=>St(t.GT)&&this.B4?this.B4.Cd:$y(t.GT)&&this.M4?this.M4.Cd:t);this.ZS=Y({},t,{q4:i})}U3(){this.Q4||this.K4()}get J4(){if(!this.jZ)return!1;const t=this.Fx;return 0!==t.V&&t.Tn(t.V-1)<=this.PL.zx}K4(){this.J4&&this.U4()&&(this.aq.endOfStream(),this.L4=void 0,this.O4=void 0,this.So(new gp(ON.bZ)),this.PL.B3())}R3(){this.U4()&&(this.jZ?this.K4():void 0!==this.L4&&this.V4(this.L4))}JZ(t){return this.G4.JZ(t)}ZZ(){return!0}E3(t){return JB(this.Z4,t)}static $Z(t){const i=fv(t.t5);if(void 0===i)return!1;if("function"!=typeof i.isTypeSupported)return!1;const e=new lv(t.t5);for(const i of t.q4)if(void 0===JB(e,i.GT))return!1;return!0}constructor(t,i,e,s,n,r=new lv(t.t5),h,o){super(t,i,s,n,o),this.Z4=void 0,this.B4=void 0,this.X4=void 0,this.M4=void 0,this.j4=void 0,this.H4=new rh(0,1/0),this.aq=void 0,this.L4=void 0,this.O4=void 0,this.G4=void 0,this.Q4=!1,this.Y4=()=>{this.So(new gp(ON.SZ))},this.i5=()=>{this.So(new gp(ON.kZ))},this.bd=()=>{this.K4()},this.B3=()=>{this.PL.B3()},this.Z4=r,this.aq=this.Z4.Lp(),this.aq.addEventListener("sourceclose",this.Y4),this.aq.addEventListener("sourceopen",this.i5),this.PL.wn([d.py,d.$w,d.Fw],this.bd),this.G4=new jB(this,e,this.PL,h)}};function JB(t,i){const e=eb(i),s=_l(e),n="audio/mp4"===e.Km,r=n&&1===s.length&&"mp4a.40.34"===s[0];if(t.Fp(i)&&(!r||!zs.X_))return i;if(r){const i=['audio/mp4; codecs="mp3"',"audio/mpeg"];for(const e of i)if(t.Fp(e))return e}if(n&&1===s.length&&"flac"===s[0].toLowerCase()){const e=["flac","fLaC","FLAC"];for(const s of e){const e='audio/mp4; codecs="'+s+'"';if(t.Fp(i))return e}}}r(),r();var Xr=class extends gp{constructor(t){super(d.Fw),this.currentTime=void 0,this.currentTime=t}},ZB=[d.wy,d.Kw,d.$w,d.Fw,d.uo,d.jw],$B=class extends Ne{get zx(){return this.xz}get e5(){return this.s5}get n5(){return this.r5}get ct(){return this.Zb}get Qx(){return this.h5}get lP(){return this.Cz}get AP(){return this.o5}get xP(){return this.Pz}get oP(){return this.Iz}set oP(t){this.oP!==t&&(this.Iz=t,this.So(new Wi(this.zx,this.OP)))}get vP(){return this.Rz}set vP(t){this.vP!==t&&(this.Rz=t,this.So(new Ik(this.zx,this.vP)))}get OP(){return this.cA}set OP(t){this.OP!==t&&(this.cA=t,this.So(new Wi(this.zx,this.OP)))}Oy(t,i,e){this.xz!==t&&(this.xz=t,this.s5=i,e&&!this.Pz?(this.r5=!0,this.So(new Xr(this.zx))):(this.r5=!1,this.Pz=!0,this.So(new ji(this.zx))))}jP(){this.Cz||(this.Cz=!0,this.So(new Si(this.zx)))}QP(){this.Cz&&(this.Cz=!1,this.So(new vt(this.zx)))}zg(){this.Vo()}constructor(t,i,e,s,n,r,h,o,a,u,c){super(),this.xz=void 0,this.Zb=void 0,this.h5=void 0,this.Cz=void 0,this.Pz=void 0,this.Iz=void 0,this.Rz=void 0,this.cA=void 0,this.o5=void 0,this.s5=void 0,this.r5=void 0,this.xz=t,this.Zb=i,this.h5=e,this.Cz=s,this.Pz=n,this.Iz=r,this.Rz=h,this.cA=o,this.o5=a,this.s5=u,this.r5=c}};function tM(t){return new $B(t.zx,t.ct,t.Qx,t.lP,t.xP,t.oP,t.vP,t.OP,t.AP,!1,t.n5)}function iM(t,i){i.ct===t.ct||S(i.ct)&&S(t.ct)||t.So(new zr(t.ct)),t.oP=i.oP,t.OP=i.OP,t.vP=i.vP,i.lP?t.jP():t.QP().catch(gs),i.zx!==t.zx||i.AP>Lr.zL&&t.AP===Lr.zL?t.Oy(i.zx,i.e5,i.n5):!i.xP&&t.xP?t.So(new ji(t.zx)):i.xP&&!t.xP&&t.AP>=Lr.GL&&t.So(new Yr(t.zx)),!i.Qx&&t.Qx&&t.So(new ur(t.zx))}r(),r();var eM=class extends Ne{get AP(){return this.TP()}a5(t){this.RV!==t&&(this.RV=t,this.So(new Ka(this.PL.zx,t)))}u5(){this.a5(this.TP())}hr(){this.a5(Lr.zL)}zg(){this.Vo()}constructor(t){super(),this.PL=void 0,this.RV=Lr.zL,this.c5=()=>{this.u5()},this.PL=t}};r();var sM=["emptied","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","timeupdate","progress","seeking","seeked"],Ou=class extends eM{TP(){let t=this.PL.hq.readyState;return t>Lr.GL&&this.PL.d5?Lr.GL:(this.PL.hq.seeking&&t>Lr.Qn&&(t=Lr.Qn),t)}zg(){for(const t of sM)this.PL.hq.removeEventListener(t,this.c5);super.zg()}constructor(t){super(t);for(const t of sM)this.PL.hq.addEventListener(t,this.c5)}};r();var nM=Zt,rM=class extends eM{TP(){if(this.PL.hq.readyState===Lr.zL)return Lr.zL;const t=this.l5(),i=t?t.An-t.Tn:0;if(!t)return Lr.Qn;const e=this.PL.vP;return this.f5()||i>=3*e?Lr.jL:i>=3?Lr.XL:Lr.GL}l5(){const t=this.PL.zx,i=this.PL.Fx.VM(.04),e=i.zM(t);if(!(e<0))return{Tn:t,An:i.An(e)}}f5(){if(this.PL.Qx)return!0;const t=this.PL.ct,i=this.l5();return!!i&&t-i.An<=nM}zg(){this.PL.mn([d.$w,d.Fw],this.c5);for(const t of sM)this.PL.hq.removeEventListener(t,this.c5);super.zg()}constructor(t){super(t),this.PL.wn([d.$w,d.Fw],this.c5);for(const t of sM)this.PL.hq.addEventListener(t,this.c5)}};r(),r();var hM=[Jr.AI,d.uo,d.jw,d.$w,d.Zw,d.Fw,d.Vw,d.Nw,hc.ma],oM=class extends Ne{v5(){return(!this.DV.n5||!this.DV._5)&&this.DV.AP<Lr.XL}g5(){return!this.DV.xP&&!(this.DV.lP||this.DV.Qx||this.DV.lt||this.v5())}er(){const t=this.p5;this.p5=this.g5(),!t&&this.p5&&this.So(new mo(this.DV.zx))}hr(){this.p5=!1}zg(){this.Vo(),this.DV.mn(hM,this.NK)}constructor(t){super(),this.DV=void 0,this.p5=!1,this.NK=()=>{this.er()},this.DV=t,this.DV.wn(hM,this.NK)}},aM=class extends oM{g5(){return this.m5&&super.g5()}er(){this.m5&&(this.pT.paused||this.pT.ended||this.pT.error)&&(this.m5=!1),super.er()}hr(){super.hr(),this.m5=!1}zg(){this.pT.removeEventListener(Jr.PM,this.VV),super.zg()}constructor(t){super(t),this.pT=void 0,this.m5=!1,this.VV=()=>{this.m5=!0,this.er()},this.pT=t.hq,this.pT.addEventListener(Jr.PM,this.VV)}};r();var uM=class extends gp{constructor(t){super(hc.ma),this.lt=void 0,this.lt=t}};function cM(t,i){return t.CO<=i&&t.RO>i}function fi(t,i){return function(t,i){return tf(t.CO,i.CO,TE)}(t,i)||function(t,i){return tf(t.RO,i.RO,TE)}(t,i)}function dM(t,i){return function(t,i){return tf(t.UO,i.UO,TE)}(t,i)||function(t,i){return tf(t.VO,i.VO,TE)}(t,i)}function Sl(t,i,e){let s=function(t,i,e,s,n,r,h){void 0===n&&(n=!1),void 0===r&&(r=0),void 0===h&&(h=t.length);let o=r,a=h-1;for(;o<=a;){const h=o+(a-o>>1),u=s(e(t[h]),i);if(u<0)o=h+1;else if(u>0)a=h-1;else{if(!(n&&h>r&&0===s(e(t[h-1]),i)))return h;a=h-1}}return~o}(t,i,pc,e,!0);if(s<0)return s;for(;s<t.length&&e(i,t[s])===hl.rh;s++)if(t[s].QO(i))return s;return-(s+1)}function lM(t,i,e){const s=Sl(t,i,e);return s>=0?s:-(s+1)}function fM(t){const i=t.Ht;if(!i)return-1;if(t instanceof Oh)return i.w5(t);const e=i.L;if(!e)return-1;const s=Sl(e.NI,t,fi);return s>=0?s:-1}function vM(t,i){const e=function(t,i,e){const s=t.length,n=i.length;let r=0,h=0;const o=[],a=[];for(;r<s&&h<n;){const s=t[r],n=i[h];s===n?(r++,h++):e(n,s)<=0?(o.push(n),h++):(a.push(s),r++)}for(;r<s;)a.push(t[r]),r++;for(;h<n;)o.push(i[h]),h++;return{y5:o,b5:a}}(t,i,fi);return function(t,i){const e=i.length;for(let s=0;s<e;s++)t[s]=i[s];t.length=e}(t,i),e}r(),r(),r(),r();var Sr=class{get NI(){return this.A5}get V(){return this.A5.length}get Ca(){if(this.hu){const t=this.A5;this.hu.length=t.length;for(let i=0;i<t.length;i++)this.hu[i]=t[i].Ca}else this.hu=this.xa();return this.hu}xa(){return function(t){const i=[];for(let e=0;e<t.V;e++)i[e]=t.zy(e).Ca;return i.item=i=>{const e=0|i,s=t.zy(e);return s&&s.Ca||void 0},w.defineProperty(i,"constructor",{value:wE}),i}(this)}pO(t){const i=this.A5;for(let e=i.length-1;e>=0;e-=1){const s=i[e];if(t.QO(s))return!0}return!1}zy(t){return this.A5[t]}constructor(t){this.A5=void 0,this.hu=void 0,this.A5=t}};r();var _M=class extends Fs{xa(){return new gM(this.Ht.Ca,this.AP)}constructor(t,i){super(Te.AI),this.Ht=void 0,this.AP=void 0,this.Ht=t,this.AP=i}},gM=class extends Eh{constructor(t,i){super("readystatechange"),this.track=void 0,this.readyState=void 0,this.track=t,this.readyState=i}};r();var pM=class extends Fs{xa(){return new mM(this.Ht.Ca)}constructor(t){super(Te.kI),this.Ht=void 0,this.Ht=t}},mM=class extends Eh{constructor(t){super("typechange"),this.track=void 0,this.track=t}};r();var Ml=class extends Fs{xa(){return new wM(this.PO.Ca)}constructor(t){super(Te.uI),this.PO=void 0,this.PO=t}},wM=class extends Eh{constructor(t){super("addcue"),this.cue=void 0,this.cue=t}};r();var yM=class extends Fs{xa(){return new bM(this.PO.Ca)}constructor(t){super(Te.dI),this.PO=void 0,this.PO=t}},bM=class extends Eh{constructor(t){super("removecue"),this.cue=void 0,this.cue=t}},Ji=class extends Ne{get q(){return this.S5}get L(){return this.T5}k5(t){return hh(this.T5.NI,i=>i.o===t)}get sV(){return this.E5}set sV(t){this.E5=t}get nC(){return this.x5}get Ca(){return this.hu||(this.hu=this.xa()),this.hu}xa(){return qo(this)}get o(){return this.aS}get JI(){return this.yO}get eC(){return this.P5}set eC(t){this.P5=t}get Lt(){return this.I5}get Th(){return this.bO}set Th(t){t!==this.bO&&(this.bO=t,this.So(new Xh(this)))}get bs(){return this.$b}get ZI(){return this.C5}get Qk(){return this.Yo}set Qk(t){this.R5(t)}R5(t){const i=LS(t);i!==this.Qk&&(this.Yo=i,i===xh.Nh&&(this.D5.forEach(t=>{t.ro=!1}),Wt(this.D5),this.N5=0),this.So(new Rh(this)))}get AP(){return this.o5}set AP(t){this.o5!==t&&(this.o5=t,this.So(new _M(this,this.o5)))}get rC(){return this.B5}set rC(t){this.B5=t}get Km(){return this.Vp}set Km(t){this.Vp!==t&&(this.Vp=t,this.So(new pM(this)))}get EU(){return this.QU}set EU(t){this.QU=t}nV(t){if(!t||t.Ht)return;const i=Sl(this.M5,t,dM);if(i>=0)return;t.Ht=this;const e=-(i+1);this.M5.splice(e,0,t);const s=lM(this.L.NI,t,fi);this.L5(t,s),this.So(new Ml(t))}L5(t,i){this.A5.splice(i,0,t),this.O5(i),t.JO=i,i<this.N5&&(this.N5=i)}XU(t){if(!t||t.Ht!==this)return;const i=this.w5(t);if(i<0)return;t.ro=!1;const e=this.D5,s=Sl(e,t,fi);s>=0&&Ra(e,s);const n=Sl(this.M5,t,dM);n>=0&&Ra(this.M5,n),t.Ht=void 0,this.F5(t,i),this.So(new yM(t))}F5(t,i){Ra(this.A5,i),this.O5(i),t.JO=-1,this.N5>i&&--this.N5}qO(t){if(!t||t.Ht!==this)return;const i=this.w5(t);if(i<0)return;this.F5(t,i);const e=lM(this.L.NI,t,fi);this.L5(t,e);const s=tt(this.D5,i=>i===t);if(s>=0){Ra(this.D5,s);const i=lM(this.D5,t,fi);this.D5.splice(i,0,t)}}U5(t,i){const e=this.D5,s=this.A5;let n=this.N5,r=!1,h=1/0;i&&(n=0);for(let i=e.length-1;i>=0;i--){const s=e[i];cM(s,t)?s.RO<h&&(h=s.RO):(r=!0,Ra(e,i))}for(;n<s.length&&s[n].CO<=t;){const i=s[n];cM(i,t)&&(Ct(e,i)||(r=!0,e.push(i)),i.RO<h&&(h=i.RO)),n++}return n<s.length&&s[n].CO<h&&(h=s[n].CO),r&&Wl(e,fi),this.N5=n,h}w5(t){return(-1===t.JO||t.JO>=this.V5)&&this.H5(),t.JO}H5(){const t=this.A5;for(let i=this.V5;i<t.length;i++)t[i].JO=i;this.V5=t.length}O5(t){t<this.V5&&(this.V5=_.max(t,0))}sC(t){this.nC||(this.Qk=t)}kn(){this.Vo();const t=this.A5.slice();for(const i of t)i.kn();Wt(this.A5),Wt(this.M5),Wt(this.D5)}constructor(t,i,e,s,n,r,h,o,a){super(),this.hu=void 0,this.aS=void 0,this.yO=mi(),this.E5=!1,this.P5=void 0,this.I5=void 0,this.bO=void 0,this.$b=void 0,this.Yo=xh.Nh,this.o5=dc.NONE,this.B5=void 0,this.Vp=void 0,this.x5=void 0,this.C5=void 0,this.QU=0,this.A5=[],this.M5=[],this.D5=[],this.T5=void 0,this.S5=void 0,this.V5=0,this.N5=0,this.aS=i||"",this.P5=o||"",this.I5=t,this.$b=s||"",this.E5=Boolean(n),this.x5=Boolean(h),this.Vp=r||nh.DEFAULT,this.bO=e||"",this.C5=a||[],this.T5=new Sr(this.A5),this.S5=new Sr(this.D5)}};r(),r(),r();var uc=class extends Ee{xa(){return new AM(this.PO.Ca)}constructor(t,i){super(Js.QL,t),this.YF=void 0,this.YF=i}},AM=class extends Ys{constructor(t){super("enter",t)}};r();var mc=class extends Ee{xa(){return new SM(this.PO.Ca)}constructor(t,i){super(Js.KL,t),this.YF=void 0,this.YF=i}},SM=class extends Ys{constructor(t){super("exit",t)}};r();var TM=class extends Fs{xa(){return new kM(this.PO.Ca)}constructor(t){super(Te._I),this.PO=void 0,this.PO=t}},kM=class extends Eh{constructor(t){super("entercue"),this.cue=void 0,this.cue=t}};r();var EM=class extends Fs{xa(){return new xM(this.PO.Ca)}constructor(t){super(Te.pI),this.PO=void 0,this.PO=t}},xM=class extends Eh{constructor(t){super("exitcue"),this.cue=void 0,this.cue=t}},Tl=class extends je{get JI(){return this.yO}get CO(){var t,i;return this.W5.startTime-(null!=(i=null==(t=this.WO)?void 0:t.EU)?i:0)}set CO(t){var i,e;this.W5.startTime=t+(null!=(e=null==(i=this.WO)?void 0:i.EU)?e:0)}get RO(){var t,i;return this.W5.endTime-(null!=(i=null==(t=this.WO)?void 0:t.EU)?i:0)}set RO(t){var i,e;this.W5.endTime=t+(null!=(e=null==(i=this.WO)?void 0:i.EU)?e:0)}get U(){return this.GO}set U(t){this.GO=t}get XO(){return Boolean(this.W5.pauseOnExit)}set XO(t){this.W5.pauseOnExit=Boolean(t)}get Ht(){return this.WO}set Ht(t){this.WO=t,this.q5()}get o(){return this.W5.id||""}get Ca(){return this.hu||(this.hu=this.xa()),this.hu}xa(){return U(this)}get ro(){return this.ho}set ro(t){this.ro!==t&&(this.ho=t,t?(this.So(new uc(this,this.CO)),this.WO&&this.WO.So(new TM(this))):(this.So(new mc(this,this.RO)),this.WO&&this.WO.So(new EM(this))))}QO(t){return this===t||kS(this,t)&&kE(this,t)&&this.KO(t)}q5(){var t,i;const e=null!=(i=this.W5.THEOplayerTimestampOffset)?i:0;var s;const n=null!=(s=null==(t=this.WO)?void 0:t.EU)?s:0;if(e===n)return;const r=n-e;this.W5.startTime+=r,this.W5.endTime+=r,this.W5.THEOplayerTimestampOffset=n}KO(t){return Gr(this.U,t.U)}kn(){this.Vo(),this.W5.removeEventListener("enter",this.z5),this.W5.removeEventListener("exit",this.G5)}constructor(t){super(),this.W5=void 0,this.GO=void 0,this.UO=void 0,this.VO=void 0,this.yO=void 0,this.WO=void 0,this.hu=void 0,this.ho=!1,this.z5=()=>{this.ro=!0},this.G5=()=>{this.ro=!1},this.yO=aE(),this.W5=t,this.UO=t.startTime,this.VO=t.endTime,this.W5.addEventListener("enter",this.z5),this.W5.addEventListener("exit",this.G5)}};r();var PM=class extends Fs{xa(){return new IM(this.Ht.Ca)}constructor(t){super(Te.wI),this.Ht=void 0,this.Ht=t}},IM=class extends Eh{constructor(t){super("cuechange"),this.track=void 0,this.track=t}};function CM(t){if(!t)return;let i=t.THEOplayerVTTRegion;return i||(i=new RM(t),t.THEOplayerVTTRegion=i),i}r(),r();var RM=class{get X5(){return this.j5}get o(){return this.j5.id||""}get Ti(){return Number(this.j5.width)||0}set Ti(t){this.j5.width=t||0}get ZO(){return Number(this.j5.lines)||0}set ZO(t){this.j5.lines=t||0}get $O(){return Number(this.j5.regionAnchorX)||0}set $O(t){this.j5.regionAnchorX=t||0}get tF(){return Number(this.j5.regionAnchorY)||0}set tF(t){this.j5.regionAnchorY=t||0}get eF(){return Number(this.j5.viewportAnchorX)||0}set eF(t){this.j5.viewportAnchorX=t||0}get sF(){return Number(this.j5.viewportAnchorY)||0}set sF(t){this.j5.viewportAnchorY=t||0}get iF(){return this.j5.scroll||""}get Ca(){return this.hu||(this.hu=DE(this)),this.hu}constructor(t){this.j5=void 0,this.hu=void 0,this.j5=t}};var DM=class extends Tl{get U(){return this.W5.text}set U(t){this.W5.text=t}get Pt(){return this.W5.vertical||""}set Pt(t){this.W5.vertical=t||""}get FO(){return this.W5.snapToLines}set FO(t){this.W5.snapToLines=t}get BO(){return this.W5.line}set BO(t){this.W5.line=t}get Wy(){return Number(this.W5.size)}set Wy(t){this.W5.size=No(t,0,100)}get Ca(){return this.hu||(this.hu=this.xa()),this.hu}xa(){return yE(this)}KO(t){return EE(this,t)}constructor(t){super(t)}},NM=class extends DM{get OO(){return CM(this.W5.region)}get MO(){return this.W5.lineAlign||"start"}set MO(t){this.W5.lineAlign=t||"start"}get mo(){return this.W5.position}set mo(t){this.W5.position=t}get LO(){return this.W5.positionAlign||"auto"}set LO(t){this.W5.positionAlign=t||"auto"}get DO(){return this.W5.align||"center"}set DO(t){this.W5.align=t||"center"}constructor(t){super(t)}},BM=class extends DM{get OO(){return CM(this.X5)}get X5(){return function(t,i){if(void 0===i)return;const e=t&&t.regions;return e&&e.getRegionById(i)||void 0}(this.W5.track,this.W5.regionId)}get MO(){return function(t){return"middle"===t?"center":t}(this.W5.lineAlign||"start")}set MO(t){this.W5.lineAlign=function(t){return"center"===t?"middle":t}(t||"start")}get mo(){return this.W5.position}set mo(t){this.W5.position=function(t,i){return mE(t,i)}(t,this.DO)}get LO(){return function(t){return gE[t]}(this.W5.positionAlign||"middle")}set LO(t){this.W5.positionAlign=function(t,i){return _E[pE(t,i)]}(t||"center",this.DO)}get DO(){return function(t){return"middle"===t?"center":t}(this.W5.align||"middle")}set DO(t){this.W5.align=function(t){return"center"===t?"middle":t}(t||"center")}constructor(t){super(t)}};function MM(t,i){return t.U===i.U}function LM(t,i){if(0===i.length)return;const e=i.length-1;if(i[e].CO<t.CO)return void OM(i,e,t.CO);const s=i[0];if(s.CO>t.CO)return void(t.RO=s.CO);const n=Sl(i,t,fi);if(n>=0)return;const r=-(n+1),h=r-1;if(h>=0){i[h].CO<t.CO&&OM(i,h,t.CO)}if(r<i.length){const e=i[r];t.RO=e.CO}}function OM(t,i,e){const s=t[i].CO;for(let n=i;n>=0&&t[n].CO===s;n--)t[n].RO=e}function FM(t){return U(t)}r(),r(),r(),r();var UM=class extends Tl{get U(){return this.Q5}get Ca(){return this.hu||(this.hu=this.xa()),this.hu}xa(){return FM(this)}KO(t){return MM(this,t)}constructor(t,i){super(t),this.Q5=void 0,this.Q5=i}};function Aa(t){switch(t){case 0:case 1:case 2:case 3:return!0}return!1}function Ca(t){switch(t){case 0:return lt;case 1:return Zp;case 2:return zc;case 3:return nm}}function VM(t,i){const e=i.ac,s=t.byteLength,n=ye(t);return i.Ly(s-e),di(n,e,s).buffer}function HM(t,i){return{id:t||"",data:i instanceof ArrayBuffer?i:void 0}}function WM(t,i,e){const s=Cl(t,i);if(!Aa(s))return;const n=Ca(s);return{id:e,language:jp(t,i,3),description:n(t,i),text:n(t,i)}}function qM(t,i,e){const s=Cl(t,i);if(!Aa(s))return;const n=Ca(s);return{id:e,mimeType:lt(t,i),fileName:n(t,i),description:n(t,i),data:VM(t,i)}}function zM(t,i,e){const s=Cl(t,i);if(!Aa(s))return;const n=Ca(s),r=[];for(;i.ac<t.byteLength;)r.push({involvement:n(t,i),involvee:n(t,i)});return{id:e,entries:r}}function GM(t,i,e){const s=Cl(t,i);if(!Aa(s))return;const n=Ca(s),r=jp(t,i,3),h=Cl(t,i),o=Cl(t,i),a=n(t,i);let u=!1;const c=[];for(;i.ac<t.byteLength;){let e;if(1===s){let s=Jp(t,i);void 0===s?s=u:u=s,e=zc(t,i,s)}else e=n(t,i);if(!e||i.ac+4>t.byteLength)break;c.push({text:e,timestamp:ti(t,i)})}return{id:e,language:r,format:h,contentType:o,description:a,entries:c}}function XM(t,i,e){return{id:e,ownerIdentifier:lt(t,i),identifier:VM(t,i)}}function jM(t,i,e){const s=Cl(t,i);if(!Aa(s))return;const n=Ca(s);return{id:e,language:jp(t,i,3),description:n(t,i),text:n(t,i)}}function QM(t,i,e){const s=Cl(t,i);if(!Aa(s))return;return{id:e,text:Ca(s)(t,i)}}function KM(t,i,e){return{id:e,url:lt(t,i)}}function YM(t,i,e){const s=Cl(t,i);if(!Aa(s))return;const n=Ca(s);return{id:e,description:n(t,i),text:n(t,i)}}function JM(t,i,e){const s=Cl(t,i);if(!Aa(s))return;return{id:e,description:Ca(s)(t,i),url:lt(t,i)}}function ZM(t,i,e){switch(e){case"COM":return WM(t,i,e);case"GEO":return qM(t,i,e);case"IPL":return zM(t,i,e);case"PIC":return function(t,i,e){const s=Cl(t,i);if(!Aa(s))return;const n=Ca(s),r=jp(t,i,3),h=Cl(t,i),o=n(t,i);let a,u;return"--\x3e"===r?(a=r,u=lt(t,i)):(a="image/"+r.toLowerCase(),u=VM(t,i)),{id:e,mimeType:a,pictureType:h,description:o,data:u}}(t,i,e);case"SLT":return GM(t,i,e);case"TXX":return YM(t,i,e);case"UFI":return XM(t,i,e);case"ULT":return jM(t,i,e);case"WXX":return JM(t,i,e);default:if("T"===e.charAt(0))return QM(t,i,e);if("W"===e.charAt(0))return KM(t,i,e)}}function $M(t,i,e){switch(e){case"APIC":return function(t,i,e){const s=Cl(t,i);if(!Aa(s))return;const n=Ca(s),r=lt(t,i),h=Cl(t,i),o=n(t,i);let a;return a="--\x3e"===r?lt(t,i):VM(t,i),{id:e,mimeType:r,pictureType:h,description:o,data:a}}(t,i,e);case"COMM":return WM(t,i,e);case"COMR":return function(t,i,e){const s=Cl(t,i);if(!Aa(s))return;const n=Ca(s),r=lt(t,i),h=jp(t,i,8),o=lt(t,i),a=Cl(t,i),u=n(t,i),c=n(t,i);let d,l;return i.ac<t.byteLength&&(d=lt(t,i)||"image/",l=VM(t,i)),{id:e,price:r,validUntil:h,contactURL:o,receivedAs:a,nameOfSeller:u,description:c,pictureMimeType:d,sellerLogo:l}}(t,i,e);case"GEOB":return qM(t,i,e);case"IPLS":return zM(t,i,e);case"PRIV":return function(t,i,e){return{id:e,ownerIdentifier:lt(t,i),data:VM(t,i)}}(t,i,e);case"POSS":return function(t,i,e){return{id:e,format:Cl(t,i),position:ti(t,i)}}(t,i,e);case"SYLT":return GM(t,i,e);case"TXXX":return YM(t,i,e);case"UFID":return XM(t,i,e);case"USER":return function(t,i,e){const s=Cl(t,i);if(!Aa(s))return;const n=Ca(s);return{id:e,language:jp(t,i,3),text:n(t,i)}}(t,i,e);case"USLT":return jM(t,i,e);case"WXXX":return JM(t,i,e);case"YMID":case"YTYP":case"YSEQ":case"YDUR":case"YCSP":return QM(t,i,e);default:{const s=e.charAt(0);if("T"===s)return QM(t,i,e);if("W"===s)return KM(t,i,e)}}}r(),r();function tL(t,i){return(127&Cl(t,i))<<21|(127&Cl(t,i))<<14|(127&Cl(t,i))<<7|127&Cl(t,i)}function iL(t,i){switch(t){case 4:return{K5:Ut(i,0),Y5:Ut(i,1),J5:Ut(i,2),Z5:Ut(i,3)};case 3:return{K5:Ut(i,0),Y5:Ut(i,1),J5:Ut(i,2)};case 2:return{K5:Ut(i,0),t6:Ut(i,1)}}}function eL(t,i,e){switch(e.ED){case 3:e.xD.Y5&&function(t,i){const e=i.ac,s=ti(t,i)+4,n=32768&Rn(t,i);i.Oy(e+s),n&&ti(t,i)}(t,i);break;case 4:e.xD.Y5&&function(t,i){const e=i.ac,s=tL(t,i);i.Oy(e+s)}(t,i)}}function sL(t,i){if(t.byteLength-i.ac<10)return null;if(73!==Cl(t,i)||68!==Cl(t,i)||51!==Cl(t,i))return null;const e=Cl(t,i),s=Cl(t,i);if(!function(t){switch(t){case 2:case 3:case 4:return!0}return!1}(e))return null;const n=Cl(t,i),r=tL(t,i);return{ED:e,i6:s,xD:iL(e,n),e6:r}}function nL(t,i,e){switch(e){case 2:return function(t,i){if(i.ac+6>t.byteLength)return;return{o:jp(t,i,3),Wy:Wp(t,i,3)}}(t,i);case 3:return function(t,i){if(i.ac+10>t.byteLength)return;const e=jp(t,i,4),s=ti(t,i);Cl(t,i);const n=Cl(t,i);return{o:e,Wy:s,xD:{t6:Ut(n,0),s6:Ut(n,1),groupingIdentity:Ut(n,2)}}}(t,i);case 4:return function(t,i){if(i.ac+10>t.byteLength)return;const e=jp(t,i,4),s=tL(t,i);Cl(t,i);const n=Cl(t,i);return{o:e,Wy:s,xD:{groupingIdentity:Ut(n,1),t6:Ut(n,4),s6:Ut(n,5),K5:Ut(n,6),n6:Ut(n,7)}}}(t,i)}}function rL(t){const i=ye(t),e=new j(i.byteLength);let s=0;for(let t=0;t<i.byteLength;t++){const n=i[t];255===n&&t++,e[s]=n,s++}return dh(di(e,0,s))}function hL(t,i){const e=i||new oi,s=sL(t,e);if(!s)return null;const n=function(t,i,e){const s=[],n=i.ac;let r=Wu(t,n,n+e.e6);const h=new oi;switch(i.Ly(e.e6),e.ED){case 2:case 3:e.xD.K5&&(r=rL(r))}eL(t,i,e);for(;h.ac<r.byteLength;){const t=oL(r,h,e);if(void 0===t)break;s.push(t)}return s}(t,e,s);return{yD:s,r6:n}}function oL(t,i,e){const s=nL(t,i,e.ED);if(void 0===s)return;if(0===s.o.charCodeAt(0)||0===s.Wy)return;const n=i.ac;let r,h,o=Wu(t,n,n+s.Wy);switch(i.Ly(s.Wy),e.ED){case 2:{const t=s;h=o,r=ZM(h,new oi,t.o);break}case 3:{const t=s,i=new oi;!function(t,i,e){const s=e.xD;let n,r,h;s.t6&&(n=ti(t,i)),s.s6&&(r=Cl(t,i)),s.groupingIdentity&&(h=Cl(t,i))}(o,i,t);h=Wu(o,i.ac,o.byteLength),r=$M(h,new oi,t.o);break}case 4:{const t=s,i=new oi;t.xD.K5&&(o=rL(o)),function(t,i,e){const s=e.xD;let n,r,h,o;s.groupingIdentity&&(n=Cl(t,i)),s.t6&&(r=ti(t,i)),s.s6&&(h=Cl(t,i)),s.n6&&(o=tL(t,i))}(o,i,t);h=Wu(o,i.ac,o.byteLength),r=$M(h,new oi,t.o);break}}if(!r){const t=nr(ye(h));r=HM(s.o,t.buffer)}return r}r();function aL(t){return it(t)&&"org.id3"===t.type&&it(t.value)}function uL(t){return function(t,i,e){return QM(t,i,e)}(new DataView(t.data),new oi,t.key)}function cL(t){switch(t.key){case"APIC":case"PIC":return function(t){return{id:t.key,mimeType:t.type,pictureType:16,description:t.info,data:t.data}}(t);case"GEOB":case"GEO":return function(t){return{id:t.key,mimeType:t.type,fileName:t.name,description:t.info,data:t.data}}(t);case"PRIV":return function(t){return{id:t.key,ownerIdentifier:t.info,data:t.data}}(t);case"TXXX":case"TXX":return function(t){return{id:t.key,description:t.info,text:t.data}}(t);case"WXXX":case"WXX":return function(t){return{id:t.key,description:t.info,url:t.data}}(t);case"YMID":case"YTYP":case"YSEQ":case"YDUR":case"YCSP":return uL(t);default:const i=t.key.charAt(0);if("T"===i)return function(t){return{id:t.key,text:t.data}}(t);if("W"===i)return function(t){return{id:t.key,url:t.data}}(t)}return function(t){return HM(t.key,t.data)}(t)}r(),r();var dL=class extends Ne{get q(){return this.S5}get sV(){return this.h6?this.h6.default:void 0}get L(){return this.T5}get Ca(){return this.hu||(this.hu=this.xa()),this.hu}xa(){return qo(this)}get o(){return this.aS||this.wO.id||this.h6&&this.h6.id||""}get JI(){return this.yO}get eC(){return this.wO.inBandMetadataTrackDispatchType||""}get Lt(){return this.wO.kind||us.HU}get Th(){return this.bO}set Th(t){t!==this.bO&&(this.bO=t,void 0!==this.h6&&(this.h6.label=t),this.So(new Xh(this)))}get bs(){return this.wO.language||""}get Qk(){return this.Yo}set Qk(t){const i=this.Qk;this.Yo=LS(t),this.o6();const e=this.Qk;i!==e&&this.So(new Rh(this)),e!==xh.Nh&&this.a6(dc.LOADING)}get u6(){return LS(this.wO.mode)}set u6(t){this.wO.mode=t}get AO(){return this.wO}get AP(){return this.o5}get c6(){return this.h6?Number(this.h6.readyState)||dc.NONE:dc.LOADED}get rC(){return this.B5}get Km(){return this.Vp}set Km(t){this.Vp!==t&&(this.Vp=t,this.So(new pM(this)))}get EU(){return this.QU}set EU(t){if(this.QU!==t){this.QU=t;for(const t of this.A5)t.q5()}}get d6(){return this.l6}set d6(t){this.l6=t,t&&(this.f6=!0,u(()=>{this.f6=!1},50)),this.o6()}nV(t){t.Ht!==this&&(t.Ht=this,this.wO.addCue(t.W5),this.v6())}XU(t){t.Ht===this&&(t.Ht=void 0,this.wO.removeCue(t.W5),this.v6())}k5(t){var i;const e=null==(i=this.wO.cues)?void 0:i.getCueById(t);if(!e)return;const s=lL(e);return s&&ln(s)?s[0]:s}jU(t){this._6>=t||(this._6=t,Re(this,t))}o6(){const t=this.Qk;this.d6||t!==xh.Kn?this.u6=t:this.u6=xh.iC}g6(){const t=this.Qk,i=this.u6;t!==i&&(this.d6||t!==xh.Kn||i!==xh.iC)&&("metadata"===this.Lt&&i===xh.Nh?this.Qk=t:this.f6&&i===xh.Nh&&t===xh.Kn?this.u6=t:this.Qk=i)}u5(t){this.o5!==t&&(this.o5=t,this.So(new _M(this,t)))}a6(t){const i=_.max(this.o5,this.c6,t);this.u5(i)}p6(t){let i=lL(t);if(i)return i;if(i=this.m6(t),ln(i))for(const t of i)t.Ht=this;else i.Ht=this;return i}m6(t){const i=this.w6(t);return t.THEOplayerTextTrackCue=i,i}w6(t){return t.endTime<this._6?[]:aL(t)?(this.Km=nh.ID3,function(t){let i;try{i=cL(t.value)}catch(t){i=HM("")}return new UM(t,i)}(t)):function(t){return t&&t.data instanceof ArrayBuffer}(t)?(this.Km=nh.ID3,function(t){const i=[];try{const e=hL(new DataView(t.data));if(e)for(const s of e.r6)i.push(new UM(t,s))}catch(t){}return i}(t)):function(t){return"text"in t}(t)?(this.Km=nh.WEBVTT,function(t){return"regionId"in t}(t)?new BM(t):new NM(t)):new Tl(t)}y6(t){const i=[];if(!t)return i;const e=t.length;for(let n=0;n<e;n++){var s;const e=this.p6(null!=(s=t[n])?s:t.item(n));if(ln(e))for(const t of e)i.push(t);else i.push(e)}return i}b6(){const t=this.y6(this.wO.cues),i=vM(this.A5,t);for(const t of i.b5)t.mn(Js.KL,this.v6),t.mn(Js.QL,this.v6),this.So(new yM(t));for(const t of i.y5)t.wn(Js.QL,this.v6),t.wn(Js.KL,this.v6),this.So(new Ml(t))}U5(){const t=this.y6(this.wO.activeCues),i=vM(this.D5,t);for(const t of i.b5)t.ro=!1;for(const t of i.y5)t.ro=!0;(i.y5.length||i.b5.length)&&this.So(new PM(this))}sC(t){this.Qk=t}kn(){this.Vo();const t=this.A5.slice();for(const i of t)i.kn();Wt(this.A5),Wt(this.D5),this.wO.removeEventListener("cuechange",this.A6),this.wO.removeEventListener("cuechange",this.v6),this.h6&&(this.h6.removeEventListener("load",this.S6),this.h6.removeEventListener("error",this.T6),Ao(this.h6))}constructor(t,i,e,s=!0){super(),this.wO=void 0,this.h6=void 0,this.A5=[],this.D5=[],this.T5=void 0,this.S5=void 0,this.yO=void 0,this.aS=void 0,this.bO=void 0,this.Yo=xh.Nh,this.o5=dc.NONE,this.hu=void 0,this.B5=void 0,this.Vp=nh.DEFAULT,this.f6=!1,this._6=0,this.QU=0,this.l6=void 0,this.A6=()=>{this.o6(),this.wO.removeEventListener("cuechange",this.A6)},this.v6=()=>{this.Qk!==xh.Nh&&(this.b6(),this.U5(),this.A5.length&&this.a6(dc.LOADING))},this.S6=()=>{this.a6(dc.LOADED)},this.T6=()=>{this.a6(dc.ERROR)},this.aS=t||Ve(),this.wO=i,this.l6=s,this.wO.addEventListener("cuechange",this.A6),this.wO.addEventListener("cuechange",this.v6),this.h6=e,this.h6&&(this.B5=Vn(this.h6.src),this.h6.addEventListener("load",this.S6),this.h6.addEventListener("error",this.T6)),this.yO=mi(),this.bO=i.label||"",this.T5=new Sr(this.A5),this.S5=new Sr(this.D5),this.Qk=this.u6,Ht(()=>{this.v6(),this.a6(dc.NONE)})}};function lL(t){return null==t?void 0:t.THEOplayerTextTrackCue}r(),r();function fL(t,i){return Nu(t.YF,i.YF)||function(t,i){return t.Ht===i.Ht?xc(fM(t),fM(i)):cP(t.Ht,i.Ht)}(t.PO,i.PO)||function(t,i){return t===i?hl.rh:t===Js.QL?hl.Ug:hl.Fg}(t.type,i.type)}var vL=class{hr(){Wt(this.k6);for(const t of this.Gl.slice())this.it(t);this.E6(),this.x6=0,this.En=0,Wt(this.P6),this.I6=!1,this.C6=!1,this.R6=0}tt(t){Ct(this.Gl,t)||(this.Gl.push(t),t.wn(Te.pa,this.D6),t.Qk!==xh.Nh&&this.N6())}it(t){_e(this.Gl,t)&&(t.mn(Te.pa,this.D6),t.Qk!==xh.Nh&&this.N6())}N6(){const t=this.P6,i=this.Gl.filter(t=>t.Qk!==xh.Nh);this.P6=i;for(const e of t)Ct(i,e)||this.B6(e);for(const e of i)Ct(t,e)||this.M6(e);this.R6=0}M6(t){if(t.wn(Te.uI,this.L6),t.wn(Te.dI,this.O6),t.wn(Te.fI,this.F6),t.L.V>0){for(const i of t.L.NI)this.U6.push(i);this.V6()}}B6(t){if(t.mn(Te.uI,this.L6),t.mn(Te.dI,this.O6),t.mn(Te.fI,this.F6),t.L.V>0){for(const i of t.L.NI)_e(this.k6,i),_e(this.U6,i);this.V6()}}H6(){this.oa.xP||this.oa.lP?this.E6():this.V6()}V6(){this.I6&&0!==this.P6.length&&(this.R6-this.oa.zx>.25*this.oa.vP||this.x6||(this.x6=this.q6.W6(this.z6)))}E6(){this.x6&&(this.q6.G6(this.x6),this.x6=0)}X6(t){var i,e;if(0===this.R6)return;const s=null!=(e=null==(i=t.Ht)?void 0:i.EU)?e:0,n=t.CO+s,r=t.RO+s,h=this.oa.zx,o=n<=h&&h<r;t.ro!==o?this.R6=0:this.En<n&&n<this.R6?this.R6=n:this.En<r&&r<this.R6&&(this.R6=r)}j6(){if(!this.I6)return;if(0===this.P6.length)return;if(this.oa.xP)return;const t=this.P6,i=this.En,e=this.oa.zx,s=e-i<-.1;let n=this.C6||s;n&&e>i&&e-i<.1&&(n=!1),this.C6=!1;const r=[];let h=1/0;for(const i of t){const t=e-i.EU,s=i.U5(t,n)+i.EU;s<h&&(h=s);for(const t of i.q.NI)r.push(t)}const o=this.k6.slice();if(n);else for(const s of t){uP(s,i-s.EU-Zt,e-s.EU,o)}for(let t=o.length-1;t>=0;t--)Ct(r,o[t])&&Ra(o,t);const a=[];if(!n)for(let t=o.length-1;t>=0;t--){const s=o[t],n=s.Ht.EU;s.CO+n>i&&s.RO+n<=e&&(a.push(s),Ra(o,t))}for(const t of this.U6)t.CO!==t.RO&&_e(a,t);Wt(this.U6);const u=[],c=[];for(const t of a)t.ro||u.push(new uc(t,t.CO)),u.push(new mc(t,_.max(t.CO,t.RO))),t.ro=!1;for(const t of o)t.ro&&(u.push(new mc(t,_.max(t.CO,t.RO))),t.ro=!1);for(const t of r)t.ro||(u.push(new uc(t,t.CO)),t.ro=!0);u.sort(fL);for(const t of u){const i=t.PO;i.So(t);const e=i.Ht;e&&(t.type===Js.QL?e.So(new TM(i)):e.So(new EM(i)),Ct(c,e)||c.push(e))}c.sort(cP);for(const t of c)t.So(new PM(t));this.En=e,this.k6=r,this.R6=h}kn(){this.hr(),this.oa.mn(d.py,this.Q6),this.oa.mn(d.uo,this.K6),this.oa.mn(Jr.PM,this.Q6),this.oa.mn(d.jw,this.Q6),this.oa.mn(d.$w,this.Y6),this.oa.mn(d.Zw,this.Q6)}constructor(t,i){this.oa=void 0,this.q6=void 0,this.Gl=[],this.x6=0,this.En=0,this.k6=[],this.U6=[],this.P6=[],this.I6=!1,this.C6=!1,this.R6=0,this.z6=()=>{this.x6=0,this.j6(),this.H6()},this.Q6=()=>{this.j6(),this.H6()},this.K6=()=>{this.I6=!0,this.Q6()},this.Y6=()=>{this.C6=!0,this.R6=0,this.E6()},this.D6=()=>{this.N6(),this.j6(),this.H6()},this.L6=t=>{const i=t.PO;Ct(this.U6,i)||this.U6.push(i),this.X6(i),this.V6()},this.O6=t=>{const i=t.PO;_e(this.k6,i),_e(this.U6,i),this.X6(i),this.V6()},this.F6=t=>{const i=t.PO;this.X6(i),this.V6()},this.q6=i,this.oa=t,t.wn(d.py,this.Q6),t.wn(d.uo,this.K6),t.wn(Jr.PM,this.Q6),t.wn(d.jw,this.Q6),t.wn(d.$w,this.Y6),t.wn(d.Zw,this.Q6),this.V6()}};r();var ac=class{W6(t){return Os(t)}G6(t){Le(t)}},_L=new ac,gL=class extends vL{constructor(t,i=_L){super(t,i)}};r(),r();var pL=class extends Oh{get Ca(){return this.hu||(this.hu=FM(this)),this.hu}KO(t){return MM(this,t)}constructor(t,i,e){super(t,1/0,i,!1,e)}};r(),r();var mL=class extends Ji{constructor(t,i,e=nh.DEFAULT){super(us.zU,"",i||"","",!1,e,!1,t)}},wL=class extends mL{nV(t){LM(t,this.A5),super.nV(t)}xa(){return qo(this)}constructor(t,i){super(t,i),this.Km=nh.ID3}},yL=class extends wL{get o(){return this.wO.id||""}get eC(){return this.wO.inBandMetadataTrackDispatchType||""}get bs(){return this.wO.language||""}R5(t){super.R5(t),this.u6=this.Qk}get u6(){return LS(this.wO.mode)}set u6(t){this.wO.mode=t}get AO(){return this.wO}nV(t){super.nV(t),t.W5.track!==this.wO&&this.wO.addCue(t.W5)}XU(t){super.XU(t),t.W5.track===this.wO&&this.wO.removeCue(t.W5)}jU(t){this._6>=t||(this._6=t,Re(this,t))}a6(t){this.AP=_.max(this.AP,t)}b6(){const t=this.wO.cues;if(!t)return;const i=t.length,e=[],s=[];for(let h=0;h<i;h++){var n;const i=null!=(n=t[h])?n:t.item(h);if(aL(i)&&i.endTime>=this._6){var r;const t=null!=(r=null==i?void 0:i.THEOplayerTextTrackCue)?r:new bL(i);e.push(t)}else s.push(i)}Wl(e,fi);const h=vM(this.L.NI.slice(),e);for(const t of s)this.wO.removeCue(t);for(const t of h.b5)t.kn(),this.XU(t);for(const t of h.y5)this.nV(t)}kn(){this.wO.removeEventListener("cuechange",this.v6),super.kn()}constructor(t){super(t.inBandMetadataTrackDispatchType,t.label),this.wO=void 0,this._6=0,this.v6=()=>{this.Qk!==xh.Nh&&(this.b6(),this.a6(dc.LOADED))},this.wO=t,this.wO.addEventListener("cuechange",this.v6),this.Qk=this.u6,Ht(()=>{this.v6()})}},bL=class extends pL{kn(){super.kn(),this.W5.THEOplayerTextTrackCue=void 0}constructor(t){super(t.startTime,cL(t.value),t.id),this.W5=void 0,this.W5=t,this.W5.THEOplayerTextTrackCue=this}};r(),r();var Su=[d.xw,d.Ew,d.yy,d.Ay,d.LICENSE_REQUEST_GENERATED];r();var AL=class extends gp{get error(){return this.errorObject.message}get licenseAcquisitionURL(){return this.errorObject.url}get status(){return this.errorObject.status}get statusText(){return this.errorObject.statusText}get licenseAcquisitionMessage(){return this.errorObject.response}get systemCode(){return this.errorObject.systemCode}constructor(t){super(d.Ew),this.errorObject=void 0,this.errorObject=t}};r(),r(),r();var nt=class extends gp{constructor(t){super(d.xw),this.J6=void 0,this.J6=t}};r();var SL=class extends gp{constructor(t){super("by"),this.J6=void 0,this.J6=t}},TL=new Zn,kL=class extends gp{constructor(t){super("Xs"),this.session=void 0,this.session=t}},EL=class extends Ne{get Z6(){return this.t8}gS(){return this.i8=!0,TL.Zo(t=>this.e8(t),this.hT.Yg)}async e8(t){try{fr(t),await this.s8.$V(t);const i=await this.s8.tH(this.n8.Jm,this.n8.Py,t);await this.r8.gS(this.n8.Jm,this.n8.Py,i)}catch(t){sa(t);const i=t instanceof Am?t.Zy:void 0,e=new fs(me.CONTENT_PROTECTION_INTERNAL_ERROR,"Error while performing the CDM request",t,void 0,void 0,void 0,void 0,i);throw this.Ts(e),e}}async hH(t,i){let e;try{e=function(t){return Qo(t,wm())}(t)?await this.s8._H(new j(t),this.hT.Yg):await this.s8.gH(new j(t),i,this.hT.Yg)}catch(t){if(Ce(t))return;throw t}if(this.hT.Yg.Hg)return;const s=this.h8,n=new Ga;this.h8=n;try{await this.r8.er(e),await Ze(100)}catch(t){const i=t instanceof Am?t.Zy:void 0;throw new fs(me.CONTENT_PROTECTION_INTERNAL_ERROR,"Error while applying license response",t,void 0,void 0,void 0,void 0,i)}finally{void 0!==s&&await s.Yy,n.Qy(),this.h8===n&&(this.h8=void 0)}}Ts(t){const i=t instanceof fs?t:new fs(me.CONTENT_PROTECTION_ERROR,t.message,t);this.So(new AL(i)),this.Xs()}o8(){this.r8.mn("Iy",this.SS),this.r8.mn(d.Ay,this.a8),this.r8.mn("lt",this.u8),this.c8=!1,this.t8=!1,this.hT.Zg(),this.So(new kL(this))}async Xs(){let t;this.Vo();do{t=this.h8,void 0!==t&&await t.Yy}while(this.h8!==t);this.o8(),await this.r8.Xs().catch(gs)}constructor(t,i,e){super(),this.r8=void 0,this.s8=void 0,this.n8=void 0,this.i8=void 0,this.c8=void 0,this.hT=void 0,this.h8=void 0,this.t8=void 0,this.SS=void 0,this.a8=void 0,this.u8=void 0,this.r8=t,this.s8=i,this.n8=e,this.i8=!1,this.c8=!1,this.hT=new Zc,this.t8=!1,this.SS=t=>{if(!this.hT.Yg.Hg)switch(t.Ry){case"license-request":case"license-renewal":this.hH(t.Iy,t.Dy).catch(t=>this.Ts(t));break;default:this.Ts(new fs(me.CONTENT_PROTECTION_NOT_SUPPORTED,"Unsupported CDM message type: "+t.Ry))}},this.a8=t=>{this.r8.xy.Xy((t,i)=>{switch(t){case"usable":zd.Og(()=>{this.c8=!0,this.So(new nt(i))},100);break;case"expired":case"status-pending":default:break;case"output-restricted":case"internal-error":this.So(new SL(i))}}),this.t8=!0,this.So(t)},this.u8=t=>{this.Ts(new fs(me.CONTENT_PROTECTION_INTERNAL_ERROR,"Unknown CDM error"))},t.wn("Iy",this.SS),t.wn(d.Ay,this.a8),t.wn("lt",this.u8),t.uS.then(()=>this.o8(),t=>this.Ts(t))}},xL=class extends Ne{get xS(){return this.yS}get d8(){return this.l8.every(t=>t.Z6)}ZV(){return this.f8.ZV()}v8(t){return this._8||(this._8=this.g8(t)),this._8}async g8(t){fr(t);const i=await this.f8._H(new j(wm()),t);if(fr(t),!this.ES)throw new m("Invalid MediaKeys when setting ServerCertificate");await this.ES.PS(i.buffer)}async p8(t){if(!this.ES)throw new m("Invalid MediaKeys when creating KeySession");try{this.m8.push(t);const i=await this.ES.kS("temporary"),e=new EL(i,this.f8,t);return this.l8.push(e),e.wn(Su,this.w8),e.wn("Xs",this.y8),e}finally{_e(this.m8,t)}}b8(t){if(t.A8)return!1;for(const i of this.l8)if(PL(i.n8,t))return!0;for(const i of this.m8)if(PL(i,t))return!0;return!1}async kn(){this.ES=void 0,this.Vo();const t=this.l8.slice();Wt(this.l8),await Promise.all(t.map(t=>t.Xs())),this.S8=void 0,this.f8.zg()}constructor(t,i,e){super(),this.yS=void 0,this.ES=void 0,this.f8=void 0,this.l8=[],this._8=void 0,this.m8=[],this.S8=void 0,this.w8=t=>{if(t.type===d.Ay)return null!=this.S8||(this.S8=new mm),t.xy.Xy((t,i)=>{this.S8.Gy(i,t)}),void(this.d8&&this.So(new wp(this.S8)));this.Rs(t)},this.y8=t=>{t.session.mn(Su,this.Rs),t.session.mn("Xs",this.y8),_e(this.l8,t.session),this.S8=void 0},this.yS=t,this.ES=i,this.f8=e}};function PL(t,i){if(t.A8)return!1;if(t.Jm!==i.Jm)return!1;if(Qo(t.Py,i.Py))return!0;if("sinf"===t.Jm&&"sinf"===i.Jm){const i=IL(t),e=IL(t);if(i&&e)return ko(i,e)}return!1}function IL(t){try{const i=nm(dh(new j(t.Py)),new oi),e=JSON.parse(i).sinf[0],s=new j(gm(e)),n=new yu(dh(s),new oi);return Hn.cB(n).SB.kB.PB}catch(t){return}}var CL=class extends Ne{get T8(){var t;return null==(t=this.yS)?void 0:t.xS}get Rq(){return this.f8}set Rq(t){this.f8=t}Un(t,i){this.aq=t,this.RZ(i)}RZ(t){this.ZS=t,this.k8(this.hT.Yg).catch(bu)}NZ(t){this.E8(t,this.hT.Yg).catch(bu)}async E8(t,i){var e,s;fr(i);var n;if(null==(e=this.ZS)?void 0:e.fq)for(const e of null!=(n=null==(s=this.ZS)?void 0:s.fq)?n:[]){var r;const s=hh(t,t=>t.x8===e.xS.$m);if(void 0!==(null==s?void 0:s.P8)&&!(null==(r=e.OW)?void 0:r.some(t=>Qo(s.P8,t))))try{return void await this.I8(e.xS.Jm,s.P8,i)}catch(t){sa(t)}}}async k8(t){if(!zd.Zs.gp||!await this.C8(t))return this.ZS&&this.ZS.D8?await this.N8(t):void 0}async C8(t){var i,e;if(!(null==(i=this.ZS)?void 0:i.fq))return!1;let s=!1;var n;for(const i of null!=(n=null==(e=this.ZS)?void 0:e.fq)?n:[]){if(i.UW&&0!==i.UW.length){try{const e={kids:i.UW.map(t=>t.id)},n=rm(JSON.stringify(e)).buffer;await this.I8(Lg,n,t),s=!0}catch(t){sa(t)}if(s)return!0}var r;for(const e of null!=(r=i.OW)?r:[])try{await this.I8(i.xS.Jm,e,t),s=!0}catch(t){sa(t)}if(s)return!0}return!1}B8(t){return t===Ng||t===Mg||t===Bg||t===Lg}async I8(t,i,e){if(fr(e),!i.byteLength)return;if(!this.ZS||!this.ZS.fq.length)throw new fs(me.CONTENT_PROTECTION_CONFIGURATION_MISSING,"Missing configuration for encrypted content");if(!this.B8(t))return void 0;const s=UT(t,i),n=this.ZS.fq;let r;const h=[];for(const i of n){fr(e);const n=s[i.xS.Zm];if(n&&i.xS.Jm===t)try{const t=await this.M8(i,e);t.ZV()&&await t.v8();const s=this.PL.sP,r={Jm:i.xS.Jm,Py:n,A8:s};if(h.push(!0),this.L8(t,r)){const i=await t.p8(r);await i.gS(),this.So(new yp(n))}return}catch(t){sa(t),r=t}else i.xS.Km===po.Xm&&h.push(!1)}if(0===h.length||h.some(pc))throw await zd._m()?new fs(me.CONTENT_PROTECTION_NOT_SUPPORTED,"Encrypted content over an insecure connection is not supported",r):new fs(me.CONTENT_PROTECTION_NOT_SUPPORTED,"Cannot create content decryption session",r)}async N8(t){var i;const e=null==(i=this.ZS)?void 0:i.fq;if(e)for(const i of e){fr(t);try{const e=await this.M8(i,t);return void(e.ZV()&&await e.v8())}catch(t){sa(t)}}}L8(t,i){return zd.Zs._p||this.PL.ML.BL||!t.b8(i)}M8(t,i){return this.ta.Zo(i=>this.O8(t,i),i)}async O8(t,i){if(fr(i),!this.ZS||!this.f8||!this.aq)throw new m("Not initialized");if(this.yS){if(this.yS.xS!==t.xS)throw new m("Internal key system error");return this.yS}const e=this.f8,s=Y({},t,{Vq:t.Vq.map(i=>{var s;return Y({},i,{persistentState:null!=(s=i.persistentState)?s:e.wH(t.xS),FS:i.FS||e.FS(t.xS)})})}),n=await this.aq.xZ(s.xS,s.Vq),r=e.LW(s),h=new xL(s.xS,n,r);return h.wn(Su,this.Rs),this.yS=h,h}Ts(t){if(Ce(t))return;const i=t instanceof fs?t:new fs(me.CONTENT_PROTECTION_ERROR,t.message,t);this.So(new AL(i))}async hr(){this.aq=void 0,this.ZS=void 0,this.hT.Zg(),this.hT=new Zc,await this.F8()}async F8(){await this.ta.Zg();const t=this.yS;t&&(t.mn(d.yy,this.Rs),this.yS=void 0,await t.kn())}async zg(){this.Vo(),this.PL.mn(jr.Dw,this.U8),await this.hr(),await this.ta.kn()}constructor(t){super(),this.PL=void 0,this.hT=new Zc,this.ta=new Zn,this.ZS=void 0,this.f8=void 0,this.aq=void 0,this.yS=void 0,this.U8=t=>{this.I8(t.Jm,t.Py,this.hT.Yg).catch(t=>this.Ts(t))},this.PL=t,this.PL.wn(jr.Dw,this.U8)}};r();var RL=class extends gp{constructor(t){super(d.Vw),this.currentTime=void 0,this.currentTime=t}};r();var DL=class extends Ne{get AP(){return void 0!==this.V8?this.V8.AP:Lr.zL}u5(){var t;null==(t=this.V8)||t.u5()}hr(){var t;null==(t=this.V8)||t.hr()}zg(){this.Vo(),void 0!==this.V8&&(this.V8.zg(),this.V8=void 0)}H8(t){if(this.V8===t)return;const i=this.AP;void 0!==this.V8&&this.V8.zg(),this.V8=t,void 0!==t&&(t.wn(Jr.AI,this.Rs),t.u5());const e=this.AP;i!==e&&this.So(new Ka(this.W8.zx,e))}constructor(t){super(),this.W8=void 0,this.V8=void 0,this.W8=t}};r();var NL=class extends Ji{get Ca(){var t;return null!=(t=this.hu)?t:this.hu=BL(this)}q8(t,i,e){const s=new xE(t,i,e,!1);return this.nV(s),s}z8(t){this.XU(t)}constructor(t,i,e){super(t,i,"",e,void 0,nh.WEBVTT)}};function BL(t){return Gi(qo(t),{get type(){return t.Km},addCue:(i,e,s)=>t.q8(i,e,s).Ca,removeCue(i){t.z8(i.IO)}})}r();var ML=class extends dL{get Ca(){var t;return null!=(t=this.hu)?t:this.hu=BL(this)}q8(t,i,e){const n=this.m6(new s.VTTCue(t,i,e));return this.dE?this.nV(n):this.G8.push(n),n}z8(t){_e(this.G8,t),this.XU(t)}kn(){var t;super.kn(),null==(t=this.h6)||t.removeEventListener("load",this.X8),Wt(this.G8)}constructor(t,i,e){var s;super(t,i,e),this.dE=!1,this.G8=[],this.X8=()=>{var t;null==(t=this.h6)||t.removeEventListener("load",this.X8),this.dE=!0;for(const t of this.G8)this.nV(t);Wt(this.G8)},null==(s=this.h6)||s.addEventListener("load",this.X8),this.Km=nh.WEBVTT}};function LL(t,i){if(void 0!==t.e4!==i.q4.some(t=>St(t.GT)))return!1;return void 0!==t.s4===i.q4.some(t=>$y(t.GT))}r(),r();var OL=.05,FL=zs.B_||zs.L_,UL=zs.Rg,VL=zs.X_,HL=zs.X_&&zs.ru,WL=class extends Ne{get d5(){return this.j8}get Fx(){return this.aq?this.aq.Fx:Uo.rL()}get Vx(){const t=this.uq;if(!t||S(t.getTime()))return;const i=1e3*this.zx;return new Date(t.getTime()+i)}get uq(){if(this.hq.getStartDate)return this.Pz&&this.Q8||(this.Q8=this.hq.getStartDate()),this.Q8}get zx(){return this.K8?this.K8.zx:void 0!==this.Y8?this.Y8:this.pT.currentTime}get Wu(){return this.sc}get ct(){return this.K8?this.K8.ct:this.aq?this.aq.ct:this.pT.duration}get Qx(){return this.xP?this.J8():this.K8?this.K8.Qx:this.pT.ended||this.Z8}J8(){return void 0!==this.Y8&&this.ct===this.Y8}get lt(){return this.nq}get hq(){return this.pT}get lP(){return this.t9?this.i9:this.K8?this.K8.lP:this.pT.paused}get pP(){return this.Ho.HM(Uo.jn(this.pT.played))}get Mi(){return this.pT.offsetHeight*zd.Zs.fp}get Ti(){return this.pT.offsetWidth*zd.Zs.fp}get Ma(){return this.ha}get Sq(){return this.ea}get AP(){return this.e9.AP}get kP(){return this.aq?this.aq.kP:Uo.rL()}get xP(){return this.K8?this.K8.xP:this.Pz||this.pT.seeking&&!this.r5}get n5(){return this.K8?this.K8.n5:this.r5}get _5(){return 0!==this.s9}get oP(){return this.K8?this.K8.oP:this.pT.muted}set oP(t){this.K8?this.K8.oP=t:(this.pT.muted=t,this.n9())}get vP(){return this.K8?this.K8.vP:void 0!==this.r9?this.r9:this.pT.playbackRate}set vP(t){this.K8?this.K8.vP=t:this.lP||this.j8?(this.r9=t,this.h9()):(this.r9=void 0,this.pT.playbackRate=t,this.h9())}h9(){const t=this.vP;this.o9!==t&&(this.o9=t,this.So(new Ik(this.zx,t)))}get a9(){return this.kz}get OP(){return this.K8?this.K8.OP:this.pT.volume}set OP(t){this.K8?this.K8.OP=t:(this.pT.volume=t,this.n9())}n9(){const t=this.OP,i=this.oP;this.u9===t&&this.c9===i||(this.u9=t,this.c9=i,this.So(new Wi(this.zx,this.OP)))}hP(){return lN(this.pT)}QP(){this.d9||(this.d9=!0);const t=this.l9();return this.f9(),t}f9(){this.t9?this.i9&&(this.i9=!1,this.So(new vt(this.zx))):this.v9()}v9(){if(this.K8)this.K8.QP();else{zs.X_&&!zs.ru&&this.pT.preload===Dn.pz&&(this.pT.preload=Dn.zU);const t=this.vP,i=this.pT.play();t!==this.hq.playbackRate&&(this.vP=t),this.Z8=!1,vo(i)?i.then(this._9,this.g9):this.p9.g5()&&this.m9()}}jP(){this.t9?this.i9||(this.i9=!0,this.So(new Si(this.zx))):this.w9()}w9(){this.K8?this.K8.jP():(this.pT.pause(),this.p9.er()),this.y9(new Qc)}l9(){const t=new Ga;return this.b9.push(t),t.Yy}A9(){for(const t of this.b9)t.Qy(void 0);Wt(this.b9)}y9(t){for(const i of this.b9)i.Ky(t);Wt(this.b9)}m9(){this.t9||this.K8||this.A9()}S9(t){this.t9||this.K8||this.y9(t)}Oy(t,i,e){void 0===i&&(i=!1),void 0===e&&(e=!1),this.K8?this.K8.Oy(t,i,e):(this.T9.Zg(),this.T9=new Zc,this.k9=Cu(this.E9(t,i,e,this.k9,this.T9.Yg),this.T9).catch(gs))}$W(t){const i=this.uq;if(!i||S(i.getTime()))return;const e=(t.getTime()-i.getTime())/1e3;this.Oy(e)}async E9(t,i,e,s,n){try{if(this.Y8=t,this.x9=t,this.P9=zd.Mg(),e&&!this.Pz?this.r5=!0:(this.Pz=!0,this.r5=!1),this.Z8&&!this.J8()&&(this.Z8=!1),this.r5?(this.So(new Xr(this.zx)),(zs.w_||zs.S_)&&(t+=OL)):this.So(new ji(t)),await s.catch(gs),fr(n),this.aq&&!this.aq.ZZ())return void this.I9();for(this.C9&&this.R9(),this.e9.AP===Lr.zL&&await this.e9.ww(Jr.AI,n);0===this.pT.seekable.length||zs.X_&&this.pT.seekable.end(0)===1/0||HL&&!this.d9;){const t={stack:[],error:void 0,hasError:!1};try{if(void 0!==this.D9&&0===this.pT.seekable.length)return void this.I9();const i=Es(t,Zc.ep([n]),!1);await Promise.race([KA(this.pT,"timeupdate",i.Yg),Ze(100,i.Yg)]),fr(n)}catch(i){t.error=i,t.hasError=!0}finally{Zs(t)}}let h=qB(this.Fx,t,OL),o=this.kP,a=!0,u=!1;for(;;){const t={stack:[],error:void 0,hasError:!1};try{var r;if(o=this.kP,o.V>0&&!o.Cr(h)){let t=o.LM(h);t===o.An(0)&&zs.X_&&this.ct===1/0&&CN(this.aq)&&o.Cr(t-OL)&&(t-=OL),h=t,a=!0}if(i&&(zd.Zs.Dp||!this.pT.fastSeek)){const t=this.Fx;if(!t.Cr(h)){const i=qB(t,h,1);i!==h&&(h=i,a=!0)}}if(VL){const t=this.N9();void 0!==t&&h>t&&(h=t,a=!0)}if(!u){const t=this.B9();void 0!==t&&h>t&&(u=!0,await this.M9(t,!1,n),await KA(this.pT,"seeked",n),fr(n),a=!0)}if(a){a=!1,await this.M9(h,i,n),fr(n);let t=this.zx;o=this.kP,h=o.LM(h);let e=1;for(;_.abs(h-t)>=Zt;)o=this.kP,h=zL(h,o,e),await this.M9(h,i,n),fr(n),t=this.zx,e++}if(!(this.pT.seeking||this.e9.AP<Lr.GL))break;const e=Es(t,Zc.ep([n]),!1);await Promise.race([KA(this.pT,"seeked",e.Yg),this.ww([d.Qw,d.Cw],e.Yg),this.e9.ww(Jr.AI,e.Yg),null==(r=this.aq)?void 0:r.ww(ON.bZ,e.Yg)].filter(it)),fr(n)}catch(i){t.error=i,t.hasError=!0}finally{Zs(t)}}this.I9()}catch(t){if(Ce(t))return;0}}async M9(t,i,e){fr(e);let s=this.kP;if(t=s.LM(t),this.C9){let i=!0;for(;i||this.e9.AP<Lr.XL;){const n={stack:[],error:void 0,hasError:!1};try{if(s=this.kP,s.Cr(t)||(t=s.LM(t),i=!0),i){i=!1,this.Y8=t,this.L9(this.zx);continue}const r=Es(n,Zc.ep([e]),!1);await Promise.race([this.ww(d.Cw,r.Yg),this.e9.ww(Jr.AI,r.Yg)])}catch(t){n.error=t,n.hasError=!0}finally{Zs(n)}}fr(e)}const n=KA(this.pT,"seeking",e);i&&!zd.Zs.Dp&&this.pT.fastSeek?this.pT.fastSeek(t):this.pT.currentTime=t,this.Y8=void 0,this.L9(this.zx),this.pT.seeking&&await n}N9(){if(!this.aq||!this.aq.jZ)return;const t=this.aq.QZ,i=this.aq.KZ,e=t&&i?t.Mn(i):t||i;if(!e||0===e.V)return;const s=e.Tn(e.V-1),n=e.An(e.V-1);return _.max(s,n-.001)}B9(){if(!this.aq||!this.aq.jZ)return;const t=this.aq.KZ;if(!t||0===t.V)return;const i=t.Tn(t.V-1);let e=t.An(t.V-1)-.02;return e-=.001,_.max(i,e)}L9(t){this.x9!==t&&(this.x9=t,this.r5?this.So(new Xr(t)):this.So(new ji(t)))}I9(){const t=this.r5;this.Pz=!1,this.r5=!1,this.Y8=void 0,this.P9=0,this.x9=NaN,this.C9&&this.O9(),t?(this.So(new RL(this.zx)),this.F9()):(this.So(new Yr(this.zx)),this.U9=!0),this.aJ()}R9(){this.t9||(this.i9=this.lP,this.t9=!0,this.w9())}O9(){this.t9&&(this.t9=!1,this.i9||this.f9())}$Z(t){for(const i of t){if(i.Km===O.AV&&VN.$Z(i,this.pT))return i;if(i.Km===O.SV&&YB.$Z(i))return i}}async V9(t){if(t.Km!==O.SV)return{H9:!1};const i=fv(!0);return i?async function(t,i){var e,s;const n=t.W9,r=t.q9;if("function"==typeof(null==(s=od)||null==(e=s.mediaCapabilities)?void 0:e.decodingInfo)){const t={type:"media-source",video:n&&{contentType:n.GT,width:n.Ti,height:n.Mi,bitrate:n.z9,framerate:n.G9},audio:r&&{contentType:r.GT,channels:r.X9,bitrate:r.z9,samplerate:r.j9}};try{const i=await od.mediaCapabilities.decodingInfo(t);return{H9:i.supported,Q9:i.smooth,K9:i.powerEfficient}}catch(t){}}return{H9:(!r||i.isTypeSupported(r.GT))&&(!n||i.isTypeSupported(n.GT)),Q9:void 0,K9:void 0}}(t,i):{H9:!1}}we(){this.kz=!1,br(this.pT)&&(this.pT.style.display="none")}be(){this.kz=!0,br(this.pT)&&(this.pT.style.display="block")}get nt(){return this.Y9}get Ql(){return this.Oz}sI(t,i,e,s,n,r,h,o,a){const u=new Ji(t,i,e,s,n,r,h,a,o);return this.Gl.tt(u),this.J9.tt(u),u}Tq(t){const{Lt:i,Th:e,bs:n}=t;if("function"==typeof this.pT.addTextTrack&&"function"==typeof s.VTTCue){const t=this.Z9("data:text/vtt,WEBVTT%0A%0A",i,e,n),s=t.track,r=new ML(s.label,s,t);return this.t7.tt(r),this.i7.push(r),r}const r=new NL(i,e,n);return this.Gl.tt(r),this.J9.tt(r),r}wq(){return!0}bq(t,i,e,s,n){const r=this.Z9(t,i,e,s,n),h=r.track,o=new dL(h.label,h,r);return this.t7.tt(o),this.i7.push(o),o}Z9(t,i,e,s,n){const r=h.createElement("track");return r.src=Vn(t),r.kind=i,r.label=null!=e?e:"",s&&(r.srclang=s),r.default=Boolean(n),this.pT.appendChild(r),r}rV(t){this.Gl.it(t),this.J9.it(t)}Eq(){for(const t of this.Gl.NI.slice())t.kn();this.Gl.hr();for(const t of this.i7.slice())this.t7.it(t),t.kn();Wt(this.i7)}Hq(){const t=this.pT.textTracks;t&&t.addEventListener&&(t.addEventListener("addtrack",this.e7),t.addEventListener("removetrack",this.s7),t.addEventListener("change",this.n7))}Iq(){const t=this.pT.textTracks;t&&t.removeEventListener&&(t.removeEventListener("addtrack",this.e7),t.removeEventListener("removetrack",this.s7),t.removeEventListener("change",this.n7))}r7(t){t.mode=xh.iC;const i=new yL(t);this.t7.tt(i),this.J9.tt(i)}h7(t,i){const e=()=>{XL(t)&&(t.removeEventListener("cuechange",e),this.t7.tt(new dL(t.id,t,i)))};t.addEventListener("cuechange",e),t.mode=xh.iC}o7(t){const i=this.pT.getElementsByTagName("track");for(let e=0;e<i.length;e++){const s=i[e]||i.item(e);if(s.track===t)return s}}a7(){if(0===this.t7.V)return;const t=this.kP;if(0===t.V)return;const i=t.Tn(0);if(this.u7!==i){for(const t of this.t7.NI)t.jU(i);this.u7=i}}Un(t){return this.d7.Zo(async i=>{if(fr(i),this.aq)throw new m("Already loaded a media source");let e;if(t.Km===O.AV)e=new VN(t,this,this.DZ,this.hw,this.GJ),this.C9=!1,this.e9.H8(this.l7());else{if(t.Km!==O.SV)throw new m("Unsupported configuration");{this.C9=FL;const i=this.l7();e=new YB(t,this,i,this.DZ,this.hw,void 0,this.N4,this.GJ),this.e9.H8(i),UL&&(this.wn(d.py,this.f7),this.e9.wn(Jr.AI,this.v7))}}return this.aq=e,await e.GY(),e})}l7(){return this.C9?new rM(this):new Ou(this)}_7(){if(this.j8)return;const t=this.vP;this.j8=!0,this.vP=t,this.pT.playbackRate=0,this.e9&&this.e9.u5()}g7(){if(!this.j8)return;const t=this.vP;this.j8=!1,this.vP=t,this.p7()}p7(){this.pT.currentTime=this.pT.currentTime,this.e9&&this.e9.u5()}m7(){this.Pz=!1,this.r5=!1,this.U9=!1,zd.Lg(this.s9),this.s9=0,this.Ho=Uo.rL(),this.T9.Zg(),this.Y8=void 0,this.x9=NaN,this.Q8=void 0,this.C9=!1,this.t9=!1,this.nq=void 0,this.Z8=!1,this.D9=void 0,this.u7=0,this.w7=!1,this.d9=!1,this.y7&&(this.b7(),this.y7=!1),this.y9(new Qc),this.e9.H8(new Ou(this)),this.p9.hr(),this.t7.hr(),this.g7(),UL&&(Le(this.A7),this.A7=0,this.mn(d.py,this.f7))}async hr(){this.m7(),await this.d7.Zg(),await this.d7.Zo(async()=>{this.aq&&(await this.aq.zg(),this.aq=void 0,zs.w_&&zs.b_<3&&this.S7())})}async F8(){const t=this.aq;if(void 0===t||!BN(t)||void 0!==this.nq)throw new g("Invalid state");this.m7(),this.pT.pause(),this.pT.currentTime=0,await this.d7.Zo(()=>async function(t){t.I3();const i=[t.e4,t.s4].filter(it);await Promise.all(i.map(t=>t.f3(0,1/0))),t.F4(NaN)}(t))}S7(){this.T7();const t=this.pT,i=t.parentElement,e=t.tagName.toLowerCase();this.pT=Tf(e),this.retainMediaElementState(t),kf(t),null==i||i.replaceChild(this.pT,t),this.b7(),this.e9.H8(this.l7()),this.p9.mn(Jr.PM,this.k7),this.p9.zg(),this.p9=new aM(this),this.p9.wn(Jr.PM,this.k7),this.kz?this.be():this.we(),this.So(new Vk),this.So(new Hk)}retainMediaElementState(t){this.hq.muted=t.muted,this.hq.volume=t.volume}async zg(){this.y7=!1,this.T7(),this.Iq(),await this.hr(),await this.d7.kn(),this.p9.zg(),this.e9.zg(),await this.DZ.zg(),this.Eq(),this.Gl.kn(),this.t7.kn(),this.Y9.kn(),this.Vo()}b7(){this.hq.addEventListener("play",this.E7),this.hq.addEventListener("pause",this.x7),this.hq.addEventListener("timeupdate",this.P7),this.hq.addEventListener("progress",this.I7),this.hq.addEventListener("loadstart",this.C7),this.hq.addEventListener("ended",this.R7),this.hq.addEventListener("ratechange",this.D7),this.hq.addEventListener("volumechange",this.N7),this.hq.addEventListener("durationchange",this.B7),this.hq.addEventListener("resize",this.M7),this.hq.addEventListener("loadedmetadata",this.M7),this.hq.addEventListener("error",this.L7),this.hq.addEventListener("emptied",this.O7),this.hq.addEventListener("seeked",this.F7),this.hq.addEventListener("seeking",this.U7),Vc()?(this.pT.addEventListener("encrypted",this.V7),this.pT.addEventListener("waitingforkey",this.H7)):void 0!==s.WebKitMediaKeys&&"function"==typeof s.WebKitMediaKeys.isTypeSupported?this.pT.addEventListener("webkitneedkey",this.W7):lp()?this.pT.addEventListener("webkitneedkey",this.q7):void 0!==s.MSMediaKeys&&"function"==typeof s.MSMediaKeys.isTypeSupported&&this.pT.addEventListener("msneedkey",this.z7)}T7(){this.hq.removeEventListener("play",this.E7),this.hq.removeEventListener("pause",this.x7),this.hq.removeEventListener("timeupdate",this.P7),this.hq.removeEventListener("progress",this.I7),this.hq.removeEventListener("loadstart",this.C7),this.hq.removeEventListener("ended",this.R7),this.hq.removeEventListener("ratechange",this.D7),this.hq.removeEventListener("volumechange",this.N7),this.hq.removeEventListener("durationchange",this.B7),this.hq.removeEventListener("resize",this.M7),this.hq.removeEventListener("loadedmetadata",this.M7),this.hq.removeEventListener("error",this.L7),this.hq.removeEventListener("encrypted",this.V7),this.hq.removeEventListener("waitingforkey",this.H7),this.hq.removeEventListener("webkitneedkey",this.W7),this.hq.removeEventListener("webkitneedkey",this.q7),this.hq.removeEventListener("msneedkey",this.z7),this.hq.removeEventListener("emptied",this.O7),this.hq.removeEventListener("seeked",this.F7),this.hq.removeEventListener("seeking",this.U7)}G7(){this.K8||(this.Ho=this.pP,this.K8=tM(this),this.T7(),this.K8.wn(ZB,this.Rs))}X7(){if(!this.K8)return;const t=this.K8;this.K8=void 0,this.e9.u5(),iM(this,t),t.zg(),this.b7()}F9(){const t=this.zx;this.So(new B(t,void 0)),this.D9=t}aJ(){this.Z8||!this.Qx||this.xP||(this.Z8=!0,this.So(new ur(this.zx)))}Qq(t){this.nq=t,this.y9(this.nq),this.So(new uM(this.nq))}get sP(){return Boolean(this.pT.webkitCurrentPlaybackTargetIsWireless)}get j7(){return this.Q7}get ML(){return Y({},DN)}K7(){this.Q7||(xf(this.pT,zd.Zs),this.Q7=!0)}Y7(t){t.appendChild(this.pT)}B3(){UL&&this.f7(),this.e9.u5()}get Rq(){return this.DZ.Rq}set Rq(t){this.DZ.Rq=t}get J7(){return this.N4}set J7(t){this.N4=t}get T8(){return this.DZ.T8}$P(){this.DZ.F8().catch(gs),this.t7.hr()}get WP(){return this.w7}set WP(t){this.w7=t,this.y7&&!this.w7&&(this.y7=!1,this.b7())}constructor(t,i,e,s,n){super(),this.pT=void 0,this.sc=void 0,this.GJ=void 0,this.nq=void 0,this.kz=!0,this.aq=void 0,this.d7=new Zn,this.K8=void 0,this.e9=void 0,this.p9=void 0,this.DZ=void 0,this.ha=new ks,this.ea=new Pu,this.Gl=void 0,this.Oz=void 0,this.i7=[],this.t7=void 0,this.Y9=void 0,this.J9=void 0,this.Y8=void 0,this.P9=0,this.x9=NaN,this.Q8=void 0,this.U9=!1,this.D9=void 0,this.u7=0,this.Pz=!1,this.r5=!1,this.Z7=Lr.zL,this.s9=0,this.k9=Promise.resolve(),this.T9=new Zc,this.b9=[],this.Ho=Uo.rL(),this.r9=void 0,this.o9=1,this.c9=!1,this.u9=1,this.Z8=!1,this.w7=!1,this.y7=!1,this.C9=!1,this.hw=void 0,this.t9=!1,this.i9=!1,this.j8=!1,this.Q7=!1,this.A7=0,this.N4=void 0,this.d9=!1,this.e7=t=>{const i=t.track,e=this.o7(i);if(!GL(this.t7,i)){if(zs.X_){if(i.kind===us.zU)return void this.r7(i);if(i.kind===us.WU&&""===i.label&&""===i.language&&!XL(i))return void this.h7(i,e)}this.t7.tt(new dL(i.id,i,e))}},this.s7=t=>{const i=GL(this.t7,t.track);i&&this.t7.it(i)},this.n7=()=>{for(let t=0;t<this.t7.V;t++){const i=this.t7.MI(t);i instanceof dL&&i.g6()}},this.f7=()=>{if(void 0===this.aq||!BN(this.aq))return;if(this.lP)return;const t=this.aq,i=t.e4,e=t.s4;if(!i||!e)return;if(t.jZ)return void this.g7();if(t.AP===xl.S3)return;const s=i.Fx,n=e.Fx;if(0===s.V&&0===n.V)return void this.g7();const r=this.zx;if(r<s.Tn(0)||r<n.Tn(0))return void this.g7();if(s.Cr(r)!==n.Cr(r)){if(t.JZ(r))return;this._7()}else if(this.g7(),!this.A7&&this.p9.g5()){s.WM(n).jM(r,r+.5)&&(this.A7=Os(this.ttt))}},this.ttt=()=>{this.A7=0,this.f7()},this.v7=()=>{if(this.xP||this.n5)return;if(this.e9.AP>=Lr.XL)return;if(void 0===this.aq||!BN(this.aq))return;const t=this.aq,i=t.e4,e=t.s4;if(!i||!e)return;const s=this.zx,n=i.Fx,r=e.Fx;if(!n.Cr(s)||!r.Cr(s))return;n.WM(r).jM(s-5,s)&&(this.j8?this.g7():this.p7())},this.E7=()=>{this.So(new vt(this.zx))},this.x7=()=>{this.S9(new Qc),this.So(new Si(this.zx))},this.k7=()=>{this.m9(),this.So(new mo(this.zx))},this.D7=()=>{this.h9()},this.B7=()=>{this.So(new zr(this.ct))},this.I7=()=>{this.So(new Et(this.zx))},this.C7=()=>{this.So(new ke)},this.F7=()=>{this.Pz||this.r5||this.U9?this.U9=!1:this.So(new Yr(this.zx))},this.U7=()=>{this.L9(this.zx),this.U9=!1},this.P7=()=>{const t=this.zx,i=this.xP,e=this.e9.AP<Lr.XL&&!this.Qx,s=void 0!==this.D9,n=s&&this.D9!==t;this.a7(),(i||!s||n&&!e)&&this.F9()},this.R7=()=>{this.aJ()},this.L7=()=>{if(null!==this.pT.error){const i=this.pT.error;var t;this.Qq(new mu(null!=(t=i.code)?t:Mi.DECODE,i.message||"Error decoding media",void 0,i.msExtendedCode))}},this.O7=()=>{this.w7&&(this.T7(),this.y7=!0)},this.itt=t=>{if(zd.Lg(this.s9),this.s9=0,t.readyState<=Lr.GL)if(this.Pz||this.r5){const i=zd.Mg()-this.P9;if(i<250)return void(this.s9=zd.Og(()=>this.itt(t),250-i))}else if(void 0!==this.aq&&this.aq.JZ(this.zx))return void(this.s9=zd.Og(()=>this.itt(t),250));this.Z7!==t.readyState&&(this.Z7=t.readyState,this.So(t))},this.N7=()=>{this.n9()},this.M7=()=>{this.MP>0&&this.DP>0&&this.So(new Vs)},this.V7=t=>{this.So(new Sp(t.initDataType,t.initData||new ArrayBuffer(0)))},this.H7=()=>{this.So(new Tp)},this.z7=t=>{const i=t.initData,e=i?nr(i).buffer:new ArrayBuffer(0);this.So(new Sp(Ng,e))},this.W7=t=>{const i=t.initData;if(i){const t=function(t){try{const i=dh(t),e=new oi,s=kt(i,e,ti(i,e,!0));return Gc(im(s,!0))}catch(t){return}}(i);if(!t)return;this.So(new Sp(Mg,t.buffer))}else this.So(new Sp(Mg,new ArrayBuffer(0)))},this.q7=t=>{const i=t.initData,e=i?nr(i).buffer:new ArrayBuffer(0);this.So(new Sp(Ng,e))},this._9=()=>{this.m9()},this.g9=t=>{this.S9(t)},this.ett=t=>{this.So(t),t.type===d.Ew&&this.Qq(ar(t.errorObject))},this.pT=t,this.hw=i,this.sc=e,this.Oz=s,this.GJ=n,this.e9=new DL(this),this.e9.wn(Jr.AI,this.itt),this.e9.H8(new Ou(this)),this.p9=new aM(this),this.p9.wn(Jr.PM,this.k7),this.DZ=new CL(this),this.DZ.wn(Su,this.ett),this.Gl=new bc,this.t7=new bc,this.Y9=new Tu([this.Gl,this.t7]),this.J9=new gL(this),this.b7(),this.Hq()}};var qL=.01;function zL(t,i,e){if(void 0===e&&(e=0),!i.V)return 0;let s=i.LM(t);const n=qL*e;return s===i.Tn(0)?s+=n:s===i.An(i.V-1)&&(s-=n),s}function GL(t,i){for(const e of t.NI)if(e.AO===i)return e}function XL(t){return!!t.cues&&t.cues.length>0}r();var jL={sZ:void 0,nZ:void 0,rZ:void 0,hZ:void 0,oZ:void 0,aZ:void 0,uZ:void 0,cZ:void 0,dZ:void 0,lZ:void 0},QL=class extends Ne{get Ca(){return this.hu||(this.hu=EN(this)),this.hu}get sZ(){}get nZ(){}get rZ(){}get hZ(){}get oZ(){}get aZ(){}get stt(){}get uZ(){}get cZ(){}get dZ(){}get lZ(){}constructor(...t){super(...t),this.hu=void 0}},KL=class extends WL{zP(){}get DP(){return 0}get MP(){return 0}constructor(t,i,e,s){super(t,i,e,new QL,s)}};r(),r();var ma=class{get xe(){return this.ntt}we(){this.ntt.style.display="none"}be(){this.ntt.style.display="block"}Y7(t){t.appendChild(this.ntt)}kn(){Ao(this.ntt)}constructor(t=5){this.ntt=void 0;const i=s.document.createElement("div");i.className="theoplayer-texttracks",i.style.position="absolute",i.style.display="none",i.style.overflow="hidden",i.style.pointerEvents="none",i.style.left="0",i.style.right="0",i.style.top="0",i.style.bottom="0",i.style.width="100%",i.style.height="100%",i.style.lineHeight="1.3em",i.style.zIndex=""+t,this.ntt=i,this.be()}};function YL(t,i){return Y({},i,ES(function(t){return{sZ:t.sZ,nZ:t.nZ,rZ:t.rZ,hZ:t.hZ,oZ:t.oZ,aZ:t.aZ,uZ:t.uZ,cZ:t.cZ,dZ:t.dZ,lZ:t.lZ}}(t)))}function JL(t){return t.rZ&&Rc(t.rZ,"%")?Number(t.rZ.replace("%",""))/100:t.rZ&&Rc(t.rZ,"em")?Number(t.rZ.replace("em","")):1}r(),r(),r(),r(),r();var ZL=class t{get htt(){return this.ott+this.Ti}set htt(t){this.ott=t-this.Ti}get att(){return this.utt+this.Mi}set att(t){this.utt=t-this.Mi}ctt(t){return this.ott<t.htt&&this.htt>t.ott&&this.utt<t.att&&this.att>t.utt}pO(t){return this.ott<=t.ott&&t.htt<=this.htt&&this.utt<=t.utt&&t.att<=this.att}Fy(){return new t(this.ott,this.utt,this.Ti,this.Mi)}dtt(i){const e=this.ott+i,s=this.utt+i,n=_.max(0,this.Ti-2*i),r=_.max(0,this.Mi-2*i);return new t(e,s,n,r)}ltt(i){const e=_.min(this.ott,i.ott),s=_.max(this.htt,i.htt),n=_.min(this.utt,i.utt),r=_.max(this.att,i.att);return new t(e,n,s-e,r-n)}constructor(t,i,e,s){this.ott=void 0,this.utt=void 0,this.Ti=void 0,this.Mi=void 0,this.ott=t,this.utt=i,this.Ti=e,this.Mi=s}},$L=class{ftt(t){const i=this._tt(t);if(!i)return!1;for(const t of i)Ao(t);return this.gtt(t),!0}get Ht(){return this.WO}get hq(){return this.pT}get Wu(){return this.sc}get ptt(){return this.mtt}get wtt(){return this.ytt}GY(){this.btt(),this.WO.L.NI.forEach(t=>this.nV(t)),this.Wu.wn(Qh.yn,this.Att),this.oe(this.Wu.Eu,this.Wu.Iu)}Stt(t){this.ytt=t,this.mtt=YL(this.ytt,this.Ttt),this.mtt.sZ&&(this.hq.style.fontFamily=this.mtt.sZ),this.oe(this.Wu.Eu,this.Wu.Iu),this.ktt(!0)}Ett(){return this.mtt}xtt(t){return this.Ptt.has(t.JI)}btt(){this.WO.wn(Te.uI,this.Itt),this.WO.wn(Te.dI,this.Ctt),this.WO.wn(Te.pa,this.Rtt)}Dtt(){this.WO.mn(Te.uI,this.Itt),this.WO.mn(Te.dI,this.Ctt),this.WO.mn(Te.pa,this.Rtt)}Ntt(t){t.wn(Js.QL,this.Btt),t.wn(Js.KL,this.Mtt),t.wn(Js.xI,this.Ltt)}Ott(t){t.mn(Js.QL,this.Btt),t.mn(Js.KL,this.Mtt),t.mn(Js.xI,this.Ltt)}nV(t){this.Ntt(t),t.ro&&this.Ftt(t)}XU(t){this.Ott(t),this.Utt(t)}Vtt(){this.WO.Qk===xh.Kn?this.Htt():this.Wtt()}Htt(){if(!this.qtt)return;this.qtt=!1;const t=this.Wu.Eu,i=this.Wu.Iu;this.oe(t,i),this.ktt(!1)}Wtt(){this.qtt||(this.qtt=!0,this.ktt(!0))}Ftt(t){this.qtt||t.ro&&!this.xtt(t)&&this.ktt(!1)}Utt(t){this.xtt(t)&&this.ktt(!0)}ztt(t){(t.ro||this.xtt(t))&&this.ktt(!0)}ktt(t){const i=this.Gtt,e=this.qtt?[]:this.WO.q.NI.slice();this.Xtt(e,i,t),this.Gtt=e}_tt(t){return this.Ptt.get(t.JI)}jtt(t,i){this.Ptt.set(t.JI,i)}gtt(t){this.Ptt.delete(t.JI)}Qtt(t){const i=[],e=this.mtt;if(void 0!==e.uZ){const s=t.Fy();s.Mi=e.uZ,i.push(s)}if(void 0!==e.cZ){const s=t.Fy();s.Mi=e.cZ,s.att=t.att,i.push(s)}return i}Ktt(){return this.Gtt.slice()}kn(){Ao(this.hq),this.Ptt.clear(),this.Dtt(),this.WO.L.NI.forEach(t=>this.Ott(t)),this.Wu.mn(Qh.yn,this.Att)}constructor(t,i,e,s,n){this.Ptt=re(),this.qtt=!0,this.mtt=void 0,this.ytt=Y({},jL),this.Gtt=[],this.WO=void 0,this.pT=void 0,this.sc=void 0,this.Ttt=void 0,this.Itt=t=>this.nV(t.PO),this.Ctt=t=>this.XU(t.PO),this.Rtt=()=>this.Vtt(),this.Btt=t=>this.Ftt(t.PO),this.Mtt=t=>this.Utt(t.PO),this.Ltt=t=>this.ztt(t.PO),this.Att=t=>this.oe(t.width,t.height),this.WO=t,this.Ttt=this.mtt=n,this.pT=this.Ytt(e),this.sc=s,i.appendChild(this.pT)}};function tO(t,i,e,s,n){const r=t.Fy();let h=r,o=1,a=!1;const u=C(getComputedStyle(i).lineHeight)/4;if(!S(u)&&u>0){for(let i=0;i<e.length&&!a;i++){for(;!nO(t,s,e[i],.01)&&(!s.pO(t)||iO(t,n));)sO(t,e[i],u);if(s.pO(t)){h=t.Fy(),a=!0;break}const c=rO(t,s);o>c&&(h=t.Fy(),o=c),t=r.Fy()}s.pO(t)||(h=r.Fy())}i.style.left=(h.ott-s.ott)/s.Ti*100+"%",i.style.top=(h.utt-s.utt)/s.Mi*100+"%"}function iO(t,i){return i.some(i=>t.ctt(i))}function eO(t){return new ZL(t.left,t.top,t.width,t.height)}var T=function(t){return t[t.POS_X=0]="POS_X",t[t.NEG_X=1]="NEG_X",t[t.POS_Y=2]="POS_Y",t[t.NEG_Y=3]="NEG_Y",t}({});function sO(t,i,e){switch(i){case 0:t.ott+=e;break;case 1:t.ott-=e;break;case 2:t.utt+=e;break;case 3:t.utt-=e}}function nO(t,i,e,s){switch(e){case 0:return t.htt>i.htt+s;case 1:return t.ott<i.ott-s;case 2:return t.att>i.att+s;case 3:return t.utt<i.utt-s}}function rO(t,i){return _.max(0,_.min(t.htt,i.htt)-_.max(t.ott,i.ott))*_.max(0,_.min(t.att,i.att)-_.max(t.utt,i.utt))/(t.Ti*t.Mi)}r();var hO=function(t){return t.il='"Courier New", Courier, "Nimbus Mono L", "Cutive Mono", monospace',t.sl='"Times New Roman", Times, Georgia, Cambria, "PT Serif Caption", serif',t.nl='"Deja Vu Sans Mono", "Lucida Console", Monaco, Consolas, "PT Mono", monospace',t.rl='Arial, Helvetica, Verdana, "PT Sans Caption", sans-serif',t}({});function oO(t,i){return t?{Jtt:t.Jtt,Ztt:t.Ztt,$tt:t.$tt,Ul:i}:null}function aO(t){const i=t?t.match(/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i):null;return i?{Jtt:x(i[1],16),Ztt:x(i[2],16),$tt:x(i[3],16)}:null}function uO(t){return("0"+t.toString(16)).slice(-2)}function cO(t){return"#"+uO(t.Jtt)+uO(t.Ztt)+uO(t.$tt)}function dO(t){const i=t?t.match(/^rgba\(([0-9]+),\s*([0-9]+),\s*([0-9]+),\s*([0-9.]+)\)$/i):null;return i?{Jtt:x(i[1],10),Ztt:x(i[2],10),$tt:x(i[3],10),Ul:C(i[4])}:null}function lO(t,i){return function(t){return t?"rgba("+t.Jtt+", "+t.Ztt+", "+t.$tt+", "+t.Ul+")":void 0}(oO(aO(t),i/100))}var xt=function(t){return t.BLACK="#000000",t.WHITE="#FFFFFF",t.GREEN="#00ff00",t.BLUE="#0000ff",t.CYAN="#00ffff",t.RED="#ff0000",t.YELLOW="#ffff00",t.MAGENTA="#ff00ff",t.TRANSPARENT="transparent",t}({});function fO(t){return _O[t||"none"]}var vO,_O={none:"",dropshadow:"#222 2px 2px 3px, #222 2px 2px 4px, #222 2px 2px 5px",raised:"#222 1px 1px, #222 2px 2px, #222 3px 3px",depressed:"#ccc 1px 1px, #ccc 0px 1px, #222 -1px -1px, #222 0px -1px",uniform:"#222 -1px -1px 0, #222 1px -1px 0, #222 -1px 1px 0, #222 1px 1px 0"},gO="monospace, sans-serif",pO="Arial, Helvetica, sans-serif",mO='"Times New Roman", Times, serif',wO=Eg({monospace:"monospace",sansSerif:pO,serif:mO,monospaceSansSerif:gO,monospaceSerif:"monospace, serif",proportionalSansSerif:pO,proportionalSerif:mO,default:gO}),yO="1.3em",bO=class extends $L{Ytt(t){const i=h.createElement("div");i.className="theoplayer-ttml-texttrack-"+t;const e=i.style;return e.position="absolute",Nl(e,"flex"),e.flexDirection=e.webkitFlexDirection="column",e.overflow="hidden",e.pointerEvents="none",e.top="0",e.left="0",e.width="100%",e.height="100%",e.fontSize="16px",e.lineHeight=yO,i}oe(t,i){const e=16*_.min(t/640,i/360)*JL(this.ptt);this.hq.style.fontSize=e+"px"}Xtt(t,i,e){for(const t of i)!e&&t.ro||this.ftt(t);const s=[],n=eO(this.hq.getBoundingClientRect());s.push(...this.Qtt(n));for(const i of t){const t=this.tit(i,s,n);for(const i of t)s.push(i.dtt(.1))}}tit(t,i,e){let s=this._tt(t);s||(s=this.iit(t),this.jtt(t,s));for(const t of s)this.hq.appendChild(t);const n=[],r=[T.POS_Y,T.NEG_Y,T.POS_X,T.NEG_X];for(const t of s){tO(BO(t),t,r,e,i),n.push(BO(t))}return n}iit(t){const i=[],e=t.NU,s=t.xU,n=t.LU,r=t.U,o=t.RU,a=o?_.min(640/o.width,360/o.height):1,u=this.ptt;if(0===w.keys(s).length){const t=h.createElement("div");DO(t),AO(r,e,n,t,t,a,u),SO(t,"body",u),t.firstChild&&i.push(t)}else for(const t of w.keys(s)){const o=h.createElement("div");o.id=t,DO(o),EO(o,"region",s[t],e,a),AO(r,e,n,o,o,a,u),SO(o,"body",u),o.firstChild&&i.push(o)}return i}Stt(t){return IN(this.hq,t),super.Stt(t)}constructor(t,i,e,s){super(t,i,e,s,jL)}};function AO(t,i,e,s,n,r,o){if(JA(t)&&function(t){const i=t.WE.toUpperCase();return"SPAN"===i||"P"===i||"BR"===i||"DIV"===i||"BODY"===i}(t)){const a=TO(t);if(!a||(null==n?void 0:n.id)===a){let a;if("BODY"===t.WE.toUpperCase())a=n;else{if(a=function(t){let i;switch(t.WE.toUpperCase()){case"BR":i=h.createElement("br");break;case"SPAN":i=h.createElement("span"),NO(i),kO(i,t);break;case"P":i=h.createElement("p"),function(t){NO(t);const i=t.style;i.textAlign="inherit",i.padding="0",i.margin="0"}(i),kO(i,t);break;case"DIV":i=h.createElement("div"),kO(i,t)}return i}(t),!a)return;s.appendChild(a)}!function(t,i,e,s,n){const r=i.ox("style");IO(t,i.WE,r,e,s,n),function(t,i,e,s){for(const n of i.nx)CO(t,i.WE,n.WE,n.XE,e,s)}(t,i,s,n)}(a,t,i,n,r),function(t,i,e){let s=null==i?void 0:i.ox("smpte:backgroundImage");if(s){s=s.replace("#","");const n=e&&xO(e,t=>t.nx.some(t=>"id"===t.WE&&t.XE===s));n&&PO(t,n,i,!0)}!function(t,i){const e=i.m[0];if(!e||"metadata"!==e.WE.toLowerCase())return;const s=e.m[0];PO(t,s,i)}(t,i)}(a,t,e),SO(a,t.WE,o);for(const s of t.KE)AO(s,i,e,a,n,r,o)}}else if(ZA(t)){const i=h.createTextNode(t.lk);if("SPAN"!==s.nodeName.toUpperCase()){const t=h.createElement("span");NO(t),SO(t,"span",o),t.appendChild(i),s.appendChild(t)}else s.appendChild(i)}}function SO(t,i,e){const s=t.style;switch(e.sZ&&(s.fontFamily=e.sZ),e.nZ&&(s.color=e.nZ),i.toLowerCase()){case"span":e.hZ&&(s.background=e.hZ);break;case"p":case"div":e.oZ&&(s.backgroundColor=e.oZ);break;case"body":e.aZ&&(s.textShadow=fO(e.aZ))}}function TO(t){const i=t.ox("region");if("p"===t.WE.toLowerCase())return i;const e=[];for(const i of t.m)e.push(TO(i));return Cc(e),0===e.length?i:1===e.length?null!=(s=e[0])?s:i:void 0;var s}function kO(t,i){const e=i.ux(Dx,"id");e&&(t.id=e)}function EO(t,i,e,s,n){IO(t,i,e.style,s,t,n);for(const s of w.keys(e))CO(t,i,s,e[s],t,n)}function xO(t,i){if(i(t))return t;for(const e of t.m){const t=xO(e,i);if(t)return t}return null}function PO(t,i,e,s){void 0===s&&(s=!1),s&&(t.style.width=t.style.height="100%");const n=h.createElement("img");n.src=function(t){const i=t&&t.KE.length>0?t.KE[0]:null;return i&&ZA(i)?"data:image/png;base64,"+i.lk:""}(i),n.id=t.id,n.style.height="100%",n.style.maxWidth="100%",function(t,i){const e=t.style;Nl(e,"flex"),e.flexDirection=e.webkitFlexDirection="column";const s=i.ox("smpte:backgroundImageVertical");let n="center";if(s)switch(s.toLowerCase()){case"left":n="flex-start";break;case"center":n="center";break;case"right":n="flex-end";break;case"inherit":n="inherit"}e.justifyContent=e.webkitJustifyContent=n;const r=i.ox("smpte:backgroundImageHorizontal");let h="center";if(r)switch(r.toLowerCase()){case"left":h="flex-start";break;case"center":h="center";break;case"right":h="flex-end";break;case"inherit":h="inherit"}e.alignItems=e.webkitAlignItems=h}(t,e),t.appendChild(n)}function IO(t,i,e,s,n,r){if(e)for(const h of e.split(" "))if(s[h])for(const e of w.keys(s[h]))"style"===e.toLowerCase()?IO(t,i,s[h][e],s,n,r):CO(t,i,e,s[h][e],n,r)}function CO(t,i,e,s,n,r){const h=t.style;switch(e){case"backgroundColor":h.backgroundColor=s;break;case"color":h.color=s;break;case"direction":h.direction=s;break;case"display":"none"===s&&(h.display="none");break;case"fontFamily":var o;h.fontFamily=null!=(o=wO.get(s))?o:s;break;case"fontSize":{let t=s;if(Rc(t,"px")){const i=Number(t.slice(0,-2));t=i*r/16+"em"}else Rc(t,"c")&&(t=t.replace("c","em"));h.fontSize=t,h.lineHeight&&"inherit"!==h.lineHeight||(h.lineHeight=yO);break}case"fontStyle":h.fontStyle=s;break;case"fontWeight":h.fontWeight=s;break;case"lineHeight":{let t=s;if(Rc(t,"px")){const i=Number(t.slice(0,-2));t=i*r+"px"}h.lineHeight=t;break}case"opacity":h.opacity=s;break;case"overflow":h.overflow=s;break;case"padding":h.padding=s;break;case"textAlign":h.textAlign=s;break;case"textDecoration":switch(s){case"lineThrough":h.textDecoration="line-through";break;case"underline":case"overline":h.textDecoration=s;break;case"noUnderline":case"noLineThrough":case"noOverline":h.textDecoration="none"}break;case"unicodeBidi":switch(s){case"bidiOverride":h.unicodeBidi="bidi-override";break;case"normal":case"embed":case"isolate":h.unicodeBidi=s}break;case"visibility":h.visibility=s;break;case"zIndex":h.zIndex=s;break;case"displayAlign":{let t;switch(s.toLowerCase()){case"before":t="flex-start";break;case"center":t="center";break;case"after":t="flex-end";break;case"justify":t="space-between";break;default:return}h.justifyContent=h.webkitJustifyContent=t;break}case"extent":{const e=RO(i.toLowerCase())?n:t;let r,h;const o=s.split(" ",2);2===o.length?(r=o[0],h=o[1]):r=h="100%",e&&(e.style.height=h,e.style.width=r);break}case"origin":{const e=RO(i.toLowerCase())?n:t,[r,h]=s.split(" ",2);e&&(r||h)&&(r&&(e.style.left=r),h&&(e.style.top=h));break}case"showBackground":case"textOutline":break;case"wrapOption":switch(s){case"wrap":h.whiteSpace="normal";break;case"noWrap":h.whiteSpace="nowrap"}break;case"writingMode":{let t,i,e,n;switch(s){case"lrtb":case"lr":t="horizontal-tb";break;case"rltb":t="horizontal-tb",i="rtl",n="bidi-override";break;case"tbrl":case"tb":t="vertical-rl",e="upright";break;case"tblr":t="vertical-lr",e="upright";break;case"rl":t="horizontal-tb",i="rtl";break;default:return}h.writingMode=t,h.setProperty("-webkit-writing-mode",t),i&&(h.direction=i),e&&(h.textOrientation=e,h.setProperty("-webkit-text-orientation",e)),n&&(h.unicodeBidi=n);break}case"linePadding":if(Rc(s,"c")){const t=s.replace("c","em");h.paddingLeft=h.paddingRight=t}break;case"multiRowAlign":"auto"===s.toLowerCase()?h.textAlign="":h.textAlign=s}}function RO(t){return"div"===t||"p"===t||"span"===t}function DO(t){const i=t.style;Nl(i,"flex"),i.flexDirection=i.webkitFlexDirection="column",i.top="auto",i.left="5%",i.width="90%",i.height="100%",i.maxHeight="100%",i.maxWidth="100%",i.overflow="visible",i.position="absolute",i.fontFamily=pO,i.color=xt.WHITE,i.background=xt.TRANSPARENT,i.textShadow=fO("uniform"),i.textAlign="start",i.writingMode="horizontal-tb",i.setProperty("-webkit-writing-mode","horizontal-tb"),i.padding="0",i.margin="0",i.fontSize="inherit",i.lineHeight="inherit"}function NO(t){const i=t.style;i.fontFamily="inherit",i.color="inherit",i.fontSize="inherit",i.lineHeight="inherit",i.textShadow="inherit"}function BO(t){let i=eO(t.getBoundingClientRect());if("visible"===getComputedStyle(t).overflow&&t.scrollHeight>t.clientHeight){const e=t.children;for(let t=0;t<e.length;t++){const s=e[t];i=i.ltt(eO(s.getBoundingClientRect()))}}return i}function MO(t){return vO||(vO=s.document.createElement("textarea")),vO.innerHTML=t,vO.value}function LO(t,i){let e="Data",s="";const n=[];let r=t.charAt(i.ac),h="";const o={Km:"starttag",$E:"",eit:[]};for(;i.ac<t.length+1;){switch(r=i.ac<t.length?t.charAt(i.ac):"EOF",e){case"Data":switch(r){case"&":const n=t.substring(i.ac).match(/&#?[0-9a-zA-Z]+;/);n?(s+=MO(n[0]),i.Ly(n[0].length-1)):s+="&";break;case"<":if(s)return{Km:"string",U:s};e="Tag";break;case"EOF":return{Km:"string",U:s};default:s+=r}break;case"Tag":switch(r){case"\t":case"\n":case"\f":case" ":e="StartTagAnnotation";break;case".":e="StartTagClass";break;case"/":e="EndTag";break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":s=r,e="TimestampTag";break;case">":return i.Ly(1),o;case"EOF":return o;default:s=r,e="StartTag"}break;case"StartTag":switch(r){case"\t":case"\f":case" ":e="StartTagAnnotation";break;case"\n":h=r,e="StartTagAnnotation";break;case".":e="StartTagClass";break;case">":return i.Ly(1),{Km:"starttag",$E:s,eit:[]};case"EOF":return{Km:"starttag",$E:s,eit:[]};default:s+=r}break;case"StartTagClass":switch(r){case"\t":case"\f":case" ":n.push(h),h="",e="StartTagAnnotation";break;case"\n":n.push(h),h=r,e="StartTagAnnotation";break;case".":n.push(h),h="";break;case">":return i.Ly(1),n.push(h),{Km:"starttag",$E:s,eit:n};case"EOF":return n.push(h),{Km:"starttag",$E:s,eit:n};default:h+=r}break;case"StartTagAnnotation":switch(r){case"&":e="CharRefInAnnotation";break;case">":i.Ly(1);let t=h.trim();return t=t.replace(/\s/," "),{Km:"starttag",$E:s,eit:n,sit:t};default:h+=r}break;case"CharRefInAnnotation":let a="";for(let e=i.ac;">"===t.charAt(e);e++)a+=t.charAt(e);h+=a||"&",e="StartTagAnnotation";break;case"EndTag":switch(r){case">":return i.Ly(1),{Km:"endtag",$E:s};case"EOF":return{Km:"endtag",$E:s};default:s+=r}break;case"TimestampTag":switch(r){case">":return i.Ly(1),{Km:"timestamp",nit:s};case"EOF":return{Km:"timestamp",nit:s};default:s+=r}}i.Ly(1)}return o}r(),r();var OO=function(t){return t.rit="string",t.hit="starttag",t.oit="endtag",t.ait="timestamp",t}({});function FO(t){let i;if(t.getBoundingClientRect&&t.parentNode&&(i=t.getBoundingClientRect()),!i)return{left:0,top:0};const e=h.documentElement,n=h.body,r=e.clientLeft||n.clientLeft||0,o=s.pageXOffset||n.scrollLeft,a=i.left+o-r,u=e.clientTop||n.clientTop||0,c=s.pageYOffset||n.scrollTop,d=i.top+c-u;return{left:_.round(a),top:_.round(d)}}function UO(t,i,e,s){if(void 0===s&&(s=0),!t||!i)return;t.style.left="0px";const n=t.getClientRects(),r=i.getClientRects();if(0===n.length||0===r.length)return;const h=n[0],o=r[0],a=h.width/2+h.left;VO(t,o.width/2+o.left-a,e,s)}function VO(t,i,e,s){void 0===s&&(s=0),WO(t,i,"left","right",e,s)}function HO(t,i,e,s){void 0===s&&(s=0),WO(t,i,"top","bottom",e,s)}function WO(t,i,e,s,n,r){void 0===r&&(r=0);const h=t.getClientRects();if(n&&h.length>0){const t=h[0];i=No(i,n[e]+r-t[e],n[s]-r-t[s])}t.style[e]=i+"px"}function Nr(t,i){void 0===t.textContent?t.innerText=i:t.textContent=i}r();var qO={nZ:xt.WHITE,sZ:"sans-serif",rZ:"100%",hZ:"rgba(0,0,0,0.8)",oZ:xt.TRANSPARENT,aZ:"none",uZ:void 0,cZ:void 0,dZ:void 0,lZ:void 0},zO="theoplayer-webvtt-region-",GO="theoplayer-webvtt-styling-",XO="theoplayer-webvtt-default-style",jO=5.23,QO=class extends $L{Ytt(t){const i=h.createElement("div");i.className="theoplayer-webvtt-texttrack-"+t,Go(i),i.style.overflow="hidden",i.style.pointerEvents="none";const e=this.ptt.sZ;return e&&(i.style.fontFamily=e),i.style.whiteSpace="pre-line",i}GY(){this.hq.appendChild(this.uit),super.GY()}oe(t,i){const e=_.min(t/100,i/100),s=JL(this.ptt);this.cit.forEach(t=>{let{OO:i,dit:n}=t;this.fit(n,e,s,i)}),this.fit(this.uit,e,s)}Stt(t){IN(this.hq,t),super.Stt(t)}Xtt(t,i,e){const s=this.hq,n=this.Wu.Iu/100,r=[];for(const i of t)void 0!==i.OO&&(Ct(r,i.OO)||r.push(i.OO));this.cit.forEach((t,i)=>{let{OO:s,dit:n}=t;!e&&Ct(r,s)||(Ao(n),this.cit.delete(i))});for(const t of i)!e&&t.ro||this.ftt(t);const h=[],o=eO(this.uit.getBoundingClientRect());h.push(...this.Qtt(o));for(const t of r){let i;this.cit.has(t.o)?i=this.cit.get(t.o).dit:(i=iF(t,n),s.appendChild(i),this.cit.set(t.o,{OO:t,dit:i})),h.push(eO(i.getBoundingClientRect()))}t.sort(rF);for(const i of t){const t=this.tit(i,h,o);void 0!==t&&h.push(t.dtt(.1))}}tit(t,i,e){var s;let n;t.OO?(n=this.cit.get(t.OO.o).dit,"up"===t.OO.iF&&n.children.length>=1&&(n.style.transitionProperty="top",n.style.transitionDuration="0.433s")):n=this.uit;let r=null==(s=this._tt(t))?void 0:s[0];if(r||(r=this.vit(t),this.jtt(t,[r])),n.appendChild(r),t.OO||(KO(r,t),t.FO?function(t,i,e,s){const n=eF(t),r=n?e.Mi:e.Ti;let h=C(getComputedStyle(i).lineHeight);if(0===h||S(h))return;const o=eO(i.getBoundingClientRect());let a=_.round(PE(t));"rl"===t.Pt&&(a=-(a+1));let u=h*a;"rl"===t.Pt&&(u=u-o.Ti+h);a<0&&(u+=r,h=-h);n?o.utt+=u:o.ott+=u;const c=o.Fy();let d=!1;for(;!e.pO(o)||iO(o,s);)if(n)if(h<0&&o.utt<e.utt||h>0&&o.att>e.att){if(o.utt=c.utt,d)break;h=-h,d=!0}else o.utt+=h;else if(h<0&&o.ott<e.ott||h>0&&o.htt>e.htt){if(o.ott=c.ott,d)break;h=-h,d=!0}else o.ott+=h;n?i.style.top=(o.utt-e.utt)/e.Mi*100+"%":i.style.left=(o.ott-e.ott)/e.Ti*100+"%"}(t,r,e,i):function(t,i,e,s){const n=eO(i.getBoundingClientRect());if(0===n.Ti||0===n.Mi)return;eF(t)?"center"===t.MO?n.utt-=n.Mi/2:"end"===t.MO&&(n.utt-=n.Mi):"center"===t.MO?n.ott-=n.Ti/2:"end"===t.MO&&(n.ott-=n.Ti);let r;r=""===t.Pt?[T.POS_Y,T.NEG_Y,T.POS_X,T.NEG_X]:"lr"===t.Pt?[T.POS_X,T.NEG_X,T.POS_Y,T.NEG_Y]:[T.NEG_X,T.POS_X,T.POS_Y,T.NEG_Y];tO(n,i,r,e,s)}(t,r,e,i)),!t.OO)return eO(r.getBoundingClientRect())}vit(t){const i=new oi,e=t.U,s=this._it(t),n={git:void 0,xe:s};let r=n,o="",a="";const u=[n],c=[],d=[];for(;i.ac<e.length;){const t=LO(e,i);if(t.Km===OO.rit){const i=h.createElement("span");Nr(i,t.U),YO(i,u),""!==o&&(i.lang=o),this.pit(i,a),r.xe.appendChild(i)}else if(t.Km===OO.hit){const i=t.$E.toLowerCase();switch(i){case"i":case"b":case"u":case"ruby":{const e=h.createElement(i);r.xe.appendChild(e),r={git:t,xe:e},u.push(r);break}case"rt":var l;if("ruby"===(null==(l=r.git)?void 0:l.$E.toLowerCase())){const i=h.createElement("rt");r.xe.appendChild(i),r={git:t,xe:i},u.push(r)}break;case"c":case"v":r={git:t,xe:r.xe},u.push(r);break;case"font":{var f;const i=null==(f=t.sit)?void 0:f.match(/(?:^| )color=["']([^"']+)/i);i&&(a=i[1],d.push(a),r={git:t,xe:r.xe},u.push(r));break}case"lang":var v;o=null!=(v=t.sit)?v:"",c.push(o)}}else if(t.Km===OO.oit){var _;const i=t.$E.toLowerCase(),e=null==(_=r.git)?void 0:_.$E.toLowerCase();e===i?(u.pop(),r=u[u.length-1],"font"===i&&(d.pop(),a=d.length>0?d[d.length-1]:"")):"rt"===e&&"ruby"===i?(u.pop(),u.pop(),r=u[u.length-1]):"lang"===i&&(c.pop(),o=c.length>0?c[c.length-1]:"")}else if(t.Km===OO.ait){const i=t.nit,e=new oi;try{Ku(i,e)}catch(t){Tv("ERROR collecting timestamp",t)}}}return s}pit(t,i){const e=this.ptt,s=this.wtt;e.hZ&&(t.style.background=e.hZ);const n=s.nZ||i||e.nZ;n&&(t.style.color=n)}fit(t,i,e,s){if(s){const n=JO(s,i);t.style.height=n*e+"px",t.style.left=ZO(s)+"%",t.style.top=$O(s,i)+"px"}t.style.fontSize=jO*i*e+"px"}_it(t){const i=h.createElement("div");i.style.position="absolute",i.style.margin="0",i.style.padding="0",i.style.unicodeBidi="plaintext",i.style.wordWrap="break-word",i.style.overflowWrap="break-word",i.style.width="auto",i.style.textAlign=t.DO,function(t,i){"rl"===i.Pt?t.style.writingMode="vertical-rl":"lr"===i.Pt?t.style.writingMode="vertical-lr":t.style.writingMode="horizontal-tb"}(i,t),function(t,i){const e=RE(i);eF(i)?(t.style.width=e+"%",t.style.height="auto"):(t.style.height=e+"%",t.style.width="auto")}(i,t),KO(i,t);const e=this.ptt.oZ;e&&(i.style.background=e);const s=this.ptt.nZ;return s&&(i.style.color=s),i.style.textShadow=fO(this.ptt.aZ),i}constructor(t,i,e,s){super(t,i,e,s,qO),this.cit=Ba(),this.uit=tF(3),function(t){const i=function(t){const i=null==t.getRootNode?void 0:t.getRootNode.call(t);if(i&&i.host)return i}(t);var e;const s=null!=(e=null!=i?i:t.ownerDocument)?e:h;if(s.getElementById(XO))return;const n=[];for(const[t,i]of sF)n.push("."+GO+t+" { color: "+i+" !important; }"),n.push("."+GO+"bg"+nF+t+" { background-color: "+i+" !important; }"),n.push("video::cue(."+t+") { color: "+i+"; }"),n.push("video::cue(.bg"+nF+t+") { background-color: "+i+"; }");const r=h.createElement("style");r.id=XO,r.innerHTML=n.join("\n"),i?i.appendChild(r):s.body.appendChild(r)}(i)}};function KO(t,i){let e,s;const n=CE(i),r=IE(i),h=RE(i);if(eF(i)){switch(n){case"line-left":e=r;break;case"center":e=r-h/2;break;case"line-right":e=r-h}s=i.FO?0:PE(i)}else{switch(n){case"line-left":s=r;break;case"center":s=r-h/2;break;case"line-right":s=r-h}e=i.FO?0:PE(i)}t.style.left=e+"%",t.style.top=s+"%"}function YO(t,i){for(const e of i)if(e.git){for(const i of e.git.eit)Pl(t,GO+i);"v"===e.git.$E.toLowerCase()&&e.git.sit&&Pl(t,"theoplayer-webvtt-voice-"+e.git.sit)}}function JO(t,i){return t.ZO*(jO*i)*1.14}function ZO(t){return t.eF-t.$O*t.Ti/100}function $O(t,i){const e=t.sF,s=t.tF*JO(t,i)/100;return _.max(0,e-s)}function tF(t){const i=h.createElement("div");return i.className=zO+"default",Go(i),i.style.wordWrap="break-word",i.style.writingMode="horizontal-tb",i.style.pointerEvents="none",i.style.width="auto",i.style.height="auto",i.style.maxHeight="100%",i.style.minHeight="0px",i.style.padding="0",i.style.boxSizing="border-box",i.style.fontSize=jO*t+"px",i.style.lineHeight="1.14em",i}function iF(t,i){const e=tF(i);e.className=zO+t.o;const s=t.Ti,n=JO(t,i);return e.style.width=s+"%",e.style.height=n+"px",e.style.left=ZO(t)+"%",e.style.right="",e.style.top=$O(t,i)+"px",e.style.bottom="",e.style.boxSizing="border-box",e}function eF(t){return""===t.Pt}var sF=[["white","#fff"],["lime","#0f0"],["cyan","#0ff"],["red","#f00"],["yellow","#ff0"],["magenta","#f0f"],["blue","#00f"],["black","#000"]],nF=String.fromCharCode(95);function rF(t,i){const e=PE(t),s=PE(i),n=hF(e,t.FO),r=hF(s,i.FO);return n&&r?e-s||fi(i,t)||i.JI-t.JI:fi(t,i)||t.JI-i.JI}function hF(t,i){return i?t<0?t>-8:t>8:t>50}r(),r(),r();var oF=function(t){return t.FONT_REGULAR="regular",t.FONT_UNDERLINE="underline",t.FONT_ITALICS="italics",t.FONT_UNDERLINE_ITALICS="underline-italics",t}({}),aF={nZ:xt.WHITE,sZ:hO.nl,rZ:"100%",hZ:xt.BLACK,oZ:"transparent",aZ:"none",mit:"regular",uZ:void 0,cZ:void 0,dZ:void 0,lZ:void 0},uF=[{wit:xt.WHITE,mit:"regular",yit:0},{wit:xt.WHITE,mit:"underline",yit:0},{wit:xt.GREEN,mit:"regular",yit:0},{wit:xt.GREEN,mit:"underline",yit:0},{wit:xt.BLUE,mit:"regular",yit:0},{wit:xt.BLUE,mit:"underline",yit:0},{wit:xt.CYAN,mit:"regular",yit:0},{wit:xt.CYAN,mit:"underline",yit:0},{wit:xt.RED,mit:"regular",yit:0},{wit:xt.RED,mit:"underline",yit:0},{wit:xt.YELLOW,mit:"regular",yit:0},{wit:xt.YELLOW,mit:"underline",yit:0},{wit:xt.MAGENTA,mit:"regular",yit:0},{wit:xt.MAGENTA,mit:"underline",yit:0},{wit:xt.WHITE,mit:"italics",yit:0},{wit:xt.WHITE,mit:"underline-italics",yit:0},{wit:xt.WHITE,mit:"regular",yit:0},{wit:xt.WHITE,mit:"underline",yit:0},{wit:xt.WHITE,mit:"regular",yit:4},{wit:xt.WHITE,mit:"underline",yit:4},{wit:xt.WHITE,mit:"regular",yit:8},{wit:xt.WHITE,mit:"underline",yit:8},{wit:xt.WHITE,mit:"regular",yit:12},{wit:xt.WHITE,mit:"underline",yit:12},{wit:xt.WHITE,mit:"regular",yit:16},{wit:xt.WHITE,mit:"underline",yit:16},{wit:xt.WHITE,mit:"regular",yit:20},{wit:xt.WHITE,mit:"underline",yit:20},{wit:xt.WHITE,mit:"regular",yit:24},{wit:xt.WHITE,mit:"underline",yit:24},{wit:xt.WHITE,mit:"regular",yit:28},{wit:xt.WHITE,mit:"underline",yit:28}],cF=[11,-1,1,2,3,4,12,13,14,15,5,6,7,8,9,10];function dF(t,i){return WE(t.Ait,i.Ait)||xc(t.zB,i.zB)}r();var uo=32,lF=/CC([1-4])=(.*)/;function fF(t){if(!t)return[];const i=[],e=t.trim().split(";");if(e.every(t=>t.match(lF)))for(const t of e){const[,e,s]=t.match(lF);i.push({Sit:Number(e),Tit:s})}else for(let t=0;t<e.length;t++)i.push({Sit:t+1,Tit:e[t]});return i}var vF=class t{get kit(){return this.xit.Eit}get Pit(){return this.xit.Iit}get Cit(){return this.xit.Iit.yit-this.xit.Eit.yit+1}get Rit(){return this.xit.Iit.Dit-this.xit.Eit.Dit+1}wr(){return this.Nit=this.Bit(),this.Mit(),this.Lit(),this.Nit}Bit(){const t=h.createElement("div");t.style.position="absolute",t.style.margin="0",t.style.padding="0",t.style.whiteSpace="pre",t.style.width=this.Cit/uo*this.Fit.Oit*100+"%",t.style.height=1.2*this.Rit+"em",t.style.lineHeight="1.2em",t.style.letterSpacing=this.Fit.Uit?"calc(1em - 1ch)":"";const i=this.mtt.sZ;i&&(t.style.fontFamily=i);const e=this.mtt.oZ;return e&&(t.style.backgroundColor=e),t}Mit(){if(!this.Nit)return;const t=this.kit.Dit/15*100;let i=this.kit.yit/uo*100,e=(uo-this.Pit.yit-1)/uo*100;const s=(15-this.Pit.Dit-1)/15*100;this.Fit.Vit||(i=e=1,this.Nit.style.width="98%"),s<t?this.Nit.style.bottom=s*this.Fit.Oit+"%":this.Nit.style.top=t*this.Fit.Oit+"%",e<i?this.Nit.style.right=e+"%":this.Nit.style.left=i+"%"}Lit(){const t=this.xit.Hit.sort(_F);for(let i=0;i<t.length;i++)this.Wit(t[i-1],t[i]),this.qit(t[i]);this.Wit(t[t.length-1],void 0)}qit(i){var e;const s=YL(this.mtt,i.zit),n=t.Git(s);Nr(n,i.Xit),null==(e=this.Nit)||e.appendChild(n)}static Git(t){const i=h.createElement("span");i.style.display="inline-block",t.mit!==oF.FONT_ITALICS&&t.mit!==oF.FONT_UNDERLINE_ITALICS||(i.style.fontStyle="italic"),t.mit!==oF.FONT_UNDERLINE&&t.mit!==oF.FONT_UNDERLINE_ITALICS||(i.style.textDecoration="underline");const e=t.nZ;e&&(i.style.color=e);const s=t.hZ;return s&&(i.style.backgroundColor=s),i.style.textShadow=fO(t.aZ),i.style.height="1.2em",i}Wit(t,i){const e=t?t.Iit.Dit:this.xit.Eit.Dit,s=i?i.Eit.Dit:this.xit.Iit.Dit;let n=t?t.Iit.yit:this.xit.Eit.yit;const r=i?i.Eit.yit:this.xit.Iit.yit;e<s&&(!i||t&&t.Eit.Dit!==i.Eit.Dit?this.jit():this.Qit(this.xit.Iit.yit-n),n=this.xit.Eit.yit),n<r&&(i?this.Qit(r-n):this.jit())}jit(){var t;const i=h.createElement("br");null==(t=this.Nit)||t.appendChild(i)}Qit(t){var i;if(t<=0)return;const e=h.createElement("span");e.style.display="inline-block",Nr(e,np(" ",t)),null==(i=this.Nit)||i.appendChild(e)}constructor(t,i,e){this.xit=void 0,this.Fit=void 0,this.mtt=void 0,this.Nit=void 0,this.xit=t,this.Fit=i,this.mtt=e}};function _F(t,i){return function(t,i){if(t.Dit!==i.Dit)return t.Dit-i.Dit;return t.yit-i.yit}(t.Eit,i.Eit)}var gF=class extends $L{Ytt(t){const i=h.createElement("div");return i.className="theoplayer-cea608-texttrack-"+t,i.style.position="absolute",i.style.overflow="hidden",i.style.pointerEvents="none",i.style.top="10%",i.style.bottom="10%",this.ptt.sZ&&(i.style.fontFamily=this.ptt.sZ),i}oe(t,i){this.Ml()}Ml(){const t=JL(this.ptt);this.Kit=function(t){return{Oit:t/100,Uit:t<=100,Vit:t<=150}}(100*t);const i=this.Yit/uo;this.Jit=i*t,this.hq.style.fontSize=this.Jit+"px"}get Yit(){let t=this.hq.offsetWidth;return this.Kit&&this.Kit.Vit||(t*=.8),t}Xtt(t,i,e){for(const t of i)!e&&t.ro||this.ftt(t);for(const i of t)this.tit(i)}tit(t){this.Kit&&this.Kit.Vit?this.Zit(80):this.Zit(100),this.Ml();let i=this._tt(t);i||(i=this.iit(t),this.jtt(t,i));for(const t of i)this.hq.appendChild(t)}iit(t){return t.U.map(t=>new vF(t,this.Kit,this.ptt).wr())}Zit(t){const i=(100-t)/2;this.hq.style.left=i+"%",this.hq.style.width=t+"%"}constructor(t,i,e,s){super(t,i,e,s,aF),this.Jit=void 0,this.Kit=void 0}},_a=class t{$it(t){for(const i of this.tet)if(i.Ht===t)return i}static iet(t){switch(t.Km){case nh.TTML:case nh.SRT:case nh.WEBVTT:case nh.CEA608:return!0}return!1}eet(t){switch(t.Km){case nh.TTML:return new bO(t,this.net,t.Th,this.sc);case nh.SRT:case nh.WEBVTT:return new QO(t,this.net,t.Th,this.sc);case nh.CEA608:return new gF(t,this.net,t.Th,this.sc)}}ret(t){let i=this.$it(t);i||(i=this.eet(t),i&&(i.GY(),i.Stt(this.Oz),this.tet.push(i),t.Qk===xh.Kn&&i.Htt()))}het(t){const i=this.tet;for(let e=i.length-1;e>=0;e-=1){const s=i[e];s.Ht===t&&(s.kn(),Ra(i,e))}}oet(i){eP(i.Lt)&&t.iet(i)&&(i.AP===dc.ERROR?this.het(i):this.ret(i))}get d6(){return this.aet.ds||this.ea.YL}hr(){for(const t of this.tet)t.Ht.mn(Te.AI,this.uet),t.Ht.mn(Te.kI,this.uet),t.kn();Wt(this.tet)}kn(){this.hr();for(const t of this.tet)t.kn();this.Gl.mn(N.rI,this.cet),this.Gl.mn(N.oI,this.det),this.Gl.mn(Te.pa,this.uet),this.aet.mn(Bs.pa,this.let),this.ea.mn([na.QL,na.KL],this.let),this.Oz.mn("bI",this.fet)}constructor(t,i,e,s,n,r){this.net=void 0,this.sc=void 0,this.Gl=void 0,this.aet=void 0,this.ea=void 0,this.tet=[],this.Oz=void 0,this.cet=t=>{const i=t.Ht;i.wn(Te.AI,this.uet),i.wn(Te.kI,this.uet),i instanceof dL&&(i.d6=this.d6),this.oet(i)},this.uet=t=>{const i=t.Ht;this.oet(i)},this.det=t=>{const i=t.Ht;i.mn(Te.AI,this.uet),i.mn(Te.kI,this.uet),this.het(i)},this.let=()=>{const t=this.d6;for(const i of this.Gl.NI)i instanceof dL&&(i.d6=t)},this.fet=()=>{for(const t of this.tet)t.Stt(this.Oz)},this.net=t,this.sc=i,this.Gl=e,this.aet=n,this.ea=r,this.Oz=s,this.Gl.wn(N.rI,this.cet),this.Gl.wn(N.oI,this.det),this.Gl.wn(Te.pa,this.uet),this.aet.wn(Bs.pa,this.let),this.ea.wn([na.QL,na.KL],this.let),this.Oz.wn("bI",this.fet),this.let()}};r();var pF=class extends Ne{get JL(){var t;return null!=(t=this.vet.ownerDocument.pictureInPictureEnabled)&&t}get YL(){return this._et}async yo(){if(this.JL){if(!this.YL){const t=this.ww([na.QL,na.ma]);await this.vet.requestPictureInPicture(),await t,this._et||this.So(new yC)}}else this.So(new yC)}async jo(){if(this.JL){if(this._et){const t=this.ww([na.KL,na.ma]);await this.vet.ownerDocument.exitPictureInPicture(),await t,this._et&&this.So(new yC)}}else this.So(new yC)}kn(){this.Vo(),this.vet.removeEventListener("enterpictureinpicture",this.pet),this.vet.removeEventListener("leavepictureinpicture",this.met)}constructor(t){super(),this.vet=void 0,this._et=!1,this.pet=()=>{this._et=!0,this.So(new Wk)},this.met=()=>{this._et=!1,this.So(new qk)},this.vet=t,this.vet.addEventListener("enterpictureinpicture",this.pet),this.vet.addEventListener("leavepictureinpicture",this.met)}};function mF(t){const i=new ED,e=function(t){const i=[];return TD.la(t)&&i.push(new TD(t)),kD.la(t)&&i.push(new kD(t)),i}(t);if(e.length>0){for(const t of e)i.EK(t);i.kK(e[0])}return i}var wF=class extends WL{get hq(){return this.pT}get DP(){return this.pT.videoHeight}get MP(){return this.pT.videoWidth}get Ma(){return this.wet}get Sq(){return this.yet}zP(){return this.pT}async zg(){this.yet.kn(),this.wet.kn(),this.bet.kn(),this.Aet.kn(),await super.zg()}we(){super.we(),this.bet.we()}be(){super.be(),this.bet.be()}Y7(t){super.Y7(t),this.bet.Y7(t)}constructor(t,i,e,s,n){super(t,i,e,s,n),this.bet=void 0,this.Aet=void 0,this.wet=void 0,this.yet=void 0,this.wet=mF(t),this.yet=new pF(t),this.bet=new ma,this.Aet=new _a(this.bet.xe,this.Wu,this.nt,this.Ql,this.Ma,this.Sq)}};r(),r();r(),r();var yF=function(t){return t.Tet="HELLO",t.ket="HI_THERE",t.Eet="INITIALIZE",t.xet="APPEND_INIT",t.Pet="APPEND_DATA",t.Iet="ACK",t.Cet="REMOVE",t.Ret="DESTROY_SESSION",t}({}),bF=class{Det(t){return this.ta.Zo(async t=>{fr(t);const i=new MessageChannel,e=i.port1,s=i.port2;od.serviceWorker.controller||await KA(od.serviceWorker,"install",t),"activated"!==od.serviceWorker.controller.state&&await KA(od.serviceWorker.controller,"activate",t);const n={kind:"HELLO",port:s};od.serviceWorker.controller.postMessage(n,[s]),e.start(),this.im=e;try{const i=await KA(e,"message",t),s=i.data;if("HI_THERE"!==s.kind)throw new m("Could not set up message channel");this.yT=s.sessionId}catch(t){throw Ce(t)&&this.Net(),t}},t)}Bet(t,i){return this.im,this.ta.Zo(async()=>{if(!this.im)throw new m("MessageSession not set up yet or already closed.");i||(i=[]),this.im.postMessage(t,i);const e=await KA(this.im,"message");return e.data})}Met(){return this.ta.Zo(()=>this.Net())}Net(){if(!od.serviceWorker.controller)return;if("activated"!==od.serviceWorker.controller.state)return;if(!this.im)return;const t={kind:"DESTROY_SESSION"};this.im.postMessage(t),this.im.close(),this.im=void 0}constructor(){this.im=void 0,this.yT=void 0,this.ta=new Zn}};r();var AF=class{get Let(){return this.Oet}Fet(t,i){const e=t-i;this.Oet=e>this.Let?this.Oet:e}Uet(t){this.Oet=t}constructor(){this.Oet=1/0}};r(),r(),r();var li=function(t){return t.Bk="audio",t.Mk="video",t.zU="metadata",t}({}),SF=class extends Ne{get Fx(){return void 0===this.Vet||void 0===this.Het?Uo.rL():new Uo([this.Vet,this.Het])}get Cd(){return{GT:this.IQ}}get V3(){return St(this.IQ)?at.Bk:$y(this.IQ)?at.Mk:at.yk}get lQ(){return this.IQ}get W3(){return Uo.rL()}get VY(){return 30}set VY(t){}get zY(){return 30}set zY(t){}G3(t,i){}X3(t,i){}jZ(){return this.Wet}get ga(){return this.qet}get zet(){return this.Vet}get RO(){return this.Het}async j3(){}async f3(t,i){}async Q2(t,i,e){if(t.Km!==We.wZ)throw new m("Streaming or opaque segments are not supported yet.");const s=t.lk,n=async()=>{const t=s.buffer,e={kind:yF.Pet,mediaType:TF(this.IQ),segment:s,startPts:i.Get,totalDuration:i.ct};if(await this.Xet.Bet(e,[t]),void 0===this.Vet){const t=i.Get+i.EU;this.Vet=t,this.Het=t}this.Het=this.Het+i.ct,this.So(new gp(bi.pZ))};return this.ta.Zo(async t=>{fr(t);try{this.qet=!0,await n()}finally{this.qet=!1}},e)}async J2(t,i,e){if(t.Km!==We.wZ)throw new m("Streaming or opaque initialization segments are not supported yet.");const s=t.lk,n=async()=>{const t={kind:yF.xet,mediaType:TF(this.IQ),segment:s};await this.Xet.Bet(t,[])};return this.ta.Zo(async t=>{fr(t);try{this.qet=!0,await n()}finally{this.qet=!1}},e)}F3(){this.Wet=!0}I3(){this.Wet=!1}async pS(t,i,e){const s=async()=>{const t={kind:yF.Cet,mediaType:TF(this.IQ),endTime:i};await this.Xet.Bet(t),this.Vet=void 0,this.Het=void 0,this.So(new gp(bi.pZ))};return this.ta.Zo(async t=>{fr(t);try{this.qet=!0,await s()}finally{this.qet=!1}},e)}IZ(t){return this.IQ===t.GT}RZ(t){return this.IQ=t.GT,Promise.resolve()}async zg(){this.Vo(),await this.ta.kn()}constructor(t,i){super(),this.IQ=void 0,this.Xet=void 0,this.Vet=void 0,this.Het=void 0,this.ta=void 0,this.qet=void 0,this.Wet=void 0,this.IQ=t,this.Xet=i,this.Vet=void 0,this.Het=void 0,this.ta=new Zn,this.qet=!1,this.Wet=!1}};function TF(t){return t.match(/video/)?li.Mk:li.Bk}var kF=class t{static jet(i,e,s,n){const r=[];for(let t=0;t<i.q4.length;t++){const s=i.q4[t].GT;r.push(new SF(s,e))}return new t(i,r,s,n)}Qet(){}get Ket(){return[this.B4,this.M4].filter(it)}get e4(){return this.B4}get Fx(){return HB(this)}get Cd(){return this.ZS}get ct(){return 0}get jZ(){var t,i,e;const s=null==(e=null==(t=this.B4)?void 0:t.jZ())||e;var n;const r=null==(n=null==(i=this.M4)?void 0:i.jZ())||n;return s&&r}get kP(){return Uo.hL()}get s4(){return this.M4}async zg(){await Promise.all([this.B4,this.M4].filter(it).map(t=>t.zg()))}F4(t){}W4(t,i,e,s){}F3(){var t,i;null==(t=this.B4)||t.F3(),null==(i=this.M4)||i.F3()}I3(){var t,i;null==(t=this.B4)||t.I3(),null==(i=this.M4)||i.I3()}IZ(t){return!!LL(this,t)}RZ(t){return this.ZS=t,Promise.resolve()}NZ(t){}async xZ(t,i){const e=await this.hw.nw(t.Ym,i),s=await e.RS();return await this.PZ(s),s}async PZ(t){if(t&&!this.pT.src)throw new fs(me.CONTENT_PROTECTION_ERROR,"Attempted to attach MediaKeys to a sourceless MediaElement");if(!t&&this.pT.src)throw new fs(me.CONTENT_PROTECTION_ERROR,"Attempted to remove MediaKeys from a non-empty MediaElement");const i=this.ES;i&&(await i.IS(this.pT),this.ES=void 0),t&&(await t._n(this.pT),this.ES=t)}constructor(t,i,e,s){this.ZS=void 0,this.hw=void 0,this.pT=void 0,this.B4=void 0,this.M4=void 0,this.ES=void 0,this.ZS=t,this.M4=hh(i,t=>Boolean(t.lQ.match(/video/))),this.B4=hh(i,t=>Boolean(t.lQ.match(/audio/))),this.hw=e,this.pT=s,this.Qet()}},EF=class extends Ne{Yet(){this.vet.addEventListener("timeupdate",this.Jet),this.vet.addEventListener("ended",this.Zet),this.vet.addEventListener("timeupdate",this.$et),this.vet.addEventListener("ratechange",this.tst),this.vet.addEventListener("volumechange",this.ist),this.vet.addEventListener("durationchange",this.sst),this.vet.addEventListener("playing",this.nst),this.vet.addEventListener("seeking",this.rst),this.vet.addEventListener("play",this.hst),this.vet.addEventListener("pause",this.ost),this.vet.addEventListener("encrypted",this.V7)}ast(){this.vet.removeEventListener("timeupdate",this.Jet),this.vet.removeEventListener("ended",this.Zet),this.vet.removeEventListener("timeupdate",this.$et),this.vet.removeEventListener("ratechange",this.tst),this.vet.removeEventListener("volumechange",this.ist),this.vet.removeEventListener("durationchange",this.sst),this.vet.removeEventListener("playing",this.nst),this.vet.removeEventListener("seeking",this.rst),this.vet.removeEventListener("play",this.hst),this.vet.removeEventListener("pause",this.ost)}ust(){this.e9.wn(Jr.AI,this.Rs)}cst(){this.e9.mn(Jr.AI,this.Rs)}get hq(){return this.vet}get d5(){return!1}get zx(){return this.vet.currentTime+this.dst.Let}get lP(){return this.vet.paused}get OP(){return this.vet.volume}set OP(t){this.vet.volume=t}get vP(){return this.vet.playbackRate}set vP(t){this.vet.playbackRate=t}get lst(){return this.vet.defaultPlaybackRate}get Fx(){var t,i;return null!=(i=null==(t=this.aq)?void 0:t.Fx)?i:Uo.rL()}get fst(){return Uo.jn(this.vet.buffered)}get pP(){const t=this.vst;return this.Ho.HM(t.Ly(this.dst.Let))}get vst(){return Uo.jn(this.vet.played)}get xP(){return this.Pz}get n5(){return!1}get _5(){return!1}get ct(){return this.vet.duration}get oP(){return this.vet.muted}set oP(t){this.vet.muted=t}get zit(){return this.vet.style}get ML(){return Y({},DN,{BL:!0})}Oy(t,i,e){this.T9.Zg(),this.T9=new Zc,this.k9=Cu(this.E9(t,this.k9,this.T9.Yg),this.T9).catch(gs)}async E9(t,i,e){var s;this.Ho=this.pP;const n=null==(s=this.aq)?void 0:s.Ket;if(!n)return;const r=_.max(...n.map(t=>t.zet?t.zet:1/0));this.Pz=!0,this.So(new ji(t)),await i.catch(gs),fr(e);try{for(this._st||this.gst(),this.vet.load(),this.pst||(this.mst=!1,await ua(this.vet.play(),e));this.AP<Lr.GL;)await this.e9.ww(Jr.AI,e);this.wst.Qy(),this._st=!1,this.Pz=!1,this.So(new Yr(this.zx))}catch(t){throw this.wst.Ky(t),t}finally{this.yst(),this.dst.Uet(r)}}jP(){this.pst=!0,this.vet.pause()}async QP(){this.pst&&(this.vet.src||this.K7(),await this.wst.Yy,await this.vet.play())}async zg(){this.Xet&&this.Xet.Met().catch(gs),this.T9.Zg(),this.ast(),this.cst(),this.e9.zg(),this.Vo(),this.Gl.kn(),this.bet.kn(),this.Aet.kn()}async hr(){this.Xet&&this.Xet.Met().catch(gs),this.T9.Zg(),this.vet.removeAttribute("src"),this.vet.removeAttribute("x-webkit-wirelessvideoplaybackdisabled"),this.vet.removeAttribute("x-airplay-deny"),this.vet.disableRemotePlayback=!1,this.vet.load(),this.e9.hr(),this.Ho=Uo.rL()}async F8(){throw new g("Not supported")}K7(){this.j7||(xf(this.vet,zd.Zs),this.Q7=!0)}get AP(){return this.e9.AP}gst(){const t=this.vet.getClientRects();let i;if(!(t.length>0))return;i=t[0];const e=i.width,s=this.vet.videoWidth/this.vet.videoHeight,n=i.height;let r,h;e/n>s?(r=n*s,h=n):(h=e/s,r=e),this.vet.style.width=r+"px",this.vet.style.height=h+"px",this.vet.style.marginLeft=(e-r)/2+"px",this.vet.style.marginTop=(n-h)/2+"px",this.vet.style.backgroundColor="black"}yst(){this.vet.style.width="100%",this.vet.style.height="100%",this.vet.style.marginLeft="",this.vet.style.marginTop="",this.vet.style.backgroundColor=""}get DP(){return this.vet.videoHeight}get MP(){return this.vet.videoWidth}get Qx(){return this.vet.ended}get Mi(){return this.vet.offsetHeight*zd.Zs.fp}get Ti(){return this.vet.offsetWidth*zd.Zs.fp}get sP(){return!1}get j7(){return this.Q7}get Vx(){}get Wu(){return this.bst}get lt(){}get Ma(){return this.wet}get Sq(){return this.ea}get kP(){return this.aq?this.aq.kP:Uo.rL()}get uq(){}get nt(){return this.Gl}get Ql(){return this.Oz}get WP(){return!1}set WP(t){}bq(t,i,e,s,n){}sI(t,i,e,s,n,r,h,o,a){const u=new Ji(t,i,e,s,n,r,h,a,o);return this.Gl.tt(u),this.J9.tt(u),u}Tq(t){throw m("Not supported.")}$Z(t){}V9(t){return Promise.resolve({H9:!1})}hP(){return lN(this.vet)}get a9(){return"block"===this.vet.style.display}be(){this.vet.style.display="block",this.bet.be()}we(){this.vet.style.display="none",this.bet.we()}G7(){}async Un(t){if(t.Km===O.AV)throw new m("Not yet implemented");await this.Xet.Det();const i=hh(t.fq,t=>t.xS.Km===po.jm),e={kind:yF.Eet,mediaBufferConfigs:t.q4.map(t=>t.GT),fairPlaySdkUri:null==i?void 0:i.GH};return await this.Xet.Bet(e),this.aq=kF.jet(t,this.Xet,this.hw,this.vet),this.DZ.Un(this.aq,t),this.vet.setAttribute("x-webkit-airplay","deny"),this.vet.setAttribute("x-webkit-wirelessvideoplaybackdisabled",""),this.vet.disableRemotePlayback=!0,this.vet.preload="none",this.vet.src="https://theo.proxy/"+this.Xet.yT+"/master.m3u8",this.aq}X7(){}rV(t){this.Gl.it(t),this.J9.it(t)}Eq(){for(const t of this.Gl.NI.slice())t.kn();this.Gl.hr()}$W(t){}wq(){return!1}Y7(t){t.appendChild(this.vet),this.bet.Y7(t)}zP(){return this.vet}get Rq(){return this.DZ.Rq}set Rq(t){this.DZ.Rq=t}get J7(){}set J7(t){}get T8(){}$P(){}constructor(t,i,e,s){super(),this._st=!0,this.Xet=new bF,this.dst=new AF,this.aq=void 0,this.e9=void 0,this.pst=!0,this.wst=new Ga,this.Pz=!1,this.k9=Promise.resolve(),this.T9=new Zc,this.mst=!0,this.Ho=Uo.rL(),this.wet=void 0,this.ea=void 0,this.vet=void 0,this.Q7=!1,this.DZ=void 0,this.hw=void 0,this.Gl=void 0,this.J9=void 0,this.bet=void 0,this.Aet=void 0,this.bst=void 0,this.Oz=void 0,this.Jet=()=>{this.lP||this.fst.V<=0||this.Fx.V<=0||this.dst.Fet(this.Fx.An(this.Fx.V-1),this.fst.An(this.fst.V-1))},this.Zet=()=>{this.So(new ur(this.zx))},this.$et=()=>{this.So(new B(this.zx,this.Vx))},this.tst=()=>{this.So(new Ik(this.zx,this.vP))},this.ist=()=>{this.So(new Wi(this.zx,this.OP))},this.sst=()=>{this.So(new zr(this.ct))},this.nst=()=>{this.So(new mo(this.zx))},this.rst=()=>{this.Oy(this.zx)},this.hst=async()=>{this.mst&&this.So(new vt(this.zx)),this.pst=!1,this.mst=!0},this.ost=()=>{this.pst=!0,this.So(new Si(this.zx))},this.V7=t=>{const i=t.initDataType;var e;const s=null!=(e=t.initData)?e:new ArrayBuffer(0);this.So(new Sp(i,s))},this.vet=t,this.e9=new Ou(this),this.bst=e,this.Oz=s,this.vet.playsInline=!0,this.vet.style.width="100%",this.vet.style.height="100%",this.Yet(),this.ust(),this.wet=mF(this.vet),this.ea=new pF(this.vet),this.DZ=new CL(this),this.hw=i,this.Gl=new bc,this.J9=new gL(this),this.bet=new ma,this.Aet=new _a(this.bet.xe,this.Wu,this.nt,this.Ql,this.Ma,this.Sq)}},xF=[at.Bk,at.Mk],Dr=class{get Fz(){const t=[];for(const i of this.Ast){const e=this.Sst.get(i);if(e){const i=e.map(t=>t.Tst);t.push(...i)}}return this.kst&&t.push(this.kst),t}Est(t){for(const i of this.Fz)i.Y7(t)}Yq(t){const i=this.Sst.get(t);if(!i)return;const e=hh(i,t=>t.xst);return e?(e.xst=!1,e.Tst):void 0}Pst(t){if(!this.kst){var i;const t=null==(i=this.Sst.get(at.Mk))?void 0:i[0].Tst.hq;if(!t)throw new m("Error creating iOS Safari MediaController");this.kst=new EF(t,this.hw,this.sc,this.Oz),t.parentElement&&this.kst.Y7(t.parentElement)}return this.kst}async Dq(t){const i=t.hq,e=i.tagName.toLowerCase();await t.hr(),Ef(i);const s=hh(this.Sst.get(e)||[],i=>t===i.Tst);s&&(s.xst=!0)}Nz(){for(const t of this.Fz)t.K7()}kn(){for(const t of this.Fz){const i=t.hq;t.zg(),kf(i),Ao(i)}this.Sst.clear(),this.kst=void 0}Ist(){for(const t of this.Ast){const i=[];this.Sst.set(t,i);for(let e=0;e<this.Cst;e++){const e=Tf(t),s=t===at.Bk?new KL(e,this.hw,this.sc,this.GJ):new wF(e,this.hw,this.sc,this.Oz,this.GJ);i.push({Tst:s,xst:!0})}}}constructor(t,i,e,s=2,n=xF,r=Ob()){this.Cst=void 0,this.Ast=void 0,this.hw=void 0,this.Sst=void 0,this.sc=void 0,this.Oz=void 0,this.GJ=void 0,this.kst=void 0,this.Cst=s,this.Ast=[...n],this.hw=r,this.sc=t,this.Oz=i,this.GJ=e,this.Sst=Ba(),this.Ist()}};r(),r();var PF=class{vk(t){return this.aV.vk(t)}Jk(t){this.aV.Jk(t)}kn(){this.aV.kn()}constructor(t){this.aV=void 0,this.aV=t}},IF=class extends PF{vk(t){const i=new ro(t),e=this.Mz.CY.DW(i);return e?this.Rst(i,e):this.aV.vk(i)}async Rst(t,i){i.DY(zd.Mg()/1e3);const e=await this.aV.vk(t);let s;i.NY(zd.Mg()/1e3),s=e.YT?e.zT().pipeThrough(new Yb(new CF(i))):e.qT().then(t=>{const e=zd.Mg()/1e3;return i.BY(e,new j(t)),i.MY(e),t});const n={lk:s,vk:e.vk};return new il(n,e)}constructor(t,i){super(t),this.Mz=void 0,this.Mz=i}},CF=class{start(t){this.iZ=t}transform(t){this.Dst.BY(zd.Mg()/1e3,t),this.iZ.enqueue(t)}flush(){this.Dst.MY(zd.Mg()/1e3)}constructor(t){this.Dst=void 0,this.iZ=void 0,this.Dst=t}};function RF(t){return{get ratio(){return t.qo},get thresholds(){return t.Nst.slice()}}}function DF(t){const i=[],e=_.floor(1/t);if(S(e))return[];for(let s=0;s<=e;s++){const e=No(s*t,0,1);i.push(e)}return i}r(),r(),r();var NF=class{get qo(){return this.Bst}get Nst(){return this.Mst}Lst(t){return i=>{const e=i[i.length-1];this.Bst=e.intersectionRatio,t(e.intersectionRatio)}}get Ca(){return this.hu||(this.hu=RF(this)),this.hu}KP(){this.Ost.disconnect()}constructor(t,i,e){this.Bst=1,this.Mst=void 0,this.Ost=void 0,this.hu=void 0,this.Mst=DF(i);const n=this.Lst(e);this.Ost=new s.IntersectionObserver(n,{root:null,threshold:this.Mst}),this.Ost.observe(t)}},BF=class{get qo(){return this.Bst}get Nst(){return this.Mst}get Ca(){return this.hu||(this.hu=RF(this)),this.hu}Fst(t){this.Bst=t;const i=this.Mst;let e=0;if(t>0)for(;e<i.length&&i[e]<=t;)++e;this.Ust!==e&&(this.Ust=e,this.Vst(t))}constructor(t,i){this.Mst=void 0,this.Vst=void 0,this.Bst=1,this.Ust=-1,this.hu=void 0,this.Mst=DF(t),this.Vst=i}},MF=class extends BF{Hst(){const t=this.bo.getBoundingClientRect();return No(_.max(0,_.min(s.innerWidth,t.right)-_.max(0,t.left))*_.max(0,_.min(s.innerHeight,t.bottom)-_.max(0,t.top))/(t.width*t.height),0,1)}KP(){s.removeEventListener("scroll",this.Wst)}constructor(t,i,e){super(i,e),this.bo=void 0,this.Wst=to(()=>this.Fst(this.Hst()),50),this.bo=t,s.addEventListener("scroll",this.Wst,!!_D&&{passive:!0}),Ht(()=>this.Fst(this.Hst()))}},LF=.1,OF=class{get qst(){return this.zst}get Lo(){return this.Gst}set Lo(t){if(S(t)||t<0||t>1)throw new RangeError("The threshold must be a value between 0 and 1");this.Gst=t}get Ca(){return this.hu||(this.hu=function(t){return{get ratio(){return t.qst},get visible(){return t.qst>t.Lo},get visibleThreshold(){return t.Lo},set visibleThreshold(i){i=bs(i),t.Lo=i},addObserver:(i,e)=>(i=bs(i),t.Do(i,e).Ca),removeObserver(i){const e=t.Xst(i);e&&t.Uo(e)}}}(this)),this.hu}jst(t){return i=>{this.zst=i,null==t||t(this.zst)}}Do(t,i){if(S(t))throw new g("step is not of the right type");if(t>1||t<=0)throw new RangeError("The step must be a number greater than 0 and smaller than or equal to 1");let e;return e="function"==typeof s.IntersectionObserver?new NF(this.bo,t,this.jst(i)):new MF(this.bo,t,this.jst(i)),this.Qst.push(e),e}Uo(t){t.KP(),_e(this.Qst,t)}Xst(t){for(const i of this.Qst)if(i.Ca===t)return i}kn(){for(const t of this.Qst)t.KP();Wt(this.Qst)}constructor(t){this.bo=void 0,this.zst=1,this.Gst=0,this.Qst=[],this.hu=void 0,this.bo=t,this.Do(.1,this.jst())}};r();var FF=class extends gp{constructor(){super(d.Iw)}},UF=class extends je{get Kst(){return this.Mz}get vO(){return this.Yst}set vO(t){this.Yst=t,this.Pa.vO=t}get Jst(){return this.Zst}get ht(){return this.Pa.ht}get GX(){return this.$st}get Wu(){return this.tnt}get $x(){return this.Pa.$x}get iP(){return this.Pa.iP}get rP(){return this.int}get lX(){return this.ent}get nt(){return this.Pa.nt}get Ql(){return this.Oz}get rt(){return this.Pa.rt}get Fx(){return this.Ux()}Ux(){return this.Pa.Fx}get snt(){return this.oJ}get yJ(){return this.bJ}get zx(){return this.Gx()}set zx(t){this.Xx(t)}Gx(){return this.Pa.zx}Xx(t,i){this.Pa.Xx(t,i)}nnt(){return this.Gx()}get Vx(){return this.Pa.Vx}set Vx(t){this.Pa.Vx=t}get bt(){return this.Pa.bt}get ct(){return this.Nd()}Nd(){return this.Pa.ct}get xe(){return this.Pa.xe}get Qx(){return this.Pa.Qx}get lt(){return this.Yx()}Yx(){return this.Pa.lt}get Jx(){return this.Zx()}Zx(){return this.Pa.Jx}get Ma(){return this.Pa.qP()}get Sq(){return this.Pa.Aa()}get WP(){return this.Pa.WP}set WP(t){this.Pa.WP=t}get oP(){return this.Pa.oP}set oP(t){const i=Boolean(t);this.uP(i)}uP(t){this.Pa.oP=t,t||this.lP||this.GP()}get lP(){return this.Pa.lP}get vP(){return this._P()}set vP(t){this.gP(t)}_P(){return this.Pa.vP}gP(t){this.Pa.vP=t}get pP(){return this.mP()}mP(){return this.Pa.pP}get wP(){return this.Pa.wP}set wP(t){this.Pa.wP=t}get AP(){return this.Pa.AP}get kP(){return this.EP()}EP(){return this.Pa.kP}get xP(){return this.Pa.xP}get JI(){return this.yO}get DP(){return this.Pa.DP}get MP(){return this.Pa.MP}get OP(){return this.Pa.OP}set OP(t){const i=No(Number(t),0,1)||0;this.UP(i)}get VP(){return this.Lz}UP(t){this.Pa.OP=t}Ea(){Ok(this,OC,this)}QP(){this.Pa.QP()}jP(){this.Pa.jP()}nu(){return this.bz}async Ta(t,i){if(this.bz=t,t){this.rnt.Nj(t).catch(this.hnt);const e=function(t){t.sources;const i=t.sources.filter(t=>vc(t.integration));0;return t.sources=i,t}(t);await this.Pa.Ta(e,i)}}IP(t,i,e){return this.Pa.IP(t,i,e)}CP(){return this.Pa.CP()}GP(){if(this.ko)return;this.Pa.GP(),this.Zst.GP();const t=this.xe.getElementsByTagName("video");for(let i=0;i<t.length;i++){const e=t[i];"Advertisement"===e.title&&xf(e,zd.Zs)}this.ko=!0}ds(){return this.ont.Wo()===Yu.FULLSCREEN}be(){this.Pa.be()}we(){this.Pa.we()}zP(){return this.Pa.zP()}$P(){this.Pa.$P()}tI(){this.Pa.tI()}sI(t){return this.Pa.sI(t)}async KP(){this.bz=void 0,await this.Pa.KP(),await this.Pa.hr()}async kn(){this.So(new FF),this.Vo(),this.$st.kn(),this.Dx.kn(),this.ent.kn(),this.ant.kn(),this.unt.kn(),this.ont.kn(),this.tnt.kn(),this.cnt.kn(),this.Zst.kn(),this.Bz.kn(),await this.Pa.kn()}constructor(t,i,e,s){super(),this.dnt=void 0,this.Cd=void 0,this.Pa=void 0,this.cnt=void 0,this.Dx=void 0,this.oJ=void 0,this.bJ=void 0,this.ant=void 0,this.ont=void 0,this.Mz=void 0,this.Lz=void 0,this.rnt=void 0,this.QJ=void 0,this.tnt=void 0,this.unt=void 0,this.Oz=void 0,this.Yst=!1,this.ko=!1,this.yO=void 0,this.bz=void 0,this.lnt=!1,this.Bz=void 0,this.Zst=void 0,this.ent=void 0,this.$st=void 0,this.Jc=void 0,this.Io=void 0,this.int=void 0,this.Na=void 0,this.hnt=t=>{if(this.lnt)return;this.lnt=!0;const i=this.dnt,e=ar(t);this.Pa.OI=new TC(this.xe,e,t),Wr(i.kn())},this.fnt=t=>{t.type!==d.Xw&&t.type!==d.Gw&&this.So(t)};const n=bs(i.uid);S(n)?this.yO=nE++:this.yO=n,this.Cd=i;const r=zd.Dx,h=new SN;this.cnt=new nD("10.3.0",r,h),this.Mz=new sN,this.Lz=new Jo;const o=new IF(r,this.Mz);this.Dx=new GD(o,i.allowMixedContent),this.QJ=null!=e?e:new FR(i.isEmbeddable,"10.3.0",DR()),this.rnt=new AN(r,this.QJ,this.cnt,h,i,DR()),this.rnt.qJ().catch(this.hnt),this.tnt=new bD(t),this.tnt.wn(Qh.yn,this.Rs),this.Oz=new PN;const a=new(null!=s?s:Dr)(this.tnt,this.Oz,i);a.Est(t),this.oJ=new oN,this.bJ=new uN;const u=new SC(t,i,this.Dx,this.Mz,this.Lz,a,this.Oz);this.Mz.GY(u);let c=u;c=new aN(c,this.snt),c=new cN(c,this.yJ),this.dnt=c,this.Pa=new Yk(this.dnt),this.Pa.lw(this.fnt),this.int=new dN(this.Pa),this.ent=new QD(this.Pa,this.Dx,this.Mz),this.ant=new uD(this),this.unt=new xD(this.Pa,i.allowNativeFullscreen),this.ont=new DD(this.unt,this.Pa.Aa()),this.tnt._n(),this.Io=new OF(t),this.Bz=new Dr(this.tnt,this.Oz,i,1,[at.Mk]),this.Zst=new BD(this.Bz),this.$st=new _N}};r(),r();var VF=class extends je{get Kst(){return this.vnt()}vnt(){return this.oa.Kst}get Jc(){return this._nt()}_nt(){return this.oa.Jc}get cnt(){return this.oa.cnt}get Jst(){return this.gnt()}gnt(){return this.oa.Jst}get vO(){return this.oa.vO}set vO(t){this.oa.vO=t}get ant(){return this.oa.ant}get GX(){return this.oa.GX}get snt(){return this.oa.snt}get Cd(){return this.oa.Cd}get Wu(){return this.oa.Wu}get Ma(){return this.qP()}qP(){return this.oa.Ma}get Sq(){return this.Aa()}Aa(){return this.oa.Sq}get Dx(){return this.oa.Dx}get VP(){return this.oa.VP}get rnt(){return this.oa.rnt}get yJ(){return this.oa.yJ}get lX(){return this.oa.lX}get ont(){return this.oa.ont}get tnt(){return this.oa.tnt}get Pa(){return this.oa.Pa}get Ql(){return this.oa.Ql}get pnt(){return this.mnt()}mnt(){return this.oa.pnt}get wnt(){return this.ynt()}ynt(){return this.oa.wnt}get JI(){return this.oa.JI}get Io(){return this.oa.Io}get ht(){return this.Mx()}Mx(){return this.oa.ht}Ux(){return this.oa.Ux()}get Vx(){return this.Hx()}set Vx(t){this.Wx(t)}Hx(){return this.oa.Vx}Wx(t){this.oa.Vx=t}get bt(){return this.qx()}qx(){return this.oa.bt}Gx(){return this.oa.Gx()}Xx(t,i){this.oa.Xx(t,i)}nnt(){return this.oa.nnt()}Nd(){return this.oa.Nd()}get xe(){return this.jx()}jx(){return this.oa.xe}get Qx(){return this.Kx()}Kx(){return this.oa.Qx}Yx(){return this.oa.Yx()}Zx(){return this.oa.Zx()}get $x(){return this.tP()}get iP(){return this.eP()}tP(){return this.oa.$x}eP(){return this.oa.iP}get WP(){return this.oa.WP}set WP(t){this.oa.WP=t}get rP(){return this.hP()}hP(){return this.oa.rP}get oP(){return this.aP()}set oP(t){this.uP(t)}aP(){return this.oa.oP}uP(t){this.oa.uP(t)}get lP(){return this.fP()}fP(){return this.oa.lP}get vP(){return this._P()}set vP(t){this.gP(t)}_P(){return this.oa.vP}gP(t){this.oa.vP=t}mP(){return this.oa.mP()}get wP(){return this.yP()}set wP(t){this.bP(t)}yP(){return this.oa.wP}bP(t){this.oa.wP=t}get AP(){return this.TP()}TP(){return this.oa.AP}get Na(){return this.oa.Na}set Na(t){this.oa.Na=t}EP(){return this.oa.EP()}get xP(){return this.PP()}PP(){return this.oa.xP}get nt(){return this.RP()}RP(){return this.oa.nt}get DP(){return this.NP()}NP(){return this.oa.DP}get rt(){return this.BP()}BP(){return this.oa.rt}get MP(){return this.LP()}LP(){return this.oa.MP}get OP(){return this.FP()}set OP(t){this.UP(t)}FP(){return this.oa.OP}UP(t){this.oa.UP(t)}GP(){this.oa.GP()}jP(){this.oa.jP()}QP(){this.oa.QP()}be(){this.oa.be()}we(){this.oa.we()}ds(){return this.oa.ds()}zP(){return this.oa.zP()}$P(){this.oa.$P()}tI(){this.oa.tI()}sI(t){return this.oa.sI(t)}Ea(){this.oa.Ea()}nu(){return this.oa.nu()}Ta(t,i){return this.oa.Ta(t,i)}IP(t,i,e){return this.oa.IP(t,i,e)}CP(){return this.oa.CP()}KP(){return this.oa.KP()}eI(t){return!1}wz(){this.bnt&&this.oa.lw(this.nI)}yz(){this.bnt&&this.oa.mw(this.nI)}async kn(t){this.Vo(),t||await this.oa.kn(),this.yz()}constructor(t,i){super(),this.oa=void 0,this.bnt=void 0,this.nI=t=>{this.eI(t)||this.So(t)},this.oa=t,this.bnt=!i,this.wz()}},Oa=function(t){return t[t.lu=0]="lu",t[t.Ant=1]="Ant",t[t.Snt=2]="Snt",t}({}),HF=vf(3,()=>[]);function Na(t,i){HF[i].push(t)}var da=function(t){return t[t.Tnt=0]="Tnt",t[t.Ant=1]="Ant",t[t.knt=2]="knt",t[t.Ent=3]="Ent",t[t.bC=4]="bC",t}({}),WF=vf(5,()=>[]);function Ma(t,i){WF[i].push(t)}var qF=[];function zF(t){for(const i of qF)i(t)}r();var GF=self.CustomEvent;var XF=function(){try{const t=new GF("cat",{detail:{foo:"bar"}});return"cat"===t.type&&"bar"===t.detail.foo}catch(t){}return!1}()?function(t,i){return new CustomEvent(t,i)}:function(t,i){const e=h.createEvent("CustomEvent");return e.initCustomEvent(t,(null==i?void 0:i.bubbles)||!1,(null==i?void 0:i.cancelable)||!1,null==i?void 0:i.detail),e};r();var jF=new class{get V(){return this.dO.length}get Ca(){var t;return null!=(t=this.hu)?t:this.hu=function(t){const i=[];for(let e=0;e<t.V;e++)i[e]=t.MI(e).Ca;return i.getPlayerByUID=i=>{const e=t.xnt(i);return e&&e.Ca},i}(this)}MI(t){return this.dO[t]}_$(t){this.dO.push(t),this.Ca.push(t.Ca)}pS(t){const i=this.dO.indexOf(t);i<0||(Ra(this.dO,i),this.hu&&Ra(this.hu,i))}xnt(t){for(const i of this.dO)if(i.JI===t)return i}constructor(){this.dO=[],this.hu=void 0}};function QF(t){let i,e;const s=i=>{e=i;const s=ra(i,t.Cd);t.Ta(s)},n={get abr(){return t.Kst.Ca},get ads(){var i;return null==(i=t.Jc)?void 0:i.Ca},get audioTracks(){return t.ht.Ca},get autoplay(){return t.vO},set autoplay(i){t.vO=Boolean(i)},get buffered(){return t.Ux()},get canvas(){return t.ant.Ca},get cast(){var i;return null==(i=t.GX)?void 0:i.Ca},get clip(){return t.snt.Ca},get currentProgramDateTime(){var i;return null!=(i=t.Vx)?i:null},set currentProgramDateTime(i){t.Vx=null!=i?i:void 0},get currentTime(){return t.Gx()},set currentTime(i){t.Xx(Number(i))},get duration(){return t.Nd()},get element(){return t.xe},get ended(){return t.Qx},get error(){return t.Yx()},get errorObject(){return t.Zx()},get loop(){return t.yJ.yJ},set loop(i){t.yJ.yJ=Boolean(i)},get metrics(){return t.rP.Ca},get muted(){return t.oP},set muted(i){t.uP(i)},get network(){return t.lX.Ca},get paused(){return t.lP},get playbackRate(){return t.vP},set playbackRate(i){const e=Number(i);if(e<0)throw new RangeError("playbackRate must be a positive number");t.vP=e},get played(){return t.mP()},get poster(){return t.gi},set poster(i){t.gi=Ts(i)},get preload(){return t.wP},set preload(i){t.wP=function(t){switch(t){case"auto":case"":return"auto";case"metadata":return"metadata";default:return"none"}}(i)},get presentation(){return t.ont.Ca},get readyState(){return t.AP},get seekable(){return t.EP()},get seeking(){return t.xP},get source(){return e},set source(t){s(t)},get src(){return aR(t.nu())},set src(t){s({sources:t})},get textTracks(){return t.nt.Ca},get textTrackStyle(){return t.Ql.Ca},get theoLive(){return t.pnt},get uid(){return t.JI},get videoHeight(){return t.DP},get videoTracks(){return t.rt.Ca},get videoWidth(){return t.MP},get visibility(){return t.Io.Ca},get volume(){return t.OP},set volume(i){t.UP(Number(i))},get latency(){return t.VP.Ca},get theoads(){return t.wnt},get millicast(){return t.iP.Ca},destroy(){t.kn(),t=null,e=void 0},play(){t.Pnt()},pause(){t.jP()},stop(){e=void 0,t.KP()},prepareWithUserAction(){t.GP()},addEventListener(t,e){i.wn(t,e)},removeEventListener(t,e){i.mn(t,e)},setSource(t){s(t)},addTextTrack:i=>t.sI(function(t){return{Lt:Ts(t.kind),Th:Ts(t.label),bs:Ts(t.language),Km:Ts(t.type)}}(i)).Ca};return i=new tl(n,!0),i.au(t),i.wn("destroy",()=>{i.kn()}),n}r(),r(),r(),r();var KF=class extends gp{constructor(t){super(d.do),this.source=void 0,this.source=t}};r();var YF=class extends je{get Vx(){}set Vx(t){}get zx(){return this.Gx()}set zx(t){this.Xx(t)}Gx(){return this.xz}nnt(){return this.Gx()}Xx(t,i){this.Pz&&this.xz===t||(this.xz=t,this.Pz=!0,this.So(new ji(this.xz)))}get lP(){return this.Cz}get vP(){return this.Rz}set vP(t){this.Rz!==t&&(this.Rz=t,this.So(new Ik(this.xz,this.vP)))}get AP(){return Lr.zL}get xP(){return this.Pz}QP(){this.Cz&&(this.Cz=!1,this.So(new vt(this.xz)),this.So(new SP(this.xz)))}jP(){this.Cz||(this.Cz=!0,this.So(new B(this.xz,this.Vx)),this.So(new Si(this.xz)))}hr(){this.xz=0,this.Pz=!1,this.Rz=1,this.jP()}kn(){this.Vo()}we(){}be(){}constructor(){super(),this.xz=void 0,this.Cz=void 0,this.Pz=void 0,this.Rz=void 0,this.xz=0,this.Cz=!0,this.Pz=!1,this.Rz=1}};r();var JF={zIndex:"1",display:"inline-block",verticalAlign:"middle",backgroundRepeat:"no-repeat",backgroundPosition:"50% 50%",backgroundSize:"contain",cursor:"pointer",margin:"0",padding:"0",position:"absolute",top:"0",right:"0",bottom:"0",left:"0",height:"100%"},ZF={visibility:"hidden"},$F={visibility:"visible"},tU=class{get Yu(){return void 0!==this.Int?this.Int:void 0!==this.Cnt?this.Cnt:void 0}set Rnt(t){this.Cnt=t,this.er()}er(){const t=this.oa.lP,i=this.Dnt;this.Yu?this.Ls.style.backgroundImage='url("'+up(this.Yu)+'")':this.Ls.style.backgroundImage="",t&&this.Yu&&!i?this.be():this.we()}be(){Bl(ZF,this.oa.xe),Bl($F,this.Ls)}we(){Bl(ZF,this.Ls),Bl($F,this.oa.xe)}wz(){this.oa.wn(d.do,this.Nnt),this.oa.wn(d.uo,this.HV)}kn(){this.oa.mn(d.do,this.Nnt),this.oa.mn(d.uo,this.HV),Ao(this.Ls)}constructor(t){this.Ls=void 0,this.oa=void 0,this.Dnt=!1,this.Int=void 0,this.Cnt=void 0,this.Nnt=t=>{var i;this.Dnt=!this.oa.lP,this.Int=null==(i=t.source)?void 0:i.poster,this.er()},this.HV=()=>{this.Dnt=!0,this.we()},this.oa=t,this.wz(),this.Ls=function(){const t=s&&s.document&&s.document.createElement("div");return t.className="theoplayer-poster",Bl(JF,t),t}(),t.xe.appendChild(this.Ls)}};r(),r(),r(),r();var Hu=function(t){return t[t.Bnt=0]="Bnt",t[t.Mnt=1]="Mnt",t}({});function iU(t){let i;const e={get playing(){return t.zc},get currentAds(){return t.Lnt.map(t=>t.Ont())},get currentAdBreak(){var i,e;return null!=(e=null==(i=t.Fnt)?void 0:i.Ont())?e:null},get scheduledAds(){return t.Unt.map(t=>t.Ont())},get scheduledAdBreaks(){return t.Vnt.map(t=>t.Ont())},skip(){t.uD()},skipAdBreak(i){t.Hnt(null!=i?i:void 0)},schedule(i){const e=mR(i,va.Bg);e?t.W6(e,Hu.Bnt,!1):console.error("Invalid ad description")},registerServerSideIntegration(i,e){t.Wnt(i,e)},addEventListener(t,e){i.wn(t,e)},removeEventListener(t,e){i.mn(t,e)}};return i=new le(t,e),e}var eU=class extends je{get zc(){return!!this.qc&&this.qc.zc}get Lnt(){return this.qc?this.qc.Lnt:[]}get Fnt(){return this.qc?this.qc.Fnt:null}get Unt(){return this.qc?this.qc.Unt:[]}get Vnt(){return this.qc?this.qc.Vnt:[]}W6(t,i,e){var s;null==(s=this.qc)||s.W6(t,i,e)}qnt(t){var i;null==(i=this.qc)||i.qnt(t)}uD(){var t;null==(t=this.qc)||t.uD()}Hnt(t){var i;null==(i=this.qc)||i.Hnt(t)}znt(t){var i;null==(i=this.qc)||i.znt(t)}Wnt(t,i){var e;null==(e=this.qc)||e.Wnt(t,i)}get Ca(){var t;return null!=(t=this.hu)?t:this.hu=iU(this)}async kn(t){this.Vo(),void 0!==this.qc&&(this.qc.mw(this.Rs),t||await this.qc.kn(),this.qc=void 0)}constructor(t){var i;super(),this.qc=void 0,this.hu=void 0,this.qc=t,null==(i=this.qc)||i.lw(this.Rs)}};r(),r();var sU=class extends Oi{constructor(t,i){super(t),this.od=void 0,this.od=i}},Ke=class extends gp{constructor(t,i){super(t),this.adBreak=void 0,this.adBreak=i}},nU=class extends sU{xa(){return new rU(this.od.Ont())}constructor(t){super("Gnt",t)}},rU=class extends Ke{constructor(t){super("removeadbreak",t)}};r();var vn=class extends sU{xa(){return new hU(this.od.Ont())}constructor(t){super("Xnt",t)}},hU=class extends Ke{constructor(t){super("addadbreak",t)}};r(),r();var oU=class extends Oi{constructor(t,i){super(t),this.jnt=void 0,this.jnt=i}},aU=class extends gp{constructor(t,i){super(t),this.ad=void 0,this.ad=i}},cn=class extends oU{xa(){return new uU(this.jnt.Ont())}constructor(t){super("Qnt",t)}},uU=class extends aU{constructor(t){super("addad",t)}};r();var Za=class extends sU{xa(){return new cU(this.od.Ont())}constructor(t){super("Knt",t)}},cU=class extends Ke{constructor(t){super("adbreakend",t)}};r();var Ta=class extends sU{xa(){return new dU(this.od.Ont())}constructor(t){super("Ynt",t)}},dU=class extends Ke{constructor(t){super("adbreakbegin",t)}};r();var nc=class extends oU{xa(){return new lU(this.jnt.Ont(),this.currentTime)}constructor(t,i){super("Jnt",t),this.currentTime=void 0,this.currentTime=i}},lU=class extends aU{constructor(t,i){super("adbegin",t),this.currentTime=void 0,this.currentTime=i}};r();var fc=class extends oU{xa(){return new fU(this.jnt.Ont(),this.currentTime)}constructor(t,i){super("Znt",t),this.currentTime=void 0,this.currentTime=i}},fU=class extends aU{constructor(t,i){super("adend",t),this.currentTime=void 0,this.currentTime=i}};r();var vU=class extends Oi{xa(){return new _U}constructor(){super("$nt")}},_U=class extends gp{constructor(){super("adadded")}},gU=class extends eU{get OI(){return this.qc}set OI(t){const i=this.qc;if(i===t)return;const e=this.Lnt,s=this.Fnt,n=this.Unt,r=this.Vnt;null==i||i.mw(this.Rs),this.qc=t,null==t||t.lw(this.Rs);const h=this.Lnt,o=this.Fnt,a=this.Unt,u=this.Vnt,c=[];let d=!1;for(const t of r)Ct(u,t)||c.push(new nU(t));for(const t of u)Ct(r,t)||c.push(new vn(t));for(const t of a)Ct(n,t)||(c.push(new cn(t)),d=!0);d&&c.push(new vU),s!==o&&(s&&c.push(new Za(s)),o&&c.push(new Ta(o)));for(const t of e)Ct(h,t)||c.push(new fc(t,this.oa.Gx()));for(const t of h)Ct(e,t)||c.push(new nc(t,this.oa.Gx()));for(const t of c)this.So(t)}constructor(t){super(void 0),this.oa=void 0,this.oa=t}};r(),r();var pU=class extends je{get Ca(){var t;return null!=(t=this.hu)?t:this.hu=iU(this)}znt(t){}Wnt(t,i){}W6(t,i,e){}uD(){}Hnt(t){}qnt(t){}kn(){return this.Vo(),Promise.resolve()}constructor(...t){super(...t),this.zc=!1,this.Fnt=null,this.Lnt=[],this.Vnt=[],this.Unt=[],this.hu=void 0}},st=class extends pU{W6(t,i,e){this.trt.push({irt:t,ert:i,nrt:e})}uD(){}znt(t){}Wnt(t,i){this.rrt.push({IC:t,hrt:i})}qnt(t){const i=this.rrt.slice(),e=this.trt.slice();this.hr();for(const e of i)t.Wnt(e.IC,e.hrt);for(const i of e)t.W6(i.irt,i.ert,i.nrt)}ort(){const t=this.trt.map(t=>t.irt);return this.hr(),t}hr(){Wt(this.rrt),Wt(this.trt)}async kn(){this.hr(),await super.kn()}constructor(...t){super(...t),this.rrt=[],this.trt=[]}};r();var mU=class extends gp{constructor(t){super("tizen2retry"),this.originalErrorEvent=void 0,this.originalErrorEvent=t}};var wU=Oc(()=>{let t=UF;t=function(t){return class extends VF{constructor(i,e){let s=new t(i,e);for(const t of WF)for(const i of t)s=i(s);super(s)}}}(t);let i=function(t){return class extends je{get cnt(){return this.art.cnt}get Jc(){return this.qc}get ant(){return this.art.ant}get Cd(){return this.art.Cd}get Dx(){return this.art.Dx}get Ma(){return this.art.Ma}get Sq(){return this.art.Sq}get ont(){return this.art.ont}get tnt(){return this.art.tnt}get Pa(){return this.art.Pa}get Kst(){return this.art.Kst}get vO(){return this.art.vO}set vO(t){this.art.vO=t,this.urt()}get Jst(){return this.art.Jst}get ht(){return this.art.ht}get GX(){return this.art.GX}get Wu(){return this.art.tnt}get Ca(){return this.hu||(this.hu=this.xa()),this.hu}get $x(){return this.art.$x}get iP(){return this.art.iP}get WP(){return this.art.WP}set WP(t){this.art.WP=t}get rP(){return this.art.rP}get lX(){return this.art.lX}get nt(){return this.art.nt}get Ql(){return this.art.Ql}get rt(){return this.art.rt}get snt(){return this.art.snt}get yJ(){return this.art.yJ}get Vx(){return this.oa.Vx}set Vx(t){this.oa.Vx=t}get bt(){return this.art.bt}get xe(){return this.art.xe}get Qx(){return this.art.Qx}get oP(){return this.art.oP}set oP(t){this.uP(t)}get lP(){return this.oa.lP}get gi(){return this.crt.Yu||""}set gi(t){this.crt.Rnt=t}get vP(){return this._P()}set vP(t){this.gP(t)}_P(){return this.art.vP}gP(t){this.oa.vP=t}get wP(){return this.art.wP}set wP(t){this.art.wP=t}get AP(){return this.oa.AP}get Na(){return this.art.Na}set Na(t){this.art.Na=t}get xP(){return this.oa.xP}get pnt(){return this.art.pnt}get wnt(){return this.art.wnt}get JI(){return this.art.JI}get DP(){return this.art.DP}get MP(){return this.art.MP}get OP(){return this.art.OP}set OP(t){this.UP(t)}get VP(){return this.art.VP}get rnt(){return this.art.rnt}get Io(){return this.art.Io}async Zo(t,i){return this.ta.Zo(t,i).catch(bu)}async drt(t,i){fr(i),this.art.lw(this.lrt);try{await this.art.Ta(t,i)}finally{this.art.mw(this.lrt)}}async urt(){const t=await this.frt();this.vrt(t)}async frt(){const t=this.nu();return t&&!Uu(t)&&this.vO&&this.lP?this.Jst.XK(this.oP):"none"}vrt(t){var i;const e=(null==(i=this.nu())?void 0:i.mutedAutoplay)||this.Cd.mutedAutoplay;switch(t){case"all":this.Pnt();break;case"muted":(this.oP||e===Dk.ALL)&&(this.oP=!0,this.QP())}}Ta(t){Uu(this.bz)||this.So(new ho(0,Lr.zL)),this.hr(),this.bz=t,Wr(this.Zo(async i=>{fr(i);try{await this.drt(t,i)}catch(t){return sa(t),this.bz=void 0,void this.Qq(bb(t,me.SOURCE_NOT_SUPPORTED))}finally{this._rt(this.art)}const e=await this.frt();this.So(new KF(this.nu())),this.vrt(e)}))}Xx(t,i){this.oa.Xx(t,i)}Yx(){var t;return null!=(t=this.Wz)?t:this.art.Yx()}Zx(){var t;return null!=(t=this.nq)?t:this.art.Zx()}Qq(t){void 0===this.Zx()&&(this.nq=t,this.Wz=ar(t),this.So(new el(t)))}QP(){this.oa.QP()}Pnt(){this.oP||this.GP(),this.QP()}GP(){this.art.GP()}jP(){this.oa.jP()}KP(){this.Ta(void 0)}be(){this.kz=!0,this.oa.be()}we(){this.kz=!1,this.oa.we()}Ea(){this.art.Ea()}UP(t){this.art.UP(t)}uP(t){this.art.uP(t)}Ba(t){this.grt=t,t._$(this)}ds(){return this.art.ds()}nu(){return this.bz}zP(){return this.art.zP()}Gx(){return this.oa.Gx()}nnt(){return this.oa.nnt()}Nd(){return this.art.Nd()}Ux(){return this.art.Ux()}mP(){return this.art.mP()}EP(){return this.art.EP()}$P(){this.art.$P()}tI(){this.art.tI()}sI(t){return this.art.sI(t)}hr(){this.bz=void 0,this.nq=void 0,this.Wz=void 0,this.prt=!0,Wt(this.mrt),this.wrt.hr(),this._rt(this.wrt),this.ta.Zg(),Wr(this.ta.Zo(async t=>{fr(t),await this.art.KP()}))}kn(){this.So(new FF),this.crt.kn(),this.yz(),this.hr(),Wr(this.Zo(async()=>{await this.art.kn(),this.grt&&(this.grt.pS(this),this.grt=void 0),this.ta.kn()})),this.Vo()}_rt(t){if(this.oa===t)return;const i=this.oa.lP,e=this.oa.Gx(),s=this.oa.vP,n=this.oa.AP,r=this.oa.xP;this.yrt=i,this.Z7=n,this.yz(),t.lw(this.brt),t===this.art?(void 0!==this.qc&&(this.qc.OI=t.Jc,this.Art.qnt(this.qc)),(r||t.Gx()!==e)&&t.Xx(e),t.vP!==s&&(t.vP=s),i?t.jP():t.QP()):(void 0!==this.qc&&(this.qc.OI=this.Art,this.Art.hr()),this.Cd.retainPlaybackRateOnSourceChange?t.vP=s:1!==s&&this.So(new Ik(this.Gx(),1))),t.mw(this.brt),this.oa=t,this.wz();for(const t of this.mrt)this.So(t);Wt(this.mrt),this.kz?t.be():t.we()}wz(){this.oa.lw(this.iI)}yz(){this.oa.mw(this.iI)}xa(){return QF(this)}constructor(i,e){super(),this.oa=void 0,this.art=void 0,this.wrt=void 0,this.crt=void 0,this.grt=void 0,this.ta=void 0,this.mrt=void 0,this.yrt=!0,this.Z7=Lr.zL,this.kz=void 0,this.prt=!1,this.bz=void 0,this.nq=void 0,this.Wz=void 0,this.qc=void 0,this.Art=void 0,this.hu=void 0,this.lrt=t=>{t.type!==d.Kw&&this.mrt.push(t)},this.brt=t=>{(t.type!==d.uo||this.oa.lP)&&(t.type===d.jw&&this.oa.lP||t.type===d.$w&&this.oa.xP&&this.oa.Gx()===t.currentTime||t.type===d.Kw&&this.oa.vP===t.playbackRate||this.So(t))},this.iI=t=>{if(this.prt){if(t.type===Jr.xM)return;t.type!==Jr.SM&&t.type!==Jr.PM||(this.prt=!1)}if(t.type===d.uo){if(!this.yrt)return;this.yrt=!1}else if(t.type===d.jw){if(this.yrt)return;this.yrt=!0}else if(t.type===Jr.AI){if(this.Z7===t.readyState)return;this.Z7=t.readyState}else if(t.type===d.Iw)return;this.So(t)},this.art=new t(i,e),this.wrt=new YF,this.oa=this.art,this.crt=new tU(this),this.art.Jc&&(this.qc=new gU(this),this.qc.OI=this.art.Jc,this.Art=new st),this.ta=new Zn,this.mrt=[],this.kz=!0,this.wz()}}}(t);return zs.w_&&zs.b_<3&&(i=function(t){return class extends t{Ta(t){this.Srt=0,super.Ta(t)}So(t){if(t.type===hc.ma&&this.Srt<3)return this.Srt++,super.So(new mU(t)),void super.Ta(this.nu());super.So(t)}constructor(...t){super(...t),this.Srt=0}}}(i)),i=function(t){let i=t;for(const t of HF)for(const e of t)i=e(i);return i}(i),i});function yU(t,i){const e=Bk(i),s=new(wU())(t,e);s.Na=s;let n=s.Ca;return s.Ea(),s.Ba(jF),w.defineProperty(n,"constructor",{value:yU}),n=SS(n),zF(s),n}Ht(()=>{self.dispatchEvent&&self.dispatchEvent(XF("theoplayerready"))}),r();var bU={base64:new class{encode(t){return wa(t)}decode(t){return Cn(t)}}};r();var AU=JSON.parse('["hbbtv","dash","hesp","millicast","hls","chromecast","ads","theoads","airplay","spotx","vr","cache","webaudio","youbora","mediamelon","moat","google-dai","streamone","lcevc","freewheel","agama","uplynk","mediatailor","ui","relatedcontent","social","upnext","contextmenu","texttrackstyle-ui","activequalitylabel","upcomingadnotification"]');r(),r(),r();var SU=class{get zx(){const t=this.oa.currentTime;return isFinite(t)?t:"now"}get Trt(){return this.oa.src||""}hr(){}constructor(t,i){this.oa=void 0,this.krt=void 0,this.Ert=!1,this.xrt=t=>{this.krt.yQ(t.error,this.zx)},this.Prt=()=>{this.krt.gQ(this.Trt),this.oa.removeEventListener("playing",this.Prt),this.Ert=!1},this.Ms=()=>{var t,i,e,s;this.Ert||(this.oa.addEventListener("playing",this.Prt),this.Ert=!0),null==(t=this.oa.ads)||t.removeEventListener("adbegin",this.Irt),null==(i=this.oa.theoads)||i.removeEventListener("interstitialbegin",this.Crt);var n,r;(null==(s=this.oa.source)||null==(e=s.ads)?void 0:e.some(t=>"theoads"===t.integration))&&(null==(n=this.oa.ads)||n.addEventListener("adbegin",this.Irt),null==(r=this.oa.theoads)||r.addEventListener("interstitialbegin",this.Crt))},this.Irt=t=>{"theoads"!==t.ad.integration||t.ad.isSlate||this.krt.wQ("ad")},this.Crt=t=>{const i=t.interstitial;(function(t){return"adbreak"===t.type})(i)||this.krt.wQ(function(t){switch(t){case"adbreak":default:return"ad";case"overlay":return"overlay"}}(i.type))},this.krt=i,this.oa=t,this.oa.addEventListener("error",this.xrt),this.oa.addEventListener("sourcechange",this.Ms),this.Ms()}};!function(t){qF.push(t)}(function(t){new SU(t.Ca,t.cnt)}),r();var TU="theoplayer-stored-volume",kU="theoplayer-stored-mutedstate";Na(function(t){return class extends t{uP(t){this.Cd.persistVolume&&cu.Gy(kU,""+Boolean(t)),super.uP(t)}UP(t){this.Cd.persistVolume&&cu.Gy(TU,""+Number(t)),super.UP(t)}constructor(t,i){if(super(t,i),i.persistVolume){let t=cu.HJ(TU);(void 0===t||S(t))&&(t=1);const i=cu.WJ(kU)||!1;this.OP=t,this.oP=i}}}},Oa.lu);var EU="10.3.0",xU=jF.Ca,PU=A.VC.registerContentProtectionIntegration.bind(A.VC);r(),r();zs.k_&&zs.x_?MD(class{XK(t){return Promise.resolve("all")}GP(){}kn(){}}):MD(ND),r(),r(),r(),r();var IU=class{async Jq(t){return tu(t.type)}async Zq(t){return!!await VT(t,!0)}},CU=class extends IU{async Jq(t){return!!fv(t.useManagedMediaSource)&&super.Jq(t)}};function RU(t){return NN(t)}function DU(t){const i=zs.S_||zs.w_,e=void 0!==t&&void 0!==t.preferredAudioCodecs&&t.preferredAudioCodecs.some(t=>"ac-3"===t||"ec-3"===t),s=i&&!e,n=new lv(!0);return async t=>{const i=t.GT;if(!n.Fp(i)&&!function(t,i){return!!t&&(To(t)?sP(i)||rP(i):nl(t,Yy)||nl(t,Zy)||nl(t,Ky))}(t.lQ,t.Rrt))return!1;const e=t.Rrt.some(t=>"ac-3"===t||"ec-3"===t);if(s&&e)return!1;if(t.NW){const e=t.NW,s=hs(e,t=>sp(t.x8)).filter(it),n=await async function(t,i){for(const e of t)if(await i(e))return!0;return!1}(s,t=>zd.Sm(t,i));if(!n)return!1}return!0}}r(),r(),r(),r();var NU=class{get Mi(){return this.Drt.offsetHeight*zd.Zs.fp}get Ti(){return this.Drt.offsetWidth*zd.Zs.fp}constructor(t){this.Drt=void 0,this.Drt=t}};r(),r();var Ea=class{Yq(t){return this.MW.Yq(t)}Pst(t){return this.MW.Pst(t)}Dq(t){return this.MW.Dq(t)}constructor(t){this.MW=void 0,this.MW=t}};function BU(t){return class extends t{get hq(){return this.PL.hq}}}r(),r(),r(),r(),r();var MU=class{get Cd(){return this.NS()}NS(){return this.aq.Cd}get kP(){return this.EP()}EP(){return this.aq.kP}IZ(t){return this.aq.IZ(t)}RZ(t){return this.aq.RZ(t)}zg(){return Promise.resolve()}constructor(t){this.aq=void 0,this.aq=t}},ja=class extends MU{get e4(){return this.B4}get s4(){return this.M4}get Fx(){return this.Ux()}Ux(){return this.aq.Fx}get ct(){return this.Nd()}Nd(){return this.aq.ct}get jZ(){return this.Nrt()}Nrt(){return this.aq.jZ}F4(t){this.aq.F4(t)}W4(t,i,e,s){this.aq.W4(t,i,e,s)}F3(){this.aq.F3()}I3(){this.aq.I3()}zg(){return this.B4&&(this.B4.zg(),this.B4=void 0),this.M4&&(this.M4.zg(),this.M4=void 0),super.zg()}Brt(t){this.aq=t,this.B4?t.e4?this.B4.Mrt(t.e4):(this.B4.zg(),this.B4=void 0):t.e4&&(this.B4=this.Lrt(t.e4),this.B4.wn(MN,this.Ort)),this.M4?t.s4?this.M4.Mrt(t.s4):(this.M4.zg(),this.M4=void 0):t.s4&&(this.M4=this.Lrt(t.s4),this.M4.wn(MN,this.Ort))}NZ(t){this.aq.NZ(t)}Frt(t){}constructor(t){super(t),this.B4=void 0,this.M4=void 0,this.Ort=t=>this.Frt(t)}};r(),r(),r();var LU=class extends Ne{get zY(){return this.ZY}set zY(t){this.ZY=t}get Fx(){return Uo.rL()}get Cd(){return this.ZS}get V3(){return at.yk}get W3(){return Uo.rL()}get Urt(){return!1}get VY(){return this.KY}set VY(t){this.KY=t}Q2(t,i,e){return Promise.reject(new m("Invalid media buffer"))}j3(){return Promise.reject(new m("Invalid media buffer"))}J2(t,i,e){return Promise.reject(new m("Invalid media buffer"))}jZ(){return!1}F3(){}G3(t,i){}X3(t,i){}pS(t,i,e){return Promise.resolve()}f3(t,i){return Promise.reject(new m("Invalid media buffer"))}SO(t,i){return Promise.reject(new m("Invalid media buffer"))}IZ(t){return!1}RZ(t){return Promise.reject(new m("Invalid media buffer"))}zg(){this.Vo()}constructor(t){super(),this.ZS=void 0,this.KY=0,this.ZY=0,this.ZS=t}},Da=class extends Ne{get zY(){return this.Vrt()}set zY(t){this.Hrt(t)}Vrt(){return this.Wrt.zY}Hrt(t){this.Wrt.zY=t}get Fx(){return this.Ux()}Ux(){return this.Wrt.Fx}get Cd(){return this.NS()}NS(){return this.Wrt.Cd}get V3(){return this.Wrt.V3}get W3(){return this.qrt()}qrt(){return this.Wrt.W3}get VY(){return this.zrt()}set VY(t){this.Grt(t)}zrt(){return this.Wrt.VY}Grt(t){this.Wrt.VY=t}Q2(t,i,e){return this.Wrt.Q2(t,i,e)}j3(){return this.Wrt.j3()}J2(t,i,e){return this.Wrt.J2(t,i,e)}G3(t,i){this.Wrt.G3(t,i)}X3(t,i){this.Wrt.X3(t,i)}pS(t,i,e){return this.Wrt.pS(t,i,e)}f3(t,i){return this.Wrt.f3(t,i)}IZ(t){return this.Wrt.IZ(t)}RZ(t){return this.Wrt.RZ(t)}iI(t){this.So(t)}zg(){this.Vo(),this.Mrt(new LU(this.Cd))}Mrt(t){this.Wrt.mn(MN,this.Xrt),this.Wrt=t,this.Wrt.wn(MN,this.Xrt)}constructor(t){super(),this.Wrt=void 0,this.Xrt=t=>this.iI(t),this.Wrt=t,this.Wrt.wn(MN,this.Xrt)}},OU=class extends Da{get Tst(){return this.PL}set Tst(t){this.PL=t}async Q2(t,i,e){return fr(e),await this.jrt(this.PL.zx,null==i?void 0:i.Get,null==i?void 0:i.ct),fr(e),t.Km===We.MT?await this.Qrt(t,i,e):await this.Krt(t,i,e)}async Qrt(t,i,e){let s=t;for(;;){const[t,n]=eA(s.lk);s={Km:We.MT,lk:t};try{return await this.Yrt(s,i,e),void n.cancel(new Qc).catch(gs)}catch(t){if(YD(t)){if(await this.jrt(this.PL.zx,i.Get,i.ct,e)){s={Km:We.MT,lk:n};continue}}throw n.cancel(t).catch(gs),t}}}async Krt(t,i,e){for(;;)try{return fr(e),await this.Yrt(t,i,e)}catch(t){if(YD(t)){if(await this.jrt(this.PL.zx,i.Get,i.ct,e))continue}throw t}}async jrt(t,i,e,s){const n=KD(t,i,e,this.Fx,this.VY,this.zY);for(const[t,i]of n)await this.Jrt(t,i,s);return n.length>0}Yrt(t,i,e){return super.Q2(t,i,e)}Jrt(t,i,e){return super.pS(t,i,e)}constructor(t){super(t),this.PL=void 0}},FU=class extends ja{get Tst(){return this.PL}set Tst(t){this.PL=t,this.B4&&(this.B4.Tst=t),this.M4&&(this.M4.Tst=t)}Lrt(t){const i=new OU(t);return i.Tst=this.PL,i}constructor(t){super(t),this.PL=void 0,this.Brt(t)}};r();var Ia=class extends MU{get wP(){return this.aq.wP}set wP(t){this.aq.wP=t}};function ft(t){return class extends t{get hq(){return this.PL.hq}get MP(){return this.PL.MP}get DP(){return this.PL.DP}zP(){return this.PL.zP()}}}r(),r(),r();var UU=class extends Ne{get Zrt(){return this.PL}get Fx(){return this.Ux()}Ux(){return this.PL.Fx}get Vx(){return this.Hx()}Hx(){return this.PL.Vx}get zx(){return this.Gx()}Gx(){return this.PL.zx}get Wu(){return this.PL.Wu}get ct(){return this.Nd()}Nd(){return this.PL.ct}get uq(){return this.$rt()}$rt(){return this.PL.uq}get Qx(){return this.tht()}tht(){return this.PL.Qx}get lt(){return this.PL.lt}get Mi(){return this.PL.Mi}get Ti(){return this.PL.Ti}get Ma(){return this.qP()}qP(){return this.PL.Ma}get Sq(){return this.Aa()}Aa(){return this.PL.Sq}get oP(){return this.PL.oP}set oP(t){this.PL.oP=t}get lP(){return this.iht()}iht(){return this.PL.lP}get vP(){return this.PL.vP}set vP(t){this.PL.vP=t}get pP(){return this.mP()}mP(){return this.PL.pP}get AP(){return this.TP()}TP(){return this.PL.AP}get kP(){return this.EP()}EP(){return this.PL.kP}get xP(){return this.PP()}PP(){return this.PL.xP}get n5(){return this.eht()}eht(){return this.PL.n5}get _5(){return this.sht()}sht(){return this.PL._5}get nt(){return this.RP()}RP(){return this.nht}get Ql(){return this.Ett()}Ett(){return this.PL.Ql}get a9(){return this.PL.a9}get OP(){return this.PL.OP}set OP(t){this.PL.OP=t}get j7(){return this.PL.j7}get sP(){return this.PL.sP}get ML(){return this.PL.ML}get Rq(){return this.rht()}set Rq(t){this.hht(t)}rht(){return this.PL.Rq}hht(t){this.PL.Rq=t}get J7(){return this.PL.J7}set J7(t){this.oht(t)}oht(t){this.PL.J7=t}get T8(){return this.aht()}aht(){return this.PL.T8}hP(){return this.PL.hP()}QP(){return this.PL.QP()}jP(){this.PL.jP()}Oy(t,i,e){this.PL.Oy(t,i,e)}$W(t){this.PL.$W(t)}be(){this.PL.be()}we(){this.PL.we()}sI(t,i,e,s,n,r,h,o){return this.PL.sI(t,i,e,s,n,r,h,o)}Tq(t){return this.PL.Tq(t)}wq(){return this.PL.wq()}bq(t,i,e,s,n){return this.PL.bq(t,i,e,s,n)}rV(t){this.PL.rV(t)}Eq(){this.PL.Eq()}$Z(t){return this.PL.$Z(t)}V9(t){return this.PL.V9(t)}async Un(t){const i=await this.PL.Un(t);let e;return e=t.Km===O.AV?this.uht(i):this.cht(i),this.aq=e,e}async hr(){this.aq&&(await this.aq.zg(),this.aq=void 0),await this.PL.hr()}F8(){return this.PL.F8()}G7(){this.PL.G7()}X7(){this.PL.X7()}async zg(){this.Vo(),this.PL.mn(RN,this.dht),this.nht.OI=void 0,this.nht.kn(),this.aq&&(await this.aq.zg(),this.aq=void 0)}K7(){this.PL.K7()}fht(t){this.PL.mn(RN,this.dht),this.PL=t,this.nht.OI=t.nt,this.PL.wn(RN,this.dht)}iI(t){this.So(t)}constructor(t){super(),this.PL=void 0,this.aq=void 0,this.nht=new ai,this.dht=t=>this.iI(t),this.PL=t,this.nht.OI=t.nt,this.PL.wn(RN,this.dht)}},pn=class extends UU{get Zrt(){return this.PL}get hq(){return this.PL.hq}get d5(){return this.PL.d5}get WP(){return this.PL.WP}set WP(t){this.PL.WP=t}Y7(t){this.PL.Y7(t)}$P(){this.PL.$P()}constructor(t){super(t)}},VU=class extends pn{cht(t){const i=new FU(t);return i.Tst=this,i}uht(t){return new Ia(t)}},HU=class extends(BU(VU)){constructor(t){super(t)}},WU=class extends(ft(VU)){constructor(t){super(t)}},qs=class extends Ea{Yq(t){return t===at.Mk?new WU(super.Yq(t)):t===at.Bk?new HU(super.Yq(t)):void 0}async Dq(t){const i=t;await i.zg(),await super.Dq(i.Zrt)}};r();var qU=class{vht(){this.oa.tI()}kn(){s.removeEventListener("pageshow",this._ht)}constructor(t){this.oa=void 0,this._ht=t=>{t.persisted&&this.vht()},this.oa=t,s.addEventListener("pageshow",this._ht)}};r(),r(),r(),r(),r();var zU=class{ght(t,i,e){return Promise.resolve()}pht(t,i,e,s){let n=[];if(s){const r={TU:i.CO,kU:i.RO,EU:e.mht.EU};s.Km===nh.TTML?n=Fx(t,s,r,e.lQ):s.Km===nh.WEBVTT&&(n=ix(t,r,this.wht).L)}return n}hr(){}constructor(t){this.wht=void 0,this.wht=t}};r(),r(),r();var ki=function(t){return t.PR="vttc",t.yht="vsid",t.bht="iden",t.Aht="ctim",t.Sht="sttg",t.Tht="payl",t.kht="vtte",t.Eht="vtta",t}({}),GU=class t{static xht(i){return Boolean(t.Pht[i])}static PD(i){const e=[],s=ha.lD(new yu(i,new oi));for(const i of s)t.xht(i.Km)&&e.push(t.Pht[i.Km](i.lk));return e}static Iht(i){const e=ha.lD(i),s=ls(e,ki.yht),n=ls(e,ki.bht),r=ls(e,ki.Aht),h=ls(e,ki.Sht),o=ls(e,ki.Tht);return{Km:ki.PR,Cht:s?t.Rht(s):void 0,Dht:n?t.Nht(n):void 0,Bht:r?t.Mht(r):void 0,Lht:h?t.Oht(h):void 0,Fht:o?t.Uht(o):void 0}}static Rht(t){return{Km:ki.yht,Vht:t.sD()}}static Nht(t){return{Km:ki.bht,Dht:t.aD()}}static Mht(t){return{Km:ki.Aht,Hht:t.aD()}}static Oht(t){return{Km:ki.Sht,Wht:t.aD()}}static Uht(t){return{Km:ki.Tht,qht:t.aD()}}static zht(t){return{Km:ki.kht}}static Ght(t){return{Km:ki.Eht,Xht:t.aD()}}};GU.Pht={[ki.PR]:GU.Iht,[ki.kht]:GU.zht,[ki.Eht]:GU.Ght};var XU=class{ght(t,i,e){const s=new DataView(t.jht),n=Hn.PD(s),r=hh(n,t=>t.Km===ui.HC);return r&&(this.Qht=r.Z[0].$D.yD.jD),Promise.resolve()}pht(t,i,e){if(S(this.Qht))return[];const s=dh(t),n=Hn.PD(s),r=wT(n,ui.NR),h=wT(n,ui.WR);if(!r||0===r.Z.length||!h)return[];const o=function(t,i,e){const s=t.Z[0],n=s.KB?s.KB.KB.toNumber()/e:i.CO,r=[];for(const t of s.QB)r.push(...t.iM);return{Kht:n,iM:r}}(r,i,this.Qht),a=e.mht.EU;return function(t,i,e,s){const n=GU.PD(dh(i.lk)),r=t.iM,h=t.Kht+s,o=[];let a=0;for(let t=0;t<r.length;t++){const i=r[t],s=n[t];var u;const c=(null!=(u=i.ct)?u:0)/e;let d;s.Km===ki.PR&&(d=jU(s,a,c,h)),d&&o.push(d),a+=c}return o}(o,h,this.Qht,a)}hr(){this.Qht=NaN}constructor(){this.Qht=NaN}};function jU(t,i,e,s){if(!t.Fht)return void 0;const n=t.Bht?function(t){return Ku(t.Hht,new oi(0))}(t.Bht):i,r=s+n,h=r+e,o=t.Fht.qht;return new xE(r,h,o,!1)}r(),r();var Pc=function(t){return t[t.$z=0]="$z",t[t.Yht=1]="Yht",t[t.Jht=10]="Jht",t[t.Zht=11]="Zht",t[t.$ht=12]="$ht",t[t.tot=13]="tot",t[t.iot=14]="iot",t[t.eot=15]="eot",t[t.rot=20]="rot",t[t.hot=21]="hot",t[t.oot=22]="oot",t[t.aot=23]="aot",t[t.uot=24]="uot",t[t.cot=30]="cot",t[t.dot=31]="dot",t[t.lot=32]="lot",t[t.fot=33]="fot",t[t.vot=34]="vot",t[t._ot=35]="_ot",t[t.got=40]="got",t[t.pot=41]="pot",t[t.mot=42]="mot",t[t.wot=43]="wot",t[t.yot=44]="yot",t[t.bot=50]="bot",t[t.Aot=51]="Aot",t[t.Sot=52]="Sot",t[t.Tot=60]="Tot",t[t.kot=61]="kot",t[t.Eot=62]="Eot",t[t.xot=63]="xot",t[t.Pot=70]="Pot",t[t.Iot=71]="Iot",t[t.Cot=72]="Cot",t[t.Rot=73]="Rot",t[t.Dot=74]="Dot",t[t.Not=75]="Not",t[t.Bot=76]="Bot",t[t.Mot=77]="Mot",t[t.Lot=90]="Lot",t[t.Oot=91]="Oot",t}({});function QU(t,i){const e=i.YM((i,e)=>t.jM(i,e,!1,!1));return t.HM(e)}function KU(t,i){const e=i.Mn(t.OM()).YM((i,e)=>t.Cr(e));return t.HM(e)}r(),r(),r(),r();var jt=function(t){return t.Fot="Uot",t.Vot="Hot",t}({});r();var mn=class extends Qr{constructor(t,i,e){super("Wot"),this.Tn=void 0,this.An=void 0,this.qot=void 0,this.Tn=t,this.An=i,this.qot=e}},YU=class extends gp{constructor(){super("zot")}},JU=[d.ly,d._y,d.ey,d.iy,d.Sw],ZU=class extends Ne{get Got(){var t,i;return(null==(t=this.jot.Xot)?void 0:t.qot)||(null==(i=this.jot.Qot)?void 0:i.qot)}get Kot(){return this.Yot}set Jot(t){this.jot.Jot=t}get Jot(){return this.jot.Jot}get dk(){return this.Zot}$ot(t){this.Zot!==t&&(this.Zot=t,this.So(new YU))}get iat(){return this.Yot.Ht.iat}get lt(){return this.nq}async Tn(t){if(!this.eat&&!this.sat)return;const i=this.ww("zot");this.eat?(this.nat.Zg(),this.nat=new Zc,Cu(this.rat(this.nat.Yg),this.nat)):(this.oat.Qy(void 0),this.oat=new Ga),await i}get eat(){return"aat"===this.Zot}get sat(){return"uat"===this.Zot}get dat(){return"fat"===this.Zot}get vat(){return"_at"===this.Zot}async KP(t){if(this.dat||this.sat)for(0,this.nat.Zg();!this.eat&&!this.vat;)await this.ww("zot")}async hr(t){this.vat?(this.nq=void 0,this.$ot("aat")):await this.KP(t),this.jot.hr(),this.Yot.hr()}Qq(t){this.nq=t,this.$ot("_at"),this.So(new el(t))}gat(){this.pat(),this.W8.wn(d.py,this.bd),this.W8.wn([d.$w,d.Fw],this.Je),this.jot.wn(JU,this.Rs),this.mat.wn(jt.Fot,this.bd)}pat(){this.W8.mn(d.py,this.bd),this.W8.mn([d.$w,d.Fw],this.Je),this.jot.mn(JU,this.Rs),this.mat.mn(jt.Fot,this.bd)}async wat(t){this.pat(),this.yat.Zg(),await this.KP(null!=t?t:Pc.wot),this.jot.hr()}async bat(t){this.gat(),await this.Tn(null!=t?t:Pc.eot)}Aat(t,i,e){if(this.eat)for(const s of t.Yot.Sat())s.Tat<=e&&i<=s.Eat&&this.mat.xat.some(t=>t.o===s.Pat)&&this.Yot.Iat(s)}async kn(){this.Vo(),this.pat(),this.yat.Zg(),await this.KP(Pc.yot),this.jot.kn()}async rat(t){for(;;)try{fr(t),this.$ot("fat"),await this.jot.Cat(t),fr(t),this.$ot("uat"),await ua(this.oat.Yy,t)}catch(t){if(Ce(t))this.$ot("aat");else{const i=t instanceof as?t:new as(me.MEDIA_LOAD_ERROR,t.message,t);this.Qq(i)}break}}async Rat(t){fr(t),await this.KP(Pc.mot),this.jot.hr(),fr(t),await this.Tn(Pc.tot)}constructor(t,i,e,s,n){super(),this.Dat=void 0,this.mat=void 0,this.Yot=void 0,this.jot=void 0,this.W8=void 0,this.Zot=void 0,this.nq=void 0,this.oat=void 0,this.yat=void 0,this.nat=void 0,this.Je=void 0,this.bd=void 0,this.Dat=t,this.mat=i,this.Yot=e,this.jot=s,this.W8=n,this.Zot="aat",this.nq=void 0,this.oat=new Ga,this.yat=new Zc,this.nat=new Zc,this.Je=t=>{if(this.eat||this.vat)return;if(!zd.Ex&&this.jot.Nat(t.currentTime))return;this.yat.Zg(),this.yat=new Zc;Cu(this.Rat(this.yat.Yg),this.yat).catch(bu)},this.bd=to(()=>{if(this.sat){try{this.jot.Bat();if(this.jot.Mat())return}catch(t){if(!(t instanceof mn))throw t}this.Tn(Pc.iot)}},250),this.gat()}};r(),r();var $U=class t{Lat(t,i){return this.Oat(t,!1,i)}Fat(t,i){return this.Oat(t,!0,i)}async Oat(i,e,s){fr(s.Yg);const n=await this.Uat(i,e,s);return n.YT?t.Vat(n):this.Hat(n)}Hat(t){return t}static Vat(t){return t}Uat(t,i,e){var s;const n=new ro({Yu:t.Yu,fk:Bi.NT,_k:t.Wat?{Range:"bytes="+t.Wat[0]+"-"+(null!=(s=t.Wat[1])?s:"")}:void 0,Xk:t.Xk,Hk:Qe.GET,Km:q.Ak,zk:i?he.Ek:he.yk,Gk:this.qat,Wk:e.zat,qk:e.qk,Yg:e.Yg,Kk:e.Kk});return this.aV.vk(n)}constructor(t,i){this.aV=void 0,this.qat=void 0,this.aV=t,this.qat=i}};r(),r();var tV=class{Gat(t,i){const e=this.Xat**t,s=i*(1-e)+e*this.Fet;S(s)||(this.Fet=s,this.jat+=t)}Qat(){const t=1-this.Xat**this.jat;return this.Fet/t}constructor(t){this.Xat=void 0,this.Fet=0,this.jat=0,this.Xat=_.exp(_.log(.5)/t)}},iV=class{Gat(t,i){const e=8e3*i/t,s=t/1e3;this.Kat+=i,this.Yat.Gat(s,e),this.Jat.Gat(s,e)}Qat(){return this.Zat()?_.min(this.Yat.Qat(),this.Jat.Qat()):this.$at}Zat(){return this.Kat>=this.tut}constructor(t=2,i=5,e=128e3){this.Yat=void 0,this.Jat=void 0,this.Kat=0,this.tut=void 0,this.$at=tC,this.Yat=new tV(t),this.Jat=new tV(i),this.tut=e}},eV=class{get iut(){return this.eut.Qat()}get Zat(){return this.eut.Zat()}sut(t){const i=t.nut,e=this.rut?t.hut-t.aut:t.hut-t.uut,s=t.cut;!s&&i<this.lut||(s?this.eut.Gat(2*e,i):this.eut.Gat(e,i))}constructor(t,i){this.rut=void 0,this.eut=void 0,this.lut=void 0,this.rut=i,i&&GT(t)?t===at.Mk?(this.lut=5e3,this.eut=new iV(.05,1,0)):(this.lut=0,this.eut=new iV(.005,.1,0)):(this.lut=16e3,this.eut=new iV)}};r(),r(),r();var sV=class{transform(t,i){this.ef.write(t).catch(gs),i.enqueue(t)}flush(){this.ef.close().catch(gs)}constructor(t){this.ef=void 0,this.ef=t}},gt=class{fut(){return new nV($b(this.jht),this.vut,this._ut)}constructor(t,i,e){this.jht=void 0,this.vut=void 0,this._ut=void 0,this.jht=t,this.vut=i,this._ut=e}},nV=class t{get zT(){return this.gut}qT(t){return tA(this.gut,t)}Fy(){const[i,e]=eA(this.gut);return this.gut=i,new t(e,this.vut,this._ut)}mut(){const[i,e]=function(t){const i=new Yb,e=i.writable.getWriter(),s=new Yb(new sV(e));return t.pipeTo(s.writable).catch(t=>{e.abort(t).catch(gs)}),[s.readable,i.readable]}(this.gut);return this.gut=i,new t(e,this.vut,this._ut)}wut(t){return this.qT(t).then(t=>new gt(t,this.vut,this._ut))}constructor(t,i,e){this.gut=void 0,this.vut=void 0,this._ut=void 0,this.gut=t,this.vut=i,this._ut=e}};r();var rV=class extends Qr{constructor(t,i,e){super(i,e),this.yut=void 0,this.yut=t}},hV="Cache lookup failed.",oV=class extends Ne{async but(t,i){fr(i);const e=await this.Sut.Aut(t.Yu.Yu,t.Yu.Wat);if(fr(i),!e)throw new rV(t,hV);const s=new gt(e.buffer,e.byteLength,e.reference);return{yut:t.yut,Tut:{Km:We.wZ,lk:s},qot:t.qot,Yu:t.Yu}}async kut(t,i){fr(i);const e=await this.Sut.Aut(t.Yu,t.Wat);if(fr(i),!e)throw new rV(t,hV);const s=new gt(e.buffer,e.byteLength,e.reference);return{Km:We.wZ,lk:s}}kn(){this.Vo()}constructor(t){super(),this.Sut=void 0,this.Sut=t}};r();var aV=["vy","gy"],uV=class extends Ne{async but(t,i){let e;for(const s of this.Eut)try{return await s.but(t,i)}catch(t){sa(t),e=t}throw e}async kut(t,i){let e;for(const s of this.Eut)try{return await s.kut(t,i)}catch(t){sa(t),e=t}throw e}kn(){for(const t of this.Eut)t.mn(aV,this.Rs),t.kn()}constructor(t){super(),this.Eut=void 0,this.Eut=t;for(const t of this.Eut)t.wn(aV,this.Rs)}};function cV(t){return lo(t.xut)}function dV(t){return cV(t)?t.xut:t.Put}r(),r(),r(),r();var lV=class extends gp{constructor(t,i,e,s,n,r){super(t),this.Iut=void 0,this.FX=void 0,this.zB=void 0,this.sN=void 0,this.Gk=void 0,this.Iut=i,this.FX=e,this.zB=s,this.sN=n,this.Gk=r}},fV=class extends lV{constructor(t,i,e,s,n){super(d.ly,t,i,e,s,n)}};r(),r();var vV=class{constructor(t,i){this.Cut=void 0,this.Rut=void 0,this.Cut=t,this.Rut=i}},_V=class extends vV{get nut(){return this.Dut}start(){}transform(t,i){this.Dut+=t.byteLength,i.enqueue(t)}flush(){this.Nut(!1)}Zg(){this.Nut(!0)}Nut(t){this.Cut(this.Rut,zd.Mg(),this.nut,t)}constructor(...t){super(...t),this.Dut=0}},gV=class extends vV{get nut(){return this.Dut}start(){this.Rut=zd.Mg()}transform(t,i){this.Dut+=t.byteLength,this.But||this.Mut(t)&&this.Nut(!1),i.enqueue(t)}flush(){}Zg(){this.Nut(!0)}Mut(t){const i=this.Lut(t),e=this.Out(i);return Boolean(hh(e,pV))}Lut(t){return this.Fut&&void 0!==this.Uut?(this.Fut=fm([this.Fut,t]),new yu(dh(this.Fut),new oi(this.Uut))):(this.Fut=t,new yu(dh(t),new oi))}Out(t){const i=ha.fD(t.lk,t.$R,!0);return i.vD?(this.Fut=void 0,this.Uut=void 0):this.Uut=t.$R.ac,i.m}Nut(t){this.But||(this.Cut(this.Rut,zd.Mg(),this.nut,t),this.But=!0)}constructor(...t){super(...t),this.Dut=0,this.But=!1,this.Fut=void 0,this.Uut=void 0}};function pV(t){return t.Km===ui.WR}var mV=class{Vut(t){const i=t.pk?this.Hut:zd.Mg(),e=this.Wut(i),s=new Yb(e),n=t.zT().pipeTo(s.writable).then(()=>({rP:{nut:e.nut}}),t=>{throw e.Zg(),t});return this.qut.$g(n),s.readable}zut(t){const i=t.pk?this.Hut:zd.Mg(),e=t.qT(),s=e.then(t=>{const e=zd.Mg();return this.sut(i,e,t.byteLength,!1),{rP:{nut:t.byteLength}}},t=>{const e=zd.Mg();throw this.sut(i,e,0,!0),t});return this.qut.$g(s),e}get Gut(){return this.qut.Yy}constructor(t){this.Xut=void 0,this.qut=void 0,this.Hut=void 0,this.sut=void 0,this.Xut=t,this.qut=new Ga,this.sut=(t,i,e,s)=>{const n={uut:this.Hut,aut:t,hut:i,nut:e,cut:s};this.Xut.sut(n),this.Xut.Zat&&sc.Bg.vW(this.Xut.iut)},this.qut.Yy.catch(gs),this.Hut=zd.Mg()}},wV=class extends mV{Wut(t){return new _V(this.sut,t)}},yV=class extends mV{Wut(t){return new gV(this.sut,t)}};r();var bV=class extends lV{constructor(t,i,e,s,n,r,h){super(d._y,t,i,e,s,n),this.jut=void 0,this.uO=void 0,this.jut=r,this.uO=h}};r();var pt=class extends Qr{constructor(t,i,e){super("Error downloading segment "+dV(i),t),this.Qut=void 0,this.Kut=void 0,this.Yut=void 0,this.Qut=i.CO,this.Kut=i.RO,this.Yut=e}},AV=class extends Ne{Jut(){return this.rut?new yV(this.Xut):new wV(this.Xut)}async but(t,i){fr(i);const e=t.qot,s=t.Yu,n=t.yut,r=dV(n),h=e.qot?e.qot.JI:-1,o=function(t){const i=t.qot;let e;e=i===function(t){return t.xat.reduce((t,i)=>t.IW<i.IW?t:i)}(i.Zut)?rn(5*t.yut.ct):rn(1.2*t.yut.ct);return No(e,1e3,18e3)}(t);this.So(new fV(s,e.IW,r,h,e.Km));try{const t=this.Jut(),a=await this.$ut.Lat(s,{Kk:this.rut,zat:o,Yg:i}),u=await this.tct(a,a.YT,i,t);return Wr(this.ict(t.Gut,e,s,r,h,a)),{Tut:u,qot:e,yut:n,Yu:s}}catch(t){throw sa(t),new pt(t,n,e)}}async kut(t,i){fr(i);const e=!1,s=await this.$ut.Fat(t,{Kk:e,zat:1e4,Yg:i});return await this.tct(s,e,i)}async tct(t,i,e,s){if(i){const i=s?s.Vut(t):t.zT();return{Km:We.MT,lk:new nV(i)}}{const i=s?await s.zut(t):await t.qT(e);return{Km:We.wZ,lk:new gt(i)}}}async ict(t,i,e,s,n,r){try{const h=await t;this.So(new bV(e,i.IW,s,n,i.Km,r.dk,h.rP.nut))}catch(t){}}kn(){this.Vo()}constructor(t,i,e){super(),this.$ut=void 0,this.Xut=void 0,this.rut=void 0,this.$ut=t,this.Xut=i,this.rut=e}};r();var SV=.001,TV=class{get Fx(){return this.ect.Fx}get sct(){return this.ect.sct}get s$(){return this.ect.s$}get nct(){if(this.a4.AP<Lr.Qn)return!1;if(this.ect.An<=this.rct&&this.ect.hct())return!0;const t=this.ect.ZW;if(!t||0===t.V)return!1;const i=Uo.nL(this.W8.zx,1/0);return t.Mn(i).qM(this.ect.s$).eL>=this.Mz.YY}get rct(){const t=this.ect.ZW;let i;if(t&&t.V>0)i=t.An(0);else{i=this.W8.zx;const t=this.ect.s$,e=t.zM(i);e>=0&&(i=t.An(e))}const e=this.ect.kP.Tn(0);if(e>i){if(this.ect.Tn<=i&&this.ect.An>=i&&e>i+SV)throw new mn(i,e);i=e}return i=this.ect.act.LM(i),i}constructor(t,i,e,s){this.ect=void 0,this.W8=void 0,this.a4=void 0,this.Mz=void 0,this.ect=t,this.W8=i,this.a4=e,this.Mz=s}};r();var kV=class{get uct(){if(0===this.Wm.size)return this.cct;let t=Uo.nL(0,1/0);return t=t.Mn(this.cct),this.Wm.forEach(i=>{t=t.Mn(i)}),t}dct(t){return this.Wm.get(t.o)}lct(){let t=this.cct;return this.Wm.forEach(i=>{t=t.HM(i)}),t}fct(t){if(this.cct.Cr(t))return!0;let i=!1;return this.Wm.forEach(e=>{i=i||e.Cr(t)}),i}vct(t,i){const e=this.Wm.get(i.o);return!!e&&e.Cr(t)}GM(t,i){if(this.cct.GM(t,i))return!0;let e=!1;return this.Wm.forEach(s=>{e=e||s.GM(t,i)}),e}_ct(t,i){const e=this.Wm.get(i),s=e?e.HM(t):t;this.Wm.set(i,s),this.cct=this.cct.HM(t)}gct(t){this.Wm.forEach((i,e)=>{this.Wm.set(e,i.HM(t))}),this.cct=this.cct.HM(t)}pct(t){this.Wm.forEach((i,e)=>{this.Wm.set(e,i.Mn(t))}),this.cct=this.cct.Mn(t)}hr(){this.Wm.forEach((t,i)=>{this.Wm.set(i,Uo.rL())}),this.cct=Uo.rL()}constructor(){this.Wm=void 0,this.cct=void 0,this.Wm=Ba(),this.cct=Uo.rL()}},EV=class{get mct(){return this.wct}get s$(){return this.n$}yct(t){for(const i of this.bct){if(i.Tat>t)break;if(i.Eat>t)return i}}Act(t){for(const i of this.bct){if(i.Sct>t)break;if(i.Tct>=t)return i}}kct(t,i){const e=[];for(const s of this.bct){if(s.Tat>t)break;s.Eat>=i&&e.push(s)}return e}Sat(){return this.bct}Iat(t){const i=Uo.nL(t.Sct,t.Tct),e=i.OM();this.wct.pct(e),this.wct._ct(i,t.Pat),this.Ect(e);const s=tt(this.bct,i=>t.Tat<=i.Tat);if(s<0)this.bct.push(t);else{this.bct[s].Eat<=t.Eat?this.bct.splice(s,1,t):this.bct.splice(s,0,t)}}r$(t,i){this.n$._ct(t,i)}xct(t){this.n$.gct(t)}pct(t){this.wct.pct(t),this.n$.pct(t);const i=this.wct.lct();this.Ect(i)}Ect(t){this.bct=this.bct.filter(i=>t.jM(i.Sct,i.Tct)).map(i=>i.Pct&&!t.GM(i.Sct,i.Tct)?function(t,i){return{Pat:t.Pat,Tat:t.Tat,Eat:t.Eat,Sct:t.Sct,Tct:t.Tct,Pct:i}}(i,!1):i)}hr(){this.wct.hr(),this.n$.hr(),this.bct=[]}kn(){this.hr()}constructor(t){this.Ht=void 0,this.wct=void 0,this.n$=void 0,this.bct=[],this.Ht=t,this.wct=new kV,this.n$=new kV}};r(),r();var xV=class{get Jot(){return this.Ict}set Jot(t){this.Ict=t}get iat(){return this.Yot.Ht.iat}async Cct(t,i,e){let s;fr(e);const n=this.Yot.Act(t);s=n&&rs(n.Tct,t,1e-5)?n.Eat:t;const r=this.Rct(s),h=function(t){return PV.bind(void 0,t)}(s);let o=await this.jp.Dct(h,r,i,e);for(fr(e);o&&this.Nct(o.yut);){const t=DV(o.yut),s=o.qot;o=await this.jp.Dct(t,[s],i,e),fr(e)}if(!o)return void 0;if(!this.Bct(o.yut))return o;const a=this.Mct(o.yut);if(t<a.Tn)return await this.findFirstNonAppendedSegmentBeforeSegment(o,i,e,a);if(t>=a.An)return await this.findFirstNonAppendedSegmentAfterSegment(o,i,e);if(!o.qot.Lct(o.yut))throw new m("Fatal buffering error")}async findFirstNonAppendedSegmentAfterSegment(t,i,e){let s=t;do{const n=DV(s.yut),r=t.qot;s=await this.jp.Dct(n,[r],i,e),fr(e)}while(s&&this.Bct(s.yut));if(s)return s}async findFirstNonAppendedSegmentBeforeSegment(t,i,e,s){let n=t;do{const s=RV(n.yut),r=t.qot;n=await this.jp.Dct(s,[r],i,e),fr(e)}while(n&&this.Bct(n.yut));if(!n){0;const i=t.qot.Oct.Tn;throw new mn(i,s.Tn,t.qot)}return n}Fct(t){return this.Yot.mct.fct(t)}Uct(t){return this.Yot.kct(t.CO,t.RO)}Bct(t){const i=this.Uct(t);return i.length>0&&function(t,i){return function(t){let i=Uo.rL();for(const e of t)i=i.HM(Uo.nL(e.Tat,e.Eat));return i}(t).GM(i.CO,i.RO)}(i,t)&&i.every(NV)}Nct(t){return this.Yot.s$.GM(t.CO,t.RO)}Mct(t){const i=this.Uct(t);return{Tn:i[0].Sct,An:i[i.length-1].Tct}}Rct(t){const i=this.Vct(t);if(0===i.length){const t=this.Ict?this.Ict:this.Yot.Ht.xat;return[t[t.length-1]]}const e=i.filter(t=>{var i;return(null==(i=t.qot)?void 0:i.xst)&&!t.Hct});return e.length>0?e:[i[i.length-1]]}Vct(t){return(this.Ict?this.Ict:this.Yot.Ht.xat).filter(i=>!this.Yot.s$.vct(t,i))}constructor(t,i,e){this.Dat=void 0,this.Yot=void 0,this.jp=void 0,this.Ict=void 0,this.Dat=t,this.Yot=i,this.jp=e}};async function PV(t,i,e,s){const n=i.mht.Wct(t);if(n){if(i.qct(n)){return(await i.Gct(n,e,s)).zct(t)}return n}}async function IV(t,i,e,s){if(cV(t)){if(0===t.xut)return;const n=i.mht.Xct(t);if(!n)return;return(await i.Gct(n,e,s)).jct(t.xut-1)}return i.mht.Qct(t)}async function CV(t,i,e,s){if(cV(t)){const n=i.mht.Xct(t);if(!n)return;const r=await i.Gct(n,e,s);if(t.xut+1===r.V)return;return r.jct(t.xut+1)}return i.mht.Kct(t)}function RV(t){return IV.bind(void 0,t)}function DV(t){return CV.bind(void 0,t)}function NV(t){return t.Pct}r();var BV=class{async Dct(t,i,e,s){fr(s);const n=this.Yct(i,e);if(!n)return;const r=await t(n,this.Jct,s);if(!r)return;const h=n.Zct(r);return{qot:n,yut:r,Yu:h}}Yct(t,i){if(0===t.length)return;const e=this.tdt.$ct(t,this.idt?i:void 0,this.ect,this.Mz.jY);return this.idt||(this.idt=!0),e}constructor(t,i,e,s){this.tdt=void 0,this.ect=void 0,this.Mz=void 0,this.Jct=void 0,this.idt=void 0,this.tdt=t,this.ect=i,this.Mz=e,this.Jct=s,this.idt=!1}};r();var MV=class{async Dct(t,i,e,s){fr(s);const n=this.tdt.edt(i,e,this.ect);if(!n.length)return;let r;for(const i of n)try{fr(s);const e=await t(i,this.Jct,s);if(e){const t=i.Zct(e);if(await this.Sut.sdt(t.Yu,t.Wat))return{yut:e,qot:i,Yu:t}}}catch(t){sa(t),r=t}if(r)throw r}constructor(t,i,e,s){this.tdt=void 0,this.ect=void 0,this.Sut=void 0,this.Jct=void 0,this.tdt=t,this.ect=i,this.Sut=e,this.Jct=s}};function LV(t){return void 0!==t.vP}function OV(t,i){const e=t.Ti&&i.Ti,s=t.Mi&&i.Mi;if(e||s){if(e&&s)return t.Ti*t.Mi-i.Ti*i.Mi;if(e)return t.Ti-i.Ti;if(s)return t.Mi-i.Mi;return(t.Ti||1)*(t.Mi||1)-(i.Ti||1)*(i.Mi||1)}return 0}function FV(t,i){return OV(t,i)||function(t,i){return t.IW-i.IW}(t,i)}r(),r();var eh=class t{$ct(i,e,s,n){let r=t.sortByQuality(i);if(void 0!==this.ndt&&void 0===e&&i.length>1){const i=t.rdt(r,this.ndt);i&&(r=i)}const h=this.edt(r,e,s,n);return h.length?h[h.length-1]:r[0]}edt(i,e,s,n){var r;const h=t.sortByQuality(i),o={iut:void 0===n||this.hdt.Zat?this.hdt.iut:n,vP:LV(s)&&s.vP?s.vP:1,odt:s.Ti,adt:s.Mi,udt:null==(r=this.cdt)?void 0:r.restrictToPlayerSize};let a=h;for(const t of this.ddt)a=t(a,e,o,this.Cm,this.ldt);return a}static fdt(i){return t.sortByQuality(i)[0]}static vdt(i,e){var s;return e?t.fdt(null!=(s=t.rdt(i,e))?s:i):t.fdt(i)}static rdt(t,i){for(const e of i){const i=t.filter(t=>Tr(t.Bp,e));if(i.length>0)return i}}static sortByQuality(t){const i=[...t];return i.sort(FV),i}constructor(t,i,e,s,n,r){this.hdt=void 0,this.ddt=void 0,this.Cm=void 0,this.cdt=void 0,this.ndt=void 0,this.ldt=void 0,this.ddt=t,this.hdt=i,this.Cm=e,this.cdt=s,this.ndt=n,this.ldt=r}};r();var UV=(t,i,e,s,n)=>t.filter(t=>n.IZ(t)&&s.Pp(i,t));r();var VV=(t,i,e,s)=>void 0===i&&s.Rp?[t[t.length-1]]:t.filter(t=>function(t,i,e){const s=e.iut;if(s<=0)return!1;return.8*s>t.IW*e.vP}(t,0,e));r();var HV=(t,i,e,s,n)=>{const r=e.udt;if(void 0===r&&!s.Ks)return t;if(!1===r)return t;if(t.length>0&&t[0].Km!==at.Mk)return t;for(let i=t.length-1;i>=0;i--){const s=t[i];if(s.Mi===e.adt&&s.Ti===e.odt)return t.slice(0,i+1);if(s.Mi<e.adt||s.Ti<e.odt)return t.slice(0,i+2)}return[]};r();var WV=class{async Dct(t,i,e,s){let n;for(const r of this._dt)try{const n=await r.Dct(t,i,e,s);if(n)return n}catch(t){n=t}if(n)throw n}constructor(t){this._dt=void 0,this._dt=t}};r(),r();var qV=class{async gdt(t,i,e,s){let n;for(const r of this.pdt)try{return await r.gdt(t,i,e,s)}catch(t){sa(t),n=t}throw n}constructor(t){this.pdt=void 0,this.pdt=t}};r();var zV=class{async gdt(t,i,e,s){var n;const r=await this.aV.vk({Yu:t,fk:Bi.NT,_k:i?{Range:"bytes="+i[0]+"-"+(null!=(n=i[1])?n:"")}:void 0,Xk:e,Hk:Qe.GET,Km:q.yk,Yg:s});return await r.qT()}constructor(t){this.aV=void 0,this.aV=t}};r();var GV=class{async gdt(t,i,e,s){const n=await this.Sut.Aut(t,i);if(n)return n.buffer;if(i){const e=await this.Sut.Aut(t);if(e)return di(new j(e.buffer),i[0],i[1]).buffer}throw new rV({Yu:t,Wat:i,Xk:!1})}constructor(t){this.Sut=void 0,this.Sut=t}};r();var XV=1.05,jV=(t,i,e,s)=>{if(!1===e.udt)return t;if(s.dp)return t;const n=s.lp;var r;const h=(null!=(r=null==n?void 0:n.width)?r:e.odt)*XV;var o;const a=(null!=(o=null==n?void 0:n.height)?o:e.adt)*XV;for(let i=t.length-1;i>=0;i--){const e=t[i];if(e.Mi<=a&&e.Ti<=h)return t.slice(0,i+1)}return[]},QV=class{static jet(t,i,e,s,n,r,h,o,a,u){const c=function(t,i){return new qV([new GV(i),new zV(t)])}(r,h),d=new eh([UV],n,zd.Zs,o,a,u),l=new MV(d,i,h,c),f=new eh([VV,UV,HV,jV],n,zd.Zs,o,a,u),v=new BV(f,i,s,c),_=new WV([l,v]);return new xV(t,e,_)}};r(),r();var KV=class extends gp{constructor(t,i,e,s,n,r=0){super(d.ey),this.segmentStartTime=void 0,this.error=void 0,this.trackType=void 0,this.track=void 0,this.quality=void 0,this.retryCount=void 0,this.segmentStartTime=t,this.error=i,this.trackType=e,this.track=s,this.quality=n,this.retryCount=r}};r();var YV=class extends gp{constructor(t,i){super(d.Sw),this.track=void 0,this.segments=void 0,this.track=t,this.segments=i}};r();var JV=class extends gp{constructor(t,i,e,s,n,r=0,h=void 0){super(d.iy),this.segmentStartTime=void 0,this.error=void 0,this.trackType=void 0,this.track=void 0,this.quality=void 0,this.retryCount=void 0,this.statusCode=void 0,this.segmentStartTime=t,this.error=i,this.trackType=e,this.track=s,this.quality=n,this.retryCount=r,this.statusCode=h}},ZV=class extends Qr{constructor(t,i){super(i),this.mdt=void 0,this.mdt=t}},$V=[d.ly,d._y],tH=class extends Ne{get Xot(){return this.wdt}get Qot(){return this.ydt}set Jot(t){this.bdt.Jot=t}get Jot(){return this.bdt.Jot}get iat(){return this.Yot.Ht.iat}Adt(t){return!this.n3||!t||!Qo(this.n3.jht,t.jht)}Nat(t){if(!this.wdt)return!1;const i=this.wdt.yut,e=Uo.nL(i.CO,i.RO),s=this.Sdt.sct,n=s.zM(t);return n<0?e.Cr(t,SV):e.jM(t,s.An(n),!0,!0,SV)}async Cat(t){const i=this.Yot.Ht.xat;for(;;){let n;try{var e;fr(t),this.Bat();if(this.Mat())break;n=this.Tdt();const r=await this.Dct(n,t);if(void 0===r)break;if(this.wdt=r,!iH(this.wdt)){await this.kdt(this.wdt,t);continue}var s;if(this.ydt&&!IB(this.ydt.qot.Rrt,this.wdt.qot.Rrt)&&await this.ldt.RZ(this.wdt.qot),this.wdt.qot.NW&&(!this.Qot||(null==(e=this.ydt)?void 0:e.qot)!==this.wdt.qot))null==(s=this.pq)||s.VW(this.wdt.qot.NW);await this.Edt(n,this.wdt.yut,t),this.n3=await this.xdt(this.wdt.qot,t);const h=await this.but(this.wdt,t),o=this.Sdt.Fx,a=this.ydt;this.ydt=await this.Pdt(h,t);const u=this.Sdt.Fx;this.Idt(a,this.wdt,o,u,n),i.forEach(t=>t.Hct=!1),this.Cdt=0,this.Rdt=0}catch(e){if(e instanceof mn){this.G3(e.Tn,e.An,e.qot);continue}if(e instanceof ZV){let s=500;if(i.every(t=>t.Hct)){if(2===this.Cdt){const t=this.Sdt.Fx;if(this.Ddt(this.wdt),this.Idt(this.ydt,this.wdt,t,t,n),i.forEach(t=>t.Hct=!1),this.Rdt+=1,this.Cdt=0,this.Rdt===this.Ndt.maxRetries)throw new as(me.MEDIA_LOAD_ERROR,"The segments could not be loaded.",e);continue}this.Cdt++;const t=this.Ndt.minimumBackoff*2**(this.Cdt-1);s=_.min(t,this.Ndt.maximumBackoff)}await Ze(s,t);continue}throw this.Bdt=Uo.rL(),e}finally{this.wdt=void 0}}}Idt(t,i,e,s,n){const r=s.qM(e),h=i.qot,o=h.Mdt(i.yut),a=h.Lct(i.yut);let u=i.yut.CO,c=i.yut.RO;o&&(u=_.min(u,_.max(0,h.Oct.Tn-.05))),a&&(c=_.max(c,h.Oct.An));const d=Uo.nL(u,c).qM(s);if(0===r.V)return void this.Ldt(e,d,u,n);if(o||this.Bdt.V>0){const t=d.Mn(Uo.nL(u,r.Tn(0)));this.Odt(t)}const l=r.OM().Mn(Uo.nL(r.Tn(0),r.An(r.V-1)));if(this.Odt(l),a){const t=d.Mn(Uo.nL(r.An(r.V-1),c));this.Odt(t)}if(this.Bdt.V>0){const t=this.Bdt.qM(r);this.Odt(t),this.Bdt=Uo.rL()}const f=h.mht,v=cV(i.yut)?void 0:f.Qct(i.yut);var g;const p=null!=(g=null==t?void 0:t.yut)?g:this.Fdt(v)?v:void 0;if(p){const t=this.Yot.kct(p.CO,p.RO);if(t.length>0){const i=Uo.nL(t[t.length-1].Tct,r.Tn(0));this.Odt(i)}}const m=cV(i.yut)?void 0:f.Kct(i.yut);if(m&&this.Fdt(m)){const t=this.Yot.kct(m.CO,m.RO);if(t.length>0){const i=Uo.nL(r.An(r.V-1),t[0].Sct);this.Odt(i)}}}Ldt(t,i,e,s){let n=i;0===this.Bdt.V&&(this.Bdt=Uo.nL(t.An(t.V-1),e)),0===n.V&&void 0!==s&&(n=Uo.sL(s)),this.Bdt=this.Bdt.HM(n),this.Yot.xct(this.Bdt)}Fdt(t){return!!t&&this.Yot.kct(t.CO,t.RO).length>0}Odt(t){const i=t.qM(this.Sdt.Fx);for(let t=0;t<i.V;t++)i.Tn(t)!==i.An(t)&&this.Udt.r$(i.Tn(t),i.An(t))}Vdt(t,i){throw new ZV(t,i)}Bat(){if(this.Bdt.V>0)return;var t;const i=this.Sdt.sct.HM(null!=(t=this.Sdt.s$.MM().iL(this.Sdt.rct))?t:Uo.rL());this.Yot.pct(i),this.Hdt&&!this.Wdt(this.Hdt)&&(this.Hdt=void 0),this.So(new YV(this.Yot.Ht.iat,this.Yot.Sat()))}Mat(){return this.ydt&&this.ydt.qot.Lct(this.ydt.yut)?(this.Udt.F3(),!0):(this.Hdt&&this.Hdt.qot.Lct(this.Hdt.yut)&&this.Wdt(this.Hdt)&&this.Udt.F3(),!!this.Sdt.nct)}Wdt(t){return this.Yot.mct.GM(t.qdt,t.zdt)}Gdt(t,i,e){(!this.Hdt||this.Hdt.yut.RO<t.yut.RO)&&(this.Hdt=Y({},t,{qdt:i,zdt:e}))}Tdt(){const t=this.Sdt.rct;return t}async Dct(t,i){fr(i);const e=this.ydt?this.ydt.qot:void 0,s=await this.bdt.Cct(t,e,i);if(s)return s}async kdt(t,i){const e={stack:[],error:void 0,hasError:!1};try{const s=t.qot,n=s.mht,r=cV(t.yut)?n.Xct(t.yut):t.yut,h=s.jdt.Xdt(),o=n.Qdt(r);if(o&&o.getTime()<=h.getTime())return this.Vdt(Pc.oot,"Segment is not available.");const a=n.Kdt(r).getTime()-h.getTime();0;const u=Es(e,Zc.ep([i]),!1);await Promise.race([Ze(a,u.Yg),s.ww(jt.Fot,u.Yg)])}catch(t){e.error=t,e.hasError=!0}finally{Zs(e)}}async xdt(t,i,e){void 0===e&&(e=0),fr(i);const s=t.Ydt;if(!s)return this.n3;try{if(!t.Jdt){const e=await this.Zdt.kut(s,i);t.Jdt=e.lk}}catch(s){if(sa(s),Ei(s)){if(2===e)return t.Hct=!0,this.Vdt(Pc._ot,"Could not fetch the initializer.");const s=_.min(this.Ndt.minimumBackoff*2**e,this.Ndt.maximumBackoff);return await Ze(s,i),this.xdt(t,i,e+1)}throw new as(me.MEDIA_LOAD_ERROR,s.message,s)}fr(i);try{this.Adt(t.Jdt)&&await this.Udt.ght(t.Jdt,t,i)}catch(t){if(sa(t),Ei(t))return this.Vdt(Pc._ot,"Could not append the initializer.");throw new as(me.MEDIA_DECODE_ERROR,t.message,t)}return t.Jdt}async but(t,i){for(let e=0;;e++)try{return fr(i),await this.Zdt.but(t,i)}catch(s){if(sa(s),s instanceof pt){if(VA(s.cause)){const i=new pt(s,t.yut,t.qot);return this.$dt(i,e),this.tlt(i,e),this.Vdt(Pc.oot,"Timeout while fetching the segment.")}if(Qn(s.cause)&&e>=2)return t.qot.Hct=!0,this.$dt(s,e),this.tlt(s,e),this.Vdt(Pc.oot,"Could not fetch the segment.");this.tlt(s,e);const n=_.min(this.Ndt.minimumBackoff*2**e,this.Ndt.maximumBackoff);await Ze(n,i);continue}throw new as(me.MEDIA_LOAD_ERROR,s.message,s)}}async Edt(t,i,e){const s=this.Yot.kct(i.CO,i.RO),n=this.Sdt.sct.iL(t);let r=Uo.rL();for(const t of s){fr(e);const i=t.Sct,s=t.Tct,h=n&&n.jM(i,s)?_.max(i,n.An(0)):i,o=s;h<o&&(r=r.HM(Uo.nL(h,o)))}for(let t=0;t<r.V;t++)await this.Udt.ilt(r.Tn(t),r.An(t),e);this.Bat()}async Pdt(t,i){try{fr(i);const e=await this.Udt.elt(t.Tut,t.yut,t.qot,i);return this.slt(t,e.qdt,e.zdt),this.Gdt(t,e.qdt,e.zdt),t}catch(i){if(sa(i),Ei(i))return this.$dt(new pt(i,t.yut,t.qot),0),this.Vdt(Pc.oot,"Could not append the segment.");if(YD(i)&&this.Udt.iJ())return this.Vdt(Pc.uot,"Buffer is full. Could not reduce the buffer.");throw new as(me.MEDIA_DECODE_ERROR,i.message,i)}}slt(t,i,e){const s=t.qot,n=t.yut;this.Iat(n,s,i,e)}Iat(t,i,e,s){this.Yot.Iat({Pat:i.o,Tat:t.CO,Eat:t.RO,Sct:e,Tct:s,Pct:!0}),this.Udt.h$(e,s)}G3(t,i,e){const s=Uo.nL(t,i);e?this.Yot.r$(s,e.o):this.Yot.xct(s),this.Udt.r$(t,i)}Ddt(t){const i=Uo.nL(t.yut.CO,t.yut.RO);t.qot?this.Yot.r$(i,t.qot.o):this.Yot.xct(i)}$dt(t,i){const e=t.Qut,s=this.Yot.Ht.iat,n=this.Yot.Ht.Ca,r=t.Yut.qot&&t.Yut.qot.Ca,h=new KV(e,t.message,s,n,r,i);this.So(h)}tlt(t,i){const e=t.Qut,s=this.Yot.Ht.iat,n=this.Yot.Ht.Ca,r=t.Yut.qot&&t.Yut.qot.Ca,h=Qn(t.cause)?t.cause.uE.dk:void 0,o=new as(me.NETWORK_ERROR,t.message,t.cause),a=new JV(e,o,s,n,r,i,h);this.So(a)}hr(){this.n3=void 0,this.ydt=void 0}kn(){this.hr(),this.Hdt=void 0,this.Zdt.mn($V,this.Rs),this.Zdt.kn()}constructor(t,i,e,s,n,r,h,o,a){super(),this.Dat=void 0,this.Yot=void 0,this.Sdt=void 0,this.bdt=void 0,this.Zdt=void 0,this.Udt=void 0,this.ldt=void 0,this.Ndt=void 0,this.pq=void 0,this.wdt=void 0,this.n3=void 0,this.ydt=void 0,this.Hdt=void 0,this.Cdt=void 0,this.Rdt=void 0,this.Bdt=void 0,this.Dat=t,this.Yot=i,this.Sdt=e,this.bdt=s,this.Zdt=n,this.Udt=r,this.ldt=h,this.Ndt=o,this.pq=a,this.wdt=void 0,this.n3=void 0,this.ydt=void 0,this.Hdt=void 0,this.Cdt=0,this.Rdt=0,this.Bdt=Uo.rL(),this.Zdt.wn($V,this.Rs)}};function iH(t){const i=t.qot,e=i.mht,s=cV(t.yut)?e.Xct(t.yut):t.yut;return e.nlt(s,i.jdt.Xdt())}var eH=0,sH=class{jet(t){const i=eH++,e=this.ect.V3,s=new EV(t),n=this.rlt&&GT(e),r=new eV(e,n),h=new TV(this.ect,this.W8,this.a4,this.Mz),o=QV.jet(i,this.ect,s,this.Mz,r,this.aV,this.Sut,this.cdt,this.ndt,this.ldt),a=function(t){switch(t){case at.Bk:return $a.Bk;case at.Mk:return $a.Mk;case at.LT:return $a.LT;case at.Lk:return $a.Lk;default:return $a.yk}}(e),u=function(t,i,e,s){const n=new oV(s),r=new AV(t,i,e);return new uV([n,r])}(new $U(this.aV,a),r,n,this.Sut),c=new tH(i,s,h,o,u,this.ect,this.ldt,this.Ndt,this.pq);return new ZU(i,t.Zut,s,c,this.W8)}hlt(t,i){const e={iat:at.LT,Zut:i,xat:i.xat,Ca:t.Ca};return this.jet(e)}constructor(t,i,e,s,n,r,h,o,a,u,c,d){this.ect=void 0,this.W8=void 0,this.a4=void 0,this.aV=void 0,this.Mz=void 0,this.rlt=void 0,this.Sut=void 0,this.cdt=void 0,this.ndt=void 0,this.ldt=void 0,this.Ndt=void 0,this.pq=void 0,this.ect=t,this.W8=i,this.a4=e,this.aV=s,this.Mz=n,this.rlt=r,this.Sut=h,this.cdt=o,this.ndt=a,this.ldt=u,this.Ndt=c,this.pq=d}};r();var nH=class{IZ(t){return this.Wrt.IZ(t)}RZ(t){return this.Wrt.RZ(t)}constructor(t){this.Wrt=void 0,this.Wrt=t}},rH=class{IZ(t){return!0}RZ(t){return Promise.resolve(void 0)}};r(),r();var qa=class extends Oi{xa(){return new hH(this.$I.map(t=>t.Ca))}constructor(t,i){super(Te.RI),this.$I=void 0,this.Ht=void 0,this.$I=t||[],this.Ht=i}},hH=class extends gp{constructor(t){super("targetqualitychanged"),this.qualities=void 0,this.quality=void 0,this.qualities=t,this.quality=this.qualities.length>0?this.qualities[0]:void 0}};r();var oH=class extends Fs{xa(){return new aH(this.quality.Ca)}constructor(t){super(Te.QUALITY_UNAVAILABLE),this.quality=void 0,this.quality=t}},aH=class extends Eh{constructor(t){super("qualityunavailable"),this.quality=void 0,this.quality=t}};r();var uH=class extends gp{constructor(){super(Te.NO_QUALITY)}};function cH(t){return{IW:t.IW,Bp:t.Rrt,Mi:dH(t)?t.Mi:0,Km:dH(t)?at.Mk:at.Bk,Ti:dH(t)?t.Ti:0}}function dH(t){const i=t;return void 0!==i.Mi&&void 0!==i.Ti}r();var lH=0,fH=class extends Ne{get ZI(){return this.mat.olt.map(vH).filter(it)}ult(t){for(const i of t)i.wn("update",this.clt),this._O.gO(i)}dlt(t){if(!this._O.pO(t))return;t.ZU();const i=this.llt();if(this.flt&&Ct(this.flt,t)){const t=this.flt.filter(t=>t.xst);0===t.length&&i.length>0?this.tC=i:this.tC=t}else this.tC=i;this.So(new oH(t))}vlt(t){if(!this._O.pO(t))return;const i=this.llt();t.JU(),this.flt&&!function(t,i){return af(t,i,(t,i)=>t===i)}(this.flt,i)||(this.tC=this.llt())}llt(){return this._O.NI.filter(t=>t.xst)}get YI(){return this._lt}glt(t){this._lt=t.qot,this.So(t)}get Zut(){return this.mat}get Rt(){return this.We}set Rt(t){this.SO(t)}get Ca(){return this.hu||(this.hu=cs(this)),this.hu}get plt(){return this.wlt}set plt(t){this.wlt=t}get o(){return this.aS}get JI(){return this.yO}get Lt(){return this.I5}get bs(){return this.$b}get Th(){return this.bO}set Th(t){t!==this.bO&&(this.bO=t,this.So(new Xh(this)))}get Qk(){return this.Rt?"enabled":"disabled"}get tC(){return this.flt}set tC(t){let i;if(t){const e=this.YI?cH(this.YI):void 0;i=t.filter(t=>t.xst&&zd.Zs.Pp(e,cH(t)))}else i=this.llt();0!==i.length?(this.flt=t&&this._O.pO(t)?t:void 0,this.ylt=this.blt(this.flt),this.So(new qa(t,this))):this.So(new uH)}get Alt(){return this.ylt}blt(t){if(!t||0===t.length)return;const i=[];for(const e of this.xat)for(const s of t)s===e.qot&&s.xst&&i.push(e);return i}get $I(){return this._O}get xat(){return this.Slt}Tlt(t){this.klt.push(t),this.Slt.push(...t.xat);const i=t.xat.map(t=>t.qot);this.ult(i)}get iat(){return this.Elt}get xlt(){return this.klt}get Plt(){return this.xat.every(t=>t.Plt)}SO(t){this.We=t,this.wlt&&(t?this.wlt.JU(this):this.wlt.ZU(this))}Ilt(t){this.We=t,this.Clt!==t&&(this.Clt=t,this.So(new Rh(this)))}kn(){for(const t of this._O.NI)t.mn("update",this.clt);this._O.hr()}constructor(t,i,e="alternative"){super(),this._lt=void 0,this.mat=void 0,this.We=!1,this.hu=void 0,this.wlt=void 0,this.aS="",this.yO=void 0,this.I5=void 0,this.bO=void 0,this.$b=void 0,this.Clt=!1,this._O=new iE,this.Slt=[],this.flt=void 0,this.ylt=void 0,this.Elt=void 0,this.clt=()=>this.So(new Xh(this)),this.klt=[],this.mat=t,this.aS=String(lH++),this.yO=mi(),this.I5=e,this.$b=t.Tit,this.bO=t.Th,this.Elt=t.Km,this.Slt=t.xat.slice(),this.ult(i)}};function vH(t){if("urn:mpeg:dash:role:2011"===t.x8)return _H(t);if("urn:tva:metadata:cs:AudioPurposeCS:2007"===t.x8){if("1"===t.XE)return Je.GI;if("2"===t.XE)return Je.jI}}function _H(t){if(void 0!==(null==t?void 0:t.XE))switch(t.XE){case"caption":return Je.zI;case"sign":return Je.XI;case"description":return Je.GI;case"enhanced-audio-intelligibility":return Je.jI;default:return}}var gH=class t extends ms{get Rt(){for(const t of this.Z.NI)if(t.Qk!==xh.Nh)return!0;return!1}get ZW(){const t=this.W8.zx;return this.sct.iL(t,.01)}get act(){return Uo.hL()}get Fx(){var t;return null!=(t=this.Rlt&&this.Dlt.get(this.Rlt.JI))?t:Uo.rL()}get s$(){return this.Nlt?this.Nlt.Kot.s$.uct:Uo.rL()}get sct(){return QU(this.Fx,this.s$).VM(2*this.Blt)}get Tn(){return this.Mlt?this.Mlt.Oct.Tn:NaN}get An(){return this.Mlt?this.Mlt.Oct.An:NaN}get Qx(){const t=this.An;return!!t&&this.W8.zx>=t}get Blt(){var t;const i=this.Llt();if(!i)return.04;var e;return 1/(null!=(e=this.Rlt&&(null==i||null==(t=i.Olt)?void 0:t.rF()))?e:25)}get Mi(){return 0}get V3(){return at.LT}get vP(){return this.Rz}set vP(t){this.Rz=t}get kP(){if(!this.Rlt)return Uo.sL(0);const t=this.Flt(this.Rlt),i=null==t?void 0:t.Ult,e=null==t?void 0:t.Vlt;if(void 0===e||void 0===i)return Uo.sL(0);const s=_.max(i,this.W8.zx);return new Uo([e,s]).MM()}get Ti(){return 0}F3(){}hct(){return this.sct.Cr(this.An)}async elt(t,i,e,s){const n=t.Km===We.wZ?t.lk.jht:await t.lk.qT(s),r=this.findTrackForRepresentation(e),h=i.CO,o=i.RO,a=new Uo([h,o]);this.jrt(s);const u=this.pht(new j(n),i,e,r);for(const t of u)r.nV(t);var c;const d=null!=(c=this.Dlt.get(r.JI))?c:Uo.rL();return this.Dlt.set(r.JI,d.HM(a)),{qdt:h,zdt:o}}jrt(t){const i=KD(this.W8.zx,void 0,void 0,this.Fx,this.Mz.YY,this.Mz.zY);for(const[e,s]of i)Wr(this.ilt(e,s,t))}ght(t,i,e){return this.Hlt.ght(t,i,e)}pht(t,i,e,s){return this.Hlt.pht(t,i,e,s)}ilt(t,i,e){fr(e);const s=t,n=i;let r=new Uo([t,i]);for(const t of this.Z.NI){const i=[];for(const e of t.L.NI)e.CO>=s&&e.RO<=n?i.push(e):r=r.qM(new Uo([e.CO,e.RO]));for(const e of i)t.XU(e);const e=this.Dlt.get(t.JI);e&&this.Dlt.set(t.JI,e.qM(r))}return Promise.resolve()}r$(t,i){}h$(t,i){}iJ(){return!1}JU(t){if(t&&this.Rlt!==t){this.Rlt=t;for(const i of this.Z.NI)i!==t&&(i.Qk=xh.Nh);if(this.Hlt.hr(),this.Nlt&&(this.Nlt.kn(),this.Nlt=void 0),this.Rlt){const t=this.Flt(this.Rlt);this.Nlt=new sH(this,this.W8,this.W8,this.aV,this.Mz,!1,this.Sut,void 0,void 0,new rH,Rk,void 0).hlt(this.Rlt,t),this.Nlt.wn(hc.ma,this.Wlt),this.Nlt.Tn(Pc.Zht)}}}ZU(t){this.Rlt===t&&(t&&this.Rlt===t&&(this.Rlt=void 0),this.Nlt&&(this.Nlt.kn(),this.Nlt=void 0))}async Un(t){await this.hr(),this.Mlt=t,this.qlt(t)}zlt(t){const i=function(t){const i=t.xat&&t.xat.length>0&&t.xat[0],e=i&&sP(i.Rrt),s=sP(t.Rrt),n=t.lQ===Yy;return e||s||n?nh.TTML:t.lQ===Zy||oP(t.lQ,t.Rrt)?nh.WEBVTT:nh.DEFAULT}(t);if(!i)throw new m("Unknown TextTrack type for Representation");const e=t.Glt.concat(t.olt);return this.Xlt(function(t){return Ct(t.filter(t=>"urn:mpeg:dash:role:2011"===t.x8).map(t=>t.XE).filter(it),"caption")?us.WU:us.HU}(e),t.Th,t.Tit,!1,i,t,function(t){return t.filter(t=>"urn:mpeg:dash:role:2011"===t.x8).some(t=>function(t){return"forced-subtitle"===t||"forced_subtitle"===t}(t.XE))}(t.Glt),t.olt.map(_H).filter(it))}qlt(t){for(const i of t.jlt){const t=this.zlt(i);this.Qlt.set(t.JI,i),t.AP=dc.LOADED,this.tt(t)}}it(t){this.Qlt.delete(t.JI),super.it(t)}Xlt(t,i,e,s,n,r,h,o){var a;const u=hh(r.xat,t=>""!==t.o);var c,d;const l=null!=(d=null!=(c=null==u?void 0:u.o)?c:null==(a=r.o)?void 0:a.toString())?d:"";return this.iV.sI(t,l,i,e,s,n,h,o)}eV(t,i,e){const s=ht(t,i,e),n=this.Qlt.get(t.JI);void 0!==n&&(this.Qlt.set(s.JI,n),this.Qlt.delete(t.JI));const r=this.Dlt.get(t.JI);return void 0!==r&&(this.Dlt.set(s.JI,r),this.Dlt.delete(t.JI)),s}async hr(){await super.hr(),this.Nlt&&(await this.Nlt.hr(Pc.Aot),this.Nlt.mn(hc.ma,this.Wlt),this.Nlt=void 0),this.Mlt=void 0,this.Dlt.clear()}findTrackForRepresentation(i){for(const e of this.Z.NI){const s=this.Flt(e);if(s&&t.Klt(s)===i)return e}}Flt(t){return this.Qlt.get(t.JI)}Llt(){if(!this.Rlt)return;const i=this.Flt(this.Rlt);return i?t.Klt(i):void 0}static Klt(t){return t.xat&&t.xat.length>0?t.xat[0]:void 0}kn(){for(const t of this.Z.NI)this.iV.rV(t);return super.kn()}constructor(t,i,e,s,n,r){super(r),this.Rz=1,this.Nlt=void 0,this.Dlt=re(),this.Rlt=void 0,this.Mlt=void 0,this.Qlt=re(),this.aV=void 0,this.Sut=void 0,this.W8=void 0,this.Mz=void 0,this.Hlt=void 0,this.Wlt=t=>{0},this.W8=t,this.aV=i,this.Mz=e,this.Hlt=s,this.Sut=n}},pH=class{get nt(){return this.Gl}async oV(t){if(t.Km!==at.LT)return;const i=function(t,i,e){return sP(i)||t===Yy||t===Zy?new zU(e):oP(t,i)?new XU:void 0}(t.lQ,t.Rrt,this.wht);if(i){const e=this.Ylt(i);return this.Jlt(e),await e.Un(t),e}}Ylt(t){return new gH(this.W8,this.aV,this.Mz,t,this.Sut,this.iV)}Jlt(t){this.Zlt.push(t),this.Gl.qW(t.Z)}async hr(){for(const t of this.Zlt.slice())await t.hr();Wt(this.Zlt),this.Gl.hr()}async kn(){for(const t of this.Zlt)await t.kn();Wt(this.Zlt),this.Gl.kn()}constructor(t,i,e,s,n,r){this.Zlt=[],this.Gl=new Tu([]),this.iV=void 0,this.wht=void 0,this.W8=void 0,this.aV=void 0,this.Mz=void 0,this.Sut=void 0,this.W8=t,this.aV=i,this.Mz=e,this.Sut=s,this.iV=n,this.wht=r}};r();var mH=class extends gp{constructor(t){super(d.zw),this.error=void 0,this.error=t}};r();var Lh=function(t){return t.AV="static",t.SV="dynamic",t}({});r(),r();var wH=function(t){return t.$lt="tft",t}({}),yH=class extends gp{constructor(){super(wH.$lt)}};r(),r();var bH=class extends gp{constructor(t,i){super(d.Yw),this.representation=void 0,this.previousRepresentation=void 0,this.representation=t,this.previousRepresentation=i}};r(),r(),r();var kn=function(t){return t[t.ift=0]="ift",t[t.eft=1]="eft",t[t.sft=2]="sft",t[t.nft=3]="nft",t[t.rft=4]="rft",t[t.hft=5]="hft",t}({}),Vr=function(t){return t[t.oft=0]="oft",t[t.aft=1]="aft",t[t.uft=2]="uft",t[t.cft=3]="cft",t}({});function AH(t,i,e){return e===kn.ift?e:i!==Vr.oft&&i!==Vr.aft||e!==kn.eft&&e!==kn.sft?t?i===Vr.uft?kn.rft:i===Vr.cft?kn.nft:kn.ift:kn.hft:kn.sft}function SH(t,i,e,s){const n={byte:e};let r=kn.eft;const h=[],o=31&kr(i,n,s);n.byte+=1;for(let e=0;e<o;e+=1){const o=kr(i,n,s),a=4&o,u=3&o;r=AH(Boolean(a),u,r);const c=kr(i,n,s),d=kr(i,n,s);h.push({dft:t,zB:-1,lft:!e,fft:Boolean(a),Km:u,vft:r,_ft:c,gft:d})}return h}function TH(t,i,e){const s=kr(t,i,e);if(!S(s))return String.fromCharCode(s)}function kH(t){const i=t.a1,e={byte:t.h1},s=t.o1,n=kr(i,e,s);if(255===n&&(e.byte+=1),181!==n)return;const r=vB(i,e);if(47!==r&&49!==r)return;if(49===r){const t=function(t,i,e){let s="",n=e;for(;n>0;)n-=1,s+=TH(t,i);return s}(i,e,4);if("GA94"!==t)return}if(3!==kr(i,e,s))return;47===r&&(e.byte+=1);const h=t;return h.pft=e.byte,h}function EH(t){return 4===t.s1}function xH(t){const i=t.filter(EH).map(kH).filter(it),e=[];for(const t of i)e.push(...SH(t.e1,t.a1,t.pft,t.o1));return e}r();var PH="und";function IH(t){if(t===PH)return;const i=t.toLowerCase();for(const t of CH)if(t[1]===i||t[2]===i||t["2T"]===i||t["2B"]===i||t[3]===i)return t}var CH=[{l:"Abkhaz",bh:"\u0410\u04a7\u0441\u0443\u0430",1:"ab",2:"abk","2T":"abk","2B":"abk",3:"abk"},{l:"Afar",bh:"Afaraf",1:"aa",2:"aar","2T":"aar","2B":"aar",3:"aar"},{l:"Afrikaans",bh:"Afrikaans",1:"af",2:"afr","2T":"afr","2B":"afr",3:"afr"},{l:"Akan",bh:"Akan",1:"ak",2:"aka","2T":"aka","2B":"aka",3:"aka"},{l:"Albanian",bh:"Shqip",1:"sq",2:"sqi","2T":"sqi","2B":"alb",3:"sqi"},{l:"Amharic",bh:"\u12a0\u121b\u122d\u129b",1:"am",2:"amh","2T":"amh","2B":"amh",3:"amh"},{l:"Arabic",bh:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629",1:"ar",2:"ara","2T":"ara","2B":"ara",3:"ara"},{l:"Aragonese",bh:"Aragon\xe9s",1:"an",2:"arg","2T":"arg","2B":"arg",3:"arg"},{l:"Armenian",bh:"\u0540\u0561\u0575\u0565\u0580\u0565\u0576",1:"hy",2:"hye","2T":"hye","2B":"arm",3:"hye"},{l:"Assamese",bh:"\u0985\u09b8\u09ae\u09c0\u09af\u09bc\u09be",1:"as",2:"asm","2T":"asm","2B":"asm",3:"asm"},{l:"Avaric",bh:"\u0410\u0432\u0430\u0440",1:"av",2:"ava","2T":"ava","2B":"ava",3:"ava"},{l:"Avestan",bh:"avesta",1:"ae",2:"ave","2T":"ave","2B":"ave",3:"ave"},{l:"Aymara",bh:"Aymar",1:"ay",2:"aym","2T":"aym","2B":"aym",3:"aym"},{l:"Azerbaijani",bh:"Az\u0259rbaycanca",1:"az",2:"aze","2T":"aze","2B":"aze",3:"aze"},{l:"Bambara",bh:"Bamanankan",1:"bm",2:"bam","2T":"bam","2B":"bam",3:"bam"},{l:"Bashkir",bh:"\u0411\u0430\u0448\u04a1\u043e\u0440\u0442\u0441\u0430",1:"ba",2:"bak","2T":"bak","2B":"bak",3:"bak"},{l:"Basque",bh:"Euskara",1:"eu",2:"eus","2T":"eus","2B":"baq",3:"eus"},{l:"Belarusian",bh:"\u0411\u0435\u043b\u0430\u0440\u0443\u0441\u043a\u0430\u044f",1:"be",2:"bel","2T":"bel","2B":"bel",3:"bel"},{l:"Bengali",bh:"\u09ac\u09be\u0982\u09b2\u09be",1:"bn",2:"ben","2T":"ben","2B":"ben",3:"ben"},{l:"Bihari",bh:"\u092d\u094b\u091c\u092a\u0941\u0930\u0940",1:"bh",2:"bih","2T":"bih","2B":"bih",3:"bih"},{l:"Bislama",bh:"Bislama",1:"bi",2:"bis","2T":"bis","2B":"bis",3:"bis"},{l:"Bosnian",bh:"Bosanski",1:"bs",2:"bos","2T":"bos","2B":"bos",3:"bos"},{l:"Breton",bh:"Brezhoneg",1:"br",2:"bre","2T":"bre","2B":"bre",3:"bre"},{l:"Bulgarian",bh:"\u0411\u044a\u043b\u0433\u0430\u0440\u0441\u043a\u0438",1:"bg",2:"bul","2T":"bul","2B":"bul",3:"bul"},{l:"Burmese",bh:"\u1019\u103c\u1014\u103a\u1019\u102c\u1018\u102c\u101e\u102c",1:"my",2:"mya","2T":"mya","2B":"bur",3:"mya"},{l:"Catalan",bh:"Catal\xe0",1:"ca",2:"cat","2T":"cat","2B":"cat",3:"cat"},{l:"Chamorro",bh:"Chamoru",1:"ch",2:"cha","2T":"cha","2B":"cha",3:"cha"},{l:"Chechen",bh:"\u041d\u043e\u0445\u0447\u0438\u0439\u043d",1:"ce",2:"che","2T":"che","2B":"che",3:"che"},{l:"Chichewa",bh:"Chichewa",1:"ny",2:"nya","2T":"nya","2B":"nya",3:"nya"},{l:"Chinese",bh:"\u4e2d\u6587",1:"zh",2:"zho","2T":"zho","2B":"chi",3:"zho"},{l:"Chuvash",bh:"\u0427\u04d1\u0432\u0430\u0448\u043b\u0430",1:"cv",2:"chv","2T":"chv","2B":"chv",3:"chv"},{l:"Cornish",bh:"Kernewek",1:"kw",2:"cor","2T":"cor","2B":"cor",3:"cor"},{l:"Corsican",bh:"Corsu",1:"co",2:"cos","2T":"cos","2B":"cos",3:"cos"},{l:"Cree",bh:"\u14c0\u1426\u1403\u152d\u140d\u140f\u1423",1:"cr",2:"cre","2T":"cre","2B":"cre",3:"cre"},{l:"Croatian",bh:"Hrvatski",1:"hr",2:"hrv","2T":"hrv","2B":"hrv",3:"hrv"},{l:"Czech",bh:"\u010ce\u0161tina",1:"cs",2:"ces","2T":"ces","2B":"cze",3:"ces"},{l:"Danish",bh:"Dansk",1:"da",2:"dan","2T":"dan","2B":"dan",3:"dan"},{l:"Divehi",bh:"Divehi",1:"dv",2:"div","2T":"div","2B":"div",3:"div"},{l:"Dutch",bh:"Nederlands",1:"nl",2:"nld","2T":"nld","2B":"dut",3:"nld"},{l:"Dzongkha",bh:"\u0f62\u0fab\u0f7c\u0f44\u0f0b\u0f41",1:"dz",2:"dzo","2T":"dzo","2B":"dzo",3:"dzo"},{l:"English",bh:"English",1:"en",2:"eng","2T":"eng","2B":"eng",3:"eng"},{l:"Esperanto",bh:"Esperanto",1:"eo",2:"epo","2T":"epo","2B":"epo",3:"epo"},{l:"Estonian",bh:"Eesti",1:"et",2:"est","2T":"est","2B":"est",3:"est"},{l:"Ewe",bh:"E\u028begbe",1:"ee",2:"ewe","2T":"ewe","2B":"ewe",3:"ewe"},{l:"Faroese",bh:"F\xf8royskt",1:"fo",2:"fao","2T":"fao","2B":"fao",3:"fao"},{l:"Fijian",bh:"Na Vosa Vaka-Viti",1:"fj",2:"fij","2T":"fij","2B":"fij",3:"fij"},{l:"Finnish",bh:"Suomi",1:"fi",2:"fin","2T":"fin","2B":"fin",3:"fin"},{l:"French",bh:"Fran\xe7ais",1:"fr",2:"fra","2T":"fra","2B":"fre",3:"fra"},{l:"Fula",bh:"Fulfulde",1:"ff",2:"ful","2T":"ful","2B":"ful",3:"ful"},{l:"Galician",bh:"Galego",1:"gl",2:"glg","2T":"glg","2B":"glg",3:"glg"},{l:"Georgian",bh:"\u10e5\u10d0\u10e0\u10d7\u10e3\u10da\u10d8",1:"ka",2:"kat","2T":"kat","2B":"geo",3:"kat"},{l:"German",bh:"Deutsch",1:"de",2:"deu","2T":"deu","2B":"ger",3:"deu"},{l:"Greek",bh:"\u0395\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ac",1:"el",2:"ell","2T":"ell","2B":"gre",3:"ell"},{l:"Guaran\xed",bh:"Ava\xf1e'\u1ebd",1:"gn",2:"grn","2T":"grn","2B":"grn",3:"grn"},{l:"Gujarati",bh:"\u0a97\u0ac1\u0a9c\u0ab0\u0abe\u0aa4\u0ac0",1:"gu",2:"guj","2T":"guj","2B":"guj",3:"guj"},{l:"Haitian",bh:"Krey\xf2l Ayisyen",1:"ht",2:"hat","2T":"hat","2B":"hat",3:"hat"},{l:"Hausa",bh:"\u0647\u064e\u0648\u064f\u0633\u064e",1:"ha",2:"hau","2T":"hau","2B":"hau",3:"hau"},{l:"Hebrew",bh:"\u05e2\u05d1\u05e8\u05d9\u05ea",1:"he",2:"heb","2T":"heb","2B":"heb",3:"heb"},{l:"Herero",bh:"Otjiherero",1:"hz",2:"her","2T":"her","2B":"her",3:"her"},{l:"Hindi",bh:"\u0939\u093f\u0928\u094d\u0926\u0940",1:"hi",2:"hin","2T":"hin","2B":"hin",3:"hin"},{l:"Hiri Motu",bh:"Hiri Motu",1:"ho",2:"hmo","2T":"hmo","2B":"hmo",3:"hmo"},{l:"Hungarian",bh:"Magyar",1:"hu",2:"hun","2T":"hun","2B":"hun",3:"hun"},{l:"Interlingua",bh:"Interlingua",1:"ia",2:"ina","2T":"ina","2B":"ina",3:"ina"},{l:"Indonesian",bh:"Bahasa Indonesia",1:"id",2:"ind","2T":"ind","2B":"ind",3:"ind"},{l:"Interlingue",bh:"Interlingue",1:"ie",2:"ile","2T":"ile","2B":"ile",3:"ile"},{l:"Irish",bh:"Gaeilge",1:"ga",2:"gle","2T":"gle","2B":"gle",3:"gle"},{l:"Igbo",bh:"Igbo",1:"ig",2:"ibo","2T":"ibo","2B":"ibo",3:"ibo"},{l:"Inupiaq",bh:"I\xf1upiak",1:"ik",2:"ipk","2T":"ipk","2B":"ipk",3:"ipk"},{l:"Ido",bh:"Ido",1:"io",2:"ido","2T":"ido","2B":"ido",3:"ido"},{l:"Icelandic",bh:"\xcdslenska",1:"is",2:"isl","2T":"isl","2B":"ice",3:"isl"},{l:"Italian",bh:"Italiano",1:"it",2:"ita","2T":"ita","2B":"ita",3:"ita"},{l:"Inuktitut",bh:"\u1403\u14c4\u1483\u144e\u1450\u1466",1:"iu",2:"iku","2T":"iku","2B":"iku",3:"iku"},{l:"Japanese",bh:"\u65e5\u672c\u8a9e",1:"ja",2:"jpn","2T":"jpn","2B":"jpn",3:"jpn"},{l:"Javanese",bh:"Basa Jawa",1:"jv",2:"jav","2T":"jav","2B":"jav",3:"jav"},{l:"Kalaallisut",bh:"Kalaallisut",1:"kl",2:"kal","2T":"kal","2B":"kal",3:"kal"},{l:"Kannada",bh:"\u0c95\u0ca8\u0ccd\u0ca8\u0ca1",1:"kn",2:"kan","2T":"kan","2B":"kan",3:"kan"},{l:"Kanuri",bh:"Kanuri",1:"kr",2:"kau","2T":"kau","2B":"kau",3:"kau"},{l:"Kashmiri",bh:"\u0643\u0634\u0645\u064a\u0631\u064a",1:"ks",2:"kas","2T":"kas","2B":"kas",3:"kas"},{l:"Kazakh",bh:"\u049a\u0430\u0437\u0430\u049b\u0448\u0430",1:"kk",2:"kaz","2T":"kaz","2B":"kaz",3:"kaz"},{l:"Khmer",bh:"\u1797\u17b6\u179f\u17b6\u1781\u17d2\u1798\u17c2\u179a",1:"km",2:"khm","2T":"khm","2B":"khm",3:"khm"},{l:"Kikuyu",bh:"G\u0129k\u0169y\u0169",1:"ki",2:"kik","2T":"kik","2B":"kik",3:"kik"},{l:"Kinyarwanda",bh:"Kinyarwanda",1:"rw",2:"kin","2T":"kin","2B":"kin",3:"kin"},{l:"Kyrgyz",bh:"\u041a\u044b\u0440\u0433\u044b\u0437\u0447\u0430",1:"ky",2:"kir","2T":"kir","2B":"kir",3:"kir"},{l:"Komi",bh:"\u041a\u043e\u043c\u0438",1:"kv",2:"kom","2T":"kom","2B":"kom",3:"kom"},{l:"Kongo",bh:"Kongo",1:"kg",2:"kon","2T":"kon","2B":"kon",3:"kon"},{l:"Korean",bh:"\ud55c\uad6d\uc5b4",1:"ko",2:"kor","2T":"kor","2B":"kor",3:"kor"},{l:"Kurdish",bh:"Kurd\xee",1:"ku",2:"kur","2T":"kur","2B":"kur",3:"kur"},{l:"Kwanyama",bh:"Kuanyama",1:"kj",2:"kua","2T":"kua","2B":"kua",3:"kua"},{l:"Latin",bh:"Latina",1:"la",2:"lat","2T":"lat","2B":"lat",3:"lat"},{l:"Luxembourgish",bh:"L\xebtzebuergesch",1:"lb",2:"ltz","2T":"ltz","2B":"ltz",3:"ltz"},{l:"Ganda",bh:"Luganda",1:"lg",2:"lug","2T":"lug","2B":"lug",3:"lug"},{l:"Limburgish",bh:"Limburgs",1:"li",2:"lim","2T":"lim","2B":"lim",3:"lim"},{l:"Lingala",bh:"Ling\xe1la",1:"ln",2:"lin","2T":"lin","2B":"lin",3:"lin"},{l:"Lao",bh:"\u0e9e\u0eb2\u0eaa\u0eb2\u0ea5\u0eb2\u0ea7",1:"lo",2:"lao","2T":"lao","2B":"lao",3:"lao"},{l:"Lithuanian",bh:"Lietuvi\u0173",1:"lt",2:"lit","2T":"lit","2B":"lit",3:"lit"},{l:"Luba-Katanga",bh:"Tshiluba",1:"lu",2:"lub","2T":"lub","2B":"lub",3:"lub"},{l:"Latvian",bh:"Latvie\u0161u",1:"lv",2:"lav","2T":"lav","2B":"lav",3:"lav"},{l:"Manx",bh:"Gaelg",1:"gv",2:"glv","2T":"glv","2B":"glv",3:"glv"},{l:"Macedonian",bh:"\u041c\u0430\u043a\u0435\u0434\u043e\u043d\u0441\u043a\u0438",1:"mk",2:"mkd","2T":"mkd","2B":"mac",3:"mkd"},{l:"Malagasy",bh:"Malagasy",1:"mg",2:"mlg","2T":"mlg","2B":"mlg",3:"mlg"},{l:"Malay",bh:"Bahasa Melayu",1:"ms",2:"msa","2T":"msa","2B":"may",3:"msa"},{l:"Malayalam",bh:"\u0d2e\u0d32\u0d2f\u0d3e\u0d33\u0d02",1:"ml",2:"mal","2T":"mal","2B":"mal",3:"mal"},{l:"Maltese",bh:"Malti",1:"mt",2:"mlt","2T":"mlt","2B":"mlt",3:"mlt"},{l:"M\u0101ori",bh:"M\u0101ori",1:"mi",2:"mri","2T":"mri","2B":"mao",3:"mri"},{l:"Marathi",bh:"\u092e\u0930\u093e\u0920\u0940",1:"mr",2:"mar","2T":"mar","2B":"mar",3:"mar"},{l:"Marshallese",bh:"Kajin M\u0327aje\u013c",1:"mh",2:"mah","2T":"mah","2B":"mah",3:"mah"},{l:"Mongolian",bh:"\u041c\u043e\u043d\u0433\u043e\u043b",1:"mn",2:"mon","2T":"mon","2B":"mon",3:"mon"},{l:"Nauru",bh:"Dorerin Naoero",1:"na",2:"nau","2T":"nau","2B":"nau",3:"nau"},{l:"Navajo",bh:"Din\xe9 Bizaad",1:"nv",2:"nav","2T":"nav","2B":"nav",3:"nav"},{l:"Northern Ndebele",bh:"isiNdebele",1:"nd",2:"nde","2T":"nde","2B":"nde",3:"nde"},{l:"Nepali",bh:"\u0928\u0947\u092a\u093e\u0932\u0940",1:"ne",2:"nep","2T":"nep","2B":"nep",3:"nep"},{l:"Ndonga",bh:"Owambo",1:"ng",2:"ndo","2T":"ndo","2B":"ndo",3:"ndo"},{l:"Norwegian Bokm\xe5l",bh:"Norsk (Bokm\xe5l)",1:"nb",2:"nob","2T":"nob","2B":"nob",3:"nob"},{l:"Norwegian Nynorsk",bh:"Norsk (Nynorsk)",1:"nn",2:"nno","2T":"nno","2B":"nno",3:"nno"},{l:"Norwegian",bh:"Norsk",1:"no",2:"nor","2T":"nor","2B":"nor",3:"nor"},{l:"Nuosu",bh:"\ua188\ua320\ua4bf Nuosuhxop",1:"ii",2:"iii","2T":"iii","2B":"iii",3:"iii"},{l:"Southern Ndebele",bh:"isiNdebele",1:"nr",2:"nbl","2T":"nbl","2B":"nbl",3:"nbl"},{l:"Occitan",bh:"Occitan",1:"oc",2:"oci","2T":"oci","2B":"oci",3:"oci"},{l:"Ojibwe",bh:"\u140a\u14c2\u1511\u14c8\u142f\u14a7\u140e\u14d0",1:"oj",2:"oji","2T":"oji","2B":"oji",3:"oji"},{l:"Old Church Slavonic",bh:"\u0421\u043b\u043e\u0432\u0463\u0301\u043d\u044c\u0441\u043a\u044a",1:"cu",2:"chu","2T":"chu","2B":"chu",3:"chu"},{l:"Oromo",bh:"Afaan Oromoo",1:"om",2:"orm","2T":"orm","2B":"orm",3:"orm"},{l:"Oriya",bh:"\u0b13\u0b21\u0b3f\u0b3c\u0b06",1:"or",2:"ori","2T":"ori","2B":"ori",3:"ori"},{l:"Ossetian",bh:"\u0418\u0440\u043e\u043d \xe6\u0432\u0437\u0430\u0433",1:"os",2:"oss","2T":"oss","2B":"oss",3:"oss"},{l:"Panjabi",bh:"\u0a2a\u0a70\u0a1c\u0a3e\u0a2c\u0a40",1:"pa",2:"pan","2T":"pan","2B":"pan",3:"pan"},{l:"P\u0101li",bh:"\u092a\u093e\u0934\u093f",1:"pi",2:"pli","2T":"pli","2B":"pli",3:"pli"},{l:"Persian",bh:"\u0641\u0627\u0631\u0633\u06cc",1:"fa",2:"fas","2T":"fas","2B":"per",3:"fas"},{l:"Polish",bh:"Polski",1:"pl",2:"pol","2T":"pol","2B":"pol",3:"pol"},{l:"Pashto",bh:"\u067e\u069a\u062a\u0648",1:"ps",2:"pus","2T":"pus","2B":"pus",3:"pus"},{l:"Portuguese",bh:"Portugu\xeas",1:"pt",2:"por","2T":"por","2B":"por",3:"por"},{l:"Quechua",bh:"Runa Simi",1:"qu",2:"que","2T":"que","2B":"que",3:"que"},{l:"Romansh",bh:"Rumantsch",1:"rm",2:"roh","2T":"roh","2B":"roh",3:"roh"},{l:"Kirundi",bh:"Kirundi",1:"rn",2:"run","2T":"run","2B":"run",3:"run"},{l:"Romanian",bh:"Rom\xe2n\u0103",1:"ro",2:"ron","2T":"ron","2B":"rum",3:"ron"},{l:"Russian",bh:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439",1:"ru",2:"rus","2T":"rus","2B":"rus",3:"rus"},{l:"Sanskrit",bh:"\u0938\u0902\u0938\u094d\u0915\u0943\u0924\u092e\u094d",1:"sa",2:"san","2T":"san","2B":"san",3:"san"},{l:"Sardinian",bh:"Sardu",1:"sc",2:"srd","2T":"srd","2B":"srd",3:"srd"},{l:"Sindhi",bh:"\u0633\u0646\u068c\u064a\u200e",1:"sd",2:"snd","2T":"snd","2B":"snd",3:"snd"},{l:"Northern Sami",bh:"S\xe1megiella",1:"se",2:"sme","2T":"sme","2B":"sme",3:"sme"},{l:"Samoan",bh:"Gagana S\u0101moa",1:"sm",2:"smo","2T":"smo","2B":"smo",3:"smo"},{l:"Sango",bh:"S\xe4ng\xf6",1:"sg",2:"sag","2T":"sag","2B":"sag",3:"sag"},{l:"Serbian",bh:"\u0421\u0440\u043f\u0441\u043a\u0438",1:"sr",2:"srp","2T":"srp","2B":"srp",3:"srp"},{l:"Gaelic",bh:"G\xe0idhlig",1:"gd",2:"gla","2T":"gla","2B":"gla",3:"gla"},{l:"Shona",bh:"ChiShona",1:"sn",2:"sna","2T":"sna","2B":"sna",3:"sna"},{l:"Sinhala",bh:"\u0dc3\u0dd2\u0d82\u0dc4\u0dbd",1:"si",2:"sin","2T":"sin","2B":"sin",3:"sin"},{l:"Slovak",bh:"Sloven\u010dina",1:"sk",2:"slk","2T":"slk","2B":"slo",3:"slk"},{l:"Slovene",bh:"Sloven\u0161\u010dina",1:"sl",2:"slv","2T":"slv","2B":"slv",3:"slv"},{l:"Somali",bh:"Soomaaliga",1:"so",2:"som","2T":"som","2B":"som",3:"som"},{l:"Southern Sotho",bh:"Sesotho",1:"st",2:"sot","2T":"sot","2B":"sot",3:"sot"},{l:"Spanish",bh:"Espa\xf1ol",1:"es",2:"spa","2T":"spa","2B":"spa",3:"spa"},{l:"Sundanese",bh:"Basa Sunda",1:"su",2:"sun","2T":"sun","2B":"sun",3:"sun"},{l:"Swahili",bh:"Kiswahili",1:"sw",2:"swa","2T":"swa","2B":"swa",3:"swa"},{l:"Swati",bh:"SiSwati",1:"ss",2:"ssw","2T":"ssw","2B":"ssw",3:"ssw"},{l:"Swedish",bh:"Svenska",1:"sv",2:"swe","2T":"swe","2B":"swe",3:"swe"},{l:"Tamil",bh:"\u0ba4\u0bae\u0bbf\u0bb4\u0bcd",1:"ta",2:"tam","2T":"tam","2B":"tam",3:"tam"},{l:"Telugu",bh:"\u0c24\u0c46\u0c32\u0c41\u0c17\u0c41",1:"te",2:"tel","2T":"tel","2B":"tel",3:"tel"},{l:"Tajik",bh:"\u0422\u043e\u04b7\u0438\u043a\u04e3",1:"tg",2:"tgk","2T":"tgk","2B":"tgk",3:"tgk"},{l:"Thai",bh:"\u0e20\u0e32\u0e29\u0e32\u0e44\u0e17\u0e22",1:"th",2:"tha","2T":"tha","2B":"tha",3:"tha"},{l:"Tigrinya",bh:"\u1275\u130d\u122d\u129b",1:"ti",2:"tir","2T":"tir","2B":"tir",3:"tir"},{l:"Tibetan Standard",bh:"\u0f56\u0f7c\u0f51\u0f0b\u0f61\u0f72\u0f42",1:"bo",2:"bod","2T":"bod","2B":"tib",3:"bod"},{l:"Turkmen",bh:"T\xfcrkmen\xe7e",1:"tk",2:"tuk","2T":"tuk","2B":"tuk",3:"tuk"},{l:"Tagalog",bh:"Tagalog",1:"tl",2:"tgl","2T":"tgl","2B":"tgl",3:"tgl"},{l:"Tswana",bh:"Setswana",1:"tn",2:"tsn","2T":"tsn","2B":"tsn",3:"tsn"},{l:"Tonga",bh:"faka Tonga",1:"to",2:"ton","2T":"ton","2B":"ton",3:"ton"},{l:"Turkish",bh:"T\xfcrk\xe7e",1:"tr",2:"tur","2T":"tur","2B":"tur",3:"tur"},{l:"Tsonga",bh:"Xitsonga",1:"ts",2:"tso","2T":"tso","2B":"tso",3:"tso"},{l:"Tatar",bh:"\u0422\u0430\u0442\u0430\u0440\u0447\u0430",1:"tt",2:"tat","2T":"tat","2B":"tat",3:"tat"},{l:"Twi",bh:"Twi",1:"tw",2:"twi","2T":"twi","2B":"twi",3:"twi"},{l:"Tahitian",bh:"Reo M\u0101\u2019ohi",1:"ty",2:"tah","2T":"tah","2B":"tah",3:"tah"},{l:"Uyghur",bh:"\u0626\u06c7\u064a\u063a\u06c7\u0631\u0686\u0647",1:"ug",2:"uig","2T":"uig","2B":"uig",3:"uig"},{l:"Ukrainian",bh:"\u0423\u043a\u0440\u0430\u0457\u043d\u0441\u044c\u043a\u0430",1:"uk",2:"ukr","2T":"ukr","2B":"ukr",3:"ukr"},{l:"Urdu",bh:"\u0627\u0631\u062f\u0648",1:"ur",2:"urd","2T":"urd","2B":"urd",3:"urd"},{l:"Uzbek",bh:"O\u2018zbek",1:"uz",2:"uzb","2T":"uzb","2B":"uzb",3:"uzb"},{l:"Venda",bh:"Tshiven\u1e13a",1:"ve",2:"ven","2T":"ven","2B":"ven",3:"ven"},{l:"Vietnamese",bh:"Ti\u1ebfng Vi\u1ec7t",1:"vi",2:"vie","2T":"vie","2B":"vie",3:"vie"},{l:"Volap\xfck",bh:"Volap\xfck",1:"vo",2:"vol","2T":"vol","2B":"vol",3:"vol"},{l:"Walloon",bh:"Walon",1:"wa",2:"wln","2T":"wln","2B":"wln",3:"wln"},{l:"Welsh",bh:"Cymraeg",1:"cy",2:"cym","2T":"cym","2B":"wel",3:"cym"},{l:"Wolof",bh:"Wolof",1:"wo",2:"wol","2T":"wol","2B":"wol",3:"wol"},{l:"Western Frisian",bh:"Frysk",1:"fy",2:"fry","2T":"fry","2B":"fry",3:"fry"},{l:"Xhosa",bh:"isiXhosa",1:"xh",2:"xho","2T":"xho","2B":"xho",3:"xho"},{l:"Yiddish",bh:"\u05d9\u05d9\u05b4\u05d3\u05d9\u05e9",1:"yi",2:"yid","2T":"yid","2B":"yid",3:"yid"},{l:"Yoruba",bh:"Yor\xf9b\xe1",1:"yo",2:"yor","2T":"yor","2B":"yor",3:"yor"},{l:"Zhuang",bh:"Cuengh",1:"za",2:"zha","2T":"zha","2B":"zha",3:"zha"},{l:"Zulu",bh:"isiZulu",1:"zu",2:"zul","2T":"zul","2B":"zul",3:"zul"}];r();function RH(t){var i;const e=null!=(i=function(t){const i=t.q0,e=new wl;return e.Q0(i,0,i.byteLength),TB(e).I1}(t))?i:24;return t.mft/e}function DH(t){return t.Km===ui.NR}function NH(t,i,e,s,n){const r=function(t,i,e,s){const n=e.mft,r=yo.fromNumber(t.eM||0),h=s.gO(ul.yF(r,n));return{wft:s.rF(),yft:s,bft:h,Aft:s}}(t,0,e,s),h=ul.bF(t.ct||0,e.mft),o=t.xD||0,a=!(65536&o)&&1!==(o>>24&3);let u;const c=dh(n),d=new oi;for(;d.ac<c.byteLength;){const t=ti(c,d);if((31&Wp(c,d,1))===yB.g1){const i=new wl;i.Q0(n,d.ac-1,d.ac+t-1);const e=new SB(i),s=pB(r.bft,e);u=u||[],u.push(...xH(s))}d.Ly(t-1)}return Y({},r,{ct:h.rF(),Sft:h,Tft:r.bft.rF(),kft:r.wft,Eft:a,xft:u,Pft:!1,Ift:!1})}function BH(t){return{sN:t.yD.sN,mft:t.$D.yD.jD}}function MH(t){return t.Km===ui.HC}r(),r(),r(),r(),r(),r(),r(),r();var LH=class{QO(t){return this.Dit===t.Dit&&this.yit===t.yit}constructor(t,i){this.Dit=void 0,this.yit=void 0,this.Dit=t,this.yit=i}};r();var OH=class{get Xit(){return this.Cft}get Hit(){return[this]}get zit(){return this.vZ}get Eit(){return this.Rft}get Iit(){return new LH(this.Eit.Dit,this.Eit.yit+this.Xit.length-1)}Dft(t){this.Cft+=t}Nft(t){for(const i of t)this.Dft(i)}constructor(t,i){this.vZ=void 0,this.Rft=void 0,this.Cft=void 0,this.vZ=t,this.Rft=i,this.Cft=""}};function FH(t,i){return t===i||t.Xit===i.Xit&&t.Eit.QO(i.Eit)&&Gr(t.zit,i.zit)}function UH(t,i){return t===i||t.Eit.QO(i.Eit)&&t.Iit.QO(i.Iit)&&af(t.Hit,i.Hit,FH)}var VH=class extends Oh{KO(t){return af(this.U,t.U,UH)}constructor(t,i,e){super(t,i,e,!1)}};r();var HH=class{Bft(t){return t.mU(this)}Mft(t){return hs(t,(t,i)=>t.mU(this,i))}Lft(t,i){return new WH(t,i).Oft()}},WH=class{Oft(){if(this.Fft)return[];for(let t=0;t<this.Dit.length;t++)this.Uft(t);return this.Vft(),this.Hft}Wft(t){this.qft=new OH(aF,new LH(this.zft,t))}Vft(){this.qft&&(this.Hft.push(this.qft),this.qft=null)}Uft(t){const i=this.Dit[t];qH(i)?this.qft&&this.Vft():(this.qft||this.Wft(t),this.qft.Dft(i))}get Fft(){return this.Dit.every(qH)}constructor(t,i){this.Dit=void 0,this.zft=void 0,this.Hft=void 0,this.qft=void 0,this.Dit=t,this.zft=i,this.Hft=[],this.qft=null}};function qH(t){return null==t}var zH=class{static Gft(t,i,e){if(i>=e)return;const s=hs(t,(t,i)=>new WH(t.map(t=>t?t.Xft():null),i).Oft());return 0!==s.length?new VH(i,e,s):void 0}},GH="black",XH="white";r(),r();var jH=[[42,225],[92,233],[94,237],[95,243],[96,250],[123,231],[124,247],[125,209],[126,241],[127,9608],[128,174],[129,176],[130,189],[131,191],[132,8482],[133,162],[134,163],[135,9834],[136,224],[137,32],[138,232],[139,226],[140,234],[141,238],[142,244],[143,251],[144,193],[145,201],[146,211],[147,218],[148,220],[149,252],[150,8216],[151,161],[152,42],[153,8217],[154,9473],[155,169],[156,8480],[157,8226],[158,8220],[159,8221],[160,192],[161,194],[162,199],[163,200],[164,202],[165,203],[166,235],[167,206],[168,207],[169,239],[170,212],[171,217],[172,249],[173,219],[174,171],[175,187],[176,195],[177,227],[178,205],[179,204],[180,236],[181,210],[182,242],[183,213],[184,245],[185,123],[186,125],[187,92],[188,94],[189,95],[190,124],[191,8764],[192,196],[193,228],[194,214],[195,246],[196,223],[197,165],[198,164],[199,9475],[200,197],[201,229],[202,216],[203,248],[204,9487],[205,9491],[206,9495],[207,9499]].reduce((t,i)=>(t[i[0]]=i[1],t),{}),QH=class{jft(t){for(let i=0;i<uo;i++)t&&(this.Qft[i]=t.Qft[i])}QO(t){for(let i=0;i<uo;i++)if(this.Qft[i]!==t.Qft[i])return!1;return!0}Kft(){for(let t=0;t<uo;t++)if(null!==this.Qft[t])return!1;return!0}Yft(t){this.Jft!==t&&(this.Jft=t),this.Jft<0?this.Jft=0:this.Jft>uo&&(this.Jft=31)}Zft(t){const i=this.Jft+t;this.Yft(i)}$ft(){this.Zft(-1),this.Qft[this.Jft]=null}Dft(t){t>=144&&this.$ft();const i=function(t){return jH[t]?String.fromCharCode(jH[t]):String.fromCharCode(t)}(t);this.addParsedChar(i)}addParsedChar(t){this.Jft>=uo||(32===Number(t)?(this.Qft[this.Jft]=this.tvt?"</i>":"<i>",this.tvt=!this.tvt):this.Qft[this.Jft]=t,this.Zft(1))}ivt(t){for(let i=t;i<uo;i++)this.Qft[i]=null}jy(){this.ivt(0),this.Jft=0}evt(){this.ivt(this.Jft)}svt(t,i){const e=this.Qft;let s=null;for(let n=0;n<uo;n++){const r=e[n];null===r?s=null:(s||(s={Gh:n,Xh:t,Ti:0,Mi:1,Qft:[[]]},i.push(s)),s.Qft[0].push(r),s.Ti++)}}mU(t,i){return t.Lft(this.Qft,i)}constructor(){this.Qft=[],this.Jft=0,this.tvt=void 0;for(let t=0;t<uo;t++)this.Qft.push(null);this.tvt=!1}};var KH=class{nvt(t,i){const e="CC"+(this.rvt<<1|this.ovt+1);if(t>=i)return null;const s=(new HH).Mft(this.avt.slice(1));return 0===s.length?null:{PO:new VH(t,i,s),zT:e,uvt:this.rvt<<1|this.ovt+1}}hr(){this.cvt(),this.dvt=1}lvt(){return this.dvt}fvt(t){this.dvt=t}Yft(t){this.avt[this.dvt].Yft(t)}Zft(t){this.avt[this.dvt].Zft(t)}vvt(){return this._vt}gvt(t){this._vt=t}Dft(t,i){if(i<32||i>127)return;let e="";switch(t){case 0:e=void 0!==YH[i]?YH[i]:String.fromCharCode(i);break;case 1:e=JH[i];break;case 2:this.pvt(),e=ZH[i];break;case 3:this.pvt(),e=$H[i]}e&&this.avt[this.dvt].addParsedChar(e)}pvt(){this.avt[this.dvt].$ft()}mvt(t,i,e){if(t>=i)for(let s=e-1;s>=0;s--)this.avt[t+s]=this.avt[i+s];else for(let s=0;s<e;s++)this.avt[t+s]=this.avt[i+s]}wvt(t,i){for(let e=0;e<=i;e++)this.avt[t+e]=new QH}cvt(){this.wvt(0,yc)}yvt(){this.dvt=this._vt>0?this._vt:0,this.cvt()}bvt(t){this.Avt=t}Svt(t){this.Tvt=t}kvt(t){this.Evt=t}xvt(t){this.Pvt=t}constructor(t,i){this.avt=void 0,this.dvt=void 0,this._vt=void 0,this.rvt=void 0,this.ovt=void 0,this.Avt=void 0,this.Tvt=void 0,this.Evt=void 0,this.Pvt=void 0,this.avt=new Array(yc+1);for(let t=0;t<=yc;t++)this.avt[t]=new QH;this.dvt=1,this._vt=0,this.rvt=t,this.ovt=i,this.Avt=!1,this.Tvt=!1,this.Evt=XH,this.Pvt=GH,this.hr()}},yc=15,bt=function(t){return t[t.Ivt=0]="Ivt",t[t.Cvt=1]="Cvt",t[t.Rvt=2]="Rvt",t[t.Dvt=3]="Dvt",t}({}),YH={39:"\u2019",42:"\xe1",92:"\xe9",94:"\xed",95:"\xf3",96:"\xfa",123:"\xe7",124:"\xf7",125:"\xd1",126:"\xf1",127:"\u2588"},JH={48:"\xae",49:"\xb0",50:"\xbd",51:"\xbf",52:"\u2122",53:"\xa2",54:"\xa3",55:"\u266a",56:"\xe0",57:"\u2800",58:"\xe8",59:"\xe2",60:"\xea",61:"\xee",62:"\xf4",63:"\xfb"},ZH={32:"\xc1",33:"\xc9",34:"\xd3",35:"\xda",36:"\xdc",37:"\xfc",38:"\u2018",39:"\xa1",40:"*",41:"'",42:"\u2500",43:"\xa9",44:"\u2120",45:"\xb7",46:"\u201c",47:"\u201d",48:"\xc0",49:"\xc2",50:"\xc7",51:"\xc8",52:"\xca",53:"\xcb",54:"\xeb",55:"\xce",56:"\xcf",57:"\xef",58:"\xd4",59:"\xd9",60:"\xf9",61:"\xdb",62:"\xab",63:"\xbb"},$H={32:"\xc3",33:"\xe3",34:"\xcd",35:"\xcc",36:"\xec",37:"\xd2",38:"\xf2",39:"\xd5",40:"\xf5",41:"{",42:"}",43:"\\",44:"^",45:"_",46:"|",47:"~",48:"\xc4",49:"\xe4",50:"\xd6",51:"\xf6",52:"\xdf",53:"\xa5",54:"\xa4",55:"\u2502",56:"\xc5",57:"\xe5",58:"\xd8",59:"\xf8",60:"\u250c",61:"\u2510",62:"\u2514",63:"\u2518"},tW=class{hr(){this.Nvt=!0,this.Bvt=0,this.Vp=0,this.Mvt=this.Lvt,this.Ovt=void 0,this.Lvt.hr(),this.Fvt.hr(),this.Uvt.hr()}Vvt(t,i){return[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(7&t)<<1|i>>5&1]}Hvt(t,i){const e=this.Vvt(t,i),s=(30&i)>>1;let n=XH,r=!1;s<7?n=sW[s]:7===s&&(r=!0);const h=!(1&~i);if(4===this.Vp)return;const o=this.Mvt;if(3===this.Vp&&e!==o.lvt()){const t=1+o.lvt()-o.vvt(),i=1+e-o.vvt();o.mvt(i,t,o.vvt()),o.wvt(0,i-1),o.wvt(e+1,yc-e)}o.fvt(e);const a=cF[t<<1&14|i>>5&1]-1;if(a<0)return;const u=function(t,i){const e=i>95?i-96:i-64;return{wit:uF[e].wit,mit:uF[e].mit,yit:uF[e].yit,Dit:t}}(a,i);o.Yft(u.yit),this.Mvt.bvt(h),this.Mvt.Svt(r),this.Mvt.kvt(n),this.Mvt.xvt(GH)}Wvt(t,i){this.Mvt.bvt(!1),this.Mvt.Svt(!1),this.Mvt.kvt(XH);const e=this.qvt(t,bt.Ivt," ".charCodeAt(0));let s=XH,n=!1;const r=!(1&~i);return s=sW[(14&i)>>1],"white_italics"===s&&(s="white",n=!0),this.Mvt.bvt(r),this.Mvt.Svt(n),this.Mvt.kvt(s),e}qvt(t,i,e){if(this.Mvt.Dft(i,e),2===this.Vp||3===this.Vp){const i=this.zvt(this.Mvt,this.Bvt,t);return this.Bvt=t,i}return null}zvt(t,i,e){return this.Nvt?null:2===this.Vp||3===this.Vp?t.nvt(e,e+10):t.nvt(i,e)}Gvt(t,i){let e=GH;7&t||(e=eW[(14&i)>>1]),this.Mvt.xvt(e)}Xvt(t){const i=iW,e=t.jvt,s=t.Qvt;let n=null;switch(e){case i.RCL:this.Kvt();break;case i.BS:this.Yvt();break;case i.AOD:case i.AON:case i.DER:break;case i.RU2:n=this.Jvt(2,s);break;case i.RU3:n=this.Jvt(3,s);break;case i.RU4:n=this.Jvt(4,s);break;case i.FON:n=this.Zvt(s);break;case i.RDC:this.$vt(s);break;case i.TR:this.t_t();break;case i.RTD:this.i_t();break;case i.EDM:n=this.e_t(s);break;case i.CR:n=this.s_t(s);break;case i.ENM:this.n_t();break;case i.EOC:n=this.r_t(s)}return n}s_t(t){const i=this.Mvt;if(3!==this.Vp)return null;const e=this.zvt(i,this.Bvt,t),s=i.lvt()-i.vvt()+1;return i.mvt(s-1,s,i.vvt()),i.wvt(0,s-1),i.wvt(i.lvt(),yc-i.lvt()),this.Bvt=t,e}Jvt(t,i){this.Mvt=this.Lvt;const e=this.Mvt;let s=null;return 3!==this.Vp&&4!==this.Vp&&(s=this.zvt(e,this.Bvt,i),this.Lvt.yvt(),this.Fvt.yvt(),this.Nvt=!1,e.fvt(yc)),this.Vp=3,e.gvt(t),s}Zvt(t){return this.qvt(t,bt.Ivt," ".charCodeAt(0))}e_t(t){const i=this.Lvt;let e=null;return 4!==this.Vp&&(e=this.zvt(i,this.Bvt,t)),i.cvt(),this.Nvt=!1,e}$vt(t){this.Vp=2,this.Mvt=this.Lvt,this.Mvt.gvt(0),this.Bvt=t}n_t(){this.Fvt.cvt()}r_t(t){let i=null;4!==this.Vp&&(i=this.zvt(this.Lvt,this.Bvt,t));const e=this.Fvt;return this.Fvt=this.Lvt,this.Lvt=e,this.Kvt(),this.Bvt=t,i}Kvt(){this.Vp=1,this.Mvt=this.Fvt,this.Mvt.gvt(0)}Yvt(){this.Mvt.pvt()}t_t(){this.Uvt.hr(),this.Nvt=!1,this.i_t()}i_t(){this.Mvt=this.Uvt,this.Vp=4}h_t(t,i,e){return this.Mvt.Dft(bt.Ivt,i),this.qvt(t,bt.Ivt,e)}o_t(t,i,e){const s=1&i?bt.Dvt:bt.Rvt;return this.qvt(t,s,e)}a_t(t){const i=t.u_t,e=t.jvt,s=t.Qvt;if(this.Ovt===(i<<8|e))return this.Ovt=void 0,null;if(this.Ovt=i<<8|e,this.c_t(i,e))this.Hvt(i,e);else{if(this.d_t(i,e))return this.Wvt(s,e);if(this.l_t(i,e))this.Gvt(i,e);else{if(this.f_t(i,e))return this.qvt(s,bt.Cvt,e);if(this.v_t(i,e))return this.o_t(s,i,e);if(this.__t(i,e))return this.Xvt(t);this.isTabOffset(i)&&this.Mvt.Zft(e-32)}}return null}isTabOffset(t){return 23===t||31===t}__t(t,i){return 20==(246&t)&&32==(240&i)}c_t(t,i){return 16==(240&t)&&64==(192&i)}d_t(t,i){return 17==(247&t)&&32==(240&i)}l_t(t,i){return 16==(247&t)&&32==(240&i)||23==(247&t)&&45==(255&i)}f_t(t,i){return 17==(247&t)&&48==(240&i)}v_t(t,i){return 18==(246&t)&&32==(224&i)}static g_t(t){return 16==(112&t)}constructor(t,i){this.Vp=void 0,this.Uvt=void 0,this.Lvt=void 0,this.Fvt=void 0,this.Mvt=void 0,this.Bvt=void 0,this.Ovt=void 0,this.Nvt=void 0,this.Vp=0,this.Uvt=new KH(t,i),this.Lvt=new KH(t,i),this.Fvt=new KH(t,i),this.Mvt=this.Lvt,this.Bvt=0,this.Ovt=void 0,this.Nvt=!1}},iW={RCL:32,BS:33,AOD:34,AON:35,DER:36,RU2:37,RU3:38,RU4:39,FON:40,RDC:41,TR:42,RTD:43,EDM:44,CR:45,ENM:46,EOC:47},eW=["black","green","blue","cyan","red","yellow","magenta","black"],sW=["white","green","blue","cyan","red","yellow","magenta","white_italics"];r(),r(),r();var nW=class{Xft(){return this.p_t}m_t(){return this.Avt}w_t(){return this.Tvt}y_t(){return this.Pvt}b_t(){return this.Evt}constructor(t,i,e,s,n){this.p_t=void 0,this.Avt=void 0,this.Tvt=void 0,this.Pvt=void 0,this.Evt=void 0,this.p_t=t,this.Avt=i,this.Tvt=e,this.Pvt=s,this.Evt=n}},rW=class{A_t(t,i,e,s,n,r,h){this.kz=t,this.S_t=i,this.T_t=e,this.k_t=s,this.E_t=n,this.x_t=r,this.P_t=h}I_t(){this.C_t=[];for(let t=0;t<oW;t++)this.C_t.push(this.R_t())}R_t(){const t=[];for(let i=0;i<hW;i++)t.push(null);return t}D_t(t){this.N_t()&&(this.C_t[this.dvt][this.B_t]=new nW(t,this.Avt,this.Tvt,this.Pvt,this.Evt),this.B_t++)}M_t(){this.N_t()&&(this.B_t<=0&&this.dvt<=0||(this.B_t<=0?(this.B_t=this.P_t-1,this.dvt--):this.B_t--,this.C_t[this.dvt][this.B_t]=null))}N_t(){const t=this.dvt<this.x_t&&this.dvt>=0,i=this.B_t<this.P_t&&this.B_t>=0;return t&&i}Re(){return this.kz}L_t(t){let i=0;for(let e=t;e<oW;e++,i++)this.C_t[i]=this.C_t[e];for(let e=0;e<t;e++,i++)this.C_t[i]=this.R_t()}O_t(){if(this.dvt+1>=this.x_t)return this.L_t(1),void(this.B_t=0);this.dvt++,this.B_t=0}F_t(){this.C_t[this.dvt]=this.R_t(),this.B_t=0}nvt(t,i){if(this.HO>=t)return null;const e=zH.Gft(this.C_t,this.HO,t);return e?(this.U_t(t),{PO:e,zT:"svc"+i,uvt:i}):null}V_t(t,i){this.dvt=t,this.B_t=i}H_t(t){this.Pvt=t}W_t(t){this.Evt=t}q_t(t){this.Avt=t}z_t(t){this.Tvt=t}G_t(){this.dvt=0,this.B_t=0,this.Avt=!1,this.Tvt=!1,this.Evt=XH,this.Pvt=GH}X_t(t){this.j_t=t}Q_t(){this.kz=!0}we(){this.kz=!1}Mh(){this.kz=!this.kz}U_t(t){this.HO=t}constructor(t){this.K_t=void 0,this.kz=void 0,this.E_t=void 0,this.T_t=void 0,this.S_t=void 0,this.k_t=void 0,this.x_t=void 0,this.P_t=void 0,this.j_t=void 0,this.C_t=void 0,this.HO=void 0,this.dvt=void 0,this.B_t=void 0,this.Tvt=void 0,this.Avt=void 0,this.Evt=void 0,this.Pvt=void 0,this.K_t=t,this.kz=!1,this.E_t=!1,this.T_t=0,this.S_t=0,this.k_t=0,this.x_t=0,this.P_t=0,this.j_t=2,this.C_t=[],this.HO=0,this.dvt=0,this.B_t=0,this.Tvt=!1,this.Avt=!1,this.Evt=XH,this.Pvt=GH,this.I_t()}},hW=42,oW=15,aW=class{Y_t(t){const i=t.J_t();let e=i.XE;const s=i.Qvt;if(e===fW){e=e<<16|t.J_t().XE}return e>=0&&e<=31?this.Z_t(e,s):e>=128&&e<=159?this.$_t(t,e,s):(e>=4096&&e<=4127?this.tgt(t,255&e):e>=4224&&e<=4255?this.igt(t,255&e):e>=32&&e<=127?this.egt(e):e>=160&&e<=255?this.sgt(e):e>=4128&&e<=4223?this.ngt(255&e):e>=4256&&e<=4351&&this.rgt(255&e),null)}egt(t){this.hgt&&(127!==t?this.hgt.D_t(String.fromCharCode(t)):this.hgt.D_t("\u266a"))}sgt(t){this.hgt&&this.hgt.D_t(String.fromCharCode(t))}ngt(t){if(!this.hgt)return;if(void 0===vW[t])return void this.hgt.D_t("_");const i=vW[t];this.hgt.D_t(i)}rgt(t){this.hgt&&(160===t?this.hgt.D_t("[CC]"):this.hgt.D_t("_"))}Z_t(t,i){if(!this.hgt)return null;const e=this.hgt;let s=null;switch(t){case uW:e.M_t();break;case dW:e.Re()&&(s=e.nvt(i,this.ogt)),e.O_t();break;case lW:e.Re()&&(s=e.nvt(i,this.ogt)),e.F_t();break;case cW:e.Re()&&(s=e.nvt(i,this.ogt)),e.I_t(),e.V_t(0,0)}return s}$_t(t,i,e){if(i>=128&&i<=135){const t=7&i;this.agt(t)}else{if(136===i){const i=t.J_t().XE;return this.ugt(i,e)}if(137===i){const i=t.J_t().XE;this.cgt(i,e)}else{if(138===i){const i=t.J_t().XE;return this.dgt(i,e)}if(139===i){const i=t.J_t().XE;return this.lgt(i,e)}if(140===i){const i=t.J_t().XE;return this.fgt(i,e)}if(143===i)return this.hr(e);if(144===i)this.vgt(t);else if(145===i)this._gt(t);else if(146===i)this.V_t(t);else if(151===i)this.ggt(t);else if(i>=152&&i<=159){const s=(15&i)-8;this.A_t(t,s,e)}}}return null}tgt(t,i){i>=8&&i<=15?t.uD(1):i>=16&&i<=23?t.uD(2):i>=24&&i<=31&&t.uD(3)}igt(t,i){i>=128&&i<=135?t.uD(4):i>=136&&i<=143&&t.uD(5)}agt(t){this.pgt[t]&&(this.hgt=this.pgt[t])}*mgt(t){for(let i=0;i<8;i++){!(1&~t)&&this.pgt[i]&&(yield i),t>>=1}}ugt(t,i){let e=null;for(const s of this.mgt(t)){const t=this.pgt[s];t.Re()&&(e=t.nvt(i,this.ogt)),t.I_t()}return e}cgt(t,i){for(const e of this.mgt(t)){const t=this.pgt[e];t.Re()||t.U_t(i),t.Q_t()}}dgt(t,i){let e=null;for(const s of this.mgt(t)){const t=this.pgt[s];t.Re()&&(e=t.nvt(i,this.ogt)),t.we()}return e}lgt(t,i){let e=null;for(const s of this.mgt(t)){const t=this.pgt[s];t.Re()?e=t.nvt(i,this.ogt):t.U_t(i),t.Mh()}return e}fgt(t,i){let e=null;for(const s of this.mgt(t)){const t=this.pgt[s];t.Re()&&(e=t.nvt(i,this.ogt)),this.pgt[s]=void 0}return e}hr(t){const i=this.fgt(255,t);return this.jy(),i}jy(){this.hgt=void 0,this.pgt=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0]}vgt(t){t.uD(1);const i=t.J_t().XE;if(!this.hgt)return;const e=(128&i)>0,s=(64&i)>0;this.hgt.z_t(e),this.hgt.q_t(s)}_gt(t){const i=t.J_t().XE,e=t.J_t().XE;if(t.uD(1),!this.hgt)return;const s=3&i,n=(12&i)>>2,r=(48&i)>>4,h=3&e,o=(12&e)>>2,a=(48&e)>>4,u=this.wgt(r,n,s),c=this.wgt(a,o,h);this.hgt.W_t(u),this.hgt.H_t(c)}V_t(t){const i=t.J_t().XE,e=t.J_t().XE;if(!this.hgt)return;const s=15&i,n=63&e;this.hgt.V_t(s,n)}ggt(t){t.uD(1),t.uD(1);const i=t.J_t().XE;if(t.uD(1),!this.hgt)return;const e=3&i;this.hgt.X_t(e)}A_t(t,i,e){const s=void 0!==this.pgt[i];if(!s){const t=new rW(i);t.U_t(e),this.pgt[i]=t}const n=t.J_t().XE,r=t.J_t().XE,h=t.J_t().XE,o=t.J_t().XE,a=t.J_t().XE,u=t.J_t().XE,c=(32&n)>0,d=127&r,l=(128&r)>0,f=h,v=1+(15&o),_=(240&o)>>4,g=1+(63&a);s&&0===(7&u)||this.pgt[i].G_t(),this.pgt[i].A_t(c,d,f,_,l,v,g),this.hgt=this.pgt[i]}wgt(t,i,e){const s={0:0,1:0,2:1,3:1};return _W[s[t]<<2|s[i]<<1|s[e]]}constructor(t){this.ogt=void 0,this.pgt=void 0,this.hgt=void 0,this.ogt=t,this.pgt=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0],this.hgt=void 0}},uW=8,cW=12,dW=13,lW=14,fW=16,vW={32:" ",33:"\xa0",37:"\u2026",42:"\u0160",44:"\u0152",48:"\u2588",49:"\u2018",50:"\u2019",51:"\u201c",52:"\u201d",53:"\u2022",57:"\u2122",58:"\u0161",60:"\u0153",61:"\u2120",63:"\u0178",118:"\u215b",119:"\u215c",120:"\u215d",121:"\u215e",122:"\u2502",123:"\u2510",124:"\u2514",125:"\u2500",126:"\u2518",127:"\u250c"},_W=["black","blue","green","cyan","red","magenta","yellow","white"];r();var gW=class{ygt(t){if(t.Km===Vr.cft){const i=63&t.XE;return this.bgt=2*i-1,void(this.Agt=[])}if(this.Agt&&(this.bgt>0&&(this.Agt.push(t),this.bgt--),0===this.bgt)){const t=new pW(this.Agt);this.Sgt.push(t),this.Agt=null,this.bgt=0}}Tgt(){return this.Sgt}kgt(){this.Sgt=[]}jy(){this.Sgt=[],this.Agt=[],this.bgt=0}constructor(){this.Sgt=void 0,this.Agt=void 0,this.bgt=void 0,this.Sgt=[],this.Agt=null,this.bgt=0}},pW=class{Egt(){return this.xgt<this.Pgt.length}Igt(){return this.xgt}J_t(){if(!this.Egt())throw new as(me.SUBTITLE_PARSE_ERROR,"Buffer read out of bounds / invalid CEA-708 Data.");return this.Pgt[this.xgt++]}uD(t){if(this.xgt+t>this.Pgt.length)throw new as(me.SUBTITLE_PARSE_ERROR,"Buffer read out of bounds / invalid CEA-708 Data.");this.xgt+=t}constructor(t){this.xgt=void 0,this.Pgt=void 0,this.xgt=0,this.Pgt=t}},mW=class{jy(){this.Cgt=0,this.Rgt=[],this.Dgt=[],this.Ngt.jy(),this.hr(),this.Bgt.forEach(t=>{t.jy()})}hr(){this.Mgt=0,this.Lgt=0,this.Ogt.forEach(t=>{t.hr()})}Fgt(t,i){if(t.fft){const e=t._ft,s=t.gft,n=t.Km;n===Vr.oft||n===Vr.aft?this.Rgt.push({Qvt:i,Km:n,u_t:e,jvt:s,Ugt:this.Rgt.length}):this.Vgt&&(this.Dgt.push({Qvt:i,Km:n,XE:e,Ugt:this.Dgt.length}),this.Dgt.push({Qvt:i,Km:Vr.uft,XE:s,Ugt:this.Dgt.length}))}}dj(){const t=[];this.Rgt.sort((t,i)=>t.Qvt-i.Qvt||t.Ugt-i.Ugt),this.Dgt.sort((t,i)=>t.Qvt-i.Qvt||t.Ugt-i.Ugt);for(const i of this.Rgt){const e=this.Hgt(i);e&&t.push(e)}for(const t of this.Dgt)this.Ngt.ygt(t);const i=this.Ngt.Tgt();for(const e of i){const i=this.Wgt(e);t.push(...i)}return this.Ngt.kgt(),this.Rgt=[],this.Dgt=[],t}Hgt(t){const i=t.Km;if(tW.g_t(t.u_t)){const e=t.u_t>>3&1;0===i?this.Mgt=e:this.Lgt=e}const e="CC"+(i<<1|(i?this.Lgt:this.Mgt)+1),s=this.Ogt.get(e);return 255===t.u_t&&255===t.jvt||!t.u_t&&!t.jvt||!this.qgt(t.u_t)||!this.qgt(t.jvt)?(++this.Cgt>=45&&this.hr(),null):(this.Cgt=0,t.u_t&=127,t.jvt&=127,t.u_t||t.jvt?tW.g_t(t.u_t)?s.a_t(t):s.h_t(t.Qvt,t.u_t,t.jvt):null)}Wgt(t){const i=[];try{for(;t.Egt();){const e=t.J_t().XE;let s=(224&e)>>5;const n=31&e;if(7===s&&0!==n){s=63&t.J_t().XE}if(0!==s){if(!this.Bgt.has(s)){const t=new aW(s);this.Bgt.set(s,t)}const e=this.Bgt.get(s),r=t.Igt();for(;t.Igt()-r<n;){const s=e.Y_t(t);s&&i.push(s)}}}}catch(t){if(!(t instanceof as&&t.code===me.SUBTITLE_PARSE_ERROR))throw t}return i}qgt(t){let i=0;for(;t;)i^=1&t,t>>=1;return 1===i}constructor(){this.Rgt=void 0,this.Dgt=void 0,this.Ngt=void 0,this.Cgt=void 0,this.Ogt=void 0,this.Mgt=void 0,this.Lgt=void 0,this.Bgt=void 0,this.Vgt=!1,this.Rgt=[],this.Dgt=[],this.Ngt=new gW,this.Cgt=0,this.Ogt=Eg({CC1:new tW(0,0),CC2:new tW(0,1),CC3:new tW(1,0),CC4:new tW(1,1)}),this.Mgt=0,this.Lgt=0,this.Bgt=re(),this.hr()}};r();var wW=class extends gp{constructor(t,i){super("zgt"),this.uvt=void 0,this.PO=void 0,this.uvt=t,this.PO=i}},yW=ul.hU(.1),bW=class extends Ne{Ggt(t,i){this.Xgt.Fgt(t,i)}dj(){const t=this.Xgt.dj();for(const i of t)this.So(new wW(i.uvt,i.PO))}hr(){this.Xgt.jy()}kn(){this.Vo(),this.Xgt.jy()}constructor(){super(),this.Xgt=void 0,this.Xgt=new mW}},AW=class extends bW{jgt(t,i,e,s){const n=this.Qgt(t,s);this.Kgt(n,i,e),this.dj()}Qgt(t,i){const e=t.slice().sort(dF),s=this.Ygt;if(0===s.length)return e;if(0===e.length)return s;let n;const r=s[0].Ait,h=s[s.length-1].Ait,o=e[0].Ait,a=s[0].qot===e[0].qot;if(h.gF(o).fF().lF(ul.hU(2.5*i))&&a)n=s.concat(e).sort(dF);else if(o.aF(r)){let t=0;for(;t<s.length&&s[t].Ait.lF(o);)t++;let i=!1,r=!1;for(let n=t,h=0;n<s.length&&h<e.length;n++,h++)SW(s[n],e[h])?i=!0:r=!0;const h=i&&!r,a=i&&r;!i&&r?n=s.concat(e).sort(dF):h?n=s.slice(0,t).concat(e):(n=e,a&&this.hr())}else n=e,this.hr();return n}Kgt(t,i,e){for(let s=0;s<t.length;s++){const n=t[s],r=n.Ait.rF();if(!e&&i-r<yW.rF())return void(this.Ygt=t.slice(s));this.Ggt(n,r)}this.Ygt=[]}constructor(...t){super(...t),this.Ygt=[]}};function SW(t,i){return t.Ait.QO(i.Ait)&&t.Km===i.Km&&t._ft===i._ft&&t.gft===i.gft}var TW=class extends ms{Jgt(t){return this.Zgt.get(t)}$gt(t){let i=this.Zgt.get(t.Sit);return i||(i=this.tpt(t),this.Zgt.set(t.Sit,i)),i}tpt(t){const i=[Je.zI],e=IH(t.Tit);let s=e?e.l:"";t.ipt&&(s="easy "+s,i.push(Je.QI));const n=t.Th||s||"CC"+t.Sit,r=this.ept(n,t.Tit,i);return this.tt(r),r}ght(t){const i=Hn.PD(dh(t));this.spt=function(t){for(const i of t.Z){const t=BH(i),e=i.$D.cN.fN._N.pN;let s=hh(e,t=>t.Km===ui.tR);if(!s){const t=e.filter(t=>t.Km===ui.DR),i=hh(t,t=>{var i;return(null==(i=t.dB)?void 0:i.Km)===ui.tR});i&&(s=i.dB)}if(!s)continue;const n=fB(dh(s.ZN.lk),new oi),r=s.tB;return Y({},t,{sN:i.yD.sN,ZN:am(s.ZN.lk),Ti:s.Ti,Mi:s.Mi,MB:r&&r.MB,BB:r&&r.BB,a2:n.U0,npt:n.V0,u2:n.H0,q0:n.q0[0],z0:n.z0[0]})}}(hh(i,MH))}elt(t,i,e,s,n,r){var h;if(!this.spt)return;if(!S(this.rpt)&&rs(this.rpt,i,1e-5))return;S(this.hpt)||rs(this.hpt,i,.1)||this.opt.hr();const o=function(t,i,e,s,n){const r=[],h=i.filter(DH),o=s(e);for(const i of h){const s=hh(i.Z,t=>t.yD.sN===e.sN);if(!s)continue;const h=s.yD.FB||0,u=s.yD.UB||0;let c=s.KB?s.KB.KB:yo.ZERO;var a;const d=i.qB+(null!=(a=s.yD.YB)?a:yo.ZERO).toNumber();for(const a of s.QB){let s=d+(a.qB||0);for(const d of a.iM){const a=d.Wy||u,l=new wl;l.Q0(t,s,s+a);const f=ul.yF(c,e.mft);l.LU=n(d,i,e,f,di(t,s,s+a)),r.push(l),s+=a,c=c.add(d.ct||h||o)}}}return r}(t,Hn.PD(dh(t)),this.spt,RH,NH);var a;const u=null!=(a=null==(h=df(o,t=>t.LU.ct))?void 0:h.LU.ct)?a:0,c=function(t){const i=[];for(const e of t)e.LU.xft&&i.push(...e.LU.xft),delete e.LU.xft;for(let t=0;t<i.length;t+=1)i[t].zB=t;return i}(o),d=ul.hU(s),l=[];for(const t of c)l.push(Y({},t,{qot:n,Ait:t.dft.gO(d)}));this.opt.jgt(l,e,r,u),this.rpt=i,this.hpt=e}eV(t,i,e){const s=this.upt(t,i,e);return this.Zgt.forEach((i,e)=>{i===t&&this.Zgt.set(e,s)}),s}hr(){return this.opt.hr(),this.Zgt.forEach(t=>{t.kn(),this.it(t),this.cpt(t)}),this.Zgt.clear(),this.spt=void 0,this.rpt=NaN,this.hpt=NaN,super.hr()}kn(){return this.opt.mn("zgt",this.dpt),this.opt.kn(),super.kn()}constructor(t){super(t),this.opt=void 0,this.spt=void 0,this.rpt=NaN,this.hpt=NaN,this.Zgt=void 0,this.dpt=t=>{const i=this.$gt({Sit:t.uvt,Tit:""}),e=t.PO;for(const t of i.L.NI)e.CO<t.CO&&e.RO>t.CO?e.RO=t.CO:e.CO>t.CO&&t.RO>e.CO?t.RO=e.CO:e.CO===t.CO&&(e.RO=t.RO);this.lpt(i,e)},this.Zgt=re(),this.opt=new AW,this.opt.wn("zgt",this.dpt)}},kW=class extends TW{cpt(t){}lpt(t,i){if(t.Qk===xh.Nh)return;const e=i.U.map(t=>t.Xit).join("\n"),s=hf(t.L.NI,-1);s&&s.U===e&&s.CO<=i.CO&&i.CO<=s.RO?s.RO=_.max(s.RO,i.RO):t.q8(i.CO,i.RO,e)}ept(t,i,e){return this.iV.Tq({Km:"webvtt",Lt:us.WU,Th:t,bs:i})}upt(t,i,e){return t}},wt=class extends TW{cpt(t){this.iV.rV(t)}lpt(t,i){t.nV(i)}ept(t,i,e){return this.iV.sI(us.WU,t,t,i,!1,nh.CEA608,void 0,e)}upt(t,i,e){return ht(t,i,e)}};r(),r();var EW=/(.*)=(.*)/,xW=/(.*):(.*)/;function PW(t){if(!t)return[];const i=[],e=t.trim().split(";");for(const t of e){const e=t.match(EW);if(e){const[,t,s]=e;let n="",r=!1;for(const t of s.trim().split(","))if(t.match(xW)){const[,i,e]=t.match(xW);switch(i){case"lang":n=e;break;case"er":r=Boolean(Number(e))}}i.push({Sit:Number(t),Tit:n,ipt:r})}}return i}var IW={1:1,2:3,3:2,4:4},CW="urn:scte:dash:cc:cea-608:2015",RW="urn:scte:dash:cc:cea-708:2015";r(),r();var DW=class extends Oi{xa(){return new NW(this.qot&&this.qot.Ca)}constructor(t,i,e){super(Te.II),this.qot=void 0,this.Yut=void 0,this.fpt=void 0,this.qot=t,this.Yut=i,this.fpt=e}},NW=class extends gp{constructor(t){super("activequalitychanged"),this.quality=void 0,this.quality=t}},BW=[d.uo,Jr.AI,d.py],MW=class extends Ne{vpt(t){const i=this.Nlt.Kot;for(const e of i.Ht.xat)if(i.mct.vct(t,e))return e}kn(){this.Vo(),this.PL.mn(BW,this._pt)}constructor(t,i){super(),this.PL=void 0,this.Nlt=void 0,this.gpt=void 0,this._pt=t=>{const i=this.gpt,e=this.vpt(t.currentTime)||this.Nlt.Got;e&&i!==e&&(this.gpt=e,e.qot&&this.So(new DW(e.qot,null==e?void 0:e.Ca,null==i?void 0:i.Ca)))},this.PL=t,this.PL.wn(BW,this._pt),this.Nlt=i}};function LW(t,i,e){const s=new yu(dh(t),new oi),n=ha.mD(s,ui.HC);if(!n)return;const r=ha.lD(n.lk),h=hh(r,t=>t.Km===ui.qC),o=hh(r,t=>t.Km===ui.qR);if(!h)return;const a=ha.mD(h.lk,ui.GC);if(!a)return;const u=ha.mD(a.lk,ui.QC);if(!u)return;const c=ha.mD(u.lk,ui.KC);if(!c)return;const d=ha.lD(c.lk),l=hh(d,t=>t.Km===ui.YC);if(!l)return;const f=ha.kD(l.lk,ui.YC,!1),v=new yu(dh(f.lk),new oi);v.uD(4);const _=ha.lD(v),g=[];for(const t of _){if(t.Km===ui.RR||t.Km===ui.DR)return;t.Km===ui.tR?g.push({ppt:t,mpt:ui.DR}):t.Km===ui.AR&&g.push({ppt:t,mpt:ui.RR})}if(!function(t,i){return void 0===t&&void 0!==i&&i.length>0}(o,i)&&0===g.length)return;let p=nr(t);const m=hh(r,t=>t.Km===ui.ZC),w=m?ha.mD(m.lk,ui.$C):void 0,y=w?function(t){const i=t.lk.Fy();return i.uD(4),i.uD(4),i.eD()}(w):1,b=hh(d,t=>t.Km===ui.JC);b&&function(t,i,e){const s=UW(dh(t),i),n=ha.pD(s,new oi),r=n.lk;r.uD(4);const h=r.eD();for(let t=0;t<h;t++){r.uD(4),r.uD(4);const t=r.$R.Fy(),i=r.eD();kl(r.lk,t,i+e)}}(p,b,g.length),w&&function(t,i,e){const s=UW(dh(t),i),n=ha.pD(s,new oi),r=n.lk;r.uD(4),r.uD(4),kl(r.lk,r.$R,e)}(p,w,1),p=function(t,i,e,s){if(e||!s)return t;let n=t;for(const t of s)n=OW(n,i,new j(t));return n}(p,n,o,i);const A=[n,h,a,u,c,l];for(let t=g.length-1;t>=0;t--){const i=g[t];p=FW(p,i.ppt,l,A,i.mpt,e)}return{wpt:p,ypt:{bpt:g.length,OB:y}}}function OW(t,i,e){const s=_m(t,e,i.lk.lk.byteOffset+i.lk.lk.byteLength);return VW(UW(dh(s),i),e.byteLength),s}function FW(t,i,e,s,n,r){const h=function(t,i,e){0;const s=t.lk.lk,n=GW(),r=new j(s.byteLength+n.byteLength),h=dh(r);r.set(ye(s),0),VW(h,n.byteLength),Yp(h,new oi(QW),i),r.set(n,s.byteLength),Yp(h,new oi(s.byteLength+XW),t.Km),e&&Ar(h,new oi(s.byteLength+jW),e);return r}(i,n,r),o=_m(t,h,i.lk.lk.byteOffset),a=dh(o);!function(t,i){const e=ha.pD(t,new oi),s=ha.kD(e.lk,ui.YC,!1),n=dh(s.lk),r=n.getUint32(0);n.setUint32(0,r+i)}(UW(a,e),1);for(const t of s)VW(UW(a,t),h.byteLength);return o}function UW(t,i){const e=i.lk.lk.byteOffset;return Wu(t,e,e+i.lk.lk.byteLength)}function VW(t,i){const e=new oi,s=ti(t,e);if(0===s);else if(1===s){e.Ly(4);const s=qt(t,e.Fy());Gp(t,e,s.add(i))}else e.Oy(0),kl(t,e,s+i)}r();var HW=class extends Qa{start(t){this.iZ=t}transform(t){this.E$(t),this.Apt()}flush(){this.P$(),this.Apt()}L$(t){return t===ui.NR}F$(t){let i=nr(ye(t.lk.lk));const e=ha.pD(dh(i),new oi);i=WW(i,e,this.Spt),this.Tpt.push(i)}V$(t){this.Tpt.push(t)}Apt(){for(const t of function(t){if(t.length<2)return t;const i=[];let{buffer:e,byteOffset:s,byteLength:n}=t[0];for(let r=1;r<t.length;r++){const h=t[r];e===h.buffer&&s+n===h.byteOffset?n+=h.byteLength:(i.push(new j(e,s,n)),({buffer:e,byteOffset:s,byteLength:n}=h))}return i.push(new j(e,s,n)),i}(this.Tpt))this.iZ.enqueue(t);Wt(this.Tpt)}constructor(t){super(),this.Spt=void 0,this.iZ=void 0,this.Tpt=[],this.Spt=t}};function WW(t,i,e){let s=t;const n=ha.lD(i.lk);for(let t=n.length-1;t>=0;t--){const r=n[t];r.Km===ui.LR&&(s=qW(s,r,i,e))}return s}function qW(t,i,e,s){const n=UW(dh(t),i),r=ha.pD(n,new oi),h=ha.lD(r.lk),o=hh(h,t=>t.Km===ui.OR);if(!o)return t;const a=o.lk,u=a.$R.Fy(),c=a.eD(),{flags:d}=AT(c);a.uD(4),d.Uy(bo.BASE_DATA_OFFSET_PRESENT)&&a.uD(8);const l=a.$R.Fy();if(d.Uy(bo.SAMPLE_DESCRIPTION_INDEX_PRESENT)){const i=ti(a.lk,l);return kl(a.lk,a.$R,i+s.bpt),t}{kl(a.lk,u,c|bo.SAMPLE_DESCRIPTION_INDEX_PRESENT);const n=new j(4);dh(n).setUint32(0,s.OB+s.bpt);const r=a.lk.byteOffset+l.ac;for(const t of h.filter(t=>t.Km===ui.FR))zW(t,n.byteLength);for(const s of[o,i,e])VW(UW(dh(t),s),n.byteLength);return _m(t,n,r)}}function zW(t,i){const e=t.lk,s=e.eD(),{flags:n}=AT(s);if(e.uD(4),n.Uy(Rr.DATA_OFFSET_PRESENT)){const t=e.Fy().eD();kl(e.lk,e.$R,t+i)}}var GW=Oc(()=>new j([0,0,0,80,115,105,110,102,0,0,0,12,102,114,109,97,0,0,0,0,0,0,0,20,115,99,104,109,0,0,0,0,99,101,110,99,0,1,0,0,0,0,0,40,115,99,104,105,0,0,0,32,116,101,110,99,0,0,0,0,0,0,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])),XW=16,jW=64,QW=4,KW=[hc.ma,d.ey,d.iy,d.ly,d._y,d.Sw],YW=class extends Ne{get kpt(){return this.Rlt}get o(){return this.aS}get V3(){return this.H3}get nt(){return this.Ept}get Olt(){return function(t){const i=29.97,e=1024,s=44100;return t===at.Bk?s/e:i}(this.H3)}get Blt(){return 1/this.Olt}get Rt(){return Boolean(this.Rlt&&this.Rlt.Rt)}get s$(){const t=this.Nlt?this.Nlt.Kot.s$.uct:Uo.rL();return this.xpt().HM(t)}get Fx(){let t=this.Ppt();const i=this.Ipt;return void 0!==i&&t.MM().Cr(i)&&(t=t.HM(Uo.sL(i))),t}get sct(){return QU(this.Ppt(),this.s$.HM(this.Cpt)).VM(2*this.Blt)}get Cpt(){const t=this.Ipt;if(t&&isFinite(t)){const i=this.Rpt.An;if(isFinite(i)&&t<i)return new Uo([t,i],[!1,!0])}return Uo.rL()}get kP(){const t=this.Rlt;if(!t)return Uo.sL(0);const i=t.Zut.Ult,e=t.Zut.Vlt;if(void 0===e||void 0===i)return Uo.sL(0);const s=e;let n=i>=t.Zut.Oct.An?_.max(i,this.An):i;return n=_.max(s,n),Uo.nL(s,n).MM()}get ZW(){return this.sct.iL(this.zx)}get act(){return this.Rpt.act}get zx(){return this.PL.zx}get Tn(){return this.Rlt?this.Rlt.Zut.Oct.Tn:NaN}get An(){const t=this.Dpt(),i=this.Ipt;return void 0===t?NaN:void 0!==i?i:t}Dpt(){var t;return null==(t=this.Rlt)?void 0:t.Zut.Oct.An}get Mi(){return this.Rpt.Mi}get Ti(){return this.Rpt.Ti}get Npt(){return this.Ipt}dat(){return void 0!==this.Nlt&&this.Nlt.dat}hct(){if(void 0===this.Ipt)return!1;const t=this.Ppt().MM(),i=t.zM(this.Ipt);return!(i<0)&&t.Tn(i)!==this.Ipt}F3(){const t=this.Rpt.act,i=this.Ppt().Mn(t);this.Ipt=i.V>0?i.An(i.V-1):0;const e=t.An(0);isFinite(e)&&this.Ipt<e&&this.r$(this.Ipt,e),this.Bpt()}async elt(t,i,e,s){const n=e.mht.EU,r=this.Mpt(t,i,e,n,s),h=this.Lpt(t,i,e,n,s),[o]=await pr([h,r]);return o}async Mpt(t,i,e,s,n){if(!To(e.lQ))return;let r;if(t.Km===We.MT){const i=t.lk.mut(),e=await i.qT(n);r=new j(e)}else r=new j(t.lk.jht);const h=[];if(void 0!==this.Opt&&(this.Opt.elt(r,i.CO,s),h.push(this.Opt)),void 0!==this.Fpt){const t=e.Lct(i);this.Fpt.elt(r,i.CO,i.RO,s,e.qot,t),h.push(this.Fpt)}lP(this.Fx,h)}async Lpt(t,i,e,s,n){var r;let h;if(fr(n),t.Km===We.MT){let i=t.lk.zT;this.Upt&&(i=function(t,i){return t.pipeThrough(new Yb(new HW(i)))}(i,this.Upt)),h={Km:We.MT,lk:i}}else{let i=new j(t.lk.jht);this.Upt&&(i=function(t,i){let e=nr(t);const s=new yu(dh(e),new oi),n=ha.lD(s);for(let t=n.length-1;t>=0;t--){const s=n[t];s.Km===ui.NR&&(e=WW(e,s,i))}return e}(i,this.Upt)),h={Km:We.wZ,lk:i}}const o={Get:i.CO,ct:i.ct,EU:s,u2:null==(r=e.qot)?void 0:r.JI},a=this.Wrt.Fx;await this.Vpt(),await this.Wrt.Q2(h,o,n);return function(t,i,e,s){let n,r,h=i.qM(t.MM());h=h.qM(e.qM(i)),!1;0===h.V?(n=s.RO,r=n):(n=h.Tn(0),r=h.An(0));return{qdt:n,zdt:r}}(a,this.Wrt.Fx,this.Wrt.W3,i)}async ght(t,i,e){var s,n;fr(e),this.Fpt&&this.Fpt.ght(new j(t.jht));let r=new j(t.jht);if(this.Hpt(i)){const t=this.Rpt.Wpt;let i,e=[];t&&(e=hs(t.qpt,t=>t.OW),i=t.zpt.fH?Xe(t.zpt.fH):void 0);const s=LW(r,e,i);s?(this.Upt=s.ypt,r=s.wpt):this.Upt=void 0}if((null==(s=this.Wrt)?void 0:s.Cd)&&this.Wrt.Cd.GT!==i.GT){const t={GT:i.GT};this.Wrt.IZ(t)&&(await this.Wrt.RZ(t),fr(e))}const h={Km:We.wZ,lk:r};await this.Vpt(),await this.Wrt.J2(h,{u2:null==(n=i.qot)?void 0:n.JI},e)}ilt(t,i,e){return this.Wrt.pS(t,i,e)}r$(t,i){this.Wrt.G3(t,i)}h$(t,i){this.Wrt.X3(t,i)}Ppt(){return this.Wrt?this.Wrt.Fx:Uo.rL()}xpt(){return this.Wrt?this.Wrt.W3:Uo.rL()}Gpt(){return this.Wrt?this.Wrt.pS(0,1/0):Promise.resolve()}Xpt(){return this.Wrt&&(this.Wrt.mn(bi.pZ,this.Rs),this.Wrt=void 0),Promise.resolve()}async jpt(t){var i;const e=eh.vdt(null!=(i=t.Alt)?i:t.xat,this.ndt).lQ;this.Wrt||(this.Wrt=this.Rpt.Qpt(e),this.Wrt.wn(bi.pZ,this.Rs),this.ldt=new nH(this.Wrt)),await this.Vpt()}Un(t,i){const e=Zc.ep([i]);this.uV.Zg(),this.uV=e;const s=this.Kpt(t,this.Ypt,e.Yg);return this.Ypt=s,s}Jpt(t){if(Ct(this.Zpt,nh.CEA608))return;const i=t.Zut.olt;if(function(t){return t.some(t=>t.x8===CW||t.x8===RW)}(i)){this.Fpt=new wt(this.iV);const t=function(t){const i=[];for(const e of t)if(e.x8===CW){const t=fF(e.XE);for(const e of t)i.push(e)}else if(e.x8===RW){const t=PW(e.XE);for(const e of t)if(e.Sit<=4){const t=IW[e.Sit];i.push(Y({},e,{Sit:t}))}}return i}(i);for(const i of t)this.Fpt.$gt(i);this.Ept.qW(this.Fpt.Z)}}async Kpt(t,i,e){fr(e),i&&await i.catch(gs),this.Rlt===t&&this.$pt||(await this.tmt(),fr(e),await this.Gpt(),fr(e),t&&await this.oV(t))}async tmt(){const t=this.Rlt;this.Rlt=void 0,this.$pt=!1,this.Ipt=void 0,t&&(t.mn(Te.RI,this.imt),t.Ilt(!1),t.mn(Te.NO_QUALITY,this.Rs)),this.emt&&(this.emt.kn(),this.emt=void 0),this.Nlt&&(await this.Nlt.kn(),this.Nlt=void 0),this.Fpt&&(this.Ept.XW(this.Fpt.Z),await this.Fpt.kn())}async oV(t){this.Rlt=t,this.Jpt(t),t.wn(Te.RI,this.imt),t.wn(Te.NO_QUALITY,this.Rs),await this.jpt(t),this.Nlt=this.smt(t),this.Nlt.wn(KW,this.Rs),this.Nlt.wn("zot",this.Bpt),this.Nlt.Jot=t.Alt,this.emt=new MW(this.PL,this.Nlt),this.emt.wn(Te.II,this.glt),t.Ilt(!0),this.$pt=!0}smt(t){return new sH(this,this.PL,this.PL,this.aV,this.Mz,this.rlt,this.Sut,this.cdt,this.ndt,this.ldt,this.Ndt,this.pq).jet(t)}async hr(t){this.uV.Zg(),this.Ypt&&(await this.Ypt.catch(gs),this.Ypt=void 0),await this.tmt(),t||await this.Gpt(),await this.Xpt()}async nmt(){await this.tmt()}vlt(t){var i;null==(i=this.kpt)||i.vlt(t)}async dlt(t,i){var e,s;await this.wat(),null==(e=this.kpt)||e.dlt(i);const n=null==(s=this.Nlt)?void 0:s.Kot.mct.dct(t);if(n&&n.V>0)for(let t=0;t<n.V;t++){var r;await(null==(r=this.Wrt)?void 0:r.pS(n.Tn(t),n.An(t)))}await this.bat()}hmt(t){const i=t.Ht.Alt;if(void 0===i)return this.omt(t);if(i.some(t=>this.ldt.IZ(t)))return this.omt(t);this.So(new gp("amt"))}omt(t){this.Nlt&&this.Rlt&&this.Rlt===t.Ht&&(this.Nlt.Jot=this.Rlt.Alt)}async wat(t){this.Nlt&&await this.Nlt.wat(t)}async bat(t){this.Nlt&&await this.Nlt.bat(t)}iJ(){const t=this.Fx.eL;return this.Mz.iJ(t)}Vpt(){const t=this.Rpt.act,i=_.max(0,t.Tn(0)-.1),e=t.An(0)+.01;return this.Wrt.f3(i,e)}Hpt(t){if(!To(t.lQ))return!1;if(this.Rpt.T8)return!0;return void 0!==this.Rpt.Wpt}Aat(t){if(!GT(this.H3))return;const i=this.Nlt,e=t.Nlt;void 0!==i&&void 0!==e&&i.Aat(e,this.Tn,this.An)}async kn(t){this.Vo();try{await this.hr(t),await this.nmt()}catch(t){}}constructor(t,i,e,s,n,r,h,o,a,u,c,d,l){super(),this.aS=void 0,this.H3=void 0,this.Rlt=void 0,this.Nlt=void 0,this.cdt=void 0,this.ndt=void 0,this.$pt=!1,this.uV=new Zc,this.Ypt=void 0,this.emt=void 0,this.Ipt=void 0,this.Wrt=void 0,this.ldt=new rH,this.Upt=void 0,this.Rpt=void 0,this.PL=void 0,this.aV=void 0,this.Mz=void 0,this.Opt=void 0,this.Fpt=void 0,this.Ept=new Tu([]),this.iV=void 0,this.Sut=void 0,this.Ndt=void 0,this.Zpt=void 0,this.rlt=void 0,this.pq=void 0,this.Bpt=()=>{!this.dat()&&this.hct()&&this.Rpt.Bpt()},this.glt=t=>{this.Rlt.glt(t),this.So(new bH(t.Yut,t.fpt))},this.imt=t=>{this.hmt(t)},this.aS=function(){const t=JW;return JW+=1,t}(),this.H3=t,this.aV=s,this.Mz=n,this.Rpt=i,this.PL=e,this.Sut=r,this.iV=h,this.Opt=o,this.cdt=a,this.ndt=a?YT(t,a):void 0,this.Ndt=u,this.Zpt=c,this.rlt=d,this.pq=l}};var JW=0;var ZW=class extends Ne{GY(t,i){return this.umt(t,i)}async umt(t,i){for(const i of t)this.cmt(i);await this.Un(i);for(const t of this.lmt.dmt)t.Km===at.LT&&(t.xat&&0!==t.xat.length?await this.fmt.oV(t):this.So(new mH("No supported representation found in the AdaptationSet with mimetype : "+t.Km)))}get JI(){return this.yO}get ct(){return this.PL.ct}vmt(t){return new YW(t,this,this.PL,this.aV,this.Mz,this.Sut,this.iV,this.Opt,this._mt,this.Ndt,this.Zpt,this.rlt,this.pq)}dat(){return this.Zlt.some(t=>t.dat())}hct(){return 0!==this.Zlt.length&&this.Zlt.every(t=>t.hct())}Bpt(){this.gmt()&&this.So(new yH)}Qpt(t){if(St(t)){if(this.w3.e4)return this.w3.e4}else if($y(t)&&this.w3.s4)return this.w3.s4;throw new m("Cannot allocate source buffer for mime type "+t)}pmt(t){t.wn([hc.ma,d.Yw,d.ey,d.iy,d.ly,d._y,d.Sw],this.Rs),t.wn(bi.pZ,this.mmt),t.wn("amt",this.Rs)}get Rt(){return this.Zlt.some(t=>t.Rt)}async wmt(t){await Promise.all(this.Zlt.map(i=>i.kn(t))),Wt(this.Zlt)}get ht(){return this.tO}get Fx(){if(0===this.Zlt.length)return Uo.rL();const t=this.Zlt.map(t=>t.Fx);let i=Uo.nL(0,1/0);for(const e of t)i=i.Mn(e);if(0===i.V)return i;if(this.hct()){const t=i.Mn(this.act);if(0===t.V)return i;const e=t.An(t.V-1);let s=0;for(const t of this.Zlt)s=_.max(s,t.Npt);e<=s&&(i=i.HM(new Uo([e,s],[!0,!0])))}return i}get T8(){return this.PL.T8}get zx(){return this.PL.zx}get Wpt(){return this.ymt}get An(){if(this.bmt){const t=this.ct;if(!S(t)&&t!==Gl)return t}if(!this.Zlt.length)return NaN;let t=0;for(const i of this.Zlt)t=_.max(t,i.An);return t}get bmt(){const t=this.lmt.jdt;if(t.Km===Lh.SV)return!1;const i=t.Amt;return 0!==i.length&&this.lmt===i[i.length-1]}get kP(){if(!this.Zlt.length)return Uo.rL();let t=Uo.hL();for(const i of this.Zlt)t=t.Mn(i.kP);if(t.V>0&&this.bmt&&isFinite(this.ct)){const i=this.ct,e=t.An(t.V-1);i>e&&(t=t.HM(Uo.nL(e,i).MM()))}return t}get Mc(){return this.lmt}get nt(){return this.Gl}get rt(){return this.sO}get Ti(){return this.ju.Ti}get Mi(){return this.ju.Mi}get ZW(){const t=this.zx,i=this.Fx,e=i.zM(t);if(-1!==e)return{Tn:i.Tn(e),An:i.An(e)}}get act(){const t=this.lmt.Tn,i=this.bmt?1/0:this.lmt.An;return Uo.nL(t,i)}gmt(){if(this.dat())return!1;if(!this.hct())return!1;const t=this.Fx;if(0===t.V)return!1;const i=this.zx;if(this.bmt)return t.Tn(t.V-1)<=i;{const e=t.Mn(this.act);if(0===e.V)return!0;const s=e.Tn(e.V-1),n=e.An(e.V-1)+.1;return s<=i&&i<=n}}get Smt(){return this.Tmt}async wat(t){this.Tmt||(this.Tmt=!0,await Promise.all(this.Zlt.map(i=>i.wat(t))))}async bat(t){this.Tmt&&(this.Tmt=!1,await Promise.all(this.Zlt.map(i=>i.bat(t))))}async kn(t){this.PL.mn(d.yy,this.kmt),this.PL.mn(d.xw,this.Emt),this.PL.mn(d.LICENSE_REQUEST_GENERATED,this.xmt),this.Vo(),this.lmt.mn(jt.Vot,this.Rs),this.Pmt.Zg(),this.Ypt&&(await this.Ypt.catch(gs),this.Ypt=void 0),await this.wmt(t),await this.fmt.kn(),this.tO.kn(),this.sO.kn(),this.Gl.kn(),this.Imt()}cmt(t){this.Cmt.push(t),t.wn("Rmt",this.Dmt);const i=t.Km===at.Bk?this.tO:this.sO;for(const e of t.Z)i.tt(e)}Nmt(t){const i=t.Km===at.Bk?this.tO:this.sO;for(const e of t.Z)i.it(e),e.kn();t.kn(),_e(this.Cmt,t)}Imt(){for(let t=this.Cmt.length-1;t>=0;t--)this.Nmt(this.Cmt[t])}get Bmt(){return this.Cmt.map(t=>t.kpt).filter(it)}get Mmt(){return this.Zlt.map(t=>t.kpt).filter(it)}Un(t,i){return this.Pmt.Zg(),this.Pmt=Zc.ep([i]),this.Ypt=Cu(this.vE(t,this.Ypt,this.Pmt.Yg),this.Pmt).catch(this.Lmt),this.Ypt}async vE(t,i,e){i&&await i.catch(gs),fr(e);const s=[],n=this.Zlt.slice(),r=t.slice();Wt(this.Zlt);for(const t of n){const i=t.kpt;i&&Ct(r,i)?(this.Zlt.push(t),s.push(t.Un(i,e)),_e(r,i)):(this.Gl.XW(t.nt),await t.kn(),fr(e))}for(const t of r){const i=this.vmt(t.iat);this.Gl.qW(i.nt),this.Zlt.push(i),this.pmt(i),s.push(i.Un(t,e))}await Promise.all(s)}async RZ(t,i,e){this.w3!==e&&(this.w3=e,await this.wmt(!1)),await this.Un(t),this.ymt=i}async Omt(t){for(const i of this.Zlt){const e=i.kpt;if(void 0!==e)for(const s of e.Zut.xat){(s.NW||[]).some(i=>i.fH&&ko(aa(t),Xe(i.fH)))&&!s.Plt&&(s.Plt=!0,await i.dlt(s,s.qot),this.So(new AL(new fs(me.CONTENT_PROTECTION_OUTPUT_RESTRICTED,"Content unavailable due to DRM restrictions"))))}}}async Fmt(t){for(const i of this.Zlt){const e=i.kpt;if(void 0!==e)for(const s of e.xat){const e=s.NW,n=s.qot;if(void 0===e||0===e.length||void 0===n)continue;if(!e.some(t=>Ct(s.Umt,t)))continue;const r=this.Vmt(e,t.xy);n.xst!==r&&(r?i.vlt(n):await i.dlt(s,n))}}}Vmt(t,i){let e=!1;const s=t.reduce((t,i)=>!i.fH||Ct(t,i.fH)?t:[...t,i.fH],[]);return 0===s.length||(i.Xy((n,r)=>{if("usable"!==n)return;(t.some(t=>t.fH&&ko(aa(r),Xe(t.fH)))||lm(r,Yc)&&1===s.length&&1===i.Wy)&&(e=!0)}),e)}Aat(t){if(void 0===t)return;const i=t.lmt;if(this.lmt.Hmt===i||this.lmt.Wmt===i)for(const i of this.Zlt){const e=hh(t.Zlt,t=>t.V3===i.V3);void 0!==e&&i.Aat(e)}}get qmt(){return this.Cmt}constructor(t,i,e,s,n,r,h,o,a,u,c,l,f,v){var _,g;super(),this.yO=void 0,this.tO=new Ws,this.sO=new Ws,this.Gl=void 0,this.iV=void 0,this.fmt=void 0,this.aV=void 0,this.Mz=void 0,this.Sut=void 0,this.PL=void 0,this.lmt=void 0,this.Cmt=[],this.Pmt=new Zc,this.Tmt=!0,this.Zlt=[],this.ymt=void 0,this.pq=void 0,this.Ypt=void 0,this.Ndt=void 0,this.Zpt=void 0,this.w3=void 0,this.rlt=void 0,this.ju=void 0,this.Opt=void 0,this._mt=void 0,this.mmt=to(()=>{this.So(new Et(this.zx))},350),this.Dmt=t=>{const i=t.zmt.kpt;if(i)for(const t of this.Cmt){var e;t.kpt&&t.kpt!==i&&t.Km===(null==(e=i.plt)?void 0:e.Km)&&(t.mn("Rmt",this.Dmt),t.kpt.Rt=!1,t.wn("Rmt",this.Dmt))}this.Rs(t)},this.Lmt=t=>{Ce(t)||this.So(new el(bb(t,me.MEDIA_LOAD_ERROR)))},this.kmt=t=>{const i=t.J6;i&&this.Omt(i).catch(this.Lmt)},this.Gmt=t=>{this.Fmt(t).catch(this.Lmt)},this.xmt=t=>{for(const i of this.Zlt){const e=i.kpt;if(void 0!==e)for(const i of e.xat){const e=i.NW;if(void 0===e||0===e.length)continue;const s=t.Py;e.filter(t=>t.P8&&ko(new j(s),new j(t.P8))).forEach(t=>{i.Xmt(t)})}}},this.Emt=t=>{const i=t.J6;if(i)for(const t of this.Mmt)for(const e of t.Zut.xat){const s=(e.NW||[]).some(t=>t.fH&&ko(aa(i),Xe(t.fH)));e.Plt&&s&&(e.Plt=!1,e.qot&&t.vlt(e.qot))}},this.aV=e,this.Mz=s,this.Sut=n,this.PL=t,this.yO=mi(),this.Cmt=[],this.lmt=h,this.ymt=o,this.pq=v,this.iV=u,this.fmt=new pH(t,e,s,n,u,null==(g=null==r||null==(_=r.dash)?void 0:_.segmentRelativeVttTiming)||g),this.Gl=new Tu([this.fmt.nt]),this.Ndt=l,this.Zpt=f,this.lmt.wn(jt.Vot,this.Rs),this.ju=a,this.w3=i,this.rlt=r.lowLatency,this.Opt=c,this._mt=r.abr,this.PL.wn(d.yy,this.kmt),this.PL.wn(d.xw,this.Emt),this.PL.wn(d.LICENSE_REQUEST_GENERATED,this.xmt)}};r(),r(),r();var $W=/^P(?:(\d+)Y)?(?:(\d+)M)?(?:(\d+)D)?(?:T(?:(\d+)H)?(?:(\d+)M)?(?:(\d*\.?\d*)S)?)?$/,tq=class t{static PD(i){const e=i.match($W);if(!e)throw new m("The given value could not be parsed as a valid DateTimeInterval");const s=Number(e[1])||0,n=Number(e[2])||0,r=Number(e[3])||0,h=Number(e[4])||0,o=Number(e[5])||0,a=Number(e[6])||0;return new t(31536e3*s+2592e3*n+86400*r+3600*h+60*o+a)}get wft(){return ul.hU(this.jmt,1e3)}Qmt(){return this.jmt}Kmt(){return 1e3*this.jmt}constructor(t){this.jmt=void 0,this.jmt=t}};r();var iq=function(t){return t.Ymt="progressive",t.Jmt="interlaced",t.yk="unknown",t}({});r();var eq=class{rF(){return this.Zmt/this.$mt}constructor(t,i){this.Zmt=void 0,this.$mt=void 0,this.Zmt=t,this.$mt=i}};r();var sq=1886614376;function nq(t){const i=Xe(Og),e=t.byteLength,s=12+i.length+4+e,n=new j(s),r=dh(n),h=new oi;return kl(r,h,s),kl(r,h,sq),kl(r,h,0),Ar(r,h,i),kl(r,h,e),Ar(r,h,new j(t)),n.buffer}var rq=/^(?:true|false)$/i,hq=/^(-?)(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(?:Z|([+-])(\d{2}):(\d{2}))?$/;function Bn(t){if(void 0!==t)return tq.PD(t)}function oq(t){if(void 0===t)return;const i=t.match(hq);if(!i)throw new m("The given value could not be parsed as a valid Date");const[,e,s,n,r,h,o,a,u,c,d,l]=i,f=("-"===e?-1:1)*Number(s),v=Number(n)-1,g=Number(r),p=Number(h);let w=Number(o);const y=Number(a),b=Number("0."+(u||"")),A=_.round(1e3*b);if(c){w-=("-"===c?-1:1)*(60*Number(d)+Number(l))}const T=new Date(Date.UTC(f,v,g,p,w,y,A));if(S(T.getTime()))throw new m("The given value could not be parsed as a valid Date");return T}function aq(t){if(!t)return;const i=/(\d+)-(\d+)/.exec(t);return i?[dt(i[1]),dt(i[2])]:void 0}function uq(t){if(void 0!==t){if(!S(Number(t)))try{return yo.fromString(t,!0)}catch(t){}throw new m("The given value could not be parsed as a valid unsigned long")}}function dt(t){if(void 0===t)return;const i=Number(t);if(!S(i))return i;throw new m("The given value could not be parsed as a valid Number")}function cq(t){if(void 0===t)return;const i=t.split("/"),e=Number(i[0]),s=Number(i[1]||1);if(!S(e)&&!S(s))return new eq(e,s);throw new m("The given value could not be parsed as a valid frame rate")}function gi(t){if(void 0!==t){if(rq.test(t))return"true"===t.toLowerCase();if(!S(x(t)))return Boolean(x(t));throw new m("The given value could not be parsed as a valid Boolean.")}}function dq(t){return{Yu:t.hx,twt:gi(t.ox("availabilityTimeComplete")),iwt:dt(t.ox("availabilityTimeOffset"))}}function lq(t){return t.map(dq)}function fq(t){const i=Sq(t),e=function(t,i,e,s){let n=t.ux(e,i);return void 0===n&&(n=t.ox(s+":"+i)),n}(t,"default_KID","urn:mpeg:cenc:2013","cenc");let s;const n=Nx(t,"pssh","urn:mpeg:cenc:2013","cenc")[0];if(void 0!==n&&(s=gm(n.hx)),!s){const i=Nx(t,"pro","urn:microsoft:playready","mspr")[0];void 0!==i&&(s=function(t){const i=gm(t.hx);return nq(i)}(i))}return{fH:e,P8:s,x8:i.x8,XE:i.XE}}function vq(t){return{ewt:t.ox("sourceURL"),Wat:aq(t.ox("range"))}}function _q(t,i){const e=t.ox("d"),s=t.ox("t"),n=dt(t.ox("r"));i.push({ct:e,CO:s,swt:n})}function gq(t){return{Put:t.ox("index"),nwt:aq(t.ox("indexRange")),$D:t.ox("media"),rwt:aq(t.ox("mediaRange"))}}function pq(t){const i=wq(t),e=function(t){const i=t.map(gq);return i.length>0?i:void 0}(t.ZE("SegmentURL"));return Y({},i,{hwt:e,owt:t.ox("xlink:href"),awt:t.ox("xlink:actuate")})}function mq(t){const i=gi(t.ox("availabilityTimeComplete")),e=dt(t.ox("availabilityTimeOffset")),s=aq(t.ox("indexRange")),n=gi(t.ox("indexRangeExact")),r=t.ZE("Initialization");if(r.length>1)throw new m("The provided MPEG-DASH document's "+t.$E+" element can not have more than one Initialization element.");const h=1===r.length?vq(r[0]):void 0,o=uq(t.ox("presentationTimeOffset")),a=t.ZE("RepresentationIndex");if(a.length>1)throw new m("The provided MPEG-DASH document's "+t.$E+" element can not have more than one RepresentationIndex element.");return{twt:i,iwt:e,nwt:s,uwt:n,cwt:h,dwt:o,lwt:1===a.length?vq(a[0]):void 0,fwt:Bn(t.ox("timeShiftBufferDepth")),jD:dt(t.ox("timescale"))}}function wq(t){const i=mq(t),e=t.ZE("BitstreamSwitching"),s=e.length>0?vq(e[0]):void 0,n=dt(t.ox("duration")),r=t.ZE("SegmentTimeline");if(r.length>1)throw new m("The provided MPEG-DASH document's "+t.$E+" element can not have more than one SegmentTimeline element.");const h=1===r.length?function(t){const i=[],e=t.ZE("S");for(const t of e)_q(t,i);return i}(r[0]):void 0;return Y({},i,{vwt:s,ct:n,mht:h,_wt:dt(t.ox("startNumber")),gwt:dt(t.ox("endNumber"))})}function yq(t){return{mwt:function(t){if(!t)return;const i=t.split(/\s/);return i.length>1?(i.length=2,i.map(dt)):1===i.length?i.map(dt)[0]:void 0}(t.ox("audioSamplingRate")),Rrt:t.ox("codecs"),wwt:gi(t.ox("codingDependency")),NW:function(t){if(0!==t.length)return t.map(fq)}(t.ZE("ContentProtection")),ywt:function(t){return t.map(Tq)}(t.ZE("EssentialProperty")),bwt:function(t){return t.map(kq)}(t.ZE("SupplementalProperty")),Olt:cq(t.ox("frameRate")),Mi:dt(t.ox("height")),Awt:dt(t.ox("maxPlayoutRate")),Swt:dt(t.ox("maximumSAPPeriod")),lQ:t.ox("mimeType"),Twt:t.ox("profiles"),kwt:t.ox("sar"),Ewt:function(t){switch(t){case iq.Ymt:case iq.Jmt:case iq.yk:return t;default:return}}(t.ox("scanType")),xwt:t.ox("segmentProfiles"),Pwt:dt(t.ox("startWithSAP")),Ti:dt(t.ox("width"))}}function bq(t){const i=lq(t.ZE("BaseURL")),e=t.ZE("SegmentBase");if(e.length>1)throw new m("The provided MPEG-DASH document's "+t.WE+" element can not have more than one SegmentBase element.");const s=1===e.length?mq(e[0]):void 0,n=function(t){const i=t.map(pq);return i.length>0?i:void 0}(t.ZE("SegmentList")),r=t.ZE("SegmentTemplate");if(r.length>1)throw new m("The provided MPEG-DASH document's "+t.WE+" element can not have more than one SegmentTemplate element.");const h=1===r.length?function(t){return Y({},wq(t),{Iwt:t.ox("bitstreamSwitching"),Cwt:t.ox("index"),Rwt:t.ox("initialization"),Dwt:t.ox("media")})}(r[0]):void 0;return{Nwt:i,Bwt:s,Mwt:n,Lwt:h}}function Aq(t){const i=yq(t),e=bq(t),s=dt(t.ox("bandwidth")),n=t.ox("dependencyId"),r=t.ox("id"),h=t.ox("mediaStreamStructureId"),o=dt(t.ox("qualityRanking"));if(t.ZE("SegmentBase").length>1)throw new m("The provided MPEG-DASH document's Representation element can not have more than one SegmentBase element.");return Y({},i,e,{IW:s,Owt:n,o:r,Fwt:h,Uwt:o})}function Sq(t){return{x8:t.ox("schemeIdUri"),XE:t.ox("value")}}function Tq(t){return Sq(t)}function kq(t){return Sq(t)}function Eq(t){return Sq(t)}function xq(t){return Sq(t)}function Pq(t){var i;const e=yq(t),s=bq(t),n=function(t){return t.map(xq)}(t.ZE("Accessibility")),r=gi(t.ox("bitstreamSwitching")),h=t.ox("contentType"),o=dt(t.ox("group")),a=dt(t.ox("id")),u=(null==(i=t.ZE("Label")[0])?void 0:i.hx)||"",c=t.ox("lang"),d=dt(t.ox("maxBandwidth")),l=cq(t.ox("maxFrameRate")),f=dt(t.ox("maxHeight")),v=dt(t.ox("maxWidth")),_=dt(t.ox("minBandwidth")),g=cq(t.ox("minFrameRate")),p=dt(t.ox("minHeight")),w=dt(t.ox("minWidth")),y=t.ox("par"),b=function(t){return t.map(Aq)}(t.ZE("Representation"));if(0===b.length)throw new m("The provided MPEG-DASH document has an AdaptationSet with no valid Representation's");const A=function(t){return t.map(Eq)}(t.ZE("Role")),S=gi(t.ox("segmentAlignment"))||!1,T=dt(t.ox("selectionPriority")),k=T||1,E=gi(t.ox("subsegmentAlignment"))||!1;let x;try{x=dt(t.ox("subsegmentStartsWithSAP"))}catch(t){}return Y({},e,s,{olt:n,vwt:r,GT:h,plt:o,o:a,Th:u,bs:c,Vwt:d,Hwt:l,Wwt:f,qwt:v,zwt:_,Gwt:g,Xwt:p,Qwt:w,Kwt:y,xat:b,Glt:A,Ywt:S,tz:k,Jwt:E,Zwt:x,$wt:t.ox("xlink:actuate")||"onRequest",tyt:t.ox("xlink:href")})}function Iq(t){const i=uq(t.ox("presentationTime"))||yo.ZERO,e=uq(t.ox("duration")),s=dt(t.ox("id")),n=function(t){const i=t.nx,e={};for(let t=0;t<i.length;t++)e[i[t].l]=i[t].XE;return e}(t),r=t.hx;return{nM:i,ct:e,o:s,nx:n,lk:""!==r.trim()?r:t.ox("messageData")||""}}function Cq(t){return{tyt:t.ox("xlink:href"),$wt:t.ox("xlink:actuate"),x8:t.ox("schemeIdUri"),XE:t.ox("value"),jD:dt(t.ox("timescale")),dwt:uq(t.ox("presentationTimeOffset")),fQ:t.ZE("Event").map(Iq)}}function Rq(t){const i=bq(t),e=t.ZE("AssetIdentifier");if(e.length>1)throw new m("The provided MPEG-DASH document's Period element can not have more than one AssetIdentifier element.");const s=1===e.length?function(t){return Sq(t)}(e[0]):void 0,n=function(t){return t.map(Pq)}(t.ZE("AdaptationSet")),r=gi(t.ox("bitstreamSwitching")),h=Bn(t.ox("duration")),o=function(t){return t.map(Cq)}(t.ZE("EventStream")),a=t.ox("id"),u=Bn(t.ox("start")),c=(t.ZE("Subset"),t.ox("xlink:href"));return Y({},i,{jlt:n,iyt:s,vwt:r,ct:h,eyt:o,o:a,Tn:u,$wt:t.ox("xlink:actuate"),tyt:c})}function Dq(t){const i=t.ox("schemeIdUri");if(!i)return;return{x8:i,XE:t.ox("value")}}function Nq(t,i){const e=oq(t.ox("availabilityEndTime")),s=oq(t.ox("availabilityStartTime")),n=lq(t.ZE("BaseURL")),r=t.ox("id"),h=function(t){return t.map(t=>""+t.hx)}(t.ZE("Location")),o=Bn(t.ox("maxSegmentDuration")),a=Bn(t.ox("maxSubsegmentDuration")),u=Bn(t.ox("mediaPresentationDuration")),c=(t.ZE("Metrics"),Bn(t.ox("minBufferTime")));if(!c)throw new m("The provided MPEG-DASH document's MPD element does not have the required 'minimumBufferTime' attribute.");const d=Bn(t.ox("minimumUpdatePeriod")),l=function(t){return t.map(t=>Rq(t))}(t.ZE("Period"));if(!l.length)throw new m("The provided MPEG-DASH document's MPD element does not have the required 'Period' element.");const f=t.ox("profiles");if(!f)throw new m("The provided MPEG-DASH document's MPD element does not have the required 'profiles' attribute.");const v=oq(t.ox("publishTime")),_=Bn(t.ox("suggestedPresentationDelay")),g=Bn(t.ox("timeShiftBufferDepth")),p=function(t){switch(t){case Lh.AV:case Lh.SV:return t;default:return}}(t.ox("type")),w=function(t){const i=[];for(const e of t){const t=Dq(e);t&&i.push(t)}return i}(t.ZE("UTCTiming")),y=function(t){if(0===t.length)return;const i=t[0],e=i.ZE("Latency");if(0===e.length)return;const s=function(t){const i=t[0],e=dt(i.ox("target"));if(void 0===e)return;const s=dt(i.ox("min")),n=dt(i.ox("max"));return{syt:e,iU:s,tU:n}}(e);if(void 0===s)return;const n=function(t){if(0===t.length)return;const i=t[0],e=dt(i.ox("max")),s=dt(i.ox("min"));return{iU:s,tU:e}}(i.ZE("PlaybackRate"));return{nyt:s,vP:n}}(t.ZE("ServiceDescription"));return{ryt:e,hyt:s,Nwt:n,o:r,oyt:h,ayt:i,uyt:o,cyt:a,dyt:u,lyt:c,fyt:d,Amt:l,Twt:f,vyt:v,_yt:_,fwt:g,Km:p,gyt:w,pyt:y}}var Bq=class{myt(t,i){return function(t,i){if(!t)throw new m("The provided MPEG-DASH document does not contain a valid MPD root element.");return Nq(t,i)}(zd.HE(t).mx,i)}};function Mq(t){return{get bandwidth(){return t.IW},get codecs(){return t.Rrt},get id(){return t.o},get uid(){return t.JI},get name(){return t.Th},get averageBandwidth(){return t.wyt},get label(){return t.Th},set label(i){t.Th=Ts(i)},get available(){return t.xst},get score(){return t.yyt},addEventListener(i,e){t.wn(i,e)},removeEventListener(i,e){t.mn(i,e)}}}function Lq(t){return Gi(Mq(t),{get height(){return t.Mi},get width(){return t.Ti},get frameRate(){return t.Olt},get firstFrame(){return t.byt}})}function Oq(t){return Gi(Mq(t),{get audioSamplingRate(){return t.mwt}})}r(),r(),r(),r(),r(),r(),r(),r();var Va=class extends gp{constructor(t){super("update"),this.quality=void 0,this.quality=t}},Fq=class extends Ne{get Th(){return this.bO}set Th(t){this.bO!==t&&(this.bO=t,this.So(new Va(this.Ca)))}get wyt(){}get xst(){return this.Ayt}get yyt(){}ZU(){this.Ayt=!1,this.So(new Va(this.Ca))}JU(){this.Ayt=!0,this.So(new Va(this.Ca))}constructor(t,i,e,s,n){super(),this.o=void 0,this.IW=void 0,this.Rrt=void 0,this.Syt=void 0,this.JI=void 0,this.bO=void 0,this.Ayt=void 0,this.o=t,this.IW=i,this.Rrt=e,this.Syt=n,this.JI=hE(),this.bO=s||"",this.Ayt=!0}},Uq=class extends Fq{get Ca(){return this.hu||(this.hu=Lq(this)),this.hu}constructor(t,i,e,s,n,r,h,o,a=0){super(t,i,e,s,n),this.Olt=void 0,this.Ti=void 0,this.Mi=void 0,this.byt=void 0,this.hu=void 0,this.Olt=r,this.Ti=h,this.Mi=o,this.byt=a,this.hu=void 0}},Vq=class extends Fq{get Ca(){return this.hu||(this.hu=Oq(this)),this.hu}constructor(t,i,e,s,n,r){super(t,i,e,s,n),this.mwt=void 0,this.hu=void 0,this.mwt=r,this.hu=void 0}};r(),r();var Hq=class extends Ne{get Tyt(){const t=this.kyt();return null==t?void 0:t.Tn}get Eyt(){const t=this.kyt();return null==t?void 0:t.An}constructor(...t){super(...t),this.xyt=t=>{this.So(t)}}},Wq=class extends Hq{get Zut(){return this.mat}get mwt(){var t;return null!=(t=this.Pyt.lk.mwt)?t:this.Zut.mwt}get IW(){return this.Pyt.lk.IW||0}get Rrt(){const t=this.Pyt.lk;return t.Rrt?[t.Rrt]:this.Zut.Rrt}get Iyt(){const t=this.Pyt.lk;return t.Rrt?[t.Rrt]:[]}get Bp(){return this.Pyt.lk.Rrt||this.Zut.Bp}get wwt(){return this.Pyt.lk.wwt||this.Zut.wwt}get NW(){return this.Pyt.lk.NW||this.Zut.NW}get Umt(){return this.Cyt}get GT(){return this.lQ+'; codecs="'+this.Bp+'"'}get ywt(){const t=this.Pyt.lk;return t.ywt.length?t.ywt:this.Zut.ywt}get Ca(){return this.hu||(this.hu=function(t){return{get id(){return t.o},get type(){return t.Km},get bandwidth(){return t.IW},get width(){return t.Ti},get height(){return t.Mi},get frameRate(){var i,e;return null!=(e=null==(i=t.Olt)?void 0:i.rF())?e:NaN},get audioSamplingRate(){return t.mwt}}}(this))}get Olt(){var t;return null!=(t=this.Pyt.lk.Olt)?t:this.Zut.Olt}get Mi(){return this.Pyt.lk.Mi||this.Zut.Mi}get o(){return this.Pyt.lk.o||""}get Jdt(){return this.Ryt}set Jdt(t){this.Ryt=t}get Ydt(){const t=this.Pyt.Dyt();if(t)return{Yu:t.Yu,Wat:t.Wat,Xk:this.jdt.Xk}}get Awt(){return this.Pyt.lk.Awt||this.Zut.Awt||1}get Swt(){return this.Pyt.lk.Swt||this.Zut.Swt}get jdt(){return this.Oct.jdt}get lQ(){return this.Pyt.lk.lQ||this.Zut.lQ}get Oct(){return this.Zut.Oct}get Twt(){return this.Pyt.lk.Twt||this.Zut.Twt}get qot(){return this.Nyt}get kwt(){return this.Pyt.lk.kwt||this.Zut.kwt}get Ewt(){return this.Pyt.lk.Ewt||this.Zut.Ewt}get Byt(){return this.Pyt.Byt}get xwt(){return this.Pyt.lk.xwt||this.Zut.xwt}get mht(){return this.Pyt.mht}get Pwt(){return this.Pyt.lk.Pwt||this.Zut.Pwt}get Km(){const t=this.lQ.split("/")[0];return"application"===t||"text"===t||oP(this.lQ,this.Rrt)?at.LT:"video"===t?at.Mk:"audio"===t?at.Bk:"image"===t?at.Lk:at.yk}get Ti(){return this.Pyt.lk.Ti||this.Zut.Ti}get Hct(){return this.Myt}set Hct(t){this.Myt=t}get Plt(){return this.Lyt}set Plt(t){this.Lyt=t}Zct(t){const i=cV(t)?this.Pyt.Oyt(t):this.Pyt.Zct(t);return{Yu:i.Yu,Wat:i.Wat,Xk:this.jdt.Xk}}Fyt(){return this.Pyt.Fyt()}kyt(){return this.Pyt.kyt()}Uyt(){return this.Pyt.Uyt()}qct(t){return this.Pyt.qct(t)}Gct(t,i,e){return this.Pyt.Gct(t,this.jdt.Xk,i,e)}Mdt(t){return cV(t)?this.mht.Vyt(t,this.Pyt):this.mht.Mdt(t)}Lct(t){return cV(t)?this.mht.Hyt(t,this.Pyt):this.mht.Lct(t)}Xmt(t){Ct(this.Cyt,t)||this.Cyt.push(t)}kn(){this.Pyt.mn(jt.Fot,this.xyt),this.Cyt=[]}constructor(t,i){if(super(),this.mat=void 0,this.hu=void 0,this.Pyt=void 0,this.Nyt=void 0,this.Ryt=void 0,this.Myt=!1,this.Lyt=!1,this.Cyt=[],this.mat=t,this.Pyt=i,this.Pyt.wn(jt.Fot,this.xyt),this.Km===at.Mk){var e,s;const t=null!=(s=null==(e=this.Olt)?void 0:e.rF())?s:NaN;this.Nyt=new Uq(this.o,this.IW,this.Bp,"","",t,this.Ti,this.Mi)}else this.Km===at.Bk?this.Nyt=new Vq(this.o,this.IW,this.Bp,"","",this.mwt):this.Nyt=void 0}},qq=class extends Hq{get olt(){return this.Pyt.lk.olt}get mwt(){var t;return null!=(t=this.Pyt.lk.mwt)?t:-1}get Rrt(){if(this.Pyt.lk.Rrt)return[this.Pyt.lk.Rrt];{const t=[];for(const i of this.xat)i.Iyt.length&&-1===t.indexOf(i.Bp)&&t.push(i.Bp);return t}}get Bp(){return this.Rrt.join()}get wwt(){return this.Pyt.lk.wwt}get NW(){return this.Pyt.lk.NW}get GT(){return this.lQ+'; codecs="'+this.Bp+'"'}get ywt(){return this.Pyt.ywt}get bwt(){return this.Pyt.bwt}get Olt(){return this.Pyt.lk.Olt}get plt(){return this.Pyt.lk.plt}get Mi(){return this.Pyt.lk.Mi||0}get o(){return this.Pyt.lk.o}get Th(){return this.Pyt.lk.Th||""}get Awt(){return this.Pyt.lk.Awt}get Swt(){return this.Pyt.lk.Swt}get jdt(){return this.Oct.jdt}get lQ(){return this.Pyt.lk.lQ||this.Slt[0].lQ}get Oct(){return this.lmt}get Twt(){return this.Pyt.lk.Twt}get xat(){return this.Slt}get Glt(){return this.Pyt.lk.Glt||[]}get kwt(){return this.Pyt.lk.kwt}get Ewt(){return this.Pyt.lk.Ewt}get xwt(){return this.Pyt.lk.xwt}get tz(){return this.Pyt.lk.tz}get Pwt(){return this.Pyt.lk.Pwt}get Km(){const t=(this.Pyt.lk.GT||this.lQ).split("/")[0];return"application"===t||"text"===t||"subtitle"===t||oP(this.lQ,this.Rrt)?at.LT:"video"===t?at.Mk:"audio"===t?at.Bk:"image"===t?at.Lk:at.yk}get Ti(){return this.Pyt.lk.Ti||0}get Tit(){return this.Pyt.lk.bs||""}get Vlt(){return this.Tyt}get Ult(){const t=this.Vlt,i=this.Eyt;if(void 0===t||void 0===i)return;const e=_.min(i,this.jdt.Wyt);return _.max(t,e)}async er(t,i){if(0===this.Slt.length){const e=this.Pyt.xat.map(e=>this.qyt(e,t,i));this.Slt=(await Promise.all(e)).filter(it)}this.zyt()}async qyt(t,i,e){const s=new Wq(this,t),n=await i(s);if(fr(e),n)return s}zyt(){if(!this.Slt.length)throw new m("Detected an AdaptationSet without any supported Representations.")}kyt(){return this.Pyt.kyt()}Uyt(){return this.Pyt.Uyt()}kn(){this.Pyt.mn(jt.Fot,this.xyt);for(const t of this.Slt)t.kn();Wt(this.Slt)}constructor(t,i){super(),this.Pyt=void 0,this.lmt=void 0,this.Slt=[],this.lmt=t,this.Pyt=i,this.Pyt.wn(jt.Fot,this.xyt)}};function zq(t,i){const e=[];for(const s of i)for(const i of t)e.push(zd.Dh(i,s));return e}r(),r(),r(),r(),r(),r(),r();var Gq=class{Gyt(t){const i=t-this.lmt.Tn;if(i<0||i>=this.lmt.ct)return;const e=this.Xyt();return void 0!==e&&rs(e,i,1e-5)?this.jyt():this.Qyt(i)}Wct(t){const i=t-this.lmt.Tn;if(!(i<0))return this.Kyt(_.min(i,this.lmt.ct))}jyt(){return this.Yyt(0)}Jyt(){const t=this.lmt.ct;if(isFinite(t))return this.Kyt(t)}get Zyt(){return this.lmt.tbt.$yt&&void 0!==this.ibt()}Fyt(t){if(this.lmt.tbt.Km===Lh.SV){if(this.Zyt){const i=this.jyt(),e=this.ibt();if(void 0===i||void 0===e)return;return{ebt:t,sbt:i,nbt:e}}const i=this.rbt(t);if(!i)return;return{ebt:t,sbt:this.hbt(t),nbt:i}}{0;const i=this.jyt();if(i)return{ebt:t,sbt:i,nbt:this.Jyt()}}}Uyt(t,i){if(i){let t=this.Qdt(i.sbt);const e=this.Kct(i.nbt);if(e){const i=this.Kdt(e);(!t||i.getTime()<t.getTime())&&(t=i)}return t}{const i=this.jyt();if(i){const e=this.Kdt(i);if(t.getTime()<e.getTime())return e}const e=this.lmt.tbt.hyt;return t.getTime()<e.getTime()?e:void 0}}rbt(t){const i=(t.getTime()-this.lmt.tbt.hyt.getTime())/1e3-this.lmt.Tn+this.obt;let e=this.Kyt(No(i,0,this.lmt.ct));if(!e)return;if(e=this.abt(e,t),!e)return;let s=this.Kct(e);for(;s&&this.nlt(s,t);)e=s,s=this.Kct(e);return e}hbt(t){let i;const e=this.ubt.fwt;if(e){const s=(t.getTime()-this.lmt.tbt.hyt.getTime())/1e3-this.lmt.Tn-e.Qmt();i=this.Kyt(No(s,0,this.lmt.ct)),i||(i=this.jyt())}else i=this.jyt();if(!i)return;if(i=this.abt(i,t),!i)return;let s=this.Qct(i);for(;s&&this.nlt(s,t);)i=s,s=this.Qct(i);return i}abt(t,i){let e=t;for(;e&&this.Kdt(e).getTime()>i.getTime();)e=this.Qct(e);if(!e)return;const s=this.Qdt(e);if(s&&s.getTime()<=i.getTime()){const t=this.Qct(e);for(t&&this.nlt(t,i)&&(e=t);e;){if(this.Kdt(e).getTime()>i.getTime())return;if(this.nlt(e,i))break;e=this.Kct(e)}if(!e)return}return e}nlt(t,i){if(this.Zyt)return!0;if(this.Kdt(t).getTime()>i.getTime())return!1;const e=this.Qdt(t);return!(e&&i.getTime()>=e.getTime())}cbt(t,i){if(this.Zyt)return!0;if(this.dbt(t).getTime()>i.getTime())return!1;const e=this.Qdt(t);return!(e&&i.getTime()>=e.getTime())}lbt(t,i,e){const s=Ls(i,this.Jb)+this.lmt.Tn;return{Put:t,fbt:i,CO:s,ct:e,RO:s+e}}dbt(t){return this.lmt.tbt.Km===Lh.SV?new Date(this.lmt.tbt.hyt.getTime()+1e3*(t.CO+t.ct)):this.lmt.tbt.hyt}Kdt(t){const i=this.dbt(t);return this.lmt.tbt.Km===Lh.SV?new Date(i.getTime()-1e3*this.obt):i}Qdt(t){let i=1/0;if(this.lmt.tbt.Km===Lh.SV){const e=this.ubt.fwt;e&&(i=this.dbt(t).getTime()+1e3*t.ct+e.Kmt())}const e=this.lmt.tbt.ryt;return e&&(i=_.min(i,e.getTime())),i===1/0?void 0:new Date(i)}vbt(t,i){return t.Put+i}get EU(){return this.lmt.Tn-Ls(this._bt,this.Jb)}get dwt(){return Ls(this._bt,this.Jb)}qct(t){return!1}Gct(t,i,e,s,n){const r=this.gbt(t);if(!r)return Promise.reject(new m("Invalid segment"));const h=this.pbt(r.Put,i);return h?Promise.resolve(h):ua(this.mbt(r.Put,i,e,s),n)}pbt(t,i){}mbt(t,i,e,s){return Promise.reject(new m("Not supported"))}Qct(t){const i=this.gbt(t);if(i)return this.Yyt(i.Put-1)}Kct(t){const i=this.gbt(t);if(i)return this.Yyt(i.Put+1)}gbt(t){const i=this.Yyt(t.Put);if(i&&i.CO===t.CO)return i;const e=this.Gyt(t.CO);return e&&e.CO===t.CO?e:void 0}wbt(t,i){const e=this.Xct(t);if(!e||!this.qct(e.Put))return;const s=this.pbt(e.Put,i);return s?s.wbt(t):void 0}Xct(t){return this.Yyt(t.ybt)}Mdt(t){const i=this.gbt(t);return!!i&&0===i.Put}Vyt(t,i){const e=this.wbt(t,i);return!!e&&0===e.xut}Lct(t){const i=this.gbt(t);if(!i)return!1;const e=this.Jyt();return!!e&&i.Put===e.Put}Hyt(t,i){const e=this.wbt(t,i);if(!e)return!1;const s=this.Jyt();if(!s||e.ybt!==s.Put)return!1;const n=this.pbt(e.ybt,i);return e.xut+1===n.V}zg(){}constructor(t,i){this.lmt=void 0,this.ubt=void 0,this.Jb=void 0,this.obt=void 0,this._bt=void 0,this.lmt=t,this.ubt=i,this.Jb=i.jD,this.obt=i.iwt,this._bt=i.dwt}},Xq=class extends Gq{Yyt(t){if(t<0)return;const i=this.bbt.multiply(t),e=Ls(i,this.Jb),s=this.lmt.ct;if(e>=s)return;const n=this.Abt();if(void 0!==n){if(t>n)return;if(t===n&&isFinite(s))return this.lbt(t,i,s-e)}return isFinite(s)&&e+this.Sbt>s?this.lbt(t,i,s-e):this.lbt(t,i,this.Sbt)}Xyt(){return 0}Qyt(t){const i=_.floor(t/this.Sbt),e=this.Abt();return void 0!==e&&i>=e?this.Yyt(e):this.Yyt(i)}Kyt(t){if(t>=this.lmt.ct){const t=_.ceil(this.lmt.ct/this.Sbt)-1,i=this.Abt();return void 0!==i&&t>=i?this.Yyt(i):this.Yyt(t)}return this.Qyt(t)}Abt(){const t=this.ubt.gwt;var i;if(void 0!==t)return t-(null!=(i=this.ubt._wt)?i:1);const e=this.ubt.Tbt;return void 0!==e&&e>0?e-1:void 0}ibt(){if(isFinite(this.lmt.ct))return this.Jyt()}kbt(t,i){return this.bbt.multiply(t.Put+(i-1))}er(){}constructor(t,i){super(i,t),this.Sbt=void 0,this.bbt=void 0;const e=t.Ebt,s=t.ct;if(void 0===e||void 0===s)throw new m("MultipleSegmentBase does not have a segment duration specified.");this.bbt=e,this.Sbt=s}};function jq(t,i,e){const s=i.length;if(0===s)return-1;let n=0,r=s-1,h=t.xbt(i[n]),o=t.Pbt(i[r]);for(;n<=r&&t.Ibt(h,e)<=0&&t.Ibt(e,o)<0;){const a=n+_.floor(t.Cbt(e,h,o)*(r-n)),u=i[a],c=t.xbt(u),d=a+1<s?t.xbt(i[a+1]):t.Pbt(u);if(t.Ibt(d,e)<=0)n=a+1,h=d;else{if(!(t.Ibt(e,c)<0))return a;r=a-1,o=c}}return-1}function Qq(t,i){return jq(Kq.Bg,t,i)}r(),r(),r();var Kq=class t{static get Bg(){return null!=this.Rbt||(this.Rbt=new t),this.Rbt}xbt(t){return t.CO}Pbt(t){return t.RO}Ibt(t,i){return t.compare(i)}Cbt(t,i,e){return t.subtract(i).toNumber()/e.subtract(i).toNumber()}};Kq.Rbt=void 0;var Yq=.01,Jq=class extends Gq{Yyt(t){if(!(t<0))return t<this.Dbt.length?this.Dbt[t].yut:this.Nbt(t-this.Dbt.length)}Xyt(){if(this.Dbt.length>0)return Ls(this.Dbt[0].CO,this.Jb)}Qyt(t){if(this.Bbt&&Ls(this.Bbt.CO,this.Jb)<=t){const i=Ls(this.Bbt.CO,this.Jb),e=Ls(this.Bbt.ct,this.Jb),s=_.floor((t-i)/e);return this.Nbt(s)}if(this.Dbt.length>0&&rs(t,Ls(this.Dbt[0].CO,this.Jb),1e-5))return this.Dbt[0].yut;const i=Qq(this.Dbt,yo.fromNumber(t*this.Jb));return i<0?void 0:this.Dbt[i].yut}Kyt(t){if(!this.Bbt&&this.Dbt.length>0){const i=this.Dbt[this.Dbt.length-1];if(function(t,i,e){return tf(t,i,e)>=0}(t,Ls(i.RO,this.Jb),1e-5))return i.yut}const i=this.Xyt();return i&&t<i?this.Dbt[0].yut:this.Qyt(t)}ibt(){return isFinite(this.lmt.ct)?this.Jyt():this.Yyt(this.Dbt.length-1)}kbt(t){return this.Mbt(t)}Nbt(t){if(!this.Bbt)return;const i=this.Bbt.CO,e=this.Bbt.ct,s=i.add(e.multiply(t)),n=Ls(s,this.Jb),r=this.lmt.ct;if(n>=r)return;const h=this.Dbt.length+t,o=_.min(Ls(e,this.Jb),n+r);return this.lbt(h,s,o)}Mbt(t){return t.fbt.add(this._bt)}er(){const t=this.ubt.lk.mht;if(!t)throw new m("MultipleSegmentBaseTO does not have a SegmentTimeline specified.");this.Lbt(t)}Lbt(t){const i=this._bt;this.Obt(t,i);const e=this.Fbt(t);this.Ubt(t,i,e.Vbt,e.ybt)}Obt(t,i){const e=this.Dbt;if(0===t.length)Wt(e);else{const s=t[0];let n=0;const r=Ls(s.CO?yo.fromString(s.CO,!1).subtract(i):yo.ZERO,this.Jb);for(;n<e.length&&Ls(e[n].CO,this.Jb)<r-Yq;)n++;n>0&&e.splice(0,n)}}Fbt(t){const i=this.Dbt,e=this.rpt;let s=0,n=0;for(;s<t.length&&n<i.length;){const r=t[s].swt||0;if(r<0)break;const h=n+r;if(h>=i.length)break;if(i[h].CO.greaterThanOrEqual(e))break;if(i[n].yut.Put===n)n=h+1;else for(;n<=h;)i[n].yut.Put=n,n++;0,s++}return{Vbt:s,ybt:n}}Ubt(t,i,e,s){const n=this.Dbt;let r,h=e,o=s;for(;h<t.length;){const e=t[h],s=yo.fromString(e.ct,!1),a=e.swt||0;let u;if(e.CO){if(u=yo.fromString(e.CO,!1).subtract(i),o>0){const t=n[o-1];t.RO.greaterThan(u)&&(t.ct=u.subtract(t.CO),t.RO=t.CO.add(t.ct))}}else u=o>0?n[o-1].RO:yo.ZERO;if(a<0){if(h+1===t.length){r={CO:u,ct:s};break}const e=yo.fromString(t[h+1].CO,!1).subtract(i);for(;u.lessThan(e);){const t=u.add(s);this.Hbt(n,o,u,s,t),u=t,o++}}else{const t=o+a;for(;o<=t;){const t=u.add(s);this.Hbt(n,o,u,s,t),u=t,o++}}h++}o<n.length&&n.splice(o),n.length>0&&(this.rpt=n[n.length-1].CO),this.Bbt=r}Hbt(t,i,e,s,n){if(i<t.length){const r=t[i];0,r.ct.equals(s)?r.yut.Put=i:t[i]={CO:e,ct:s,RO:n,yut:this.lbt(i,e,Ls(s,this.Jb))}}else t.push({CO:e,ct:s,RO:n,yut:this.lbt(i,e,Ls(s,this.Jb))})}constructor(t,i){super(i,t),this.Dbt=[],this.Bbt=void 0,this.rpt=yo.ZERO,this.er()}};r();var Zq=class{get lk(){return this.Wp}get iwt(){return this.Wp&&void 0!==this.Wp.iwt?this.Wp.iwt:this.Wbt?this.Wbt.iwt:0}get dwt(){return this.Wp&&void 0!==this.Wp.dwt?this.Wp.dwt:this.Wbt?this.Wbt.dwt:yo.ZERO}get fwt(){return this.Wp&&void 0!==this.Wp.fwt?this.Wp.fwt:this.Wbt?this.Wbt.fwt:this.Oct.tbt.fwt}get jD(){return this.Wp&&void 0!==this.Wp.jD?this.Wp.jD:this.Wbt&&this.Wbt.jD?this.Wbt.jD:1}get nwt(){return this.Wp&&void 0!==this.Wp.nwt?this.Wp.nwt:this.Wbt?this.Wbt.nwt:void 0}get cwt(){return this.Wp&&void 0!==this.Wp.cwt?this.Wp.cwt:this.Wbt?this.Wbt.cwt:void 0}get mht(){return this.qbt||(this.qbt=this.zbt()),this.qbt}zbt(){if(this.Gbt=this.Xbt(),this.Gbt)return this.Gbt;if(this.Wbt)return this.Wbt.mht;throw new m("Missing media segment information.")}Dyt(t){const i=this.cwt;if(i){return{Yu:(void 0!==i.ewt?zd.Dh(i.ewt,t.Nwt[0]):t.Nwt[0]).href,Wat:i.Wat}}const e=this.nwt;if(e)return{Yu:t.Nwt[0].href,Wat:[0,e[0]-1]}}er(t){this.Wp=t,this.Gbt&&this.Gbt.er()}zg(){this.Gbt&&(this.Gbt.zg(),this.Gbt=void 0)}constructor(t,i,e){this.Oct=void 0,this.Wbt=void 0,this.Wp=void 0,this.qbt=void 0,this.Gbt=void 0,this.Oct=t,this.Wbt=i,this.Wp=e}},$q=class extends Zq{get ct(){return void 0!==this.Wp.ct?this.Wp.ct/this.jD:this.Wbt&&tz(this.Wbt)?this.Wbt.ct:void 0}get Ebt(){return void 0!==this.Wp.ct?yo.fromNumber(this.Wp.ct):this.Wbt&&tz(this.Wbt)?this.Wbt.Ebt:void 0}get _wt(){return void 0!==this.Wp._wt?this.Wp._wt:this.Wbt&&tz(this.Wbt)?this.Wbt._wt:void 0}get gwt(){return void 0!==this.Wp.gwt?this.Wp.gwt:this.Wbt&&tz(this.Wbt)?this.Wbt.gwt:void 0}Xbt(){return void 0!==this.Wp.mht?new Jq(this,this.Oct):void 0!==this.Wp.ct?new Xq(this,this.Oct):void 0}};function tz(t){return t instanceof $q}r();var iz=class{Qy(t){return this.jbt.replace(/\$\$|\$(RepresentationID|Number|Bandwidth|Time)(?:%0(\d+)([diuxXo]))?\$/g,(i,e,s,n)=>{if("$$"===i)return"$";const r=t[e];if(void 0===r)return i;if(void 0===s)return r.toString();let h=function(t,i){switch(i){case"d":case"i":case"u":return t.toString(10);case"x":return t.toString(16);case"X":return t.toString(16).toUpperCase();case"o":return t.toString(8);default:return}}(r,n);return void 0===h?i:(h=Wa(h,Number(s),"0"),h)})}constructor(t){this.jbt=void 0,this.jbt=t}};var ez=class t extends $q{get Rwt(){return this.Qbt?this.Qbt:this.Wbt&&this.Wbt instanceof t?this.Wbt.Rwt:void 0}get Dwt(){return this.Kbt?this.Kbt:this.Wbt&&this.Wbt instanceof t?this.Wbt.Dwt:void 0}Dyt(t){const i=this.Rwt;if(!i)return super.Dyt(t);const e=i.Qy({Bandwidth:t.lk.IW,RepresentationID:t.lk.o});return{Yu:zd.Pm(e,t.Nwt[0])}}Zct(t,i){var e;const s=null!=(e=i.Byt._wt)?e:1,n=this.Dwt.Qy({Bandwidth:i.lk.IW,Number:i.mht.vbt(t,s),RepresentationID:i.lk.o,Time:i.mht.kbt(t,s)});return{Yu:zd.Pm(n,i.Nwt[0])}}Oyt(t,i){}get Tbt(){}constructor(t,i,e){super(t,i,e),this.Qbt=void 0,this.Kbt=void 0,this.Qbt=e.Rwt?new iz(e.Rwt):void 0,this.Kbt=e.Dwt?new iz(e.Dwt):void 0}};r();var sz=class t extends $q{Zct(t,i){const e=this.hwt[t.Put],s=i.Nwt[0];let n;return n=e.$D?zd.Dh(e.$D,s):s,{Yu:n.href,Wat:e.rwt}}Oyt(t,i){}get hwt(){return void 0!==this.Wp.hwt?this.Wp.hwt:this.Wbt&&this.Wbt instanceof t?this.Wbt.hwt:void 0}get Tbt(){var t;return null==(t=this.hwt)?void 0:t.length}};r(),r(),r(),r();var nz=class{wbt(t){const i=this.jct(t.xut);if(i&&i.CO===t.CO)return i;const e=this.Ybt(t.CO);return e&&e.CO===t.CO?e:void 0}},rz=class extends nz{get V(){return this.Jbt.length}jct(t){if(t>=0&&t<this.V)return this.Zbt(this.Jbt[t])}Ybt(t){const i=this.$bt(t);if(this.Jbt.length>0){const t=this.Jbt[0];if(i<=Ls(t.CO,this.jD))return this.Zbt(t)}const e=Qq(this.Jbt,yo.fromNumber(i*this.jD));if(!(e<0))return this.Zbt(this.Jbt[e])}zct(t){const i=this.$bt(t),e=hf(this.Jbt,-1);return void 0!==e&&i>=Ls(e.RO,this.jD)?this.Zbt(e):this.Ybt(t)}Zbt(t){const i=Ls(t.CO,this.jD)-this.dwt,e=i+this.tAt,s=Ls(t.ct,this.jD);return{ybt:this.ybt,xut:t.Put,CO:e,fbt:yo.fromNumber(i*this.jD),ct:s,RO:e+s,iAt:[t.eAt,t.sAt]}}$bt(t){return t-this.tAt+this.dwt}constructor(t,i,e,s,n){super(),this.ybt=void 0,this.jD=void 0,this.tAt=void 0,this.dwt=void 0,this.Jbt=void 0,this.ybt=t,this.jD=i,this.tAt=e,this.dwt=s,this.Jbt=n}};r(),r(),r();var hz=class t{Egt(){return this.$R.ac<this.lk.byteLength}nAt(){const i=this.rAt(),e=this.hAt(),s=this.$R.ac,n=this.lk.byteLength;let r;r=t.oAt(e)?n-s:t.aAt(e);const h=s+r<=n?r:n-s,o=kt(this.lk,this.$R,h);return new az(i,dh(o))}rAt(){const t=this.hAt();if(t.length>7)throw new RangeError("Invalid EBML ID size");let i=0;for(let e=0;e<t.length;e++)i=256*i+t[e];return i}hAt(){const t=Cl(this.lk,this.$R.Fy());if(0===t)throw new RangeError("EBML variable sized integer is invalid");const i=8-(31-Rp(t));return zd.lm(i<=8&&i>=1,"Incorrect log2 value"),kt(this.lk,this.$R,i)}static aAt(t){if(8===t.length&&224&t[1])throw new g("EBML variable sized integer is too large");let i=0;for(let e=0;e<t.length;e++){const s=t[e];if(0===e){i=s&(1<<8-t.length)-1}else i=256*i+s}return i}static oAt(t){for(const i of oz)if(ko(t,new j(i)))return!0;return!1}constructor(t){this.lk=void 0,this.$R=void 0,this.lk=t,this.$R=new oi}},oz=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]],az=class{uAt(){return this.cAt.byteOffset}dAt(){return new hz(this.cAt)}lAt(){const t=this.cAt.byteLength;if(t>8)throw new RangeError("EMBL integer field size is too large");if(8===t&&224&this.cAt.getUint8(0))throw new RangeError("EMBL integer field value is too large");let i=0;for(let e=0;e<t;e++){i=256*i+this.cAt.getUint8(e)}return i}HJ(){if(4===this.cAt.byteLength)return this.cAt.getFloat32(0);if(8===this.cAt.byteLength)return this.cAt.getFloat64(0);throw new RangeError("Invalid size for EMBL floating-point field")}constructor(t,i){this.id=void 0,this.cAt=void 0,this.id=t,this.cAt=i}};function uz(t,i){const e=function(t){const i=new hz(dh(t)),e=i.nAt();if(e.id!==dz)throw new g("Missing WebM EBML header");const s=i.nAt();if(s.id!==lz)throw new g("Missing WebM SegmentElement");const n=s.uAt(),r=function(t){const i=t.dAt();let e;for(;i.Egt();){const t=i.nAt();if(t.id===fz){e=t;break}}if(!e)throw new g("Missing WebM InfoElement");return function(t){const i=t.dAt();let e,s=1e6;for(;i.Egt();){const t=i.nAt();t.id===vz?s=t.lAt():t.id===_z&&(e=t.HJ())}if(void 0===e)throw new g("Missing Duration in WebM InfoElement");const n=s/1e9,r=e*n;return{timecodeScale:n,duration:r}}(e)}(s);return{segmentOffset:n,timecodeScale:r.timecodeScale,duration:r.duration}}(i),s=new hz(dh(t)).nAt();if(s.id!==gz)throw new g("Missing WebM CuesElement");const n=function(t,i,e,s){const n=[],r=t.dAt();let h,o;for(;r.Egt();){const t=r.nAt();if(t.id!==pz)continue;const e=cz(t);if(!e)continue;const s=e.unscaledTime,a=i+e.relativeOffset;void 0!==h&&n.push({Put:n.length,CO:h,ct:s.subtract(h),RO:s,eAt:o,sAt:a-1}),h=s,o=a}if(void 0!==h){0;const t=yo.fromNumber(s/e);n.push({Put:n.length,CO:h,ct:t.subtract(h),RO:t,eAt:o,sAt:void 0})}return n}(s,e.segmentOffset,e.timecodeScale,e.duration);return{jD:_.round(1/e.timecodeScale),fAt:n}}function cz(t){const i=t.dAt(),e=i.nAt();if(e.id!==mz)throw new g("Missing CueTime in WebM CuePointElement");const s=yo.fromNumber(e.lAt()),n=i.nAt();if(n.id!==wz)throw new g("Missing CueTrackPositions in WebM CuePointElement");const r=n.dAt();let h=0;for(;r.Egt();){const t=r.nAt();if(t.id===yz){h=t.lAt();break}}return{unscaledTime:s,relativeOffset:h}}var dz=440786851,lz=408125543,fz=357149030,vz=2807729,_z=17545,gz=475249515,pz=187,mz=179,wz=183,yz=241,bz=class extends Gq{Yyt(t){if(0===t)return this.vAt}Xyt(){return 0}Qyt(t){return this.vAt}Kyt(t){return this.Qyt(t)}ibt(){return this.vAt}kbt(t,i){return yo.ZERO}Fyt(t){const i=this._At(t);return i&&{ebt:t,sbt:i,nbt:i}}_At(t){const i=this.vAt;return this.nlt(i,t)?i:void 0}rbt(t){return this._At(t)}hbt(t){return this._At(t)}er(){}qct(t){return 0===t&&void 0!==this.gAt}pbt(t,i){const e=i.Nwt[0].href;return this.pAt.get(e)}mbt(t,i,e,s){const n=i.Nwt[0].href;let r=this.mAt.get(n);if(void 0===r){const h=i.lQ,o=this.wAt.Yg;if(To(h))r=this.yAt(t,n,e,s,o);else{if(!tb(h))throw new as(me.MEDIA_NOT_SUPPORTED,"Unsupported MIME type for segment index: "+h);r=this.bAt(t,n,i,e,s,o)}this.mAt.set(n,r)}return r}async yAt(t,i,e,s,n){const r=this.gAt,h=await s.gdt(i,r,e,n),o=this.AAt(t,h);return this.pAt.set(i,o),o}AAt(t,i){const e=this.gAt,s=ha.pD(new DataView(i),new oi);if(s.Km!==ui.GR)throw new m("Invalid segment index");const n=Hn.UD(s.lk),r=function(t,i){const e=[];let s=t.wM,n=i+t.yM.toNumber(),r=0;for(const i of t.AM){const t=i.vM,h=yo.fromNumber(i.ct),o=s.add(h);0===i.fM&&e.push({Put:r++,CO:s,ct:h,RO:o,eAt:n,sAt:n+t-1}),n+=t,s=o}return e}(n,e[1]+1);return new rz(t,n.jD,this.lmt.Tn,Ls(this._bt,this.Jb),r)}async bAt(t,i,e,s,n,r){const h=e.Dyt(),o=this.gAt,a=n.gdt(h.Yu,h.Wat,s,r),u=n.gdt(i,o,s,r),[c,d]=await Promise.all([a,u]),l=this.SAt(t,d,c);return this.pAt.set(i,l),l}SAt(t,i,e){const s=uz(new j(i),new j(e));return new rz(t,s.jD,this.lmt.Tn,Ls(this._bt,this.Jb),s.fAt)}zg(){super.zg(),this.wAt.Zg()}constructor(t,i){super(i,t),this.gAt=void 0,this.vAt=void 0,this.pAt=Ba(),this.mAt=Ba(),this.wAt=new Zc,this.gAt=t.nwt,this.vAt=this.lbt(0,yo.ZERO,this.lmt.ct)}},Az=class extends Zq{get _wt(){}Zct(t,i){return{Yu:i.Nwt[0].href}}Oyt(t,i){return{Yu:i.Nwt[0].href,Wat:t.iAt}}Xbt(){return new bz(this,this.Oct)}};r();var Sz=class extends gp{constructor(){super(jt.Fot)}};r();var Bt=class extends Ne{get lk(){return this.Wp}get Nwt(){return this.TAt}kAt(){var t,i;return null!=(i=this.ubt)?i:null==(t=this.wE)?void 0:t.kAt()}EAt(t){const i=this.Oct,e=this.wE&&this.wE.kAt();this.Wp.Lwt?this.ubt=new ez(i,e,this.Wp.Lwt):this.Wp.Mwt?this.ubt=new sz(i,e,this.Wp.Mwt[0]):this.Wp.Bwt?this.ubt=new Az(i,e,this.Wp.Bwt):t&&!e&&(this.ubt=new Az(i,e,void 0))}xAt(t,i){this.Wp=t,this.TAt=t.Nwt&&t.Nwt.length>0?zq(t.Nwt.map(t=>t.Yu),i):i.slice(),this.ubt&&(t.Lwt?this.ubt.er(t.Lwt):t.Mwt?this.ubt.er(t.Mwt[0]):t.Bwt&&this.ubt.er(t.Bwt))}kyt(){var t;return null==(t=this.PAt)?void 0:t.IAt}Uyt(){var t;return null==(t=this.PAt)?void 0:t.CAt}RAt(t){const i=this.DAt,e=this.Oct.ct,s=this.PAt,n=this.NAt(t);s&&rs(e,i,1e-5)&&xz(s,n)||(this.DAt=e,this.PAt=n,this.So(new Sz))}zg(){this.Vo(),this.ubt&&(this.ubt.zg(),this.ubt=void 0)}constructor(t,i,e){super(),this.wE=void 0,this.Wp=void 0,this.TAt=void 0,this.ubt=void 0,this.DAt=1/0,this.PAt=void 0,this.wE=i,this.xAt(t,e)}};function Tz(t){let i,e;for(const e of t){const t=e.kyt();if(t){i=t.Tn;break}}if(void 0!==i){for(let i=t.length-1;i>=0;i--){const s=t[i].kyt();if(s){e=s.An;break}}return void 0!==e?{Tn:i,An:e}:void 0}}function kz(t){if(0===t.length)return;let i=0,e=1/0;for(const s of t){const t=s.kyt();if(!t)return;if(i=_.max(i,t.Tn),e=_.min(e,t.An),i>=e)return}return{Tn:i,An:e}}function Ez(t){let i;for(const e of t){const t=e.Uyt();t&&(!i||t.getTime()<i.getTime())&&(i=t)}return i}function xz(t,i){return function(t,i){return t&&i?t.getTime()===i.getTime():t===i}(t.CAt,i.CAt)&&function(t,i){return t&&i?rs(t.Tn,i.Tn,1e-5)&&rs(t.An,i.An,1e-5):t===i}(t.IAt,i.IAt)}var Pz=class extends Hq{get jlt(){return this.BAt}get Rrt(){return this.jlt.reduce((t,i)=>{for(const e of i.Rrt)Ct(t,e)||t.push(e);return t},[])}get Bp(){return this.Rrt.length>0?this.Rrt[0]:""}get Km(){return this.BAt[0].Km}get o(){return this.aS}get jdt(){return this.lmt.jdt}get lQ(){return this.BAt[0].lQ}get Oct(){return this.lmt}get xat(){return hs(this.jlt,t=>t.xat)}kyt(){return kz(this.BAt)}Uyt(){let t;for(const i of this.BAt){const e=i.Uyt();e&&(!t||e.getTime()<t.getTime())&&(t=e)}return t}kn(){this.Vo();for(const t of this.BAt)t.mn(jt.Fot,this.xyt)}constructor(t,i,e){super(),this.lmt=void 0,this.aS=void 0,this.BAt=void 0,this.lmt=t,this.aS=i,this.BAt=e.slice();for(const t of e)t.wn(jt.Fot,this.xyt)}};r();var Iz=class extends gp{constructor(){super(jt.Vot)}};function Cz(t){const i=[];for(const e of t){let t;const s=e.plt;void 0===s||(t=hh(i,t=>t.o===s)),t||(t={o:s,jlt:[]},i.push(t)),t.jlt.push(e)}return i}r();var Rz=class extends Hq{get jlt(){return this.BAt}get dmt(){return this.MAt}get iyt(){return this.Pyt.lk.iyt}get ct(){return this.Pyt.ct}get An(){return this.Tn+this.ct}get eyt(){return this.Pyt.lk.eyt||[]}get o(){return this.Pyt.o}get Hot(){return this.LAt}get jdt(){return this.OAt}get Wmt(){return this.OAt.FAt(this)}get Oct(){return this}get Hmt(){return this.OAt.UAt(this)}get VAt(){return this.HAt(1/0,_.min)}get WAt(){return this.HAt(0,_.max)}HAt(t,i){if(0===this.MAt.length)return;let e=t;for(const t of this.MAt)if(GT(t.Km)){const s=t.Eyt;if(void 0===s)return;e=i(e,s)}return e}get Tn(){return this.Pyt.Tn}get Xk(){return this.jdt.Xk}qAt(){this.LAt||(this.LAt=!0,this.So(new Iz),this.kn())}async er(t,i){0===this.BAt.length?(await this.zAt(this.Pyt.jlt,t,i),this.GAt(this.BAt),fr(i)):await this.XAt(t,i)}async zAt(t,i,e){for(const s of t){const t=new qq(this,s);try{await t.er(i,e),this.BAt.push(t)}catch(t){sa(t)}}}GAt(t){const i=Cz(t);for(const t of i){const i=new Pz(this,t.o,t.jlt);this.MAt.push(i)}}async XAt(t,i){for(const e of this.BAt)await e.er(t,i)}kyt(){return this.Pyt.kyt()}Uyt(){return this.Pyt.Uyt()}kn(){this.Vo(),this.Pyt.mn(jt.Fot,this.xyt);for(const t of this.MAt)t.kn();for(const t of this.BAt)t.kn();Wt(this.BAt),Wt(this.MAt)}constructor(t,i){super(),this.Pyt=void 0,this.BAt=[],this.MAt=[],this.OAt=void 0,this.LAt=!1,this.OAt=t,this.Pyt=i,this.Pyt.wn(jt.Fot,this.xyt)}};r();var Dz=class extends gp{constructor(){super(d.qw)}};r(),r();var Nz=function(t){return t.jAt="QAt",t}({}),Bz=class extends gp{constructor(){super(Nz.jAt)}};r(),r(),r(),r();var Mz=class extends Bt{get Zut(){return this.mat}get Oct(){return this.mat.Oct}get tbt(){return this.mat.tbt}get lQ(){return this.Wp.lQ||this.mat.lQ}get Byt(){return this.kAt()}get mht(){return this.Byt.mht}qct(t){const i=this.lQ;return!(!To(i)&&!tb(i))&&this.mht.qct(t.Put)}Gct(t,i,e,s){return this.mht.Gct(t,this,i,e,s)}Dyt(){return this.Byt.Dyt(this)}Zct(t){return this.Byt.Zct(t,this)}Oyt(t){return this.Byt.Oyt(t,this)}Fyt(){return this.KAt}NAt(t){const i=this.mht,e=i.Fyt(t),s=e&&function(t,i){const{sbt:e,nbt:s,ebt:n}=t,r=e.CO;let h;const o=i.dbt(s);if(o.getTime()<=n.getTime())h=s.RO;else{const t=(o.getTime()-n.getTime())/1e3,i=_.max(s.ct-t,0);h=s.CO+i}return{Tn:r,An:h}}(e,i),n=this.mht.Uyt(t,e);return this.KAt=e,{ebt:t,IAt:s,CAt:n}}er(t){this.xAt(t,this.mat.Nwt)}constructor(t,i){super(t,i,i.Nwt),this.mat=void 0,this.KAt=void 0,this.mat=i,this.EAt(!0)}},Lz=class extends Bt{get xat(){return this.Slt}get Oct(){return this.lmt}get tbt(){return this.lmt.tbt}get plt(){return this.Wp.plt}get lQ(){var t;return this.Wp.lQ||(null==(t=this.Slt[0])?void 0:t.lk.lQ)||""}get ywt(){return this.lk.ywt}get bwt(){return this.lk.bwt}er(t){this.xAt(t,this.lmt.Nwt);const i=t.xat||[];if(this.Slt.length!==i.length)throw new m("Expected "+this.Slt.length+' representations in adaptation set "'+t.o+'", found '+i.length);for(let t=0;t<i.length;t++)this.Slt[t].er(i[t])}RAt(t){for(const i of this.Slt)i.RAt(t);super.RAt(t)}NAt(t){return{ebt:t,IAt:kz(this.Slt),CAt:Ez(this.Slt)}}zg(){for(const t of this.Slt)t.zg();super.zg()}constructor(t,i){super(t,i,i.Nwt),this.lmt=void 0,this.Slt=void 0,this.lmt=i,this.EAt(!1),this.Slt=t.xat.map(t=>new Mz(t,this))}},Oz=class extends Bt{get jlt(){return this.BAt}get dmt(){return this.MAt}get Oct(){return this}get tbt(){return this.YAt}get o(){return this.Wp.o}get Tn(){return this.UU}get ct(){return this.Zb}er(t,i){this.xAt(t,this.YAt.Nwt),this.Zb=i;const e=t.jlt||[];if(this.BAt.length!==e.length)throw new m("Expected "+this.BAt.length+' adaptation sets in period "'+t.o+'", found '+e.length);for(let t=0;t<e.length;t++)this.BAt[t].er(e[t])}RAt(t){for(const i of this.BAt)i.RAt(t);super.RAt(t)}NAt(t){return{ebt:t,IAt:kz(this.BAt),CAt:Ez(this.BAt)}}zg(){for(const t of this.BAt)t.zg();super.zg()}constructor(t,i,e,s){super(i,void 0,t.Nwt),this.YAt=void 0,this.UU=void 0,this.Zb=void 0,this.BAt=void 0,this.MAt=[],this.YAt=t,this.UU=e,this.Zb=s,this.EAt(!1),this.BAt=(i.jlt||[]).map(t=>new Lz(t,this)),this.MAt=Cz(this.BAt)}};r();var Fz=class{get JAt(){return this.ZAt.nyt.iU}get $At(){return this.ZAt.nyt.tU}get tSt(){return this.ZAt.nyt.syt}get iSt(){var t;return null==(t=this.ZAt.vP)?void 0:t.iU}get eSt(){var t;return null==(t=this.ZAt.vP)?void 0:t.iU}constructor(t){this.ZAt=void 0,this.ZAt=t}},Uz=new Date("2000-01-01"),Vz=class extends Ne{get lk(){return this.Wp}get Km(){return this.Wp.Km||Lh.AV}get hyt(){return this.sSt||this.Wp.hyt||this.vyt}get ryt(){return this.Wp.ryt}get $yt(){var t,i;return null!=(i=null==(t=this.nSt)?void 0:t.ignoreAvailabilityWindow)&&i}get dyt(){return this.rSt}get Nwt(){return this.TAt}get oyt(){return this.hSt}get Amt(){return this.oSt}get vyt(){return this.Wp.vyt||this.En}get fwt(){return this.Wp.fwt}get aSt(){return this.uSt}get cSt(){return this.En}get pyt(){return this.ZAt}kyt(){var t;return null==(t=this.PAt)?void 0:t.IAt}Uyt(){var t;return null==(t=this.PAt)?void 0:t.CAt}er(t,i,e,s){var n;const r=void 0!==this.Wp&&this.Wp.Km===Lh.SV;this.Wp=t,this.uSt=null!=s?s:e,this.En=e;const h=[kA(i)];this.TAt=t.Nwt&&t.Nwt.length>0?zq(t.Nwt.map(t=>t.Yu),h):h,this.hSt=t.oyt&&t.oyt.length>0?zq(t.oyt,this.TAt):[];const o=this.hSt.map(t=>t.href),a=i.href;Ct(o,a)||(this.hSt.push(i),o.push(a));const u=this.dSt.href;Ct(o,u)||(this.hSt.push(this.dSt),o.push(u)),this.rSt=null==(n=t.dyt)?void 0:n.Qmt(),t.pyt&&(this.ZAt=new Fz(t.pyt));const c=t.Km===Lh.SV,d=function(t,i,e){const s=[];for(let e=0;e<t.length;e++){const n=t[e];let r;if(n.Tn)r=n.Tn.Qmt();else if(e>0&&t[e-1].ct){r=s[e-1]+t[e-1].ct.Qmt()}else{if(0!==e||i)break;r=0}s.push(r)}const n=[];for(let i=0;i<s.length-1;i++)n.push({lk:t[i],Tn:s[i],ct:s[i+1]-s[i]});if(s.length>0){const r=s.length-1,h=t[r],o=s[r];let a=1/0;i||(a=h.ct?h.ct.Qmt():e-o),n.push({lk:h,Tn:o,ct:a})}return n}(t.Amt,c,this.rSt);this.lSt(d,r,c),this.RAt(e)}lSt(t,i,e){const s=this.oSt;if(0===t.length)return void Wt(s);const n=t[0].lk.o;let r=0;for(;r<s.length&&s[r].o!==n;)r++;const h=s.splice(0,r);for(const t of h)t.zg();if(i&&!e&&s.length>0&&t.length>0){var o;const i=null!=(o=Hz(s[0].lk))?o:ul.SF;var a;const e=null!=(a=Hz(t[0].lk))?a:ul.SF;if(e.hF(i)){const n=e.gF(i);void 0!==this.rSt&&(this.rSt+=n.rF());for(let i=0;i<t.length;i++){const e=t[i];if(i<s.length){const t=s[i];e.Tn=t.Tn,Xz(e.lk,t.lk)}i===t.length-1&&(e.ct+=n.rF())}}}for(let i=0;i<t.length;i++){const e=t[i];if(i<s.length){const t=s[i];0,t.er(e.lk,e.ct)}else s.push(new Oz(this,e.lk,e.Tn,e.ct))}}RAt(t){for(const i of this.oSt)i.RAt(t);const i=this.PAt,e=this.NAt(t);i&&xz(i,e)||(this.PAt=e,this.So(new Sz))}NAt(t){return{ebt:t,IAt:Tz(this.oSt),CAt:Ez(this.oSt)}}ibt(){const t=hf(this.oSt,-1);if(void 0===t)return;if(isFinite(t.ct))return;if(0===t.jlt.length)return;const i=t.jlt[0];if(0===i.xat.length)return;const e=i.xat[0].mht,s=e.ibt();return s?{yut:s,ryt:e.Qdt(s)}:void 0}zg(){this.Vo();for(const t of this.oSt)t.zg()}constructor(t,i,e,s,n){if(super(),this.Wp=void 0,this.dSt=void 0,this.En=void 0,this.uSt=void 0,this.PAt=void 0,this.TAt=void 0,this.hSt=void 0,this.rSt=void 0,this.sSt=void 0,this.oSt=[],this.nSt=void 0,this.ZAt=void 0,this.dSt=i,this.nSt=n,this.er(t,e,s),t.Km===Lh.SV){const t=this.ibt();t&&t.ryt&&t.ryt.getTime()<Uz.getTime()&&(this.sSt=new Date(this.vyt.getTime()-1e3*(t.yut.CO+t.yut.ct)),this.RAt(s))}}};function Hz(t){let i=zz(t);var e,s;for(const s of null!=(e=t.jlt)?e:[])i=qE(i,Wz(s));for(const e of null!=(s=t.eyt)?s:[])i=qE(i,Gz(e));return i}function Wz(t){let i=zz(t);for(const e of t.xat)i=qE(i,qz(e));return i}function qz(t){return zz(t)}function zz(t){let i;if(void 0!==t.Lwt&&(i=qE(i,Gz(t.Lwt))),void 0!==t.Bwt&&(i=qE(i,Gz(t.Bwt))),void 0!==t.Mwt)for(const e of t.Mwt)i=qE(i,Gz(e));return i}function Gz(t){var i,e;return ul.yF(null!=(i=t.dwt)?i:yo.ZERO,null!=(e=t.jD)?e:1)}function Xz(t,i){if(Kz(t,i),t.Tn=i.Tn,void 0!==t.jlt&&void 0!==i.jlt&&t.jlt.length===i.jlt.length)for(let e=0;e<t.jlt.length;e++)jz(t.jlt[e],i.jlt[e]);if(void 0!==t.eyt&&void 0!==i.eyt&&t.eyt.length===i.eyt.length)for(let e=0;e<t.eyt.length;e++)Yz(t.eyt[e],i.eyt[e])}function jz(t,i){if(Kz(t,i),void 0!==t.xat&&void 0!==i.xat&&t.xat.length===i.xat.length)for(let e=0;e<t.xat.length;e++)Qz(t.xat[e],i.xat[e])}function Qz(t,i){Kz(t,i)}function Kz(t,i){if(void 0!==t.Lwt&&void 0!==i.Lwt&&Yz(t.Lwt,i.Lwt),void 0!==t.Bwt&&void 0!==i.Bwt&&Yz(t.Bwt,i.Bwt),void 0!==t.Mwt&&void 0!==i.Mwt&&t.Mwt.length===i.Mwt.length)for(let e=0;e<t.Mwt.length;e++)Yz(t.Mwt[e],i.Mwt[e])}function Yz(t,i){t.jD=i.jD,t.dwt=i.dwt}r();var Jz=class{async GY(t){await this.fSt(t,this.aV,this.vSt,this._St).catch(bu)}Xdt(){return new Date(zo()+this.gSt)}async fSt(t,i,e,s){let n;if(s&&(n=await this.pSt(i,s,e)),void 0===n){fr(e);for(const s of t)if(n=await this.mSt(i,s,e),void 0!==n)break}this.gSt=void 0===n?0:n-zo()}async mSt(t,i,e){switch(i.x8){case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2012":case"urn:mpeg:dash:utc:http-iso:2014":{const s=i.XE;if(s)return await this.pSt(t,s,e);break}case"urn:mpeg:dash:utc:direct:2012":case"urn:mpeg:dash:utc:direct:2014":{const t=i.XE;if(t){const i=new Date(t).getTime();if(!S(i))return i}break}default:return}}async pSt(t,i,e){try{const s=await t.vk({Yu:i,Hk:Qe.GET,fk:Bi.LT,Yg:e}),n=await s.HT(),r=new Date(n).getTime();if(!S(r))return r}catch(t){sa(t)}}constructor(t,i,e){this.aV=void 0,this.vSt=void 0,this._St=void 0,this.gSt=void 0,this.aV=t,this.vSt=i,this._St=e,this.gSt=0}},Zz=class extends Ne{get ryt(){return this.Pyt&&this.Pyt.ryt}get hyt(){return this.Pyt&&this.Pyt.hyt}get $yt(){return this.Pyt&&this.Pyt.$yt}get o(){return this.Pyt&&this.Pyt.lk.o}get aSt(){var t;return null==(t=this.Pyt)?void 0:t.aSt}get wSt(){var t;return null==(t=this.Pyt)?void 0:t.cSt}get oyt(){return this.Pyt?this.Pyt.oyt.map(t=>t.href):[this.ySt]}get ySt(){return this.bSt.href}get uyt(){return this.Pyt&&this.Pyt.lk.uyt}get cyt(){return this.Pyt&&this.Pyt.lk.cyt}get dyt(){return this.Pyt&&this.Pyt.lk.dyt}get lyt(){return this.Pyt&&this.Pyt.lk.lyt}get fyt(){var t,i;const e=(null==(i=this.Pyt)||null==(t=i.lk.fyt)?void 0:t.Kmt())||0;return _.max(e,iG)}get cP(){return this.ASt}SSt(t){const i=this.cP;this.ASt=t,i!==this.cP&&this.So(new Bz)}get Amt(){return this.oSt}get TSt(){return this.Km===Lh.SV?this.Wyt:this.kSt}get ESt(){const t=this.TSt;if(void 0!==t)for(const i of this.Amt)if(i.Tn<=t&&i.An>t)return i}get Twt(){return this.Pyt&&this.Pyt.lk.Twt}get vyt(){return this.Pyt&&this.Pyt.vyt}get VAt(){for(let t=this.oSt.length-1;t>=0;t-=1){const i=this.oSt[t].VAt;if(i)return i}}get Wyt(){const t=this.VAt;if(void 0===t)return;const i=t-this.xSt;return _.max(i,this.kSt)}get kSt(){for(const t of this.oSt){const i=t.Tyt;if(void 0!==i)return i}}get Xk(){return Boolean(this.PSt.Xk)}get xSt(){var t,i;if(this.PSt.ISt&&this.Km===Lh.SV)return this.PSt.ISt;const e=null==(i=this.Pyt)||null==(t=i.lk._yt)?void 0:t.Qmt();return void 0!==e?e:this.Km===Lh.SV?1.5*this.lyt.Qmt():0}get fwt(){return this.Pyt&&this.Pyt.fwt}get Km(){return this.Pyt?this.Pyt.Km:void 0}get pyt(){var t;return null==(t=this.Pyt)?void 0:t.pyt}async er(t,i,e){const s=[],n=[],r=t.ayt?zd.Dh(t.ayt,this.bSt):this.bSt;void 0===this.Pyt?(await this.CSt.GY(t.gyt),this.Pyt=new Vz(t,this.bSt,r,this.Xdt(),this.nSt),this.Pyt.wn(jt.Fot,this.Rs)):this.Pyt.er(t,r,this.Xdt(),i);const h=this.Pyt.Amt;let o;if(0===h.length)o=this.oSt.slice(),Wt(this.oSt);else{const t=h[0].o;let i=0;for(;i<this.oSt.length&&this.oSt[i].o!==t;)i++;o=this.oSt.splice(0,i);for(let t=0;t<h.length;t++){const i=h[t];let r;t<this.oSt.length?r=this.oSt[t]:(r=new Rz(this,i),s.push(r)),n.push(r.er(this.RSt,e))}}await Promise.all(n),this.oSt.push(...s);for(const t of o)t.qAt();this.So(new Dz)}Xdt(){return this.CSt.Xdt()}UAt(t){const i=this.oSt.indexOf(t);if(i>0)return this.oSt[i-1]}FAt(t){const i=this.oSt.indexOf(t);if(i>=0&&i+1<this.oSt.length)return this.oSt[i+1]}kyt(){return this.Pyt?this.Pyt.kyt():void 0}Uyt(){return this.Pyt&&this.Pyt.Uyt()}RAt(t){this.Pyt&&this.Pyt.RAt(t)}kn(){this.Vo(),this.DSt=void 0,this.SSt(!1);for(const t of this.oSt)t.kn();Wt(this.oSt),this.Pyt&&this.Pyt.zg()}constructor(t,i,e,s,n){super(),this.NSt=void 0,this.Pyt=void 0,this.bSt=void 0,this.ASt=!0,this.oSt=[],this.PSt=void 0,this.RSt=void 0,this.DSt=void 0,this.aV=void 0,this.CSt=void 0,this.nSt=void 0,this.PSt=t,this.bSt=t.rC,this.RSt=i,this.aV=e,this.NSt=s,this.CSt=new Jz(this.aV,this.NSt,this.PSt.BSt),this.nSt=n}},$z=class{get jdt(){return this.OAt}constructor(t,i,e,s,n){this.OAt=void 0,this.OAt=new Zz(t,i,e,s,n)}};r();var tG=class extends gp{constructor(){super(d.oy)}},iG=1e3,eG=class{get Br(){return this.Pyt}get W(){return this.MSt||(this.MSt=this.vE(this.LSt.Yg),Wr(this.MSt)),this.MSt}async vE(t){this.Pyt.jdt.So(new ke);try{await this.OSt(t),this.Pyt.jdt.SSt(!0)}catch(t){throw sa(t),this.MSt=void 0,this.Pyt.jdt.SSt(!1),new m("The provided MPEG-DASH document could not be loaded - "+t.message)}this.FSt=this.USt(this.LSt.Yg)}async USt(t){try{for(;this.Pyt.jdt.Km===Lh.SV;)await ua(this.VSt,t)}catch(t){}}get VSt(){return this.Pyt.jdt.wSt&&this.Pyt.jdt.Km===Lh.SV?this.HSt(this.LSt.Yg):this.W}async WSt(t){fr(t);const i=this.qSt();if(i>0){const e=_.min(i,2147483647);await Ze(e,t)}try{await this.OSt(t),this.Pyt.jdt.SSt(!0)}catch(t){throw new m("The provided MPEG-DASH manifest could not be loaded - "+t.message)}finally{this.zSt=void 0}}qSt(){const t=this.Pyt.jdt.Xdt().getTime()-this.Pyt.jdt.aSt.getTime();return this.Pyt.jdt.fyt-t}GSt(t){const i=this.Pyt.jdt.Uyt();if(i){const e=i.getTime()-t.getTime();if(e>0)return e}this.Pyt.jdt.RAt(t);const e=this.Pyt.jdt.Uyt();return e?e.getTime()-t.getTime():NaN}async HSt(t){const i={stack:[],error:void 0,hasError:!1};try{null!=this.zSt||(this.zSt=this.WSt(t));const e=Es(i,Zc.ep([t]),!1),s=[this.zSt,this.XSt(e.Yg)].filter(it);await Promise.race(s).catch(bu)}catch(t){i.error=t,i.hasError=!0}finally{Zs(i)}}XSt(t){const i=this.Pyt.jdt.Xdt(),e=this.GSt(i);if(!S(e)&&!this.Br.jdt.$yt)return this.jSt(e,t)}async jSt(t,i){await Ze(t,i);const e=this.Pyt.jdt.Xdt();this.Pyt.jdt.RAt(e)}async QSt(t,i){const e=await this.YSt.KSt(t,{},i);return(new Bq).myt(e.JSt,e.wk)}kn(){return this.LSt.Zg(),this.FSt=void 0,this.MSt=void 0,this.zSt=void 0,this.Pyt.jdt.kn(),Promise.resolve()}constructor(t,i,e,s,n){this.YSt=void 0,this.Pyt=void 0,this.FSt=void 0,this.MSt=void 0,this.zSt=void 0,this.LSt=new Zc,this.OSt=async t=>{try{const i=this.Pyt.jdt.Xdt(),e=await this.QSt(this.Pyt.jdt.oyt,t);await this.Pyt.jdt.er(e,i,t)}catch(t){throw Ei(t)&&(this.Pyt.jdt.SSt(!1),this.Pyt.jdt.So(new tG)),t}},this.YSt=s,this.Pyt=new $z(t,i,e,this.LSt.Yg,n)}};r(),r();var sG=class extends gp{constructor(t,i){super("Rmt"),this.zmt=void 0,this.kpt=void 0,this.zmt=t,this.kpt=i}},nG=class extends Ne{get kpt(){return this.Rlt}get Km(){return this.Vp}get Z(){return this.BI.slice()}JU(t){t&&this.Rlt!==t&&this.ZSt(t)}ZU(t){this.Rlt===t&&this.ZSt(void 0)}ZSt(t){this.Rlt=t,this.So(new sG(this,this.Rlt))}kn(){this.Vo();for(const t of this.BI)t.plt=void 0;Wt(this.BI)}constructor(t,i){super(),this.Rlt=void 0,this.BI=void 0,this.Vp=void 0,this.Vp=t,this.BI=i;for(const t of this.BI)t.plt=this}};r(),r(),r();var wn=class extends gp{constructor(t,i,e){super(d.Dw),this.currentTime=void 0,this.initDataType=void 0,this.initData=void 0,this.currentTime=t,this.initDataType=i,this.initData=e}};function rG(t,i,e,s,n){let r=[],h=[];for(const t of i)t.Km===at.Bk?r=r.concat(t.Z):t.Km===at.Mk&&(h=h.concat(t.Z));return[hG(t,r,e,s,null==n?void 0:n.preferredAudioCodecs),oG(t,h,e,s,null==n?void 0:n.preferredVideoCodecs)].filter(it)}function hG(t,i,e,s,n){const r=hh(s||[],t=>t.iat===at.Bk&&t.Rt),h=[uG(r,e,t),cG(r),dG(r),lG(r,n),fG(),t=>{const i=t.filter(t=>"main"===t.Lt);return i.length>0?i:t}];return aG(i,h)}function oG(t,i,e,s,n){const r=hh(s||[],t=>t.iat===at.Mk&&t.Rt),h=[uG(r,e,t),lG(r,n),fG(),t=>{const i=t.filter(t=>"main"===t.Lt);return i.length>0?i:t}];return aG(i,h)}function aG(t,i){if(0===t.length)return;let e=t;for(const t of i){if(1===e.length)return e[0];e=t(e)}return e[0]}function uG(t,i,e){return s=>{const n=t?t.Zut.o:void 0;if(!it(n))return s;const r=null==i?void 0:i.iyt,h=e.iyt,o=r&&h&&r.XE===h.XE,a=hh(s,t=>t.Zut.o===n);return o&&a?[a]:s}}function cG(t){return i=>{const e=t?t.bs:"",s=i.some(t=>""!==t.bs)?i.filter(t=>""!==t.bs):i;if(""===e)return s;const n=s.filter(t=>t.bs===e);return n.length>0?n:s}}function dG(t){return i=>{const e=t?t.Lt:"";if(""===e)return i;const s=i.filter(t=>t.Lt===e);return s.length>0?s:i}}function lG(t,i){return t=>{if(i&&i.length>0)for(const e of i){const i=t.filter(t=>t.$I.NI.some(t=>Tr(t.Rrt,e)));if(i.length>0)return i}return t}}function fG(){return t=>{let i=[],e=-1/0;for(const s of t){const t=s.Zut.tz;t>e?(e=t,i=[s]):t===e&&i.push(s)}return i}}r(),r();var vG=function(t){return t.$St="api",t.tTt="start",t}({});r(),r();var _G=class extends gp{constructor(t=0,i=void 0,e=void 0){super(d.sy),this.retryCount=void 0,this.statusCode=void 0,this.statusMessage=void 0,this.retryCount=t,this.statusCode=i,this.statusMessage=e}},gG={maxRetries:3,minimumBackoff:1e3,maximumBackoff:1/0},pG=class extends Ne{iTt(t,i,e){const s=this.Ndt.maxRetries===1/0?gG:this.Ndt;return ws((e,s)=>this.eTt(t,i,s,e),e,s.maxRetries,s.minimumBackoff,s.maximumBackoff)}async eTt(t,i,e,s){let n;for(const r of t)try{const t=new ro({Yu:r,fk:Bi.LT,_k:i,Xk:this.sTt,Hk:Qe.GET,Km:q.bk,zk:he.yk,Yg:e,Wk:15e3,qk:5e3}),s=await this.aV.vk(t),n=await s.HT(e);return{JSt:n,nTt:r,wk:s.wk}}catch(t){n=t;const i=Qn(t)?t.uE.dk:void 0;this.So(new _G(s,i,t.message))}throw n}constructor(t,i,e=gG){super(),this.aV=void 0,this.sTt=void 0,this.Ndt=void 0,this.aV=t,this.sTt=i,this.Ndt=e}};function mG(t){return Vn(t)}function Rt(t,i){const e=Vn(t);return i?""+e+i:""+e}r(),r();var wG=class{async KSt(t,i,e){let s;for(const n of this.rTt)try{return await n.KSt(t,i,e)}catch(t){sa(t),s=t}throw s}constructor(t){this.rTt=void 0,this.rTt=t}},yG=class{async KSt(t,i,e){const s=await this.Sut.hTt(t);if(s)return{JSt:s.data,nTt:s.locationURL,wk:s.responseURL};throw new m("Manifest fetch from cache unsuccesful")}constructor(t){this.Sut=void 0,this.Sut=t}},bG=class{async KSt(t,i,e){return await this.oTt.iTt(t,i,e)}constructor(t){this.oTt=void 0,this.oTt=t}};function AG(t,i){return new wG([new yG(i),new bG(t)])}var SG=class{async KSt(t,i,e){const s=await this.YSt.KSt(t,i,e);return await this.aTt(s),s}async aTt(t){await this.cTt.uTt({key:mG(t.nTt),locationURL:Vn(t.nTt),responseURL:Vn(t.wk),data:t.JSt,references:[this.dTt.o]})}constructor(t,i,e){this.YSt=void 0,this.cTt=void 0,this.dTt=void 0,this.YSt=t,this.cTt=i,this.dTt=e}};r();var TG=class extends gp{constructor(){super(d.Xw)}};r();var lh=class extends gp{constructor(){super(d.Gw)}};r(),r();var kG=class extends ms{lTt(t){return t.AP=dc.LOADED,this.tt(t),t}fTt(t){for(const i of this.Z.NI)if(i.eC===t)return i}constructor(t){super(t)}};function EG(t,i){return""===i?t:t+" "+i}r(),r(),r();var xG=class extends Oh{get Ca(){return this.hu||(this.hu=function(t){return Gi(U(t),{get attributes(){return t.nx},get eventID(){var i;return""+(null!=(i=t.vTt)?i:"")}})}(this)),this.hu}KO(t){return this.U===t.U}constructor(t,i,e,s,n){super(t,i,e,!1,null==n?void 0:n.toString()),this.nx=void 0,this.vTt=void 0,this.nx=s,this.vTt=n}},PG=class extends kG{_Tt(t){const i=this.iV.sI(us.zU,"","","",void 0,nh.EVENT_STREAM);return i.eC=t,this.lTt(i),i}gTt(t,i,e){const s=t.x8;var n;const r=null!=(n=t.XE)?n:"";var h;const o=null!=(h=t.jD)?h:1;var a;const u=null!=(a=t.dwt)?a:yo.ZERO,c=EG(s,r);let d=this.fTt(c);d||(d=this._Tt(c));for(const s of t.fQ)if(!IG(s,d)){const t=CG(s,o,u,i);t.RO>e&&d.nV(t)}}async Un(t){await this.hr(),this.YAt=t,this.YAt.wn(d.qw,this.pTt),this.pTt()}async hr(){this.YAt&&(this.YAt.mn(d.qw,this.pTt),this.YAt=void 0);for(const t of this.Z.NI)this.iV.rV(t);await super.hr()}eV(t,i,e){return ht(t,i,e)}constructor(t){super(t),this.YAt=void 0,this.pTt=()=>{var t,i;const e=null!=(i=null==(t=this.YAt.kyt())?void 0:t.Tn)?i:0;if(e>0)for(const t of this.Z.NI)Re(t,e);for(const t of this.YAt.Amt)if(t.An>e)for(const i of t.eyt)this.gTt(i,t,e)}}};function IG(t,i){const e=t.o;if(void 0!==e){if(hh(i.L.NI,i=>i.vTt===e&&i.U===t.lk))return!0}return!1}function CG(t,i,e,s){const n=t.o,r=t.nM.toSigned().subtract(e),h=t.ct,o=t.lk,a=t.nx,u=r.toNumber()/i+s.Tn,c=h?h.toNumber()/i:void 0,d=void 0!==c?u+c:s.WAt;return new xG(u,d,o,a,n)}function RG(t,i,e,s,n){const r=[],h=hh(e,t=>t.x8===Dg);if(void 0===h)return;const o=h.XE?function(t){const i=t.split(":",1)[0];switch(i){case"cbcs":case"cenc":return i;default:return}}(h.XE.toLowerCase()):"cenc";if(void 0!==o){for(const i of e)if(i.x8!==Dg)for(const e of sp(i.x8)){var a;const s=n&&i.P8?[i.P8]:[];var u;const h=null!=(u=null==(a=t.clearkey)?void 0:a.keys)?u:[];r.push({xS:e,OW:s,FW:void 0,GH:void 0,UW:h})}if(r.length)return{lH:t,zpt:{mTt:o,fH:h.fH},qpt:r,wTt:i===at.Bk?s.slice():[],yTt:i===at.Mk?s.slice():[],D8:!1}}}function DG(t,i){if(!t)return i;if(!i)return t;const e=[],s=Ba();var n;return NG(e,s,t.qpt),NG(e,s,i.qpt),{lH:t.lH,zpt:{mTt:t.zpt.mTt,fH:null!=(n=t.zpt.fH)?n:i.zpt.fH},qpt:e,wTt:BG(t.wTt,i.wTt,Ct),yTt:BG(t.yTt,i.yTt,Ct),D8:t.D8||i.D8||!1}}function NG(t,i,e){for(const s of e){const e=s.xS.$m;let n;i.has(e)?(n=i.get(e),n.OW=BG(n.OW,s.OW,MG)):(n=Y({},s),t.push(n),i.set(e,n))}}function BG(t,i,e){const s=t.slice();for(const t of i)e(s,t)||s.push(t);return s}function MG(t,i){for(const e of t)if(Qo(e,i))return!0;return!1}function LG(t,i,e){let s;const n=t.NW;if(n){const r=t.lQ,h=[];for(const i of t.Rrt)h.push(r+'; codecs="'+i+'"');s=RG(i||{},t.Km,n,h,e)}for(const n of t.xat)s=DG(s,OG(n,i,e));return s}function OG(t,i,e){return RG(i||{},t.Km,t.NW||[],[t.GT],e)}function FG(t){return t?t.qpt.map(i=>{const e=UG(t.lH,i.xS),s=t.zpt.mTt;return{xS:i.xS,OW:i.OW,GH:i.GH,Vq:[{initDataTypes:[i.xS.Jm],audioCapabilities:VG(t.wTt,s,null==e?void 0:e.audioRobustness),videoCapabilities:VG(t.yTt,s,null==e?void 0:e.videoRobustness),persistentState:null==e?void 0:e.persistentState,distinctiveIdentifier:null==e?void 0:e.distinctiveIdentifier}],UW:i.UW}}):[]}function UG(t,i){switch(i.Km){case po.zm:return t.widevine;case po.qm:return t.playready;case po.jm:return t.fairplay;case po.Gm:case po.Xm:return t.clearkey}}function VG(t,i,e){if(0!==t.length)return t.map(t=>({contentType:t,encryptionScheme:i,robustness:e}))}function HG(t,i){const e=t=>{const e=i.indexOf(t.xS.$m);return e>=0?e:i.length};return Xn(t,(t,i)=>e(t)-e(i))}r(),r();var WG=class extends kG{_Tt(t){const i=this.iV.sI(us.zU,t.o,"thumbnails","",!1,nh.DEFAULT);return i.Qk=xh.Kn,this.lTt(i),i}async Un(t){await this.hr(),this.YAt=t,this.YAt.wn(d.qw,this.er),this.er()}bTt(t){this.ATt(t),this.STt()}STt(){const t=[];for(const i of this.Z.NI)this.TTt(i)||t.push(i);for(const i of t)this.it(i)}ATt(t){const i=[];for(const e of this.Slt)-1===t.indexOf(e)&&i.push(e);for(const t of i)_e(this.Slt,t)}async hr(){this.YAt&&(this.YAt.mn(d.qw,this.er),this.YAt=void 0);for(const t of this.Slt)t.mn(jt.Fot,this.kTt);this.Slt.length=0;for(const t of this.Z.NI)this.iV.rV(t);await super.hr()}eV(t,i,e){return ht(t,i,e)}kn(){return this.kTt=void 0,super.kn()}ETt(){var t,i;const e=null!=(i=null==(t=this.YAt.kyt())?void 0:t.Tn)?i:0;if(e>0)for(const t of this.Z.NI)Re(t,e)}xTt(t){return this.Z.NI.some(i=>i.o===t.o)}PTt(t){return hh(this.Z.NI,i=>i.o===t.o)}TTt(t){return this.Slt.some(i=>t.o===i.o)}constructor(t){super(t),this.Slt=[],this.kTt=void 0,this.YAt=void 0,this.er=()=>{const t=[];for(const i of this.YAt.Amt)for(const e of i.jlt)if(e.Km===at.Lk&&e.xat.length>0){const i=e.xat[0];t.push(i),this.xTt(i)||this._Tt(i),-1===this.Slt.indexOf(i)&&(this.Slt.push(i),i.wn(jt.Fot,this.kTt)),this.ITt(i)}this.bTt(t)},this.ITt=t=>{const i=this.PTt(t);i&&t&&i.Qk!==xh.Nh&&(this.ETt(),function(t,i){const e=t.mht,s=t.Fyt();if(!s)return;const n=s.sbt,r=s.nbt,h=t.Ti,o=t.Mi,[a,u]=function(t){for(const i of t)if(Jh(i.x8,zG)||Jh(i.x8,GG)){const t=i.XE.match(qG);if(t){const[,i,e]=t;return[Number(i),Number(e)]}}return[1,1]}(t.ywt);let c=n;for(;c&&c.Put<=r.Put;){const s=t.Byt.ct||c.ct,n=XG(i,c,t.Zct(c).Yu,h,o,a,u,s);for(const t of n)i.nV(t);c=e.Kct(c)}}(t,i))};const i=this;this.kTt=function(){i.ITt(this)}}},qG=/^(\d+)x(\d+)$/,zG="http://dashif.org/guidelines/thumbnail_tile",GG="http://dashif.org/thumbnail_tile";function XG(t,i,e,s,n,r,h,o){const a=[],u=i.CO,c=r*h,d=s/r,l=n/h,f=_.round(d),v=_.round(l),g=o/c;if(1===c){const i=u+g;return jG(t,u,i,e)?a:[new Oh(u,i,e,!1)]}for(let s=0;s<h;s++)for(let n=0;n<r;n++){const h=u+(s*r+n)*g,o=h+g,c=e+"#xywh="+_.round(n*d)+","+_.round(s*l)+","+f+","+v;if(jG(t,h,o,c)||a.push(new Oh(h,o,c,!1)),o>=i.RO)return a}return a}function jG(t,i,e,s){return t.L.NI.some(t=>t.CO===i&&t.RO===e&&t.U===s)}r(),r(),r(),r();var QG=class extends Oh{get sM(){return this.CTt}get XE(){return this.RTt}get DTt(){return this.NTt}get Ca(){return this.hu||(this.hu=function(t){return Gi(U(t),{get schemeIDURI(){return t.sM},get value(){return t.XE},get emsgID(){return t.DTt}})}(this)),this.hu}KO(t){return ko(this.U,t.U)}constructor(t,i,e,s,n,r){super(t,i,r,!1),this.CTt=void 0,this.RTt=void 0,this.NTt=void 0,this.CTt=e,this.RTt=s,this.NTt=n}},KG=class t extends kG{elt(i,e,s){const n=Hn.PD(dh(i));if(!n)return;const r=function(t,i){const e=[];for(const s of t)mT(s,i)&&e.push(s);return e}(n,ui.zR);if(r.length){const i=t.BTt(n,e,s);this.MTt(r,i,s)}}MTt(t,i,e){for(const s of t){let t;t=1===s.ED?s.nM.toNumber()/s.jD+e:i+s.oM/s.jD;const n=t+s.rM/s.jD;"https://aomedia.org/emsg/ID3"===s.sM||"https://developer.apple.com/streaming/emsg-id3"===s.sM?this.LTt(s,t):this.OTt(s,t,n)}}OTt(t,i,e){const s=EG(t.sM,t.XE);let n=this.fTt(s);n||(n=this.FTt(s),this.lTt(n)),n.nV(new QG(i,e,t.sM,t.XE,t.o,t.hM))}LTt(t,i){const e=hL(dh(t.hM));if(!e)return;const s=EG(t.sM,t.XE);let n=this.fTt(s);n||(n=this.UTt(s),this.lTt(n));for(const t of e.r6){const e=new pL(i,t);LM(e,n.L.NI),n.nV(e)}}static BTt(t,i,e){const s=wT(t,ui.GR);return s?Ls(s.wM,s.jD)+e:i}FTt(t){const i=this.iV.sI(us.zU,"","","",void 0,nh.EMSG);return i.eC=t,i.Qk=xh.iC,i}UTt(t){const i=this.iV.sI(us.zU,"","","",void 0,nh.ID3);return i.eC=t,i.Qk=xh.iC,i}eV(t,i,e){return ht(t,i,e)}async hr(){for(const t of this.Z.NI)this.iV.rV(t);await super.hr()}constructor(t){super(t)}},YG=class extends KG{async Un(t){await this.hr(),this.YAt=t,this.YAt.wn(d.qw,this.pTt),this.pTt()}async hr(){this.YAt&&(this.YAt.mn(d.qw,this.pTt),this.YAt=void 0),await super.hr()}constructor(...t){super(...t),this.YAt=void 0,this.pTt=()=>{var t,i;const e=null!=(i=null==(t=this.YAt.kyt())?void 0:t.Tn)?i:0;this.jU(e)}}};r(),r();var JG=class{sdt(t,i){return this.VTt?this.Sut.sdt(t,i):Promise.resolve(!1)}Aut(t,i){return this.VTt?this.Sut.Aut(t,i):Promise.resolve(void 0)}async hTt(t){const i=await this.Sut.hTt(t);return this.VTt=void 0!==i,i}jJ(t){return this.Sut.jJ(t)}constructor(t){this.Sut=void 0,this.VTt=!1,this.Sut=t}};r();var ZG=class extends sk{FL(){var t;return null!=(t=this.LL)?t:0}dC(){this.oa.zx=1/0}UL(t,i,e){return!1}VL(){return!0}constructor(t,i,e){super(t,i,e)}},$G=[d.Qw,d.Yw,d.ey,d.iy,d.zw,d.ly],tX=[d.Kw,d.wy,d.Lw,d.Bw],iX=class t extends Ne{HTt(t){return!!this.aq&&this.aq.IZ(t)}async Lp(t){this.aq=await this.PL.Un(t),this.WTt(),this.qTt(),this.aq.F4(this.ct)}zTt(t){return this.aq.RZ(t)}GTt(t){return this.aq.NZ(t)}async XTt(){this.jTt=this.QTt,this.aq&&(await this.PL.hr(),this.aq=void 0)}F3(){this.aq.F3()}I3(){const t=this.ct;this.aq.ct<t&&this.aq.F4(t),this.aq.I3()}async KTt(t){const i=this.aq,e=[];i.e4&&e.push(WB(i.e4,t)),i.s4&&e.push(WB(i.s4,t)),await Promise.all(e)}YTt(t,i,e,s,n,r){const h=this.PL,o=this.aq;return new ZW(h,o,t,i,e,s,n,r,this.JTt,h,this.Opt,this.Ndt,this.Zpt,this.pq)}ZTt(t,i,e){return t.RZ(i,e,this.aq)}async $Tt(t,i,e,s){const n=this.YTt(this.aV,this.Mz,this.Sut,this.Ac,t,s);return n.wn(jt.Vot,this.tkt),n.wn(d.zw,this.Rs),await n.GY(i,e),n}ikt(t){void 0===t&&(t=!1),this.ekt.Zg(),this.T9.Zg(),this.skt.Zg(),this.skt=new Zc,this.nkt=Cu(this.rkt(this.hkt,this.k9,this.nkt,t,this.skt.Yg),this.skt).catch(this.Lmt)}async rkt(t,i,e,s,n){await Promise.all([t,i,e]),fr(n),await ua(this.okt.Yy,n);const r=this.akt;await r.wat(),this.I3(),fr(n);const h=r.Mc,o=r.Mmt,a=r.Bmt;let u=this.ukt(h,a,h,o,!1),c=this.ckt(a,u);!s&&this.HTt(c)?await this.dkt(a,u,c):(u=this.ukt(h,a,h,o,!0),c=this.ckt(a,u),await this.lkt(a,u,c,n)),fr(n),this.xP?this.Oy(this.zx):this.fkt(),this.vkt()}async dkt(t,i,e){const s=this.akt;await this.zTt(e),this._kt=e,await this.ZTt(s,t,i),await s.bat(Pc.Zht)}async lkt(t,i,e,s){const n=this.akt;this.R9(),this.gkt();const r=this.pkt;await this.XTt(),await this.Lp(e),this._kt=e,await this.ZTt(n,t,i);try{const t=this.mkt(r,!1,!0,s);Wr(t),await n.bat(Pc.Zht),await t}finally{this.O9(),this.wkt()}}get ht(){return this.tO}get ZW(){const t=this.pkt,i=this.ykt,e=i.zM(t);if(-1!==e)return{Tn:i.Tn(e),An:i.An(e)}}get ykt(){var t,i,e;const s=null!=(e=null==(t=this.akt)?void 0:t.Fx)?e:Uo.rL();var n;const r=null!=(n=null==(i=this.bkt)?void 0:i.Fx)?n:Uo.rL();return s.HM(r)}get Fx(){return this.ykt._s()}get Vx(){var t;const i=null==(t=this.Pyt)?void 0:t.jdt,e=null==i?void 0:i.hyt;if(!i||!e)return;const s=e.getTime(),n=1e3*this.zx;return new Date(n+s)}set Vx(t){var i;const e=null==(i=this.Pyt)?void 0:i.jdt,s=null==e?void 0:e.hyt;if(!t||!e||!s)return;const n=s.getTime()/1e3,r=t.getTime()/1e3;this.Oy(r-n)}get bt(){return this.Ac}get pkt(){return void 0!==this.Y8?this.Y8:void 0!==this.Akt?this.Akt:this.PL.zx}get zx(){return this.pkt}set zx(t){this.Xx(t)}Xx(t,i){this.Oy(t,t===1/0)}get ct(){let t=NaN;return this.akt&&this.akt.bmt?t=this.akt.An:this.Pyt&&void 0!==this.Pyt.jdt.Km&&(t=this.Pyt.jdt.dyt?this.Pyt.jdt.dyt.Qmt():1/0),t}get An(){return this.ct}get Qx(){return this.xP?this.J8():!(!this.akt||!this.akt.bmt)&&this.PL.Qx}J8(){return!!this.xP&&(!(!this.akt||!this.akt.bmt)&&this.pkt===this.akt.An)}get lt(){return this.nq}get Jx(){return this.rq}get $x(){}get iP(){}Skt(){var t;const i=this.Tkt;if(0===i.V)return!0;var e;const s=null!=(e=null==(t=this.ZW)?void 0:t.An)?e:this.pkt,n=i.Tn(0);return s>=n||rs(s,n,.001)}kkt(){var t;if(!this.Pyt)return!1;if(this.Pyt.jdt.Km!==Lh.SV)return!1;const i=null==(t=this.akt)?void 0:t.Mc;if(i&&i.Hot)return!0;const e=[];for(const t of this.Pyt.jdt.Amt){const i=t.Tyt,s=t.WAt;void 0!==i&&void 0!==s&&e.push(i,s)}const s=new Uo(e).VM();return function(t,i,e){if(!i.V||!e.V)return Uo.rL();const s=i.Tn(0),n=i.An(i.V-1),r=t.Mn(e).OM().Mn(t).HM(i);return Uo.nL(r.Tn(0),r.An(r.V-1)).WM(r).YM((t,i)=>t<s&&i<=n&&i-t>Zt)}(this.ykt,this.Tkt,s).V>0}get rP(){return Y({},this.QTt,{aO:sc.Bg.pW(),uO:this.Ekt,cO:{amountOfBufferedAudioSegments:this.xkt,amountOfBufferedVideoSegments:this.Pkt}})}get QTt(){return function(t,i){return{rO:t.rO+i.rO,hO:t.hO+i.hO,oO:t.oO+i.oO}}(this.jTt,this.PL.hP())}get oP(){return this.PL.oP}set oP(t){this.PL.oP=t}get lP(){return this.t9||this.Ikt&&this.PL.Qx?this.Ckt:this.Rkt}get vP(){return this.PL.vP}set vP(t){this.PL.vP=t}get pP(){let t=this.Ho;return this.akt&&(t=t.HM(this.Dkt)),t.VM(.1)._s()}get Dkt(){return this.PL.pP}Nkt(t){this.Ho=this.Ho.HM(t)}get wP(){return this.oq}set wP(t){this.oq=t,this.Bkt()}get AP(){let t=this.PL.AP;return this.Mkt&&(t=_.max(Lr.Qn,t)),t}get Tkt(){return this.Lkt(!1)}get Okt(){return this.Lkt(!0)}get kP(){return this.Tkt._s()}get xP(){return this.Pz||this.Fkt}get Fkt(){return this.PL.xP}get n5(){return this.PL.n5}get uq(){}get Ukt(){var t,i;return null!=(i=null==(t=this.Pyt)?void 0:t.jdt.Km)?i:Lh.AV}get nt(){return this.Gl}get rt(){return this.sO}get DP(){var t;return NN(this.PL)&&(this.PL.DP||(null==(t=this.Vkt())?void 0:t.Mi))||0}get MP(){var t;return NN(this.PL)&&(this.PL.MP||(null==(t=this.Vkt())?void 0:t.Ti))||0}get OP(){return this.PL.OP}set OP(t){this.PL.OP=No(t,0,1)}get VP(){return this.cq}get WP(){return!1}set WP(t){}get dq(){return this.lq}Hkt(t){t.wn($G,this.Rs),t.wn(d._y,this.Wkt),t.wn(d.Sw,this.qkt),t.wn(hc.ma,this.zkt),t.wn(d.Ew,this.Gkt),t.wn(d.Yw,this.Xkt),t.wn("Rmt",this.jkt),t.wn("amt",this.jkt)}Qkt(t){t.mn($G,this.Rs),t.mn(d._y,this.Wkt),t.mn(d.Sw,this.qkt),t.mn(hc.ma,this.zkt),t.mn(d.Ew,this.Gkt),t.mn(d.Yw,this.Xkt),t.mn("Rmt",this.jkt),t.mn("amt",this.jkt)}Kkt(t){t.wn(d.Qw,this.Rs)}Ykt(t){t.mn(d.Qw,this.Rs)}Vkt(){if(!this.akt)return;const t=hh(this.akt.Bmt,t=>t.iat===at.Mk);return t?t.YI:void 0}Lkt(t){var i;const e=null==(i=this.Pyt)?void 0:i.jdt;if(!e)return Uo.rL();const s=e.kSt;let n=t?e.VAt:e.Wyt;if(void 0===s||void 0===n)return Uo.rL();if(!t){const t=this.Dkt;t.V>0&&t.An(t.V-1)>n&&(n=_.min(t.An(t.V-1),e.VAt))}const r=this.ct;return isFinite(r)&&r>n&&(n=r),Uo.nL(s,n).MM()}async Un(t,i){let e,s;fr(i);const n=this.Pyt.jdt;try{e=n.ESt,s=n.TSt}catch(t){throw new m("Something went wrong determining the start of the provided MPEG-DASH stream")}if(!e)throw new m("Something went wrong determining the initial Period of the provided MPEG-DASH stream");if(void 0===s)throw new m("Something went wrong determining the start time of the provided MPEG-DASH stream");t.textTracks&&this.Jkt(t.textTracks),this.R9();const r=this.qlt(e),h=rG(e,r,void 0,void 0,this._mt),o=this.ukt(e,h,e,h,!0);h.forEach(t=>t.Rt=!0);const a=this.ckt(h,o);await this.Lp(a),this._kt=a,fr(i);const u=await this.$Tt(e,r,h,o);fr(i),this.Zkt(u),this.O9(),fr(i),await u.bat(),fr(i),!this.$kt&&s>0&&this.Oy(s,!0,vG.tTt),this.Pz||(this.fkt(),this.tEt())}fkt(){this.ekt.Zg(),this.ekt=new Zc,this.hkt=Cu(this.iEt(this.hkt,this.nkt,this.ekt.Yg),this.ekt).catch(this.Lmt)}eEt(){this.ekt.Zg()}async iEt(t,i,e){for(await Promise.all([t,i]),fr(e);;){var s;const t=null==(s=this.akt)?void 0:s.Mc;if(!t){0;break}if(!await this.sEt(t,e)){0;break}}}async sEt(t,i){var e;fr(i);const s=this.akt;for(0;this.Pyt.jdt.Km===Lh.SV&&void 0===(null==(e=this.FAt(t))?void 0:e.Tyt);){try{await ua(this.nEt.VSt,i)}catch(t){if(sa(t),this.rEt())return!0;throw t}await this.hEt()}for(fr(i),await this.hEt(),fr(i);!s.gmt();)await s.ww(wH.$lt,i),await this.hEt();fr(i),await this.hEt(),fr(i);const n=this.FAt(t);return n?(this.oEt(n)?await this.aEt(n,i):await this.uEt(n,i),!0):(this.F3(),!1)}rEt(){const t=this.ZW;return it(t)&&t.An>this.zx}oEt(t){var i,e,s,n,r;const h=null!=(r=null==(i=this.Ac)?void 0:i.seamlessSwitchStrategy)?r:ak.HL;if(h===ak.WL)return!0;if(h===ak.qL)return!1;const o=this.akt,a=null==o?void 0:o.Mc,u=null==o?void 0:o.Bmt,c=rG(t,this.qlt(t),a,u,this._mt),d=this.ukt(t,c,a,u,!1);if(h===ak.CLEAR_ONLY&&((null==(e=this.akt)?void 0:e.Wpt)||d)||h===ak.SAME_DRM_ONLY&&!((null==(s=this.akt)?void 0:s.Wpt)&&d||!(null==(n=this.akt)?void 0:n.Wpt)&&!d))return!1;const l=this.ckt(c,d);return this.HTt(l)}cEt(){return!0}dEt(t){const i=this.lEt();for(const e of i)e!==t&&(e.Qk=xh.Nh)}vkt(){if(void 0!==this.fEt){if(this.fEt.nC){const t=hh(this.ht.NI,t=>t.Rt);void 0!==t&&this.fEt.bs===t.bs||(this.fEt.Qk=xh.Nh)}}else this.vEt()}vEt(){if(this.lEt().length)return;const t=hh(this.ht.NI,t=>t.Rt);if(void 0===t)return;const i=this.nt.NI.filter(t=>t.nC);for(const e of i)if(e.bs===t.bs)return e.Qk=xh.Kn,void(this.fEt=e)}lEt(){return this.nt.NI.filter(t=>t.Qk===xh.Kn&&(t.Lt===us.WU||t.Lt===us.HU))}_Et(t){if(t&&this.fEt){const i=function(t,i){if(""===t.bs)return;return i.filter(i=>i.bs===t.bs)[0]}(this.fEt,t.nt.NI);i&&(i.Qk=xh.Kn)}}async aEt(t,i){var e,s;const n=this.akt;let r=this.bkt;const h=this._kt;try{fr(i);const e=n.Mc,s=n.Bmt,h=this.qlt(t);nX(n.qmt,h);const o=rG(t,h,e,s,this._mt),a=this.ukt(t,o,e,s,!1);o.forEach(t=>t.Rt=!0);const u=this.ckt(o,a);for(0,await n.wat(),this.I3(),fr(i),r&&r.Mc===t?(this.HTt(u)&&await this.zTt(u),this._kt=u):(r&&await r.kn(!0),this.HTt(u)&&await this.zTt(u),this._kt=u,r=await this.$Tt(t,h,o,a),this.bkt=r,this.Kkt(r),this.gEt.OI=r.nt,r.Aat(n)),await r.bat(),fr(i);this.pkt<t.Tn;)await this.PL.ww(d.py,i);fr(i),this.Zkt(r)}catch(t){throw Ce(t)&&(r&&await r.wat(),h&&this._kt!==h&&(this.HTt(h)&&await this.zTt(h),this._kt=h)),t}(null==(s=this.Ac)||null==(e=s.dash)?void 0:e.forceSeekToSynchronize)&&await this.pEt(t,i)}async pEt(t,i){const e=Date.now()/1e3;if(void 0===this.mEt)this.mEt=e;else if(e-this.mEt>900){this.mEt=e,this.gkt();const s=_.max(this.pkt,t.Tn);try{await this.mkt(s,!1,!0,i)}finally{this.wkt()}}}async uEt(t,i){fr(i),await this.akt.wat(),this.I3(),await this.KTt(t.Tn),fr(i);try{for(0,this.F3(),this.Ikt=!0;!this.PL.Qx&&this.pkt<t.Tn;)await this.PL.ww([d.py,d.Nw],i)}catch(t){throw this.I3(),t}finally{this.Ikt=!1}fr(i);const e=this.akt.Mc,s=this.akt.Bmt,n=this.qlt(t);nX(this.akt.qmt,n);const r=rG(t,n,e,s,this._mt),h=this.ukt(t,r,e,s,!0);r.forEach(t=>t.Rt=!0);const o=this.ckt(r,h);this.akt&&(this.wEt.mn(Te.pa,this.yEt),await this.akt.kn(),this.wEt.wn(Te.pa,this.yEt),this.akt=void 0),this.bkt&&(await this.bkt.kn(),this.bkt=void 0),this.gkt(),this.R9();const a=_.max(this.pkt,t.Tn);await this.XTt(),await this.Lp(o),this._kt=o;const u=await this.$Tt(t,n,r,h);this.Zkt(u);try{const t={stack:[],error:void 0,hasError:!1};try{const e=this.mkt(a,!1,!0,i);Wr(e),await u.bat();const s=Es(t,Zc.ep([i]),!1);await Promise.race([e,u.ww([wH.$lt],s.Yg)])}catch(i){t.error=i,t.hasError=!0}finally{Zs(t)}}finally{this.O9(),this.wkt()}}async hEt(){const t=this.bkt;t&&t.Mc.Hot&&(await t.kn(!0),this.bkt=void 0)}static bEt(t,i){const e=[],s=[];let n=!i.some(t=>t.Glt.some(t=>"main"===t.XE));for(const t of i){if(-1!==e.indexOf(t))continue;const r=eX(t.olt.concat(t.Glt),n);n=!1;const h=t.xat.map(t=>t.qot),o=new fH(t,h,r),a=sX(t,i);for(const t of a)o.Tlt(t),e.push(t);s.push(o)}return new nG(t,s)}qlt(i){const e=[],s=[];for(const t of i.dmt)GT(t.Km)&&(0===t.xat.length?this.So(new mH("No supported representation found in the AdaptationSet with mimetype : "+t.Km)):t.Km===at.Bk?e.push(...t.jlt):s.push(...t.jlt));const n=[];return e.length>0&&n.push(t.bEt(at.Bk,e)),s.length>0&&n.push(t.bEt(at.Mk,s)),n}ckt(t,i){var e,s,n,r,h,o,a,u;const c=t.map(t=>{var i;return eh.vdt(null!=(i=t.Alt)?i:t.xat,YT(t.iat,this._mt))}).map(t=>({GT:t.GT})),d=null==(s=this.Ac)||null==(e=s.dash)?void 0:e.desiredTimescale;var l;const f=(null==(n=this.Ac)?void 0:n.seamlessSwitchStrategy)!==ak.qL&&(null==(r=this.Ac)?void 0:r.seamlessSwitchStrategy)!==ak.CLEAR_ONLY&&(null==(h=this.Ac)?void 0:h.seamlessSwitchStrategy)!==ak.SAME_DRM_ONLY&&(null!=(l=null==(a=this.Ac)||null==(o=a.dash)?void 0:o.needsTimescaleShifting)?l:zd.Zs.kp),v=null==(u=this.Ac)?void 0:u.useManagedMediaSource;return{Km:O.SV,q4:c,fq:FG(i),D8:null==i?void 0:i.D8,kp:f,M3:d,t5:v}}static AEt(t,i){if(!t.length)return;let e;for(const s of t){const t=0===s.xlt.length;e=DG(e,LG(s.Zut,i,t))}return(null==i?void 0:i.preferredKeySystems)&&e&&(e.qpt=HG(e.qpt,i.preferredKeySystems)),e}ukt(i,e,s,n,r){var h,o;const a=this.Ac.contentProtection;let u=t.AEt(e,a);if(void 0!==u)return u;var c;const d=null!=(c=null==(h=this.Ac)?void 0:h.seamlessSwitchStrategy)?c:ak.HL;if(d===ak.qL||d===ak.CLEAR_ONLY||d===ak.SAME_DRM_ONLY)return;const l=null==(o=this.akt)?void 0:o.Wpt;if(!r&&void 0!==l){const t=!l.D8;if(d===ak.HL&&t&&!this.cEt())return;return l}const f=!r&&d===ak.HL;return u=this.SEt(i,a,s,n,f),void 0!==u?(u.D8=!0,u):void 0}SEt(i,e,s,n,r){let h=i,o=!1;for(;;){if(h=o?this.UAt(h):this.FAt(h),void 0===h){if(o)return;o=!0,h=i;continue}const a=rG(h,this.qlt(h),s,n,this._mt),u=t.AEt(a,e);if(r){const t=this.ckt(a,u);if(!this.HTt(t))return}if(void 0!==u)return u}}Jkt(t){for(const i of t)i.src&&this.Aq.hV(i);AP(this.Aq.Z)}jP(){var t;const i=this.lP;this.Ckt=!0,i||(this.t9||(this.TEt(new Qc),this.kEt()),(null==(t=this.JW)?void 0:t.oL)&&this.JW.KP(),this.EEt())}QP(){this.xEt||(this.xEt=new Ga),this.PEt();const t=this.xEt.Yy;return Wr(t),t}PEt(){if(this.Ckt=!1,this.d9=!0,this.IEt=!1,this.Bkt(),this.Qx){const t=this.Tkt;t.V>0&&this.Oy(t.Tn(0))}this.t9||this.f9().then(this.CEt,this.TEt),this.tkt(),this.EEt()}get Rkt(){return this.PL.lP}f9(){return this.PL.QP()}kEt(){this.PL.jP()}R9(){this.t9||(this.Ckt=this.lP,this.t9=!0,this.kEt())}O9(){this.t9&&(this.t9=!1,this.Ckt||this.f9().then(this.CEt,this.TEt),this.tkt(),this.EEt())}EEt(){const t=this.FV,i=this.lP;t!==i&&(this.FV=i,this.Ckt=i,i?this.So(new Si(this.zx)):this.So(new vt(this.zx)))}Oy(t,i,e){return void 0===i&&(i=!1),void 0===e&&(e=vG.$St),this.$kt=!0,this.ekt.Zg(),this.T9.Zg(),this.Pz=!0,this.Y8=t,this.IEt=this.IEt&&this.J8(),this.Nkt(this.Dkt),this.REt(new ji(this.zx)),this.T9=new Zc,this.k9=Cu(this.E9(t,this.hkt,this.k9,this.nkt,this.T9.Yg,i,e),this.T9).catch(this.Lmt),this.k9}DEt(){this.T9.Zg()}async E9(t,i,e,s,n,r,h,o){var a;void 0===r&&(r=!1),void 0===h&&(h=vG.$St),void 0===o&&(o=!1),null==(a=this.JW)||a.KP();try{var u,c;0,await Promise.all([i,e,s]),fr(n),await ua(this.okt.Yy,n);const a=this.Tkt.LM(t);this.Y8=a;const d=o||(null==(c=this.Ac)||null==(u=c.dash)?void 0:u.forceHardSwitchWhenSeekingBackwards)&&a<=this.zx,l=this.NEt(a),f=this.akt;if(d||!f||!f.kP.Cr(a)&&h!==vG.tTt&&f.Mc!==l){if(l){let t=this.bkt;if(this.R9(),f&&await f.wat(),t&&t.Mc===l&&!d){const i=this.ckt(t.Mmt,t.Wpt);this.I3(),this.HTt(i)&&await this.zTt(i),this._kt=i}else{t&&await t.kn(!0);const i=this.qlt(l);f&&nX(f.qmt,i);const e=null==f?void 0:f.Mc,s=null==f?void 0:f.Bmt,n=rG(l,i,e,s,this._mt);let r=this.ukt(l,n,e,s,!1);n.forEach(t=>t.Rt=!0);let h=this.ckt(n,r);this.oEt(l)&&!d?(this.I3(),this.HTt(h)&&await this.zTt(h)):(r=this.ukt(l,n,e,s,!0),h=this.ckt(n,r),f&&(this.wEt.mn(Te.pa,this.yEt),await f.kn(),this.wEt.wn(Te.pa,this.yEt),this.akt=void 0),await this.XTt(),await this.Lp(h)),this._kt=h,t=await this.$Tt(l,i,n,r),this.bkt=t,this.gEt.OI=t.nt,this.Kkt(t),t.Aat(this.akt)}await t.bat(Pc.tot),this.Zkt(t)}}else{0;const t=this.bkt;if(t&&!t.Smt){await t.wat(),this.I3();const i=this.ckt(f.Mmt,f.Wpt);this.HTt(i)&&await this.zTt(i),this._kt=i}}0;const v=this.mkt(a,r,!1,n);Wr(v),this.Y8=void 0,await this.akt.bat(Pc.tot),fr(n),this.fkt(),await v,fr(n),this.O9(),this.Pz=!1,this.BEt(new Yr(this.zx)),this.tEt()}catch(t){if(Ce(t))return void 0;0}}tEt(){if(this.lP||this.xP||void 0===this.OL)return;const t=this.zx;var i,e;this.zx+this.OL-this.VP.Cd.maximumOffset<t?null==(i=this.JW)||i.Tn():null==(e=this.JW)||e.KP()}async mkt(t,i,e,s){let n,r,h=!0,o=t;for(;;){const a={stack:[],error:void 0,hasError:!1};try{const u=this.Okt;if(u.V>0){const i=u.LM(t);o!==i&&(u.Cr(o)&&this.Pyt.jdt.Km===Lh.SV||(o=i,h=!0))}if(h)h=!1,null==r||r.Zg(),r=new Zc,r.$g(s),n=Cu(this.MEt(o,i,e,r.Yg),r),Wr(n);else if(!this.Fkt&&!this.n5)break;const c=Es(a,Zc.ep([s]),!1);await Promise.race([n,this.ww([d.ey,d.iy,d.Cw],c.Yg),this.Pyt.jdt.ww(jt.Fot,c.Yg)])}catch(t){a.error=t,a.hasError=!0}finally{Zs(a)}}}async MEt(t,i,e,s){for(this.PL.Oy(t,i,e);this.Fkt||this.n5;)await this.PL.ww([d.Zw,d.Vw],s)}gkt(){void 0===this.Akt&&(this.Akt=this.pkt,this.PL.mn(d.$w,this.REt),this.PL.mn(d.Zw,this.BEt))}wkt(){if(void 0===this.Akt)return;const t=this.pkt;this.Akt=void 0,this.PL.wn(d.$w,this.REt),this.PL.wn(d.Zw,this.BEt),this.pkt!==t&&this.Nc()}LEt(t){this.Ho=this.Ho.HM(t)}NEt(t){const i=this.Pyt.jdt,e=i.Amt.filter(t=>t.ct>=.2);if(0===e.length)return;const s=e[0];if(t<=s.Tn)return s;for(const i of e)if(i.An>t)return i;return i.Km!==Lh.SV?e[e.length-1]:void 0}UAt(t){let i=t.Hmt;for(;i&&i.ct<.2;)i=i.Hmt;return i}FAt(t){let i=t.Wmt;for(;i&&i.ct<.2;)i=i.Wmt;return i}async Ta(t,i,e){const s={stack:[],error:void 0,hasError:!1};try{var n;if(this.pq.BW(t.contentProtection),this.OEt(),this.Ac&&!Ak(this.Ac)&&await this.hr(),!t||Ak(t))return;const h=Es(s,Zc.ep([e]),!1);this.uV=Zc.ep([h.Yg]),this.Ac=t,this.FEt=i,this._mt=t.abr,this.Zpt=t.ignoreEmbeddedTextTrackTypes,this.UEt=new pG(this.aV,Boolean(this.Ac.useCredentials),this.Ndt),this.UEt.wn(d.sy,this.Rs);const o=AG(this.UEt,this.Sut);var r;if(this.SSt(!0),this.nEt=new eG({rC:zd.Dh(this.Ac.src),ISt:null!=(r=null==(n=this.Ac.latencyConfiguration)?void 0:n.targetOffset)?r:this.Ac.liveOffset,BSt:this.Ac.timeServer,Xk:this.Ac.useCredentials},this.VEt(this._mt),this.aV,o,this.Ac.dash),this.Pyt=this.nEt.Br,this.Pyt.jdt.wn(d.Ww,this.HEt),this.Pyt.jdt.wn(d.qw,this.WEt),this.Pyt.jdt.wn(Nz.jAt,this.qEt),this.Pyt.jdt.wn(jt.Fot,this.tkt),this.Pyt.jdt.wn(d.oy,this.Rs),await this.zEt.Un(this.Pyt.jdt),await this.GEt.Un(this.Pyt.jdt),Ct(this.Zpt,nh.EMSG)||(this.Opt=new YG(this.PL),this.Gl.qW(this.Opt.Z),await this.Opt.Un(this.Pyt.jdt)),t.latencyConfiguration){const i=t.latencyConfiguration;this.JW=new ZG(this,this.PL,i),this.JW.Rt=!0,this.cq.Ea(this.JW)}this.Bkt(),h.zg()}catch(t){s.error=t,s.hasError=!0}finally{Zs(s)}}IP(t,i,e,s){return Promise.resolve()}CP(){return Promise.resolve()}async XEt(){const t=this.Pyt.jdt.cP;if(this.SSt(t),t)return this.jkt(),void this.xq.mn(Jr.xM,this.jEt);this.rEt()?this.xq.wn(Jr.xM,this.jEt):await this.QEt()}async QEt(){var t,i;throw await Promise.all([null==(t=this.akt)?void 0:t.wat(Pc.pot),null==(i=this.bkt)?void 0:i.wat(Pc.pot)].filter(it)),this.eEt(),this.DEt(),this.skt.Zg(),new m("The provided MPEG-DASH manifest could not be loaded")}get cP(){return this.ASt}SSt(t){this.ASt!==t&&(this.ASt=t,this.So(t?new TG:new lh))}Bkt(){this.Pyt&&(this.KEt=this.YEt(this.KEt,this.uV.Yg).catch(this.Lmt))}async YEt(t,i){t&&(await t,fr(i));try{this.wP===Dn.HL||this.d9?await this.JEt(i):this.wP===Dn.zU&&await this.ZEt(i)}catch(t){throw sa(t),this.Qq(new as(me.MANIFEST_LOAD_ERROR,t.message,t)),t}}async JEt(t){await this.ZEt(t),this.$Et||(this.$Et=!0,this.okt.$g(this.Un(this.FEt,t)));try{await this.okt.Yy}catch(t){sa(t),this.Qq(new as(me.MEDIA_DECODE_ERROR,t.message,t))}}async ZEt(t){await ua(this.nEt.W,t);const i=this.Pyt.jdt;if(void 0===this.JW&&i.Km===Lh.SV){const t=i.pyt,e=(null==t?void 0:t.tSt)?(null==t?void 0:t.tSt)/1e3:i.xSt,s={minimumOffset:(null==t?void 0:t.JAt)?(null==t?void 0:t.JAt)/1e3:.5*e,maximumOffset:(null==t?void 0:t.$At)?(null==t?void 0:t.$At)/1e3:1.5*e,targetOffset:e,forceSeekOffset:2.5*e,minimumPlaybackRate:ik,maximumPlaybackRate:ih};this.JW=new ZG(this,this.PL,s),this.cq.Ea(this.JW)}}Zkt(i){const e=this.akt;i!==e&&(this.akt&&this.Qkt(this.akt),this.bkt&&this.Ykt(this.bkt),e&&this.Nkt(this.Dkt),this.akt=i,this.bkt=e,this.Hkt(this.akt),this.bkt&&this.Kkt(this.bkt),this.tO.OI=i.ht,this.sO.OI=i.rt,this._Et(i),this.wEt.mn(Te.pa,this.yEt),t.txt(this.wEt),this.wEt.wn(Te.pa,this.yEt),this.wEt.OI=i.nt,this.gEt.OI=void 0,this.vEt())}static txt(t){for(const i of t.NI)i.Qk=xh.Nh}be(){this.PL.be()}we(){this.PL.we()}Qq(t){this.nq||(Wr(this.hr()),this.nq=ar(t),this.rq=t,this.So(new el(t)))}OEt(){this.nq=void 0,this.rq=void 0}WTt(){const t=this.aq;t&&(t.s4&&(t.s4.VY=this.Mz.YY),t.e4&&(t.e4.VY=this.Mz.YY))}qTt(){const t=this.aq;t&&(t.s4&&(t.s4.zY=this.Mz.zY),t.e4&&(t.e4.zY=this.Mz.zY))}determineStallJumpTarget(){if(this.akt)return this.akt.gmt()&&this.zx>this.akt.An-zB&&!this.akt.bmt?this.akt.An:void 0}async hr(){if(this.ixt)return this.ixt;try{this.ixt=this.sxt(),await this.ixt}finally{this.ixt=void 0}}async sxt(){this.vP=1,this.uV.Zg(),this.DEt(),this.eEt(),this.skt.Zg(),this.okt.Zg(),this.$kt=!1,this.jP(),this.d9=!1,this.IEt=!1,this.tO.OI=void 0,this.sO.OI=void 0,this.wEt.OI=void 0,this.gEt.OI=void 0,this.KEt&&(await this.KEt.catch(gs),this.KEt=void 0),await Promise.all([this.hkt,this.k9,this.nkt,this.okt.Yy.catch(gs)]),this.akt&&(await this.akt.kn(!0),this.akt=void 0),this.bkt&&(this.Ykt(this.bkt),await this.bkt.kn(!0),this.bkt=void 0),await this.XTt(),this._kt=void 0,this.fEt=void 0,this.xq.mn(Jr.xM,this.jEt),this.xq.hr(),await this.zEt.hr(),await this.GEt.hr(),void 0!==this.Opt&&(this.Gl.XW(this.Opt.Z),await this.Opt.kn(),this.Opt=void 0),this.UEt&&(this.UEt.mn(d.sy,this.Rs),this.UEt=void 0),this.Pyt&&(this.Pyt.jdt.mn(d.Ww,this.HEt),this.Pyt.jdt.mn(d.qw,this.WEt),this.Pyt.jdt.mn(Nz.jAt,this.qEt),this.Pyt.jdt.mn(jt.Fot,this.tkt),this.Pyt.jdt.mn(d.oy,this.Rs),await this.nEt.kn(),this.Pyt=void 0),this.Mkt=!1,this.nxt=NaN,this.rxt=0,this.hxt=0,this.Akt=void 0,this.t9=!1,this.Ho=Uo.rL(),this.FV=!0,this.Y8=void 0,this.oxt=!1,this.Pz=!1,this.$Et=!1,this.okt=new Ga,this.Ekt=0,this.xkt=0,this.Pkt=0,this.Ac=void 0,this.FEt=void 0,this.Zpt=[],this.mEt=void 0,this.cq.hr(),this.JW=void 0,this.jTt={rO:0,hO:0,oO:0},await this.Aq.hr(),this.PL.Eq(),this.axt.hr()}async kn(){this.Vo(),this.OEt(),await this.hr(),this.Vo(),this.tO.kn(),this.sO.kn(),this.wEt.kn(),this.gEt.kn(),this.Gl.kn(),this.xq.kn(),this.Cq.zg(),await this.zEt.kn(),await this.GEt.kn(),this.axt.kn(),this.PL.mn(d.Cw,this.B7),this.PL.mn(jr.Dw,this.U8),this.PL.mn(d.Nw,this.uxt),this.PL.mn(d.$w,this.REt),this.PL.mn(d.Zw,this.BEt),this.PL.mn(d.Jw,this.Xkt),this.PL.mn(d.py,this.Nc),this.PL.mn([d.uo,d.jw],this.cxt),this.PL.mn(tX,this.Rs),await this.Aq.kn(),this.Gl.kn(),this.Mz.mn("UY",this.dxt),this.Mz.mn("qY",this.lxt),this.PL.mn(hc.ma,this.fxt),this.PL.mn([d.xw,d.Ew],this.Rs),this.PL.mn(d.Ay,this.Gmt),this.PL.mn(d.LICENSE_REQUEST_GENERATED,this.xmt),this.PL.Rq=void 0,this.pq.mn("contentProtectionsTracked",this.vxt),this.PL.J7=void 0}qP(){return this.PL.Ma}Aa(){return this.PL.Sq}get sP(){return!1}YP(){return!1}JP(){}ZP(){}$P(){}tI(){this.ikt(!0)}get OL(){var t;const i=null==(t=this.Pyt)?void 0:t.jdt;if(i&&i.Km===Lh.SV&&i.hyt)return i.Xdt().getTime()/1e3-i.hyt.getTime()/1e3-this.zx}sI(t){const i=this.PL.Tq(t);return this.axt.tt(i),i}constructor(t,i,e,s,n,r,h){var o;super(),this.aV=void 0,this.Mz=void 0,this.Ndt=void 0,this.Sut=void 0,this.PL=void 0,this.Cq=void 0,this.xq=void 0,this.akt=void 0,this.bkt=void 0,this.d9=!1,this.nxt=NaN,this.nq=void 0,this.rq=void 0,this.t9=!1,this.Akt=void 0,this.Y8=void 0,this.oxt=!1,this.rxt=0,this.hxt=0,this.Mkt=!1,this.uV=new Zc,this.okt=new Ga,this.ixt=void 0,this.$Et=!1,this.Pyt=void 0,this.nEt=void 0,this.UEt=void 0,this.ASt=!0,this.Ckt=!0,this.xEt=void 0,this.Ho=Uo.rL(),this.oq=Dn.pz,this.KEt=void 0,this.FV=!0,this.Ac=void 0,this.FEt=void 0,this._mt=void 0,this.Zpt=[],this.Pz=!1,this.cq=void 0,this.ekt=new Zc,this.hkt=Promise.resolve(),this.T9=new Zc,this.k9=Promise.resolve(),this.$kt=!1,this.IEt=!1,this.skt=new Zc,this.nkt=Promise.resolve(),this._kt=void 0,this.fEt=void 0,this.Ikt=!1,this.tO=void 0,this.sO=void 0,this.Gl=void 0,this.wEt=void 0,this.gEt=void 0,this.Opt=void 0,this.zEt=void 0,this.GEt=void 0,this.Aq=void 0,this.axt=void 0,this.Ekt=0,this.xkt=0,this.Pkt=0,this.lq=new hu,this.mEt=void 0,this.jTt={rO:0,hO:0,oO:0},this.aq=void 0,this.JTt=void 0,this.pq=void 0,this.JW=void 0,this.jkt=t=>{var i,e,s;let n;"Rmt"===(null==t?void 0:t.type)&&(n=t.kpt),n&&(null==(i=n.plt)?void 0:i.Km)===at.Bk&&(null==(s=this.bt)||null==(e=s.dash)?void 0:e.forceRecreateMediaSourceOnAudioSwitch)?this.ikt(!0):this.ikt()},this.Gmt=t=>{var i;null==(i=this.akt)||i.Gmt(t)},this.xmt=t=>{var i;null==(i=this.akt)||i.xmt(t)},this.Nc=()=>{this.So(new B(this.zx,this.Vx))},this.U8=t=>{this.So(new wn(this.zx,t.Jm,t.Py))},this.Wkt=t=>{this.Ekt+=t.uO,this.So(t)},this.qkt=t=>{const i=t.segments.filter(t=>t.Pct);t.track===at.Bk?this.xkt=i.length:t.track===at.Mk&&(this.Pkt=i.length)},this.B7=()=>{const t=this.ct;S(t)||t===this.nxt||(this.nxt=t,this.So(new zr(this.nxt)))},this.cxt=()=>{this.tkt(),this.EEt()},this.uxt=t=>{this.IEt||!this.Qx||this.xP||(this.IEt=!0,this.So(null!=t?t:new ur(this.zx)))},this.WEt=t=>{this.Rs(t),this.Mkt||(this.Mkt=!0,this.Cq.zV())},this.HEt=()=>{this.Pyt.jdt.mn(d.Ww,this.HEt),this.So(new ke)},this.Gkt=t=>{var i;if(t.errorObject.code===me.CONTENT_PROTECTION_OUTPUT_RESTRICTED&&(null==(i=this.akt)?void 0:i.Mmt.every(t=>!t.Plt)))return;this.Qq(t.errorObject),this.So(t)},this.zkt=t=>{this.Qq(t.errorObject)},this.Lmt=t=>{Ce(t)||this.Qq(new as(me.MEDIA_DECODE_ERROR,t.message,t))},this.tkt=()=>{if(!this.lP){if(!this.Skt()){const t=this.Pyt.jdt.TSt;return void this.Oy(t,!0)}if(this.kkt()){const t=this.Pyt.jdt.TSt;return void this.Oy(t,!0)}}},this.REt=t=>{this.oxt=this.xP,this.So(t)},this.BEt=t=>{const i=this.oxt,e=this.xP;this.oxt=e,i&&!e&&this.So(t),this.uxt()},this.Xkt=()=>{const t=this.MP,i=this.DP;this.rxt===t&&this.hxt===i||(this.rxt=t,this.hxt=i,this.So(new Vs))},this.yEt=t=>{const i=t.Ht;i.Qk===xh.Kn?(this.dEt(i),this.fEt=i):i===this.fEt&&i.Qk===xh.Nh&&(this.fEt=void 0,this.vEt())},this.CEt=()=>{this.t9||this.xEt&&(this.xEt.Qy(),this.xEt=void 0)},this.TEt=t=>{this.t9||this.xEt&&(this.xEt.Ky(t),this.xEt=void 0)},this.qEt=()=>{this.XEt().catch(this.Lmt)},this.jEt=()=>{this.QEt().catch(this.Lmt),this.xq.mn(Jr.xM,this.jEt)},this.fxt=t=>{this.Qq($k(t.lt))},this.dxt=()=>{this.WTt()},this.lxt=()=>{this.qTt()},this.vxt=t=>{this.GTt(t.NW)},this.aV=t,this.Sut=new JG(n),this.PL=r,this.JTt=h,this.Mz=e,this.Mz.wn("UY",this.dxt),this.Mz.wn("qY",this.lxt),this.cq=s,this.Ndt=Y({},i.retryConfiguration,{maxRetries:null!=(o=i.retryConfiguration.maxRetries)?o:1/0}),this.tO=new Gh,this.sO=new Gh,this.pq=new eC(t),this.pq.wn("contentProtectionsTracked",this.vxt),this.PL.wn(d.Cw,this.B7),this.PL.wn(jr.Dw,this.U8),this.PL.wn(d.Nw,this.uxt),this.PL.wn(d.$w,this.REt),this.PL.wn(d.Zw,this.BEt),this.PL.wn(d.Jw,this.Xkt),this.PL.wn(d.py,this.Nc),this.PL.wn([d.uo,d.jw],this.cxt),this.PL.wn(tX,this.Rs),this.PL.wn(hc.ma,this.fxt),this.PL.Rq=this.pq,this.PL.J7=this,this.PL.wn([d.xw,d.Ew],this.Rs),this.PL.wn(d.Ay,this.Gmt),this.PL.wn(d.LICENSE_REQUEST_GENERATED,this.xmt),this.Cq=new Gt(this,this.PL),this.xq=new _s(this.Cq,!0),this.xq.wn(Jr.xM,this.tkt),this.xq.wn(Ii,this.Rs),this.wEt=new ai,this.wEt.wn(Te.pa,this.yEt),this.gEt=new ai,this.zEt=new PG(this.PL),this.GEt=new WG(this.PL),this.Aq=new eu(this.PL,this.aV),this.axt=new bc,this.Gl=new Tu([this.wEt,this.zEt.Z,this.GEt.Z,this.Aq.Z,this.axt])}};function eX(t,i){const e=t.filter(t=>"urn:mpeg:dash:role:2011"===t.x8).map(t=>t.XE).filter(it);return i||Ct(e,"main")?Ct(e,"caption")?"captions":Ct(e,"subtitle")?"subtitles":Ct(e,"dub")?"translation":"main":Ct(e,"sign")?"sign":Ct(e,"description")?"descriptions":Ct(e,"commentary")?"commentary":"alternative"}function sX(t,i){var e;const s=hh([...t.ywt,...t.bwt],t=>"urn:mpeg:dash:adaptation-set-switching:2016"===t.x8);var n;const r=null!=(n=null==s||null==(e=s.XE)?void 0:e.split(","))?n:[],h=[];for(const t of r){const e=Number(t),s=hh(i,t=>t.o===e);s&&h.push(s)}return h}function nX(t,i){for(const e of t){const t=hh(i,t=>t.Km===e.Km);if(!t)continue;const s=e.Z,n=t.Z;for(const t of s){const i=t.tC;if(!i)continue;const e=t.xat.map(t=>t.o),s=hh(n,t=>{const i=t.xat.map(t=>t.o);return wc(e,i)});if(!s)continue;const r=i.map(t=>t.o);s.tC=s.$I.NI.filter(t=>Ct(r,t.o))}}}r();var rX=class{async hTt(t){return(await this.gxt._xt(t.map(mG))).shift()}sdt(t,i){const e=Rt(t,i);return this.pxt.qy(e)}async Aut(t,i){var e;const s=Rt(t,i);return null==(e=await this.mxt.zy(s))?void 0:e.data}jJ(t){return this.wxt.zy(t)}constructor(t,i,e,s){this.gxt=void 0,this.pxt=void 0,this.mxt=void 0,this.wxt=void 0,this.gxt=t,this.pxt=i,this.mxt=e,this.wxt=s}};r(),r(),r();var hX=class{yxt(t){return Promise.resolve(!1)}uTt(t){return Promise.reject(oX)}bxt(t){return Promise.reject(oX)}qy(t){return Promise.resolve(!1)}zy(t){return Promise.resolve(void 0)}Axt(t,i){return Promise.resolve(void 0)}_xt(t){return Promise.resolve([])}Sxt(){return Promise.resolve([])}Txt(t){return Promise.resolve([])}kxt(t,i){return Promise.resolve([])}pS(t){return Promise.reject(oX)}Ext(t){return Promise.reject(oX)}xxt(){return Promise.reject(oX)}},oX="Storage disabled",aX="Storage disabled";r(),r(),r();var uX=class{get Pxt(){return this.Jg.Yy}async yxt(t){return(this.Ixt||await this.Pxt).yxt(t)}async uTt(t,i){return(this.Ixt||await this.Pxt).uTt(t,i)}async bxt(t,i){return(this.Ixt||await this.Pxt).bxt(t,i)}async qy(t){return(this.Ixt||await this.Pxt).qy(t)}async zy(t){return(this.Ixt||await this.Pxt).zy(t)}async Axt(t,i){return(this.Ixt||await this.Pxt).Axt(t,i)}async _xt(t){return(this.Ixt||await this.Pxt)._xt(t)}async Sxt(){return(this.Ixt||await this.Pxt).Sxt()}async Txt(t){return(this.Ixt||await this.Pxt).Txt(t)}async kxt(t,i){return(this.Ixt||await this.Pxt).kxt(t,i)}async pS(t){return(this.Ixt||await this.Pxt).pS(t)}async Ext(t){return(this.Ixt||await this.Pxt).Ext(t)}async xxt(){return(this.Ixt||await this.Pxt).xxt()}constructor(t){this.Jg=new Ga,this.Ixt=void 0,this.Jg.$g(t),this.Jg.Yy.then(t=>{this.Ixt=t})}},cX=class{get Cxt(){return this.Jg.Yy}async Rxt(t){const i=this.Dxt||await this.Cxt;return await i.Rxt(t)}constructor(t){this.Jg=new Ga,this.Dxt=void 0,this.bct=void 0,this.Nxt=void 0,this.Bxt=void 0,this.Mxt=void 0,this.Lxt=void 0,this.Jg.$g(t);const i=this.Jg.Yy;i.then(t=>{this.Dxt=t}),this.bct=new uX(i.then(t=>t.bct)),this.Nxt=new uX(i.then(t=>t.Nxt)),this.Bxt=new uX(i.then(t=>t.Bxt)),this.Mxt=new uX(i.then(t=>t.Mxt)),this.Lxt=new uX(i.then(t=>t.Lxt))}};function lu(t){return new m("This storage cannot handle persistency type "+t)}r(),r(),r();var Bu=function(t){return t.Oxt="readonly",t.Fxt="readwrite",t}({}),xn=class{yxt(t){return Promise.resolve("temporary"===t)}uTt(t,i){return void 0===i&&(i="temporary"),"temporary"!==i?Promise.reject(lu(i)):(this.Uxt(t.key),this.Lb.push(t),Promise.resolve())}bxt(t,i){if(void 0===i&&(i="temporary"),"temporary"!==i)return Promise.reject(lu(i));for(const i of t)this.Uxt(i.key);for(const i of t)this.Lb.push(i);return Promise.resolve()}qy(t){return Promise.resolve(Boolean(this.Vxt(t)))}zy(t){return Promise.resolve(this.Vxt(t))}Axt(t,i){return Promise.resolve(this.Hxt(t,i))}_xt(t){const i=t?t.map(t=>this.Vxt(t)):this.Lb;return Promise.resolve(i.filter(it))}Sxt(){return Promise.resolve([...this.Lb])}Txt(t){return this.kxt(t,"key")}kxt(t,i){const e=this.Lb.filter(e=>e[i]===t);return Promise.resolve(e)}pS(t){return this.Uxt(t),Promise.resolve()}Ext(t){for(const i of t)this.Uxt(i);return Promise.resolve()}xxt(){return Wt(this.Lb),Promise.resolve()}Vxt(t){return this.Hxt(t,"key")}Hxt(t,i){for(const e of this.Lb)if(e[i]===t)return e}Uxt(t){const i=this.Vxt(t);i&&_e(this.Lb,i)}constructor(){this.Lb=[]}},kc=class t{static jet(){return Promise.resolve(new t)}Rxt(t){return t(this)}constructor(){this.Nxt=void 0,this.bct=void 0,this.Bxt=void 0,this.Mxt=void 0,this.Lxt=void 0,this.Nxt=new xn,this.bct=new xn,this.Bxt=new xn,this.Mxt=new xn,this.Lxt=new xn}};r(),r();var dX=class{async yxt(t){for(const i of this.Wxt)if(await i.yxt(t))return!0;return!1}async uTt(t,i){void 0===i&&(i="persistent");for(const e of this.Wxt)if(await e.yxt(i))return e.uTt(t);throw lu(i)}async bxt(t,i){void 0===i&&(i="persistent");for(const e of this.Wxt)if(await e.yxt(i))return e.bxt(t);throw lu(i)}async qy(t){for(const i of this.Wxt)if(await i.qy(t))return!0;return!1}async zy(t){for(const i of this.Wxt){const e=await i.zy(t);if(e)return e}}async Axt(t,i){for(const e of this.Wxt){const s=await e.Axt(t,i);if(s)return s}}async _xt(t){const i=[];for(const e of this.Wxt)i.push(...await e._xt(t));return i}async Sxt(){const t=[];for(const i of this.Wxt)t.push(...await i.Sxt());return t}async Txt(t){const i=[];for(const e of this.Wxt)i.push(...await e.Txt(t));return i}async kxt(t,i){const e=[];for(const s of this.Wxt)e.push(...await s.kxt(t,i));return e}async pS(t){for(const i of this.Wxt)await i.pS(t)}async Ext(t){for(const i of this.Wxt)await i.Ext(t)}async xxt(){for(const t of this.Wxt)await t.xxt()}constructor(t){this.Wxt=void 0,this.Wxt=t}};function lX(t){return async()=>{const i=await Promise.all(t.map(t=>t()));return fX.jet(i)}}var fX=class t{static jet(i){return Promise.resolve(new t(i))}get Mxt(){return this.qxt}get Lxt(){return this.zxt}get Bxt(){return this.Gxt}get Nxt(){return this.Xxt}get bct(){return this.jxt}Rxt(i){if(0===this.Qxt.length)return i(this);const e=[];let s=0;const n=r=>(e.push(r),s++,s<this.Qxt.length?this.Qxt[s].Rxt(n):i(new t(e)));return this.Qxt[s].Rxt(n)}constructor(t){this.Qxt=void 0,this.qxt=void 0,this.zxt=void 0,this.Gxt=void 0,this.Xxt=void 0,this.jxt=void 0,this.Qxt=t,this.qxt=new dX(t.map(t=>t.Mxt)),this.zxt=new dX(t.map(t=>t.Lxt)),this.Gxt=new dX(t.map(t=>t.Bxt)),this.Xxt=new dX(t.map(t=>t.Nxt)),this.jxt=new dX(t.map(t=>t.bct))}},Wc=class t{static Ba(i){t.MW.Ba(i)}static get Bg(){var i,e;return null!=(e=(i=t).Rbt)?e:i.Rbt=t.MW.jet()}};Wc.MW=new class{jet(){return new cX(this.Kxt())}async Kxt(){this.Yxt&&(await Promise.resolve(),this.Yxt=!1);for(const t of this.Jxt)try{return await lX([kc.jet,t])()}catch(t){}return await lX([kc.jet,this.Zxt])()}Ba(t){if(!this.Yxt)throw new m("Registration overdue");this.Jxt.push(t)}constructor(t){this.Zxt=void 0,this.Jxt=[],this.Yxt=!0,this.Zxt=t}}(class t{static jet(){return Promise.resolve(new t)}Rxt(t){return Promise.reject(aX)}constructor(){this.Nxt=void 0,this.bct=void 0,this.Bxt=void 0,this.Mxt=void 0,this.Lxt=void 0,this.Nxt=new hX,this.bct=new hX,this.Bxt=new hX,this.Mxt=new hX,this.Lxt=new hX}}.jet),Wc.Rbt=void 0;var vX=class extends iX{zP(){if(RU(this.PL))return this.PL.zP()}async kn(){var t;await super.kn(),null==(t=this.$xt)||t.kn()}oEt(t){var i,e;return((null!=(e=null==(i=this.Ac)?void 0:i.seamlessSwitchStrategy)?e:ak.HL)!==ak.HL||!zs.gg)&&super.oEt(t)}cEt(){return!(zs.w_&&zs.b_<3)&&super.cEt()}VEt(t){return DU(t)}constructor(t,i,e,s,n,r){super(t,i,e,s,new rX(Wc.Bg.Bxt,Wc.Bg.Nxt,Wc.Bg.bct,Wc.Bg.Lxt),n,new NU(r)),this.Drt=void 0,this.$xt=void 0,this.Drt=r,zs.X_&&(this.$xt=new qU(this))}},_X=class extends vX{async kn(){await super.kn(),await this.Nq.Dq(this.PL)}constructor(t,i,e,s,n,r,h){const o=new qs(n);super(t,i,e,s,o.Yq(r),h),this.Nq=void 0,this.Nq=o}};r(),r(),r(),r(),r();var gX=class extends Da{get tPt(){return this.wE.tPt}Ux(){return super.Ux().Ly(this.tPt)}qrt(){return super.qrt().Ly(this.tPt)}Q2(t,i,e){const s=this.tPt;return super.Q2(t,{Get:i.Get-s,ct:i.ct,EU:i.EU-s},e)}f3(t,i){const e=this.tPt;return super.f3(_.max(0,t-e),_.max(0,i-e))}pS(t,i,e){const s=this.tPt;return super.pS(_.max(0,t-s),_.max(0,i-s),e)}G3(t,i){const e=this.tPt;super.G3(_.max(0,t-e),_.max(0,i-e))}X3(t,i){const e=this.tPt;super.X3(_.max(0,t-e),_.max(0,i-e))}constructor(t,i){super(i),this.wE=void 0,this.wE=t}},pX=class extends ja{get tPt(){return this.wE.tPt}Nd(){return super.Nd()+this.tPt}F4(t){super.F4(t-this.tPt)}EP(){return super.EP().Ly(this.tPt)}W4(t,i,e,s){const n=this.tPt;super.W4(t-n,i-n,e,s)}Lrt(t){return new gX(this,t)}constructor(t,i){super(i),this.wE=void 0,this.Brt(i),this.wE=t}};r(),r();var mX=class{get nt(){return this.Gl}sI(t,i,e,s,n,r,h,o){const a=new Ji(t,i,e,s,n,r,h,void 0,o);return this.Gl.tt(a),a}Tq(t){const i=new NL(t.Lt,t.Th,t.bs);return this.Gl.tt(i),i}rV(t){this.Gl.it(t)}hr(){this.Gl.hr()}kn(){for(const t of this.Gl.NI.slice())t.kn();this.Gl.kn()}constructor(){this.Gl=new bc}},wX=class extends mX{sI(t,i,e,s,n,r,h,o){const a=super.sI(t,i,e,s,n,r,h,o);return this.J9.tt(a),a}rV(t){super.rV(t),this.J9.it(t),t.kn()}Tq(t){const i=super.Tq(t);return this.J9.tt(i),i}hr(){super.hr(),this.J9.hr()}kn(){super.kn(),this.J9.kn()}constructor(t,i){super(),this.J9=void 0,this.J9=new vL(t,i)}},yX=class extends pn{get tPt(){return this.iPt}set tPt(t){this.iPt=t}Ux(){return super.Ux().Ly(this.iPt)}Hx(){return SX(super.Hx(),this.iPt)}Gx(){return super.Gx()+this.iPt}Nd(){return super.Nd()+this.iPt}mP(){return super.mP().Ly(this.iPt)}EP(){return super.EP().Ly(this.iPt)}Oy(t,i,e){const s=_.max(0,t-this.iPt);super.Oy(s,i,e)}$W(t){super.$W(SX(t,-this.iPt))}RP(){return this.Gl}sI(t,i,e,s,n,r,h,o){return this.iV.sI(t,i,e,s,n,r,h,o)}Tq(t){return this.iV.Tq(t)}rV(t){this.iV.rV(t)}Eq(){this.iV.hr(),super.Eq()}wq(){return!1}bq(t,i,e,s,n){throw new m("Not supported")}zg(){return this.Aet.kn(),this.bet.kn(),this.iV.kn(),this.Gl.kn(),super.zg()}cht(t){return new pX(this,t)}uht(t){return new Ia(t)}iI(t){let i;switch(t.type){case d.uo:i=new vt(t.currentTime+this.iPt);break;case d.jw:i=new Si(t.currentTime+this.iPt);break;case Jr.PM:i=new mo(t.currentTime+this.iPt);break;case d.py:i=new B(t.currentTime+this.iPt,SX(t.currentProgramDateTime,this.iPt));break;case d.Qw:i=new Et(t.currentTime+this.iPt);break;case d.$w:i=new ji(t.currentTime+this.iPt);break;case d.Zw:i=new Yr(t.currentTime+this.iPt);break;case d.Fw:i=new Xr(t.currentTime+this.iPt);break;case d.Vw:i=new RL(t.currentTime+this.iPt);break;case d.Nw:i=new ur(t.currentTime+this.iPt);break;case d.Kw:i=new Ik(t.currentTime+this.iPt,t.playbackRate);break;case d.wy:i=new Wi(t.currentTime+this.iPt,t.volume);break;case d.Cw:i=new zr(t.duration+this.iPt);break;case Jr.AI:i=new Ka(t.currentTime+this.iPt,t.readyState);break;default:i=t}super.iI(i)}we(){super.we(),this.bet.we()}be(){super.be(),this.bet.be()}constructor(t){super(t),this.iPt=0,this.Gl=void 0,this.iV=void 0,this.bet=void 0,this.Aet=void 0,this.iV=new wX(this,new ac),this.Gl=new Tu([this.iV.nt,super.RP()]),this.bet=new ma,this.bet.Y7(this.hq.parentElement),this.Aet=new _a(this.bet.xe,this.Wu,this.Gl,this.Ql,this.Ma,this.Sq)}},bX=class extends(BU(yX)){constructor(t){super(t)}},AX=class extends(ft(yX)){constructor(t){super(t)}};function SX(t,i){return t?new Date(t.getTime()+1e3*i):void 0}var TX=class extends Ea{Yq(t){return t===at.Mk?new AX(super.Yq(t)):t===at.Bk?new bX(super.Yq(t)):void 0}async Dq(t){const i=t;await i.zg(),await super.Dq(i.Zrt)}},kX=class extends vX{async Lp(t){await super.Lp(t),void 0===this.ePt&&(this.ePt=this.sPt(),this.PL.tPt=this.ePt)}sPt(){if(this.ct===1/0){const t=this.Tkt;if(t.V>0)return _.max(0,t.Tn(0)-300)}return 0}E9(t,i,e,s,n,r,h,o){return void 0===r&&(r=!1),void 0===h&&(h=vG.$St),void 0===o&&(o=!1),o||(o=this.ct===1/0&&zs.w_&&zs.b_<3&&t<=this.zx),super.E9(t,i,e,s,n,r,h,o)}async hr(){await super.hr(),this.ePt=void 0,this.PL.tPt=0}async kn(){await super.kn(),await this.PL.zg(),await this.Nq.Dq(this.PL)}static US(t){var i;return(!t||"google-dai"!==(null==t||null==(i=t.ssai)?void 0:i.integration))&&(zs.w_&&zs.b_<4)}constructor(t,i,e,s,n,r,h){const o=new TX(new qs(n));super(t,i,e,s,o.Yq(r),h),this.Nq=void 0,this.ePt=void 0,this.Nq=o,this.ePt=void 0}};r(),r(),r(),r(),r();var EX=class extends UU{get Zrt(){return this.PL}get DP(){return this.PL.DP}get MP(){return this.PL.MP}constructor(t){super(t)}};r(),r(),r();var xX=class extends Da{Vrt(){return this.nPt?this.ZY:super.Vrt()}Hrt(t){this.nPt?this.ZY=t:super.Hrt(t)}Ux(){return this.nPt?this.rPt:super.Ux()}NS(){return this.nPt?this.ZS:super.NS()}qrt(){return this.nPt?this.hPt:super.qrt()}zrt(){return this.nPt?this.KY:super.zrt()}Grt(t){this.nPt?this.KY=t:super.Grt(t)}Q2(t,i,e){return this.K2(e=>this.oPt(t,i,e),e)}oPt(t,i,e){return super.Q2(t,i,e)}j3(){return this.K2(()=>this.aPt())}aPt(){return super.j3()}J2(t,i,e){return this.K2(e=>this.uPt(t,i,e),e)}uPt(t,i,e){return super.J2(t,i,e)}G3(t,i){this.nPt?(this.hPt=this.hPt.HM(new Uo([t,i])),this.cPt.push({Km:"_ct",CO:t,RO:i})):this.dPt(t,i)}dPt(t,i){super.G3(t,i)}f3(t,i){return this.K2(()=>this.lPt(t,i))}lPt(t,i){return super.f3(t,i)}X3(t,i){this.nPt?(this.hPt=this.hPt.qM(new Uo([t,i])),this.cPt.push({Km:"pS",CO:t,RO:i})):this.fPt(t,i)}fPt(t,i){super.X3(t,i)}pS(t,i,e){return this.K2(e=>this.vPt(t,i,e),e)}vPt(t,i,e){return super.pS(t,i,e)}RZ(t){return this.K2(()=>this._Pt(t))}_Pt(t){return super.RZ(t)}async K2(t,i){for(this.A3();this.nPt;)await ua(this.nPt.Yy,i),this.A3();fr(i);try{this.C3=t(i),await this.C3}finally{this.C3=void 0}}A3(){if(this.C3)throw new m("Internal error")}async gPt(){if(this.nPt)throw new g("Already locked");this.nPt=new Ga,this.pPt(),this.C3&&(await this.C3.catch(gs),this.pPt())}mPt(){const t=this.nPt;void 0!==t&&(t.Qy(),this.nPt=void 0,this.wPt())}pPt(){this.ZS=super.NS(),this.ZY=super.Vrt(),this.KY=super.zrt(),this.rPt=super.Ux(),this.hPt=super.qrt(),this.yPt=!1}wPt(){this.A3(),super.Hrt(this.ZY),super.Grt(this.KY);const t=this.cPt.slice();Wt(this.cPt);for(const i of t)"_ct"===i.Km?this.dPt(i.CO,i.RO):this.fPt(i.CO,i.RO);this.rPt.KM(super.Ux())||this.So(new gp(bi.pZ))}zg(){var t;null==(t=this.nPt)||t.Zg(),this.nPt=void 0,super.zg()}constructor(t){super(t),this.C3=void 0,this.nPt=void 0,this.ZY=0,this.rPt=Uo.rL(),this.ZS=void 0,this.hPt=Uo.rL(),this.cPt=[],this.yPt=!1,this.KY=0,this.ZS=t.Cd}},PX=class extends xX{Ux(){var t,i;return super.Ux().HM(null!=(i=null==(t=this.bPt)?void 0:t.Fx)?i:Uo.rL())}qrt(){var t,i;return super.qrt().HM(null!=(i=null==(t=this.bPt)?void 0:t.W3)?i:Uo.rL())}Hrt(t){super.Hrt(t),this.bPt&&(this.bPt.zY=t)}Grt(t){super.Grt(t),this.bPt&&(this.bPt.VY=t)}dPt(t,i){super.dPt(t,i),this.bPt&&this.bPt.G3(t,i)}fPt(t,i){super.fPt(t,i),this.bPt&&this.bPt.X3(t,i)}async vPt(t,i,e){fr(e);const s=[];s.push(super.vPt(t,i,e)),this.bPt&&s.push(this.bPt.pS(t,i,e)),await Promise.all(s)}IZ(t){return!!super.IZ(t)||this.wE.APt(t)}_Pt(t){return super.IZ(t)?super._Pt(t):this.wE.SPt(t)}TPt(t){var i,e;null==(i=this.bPt)||i.mn(MN,this.Xrt),this.bPt=t,null==(e=this.bPt)||e.wn(MN,this.Xrt)}constructor(t,i){super(i),this.wE=void 0,this.bPt=void 0,this.wE=t}},IX=class extends ja{IZ(t){return!!LL(this,t)&&(!!super.IZ(t)||(!(!this.kPt||!this.kPt.IZ(t))||this.wE.EPt(t)))}async RZ(t){return super.IZ(t)?await super.RZ(t):this.kPt&&this.kPt.IZ(t)?(this.xPt(),await this.RZ(t)):(await this.wE.PPt(t),await this.RZ(t))}APt(t){return this.IZ(this.IPt(t))}SPt(t){return this.RZ(this.IPt(t))}IPt(t){const i=this.Cd,e=i.q4.map(i=>St(t.GT)&&St(i.GT)||$y(t.GT)&&$y(i.GT)?t:i);return Y({},i,{q4:e})}W4(t,i,e,s){super.W4(t,i,e,s),this.kPt&&this.kPt.W4(t,i,e,s)}CPt(){return!this.RPt&&this.DPt}Nd(){return void 0!==this.NPt?this.NPt:this.CPt()?this.Zb:super.Nd()}F4(t){this.Zb=t,this.NPt=void 0,this.CPt()||super.F4(t)}Nrt(){return!this.CPt()&&super.Nrt()}F3(){this.NPt=_.max(CX(this.aq.e4),CX(this.aq.s4)),this.CPt()||super.F3()}I3(){this.NPt=void 0,this.CPt()||super.I3()}Lrt(t){return new PX(this,t)}BPt(){this.RPt=!this.RPt}xPt(){const t=this.aq,i=this.kPt;i&&(this.RPt=!this.RPt,this.Brt(i),this.MPt(t),this.CPt()&&this.LPt())}MPt(t){var i,e;this.kPt=t,null==(i=this.B4)||i.TPt(null==t?void 0:t.e4),null==(e=this.M4)||e.TPt(null==t?void 0:t.s4)}OPt(t){const i=this.aq,e=this.kPt;if(!e)return;const s=this.RPt,n=s?i:e,r=(s?e:i).Fx.iL(t);if(!r)return;const h=KU(n.Fx,this.qrt()).iL(r.An(0),Zt);return!h||r.An(0)+Zt>=h.An(0)?void 0:_.max(r.An(0),h.Tn(0))}FPt(t,i){if(this.DPt)return Promise.resolve();const e=this.RPt?this.kPt:this.aq;return e?(this.DPt=!0,this.UPt(i=>{if(fr(i),this.DPt)return async function(t,i,e){fr(e);const s=[];t.e4&&s.push(WB(t.e4,i,e));t.s4&&s.push(WB(t.s4,i,e));await Promise.all(s),t.F3()}(e,t,i)},i)):Promise.resolve()}LPt(){if(!this.DPt)return;const t=this.RPt?this.kPt:this.aq;if(!t)return;var i;this.DPt=!1;const e=null!=(i=this.NPt)?i:this.Zb;t.ct<e&&t.F4(e),t.I3()}VPt(t){var i;const e=null!=(i=this.NPt)?i:this.Zb;t.F4(e),this.RPt?this.Brt(t):this.MPt(t)}qrt(){var t,i,e;const s=null!=(e=null==(t=this.B4)?void 0:t.W3)?e:Uo.rL();var n;const r=null!=(n=null==(i=this.M4)?void 0:i.W3)?n:Uo.rL();return s.HM(r)}async UPt(t,i){const e=[];this.B4&&e.push(this.B4.gPt()),this.M4&&e.push(this.M4.gPt());try{await Promise.all(e),await t(i)}finally{this.B4&&this.B4.mPt(),this.M4&&this.M4.mPt()}}Frt(t){t.type===bi.pZ&&this.wE.B3(),super.Frt(t)}constructor(t,i){super(i),this.wE=void 0,this.kPt=void 0,this.Zb=NaN,this.RPt=!1,this.DPt=!1,this.NPt=void 0,this.Brt(i),this.wE=t}};function CX(t){if(!t)return 0;const i=t.Fx;return i.V>0?i.An(i.V-1):0}var RX=class extends EX{get HPt(){return this.WPt}Ux(){return super.Ux().HM(this.WPt.Fx)}Nd(){if(!this.qPt){const t=this.aq;if(t&&yr(t))return t.ct}return super.Nd()}tht(){return!!super.tht()&&!(!this.qPt&&!this.jZ())}iht(){return!!super.iht()&&!(!this.qPt&&super.tht()&&!this.jZ())}jZ(){const t=this.aq;return!(!t||!yr(t))&&t.jZ}mP(){return this.Ho.HM(this.PL.pP)}EP(){return super.EP().HM(this.WPt.kP)}TP(){return super.TP()}$rt(){var t;return null!=(t=super.$rt())?t:this.WPt.uq}QP(){return this.Cz=!1,super.QP()}jP(){this.Cz=!0,super.jP()}G7(){this.qPt=!0,super.G7(),this.WPt.G7()}X7(){this.qPt=!1,super.X7(),this.WPt.G7()}Gx(){var t;return null!=(t=this.Y8)?t:super.Gx()}PP(){return void 0!==this.Y8||super.PP()}Oy(t,i,e){void 0===i&&(i=!1),void 0===e&&(e=!1),this.zPt.Zg(),this.T9.Zg(),this.T9=new Zc,this.GPt=Cu(this.E9(t,i,e,this.GPt,this.T9.Yg),this.T9).catch(gs)}async E9(t,i,e,s,n){this.Y8=t,this.x9=t,this.So(new ji(t)),s&&await s.catch(gs),fr(n),this.aq&&yr(this.aq)&&this.aq.LPt(),this.Y8=void 0,super.Oy(t,i,e),this.WPt.Oy(t,i,e),this.XPt()}$W(t){const i=this.uq;if(!i||S(i.getTime()))return;const e=(t.getTime()-i.getTime())/1e3;this.Oy(e)}K7(){super.K7(),this.WPt.K7()}get DP(){return this.jPt.DP}get MP(){return this.jPt.MP}we(){this.kz&&(this.kz=!1,this.jPt.we())}be(){this.kz||(this.kz=!0,this.jPt.be())}async QPt(){var t;this.Y8=void 0,this.x9=NaN,this.Ho=Uo.rL(),null==(t=this.KPt)||t.Zg(),this.zPt.Zg(),this.T9.Zg(),this.GPt&&(await this.GPt.catch(gs),this.GPt=void 0)}hht(t){super.hht(t),this.WPt.Rq=t}oht(t){super.oht(t),this.WPt.J7=t}RP(){return this.Gl}sI(t,i,e,s,n,r,h,o){return this.iV.sI(t,i,e,s,n,r,h,o)}Tq(t){return this.iV.Tq(t)}bq(t,i,e,s,n){throw new m("Not implemented yet")}wq(){return!1}rV(t){this.iV.rV(t)}Eq(){this.iV.hr(),super.Eq()}async Un(t){const i=await super.Un(t);return yr(i)&&this.XPt(),i}async hr(){await this.QPt(),await super.hr(),await this.WPt.hr()}async F8(){await this.QPt(),await super.F8(),await this.WPt.F8()}async zg(){await this.QPt(),this.iV.kn(),this.Gl.kn(),await super.zg()}cht(t){return new IX(this,t)}uht(t){return new Ia(t)}XPt(){this.zPt.Zg(),this.zPt=new Zc,this.GPt=Cu(this.YPt(this.GPt,this.zPt.Yg),this.zPt).catch(gs)}async YPt(t,i){if(t&&await t.catch(gs),this.aq&&yr(this.aq))for(;;){let t;for(fr(i),this.JPt()&&this.BPt(),this.aq.LPt(),fr(i);;){const e={stack:[],error:void 0,hasError:!1};try{if(fr(i),this.JPt())break;if(t=this.aq.OPt(this.Gx()),void 0!==t){0,this.ZPt(),await this.aq.FPt(t,i),fr(i),this.WPt.Oy(t);break}const s=Es(e,Zc.ep([i]),!1);await Promise.race([this.ww(d.py,s.Yg),this.$Pt(s.Yg)])}catch(t){e.error=t,e.hasError=!0}finally{Zs(e)}}for(fr(i);!this.JPt();)await this.PL.ww([d.py,d.Nw,Jr.AI],i)}}JPt(){const t=this.aq;if(void 0===t||!yr(t))return!1;const i=this.Gx(),e=this.PL.Fx;if(!this.PL.Qx&&e.Cr(i))return!1;return!!KU(this.WPt.Fx,t.qrt()).jM(i,i+Zt)}BPt(){if(this.tIt)return;this.tIt=!0,this.Ho=this.mP();const t=tM(this),i=this.PP(),e=this.TP(),s=this.PL,n=this.WPt,r=this.aq;r.LPt(),r.BPt(),iM(n,t),this.fht(n),this.WPt=s,s.jP(),s.oP=!0,this.tIt=!1;const h=this.PP();i!==h&&(h?this.So(new ji(this.zx)):this.So(new Yr(this.zx)));const o=this.TP();e!==o&&this.So(new Ka(this.zx,o)),h||this.ZPt()}ZPt(){const t=this.PL,i=this.jPt;if(i===t)return;const e=this.MP,s=this.DP;this.jPt=t,this.kz&&(i.we(),t.be());const n=this.MP,r=this.DP;n>0&&r>0&&(e!==n||s!==r)&&this.So(new Vs)}EPt(t){return void 0!==this.WPt.$Z([t])}async PPt(t){this.ZPt();const i=this.aq,e=this.WPt;await e.hr();const s=await e.Un(t);i.VPt(s)}$Pt(t){return this.KPt=new Ga,ua(this.KPt.Yy,t)}B3(){var t;null==(t=this.KPt)||t.Qy()}iI(t){t.type===d.$w&&this.x9===t.currentTime||(t.type===d.Zw&&(this.x9=NaN,this.ZPt()),t.type!==Jr.AI&&t.type!==d.jw&&t.type!==d.Nw||this.tIt||!this.JPt()?(t.type!==d.Nw||this.Qx)&&super.iI(t):this.XPt())}constructor(t,i,e){super(t),this.WPt=void 0,this.Gl=void 0,this.iV=void 0,this.qPt=!1,this.Y8=void 0,this.x9=NaN,this.Ho=Uo.rL(),this.Cz=!0,this.tIt=!1,this.kz=!0,this.jPt=void 0,this.KPt=void 0,this.GPt=void 0,this.zPt=new Zc,this.T9=new Zc,this.WPt=i,this.jPt=t,this.PL.be(),this.WPt.we(),this.iV=new wX(this,e),this.Gl=new Tu([this.iV.nt,super.RP()])}},DX=class extends RX{get Zrt(){return this.PL}get HPt(){return this.WPt}we(){super.we(),this.bet.we()}be(){super.be(),this.bet.be()}get hq(){return this.PL.hq}get d5(){return this.PL.d5}get WP(){return this.PL.WP}set WP(t){this.PL.WP=t}Y7(t){this.PL.Y7(t),this.WPt.Y7(t)}$P(){this.PL.$P(),this.WPt.$P()}zP(){return this.PL.zP()}Aa(){return this.$L}fht(t){const i=this.qP(),e=this.zP();super.fht(t),this.$L.OI=t.Sq,this.qP()!==i&&this.So(new Vk),this.zP()!==e&&this.So(new Hk)}zg(){return this.$L.kn(),this.Aet.kn(),this.bet.kn(),super.zg()}constructor(t,i){super(t,i,new ac),this.bet=void 0,this.Aet=void 0,this.$L=void 0,this.$L=new zk(t.Sq),this.bet=new ma,this.bet.Y7(t.hq.parentElement),this.Aet=new _a(this.bet.xe,this.Wu,this.nt,this.Ql,this.Ma,this.Sq)}},NX=class extends Ea{Yq(t){if(t===at.Mk){const i=super.Yq(t),e=super.Yq(t);return new DX(i,e)}return super.Yq(t)}async Dq(t){t instanceof DX?(await t.zg(),await super.Dq(t.Zrt),await super.Dq(t.HPt)):await super.Dq(t)}},BX=class extends vX{async kn(){await super.kn(),await this.Nq.Dq(this.PL)}static US(t){var i;return!zs.Ks&&!zs.og&&!(t&&"google-dai"===(null==(i=t.ssai)?void 0:i.integration))}constructor(t,i,e,s,n,r,h){const o=new qs(new NX(n));super(t,i,e,s,o.Yq(r),h),this.Nq=void 0,this.Nq=o}};r(),r(),r();var MX=class extends ja{Lrt(t){return new xX(t)}NS(){return this.iIt?this.ZS:super.NS()}Ux(){return this.iIt?this.rPt:super.Ux()}Nd(){return this.iIt?this.Zb:super.Nd()}F4(t){this.iIt?(this.Zb=t,this.eIt=!0):super.F4(t)}EP(){return this.iIt?this.sIt?this.sIt.J3():this.H4:super.EP()}W4(t,i,e,s){this.iIt?this.sIt=new rh(t,i,e,s):super.W4(t,i,e,s)}Nrt(){return this.iIt?this.Wet&&!1!==this.yPt:super.Nrt()}F3(){this.iIt?this.yPt=!0:super.F3()}I3(){this.iIt?this.yPt=!1:super.I3()}IZ(t){return!this.iIt&&super.IZ(t)}RZ(t){return this.iIt?Promise.reject(new g("Not supported")):super.RZ(t)}async gPt(){if(this.iIt)throw new g("Already locked");this.iIt=!0,this.pPt();const t=[];this.B4&&t.push(this.B4.gPt()),this.M4&&t.push(this.M4.gPt()),await Promise.all(t)}mPt(){this.iIt=!1,this.B4&&this.B4.mPt(),this.M4&&this.M4.mPt(),this.wPt()}pPt(){this.ZS=super.NS(),this.rPt=super.Ux(),this.Zb=super.Nd(),this.H4=super.EP(),this.eIt=!1,this.yPt=void 0,this.sIt=void 0}wPt(){if(this.eIt&&(super.F4(this.Zb),this.eIt=!1),void 0!==this.sIt){const t=this.sIt;super.W4(t.Tn,t.An,t.Z3,t.t4),this.sIt=void 0}void 0!==this.yPt&&(this.yPt?super.F3():super.I3(),this.yPt=void 0)}constructor(t){super(t),this.iIt=!1,this.rPt=Uo.rL(),this.ZS=void 0,this.Zb=0,this.eIt=!1,this.Wet=!1,this.yPt=void 0,this.H4=Uo.rL(),this.sIt=void 0,this.Brt(t),this.ZS=t.Cd}},LX=class extends pn{QP(){return void 0!==this.aq&&yr(this.aq)&&this.Qx&&this.Oy(0),super.QP()}Oy(t,i,e){void 0!==this.aq&&yr(this.aq)&&this.Qx&&t<this.ct&&this.nIt(),super.Oy(t,i,e)}G7(){this.rIt=!0,super.G7()}X7(){this.rIt=!1,this.hIt()||super.X7()}hIt(){return this.rIt||this.oIt}aIt(){this.oIt||(this.oIt=!0,super.G7())}uIt(){this.oIt&&(this.oIt=!1,this.hIt()||super.X7())}Un(t){this.cIt.Zg();const i=this.vE(t,this.dIt);return this.lIt=i,i}async vE(t,i){return i&&await i.catch(gs),this.uIt(),await super.Un(t)}cht(t){return new MX(t)}uht(t){return new Ia(t)}hr(){this.cIt.Zg();const t=this.sxt(this.dIt);return this.lIt=t,t}async sxt(t){return t&&await t.catch(gs),this.uIt(),await super.hr()}F8(){this.cIt.Zg();const t=this.fIt(this.dIt);return this.lIt=t,t}async fIt(t){return t&&await t.catch(gs),this.uIt(),await super.F8()}nIt(){this.aIt(),this.cIt.Zg(),this.cIt=new Zc,this.dIt=Cu(this.vIt(this.lIt,this.dIt,this.cIt.Yg),this.cIt).catch(bu)}async vIt(t,i,e){t&&await t.catch(gs),i&&await i.catch(gs),fr(e);const s=this.aq;if(!s||!yr(s))return;const n=s.Cd;await s.gPt(),await this.PL.hr();const r=await this.PL.Un(n);r.F4(s.ct),s.Brt(r),s.mPt(),this.uIt()}async zg(){this.cIt.Zg(),this.dIt&&(await this.dIt.catch(gs),this.dIt=void 0),this.hIt()&&super.X7(),await super.zg()}constructor(...t){super(...t),this.rIt=!1,this.oIt=!1,this.lIt=void 0,this.dIt=void 0,this.cIt=new Zc}},OX=class extends(BU(LX)){constructor(t){super(t)}},FX=class extends(ft(LX)){constructor(t){super(t)}},UX=class extends Ea{Yq(t){return t===at.Mk?new FX(super.Yq(t)):t===at.Bk?new OX(super.Yq(t)):void 0}async Dq(t){const i=t;await i.zg(),await super.Dq(i.Zrt)}static US(){return zs.cg}};oe(new class extends CU{DC(t,i,e,s,n,r,h,o){let a;a=kX.US(o)?kX:BX.US(o)?BX:_X;let u=i;return UX.US()&&(u=new UX(u)),new a(e,s,n,r,u,at.Mk,t)}$q(){return!0}constructor(...t){super(...t),this.tz=$.AW}}),r(),r(),Na(function(t){return class extends t{xa(){const t=this.$x.Ca;return Gi(super.xa(),{get hesp(){return t}})}}},Oa.lu),r(),r(),r(),r(),r();var VX=0;function Or(t,i){if(void 0===i&&(i=!0),!t)return;let e=t;return"/"===e.charAt(0)&&(e=e.substring(1)),i&&"/"!==e.charAt(e.length-1)&&(e+="/"),e}function HX(t){var i,e,s;return Y({},t,{baseUrl:Or(t.baseUrl),id:null!=(i=t.id)?i:String(VX++),timeBounds:Y({},t.timeBounds,{scale:null!=(e=t.timeBounds.timescale)?e:1e3}),currentTime:t.currentTime?{value:t.currentTime.timestamp,scale:null!=(s=t.currentTime.timescale)?s:1e3}:void 0,audio:t.audio.map(jX),video:t.video.map(KX),metadata:t.metadata.map(JX),events:t.events.map(ej)})}var WX=0;function qX(t){const i=Or(t.initPattern,!1),e=Or(t.contPattern,!1);var s;return Y({},t,{id:null!=(s=t.id)?s:String(WX++),continuationPattern:e?zh(e,"${segmentId}","{segmentId}"):void 0,initializationPattern:i?zh(i,"${initId}","{initId}"):void 0})}function zX(t){var i;const e=Or(t.initPattern,!1),s=Or(t.contPattern,!1);return Y({},t,{continuationPattern:s?zh(s,"${segmentId}","{segmentId}"):void 0,initializationPattern:e?zh(e,"${initId}","{initId}"):void 0,segmentDuration:t.segmentDuration?{value:t.segmentDuration.duration,scale:t.segmentDuration.timescale}:void 0,segments:t.segments.map(GX),activeSegment:null==(i=hh(t.segments,t=>t.active))?void 0:i.id})}function GX(t){var i;return Y({},t,{timeBounds:Y({},t.timeBounds,{endTime:void 0!==t.timeBounds.duration?t.timeBounds.startTime+t.timeBounds.duration:void 0,scale:null!=(i=t.timeBounds.timescale)?i:1e3})})}function XX(t){return t&&"-"===t.charAt(0)}function jX(t){let i;try{var e;i=x(null!=(e=t.channels)?e:"2")}catch(t){i=2}return XX(t.contPattern)||XX(t.initPattern)?function(t,i){const e=t.initPattern,s=t.contPattern;return t.initPattern=void 0,t.contPattern=void 0,Y({},qX(t),{baseUrl:Or(t.baseUrl),language:"eng",channels:i,sampleRate:t.samplerate,tracks:t.tracks.map(t=>{var i,n;return t.initPattern=null!=(i=t.initPattern)?i:e,t.contPattern=null!=(n=t.contPattern)?n:s,QX(t)})})}(t,i):Y({},qX(t),{baseUrl:Or(t.baseUrl),language:"eng",channels:i,sampleRate:t.samplerate,tracks:t.tracks.map(QX)})}function QX(t){let i;try{var e;i=x(null!=(e=t.channels)?e:"2")}catch(t){i=2}return XX(t.contPattern)||XX(t.initPattern)?function(t,i){return t.contPattern=t.baseUrl+t.contPattern,t.initPattern=t.baseUrl+t.initPattern,Y({},zX(t),{baseUrl:"./",channels:i,sampleRate:t.samplerate})}(t,i):Y({},zX(t),{baseUrl:Or(t.baseUrl),channels:i,sampleRate:t.samplerate})}function KX(t){return XX(t.contPattern)||XX(t.initPattern)?function(t){const i=t.initPattern,e=t.contPattern;return t.initPattern=void 0,t.contPattern=void 0,Y({},qX(t),{baseUrl:Or(t.baseUrl),frameRate:t.framerate?{value:t.framerate.rate,scale:t.framerate.scale}:void 0,tracks:t.tracks.map(t=>(t.initPattern=i,t.contPattern=e,YX(t)))})}(t):Y({},qX(t),{baseUrl:Or(t.baseUrl),frameRate:t.framerate?{value:t.framerate.rate,scale:t.framerate.scale}:void 0,tracks:t.tracks.map(YX)})}function YX(t){var i,e;return XX(t.contPattern)||XX(t.initPattern)?function(t){var i,e;return t.contPattern=t.baseUrl+t.contPattern,t.initPattern=t.baseUrl+t.initPattern,Y({},zX(t),{baseUrl:"./",frameRate:t.framerate?{value:t.framerate.rate,scale:t.framerate.scale}:void 0,resolution:Y({},t.resolution,{sarWidth:null==(i=t.resolution.sar)?void 0:i.width,sarHeight:null==(e=t.resolution.sar)?void 0:e.height})})}(t):Y({},zX(t),{baseUrl:Or(t.baseUrl),frameRate:t.framerate?{value:t.framerate.rate,scale:t.framerate.scale}:void 0,resolution:Y({},t.resolution,{sarWidth:null==(i=t.resolution.sar)?void 0:i.width,sarHeight:null==(e=t.resolution.sar)?void 0:e.height})})}function JX(t){var i;return Y({},t,{id:null!=(i=t.id)?i:String(WX++),schemeId:"",tracks:t.tracks.map(ZX)})}function ZX(t){return Y({},t,{segments:t.segments.map(tj)})}var $X=0;function tj(t){return{id:$X++,timeBounds:Y({},t.timeBounds,{scale:t.timeBounds.timescale})}}var ij=0;function ej(t){var i,e;return Y({},t,{id:null!=(i=t.id)?i:String(ij++),timeBounds:Y({},t.timestamp,{scale:null!=(e=t.timestamp.timescale)?e:1e3})})}var sj=class{async _It(t,i){const e={Yu:t,Km:q.bk,Yg:i},s=await this.Dx.vk(e);let n=await s.VT(i);return function(t){const i=t;if(Q(i.manifestVersion)&&nl(i.manifestVersion,"alpha"))return!0;let e,s;for(const t of i.presentations){for(const i of[...t.video,...t.audio])if(i.tracks.length>0){e=i.tracks[0],s=i;break}if(it(e))break}return(Q(null==s?void 0:s.initPattern)||Q(null==e?void 0:e.initPattern))&&!Q(null==e?void 0:e.initializationPattern)&&!Q(null==s?void 0:s.initializationPattern)}(n)&&(n=function(t){return Y({},t,{availabilityDuration:{value:t.dvrDuration?t.dvrDuration.duration/t.dvrDuration.timescale:0},manifestVersion:"1.0.0",presentations:t.presentations.map(HX),contentBaseUrl:t.contentBaseUrl||"./"})}(n)),n}constructor(t){this.Dx=void 0,this.Dx=t}};r();var nj=class extends Ne{get Ca(){return this.hu||(this.hu=HS(this)),this.hu}dC(){return this.gIt.dC()}get hC(){return this.gIt.hC}get oC(){return this.gIt.oC}get aC(){return this.gIt.aC}get uC(){return this.gIt.uC}get cC(){return this.gIt.cC}wn(t,i){this.gIt.wn(t,i)}mn(t,i){this.gIt.mn(t,i)}constructor(t){super(),this.hu=void 0,this.gIt=void 0,this.gIt=t}};r(),r(),r();var rj=class{get Fet(){const t=1-this.pIt**this.mIt;return this.wIt/t}Gat(t,i){const e=this.pIt**t,s=i*(1-e)+e*this.wIt;S(s)||(this.wIt=s,this.mIt+=t)}RZ(t){const i=_.exp(_.log(.5)/t);if(i===this.pIt)return;if(0===this.mIt)return void(this.pIt=i);const e=this.Fet,s=1-i**this.mIt;this.wIt=e*s,this.pIt=i}constructor(t){this.pIt=void 0,this.wIt=0,this.mIt=0,this.pIt=_.exp(_.log(.5)/t)}},wi=class t{get Fet(){return this.Zat()?_.max(this.yIt.Fet,this.bIt.Fet):this.AIt}Gat(t){const i=zd.Mg(),e=t;this.SIt&&void 0!==this.TIt&&i-this.TIt>=this.kIt&&this.hr(),this.EIt+=1,this.yIt.Gat(1,e),this.bIt.Gat(1,e),this.xIt.push(e),this.xIt.length>this.PIt&&this.xIt.shift(),this.TIt=i}Zat(){return void 0!==this.TIt&&zd.Mg()-this.TIt<=this.kIt}hr(){this.yIt=new rj(this.IIt),this.bIt=new rj(this.CIt),this.EIt=0,this.xIt=[],this.TIt=void 0}constructor(i=t.RIt,e=t.DIt,s=t.$at,n=!1){this.yIt=void 0,this.bIt=void 0,this.EIt=0,this.xIt=[],this.TIt=void 0,this.kIt=6e4,this.PIt=10,this.IIt=void 0,this.CIt=void 0,this.AIt=void 0,this.SIt=void 0,this.IIt=i,this.CIt=e,this.AIt=s,this.SIt=n,this.yIt=new rj(i),this.bIt=new rj(e)}};wi.RIt=2,wi.DIt=5,wi.$at=.1,r();var hj=class{DY(t){for(const i of this.NIt)i.DY(t)}NY(t){for(const i of this.NIt)i.NY(t)}BY(t,i){for(const e of this.NIt)e.BY(t,i)}MY(t){for(const i of this.NIt)i.MY(t)}constructor(t){this.NIt=void 0,this.NIt=t}};r();var oj=class{DY(t){this.BIt=t}NY(t){this.MIt.Gat(t-this.BIt)}BY(t){}MY(t){}constructor(t){this.MIt=void 0,this.BIt=0,this.MIt=t}};r();var aj=class{NY(t){this.LIt=t}BY(t,i){this.eut.Gat(t-this.LIt,i.byteLength),this.LIt=t}MY(t){}DY(t){}constructor(t){this.eut=void 0,this.LIt=0,this.eut=t}};r();var uj=class{DY(t){}BY(t,i){const e=i.byteLength,s=this.OIt;this.OIt=e;const n=t-this.En;this.En=t,this.FIt.E$(i);const r=!this.FIt.UIt(),h=e>=this.VIt;s!==zd.Zs.Sp&&r&&h&&this.eut.Gat(n,e)}NY(t){this.En=t}MY(t){}constructor(t,i=0){this.eut=void 0,this.VIt=void 0,this.FIt=new cj,this.En=0,this.OIt=0,this.eut=t,this.VIt=i}},cj=class extends Qa{UIt(){return this.HIt}E$(t){this.HIt=!1,super.E$(t)}T$(t,i){this.WIt&&this.WIt!==ui.WR||(this.HIt=!0),super.T$(t,i),this.WIt=t}L$(t){return!1}F$(t){}V$(t){}constructor(...t){super(...t),this.WIt=void 0,this.HIt=!1}};r();var Ec=function(t){return t.qIt="sample",t}({}),dj=class extends Ne{vW(){if(!this.Zat())return;const t=zd.Mg();t-this.zIt>1e3&&(this.zIt=t,sc.Bg.vW(this.Fet))}constructor(...t){super(...t),this.zIt=0}};r();var lj=class extends dj{get Fet(){return this.Zat()?this.wIt:this.GIt}Zat(){return this.bA.length>=3}Gat(t,i){if(0===t)return;const e={IW:8*i/t,XIt:i};if(this.bA.push(e),this.jIt+=e.XIt,this.bA.length>30){const t=this.bA.shift();this.jIt-=t.XIt}const s=this.bA.slice().sort((t,i)=>t.IW-i.IW);let n=0;for(let t=0;t<s.length;t++){const i=s[t];if(n+=i.XIt/this.jIt,this.wIt=i.IW,n>=.5)break}this.vW(),this.So(new gp(Ec.qIt))}constructor(t){super(),this.GIt=void 0,this.bA=[],this.wIt=void 0,this.jIt=0,this.GIt=t,this.wIt=t}};r();var Xs=class t extends dj{Gat(t,i){const e=8*i/t;this.yIt.Gat(t,e),this.bIt.Gat(t,e),this.QIt+=i,this.vW(),this.So(new gp(Ec.qIt))}get Fet(){return this.Zat()?_.min(this.yIt.Fet,this.bIt.Fet):this.AIt}Zat(){return this.QIt>=this.KIt}constructor(i=t.RIt,e=t.DIt,s=t.YIt,n=t.$at){super(),this.yIt=void 0,this.bIt=void 0,this.QIt=0,this.AIt=void 0,this.KIt=void 0,this.KIt=s,this.yIt=new rj(i),this.bIt=new rj(e),this.AIt=n}};Xs.YIt=128e3,Xs.$at=tC,Xs.RIt=.5,Xs.DIt=5;var fj=class{JIt(t){var i;null==(i=this.eut)||i.mn(Ec.qIt,this.ZIt),this.eut=new lj(t),this.eut.wn(Ec.qIt,this.ZIt)}$It(t){this.tCt.push(t)}iCt(t){_e(this.tCt,t)}get IW(){var t,i;return null!=(i=null==(t=this.eut)?void 0:t.Fet)?i:this.eCt}get RW(){return this.sCt.Fet}DW(t){if("segment"!==t.Km)return;if("video"!==t.Gk)return;const i=[new oj(this.sCt)];return this.eut&&("stream"===t.fk&&"initialization-segment"!==t.zk?i.push(new uj(this.eut,1e3)):i.push(new aj(this.eut))),new hj(i)}constructor(t,i){this.eut=void 0,this.tCt=[],this.sCt=void 0,this.eCt=void 0,this.ZIt=()=>{for(const t of this.tCt)t()},this.eCt=t>0?t:Xs.$at,this.sCt=new wi(wi.RIt,wi.DIt,i>0?i:wi.$at),this.JIt(this.eCt)}};r();var vj=class{nCt(t,i){const e=i-t;(!this.rCt||e<this.rCt)&&(this.rCt=e)}hCt(t,i){this.oCt=i-t}aCt(t,i){this.uCt=i-t}cCt(t,i){this.dCt=i-t}get lCt(){const t=$i([this.uCt,this.dCt].filter(it),pc);return void 0!==t?zd.Mg()/1e3+t:void 0!==this.oCt?zd.Mg()/1e3+this.oCt:void 0!==this.rCt?zd.Mg()/1e3+this.rCt:void 0}fCt(t){const i=this.lCt;if(void 0!==i)return i-t}hr(){this.rCt=void 0,this.oCt=void 0,this.dCt=void 0,this.uCt=void 0}constructor(){this.rCt=void 0,this.oCt=void 0,this.dCt=void 0,this.uCt=void 0}};r();var _j=.25,gj={minimumOffset:.2,targetOffset:.45,maximumOffset:.7,forceSeekOffset:3,minimumPlaybackRate:ik,maximumPlaybackRate:ih},pj={minimumOffset:.4,targetOffset:.65,maximumOffset:1,forceSeekOffset:3,minimumPlaybackRate:ik,maximumPlaybackRate:ih},mj={minimumOffset:.4,targetOffset:.7,maximumOffset:.9,forceSeekOffset:3,minimumPlaybackRate:ik,maximumPlaybackRate:ih},wj={minimumOffset:.2,targetOffset:.45,maximumOffset:1,forceSeekOffset:3,minimumPlaybackRate:ik,maximumPlaybackRate:ih},yj={minimumOffset:.5,targetOffset:1.125,maximumOffset:1.75,forceSeekOffset:2.55,minimumPlaybackRate:ik,maximumPlaybackRate:ih};function bj(t){if(zd.Rm.Nm){const i=(400+250)/1e3,e=_.max(i,t.minimumOffset),s=_.max(e+_j,t.targetOffset),n=_.max(s+_j,t.maximumOffset);return{minimumOffset:e,targetOffset:s,maximumOffset:n,forceSeekOffset:_.max(n+_j,t.forceSeekOffset),minimumPlaybackRate:ik,maximumPlaybackRate:ih}}return t}function Aj(){let t;return t=zd.Zs.pp?wj:zd.Zs.Ap?pj:zd.Zs.bp?"Android"===zd.Rm.Dm?mj:gj:yj,zd.Rm.Nm?bj(t):t}r(),r(),r();var Sj=class{vCt(t){for(const i of this.rPt)i[1]=i[1].Mn(t)}_Ct(t,i){let e=!0;for(const s of this.rPt){let n=s[1];n=n.qM(i),t===s[0]&&(n=n.HM(i),e=!1),s[1]=n.VM(1e-5)}e&&this.rPt.push([t,i])}gCt(t){for(const i of this.rPt)i[1]=i[1].qM(t)}pCt(t){for(let i=0;i<this.rPt.length;i++)if(this.rPt[i][1].Cr(t))return this.rPt[i][0]}constructor(){this.rPt=[]}},Tj=class extends Ne{get Fx(){let t=Uo.rL();for(const[,i]of this.mCt){const e=i.Get+i.EU,s=e+i.ct;t=t.HM(Uo.nL(e,s))}return this.Wrt.Fx.HM(t)}pCt(t){return this.wCt.pCt(t)}get yCt(){return void 0!==this.bCt}get ACt(){return this.bCt?this.bCt.Yy:Promise.resolve()}async appendStream(t,i,e){if(this.yCt)throw new m("Concurrent appends are not supported.");try{const s={stack:[],error:void 0,hasError:!1};try{const n=Es(s,Zc.ep([e,this.D3.Yg]),!1).Yg;this.wCt.vCt(this.Fx),this.bCt=new Ga;const r=zN(t).getReader();for(;;){const t=await ua(r.read(),n);if(t.done)break;const e=t.value,s=fm(e.map(t=>t.yut)),h={ct:$l(e,t=>t.ct),Get:e[0].Qvt,EU:-i.qot.SCt};await this.Y2(s,h,n);const o=h.Get+h.EU,a=o+h.ct;this.wCt._Ct(i.qot,Uo.nL(o,a))}}catch(t){s.error=t,s.hasError=!0}finally{Zs(s)}}catch(t){throw i.TCt(),t}finally{i.kCt();const t=this.bCt;this.bCt=void 0,null==t||t.Qy()}}async Q2(t,i,e,s){if(this.yCt)throw new m("Concurrent appends are not supported.");try{const n={stack:[],error:void 0,hasError:!1};try{const r=Es(n,Zc.ep([s,this.D3.Yg]),!1).Yg;this.bCt=new Ga,await this.Y2(t,i,r);const h=i.Get+i.EU,o=h+i.ct;this.wCt.vCt(this.Fx),this.wCt._Ct(e,Uo.nL(h,o))}catch(t){n.error=t,n.hasError=!0}finally{Zs(n)}}finally{const t=this.bCt;this.bCt=void 0,null==t||t.Qy()}}async Y2(t,i,e){this.Wrt.V3===at.Mk&&this.ECt.elt(t,i.Get,i.Get+i.ct,i.EU,this.Nyt,!1);const s=this.PL.ML.BL,n=this.Wrt.Fx.Cr(this.PL.zx);if(s||n)return await this.xCt(e),await this.Wrt.Q2({Km:We.wZ,lk:t},i,e);this.mCt.push([t,i]);const r=this.mCt[0][1].Get;return this.mCt[this.mCt.length-1][1].Get-r>=.4?await this.xCt(e):void 0}async J2(t,i){if(this.yCt)throw new m("Concurrent appends are not supported.");try{const e={stack:[],error:void 0,hasError:!1};try{const s=Es(e,Zc.ep([i,this.D3.Yg]),!1).Yg;this.bCt=new Ga,await this.xCt(s),await this.Wrt.J2({Km:We.wZ,lk:t},{},s),this.Wrt.V3===at.Mk&&this.ECt.ght(t)}catch(t){e.error=t,e.hasError=!0}finally{Zs(e)}}finally{const t=this.bCt;this.bCt=void 0,null==t||t.Qy()}}async pS(t,i,e){if(this.yCt)throw new m("Concurrent appends are not supported.");try{const s={stack:[],error:void 0,hasError:!1};try{const n=Es(s,Zc.ep([e,this.D3.Yg]),!1).Yg;this.bCt=new Ga,await this.xCt(n),await this.Wrt.pS(t,i,n),this.wCt.gCt(Uo.nL(t,i))}catch(t){s.error=t,s.hasError=!0}finally{Zs(s)}}finally{const t=this.bCt;this.bCt=void 0,null==t||t.Qy()}}async EQ(t){if(this.yCt)throw new m("Concurrent appends are not supported.");try{const i={stack:[],error:void 0,hasError:!1};try{const e=Es(i,Zc.ep([t,this.D3.Yg]),!1).Yg;this.bCt=new Ga,await this.xCt(e)}catch(t){i.error=t,i.hasError=!0}finally{Zs(i)}}finally{const t=this.bCt;this.bCt=void 0,null==t||t.Qy()}}async xCt(t){for(const[i,e]of this.mCt)await this.Wrt.Q2({Km:We.wZ,lk:i},e,t);Wt(this.mCt)}async zg(){for(this.D3.zg();this.yCt;)await this.ACt}constructor(t,i,e,s){super(),this.Wrt=void 0,this.wCt=void 0,this.PL=void 0,this.mCt=[],this.Nyt=void 0,this.ECt=void 0,this.bCt=void 0,this.D3=new Zc,this.PL=i,this.Wrt=t,this.Nyt=e,this.ECt=s,this.wCt=new Sj,this.Wrt.wn(bi.pZ,this.Rs)}};r(),r();var kj=class{async PCt(t,i){if(this.ICt>=this.CCt.maxRetries)throw t;const e=this.RCt(this.ICt++);await Ze(e,i)}RCt(t){let i=0;return 0!==t&&(i+=_.min(this.CCt.maximumBackoff,this.CCt.minimumBackoff*2**(t-1))),i}constructor(t){this.ICt=0,this.CCt=void 0,this.CCt=t}};r(),r();var Ej=function(t){return t.DCt="emsgdata",t}({}),xj=class extends gp{constructor(t,i){super("emsgdata"),this.value=void 0,this.data=void 0,this.value=t,this.data=i}};r();var Pj=class{start(t){this.iZ=t}NCt(t){this.iZ.enqueue(t)}constructor(){this.iZ=void 0}};r(),r();var wh=function(t){return t.BCt="initdata",t.MANIFEST_UPDATE="manifestupdate",t.MCt="timestamps:v1",t}({});function Ij(t){if("urn:theo:hesp:2020"!==t.sM)return;const i=t.XE;if(i===wh.BCt){return function(t){if(!t||!Mc(t))return;const i=t;return!lo(i.index)||!lo(i.offset)||i.index<0&&i.offset<0?void 0:{Km:"initdata",index:i.index,offset:i.offset}}(JSON.parse(nm(dh(t.hM),new oi)))}if(i===wh.MANIFEST_UPDATE){return function(t){if(!t||!Mc(t))return;const i=t;return!it(i.url)||Q(i.url)?{Km:"manifestupdate",url:i.url}:void 0}(JSON.parse(nm(dh(t.hM),new oi)))}if(i===wh.MCt){const i=dh(t.hM),e=new oi,s=qt(i,e).toNumber()/t.jD,n=qt(i,e).toNumber()/1e3,r=ti(i,e)/1e3;let h;return e.ac+8<=i.byteLength&&(h={hours:ti(i,e),minutes:qp(i,e),seconds:qp(i,e),frames:Rn(i,e)}),{Km:wh.MCt,LCt:s,OCt:n,FCt:r,UCt:h}}}var Cj=class extends Pj{transform(t){if(t.Km===ui.zR)try{const i=Ij(Hn.VD(t.lk));i&&this.VCt.So(new xj(i.Km,i))}catch(t){false}this.NCt(t)}zg(){this.VCt.Vo()}constructor(...t){super(...t),this.VCt=new Ne}};r();var Rj=class{start(t){this.HCt=new Dj(t)}transform(t){this.HCt.E$(t)}flush(){this.HCt.P$()}constructor(){this.HCt=void 0}},Dj=class extends Qa{L$(t){return!0}F$(t){this.iZ.enqueue(t)}V$(t){}constructor(t){super(),this.iZ=void 0,this.iZ=t}};r(),r();var Nj=yo.fromNumber(Gl);var Bj=class extends Ne{async vk(t){for(;;)try{return await this.aV.vk(t)}catch(i){if(Ce(i))throw i;await this.WCt.PCt(i,t.Yg)}}constructor(t,i){super(),this.aV=void 0,this.WCt=void 0,this.aV=t,this.WCt=i}};function Mj(t,i,e,s,n,r,h,o){const a=new cc;return n&&a.UT(function(t,i){return void 0===i&&(i=Nj),new cc({Range:"bytes="+t.toString()+"-"+i.toString()})}(n.start,n.end)),{Yu:t,_k:a,Xk:!1,Yg:o,Km:q.Ak,zk:e,Gk:s,Wk:r,qk:h,fk:i,Kk:i===Bi.MT}}r(),r(),r();var _c,vl,Lj=function(t){return t[t.INITIALIZER=0]="INITIALIZER",t[t.FRAMES=1]="FRAMES",t}({});r(),r(),function(t){t[t.NON_IDR_PICTURE=1]="NON_IDR_PICTURE",t[t.PARTITION_A_DATA=2]="PARTITION_A_DATA",t[t.PARTITION_B_DATA=3]="PARTITION_B_DATA",t[t.PARTITION_C_DATA=4]="PARTITION_C_DATA",t[t.IDR_PICTURE=5]="IDR_PICTURE",t[t.SUPPLEMENTAL_ENHANCEMENT_INFORMATION=6]="SUPPLEMENTAL_ENHANCEMENT_INFORMATION",t[t.SEQUENCE_PARAMETER_SET=7]="SEQUENCE_PARAMETER_SET",t[t.PICTURE_PARAMETER_SET=8]="PICTURE_PARAMETER_SET",t[t.ACCESS_UNIT_DELIMITER=9]="ACCESS_UNIT_DELIMITER",t[t.END_OF_SEQUENCE=10]="END_OF_SEQUENCE",t[t.END_OF_STREAM=11]="END_OF_STREAM",t[t.FILTER_DATA=12]="FILTER_DATA",t[t.SEQUENCE_PARAMETER_EXTENSION_SET=13]="SEQUENCE_PARAMETER_EXTENSION_SET",t[t.PREFIX_NAL_UNIT=14]="PREFIX_NAL_UNIT",t[t.SUBSET_SEQUENCE_PARAMETER_SET=15]="SUBSET_SEQUENCE_PARAMETER_SET",t[t.DEPTH_PARAMETER_SET=16]="DEPTH_PARAMETER_SET",t[t.CODED_SLICE_WITHOUT_PARITIONING=19]="CODED_SLICE_WITHOUT_PARITIONING",t[t.CODED_SLICE_EXTENSION=20]="CODED_SLICE_EXTENSION",t[t.CODED_SLICE_FOR_DEPTH_VIEW=21]="CODED_SLICE_FOR_DEPTH_VIEW"}(_c||(_c={})),r(),r(),r(),function(t){t[t.P=0]="P",t[t.B=1]="B",t[t.I=2]="I",t[t.SP=3]="SP",t[t.SI=4]="SI"}(vl||(vl={})),r();var Oj=255,Fj=[44,83,86,100,110,118,122,128,134,135,138,139,244],Uj=[44,86,100,110,122,244];function Vj(t){return t.separateColourPlaneFlag?0:t.chromaFormatIDC}function Hj(t){return t.parsed&&t.header.type===_c.SEQUENCE_PARAMETER_SET}r(),r(),r(),r();var Wj=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.emulationTracker=0,i.emulationsSkipped=0,i}return Dt(i,t),w.defineProperty(i.prototype,"skippedEmulationBytes",{get:function(){return this.emulationsSkipped},enumerable:!0,configurable:!0}),i.prototype.peekBit=function(){var i=t.prototype.peekBit.call(this);return 1===i||0===this.emulationTracker&&0!==this.location.bit?this.emulationTracker=0:22===++this.emulationTracker&&(t.prototype.skipBits.call(this,8),this.emulationsSkipped++,this.emulationTracker=0),i},i.prototype.readByte=function(){for(var t=0,i=7;i>=0;i--)t+=this.readBit()<<i;return t},i}(H);function qj(t,i,e,s,n){for(var r=[],h=[],o=[],a=[],u=[],c=[],d=0;d<=e;d++){var l=t.readBool();if(r.push(l),l?(h.push(t.readSignedExponentialGolombCode()),o.push(t.readSignedExponentialGolombCode())):(h.push(_.pow(2,s)),o.push(0)),0!==i){var f=t.readBool();a.push(f);for(var v=[],g=[],p=0;p<2;p++)f?(v.push(t.readSignedExponentialGolombCode()),g.push(t.readSignedExponentialGolombCode())):(v.push(_.pow(2,n)),g.push(0));u.push(v),c.push(g)}}return{lumaWeightFlags:r,lumaWeight:h,lumaOffset:o,chromaWeightFlags:a,chromaWeight:u,chromaOffset:c}}function zj(t,i,e){var s,n;return void 0===e&&(e=!1),i!==vl.I&&i!==vl.SI&&t.readBool()&&(s=Gj(t,e)),i===vl.B&&t.readBool()&&(n=Gj(t,e)),{l0:s,l1:n}}function Gj(t,i){var e,s,n=[],r=[],h=[];i&&(e=[]);var o=-1;do{o++,s=t.readExponentialGolombCode(),n.push(s),h.push(0),r.push(0),i&&e.push(0),0===s||1===s?r[o]=t.readExponentialGolombCode():2===s?h[o]=t.readExponentialGolombCode():!i||4!==s&&5!==s||(e[o]=t.readExponentialGolombCode())}while(3!==s);return{modificationOfPicNumsIdc:n,absDiffPicNumMinus1:r,longTermPicNum:h,absDiffViewIdxMinus1:e}}function Xj(t,i,e){var s,n,r,h=new Wj(t.data),o=0,a=!1,u=!1,c=0,d=0,l=0,f=[],v=0,_=!1,g=!1,p=e.numRefIdxL0DefaultActiveMinus1,w=e.numRefIdxL1DefaultActiveMinus1,y=0,b=!1,A=0,S=0,T=0,k=0,E=0,x=h.readExponentialGolombCode(),P=h.readExponentialGolombCode(),I=function(t){if(!(t<0||t>9))return t%5}(P),C=h.readExponentialGolombCode();if(void 0===I)throw new m("Could not read the slice header slice type.");i.separateColourPlaneFlag&&(o=h.readUInt(2));var R=h.readUInt(i.log2MaxFrameNumMinus4+4);(i.frameMbsOnlyFlag||(a=h.readBool())&&(u=h.readBool()),t.header.type===_c.IDR_PICTURE&&(c=h.readExponentialGolombCode()),0===i.picOrderCntType?(d=h.readUInt(i.log2MaxPicOrderCntLsbMinus4+4),e.bottomFieldPicOrderInFramePresentFlag&&(l=h.readSignedExponentialGolombCode())):1!==i.picOrderCntType||i.deltaPicOrderAlwaysZeroFlag||(f.push(h.readSignedExponentialGolombCode()),e.bottomFieldPicOrderInFramePresentFlag?f.push(h.readSignedExponentialGolombCode()):f.push(0)),e.redundantPicCntPresentFlag&&(v=h.readExponentialGolombCode()),I===vl.B&&(_=h.readBool()),[vl.B,vl.P,vl.SP].includes(I)&&(g=h.readBool())&&(p=h.readExponentialGolombCode(),I===vl.B&&(w=h.readExponentialGolombCode())),s=t.header.type===_c.CODED_SLICE_EXTENSION||t.header.type===_c.CODED_SLICE_FOR_DEPTH_VIEW?zj(h,I,!0):zj(h,I),(e.weightedPredFlag&&(I===vl.P||I===vl.SP)||1===e.weightedBipredIdc&&I===vl.B)&&(n=function(t,i,e,s,n){var r,h=0,o=t.readExponentialGolombCode();0!==e&&(h=t.readExponentialGolombCode());var a=qj(t,e,s,o,h);return i===vl.B&&(r=qj(t,e,n,o,h)),{chromaLog2WeightDenom:h,lumaLog2WeightDenom:o,l0:a,l1:r}}(h,I,Vj(i),p,w)),0!==t.header.refIdc)&&(r=function(t,i){var e=!1,s=!1,n=!1,r=[],h=[],o=[],a=[],u=[];if(i)e=t.readBool(),s=t.readBool();else if(n=t.readBool()){var c=-1,d=void 0;do{h.push(0),o.push(0),a.push(0),u.push(0),c++,d=t.readExponentialGolombCode(),r.push(d),1!==d&&3!==d||(h[c]=t.readExponentialGolombCode()),2===d&&(o[c]=t.readExponentialGolombCode()),3!==d&&6!==d||(a[c]=t.readExponentialGolombCode()),4===d&&(u[c]=t.readExponentialGolombCode())}while(0!==d)}return{noOutputOfPriorPicsFlag:e,longTermReferenceFlag:s,adaptiveRefPicMarkingModeFlag:n,memoryManagementControlOperation:r,differenceOfPicNumsMinus1:h,longTermPicNum:o,longTermFrameIdx:a,maxLongTermFrameIdxPlus1:u}}(h,t.header.type===_c.IDR_PICTURE));e.entropyCodingModeFlag&&I!==vl.I&&I!==vl.SI&&(y=h.readExponentialGolombCode());var D=h.readSignedExponentialGolombCode();return I!==vl.SP&&I!==vl.SI||(I===vl.SP&&(b=h.readBool()),A=h.readSignedExponentialGolombCode()),e.deblockingFilterControlPresentFlag&&1!==(S=h.readExponentialGolombCode())&&(T=h.readSignedExponentialGolombCode(),k=h.readSignedExponentialGolombCode()),e.numSliceGroupsMinus1>0&&e.sliceGroupMapType>=3&&e.sliceGroupMapType<=5&&(E=h.readUInt(Pm(e.picSizeInMapUnitsMinus1+e.sliceGroupChangeRateMinus1+1))),e.entropyCodingModeFlag&&h.location.bit>0&&h.skipBits(8-h.location.bit),{header:Tm(Tm({},t.header),{firstMbInSlice:x,sliceType:I,origSliceType:P,picParameterSetID:C,colourPlaneID:o,frameNum:R,fieldPicFlag:a,bottomFieldFlag:u,idrPicID:c,picOrderCntLsb:d,deltaPicOrderCntBottom:l,deltaPicOrderCnt:f,redundantPicCnt:v,directSpatialMvPredFlag:_,numRefIdxActiveOverrideFlag:g,numRefIdxL0ActiveMinus1:p,numRefIdxL1ActiveMinus1:w,cabacInitIdc:y,sliceQpDelta:D,spForSwitchFlag:b,sliceQsDelta:A,disableDeblockingFilterIdc:S,sliceAlphaC0OffsetDiv2:T,sliceBetaOffsetDiv2:k,sliceGroupChangeCycle:E,rplm:s,pwt:n,drpm:r}),parsed:!0,data:new Em(t.data.slice(h.location.byte,t.data.length),h.location.bit)}}function jj(t){var i=function(t,i){return 11===t&&i[3]?Qj["1b"]:Qj[(t/10).toFixed(1)]}(t.levelIDC,t.constraintFlags),e=(t.frameMbsOnlyFlag?1:2)*(t.picHeightInMapUnitsMinus1+1);return _.min(16,i.maxDpbMbs/((t.picWidthInMbsMinus1+1)*e))}r(),r(),r(),r(),r();var Qj={"1.0":{maxMbps:1485,maxFs:99,maxDpbMbs:396,maxBr:64,maxCpb:175},"1b":{maxMbps:1485,maxFs:99,maxDpbMbs:396,maxBr:128,maxCpb:350},1.1:{maxMbps:3e3,maxFs:396,maxDpbMbs:900,maxBr:192,maxCpb:500},1.2:{maxMbps:6e3,maxFs:396,maxDpbMbs:2376,maxBr:384,maxCpb:1e3},1.3:{maxMbps:11880,maxFs:396,maxDpbMbs:2376,maxBr:384,maxCpb:2e3},"2.0":{maxMbps:11880,maxFs:396,maxDpbMbs:2376,maxBr:768,maxCpb:2e3},2.1:{maxMbps:19800,maxFs:792,maxDpbMbs:4752,maxBr:4e3,maxCpb:4e3},2.2:{maxMbps:20250,maxFs:1620,maxDpbMbs:8100,maxBr:4e3,maxCpb:4e3},"3.0":{maxMbps:40500,maxFs:1620,maxDpbMbs:8100,maxBr:1e4,maxCpb:1e4},3.1:{maxMbps:108e3,maxFs:3600,maxDpbMbs:18e3,maxBr:14e3,maxCpb:14e3},3.2:{maxMbps:216e3,maxFs:5120,maxDpbMbs:20480,maxBr:2e4,maxCpb:2e4},"4.0":{maxMbps:245760,maxFs:8192,maxDpbMbs:32768,maxBr:2e4,maxCpb:25e3},4.1:{maxMbps:245760,maxFs:8192,maxDpbMbs:32768,maxBr:5e4,maxCpb:62500},4.2:{maxMbps:522240,maxFs:8704,maxDpbMbs:34816,maxBr:5e4,maxCpb:62500},"5.0":{maxMbps:589824,maxFs:22080,maxDpbMbs:110400,maxBr:135e3,maxCpb:135e3},5.1:{maxMbps:983040,maxFs:36864,maxDpbMbs:184320,maxBr:24e4,maxCpb:24e4},5.2:{maxMbps:2073600,maxFs:36864,maxDpbMbs:184320,maxBr:24e4,maxCpb:24e4},"6.0":{maxMbps:4177920,maxFs:139264,maxDpbMbs:696320,maxBr:24e4,maxCpb:24e4},6.1:{maxMbps:8355840,maxFs:139264,maxDpbMbs:696320,maxBr:48e4,maxCpb:48e4},6.2:{maxMbps:16711680,maxFs:139264,maxDpbMbs:696320,maxBr:8e5,maxCpb:8e5}};function Kj(t,i){for(var e,s=!1,n=[],r=8,h=8,o=0;o<i;o++)0!==h&&(h=(r+(e=t.readSignedExponentialGolombCode())+256)%256,s=0===o&&0===h),r=0===h?r:h,void 0!==e&&n.push(e);return{useDefaultScalingMatrixFlag:s,scalingList:n}}function Yj(t){for(var i=new Wj(t.data),e=i.readByte(),s=[],n=2;n<8;n++)s[n-2]=i.readBool();var r=i.readUInt(2),h=i.readByte(),o=i.readExponentialGolombCode(),a=1,u=!1,c=0,d=0,l=!1,f=!1,v=[],g=[],p=[],m=[],w=[];if(Fj.includes(e)&&(3===(a=i.readExponentialGolombCode())&&(u=i.readBool()),c=i.readExponentialGolombCode(),d=i.readExponentialGolombCode(),l=i.readBool(),f=i.readBool()))for(var y=void 0,b=0;b<(3!==a?8:12);b++){var A=i.readBool();v.push(A),A&&(b<6?(y=Kj(i,16),g.push(y.scalingList),p.push(y.useDefaultScalingMatrixFlag)):(y=Kj(i,64),m.push(y.scalingList),w.push(y.useDefaultScalingMatrixFlag)))}var S,T=0,k=!1,E=0,x=0,P=0,I=[],C=!1,R=0,D=0,N=0,B=0,M=i.readExponentialGolombCode(),L=i.readExponentialGolombCode();if(0===L)T=i.readExponentialGolombCode();else if(1===L){k=i.readBool(),E=i.readSignedExponentialGolombCode(),x=i.readSignedExponentialGolombCode(),P=i.readExponentialGolombCode();for(b=0;b<P;b+=1)I.push(i.readSignedExponentialGolombCode())}var O=i.readExponentialGolombCode(),F=i.readBool(),U=i.readExponentialGolombCode(),V=i.readExponentialGolombCode(),H=i.readBool();H||(C=i.readBool());var W=i.readBool(),q=i.readBool();q&&(R=i.readExponentialGolombCode(),N=i.readExponentialGolombCode(),D=i.readExponentialGolombCode(),B=i.readExponentialGolombCode());var z=Tm(Tm({},t.header),{profileIDC:e,constraintFlags:s,reservedZero2Bits:r,levelIDC:h,seqParameterSetId:o,chromaFormatIDC:a,separateColourPlaneFlag:u,bitDepthLumaMinus8:c,bitDepthChromaMinus8:d,qpprimeYZeroTransformBypassFlag:l,seqScalingMatrixPresentFlag:f,seqScalingListPresentFlags:v,scalingList4x4:g,useDefaultScalingMatrix4x4Flag:p,scalingList8x8:m,useDefaultScalingMatrix8x8Flag:w,log2MaxFrameNumMinus4:M,picOrderCntType:L,log2MaxPicOrderCntLsbMinus4:T,deltaPicOrderAlwaysZeroFlag:k,offsetForNonRefPic:E,offsetForTopToBottomField:x,numRefFramesInPicOrderCntCycle:P,offsetForRefFrame:I,maxNumRefFrames:O,gapsInFrameNumValueAllowedFlag:F,picWidthInMbsMinus1:U,picHeightInMapUnitsMinus1:V,frameMbsOnlyFlag:H,mbAdaptiveFrameFieldFlag:C,direct8x8InferenceFlag:W,frameCroppingFlag:q,frameCropLeftOffset:R,frameCropRightOffset:N,frameCropTopOffset:D,frameCropBottomOffset:B,width:_.floor(16*(U+1)-2*R-2*N),height:_.floor((2-(H?1:0))*(V+1)*16-2*D-2*B)});return i.readBool()&&(S=function(t,i){var e,s,n,r=0,h=0,o=0,a=!1,u=5,c=!1,d=!1,l=2,f=2,v=2,_=0,g=0,p=0,m=0,w=!1,y=!0,b=2,A=1,S=15,T=15,k=Uj.includes(i.profileIDC)&&i.constraintFlags[3]?0:jj(i),E=Uj.includes(i.profileIDC)&&i.constraintFlags[3]?0:jj(i),x=t.readBool();x&&255===(r=t.readUInt(8))&&(h=t.readUInt(16),o=t.readUInt(16));var P=t.readBool();P&&(a=t.readBool());var I=t.readBool();I&&(u=t.readUInt(3),c=t.readBool(),(d=t.readBool())&&(l=t.readUInt(8),f=t.readUInt(8),v=t.readUInt(8)));var C=t.readBool();C&&(_=t.readExponentialGolombCode(),g=t.readExponentialGolombCode());var R=t.readBool();R&&(p=t.readUInt(32),m=t.readUInt(32),w=t.readBool());var D=t.readBool();D&&(s=Jj(t,0));var N=t.readBool();N&&(n=Jj(t,0));(D||N)&&(e=t.readBool());var B=t.readBool(),M=t.readBool();M&&(y=t.readBool(),b=t.readExponentialGolombCode(),A=t.readExponentialGolombCode(),S=t.readExponentialGolombCode(),T=t.readExponentialGolombCode(),k=t.readExponentialGolombCode(),E=t.readExponentialGolombCode());return{aspectRatioInfoPresentFlag:x,aspectRatioIdc:r,sarWidth:h,sarHeight:o,overscanInfoPresentFlag:P,overscanAppropriateFlag:a,videoSignalTypePresentFlag:I,videoFormat:u,videoFullRangeFlag:c,colourDescriptionPresentFlag:d,colourPrimaries:l,transferCharacteristics:f,matrixCoefficients:v,chromaLocInfoPresentFlag:C,chromaSampleLocTypeTopField:_,chromaSampleLocTypeBottomField:g,timingInfoPresentFlag:R,numUnitsInTick:p,timeScale:m,fixedFrameRateFlag:w,nalHrdParameters:s,vclHrdParameters:n,lowDelayHrdFlag:null!=e?e:!w,picStructPresentFlag:B,bitstreamRestrictionFlag:M,motionVectorsOverPicBoundariesFlag:y,maxBytesPerPicDenom:b,maxBitsPerMbDenom:A,log2MaxMvLengthHorizontal:S,log2MaxMvLengthVertical:T,maxNumReorderFrames:k,maxDecFrameBuffering:E}}(i,z)),{header:Tm(Tm({},z),{vui:S}),parsed:!0,data:t.data.slice(i.location.byte+(0===i.location.bit?0:1))}}function Jj(t,i){for(var e=![0,5].includes(i),s=e?0:t.readExponentialGolombCode(),n=e?void 0:t.readUInt(4),r=e?void 0:t.readUInt(4),h=[],o=[],a=[],u=0;u<=s;u++)if(e)a.push(!1);else{var c=t.readExponentialGolombCode(),d=t.readExponentialGolombCode();h.push(c),o.push(d),a.push(t.readBool())}return{cpbCntMinus1:s,bitRateScale:n,cpbSizeScale:r,bitRateValueMinus1:h,cpbSizeValueMinus1:o,cbrFlag:a,initialCpbRemovalDelayLengthMinus1:e?23:t.readUInt(5),cpbRemovalDelayLengthMinus1:e?23:t.readUInt(5),dpbOutputDelayLengthMinus1:e?23:t.readUInt(5),timeOffsetLength:e?24:t.readUInt(5)}}r(),r();var Zj=function(){function t(){}return t.prototype.setSps=function(t){this.sps=t},t.prototype.setPps=function(t){this.pps=t},t.prototype.parseNal=function(t){switch(t.header.type){case _c.SEQUENCE_PARAMETER_SET:var i=Yj(t);return this.setSps(i.header),i;case _c.PICTURE_PARAMETER_SET:if(void 0===this.sps)throw new m("SPS data is missing, even though a PPS NAL was given.");var e=function(t,i){var e=new Wj(t.data),s=0,n=[],r=[],h=[],o=!1,a=0,u=0,c=[],d=!1,l=!1,f=[],v=[],_=[],g=[],p=[],m=e.readExponentialGolombCode(),w=e.readExponentialGolombCode(),y=e.readBool(),b=e.readBool(),A=e.readExponentialGolombCode();if(A>0)if(0===(s=e.readExponentialGolombCode()))for(var S=0;S<=A;S++)n.push(e.readExponentialGolombCode());else if(2===s)for(S=0;S<A;S++)r.push(e.readExponentialGolombCode()),h.push(e.readExponentialGolombCode());else if([3,4,5].includes(s))o=e.readBool(),a=e.readExponentialGolombCode();else if(6===s)for(u=e.readExponentialGolombCode(),S=0;S<=u;S++)c.push(e.readUInt(Pm(A+1)));var T=e.readExponentialGolombCode(),k=e.readExponentialGolombCode(),E=e.readBool(),x=e.readUInt(2),P=e.readSignedExponentialGolombCode(),I=e.readSignedExponentialGolombCode(),C=e.readSignedExponentialGolombCode(),R=e.readBool(),D=e.readBool(),N=e.readBool(),B=C,M=function(t){if(t.done)return!1;if(0===t.peekBit())return!0;var i=t.copy();for(i.skipBits(1);!i.done;)if(i.readBool())return!0;return t.skipBits(8-t.location.bit),!1}(e);if(M){if(d=e.readBool(),l=e.readBool()){var L=6;d&&(L+=3!==i.chromaFormatIDC?2:6);var O=void 0;for(S=0;S<L;S++){var F=e.readBool();f.push(F),F&&(S<6?(O=Kj(e,16),v.push(O.scalingList),_.push(O.useDefaultScalingMatrixFlag)):(O=Kj(e,64),g.push(O.scalingList),p.push(O.useDefaultScalingMatrixFlag)))}}B=e.readSignedExponentialGolombCode()}return{header:Tm(Tm({},t.header),{picParameterSetId:m,seqParameterSetId:w,entropyCodingModeFlag:y,bottomFieldPicOrderInFramePresentFlag:b,numSliceGroupsMinus1:A,sliceGroupMapType:s,runLengthMinus1:n,topLeft:r,bottomRight:h,sliceGroupChangeDirectionFlag:o,sliceGroupChangeRateMinus1:a,picSizeInMapUnitsMinus1:u,sliceGroupId:c,numRefIdxL0DefaultActiveMinus1:T,numRefIdxL1DefaultActiveMinus1:k,weightedPredFlag:E,weightedBipredIdc:x,picInitQpMinus26:P,picInitQsMinus26:I,chromaQpIndexOffset:C,deblockingFilterControlPresentFlag:R,constrainedIntraPredFlag:D,redundantPicCntPresentFlag:N,hasMoreRbsp:M,transform8x8ModeFlag:d,picScalingMatrixPresentFlag:l,picScalingListPresentFlags:f,scalingList4x4:v,useDefaultScalingMatrix4x4Flag:_,scalingList8x8:g,useDefaultScalingMatrix8x8Flag:p,secondChromaQpIndexOffset:B}),parsed:!0,data:t.data.slice(e.location.byte+(0===e.location.bit?0:1),t.data.length)}}(t,this.sps);return this.setPps(e.header),e;case _c.NON_IDR_PICTURE:case _c.IDR_PICTURE:if(void 0===this.pps)throw new m("PPS data is missing, even though an IDR_PIC NAL was given.");if(void 0===this.sps)throw new m("SPS data is missing, even though an IDR_PIC NAL was given.");return Xj(t,this.sps,this.pps);default:return{header:t.header,parsed:!0,data:t.data}}},t.prototype.parseNals=function(t){var i=this;return t.map(function(t){return i.parseNal(t)})},t.prototype.calculateHeaderLength=function(t){var i=t.data.bitLength-this.parseNal(t).data.bitLength;return _.ceil(i/8)},t}();function $j(t){if(0===t.length)throw new m("NALU should be at least a byte long.");var i=new H(t);if(0!==i.readBit())throw new m("Forbidden zero bit is NOT zero. NAL parsing failed.");return{header:{refIdc:i.readUInt(2),type:i.readUInt(5)},parsed:!1,data:t.slice(1).trim()}}function tQ(t){return t instanceof j?Pi.from(t):t}r(),r(),r();var iQ=function(){function t(t){if(t<1)throw new m("Expected lengthSize to be at least 1, but was "+t+".");this.currentBuffer=new Pi,this.lengthSize=t}return t.prototype.extractNals=function(t){this.currentBuffer=this.currentBuffer.concat(tQ(t));for(var i=[];this.currentBuffer.length>=this.lengthSize;){var e=this.currentBuffer.readUIntBE(0,this.lengthSize);if(this.lengthSize+e>this.currentBuffer.length)break;var s=this.currentBuffer.slice(this.lengthSize,this.lengthSize+e);i.push($j(s)),this.currentBuffer=this.currentBuffer.slice(this.lengthSize+e)}return i},t}();r(),r();var eQ=new j([0,0,1]),sQ=new j([0,0,0,1]);function nQ(t){return!1===t.parsed}var rQ=function(){function t(){this.currentData=new Pi,this.startFound=!1}return t.prototype.extractNals=function(i){this.currentData=this.currentData.concat(tQ(i));var e=[];if(!this.startFound){var s=this.currentData.indexOf(sQ);if(-1===s)return e;this.currentData=this.currentData.slice(s+4),this.startFound=!0}for(;this.currentData.length>0;){var n=t.findNextIndex(this.currentData);if(void 0===n)break;var r=n[0],h=n[1];e.push($j(this.currentData.slice(0,r))),this.currentData=this.currentData.slice(r+h)}return e},t.findNextIndex=function(t){var i=t.indexOf(sQ),e=t.indexOf(eQ);if(-1!==i||-1!==e)return-1===i||i>e?[e,3]:[i,4]},t}(),hQ=function(){function t(){}return t.createStreamingAnnexBExtractor=function(){return new rQ},t.createStreamingAvccExtractor=function(t){return new iQ(t)},t.extractAnnexB=function(t){var i=new rQ,e=tQ(t);return e.pushRange(new j([0,0,0,1])),i.extractNals(e)},t.extractAvcc=function(t,i){return new iQ(i).extractNals(tQ(t))},t.extractParsedAnnexB=function(t){return(new Zj).parseNals(this.extractAnnexB(t))},t.extractParsedAvcc=function(t,i){return(new Zj).parseNals(this.extractAvcc(t,i))},t}();r(),r(),r(),r();var oQ=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.emulationTracker=0,i}return Dt(i,t),i.prototype.writeBit=function(i){if(22===this.emulationTracker){for(var e=0,s=[1,1,0,0,0,0,0,0];e<s.length;e++){var n=s[e];t.prototype.writeBit.call(this,n)}this.emulationTracker=0}1===i?this.emulationTracker=0:(this.isWritingStartBit||this.emulationTracker>0)&&(this.emulationTracker+=1),t.prototype.writeBit.call(this,i)},i.prototype.writeByte=function(t){for(var i=7;i>=0;i--)this.writeBool((t&1<<i)>0)},i.prototype.writeBuffer=function(i){var e;for(e=0;e<i.length-1;e++)t.prototype.writeByte.call(this,i.get(e));for(var s=8*e;s<i.bitLength;s++)t.prototype.writeBit.call(this,i.getBit(s))},i.prototype.writeTrailingBits=function(){this.writeBit(1),this.padByte(0)},i}(Dm);function aQ(t,i,e,s){void 0===s&&(s=!1),i!==vl.I&&i!==vl.SI&&(e.writeBool(void 0!==t.l0),void 0!==t.l0&&uQ(t.l0,e,s)),i===vl.B&&(e.writeBool(void 0!==t.l1),void 0!==t.l1&&uQ(t.l1,e,s))}function uQ(t,i,e){for(var s=0;s<t.modificationOfPicNumsIdc.length;s++){var n=t.modificationOfPicNumsIdc[s];i.writeExponentialGolombCode(n),0===n||1===n?i.writeExponentialGolombCode(t.absDiffPicNumMinus1[s]):2===n?i.writeExponentialGolombCode(t.longTermPicNum[s]):!e||4!==n&&5!==n||i.writeExponentialGolombCode(t.absDiffViewIdxMinus1[s])}}function cQ(t,i,e,s){for(var n=0;n<=e;n++)if(s.writeBool(t.lumaWeightFlags[n]),t.lumaWeightFlags[n]&&(s.writeSignedExponentialGolombCode(t.lumaWeight[n]),s.writeSignedExponentialGolombCode(t.lumaOffset[n])),0!==i&&(s.writeBool(t.chromaWeightFlags[n]),t.chromaWeightFlags[n]))for(var r=0;r<2;r++)s.writeSignedExponentialGolombCode(t.chromaWeight[n][r]),s.writeSignedExponentialGolombCode(t.chromaOffset[n][r])}function dQ(t,i,e){var s=t.header,n=new oQ;if(n.writeExponentialGolombCode(s.firstMbInSlice),n.writeExponentialGolombCode(s.origSliceType),n.writeExponentialGolombCode(s.picParameterSetID),i.separateColourPlaneFlag&&n.writeUInt(s.colourPlaneID,2),n.writeUInt(s.frameNum,i.log2MaxFrameNumMinus4+4),i.frameMbsOnlyFlag||(n.writeBool(s.fieldPicFlag),s.fieldPicFlag&&n.writeBool(s.bottomFieldFlag)),s.type===_c.IDR_PICTURE&&n.writeExponentialGolombCode(s.idrPicID),0===i.picOrderCntType?(n.writeUInt(s.picOrderCntLsb,i.log2MaxPicOrderCntLsbMinus4+4),e.bottomFieldPicOrderInFramePresentFlag&&!s.fieldPicFlag&&n.writeSignedExponentialGolombCode(s.deltaPicOrderCntBottom)):1!==i.picOrderCntType||i.deltaPicOrderAlwaysZeroFlag||(n.writeSignedExponentialGolombCode(s.deltaPicOrderCnt[0]),e.bottomFieldPicOrderInFramePresentFlag&&!s.fieldPicFlag&&n.writeSignedExponentialGolombCode(s.deltaPicOrderCnt[1])),e.redundantPicCntPresentFlag&&n.writeExponentialGolombCode(s.redundantPicCnt),s.sliceType===vl.B&&n.writeBool(s.directSpatialMvPredFlag),[vl.P,vl.SP,vl.B].includes(s.sliceType)&&(n.writeBool(s.numRefIdxActiveOverrideFlag),s.numRefIdxActiveOverrideFlag&&(n.writeExponentialGolombCode(s.numRefIdxL0ActiveMinus1),s.sliceType===vl.B&&n.writeExponentialGolombCode(s.numRefIdxL1ActiveMinus1))),s.type===_c.CODED_SLICE_EXTENSION||s.type===_c.CODED_SLICE_FOR_DEPTH_VIEW?aQ(s.rplm,s.sliceType,n,!0):aQ(s.rplm,s.sliceType,n),(e.weightedPredFlag&&(s.sliceType===vl.P||s.sliceType===vl.SP)||1===e.weightedBipredIdc&&s.sliceType===vl.B)&&function(t,i,e,s,n,r){r.writeExponentialGolombCode(t.lumaLog2WeightDenom),0!==e&&r.writeExponentialGolombCode(t.chromaLog2WeightDenom),cQ(t.l0,e,s,r),i===vl.B&&cQ(t.l1,e,n,r)}(s.pwt,s.sliceType,Vj(i),s.numRefIdxL0ActiveMinus1,s.numRefIdxL1ActiveMinus1,n),s.refIdc){var r=s.type===_c.IDR_PICTURE;!function(t,i,e){if(e)i.writeBool(t.noOutputOfPriorPicsFlag),i.writeBool(t.longTermReferenceFlag);else if(i.writeBool(t.adaptiveRefPicMarkingModeFlag),t.adaptiveRefPicMarkingModeFlag)for(var s=0;s<t.memoryManagementControlOperation.length;s++){var n=t.memoryManagementControlOperation[s];i.writeExponentialGolombCode(n),1!==n&&3!==n||i.writeExponentialGolombCode(t.differenceOfPicNumsMinus1[s]),2===n&&i.writeExponentialGolombCode(t.longTermPicNum[s]),3!==n&&6!==n||i.writeExponentialGolombCode(t.longTermFrameIdx[s]),4===n&&i.writeExponentialGolombCode(t.maxLongTermFrameIdxPlus1[s])}}(s.drpm,n,r)}return e.entropyCodingModeFlag&&s.sliceType!==vl.I&&s.sliceType!==vl.SI&&n.writeExponentialGolombCode(s.cabacInitIdc),n.writeSignedExponentialGolombCode(s.sliceQpDelta),[vl.SP,vl.SI].includes(s.sliceType)&&(s.sliceType===vl.SP&&n.writeBool(s.spForSwitchFlag),n.writeSignedExponentialGolombCode(s.sliceQsDelta)),e.deblockingFilterControlPresentFlag&&(n.writeExponentialGolombCode(s.disableDeblockingFilterIdc),1!==s.disableDeblockingFilterIdc&&(n.writeSignedExponentialGolombCode(s.sliceAlphaC0OffsetDiv2),n.writeSignedExponentialGolombCode(s.sliceBetaOffsetDiv2))),e.numSliceGroupsMinus1>0&&e.sliceGroupMapType>=3&&e.sliceGroupMapType<=5&&n.writeUInt(s.sliceGroupChangeCycle,Pm(e.picSizeInMapUnitsMinus1+e.sliceGroupChangeRateMinus1+1)),e.entropyCodingModeFlag&&n.padByte(1),n.writeBuffer(t.data),{header:{refIdc:s.refIdc,type:s.type},parsed:!1,data:n.close()}}function lQ(t){var i=t.header,e=new oQ;e.writeByte(i.profileIDC);for(var s=0,n=i.constraintFlags;s<n.length;s++){var r=n[s];e.writeBool(r)}if(e.writeBits([0,0]),e.writeByte(i.levelIDC),e.writeExponentialGolombCode(i.seqParameterSetId),Fj.includes(i.profileIDC)&&(e.writeExponentialGolombCode(i.chromaFormatIDC),3===i.chromaFormatIDC&&e.writeBool(i.separateColourPlaneFlag),e.writeExponentialGolombCode(i.bitDepthLumaMinus8),e.writeExponentialGolombCode(i.bitDepthChromaMinus8),e.writeBool(i.qpprimeYZeroTransformBypassFlag),e.writeBool(i.seqScalingMatrixPresentFlag),i.seqScalingMatrixPresentFlag))for(var h=0;h<(3!==i.chromaFormatIDC?8:12);h++)if(e.writeBool(i.seqScalingListPresentFlags[h]),h<6)for(var o=0,a=i.scalingList4x4[h];o<a.length;o++){var u=a[o];e.writeSignedExponentialGolombCode(u)}else for(var c=0,d=i.scalingList8x8[h-6];c<d.length;c++){u=d[c];e.writeSignedExponentialGolombCode(u)}if(e.writeExponentialGolombCode(i.log2MaxFrameNumMinus4),e.writeExponentialGolombCode(i.picOrderCntType),0===i.picOrderCntType)e.writeExponentialGolombCode(i.log2MaxPicOrderCntLsbMinus4);else if(1===i.picOrderCntType){e.writeBool(i.deltaPicOrderAlwaysZeroFlag),e.writeSignedExponentialGolombCode(i.offsetForNonRefPic),e.writeSignedExponentialGolombCode(i.offsetForTopToBottomField),e.writeExponentialGolombCode(i.numRefFramesInPicOrderCntCycle);for(var l=0,f=i.offsetForRefFrame;l<f.length;l++){var v=f[l];e.writeSignedExponentialGolombCode(v)}}return e.writeExponentialGolombCode(i.maxNumRefFrames),e.writeBool(i.gapsInFrameNumValueAllowedFlag),e.writeExponentialGolombCode(i.picWidthInMbsMinus1),e.writeExponentialGolombCode(i.picHeightInMapUnitsMinus1),e.writeBool(i.frameMbsOnlyFlag),i.frameMbsOnlyFlag||e.writeBool(i.mbAdaptiveFrameFieldFlag),e.writeBool(i.direct8x8InferenceFlag),e.writeBool(i.frameCroppingFlag),i.frameCroppingFlag&&(e.writeExponentialGolombCode(i.frameCropLeftOffset),e.writeExponentialGolombCode(i.frameCropRightOffset),e.writeExponentialGolombCode(i.frameCropTopOffset),e.writeExponentialGolombCode(i.frameCropBottomOffset)),e.writeBool(void 0!==i.vui),void 0!==i.vui&&function(t,i){i.writeBool(t.aspectRatioInfoPresentFlag),t.aspectRatioInfoPresentFlag&&(i.writeByte(t.aspectRatioIdc),t.aspectRatioIdc===Oj&&(i.writeUInt(t.sarWidth,16),i.writeUInt(t.sarHeight,16)));i.writeBool(t.overscanInfoPresentFlag),t.overscanInfoPresentFlag&&i.writeBool(t.overscanAppropriateFlag);i.writeBool(t.videoSignalTypePresentFlag),t.videoSignalTypePresentFlag&&(i.writeUInt(t.videoFormat,3),i.writeBool(t.videoFullRangeFlag),i.writeBool(t.colourDescriptionPresentFlag),t.colourDescriptionPresentFlag&&(i.writeByte(t.colourPrimaries),i.writeByte(t.transferCharacteristics),i.writeByte(t.matrixCoefficients)));i.writeBool(t.chromaLocInfoPresentFlag),t.chromaLocInfoPresentFlag&&(i.writeExponentialGolombCode(t.chromaSampleLocTypeTopField),i.writeExponentialGolombCode(t.chromaSampleLocTypeBottomField));i.writeBool(t.timingInfoPresentFlag),t.timingInfoPresentFlag&&(i.writeUInt(t.numUnitsInTick,32),i.writeUInt(t.timeScale,32),i.writeBool(t.fixedFrameRateFlag));var e=void 0!==t.nalHrdParameters;i.writeBool(e),e&&fQ(t.nalHrdParameters,0,i);var s=void 0!==t.vclHrdParameters;i.writeBool(s),s&&fQ(t.vclHrdParameters,0,i);(e||s)&&i.writeBool(t.lowDelayHrdFlag);i.writeBool(t.picStructPresentFlag),i.writeBool(t.bitstreamRestrictionFlag),t.bitstreamRestrictionFlag&&(i.writeBool(t.motionVectorsOverPicBoundariesFlag),i.writeExponentialGolombCode(t.maxBytesPerPicDenom),i.writeExponentialGolombCode(t.maxBitsPerMbDenom),i.writeExponentialGolombCode(t.log2MaxMvLengthHorizontal),i.writeExponentialGolombCode(t.log2MaxMvLengthVertical),i.writeExponentialGolombCode(t.maxNumReorderFrames),i.writeExponentialGolombCode(t.maxDecFrameBuffering))}(i.vui,e),e.writeTrailingBits(),{header:{refIdc:i.refIdc,type:i.type},parsed:!1,data:e.close()}}function fQ(t,i,e){if([0,5].includes(i)){e.writeExponentialGolombCode(t.cpbCntMinus1),e.writeUInt(t.bitRateScale,4),e.writeUInt(t.cpbSizeScale,4);for(var s=0;s<=t.cpbCntMinus1;s++)e.writeExponentialGolombCode(t.bitRateValueMinus1[s]),e.writeExponentialGolombCode(t.cpbSizeValueMinus1[s]),e.writeBool(t.cbrFlag[s]);e.writeUInt(t.initialCpbRemovalDelayLengthMinus1,5),e.writeUInt(t.cpbRemovalDelayLengthMinus1,5),e.writeUInt(t.dpbOutputDelayLengthMinus1,5),e.writeUInt(t.timeOffsetLength,5)}}r(),r(),r(),r(),r();var vQ=function(){function t(){}return t.prototype.setSps=function(t){this.sps=t},t.prototype.setPps=function(t){this.pps=t},t.prototype.writeNal=function(t){if(Hj(t))return this.setSps(t.header),lQ(t);if(function(t){return t.parsed&&t.header.type===_c.PICTURE_PARAMETER_SET}(t)){if(void 0===this.sps)throw new m("SPS data is missing, even though a PPS NAL was given.");return this.setPps(t.header),function(t,i){var e=t.header,s=new oQ;if(s.writeExponentialGolombCode(e.picParameterSetId),s.writeExponentialGolombCode(e.seqParameterSetId),s.writeBool(e.entropyCodingModeFlag),s.writeBool(e.bottomFieldPicOrderInFramePresentFlag),s.writeExponentialGolombCode(e.numSliceGroupsMinus1),e.numSliceGroupsMinus1>0)if(s.writeExponentialGolombCode(e.sliceGroupMapType),0===e.sliceGroupMapType)for(var n=0,r=e.runLengthMinus1;n<r.length;n++){var h=r[n];s.writeExponentialGolombCode(h)}else if(2===e.sliceGroupMapType)for(var o=0;o<e.numSliceGroupsMinus1;o++)s.writeExponentialGolombCode(e.topLeft[o]),s.writeExponentialGolombCode(e.bottomRight[o]);else if([3,4,5].includes(e.sliceGroupMapType))s.writeBool(e.sliceGroupChangeDirectionFlag),s.writeExponentialGolombCode(e.sliceGroupChangeRateMinus1);else if(6===e.sliceGroupMapType){s.writeExponentialGolombCode(e.picSizeInMapUnitsMinus1);for(var a=0,u=e.sliceGroupId;a<u.length;a++){var c=u[a];s.writeUInt(c,Pm(e.numSliceGroupsMinus1+1))}}if(s.writeExponentialGolombCode(e.numRefIdxL0DefaultActiveMinus1),s.writeExponentialGolombCode(e.numRefIdxL1DefaultActiveMinus1),s.writeBool(e.weightedPredFlag),s.writeUInt(e.weightedBipredIdc,2),s.writeSignedExponentialGolombCode(e.picInitQpMinus26),s.writeSignedExponentialGolombCode(e.picInitQsMinus26),s.writeSignedExponentialGolombCode(e.chromaQpIndexOffset),s.writeBool(e.deblockingFilterControlPresentFlag),s.writeBool(e.constrainedIntraPredFlag),s.writeBool(e.redundantPicCntPresentFlag),e.hasMoreRbsp){if(s.writeBool(e.transform8x8ModeFlag),s.writeBool(e.picScalingMatrixPresentFlag),e.picScalingMatrixPresentFlag){var d=6;for(e.transform8x8ModeFlag&&(d+=3!==i.chromaFormatIDC?2:6),o=0;o<d;o++)if(s.writeBool(e.picScalingListPresentFlags[o]),e.picScalingListPresentFlags[o])if(o<6)for(var l=0,f=e.scalingList4x4[o];l<f.length;l++){var v=f[l];s.writeSignedExponentialGolombCode(v)}else for(var _=0,g=e.scalingList8x8[o-6];_<g.length;_++)v=g[_],s.writeSignedExponentialGolombCode(v)}s.writeSignedExponentialGolombCode(e.secondChromaQpIndexOffset)}return s.writeTrailingBits(),{header:{refIdc:e.refIdc,type:e.type},parsed:!1,data:s.close()}}(t,this.sps)}if(function(t){return t.parsed&&(t.header.type===_c.IDR_PICTURE||t.header.type===_c.NON_IDR_PICTURE)}(t)){if(void 0===this.pps)throw new m("PPS data is missing, even though a NON_IDR_PIC NAL was given.");if(void 0===this.sps)throw new m("SPS data is missing, even though a NON_IDR_PIC NAL was given.");return dQ(t,this.sps,this.pps)}return{header:t.header,parsed:!1,data:t.data}},t.prototype.writeNals=function(t){var i=this;return t.map(function(t){return i.writeNal(t)})},t}();function _Q(t){var i=t.header.refIdc<<5&96|31&t.header.type;return Pi.from(new j([i])).concat(t.data)}r(),r(),r();var gQ=function(){function t(){}return t.serializeNal=function(t){return _Q(t).join()},t.serializeAnnexB=function(i){return 0===i.length?new j(0):nQ(i[0])?function(t){for(var i=Pi.from(new j([0,0,0,1])),e=0,s=t;e<s.length;e++){var n=_Q(s[e]);(i=i.concat(n)).pushRange(new j([0,0,1]))}return i}(i).join():t.serializeAnnexB((new vQ).writeNals(i))},t.serializeAvcc=function(i,e){return 0===i.length?new j(0):nQ(i[0])?function(t,i){for(var e=new Pi,s=0,n=t;s<n.length;s++){var r=_Q(n[s]),h=r.length;if(h>=_.pow(2,8*i))throw new m("NAL length size "+i+" is too small, serialized NAL is "+h+"B long.");var o=new Dm;o.writeUInt(h,i),e.pushRange(o.close().join()),e=e.concat(r)}return e}(i,e).join():t.serializeAvcc((new vQ).writeNals(i),e)},t}();r();!function(){function t(){}t.createAvccDecoderConfig=function(t,i){var e=t.header,s=new vQ,n=gQ.serializeNal(s.writeNal(t)),r=gQ.serializeNal(s.writeNal(i)),h=n.length,o=r.length,a=new Dm;return a.writeUInt(1,8),a.writeUInt(e.profileIDC,8),a.writeUInt(this.toNumber(e.constraintFlags),8),a.writeUInt(e.levelIDC,8),a.writeUInt(255,8),a.writeUInt(225,8),a.writeUInt((65280&h)>>8,8),a.writeUInt(255&h,8),a.writeBytes(n),a.writeUInt(1,8),a.writeUInt((65280&o)>>8,8),a.writeUInt(255&o,8),a.writeBytes(r),a.close().join()},t.createCodecInformation=function(t){var i=this.toHex(t.header.profileIDC),e=this.toHex(this.toNumber(function(){for(var t=0,i=0,e=arguments.length;i<e;i++)t+=arguments[i].length;var s=Array(t),n=0;for(i=0;i<e;i++)for(var r=arguments[i],h=0,o=r.length;h<o;h++,n++)s[n]=r[h];return s}(t.header.constraintFlags,[!1,!1])));return"avc1."+i+e+this.toHex(t.header.levelIDC)},t.toNumber=function(t){return t.reduce(function(t,i){return 2*t+(i?1:0)},0)},t.toHex=function(t){var i=Number(t).toString(16);return i.length%2!=0?"0"+i:i}}();r();var pQ=class extends Pj{transform(t){this.qCt.push(t),t.Km===ui.WR&&this.zCt(this.qCt.splice(0),Lj.FRAMES)}zCt(t,i){const e={jD:this.Jb,lQ:this.IQ},s=fm(t.map(t=>ye(t.lk.lk))),n=hh(t,mQ),r=Hn.PD(n.lk.lk)[0],h={Gk:this.qat,Py:e,yut:s,Km:i,ct:this.Nd(r)/this.Jb,Qvt:Ls(this.GCt(r),this.Jb)};this.NCt(h)}Nd(t){const i=t.Z[0];if(!i||0===i.QB.length)return 0;var e;const s=null!=(e=i.yD.FB)?e:0;return $l(i.QB[0].iM,t=>{var i;return null!=(i=t.ct)?i:s})}GCt(t){var i,e;return null!=(e=null==(i=t.Z[0].KB)?void 0:i.KB)?e:yo.UZERO}constructor(t,i){super(),this.IQ=void 0,this.qat=void 0,this.Jb=void 0,this.qCt=[],this.IQ=t,this.qat=this.IQ.match(/video/)?li.Mk:li.Bk,this.Jb=i}};function mQ(t){return t.Km===ui.NR}var wQ=class extends pQ{zCt(t,i){let e=t;i===Lj.FRAMES&&(e=yQ(e)),super.zCt(e,i)}};function yQ(t){const i=hh(t,t=>t.Km===ui.NR),e=function(t){const i=ye(t.lk.lk),e=hQ.extractAvcc(yi(i,t.lk.$R.ac),4),s=[];for(const t of e){if(t.header.type===_c.SEQUENCE_PARAMETER_SET){const i=(new Zj).parseNal(t);if(Hj(i)){i.header.maxNumRefFrames=2**(i.header.log2MaxFrameNumMinus4+4),s.push((new vQ).writeNal(i));continue}}s.push(t)}const n=gQ.serializeAvcc(s,32),r=new DataView(new ArrayBuffer(8+n.byteLength)),h=new oi;return kl(r,h,n.byteLength+8),Yp(r,h,"mdat"),Ar(r,h,n),ha.pD(dh(r),new oi)}(hh(t,t=>t.Km===ui.WR)),s=function(t,i){const e=Ny(ye(t.lk.lk)),s=hh(e.boxes,t=>t.boxType===ui.LR),n=hh(s.boxes,t=>t.boxType===ui.HR);if(n)throw new m("HESP DRM streams are unsupported on Windows Chrome < 100");const r=hh(s.boxes,t=>t.boxType===ui.FR),h=r.samples[0];return h.size=i.lk.lk.byteLength-i.lk.$R.ac,r.samples=[h],ha.pD(dh(e.serialize().join()),new oi)}(i,e);return t.map(t=>t.Km===ui.NR?s:t.Km===ui.WR?e:t)}var bQ=class extends Ne{get qot(){return this.XCt}Kct(t){return t+1}get jCt(){return!1}get QCt(){return this.KCt}get yCt(){return void 0!==this.bCt}get ACt(){return this.bCt?this.bCt.Yy:Promise.resolve()}Oy(t){this.KCt=t,this.YCt=void 0,this.JCt=void 0}ZCt(){return void 0!==this.YCt}async $Ct(){if(this.yCt)throw new m("Concurrent downloads are not supported.");try{this.bCt=new Ga;let t;if("now"===this.KCt)t=zd.Pm(this.XCt.tRt("now"),this.XCt.iRt);else{const i=this.KCt,e=0===i?1:this.XCt.eRt(i);t=zd.Pm(this.XCt.tRt(e),this.XCt.iRt)}const i=Mj(t,Bi.NT,he.Ek,this.qat,void 0,3e3,1e3,this.sRt.Yg),e=await this.nRt.vk(i),s=await e.qT(this.sRt.Yg),n=function(t){const i=ha.lD(new yu(dh(t),new oi)),e=hh(i,t=>t.Km===ui.XR||t.Km===ui.NR);if(void 0===e)return{rRt:t,$D:void 0};const s=yi(t,0,e.ac),n=yi(t,e.ac);return{rRt:s,$D:0===n.byteLength?void 0:n}}(new j(s)),r=n.rRt;let h=n.$D;const o=Hn.PD(dh(r));this.Jb=function(t){const i=hh(t,t=>t.Km===ui.HC);return i.Z[0].$D.yD.jD}(o);const a=function(t){const i=t.filter(t=>t.Km===ui.zR),e=i.map(t=>Ij(t)),s=hh(e,t=>(null==t?void 0:t.Km)===wh.BCt);if(!s)throw new m("No init data in init response");return s}(o);let u;if(this.YCt=a.index,this.JCt=a.offset,h){if(await this.hRt()){let t=ha.lD(new yu(dh(h),new oi));t=yQ(t),h=fm(t.map(t=>ye(t.lk.lk)))}u=function(t,i,e){var s;const n=hh(t,t=>t.Km===ui.NR);var r;const h=Ls(null!=(r=null==(s=n.Z[0].KB)?void 0:s.KB)?r:yo.UZERO,e),o=n.Z[0];var a;const u=null!=(a=o.yD.FB)?a:0,c=o.QB[0],d=$l(c.iM,t=>{var i;return null!=(i=t.ct)?i:u})/e;return{Get:h,ct:d,EU:i}}(Hn.PD(dh(h)),-this.qot.SCt,this.Jb)}return{initialization:r,data:h,metadata:u}}finally{const t=this.bCt;this.bCt=void 0,null==t||t.Qy()}}oRt(){if(this.yCt)throw new m("Concurrent downloads are not supported.");this.bCt=new Ga;const t=void 0!==this.JCt?yo.fromNumber(this.JCt):void 0;return iA(this.aRt(this.YCt,t,this.sRt.Yg)).pipeThrough(new Yb(new TQ(this.sRt.Yg)))}async aRt(t,i,e){const s=this.uRt(t,i,e),n=await this.nRt.vk(s),r=await this.hRt();return n.zT().pipeThrough(new Yb(new Rj)).pipeThrough(new Yb(this.cRt)).pipeThrough(new Yb(r?new wQ(this.qot.lQ,this.Jb):new pQ(this.qot.lQ,this.Jb)))}uRt(t,i,e){const s=this.XCt.dRt(t),n=void 0!==i?{start:i,end:void 0}:void 0;return Mj(zd.Pm(s,this.XCt.iRt),Bi.MT,he.yk,this.qat,n,25e3,1e3,e)}TCt(){this.YCt=void 0,this.JCt=void 0}kCt(){void 0!==this.YCt&&(this.YCt=this.Kct(this.YCt)),this.JCt=void 0;const t=this.bCt;this.bCt=void 0,null==t||t.Qy()}cancelDownload(){var t;this.sRt.Zg(),this.sRt=new Zc,this.bCt=null!=(t=this.bCt)?t:new Ga,this.TCt();const i=this.bCt;this.bCt=void 0,null==i||i.Qy()}async zg(){this.Vo(),this.cRt.zg(),this.sRt.Zg(),await this.ACt,this.YCt=void 0,this.JCt=void 0}constructor(t,i,e){super(),this.XCt=void 0,this.nRt=void 0,this.aV=void 0,this.WCt=void 0,this.qat=void 0,this.cRt=void 0,this.KCt="now",this.YCt=void 0,this.JCt=void 0,this.Jb=void 0,this.sRt=new Zc,this.bCt=void 0,this.XCt=t,this.WCt=new kj(e),this.cRt=new Cj,this.cRt.VCt.wn(Ej.DCt,this.Rs),this.aV=i,this.qat=function(t){switch(t){case li.Bk:return $a.Bk;case li.Mk:return $a.Mk;default:return $a.yk}}(t.Km),this.nRt=new Bj(this.aV,this.WCt)}},AQ=class extends bQ{hRt(){return Promise.resolve(!1)}},SQ=class extends bQ{async hRt(){if(zd.Zs.Tp)return!1;if(void 0===this.lRt){const t=this.XCt;this.lRt=this.PL.V9({Km:O.SV,W9:{GT:t.lQ,z9:t.IW,G9:t.Olt,Ti:t.Ti,Mi:t.Mi}}).then(t=>t.H9&&!0!==t.K9)}return await this.lRt}constructor(t,i,e,s){super(t,i,e),this.PL=void 0,this.lRt=void 0,this.PL=s}};var TQ=class{start(t){this.iZ=t,this.Jg.Xg(this.fRt)}flush(){this.Jg.jg(this.fRt)}constructor(t){this.iZ=void 0,this.Jg=void 0,this.fRt=()=>{this.iZ.error(new Qc)},this.Jg=t}};function _n(t){var i;return t.value/(null!=(i=t.scale)?i:1)}r(),r(),r(),r(),r();var kQ="{initId}",EQ=/{initId(?::0(?:\d+)d)?}/,xQ=/{segmentId(?::0(?:\d+)d)?}/,PQ=class{get o(){return this.aS}get IW(){return this._W}get wyt(){return this.vRt}get bct(){return this.Dbt}get _Rt(){return this.gRt}get pRt(){return this.mRt}get iRt(){return zd.Pm(this.wRt,this.yRt.iRt)}get Rrt(){return this.bRt}get Th(){return this.bO}get ARt(){return this.SRt}get TRt(){return this.kRt}get SCt(){return this.ERt}get xRt(){return this.Sbt}er(t){this.gRt=t.activeSegment,this.mRt=t.activeSequenceNumber,this.Dbt=t.segments}constructor(t,i,e){var s,n,r,h;this.WO=void 0,this.PRt=void 0,this.aS=void 0,this._W=void 0,this.vRt=void 0,this.wRt=void 0,this.bRt=void 0,this.SRt=void 0,this.kRt=void 0,this.bO=void 0,this.ERt=void 0,this.Sbt=void 0,this.gRt=void 0,this.mRt=void 0,this.Dbt=[],this.WO=t,this.PRt=e,this.aS=t.id,this._W=t.bandwidth,this.vRt=t.averageBandwidth,this.wRt=null!=(s=t.baseUrl)?s:"",this.bRt=null!=(n=t.codecs)?n:i.codecs,this.SRt=null!=(r=t.continuationPattern)?r:i.continuationPattern,this.kRt=null!=(h=t.initializationPattern)?h:i.initializationPattern,this.bO=t.label,this.ERt=t.mediaTimeOffset?_n(t.mediaTimeOffset):0,this.Sbt=t.segmentDuration?_n(t.segmentDuration):0,this.er(t)}},IQ=class extends PQ{get Km(){return li.Bk}get yRt(){return this.PRt}get X9(){return this.IRt}get Olt(){return this.CRt}get FN(){return this.Mb}get lQ(){return'audio/mp4; codecs="'+this.Rrt+'"'}constructor(t,i,e){var s,n,r,h;super(t,i,e),this.IRt=void 0,this.CRt=void 0,this.Mb=void 0,this.IRt=null!=(s=t.channels)?s:1,this.CRt=null!=(r=null!=(n=t.frameRate)?n:i.frameRate)?r:1024,this.Mb=null!=(h=t.sampleRate)?h:i.sampleRate}},CQ=class extends PQ{get Km(){return li.Mk}get yRt(){return this.PRt}get RRt(){return this.Up}get Olt(){return this.CRt}get lQ(){return'video/mp4; codecs="'+this.Rrt+'"'}constructor(t,i,e){var s;super(t,i,e),this.Up=void 0,this.CRt=void 0,this.Up=t.resolution,this.CRt=_n(null!=(s=t.frameRate)?s:i.frameRate)}};function RQ(t,i){const e=String(i);if(t===kQ||"now"===i)return e;const s=x(t.substring(9,t.lastIndexOf("d")));return Wa(e,s,"0")}function DQ(t,i){const e=String(i);if(t===kQ)return e;const s=x(t.substring(12,t.lastIndexOf("d")));return Wa(e,s,"0")}var NQ=class{get ont(){return this.DRt}get o(){return this.aS}get NRt(){return this.BRt}get iRt(){return zd.Pm(this.wRt,this.ont.iRt)}get Th(){return this.bO}get SCt(){return this.ERt}get MRt(){return this.LRt}er(t){for(const i of this.BI){const e=hh(t.tracks,t=>i.o===t.id);e&&i.er(e)}}constructor(t,i,e){var s;this.PRt=void 0,this.BI=void 0,this.DRt=void 0,this.aS=void 0,this.BRt=void 0,this.wRt=void 0,this.bO=void 0,this.ERt=void 0,this.LRt=void 0,this.PRt=t,this.BI=e,this.DRt=i,this.aS=t.id,this.BRt=t.alignId,this.wRt=null!=(s=t.baseUrl)?s:"",this.bO=t.label,this.ERt=t.mediaTimeOffset?_n(t.mediaTimeOffset):0,this.LRt=t.protection,this.er(t)}},BQ=class extends NQ{get yRt(){return this.PRt}get Z(){return this.BI}get bs(){return this.$b}get X9(){return this.IRt}er(t){var i,e;super.er(t),this.$b=t.language,this.IRt=null!=(i=t.channels)?i:1,this.IQ=null!=(e=t.mimeType)?e:"audio/mp4"}constructor(t,i){const e=[];super(t,i,e),this.$b=void 0,this.IRt=void 0,this.IQ=void 0;for(const i of t.tracks)e.push(new IQ(i,t,this))}},MQ=class extends NQ{get yRt(){return this.PRt}get Z(){return this.BI}get ORt(){return this.PRt.captions}er(t){var i;super.er(t),this.IQ=null!=(i=t.mimeType)?i:"video/mp4"}constructor(t,i){const e=[];super(t,i,e),this.IQ=void 0;for(const i of t.tracks)e.push(new CQ(i,t,this))}},LQ=class{get o(){return this.aS}get iRt(){return zd.Pm(this.wRt,this.URt.FRt)}get VRt(){return this.HRt}get zx(){return this.xz}get fQ(){return this.Zf}get q9(){return this.WRt}get W9(){return this.qRt}er(t){var i;this.HRt=t.timeBounds,this.Zf=null!=(i=t.events)?i:[],this.xz=t.currentTime?_n(t.currentTime):void 0}constructor(t,i){var e,s,n;this.WRt=[],this.qRt=[],this.URt=void 0,this.aS=void 0,this.wRt=void 0,this.HRt=void 0,this.xz=void 0,this.Zf=void 0,this.URt=t,this.aS=i.id,this.wRt=null!=(e=i.baseUrl)?e:"";for(const t of null!=(s=i.audio)?s:[])this.WRt.push(new BQ(t,this));for(const t of null!=(n=i.video)?n:[])this.qRt.push(new MQ(t,this));this.er(i)}},OQ=class{get cC(){return this.URt}get zRt(){return this.GRt}get XRt(){return this.jRt}get QRt(){return this.KRt}get YRt(){return this.JRt}get ZRt(){return this.$Rt}get P0(){return this.Tb}get tDt(){return this.iDt}get FRt(){var t;return zd.Pm(null!=(t=this.eDt)?t:"",this.sDt)}get nDt(){return this.rDt}er(t){var i;this.GRt=_n(t.availabilityDuration),this.jRt=t.creationDate,this.KRt=t.fallbackPollRate,this.JRt=t.manifestVersion,this.Tb=t.streamType,this.iDt=t.activePresentation,this.eDt=t.contentBaseUrl,this.rDt=null==(i=t.timeSource)?void 0:i.url,this.URt=t;for(const i of t.presentations){const t=hh(this.$Rt,t=>t.o===i.id);t?t.er(i):this.$Rt.push(new LQ(this,i))}this.$Rt=this.$Rt.filter(i=>t.presentations.some(t=>t.id===i.o))}constructor(t,i){this.sDt=void 0,this.URt=void 0,this.GRt=void 0,this.jRt=void 0,this.KRt=void 0,this.JRt=void 0,this.$Rt=[],this.Tb=void 0,this.iDt=void 0,this.eDt=void 0,this.rDt=void 0,this.sDt=t,this.URt=i,this.er(i)}};r(),r();var FQ=0,UQ=class extends Ne{get xst(){return!0}get wyt(){return this.hDt.wyt}get IW(){return this.hDt.IW}get Rrt(){return this.hDt.Rrt}get o(){return this.hDt.o}get Th(){var t;return null!=(t=this.hDt.Th)?t:""}get JI(){return this.yO}get Syt(){return this.hDt.iRt}get yyt(){}get lQ(){return this.hDt.lQ}get SCt(){return this.hDt.SCt}get iRt(){return this.hDt.iRt}get Km(){return this.hDt.Km}eRt(t){const i=(t-this.hDt.yRt.ont.zx)*this.framesPerSecond();return _.round(this.hDt.pRt+i)}oDt(t){return t+1}tRt(t){var i;let e,s=this.hDt.TRt;for(;e=null==(i=s.match(EQ))?void 0:i.pop();)s=s.split(e).join(RQ(e,t));return s+("now"===t?"?uuid="+un():"")}dRt(t){var i;let e,s=this.hDt.ARt;for(;e=null==(i=s.match(xQ))?void 0:i.pop();)s=s.split(e).join(DQ(e,t));return s}ZU(){}JU(){}constructor(t){super(),this.hDt=void 0,this.yO=FQ++,this.hDt=t}},VQ=class extends UQ{get aDt(){return this.hDt}get mwt(){return this.hDt.FN}get Ht(){return this.WO}framesPerSecond(){return this.hDt.FN/this.hDt.Olt}get Ca(){return this.hu||(this.hu=Oq(this)),this.hu}constructor(t,i){super(t),this.WO=void 0,this.hu=void 0,this.WO=i}},HQ=class extends UQ{get aDt(){return this.hDt}get byt(){return 0}get Olt(){return this.hDt.Olt}get Mi(){return this.hDt.RRt.height}get Ti(){return this.hDt.RRt.width}get RRt(){return this.hDt.RRt}get Ht(){return this.WO}framesPerSecond(){return this.hDt.Olt}get Ca(){return this.hu||(this.hu=Lq(this)),this.hu}constructor(t,i){super(t),this.WO=void 0,this.hu=void 0,this.WO=i}};r();var Pn=function(t){return t.uDt="alternative",t.cDt="main",t.dDt="commentary",t.lDt="",t.qU="descriptions",t.fDt="main-desc",t.vDt="translation",t}({}),Ja=function(t){return t.uDt="alternative",t.cDt="main",t.dDt="commentary",t.lDt="",t.WU="captions",t.XI="sign",t.HU="subtitles",t}({}),WQ=0,qQ=class extends Ne{get YI(){return this._Dt()}get Rt(){return this.We}set Rt(t){this.Rt!==t&&(this.We=t,t&&this.gDt(),this.mDt.pDt(),this.So(new Rh(this)))}get Ca(){return this.hu||(this.hu=cs(this)),this.hu}get plt(){return this.wDt}get o(){return this.PRt.o}get JI(){return this.yO}get Th(){var t;return null!=(t=this.PRt.Th)?t:""}get Qk(){return this.Rt?"enabled":"disabled"}set Qk(t){"enabled"===t?this.Rt=!0:"disabled"===t&&(this.Rt=!1)}get $I(){return this._O}get tC(){return this.Ict}set tC(t){this.Ict=t,this.mDt.pDt(),this.So(new qa(t,this))}SO(t){this.Rt=t}yDt(t){for(const i of this._O.NI)i===t&&this.So(new DW(i))}constructor(t,i,e){super(),this.PRt=void 0,this.mDt=void 0,this._O=new iE,this.wDt=void 0,this.yO=WQ++,this.We=!1,this.Ict=void 0,this.hu=void 0,this.PRt=i,this.mDt=e,this.wDt=new nG(t,[]);for(const t of i.Z)this._O.gO(this.createQuality(t))}},zQ=class extends qQ{get Km(){return li.Bk}get Lt(){return Pn.cDt}get bs(){return this.PRt.bs}get yRt(){return this.PRt}gDt(){this.mDt.bDt(this)}_Dt(){const t=this.mDt.ADt;return(null==t?void 0:t.Ht)===this?t:void 0}createQuality(t){return new VQ(t,this)}constructor(t,i){super(at.Bk,t,i)}},GQ=class extends qQ{get Km(){return li.Mk}get Lt(){return Ja.cDt}get bs(){return""}get yRt(){return this.PRt}get ORt(){return this.PRt.ORt}gDt(){this.mDt.SDt(this)}_Dt(){const t=this.mDt.TDt;return(null==t?void 0:t.Ht)===this?t:void 0}createQuality(t){return new HQ(t,this)}constructor(t,i){super(at.Mk,t,i)}};function XQ(t,i,e,s){if(!t)return;const n=function(t,i,e){const s=[];for(const t of i){var n;const i=null!=(n=t.mimeType)?n:"audio/mp4";var r;const e=null!=(r=t.codecs)?r:t.tracks.map(t=>t.codecs)[0];s.push(i+'; codecs="'+e+'"')}return jQ(t,i,s,[],e)}(t,i?[i]:[],!s),r=function(t,i,e){const s=[];for(const t of i){var n;const i=null!=(n=t.mimeType)?n:"video/mp4";var r;const e=null!=(r=t.codecs)?r:t.tracks.map(t=>t.codecs)[0];s.push(i+'; codecs="'+e+'"')}return jQ(t,i,[],s,e)}(t,e?[e]:[],!s),h=DG(n,r);return t.preferredKeySystems&&(null==h?void 0:h.qpt)&&(h.qpt=HG(h.qpt,t.preferredKeySystems)),h}function jQ(t,i,e,s,n){const r=i.map(t=>t.protection).filter(it);if(!r.length)return;const h=r[0].type,o=hs(r,t=>t.systems),a=hs(o,t=>function(t,i){void 0===i&&(i=!0);const e=[],s=i?function(t){return ep.filter(i=>i.Zm===t.toLowerCase())}(t.schemeId):function(t){return ip.filter(i=>i.Zm===t.toLowerCase())}(t.schemeId);for(const i of s)e.push({GH:QQ(t)?t.uri:void 0,xS:i,FW:void 0,OW:t.pssh?[Cn(t.pssh).buffer]:[],UW:[]});return e}(t,n));return{lH:t,zpt:{mTt:h},qpt:a,wTt:e,yTt:s}}function QQ(t){return t.schemeId===Rg.jm&&void 0!==t.keyFormat&&void 0!==t.keyFormatVersions}r(),r(),r();var KQ;function YQ(t){const i=t.zx,e=t.Fx.iL(i);return e?e.An(0)-i:0}KQ="Android"===zd.Rm.Dm?200:300;var JQ=zd.Zs.Ap?1:.5,ZQ=class{Tn(){1!==this.Ra&&(this.Ra=1,this.kDt=zd.fm(()=>{this.EDt()},KQ),this.xDt.$It(this.PDt),this.PL.lP?this.IDt.wn(Jr.PM,this.CDt):this.CDt())}KP(){0!==this.Ra&&(this.Ra=0,void 0!==this.kDt&&zd.vm(this.kDt),this.xDt.iCt(this.PDt),this.IDt.mn(Jr.xM,this.RDt),this.IDt.mn(Jr.PM,this.CDt),this.DDt=void 0,this.fL())}get NDt(){return $Q(this.BDt.ADt,this.BDt.TDt)}async EDt(){await this.MDt,this.MDt=this.LDt(),await this.MDt}ODt(t,i){var e,s;const n=this.FDt(t,i),r=this.UDt.WY;if(r.type===xa.PERFORMANCE)return n[n.length-1];if(r.type===xa.QUALITY)return n[0];const h=(null==(e=r.metadata)?void 0:e.bitrate)?1.3*(null==(s=r.metadata)?void 0:s.bitrate):this.xDt.IW;for(const t of n){if(t.VDt<=h)return t}return n[n.length-1]}async LDt(){var t,i;const e=null==(t=this.BDt.ADt)?void 0:t.Ht,s=null==(i=this.BDt.TDt)?void 0:i.Ht,n=this.FDt(e,s);if(0===n.length)return void 0;const r=this.maybeSwitchToTargetQuality(n);if(r)return void await this.HDt(r);const h=this.maybeGetUpSwitch(n);h&&await this.HDt(h)}maybeSwitchToTargetQuality(t){const i=this.NDt;if(t.some(t=>tK(t,i)))return;const e=this.xDt.IW;for(const i of t){if(i.VDt<=e)return i}return t[t.length-1]}maybeGetUpSwitch(t){var i,e;const s=this.xDt.IW;var n;var r;const h=1.3*((null!=(n=null==(i=this.BDt.ADt)?void 0:i.IW)?n:0)+(null!=(r=null==(e=this.BDt.TDt)?void 0:e.IW)?r:0));let o;for(const i of t)if(i.VDt<s&&i.VDt>h){o={WDt:i,wft:zd.Mg()};break}if(!this.DDt||!tK(this.DDt.WDt,null==o?void 0:o.WDt))return void(this.DDt=o);const a=zd.Mg()-this.DDt.wft,u=this.DDt.WDt.VDt,c=this.qDt.length>=3&&this.qDt.every(t=>t>u);if(a>1e3&&c){if(this.PL.ML.BL||zd.Zs.pp){const t=2*this.xDt.RW;if(!(YQ(this.PL)>t))return}else{const t=_.max(2*this.xDt.RW+JQ,this.JW.aL.minimumOffset);if(!(YQ(this.PL)>t))return void(this.zDt&&this.zDt.minimumOffset===t||(this.fL(),this.zDt={minimumOffset:t},this.JW.cL(this.zDt)))}return this.DDt.WDt}}async HDt(t,i){void 0===i&&(i=!1),this.DDt=void 0,this.fL();const e=this.NDt;if(e.GDt===t.GDt&&e.XDt===t.XDt)return;const s=t.GDt,n=t.XDt;e.XDt&&n&&e.XDt.IW>n.IW&&i&&(this.xDt.JIt(t.VDt),this.qDt=[]),await this.BDt.jDt(n,s)}fL(){this.zDt&&(this.JW.fL(this.zDt),this.zDt=void 0)}FDt(t,i){let e=[],s=[];var n;t&&(e=(null==(n=t.tC)?void 0:n.length)?t.tC:t.$I.NI);if(i){var r;const t=(null==(r=i.tC)?void 0:r.length)?i.tC:i.$I.NI,e=t.slice().sort((t,i)=>t.IW-i.IW),n=this.QDt(e);0===n.length&&t.length>0&&n.push($i(t,t=>t.IW)),s=n}const h=[],o=e.length>0?e:[void 0],a=s.length>0?s:[void 0];for(const t of o)for(const i of a)h.push($Q(t,i));return function(t){return t.sort((t,i)=>i.VDt-t.VDt)}(h)}QDt(t){const i=hh(t,t=>t.Mi>=this.PL.Mi&&t.Ti>=this.PL.Ti);return i?t.filter(t=>t.Mi<=i.Mi&&t.Ti<=i.Ti):t.slice()}zg(){this.DDt=void 0,this.IDt.hr(),this.fL()}constructor(t,i,e,s,n,r){this.PL=void 0,this.JW=void 0,this.BDt=void 0,this.KDt=void 0,this.xDt=void 0,this.UDt=void 0,this.IDt=void 0,this.Ra=void 0,this.MDt=void 0,this.kDt=void 0,this.DDt=void 0,this.qDt=void 0,this.zDt=void 0,this.RDt=void 0,this.CDt=void 0,this.PDt=void 0,this.PL=t,this.JW=i,this.BDt=e,this.KDt=s,this.xDt=n,this.UDt=r,this.Ra=0,this.MDt=Promise.resolve(),this.qDt=[],this.zDt=void 0,this.RDt=()=>{var t,i;if(this.KDt.xP)return;const e=null==(t=this.BDt.ADt)?void 0:t.Ht,s=null==(i=this.BDt.TDt)?void 0:i.Ht,n=$i(this.FDt(e,s),t=>t.VDt);n&&(Wr(this.HDt(n,!0)),this.PL.ML.BL&&this.KDt.dC())},this.CDt=()=>{this.IDt.wn(Jr.xM,this.RDt),this.IDt.mn(Jr.PM,this.CDt)},this.PDt=()=>{if(this.qDt.unshift(this.xDt.IW),this.qDt=this.qDt.slice(0,3),this.DDt){const t=this.DDt.WDt.VDt;this.xDt.IW<t&&(this.DDt=void 0,this.fL())}},this.IDt=new _s(this.PL)}};function $Q(t,i){var e;var s;return{GDt:t,XDt:i,VDt:1.3*((null!=(e=null==t?void 0:t.IW)?e:0)+(null!=(s=null==i?void 0:i.IW)?s:0))}}function tK(t,i){var e,s,n,r;return void 0===t||void 0===i?t===i:(null==(e=t.GDt)?void 0:e.o)===(null==(s=i.GDt)?void 0:s.o)&&(null==(n=t.XDt)?void 0:n.o)===(null==(r=i.XDt)?void 0:r.o)&&t.VDt===i.VDt}r();var iK=class t{static async create(i,e,s){const n=await eK(i,e,s);return new t(n,i,e)}get ebt(){return(this.YDt.serverTimeMs+(zd.Mg()-this.YDt.localTimeMs))/1e3}get JDt(){return(this.YDt.localTimeMs-this.YDt.serverTimeMs)/1e3}async YPt(t,i,e){for(;!e.Hg;){await Ze(6e5,e);try{this.YDt=await eK(t,i,e)}catch(t){sa(t)}}}zg(){this.hT.Zg()}constructor(t,i,e){this.YDt=void 0,this.hT=new Zc,this.YDt=t,this.YPt(i,e,this.hT.Yg).catch(gs)}};async function eK(t,i,e){let[s,n,r]=await sK(t,i,e);return n>20&&([s,n,r]=await sK(t,i,e)),{localTimeMs:s,serverTimeMs:r-n/2}}async function sK(t,i,e){const s=zd.Mg(),n=await i.vk({Hk:Qe.GET,Yu:t,Yg:e}),r=zd.Mg()-s,h=await n.HT(e);return[s,r,1e3*Number(h)]}var nK=class extends gp{constructor(){super("seek")}},rK=function(t){return t.Jz="seek",t}({}),hK=[d.uo,Jr.AI,d.py],oK=class extends Ne{get cC(){return this.URt}get Fx(){return this.ZDt&&this.$Dt?this.ZDt.Fx.Mn(this.$Dt.Fx):this.ZDt?this.ZDt.Fx:this.$Dt?this.$Dt.Fx:Uo.rL()}get ADt(){return this.tNt}get TDt(){return this.iNt}get ht(){return this.tO}get rt(){return this.sO}get eNt(){return this.sNt.Yy}get W(){return this.nNt.Yy}get kP(){return this.URt?function(t,i,e){var s;const n=null==(s=t.ZRt[0])?void 0:s.zx,r=t.zRt;if(void 0===n||void 0===r)return e>0&&e<Gl?new Uo([0,e],[!0,!0]):Uo.rL();let h=i.lCt;if(!h){const i=oq(t.XRt).getTime()/1e3;h=n+(Date.now()/1e3-i)}return new Uo([h-r,h],[!0,!0])}(this.URt,this.rNt,this.PL.ct):Uo.rL()}async hNt(){this.ZDt&&await this.ZDt.pS(0,1/0),this.$Dt&&await this.$Dt.pS(0,1/0)}Un(){if(!this.Ac.src)throw new as(me.SOURCE_INVALID,"No src property found in given source.");this.Ypt||(this.Ypt=this.vE(this.uV.Yg).catch(this.u8))}async vE(t){this.So(new ke);const i=this.Ac.src,e=await this.oNt._It(i,t);this.URt=new OQ(i,e),this.URt.nDt&&(this.aNt=await iK.create(this.URt.nDt,this.aV,t)),this.uNt();const s=hf(this.URt.ZRt,-1);this.createTracksForPresentation(s),this.sNt.Qy(),this.pDt()}bDt(t){for(const i of this.tO.NI)i.SO(i===t)}SDt(t){for(const i of this.sO.NI)i.SO(i===t)}pDt(){const t=hh(this.tO.NI,t=>t.Rt),i=hh(this.sO.NI,t=>t.Rt),e=this.Mz.ODt(t,i);Wr(this.jDt(e.XDt,e.GDt))}uNt(){if(!this.URt||"live"!==this.URt.P0||!this.aNt)return;const t=this.URt.ZRt.filter(t=>t.o===this.URt.tDt)[0].zx,i=this.aNt.JDt+new Date(this.URt.XRt).getTime()/1e3;this.rNt.hCt(i,t)}createTracksForPresentation(t){var i,e,s,n;for(const i of null!=(s=t.q9)?s:[])this.tO.tt(new zQ(i,this));for(const i of null!=(n=t.W9)?n:[])this.sO.tt(new GQ(i,this));null==(i=this.tO.MI(0))||i.SO(!0),null==(e=this.sO.MI(0))||e.SO(!0)}get hC(){return $i([this.cNt,this.dNt].filter(it),t=>t.theolive)}get oC(){return this.cNt}get aC(){return this.dNt}get lNt(){const t=this.rNt.lCt;if(void 0!==t)return t}Tn(){this.fNt=!0,this.vNt()}KP(){var t;this.fNt=!1,this._Nt().catch(this.u8),"live"===(null==(t=this.cC)?void 0:t.P0)&&(this.gNt(),this.pNt())}gNt(){this.mNt&&this.mNt.cancelDownload()}pNt(){this.wNt&&this.wNt.cancelDownload()}dC(t){this.T9.Zg(),this.T9=new Zc,this.k9=pf(i=>this.yNt(t,this.k9,i),this.T9).catch(this.u8)}async yNt(t,i,e){if(i&&await i,await ua(this.W,e),"live"!==this.URt.P0)throw new m("The current video source does not support Live playback.");if(fr(e),await this._Nt(),fr(e),this.mNt&&(this.mNt.ZCt()||this.mNt.QCt!==(null!=t?t:"now"))){var s;if(this.gNt(),this.ZDt){for(;this.ZDt.yCt;)await ua(this.ZDt.ACt,e);await this.ZDt.pS(0,1/0)}null==(s=this.mNt)||s.Oy(null!=t?t:"now")}if(this.wNt&&(this.wNt.ZCt()||this.wNt.QCt!==(null!=t?t:"now"))){var n;if(this.pNt(),this.$Dt){for(;this.$Dt.yCt;)await ua(this.$Dt.ACt,e);await this.$Dt.pS(0,1/0)}null==(n=this.wNt)||n.Oy(null!=t?t:"now")}this.So(new nK),fr(e),this.k9=void 0,this.vNt()}Oy(t){this.T9.Zg(),this.T9=new Zc,this.k9=pf(i=>this.E9(t,this.k9,i),this.T9).catch(this.u8)}async E9(t,i,e){var s,n;i&&await i,await ua(this.W,e),fr(e),await this._Nt(),fr(e),this.mNt&&(this.mNt.ZCt()||this.mNt.QCt!==t)&&this.gNt(),this.wNt&&(this.wNt.ZCt()||this.wNt.QCt!==t)&&this.pNt(),this.So(new nK),fr(e),null==(s=this.mNt)||s.Oy(t),null==(n=this.wNt)||n.Oy(t),this.k9=void 0,this.vNt()}jDt(t,i){var e,s;return(null==(e=this.mNt)?void 0:e.qot)===i&&(null==(s=this.wNt)?void 0:s.qot)===t?Promise.resolve():(this.bNt.Zg(),this.bNt=new Zc,this.ANt=pf(e=>this.SNt(t,i,this.ANt,e),this.bNt).catch(this.u8),this.ANt)}async SNt(t,i,e,s){var n,r;e&&await e,await ua(this.sNt.Yy,s),fr(s),await this._Nt(),fr(s),await this.TNt(t,i),await this.kNt(t,i),fr(s);for(const i of null!=(r=null==t||null==(n=t.Ht)?void 0:n.ORt)?r:[])this.ENt.$gt({Sit:i.channel,Tit:i.language,Th:i.label});this.ANt=void 0,this.vNt()}async TNt(t,i){var e,s,n;const r=null!=(n=this.lNt)?n:"now";if((null==(e=this.mNt)?void 0:e.qot)!==i){var h;const t=this.mNt&&!this.mNt.ZCt(),e=null==(h=this.mNt)?void 0:h.QCt;if(this.mNt&&(await this.mNt.zg(),this.mNt=void 0),this.ZDt&&await this.ZDt.ACt,i){var o,a;const s=null!=(a=null==(o=this.ZDt)?void 0:o.Fx)?a:Uo.rL(),n=t?e:s.An(s.V-1);this.mNt=new AQ(i,this.aV,this.Ndt),this.mNt.wn(Ej.DCt,t=>this.xNt(at.Bk,t)),this.mNt.Oy(null!=n?n:r)}}if((null==(s=this.wNt)?void 0:s.qot)!==t){var u;const i=this.wNt&&!this.wNt.ZCt(),e=null==(u=this.wNt)?void 0:u.QCt;if(this.wNt&&(await this.wNt.zg(),this.wNt=void 0),this.$Dt&&await this.$Dt.ACt,t){var c,d;const s=null!=(d=null==(c=this.$Dt)?void 0:c.Fx)?d:Uo.rL(),n=i?e:s.An(s.V-1);this.wNt=new SQ(t,this.aV,this.Ndt,this.PL),this.wNt.wn(Ej.DCt,t=>this.xNt(at.Mk,t)),this.wNt.Oy(null!=n?n:r)}}}async kNt(t,i){const e=function(t,i,e,s,n){const r=XQ(t,null==i?void 0:i.Ht.yRt.yRt,null==e?void 0:e.Ht.yRt.yRt,s),h=FG(r),o=[];i&&o.push({GT:i.lQ});e&&o.push({GT:e.lQ});return{Km:O.SV,q4:o,fq:h,t5:n&&!s}}(this.Ac.contentProtection,i,t,this.PL.ML.BL,this.Ac.useManagedMediaSource);if(this.aq&&this.aq.IZ(e)){var s,n;const t=!(null==(s=this.mNt)?void 0:s.ZCt());if(this.ZDt&&t){for(;this.ZDt.yCt;)await this.ZDt.ACt;await this.ZDt.EQ()}const i=!(null==(n=this.wNt)?void 0:n.ZCt());if(this.$Dt&&i){for(var r,h;null==(r=this.$Dt)?void 0:r.yCt;)await this.$Dt.ACt;await(null==(h=this.$Dt)?void 0:h.EQ())}await this.aq.RZ(e)}else{this.gNt(),this.pNt(),this.ZDt&&(await this.ZDt.zg(),this.ZDt=void 0),this.$Dt&&(await this.$Dt.zg(),this.$Dt=void 0),this.PL.G7();try{await this.PL.hr(),this.aq=await this.PL.Un(e),this.nNt.Qy(),this.aq.e4&&this.mNt&&(this.aq.e4.wn(bi.pZ,this.Rs),this.ZDt=new Tj(this.aq.e4,this.PL,i,this.ENt)),this.aq.s4&&this.wNt&&(this.aq.s4.wn(bi.pZ,this.Rs),this.$Dt=new Tj(this.aq.s4,this.PL,t,this.ENt)),"live"===this.URt.P0&&this.aq.F4(1/0)}finally{this.PL.X7()}}}vNt(){!this.fNt||this.k9||this.ANt||this.PNt||this.INt||(this.Mz.Tn(),this.CNt=new Zc,this.wNt&&this.$Dt&&(this.PNt=this.RNt(this.wNt,this.$Dt,this.CNt.Yg).catch(this.u8)),this.mNt&&this.ZDt&&(this.INt=this.RNt(this.mNt,this.ZDt,this.CNt.Yg).catch(this.u8)))}async _Nt(){this.Mz.KP(),this.CNt&&(this.CNt.Zg(),this.CNt=void 0),this.PNt&&(await this.PNt,this.PNt=void 0),this.INt&&(await this.INt,this.INt=void 0)}async RNt(t,i,e){for(await this.W;t.yCt;)await ua(t.ACt,e);for(;i.yCt;)await ua(i.ACt,e);if(!t.ZCt()){const e=zd.Mg()/1e3,s="now"===t.QCt,{initialization:n,data:r,metadata:h}=await t.$Ct(),o=i.Fx;!zd.Zs.wp&&!this.PL.ML.BL&&h&&o.An(o.V-1)>h.Get&&await i.pS(h.Get,1/0),await i.J2(n),r&&await i.Q2(r,h,t.qot);const a=i.Fx.qM(o);s&&a.V>0&&this.rNt.nCt(e,a.An(a.V-1))}for(;!t.jCt;){fr(e);const s=t.oRt();await ua(i.appendStream(s,t),e)}}async zg(){this.uV.Zg(),this.Ypt&&await this.Ypt.catch(gs),this.k9&&(this.T9.Zg(),this.gNt(),this.pNt(),await this.k9.catch(gs)),this.ANt&&(this.bNt.Zg(),this.gNt(),this.pNt(),await this.ANt.catch(gs)),await this._Nt(),this.mNt&&await this.mNt.zg(),this.wNt&&await this.wNt.zg(),this.mNt=void 0,this.wNt=void 0,this.nNt.Zg(),this.sNt.Zg(),this.aq&&(await this.PL.hr(),this.aq=void 0),this.ZDt=void 0,this.$Dt=void 0,this.PL.mn(Jr.PM,this.NL),this.PL.mn(hK,this.updateActiveQualities),this.tO.hr(),this.tNt=void 0,this.sO.hr(),this.iNt=void 0,this.URt=void 0,this.aNt&&(this.aNt.zg(),this.aNt=void 0),this.fNt=!1}constructor(t,i,e,s,n,r,h,o,a,u,c){super(),this.Ac=void 0,this.aV=void 0,this.oNt=void 0,this.PL=void 0,this.rNt=void 0,this.Ndt=void 0,this.ENt=void 0,this.fNt=!1,this.DNt=!1,this.Mz=void 0,this.tO=new Ws,this.sO=new Ws,this.NNt=void 0,this.tNt=void 0,this.iNt=void 0,this.URt=void 0,this.sNt=new Ga,this.aNt=void 0,this.dNt=void 0,this.cNt=void 0,this.JW=void 0,this.aq=void 0,this.Ypt=void 0,this.nNt=new Ga,this.uV=new Zc,this.ANt=void 0,this.bNt=new Zc,this.k9=void 0,this.T9=new Zc,this.mNt=void 0,this.ZDt=void 0,this.INt=void 0,this.wNt=void 0,this.$Dt=void 0,this.PNt=void 0,this.CNt=void 0,this.NL=()=>{this.DNt=!0},this.updateActiveQualities=()=>{var t,i;const e=this.PL.zx,s=null==(t=this.ZDt)?void 0:t.pCt(e),n=null==(i=this.$Dt)?void 0:i.pCt(e);if(this.tNt!==s&&(this.tNt=s,s))for(const t of this.tO.NI)t.yDt(s);if(this.iNt!==n&&(this.iNt=n,n))for(const t of this.sO.NI)t.yDt(n)},this.xNt=(t,i)=>{const e=i.data;if(e.Km===wh.MCt){const{OCt:i,FCt:n,LCt:r,UCt:h}=e;if(this.aNt){const e=this.aNt.ebt,s=this.PL.zx;if(this.DNt&&0!==s){const h={theolive:e-i+r-s,engine:n,distribution:_.max(e-(i+n),0),player:_.min(r-s,this.JW.aL.forceSeekOffset)};t===at.Bk?(this.dNt=h,this.rNt.cCt(this.aNt.JDt+i,r)):(this.cNt=h,this.rNt.aCt(this.aNt.JDt+i,r))}}var s;if(h)null!=this.NNt||(this.NNt=this.PL.sI(us.zU,"timecode","timecode",void 0,!1,nh.DEFAULT,!1,void 0)),this.NNt.nV(new Oh(r,r,h,!1,void 0)),Re(this.NNt,null!=(s=this.PL.Fx.Tn(0))?s:-1)}this.So(i)},this.u8=t=>{Ce(t)||(this.KP(),this.So(new el(new as(me.MEDIA_LOAD_ERROR,t.message))))},this.Ac=t,this.oNt=i,this.PL=e,this.aV=n,this.rNt=r,this.Mz=new ZQ(e,h,this,a,s,c),this.Ndt=o,this.ENt=u,this.JW=h,this.PL.wn(Jr.PM,this.NL),this.PL.wn(hK,this.updateActiveQualities)}};r();var aK=class extends sk{FL(){const t=this.PL.Fx;return 0===t.V?0:t.An(t.V-1)-this.PL.zx}dC(){this.oa.dC()}UL(t,i,e){if(t>e+2){const e=t-i;if(e<=this.lastAmountToSeekForward&&!this.oa.xP)return this.oa.zx+=e,this.lastAmountToSeekForward=0,!0;this.lastAmountToSeekForward=e}else this.lastAmountToSeekForward=0;return!1}vL(){return bj(super.vL())}VL(){return!zd.Zs.pp}constructor(t,i,e){super(t,i,e),this.lastAmountToSeekForward=0}},uK=[d.Jw,d.Qw,d.Nw,d.Kw,d.wy,d.Cw,d.Lw,d.Bw,d.xw,d.Ew],cK=class extends Ne{HI(){this.PL.wn(uK,this.Rs),this.PL.wn(Jr.PM,this.YG),this.PL.wn([d.uo,d.jw],this.BNt),this.PL.wn(hc.ma,this.MNt),this.PL.wn(d.py,this.bd),this.xq.wn(Ii,this.Rs)}UI(){this.PL.mn(uK,this.Rs),this.PL.mn(Jr.PM,this.YG),this.PL.mn([d.uo,d.jw],this.BNt),this.PL.mn(hc.ma,this.MNt),this.PL.mn(d.py,this.bd),this.xq.mn(Ii,this.Rs)}get ht(){return this.tO}get rt(){return this.sO}get cC(){var t,i;return null==(i=this.BDt)||null==(t=i.cC)?void 0:t.cC}get OP(){return this.PL.OP}set OP(t){this.PL.OP=t}get WP(){return!1}set WP(t){}get dq(){return this.lq}YP(){return!1}qP(){return this.PL.Ma}Aa(){return this.PL.Sq}sI(t){return this.PL.Tq(t)}we(){this.PL.we()}be(){return this.PL.be()}$P(){}tI(){}JP(){}ZP(){}get oP(){return this.PL.oP}set oP(t){this.PL.oP=t}get zx(){var t;return null!=(t=this.LNt)?t:this.PL.zx}set zx(t){this.Xx(t)}Xx(t,i){this.T9.Zg(),this.T9=new Zc,this.k9=pf(i=>this.E9(t,i,this.k9),this.T9)}get Vx(){const t=this.ONt();if(t)return new Date(t.getTime()+1e3*this.zx)}set Vx(t){const i=this.ONt();t&&i&&(this.zx=i.getTime()-t.getTime())}ONt(){const t=this.cC;if(!t)return;const i=new Date(t.creationDate).getTime();let e=NaN;for(const i of t.presentations)i.currentTime&&(e=i.currentTime.value/(i.currentTime.scale||1)*1e3);return S(e)?void 0:new Date(i-e)}get bt(){return this.Ac}get vP(){return this.PL.vP}set vP(t){this.PL.vP=t}get ct(){const t=this.PL.ct;return t===Gl?1/0:t}get Qx(){return!1}get Jx(){return this.rq}get lt(){return this.nq}get $x(){return this.FNt}get iP(){}get sP(){return!1}get rP(){return Y({},{rO:0,hO:0,oO:0,aO:0,uO:0,cO:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}},this.PL.hP())}get cP(){return!0}get xP(){return this.Pz}get uq(){}get nt(){return this.Gl}get DP(){return this.PL.DP}get MP(){return this.PL.MP}get Fx(){return this.ykt._s()}get ykt(){return this.BDt?this.BDt.Fx:Uo.rL()}get pP(){return this.PL.pP._s()}get kP(){var t,i;return null!=(i=null==(t=this.BDt)?void 0:t.kP._s())?i:Uo.rL()._s()}get lP(){return this.pst}get uC(){return!0}get VP(){return this.Lz}get lNt(){var t;return null==(t=this.BDt)?void 0:t.lNt}get OL(){if(this.lP)return;if(!this.DNt)return;const t=this.zx,i=this.rNt.fCt(t);if(void 0===i)return;const e=this.ykt;let s=0;if(e.V>0){const i=e.An(e.V-1);s=_.max(i-t,0)}return _.max(i,s)}get hC(){var t;return null==(t=this.BDt)?void 0:t.hC}get oC(){var t;return null==(t=this.BDt)?void 0:t.oC}get aC(){var t;return null==(t=this.BDt)?void 0:t.aC}get AP(){return this.PL.AP}get wP(){return this.UNt}set wP(t){this.UNt=t,this.VNt()}async VNt(){this.UNt!==Dn.pz&&this.BDt&&(this.BDt.Un(),this.UNt!==Dn.HL&&this.UNt!==Dn.PW||(await this.BDt.eNt,"vod"===this.BDt.cC.P0&&this.BDt.Tn()))}async Ta(t,i,e){if(fr(e),await this.hr(),fr(e),!Ms(t))return this.rq=new as(me.SOURCE_INVALID,"HESP source incorrectly configured"),this.nq=ar(this.rq),this.HNt(this.rq),Promise.resolve();const s=t;this.Ac=s,this.FEt=i;const n=new sj(this.aV);this.WNt=this.qNt(t),this.JW=new aK(this,this.PL,this.WNt),this.JW.Rt=!0,this.JW.wn("latencyrecoveryseek",this.Rs),this.VP.Ea(this.JW),this.BDt=new oK(s,n,this.PL,this.lq,this.aV,this.rNt,this.JW,this.Ndt,this,this.ENt,this.Mz),this.BDt.wn(d.Ww,this.Rs),this.BDt.wn(hc.ma,this.zNt),this.tO.OI=this.BDt.ht,this.sO.OI=this.BDt.rt,this.pq.BW(t.contentProtection),Wr(this.VNt())}IP(t,i,e,s){return Promise.resolve()}CP(){return Promise.resolve()}qNt(t){return t.latencyConfiguration?t.latencyConfiguration:Aj()}async QP(){var t;if(!this.BDt)return;this.pst=!1,this.BDt.Un(),await this.BDt.W,this.So(new vt(this.zx));const i=this.BDt.ww(rK.Jz);this.dC(),await i,this.BDt.Tn(),await this.PL.QP(),null==(t=this.JW)||t.Tn()}jP(){var t;this.BDt&&(this.pst=!0,this.So(new Si(this.zx)),this.BDt.KP(),null==(t=this.JW)||t.KP(),this.PL.jP())}dC(){if(this.ixt)throw new m("Cannot seek while resetting");this.T9.Zg(),this.T9=new Zc,this.k9=pf(t=>this.yNt(this.k9,t),this.T9)}async E9(t,i,e){if(this.ixt)throw new m("Cannot seek while resetting");let s=t;if(this.GNt(s),this.kP.length>0&&(s=Uo.jn(this.kP).LM(s),this.GNt(s)),this.BDt){e&&(await e.catch(gs),fr(i));try{const t=this.PL.ww(d.Zw,i);this.PL.Oy(s),this.BDt.Oy(s),await t}catch(t){throw sa(t),this.BDt.KP(),this.XNt(),t}this.jNt()}}async yNt(t,i){this.So(new gp("golive"));const e=this.lNt;if(this.GNt(e),this.BDt){t&&(await t.catch(gs),fr(i));try{let t,s=this.JW.aL.targetOffset;if(await this.BDt.eNt,e&&s>=1){if(!this.JW.VL()){s-=_.min(1,.5*s)}t=e-s}else t=this.lNt?this.lNt-.2:void 0;for(this.BDt.dC(t);this.ykt.V>0;)await this.BDt.ww(bi.pZ,i);const n=this.ykt;for(;0===this.ykt.qM(n).V;)await this.BDt.ww(bi.pZ,i);t=this.ykt.Tn(this.ykt.V-1),t=this.QNt(t),this.GNt(t);const r=this.PL.ww(d.Zw,i);this.PL.Oy(t,!0),await r}catch(t){var s;if(Ce(t))throw null==(s=this.JW)||s.Tn(),t;throw this.BDt.KP(),await this.BDt.hNt(),this.XNt(),t}this.jNt()}}GNt(t){this.Pz=!0,this.LNt=t,this.So(new ji(this.zx))}jNt(){this.Pz&&(this.LNt=void 0,this.Pz=!1,this.So(new Yr(this.zx)))}XNt(){this.LNt=void 0,this.Pz=!1}QNt(t){return t}KNt(){var t;null==(t=this.BDt)||t.KP()}HNt(t){this.So(new el(t)),this.KNt()}async sxt(t,i,e){var s;fr(e),null==(s=this.JW)||s.KP(),t&&await t.catch(gs),i&&await i.catch(gs),await this.ENt.hr(),this.BDt&&(await this.BDt.zg(),this.BDt=void 0),fr(e),await this.PL.hr(),fr(e),this.PL.Eq(),this.sO.hr(),this.tO.hr(),this.XNt(),this.xq.hr(),this.rNt.hr(),this.rq=void 0,this.nq=void 0,this.pst=!0,this.DNt=!1,this.Ac=void 0,this.ixt=void 0,this.WNt=void 0}hr(){return this.T9.Zg(),this.T9=new Zc,this.YNt.Zg(),this.YNt=new Zc,this.ixt=this.sxt(this.k9,this.ixt,this.YNt.Yg).catch(t=>bu(t)),this.ixt}async kn(){var t,i;this.UI(),this.xq.kn(),this.Cq.zg(),this.Ac&&await this.hr(),this.Vo(),this.PL.Rq=void 0,null==(t=this.JW)||t.mn("latencyrecoveryseek",this.Rs),null==(i=this.JW)||i.zg(),await this.ENt.kn(),this.Gl.kn(),this.tO.kn(),this.sO.kn()}constructor(t,i,e,s,n){var r;super(),this.PL=void 0,this.aV=void 0,this.lq=void 0,this.Cq=void 0,this.xq=void 0,this.JW=void 0,this.pq=void 0,this.rNt=void 0,this.Lz=void 0,this.FNt=void 0,this.Ndt=void 0,this.Mz=void 0,this.Ac=void 0,this.FEt=void 0,this.BDt=void 0,this.Pz=!1,this.LNt=void 0,this.T9=new Zc,this.k9=void 0,this.ixt=void 0,this.YNt=new Zc,this.pst=!0,this.DNt=!1,this.tO=new Gh,this.sO=new Gh,this.Gl=void 0,this.ENt=void 0,this.rq=void 0,this.nq=void 0,this.UNt=Dn.pz,this.WNt=void 0,this.bd=t=>{const i=this.Fx;i.length>0&&this.ENt.jU(i.start(0)),this.So(new B(t.currentTime,this.Vx))},this.BNt=()=>{this.PL.lP!==this.pst&&(this.PL.lP?this.jP():this.QP().catch(gs))},this.YG=()=>{this.DNt=!0},this.zNt=t=>{this.rq=t.errorObject,this.nq=ar(this.rq),this.HNt(this.rq)},this.MNt=t=>{this.rq=$k(t.lt),this.nq=t.lt,this.HNt(this.rq)},this.PL=t,this.Cq=new Gt(this,this.PL),this.xq=new _s(this.Cq,!0),this.aV=i,this.Mz=e,this.lq=new fj(e.jY,e.CY.RW),this.pq=new eC(i),this.PL.Rq=this.pq,n.allowNativeFullscreen?this.ENt=new kW(this.PL):this.ENt=new wt(this.PL),this.Gl=new Tu([this.ENt.Z]),this.rNt=new vj,this.FNt=new nj(this),this.Lz=s,this.Ndt=Y({},n.retryConfiguration,{maxRetries:null!=(r=n.retryConfiguration.maxRetries)?r:3}),this.HI()}},dK=class extends cK{So(t){if(this.JNt){if(t.type===d.Zw)return void this.ZNt();if(t.type===Jr.xM||t.type===d.$w||t.type===Jr.PM)return void this.$Nt.push(t)}super.So(t)}ZNt(){this.JNt=!1,void 0!==this.tBt&&zd.Lg(this.tBt);const t=hh(this.$Nt,t=>t.type===Jr.PM);t&&super.So(t),Wt(this.$Nt)}zP(){if(RU(this.PL))return this.PL.zP()}async hr(){this.iBt=!1,this.ZNt(),await super.hr()}async kn(){h.removeEventListener("visibilitychange",this.eBt),this.ZNt(),await super.kn(),await this.PL.zg(),await this.Nq.Dq(this.sBt)}QNt(t){return zs.X_&&zs.Q_>=15&&zs.Kv?t+.25:t}constructor(t,i,e,s,n,r){super(t,i,e,s,r),this.Nq=void 0,this.sBt=void 0,this.iBt=!1,this.JNt=!1,this.$Nt=[],this.tBt=void 0,this.eBt=()=>{const t=this.oP||0===this.OP;"hidden"!==h.visibilityState||this.lP||!t||this.Aa().YL?"visible"===h.visibilityState&&this.iBt&&(this.JNt=!0,this.tBt=zd.Og(()=>{for(const t of this.$Nt)super.So(t);this.tBt=void 0,this.JNt=!1},2e3),Wr(this.QP()),this.iBt=!1):(this.jP(),this.iBt=!0)},this.Nq=n,this.sBt=t,zs.Rg&&h.addEventListener("visibilitychange",this.eBt)}};r();var lK=class{get tz(){return $.wC}async Jq(t,i){return function(t){if(!t)return!1;const i=t.toLowerCase();return Xt(i,Hi.mC)||Xt(i,Hi.wC)}(t.type)}async Zq(t){return VT(t)}};oe(new class extends lK{DC(t,i,e,s,n,r,h){const o=new qs(i),a=o.Yq(at.Mk);return new dK(a,e,n,r,o,s)}Jq(t,i){return zd.yx&&Qb?zs.w_||zs.S_||zs.D_?Promise.resolve(!1):fv(t.useManagedMediaSource)?super.Jq(t,i):Promise.resolve(!1):Promise.resolve(!1)}$q(){return!1}}),r(),r();var fK=class extends cK{zP(){if(RU(this.PL))return this.PL.zP()}async kn(){await super.kn(),await this.Nq.Dq(this.PL)}constructor(t,i,e,s,n,r){super(t,i,e,s,r),this.Nq=void 0,this.Nq=n}};zs.X_&&zs.ru&&oe(new class extends lK{get tz(){return $.xW}async Jq(t,i){var e,s;if(zs.IS_IOS_CHROME)return!1;const n=await super.Jq(t,i);var r;if(null==(r=null==(s=Af())||null==(e=s.canPlayType)?void 0:e.call(s,Hi._C))||!r||!n||!("serviceWorker"in od))return!1;try{const t=od.serviceWorker.ready;return await wf(t,1e3),!0}catch(t){return!1}}async Zq(t){return!!t.fairplay&&await super.Zq(t)}DC(t,i,e,s,n,r,h){if(t instanceof HTMLDivElement){const t=i.Pst(at.Mk);return new fK(t,e,n,r,i,s)}throw new as(me.CONFIGURATION_ERROR,"Container Div element expected.")}$q(){return!1}}),r(),r(),r(),r();var vK="theo_live_user_id",_K=class{incrementSequenceNumber(){this.AA+=1}get sequenceNumber(){return this.AA}constructor(t){this.externalId=void 0,this.id=void 0,this.userId=void 0,this.AA=void 0,this.externalId=t,this.id=un(),this.userId=gK(),this.AA=0}};function gK(){try{const t=localStorage.getItem(vK);if(t)return t;const i=un();return localStorage.setItem(vK,i),i}catch(t){return un()}}function pK(t){var i;return{hespSrc:t.hespSrc,type:"theo.live",hlsSrc:t.hlsSrc,maxMobileBitrate:t.maxMobileBitrate,targetLatency:null==(i=t.metadata.customization)?void 0:i.targetLatency,contentProtection:t.drmConfig?t.drmConfig:void 0}}function mK(t){const{integration:i,widevine:e,playready:s,fairplay:n}=t;return Y({integration:i},e&&{widevine:{licenseAcquisitionURL:e.licenseUrl}},s&&{playready:{licenseAcquisitionURL:s.licenseUrl}},n&&{fairplay:{licenseAcquisitionURL:n.licenseUrl,certificateURL:n.certificateUrl}})}function wK(t,i){return{id:t.id,name:t.name,deleted:"deleted"===t.status,targetLatency:t.source.targetLatency,maxMobileBitrate:t.source.maxMobileBitrate,endpoints:[{hespSrc:t.source.hespSrc,hlsSrc:t.source.hlsSrc,weight:1,priority:1,contentProtection:t.source.contentProtection},t.fallback&&i?{hespSrc:t.fallback.hespSrc,hlsSrc:t.fallback.hlsSrc,weight:1,priority:2,contentProtection:t.fallback.contentProtection}:void 0].filter(it)}}function yK(t){return void 0!==t.mode}r(),r(),r(),r();var In=function(t){return t.STARTING="s",t.PLAYING="p",t.SEEKING="k",t.REBUFFERING="r",t.PAUSED="a",t.ENDED="e",t.QUIT="q",t}({}),jn=function(t){return t.MANIFEST="m",t.AUDIO="a",t.VIDEO="v",t.OTHER="o",t}({});function bK(t){return 100*_.round(t/100)}function AK(t){const i=t.Gx(),e=t.Ux();for(let t=0;t<e.length;t++)if(e.start(t)<=i&&i<=e.end(t))return 1e3*(e.end(t)-i);return 0}function SK(t){return hh(t.NI,t=>t.Rt)}function TK(t){return $i(t.$I.NI,t=>t.IW)}function kK(t){return uf(t.$I.NI,t=>t.IW)}r(),r();var Pe=class t{static starting(i,e,s){return new t(In.STARTING,i,e,s)}static playing(i){return new t(In.PLAYING,i)}static seeking(i,e){return new t(In.SEEKING,i,e)}static rebuffering(i,e){return new t(In.REBUFFERING,i,e)}static paused(i){return new t(In.PAUSED,i)}static ended(i){return new t(In.ENDED,i)}static quit(i){return new t(In.QUIT,i)}get ct(){return Date.now()-this.nBt}rBt(){const t=this.oa.lX.CY.IW,i=this.oa.VP.OL,e=AK(this.oa);t>0&&void 0!==e&&void 0!==i&&(this.hBt+=1,this.oBt=this.aBt(this.oBt,e),this.uBt=this.aBt(this.uBt,1e3*this.oa.VP.Cd.targetOffset),this.cq=this.aBt(this.cq,1e3*i),this.cBt=this.aBt(this.cBt,t/1e3))}aBt(t,i){return t+(i-t)/this.hBt}DC(){const t={sta:this.Vp,ts:this.nBt,"theo-vt":this.dBt,"theo-at":this.lBt,"theo-d":this.ct,"theo-r":this._f,"theo-e":this.nq};return this.hBt>0?Y({},t,{bl:bK(this.oBt),tbl:bK(this.uBt),ltc:bK(this.cq),mtp:bK(this.cBt),"theo-w":this.hBt}):t}fBt(){return new t(this.Vp,this.oa,this._f)}constructor(t,i,e,s){var n,r,h,o;this.Vp=void 0,this.nBt=Date.now(),this.oBt=0,this.uBt=0,this.dBt=void 0,this.lBt=void 0,this.cq=0,this.cBt=0,this.hBt=0,this._f=void 0,this.nq=void 0,this.oa=void 0,this.Vp=t,this.oa=i,this.dBt=null==(r=SK(this.oa.rt))||null==(n=r.YI)?void 0:n.o,this.lBt=null==(o=SK(this.oa.ht))||null==(h=o.YI)?void 0:h.o,this._f=e,this.nq=s}},EK=class{vBt(){var t;const i=this.oa.VP.OL,e=AK(this.oa),s=this.oa.lX.CY.IW;return xK({bl:void 0!==e?bK(e):void 0,tbl:bK(1e3*this.oa.VP.Cd.targetOffset),ltc:void 0!==i?bK(1e3*i):void 0,mtp:void 0!==s?bK(s/1e3):void 0,sta:null==(t=this._Bt)?void 0:t.Vp,su:!this.DNt||void 0,"theo-sq":this.gBt.sequenceNumber})}pBt(t){var i,e;const s=function(t,i){switch(i){case jn.VIDEO:return SK(t.rt);case jn.AUDIO:return SK(t.ht)}}(this.oa,t);return xK({br:(null==s||null==(i=s.YI)?void 0:i.IW)?bK((null==s||null==(e=s.YI)?void 0:e.IW)/1e3):void 0,ot:t,tb:s?bK(kK(s).IW/1e3):void 0,lb:s?bK(TK(s).IW/1e3):void 0})}mBt(){return xK({"theo-cw":this.oa.xe.clientWidth,"theo-ch":this.oa.xe.clientHeight,"theo-m":this.oa.oP,"theo-vo":_.ceil(100*this.oa.OP)})}wBt(){var t;return xK({sf:PK(this.oa.bt),sid:this.gBt.id,st:"l",v:2,"theo-eid":null==(t=this.gBt.externalId)?void 0:t.substring(0,128),"theo-cn":this.yBt.name.substring(0,128),"theo-v":"10.3.0","theo-t":"web","theo-u":this.gBt.userId})}bBt(){const t={"CMCD-States":btoa(JSON.stringify(this.ABt))};return this.ABt=[],t}SBt(t){this._Bt&&this.ABt.push(this._Bt.DC()),this._Bt=t}async TBt(){this._Bt&&(this.ABt.push(this._Bt.DC()),this._Bt=void 0),this.ABt.push(Pe.quit(this.oa).DC());const t=Y({},this.bBt(),{"CMCD-Session":this.wBt()}),i=await this.oa.Dx.vk({Yu:this.kBt,_k:t,Yk:!0});await i.lk()}destroy(){this.EBt(),s.removeEventListener("beforeunload",this.EBt),this.oa.mn(Jr.PM,this.NL),this.oa.mn(Jr.xM,this.DL),this.oa.mn(d.jw,this.xBt),this.oa.$x.mn("latencyrecoveryseek",this.PBt),this.oa.$x.mn("golive",this.IBt),this.oa.rt.mn(N.rI,this.KW),this.oa.ht.mn(N.rI,this.KW),this.oa.rt.NI.forEach(t=>t.mn(Te.II,this.ih)),this.oa.ht.NI.forEach(t=>t.mn(Te.II,this.ih)),this.oa.pnt.removeEventListener("intenttofallback",this.CBt),this.oa.pnt.removeEventListener("distributionloadstart",this.RBt),this.oa.pnt.removeEventListener("distributionoffline",this.DBt),this.oa.lX.TY(this.NBt),zd.vm(this.BBt)}constructor(t,i,e){this.oa=void 0,this.yBt=void 0,this.kBt=void 0,this.BBt=void 0,this.gBt=void 0,this.ABt=[],this._Bt=void 0,this.DNt=!1,this.uX=!1,this.CBt=t=>{var i,e,s;this.SBt(Pe.starting(this.oa,"fallback",null!=(s=null==(i=t.reason)?void 0:i.message)?s:null==(e=this.oa.Zx())?void 0:e.message))},this.RBt=()=>{this.SBt(Pe.starting(this.oa,"loadChannel"))},this.DBt=()=>{this.SBt(Pe.ended(this.oa))},this.KW=t=>{t.Ht.wn(Te.II,this.ih)},this.ih=()=>{var t,i,e,s;const n=null==(i=SK(this.oa.rt))||null==(t=i.YI)?void 0:t.o,r=null==(s=SK(this.oa.ht))||null==(e=s.YI)?void 0:e.o;n&&r&&(this._Bt&&this._Bt.Vp===In.PLAYING&&this._Bt.dBt===n&&this._Bt.lBt===r||this.SBt(Pe.playing(this.oa)))},this.NL=()=>{this.DNt=!0,this.uX=!1,this.SBt(Pe.playing(this.oa))},this.PBt=()=>{this.DNt&&!this.uX&&(this.uX=!0,this.SBt(Pe.seeking(this.oa,"latencyRecovery")))},this.IBt=()=>{this.DNt&&!this.uX&&(this.uX=!0,this.SBt(Pe.seeking(this.oa,"goLive")))},this.DL=()=>{this.oa.xP||this.SBt(Pe.rebuffering(this.oa,"visible"===h.visibilityState?void 0:"invisible"))},this.xBt=()=>{this.SBt(Pe.paused(this.oa))},this.NBt=t=>{const i=zd.Dh(t.url),e=function(t){const{pathname:i}=t;if(Rc(i,"manifest.json"))return jn.MANIFEST;if(nl(i,"/video/"))return jn.VIDEO;if(nl(i,"/audio/"))return jn.AUDIO;return jn.OTHER}(i);if(e===jn.OTHER)return;this.gBt.incrementSequenceNumber();let s=Y({},t.headers,{"CMCD-Request":this.vBt(),"CMCD-Object":this.pBt(e),"CMCD-Status":this.mBt(),"CMCD-Session":this.wBt()});e===jn.VIDEO&&!Rc(i.pathname,".hspi")&&this._Bt&&(this.SBt(this._Bt.fBt()),s=Y({},s,this.bBt())),t.redirect(Y({},t,{headers:s}))},this.EBt=()=>{Wr(this.TBt())},this.oa=t,this.yBt=i,this.gBt=e;const n=i.endpoints[0],r=(null==n?void 0:n.hespSrc)||(null==n?void 0:n.hlsSrc)||"";this.kBt=zd.Dh("bye",r).href,s.addEventListener("beforeunload",this.EBt),this.oa.wn(Jr.PM,this.NL),this.oa.wn(Jr.xM,this.DL),this.oa.wn(d.jw,this.xBt),this.oa.$x.wn("latencyrecoveryseek",this.PBt),this.oa.$x.wn("golive",this.IBt),this.oa.lX.bY(this.NBt),this.oa.rt.wn(N.rI,this.KW),this.oa.ht.wn(N.rI,this.KW),this.oa.pnt.addEventListener("intenttofallback",this.CBt),this.oa.pnt.addEventListener("distributionloadstart",this.RBt),this.oa.pnt.addEventListener("distributionoffline",this.DBt),this._Bt=Pe.starting(this.oa,"loadchannel"),this.BBt=zd.fm(()=>{var t;null==(t=this._Bt)||t.rBt()},1e3)}};function xK(t){return w.keys(t).map(i=>function(t,i){switch(typeof i){case"boolean":return i?t:t+"=false";case"number":return t+"="+i;case"string":return t+'="'+i+'"';default:return}}(i,t[i])).filter(Boolean).sort().join(",")}function PK(t){if(t)return t.type===Hi._C||t.type===Hi.gC?"h":t.type===Hi.wC?"e":void 0}var IK=class extends as{constructor(t,i,e){super(t,"Could not load channel with id "+i+": "+e),this.channelId=void 0,this.reason=void 0,this.channelId=i,this.reason=e}},CK=class extends IK{constructor(t){super(me.THEO_LIVE_CHANNEL_NOT_FOUND,t,"The channel could not be found")}},RK=class extends IK{constructor(t){super(me.THEO_LIVE_CHANNEL_NOT_FOUND,t,"This account has been locked")}},DK=class extends IK{constructor(t){super(me.THEO_LIVE_CHANNEL_NOT_FOUND,t,"The channel got deleted")}},NK=class{Jgt(t){const i=this.MBt.get(t);if(i)return i;const e=new BK(t,this.aV,this.LBt);return this.MBt.set(t,e),e}constructor(t,i){this.aV=void 0,this.LBt=void 0,this.MBt=void 0,this.aV=t,this.LBt=i,this.MBt=new Map}},BK=class{get OBt(){return zo()-this.FBt>36e5}er(){this.UBt=!1,this.FBt=zo(),this.VBt=this.KSt(),this.VBt.catch(()=>this.UBt=!0)}async KSt(){for(const i of this.LBt.discoveryUrls){const e=await this.HBt(this.aS,i,this.WBt);if(e){if(yK(e)){const{mode:s,status:n,fallback:r,metadata:h}=e;if("locked"===s)throw new RK(this.aS);if("deleted"===n)throw new DK(this.aS);var t;return wK({id:this.aS,name:h.name,mode:s,status:n,source:pK(e),fallback:r?await this.qBt(r,i,this.WBt):void 0,insights:null==h?void 0:h.insights,enhancedLogging:null==h?void 0:h.enhancedLogging,customization:null==h?void 0:h.customization,sseEndpoint:e.sseEndpoint},null==(t=this.LBt.fallbackEnabled)||t)}return e}}throw new CK(this.aS)}async qBt(t,i,e){if("hls"===t.type)return{hlsSrc:t.src,type:"hls"};const s=await this.HBt(t.src,i,e);return s?pK(s):void 0}async HBt(t,i,e){try{const s=zd.Dh(t,i);s.searchParams.set("osName",function(){const t=zd.Zs.ap;if("ios"===t||"macos"===t)return"apple";return t}()),s.searchParams.set("deviceType",zd.Zs.cp),s.searchParams.set("sdkType","web");const n=await this.aV.vk({Yu:s.toString(),_k:e});return await n.VT()}catch(t){return}}get zBt(){return(this.UBt||this.OBt)&&this.er(),this.VBt}constructor(t,i,e){var s;this.aS=void 0,this.aV=void 0,this.LBt=void 0,this.FBt=void 0,this.VBt=void 0,this.UBt=void 0,this.WBt=void 0,this.aS=t,this.aV=i,this.LBt=e,this.WBt=new cc,this.LBt.discoveryHeader&&this.WBt.append("x-theolive-discovery",this.LBt.discoveryHeader),this.WBt.set("CMCD-Session",xK({sid:this.LBt.sessionId,st:"l",v:2,"theo-eid":null==(s=this.LBt.externalSessionId)?void 0:s.substring(0,128),"theo-v":"10.3.0","theo-t":"web","theo-u":this.LBt.userId})),this.er()}};r();var MK=class extends gp{constructor(t){super("distributionloadstart"),this.distributionId=void 0,this.distributionId=t}},LK=class extends gp{constructor(t){super("distributionoffline"),this.distributionId=void 0,this.distributionId=t}},OK=class extends gp{constructor(t){super("endpointloaded"),this.endpoint=void 0,this.endpoint=t}},FK=class extends gp{constructor(t){super("intenttofallback"),this.reason=void 0,this.reason=t}},UK=class extends gp{constructor(){super("enterbadnetworkmode")}},VK=class extends gp{constructor(){super("exitbadnetworkmode")}},HK=class extends Ne{get Ca(){return this.hu||(this.hu=function(t){return{addEventListener(i,e){t.wn(i,e)},removeEventListener(i,e){t.mn(i,e)},get badNetworkMode(){return t.GBt},set badNetworkMode(i){t.GBt=i},get authToken(){return t.XBt},set authToken(i){t.XBt=i},preloadPublications:async i=>(await t.jBt(i)).map(t=>({name:t.name}))}}(this)),this.hu}get GBt(){return this.oa.GBt}set GBt(t){this.oa.GBt=t}get XBt(){return this.oa.XBt}set XBt(t){this.oa.XBt=t}jBt(t){return this.oa.jBt(t)}constructor(t){super(),this.oa=void 0,this.hu=void 0,this.oa=t}};var WK=["https://discovery.theo.live/channels/"],qK=8e5,zK=class extends VF{QBt(){this.oa.$x.wn("latencyrecoveryseek",this.PBt),this.oa.rt.wn(N.rI,this.KW)}KBt(){this.oa.$x.mn("latencyrecoveryseek",this.PBt),this.oa.rt.mn(N.rI,this.KW)}eI(t){if(!this.fNt||this.nq||this.Wz)return super.eI(t);if(t.type===Jr.PM)return void 0!==this.YBt?(zd.Lg(this.YBt),this.YBt=void 0,this.DNt||this.So(new mo(this.Gx()))):this.So(new mo(this.Gx())),this.JBt=0,this.DNt=!0,!0;if(t.type===Jr.xM)return this.YBt||(this.YBt=zd.Og(()=>{this.So(new SP(this.Gx())),this.YBt=void 0},100)),!0;if(t.type===hc.ma){var i;this.JBt++;const e=(null==(i=this.mz)?void 0:i.src)&&KK(this.mz.src),s=this.JBt>5;return e||s?(this.dispatchErrorEvent(t.errorObject),!0):(this.ZBt.So(new FK(t.errorObject)),Wr(this.$Bt()),!0)}if(t.type===d.uo){if(this.tMt=zd.Mg(),void 0===this.iMt&&void 0!==this.oa.bt&&(this.iMt=zd.fm(()=>{var t;zd.Mg()-(null!=(t=this.tMt)?t:0)>15e3&&(this.ZBt.So(new FK(new as(me.THEO_LIVE_UNKNOWN_ERROR,"Indefinite stall detected"))),Wr(this.$Bt()))},1e3)),this.oa.bt&&(this.eMt=!1),this.eMt)return!0}else if(t.type===d.jw){if(void 0!==this.iMt&&(zd.vm(this.iMt),this.iMt=void 0),this.oa.bt&&(this.eMt=!0),!this.eMt)return!0}else t.type===d.py?this.tMt=zd.Mg():t.type===Jr.EM?this.sMt&&(!function(t,i){if(t.rt.V>0){const s=t.rt.MI(0);var e;if(s.Rt=i.enabledVideo,s.Rt)s.tC=null==(e=i.targetVideoQualities)?void 0:e.map(t=>hh(s.$I.NI,i=>i.IW===t)).filter(it)}const s=hh(t.ht.NI,t=>t.bs===i.enabledAudioLanguage);for(const i of t.ht.NI)i.Rt=i===s;for(const e of t.nt.NI){var n;const t=null!=(n=i.textTrackModes.get(e.o))?n:xh.Nh;e.Qk!==t&&(e.Qk=t)}}(this.oa,this.sMt),this.sMt=void 0):t.type===d.sy&&(this.ZBt.So(new FK(new as(me.THEO_LIVE_UNKNOWN_ERROR,"manifest not found"))),Wr(this.$Bt()));return super.eI(t)}mnt(){return this.ZBt.Ca}Yx(){return this.fNt?this.Wz:super.Yx()}Zx(){return this.fNt?this.nq:super.Zx()}get GBt(){return this.nMt}set GBt(t){this.fNt&&(t?this.rMt():this.hMt())}rMt(){if(this.nMt)return;if(this.nMt=!0,this.ZBt.So(new UK),0===this.oa.rt.V)return;const t=this.rt.MI(0),i=cf(t.$I.NI,t=>t.IW);var e;(null!=(e=i.wyt)?e:i.IW)<qK?(t.tC=[i],Promise.resolve().then(()=>t.tC=t.$I.NI.slice())):this.hMt()}hMt(){if(!this.nMt)return;if(this.nMt=!1,this.ZBt.So(new VK),0===this.oa.rt.V)return;const t=this.oa.rt.MI(0);var i;const e=GK(null!=(i=t.tC)?i:t.$I.NI);t.tC=e.length>0?e:GK(t.$I.NI)}get XBt(){return this.oMt}set XBt(t){this.oMt=t,this.oa.lX.TY(this.aMt),this.oMt&&this.oa.lX.bY(this.aMt)}jBt(t){return Promise.all(t.map(async t=>{const i=this.uMt.Jgt(t);return await ua(i.zBt,this.hT.Yg)}))}nu(){var t;return null!=(t=this.Ac)?t:super.nu()}async Ta(t,i){var e;this.fNt=!1;for(const s of null!=(e=null==t?void 0:t.sources)?e:[])if(xk(s)&&s.type===Hi.bC&&s.src){if(this.fNt=!0,this.Ac=t,this.mz=s,this.ZBt.So(new MK(s.src)),this.QBt(),KK(s.src)){const e=Y({},t,{sources:[Y({},s,{type:Hi.wC,useManagedMediaSource:!0})]});return void await super.Ta(e,i)}this.cMt=this.uMt.Jgt(s.src);try{const t=await this.cMt.zBt;return this.yBt=t,void(this.dMt.analyticsEnabled&&(this.lMt=new EK(this,t,this.gBt)))}catch(t){throw sa(t),this.fMt(),t}}return await super.Ta(t,i)}fP(){return this.fNt?this.eMt:super.fP()}QP(){this.d9||(this.d9=!0,this.vMt(!1)),this.eMt=!1,super.QP()}jP(){this.eMt=!0,super.jP()}async $Bt(){void 0!==this.oa.bt&&(null!=this.sMt||(this.sMt=function(t){var i,e;const s=hh(t.rt.NI,t=>t.Rt),n=null==s||null==(i=s.tC)?void 0:i.map(t=>t.IW),r=null==(e=hh(t.ht.NI,t=>t.Rt))?void 0:e.bs,h=Ba();return t.nt.NI.forEach(t=>h.set(t.o,t.Qk)),{enabledVideo:Boolean(s),targetVideoQualities:n,enabledAudioLanguage:r,textTrackModes:h}}(this.oa)));await this.oa.KP().catch(gs),this.vMt(!0)}vMt(t){if(!this.cMt)return;if(this._Mt)return;this.fMt();const i=()=>{this._Mt=void 0};this._Mt=this.gMt(this.cMt,t).then(i).catch(i)}async gMt(t,i){i&&t.er();const e=await t.zBt;this.yBt=e;const s=await this.selectEndpoint(e,this.pMt);if(this.pMt=s,s){const t=this.convertEndpointToSource(e,s);try{await this.oa.Ta(t,(new Zc).Yg)}catch(t){return this.dispatchErrorEvent(t),void this.fMt()}this.ZBt.So(new OK(s)),this.eMt||this.oa.QP()}else this.ZBt.So(new LK(e.id)),this.mMt=zd.Og(()=>this.vMt(!0),15e3)}convertEndpointToSource(t,i){var e,s;const n={sources:[this.getHespSource(t,i),this.getMillicastSource(i),this.getHlsSource(i)].filter(it),ads:this.DNt?[]:null==(e=this.Ac)?void 0:e.ads,blockContentIfAdError:null==(s=this.Ac)?void 0:s.blockContentIfAdError,streamType:"live"};if(i.adSrc||i.daiAssetKey){var r;const t=null!=(r=n.ads)?r:[],e=t.filter(t=>"theoads"===t.integration);e.length>0?e.forEach(t=>{const e=t;var s,n;e.sseEndpoint=null!=(s=i.adSrc)?s:e.sseEndpoint,e.daiAssetKey=null!=(n=i.daiAssetKey)?n:e.daiAssetKey}):t.push({integration:"theoads",sseEndpoint:i.adSrc,daiAssetKey:i.daiAssetKey}),n.ads=t}i.dvrWindow&&(n.dvr=Y({},n.dvr,{windowLength:i.dvrWindow}));const h=ra(n);return h.sources[0].bypassLicense=!0,h}getHespSource(t,i){var e,s;if(i.hespSrc)return{type:Hi.wC,src:i.hespSrc,contentProtection:i.contentProtection?mK(i.contentProtection):void 0,useManagedMediaSource:!0,latencyConfiguration:null!=(s=null==(e=this.mz)?void 0:e.latencyConfiguration)?s:XK(t.targetLatency),hesp:{maxMobileBitrate:t.maxMobileBitrate}}}getHlsSource(t){if(t.hlsSrc)return{type:Hi.gC,src:t.hlsSrc,contentProtection:t.contentProtection?mK(t.contentProtection):void 0}}getMillicastSource(t){if(t.millicastSrc)return{type:Hi.yC,src:t.millicastSrc.name,streamAccountId:t.millicastSrc.accountId,subscriberToken:t.millicastSrc.subscriberToken}}dispatchErrorEvent(t){const i=t instanceof as?t:new as(me.THEO_LIVE_UNKNOWN_ERROR,t.message,t);this.Wz=ar(i),this.nq=i,this.fMt(),this.So(new el(i))}fMt(){void 0!==this.YBt&&(zd.Lg(this.YBt),this.YBt=void 0),void 0!==this.mMt&&(zd.Lg(this.mMt),this.mMt=void 0),void 0!==this.iMt&&(zd.vm(this.iMt),this.iMt=void 0)}KP(){var t;return this.hT.Zg(),this.hT=new Zc,this.KBt(),this.fMt(),this.tMt=void 0,this.fNt=!1,this.d9=!1,this.DNt=!1,null==(t=this.lMt)||t.destroy(),this.lMt=void 0,this.Ac=void 0,this.mz=void 0,this.cMt=void 0,this.yBt=void 0,this.pMt=void 0,this.nq=void 0,this.Wz=void 0,this.JBt=0,this.wMt=[],this.eMt=!0,this.sMt=void 0,this.nMt&&this.hMt(),super.KP()}async kn(t){var i;this.hT.Zg(),this.oa.lX.TY(this.aMt),void 0!==this.YBt&&(zd.Lg(this.YBt),this.YBt=void 0),this.Vo(),this.KBt(),null==(i=this.lMt)||i.destroy(),this.oa.$x.mn("latencyrecoveryseek",this.PBt),await super.kn(t)}async selectEndpoint(t,i){let e=!1;const s=t.endpoints.slice().filter(t=>!i||!function(t,i){return t.hespSrc===i.hespSrc&&t.hlsSrc===i.hlsSrc&&t.adSrc===i.adSrc}(t,i)),n=Cc(s.map(t=>t.priority)).sort();for(const t of n){const i=s.filter(i=>i.priority===t);for(;i.length>0;){const t=QK(i),s=await jK(t,this.oa.Dx);if("online"===s)return t;"invalid-security"===s&&(e=!0),_e(i,t)}}if(i){const t=await jK(i,this.oa.Dx);if("online"===t)return i;"invalid-security"===t&&(e=!0)}if(e){const t=new as(me.MEDIA_LOAD_ERROR,"Trying to play a stream without the correct authorization.");throw this.dispatchErrorEvent(t),t}}constructor(t,i){var e;super(t,i),this.ZBt=void 0,this.gBt=void 0,this.uMt=void 0,this.dMt=void 0,this.lMt=void 0,this.Ac=void 0,this.mz=void 0,this.cMt=void 0,this.yBt=void 0,this.pMt=void 0,this.fNt=!1,this.Wz=void 0,this.nq=void 0,this.hT=new Zc,this.YBt=void 0,this.DNt=!1,this.d9=!1,this._Mt=void 0,this.mMt=void 0,this.iMt=void 0,this.tMt=void 0,this.wMt=[],this.nMt=!1,this.oMt=void 0,this.eMt=!0,this.JBt=0,this.sMt=void 0,this.KW=t=>{var i;const e=t.Ht,s=null==(i=this.yBt)?void 0:i.maxMobileBitrate;if(void 0!==s&&zd.Zs.Ks){e.$I.NI.filter(t=>t.IW>s).forEach(t=>e.$I.pS(t))}var n;e.wn(Te.II,this.ih);const r=GK(null!=(n=e.tC)?n:e.$I.NI);e.tC=r.length>0?r:GK(e.$I.NI)},this.ih=t=>{const i=t.qot;var e;(!i||(null!=(e=i.wyt)?e:i.IW)>=qK)&&this.hMt()},this.PBt=()=>{this.rMt(),this.wMt.push(zd.Mg()),this.wMt=this.wMt.filter(t=>zd.Mg()-t<=3e5),this.wMt.length>=3&&(this.wMt=[],this.ZBt.So(new FK(new as(me.THEO_LIVE_UNKNOWN_ERROR,"Unstable playback detected."))),Wr(this.$Bt()))},this.aMt=t=>{this.fNt&&this.oMt&&("manifest"!==t.type&&"segment"!==t.type||(t.headers.Authorization="Bearer "+this.oMt,t.redirect(t)))},this.ZBt=new HK(this);const s=t.Cd.theoLive;var n,r,h;this.dMt={sessionId:null!=(n=null==s?void 0:s.sessionId)?n:un(),userId:null!=(r=null==s?void 0:s.userId)?r:gK(),externalSessionId:null==s?void 0:s.externalSessionId,analyticsEnabled:!1!==(null==s?void 0:s.analyticsEnabled),fallbackEnabled:!1!==(null==s?void 0:s.fallbackEnabled),discoveryUrls:[null==s?void 0:s.discoveryUrl,...null!=(h=null==s?void 0:s.discoveryUrls)?h:[],...WK].filter(it).map(t=>t.lastIndexOf("/")===t.length-1?t:t+"/")},this.gBt=new _K(null==(e=this.dMt)?void 0:e.externalSessionId),this.uMt=new NK(t.Dx,this.dMt),this.oa.$x.wn("latencyrecoveryseek",this.PBt)}};function GK(t){return t.filter(t=>{var i;return(null!=(i=t.wyt)?i:t.IW)>=qK})}function XK(t){return void 0===t?Y({},Aj(),{forceSeekOffset:20}):{minimumOffset:t-ek,targetOffset:t,maximumOffset:t+ek,forceSeekOffset:20,minimumPlaybackRate:ik,maximumPlaybackRate:ih}}async function jK(t,i){try{const e=t.hespSrc||t.hlsSrc,s=await i.vk({Yu:e,Km:q.bk,Wk:3e3});if(s.dk>=200&&s.dk<300)return"online"}catch(t){if(t instanceof ir&&403===t.uE.dk)return"invalid-security"}return"offline"}function QK(t){const i=t.reduce((t,i)=>t+i.weight,0);if(0===i){return t[_.floor(_.random()*t.length)]}const e=_.random()*i;let s=0;for(const i of t)if(s+=i.weight,e<=s)return i;return t[t.length-1]}function KK(t){try{return Rc(zd.Dh(t).pathname,"manifest.json")}catch(t){return!1}}Ma(t=>new zK(t),da.bC),r(),r();function YK(t,i,e){const s=null==e?void 0:e.streamType;if(S(t)){if(s)return s;if(null==e?void 0:e.dvr)return"dvr";switch(hR(e)){case Hi.bC:case Hi.yC:case Hi.wC:case Hi.mC:return"live"}return}if(t===1/0){if("live"===s||"dvr"===s)return s;if(i&&i.length>0){if(i.end(i.length-1)-i.start(0)>60)return"dvr"}return"live"}return"vod"}var JK=class extends VF{Ta(t,i){if(this.Ac=t,it(null==t?void 0:t.dvr)&&t.dvr.windowLength>=60&&t.sources.length>=2){const i=hh(t.sources,t=>Ms(t)||Xo(t)),e=hh(t.sources,t=>ei(t)&&(gk(t.type)||tu(t.type)));it(i)&&it(e)&&(this.Yo=1,this.yMt=this.bMt(t,i),this.AMt=this.bMt(t,e),this.SMt=t.dvr.windowLength)}return super.Ta(t,i)}nu(){return this.Ac}async KP(){var t;null==(t=this.T9)||t.Zg(),this.T9=void 0,void 0!==this.k9&&(await this.k9.catch(gs),this.k9=void 0),this.Ac=void 0,this.Yo=0,this.yMt=void 0,this.AMt=void 0,this.SMt=void 0,await super.KP()}EP(){const t=super.EP();if(!this.oL||this.GX.xJ)return t;let i;if(0===t.length||1===this.Yo){const t=Date.now()/1e3,e=this.SMt;i=new Uo([t-e,t])}else i=Uo.jn(t).Ly(this.uAt());return i._s()}Xx(t,i){var e;if(!this.oL)return super.Xx(t,i);null==(e=this.T9)||e.Zg(),this.T9=new Zc,this.k9=Cu(this.E9(t,this.k9,this.T9.Yg),this.T9),this.k9.catch(gs)}eI(t){return this.oL?t.type===d.py?(this.So(new B(this.Gx(),this.Hx())),!0):t.type===d.Zw?(this.So(new Yr(this.Gx())),!0):super.eI(t):super.eI(t)}async E9(t,i,e){if(void 0!==i&&await i.catch(gs),fr(e),t!==1/0){let i=!1;if(2!==this.Yo&&(this.So(new ji(t)),i=!0,await this.TMt(this.AMt,e)),S(this.Nd())){i||this.So(new ji(t));do{await this.ww(d.Cw,e)}while(S(this.Nd()))}const s=new Date(1e3*t);super.Wx(s)}else 1!==this.Yo?(this.So(new ji(t)),await this.kMt(this.yMt,e)):super.Xx(t)}Gx(){var t,i;return this.oL&&this.EP().length?this.oa.bt?(null!=(i=null==(t=this.Vx)?void 0:t.getTime())?i:zo())/1e3:this.EP().end(0):super.Gx()}mP(){const t=super.mP();if(!this.oL||!this.bt||!t.length)return t;let i=Uo.jn(t);return i=i.Ly(this.uAt()),i._s()}Ux(){const t=super.Ux();if(!this.oL||!this.bt||!t.length)return t;let i=Uo.jn(t);return i=i.Ly(this.uAt()),i._s()}Hx(){const t=super.Hx();return t&&Qf(t)?t:new Date}Wx(t){return this.oL?t&&Qf(t)?this.Xx(t.getTime()/1e3):void 0:super.Wx(t)}get oL(){return 0!==this.Yo}get EMt(){var t,i;return(null!=(i=null==(t=this.Vx)?void 0:t.getTime())?i:zo())/1e3}uAt(){if(!this.oL)return 0;const t=super.Gx();return this.EMt-t}async kMt(t,i){await super.Ta(t,i),this.Yo=1,this.QP()}async TMt(t,i){await super.Ta(t,i),this.Yo=2,this.QP()}bMt(t,i){const e=i.type===Hi.yC?lR(i):dR(i);e.bypassLicense=!0;return Y({},t,{sources:[e]})}constructor(t){super(t),this.Ac=void 0,this.yMt=void 0,this.AMt=void 0,this.SMt=void 0,this.Yo=0,this.k9=void 0,this.T9=void 0}};Ma(t=>new JK(t),da.Tnt),r(),r(),r();var ZK=gd(yd());r(),r(),r();var $K=class extends Ne{get nN(){return this.xMt}er(t,i){this.vA=t,this.xMt=i,this.hu&&this.So(new Va(this.hu))}get Ca(){var t;return null!=(t=this.hu)?t:this.hu=this.xa()}get o(){return this.vA.id}get JI(){return this.yO}get IW(){return this.vA.bitrate}get wyt(){}get Rrt(){return""}get Th(){return""}get Syt(){return""}get xst(){return!0}get yyt(){}JU(){throw new m("Method not implemented.")}ZU(){throw new m("Method not implemented.")}kn(){this.Vo()}constructor(t,i){super(),this.yO=hE(),this.vA=void 0,this.xMt=void 0,this.hu=void 0,this.vA=t,this.xMt=i}},tY=class extends $K{xa(){return Lq(this)}get Olt(){return 0}get Ti(){return this.vA.width}get Mi(){return this.vA.height}get byt(){return 0}constructor(t,i){super(t,i)}};r();var iY=class extends Ne{get Rt(){return!0}set Rt(t){}get Ca(){var t;return null!=(t=this.hu)?t:this.hu=cs(this)}SO(t){this.Rt=t}get plt(){}get Lt(){return this.I5}get o(){return this.aS||"millitrack"}get JI(){return this.yO}get Th(){return""}get bs(){return""}get Qk(){return this.Rt?"enabled":"disabled"}set Qk(t){this.SO("enabled"===t)}get YI(){}get $I(){return this._O}get tC(){return this.PMt}set tC(t){if(this.PMt=t,this.Rt){const i=1===(null==t?void 0:t.length)?t[0].nN:void 0;this.IMt(i)}this.So(new qa(this._O.NI.slice(),this)),((null==t?void 0:t.length)||this._O.V)&&this.So(new DW((null==t?void 0:t[0])||this._O.MI(0)))}get ZI(){}kn(){this.Vo();for(const t of this._O.NI)t.kn();this._O.hr()}constructor(t,i){super(),this.yO=mi(),this._O=new iE,this.PMt=void 0,this.aS=void 0,this.I5=void 0,this.hu=void 0,this.aS=t,this.I5=i}},eY=class extends iY{er(t){for(const i of t.active){const e=hh(t.layers,t=>t.encodingId===i.id),s=hh(this._O.NI,t=>t.o===i.id);s?s.er(i,e):this._O.gO(new tY(i,e))}this.So(new Xh(this))}get Km(){return at.Mk}IMt(t){var i;null==(i=this.CMt)||i.RMt(t)}kn(){this.CMt=void 0,super.kn()}constructor(t,i,e){super(t,i),this.CMt=void 0,this.CMt=e}};r();var sY=class{er(t){this.DMt=t}get IW(){var t,i,e,s,n;var r;return(null!=(n=null==(i=this.DMt)||null==(t=i.video.inbounds)?void 0:t.reduce((t,i)=>t+i.bitrateBitsPerSecond,0))?n:0)+(null!=(r=null==(s=this.DMt)||null==(e=s.audio.inbounds)?void 0:e.reduce((t,i)=>t+i.bitrateBitsPerSecond,0))?r:0)}get RW(){var t,i;return null!=(i=null==(t=this.DMt)?void 0:t.currentRoundTripTime)?i:0}DW(t){}constructor(){this.DMt=void 0}};r(),r();var nY=class extends $K{xa(){return Oq(this)}get mwt(){return this.NMt}constructor(t,i){super(t,i),this.NMt=0}},rY=class extends iY{er(t){for(const i of t.active){const e=hh(t.layers,t=>t.encodingId===i.id),s=hh(this._O.NI,t=>t.o===i.id);s?s.er(i,e):this._O.gO(new nY(i,e))}this.So(new Xh(this))}get Km(){return at.Bk}IMt(t){var i;null==(i=this.CMt)||i.BMt(t)}kn(){this.CMt=void 0,super.kn()}constructor(t,i,e){super(t,i),this.CMt=void 0,this.CMt=e}};r();var hY=class extends Oh{xa(){return function(t){return Gi(U(t),{get mid(){return t.LU.mid},get uuid(){return t.LU.uuid},get timecode(){return t.LU.timecode},get unregistered(){return t.LU.unregistered}})}(this)}constructor(t,i){super(t,t,void 0,!1),this.LU=void 0,this.LU=i}};r(),r();var oY=gd(yd()),aY=class extends Ne{get Ca(){return this.hu||(this.hu=Xk(this)),this.hu}ZL(t){return oY.Logger.diagnose(t)}wn(t,i){this.MMt.wn(t,i)}mn(t,i){this.MMt.mn(t,i)}constructor(t){super(),this.hu=void 0,this.MMt=void 0,this.MMt=t}},uY=[d.uo,d.jw,Jr.PM,d.Qw,d.Ww,d.$w,d.Zw,d.Nw,d.Kw,d.wy,d.Cw,d.Jw,d.xw,d.Ew,d.Lw,d.Bw],cY=["active","inactive","stopped","vad","layers","migrate","viewercount"],dY=1e3,lY=class extends gp{get stats(){return this.DMt}constructor(t){super("stats"),this.DMt=void 0,this.DMt=t}},fY=class extends Ne{RMt(t){var i;null==(i=this.Lf)||i.select(t).catch(this.Lmt)}BMt(t){var i;null==(i=this.Lf)||i.select(t).catch(this.Lmt)}get WP(){return!1}zP(){return this.PL.zP()}get ht(){return this.tO}get Fx(){return this.PL.Fx._s()}get Vx(){var t,i;return null!=(i=null!=(t=this.PL.Vx)?t:this.LMt)?i:new Date}set Vx(t){}get bt(){return this.Ac}get zx(){return this.PL.zx}set zx(t){this.Xx(t)}Xx(t,i){}get ct(){return this.PL.ct}get Qx(){return this.PL.Qx}get lt(){return this.nq}get Jx(){return this.rq}get $x(){}get iP(){return this.OMt}get sP(){return this.PL.sP}get rP(){var t,i;const e=this.FMt,s=null==e||null==(t=e.video.inbounds)?void 0:t[0],n=null==e||null==(i=e.audio.inbounds)?void 0:i[0];var r,h,o,a;return{aO:this.Mz.CY.IW,rO:null!=(r=null==s?void 0:s.framesDropped)?r:0,hO:0,oO:null!=(h=null==s?void 0:s.framesReceived)?h:0,uO:(null!=(o=null==s?void 0:s.totalBytesReceived)?o:0)+(null!=(a=null==n?void 0:n.totalBytesReceived)?a:0),cO:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}}}get oP(){return this.PL.oP}set oP(t){this.PL.oP=t}get cP(){var t,i;return null!=(i=null==(t=this.Lf)?void 0:t.isActive())&&i}get lP(){return this.PL.lP}get vP(){return 1}set vP(t){}get pP(){return this.PL.pP._s()}get wP(){return Dn.pz}set wP(t){}get AP(){return this.PL.AP}get kP(){return this.PL.kP._s()}get xP(){return this.PL.xP}get uq(){return this.PL.uq}get nt(){return this.PL.nt}get DP(){return this.PL.DP}get rt(){return this.sO}get MP(){return this.PL.MP}get OP(){return this.PL.OP}set OP(t){this.PL.OP=t}get VP(){return this.Lz}get dq(){return this.lq}get OL(){return this.Lz.OL}be(){this.PL.be()}we(){this.PL.we()}async QP(){this.LMt=void 0,this.Un(),await this.PL.QP()}jP(){this.LMt=new Date,this.PL.jP()}async hr(){var t;this.UMt(),this.Ac=void 0,this.C6=!1,this.hT.Zg(),null==(t=this.Lf)||t.stop(),this.Lf=void 0,this.Ypt&&(await this.Ypt.catch(gs),this.Ypt=void 0),this.VMt=void 0,await this.PL.hr(),this.HMt=void 0,this.WMt=0,this.PL.Eq();for(const t of this.sO.NI)t.kn();this.tO.hr(),this.sO.hr()}async kn(){this.UMt(),this.Vo(),await this.hr(),this.tO.kn(),this.sO.kn(),this.xq.kn(),this.Cq.zg(),this.PL.mn(uY,this.Rs),this.PL.mn(hc.ma,this.Ts),this.PL.mn(d.py,this.bd),await this.Bz.Dq(this.PL)}async Ta(t,i,e){var s;fr(e),this.OEt(),this.UMt();const n=t;this.Ac=n,this.hT=new Zc,n.apiUrl&&ZK.Director.setEndpoint(n.apiUrl);const r=this.qMt(this.Mz.WY.type);this.Lf=new ZK.View(void 0,()=>ZK.Director.getSubscriber({streamName:n.src,streamAccountId:n.streamAccountId,subscriberToken:n.subscriberToken}),void 0,!0),this.zMt=Y({},n.connectOptions,{events:cY,abrConfiguration:{strategy:r,metadata:{bitrate:null==(s=this.Mz.WY.metadata)?void 0:s.bitrate}}}),this.GMt()}qMt(t){switch(t){case xa.PERFORMANCE:return"performance";case xa.BANDWIDTH:return"bandwidth";case xa.QUALITY:return"quality";default:return}}IP(t,i,e,s){return Promise.resolve()}CP(){return Promise.resolve()}Un(){if(void 0!==this.Ypt)return;const t=this.Lf;void 0!==t&&(this.Ypt=this.vE(t,this.zMt,this.hT.Yg).catch(this.Lmt))}async vE(t,i,e){fr(e);try{var s,n;await ua(t.connect(i),e),t.webRTCPeer.initStats({autoInitStats:!0,statsIntervalMs:_.min(null!=(n=null==(s=this.Ac)?void 0:s.statsIntervalMs)?n:dY,dY)})}catch(i){sa(i),function(t){return Mc(t)&&"FetchError"===t.name}(i)&&400===i.status&&(zd.um("[THEOplayer] Millicast connect error, reconnecting.",i),await ua(t.reconnect(),e)),this.Qq(new as(me.NETWORK_ERROR,i.message,i))}}async XMt(t,i){fr(i);try{this.PL.G7(),this.VMt=t,await this.PL.hr(),await this.PL.Un({Km:O.AV,rC:"",YZ:t,GT:Hi.yC,fq:[]})}finally{this.PL.X7()}}GMt(){var t;const i=this.Lf;i.on("track",t=>this.jMt(t)),i.on("broadcastEvent",t=>this.QMt(t)),i.webRTCPeer.on("stats",t=>{this.FMt=t,this.lq.er(t),this.KMt()}),(null==(t=this.zMt)?void 0:t.metadata)&&i.on("metadata",t=>this.YMt(t))}KMt(){var t,i;void 0===this.JMt&&(this.So(new lY(this.FMt)),this.JMt=zd.fm(()=>{this.So(new lY(this.FMt))},null!=(i=null==(t=this.Ac)?void 0:t.statsIntervalMs)?i:dY))}UMt(){void 0!==this.JMt&&(zd.vm(this.JMt),this.JMt=void 0)}jMt(t){const i=this.tO.V>0,e=this.sO.V>0,s=i&&!e,n=t.streams[0];if(s){const t=n.getVideoTracks().slice();for(const i of t)n.removeTrack(i)}n!==this.VMt&&this.XMt(n,this.hT.Yg).catch(this.Lmt)}QMt(t){switch(t.name){case"active":{this.So(new TG);const i=t.data,e=this.zMt;for(const t of i.tracks)if(t.media!==at.Mk||e.disableVideo||this.sO.NI.some(i=>i.o===t.trackId)){if(t.media===at.Bk&&!e.disableAudio&&!this.tO.NI.some(i=>i.o===t.trackId)){const i=this.tO.V>0?Pn.uDt:Pn.cDt;this.tO.tt(new rY(t.trackId,i,this))}}else{const i=this.sO.V>0?Ja.uDt:Ja.cDt;this.sO.tt(new eY(t.trackId,i,this))}break}case"inactive":this.So(new lh),this.sO.hr(),this.tO.hr();break;case"stopped":this.So(new lh);break;case"viewercount":default:break;case"layers":{const i=t.data;if(0===this.sO.V){const t=new eY("",Ja.cDt,this);t.er(i.medias[0]),this.sO.tt(t)}else{const t=hh(this.sO.NI,t=>t.Lt===Ja.cDt);null==t||t.er(i.medias[0])}break}}}YMt(t){let i=this.HMt;void 0===i&&(i=this.PL.sI(us.zU,void 0,void 0,void 0,void 0,nh.MILLICAST),i.Qk=xh.iC,this.HMt=i);const e=this.zx,s=_.max(0,e-10);this.WMt<s&&(Re(i,s),this.WMt=s);const n=new hY(e+.001,t);i.nV(n)}Qq(t){this.nq||(Wr(this.hr()),this.nq=ar(t),this.rq=t,this.So(new el(t)))}OEt(){this.nq=void 0,this.rq=void 0}YP(){return!1}JP(){}ZP(){}$P(){this.PL.$P()}tI(){const t=this.VMt;void 0!==t&&this.XMt(t,this.hT.Yg).catch(this.Lmt)}qP(){return this.PL.Ma}Aa(){return this.PL.Sq}sI(t){return this.PL.Tq(t)}constructor(t,i,e){super(),this.Bz=void 0,this.Mz=void 0,this.Lz=void 0,this.PL=void 0,this.Lf=void 0,this.zMt=void 0,this.Ac=void 0,this.hT=void 0,this.Ypt=void 0,this.VMt=void 0,this.sO=void 0,this.tO=void 0,this.HMt=void 0,this.nq=void 0,this.rq=void 0,this.FMt=void 0,this.WMt=void 0,this.lq=void 0,this.Cq=void 0,this.xq=void 0,this.OMt=void 0,this.JMt=void 0,this.LMt=void 0,this.C6=void 0,this.Ts=void 0,this.bd=void 0,this.Lmt=void 0,this.Bz=t,this.Mz=i,this.Lz=e,this.hT=new Zc,this.Ypt=void 0,this.VMt=void 0,this.sO=new Ws,this.tO=new Ws,this.WMt=0,this.lq=new sY,this.C6=!1,this.Ts=t=>{this.Qq($k(t.lt))},this.bd=t=>{this.C6||(this.C6=!0,this.So(new Yr(t.currentTime))),this.So(new B(t.currentTime,this.Vx))},this.Lmt=t=>{Ce(t)||this.Qq(new as(me.MEDIA_DECODE_ERROR,t.message,t))},this.PL=this.Bz.Yq(at.Mk),this.Cq=new Gt(this,this.PL),this.xq=new _s(this.Cq,!0),this.PL.wn(uY,this.Rs),this.PL.wn(hc.ma,this.Ts),this.PL.wn(d.py,this.bd),this.xq.wn(Ii,this.Rs),this.OMt=new aY(this)}};oe(new class{get tz(){return $.yC}DC(t,i,e,s,n,r,h,o){return new fY(i,n,r)}Jq(t,i){return t.type===Hi.yC}async Zq(t){let i=await VT(t);return i&&(i=Boolean(t.widevine||t.fairplay)),i&&!1}$q(){return!1}}),r(),r(),r(),r();var vY=function(t){return t.ZMt="currentbufferingrenditionchange",t.$Mt="tLt",t.iLt="eLt",t}({});r(),r();var _Y=class{constructor(t,i){var e,s;this.JI=void 0,this.sLt=void 0,this.Km=void 0,this.nLt=void 0,this.rLt=void 0,this.hLt=void 0,this.l=void 0,this.bs=void 0,this.oLt=void 0,this.aLt=void 0,this.uLt=void 0,this.cLt=void 0,this.Rrt=void 0,this.JI=hE(),this.sLt=i,this.Km=t.Km,this.nLt=t.nLt,this.rLt=t.rLt,this.hLt=t.hLt,this.l=t.l,this.bs=t.bs,this.oLt=t.oLt,this.aLt=t.aLt,this.uLt=void 0===t.Syt,this.cLt=null!=(s=null==(e=t.cLt)?void 0:e.split(","))?s:[]}};function gY(t,i){return t.Km===i.Km&&(t.l===i.l||!(!t.nLt||!i.nLt))}function pY(t,i){return void 0!==t&&void 0!==i&&mY(t,i)}function mY(t,i){return t.sLt===i.sLt}function wY(t,i){return mY(t,i)&&t.oLt===i.oLt}function yY(t,i){for(const e of t)if(wY(e,i))return!0;return!1}var bY=class extends Ne{get ZI(){return this.dLt}get Rt(){const t=this.lLt();if(!t)return!1;for(const i of this.$I.NI)if(i.fLt===t)return!0;return!1}set Rt(t){if(t!==this.Rt)if(t){var i;let t=null==(i=this.$I.MI(0))?void 0:i.fLt;const e=this._Lt.vLt;for(const i of this.$I.NI)if(i.gLt===e){t=i.fLt;break}this.pLt(t)}else this.pLt(void 0)}get YI(){if(!this.Rt)return;const t=this._Lt.mLt;for(const i of this.$I.NI)if(yY(t,i.fLt))return i}get Ca(){return this.hu||(this.hu=cs(this)),this.hu}get o(){return this.yO.toString()}get JI(){return this.yO}get Th(){return this.bO}set Th(t){t!==this.bO&&(this.bO=t,this.So(new Xh(this)))}get bs(){return this.$b}get Qk(){return this.Rt?"enabled":"disabled"}get tC(){return this.Ict}set tC(t){let i=[];if(t){i=t.filter(t=>{const i=this.YI?cH(this.YI):void 0;return zd.Zs.Pp(i,cH(t))}).filter(i=>this.$I.pO(t)&&i.xst)}else i=this.$I.NI.filter(t=>t.xst);if(0!==i.length){if(!(t===this.Ict||this.Ict&&wc(this.Ict,i))){if(this.Ict=t?i:void 0,this._Lt.wLt(i.map(t=>t.gLt)),1===i.length){const t=i[0].gLt,e=this.Vp===at.Mk,s=this.Mz.eJ;Wr(this._Lt.yLt(t,{bLt:!0,ALt:s&&e,SLt:s&&!e}))}this.So(new qa(i,this))}}else this.So(new uH)}SO(t){this.Rt=t}TLt(t){return hh(this.$I.NI,i=>i.fLt===t)}kn(){this.Vo(),this._Lt.mn(vY.ZMt,this.kLt),this._Lt.mn(vY.$Mt,this.ELt);for(const t of this.$I.NI)t.kn();this.$I.hr()}constructor(t,i,e,s,n){var r;super(),this.Vp=void 0,this._Lt=void 0,this.Mz=void 0,this.wh=void 0,this.$I=void 0,this.bO=void 0,this.$b=void 0,this.dLt=void 0,this.Ict=void 0,this.xLt=void 0,this.PLt=void 0,this.hu=void 0,this.yO=void 0,this.ILt=void 0,this.kLt=void 0,this.ELt=void 0,this.Vp=t,this._Lt=i,this.Mz=e,this.wh=s,this.$I=n,this.Ict=void 0,this.xLt=void 0,this.ILt=()=>this.So(new Xh(this)),this.kLt=()=>{const t=this.YI;t&&this.xLt!==t&&(this.xLt=t,this.So(new DW(t)))},this.ELt=()=>{const t=this.Rt;this.PLt!==t&&(this.PLt=t,this.wh.So(new Rh(this)),this.So(new Rh(this)))},this.xLt=this.YI,this.PLt=this.Rt;const h=n.MI(0);var o,a;this.bO=null!=(o=null==h?void 0:h.fLt.l)?o:"",this.$b=null!=(a=null==h?void 0:h.fLt.bs)?a:"",this.dLt=null==h||null==(r=h.fLt)?void 0:r.cLt.map(xY).filter(it),this.yO=mi(),this._Lt.wn(vY.ZMt,this.kLt),this._Lt.wn(vY.$Mt,this.ELt);for(let t=0;t<this.$I.V;t++){this.$I.MI(t).wn("update",this.ILt)}}},AY=class extends bY{get Lt(){return Pn.cDt}lLt(){return this._Lt.CLt}pLt(t){Wr(this._Lt.RLt(t))}constructor(t,i,e,s){super(at.Bk,t,i,e,s)}},SY=class extends bY{get Lt(){return Ja.cDt}lLt(){return this._Lt.DLt}pLt(t){Wr(this._Lt.NLt(t))}constructor(t,i,e,s){super(at.Mk,t,i,e,s)}},TY=class extends Ne{get o(){return String(this.gLt.o)}get JI(){return this.gLt.o}get IW(){return this.gLt.IW}get wyt(){return this.gLt.wyt}get Th(){var t;return null!=(t=this.bO)?t:this.fLt.l}set Th(t){this.Th!==t&&(this.bO=t,this.So(new Va(this.Ca)))}get Syt(){return this.fLt.sLt.BLt()}get yyt(){return this.gLt.yyt}ZU(){}JU(){}kn(){this.Vo()}constructor(t,i){super(),this.gLt=void 0,this.fLt=void 0,this.bO=void 0,this.xst=void 0,this.gLt=t,this.fLt=i,this.bO="",this.xst=!0}},kY=class extends TY{get mwt(){return 0}get Rrt(){var t;return(null==(t=this.gLt.Rrt)?void 0:t.q9)||""}get Ca(){return this.hu||(this.hu=this.xa()),this.hu}xa(){return Oq(this)}constructor(t,i){super(t,i),this.hu=void 0}},EY=class extends TY{get Rrt(){var t;return(null==(t=this.gLt.Rrt)?void 0:t.W9)||""}get byt(){return this.MLt}set byt(t){this.MLt!==t&&(this.MLt=t,this.So(new Va(this.Ca)))}get Olt(){var t,i;return null!=(i=null!=(t=this.CRt)?t:this.gLt.Olt)?i:0}set Olt(t){this.Olt!==t&&(this.CRt=t,this.So(new Va(this.Ca)))}get Mi(){var t,i;return null!=(i=null==(t=this.gLt.RRt)?void 0:t.Mi)?i:0}get Ti(){var t,i;return null!=(i=null==(t=this.gLt.RRt)?void 0:t.Ti)?i:0}get Ca(){return this.hu||(this.hu=this.xa()),this.hu}xa(){return Lq(this)}constructor(t,i){super(t,i),this.hu=void 0,this.MLt=0,this.CRt=void 0}};function xY(t){return"public.accessibility.describes-video"===t?Je.KI:"public.accessibility.transcribes-spoken-dialog"===t?Je.TRANSCRIBES_SPOKEN_DIALOG:"public.accessibility.describes-music-and-sound"===t?Je.DESCRIBES_MUSIC_AND_SOUND:"public.accessibility.easy-to-read"===t?Je.QI:void 0}r();var ol=new class{LLt(t){if(!this.Rt())return!1;const i=[];return!(i.length>0)||i.some(i=>i.toLowerCase()===t.toLowerCase())}OLt(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];this.LLt(t)&&zd.hm("DEBUG "+t+" -",...e)}cN(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];this.LLt(t)&&zd.hm("INFO "+t+" -",...e)}FLt(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];this.LLt(t)&&zd.um("WARNING "+t+" -",...e)}lt(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];this.LLt(t)&&zd.dm("ERROR "+t+" -",...e)}ULt(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];this.LLt(t)&&zd.dm("FATAL "+t+" -",...e)}constructor(){this.Rt=()=>!1}},Ho="HLSPlaylistParser",Ac="Discontinuity",PY="Buffering";r();var IY=class{get IW(){return this.eut.Fet}get RW(){return this.sCt.Fet}DW(t){if("segment"!==t.Km&&"preload-hint"!==t.Km)return;const i=[new oj(this.sCt)];return"stream"!==t.fk||!function(t){return"segment"===t.Km&&"initialization-segment"!==t.zk}(t)&&"preload-hint"!==t.Km?i.push(new aj(this.eut)):i.push(new uj(this.eut,1e3)),new hj(i)}JIt(t){this.eut=new Xs(Xs.RIt,Xs.DIt,1,t)}constructor(t){this.eut=void 0,this.sCt=void 0;const i=t.IW>0?t.IW:Xs.$at,e=t.RW>0?t.RW:wi.$at;this.eut=new Xs(Xs.RIt,Xs.DIt,1,i),this.sCt=new wi(wi.RIt,wi.DIt,e)}};r();var CY=class{$Z(t,i){const e={Km:O.SV,fq:[],q4:t.map(t=>({GT:t})),t5:i};return Promise.resolve(void 0!==this.Tst.$Z([e]))}constructor(t){this.Tst=void 0,this.Tst=t}};r(),r();var RY=(t,i,e,s,n)=>t.filter(t=>!!Ct(s,t)||1.1*t.IW<=e.IW),DY=(t,i,e,s,n)=>t.filter(t=>{if(Ct(s,t))return!0;let r=1/0;for(const i of t.VLt){var h,o;r=_.min(r,null!=(o=null!=(h=i.sLt.HLt)?h:i.sLt.WLt)?o:1/0)}r===1/0&&(r=1);const a=2*e.RW+t.IW*r/e.IW;return t.IW<=i.IW||n.qLt>a}),NY=(t,i,e,s,n)=>Xn(t,(t,i)=>i.IW-t.IW),BY=(t,i,e,s,n)=>t.every(t=>t.yyt&&!S(t.yyt))?Xn(t,(t,i)=>i.yyt-t.yyt):t,MY=(t,i,e,s,n)=>0===s.length?t:Xn(t,(t,i)=>{const e=Ct(s,t)?1:0;return(Ct(s,i)?1:0)-e}),LY=(t,i,e,s,n,r)=>t.filter(t=>!t.Rrt||!i.Rrt||!(void 0!==i.Rrt.W9&&void 0!==t.Rrt.W9&&!Tr(i.Rrt.W9,t.Rrt.W9)&&!r.zLt({GT:'video/mp4; codecs="'+t.Rrt.W9+'"'}))&&!(void 0!==i.Rrt.q9&&void 0!==t.Rrt.q9&&!Tr(i.Rrt.q9,t.Rrt.q9)&&!r.GLt({GT:'audio/mp4; codecs="'+t.Rrt.q9+'"'}))),OY=(t,i,e,s,n)=>{if(!1===n.udt)return t;if(zd.Zs.dp)return t;const r=zd.Zs.lp;var h;const o=(null!=(h=null==r?void 0:r.width)?h:n.Ti)*XV;var a;const u=(null!=(a=null==r?void 0:r.height)?a:n.Mi)*XV;for(let i=0;i<t.length;i++){const e=t[i];if(void 0===e.RRt)return t;const s=e.RRt.Mi,n=e.RRt.Ti;if(s<=u&&n<=o)return t.slice(i,t.length)}return[]},FY=(t,i,e,s,n)=>function(t,i){const e=i.udt;if(void 0===e&&!zd.Zs.Ks)return t;if(!1===e)return t;for(let e=0;e<t.length;e++){const s=t[e];if(void 0===s.RRt)return t;const n=s.RRt.Mi,r=s.RRt.Ti;if(n===i.Mi&&r===i.Ti)return t.slice(e,t.length);if(n<i.Mi||r<i.Ti)return t.slice(0===e?e:e-1,t.length)}return[]}(t,n);var UY="AbrEvaluator",VY=class{get XLt(){return this.Mz.CY}jLt(t){this.ddt=t}async QLt(t,i,e,s,n){return(await this.KLt(t,i,e,s,n))[0]}async KLt(t,i,e,s,n){if(0===t.length)throw new m("AbrEvaluator - Unable to select optimal variant stream from an empty list.");ol.OLt(UY,"Performing optimal variant stream selection.");const r=this.XLt;let h=t;for(const t of this.ddt){const o=t(h,i,r,e,s,n);h=hi(o)?o:await o}if(0===h.length){ol.FLt(UY,"No possible variant stream remains after ABR rule evaluation. Selecting the lowest bandwidth variant stream.");return[$i(t,t=>t.IW)]}return h}constructor(t){this.Mz=void 0,this.ddt=void 0,this.Mz=t,this.ddt=[LY,RY,DY,NY,OY,FY,BY,MY]}};function HY(t,i){return[t,void 0!==i?t+i-1:Gl]}function WY(t){return Boolean(t.$D)}function qY(t){return Boolean(t.bct)}r(),r(),r(),r(),r();var dl=function(t){return t[t.Bk=0]="Bk",t[t.Mk=1]="Mk",t[t.HU=2]="HU",t[t.YLt=3]="YLt",t}({}),Ah=function(t){return t[t.JLt=0]="JLt",t[t.ZLt=1]="ZLt",t}({}),ao=function(t){return t[t.pz=0]="pz",t[t.$Lt=1]="$Lt",t[t.tOt=2]="tOt",t}({}),zY=function(t){return t[t.yk=0]="yk",t[t.iOt=1]="iOt",t[t.eOt=2]="eOt",t}({});function ah(t){return t?t.iAt?t.XE+"@"+t.iAt.Tn+"-"+(null!=(i=t.iAt.V)?i:""):""+t.XE:"";var i}function GY(t,i){if(i===t)return!0;if(i.XE!==t.XE)return!1;if(!t.iAt)return!0;if(i.iAt){const e=HY(t.iAt.Tn,t.iAt.V),s=HY(i.iAt.Tn,i.iAt.V);if(e[0]<=s[0])return void 0===e[1]||void 0!==s[1]&&e[1]>=s[1]}return!1}function XY(t,i){return t===i||t.XE===i.XE&&(t.iAt&&i.iAt?t.iAt.Tn===i.iAt.Tn&&t.iAt.V===i.iAt.V:t.iAt===i.iAt)}function jY(t){const i=!!t.sOt||void 0;return{o:t.o,nOt:t.nOt,uq:t.uq,rOt:t.rOt,ct:t.ct,hOt:t.hOt,sOt:i,oOt:t.aOt,uOt:t.cOt,dOt:t.dOt,lOt:t.lOt}}function QY(t,i){var e,s,n;return{q9:null!=(e=i.q9)?e:null==t?void 0:t.q9,W9:null!=(s=i.W9)?s:null==t?void 0:t.W9,fOt:null!=(n=i.fOt)?n:null==t?void 0:t.fOt}}async function KY(t,i,e,s,n){const r=i.filter(t=>nl(t,"audio")),h=i.filter(t=>nl(t,"video")),o=[],a=e.map(t=>async function(t,i,e){if(!t.Syt)return;if(!t.vOt)return;if(t.Hk!==ao.tOt)return;const s=YY(t.vOt);if(!s)return;if(s.$m===de)return{xS:s,OW:[],FW:void 0,GH:t.Syt,UW:[]};if(s.$m===zg&&t.vOt===Yg)return{xS:s,OW:[],FW:t.Syt,GH:void 0,UW:[]};{ol.cN("HLSDrmUtils","Fetching key uri "+t.Syt+".");const n=await i.vk({Yu:t.Syt,Xk:e});let r=await n.qT();return s.$m===Fg&&(r=function(t){const i=new DataView(t);return i.byteLength>=8&&i.getUint32(4)===sq?t:nq(t)}(r)),{xS:s,OW:[r],FW:void 0,GH:void 0,UW:[]}}}(t,s,n));var u;const c=function(t,i){if(0===i.length)return t;const e=t=>{const e=i.indexOf(t.xS.$m);return e>=0?e:i.length};return Xn(t,(t,i)=>e(t)-e(i))}((await Promise.all(a)).filter(it),null!=(u=null==t?void 0:t.preferredKeySystems)?u:[]);for(const i of c){const e=UG(null!=t?t:{},i.xS),s="cbcs";o.push({xS:i.xS,OW:i.OW,FW:i.FW,GH:i.GH,Vq:[{initDataTypes:[i.xS.Jm],audioCapabilities:VG(r,s,null==e?void 0:e.audioRobustness),videoCapabilities:VG(h,s,null==e?void 0:e.videoRobustness),persistentState:null==e?void 0:e.persistentState,distinctiveIdentifier:null==e?void 0:e.distinctiveIdentifier}],UW:i.UW})}return o}function YY(t){return t===Hg?ot:t===Ug?Jg:"com.apple.streamingkeydelivery"===t?$g:t===Yg?Xc:void 0}function JY(t){if("#"!==t[0])throw new m("HLSPlaylistParser - Could not extract M3U8 tag or comment: "+t);return t.split(":",1)[0]}function ZY(t){return"#"!==t[0]?t:t.split(":",1)[0]}function $Y(t){const i=t.indexOf(":");if(-1===i||t.length<i+1)throw new m("HLSPlaylistParser - Could not extract M3U8 parameter: "+t);return t.substring(i+1)}function tJ(t){const i=lc($Y(t));if(void 0===i)throw new m("HLSPlaylistParser - Could not extract M3U8 float parameter: "+t);return i}function iJ(t){const i={},e=/[:,] ?([A-Z0-9-]+)=([^",]+|"([^"]*)")/gi;let s=e.exec(t);for(;null!==s;){const n=s[1];let r;r=void 0!==s[3]?s[3]:s[2],null!==n?i[n]=r:ol.FLt(Ho,"Ignoring unparsable M3U8 attribute name: "+t+"."),s=e.exec(t)}return i}function eJ(t,i){const e=iJ(t);let s,n;try{s=e.URI?zd.Pm(e.URI,i):void 0,n=function(t){switch(t){case"AUDIO":return dl.Bk;case"VIDEO":return dl.Mk;case"SUBTITLES":return dl.HU;case"CLOSED-CAPTIONS":return dl.YLt}throw new m("HLSPlaylistParser - Could not parse M3U8 media type: "+t+".")}(e.TYPE)}catch(i){throw new m("HLSPlaylistParser - Could not parse #EXT-X-MEDIA tag: "+t+".")}const r=e["GROUP-ID"],h=e.LANGUAGE,o=e["ASSOC-LANGUAGE"],a=e.NAME,u="YES"===e.DEFAULT;let c="YES"===e.AUTOSELECT;const d="YES"===e.FORCED,l=e["INSTREAM-ID"],f=e.CHARACTERISTICS,v=e.CHANNELS;if(r||ol.FLt(Ho,"#EXT-X-MEDIA tag has no GROUP-ID attribute: "+t+"."),h||ol.FLt(Ho,"#EXT-X-MEDIA tag has no LANGUAGE attribute: "+t+"."),a||ol.FLt(Ho,"#EXT-X-MEDIA tag has no NAME attribute: "+t+"."),n===dl.YLt?(s&&ol.FLt(Ho,"#EXT-X-MEDIA tag of type CAPTIONS must not have a URI: "+t+"."),l?/^(CC[0-4])|(SERVICE([1-9]|[1-5][0-9]|6[0-3]))$/.test(l)||ol.FLt(Ho,"#EXT-X-MEDIA's INSTREAM-ID is invalid: "+t+"."):ol.FLt(Ho,"#EXT-X-MEDIA tag of type CAPTIONS must have an INSTREAM-ID attribute: "+t+".")):l&&ol.FLt(Ho,"#EXT-X-MEDIA tag must not have an INSTREAM-ID attribute if the TYPE is not CAPTIONS: "+t+"."),u&&!c&&(c=!0,e.AUTOSELECT&&ol.FLt(Ho,"#EXT-X-MEDIA tag with DEFAULT=YES attribute must have AUTOSELECT=YES attribute: "+t+".")),e.FORCED&&n!==dl.HU&&ol.FLt(Ho,"#EXT-X-MEDIA tag must not have a FORCED attribute if the TYPE is not SUBTITLES: "+t+"."),void 0===r||void 0===a)throw new m("HLSPlaylistParser - Could not parse #EXT-X-MEDIA tag: "+t+".");return{_Ot:o,X9:v,cLt:f,oLt:r,rLt:c,nLt:u,hLt:d,aLt:l,bs:h,l:a,Km:n,Syt:s}}function sJ(t,i,e){const s=iJ(t);let n,r,h;try{n=zd.Pm(e,i),h=function(t){if(void 0===t)return;const i=t.split("x"),e=Number(i[0]),s=Number(i[1]);if(S(e)||S(s))throw new m("HLSPlaylistParser - Could not parse RESOLUTION attribute: "+t+".");return{Ti:e,Mi:s}}(s.RESOLUTION),r=function(t){if(!t)return;let i,e,s;const n=t.split(",");for(const t of n){const n=t.trim();Xt(n,"mp4a")?i="mp4a.40.05"===n?"mp4a.40.5":"mp4a.40.02"===n?"mp4a.40.2":n:"ac-3"===n||"ec-3"===n||"flac"===n.toLowerCase()?i=n:Xt(n,"avc")||Xt(n,"hvc1")||Xt(n,"hev1")||Xt(n,"dvh")||Xt(n,"vp09")||Xt(n,"av01")?e=n:s=s?s+","+n:n}return{q9:i,W9:e,fOt:s}}(s.CODECS)}catch(i){throw new m("HLSPlaylistParser - Could not parse #EXT-X-STREAM-INF tag: "+t+".")}const o=lc(s.BANDWIDTH),a=lc(s["AVERAGE-BANDWIDTH"]),u=lc(s.SCORE),c=lc(s["FRAME-RATE"]),d=s["HDCP-LEVEL"],l=[];if(void 0!==s["ALLOWED-CPC"]){const t=s["ALLOWED-CPC"].split(",");l.push(...t.map(t=>{const i=t.split(":");return{keysystem:i[0],label:i[1]}}))}const f=s["VIDEO-RANGE"],v=s.AUDIO,_=s.VIDEO,g=s.SUBTITLES,p=s["CLOSED-CAPTIONS"];if(void 0===o?ol.FLt(Ho,"#EXT-X-STREAM-INF tag has no valid BANDWIDTH attribute: "+t+"."):void 0!==a&&a>o&&ol.FLt(Ho,"#EXT-X-STREAM-INF tag must have BANDWIDTH attribute higher or equal to AVERAGE-BANDWIDTH attribute: "+t+"."),r||ol.cN(Ho,"#EXT-X-STREAM-INF tag should have a CODECS attribute: "+t+"."),r&&r.W9&&void 0===h&&ol.cN(Ho,"#EXT-X-STREAM-INF tag should have a valid RESOLUTION attribute if it contains video codecs: "+t+"."),void 0===d||Ct(["TYPE-0","TYPE-1","NONE"],d)||ol.FLt(Ho,"#EXT-X-STREAM-INF tag has an invalid HDCP-LEVEL attribute: "+t+"."),void 0===f||Ct(["SDR","PQ","HLG"],f)||ol.FLt(Ho,"#EXT-X-STREAM-INF tag has an invalid VIDEO-RANGE attribute: "+t+"."),void 0===o)throw new m("HLSPlaylistParser - Could not parse #EXT-X-STREAM-INF tag: "+t+".");return{gOt:l,pOt:v,wyt:a,IW:o,mOt:p,Rrt:r,Olt:c,wOt:d,RRt:h,yyt:u,yOt:g,Syt:n,bOt:_,AOt:f}}function nJ(t,i){const e=iJ(t);if(!e.URI)throw new m("HLSPlaylistParser - Could not parse #EXT-X-I-FRAME-STREAM-INF tag: "+t+".");try{return sJ(t,i,e.URI)}catch(i){throw new m("HLSPlaylistParser - Could not parse #EXT-X-I-FRAME-STREAM-INF tag: "+t+".")}}function lc(t){const i=Number(t);return S(i)?void 0:i}function rJ(t,i){const e=iJ(t);let s,n;try{s=function(t){switch(t){case"NONE":return ao.pz;case"AES-128":return ao.$Lt;case"SAMPLE-AES":return ao.tOt;case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return t}throw new m("LLHLSPlaylistParser - Could not parse M3U8 key method: "+t+".")}(e.METHOD),n=e.URI?fJ(e.URI,i):void 0}catch(i){throw new m("HLSPlaylistParser - Could not parse #EXT-X-KEY tag: "+t+".")}const r=e.KEYFORMAT,h=e.IV,o=e.KEYFORMATVERSIONS;let a,u,c,d,l;if(s!==ao.pz){if(c=r||Yg,"SAMPLE-AES-CENC"===s||"SAMPLE-AES-CTR"===s){if(YY(c)!==ot)throw new m("HLSPlaylistParser - #EXT-X-KEY tag with METHOD="+s+" is only compatible with Widevine.");a=ao.tOt}else a=s;u=n,d=h?um(h):void 0,l=o?o.split("/").map(t=>Number(t)):[1]}else a=ao.pz,(n||r||o||h)&&ol.FLt(Ho,"#EXT-X-KEY tag with METHOD=NONE must not have additional attributes: "+t+".");return{Hk:a,Syt:u,SOt:d,vOt:c,TOt:l}}function hJ(t){const i=$Y(t);if(!i)return[void 0,""];const[e,s]=i.split(",");return[lc(e),s]}function oJ(t,i){const e=t.split("@"),s=lc(e[0]),n=e.length>1?lc(e[1]):i;if(void 0===s||void 0===n)throw new m("HLSPlaylistParser - Could not parse #EXT-X-BYTERANGE tag: "+t+".");return{Tn:n,V:s}}function aJ(t){if(void 0!==t)return oJ(t,void 0)}function uJ(t,i){return oJ($Y(t),i)}function cJ(t,i){const e=iJ(t);try{const t=fJ(e.URI,i);return{XE:t,iAt:aJ(e.BYTERANGE)}}catch(i){throw new m("HLSPlaylistParser - Could not parse #EXT-X-MAP tag: "+t+".")}}function dJ(t){const i=$Y(t);if(!i)throw new m("HLSPlaylistParser - Could not parse #EXT-X-PROGRAM-DATE-TIME tag: "+t+".");const e=new Date(i.trim());if(!Qf(e))throw new m("HLSPlaylistParser - Could not parse #EXT-X-PROGRAM-DATE-TIME tag: "+t+".");return e}function lJ(t){const i=iJ(t),e=i["START-DATE"],s=i["END-DATE"],n=lc(i["PLANNED-DURATION"]);let r,h,o,a=lc(i.DURATION);void 0!==i["SCTE35-CMD"]&&(r=um(i["SCTE35-CMD"]).buffer),i["SCTE35-IN"]&&(h=um(i["SCTE35-IN"]).buffer),i["SCTE35-OUT"]&&(o=um(i["SCTE35-OUT"]).buffer);const u="YES"===i["END-ON-NEXT"],c=function(t){const i={};for(const e of w.keys(t)){const s=t[e];void 0!==s&&Xt(e,"X-")&&(i[e]=s)}return i}(i),d=i.ID,l=i.CLASS;let f,v;if(void 0===e)ol.FLt(Ho,"Could not parse #EXT-X-DATERANGE tag without START-DATE attribute: "+e+".");else if(f=new Date(e),v=void 0!==s?new Date(s):void 0,Qf(f)||ol.FLt(Ho,"Could not parse EXT-X-DATERANGE tag with invalid START-DATE attribute: "+f+"."),void 0!==a){const i=new Date(f.getTime()+1e3*a);v?v.getTime()!==i.getTime()&&(ol.FLt(Ho,"DURATION and END-DATE attributes of #EXT-X-DATERANGE tag are not aligned, updating the END-DATE: "+t+"."),v=i):v=i}else v&&(a=(f.getTime()-v.getTime())/1e3);if(u&&(i.CLASS||ol.FLt(Ho,"Could not parse #EXT-X-DATERANGE tag with END-ON-NEXT attribute without CLASS attribute: "+t+"."),i.DURATION&&ol.FLt(Ho,"Could not parse #EXT-X-DATERANGE tag with END-ON-NEXT attribute with DURATION attribute: "+t+"."),v&&ol.FLt(Ho,"Could not parse #EXT-X-DATERANGE tag with END-ON-NEXT attribute with END-DATE attribute: "+t+".")),void 0===d&&ol.FLt(Ho,"Could not parse #EXT-X-DATERANGE tag without valid ID attribute: "+t+"."),void 0===d||void 0===f)throw new m("HLSPlaylistParser - Could not parse #EXT-X-DATERANGE tag: "+t+".");return{o:d,nOt:l,uq:f,rOt:v,ct:a,hOt:n,cOt:r,lOt:h,dOt:o,sOt:u,aOt:c}}function fJ(t,i){if(void 0===t)throw new m("HLSPlaylistParser - Unable to parse URL from string: "+t+".");return zd.Pm(t,i)}function vJ(t,i){const e=iJ(t),s=lc(e.DURATION),n=fJ(e.URI,i),r=aJ(e.BYTERANGE),h="YES"===e.INDEPENDENT,o="YES"===e.GAP;if(void 0===s)throw new m("HLSPlaylistParser - Unable to parse #EXT-X-PART without valid DURATION: "+t);return{ct:s,Syt:{XE:n,iAt:r},kOt:h,EOt:o}}function _J(t){const i=iJ(t);return{xOt:"YES"===i["CAN-BLOCK-RELOAD"],POt:lc(i["CAN-SKIP-UNTIL"]),IOt:"YES"===i["CAN-SKIP-DATERANGES"],COt:lc(i["HOLD-BACK"]),ROt:lc(i["PART-HOLD-BACK"])}}function gJ(t,i){const e=iJ(t);if(void 0===e.URI)throw new m("HLSPlaylistParser - Could not parse #EXT-X-RENDITION-REPORT: "+t+".");const s=fJ(e.URI,i),n=lc(e["LAST-MSN"]),r=lc(e["LAST-PART"]);if(void 0===n)throw new m("HLSPlaylistParser - Could not parse #EXT-X-RENDITION-REPORT: "+t+".");return{Syt:s,DOt:n,NOt:r}}function pJ(t,i){var e;const s=iJ(t),n=lc(s["SKIPPED-SEGMENTS"]),r=null==(e=s["RECENTLY-REMOVED-DATERANGES"])?void 0:e.split("\t");if(void 0===n)throw new m("HLSPlaylistParser - Could not parse #EXT-X-SKIP tag without valid SKIPPED-SEGMENTS attribute: "+t+".");return{BOt:n,MOt:r,LOt:i}}function mJ(t){const i=lc(iJ(t)["PART-TARGET"]);if(void 0===i)throw new m("HLSPlaylistParser - Could not parse #EXT-X-PART-TARGET-DURATION tag: "+t+".");return i}function wJ(t){switch($Y(t)){case"VOD":return zY.iOt;case"EVENT":return zY.eOt;default:return ol.FLt(Ho,"Found #EXT-X-PLAYLIST-TYPE tag with invalid value: "+t+"."),zY.yk}}function yJ(t,i){const e=iJ(t);let s,n;try{s=function(t){if(void 0===t)throw new m("HLSPlaylistParser - Could not parse PRELOAD-HINT type: "+t+".");if("MAP"===t)return Ah.JLt;if("PART"===t)return Ah.ZLt;throw new m("HLSPlaylistParser - Could not parse PRELOAD-HINT type: "+t+".")}(e.TYPE),n=fJ(e.URI,i)}catch(i){throw new m("HLSPlaylistParser - Could not parse #EXT-X-PRELOAD-HINT tag: "+t+".")}const r=lc(e["BYTERANGE-START"]),h=lc(e["BYTERANGE-LENGTH"]);let o;return void 0===r&&void 0===h||(o={Tn:r||0,V:h}),{Km:s,Syt:{XE:n,iAt:o}}}r(),r(),r();var bJ=class t{OOt(){const t=this.FOt[this.UOt];return this.UOt+=1,t}VOt(){return this.FOt[this.UOt]}Fy(){const i=new t("");return i.UOt=0,i.FOt=this.FOt.slice(this.UOt),i}static HOt(t){if(!t)return[];return t.split(/[\r\n]+/).map(t=>t.trim()).filter(t=>t)}constructor(i){this.UOt=0,this.FOt=void 0,this.FOt=t.HOt(i)}};function AJ(t,i,e){const s=t.Syt;let n=t.ED,r=t.WOt,h=t.Tn;switch(e){case"#EXT-X-VERSION":n=function(t){const i=tJ(t);return S(i)?(ol.FLt(Ho,"Playlist version is NaN: "+t+"."),1):i}(i);break;case"#EXT-X-INDEPENDENT-SEGMENTS":r=!0;break;case"#EXT-X-START":h=function(t){const i=iJ(t),e=lc(i["TIME-OFFSET"]);if(void 0===e)throw new m("HLSPlaylistParser - #EXT-X-START is missing a TIME-OFFSET: "+t+".");return{qOt:e,zOt:"YES"===i.PRECISE}}(i);break;case"#EXT-X-DEFINE":ol.FLt(Ho,"Ignoring unsupported #EXT-X-DEFINE: "+i+".");break;default:ol.cN(Ho,"Ignoring unrecognized line or comment: "+i+".")}return{Syt:s,ED:n,WOt:r,Tn:h}}function SJ(t,i){return t.map(t=>t.Hk===ao.pz||t.SOt?t:Y({},t,{SOt:TJ(i)}))}function TJ(t){const i=new DataView(new ArrayBuffer(16)),e=new oi;return e.Ly(8),Gp(i,e,yo.fromNumber(t)),new j(i.buffer)}function kJ(t,i,e){ol.cN(Ho,"Parsing M3U8 playlist at "+t+".");const s=new bJ(e);if("#EXTM3U"!==s.OOt())throw new m("HLSPlaylistParser - Could not parse M3U8 playlist. Playlist does not start with #EXTM3U.");return function(t){return/^#EXT-X-(MEDIA|STREAM-INF|I-FRAME-STREAM-INF|SESSION-DATA|SESSION-KEY):/m.test(t)}(e)?function(t,i){let e;try{e=zd.Pm(t)}catch(i){throw ol.FLt(Ho,"The master playlist has no valid base URI: "+t+"."),new m("HLSPlaylistParser - Could not parse HLS master playlist: "+t)}let s={Syt:e,WOt:void 0,Tn:void 0,ED:void 0};const n=[],r=[],h=[],o=[];for(;;){const t=i.OOt();if(!t)break;try{const a=JY(t);switch(a){case"#EXT-X-MEDIA":{const i=eJ(t,e);n.push(i);break}case"#EXT-X-STREAM-INF":{const s=sJ(t,e,i.OOt());r.push(s);break}case"#EXT-X-I-FRAME-STREAM-INF":{const i=nJ(t,e);h.push(i);break}case"#EXT-X-SESSION-DATA":ol.FLt(Ho,"Ignoring unsupported #EXT-X-SESSION-DATA: "+t+".");break;case"#EXT-X-SESSION-KEY":{const i=rJ(t,e);o.push(i);break}default:s=AJ(s,t,a)}}catch(i){ol.FLt(Ho,"Ignoring unparsable line: "+t,i)}}let a=s.ED;var u;const c=null!=(u=s.WOt)&&u,d=s.Tn;return void 0===a&&(ol.FLt(Ho,"The playlist has no #EXT-X-VERSION, assuming version is 2."),a=2),a>=8&&(r.some(t=>void 0!==t.yyt)||h.some(t=>void 0!==t.yyt))&&(r.some(t=>void 0===t.yyt)||h.some(t=>void 0===t.yyt))&&ol.FLt(Ho,"If one master playlist variant stream has a SCORE, all variants should have it."),{Syt:e,ED:a,WOt:c,Tn:d,GOt:h,UW:o,$D:n,XOt:r}}(t,s):function(t,i,e){let s={Syt:t,WOt:void 0,Tn:void 0,ED:void 0};const n=[];let r,h,o,a,u=!1,c=!1;const d=[],l=Ba();let f,v,_,g,p,w,y,b,A,S=[],T=[],k=!1,E=!1;const x=[],P=[];let I,C,R,D,N,B=0,M=!1,L=zY.yk,O=!1,F=0;try{N=zd.Pm(t)}catch(i){throw ol.FLt(Ho,"The media playlist has no valid base URI: "+t+".",i),new m("HLSPlaylistParser - Could not parse HLS media playlist.")}const U=e.Fy();for(;void 0===C||void 0===R;){const t=U.OOt();if(!t)break;try{switch(ZY(t)){case"#EXT-X-MEDIA-SEQUENCE":C=tJ(t);break;case"#EXT-X-DISCONTINUITY-SEQUENCE":R=tJ(t)}}catch(i){ol.FLt(Ho,"Ignoring unparsable line: "+t,i)}}void 0===C&&(ol.cN(Ho,"#EXT-X-MEDIA-SEQUENCE tag is missing, assuming first segment media sequence number is 0."),C=0),void 0===R&&(ol.cN(Ho,"#EXT-X-DISCONTINUITY-SEQUENCE tag is missing, assuming first segment discontinuity sequence number is 0."),R=0);let V=C,H=R;for(;;){const t=e.OOt();if(!t)break;let i=!1;try{const e=ZY(t);switch(e){case"#EXTINF":i=!0,[f,v]=hJ(t);break;case"#EXT-X-BYTERANGE":i=!0,_=uJ(t,B),_&&(B=_.Tn+_.V);break;case"#EXT-X-DISCONTINUITY":i=!0,k=!0,H++;break;case"#EXT-X-KEY":{var W;i=!0;const e=rJ(t,N);if(e.Hk===ao.pz){l.clear(),A=void 0;break}var q;const s=null!=(q=null==(W=e.vOt)?void 0:W.toString())?q:"identity";l.set(s,e),e.Hk===ao.$Lt&&(A=e);break}case"#EXT-X-MAP":i=!0,p=cJ(t,N),w=A;break;case"#EXT-X-PROGRAM-DATE-TIME":i=!0,y=dJ(t);break;case"#EXT-X-GAP":i=!0,E=!0;break;case"#EXT-X-BITRATE":i=!0,b=tJ(t);break;case"#EXT-X-TARGETDURATION":r=tJ(t);break;case"#EXT-X-DATERANGE":{const i=lJ(t);n.push(i);break}case"#EXT-X-PART":{i=!0;const e=vJ(t,N);T.push(e);break}case"#EXT-X-PRELOAD-HINT":{const i=yJ(t,N);x.push(i);break}case"#EXT-X-SKIP":{d.length>0&&ol.FLt(Ho,"#EXT-X-SKIP must appear before any #EXTINF tags."),i=!0;const e=pJ(t,V);F=e.BOt,D=e.MOt,V+=e.BOt;break}case"#EXT-X-SERVER-CONTROL":{const i=_J(t);u=i.xOt,h=i.POt,c=i.IOt,o=i.COt,a=i.ROt;break}case"#EXT-X-RENDITION-REPORT":{const i=gJ(t,N);P.push(i);break}case"#EXT-X-PART-INF":I=mJ(t);break;case"#EXT-X-MEDIA-SEQUENCE":i&&ol.FLt(Ho,"#EXT-X-MEDIA-SEQUENCE must appear before any media segment tags.");break;case"#EXT-X-DISCONTINUITY-SEQUENCE":i&&ol.FLt(Ho,"#EXT-X-DISCONTINUITY-SEQUENCE must appear before any media segment tags.");break;case"#EXT-X-ENDLIST":M=!0;break;case"#EXT-X-PLAYLIST-TYPE":L=wJ(t);break;case"#EXT-X-I-FRAMES-ONLY":O=!0;break;default:if(Xt(e,"#"))s=AJ(s,t,e);else{g=zd.Pm(t,N);const i=p?{Syt:p,jOt:w}:void 0,e={UW:SJ(xg(l),V),LU:S,QOt:T,ct:f,gq:v,KOt:k,Syt:{iAt:_,XE:g},YOt:i,JOt:y,EOt:E,ZOt:b,LOt:V,$Ot:H};d.push(e),V++,S=[],T=[],f=void 0,v=void 0,k=!1,_=void 0,g=void 0,y=void 0,E=!1,b=void 0}}}catch(i){ol.FLt(Ho,"Ignoring unparsable line: "+t,i)}}if(T.length){const t=p?{Syt:p,jOt:A}:void 0,i={UW:SJ(xg(l),V),LU:S,QOt:T,ct:f,gq:v,KOt:k,Syt:void 0,YOt:t,JOt:y,EOt:E,ZOt:b,LOt:V,$Ot:H};d.push(i)}let z=s.ED;var G;const X=null!=(G=s.WOt)&&G,j=s.Tn;void 0===z&&(ol.FLt(Ho,"The media playlist has no #EXT-X-VERSION tag, assuming version is 2."),z=2),void 0===r&&ol.FLt(Ho,"Could not parse the HLS media playlist: no #EXT-X-TARGET-DURATION tag was found.");const Q=d.length,K=Q>0;K||ol.FLt(Ho,"The HLS media playlist contains no segments.");const Y=K&&d[Q-1].QOt.length>0;return Y&&void 0===I&&ol.FLt(Ho,"Could not parse the HLS media playlist: no #EXT-X-PART-TARGET-DURATION tag was found, but it is required when some or all segments contain parts."),Y&&void 0===a&&ol.FLt(Ho,"Could not parse the HLS media playlist: The #EXT-X-SERVER-CONTROL tag has no PART-HOLDBACK attribute, but it is required when some or all segments contain parts."),{xOt:u,POt:h,IOt:c,tFt:n,$Ot:R,iFt:M,WOt:X,COt:o,eFt:O,LOt:C,BOt:F,ROt:a,HLt:I,sFt:L,nFt:x,MOt:D,rFt:P,hFt:r,bct:d,Tn:j,Syt:N,oFt:i,ED:z}}(t,i,s)}r(),r();var EJ=class{get Syt(){return this.sLt.Syt}get Rrt(){return this.bRt}set Rrt(t){this.bRt=t?PJ(t):void 0,this.aFt=function(t,i){return!(void 0!==(null==t?void 0:t.q9)&&void 0===(null==i?void 0:i.q9)||void 0!==(null==t?void 0:t.W9)&&void 0===(null==i?void 0:i.W9))}(this.uFt,this.bRt)}get cFt(){return this.aFt}get VLt(){return this.dFt}get lFt(){return this.dFt.filter(t=>t.Km===dl.Bk)}get fFt(){return this.dFt.filter(t=>t.Km===dl.Mk)}get vFt(){return this.dFt.filter(t=>t.Km===dl.HU)}get _Ft(){return this.dFt.filter(t=>t.Km===dl.YLt)}gFt(t){for(const i of this.dFt){const e=i.sLt.gFt(t);if(void 0!==e)return e}}pFt(t){for(const i of this.dFt){const e=i.sLt.pFt(t);if(void 0!==e)return e}}mFt(t){_e(this.dFt,t)}constructor(t,i,e){var s,n,r,h;this.o=xJ++,this.sLt=void 0,this.IW=void 0,this.yyt=void 0,this.RRt=void 0,this.Olt=void 0,this.pOt=void 0,this.bOt=void 0,this.yOt=void 0,this.mOt=void 0,this.wyt=void 0,this.uFt=void 0,this.bRt=void 0,this.aFt=!1,this.dFt=[],this.sLt=i,this.IW=t.IW,this.wyt=t.wyt,this.yyt=t.yyt,this.uFt=t.Rrt?PJ(t.Rrt):void 0,this.bRt=this.uFt,this.RRt=t.RRt,this.Olt=t.Olt,this.pOt=null!=(s=t.pOt)?s:"wFt"+this.o,this.bOt=null!=(n=t.bOt)?n:"yFt"+this.o,this.yOt=null!=(r=t.yOt)?r:"bFt"+this.o,this.mOt=null!=(h=t.mOt)?h:"AFt"+this.o,this.dFt=e}},xJ=0;function PJ(t){return Y({},t,{W9:t.W9?rb(t.W9):void 0})}r(),r(),r();var IJ=class{get CO(){var t;return this.HO+(null!=(t=this.SFt)?t:0)}get TFt(){return this.kFt}get EFt(){return this.xFt}get UW(){return this.PFt.UW}IFt(t,i,e){this.HO=t,this.kFt=i,this.xFt=e}constructor(t,i,e,s,n,r){this.PFt=void 0,this.CFt=void 0,this.ct=void 0,this.Syt=void 0,this.kOt=void 0,this.EOt=void 0,this.kFt=void 0,this.xFt=void 0,this.HO=void 0,this.Get=void 0,this.SFt=void 0,this.PFt=t,this.CFt=i,this.HO=e,this.kFt=s,this.xFt=n,this.ct=r.ct,this.Syt=r.Syt,this.kOt=r.kOt,this.EOt=r.EOt}},CJ=class{get CO(){var t;return this.HO+(null!=(t=this.RFt)?t:0)}get DFt(){return this.HO}get ct(){return this.Zb}get Syt(){return this.NFt}get TFt(){return this.kFt}get EFt(){return this.xFt}get QOt(){return this.BFt}get MFt(){return this.LFt}get RO(){var t;return this.CO+(null!=(t=this.Zb)?t:this.LFt)}set SFt(t){this.RFt=t;for(const i of this.BFt)i.SFt=t}get SFt(){return this.RFt}OFt(t){return this.BFt[t]}FFt(t){for(let i=0;i<this.BFt.length;i++){const e=this.BFt[i],s=e.CO,n=s+e.ct;if(s<=t&&t<=n)return t===n&&i+1<this.BFt.length?this.BFt[i+1]:e}}UFt(t){for(let i=this.BFt.length-1;i>=0;i--){const e=this.BFt[i];if(e.CO<=t)return e}}VFt(t){let i=this.UFt(t);for(;i&&!i.kOt&&i.CFt>0;)i=this.OFt(i.CFt-1);return i}IFt(t,i,e){const s=t.QOt.length!==this.BFt.length||e!==this.xFt;this.kFt=i,this.xFt=e,this.Zb=t.ct,null!=this.JOt||(this.JOt=t.JOt),void 0===this.NFt&&(this.NFt=t.Syt),s&&this.HFt(t.QOt)}HFt(t){this.BFt.length>t.length&&(this.BFt.length=t.length);let i=0;for(let e=0;e<t.length;e++){const s=t[e],n=this.kFt&&0===e,r=this.xFt&&e===t.length-1,h=this.HO+i;if(e<this.BFt.length)this.BFt[e].IFt(h,n,r);else{const t=new IJ(this,e,h,n,r,s);t.SFt=this.RFt,this.BFt.push(t)}i+=s.ct}this.LFt=i}WFt(){Wt(this.BFt),this.LFt=0}constructor(t,i,e,s,n){this.Zb=void 0,this.JOt=void 0,this.NFt=void 0,this.YOt=void 0,this.EOt=void 0,this.kFt=void 0,this.xFt=void 0,this.LOt=void 0,this.KOt=void 0,this.$Ot=void 0,this.UW=void 0,this.HO=void 0,this.Get=void 0,this.BFt=[],this.LFt=0,this.RFt=void 0,this.HO=t,this.YOt=n.YOt,this.kFt=e,this.xFt=s,this.Zb=n.ct,this.JOt=n.JOt,this.NFt=n.Syt,this.EOt=n.EOt,this.LOt=n.LOt,this.KOt=n.KOt,this.$Ot=i,this.UW=n.UW,this.HFt(n.QOt)}};r();var RJ=function(t){return t.qFt="YES",t.zFt="v2",t}({});r();var Bc=class extends Qr{};r(),r(),r();var DJ=class extends Oh{get Ca(){return this.hu||(this.hu=function(t){return Gi(U(t),{get content(){return t.U},get class(){return t.nOt},get startDate(){return t.uq},get endDate(){return t.rOt},get duration(){return t.ct},get plannedDuration(){return t.hOt},get endOnNext(){return t.sOt},get scte35Cmd(){return t.uOt},get scte35Out(){return t.dOt},get scte35In(){return t.lOt},get customAttributes(){return t.oOt}})}(this)),this.hu}get nOt(){return this.GFt}get uq(){return this.XFt}get rOt(){return this.jFt}get ct(){return this.Zb}get hOt(){return this.QFt}get sOt(){return this.KFt}get uOt(){return this.YFt}get dOt(){return this.JFt}get lOt(){return this.ZFt}get oOt(){return this.$Ft}er(t){let i=!1;var e;(void 0===this.GFt&&void 0!==t.nOt&&(i=!0,this.GFt=t.nOt),void 0===this.jFt&&void 0!==t.rOt&&(i=!0,this.jFt=t.rOt),void 0===this.Zb&&void 0!==t.ct&&(i=!0,this.Zb=t.ct),void 0===this.QFt&&void 0!==t.hOt&&(i=!0,this.QFt=t.hOt),!this.KFt&&t.sOt&&(i=!0,this.KFt=t.sOt),i=this.updateCustomAttributes(t,i),void 0===this.YFt&&void 0!==t.uOt&&(i=!0,this.YFt=t.uOt),void 0===this.JFt&&void 0!==t.dOt&&(i=!0,this.JFt=t.dOt),void 0===this.ZFt&&void 0!==t.lOt&&(i=!0,this.ZFt=t.lOt),this.tUt(),this.iUt(),this.eUt(),i)&&(this.So(new bE(this)),null==(e=this.WO)||e.So(new Oe(this)))}updateCustomAttributes(t,i){let e=i;if(t.oOt)for(const i of w.keys(t.oOt))void 0===this.$Ft[i]&&(e=!0,this.$Ft[i]=t.oOt[i]);return e}tUt(){this.Zb&&!this.jFt&&(this.jFt=new Date(this.XFt.getTime()+rn(this.Zb)))}iUt(){this.jFt&&!this.Zb&&(this.Zb=Kf(this.jFt.getTime()-this.XFt.getTime()))}eUt(){this.zO===1/0&&(this.jFt||this.Zb)&&(this.zO=NJ(this.HO,this.Zb,this.XFt,this.jFt))}constructor(t,i){super(i,NJ(i,t.ct,t.uq,t.rOt),void 0,!1,t.o),this.GFt=void 0,this.XFt=void 0,this.jFt=void 0,this.Zb=void 0,this.QFt=void 0,this.KFt=void 0,this.$Ft=void 0,this.YFt=void 0,this.JFt=void 0,this.ZFt=void 0,this.GFt=t.nOt,this.XFt=t.uq,this.jFt=t.rOt,this.Zb=t.ct,this.QFt=t.hOt,this.KFt=Boolean(t.sOt),this.$Ft=t.oOt||{},this.YFt=t.uOt,this.JFt=t.dOt,this.ZFt=t.lOt,this.tUt(),this.iUt()}};function NJ(t,i,e,s){return it(i)?t+i:s?t+(Kf(s.getTime())-Kf(e.getTime())):1/0}var BJ=class extends mL{er(t,i){MJ(this,LJ(t),i)}nV(t){OJ(this.L.NI,t),super.nV(t)}constructor(){super(void 0,void 0,nh.DATE_RANGE)}};function MJ(t,i,e){const s=t.L.NI;for(let e=s.length-1;e>=0;e--){const n=s[e],r=hh(i,t=>t.o===n.o);r?n.er(r):t.XU(n)}for(const s of i){const i=s.uq;if(void 0!==i&&!t.k5(s.o)){const n=e(i),r=new DJ(s,n);OJ(t.L.NI,r),t.nV(r)}}}function LJ(t){const i=Ba(),e=[];for(const s of t)if(i.has(s.o)){const t=i.get(s.o),e=Y({},t,ES(s),{oOt:Y({},t.oOt,s.oOt)});i.set(s.o,e)}else i.set(s.o,s),e.push(s.o);return e.map(t=>i.get(t))}function OJ(t,i){const e=dr(t,t=>t.nOt===i.nOt);e&&e.sOt&&e.er({o:e.o,rOt:i.uq})}var FJ=String.fromCharCode(95),UJ=FJ+"HLS_msn",VJ=FJ+"HLS_part",HJ=FJ+"HLS_skip",WJ="HLSMediaPlaylist",qJ=class{get iFt(){if(0===this.Dbt.length)return!1;return this.Dbt[this.Dbt.length-1].EFt}get ct(){return this.Zb}get kP(){return this.H4}get sUt(){return this.nUt}get WLt(){return this.rUt}get HLt(){return this.hUt}get COt(){return this.iFt?0:this.oUt?this.oUt:this.rUt?3*this.rUt:void 0}get ROt(){var t;return null!=(t=this.aUt)?t:this.hUt?3*this.hUt:void 0}get xOt(){return this.uUt}get POt(){return this.cUt}get IOt(){return this.dUt}get sFt(){return this.lUt}get fUt(){return void 0!==this.HLt}get vUt(){if(this.iFt)return!0;const t=zd.Mg()/1e3,i=this._Ut,e=this.gUt;return void 0!==i&&t-i<e}get _Ut(){return this.pUt}get mUt(){if(this.wUt)return zd.Mg()/1e3-this.wUt}get SFt(){return this.RFt}get gUt(){var t;return null!=(t=this.rUt)?t:void 0===this.pUt?5:1}get bct(){return this.Dbt}get tFt(){return this.yUt}get bUt(){return this.AUt}set bUt(t){this.AUt=t}get Tn(){return this.UU}get SUt(){return this.TUt}BLt(t){if(!t)return this.Syt;const i=zd.Dh(this.Syt);return void 0!==t.LOt&&i.searchParams.append(UJ,String(t.LOt)),void 0!==t.kUt&&i.searchParams.append(VJ,String(t.kUt)),void 0!==t.uD&&i.searchParams.append(HJ,t.uD),i.href}Oat(t){const i=this.EUt(t);return i<0?void 0:this.Dbt[i]}EUt(t){const i=this.Dbt;if(0===i.length)return-1;const e=t-i[0].LOt;return e<0||e>=i.length?-1:e}xUt(t){if(0===this.Dbt.length)return;const i=jq(zJ.Bg,this.Dbt,t);if(!(i<0)){const e=this.Dbt[i];return t===e.RO&&i+1<this.Dbt.length?this.Dbt[i+1]:e}{const i=this.Dbt[this.Dbt.length-1];if(t===i.RO)return i}}PUt(t){if(0===this.Dbt.length)return;const i=this.Dbt[0];if(t<i.RO)return i;const e=this.Dbt[this.Dbt.length-1];return t>=e.CO?e:this.xUt(t)}gFt(t){const i=this.PUt(t);if(void 0===i)return;for(let e=i.LOt-this.Dbt[0].LOt;e>=0;e--){const i=this.Dbt[e];if(void 0!==i.JOt)return new Date(i.JOt.getTime()+1e3*(t-i.CO))}}pFt(t){let i;for(const e of this.Dbt)if(GJ(e))if(void 0===i)i=e;else{if(!(e.JOt.getTime()<=t.getTime()))break;i=e}if(void 0!==i)return i.CO+(t.getTime()-i.JOt.getTime())/1e3}IUt(t){switch(t){case Ah.JLt:return this.CUt;case Ah.ZLt:return this.RUt;default:return}}IFt(t){var i;void 0===this.rUt&&(this.rUt=null!=(i=t.hFt)?i:this.DUt(t));void 0===this.oUt&&void 0!==t.COt&&(this.oUt=t.COt),void 0===this.hUt&&void 0!==t.HLt&&(this.hUt=t.HLt),void 0===this.aUt&&void 0!==t.ROt&&(this.aUt=t.ROt),this.uUt=t.xOt,this.cUt=t.POt,this.dUt=t.IOt,this.lUt=t.sFt,this.Lbt(t),this.NUt(t);const e=hh(t.nFt,t=>t.Km===Ah.JLt),s=hh(t.nFt,t=>t.Km===Ah.ZLt);this.CUt=e?{Syt:e.Syt,Km:e.Km,$Ot:t.$Ot}:void 0,this.RUt=s?{Syt:s.Syt,Km:s.Km,$Ot:t.$Ot}:void 0,this.pUt=zd.Mg()/1e3;const n=this.H4.An(this.H4.V-1);this.BUt();const r=this.H4.An(this.H4.V-1);(!this.wUt||r-n>0)&&(this.wUt=this.pUt),null!=this.UU||(this.UU=t.Tn)}BUt(){this.nUt=this.MUt(),this.H4=this.LUt(this.nUt),this.Zb=this.OUt()}MUt(){const t=this.bct;if(0===t.length)return Uo.rL();const i=t[0].CO,e=t[t.length-1].RO;return new Uo([i,e])}LUt(t){if(0===t.V||this.iFt)return t;const i=t.Tn(0),e=t.An(0)-this.ISt;return e<i?Uo.sL(i):new Uo([i,e])}get ISt(){return this.iFt?0:null!=(e=null!=(i=null!=(t=this.FUt)?t:this.ROt)?i:this.COt)?e:0;var t,i,e}OUt(){return 0===this.Dbt.length?0:this.iFt?$l(this.Dbt,t=>{var i;return null!=(i=t.ct)?i:t.MFt}):1/0}DUt(t){let i;for(const e of t.bct)if(void 0!==e.ct){const t=_.max(1,_.round(e.ct));(void 0===i||i<t)&&(i=t)}if(void 0===i)throw new m("HLSModel - Could not determine required segment target duration.");return i}Lbt(t){if(0===t.bct.length)return Wt(this.Dbt),void this.UUt();const i=this.VUt(t);if(!i)return;let e,s,n;i.HUt>0&&this.Dbt.splice(0,i.HUt);const r=t.BOt;if(r>0){if(r>this.Dbt.length)throw new Bc("New playlist skips over missing segments.");const i=this.Dbt[r-1];if(void 0===i.ct)throw new Bc("New playlist skips over an incomplete segment.");e=i.DFt+i.ct,n=i.$Ot-t.$Ot,s=r;for(let t=0;t<r;t++)this.Dbt[t].WFt()}else e=i.WUt,n=0,s=0;for(let i=0;i<t.bct.length;i++,s++){const r=t.bct[i],h=0===i,o=t.iFt&&i===t.bct.length-1,a=r.ct,u=r.$Ot+n;if(s<this.Dbt.length){const t=this.Dbt[s];0,t.IFt(r,h,o)}else{let t=r;if(this.Dbt.length>0&&void 0===t.YOt){t=Y({},t,{YOt:this.Dbt[this.Dbt.length-1].YOt})}const i=new CJ(e,u,h,o,t);i.SFt=this.RFt,this.Dbt.push(i)}void 0!==a&&(e+=a)}}VUt(t){if(0===this.Dbt.length)return{HUt:0,WUt:0};const i=this.Dbt[0].LOt,e=this.Dbt[this.Dbt.length-1].LOt,s=t.bct[0].LOt-t.BOt,n=t.bct[t.bct.length-1].LOt;let r=0,h=0;if(s<i){const e=this.bct[0].JOt,n=t.bct[0].JOt;if(!(e&&n&&e<n))return void ol.FLt(WJ,"Ignoring older playlist (first media sequence number is "+s+", but previous playlist already started at "+i+")");r=this.Dbt.length,this.UUt()}else{if(n<e)return void ol.FLt(WJ,"Ignoring older playlist (last media sequence number is "+n+", but previous playlist already ended at "+e+")");if(e<s){var o;h=null!=(o=function(t,i){const e=dr(t,t=>void 0!==t.JOt);if(void 0===e)return;const s=function(t){let i=0;for(const s of t){if(s.KOt)return;if(s.JOt)return[s,i];var e;i+=null!=(e=s.ct)?e:0}return}(i.bct);if(void 0===s)return;const[n,r]=s;if(e.$Ot!==n.$Ot)return;const h=(n.JOt.getTime()-e.JOt.getTime())/1e3;return e.DFt+h-r}(this.Dbt,t))?o:function(t,i,e){const s=t[t.length-1];var n;const r=null!=(n=s.ct)?n:_.max(e,s.MFt),h=e*(i-s.LOt-1);return s.DFt+r+h}(this.Dbt,s,this.rUt),ol.OLt(WJ,"New playlist (starting at "+s+") is entirely after previous playlist (ending at "+e+"), resetting playlist and restarting at "+h+"s"),r=this.Dbt.length,this.UUt()}else{0;const t=tt(this.Dbt,t=>t.LOt===s);0,h=this.Dbt[t].DFt,t>0&&(r=t)}}return{HUt:r,WUt:h}}NUt(t){let i=t.tFt.map(jY);if(t.IOt&&t.oFt.uD===RJ.zFt&&(i=this.yUt.concat(i)),this.yUt=LJ(i),t.MOt)for(const i of t.MOt){const t=tt(this.yUt,t=>t.o===i);t>=0&&Ra(this.yUt,t)}}qUt(t,i){if(this.RFt!==t){this.RFt=t;for(const t of this.Dbt)t.SFt=this.RFt;this.BUt()}this.TUt=i}UUt(){this.RFt=void 0,this.TUt=void 0}constructor(t,i,e){this.Syt=void 0,this.pUt=void 0,this.wUt=void 0,this.CUt=void 0,this.RUt=void 0,this.rUt=void 0,this.hUt=void 0,this.oUt=void 0,this.aUt=void 0,this.Dbt=[],this.yUt=[],this.RFt=void 0,this.uUt=!1,this.cUt=void 0,this.dUt=!1,this.lUt=zY.yk,this.H4=Uo.rL(),this.nUt=Uo.rL(),this.Zb=void 0,this.AUt=-1/0,this.UU=void 0,this.FUt=void 0,this.TUt=void 0,this.Syt=t,this.UU=i,this.FUt=e}},zJ=class t{static get Bg(){return null!=this.Rbt||(this.Rbt=new t),this.Rbt}xbt(t){return t.CO}Pbt(t){return t.RO}Ibt(t,i){return Nu(t,i)}Cbt(t,i,e){return(t-i)/(e-i)}};function GJ(t){return void 0!==t.JOt}function th(t){return void 0!==t.QOt}function XJ(t){return th(t)?t.TFt:0===t.CFt&&t.PFt.TFt}function jJ(t,i){return th(t)?th(i)?t.LOt+1===i.LOt:0===i.CFt&&jJ(t,i.PFt):t.CFt===t.PFt.QOt.length-1?jJ(t.PFt,i):!th(i)&&t.PFt===i.PFt&&t.CFt+1===i.CFt}zJ.Rbt=void 0,r(),r(),r();var QJ=class extends Qr{get name(){return"DiscontinuityMisalignmentError"}constructor(){super("Tried to wait for multiple discontinuity mappings at the same time")}};var KJ=class{zUt(t){const i=this.GUt.get(t);return void 0!==i&&YJ(i)}XUt(t){if(this.jUt()>t)return Promise.reject(new QJ);const i=[];for(const s of this.QUt){var e;if(s<t)null==(e=this.GUt.get(s))||e.KUt.Ky(new QJ),this.GUt.delete(s);else i.push(s)}return this.QUt=i,-1===this.QUt.indexOf(t)&&this.QUt.push(t),this.YUt(t).KUt.Yy}JUt(t){const i=this.GUt.get(t);if(!i||!YJ(i))throw new m("LLHLSPlayer - Missing timestamp mapping for discontinuity #"+t);return i}ZUt(t){return this.JUt(t).EU}$Ut(t,i){const e=th(i)?i:i.PFt,s=this.JUt(e.$Ot);let n=t.gO(s.EU);const r=ul.hU(i.CO).gF(n);if(r.fF().hF(XE())){const t=_.round(r.rF()/GE().rF());n=n.gO(GE().zF(t))}return n}tVt(t,i){return this.$Ut(t,i).gF(t)}iVt(t,i,e,s,n,r){this.eVt<t&&(this.eVt=t);const h=this.YUt(t);void 0===h.EU&&(h.sVt.some(t=>t.iat===i)||(h.sVt.push({iat:i,nVt:e,rVt:s.eU(e.jD),hVt:n,oVt:r}),this.aVt(h,t)))}aVt(t,i){if(t.EU||!this.uVt(t))return;const e=function(t){return df(t,JJ)}(t.sVt);t.EU=e.rVt.gF(e.nVt),t.KUt.Qy(),Wt(t.sVt),_e(this.QUt,i)}uVt(t){return this.cVt.length>0&&this.cVt.every(i=>t.sVt.some(t=>t.iat===i))}YUt(t){if(this.GUt.has(t))return this.GUt.get(t);{const i={EU:void 0,KUt:new Ga,sVt:[]};return this.GUt.set(t,i),i}}dVt(t){this.cVt=t,this.GUt.forEach((t,i)=>this.aVt(t,i))}lVt(){this.eVt=-1}jUt(){return this.eVt}zg(){this.GUt.forEach(t=>t.KUt.Zg()),this.GUt.clear()}constructor(){this.cVt=[],this.GUt=re(),this.QUt=[],this.eVt=-1}};function YJ(t){return void 0!==t.EU}function JJ(t,i){return-function(t,i){if(t.oVt||i.oVt)return function(t,i){let e=t.gF(i);return t.mF()||i.mF()||(e.aF(XE())?e=e.gF(GE()):e.lF(XE()._F())&&(e=e.gO(GE()))),e}(t.nVt,i.nVt).oF(ul.SF);return t.nVt.oF(i.nVt)}(t,i)||function(t,i){return t.hVt===i.hVt?hl.rh:t.hVt?hl.Fg:hl.Ug}(t,i)||function(t,i){return t.rVt.oF(i.rVt)}(t,i)}var ZJ=class{get fVt(){return this.vVt}get _Vt(){return this.gVt}get AM(){return this.pVt}IFt(t,i){if(qY(t))if(0===this.gVt.length)this.mVt(t);else{if(!i)return void ol.FLt("HLSModel","No rendition was provided to update the playlist. Ignoring the update.");i.sLt.IFt(t)}else{if(0!==this.gVt.length)return void ol.FLt("HLSModel","Master playlist can only be applied once. Ignoring the update.");this.wVt(t)}}mVt(t){const i=this.yVt(t.Syt);i.IFt(t);const e=this.bVt(dl.Bk,i),s=this.bVt(dl.Mk,i),n=new EJ({Syt:i.Syt,IW:0,wyt:0,yyt:NaN,Rrt:void 0,RRt:void 0,Olt:0,gOt:[],wOt:void 0,AOt:void 0,pOt:void 0,bOt:void 0,yOt:void 0,mOt:void 0},i,[e,s]);this.gVt.push(n)}wVt(t){this.vVt.push(...t.UW);const i=this.AVt(t);for(const e of t.XOt){const s=i.filter(t=>tZ(t,e));this.SVt(e,s);const n=new EJ(e,this.yVt(e.Syt,t.Tn),s);this.gVt.push(n)}}yVt(t,i){let e=this.TVt.get(t);return void 0===e&&(e=new qJ(t,i,this.FUt),this.TVt.set(t,e)),e}AVt(t){const i=[];for(const e of t.$D)if(void 0===e.Syt){for(const s of t.XOt)if($J(e.Km,e.oLt,s)){const t=new _Y(e,this.yVt(s.Syt));i.push(t)}}else{const t=new _Y(e,this.yVt(e.Syt));i.push(t)}return i}bVt(t,i){return new _Y({Km:t,Syt:void 0,oLt:"",bs:void 0,_Ot:void 0,l:"",nLt:!0,rLt:!1,hLt:!1,cLt:void 0,aLt:void 0,X9:void 0},i)}SVt(t,i){const e=i.filter(t=>t.Km===dl.Bk),s=i.filter(t=>t.Km===dl.Mk),n=t.Rrt&&(t.Rrt.W9||t.Rrt.q9);if((!n||t.Rrt.W9)&&0===s.length){const e=this.bVt(dl.Mk,this.yVt(t.Syt));i.push(e)}if((!n||t.Rrt.q9)&&0===e.length){const e=this.bVt(dl.Bk,this.yVt(t.Syt));i.push(e)}t.Rrt&&t.Rrt.fOt}kVt(t){for(const i of this.gVt)for(const e of i.VLt)if(e===t)return e}EVt(t){for(const i of this.gVt)if(i===t)return i}xVt(t){for(const i of this.gVt)if(Ct(i.VLt,t))return i}zg(){Wt(this.gVt),Wt(this.vVt),this.TVt.clear(),this.pVt.zg()}constructor(t,i){this.gVt=[],this.vVt=[],this.TVt=Ba(),this.pVt=new KJ,this.FUt=void 0,this.PVt=void 0,this.PVt=t,this.FUt=i}};function $J(t,i,e){switch(t){case dl.Bk:return e.pOt===i;case dl.Mk:return e.bOt===i;case dl.HU:return e.yOt===i;case dl.YLt:return e.mOt===i}return!1}function tZ(t,i){return $J(t.Km,t.oLt,i)&&(!t.uLt||t.sLt.Syt===i.Syt)}r();var iZ=class extends gp{constructor(t){super(nZ.IVt),this.fLt=void 0,this.fLt=t}};r();var eZ=class extends gp{constructor(t){super(nZ.CVt),this.fLt=void 0,this.fLt=t}},sZ="HlsModelUpdater",nZ=function(t){return t.IVt="RVt",t.CVt="DVt",t}({}),rZ=class extends Ne{get NVt(){return this.BVt}get MVt(){return this.LVt}get Br(){return this.Pyt}get OVt(){return this.FVt}async UVt(t){const i=this.Pyt.PVt;if(!i)throw new m("HLSModelUpdater - Could not load HLS playlist: The provided source is empty.");this.So(new ke);const e=await this.VVt(i,{},2,!0,t),s=e.sLt;if(!WY(s)&&!qY(s))throw new m("HLSModelUpdater - Could not load HLS playlist: The playlist is invalid.");WY(s)||ol.cN(sZ,"Detected media playlist only HLS stream."),this.HVt(s),e.WVt&&(this.LVt=!0,await this.qVt(t)),this.BVt=!0}async zVt(t,i,e,s){const n=this.Pyt.kVt(t);if(!n)throw new m("HLSModelUpdater - Could not load HLS playlist for rendition: the rendition does not exist on the internal model.");const r={LOt:i,kUt:e,uD:uZ(n)},h=rn(_.max(1,3*t.sLt.gUt));try{await this.GVt(n,r,s,h)}catch(t){throw sa(t),this.XVt(n),t}}jVt(t,i){const e=this.Pyt.kVt(t);if(!e)throw new m("HLSModelUpdater - Could not load HLS playlist for rendition: the rendition does not exist on the internal model.");const s={LOt:void 0,kUt:void 0,uD:uZ(e)},n=rn(_.max(1,3*t.sLt.gUt));return this.GVt(e,s,i,n)}QVt(t,i){return this.KVt.has(t.JI)||this.KVt.set(t.JI,new Ga),ua(this.KVt.get(t.JI).Yy,i)}XVt(t){this.So(new eZ(t))}async GVt(t,i,e,s){const n=t.sLt.BLt(i);let r;try{r=(await this.VVt(n,i,0,this.LVt,e,s)).sLt}catch(i){throw sa(i),t.sLt.bUt=zd.Mg(),i}if(!qY(r))throw new m("HLSModelUpdater - Could not load HLS playlist for rendition: the playlist is not a media playlist.");if(this.YVt&&t!==this.YVt&&!this.YVt.sLt.vUt)try{await this.jVt(this.YVt,e)}catch(i){sa(i),this.YVt=t,this.JVt()}try{this.HVt(r,t)}catch(n){if(n instanceof Bc&&void 0!==i.uD){const n=Y({},i,{uD:void 0});return this.GVt(t,n,e,s)}throw n}this.YVt=t}async VVt(t,i,e,s,n,r){if(ol.cN(sZ,"Loading HLS playlist at "+t+"."),s){const i=await this.ZVt(t,n);if(void 0!==i)return{sLt:i,WVt:!0}}return{sLt:await this.$Vt(t,i,e,n,r),WVt:!1}}async ZVt(t,i){try{const e=await this.Sut.hTt([t]);if(fr(i),void 0!==e)return kJ(e.responseURL,{},e.data)}catch(t){sa(t)}}async $Vt(t,i,e,s,n){const r={Yu:t,fk:Bi.LT,Xk:this.sTt,Hk:Qe.GET,Km:q.bk,Yg:s,Wk:n},h=await ws(t=>this.tHt(r,t),s,e);return kJ(h.wk,i,h.lk)}async tHt(t,i){void 0===i&&(i=0);try{const i=await this.aV.vk(t);return{lk:await i.HT(),wk:i.wk}}catch(t){if(!Ce(t)){const e=Qn(t)?t.uE.dk:void 0;this.So(new tG),this.So(new _G(i,e,t.message))}throw t}}async qVt(t){fr(t);const i=[];for(const e of this.Pyt._Vt)for(const s of e.VLt)i.push(this.iHt(s,t));await Promise.all(i)}async iHt(t,i){try{const e=await this.Sut.hTt([t.sLt.Syt]);fr(i),void 0===e||t.sLt.vUt||await this.jVt(t,i)}catch(t){sa(t)}}JVt(){for(const t of this.Pyt._Vt)for(const i of t.VLt)i!==this.YVt&&void 0!==i.sLt.SFt&&(i.sLt.vUt?this.eHt(i):i.sLt.UUt())}eHt(t){if(0!==t.sLt.bct.length){if(!this.YVt)return this.YVt=t,void this.YVt.sLt.qUt(0,void 0);if(this.sHt(this.YVt),!this.sHt(t)&&void 0===t.sLt.SFt){const i=this.nHt(t,this.YVt);ol.OLt(sZ,"Assuming global timeline offset of "+i+"s for rendition "+t.sLt.Syt+"."),t.sLt.qUt(i,void 0)}}}nHt(t,i){if(hZ(t)){const e=t.sLt.bct[0],s=i.sLt.bct[0];return ol.OLt(sZ,"Synchronizing by start of VOD: "+s.CO+" vs "+e.CO),s.CO-e.DFt}const e=function(t,i){let e=t.length-1,s=i.length-1;for(;e>=0&&s>=0;){const n=t[e],r=i[s];if(n.$Ot>r.$Ot)e--;else if(n.$Ot<r.$Ot)s--;else if(n.KOt){if(r.KOt)return{segment:n,referenceSegment:r};s--}else e--}return}(t.sLt.bct,i.sLt.bct);if(void 0!==e){const{segment:t,referenceSegment:i}=e;return ol.OLt(sZ,"Synchronizing by start of discontinuity #"+i.$Ot+": "+i.CO+" vs "+t.CO),i.CO-t.DFt}const s=aZ(t.sLt.bct);if(void 0!==s){const t=aZ(i.sLt.bct);if(void 0!==t){ol.OLt(sZ,"Synchronizing by PDT:",t.JOt.toISOString()+" vs "+s.JOt.getTime());return t.CO-s.DFt-(t.JOt.getTime()-s.JOt.getTime())/1e3}}const n=oZ(i),r=oZ(t);var h;const o=null!=(h=t.sLt.SFt)?h:0;return ol.OLt(sZ,"Synchronizing by last segment:",n+" vs "+r),n-r+o}sHt(t){const i=this.Pyt.kVt(t);if(!i)return!1;if(hZ(i))return!1;const e=function(t,i){return dr(t,t=>void 0!==t.Get&&i.zUt(t.$Ot))}(i.sLt.bct,this.Pyt.AM);if(void 0===e)return!1;if(i.sLt.SUt===e.$Ot)return!0;const s=this.Pyt.AM.$Ut(e.Get,e).rF()-e.DFt;return ol.OLt(sZ,"Synchronize by media timestamp: "+s+"s for rendition "+t.sLt.Syt+"."),i.sLt.qUt(s,e.$Ot),(void 0===this.YVt||void 0===this.YVt.sLt.SUt||this.YVt.sLt.SUt<e.$Ot)&&(this.YVt=i),!0}HVt(t,i){var e;(this.Pyt.IFt(t,i),qY(t)&&i)&&(this.FVt=i,this.eHt(i),this.So(new iZ(i)),null==(e=this.KVt.get(i.JI))||e.Qy(),this.KVt.delete(i.JI));this.So(new Dz)}rHt(t,i){for(const e of this.Pyt._Vt){const s=hh(e.fFt,t=>t.sLt===i);void 0!==s&&void 0!==t.W9&&(s.Rrt=QY(s.Rrt,t));const n=hh(e.lFt,t=>t.sLt===i);void 0!==n&&void 0!==t.q9&&(n.Rrt=QY(n.Rrt,t)),e.cFt||void 0===s&&void 0===n||(e.Rrt=QY(e.Rrt,t))}}hHt(t,i){for(const e of this.Pyt._Vt){const s=hh(e.fFt,t=>t.sLt===i);void 0!==s&&void 0===t.W9&&e.mFt(s);const n=hh(e.lFt,t=>t.sLt===i);void 0!==n&&void 0===t.q9&&e.mFt(n)}}zg(){this.Vo(),this.Pyt.zg(),this.KVt.forEach(t=>t.Zg()),this.KVt.clear()}constructor(t,i,e,s,n){super(),this.aV=void 0,this.Sut=void 0,this.sTt=void 0,this.Pyt=void 0,this.BVt=void 0,this.LVt=void 0,this.YVt=void 0,this.FVt=void 0,this.KVt=void 0,this.aV=t,this.Sut=i,this.sTt=e,this.BVt=!1,this.LVt=!1,this.YVt=void 0,this.FVt=void 0,this.KVt=re(),this.Pyt=new ZJ(s,n)}};function hZ(t){return t.sLt.iFt||t.sLt.sFt===zY.eOt}function oZ(t){const i=t.sLt.bct;return i[i.length-1].RO}function aZ(t){return dr(t,t=>void 0!==t.JOt)}function uZ(t){if(void 0!==t.sLt.POt&&!t.sLt.iFt&&!(void 0===t.sLt._Ut||zd.Mg()/1e3-t.sLt._Ut>=t.sLt.POt/2))return t.sLt.IOt?RJ.zFt:RJ.qFt}var cZ=class extends ms{NUt(t){if(0===t.sLt.tFt.length)return;this.oHt||(this.oHt=this.iV.sI(us.zU,void 0,void 0,void 0,void 0,nh.DATE_RANGE),this.tt(this.oHt));MJ(this.oHt,t.sLt.tFt,i=>{var e;return null!=(e=t.sLt.pFt(i))?e:NaN})}eV(t,i,e){const s=ht(t,i,e);return this.oHt===t&&(this.oHt=s),s}constructor(t,i){super(i),this.nEt=void 0,this.oHt=void 0,this.aHt=t=>{this.NUt(t.fLt)},this.nEt=t,this.nEt.wn(nZ.IVt,this.aHt)}};r();var dZ=class extends gp{constructor(){super(vY.ZMt)}};r(),r(),r();var lZ=class{get uHt(){return this.n3}get Fx(){return QU(this.Wrt.Fx,this.Wrt.W3)}get bct(){return this.Dbt}get Npt(){return this.Ipt}cHt(t){var i;return null==(i=this.dHt(t))?void 0:i.fLt}lHt(t){this.n3=t,this.fHt()}elt(t,i,e,s,n,r){this.Dbt.push({fLt:t,yut:i,vHt:Uo.nL(n,r),_Ht:Uo.nL(e,s)}),this.fHt()}dHt(t){return hh(this.Dbt,i=>i._Ht.Cr(t))}Oat(t){return hh(this.Dbt,i=>i.yut===t)}Qct(t,i){return hh(this.Dbt,e=>e.fLt===t&&jJ(e.yut,i))}F3(){const t=this.Fx;t.V>0&&(this.Ipt=t.An(t.V-1))}fHt(){const t=this.Wrt.Fx;this.Dbt=this.Dbt.filter(i=>0!==t.Mn(i._Ht).V)}constructor(t){this.Wrt=void 0,this.Dbt=void 0,this.n3=void 0,this.Ipt=void 0,this.Wrt=t,this.Dbt=[],this.n3=void 0,this.Ipt=void 0}};r();var fZ=188,vZ=function(t){return t[t.yk=0]="yk",t[t.pC=1]="pC",t[t.gHt=2]="gHt",t[t.pHt=3]="pHt",t}({});function _Z(t){return gZ(t)?1:function(t){return function(t){if(t.length<376)return-1;const i=t.length<564?2:3,e=_.min(1e3,t.length-i*fZ);for(let s=0;s<=e;s++){let e=!0;for(let n=0;n<i;n++)if(71!==t[s+n*fZ]){e=!1;break}if(e)return s}return-1}(t)>=0}(t)?2:function(t){return null!==sL(dh(t),new oi)}(t)?3:0}function gZ(t){const i=yi(t,0,_.min(t.length,16384));return Hn.RD(dh(i))}var pZ=class{get Km(){return this.Vp}get mHt(){return this.Yot}get wHt(){return this.yHt}get yCt(){return void 0!==this.bHt}get AHt(){return this.SHt}THt(){if(this.yCt)throw new m("Cannot perform new operation while BufferAppender is still busy")}kHt(t){this.eb!==t&&(this.THt(),this.eb=t,this.Yot=new lZ(t))}EHt(){return this.bHt?this.bHt.Yy:Promise.resolve()}xHt(t){const i=this.Yot.Npt;return void 0!==i&&this.PHt(t,i)}PHt(t,i){var e;const s=_.min(t,i);var n;return null!=(n=null==(e=this.Yot.Fx.MM().qM(this.wHt).iL(s))?void 0:e.Cr(i))&&n}IHt(t){return this.Yot.cHt(t)}Zg(){this.hT.Zg(),this.hT=new Zc,this.CHt=!0}J2(t){this.THt(),this.bHt=new Ga;const i=i=>{this.DHt.RHt(t),this.NHt(i)};this.Z2(t,this.hT.Yg).then(i,i)}async Z2(t,i){ol.OLt(PY,"Appending initializer",ah(t.BHt.Syt)),this.spt=t,await this.eb.J2(t,i),void 0!==this.ENt&&this.Vp===at.Mk&&gZ(t.lk.lk)&&this.ENt.ght(t.lk.lk),ol.OLt(PY,"Appended initializer",ah(t.BHt.Syt)),this.CHt=!1,this.Yot.lHt(t)}Pdt(t){this.THt(),this.bHt=new Ga;const i=i=>{this.DHt.RHt(t),this.NHt(i)};this.MHt(t,this.hT.Yg).then(i,i)}async MHt(t,i){const e=t.fLt;if(void 0===e.sLt.WLt)throw new m("HlsBufferAppender: Cannot append HLSAsset to "+this.Vp+" buffer for a HLSRendition with an undefined targetDuration.");this.CHt&&void 0!==this.spt&&await this.Z2(this.spt,i);const s=this.Yot.Fx.IM,n=this.eb.Fx;ol.OLt(PY,"Appending",ah(t.BHt.Syt)),await this.eb.Q2(t,i),void 0!==t.lk&&this.LHt(t.lk,t),ol.OLt(PY,"Appended",ah(t.BHt.Syt),s,this.Yot.Fx.IM);const r=t.CO,h=r+t.ct,o=t.BHt,a=o.CO;var u;const c=o.CO+(null!=(u=o.ct)?u:0);this.Yot.elt(e,o,r,h,a,c),this.OHt(e,o,r,h,n),t.BHt.EFt&&this.Yot.F3()}OHt(t,i,e,s,n){if(this.Km!==at.Mk)return;const r=this.eb.Fx.qM(n),h=this.Yot.Qct(t,i);if(h)if(this.FHt(h))if(0===r.V){if(void 0===this.Yot.Oat(i)){const t=this.eb.W3.Mn(new Uo([e,s]));this.yHt=this.yHt.HM(t)}}else{const t=r.Tn(0),i=new Uo([t,s]);if(this.yHt=this.yHt.qM(i),t>e){const i=this.eb.W3.Mn(new Uo([e,t]));this.yHt=this.yHt.HM(i)}}else{const t=r.V>0&&r.Tn(0)<e?r.Tn(0):e;this.yHt=this.yHt.qM(new Uo([t,s]))}else if(0===r.V){const t=this.eb.W3.Mn(new Uo([e,s]));this.yHt=this.yHt.HM(t)}else{var o;if(i.TFt)return;const t=r.Tn(0),s=null==(o=n.iL(e))?void 0:o.An(0),h=s&&s>e?s:e;if(t>h){const t=this.eb.W3.Mn(new Uo([h,r.Tn(0)]));this.yHt=this.yHt.HM(t)}}}FHt(t){const i=t._Ht,e=i.Tn(0),s=i.An(i.V-1),n=i.RM(0),r=i.NM(i.V-1);return this.yHt.GM(e,s,n,r)}LHt(t,i){var e;if(!gZ(t.lk))return;const s=i.CO,n=s+i.ct,r=i.EU;if(null==(e=this.Opt)||e.elt(t.lk,s,r),void 0!==this.ENt&&this.Vp===at.Mk){const e=i.BHt.EFt;this.ENt.elt(t.lk,s,n,r,i.fLt,e)}const h=[];void 0!==this.Opt&&h.push(this.Opt),void 0!==this.ENt&&h.push(this.ENt),lP(this.eb.Fx,h)}UHt(t){this.THt(),this.bHt=new Ga;try{ol.OLt(PY,"Appending gap from "+t.VHt+" to "+t.HHt,ah(t.yut.Syt)),this.G3(t.VHt,t.HHt)}finally{this.DHt.RHt(t),this.NHt()}}G3(t,i){this.eb.G3(t,i)}constructor(t,i,e,s,n,r,h){this.eb=void 0,this.Yot=void 0,this.DHt=void 0,this.Vp=void 0,this.Opt=void 0,this.ENt=void 0,this.WHt=void 0,this.bHt=void 0,this.hT=new Zc,this.yHt=Uo.rL(),this.qHt=void 0,this.spt=void 0,this.CHt=!0,this.SHt=!1,this.NHt=t=>{this.bHt&&(t?YD(t)&&mZ(this)?this.WHt.iJ(this.eb.Fx.eL)?this.bHt.Qy():this.bHt.Ky(t):Ce(t)?this.bHt.Qy():(this.SHt=!0,this.bHt.Ky(t)):this.bHt.Qy(),this.bHt=void 0)},this.Vp=t,this.DHt=e,this.eb=i,this.Yot=s,this.WHt=n,this.Opt=r,this.ENt=h}};function mZ(t){return GT(t.Km)}r(),r();var wZ=class{async zHt(t,i,e,s){const n=await this.GHt(i,s);return await this.XHt.zHt(t,n,e)}async GHt(t,i){var e;if((null==(e=this.jHt)?void 0:e.Yu)!==t){ol.OLt("HLSDecryptor","Fetching new AES-128 decryption key from "+t+".");const e=await this.aV.vk({Yu:t,fk:Bi.NT,Hk:Qe.GET,Yg:i,Km:q.Tk,zk:he.Nk,Xk:this.sTt}),s=await e.qT(),n=new j(s);this.jHt={Yu:t,lk:n}}return this.jHt.lk}constructor(t,i,e){this.XHt=void 0,this.aV=void 0,this.sTt=void 0,this.jHt=void 0,this.XHt=t,this.aV=i,this.sTt=e,this.jHt=void 0}};r();var yZ=class{async vk(t,i,e,s,n){const r=await this.QHt(t,i,e,Bi.NT,s,n),h=await r.qT(n);return{httpStatusCode:r.dk,response:new j(h)}}async KHt(t,i,e,s,n){return(await this.QHt(t,i,e,Bi.MT,s,n)).zT(n)}async QHt(t,i,e,s,n,r){let h;t.iAt&&(h=HY(t.iAt.Tn,t.iAt.V),0===h[0]&&h[1]===Gl&&(h=void 0));const o=h?{Range:"bytes="+h[0]+"-"+h[1]}:void 0,a=new ro({Yu:t.XE,fk:s,_k:o,Xk:this.sTt,Hk:Qe.GET,Km:i,zk:e,Gk:this.qat,Kk:s===Bi.MT,jk:n,Yg:r});try{const i=await this.Sut.Aut(t.XE,h);if(fr(r),void 0!==i)return null==n||n(i.buffer.byteLength,i.buffer.byteLength),new il({vk:a,fk:a.fk,lk:i.buffer})}catch(t){sa(t)}return await ws(()=>ua(this.aV.vk(a),a.Yg),r,this.Srt)}constructor(t,i,e,s,n=2){this.aV=void 0,this.Sut=void 0,this.qat=void 0,this.sTt=void 0,this.Srt=void 0,this.aV=t,this.Sut=i,this.qat=e,this.sTt=s,this.Srt=n}};r();var bZ=class{YHt(){return this.JHt.sLt.xOt}async ZHt(t,i,e){if(!this.YHt())throw new m("Could not perform blocking playlist update.");const s=this.$Ht,n={LOt:t,kUt:i};return void 0!==s&&function(t,i,e){if(t.LOt===i.LOt){if(t.kUt===i.kUt)return!0;if(0===t.kUt&&void 0===i.kUt)return!0}if(t.LOt===i.LOt+1&&0===t.kUt&&void 0!==i.kUt){const t=e.Oat(i.LOt);if(t&&t.Syt&&i.kUt>=t.QOt.length)return!0}return!1}(s,n,this.JHt.sLt)||(await this.tWt(),this.iWt(n)),this.nEt.QVt(this.JHt,e)}eWt(t){return this.iWt(),this.nEt.QVt(this.JHt,t)}iWt(t){if(!this.sWt&&!this.nWt){const i=()=>{this.sWt=void 0};this.sWt=this.rWt(t,this.hWt.Yg).then(i,i)}}async tWt(){this.sWt&&(this.hWt.Zg(),this.hWt=new Zc,await this.sWt.catch(gs),this.sWt=void 0)}async rWt(t,i){let e=t;for(;;){if(fr(i),this.JHt.sLt.iFt&&this.JHt.sLt.vUt)return;null!=e||(e=this.oWt()),this.$Ht=e;try{if(e)await this.nEt.zVt(this.JHt,e.LOt,e.kUt,i);else{const t=zd.Mg()-this.En,e=1e3*this.JHt.sLt.gUt;t<e&&await Ze(e-t,i),await this.nEt.jVt(this.JHt,i)}}catch(t){throw this.$Ht=void 0,sa(t),this.nEt.XVt(this.JHt),t}e=void 0,this.En=zd.Mg()}}oWt(){const t=this.JHt.sLt;if(!t.xOt||t.iFt||0===t.bct.length)return;const i=t.bct[t.bct.length-1];return i.Syt?{LOt:i.LOt+1,kUt:t.fUt?0:void 0}:{LOt:i.LOt,kUt:i.QOt.length}}zg(){this.nWt=!0,Wr(this.tWt())}constructor(t,i){this.nEt=void 0,this.JHt=void 0,this.sWt=void 0,this.hWt=new Zc,this.En=-1/0,this.$Ht=void 0,this.nWt=!1,this.nEt=t,this.JHt=i,this.iWt()}};r();var AZ=function(t){return t[t.JLt=0]="JLt",t[t.ZLt=1]="ZLt",t[t.Ak=2]="Ak",t[t.Sk=3]="Sk",t}({});r(),r();var Gs="AssetExtractor",SZ=class{aWt(t,i,e){let s=i;for(const i of this.uWt){if(s>=t)return!0;if(s<i.Tn)return!1;if(s<i.An){if(e<=i.An)return!0;s=i.An}}return s>=t}cWt(t,i){const e=[];for(let s=0;s<this.uWt.length;s+=1){const n=this.uWt[s],r=t-n.Tn,h=n.lk.length,o=_.min(h,_.max(r,0)),a=_.max(0,i+r),u=di(n.lk,o,a);u.length&&(s=this.dWt(s,n,t,o,a),e.push(u))}return e}lWt(t,i){this.uWt.push({Tn:t,An:t+i.length,lk:i})}dWt(t,i,e,s,n){let r=t;this.uWt.splice(r,1),r-=1,i.Tn<e&&(r+=1,this.uWt.splice(r,0,{Tn:i.Tn,An:e,lk:di(i.lk,0,s)}));const h=e+n-s;return h<i.An&&(r+=1,this.uWt.splice(r,0,{Tn:h,An:i.An,lk:di(i.lk,n)})),r}constructor(){this.uWt=[]}},TZ=class{get fWt(){return this.vWt}async _Wt(){const t=await this.Wd.read();if(t.done)throw this.vWt=1/0,new m("No more data can be read from the given stream.");return this.vWt+=t.value.length,t.value}async gWt(t){await this.Wd.cancel(t)}constructor(t,i){this.vWt=void 0,this.Wd=void 0,this.vWt=i,this.Wd=t.getReader()}},kZ=class{pWt(){this.mWt.Qy(),this.mWt=new Ga}wWt(t){const{eAt:i,sAt:e}=xZ(this.NFt.iAt),s=this.yWt.cWt(i,e-i);ol.OLt(Gs,"Collected "+s.length+" chunks.");for(const i of s)t.enqueue(i)}async readAndSliceOutAssetBytes(t){await this.bWt.Yy;const{eAt:i,sAt:e}=xZ(this.NFt.iAt);try{for(;;){const s=this.Wd.fWt,n=await this.Wd._Wt(),r=n.length;ol.OLt(Gs,"Read "+r+" at "+s+" for extraction of "+ah(this.NFt));const h=_.min(s+r,i)-s;if(!(h>0)){if(s+r<=e)return ol.OLt(Gs,"Extracting the read data range for extraction of "+ah(this.NFt)),t.enqueue(n),this.pWt(),Wr(this.readAndSliceOutAssetBytes(t));{const i=e-s,h=di(n,0,i),o=di(n,i);return h.length>0&&(ol.OLt(Gs,"Extracting "+h.length+" bytes for extraction of "+ah(this.NFt)),t.enqueue(h)),ol.OLt(Gs,"Of the read "+r+" bytes, the last "+o.length+" will be stored locally for extraction of "+ah(this.NFt)),this.yWt.lWt(s+i,o),ol.OLt(Gs,"Extraction of "+ah(this.NFt)+" completed as the entire request has been fulfilled."),this.AWt(t),void(this.SWt&&(ol.OLt(Gs,"Aborting stream upstream as no more bytes are needed from "+ah(this.NFt)+"."),await this.Wd.gWt("AssetExtraction - AbortOnEnd")))}}{const i=di(n,0,h),e=di(n,h);if(ol.OLt(Gs,"Of the read "+r+" bytes, the first "+h+" will be stored locally for extraction of "+ah(this.NFt)),this.yWt.lWt(s,i),e.length>0)return ol.OLt(Gs,"Extracting "+e.length+" bytes for extraction of "+ah(this.NFt)),t.enqueue(e),this.pWt(),Wr(this.readAndSliceOutAssetBytes(t))}}}catch(i){ol.OLt(Gs,"Extraction of "+ah(this.NFt)+" completed as the entire source stream has been read."),this.AWt(t)}}AWt(t){t.close(),this.pWt(),this.TWt.Qy()}start(t){ol.OLt(Gs,"Preparing to push all collected data to controller for extraction of "+ah(this.NFt)),this.wWt(t),ol.OLt(Gs,"Collected data pushed to controller for extraction of "+ah(this.NFt));const{sAt:i}=xZ(this.NFt.iAt);this.Wd.fWt>=i?(ol.OLt(Gs,"Extraction of "+ah(this.NFt)+" completed as the entire request has been fulfilled."),this.AWt(t)):(ol.OLt(Gs,"Continuing read from original stream for extraction of "+ah(this.NFt)),Wr(this.readAndSliceOutAssetBytes(t)))}get kWt(){return this.TWt.Yy}pull(){return this.bWt.Qy(),this.bWt=new Ga,this.mWt.Yy}constructor(t,i,e,s){this.NFt=void 0,this.Wd=void 0,this.yWt=void 0,this.SWt=void 0,this.bWt=void 0,this.mWt=void 0,this.TWt=new Ga,this.NFt=t,this.Wd=i,this.yWt=e,this.SWt=s,this.bWt=new Ga,this.mWt=new Ga}},EZ=class{pO(t){if(!GY(this.NFt,t))return!1;const{eAt:i,sAt:e}=xZ(t.iAt);return this.yWt.aWt(this.EWt.fWt,i,e)}async Fgt(t,i){void 0===i&&(i=!1);const e=this.EWt,s=this.yWt;if(ol.cN(Gs,"Extracting data from "+ah(t)+" out of "+ah(this.NFt)),this.xWt&&(ol.OLt(Gs,"Awaiting previous extraction before extracting "+ah(t)+" out of "+ah(this.NFt)),await this.xWt),!this.pO(t))throw new m("The extractor does not contain the data requested");const n=new kZ(t,e,s,i);return this.xWt=n.kWt,new Kb(n)}constructor(t,i){this.NFt=void 0,this.yWt=void 0,this.EWt=void 0,this.xWt=void 0,this.NFt=i;const{eAt:e}=xZ(this.NFt.iAt);this.EWt=new TZ(t,e),this.yWt=new SZ}};function xZ(t){if(t){const i=t.Tn;return{eAt:i,sAt:void 0!==t.V?i+t.V:Gl}}return{eAt:0,sAt:Gl}}var PZ=class{async Un(){const t=await this.PWt.KHt(this.NFt,q.Sk,he.yk,void 0,this.hT.Yg);return new EZ(t,this.NFt)}pO(t){return GY(this.NFt,t)}async Fgt(t,i){void 0===i&&(i=!1);const e=await this.Ypt;return await ua(e.Fgt(t,i),this.hT.Yg)}Zg(){this.Ypt.catch(gs),this.hT.Zg()}constructor(t,i){this.NFt=void 0,this.PWt=void 0,this.hT=void 0,this.Ypt=void 0,this.NFt=t,this.PWt=i,this.hT=new Zc,this.Ypt=this.Un()}};r();var IZ=class extends gp{constructor(t){super(LZ.IWt),this.Gk=void 0,this.Gk=t}};r();var CZ=class extends gp{constructor(t,i,e,s,n,r,h){super(LZ.CWt),this.uri=void 0,this.RWt=void 0,this.Gk=void 0,this.mediaSequenceNumeber=void 0,this.mediaTrackId=void 0,this.DWt=void 0,this.httpStatusCode=void 0,this.uri=t,this.RWt=i,this.Gk=e,this.mediaSequenceNumeber=s,this.mediaTrackId=n,this.DWt=r,this.httpStatusCode=h}};function RZ(t,i,e){const s=th(e)?e:e.PFt;if(i.zUt(s.$Ot)){if(void 0!==e.Get)return i.$Ut(e.Get,e).rF();if(e!==s&&void 0!==s.Get){const t=i.$Ut(s.Get,s).rF();return e.CO+(t-s.CO)}}const n=t.sLt.Oat(s.LOt-1);if(void 0!==n&&i.zUt(n.$Ot)){if(n.QOt.length>0){const t=n.OFt(n.QOt.length-1);if(void 0!==t.Get){const s=i.$Ut(t.Get,t).rF();return e.CO+(s-t.CO)}}if(void 0!==n.Get){const t=i.$Ut(n.Get,n).rF();return e.CO+(t-n.CO)}}const r=t.sLt.Oat(s.LOt+1);if(void 0!==r&&i.zUt(r.$Ot)){if(r.QOt.length>0){const t=r.OFt(0);if(void 0!==t.Get){const s=i.$Ut(t.Get,t).rF();return e.CO+(s-t.CO)}}if(void 0!==r.Get){const t=i.$Ut(r.Get,r).rF();return e.CO+(t-r.CO)}}return e.CO}function DZ(t){return void 0!==t.Get}function NZ(t,i,e,s){for(let n=i;n<t.length;n++){const i=t[n];if(i.$Ot!==e)break;if(DZ(i)){if(s(i,n))break}}}function BZ(t,i,e,s){for(let n=i;n>=0;n--){const i=t[n];if(i.$Ot!==e)break;if(DZ(i)){if(s(i,n))break}}}r();var MZ="HlsPlaylistDownloader",LZ=function(t){return t.IWt="NWt",t.CWt="BWt",t}({}),OZ=class extends Ne{MWt(t){this.LWt.zg(),this.LWt=new bZ(this.nEt,t),this.yCt?this.OWt=t:(this.JHt=t,this.FWt=0,this.UWt=void 0,this.VWt=void 0,this.HWt=!1)}get yCt(){return void 0!==this.WWt}get qWt(){return this.HWt}EHt(){return this.WWt?this.WWt.Yy:Promise.resolve()}zWt(){return this.DHt.zWt()}Zg(){var t,i,e;this.GWt.Zg(),this.GWt=new Zc,null==(t=this.XWt)||t.Zg(),this.XWt=void 0,null==(i=this.jWt)||i.Zg(),null==(e=this.QWt)||e.Zg(),this.jWt=void 0,this.QWt=void 0,this.FWt=0,this.UWt=void 0,this.VWt=void 0,this.HWt=!1}zg(){this.LWt.zg(),this.Vo()}get fLt(){var t;return null!=(t=this.OWt)?t:this.JHt}get jCt(){if(!this.JHt.sLt.iFt||void 0===this.UWt)return!1;const t=this.JHt.sLt.Oat(this.UWt);if(!t.EFt)return!1;if(void 0!==this.VWt){if(!t.OFt(this.VWt).EFt)return!1}return!0}KWt(t){const i=this.JHt.sLt.xUt(t);if(!i)return!1;if(void 0!==this.UWt){const e=i.LOt===this.UWt;return void 0!==this.VWt?i.FFt(t)===i.OFt(this.VWt)&&e:e}return!1}YWt(t){let i;var e;if(!this.qWt&&(void 0===this.UWt||t<this.FWt-1e-6))i=this.JWt(t);else if(i=this.ZWt(null!=(e=this.UWt)?e:0,this.VWt),void 0!==i){const[e,s]=i,n=RZ(this.JHt,this.nEt.Br.AM,null!=s?s:e),r=3*this.JHt.sLt.WLt;_.abs(n-t)>=r&&(i=this.JWt(t))}else if(this.JHt.sLt.iFt&&void 0!==this.UWt){if(this.JHt.sLt.Oat(this.UWt).EFt&&(i=this.JWt(t),void 0!==i&&i[0].LOt===this.UWt))return}if(i){this.FWt=t;const[e,s]=i;return 0===(null==s?void 0:s.CFt)&&void 0!==e.ct?[e,void 0]:[e,s]}}JWt(t){let i,e;const s=this.JHt.sLt.bct;if(0===s.length)return;const n=this.nEt.Br.AM,r=ul.hU(t),h=function(t,i,e){const s=t.sLt.bct;if(0===s.length)return;const n=t.sLt.PUt(e.rF());if(!i.zUt(n.$Ot))return;const r=n.LOt-s[0].LOt,h=n.$Ot;let o,a,u,c=0;if(BZ(s,r,h,(t,i)=>(o=t,c=i,!0)),void 0===o&&(NZ(s,r+1,h,(t,i)=>(o=t,c=i,!0)),void 0===o))return;return i.$Ut(o.Get,o).cF(e)?(a=o,NZ(s,c+1,h,t=>i.$Ut(t.Get,t).hF(e)?(u=t,!0):(a=t,!1))):(u=o,BZ(s,c-1,h,t=>i.$Ut(t.Get,t).cF(e)?(a=t,!0):(u=t,!1))),void 0!==a&&void 0!==u?[a,u]:void 0}(this.JHt,n,r);let o;if(void 0!==h){const[t,i]=h,e=n.$Ut(t.Get,t),s=n.$Ut(i.Get,i),a=r.gF(e).rF()/s.gF(e).rF()*(i.CO-t.CO);o=t.CO+a}else o=t;const a=s[s.length-1];return a.RO<=o?(i=a,e=a.VFt(o)):s[0].CO>o?(i=s[0],e=i.OFt(0)):(i=this.JHt.sLt.xUt(o),e=null==i?void 0:i.VFt(o)),i?[i,e]:void 0}ZWt(t,i){let e,s;if(e=this.JHt.sLt.Oat(t),e&&void 0!==i){if(0===e.QOt.length)return[e,void 0];s=e.OFt(i+1)}return void 0!==e&&void 0!==s||(e=this.JHt.sLt.Oat(t+1),s=null==e?void 0:e.OFt(0)),e?[e,s]:void 0}THt(){if(this.yCt)throw new m("Cannot perform new operation while PlaylistDownloader is still busy")}$Wt(t,i){this.THt(),this.WWt=new Ga;const e=Zc.ep([i,this.GWt.Yg]);this.tqt(t,e.Yg).then(this.iqt,this.iqt)}eqt(){this.LWt.iWt()}async tqt(t,i){if(this.JHt.sLt.iFt)return;let e=this.YWt(t);for(!e&&this.LWt.YHt()&&void 0!==this.UWt&&(await this.LWt.ZHt(void 0===this.VWt?this.UWt+1:this.UWt,void 0!==this.VWt?this.VWt+1:void 0,i),e=this.YWt(t)),!e&&this.LWt.YHt()&&void 0!==this.UWt&&(await this.LWt.ZHt(this.UWt+1,0,i),e=this.YWt(t));!e;){ol.cN(MZ,"No next segment / part available, need to update playlist before continuing."),await this.LWt.eWt(i);const s=this.fLt.sLt.bct;s[0].CO>t&&(this.VWt=void 0,this.UWt=void 0,this.HWt=!1);s[s.length-1].LOt<this.UWt&&(this.VWt=void 0,this.UWt=void 0,this.HWt=!1),e=this.YWt(t)}}sqt(){return this.DHt.nqt()}rqt(){this.THt();try{const t=this.JHt.sLt.IUt(Ah.JLt);t&&this.hqt(t);const i=this.JHt.sLt.IUt(Ah.ZLt);i&&this.oqt(i)}catch(t){throw sa(t),this.JHt.sLt.bUt=zd.Mg(),this.nEt.XVt(this.JHt),t}}hqt(t){this.QWt&&!this.QWt.pO(t.Syt)&&(this.QWt.Zg(),this.QWt=void 0),this.QWt||(this.QWt=new PZ(t.Syt,this.PWt))}oqt(t){this.jWt&&!this.jWt.pO(t.Syt)&&(this.jWt.Zg(),this.jWt=void 0),this.jWt||(this.jWt=new PZ(t.Syt,this.PWt))}Lat(t,i,e){this.THt(),ol.cN(MZ,"Starting download of segment "+ah(t.Syt)+" and part "+(null==i?void 0:i.CFt)),this.WWt=new Ga,this.aqt(t,i,e,this.GWt.Yg).catch(i=>{sa(i),this.JHt.sLt.bUt=zd.Mg(),this.nEt.XVt(this.JHt);const e=Qn(i)?i.uE.dk:void 0,s=new as(me.NETWORK_ERROR,i.message,i.cause),n=new JV(t.CO,s,this.Vp,void 0,void 0,this.uqt++,e);throw this.So(n),i}).then(this.iqt,this.iqt)}async aqt(t,i,e,s){let n;if(t.YOt){var r,h;if(!e||!XY(e.BHt.Syt,null==(r=t.YOt)?void 0:r.Syt)||t.$Ot!==e.$Ot){var o;null==(o=this.XWt)||o.Zg(),this.XWt=new Ga;const i=this.cqt(t.YOt,t,s).then(()=>{this.XWt=void 0});this.XWt.$g(i)}n=null==(h=this.XWt)?void 0:h.Yy}t.EOt||i&&i.EOt?await this.dqt(t,i,n,s):await this.lqt(t,i,n,s)}async cqt(t,i,e){const s=await this.fqt(t,i,e),n=s.YOt.lk.lk.byteLength;this.DHt.vqt(s),this.So(new CZ(s.YOt.BHt.Syt,s.Km,this.Vp,i.LOt,s.fLt.JI,n,s.YOt.jut)),ol.OLt(PY,"Download initializer complete",ah(t.Syt))}async lqt(t,i,e,s){const n=await this._qt(t,i,s),r=n.yut.lk.lk.byteLength;var h;e&&await ua(e,s),this.DHt.vqt(n),this.So(new CZ(n.yut.BHt.Syt,n.Km,this.Vp,t.LOt,n.fLt.JI,r,n.yut.jut)),ol.OLt(PY,"Download complete",ah(null!=(h=null==i?void 0:i.Syt)?h:t.Syt))}async dqt(t,i,e,s){const n=this.gqt(t,i);var r;e&&await ua(e,s),this.DHt.vqt(n),ol.OLt(PY,"Download gap complete",ah(null!=(r=null==i?void 0:i.Syt)?r:t.Syt))}async _qt(t,i,e){let s;if(i){if(this.jWt)if(this.jWt.pO(i.Syt)){const t=await this.jWt.Fgt(i.Syt),n=await tA(t,e),r=new j(n);s=UZ(i,await this.zHt(r,i.UW,e),200)}else this.jWt.Zg(),this.jWt=void 0;s||(ol.OLt(PY,"Start download",ah(i.Syt)),s=await this.pqt(i,e))}else ol.OLt(PY,"Start download",ah(t.Syt)),s=await this.Uat(t,e);return this.UWt=t.LOt,this.VWt=null==i?void 0:i.CFt,this.HWt=!1,{Km:"yut",yut:s,fLt:this.JHt,$Ot:t.$Ot}}async fqt(t,i,e){let s;if(this.QWt){var n;if(this.QWt.pO(t.Syt)){const n=await ua(this.QWt.Fgt(t.Syt),e),r=await tA(n,e),h=new j(r);s=FZ(t,i,await this.zHt(h,t.jOt?[t.jOt]:[],e),200)}ol.cN(MZ,"MAP is required for segment, downloading MAP data."),null==(n=this.QWt)||n.Zg(),this.QWt=void 0}return s||(ol.OLt(PY,"Start download",ah(t.Syt)),s=await this.mqt(t,i,e)),{Km:"YOt",YOt:s,fLt:this.JHt,CO:i.CO,$Ot:i.$Ot,UW:i.UW}}gqt(t,i){const e=null!=i?i:t;return this.UWt=t.LOt,this.VWt=null==i?void 0:i.CFt,this.HWt=!0,{Km:"wqt",VHt:e.CO,HHt:e.CO+e.ct,fLt:this.JHt,yut:e,$Ot:t.$Ot}}async mqt(t,i,e){const{response:s,httpStatusCode:n}=await this.PWt.vk(t.Syt,q.Ak,he.Ek,void 0,e),r=t.jOt?[t.jOt]:[];return FZ(t,i,await this.zHt(s,r,e),n)}async Uat(t,i){if(!t.Syt)throw new m("Internal error: attempted to download an incomplete segment");let e,s;try{this.yqt(t);const n=await this.PWt.vk(t.Syt,q.Ak,he.yk,this.bqt,i);e=n.response,s=n.httpStatusCode}finally{this.Aqt()}return function(t,i,e){return{lk:{lk:i,Km:We.wZ},Km:AZ.Ak,jut:e,BHt:t,$Ot:t.$Ot}}(t,await this.zHt(e,t.UW,i),s)}async pqt(t,i){let e,s;try{this.yqt(t);const n=await this.PWt.vk(t.Syt,q.Ak,he.yk,this.bqt,i);e=n.response,s=n.httpStatusCode}finally{this.Aqt()}return UZ(t,await this.zHt(e,t.UW,i),s)}async zHt(t,i,e){const s=hh(i,t=>t.Hk===ao.$Lt);return s?s.Syt&&s.SOt?await this.Sqt.zHt(t,s.Syt,s.SOt,e):(ol.lt(MZ,"Encountered an AES-128 encrypted segment for which no initialization vector could be determined."),t):t}yqt(t){var i,e,s;this.Tqt=t,this.kqt=0,this.Eqt=zd.Mg(),this.xqt=0,this.Pqt=null!=(s=null==(e=t.Syt)||null==(i=e.iAt)?void 0:i.V)?s:0}Aqt(){this.Tqt=void 0,this.kqt=0,this.Eqt=0,this.xqt=0,this.Pqt=0}Iqt(){if(void 0!==this.Tqt)return{yut:this.Tqt,Cqt:this.xqt,Rqt:this.Pqt,Dqt:zd.Mg()-this.Eqt}}Nqt(t){return void 0!==this.Tqt&&(0!==this.kqt&&(!(this.Pqt>0&&this.xqt>=this.Pqt)&&!(t-this.kqt<500)))}constructor(t,i,e,s,n,r,h,o){super(),this.Vp=void 0,this.nEt=void 0,this.DHt=void 0,this.PWt=void 0,this.Sqt=void 0,this.JHt=void 0,this.LWt=void 0,this.OWt=void 0,this.WWt=void 0,this.Tqt=void 0,this.kqt=0,this.Eqt=0,this.xqt=0,this.Pqt=0,this.GWt=new Zc,this.XWt=void 0,this.FWt=0,this.UWt=void 0,this.VWt=void 0,this.HWt=!1,this.QWt=void 0,this.jWt=void 0,this.uqt=0,this.iqt=t=>{this.OWt&&(this.JHt=this.OWt,this.OWt=void 0,this.FWt=0,this.UWt=void 0,this.VWt=void 0,this.HWt=!1),this.WWt&&(t&&!Ce(t)?this.WWt.Ky(t):(this.uqt=0,this.WWt.Qy()),this.WWt=void 0)},this.bqt=(t,i)=>{this.xqt=t,t>0&&0===this.kqt&&(this.kqt=zd.Mg()),void 0!==i&&(this.Pqt=i),this.So(new IZ(this.Vp))},this.Vp=t,this.nEt=e,this.DHt=s,this.JHt=i,this.LWt=new bZ(e,i),this.Sqt=new wZ(h,n,o),this.PWt=new yZ(n,r,function(t){switch(t){case dl.Mk:return $a.Mk;case dl.Bk:return $a.Bk;case dl.HU:case dl.YLt:return $a.LT;default:return $a.yk}}(i.Km),o)}};function FZ(t,i,e,s){return{lk:{lk:e,Km:We.wZ},Km:AZ.JLt,jut:s,BHt:t,$Ot:i.$Ot}}function UZ(t,i,e){return{lk:{lk:i,Km:We.wZ},jut:e,Km:AZ.ZLt,BHt:t,$Ot:t.PFt.$Ot}}r();var VZ=class{get uHt(){return this.Bqt}get Mqt(){const t=[];for(const e of this.Lqt)if("yut"===e.Km){const s=e.yut.BHt,n=RZ(e.fLt,this.pVt,s);var i;t.push({yut:s,fLt:e.fLt,CO:n,RO:n+(null!=(i=s.ct)?i:0)})}else"wqt"===e.Km&&t.push({yut:e.yut,fLt:e.fLt,CO:e.VHt,RO:e.HHt});return t}get Oqt(){const t=[];return this.Fqt.forEach(i=>{for(const e of i.Uqt)"yut"===e.Km?t.push({yut:e.BHt,fLt:e.fLt,CO:e.CO,RO:e.CO+e.ct}):"wqt"===e.Km&&t.push({yut:e.yut,fLt:e.fLt,CO:e.VHt,RO:e.HHt})}),t}vqt(t){"YOt"===t.Km&&(this.Bqt=t.YOt),this.Lqt.push(t),this.Vqt&&(this.Vqt.Qy(),this.Vqt=void 0)}zWt(){return this.Lqt[0]}Hqt(t){_e(this.Lqt,t)}nqt(){return null!=this.Vqt||(this.Vqt=new Ga),this.Vqt.Yy}Wqt(t){this.qqt(t.iat).Wqt(t)}zqt(t){return this.qqt(t).zqt()}RHt(t){this.qqt(t.iat).RHt(t)}Gqt(t){var i;null==(i=this.Fqt.get(t))||i.zg()}Xqt(t){return this.qqt(t).Xqt()}qqt(t){if(this.Fqt.has(t))return this.Fqt.get(t);{const i=new HZ;return this.Fqt.set(t,i),i}}jy(){this.jqt(),this.Qqt()}jqt(){this.Bqt=void 0,Wt(this.Lqt)}Qqt(){this.Fqt.forEach(t=>t.jy())}zg(){this.Fqt.forEach(t=>t.zg()),this.Fqt.clear(),this.jy(),this.Vqt&&(this.Vqt.Zg(),this.Vqt=void 0)}constructor(t){this.Lqt=[],this.Fqt=Ba(),this.pVt=void 0,this.Vqt=void 0,this.Bqt=void 0,this.pVt=t}},HZ=class{get Uqt(){return this.Kqt}Wqt(t){this.Kqt.push(t),this.Yqt&&(this.Yqt.Qy(),this.Yqt=void 0)}zqt(){return this.Kqt[0]}RHt(t){_e(this.Kqt,t)}Xqt(){return null!=this.Yqt||(this.Yqt=new Ga),this.Yqt.Yy}jy(){Wt(this.Kqt)}zg(){this.jy(),this.Yqt&&(this.Yqt.Zg(),this.Yqt=void 0)}constructor(){this.Kqt=[],this.Yqt=void 0}};r(),r(),r();var WZ=class extends gp{constructor(t,i){super(zt.Jqt),this.fLt=void 0,this.Rrt=void 0,this.fLt=t,this.Rrt=i}};r();var qZ=class extends gp{constructor(t){super(zt.Zqt),this.fLt=void 0,this.fLt=t}};r();var zZ=class extends gp{constructor(t,i){super(zt.$qt),this.fLt=void 0,this.Olt=void 0,this.fLt=t,this.Olt=i}};r();var GZ=class extends gp{constructor(t,i){super(zt.tzt),this.fLt=void 0,this.izt=void 0,this.fLt=t,this.izt=i}};r();var XZ=class extends gp{constructor(){super(zt.ezt)}},zt=function(t){return t.Jqt="szt",t.$qt="nzt",t.tzt="rzt",t.Zqt="hzt",t.ezt="ozt",t}({}),jZ=class extends Ne{get azt(){return this.uzt}czt(t){for(const i of this.uzt)Ct(t,i)||this.DHt.Gqt(i);this.uzt=t}get yCt(){return void 0!==this.dzt}EHt(){var t,i;return null!=(i=null==(t=this.dzt)?void 0:t.Yy)?i:Promise.resolve()}THt(){if(this.yCt)throw new m("Cannot perform new operation while transmuxer is still busy")}lzt(t,i){}fzt(t){this.THt(),this.dzt=new Ga;const i=i=>{this.vzt(t,i)};this._zt(t,this.hT.Yg).then(i,i)}gzt(t){this.THt(),this.dzt=new Ga;const i=i=>{this.vzt(t,i)};this.pzt(t,this.hT.Yg).then(i,i)}mzt(t){this.THt(),this.dzt=new Ga;try{for(const i of this.azt){const e={Km:"wqt",iat:i,VHt:t.VHt,HHt:t.HHt,$Ot:t.$Ot,fLt:t.fLt,yut:t.yut};this.Wqt(e)}}finally{this.vzt(t)}}vzt(t,i){this.dzt&&(!i||Ce(i)||function(t){return t instanceof QJ}(i)?(Ce(i)||this.DHt.Hqt(t),this.dzt.Qy(),this.dzt=void 0):this.dzt.Ky(i),this.So(new XZ))}wzt(t,i){this.So(new WZ(t,i))}yzt(t,i){this.So(new zZ(t,i))}bzt(t,i,e){XJ(i)&&this.So(new GZ(t,e))}Azt(t){this.So(new qZ(t))}Wqt(t){Ct(this.uzt,t.iat)&&this.DHt.Wqt(t)}Szt(t){return this.DHt.zqt(t)}RHt(t){this.DHt.RHt(t)}Tzt(t){return this.DHt.Xqt(t)}Zg(){this.hT.Zg(),this.hT=new Zc}constructor(t,i,e){super(),this.DHt=void 0,this.pVt=void 0,this.uzt=void 0,this.dzt=void 0,this.hT=new Zc,this.DHt=t,this.pVt=i,this.uzt=e}};function QZ(t,i){return XJ(t)?0:_.min(t.CO,i)}function KZ(t,i){var e;return _.max(t.CO,i)+(null!=(e=t.ct)?e:0)}var YZ=class extends jZ{_zt(t,i){fr(i);const e={Km:"rRt",lk:t.YOt.lk,iat:this.azt[0],$Ot:t.$Ot,kzt:{Rrt:"",UW:t.UW},CO:t.CO,fLt:t.fLt,BHt:t.YOt.BHt};return this.Wqt(e),Promise.resolve()}async pzt(t,i){fr(i);const e=t.yut.BHt;let s;void 0!==e.Get?(this.pVt.zUt(t.$Ot)||await ua(this.pVt.XUt(t.$Ot),i),s=this.pVt.$Ut(e.Get,e).rF()):s=e.CO;const n=QZ(e,s),r=KZ(e,n);var h;const o={Km:"yut",lk:t.yut.lk,iat:this.azt[0],VHt:n,HHt:r,CO:s,ct:null!=(h=e.ct)?h:0,EU:0,$Ot:t.$Ot,fLt:t.fLt,BHt:t.yut.BHt};this.Wqt(o)}constructor(t,i,e){super(t,i,[e])}};function JZ(t,i){let e=Uo.rL();for(const s of t){let n=s.CO;if(s.fLt.sLt.iFt&&XJ(s.yut))n=0;else{const e=t=>s.fLt===t.fLt&&jJ(t.yut,s.yut),r=hh(t,e);if(void 0!==r)n=_.min(n,r.RO);else{const t=hh(i,e);void 0!==t&&(n=_.min(n,t._Ht.An(0)))}}e=e.HM(Uo.nL(n,s.RO))}return e}r();var ZZ=.001,$Z=class{get Ezt(){return this.xzt}get fLt(){return this.Pzt.fLt}MWt(t){this.Pzt.MWt(t)}get yCt(){return this.Pzt.yCt||this.Izt.yCt||this.xzt.some(t=>t.yCt)}Czt(t){const i=this.xzt.length>0,e=t.slice();for(let t=this.xzt.length-1;t>=0;t--){const i=this.xzt[t];if(!mZ(i))throw new m("Invalid state");const s=tt(e,t=>t.Km===i.Km);s>=0&&!i.AHt?(i.kHt(e[s]),Ra(e,s)):Ra(this.xzt,t)}for(const t of e){const i=new lZ(t);this.xzt.push(new pZ(t.Km,t,this.Rzt,i,this,this.Dzt,this.Nzt))}i&&e.length>0&&this.Rzt.jy();const s=t.map(t=>t.Km);this.Izt.czt(s)}iJ(t){var i;const e=(null==(i=this.Mz)?void 0:i.iJ(t))||!1;return e&&(this.Zg(),this.Rzt.jy()),e}Bzt(t){const i=this.xzt[0];if(void 0!==i){if(i.Km!==at.LT||i.yCt)throw new m("Invalid state");if(!i.AHt)return void i.kHt(t)}const e=new lZ(t),s=new pZ(at.LT,t,this.Rzt,e,this,void 0,void 0);this.xzt=[s]}get uHt(){const t=this.Rzt.uHt;if(t)return t;if(this.xzt.length>0){const t=this.xzt[0].mHt.uHt;if(t&&this.xzt.every(i=>i.mHt.uHt===t))return t}}Bat(){for(const t of this.xzt)t.mHt.fHt()}get Mzt(){const t=JZ(this.Rzt.Mqt.concat(this.Rzt.Oqt),hs(this.xzt,t=>t.mHt.bct)).MM();let i;if(0===this.xzt.length)i=t;else{i=Uo.hL();for(const t of this.xzt)i=i.Mn(t.mHt.Fx);for(const t of this.xzt)i=i.qM(t.wHt);i=i.HM(t)}return i.VM(ZZ)}get Lzt(){const t=JZ(this.Rzt.Oqt,hs(this.xzt,t=>t.mHt.bct)).MM();let i;if(0===this.xzt.length)i=t;else{i=Uo.hL();for(const t of this.xzt)i=i.Mn(t.mHt.Fx);i=i.HM(t)}return i}Tdt(t){const i=this.Mzt.iL(t,ZZ);return i?i.An(i.V-1):t}KWt(t){return!!this.Mzt.iL(t,ZZ)||this.Pzt.KWt(t)}Ozt(t){return this.Lzt.Cr(t,ZZ)}Fzt(t,i,e){for(const t of this.xzt){const e=t.mHt,s=e.Npt;if(void 0!==s&&i>=s&&!e.Fx.MM().Cr(s))return!0}return i-t<e}Zg(){this.Uzt(),this.Vzt()}Uzt(){this.Pzt.Zg()}Vzt(){this.Izt.Zg(),this.Ezt.forEach(t=>t.Zg())}zg(){this.Zg(),this.Pzt.zg()}constructor(t,i,e,s,n,r){this.Pzt=void 0,this.Rzt=void 0,this.Izt=void 0,this.Dzt=void 0,this.Nzt=void 0,this.Mz=void 0,this.xzt=void 0,this.Pzt=t,this.Rzt=i,this.Izt=e,this.Dzt=s,this.Nzt=n,this.Mz=r,this.xzt=[]}};r();var t$=class extends gp{constructor(){super(vY.iLt)}};r();var i$=class extends gp{constructor(){super(vY.$Mt)}};r(),r();var e$="LazyMediaBuffer",s$=class extends Ne{get GT(){return this.jS}get V3(){return this.Vp}get Cd(){if(!this.Wrt)throw new as(me.MEDIA_LOAD_ERROR,"Cannot get the configuration of an uninitialized MediaBuffer.");return this.Wrt.Cd}get VY(){return this.KY}set VY(t){this.KY=t,this.Wrt&&(this.Wrt.VY=t)}get Fx(){return this.Wrt?this.Wrt.Fx:Uo.rL()}get W3(){return this.Wrt?this.Wrt.W3:this.q3.s$}get zY(){return this.ZY}set zY(t){this.ZY=t,this.Wrt&&(this.Wrt.zY=t)}G3(t,i){ol.OLt(e$,"Marking gap from "+t+" to "+i+"."),this.q3.r$(t,i),this.Wrt&&this.Wrt.G3(t,i)}X3(t,i){ol.OLt(e$,"Removing gap from "+t+" to "+i+"."),this.q3.h$(t,i),this.Wrt&&this.Wrt.X3(t,i)}Hzt(t){this.Wrt=t,this.Wrt.zY=this.ZY,this.Wrt.VY=this.KY;const i=this.q3.s$;for(let t=0;t<i.V;t++)this.Wrt.G3(i.Tn(t),i.An(t));this.Wrt.wn(bi.pZ,this.Rs),this.Wzt.Qy(t)}qzt(t){return ua(this.Wzt.Yy,t)}async Q2(t,i,e){const s=await this.qzt(e);await s.Q2(t,i,e)}async j3(){const t=await this.qzt();await t.j3()}async J2(t,i,e){const s=await this.qzt(e);await s.J2(t,i,e)}async pS(t,i,e){const s=await this.qzt(e);await s.pS(t,i,e)}async f3(t,i){const e=await this.qzt();await e.f3(t,i)}IZ(t){return!!this.Wrt&&this.Wrt.IZ(t)}async RZ(t){const i=await this.qzt();await i.RZ(t)}kn(){var t;this.Vo(),null==(t=this.Wrt)||t.mn(bi.pZ,this.Rs),this.Wrt=void 0}constructor(t,i){super(),this.Vp=void 0,this.zzt=void 0,this.jS=void 0,this.Wrt=void 0,this.Wzt=void 0,this.KY=void 0,this.ZY=void 0,this.q3=void 0,this.Vp=t,this.zzt=i,this.jS=void 0,this.Wrt=void 0,this.Wzt=new Ga,this.KY=20,this.ZY=30,this.q3=new qN}},n$="LazyMediaSource",r$=class{get Cd(){return{Km:O.SV,q4:[],fq:[]}}get e4(){return this.Gzt}get s4(){return this.Xzt}get Fx(){return this.aq?this.aq.Fx:Uo.rL()}get ct(){return this.aq?this.aq.ct:this.Zb}get jZ(){return!!this.aq&&this.aq.jZ}get kP(){return this.aq?this.aq.kP:Uo.hL()}F4(t){this.Zb=t,this.aq&&this.aq.F4(t)}F3(){this.Wet=!0,this.aq&&this.aq.F3()}I3(){this.Wet=!1,this.aq&&this.aq.I3()}W4(t,i,e,s){this.jzt=t,this.Qzt=i,this.Kzt=Boolean(e),this.Yzt=Boolean(s),this.aq&&this.aq.W4(t,i,e,s)}IZ(t){return this.aq?this.aq.IZ(t):LL(this,t)}async RZ(t){if(!this.IZ(t))throw new m("LazyMediaSource - Unable to reconfigure MediaSource.");if(this.aq)await this.aq.RZ(t);else{var i,e;this.PL.G7();const s=await this.PL.Un(t);S(this.Zb)||s.F4(this.Zb),this.Wet&&s.F3(),s.W4(this.jzt,this.Qzt,this.Kzt,this.Yzt),ol.OLt(n$,"The MediaSource has been loaded."),this.Jzt=!0,this.aq=s,null==(i=this.Gzt)||i.Hzt(this.aq.e4),null==(e=this.Xzt)||e.Hzt(this.aq.s4),this.Zzt.Qy(s),this.PL.X7()}}NZ(t){this.aq.NZ(t)}async zg(){var t,i;null==(t=this.Gzt)||t.kn(),null==(i=this.Xzt)||i.kn(),this.aq&&await this.aq.zg()}constructor(t,i,e){this.PL=void 0,this.Gzt=void 0,this.Xzt=void 0,this.Zzt=void 0,this.aq=void 0,this.Jzt=void 0,this.Zb=void 0,this.Wet=void 0,this.jzt=void 0,this.Qzt=void 0,this.Kzt=void 0,this.Yzt=void 0,this.PL=t,this.Gzt=void 0,this.Xzt=void 0,this.Zzt=new Ga,this.aq=void 0,this.Jzt=!1,this.Zb=NaN,this.Wet=!1,this.jzt=0,this.Qzt=1/0,this.Kzt=!1,this.Yzt=!1,i&&(ol.OLt(n$,"Created lazy media buffer for audio."),this.Gzt=new s$(at.Bk,this)),e&&(ol.OLt(n$,"Created lazy media buffer for video."),this.Xzt=new s$(at.Mk,this))}};r();var h$=class{get Km(){return this.Vp}get Fx(){return this.Wrt.Fx.Ly(-this.QU).Mn(Uo.hL())}get W3(){return this.Wrt.W3.Ly(-this.QU).Mn(Uo.hL())}$zt(t,i){return this.Wrt===t&&this.QU===i}async J2(t,i){if(this.Wrt.Cd.GT!==t.kzt.Rrt){const e={GT:t.kzt.Rrt};if(!this.Wrt.IZ(e))throw new BB(this.Wrt.Cd.GT,t.kzt.Rrt);await this.Wrt.RZ(e),fr(i)}await this.Wrt.J2(t.lk,{u2:t.fLt.JI},i)}async Q2(t,i){fr(i),ol.cN("HlsMediaBuffer","Got media data, appending to "+this.Vp+" MediaBuffer: "+ah(t.BHt.Syt));const e=t.VHt+this.QU,s=t.HHt+this.QU,n={Get:t.CO+this.QU,ct:t.ct,EU:t.EU+this.QU,u2:t.fLt.JI};void 0!==t.lk&&await this.Wrt.Q2(t.lk,n,i),this.tGt(e,s)}tGt(t,i){const e=this.Wrt.Fx,s=new Uo([t,i]).qM(e);for(let t=0;t<s.V;t++)this.Wrt.G3(s.Tn(t),s.An(t));for(let t=0;t<e.V;t++)this.Wrt.X3(e.Tn(t),e.An(t))}G3(t,i){this.Wrt.G3(t+this.QU,i+this.QU)}X3(t,i){this.Wrt.X3(t+this.QU,i+this.QU)}constructor(t,i,e){this.Vp=void 0,this.Wrt=void 0,this.QU=void 0,this.Vp=t,this.Wrt=i,this.QU=e}};r();var o$=1e-6,a$=class{get Fx(){return this.rPt}get W3(){return this.hPt}$zt(t){return this.iGt===t}async J2(t,i){const e=t.lk.lk;if(this.eGt(e),this.iGt.Km===nh.TTML){this.pVt.zUt(t.$Ot)||await ua(this.pVt.XUt(t.$Ot),i);const s=this.sGt(e,t.$Ot);for(const t of s)this.iGt.nV(t)}}async Q2(t,i){if(void 0===t.lk)return;const e=t.CO,s=e+t.ct;this.rPt=this.rPt.HM(Uo.nL(e,s)).VM(o$),this.G3(t.VHt,t.HHt),this.X3(e,s),this.pVt.zUt(t.$Ot)||await ua(this.pVt.XUt(t.$Ot),i),this.Y2(t.lk.lk,t.$Ot,t.BHt)}Y2(t,i,e){let s;this.eGt(t),s=this.iGt.Km===nh.WEBVTT?this.nGt(t,e):this.sGt(t,i);for(const t of s)this.iGt.nV(t)}nGt(t,i){const e=ix(t),s=e.L;var n;const r=null!=(n=e.IU)?n:{CU:ul.SF,bh:ul.SF};for(const t of s){const e=ul.hU(t.CO).gF(r.bh).gO(r.CU),s=this.pVt.$Ut(e,i).rF(),n=s+(t.RO-t.CO);t.YO(s,n)}return s}sGt(t,i){const e=this.pVt.ZUt(i).rF();return Fx(t,this.iGt,{TU:0,kU:1/0,EU:e},Jy)}eGt(t){this.iGt.Km===nh.DEFAULT&&(this.iGt.Km=this.rGt(t)?nh.WEBVTT:nh.TTML)}rGt(t){return lx(hm(Wu(dh(t),0,_.min(t.byteLength,16)),new oi))}G3(t,i){this.hPt=this.hPt.HM(Uo.nL(t,i)).VM(o$)}X3(t,i){this.hPt=this.hPt.qM(Uo.nL(t,i))}constructor(t,i){this.iGt=void 0,this.pVt=void 0,this.rPt=Uo.rL(),this.hPt=Uo.rL(),this.iGt=t,this.pVt=i}};function u$(t){if(t.Km!==dl.YLt||void 0===t.aLt)return;const i=t.aLt.match(/^CC([1-4])$/);if(i)return Number(i[1]);const e=t.aLt.match(/^SERVICE([\d+])$/);return e?Number(e[1]):void 0}r(),r(),r();var c$=class{zLt(t){var i,e,s;return null==(s=null==(e=this.aq)||null==(i=e.s4)?void 0:i.IZ(t))||s}GLt(t){var i,e,s;return null==(s=null==(e=this.aq)||null==(i=e.e4)?void 0:i.IZ(t))||s}constructor(t){this.aq=void 0,this.aq=t}};r();function d$(t,i,e,s){void 0===s&&(s=Rk.maximumBackoff);const n=function(t,i){if(void 0===i)return t;const e=i.preferredVideoCodecs,s=i.preferredAudioCodecs;if(void 0!==e){let i;for(const n of e){const e=t.filter(t=>t.Rrt&&t.Rrt.W9&&Tr(t.Rrt.W9,n));if(0===e.length)continue;if(void 0===s)return e;void 0===i&&(i=e);const r=l$(e,s);if(void 0!==r)return r}if(void 0!==i)return i}if(void 0!==s){const i=l$(t,s);if(void 0!==i)return i}return t}(t,i),r=f$(n,s),h=r.length>0?r:n;switch(e.WY.type){case xa.BANDWIDTH:{const t=e.jY,i=h.filter(i=>i.IW<=t);if(i.length>0)return uf(i,t=>t.IW)}case xa.PERFORMANCE:return $i(h,t=>t.IW);case xa.QUALITY:return uf(h,t=>t.IW)}}function l$(t,i){for(const e of i){const i=t.filter(t=>t.Rrt&&t.Rrt.q9&&Tr(t.Rrt.q9,e));if(0!==i.length)return i}}function f$(t,i){return t.filter(t=>v$(t,i))}function v$(t,i){const e=i+2e3,s=0===t.fFt.length||t.fFt.some(t=>t.sLt.bUt<zd.Mg()-e),n=0===t.lFt.length||t.lFt.some(t=>t.sLt.bUt<zd.Mg()-e);return s&&n}function _$(t,i){return void 0===i&&(i=!1),function(e,s){void 0===s&&(s="*");let n=p$(e,"tag");const r=p$(null==s?"*":s,"range"),h=[];let o,a,u,c=-1;for(;++c<r.length;)if(o=r[c].toLowerCase(),i||"*"!==o){for(a=-1,u=[];++a<n.length;)if(t(n[a].toLowerCase(),o)){if(!i)return n[a];h.push(n[a])}else u.push(n[a]);n=u}return i?h:void 0}}r(),r();_$((t,i)=>"*"===i||t===i||nl(t,i+"-"),!0),_$((t,i)=>{const e=t.split("-"),s=i.split("-");let n=0,r=0;if("*"!==s[r]&&e[n]!==s[r])return!1;for(n++,r++;r<s.length;)if("*"!==s[r]){if(!e[n])return!1;if(e[n]!==s[r]){if(1===e[n].length)return!1;n++}else n++,r++}else r++;return!0},!0);var g$=_$((t,i)=>{let e,s=i;for(;;){if("*"===s||t===s)return!0;if(e=s.lastIndexOf("-"),e<0)return!1;"-"===s.charAt(e-2)&&(e-=2),s=s.slice(0,e)}});function p$(t,i){const e=t&&"string"==typeof t?[t]:t;if(!e||"object"!=typeof e||!("length"in e))throw new m("Invalid "+i+" `"+e+"`, expected non-empty string");return e}function m$(t){const i=hh(t,t=>t.nLt),e=t.filter(t=>t.rLt),s=zd.Mm,n=e.map(t=>t.bs).filter(it),r=g$(n,s);return r?hh(e,t=>t.bs===r):i}function w$(t){var i;return null!=(i=m$(t))?i:t[0]}r();var y$=class extends ms{hGt(t){const i=this.iV.sI(us.HU,t.l,t.l,t.bs,t.nLt,void 0,void 0,t.cLt.map(xY).filter(it));this.oGt.set(t.JI,i),this.tt(i)}mFt(t){const i=this.oGt.get(t.JI);i&&(this.oGt.delete(t.JI),this.iV.rV(i))}JU(t){const i=this.aGt(t);i&&(Wr(this._Lt.uGt(i)),this.oGt.forEach(i=>{i!==t&&(i.Qk=xh.Nh)}))}ZU(t){const i=this.aGt(t);i&&this._Lt.cGt&&this._Lt.cGt===i&&Wr(this._Lt.uGt(void 0))}dGt(t){return this.oGt.get(t.JI)}aGt(t){const i=this._Lt.vLt;if(i)return hh(i.vFt,i=>t===this.dGt(i))}eV(t,i,e){const s=ht(t,i,e);return this.oGt.forEach((i,e)=>{i===t&&this.oGt.set(e,s)}),s}async hr(){await super.hr(),this.oGt.clear()}constructor(t,i){super(i),this._Lt=void 0,this.oGt=re(),this._Lt=t}},ka="LLHLSPlayer",b$=[Jr.TM,Jr.kM,Jr.EM,Jr.AI],A$=[d.Kw,d.xw,d.Lw,d.Bw],S$=[d.Ww,d.qw,d.Gw,d.Xw,d._y,d.iy,d.ey,d.sy,d.oy],T$=[d.Ww,d.qw,d.sy,d.oy],k$=class extends Ne{get OL(){var t;if(this.ct!==1/0)return;const i=this.Vx;if(i){return(Date.now()-i.getTime())/1e3}const e=null==(t=this._Lt)?void 0:t.lGt;return e?e-this.zx:void 0}get fGt(){const t=this.vGt;for(const i of t){if(!i.sLt.iFt)return!1;const t=hf(i.sLt.bct,-1);if(t&&t.$Ot!==this._Gt)return!1}return!0}get vLt(){var t;return null==(t=this._Lt)?void 0:t.vLt}get CLt(){var t;return null==(t=this._Lt)?void 0:t.CLt}get DLt(){var t;return null==(t=this._Lt)?void 0:t.DLt}get cGt(){var t;return null==(t=this._Lt)?void 0:t.cGt}get vGt(){return this._Lt?this._Lt.vGt:[]}get ht(){return this.tO}get Fx(){let t=this.PL.Fx;return void 0!==this._Lt&&(t=t.Ly(-this._Lt.EU).Mn(Uo.hL())),t._s()}get Vx(){if(this.vLt){const t=this.zx;return this.vLt.gFt(t)}}set Vx(t){if(!t||!this.vLt)return;const i=this.vLt.pFt(t);void 0!==i&&this.Xx(i,{iq:!1,gGt:!0})}get bt(){var t;return null==(t=this._Lt)?void 0:t.Mc}get zx(){var t;return null!=(t=this.pGt)?t:this.mGt(this._Lt)}set zx(t){this.Xx(t)}Xx(t,i){var e,s,n,r;ol.cN(ka,"Seeking to "+t+" s.");const h={iq:null!=(s=null==i?void 0:i.iq)?s:t===1/0,gGt:null==(n=null==i?void 0:i.gGt)||n,zOt:null!=(r=null==i?void 0:i.zOt)&&r};this.pGt=t,this.wGt=h,this.yGt=!0,this.$kt=!0,null==(e=this.JW)||e.KP(),this.So(new ji(t)),this.T9.Zg(),this.bGt&&(zd.Lg(this.AGt),h.gGt?this.AGt=zd.Og(()=>this.SGt(t,h),50):this.SGt(t,h))}SGt(t,i){zd.Lg(this.AGt);const e=[this.Ypt,this.TGt,this.k9].filter(it);this.T9=new Zc,this.T9.$g(this.uV.Yg),this.k9=Cu(this.E9(e,t,i,this.T9.Yg),this.T9).catch(this.kGt)}get ct(){var t,i;if(void 0===this.EGt&&this.fGt){const t=this.PL.ct;if(!S(t))return this.xGt(this._Lt,t)}return null!=(i=null==(t=this._Lt)?void 0:t.ct)?i:NaN}get Qx(){if(!this.fGt)return!1;if(this.xP&&void 0!==this._Lt&&this.bGt){const t=this.zx,i=this._Lt.PGt;return isFinite(i)&&t>=i}return this.PL.Qx||this.IGt()}get lt(){return this.nq}get Jx(){return this.rq}get $x(){}get iP(){}get sP(){return!1}get rP(){var t,i;return Y({},{rO:0,hO:0,oO:0,aO:0,uO:0,cO:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}},this.PL.hP(),{uO:null!=(i=null==(t=this._Lt)?void 0:t.uO)?i:0,aO:this.Mz.CY.IW})}get Br(){var t;return null==(t=this._Lt)?void 0:t.Br}get CGt(){var t;return null==(t=this._Lt)?void 0:t.CGt}get oP(){return this.PL.oP}set oP(t){this.PL.oP=t}get cP(){var t,i;return null==(i=null==(t=this._Lt)?void 0:t.cP)||i}get lP(){return this.PL.lP}get vP(){return this.PL.vP}set vP(t){ol.cN(ka,"Setting playback rate to "+t+"."),this.PL.vP=t}get pP(){return this.Dkt._s()}get Dkt(){let t=this.PL.pP;return void 0!==this._Lt&&(t=t.Ly(-this._Lt.EU).Mn(Uo.hL())),t}get wP(){return this.oq}set wP(t){this.oq!==t&&(this.oq=t,this.RGt())}get AP(){var t;let i=this.PL.AP;return(null==(t=this._Lt)?void 0:t.DGt)&&(i=_.max(Lr.Qn,i)),i}get sUt(){var t,i;return null!=(i=null==(t=this._Lt)?void 0:t.sUt)?i:Uo.rL()}get kP(){return this.Tkt._s()}get Tkt(){var t,i;let e=null!=(i=null==(t=this._Lt)?void 0:t.kP)?i:Uo.rL();if(0===e.V)return e;if(this.aq&&this.fGt&&this.aq.ct!==1/0&&(e=new Uo([e.Tn(0),this.xGt(this._Lt,this.aq.ct)])),this._Lt&&!this._Lt.iFt){const t=this.Dkt,i=e.An(e.V-1);if(t.V>0&&t.An(t.V-1)>i){let s=t.An(t.V-1);const n=this._Lt.sUt;n&&n.V>0&&(s=_.min(s,n.An(n.V-1))),e=e.HM(new Uo([i,s]))}}return e}get xP(){var t;return null!=(t=this.yGt)?t:this.PL.xP}get uq(){}get nt(){return this.Gl}get rt(){return this.sO}get DP(){var t,i;return this.PL.DP||(null==(i=this.vLt)||null==(t=i.RRt)?void 0:t.Mi)||0}get MP(){var t,i;return this.PL.MP||(null==(i=this.vLt)||null==(t=i.RRt)?void 0:t.Ti)||0}get OP(){return this.PL.OP}set OP(t){ol.cN(ka,"Setting volume to "+t+"."),this.PL.OP=t}get VP(){return this.Lz}get WP(){return!1}set WP(t){}get dq(){return this.lq}YP(){return!1}qP(){return this.PL.Ma}Aa(){return this.PL.Sq}sI(t){var i;const e=this.PL.Tq(t);var s;return e.EU=null!=(s=null==(i=this._Lt)?void 0:i.EU)?s:0,this.axt.tt(e),e}we(){ol.cN(ka,"Hiding the player."),this.PL.we()}jP(){var t;ol.cN(ka,"Pausing the player."),this.PL.jP(),(null==(t=this.JW)?void 0:t.oL)&&this.JW.KP()}async QP(){this.d9=!0;const t=this.PL.QP();if(this.Qx){const t=this.Tkt;t.V>0&&this.Xx(t.Tn(0),{gGt:!1})}this.bGt||await this.RGt(),this.tkt(),await t,this.tEt()}tkt(){if(this.bGt&&this.$kt){if(!this.Skt()){var t;const i=null==(t=this.vLt)?void 0:t.sLt;if(null==i?void 0:i.iFt){let t=!0,e=0;const s=i.Tn;if(!this.$kt&&s&&(t=!s.zOt,e=s.qOt,e<0)){const t=i.sUt;e+=t.An(t.V-1)}this.SGt(e,{iq:t})}else this.SGt(1/0,{iq:!0})}this.NGt()&&this.SGt(1/0,{iq:!0})}}Skt(){var t;const i=this.Tkt;if(0===i.V)return!0;const e=this.zx,s=null==(t=this._Lt)?void 0:t.BGt,n=null==s?void 0:s.zM(e);return(n&&n>0?s.An(n):e)>=i.Tn(0)}NGt(){const t=this.zx;return x$(t,this.CLt)||x$(t,this.DLt)}OEt(){this.nq=void 0,this.rq=void 0}Qq(t){this.nq||(Wr(this.hr()),this.nq=ar(t),this.rq=t,this.So(new el(t)))}be(){ol.cN(ka,"Showing the player."),this.PL.be()}JP(){throw new m("Not implemented")}ZP(){throw new m("Not implemented")}$P(){}tI(){this.bGt&&Wr(this.MGt({tI:!0}))}async Ta(t,i,e){const s={stack:[],error:void 0,hasError:!1};try{if(ol.cN(ka,"Setting the player source to "+t.src+"."),this.OEt(),this._Lt&&(await this.hr(),fr(e)),Ak(t))return;const r=Es(s,Zc.ep([e]),!1);var n;if(this.pq.BW(t.contentProtection),void 0!==this.EGt&&this.EGt.Mc===t)this._Lt=this.EGt,this._Lt.mn(S$,this.LGt),this.uV=this.OGt,this.uV.$g(r.Yg),this.OGt=new Zc,this.FGt=void 0,null==(n=this.UGt)||n.Zg(),this.UGt=void 0,this.EGt=void 0,this.VGt=!1,this.HGt!==this._Lt&&(this.HGt=void 0),this._Lt.WGt(this.PL);else void 0!==this.EGt&&(await this.CP(),await this.qGt()),this.uV=Zc.ep([r.Yg]),this._Lt=this.zGt(t,i,void 0,this.PL);this._Lt.wn(S$,this.Rs),this._Lt.wn(vY.iLt,this.GGt),this.tO.OI=this._Lt.ht,this.sO.OI=this._Lt.rt,this.XGt.OI=this._Lt.nt;const h=this._Lt.jGt;h&&(this.JW=new ZG(this,this.PL,h),this.JW.Rt=!0,this.Lz.Ea(this.JW)),AP(this.Gl),this.QGt(),this.Xkt(),this.KGt.forEach(this.Rs),this.KGt=[],this.RGt(),r.zg()}catch(t){s.error=t,s.hasError=!0}finally{Zs(s)}}async IP(t,i,e,s){fr(s),void 0!==this.EGt&&await this.CP(),fr(s),this.EGt=this.zGt(t,i,e,void 0),this.EGt.wn(S$,this.LGt)}async CP(){var t;void 0!==this.EGt&&(this.OGt.Zg(),null==(t=this.UGt)||t.Zg(),this.UGt=void 0,void 0!==this.FGt&&(await this.FGt.catch(gs),this.FGt=void 0),await this.EGt.zg(),this.OGt=new Zc,this.HGt===this.EGt&&(this.HGt=void 0),this.EGt=void 0,this.VGt=!1,this.KGt=[])}zGt(t,i,e,s){return null!=this.YGt||(this.YGt=this.JGt.jet()),new E$(this,t,i,this.aV,this.Mz,this.ZGt,this.Sut,this.$Gt,this.XHt,this.YGt,this.Ndt,e,s)}RGt(){return this.Ypt=this.tXt(this.Ypt,this.uV.Yg).catch(this.Lmt),this.Ypt}async tXt(t,i){if(t&&(await t,fr(i)),!this._Lt)return;const e=this.oq;e===Dn.HL||this.d9?(await this.iXt(i),await this.eXt(i)):e===Dn.zU&&await this.iXt(i)}async iXt(t){fr(t),void 0===this._Lt||this._Lt.DGt||(await this._Lt.iXt(t),this.Cq.zV(),this.QGt())}QGt(){var t;if(this.JW)return;const i=null==(t=this._Lt)?void 0:t.jGt;i&&(this.JW=new ZG(this,this.PL,i),this.Lz.Ea(this.JW))}get sXt(){return this.bGt}async eXt(t){fr(t),this.bGt||(this.bGt=!0,await this._Lt.MGt(this.CLt,this.DLt,this.cGt,{nXt:!0}))}rXt(){const t=this.EGt;return void 0===t?Promise.resolve():(0===t.EU&&(t.EU=this._Lt.EU+this._Lt.ct),null!=this.UGt||(this.UGt=new Ga),void 0===this.FGt&&(this.FGt=t.iXt(this.OGt.Yg),this.UGt.$g(this.FGt)),this.UGt.Yy)}hXt(){var t;return(null!=(t=this.UGt)?t:this.UGt=new Ga).Yy}mGt(t){return this.xGt(t,this.PL.zx)}xGt(t,i){let e=i;return t===this._Lt&&void 0!==this.EGt&&this.EGt.EU>0&&(e=_.min(e,this.EGt.EU)),void 0!==t&&(e=_.max(0,e-t.EU)),e}IGt(){if(void 0===this.EGt||0===this.EGt.EU)return!1;if(!this.VGt)return!1;return this.PL.zx+.25>=this.EGt.EU}get oXt(){return void 0===this._Lt?[]:void 0===this.EGt?this._Lt.aXt:this._Lt.aXt.concat(this.EGt.aXt)}uXt(){var t,i;return{Ti:this.PL.Ti,Mi:this.PL.Mi,qLt:YQ(this.PL),udt:null==(i=this.bt)||null==(t=i.abr)?void 0:t.restrictToPlayerSize}}cXt(){return new c$(this.aq)}MGt(t){void 0===t&&(t={});const i={bLt:t.bLt||!1,SLt:t.SLt||!1,ALt:t.ALt||!1,tI:t.tI||!1,nXt:t.nXt||!1},e=[this.TGt,this.k9].filter(it);return this.T9.Zg(),this.T9=new Zc,this.T9.$g(this.uV.Yg),this.dXt.Zg(),this.dXt=new Zc,this.dXt.$g(this.uV.Yg),this.TGt=Cu(this.lXt(e,i,this.dXt.Yg),this.dXt).catch(this.kGt),this.TGt}async lXt(t,i,e){var s,n,r;if(!this.bGt)return void await this._Lt.fXt(e);await Promise.all(t.map(t=>t.catch(gs))),await this.vXt(),this._Xt(),await this.gXt(e),await this.pXt(i.SLt,i.ALt),fr(e);const h=await this._Lt.mXt();fr(e);const o=await this.wXt(h,i.tI,e),a=null==(s=this.aq)?void 0:s.e4,u=null==(n=this.aq)?void 0:n.s4;if(this._Lt.yXt(void 0!==a,void 0!==u,i.bLt||o,i.SLt,i.ALt),this._Lt.bXt(i.bLt),void 0!==this.EGt&&(this.EGt.yXt(void 0!==a,void 0!==u,i.bLt||o,i.SLt,i.ALt),this.EGt.bXt(i.bLt)),this._Lt.Czt(a,u),void 0!==this.EGt){const t=await this.EGt.mXt();t&&this.aq&&this.aq.IZ(t)?(this.EGt.Czt(a,u),this.VGt=!0):(this.EGt.Czt(void 0,void 0),this.VGt=!1)}this.AXt(),fr(e);try{var c;await Promise.all([this._Lt.SXt(e),null==(c=this.EGt)?void 0:c.SXt(e)].filter(it))}catch(t){sa(t)}if(fr(e),this.V4(),this._Lt.BUt(),null==(r=this.EGt)||r.BUt(),void 0===this.pGt){if(!this.$kt){const t=this._Lt.TXt;if(t)return void this.SGt(t.YF,{iq:t.iq});if(this._Lt.EU>0)return void this.SGt(0,{iq:!1})}this.oXt.length>0&&this.kXt()}else this.SGt(this.pGt,this.wGt)}async wXt(t,i,e){if(!i&&this.aq){if(!t)return!1;if(this.aq.IZ(t))return await this.gXt(e),await this.aq.RZ(t),!1}for(const t of this._Lt.aXt)t.Ezt.forEach(t=>t.Zg());this.PL.G7();try{let i;if(this.aq&&await this.PL.hr(),t)i=await this.PL.Un(t);else{const t=void 0!==this.CLt,e=void 0!==this.DLt;i=new r$(this.PL,t,e)}this.EXt(i)}finally{this.PL.X7()}return!0}EXt(t){this.aq=t,this.V4(),this.WTt(),this.qTt()}V4(){var t,i;const e=this.aq,s=void 0!==this.EGt&&this.VGt?this.EGt:this._Lt;if(e&&void 0!==s&&(s!==this.HGt||S(e.ct))){var n;s!==this.HGt&&e.I3();const t=(null!=(n=s.xXt)?n:NaN)+s.EU;t>0&&e.F4(t),this.HGt=s}null==(t=this._Lt)||t.BUt(),null==(i=this.EGt)||i.BUt()}async pXt(t,i){if(!this.aq)return;const e=[];t&&this.aq.e4&&e.push(this.aq.e4.pS(0,1/0)),i&&this.aq.s4&&e.push(this.aq.s4.pS(0,1/0)),await Promise.all(e)}WTt(){const t=this.aq;t&&(t.s4&&(t.s4.VY=this.Mz.YY),t.e4&&(t.e4.VY=this.Mz.YY))}qTt(){const t=this.aq;t&&(t.s4&&(t.s4.zY=this.Mz.zY),t.e4&&(t.e4.zY=this.Mz.zY))}AXt(){var t,i,e,s;const n=void 0!==(null==(t=this.aq)?void 0:t.e4),r=void 0!==(null==(i=this.aq)?void 0:i.s4);null==(e=this._Lt)||e.AXt(n,r),null==(s=this.EGt)||s.AXt(n,r)}async E9(t,i,e,s){await Promise.all(t.map(t=>t.catch(gs))),fr(s),await this.vXt(),fr(s),this.pGt=void 0,this.yGt=void 0,this.$kt=!0;const n=(e.zOt?this.sUt:this.Tkt).LM(i)+this._Lt.EU,r=this.PL.ww(d.Zw,s);this.PL.Oy(n,e.iq),this.bGt&&this._Lt.aXt.length>0&&(this.Br.AM.lVt(),this.PXt(this.zx),this.kXt()),await r,this.tEt()}tEt(){const t=this.JW;if(void 0===t)return;const i=this.OL;if(this.lP||this.xP||void 0===i)return;i<this.Lz.Cd.maximumOffset?t.Tn():t.KP()}PXt(t){var i,e;const s=null!=(e=null==(i=this._Lt)?void 0:i.aXt)?e:[];let n=!1;for(const i of s)i.KWt(t)||(i.Uzt(),i.Rzt.jqt(),n=!0),i.Ozt(t)||(i.Vzt(),i.Rzt.Qqt(),n=!0);if(void 0!==this.EGt&&n){const t=this.EGt.aXt;for(const i of t)i.Zg()}}_Xt(){for(const t of this.oXt)t.Zg()}vXt(){return Promise.all([this._Nt(),this.IXt(),this.CXt()])}kXt(){this.vNt(),this.RXt(),this.DXt()}async NXt(){this.bGt&&this.oXt.length>0&&(this.oXt.forEach(t=>t.Uzt()),await this._Nt(),this.vNt(),this.oXt.forEach(t=>t.Pzt.eqt()))}vNt(){if(this.BXt)return;const t=()=>{this.BXt=void 0};this.MXt=new Zc,this.MXt.$g(this.uV.Yg),this.BXt=Cu(this.LXt(this.MXt.Yg),this.MXt).catch(this.kGt).then(t,t)}async _Nt(){var t;null==(t=this.MXt)||t.Zg();const i=this.BXt;this.BXt=void 0,i&&await i}async LXt(t){fr(t),await this.OXt(this._Lt,t),fr(t),void 0!==this.EGt&&(await ua(this.rXt(),t),fr(t),await this.OXt(this.EGt,t))}async OXt(t,i){fr(i);const e=t.aXt;for(;;){const s={stack:[],error:void 0,hasError:!1};try{const n=[],r=_.max(0,this.PL.zx-t.EU);for(const t of e){const e=t.Pzt,s=t.Tdt(r);if(e.yCt)n.push(e.EHt());else if(t.Fzt(r,s,this.Mz.YY)||e.qWt){const r=e.fLt.sLt,h=e.YWt(s);if(void 0===h){if(r.iFt)continue;const t=r.bct;t.length&&t[0].CO>s&&(this.zx=1/0),e.rqt(),e.$Wt(s,i)}else{const[i,s]=h;e.Lat(i,s,t.uHt),t.Izt.lzt(i,s)}n.push(e.EHt())}}const h=Es(s,Zc.ep([i]),!1);if(0===n.length){e.every(t=>t.Pzt.jCt)||n.push(this.PL.ww(d.py,h.Yg));for(const t of e)void 0!==t.Pzt.zWt()&&n.push(t.Izt.ww([zt.Zqt,zt.ezt],h.Yg));if(0===n.length)break}await ua(Promise.race(n),h.Yg)}catch(t){s.error=t,s.hasError=!0}finally{Zs(s)}}}RXt(){if(this.FXt)return;const t=()=>{this.FXt=void 0};this.UXt=new Zc,this.UXt.$g(this.uV.Yg),this.FXt=Cu(this.VXt(this.UXt.Yg),this.UXt).catch(this.kGt).then(t,t)}async IXt(){var t;null==(t=this.UXt)||t.Zg();const i=this.FXt;this.FXt=void 0,i&&await i}async VXt(t){fr(t);const i=this.oXt;for(;;){const e=[];for(const t of i){const i=t.Pzt,s=t.Izt;if(s.yCt)e.push(s.EHt());else{const t=i.zWt();t?"yut"===t.Km?(s.gzt(t),e.push(s.EHt())):"YOt"===t.Km?(s.fzt(t),e.push(s.EHt())):"wqt"===t.Km&&(s.mzt(t),e.push(s.EHt())):e.push(i.sqt())}}if(0===e.length)break;await ua(Promise.race(e),t)}}DXt(){if(this.HXt)return;this.WXt=new Zc,this.WXt.$g(this.uV.Yg);const t=()=>{this.HXt=void 0};this.HXt=Cu(this.qXt(this.WXt.Yg),this.WXt).catch(this.kGt).then(t,t)}async CXt(){var t;null==(t=this.WXt)||t.Zg();const i=this.HXt;this.HXt=void 0,i&&await i}async qXt(t){fr(t);let i=await this.zXt(this._Lt,t);void 0!==this.EGt&&this.VGt&&i&&(fr(t),await ua(this.hXt(),t),fr(t),this.V4(),i=await this.zXt(this.EGt,t)),i?this.aq.F3():this.aq.I3()}async zXt(t,i){for(;;){const e=t.aXt;e.forEach(t=>t.Bat());const s=_.max(0,this.PL.zx-t.EU),n=[],r=[];for(const t of e){const i=t.Izt;for(const e of t.Ezt){const t=mZ(e)?n:r;if(e.yCt)t.push(e.EHt());else if(!e.xHt(s)){const s=i.Szt(e.Km);s?"yut"===s.Km&&s.$Ot===this._Gt?(e.Pdt(s),t.push(e.EHt())):"rRt"===s.Km&&s.$Ot===this._Gt?(e.J2(s),t.push(e.EHt())):"wqt"===s.Km&&(e.UHt(s),t.push(e.EHt())):r.push(i.Tzt(e.Km))}}}if(0===n.length){if(await this.GXt(t,e,s,i))continue}if(0===n.length&&0===r.length){return e.every(t=>t.Ezt.length>0&&t.Ezt.every(t=>t.xHt(s)))}await ua(Promise.race([...n,...r]),i)}}async GXt(t,i,e,s){const n=[],r=[];for(const t of i){const i=t.Tdt(e);for(const s of t.Ezt){if(!mZ(s))continue;const h=t.Izt.Szt(s.Km);if(void 0!==h){if(h.$Ot===this._Gt)return!1;n.push(h)}else{if(t.yCt||t.Fzt(e,i,this.Mz.YY)||!s.PHt(e,i))return!1;{const t=s.mHt.uHt;void 0!==t&&r.push(t)}}}}if(0===n.length)return!1;const h=uf(n,t=>t.$Ot).$Ot;if(n.every(t=>"rRt"===t.Km&&t.$Ot===h)){const i=$i(n,t=>t.CO).CO+t.EU,e=[...n,...r],h=await this.XXt(e);this.jXt(h)?(ol.OLt(Ac,"Seamless switch from",this.aq.Cd,"to",h),await this.aq.RZ(h),ol.OLt(Ac,"Seamless switch complete.")):await this.QXt(t,i,h,s),this._Gt=n[0].$Ot}else for(const t of i)for(const i of t.Ezt){let e=t.Izt.Szt(i.Km);for(;void 0!==e&&("rRt"!==e.Km||e.$Ot!==h);)ol.OLt(Ac,"Removing append for other discontinuity, expecting "+h,e),t.Izt.RHt(e),e=t.Izt.Szt(i.Km)}return!0}jXt(t){var i,e;switch(null!=(e=null==(i=this.bt)?void 0:i.seamlessSwitchStrategy)?e:ak.HL){case ak.WL:return!0;case ak.qL:return!1;default:return this.aq.IZ(t)}}async XXt(t){const i=t.map(t=>t.kzt.Rrt),e=i.map(t=>({GT:t})),s=[...hs(t,t=>t.kzt.UW),...this.Br.fVt],n=this.bt;let r=await KY(n.contentProtection,i,s,this.aV,n.useCredentials);return 0===r.length&&this.aq&&this.aq.Cd.fq.length>0&&(r=this.aq.Cd.fq),{Km:O.SV,q4:e,fq:r,t5:n.useManagedMediaSource}}async QXt(t,i,e,s){var n,r,h;const o=this.aq,a=o.ct,u=this.PL.Fx.V>0&&this.PL.zx<i;if(u)try{for(ol.OLt(Ac,"Marking end of stream and waiting for ended to switch discontinuity."),o.F3();!this.PL.Qx&&this.PL.zx<i;)await this.PL.ww([d.py,d.Nw],s)}catch(t){throw o.I3(),o.F4(a),t}ol.OLt(Ac,"Perform hard switch from",null==(n=this.aq)?void 0:n.Cd,"to",e);try{var c,l;this.PL.G7(),this.PL.zx<i&&this.PL.Oy(i,!0,!0),this.AXt(),await this.PL.hr();const t=await this.PL.Un(e);this.EXt(t),null==(c=t.s4)||c.G3(i-1,i),null==(l=t.e4)||l.G3(i-1,i),this.AXt()}finally{u&&Wr(this.PL.QP()),this.PL.X7()}t.Czt(null==(r=this.aq)?void 0:r.e4,null==(h=this.aq)?void 0:h.s4),ol.OLt(Ac,"Hard switch complete.")}gXt(t){return ua(pr(hs(this.oXt,t=>t.Ezt.map(t=>t.EHt()))),t)}Xkt(){const t=this.MP,i=this.DP;this.rxt===t&&this.hxt===i||(this.rxt=t,this.hxt=i,this.So(new Vs))}async kn(){ol.cN(ka,"Unloading the player."),this.KXt(),this.OEt(),void 0!==this.EGt&&await this.CP(),await this.hr(),this.PL.Rq=void 0,this.tO.kn(),this.sO.kn(),this.Gl.kn(),this.axt.kn(),this.YXt.kn(),this.Cq.zg(),this.XHt.zg(),this.YGt&&(this.YGt.zg(),this.YGt=void 0)}async hr(){ol.cN(ka,"Resetting the player."),this._Gt=-1,this.uV.Zg(),this.T9.Zg(),this.T9=new Zc,this.T9.$g(this.uV.Yg),this.dXt.Zg(),this.dXt=new Zc,this.dXt.$g(this.uV.Yg);const t=[this.Ypt,this.k9,this.TGt].filter(it);await Promise.all(t.map(t=>t.catch(gs))),this.Ypt=void 0,this.k9=void 0,this.TGt=void 0,this._Xt(),await this.vXt(),this._Lt&&(this.tO.OI=void 0,this.sO.OI=void 0,this.XGt.OI=void 0,await this._Lt.zg(),this.HGt===this._Lt&&(this.HGt=void 0),this._Lt=void 0),this.JW=void 0,this.Lz.hr(),this.PL.Eq(),void 0!==this.EGt&&void 0!==this.aq&&void 0===this.PL.lt?await this.PL.F8():await this.qGt(),this.bGt=!1,this.pGt=void 0,this.nxt=void 0,this.rxt=0,this.hxt=0,this.yGt=void 0,this.$kt=!1,this.d9=!1,zd.Lg(this.AGt),this.JXt=!1,this.YXt.hr(),this.ZXt(),this.So(new ho(this.zx,this.AP))}async qGt(){this.aq=void 0,await this.PL.hr()}ZXt(){for(const t of this.Gl.NI)t.kn();this.XGt.hr(),this.axt.hr(),this.Gl.hr()}$Xt(){this.YXt.wn(b$,this.Rs),this.YXt.wn(Jr.PM,this.NL),this.YXt.wn(Jr.xM,this.tjt),this.YXt.wn(Jr.SM,this.ijt),this.Mz.wn("UY",this.dxt),this.Mz.wn("qY",this.lxt),this.PL.wn(A$,this.Rs),this.PL.wn(hc.ma,this.fxt),this.PL.wn(d.Ew,this.Gkt),this.PL.wn(d.Cw,this.ejt),this.PL.wn(d.Nw,this.Eh),this.PL.wn(d.jw,this.xBt),this.PL.wn(d.uo,this.sjt),this.PL.wn(d.Qw,this.njt),this.PL.wn(Jr.AI,this.qV),this.PL.wn(d.py,this.Q6),this.PL.wn(d.$w,this.Je),this.PL.wn(d.Zw,this.Mq),this.PL.wn(d.Jw,this.rjt),this.PL.wn(d.wy,this.hjt)}KXt(){this.YXt.mn(b$,this.Rs),this.YXt.mn(Jr.PM,this.NL),this.YXt.mn(Jr.xM,this.tjt),this.YXt.mn(Jr.SM,this.ijt),this.Mz.mn("UY",this.dxt),this.Mz.mn("qY",this.lxt),this.PL.mn(A$,this.Rs),this.PL.mn(hc.ma,this.fxt),this.PL.mn(d.Ew,this.Gkt),this.PL.mn(d.Cw,this.ejt),this.PL.mn(d.Nw,this.Eh),this.PL.mn(d.jw,this.xBt),this.PL.mn(d.uo,this.sjt),this.PL.mn(d.Qw,this.njt),this.PL.mn(Jr.AI,this.qV),this.PL.mn(d.py,this.Q6),this.PL.mn(d.$w,this.Je),this.PL.mn(d.Zw,this.Mq),this.PL.mn(d.Jw,this.rjt),this.PL.mn(d.wy,this.hjt)}constructor(t,i,e,s,n,r,h,o){var a;super(),this.Mz=void 0,this.Lz=void 0,this.XHt=void 0,this.JGt=void 0,this.PL=void 0,this.aV=void 0,this.lq=void 0,this.pq=void 0,this.Cq=void 0,this.YXt=void 0,this.$Gt=void 0,this.ZGt=void 0,this.Sut=void 0,this.Ndt=void 0,this.tO=void 0,this.sO=void 0,this.XGt=void 0,this.axt=void 0,this.Gl=void 0,this.bGt=void 0,this._Lt=void 0,this.EGt=void 0,this.VGt=void 0,this.HGt=void 0,this.aq=void 0,this.Ypt=void 0,this.uV=void 0,this.FGt=void 0,this.UGt=void 0,this.OGt=void 0,this.YGt=void 0,this.dXt=void 0,this.TGt=void 0,this.T9=void 0,this.k9=void 0,this._Gt=void 0,this.MXt=void 0,this.UXt=void 0,this.WXt=void 0,this.BXt=void 0,this.FXt=void 0,this.HXt=void 0,this.oq=void 0,this.nq=void 0,this.rq=void 0,this.pGt=void 0,this.wGt=void 0,this.$kt=void 0,this.d9=void 0,this.nxt=void 0,this.rxt=void 0,this.hxt=void 0,this.yGt=void 0,this.AGt=void 0,this.JXt=void 0,this.KGt=void 0,this.ojt=void 0,this.JW=void 0,this.Gkt=void 0,this.fxt=void 0,this.ejt=void 0,this.Eh=void 0,this.xBt=void 0,this.sjt=void 0,this.NL=void 0,this.njt=void 0,this.qV=void 0,this.Q6=void 0,this.Je=void 0,this.Mq=void 0,this.rjt=void 0,this.hjt=void 0,this.tjt=void 0,this.ijt=void 0,this.kGt=void 0,this.Lmt=void 0,this.LGt=void 0,this.dxt=void 0,this.lxt=void 0,this.GGt=void 0,this.Mz=e,this.Lz=s,this.XHt=n,this.JGt=r,this.axt=new bc,this.bGt=!1,this._Lt=void 0,this.EGt=void 0,this.VGt=!1,this.HGt=void 0,this.aq=void 0,this.Ypt=void 0,this.uV=new Zc,this.FGt=void 0,this.UGt=void 0,this.OGt=new Zc,this.YGt=void 0,this.dXt=new Zc,this.TGt=void 0,this.T9=new Zc,this.k9=void 0,this._Gt=-1,this.MXt=void 0,this.UXt=void 0,this.WXt=void 0,this.BXt=void 0,this.FXt=void 0,this.HXt=void 0,this.oq=Dn.pz,this.nq=void 0,this.rq=void 0,this.pGt=void 0,this.wGt=void 0,this.$kt=!1,this.d9=!1,this.nxt=void 0,this.rxt=0,this.hxt=0,this.yGt=void 0,this.AGt=0,this.JXt=!1,this.KGt=[],this.ojt=void 0,this.Gkt=t=>{this.nq=ar(t.errorObject),this.rq=t.errorObject,this.Rs(t)},this.fxt=t=>{this.Qq($k(t.lt))},this.ejt=()=>{var t;null==(t=this._Lt)||t.BUt();const i=this.ct;i!==this.nxt&&(this.nxt=i,this.So(new zr(this.nxt)))},this.Eh=()=>{this.Qx&&this.So(new ur(this.zx))},this.xBt=()=>{this.So(new Si(this.zx))},this.sjt=()=>{this.tkt(),this.So(new vt(this.zx))},this.NL=()=>{void 0!==this.ojt&&(zd.Lg(this.ojt),this.ojt=void 0),this.So(new mo(this.zx))},this.njt=()=>{this.So(new Et(this.zx))},this.qV=()=>{this.So(new Ka(this.zx,this.AP))},this.Q6=()=>{var t;const i=this.zx,e=this.Vx;null==(t=this._Lt)||t.ajt(i),this.So(new B(i,e)),!this.lP&&this.IGt()&&(this.jP(),this.Eh())},this.Je=()=>{this.So(new ji(this.zx))},this.Mq=()=>{this.So(new Yr(this.zx))},this.rjt=()=>{this.Xkt()},this.hjt=()=>{this.So(new Wi(this.zx,this.OP))},this.tjt=()=>{this.PL.xP?this.So(new SP(this.zx)):(null!=this.ojt||(this.ojt=zd.Og(()=>{this._Lt&&this.JXt&&Wr(this._Lt.ujt())},2500)),this.tkt(),this.So(new SP(this.zx)))},this.ijt=()=>{this.JXt=!0,this.So(new Is(this.zx,this.AP))},this.kGt=t=>{Ce(t)||Ei(t)||Qn(t)||(this._Xt(),Wr(this.vXt()),!function(t){return t instanceof BB}(t)?this.Qq(new as(me.MEDIA_LOAD_ERROR,t.message,t)):Wr(this.MGt({tI:!0})))},this.Lmt=t=>{if(Ce(t))return;const i=t instanceof as?t:new as(me.MEDIA_DECODE_ERROR,t.message,t);this.Qq(i)},this.LGt=t=>{this.KGt.push(t)},this.dxt=()=>{this.WTt()},this.lxt=()=>{this.qTt()},this.GGt=()=>{this.Xkt()},this.Sut=new JG(h),this.PL=t,this.aV=i,this.lq=new IY(this.Mz.CY),this.$Gt=new CY(this.PL),this.ZGt=new VY(this.Mz),this.Ndt=Y({},o.retryConfiguration,{maxRetries:null!=(a=o.retryConfiguration.maxRetries)?a:1/0}),this.tO=new Gh,this.sO=new Gh,this.XGt=new ai,this.Gl=new Tu([this.XGt,this.axt]),this.pq=new eC(this.aV),this.PL.Rq=this.pq,this.Cq=new Gt(this,this.PL),this.YXt=new _s(this.Cq,!0),this.$Xt()}},E$=class extends Ne{get vLt(){return this.cjt}get CLt(){return this.djt}get DLt(){return this.ljt}get cGt(){return this.fjt}get vGt(){return[this.djt,this.ljt].filter(it)}get ht(){return this.tO}get Br(){return this.nEt.Br}get CGt(){return this.nEt}get sUt(){const t=this.vGt;return 0===t.length?Uo.rL():t.reduce((t,i)=>t.Mn(i.sLt.sUt),Uo.hL())}get mLt(){return this.vjt}get zx(){return this.oa.mGt(this)}get BGt(){var t,i;const e=null==(t=this._jt)?void 0:t.Mzt,s=null==(i=this.gjt)?void 0:i.Mzt;return e&&s?s.Mn(e):null!=s?s:e}get kP(){return this.H4}get nt(){return this.Gl}get rt(){return this.sO}get iFt(){var t,i;return(null==(t=this.djt)?void 0:t.sLt.iFt)||(null==(i=this.ljt)?void 0:i.sLt.iFt)||!1}get xXt(){var t,i,e;return null!=(e=null==(t=this.djt)?void 0:t.sLt.ct)?e:null==(i=this.ljt)?void 0:i.sLt.ct}get pjt(){var t,i;const e=null==(t=this.djt)?void 0:t.sLt.ct,s=null==(i=this.djt)?void 0:i.sLt.ct;return void 0!==e&&void 0!==s?_.min(e,s):null!=e?e:s}get mjt(){var t;const i=null==(t=this.nEt.OVt)?void 0:t.sLt.ct;if(void 0!==i)return i;const e=this.vGt;return e.length>0&&e.every(t=>function(t){return t.sLt.bct.length>0&&!t.sLt.iFt}(t))?1/0:NaN}get ct(){var t;return null!=(t=this.xXt)?t:this.mjt}get PGt(){var t;return null!=(t=this.pjt)?t:this.mjt}get lGt(){const t=this.vGt;if(0===t.length||this.ct!==1/0)return;let i;for(const e of t){const t=e.sLt.kP;if(0===t.V)continue;const s=t.An(t.V-1)+e.sLt.ISt,n=e.sLt.mUt,r=s+(null!=n?n:0);(!i||i<r)&&(i=r)}return i}get TXt(){var t,i,e;if(void 0!==(null==(t=this.wjt)?void 0:t.CO))return{YF:this.wjt.CO,iq:!1};if(void 0!==(null==(i=this.wjt)?void 0:i.yjt)){var s;const t=null==(s=this.cjt)?void 0:s.pFt(this.wjt.yjt);if(void 0!==t)return{YF:t,iq:!1}}if(null==(e=this.cjt)?void 0:e.sLt.Tn){const t=this.cjt.sLt,i=t.Tn;let e=i.qOt;if(i.qOt<0){const i=t.sUt;e+=i.An(i.V-1)}return{YF:e,iq:!i.zOt}}return this.iFt?void 0:{YF:1/0,iq:!0}}BUt(){var t,i;const e=function(t){if(0===t.length)return Uo.rL();let i,e=0;for(const s of t){const t=s.sLt.kP;t.V>0&&(i=i?i.Mn(t):t,e=_.max(e,t.Tn(0)))}if(!i)return Uo.rL();if(i.V>0)return i;return Uo.sL(e)}(this.vGt);0!==e.V&&(this.H4=e,null==(t=this.Opt)||t.jU(e.Tn(0)),null==(i=this.ENt)||i.jU(e.Tn(0)))}ajt(t){const i=[];if(this.cjt)for(const e of this.aXt)for(const s of e.Ezt){const e=s.IHt(t);e&&!Ct(i,e)&&i.push(e)}wc(this.vjt,i)||(this.vjt=i,this.So(new dZ))}get jGt(){if(this.Mc.latencyConfiguration)return this.Mc.latencyConfiguration;const t=this.vGt;if(0===t.length)return;if(this.iFt)return;const i=_.max(...t.map(t=>{var i;return null!=(i=t.sLt.ISt)?i:0}));return{minimumOffset:.66*i,maximumOffset:2*i,targetOffset:1*i,forceSeekOffset:3*i,minimumPlaybackRate:ik,maximumPlaybackRate:ih}}get DGt(){return this.Mkt}get cP(){return this.ASt}set cP(t){this.ASt!==t&&(this.ASt=t,this.So(t?new TG:new lh))}get uO(){return this.Ekt}get EU(){return this.QU}set EU(t){this.QU=t;for(const i of this.bjt)i.EU=t}get bjt(){return[this.Ajt,this.Sjt,this.Aq,this.Opt,this.kq,this.ENt].filter(it)}mq(t){for(const i of t)i.src&&this.Aq.hV(i)}qlt(){const t=this.Br._Vt;if(0===t.length)return void ol.FLt(ka,"The HLSModel contains no variant streams.");var i;const e=null!=(i=hh(t,t=>0!==t.lFt.length&&0!==t.fFt.length))?i:t[0],s=t.filter(t=>t!==e);for(const t of e.lFt){const i=new iE,n=[];i.gO(new kY(e,t)),n.push(t);for(const e of s){const s=hh(e.lFt,i=>gY(i,t)&&!yY(n,i));s&&(i.gO(new kY(e,s)),n.push(s))}this.tO.tt(new AY(this,this.Mz,this.tO,i))}for(const t of e.fFt){const i=new iE,n=[];i.gO(new EY(e,t)),n.push(t);for(const e of s){const s=hh(e.fFt,i=>gY(i,t)&&!yY(n,i));s&&(i.gO(new EY(e,s)),n.push(s))}this.sO.tt(new SY(this,this.Mz,this.sO,i))}}async iXt(t){if(this.Mkt)return;if(!this.nEt.NVt){try{await this.nEt.UVt(t)}catch(t){throw sa(t),this.cP=!1,new as(me.MANIFEST_LOAD_ERROR,"The provided HLS document could not be loaded - "+t.message,t)}this.qlt()}const i=await this.Tjt();this.kjt(i),this.Ejt(i);const e=this.xjt(i.lFt),s=this.Pjt(i.fFt),n=this.Ijt(i.vFt);n||this.Cjt(i._Ft),await this.MGt(e,s,n,{nXt:!0}),this.Mkt=!0}Ejt(t){const i=this.ENt;if(!i)return;const e=function(t){const i=[];for(const e of t){const t=u$(e);void 0!==t&&i.push({Sit:t,Tit:e.bs||"",Th:e.l})}return i}(t._Ft);for(const t of e)i.$gt(t)}async Tjt(){if(this.Rjt=this.Br._Vt,!this.Rjt.length)throw new as(me.MANIFEST_LOAD_ERROR,"LLHLSPlayer - Could not select initial variant stream: the HLS stream contains no variant streams.");let t=await this.Djt(this.Rjt);if(0===t.length)throw new as(me.MANIFEST_LOAD_ERROR,"LLHLSPlayer - Could not select initial variant stream: the HLS stream contains no variant stream with a supported codec.");const i=await this.Njt(t);return i.length>0&&(t=i),ol.cN(ka,"Selecting initial active variant stream."),d$(t,this.Mc.abr,this.Mz,this.Ndt.maximumBackoff)}xjt(t){if(this.Bjt){const t=this.Mjt(this.Bjt);if(t)return t}return w$(t)}Pjt(t){if(this.Ljt){const t=this.Mjt(this.Ljt);if(t)return t}return w$(t)}Ijt(t){for(const t of this.Gl.NI)t.Qk===xh.Kn&&(this.Ojt=this.Sjt.aGt(t));if(this.Ojt){const t=this.Mjt(this.Ojt);if(t)return t}return m$(t)}Cjt(t){const i=this.ENt;if(!i)return;const e=m$(t);if(void 0!==e){const t=u$(e);i.Jgt(t).Qk=xh.Kn}}wLt(t){for(const i of t)if(!this.Fjt(i))throw new m("LLHLSPlayer - Could not set an allowed variant stream that does not exists in the internal HLS model.");this.Rjt=t}Fjt(t){const i=this.Br;return!!i&&Ct(i._Vt,t)}Mjt(t){if(t&&this.cjt)return hh(this.cjt.VLt,i=>i===t)}async Ujt(){var t;const i=null!=(t=this.Rjt)?t:this.Br._Vt;if(0===i.length&&!this.Rjt)return ol.cN(ka,"The HLS stream does not contain any variant streams, skipping ABR selection."),[];if(1===i.length&&!this.Rjt)return ol.cN(ka,"The HLS stream contains only a single variant stream, skipping ABR selection."),[];const e=await this.Djt(i);if(0===e.length)return ol.FLt(ka,"No variant streams with supported codecs available to perform ABR selection on."),[];const s=f$(e,this.Ndt.maximumBackoff);return 0===s.length?(this.Vjt||(ol.FLt(ka,"No variant streams with online renditions available to perform ABR selection on."),this.Hjt++,await this.Wjt(e)),[]):s}async qjt(){const t=await this.QLt();if(void 0===t)return;const i=!!this.cjt&&t.IW<this.cjt.IW;await this.yLt(t,{bLt:i})}async QLt(){const t=await this.Ujt();if(0===t.length)return;const i=await this.Njt(t),e=this.oa.uXt(),s=await this.ZGt.QLt(t,this.cjt,i,e,this.oa.cXt());return!!this.cjt&&s.IW<this.cjt.IW||this.zjt(s,e.qLt)?s:void 0}zjt(t,i){var e;if(t===this.cjt)return!1;const s=this.cjt&&v$(this.cjt,this.Ndt.maximumBackoff),n=v$(t,this.Ndt.maximumBackoff);if(!s&&n)return!0;(!this.DDt||this.DDt.gLt.IW>t.IW)&&(this.DDt={gLt:t,wft:zd.Mg()});const r=zd.Mg()-this.DDt.wft;var h;const o=null!=(h=null==(e=this.ljt)?void 0:e.sLt.WLt)?h:1/0;return i>=_.max(o-1,5)||r>1e3}Gjt(t){return $i(t,t=>t.IW)}async ujt(){this.DDt=void 0;let t=await this.Ujt();if(0===t.length)return;const i=await this.Njt(t);i.length>0&&(t=i);const e=this.Gjt(t);void 0!==e&&(await this.yLt(e,{bLt:!0}),this.oa.dq.JIt(e.IW))}async Wjt(t){this.Vjt=!0;let i=!1;for(const e of t)try{const t=this.ljt?hh(e.fFt,t=>gY(t,this.ljt)):void 0;if(void 0===t)continue;await this.jVt(t),t.sLt.bUt=-1/0,i=!0}catch(t){}if(i)this.Hjt=0,await this.oa.NXt();else{if(this.Hjt>=this.Ndt.maxRetries)return void this.oa.Qq(new as(me.MEDIA_LOAD_ERROR,"The provided video renditions could not be loaded."));const t=_.min(this.Ndt.minimumBackoff*2**(this.Hjt-1),this.Ndt.maximumBackoff);await Ze(t)}this.Vjt=!1,await this.qjt()}async Djt(t){let i=await lf(t,async t=>{var i,e;const s=[(null==(i=t.Rrt)?void 0:i.q9)?'audio/mp4; codecs="'+t.Rrt.q9+'"':void 0,(null==(e=t.Rrt)?void 0:e.W9)?'video/mp4; codecs="'+t.Rrt.W9+'"':void 0].filter(it);return 0===s.length||await this.$Gt.$Z(s,this.Mc.useManagedMediaSource)});return i.some(t=>{var i;return null==(i=t.Rrt)?void 0:i.W9})&&(i=i.filter(t=>!t.Rrt||t.Rrt.W9||0!==t.fFt.length)),i.some(t=>{var i;return null==(i=t.Rrt)?void 0:i.q9})&&(i=i.filter(t=>!t.Rrt||t.Rrt.q9||0!==t.lFt.length)),i}Njt(t){return this.nEt.MVt?lf(t,t=>async function(t,i){for(const e of t)if(!await i(e))return!1;return!0}([w$(t.lFt),w$(t.fFt),m$(t.vFt),m$(t._Ft)].filter(it),t=>this.Xjt(t))):Promise.resolve([])}async Xjt(t){if(0===t.sLt.bct.length)return!1;const i=t.sLt.bct[0];if(!i.Syt)return!1;const e=i.Syt,s=e.iAt?HY(e.iAt.Tn,e.iAt.V):void 0;try{return await this.Sut.sdt(e.XE,s)}catch(t){return!1}}async RLt(t){if(!this.cjt)return void(this.Bjt=t);const i=this.Mjt(t);if(t&&!i)return void ol.lt(ka,"Trying to set an invalid rendition as the active audio rendition.");if(this.djt===i)return;const e=it(i)!==it(this.djt);ol.cN(ka,"Switching audio rendition"),await this.MGt(i,this.ljt,this.fjt,{SLt:!0,bLt:e})}async NLt(t){if(!this.cjt)return void(this.Ljt=t);const i=this.Mjt(t);if(t&&!i)return void ol.lt(ka,"Trying to set an invalid rendition as the active video rendition.");if(this.ljt===i)return;const e=it(i)!==it(this.ljt);ol.cN(ka,"Switching video rendition"),await this.MGt(this.djt,i,this.fjt,{ALt:!0,bLt:e})}async uGt(t){if(!this.cjt)return void(this.Ojt=t);const i=this.Mjt(t);!t||i?(ol.cN(ka,"Switching subtitle rendition"),await this.MGt(this.djt,this.ljt,i)):ol.lt(ka,"Trying to set an invalid rendition as the active subtitle rendition.")}async jjt(t,i){if(this.Vjt)return;const e=0===this.sO.V;t.Km===dl.Mk||t.Km===dl.Bk&&e?this.Rjt&&this.Rjt.length<=1?(t.Km===dl.Mk&&this.ljt!==t?await this.MGt(this.djt,t,this.fjt):t.Km===dl.Bk&&e&&this.djt!==t&&await this.MGt(t,this.ljt,this.fjt),await this.Qjt(t,i)):await this.qjt():await this.Qjt(t,i)}async jVt(t,i){try{await this.nEt.jVt(t,i)}catch(e){throw sa(e),(Ei(e)||Qn(e))&&await this.jjt(t,i),e}}async Qjt(t,i){if(!Ct(this.Kjt,t)){this.Kjt.push(t);try{const e=t.Km===dl.HU||t.Km===dl.YLt?1/0:this.Ndt.maxRetries;await ws(()=>this.retryOfflineRenditionsCallback(t,i),i,e,this.Ndt.minimumBackoff,this.Ndt.maximumBackoff)}catch(t){this.oa.Qq(new as(me.MEDIA_LOAD_ERROR,t.message,t))}finally{_e(this.Kjt,t),t.sLt.bUt===-1/0&&await this.oa.NXt()}}}async fXt(t){var i;const e=this.djt,s=this.ljt,n=[];n.push(this.Yjt(s,t)),pY(e,s)||n.push(this.Yjt(e,t));const r=this.fjt;if(null==(i=this.Mc.hls)?void 0:i.delaySubtitlePreload)await Promise.all(n),await this.Yjt(r,t);else{const i=this.Yjt(r,t);await Promise.all([...n,i])}}async Yjt(t,i){if(t)try{await this.nEt.jVt(t,i)}catch(e){sa(e),(Ei(e)||Qn(e))&&await this.Jjt(t,i)}}async Jjt(t,i){if(this.Vjt)return;const e=0===this.sO.V;if(t.Km===dl.Mk||t.Km===dl.Bk&&e)if(this.Rjt&&this.Rjt.length<=1)await this.Qjt(t,i);else{const t=await this.Tjt();this.kjt(t);const i=this.xjt(t.lFt),e=this.Pjt(t.fFt),s=this.Ijt(t.vFt);await this.MGt(i,e,s)}else await this.Qjt(t,i)}MGt(t,i,e,s){void 0===s&&(s={});const n={bLt:s.bLt||!1,SLt:s.SLt||!1,ALt:s.ALt||!1,tI:s.tI||!1,nXt:s.nXt||!1};return n.nXt||n.tI||this.djt!==t||this.ljt!==i||this.fjt!==e?void 0===t&&void 0===i?Promise.reject(new m("Trying to buffer no media renditions.")):(this.djt=t,this.ljt=i,this.fjt=e,this.BUt(),this.So(new i$),this.oa.MGt(n)):Promise.resolve()}async yLt(t,i){if(!this.oa.sXt)return void ol.lt(ka,"The LLHLSPlayer is not loaded.");if(!t)return void ol.lt(ka,"Cannot explicitly set the active variant stream to undefined.");if(!this.Fjt(t))return void ol.lt(ka,"Trying to set an active variant stream that does not exists on the internal model.");if(t===this.cjt)return void ol.cN(ka,"Trying to set the already active variant stream, ignoring.");const e=this.djt?hh(t.lFt,t=>gY(t,this.djt)):void 0,s=this.ljt?hh(t.fFt,t=>gY(t,this.ljt)):void 0,n=this.fjt?hh(t.vFt,t=>gY(t,this.fjt)):void 0;this.kjt(t),this.DDt=void 0,await this.MGt(e,s,n,i)}kjt(t){var i;if(ol.cN(ka,"Setting active variant stream."),this.cjt===t)return;const e=(null==(i=this.cjt)?void 0:i.yOt)!==(null==t?void 0:t.yOt);if(this.cjt&&e)for(const t of this.cjt.vFt)this.Sjt.mFt(t);if(this.cjt=t,this.So(new t$),t&&e)for(const i of t.vFt)this.Sjt.hGt(i)}Zjt(){this.$jt(this.tO),this.$jt(this.sO)}$jt(t){const i=[];for(const e of t.NI){const t=[];for(const i of e.$I.NI)Ct(i.gLt.VLt,i.fLt)||t.push(i);for(const i of t)e.$I.pS(i),i.kn();0===e.$I.V&&i.push(e)}for(const e of i)t.it(e),e.kn()}async SXt(t){const i={stack:[],error:void 0,hasError:!1};try{const e=Es(i,Zc.ep([t]),!1),s=[this.ljt,pY(this.djt,this.ljt)?void 0:this.ljt,this.fjt].filter(it);await Promise.all(s.filter(t=>!t.sLt.vUt).map(t=>this.nEt.QVt(t,e.Yg)))}catch(t){i.error=t,i.hasError=!0}finally{Zs(i)}}async mXt(){var t,i,e;const s=this.djt,n=this.ljt,r=null==(t=this.cjt)?void 0:t.Rrt,h=[];if(void 0!==s){var o,a;const t=null!=(a=null==(o=s.Rrt)?void 0:o.q9)?a:null==r?void 0:r.q9;if(!t)return;{const i='audio/mp4; codecs="'+t+'"';ol.cN(ka,"Configuring MediaSource for initial audio rendition with codec: "+i+"."),h.push(i)}}if(void 0!==n){var u,c;const t=null!=(c=null==(u=n.Rrt)?void 0:u.W9)?c:null==r?void 0:r.W9;if(!t)return;{const i='video/mp4; codecs="'+t+'"';ol.cN(ka,"Configuring MediaSource for initial video rendition with codec: "+i+"."),h.push(i)}}if(0===h.length)return void ol.FLt(ka,"No codecs found on the active variant stream.");var d;const l=null!=(d=null==n||null==(i=n.sLt.bct[0])?void 0:i.UW)?d:[];var f;const v=null!=(f=null==s||null==(e=s.sLt.bct[0])?void 0:e.UW)?f:[],_=this.Mc,g=this.Br,p=await KY(_.contentProtection,h,[...g.fVt,...v,...l],this.aV,_.useCredentials);return{Km:O.SV,q4:h.map(t=>({GT:t})),fq:p,t5:_.useManagedMediaSource}}get aXt(){return[this._jt,this.gjt,this.tQt].filter(it)}yXt(t,i,e,s,n){const r=this.djt,h=this.ljt,o=t&&pY(r,h);var a,u;if(i&&h)if(this.gjt)(e||n||o&&s)&&(this.gjt.Zg(),this.gjt.Rzt.jy()),this.gjt.fLt!==h&&this.gjt.MWt(h);else{const t=o?[at.Mk,at.Bk]:[at.Mk];this.gjt=this.iQt(h,t)}else null==(a=this.gjt)||a.zg(),this.gjt=void 0;t&&r&&!o?this._jt?((e||s)&&(this._jt.Zg(),this._jt.Rzt.jy()),this._jt.fLt!==r&&this._jt.MWt(r)):this._jt=this.eQt(r):(null==(u=this._jt)||u.zg(),this._jt=void 0)}bXt(t){const i=this.fjt;if(this.tQt){this.tQt.fLt===i?t&&(this.tQt.Zg(),this.tQt.Rzt.jy()):(this.tQt.zg(),this.tQt=void 0)}if(!this.tQt&&i&&(this.tQt=this.sQt(i)),i){const t=this.Sjt.dGt(i);t.Qk=xh.Kn,this.Bzt(t)}}iQt(t,i){const e=function(t,i,e,s,n,r,h,o,a,u,c){const d=e.Br.AM,l=new VZ(d),f=new OZ(at.Mk,t,e,l,s,n,r,c),v=h._Tt(l,d,i);return new $Z(f,l,v,o,a,u)}(t,i,this.nEt,this.aV,this.Sut,this.XHt,this.YGt,this.Opt,this.ENt,this.Mz,this.Mc.useCredentials);return e.Pzt.wn(LZ.IWt,this.nQt),e.Pzt.wn(LZ.CWt,this.rQt),e.Pzt.wn(d.iy,this.Rs),e.Izt.wn(zt.Jqt,this.hQt),e.Izt.wn(zt.$qt,this.oQt),e.Izt.wn(zt.tzt,this.aQt),e.Izt.wn(zt.Zqt,this.uQt),e}eQt(t){const i=function(t,i,e,s,n,r,h,o,a){const u=i.Br.AM,c=new VZ(u),d=new OZ(at.Bk,t,i,c,e,s,n,a),l=r._Tt(c,u,[at.Bk]);return new $Z(d,c,l,h,void 0,o)}(t,this.nEt,this.aV,this.Sut,this.XHt,this.YGt,this.Opt,this.Mz,this.Mc.useCredentials);return i.Pzt.wn(LZ.CWt,this.rQt),i.Izt.wn(zt.Jqt,this.hQt),i.Izt.wn(zt.Zqt,this.uQt),i}sQt(t){return function(t,i,e,s,n,r){const h=i.Br.AM,o=new VZ(h),a=new OZ(at.LT,t,i,o,e,s,n,r),u=new YZ(o,h,at.LT);return new $Z(a,o,u)}(t,this.nEt,this.aV,this.Sut,this.XHt,this.Mc.useCredentials)}Czt(t,i){if(t?this.B4&&this.B4.$zt(t,this.QU)||(this.B4=new h$(at.Bk,t,this.QU)):this.B4=void 0,i?this.M4&&this.M4.$zt(i,this.QU)||(this.M4=new h$(at.Mk,i,this.QU)):this.M4=void 0,void 0!==this.gjt){const i=void 0!==t&&void 0===this._jt,e=[this.M4,i?this.B4:void 0].filter(it);this.gjt.Czt(e)}if(void 0!==this._jt){const t=this.B4?[this.B4]:[];this._jt.Czt(t)}}Bzt(t){t?this.cQt&&this.cQt.$zt(t)||(this.cQt=new a$(t,this.Br.AM)):this.cQt=void 0,void 0!==this.tQt&&void 0!==this.cQt&&this.tQt.Bzt(this.cQt)}WGt(t){if(this.iV===t)return;this.iV=t;for(const i of this.bjt)i.tV(t);const i=this.fjt;if(void 0!==i){const t=this.Sjt.dGt(i);this.Bzt(t)}}AXt(t,i){const e=[];t&&e.push(at.Bk),i&&e.push(at.Mk),this.Br.AM.dVt(e)}dQt(){if(void 0===this.gjt)return!1;const t=zd.Mg();if(!this.gjt.Pzt.Nqt(t))return!1;const i=this.gjt.Pzt.Iqt();if(void 0===i||void 0===i.yut.ct)return!1;const e=this.zx,s=this.oa.vP,n=this.gjt.Mzt.iL(e);if((void 0!==n?n.An(0)-e:0)>=2*i.yut.ct*s)return!1;if(i.Cqt>0&&0===i.Rqt)return i.Dqt>1e3*i.yut.ct*.8;return 8*i.Rqt/this.Mz.CY.IW>=1.8*i.yut.ct}async lQt(){var t;const i=await this.QLt();if(void 0===i)return;const e=null==(t=this.gjt)?void 0:t.Pzt.Iqt();if(void 0===e)return;const s=this.cjt;if(e.Rqt>0){if(_.max(0,e.Rqt-e.Cqt)<=e.Rqt*(i.IW/s.IW))return}const n=i.IW<s.IW;await this.yLt(i,{bLt:n})}ZXt(){for(const t of this.tO.NI)t.kn();for(const t of this.sO.NI)t.kn();for(const t of this.Gl.NI)t.kn();this.tO.hr(),this.sO.hr(),this.Gl.hr()}async zg(){this.Vo(),this.uV.Zg(),this.nEt.zg(),this._jt&&(this._jt.zg(),this._jt=void 0),this.gjt&&(this.gjt.zg(),this.gjt=void 0),this.tQt&&(this.tQt.zg(),this.tQt=void 0);for(const t of this.bjt)await t.kn(),this.Gl.XW(t.Z);this.ZXt(),this.tO.kn(),this.sO.kn(),this.Gl.kn(),this.Kjt=[],this.kjt(void 0)}constructor(t,i,e,s,n,r,h,o,a,u,c,d,l){var f,v;super(),this.oa=void 0,this.Mc=void 0,this.aV=void 0,this.ZGt=void 0,this.Mz=void 0,this.Sut=void 0,this.$Gt=void 0,this.XHt=void 0,this.YGt=void 0,this.Ndt=void 0,this.wjt=void 0,this.iV=void 0,this.tO=new Ws,this.sO=new Ws,this.Gl=new Tu([]),this.Sjt=void 0,this.Aq=void 0,this.Opt=void 0,this.kq=void 0,this.ENt=void 0,this.nEt=void 0,this.Ajt=void 0,this.uV=void 0,this.Bjt=void 0,this.Ljt=void 0,this.Ojt=void 0,this.Rjt=void 0,this.Kjt=[],this.cjt=void 0,this.djt=void 0,this.ljt=void 0,this.fjt=void 0,this.B4=void 0,this.M4=void 0,this.cQt=void 0,this._jt=void 0,this.gjt=void 0,this.tQt=void 0,this.ASt=!0,this.Hjt=0,this.Vjt=!1,this.H4=Uo.rL(),this.Mkt=!1,this.Ekt=0,this.DDt=void 0,this.vjt=[],this.QU=0,this.aHt=()=>{this.BUt()},this.fQt=t=>{Wr(this.jjt(t.fLt,this.uV.Yg))},this.retryOfflineRenditionsCallback=async(t,i)=>{this.fjt!==t&&this.djt!==t&&this.ljt!==t||(await this.nEt.jVt(t,i),t.sLt.bUt=-1/0)},this.hQt=t=>{const i=this.cjt,e=null==i?void 0:i.cFt;if(this.nEt.rHt(t.Rrt,t.fLt.sLt),!e&&(this.nEt.hHt(t.Rrt,t.fLt.sLt),this.Zjt(),i)){const t=void 0!==this.djt&&!Ct(i.lFt,this.djt),e=void 0!==this.ljt&&!Ct(i.fFt,this.ljt);(t||e)&&this.MGt(t?void 0:this.djt,e?void 0:this.ljt,this.fjt).catch(gs)}},this.oQt=t=>{const i=this.vQt(t.fLt);void 0!==i&&(i.Olt=t.Olt)},this.aQt=t=>{const i=this.vQt(t.fLt);void 0!==i&&(i.byt=t.izt.rF())},this.vQt=t=>{for(const i of this.sO.NI){const e=i.TLt(t);if(void 0!==e)return e}},this.uQt=t=>{this.nEt.sHt(t.fLt)},this.nQt=to(t=>{t.Gk===at.Mk&&this.dQt()&&Wr(this.lQt())},200),this.rQt=t=>{var i;this.Ekt+=t.DWt;const e=this.sO.V>0?t.Gk===at.Mk:t.Gk===at.Bk;"yut"===t.RWt&&e&&Wr(this.qjt()),this.So(new bV(function(t){if(t){if(void 0!==t.iAt){var i,e;const s=t.iAt.Tn+(null!=(e=t.iAt.V)?e:0);return{Yu:t.XE,Wat:[null==(i=t.iAt)?void 0:i.Tn,s],Xk:!0}}return{Yu:t.XE.toString()||"",Xk:!0}}return{Yu:"",Xk:!0}}(t.uri),(null==(i=this.cjt)?void 0:i.IW)||0,t.mediaSequenceNumeber,t.mediaTrackId,t.Gk,t.httpStatusCode,t.DWt))},this.oa=t,this.Mc=i,this.aV=s,this.Mz=n,this.ZGt=r,this.Sut=h,this.$Gt=o,this.XHt=a,this.YGt=u,this.Ndt=c,this.wjt=d,this.iV=null!=l?l:new mX,this.uV=new Zc;const _=null!=(v=null==(f=i.latencyConfiguration)?void 0:f.targetOffset)?v:i.liveOffset;this.nEt=new rZ(this.aV,this.Sut,i.useCredentials,zd.Pm(i.src),_),this.nEt.wn(nZ.IVt,this.aHt),this.nEt.wn(nZ.CVt,this.fQt),this.nEt.wn(T$,this.Rs),this.Sjt=new y$(this,this.iV),this.Gl.qW(this.Sjt.Z),i.hlsDateRange&&(this.Ajt=new cZ(this.nEt,this.iV),this.Gl.qW(this.Ajt.Z)),e.textTracks&&(this.Aq=new eu(this.iV,this.aV),this.Gl.qW(this.Aq.Z),this.mq(e.textTracks));!Ct(i.ignoreEmbeddedTextTrackTypes,nh.CEA608)&&(this.ENt=new wt(this.iV),this.Gl.qW(this.ENt.Z));!Ct(i.ignoreEmbeddedTextTrackTypes,nh.EMSG)&&(this.Opt=new KG(this.iV),this.kq=new _P(this.iV,this.Opt.Z),this.Gl.qW(this.Opt.Z),this.Gl.qW(this.kq.Z))}};function x$(t,i){if(!i||i.sLt.iFt)return!1;const e=i.sLt.bct;return 0!==e.length&&e[0].CO>t}r();var P$=class{Jq(t,i){return!!gk(t.type)&&!t.useNativePlayback}async Zq(t){return!!t.aes128||await VT(t,!0)}};r(),r();var I$=class{async zHt(t,i,e){try{const s=await crypto.subtle.importKey("raw",i,{name:"AES-CBC"},!1,["decrypt"]),n=await crypto.subtle.decrypt({name:"AES-CBC",iv:e},s,t);return new j(n)}catch(t){throw new as(me.CONTENT_PROTECTION_INTERNAL_ERROR,"Error during AES128 decrypt.")}}zg(){}static US(){return"undefined"!=typeof crypto&&void 0!==crypto.subtle&&void 0!==crypto.subtle.decrypt}};r(),r(),r(),r();var jc=class extends gp{constructor(t,i){super(t),this.data=void 0,this.data=i}},C$=["message","messageerror","error"];r();var Fn=class extends gp{constructor(t){super(hc.ma),this.error=void 0,this.error=t}},R$=class extends Ne{get _Qt(){return this.gQt.Yg.Hg}pQt(t,i){this._Qt||(void 0!==this.mQt?this.mQt.pQt(t,i):this.wQt.push({Iy:t,yQt:i}))}bQt(){this._Qt||(this.gQt.Zg(),Wt(this.wQt),void 0!==this.mQt&&this.mQt.bQt())}constructor(t){super(),this.mQt=void 0,this.gQt=void 0,this.wQt=[],this.AQt=t=>{if(this._Qt)t.bQt();else{this.mQt=t,this.mQt.wn(C$,this.Rs);for(const i of this.wQt)t.pQt(i.Iy,i.yQt);Wt(this.wQt)}},this.SQt=t=>{if(this._Qt)return;const i=t instanceof m?t:new m("Could not create Worker.");this.So(new Fn(i)),this.bQt()},this.gQt=new Zc,t(this.gQt.Yg).then(this.AQt,this.SQt)}};r(),r();var D$=class extends Ne{pQt(t,i){i?this.mQt.postMessage(t,i):this.mQt.postMessage(t)}bQt(){this.Vo(),this.mQt.removeEventListener("message",this.TQt),this.mQt.removeEventListener("messageerror",this.kQt),this.mQt.removeEventListener("error",this.L7),this.mQt.terminate()}constructor(t,i){super(),this.mQt=void 0,this.TQt=t=>{this.So(new jc("message",t.data))},this.kQt=t=>{this.So(new jc("messageerror",t.data))},this.L7=t=>{null==t.preventDefault||t.preventDefault.call(t);const i=t.error instanceof m?t.error:new m(t.message);this.So(new Fn(i)),this.bQt()},this.mQt=new ad(t,i),this.mQt.addEventListener("message",this.TQt),this.mQt.addEventListener("messageerror",this.kQt),this.mQt.addEventListener("error",this.L7)}};r();var N$=0,B$=class extends Ne{pQt(t,i){i?this.EQt.contentWindow.postMessage({type:"message",data:t},"*",i):this.EQt.contentWindow.postMessage({type:"message",data:t},"*")}bQt(){var t;this.EQt.removeEventListener("load",this.xQt),self.removeEventListener("message",this.PQt),null==(t=this.EQt.contentWindow)||t.postMessage({type:"terminate"},"*"),Ao(this.EQt)}constructor(t,i){super(),this.aS=void 0,this.IQt=void 0,this.EQt=void 0,this.CQt=void 0,this.xQt=()=>{this.EQt.removeEventListener("load",this.xQt),this.EQt.contentWindow.postMessage({type:"initialize",id:this.aS,script:this.IQt},"*")},this.PQt=t=>{t.origin===this.CQt&&t.data.id===this.aS&&("initialized"===t.data.type||("error"===t.data.type?(this.So(new Fn(new m(t.data.data.message))),this.bQt()):this.So(new jc("message",t.data.data))))},this.aS=N$++,this.IQt=t;const e=zd.Dh("iframe.html",i);this.EQt=function(t){const i=h.createElement("iframe");return i.width="0",i.height="0",i.style.display="none",i.role="",i.src=t,h.body.appendChild(i),i}(e.href),this.CQt=e.origin,this.EQt.addEventListener("load",this.xQt),self.addEventListener("message",this.PQt)}};function M$(t,i,e){const s=zd.Pm(t,i);return new R$(t=>async function(t,i,e,s){let n;try{return n=new D$(t,e),await O$(n,s),n}catch(t){null==n||n.bQt(),sa(t)}if(L$&&Hb){let i;try{const e=await zd.Dx.vk({Yu:t,Hk:Qe.GET,fk:Bi.LT,Yg:s});i=await e.HT(s)}catch(t){sa(t)}if(i){let t;try{const r=Hb([i],{type:"application/javascript"});return t=URL.createObjectURL(r),n=new D$(t,e),await O$(n,s),n}catch(t){null==n||n.bQt(),sa(t),L$=!1}finally{t&&URL.revokeObjectURL(t)}}}try{return n=new B$(t,i),await O$(n,s),n}catch(t){throw null==n||n.bQt(),t}}(s,i,e,t))}var L$=!0;async function O$(t,i){const e=await t.ww(["message","error"],i);if("error"===e.type)throw function(t){return new as(me.CONFIGURATION_ERROR,"THEOplayer workers could not be loaded. Please check the configuration of the libraryLocation.",t)}(e.error);if(!function(t){return Gd(t)&&"10.3.0"===t.RQt}(e.data))throw new as(me.CONFIGURATION_ERROR,"THEOplayer workers could not be loaded. Please check that the worker's version matches THEOplayer's version (10.3.0).");return e}r();var F$=function(t){return t.DQt="zHt",t.NQt="gWt",t}({}),U$=function(t){return t.BQt="MQt",t.LQt="OQt",t}({}),V$=class{FQt(){const t=M$(this.UQt,this.VQt,{name:"THEOplayer decrypt worker"});return t.wn("message",this.HQt),t.wn("error",this.WQt),t}zHt(t,i,e){const s=""+ ++this.qQt,n={zQt:F$.DQt,GQt:s,XQt:t,jQt:i,QQt:e},r=new Ga;return this.KQt.set(s,r),null!=this.mQt||(this.mQt=this.FQt()),this.mQt.pQt(n),r.Yy}zg(t){void 0===t&&(t=new Qc),this.KQt.forEach(i=>i.Ky(t)),this.KQt.clear(),this.mQt&&(this.mQt.bQt(),this.mQt=void 0)}constructor(t){this.VQt=void 0,this.UQt=void 0,this.mQt=void 0,this.qQt=0,this.KQt=Ba(),this.HQt=t=>{const i=t.data,e=i.YQt,s=this.KQt.get(e);if(s)if(this.KQt.delete(e),i.JQt===U$.BQt)s.Qy(i.ZQt);else if(i.JQt===U$.LQt){const t=i.$Qt,e=i.tKt?new m(i.tKt):void 0,n=new as(me.CONTENT_PROTECTION_INTERNAL_ERROR,"Error during AES128 decrypt. (code: "+t+")",e);s.Ky(n)}},this.WQt=t=>{const i=new as(me.CONTENT_PROTECTION_INTERNAL_ERROR,t.error.message,t.error);this.zg(i)},this.VQt=t;try{this.UQt=zd.Pm("theoplayer.d.js",t)}catch(t){throw new as(me.CONFIGURATION_ERROR,"Invalid player configuration: missing libraryLocation",t)}}};function H$(t){const i=hh(t.boxes,YN);if(!i)return;const e=hh(i.boxes,JN);return e?e.handlerType:void 0}function W$(t){const i=new Iy;return i.boxes.push(...t.boxes),i}function q$(t){const i=new bl;return i.boxes.push(...t.boxes),i}r(),r(),r(),r();var z$=8;function G$(t,i){const e=function(t){const i=new ey;return i.boxes.push(...t.boxes),i}(t),s=j$(i);for(let t=0;t<e.boxes.length;t++){const n=e.boxes[t];if(n===i)e.boxes[t]=new mw(new j(i.getSize()-z$));else if(ZN(n)){const i=n,r=tt(i.boxes,t=>t instanceof Vi&&t.trackId===s);if(r>=0){const s=i.boxes[r],n=q$(i);n.boxes[r]=new mw(new j(s.getSize()-z$)),e.boxes[t]=n}}}return e}function X$(t,i){const e=function(t){const i=new fy;return i.boxes.push(...t.boxes),i}(t);for(let t=0;t<e.boxes.length;t++){const s=e.boxes[t];if(iB(s)){const n=hh(s.boxes,eB);n&&n.trackId===i&&(e.boxes[t]=new mw(new j(s.getSize()-z$)))}}return e}function j$(t){return hh(t.boxes,KN).trackId}function Q$(t,i,e,s){const n=hh(t.boxes,eB),r=e.eU(i).NF();let h=yo.ZERO;for(const i of t.boxes){if(i instanceof hy){h=jf(i.baseMediaDecodeTime,r),i.baseMediaDecodeTime=i.baseMediaDecodeTime.subtract(h);break}if(i instanceof ry){h=jf(yo.fromNumber(i.baseMediaDecodeTime),r),i.baseMediaDecodeTime-=h.toNumber();break}}if(h.isZero())return;const o=hh(t.boxes,sB);if(void 0!==o&&o.samples.length>0){const t=o.samples;if(!o.flags.sampleDurationPresent){o.flags.sampleDurationPresent=!0;const i=null!=s?s:n.defaultSampleDuration;for(const e of t)e.duration=i}t[0].duration+=h.toNumber(),o.samples=t}}r();var K$="Mp4Transmuxer",Y$=class extends jZ{_zt(t,i){fr(i);const e=t.fLt,s=kB(dh(t.YOt.lk.lk));if(!s)throw new m("Mp4Transmuxer - Unable to parse "+e.Km+" MP4 initializer.");this.i3=s;const n=function(t){let i,e;for(const s of t.Z)i||(i=s.N1),e||(e=s.D1);if(i||e)return{q9:i,W9:e,fOt:void 0};return}(s);n&&this.wzt(e,n);const r=function(t){for(const i of t.Z)if(void 0!==i.B1)return i.B1;return}(s);void 0!==r&&this.yzt(e,r);const h=function(t){var i;const e=My(t),s=hh(e.boxes,jN),n=s.boxes.filter(QN),r=hh(n,t=>H$(t)===Pw.AUDIO),h=hh(n,t=>H$(t)===Pw.VIDEO),o={q9:{sN:r?j$(r):void 0},W9:{sN:h?j$(h):void 0}},a=null==(i=hh(s.boxes,ZN))?void 0:i.boxes.filter($N);var u,c;const d=a?{q9:null!=(u=hh(a,t=>t.trackId===o.q9.sN))?u:void 0,W9:null!=(c=hh(a,t=>t.trackId===o.W9.sN))?c:void 0}:void 0;var l,f;if(d&&(o.q9.FB=null==(l=d.q9)?void 0:l.defaultSampleDuration,o.W9.FB=null==(f=d.W9)?void 0:f.defaultSampleDuration),!r||!h)return{q9:r?t:void 0,W9:h?t:void 0,LU:o};const v=W$(e),_=W$(e),g=e.boxes.indexOf(s);v.boxes[g]=G$(s,h),_.boxes[g]=G$(s,r);const p=v.serialize().join(),m=_.serialize().join();return{q9:p,W9:m,LU:o}}(t.YOt.lk.lk);if(this.iKt=h.LU,h.W9){const i=hh(s.Z,t=>t.sN===h.LU.W9.sN),e={Km:"rRt",lk:{Km:We.wZ,lk:h.W9},iat:at.Mk,$Ot:t.$Ot,kzt:{Rrt:'video/mp4; codecs="'+i.D1+'"',UW:t.UW},CO:t.CO,fLt:t.fLt,BHt:t.YOt.BHt};this.Wqt(e)}if(h.q9){const i=hh(s.Z,t=>t.sN===h.LU.q9.sN),e={Km:"rRt",lk:{Km:We.wZ,lk:h.q9},iat:at.Bk,$Ot:t.$Ot,kzt:{Rrt:'audio/mp4; codecs="'+i.N1+'"',UW:t.UW},CO:t.CO,fLt:t.fLt,BHt:t.YOt.BHt};this.Wqt(e)}return Promise.resolve()}async pzt(t,i){fr(i);const e=t.yut.BHt;ol.cN(K$,"Transmuxing fMP4: "+ah(e.Syt));const s=t.yut.lk,n=J$(s.lk,this.i3),r=cf(n.map(t=>t.zet),WE);if(void 0!==r&&(e.Get=r,this.Azt(t.fLt)),!this.pVt.zUt(t.$Ot)){const s=ul.hU(e.CO);if(n.length>0){const i=cf(n.map(t=>t.eKt),WE);for(const n of this.azt)this.pVt.iVt(t.$Ot,n,i,s,Z$(e),!1);this.Azt(t.fLt)}this.pVt.zUt(t.$Ot)||await ua(this.pVt.XUt(t.$Ot),i)}const h=this.pVt.ZUt(t.$Ot),o=e.Get?this.pVt.$Ut(e.Get,e).rF():e.CO,a=QZ(e,o);var u;const c={VHt:a,HHt:KZ(e,a),CO:o,ct:null!=(u=e.ct)?u:0,EU:h.rF(),$Ot:t.$Ot,fLt:t.fLt,BHt:t.yut.BHt},d=function(t,i){if(void 0===i.q9.sN)return{q9:void 0,W9:t};if(void 0===i.W9.sN)return{q9:t,W9:void 0};const e=My(t),s=W$(e),n=W$(e);for(let t=0;t<e.boxes.length;t++){const r=e.boxes[t];tB(r)&&(s.boxes[t]=X$(r,i.W9.sN),n.boxes[t]=X$(r,i.q9.sN))}const r=s.serialize().join(),h=n.serialize().join();return{q9:r,W9:h}}(s.lk,this.iKt);if(d.W9){var l;const i=this.iKt.W9.sN,s=hh(this.i3.Z,t=>t.sN===i),h=hh(n,t=>t.sN===i),o=this.sKt(d.W9,s,h,null==(l=this.iKt)?void 0:l.W9.FB,e);this.nKt=s,this.bzt(t.fLt,e,h.zet.gF(r));const a=Y({Km:"yut",lk:{Km:We.wZ,lk:o},iat:at.Mk},c);this.Wqt(a)}if(d.q9){const t=Y({Km:"yut",lk:{Km:We.wZ,lk:d.q9},iat:at.Bk},c);this.Wqt(t)}this.rKt=e,this.hKt=n}sKt(t,i,e,s,n){if(!Z$(n))return t;if(!this.rKt||!this.nKt||!this.hKt)return t;const r=this.nKt.sN,h=hh(this.hKt,t=>t.sN===r),o=this.pVt.$Ut(h.oKt,this.rKt),a=this.pVt.$Ut(e.zet,n).gF(o).eU(i.jD);if(a.cF(ul.SF))return t;if(a.hF(ul.hU(.5)))return t;const u=th(n)?n:n.PFt;return ol.OLt(K$,"Stretching first video frame of segment #"+u.LOt+" to fill gap of "+a.rF()+"s"),function(t,i,e,s){const n=My(t),r=hh(n.boxes,tB);if(r){const t=r.getSize();for(const t of r.boxes)t instanceof Kh&&Q$(t,i,e,s);const n=r.getSize();if(n!==t){const i=n-t;for(const t of r.boxes)t instanceof Kh&&nB(t,i)}}return n.serialize().join()}(t,i.jD,a,s)}constructor(...t){super(...t),this.i3=void 0,this.iKt=void 0,this.rKt=void 0,this.hKt=void 0,this.nKt=void 0}};function J$(t,i){const e=wT(Hn.PD(dh(t)),ui.NR);if(!e)throw new m("Mp4Transmuxer - Unable to parse segment or part.");return function(t,i){const e=[];for(const n of t.Z){if(!n.KB||0===n.QB.length||0===n.QB[0].iM.length)continue;const t=n.yD.sN,r=hh(i.Z,i=>i.sN===t);let h=0,o=1/0,a=0;const u=n.yD.FB||0;for(const t of n.QB)for(const i of t.iM){const t=i.eM||0,e=h+t;var s;h+=null!=(s=i.ct)?s:u;const n=h+t;e<o&&(o=e),n>a&&(a=n)}const c=ul.yF(n.KB.KB,r.jD);e.push({sN:t,eKt:c,zet:c.gO(ul.bF(o,r.jD)),aKt:c.gO(ul.bF(h,r.jD)),oKt:c.gO(ul.bF(a,r.jD))})}return e}(e,i)}function Z$(t){return th(t)?t.KOt:0===t.CFt&&t.PFt.KOt}var $$="MpegtsTransmuxer",t0=class extends Y${_zt(t,i){return super._zt(t,i)}lzt(t,i){if(super.lzt(t,i),this.wE.uKt())return;var e;const s=null!=(e=null==i?void 0:i.Syt)?e:t.Syt;if(!s)return;/\.(ts|aac|mp3)/i.test(s.XE)&&this.wE.cKt()}dKt(t){let i;return t.fLt===this.lKt&&this.fKt.has(t.$Ot)?i=this.fKt.get(t.$Ot):(i=_Z(t.yut.lk.lk),this.lKt=t.fLt,this.fKt.set(t.$Ot,i)),i}async pzt(t,i){fr(i);const e=this.dKt(t),s=t.yut;if(e!==vZ.gHt&&e!==vZ.pHt)return super.pzt(t,i);if(s.BHt.UW.some(e0))throw new as(me.CONTENT_PROTECTION_NOT_SUPPORTED,"SAMPLE-AES encryption is not supported for MPEG-TS or Packed Audio segments");const n=this.wE.cKt();let r;e===vZ.gHt?(ol.cN($$,"Transmuxing MPEG-TS: "+ah(s.BHt.Syt)),r=await n.vKt({data:s.lk.lk,metadata:this._Kt})):(ol.cN($$,"Transmuxing raw audio: "+ah(s.BHt.Syt)),r=await n.gKt({data:s.lk.lk,metadata:this._Kt})),fr(i),this.wzt(t.fLt,{q9:r.metadata.audio_codec,W9:r.metadata.video_codec,fOt:void 0}),r.metadata.video_frame_rate&&this.yzt(t.fLt,r.metadata.video_frame_rate);const h=s0(r.metadata.first_decode_timestamp),o=s0(r.metadata.first_presentation_timestamp),a=void 0!==r.metadata.first_video_presentation_timestamp?s0(r.metadata.first_video_presentation_timestamp):void 0;if(s.BHt.Get=o,this.Azt(t.fLt),void 0!==a&&this.bzt(t.fLt,s.BHt,function(t,i){let e=t.gF(i);return e.lF(ul.SF)&&(e=e.gO(GE())),e}(a,o)),!this.pVt.zUt(t.$Ot)){const e=ul.hU(s.BHt.CO);for(const i of this.azt)this.pVt.iVt(t.$Ot,i,h,e,Z$(s.BHt),!0);this.Azt(t.fLt),this.pVt.zUt(t.$Ot)||await ua(this.pVt.XUt(t.$Ot),i)}const u=this.pVt.tVt(h,s.BHt);this._Kt=r.metadata;const c=this.pVt.$Ut(o,s.BHt).rF(),d=QZ(s.BHt,c);var l;const f={VHt:d,HHt:KZ(s.BHt,d),CO:c,ct:null!=(l=s.BHt.ct)?l:0,EU:u.rF(),$Ot:t.$Ot,fLt:t.fLt,BHt:s.BHt};if(void 0===r.data.audio_media&&void 0===r.data.video_media){for(const t of this.azt){const i=Y({Km:"yut",lk:void 0,iat:t},f);this.Wqt(i)}return}const v=[];if(void 0!==r.data.audio_media){if(r.data.audio_init&&(!this.pKt||this.mKt!==t.$Ot||!ko(this.pKt,r.data.audio_init))){const i=this.pVt.$Ut(s.BHt.Get,s.BHt).rF(),e={Km:"rRt",lk:{Km:We.wZ,lk:r.data.audio_init},iat:at.Bk,$Ot:t.$Ot,kzt:{Rrt:'audio/mp4; codecs="'+r.metadata.audio_codec+'"',UW:s.BHt.UW},CO:i,fLt:t.fLt,BHt:s.BHt};this.pKt=r.data.audio_init,this.mKt=t.$Ot,this.Wqt(e)}const i=Y({Km:"yut",lk:{Km:We.wZ,lk:r.data.audio_media},iat:at.Bk},f);this.Wqt(i)}else if(t.yut.BHt.EFt&&Ct(this.azt,at.Bk)){const t=Y({Km:"yut",lk:void 0,iat:at.Bk},f);this.Wqt(t)}if(void 0!==r.data.video_media){if(r.data.video_init&&(!this.wKt||this.yKt!==t.$Ot||!ko(this.wKt,r.data.video_init))){const i=this.pVt.$Ut(s.BHt.Get,s.BHt).rF(),e={Km:"rRt",lk:{Km:We.wZ,lk:r.data.video_init},iat:at.Mk,$Ot:t.$Ot,kzt:{Rrt:'video/mp4; codecs="'+r.metadata.video_codec+'"',UW:s.BHt.UW},CO:i,fLt:t.fLt,BHt:s.BHt};this.wKt=r.data.video_init,this.yKt=t.$Ot,this.bKt=kB(dh(r.data.video_init)),this.Wqt(e)}const i=this.bKt.Z[0],e=J$(r.data.video_media,this.bKt)[0],n=this.sKt(r.data.video_media,i,e,void 0,s.BHt);this.nKt=i;const h=Y({Km:"yut",lk:{Km:We.wZ,lk:n},iat:at.Mk},f);this.Wqt(h),v.push(e)}else if(t.yut.BHt.EFt&&Ct(this.azt,at.Mk)){const t=Y({Km:"yut",lk:void 0,iat:at.Mk},f);this.Wqt(t)}this.rKt=s.BHt,this.hKt=v}Zg(){this.pKt=void 0,this.wKt=void 0,this.mKt=-1,this.yKt=-1,super.Zg()}constructor(t,i,e,s){super(i,e,s),this.wE=void 0,this._Kt=void 0,this.pKt=void 0,this.wKt=void 0,this.bKt=void 0,this.mKt=-1,this.yKt=-1,this.lKt=void 0,this.fKt=re(),this.wE=t}},i0=class{_Tt(t,i,e){return new t0(this,t,i,e)}};function e0(t){return t.Hk===ao.tOt}function s0(t){return ul.yF(yo.fromBits(t.low,t.high),t.base)}r(),r();var n0=function(t){return t[t.MPEGTS_TO_FMP4=0]="MPEGTS_TO_FMP4",t[t.RAW_AUDIO_TO_FMP4=1]="RAW_AUDIO_TO_FMP4",t}({}),r0=()=>{const t=function(){if("undefined"==typeof WebAssembly)return!1;const t=zs.d_;if(t>0&&t<=56)return!1;try{return void 0!==new WebAssembly.Module(Cn("AGFzbQEAAAA="))}catch(t){return!1}}();return r0=()=>t,t};var h0=class{vKt(t){return this.AKt(n0.MPEGTS_TO_FMP4,t)}gKt(t){return this.AKt(n0.RAW_AUDIO_TO_FMP4,t)}FQt(){const t=M$(this.UQt,this.VQt,{name:"THEOplayer transmux worker"});return t.wn("message",this.HQt),t.wn("error",this.WQt),t}AKt(t,i){const e=++this.qQt,s={type:t,id:e,input:i},n=new Ga;return this.KQt.set(e,n),this.mQt.pQt(s),n.Yy}zg(t){void 0===t&&(t=new Qc),this.KQt.forEach(i=>i.Ky(t)),this.KQt.clear(),this.mQt.bQt()}constructor(t){this.VQt=void 0,this.UQt=void 0,this.mQt=void 0,this.qQt=0,this.KQt=re(),this.HQt=t=>{const i=t.data;if(void 0!==i.requestId){const t=this.KQt.get(i.requestId);if(!t)return;this.KQt.delete(i.requestId),i.success?t.Qy(i.output):t.Ky(new as(i.errorCode,i.error))}else i.success||this.zg(new as(i.errorCode,i.error))},this.WQt=t=>{const i=new as(me.MEDIA_DECODE_ERROR,t.error.message,t.error);this.zg(i)},this.VQt=t;const i=r0()?"THEOplayer.transmux.js":"THEOplayer.transmux.asmjs.js";try{this.UQt=zd.Pm(i,t)}catch(t){throw new as(me.CONFIGURATION_ERROR,"Invalid player configuration: missing libraryLocation",t)}this.mQt=this.FQt()}},o0=class extends i0{uKt(){return void 0!==this.mQt}cKt(){var t;return null!=(t=this.mQt)?t:this.mQt=new h0(this.SKt)}zg(){this.mQt&&(this.mQt.zg(),this.mQt=void 0)}constructor(t){super(),this.SKt=void 0,this.mQt=void 0,this.SKt=t,this.mQt=void 0}},a0=class{jet(){return new o0(this.SKt)}constructor(t){this.SKt=void 0,this.SKt=t}},u0=class extends k${zP(){return this.PL.zP()}get WP(){return this.PL.WP}set WP(t){this.PL.WP=t}async kn(){var t;await super.kn(),null==(t=this.$xt)||t.kn()}constructor(t,i,e,s,n){const r=function(t){return I$.US()?new I$:new V$(t)}(n.libraryLocation);super(t,i,e,s,r,new a0(n.libraryLocation),new rX(Wc.Bg.Bxt,Wc.Bg.Nxt,Wc.Bg.bct,Wc.Bg.Lxt),n),this.$xt=void 0,zs.X_&&(this.$xt=new qU(this))}},c0=class extends u0{async kn(){await super.kn(),await this.Nq.Dq(this.PL)}constructor(t,i,e,s,n){const r=new qs(t);super(r.Yq(at.Mk),i,e,s,n),this.Nq=void 0,this.Nq=r}},d0=class extends P${Jq(t,i){return!!fv(t.useManagedMediaSource)&&(!(!t.useManagedMediaSource&&(zs.ru||zs.Tg))&&super.Jq(t,i))}async Zq(t){return!(t.clearkey&&!t.fairplay&&zs.X_)&&super.Zq(t)}};oe(new class extends d0{DC(t,i,e,s,n,r,h){return new c0(i,e,n,r,s)}$q(){return!0}constructor(...t){super(...t),this.tz=$._C}}),ol.Rt=()=>{var t;return Boolean(null==(t=s)?void 0:t.THEOplayerDebugLogsEnabled)},r(),r(),r(),r();var l0=class{sdt(t,i){return Promise.resolve(!1)}Aut(t,i){return Promise.resolve(void 0)}hTt(t){return Promise.resolve(void 0)}jJ(t){return Promise.resolve(void 0)}},f0=class extends Ne{TKt(){var t;return null==(t=this.kKt)?void 0:t.sLt}Tn(){Wr(ws(()=>this.EKt(this.hT.Yg),this.hT.Yg))}async EKt(t){await this.nEt.UVt(t),this.xKt&&(this.PKt(this.xKt.Ti,this.xKt.Mi),this.xKt=void 0),this.i8=!0}IKt(t,i){this.i8?this.PKt(t,i):this.xKt={Ti:t,Mi:i}}PKt(t,i){const e=this.CKt(t,i),s=null==e?void 0:e.fFt[0];s!==this.kKt&&(this.RKt(),void 0!==s&&(this.kKt=s,this.DKt=new bZ(this.nEt,s),this.DKt.iWt()))}RKt(){this.kKt=void 0,this.DKt&&(this.DKt.zg(),this.DKt=void 0)}CKt(t,i){const e=hh(this.nEt.Br._Vt,e=>void 0!==e.RRt&&e.RRt.Ti===t&&e.RRt.Mi===i);return null!=e?e:this.nEt.Br._Vt[0]}kn(){this.Vo(),this.hT.Zg(),this.hT.zg(),this.RKt(),this.nEt.zg()}constructor(t,i,e){super(),this.Ac=void 0,this.nEt=void 0,this.kKt=void 0,this.DKt=void 0,this.i8=void 0,this.xKt=void 0,this.hT=new Zc,this.Ac=t,this.nEt=new rZ(e,new l0,t.useCredentials,t.src,t.liveOffset),this.nEt.wn(d.qw,this.Rs),this.i8=!1}};r();var v0=class extends je{get ht(){return this.V8.ht}get Fx(){return this.V8.Fx}get Vx(){return this.V8.Vx}set Vx(t){this.V8.Vx=t}get bt(){return this.V8.bt}get zx(){return this.V8.zx}set zx(t){this.V8.zx=t}Xx(t,i){this.zx=t}get ct(){return this.V8.ct}get Qx(){return this.V8.Qx}get Jx(){return this.V8.Jx}get $x(){return this.V8.$x}get iP(){return this.V8.iP}get lt(){return this.V8.lt}get sP(){return this.V8.sP}get rP(){return this.V8.rP}get oP(){return this.V8.oP}set oP(t){this.V8.oP=t}get cP(){return this.V8.cP}get lP(){return this.V8.lP}get vP(){return this.V8.vP}set vP(t){this.V8.vP=t}get pP(){return this.V8.pP}get wP(){return this.V8.wP}set wP(t){this.V8.wP=t}get AP(){return this.V8.AP}get kP(){return this.V8.kP}get xP(){return this.V8.xP}get uq(){return this.V8.uq}get nt(){return this.V8.nt}get DP(){return this.V8.DP}get rt(){return this.V8.rt}get MP(){return this.V8.MP}get OP(){return this.V8.OP}set OP(t){this.V8.OP=t}get VP(){return this.V8.VP}get WP(){return this.V8.WP}set WP(t){this.V8.WP=t}get dq(){return this.V8.dq}get OL(){}YP(){return this.V8.YP()}qP(){return this.V8.qP()}Aa(){return this.V8.Aa()}sI(t){return this.V8.sI(t)}zP(){return this.V8.zP()}we(){return this.V8.we()}$P(){return this.V8.$P()}tI(){return this.V8.tI()}jP(){return this.V8.jP()}QP(){return this.V8.QP()}hr(){return this.V8.hr()}Ta(t,i,e){return this.V8.Ta(t,i,e)}IP(t,i,e,s){return this.V8.IP(t,i,e,s)}CP(){return this.V8.CP()}be(){return this.V8.be()}JP(){return this.V8.JP()}ZP(){return this.V8.ZP()}kn(){this.Vo();for(const t of pC)this.V8.mn(t,this.Rs);return this.V8.kn()}constructor(t){super(),this.V8=void 0,this.V8=t;for(const t of pC)this.V8.wn(t,this.Rs)}},_0=class extends v0{async Ta(t,i,e){await super.Ta(t,i,e),t.hlsDateRange&&this.myt(t,i)}myt(t,i){this.NKt=new f0(t,i,this.BKt),this.NKt.wn(d.qw,this.handleManifestUpdate),this.NKt.Tn()}hr(){return this.oHt&&(this.nt.it(this.oHt),this.J9.it(this.oHt),this.oHt.kn(),this.oHt=void 0,this.MKt=!1),this.NKt&&(this.NKt.kn(),this.NKt=void 0),this.J9.hr(),super.hr()}kn(){return this.mn(d.Jw,this.rjt),this.NKt&&(this.NKt.kn(),this.NKt=void 0),this.J9.kn(),super.kn()}constructor(t,i,e){super(t),this.NKt=void 0,this.BKt=void 0,this.MKt=!1,this.oHt=void 0,this.J9=void 0,this.handleManifestUpdate=t=>{this.So(t);const i=this.NKt.TKt();if(i){const t=this.uq;if(t){const e=t.getTime();let s=this.oHt;s||(s=new BJ,this.oHt=s),s.er(i.tFt,t=>(t.getTime()-e)/1e3),!this.MKt&&s.L.V>0&&(this.nt.tt(s),this.J9.tt(s),this.MKt=!0)}}},this.rjt=()=>{this.NKt&&this.NKt.IKt(this.MP,this.DP)},this.BKt=i,this.J9=new gL(this),this.wn(d.Jw,this.rjt)}};!function(t){lC.iz().ez(t)}(function(t,i,e){return new _0(t,i,e)}),r(),r(),r(),r();var Us=class extends Qr{get name(){return"CastError"}constructor(t,i=""){super("An error occurred while casting."),this.errorCode=void 0,this.description=void 0,this.errorCode=t,this.description=i}};async function g0(t){w0()||await async function(t){if(null==t?void 0:t.Hg)return Promise.reject(new Qc);const{Yy:i,Qy:e,Ky:n}=function(){let t,i;return{Yy:new Promise((e,s)=>{t=e,i=s}),Qy:t,Ky:i}}(),r=s.__onGCastApiAvailable,h=()=>{s.__onGCastApiAvailable=r,n(new Qc)};return s.__onGCastApiAvailable=(i,o)=>{i?e():n(new m(o)),null==t||t.jg(h),s.__onGCastApiAvailable=r,r&&r(i,o)},null==t||t.Xg(h),i}(t),m0()||await Ze(100,t),m0()||(zd.um('Detected the Chromecast library was loaded without the CAF framework. It is strongly encouraged to load it with the CAF framework by using this URL: "//www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1"'),await p0())}var p0=Oc(()=>function(t){return new Promise((i,e)=>{const s=h.createElement("script");s.onload=()=>i(),s.onerror=t=>e((null==t?void 0:t.error)||t),s.type="text/javascript",s.src=t,(h.head||h.documentElement).appendChild(s)})}("//www.gstatic.com/cast/sdk/libs/sender/1.0/cast_framework.js").catch(()=>{throw new Us("API_NOT_INITIALIZED","The Chromecast library could not be loaded successfully.")}));function m0(){return Boolean("undefined"!=typeof cast&&cast.framework)}function w0(){return"undefined"!=typeof chrome&&chrome&&chrome.cast&&chrome.cast.isAvailable}function y0(t,i,e,s){if(it(i))for(const e of w.keys(i)){if("type"===e||"images"===e)continue;const s=i[e];it(s)&&(t[e]=s)}!function(t,i,e,s){if(!it(e)&&!it(null==i?void 0:i.images))return;t.images=[],e&&t.images.push(new s.Image(e));if(null==i?void 0:i.images)if(Q(i.images))t.images.push(new s.Image(i.images));else if(hi(i.images))for(const e of i.images){let i;var n,r;if(Q(e))i=new s.Image(e);else i=new s.Image(e.src),i.height=null!=(n=e.height)?n:null,i.width=null!=(r=e.width)?r:null;t.images.push(i)}}(t,i,e,s)}function b0(t,i,e){return void 0===e&&(e=chrome),function(t,i,e){switch(null==t?void 0:t.type){case"movie":{const s=new e.MovieMediaMetadata;return y0(s,t,i,e),s}case"audio":{const s=new e.MusicTrackMediaMetadata;return y0(s,t,i,e),!it(s.artist)&&it(t.artistName)&&(s.artist=t.artistName),s}case"tv-show":{const s=new e.TvShowMediaMetadata;return y0(s,t,i,e),!it(s.title)&&it(t.episodeTitle)&&(s.title=t.episodeTitle),!it(s.season)&&it(t.seasonNumber)&&(s.season=t.seasonNumber),!it(s.episode)&&it(t.episodeNumber)&&(s.episode=t.episodeNumber),s}default:{const s=new e.GenericMediaMetadata;return y0(s,t,i,e),s}}}(t,i,function(t){return{GenericMediaMetadata:t.cast.media.GenericMediaMetadata,MovieMediaMetadata:t.cast.media.MovieMediaMetadata,TvShowMediaMetadata:t.cast.media.TvShowMediaMetadata,MusicTrackMediaMetadata:t.cast.media.MusicTrackMediaMetadata,Image:t.cast.Image}}(e))}function Wn(t){switch(t){case chrome.cast.ErrorCode.CANCEL:return"CANCEL";case chrome.cast.ErrorCode.TIMEOUT:return"TIMEOUT";case chrome.cast.ErrorCode.API_NOT_INITIALIZED:return"API_NOT_INITIALIZED";case chrome.cast.ErrorCode.INVALID_PARAMETER:return"INVALID_PARAMETER";case chrome.cast.ErrorCode.EXTENSION_NOT_COMPATIBLE:return"EXTENSION_NOT_COMPATIBLE";case chrome.cast.ErrorCode.EXTENSION_MISSING:return"EXTENSION_MISSING";case chrome.cast.ErrorCode.RECEIVER_UNAVAILABLE:return"RECEIVER_UNAVAILABLE";case chrome.cast.ErrorCode.SESSION_ERROR:return"SESSION_ERROR";case chrome.cast.ErrorCode.CHANNEL_ERROR:return"CHANNEL_ERROR";case chrome.cast.ErrorCode.LOAD_MEDIA_FAILED:return"LOAD_MEDIA_FAILED";default:return"CANCEL"}}function A0(t){if(t.items&&t.items.length>0&&it(t.currentItemId)&&t.currentItemId>=0)return hh(t.items,i=>i.itemId===t.currentItemId)}r(),r(),r(),r(),r();var Ln="urn:x-cast:com.theoplayer.cast";r(),r();var S0=function(t){return t.LKt="theoplayer_receiver_info",t.OKt="theoplayer_trackpropertychange",t.FKt="theoplayer_propertychange",t}({});r();var T0=function(t){return t.SKIP_AD="SKIP_AD",t}({});r();function qn(t){h.createElement("img").src=t}r(),r(),r();var k0=new RegExp(/^(\d\d):(\d\d):(\d\d)(?:\.(\d{3}))?$/);function E0(t){if(!Q(t))return;const i=t.match(k0);return i?3600*x(i[1],10)+60*x(i[2],10)+Number(i[3])+(Number(i[4])||0)/1e3:void 0}function x0(t){if(void 0===t)return;const i=t.match(/^([1-9]?\d|100)%$/);return i?x(i[1])/100:void 0}function P0(t,i){return"vmap"===t.type||!it(t.type)&&!it(i)}function I0(t,i){return"vast"===t.type||!it(t.type)&&it(i)}r(),r(),r();var C0=class{},R0=class extends C0{get UKt(){return this.qc}VKt(){return null!=this.HKt||(this.HKt=hs(this.qc,t=>t.VKt())),this.HKt}constructor(t){super(),this.qc=void 0,this.HKt=void 0,this.qc=t.sort((t,i)=>t.zB-i.zB)}};r(),r();var D0=class extends C0{get o(){return this.WKt}get zB(){return this.qKt}get zKt(){return this.GKt}constructor(t,i){super(),this.WKt=void 0,this.qKt=void 0,this.GKt=void 0,this.WKt=t,this.qKt=i,this.GKt=!1}},N0=class extends D0{get XKt(){return this.jKt}get QKt(){return this.KKt}get YKt(){return this.JKt}get ZKt(){return this.$Kt}get lt(){return this.nq}VKt(){if(void 0===this.tYt){let t,i,e,s=[];for(const n of this.jKt)n.iYt&&(t=n.iYt),n.eYt&&(i=n.eYt),n.sYt&&(e=n.sYt),s=s.concat(n.universalAdIds);this.tYt={ZKt:this.ZKt,iYt:t,nYt:i,sYt:e,lt:this.lt,rYt:s}}return[this.tYt]}constructor(t,i,e,s,n,r,h){super(t,i),this.KKt=void 0,this.JKt=void 0,this.$Kt=void 0,this.jKt=void 0,this.nq=void 0,this.tYt=void 0,this.KKt=e,this.JKt=s,this.$Kt=n,this.jKt=r,this.nq=h}};r(),r();var B0=class{get hYt(){return this.oYt}get aYt(){return this.uYt}constructor(t,i){this.oYt=void 0,this.uYt=void 0,this.oYt=t,this.uYt=i}},M0=class{get cYt(){return this.dYt}get lYt(){return this.fYt}get vYt(){return this._Yt}get gYt(){return this.pYt}get od(){return this.mYt}set od(t){this.mYt=t}get wYt(){return this.yYt}get bYt(){return this.AYt}SYt(){this.AYt=!0}get QKt(){return this.KKt}constructor(t,i,e,s,n,r){this.dYt=void 0,this.fYt=void 0,this._Yt=void 0,this.pYt=void 0,this.AYt=void 0,this.yYt=void 0,this.mYt=void 0,this.KKt=void 0,this.dYt=t,this.fYt=i,this._Yt=e,this.pYt=s,this.AYt=!1,this.yYt=n,this.KKt=r}};r();var L0=function(t){return t.TYt="all",t.kYt="any",t.pz="none",t}({});var O0=class{get EYt(){return this.xYt}get PYt(){return this.IYt}constructor(t,i){this.xYt=void 0,this.IYt=void 0,this.xYt=t,this.IYt=i}},F0=class{get o(){return this.aS}get Ti(){return this.lA}get Mi(){return this.fA}get CYt(){return this.RYt}get DYt(){return this.NYt}get BYt(){return this.MYt}get LYt(){return this.OYt}get FYt(){return this.UYt}get VYt(){return this.HYt}get WYt(){return this.qYt}get cYt(){return this.dYt}get lYt(){return this.fYt}get vYt(){return this._Yt}get zYt(){return this.GYt}get aYt(){return this.XYt}get jYt(){return this.QYt}constructor(t,i,e,s,n,r,h,o,a,u,c,d,l,f,v,_){this.lA=void 0,this.fA=void 0,this.aS=void 0,this.RYt=void 0,this.NYt=void 0,this.MYt=void 0,this.OYt=void 0,this.UYt=void 0,this.HYt=void 0,this.qYt=void 0,this.dYt=void 0,this.fYt=void 0,this._Yt=void 0,this.GYt=void 0,this.XYt=void 0,this.QYt=void 0,this.lA=t,this.fA=i,this.aS=e,this.RYt=s,this.NYt=n,this.MYt=r,this.OYt=h,this.UYt=o,this.HYt=a,this.qYt=u,this.dYt=c,this.fYt=d,this._Yt=l,this.GYt=f,this.XYt=v,this.QYt=_}};r();var U0=class{get id(){return this.aS}get uri(){return this.NFt}constructor(t,i){this.aS=void 0,this.NFt=void 0,this.aS=t,this.NFt=i}},V0=class{get KYt(){return this.YYt}get JYt(){return this.ZYt}get $Yt(){return this.tJt}get iJt(){return this.eJt}constructor(t,i,e,s){this.YYt=void 0,this.ZYt=void 0,this.tJt=void 0,this.eJt=void 0,this.YYt=t,this.ZYt=i,this.tJt=e,this.eJt=s}},H0=class extends D0{get ZKt(){return this.$Kt}get sJt(){return this.nJt}get rJt(){return this.hJt}get XKt(){return this.jKt}get oJt(){return this.aJt}get uJt(){return this.cJt}get lt(){return this.nq}VKt(){return void 0===this.nJt?[]:(null!=this.HKt||(this.HKt=this.nJt.VKt().map(t=>this.dJt(t))),this.HKt)}dJt(t){let i,e,s;for(const t of this.XKt)t.iYt&&(i=t.iYt),t.eYt&&(e=t.eYt),t.sYt&&(s=t.sYt);const n=t.ZKt.concat(this.ZKt);let r=t.iYt;if(i&&t.iYt){const e=new V0(t.iYt.lJt.KYt,t.iYt.lJt.JYt,t.iYt.lJt.$Yt.concat(i.lJt.$Yt),t.iYt.lJt.iJt.concat(i.lJt.iJt));r=t.iYt,r.lJt=e,r.aYt=r.aYt.concat(i.aYt)}let h=t.nYt;if(e&&e.hYt){var o,a;const s=[];for(const t of e.hYt)s.concat(t.gYt.$Yt);const n=[];var u,c;for(const e of null!=(u=null==(o=t.nYt)?void 0:o.hYt)?u:[]){var d,l,f;const r=new V0(e.gYt.KYt,e.gYt.JYt,e.gYt.$Yt.concat(s),(null!=(l=null==(d=t.iYt)?void 0:d.lJt.iJt)?l:[]).concat(null!=(f=null==i?void 0:i.lJt.iJt)?f:[]));n.push(new M0(e.cYt,e.lYt,e.vYt,r,e.wYt,e.QKt))}h=new B0(n,(null!=(c=null==(a=t.nYt)?void 0:a.aYt)?c:[]).concat(e.aYt))}let v=t.sYt;if(v){var _;let i=v.EYt;var g,p;s&&s.EYt&&(i=s.EYt),v=new O0(i,(null!=(g=null==(_=t.sYt)?void 0:_.PYt)?g:[]).concat(null!=(p=null==s?void 0:s.PYt)?p:[]))}let m=t.lt;return this.lt&&(m=this.lt),{ZKt:n,iYt:r,nYt:h,sYt:v,lt:m,rYt:t.rYt}}constructor(t,i,e,s,n,r,h,o,a){super(t,i),this.$Kt=void 0,this.nJt=void 0,this.hJt=void 0,this.aJt=void 0,this.cJt=void 0,this.jKt=void 0,this.nq=void 0,this.HKt=void 0,this.$Kt=e,this.nJt=s,this.hJt=n,this.jKt=r,this.aJt=h,this.cJt=o,this.nq=a}};r();var W0=class{get o(){return this.aS}get fJt(){return this.vJt}get _Jt(){return this.gJt}get FYt(){return this.UYt}get iYt(){return this.pJt}get eYt(){return this.mJt}get sYt(){return this.wJt}get universalAdIds(){return this.yJt}constructor(t,i,e,s,n,r,h,o){this.aS=void 0,this.vJt=void 0,this.gJt=void 0,this.UYt=void 0,this.pJt=void 0,this.mJt=void 0,this.wJt=void 0,this.yJt=void 0,this.aS=t,this.vJt=i,this.gJt=e,this.UYt=s,this.pJt=n,this.mJt=r,this.wJt=h,this.yJt=o}};r();var q0=class{get ct(){return this.bJt}get AJt(){return this.SJt}get aYt(){return this.uYt}set aYt(t){this.uYt=t}set lJt(t){this.TJt=t}get lJt(){return this.TJt}get kJt(){return this.EJt}set kJt(t){this.EJt=t}get xJt(){return this.AYt}get od(){return this.mYt}set od(t){this.mYt=t}get wYt(){return this.yYt}get QKt(){return this.KKt}SYt(){this.AYt=!0}get PJt(){return this.IJt}set PJt(t){this.IJt=t}get CJt(){return this.RJt}get DJt(){return this.NJt}constructor(t,i,e,s,n,r,h,o,a){this.bJt=void 0,this.SJt=void 0,this.IJt=void 0,this.uYt=void 0,this.TJt=void 0,this.EJt=void 0,this.AYt=void 0,this.yYt=void 0,this.mYt=void 0,this.KKt=void 0,this.RJt=void 0,this.NJt=void 0,this.bJt=t,this.SJt=i,this.uYt=e,this.TJt=s,this.EJt=n,this.AYt=!1,this.yYt=r,this.KKt=h,this.RJt=o,this.NJt=a}};function Ic(t,i){return X0(t)&&t.getAttribute(i)||void 0}function z0(t,i){return G0(t,i,void 0,!1)}function G0(t,i,e,s){return i===(t.localName?t.localName:t.nodeName)&&(s&&e?e===t.namespaceURI:!e||!t.namespaceURI||e===t.namespaceURI)}function Po(t,i){const e=[];for(let s=0;s<t.childNodes.length;s+=1){const n=t.childNodes.item(s);X0(n)&&z0(n,i)&&e.push(n)}return e}function X0(t){return t&&1===t.nodeType}function j0(t,i){const e=(new DOMParser).parseFromString(t,i);if(!e||e.getElementsByTagName("parsererror").length>0)throw new m('Invalid document for MIME type "'+i+'"');return e}function Q0(t){return t.replace(/[<>&'"]/g,t=>{switch(t){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case"'":return"&apos;";case'"':return"&quot;";default:return t}})}function K0(t){return"data:application/xml,"+encodeURIComponent(t)}r(),r();var gl=function(t){return t.BJt="mute",t.MJt="unmute",t.jw="pause",t.LJt="resume",t.OJt="rewind",t.FJt="skip",t.UJt="playerExpand",t.VJt="playerCollapse",t.HJt="fullscreen",t.WJt="exitFullscreen",t.qJt="expand",t.COLLAPSE="collapse",t.tTt="start",t.zJt="firstQuartile",t.GJt="thirdQuartile",t.XJt="midpoint",t.jJt="complete",t.QJt="acceptInvitationLinear",t.KJt="acceptInvitation",t.YJt="timeSpentViewing",t.JJt="otherAdInteraction",t.Qw="progress",t.ZJt="creativeView",t.$Jt="adExpand",t.tZt="adCollapse",t.iZt="minimize",t.eZt="close",t.sZt="closeLinear",t.nZt="overlayViewDuration",t.rZt="breakStart",t.hZt="breakEnd",t.ma="error",t}({});function Y0(t){switch(t){case"breakStart":case"breakEnd":case"error":return!0;default:return!1}}var J0=["mute","unmute","pause","resume","rewind","skip","closeLinear","close","playerExpand","playerCollapse","fullscreen","exitFullscreen","expand","collapse","creativeView","start","firstQuartile","midpoint","thirdQuartile","complete","acceptInvitationLinear","acceptInvitation","timeSpentViewing","otherAdInteraction","progress"];function Z0(t){return void 0!==t&&-1!==J0.indexOf(t)}var $0=["start","firstQuartile","midpoint","thirdQuartile","complete","mute","unmute","pause","resume","rewind","skip","playerExpand","playerCollapse","expand","collapse","fullscreen","exitFullscreen","creativeView","acceptInvitation","adExpand","adCollapse","minimize","close","overlayViewDuration","otherAdInteraction","progress"];function t1(t){return void 0!==t&&-1!==$0.indexOf(t)}var i1=["mute","unmute","pause","resume","rewind","skip","playerExpand","playerCollapse","creativeView"];function e1(t){return void 0!==t&&-1!==i1.indexOf(t)}function s1(t,i){if(void 0===t||""===t||void 0===i)return;let e=t.match(/^(\d+):(\d+):(\d+)$/);return e?C(e[1]||"0")+60*C(e[2]||"0")+C(e[3]||"0"):(e=t.match(/^(100|[1-9]\d|\d)%$/),e?C(e[1]||"0")*i/100:void 0)}var n1=class{get oX(){return this.oZt}get ac(){return this.aZt}get eventURL(){return this.uZt}constructor(t,i,e){this.oZt=void 0,this.aZt=void 0,this.uZt=void 0,this.oZt=t,this.aZt=i,this.uZt=e}};r();var r1=class{get cZt(){return this.dZt}constructor(t){this.dZt=void 0,this.dZt=t}},h1=class extends r1{get KYt(){return this.YYt}get jYt(){return this.QYt}get lZt(){return this.fZt}constructor(t,i,e,s){super(t),this.fZt=void 0,this.QYt=void 0,this.YYt=void 0,this.fZt=i,this.YYt=e,this.QYt=s}},o1=class extends r1{constructor(t){super(t)}},a1=class extends r1{constructor(t){super(t)}};r();var Hr={vZt:{Jy:100,Iy:"XML parsing error."},_Zt:{Jy:303,Iy:"Empty or invalid VAST error."},gZt:{Jy:400,Iy:"General linear error"},pZt:{Jy:403,Iy:"Unsupported MIME-type or missing mediafiles error"},mZt:{Jy:500,Iy:"General nonlinear error"},BG:{Jy:900,Iy:"Network error"}},u1=class{get wZt(){return this.yZt}bZt(t){if(!this.wZt)return;const i=this.wZt.replace(/\[ERRORCODE]/,""+t.Jy);qn(i)}constructor(t){this.yZt=void 0,this.yZt=t}};r();var ys=class extends Qr{get AZt(){return this.SZt}get TZt(){var t;return null!=(t=this.kZt)?t:900}constructor(t,i,e,s){super(e||i&&c1[i]||t,s),this.SZt=void 0,this.kZt=void 0,this.G2=void 0,this.SZt=t,this.kZt=i,this.G2=e}},$c=function(t){return t.ADBLOCK="adblock",t.NETWORK="network",t.PARSING="parsing",t.PLAYBACK="playback",t.GENERAL="general",t}({}),xs=function(t){return t[t.VAST_MALFORMED_RESPONSE=100]="VAST_MALFORMED_RESPONSE",t[t.VAST_SCHEMA_VALIDATION_ERROR=101]="VAST_SCHEMA_VALIDATION_ERROR",t[t.VAST_UNSUPPORTED_VERSION=102]="VAST_UNSUPPORTED_VERSION",t[t.VAST_TRAFFICKING_ERROR=200]="VAST_TRAFFICKING_ERROR",t[t.VAST_UNEXPECTED_LINEARITY=201]="VAST_UNEXPECTED_LINEARITY",t[t.VAST_UNEXPECTED_DURATION_ERROR=202]="VAST_UNEXPECTED_DURATION_ERROR",t[t.UNEXPECTED_SIZE=203]="UNEXPECTED_SIZE",t[t.VAST_WRAPPER_ERROR=300]="VAST_WRAPPER_ERROR",t[t.VAST_LOAD_TIMEOUT=301]="VAST_LOAD_TIMEOUT",t[t.VAST_TOO_MANY_REDIRECTS=302]="VAST_TOO_MANY_REDIRECTS",t[t.VAST_NO_ADS_AFTER_WRAPPER=303]="VAST_NO_ADS_AFTER_WRAPPER",t[t.GENERAL_LINEAR_ERROR=400]="GENERAL_LINEAR_ERROR",t[t.FILE_NOT_FOUND=401]="FILE_NOT_FOUND",t[t.VAST_MEDIA_LOAD_TIMEOUT=402]="VAST_MEDIA_LOAD_TIMEOUT",t[t.VAST_LINEAR_ASSET_MISMATCH=403]="VAST_LINEAR_ASSET_MISMATCH",t[t.VAST_PROBLEM_DISPLAYING_MEDIA_FILE=405]="VAST_PROBLEM_DISPLAYING_MEDIA_FILE",t[t.MEZZANINE_FILE_REQUIRES=406]="MEZZANINE_FILE_REQUIRES",t[t.MEZZANINE_FILE_DOWNLOADED_FIRST_TIME=407]="MEZZANINE_FILE_DOWNLOADED_FIRST_TIME",t[t.AD_IN_VAST_REJECTED=408]="AD_IN_VAST_REJECTED",t[t.INTERACTIVE_CREATIVE_NOT_EXECUTED=409]="INTERACTIVE_CREATIVE_NOT_EXECUTED",t[t.VERIFICATION_CODE_NOT_EXECUTED=410]="VERIFICATION_CODE_NOT_EXECUTED",t[t.GENERAL_NON_LINEAR_ERROR=500]="GENERAL_NON_LINEAR_ERROR",t[t.NONLINEAR_DIMENSIONS_ERROR=501]="NONLINEAR_DIMENSIONS_ERROR",t[t.OVERLAY_AD_LOADING_FAILED=502]="OVERLAY_AD_LOADING_FAILED",t[t.VAST_NONLINEAR_ASSET_MISMATCH=503]="VAST_NONLINEAR_ASSET_MISMATCH",t[t.GENERAL_COMPANION_AD_ERROR=600]="GENERAL_COMPANION_AD_ERROR",t[t.INVALID_DIMENSIONS_COMPANION_AD=601]="INVALID_DIMENSIONS_COMPANION_AD",t[t.COMPANION_REQUIRED_ERROR=602]="COMPANION_REQUIRED_ERROR",t[t.COMPANION_AD_LOADING_FAILED=603]="COMPANION_AD_LOADING_FAILED",t[t.UNABLE_TO_FIND_SUPPORTED_COMPANION=604]="UNABLE_TO_FIND_SUPPORTED_COMPANION",t[t.UNKNOWN_ERROR=900]="UNKNOWN_ERROR",t[t.GENERAL_VPAID_ERROR=901]="GENERAL_VPAID_ERROR",t[t.MALFORMED_URI=1005]="MALFORMED_URI",t[t.VAST_ASSET_NOT_FOUND=1007]="VAST_ASSET_NOT_FOUND",t[t.VAST_EMPTY_RESPONSE=1009]="VAST_EMPTY_RESPONSE",t[t.UNKNOWN_AD_RESPONSE=1010]="UNKNOWN_AD_RESPONSE",t[t.UNSUPPORTED_LOCALE=1011]="UNSUPPORTED_LOCALE",t[t.INVALID_ARGUMENTS=1101]="INVALID_ARGUMENTS",t[t.INVALID_ADX_EXTENSION=1105]="INVALID_ADX_EXTENSION",t[t.AUTOPLAY_DISALLOWED=1205]="AUTOPLAY_DISALLOWED",t}({}),c1={100:"XML parsing error.",101:"VAST schema validation error.",102:"VAST version of response not supported.",200:"Trafficking error. The video player received an ad type that it was not expecting and/or cannot display.",201:"Video player expecting different linearity.",202:"Video player expecting different duration.",203:"Video player expecting different size.",300:"General wrapper error.",301:"Timeout of VAST URI provided in wrapper element, or of VAST URI provided in a subsequent wrapper element. This includes request errors such as invalid URI, unreachable or request timeout for URI, and security or other exceptions related to requesting a VAST URI.",302:"Wrapper limit reached, as defined by the video player. Too many wrapper responses have been received with no InLine response. This can be caused by a circular loop of daisy chaining (one network bouncing to another and another).",303:"No ads VAST response after one or more wrappers. This also includes the number of empty VAST responses from fallback.",400:"General linear error. The video player is unable to display the linear ad.",401:"File not found. Unable to find Linear/MediaFile from URI.",402:"Unable to download or timeout of MediaFile URI.",403:"Could not find a media file that is supported by this video player, based on the attributes of the MediaFile element.",405:"Problem displaying a media file.",406:"A mezzanine file was required, but not provided.",407:"The mezzanine file was downloaded for the first time, so the ad did not serve. This can occur when an ad insertion is missed because the creative is being transcoded. It continues to occur until the creative is available for insertion.",408:"The ad returned in the VAST response was rejected.",409:"The interactive creative defined in the InteractiveCreativeFile node was not executed.",410:"The code referenced in the Verification node was not executed.",500:"General NonLinearAds error.",501:"Unable to display non-linear ad because creative dimensions do not align with creative display area (in other words, the creative dimension was too large). This can occur if you use CSS styles to set width and height of the video ,content element. You should instead use the width and height HTML attributes.",502:"Unable to fetch NonLinearAds/NonLinear resource.",503:"Could not find NonLinearResource with supported type. This can occur when a creative size is larger than the player size.",600:"General CompanionAds error.",601:"Unable to display companion because creative dimensions do not fit within the companion display area (in other words, space was not available).",602:"Unable to display required companion.",603:"Unable to fetch CompanionAds/Companion resource.",604:"Could not find Companion resource with supported type.",900:"VAST 2 error. Even if you request VAST 3 or your DFP network default is VAST 3, this can occur if you have a VAST redirect that returns a VAST 2 response.",901:"General VPAID error",1005:"URI malformed."};function d1(t){if(!t)return!1;switch(t.toLocaleLowerCase()){case Hi._C:case Hi.gC:case Hi.vC:return!0;default:return!1}}function l1(t){const i=Af();return!!(d1(t)||t&&i&&(null==i?void 0:i.canPlayType)&&i.canPlayType(t))||(nu("Invalid or unsupported MediaFile Content delivery type, skipping mediafile"),!1)}function f1(t,i){for(const e of i){new u1(e).bZt(t)}}function nu(t){0}r(),r();var v1=class{get EZt(){return this.xZt}get PZt(){return this.IZt}constructor(t,i){this.xZt=void 0,this.IZt=void 0,this.xZt=t,this.IZt=i}},_1=class t{async CZt(i,e){if(P0(i.sources,i.timeOffset)){const s=await t.RZt(i.sources.src,e),n=s&&s.documentElement;if(!n)throw new ys($c.NETWORK,xs.VAST_SCHEMA_VALIDATION_ERROR,"Ad source is not a valid XML document.");if(z0(n,"VMAP"))return await this.DZt(n,i,e);if(z0(n,"VAST")){const t=await this.NZt(n,e,!1);if(t){const e=new m1("",!0,!0,t);return[new Lc("start",e,g1.BZt,"",[],!1,!0,i)]}return[]}throw new ys($c.GENERAL,xs.VAST_MALFORMED_RESPONSE,"Only VMAP and VAST files are allowed as ad source.")}if(I0(i.sources,i.timeOffset))return[new p1(String(i.timeOffset),i,e)];throw new ys($c.GENERAL,xs.VAST_MALFORMED_RESPONSE,"Something went wrong parsing the ad source; only VMAP and VAST files are allowed as ad source.")}async MZt(i,e,s,n){let r;void 0===n&&(n=[]);try{r=await t.RZt(i,e)}catch(t){throw f1(t instanceof ys&&t.TZt===xs.VAST_MALFORMED_RESPONSE?Hr._Zt:Hr.BG,n),t}const h=r&&r.documentElement;if(h&&z0(h,"VAST"))return await this.NZt(h,e,s,n);h&&z0(h,"VMAP")&&zd.um("Received VMAP ad when expecting VAST. Please set the type of your ad source in the configuration, or make sure to not set a timeOffset for VMAP ad sources. VMAP ads have their own offsets included.")}async LZt(t,i,e,s){var n;if(!(null==(n=t.sources)?void 0:n.src))throw new ys($c.GENERAL,xs.MALFORMED_URI,"Property src on adSource is missing.");const r=await this.MZt(t.sources.src,s,!1),h=new m1("",!0,!0,r),o=new Lc(i,h,g1.BZt,"",[],!1,!0,t);return o.OZt=e,o}static async requestSuccessOnly(t,i){let e;try{e=await i.vk(t)}catch(t){throw new ys($c.NETWORK,xs.UNKNOWN_ERROR,"Something went wrong while requesting xml from server.",t)}if(!pA(e))throw new ys($c.NETWORK,xs.UNKNOWN_ERROR,"Something went wrong while requesting xml from server.");return e}static async RZt(t,i){const e=new ro({Yu:t,fk:Bi.LT,Hk:Qe.GET}),s=await this.requestSuccessOnly(e,i);try{return function(t){return j0(t,"text/xml")}(await s.lk())}catch(t){throw new ys($c.NETWORK,xs.VAST_MALFORMED_RESPONSE,"The ad source could not be loaded.")}}async NZt(t,i,e,s){void 0===s&&(s=[]);const n=[],r=[],h=[];if(!t||!z0(t,"VAST")){if(f1(Hr._Zt,s),e)throw new ys($c.PARSING,xs.VAST_NO_ADS_AFTER_WRAPPER,"No VAST element found after wrapper.");throw new ys($c.PARSING,xs.VAST_EMPTY_RESPONSE,"The VAST element was empty.")}if(0!==Po(t,"Ad").length){for(const e of Po(t,"Ad"))try{const t=await this.FZt(e,i,s);0===t.zB?n.push(t):r.push(t)}catch(t){h.push(t)}if(0===n.length&&0===r.length&&h.length>0)throw h[0];if(1===n.length&&0===r.length)return n[0];if(0===n.length&&0!==r.length)return new R0(r);if(n.length>0||r.length>0)return new R0(r.concat(n))}if(0!==Po(t,"Error").length)for(const i of Po(t,"Error")){nu(Hr._Zt.Iy);const t=i.textContent;t&&s.push(t.trim())}if(f1(Hr._Zt,s),e)throw new ys($c.PARSING,xs.VAST_NO_ADS_AFTER_WRAPPER,"No VAST element found after wrapper.");throw new ys($c.PARSING,xs.VAST_EMPTY_RESPONSE,"The VAST element was empty.")}async DZt(t,i,e){const s=[],n=Po(t,"AdBreak");if(0===n.length)throw new ys($c.PARSING,xs.VAST_EMPTY_RESPONSE,"The VMAP element was empty.");for(const t of n)try{const n=await this.UZt(t,i,e);n&&s.push(n)}catch(t){zd.hm(t)}return s}async FZt(i,e,s){const n=Ic(i,"id")||"";let r=dt(Ic(i,"sequence"));r||(r=0);const h=Po(i,"InLine"),o=Po(i,"Wrapper");if(0!==o.length)return await this.VZt(o[0],n,r,e,s);if(0!==h.length)return t.HZt(h[0],n,r,s);throw new ys($c.PARSING,xs.VAST_SCHEMA_VALIDATION_ERROR,"An Ad tag without a Wrapper or inline element cannot be parsed")}static HZt(i,e,s,n){const r=Po(i,"Error")[0];let h;r&&r.textContent&&(h=r.textContent,n.push(h));const o=t.WZt(Po(i,"Extensions")[0]),a=Po(i,"AdSystem")[0];let u,c="";a&&(c=a.textContent||c);const d=Po(i,"AdTitle")[0];d&&(u=d.textContent||void 0);const l=[];for(const t of Po(i,"Impression"))t.textContent&&l.push(t.textContent);const f=t.qZt(Po(i,"Creatives")[0],c,o,n);return new N0(e,s,c,u,l,f,new u1(h))}async VZt(i,e,s,n,r){const h=Po(i,"Error")[0];let o="";h&&h.textContent&&(o=h.textContent,r.push(o));const a=Po(i,"AdSystem")[0];let u="";a&&(u=a.textContent||u);const c=[];for(const t of Po(i,"Impression"))t.textContent&&c.push(t.textContent);const d=Po(i,"VASTAdTagURI")[0];let l="";d&&d.textContent&&(l=d.textContent);const f=await this.MZt(l,n,!0,r),v=t.WZt(Po(i,"Extensions")[0]),_=Po(i,"Creatives")[0];let g=[];_&&(g=t.zZt(_,u,v,r));let p=gi(Ic(i,"followAdditionalWrappers"));p||(p=!0);let m=gi(Ic(i,"allowMultipleAds"));m||(m=!0);let w=gi(Ic(i,"fallbackOnNoAd"));return w||(w=!1),new H0(e,s,c,f,p,g,m,w,new u1(o))}static zZt(i,e,s,n){const r=[];for(const h of Po(i,"Creative")){let i=Ic(h,"id");i||(i="");let o=dt(Ic(h,"sequence"));o||(o=0);let a=Ic(h,"adId");a||(a="");const u=Po(h,"Linear")[0];let c;u&&(c=t.GZt(u,"wrapper",i,e,s,n));const d=Po(h,"NonLinearAds")[0];let l,f;if(d)try{f=t.XZt(d,i,e),l=f}catch(t){}const v=Po(h,"CompanionAds")[0];let _;v&&(_=t.jZt(v)),r.push(new W0(i,a,o,"",c,l,_,[]))}return r}static qZt(i,e,s,n){const r=[];for(const h of Po(i,"Creative")){let i=Ic(h,"id");i||(i="");let o=dt(Ic(h,"sequence"));o||(o=0);let a=Ic(h,"adId");a||(a="");let u=Ic(h,"apiFramework");u||(u="");const c=Po(h,"Linear")[0];let d;if(c)try{d=t.GZt(c,"inline",i,e,s,n)}catch(t){}if(0===(null==d?void 0:d.ct))throw new ys($c.PARSING,xs.VAST_UNEXPECTED_DURATION_ERROR,"The VAST response had a duration of 0 seconds, so skipping the ad(s).");const l=Po(h,"NonLinearAds")[0];let f,v;if(l)try{v=t.XZt(l,i,e),f=v}catch(t){}const _=Po(h,"CompanionAds")[0];let g;_&&(g=t.jZt(_));const p=Po(h,"UniversalAdId"),m=t.parseUniversalAdIds(p);r.push(new W0(i,a,o,u,d,f,g,m))}return r}static WZt(t){const i=[];if(!t)return i;for(const s of Po(t,"Extension")){var e;const t=null!=(e=Ic(s,"type"))?e:"",n=s.outerHTML;i.push({type:t,xml:n})}return i}static GZt(i,e,s,n,r,h){const o=Po(i,"Duration")[0];let a=0;if(o)a=E0(o.textContent)||0;else if(!o&&"inline"===e)throw new ys($c.PARSING,xs.VAST_SCHEMA_VALIDATION_ERROR,"Missing duration element in inLine linear");const u=Ic(i,"skipoffset");let c=-1;if(u){let t=E0(u);if(void 0===t&&u.indexOf("%")>-1){const i=_.abs(Number(u.replace(/(?![0-9])./g,"")))/100;S(i)||(t=a*i)}void 0!==t&&(c=t)}const d=Po(i,"MediaFiles")[0];let l=[],f=[];if(d&&(l=function(t,i){const e=[];for(const s of Po(t,"MediaFile")){const t=Ic(s,"delivery"),n=Ic(s,"type");if(!n){nu();continue}if(!i(n))continue;let r=dt(Ic(s,"width")),h=dt(Ic(s,"height"));r||(nu(),r=0),h||(nu(),h=0);const o={delivery:t,type:n,width:r,height:h,contentURL:""+s.textContent};e.push(o)}return e}(d,l1),f=function(t){const i=Po(t,"ClosedCaptionFiles");if(0===i.length)return[];const e=i[0],s=[];for(const t of Po(e,"ClosedCaptionFile")){const i=Ic(t,"type");i||nu();const e=Ic(t,"language");e||nu();const n={type:null!=i?i:"",language:null!=e?e:"",contentURL:(""+t.textContent).trim()};s.push(n)}return s}(d)),"inline"===e&&(!d||0===l.length))throw f1(Hr.pZt,h),new ys($c.PARSING,xs.VAST_LINEAR_ASSET_MISMATCH,"Missing MediaFiles in linear element");const v=Po(i,"TrackingEvents")[0];let g=[];v&&(g=t.QZt(v,Z0,"linear"));const p=Po(i,"VideoClicks")[0],m=t.KZt(p);return new q0(a,l,g,m,c,s,n,f,r)}static KZt(i){if(!i)return new V0("","",[],[]);const e=Po(i,"ClickThrough")[0];let s,n="";e&&(s=e.textContent||void 0,n=Ic(e,"id")||"");const r=t.YZt(Po(i,"ClickTracking")),h=t.YZt(Po(i,"CustomClick"));return new V0(s,n,r,h)}static YZt(t){const i=[];for(const e of t){const t=e.textContent;if(!t)continue;const s=Ic(e,"id")||"";i.push(new U0(s,t))}return i}static QZt(t,i,e){const s=[];for(const n of Po(t,"Tracking")){const r=Ic(n,"event");if(!i(r)){nu();continue}let h="";"linear"===e&&(h=Ic(t,"offset")||"0");const o=n.textContent;o&&s.push(new n1(r,h,o))}return s}static XZt(i,e,s){const n=[];for(const r of Po(i,"NonLinear")){const i=Po(r,"NonLinearClickThrough")[0];let h;i&&(h=i.textContent||void 0);const o=t.YZt(Po(r,"NonLinearClickTracking")),a=Po(r,"StaticResource")[0];let u;if(a&&a.parentNode){const t=Ic(a,"creativeType"),i=a.textContent||"",e=Po(a.parentNode,"NonLinearClickThrough")[0];let s="";e&&(s=e.textContent||""),u=new h1(i,t,s,"")}const c=t.JZt(r),d=t.parseHtmlResource(r);if(!u&&!c&&!d){nu();continue}const l=new V0(h,"",o,[]);n.push(new M0(u,c,d,l,e,s))}if(0===n.length)throw new ys($c.PARSING,xs.VAST_SCHEMA_VALIDATION_ERROR,"nonLinearAds element found with no nonLinear elements");const r=Po(i,"TrackingEvents")[0];let h=[];return r&&(h=t.QZt(r,t1,"nonlinear")),new B0(n,h)}static parseUniversalAdIds(t){const i=[];for(const r of t){var e;const t=null!=(e=Ic(r,"idRegistry"))?e:"";var s,n;const h=null!=(n=null!=(s=Ic(r,"idValue"))?s:r.textContent)?n:"";i.push(new v1(t,h))}return i}static jZt(i){let e=Ic(i,"requiredType");(function(t){switch(t){case"all":case"any":case"none":return!0;default:return!1}})(e)||(e=L0.pz);const s=[];for(const e of Po(i,"Companion")){let i=dt(Ic(e,"width")),n=dt(Ic(e,"height")),r=Ic(e,"id"),h=dt(Ic(e,"assetWidth")),o=dt(Ic(e,"assetHeight")),a=dt(Ic(e,"expandedWidth")),u=dt(Ic(e,"rxpandedHeight")),c=Ic(e,"apiFramework"),d=Ic(e,"adSlotId"),l=dt(Ic(e,"pxratio"));const f=Po(e,"AltText")[0];let v=f?f.textContent:"";i||(nu(),i=0),n||(nu(),n=0),r||(r=""),h||(h=0),o||(o=0),a||(a=0),u||(u=0),c||(c=""),d||(d=""),l||(l=1),v||(v="");const _=t.ZZt(e),g=t.JZt(e),p=t.parseHtmlResource(e),m=Po(e,"TrackingEvents")[0];let w=[];m&&(w=t.QZt(m,e1,"companion"));const y=Po(e,"CompanionClickThrough")[0];let b;y&&(b=y.textContent||void 0);const A=t.YZt(Po(e,"CompanionClickTracking"));(_||g||p)&&s.push(new F0(i,n,r,h,o,a,u,c,d,l,_,g,p,new V0(b,"",A,[]),w,v))}return new O0(e,s)}static ZZt(t){const i=Po(t,"StaticResource")[0];let e;if(i&&i.parentNode){let t=Ic(i,"creativeType");t||(t="");const s=i.textContent,n=Po(i.parentNode,"AltText")[0],r=Po(i.parentNode,"CompanionClickThrough")[0];let h,o="";n&&(o=n.textContent||""),r&&(h=r.textContent||void 0),s&&(e=new h1(s,t,h,o))}return e}static JZt(t){const i=Po(t,"IFrameResource")[0];let e;if(i){const t=i.textContent||"";e=new o1(t)}return e}static parseHtmlResource(t){const i=Po(t,"HTMLResource")[0];let e;if(i){const t=i.textContent||"";e=new a1(t)}return e}async UZt(i,e,s){const n=Ic(i,"timeOffset")||"0",r=Ic(i,"breakType")||g1.yk;let h=Ic(i,"breakId"),o=gi(Ic(i,"repeatAfter"));if(void 0===h&&(h=""),void 0===o&&(o=!1),!(void 0!==iu.$Zt(n)))throw new ys($c.PARSING,xs.VAST_SCHEMA_VALIDATION_ERROR,"Invalid TimeOffset type");const a=Po(i,"AdSource")[0],u=Po(i,"TrackingEvents")[0];let c=[];u&&(c=t.QZt(u,Y0,"vmap"));let d=Ic(a,"id");d||(d="");let l=gi(Ic(a,"allowMultipleAds"));void 0===l&&(l=!0);let f=gi(Ic(a,"followRedirects"));f||(f=!0);const v=Po(a,"AdTagURI")[0];let _="";const g=Po(a,"VASTAdData")[0];if(!v||!v.textContent){if(g){if(g.firstElementChild&&G0(g.firstElementChild,"VAST")){const t=await this.NZt(g.firstElementChild,s,!1);if(t){const i=new m1(d,l,f,t);return new Lc(n,i,r,h,c,o,!1,e)}return}throw new ys($c.PARSING,xs.VAST_SCHEMA_VALIDATION_ERROR,"vmap:VASTAdData does not have a VAST-structure as a child element")}throw new ys($c.PARSING,xs.VAST_SCHEMA_VALIDATION_ERROR,"Invalid AdTagURI source or invalid VASTAdData in Adbreak Element")}try{_=v.textContent;const t=ru(e);return t.sources.src=_,new p1(n,t,s)}catch(t){return}}},g1=function(t){return t.yk="",t.BZt="linear",t.t$t="nonlinear",t.i$t="display",t}({}),iu=class{static e$t(t){switch(t){case"linear":case"nonlinear":case"display":return!0;default:return!1}}static s$t(t){}static n$t(t){if(void 0!==t)return"start"===t?0:"end"===t?-1:void 0}static r$t(t){const i=t.split(":");let e=0;return e+=3600*Number(i[0]),e+=60*Number(i[1]),e+=Number(i[2]),e}static h$t(t){if(t<=0)return"00:00:00.000";const i=_.floor(t),e=t-i;return this.o$t(i/3600,2)+":"+this.o$t(i/60%60,2)+":"+this.o$t(i%60,2)+"."+this.o$t(1e3*e,3)}static o$t(t,i){return("00"+_.floor(t)).slice(-i)}static a$t(t,i){const e=this.$Zt(t);if(0===e)switch(t){case"start":return 0;case"end":return-1}else{if(2===e)return x0(t)*i;if(1===e)return E0(t);if(3===e)return this.n$t(t);if(4===e){const i=Number(t);if(!S(i)&&i>=-1)return i}}}static $Zt(t){return"start"===t||"end"===t?0:void 0!==E0(t.toString())?1:void 0!==x0(t.toString())?2:void 0!==this.s$t(t.toString())?3:S(Number(t))?void 0:4}},Lc=class{get u$t(){return this.c$t.integration}get d$t(){return this.l$t}get qOt(){return this.f$t}get kJt(){return this.EJt}set kJt(t){this.EJt=t}get aYt(){return this.XYt}get v$t(){return this._$t}get g$t(){return this.p$t}get irt(){return this.c$t}get m$t(){return this.OZt.dd}get W(){return!0}Un(){return Promise.resolve()}get OZt(){return this.w$t}set OZt(t){this.w$t=t}constructor(t,i,e,s,n,r,h,o){this.l$t=void 0,this.XYt=void 0,this.f$t=void 0,this.EJt=-1,this.y$t=void 0,this._$t=void 0,this.p$t=void 0,this.b$t=void 0,this.c$t=void 0,this.w$t=void 0,this.l$t=i,this.f$t=t,this.y$t=e,this._$t=s,this.p$t=r,this.XYt=n,this.b$t=h,this.c$t=o}},p1=class{get u$t(){return this.mYt.u$t}get d$t(){return this.mYt.d$t}get qOt(){return this.mYt.qOt}get kJt(){return this.mYt.kJt}set kJt(t){this.mYt.kJt=t}get aYt(){return this.mYt.aYt}get v$t(){return this.mYt.v$t}get g$t(){return this.mYt.g$t}get irt(){return this.mYt.irt}get m$t(){return this.mYt.m$t}get W(){return this.dE}Un(){var t;return null!=(t=this.A$t)?t:this.A$t=this.vE()}async vE(){const t=new _1;this.mYt=await t.LZt(this.irt,this.qOt,this.OZt,this.aV),this.dE=!0}get OZt(){return this.mYt.OZt}set OZt(t){this.mYt.OZt=t}constructor(t,i,e){this.mYt=void 0,this.A$t=void 0,this.dE=!1,this.aV=void 0,this.aV=e,this.mYt=new Lc(t,void 0,"","",[],!1,!1,i)}},m1=class{get o(){return this.aS}get oJt(){return this.S$t}get T$t(){return this.k$t}get UKt(){return this.E$t}constructor(t,i,e,s){this.aS=void 0,this.S$t=void 0,this.k$t=void 0,this.E$t=void 0,this.aS=t,this.S$t=i,this.E$t=s,this.k$t=e}};function w1(t,i){let e;if(t.vastAdsRequest&&(e=function(t){if(t.adTagUrl)return t.adTagUrl;if(t.adsResponse)return K0(t.adsResponse);return}(t.vastAdsRequest)),!e){const i=function(t){const i=t.contentUrl||t.contentId;if(!i)return;const e=t.contentType||"video/mp4",s=tu(e)||gk(e)?"streaming":"progressive",n=void 0!==t.duration?"<Duration>"+iu.h$t(t.duration)+"</Duration>":"",r=void 0!==t.whenSkippable&&t.whenSkippable>=0?' skipoffset="'+iu.h$t(t.whenSkippable)+'"':"",h='<MediaFile delivery="'+s+'" type="'+e+'">'+Q0(i)+"</MediaFile>",o=t.clickThroughUrl?"<VideoClicks><ClickThrough>"+Q0(t.clickThroughUrl)+"</ClickThrough></VideoClicks>":"",a="<Linear"+r+">"+n+"<MediaFiles>"+h+"</MediaFiles>"+o+"</Linear>",u=t.title?"<AdTitle>"+Q0(t.title)+"</AdTitle>":"";return'<VAST version="3.0"><Ad>'+u+"<InLine><Creatives><Creative>"+a+"</Creative></Creatives></InLine></Ad></VAST>"}(t);i&&(e=K0(i))}const s=t.customData;if(e){const n={integration:null==s?void 0:s.integration,sources:{src:e,type:"vast"},timeOffset:i};return n.integration&&"csai"!==n.integration&&"theo"!==n.integration||(n.skipOffset=t.whenSkippable),n}}var y1=function(t){return t.x$t="error",t.P$t="sourceupdate",t}({}),b1=class extends gp{constructor(t){super("error"),this.lt=void 0,this.lt=t}},A1=class extends gp{constructor(t,i){super("sourceupdate"),this.bt=void 0,this.Mc=void 0,this.bt=t,this.Mc=i}},S1=class extends Ne{get $D(){return this.I$t}C$t(t){this.R$t.C$t(t)}D$t(t){this.R$t.D$t(t)}N$t(t){this.R$t.N$t(t)}B$t(t){this.R$t.B$t(t)}M$t(t){this.I$t.addUpdateListener(t)}L$t(t){this.I$t.removeUpdateListener(t)}O$t(){const t=new Ga,i=new chrome.cast.media.GetStatusRequest;return this.I$t.getStatus(i,()=>{t.Qy({bt:this.qx(),Mc:this.nu()})},i=>t.Ky(i)),t.Yy}qx(){var t;return null==(t=this.I$t.customData)?void 0:t.currentSource}nu(){var t;let i;if(null==(t=this.gBt.F$t())?void 0:t.version){var e;i=null==(e=this.I$t.customData)?void 0:e.sourceDescription}else{var s;const t=null==(s=A0(this.I$t))?void 0:s.customData;(function(t){return Mc(t)&&t.theoplayer_version>=1&&it(t.streamStart)&&it(t.isLive)&&it(t.sourceDescription)})(t)&&(i=t.sourceDescription),i||(i=function(t){return{sources:[{src:t.contentId,type:t.contentType}],ads:T1(t)}}(this.I$t.media))}return i}jP(){const t=new chrome.cast.media.PauseRequest;this.I$t.pause(t,gs,this.U$t)}KP(){const t=new chrome.cast.media.StopRequest;this.I$t.stop(t,gs,this.U$t)}QP(){const t=new chrome.cast.media.PlayRequest;this.I$t.play(t,gs,this.U$t)}Oy(t,i){const e=new chrome.cast.media.SeekRequest;return e.currentTime=t===1/0?Number.MAX_VALUE:t,e.resumeState=i?chrome.cast.media.ResumeState.PLAYBACK_PAUSE:chrome.cast.media.ResumeState.PLAYBACK_START,new Promise((t,i)=>{this.I$t.seek(e,t,t=>{var e;i(new Us(Wn(t.code),null!=(e=t.description)?e:void 0))})})}gP(t){this.R$t.Bet(Ln,function(t){return{type:S0.FKt,properties:{playbackRate:t}}}(t)).catch(this.V$t)}H$t(t){const i=new chrome.cast.media.EditTracksInfoRequest(t);this.I$t.editTracksInfo(i,gs,this.U$t)}W$t(){return this.I$t.getEstimatedTime()}q$t(){return this.I$t.getEstimatedBreakClipTime()}z$t(){return this.I$t.getEstimatedBreakTime()}G$t(){this.R$t.Bet("urn:x-cast:com.google.cast.media",{type:T0.SKIP_AD,requestId:this.X$t++,mediaSessionId:this.I$t.mediaSessionId}).catch(this.V$t)}kn(){this.Vo()}constructor(t,i,e){super(i),this.gBt=void 0,this.R$t=void 0,this.I$t=void 0,this.X$t=0,this.V$t=t=>{this.So(new b1(t))},this.U$t=t=>{var i;const e=new Us(Wn(t.code),null!=(i=t.description)?i:void 0);this.V$t(e)},this.gBt=t,this.R$t=i,this.I$t=e}};function T1(t){return t.vmapAdsRequest&&t.vmapAdsRequest.adTagUrl?[{sources:{src:t.vmapAdsRequest.adTagUrl,type:"vmap"}}]:t.breaks&&t.breakClips?hs(t.breaks,i=>function(t,i){const e=[];if(t.isWatched)return e;for(const s of t.breakClipIds){const n=hh(i,t=>t.id===s);if(n){const i=w1(n,t.position);i&&e.push(i)}}return e}(i,t.breakClips)):[]}r();var k1=class{j$t(t,i){this.gBt.addMessageListener(t,i)}Q$t(t,i){this.gBt.removeMessageListener(t,i)}Bet(t,i){return new Promise((e,s)=>{this.gBt.sendMessage(t,i,e,t=>{var i;s(new Us(Wn(t.code),null!=(i=t.description)?i:void 0))})})}kn(){}constructor(t){this.gBt=void 0,this.gBt=t}};function E1(t){return"vmap"===t||"adrule"===t}function x1(t){if(t)return Q(t)&&""!==t?{src:Ts(t),type:void 0}:function(t){return Mc(t)&&Boolean(t.src)}(t)&&""!==t.src?{src:Ts(t.src),type:P1(t.type)}:void 0}function P1(t){if(Q(t)){const i=t.toLowerCase();switch(i){case"vast":case"vmap":case"adrule":return i;default:return void uh("The ad source type provided in the configuration could not be recognized: '"+t+"'.")}}else t||uh("For better performance it is highly recommended to add the type to the configuration of your ad sources.")}function I1(t){if(void 0!==t&&""!==t&&("string"==typeof t||"number"==typeof t)){switch(t){case"start":case"00:00:00":case"00:00:00.000":case"0%":case"0":return 0;case"end":case"100%":return-1}if("string"==typeof t){if(function(t){return k0.test(t)}(t))return iu.r$t(t);if(C1(t))return t}return Number(t)>=0?Number(t):void 0}}function C1(t){return new RegExp(/^\d{1,2}%$/).test(t)}function R1(t){const i=[],e=(t,s)=>{if(hi(s))for(let i=0,n=s.length;i<n;i++){const n=Mc(s[i])&&s[i]?String(i):"";e(t+"["+encodeURIComponent(n)+"]",s[i])}else if(Mc(s))for(const i of w.keys(s))e(t+"["+encodeURIComponent(i)+"]",s[i]);else((t,e)=>{i.push(t+"="+encodeURIComponent(null!=e?e:""))})(t,String(s))};for(const i of w.keys(t))e(encodeURIComponent(i),t[i]);return i.join("&")}r(),r(),r();var D1=function(t){return t.LKt="receiver_info",t.eOt="event",t.K$t="propertychange",t.OKt="trackevent",t}({}),N1=class{Y$t(t){let i;try{i=JSON.parse(t)}catch(t){0}return i}C$t(t){this.J$t.push(t)}D$t(t){_e(this.J$t,t)}N$t(t){this.Z$t.push(t)}B$t(t){_e(this.Z$t,t)}$$t(t){this.t0t=t}Bet(t,i){return this.i0t.Bet(t,i)}kn(){this.i0t.Q$t(Ln,this.e0t),Wt(this.Z$t),Wt(this.J$t),this.t0t=void 0}constructor(t){this.i0t=void 0,this.J$t=[],this.Z$t=[],this.t0t=void 0,this.e0t=(t,i)=>{const e=this.Y$t(i);if(e)if(e.type===D1.K$t)for(const t of this.J$t)for(const i of w.keys(e.properties))t(i,e.properties[i]);else if(e.type===D1.eOt)for(const t of this.Z$t)t(e.event);else e.type===D1.OKt&&this.t0t&&e.event.trackState&&this.t0t(e.event.trackId,e.event.trackState.targetQualityIds)},this.i0t=t,this.i0t.j$t(Ln,this.e0t)}};r(),r();var B1=function(t){return t.s0t="medialoadedchange",t.wy="volumechange",t.x$t="casterror",t.n0t="playererror",t.r0t="targetqualitychanged",t.h0t="receiverinfochanged",t}({}),M1=class extends gp{constructor(){super("medialoadedchange")}},L1=class extends gp{constructor(t,i){super("volumechange"),this.OP=void 0,this.oP=void 0,this.OP=t,this.oP=i}},O1=class extends gp{constructor(t){super("casterror"),this.lt=void 0,this.lt=t}},F1=class extends gp{constructor(t){super("playererror"),this.lt=void 0,this.lt=t}},U1=class extends gp{constructor(t,i){super("targetqualitychanged"),this.sN=void 0,this.o0t=void 0,this.sN=t,this.o0t=i}},V1=class extends gp{constructor(){super("receiverinfochanged")}},H1=class extends Ne{a0t(t,i,e){this.R$t.Bet(Ln,function(t,i,e){return{type:S0.OKt,trackID:t,trackType:i,properties:{targetQuality:e}}}(t,i,e)).catch(this.V$t)}u0t(){this.i0t.j$t(Ln,this.c0t),this.R$t.Bet(Ln,{type:S0.LKt}).catch(gs)}F$t(){return this.d0t}l0t(){return this.gBt.getSessionObj()}f0t(t){!this.v0t&&t&&t.idleReason!==chrome.cast.media.IdleReason.FINISHED&&(this.v0t=new S1(this,this.R$t,t),this._0t(),this.So(new M1),this.v0t.M$t(this.g0t))}p0t(){return this.v0t}async m0t(t){const i=function(t){const i=function(t,i,e,s){const[n,r]=function(t){for(const e of t.sources)if(ei(e)){const t=e.src;if(t){var i;const s=null!=(i=e.type)?i:qu(t);if(W1(s))return[t,s]}}var e,s;return[null!=(e=aR(t))?e:"",null!=(s=hR(t))?s:""]}(t),h=new chrome.cast.media.MediaInfo(n,r);return h.metadata=b0(t.metadata,t.poster),h.streamType=s,function(t,i,e){const s=[],n=[];let r,h=0,o=0;for(const t of i){const i=x1(t.sources);if(i)if(P0(i,t.timeOffset))r=new chrome.cast.media.VastAdsRequest,r.adTagUrl=i.src;else if(I0(i,t.timeOffset)){var a;const r=null!=(a=t.timeOffset)?a:0,c=t.skipOffset;var u;const d=null!=(u=iu.a$t(r,e))?u:0,l=void 0!==c?iu.a$t(c,e):void 0,f=new chrome.cast.media.BreakClip("bc"+o++);f.vastAdsRequest=new chrome.cast.media.VastAdsRequest,f.vastAdsRequest.adTagUrl=i.src,f.whenSkippable=l,f.customData={integration:t.integration};let v=hh(n,t=>t.position===d);void 0===v&&(v=new chrome.cast.media.Break("b"+h++,[],d),n.push(v)),v.breakClipIds.push(f.id),s.push(f)}else 0;else 0}t.breakClips=s,t.breaks=n,t.vmapAdsRequest=r}(h,i,e),h}(t.w0t,t.Jc,t.ct,t.P0),e=new chrome.cast.media.LoadRequest(i);e.autoplay=!0,t.zx&&(e.currentTime=t.zx);return e.customData=t.y0t,e}(t);let e;try{e=await this.gBt.loadMedia(i)}catch(t){e=t}if(e)throw new Us(Wn(e))}uP(t){this.l0t().setReceiverMuted(t,gs,this.b0t)}UP(t){this.l0t().setReceiverVolumeLevel(t,gs,this.b0t)}A0t(){return this.l0t().receiver.friendlyName}kn(){this.Vo(),this.gBt.removeEventListener(cast.framework.SessionEventType.MEDIA_SESSION,this.S0t),this.l0t().removeUpdateListener(this._0t),this.i0t.Q$t(Ln,this.c0t),this.R$t.kn(),this.i0t.kn()}constructor(t){super(),this.gBt=void 0,this.i0t=void 0,this.R$t=void 0,this.d0t=void 0,this.v0t=void 0,this.V$t=t=>{this.So(new O1(t))},this.T0t=(t,i)=>{"error"===t&&this.So(new F1(i))},this.k0t=(t,i)=>{this.So(new U1(t,i))},this.c0t=(t,i)=>{const e=JSON.parse(i);e.type===D1.LKt&&(this.d0t=e.info,this.So(new V1))},this._0t=()=>{const t=this.l0t(),{level:i,muted:e}=t.receiver.volume;this.So(new L1(null!=i?i:void 0,null!=e?e:void 0))},this.S0t=()=>this.f0t(this.gBt.getMediaSession()),this.g0t=t=>{var i;t||(null==(i=this.v0t)||i.L$t(this.g0t),this.v0t=void 0,this.So(new M1))},this.b0t=t=>{var i;const e=new Us(Wn(t.code),null!=(i=t.description)?i:void 0);this.V$t(e)},this.gBt=t,this.gBt.addEventListener(cast.framework.SessionEventType.MEDIA_SESSION,this.S0t),this.i0t=new k1(t.getSessionObj()),this.R$t=new N1(this.i0t),this.R$t.C$t(this.T0t),this.R$t.$$t(this.k0t),this.l0t().addUpdateListener(this._0t),this._0t(),this.u0t();const i=this.gBt.getMediaSession();i&&this.f0t(i)}};function W1(t){switch(t){case Hi._C:case Hi.vC:case Hi.gC:case Hi.pC:return!0}return!1}var q1=function(t){return t.E0t="statechange",t}({}),z1=class extends gp{constructor(t){super("statechange"),this.vft=void 0,this.vft=t}};r(),r(),r(),r();var G1=class extends Ne{_nt(){return this.qc}Ux(){return Uo.rL()}Gx(){return this.xz+this.x0t}nnt(){return this.Gx()}Hx(){}Nd(){return this.Zb}Kx(){return this.h5}Yx(){}fP(){return this.Cz}P0t(){}_P(){return this.Rz}gP(t){this.Rz!==t&&(this.Rz=t,this.So(new Ik(this.oa.zx,t)))}TP(){return Lr.zL}mP(){return Uo.rL()}EP(){return Uo.rL()}PP(){return!1}Mx(){return this.tO}BP(){return this.sO}RP(){return this.Gl}H$t(t){}LP(){return this.I0t}NP(){return this.C0t}QP(){this.Cz=!1}jP(){this.Cz=!0}Oy(t){this.xz=t-this.x0t}R0t(){return this.x0t}D0t(t){this.x0t=t}qnt(t){this.qc.qnt(t)}KP(){}kn(){this.Vo(),this.tO.kn(),this.sO.kn(),this.Gl.kn(),this.qc.kn()}constructor(t,i,e,s,n,r,h,o,a){super(),this.oa=void 0,this.xz=void 0,this.Zb=void 0,this.h5=void 0,this.Cz=void 0,this.Rz=void 0,this.x0t=void 0,this.I0t=void 0,this.C0t=void 0,this.tO=void 0,this.sO=void 0,this.Gl=void 0,this.qc=void 0,this.oa=t,this.x0t=0,this.tO=new Ws,this.sO=new Ws,this.Gl=new bc,this.qc=new st,this.x0t=i,this.xz=e-i,this.Zb=s,this.h5=n,this.Cz=r,this.Rz=h,this.I0t=o,this.C0t=a}};r(),r(),r(),r();var X1=function(t){return t.N0t="ccmodechangerequest",t.B0t="cctargetqualitychangerequest",t.M0t="cctrackchangerequest",t}({}),j1=class extends gp{constructor(t,i,e){super(X1.N0t),this.track=void 0,this.trackId=void 0,this.mode=void 0,this.track=t,this.trackId=i,this.mode=e}};r();var Q1=function(t){return t.LT="TEXT",t.Bk="AUDIO",t.Mk="VIDEO",t}({}),K1=function(t){return t.HU="SUBTITLES",t.WU="CAPTIONS",t.qU="DESCRIPTIONS",t.Yn="CHAPTERS",t.zU="METADATA",t}({});function Y1(t){return"AUDIO"===t.type}function J1(t){return"VIDEO"===t.type}function Z1(t){return"TEXT"===t.type}var $1=class extends Ne{get Ca(){return this.hu||(this.hu=qo(this)),this.hu}get Th(){return this.bO}set Th(t){t!==this.bO&&(this.bO=t,this.So(new Xh(this)))}get q(){return this.S5}get L(){return this.T5}get Qk(){return this.Yo}set Qk(t){const i=LS(t);this.Yo!==i&&(this.Yo=i,this.L0t!==i&&this.So(new j1(this,this.JI,i)),this.So(new Rh(this)))}get O0t(){return this.L0t}set O0t(t){const i=LS(t),e=this.Yo!==i;this.Yo=i,this.L0t=i,e&&this.So(new Rh(this))}k5(t){return hh(this.T5.NI,i=>i.o===t)}sC(t){this.Qk=t}F0t(t){}kn(){}hr(){}constructor(t){super(),this.o=void 0,this.JI=void 0,this.eC=void 0,this.Lt=void 0,this.bs=void 0,this.AP=void 0,this.Km=void 0,this.bO=void 0,this.A5=void 0,this.D5=void 0,this.T5=void 0,this.S5=void 0,this.Yo=void 0,this.L0t=void 0,this.hu=void 0;const i=t.customData;this.JI=Number(t.trackId)||0,this.o=""+(i&&i.id||this.JI),this.bO=i&&i.label||t.name||"",this.bs=i&&i.language||t.language||"",this.eC=i&&i.inBandMetadataTrackDispatchType||"",this.Lt=i&&i.kind||function(t){switch(t){case K1.HU:return us.HU;case K1.WU:return us.WU;case K1.qU:return us.qU;case K1.Yn:return us.Yn;case K1.zU:return us.zU}return}(t.subtype)||"subtitles",this.AP=dc.NONE,this.Km=i&&void 0!==i.type?function(t){return vk(t)?t:nh.DEFAULT}(i.type):nh.WEBVTT,this.A5=[],this.T5=new Sr(this.A5),this.D5=[],this.S5=new Sr(this.D5),this.Yo=LS(i&&i.mode||xh.Nh),this.L0t=this.Yo}};r(),r();var t2=class extends gp{constructor(t,i){super(X1.M0t),this.trackId=void 0,this.enabled=void 0,this.trackId=t,this.enabled=i}};r();var i2=class extends gp{constructor(t,i){super(X1.B0t),this.track=void 0,this.targetQuality=void 0,this.track=t,this.targetQuality=i}};r();var e2=function(t){return t.Bk="audio",t.Mk="video",t.LT="text",t}({}),s2=class extends Ne{get YI(){return this._lt}get tC(){return this.flt}set tC(t){this.U0t(t),this.So(new i2(this,t))}get $I(){return this._O}get Th(){return this.bO}set Th(t){t!==this.bO&&(this.bO=t,this.So(new Xh(this)))}get Rt(){return this.We}set Rt(t){this.We!==t&&(this.We=t,this.V0t!==t&&this.So(new t2(this.JI,t)),this.So(new Rh(this)))}get H0t(){return this.V0t}set H0t(t){const i=this.We!==t;this.We=t,this.V0t=t,i&&this.So(new Rh(this))}get Ca(){return this.hu||(this.hu=cs(this)),this.hu}get Qk(){return this.Rt?"enabled":"disabled"}SO(t){this.Rt=t}F0t(t){if(t.targetQualityIds){const i=[];for(const e of this._O.NI)t.targetQualityIds.indexOf(e.o)>-1&&i.push(e);const e=i.length?i:void 0;this.U0t(e)}}U0t(t){(function(t,i){return!t&&i||t&&!i||t&&i&&!wc(t,i)})(this.flt,t)&&(this.flt=t&&this._O.pO(t)?t:void 0,this.So(new qa(this.flt,this)))}unload(){for(const t of this._O.NI)t.mn("update",this.ILt);this._O.hr()}constructor(t){super(),this.o=void 0,this.JI=void 0,this.Lt=void 0,this.bs=void 0,this.V3=void 0,this.bO=void 0,this._lt=void 0,this._O=new iE,this.flt=void 0,this.We=void 0,this.V0t=void 0,this.hu=void 0,this.ILt=()=>this.So(new Xh(this));const i=t.customData;if(this.JI=Number(t.trackId)||0,this.o=""+(i&&i.id||this.JI),this.bO=i&&i.label||t.name||"",this.bs=i&&i.language||t.language||"",this.Lt=i&&i.kind||"main",this.We=i&&i.enabled,this.V0t=this.We,Y1(t)){this.V3=e2.Bk;const i=t.customData&&t.customData.qualities;if(i)for(const t of i){const i=new Vq(t.id,t.bandwidth,t.codecs,t.name,"",t.audioSamplingRate);i.wn("update",this.ILt),this._O.gO(i)}}else{this.V3=e2.Mk;const i=t.customData&&t.customData.qualities;if(i)for(const t of i){const i=new Uq(t.id,t.bandwidth,t.codecs,t.name,"",t.frameRate,t.width,t.height);i.wn("update",this.ILt),this._O.gO(i)}}}};r();var n2=function(t){return t.W0t="legacy",t.q0t="caf",t}({});r(),r(),r(),r();var r2=class{Rc(){if(this.z0t>=this.qc.length)return;const t=this.qc[this.z0t];return this.z0t+=1,t}lt(){return this.Rc()}constructor(t){this.qc=void 0,this.z0t=0,this.qc=t}};function h2(t){var i,e,s;return null!=(s=null==(e=t.d$t)||null==(i=e.UKt)?void 0:i.VKt())?s:[]}var o2=class{},a2=class{Ont(){var t;return null!=(t=this.hu)?t:this.hu=function(t){return{get ads(){return t.Jc.map(t=>t.Ont())},get integration(){return t.u$t},get maxDuration(){return t.G0t},get maxRemainingDuration(){return t.X0t},get timeOffset(){return t.qOt},get customData(){return t.y0t}}}(this)}constructor(){this.hu=void 0}},u2=class{get j0t(){return this.Q0t}get t(){return this.oa}constructor(t,i){this.Q0t=void 0,this.oa=void 0,this.Q0t=t,this.oa=i}},c2=class extends a2{get OZt(){return this.w$t}get Jc(){const t=[];for(const s of this.w$t.K0t)for(const n of h2(s)){var i,e;const r=null!=(e=null==(i=n.sYt)?void 0:i.PYt)?e:[];if(n.iYt&&t.push(this.Y0t(n.iYt,r,n.rYt,s.irt)),n.nYt)for(const i of n.nYt.hYt)t.push(this.J0t(i,r,n.nYt,n.rYt,s.irt))}return t}Y0t(t,i,e,s){const n=hh(this.Z0t,i=>i.iYt===t);if(void 0!==n)return n;const r=new v2(t,i,this,this.$0t,e,s);return this.Z0t.push(r),r}J0t(t,i,e,s,n){const r=hh(this.t1t,i=>i.nYt===t);if(void 0!==r)return r;const h=new f2(t,i,e,this,this.$0t,s,n);return this.t1t.push(h),h}get u$t(){return FC.CSAI}get qOt(){const t=this.w$t.dd;return t>=0?t:this.$0t.t.Nd()}get X0t(){let t=0;for(const i of this.w$t.K0t)for(const e of h2(i))e.iYt&&!e.iYt.xJt&&(t+=e.iYt.ct);return this.$0t&&this.$0t.j0t&&(t+=this.$0t.j0t.ct-this.$0t.j0t.zx),t}get G0t(){let t=0;for(const i of this.w$t.K0t)for(const e of h2(i))e.iYt&&(t+=e.iYt.ct);return t}get y0t(){}constructor(t,i){super(),this.w$t=void 0,this.$0t=void 0,this.Z0t=[],this.t1t=[],this.w$t=t,this.$0t=i}},d2={height:0,width:0,clickThrough:"",contentHTML:"",resourceURI:"",altText:""},l2=class extends o2{get od(){return this.mYt}get irt(){return this.c$t}get rYt(){return this.yJt}i1t(){return this.e1t}s1t(){this.e1t=!0}n1t(t){return Y({},d2,{resourceURI:t.cZt||""})}r1t(t){return Y({},d2,{contentHTML:t.cZt.trim(),type:"HTMLResource"})}h1t(t){var i,e;return Y({},d2,{clickThrough:(null==(i=t.KYt)?void 0:i.trim())||"",resourceURI:(null==(e=t.cZt)?void 0:e.trim())||"",altText:t.jYt||"",type:"StaticResource"})}o1t(t,i,e){if(!t||!i)return;const s="<img "+(e?"title='"+e+"' ":"")+"src='"+encodeURI(t)+"'>";return"<a href='"+encodeURI(i)+"' target='_blank' rel='noopener'>"+s+"</a>"}sYt(t){return t?t.map(t=>{let i;const e={adSlotId:t.VYt||"",height:t.Mi||0,width:t.Ti||0};if(t.cYt){var s;const e=this.h1t(t.cYt),n=e.clickThrough||(null==(s=t.zYt)?void 0:s.KYt);i=Y({},e,{contentHTML:this.o1t(e.resourceURI,n,e.altText)||""})}else if(t.vYt)i=this.r1t(t.vYt);else{if(!t.lYt)return;i=this.n1t(t.lYt)}return Gi(i,e)}).filter(t=>void 0!==t):[]}a1t(){return this.u1t.QKt}constructor(t,i,e,s,n,r){super(),this.u1t=void 0,this.IYt=void 0,this.mYt=void 0,this.$0t=void 0,this.yJt=void 0,this.c$t=void 0,this.e1t=!1,this.u1t=t,this.IYt=i,this.mYt=e,this.$0t=s,this.yJt=n,this.c$t=r}},f2=class extends l2{get nYt(){return this.u1t}get eYt(){return this.c1t}xa(){const t=this.mYt,i={companions:this.sYt(this.IYt),type:"nonlinear",id:this.u1t.wYt,skipOffset:this.kJt,integration:this.c$t.integration,adSystem:this.u1t.QKt,get adBreak(){return t.Ont()},creativeId:this.u1t.wYt,universalAdIds:this.yJt.map(t=>({adIdRegistry:t.EZt,adIdValue:t.PZt}))};return this.u1t.lYt?Gi(this.n1t(this.u1t.lYt),i):this.u1t.vYt?Gi(this.r1t(this.u1t.vYt),i):this.u1t.cYt?Gi(this.h1t(this.u1t.cYt),i):i}Ont(){var t;return null!=(t=this.hu)?t:this.hu=this.xa()}d1t(){var t,i;return null!=(i=null==(t=this.u1t.cYt)?void 0:t.cZt)?i:""}l1t(){var t,i,e;return null!=(e=null==(i=this.u1t)||null==(t=i.cYt)?void 0:t.lZt)?e:""}get kJt(){const t=this.u1t.od;return t&&t.irt&&void 0!==t.irt.skipOffset?iu.a$t(t.irt.skipOffset,this.$0t.j0t.ct):(null==(i=this.u1t.od)?void 0:i.kJt)||-1;var i}constructor(t,i,e,s,n,r,h){super(t,i,s,n,r,h),this.c1t=void 0,this.hu=void 0,this.c1t=e}},v2=class extends l2{get iYt(){return this.u1t}xa(){var t;const i=this.mYt,e=this.u1t;return{companions:this.sYt(this.IYt),duration:e.ct,id:e.wYt,mediaFiles:e.AJt,get mediaUrl(){return e.PJt},skipOffset:this.kJt,type:"linear",integration:this.c$t.integration,adSystem:e.QKt,width:void 0,height:void 0,get adBreak(){return i.Ont()},clickThrough:null==(t=e.lJt)?void 0:t.KYt,creativeId:e.wYt,universalAdIds:this.yJt.map(t=>({adIdRegistry:t.EZt,adIdValue:t.PZt})),closedCaptionFiles:e.CJt,extensions:e.DJt}}Ont(){var t;return null!=(t=this.hu)?t:this.hu=this.xa()}d1t(){return this.u1t.AJt.length>0?this.u1t.AJt[0].contentURL:""}l1t(){return this.u1t.AJt.length>0?this.u1t.AJt[0].type:""}get kJt(){const t=this.u1t.od;return t&&t.irt&&void 0!==t.irt.skipOffset?iu.a$t(t.irt.skipOffset,this.$0t.j0t.ct):this.u1t.kJt||-1}constructor(t,i,e,s,n,r){super(t,i,e,s,n,r),this.hu=void 0}};function _2(t){return t instanceof v2}r();var we=function(t){return t.f1t="csai",t.v1t="google-ima",t.so="google-dai",t._1t="freewheel",t.g1t="mediatailor",t.Iv="chromecast",t.knt="theoads",t}({});r();var ch=class extends oU{xa(){return new g2(this.jnt.Ont())}constructor(t){super("p1t",t)}},g2=class extends aU{constructor(t){super("updatead",t)}};r();var p2=class extends oU{xa(){return new m2(this.jnt.Ont())}constructor(t){super("m1t",t)}},m2=class extends aU{constructor(t){super("adloaded",t)}},w2=class extends je{get zc(){return void 0!==this.w1t}get Lnt(){return this.u1t?[this.u1t]:[]}get Fnt(){var t;return null!=(t=this.w1t)?t:null}get Unt(){return hs(this.y1t,t=>{const i=t.Jc;if(t===this.w1t&&void 0!==this.u1t){const t=i.indexOf(this.u1t);if(t>=0)return i.slice(t+1)}return t.b1t()?[]:i})}get Vnt(){return this.y1t.filter(t=>t===this.w1t||!t.b1t())}get Ca(){var t;return null!=(t=this.hu)?t:this.hu=iU(this)}W6(t,i,e){throw new g("Scheduling ads while casting is not supported.")}uD(){this.I$t.G$t()}znt(t){var i;null==(i=this.A1t)||i.znt(t)}Wnt(t,i){var e;null==(e=this.A1t)||e.Wnt(t,i)}S1t(t){return hh(this.y1t,i=>i.o===t)}T1t(t,i,e,s){const n=this.y1t,r=[];let h=!1;for(const n of t){let t=this.S1t(n.id);void 0===t&&(t=new y2(n),s.push(new vn(t))),!it(t.k1t)&&it(e)&&(t.k1t=this.E1t(t.x1t,e));const o=t.Jc;t.er(n,i,e,s);const a=t.Jc;for(const t of a)Ct(o,t)||(s.push(new cn(t)),h=!0);r.push(t)}this.y1t=r,h&&s.push(new vU);for(const t of n)Ct(r,t)||s.push(new nU(t))}P1t(t,i){const e=this.w1t,s=this.u1t;let n,r;if(t){var h;const{breakId:i,breakClipId:e}=t;n=i?this.S1t(i):void 0,r=e?null==(h=this.w1t)?void 0:h.I1t(e):void 0}if(this.w1t=n,this.u1t=r,n!==e&&(void 0!==e&&(e.C1t=void 0,i.push(new Za(e))),void 0!==n&&(n.C1t=this.I$t,i.push(new Ta(n)))),r!==s){const t=this.oa.Gx();void 0!==s&&i.push(new fc(s,t)),void 0!==r&&i.push(new nc(r,t))}}E1t(t,i){if(!i||!i.breaks)return;const e=hh(i.breaks,i=>i.id===t.id);return e}qnt(t){const i=[];for(const t of this.y1t){let e=t.Jc;if(t===this.w1t&&void 0!==this.u1t){const t=e.indexOf(this.u1t);t>=0&&(e=e.slice(t))}else if(t.b1t())continue;for(const t of e){const e=t.R1t();e&&i.push(e)}}for(const e of i)t.W6(e,Hu.Bnt,!1)}kn(){return this.Vo(),this.I$t.L$t(this.eh),void 0!==this.w1t&&(this.w1t.C1t=void 0,this.w1t=void 0),this.u1t=void 0,Wt(this.y1t),Promise.resolve(void 0)}Hnt(t){}constructor(t,i,e){super(),this.oa=void 0,this.I$t=void 0,this.A1t=void 0,this.y1t=[],this.w1t=void 0,this.u1t=void 0,this.hu=void 0,this.eh=t=>{var i;if(!t)return;const e=this.I$t.$D,{breakStatus:s}=e,{breakClips:n,breaks:r}=e.media,h=null==(i=A0(e))?void 0:i.media,o=[];r&&n&&this.T1t(r,n,h,o),this.P1t(s,o);for(const t of o)this.So(t)},this.oa=t,this.I$t=i,this.A1t=e,this.I$t.M$t(this.eh)}},y2=class extends a2{get x1t(){return this.D1t}get o(){return this.D1t.id}get Jc(){return this.qc}get u$t(){return we.Iv}get G0t(){let t=this.D1t.duration;return void 0===t&&this.qc.length>0&&(t=$l(this.qc,t=>t.ct),S(t)&&(t=void 0)),t}get X0t(){const t=this.G0t;if(void 0!==t&&void 0!==this.C1t){const i=this.C1t.z$t();if(void 0!==i)return _.max(0,t-i)}return t}get qOt(){return this.D1t.position}get y0t(){}b1t(){return this.D1t.isWatched}I1t(t){return hh(this.qc,i=>i.o===t)}er(t,i,e,s){const n=[];for(let r=0;r<t.breakClipIds.length;r++){const h=t.breakClipIds[r],o=hh(i,t=>t.id===h);if(void 0===o)continue;const a=r<this.qc.length?this.qc[r]:new b2(o,this);!it(a.N1t)&&it(e)&&(a.N1t=this.B1t(e,h,r)),a.er(o,s),n.push(a)}this.D1t=t,this.qc=n}B1t(t,i,e){if(!t||!t.breakClips)return;let s=hh(t.breakClips,t=>t.id===i);if(!s){var n;const i=null==(n=this.k1t)?void 0:n.breakClipIds[e];i&&(s=hh(t.breakClips,t=>t.id===i))}return s}constructor(t){super(),this.D1t=void 0,this.k1t=void 0,this.qc=[],this.C1t=void 0,this.D1t=t}},b2=class{get M1t(){return this.L1t}get o(){return this.L1t.id}get PYt(){return[]}get ct(){var t;return null!=(t=this.L1t.duration)?t:NaN}get AJt(){const t=this.d1t();return t?[{contentURL:t,delivery:"progressive",type:this.l1t(),width:0,height:0}]:[]}get PJt(){return this.d1t()}get kJt(){const{whenSkippable:t}=this.L1t;return void 0===t?void 0:t<0?-1:t}get KYt(){return this.L1t.clickThroughUrl}get wYt(){}get rYt(){return[]}get y0t(){}a1t(){return""}l1t(){var t;return null!=(t=this.L1t.contentType)?t:""}d1t(){var t,i;return null!=(i=null!=(t=this.L1t.contentUrl)?t:this.L1t.contentId)?i:""}er(t,i){const e=this.o,s=this.ct,n=this.L1t.contentUrl;this.L1t=t;const r=this.o,h=this.ct,o=this.L1t.contentUrl;e===r&&(s===h||S(s)&&S(h))&&n===o||i.push(new ch(this)),S(s)&&!S(h)&&i.push(new p2(this))}R1t(){let t;return this.N1t&&(t=w1(this.N1t,this.od.qOt)),t||(t=w1(this.L1t,this.od.qOt)),t}Ont(){var t;return null!=(t=this.hu)?t:this.hu=this.xa()}xa(){const t=this;return{get extensions(){return[]},get companions(){return t.PYt},get duration(){return t.ct},get id(){return t.o},get mediaFiles(){return t.AJt},get mediaUrl(){return t.PJt},get closedCaptionFiles(){return[]},get skipOffset(){return t.kJt},type:"linear",integration:we.Iv,get adSystem(){return t.a1t()},width:void 0,height:void 0,get adBreak(){return t.od.Ont()},get resourceURI(){return t.d1t()},get clickThrough(){return t.KYt},get creativeId(){return t.wYt},get customData(){return t.y0t},get isSlate(){return!1},get universalAdIds(){return t.rYt.map(t=>({adIdRegistry:t.EZt,adIdValue:t.PZt}))}}}constructor(t,i){this.L1t=void 0,this.N1t=void 0,this.od=void 0,this.hu=void 0,this.L1t=t,this.od=i}};r();var A2=class extends Ne{get O1t(){return this.F1t}set O1t(t){this.F1t!==t&&(this.F1t=t,this.Ls.href=null!=t?t:"",t?this.JU():this.ZU())}JU(){if(this.We)return;this.We=!0,this.Ls.style.display="",this.U1t||(this.wE.style.cursor="pointer");const t=this.U1t?this.Ls:this.wE;zd.Zs.Ke?(t.addEventListener("touchstart",this.V1t),t.addEventListener("touchend",this.H1t)):(t.addEventListener("mousedown",this.V1t),t.addEventListener("click",this.H1t))}ZU(){if(!this.We)return;this.We=!1,this.Ls.style.display="none",this.U1t||(this.wE.style.cursor="");const t=this.U1t?this.Ls:this.wE;zd.Zs.Ke?(t.removeEventListener("touchstart",this.V1t),t.removeEventListener("touchend",this.H1t)):(t.removeEventListener("mousedown",this.V1t),t.removeEventListener("click",this.H1t))}zg(){this.Vo(),this.ZU(),this.wE.removeChild(this.Ls)}constructor(t,i=zd.Zs.Ke){super(),this.wE=void 0,this.Ls=void 0,this.U1t=void 0,this.F1t=void 0,this.We=!1,this.V1t=t=>{t.stopPropagation(),this.So(new gp("clickstart"))},this.H1t=t=>{t.stopPropagation(),this.So(new gp("click"))},this.wE=t,this.U1t=i,this.Ls=h.createElement("a"),this.Ls.style.position="absolute",this.Ls.style.zIndex="11",this.Ls.target="Xu",this.U1t?(Nr(this.Ls,"learn more"),this.Ls.className="theoplayer-ad-overlay-component theoplayer-ad-touch-clickthrough",this.Ls.setAttribute("rel","noopener")):Go(this.Ls),this.wE.appendChild(this.Ls),this.ZU()}};r(),r();var S2=[1200,992,768,576],T2={1200:"theo-size-xl",992:"theo-size-l",768:"theo-size-m",576:"theo-size-s"},k2=class{W1t(t){const i=E2(t);i!==this.q1t&&(Pl(this.Ls,i),Il(this.Ls,this.q1t),this.q1t=i)}kn(){this.sc.mn(Qh.yn,this.bn)}constructor(t,i){this.Ls=void 0,this.sc=void 0,this.q1t=void 0,this.bn=void 0,this.Ls=t,this.sc=i,this.bn=t=>{this.W1t(t.width)},this.q1t=E2(i.Eu),Pl(this.Ls,this.q1t),i.wn(Qh.yn,this.bn)}};function E2(t){for(const i of S2)if(t>i)return T2[i];return"theo-size-xs"}var x2=class extends Ne{get xe(){return this.Ls}get Qk(){return this.Yo}get HT(){return this.ud.textContent||""}set HT(t){Nr(this.ud,t)}z1t(t){"countdown"!==this.Yo&&(this.Yo="countdown",this.G1t(),this.xe.classList.remove("theoplayer-ad-skip-button"),this.xe.classList.add("theoplayer-ad-skip-countdown")),this.HT="You can skip in "+_.round(t)+" seconds"}X1t(){"skip"!==this.Yo&&(this.Yo="skip",this.HT="Skip Ad",this.j1t(),this.xe.classList.remove("theoplayer-ad-skip-countdown"),this.xe.classList.add("theoplayer-ad-skip-button"))}j1t(){this.xe.addEventListener("mouseup",this.Q1t),this.xe.addEventListener("touchend",this.Q1t)}G1t(){this.xe.removeEventListener("mouseup",this.Q1t),this.xe.removeEventListener("touchend",this.Q1t)}kn(){this.Vo(),this.G1t(),this.tc.kn(),Ao(this.Ls),Ao(this.ud),this.K1t&&Ao(this.K1t)}constructor(t,i){super(),this.Ls=void 0,this.K1t=void 0,this.ud=void 0,this.tc=void 0,this.Yo=void 0,this.Q1t=()=>{this.So(new gp("uD"))},this.Ls=h.createElement("div"),this.xe.className="theoplayer-ad-overlay-component theoplayer-ad-skip theoplayer-ad-skip-countdown",this.xe.style.position="absolute",this.ud=h.createElement("span"),this.xe.appendChild(this.ud),i&&(this.K1t=h.createElement("div"),this.K1t.className="theoplayer-ad-skip-poster",this.K1t.style.backgroundImage='url("'+up(i)+'")',this.xe.appendChild(this.K1t)),this.Yo="countdown",this.tc=new k2(this.xe,t)}},P2=class extends Ne{Y1t(){const t=this.I$t.$D.activeTrackIds;if(t){if(this.J1t()){const i=this.sO.NI.map(t=>t.o),e=this.tO.NI.map(t=>t.o);Ct(i.concat(e),"0")&&t.push(0)}N2(t,this.tO),N2(t,this.sO),function(t,i){const e=!1;for(const e of i.NI)e.O0t=Ct(t,e.JI)?xh.Kn:xh.Nh}(t,this.Gl)}}Z1t(){var t;const i=null==(t=this.I$t.$D.media)?void 0:t.tracks;if(!i)return;const e=i.filter(Y1),s=i.filter(J1),n=i.filter(Z1);if(this.J1t()&&0===s.length&&0!==this.LP()){const t=this.$1t();s.push(t)}if(this.J1t()&&0===e.length){const t=this.t2t();e.push(t)}R2(this.tO,e.map(t=>t.trackId)),R2(this.sO,s.map(t=>t.trackId)),R2(this.Gl,n.map(t=>t.trackId)),D2(e,this.tO),D2(s,this.sO),function(t,i){let e=!1;for(const s of t){let t=C2(i,s.trackId);t||(t=new $1(s),i.tt(t),e=!0)}}(n,this.Gl)}i2t(){this.Cz||(this.e2t=v(this.bd,250))}s2t(){p(this.e2t)}n2t(){this.s2t(),this.i2t()}r2t(){var t;const i=this.I$t.$D,e=i.media;var s;const n=null!=(s=null==e?void 0:e.duration)?s:NaN,r=(null==e?void 0:e.streamType)===chrome.cast.media.StreamType.LIVE||n<0,h=r?1/0:n;this.Zb=h,this.h2t();const o=i.getEstimatedLiveSeekableRange(),a=null==(t=i.customData)?void 0:t.buffers;if(it(o)){const{start:t,end:i,isMovingWindow:e=r,isLiveDone:s=!1}=o;this.BUt(t,i,e,s)}else if(it(a)){const[t,i]=a.seekable;this.BUt(t,i,r,!1)}else r?this.BUt(void 0,void 0,!0,!1):this.BUt(0,h,!1,!1)}o2t(){const t=this.I$t.$D,i=function(t){return void 0!==t&&t.playerState===chrome.cast.media.PlayerState.PAUSED}(t)||I2(t);this.a2t=i,this.Cz!==i&&(this.Cz=i,this.Cz?this.So(new Si(this.Gx())):this.So(new vt(this.Gx())))}hh(){const{playbackRate:t}=this.I$t.$D;this.u2t!==t&&(this.u2t=void 0,this.Rz!==t&&(this.Rz=t,this.So(new Ik(this.Gx(),t))))}c2t(){const{playerState:t}=this.I$t.$D;let i;switch(t){case chrome.cast.media.PlayerState.IDLE:i=Lr.zL;break;case chrome.cast.media.PlayerState.BUFFERING:i=Lr.Qn;break;case chrome.cast.media.PlayerState.PAUSED:case chrome.cast.media.PlayerState.PLAYING:i=Lr.XL}this.u5(i),this.d2t()}BUt(t,i,e,s){it(t)&&it(i)?this.H4=new rh(t,i,e,e&&!s):this.H4=void 0}l2t(t,i){this.C0t=null!=i?i:this.C0t,this.I0t=null!=t?t:this.I0t,this.So(new Vs)}Je(t){this.f2t!==t?(this.Pz=!0,this.So(new ji(this.Gx()))):this.f2t=void 0}Mq(){if(!this.Pz)return;this.Pz=!1;const t=this.Gx();this.So(new B(t,this.Hx())),this.So(new Yr(t))}Eh(){this.h5=!0,this.Kx()&&this.So(new ur(this.Gx()))}h2t(){const t=this.nxt,i=this.Nd();t===i||S(t)&&S(i)||(this.nxt=i,this.So(new zr(i)))}v2t(){const t=this.Gx();this.Pz||this._2t===t||(this._2t=t,this.So(new B(t,this.Hx())))}P0t(){this.Cz&&(this.Cz=!1,this.So(new vt(this.Gx())),this.u5(Lr.zL))}_nt(){return this.qc}Ux(){return this.rPt.Ly(this.x0t)}Gx(){if(this.qc.zc){const t=this.I$t.q$t();if(void 0!==t)return t}return this.nnt()}nnt(){return void 0!==this.g2t?this.x0t+this.g2t:this.h5?this.Nd():this.x0t+this.I$t.W$t()}Hx(){if(this.p2t)return new Date(this.nnt()+this.p2t)}Nd(){if(this.qc.zc){var t;const i=null==(t=this.qc.Lnt[0])?void 0:t.ct;if(void 0!==i&&!S(i))return i}return this.x0t+this.Zb}Yx(){return this.nq}Kx(){return!this.qc.zc&&this.h5}fP(){return this.Cz}_P(){return this.Rz}gP(t){this.Rz!==t&&(this.u2t=this.Rz,this.Rz=t,this.So(new Ik(this.Gx(),t)),this.I$t.gP(t))}TP(){return this.o5}mP(){return this.qc.zc?Uo.nL(0,this.Gx()):this.Ho.Ly(this.x0t)}EP(){var t,i;if(this.qc.zc)return Uo.rL();let e=null!=(i=null==(t=this.H4)?void 0:t.J3().Ly(this.x0t))?i:Uo.rL();if(e.V>0){const t=e.An(e.V-1);e=e.HM(Uo.nL(t,this.Gx()))}return e}PP(){return this.Pz}Mx(){return this.tO}BP(){return this.sO}RP(){return this.Gl}$1t(){return{customData:{activeQuality:{averageBandwidth:0,bandwidth:0,codecs:"",frameRate:0,height:this.NP(),id:"0",name:"",width:this.LP()},enabled:!0,id:"0",kind:"main",label:"",language:"",qualities:[],uid:0},language:"",name:"",trackContentId:"",trackContentType:"",trackId:0,type:Q1.Mk}}t2t(){return{customData:{activeQuality:{averageBandwidth:0,bandwidth:0,codecs:"",id:"0",name:"",audioSamplingRate:0},qualities:[],enabled:!0,id:"0",kind:"main",label:"",language:"",uid:0},language:"",name:"",trackContentId:"",trackContentType:"",trackId:0,type:Q1.Bk}}J1t(){var t,i;return!(void 0!==(null==(t=this.gBt.F$t())?void 0:t.version))||(null==(i=this.gBt.F$t())?void 0:i.sdkType)===n2.q0t}H$t(t){this.J1t()&&_e(t,0),this.I$t.H$t(t)}LP(){return this.I0t}NP(){return this.C0t}QP(){this.Cz&&(this.Cz=!1,this.a2t=!1,this.So(new vt(this.Gx()))),this.I$t.QP()}jP(){this.Cz||(this.Cz=!0,this.a2t=!0,this.So(new Si(this.Gx()))),this.I$t.jP()}Oy(t){if(this.qc.zc)return;let i=_.max(0,t-this.x0t);i=_.round(1e6*i)/1e6;const e=this.g2t;this.g2t=i,this.a2t=this.fP(),this.f2t=i,this.Pz=!0,this.So(new ji(this.Gx())),void 0===e&&(this.J1t()?this.m2t(i):this.E9(i))}E9(t){this.I$t.Oy(t,this.a2t).then(this.w2t(t)).catch(this.V$t)}w2t(t){return()=>{void 0!==this.g2t&&(this.g2t===t?this.g2t=void 0:this.E9(this.g2t))}}u5(t){this.o5!==t&&(this.o5=t,this.So(new Ka(this.Gx(),t))),void 0===this.g2t&&this.Pz&&t>=Lr.GL&&this.Mq(),this.d2t()}d2t(){if(this.Cz)return void(this.y2t=!1);const t=this.o5>=Lr.XL;this.y2t!==t&&(this.y2t=t,t?this.So(new mo(this.Gx())):this.So(new SP(this.Gx())))}b2t(){this.A2t||(this.A2t=h.createElement("div"),this.oa.xe.appendChild(this.A2t),this.A2t.className="theoplayer-ad-linear theoplayer-chromecast-ad",this.A2t.style.zIndex="10",Go(this.A2t)),this.A2t.style.display=this.qc.zc?"":"none"}S2t(){var t;const i=null==(t=this.qc.Lnt[0])?void 0:t.KYt;i&&!this.T2t?(this.T2t=new A2(this.A2t,!0),this.T2t.O1t=i,this.T2t.wn("clickstart",this.k2t)):this.T2t&&(this.T2t.O1t=i)}E2t(){var t;const i=null==(t=this.qc.Lnt[0])?void 0:t.kJt;if(void 0===i||i<0)return void(this.x2t&&(this.x2t.kn(),this.x2t=void 0));if(!this.x2t){var e;const t=null==(e=this.oa.Na)?void 0:e.gi;this.x2t=new x2(this.oa.Wu,t),this.A2t.appendChild(this.x2t.xe),this.x2t.wn("uD",this.P2t)}const s=this.I$t.q$t();void 0!==s&&(s<i?this.x2t.z1t(i-s):this.x2t.X1t())}R0t(){return this.x0t}D0t(t){this.x0t=t}qnt(t){}KP(){this.I$t.KP()}kn(){this.Vo(),this.qc.kn(),this.T2t&&(this.T2t.zg(),this.T2t=void 0),this.x2t&&(this.x2t.kn(),this.x2t=void 0),this.A2t&&(Ao(this.A2t),this.A2t=void 0),this.I$t.B$t(this.u4),this.I$t.D$t(this.I2t),this.I$t.L$t(this.g0t),this.I$t.mn(y1.x$t,this.C2t),this.I$t.kn()}constructor(t,i,e,s,n){super(),this.oa=void 0,this.gBt=void 0,this.I$t=void 0,this.rPt=Uo.rL(),this.p2t=void 0,this.Zb=void 0,this.h5=!1,this.nq=void 0,this.Cz=void 0,this.Rz=void 0,this.u2t=void 0,this.o5=Lr.zL,this.y2t=!1,this.Ho=Uo.rL(),this.H4=void 0,this.Pz=!1,this.x0t=void 0,this.I0t=void 0,this.C0t=void 0,this.tO=new Ws,this.sO=new Ws,this.Gl=new bc,this.qc=void 0,this.A2t=void 0,this.T2t=void 0,this.x2t=void 0,this.nxt=NaN,this.g2t=void 0,this.a2t=!1,this._2t=NaN,this.f2t=void 0,this.e2t=0,this.I2t=(t,i)=>{switch(t){case"buffered":this.rPt=new Uo(i),this.So(new Et(this.Gx()));break;case"currentProgramDateTime":this.p2t=new Date(i).getTime()-this.Gx();break;case"played":this.Ho=new Uo(i);break;case"seekable":this.r2t();break;case"videoHeight":this.l2t(void 0,i);break;case"videoWidth":this.l2t(i,void 0)}},this.u4=t=>{switch(t.type){case d.$w:this.Je(t.currentTime);break;case d.Zw:this.Mq();break;case d.Yw:this.So(new bH(t.representation,t.previousRepresentation));break;case d.ey:this.So(new KV(t.segmentStartTime,t.error,t.trackType,t.track,t.quality,t.retryCount));break;case d.Dw:this.So(new wn(t.currentTime,t.initDataType,t.initData));break;case d.Ew:this.So(new AL(new fs(me.CONTENT_PROTECTION_ERROR,t.error,void 0,t.licenseAcquisitionURL,t.status,t.statusText,t.licenseAcquisitionMessage,t.systemCode)));break;case d.xw:this.So(new nt)}},this.g0t=t=>{this.r2t(),this.o2t(),this.hh(),this.c2t(),this.v2t(),this.n2t(),this.Z1t(),this.Y1t(),this.b2t(),this.S2t(),this.E2t(),t||I2(this.I$t.$D)&&this.Eh()},this.bd=()=>{this.v2t(),this.E2t()},this.C2t=t=>{this.So(t)},this.m2t=Vl(t=>this.E9(t),50),this.V$t=t=>{this.g2t=void 0,this.So(new b1(t))},this.k2t=()=>{this.jP()},this.P2t=()=>{this.qc.uD()},this.oa=t,this.gBt=e,this.I$t=s,this.qc=new w2(t,s,i.Jc),this.x0t=n.R0t(),this.Zb=n.Nd()-this.x0t,this.Cz=n.fP(),this.Rz=n._P(),this.I0t=n.LP(),this.C0t=n.NP(),this.I$t.N$t(this.u4),this.I$t.C$t(this.I2t),this.I$t.M$t(this.g0t),this.I$t.wn(y1.x$t,this.C2t),this.I$t.O$t().then(t=>{this.So(new A1(t.bt,t.Mc))},this.V$t)}};function I2(t){return void 0!==t&&t.playerState===chrome.cast.media.PlayerState.IDLE&&t.idleReason===chrome.cast.media.IdleReason.FINISHED}function C2(t,i){for(const e of t.NI)if(e.JI===i)return e}function R2(t,i){let e=!1;for(let s=0;s<t.V;s++){const n=t.MI(s);-1===i.indexOf(n.JI)&&(t.it(n),s--,e=!0)}return e}function D2(t,i){let e=!1;for(const s of t){let t=C2(i,s.trackId);t||(t=new s2(s),i.tt(t),e=!0)}return e}function N2(t,i){for(const e of i.NI)e.H0t=Ct(t,e.JI);return!1}r();var B2=class{XK(t){return Promise.resolve("all")}GP(){}kn(){}},M2=[d.Nw,d.Cw,d.Kw,d.Jw,d.jw,d.uo,d.Qw,d.py,d.$w,d.Zw,Jr.xM,Jr.PM,d.Yw,d.ey,d.Dw,d.Ew,d.xw],L2=class extends VF{Ez(t){if(!t)return;Gr(this.mz&&xS(this.mz),t&&xS(t))||(this.mz=t,this.So(new Uk(t)))}R2t(t){if(!t)return;const i=ra(t,this.oa.Cd);Gr(this.Ac&&xS(this.Ac),i&&xS(i))||(this.Ra.D0t(0),this.Ac=i,this.So(new KF(i)),this.Ra.P0t())}D2t(t){for(const i of this.rt.NI)if(i.JI===t)return i;for(const i of this.ht.NI)if(i.JI===t)return i}get vft(){return this.Ra}set vft(t){const i=this.Ra;i&&(i.mn(y1.x$t,this.C2t),i.mn(y1.P$t,this.N2t),i.mn(M2,this.Rs),i.mn(Jr.AI,this.qV),t.D0t(i.R0t()),i.qnt(t._nt())),this.Ra=t,this.tO.OI=t.Mx(),this.sO.OI=t.BP(),this.Gl.OI=t.RP(),this.qc.OI=t._nt(),i&&i.kn(),t.wn(y1.x$t,this.C2t),t.wn(y1.P$t,this.N2t),t.wn(M2,this.Rs),t.wn(Jr.AI,this.qV)}get ro(){return this.ho}get Jc(){return this._nt()}_nt(){return this.qc}gnt(){return this.Zst}Mx(){return this.tO}Ux(){return this.Ra.Ux()._s()}get B2t(){return this.M2t||this.Ac}set B2t(t){this.M2t=t}async Un(t,i){var e;t&&await this.m0t(t,null!=(e=t.ads)?e:[],t.streamType,NaN,0,null!=i?i:0)}async L2t(t){var i;const e=null!=(i=this.M2t)?i:this.Ac;if(!e)return;var s;const n=this.M2t?null!=(s=this.M2t.ads)?s:[]:this.ort(),r=this.oa.Nd(),h=this.oa.EP(),o=YK(r,h,e),a=h.length>0?h.start(0):0,u=null!=t?t:this.nnt();await this.m0t(e,n,o,r,a,u)}ort(){const t=new st;return this.qc.qnt(t),t.ort()}Hx(){return this.Ra.Hx()}qx(){return this.mz}get zx(){return this.Gx()}set zx(t){this.Xx(t)}Gx(){return this.Ra.Gx()}nnt(){return this.Ra.nnt()}Xx(t,i){this.O2t||(this.gBt.p0t()||this.O2t||!this.Ac?this.Ra.Oy(t):this.Un(this.Ac,t))}Nd(){return this.Ra.Nd()}Kx(){return this.Ra.Kx()}Yx(){return this.nq}Zx(){return this.rq}tP(){return this.eO}hP(){return this.oa.rP}aP(){return this.Iz}uP(t){this.Iz=t,this.So(new Wi(this.zx,this.OP)),this.gBt.uP(t)}fP(){return this.Ra.fP()}_P(){return this.Ra._P()}gP(t){this.Ra.gP(t)}mP(){return this.Ra.mP()._s()}yP(){return Dn.HL}bP(t){}TP(){return this.Ra.TP()}EP(){return this.Ra.EP()._s()}PP(){return this.Ra.PP()}nu(){return this.Ac}async Ta(t){this.Ac=t,await this.Un(t),this.M2t=void 0,this.Ra.P0t()}RP(){return this.Gl}NP(){return this.Ra.NP()}LP(){return this.Ra.LP()}BP(){return this.sO}FP(){return this.cA}UP(t){this.cA=t,this.So(new Wi(this.zx,this.OP)),this.gBt.UP(t)}get WP(){return!1}set WP(t){}zP(){}qP(){return this.ha}GP(){}QP(){this.gBt.p0t()||this.O2t||!this.Ac?this.Ra.QP():this.Un(this.Ac)}jP(){this.Ra.jP()}gr(){this.ho=!0}mr(){this.mz=void 0,this.ho=!1}be(){}we(){}async m0t(t,i,e,s,n,r){this.O2t=!0,this.F2t(),this.Ra.D0t(n);const h="live"===e||"dvr"===e,o="vod"===e,a=function(t,i,e,s){return{theoplayer_version:1,streamStart:t,isLive:i,sourceDescription:e,configuration:s}}(n,h,t,this.Cd),u={w0t:t,Jc:i,zx:r>=0&&r!==1/0&&(o||0!==r)?_.max(0,r-n):void 0,ct:s,P0:h?chrome.cast.media.StreamType.LIVE:chrome.cast.media.StreamType.BUFFERED,y0t:a};try{await this.gBt.m0t(u)}catch(t){this.U2t(t)}finally{this.O2t=!1}}V2t(){this.H2t(this.tO),this.H2t(this.sO),this.W2t(this.Gl)}H2t(t){for(const i of t.NI)this.q2t(i);t.wn(N.rI,t=>{this.q2t(t.Ht),this.z2t()})}W2t(t){for(const i of t.NI)this.G2t(i);t.wn(N.rI,t=>{this.G2t(t.Ht),this.z2t()})}q2t(t){t.wn(X1.B0t,this.imt),t.wn(X1.M0t,this.X2t),t.wn(X1.M0t,this.Y1t)}G2t(t){t.wn(X1.N0t,this.j2t),t.wn(X1.N0t,this.Y1t)}Q2t(){const t=[];for(const i of this.rt.NI)i.Rt&&t.push(i.JI);for(const i of this.ht.NI)i.Rt&&t.push(i.JI);for(const i of this.nt.NI)i.Qk===xh.Kn&&t.push(i.JI);this.Ra.H$t(t)}K2t(t,i,e){this.Y2t=t,this.J2t=i,this.Z2t=e}$2t(t){var i,e;if(!t)return!1;return(null!=(e=null==(i=this.gBt.F$t())?void 0:i.version)?e:-1)>=2?t.map(t=>t.o):[t[0].o]}t3t(t){this.i3t=t}$P(){}tI(){}sI(t){throw new m("Can't add a track while casting.")}async KP(){this.Ra.KP(),this.F2t()}F2t(){this.RV=Lr.zL,this.kV=!1,this.xV=!1,this.nq=void 0,this.rq=void 0}async kn(){this.F2t(),this.Vo(),this.vft=this.e3t(),this.gBt.mn(B1.x$t,this.C2t),this.gBt.mn(B1.n0t,this.s3t),this.gBt.mn(B1.wy,this.n3t),this.gBt.mn(B1.s0t,this.r3t),this.gBt.mn(B1.r0t,this.h3t),this.gBt.kn()}e3t(){return new G1(this,this.Ra.R0t(),this.Ra.Gx(),this.Ra.Nd(),this.Ra.Kx(),this.Ra.fP(),this.Ra._P(),this.Ra.LP(),this.Ra.NP())}constructor(t,i){super(t,!0),this.ho=!1,this.i3t=gs,this.RV=Lr.zL,this.kV=!1,this.xV=!1,this.O2t=!1,this.M2t=void 0,this.gBt=void 0,this.cA=void 0,this.Iz=void 0,this.Ra=void 0,this.mz=void 0,this.Ac=void 0,this.nq=void 0,this.rq=void 0,this.tO=new Gh,this.sO=new Gh,this.Gl=new ai,this.qc=void 0,this.ha=new ks,this.eO=new VS,this.Zst=new B2,this.Y2t=void 0,this.J2t=void 0,this.Z2t=void 0,this.n3t=t=>{var i,e;(it(t.OP)&&!rs(t.OP,this.cA,1e-5)||it(t.oP)&&t.oP!==this.Iz)&&(this.cA=null!=(i=t.OP)?i:this.cA,this.Iz=null!=(e=t.oP)?e:this.Iz,this.So(new Wi(this.zx,this.cA)))},this.r3t=()=>{const t=this.gBt.p0t();this.vft=t?new P2(this,this.oa,this.gBt,t,this.Ra):this.e3t()},this.N2t=t=>{this.Ez(t.bt),this.R2t(t.Mc)},this.h3t=t=>{const i=this.D2t(t.sN);if(!i)return void 0;const e={targetQualityIds:t.o0t};i.F0t(e)},this.C2t=t=>{this.U2t(t.lt)},this.U2t=t=>{this.i3t&&this.i3t(t)},this.s3t=t=>{this.nq=t.lt,this.rq=$k(this.nq),this.So(new el(this.rq))},this.X2t=t=>{if(!t.enabled)return;const i=this.rt.NI.some(i=>i.JI===t.trackId)?this.rt:this.ht;for(const e of i.NI)e.Rt&&e.JI!==t.trackId&&(e.Rt=!1)},this.j2t=t=>{if(t.mode===xh.Kn)for(const i of this.nt.NI)i.Qk===xh.Kn&&i.JI!==t.trackId&&tP(i.Lt,t.track.Lt)&&(i.Qk=xh.Nh)},this.Y1t=Vl(()=>{this.Q2t()},50),this.z2t=()=>{const t=[];var i;const e=null!=(i=hh(this.ht.NI,t=>J2(t,this.Y2t)))?i:hh(this.ht.NI,t=>t.Rt);var s;e&&t.push(e.JI);const n=null!=(s=hh(this.nt.NI,t=>J2(t,this.J2t)))?s:hh(this.nt.NI,t=>t.Qk===xh.Kn);var r;n&&t.push(n.JI);const h=null!=(r=hh(this.rt.NI,t=>J2(t,this.Z2t)))?r:hh(this.rt.NI,t=>t.Rt);h&&t.push(h.JI),0!==t.length&&this.Ra.H$t(t)},this.imt=t=>{const i=this.$2t(t.targetQuality),e=t.track;this.gBt.a0t(e.JI,e.V3,i)},this.qV=t=>{this.So(t);const i=t.readyState;!this.kV&&this.RV===Lr.zL&&i>=Lr.Qn&&(this.kV=!0,this.So(new Tt(t.currentTime))),!this.xV&&this.RV<=Lr.Qn&&i>=Lr.GL&&(this.xV=!0,this.So(new M(t.currentTime))),this.RV<=Lr.GL&&i>=Lr.XL&&this.So(new Is(t.currentTime)),this.RV<=Lr.XL&&i===Lr.jL&&this.So(new Zi(t.currentTime)),this.RV=i},this.cA=this.oa.OP,this.Iz=this.oa.oP,this.gBt=i,this.gBt.wn(B1.x$t,this.C2t),this.gBt.wn(B1.n0t,this.s3t),this.gBt.wn(B1.wy,this.n3t),this.gBt.wn(B1.s0t,this.r3t),this.gBt.wn(B1.r0t,this.h3t),this.qc=new gU(this),this.mz=this.oa.bt,this.Ac=this.oa.nu(),this.vft=new G1(this,0,this.oa.nnt(),this.oa.Nd(),this.oa.Qx,this.oa.lP,this.oa.vP,this.oa.MP,this.oa.DP),this.V2t()}};r();var O2=class extends Oi{xa(){return new F2(this.lt)}constructor(t){super("error"),this.lt=void 0,this.lt=t}},F2=class extends gp{constructor(t){super("error"),this.error=void 0,this.error=t}};r();var U2=class extends gp{constructor(t){super("statechange"),this.state=void 0,this.state=t}};function V2(t,i){let e;return{get casting(){return t.xJ},get error(){return t.lt},get receiverName(){return t.o3t},get state(){return t.vft},start(){t.Tn()},stop(){t.KP()},join(){t.a3t()},leave(){t.u3t()},set connectionCallback(t){null==i||i.c3t(t)},get connectionCallback(){return null==i?void 0:i.d3t()},get source(){return e||t.Mc},set source(i){e=i,t.Mc=i},addEventListener(i,e){const s=vu(i,Ts);t.wn(s,e)},removeEventListener(i,e){const s=vu(i,Ts);t.mn(s,e)}}}r();var H2=class extends je{get xJ(){return this.vft===Co.CONNECTING||this.vft===Co.CONNECTED}get lt(){return this.nq}get Ca(){return this.hu||(this.hu=V2(this,this.l3t)),this.hu}get o3t(){var t;return null==(t=this.l3t.f3t())?void 0:t.A0t()}get Mc(){return this.oa?this.oa.B2t:this.M2t}set Mc(t){this.M2t=t?ra(t,this.v3t.Cd):void 0,this.oa&&(this.oa.B2t=this.M2t,this.M2t&&this.oa.Un(this.M2t))}get vft(){return this.Ra}set vft(t){let i=t;this._3t||i!==Co.CONNECTING&&i!==Co.CONNECTED||(i=Co.AVAILABLE),this.Ra!==i&&(this.Ra=i,this.So(new U2(this.vft)))}async g3t(){if(!this.p3t)throw new m("Chromecast must be initialized before starting a session");await this.p3t,this.l3t.f3t()||await this.l3t.m3t()}async Tn(){this._3t=!0;try{if(this.vft=Co.CONNECTING,await this.g3t(),await this.w3t(),this.oa){const t=this.v3t.nu(),i=this.l3t.y3t(t);this.oa.B2t=i?ra(i,this.v3t.Cd):this.M2t,this.oa.L2t()}this.vft=Co.CONNECTED,await this.v3t.KP()}catch(t){this.b3t(!1).catch(gs),this.vft=Co.AVAILABLE,Ce(t)||this.u8(t)}}async a3t(){this._3t=!0;try{if(this.vft=Co.CONNECTING,await this.g3t(),await this.w3t(),this.oa){const t=this.v3t.nu(),i=this.l3t.A3t(t);i&&(this.oa.B2t=ra(i,this.v3t.Cd))}this.vft=Co.CONNECTED,await this.v3t.KP()}catch(t){await this.b3t(!0).catch(gs),this.vft=Co.AVAILABLE,Ce(t)||this.u8(t)}}async S3t(){this.l3t.f3t()&&await this.Tn()}async w3t(){null!=this.oa||(this.oa=this.T3t()),this.nq=void 0,this.v3t.jP(),await this.LY.k3t(this.oa)}T3t(){const t=new L2(this.v3t,this.l3t.f3t());return t.t3t(this.u8),t}E3t(){this.oa&&(this.oa.kn(),this.oa=void 0)}async b3t(t){if(this._3t=!1,!this.oa)return;const i=this.oa.ro,e=this.oa.nu(),s=this.oa.nnt();try{if(i){let i;i=t?this.l3t.x3t(e):this.l3t.P3t(e),null!=i||(i=e),await this.LY.I3t(i,i===e),this.v3t.Xx(s),this.v3t.QP()}}finally{this.E3t()}}u3t(){this.xJ&&(this.l3t.C3t(!1),this.b3t(!0).catch(this.u8))}KP(){this.xJ&&(this.l3t.C3t(!0),this.b3t(!1).catch(this.u8))}kn(){this.uV.Zg(),this.l3t.mn(q1.E0t,this.R3t),this.Vo(),this.E3t()}constructor(t,i,e,s){super(),this.ZS=void 0,this.nq=void 0,this.hu=void 0,this.v3t=void 0,this.oa=void 0,this.Ra=Co.UNAVAILABLE,this.p3t=void 0,this.LY=void 0,this.l3t=void 0,this._3t=!1,this.uV=new Zc,this.D3t=()=>{this.l3t.wn(q1.E0t,this.R3t),this.vft=this.l3t.N3t()},this.R3t=t=>{const i=t.vft;this.vft=i,i!==Co.UNAVAILABLE&&i!==Co.AVAILABLE||this.b3t(!1).catch(this.u8)},this.M2t=void 0,this.u8=t=>{Ce(t)||t instanceof Us&&(this.nq=t,this.So(new O2(t).Ca))},this.LY=t,this.v3t=i,this.l3t=s,this.ZS=e.chromecast,this.p3t=Cu(this.l3t.GY(this.ZS,this.uV.Yg),this.uV),this.p3t.then(this.D3t).catch(this.u8)}};r();var W2=class extends je{get xJ(){return!1}get lt(){}get o3t(){}get Mc(){}set Mc(t){}get vft(){return Co.UNAVAILABLE}get Ca(){return this.hu||(this.hu=V2(this)),this.hu}a3t(){zd.um("Joining a Chromecast session is not possible when JoinStrategy is configured to disabled")}u3t(){zd.um("Leaving a Chromecast session is not possible when JoinStrategy is configured to disabled")}Tn(){zd.um("Starting a Chromecast session is not possible when JoinStrategy is configured to disabled")}KP(){zd.um("Stopping a Chromecast session is not possible when JoinStrategy is configured to disabled")}S3t(){return Promise.resolve()}kn(){}constructor(...t){super(...t),this.hu=void 0}};function q2(t){return{bt:t.bt,zx:t.Gx(),ct:t.Nd(),Qx:t.Qx,lt:t.Yx(),Jx:t.Zx(),oP:t.oP,lP:t.lP,vP:t.vP,AP:t.AP,xP:t.xP,DP:t.DP,MP:t.MP,OP:t.OP}}r(),r();var Jn=class extends VF{_nt(){return this.qc}Mx(){return this.tO}get $x(){return this.tP()}get iP(){return this.eP()}tP(){return this.eO}eP(){return this.iO}Aa(){return this.$L}RP(){return this.Gl}BP(){return this.sO}switchContexts(t){this.oa=t,this.tO.OI=t.ht,this.sO.OI=t.rt,this.Gl.OI=t.nt,this.$L.OI=t.Sq,this.eO.OI=t.$x,this.iO.OI=t.iP,this.qc.OI=t.Jc}B3t(t){this.oa!==t&&(this.yz(),this.switchContexts(t),this.wz())}nO(t){if(this.oa===t)return;let i;this.yz(),this.bnt&&(i=q2(this));const e=this.qx(),s=this.qP(),n=this.zP();if(this.switchContexts(t),void 0!==i){Ok(this,i,q2(this))}const r=this.qx();r!==e&&this.So(new Uk(r)),this.qP()!==s&&this.So(new Vk),this.zP()!==n&&this.So(new Hk),this.wz()}async kn(t){await super.kn(t),this.$L.kn(t),this.tO.kn(t),this.sO.kn(t),this.Gl.kn(t),this.eO.kn(),this.iO.kn(),await this.qc.kn(t)}constructor(t,i){super(t,i),this.tO=new Gh,this.sO=new Gh,this.Gl=new ai,this.$L=void 0,this.eO=new zS,this.iO=new se,this.qc=void 0,this.$L=new zk(t.Sq),this.tO.OI=t.ht,this.sO.OI=t.rt,this.Gl.OI=t.nt,this.eO.OI=t.$x,this.iO.OI=t.iP,this.qc=new gU(this),this.qc.OI=t.Jc}};r();function z2(t){const i=h.createElement("div");return Pl(i,"theo-ads-sgai-ima-container"),function(t){t.style.boxSizing="border-box",t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%"}(i),t.appendChild(i),i}function G2(t){const i=t.style;i.boxSizing="border-box",i.position="absolute",i.display="none",i.border="0 solid transparent",i.borderWidth="0px",i.width="100%",i.height="100%"}function X2(t){const i=t.style;i.display="",i.backgroundColor="",i.backgroundRepeat="",i.backgroundAttachment="",i.border="",i.borderWidth="",i.flex="",i.transform="",i.transition="",i.backgroundImage="",i.backgroundSize="",i.backgroundPosition="",i.alignItems="",i.position=""}function j2(t,i,e,s,n){const r=i/e;let h=1,o=0,a=0;if(r>=s/n){const t=s/r;o=(n-t)/2,h=t/e}else{const t=n*r;a=(s-t)/2,h=t/i}t.style.left=a/s*100+"%",t.style.top=o/n*100+"%",t.style.width=i*h/s*100+"%",t.style.height=e*h/n*100+"%"}function Q2(t){return Xt(t,"theo-ads://dai.break")}function K2(t){return t&&t.integration===FC.THEOADS}var Y2=class extends Jn{nu(){const t=super.nu();return!t&&this.M3t.xJ&&this.M3t.Mc?this.M3t.Mc:t}Ta(t,i){return this.ta.Zo(i=>(this.L3t=new Zc,this.L3t.$g(i),Cu(super.Ta(t,this.L3t.Yg),this.L3t)),i)}QP(){super.QP(),this.Cd.cast.strategy!==GS.AUTO||this.M3t.xJ||this.M3t.S3t()}k3t(t){return this.ta.Zo(i=>this.O3t(t,i))}I3t(t,i){return void 0===t&&(t=void 0),void 0===i&&(i=!1),this.ta.Zo(e=>this.F3t(t,i,e))}O3t(t,i){fr(i),this.U3t.Jc&&this.U3t.Jc.qnt(t.Jc),this.V3t(),this.H3t=hh(this.U3t.ht.NI,t=>t.Rt),this.fEt=hh(this.U3t.nt.NI,t=>"showing"===t.Qk),this.W3t=hh(this.U3t.rt.NI,t=>t.Rt),this.q3t=t,this.q3t.K2t(this.H3t,this.fEt,this.W3t),this.nO(t),this.q3t.gr()}async F3t(t,i,e){fr(e);const s=this.q3t;if(void 0!==s)try{if(t){await this.U3t.KP(),fr(e);const s=ra(t,this.U3t.Cd);var n;if(s.sources.forEach(t=>{t&&(t.bypassLicense=!0)}),i)s.ads=null==(n=s.ads)?void 0:n.filter(K2);this.L3t=new Zc,this.L3t.$g(e),await Cu(this.U3t.Ta(s,this.L3t.Yg),this.L3t)}i&&this.U3t.Jc&&s.Jc.qnt(this.U3t.Jc)}catch(t){bu(t)}finally{s.mr(),this.nO(this.U3t),this.H3t=hh(this.q3t.ht.NI,t=>t.Rt),this.fEt=hh(this.q3t.nt.NI,t=>"showing"===t.Qk),this.W3t=hh(this.q3t.rt.NI,t=>t.Rt),this.U3t.ht.wn(N.rI,this.z3t),this.U3t.nt.wn(N.rI,this.G3t),this.U3t.rt.wn(N.rI,this.X3t),this.U3t.wn(Jr.EM,this.V3t),this.q3t===s&&(this.q3t=void 0)}}KP(){var t;return this.H3t=void 0,this.fEt=void 0,this.W3t=void 0,this.V3t(),null==(t=this.L3t)||t.Zg(),this.ta.Zo(()=>super.KP())}async kn(){var t;null==(t=this.L3t)||t.Zg(),this.M3t.kn(),await this.I3t(),await this.ta.kn(),await super.kn()}constructor(t,i){super(t),this.M3t=void 0,this.U3t=void 0,this.q3t=void 0,this.ta=new Zn,this.L3t=void 0,this.H3t=void 0,this.fEt=void 0,this.W3t=void 0,this.z3t=t=>{const i=t.Ht;J2(this.H3t,i)&&(i.Rt=!0)},this.G3t=t=>{const i=t.Ht;J2(this.fEt,i)&&(i.Qk=xh.Kn)},this.X3t=t=>{const i=t.Ht;J2(this.W3t,i)&&(i.Rt=!0)},this.V3t=()=>{this.U3t.ht.mn(N.rI,this.z3t),this.U3t.nt.mn(N.rI,this.G3t),this.U3t.rt.mn(N.rI,this.X3t)},this.U3t=t,this.Cd.cast.strategy!==GS.DISABLED?this.M3t=new H2(this,t,this.Cd.cast,i):this.M3t=new W2,this.GX.BJ(this.M3t)}};function J2(t,i){return void 0!==t&&void 0!==i&&(t.bs===i.bs&&i.Th===t.Th)}r();var Z2=new class extends Ne{c3t(t){this.j3t=t}d3t(){return this.j3t}f3t(){return this.Q3t}N3t(){switch(this.K3t.getCastState()){case cast.framework.CastState.CONNECTED:return Co.CONNECTED;case cast.framework.CastState.CONNECTING:return Co.CONNECTING;case cast.framework.CastState.NOT_CONNECTED:return Co.AVAILABLE;case cast.framework.CastState.NO_DEVICES_AVAILABLE:default:return Co.UNAVAILABLE}}async GY(t,i){await g0(i),this.K3t=cast.framework.CastContext.getInstance(),this.K3t.addEventListener(cast.framework.CastContextEventType.CAST_STATE_CHANGED,this.MJ),this.K3t.setOptions({receiverApplicationId:t.appID,autoJoinPolicy:chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED})}async m3t(){try{const t=await this.K3t.requestSession();if(t)throw t}catch(t){throw new Us(Wn(t))}}y3t(t){var i;return null==(i=this.j3t)?void 0:i.onStart(t)}P3t(t){var i;return null==(i=this.j3t)?void 0:i.onStop(t)}A3t(t){var i;return null==(i=this.j3t)?void 0:i.onJoin(t)}x3t(t){var i;return null==(i=this.j3t)?void 0:i.onLeave(t)}C3t(t){this.K3t.endCurrentSession(t)}constructor(...t){super(...t),this.K3t=void 0,this.Q3t=void 0,this.j3t=void 0,this.MJ=()=>{const t=this.N3t();this.Q3t=t===Co.CONNECTED?new H1(this.K3t.getCurrentSession()):void 0,this.So(new z1(t))}}},$2=new class{get Ca(){return this.hu||(this.hu=function(t){return{initialize(i){const e=t.GY(XS(i));return e.catch(gs),e},startSession(){const i=t.m3t();return i.catch(gs),i},endSession(){t.Y3t()}}}(this)),this.hu}async GY(t){this.p3t||(this.p3t=this.J3t(t)),await this.p3t}async J3t(t){await this.l3t.GY(t)}async m3t(){if(!this.p3t)throw new m("Chromecast must be initialized before starting a session");await this.p3t,this.l3t.f3t()||await this.l3t.m3t()}Z3t(){this.l3t.C3t(!1)}Y3t(){this.l3t.C3t(!0)}constructor(t){this.p3t=void 0,this.hu=void 0,this.l3t=void 0,this.l3t=t}}(Z2),t3={get chromecast(){return $2.Ca}};Ma(t=>new Y2(t,Z2),da.Ent),r(),r(),r(),r(),r(),r(),r();var i3=class{$3t(t,i,e,s){t.Gz.forEach(t=>{if(!this.t4t(t.i4t)){const n=t.e4t(i,e,s);n&&this.s4t(n)}})}t4t(t){return this.n4t.get(t)}s4t(t){this.n4t.set(t.r4t,t),this.h4t.set(t.r4t,t.o4t),this.a4t.au(t.u4t)}znt(t){this.h4t.has(t.r4t)||(this.h4t.set(t.r4t,t),this.a4t.au(t.u4t))}c4t(t){return this.h4t.forEach(t)}d4t(t){return this.n4t.forEach(t)}l4t(t){let i=!1;return this.n4t.forEach(e=>{i=e.l4t(t)||i}),i}async kn(){const t=[];this.n4t.forEach(i=>t.push(i.kn())),this.h4t.forEach(i=>t.push(i.kn())),await Promise.all(t),this.n4t.clear(),this.h4t.clear()}constructor(t){this.a4t=void 0,this.n4t=void 0,this.h4t=void 0,this.a4t=t,this.n4t=Ba(),this.h4t=Ba()}};r();var $h=class t extends Oi{xa(){return new e3(this.AZt,this.Iy,this.Jy,this.Mc)}static f4t(i){return new t($c.GENERAL,i.Iy,i.TZt)}static v4t(i,e){return new t(i.AZt,i.message,i.TZt,e)}constructor(t,i,e,s){super("_4t"),this.AZt=void 0,this.Iy=void 0,this.Jy=void 0,this.Mc=void 0,this.AZt=t,this.Iy=i,this.Jy=e,this.Mc=s}},e3=class extends gp{constructor(t,i,e,s){super("aderror"),this.problemType=void 0,this.message=void 0,this.errorCode=void 0,this.source=void 0,this.problemType=t,this.message=i,this.errorCode=e,this.source=s}},s3=class extends tl{get g4t(){return this.p4t}get zc(){let t=!1;return this.m4t(i=>{t=t||i.w4t}),t}get Lnt(){const t=[];return this.m4t(i=>{const e=i.Lnt;e.length&&t.push(...e)}),t}get Fnt(){let t=null;return this.m4t(i=>{null!=t||(t=i.Fnt)}),t}get Unt(){const t=[];return this.m4t(i=>{t.push(...i.Unt)}),t}get Vnt(){const t=[];return this.m4t(i=>{t.push(...i.Vnt)}),t}qnt(t){this.m4t(i=>{i.qnt(t)})}get Ca(){var t;return null!=(t=this.hu)?t:this.hu=iU(this)}W6(t,i,e){try{this.y4t=e;const s=va.Bg.jz(t);if(s.i4t===we.knt)return;const n=this.p4t.t4t(s.i4t);if(!n)throw new ys($c.ADBLOCK,void 0,"Ads could not be loaded.");i!==Hu.Mnt&&this.d9||this.A4t.b4t(n),s.W6(t,i,n,this.y4t)}catch(i){0,this.So($h.v4t(i,t.sources))}}uD(){this.m4t(t=>{t.uD()})}Hnt(t){this.m4t(i=>{i.Hnt(t)})}znt(t){this.p4t.znt(t)}Wnt(t,i){return this.A4t.Wnt(t,i)}S4t(t){this.p4t.d4t(i=>{i.S4t(t)})}l4t(t){return this.p4t.l4t(t)}m4t(t){return this.p4t.c4t(t)}GP(){this.p4t.d4t(t=>t.GP())}async hr(){this.d9=!1;const t=[];this.p4t.d4t(i=>t.push(i.KP())),await Promise.all(t)}async kn(){this.Vo(),await this.p4t.kn(),this.A4t.mn(d.uo,this.hst),this.mn("_4t",this.T4t)}constructor(t){super(),this.A4t=void 0,this.p4t=void 0,this.y4t=!1,this.d9=!1,this.hu=void 0,this.T4t=t=>{if(!this.y4t)return;if(t.Jy===xs.VAST_NO_ADS_AFTER_WRAPPER||t.Jy===xs.VAST_EMPTY_RESPONSE)return;const i=new mu(Mi.ADVERTISEMENT_ERROR,t.Iy),e=new as(me.AD_BLOCKER_DETECTED,t.Iy+" Turn off your AdBlocker and try again.",i);this.A4t.Qq(e)},this.hst=()=>{this.d9=!0},this.A4t=t,this.p4t=new i3(this),this.wn("_4t",this.T4t),t.wn(d.uo,this.hst)}};r(),r(),r();var tn=class extends a2{get Jc(){return this.qc}get G0t(){return this.k4t}set G0t(t){this.k4t=t}get X0t(){return this.E4t}set X0t(t){this.E4t=t}set qOt(t){this.f$t=t}get qOt(){return this.f$t}get y0t(){return this.x4t}P4t(){this.I4t=!0}C4t(t){this.qc.push(t),this.I4t=!1}R4t(t){_e(this.qc,t)}get pP(){return this.I4t}constructor(t){super(),this.f$t=void 0,this.qc=void 0,this.k4t=void 0,this.E4t=void 0,this.x4t=void 0,this.I4t=void 0,this.f$t=t,this.qc=[],this.k4t=-1,this.E4t=-1,this.x4t=void 0,this.I4t=!1}},n3=class extends tn{get u$t(){return this.D4t}get Unt(){return this.N4t}er(t){void 0!==t.maxDuration&&(this.k4t=t.maxDuration),void 0!==t.customData&&(this.x4t=t.customData)}B4t(t){const i=this.qc.indexOf(t);return i>=0&&i<this.qc.length-1}C4t(t){super.C4t(t),this.N4t.push(t)}M4t(t){_e(this.N4t,t)}R4t(t){super.R4t(t),_e(this.N4t,t)}constructor(t,i){super(i.timeOffset),this.D4t=void 0,this.N4t=[],this.D4t=t,this.er(i)}};r(),r();var Hs=function(t){return t.BZt="linear",t.L4t="nonlinear",t.yk="unknown",t}({}),r3=function(t){return t.NONE="none",t.READY="ready",t}({}),gn=class extends o2{O4t(t,i,e,s,n,r){this.aS=t,this.lA=i,this.fA=e,this.Zb=s,this.IYt=n,this.EJt=r,this.F4t="ready"}get U4t(){return this.F4t}get PYt(){return this.IYt}get ct(){return this.Zb}Ont(){var t;return null!=(t=this.hu)?t:this.hu=this.xa()}get Mi(){return this.fA}get o(){return this.aS}get kJt(){return this.EJt}get Ti(){return this.lA}get V4t(){return this.H4t}get KYt(){return this.YYt}get wYt(){return this.yYt}get rYt(){return this.yJt}get y0t(){return this.x4t}get W4t(){return this.q4t}a1t(){}l1t(){return""}d1t(){return this.z4t}constructor(t,i){super(),this.H4t=void 0,this.od=void 0,this.hu=void 0,this.aS=void 0,this.EJt=void 0,this.lA=void 0,this.fA=void 0,this.Zb=void 0,this.z4t=void 0,this.YYt=void 0,this.yYt=void 0,this.yJt=void 0,this.IYt=void 0,this.F4t=void 0,this.x4t=void 0,this.q4t=void 0,this.H4t=i,this.aS=void 0,this.EJt=void 0,this.lA=void 0,this.fA=void 0,this.Zb=void 0,this.yJt=[],this.IYt=[],this.F4t="none",this.x4t=void 0,this.q4t=!1,this.od=t}};function La(t){return{get adSystem(){return t.a1t()},get readyState(){return t.U4t},get adBreak(){return t.od.Ont()},get duration(){return t.ct},get companions(){return t.PYt.map(t=>t.Ca)},get resourceURI(){return t.d1t()},get clickThrough(){return t.KYt},get width(){return t.Ti},get type(){return function(t){switch(t){case"linear":case"unknown":return"linear";case"nonlinear":return"nonlinear"}}(t.V4t)},get height(){return t.Mi},get id(){return t.o},get skipOffset(){return t.kJt},get integration(){return t.u$t},get creativeId(){return t.wYt},get universalAdIds(){return t.rYt},get customData(){return t.y0t},get isSlate(){return t.W4t}}}r();var h3=class{get VYt(){return this.HYt}get jYt(){return this.QYt}get G4t(){return this.X4t}get KYt(){return this.YYt}get Mi(){return this.fA}get cZt(){return this.z4t}get Ti(){return this.lA}get Ca(){var t;return null!=(t=this.hu)?t:this.hu=function(t){return{get adSlotId(){return t.VYt},get altText(){return t.jYt},get contentHTML(){return t.G4t},get clickThrough(){return t.KYt},get height(){return t.Mi},get resourceURI(){return t.cZt},get width(){return t.Ti}}}(this)}j4t(t){if(t.KYt&&t.cZt)return;const i=function(t){try{return j0(t,"text/html")}catch(t){return}}(t.G4t);i&&(this.YYt=o3(i,"a","href"),this.z4t=o3(i,"img","src"))}constructor(t){var i;this.hu=void 0,this.lA=void 0,this.fA=void 0,this.X4t=void 0,this.HYt=void 0,this.YYt=void 0,this.z4t=void 0,this.QYt=void 0,this.HYt=t.VYt,this.lA=t.Ti,this.fA=t.Mi,this.X4t=t.G4t,this.YYt=t.KYt,this.z4t=t.cZt,this.QYt=null!=(i=t.jYt)?i:"",this.j4t(t)}};function o3(t,i,e){const s=t.querySelector(i);return s&&s.getAttribute(e)||""}var a3=class extends gn{get u$t(){return this.D4t}get Q4t(){return this.K4t}set Q4t(t){this.K4t=t}xa(){return La(this)}er(t){t.id&&(this.aS=t.id),void 0!==t.skipOffset&&(this.EJt=t.skipOffset),void 0!==t.width&&(this.lA=t.width),void 0!==t.height&&(this.fA=t.height),void 0!==t.duration&&(this.Zb=t.duration),void 0!==t.readyState&&(this.F4t=function(t){return"ready"===t?r3.READY:r3.NONE}(t.readyState)),void 0!==t.resourceURI&&(this.z4t=t.resourceURI),void 0!==t.clickThrough&&(this.YYt=t.clickThrough),void 0!==t.companions&&(this.IYt=[...t.companions].map(u3)),void 0!==t.creativeId&&(this.yYt=t.creativeId),void 0!==t.universalAdIds&&(this.yJt=t.universalAdIds),void 0!==t.customData&&(this.x4t=t.customData)}constructor(t,i,e){super(e,function(t){return"linear"===t?Hs.BZt:"nonlinear"===t?Hs.L4t:Hs.yk}(i.type)),this.D4t=void 0,this.K4t=0,this.D4t=t,this.er(i)}};function u3(t){const i={VYt:t.adSlotId,jYt:t.altText,G4t:t.contentHTML,GT:void 0,KYt:t.clickThrough,Mi:t.height,cZt:t.resourceURI,Ti:t.width};return new h3(i)}r();var gu=class extends oU{xa(){return new c3(this.jnt.Ont(),this.Y4t)}get Y4t(){return this.J4t}constructor(t,i){super("Z4t",t),this.J4t=void 0,this.J4t=i}},c3=class extends aU{constructor(t,i){super("adskip",t),this.playedPercentage=void 0,this.playedPercentage=i}};r();var d3=class extends sU{xa(){return new l3(this.od.Ont())}constructor(t){super("$4t",t)}},l3=class extends Ke{constructor(t){super("updateadbreak",t)}};r();var f3=class extends sU{xa(){return new v3(this.od.Ont())}constructor(t){super("t5t",t)}},v3=class extends Ke{constructor(t){super("adbreakchange",t)}};r();var ie=class extends oU{xa(){return new _3(this.jnt.Ont(),this.currentTime)}constructor(t,i){super("i5t",t),this.currentTime=void 0,this.currentTime=i}},_3=class extends aU{constructor(t,i){super("adfirstquartile",t),this.currentTime=void 0,this.currentTime=i}};r();var xe=class extends oU{xa(){return new g3(this.jnt.Ont(),this.currentTime)}constructor(t,i){super("e5t",t),this.currentTime=void 0,this.currentTime=i}},g3=class extends aU{constructor(t,i){super("admidpoint",t),this.currentTime=void 0,this.currentTime=i}};r();var Qs=class extends oU{xa(){return new p3(this.jnt.Ont(),this.currentTime)}constructor(t,i){super("s5t",t),this.currentTime=void 0,this.currentTime=i}},p3=class extends aU{constructor(t,i){super("adthirdquartile",t),this.ad=void 0,this.currentTime=void 0,this.ad=t,this.currentTime=i}},m3=class{get Jc(){return this.qc}get K0t(){return this.y1t}get Ca(){var t;return null!=(t=this.hu)?t:this.hu=function(t){return{get integration(){return t.u$t},get ads(){return t.Jc.map(t=>t.Ont())},get adBreaks(){return t.K0t.map(t=>t.Ont())},createAd:(i,e)=>t.n5t(i,e?t.r5t(e):void 0).Ont(),updateAd(i,e){t.h5t(t.o5t(i),e)},updateAdProgress(i,e){const s=No(Number(e),0,1);t.a5t(t.o5t(i),s)},beginAd(i){t.M4t(t.o5t(i))},endAd(i){t.u5t(t.o5t(i))},skipAd(i){t.G$t(t.o5t(i))},removeAd(i){t.R4t(t.o5t(i))},createAdBreak:i=>t.c5t(i).Ont(),updateAdBreak(i,e){t.d5t(t.r5t(i),e)},removeAdBreak(i){t.l5t(t.r5t(i))},removeAllAds(){t.f5t()},error(i){t.v5t(i)},fatalError(i,e){const s=e?Number(e):void 0;t._5t(i,s)}}}(this)}get uN(){return this.f8}set uN(t){this.f8=t}get w4t(){return this.g5t.some(t=>t.V4t===Hs.BZt)}get r4t(){return this.u$t}get Lnt(){return this.g5t}get Fnt(){var t;return null!=(t=this.w1t)?t:null}get Unt(){return hs(this.y1t,t=>t.Unt)}get Vnt(){return this.y1t.filter(t=>!t.pP)}uD(){var t;if(0===this.g5t.length)return;const i=this.g5t[0];(null==(t=this.f8)?void 0:t.skipAd)?this.f8.skipAd(i.Ont()):this.G$t(i)}Hnt(t){}qnt(t){}n5t(t,i){var e;const s=null!=i?i:this.p5t({timeOffset:null!=(e=t.timeOffset)?e:0}),n=new a3(this.u$t,t,s);return s.C4t(n),this.qc.push(n),this.u4t.So(new cn(n)),n}h5t(t,i){t.er(i),this.u4t.So(new ch(t))}a5t(t,i){if(!Ct(this.g5t,t))throw new m("Cannot update ad progress on a non-started ad");const e=t.Q4t,s=_.max(e,i);t.Q4t=s;const n=this.A4t.Gx();e<.25&&s>=.25&&this.u4t.So(new ie(t,n)),e<.5&&s>=.5&&this.u4t.So(new xe(t,n)),e<.75&&s>=.75&&this.u4t.So(new Qs(t,n))}M4t(t){Ct(this.g5t,t)||(this.g5t.push(t),t.od.M4t(t),this.m5t(t.od),this.u4t.So(new nc(t,this.A4t.Gx())))}G$t(t){if(!Ct(this.g5t,t))return;const i=t.od.B4t(t);this.u4t.So(new gu(t,t.Q4t)),this.w5t(t,i)}u5t(t){if(!Ct(this.g5t,t))return;const i=t.od.B4t(t);this.u4t.So(new fc(t,this.A4t.Gx())),this.w5t(t,i)}R4t(t){if(!Ct(this.qc,t))return;const i=t.od.B4t(t);_e(this.qc,t),t.od.R4t(t),this.u4t.So(new f3(t.od)),this.w5t(t,i)}c5t(t){const i=new n3(this.u$t,t);return this.y1t.push(i),this.u4t.So(new vn(i)),i}d5t(t,i){t.er(i),this.u4t.So(new d3(t))}l5t(t){if(Ct(this.y1t,t)){for(const i of t.Jc.slice())this.R4t(i);_e(this.y1t,t),this.u4t.So(new nU(t))}}f5t(){for(const t of this.y1t.slice())this.l5t(t)}v5t(t){this.u4t.So(new $h($c.GENERAL,t.message))}_5t(t,i){const e=new as(null!=i?i:me.AD_ERROR,t.message,t);this.A4t.Qq(e)}y5t(t){return hh(this.y1t,i=>i.qOt===t)}p5t(t){var i;return null!=(i=this.y5t(t.timeOffset))?i:this.c5t(t)}w5t(t,i){_e(this.g5t,t);const e=t.od;0!==this.g5t.length||this.w1t!==e||i||(e.P4t(),this.m5t(void 0))}m5t(t){this.w1t!==t&&(void 0!==this.w1t&&this.u4t.So(new Za(this.w1t)),this.w1t=t,void 0!==t&&this.u4t.So(new Ta(t)))}o5t(t){const i=hh(this.qc,i=>i.Ont()===t);if(void 0===i)throw new m('Invalid ad for integration "'+this.u$t+'"');return i}r5t(t){const i=hh(this.y1t,i=>i.Ont()===t);if(void 0===i)throw new m('Invalid ad break for integration "'+this.u$t+'"');return i}async Ta(t,i){var e;if(fr(i),null==(e=this.f8)?void 0:e.setSource){let i=await Promise.resolve(this.f8.setSource(t));return Uu(i)&&(i=t),ra(i,this.A4t.Cd)}return t}async b5t(){var t;(null==(t=this.f8)?void 0:t.resetSource)?await Promise.resolve(this.f8.resetSource()):this.f5t()}async kn(){var t;(null==(t=this.f8)?void 0:t.destroy)&&await Promise.resolve(this.f8.destroy()).catch(gs),this.f5t(),this.m5t(void 0),this.f8=void 0,this.u4t.kn()}constructor(t,i){this.u$t=void 0,this.A4t=void 0,this.f8=void 0,this.u4t=new tl,this.qc=[],this.y1t=[],this.g5t=[],this.w1t=void 0,this.hu=void 0,this.u$t=t,this.A4t=i}};r();var w3=class{destroy(){this.removeAdListeners()}get player(){return this.oa}set player(t){this.oa&&this.removeAdListeners(),this.oa=t,this.addAdListeners()}get inAdBreak(){return this.A5t}addAdListeners(){var t,i;null==(t=this.oa.Jc)||t.wn("Ynt",this.Ed),null==(i=this.oa.Jc)||i.wn("Knt",this.Bd)}removeAdListeners(){var t,i;null==(t=this.oa.Jc)||t.mn("Ynt",this.Ed),null==(i=this.oa.Jc)||i.mn("Knt",this.Bd)}constructor(t){this.oa=void 0,this.r9=void 0,this.A5t=!1,this.Ed=t=>{1!==this.oa.vP&&(this.r9=this.oa.vP,this.oa.vP=1),this.A5t=!0},this.Bd=t=>{this.A5t=!1,void 0!==this.r9&&(this.oa.vP=this.r9,this.r9=void 0)},this.oa=t,this.addAdListeners()}},y3=class extends Jn{_nt(){return this.S5t}get T5t(){return this.k5t}GP(){this.U3t.GP(),this.S5t.GP()}QP(){void 0===this.nq?(void 0!==this.E5t&&this.x5t(this.E5t),super.QP()):this.So(new el(this.nq))}async Ta(t,i){fr(i);let e=t;if(e)for(const t of this.P5t)e=await t.Ta(e,i);if(await super.Ta(e,i),fr(i),null==e?void 0:e.ads){const t=Boolean(e.blockContentIfAdError);this.S5t.S4t(e.playAdsAfterTime);for(const i of e.ads)this.S5t.W6(i,Hu.Mnt,t)}}async KP(){this.nq=void 0,this.Wz=void 0,await this.S5t.hr(),this.I3t(),await super.KP();for(const t of this.P5t)await t.b5t()}x5t(t){this.I5t=this.oa.vP;const i=this.oa.OP,e=this.oa.oP;t.UP(i),t.uP(e),this.k5t=t,this.E5t=void 0,this.nO(t)}b4t(t){void 0===this.k5t&&(this.E5t=t)}I3t(){this.E5t=void 0,void 0!==this.k5t&&(this.U3t.vP=this.I5t,this.U3t.OP=this.OP,this.U3t.oP=this.oP,this.nO(this.U3t),this.k5t=void 0)}Yx(){var t;return null!=(t=this.Wz)?t:super.Yx()}Zx(){var t;return null!=(t=this.nq)?t:super.Zx()}Qq(t){void 0===this.Zx()&&(this.nq=t,this.Wz=ar(t),this.So(new el(t)))}eI(t){return void 0===this.k5t&&this.S5t.l4t(t)}Wnt(t,i){try{const e=new m3(t,this);e.uN=i(e.Ca),this.S5t.znt(e),this.P5t.push(e),t!==FC.UPLYNK&&(this.C5t=new w3(this))}catch(i){this.S5t.So(new $h($c.GENERAL,'Error while constructing ad integration "'+t+'": '+i+'"'))}}gP(t){var i;(null==(i=this.C5t)?void 0:i.inAdBreak)||super.gP(t)}async kn(){var t;for(const t of this.P5t)await t.kn().catch(gs);await this.S5t.kn(),this.I3t(),null==(t=this.C5t)||t.destroy(),this.C5t=void 0,await super.kn()}constructor(t,i){super(t),this.S5t=void 0,this.U3t=void 0,this.P5t=[],this.k5t=void 0,this.E5t=void 0,this.nq=void 0,this.Wz=void 0,this.C5t=void 0,this.I5t=1,this.U3t=t,this.S5t=new s3(this),this.S5t.g4t.$3t(i,t,this,t.Cd)}};Ma(t=>new y3(t,va.Bg),da.Ant),r(),r(),r();var b3=zs.ru&&zs.Q_<12,A3=class extends VF{get zx(){return this.Gx()}set zx(t){this.Xx(t)}nnt(){return this.oa.nnt()}get ct(){return this.Nd()}get $x(){return this.eO}get iP(){return this.iO}get kP(){return this.EP()}get VP(){return this.cq}get u4t(){return this.R5t}get ht(){return this.tO}get w4t(){return this.A4t.T5t===this}Ux(){return Uo.rL()._s()}Hx(){}Wx(t){}_P(){return 1}gP(t){}mP(){return new Uo([0,this.zx])._s()}PP(){return!1}RP(){return this.Gl}BP(){return this.sO}ds(){return this.qP().ds}qP(){return this.ha}Ea(){}async kn(){this.Vo(),this.tO.kn(),this.sO.kn(),this.Gl.kn(),this.R5t.kn(),this.oa.mn(d.Pw,this.Rs)}D5t(){b3&&this.N5t(),this.w4t||this.A4t.x5t(this)}I3t(){this.w4t&&(b3&&this.B5t(),zs.Tg&&this.xe.querySelectorAll("video[src]").forEach(t=>{t.src=""}),zd.Zs.Ep&&this.oa.tI(),this.A4t.I3t())}N5t(){this.M5t||(s.addEventListener("blur",this.L5t),s.addEventListener("focus",this.O5t),this.M5t=!0)}B5t(){s.removeEventListener("blur",this.L5t),s.removeEventListener("focus",this.O5t),this.M5t=!1}F5t(){requestAnimationFrame(()=>this.oa.we())}constructor(t,i){super(t,!0),this.A4t=void 0,this.M5t=void 0,this.sO=void 0,this.tO=void 0,this.Gl=void 0,this.eO=void 0,this.iO=void 0,this.R5t=void 0,this.ha=void 0,this.cq=void 0,this.L5t=void 0,this.O5t=void 0,this.A4t=i,this.M5t=!1,this.sO=new Ws,this.tO=new Ws,this.Gl=new bc,this.eO=new VS,this.iO=new Gk,this.R5t=new tl,this.ha=new ks,this.cq=new Jo,this.L5t=()=>{this.oa.be()},this.O5t=()=>{this.F5t()},this.oa.wn(d.Pw,this.Rs)}};r(),r();var S3=0,T3="theoplayer-wrapper",k3=class t{get U5t(){return this.V5t}get H5t(){return this.W5t}get q5t(){return 1===this.W5t.length&&E1(this.W5t[0].sources.type)}get z5t(){return this.G5t}X5t(t){const i=this.j5t===t.timeOffset;return!this.Q5t&&i}get K5t(){return this.Y5t}get J5t(){return C1(this.Z5t)&&!this.Q5t}get j5t(){return this.Z5t}get dd(){return this.$5t}t6t(){if(S(this.$5t)){let t=this.j5t;if(void 0===t)return void(this.$5t=0);if("string"==typeof t&&C1(t)){const i=this.oa.Nd();S(i)||i===1/0||(t=x0(t)*i)}S(t)||(this.$5t=t)}}get i6t(){return this.e6t}set i6t(t){this.e6t=t}get s6t(){return this.n6t}set s6t(t){this.n6t=t,this.r6t=!1}get h6t(){return this.o6t}a6t(t){this.o6t.push(t)}u6t(){if(!this.Q5t){let t,i,e=this.V5t===Hu.Mnt&&void 0===this.c6t&&1===this.W5t.length;const s=this.W5t[0];if(!e&&1===this.W5t.length){const t=zd.Dh(s.sources.src).searchParams.get("output");t&&t.toLowerCase().indexOf("vmap")>-1&&(e=!0,void 0!==this.c6t&&uh("Do not set a timeOffset for VMAP ad sources. VMAP ads have their own offsets included."))}if(E1(s.sources.type)||e)t=s.sources.src;else{if(S(this.oa.Nd())&&"end"===this.d6t())return;i=this.l6t()}let n=this.oa.Nd();(S(n)||n===1/0)&&(n=-3),this.Q5t={f6t:this.oa.xe.offsetWidth,v6t:this.oa.xe.offsetHeight,_6t:this.oa.xe.offsetWidth,g6t:this.oa.xe.offsetHeight,p6t:this.Yst,m6t:this.Iz,w6t:t,y6t:i,b6t:s.omidAccessModeRules,A6t:n}}return this.Q5t}l6t(){return'<vmap:VMAP xmlns:vmap="http://www.iab.net/videosuite/vmap" version="1.0">'+this.W5t.map((t,i)=>this.S6t(t.sources,i)).join("\n")+"</vmap:VMAP>"}S6t(t,i){const e=this.d6t(),s=t.src;return'<vmap:AdBreak timeOffset="'+e+'" breakType="linear,nonlinear" breakId="theoplayer-break-'+this.JI+"-"+i+'"><vmap:AdSource allowMultipleAds="true" followRedirects="true"><vmap:VASTAdData><VAST version="3.0"><Ad id="'+T3+"-"+this.JI+"-"+i+'"><Wrapper allowMultipleAds="true" followAdditionalWrappers="true"><VASTAdTagURI><![CDATA['+s+"]]></VASTAdTagURI></Wrapper></Ad></VAST></vmap:VASTAdData></vmap:AdSource></vmap:AdBreak>"}d6t(){if(0===this.j5t)return"start";if(this.j5t===1/0)return"end";const t=this.j5t;if("string"==typeof t&&C1(t)){const i=x0(t)*this.oa.Nd();return iu.h$t(i)}return iu.h$t(this.j5t||0)}T6t(t){this.W5t.push(t)}k6t(t){const i=T3+"-"+this.JI+"-";for(const e of t)if(Xt(e,i)){const t=Number(e.slice(i.length));if(!S(t)&&t>=0&&t<this.W5t.length)return t}return-1}static E6t(t){if(void 0!==t)return-1===t?1/0:t}x6t(){this.Y5t=!0}get vO(){return this.Yst}set vO(t){this.Yst=t}get oP(){return this.Iz}set oP(t){this.Iz=t}constructor(i,e,s,n){this.V5t=void 0,this.oa=void 0,this.G5t=void 0,this.Z5t=void 0,this.Q5t=void 0,this.$5t=void 0,this.e6t=void 0,this.n6t=void 0,this.r6t=void 0,this.Y5t=void 0,this.o6t=void 0,this.Yst=void 0,this.Iz=void 0,this.W5t=void 0,this.c6t=void 0,this.JI=void 0,this.V5t=e,this.oa=s,this.G5t=n,this.$5t=NaN,this.e6t=!1,this.n6t=!1,this.Y5t=!1,this.o6t=[],this.Yst=!1,this.Iz=!1,this.W5t=[],this.JI=++S3,this.c6t=i.timeOffset,this.Z5t=t.E6t(this.c6t),this.t6t(),this.W5t.push(i)}};r();var E3=class{get P6t(){return this.I6t.P6t}get C6t(){return this.I6t.C6t}get Unt(){return this.I6t.Unt}get t(){return this.I6t.t}S4t(t){this.R6t=t}D6t(t){return!(this.P6t&&!this.P6t.K5t&&"nonlinear"!==this.C6t.V4t)||this.P6t.dd>t.dd&&this.P6t.dd!==t.dd}N6t(t){if(t.length)return t.sort((t,i)=>t.dd-i.dd)[0]}B6t(){if(this.Unt.length)return this.N6t(this.M6t(this.t.Gx()))}L6t(){if(!(void 0!==this.R6t&&this.R6t>=0))return this.Unt.filter(t=>!t.i6t&&0===t.dd&&t!==this.P6t)[0]}M6t(t){if(!this.O6t&&(this.O6t=!this.Unt.some(t=>S(t.dd)),!this.O6t))return[];const i=this.Unt.filter(i=>!i.i6t&&(i.q5t||!S(i.dd)&&t<=i.dd));return void 0===this.R6t?i:i.filter(t=>t.q5t||void 0===t.j5t||t.dd>this.R6t)}constructor(t){this.I6t=void 0,this.R6t=void 0,this.O6t=!1,this.I6t=t,this.R6t=void 0}},x3=function(t){return t[t.F6t=0]="F6t",t[t.U6t=1]="U6t",t[t.V6t=2]="V6t",t}({}),P3=class{GP(){this.ko=!0,this.H6t&&this.W6t()}q6t(t,i){this.z6t(t,i);const e=hh(this.Unt,i=>i.X5t(t));if(e)e.T6t(t);else{var s;const e=new k3(t,i,this.oa,null==(s=t.replaceContent)||s);this.N4t.push(e),2===this.G6t&&this.X6t.c5t(e.dd,e,e.j5t),this.j6t(i,e)}}get C6t(){return this.Q6t}get Unt(){return this.N4t}get t(){return this.oa}get nXt(){return Boolean(this.Ypt)}get G6t(){return this.K6t}Y6t(){if(_e(this.Unt,this.P6t),this.P6t){for(const t of this.P6t.h6t)this.X6t.J6t();this.P6t=void 0}}Z6t(){for(const t of this.N4t)for(const i of t.h6t)this.X6t.$6t(i,!0);Wt(this.N4t)}async t8t(t){this.Y6t(),this.i8t=!0,this.P6t=t,this.e8t=t.dd,this.Ypt=this.s8t(t),await this.Ypt,this.Ypt=void 0}async s8t(t){await this.n8t(t);const i=t.u6t();if(!i)return this.i8t=!1,void(this.P6t=void 0);const e=this.Q6t.r8t(i);t.i6t=!0;try{await e,t.U5t===Hu.Bnt&&this.Q6t.h8t()}catch(t){0,this.P6t=void 0,await this.W6t()}}async n8t(t){if(t.oP=this.A4t.oP,!this.A4t.vO)return void(t.vO=!1);switch(await this.Zst.XK(this.A4t.oP)){case"all":case"muted":t.vO=!0;break;case"none":t.vO=!1}}o8t(){var t;return null!=(t=this.a8t.L6t())?t:this.a8t.B6t()}async W6t(){if(this.P6t&&!this.P6t.K5t)return this.Ypt;const t=this.o8t();t&&await this.t8t(t)}get P6t(){return this.u8t}set P6t(t){this.u8t=t}get i8t(){return this.c8t}set i8t(t){this.c8t=t}hr(){this.Y6t(),Wt(this.N4t),this.e8t=0,this.P6t=void 0,this.Ypt=void 0,this.i8t=!1}s6t(){this.i8t=!1,this.P6t&&(this.P6t.s6t=!0)}async j6t(t,i){t===Hu.Bnt&&this.ko&&this.a8t.D6t(i)&&!this.nXt&&"linear"!==this.Q6t.V4t&&(!this.P6t||this.P6t&&this.P6t.i6t)&&(await Promise.resolve(),await this.t8t(i))}x6t(){this.P6t&&this.P6t.x6t()}get d8t(){if(this.nXt||this.i8t)return!1;if(this.P6t&&!this.P6t.K5t)return!1;return!!this.N4t.filter(t=>this.P6t!==t).length&&Boolean(this.o8t())}async l8t(){if(!this.d8t)return void 0;const t=this.o8t();t&&await this.t8t(t)}z6t(t,i){const e=t.sources.type,s=i===Hu.Mnt&&void 0===t.timeOffset,n=E1(e)||s?1:2;n!==this.K6t&&(this.K6t=n,this.Z6t(),this.Q6t.j0t&&!this.nXt&&"linear"!==this.Q6t.V4t&&(this.Q6t.j0t.zg(),this.P6t=void 0,this.Ypt=void 0),this.e8t=0,this.H6t=!0)}S4t(t){this.a8t.S4t(t)}kn(){this.oa.mn(d.Cw,this.vX)}constructor(t,i,e,s,n){this.Q6t=void 0,this.N4t=void 0,this.H6t=void 0,this.ko=void 0,this.oa=void 0,this.A4t=void 0,this.u8t=void 0,this.e8t=void 0,this.a8t=void 0,this.Zst=void 0,this.K6t=0,this.Ypt=void 0,this.X6t=void 0,this.c8t=!1,this.vX=()=>{const t=this.N4t.filter(t=>t.J5t);for(const i of t){i.t6t();const t=i.j5t;this.X6t.f8t(t,i.dd)}this.ko&&this.d8t&&this.W6t()},this.N4t=[],this.Q6t=t,this.ko=!1,this.H6t=!1,this.oa=i,this.A4t=e,this.P6t=void 0,this.e8t=0,this.a8t=new E3(this),this.Zst=s,this.X6t=n,this.oa.wn(d.Cw,this.vX)}};r(),r();var Nc=function(t){return t.v8t="contentResumeRequested",t._8t="contentPauseRequested",t.g8t="click",t.Cw="durationChange",t.p8t="expandedChanged",t.m8t="start",t.w8t="impression",t.Yz="pause",t.y8t="resume",t.b8t="adProgress",t.A8t="adBuffering",t.S8t="firstQuartile",t.XJt="midpoint",t.T8t="thirdQuartile",t.jJt="complete",t.k8t="userClose",t.E8t="linearChanged",t.x8t="loaded",t.P8t="adCanPlay",t.I8t="adMetadata",t.C8t="adBreakReady",t.R8t="interaction",t.D8t="allAdsCompleted",t.N8t="skip",t.B8t="skippableStateChanged",t.M8t="log",t.L8t="viewableImpression",t.O8t="volumeChange",t.F8t="mute",t}({});r();var I3=function(t){return t.U8t="adError",t}({});r();var C3=function(t){return t[t.V8t=-1]="V8t",t[t.H8t=-1]="H8t",t[t.W8t=-1]="W8t",t[t.q8t=101]="q8t",t[t.z8t=102]="z8t",t[t.G8t=200]="G8t",t[t.X8t=201]="X8t",t[t.j8t=202]="j8t",t[t.Q8t=300]="Q8t",t[t.K8t=301]="K8t",t[t.Y8t=302]="Y8t",t[t.J8t=303]="J8t",t[t.Z8t=400]="Z8t",t[t.$8t=402]="$8t",t[t.t9t=403]="t9t",t[t.i9t=405]="i9t",t[t.e9t=500]="e9t",t[t.s9t=501]="s9t",t[t.n9t=-1]="n9t",t[t.r9t=503]="r9t",t[t.h9t=602]="h9t",t[t.o9t=900]="o9t",t[t.a9t=901]="a9t",t[t.u9t=1005]="u9t",t[t.c9t=1007]="c9t",t[t.d9t=1009]="d9t",t[t.l9t=1010]="l9t",t[t.f9t=1011]="f9t",t[t.v9t=1012]="v9t",t[t._9t=1013]="_9t",t[t.g9t=1020]="g9t",t[t.p9t=1021]="p9t",t[t.m9t=1101]="m9t",t[t.w9t=1204]="w9t",t[t.y9t=1205]="y9t",t[t.b9t=1300]="b9t",t[t.A9t=-1]="A9t",t[t.S9t=-1]="S9t",t[t.T9t=-1]="T9t",t[t.k9t=-1]="k9t",t}({}),R3=function(t){return t.E9t="adLoadError",t.x9t="adPlayError",t}({});function D3(t,i){if(t===Nc.b8t){const t=i;return{P9t:t.adBreakDuration,I9t:t.adPosition,zx:t.currentTime,ct:t.duration,C9t:t.totalAds}}return i}function N3(t){switch(t){case google.ima.AdError.Type.AD_LOAD:return R3.E9t;case google.ima.AdError.Type.AD_PLAY:return R3.x9t}}function B3(t){return Mc(t)&&jd(t.getVastErrorCode)}function M3(t){const i=t.getInnerError(),e=i&&B3(i)?M3(i):void 0;return{Iy:t.getMessage(),TZt:t.getErrorCode(),R9t:t.getVastErrorCode(),Km:N3(t.getType()),D9t:e}}function L3(t){if(it(t))return t}r(),r();var O3=class extends Ne{N9t(t){this.Q6t.So(t)}B9t(t){this.Q0t=t,this.Q0t.wn(I3.U8t,this.M9t),this.Q0t.wn(Nc._8t,this.L9t),this.Q0t.wn(Nc.v8t,this.O9t),this.Q0t.wn(Nc.D8t,this.F9t),this.Q0t.wn(Nc.m8t,this.U9t),this.Q0t.wn(Nc.jJt,this.V9t),this.Q0t.wn(Nc.N8t,this.H9t),this.Q0t.wn(Nc.k8t,this.W9t),this.Q0t.wn(Nc.g8t,this.q9t),this.Q0t.wn(Nc.P8t,this.z9t),this.Q0t.wn(Nc.Yz,()=>{this.Q6t.lP||(this.Q6t.G9t(!0),this.Q6t.So(new Si(this.Q6t.zx))),this.X9t(!0)}),this.Q0t.wn(Nc.y8t,()=>{this.Q6t.lP&&(this.Q6t.G9t(!1),this.Q6t.So(new vt(this.Q6t.zx)))}),this.Q0t.wn(Nc.F8t,()=>{const i=t.FP();i>=0&&this.j9t(i)}),this.Q0t.wn(Nc.O8t,()=>{const i=t.FP();i>=0&&this.j9t(i)}),this.Q0t.wn(Nc.I8t,t=>{this.K9t.Q9t(t.type)}),this.Q0t.wn(Nc.Cw,t=>{t.jnt&&this.Y9t(t.jnt.ct)}),this.Q0t.wn(Nc.M8t,async t=>{const i=t.J9t.adError,e=B3(i)?M3(i):void 0;e&&(this.Z9t(e)?await this.$9t(t):this.t7t(e)?await this.i7t(e):this.e7t(e)&&this.s7t(e))}),this.Q0t.wn(Nc.x8t,t=>{if(t.jnt&&(this.Q6t.s6t(),this.K9t.n7t(t.jnt),this.r7t=0,t.jnt.h7t)){var i;const t=this.Q6t.AP,e=Lr.zL;this.Q6t.a5(e);const s=this.Q6t.zx,n=this.Q6t.AP;n!==t&&this.N9t(new ho(s,n)),null==(i=this.Q0t)||i.UP(this.Q6t.o7t()),this.N9t(new Tt(s,e))}}),this.Q0t.wn([Nc.A8t,Nc.w8t,Nc.S8t,Nc.XJt,Nc.T8t],t=>{t.jnt&&this.K9t.a7t(t.jnt,t.type,this.Q6t.zx)}),this.Q0t.wn(Nc.S8t,this.u7t),this.Q0t.wn(Nc.b8t,this.c7t)}async switchToPlayerIfNoNextAd(){if(this.Q0t){const t=this.Q0t.d7t();t&&this.l7t(t)||(this.Q6t.d8t()?await this.Q6t.l8t():(this.Q6t.f7t(),this.oa.lP&&!this.oa.Qx&&this.oa.QP()))}else if(this.Q6t.d8t())await this.Q6t.l8t();else{const t=this.Q6t.lP;this.Q6t.f7t(),t||this.oa.QP()}}l7t(t){const i=t.v7t,e=null==i?void 0:i.C9t;return(null==i?void 0:i.I9t)!==e}vm(){this.Q6t.Dc&&(p(this.Q6t.Dc),this.Q6t.Dc=null)}e7t(t){return t.Km===R3.E9t}t7t(t){return t.Km===R3.x9t}Z9t(t){return t.TZt===C3.d9t}async i7t(t){var i;(this.s7t(t),this._7t(t))&&(this.Q6t.g7t.i8t=!1,null==(i=this.Q6t.g7t.P6t)||i.x6t(),await this.switchToPlayerIfNoNextAd())}_7t(t){var i;if(F3(t))return!0;if(this.Q6t.nrt)return!1;const e=[C3.Z8t,C3.a9t,C3.p9t,C3.y9t];return!(Ct(e,t.TZt)||Ct(e,null==(i=t.D9t)?void 0:i.TZt))}s7t(t){this.Q6t.v5t(t)}async p7t(){this.K9t.J6t(),this.Q6t.x6t(),"nonlinear"===this.Q6t.V4t&&(this.K9t.m7t(-1,!1),this.Q6t.w7t(void 0)),"nonlinear"!==this.Q6t.V4t&&"none"!==this.Q6t.V4t||this.Q6t.d8t()&&await this.Q6t.l8t(),this.Q6t.y7t(),this.Q6t.w4t?this.Q6t.I3t():this.b7t()&&this.oa.So(new ur(this.oa.Gx()))}b7t(){return this.Q6t.A7t&&!this.Q6t.S7t&&this.oa.Qx}setCountdownTimer(){this.vm(),this.Q6t.Dc=v(()=>this.X9t(),250)}async $9t(t){void 0!==t.jnt&&(this.Q6t.g7t.i8t=!1,this.Q6t.x6t(),this.Q6t.d8t()?await this.Q6t.l8t():this.Q6t.G9t(!0))}Y9t(t){this.Q6t.ct!==t&&t>=0&&(this.Q6t.F4(t),this.N9t(new zr(this.Q6t.ct)))}j9t(t){this.Q6t.o7t()!==t&&(0===t?this.Q6t.T7t(t,!0,!1):this.Q6t.T7t(t,!1,!1))}async k7t(){this.Q6t.E7t&&void 0!==this.oa.Yx()&&(this.x7t=new Zc,await Cu(this.oa.Ta(this.oa.nu(),this.x7t.Yg),this.x7t),this.P7t&&this.oa.Xx(this.P7t),this.P7t=void 0)}X9t(t){if(this.Q0t){const t=this.Q0t.I7t();t>this.Q6t.ct&&this.Y9t(_.round(t))}const i=this.Q6t.zx;(t||!this.Q6t.lP&&i!==this.Q6t.C7t)&&(this.Q6t.So(new B(i,void 0)),this.Q6t.C7t=i)}hr(){this.x7t&&(this.x7t.Zg(),this.x7t=void 0),this.R7t=!1,this.r7t=0}kn(){this.hr(),this.Vo()}constructor(t,i,e){super(),this.Q6t=void 0,this.oa=void 0,this.K9t=void 0,this.R7t=void 0,this.x7t=void 0,this.P7t=void 0,this.Q0t=void 0,this.r7t=void 0,this.u7t=void 0,this.c7t=void 0,this.M9t=void 0,this.F9t=void 0,this.U9t=void 0,this.V9t=void 0,this.H9t=void 0,this.W9t=void 0,this.q9t=void 0,this.z9t=void 0,this.L9t=void 0,this.O9t=void 0,this.Q6t=t,this.oa=i,this.K9t=e,this.R7t=!1,this.x7t=void 0,this.P7t=void 0,this.r7t=0,this.u7t=t=>{if(!t.jnt||!t.jnt.v7t)return;const i=t.jnt.v7t;this.K9t.d5t(i.qOt,i.C9t,i.G0t)},this.c7t=t=>{var i,e,s;if(this.r7t>=5)return;this.r7t++;const n=t.J9t;if(!function(t){return Mc(t)&&void 0!==t.P9t&&void 0!==t.C9t}(n))return;const r=null==(s=this.Q0t)||null==(e=s.d7t())||null==(i=e.v7t)?void 0:i.qOt;void 0!==r&&this.K9t.d5t(r,n.C9t,n.P9t)},this.M9t=async t=>{t.J9t.D7t&&await this.i7t(t.J9t.D7t)},this.F9t=async()=>{this.R7t=!0,this.Q6t.x6t(),await this.O9t()},this.U9t=t=>{if(!t.jnt)return;const i=t.jnt;this.Q6t.w7t(i),this.Q6t.be(),this.Q6t.N7t(),this.Q6t.B7t=!0,this.K9t.M7t(i);const e=i.ct;if(this.Y9t(e),i.h7t){const t=this.Q6t.zx,i=this.Q6t.AP;this.Q6t.a5(Lr.XL),this.N9t(new M(t,i)),this.N9t(new Is(t,i)),this.N9t(new Zi(t,i)),this.Q6t.lP||this.N9t(new mo(this.Q6t.zx)),this.setCountdownTimer(),this.X9t(!0)}else this.Q6t.I3t(),this.oa.be(),this.Q6t.lP||this.oa.QP()},this.V9t=t=>{var i;if(!t.jnt)return;const e=t.jnt;if(this.vm(),this.K9t.m7t(this.Q6t.ct,e.h7t),this.Q6t.AP!==Lr.zL){const t=Lr.zL;this.Q6t.a5(t);const i=this.Q6t.zx;this.N9t(new ho(i,t))}this.Y9t(NaN),this.Q6t.B7t=!1,null==(i=this.Q0t)||i.UP(this.Q6t.o7t())},this.H9t=t=>{t.jnt&&(this.V9t(t),this.K9t.H9t(t.jnt,this.Q6t.zx,this.Q6t.ct))},this.W9t=t=>{t.jnt&&(this.K9t.m7t(-1,t.jnt.h7t),this.Q6t.x6t(),!t.jnt.h7t&&this.Q6t.d8t()&&this.Q6t.l8t())},this.q9t=t=>{t.jnt&&(t.jnt.h7t?this.Q6t.jP():this.oa.jP())},this.z9t=()=>{var t;(this.Q6t.B7t=!0,this.Q6t.L7t)&&(null==(t=this.Q0t)||t.jP(),this.Q6t.L7t=!1)},this.L9t=t=>{var i;if(!t.jnt)return;this.Q6t.E7t&&(this.P7t=this.oa.Gx(),this.oa.$P(),this.oa.WP=!0),this.Q6t.O7t=!0;const e=t.jnt;this.K9t.Ed(e);const s=e.ct;this.Q6t.w7t(e),this.Y9t(s),this.Q6t.G9t(!1),this.Q6t.be(),this.Q6t.D5t(),this.Q6t.E7t||this.oa.we(),this.oa.jP(),this.Q6t.F7t(e);0===(null==(i=e.v7t)?void 0:i.qOt)||this.Q6t.So(new SP(this.Q6t.zx))},this.O9t=async t=>{const i=null==t?void 0:t.jnt;this.Q6t.O7t=!1,"linear"===this.Q6t.V4t&&this.K9t.Bd(),i&&i.ct>=0&&this.Y9t(i.ct),this.oa.Nd()===1/0&&this.Q6t.U7t(),this.Q6t.B7t=!1,this.R7t&&await this.p7t(),this.Q6t.G9t(!0);try{await this.k7t()}catch(t){return void(Ce(t)||this.So(new Fn(t)))}if(this.Q6t.I3t(),this.Q6t.we(),this.oa.Qx||this.oa.QP(),i&&this.Q6t.w7t(i),this.Q6t.A7t){if(this.Q6t.E7t){var e;const t=this.oa.zP(),i=null==(e=this.oa.bt)?void 0:e.src;t&&i&&(t.src=i)}this.Q6t.S7t=!0}this.oa.WP=!1,this.Q6t.d8t()&&await this.Q6t.l8t()}}};function F3(t){var i,e;return t.R9t===C3.J8t||(null==(i=t.D9t)?void 0:i.R9t)===C3.J8t||t.TZt===C3.d9t||(null==(e=t.D9t)?void 0:e.TZt)===C3.d9t}r(),r();var U3=class extends tn{get u$t(){return we.v1t}constructor(t,i,e){super(t),this.V7t=void 0,this.H7t=void 0,this.V7t=i,this.H7t=e}};r(),r(),r();var V3=class extends gn{set W7t(t){this.q7t=t}get W7t(){return this.q7t}get u$t(){return we.so}a1t(){var t;return null==(t=this.z7t)?void 0:t.QKt}get G7t(){var t;return null==(t=this.z7t)?void 0:t.FYt}get wYt(){var t;return null==(t=this.z7t)?void 0:t.wYt}get _N(){var t;return null==(t=this.z7t)?void 0:t._N}get gq(){var t;return null==(t=this.z7t)?void 0:t.gq}get X7t(){var t,i;return null!=(i=null==(t=this.z7t)?void 0:t.X7t)?i:[]}get j7t(){var t,i;return null!=(i=null==(t=this.z7t)?void 0:t.j7t)?i:[]}get Q7t(){var t,i;return null!=(i=null==(t=this.z7t)?void 0:t.Q7t)?i:[]}xa(){return function(t,i){return Gi(t,{bitrate:0,contentType:void 0,mediaUrl:void 0,traffickingParameters:void 0,traffickingParametersString:void 0,universalAdIds:[],get description(){return i._N},get apiFramework(){return i.G7t},get creativeId(){return i.wYt},get title(){return i.gq},get wrapperAdIds(){return i.X7t},get wrapperAdSystems(){return i.j7t},get wrapperCreativeIds(){return i.Q7t}})}(La(this),this)}K7t(t){this.z7t=t;const i=H3(t);this.O4t(t.fJt,t.Y7t,t.J7t,t.ct,i,-1)}constructor(t,i){super(t,i),this.q7t=0,this.z7t=void 0}};function H3(t){return t.sYt.map(t=>new h3(t))}var W3=class extends gn{xa(){return function(t,i){return Gi(t,{get adSystem(){return i.a1t()},get apiFramework(){return i.G7t},get bitrate(){return i.z9},get contentType(){return i.GT},get creativeId(){return i.wYt},get description(){return i._N},get mediaUrl(){return i.PJt},get title(){return i.gq},get traffickingParameters(){return i.Z7t},get traffickingParametersString(){return i.$7t},get wrapperAdIds(){return i.X7t},get wrapperAdSystems(){return i.j7t},get wrapperCreativeIds(){return i.Q7t},get universalAdIds(){return i.rYt}})}(La(this),this)}K7t(t){this.z7t=t,this.O4t(t.fJt,t.Y7t,t.J7t,t.ct,H3(t),t.tti),this.H4t=t.h7t?Hs.BZt:Hs.L4t}get u$t(){return we.v1t}a1t(){return this.z7t?cl(this.z7t.QKt):void 0}get G7t(){return this.z7t?cl(this.z7t.FYt):void 0}get z9(){return this.z7t?this.z7t.iti:0}get GT(){return this.z7t?cl(this.z7t.GT):void 0}get wYt(){return this.z7t?cl(this.z7t.wYt):void 0}get eti(){return this.z7t?cl(this.z7t.eti):void 0}get _N(){var t;return null==(t=this.z7t)?void 0:t._N}get PJt(){var t;const i=null==(t=this.z7t)?void 0:t.PJt;return it(i)?i:this.IJt}set PJt(t){this.IJt=t}get gq(){var t;return null==(t=this.z7t)?void 0:t.gq}get Z7t(){return this.z7t?cl(this.z7t.Z7t):void 0}get $7t(){return this.z7t?cl(this.z7t.$7t):void 0}get X7t(){var t,i;return null!=(i=null==(t=this.z7t)?void 0:t.X7t)?i:[]}get j7t(){var t,i;return null!=(i=null==(t=this.z7t)?void 0:t.j7t)?i:[]}get Q7t(){var t,i;return null!=(i=null==(t=this.z7t)?void 0:t.Q7t)?i:[]}get rYt(){var t,i;return null!=(i=null==(t=this.z7t)?void 0:t.rYt.map(t=>({adIdRegistry:t.sti,adIdValue:t.nti})))?i:[]}constructor(t){super(t,Hs.yk),this.z7t=void 0,this.IJt=void 0}};function cl(t){return null===t?void 0:t}r(),r();var q3=class{get u4t(){return this.K9t.u4t}get r4t(){return this.rti}get w4t(){return this.K9t.w4t}get Fnt(){var t;return null!=(t=this.K9t.Fnt)?t:null}get Lnt(){const t=this.K9t.hti;return t?[t]:[]}get Unt(){return this.K9t.Unt}get Vnt(){return this.K9t.Vnt}qnt(t){this.K9t.qnt(t)}uD(){this.K9t.uD()}Hnt(t){this.K9t.Hnt(t)}kn(){return Promise.resolve()}constructor(t,i){this.K9t=void 0,this.rti=void 0,this.K9t=t,this.rti=i}},z3=class{get oti(){return this.ati}get u4t(){return this.R5t}get w4t(){return this.uti}get hti(){return this.u1t}get Fnt(){return this.w1t}get Unt(){return hs(this.y1t,t=>{if(t.pP)return[];const i=t.Jc;if(t===this.w1t&&void 0!==this.u1t){const t=i.indexOf(this.u1t);if(t>=0)return i.slice(t+1)}return i})}get Vnt(){return this.y1t.filter(t=>!t.pP)}constructor(t,i){this.R5t=void 0,this.y1t=void 0,this.u1t=void 0,this.w1t=void 0,this.uti=void 0,this.ati=void 0,this.R5t=t,this.y1t=[],this.uti=!1,this.ati=new q3(this,i)}};r();var G3=class extends oU{xa(){return new X3(this.jnt.Ont())}constructor(t){super("cti",t)}},X3=class extends aU{constructor(t){super("adimpression",t)}};r();var j3=class extends Oi{xa(){return new Q3(this.jnt.Ont())}constructor(t){super("dti"),this.jnt=void 0,this.jnt=t}},Q3=class extends gp{constructor(t){super("adbuffering"),this.ad=void 0,this.ad=t}};r();var K3=class extends Oi{xa(){return new Y3}constructor(){super("lti")}},Y3=class extends gp{constructor(){super("admetadata")}},J3=class t extends z3{fti(t,i){for(let e=0;e<t;e++){const t=new W3(i);i.C4t(t),this.u4t.So(new cn(t))}}c5t(t,i,e){let s=t;s===1/0&&(s=-1);const n=new U3(s,e,i);this.y1t.push(n),i.a6t(n),this.u4t.So(new vn(n))}f8t(t,i){for(const e of this.y1t)S(e.qOt)&&e.V7t===t&&(e.qOt=i,this.u4t.So(new d3(e)))}$6t(t,i){void 0===i&&(i=!1),i&&_e(this.y1t,t),this.u4t.So(new nU(t))}J6t(){if(this.Fnt){this.$6t(this.Fnt,!0);const t=Boolean(this.u1t&&this.u1t.V4t===Hs.BZt);this.vti(void 0,t)}}h5t(t,i){const e=i.v7t;if(!e)return;const s=e.I9t-1,n=t.Jc[s];return n.K7t(i),this.u4t.So(new ch(n)),n.od.G0t=e.G0t,n}get w4t(){return this._ti.w4t}gti(t){if(!Ct(this.pti,t)){if(t){if(this.u1t===t)return;this.u1t=t;for(const i of this.mti)this.Q9t(i,t,this._ti.zx)}else{if(!this.u1t)return;const t=new fc(this.u1t,this.u1t.od.qOt);this.pti.push(this.u1t),this.u1t=void 0,this.R5t.So(t)}Wt(this.mti)}}vti(t,i){if(t){var e;if((null==(e=this.Fnt)?void 0:e.qOt)===t.qOt)return;this.w1t=t,i&&this.u4t.So(new Ta(this.w1t))}else{if(!this.w1t)return;const t=new Za(this.w1t);this.w1t=void 0,Wt(this.pti),i&&this.R5t.So(t)}}wti(t){return this.y1t.filter(i=>rs(i.qOt,t,.01))[0]}static yti(t,i){if(i.v7t)return t.Jc[i.v7t.I9t-1]}Ed(t){if(!t.v7t)return;const i=t.v7t,e=this.wti(i.qOt);e&&(Wt(this.mti),this.vti(e,t.h7t))}Bd(){this.Fnt&&this.u4t.So(new Za(this.Fnt)),Wt(this.mti),this.J6t()}M7t(i){if(!this.w1t&&i.v7t){const t=this.wti(i.v7t.qOt);this.vti(t,i.h7t)}if(this.w1t){const e=t.yti(this.w1t,i);if(!e)return;this.h5t(this.w1t,i);const s=i.PJt;it(s)&&!it(e.PJt)&&(e.PJt=s,this.u4t.So(new ch(e))),this.gti(e),this.u4t.So(new nc(this.u1t,e.od.qOt))}else 0}m7t(t,i){if(this.gti(void 0),!i&&this.Fnt){const t=this.Fnt;this.vti(void 0,!1),this.$6t(t)}}n7t(t){const i=t.v7t;if(!i)return;const e=this.wti(i.qOt);if(!e)return;this.d5t(i.qOt,i.C9t,i.G0t);const s=this.h5t(e,t);s&&this.u4t.So(new p2(s))}d5t(t,i,e){const s=this.wti(t);if(!s)return;const n=s.Jc.length;if(i>n){const t=i-n;this.fti(t,s),s.G0t=e,this.u4t.So(new d3(s))}}H9t(i,e,s){if(!this.w1t)return;const n=t.yti(this.w1t,i);if(n){const t=e/s;this.u4t.So(new gu(n,t))}}a7t(i,e,s){if(!this.w1t)return;let n=this.u1t;if(!n){const s=t.yti(this.w1t,i);if(!s||Ct(this.pti,s))return void this.mti.push(e);n=s,this.h5t(this.w1t,i),this.gti(n)}this.Q9t(e,n,s)}Q9t(t,i,e){t===Nc.I8t?this.u4t.So(new K3):t===Nc.w8t&&i?this.u4t.So(new G3(i)):t===Nc.A8t&&i?this.u4t.So(new j3(i)):t===Nc.S8t&&i&&e?this.u4t.So(new ie(i,e)):t===Nc.XJt&&i&&e?this.u4t.So(new xe(i,e)):t===Nc.T8t&&i&&e&&this.u4t.So(new Qs(i,e))}uD(){this._ti.uD()}qnt(t){this._ti.qnt(t)}hr(){const t=Boolean(this.u1t&&this.u1t.V4t===Hs.BZt);this.gti(void 0),this.vti(void 0,t);for(const t of this.y1t)this.$6t(t);Wt(this.y1t),Wt(this.mti),Wt(this.pti)}kn(){this.hr()}Hnt(t){}constructor(t,i){super(t,we.v1t),this._ti=void 0,this.mti=void 0,this.pti=void 0,this._ti=i,this.mti=[],this.pti=[]}};function Z3(t){const i=s.google.ima.settings;t.ads&&t.ads.vpaidMode&&s.google.ima.settings.setVpaidMode(function(t){const i=s.google.ima.ImaSdkSettings.VpaidMode;switch(t){case dk.ENABLED:return i.ENABLED;case dk.INSECURE:return i.INSECURE;case dk.DISABLED:default:return i.DISABLED}}(t.ads.vpaidMode)),i.setPlayerVersion("10.3.0"),i.setPlayerType("THEOplayer"),i.setAutoPlayAdBreaks(!0),i.setDisableCustomPlaybackForIOS10Plus(!zn(t));const e=function(t){var i,e,s;const n=null==(e=t.ads)||null==(i=e.googleIma)?void 0:i.language;if(void 0!==n)return n;const r=null==(s=t.ui)?void 0:s.language;if(Q(r))return r;return}(t);e&&i.setLocale(e)}function zn(t){return zs.ru&&t.allowNativeFullscreen}r(),r();var $3=class{async r8t(t,i){this.y7t(),this.bti.GY(),this.Q0t=await this.Ati.r8t(t,this.Sti,i)}get j0t(){return this.Q0t}set j0t(t){this.Q0t=t}Tti(){var t;null==(t=this.Q0t)||t.Tn()}kti(){var t;null==(t=this.Q0t)||t.kti()}jP(){var t;null==(t=this.Q0t)||t.jP()}uD(){var t;null==(t=this.Q0t)||t.uD()}UP(t){var i;null==(i=this.Q0t)||i.UP(t)}Eti(t){var i;null==(i=this.Q0t)||i.Eti(t)}xti(){return Boolean(this.Q0t&&this.Q0t.d7t())}d7t(){var t;return null==(t=this.Q0t)?void 0:t.d7t()}I7t(){var t;return null==(t=this.Q0t)?void 0:t.I7t()}y7t(){this.Q0t&&(this.Ati.Pti(),this.Q0t.KP(),this.Q0t.zg(),this.Q0t=void 0)}kn(){this.y7t()}constructor(t,i,e){this.bti=void 0,this.Ati=void 0,this.Sti=void 0,this.Q0t=void 0,this.bti=t,this.Ati=e,this.Sti=i}},t4=class t extends A3{get o4t(){return this.X6t.oti}get Iti(){return this.X6t}get g7t(){return this.I6t}get E7t(){return zn(this.GJ)}Cti(t,i,e){i===Hu.Mnt&&void 0!==e&&(this.y4t=e),this.I6t.q6t(t,i)}static get r4t(){return we.v1t}get r4t(){return t.r4t}get Rti(){return this.GJ.ads.preload===fk.MIDROLL_AND_POSTROLL}qnt(t){const i=this.Dti();for(const e of i)P0(e.sources,e.timeOffset)||t.W6(e,Hu.Bnt,!1)}Dti(){const t=[],{Lnt:i,Unt:e}=this.o4t,s=[];for(const n of i.concat(e)){const i=n.od.H7t;if(Ct(s,i.JI))continue;const e=i.k6t(n.X7t);e>=0?t.push(...i.H5t.slice(e)):t.push(...i.H5t),s.push(i.JI)}for(const i of this.I6t.Unt)i.i6t||t.push(...i.H5t);return Cc(t)}set V4t(t){this.H4t=t}get V4t(){return this.H4t}get j0t(){return this.Nti.j0t}set j0t(t){this.Nti.j0t=t,this.Bti=!1}Gx(){const t=this.Nti.I7t();return t?S(this.ct)||t<0?0:this.ct-t:0}Xx(t,i){}Nd(){return this.Zb||NaN}F4(t){this.Zb=t}aP(){return this.oa.oP}uP(t){this.T7t(this.OP,t,!0)}fP(){return this.Cz}G9t(t){this.Cz=t}get B7t(){return this.Mti}set B7t(t){this.Mti=t}get nrt(){return this.y4t}get A7t(){return this.Lti}get L7t(){return this.Oti}set L7t(t){this.Oti=t}get S7t(){return this.Fti}set S7t(t){this.Fti=t}NP(){var t,i;return null!=(i=null==(t=this.Nti.d7t())?void 0:t.J7t)?i:0}LP(){var t,i;return null!=(i=null==(t=this.Nti.d7t())?void 0:t.Y7t)?i:0}Ox(){return[]}S4t(t){this.R6t=t,this.I6t.S4t(t)}h8t(){!this.Bti&&this.j0t&&(this.Nti.Tti(),this.Bti=!0)}w7t(t){this.V4t=t?t.h7t?"linear":"nonlinear":"none"}EP(){return Uo.rL()._s()}FP(){return this.oa.OP}UP(t){this.T7t(t,this.oP,!0)}o7t(){return this.oa.oP?0:this.oa.OP}T7t(t,i,e){const s=this.oa.OP!==t||this.oa.oP!==i;s&&(this.oa.OP=t,this.oa.oP=i),e&&this.Nti.UP(this.o7t()),s&&this.So(new Wi(this.zx,this.OP))}Kx(){return!1}Yx(){if(this.Uti&&this.y4t)return this.Uti}Zx(){if(this.Vti&&this.y4t)return this.Vti}TP(){return this.o5}a5(t){this.o5=t,this.So(new Ka(this.zx,t))}get O7t(){return this.Hti}set O7t(t){this.Hti=t}GP(){this.oa.mn(d.uo,this.Wti),this.ko||(this.ko=!0,this.I6t.GP(),this.N7t())}async QP(){if(this.qti)return;this.zti.Zg(),this.zti=new Zc;const t=this.lP;this.G9t(!1),this.So(new vt(this.zx)),this.Nti.xti()||(this.E7t||this.oa.we(),this.So(new SP(this.zx))),this.B7t||(this.L7t=!1);const i=Boolean(this.j0t);this.qti=this.I6t.W6t();try{await this.qti}finally{this.qti=void 0}try{fr(this.zti.Yg)}catch(t){return}if(this.ko||this.Wti(),!this.Uti||!this.y4t)if(this.j0t){if(t)if(i)try{fr(this.zti.Yg),this.Nti.kti(),this.So(new mo(this.zx))}catch(t){return}else this.h8t()}else this.y4t||(this.I3t(),this.A4t.QP())}jP(){this.lP||(this.G9t(!0),this.So(new Si(this.zx))),this.zti.Zg(),this.B7t?this.Nti.jP():this.L7t=!0}uD(){this.Nti.uD()}y7t(){this.j0t&&(this.Nti.y7t(),this.V4t="none",this.Bti=!1)}async KP(){var t;this.C7t=0,this.I6t.hr(),this.zti.Zg(),this.G9t(!0),this.Lti=!1,this.Fti=!1,this.B7t=!1,this.X6t.hr(),this.y7t(),this.f7t(),null==(t=this.Sti)||t.hr(),this.L7t=!1,this.Ati.zg()}be(){this.bti.be(),this.E7t&&this.oa.be()}we(){this.bti.we()}Gti(){return Boolean(this.j0t)&&Ct(this.j0t.Xti(),-1)&&!this.Lti}s6t(){this.I6t.s6t()}d8t(){return this.I6t.d8t}x6t(){this.I6t.x6t()}l8t(){return this.I6t.l8t()}l4t(t){if(this.Gti()){if(t.type===d.jw&&this.oa.Qx)return!0;if(t.type===d.Nw)return this.Lti=!0,this.Ati.Pti(),!0}return!1}async r8t(t){try{this.y7t();const i=this.jti();await this.Nti.r8t(t,i),this.Bti=!1,this.Qti(this.j0t)}catch(t){this.Kti.i7t(t)}}Qti(t){if(t.UP(this.o7t()),this.I6t.G6t===x3.U6t){const i=t.Xti();if(i.length)for(const t of i)this.X6t.c5t(t,this.I6t.P6t);else this.X6t.c5t(this.I6t.P6t.dd,this.I6t.P6t)}this.Kti.hr(),this.Kti.B9t(t)}zP(){if(this.j0t&&this.E7t&&this.Nti.xti())return this.oa.zP()}qP(){return this.E7t&&this.w4t?this.oa.Ma:super.qP()}jti(){const t=!!(this.I6t.G6t===x3.U6t)&&this.Rti;let i,e;void 0!==this.GJ.ads.googleIma.uiElements?i=this.GJ.ads.googleIma.uiElements:this.GJ.ads.showCountdown||(i=[]),void 0!==this.GJ.ads.allowedMimeTypes&&(e=this.GJ.ads.allowedMimeTypes);return{Yti:e,Jti:i,Zti:t,z9:this.GJ.ads.googleIma.bitrate,$ti:void 0,tii:this.R6t}}N7t(){if(this.j0t){const t=this.jti();this.Nti.Eti(t)}}v5t(t){F3(t)||(this.Uti=new mu(Mi.ADVERTISEMENT_ERROR,t.Iy),this.Vti=new as(me.AD_ERROR,"There was a problem playing ads.",this.Uti)),this.u4t.So($h.f4t(t))}f7t(){this.w4t&&(this.oa.be(),this.I3t(),this.we())}U7t(){var t;if(this.oa.Gx()===1/0||0===this.oa.EP().length)return;(null==(t=this.I6t.P6t)?void 0:t.z5t)&&-1!==this.eii&&(this.oa.Xx(this.oa.Gx()+this.eii),this.eii=-1)}F7t(t){var i,e;this.eii=null!=(e=null==(i=t.v7t)?void 0:i.G0t)?e:-1}I3t(){super.I3t(),this.oa.be(),this.E7t&&!this.oa.Qx&&this.oa.QP()}F5t(){this.E7t||super.F5t()}async kn(){this.Kti.mn(hc.ma,this.sii),await super.kn(),this.y7t(),this.Nti.kn(),this.Ati.mn("nii",this.rii),this.Ati.zg(),this.bti.zg(),this.I6t.kn(),this.Kti.kn()}constructor(t,i,e,s,n,r,h){super(t,i),this.ko=!1,this.Sti=void 0,this.Cz=void 0,this.o5=void 0,this.Ati=void 0,this.bti=void 0,this.Dc=void 0,this.Zb=void 0,this.Lti=void 0,this.Fti=void 0,this.y4t=!1,this.Uti=void 0,this.Vti=void 0,this.I6t=void 0,this.Kti=void 0,this.eii=-1,this.H4t="none",this.GJ=void 0,this.qti=void 0,this.Hti=!1,this.X6t=void 0,this.Bti=!1,this.zti=new Zc,this.R6t=void 0,this.Mti=!1,this.Oti=!1,this.Nti=void 0,this.rii=t=>{this.u4t.So(t)},this.sii=t=>{this.Uti=new mu(Mi.ADVERTISEMENT_ERROR,"Error while recovering from failed IMA ad.",t.error.message),this.Vti=$k(this.Uti)},this.C7t=NaN,this.Wti=()=>{this.ko||this.GP()},this.GJ=e,this.Cz=!0,this.Zb=NaN,this.o5=Lr.zL,this.Lti=!1,this.Fti=!1,this.X6t=new J3(this.u4t,this),this.Kti=new O3(this,this.oa,this.X6t),this.Kti.wn(hc.ma,this.sii),this.oa.wn(d.uo,this.Wti),this.I6t=new P3(this,this.oa,this.A4t,s,this.X6t),this.Sti=h,this.Ati=r,this.bti=n,this.Nti=new $3(n,h,r),this.we(),this.Ati.wn("nii",this.rii)}};r();var i4=class{registerWebImaAdPlayerConstructor(t){this.hii=t}createAdPlayer(t,i,e){return e4()&&this.hii?this.hii(t,i,e):void 0}constructor(){this.hii=void 0}};function e4(){if(Boolean(s.google&&s.google.ima)){return!(1===w.keys(s.google.ima).length&&Boolean(s.google.ima.dai))}return!1}i4.Bg=new i4;var s4=class{get i4t(){return t4.r4t}Qz(t){return t&&t.integration===FC.GOOGLE_IMA}e4t(t,i,e){return i4.Bg.createAdPlayer(t,i,e)}W6(t,i,e,s){e.Cti(t,i,s)}uj(t){const i=x1(t.sources);if(!i)return;const e={integration:FC.GOOGLE_IMA,sources:i,omidAccessModeRules:L3(t.omidAccessModeRules)},s=I1(t.timeOffset);return void 0!==s&&(e.timeOffset=s),e}};va.Bg.Kz(new s4),r(),r(),r(),r();var n4=class extends Oi{xa(){return new r4}constructor(){super("m1t")}},r4=class extends gp{constructor(){super("adloaded")}},fl=-1,h4=class{get K0t(){return this.y1t}get oii(){return this.aii}get Put(){return this.Xp}get uii(){return this.Z5t}get cii(){return this.dii}get dd(){if(S(this.lii)){const t=iu.a$t(this.Z5t,this.$0t.t.Nd());void 0===t||S(t)||(this.lii=t)}return this.lii}fii(){return this.Xp<this.y1t.length}Rc(){let t;return this.Xp<this.y1t.length&&(t=this.y1t[this.Xp],this.Xp++),t}vii(t){t.OZt=this,this.y1t.push(t)}async _ii(t){let i=!1;for(const e of this.y1t)try{await e.Un(),i=!0}catch(i){0,_e(this.y1t,e);const s=e.irt.sources,n="string"==typeof s?s:s.src;t.So($h.v4t(i,n))}return this.dii=!0,i}s1t(){this.e1t=!0}i1t(){return this.e1t}gii(){return this.y1t.some(t=>h2(t).some(t=>t.iYt))}constructor(t,i){this.y1t=void 0,this.Z5t=void 0,this.aii=void 0,this.e1t=void 0,this.Xp=void 0,this.$0t=void 0,this.lii=void 0,this.dii=void 0,this.y1t=[],this.e1t=!1,this.Z5t=t,this.Xp=0,this.$0t=i,this.lii=NaN,this.dii=!1,this.aii=new c2(this,this.$0t)}},o4=class t extends je{get pii(){let t=0;for(const i of this.mii)i.i1t()||(t+=1);return t}wii(){this.bii.yii()}Tn(){this.No(),this.Aii.wn("Znt",this.bii.Sii)}An(){this.Ro(),this.Aii.mn("Znt",this.bii.Sii),this.C4=this.HO,this.bii.hr();for(const t of this.mii)t.s1t();Wt(this.mii)}No(){this.Tii||(this.oa.wn(d.py,this.kii),this.Tii=!0)}Ro(){this.Tii&&(this.oa.mn(d.py,this.kii),this.Tii=!1)}get Unt(){return this.mii}Eii(){return this.xii(new B(fl,void 0))}Pii(t){return this.Iii(t,0,0).length>0}Cii(t,i){let e,s=0;for(const n of this.mii){if(n.i1t())continue;const r=n.dd;r>=t&&r<=i&&r>=s&&!S(r)&&(e=n,s=e.dd)}return e}Rii(t){return this.xii(new B(t,void 0))}Dii(){if(!this.Nii&&void 0!==this.R6t){this.Nii=!this.mii.some(t=>S(t.dd));for(const t of this.mii)t.dd!==fl&&t.dd<=this.R6t&&!t.i1t()&&t.s1t()}}Bii(t){for(const i of t)i.s1t();this.k5t.Mii(t),0===this.pii&&this.Ro()}Iii(t,i,e){return this.mii.filter(s=>{if(s.i1t())return!1;const n=s.dd;return this.Lii(n,t)||this.Oii(n,t,i,e)})}Lii(t,i){switch(i){case 0:return 0===t;case fl:return t===fl;default:return!1}}Oii(t,i,e,s){if(t<0)return!1;const n=t-i;return-1!==n&&n<=e&&n>=-s}Fii(i){if(i&&i.length>0){for(const e of i){const i=t.E6t(e.qOt);let s=this.Igt(e);-1===s&&(this.Nii=void 0===this.R6t,this.mii.push(new h4(i,this.Uii)),s=this.mii.length-1);this.mii[s].vii(e)}this.No()}}static E6t(t){switch(t){case"start":case"00:00:00":case"00:00:00.000":case"0%":case"0":return"0";case"end":case"100%":return"-1";default:return t}}Igt(i){const e=t.E6t(i.qOt);return tt(this.mii,i=>e===t.E6t(i.uii))}Vii(t){_e(this.mii,t)}S4t(t){this.R6t=t,this.Nii=void 0===t}constructor(t,i,e,s){super(),this.mii=void 0,this.oa=void 0,this.Uii=void 0,this.HO=void 0,this.Aii=void 0,this.C4=void 0,this.k5t=void 0,this.bii=void 0,this.Tii=void 0,this.R6t=void 0,this.Nii=!1,this.kii=t=>Wr(this.xii(t)),this.xii=async t=>{this.Dii();const i=t.currentTime,e=t.currentTime!==fl?this.Cii(this.C4,t.currentTime):this.Iii(t.currentTime,0,0)[0];let s,n;const r=this.oa.Nd()-10;if(n=this.Pii(fl)&&_.ceil(i)===_.ceil(r)?this.Iii(fl,10,0).filter(t=>!t.cii):this.Iii(i,10,0).filter(t=>!t.cii),n.length){const t=(await Promise.all(n.map(t=>t._ii(this.Aii)))).some(t=>!0===t);t&&this.So(new n4),(!t||!this.bii.Hii||n[0].dd<this.bii.Hii.dd)&&(s=n[0])}e&&(e!==this.bii.Hii&&(s=e),this.Bii([e])),s&&(this.bii.Sii(),this.bii.Hii=s,await this.bii.yii()),S(this.oa.Nd())||(this.C4=t.currentTime)},this.oa=t,this.k5t=i,this.Uii=new u2(this.k5t,this.oa),this.R6t=void 0,this.Nii=!1,t.Nd()!==1/0?this.HO=0:this.HO=t.Gx(),this.C4=this.HO,this.mii=[],this.Aii=e,this.bii=s,this.Tii=!1}};r(),r();var a4=class extends je{get Wii(){return this.A2t}get u4t(){return this.R5t}qii(){this.zii(),this.Gii(),this.nq=void 0}Xii(t){this.jii=this.jii.concat(t)}Qii(t){this.Kii=this.Kii.concat(t)}Gii(){this.jii=[]}zii(){this.Kii=[]}Yii(t){for(const i of this.jii)i.oX===t&&qn(i.eventURL)}be(){this.Wii.style.display=""}we(){this.Wii.style.display="none"}kn(){this.Vo(),this.R5t.Vo(),Ao(this.A2t)}constructor(t,i){super(),this.A2t=void 0,this.Kii=[],this.jii=[],this.nq=void 0,this.Jii=void 0,this.Zii=void 0,this.R5t=new je,this.$ii=t=>{t.stopPropagation(),this.tei()},this.tei=()=>{for(const t of this.Kii)for(const i of t.$Yt)qn(i.uri)},this.A2t=h.createElement("div"),this.A2t.style.display="none",this.Jii=t,this.Zii=i}};function u4(t,i){let e=i;if(!function(t){return"ui"in t}(t))return e;const s=t.ui.language;let n;if(Q(s)){const i=t.ui.languages;if(!i)return e;n=i[s]}else n=s;return n&&n[i]&&(e=n[i]),e}r(),r();var c4={[Hi.vC]:1,[Hi._C]:2,[Hi.gC]:2};function d4(t,i){const e=i?i.map(t=>t.toLowerCase()):i;return Xn(t.filter(t=>{const i=t.type.toLowerCase();return!!hi(e)&&-1!==e.indexOf(i)&&d1(i)}),(t,i)=>c4[t.type]-c4[i.type]).map(l4)}function l4(t){return ue({src:t.contentURL,type:t.type,isAdvertisement:!0})}function f4(t,i){return OV(v4(t),v4(i))}function v4(t){return{Mi:t.height,Ti:t.width}}function _4(t,i,e,s){const n=function(t,i,e,s){let n,r=1/0;const h=t.filter(t=>!d1(t.type)).filter(t=>void 0===s||-1!==s.indexOf(t.type));if(h.length){for(const t of h){const s=(_.abs(t.width/i-1)+_.abs(t.height/e-1))/2;s<r&&(r=s,n=t)}return n||h.sort(f4)[0]}}(t.AJt,i.width,i.height,e),r=d4(t.AJt,e);if(n){const t=l4(n);t&&r.push(t)}var h;r.length>0&&(t.PJt=null==(h=r[0].src)?void 0:h.trim());return ra({sources:r},s)}var g4=class extends a4{get iei(){return this.eei}get zx(){return this.sei.zx}get ct(){let t=this.sei.ct;return S(t)&&this.pJt&&(t=this.pJt.ct||0),t}get Qx(){return this.sei.Qx}get oP(){return this.sei.oP}set oP(t){this.sei.oP=t,t?this.Yii(gl.BJt):this.Yii(gl.MJt)}get lP(){return this.sei.lP}get AP(){return this.sei.AP}get OP(){return this.sei.OP}set OP(t){this.sei.OP=t}get DP(){return this.sei.DP}get MP(){return this.sei.MP}get nei(){return this.rei}QP(){this.sei.lP&&(this.sei.QP(),this.So(new vt(this.zx)),this.eei&&this.Yii(gl.LJt),this.eei=!0)}jP(){this.sei.lP||(this.sei.jP(),this.So(new Si(this.zx)),this.Yii(gl.jw))}async KP(){var t;null==(t=this.hT)||t.Zg(),this.hT=void 0,this.we(),this.eei=!1,this.hei=!0,this.oei(),this.aei(),await this.uei()}cei(t){void 0===t&&(t=!0),this.eei=!1,t&&this.Yii(gl.jJt),this.we(),this.Zii()}dei(){var t;const i=null==(t=this.k5t.Na)?void 0:t.gi,e=new x2(this.sc,i);return this.Wii.appendChild(e.xe),e.wn("uD",this.lei),e}fei(){this.pJt&&this.pJt.lJt.KYt&&(this.T2t=new A2(this.Wii),this.T2t.O1t=this.pJt.lJt.KYt,this.T2t.wn("clickstart",this.vei),this.T2t.wn("click",this.tei))}_ei(t,i){for(const e of this.jii)if(e.oX===gl.Qw){const s=s1(e.ac,i);void 0!==s&&this.C4<s&&s<=t&&qn(e.eventURL)}}async gei(){if(!this.pJt||!this.pei)return;const t=_4(this.pJt,this.pei,this.ZS.ads.allowedMimeTypes,this.ZS);if(!t.sources.length)return await this.sei.hr(),this.Jii(""),void this.pJt.SYt();this.hT=new Zc,this.hei=!0,await Cu(this.sei.Ta(t,this.hT.Yg),this.hT),this.sei.be(),this.pJt.SYt(),this.fei()}async mei(t,i,e){this.rei=t,this.pJt=t.iYt,this.sei.wn(d.py,this.wei),this.sei.wn(d.Cw,this.yei),this.sei.wn(d.wy,this.bei),this.sei.wn(Ii,this.Rs),this.pJt.aYt&&0!==this.pJt.aYt.length&&this.Xii(this.pJt.aYt),this.pJt.lJt&&this.Qii(this.pJt.lJt),this.nq=i,this.pei=e,0!==this.pJt.AJt.length&&(this.sei.wn(hc.ma,this.Aei),await this.gei(),this.sei.wn(d.Nw,this.Sei),this.sei.wn(d.py,this.Tei),this.sei.wn(Jr.PM,this.kei),this.sei.wn(d.Jw,this.Rs))}G$t(){this.iei&&this.Eei&&this.lei()}get Eei(){return this.pJt&&-1!==this.pJt.kJt&&this.sei.zx>=this.pJt.kJt}xei(){this.Yii(gl.tTt),this.rei&&this.u4t.So(new nc(this.rei,this.zx))}async uei(){this.sei.mn(hc.ma,this.Aei),this.sei.mn(d.Nw,this.Sei),this.sei.mn(d.py,this.Tei),this.sei.mn(Jr.PM,this.Rs),this.sei.mn(Jr.PM,this.kei),this.sei.mn(d.Jw,this.Rs),this.sei.mn(d.py,this.wei),this.sei.mn(d.Cw,this.yei),this.sei.mn(d.wy,this.bei),this.sei.mn(Ii,this.Rs),this.rei&&(this.rei.s1t(),this.u4t.So(new fc(this.rei,this.zx))),this.Pei(),this.qii(),this.oei(),this.aei(),this.rei=void 0,this.pJt=void 0,this.pei=void 0,await this.sei.hr(),this.sei.we(),this.Wii.style.cursor="",this.Iei=0,this.C4=-1,this.Cei&&(this.Rei.uei(),this.Cei=!1)}Pei(){this.T2t&&(this.T2t.zg(),this.T2t=void 0)}aei(){this.Dei&&(Ao(this.Dei),this.Dei=void 0)}oei(){this.x2t&&(this.x2t.kn(),this.x2t=void 0)}Nei(){this.Cei=!0}Bei(){var t;this.Dei||(this.Dei=h.createElement("div"),this.Dei.className="theoplayer-ad-overlay-component theo-ad-remaining-container",this.Wii.appendChild(this.Dei));const i=null==(t=this.rei)?void 0:t.od;if(!i)return;const e=i.Jc.filter(_2);let s=u4(this.ZS,"The content will play in")+" "+_.round(i.X0t)+" "+u4(this.ZS,"seconds");if(e.length>1){const t=e.filter(t=>t.i1t()).length;s+=". "+u4(this.ZS,"Ad")+" "+(t+1)+"/"+e.length}Nr(this.Dei,s)}constructor(t,i,e,s,n,r,h){super(t,i),this.Rei=void 0,this.ZS=void 0,this.k5t=void 0,this.sc=void 0,this.sei=void 0,this.rei=void 0,this.pJt=void 0,this.pei=void 0,this.eei=void 0,this.Iei=void 0,this.C4=void 0,this.Cei=void 0,this.Dei=void 0,this.x2t=void 0,this.T2t=void 0,this.hT=void 0,this.hei=void 0,this.Sei=void 0,this.kei=void 0,this.Tei=void 0,this.Aei=void 0,this.wei=void 0,this.yei=void 0,this.bei=void 0,this.vei=void 0,this.lei=void 0,this.Rei=e,this.ZS=s,this.k5t=n,this.sc=r,this.sei=h,this.eei=!1,this.Iei=0,this.C4=-1,this.hT=new Zc,this.hei=!0,this.Sei=()=>{this.cei()},this.kei=()=>{this.hT=void 0,this.eei||(this.xei(),this.eei=!0),this.hei&&(this.hei=!1,this.k5t.wii()),this.Wii.style.display="block",this.sei.mn(Jr.PM,this.kei),this.eei=!0},this.Tei=()=>{const t=this.zx,i=this.ct,e=t/i;(0===this.Iei&&e>=.25?(this.Yii(gl.zJt),this.Iei=1):1===this.Iei&&e>=.5?(this.Yii(gl.XJt),this.Iei=2):2===this.Iei&&e>=.75&&(this.Yii(gl.GJt),this.Iei=3),this._ei(t,i),this.Bei(),this.C4=t,this.pJt)&&(-1!==this.pJt.kJt&&this.pJt.kJt<this.pJt.ct&&(null!=this.x2t||(this.x2t=this.dei()),this.zx<this.pJt.kJt?this.x2t.z1t(this.pJt.kJt-this.zx):this.x2t.X1t()))},this.Aei=()=>{var t,i;this.hT=void 0,this.sei.mn(hc.ma,this.Aei),this.hei=!0,null==(t=this.nq)||t.bZt(Hr.gZt),this.eei=!1,this.sei.we();const e=(null==(i=this.sei.bt)?void 0:i.src)||"";this.Jii(e)},this.wei=()=>{this.Rs(new B(this.zx,void 0))},this.yei=()=>{this.Rs(new zr(this.ct))},this.bei=()=>{this.Rs(new Wi(this.zx,this.OP))},this.vei=()=>{this.k5t.jP()},this.lei=()=>{this.rei&&(this.Yii(gl.FJt),this.u4t.So(new gu(this.rei,this.zx/this.ct)),this.cei(!1))},this.Wii.className="theoplayer-ad-linear",this.Wii.style.zIndex="10",Go(this.Wii),this.sei.we(),this.Cei=!1}};r(),r();var p4=class t extends Ne{get xe(){return this.Ls}j1t(){this.xe.addEventListener("mouseup",this.Q1t),this.xe.addEventListener("touchend",this.Q1t),this.xe.addEventListener("mousedown",this.Mei)}G1t(){this.xe.removeEventListener("mouseup",this.Q1t),this.xe.removeEventListener("touchend",this.Q1t),this.xe.removeEventListener("mousedown",this.Mei)}static yr(){const t=h.createElement("div");return t.className="theoplayer-ad-nonlinear-close",t.style.position="absolute",t.style.right="0",t.style.top="0",t.style.cursor="pointer",t.style.fontSize="1.7em",t.style.lineHeight="0.75em",t}kn(){this.G1t(),Ao(this.Ls)}constructor(){super(),this.Ls=void 0,this.Q1t=t=>{this.So(new gp("uD")),this.Mei(t)},this.Mei=t=>{t.stopPropagation()},this.Ls=t.yr(),this.j1t()}},m4=class extends a4{get Lei(){return this.Oei}get Fei(){return this.yu}qii(){super.qii(),this.Wii&&no(this.Wii)}async mei(t,i,e){this.c1t&&this.uei(),this.Oei=t,this.c1t=t.eYt,0!==this.c1t.aYt.length&&this.Xii(this.c1t.aYt),this.nq=i,0!==this.c1t.hYt.length&&(this.Qii(this.c1t.hYt[0].gYt),this.Wii.addEventListener("error",this.Uei),this.Wii.addEventListener("load",this.Vei),await this.gei(),this.Hei())}G$t(){var t;if(void 0!==this.Wei)return;const i=null==(t=this.c1t)?void 0:t.hYt[0];i&&i.od&&-1!==i.od.kJt&&(this.Yii(gl.FJt),this.u4t.So(new gu(this.Oei,0)),this.qei())}xei(){void 0!==this.Oei&&this.u4t.So(new nc(this.Oei,this.k5t.zx))}KP(){this.uei(),this.Oei=void 0,this.c1t=void 0}uei(){this.zei(),void 0!==this.Oei&&(this.Oei.s1t(),this.u4t.So(new fc(this.Oei,this.k5t.zx))),this.qii(),this.Gei(),void 0!==this.Wei&&(c(this.Wei),this.Wei=void 0)}zei(){this.Wii.removeEventListener("load",this.Vei),this.Wii.removeEventListener("error",this.Uei)}async gei(){const t=h.createElement("div");t.className="theoplayer-ad-nonlinear-content",t.style.position="relative",t.style.display="inline-block";const i=this.c1t.hYt[0],e=h.createElement("a");if(i.gYt.KYt&&(e.href=i.gYt.KYt,e.target="Xu",e.setAttribute("rel","noopener")),i.lYt){const t=i.lYt,s=h.createElement("iframe");s.src=t.cZt,e.appendChild(s)}else if(i.cYt){const t=i.cYt,s=h.createElement("img");s.src=t.cZt,e.appendChild(s)}else if(i.vYt){const t=i.vYt,s=h.createElement("iframe");s.src=t.cZt,e.appendChild(s)}i.SYt(),e.addEventListener("mousedown",this.$ii),e.addEventListener("touchend",this.$ii),this.Wii.firstChild&&(no(this.Wii),this.uei()),t.appendChild(e),this.Wii.appendChild(t),this.be()}Hei(){var t;if(!this.c1t)return;const i=null==(t=this.c1t.hYt[0].od)?void 0:t.kJt;void 0!==i&&-1!==i&&(this.Wei=s.setTimeout(this.Xei,1e3*i))}Gei(){this.yu&&(this.yu.mn("uD",this.jei),this.yu.kn()),this.yu=void 0}get Qei(){return this.k5t.Kei()}constructor(t,i,e){super(t,i),this.Oei=void 0,this.c1t=void 0,this.k5t=void 0,this.yu=void 0,this.Wei=void 0,this.Vei=()=>{this.zei(),this.Yii(gl.ZJt),this.Zii()},this.Uei=t=>{var i,e;this.zei(),null==(i=this.nq)||i.bZt(Hr.mZt);const s=null==(e=this.c1t)?void 0:e.hYt[0];var n,r;const h=null!=(r=null!=(n=null==s?void 0:s.lYt)?n:null==s?void 0:s.cYt)?r:null==s?void 0:s.vYt;var o;this.Jii(null!=(o=null==h?void 0:h.cZt)?o:"")},this.qei=()=>{this.we(),no(this.Wii),this.Zii(),this.Oei=void 0,this.c1t=void 0},this.Xei=()=>{this.yu||(this.Wei=void 0,this.yu=new p4,this.Wii.children[0].appendChild(this.yu.xe),this.yu.wn("uD",this.jei))},this.jei=()=>{this.Yii(gl.FJt),this.G$t()},this.Wii.className="theoplayer-ad-nonlinear",this.Wii.style.position="absolute",this.Wii.style.width="100%",this.Wii.style.bottom="3em",this.Wii.style.zIndex="10",this.Wii.style.textAlign="center",this.k5t=e}};r();var w4=class{static async Yei(t,i,e){let s=[],n=t.shift();const r=[];for(;n;){try{const t=await(new _1).CZt(n,i);s=s.concat(t)}catch(t){0;const i=$h.v4t(t,n.sources.src);e.So(i),r.push(i.Jy)}n=t.shift()}return[s,r]}};r(),r(),r();var Kr=class extends Oi{xa(){return new y4}constructor(){super("zot")}},y4=class extends gp{constructor(){super("statechange")}};r();var Li=function(t){return t.IDLE="idle",t.LOADING="loading",t.DONE="done",t.ERROR="error",t.EVICTED="evicted",t}({});r(),r();var b4=class{get ec(){return this.nc}get V(){return this.nc.length}get Ca(){return this.hu||(this.hu=this.xa()),this.hu}MI(t){return this.nc[t]}gO(t){this.nc.push(t),this.hu&&this.hu.push(t.Ca),this.Jei(t)}Zei(t){for(const i of t)this.gO(i)}$ei(t,i){i>=0&&i<=this.nc.length&&(this.nc.splice(i,0,t),this.hu&&this.hu.splice(i,0,t.Ca),this.Jei(t))}pO(t){return Ct(this.nc,t)}pS(t){this.tsi(this.nc.indexOf(t))}tsi(t){if(!(t>=0&&t<this.nc.length))return;const i=this.nc[t];Ra(this.nc,t),this.hu&&Ra(this.hu,t),this.isi(i)}jy(){const t=this.nc.slice();Wt(this.nc),this.hu&&Wt(this.hu);for(const i of t)this.isi(i)}constructor(){this.nc=[],this.hu=void 0}},A4=class extends b4{xa(){return function(t){const i=function(t){const i=t.ec.map(t=>t.Ca);return i.item=i=>{const e=0|i,s=t.MI(e);return s&&s.Ca||void 0},i}(t),e=new le(t,i);return i.addEventListener=(t,i)=>{e.wn(t,i)},i.removeEventListener=(t,i)=>{e.mn(t,i)},i}(this)}wn(t,i){this.esi.wn(t,i)}lw(t){this.esi.lw(t)}Vo(){this.esi.Vo()}So(t){this.esi.So(t)}mn(t,i){this.esi.mn(t,i)}pw(t){this.esi.pw(t)}mw(t){this.esi.mw(t)}ww(t,i){return this.esi.ww(t,i)}constructor(...t){super(...t),this.esi=new je,this.Rs=t=>{this.So(t)}}};r();var S4=class extends gp{constructor(t){super("addtask"),this.task=void 0,this.task=t}},T4=class extends Oi{xa(){return new S4(this.ssi.Ca)}constructor(t){super("nsi"),this.ssi=void 0,this.ssi=t}};r();var k4=class extends gp{constructor(t){super("removetask"),this.task=void 0,this.task=t}},E4=class extends Oi{xa(){return new k4(this.task.Ca)}constructor(t){super("rsi"),this.task=void 0,this.task=t}},x4=class extends A4{Jei(t){this.So(new T4(t))}isi(t){this.So(new E4(t))}constructor(){super()}},P4=class extends Ne{async GP(){await this.hsi(),this.$ot("initialised")}async hsi(){try{await this.osi()}catch(t){0}}async osi(){const t=await this.cTt.Sxt();for(const i of t){const t=this.usi.asi(i.id,i.sourceDescription,i.parameters,this.dsi);this.lsi(t),this.oT.gO(t),await t.fsi}}get dk(){return this.Zot}$ot(t){this.Zot=t,this.So(new Kr)}get vsi(){return this.oT}asi(t,i,e){void 0===e&&(e="persistent");const s=this.usi._si(t,i,e);return this.gsi(s,e),this.oT.gO(s),this.lsi(s),s}async gsi(t,i){try{await this.psi(t,i)}catch(t){throw m("Unable to persist task - "+t)}}async psi(t,i){await this.cTt.uTt({key:t.o,id:t.o,sourceDescription:t.Mc,parameters:t.LS},i)}lsi(t){t.wn("zot",()=>{t.dk===Li.EVICTED&&this.oT.pS(t)})}constructor(t,i,e){super(),this.Zot="uninitialised",this.oT=new x4,this.cTt=void 0,this.dsi=void 0,this.usi=void 0,this.usi=i,this.dsi=e,this.cTt=t,this.GP()}};r(),r(),r(),r();var qe=class{get eL(){return this.msi}get wsi(){return this.ysi}get bsi(){return this.Asi.eL}get Ssi(){let t=0,i=0;return this._O.forEach(e=>{t+=e.timeRanges.eL,i+=e.totalQualityDurationToCache}),0===i?0:_.min(1,t/i)}get Asi(){return this.Tsi}QO(t){return!!Gr(this._O,t._O)&&(!!Jl(this.ysi,t.ysi)&&(!!Jl(this.eL,t.eL)&&(!!Jl(this.bsi,t.bsi)&&this.Asi.KM(t.Asi))))}constructor(t,i,e){if(this.ysi=void 0,this._O=void 0,this.msi=void 0,this.Tsi=void 0,this.ysi=t,this._O=i,this.msi=e,0===this._O.size)this.Tsi=Uo.rL();else{let t=new Uo([-1/0,1/0]);this._O.forEach(i=>{t=t.Mn(i.timeRanges)}),this.Tsi=t}}};qe.QUALITY_TIME_RANGES_NULL_OBJECT=Ba(),qe.CACHE_PROGRESSION_NULL_OBJECT=new qe(0,qe.QUALITY_TIME_RANGES_NULL_OBJECT,NaN),qe.ksi=qe.CACHE_PROGRESSION_NULL_OBJECT,r(),r(),r(),r();var I4=class extends gp{constructor(){super("progress")}},C4=class extends Oi{xa(){return new I4}constructor(){super("Q4t")}};r(),r();var Ch=class extends Qr{get name(){return"Esi"}constructor(t,i){super(t,i)}};r(),r(),r();var R4=function(t){return t[t.vC=0]="vC",t[t._C=1]="_C",t}({});async function D4(t,i,e){const s=[];for(const n of t.dmt)s.push(N4(n,i,e));return{qmt:await Promise.all(s)}}async function N4(t,i,e){const s=[];for(const n of t.jlt)B4(n)||s.push(O4(n,i,e));return{Z:await Promise.all(s),Km:t.Km}}function B4(t){return t.xat.every(L4)}var M4=1;function L4(t){return t.Awt!==M4&&Boolean(t.Awt)}async function O4(t,i,e){const s=[];for(const i of t.xat)L4(i)||s.push(F4(i,e));const n=await Promise.all(s),r=t.Rrt[0],h=t.NW,o=h?function(t,i){const e=[],s=function(t){return t?nl(t,"avc")?Vy:nl(t,"hev")||nl(t,"hvc")||nl(t,"hvt")||nl(t,"lhv")||nl(t,"lhe")||nl(t,"lht")?Hy:nl(t,"mp4")?Wy:nl(t,"mpeg2")?zy:nl(t,"mpeg")?qy:Xy:Xy}(t);for(const t of i){const i=t.x8.split(":").pop(),n=t.P8;e.push({mimeType:s,uuid:i,data:n})}const n=R4.vC,r=Ng;return{type:n,schemeType:r,schemeDatas:e}}(r,h):void 0,a=LG(t,i,!0);return{$I:n,bs:t.Tit,Km:t.Km,fq:o,Wpt:a}}async function F4(t,i){const e={stack:[],error:void 0,hasError:!1};try{const r=Es(e,new Zc,!1),h=await async function(t,i,e){const s=[],n=t.mht;t.Ydt&&s.push({CO:0,ct:0,xsi:t.Ydt});const r=n.jyt();let h=r;for(;h;){if(t.qct(h)){const n=await t.Gct(h,i,e);for(let i=0;i<n.V;i++)s.push(U4(n.jct(i),t))}else s.push(U4(h,t));h=n.Kct(h)}const o=n.Jyt(),a=o.RO-r.CO;return{ct:a,bct:s}}(t,i,r.Yg),o={o:V4(t),AM:h,IW:t.IW,Bp:t.Bp,Mi:t.Mi,Km:t.Km,Ti:t.Ti};switch(t.Km){case at.LT:break;case at.Mk:var s,n;o.Olt=null!=(n=null==(s=t.Olt)?void 0:s.rF())?n:NaN;break;case at.Bk:o.audioSamplingRate=t.mwt}return o}catch(t){e.error=t,e.hasError=!0}finally{Zs(e)}}function U4(t,i){return{CO:t.CO,ct:t.ct,xsi:i.Zct(t)}}function V4(t){return t.Oct.Tn+"-"+(""+t.o)}function H4(t,i){const e=function(t){const i=function(t){const i=Ba();for(const e of t){let t=i.get(e.oLt);t||(t={Km:e.Km,$D:[]},i.set(e.oLt,t)),t.$D.push(e)}return i}(t),e=re();return i.forEach(t=>{for(const i of t.$D){let s=e.get(t.Km);s||(s=Ba(),e.set(t.Km,s));let n=s.get(i.l);n||(n=[],s.set(i.l,n)),n.push(i)}}),e}(t);return function(t,i){const e=re();return t.forEach((t,s)=>{const n=Ba();t.forEach((t,e)=>{const r=[];for(const e of t){const t=W4(e,s,i);r.push(t)}n.set(e,r)}),e.set(s,n)}),e}(e,i)}function W4(t,i,e){const s=t.oLt,n={fLt:t,_Vt:[]};for(const t of e)$J(i,s,t)&&n._Vt.push(t);return n}async function q4(t,i){const e=await i.KSt([t],{});return kJ(e.wk,{},e.JSt)}async function z4(t,i){return WY(t)?async function(t,i){const e=H4(t.$D,t.XOt),s=await async function(t,i){const e=[],s=t.entries();for(let t=s.next();!t.done;t=s.next()){const[s,n]=t.value,r=await j4(n,s,i);e.push(r)}return e}(e,i),n=await async function(t,i){const e=[];for(const o of t){var s,n;const t=await J4(o.Syt,i);var r,h;t.IW=o.IW,t.Bp=o.Rrt?X4(o.Rrt):"",t.Mi=null!=(r=null==(s=o.RRt)?void 0:s.Mi)?r:0,t.Ti=null!=(h=null==(n=o.RRt)?void 0:n.Ti)?h:0,e.push(t)}return{Km:at.yk,Z:[{bs:PH,Km:at.yk,$I:e}]}}(t.XOt,i);return s.push(n),{ct:G4(s),Psi:[t.Syt],Amt:[{qmt:s}]}}(t,i):function(t){const i=Z4(t);return{ct:i.ct,Psi:[t.Syt],Amt:[{qmt:[{Km:at.yk,Z:[{Km:at.yk,bs:PH,$I:[{o:t.Syt,AM:i,IW:0,Bp:"",Mi:0,Km:at.yk,Ti:0}]}]}]}]}}(t)}function G4(t){let i=-1/0;for(const e of t)for(const t of e.Z)i=_.max(i,...t.$I.map(t=>t.AM.ct));return i}function X4(t){return[t.q9,t.W9,t.fOt].filter(it).join(",")}async function j4(t,i,e){const s=[],n=t.entries();for(let t=n.next();!t.done;t=n.next()){const[,i]=t.value,n=await Q4(i,e);s.push(n)}return{Km:K4(i),Z:s}}async function Q4(t,i){const e=[],s=t[0].fLt;for(const s of t){const t=await Y4(s,i);e.push(t)}return{bs:s.bs||PH,Km:K4(s.Km),$I:e}}function K4(t){switch(t){case dl.Bk:return at.Bk;case dl.Mk:return at.Mk;case dl.HU:case dl.YLt:return at.LT;default:return at.yk}}function Y4(t,i){const e=function(t){const i=t.fLt.Syt,e=t._Vt.map(t=>t.Syt);return i||(e.length?e[0]:void 0)}(t);return J4(e,i)}async function J4(t,i){let e={ct:0,bct:[]};if(t){const s=await q4(t,i);qY(s)&&(e=Z4(s))}return{o:t||"default",Isi:t,AM:e,IW:0,Bp:"",Mi:0,Km:at.yk,Ti:0}}function Z4(t){const i=[];let e,s=0;for(const n of t.bct){const t=s;!n.YOt||void 0!==e&&XY(n.YOt.Syt,e)||(i.push($4(n.YOt,t)),e=n.YOt.Syt),i.push(t5(n,t)),s+=n.ct}return{ct:s,bct:i}}function $4(t,i){return{CO:i,ct:0,xsi:i5(t.Syt)}}function t5(t,i){return{CO:i,ct:t.ct,xsi:i5(t.Syt)}}function i5(t){return{Yu:t.XE,Wat:t.iAt?[t.iAt.Tn,t.iAt.Tn+t.iAt.V]:void 0,Xk:!1}}r(),r();var e5=class{async Csi(t){if(!t.src)throw new m("Invalid typed source");const i=t.type;if(gk(i))return await this.Rsi(t);if(tu(i))return await this.Dsi(t);throw new m("Unexpected source type")}async Rsi(t){try{const i=await q4(t.src,this.YSt);return await z4(i,this.YSt)}catch(t){throw new m("Unable to fetch HLS manifest")}}async Dsi(t){try{const i=new eG({rC:zd.Dh(t.src),ISt:t.liveOffset,BSt:t.timeServer,Xk:t.useCredentials},this.Nsi,yA.Zk,this.YSt,t.dash);return await i.W,await async function(t,i,e){const s=[];for(const n of t.Amt)s.push(D4(n,i,e));const n=await Promise.all(s);return{ct:t.dyt.Qmt(),Psi:[t.ySt],Amt:n}}(i.Br.jdt,t.contentProtection,this.Jct)}catch(t){throw new m("Unable to fetch DASH manifest")}}constructor(t,i,e){this.YSt=void 0,this.Jct=void 0,this.Nsi=void 0,this.YSt=t,this.Jct=i,this.Nsi=e}};r();var s5=class{Bsi(){const t=new Ga;return this.Msi.push(t),this.Lsi(),t.Yy}async Osi(t,i){try{await t}finally{this.Fsi-=1,this.Lsi(),0===this.Msi.length&&0===this.Fsi&&i.Qy(!0)}}Lsi(){if(this.Msi.length>0&&this.Fsi<this.Usi){this.Msi.shift().Qy(),this.Fsi+=1}}constructor(t){this.Usi=void 0,this.Msi=[],this.Fsi=0,this.Usi=t}};var n5=class extends Ne{get fsi(){return this.GP()}async GP(){const t=new e5(this.YSt,this.Jct,this.Nsi);this.URt=await t.Csi(this.Vsi);const i=function(t,i){if(Q(t)){if(nl(t,"%"))return C(t)/100*i;throw new m("Unexpected - Invalid string supplied as amount to cache.")}return i<t?i:t}(this.dTt.LS.amount,this.URt.ct);let e;this.msi=i;const s=mG(this.URt.Psi[0]),n=(await this.Dxt.Nxt.kxt(s,"manifestURL")).filter(t=>Ct(t.references,this.dTt.o)),r=[],h=this.dTt.LS.bandwidth;for(const t of this.URt.Amt)for(const i of t.qmt)for(const t of h5(i,this.dTt.LS.preferredTrackSelection))for(const i of a5(t.$I,h))r.push(i);this.Hsi=_.ceil(r.map(t=>t.IW*function(t,i){let e=0;for(const s of t.AM.bct.map(t=>t.ct))if(e+=s,e>=i)return e;return e}(t,i)/8).reduce((t,i)=>t+i,0));const o=Ba();if(n&&0!==n.length){const t=n.reduce((t,i)=>t+i.byteSize,0);for(const t of n){const i=t.qualityId,e=new Uo(t.startsAndEnds);if(o.has(i))o.get(i).timeRanges=o.get(i).timeRanges.HM(e).VM(5e-4);else{const t=hh(r,t=>t.o===i);var a;const s=_.min(this.msi,null!=(a=null==t?void 0:t.AM.ct)?a:1/0);o.set(i,{timeRanges:e,totalQualityDurationToCache:s})}}e=new qe(t,o,this.msi)}else{for(const t of r)o.set(t.o,{timeRanges:Uo.rL(),totalQualityDurationToCache:_.min(t.AM.ct,this.msi)});e=new qe(0,o,this.msi)}this.Wsi=e}get qsi(){return this.Hsi}get Wsi(){return this.zsi}set Wsi(t){this.zsi.QO(t)||(this.zsi=t,t.QO(qe.ksi)||this.So(new C4))}async mi(t){await this.ko,await this.Gsi(this.URt,t)}async Gsi(t,i){if(!t.Psi)throw new m("Unexpected - manifest is missing locations");await this.Xsi();const e=[];for(const s of t.Amt)e.push(this.jsi(s,t.Psi[0],i));return pr(e)}async Xsi(){const t=await this.Qsi.Sxt();for(const i of t){const t=await this.Dxt.Bxt.zy(i.key);if(t)await r5(t,this.dTt.o,this.Dxt.Bxt,this.dsi);else try{await this.Dxt.Bxt.uTt(i,this.dsi)}catch(t){throw new Ch("Unable to store manifest with url: "+i.locationURL,t)}}await this.Qsi.xxt()}jsi(t,i,e){const s=[];for(const n of t.qmt){const t=h5(n,this.dTt.LS.preferredTrackSelection);for(const n of t)s.push(this.Ksi(n,i,e))}return pr(s)}async Ksi(t,i,e){const s=this.dTt.LS.bandwidth,n=a5(t.$I,s);t.Km===at.Mk&&t.Wpt&&t.Wpt.lH.widevine&&"persistent"===t.Wpt.lH.widevine.licenseType&&(await this.Ysi(t.Wpt),fr(e));const r=[];for(const t of n)r.push(this.Jsi(t,i,e));return pr(r)}async Jsi(t,i,e){fr(e);const s=t.AM.bct[0].CO+this.msi,n=[];let r=!1;for(const h of t.AM.bct){if(h.CO>=s||this.stopIfFailed(r))break;await this.Zsi(e),await this.$si.Bsi(),n.push(this.$si.Osi(this.tni(h,t,i),this.ini).catch(t=>(r=!0,Promise.reject(t))))}return pr(n)}async Zsi(t){if(null==t?void 0:t.Hg)throw await this.ini.Yy,new Qc}async eni(){return await this.ko.catch(gs),this.URt}Ysi(t){return Promise.resolve()}sni(){return zd.um("License renewal unsupported in this SDK."),Promise.resolve()}async tni(t,i,e){const s=this.Dxt.Nxt,n=Rt(t.xsi.Yu,t.xsi.Wat),r=await s.zy(n);if(r)await r5(r,this.dTt.o,s,this.dsi),this.nni(r,!1);else try{const s=await this.rni(t.xsi),{segmentMetadataEntry:n,segmentEntry:r}=this.hni(t,i,e,s);await this.Dxt.Rxt(async t=>{await t.Nxt.uTt(n,this.dsi),await t.bct.uTt(r,this.dsi)}),this.nni(n,!0)}catch(i){throw new Ch("Unable to store segment with url: "+t.xsi.Yu,i)}}async rni(t){const i=await this.$ut.Lat(t,{zat:this.DEFAULT_CACHING_SEGMENT_TIMEOUT,qk:this.DEFAULT_CACHING_SEGMENT_CONNECTION_TIMEOUT});return await this.tct(i)}async tct(t){return{buffer:await t.qT()}}hni(t,i,e,s){const n=Rt(t.xsi.Yu,t.xsi.Wat),r=t.CO,h=t.ct,o=this.oni(s);return{segmentMetadataEntry:{key:n,segmentURLsegmentByteRange:n,manifestURL:mG(e),qualityId:i.o,byteSize:o,startsAndEnds:new Uo([r,r+h]).IM,references:[this.dTt.o]},segmentEntry:{key:n,segmentURLsegmentByteRange:n,manifestURL:mG(e),data:s,references:[this.dTt.o]}}}oni(t){return t.buffer.byteLength}nni(t,i){const e=t.qualityId,s=this.zsi,n=s._O;n.get(e).timeRanges=n.get(e).timeRanges.HM(new Uo(t.startsAndEnds)).VM(5e-4),this.Wsi=new qe(i?s.wsi+t.byteSize:s.wsi,n,this.msi)}stopIfFailed(t){return!1}constructor(t,i,e,s,n,r,h,o){super(),this.DEFAULT_CACHING_SEGMENT_TIMEOUT=3e4,this.DEFAULT_CACHING_SEGMENT_CONNECTION_TIMEOUT=0,this.dTt=void 0,this.Dxt=void 0,this.dsi=void 0,this.URt=void 0,this.$si=void 0,this.ini=new Ga,this.Vsi=void 0,this.Qsi=void 0,this.YSt=void 0,this.$ut=void 0,this.Jct=void 0,this.Nsi=void 0,this.ko=void 0,this.msi=void 0,this.Hsi=void 0,this.zsi=qe.ksi,this.dTt=t,this.Dxt=i,this.YSt=e,this.Qsi=s,this.$ut=n,this.Jct=r,this.Nsi=o,this.dsi=h,this.Hsi=-1;const a=this.dTt.Mc.sources[0];this.Vsi=a,this.ko=this.GP(),this.$si=new s5(this.dTt.LS.parallelTasksThreshold)}};async function r5(t,i,e,s){Ct(t.references,i)||(t.references.push(i),await e.uTt(t,s))}function h5(t,i){switch(t.Km){case at.Bk:return o5(t.Z,i.audioTrackSelection);case at.LT:return o5(t.Z,i.textTrackSelection);default:return o5(t.Z,[])}}function o5(t,i){if(0===i.length)return t.length?[t[0]]:[];const e=[];for(const s of t)i.indexOf(s.bs)>-1&&e.push(s);return e}function a5(t,i){if(!t.length)return[];const e=[...t].sort(FV),s=e.filter(t=>t.IW<=i);return s.length>0?[s.pop()]:[e.shift()]}var u5=class{async ani(){await this.Dxt.Rxt(async t=>{await this.uni(t),await this.cni(t),await this.dni(t),await this.lni(t)})}async uni(t){const i=t.Mxt,e=this.dTt.o;await i.pS(e)}async cni(t){const i=t.Nxt,e=t.bct,s=this.dTt.Mc.sources[0];if(!ei(s))return;const n=mG(s.src),r=(await i.kxt(n,"manifestURL")).filter(t=>Ct(t.references,this.dTt.o));for(const t of r)_e(t.references,this.dTt.o),0===t.references.length?(await i.pS(t.key),await e.pS(t.key)):await i.uTt(t)}async dni(t){const i=t.Bxt,e=this.fni(),s=(await i._xt(e)).filter(t=>Ct(t.references,this.dTt.o));for(const t of s)_e(t.references,this.dTt.o),0===t.references.length?await i.pS(t.key):await i.uTt(t)}fni(){if(!this.URt)return[];const t=this.dTt.Mc.sources[0];if(!ei(t))return[];const i=mG(t.src),e=function(t){if(!t)return[];const i=[];for(const e of t.Amt)for(const t of e.qmt)for(const e of t.Z)for(const t of e.$I)t.Isi&&i.push(t.Isi);return function(t){return t.reduce((t,i)=>(t.indexOf(i)<0&&t.push(i),t),[])}(i)}(this.URt).map(t=>({src:t})).map(t=>mG(t.src));return[i,...e]}async lni(t){const i=t.Lxt,e=(await i.Sxt()).filter(t=>Ct(t.references,this.dTt.o));for(const t of e)_e(t.references,this.dTt.o),0===t.references.length?(await i.pS(t.key),this.vni(t)):await i.uTt(t)}vni(t){}constructor(t,i,e){this.dTt=void 0,this.Dxt=void 0,this.URt=void 0,this.dTt=t,this.Dxt=i,this.URt=e}},c5=new class{jet(t,i,e){return new u5(t,i,e)}};r(),r();var d5=class{get Ca(){return this.hu||(this.hu=function(t){return{renew(i){t._ni(i)}}}(this)),this.hu}_ni(t){this.gni(t)}async gni(t){try{await this.pni.sni(t)}catch(t){0,this.wE.$ot(Li.ERROR)}}constructor(t,i){this.wE=void 0,this.pni=void 0,this.hu=void 0,this.wE=t,this.pni=i}},l5=class extends je{get fsi(){return this.pni.fsi}get Ca(){return this.hu||(this.hu=function(t){let i;const e={get id(){return t.o},get status(){return t.dk},get source(){return t.Mc},get parameters(){return t.LS},get duration(){return t.ct},get cached(){return t.mni._s()},get secondsCached(){return t.wni},get percentageCached(){return t.yni},get bytes(){return t.bni},get bytesCached(){return t.Ani},get license(){return t.pQ.Ca},start(){t.Tn()},pause(){t.jP()},remove(){t.pS()},addEventListener(t,e){i.wn(t,e)},removeEventListener(t,e){i.mn(t,e)}};return i=new hN(t,["Q4t","zot"],e),e}(this)),this.hu}get o(){return this.aS}get pQ(){return this.Sni}get dk(){return this.Zot}$ot(t){this.Zot!==t&&(this.Zot=t,this.So(new Kr))}get Mc(){return this.Ac}get LS(){return this.Tni}get ct(){return this.pni.Wsi.eL}get mni(){return this.pni.Wsi.Asi}get wni(){return this.pni.Wsi.bsi}get yni(){return this.pni.Wsi.Ssi}get bni(){return this.pni.qsi}get Ani(){return this.pni.Wsi.wsi}Tn(){this.Zot===Li.EVICTED||this.Zot===Li.DONE||this.kni()}async kni(){try{this.$ot(Li.LOADING);const t=new Zc;this.Eni=t,await this.pni.mi(t.Yg),this.$ot(Li.DONE)}catch(t){Ce(t)?this.$ot(Li.IDLE):this.$ot(Li.ERROR)}finally{this.Eni.zg()}}jP(){this.Eni.Zg()}pS(){this.dk===Li.LOADING?(this.wn("zot",this.evictOnLoading),this.jP()):this.xni()}async xni(){try{const t=await this.pni.eni();await c5.jet(this,this.Dxt,t).ani(),this.pni.Wsi=qe.ksi,this.$ot(Li.EVICTED)}catch(t){0,this.$ot(Li.ERROR)}}constructor(t,i,e,s,n,r){super(),this.aS=void 0,this.Zot=void 0,this.hu=void 0,this.Ac=void 0,this.Tni=void 0,this.Dxt=void 0,this.pni=void 0,this.Eni=new Zc,this.Sni=void 0,this.evictOnLoading=()=>{this.mn("zot",this.evictOnLoading),this.xni()},this.aS=t,this.Ac=i,this.Tni=e,this.Dxt=s,this.pni=n.jet(this,this.Dxt,r),this.Sni=new d5(this,this.pni),this.Zot=1===this.pni.Wsi.Ssi?Li.DONE:Li.IDLE,this.pni.wn("Q4t",t=>{this.Rs(t),1===this.yni&&this.$ot(Li.DONE)});const h=new Date,o=this.Tni.expirationDate.getTime()-h.getTime();(function(t){return t<2147483647})(o)&&u(()=>this.xni(),o)}};var f5=class{_si(t,i,e){const s=Ve();return this.asi(s,t,i,e)}asi(t,i,e,s){return new l5(t,i,e,this.Dxt,this.Pni,s)}constructor(t,i){this.Dxt=void 0,this.Pni=void 0,this.Dxt=t,this.Pni=i}};r();function v5(t){if(!t)throw new m("Unexpected - The cache parameters are undefined");const i=function(t){if(Q(t)&&!nl(t,"%"))return x(t);return t}(t.amount);!function(t){if(function(t){return Q(t)&&nl(t,"%")}(t)){const i=C(t);if(S(i)||i<0||i>100)throw new m("The amount as percentage must be between 0 and 100 percent.")}if(!Q(t)&&S(t))throw new m("The amount must be a number or a string")}(i);const e=function(t){if(!t)return function(){const t=new Date;return t.setMinutes(t.getMinutes()+30),t}();return t}(t.expirationDate);!function(t){if(t&&!function(t){return!t||Xd(t)&&t>new Date}(t))throw new m("Invalid expiration date for the cache parameters")}(e);const s=function(t){if(void 0===t)return 1/0;return t}(t.bandwidth);!function(t){if(S(t)||t<0)throw new m("The bandwidth must be between zero and infinity.")}(s);const n=function(t){if(!t)return 5;if(S(t))throw new m("The amount must be a number");return t}(t.numberOfParallelTasks);return{amount:i,expirationDate:e,bandwidth:s,parallelTasksThreshold:n,preferredTrackSelection:{audioTrackSelection:[],textTrackSelection:[]}}}var _5=class{set Hii(t){this.Ini=t,this.Cni=0,this.Rni=0,this.Dni=void 0}get Hii(){return this.Ini}o8t(){if(!this.Ini)return;const t=this.Ini.K0t;for(;this.Cni<t.length;){const i=t[this.Cni];for(void 0===this.Dni&&(this.Dni=h2(i),this.Rni=0);this.Rni<this.Dni.length;){const t=this.Dni[this.Rni];if(this.Rni++,void 0!==t.iYt)return t.iYt}this.Cni++,this.Dni=void 0}}hr(){for(this.Hii=void 0,this.hT.Zg(),this.hT=new Zc;this.Nni.length;)this.Sii()}Bni(t){return new P4(this.Dxt.Mxt,t,"temporary")}async tXt(t){const i=d4(t.AJt,this.GJ.ads.allowedMimeTypes);if(!i.length)return;const e=await _C.Bg.gz(i,ra({sources:i}));if(!e.t.$q())return;this.pni||(this.pni=new this.Pni(this.aV));const s=this.Dxt,n=new f5(s,this.pni),r=this.Bni(n).asi(ra({sources:e.Mc}),v5({amount:10,bandwidth:sc.Bg.pW()||this.Mz.jY}),"temporary");this.Nni.push(r);const h=this.pni.jet(r,s,"temporary");this.hT.Zg(),this.hT=new Zc,Cu(h.mi(this.hT.Yg),this.hT).then(gs),this.Mni(h,t)}constructor(t,i,e,s){this.Dxt=void 0,this.pni=void 0,this.Ini=void 0,this.GJ=void 0,this.Nni=[],this.Cni=0,this.Rni=0,this.Dni=void 0,this.hT=void 0,this.aV=void 0,this.Pni=void 0,this.Mz=void 0,this.yii=async()=>{const t=this.o8t();t&&await this.tXt(t)},this.Sii=()=>{const t=this.Nni.shift();null==t||t.pS()},this.Mni=async(t,i)=>{let e=!1;for(;!e;)await t.ww("Q4t"),e=1===t.Wsi.Ssi;i.ct<5&&this.yii()},this.GJ=t,this.aV=i,this.hT=new Zc,this.Pni=e,this.Mz=s,this.Dxt=new kc}};r(),r();var g5={key:"",segmentURLsegmentByteRange:"",manifestURL:"",qualityId:"",byteSize:0,startsAndEnds:new Uo([0,0]).IM,references:[]},p5={key:"",segmentURLsegmentByteRange:"",manifestURL:"",data:""},m5=class t extends GV{async gdt(t,i,e,s){try{return await super.gdt(t,i,e,s)}catch(t){sa(t)}const n=await this.Lni.gdt(t,i,e,s);return await this.Oni(t,i,n),n}async Oni(i,e,s){if(void 0===this.Fni)return;const n=this.Dxt.Nxt,r=Rt(i,e),h=await n.zy(r);if(h)await r5(h,this.Fni,n,this.dsi);else try{const i={buffer:s},{segmentMetadataEntry:e,segmentEntry:n}=t.hni(r,i,this.Fni);await this.Dxt.Rxt(async t=>{await t.Nxt.uTt(e,this.dsi),await t.bct.uTt(n,this.dsi)})}catch(t){throw new Ch("Unable to store segment with url: "+i,t)}}static hni(t,i,e){return{segmentMetadataEntry:Y({},g5,{key:t,segmentURLsegmentByteRange:t,references:[e]}),segmentEntry:Y({},p5,{key:t,segmentURLsegmentByteRange:t,data:i,references:[e]})}}constructor(t,i,e,s,n){super(t),this.Lni=void 0,this.Fni=void 0,this.Dxt=void 0,this.dsi=void 0,this.Lni=new zV(i),this.Dxt=e,this.Fni=s,this.dsi=n}};var w5=class{jet(t,i,e){void 0===e&&(e="persistent");const s=t.Mc.sources[0];if(wk(s))throw new m("Caching THEOlive sources is not supported");const n=Boolean(s.useCredentials),r=new $U(this.aV,$a.yk),h=new pG(this.aV,n),o=new rX(i.Bxt,i.Nxt,i.bct,i.Lxt),a=function(t,i,e,s,n){return new m5(i,t,e,s,n)}(this.aV,o,i,t.o,e),u=new xn,c=new SG(AG(h,o),u,t);return this.Uni(t,i,c,u,r,a,e)}constructor(t,i=DU()){this.aV=void 0,this.Nsi=void 0,this.aV=t,this.Nsi=i}},Uc=class extends w5{Uni(t,i,e,s,n,r,h){return new n5(t,i,e,s,n,r,h,this.Nsi)}},y5=Uc,b5=class t extends A3{get o4t(){return this}static get r4t(){return we.f1t}get r4t(){return t.r4t}Cti(t,i,e){i===Hu.Bnt&&this.d9?Wr(this.r8t([t])):this.Vni.push(t)}Gx(){return this.Hni.iei?this.Hni.zx:this.nnt()}Xx(t,i){}Nd(){return this.Hni.ct}Kx(){return this.Hni.Qx}Yx(){}Zx(){}aP(){return this.Hni.oP}uP(t){this.oP!==t&&(this.Hni.oP=t,this.So(new Wi(this.zx,this.OP)))}fP(){return this.Hni.lP}TP(){return this.Hni.AP}EP(){return Uo.rL()._s()}NP(){return this.Hni.DP}LP(){return this.Hni.MP}FP(){return this.Hni.OP}UP(t){this.OP!==t&&(this.Hni.OP=t,this.So(new Wi(this.zx,this.OP)))}async QP(){if(this.Wni)return;this.So(new vt(this.zx)),this.qni(),this.Vni.length&&(this.Wni=this.r8t(this.Vni),await this.Wni,this.Wni=void 0),await this.zni.Rii(this.oa.Gx());const t=this.Gni;4!==t&&1!==t&&5!==t||(!this.w1t&&this.Xni.length?this.jni():this.w1t?(this.Qni=!0,this.Hni.QP()):(this.I3t(),this.oa.QP()),this.Gni=3)}jP(){3===this.Gni&&(this.Hni.jP(),this.Gni=4)}wii(){this.zni.wii()}Tn(){this.Gni=1,this.zni.Tn()}async KP(){this.zni&&(this.zni.An(),this.Kni(!1),this.Rei.KP(),this.Gni=5,this.w1t&&(this.zni.Vii(this.w1t.OZt),this.w1t=void 0)),this.d9=!1,this.Qni=!1,Wt(this.Xni),this.w4t&&(this.I3t(),this.oa.be()),Wt(this.Vni),await this.Hni.KP(),await this.sei.hr()}uD(){this.Hni.G$t(),this.Rei.G$t()}Hnt(t){this.Cd.ads.allowSkipAdBreak&&(this.Yni=!0,this.Jni=t,this.uD())}GP(){this.sei.GP(),this.qni()}l4t(t){return!(t.type!==d.Nw||!this.zni||!this.zni.Pii(-1))&&(this.zni.Eii().then(gs),!0)}be(){void 0!==this.Hni.nei&&(this.sei.be(),this.Hni.be()),void 0!==this.Rei.Lei&&this.Rei.be()}we(){this.sei.we(),this.Hni.we(),this.Rei.we()}async r8t(t){const[i,e]=await w4.Yei(t,this.aV,this.u4t);if(i.length)this.zni.Fii(i),this.u4t.So(new vU),this.w4t||this.oa.lP||await this.zni.Rii(this.oa.Gx()),0!==this.Gni&&5!==this.Gni||this.Tn();else{if(0===e.length||e.some(t=>t!==xs.VAST_EMPTY_RESPONSE&&t!==xs.VAST_NO_ADS_AFTER_WRAPPER)){const t="Ads could not be loaded.";this.u4t.So($h.v4t(new ys($c.ADBLOCK,xs.FILE_NOT_FOUND),t))}this.d9&&!this.w1t&&0===this.Xni.length&&this.Zni()}}Mii(t){for(const i of t)Ct(this.Xni,i)||this.Xni.push(i);for(const i of t)this.d9&&!this.w4t&&this.jni()}async jni(){if(2!==this.Gni&&!this.$ni){0,this.$ni=!0,this.Gni=2;const t=this.w1t;this.tri(),this.w1t?(await this.w1t.OZt._ii(this.u4t),this.iri()||(this.$ni=!1),this.u4t.So(new f3(this.eri(this.w1t))),await this.sri()):((null==t?void 0:t.OZt.gii())&&this.u4t.So(new Za(this.eri(t))),this.$ni=!1,this.Gni=1,this.Zni())}}Zni(){this.I3t(),this.oa.be(),this.oa.Qx?this.oa.So(new ur(this.oa.Gx())):this.oa.QP()}tri(){let t;if(this.w1t&&this.iri())t=this.w1t.OZt;else{if(0===this.Xni.length)return;t=this.Xni.shift()}if(!t)return;const i=t.Rc();i?this.w1t=i:(this.w1t&&(this.zni.Vii(this.w1t.OZt),this.w1t=void 0),this.w1t=void 0)}async sri(){const t=this.w1t?function(t){var i,e;const s=null==(e=t.d$t)||null==(i=e.UKt)?void 0:i.VKt();return void 0===s?void 0:new r2(s)}(this.w1t):void 0;if(t){if(!this.w1t)return;this.rri=t,this.hri(this.w1t.aYt),this.ari(gl.rZt);const i=this.rri.Rc();this.w1t.OZt.gii()&&(this.Rei.uei(),1===this.w1t.OZt.Put&&this.u4t.So(new Ta(this.eri(this.w1t)))),await this.mei(i)}else this.Gni=1,this.$ni=!1,this.w1t=void 0,this.jni()}async mei(t){if(t){var i;let s=it(t.iYt),n=it(t.nYt);var e;const r=null!=(e=null==(i=t.sYt)?void 0:i.PYt)?e:[],h=r.length>0,o=this.w1t,a=this.eri(o);if(t.iYt){if(t.iYt.od=o,void 0!==o.irt.skipOffset){const i=iu.a$t(o.irt.skipOffset,t.iYt.ct);void 0!==i&&i<t.iYt.ct&&(t.iYt.kJt=i)}const i=a.Y0t(t.iYt,r,t.rYt,o.irt);this.Rei.uei(),this.D5t(),await this.Hni.mei(i,t.lt,{width:this.oa.xe.offsetWidth,height:this.oa.xe.offsetHeight}),s=!0}if(t.nYt){const i=t.nYt.hYt[0];if(i.od=o,void 0!==o.irt.skipOffset){const t=iu.a$t(o.irt.skipOffset,this.oa.Nd());t&&(i.od.kJt=t)}const e=s?[]:r,h=a.J0t(i,e,t.nYt,t.rYt,o.irt);s&&this.Hni.Nei(),await this.Rei.mei(h,t.lt,{width:this.oa.xe.offsetWidth,height:this.oa.xe.offsetHeight}),n=!0}if(s){this.Gni=3,this.Hni.be();const t=0===a.qOt;this.Qni=t,this.sei.jP(),this.Hni.QP(),this.oa.jP(),this.oa.we(),this.D5t(),this.Hni.xei()}n&&(this.Gni=3,this.Rei.be(),this.Rei.xei()),(s||n||h)&&this.cri(t.ZKt),s||n||await this.dri(),!s&&n&&(this.iri()||this.Xni.length>0?this.jni():(this.Zni(),this.w1t=o))}else null===t?await this.dri():this.Kni(!0)}dri(){const t=this.rri;return this.mei(t&&t.Rc())}Kni(t){this.ari(gl.hZt),this.lri(),this.Gni=1;const i=void 0!==this.w1t&&this.w1t.OZt.fii();if(this.$ni=!1,!i||this.Yni){if(!this.w4t)return;this.oa.be(),!this.oa.Qx&&t&&this.oa.QP(),void 0!==this.Jni&&this.oa.Xx(this.Jni),this.I3t(),this.Yni=!1,this.Jni=void 0}else t&&(this.Gni=1,this.jni())}I3t(){this.fri(),super.I3t()}fri(){if(this.oa.Qx&&(this.Gni=5),this.w1t){const t=this.w1t.OZt;t.gii()&&this.u4t.So(new Za(this.eri(this.w1t))),this.zni.Vii(t),this.w1t=void 0}}hri(t){this.vri=this.vri.concat(t)}lri(){this.vri=[]}_ri(t){this.oa.xe.appendChild(t)}ari(t){for(const i of this.vri)i.oX===t&&qn(i.eventURL)}cri(t){this.Hni.Yii(gl.ZJt);for(const i of t)qn(i)}get Fnt(){return this.w1t?this.eri(this.w1t):null}get Lnt(){return this.w1t?[this.Hni.nei,this.Rei.Lei].filter(it):[]}get Unt(){const t=this.Xni.concat(this.zni.Unt.filter(t=>!t.i1t()));return hs(t,t=>t.oii.Jc.filter(t=>!t.i1t()))}get Vnt(){return this.zni.Unt.map(t=>t.oii)}qnt(t){const i=this.Dti();for(const e of i)P0(e.sources,e.timeOffset)||t.W6(e,Hu.Bnt,!1)}Dti(){const t=[];for(const i of this.Lnt.concat(this.Unt))t.push(i.irt);const i=this.Xni.concat(this.zni.Unt.filter(t=>!t.i1t()));for(const e of i)for(const i of e.K0t)i.W||t.push(i.irt);return t.push(...this.Vni),Cc(t)}iri(){return!!this.w1t&&h2(this.w1t).some(t=>t.iYt)}eri(t){return t.OZt.oii}Kei(){return this.gri}zP(){return this.sei.zP()}Ox(){return this.sei.Ox()}S4t(t){this.zni.S4t(t)}async kn(){await super.kn(),this.oa.mn(d.uo,this.qni),this.u4t.LK(this.Hni.u4t),this.u4t.LK(this.Rei.u4t),this.u4t.LK(this.zni),this.Hni.kn(),this.Rei.kn(),await this.sei.kn()}constructor(t,i,e,s,n,r){super(t,i),this.Wni=void 0,this.Hni=void 0,this.Rei=void 0,this.zni=void 0,this.Xni=[],this.Gni=0,this.w1t=void 0,this.rri=void 0,this.vri=[],this.gri=void 0,this.$ni=!1,this.d9=!1,this.Qni=!0,this.sei=void 0,this.Yni=!1,this.Jni=void 0,this.Vni=[],this.aV=void 0,this.pri=t=>{t.type===d.uo&&this.Qni?this.Qni=!1:this.So(t)},this.qni=()=>{this.d9=!0},this.wri=async()=>(this.Gni=1,await this.Hni.uei(),this.mei(this.rri.Rc())),this.yri=async t=>{const i=new ys($c.PLAYBACK,xs.GENERAL_LINEAR_ERROR,"There was a problem playing a linear ad.");return this.u4t.So($h.v4t(i,t)),await this.Hni.uei(),this.mei(this.rri.Rc())},this.bri=()=>(this.Rei.uei(),this.mei(this.rri.Rc())),this.Ari=t=>{const i=new ys($c.PLAYBACK,xs.GENERAL_NON_LINEAR_ERROR,"There was a problem playing a non linear ad.");return this.u4t.So($h.v4t(i,t)),this.Rei.uei(),this.mei(this.rri.Rc())},this.aV=r,this.sei=e,this.Rei=new m4(this.Ari,this.bri,this),this.Hni=new g4(this.yri,this.wri,this.Rei,s,this,t.Wu,e),this._ri(this.Rei.Wii),this._ri(this.Hni.Wii);const h=new _5(s,r,Uc,n);this.zni=new o4(this.oa,this,this.u4t,h),this.Hni.lw(this.pri),this.Rei.lw(this.Rs),this.u4t.au(this.Hni.u4t),this.u4t.au(this.Rei.u4t),this.u4t.au(this.zni),this.gri=new u2(this,this.oa),this.Wu.wn(Qh.yn,this.Rs),this.oa.wn(d.uo,this.qni)}};va.Bg.Kz(new class{get i4t(){return b5.r4t}Qz(t){return t&&("string"!=typeof t.integration||t.integration===FC.DEFAULT||t.integration===FC.CSAI||t.integration===FC.THEO)}e4t(t,i,e){const s=new Dr(t.tnt,t.Ql,e);s.Est(t.xe);const n=new SC(t.xe,e,t.Dx,t.Kst,t.VP,s,t.Ql);return new b5(t,i,n,e,t.Kst,t.Dx)}W6(t,i,e,s){e.Cti(t,i,s)}uj(t){const i=x1(t.sources);if(!i)return;const e={integration:FC.CSAI,sources:i};"vast"===e.sources.type&&void 0===t.timeOffset?t.timeOffset=0:"vmap"===e.sources.type&&void 0!==t.timeOffset&&uh("Do not set timeOffset for VMAP ad sources. VMAP ads have their own offsets included.");const s=I1(t.timeOffset);void 0!==s&&(e.timeOffset=s);const n=I1(t.skipOffset);return void 0!==n&&(e.skipOffset=n),e}}),r(),r();var A5=class{GY(){var t;this.i8||(null==(t=this.bti)||t.initialize(),this.i8=!0)}get Wii(){return this.A2t}get Sri(){return this.Tri.offsetHeight}get kri(){return this.Tri.offsetWidth}get Eri(){return this.bti}xri(t){"linear"===t?this.A2t.style.marginTop="0px":"nonlinear"===t&&(this.A2t.style.marginTop="-45px")}be(){this.A2t.style.opacity="1",this.A2t.style.pointerEvents=""}we(){this.A2t.style.opacity="0",this.A2t.style.pointerEvents="none"}zg(){var t;null==(t=this.bti)||t.destroy(),this.bti=void 0}constructor(t,i){this.bti=void 0,this.A2t=void 0,this.vet=void 0,this.Tri=void 0,this.i8=!1,this.vet=t;const e=h.createElement("div");e.className="theoplayer-ima-wrapper",Go(e),e.style.zIndex="10",zs.Ks&&function(t,i){t.addEventListener(i,Dl)}(e,"mousedown"),i.appendChild(e);const s=h.createElement("div");s.className="theoplayer-ima",s.style.height="100%",this.Tri=s,e.appendChild(s),this.A2t=e,this.bti=new google.ima.AdDisplayContainer(this.Tri,this.vet)}};r(),r(),r();var S5=class{get fJt(){return this.Pri.getAdId()}get v7t(){const t=this.Pri.getAdPodInfo();if(void 0!==t)try{return{I9t:t.getAdPosition(),G0t:t.getMaxDuration(),Iri:t.getPodIndex(),qOt:t.getTimeOffset(),C9t:t.getTotalAds(),Cri:t.getIsBumper()}}catch(t){return}}get QKt(){return this.Pri.getAdSystem()}get Rri(){return this.Pri.getAdvertiserName()}get FYt(){var t;return null!=(t=this.Pri.getApiFramework())?t:void 0}get sYt(){return this.IYt.map(t=>({VYt:t.getAdSlotId(),GT:t.getContentType(),G4t:t.getContent(),Mi:t.getHeight(),Ti:t.getWidth()}))}get GT(){var t;return null!=(t=this.Pri.getContentType())?t:void 0}get wYt(){return this.Pri.getCreativeId()}get eti(){return this.Pri.getCreativeAdId()}get Dri(){return this.Pri.getDealId()}get _N(){return this.Pri.getDescription()}get ct(){return this.Pri.getDuration()}get Ti(){return this.Pri.getWidth()}get Mi(){return this.Pri.getHeight()}get PJt(){var t;return null!=(t=this.Pri.getMediaUrl())?t:void 0}get Nri(){return this.Pri.getMinSuggestedDuration()}get tti(){return this.Pri.getSkipTimeOffset()}get Bri(){return this.Pri.getSurveyUrl()}get gq(){return this.Pri.getTitle()}get Z7t(){return this.Pri.getTraffickingParameters()}get $7t(){return this.Pri.getTraffickingParametersString()}get rYt(){return this.Pri.getUniversalAdIds().map(t=>({sti:t.getAdIdRegistry(),nti:t.getAdIdValue()}))}get Jti(){return this.Pri.getUiElements()}get iti(){return this.Pri.getVastMediaBitrate()}get J7t(){return this.Pri.getVastMediaHeight()}get Y7t(){return this.Pri.getVastMediaWidth()}get X7t(){return this.Pri.getWrapperAdIds()}get j7t(){return this.Pri.getWrapperAdSystems()}get Q7t(){return this.Pri.getWrapperCreativeIds()}get h7t(){return this.Pri.isLinear()}constructor(t){this.Pri=void 0,this.IYt=void 0,this.Pri=t;const i=new google.ima.CompanionAdSelectionSettings;i.resourceType=google.ima.CompanionAdSelectionSettings.ResourceType.ALL,i.creativeType=google.ima.CompanionAdSelectionSettings.CreativeType.ALL,i.sizeCriteria=google.ima.CompanionAdSelectionSettings.SizeCriteria.IGNORE,this.IYt=t.getCompanionAds(0,0,i)}};function T5(){return[google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,google.ima.AdEvent.Type.CLICK,google.ima.AdEvent.Type.DURATION_CHANGE,google.ima.AdEvent.Type.EXPANDED_CHANGED,google.ima.AdEvent.Type.STARTED,google.ima.AdEvent.Type.IMPRESSION,google.ima.AdEvent.Type.PAUSED,google.ima.AdEvent.Type.RESUMED,google.ima.AdEvent.Type.AD_PROGRESS,google.ima.AdEvent.Type.AD_BUFFERING,google.ima.AdEvent.Type.FIRST_QUARTILE,google.ima.AdEvent.Type.MIDPOINT,google.ima.AdEvent.Type.THIRD_QUARTILE,google.ima.AdEvent.Type.COMPLETE,google.ima.AdEvent.Type.USER_CLOSE,google.ima.AdEvent.Type.LINEAR_CHANGED,google.ima.AdEvent.Type.LOADED,google.ima.AdEvent.Type.AD_CAN_PLAY,google.ima.AdEvent.Type.AD_METADATA,google.ima.AdEvent.Type.AD_BREAK_READY,google.ima.AdEvent.Type.INTERACTION,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,google.ima.AdEvent.Type.SKIPPED,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,google.ima.AdEvent.Type.LOG,google.ima.AdEvent.Type.VIEWABLE_IMPRESSION,google.ima.AdEvent.Type.VOLUME_CHANGED,google.ima.AdEvent.Type.VOLUME_MUTED]}var k5=class extends Ne{UP(t){var i;null==(i=this.Q0t)||i.setVolume(t)}FP(){return this.Q0t.getVolume()}I7t(){return this.Q0t.getRemainingTime()}zg(){Wt(this.qc),this.sc.mn(Qh.yn,this.Mri),this.Q0t.removeEventListener(google.ima.AdEvent.Type.LOADED,this.Lri),this.Q0t.removeEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.forwardAdErrorEventListener);for(const t of T5())this.Q0t.removeEventListener(t,this.forwardAdEventListener);this.Q0t.destroy()}Tn(){this.Q0t.start()}kti(){this.Q0t.resume()}jP(){this.Q0t.pause()}uD(){this.Q0t.skip()}KP(){this.Q0t.stop()}d7t(){const t=this.Q0t.getCurrentAd();if(t)return this.Ori(t)}Xti(){return this.Q0t.getCuePoints()}Ori(t){let i=hh(this.qc,i=>i.Pri===t);return i||(i=new S5(t),this.qc.push(i)),i}Eti(t){this.Q0t.updateAdsRenderingSettings(I5(t))}constructor(t,i,e){super(),this.Q0t=void 0,this.bti=void 0,this.sc=void 0,this.qc=[],this.Lri=t=>{t.getAd().isLinear()?this.bti.xri("linear"):this.bti.xri("nonlinear")},this.Mri=()=>{this.Q0t.resize(this.bti.kri,this.bti.Sri,google.ima.ViewMode.NORMAL)},this.forwardAdEventListener=t=>{const i=t.getAd(),e=function(t){return{[google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED]:Nc.v8t,[google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED]:Nc._8t,[google.ima.AdEvent.Type.CLICK]:Nc.g8t,[google.ima.AdEvent.Type.DURATION_CHANGE]:Nc.Cw,[google.ima.AdEvent.Type.EXPANDED_CHANGED]:Nc.p8t,[google.ima.AdEvent.Type.STARTED]:Nc.m8t,[google.ima.AdEvent.Type.IMPRESSION]:Nc.w8t,[google.ima.AdEvent.Type.PAUSED]:Nc.Yz,[google.ima.AdEvent.Type.RESUMED]:Nc.y8t,[google.ima.AdEvent.Type.AD_PROGRESS]:Nc.b8t,[google.ima.AdEvent.Type.AD_BUFFERING]:Nc.A8t,[google.ima.AdEvent.Type.FIRST_QUARTILE]:Nc.S8t,[google.ima.AdEvent.Type.MIDPOINT]:Nc.XJt,[google.ima.AdEvent.Type.THIRD_QUARTILE]:Nc.T8t,[google.ima.AdEvent.Type.COMPLETE]:Nc.jJt,[google.ima.AdEvent.Type.USER_CLOSE]:Nc.k8t,[google.ima.AdEvent.Type.LINEAR_CHANGED]:Nc.E8t,[google.ima.AdEvent.Type.LOADED]:Nc.x8t,[google.ima.AdEvent.Type.AD_CAN_PLAY]:Nc.P8t,[google.ima.AdEvent.Type.AD_METADATA]:Nc.I8t,[google.ima.AdEvent.Type.AD_BREAK_READY]:Nc.C8t,[google.ima.AdEvent.Type.INTERACTION]:Nc.R8t,[google.ima.AdEvent.Type.ALL_ADS_COMPLETED]:Nc.D8t,[google.ima.AdEvent.Type.SKIPPED]:Nc.N8t,[google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED]:Nc.B8t,[google.ima.AdEvent.Type.LOG]:Nc.M8t,[google.ima.AdEvent.Type.VIEWABLE_IMPRESSION]:Nc.L8t,[google.ima.AdEvent.Type.VOLUME_CHANGED]:Nc.O8t,[google.ima.AdEvent.Type.VOLUME_MUTED]:Nc.F8t}[t]}(t.type),s={type:e,date:new Date,jnt:i?this.Ori(i):void 0,J9t:D3(e,t.getAdData())};this.So(s)},this.forwardAdErrorEventListener=t=>{this.So({date:new Date,jnt:void 0,type:I3.U8t,J9t:{D7t:M3(t.getError())}})},this.Q0t=t,this.bti=i,this.sc=e,this.sc.wn(Qh.yn,this.Mri),this.Q0t.init(this.bti.kri,this.bti.Sri,google.ima.ViewMode.NORMAL),this.Q0t.addEventListener(google.ima.AdEvent.Type.LOADED,this.Lri),this.Q0t.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.forwardAdErrorEventListener);for(const t of T5())this.Q0t.addEventListener(t,this.forwardAdEventListener)}};r();var E5=class extends Oi{get Fri(){return this.Uri}get Wii(){return this.A2t}xa(){return new x5(this.Uri)}constructor(t,i){super("nii"),this.Uri=void 0,this.A2t=void 0,this.Uri=t,this.A2t=i}},x5=class extends gp{get adsManager(){return this.Uri}constructor(t){super("adsmanagerloaded"),this.Uri=void 0,this.Uri=t}},P5=class extends Ne{Pti(){var t;null==(t=this.Ati)||t.contentComplete()}async r8t(t,i,e){if(this.Vri)throw new m("Only one ImaAdsRequest can be made at a time.");if(!this.Hri.Eri)throw new m("AdDisplayContainer is not initialized.");this.Ati=new google.ima.AdsLoader(this.Hri.Eri),this.Ati.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoadedListener),this.Ati.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdsManagerErrorListener),this.Vri=new Ga,this.Wri=i,this.qri=e;const s=new google.ima.AdsRequest;return t.w6t?s.adTagUrl=t.w6t:t.y6t&&(s.adsResponse=t.y6t),s.linearAdSlotWidth=t.f6t,s.linearAdSlotHeight=t.v6t,s.nonLinearAdSlotWidth=t._6t,s.nonLinearAdSlotHeight=t.g6t,s.contentDuration=t.A6t,s.setAdWillAutoPlay(t.p6t),s.setAdWillPlayMuted(t.m6t),t.b6t&&(s.omidAccessModeRules=t.b6t),this.Ati.requestAds(s),this.Vri.Yy}zg(){var t;void 0!==this.Ati&&(this.Ati.removeEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoadedListener),this.Ati.removeEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdsManagerErrorListener),this.Ati.destroy(),this.Ati=void 0),null==(t=this.Vri)||t.Ky("AdsLoader destroyed"),this.Vri=void 0}constructor(t,i){super(),this.Ati=void 0,this.sc=void 0,this.Hri=void 0,this.Vri=void 0,this.Wri=void 0,this.qri=void 0,this.onAdsManagerLoadedListener=t=>{if(this.Wri&&this.qri&&this.Vri){var i;const e=I5(this.qri),s=this.Wri,n=t.getAdsManager({get currentTime(){return s.zx},get duration(){return s.ct}},e),r=new k5(n,this.Hri,this.sc);this.So(new E5(n,this.Hri.Wii)),null==(i=this.Vri)||i.Qy(r),this.Vri=void 0}},this.onAdsManagerErrorListener=t=>{var i;const e={Iy:t.getError().getMessage(),R9t:t.getError().getVastErrorCode(),TZt:t.getError().getErrorCode(),Km:N3(t.getError().getType()),D9t:void 0};null==(i=this.Vri)||i.Ky(e),this.Vri=void 0},this.sc=i,this.Hri=t}};function I5(t){const i=new google.ima.AdsRenderingSettings;return i.enablePreloading=t.Zti,t.Jti&&(i.uiElements=t.Jti),i.mimeTypes=t.Yti,void 0!==t.tii&&(i.playAdsAfterTime=t.tii),void 0!==t.$ti&&(i.loadVideoTimeout=t.$ti),void 0!==t.z9&&(i.bitrate=t.z9),void 0!==t.tii&&(i.playAdsAfterTime=t.tii),i.restoreCustomPlaybackStateOnAdBreakComplete=!0,i}r();var C5=class extends Ne{get zx(){return this.oa.xP?this.zri:this.oa.Gx()}get ct(){return this.oa.Nd()}get oP(){return this.oa.oP}get OP(){return this.oa.OP}hr(){this.zri=0}constructor(t){super(),this.zri=void 0,this.oa=void 0,this.oa=t,this.zri=this.oa.Gx(),this.oa.wn(d.py,()=>{this.oa.xP||(this.zri=this.oa.Gx()),this.So(new B(this.zx,void 0))})}};i4.Bg.registerWebImaAdPlayerConstructor(function(t,i,e){Z3(e);const s=zn(e)?t.zP():void 0,n=new A5(s,t.xe),r=new P5(n,t.Wu),h=new C5(t);return new t4(t,i,e,t.Jst,n,r,h)}),r(),r(),r();var R5=class extends VF{get Gri(){return this.oa===this.dnt?this.k5t:this.dnt}gr(t,i,e,s,n){(n||!s.lP||s.Qx)&&this.oa.lP&&this.oa.QP()}Xx(t,i){}Wx(t){}Xri(t,i){const e=t-this.k5t.jri;return super.Xx(e,i)}Qri(t){return super.Wx(t)}qx(){return this.dnt.bt}nu(){return this.dnt.nu()}Nd(){return this.dnt.Nd()}EP(){const t=Uo.jn(this.dnt.EP()).Ly(this.k5t.jri);if(this.Kri())return t._s();const i=Uo.jn(this.k5t.EP());let e=i;return a8(this.dnt)||(e=t.HM(i)),e=e.Mn(Uo.nL(0,this.Gx())),e._s()}Gx(){return this.Yri(super.Gx())}Yri(t){return this.k5t.Jri?this.k5t.Jri:this.oa===this.k5t?this.k5t.Zri+t:this.k5t.jri+t}Hx(){return this.$ri(super.Gx())}$ri(t){return this.k5t.thi?this.k5t.thi:this.oa===this.k5t&&this.k5t.ihi?new Date(this.k5t.ihi.getTime()+1e3*t):this.dnt.Vx}Ux(){const t=Uo.jn(this.dnt.Ux()).Ly(this.k5t.jri);if(this.Kri())return t._s();const i=Uo.jn(this.k5t.Ux());if(t.An(t.V-1)<i.Tn(0))return i._s();return t.HM(i)._s()}eI(t){switch(t.type){case d.py:return this.So(new B(this.Yri(t.currentTime),t.currentProgramDateTime)),!0;case d.Qw:return this.So(new Et(this.Yri(t.currentTime))),!0;case d.uo:return this.So(new vt(this.Yri(t.currentTime))),!0;case d.jw:return this.So(new Si(this.Yri(t.currentTime))),!0;case d.Nw:return this.So(new ur(this.Yri(t.currentTime))),!0;case d.$w:return this.So(new ji(this.Yri(t.currentTime))),!0;case d.Zw:return this.So(new Yr(this.Yri(t.currentTime))),!0;case d.Kw:return this.So(new Ik(this.Yri(t.currentTime),t.playbackRate)),!0;case d.wy:return this.ehi?(this.So(new Wi(this.Yri(t.currentTime),t.volume)),!0):(this.ehi=!0,!0);case d.Rw:return this.So(new ho(this.Yri(t.currentTime),t.readyState)),!0;case Jr.SM:return this.So(new Is(this.Yri(t.currentTime),t.readyState)),!0;case Jr.TM:return this.So(new Zi(this.Yri(t.currentTime),t.readyState)),!0;case Jr.kM:return this.So(new M(this.Yri(t.currentTime),t.readyState)),!0;case Jr.EM:return this.So(new Tt(this.Yri(t.currentTime),t.readyState)),!0;case Jr.AI:return this.So(new Ka(this.Yri(t.currentTime),t.readyState)),!0;case Jr.xM:return this.So(new SP(this.Yri(t.currentTime))),!0;case Jr.PM:return this.So(new mo(this.Yri(t.currentTime))),!0;case d.Dw:return this.So(new wn(this.Yri(t.currentTime),t.initDataType,t.initData)),!0}return super.eI(t)}jP(){this.dnt.jP(),this.k5t.jP()}async kn(){await super.kn(!0)}constructor(t,i,e){super(e),this.dnt=void 0,this.k5t=void 0,this.ehi=!0,this.dnt=t,this.k5t=i}};function D5(t,i){i.oP=t.oP,i.OP=t.OP}r();var N5=class extends R5{gr(t,i,e,s,n){super.gr(t,i,e,s,n),this.Gri.jP();this.shi(i,e).style.display="block"}mr(t,i,e){this.shi(i,e).style.display="none"}constructor(t,i,e){super(t,i,e)}},B5=class extends N5{Kri(){return!0}shi(t,i){return t}nhi(t,i){return i}Xx(t,i){return super.Xri(t,i)}Wx(t){return super.Qri(t)}constructor(t,i){super(t,i,t)}},M5=class extends R5{Kri(){return!1}gr(t,i,e,s,n){super.gr(t,i,e,s,n),this.ehi=!1,this.oa.rhi(),i.style.display="block"}mr(t,i,e){this.oa.hhi(),i.style.display="none"}Nd(){return this.oa.Nd()}constructor(t,i){super(t,i,i)}},L5=class extends N5{Kri(){return!1}shi(t,i){return i}nhi(t,i){return t}gr(t,i,e,s,n){super.gr(t,i,e,s,n);for(const t of[i,e])t.style.transition=""}mr(t,i,e){super.mr(t,i,e)}QP(){super.QP(),zs.X_&&(this.Gri.oP=!0,this.Gri.QP())}constructor(t,i){super(t,i,i)}};function O5(t){return t instanceof M5}r(),r();var F5=class extends Oi{xa(){return new U5(this.interstitial.Ont())}constructor(t){super("ohi"),this.interstitial=void 0,this.interstitial=t}},U5=class extends gp{constructor(t){super("interstitialupdate"),this.interstitial=void 0,this.interstitial=t}},Er=function(t){return t.SINGLE="SINGLE",t.DOUBLE="DOUBLE",t.LSHAPE_AD="LSHAPE_AD",t.LSHAPE_CONTENT="LSHAPE_CONTENT",t}({}),V5=class extends Ne{get ahi(){var t,i;const e=null!=(i=null!=(t=this.uhi)?t:this.Zb)?i:this.QFt;return void 0!==e?this.CO+e:this.zO?this.zO:void 0}get ct(){const t=this.ahi;return void 0===t?void 0:t-this.CO}get Q4t(){var t;return null!=(t=this.K4t)?t:0}dhi(t){if(!this.ct)return;const i=(t-(this.CO+this.lhi))/this.ct;i<this.Q4t||(this.K4t=_.min(i,1),1===this.K4t&&(this.pP=!0))}er(t){var i,e,s,n;this.Zb=null!=(i=t.ct)?i:this.Zb,this.zO=null!=(e=t.RO)?e:this.zO,this.uhi=null!=(s=t.fhi)?s:this.uhi,this.lhi=null!=(n=t.vhi)?n:this.lhi,this._hi(),this.So(new F5(this))}_hi(){void 0===this.Zb&&void 0!==this.zO?this.Zb=this.zO-this.CO:void 0===this.zO&&void 0!==this.Zb&&(this.zO=this.CO+this.Zb)}constructor(t){super(),this.o=void 0,this.CO=void 0,this.Qvt=void 0,this.ghi=void 0,this.phi={},this.QFt=void 0,this.zO=void 0,this.Zb=void 0,this.uhi=void 0,this.K4t=void 0,this.lhi=0,this.pP=!1,this.o=t.o,this.CO=t.CO,this.zO=t.RO,this.QFt=t.hOt,this.Zb=t.ct,this.uhi=t.fhi,this.Qvt=t.Qvt,this.ghi=t.ghi,this._hi()}};r(),r();var H5=class extends R5{mhi(t){this.whi=t,this.yhi&&(this.yhi.style.backgroundImage="url('"+this.whi+"')")}gr(t,i,e,s,n){super.gr(t,i,e,s,n);const r=h.createElement("a");if(r.style.backgroundImage="url('"+this.whi+"')",r.style.backgroundSize="contain",r.style.backgroundPosition="center",r.style.backgroundRepeat="no-repeat",this.bhi&&(r.href=this.bhi,r.target="Xu",r.setAttribute("rel","noopener")),this.Ahi){const t=h.createElement("img");t.src=this.Ahi,t.style.visibility="hidden",r.appendChild(t)}Go(r),this.yhi=r,Yd(t,this.yhi)}mr(t,i,e){i.addEventListener("transitionend",this.Shi)}constructor(t,i,e,s,n,r){super(t,i,e),this.yhi=void 0,this.whi=void 0,this.bhi=void 0,this.Ahi=void 0,this.Shi=t=>{var i;t.target.removeEventListener("transitionend",this.Shi);const e=null==(i=this.yhi)?void 0:i.parentElement;void 0!==this.yhi&&e&&(e.removeChild(this.yhi),this.yhi=void 0)},this.whi=s,this.bhi=n,this.Ahi=r}},W5=class extends H5{Kri(){return!0}gr(t,i,e,s,n){super.gr(t,i,e,s,n),D5(this.oa,this.Gri),this.Gri.oP=!0,this.Thi=this.dnt.nt.NI.filter(t=>t.Qk===xh.Kn);for(const t of this.Thi)t.Qk=xh.Nh;i.style.display="block",i.style.width="45%",i.style.height="45%",i.style.top="27.5%",i.style.transform="scale("+100/45+")",i.style.transformOrigin="left center",e.style.right="0",e.style.top="27.5%",e.style.display="block",e.style.width="45%",e.style.height="45%",e.style.transformOrigin="right center",e.style.transform="scale(0)",e.getBoundingClientRect(),e.style.transition="transform 1s ease-in-out",e.style.transform="scale(1) translateX(-"+2.5/45*100+"%)",i.style.transition="transform 1s ease-in-out",i.style.transform="scale(1) translateX("+2.5/45*100+"%)"}mr(t,i,e){var s;super.mr(t,i,e),i.style.width="100%",i.style.height="100%",i.style.top="",i.style.transform="scale(0.45) translateX("+2.5/45*100+"%)",i.style.transformOrigin="left center",i.style.transition="",i.getBoundingClientRect(),i.style.transform="",i.style.transition="transform 1s ease-in-out",i.addEventListener("transitionend",this.khi),e.style.transform="scale(0)",e.addEventListener("transitionend",this.Ehi);for(const t of null!=(s=this.Thi)?s:[])t.Qk=xh.Kn;this.Thi=void 0}Yx(){return this.dnt.Yx()||this.k5t.Yx()}Zx(){return this.dnt.Zx()||this.k5t.Zx()}TP(){return _.min(this.dnt.AP,this.k5t.AP)}QP(){this.dnt.QP(),this.k5t.QP()}constructor(t,i,e,s,n){super(t,i,i,e,s,n),this.Thi=void 0,this.khi=t=>{const i=t.target;i.removeEventListener("transitionend",this.khi),i.style.transform="",i.style.transition="",i.style.transformOrigin=""},this.Ehi=t=>{const i=t.target;i.removeEventListener("transitionend",this.Ehi),i.style.display="none",i.style.width="100%",i.style.height="100%",i.style.right="",i.style.top="",i.style.transition="",i.style.transform="",i.style.transformOrigin=""}}};r();var q5=class extends H5{gr(t,i,e,s,n){super.gr(t,i,e,s,n),this.Gri.jP();const r=this.shi(i,e);r.style.display="block",r.getBoundingClientRect()}constructor(t,i,e,s,n,r){super(t,i,e,s,n,r),this.xhi=t=>{const i=t.target;i.removeEventListener("transitionend",this.xhi),i.style.transition=""}}},z5=class extends q5{Kri(){return!0}shi(t,i){return t}nhi(t,i){return i}gr(t,i,e,s,n){super.gr(t,i,e,s,n);const r=this.shi(i,e);r.style.transform="\n            translate(-50%, -50%)\n            scale(calc(43/60))\n            translate(calc(50% + 100%/30), calc(50% + 100%/30))\n        ",r.style.transition="transform 1s ease-in-out"}mr(t,i,e){super.mr(t,i,e);const s=this.shi(i,e);s.style.display="",s.style.transform="",s.addEventListener("transitionend",this.xhi)}constructor(t,i,e,s,n){super(t,i,t,e,s,n)}},G5=class extends q5{Kri(){return!1}shi(t,i){return i}nhi(t,i){return t}gr(t,i,e,s,n){super.gr(t,i,e,s,n);for(const t of[i,e])t.style.transform="\n                translate(-50%, -50%)\n                scale(calc(43/60))\n                translate(calc(50% + 100%/30), calc(50% + 100%/30))\n            ",t.style.transition="transform 1s ease-in-out"}mr(t,i,e){super.mr(t,i,e);const s=this.shi(i,e);s.style.display="none",s.style.transform="",s.style.transition="";const n=this.nhi(i,e);n.style.display="",n.getBoundingClientRect(),n.style.transform="",n.addEventListener("transitionend",this.xhi)}QP(){super.QP(),zs.X_&&(this.Gri.oP=!0,this.Gri.QP())}constructor(t,i,e,s,n){super(t,i,i,e,s,n)}};r(),r(),r();var X5=class extends VF{gr(t,i){}mr(t){}},j5=class extends X5{Xx(t,i){}},Q5=class extends X5{Xx(t,i){}gr(t,i){i.style.backgroundImage="url('"+this.whi+"')",i.style.backgroundSize="contain",i.style.backgroundPosition="center",t.style.transition="transform 1s ease-in-out",t.style.transform="\n          translate(-50%, -50%)\n          scale(calc(43/60))\n          translate(calc(50% + 100%/30), calc(50% + 100%/30))\n        "}mr(t){t.style.transform="",t.addEventListener("transitionend",this.xhi)}constructor(t,i){super(t),this.whi=void 0,this.xhi=t=>{const i=t.target;i.removeEventListener("transitionend",this.xhi),i.style.transition="transform 1s ease-in-out"},this.whi=i}};r();var vh=class extends Oi{xa(){return new K5(this.interstitial.Ont())}constructor(t){super("Phi"),this.interstitial=void 0,this.interstitial=t}},K5=class extends gp{constructor(t){super("interstitialbegin"),this.interstitial=void 0,this.interstitial=t}};function Y5(t){return{get id(){return t.o},get duration(){return t.ct},get startTime(){return t.CO},get type(){return"adbreak"},get layout(){return function(t){switch(t){case Er.SINGLE:return"single";case Er.DOUBLE:return"double";case Er.LSHAPE_CONTENT:case Er.LSHAPE_AD:return"l-shape"}}(t.Ihi)},get ads(){return t.Jc.map(t=>t.Ont())},get backdropUri(){return t.Chi},get adTagParameters(){return t.phi},set adTagParameters(i){Qd(i)?t.phi=i:zd.dm("Incorrect ad tag parameters type, expecting a Record.")}}}r(),r(),r(),r();var pl=function(t){return t.image="image",t}({}),J5=function(t){return t.png="png",t.svg="svg",t}({}),Z5=class extends V5{get Km(){return"overlay"}get KYt(){return this.Rhi}get Dhi(){return this.Nhi}er(t){var i,e;this.Nhi=null!=(i=t.imageUrl)?i:this.Nhi,this.Rhi=null!=(e=t.clickThrough)?e:this.Rhi,super.er(t)}Ont(){var t;return null!=(t=this.hu)?t:this.hu=function(t){return{get type(){return"overlay"},get id(){return t.o},get duration(){return t.ct},get startTime(){return t.CO},get clickThrough(){return t.KYt},get imageUrl(){return t.Dhi},get position(){return function(t){return{get top(){return t.utt},get bottom(){return t.att},get left(){return t.ott},get right(){return t.htt}}}(t.mo)},get size(){return function(t){return{get width(){return t.Ti},get height(){return t.Mi}}}(t.Wy)},get adTagParameters(){return t.phi},set adTagParameters(i){Qd(i)?t.phi=i:zd.dm("Incorrect ad tag parameters type, expecting a Record.")}}}(this)}constructor(t){super(t),this.hu=void 0,this.Bhi=void 0,this.mo=void 0,this.Wy=void 0,this.Mhi=void 0,this.Lhi=void 0,this.cZt=void 0,this.Rhi=void 0,this.Nhi=void 0,this.Bhi=t.Km,this.mo=t.mo,this.Wy=t.Wy,this.Mhi=t.Mhi,this.Lhi=t.Lhi,this.cZt=t.cZt,this.Rhi=t.Ohi}};r();var $5=class extends V5{get Km(){return"adbreak"}get Jc(){return this.qc}er(t){var i;t.ad&&this.qc.push(t.ad),this.Chi=null!=(i=t.backdropUri)?i:this.Chi,this.Fhi=t.backdropClickThrough,this.Uhi=t.backdropImpressionUrl,super.er(t)}Ont(){var t;return null!=(t=this.hu)?t:this.hu=Y5(this)}constructor(t){super(t),this.hu=void 0,this.qc=[],this.Syt=void 0,this.Vhi=void 0,this.Ihi=void 0,this.Hhi=void 0,this.Whi=void 0,this.qhi=void 0,this.zhi=void 0,this.Chi=void 0,this.Fhi=void 0,this.Uhi=void 0,this.Syt=t.Syt,this.Vhi=t.Vhi,this.Ihi=t.Ihi||Er.SINGLE,this.Hhi=t.Hhi,this.Whi=t.Whi,this.zhi=t.Ghi,this.Chi=t.Xhi,this.qhi=t.qhi}};r(),r();var t6=class extends tn{jhi(t){this.qc.push(t)}get pP(){return this.Qhi.pP}get u$t(){return we.knt}get G0t(){var t;return null!=(t=this.Qhi.ct)?t:-1}get qOt(){return this.Qhi.CO}get y0t(){}get Khi(){return this.Qhi}constructor(t){var i;super(t.CO),this.Qhi=void 0,this.Qhi=t,this.X0t=null!=(i=this.Qhi.ct)?i:-1}};r(),r();var i6=class extends gn{xa(){return La(this)}get u$t(){return we.knt}constructor(t){super(t,function(t){return t===Er.LSHAPE_CONTENT?Hs.L4t:Hs.BZt}(t.Khi.Ihi)),t.jhi(this)}};var e6=class extends i6{constructor(t,i){super(t),this.Zb=_.min(i,this.od.G0t)}};r();var rr="ott_placement",s6=class{async Yhi(t,i,e){const s=Y({},t.phi,i),n=new xr(s);n.set("iu",t.Jhi),n.set("sz",t.Zhi),n.set("c",String(this.$hi));const r="https://securepubads.g.doubleclick.net/gampad/adx?"+n.toString();return await this.toi(r,e)}async toi(t,i){const e=new ro({Yu:t,fk:Bi.BT,Hk:Qe.GET,Yg:i});try{const t=await this.aV.vk(e);return await t.lk()}catch(t){throw new ys($c.NETWORK,xs.UNKNOWN_AD_RESPONSE,"The ad source could not be loaded.",t)}}constructor(t){this.$hi=(new Date).getTime(),this.aV=void 0,this.aV=t}},n6=function(t){return t.ioi="0",t.jw="1",t.eoi="2",t.PICTURE_IN_PICTURE="3",t.soi="4",t.noi="5",t.roi="99",t}({});function r6(t){switch(t){case Er.DOUBLE:return"3";case Er.SINGLE:return"0";case Er.LSHAPE_AD:case Er.LSHAPE_CONTENT:return"4"}}var h6=function(t){return t.AD_PAUSED="adpaused",t.AD_ERROR="aderror",t.AD_ENDED="adended",t}({}),ss=function(t){return t[t.GOOGLE=0]="GOOGLE",t[t.DEFAULT=1]="DEFAULT",t[t.COMPANION=2]="COMPANION",t[t.CSAI=3]="CSAI",t}({}),Gn=class extends Ne{get K0t(){return this.y1t}get hoi(){return this.ooi}get Fnt(){return this.w1t}get hti(){return this.u1t}aoi(){return Boolean(this.ooi)}uoi(t){}QP(){}jP(){}coi(t){}doi(t){this.loi=this.foi(t),this.voi=!t[rr]}foi(t){const i=ru(t);return t[rr]||(i[rr]=r6(Er.SINGLE)),i}_oi(t){if(!this.voi)return;const i=this.loi[rr],e=r6(t);i!==e&&(this.loi[rr]=e)}async goi(t,i,e,s){const n=await this.poi(t,i,e);return await this.k5t.IP(n,{},e),n}async moi(t,i){if(t.zhi)try{const e=Y({},this.loi,{ott_placement:n6.soi}),s=await this.woi.Yhi(t.zhi,e,i);t.er({backdropUri:null==s?void 0:s.image,backdropClickThrough:null==s?void 0:s.clickThrough,backdropImpressionUrl:null==s?void 0:s.impression})}catch(t){throw new m("Could not load the backdrop")}}yoi(t,i){let e;if(t.CO<i){const s=_.min(t.ct,t.ahi-i);e=t.ct-s,t.er({ct:s,vhi:e})}return e}boi(t){const i=new t6(t);this.y1t.push(i)}Aoi(t){const i=this.y5t(t);_e(this.y1t,i)}y5t(t){return hh(this.y1t,i=>i.Khi===t)}Soi(){this.k5t.wn(d.py,this.Q6),this.k5t.wn(d.Nw,this.Toi),this.k5t.wn(hc.ma,this.WQt)}koi(){this.k5t.mn(d.py,this.Q6),this.k5t.mn(d.Nw,this.Toi),this.k5t.mn(hc.ma,this.WQt)}bd(t){var i;null==(i=this.ooi)||i.dhi(this.Yri(t.currentTime))}async Eoi(t,i,e,s,n){const r={stack:[],error:void 0,hasError:!1};try{var h;null==(h=this.uV)||h.Zg();const i=Es(r,Zc.ep([e]),!1);this.uV=i;const o=i.Yg;return fr(o),await this.k5t.Eoi(t,s,n,o)}catch(t){r.error=t,r.hasError=!0}finally{Zs(r)}}U9t(t){void 0!==this.xoi?(this.ooi=this.xoi,this.xoi=void 0,this.w1t=this.y5t(this.ooi),this.u1t=new e6(this.w1t,this.k5t.Nd()),this.ooi.er({ad:this.hti}),this.R5t.So(new Ta(this.w1t)),this.R5t.So(new nc(this.u1t,t))):zd.um("Expected an ad to start.")}Bd(t){this.ooi&&(this.ooi.dhi(t),this.ooi.pP=!0,this.Aoi(this.ooi),this.ooi=void 0),this.u1t&&(this.R5t.So(new fc(this.u1t,t)),this.u1t=void 0),this.w1t?(this.R5t.So(new Za(this.w1t)),this.w1t=void 0):(zd.um("An ad break has ended without realizing we are in an ad break."),this.So(new gp("adended")))}Yri(t){var i,e;return(null!=(e=null==(i=this.ooi)?void 0:i.CO)?e:0)+t}async hr(){var t;null==(t=this.uV)||t.Zg(),this.uV=void 0,this.koi(),this.y1t=[],this.u1t=void 0,this.w1t=void 0,this.ooi=void 0,this.xoi=void 0}async kn(){await this.hr(),await this.Poi.kn()}constructor(t,i,e,s,n){super(),this.k5t=void 0,this.Poi=void 0,this.R5t=new tl,this.woi=void 0,this.y1t=[],this.w1t=void 0,this.u1t=void 0,this.ooi=void 0,this.xoi=void 0,this.loi=void 0,this.voi=!0,this.uV=void 0,this.Q6=t=>{this.bd(t)},this.Toi=t=>{this.Bd(this.Yri(this.k5t.Gx()))},this.WQt=()=>{this.So(new $h($c.GENERAL))},this.k5t=t,this.Poi=i,this.y1t=e,this.woi=s,this.Poi.Ioi(this),this.R5t=i.u4t,this.loi=this.foi(n),this.voi=!n[rr]}},o6="com.theoplayer.theoads.interstitial",a6="com.theoplayer.theoads.overlay",u6="X-ASSET-URI",c6="X-ASSET-URI-VAST",d6=class{get Coi(){return this.Roi}Doi(t){this.Noi=new EventSource(t),this.Noi.addEventListener("adbreak",this.Boi),this.Noi.addEventListener("overlay",this.Moi),this.Noi.addEventListener("streaminfo",this.Loi)}Ooi(t){if(!Ct(this.Foi,t)){this.Foi.push(t);for(const i of t.NI)this.Uoi(i);t.wn(N.rI,this.Wn),t.wn(N.oI,this.Gn)}}Voi(t){if(Ct(this.Foi,t)){_e(this.Foi,t),t.mn(N.rI,this.Wn),t.mn(N.oI,this.Gn);for(const i of t.NI)this.Hoi(i)}}Uoi(t){!this.Woi&&function(t){return t.Lt===us.zU&&t.Km===nh.DATE_RANGE}(t)&&this.qoi!==t?this.zoi(t):this.Woi&&function(t){return t.Lt===us.zU&&t.Km===nh.ID3}(t)&&this.Goi!==t&&this.Xoi(t)}Hoi(t){this.qoi===t?this.zoi(void 0):this.Goi===t&&this.Xoi(void 0)}zoi(t){const i=this.qoi;if(void 0!==i){if(i.L)for(const t of i.L.NI)this.joi(t);i.mn(Te.uI,this.Qoi),i.mn(Te.fI,this.Koi),i.mn(Te._I,this.Yoi),i.mn(Te.dI,this.Joi),i.Qk=xh.iC}if(this.qoi=t,void 0!==t){if(t.L)for(const i of t.L.NI)this.Zoi(i);t.wn(Te.uI,this.Qoi),t.wn(Te.fI,this.Koi),t.wn(Te._I,this.Yoi),t.wn(Te.dI,this.Joi),t.Qk=xh.iC}}Xoi(t){const i=this.Goi;if(void 0!==i){if(i.L)for(const t of i.L.NI)this.joi(t);i.mn(Te.uI,this.$oi),i.mn(Te._I,this.Yoi),i.mn(Te.dI,this.Joi),i.Qk=xh.iC}if(this.Goi=t,void 0!==t){if(t.L)for(const i of t.L.NI)this.tai(i);t.wn(Te.uI,this.$oi),t.wn(Te._I,this.Yoi),t.wn(Te.dI,this.Joi),t.Qk=xh.iC}}iai(t){try{var i,e;const s=JSON.parse(t.data),n=s.networkCode,r=null==(i=s.assetKeys)?void 0:i[0];this.nai.eai(n,r),null==(e=this.Noi)||e.removeEventListener("streaminfo",this.Loi)}catch(t){zd.dm("Error parsing the Server sent stream info",t)}}rai(t){const i=this.nai.Vx;if(void 0!==i)try{const n=JSON.parse(t.data);var e;const r=null!=(e=n.podDuration)?e:n.adBreakDuration;if(void 0===r)return void zd.dm("Tried to schedule an ad break without knowing the duration");const h=(Date.parse(n.startDate)-i.getTime())/1e3;if(h<=-r)return;const o=this.nai.Gx()+h,a=n.networkCode,u=n.assetKey,c=n.podId?x(n.podId):void 0,d=this.hai(Er[n.layout]),l=n.assetURIVAST,f=void 0!==u&&void 0!==a||c,v=!f&&void 0!==l;var s;let _=null!=(s=n.assetURI)?s:"";f?_="theo-ads://dai.break/?d="+r:v&&(_=l);const g=this.oai(d,_,v),p=new $5({o:n.id,CO:o,Syt:_,Vhi:g,Ihi:d,Hhi:a,Whi:u,hOt:r,ghi:c,Xhi:n.backdropURI,Ghi:l6(n.backdropURIGamProperties),Qvt:n.startPTS,qhi:n.eabnVersion});this.boi(p,void 0)}catch(t){zd.dm("Error parsing the Server sent event",t)}else zd.dm("Tried to schedule an ad break without knowing the Program Date Time of the player")}aai(t){const i=this.nai.Vx;if(void 0!==i)try{var e;const s=JSON.parse(t.data),n=s.duration;if(void 0===n)return void zd.dm("Tried to schedule an overlay without knowing the duration");const r=(Date.parse(s.startDate)-i.getTime())/1e3;if(r<=-n)return;const h=this.nai.Gx()+r,o=pl[s.type],a=new Z5({o:s.id,Km:o||pl.image,CO:h,hOt:n,mo:v6(s.position),Wy:_6(s.size),Mhi:s.opacity,Lhi:l6(s.gamProperties),cZt:null==(e=s.resourceURI)?void 0:e.map(t=>f6(t)),Ohi:s.clickThroughURI});this.boi(a,void 0)}catch(t){zd.dm(t)}else zd.dm("Tried to schedule an overlay without knowing the Program Date Time of the player")}Zoi(t){if((t.nOt===o6||t.nOt===a6)&&(t.oOt[u6]||t.oOt[c6]))switch(t.nOt){case a6:this.uai(t);break;case o6:this.cai(t)}}uai(t){try{var i;if(void 0===t.ct&&void 0===t.hOt)return;const e=atob(t.oOt["X-COM-THEOPLAYER-THEOADS-OVERLAY-PROPERTIES"]),s=JSON.parse(e),n=pl[s.type],r=this.nai.lai(t.CO),h=isFinite(t.RO)?this.nai.lai(t.RO):void 0,o=new Z5({o:t.o,Km:n||pl.image,CO:r,RO:h,ct:t.ct,hOt:t.hOt,mo:v6(s.position),Wy:_6(s.size),Mhi:s.opacity,Lhi:l6(s.gamProperties),cZt:null==(i=s.resourceURI)?void 0:i.map(t=>f6(t)),Ohi:s.clickThroughURI});this.boi(o,t)}catch(t){zd.dm(t)}}cai(t){const i=t.oOt["X-RESUME-OFFSET"];if(void 0===t.ct&&void 0===t.hOt&&void 0===i)return;const e=t.oOt[u6],s=t.oOt[c6],n=Q2(e)?function(t){const i=t.split("?")[1],e={},s=new URLSearchParams(i);return e.d=Number(s.get("d"))||void 0,e.k=s.get("k")||void 0,e.n=s.get("n")||void 0,e.p=Number(s.get("p"))||void 0,e}(e):void 0,r=null==n?void 0:n.n,h=null==n?void 0:n.k,o=this.nai.lai(t.CO),a=isFinite(t.RO)?this.nai.lai(t.RO):void 0,u=this.hai(Er[t.oOt["X-COM-THEOPLAYER-THEOADS-LAYOUT"]]),c=t.oOt["X-COM-THEOPLAYER-THEOADS-BACKDROP-GAMPROPERTIES"],d=c?JSON.parse(atob(c)):void 0,l=null==n?void 0:n.p,f=!(void 0!==r&&void 0!==h||l)&&void 0!==t.oOt[c6],v=f?s:e,_=this.oai(u,v,f),g=new $5({o:t.o,CO:o,Syt:v,Vhi:_,Ihi:u,Hhi:r,Whi:h,Xhi:t.oOt["X-COM-THEOPLAYER-THEOADS-BACKDROP"],Ghi:l6(d),RO:a,ct:t.ct,hOt:t.hOt,ghi:l,fhi:void 0!==i?Number(i):void 0});this.boi(g,t),this.fai=g}hai(t){return t===Er.LSHAPE_CONTENT?t:this.vai||t}oai(t,i,e){return t===Er.LSHAPE_CONTENT?ss.COMPANION:e?ss.CSAI:Q2(i)?ss.GOOGLE:ss.DEFAULT}tai(t){const i=t.U;if(!function(t){return"GEO"===t.id||"GEOB"===t.id}(i)||!function(t){return"Anvatos"===t.description&&"application/json"===t.mimeType}(i))return;const e=nm(new DataView(i.data),new oi),s=new xr(e),n=s.get("type");if("cue"===n){let i=Number(s.get("duration"))/1e3||void 0;const e=new xr(s.get("payload")),n=Number(e.get("dur"))||void 0,r=Number(e.get("s_bd"))||void 0;if(void 0!==n?i=n:void 0!==r&&(i=r/10),!i)return void 0;const h="theo-ads://dai.break/?d="+i,o=Number(s.get("pts"))||void 0,a=this.nai.lai(t.CO),u=this.hai(Er.SINGLE),c=new $5({o:t.o,CO:a,Syt:h,Vhi:ss.GOOGLE,Ihi:u,hOt:i,Qvt:o});this.boi(c,t)}else if("cue_end"===n){const i=this.fai;i&&i.er({ct:this.nai.lai(t.CO)-i.CO})}}_ai(t){const i=this.gai.get(t.JI);i&&this.nai.pai(i.CO)}mai(t){for(const i of this.Roi)if(t.o===i.o&&t.Km===i.Km)return!0;return!1}wai(t){const i=[];if(0===this.nai.EP().length)return zd.um("Seekable is undefined."),!1;const e=this.nai.EP().start(0);for(const s of this.yai)if(s.ahi<e)i.push(s);else if(t.o===s.o&&t.Km===s.Km)return!0;for(const t of i)_e(this.yai,t);return!1}boi(t,i){var e;const s=t.CO+(null!=(e=t.ct)?e:1/0);this.mai(t)||this.wai(t)||this.nai.Gx()>=s||(this.Roi.push(t),i?this.gai.set(i.JI,t):this.yai.push(t),this.nai.boi(t))}bai(t){const i=this.gai.get(t.JI);if(void 0===i)return;const e=t.oOt["X-RESUME-OFFSET"],s=isFinite(t.RO)?this.nai.lai(t.RO):void 0;i.er({ct:t.ct,RO:s,fhi:void 0!==e?Number(e):void 0})}joi(t){this.Aai(t)}Aai(t){void 0!==this.gai.get(t.JI)&&this.gai.delete(t.JI)}Sai(t){t.forEach(t=>this.Aoi(t))}Aoi(t){_e(this.Roi,t)}hr(){var t,i,e,s;this.fai=void 0,this.zoi(void 0),this.Xoi(void 0);for(const t of this.Foi.slice())this.Voi(t);Wt(this.Foi),Wt(this.Roi),Wt(this.yai),this.gai.clear(),null==(t=this.Noi)||t.removeEventListener("adbreak",this.Boi),null==(i=this.Noi)||i.removeEventListener("overlay",this.Moi),null==(e=this.Noi)||e.removeEventListener("streaminfo",this.Loi),null==(s=this.Noi)||s.close(),this.Noi=void 0}kn(){this.hr()}constructor(t){this.nai=void 0,this.Woi=!1,this.vai=void 0,this.Roi=[],this.yai=[],this.gai=re(),this.fai=void 0,this.Foi=[],this.qoi=void 0,this.Goi=void 0,this.Noi=void 0,this.Wn=t=>{this.Uoi(t.Ht)},this.Gn=t=>{this.Hoi(t.Ht)},this.Qoi=t=>{this.Zoi(t.PO)},this.$oi=t=>{this.tai(t.PO)},this.Yoi=t=>{this._ai(t.PO)},this.Joi=t=>{this.joi(t.PO)},this.Koi=t=>{this.bai(t.PO)},this.Boi=t=>{this.rai(t)},this.Moi=t=>{this.aai(t)},this.Loi=t=>{this.iai(t)},this.nai=t}};function l6(t){if(!t)return;let i=t.sz.default;return zs.Ks&&t.sz.phone?i=t.sz.phone:zs.og&&t.sz.tv&&(i=t.sz.tv),{Jhi:t.iu,Zhi:i,phi:t.adTagParameters}}function f6(t){const i=J5[t.type];let e=t.default;return zs.Ks&&t.phone?e=t.phone:zs.og&&t.tv&&(e=t.tv),{Km:i,Syt:e}}function v6(t){let i,e,s,n;return t.top&&t.top>=0&&t.top<=100?i=t.top:t.bottom&&t.bottom>=0&&t.bottom<=100?e=t.bottom:i=10,t.left&&t.left>=0&&t.left<=100?s=t.left:t.right&&t.right>=0&&t.right<=100?n=t.right:s=10,{utt:i,att:e,ott:s,htt:n}}function _6(t){let i,e;return i=t.width&&t.width>=0&&t.width<=100?t.width:10,e=t.height&&t.height>=0&&t.height<=100?t.height:10,{Ti:i,Mi:e}}r();var g6=class extends Ne{get Tai(){return this.oa.Tai.map(t=>t.Ont())}get kai(){return this.oa.kai.map(t=>t.Ont())}doi(t){Qd(t)?this.oa.doi(t):zd.dm("Incorrect ad tag parameters type, expecting a Record.")}get Ca(){var t;return null!=(t=this.hu)?t:this.hu=function(t){return{get currentInterstitials(){return t.Tai},get scheduledInterstitials(){return t.kai},replaceAdTagParameters(i){t.doi(i)},addEventListener(i,e){t.wn(i,e)},removeEventListener(i,e){t.mn(i,e)}}}(this)}constructor(t){super(),this.oa=void 0,this.hu=void 0,this.oa=t}};r();var p6=class{Ioi(t){this.Eai=t}get u4t(){return this.R5t}get w4t(){var t;return void 0!==(null==(t=this.Eai)?void 0:t.Fnt)}get r4t(){return we.knt}get Lnt(){var t;return(null==(t=this.Eai)?void 0:t.hti)?[this.Eai.hti]:[]}get Fnt(){var t,i;return null!=(i=null==(t=this.Eai)?void 0:t.Fnt)?i:null}get Unt(){return this.Eai?hs(this.Eai.K0t,t=>{var i;const e=t.Jc;if(t===(null==(i=this.Eai)?void 0:i.Fnt)&&void 0!==this.Eai.hti){const t=e.indexOf(this.Eai.hti);if(t>=0)return e.slice(t+1)}return t.pP?[]:e}):[]}get Vnt(){return this.Eai?this.Eai.K0t.filter(t=>{var i;return t===(null==(i=this.Eai)?void 0:i.Fnt)||!t.pP}):[]}uD(){}Hnt(t){}qnt(t){}kn(){return this.Eai=void 0,Promise.resolve()}constructor(){this.R5t=new tl,this.Eai=void 0}};r();var m6=class{get Tai(){return this.xai}get phi(){return this.loi}set phi(t){this.loi=t}async Pai(t){this.Iai.style.display="";const i=h.createElement("div");i.className="theoplayer-theoads-overlay",i.style.display="",this.Cai.set(t.o,i);const e=h.createElement("a"),s=await this.Rai(t);if(s.clickThroughURI&&(this.Iai.style.zIndex="11",e.href=s.clickThroughURI,e.target="Xu",e.setAttribute("rel","noopener"),e.addEventListener("mousedown",this.$ii),e.addEventListener("touchend",this.$ii)),t.Bhi===pl.image&&(e.style.backgroundImage="url("+s.resourceURI+")",e.style.backgroundSize="contain",e.style.backgroundPosition="center",e.style.backgroundRepeat="no-repeat",s.impressionURI)){const t=h.createElement("img");t.src=s.impressionURI,t.style.display="none",e.appendChild(t)}Go(e),function(t,i){t.style.position="absolute";const e=i.mo;e.ott&&(t.style.left=e.ott+"%");e.htt&&(t.style.right=e.htt+"%");e.utt&&(t.style.top=e.utt+"%");e.att&&(t.style.bottom=e.att+"%");const s=i.Wy;s.Ti&&(t.style.width=s.Ti+"%");s.Mi&&(t.style.height=s.Mi+"%");i.Mhi&&i.Mhi>0&&i.Mhi<=100&&(t.style.opacity=""+i.Mhi/100)}(i,t),i.appendChild(e),this.Iai.appendChild(i),this.xai.push(t)}Dai(t){const i=this.Cai.get(t.o);i&&(this.Iai.contains(i)&&this.Iai.removeChild(i),this.Cai.delete(t.o),0===this.Cai.size&&(this.Iai.style.display="none"),_e(this.xai,t))}Nai(){this.Cai.forEach(t=>{this.Iai.contains(t)&&this.Iai.removeChild(t)}),this.Cai.clear(),this.xai=[]}async Rai(t){const i={resourceURI:""};let e;if(t.Lhi){const i=Y({},this.loi,t.phi);i&&!i[rr]&&(i[rr]=n6.noi),e=await this.Bai.Yhi(t.Lhi,i)}if(e)i.resourceURI=e.image,i.impressionURI=e.impression;else if(t.cZt){const e=hh(t.cZt,t=>t.Km===J5.svg);e&&(i.resourceURI=e.Syt);const s=hh(t.cZt,t=>t.Km===J5.png);s&&(i.resourceURI=s.Syt)}var s;return i.clickThroughURI=null!=(s=null==e?void 0:e.clickThrough)?s:t.KYt,t.er({imageUrl:i.resourceURI,clickThrough:i.clickThroughURI}),i}hr(){this.Nai(),this.Iai.style.display="none"}constructor(t,i,e){this.oa=void 0,this.loi=void 0,this.xai=[],this.Iai=void 0,this.Cai=Ba(),this.Bai=void 0,this.gn=void 0,this.Att=t=>{j2(this.Iai,this.oa.MP,this.oa.DP,t.width,t.height)},this.rjt=()=>{j2(this.Iai,this.oa.MP,this.oa.DP,this.gn.Eu,this.gn.Iu)},this.$ii=t=>{t.stopPropagation()},this.oa=t,this.Bai=e;const s=h.createElement("div");s.style.display="none",s.className="theoads-image-overlays-container",Go(s),i.appendChild(s),this.Iai=s,this.gn=new bD(i),this.gn._n(),this.gn.wn(Qh.yn,this.Att),this.oa.wn(d.Jw,this.rjt)}};r();var w6=class extends gp{constructor(t){super("addinterstitial"),this.interstitial=void 0,this.interstitial=t}};r();var y6=class extends Oi{xa(){return new b6(this.interstitial.Ont())}constructor(t){super("Mai"),this.interstitial=void 0,this.interstitial=t}},b6=class extends gp{constructor(t){super("interstitialend"),this.interstitial=void 0,this.interstitial=t}};r();var A6=class extends Oi{xa(){return new S6(this.interstitial.Ont(),this.Iy)}constructor(t,i){super("Lai"),this.interstitial=void 0,this.Iy=void 0,this.interstitial=t,this.Iy=i}},S6=class extends gp{constructor(t,i){super("interstitialerror"),this.interstitial=void 0,this.message=void 0,this.interstitial=t,this.message=i}};r();var T6=class extends Gn{get Vhi(){return ss.DEFAULT}Oai(){return!1}BW(t,i,e){return Promise.resolve()}async Fai(t,i,e,s){void 0===s&&(s=!1);const n=this.yoi(t,i),r=await this.poi(t,i,e);return this.Eoi(r,t,e,n,s)}async poi(t,i,e){this.xoi=t;return ra({sources:{src:t.Syt}})}Soi(){super.Soi(),this.k5t.wn(Jr.PM,this.Uai)}koi(){this.k5t.mn(Jr.PM,this.Uai),super.koi()}bd(t){if(!this.ooi)return void zd.um("Got timeupdate without a current interstitial");const i=this.Yri(t.currentTime),e=this.ooi.Q4t;this.ooi.dhi(i);const s=this.ooi.Q4t;e<.25&&s>=.25?this.R5t.So(new ie(this.u1t,i)):e<.5&&s>.5?this.R5t.So(new xe(this.u1t,i)):e<.75&&s>=.75?this.R5t.So(new Qs(this.u1t,i)):this.ooi.pP&&this.Bd(i)}Bd(t){super.Bd(t),this.d9=!1}async hr(){await super.hr(),this.d9=!1}constructor(...t){super(...t),this.d9=!1,this.Uai=t=>{!this.d9&&this.xoi&&(this.d9=!0,this.U9t(this.Yri(t.currentTime)))},this.Toi=t=>{this.Bd(this.Yri(t.currentTime))}}};r(),r(),r();var Ti=class extends gp{constructor(t,i,e){super(t,new Date),this.Vai=void 0,this.jnt=void 0,this.Vai=i,this.jnt=e}},Me=function(t){return t.LOADED="DAILoaded",t.AD_BREAK_STARTED="DAIAdBreakStarted",t.AD_BREAK_ENDED="DAIAdBreakEnded",t.AD_PERIOD_STARTED="DAIAdPeriodStarted",t.AD_PERIOD_ENDED="DAIAdPeriodEnded",t.AD_PROGRESS="DAIAdProgress",t.CUEPOINTS_CHANGED="DAICuePointsChanged",t.CLICK="DAIClick",t.ERROR="DAIError",t.STARTED="DAIStarted",t.FIRST_QUARTILE="DAIFirstQuartile",t.MIDPOINT="DAIMidpoint",t.STREAM_INITIALIZED="DAIStreamInitialized",t.THIRD_QUARTILE="DAIThirdQuartile",t.COMPLETE="DAIComplete",t}({}),k6=class extends Ti{constructor(t,i){super("DAILoaded",t,i)}},E6=class extends Ti{constructor(t,i){super("DAIAdBreakStarted",t,i)}},x6=class extends Ti{constructor(t,i){super("DAIAdBreakEnded",t,i)}},P6=class extends Ti{constructor(t,i){super("DAIAdProgress",t,i)}},I6=class extends Ti{constructor(t,i){super("DAICuePointsChanged",t,i)}},C6=class extends Ti{constructor(t,i){super("DAIClick",t,i)}},R6=class extends Ti{constructor(t,i){super("DAIError",t,i)}},D6=class extends Ti{constructor(t,i){super("DAIStarted",t,i)}},N6=class extends Ti{constructor(t,i){super("DAIFirstQuartile",t,i)}},B6=class extends Ti{constructor(t,i){super("DAIMidpoint",t,i)}},M6=class extends Ti{constructor(t,i){super("DAIStreamInitialized",t,i)}},L6=class extends Ti{constructor(t,i){super("DAIThirdQuartile",t,i)}},O6=class extends Ti{constructor(t,i){super("DAIComplete",t,i)}};var F6=class extends Ne{replaceAdTagParameters(t){return this.Hai.replaceAdTagParameters(null!=t?t:null)}Wai(t){return this.Hai.contentTimeForStreamTime(t)}qai(t){return this.Hai.streamTimeForContentTime(t)}KHt(t,i){const e=function(t){return"vod"===t.availabilityType?new s.google.ima.dai.api.VODStreamRequest(Y({},U6(t),{contentSourceId:t.contentSourceID,videoId:t.videoID})):new s.google.ima.dai.api.LiveStreamRequest(Y({},U6(t),{assetKey:t.assetKey}))}(t);t.enableNonce&&(e.enableNonce=!0),this.Hai.requestStream(e)}hr(){this.zai(!1),this.Hai.reset()}kn(){this.Vo();const t=google.ima.dai.api.StreamEvent.Type;this.Hai.removeEventListener(t.AD_BREAK_STARTED,this.Gai),this.Hai.removeEventListener(t.AD_PROGRESS,this.Xai),this.Hai.removeEventListener(t.CLICK,this.Q1t),this.Hai.removeEventListener(t.COMPLETE,this.jai),this.Hai.removeEventListener(t.CUEPOINTS_CHANGED,this.Qai),this.Hai.removeEventListener(t.ERROR,this.Ts),this.Hai.removeEventListener(t.FIRST_QUARTILE,this.Kai),this.Hai.removeEventListener(t.LOADED,this.Yai),this.Hai.removeEventListener(t.MIDPOINT,this.Jai),this.Hai.removeEventListener(t.STARTED,this.Zai),this.Hai.removeEventListener(t.STREAM_INITIALIZED,this.$ai),this.Hai.removeEventListener(t.THIRD_QUARTILE,this.tui),this.Hai.removeEventListener(t.AD_BREAK_ENDED,this.iui),this.hr(),this.eui&&Ao(this.eui)}sui(t){this.Hai.onTimedMetadata(t)}nui(t,i,e){this.Hai.processMetadata(t,i,e)}rui(t){const i=this.Hai.previousCuePointForStreamTime(t);if(i)return{RO:i.end,CO:i.start,pP:i.played}}hui(t,i){const e=this.rui(t);if(!e)return;const s=t>i&&e.RO>i,n=e.RO>t&&e.CO<=t;return e.pP||!s&&!n?void 0:e.CO}zai(t){this.T2t&&(this.T2t.style.display=t?"block":"none")}constructor(t,i,e){super(),this.Hai=void 0,this.T2t=void 0,this.eui=void 0,this.Gai=void 0,this.iui=void 0,this.Xai=void 0,this.Q1t=void 0,this.jai=void 0,this.Qai=void 0,this.Ts=void 0,this.Kai=void 0,this.Yai=void 0,this.Jai=void 0,this.Zai=void 0,this.$ai=void 0,this.tui=void 0,this.Hai=t,this.T2t=i,this.eui=e,this.Gai=t=>{this.zai(!0);const i=V6(t),e=W6(t);this.So(new E6(i,e))},this.iui=t=>{this.zai(!1);const i=V6(t),e=W6(t);this.So(new x6(i,e))},this.Xai=t=>{const i=V6(t),e=W6(t);this.So(new P6(i,e))},this.Q1t=t=>{const i=V6(t),e=W6(t);this.So(new C6(i,e))},this.jai=t=>{const i=V6(t),e=W6(t);this.So(new O6(i,e))},this.Qai=t=>{const i=V6(t),e=W6(t);this.So(new I6(i,e))},this.Ts=t=>{const i=V6(t),e=W6(t);this.So(new R6(i,e))},this.Kai=t=>{const i=V6(t),e=W6(t);this.So(new N6(i,e))},this.Yai=t=>{const i=V6(t),e=W6(t);this.So(new k6(i,e))},this.Jai=t=>{const i=V6(t),e=W6(t);this.So(new B6(i,e))},this.Zai=t=>{const i=V6(t),e=W6(t);this.So(new D6(i,e))},this.$ai=t=>{const i=V6(t),e=W6(t);this.So(new M6(i,e))},this.tui=t=>{const i=V6(t),e=W6(t);this.So(new L6(i,e))},this.T2t&&(this.T2t.style.display="none",this.Hai.setClickElement(this.T2t));const s=google.ima.dai.api.StreamEvent.Type;this.Hai.addEventListener(s.AD_BREAK_STARTED,this.Gai),this.Hai.addEventListener(s.AD_PROGRESS,this.Xai),this.Hai.addEventListener(s.CLICK,this.Q1t),this.Hai.addEventListener(s.COMPLETE,this.jai),this.Hai.addEventListener(s.CUEPOINTS_CHANGED,this.Qai),this.Hai.addEventListener(s.ERROR,this.Ts),this.Hai.addEventListener(s.FIRST_QUARTILE,this.Kai),this.Hai.addEventListener(s.LOADED,this.Yai),this.Hai.addEventListener(s.MIDPOINT,this.Jai),this.Hai.addEventListener(s.STARTED,this.Zai),this.Hai.addEventListener(s.STREAM_INITIALIZED,this.$ai),this.Hai.addEventListener(s.THIRD_QUARTILE,this.tui),this.Hai.addEventListener(s.AD_BREAK_ENDED,this.iui)}};function U6(t){const i=google.ima.dai.api.StreamRequest.StreamFormat;var e;return{apiKey:t.apiKey,authToken:t.authToken,format:"dash"===t.format?i.DASH:i.HLS,networkCode:t.networkCode,streamActivityMonitorId:t.streamActivityMonitorID,adTagParameters:t.adTagParameters,omidAccessModeRules:null!=(e=L3(t.omidAccessModeRules))?e:{}}}function V6(t){const i=t.getStreamData(),e=i.adProgressData;let s;e&&(s={P9t:e.adBreakDuration,oui:e.duration,I9t:e.adPosition,zx:e.currentTime,ct:e.duration,C9t:e.totalAds});return{aui:s,uui:(i.cuepoints||[]).map(t=>({CO:t.start,RO:t.end,pP:t.played})),cui:i.errorMessage||void 0,dui:i.manifestFormat||void 0,lui:i.streamId||void 0,fui:(i.subtitles||[]).map(t=>({_ui:t.webvtt,gui:t.ttml,bs:t.language})),Yu:i.url}}function H6(t){return{VYt:t.getAdSlotId(),G4t:t.getContent(),GT:t.getContentType(),Mi:t.getHeight(),Ti:t.getWidth()}}function W6(t){const i=t.getAd();if(!i)return;const e=i.getAdPodInfo(),s=i.getCompanionAds().map(H6);return{fJt:i.getAdId(),v7t:{I9t:e.getAdPosition(),G0t:e.getMaxDuration(),Iri:e.getPodIndex(),qOt:e.getTimeOffset(),C9t:e.getTotalAds()},QKt:i.getAdSystem(),Rri:i.getAdvertiserName(),FYt:i.getApiFramework(),sYt:s,wYt:i.getCreativeId(),eti:i.getCreativeAdId(),Dri:i.getDealId(),_N:i.getDescription(),ct:i.getDuration(),gq:i.getTitle(),pui:i.getUniversalAdIdRegistry(),mui:i.getUniversalAdIdValue(),J7t:i.getVastMediaHeight(),Y7t:i.getVastMediaWidth(),X7t:i.getWrapperAdIds(),j7t:i.getWrapperAdSystems(),Q7t:i.getWrapperCreativeIds()}}function q6(){const t=h.body.lastElementChild;if(t instanceof HTMLIFrameElement&&"Advertisement"===t.title)return t}r();var z6=class extends i6{constructor(t){super(t),this.q4t=!0,this.Zb=t.X0t}};r();var G6=class extends i6{a1t(){return this.wui.getAdSystem()}d1t(){return this.od.Khi.Syt}get o(){return this.wui.getAdId()}get ct(){return this.wui.getDuration()}get KYt(){var t,i;return null==(i=this.wui)||null==(t=i.ad)?void 0:t.clickThroughUrl}get wYt(){return this.wui.getCreativeId()}get kJt(){return this.wui.getSkipTimeOffset()}constructor(t,i){super(t),this.wui=void 0,this.wui=i}},X6="urn:google:dai:2018",j6=class extends Gn{get Vhi(){return ss.GOOGLE}Oai(){return!1}async BW(t,i,e){if(t&&i&&(t!==this.yui||i!==this.bui)){if(void 0===this.Hai){var n,r;if(void 0===(null==(r=s.google)||null==(n=r.ima)?void 0:n.dai))throw new m("IMA DAI SDK missing for THEOads");this.Hai=new google.ima.dai.api.StreamManager(this.k5t.xe.querySelector("video"),this.Aui)}return this.yui=t,this.bui=i,this.Sui=this.Tui(),this.Sui}}Tui(){const t=this.Hai;if(!t)return Promise.resolve();this.kui(t),t.reset();const i=new google.ima.dai.api.PodStreamRequest;i.networkCode=this.yui,i.customAssetKey=this.bui,i.adTagParameters=this.loi,this.Eui&&(i.streamActivityMonitorId=this.Eui),i.format="hls";const e=this.xui(t,[google.ima.dai.api.StreamEvent.Type.STREAM_INITIALIZED,google.ima.dai.api.StreamEvent.Type.ERROR]).then(i=>{if(i.type===google.ima.dai.api.StreamEvent.Type.ERROR)throw new m("DAI stream request failed");this.Pui=i.getStreamData(),this.Iui(t)});return t.requestStream(i),e}xui(t,i,e){return new Promise((s,n)=>{if(e&&e.Hg)return n(new Qc);const r=t=>{o(),s(t)},h=()=>{o(),n(new Qc)},o=()=>{for(const e of i)t.removeEventListener(e,r);e&&e.jg(h)};for(const e of i)t.addEventListener(e,r);e&&e.Xg(h)})}doi(t){void 0===t&&(t={}),super.doi(t),this.Cui(this.loi)}Cui(t){var i;void 0===t&&(t={}),null==(i=this.Hai)||i.replaceAdTagParameters(t)}async Rui(t){var i,e;return(null==(i=this.xoi)?void 0:i.ghi)&&!S(this.xoi.ghi)?this.xoi.ghi:this.Dui&&(null==(e=this.xoi)?void 0:e.Qvt)?await ws(()=>this.Nui(),t,4,500,5e3):void 0}async Nui(){const t=this.Dui+"/"+this.yui+"/"+this.bui+"/"+this.xoi.Qvt+".json",i=new ro({Yu:t,fk:Bi.BT,Hk:Qe.GET,Wk:1e3});let e;try{e=await this.k5t.Dx.vk(i)}catch(t){throw new ys($c.NETWORK,xs.UNKNOWN_AD_RESPONSE,"The ad's PodId could not be loaded.")}if(!pA(e))throw new ys($c.NETWORK,xs.UNKNOWN_ERROR,"Something went wrong while requesting JSON from server.");const s=await e.lk();if(s)return s.podid}async Fai(t,i,e,s){void 0===s&&(s=!1);const n=await this.poi(t,i,e);await this.Eoi(n,t,e,void 0,s)}async poi(t,i,e){var s;this.xoi=t;const n=t.Hhi,r=t.Whi;this._oi(t.Ihi);const h=Y({},this.loi,t.phi);this.Cui(h),await this.BW(n,r,e);const o=zd.Dh(t.Syt),a=Number(o.searchParams.get("d")),u=_.floor(1e3*_.min(a,t.ahi-i)),c=await this.Rui(e);if(!c)throw new m("Something went wrong with retrieving the PodID from the server.");(null==(s=this.Pui)?void 0:s.streamId)||await this.Sui;const d=zd.Dh("https://dai.google.com/linear/pods/v1/hls/network/"+this.yui+"/custom_asset/"+this.bui);"V2"===t.qhi?d.pathname+="/ad_break_id/"+c+".m3u8":d.pathname+="/pod/"+c+".m3u8";const l=this.Pui.streamId;d.searchParams.set("stream_id",l),d.searchParams.set("pd",String(u));return ra({sources:{src:d.toString()}})}Soi(){this.k5t.nt.NI.forEach(t=>this.Wn(new vS(t))),this.k5t.nt.wn(N.rI,this.Wn),super.Soi()}koi(){super.koi(),this.k5t.nt.mn(N.rI,this.Wn)}Bui(t){if(t.Lt===us.zU&&!(t.Km!==nh.ID3&&t.Km!==nh.EVENT_STREAM||t.Km===nh.EVENT_STREAM&&t.eC!==X6)){if(t.wn(Te.uI,this.Mui),t.wn(Te.dI,this.Joi),t.L)for(const i of t.L.NI)this.Mui(new Ml(i));t.Qk=xh.iC,this.Lui=t}}Iui(t){t&&(t.addEventListener(google.ima.dai.api.StreamEvent.Type.ERROR,this.Oui),t.addEventListener(google.ima.dai.api.StreamEvent.Type.CLICK,this.Oui),t.addEventListener(google.ima.dai.api.StreamEvent.Type.STARTED,this.Oui),t.addEventListener(google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,this.Oui),t.addEventListener(google.ima.dai.api.StreamEvent.Type.MIDPOINT,this.Oui),t.addEventListener(google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,this.Oui),t.addEventListener(google.ima.dai.api.StreamEvent.Type.COMPLETE,this.Oui),t.addEventListener(google.ima.dai.api.StreamEvent.Type.AD_PERIOD_STARTED,this.Oui),t.addEventListener(google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,this.Oui),t.addEventListener(google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,this.Oui),t.addEventListener(google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,this.Oui),t.addEventListener(google.ima.dai.api.StreamEvent.Type.RESUMED,this.Oui))}kui(t){t&&(t.removeEventListener(google.ima.dai.api.StreamEvent.Type.ERROR,this.Oui),t.removeEventListener(google.ima.dai.api.StreamEvent.Type.CLICK,this.Oui),t.removeEventListener(google.ima.dai.api.StreamEvent.Type.STARTED,this.Oui),t.removeEventListener(google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,this.Oui),t.removeEventListener(google.ima.dai.api.StreamEvent.Type.MIDPOINT,this.Oui),t.removeEventListener(google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,this.Oui),t.removeEventListener(google.ima.dai.api.StreamEvent.Type.COMPLETE,this.Oui),t.removeEventListener(google.ima.dai.api.StreamEvent.Type.AD_PERIOD_STARTED,this.Oui),t.removeEventListener(google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,this.Oui),t.removeEventListener(google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,this.Oui),t.removeEventListener(google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,this.Oui),t.removeEventListener(google.ima.dai.api.StreamEvent.Type.RESUMED,this.Oui))}Ed(){this.ooi=this.xoi,this.xoi=void 0,this.w1t=this.y5t(this.ooi),this.w1t?this.R5t.So(new Ta(this.w1t)):zd.dm("Started an ad break without having a current adbreak to our knowledge")}Bd(t){super.Bd(t),this.Fui=-1,this.Uui=void 0}async hr(){var t;await super.hr(),this.kui(this.Hai),null==(t=this.Hai)||t.reset(),this.Hai=void 0,this.Pui=void 0,this.Sui=void 0,this.Eui=void 0,this.bui=void 0,this.yui=void 0,this.voi=!0,this.Fui=-1,this.Uui=void 0;const i=q6();void 0!==i&&Ao(i)}async kn(){var t;await super.kn(),null==(t=this.Lui)||t.kn()}constructor(t,i,e,s,n,r={},h,o){super(t,i,s,n,r),this.Hai=void 0,this.Pui=void 0,this.Sui=void 0,this.Lui=void 0,this.yui=void 0,this.bui=void 0,this.Eui=void 0,this.Dui=void 0,this.Aui=void 0,this.Fui=-1,this.Uui=void 0,this.Vui=void 0,this.Wn=t=>{const i=t.Ht;this.Bui(i)},this.Mui=t=>{t.PO.wn(Js.QL,this.Hui)},this.Joi=t=>{t.PO.mn(Js.QL,this.Hui)},this.Hui=t=>{var i,e;if(this.Pui)if((null==(i=this.Lui)?void 0:i.Km)===nh.ID3){const i=t.PO.U;var s;if(vP(i))if(this.Fui<=t.PO.CO&&this.Uui!==i.text)this.Fui=t.PO.CO,this.Uui=i.text,null==(s=this.Hai)||s.onTimedMetadata({TXXX:i.text})}else if((null==(e=this.Lui)?void 0:e.Km)===nh.EVENT_STREAM){var n;const i=t.PO.U;null==(n=this.Hai)||n.onTimedMetadata({[X6]:i})}},this.Oui=t=>{switch(this.w1t&&(this.w1t.X0t=this.k5t.Nd()-this.k5t.Gx()),t.type){case google.ima.dai.api.StreamEvent.Type.ERROR:this.R5t.So(new $h($c.GENERAL));break;case google.ima.dai.api.StreamEvent.Type.AD_PERIOD_STARTED:if(this.ooi)break;this.Ed(),this.Vui=zd.Og(this.Wui,250),this.Cui(this.loi);break;case google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED:this.Vui&&zd.Lg(this.Vui),this.ooi||this.Ed();break;case google.ima.dai.api.StreamEvent.Type.STARTED:{var i;const e=t.getAd();this.u1t=new G6(this.w1t,e),null==(i=this.ooi)||i.er({ad:this.u1t}),this.R5t.So(new nc(this.u1t,this.Yri(this.k5t.Gx())));break}case google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE:this.R5t.So(new ie(this.u1t,this.Yri(this.k5t.Gx())));break;case google.ima.dai.api.StreamEvent.Type.MIDPOINT:this.R5t.So(new xe(this.u1t,this.Yri(this.k5t.Gx())));break;case google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE:this.R5t.So(new Qs(this.u1t,this.Yri(this.k5t.Gx())));break;case google.ima.dai.api.StreamEvent.Type.COMPLETE:this.R5t.So(new fc(this.u1t,this.Yri(this.k5t.Gx()))),this.u1t=void 0;break;case google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED:if(!this.w1t)break;this.w1t.X0t>1.5&&this.Wui()}},this.Wui=()=>{var t;this.u1t=new z6(this.w1t),null==(t=this.ooi)||t.er({ad:this.u1t}),this.R5t.So(new nc(this.u1t,this.Yri(this.k5t.Gx())))},this.Aui=e,this.Eui=h,this.Dui=o}};r();var Q6=class extends Jn{qui(){}async Eoi(t,i,e,s){await this.oa.Ta(t,s),this.zui(this.oa,i,e)}zui(t,i,e){i&&t.Xx(i),e&&t.QP()}Gui(t){}constructor(t){super(t)}};r(),r();var yh=Promise,K6=class extends Gn{get Vhi(){return ss.COMPANION}Oai(){return!0}BW(t,i,e){return yh.resolve()}Fai(t,i,e,s){return void 0===s&&(s=!1),this.xoi=t,this.yoi(t,i),yh.resolve()}async Eoi(t,i,e,s,n){return yh.resolve()}async poi(t,i,e){this.xoi=t;return ra({sources:{src:t.Syt}})}uoi(t){this.ePt=t-this.k5t.Gx(),this.U9t(t)}bd(t){if(!this.ooi)return void zd.um("Got timeupdate without a current interstitial");const i=this.Yri(t.currentTime);this.ooi.dhi(i),this.ooi.pP&&this.Bd(i)}Yri(t){return this.ePt+t}constructor(...t){super(...t),this.ePt=0,this.Toi=t=>{this.Bd(this.Yri(t.currentTime))}}};r(),r(),r();var Y6=class extends i6{a1t(){return this.Xui.QKt}d1t(){return this.od.Khi.Syt}get o(){return this.Xui.fJt}get ct(){return this.Xui.ct}get KYt(){}get wYt(){return this.Xui.wYt}get kJt(){return this.Xui.tti}constructor(t,i){super(t),this.Xui=void 0,this.Xui=i}},J6=class extends Gn{get Vhi(){return ss.CSAI}BW(t,i,e){return yh.resolve()}QP(){this.hoi&&this.Nti.kti()}jP(){this.hoi&&this.Nti.jP()}coi(t){this.hoi&&this.Nti.UP(t)}async Fai(t,i,e,s){return void 0===s&&(s=!1),this.xoi=t,this.jui(t)}async jui(t){const i=this.u6t(this.Qui(t));if(await this.Nti.r8t(i,{Yti:void 0,Jti:void 0,Zti:!0,z9:void 0,$ti:void 0,tii:void 0}),!this.Nti.xti()){const t=this.dnt.oP?0:this.dnt.OP;this.Nti.UP(t)}}u6t(t){return{f6t:this.k5t.xe.offsetWidth,v6t:this.k5t.xe.offsetHeight,_6t:this.k5t.xe.offsetWidth,g6t:this.k5t.xe.offsetHeight,p6t:!0,m6t:this.dnt.oP,w6t:t,y6t:void 0,b6t:void 0,A6t:0}}async poi(t,i,e){this.xoi=t;return ra({ads:[{integration:"google-ima",sources:this.Qui(t)}]})}Qui(t){const i=new URL(t.Syt),e=i.searchParams;this._oi(t.Ihi);const s=Y({},this.loi,t.phi);for(const t of w.keys(s))e.set(t,s[t]);return i.toString()}Soi(){super.Soi();const t=this.Nti.j0t;null==t||t.wn(I3.U8t,this.M9t),null==t||t.wn(Nc._8t,this.Kui),null==t||t.wn(Nc.v8t,this.Yui),null==t||t.wn(Nc.D8t,this.F9t),null==t||t.wn(Nc.m8t,this.Jui),null==t||t.wn(Nc.S8t,this.Zui),null==t||t.wn(Nc.XJt,this.$ui),null==t||t.wn(Nc.T8t,this.tci),null==t||t.wn(Nc.jJt,this.ici),null==t||t.wn(Nc.y8t,this.eci),null==t||t.wn(Nc.Yz,this.sci),null==t||t.wn(Nc.b8t,this.nci)}koi(){const t=this.Nti.j0t;null==t||t.mn(I3.U8t,this.M9t),null==t||t.mn(Nc._8t,this.Kui),null==t||t.mn(Nc.v8t,this.Yui),null==t||t.mn(Nc.D8t,this.F9t),null==t||t.mn(Nc.m8t,this.Jui),null==t||t.mn(Nc.S8t,this.Zui),null==t||t.mn(Nc.XJt,this.$ui),null==t||t.mn(Nc.T8t,this.tci),null==t||t.mn(Nc.jJt,this.ici),null==t||t.mn(Nc.y8t,this.eci),null==t||t.mn(Nc.Yz,this.sci),null==t||t.mn(Nc.b8t,this.nci),super.koi()}L9t(){if(this.rci&&(this.rci.style.display="block"),!this.hoi){const t=this.dnt.oP?0:this.dnt.OP;this.Nti.UP(t)}this.hci()}async O9t(){this.w1t&&this.Bd(this.Yri(this.w1t.G0t))}aci(){var t,i;null==(t=this.ooi)||t.er({ad:this.u1t}),this.uci=this.Yri(null==(i=this.k5t)?void 0:i.Gx()),this.R5t.So(new nc(this.u1t,this.uci))}cci(){const t=this.uci+this.u1t.ct;this.R5t.So(new fc(this.u1t,t)),this.u1t=void 0}async hr(){await super.hr(),this.Nti.kn(),this.uci=0}constructor(t,i,e,s,n,r={}){super(i,e,s,n,r),this.Nti=void 0,this.rci=void 0,this.dnt=void 0,this.uci=0,this.M9t=async t=>{var i;this.R5t.So(new $h($c.GENERAL,null==(i=t.J9t.D7t)?void 0:i.Iy))},this.Kui=()=>{this.L9t()},this.Yui=()=>{this.O9t()},this.F9t=async()=>{await this.O9t()},this.Jui=t=>{const i=t.jnt;i&&this.w1t&&(this.u1t=new Y6(this.w1t,i),this.aci())},this.Zui=()=>{this.R5t.So(new ie(this.u1t,this.Yri(this.k5t.Gx())))},this.$ui=()=>{this.R5t.So(new xe(this.u1t,this.Yri(this.k5t.Gx())))},this.tci=()=>{this.R5t.So(new Qs(this.u1t,this.Yri(this.k5t.Gx())))},this.ici=()=>{this.cci()},this.eci=()=>{this.k5t.So(new vt(this.Yri(this.k5t.Gx()))),this.k5t.So(new mo(this.Yri(this.k5t.Gx())))},this.sci=()=>{this.k5t.So(new Si(this.Yri(this.k5t.Gx())))},this.nci=()=>{this.Xai()},this.hci=()=>{this.xoi?(this.ooi=this.xoi,this.xoi=void 0,this.w1t=this.y5t(this.ooi),this.R5t.So(new Ta(this.w1t))):zd.um("Started an ad break without having a current ad break to our knowledge")},this.Toi=t=>{this.Bd(this.Yri(t.currentTime))},this.dnt=t,this.rci=zn(this.k5t.Cd)?this.k5t.zP():void 0;const h=new A5(this.rci,this.k5t.xe),o=new P5(h,this.k5t.Wu),a=new C5(this.k5t);this.Nti=new $3(h,a,o)}},Z6=class extends J6{Oai(){return!1}Xai(){const t=this.Nti.I7t();if(!this.w1t||void 0===t)return;const i=this.w1t.G0t-t;this.k5t.Xx(i);const e=this.k5t.ihi?new Date(this.k5t.ihi.getTime()+1e3*i):void 0;this.k5t.So(new B(i,e))}async hr(){await super.hr(),this.k5t.mn(d.uo,this.dci)}constructor(t,i,e,s,n,r={}){super(t,i,e,s,n,r),this.dci=()=>{this.ooi||this.Nti.Tti()},this.k5t.wn(d.uo,this.dci)}};r();var $6=class extends J6{Oai(){return!0}async Eoi(t,i,e,s,n){await this.Fai(i,this.dnt.Gx(),e),this.Nti.Tti()}Xai(){const t=this.Nti.I7t();if(!this.w1t||void 0===t)return;var i;let e=null!=(i=this.lci)?i:0;e+=this.w1t.G0t-t,this.dnt.Xx(e);const s=this.fci?new Date(this.fci.getTime()+1e3*e):void 0;this.dnt.So(new B(e,s))}L9t(){super.L9t(),this.lci=this.dnt.Gx(),this.fci=this.dnt.Vx,this.dnt.jP()}async O9t(){await super.O9t(),this.dnt.QP()}Yri(t){return t}constructor(...t){super(...t),this.lci=void 0,this.fci=void 0}},t8=class extends Jn{get Tai(){var t;return[null==(t=this.Eai)?void 0:t.hoi,...this.vci.Tai].filter(it)}get kai(){return this._ci.Coi}_nt(){return this.dnt.Jc}ynt(){return this.gci.Ca}get phi(){var t,i,e;return null!=(e=null!=(i=this.loi)?i:null==(t=this.pci)?void 0:t.adTagParameters)?e:{}}jx(){return this.Ls}vnt(){return this.dnt.Kst}Yx(){var t;return null!=(t=this.Wz)?t:super.Yx()}Zx(){var t;return null!=(t=this.nq)?t:super.Zx()}GP(){this.dnt.GP()}lai(t){return t}QP(){var t;super.QP(),null==(t=this.Eai)||t.QP()}jP(){var t;super.jP(),null==(t=this.Eai)||t.jP()}UP(t){var i;super.UP(t),null==(i=this.Eai)||i.coi(t)}uP(t){var i;super.uP(t);const e=t?0:this.oa.OP;null==(i=this.Eai)||i.coi(e)}async Ta(t,i){if(await this.Xpt(),await super.Ta(t,i),void 0===t||void 0===t.ads)return;const e=hh(t.ads,K2);void 0!==e&&(this.mci(),this.wci(),this.yci(),this.pci=e,this.bci=e.backdropLShape,this.vci.phi=e.adTagParameters,this._ci.vai=function(t){switch(t){case"single":return Er.SINGLE;case"l-shape":return Er.LSHAPE_AD;case"double":return Er.DOUBLE;case"single-if-mobile":return zs.Ks?Er.SINGLE:void 0;default:return}}(this.pci.overrideLayout),this._ci.Woi=this.pci.useId3,this.dnt.wn(Jr.EM,this.Kq),this.Wu.wn(Qh.yn,this.Att),this.wn(d.Jw,this.rjt),await this.Aci(ss.DEFAULT,void 0,void 0),this.dnt.wn(Jr.PM,this.YG))}async Sci(t){this.Tci();const i=void 0===t.networkCode||void 0===t.customAssetKey?ss.DEFAULT:ss.GOOGLE;await this.Aci(i,t.networkCode,t.customAssetKey),t.sseEndpoint&&this._ci.Doi(t.sseEndpoint)}wci(){Kd(this.Ls,this.kci),Go(this.Eci),Go(this.kci),this.Eci.appendChild(this.kci),this.Ls.appendChild(this.Eci)}xci(){Kd(this.kci,this.Ls),Ll(this.kci),Ll(this.Eci),Ao(this.kci),Ao(this.Eci)}async Aci(t,i,e){var s,n,r;const h=this.t4t(),o=this.Aui;if(!h||!o)return;if(t===(null==(s=this.Eai)?void 0:s.Vhi))return;var a;const u=null!=(a=null==(n=this.Eai)?void 0:n.K0t)?a:[];switch(await(null==(r=this.Eai)?void 0:r.hr()),t){case ss.GOOGLE:var c,d,l;this.Eai=new j6(h,this.Pci,o,u,this.Bai,this.phi,null==(c=this.pci)?void 0:c.streamActivityMonitorId,null==(d=this.pci)?void 0:d.retrievePodIdURI),await(null==(l=this.Eai)?void 0:l.BW(i,e));break;case ss.COMPANION:this.Eai=new K6(this.dnt,this.Pci,u,this.Bai,this.phi);break;case ss.CSAI:if(h===this.dnt){this.Eai=new $6(this.dnt,h,this.Pci,u,this.Bai,this.phi);break}this.Eai=new Z6(this.dnt,h,this.Pci,u,this.Bai,this.phi);break;case ss.DEFAULT:default:this.Eai=new T6(h,this.Pci,u,this.Bai,this.phi)}}async eai(t,i){var e;this.Ici||void 0===t||void 0===i||(null==(e=this.Eai)?void 0:e.Vhi)!==ss.GOOGLE&&await this.Aci(ss.GOOGLE,t,i)}Qq(t){void 0===this.Zx()&&(this.nq=t,this.Wz=ar(t),this.So(new el(t)))}Tci(){this.dnt.wn(d.py,this.Cci),this.dnt.wn(d.$w,this.JG)}Rci(){this.dnt.mn(d.py,this.Cci),this.dnt.mn(d.$w,this.JG)}Dci(){var t,i;this.Pci.u4t.wn("Knt",this.Nci),null==(t=this.Eai)||t.wn(h6.AD_ENDED,this.Nci),null==(i=this.t4t())||i.wn(hc.ma,this.Bci)}Mci(){var t,i;this.Pci.u4t.mn("Knt",this.Nci),null==(t=this.Eai)||t.wn(h6.AD_ENDED,this.Nci),null==(i=this.t4t())||i.mn(hc.ma,this.Bci)}Lci(t){const i=()=>{this.Oci=void 0};this.Oci=t().then(i).catch(i)}Fci(t,i){this.gci.So(new A6(t,i).Ca),t.pP=!0,i8(t)&&this.Oci&&(this.Ici=void 0)}async Uci(){var t;null==(t=this.Eai)||t.Soi(),this.Vci()}async Hci(){var t;this.Aoi(this.Wci);const i=this.Ici;if(void 0===i)return this.I3t();var e,s;i.Ihi!==Er.LSHAPE_CONTENT&&(await(null==(e=this.t4t())?void 0:e.Ta(this.qci,(new Zc).Yg)),null==(s=this.t4t())||s.QP());null==(t=this.Eai)||t.uoi(this.Gx()),this.gci.So(new vh(i).Ca),this.Vci()}async I3t(){var t;this.zci(),null==(t=this.Eai)||t.koi(),this.Aoi(this.Wci),this.Wci=void 0}Vci(){this.zci(),this.Wci=this.Ici,this.Ici=void 0,this.Gci=void 0,this.Xci=void 0}zci(){const t=this.oa.DP,i=this.oa.MP;t===this.jci&&i===this.Qci||(this.jci=t,this.Qci=i,this.So(new Vs))}boi(t){var i;i8(t)&&(null==(i=this.Eai)||i.boi(t),this.pai(this.Gx()));t.wn("ohi",this.Kci),this.gci.So(new w6(t.Ont()))}Aoi(t){if(Ct(this._ci.Coi,t)){var i;if(this._ci.Aoi(t),i8(t))null==(i=this.Eai)||i.Aoi(t);else e8(t)&&(this.vci.Dai(t),this.Yci.delete(t.o));t.mn("ohi",this.Kci),this.gci.So(new y6(t).Ca)}}pai(t){this.Jci(t),this.Zci()}Jci(t){this.$ci(t),this.tdi(t),this.idi(t)}$ci(t){if(void 0!==this.Oci)return;let i;const e=[];for(const s of this._ci.Coi.filter(i8))s.pP?e.push(s):s!==this.Wci&&(t>=s.CO+5||this.Wci&&s.CO+5<this.Wci.ahi?(s.pP=!0,e.push(s)):void 0!==i&&i.CO<s.CO||(i=s));for(const t of e)this.Aoi(t);this.Ici!==i&&(this.edi(),this.Ici=i)}edi(){var t;if(void 0!==this.Ici){var i;const t=void 0!==this.Wci;null==(i=this.t4t())||i.Gui(t)}null==(t=this.sdi)||t.Zg(),this.Gci=void 0,this.Xci=void 0}ndi(t,i){var e;if(this.rdi())return!!(null==(e=this.Eai)?void 0:e.aoi());let s=!1;const n=Uo.jn(this.Ux()).iL(i,5);void 0!==n&&(s=n.An(0)>=t.CO);const r=t.ahi,h=i>=t.CO&&(void 0===r||i<r);return s&&!h}tdi(t){if(void 0===this.Ici||void 0!==this.Gci)return;const i=this.Ici;i8(i)&&void 0===this.Oci&&this.ndi(i,t)&&(this.sdi=new Zc,this.Gci=Cu(this.Fai(i,t,this.sdi.Yg),this.sdi).catch(t=>{Ce(t)||this.Fci(i,"Could not load the ad break: "+t.message)}))}async Fai(t,i,e){var s,n;(await this.Aci(t.Vhi,t.Hhi,t.Whi),await(null==(s=this.Eai)?void 0:s.moi(t,e).catch(()=>{this.gci.So(new A6(t,"Could not load the backdrop.").Ca)})),this.Wci&&t.Ihi!==Er.LSHAPE_CONTENT)?this.qci=await(null==(n=this.Eai)?void 0:n.goi(t,i,e)):await this.hdi(t,i,e)}async hdi(t,i,e){var s;await(null==(s=this.Eai)?void 0:s.Fai(t,i,e))}idi(t){if(void 0===this.Ici||void 0!==this.Xci||void 0!==this.Wci)return;const i=this.Ici.ahi;var e;t>=this.Ici.CO&&(void 0===i||t<i)&&(this.Xci=null==(e=this.Gci)?void 0:e.then(()=>{this.Lci(()=>this.Uci())}))}doi(t){var i,e,s;this.loi=t,null==(e=this.Eai)||e.doi(null!=(s=null!=t?t:null==(i=this.pci)?void 0:i.adTagParameters)?s:{}),this.vci.phi=t}Zci(){const t=this.Gx(),i=[];this.Yci.forEach(e=>{t>=e.CO&&(void 0===e.ahi||t<e.ahi)&&!e.pP||i.push(e)}),i.forEach(t=>{this.vci.Dai(t),this.Yci.delete(t.o),this.Aoi(t)});for(const i of this._ci.Coi.filter(e8)){const e=i.ahi;if(void 0!==e&&t>=e||i.pP)continue;const s=i.CO,n=i.CO+i.ct;t>=s&&t<=n&&!this.Yci.has(i.o)&&this.Pai(i).catch(()=>{this.Fci(i,"Could not load the overlay."),this.Aoi(i)})}}async Pai(t){await this.vci.Pai(t),this.Yci.set(t.o,t),this.gci.So(new vh(t).Ca)}rdi(){return void 0!==this.Wci&&void 0!==this.Ici&&rs(this.Wci.ahi,this.Ici.CO,5)}async Xpt(){var t,i;this.nq=void 0,this.Wz=void 0,this.pci=void 0,this.odi=!1,this.adi=!0,this.udi=NaN,this.Qci=NaN,this.jci=NaN,this.Wci=void 0,null==(t=this.sdi)||t.Zg(),this.Gci=void 0,this.Xci=void 0,this.Ici=void 0,this.Oci=void 0,await(null==(i=this.Eai)?void 0:i.hr()),this.Eai=void 0,this._ci.hr(),this.vci.hr(),this.Yci.clear(),this.Wu.mn(Qh.yn,this.Att),this.oa.mn(d.Jw,this.rjt),this.dnt.mn(Jr.EM,this.Kq),this.dnt.mn(Jr.PM,this.YG),this.Rci(),this.Mci(),this.xci(),this.cdi&&zd.Lg(this.cdi),this.cdi=void 0}async KP(){await this.Xpt(),await super.KP()}async kn(){var t;await this.KP().catch(gs),this._ci.kn(),await(null==(t=this.Eai)?void 0:t.kn()),await super.kn()}ddi(){return void 0!==this.Wci}eI(t){if(!this.pci)return super.eI(t);switch(t.type){case d.Ww:case d.Pw:case Jr.EM:return!this.adi;case Jr.kM:return!this.adi||(this.adi=!1,!1);case d.Cw:{const t=this.Nd();return t!==this.udi&&(this.udi=t,this.So(new zr(t))),!0}case Jr.xM:var i;return void 0!==this.Wci&&(null==(i=this.Eai)?void 0:i.Vhi)===ss.CSAI;case d.Jw:return this.zci(),!0;case hc.ma:return void 0!==this.Wci}return super.eI(t)}constructor(t){var i;super(t),this.dnt=void 0,this.Eci=void 0,this.Ls=void 0,this.kci=void 0,this.Aui=void 0,this.nq=void 0,this.Wz=void 0,this.pci=void 0,this.bci=void 0,this.gci=void 0,this.Eai=void 0,this.Pci=void 0,this.loi=void 0,this.Wci=void 0,this.Ici=void 0,this.Gci=void 0,this.sdi=void 0,this.Xci=void 0,this.Oci=void 0,this.qci=void 0,this._ci=void 0,this.Bai=void 0,this.vci=void 0,this.Yci=Ba(),this.adi=!0,this.udi=NaN,this.Qci=NaN,this.jci=NaN,this.cdi=void 0,this.odi=!1,this.ldi=!0,this.YG=async()=>{this.dnt.mn(Jr.PM,this.YG),this.pci&&(this.pci.initializationDelay?this.cdi=zd.Og(async()=>{this.pci&&await this.Sci(this.pci)},1e3*this.pci.initializationDelay):await this.Sci(this.pci))},this.Kq=()=>{this.dnt.mn(Jr.EM,this.Kq),this._ci.Ooi(this.oa.nt)},this.mci=async()=>{try{await this.rnt.Fj([kR.THEOADS])}catch(t){await this.KP().catch(gs),this.Qq(bb(t,me.LICENSE_INVALID_FEATURE))}},this.Att=t=>{j2(this.Eci,this.oa.MP,this.oa.DP,t.width,t.height)},this.rjt=()=>{j2(this.Eci,this.oa.MP,this.oa.DP,this.Wu.Eu,this.Wu.Iu)},this.Cci=()=>{this.Jci(this.Gx()),this.Zci()},this.JG=()=>{this.Jci(this.Gx()),this.Zci()},this.Nci=async()=>{if(this.rdi()){if(this.Xci)return;this.Xci=this.Gci,await this.Xci,this.Lci(()=>this.Hci())}else this.Lci(()=>this.I3t())},this.Bci=t=>(this.Fci(this.Wci,"Error playing the current adbreak: "+t.error),this.Lci(()=>this.I3t())),this.Kci=t=>{this.gci.So(t.Ca)},this.dnt=new Q6(t),this.Ls=t.xe,this.Eci=function(){const t=h.createElement("div");return Pl(t,"theo-ads-sgai-container"),t}(),this.kci=function(){const t=h.createElement("div");return Pl(t,"theo-ads-sgai-content-player"),t}(),this.gci=new g6(this),this.Pci=new p6,null==(i=this.dnt.Jc)||i.znt(this.Pci),this.Bai=new s6(t.Dx),this._ci=new d6(this),this.vci=new m6(this.dnt,this.kci,this.Bai)}};function i8(t){return"adbreak"===t.Km}function e8(t){return"overlay"===t.Km}var s8=class extends t8{Nd(){var t;return null!=(t=this.Zb)?t:super.Nd()}nu(){var t;return null!=(t=this.Ac)?t:super.nu()}Gx(){return this.lai(super.Gx())}Hx(){return this.fdi?new Date(this.fdi.getTime()+rn(this.dnt.Gx())):super.Hx()}Ux(){const t=super.Ux();return Uo.jn(t).Ly(this.vdi)._s()}EP(){const t=super.EP();return Uo.jn(t).Ly(this.vdi)._s()}lai(t){return t+this.vdi}async Ta(t,i){await super.Ta(t,i),this.pci&&(this.Ac=t,this._di=new X5(this.dnt),this._di.gr(this.kci,this.Eci),this.nO(this._di))}yci(){}wci(){super.wci(),this.Aui=z2(this.Eci)}Tci(){super.Tci(),this.gdi()}Rci(){super.Rci(),this.pdi()}gdi(){this.dnt.wn(d.Cw,this.ejt),this.dnt.wn(Jr.PM,this.VV)}pdi(){this.dnt.mn(d.Cw,this.ejt),this.dnt.mn(Jr.PM,this.VV)}t4t(){return this.dnt}Xx(t,i){this.mdi=!0,super.Xx(t,i)}QP(){super.QP(),this.So(new vt(this.Gx())),this.ldi=!0,this.wdi=!1}jP(){this.wdi=!0,super.jP()}async hdi(t,i,e){var s,n;if(this.l$t=await(null==(s=this.Eai)?void 0:s.poi(t,i,e)),null==(n=this.Eai)?void 0:n.Oai())return;const r=new f5(this.Dxt,this.ydi),h=new P4(this.Dxt.Mxt,r,"temporary");this.bdi=h.asi(this.l$t,v5({amount:30,bandwidth:sc.Bg.pW()||this.Kst.jY}),"temporary"),this.Adi.Zg(),this.Adi=new Zc;this.ydi.jet(this.bdi,this.Dxt,"temporary").mi(this.Adi.Yg).catch(gs)}Sdi(t,i){switch(t){case Er.LSHAPE_CONTENT:case Er.LSHAPE_AD:return new Q5(this.dnt,i);case Er.SINGLE:default:return new j5(this.dnt)}}async Tdi(t){var i,e,s,n,r,h;null==(i=this.sdi)||i.Zg(),this.sdi=new Zc,await this.Aci(t.Vhi,t.Hhi,t.Whi),null==(e=this._di)||e.mr(this.kci),(null==(s=this.Eai)?void 0:s.Oai())||(this.odi=!0,this.vdi=this.Gx(),this.fdi=this.Hx(),this.dnt.wn(Jr.PM,this.VV)),this.gci.So(new vh(t).Ca),await(null==(n=this.Eai)?void 0:n.Eoi(this.l$t,t,this.sdi.Yg,void 0,!0)),this._di=this.Sdi(t.Ihi,null!=(h=t.Chi)?h:this.bci),this.B3t(this._di),this._di.gr(this.kci,this.Eci),null==(r=this.Eai)||r.uoi(this.Gx())}async Uci(){var t;if(void 0!==this.Ici&&void 0!==this.l$t)return this.pdi(),this.Rz=this.vP,await this.Tdi(this.Ici),this.Dci(),(null==(t=this.Eai)?void 0:t.Oai())||(this.kdi=!1),super.Uci()}async Hci(){var t;return(null==(t=this.Eai)?void 0:t.Vhi)!==ss.COMPANION&&(this.odi=!0,this.ehi=!1,this.vdi=this.Gx(),this.fdi=this.Hx(),this._ci.Voi(this.dnt.nt),this.dnt.wn(Jr.kM,this.Edi),this.dnt.wn(Jr.EM,this.Kq),this.dnt.wn(Jr.PM,this.VV)),super.Hci()}async I3t(){var t,i,e,s;if(this.Wci){var n;if(null==(t=this.bdi)||t.pS(),this.bdi=void 0,this.Mci(),(null==(i=this.Eai)?void 0:i.Oai())||(this.odi=!0,this.ehi=!1,this.vdi=this.Gx(),this.fdi=this.Hx(),this._ci.Voi(this.dnt.nt),this.dnt.wn(Jr.kM,this.Edi),this.dnt.wn(Jr.EM,this.Kq),this.dnt.wn(Jr.PM,this.VV),await this.dnt.Ta(this.Ac,(new Zc).Yg)),null==(e=this._di)||e.mr(this.kci),this._di=new X5(this.dnt),this._di.gr(this.kci,this.Eci),this.B3t(this._di),!(null==(s=this.Eai)?void 0:s.Oai()))this.vP=null!=(n=this.Rz)?n:1,this.dnt.QP();return this.kdi=!0,this.gdi(),super.I3t()}}async Xpt(){var t;this._di=void 0,this.Zb=void 0,this.vdi=0,this.l$t=void 0,this.Rz=void 0,this.fdi=void 0,this.kdi=!0,this.odi=!1,this.ldi=!0,this.wdi=!0,this.Adi.Zg(),this.Adi=new Zc,null==(t=this.bdi)||t.pS(),this.bdi=void 0,this.dnt.mn(Jr.kM,this.Edi),await super.Xpt()}ddi(){return super.ddi()||this.odi&&!this.mdi}eI(t){if(void 0!==this._di)switch(t.type){case d.uo:return!0;case d.jw:return!this.wdi||(this.wdi=!1,this.So(new Si(this.lai(t.currentTime))),!0);case Jr.PM:return!this.ldi||(this.ldi=!1,this.So(new mo(this.lai(t.currentTime))),!0);case Jr.xM:return this.odi||(this.ldi=!0,this.So(new SP(this.lai(t.currentTime)))),!0;case d.Zw:return this.ddi()||(this.mdi=!1,this.So(new Yr(this.lai(t.currentTime)))),!0;case d.$w:return this.ddi()||this.So(new ji(this.lai(t.currentTime))),!0;case d.Nw:return!this.kdi||(this.So(new ur(this.lai(t.currentTime))),!0);case d.py:return this.So(new B(this.lai(t.currentTime),t.currentProgramDateTime)),!0;case d.Qw:return this.So(new Et(this.lai(t.currentTime))),!0;case d.Kw:return this.So(new Ik(this.lai(t.currentTime),t.playbackRate)),!0;case d.wy:return this.ehi?(this.So(new Wi(this.lai(t.currentTime),t.volume)),!0):(this.ehi=!0,!0);case d.Rw:return this.So(new ho(this.lai(t.currentTime),t.readyState)),!0;case Jr.SM:return this.So(new Is(this.lai(t.currentTime),t.readyState)),!0;case Jr.TM:return this.So(new Zi(this.lai(t.currentTime),t.readyState)),!0;case Jr.kM:return this.So(new M(this.lai(t.currentTime),t.readyState)),!0;case Jr.EM:return this.So(new Tt(this.lai(t.currentTime),t.readyState)),!0;case Jr.AI:return this.So(new Ka(this.lai(t.currentTime),t.readyState)),!0;case d.Dw:return this.So(new wn(this.lai(t.currentTime),t.initDataType,t.initData)),!0}return super.eI(t)}constructor(t){super(t),this.Ac=void 0,this.Zb=void 0,this.l$t=void 0,this.Rz=void 0,this._di=void 0,this.vdi=0,this.mdi=!1,this.fdi=void 0,this.Dxt=void 0,this.ydi=void 0,this.Adi=new Zc,this.bdi=void 0,this.wdi=!0,this.kdi=!0,this.ehi=!0,this.ejt=t=>{this.Zb=t.duration},this.VV=()=>{this.dnt.mn(Jr.PM,this.VV),this.odi=!1},this.Edi=()=>{this.dnt.mn(Jr.kM,this.Edi),this.fdi&&(this.dnt.Vx=this.fdi,this.fdi=void 0),this.dnt.Gx()>0&&(this.vdi-=this.dnt.Gx())},this.Dxt=Wc.Bg,this.ydi=new Uc(zd.Dx)}};r();var n8=class extends Q6{get Zri(){return this.xdi}get ihi(){return this.Pdi}get jri(){return this.Idi}get Jri(){return this.pGt}get thi(){return this.Cdi}Eoi(t,i,e,s){return this.k5t.Eoi(t,i,e,s)}Rdi(t,i,e,s){var n,r;this.xdi=t,s?this.Ddi=0:this.Ddi+=e,this.Pdi=i,null==(r=this.Pdi)||r.setSeconds((null==(n=this.Pdi)?void 0:n.getSeconds())+this.Ddi)}rhi(){var t;if(void 0!==this.Ndi)return;this.pGt=void 0,this.Cdi=void 0;const i=this.Bdi;this.Bdi=void 0,null==(t=this.Mdi)||t.Zg(),a8(this.dnt)&&(this.Ldi=new Zc,this.Ndi=Cu(this.Odi(i,this.Ldi.Yg),this.Ldi).catch(bu))}hhi(){var t;this.pGt=this.xdi+this.oa.Gx(),this.ihi&&(this.Cdi=new Date(this.ihi.getTime()+1e3*this.oa.Gx()));const i=this.Ndi;this.Ndi=void 0,null==(t=this.Ldi)||t.Zg(),this.Mdi=new Zc,this.Bdi=Cu(this.Fdi(i,this.Mdi.Yg),this.Mdi).catch(bu)}Aa(){return this.dnt.Sq}Udi(){this.Vdi||(this.Vdi={source:this.dnt.nu(),duration:this.dnt.Nd(),currentTime:this.dnt.Gx(),preload:this.dnt.wP,autoplay:this.dnt.vO,playbackRate:this.dnt.vP})}async Hdi(t){this.dnt.wP=Dn.HL,this.dnt.vO=!1,this.k5t.oP=!0;const i=this.k5t.nu();await this.dnt.Ta(i,t),this.dnt.Xx(this.k5t.Gx()),this.dnt.wn(d.uo,this.HV),this.dnt.wn(d.jw,this.WV)}async Wdi(t){this.Vdi&&(this.dnt.wP=this.Vdi.preload,this.dnt.vO=this.Vdi.autoplay,this.dnt.vP=this.Vdi.playbackRate,await this.dnt.Ta(this.Vdi.source,t),this.Vdi=void 0)}async Odi(t,i){await(null==t?void 0:t.catch(gs)),this.Udi(),await this.dnt.KP(),await this.Hdi(i),this.B3t(this.dnt),this.dnt.QP()}async Fdi(t,i){await(null==t?void 0:t.catch(gs)),this.qdi=this.k5t.Gx(),this.Idi=this.qdi+this.Zri,await this.dnt.KP(),this.dnt.mn(d.uo,this.HV),this.dnt.mn(d.jw,this.WV),await this.Wdi(i),this.B3t(this.k5t),this.dnt.wn(Jr.EM,this.zdi),this.dnt.QP()}nu(){return this.Vdi?this.Vdi.source:super.nu()}Nd(){return this.Vdi?this.Vdi.duration:super.Nd()}Gdi(){return super.Nd()}EP(){const t=super.EP();return Uo.jn(t).Ly(this.Zri)._s()}Ux(){const t=super.Ux();return Uo.jn(t).Ly(this.Zri)._s()}KP(){return this.k5t.KP()}async Gui(t){this.k5t.Gui(t)}async hr(){var t,i;null==(t=this.Ldi)||t.Zg(),this.Ldi=void 0,this.Ndi=void 0,null==(i=this.Mdi)||i.Zg(),this.Mdi=void 0,this.Bdi=void 0,this.Vdi=void 0,this.xdi=0,this.Pdi=void 0,this.Idi=0,this.pGt=void 0,this.Cdi=void 0,this.qdi=0,this.Ddi=0,this.dnt.mn(Jr.EM,this.zdi),this.dnt.mn(d.uo,this.HV),this.dnt.mn(d.jw,this.WV),await this.k5t.KP()}async kn(){await this.hr(),await super.kn()}constructor(t,i){super(i),this.dnt=void 0,this.k5t=void 0,this.Ndi=void 0,this.Ldi=void 0,this.Mdi=void 0,this.Bdi=void 0,this.Vdi=void 0,this.xdi=0,this.Pdi=void 0,this.Idi=0,this.pGt=void 0,this.Cdi=void 0,this.qdi=0,this.Ddi=0,this.zdi=()=>{if(this.dnt.mn(Jr.EM,this.zdi),this.Pdi){const t=this.Pdi;t.setSeconds(this.Pdi.getSeconds()+this.qdi),this.dnt.Vx=t,this.Pdi=void 0}this.Idi-=this.dnt.Gx(),this.pGt=void 0,this.Cdi=void 0},this.HV=()=>{this.k5t.QP()},this.WV=()=>{this.k5t.jP()},this.dnt=t,this.k5t=i}};r();var r8=class extends VF{Ta(t,i){var e;return void 0!==hh(null!=(e=null==t?void 0:t.ads)?e:[],K2)?Promise.reject(new as(me.CONFIGURATION_ERROR,"THEOads must be enabled in the player configuration.")):super.Ta(t,i)}},h8=1/60,o8=class extends t8{Xdi(){this.dnt.ont.wn("presentationmodechange",this.jdi)}Qdi(){this.dnt.ont.mn("presentationmodechange",this.jdi)}Kdi(){if(this.Ydi&&!O5(this.Ydi)&&this.k5t&&this.Wci)return function(t){return t instanceof z5}(this.Ydi)?(this.Fci(this.Wci,"Cannot play L-shape content ad breaks in this representation"),void this.Lci(()=>this.I3t())):void this.Jdi(new M5(this.dnt,this.k5t),!1,!1)}uP(t){t||this.lP||this.GP(),super.uP(t)}get ont(){return this.dnt.ont}async Ta(t,i){await super.Ta(t,i),this.pci&&(this.Zdi=this.pci.backdropDoubleBox,this.Jdi(new B5(this.dnt,this.k5t),!1,!0))}yci(){const t=new Q6(function(t,i,e){const s=t.lastElementChild;t.insertBefore(i,s),G2(i);const n=new y3(new UF(i,e,new UR),va.Bg);return n.wP=Dn.HL,n.vO=!1,n}(this.Eci,this.$di,this.oa.Cd));this.k5t=new n8(this.dnt,t)}wci(){super.wci(),this.$di=function(){const t=h.createElement("div");return Pl(t,"theo-ads-sgai-ad-player"),t}(),this.Eci.appendChild(this.$di),this.Aui=z2(this.$di),this.tli()}tli(){Ll(this.kci),function(t){const i=t.style;i.boxSizing="border-box",i.position="relative",i.alignItems="center",i.border="0 solid transparent",i.borderWidth="0px",i.backgroundColor="transparent",i.backgroundRepeat="no-repeat",i.backgroundAttachment="scroll"}(this.Eci),G2(this.kci),G2(this.$di)}xci(){this.ili(),super.xci(),this.$di&&(Ao(this.$di),this.$di=void 0)}ili(){X2(this.Ls),X2(this.kci)}Jdi(t,i,e){var s;const n=null!=(s=this.Ydi)?s:this,r=null!=t?t:this.dnt;D5(n,r),void 0!==this.Ydi&&(this.Ydi.mr(this.Eci,this.kci,this.$di),this.Ydi.kn()),null==t||t.gr(this.Eci,this.kci,this.$di,n,i),this.Ydi=t,e?this.nO(r):this.B3t(r)}t4t(){return this.k5t}GP(){var t;super.GP(),null==(t=this.k5t)||t.GP()}Xx(t,i){this.eli=!0,super.Xx(t,i)}lai(t){var i,e;return t+(null!=(e=null==(i=this.k5t)?void 0:i.jri)?e:0)}Dci(){var t;super.Dci(),null==(t=this.k5t)||t.wn(d.py,this.sli),this.dnt.wn(d.qw,this.nli)}Mci(){var t;super.Mci(),null==(t=this.k5t)||t.mn(d.py,this.sli),this.dnt.mn(d.qw,this.nli)}rli(){this.Jci(this.Gx()),this.hli()}hli(){var t;if(this.rdi()||O5(this.Ydi)||(null==(t=this.Ydi)?void 0:t.Kri()))return;const i=_.min(this.k5t.Nd(),this.Wci.ct)-this.k5t.Gx(),e=this.oli(i);if(void 0===e)return;if(this.dnt.Gx()>e-.75)return;const s=Uo.jn(this.k5t.Ux()),n=this.k5t.EP();if(0===n.length)return;const r=_.min(n.end(n.length-1),this.Wci.ahi);s.MM().Cr(r)&&!this.dnt.xP&&(this.dnt.lP&&(this.dnt.QP(),this.dnt.oP=!0),this.dnt.Xx(e,{zOt:!0}))}oli(t){var i;const e=this.dnt.EP(),s=null==(i=this.Wci)?void 0:i.ahi;if(0===e.length||void 0===s)return;const n=e.start(0),r=e.end(e.length-1);let h=s-t;return(h<n||r<h)&&(h=r),rs(h,this.dnt.Gx(),h8)?void 0:h}Sdi(t,i){if(a8(this.dnt)&&i.Ihi!==Er.LSHAPE_CONTENT)return new M5(this.dnt,this.k5t);const e=i.Chi,s=i.Fhi,n=i.Uhi;switch(t){case Er.DOUBLE:return e||i.er({backdropUri:this.Zdi}),new W5(this.dnt,this.k5t,e,s,n);case Er.LSHAPE_AD:return i.Chi||i.er({backdropUri:this.bci}),new G5(this.dnt,this.k5t,e,s,n);case Er.LSHAPE_CONTENT:return i.Chi||i.er({backdropUri:this.bci}),new z5(this.dnt,this.k5t,e,s,n);case Er.SINGLE:default:return new L5(this.dnt,this.k5t)}}zui(t){var i,e,s,n,r;const h=t.Ihi,o=this.Sdi(h,t);var a;zs.X_&&zs.Q_>=16&&zs.Q_<18&&(null==(i=this.Eai)?void 0:i.Vhi)!==ss.COMPANION&&(null==(a=this.k5t)||a.Xx(this.k5t.Gx()));this.Jdi(o,this.ldi,!1),zs.zv&&!o.Kri()&&(null==(e=this.Eai)?void 0:e.Vhi)!==ss.COMPANION&&(X2(this.kci),Go(this.kci)),this.gci.So(new vh(t).Ca),this.ali=(null==(s=this.Eai)?void 0:s.Vhi)===ss.COMPANION||(null==(n=this.Eai)?void 0:n.Vhi)===ss.CSAI,null==(r=this.Eai)||r.uoi(this.Gx())}uli(){var t;a8(this.oa)&&(null==(t=this.Eai)?void 0:t.Vhi)!==ss.COMPANION&&(this.odi=!0,this.oa.wn(Jr.PM,this.cli))}async Uci(){var t,i,e;const s=this.Ici;if(void 0!==s){if(s.Ihi===Er.LSHAPE_CONTENT&&a8(this.dnt))return this.Fci(s,"Cannot play L-shape content ad breaks in this representation."),this.I3t();var n,r,h;if(null==(t=this.k5t)?void 0:t.Zx())return this.Fci(s,"Could not load the ad break: "+(null==(r=this.k5t)||null==(n=r.Zx())?void 0:n.message)),this.dli();if(this.Rci(),this.uli(),(null==(i=this.Eai)?void 0:i.Vhi)!==ss.COMPANION)this.lli=this.dnt.Vx,null==(h=this.k5t)||h.Rdi(this.Gx(),this.lli,0,!0);return this.oa.xP&&this.So(new Yr(this.Gx())),this.zui(s),!zs.X_||this.oa.lP||(null==(e=this.Ydi)?void 0:e.Kri())||(this.dnt.oP=!0,this.dnt.QP()),this.Dci(),super.Uci()}}async Hci(){var t,i;(null==(t=this.Eai)?void 0:t.Vhi)!==ss.COMPANION&&(this.lli=this.lli?new Date(this.lli.getTime()+1e3*this.dnt.Nd()):void 0,null==(i=this.k5t)||i.Rdi(this.Gx(),this.lli,0,!0));const e=this.Ici;if(this.Wci.Ihi===e.Ihi)(function(t){return t instanceof H5})(this.Ydi)&&this.Ydi.mhi(e.Chi);else{const t=this.Sdi(e.Ihi,e);this.Jdi(t,this.ldi,!1)}return super.Hci()}async I3t(){var t;if(void 0===this.Wci)return;this.Mci(),function(t){return t instanceof M5}(this.Ydi)&&(this._ci.Voi(this.dnt.nt),this.dnt.wn(Jr.EM,this.Kq));const i=null==(t=this.Ydi)?void 0:t.Kri();if(this.Jdi(new B5(this.dnt,this.k5t),!0,!1),!i){this.eli=!1;const t=this.oli(0);t&&this.dnt.Gx()<t+.75&&this.dnt.Xx(t,{zOt:!0})}return a8(this.oa)&&(this.odi=!0,this.oa.wn(Jr.PM,this.cli)),await this.dli(),this.Tci(),super.I3t()}async dli(){var t;await(null==(t=this.k5t)?void 0:t.KP())}async Xpt(){var t;this.ldi=!0,this.eli=!0,this.ali=!0,this.Jdi(void 0,!1,!0),await(null==(t=this.k5t)?void 0:t.kn()),this.lli=void 0,this.k5t=void 0,this.Aui=void 0,this.oa.mn(Jr.PM,this.cli),await super.Xpt()}async kn(){var t;this.Qdi(),await(null==(t=this.k5t)?void 0:t.kn()),await super.kn()}ddi(){return super.ddi()||!this.eli||this.odi}eI(t){if(void 0!==this.Ydi)switch(t.type){case d.uo:if(!this.ali)return this.ali=!0,!0;this.ldi=!0;break;case d.jw:if(this.Qx&&void 0!==this.Wci)return!0;break;case Jr.PM:if(!this.ldi||this.odi)return!0;this.ldi=!1;break;case Jr.xM:if(this.odi)return!0;this.ldi=!0;break;case d.$w:if(this.ddi())return!0;break;case d.Zw:if(this.ddi())return this.eli=!0,!0;break;case d.Nw:if(void 0!==this.Wci)return!0}return super.eI(t)}constructor(t){super(t),this.$di=void 0,this.k5t=void 0,this.Ydi=void 0,this.Zdi=void 0,this.ali=!0,this.eli=!0,this.lli=void 0,this.jdi=t=>{switch(t.presentationMode){case"native-picture-in-picture":this.Kdi();break;case"fullscreen":zn(this.Cd)&&this.Kdi();break}},this.sli=t=>{this.rli()},this.nli=t=>{this.rli()},this.fli=()=>{const t=this.Wci;void 0!==t?(!t.ahi||this.Gx()>=t.ahi)&&(this.dnt.mn(d.py,this.fli),this.Lci(()=>this.I3t())):this.dnt.mn(d.py,this.fli)},this.cli=()=>{this.oa.mn(Jr.PM,this.cli),this.odi=!1,this.ldi=!1},this.Xdi()}};function a8(t){const i=t.ont.Wo()===Yu.FULLSCREEN&&zn(t.Cd);return t.Sq.YL||i}Ma(t=>t.Cd.ads.theoads?zs.w_||zs.S_||zs.D_?new s8(t):new o8(t):new r8(t),da.knt),r();va.Bg.Kz(new class{get i4t(){return we.knt}Qz(t){return K2(t)}e4t(t,i,e){}W6(t,i,e,s){}uj(t){const i={integration:FC.THEOADS,adTagParameters:Mc(t.adTagParameters)?t.adTagParameters:{},useId3:Boolean(t.useId3)};return Q(t.networkCode)&&(i.networkCode=Ts(t.networkCode)),Q(t.customAssetKey)&&(i.customAssetKey=Ts(t.customAssetKey)),Q(t.backdropDoubleBox)&&(i.backdropDoubleBox=Ts(t.backdropDoubleBox)),Q(t.backdropLShape)&&(i.backdropLShape=Ts(t.backdropLShape)),Q(t.overrideLayout)&&(i.overrideLayout=function(t){switch(t){case"single":case"l-shape":case"double":case"single-if-mobile":return t;default:return}}(t.overrideLayout)),Q(t.retrievePodIdURI)&&(i.retrievePodIdURI=Ts(t.retrievePodIdURI)),Q(t.sseEndpoint)&&(i.sseEndpoint=Ts(t.sseEndpoint)),Q(t.streamActivityMonitorId)&&(i.streamActivityMonitorId=Ts(t.streamActivityMonitorId)),lo(t.initializationDelay)&&(i.initializationDelay=bs(t.initializationDelay)),Q(t.daiAssetKey)&&(i.daiAssetKey=Ts(t.daiAssetKey)),i}}),r(),r(),r(),r(),r();var u8=class extends Ne{get Ca(){return this.hu||(this.hu=function(t){return{get casting(){return t.xJ},get state(){return t.vft},start(){t.JP()},stop(){t.ZP()},addEventListener(i,e){const s=vu(i,Ts);t.wn(s,e)},removeEventListener(i,e){const s=vu(i,Ts);t.mn(s,e)}}}(this)),this.hu}constructor(...t){super(...t),this.hu=void 0}},c8=class extends u8{get xJ(){return this.vft===Co.CONNECTED}get vft(){return this.Ra}vli(){this._li(),this.Rpt.wn(d.do,this.gli),this.Ua(Co.AVAILABLE)}_li(){this.oa&&this.oa.mn(d.yw,this.handleAirplayChangedEvent),this.mli?this.oa=this.LY:this.oa=this.wli,this.oa.wn(d.yw,this.handleAirplayChangedEvent)}get mli(){return this.LY.YP()}async yli(){if(this.oa){if(this.mli){if(!this.oa.lP){const t=Ze(800,this.bli.Yg),i=this.oa.ww(d.jw,this.bli.Yg);await Promise.race([i,t]).catch(gs)}this.oa.QP()}else{this.Ali=this.LY.zx,this.Sli=this.LY.Vx,this.wli.wn(d.py,this.handleAirplayPlayerTimeUpdate),this.Tli=this.LY.OI,this.LY.OI=this.wli,this.Tli.jP(),this.Tli.we(),this.wli.be(),this.wli.oP=this.Tli.oP,this.wli.vP=this.Tli.vP,this.wli.OP=this.Tli.OP;const t=this.wli.ww(d.Zw);this.wli.zx=this.Tli.zx,await t,this.wli.QP(),this.wli.oP=this.Tli.oP,this.wli.vP=this.Tli.vP,this.wli.OP=this.Tli.OP}this.Ua(Co.CONNECTED)}}kli(){if(this.Tli){this.wli.mn(d.py,this.handleAirplayPlayerTimeUpdate),this.Tli.oP=this.wli.oP,this.Tli.vP=this.wli.vP,this.Tli.OP=this.wli.OP;zs.X_&&!zs.ru&&this.LY.ct===1/0?this.Sli?this.Tli.Vx=this.Sli:this.Tli.zx=1/0:this.Tli.zx=this.Ali,this.Sli=void 0,this.Ali=void 0,this.Tli.be(),this.wli.we(),this.wli.lP||this.Tli.QP(),this.LY.OI=this.Tli,this.wli.hr(),this.Tli=void 0}else this.oa&&(this.oa.zx=this.oa.zx+1e-4);this.Ua(Co.AVAILABLE)}preloadPlayer(t){if(fr(t),this.oa.AP<Lr.Qn){const i=this.oa.ww(Jr.EM,t);return this.oa.wP=Dn.zU,i}return Promise.resolve()}Ua(t){t!==this.Ra&&(this.Ra=t,this.So(new U2(this.Ra)))}JP(){let t;this.Rpt.GP(),this.bli.Zg(),this.bli=new Zc,t=this.mli?this.Eli(this.bli.Yg):this.xli(this.bli.Yg),Wr(Cu(t,this.bli))}async Eli(t){await this.preloadPlayer(t),this.LY.JP()}async xli(t){try{await this.wli.hr();const i=this.LY.nu();if(void 0===i)throw new m("Not possible to start Airplay without a source");await this.wli.Ta(i,t);const e=this.wli.ww(Jr.PM,t);this.wli.QP(),await wf(e,3e3),this.wli.jP(),fr(t),this.wli.JP()}catch(t){if(Ce(t))return;0}}ZP(){this.oa.ZP()}kn(){var t;this.Vo(),this.Rpt.mn(d.do,this.gli),this.bli.Zg(),this.LY.fO(this.wli),null==(t=this.wli)||t.kn()}constructor(t,i,e){super(),this.Rpt=void 0,this.oa=void 0,this.LY=void 0,this.Ra=Co.UNAVAILABLE,this.bli=new Zc,this.wli=void 0,this.Ali=void 0,this.Sli=void 0,this.Tli=void 0,this.gli=()=>{var t;const i=null==(t=this.LY.nu())?void 0:t.sources.filter(xk);(null==i?void 0:i.some(aC))?this.Ua(Co.AVAILABLE):this.Ua(Co.UNAVAILABLE)},this.handleAirplayChangedEvent=()=>{this.oa&&this.oa.sP?this.yli():this.vft===Co.CONNECTED&&this.kli()},this.handleAirplayPlayerTimeUpdate=t=>{this.Ali=t.currentTime,this.Sli=this.LY.Vx},this.Rpt=t,this.LY=i,this.wli=e,this.wli.we(),i.lO(e),this.vli()}};r();var d8=class extends u8{get xJ(){return!1}get vft(){return Co.UNAVAILABLE}JP(){}ZP(){}};r();var l8=class extends je{tI(){this.Pli.tI()}sI(t){throw new m("Can't add a track while using AirPlay.")}get ht(){return this.Pli.ht}get Fx(){return this.Pli.Fx}get bt(){return this.mz}get zx(){return this.Pli.zx}set zx(t){this.Xx(t)}Xx(t,i){this.Pli.Xx(t,i)}get Vx(){return this.Pli.Vx}get ct(){return this.Pli.ct}get xe(){return this.Ls}get Qx(){return this.Pli.Qx}get lt(){return this.Pli.lt}get Jx(){return this.Pli.Jx}get $x(){return this.Pli.$x}get iP(){return this.Pli.iP}get sP(){return this.Pli.sP}get WP(){return this.Pli.WP}get VP(){return this.Pli.VP}get rP(){return this.Pli.rP}get oP(){return this.Pli.oP}set oP(t){this.Pli.oP=t}get cP(){return this.Pli.cP}get lP(){return this.Pli.lP}get vP(){return this.Pli.vP}set vP(t){this.Pli.vP=t}get pP(){return this.Pli.pP}get wP(){return this.Pli.wP}set wP(t){this.Pli.wP=t}get AP(){return this.Pli.AP}get kP(){return this.Pli.kP}get xP(){return this.Pli.xP}YP(){return this.Pli.YP()}JP(){this.Pli.JP()}ZP(){this.Pli.ZP()}get nt(){return this.Pli.nt}get DP(){return this.Pli.DP}get MP(){return this.Pli.MP}get rt(){return this.Pli.rt}get OP(){return this.Pli.OP}set OP(t){this.Pli.OP=t}QP(){Wr(this.Pli.QP())}jP(){this.Pli.jP()}async KP(){}nu(){return this.Ac}async Ta(t,i){let e;if(fr(i),this.Ac=t,Ns(t.sources))e=ue({src:""});else{const i=t.sources.filter(xk);for(const t of i)if(aC(t)){e=t;break}}if(!e)throw new m("Unsupported source.");await this.Pli.Ta(e,t,i),this.Ez(e)}IP(t,i,e){return Promise.resolve()}CP(){return Promise.resolve()}Ez(t){this.mz!==t&&(this.mz=t,this.So(new Uk(t)))}zP(){return this.Pli.zP()}Ox(){return[]}GP(){this.Ili.Nz()}gr(t){Lk(this,t)}mr(){}iI(t){return!1}$P(){this.Pli.$P()}async hr(){this.mz=void 0,this.Ac=void 0,await this.Pli.hr()}be(){this.Pli.be()}we(){this.Pli.we()}qP(){return this.Pli.qP()}Aa(){return this.Pli.Aa()}async kn(){this.Vo(),this.Ili.kn(),await this.Pli.kn(),this.tO.kn(),this.sO.kn(),this.Gl.kn()}constructor(t,i,e,s,n,r,h){super(),this.Ls=void 0,this.Ili=void 0,this.Pli=void 0,this.mz=void 0,this.Ac=void 0,this.tO=new Gh,this.sO=new Gh,this.Gl=new ai,this.Ls=t,this.Ili=new Dr(r,h,e,1,[at.Mk]),this.Ili.Est(t),this.Pli=new oC(t,this.Ili,i,e,s,n),this.Pli.lw(this.Rs),this.tO.OI=this.Pli.ht,this.sO.OI=this.Pli.rt,this.Gl.OI=this.Pli.nt}},f8=class extends VF{async kn(){this.Cli.kn(),await super.kn()}constructor(t){super(t),this.Cli=void 0;const i=new l8(this.Pa.xe,this.Dx,this.Cd,this.Kst,this.VP,this.tnt,this.Ql);this.Cli=new c8(this,this.Pa,i),this.GX.DJ(this.Cli),this.wn(d.Pw,()=>{this.Cli._li()})}};Ma(t=>zd.Zs.vp?new f8(t):(t.GX.DJ(new d8),t),da.Ent),r(),r();var v8="VPAID";function _8(t){return"spotx"===t.integration}va.Bg.Kz(new class t{get i4t(){return this.Rli.i4t}Qz(t){return _8(t)}e4t(i,e,s){return s.ads||(s.ads=kk({})),s.ads.vpaidMode=s.ads.vpaidMode||t.Dli(),this.Rli.e4t(i,e,s)}W6(i,e,s,n){!function(t){if(!_8(t))throw new m("Unknown ad integration: "+t.integration)}(i);const r=t.Nli(i,s.xe);this.Rli.W6(r,e,s,n)}uj(t){const i=ru(t);if(!S(i.id))return i.queryParameters||(i.queryParameters={}),i.custom&&(i.queryParameters.custom?uh('"custom" parameter is redefined in queryParameters! Please use "queryParameters.custom" only!'):(i.queryParameters.custom=i.custom,delete i.custom)),i.app&&(i.queryParameters.app?uh('"app" parameter is redefined in queryParameters! Please use "queryParameters.app" only!'):(i.queryParameters.app=i.app,delete i.app)),i.device&&(i.queryParameters.device?uh('"device" parameter is redefined in queryParameters! Please use "queryParameters.device" only!'):(i.queryParameters.device=i.device,delete i.device)),i.user&&(i.queryParameters.user?uh('"user" parameter is redefined in queryParameters! Please use "queryParameters.user" only!'):(i.queryParameters.user=i.user,delete i.user)),i.ipAddress&&(i.queryParameters.ip_addr?uh('"ipAddress" parameter is redefined in queryParameters! Please use "queryParameters.ip_addr" or "ipAddress" only!'):(i.queryParameters.ip_addr=i.ipAddress,delete i.ipAddress)),i.maximumAdDuration&&(i.queryParameters.VMaxd?uh('"maximumAdDuration" parameter is redefined in queryParameters! Please use "queryParameters.VMaxd" or "maximumAdDuration" only!'):(i.queryParameters.VMaxd=i.maximumAdDuration,delete i.maximumAdDuration)),i}static Nli(i,e){return{integration:FC.SPOTX,sources:{src:t.Bli(i,s.location.href,e.offsetWidth,e.offsetHeight,zs.Tg)}}}static Bli(i,e,s,n,r){if(i.sources)return i.sources;let h=n,o=s;r&&0===o&&(o=320,h=180);const a={custom_skin:1,player_width:o,player_height:h};i.cacheBuster&&(a.cb=_.random()),t.Mli(e)&&(a.content_page_url=e);const u=Y({},a,i.queryParameters);return u[v8]||u.VPI||(u[v8]="js"),"https://search.spotxchange.com/vast/2.0/"+i.id+"?"+t.Lli(u)}static Mli(t){return Xt(t,"http://")||Xt(t,"https://")}static Lli(t){return R1(t)}static Dli(){return zs.B_?dk.ENABLED:dk.INSECURE}constructor(){this.Rli=new s4}}),r(),r(),r(),r();var g8=_.PI/180,p8=180/_.PI,m8=class{Gy(t,i){return this.x=t,this.y=i,this}jft(t){return this.x=t.x,this.y=t.y,this}Oli(t){return this.Gy(t[0],t[1])}Fli(){const t=new Float32Array(2);return t[0]=this.x,t[1]=this.y,t}Uli(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this}constructor(t,i){this.x=void 0,this.y=void 0,this.x=t||0,this.y=i||0}},w8=class{Gy(t,i,e){return this.x=t,this.y=i,this.z=e,this}jft(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}Oli(t){return this.Gy(t[0],t[1],t[2])}Fli(){const t=new Float32Array(3);return t[0]=this.x,t[1]=this.y,t[2]=this.z,t}V(){return _.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}Vli(){const t=this.V();if(0!==t){const i=1/t;this.Hli(i)}else this.x=0,this.y=0,this.z=0;return this}Hli(t){this.x*=t,this.y*=t,this.z*=t}Wli(t){const i=this.x,e=this.y,s=this.z,n=t.x,r=t.y,h=t.z,o=t.w,a=o*i+r*s-h*e,u=o*e+h*i-n*s,c=o*s+n*e-r*i,d=-n*i-r*e-h*s;return this.x=a*o+d*-n+u*-h-c*-r,this.y=u*o+d*-r+c*-n-a*-h,this.z=c*o+d*-h+a*-r-u*-n,this}qli(t){return this.x*t.x+this.y*t.y+this.z*t.z}zli(t,i){const e=t.x,s=t.y,n=t.z,r=i.x,h=i.y,o=i.z;return this.x=s*o-n*h,this.y=n*r-e*o,this.z=e*h-s*r,this}constructor(t,i,e){this.x=void 0,this.y=void 0,this.z=void 0,this.x=t||0,this.y=i||0,this.z=e||0}},su=class{Gy(t,i,e,s){return this.x=t,this.y=i,this.z=e,this.w=s,this}jft(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this}Oli(t){return this.Gy(t[0],t[1],t[2],t[3])}Fli(){const t=new Float32Array(4);return t[0]=this.x,t[1]=this.y,t[2]=this.z,t[3]=this.w,t}qli(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}zF(t){return this.Gli(this,t)}Gli(t,i){const e=t.x,s=t.y,n=t.z,r=t.w,h=i.x,o=i.y,a=i.z,u=i.w;return this.x=e*u+r*h+s*a-n*o,this.y=s*u+r*o+n*h-e*a,this.z=n*u+r*a+e*o-s*h,this.w=r*u-e*h-s*o-n*a,this}Xli(){return this.x*=-1,this.y*=-1,this.z*=-1,this.Vli(),this}jli(){const t=this.x,i=this.y,e=this.z,s=this.w,n=t*i+e*s;let r,h,o;if(n>.499)r=2*_.atan2(t,s),h=_.PI/2,o=0;else if(n<-.499)r=-2*_.atan2(t,s),h=-_.PI/2,o=0;else{const a=t*t,u=i*i,c=e*e;r=_.atan2(2*i*s-2*t*e,1-2*u-2*c),h=_.asin(2*n),o=_.atan2(2*t*s-2*i*e,1-2*a-2*c)}return new y8(r,o,h)}Vli(){let t=_.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===t?(this.x=0,this.y=0,this.z=0,this.w=1):(t=1/t,this.x=this.x*t,this.y=this.y*t,this.z=this.z*t,this.w=this.w*t),this}constructor(t,i,e,s){this.x=void 0,this.y=void 0,this.z=void 0,this.w=void 0,this.x=t||0,this.y=i||0,this.z=e||0,this.w=void 0!==s?s:1}},y8=class{Gy(t,i,e){return this.Qli=t,this.Kli=i,this.Yli=e,this}jft(t){return this.Gy(t.Qli,t.Kli,t.Yli)}gO(t){return this.Qli+=t.Qli,this.Kli+=t.Kli,this.Yli+=t.Yli,this}gF(t){return this.Qli-=t.Qli,this.Kli-=t.Kli,this.Yli-=t.Yli,this}Jli(){const t=this.Qli,i=this.Yli,e=this.Kli,s=_.cos(t/2),n=_.cos(i/2),r=_.cos(e/2),h=_.sin(t/2),o=_.sin(i/2),a=_.sin(e/2),u=s*n,c=h*o;return new su(u*a+c*r,h*n*r+s*o*a,s*o*r-h*n*a,u*r-c*a)}constructor(t,i,e){this.Qli=void 0,this.Kli=void 0,this.Yli=void 0,this.Qli=t||0,this.Kli=i||0,this.Yli=e||0}};r();var b8=["Zli","zot","$li","error"];r();var A8=function(t){return t.Os="unavailable",t.tfi="available",t.Ya="presenting",t}({});r();var S8=class{JU(){this.We||(this.We=!0,this.Ls.addEventListener("mousedown",this.ifi),this.Ls.addEventListener("touchstart",this.efi),s.addEventListener("mousemove",this.cr),s.addEventListener("touchmove",this.sfi),s.addEventListener("mouseup",this.nfi),s.addEventListener("touchend",this.rfi),this.hfi(s))}ZU(){this.We&&(this.We=!1,this.Ls.removeEventListener("mousedown",this.ifi),this.Ls.removeEventListener("touchstart",this.efi),s.removeEventListener("mousemove",this.cr),s.removeEventListener("touchmove",this.sfi),s.removeEventListener("mouseup",this.nfi),s.removeEventListener("touchend",this.rfi),this.ofi(s))}hfi(t){if(function(t){try{return Boolean(t)&&t===t.top}catch(t){return!1}}(t));else if(Ul(t))try{t.parent.addEventListener("mouseup",this.nfi),this.hfi(t.parent)}catch(i){t.document.documentElement.addEventListener("mouseleave",this.afi)}}ofi(t){if(t.document.documentElement.removeEventListener("mouseleave",this.afi),Ul(t))try{t.parent.removeEventListener("mouseup",this.nfi),this.ofi(t.parent)}catch(t){}}ufi(){this.cfi=!1}dfi(){const t=this.ffi.lfi;t.yaw+=2*_.PI*this.vfi.x*.4/this.Ls.clientWidth,t.pitch+=2*_.PI*this.vfi.y*.5/this.Ls.clientHeight,t.pitch=No(t.pitch,-_.PI/2,_.PI/2),this.ffi.lfi=t}_fi(){return(h.pointerLockElement||h.mozPointerLockElement||h.webkitPointerLockElement)===this.Ls}kn(){this.ZU()}constructor(t,i){this.ffi=void 0,this.Ls=void 0,this.We=!1,this.gfi=new m8,this.pfi=new m8,this.vfi=new m8,this.cfi=!1,this.ifi=t=>{this.gfi.Gy(t.clientX,t.clientY),this.cfi=!0,t.preventDefault(),t.stopPropagation()},this.efi=t=>{t.touches&&1===t.touches.length&&(this.gfi.Gy(t.touches[0].pageX,t.touches[0].pageY),this.cfi=!0,t.preventDefault())},this.cr=t=>{if(this.cfi||this._fi()){if(this._fi()){const i=t.movementX||t.mozMovementX||0,e=t.movementY||t.mozMovementY||0;this.pfi.Gy(this.gfi.x-i,this.gfi.y-e)}else this.pfi.Gy(t.clientX,t.clientY);this.vfi.Uli(this.pfi,this.gfi),this.gfi.jft(this.pfi),this.dfi()}},this.sfi=t=>{this.cfi&&(this.pfi.Gy(t.touches[0].pageX,t.touches[0].pageY),this.vfi.Uli(this.pfi,this.gfi),this.gfi.jft(this.pfi),this.dfi())},this.nfi=()=>{this.ufi()},this.rfi=()=>{this.ufi()},this.afi=()=>{this.ufi()},this.ffi=t,this.Ls=i}};r();var T8=class extends Oi{xa(){return new k8}constructor(){super("$li")}},k8=class extends gp{constructor(){super("stereochange")}};r();var E8=class{mfi(t){t.clearColor(...this.hZ),t.clear(t.COLOR_BUFFER_BIT)}wfi(t,i){t.clearDepth(1),t.enable(t.DEPTH_TEST),t.depthFunc(t.LEQUAL),t.clear(t.DEPTH_BUFFER_BIT),this.yfi.forEach(e=>{e.wfi(t,i)})}bfi(t){this.yfi.push(t)}Afi(){this.yfi=[]}constructor(){this.hZ=[0,0,0,1],this.yfi=[]}};r(),r(),r();var x8=class{Sfi(t,i,e){const s=t.createBuffer();return null===s?(uh("Failed to create buffer."),null):(t.bindBuffer(i,s),t.bufferData(i,e,t.STATIC_DRAW),s)}constructor(t,i,e,s,n){this.Tfi=void 0,this.eb=void 0,this.kfi=void 0,this.Vp=void 0,this.Efi=void 0,this.xfi=void 0,this.uc=void 0,this.Tfi=t,this.eb=this.Sfi(t,i,e),this.kfi=s,this.Vp=n,this.Efi=!1,this.xfi=0,this.uc=0}},P8=class extends x8{JU(t){if(null===this.eb)return void uh("Attempted to enable buffer that failed to initialize.");if(null===t)return void uh("Attempted to enable attribute without location.");const i=this.Tfi;i.bindBuffer(i.ARRAY_BUFFER,this.eb),i.vertexAttribPointer(t,this.kfi,this.Vp,this.Efi,this.xfi,this.uc),i.enableVertexAttribArray(t)}ZU(t){t&&this.Tfi.disableVertexAttribArray(t)}constructor(t,i,e){super(t,t.ARRAY_BUFFER,i,e,t.FLOAT)}};var I8=class extends x8{Pfi(){const t=this.Tfi;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.eb),t.drawElements(t.TRIANGLES,this.Ifi,this.Vp,this.uc)}constructor(t,i){super(t,t.ELEMENT_ARRAY_BUFFER,i,1,t.UNSIGNED_SHORT),this.Ifi=void 0,this.Ifi=i.length}};r();var C8=function(t){return t.VertexPos="aVertexPosition",t.VertexUV="aVertexUV",t.VertexColor="aVertexColor",t}({}),Mu=function(t){return t.ProjectionMat="uProjectionMatrix",t.ModelViewMat="uModelViewMatrix",t.Texture="uTexture",t}({}),R8=function(t){return t.Normal="vNormal",t.Color="vColor",t.UV="vUV",t}({}),D8=class{Cfi(t,i,e){const s=this.Rfi(t,t.VERTEX_SHADER,i),n=this.Rfi(t,t.FRAGMENT_SHADER,e);if(null===s||null===n)return uh("Failed to create vertex or fragment shader."),null;const r=t.createProgram();return null===r?(uh("Failed to create shader program"),null):(t.attachShader(r,s),t.attachShader(r,n),t.linkProgram(r),t.getProgramParameter(r,t.LINK_STATUS)?r:(uh("Failed to initialize shader program"),null))}Rfi(t,i,e){const s=t.createShader(i);if(null===s)return uh("failed to create shader."),null;if(t.shaderSource(s,e),t.compileShader(s),!t.getShaderParameter(s,t.COMPILE_STATUS)){const i=t.getShaderInfoLog(s);return uh("Failed to compile shader with error: "+i),t.deleteShader(s),null}return s}Dfi(){return this.Nfi}Bfi(t){const i=this.Nfi;if(null===i)return uh("Attempted to retrieve attribute location when shader program was not initialized"),null;const e=this.Tfi.getAttribLocation(i,t);return-1===e?null:e}Mfi(t){const i=this.Nfi;if(null===i)return uh("Attempted to retrieve uniform location when shader program was not initialized"),null;const e=this.Tfi.getUniformLocation(i,t);return null===e&&Tv("Attempted to retrieve nonexistent uniform: "+t),e}constructor(t,i,e){this.Nfi=void 0,this.Tfi=void 0,this.Tfi=t,this.Nfi=this.Cfi(this.Tfi,i,e)}},N8=class{Lfi(){const t=this.Ofi.length,i=_.max(...this.Ffi);return i>=t?(Tv("Created geometry where largest index ("+i+") is larger than/equal to attribute array size ("+t+")"),!1):(i<t-1&&uh("Created geometry where largest index ("+i+") is smaller than attribute buffer - 1 ("+(t-1)+") resulting in unused vertices"),!this.Ufi||this.Ufi.length===t||(Tv("Created geometry where position ("+t+") and uv ("+this.Ufi.length+") buffers have different length."),!1))}Vfi(t,i){if(!this.Lfi())throw new m("Failed to validate buffers for WebGLGeometry.");const e=function(t,i){const e=[];return i.forEach(t=>{e.push(t.x,t.y,t.z)}),new P8(t,new Float32Array(e),3)}(t,this.Ofi),s=function(t,i){return new I8(t,new Uint16Array(i))}(t,this.Ffi),n=function(t,i){const e=[];return i.forEach(t=>{e.push(t.x,t.y)}),new P8(t,new Float32Array(e),2)}(t,this.Ufi);return new B8(e,s,n,i)}constructor(t,i,e){this.Ofi=void 0,this.Ffi=void 0,this.Ufi=void 0,this.Ofi=t,this.Ffi=i,this.Ufi=e}},B8=class{Hfi(){this.Ofi.JU(this.Wfi),null!==this.qfi&&this.Ufi.JU(this.qfi)}zfi(){this.Ofi.ZU(this.Wfi),null!==this.qfi&&this.Ufi.ZU(this.qfi)}wfi(){this.Ffi.Pfi()}constructor(t,i,e,s){this.Ofi=void 0,this.Wfi=void 0,this.Ufi=void 0,this.qfi=void 0,this.Ffi=void 0,this.Ofi=t;const n=s.Bfi(C8.VertexPos);if(null===n)throw new m("Failed to get position attribute location.");this.Wfi=n,this.Ufi=e,this.qfi=s.Bfi(C8.VertexUV),this.Ffi=i}},M8=class extends N8{constructor(t=1,i=32,e=16,s=0,n=2*_.PI,r=0,h=_.PI){let o=0;const a=_.min(r+h,_.PI),u=[],c=[],d=[],l=[];for(let u=0;u<=e;u++){const f=[],v=u/e;let g=0;0===u&&0===r?g=.5/i:u===e&&a===_.PI&&(g=-.5/i);for(let e=0;e<=i;e++){const a=e/i,u=-t*_.cos(s+a*n)*_.sin(r+v*h),l=t*_.cos(r+v*h),p=t*_.sin(s+a*n)*_.sin(r+v*h);c.push(new w8(u,l,p)),d.push(new m8(a+g,1-v)),f.push(o++)}l.push(f)}for(let t=0;t<e;t++)for(let s=0;s<i;s++){const i=l[t][s+1],n=l[t][s],h=l[t+1][s],o=l[t+1][s+1];(0!==t||r>0)&&u.push(i,n,o),(t!==e-1||a<_.PI)&&u.push(n,h,o)}super(c,u,d)}};r(),r();var L8=[0,0,0,255,0,0,0,255,0,0,0,255,0,0,0,255],O8=class{Gfi(){const t=this.Tfi;t.activeTexture(this.Xfi),t.bindTexture(t.TEXTURE_2D,this.jfi)}gr(){const t=this.Tfi;t.activeTexture(this.Xfi),t.bindTexture(t.TEXTURE_2D,this.jfi),t.uniform1i(this.Qfi,0)}Kfi(t){const i=this.Tfi;i.bindTexture(i.TEXTURE_2D,this.jfi),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!0),i.texImage2D(i.TEXTURE_2D,this.u2,this.Yfi,this.Jfi,this.Zfi,t),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!1)}$fi(t){const i=this.Tfi;i.bindTexture(i.TEXTURE_2D,this.jfi),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!0),t.ant.OQ(i,i.TEXTURE_2D,this.u2,this.Yfi,this.Jfi,this.Zfi),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!1)}constructor(t,i){if(this.Tfi=void 0,this.jfi=void 0,this.Qfi=void 0,this.u2=void 0,this.Yfi=void 0,this.Jfi=void 0,this.Zfi=void 0,this.Xfi=void 0,this.Tfi=t,this.jfi=t.createTexture(),null===this.jfi)throw new m("Failed to create texture");const e=i.Mfi(Mu.Texture);if(null===e)throw new m("Failed to get texture location.");this.Qfi=e,t.bindTexture(t.TEXTURE_2D,this.jfi),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),this.Xfi=t.TEXTURE0,this.u2=0,this.Yfi=t.RGBA,this.Jfi=t.RGBA,this.Zfi=t.UNSIGNED_BYTE,t.texImage2D(t.TEXTURE_2D,this.u2,this.Yfi,2,2,0,this.Jfi,this.Zfi,new j(L8))}},F8="\n    attribute vec4 "+C8.VertexPos+";\n    attribute vec2 "+C8.VertexUV+";\n\n    uniform mat4 "+Mu.ModelViewMat+";\n    uniform mat4 "+Mu.ProjectionMat+";\n    \n    varying mediump vec2 "+R8.UV+";\n    \n    void main() {\n      gl_Position = "+Mu.ProjectionMat+" * "+Mu.ModelViewMat+" * "+C8.VertexPos+";\n      "+R8.UV+" = "+C8.VertexUV+";\n    }\n",U8="\n    varying mediump vec2 "+R8.UV+";\n    \n    uniform sampler2D "+Mu.Texture+";\n\n    void main() {\n      gl_FragColor = texture2D("+Mu.Texture+", "+R8.UV+");\n    }\n",V8=class{Dfi(){return this.Nfi}JU(){this.Tfi.useProgram(this.Nfi.Dfi()),this.jfi.gr()}tvi(t){this.jfi.Kfi(t)}ivi(t){this.jfi.$fi(t)}constructor(t){this.Tfi=void 0,this.Nfi=void 0,this.jfi=void 0,this.Tfi=t,this.Nfi=new D8(t,F8,U8),this.jfi=new O8(t,this.Nfi)}};r(),r();var H8=gd(bd()),W8=gd(Ad()),q8=(gd(Sd()),gd(Td())),z8=(gd(kd()),gd(Ed())),G8=gd(xd()),X8=gd(Pd()),j8=gd(Id()),Q8=gd(Cd()),K8=class{wfi(t,i){if(this.evi(i.nvi)){this.rvi.Hfi(),this.hvi.JU();const e=this.ovi,s=i.avi,n=(0,G8.default)(s,s,e);t.uniformMatrix4fv(this.uvi,!1,n);const r=i.cvi;t.uniformMatrix4fv(this.fvi,!1,r),this.rvi.wfi(),this.rvi.zfi()}}evi(t){return"none"===this.nvi||"right"!==t&&"left"===this.nvi||"right"===t&&"right"===this.nvi}get ovi(){const t=(0,H8.default)(),i=this.mo;return(0,Q8.default)(t,t,i.Fli()),(0,j8.default)(t,t,this.vvi.x,new Float32Array([1,0,0])),(0,j8.default)(t,t,this.vvi.y,new Float32Array([0,1,0])),(0,j8.default)(t,t,this.vvi.z,new Float32Array([0,0,1])),t}constructor(t,i,e,s){this.rvi=void 0,this.hvi=void 0,this.uvi=void 0,this.fvi=void 0,this.mo=new w8,this.vvi=new w8,this.nvi="none",this.hvi=e;const n=e.Dfi();this.rvi=i.Vfi(t,n),s&&(this.nvi=s);const r=n.Mfi(Mu.ModelViewMat);if(null===r)throw new m("Failed to get model view matrix location.");this.uvi=r;const h=n.Mfi(Mu.ProjectionMat);if(null===h)throw new m("Failed to get projection matrix location.");this.fvi=h}};r();var Y8=class{_vi(){const t=(0,H8.default)();return(0,X8.default)(t,this.gvi,this.pvi,this.mvi,this.wvi)}yvi(){this.bvi=this._vi()}get cvi(){return new Float32Array(this.bvi)}set cvi(t){this.bvi=t}Avi(){const t=(0,H8.default)(),i=(0,q8.default)((0,H8.default)(),this.Svi.Fli()),e=(0,W8.default)((0,H8.default)(),this.Tvi.Fli());return(0,G8.default)(t,i,e),(0,z8.default)(t,t),t}kvi(){this.Evi=this.Avi()}get avi(){return new Float32Array(this.Evi)}xvi(){this.kvi(),this.yvi()}hr(){this.Svi=new w8,this.vvi=new su,this.xvi()}Pvi(t){const i=this.Tvi.jli();i.gO(t),this.vvi=i.Jli()}Ivi(t){this.vvi=t.Jli()}get Cvi(){return this.gvi}set Cvi(t){this.gvi=t,this.yvi()}get Rvi(){return this.pvi}set Rvi(t){this.pvi=t,this.yvi()}get mo(){return(new w8).jft(this.Svi)}set mo(t){this.Svi=t,this.kvi()}get vvi(){return(new su).jft(this.Tvi)}set vvi(t){this.Tvi=t,this.kvi()}constructor(t){this.gvi=72*_.PI/180,this.pvi=1.77,this.mvi=.1,this.wvi=100,this.nvi="none",this.Svi=void 0,this.Tvi=void 0,this.bvi=void 0,this.Evi=void 0,this.Svi=new w8,this.Tvi=new su,this.bvi=this._vi(),this.Evi=this.Avi(),t&&(this.nvi=t)}};r();var J8=class extends Oi{xa(){return new Z8}constructor(){super("Zli")}},Z8=class extends gp{constructor(){super("directionchange")}},$8=1e-4,t9=class extends Ne{Dvi(){od.xr?(od.xr.addEventListener("devicechange",this.Nvi),this.Nvi()):this.HNt("Your browser does not support WebXR",me.VR_PLATFORM_UNSUPPORTED)}Bvi(){this.oa.Ma.wn(Bs.pa,this.bn),this.oa.wn(Qh.yn,this.bn),this.oa.wn(d.do,this.fo),this.oa.wn(d.Zw,this.ZG)}Mvi(){var t;this.Lvi||(this.Lvi=h.createElement("canvas"),this.Lvi.className="theoplayer-vr",this.Lvi.style.zIndex="2",this.Lvi.style.background="black",this.Lvi.style.display="none",this.oa.xe.appendChild(this.Lvi),Go(this.Lvi));const i=null!=(t=this.Lvi.getContext("webgl2"))?t:this.Lvi.getContext("webgl");i?(this.Tfi=i,this.Ovi=new S8(this,this.Lvi)):this.HNt("Your browser does not support WebGL",me.VR_PLATFORM_UNSUPPORTED)}async Fvi(){if(!od.xr)return this.Uvi=!1,void(this.Vvi=!1);await Promise.all([od.xr.isSessionSupported("inline").then(t=>{this.Uvi=t}).catch(t=>{this.Uvi=!1,this.HNt("exception when calling xr.isSessionSupported for inline session: "+t,me.VR_PRESENTATION_ERROR)}),od.xr.isSessionSupported("immersive-vr").then(t=>{this.Vvi=t}).catch(t=>{this.Vvi=!1,this.HNt("exception when calling xr.isSessionSupported for immersive-vr session: "+t,me.VR_PRESENTATION_ERROR)})])}Hvi(){this.Wvi&&(this.qvi(this.zvi,this.Gvi),this.Xvi())}qvi(t,i){const e=this.Tfi;if(!e||t===Zo.NONE)return;let s,n;this.jvi.Afi(),t===Zo.PM360?(s=2*_.PI,n=-_.PI/2):(s=_.PI,n=-_.PI);const r=new M8(16,60,40,0,s),h=[],o=[];for(let t=0;t<r.Ufi.length;t++){const e=r.Ufi[t];switch(i){case Qu.NONE:h.push(e),o.push(e);break;case Qu.VERTICAL:h.push(new m8(e.x,.5*e.y)),o.push(new m8(e.x,.5*e.y+.5));break;case Qu.HORIZONTAL:h.push(new m8(.5*e.x,e.y)),o.push(new m8(.5*e.x+.5,e.y))}}r.Ofi.forEach(t=>{t.x*=-1});const a=new N8(r.Ofi,r.Ffi,h),u=new N8(r.Ofi,r.Ffi,o);this.Qvi=new V8(e);const c=new K8(e,a,this.Qvi,"left");c.vvi.y=n,this.jvi.bfi(c);const d=new K8(e,u,this.Qvi,"right");d.vvi.y=n,this.jvi.bfi(d)}Xvi(){this.Tfi&&(this.Lvi.style.display="block",this.Kvi(),this.oa.mn(d.uo,this.dci),this.Uvi&&(this.oa.lP?this.oa.wn(d.uo,this.dci):this.dci()))}Yvi(){this.Jvi(),this.oa.mn(d.uo,this.dci),this.Lvi&&(this.Lvi.style.display="none")}Zvi(){this.$vi(),this.t_i()}async i_i(){if(!this.e_i&&this.Uvi)try{const t=await ua(od.xr.requestSession("inline"),this.uV.Yg);let i;i=zs.Ks?zs.u_?"viewer":"local":"viewer";const e=await t.requestReferenceSpace(i);t.addEventListener("end",this.$vi),this.s_i=e,this.e_i=t,this.Ovi.JU(),this.n_i(),await t.updateRenderState({baseLayer:new XRWebGLLayer(t,this.Tfi),inlineVerticalFieldOfView:this.gvi*g8})}catch(t){this.$vi(),this.HNt(t,me.VR_PRESENTATION_ERROR)}}$vi(){this.e_i&&(this.Jvi(),this.Ovi.ZU(),this.e_i.removeEventListener("end",this.$vi),this.e_i.end().catch(gs),this.e_i=null,this.Kvi())}async r_i(){if(!this.h_i&&this.Vvi){this.Jvi();try{const t=await ua(od.xr.requestSession("immersive-vr"),this.uV.Yg),i=await t.requestReferenceSpace("local");t.addEventListener("end",this.t_i),this.o_i=i,this.h_i=t,await this.a_i(),this.n_i()}catch(t){this.t_i(),this.HNt(t,me.VR_PRESENTATION_ERROR)}}}async a_i(){const t=this.Tfi,i=this.h_i;this.Lvi&&t&&i&&!this.u_i&&(this.Lvi.addEventListener("webglcontextlost",t=>{t.preventDefault()}),this.Lvi.addEventListener("webglcontextrestored",()=>{this.qvi(this.zvi,this.Gvi)}),this.u_i=!0,await t.makeXRCompatible(),await i.updateRenderState({baseLayer:new XRWebGLLayer(i,t)}))}Kvi(){if(!this.h_i&&this.Tfi){const t=this.Tfi,i=this.Lvi.clientWidth,e=this.Lvi.clientHeight;if(0===i||0===e)return;const s=zd.Zs.fp;this.Lvi.width=i*s,this.Lvi.height=e*s,t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight)}}n_i(){null===this.c_i&&(this.d_i(),this.l_i?this.c_i=this.l_i.requestAnimationFrame(this.f_i):this.v_i())}Jvi(){null!==this.c_i&&(this.v_i(),this.l_i&&this.l_i.cancelAnimationFrame(this.c_i),this.c_i=null)}d_i(){if(null!==this.__i)return;const t=this.oa.zP();if(void 0===t||!(t instanceof HTMLVideoElement))return void 0;if("function"!=typeof t.requestVideoFrameCallback)return;const i=()=>{this.Qvi.ivi(this.oa),this.__i=t.requestVideoFrameCallback(i)};this.g_i=t,this.__i=t.requestVideoFrameCallback(i)}v_i(){var t,i;null!==this.__i&&(null==(i=this.g_i)||null==(t=i.cancelVideoFrameCallback)||t.call(i,this.__i),this.g_i=null,this.__i=null)}p_i(){return!!this.m_i||(zs.ru?this.w_i&&this.y_i:this.w_i)}b_i(){const t=DeviceMotionEvent.requestPermission;"function"==typeof t&&t().then(t=>{this.y_i="granted"===t})}A_i(){return(!this.lP()||Boolean(this.S_i))&&this.T_i()}lP(){return this.oa.lP}T_i(){return this.oa.AP>=2}get k_i(){return this.E_i}set k_i(t){const i=this.vft;this.E_i=t,this.vft!==i&&this.So(new Kr)}get Wvi(){return this.zvi!==Zo.NONE}get zvi(){return this.x_i}set zvi(t){const i=this.vft;this.x_i=t,this.vft!==i&&this.So(new Kr)}get Vvi(){return this.P_i}set Vvi(t){const i=this.P_i;this.P_i=t,this.P_i!==i&&this.So(new Kr)}get I_i(){return this.Vvi}get l_i(){return this.h_i||this.e_i}get h_i(){return this.m_i}set h_i(t){const i=this.vft;this.m_i=t,this.vft!==i&&this.So(new Kr)}get C_i(){return this.o_i||this.s_i}get R_i(){const t=this.D_i.jli();return{yaw:t.Qli*p8,pitch:t.Kli*p8,roll:t.Yli*p8}}set R_i(t){const i=i9(t&&t.pitch||0)*g8,e=i9(t&&t.roll||0)*g8,s=i9(t&&t.yaw||0)*g8,n=new y8(s,i,e),r=this.D_i.jli(),h=this.N_i.jli();this.D_i=n.Jli(),this.N_i=n.gF(r).gO(h).Jli()}get lfi(){const t=this.N_i.jli();return{yaw:t.Qli,pitch:t.Kli,roll:t.Yli}}set lfi(t){const i=e9(t&&t.pitch||0),e=e9(t&&t.roll||0),s=e9(t&&t.yaw||0),n=new y8(s,i,e);this.N_i=n.Jli()}get vft(){return this.k_i?this.h_i?A8.Ya:A8.tfi:A8.Os}get B_i(){return null!==this.h_i}set B_i(t){const i=this.B_i;t&&this.Vvi?this.r_i():this.t_i(),this.B_i!==i&&this.So(new T8)}get M_i(){return this.w_i}set M_i(t){null===this.m_i&&(this.w_i=t,t&&zs.ru&&this.b_i())}get L_i(){return this.gvi}set L_i(t){t&&t>=0&&t<=180&&(this.gvi=t,null!==this.e_i&&this.e_i.updateRenderState({inlineVerticalFieldOfView:this.gvi*g8}))}HNt(t,i){this.So(new el(new as(i,t)))}O_i(){const t=this.oa.nu();return t&&t.vr}kn(){this.uV.Zg(),this.Zvi(),this.Vo(),this.Lvi&&(Ao(this.Lvi),this.Lvi=void 0),this.Tfi=void 0,this.Ovi&&(this.Ovi.kn(),this.Ovi=void 0),this.oa=void 0}constructor(t){super(),this.oa=void 0,this.Ca=void 0,this.uV=new Zc,this.Uvi=!1,this.P_i=!1,this.D_i=new su,this.F_i=new su,this.N_i=new su,this.gvi=74,this.w_i=!1,this.ZS=void 0,this.Gvi=Qu.NONE,this.E_i=!1,this.x_i=Zo.NONE,this.Lvi=void 0,this.Qvi=void 0,this.Tfi=void 0,this.jvi=new E8,this.Ovi=void 0,this.e_i=null,this.m_i=null,this.s_i=null,this.o_i=null,this.u_i=!1,this.c_i=null,this.g_i=null,this.__i=null,this.S_i=0,this.y_i=!1,this.Nvi=()=>{const t=this.Uvi;this.Fvi().then(()=>{this.Uvi?t||this.e_i||this.m_i||this.Hvi():this.HNt("Inline session not available. Panorama functionality will not work.",me.VR_PRESENTATION_ERROR)})},this.fo=()=>{var t;this.Yvi(),this.Zvi(),null==(t=od.xr)||t.removeEventListener("devicechange",this.Nvi);const i=this.O_i();this.ZS=i,this.k_i=it(i),this.Gvi=(null==i?void 0:i.stereoMode)||Qu.NONE,this.zvi=(null==i?void 0:i.panoramaMode)||Zo.NONE,i&&(this.Mvi(),this.Hvi(),this.Dvi())},this.dci=()=>{this.i_i()},this.t_i=()=>{this.h_i&&(this.Jvi(),this.h_i.removeEventListener("end",this.t_i),this.h_i.end().catch(gs),this.h_i=null,this.o_i=null,this.u_i=!1,this.e_i?this.n_i():this.i_i())},this.bn=()=>{this.Kvi()},this.f_i=(t,i)=>{if(!this.Tfi)return;const e=this.Tfi,s=this.l_i;if(null===this.__i&&this.A_i()&&(this.Qvi.ivi(this.oa),this.S_i>0&&(this.S_i-=1)),null===s||void 0===i)return void 0;this.c_i=s.requestAnimationFrame(this.f_i);const n=s.renderState.baseLayer,r=i.getViewerPose(this.C_i);if(void 0===n||void 0===r)return void 0;e.bindFramebuffer(e.FRAMEBUFFER,n.framebuffer);let h=new y8,o=0;for(const t of r.views){const i=new Y8(t.eye);if(i.cvi=t.projectionMatrix,this.p_i()){let e;if(zs.Ks&&zs.u_&&null===this.m_i){if(e=t.transform.inverse.orientation,0===e.x&&0===e.y&&0===e.z&&1===e.w)return}else e=t.transform.orientation;i.vvi=new su(e.x,e.y,e.z,e.w)}this.e_i&&i.Pvi(this.N_i.jli()),h=h.gO(i.vvi.jli()),o+=1;const s=n.getViewport(t);s&&e.viewport(s.x,s.y,s.width,s.height),this.jvi.wfi(e,i)}const a=new y8(h.Qli/o,h.Kli/o,h.Yli);this.D_i=a.Jli(),function(t,i){const e=t.qli(i);return 1-e*e<$8}(this.D_i,this.F_i)||(this.F_i.jft(this.D_i),this.So(new J8))},this.ZG=()=>{this.S_i=5},this.oa=t,this.Ca=function(t){let i;const e={get stereo(){return t.B_i},set stereo(i){t.B_i=i},get useDeviceMotionControls(){return t.M_i},set useDeviceMotionControls(i){t.M_i=i},get direction(){return t.R_i},set direction(i){t.R_i=i},get verticalFOV(){return t.L_i},set verticalFOV(i){t.L_i=i},get canPresentVR(){return t.I_i},get state(){return t.vft},addEventListener(t,e){i.wn(t,e)},removeEventListener(t,e){i.mn(t,e)}};return i=new hN(t,b8,e),e}(this),this.Bvi()}};function i9(t){return Kl(t+180,360)-180}function e9(t){return Kl(t+_.PI,2*_.PI)-_.PI}Na(function(t){return class extends t{xa(){return Gi(super.xa(),{vr:this.ffi.Ca})}kn(){this.ffi.kn(),super.kn()}constructor(t,i){super(t,i),this.ffi=void 0,this.ffi=new t9(this)}}},Oa.lu),r(),r();var s9=class extends je{get Ca(){return this.hu||(this.hu=function(t){let i;const e={get status(){return t.dk},get tasks(){return t.vsi},get network(){return t.lX.Ca},createTask:(i,e)=>t.U_i(i,e),addEventListener(t,e){i.wn(t,e)},removeEventListener(t,e){i.mn(t,e)}};return i=new le(t,e),e}(this)),this.hu}get dk(){return this.V_i.dk}get vsi(){return this.V_i.vsi.Ca}get lX(){return this.ent}U_i(t,i,e){let s,n;if(void 0===e&&(e="persistent"),!t)throw new m("Unexpected - The source description is undefined");if(s=ra(t),n=v5(i),Uu(s))throw new m("Invalid source description");return this.V_i.asi(s,n).Ca}constructor(t,i){super(),this.V_i=void 0,this.ent=void 0,this.hu=void 0,this.V_i=t,this.ent=i,this.V_i.wn("zot",this.Rs)}};var n9=function(){const t=new GD(zd.Dx,!1),i=Wc.Bg,e=new y5(t),s=new f5(i,e),n=new jD(t),r=new P4(i.Mxt,s,"persistent");return new s9(r,n)}().Ca;function r9(t,i){if("function"==typeof t.getAll){return gh(void 0===i?t.getAll():t.getAll(i))}return function(t){const i=new Ga,e=[];return t.onsuccess=()=>{const s=t.result;s&&s.value?(e.push(s.value),s.continue()):i.Qy(e)},t.onerror=()=>{i.Ky(t.error)},i.Yy}(void 0===i?t.openCursor():t.openCursor(i))}function gh(t){return new Promise((i,e)=>{t.onsuccess=()=>{i(t.result)},t.onerror=()=>{e(t.error)}})}r(),r(),r(),r(),r(),r();var h9=class{Zg(){if(this.ro)try{this.Rxt.abort(),this.ro=!1}catch(t){}}constructor(t){this.Rxt=void 0,this.Yy=void 0,this.ro=void 0,this.Rxt=t,this.ro=!0,this.Yy=new Promise((t,i)=>{this.Rxt.oncomplete=()=>{this.ro=!1,t()},this.Rxt.onerror=()=>{this.ro&&(this.ro=!1,i(this.Rxt.error||new m("Transaction error")))},this.Rxt.onabort=()=>{this.ro=!1,i(new m("Transaction aborted"))}})}};async function o9(t,i,e){const s=new h9(t);try{const[t]=await Promise.all([i(e),s.Yy]);return t}catch(t){if(!s.ro)throw new Ch("IDBTransaction committed prematurely",t);throw t}finally{s.Zg()}}var a9=class{get l(){return this.wE.l}yxt(t){return Promise.resolve("persistent"===t)}uTt(t,i){if(void 0===i&&(i="persistent"),"persistent"!==i)return Promise.reject(lu(i));return gh(this.H_i(Bu.Fxt).put(t))}async bxt(t,i){if(void 0===i&&(i="persistent"),"persistent"!==i)return Promise.reject(lu(i));for(const e of t)await this.uTt(e,i)}async qy(t){return Boolean(await this.zy(t))}zy(t){return gh(this.H_i(Bu.Oxt).get(t))}Axt(t,i){return gh(this.H_i(Bu.Oxt).index(i).get(t))}async _xt(t){const i=[];for(const e of t){const t=await this.zy(e);t&&i.push(t)}return i}Sxt(){return r9(this.H_i(Bu.Oxt))}Txt(t){return r9(this.H_i(Bu.Oxt),t)}kxt(t,i){return r9(this.H_i(Bu.Oxt).index(i),t)}pS(t){return gh(this.H_i(Bu.Fxt).delete(t))}async Ext(t){for(const i of t)await this.pS(i)}xxt(){return gh(this.H_i(Bu.Fxt).clear())}H_i(t){if(!this.W_i)throw new m("Lock was released");if(!function(t,i){return t===Bu.Oxt&&i===Bu.Oxt||i===Bu.Fxt}(t,this.W_i.mode))throw new m("Incompatible transaction mode: "+this.W_i.mode+", expected "+t);return this.W_i.objectStore(this.l)}q_i(){this.wE.z_i(this),this.W_i=void 0}constructor(t,i){this.wE=void 0,this.W_i=void 0,this.wE=t,this.W_i=i}};var oh=class{yxt(t){return Promise.resolve("persistent"===t)}uTt(t,i){return void 0===i&&(i="persistent"),"persistent"!==i?Promise.reject(lu(i)):this.Rxt(Bu.Fxt,i=>i.uTt(t))}bxt(t,i){return void 0===i&&(i="persistent"),"persistent"!==i?Promise.reject(lu(i)):this.Rxt(Bu.Fxt,i=>i.bxt(t))}qy(t){return this.Rxt(Bu.Oxt,i=>i.qy(t))}zy(t){return this.Rxt(Bu.Oxt,i=>i.zy(t))}Axt(t,i){return this.Rxt(Bu.Oxt,e=>e.Axt(t,i))}_xt(t){return this.Rxt(Bu.Oxt,i=>i._xt(t))}Sxt(){return this.Rxt(Bu.Oxt,t=>t.Sxt())}Txt(t){return this.Rxt(Bu.Oxt,i=>i.Txt(t))}kxt(t,i){return this.Rxt(Bu.Oxt,e=>e.kxt(t,i))}pS(t){return this.Rxt(Bu.Fxt,i=>i.pS(t))}Ext(t){return this.Rxt(Bu.Fxt,i=>i.Ext(t))}xxt(){return this.Rxt(Bu.Fxt,t=>t.xxt())}gPt(t){return this.G_i(),this.nPt=new a9(this,t),this.nPt}G_i(){if(void 0!==this.nPt)throw new m("Already locked")}z_i(t){if(this.nPt!==t)throw new m("Incorrect lock");this.nPt=void 0}Zo(t){return this.ta.Zo(t)}Rxt(t,i){return this.Zo(()=>this.X_i(t,i))}async X_i(t,i){this.G_i();const e=this.j_i.transaction(this.l,t),s=this.gPt(e);try{return await o9(e,i,s)}finally{s.q_i()}}Q_i(t){this.G_i();const i=this.j_i.transaction(this.l,t);return this.gPt(i)}static K_i(t,i){let e;const s=new Promise(t=>{e=t}),n=t.reduce((t,i)=>t.then(()=>{let t;const e=new Promise(i=>{t=i});return i.Zo(()=>(t(),s)).catch(gs),e}),Promise.resolve());return e(n.then(i)),s}constructor(t,i){this.j_i=void 0,this.l=void 0,this.nPt=void 0,this.ta=new Zn,this.j_i=t,this.l=i}};r(),r(),r(),r(),r();var u9={ED:17,Y_i:async t=>{const{transaction:i,database:e}=t,s=i.objectStoreNames;if(s&&s.length)for(let t=0;t<s.length;t++)e.deleteObjectStore(s[t]);e.createObjectStore(f9,{keyPath:"id"}),e.createObjectStore(v9,{keyPath:"key"}),e.createObjectStore(_9,{keyPath:"key"});e.createObjectStore(g9,{keyPath:"segmentURLsegmentByteRange"}).createIndex("manifestURL","manifestURL");e.createObjectStore(p9,{keyPath:"segmentURLsegmentByteRange"}).createIndex("manifestURL","manifestURL")}},c9=class{async J_i(t){for(const i of this.Z_i)this.$_i<i.ED&&await i.Y_i(t)}constructor(t){this.$_i=void 0,this.$_i=t}},d9=class extends c9{get Z_i(){return[u9]}},l9=new class{tgi(t){this.igi=t}jet(t){return this.igi(t)}constructor(){this.igi=t=>new d9(t)}},f9="cachingTask",v9="licences",_9="manifest",g9="segment",p9="segmentMetadata";async function m9(){!function(){if("undefined"==typeof indexedDB)throw new m("Indexed database unavailable")}();const t=indexedDB.open("theoplayer-cache-database",18);return t.addEventListener("upgradeneeded",w9),await gh(t)}async function w9(t){const i=t.oldVersion<=18?t.oldVersion:-1,e=t.target,s=e.result,n=e.transaction,r=l9.jet(i),h={database:s,transaction:n};await o9(n,t=>r.J_i(t),h)}var y9=class{static get Bg(){return this.Rbt||(this.Rbt=m9()),this.Rbt}};y9.Rbt=void 0,r();var b9=class{Rxt(t){return t(this)}q_i(){this.Nxt.q_i(),this.bct.q_i(),this.Bxt.q_i(),this.Mxt.q_i(),this.Lxt.q_i()}constructor(t,i){this.Nxt=void 0,this.bct=void 0,this.Bxt=void 0,this.Mxt=void 0,this.Lxt=void 0,this.Nxt=t.Nxt.gPt(i),this.bct=t.bct.gPt(i),this.Bxt=t.Bxt.gPt(i),this.Mxt=t.Mxt.gPt(i),this.Lxt=t.Lxt.gPt(i)}};Wc.Ba(class t{static async jet(){const i=await y9.Bg;return new t(i)}Rxt(t){const i=this.allCollections;return oh.K_i(i,()=>this.X_i(i,t))}async X_i(t,i){const e=t.map(t=>t.l),s=this.j_i.transaction(e,Bu.Fxt),n=new b9(this,s);try{return await o9(s,i,n)}finally{n.q_i()}}get allCollections(){return[this.bct,this.Nxt,this.Bxt,this.Mxt,this.Lxt]}constructor(t){this.j_i=void 0,this.Nxt=void 0,this.bct=void 0,this.Bxt=void 0,this.Mxt=void 0,this.Lxt=void 0,this.j_i=t,this.Nxt=new oh(t,p9),this.bct=new oh(t,g9),this.Bxt=new oh(t,_9),this.Mxt=new oh(t,f9),this.Lxt=new oh(t,v9)}}.jet),r(),r(),r();var A9=class{egi(t){const i=this.LY.Ox(),e=t.createGain();for(const s of i){t.createMediaElementSource(s).connect(e)}return e}get Ca(){return this.hu||(this.hu=this.xa()),this.hu}xa(){const t=this;return{createAudioSourceNode:i=>t.egi(i)}}constructor(t){this.LY=void 0,this.hu=void 0,this.LY=t}};Na(function(t){return class extends t{xa(){const t=this.sgi.Ca;return Gi(super.xa(),{get audio(){return t}})}constructor(t,i){super(t,i),this.sgi=void 0,this.sgi=new A9(this.Pa)}}},Oa.lu),r(),r();Na(function(t){return class i extends t{Ta(t){const e=i.ngi(this.Cd.analytics),s=i.ngi(t?t.analytics:void 0);e||s?this.rgi(Y({},e,s)):this.hgi&&this.hgi.disable(),super.Ta(t)}rgi(t){if(this.hgi)this.hgi.enable(),this.hgi.setOptions(t);else{const i=s.youbora;if(!i)throw new m("Youbora JavaScript library not loaded.");if(!i.adapters.TheoPlayer2)throw new m("TheoPlayer2 adapter not available on Youbora JavasScript library");const e=new i.Plugin(t);e.setAdapter(new i.adapters.TheoPlayer2(this.Ca)),this.Jc&&i.adapters.TheoPlayer2.NativeAdsAdapter&&e.setAdsAdapter(new i.adapters.TheoPlayer2.NativeAdsAdapter(this.Ca)),this.hgi=e}}static ngi(t){if(t){const i=t.filter(t=>"youbora"===t.integration);if(0===i.length)return;if(i.length>1)throw new m("Only one youbora analytics configuration expected");const e=i[0],{integration:s}=e;return dT(e,["integration"])}}kn(){this.hgi&&this.hgi.disable(),super.kn()}constructor(t,i){super(t,i),this.hgi=void 0}}},Oa.Snt),r(),r(),r();var S9=1,T9=0,k9=1e3,E9=class t extends dS{ogi(){const t=this.ct===1/0,i=t?S9:T9,e=t?-1:this.ct,s=hs(this.oa.rt.NI,this.agi);this.ugi.setPresentationInformation(new this.cgi(i,e,s))}agi(t){const i=t.$I.NI,e=[];for(let t=0;t<i.length;t++){const s=i[t];s.Ti&&s.Mi&&e.push({trackIdx:t,bitrate:s.IW,width:s.Ti,height:s.Mi,codecIdentifier:s.Rrt})}return e}dgi(){return this.oa.Gx()*k9}get ct(){return this.oa.Nd()*k9}get lgi(){return this.fgi}get vgi(){return this._gi}set vgi(t){this._gi=t,t&&this.ugi.reportPlayerState(t)}set ggi(t){this.pgi=t}mgi(){return v(()=>{this.wgi(),this.ygi()},t.bgi)}QBt(){this.oa.Jc&&(this.oa.Jc.wn("Jnt",this.Agi),this.oa.Jc.wn("Znt",this.Sgi),this.oa.Jc.wn("_4t",this.Bci),this.oa.Jc.wn("Z4t",this.Tgi)),this.oa.wn(d.Nw,this.kgi),this.oa.wn(hc.ma,this.u8),this.oa.wn(d.jw,this.Egi),this.oa.wn(d.uo,this.dci),this.oa.wn(Jr.PM,this.YG),this.oa.wn(d.Jw,this.iK),this.oa.wn(d.Zw,this.ZG),this.oa.wn(Jr.xM,this.QG),this.oa.wn(d.ly,this.xgi)}KBt(){this.oa.Jc&&(this.oa.Jc.mn("Jnt",this.Agi),this.oa.Jc.mn("Znt",this.Sgi),this.oa.Jc.mn("_4t",this.Bci),this.oa.Jc.mn("Z4t",this.Tgi)),this.oa.mn(d.Nw,this.kgi),this.oa.mn(hc.ma,this.u8),this.oa.mn(d.jw,this.Egi),this.oa.mn(d.uo,this.dci),this.oa.mn(Jr.PM,this.YG),this.oa.mn(d.Jw,this.iK),this.oa.mn(d.Zw,this.ZG),this.oa.mn(Jr.xM,this.QG),this.oa.mn(d.ly,this.xgi)}kn(){p(this.Pgi),this.KBt()}constructor(t,i,e,s=MMPlayerState,n=MMAdState,r=MMPresentationInfo){super(),this.oa=void 0,this.ZS=void 0,this.ugi=void 0,this.Igi=void 0,this.Cgi=void 0,this.cgi=void 0,this.Rgi=void 0,this.fgi=void 0,this.pgi=void 0,this._gi=void 0,this.Dgi=void 0,this.Pgi=void 0,this.Agi=void 0,this.Sgi=void 0,this.Bci=void 0,this.Tgi=void 0,this.xgi=void 0,this.kgi=void 0,this.u8=void 0,this.Egi=void 0,this.dci=void 0,this.YG=void 0,this.iK=void 0,this.ZG=void 0,this.QG=void 0,this.ygi=void 0,this.wgi=void 0,this.oa=t,this.ZS=i,this.ugi=e,this.Igi=s,this.Cgi=n,this.cgi=r,this.Rgi=!0,this.fgi=!1,this.pgi=void 0,this._gi=void 0,this.Dgi=void 0,this.Agi=t=>{const i=t.jnt;i.d1t();var e;e=i.Ont().duration;const s="linear"===i.Ont().type;i.l1t(),i.a1t();s&&(this.fgi=!0),this.ggi=this.Cgi.AD_IMPRESSION,this.ggi=this.Cgi.AD_STARTED},this.Sgi=t=>{this.fgi=!1,this.ggi=this.Cgi.AD_COMPLETED},this.Bci=t=>{t.AZt===$c.ADBLOCK?this.ggi=this.Cgi.AD_BLOCKED:this.ggi=this.Cgi.AD_ERROR},this.Tgi=()=>{this.ggi=this.Cgi.AD_SKIPPED},this.xgi=t=>{var i,e,s,n;t.Gk===at.Mk&&(this.Dgi&&t.FX!==this.Dgi&&this.ugi.reportABRSwitch(this.Dgi,t.FX),this.Dgi=t.FX,this.ugi.reportChunkRequest(new MMChunkInformation(t.sN,t.FX,t.zB,t.Iut.Yu,void 0,void 0,null!=(s=null==(i=t.Iut.Wat)?void 0:i[0])?s:0,null!=(n=null==(e=t.Iut.Wat)?void 0:e[1])?n:-1)))},this.kgi=t=>{this.vgi=this.Igi.STOPPED,this.So(t)},this.u8=t=>{this.vgi=this.Igi.ERROR,this.ugi.reportError(t.error,this.dgi())},this.Egi=()=>{this.lgi?this.ggi=this.Cgi.AD_PAUSED:this.vgi=this.Igi.PAUSED},this.dci=()=>{this.lgi&&(this.ggi=this.Cgi.AD_PLAY)},this.YG=()=>{this.lgi?(this.pgi===this.Cgi.AD_PAUSED&&(this.ggi=this.Cgi.AD_RESUMED),this.ggi=this.Cgi.AD_PLAYING):(this.Rgi&&(this.Rgi=!1,this.ogi(),this.vgi=this.Igi.STARTED),this.vgi!==this.Igi.PAUSED&&this.vgi!==this.Igi.BUFFERING||(this.vgi=this.Igi.RESUMED))},this.iK=()=>{this.ugi.reportPresentationSize(this.oa.MP,this.oa.DP)},this.ZG=t=>{this.lgi||this.vgi!==this.Igi.PAUSED||this.ugi.reportPlayerSeekCompleted(t.currentTime*k9)},this.QG=()=>{this.lgi||(this.vgi=this.Igi.BUFFERING)},this.ygi=()=>{this.ugi.reportDownloadRate(_.floor(sc.Bg.pW()))},this.wgi=()=>{this.lgi||this.ugi.reportPlaybackPosition(this.dgi())},this.vgi=this.Igi.INITIALIZED,this.QBt(),this.Pgi=this.mgi()}};E9.bgi=2e3,Na(function(t){return class extends t{kn(){super.kn(),this.Ngi()}constructor(t,i){super(t,i),this.Bgi=void 0,this.Mgi=void 0,this.Lgi=()=>{this.Mgi=void 0,this.Ngi();const t=super.nu();t&&(this.Mgi=function(t,i){const e=function(t,i){if(t&&t.analytics)for(const i of t.analytics)if("smartsight"===i.integration)return i;if(i&&i.analytics)for(const t of i.analytics)if("smartsight"===t.integration)return t;return}(t,i);if(!e)return;return e}(t,this.Cd)),this.Ogi()},this.Ogi=()=>{if(!this.Bgi&&this.Mgi&&this.bt&&this.bt.src&&!this.lP){const t=MMSmartStreaming.getInstance();!function(t,i,e){t.registerMMSmartStreaming(e.playerName,e.customerID,e.subscriberID,e.domainName),t.reportComponent("THEOSDK"),t.reportPlayerInfo("THEOplayer","THEOplayer","10.3.0"),t.reportDeviceInfo(void 0,void 0,void 0,void 0,void 0,s.innerWidth,s.innerHeight),t.initializeSession("QBRModeDisabled",i,e.metaURL,e.assetID)}(t,this.bt.src,this.Mgi),this.Bgi=new E9(this,this.Mgi,t),this.Bgi.wn("ended",this.Ngi)}},this.Ngi=()=>{this.Bgi&&(this.Bgi.kn(),this.Bgi=void 0)},this.wn(d.do,this.Lgi),this.wn(d.Pw,this.Ogi),this.wn(d.uo,this.Ogi)}}},Oa.Snt),r(),r();var x9=String.fromCharCode(95);var P9=class t{get Ca(){return this.hu||(this.hu=function(t){return{get adsManager(){return t.adsManager},get ids(){return t.ids},get adContainer(){return t.adContainer},get imaSDK(){return t.imaSDK},get sendEvent(){return t.sendEvent},set sendEvent(i){t.sendEvent=i}}}(this)),this.hu}get id(){return this.aS}get adsManager(){return this.Uri}get ids(){return this.Fgi}get adContainer(){return this.A2t}get sendEvent(){return this.Ugi}set sendEvent(t){for(const t of this.Vgi)this.Uri.removeEventListener(t.type,t.listener);this.Vgi=[],this.Ugi=t,this.Hgi()}get imaSDK(){return!0}Wgi(){for(const t in google.ima.AdEvent.Type){const i=google.ima.AdEvent.Type[t];this.Uri.addEventListener(i,this.qgi),this.Vgi.push({type:i,listener:this.qgi})}}zgi(){Wt(this.Vgi);for(const t in google.ima.AdEvent.Type){const i=google.ima.AdEvent.Type[t];this.Uri.removeEventListener(i,this.qgi)}}Ggi(t){this.Zf.push({type:t.type,adVolume:this.adsManager.getVolume()})}Hgi(){null==this.Ugi||this.Ugi.call(this,this.Zf),this.Zf=[]}static Xgi(i){return t.jgi[i]||i}constructor(i,e,s,n){this.hu=void 0,this.aS=void 0,this.Uri=void 0,this.Fgi=void 0,this.A2t=void 0,this.Vgi=void 0,this.Ugi=void 0,this.Zf=void 0,this.qgi=i=>{this.Ggi({type:t.Xgi(i.type)})},this.aS=i,this.Uri=e,this.Fgi=s,this.A2t=n,this.Vgi=[],this.Zf=[]}};P9.jgi={loaded:"AdLoaded",impression:"AdImpression",start:"AdVideoStart",firstQuartile:"AdVideoFirstQuartile",midpoint:"AdVideoMidpoint",thirdQuartile:"AdVideoThirdQuartile",complete:"AdVideoComplete",pause:"AdPaused",skip:"AdSkipped",volumeChange:"AdVolumeChange"};var I9=class{Qgi(t,i){this.Kgi=h.createElement("script"),this.Kgi.id=t.id,this.Kgi.type="text/javascript",t.adContainer.appendChild(this.Kgi),this.Kgi.src="https://z.moatads.com/"+i+"/moatvideo.js#"+t.id,this.Ygi=t.id,s[this.Ygi]=t.Ca}Jgi(){this.Kgi&&Ao(this.Kgi),this.Ygi&&(s[this.Ygi]=void 0)}constructor(){this.Kgi=void 0,this.Ygi=void 0}};Na(function(t){return class i extends t{Ta(t){var e,s,n;this.Zgi(),null==(e=this.$gi)||e.removeEventListener(google.ima.AdEvent.Type.COMPLETE,this.tpi),null==(s=this.$gi)||s.removeEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.Zgi),null==(n=this.$gi)||n.removeEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.ipi),this.$gi=void 0,this.A2t=void 0,super.Ta(t);const r=t&&t.analytics;this.epi=i.spi(r);this.Jc&&this.epi&&e4()&&this.npi()}kn(){var t,i,e;this.Zgi(),null==(t=this.$gi)||t.removeEventListener(google.ima.AdEvent.Type.COMPLETE,this.tpi),null==(i=this.$gi)||i.removeEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.Zgi),null==(e=this.$gi)||e.removeEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.ipi),this.$gi=void 0,this.A2t=void 0,this.Jc&&this.Jc.mn("nii",this.rii),super.kn()}npi(){this.Jc&&this.Jc.wn("nii",this.rii)}rpi(t,i,e){const s=x9+"moatApi"+_.floor(1e8*_.random());this.hpi=new P9(s,t,i,e),this.hpi.Wgi(),this.opi.Qgi(this.hpi,this.epi.partnerCode)}static spi(t){if(t){const i=t.filter(t=>"moat"===t.integration);if(0===i.length)return;if(i.length>1)throw new m("Only one Moat analytics configuration expected");return i[0]}}constructor(t,i){super(t,i),this.opi=void 0,this.epi=void 0,this.hpi=void 0,this.$gi=void 0,this.A2t=void 0,this.ipi=()=>{this.rpi(this.$gi,{partnerCode:this.epi.partnerCode,viewMode:google.ima.ViewMode.NORMAL},this.A2t)},this.rii=t=>{this.$gi=t.Fri,this.A2t=t.Wii,this.Zgi(),this.$gi.addEventListener(google.ima.AdEvent.Type.COMPLETE,this.tpi),this.$gi.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.Zgi),this.$gi.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.ipi)},this.tpi=t=>{const i=t.getAd().getAdPodInfo();i.getAdPosition()<i.getTotalAds()&&(this.Zgi(),this.ipi())},this.Zgi=()=>{this.hpi&&(this.hpi.zgi(),this.hpi=void 0),this.opi.Jgi()},this.opi=new I9}}},Oa.Snt),r(),r(),r(),r();var C9="theo-dai-clickthrough",R9="urn:google:dai:2018",D9=class{get Ca(){const t=this,i=this.upi;return{contentTimeForStreamTime:i=>t.Hai?t.Hai.Wai(i):i,streamTimeForContentTime:i=>t.Hai?t.Hai.qai(i):i,replaceAdTagParameters(i){t.Hai&&t.Hai.replaceAdTagParameters(i)},get snapback(){return t.cpi},set snapback(i){t.cpi=i},get sourceTransformer(){return i.lpi},set sourceTransformer(t){i.lpi=t}}}Xx(t){this.T9.Zg(),this.T9=new Zc;Wr(Cu(this.Xri(t,this.T9.Yg),this.T9))}async Xri(t,i){if(fr(i),!this.fpi||!this.Hai)return this.oa.vpi(t);if(this.fpi.Fnt&&!this._pi)return;const e=this.oa.Gx();if(this.cpi){const s=this.Hai.hui(t,e);if(s){this.oa.vpi(s),await this.Hai.ww(Me.AD_BREAK_ENDED,i);if(this.Hai.rui(t).RO>t)return}}this.oa.vpi(t)}EP(){const t=this.fpi&&this.fpi.Fnt;if(t){const i=Uo.jn(this.oa.gpi()),e=t.qOt,s=e+t.G0t,n=new Uo([e,s]);return i.Mn(n)._s()}return this.oa.gpi()}async drt(t,i){if(!t)return this.oa.ppi(t,i);let e=t;try{this.oa.nt.wn(N.rI,this.mpi),e=await this.upi.wpi(t,i),this.fpi&&this.Hai&&(this.ypi=!0)}catch(t){if(sa(t),t.code===Mi.LICENSE_INVALID)return;const i=new as(me.SOURCE_NOT_SUPPORTED,"Something went wrong while setting up a Google DAI stream.",t);throw this.nq=ar(i),this.rq=i,this.oa.So(new el(i)),i}await this.oa.ppi(e,i)}hr(){if(this.ypi){if(this.oa.nt.mn(N.rI,this.mpi),this.Lui){this.Lui.mn(Te.uI,this.bpi);for(const t of this.Lui.L.NI)t.mn(Js.QL,this.Api);this.Lui=void 0}this.nq=void 0,this.rq=void 0,this.T9.Zg(),this.fpi&&this.fpi.hr(),this.Hai&&this.Hai.hr(),this.ypi=!1}}get lt(){return this.nq||this.oa.Spi()}get Jx(){return this.rq||this.oa.Tpi()}kn(){this.hr(),this.oa.kpi(),this.Hai&&this.Hai.kn()}constructor(t,i,e,s,n){this.oa=void 0,this.upi=void 0,this.Hai=void 0,this.fpi=void 0,this._pi=void 0,this.Lui=void 0,this.nq=void 0,this.rq=void 0,this.T9=new Zc,this.ypi=!1,this.cpi=!0,this.mpi=t=>{const i=t.Ht;i.Lt===us.zU&&(i.Km===nh.ID3||i.Km===nh.EVENT_STREAM&&i.eC===R9)&&(i.Qk=xh.iC,this.Lui=i,i.wn(Te.uI,this.bpi))},this.bpi=t=>{t.PO.wn(Js.QL,this.Api)},this.Api=t=>{var i,e;if(this.Hai)if((null==(i=this.Lui)?void 0:i.Km)===nh.ID3){const i=t.PO.U;"TXXX"===i.id&&this.Hai.sui({TXXX:i.text})}else if((null==(e=this.Lui)?void 0:e.Km)===nh.EVENT_STREAM){const i=t.PO.U;this.Hai.nui(R9,i,t.YF)}},this.oa=t,this.Hai=i,this.fpi=e,this.upi=s,this._pi=n,e&&i&&this.oa.Jc&&this.oa.Jc.znt(e.oti)}};r(),r();var N9=class extends tn{get Epi(){return this.xpi}get u$t(){return we.so}constructor(t,i,e,s=!0){super(e),this.xpi=void 0,this.xpi=s,this.k4t=t,this.E4t=i}},B9=class extends z3{Ppi(){const t=[Me.STARTED,Me.FIRST_QUARTILE,Me.MIDPOINT,Me.THIRD_QUARTILE,Me.COMPLETE];this.Hai.wn(t,this.Ipi),this.Hai.wn(Me.AD_BREAK_ENDED,this.iui),this.Hai.wn(Me.AD_PROGRESS,this.Xai),this.Hai.wn(Me.CUEPOINTS_CHANGED,this.Qai)}get w4t(){return this.uti}get u4t(){return this.R5t}Cpi(t){let i=t.v7t.qOt,e=this.w1t||this.findAdBreakWithPredicate(i,t=>!t.pP);if(!e){const s=t.v7t.G0t;i=this.oa.Gx(),e=new N9(s,s,i,!1),e.P4t(),this.y1t.push(e)}return e}Rpi(t){switch(t){case Me.STARTED:this.uti=!0;break;case Me.AD_BREAK_ENDED:this.uti=!1}}Dpi(t,i,e){if(i)switch(t){case Me.STARTED:case Me.FIRST_QUARTILE:case Me.MIDPOINT:case Me.THIRD_QUARTILE:case Me.COMPLETE:this.u4t.So(new Ta(this.w1t))}if(e)switch(t){case Me.STARTED:case Me.FIRST_QUARTILE:case Me.MIDPOINT:case Me.THIRD_QUARTILE:case Me.COMPLETE:this.u4t.So(new nc(this.u1t,this.u1t.W7t))}switch(t){case Me.COMPLETE:this.u4t.So(new fc(this.u1t,this.hti.W7t));break;case Me.AD_BREAK_ENDED:this.u4t.So(new Za(this.Fnt))}switch(t){case Me.FIRST_QUARTILE:this.u4t.So(new ie(this.u1t,this.hti.W7t));break;case Me.MIDPOINT:this.u4t.So(new xe(this.u1t,this.hti.W7t));break;case Me.THIRD_QUARTILE:this.u4t.So(new Qs(this.u1t,this.hti.W7t))}}Npi(t){const i=t.jnt,e=this.Cpi(i),s=function(t,i){if(t.Jc.length)return!1;for(let e=0;e<i;e++){const i=new V3(t,Hs.BZt);t.C4t(i)}return!0}(e,i.v7t.C9t),n=function(t,i){const e=i.v7t.I9t-1;return t.Jc[e]}(e,i),r=function(t,i){return t.U4t!==r3.READY&&(t.K7t(i),!0)}(n,i);this.u1t=n,this.w1t=e,e.P4t(),this.Dpi(t.type,s,r)}Bpi(t){for(const i of this.y1t)if(Ql(t,i.qOt))return i}findAdBreakWithPredicate(t,i){for(const e of this.y1t)if(Ql(e.qOt,t)&&i(e))return e}get Mpi(){const t=this.findAdBreakWithPredicate(0,t=>t.Epi);let i=0;return t&&(i=t.G0t),i}Lpi(t,i){let e;for(const s of this.y1t)s.qOt>=t&&s.qOt<=i&&!s.pP&&(!e||s.qOt>=e.qOt)&&(e=s);return e}uD(){}qnt(t){}hr(){this.u1t&&(this.u4t.So(new fc(this.u1t,this.u1t.W7t)),this.u1t=void 0),this.w1t&&(this.u4t.So(new Za(this.w1t)),this.w1t=void 0),this.uti=!1,Wt(this.y1t)}kn(){this.hr(),this.u4t.kn()}Hnt(t){}constructor(t,i){super(new tl,we.so),this.Hai=void 0,this.oa=void 0,this.Xai=void 0,this.Qai=void 0,this.Ipi=void 0,this.iui=void 0,this.Hai=t,this.oa=i,this.Xai=t=>{const i=this.w1t;if(!i||!this.u1t)return;const e=t.Vai.aui;this.u1t.W7t=e.zx,function(t,i){const e=i.I9t,s=i.P9t,n=i.zx,r=$l(t.Jc.slice(0,e-1),t=>{var i;return null!=(i=t.ct)?i:0});t.X0t=s-n-r}(i,e)},this.Qai=t=>{const i=t.Vai.uui;if(i)for(const t of i)if(!this.Bpi(t.CO)){const i=t.RO-t.CO,e=new N9(i,i,t.CO,!0);this.y1t.push(e)}},this.Ipi=t=>{this.Rpi(t.type),this.Npi(t)},this.iui=t=>{this.uti=!1,this.u1t=void 0;const i=this.Fnt;i&&(i.X0t=0,this.Dpi(t.type,!1,!1),this.w1t=void 0)},this.Ppi()}};function M9(t){if(t.sources)if(hi(t.sources)){for(const i of t.sources)if(pk(i))return!0}else if(Mc(t.sources))return pk(t.sources);return!1}r();var L9=class{async wpi(t,i){const e=[],s=[];for(const i of t.sources)if(pk(i)){if(!this.Hai)continue;e.push(i)}else s.push(i);if(0===e.length)return t;let n,r;for(;void 0===n&&0!==e.length;){const{Mc:h}=await _C.Bg.gz(e,t),o=h;fr(i);try{n=await this.Opi(o,i),s.push(n)}catch(t){sa(t),r=t,_e(e,o)}}if(0!==t.sources.length&&0===s.length)throw new m("Fatal: unable to play DAI streams.");return r&&uh(r.message),Y({},t,{sources:s})}async Opi(t,i){if(!this.Hai)throw new m("Could not find Google\u2019s IMA DAI HTML5 SDK, all DAI sources will be ignored.");const e=this.Hai.ww(Me.LOADED,i),s=this.Hai.ww(Me.ERROR,i),n=t.type===Hi.vC?"dash":"hls";this.Hai.KHt(Y({},t.ssai,{format:n}));const r=await Promise.race([e,s]);if(r.type===Me.LOADED){const i=t.type===Hi.vC?Hi.vC:Hi.gC;return ue(Y({},t,{src:this.lpi?await this.lpi(r.Vai.Yu||""):r.Vai.Yu,type:i}))}throw m(r.Vai.cui)}constructor(t){this.Hai=void 0,this.lpi=void 0,this.Hai=t,this.lpi=t=>t}};Na(function(t){return i=>class extends i{xa(){const t=super.xa(),i=t.ads;if(i){const t=this.Fpi.Ca;Gi(i,{get dai(){return t}})}return t}get Kl(){return this.Upi}vpi(t){super.Xx(t)}Xx(t,i){this.Fpi.Xx(t)}gpi(){return super.EP()}EP(){return this.Fpi.EP()}Ta(t){return this.Fpi.hr(),super.Ta(t)}async ppi(t,i){return super.drt(t,i)}async drt(t,i){return this.Fpi.drt(t,i)}Spi(){return super.Yx()}Tpi(){return super.Zx()}Yx(){return this.Fpi.lt}Zx(){return this.Fpi.Jx}kpi(){super.kn()}kn(){this.Fpi.kn(),this.T2t&&(Ao(this.T2t),this.T2t.removeEventListener("keydown",this.Vpi),this.T2t.removeEventListener("click",this.Vpi),this.T2t=void 0),this.Hpi&&(Ao(this.Hpi),this.Hpi=void 0)}constructor(i,e){super(i,e),this.Fpi=void 0,this.Upi=!1,this.T2t=void 0,this.Hpi=void 0,this.Vpi=t=>{13===t.which&&this.T2t.click(),this.jP()};const s=this.zP(),n=e.ads.googleIma.useAdUiElementForSsai;var r;const o=null!=(r=e.ads.googleIma.allowSeekingForGoogleDai)&&r;let a,u;try{var c;n?(this.Hpi=h.createElement("div"),Go(this.Hpi),this.Hpi.className="theo-dai-ad-ui"):(this.T2t=h.createElement("button"),this.T2t.className=C9),a=t(s,this.T2t,this.Hpi),u=new B9(a,this);const i=null!=(c=this.T2t)?c:this.Hpi;i&&this.xe.appendChild(i),this.Upi=!0}catch(t){this.T2t=void 0,this.Hpi=void 0}const d=new L9(a);this.Fpi=new D9(this,a,u,d,o),this.T2t&&(this.T2t.addEventListener("keydown",this.Vpi),this.T2t.addEventListener("click",this.Vpi))}}}(function(t,i,e){if(!(s.google&&s.google.ima&&Mc(s.google.ima.dai)))throw new m("Could not find Google\u2019s IMA DAI HTML5 SDK, all DAI sources will be ignored.");const n=q6(),r=new google.ima.dai.api.StreamManager(t,e),h=q6();return new F6(r,i,h&&h!==n?h:void 0)}),Oa.Ant),r(),r(),r();var O9=class{get Wpi(){return void 0===this.qpi?0:(performance.now()-this.qpi)/1e3}zpi(t){this.Gpi=t,this.jpi.Xpi(t),this.oa.wn(d.uo,this.dci),this.oa.wn(d.Nw,this.kgi),this.oa.wn(d.py,this.Cci),this.oa.wn(hc.ma,this.u8),this.oa.wn(Jr.xM,this.Qpi),this.oa.wn([Jr.SM,Jr.TM,Jr.PM],this.Kpi),this.oa.wn(d.Cw,this.Ypi),s.addEventListener("beforeunload",this.EBt)}Jpi(){this.oa.mn(d.uo,this.dci),this.oa.mn(d.Nw,this.kgi),this.oa.mn(d.py,this.Cci),this.oa.mn(hc.ma,this.u8),this.oa.mn(Jr.xM,this.Qpi),this.oa.mn([Jr.SM,Jr.TM,Jr.PM],this.Kpi),this.oa.mn(d.Cw,this.Ypi),s.removeEventListener("beforeunload",this.EBt),this.Zpi||(this.jpi.$pi(this.tmi),this.jpi.imi()),this.emi&&this.smi(),this.Gpi=void 0,this.nmi=!1,this.Zpi=!1,this.tmi=-1/0,Wt(this.rmi)}hmi(){this.nmi&&this.jpi.omi(),this.qpi=performance.now(),this.ami=v(this.umi,6e4)}smi(){this.jpi.cmi(this.Wpi),this.emi=!1,this.qpi=void 0,this.ami&&(p(this.ami),this.ami=void 0)}dmi(){if(S(this.oa.Nd()))return;const t=10*function(t,i){return _.floor(t/i)}(this.oa.Gx()/this.oa.Nd()*100,10);Ct(this.rmi,t)||(this.rmi.push(t),this.jpi.lmi(t))}constructor(t,i){this.oa=void 0,this.jpi=void 0,this.Gpi=void 0,this.nmi=void 0,this.Zpi=void 0,this.rmi=void 0,this.tmi=void 0,this.fmi=void 0,this.emi=void 0,this.ami=void 0,this.qpi=void 0,this.dci=void 0,this.kgi=void 0,this.Cci=void 0,this.Qpi=void 0,this.Kpi=void 0,this.u8=void 0,this.Ypi=void 0,this.EBt=void 0,this.umi=void 0,this.oa=t,this.jpi=i,this.nmi=!1,this.Zpi=!1,this.rmi=[],this.tmi=-1/0,this.emi=!1,this.dci=()=>{this.nmi||(this.jpi.vmi(),this.emi&&this.jpi.omi(),this.nmi=!0)},this.kgi=()=>{this.jpi._mi(),this.Zpi=!0},this.Cci=()=>{this.tmi<this.oa.Gx()&&(this.tmi=this.oa.Gx()),this.dmi()},this.Qpi=()=>{this.nmi&&(this.fmi=performance.now(),this.jpi.gmi(this.oa.Gx()))},this.Kpi=()=>{this.fmi&&(this.jpi.pmi((performance.now()-this.fmi)/1e3),this.fmi=void 0)},this.u8=()=>{this.tmi<this.oa.Gx()&&(this.tmi=this.oa.Gx()),this.jpi.xrt(this.oa.Yx().message)},this.Ypi=()=>{const t=this.oa.Nd()===1/0;t&&!this.emi&&(this.emi=t,this.hmi())},this.EBt=()=>{this.jpi.$pi(this.tmi),this.jpi.mmi()},this.umi=()=>{void 0!==this.qpi&&this.jpi.wmi(this.Wpi)}}};r();var F9=class{Xpi(t){this.ymi(["setDocumentTitle",t.itemTitle]),this.ymi(["setCustomUrl","https://content.streamone.net/embed/cust=Xo9oT45EptMG/account="+t.accountID+"/item="+t.itemID]),this.ymi(["trackPageView"])}vmi(){this.bmi("item first play","viewing","1")}imi(){this.bmi("item skipped","skipped","1")}lmi(t){this.bmi("item progress","percent",""+t)}mmi(){this.bmi("item abandoned","window closed","1")}$pi(t){this.bmi("item time","watched",""+t)}_mi(){this.bmi("item finished","ended","1")}gmi(t){this.bmi("buffering started","timestamp",""+t)}pmi(t){this.bmi("buffering ended","duration",""+t)}xrt(t){this.bmi("error","message",""+t)}omi(){this.bmi("livestream first play","viewing","1")}wmi(t){this.bmi("livestream progress","duration",""+t)}cmi(t){this.bmi("livestream time","watched",""+t)}bmi(t,i,e){this.ymi(["trackEvent","Video",t,i,e])}ymi(t){const i="undefined"!=typeof _paq?_paq:void 0;i?i.push(t):console.warn("The Piwik library required for the StreamOne pre-integration was not found. Make sure it is loaded before instantiating THEOplayer.")}};r();var U9=class{get Ami(){if(!this.Smi)return;const t=this.oa.Gx()/this.Smi;return _.floor(4*t)+1}get Tmi(){return void 0!==this.Smi}zpi(){this.qc.wn("Jnt",this.Agi),this.qc.wn("Znt",this.Sgi),this.qc.wn("Z4t",this.Tgi),this.qc.wn("_4t",this.Bci),this.oa.wn(d.py,this.Cci),s.addEventListener("beforeunload",this.EBt)}Jpi(){this.qc.mn("Jnt",this.Agi),this.qc.mn("Znt",this.Sgi),this.qc.mn("Z4t",this.Tgi),this.qc.mn("_4t",this.Bci),this.oa.mn(d.py,this.Cci),Wt(this.kmi),s.removeEventListener("beforeunload",this.EBt),this.Smi=void 0}constructor(t,i,e){this.oa=void 0,this.qc=void 0,this.jpi=void 0,this.Smi=void 0,this.kmi=void 0,this.Agi=void 0,this.Sgi=void 0,this.Tgi=void 0,this.Bci=void 0,this.Cci=void 0,this.EBt=void 0,this.oa=t,this.qc=i,this.jpi=e,this.kmi=[],this.Agi=()=>{this.Smi=this.oa.Nd(),this.jpi.Emi(this.Smi)},this.Sgi=()=>{this.Smi&&(this.jpi.xmi(this.Smi),Wt(this.kmi),this.Smi=void 0)},this.Tgi=t=>{if(!this.Smi)return;const i=this.Smi-this.Smi*t.Y4t;this.jpi.Pmi(i),this.Smi=void 0},this.Bci=()=>{this.Smi=this.oa.Nd(),this.jpi.Imi()},this.Cci=()=>{const t=this.Ami;if(this.Tmi&&t&&!Ct(this.kmi,t)){switch(t){case 1:this.jpi.Cmi();break;case 2:this.jpi.Rmi();break;case 3:this.jpi.Dmi();break;case 4:this.jpi.Nmi()}this.kmi.push(t)}},this.EBt=()=>{this.jpi.Bmi()}}};r();var V9=class{Emi(t){this.jpi.bmi("ad start","duration",""+t)}xmi(t){this.jpi.bmi("ad finished","duration",""+t)}Pmi(t){this.jpi.bmi("ad skipped","remaining time",""+t)}Imi(){this.jpi.bmi("ad blocker","detected","1")}Cmi(){this.jpi.bmi("ad progress","firstQuartile","")}Rmi(){this.jpi.bmi("ad progress","secondQuartile","")}Dmi(){this.jpi.bmi("ad progress","thirdQuartile","")}Nmi(){this.jpi.bmi("ad progress","fourthQuartile","")}Bmi(){this.jpi.bmi("ad abandoned","window closed","1")}constructor(t){this.jpi=void 0,this.jpi=t}};function H9(t){return t&&"streamone"===t.integration}Na(function(t){return class extends t{kn(){this.mn(d.do,this.fo),this.Mmi&&(this.Lmi&&this.Lmi.Jpi(),this.Omi&&this.Omi.Jpi(),this.Mmi=!1),super.kn()}constructor(t,i){super(t,i),this.Lmi=void 0,this.Omi=void 0,this.Mmi=!1,this.fo=()=>{this.Mmi&&(this.Lmi.Jpi(),this.Omi&&this.Omi.Jpi());const t=this.nu();if(this.Mmi=!1,!t)return;const i=function(t){if(t.analytics)for(const i of t.analytics)if(H9(i))return i}(t);i&&(this.Mmi=!0,this.Lmi.zpi(i),this.Omi&&this.Omi.zpi())};const e=new F9;if(this.Lmi=new O9(this,e),this.Jc){const t=new V9(e);this.Omi=new U9(this,this.Jc,t)}this.wn(d.do,this.fo)}}},Oa.Snt),r(),r(),r(),r(),r(),r();var W9=class extends Da{async J2(t,i,e){const s=await q9(t);await super.J2(s,i,e),this.Fmi(s,i)}async Q2(t,i,e){const s=await q9(t);await super.Q2(s,i,e),this.Fmi(s,i)}Fmi(t,i){const e=this.Vmi.Umi;if(void 0===e)return;const s=i.u2;let n;if(this.Hmi!==s&&(this.Hmi=s,e.setLevelSwitching(s),e.setContainerFormat(2)),function(t){return _u.call(t,"Get")}(i)){const t=i.Get,r=i.Get+i.ct;n=i.EU,e.newPts(t,r,"video",s)}else 0;e.appendBuffer(t.lk,"video",s,n)}async pS(t,i,e){var s;await super.pS(t,i,e),null==(s=this.Vmi.Umi)||s.flushBuffer(t,i)}constructor(t,i){super(t),this.Vmi=void 0,this.Hmi=void 0,this.Vmi=i,this.Hmi=void 0}};async function q9(t){switch(t.Km){case We.wZ:return t;case We.MT:{const i=await tA(t.lk);return{Km:We.wZ,lk:new j(i)}}case We.yZ:throw new m("Opaque initialization segments are not supported on web.")}}var z9=class extends ja{Lrt(t){return t.V3===at.Mk?new W9(t,this.Vmi):new Da(t)}constructor(t,i){super(t),this.Vmi=void 0,this.Vmi=i,this.Brt(t)}},G9=class extends(ft(pn)){get Umi(){return this.Wmi}qmi(){this.Wmi=new LCEVCdec.LCEVCdec(this.hq,this.zmi,{})}be(){super.be(),this.Gmi()}we(){super.we(),this.zmi.style.display="none"}hr(){return this.zmi.style.display="none",void 0!==this.Wmi&&(this.Wmi.close(),this.qmi()),super.hr()}zg(){return this.Xmi=!0,void 0!==this.Wmi&&(this.Wmi.close(),this.Wmi=void 0),Ao(this.zmi),super.zg()}Qq(t){this.So(new uM(new mu(Mi.ABORTED,t)))}Gmi(){this.PL.hq.style.display="none",this.zmi.style.display="block"}cht(t){return new z9(t,this)}uht(t){return new Ia(t)}constructor(t){super(t),this.zmi=void 0,this.Wmi=void 0,this.Xmi=!1,this.jmi=t=>{this.Xmi||(t||this.Qq("LCEVC SDK failed to initialize."),this.qmi())},this.Qmi=()=>{this.Xmi||this.Qq("LCEVC SDK failed to initialize.")},this.zmi=h.createElement("canvas"),Go(this.zmi),this.zmi.style.display="none";const i=t.hq;var e;i.parentElement.insertBefore(this.zmi,null!=(e=i.nextSibling)?e:null),LCEVCdec.ready.then(this.jmi,this.Qmi)}},X9=class extends Ea{Yq(t){return t===at.Mk?(this.Kmi=new G9(super.Yq(t)),this.Kmi):super.Yq(t)}async Dq(t){if(t instanceof G9){this.Kmi=void 0;const i=t;await i.zg(),await super.Dq(i.Zrt)}else await super.Dq(t)}get Ymi(){return this.Kmi}constructor(...t){super(...t),this.Kmi=void 0}},j9=class extends vX{async kn(){for(const t of this.sO.NI)t.mn(Te.II,this.Jmi);this.rt.mn(N.rI,this.Zmi),this.rt.mn(N.oI,this.$mi),await super.kn(),await this.PL.zg(),await this.Nq.Dq(this.PL)}constructor(t,i,e,s,n,r,h){const o=new X9(n),a=new qs(o);super(t,i,e,s,a.Yq(r),h),this.Nq=void 0,this.iwi=void 0,this.Zmi=t=>{t.Ht.wn(Te.II,this.Jmi)},this.$mi=t=>{t.Ht.mn(Te.II,this.Jmi)},this.Jmi=t=>{var i;const e=null==(i=this.iwi.Ymi)?void 0:i.Umi,s=t.qot.JI;null==e||e.setCurrentLevel(s)},this.Nq=a,this.iwi=o,this.sO.wn(N.rI,this.Zmi),this.sO.wn(N.oI,this.$mi)}};oe(new class extends CU{DC(t,i,e,s,n,r,h){let o=i;return UX.US()&&(o=new UX(o)),new j9(e,s,n,r,o,at.Mk,t)}async Jq(t){if(!t.lcevc)return!1;if(!await super.Jq(t))return!1;if(void 0===s.LCEVCdec)throw new as(me.CONFIGURATION_ERROR,"LCEVC SDK is not loaded.");return!0}$q(){return!1}constructor(...t){super(...t),this.tz=$.wW}}),r();var Q9=class extends u0{async kn(){const t=this.rt;for(const i of t.NI)i.mn(Te.II,this.Jmi);t.mn(N.rI,this.Zmi),t.mn(N.oI,this.$mi),await super.kn(),await this.Nq.Dq(this.PL)}constructor(t,i,e,s,n){const r=new X9(t),h=new qs(r);super(h.Yq(at.Mk),i,e,s,n),this.Nq=void 0,this.iwi=void 0,this.Zmi=t=>{t.Ht.wn(Te.II,this.Jmi)},this.$mi=t=>{t.Ht.mn(Te.II,this.Jmi)},this.Jmi=t=>{var i;const e=null==(i=this.iwi.Ymi)?void 0:i.Umi,s=t.qot.fLt.JI;null==e||e.setCurrentLevel(s)},this.Nq=h,this.iwi=r;const o=this.rt;o.wn(N.rI,this.Zmi),o.wn(N.oI,this.$mi)}};oe(new class extends d0{DC(t,i,e,s,n,r,h){return new Q9(i,e,n,r,s)}Jq(t,i){if(!t.lcevc)return!1;if(!super.Jq(t,i))return!1;if(void 0===s.LCEVCdec)throw new as(me.CONFIGURATION_ERROR,"LCEVC SDK is not loaded.");return!0}$q(){return!1}constructor(...t){super(...t),this.tz=$.TW}}),r(),r(),r(),r();var K9=function(t){return t.ewi="hr",t.swi="nwi",t}({}),Y9="freewheel-nonlinear-ad",J9=[d.Cw,d.py,d.wy,d.jw,Jr.PM,d.uo],Z9=class t extends A3{GP(){this.Nq.Nz()}rwi(){this.hwi.wn("Ynt",this.owi),this.hwi.wn(["Jnt","Znt"],this.awi),this.hwi.wn("Knt",this.Zni)}uwi(){this.hwi.mn("Ynt",this.owi),this.hwi.mn(["Jnt","Znt"],this.awi),this.hwi.mn("Knt",this.Zni)}cwi(){this.u4t.au(this.hwi.dwi)}lwi(){this.hwi.fwi.wn(J9,this.Rs)}vwi(){this.hwi.fwi.mn(J9,this.Rs)}get o4t(){return this}static get r4t(){return we._1t}get r4t(){return t.r4t}get Fnt(){var t;return null!=(t=this.hwi.dwi.Fnt)?t:null}get Lnt(){const t=this.hwi.dwi.hti;return t?[t]:[]}qnt(t){}Gx(){return this.hwi.fwi.zx}Xx(t,i){}Nd(){return this.hwi.fwi.ct}Kx(){return this.hwi.fwi.Qx}Yx(){return this.nq}Zx(){return this.rq}NP(){return 0}LP(){return 0}FP(){return this.hwi.fwi.OP}UP(t){this.hwi.fwi.OP=t}aP(){return this.hwi.fwi.oP}uP(t){this.hwi.fwi.oP=t}TP(){return this.hwi.fwi.AP}get Unt(){return this.hwi.dwi.Unt}get Vnt(){return this.hwi.dwi.Vnt}EP(){return this.hwi.fwi.kP}fP(){return this.hwi.fwi.lP}l4t(t){if(this.w4t||this.hwi.l4t(t),this.hwi._wi){if(t.type===d.jw&&this.oa.Qx)return!0;if(t.type===d.Nw)return this.hwi.pwi.gwi(),!0}return!1}we(){this.hwi.we()}jP(){this.lP||this.hwi.fwi.jP()}async mwi(){if(!this.hwi.wwi)try{await this.hwi.r8t()}catch(t){this.ywi(t,$c.GENERAL)}}async bwi(){if(this.hwi.fwi.aoi)return this.hwi.fwi.QP(),!1;if(this.hwi.Awi)try{await this.hwi.pwi.Swi()}catch(t){this.ywi(t,$c.PLAYBACK)}return!0}get kwi(){return it(this.Yx())}ywi(t,i){t.name!==K9.ewi&&this.u4t.So(new $h(i,"Ads could not be loaded."))}async QP(){if(this.lP&&this.So(new vt(this.zx)),await this.mwi(),this.kwi)return;const t=await this.bwi();!this.kwi&&t&&this.Zni()}Cti(t,i,e){i===Hu.Mnt&&this.hwi.Cti(t)}be(){this.hwi.be()}uD(){this.hwi.fwi.uD()}Hnt(t){}zP(){return this.vet}Ox(){return this.Nq.Fz.map(t=>t.hq)}S4t(t){}async kn(){await this.KP(),this.hwi.kn(),await this.Nq.Dq(this.PL),this.uwi(),this.vwi(),this.u4t.LK(this.hwi.dwi)}async KP(){this.hwi.hr(),this.w4t&&(this.oa.be(),this.I3t(),this.we())}constructor(t,i,e,s,n){super(t,i),this.hwi=void 0,this.nq=void 0,this.rq=void 0,this.vet=void 0,this.Nq=void 0,this.PL=void 0,this.awi=t=>{const i=t.jnt,e="Jnt"===t.type;if(i.V4t===Hs.L4t){const t=this.oa.xe.classList;e?t.add(Y9):t.remove(Y9)}e?this.be():this.we()},this.owi=()=>{this.D5t(),this.oa.jP(),this.oa.we()},this.Zni=()=>{this.hwi.wwi&&(this.oa.Qx||this.oa.QP(),this.we(),this.oa.be(),this.I3t())},this.hwi=s,this.Nq=e,this.PL=n,this.vet=n.hq,this.vet.controls=!1,this.rwi(),this.cwi(),this.lwi()}};r(),r(),r();var $9=class extends tn{get Ewi(){return this.xwi}get Pwi(){return this.Jc[this.Iwi]}set Cwi(t){this.Iwi=t}get Cwi(){return this.Iwi}get V4t(){return this.H4t}get u$t(){return we._1t}constructor(t,i,e,s){super(e),this.xwi=void 0,this.Iwi=void 0,this.H4t=void 0,this.xwi=s,this.Iwi=0,this.H4t=i7(s),this.k4t=t,this.E4t=i}};r();var t7=class extends gn{get Rwi(){return this.Dwi}set Rwi(t){this.Dwi!==t&&(this.Dwi=t)}get Mi(){return this.od.Ewi.getHeight()}get Ti(){return this.od.Ewi.getWidth()}get KYt(){return this.Rwi.getEventCallbackUrls(tv.freewheel.SDK.EVENT_AD_CLICK,tv.freewheel.SDK.EVENT_TYPE_CLICK)[0]}get u$t(){return we._1t}xa(){return La(this)}constructor(t,i,e){super(t,i),this.Dwi=void 0,this.Dwi=e}};function i7(t){return t.getTimePositionClass()===tv.freewheel.SDK.TIME_POSITION_CLASS_OVERLAY?Hs.L4t:Hs.BZt}var e7=class t extends je{async Nwi(t,i){this.Bwi=t,this.Mwi=i,this.Lwi(t),await i,this.Owi()}get Fwi(){return this.Uwi}get Vwi(){return this.Hwi}get Wwi(){return this.qwi}get Fnt(){return this.w1t}get hti(){return this.u1t}get Unt(){const t=[];if(this.w1t){const i=this.w1t.Cwi;i>=0&&t.push(...this.w1t.Jc.slice(i+1))}for(const i of this.zwi)t.push(...i.Jc);return t}get Vnt(){return this.zwi}Owi(){this.Gwi()}Lwi(t){t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_STARTED,this.Xwi),t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,this.jwi),t.addEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION,this.Qwi),t.addEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION_END,this.Kwi),t.addEventListener(tv.freewheel.SDK.EVENT_AD,this.Ywi)}Jwi(){this.Bwi&&(this.Bwi.removeEventListener(tv.freewheel.SDK.EVENT_SLOT_STARTED,this.Xwi),this.Bwi.removeEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,this.jwi),this.Bwi.removeEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION,this.Qwi),this.Bwi.removeEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION_END,this.Kwi),this.Bwi.removeEventListener(tv.freewheel.SDK.EVENT_AD,this.Ywi))}Gwi(){this.Uwi=this.Zwi(this.$wi),this.Hwi=this.Zwi(this.tyi).concat(this.Zwi(this.iyi)),this.qwi=this.Zwi(this.eyi),this.zwi=this.Uwi.concat(this.Hwi).concat(this.qwi)}Zwi(t){if(!this.Bwi)return[];const i=this.Bwi.getSlotsByTimePositionClass(t);return this.syi(i)}nyi(t){if(!this.w1t)return void 0;const i=t.getSlot().getAdInstances().indexOf(t);-1!==i&&(this.w1t.Cwi=i);const e=this.w1t.Pwi;return e&&(e.Rwi=t),e}ryi(t){return hh(this.zwi,i=>i.Ewi===t)}syi(i){return i.map(i=>{const e=i.getTotalDuration(),s=t.hyi(i);return new $9(e,e,s,i)})}static oyi(t,i){const e=t.getAdInstances(),s=[];for(const t of e){const e=i7(t.getSlot()),n=new t7(i,e,t),r=[];n.O4t(t.getAdId(),t.getSlot().getWidth(),t.getSlot().getHeight(),t.getDuration(),r,0),i.C4t(n),s.push(n)}return s}P2t(){const t=this.hti;t&&this.So(new gu(t,this.ayi()))}uyi(){const t=this.hti;t&&(this.So(new fc(t,t.Rwi.getPlayheadTime())),this.u1t=void 0)}cyi(t){const i=this.Fnt;i&&(i.X0t=function(t,i,e){void 0===e&&(e=0);let s=0;const n=t.Jc.length;for(let r=i;r<n;r++){const n=t.Jc[r],h=n.ct;if(n){let t=h;r===i&&(t=No(h-e,0,h)),s+=t}}return s}(i,i.Cwi,t))}static hyi(t){return t.getTimePositionClass()===tv.freewheel.SDK.TIME_POSITION_CLASS_POSTROLL?-1:t.getTimePosition()}ayi(){const t=this.hti;if(!t)return 0;const i=t.Rwi;return i.getPlayheadTime()/i.getDuration()}dyi(t){_e(this.zwi,t),_e(this.Uwi,t),_e(this.Hwi,t),_e(this.qwi,t)}hr(){this.Jwi(),this.Uwi.length=0,this.Hwi.length=0,this.qwi.length=0,this.zwi.length=0,this.u1t=void 0,this.w1t=void 0,this.Bwi=void 0,this.Mwi=void 0}kn(){this.hr(),this.Vo()}constructor(i,e){super(),this.Ls=void 0,this.pT=void 0,this.$wi=void 0,this.tyi=void 0,this.eyi=void 0,this.iyi=void 0,this.Uwi=void 0,this.Hwi=void 0,this.qwi=void 0,this.zwi=void 0,this.w1t=void 0,this.u1t=void 0,this.Bwi=void 0,this.Mwi=void 0,this.Xwi=void 0,this.jwi=void 0,this.Qwi=void 0,this.Kwi=void 0,this.lyi=void 0,this.Ywi=void 0,this.Ls=i,this.pT=e,this.$wi=tv.freewheel.SDK.TIME_POSITION_CLASS_PREROLL,this.tyi=tv.freewheel.SDK.TIME_POSITION_CLASS_MIDROLL,this.eyi=tv.freewheel.SDK.TIME_POSITION_CLASS_POSTROLL,this.iyi=tv.freewheel.SDK.TIME_POSITION_CLASS_OVERLAY,this.Uwi=[],this.Hwi=[],this.qwi=[],this.zwi=[],this.Xwi=i=>{const e=i.slot,s=this.ryi(e);s&&(t.oyi(e,s),this.w1t=s,s.P4t(),this.dyi(s),s.V4t===Hs.BZt&&this.So(new Ta(s)))},this.jwi=()=>{const t=this.Fnt;t&&t.V4t===Hs.BZt&&(this.So(new Za(t)),this.pT.src=""),this.w1t=void 0},this.Qwi=t=>{const i=this.nyi(t.adInstance);i&&(this.So(new nc(i,i.Rwi.getPlayheadTime())),this.u1t=i),t.adInstance.getEventCallbackUrls(tv.freewheel.SDK.EVENT_AD_CLICK,tv.freewheel.SDK.EVENT_TYPE_CLICK).length>0&&(this.Ls.style.cursor="pointer",this.Ls.addEventListener("click",this.lyi))},this.Kwi=()=>{this.Ls.style.cursor="",this.Ls.removeEventListener("click",this.lyi)},this.lyi=()=>{this.hti&&this.hti.Rwi.getRendererController().processEvent({name:tv.freewheel.SDK.EVENT_AD_CLICK})},this.Ywi=t=>{switch(t.subType){case tv.freewheel.SDK.EVENT_AD_COMPLETE:this.uyi();break;case tv.freewheel.SDK.EVENT_AD_SKIPPED:this.P2t(),this.uyi()}}}};r();var s7=class t extends je{fyi(){if(this.Spt){this.Spt.setAdVolume(n7(this.oP,this.OP))}}vyi(t){this.Spt=t,this.Lwi(t)}Lwi(t){t.addEventListener(tv.freewheel.SDK.EVENT_AD,this._yi),t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_STARTED,this.gyi),t.addEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION,this.pyi),t.addEventListener(tv.freewheel.SDK.EVENT_AD_COMPLETE,this.myi),t.addEventListener(tv.freewheel.SDK.EVENT_CONTENT_VIDEO_PAUSE_REQUEST,this.wyi),t.addEventListener(tv.freewheel.SDK.EVENT_CONTENT_VIDEO_RESUME_REQUEST,this.yyi)}byi(){const t=this.Spt;t&&(t.removeEventListener(tv.freewheel.SDK.EVENT_AD,this._yi),t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_STARTED,this.gyi),t.removeEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION,this.pyi),t.removeEventListener(tv.freewheel.SDK.EVENT_AD_COMPLETE,this.myi),t.removeEventListener(tv.freewheel.SDK.EVENT_CONTENT_VIDEO_PAUSE_REQUEST,this.wyi),t.removeEventListener(tv.freewheel.SDK.EVENT_CONTENT_VIDEO_RESUME_REQUEST,this.yyi))}QP(){this.Pyt.Fnt&&(this.Pyt.Fnt.Ewi.resume(),this.lP=!1)}jP(){this.Pyt.Fnt&&(this.Pyt.Fnt.Ewi.pause(),this.lP=!0)}get zx(){const t=this.Pyt.hti;return t&&(this.zx=t.Rwi.getPlayheadTime()),this.xz}set zx(t){this.xz=t}get ct(){return this.Zb}get aoi(){return!!this.Pyt&&void 0!==this.Pyt.Fnt}get lP(){return this.Cz}set lP(t){this.Cz=t}get OP(){return this.cA}set OP(t){this.Spt&&this.Spt.setAdVolume(t),this.cA=t}get oP(){return this.Spt&&(this.Ayi=0===this.Spt.getAdVolume()),this.Ayi}set oP(t){this.Spt&&this.Spt.setAdVolume(n7(t,this.OP)),this.Ayi=t}get kP(){return this.H4}get Qx(){return this.h5}set Qx(t){this.h5=t}get AP(){return this.o5}static Syi(t){switch(t){case"pause":return tv.freewheel.SDK.VIDEO_STATE_PAUSED;case"playing":return tv.freewheel.SDK.VIDEO_STATE_PLAYING;case"ended":return tv.freewheel.SDK.VIDEO_STATE_COMPLETED;case"stop":return tv.freewheel.SDK.VIDEO_STATE_STOPPED}}Tyi(i){const e=t.Syi(i);this.Spt&&e&&this.Spt.setVideoState(e)}uD(){const t=this.Pyt.hti;t&&t.Rwi.skip()}hr(){if(this.byi(),this.Spt){this.Tyi("stop"),this.Spt.setVideoState(tv.freewheel.SDK.VIDEO_STATE_STOPPED);const t=this.Spt.getTemporalSlots();for(const i of t)i.stop();this.Spt.dispose(),this.Spt=void 0}this.Zb=NaN,this.Qx=!1,this.o5=Lr.zL,this.zx=0,this.kyi=0,this.lP=!0,void 0!==this.Eyi&&(p(this.Eyi),this.Eyi=void 0)}kn(){this.hr(),this.Vo(),this.Pyt.mn("Ynt",this.Ed),this.sc.mn(Qh.yn,this.gyi),this.A2t.removeEventListener("click",this.xyi)}constructor(t,i,e,s){super(),this.oa=void 0,this.sc=void 0,this.Pyt=void 0,this.A2t=void 0,this.H4=void 0,this.Spt=void 0,this.Cz=void 0,this.cA=void 0,this.Zb=void 0,this.Ayi=void 0,this.h5=void 0,this.o5=void 0,this.xz=void 0,this.Eyi=void 0,this.kyi=void 0,this._yi=void 0,this.pyi=void 0,this.xyi=void 0,this.vm=void 0,this.myi=void 0,this.wyi=void 0,this.yyi=void 0,this.Ed=void 0,this.gyi=void 0,this.oa=t,this.sc=i,this.Pyt=e,this.A2t=s,this.H4=Uo.rL()._s(),this.Cz=!0,this.Zb=NaN,this.Ayi=!1,this.h5=!1,this.o5=Lr.zL,this.xz=0,this.kyi=0,this._yi=t=>{switch(t.subType){case tv.freewheel.SDK.EVENT_AD_PAUSE:(function(t){if(!t)return!0;const i=t.Rwi,e=i.getPlayheadTime(),s=i.getDuration();return e>=s||Ql(s,e)})(this.Pyt.hti)||(this.lP=!0,this.So(new Si(this.zx)));break;case tv.freewheel.SDK.EVENT_AD_RESUME:this.lP=!1,this.So(new mo(this.zx));break;case tv.freewheel.SDK.EVENT_AD_VOLUME_CHANGE:if(this.Spt){const t=this.Spt.getAdVolume();0===t?this.Ayi=!0:this.cA=t,this.So(new Wi(this.zx,this.OP))}}},this.pyi=()=>{this.Qx=!1;const t=this.lP;if(this.lP=!1,t&&(this.So(new vt(this.zx)),this.So(new mo(this.zx))),this.o5=Lr.XL,this.zx=0,!this.Pyt.hti)return;const i=this.Pyt.hti.Rwi;this.Zb=i.getDuration(),this.So(new zr(this.Zb)),this.Eyi=v(()=>{if(!this.aoi)return void this.vm();this.Pyt.cyi(this.zx);const t=i.getPlayheadTime();rs(t,this.kyi,.001)||this.So(new B(t,void 0)),this.kyi=t},250),this.Spt&&this.Spt.setAdVolume(n7(this.oP,this.OP))},this.xyi=()=>{const t=this.Pyt.hti;t&&(t.V4t===Hs.L4t?this.oa.jP():this.lP||this.jP())},this.vm=()=>{p(this.Eyi),this.Eyi=void 0},this.myi=()=>{this.vm(),this.Qx=!0},this.wyi=()=>{this.Tyi("pause")},this.yyi=()=>{this.Tyi("playing")},this.Ed=t=>{t.od.V4t===Hs.BZt&&(this.lP=!1)},this.gyi=()=>{this.Spt&&this.Spt.resize(this.sc.Eu,this.sc.Iu)},this.cA=t.OP,e.wn("Ynt",this.Ed),this.sc.wn(Qh.yn,this.gyi),this.A2t.addEventListener("click",this.xyi)}};function n7(t,i){return t?0:i}r(),r();var r7=class extends Qr{get name(){return K9.swi}constructor(){super("A FreeWheel Ad Error occurred")}};r();var h7=class extends Qr{get name(){return K9.ewi}constructor(){super("A FreeWheel Reset Error Occurred")}},o7=0;function a7(){return"cue-"+ ++o7}var u7=class{Pyi(t,i,e){t.setNetwork(i.networkId),t.setServer(i.adServerUrl);const s=this.Spt;if(s.setProfile(i.profile),i.assetId&&i.assetDuration&&s.setVideoAsset(i.assetId,i.assetDuration),i.siteSectionId&&s.setSiteSection(i.siteSectionId),s.registerVideoDisplayBase(e),i.cuePoints&&i.cuePoints.length)for(const t of i.cuePoints)s.addTemporalSlot(a7(),t.adUnit,t.timeOffset);const n=i.customData;if(Mc(n)){const t=w.keys(n);for(const i of t){const t=n[i];s.addKeyValue(i,t)}}}async Iyi(){this.Spt.submitRequest(),await this.Cyi.Yy}hr(){this.Spt.removeEventListener(tv.freewheel.SDK.EVENT_REQUEST_COMPLETE,this.Ryi),this.Cyi.Ky(new h7)}constructor(t,i,e,s){this.Spt=void 0,this.Cyi=void 0,this.Ryi=void 0,this.Spt=i,this.Ryi=t=>{this.Spt.removeEventListener(tv.freewheel.SDK.EVENT_REQUEST_COMPLETE,this.Ryi),t.success?this.Cyi.Qy(void 0):this.Cyi.Ky(new r7)},this.Pyi(t,e,s),i.addEventListener(tv.freewheel.SDK.EVENT_REQUEST_COMPLETE,this.Ryi),this.Cyi=new Ga}};r(),r();var c7=class{Dyi(){this.Bwi.removeEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,this.jwi),this.Bwi.removeEventListener(tv.freewheel.SDK.EVENT_ERROR,this.jwi)}get Nyi(){return this.Jg.Yy}gWt(){this.Dyi(),this.Jg.Ky(new h7)}constructor(t){this.Bwi=void 0,this.Jg=void 0,this.jwi=void 0,this.i7t=void 0,this.Bwi=t,this.jwi=t=>{this.Dyi(),this.Jg.Qy(void 0)},this.i7t=t=>{this.Dyi(),this.Jg.Ky(new r7)},this.Jg=new Ga,t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,this.jwi),t.addEventListener(tv.freewheel.SDK.EVENT_ERROR,this.i7t)}},d7=class{lO(t){this.Bwi=t}Swi(){return this.Byi(this.Myi.Fwi)}gwi(){this.Byi(this.Myi.Wwi)}async Byi(t){if(this.Bwi)for(;t.length>0;){this.Lyi=new c7(this.Bwi);const i=this.Lyi.Nyi,e=this.Myi.Fnt;e&&e.V4t===Hs.L4t&&e.Ewi.stop();t.shift().Ewi.play();try{await i}finally{this.Lyi=void 0}}}hr(){this.Lyi&&(this.Lyi.gWt(),this.Lyi=void 0),this.tMt=0}kn(){this.oa.mn(d.py,this.Oyi)}constructor(t,i){this.oa=void 0,this.Myi=void 0,this.tMt=void 0,this.Lyi=void 0,this.Bwi=void 0,this.Oyi=void 0,this.oa=t,this.Myi=i,this.tMt=0,this.Oyi=()=>{const t=this.oa.Gx();for(const i of this.Myi.Vwi){const e=new Uo([this.tMt,t],[!0,!0]),s=i.Ewi.getTimePosition();if(e.Cr(s))switch(i.Ewi.getTimePositionClass()){case tv.freewheel.SDK.TIME_POSITION_CLASS_MIDROLL:this.Byi([i]);break;case tv.freewheel.SDK.TIME_POSITION_CLASS_OVERLAY:i.Ewi.play(),i.Ewi.setVisible(!0)}}this.tMt=t},t.wn(d.py,this.Oyi)}},l7=0,f7=class t extends tl{static createUniqueDisplayBaseId(){return"theo-freewheel-"+ ++l7}get _wi(){return 0!==this.dwi.Wwi.length}get Awi(){return 0!==this.dwi.Fwi.length}async r8t(){if(!this.c$t)throw new m("Invalid state");const t=this.Fyi,i=t.newContext();i.setParameter(tv.freewheel.SDK.PARAMETER_RENDERER_VIDEO_DISPLAY_CONTROLS_WHEN_PAUSE,!1,tv.freewheel.SDK.PARAMETER_LEVEL_GLOBAL),i.setParameter(tv.freewheel.SDK.PARAMETER_EXTENSION_CONTENT_VIDEO_ENABLED,!1,tv.freewheel.SDK.PARAMETER_LEVEL_GLOBAL);const e=new u7(t,i,this.c$t,this.Uyi),s=this.dwi.Nwi(i,e.Iyi());this.Vyi.lO(i),this.fwi.vyi(i),this.Hyi=e;try{await s}finally{this.fwi.fyi(),this.Wyi=!0}}get fwi(){return this.K9t}get dwi(){return this.qyi}get wwi(){return this.Wyi}static zyi(t,i,e){const s=h.createElement("div");return s.id=e,s.className="theo-freewheel",i.classList.add("theo-freewheel-video"),s.appendChild(i),t.appendChild(s),s}get pwi(){return this.Vyi}l4t(t){this.fwi.Tyi(t.type)}be(){this.A2t.style.display="block",this.pT.style.display="block"}we(){this.A2t.style.display="none",this.pT.style.display="none"}Cti(t){this.c$t=t}hr(){this.Wyi=!1,this.c$t=void 0,this.dwi.hr(),this.Vyi.hr(),this.Hyi&&(this.Hyi.hr(),this.Hyi=void 0),this.fwi.hr(),this.pT.src=""}kn(){this.hr(),this.K9t.kn(),this.Vyi.kn(),this.dwi.kn(),this.A2t.remove(),Ao(this.A2t)}constructor(i,e,n){super(),this.oa=void 0,this.pT=void 0,this.Fyi=void 0,this.Uyi=void 0,this.qyi=void 0,this.A2t=void 0,this.K9t=void 0,this.Hyi=void 0,this.Vyi=void 0,this.c$t=void 0,this.Wyi=void 0,this.oa=i,this.pT=e,this.Wyi=!1,this.Uyi=t.createUniqueDisplayBaseId(),this.A2t=t.zyi(i.xe,e,this.Uyi),this.Fyi=new s.tv.freewheel.SDK.AdManager,this.qyi=new e7(this.A2t,this.pT),this.Vyi=new d7(this.oa,this.dwi),this.au(this.dwi),this.K9t=new s7(i,n,this.dwi,this.A2t)}};function v7(t){if(s.tv)switch(t){case"preroll":return tv.freewheel.SDK.ADUNIT_PREROLL;case"midroll":return tv.freewheel.SDK.ADUNIT_MIDROLL;case"postroll":return tv.freewheel.SDK.ADUNIT_POSTROLL;case"overlay":return tv.freewheel.SDK.ADUNIT_OVERLAY}}function _7(t,i,e){if(void 0!==i&&S(i)||i<0||i===1/0)return NaN;switch(t){case"preroll":return 0;case"postroll":return e}return I1(i)}va.Bg.Kz(new class{get i4t(){return we._1t}Qz(t){return t.integration===FC.FREEWHEEL}e4t(t,i,e){if(!Boolean(s.tv&&s.tv.freewheel&&s.tv.freewheel.SDK&&s.tv.freewheel.SDK.AdManager))return;const n=new Dr(t.Wu,t.Ql,e,1,[at.Mk]);n.Est(t.xe);const r=n.Yq(at.Mk),h=new f7(t,r.hq,t.Wu);return new Z9(t,i,n,h,r)}uj(t){const i=ru(t);hi(i.cuePoints)||(i.cuePoints=[]);const e=[],s=t.assetDuration||0;for(const t of i.cuePoints){const i=_7(t.adUnit,t.timeOffset,s),n=v7(t.adUnit);!S(i)&&Q(n)?(t.adUnit=n,t.timeOffset=i,e.push(t)):zd.um("Invalid adUnit/timeOffset combination. Cue was removed.")}return i.cuePoints=e,i}W6(t,i,e,s){e.Cti(t,i,s)}}),r(),r(),r(),r(),r();var g7=self.theoplayerDeviceMetadata;function za(t){return t.navigator&&t.navigator.userAgent||""}r(),r(),r(),r();var p7={"Windows 10":/(Windows 10.0|Windows NT 10.0)/i,"Windows 8.1":/(Windows 8.1|Windows NT 6.3)/i,"Windows 8":/(Windows 8|Windows NT 6.2)/i,"Windows 7":/(Windows 7|Windows NT 6.1)/i,"Windows Vista":/Windows NT 6.0/i,"Windows Server 2003":/Windows NT 5.2/i,"Windows XP":/(Windows NT 5.1|Windows XP)/i,"Windows Phone":/Windows Phone/i,Android:/Android/i,Linux:/(Linux(?!.*Ubuntu)|X11)/,Ubuntu:/Ubuntu/i,iOS:/(iPhone|iPad|iPod)/i,"Mac OS X":/Mac OS X/i,"Mac OS":/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/i,"Chrome OS":/CrOS/i};function xi(t,i){const e=p7[i];return!!e&&Boolean(za(t).match(e))}function m7(t){return xi(t,"Android")}function w7(t){return xi(t,"Windows Phone")}function y7(t){return xi(t,"iOS")&&!w7(t)}function b7(t){return xi(t,"Ubuntu")}var A7=/Windows (NT|Phone) ([0-9.]+)/i,S7=/Mac.*?(OS |OS X )(\d+(([_.])\d+)?(([_.])\d+)?)/i,T7={"Windows 10":A7,"Windows 8.1":A7,"Windows 8":A7,"Windows 7":A7,"Windows Vista":A7,"Windows Server 2003":A7,"Windows XP":A7,"Windows Phone":/Windows Phone ([0-9.]+)/i,Android:/Android (\d+(([_.])\d+)?(([_.])\d+)?)/i,Linux:void 0,Ubuntu:void 0,iOS:/(iPad|iPhone|iPod).*?(OS |os |OS_)(\d+(([_.])\d+)?(([_.])\d+)?)/i,"Mac OS X":S7,"Mac OS":S7,"Chrome OS":void 0};function k7(t,i){const e=T7[i];return e?za(t).match(e):null}function E7(t){return t.split(/[_.]/).map(t=>x(t,10))}function x7(t){if(function(t){return Boolean(za(t).match(/Windows/i))}(t)){if(function(t){return xi(t,"Windows 10")}(t))return"Windows 10";if(w7(t))return"Windows Phone";if(function(t){return xi(t,"Windows 8.1")}(t))return"Windows 8.1";if(function(t){return xi(t,"Windows 8")}(t))return"Windows 8";if(function(t){return xi(t,"Windows 7")}(t))return"Windows 7";if(function(t){return xi(t,"Windows Vista")}(t))return"Windows Vista";if(function(t){return xi(t,"Windows Server 2003")}(t))return"Windows Server 2003";if(function(t){return xi(t,"Windows XP")}(t))return"Windows XP"}else{if(m7(t))return"Android";if(y7(t))return"iOS";if(function(t){return xi(t,"Mac OS X")}(t))return"Mac OS X";if(function(t){return xi(t,"Mac OS")}(t))return"Mac OS";if(b7(t))return"Ubuntu";if(function(t){return xi(t,"Chrome OS")}(t))return"Chrome OS";if(function(t){return xi(t,"Linux")&&!b7(t)}(t))return"Linux"}}function P7(t,i){const e=function(t){const i=k7(t,"Windows 10");return i&&i.length>2?E7(i[2]):void 0}(t),s=function(t){const i=k7(t,"Mac OS X");return i&&i.length>2?E7(i[2]):void 0}(t),n=function(t){const i=k7(t,"Android");return i&&i.length>1?E7(i[1]):void 0}(t),r=function(t){const i=k7(t,"iOS");return i&&i.length>3?E7(i[3]):void 0}(t),h=function(t){const i=k7(t,"Chrome OS");return i&&i.length>0?E7(i[0]):void 0}(t);return e?e.length>i?e[i]:void 0:s?s.length>i?s[i]:void 0:n?n.length>i?n[i]:void 0:r?r.length>i?r[i]:void 0:h&&h.length>i?h[i]:void 0}function I7(t){const i=function(t){return P7(t,0)}(t),e=function(t){return P7(t,1)}(t),s=function(t){return P7(t,2)}(t);if(void 0!==i)return void 0===e?""+i:void 0===s?i+"."+e:i+"."+e+"."+s}var C7={Chrome:/Chrome/i,"Chrome Mobile":void 0,"Chrome iOS":/CriOS/i,Chromium:/Chromium/i,HeadlessChrome:/HeadlessChrome/i,Firefox:/Firefox/i,Seamonkey:/Seamonkey/i,"Firefox iOS":/FxiOS/i,Safari:/Safari/i,Edge:/Edge\/\d+/i,"Edge Chromium":/Edg\/\d+/i,IE:/Trident/i,Opera:/Opera|OPR/i,Vivaldi:/Vivaldi/i,"Android Browser":void 0};function R7(t,i){const e=C7[i];return!!e&&Boolean(za(t).match(e))}function D7(t){return Boolean(za(t).match(/Mobi/i))}function N7(t){return Boolean(t.chrome&&t.navigator&&t.navigator.vendor&&/google/i.test(t.navigator.vendor))||B7(t)}function B7(t){return R7(t,"Chrome iOS")}function M7(t){return R7(t,"Firefox")&&!O7(t)}function L7(t){return R7(t,"Firefox Mobile")&&!O7(t)&&D7(t)}function O7(t){return R7(t,"Seamonkey")}function F7(t){return R7(t,"Firefox iOS")&&!O7(t)}function U7(t){return R7(t,"Safari")&&!R7(t,"Chrome")&&!zs.Wv}function V7(t){return Boolean(Q7(t))}function H7(t){return R7(t,"Edge")}function W7(t){return R7(t,"Edge Chromium")}function q7(t){return R7(t,"IE")}function z7(t){return R7(t,"Vivaldi")}var G7=/chrome\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/i,X7={Chrome:G7,"Chrome Mobile":G7,"Chrome iOS":/CriOS\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/i,Chromium:G7,HeadlessChrome:G7,Firefox:/Firefox\/([0-9.]+)/i,"Firefox iOS":/FxiOS\/([0-9.]+)/i,Safari:/(Version)\/((\d+)\.(\d+)(?:\.(\d+))?).*Safari/,"Safari Mobile":void 0,Edge:/Edge\/(\d+)/i,"Edge Chromium":/Edg\/(\d+)/i,"Edge Mobile":void 0,IE:/(MSIE |Trident.*?rv:)(\d+)/i,Opera:/(OPR\/(\d+\.\d+))|(Opera(?=.*Version\/((\d+)\.(\d+))))/i,"Opera Mobile":void 0,Vivaldi:/Vivaldi\/((\d+)\.(\d+)\.(\d+)(?:\.(\d+))?)/i,"Android Browser":void 0};function j7(t,i){const e=X7[i];return e?za(t).match(e):null}function Q7(t){return j7(t,"Opera")}function K7(t){const i=function(t){return j7(t,"Firefox")}(t);return i?C(i[1]):0}function Y7(t){const i=function(t){return j7(t,"Firefox iOS")}(t);return i?C(i[1].split(".")[0]):0}function J7(t){const i=function(t){return j7(t,"Safari")}(t);return i?C(i[2].split(".")[0]):0}function Z7(t){const i=function(t){return j7(t,"Edge")}(t);return i?C(i[1]):0}function $7(t){const i=function(t){return j7(t,"Edge Chromium")}(t);return i?C(i[1]):0}function ttt(t){const i=function(t){return j7(t,"IE")}(t);return i?C(i[2]):0}function itt(t){const i=function(t){return j7(t,"Vivaldi")}(t);return i?C(i[1]):0}function ett(t){if(m7(t))return N7(t)?"Chrome Mobile":M7(t)||L7(t)?"Firefox Mobile":H7(t)?"Edge Mobile":V7(t)?"Opera Mobile":"Android Browser";if(y7(t)){if(N7(t)||B7(t))return"Chrome iOS";if(M7(t)||F7(t))return"Firefox iOS";if(H7(t))return"Edge Mobile";if(U7(t)||function(t){return U7(t)&&D7(t)}(t))return"Safari Mobile";if(V7(t))return"Opera Mobile"}return function(t){return R7(t,"Chromium")}(t)?"Chromium":function(t){return R7(t,"HeadlessChrome")}(t)?"HeadlessChrome":N7(t)?"Chrome":M7(t)?"Firefox":U7(t)?"Safari":H7(t)?"Edge":W7(t)?"Edge Chromium":q7(t)?"IE":V7(t)?"Opera":z7(t)?"Vivaldi":void 0}function stt(t){return z7(t)?itt(t):B7(t)?Number(function(t){const i=X7["Chrome iOS"];return i&&i.exec(za(t))||[]}(t)[1]):N7(t)?Number(function(t){const i=X7.Chrome;return i&&i.exec(za(t))||[]}(t)[1]):M7(t)||L7(t)?K7(t):F7(t)?Y7(t):U7(t)?J7(t):H7(t)?Z7(t):W7(t)?$7(t):q7(t)?ttt(t):V7(t)?function(t){const i=Q7(t);return i&&i[0].indexOf("Opera")>-1?C(i[5]):i?C(i[2].split(".")[0]):0}(t):void 0}var ntt=function(t){return t.Gyi="pc",t.Xyi="console",t.jyi="settop",t.Qyi="mobile",t.Kyi="tablet",t.Yyi="smarttv",t.Jyi="searchbot",t}({});function rtt(t){const i=za(t);return i.match(/CrKey|Roku|AFTS|AppleTV|Nexus Player/i)?"settop":i.match(/Xbox|Playstation|Wii|Nintendo/i)?"console":/(iPad|Tablet|(Android(?!.*Mobi))|(Windows(?!.*Phone)(.*Touch))|Kindle|Playbook|Silk|(Puffin(?!.*(IP|AP|WP))))/i.test(i)?"tablet":/Mobi/.test(i)?"mobile":i.match(/GoogleTV|SmartTV|SMART-TV|Internet TV|NetCast|NETTV|boxee|Kylo|DLNADOC|hbbtv|CE-HTML/i)?"smarttv":i.match(/(nuhk|Googlebot|bingbot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/i)?"searchbot":function(t){return Boolean(ett(t))}(t)?"pc":void 0}var htt=class{aj(t){this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_ID,t.deviceID||function(){const t=Ub.zy("deviceId");if(t)return t;const i=JC();return Ub.Gy("deviceId",i),i}()),this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.PLAYER,"THEOplayer"),this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.PLAYER_VERSION,"10.3.0"),this.Zyi(t),this.$yi(),this.tbi(t),this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.EMPCLIENT_INTEGRATION_VERSION,"3.0"),this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.EMPCLIENT_INTEGRATION_BUILDDATE,"2023-04-17 12:00:00"),t.application&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.APPLICATION,t.application),t.applicationVersion&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.APPLICATION_VERSION,t.applicationVersion),t.userAccountID&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.USER_ACCOUNT_ID,t.userAccountID);const i=t.connectionType;i?this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DATA_CONNECTION_TYPE,i):(this.ibi(),od.connection&&od.connection.addEventListener&&od.connection.addEventListener("change",this.ibi))}Zyi(t){this.ebi(t);const i=t.deviceManufacturer||g7&&g7.manufacturer;i&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_MANUFACTURER,i);const e=t.deviceModel||g7&&g7.model;e&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_MODEL,e)}ebi(t){const i=t.deviceType||function(){const t=rtt(self);switch(t){case ntt.Xyi:return"game-console";case ntt.Yyi:return"tv";case ntt.jyi:return"media-streamer";default:return t}}();i&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_TYPE,i)}$yi(){const t=ett(self);t&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_BROWSER,t);const i=stt(self);void 0!==i&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_BROWSER_VERSION,i.toString())}tbi(t){const i=t.deviceOs||x7(self);i&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_OS,i);const e=t.deviceOsVersion||I7(self);e&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_OS_VERSION,e.toString())}kn(){od.connection&&od.connection.removeEventListener&&od.connection.removeEventListener("change",this.ibi)}constructor(t,i){this.empClient=void 0,this.agama=void 0,this.ibi=void 0,this.empClient=t,this.agama=i,this.ibi=()=>{const t=zd.Rx;switch(t){case"wifi":this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DATA_CONNECTION_TYPE,"wlan");break;case"ethernet":this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DATA_CONNECTION_TYPE,t);break;case"cellular":const i=function(t){switch(t){case"3g":return"mobile/3G";case"4g":return"mobile/4G";default:return}}(zd.Cx);i&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DATA_CONNECTION_TYPE,i)}}}};Na(function(t){return i=>class extends i{Xx(t,i){this.sbi&&this.sbi.$G(),super.Xx(t)}kn(){this.sbi&&this.sbi.kn(),super.kn()}constructor(i,e){super(i,e),this.WG=new t,this.sbi=void 0,this.sbi=new $C(this,this.WG,e)}}}(class extends WC{GP(t){this.nbi=t,this.rbi&&(this.WG=function(t,i){const e=function(t,i){switch(i){case"info":return t.LogLevel.INFO;case"debug":return t.LogLevel.DEBUG;case"warning":return t.LogLevel.WARNING;case"error":return t.LogLevel.ERROR;default:return t.LogLevel.FATAL}}(i,t.logLevel);i.setLogLevel(e);const s=new i.EMPClient(t.config);return function(t,i){return t.setExternalConfig(i.config),t}(s,t)}(t,this.rbi),this.WG&&(this.hbi=new htt(this.WG,this.rbi),this.ko=!0))}hj(){return this.rbi||console.warn("Please load the Agama Library (empclient.min.js) in order to use the integration"),Boolean(this.rbi)}nj(){return this.ko}OX(t,i){if(this.WG&&this.rbi)switch(t){case ba.oG:this.WG.setMeasurement(this.rbi.Measurement.BUFFER_LENGTH,i);break;case ba.aG:this.WG.setMeasurement(this.rbi.Measurement.BYTES_RECEIVED,i);break;case ba.cG:this.WG.setMeasurement(this.rbi.Measurement.SEGMENT_PROFILE_BITRATE,i);break;case ba.dG:this.WG.setMeasurement(this.rbi.Measurement.VIDEO_PROFILE_BITRATE,i);break;case ba.uG:this.WG.setMeasurement(this.rbi.Measurement.SEGMENT_READ_BITRATE,i);break;case ba.eG:this.WG.setMeasurement(this.rbi.Measurement.HTTP_REQUEST_STATUS_CODE_1XX,i);break;case ba.sG:this.WG.setMeasurement(this.rbi.Measurement.HTTP_REQUEST_STATUS_CODE_2XX,i);break;case ba.nG:this.WG.setMeasurement(this.rbi.Measurement.HTTP_REQUEST_STATUS_CODE_3XX,i);break;case ba.rG:this.WG.setMeasurement(this.rbi.Measurement.HTTP_REQUEST_STATUS_CODE_4XX,i);break;case ba.hG:this.WG.setMeasurement(this.rbi.Measurement.HTTP_REQUEST_STATUS_CODE_5XX,i);break;case ba.fG:this.WG.setMeasurement(this.rbi.Measurement.PLAYBACK_POSITION,i);break;case ba.vG:this.WG.setMeasurement(this.rbi.Measurement.NUMBER_OF_FRAMES_DECODED,i);break;case ba.lG:this.WG.setMeasurement(this.rbi.Measurement.NUMBER_OF_FRAMES_DROPPED,i)}}mX(t,i){if(this.WG&&this.rbi)switch(t){case ct.wG:this.WG.setSessionMetadata(this.rbi.SessionMetadata.ASSET_DURATION,i);break;case ct.mG:this.WG.setSessionMetadata(this.rbi.SessionMetadata.MANIFEST_URI,i);break;case ct.yG:this.WG.setSessionMetadata(this.rbi.SessionMetadata.NUMBER_OF_CONTENT_PROFILES,i);break;case ct.SG:this.WG.setSessionMetadata(this.rbi.SessionMetadata.SERVICE_NAME,i);break;case ct.bG:this.WG.setSessionMetadata(this.rbi.SessionMetadata.CDN,i);break;case ct.AG:this.WG.setSessionMetadata(this.rbi.SessionMetadata.CONTENT_TITLE,i);break;case ct.TG:this.WG.setSessionMetadata(this.rbi.SessionMetadata.CONTENT_TYPE,i);break;case ct.kG:this.WG.setSessionMetadata(this.rbi.SessionMetadata.CONTENT_DESCRIPTION,i)}}aj(){this.hbi&&this.nbi&&this.hbi.aj(this.nbi)}rj(t,i){this.rbi&&this.WG&&(this.qX(),function(t,i,e,s){const n=ZC(t,e,s);i.abrSession(n,t.ViewState.INITIAL_BUFFERING)}(this.rbi,this.WG,t,i),this.obi=!0)}kn(){this.hbi&&this.hbi.kn(),this.abi(UC.EG),this.WG=void 0}nX(t){this.ubi(t)}oX(t,i){this.WG&&this.WG.event(t.code,i)}qX(){this.WG&&this.obi&&(this.WG.exitSession(),this.obi=!1)}abi(t){if(this.WG&&this.rbi&&(this.qX(),t===UC.EG))this.WG.shutdown(this.rbi.ShutdownType.NORMAL_SHUTDOWN)}rX(t,i,e){this.ubi(t,i,e)}ubi(t,i,e){if(this.WG&&this.rbi)switch(t){case ri.PM:this.cbi(this.rbi.ViewState.PLAYING,i,e);break;case ri.$z:this.cbi(this.rbi.ViewState.FAILED,i,e);break;case ri.tG:this.cbi(this.rbi.ViewState.INITIAL_BUFFERING,i,e);break;case ri.Yz:this.cbi(this.rbi.ViewState.PAUSED,i,e);break;case ri.Jz:this.cbi(this.rbi.ViewState.SEEK,i,e);break;case ri.Zz:this.cbi(this.rbi.ViewState.STALLED,i,e);break;case ri.iG:this.cbi(this.rbi.ViewState.NO_ACCESS,i,e)}}cbi(t,i,e){if(this.WG)if(i){const s=function(t){return t||""}(e);this.WG.viewStateExtended(t,i.code,s)}else this.WG.viewStateChanged(t)}constructor(){super(),this.rbi=void 0,this.WG=void 0,this.ko=!1,this.obi=!1,this.nbi=void 0,this.hbi=void 0,this.rbi=s.Agama}}),Oa.Snt),r(),r(),r(),r(),r();var ott=function(t){return t.PLAY_ALL="play-all",t.PLAY_NONE="play-none",t.PLAY_LAST="play-last",t}({});r();var kh=function(t){return t.VOD="vod",t.LIVE="live",t}({}),att=class{get Ca(){return this.dbi.Ca}get lt(){return this.nq}get Jx(){return this.rq}lbi(t){this.nq=ar(t),this.rq=t,this.oa.So(new el(t))}Ta(t){this.fbi.resetSource(),this.vbi.jy(),this._bi=!1,this.oa.gbi(t)}async drt(t,i){if(this.pbi.hr(),this._bi=!1,!t||!function(t){return t.sources.some(t=>t.integration===uk.UPLYNK)}(t))return await this.oa.mbi(t,i);try{this.wbi=await this.ybi.wpi(t),await this.oa.mbi(this.wbi,i)}catch(t){this.lbi(new as(me.MANIFEST_LOAD_ERROR,t.message,t))}}kn(){this.T9.Zg(),this.bbi.Zg(),this.oa.mn(d.Pw,this.Abi),this.oa.mn(d.uo,this.dci),this.oa.mn(d.py,this.Cci),this.oa.mn(d.Nw,this.kgi),this.oa.mn(Jr.kM,this.Pd);for(const t of this.fbi.K0t.ec)t.mn("Sbi",this.Tbi),t.mn("Ynt",this.hci),t.mn("Knt",this.kbi);this.fbi.K0t.mn("Xnt",this.Ebi),this.fbi.K0t.mn("Gnt",this.xbi),this.fbi.destroy(),this.T2t&&(this.T2t.zg(),this.T2t=void 0),this._bi=!1}async fetchAssetInfo(t){if(t&&t.integrationData)try{const i=await this.Pbi.KSt(t.integrationData.source.prefix,t.integrationData.source.id,this.bbi.Yg,t.integrationData.preplayResponse.sid);this.dbi.Ibi(i),this.vbi.Cbi(i,this.fbi.K0t.ec)}catch(t){0}}Rbi(t){this.fbi.Dbi(t),this.fbi.Lnt.forEach(i=>i.Nbi(t)),this.fbi.Bbi(this.oa.EP()),this.S2t()}Xx(t){if(this.fbi.Fnt)return;this.T9.Zg(),this.T9=new Zc;Wr(Cu(this.Xri(t,this.T9.Yg),this.T9))}async Xri(t,i){if(fr(i),t<this.oa.Gx())return void this.Mbi(t);let e=[];switch(this.fbi.Lbi){case ott.PLAY_ALL:e=this.fbi.Obi(this.oa.Gx(),t),await this.Fbi(t,e,i);break;case ott.PLAY_LAST:const s=this.fbi.Obi(this.oa.Gx(),t).pop();e=s?[s]:[],await this.Fbi(t,e,i);break;case ott.PLAY_NONE:this.Ubi(t)}}Mbi(t){const i=hh(this.fbi.K0t.ec,i=>i.Wat.Cr(t));i?this.oa.Vbi(i.CO):this.oa.Vbi(t)}Ubi(t){const i=this.fbi.Obi(this.oa.Gx(),t).pop();i&&i.Wat.Cr(t)?this.oa.Vbi(i.RO):this.oa.Vbi(t)}async Fbi(t,i,e){for(const t of i)await this.Hbi(t,e);const s=hf(i,-1);s&&s.Wat.Cr(t)?this.oa.Gx()<t&&this.oa.Vbi(s.RO):this.oa.Vbi(t)}async Hbi(t,i){t.mn("Sbi",this.Tbi);const e=Promise.race([t.ww("Knt",i),t.ww("Sbi",i)]);this.Rbi(this.oa.Gx()),t.ro||this.oa.Vbi(t.CO),await e,t.wn("Sbi",this.Tbi)}S2t(){const t=hh(this.fbi.Lnt,t=>t.Wbi.length>0);if(t){const i=t.Wbi[0];this.T2t||(this.T2t=new A2(this.oa.xe),this.T2t.wn("clickstart",this.qbi)),this.T2t.O1t=i}else this.T2t&&(this.T2t.zg(),this.T2t=void 0)}constructor(t,i,e,s,n,r,h){this.oa=void 0,this.pbi=void 0,this.ybi=void 0,this.fbi=void 0,this.dbi=void 0,this.Pbi=void 0,this.vbi=void 0,this.wbi=void 0,this.nq=void 0,this.rq=void 0,this.T9=void 0,this.bbi=void 0,this.zbi=void 0,this._bi=void 0,this.T2t=void 0,this.Abi=void 0,this.dci=void 0,this.Cci=void 0,this.kgi=void 0,this.Pd=void 0,this.Tbi=void 0,this.hci=void 0,this.kbi=void 0,this.Ebi=void 0,this.xbi=void 0,this.qbi=void 0,this.oa=t,this.pbi=i,this.ybi=e,this.fbi=s,this.dbi=n,this.Pbi=r,this.vbi=h,this.nq=void 0,this.rq=void 0,this.T9=new Zc,this.bbi=new Zc,this.zbi=void 0,this._bi=!1,this.T2t=void 0,this.Abi=t=>{const i=t.currentSource;if(!i||!i.integrationData)return;const{preplayResponse:e,source:s}=i.integrationData;this.dbi.Gbi(e),e&&e.type===kh.VOD&&e.ads&&this.fbi.Cbi(e.ads),this.pbi.Xbi=i.integrationData,s.assetInfo&&Wr(this.fetchAssetInfo(i))},this.dci=()=>{this._bi=!0},this.Cci=()=>{this._bi&&this.Rbi(this.oa.Gx())},this.kgi=()=>{this._bi&&(this.Rbi(1/0),this._bi=!1)},this.Pd=()=>{Wr(this.pbi.Tn())},this.Tbi=t=>{this.T9.Zg(),this.T9=new Zc;Wr(Cu(this.Xri(t.od.RO,this.T9.Yg),this.T9))},this.hci=()=>{1!==this.oa.vP&&(this.zbi=this.oa.vP,this.oa.vP=1)},this.kbi=()=>{void 0!==this.zbi&&(this.oa.vP=this.zbi,this.zbi=void 0)},this.Ebi=t=>{t.od.wn("Sbi",this.Tbi),t.od.wn("Ynt",this.hci),t.od.wn("Knt",this.kbi)},this.xbi=t=>{t.od.mn("Sbi",this.Tbi),t.od.mn("Ynt",this.hci),t.od.mn("Knt",this.kbi)},this.qbi=()=>{this.oa.jP()},this.oa.wn(d.Pw,this.Abi),this.oa.wn(d.uo,this.dci),this.oa.wn(d.py,this.Cci),this.oa.wn(d.Nw,this.kgi),this.oa.wn(Jr.kM,this.Pd),this.fbi.K0t.wn("Xnt",this.Ebi),this.fbi.K0t.wn("Gnt",this.xbi)}};r(),r();var utt=Zh({breaksIndex:an,adsIndex:an,startTime:an,endTime:an}),ctt=Zh({index:an,timeOffset:an}),dtt=Zh({duration:an,apiFramework:Dh(Ye,bI),creative:Ye,mimeType:Ye,width:an,height:an,companions:_h(function(t){return new RI(t)}(()=>dtt)),extensions:Dh(Pa,_h(yI)),fw_parameters:Dh(Pa,CI(Ye)),events:CI(_h(Ye))}),ltt=Zh({type:EI(["linear","nonlinear"]),position:EI(["preroll","midroll","postroll","pause","overlay",""]),timeOffset:an,duration:an,ads:_h(dtt),events:CI(_h(Ye))}),ftt=Zh({breaks:_h(ltt),breakOffsets:Dh(Pa,_h(ctt)),placeholderOffsets:Dh(Pa,_h(utt))}),vtt=Zh({required:Dh(Pa,wI),fairplayCertificateURL:Dh(Pa,Ye),widevineLicenseURL:Dh(Pa,Ye),playreadyLicenseURL:Dh(Pa,Ye)}),_tt={type:EI(TI(kh)),playURL:Ye,prefix:Ye,sid:Ye,drm:Dh(Pa,vtt)},gtt=Zh(Y({},_tt,{type:EI([kh.VOD]),ads:ftt,interstitialURL:Dh(Ye,bI,Pa)})),ptt=Dh(gtt,Zh(Y({},_tt,{type:EI([kh.LIVE])})));r();var mtt=Ye,wtt=Zh({userId:Ye,externalId:Dh(Ye,_h(Ye))}),ytt=class{async KSt(t){try{return this.jbi(t)}catch(t){throw t}}async jbi(t){const i=await async function(t){const i=t.prefix,e=btt[t.assetType],s=function(t){if(_h(mtt).jH(t))return 1===t.length?t[0]:t.join(",")+"/multiple";if(mtt.jH(t))return t;if(wtt.jH(t)&&hi(t.externalId))return 1===t.externalId.length?"ext/"+t.userId+"/"+t.externalId[0]:"ext/"+t.userId+"/"+t.externalId.join(",")+"/multiple";if(wtt.jH(t))return"ext/"+t.userId+"/"+t.externalId;throw new g("Invalid asset id")}(t.id),n=await async function(t){if(t&&await zd.wm())return{rmt:"fps",manifest:"m3u8"};if(t&&await zd.Am())return{rmt:"wv",manifest:"mpd"};if(t&&await zd.ym())return{rmt:"pr",manifest:"mpd"};return{}}(t.contentProtected),r=function(t,i){const e=Att(t,i);return e?{"ad.cping":"1","ad.pingf":String(e)}:{}}(t.assetType,t.ping);let h={};hi(t.preplayParameters)?t.preplayParameters.forEach(t=>{h[t[0]]=t[1]}):h=t.preplayParameters;const o=i+"/preplay/"+e+s+".json";return bA(o,Y({v:"2"},h,n,r,h))}(t),e=this.aV.vk({Hk:Qe.GET,Yu:i,fk:Bi.BT}),s=await e,n=Y({},await s.lk(),{type:t.assetType===sR.ASSET?kh.VOD:kh.LIVE});return ptt.jH(n)||ptt.KH(n,"PreplayResponse"),n}constructor(t){this.aV=void 0,this.aV=t}},btt={[sR.ASSET]:"",[sR.CHANNEL]:"channel/",[sR.EVENT]:"event/"};function Att(t,i){const e=t!==sR.ASSET;return(!e&&i.adImpressions?1:0)+(!e&&i.freeWheelVideoViews?2:0)+(e&&i.linearAdData?4:0)}r(),r();var Stt=Zh({ad_id:Ye,apiFramework:Dh(bI,Ye),companions:_h(yI),creative:Ye,duration:an,mimeType:Ye,height:an,width:an,extensions:Dh(Pa,_h(yI)),fw_parameters:Dh(Pa,CI(Ye))}),Ttt=Zh({breakId:Ye,ads:_h(Stt),type:EI(["linear","nonlinear"]),position:EI(["preroll","midroll","postroll","pause","overlay",""]),timeOffset:an,duration:an,height:Dh(Pa,an),width:Dh(Pa,an),events:CI(_h(Ye))}),ktt=Zh({breaks:_h(Ttt)}),Ett=Zh({next_time:an,ads:Dh(Pa,ktt),extensions:Dh(Pa,_h(yI)),error:Dh(Pa,Ye),currentBreakEnd:Dh(Pa,an)}),xtt=function(t){return t.tTt="start",t.Jz="seek",t}({}),Ptt=class{async KSt(t,i){try{return this.jbi(t,i)}catch(t){throw t}}async jbi(t,i){const e=function(t){const i={v:"3",pt:String(t.currentTime)};(function(t){return void 0!==t.seekTime})(t)&&t.hasFreeWheelVideoViews&&(i.ft=String(t.seekTime));t.event&&(i.ev=t.event);return bA(t.zonePrefix+"/session/ping/"+t.sessionId+".json",Y({},i))}(t),s=this.aV.vk({Hk:Qe.GET,Yu:e,fk:Bi.BT,Yg:i}),n=await s,r=await n.lk();return Ett.jH(r)||Ett.KH(r,"PingResponse"),r}constructor(t){this.aV=void 0,this.aV=t}};r(),r();var Itt=class extends Oi{get uE(){return this.cE}xa(){return new Ctt(this.cE)}constructor(t){super("Qbi"),this.cE=void 0,this.cE=t}},Ctt=class extends gp{constructor(t){super("pingresponse"),this.response=void 0,this.response=t}};r();var Rtt=class extends Oi{get lt(){return this.nq}xa(){return new Dtt(this.nq)}constructor(t){super("Kbi"),this.nq=void 0,this.nq=t}},Dtt=class extends gp{constructor(t){super("pingerror"),this.error=void 0,this.error=t}},Ntt=class extends Ne{set Xbi(t){this.Ybi=t}get Jbi(){return this.Zbi}async Tn(){const t=this.Ybi;if(!t)return;0!==Att(t.source.assetType,t.source.ping)&&(this.Zbi=this.oa.EP().start(0),await this.$bi(xtt.tTt),this.oa.wn("timeupdate",this.tAi),this.oa.wn("seeking",this.iAi))}async $bi(t,i){const e=this.Ybi.preplayResponse,s={};if(S(this.Zbi))return void 0;if(it(this.eAi)&&Ql(this.eAi,this.oa.Gx()-this.Zbi))return;void 0!==i&&(s.seekTime=i),void 0!==t&&(s.event=t);let n,r=this.oa.Gx()-this.Zbi;t===xtt.tTt?r=0:t!==xtt.Jz&&this.sAi&&(r=_.min(r,this.sAi)),this.eAi=r;try{var h;const t=await this.nAi.KSt(Y({zonePrefix:e.prefix,sessionId:e.sid,currentTime:r,hasFreeWheelVideoViews:null==(h=this.Ybi)?void 0:h.source.ping.freeWheelVideoViews},s),this.hT.Yg);this.So(new Itt(t)),this.sAi=-1!==t.next_time?t.next_time:void 0,n=t.error}catch(t){Ce(t)||(n=t.message)}finally{n&&this.So(new Rtt(n))}}hr(){this.sAi=void 0,this.Ybi=void 0,this.Zbi=NaN,this.rAi=!1,this.hAi=NaN,this.eAi=void 0,this.oa.mn("seeking",this.iAi),this.oa.mn("timeupdate",this.tAi),this.oAi()}oAi(){this.hT.Zg(),this.hT=new Zc}kn(){this.hr()}constructor(t,i){super(),this.nAi=void 0,this.oa=void 0,this.Ybi=void 0,this.Zbi=void 0,this.sAi=void 0,this.rAi=void 0,this.hAi=void 0,this.hT=void 0,this.eAi=void 0,this.tAi=void 0,this.iAi=void 0,this.nAi=t,this.oa=i,this.Zbi=NaN,this.sAi=void 0,this.rAi=!1,this.hAi=NaN,this.hT=new Zc,this.eAi=void 0,this.tAi=async()=>{const t=this.oa.Gx();if(this.hAi=t,this.rAi||vc(this.sAi)||S(this.Zbi))return;this.Zbi+this.sAi<=t&&(this.rAi=!0,await this.$bi(),this.rAi=!1)},this.iAi=()=>{if(this.oa.Gx()===this.Zbi)return;this.rAi&&this.oAi(),this.hAi=this.oa.Gx();const t=this.hAi-(this.Zbi||0);S(t)?Wr(this.$bi(xtt.Jz,0)):Wr(this.$bi(xtt.Jz,t))}}};r();var Btt=class{async wpi(t){const i=[];for(const e of t.sources)if(mk(e))try{const s=Ltt({source:e,preplayResponse:await this.aAi.KSt(e)},t,this.GJ);s.src&&(s.src=bA(s.src,e.playbackUrlParameters)),i.push(s)}catch(t){0}else i.push(e);if(0!==t.sources.length&&0===i.length)throw new m("Fatal: unable to play UplynkSources.");return Y({},t,{sources:i})}constructor(t,i){this.aAi=void 0,this.GJ=void 0,this.aAi=t,this.GJ=i}};function Mtt(t){return!!t.sources&&(hi(t.sources)?t.sources.some(mk):mk(t.sources))}function Ltt(t,i,e){const s=t.preplayResponse;let n;t.source.contentProtected&&s.drm&&(n={integration:"uplynk"},s.drm.fairplayCertificateURL&&(n.fairplay={certificateURL:s.drm.fairplayCertificateURL}),s.drm.widevineLicenseURL&&(n.widevine={licenseAcquisitionURL:s.drm.widevineLicenseURL}),s.drm.playreadyLicenseURL&&(n.playready={licenseAcquisitionURL:s.drm.playreadyLicenseURL}));const r=ue({src:s.playURL,contentProtection:n,useNativePlayback:t.source.useNativePlayback,hls:t.source.hls,dash:t.source.dash,seamlessSwitchStrategy:t.source.seamlessSwitchStrategy},i,e);return r.integrationData=t,r}r(),r(),r();var Ott=class extends Oi{xa(){return new Ftt(this.od.Ca)}constructor(t,i){super("Ynt"),this.od=void 0,this.YF=void 0,this.od=t,this.YF=i}},Ftt=class extends gp{constructor(t){super("adbreakbegin"),this.adBreak=void 0,this.adBreak=t}};r();var Utt=class extends Oi{xa(){return new Vtt(this.od.Ca)}constructor(t,i){super("Knt"),this.od=void 0,this.YF=void 0,this.od=t,this.YF=i}},Vtt=class extends gp{constructor(t){super("adbreakend"),this.adBreak=void 0,this.adBreak=t}};r();var Htt=class extends Oi{xa(){return new Wtt(this.od.Ca)}constructor(t){super("Sbi"),this.od=void 0,this.od=t}},Wtt=class extends gp{constructor(t){super("adbreakskip"),this.adBreak=void 0,this.adBreak=t}};r(),r();var qtt=class extends Oi{xa(){return new ztt(this.od.Ca)}constructor(t){super("$4t"),this.od=void 0,this.od=t}},ztt=class extends gp{constructor(t){super("updateadbreak"),this.adBreak=void 0,this.adBreak=t}},Gtt=class extends je{get Ca(){return this.hu||(this.hu=function(t){let i;const e={get startTime(){return t.CO},get endTime(){return t.RO},get duration(){return t.ct},get ads(){return t.Jc.Ca},get skipOffset(){return t.kJt},set skipOffset(i){t.kJt=i},addEventListener(t,e){i.wn(t,e)},removeEventListener(t,e){i.mn(t,e)}};return i=new le(t,e),e}(this)),this.hu}get CO(){return this.HO}get RO(){return this.Zb?this.HO+this.Zb:void 0}uAi(t){this.Zb=t-this.CO;for(const i of this.Jc.ec)i.CO>t&&this.Jc.pS(i);this.So(new qtt(this))}get ct(){return this.Zb}get Wat(){const t=this.RO;return it(t)?new Uo([this.CO,t]):Uo.rL()}get Jc(){return this.qc}get cAi(){return this.dAi}get ro(){return this.ho}get kJt(){return this.emi?-1:this.EJt}set kJt(t){this.emi||(this.EJt=t)}fct(t){return t>=this.CO&&(vc(this.ct)||t<=this.CO+this.ct)}lAi(t){return-1!==this.kJt&&(!!it(this.RO)&&t-this.CO>=this.kJt)}uD(){this.qc.ec.forEach(t=>t.uD()),this.So(new Htt(this))}fAi(t){const i=it(this.RO)&&t>=this.RO,e=this.CO<=t&&!i&&!this.ro,s=this.ro&&this.RO&&t>=this.RO;e&&(this.ho=!0,this.So(new Ott(this,this.CO))),this.qc.ec.forEach(i=>i.fAi(t)),s&&(this.dAi=!0,this.ho=!1,this.So(new Utt(this,this.RO)))}constructor(t,i,e,s,n){super(),this.HO=void 0,this.Zb=void 0,this.qc=void 0,this.emi=void 0,this.hu=void 0,this.ho=void 0,this.EJt=void 0,this.dAi=void 0,this.HO=t,this.Zb=i,this.qc=e,this.emi=s,this.ho=!1,this.dAi=!1,this.EJt=n}};r(),r();var Xtt=class extends Oi{xa(){return new jtt(this.jnt.Ca)}constructor(t,i){super("Jnt"),this.jnt=void 0,this.YF=void 0,this.jnt=t,this.YF=i}},jtt=class extends gp{constructor(t){super("adbegin"),this.ad=void 0,this.ad=t}};r();var Qtt=class extends Oi{xa(){return new Ktt(this.jnt.Ca)}constructor(t,i){super("Znt"),this.jnt=void 0,this.YF=void 0,this.jnt=t,this.YF=i}},Ktt=class extends gp{constructor(t){super("adend"),this.ad=void 0,this.ad=t}};r(),r();var Ytt=class extends Oi{xa(){return new Jtt(this.jnt.Ca)}constructor(t){super("vAi"),this.jnt=void 0,this.jnt=t}},Jtt=class extends gp{constructor(t){super("removead"),this.ad=void 0,this.ad=t}},Ztt=class extends A4{Jei(t){}isi(t){this.So(new Ytt(t))}constructor(){super()}};r();var $tt=class extends Oi{xa(){return new tit(this.jnt.Ca)}constructor(t){super("i5t"),this.jnt=void 0,this.jnt=t}},tit=class extends gp{constructor(t){super("adfirstquartile"),this.ad=void 0,this.ad=t}},iit=class extends Oi{xa(){return new eit(this.jnt.Ca)}constructor(t){super("e5t"),this.jnt=void 0,this.jnt=t}},eit=class extends gp{constructor(t){super("admidpoint"),this.ad=void 0,this.ad=t}},sit=class extends Oi{xa(){return new nit(this.jnt.Ca)}constructor(t){super("s5t"),this.jnt=void 0,this.jnt=t}},nit=class extends gp{constructor(t){super("adthirdquartile"),this.ad=void 0,this.ad=t}},rit=class extends Oi{xa(){return new hit(this.jnt.Ca)}constructor(t){super("_Ai"),this.jnt=void 0,this.jnt=t}},hit=class extends gp{constructor(t){super("adcomplete"),this.ad=void 0,this.ad=t}};r();var oit=class t extends je{static gAi(i,e){return new t(i,e.duration,e.apiFramework||"",e.creative,e.mimeType,e.width,e.height,e.companions.map(e=>t.gAi(i,e)),e.extensions,e.fw_parameters,e.events,void 0)}static pAi(i,e){return new t(i,e.duration,e.apiFramework||"",e.creative,e.mimeType,e.width,e.height,e.companions.map(e=>t.pAi(i,e)),e.extensions,e.fw_parameters,void 0,e.ad_id)}get Ca(){return this.hu||(this.hu=function(t){let i;const e={get apiFramework(){return t.FYt},get companions(){return t.PYt.Ca},get creative(){return t.mAi},get duration(){return t.ct},get endTime(){return t.RO},get events(){return t.fQ},get extensions(){return t.DJt},get freeWheelParameters(){return t.wAi},get height(){return t.Mi},get mimeType(){return t.lQ},get startTime(){return t.CO},get width(){return t.Ti},addEventListener(t,e){i.wn(t,e)},removeEventListener(t,e){i.mn(t,e)}};return i=new le(t,e),e}(this)),this.hu}get CO(){return this.HO}get RO(){return this.HO+this.Zb}get ct(){return this.Zb}get FYt(){return this.UYt}get mAi(){return this.yAi}get lQ(){return this.IQ}get Ti(){return this.lA}get Mi(){return this.fA}get fQ(){return this.Zf}get PYt(){return this.IYt}get DJt(){return this.NJt}get wAi(){return this.bAi}get ro(){return this.ho}get Wbi(){var t;return null!=(t=this.Zf.clickthroughs)?t:[]}fAi(t){const i=this.CO<=t&&t<this.RO,e=i&&!this.ro,s=!i&&this.ro;e&&(this.AAi=!1,this.SAi=!1,this.TAi=!1,this.kAi=!1,this.ho=!0,this.So(new Xtt(this,this.CO))),s&&(this.ho=!1,this.So(new Qtt(this,this.RO)))}Nbi(t){const i=(t-this.CO)/this.ct;!this.AAi&&i>=.25&&(this.AAi=!0,this.So(new $tt(this))),!this.SAi&&i>=.5&&(this.SAi=!0,this.So(new iit(this))),!this.TAi&&i>=.75&&(this.TAi=!0,this.So(new sit(this))),!this.kAi&&i>=.9999&&(this.kAi=!0,this.So(new rit(this)))}uD(){this.AAi=!0,this.SAi=!0,this.TAi=!0,this.kAi=!0}kn(){this.mn("Jnt",this.EAi),this.mn("Znt",this.xAi)}constructor(t,i,e,s,n,r,h,o,a=[],u={},c={},d){super(),this.HO=void 0,this.Zb=void 0,this.UYt=void 0,this.yAi=void 0,this.IQ=void 0,this.lA=void 0,this.fA=void 0,this.NJt=void 0,this.bAi=void 0,this.Zf=void 0,this.vJt=void 0,this.IYt=void 0,this.hu=void 0,this.ho=void 0,this.AAi=void 0,this.SAi=void 0,this.TAi=void 0,this.kAi=void 0,this.EAi=void 0,this.xAi=void 0,this.HO=t,this.Zb=i,this.UYt=e,this.yAi=s,this.IQ=n,this.lA=r,this.fA=h,this.NJt=a,this.bAi=u,this.Zf=c,this.vJt=d,this.IYt=new Ztt,this.ho=!1,this.AAi=!1,this.SAi=!1,this.TAi=!1,this.kAi=!1,this.EAi=()=>this.Nbi(this.HO),this.xAi=()=>this.Nbi(this.RO),this.IYt.Zei(o),this.wn("Jnt",this.EAi),this.wn("Znt",this.xAi)}};r(),r();var ait=class extends Oi{xa(){return new uit(this.od.Ca)}constructor(t){super("Xnt"),this.od=void 0,this.od=t}},uit=class extends gp{constructor(t){super("addadbreak"),this.adBreak=void 0,this.adBreak=t}};r();var cit=class extends Oi{xa(){return new dit(this.od.Ca)}constructor(t){super("Gnt"),this.od=void 0,this.od=t}},dit=class extends gp{constructor(t){super("removeadbreak"),this.adBreak=void 0,this.adBreak=t}},lit=class extends A4{Jei(t){this.So(new ait(t))}isi(t){this.So(new cit(t))}constructor(){super()}},fit=class{get Ca(){return this.hu||(this.hu=function(t){return{get adBreaks(){return t.K0t.Ca},get currentAdBreak(){if(t.Fnt)return t.Fnt.Ca},get currentAds(){return t.Fnt?t.Fnt.Jc.Ca:(new Ztt).Ca},skip(){t.uD()}}}(this)),this.hu}get K0t(){return this.y1t}get Fnt(){return hh(this.y1t.ec,t=>t.ro)}get Lnt(){return this.Fnt?this.Fnt.Jc.ec.filter(t=>t.ro):[]}get PAi(){if(0===this.K0t.V||0===this.oa.EP().length)return;const t=this.oa.EP().end(this.oa.EP().length-1);return hh(this.K0t.ec,i=>i.fct(t))}get Lbi(){return this.IAi}Bbi(t){if(0===t.length)return;const i=Uo.jn(t);for(const t of this.y1t.ec.slice())it(t.RO)&&i.Tn(0)>t.RO&&this.y1t.pS(t)}Cbi(t){const i=!function(t){return it(t.breakOffsets)}(t),e=i?this.pbi.Jbi:0;for(const s of t.breaks){if(0===s.ads.length)continue;let t=s.timeOffset+e;const n=new Ztt;let r=0;for(const e of s.ads){const s=i?oit.pAi(t,e):oit.gAi(t,e);n.gO(s),t+=s.ct,r+=s.ct}const h=s.timeOffset+e,o=i?void 0:s.duration,a=new Gtt(h,o,n,i,this.CAi);i&&this.RAi.push({mYt:a,wIt:h+r}),this.y1t.gO(a)}}DAi(t){const i=this.PAi;i&&i.uAi(t+this.pbi.Jbi)}Dbi(t){this.NAi=t,this.y1t.ec.forEach(i=>i.fAi(t))}uD(){const t=this.NAi,i=this.Fnt;t&&i&&i.lAi(t)&&i.uD()}skipAd(t){this.uD()}Obi(t,i){const e=[];for(const s of this.K0t.ec)!s.cAi&&s.CO>=t&&s.CO<i&&e.push(s);return e}destroy(){this.oa.mn("timeupdate",this.BAi),this.pbi.mn("Qbi",this.MAi)}resetSource(){var t;for(const t of this.K0t.ec){for(const i of t.Jc.ec)i.Vo();t.Vo()}this.K0t.jy(),null==(t=this.LAi)||t.removeAllAds(),this.NAi=void 0,this.RAi=[]}OAi(t){return hh(this.LAi.ads,i=>i.creativeId===t.mAi)}constructor(t,i,e,s){var n;this.oa=void 0,this.pbi=void 0,this.y1t=void 0,this.CAi=void 0,this.IAi=void 0,this.hu=void 0,this.NAi=void 0,this.RAi=[],this.LAi=void 0,this.FAi=t=>(this.LAi=t,this),this.MAi=t=>{t.uE.ads&&this.Cbi(t.uE.ads),t.uE.currentBreakEnd&&this.DAi(t.uE.currentBreakEnd)},this.BAi=t=>{if(0===this.RAi.length||0===this.oa.EP().length)return;const i=this.oa.EP().end(this.oa.EP().length-1);for(const t of this.RAi.slice())it(t.mYt.ct)?_e(this.RAi,t):t.wIt<i&&(t.mYt.uAi(t.wIt),_e(this.RAi,t))},this.jd=t=>{var i;const e=null==(i=this.LAi)?void 0:i.createAdBreak({timeOffset:t.od.CO,maxDuration:t.od.ct,customData:t.od});t.od.wn("Sbi",this.UAi);for(const i of t.od.Jc.ec){var s,n;const r={type:"linear",timeOffset:i.CO,duration:i.ct,creativeId:i.mAi,skipOffset:t.od.kJt,clickThrough:null==(s=i.Wbi)?void 0:s[0],customData:i};null==(n=this.LAi)||n.createAd(r,e),i.wn("Jnt",this.M7t),i.wn("Znt",this.VAi),i.wn("i5t",this.HAi),i.wn("e5t",this.WAi),i.wn("s5t",this.qAi),i.wn("_Ai",this.uyi)}},this.UAi=t=>{for(const s of t.od.Jc.ec){const t=this.OAi(s);var i,e;if(t)null==(i=this.LAi)||i.beginAd(t),null==(e=this.LAi)||e.skipAd(t)}},this.Td=t=>{for(const i of t.od.Jc.ec)i.Vo();t.od.Vo()},this.M7t=t=>{const i=this.OAi(t.jnt);var e;i&&(null==(e=this.LAi)||e.beginAd(i))},this.VAi=t=>{const i=this.OAi(t.jnt);var e;i&&(null==(e=this.LAi)||e.endAd(i))},this.HAi=t=>{const i=this.OAi(t.jnt);var e;i&&(null==(e=this.LAi)||e.updateAdProgress(i,.25))},this.WAi=t=>{const i=this.OAi(t.jnt);var e;i&&(null==(e=this.LAi)||e.updateAdProgress(i,.5))},this.qAi=t=>{const i=this.OAi(t.jnt);var e;i&&(null==(e=this.LAi)||e.updateAdProgress(i,.75))},this.uyi=t=>{const i=this.OAi(t.jnt);var e;i&&(null==(e=this.LAi)||e.updateAdProgress(i,1))},this.oa=t,this.pbi=i,this.y1t=new lit,this.y1t.wn("Xnt",this.jd),this.y1t.wn("Gnt",this.Td),this.CAi=e,this.IAi=s,t.wn("timeupdate",this.BAi),this.pbi.wn("Qbi",this.MAi),null==(n=this.oa.Jc)||n.Wnt(FC.UPLYNK,this.FAi)}};r(),r(),r();var vit=function(t){return t[t.NOT_AVAILABLE=-1]="NOT_AVAILABLE",t[t.NOT_APPLICABLE=0]="NOT_APPLICABLE",t[t.G=1]="G",t[t.PG=2]="PG",t[t.PG_13=3]="PG_13",t[t.R=4]="R",t[t.NC_17=5]="NC_17",t[t.X=6]="X",t[t.NOT_RATED=7]="NOT_RATED",t}({}),_it=function(t){return t[t.NOT_AVAILABLE=-1]="NOT_AVAILABLE",t[t.NOT_APPLICABLE=0]="NOT_APPLICABLE",t[t.TV_Y=1]="TV_Y",t[t.TV_Y7=2]="TV_Y7",t[t.TV_G=3]="TV_G",t[t.TV_PG=4]="TV_PG",t[t.TV_14=5]="TV_14",t[t.TV_MA=6]="TV_MA",t[t.NOT_RATED=7]="NOT_RATED",t}({}),git=class t{static zAi(i,e,s){const n=new Fp(i.rating_flags);return new t(e,s,i.duration,Boolean(i.audio_only),i.boundary_details,Boolean(i.error),i.tv_rating,i.max_slice,i.thumb_prefix,i.slice_dur,i.movie_rating,i.owner,i.meta,i.rates,i.thumbs,i.poster_url,i.default_poster_url,i.desc,n.Uy(1),n.Uy(2),n.Uy(4),n.Uy(8),i.external_id,Boolean(i.is_ad),i.asset)}get Ca(){return this.hu||(this.hu=function(t){return{startTime:t.CO,endTime:t.RO,duration:t.ct,audioOnly:t.GAi,boundaryDetails:t.XAi,error:t.lt,tvRating:t.jAi,maxSlice:t.QAi,thumbPrefix:t.KAi,sliceDuration:t.YAi,movieRating:t.JAi,ownerId:t.ZAi,metadata:t.LU,rates:t.$Ai,thumbnailResolutions:t.tSi,posterUrl:t.iSi,defaultPosterUrl:t.eSi,description:t._N,hasAdultLanguage:t.sSi,hasSexualSituations:t.nSi,hasViolence:t.rSi,hasDrugSituations:t.hSi,externalId:t.oSi,isAd:t.aSi,assetId:t.uSi}}(this)),this.hu}constructor(t,i,e,s,n,r,h,o,a,u,c,d,l,f,v,_,g,p,m,w,y,b,A,S,T){this.CO=void 0,this.RO=void 0,this.ct=void 0,this.GAi=void 0,this.XAi=void 0,this.lt=void 0,this.jAi=void 0,this.QAi=void 0,this.KAi=void 0,this.YAi=void 0,this.JAi=void 0,this.ZAi=void 0,this.LU=void 0,this.$Ai=void 0,this.tSi=void 0,this.iSi=void 0,this.eSi=void 0,this._N=void 0,this.sSi=void 0,this.nSi=void 0,this.rSi=void 0,this.hSi=void 0,this.oSi=void 0,this.aSi=void 0,this.uSi=void 0,this.hu=void 0,this.CO=t,this.RO=i,this.ct=e,this.GAi=s,this.XAi=n,this.lt=r,this.jAi=h,this.QAi=o,this.KAi=a,this.YAi=u,this.JAi=c,this.ZAi=d,this.LU=l,this.$Ai=f,this.tSi=v,this.iSi=_,this.eSi=g,this._N=p,this.sSi=m,this.nSi=w,this.rSi=y,this.hSi=b,this.oSi=A,this.aSi=S,this.uSi=T}};var pit=Zh({duration:an,offset:an}),mit=Zh({c3:pit}),wit=Zh({c7:pit}),yit=Zh({halftime:pit}),bit=EI(TI(_it)),Ait=EI(TI(vit)),Sit=Zh({width:Dh(Pa,an),prefix:Ye,bw:an,bh:an,height:Dh(Pa,an)}),Tit=Zh({audio_only:an,boundary_details:Dh(Pa,_h(Dh(mit,wit,yit))),error:an,tv_rating:bit,max_slice:an,thumb_prefix:Ye,slice_dur:an,movie_rating:Ait,owner:Ye,meta:yI,rates:_h(an),thumbs:_h(Sit),poster_url:Ye,duration:an,default_poster_url:Ye,desc:Ye,rating_flags:an,external_id:Ye,is_ad:an,asset:Ye}),kit=class{async KSt(t,i,e,s){const n=function(t,i,e){if(mtt.jH(i))return[Eit(t,i,e)];if(_h(mtt).jH(i))return i.map(i=>Eit(t,i,e));if(wtt.jH(i)){return(hi(i.externalId)?i.externalId:[i.externalId]).map(s=>Eit(t,"ext/"+i.userId+"/"+s,e))}throw new g("Invalid asset id")}(t,i,s),r=n.map(t=>ws(()=>this.jbi(t),e));return(await Promise.all(r)).filter(it)}async jbi(t){const i=this.aV.vk({Hk:Qe.GET,Yu:t,fk:Bi.BT}),e=await i,s=await e.lk();return Tit.jH(s)||Tit.KH(s,"AssetInfoResponse"),s}constructor(t){this.aV=void 0,this.aV=t}};function Eit(t,i,e){return e?t+"/player/assetinfo/"+i+".json?pbs="+e:t+"/player/assetinfo/"+i+".json"}r(),r();var xit=class extends Oi{xa(){return new Pit(this.pd.Ca)}constructor(t){super("cSi"),this.pd=void 0,this.pd=t}},Pit=class extends gp{constructor(t){super("removeasset"),this.asset=void 0,this.asset=t}};r();var Iit=class extends Oi{xa(){return new Cit(this.pd.Ca)}constructor(t){super("dSi"),this.pd=void 0,this.pd=t}},Cit=class extends gp{constructor(t){super("addasset"),this.asset=void 0,this.asset=t}},Rit=class extends A4{Cbi(t,i){let e,s=0;for(const n of t){e=s+n.duration;for(const t of i)s<=t.CO&&t.CO<e&&(e+=t.ct||0);this.gO(git.zAi(n,s,e)),s=e}}Jei(t){this.So(new Iit(t))}isi(t){this.So(new xit(t))}constructor(){super()}};r(),r();var Dit=class extends Oi{xa(){return new Nit(this.uE)}constructor(t){super("lSi"),this.uE=void 0,this.uE=t}},Nit=class extends gp{constructor(t){super("preplayresponse"),this.response=void 0,this.response=t}};r();var Bit=class extends Oi{xa(){return new Mit(this.uE)}constructor(t){super("fSi"),this.uE=void 0,this.uE=t}},Mit=class extends gp{constructor(t){super("assetinforesponse"),this.response=void 0,this.response=t}},Lit=class extends je{Gbi(t){t&&this.So(new Dit(ru(t)))}Ibi(t){t.forEach(t=>this.So(new Bit(t)))}get Ca(){return this.hu||(this.hu=this.xa()),this.hu}xa(){let t;const i=this,e={get ads(){return i.fbi.Ca},get assets(){return i.vbi.Ca},addEventListener(i,e){t.wn(i,e)},removeEventListener(i,e){t.mn(i,e)}};return t=new le(i,e),e}constructor(t,i,e){super(),this.hu=void 0,this.fbi=void 0,this.vbi=void 0,this.pbi=void 0,this.fbi=t,this.vbi=i,this.pbi=e,e.wn("Qbi",this.Rs),e.wn("Kbi",this.Rs)}},Oit=class{vSi(t,i){const e=new ytt(t.Dx),s=new Ptt(t.Dx),n=function(t){if(t.uplynk&&it(t.uplynk.defaultSkipOffset))return function(t){return lo(t)?t:-1}(t.uplynk.defaultSkipOffset);return-1}(i),r=function(t){var i,e;const s=null!=(e=null==(i=t.uplynk)?void 0:i.onSeekOverAd)?e:void 0;return function(t){if(!t)return"play-none";switch(t.toLowerCase()){case"play-all":return"play-all";case"play-none":default:return"play-none";case"play-last":return"play-last"}}(s)}(i),h=new Ntt(s,t),o=new Btt(e,i),a=new fit(t,h,n,r),u=new kit(t.Dx),c=new Rit,d=new Lit(a,c,h);return new att(t,h,o,a,d,u,c)}};Na(function(t){return class extends t{gbi(t){super.Ta(t)}mbi(t,i){return super.drt(t,i)}Vbi(t){super.Xx(t)}Yx(){var t;return null!=(t=this._Si.lt)?t:super.Yx()}Zx(){var t;return null!=(t=this._Si.Jx)?t:super.Zx()}Xx(t,i){this._Si.Xx(t)}Ta(t){this._Si.Ta(t)}drt(t,i){return this._Si.drt(t,i)}xa(){const t=this._Si.Ca;return Gi(super.xa(),{get uplynk(){return t}})}kn(){this._Si.kn(),super.kn()}constructor(t,i){super(t,i),this._Si=void 0,this._Si=(new Oit).vSi(this,i)}}},Oa.Ant),r(),r(),r(),r();var Eu=function(t){return t.CREATIVE_VIEW="creativeView",t.START="start",t.FIRST_QUARTILE="firstQuartile",t.MID_POINT="midpoint",t.THIRD_QUARTILE="thirdQuartile",t.COMPLETE="complete",t.MUTE="mute",t.UNMUTE="unmute",t.PAUSE="pause",t.REWIND="rewind",t.RESUME="resume",t.FULL_SCREEN="fullscreen",t.EXIT_FULL_SCREEN="exitFullscreen",t.EXPAND="expand",t.COLLAPSE="collapse",t.ACCEPT_INVITATION_LINEAR="acceptInvitationLinear",t.ACCEPT_INVITATION="acceptInvitation",t.CLOSE_LINEAR="closeLinear",t.CLOSE="close",t.SKIP="skip",t.SKIP_SHOWN="skipShown",t.PROGRESS="progress",t.ENGAGED_VIEW="engagedView",t.IMPRESSION="impression",t.ERROR="error",t}({});r();var Fit=class extends gn{xa(){return La(this)}get u$t(){return we.g1t}get CO(){return this.HO}get aYt(){return this.XYt}constructor(t,i,e,s){super(t,i),this.XYt=void 0,this.HO=void 0,this.XYt=s,this.HO=e}};r();var Uit=class extends tn{get JOt(){return this.gSi}get u$t(){return we.g1t}constructor(t,i,e){if(super(i),this.gSi=void 0,this.k4t=t,this.E4t=t,e){const t=new Date(e);Qf(t)&&(this.gSi=t)}}},Vit=class{HI(){this.oa.wn(Jr.PM,this.NL),this.oa.wn(d.jw,this.xBt),this.oa.wn(d.uo,this.sjt),this.oa.wn(d.$w,this.Je),this.oa.wn(d.Nw,this.Eh),this.oa.wn(d.py,this.bd),this.oa.wn(d.wy,this.n3t),this.oa.wn(oc.MODE_CHANGE,this.pSi)}UI(){this.oa.mn(Jr.PM,this.NL),this.oa.mn(d.jw,this.xBt),this.oa.mn(d.uo,this.sjt),this.oa.mn(d.$w,this.Je),this.oa.mn(d.Nw,this.Eh),this.oa.mn(d.py,this.bd),this.oa.mn(d.wy,this.n3t),this.oa.mn(oc.MODE_CHANGE,this.pSi)}get mSi(){return this.wSi}get Lnt(){const t=this.mSi;if(!t)return[];const i=[],e=this.ySi();for(const s of t.Jc)e>=s.CO&&this.tMt<=s.CO+s.ct&&i.push(s);return i}ySi(){return this.oa.Gx()-this.bSi}ASi(){if(this.SSi)return;if(this.oa.Nd()!==1/0)return void(0===this.TSi.length&&(this.SSi=this.kSi()));const t=()=>{var t;null==(t=this.ESi)||t.zg(),this.ESi=void 0,this.SSi=void 0};this.ESi=new Zc,this.SSi=this.xSi(this.ESi.Yg).catch(this.u8).then(t,t)}async PSi(){const t=_.min(1e3*2**this.ISi,3e4);try{var i;await Ze(t,null==(i=this.ESi)?void 0:i.Yg),this.ISi++}catch(t){if(Ce(t))return void(this.ISi=0)}this.ASi()}async xSi(t){for(;fr(t),!this.oa.lP;){const i=zd.Mg()-this.CSi;if(i>1e4)await this.kSi(t),this.CSi=zd.Mg(),this.ISi=0;else{const e=1e4-i;await Ze(e,t)}}}RSi(t){const i=t.JOt;if(i&&this.oa.Vx&&0===this.bSi&&!this.DSi&&0!==_.floor(this.oa.EP().start(0))){const e=(this.oa.Vx.getTime()-i.getTime())/1e3,s=this.oa.Gx()-t.qOt;this.bSi=s-e}}async kSi(t){try{const i=await this.oa.Dx.vk({Yu:this.NSi}),e=await i.VT(t);if(0===e.avails.length)return void(0!==this.TSi.length&&(this.TSi=[]));if(e.avails.length===this.TSi.length&&e.avails[0].startTimeInSeconds===this.TSi[0].qOt)return void this.RSi(this.TSi[0]);const s=[];for(const t of e.avails){const i=new Uit(t.durationInSeconds,t.startTimeInSeconds,t.availProgramDateTime);for(const e of t.ads){const t=new Fit(i,Hs.BZt,e.startTimeInSeconds,e.trackingEvents);t.O4t(e.adId,e.width,e.height,e.durationInSeconds,[],e.skipoffset),i.C4t(t)}s.push(i),this.RSi(i)}this.TSi=Xn(s,(t,i)=>t.qOt-i.qOt)}catch(t){throw sa(t),new m("Failed to poll MediaTailor tracking events")}}BSi(){var t;null==(t=this.ESi)||t.Zg(),this.ESi=void 0,this.SSi=void 0,this.CSi=-1/0}MSi(){if(0===this.TSi.length)return;const t=this.TSi[this.TSi.length-1],i=this.ySi();if(t.qOt+t.G0t<this.tMt){var e;this.wSi&&(null==(e=this.oa.Jc)||e.So(new Za(this.wSi)),this.wSi=void 0)}else{for(const t of this.TSi){const e=t.qOt;if(!(e+t.G0t<this.tMt)&&(e<=i&&e+t.G0t>this.tMt)){var s;if(this.mSi===t)return;return this.wSi=t,void(null==(s=this.oa.Jc)||s.So(new Ta(this.wSi)))}}var n;if(this.wSi)null==(n=this.oa.Jc)||n.So(new Za(this.wSi)),this.wSi=void 0}}LSi(){const t=this.Lnt;if(0===t.length)return;let i=[];for(const e of t){const t=e.aYt.filter(t=>Ct(this.OSi,t.eventType));i=i.concat(t)}for(const t of i)this.FSi(t.startTimeInSeconds)&&(t.eventType===Eu.COMPLETE&&this.USi(Eu.ENGAGED_VIEW),this.VSi(t))}HSi(t,i){return i.aYt.filter(i=>Jh(i.eventType,t))[0]}USi(t){const i=this.Lnt;if(0===i.length)return;const e=this.HSi(t,i[0]);e&&this.VSi(e)}VSi(t){this.Dpi(t.eventType);for(const i of t.beaconUrls){const t={Hk:Qe.GET,Yu:i,XT:"",fk:Bi.BT};0,Wr(this.WSi(t))}}Dpi(t){let i;const e=this.Lnt;switch(t){case Eu.START:i=new nc(e[e.length-1],this.oa.Gx());break;case Eu.COMPLETE:i=new fc(e[0],this.oa.Gx());break;case Eu.FIRST_QUARTILE:i=new ie(e[0],this.oa.Gx());break;case Eu.MID_POINT:i=new xe(e[0],this.oa.Gx());break;case Eu.THIRD_QUARTILE:i=new Qs(e[0],this.oa.Gx())}var s;void 0!==i&&(null==(s=this.oa.Jc)||s.So(i))}async WSi(t){const i=await this.oa.Dx.vk(t);i.dk}FSi(t){const i=this.ySi();return t>=this.tMt&&t<i}kn(){this.UI(),this.BSi(),this.tMt=-1}constructor(t,i,e){this.oa=void 0,this.NSi=void 0,this.CSi=-1/0,this.wSi=void 0,this.bSi=0,this.TSi=[],this.DSi=void 0,this.Ayi=!1,this.SK=!1,this.tMt=-1,this.ESi=void 0,this.SSi=void 0,this.ISi=0,this.NL=()=>{this.ASi()},this.sjt=()=>{this.USi(Eu.RESUME)},this.xBt=()=>{this.BSi(),this.USi(Eu.PAUSE)},this.Je=()=>{this.BSi(),this.tMt=-1},this.Eh=()=>{this.BSi()},this.bd=()=>{-1===this.tMt&&(this.tMt=this.ySi()),this.MSi(),this.LSi(),this.tMt=this.ySi()},this.n3t=()=>{if(this.Ayi!==this.oa.oP){this.Ayi=this.oa.oP;const t=this.Ayi?Eu.MUTE:Eu.UNMUTE;this.USi(t)}},this.pSi=()=>{if(this.SK!==this.oa.ds()){this.SK=this.oa.ds();const t=this.SK?Eu.FULL_SCREEN:Eu.EXIT_FULL_SCREEN;this.USi(t)}},this.u8=t=>{Ce(t)||(this.USi(Eu.ERROR),Wr(this.PSi()))},this.OSi=[Eu.START,Eu.FIRST_QUARTILE,Eu.MID_POINT,Eu.THIRD_QUARTILE,Eu.COMPLETE,Eu.IMPRESSION,Eu.CREATIVE_VIEW],this.oa=t,this.NSi=i,this.DSi=e,this.HI()}};Na(function(t){return class extends t{Ta(t){return this.qSi&&(this.qSi.kn(),this.qSi=void 0,this.OEt()),super.Ta(t)}async drt(t,i){if(!t||!function(t){return t.sources.some(t=>t.integration===uk.MEDIATAILOR)}(t))return super.drt(t,i);try{const e=await this.zSi(t,i);this.GSi=new w3(this),await super.drt(e,i)}catch(t){this.Qq(new as(me.MANIFEST_LOAD_ERROR,t.message,t))}}gP(t){var i;(null==(i=this.GSi)?void 0:i.inAdBreak)||super.gP(t)}Xx(t,i){var e;(null==(e=this.qSi)?void 0:e.mSi)||super.Xx(t,i)}Yx(){var t;return null!=(t=this.nq)?t:super.Yx()}Zx(){var t;return null!=(t=this.rq)?t:super.Zx()}Qq(t){this.nq=ar(t),this.rq=t,this.So(new el(t))}OEt(){this.nq=void 0,this.rq=void 0}async zSi(t,i){const e=[];for(const s of t.sources){if(!yk(s)){e.push(s);continue}const t=s;if(!t.src){e.push(s);continue}const n=await this.XSi(t,i);fr(i);const r=Y({},t,{integration:void 0,src:n});e.push(r)}const s=ru(t);return s.sources=e,s}async XSi(t,i){const e=t.src||"",s=e.match(/.+?(?=\/v1\/)/);if(!s)throw new m("Could not find MediaTailor session initialization url");const n=s[0],r=nl(e,"?ads."),h=r?{Yu:e,fk:Bi.BT}:{Yu:e,Hk:Qe.POST,XT:JSON.stringify({adsParams:t.adsParams}),fk:Bi.BT},o=await ws(()=>this.jSi(h,i),i);let a;try{if(a=n+o.manifestUrl,!r){const t=n+o.trackingUrl,i=function(t){return!!t&&/\bmpd\b/i.test(t)}(a);this.qSi=new Vit(this,t,i)}}catch(t){throw new m("Something went wrong parsing the MediaTailor session initialization response")}return a}async jSi(t,i){try{const e=await this.Dx.vk(t);return await e.VT(i)}catch(t){throw sa(t),new m("Failed to initialize MediaTailor session manifest")}}kn(){var t;this.qSi&&(this.qSi.kn(),this.qSi=void 0),this.OEt(),null==(t=this.GSi)||t.destroy(),this.GSi=void 0,super.kn()}constructor(t,i){super(t,i),this.qSi=void 0,this.nq=void 0,this.rq=void 0,this.GSi=void 0}}},Oa.Snt),r(),r(),r(),r(),r();var pu=function(t){return t[t.QSi=0]="QSi",t[t.PM=1]="PM",t[t.Yz=2]="Yz",t[t.KSi=3]="KSi",t[t.YSi=4]="YSi",t[t.JSi=5]="JSi",t[t.ma=6]="ma",t}({});r();var Hit=class extends Ne{get YI(){}get Rt(){return this.We}set Rt(t){this.SO(t)}get Ca(){var t;return null!=(t=this.hu)?t:this.hu=cs(this)}get o(){return String(this.vu.componentTag)||"hbbtvaudiotrack"}get Lt(){return this.I5}get Th(){return this.bO}get bs(){return""}get Qk(){return this.Rt?"enabled":"disabled"}set Qk(t){this.SO("enabled"===t)}get $I(){return this._O}get tC(){}set tC(t){}get JI(){return this.yO}SO(t){this.We=t,t?this.CMt.ZSi(this.vu):this.CMt.$Si(this.vu)}constructor(t,i,e,s,n=!1){super(),this.yO=mi(),this._O=new iE,this.vu=void 0,this.bO=void 0,this.I5=void 0,this.hu=void 0,this.CMt=void 0,this.We=void 0,this.vu=t,this.bO=i,this.I5=e,this.We=n,this.CMt=s}};r(),r(),r();var Wit=function(t){return t.qm="urn:dvb:casystemid:19219",t.zm="urn:dvb:casystemid:19156",t}({}),qit=function(t){return t.qm="application/vnd.ms-playready.initiator+xml",t.zm="application/widevine+xml",t}({});function zit(t,i,e){switch(t){case"urn:dvb:casystemid:19219":return function(t){return'<?xml version="1.0" encoding="utf-8"?><PlayReadyInitiator xmlns="http://schemas.microsoft.com/DRM/2007/03/protocols/"><LicenseServerUriOverride><LA_URL>'+(null!=t?t:"")+"</LA_URL></LicenseServerUriOverride></PlayReadyInitiator>"}(i);case"urn:dvb:casystemid:19156":if(!e)throw new m("Content URL is needed for Widevine license request");return function(t,i){return'<?xml version="1.0" encoding="utf-8"?><WidevineCredentialsInfo xmlns="http://www.smarttv-alliance.org/DRM/widevine/2012/protocols/"><ContentURL>'+Q0(null!=i?i:"")+"</ContentURL><DeviceID></DeviceID><StreamID></StreamID><ClientIP></ClientIP><DRMServerURL>"+Q0(null!=t?t:"")+"</DRMServerURL><DRMAckServerURL></DRMAckServerURL><DRMHeartBeatURL></DRMHeartBeatURL><DRMHeartBeatPeriod></DRMHeartBeatPeriod><UserData></UserData><Portal></Portal><StoreFront></StoreFront><BandwidthCheckURL></BandwidthCheckURL><BandwidthCheckInterval></BandwidthCheckInterval></WidevineCredentialsInfo>"}(i,e);default:throw new m("DRM key system is not supported")}}var Git=class extends CL{tTi(t){this.iTi(),this.Tu=t}async eTi(t){if(!t.fq.length)return void this.iTi();if(!this.Tu)throw new m("The OIPF DRM agent has to be attached to the DOM");let i;this.sTi||(this.sTi=h.createElement("object"),this.sTi.type="application/oipfDrmAgent",this.Tu.appendChild(this.sTi),this.sTi.onDRMMessageResult=this.nTi,this.sTi.onDRMRightsError=this.rTi,this.hTi=h.createElement("object"),this.hTi.type="application/oipfCapabilities",this.Tu.appendChild(this.hTi));for(const e of t.fq){let s,n,r;if(e.xS===Jg)s=Wit.qm,n=qit.qm,r=zit(Wit.qm,e.FW);else{if(e.xS!==ot)continue;s=Wit.zm,n=qit.zm,r=zit(Wit.zm,e.FW,t.rC)}try{return await this.Bet(n,r,s),void this.So(new nt)}catch(t){i=t}}i&&this.So(new AL(i))}zg(){return this.oTi=void 0,this.Tu=void 0,super.zg()}Bet(t,i,e){var s,n;return this.oTi=new Ga,this.aTi=null==(n=this.sTi)||null==(s=n.sendDRMMessage)?void 0:s.call(n,t,i,e),this.aTi||null==this.oTi.Ky||this.oTi.Ky.call(this.oTi,new fs(me.CONTENT_PROTECTION_INTERNAL_ERROR,"No DRM message returned by OIPF DRM agent")),this.oTi.Yy}uTi(t){switch(t){case 5:return me.CONTENT_PROTECTION_NOT_SUPPORTED;case 2:case 1:case 3:case 4:case 6:return me.CONTENT_PROTECTION_INTERNAL_ERROR;default:return me.CONTENT_PROTECTION_ERROR}}cTi(t){switch(t){case 2:return"The DRM agent was unable to complete the request";case 3:return"The specified MIME type is unknown for the specified DRM system";case 4:return"User consent is needed for that action";case 5:return"The specified DRM System is unknown";case 6:return"The license message has the wrong format";default:return"Unspecified error occurred"}}dTi(t){return 0===t?me.CONTENT_PROTECTION_LICENSE_ERROR:1===t?me.CONTENT_PROTECTION_LICENSE_INVALID:me.CONTENT_PROTECTION_ERROR}lTi(t){switch(t){case 0:return"No license, consumption of the content is blocked";case 1:return"Invalid license, consumption of the content is blocked";case 2:return"Valid license, consumption of the content is unblocked";default:return"Unknown error occurred"}}iTi(){this.sTi&&(Ao(this.sTi),this.sTi=void 0),this.hTi&&(Ao(this.hTi),this.hTi=void 0)}async I8(t,i,e){}constructor(...t){super(...t),this.sTi=void 0,this.hTi=void 0,this.Tu=void 0,this.aTi=void 0,this.oTi=void 0,this.nTi=(t,i,e)=>{var s,n,r,h;if(0===e)return void(null==(h=this.oTi)||null==(r=h.Qy)||r.call(h,t));const o=this.uTi(e),a=this.cTi(e),u=new fs(o,a);null==(n=this.oTi)||null==(s=n.Ky)||s.call(n,u)},this.rTi=(t,i,e,s)=>{const n=this.dTi(t),r=this.lTi(t),h=new fs(n,r);this.So(new AL(h))}}};r();var Xit=class{get kP(){return Uo.nL(0,this.PL.ct)}get wP(){return Dn.pz}set wP(t){}get Cd(){return this.ZS}IZ(t){return!1}RZ(t){return yh.resolve(void 0)}async eTi(t){await this.DZ.eTi(this.ZS)}zg(){return yh.resolve(void 0)}constructor(t,i,e){this.ZS=void 0,this.PL=void 0,this.DZ=void 0,this.ZS=t,this.PL=i,this.DZ=e}},jit=class extends Ne{get Fx(){return Uo.rL()}get Vx(){}get uq(){}get Wu(){return this.sc}get kP(){var t,i;return null!=(i=null==(t=this.aq)?void 0:t.kP)?i:Uo.rL()}get xP(){return this.Pz}get _5(){return!1}get sP(){return!1}get ML(){return Y({},DN)}get lt(){return this.nq}get d5(){return!1}get Ma(){return this.ha}get j7(){return!0}get n5(){return!1}get WP(){return!0}set WP(t){}get Ql(){return this.Oz}get nt(){return this.Y9}get a9(){return this.kz}get Sq(){return this.ea}Y7(t){this.DZ.tTi(t),this.bet.Y7(t)}$Z(t){for(const i of t)if(i.Km===O.AV)return i}V9(t){return Promise.resolve({H9:!1})}async Un(t){if(this.aq)throw new m("Already loaded a media source");if(t.Km===O.AV)return this.aq=new Xit(t,this,this.DZ),await this.aq.eTi(t),this.aq;throw new m("Unsupported media source configuration for HbbTV")}async fTi(t){await this.vTi()}async QP(){await this.vTi()}$W(t){}async hr(){this.aq=void 0,this._Ti=void 0}async F8(){throw new g("Not supported")}async zg(){await this.hr(),this.Gl.kn(),this.Y9.kn(),this.bet.kn(),this.Aet.kn(),this.DZ.mn(Su,this.Rs),await this.DZ.zg()}be(){this.kz=!0,this.bet.be()}we(){this.kz=!1,this.bet.we()}wq(){return!1}bq(t,i,e,s,n){throw new m("Adding native sideloaded text tracks is not supported on HbbTV")}G7(){}X7(){}K7(){}hP(){return{rO:0,hO:0,oO:0}}$P(){}Tq(t){throw new m("Adding custom text tracks is not supported on HbbTV")}zP(){}sI(t,i,e,s,n,r,h,o,a){const u=new Ji(t,i,e,s,n,r,h,a,o);return this.Gl.tt(u),this.J9.tt(u),u}Eq(){for(const t of this.Gl.NI.slice())t.kn();this.Gl.hr()}rV(t){this.Gl.it(t),this.J9.it(t)}gTi(){const t=h.getElementsByTagName("object");for(let i=0;i<t.length;i++){const e=t.item(i);if("video/broadcast"===e.type){const t=e;return t.onPlayStateChange=this.pTi,0===t.playState&&(null==t.bindToCurrentChannel||t.bindToCurrentChannel.call(t)),t}}}vTi(){var t,i;if(!this.mTi||3===this.mTi.playState||0===this.mTi.playState)return Promise.resolve("");if(null==(t=this._Ti)?void 0:t.Yy)return null==(i=this._Ti)?void 0:i.Yy;this._Ti=new Ga;try{null==this.mTi.stop||this.mTi.stop.call(this.mTi)}catch(t){zd.dm("Unable to stop broadcast for HbbTV",t),this._Ti.Ky(new m("Unable to stop broadcast for HbbTV"))}return this._Ti.Yy}constructor(t,i){super(),this.sc=void 0,this.Oz=void 0,this.DZ=void 0,this.ha=void 0,this.ea=void 0,this.mTi=void 0,this.Gl=void 0,this.Y9=void 0,this.J9=void 0,this.bet=void 0,this.Aet=void 0,this.aq=void 0,this.Pz=void 0,this.nq=void 0,this.RV=void 0,this.kz=void 0,this._Ti=void 0,this.pTi=void 0,this.sc=t,this.Oz=i,this.ha=new ks,this.ea=new Pu,this.Gl=new bc,this.aq=void 0,this.Pz=!1,this.nq=void 0,this.RV=Lr.zL,this.kz=!0,this._Ti=void 0,this.pTi=()=>{var t,i,e,s;(null==(t=this.mTi)?void 0:t.playState)&&((null==(i=this._Ti)?void 0:i.Yy)||2!==this.mTi.playState||this.vTi().catch(gs),3===this.mTi.playState&&(null==(s=this._Ti)||null==(e=s.Qy)||e.call(s,String(this.mTi.playState)),this._Ti=void 0))},this.DZ=new Git(this),this.DZ.wn(Su,this.Rs),this.Y9=new Tu([this.Gl]),this.J9=new gL(this),this.bet=new ma,this.Aet=new _a(this.bet.xe,this.Wu,this.nt,this.Ql,this.Ma,this.Sq),this.mTi=this.gTi(),this.vTi().catch(gs)}},Qit=class extends jit{get hq(){}get ht(){return this.tO}get rt(){return this.sO}get vP(){return this.Rz}set vP(t){this.Rz=t,this.lP||this.wTi.play(t)}get oP(){return this.wTi.muted}set oP(t){this.wTi.muted=t}get OP(){var t,i;return(null!=(i=null!=(t=this.wTi.volume)?t:null==this.wTi.getVolume?void 0:this.wTi.getVolume.call(this.wTi))?i:100)/100}set OP(t){null==this.wTi.setVolume||this.wTi.setVolume.call(this.wTi,100*t)}get zx(){return this.wTi.playPosition?this.wTi.playPosition/1e3:0}get ct(){return!this.wTi.playTime||this.wTi.playTime<0?1/0:this.wTi.playTime/1e3}get Qx(){return this.wTi.playState===pu.JSi}get Mi(){return this.wTi.offsetHeight*zd.Zs.fp}get Ti(){return this.wTi.offsetWidth*zd.Zs.fp}get lP(){return this.wTi.playState===pu.Yz}get pP(){return Uo.rL()}get AP(){return this.o5}get DP(){return 0}get MP(){return 0}Y7(t){super.Y7(t),t.appendChild(this.wTi)}async Un(t){if(t.Km===O.AV){const i=await super.Un(t);return await this.fTi(t),this.wTi.onPlayStateChange=this.yTi,i}throw new m("Unsupported media source configuration for HbbTV")}async fTi(t){this.wTi.type=qu(t.rC),this.wTi.data=t.rC,await super.fTi(t)}async QP(){await super.QP(),this.wTi.play(this.Rz),this.So(new vt(this.zx))}jP(){this.wTi.play(0),this.So(new Si(this.zx))}Oy(t,i,e){this.wTi.seek(1e3*t),this.Pz=!0,this.So(new ji(this.zx))}async hr(){void 0!==this.aq&&this.wTi.stop(),this.bTi&&(zd.vm(this.bTi),this.bTi=void 0),await super.hr(),no(this.wTi),this.wTi.data&&this.wTi.removeAttribute("data"),this.tO.hr(),this.sO.hr()}async zg(){await super.zg(),Ao(this.wTi)}be(){super.be(),this.wTi.style.display="block"}we(){super.we(),this.wTi.style.display="none"}ZSi(t){const i=this.ATi(t);if(!i)throw new m("Selected track does not exist on HbbTV");null==this.wTi.selectComponent||this.wTi.selectComponent.call(this.wTi,i)}$Si(t){const i=this.ATi(t);if(!i)throw new m("Selected track does not exist on HbbTV");null==this.wTi.unselectComponent||this.wTi.unselectComponent.call(this.wTi,i)}ATi(t){var i;const e=null!=(i=null==this.wTi.getComponents?void 0:this.wTi.getComponents.call(this.wTi,t.type))?i:this.STi();return this.TTi(e,t)}kTi(t){var i;const e=null!=(i=null==this.wTi.getCurrentActiveComponents?void 0:this.wTi.getCurrentActiveComponents.call(this.wTi,1))?i:this.STi();this.tO.hr();for(let i=0;i<t.length;i++){const s=t.item(i);this.tO.tt(new Hit(s,s.language,this.tO.V?Pn.uDt:Pn.cDt,this,this.ETi(e,s)))}}xTi(t){var i;const e=null!=(i=null==this.wTi.getCurrentActiveComponents?void 0:this.wTi.getCurrentActiveComponents.call(this.wTi,0))?i:this.STi();this.sO.hr();for(let i=0;i<t.length;i++){const s=t.item(i);this.sO.tt(new Hit(s,String(s.aspectRatio),this.sO.V?Ja.uDt:Ja.cDt,this,this.ETi(e,s)))}}STi(){return{length:0,item:t=>{}}}ETi(t,i){return void 0!==this.TTi(t,i)}TTi(t,i){for(let e=0;e<t.length;e++){const s=t.item(e);if(this.PTi(s,i))return s}}PTi(t,i){return t.pid===i.pid&&t.componentTag===i.componentTag&&t.type===i.type&&t.encoding===i.encoding&&t.encrypted===i.encrypted}ITi(t){switch(t){case 0:return Mi.SRC_NOT_SUPPORTED;case 1:case 5:case 6:return Mi.NETWORK;default:return Mi.DECODE}}constructor(t,i,e){super(i,e),this.wTi=void 0,this.Rz=void 0,this.CTi=void 0,this.RTi=void 0,this.tO=void 0,this.sO=void 0,this.o5=void 0,this.DTi=void 0,this.bTi=void 0,this.yTi=void 0,this.NTi=void 0,this.wTi=t,this.Rz=1,this.tO=new Ws,this.sO=new Ws,this.o5=Lr.zL,this.DTi=void 0,this.bTi=void 0,this.yTi=()=>{if(!this.wTi.playState)return;this.RV=this.o5,this.CTi=this.RTi,this.RTi=this.wTi.playState;const t=this.ct;switch(t!==this.DTi&&(this.So(new zr(t)),this.DTi=t),this.bTi&&this.RTi!==pu.PM&&(zd.vm(this.bTi),this.bTi=void 0),this.RTi){case pu.KSi:this.o5=Lr.zL;break;case pu.YSi:if(this.CTi===pu.KSi){var i;const t=null!=(i=null==this.wTi.getComponents?void 0:this.wTi.getComponents.call(this.wTi,1))?i:this.STi();var e;const s=null!=(e=null==this.wTi.getComponents?void 0:this.wTi.getComponents.call(this.wTi,0))?e:this.STi();if(0===t.length&&0===s.length)break;this.kTi(t),this.xTi(s)}this.o5=Lr.Qn;break;case pu.PM:this.Pz&&(this.Pz=!1,this.So(new Yr(this.zx))),this.So(new mo(this.zx)),this.o5=Lr.XL,this.bTi=zd.fm(this.NTi,250);break;case pu.ma:this.o5=Lr.zL,this.So(new uM(new mu(this.ITi(this.wTi.error))));break;case pu.JSi:this.So(new ur(this.zx));case pu.Yz:case pu.QSi:}this.o5!==this.RV&&this.So(new Ka(this.zx,this.o5))},this.NTi=()=>{this.So(new B(this.zx,void 0))}}};r();var Kit=class extends jit{get hq(){return this.pT}get ht(){return this.tO}get rt(){return this.sO}get vP(){return this.pT.playbackRate}set vP(t){this.pT.playbackRate=t}get oP(){return this.pT.muted}set oP(t){this.pT.muted=t}get OP(){return this.pT.volume}set OP(t){this.pT.volume=t}get zx(){return this.pT.currentTime}get ct(){return this.pT.duration}get Qx(){return this.pT.ended}get Mi(){return this.pT.offsetHeight*zd.Zs.fp}get Ti(){return this.pT.offsetWidth*zd.Zs.fp}get lP(){return this.pT.paused}get pP(){return Uo.jn(this.pT.played)}get AP(){return this.e9.AP}get DP(){return this.pT.videoHeight}get MP(){return this.pT.videoWidth}Y7(t){super.Y7(t),t.appendChild(this.pT)}async Un(t){if(t.Km===O.AV){const i=await super.Un(t);return await this.fTi(t),i}throw new m("Unsupported media source configuration for HbbTV")}async fTi(t){switch(t._q){case Fa.lC:case Fa.fC:this.pT.setAttribute("crossorigin",t._q);break;case Fa.Fk:default:this.pT.removeAttribute("crossorigin")}void 0!==t.wP?this.pT.preload=t.wP:this.pT.preload=Dn.PW,void 0!==t.gq?this.pT.title=t.gq:Ol(this.pT);const i=this.vP;this.pT.src=t.rC,this.vP=i,await super.fTi(t)}async QP(){await super.QP(),await this.pT.play()}jP(){this.pT.pause()}Oy(t,i,e){i&&this.pT.fastSeek&&!zd.Zs.Dp?this.pT.fastSeek(t):this.pT.currentTime=t,this.Pz=!0,this.So(new ji(this.zx))}async hr(){await super.hr(),no(this.pT),this.pT.src&&this.pT.removeAttribute("src"),this.tO.hr(),this.sO.hr()}async zg(){await super.zg(),this.p9.zg(),this.e9.zg(),this.T7(),this.Iq(),Ao(this.pT)}be(){super.be(),this.pT.style.display="block",this.pT.style.height="100%",this.pT.style.width="100%"}we(){super.we(),this.pT.style.display="none"}b7(){this.hq.addEventListener("play",this.HV),this.hq.addEventListener("pause",this.WV),this.hq.addEventListener("timeupdate",this.Nc),this.hq.addEventListener("progress",this.BTi),this.hq.addEventListener("loadstart",this.As),this.hq.addEventListener("ended",this.Ec),this.hq.addEventListener("ratechange",this.MTi),this.hq.addEventListener("volumechange",this.hjt),this.hq.addEventListener("durationchange",this.ejt),this.hq.addEventListener("loadedmetadata",this.LTi),this.hq.addEventListener("emptied",this.OTi),this.hq.addEventListener("seeked",this.FTi),this.hq.addEventListener("seeking",this.UTi),this.hq.addEventListener("error",this.VTi),Vc()&&this.hq.addEventListener("encrypted",this.U8)}T7(){this.hq.removeEventListener("play",this.HV),this.hq.removeEventListener("pause",this.WV),this.hq.removeEventListener("timeupdate",this.Nc),this.hq.removeEventListener("progress",this.BTi),this.hq.removeEventListener("loadstart",this.As),this.hq.removeEventListener("ended",this.Ec),this.hq.removeEventListener("ratechange",this.MTi),this.hq.removeEventListener("volumechange",this.hjt),this.hq.removeEventListener("durationchange",this.ejt),this.hq.removeEventListener("loadedmetadata",this.LTi),this.hq.removeEventListener("emptied",this.OTi),this.hq.removeEventListener("seeked",this.FTi),this.hq.removeEventListener("seeking",this.UTi),this.hq.removeEventListener("error",this.VTi),this.hq.removeEventListener("encrypted",this.U8)}Qq(t){this.nq=t,this.So(new uM(this.nq))}Hq(){const t=this.pT.audioTracks,i=this.pT.videoTracks;t&&(t.addEventListener("addtrack",this.HTi),t.addEventListener("removetrack",this.WTi),t.addEventListener("change",this.qTi)),i&&(i.addEventListener("addtrack",this.zTi),i.addEventListener("removetrack",this.GTi),i.addEventListener("change",this.XTi))}Iq(){const t=this.pT.audioTracks,i=this.pT.videoTracks;t&&(t.removeEventListener("addtrack",this.HTi),t.removeEventListener("removetrack",this.WTi),t.removeEventListener("change",this.qTi)),i&&(i.removeEventListener("addtrack",this.zTi),i.removeEventListener("removetrack",this.GTi),i.removeEventListener("change",this.XTi))}dh(t){for(let i=0;i<t.V;i++){t.MI(i).TO()}}constructor(t,i,e){super(i,e),this.pT=void 0,this.tO=void 0,this.sO=void 0,this.e9=void 0,this.p9=void 0,this.jTi=void 0,this.HV=void 0,this.WV=void 0,this.Nc=void 0,this.BTi=void 0,this.As=void 0,this.Ec=void 0,this.MTi=void 0,this.hjt=void 0,this.ejt=void 0,this.LTi=void 0,this.OTi=void 0,this.FTi=void 0,this.UTi=void 0,this.qV=void 0,this.VV=void 0,this.VTi=void 0,this.U8=void 0,this.zTi=void 0,this.GTi=void 0,this.XTi=void 0,this.HTi=void 0,this.WTi=void 0,this.qTi=void 0,this.pT=t,this.tO=new Ws,this.sO=new Ws,this.jTi=void 0,this.HV=()=>{this.So(new vt(this.zx))},this.WV=()=>{this.So(new Si(this.zx))},this.Nc=()=>{const t=this.zx,i=this.xP,e=void 0!==this.jTi,s=e&&this.jTi!==t;(i||!e||s)&&(this.So(new B(t,void 0)),this.jTi=t)},this.BTi=()=>{this.So(new Et(this.zx))},this.As=()=>{this.So(new ke)},this.Ec=()=>{this.So(new ur(this.zx))},this.MTi=()=>{this.So(new Ik(this.zx,this.vP))},this.hjt=()=>{this.So(new Wi(this.zx,this.OP))},this.ejt=()=>{this.So(new zr(this.ct))},this.LTi=()=>{},this.OTi=()=>{},this.FTi=()=>{this.Pz&&(this.Pz=!1),this.So(new Yr(this.zx))},this.UTi=()=>{this.So(new ji(this.zx))},this.qV=t=>{this.RV!==t.readyState&&(this.RV=t.readyState,this.So(t))},this.VV=()=>{this.So(new mo(this.zx))},this.VTi=()=>{if(null!==this.pT.error){const i=this.pT.error;var t;this.Qq(new mu(null!=(t=i.code)?t:Mi.DECODE,i.message||"Error decoding media",void 0,i.msExtendedCode))}},this.U8=t=>{this.So(new Sp(t.initDataType,t.initData||new ArrayBuffer(0)))},this.zTi=t=>{const i=this.pT.videoTracks;if(i)for(let t=0;t<i.length;t++){const e=i[t];cC(this.sO,e)||this.sO.tt(new lE(e))}},this.GTi=t=>{const i=[],e=this.pT.videoTracks;if(e){for(const t of this.sO.NI)dC(e,t.AO)||i.push(t);for(const t of i)this.sO.it(t)}},this.XTi=t=>{this.dh(this.sO)},this.HTi=t=>{const i=this.pT.audioTracks;if(i)for(let t=0;t<i.length;t++){const e=i[t];cC(this.tO,e)||this.tO.tt(new cE(e))}},this.WTi=t=>{const i=[],e=this.pT.audioTracks;if(e){for(const t of this.tO.NI)dC(e,t.AO)||i.push(t);for(const t of i)this.tO.it(t)}},this.qTi=t=>{this.dh(this.tO)},this.e9=new DL(this),this.e9.wn(Jr.AI,this.qV),this.e9.H8(new Ou(this)),this.p9=new aM(this),this.p9.wn(Jr.PM,this.VV),this.b7(),this.Hq()}},Yit=[d.uo,d.jw,Jr.PM,d.$w,d.Zw,d.Nw,d.Cw,d.xw,d.Ew,d.py,d.Qw,d.Ww,d.Kw,d.wy,d.Jw,d.Lw,d.Bw],Jit=class extends Ne{get ht(){return this.PL.ht}get Fx(){return this.PL.Fx._s()}get OL(){}get Vx(){return this.PL.Vx}set Vx(t){t&&this.PL.$W(t)}get bt(){return this.Ac}get zx(){return this.PL.zx}set zx(t){this.PL.Oy(t)}get dq(){return this.lq}get ct(){return this.PL.ct}get Qx(){return this.PL.Qx}get Jx(){return this.rq}get lt(){return this.nq}get $x(){}get iP(){}get sP(){return!1}get WP(){return this.PL.WP}set WP(t){this.PL.WP=t}get VP(){return this.Lz}get rP(){return Y({},{rO:0,hO:0,oO:0,aO:0,uO:0,cO:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}},this.PL.hP())}get oP(){return this.PL.oP}set oP(t){this.PL.oP=t}get cP(){return!0}get lP(){return this.PL.lP}get vP(){return this.PL.vP}set vP(t){this.PL.vP=t}get pP(){return this.PL.pP._s()}get wP(){return this.oq}set wP(t){this.oq=t,this.aq&&(this.aq.wP=t)}get AP(){return this.PL.AP}get kP(){return this.PL.kP._s()}get xP(){return this.PL.xP}get uq(){return this.PL.uq}get nt(){return this.Gl}get DP(){return this.PL.DP}get rt(){return this.PL.rt}get MP(){return this.PL.MP}get OP(){return this.PL.OP}set OP(t){this.PL.OP=t}sI(t){return this.PL.Tq(t)}YP(){return!1}qP(){return this.PL.Ma}zP(){}we(){this.PL.we()}$P(){this.PL.$P()}jP(){this.PL.jP()}async QP(){await this.PL.QP()}tI(){throw new m("Recreate media source is not supported on HbbTV")}Xx(t,i){this.PL.Oy(t)}async Ta(t,i,e){var s;fr(e),this.Ac=t;const n={Km:O.AV,rC:t.src,GT:t.type,fq:this.vq(t),wP:this.oq,_q:t.crossOrigin,gq:null==(s=i.metadata)?void 0:s.title};this.aq=await this.PL.Un(n),i.textTracks&&this.mq(i.textTracks),AP(this.nt)}IP(t,i,e,s){return Promise.resolve()}CP(){return Promise.resolve()}be(){this.PL.be()}JP(){}ZP(){}Aa(){return this.PL.Sq}async hr(){this.Ac=void 0,this.nq=void 0,this.rq=void 0,this.aq=void 0,await this.Aq.hr(),this.PL.Eq(),await this.PL.hr()}async kn(){await this.hr(),this.xq.kn(),this.Cq.zg(),this.PL.mn(Yit,this.Rs),this.PL.mn(hc.ma,this.Oq),await this.PL.zg(),this.gn.kn(),this.Gl.kn(),await this.Aq.kn()}Qq(t,i){this.nq||(this.nq=i,this.rq=t,this.So(new el(t)))}mq(t){for(const i of t)void 0!==i.src&&this.Aq.hV(i)}vq(t){if(!t.contentProtection)return[];const i=[];return t.contentProtection.widevine&&i.push({xS:ot,FW:t.contentProtection.widevine.licenseAcquisitionURL,Vq:[]}),t.contentProtection.playready&&i.push({xS:Jg,FW:t.contentProtection.playready.licenseAcquisitionURL,Vq:[]}),this.QTi(i,t.contentProtection.preferredKeySystems)}QTi(t,i){if(void 0===i||0===i.length)return t;const e=t=>{const e=i.indexOf(t.xS.$m);return e>=0?e:i.length};return Xn(t,(t,i)=>e(t)-e(i))}constructor(t,i,e,s){super(),this.gn=void 0,this.PL=void 0,this.aq=void 0,this.Gl=void 0,this.lq=new hu,this.Lz=void 0,this.Cq=void 0,this.xq=void 0,this.Aq=void 0,this.Ac=void 0,this.nq=void 0,this.rq=void 0,this.oq=Dn.pz,this.Oq=t=>{const i=t.lt,e=i.code,s=new as(tE(e),"Something went wrong during HbbTV playback.",i),n=ar(s);this.Qq(s,n)},this.gn=new bD(t),this.gn._n(),this.PL=Sf()?new Kit(h.createElement(at.Mk),this.gn,s):new Qit(h.createElement("object"),this.gn,s),this.PL.Y7(t),this.PL.wn(Yit,this.Rs),this.PL.wn(hc.ma,this.Oq),this.Cq=new Gt(this,this.PL),this.xq=new _s(this.Cq,!0),this.xq.wn(Ii,this.Rs),this.Aq=new eu(this.PL,i),this.Gl=new Tu([this.PL.nt,this.Aq.Z]),this.Lz=e}};oe(new class{DC(t,i,e,s,n,r,h,o){return new Jit(t,e,r,h)}Jq(t,i){var e;return!(!zs.k_||t.type!==Hi.pC&&!tu(t.type)&&!gk(t.type))&&!(Sf()&&!(null==(e=t.contentProtection)?void 0:e.useOipfDrmAgent)&&(!t.contentProtection||Vc()))}async Zq(t){return!!await VT(t,!0)}$q(){return!1}constructor(){this.tz=$.mW}});export{Io as a,f as b,r as c,zs as d,it as e,hi as f,Mc as g,Q as h,Ao as i,Yd as j,El as k,Pl as l,Il as m,Rl as n,Go as o,Ol as p,Fl as q,zd as r,gs as s,to as t,Oc as u,Xn as v,No as w,hl as x,Nu as y,hh as z,_e as A,Ct as B,Wt as C,fr as D,Wr as E,uv as F,cv as G,bg as H,Y as I,nl as J,up as K,Ne as L,gp as M,d as N,me as O,L as P,SS as Q,Gi as R,Gr as S,TS as T,Th as U,bs as V,Zk as W,dc as X,VE as Y,xh as Z,us as _,tP as $,eP as aa,Lr as ba,SP as ca,Oa as da,Na as ea,zF as fa,Uo as ga,bk as ha,ho as ia,zr as ja,Yu as ka,Bk as la,Fk as ma,Bs as na,Co as oa,rR as pa,Os as qa,Qh as ra,cD as sa,pD as ta,bD as ua,AD as va,Ps as wa,TD as xa,oc as ya,PD as za,ID as Aa,DD as Ba,ke as Ca,hO as Da,oO as Ea,aO as Fa,cO as Ga,dO as Ha,lO as Ia,FO as Ja,UO as Ka,VO as La,HO as Ma,Nr as Na,LF as Oa,OF as Pa,jF as Qa,wU as Ra,yU as Sa,bU as Ta,AU as Ua,EU as Va,xU as Wa,PU as Xa,PH as Ya,IH as Za,YK as _a,we as $a,k2 as ab,t3 as bb,A8 as cb,n9 as db,C9 as eb,M9 as fb,Mtt as gb};
//# sourceMappingURL=THEOplayer.common.esm.js.map