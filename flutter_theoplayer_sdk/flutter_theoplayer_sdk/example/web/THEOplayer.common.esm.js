/*!
 THEOplayer

 Usage of this software is limited by the THEOplayer License.

 It is prohibited to reverse engineer, decompile, translate,
 disassemble, decipher, decrypt, or otherwise attempt to
 discover the source code of this software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 OTHER DEALINGS IN THE SOFTWARE.

 For more information, visit https://www.theoplayer.com or contact
 contact @ theoplayer . com

 This product makes use of Open Source Software: video.js
 (Apache 2.0 - Copyright Brightcove, Inc.), long.js (Apache 2.0),
 nodejs-langs (MIT - Copyright Andrew Lawson), promise-polyfill
 (MIT - Copyright (c) 2014 Taylor Hakes & Forbes Lindesay),
 shaka-player (Apache 2.0 - Copyright 2016 Google LLC)
 The code of these projects has been heavily modified during
 integration.
 More information on the licenses can be found here: Apache 2.0
 (http://www.apache.org/licenses/LICENSE-2.0), MIT
 (https://opensource.org/licenses/MIT)


 THEOplayer is based on patented technology developed by
 THEO Technologies (https://www.theoplayer.com).

 Version: 8.11.0
 Created: 2025-02-12T15:53:08.493Z
 */
var b,It,f,Nl,Pt,Il,Dl,Ll,p,Ol,a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:void 0!==s?s:"undefined"!=typeof global?global:this,s=a.window,h=a.document,Rl=a.location,zl=a.navigator,u=a.setTimeout,c=a.clearTimeout,v=a.setInterval,m=a.clearInterval,g=a.Error,w=a.TypeError,_=(a.SyntaxError,a.Object),x=a.Math,C=a.parseInt,S=a.parseFloat,j=a.isNaN,T=a.Uint8Array,Bl=a.Worker,Ul=(a.WorkerGlobalScope,a.XMLHttpRequest),Ql=_.create,Fl=_.defineProperty,Yl=_.getOwnPropertyDescriptor,Vl=_.getOwnPropertyNames,Gl=_.getPrototypeOf,Wl=_.prototype.hasOwnProperty,qn=(t,i)=>()=>(i||t((i={exports:{}}).exports,i),i.exports),Wo=(t,i,e)=>(e=null!=t?Ql(Gl(t)):{},((t,i,e,s)=>{if(i&&"object"==typeof i||"function"==typeof i)for(let n of Vl(i))Wl.call(t,n)||n===e||Fl(t,n,{get:()=>i[n],enumerable:!(s=Yl(i,n))||s.enumerable});return t})(!i&&t&&t.__esModule?e:Fl(e,"default",{value:t,enumerable:!0}),t)),r=(p=()=>{"use strict";if("function"==typeof Symbol&&Symbol.iterator)b=Symbol,It=null!=(Il=Symbol.for)?Il:Symbol,f=Symbol.iterator,Nl=null!=(Dl=Symbol.dispose)?Dl:It("Symbol.dispose"),Pt=null!=(Ll=Symbol.asyncDispose)?Ll:It("Symbol.asyncDispose");else{let t=0;b=function(i){return"ul"+i+"_"+ ++t},f=(It=function(t){return"ul"+t})("Symbol.iterator"),Nl=It("Symbol.dispose"),Pt=It("Symbol.asyncDispose"),b.for=It,b.iterator=f,b.dispose=Nl,b.asyncDispose=Pt}},()=>(p&&(Ol=p(p=0)),Ol)),Zl=qn(((t,i)=>{r(),function(e,s){"object"==typeof t&&typeof i<"u"?s(t):"function"==typeof define&&define.amd?define(["exports"],s):s((e=typeof globalThis<"u"?globalThis:e||self).millicast={})}(t,(function(t){"use strict";var i,e=_.defineProperty,n=_.defineProperties,r=_.getOwnPropertyDescriptors,o=_.getOwnPropertySymbols,a=_.prototype.hasOwnProperty,c=_.prototype.propertyIsEnumerable,l=(t,i,s)=>i in t?e(t,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[i]=s,d=(t,i)=>{for(var e in i||(i={}))a.call(i,e)&&l(t,e,i[e]);if(o)for(var e of o(i))c.call(i,e)&&l(t,e,i[e]);return t},p=(t,i)=>n(t,r(i)),A=(t,i)=>{var e={};for(var s in t)a.call(t,s)&&i.indexOf(s)<0&&(e[s]=t[s]);if(null!=t&&o)for(var s of o(t))i.indexOf(s)<0&&c.call(t,s)&&(e[s]=t[s]);return e},y=typeof globalThis<"u"?globalThis:typeof s<"u"?s:typeof global<"u"?global:typeof self<"u"?self:{};function M(t){return t&&t.__esModule&&_.prototype.hasOwnProperty.call(t,"default")?t.default:t}var N,I={exports:{}};N=I,function(t){var i,e={VERSION:"1.6.1"},s={},n=function(t,i){return function(){return i.apply(t,arguments)}},r=function(){var t,i,e=arguments,s=e[0];for(i=1;i<e.length;i++)for(t in e[i])!(t in s)&&e[i].hasOwnProperty(t)&&(s[t]=e[i][t]);return s},o=function(t,i){return{value:t,name:i}};e.TRACE=o(1,"TRACE"),e.DEBUG=o(2,"DEBUG"),e.INFO=o(3,"INFO"),e.TIME=o(4,"TIME"),e.WARN=o(5,"WARN"),e.ERROR=o(8,"ERROR"),e.OFF=o(99,"OFF");var h=function(t){this.context=t,this.setLevel(t.filterLevel),this.log=this.info};h.prototype={setLevel:function(t){t&&"value"in t&&(this.context.filterLevel=t)},getLevel:function(){return this.context.filterLevel},enabledFor:function(t){var i=this.context.filterLevel;return t.value>=i.value},trace:function(){this.invoke(e.TRACE,arguments)},debug:function(){this.invoke(e.DEBUG,arguments)},info:function(){this.invoke(e.INFO,arguments)},warn:function(){this.invoke(e.WARN,arguments)},error:function(){this.invoke(e.ERROR,arguments)},time:function(t){"string"==typeof t&&t.length>0&&this.invoke(e.TIME,[t,"start"])},timeEnd:function(t){"string"==typeof t&&t.length>0&&this.invoke(e.TIME,[t,"end"])},invoke:function(t,e){i&&this.enabledFor(t)&&i(e,r({level:t},this.context))}};var a,u=new h({filterLevel:e.OFF});(a=e).enabledFor=n(u,u.enabledFor),a.trace=n(u,u.trace),a.debug=n(u,u.debug),a.time=n(u,u.time),a.timeEnd=n(u,u.timeEnd),a.info=n(u,u.info),a.warn=n(u,u.warn),a.error=n(u,u.error),a.log=a.info,e.setHandler=function(t){i=t},e.setLevel=function(t){for(var i in u.setLevel(t),s)s.hasOwnProperty(i)&&s[i].setLevel(t)},e.getLevel=function(){return u.getLevel()},e.get=function(t){return s[t]||(s[t]=new h(r({name:t},u.context)))},e.createDefaultHandler=function(t){(t=t||{}).formatter=t.formatter||function(t,i){i.name&&t.unshift("["+i.name+"]")};var i={},s=function(t,i){Function.prototype.apply.call(t,console,i)};return typeof console>"u"?function(){}:function(n,r){n=Array.prototype.slice.call(n);var o,h=console.log;r.level===e.TIME?(o=(r.name?"["+r.name+"] ":"")+n[0],"start"===n[1]?console.time?console.time(o):i[o]=(new Date).getTime():console.timeEnd?console.timeEnd(o):s(h,[o+": "+((new Date).getTime()-i[o])+"ms"])):(r.level===e.WARN&&console.warn?h=console.warn:r.level===e.ERROR&&console.error?h=console.error:r.level===e.INFO&&console.info?h=console.info:r.level===e.DEBUG&&console.debug?h=console.debug:r.level===e.TRACE&&console.trace&&(h=console.trace),t.formatter(n,r),s(h,n))}},e.useDefaults=function(t){e.setLevel(t&&t.defaultLevel||e.DEBUG),e.setHandler(e.createDefaultHandler(t))},e.setDefaults=e.useDefaults,N.exports?N.exports=e:(e.hd=t.Logger,e.noConflict=function(){return t.Logger=e.hd,e},t.Logger=e)}(y);const D=M(I.exports),E="0.3.2",k=(null==(i=null==s?void 0:s.navigator)?void 0:i.userAgent)||"No user agent available";let L="",O="",R="",P="",z="",B="",U="",Q=0;const F=[];const Y=t=>{L=""===L?t:L},V=t=>{O=""===O?t:O},G=t=>{R=""===R?t:R},W=t=>{P=""===P?t:P},Z=t=>{z=""===z?t:z},H=t=>{Q=0===Q?t:Q},X=t=>{B=t},q=t=>{U=""===U?t:U},K=t=>{60===F.length&&F.shift(),F.push(t)},J=(t,i)=>{let e;void 0===t&&(t=60),void 0===i&&(i="JSON"),e=!Number.isInteger(t)||t>60||t<=0?60:t;const s={client:"@millicast/millicast-sdk",version:E,timestamp:(new Date).toISOString(),userAgent:k,clusterId:U,accountId:L,streamName:O,subscriberId:R,connection:B,stats:F.slice(-e),connectionDurationMs:(new Date).getTime()-Q};return""!==z?s.feedId=z:""!==P&&(s.streamViewId=P),"CMCD"===i?function(t){function i(t,i){return{ts:x.round(i.timestamp)||"",ot:"audio"===t?"a":"v",bl:i.jitterBufferDelay||0,br:x.round(i.bitrateBitsPerSecond||0),pld:i.packetsLostDeltaPerSecond||0,j:i.jitter||0,mtp:i.packetRate||0,mid:i.mid||"",mimeType:i.mimeType||""}}return t.stats=t.stats.reduce(((t,e)=>{const s=0!==e.audio.inbounds.length?e.audio.inbounds.map((t=>i("audio",t))):e.audio.outbounds.map((t=>i("audio",t))),n=0!==e.video.inbounds.length?e.video.inbounds.map((t=>i("video",t))):e.video.outbounds.map((t=>i("video",t)));return t.concat([...s,...n])}),[]),t}(s):s};D.useDefaults({defaultLevel:D.TRACE});const $=["TRACE","DEBUG","INFO","WARN","ERROR"],tt=(t,i)=>{t.unshift("[".concat(i.name||"Global","] ").concat((new Date).toISOString()," - ").concat(i.level.name," -"))},it=(t,i)=>i?t.value>=ot[i].value:t.value>=rt.value,et=D.createDefaultHandler({formatter:tt});D.setHandler(((t,i)=>{((t,i)=>{t=(t=Array.prototype.slice.call(t)).map((t=>"object"==typeof t?JSON.stringify(t):t)),tt(t,i),0!==st?(nt.push(t.join(" ")),nt.length>=st&&(nt=nt.slice(-st))):nt=[]})(t,i),it(i.level,i.name)&&et(t,i);for(const{handler:e,level:s}of ht)i.level.value>=s.value&&e(t,i)}));let st=1e4,nt=[],rt=D.OFF;const ot={},ht=[],at=p(d({},D),{enabledFor:it,getHistory:()=>nt,getHistoryMaxSize:()=>st,setHistoryMaxSize:t=>{st=t},setLevel:t=>{rt=t;for(const i in ot)ot[i]=t},getLevel:()=>rt,get:t=>{ot[t]||(ot[t]=rt);const i=D.get(t);return i.setLevel=i=>{ot[t]=i},i.getLevel=()=>ot[t],i},setHandler:(t,i)=>{ht.push({handler:t,level:i})},diagnose:t=>{let i;void 0===t&&(t={});const e={statsCount:60,historySize:1e3,minLogLevel:"TRACE",statsFormat:"JSON"};"number"==typeof t?(e.statsCount=t,i=e):i=d(d({},e),t);const{statsCount:s,historySize:n,minLogLevel:r,statsFormat:o}=i,h=J(s,o),a=at.getHistory();if(!Number.isInteger(n)||n<=0)throw new g("Invalid Argument Exception : historySize must be a positive integer.");if(!$.includes(r.toUpperCase()))throw new g('Invalid Argument Exception : the minLogLevel parameter only excepts "trace", "debug", "info", "warn", and "error" as arguments.');if($.includes(r.toUpperCase())){const t=$.slice($.indexOf(r.toUpperCase())),i=a.filter((i=>t.some((t=>i.includes(t)))));h.history=i.slice(-n)}return h},JSON:"JSON",CMCD:"CMCD",VERSION:E});var ut,ct={exports:{}},lt="object"==typeof Reflect?Reflect:null,dt=lt&&"function"==typeof lt.apply?lt.apply:function(t,i,e){return Function.prototype.apply.call(t,i,e)};ut=lt&&"function"==typeof lt.ownKeys?lt.ownKeys:_.getOwnPropertySymbols?function(t){return _.getOwnPropertyNames(t).concat(_.getOwnPropertySymbols(t))}:function(t){return _.getOwnPropertyNames(t)};var ft=Number.isNaN||function(t){return t!=t};function gt(){gt.init.call(this)}ct.exports=gt,ct.exports.once=function(t,i){return new Promise((function(e,s){function n(e){t.removeListener(i,r),s(e)}function r(){"function"==typeof t.removeListener&&t.removeListener("error",n),e([].slice.call(arguments))}Tt(t,i,r,{once:!0}),"error"!==i&&function(t,i,e){"function"==typeof t.on&&Tt(t,"error",i,e)}(t,n,{once:!0})}))},gt.EventEmitter=gt,gt.prototype.Md=void 0,gt.prototype.Td=0,gt.prototype.Nd=void 0;var _t=10;function vt(t){if("function"!=typeof t)throw new w('The "listener" argument must be of type Function. Received type '+typeof t)}function wt(t){return void 0===t.Nd?gt.defaultMaxListeners:t.Nd}function mt(t,i,e,s){var n,r,o;if(vt(e),void 0===(r=t.Md)?(r=t.Md=_.create(null),t.Td=0):(void 0!==r.newListener&&(t.emit("newListener",i,e.listener?e.listener:e),r=t.Md),o=r[i]),void 0===o)o=r[i]=e,++t.Td;else if("function"==typeof o?o=r[i]=s?[e,o]:[o,e]:s?o.unshift(e):o.push(e),(n=wt(t))>0&&o.length>n&&!o.warned){o.warned=!0;var h=new g("Possible EventEmitter memory leak detected. "+o.length+" "+String(i)+" listeners added. Use emitter.setMaxListeners() to increase limit");h.name="MaxListenersExceededWarning",h.emitter=t,h.type=i,h.count=o.length,function(t){console&&console.warn&&console.warn(t)}(h)}return t}function pt(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function At(t,i,e){var s={fired:!1,wrapFn:void 0,target:t,type:i,listener:e},n=pt.bind(s);return n.listener=e,s.wrapFn=n,n}function yt(t,i,e){var s=t.Md;if(void 0===s)return[];var n=s[i];return void 0===n?[]:"function"==typeof n?e?[n.listener||n]:[n]:e?function(t){for(var i=new Array(t.length),e=0;e<i.length;++e)i[e]=t[e].listener||t[e];return i}(n):Mt(n,n.length)}function bt(t){var i=this.Md;if(void 0!==i){var e=i[t];if("function"==typeof e)return 1;if(void 0!==e)return e.length}return 0}function Mt(t,i){for(var e=new Array(i),s=0;s<i;++s)e[s]=t[s];return e}function Tt(t,i,e,s){if("function"==typeof t.on)s.once?t.once(i,e):t.on(i,e);else{if("function"!=typeof t.addEventListener)throw new w('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(i,(function n(r){s.once&&t.removeEventListener(i,n),e(r)}))}}_.defineProperty(gt,"defaultMaxListeners",{enumerable:!0,get:function(){return _t},set:function(t){if("number"!=typeof t||t<0||ft(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");_t=t}}),gt.init=function(){(void 0===this.Md||this.Md===_.getPrototypeOf(this).Md)&&(this.Md=_.create(null),this.Td=0),this.Nd=this.Nd||void 0},gt.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||ft(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this.Nd=t,this},gt.prototype.getMaxListeners=function(){return wt(this)},gt.prototype.emit=function(t){for(var i=[],e=1;e<arguments.length;e++)i.push(arguments[e]);var s="error"===t,n=this.Md;if(void 0!==n)s=s&&void 0===n.error;else if(!s)return!1;if(s){var r;if(i.length>0&&(r=i[0]),r instanceof g)throw r;var o=new g("Unhandled error."+(r?" ("+r.message+")":""));throw o.context=r,o}var h=n[t];if(void 0===h)return!1;if("function"==typeof h)dt(h,this,i);else{var a=h.length,u=Mt(h,a);for(e=0;e<a;++e)dt(u[e],this,i)}return!0},gt.prototype.addListener=function(t,i){return mt(this,t,i,!1)},gt.prototype.on=gt.prototype.addListener,gt.prototype.prependListener=function(t,i){return mt(this,t,i,!0)},gt.prototype.once=function(t,i){return vt(i),this.on(t,At(this,t,i)),this},gt.prototype.prependOnceListener=function(t,i){return vt(i),this.prependListener(t,At(this,t,i)),this},gt.prototype.removeListener=function(t,i){var e,s,n,r,o;if(vt(i),void 0===(s=this.Md))return this;if(void 0===(e=s[t]))return this;if(e===i||e.listener===i)0==--this.Td?this.Md=_.create(null):(delete s[t],s.removeListener&&this.emit("removeListener",t,e.listener||i));else if("function"!=typeof e){for(n=-1,r=e.length-1;r>=0;r--)if(e[r]===i||e[r].listener===i){o=e[r].listener,n=r;break}if(n<0)return this;0===n?e.shift():function(t,i){for(;i+1<t.length;i++)t[i]=t[i+1];t.pop()}(e,n),1===e.length&&(s[t]=e[0]),void 0!==s.removeListener&&this.emit("removeListener",t,o||i)}return this},gt.prototype.off=gt.prototype.removeListener,gt.prototype.removeAllListeners=function(t){var i,e,s;if(void 0===(e=this.Md))return this;if(void 0===e.removeListener)return 0===arguments.length?(this.Md=_.create(null),this.Td=0):void 0!==e[t]&&(0==--this.Td?this.Md=_.create(null):delete e[t]),this;if(0===arguments.length){var n,r=_.keys(e);for(s=0;s<r.length;++s)"removeListener"!==(n=r[s])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this.Md=_.create(null),this.Td=0,this}if("function"==typeof(i=e[t]))this.removeListener(t,i);else if(void 0!==i)for(s=i.length-1;s>=0;s--)this.removeListener(t,i[s]);return this},gt.prototype.listeners=function(t){return yt(this,t,!0)},gt.prototype.rawListeners=function(t){return yt(this,t,!1)},gt.listenerCount=function(t,i){return"function"==typeof t.listenerCount?t.listenerCount(i):bt.call(t,i)},gt.prototype.listenerCount=bt,gt.prototype.eventNames=function(){return this.Td>0?ut(this.Md):[]};var St=ct.exports;const Nt=M(St);var Dt={exports:{}};Dt.exports=kt,Dt.exports.filter=function(t,i){var e=new Et;return kt(t,e,i),e};var Et=St.EventEmitter;function kt(t,i,e){Array.isArray(e)||(e=[e]);var s=[];return e.forEach((function(e){var n=function(){var t=[].slice.call(arguments);t.unshift(e),i.emit.apply(i,t)};s.push(n),t.on(e,n)})),function(){e.forEach((function(i,e){t.removeListener(i,s[e])}))}}const Lt=M(Dt.exports);var xt={exports:{}};!function(t,i){var e;self,e=()=>{return t={7:t=>{var i,e="object"==typeof Reflect?Reflect:null,s=e&&"function"==typeof e.apply?e.apply:function(t,i,e){return Function.prototype.apply.call(t,i,e)};i=e&&"function"==typeof e.ownKeys?e.ownKeys:_.getOwnPropertySymbols?function(t){return _.getOwnPropertyNames(t).concat(_.getOwnPropertySymbols(t))}:function(t){return _.getOwnPropertyNames(t)};var n=Number.isNaN||function(t){return t!=t};function r(){r.init.call(this)}t.exports=r,t.exports.once=function(t,i){return new Promise((function(e,s){function n(e){t.removeListener(i,r),s(e)}function r(){"function"==typeof t.removeListener&&t.removeListener("error",n),e([].slice.call(arguments))}var o,h;m(t,i,r,{once:!0}),"error"!==i&&(h=n,"function"==typeof(o=t).on&&m(o,"error",h,{once:!0}))}))},r.EventEmitter=r,r.prototype.Md=void 0,r.prototype.Td=0,r.prototype.Nd=void 0;var o=10;function h(t){if("function"!=typeof t)throw new w('The "listener" argument must be of type Function. Received type '+typeof t)}function a(t){return void 0===t.Nd?r.defaultMaxListeners:t.Nd}function u(t,i,e,s){var n,r,o,u;if(h(e),void 0===(r=t.Md)?(r=t.Md=_.create(null),t.Td=0):(void 0!==r.newListener&&(t.emit("newListener",i,e.listener?e.listener:e),r=t.Md),o=r[i]),void 0===o)o=r[i]=e,++t.Td;else if("function"==typeof o?o=r[i]=s?[e,o]:[o,e]:s?o.unshift(e):o.push(e),(n=a(t))>0&&o.length>n&&!o.warned){o.warned=!0;var c=new g("Possible EventEmitter memory leak detected. "+o.length+" "+String(i)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=t,c.type=i,c.count=o.length,u=c,console&&console.warn&&console.warn(u)}return t}function c(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function l(t,i,e){var s={fired:!1,wrapFn:void 0,target:t,type:i,listener:e},n=c.bind(s);return n.listener=e,s.wrapFn=n,n}function d(t,i,e){var s=t.Md;if(void 0===s)return[];var n=s[i];return void 0===n?[]:"function"==typeof n?e?[n.listener||n]:[n]:e?function(t){for(var i=new Array(t.length),e=0;e<i.length;++e)i[e]=t[e].listener||t[e];return i}(n):v(n,n.length)}function f(t){var i=this.Md;if(void 0!==i){var e=i[t];if("function"==typeof e)return 1;if(void 0!==e)return e.length}return 0}function v(t,i){for(var e=new Array(i),s=0;s<i;++s)e[s]=t[s];return e}function m(t,i,e,s){if("function"==typeof t.on)s.once?t.once(i,e):t.on(i,e);else{if("function"!=typeof t.addEventListener)throw new w('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(i,(function n(r){s.once&&t.removeEventListener(i,n),e(r)}))}}_.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(t){if("number"!=typeof t||t<0||n(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");o=t}}),r.init=function(){void 0!==this.Md&&this.Md!==_.getPrototypeOf(this).Md||(this.Md=_.create(null),this.Td=0),this.Nd=this.Nd||void 0},r.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||n(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this.Nd=t,this},r.prototype.getMaxListeners=function(){return a(this)},r.prototype.emit=function(t){for(var i=[],e=1;e<arguments.length;e++)i.push(arguments[e]);var n="error"===t,r=this.Md;if(void 0!==r)n=n&&void 0===r.error;else if(!n)return!1;if(n){var o;if(i.length>0&&(o=i[0]),o instanceof g)throw o;var h=new g("Unhandled error."+(o?" ("+o.message+")":""));throw h.context=o,h}var a=r[t];if(void 0===a)return!1;if("function"==typeof a)s(a,this,i);else{var u=a.length,c=v(a,u);for(e=0;e<u;++e)s(c[e],this,i)}return!0},r.prototype.addListener=function(t,i){return u(this,t,i,!1)},r.prototype.on=r.prototype.addListener,r.prototype.prependListener=function(t,i){return u(this,t,i,!0)},r.prototype.once=function(t,i){return h(i),this.on(t,l(this,t,i)),this},r.prototype.prependOnceListener=function(t,i){return h(i),this.prependListener(t,l(this,t,i)),this},r.prototype.removeListener=function(t,i){var e,s,n,r,o;if(h(i),void 0===(s=this.Md))return this;if(void 0===(e=s[t]))return this;if(e===i||e.listener===i)0==--this.Td?this.Md=_.create(null):(delete s[t],s.removeListener&&this.emit("removeListener",t,e.listener||i));else if("function"!=typeof e){for(n=-1,r=e.length-1;r>=0;r--)if(e[r]===i||e[r].listener===i){o=e[r].listener,n=r;break}if(n<0)return this;0===n?e.shift():function(t,i){for(;i+1<t.length;i++)t[i]=t[i+1];t.pop()}(e,n),1===e.length&&(s[t]=e[0]),void 0!==s.removeListener&&this.emit("removeListener",t,o||i)}return this},r.prototype.off=r.prototype.removeListener,r.prototype.removeAllListeners=function(t){var i,e,s;if(void 0===(e=this.Md))return this;if(void 0===e.removeListener)return 0===arguments.length?(this.Md=_.create(null),this.Td=0):void 0!==e[t]&&(0==--this.Td?this.Md=_.create(null):delete e[t]),this;if(0===arguments.length){var n,r=_.keys(e);for(s=0;s<r.length;++s)"removeListener"!==(n=r[s])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this.Md=_.create(null),this.Td=0,this}if("function"==typeof(i=e[t]))this.removeListener(t,i);else if(void 0!==i)for(s=i.length-1;s>=0;s--)this.removeListener(t,i[s]);return this},r.prototype.listeners=function(t){return d(this,t,!0)},r.prototype.rawListeners=function(t){return d(this,t,!1)},r.listenerCount=function(t,i){return"function"==typeof t.listenerCount?t.listenerCount(i):f.call(t,i)},r.prototype.listenerCount=f,r.prototype.eventNames=function(){return this.Td>0?i(this.Md):[]}},586:function(t,i,e){var s,n;!function(r){var o,h={VERSION:"1.6.1"},a={},u=function(t,i){return function(){return i.apply(t,arguments)}},c=function(){var t,i,e=arguments,s=e[0];for(i=1;i<e.length;i++)for(t in e[i])!(t in s)&&e[i].hasOwnProperty(t)&&(s[t]=e[i][t]);return s},l=function(t,i){return{value:t,name:i}};h.TRACE=l(1,"TRACE"),h.DEBUG=l(2,"DEBUG"),h.INFO=l(3,"INFO"),h.TIME=l(4,"TIME"),h.WARN=l(5,"WARN"),h.ERROR=l(8,"ERROR"),h.OFF=l(99,"OFF");var d=function(t){this.context=t,this.setLevel(t.filterLevel),this.log=this.info};d.prototype={setLevel:function(t){t&&"value"in t&&(this.context.filterLevel=t)},getLevel:function(){return this.context.filterLevel},enabledFor:function(t){var i=this.context.filterLevel;return t.value>=i.value},trace:function(){this.invoke(h.TRACE,arguments)},debug:function(){this.invoke(h.DEBUG,arguments)},info:function(){this.invoke(h.INFO,arguments)},warn:function(){this.invoke(h.WARN,arguments)},error:function(){this.invoke(h.ERROR,arguments)},time:function(t){"string"==typeof t&&t.length>0&&this.invoke(h.TIME,[t,"start"])},timeEnd:function(t){"string"==typeof t&&t.length>0&&this.invoke(h.TIME,[t,"end"])},invoke:function(t,i){o&&this.enabledFor(t)&&o(i,c({level:t},this.context))}};var f,g=new d({filterLevel:h.OFF});(f=h).enabledFor=u(g,g.enabledFor),f.trace=u(g,g.trace),f.debug=u(g,g.debug),f.time=u(g,g.time),f.timeEnd=u(g,g.timeEnd),f.info=u(g,g.info),f.warn=u(g,g.warn),f.error=u(g,g.error),f.log=f.info,h.setHandler=function(t){o=t},h.setLevel=function(t){for(var i in g.setLevel(t),a)a.hasOwnProperty(i)&&a[i].setLevel(t)},h.getLevel=function(){return g.getLevel()},h.get=function(t){return a[t]||(a[t]=new d(c({name:t},g.context)))},h.createDefaultHandler=function(t){(t=t||{}).formatter=t.formatter||function(t,i){i.name&&t.unshift("["+i.name+"]")};var i={},e=function(t,i){Function.prototype.apply.call(t,console,i)};return typeof console>"u"?function(){}:function(s,n){s=Array.prototype.slice.call(s);var r,o=console.log;n.level===h.TIME?(r=(n.name?"["+n.name+"] ":"")+s[0],"start"===s[1]?console.time?console.time(r):i[r]=(new Date).getTime():console.timeEnd?console.timeEnd(r):e(o,[r+": "+((new Date).getTime()-i[r])+"ms"])):(n.level===h.WARN&&console.warn?o=console.warn:n.level===h.ERROR&&console.error?o=console.error:n.level===h.INFO&&console.info?o=console.info:n.level===h.DEBUG&&console.debug?o=console.debug:n.level===h.TRACE&&console.trace&&(o=console.trace),t.formatter(s,n),e(o,s))}},h.useDefaults=function(t){h.setLevel(t&&t.defaultLevel||h.DEBUG),h.setHandler(h.createDefaultHandler(t))},h.setDefaults=h.useDefaults,void 0===(n="function"==typeof(s=h)?s.call(i,e,i,t):s)||(t.exports=n)}()},156:function(t,i,e){var s=this&&this.Id||(_.create?function(t,i,e,s){void 0===s&&(s=e);var n=_.getOwnPropertyDescriptor(i,e);n&&!("get"in n?!i.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return i[e]}}),_.defineProperty(t,s,n)}:function(t,i,e,s){void 0===s&&(s=e),t[s]=i[e]}),n=this&&this.Dd||function(t,i){for(var e in t)"default"===e||_.prototype.hasOwnProperty.call(i,e)||s(i,t,e)},r=this&&this.Ed||function(t){return t&&t.__esModule?t:{default:t}};_.defineProperty(i,"__esModule",{value:!0}),i.Logger=void 0;var o=e(586);_.defineProperty(i,"Logger",{enumerable:!0,get:function(){return r(o).default}}),n(e(284),i),n(e(280),i),n(e(738),i),n(e(767),i)},738:(t,i)=>{var e,s;_.defineProperty(i,"__esModule",{value:!0}),i.QualityLimitationReason=void 0,(s=e||(i.QualityLimitationReason=e={}))[s.none=0]="none",s[s.cpu=1]="cpu",s[s.bandwidth=2]="bandwidth",s[s.other=3]="other"},280:(t,i)=>{_.defineProperty(i,"__esModule",{value:!0})},767:(t,i)=>{_.defineProperty(i,"__esModule",{value:!0})},185:(t,i)=>{_.defineProperty(i,"__esModule",{value:!0}),i.calculatePacketsLostRatio=i.calculateRate=i.getMediaKind=void 0,i.getMediaKind=t=>{let i=t.kind||t.mediaType;return["audio","video"].includes(i)||"inbound-rtp"!==t.type||(i=t.id.toLocaleLowerCase().includes("video")?"video":"audio"),i},i.calculateRate=(t,i,e,s)=>e&&s?(i-s)/((t-e)/1e3):0,i.calculatePacketsLostRatio=(t,i,e,s)=>0==i?0:(t-(null!=e?e:0))/(i-(null!=s?s:0))},284:function(t,i,e){var s,n,r,o,h,a,u,c,l,d,f,g,p,A,y,b,M=this&&this.Ld||function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,h)}a((s=s.apply(t,i||[])).next())}))},T=this&&this.jd||function(t,i,e,s,n){if("m"===s)throw new w("Private method is not writable");if("a"===s&&!n)throw new w("Private accessor was defined without a setter");if("function"==typeof i?t!==i||!n:!i.has(t))throw new w("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(t,e):n?n.value=e:i.set(t,e),e},S=this&&this.Od||function(t,i,e,s){if("a"===e&&!s)throw new w("Private accessor was defined without a getter");if("function"==typeof i?t!==i||!s:!i.has(t))throw new w("Cannot read private member from an object whose class did not declare it");return"m"===e?s:"a"===e?s.call(t):s?s.value:i.get(t)},N=this&&this.Ed||function(t){return t&&t.__esModule?t:{default:t}};_.defineProperty(i,"__esModule",{value:!0}),i.WebRTCStats=void 0;const I=e(7),D=N(e(586)),E=e(738),k=e(185);class L extends I.EventEmitter{constructor(t){super(),s.add(this),n.set(this,void 0),r.set(this,void 0),o.set(this,void 0),h.set(this,null),a.set(this,void 0),u.set(this,null),this.start=()=>{S(this,a,"f").info("WebRTC statistics collection is starting..."),T(this,u,null,"f"),T(this,h,v(S(this,c,"f"),S(this,r,"f")),"f")},this.stop=()=>{S(this,h,"f")&&(m(S(this,h,"f")),T(this,h,null,"f"),S(this,a,"f").info("WebRTC statistics collection has stopped."))},c.set(this,(()=>M(this,void 0,void 0,(function*(){let t,i;try{S(this,a,"f").trace("Requesting WebRTC statistics..."),t=yield S(this,n,"f").call(this),i=(new Date).toISOString()}catch(t){return S(this,a,"f").error("Problem collecting the WebRTC statistics.",t),void this.emit("error","Problem collecting the WebRTC statistics - ".concat(t))}const e=Array.from(t.values()),r={timestamp:i,input:{audio:[],video:[]},output:{audio:[],video:[]}};S(this,o,"f")&&(r.rawStats=t);for(let i=0;i<_.keys(e).length;i++){const n=e[i];switch(n.type){case"outbound-rtp":const i=n,e=(0,k.getMediaKind)(i);"audio"===e?yield S(this,s,"m",f).call(this,t,i,r):"video"===e&&(yield S(this,s,"m",g).call(this,t,i,r));break;case"inbound-rtp":const o=n;let h=(0,k.getMediaKind)(o);"audio"===h?yield S(this,s,"m",A).call(this,t,o,r):"video"===h&&(yield S(this,s,"m",y).call(this,t,o,r));break;case"candidate-pair":const a=n;a.nominated&&S(this,s,"m",b).call(this,a,r)}}T(this,u,r,"f"),this.emit("stats",r)})))),T(this,a,D.default.get("WebRTCStats"),"f"),T(this,n,t.getStats,"f"),T(this,r,t.getStatsInterval||1e3,"f"),T(this,o,!!t.includeRawStats,"f")}}i.WebRTCStats=L,n=new WeakMap,r=new WeakMap,o=new WeakMap,h=new WeakMap,a=new WeakMap,u=new WeakMap,c=new WeakMap,s=new WeakSet,l=function(t,i){if(i){const e=t.get(i);if(e)return{mimeType:e.mimeType}}return{}},d=function(t,i,e){return M(this,void 0,void 0,(function*(){var n,r,o,h;const a=(0,k.calculateRate)(i.timestamp,i.bytesSent,null==e?void 0:e.timestamp,null==e?void 0:e.totalBytesSent),u=(0,k.calculateRate)(i.timestamp,i.packetsSent,null==e?void 0:e.timestamp,null==e?void 0:e.totalPacketsSent),c=S(this,s,"m",l).call(this,t,i.codecId);return _.assign({id:i.id,timestamp:i.timestamp,mid:i.mid,totalBytesSent:i.bytesSent,bytesSentDelta:i.bytesSent-(null!==(n=null==e?void 0:e.totalBytesSent)&&void 0!==n?n:0),totalPacketsSent:i.packetsSent,packetsSentDelta:i.packetsSent-(null!==(r=null==e?void 0:e.totalPacketsSent)&&void 0!==r?r:0),bitrate:a,packetRate:u,targetBitrate:i.targetBitrate,retransmittedPacketsSent:i.retransmittedPacketsSent,retransmittedPacketsSentDelta:i.retransmittedPacketsSent-(null!==(o=null==e?void 0:e.retransmittedPacketsSent)&&void 0!==o?o:0),retransmittedBytesSent:i.retransmittedBytesSent,retransmittedBytesSentDelta:i.retransmittedBytesSent-(null!==(h=null==e?void 0:e.retransmittedBytesSent)&&void 0!==h?h:0)},c)}))},f=function(t,i,e){return M(this,void 0,void 0,(function*(){var n;const r=null===(n=S(this,u,"f"))||void 0===n?void 0:n.output.audio.find((t=>t.id===i.id));if(r&&i.timestamp-r.timestamp<=0)return;const o=yield S(this,s,"m",d).call(this,t,i,r),h=_.assign({},o);e.output.audio.push(h)}))},g=function(t,i,e){return M(this,void 0,void 0,(function*(){var n;const r=null===(n=S(this,u,"f"))||void 0===n?void 0:n.output.video.find((t=>t.id===i.id));if(r&&i.timestamp-r.timestamp<=0)return;const o=yield S(this,s,"m",d).call(this,t,i,r);let h=E.QualityLimitationReason.none;i.qualityLimitationReason&&(h=i.qualityLimitationReason);const a=_.assign(_.assign({},o),{frameWidth:i.frameWidth,frameHeight:i.frameHeight,framesPerSecond:i.framesPerSecond,framesSent:i.framesSent,qualityLimitationReason:h,qualityLimitationDurations:i.qualityLimitationDurations});e.output.video.push(a)}))},p=function(t,i,e){return M(this,void 0,void 0,(function*(){var n,r;const o=(0,k.calculateRate)(i.timestamp,i.bytesReceived,null==e?void 0:e.timestamp,null==e?void 0:e.totalBytesReceived),h=(0,k.calculateRate)(i.timestamp,i.packetsReceived,null==e?void 0:e.timestamp,null==e?void 0:e.totalPacketsReceived),a=(0,k.calculatePacketsLostRatio)(i.packetsReceived,i.packetsLost,null==e?void 0:e.totalPacketsReceived,null==e?void 0:e.totalPacketsLost),u=(null!==(n=i.packetsLost)&&void 0!==n?n:0)-(null!==(r=null==e?void 0:e.totalPacketsLost)&&void 0!==r?r:0),c=S(this,s,"m",l).call(this,t,i.codecId);return _.assign({id:i.id,timestamp:i.timestamp,mid:i.mid,trackIdentifier:i.trackIdentifier,jitter:i.jitter,jitterBufferDelay:i.jitterBufferDelay,jitterBufferEmittedCount:i.jitterBufferEmittedCount,totalBytesReceived:i.bytesReceived,totalPacketsReceived:i.packetsReceived,totalPacketsLost:i.packetsLost,bitrate:o,packetRate:h,packetLossRatio:a,packetLossDelta:u},c)}))},A=function(t,i,e){return M(this,void 0,void 0,(function*(){var n;const r=null===(n=S(this,u,"f"))||void 0===n?void 0:n.input.audio.find((t=>t.id===i.id));if(r&&i.timestamp-r.timestamp<=0)return;const o=yield S(this,s,"m",p).call(this,t,i,r);e.input.audio.push(o)}))},y=function(t,i,e){return M(this,void 0,void 0,(function*(){var n;const r=null===(n=S(this,u,"f"))||void 0===n?void 0:n.input.video.find((t=>t.id===i.id));if(r&&i.timestamp-r.timestamp<=0)return;const o=yield S(this,s,"m",p).call(this,t,i,r),h=_.assign(_.assign({},o),{keyFramesDecoded:i.keyFramesDecoded,frameHeight:i.frameHeight,frameWidth:i.frameWidth,framesDecoded:i.framesDecoded,framesDropped:i.framesDropped,framesPerSecond:i.framesPerSecond,framesReceived:i.framesReceived});e.input.video.push(h)}))},b=function(t,i){i.totalRoundTripTime=t.totalRoundTripTime,i.currentRoundTripTime=t.currentRoundTripTime,i.responsesReceived=t.responsesReceived,i.availableOutgoingBitrate=t.availableOutgoingBitrate,i.availableIncomingBitrate=t.availableIncomingBitrate}}},i={},function e(s){var n=i[s];if(void 0!==n)return n.exports;var r=i[s]={exports:{}};return t[s].call(r.exports,r,r.exports,e),r.exports}(156);var t,i},t.exports=e()}(xt);var Ct=xt.exports;const jt=at.get("PeerConnectionStats"),Ot="stats";class Rt extends Nt{init(t){if(this.initialized)return void jt.warn("PeerConnectionStats.init() has already been called. Automatic initialization occurs when the PeerConnectionStats object is constructed.");jt.info("Initializing peer connection stats");const i=this.peer;try{this.collection=new Ct.WebRTCStats({getStatsInterval:t,getStats:()=>i.getStats(),includeRawStats:!0}),this.collection.on("stats",(t=>{const i=(t=>{const i=t,{input:e,output:s,rawStats:n}=i,r=A(i,["input","output","rawStats"]);return p(d({},r),{audio:{inbounds:t.input.audio.map((t=>{var i=t,{packetLossRatio:e,packetLossDelta:s,bitrate:n}=i,r=A(i,["packetLossRatio","packetLossDelta","bitrate"]);return d({packetsLostRatioPerSecond:e,packetsLostDeltaPerSecond:s,bitrateBitsPerSecond:8*n,bitrate:n},r)})),outbounds:t.output.audio.map((t=>{var i=t,{packetLossRatio:e,packetLossDelta:s,bitrate:n}=i,r=A(i,["packetLossRatio","packetLossDelta","bitrate"]);return d({packetsLostRatioPerSecond:e,packetsLostDeltaPerSecond:s,bitrateBitsPerSecond:8*n,bitrate:n},r)}))},video:{inbounds:t.input.video.map((t=>{var i=t,{packetLossRatio:e,packetLossDelta:s,bitrate:n}=i,r=A(i,["packetLossRatio","packetLossDelta","bitrate"]);return d({packetsLostRatioPerSecond:e,packetsLostDeltaPerSecond:s,bitrateBitsPerSecond:8*n,bitrate:n},r)})),outbounds:t.output.video.map((t=>{var i=t,{packetLossRatio:e,packetLossDelta:s,bitrate:n}=i,r=A(i,["packetLossRatio","packetLossDelta","bitrate"]);return d({packetsLostRatioPerSecond:e,packetsLostDeltaPerSecond:s,bitrateBitsPerSecond:8*n,bitrate:n},r)}))},raw:t.rawStats})})(t);K(i),this.emit(Ot,i)})),this.collection.start(),this.initialized=!0}catch(t){jt.error(t)}}parseStats(t){return jt.warn("The parseStats method is deprecated and will be removed in future releases."),null}stop(){jt.info("Stopping peer connection stats"),this.collection.stop()}constructor(t,i={statsIntervalMs:1e3,autoInitStats:!0}){super(),this.peer=t,this.collection=null,this.initialized=!1,i.autoInitStats&&this.init(i.statsIntervalMs)}}var Pt={},zt={},Bt={},Ut={exports:{}},Qt=Ut.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(t){return t.encoding?"rtpmap:%d %s/%s/%s":t.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(t){return null!=t.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(t){return null!=t.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(t){return"extmap:%d"+(t.direction?"/%s":"%v")+(t["encrypt-uri"]?" %s":"%v")+" %s"+(t.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(t){return null!=t.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(t){var i="candidate:%s %d %s %d %s %d typ %s";return i+=null!=t.raddr?" raddr %s rport %d":"%v%v",i+=null!=t.tcptype?" tcptype %s":"%v",null!=t.generation&&(i+=" generation %d"),i+=null!=t["network-id"]?" network-id %d":"%v",i+=null!=t["network-cost"]?" network-cost %d":"%v"}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(t){var i="ssrc:%d";return null!=t.attribute&&(i+=" %s",null!=t.value&&(i+=":%s")),i}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(t){return null!=t.maxMessageSize?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(t){return t.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(t){return"imageattr:%s %s %s"+(t.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(t){return"simulcast:%s %s"+(t.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(t){return"ts-refclk:%s"+(null!=t.clksrcExt?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(t){var i="mediaclk:";return i+=null!=t.id?"id=%s %s":"%v%s",i+=null!=t.mediaClockValue?"=%s":"",i+=null!=t.rateNumerator?" rate=%s":"",i+=null!=t.rateDenominator?"/%s":""}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};_.keys(Qt).forEach((function(t){Qt[t].forEach((function(t){t.reg||(t.reg=/(.*)/),t.format||(t.format="%s")}))}));var Ft=Ut.exports;!function(t){var i=function(t){return String(Number(t))===t?Number(t):t},e=function(t,e,s){var n=t.name&&t.names;t.push&&!e[t.push]?e[t.push]=[]:n&&!e[t.name]&&(e[t.name]={});var r=t.push?{}:n?e[t.name]:e;(function(t,e,s,n){if(n&&!s)e[n]=i(t[1]);else for(var r=0;r<s.length;r+=1)null!=t[r+1]&&(e[s[r]]=i(t[r+1]))})(s.match(t.reg),r,t.names,t.name),t.push&&e[t.push].push(r)},s=Ft,n=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(t){var i={},r=[],o=i;return t.split(/(\r\n|\r|\n)/).filter(n).forEach((function(t){var i=t[0],n=t.slice(2);"m"===i&&(r.push({rtp:[],fmtp:[]}),o=r[r.length-1]);for(var h=0;h<(s[i]||[]).length;h+=1){var a=s[i][h];if(a.reg.test(n))return e(a,o,n)}})),i.media=r,i};var r=function(t,e){var s=e.split(/=(.+)/,2);return 2===s.length?t[s[0]]=i(s[1]):1===s.length&&e.length>1&&(t[s[0]]=void 0),t};t.parseParams=function(t){return t.split(/;\s?/).reduce(r,{})},t.parseFmtpConfig=t.parseParams,t.parsePayloads=function(t){return t.toString().split(" ").map(Number)},t.parseRemoteCandidates=function(t){for(var e=[],s=t.split(" ").map(i),n=0;n<s.length;n+=3)e.push({component:s[n],ip:s[n+1],port:s[n+2]});return e},t.parseImageAttributes=function(t){return t.split(" ").map((function(t){return t.substring(1,t.length-1).split(",").reduce(r,{})}))},t.parseSimulcastStreamList=function(t){return t.split(";").map((function(t){return t.split(",").map((function(t){var e,s=!1;return"~"!==t[0]?e=i(t):(e=i(t.substring(1,t.length)),s=!0),{scid:e,paused:s}}))}))}}(Bt);var Yt=Ft,Vt=/%[sdv%]/g,Gt=function(t){var i=1,e=arguments,s=e.length;return t.replace(Vt,(function(t){if(i>=s)return t;var n=e[i];switch(i+=1,t){case"%%":return"%";case"%s":return String(n);case"%d":return Number(n);case"%v":return""}}))},Wt=function(t,i,e){var s=[t+"="+(i.format instanceof Function?i.format(i.push?e:e[i.name]):i.format)];if(i.names)for(var n=0;n<i.names.length;n+=1){var r=i.names[n];i.name?s.push(e[i.name][r]):s.push(e[i.names[n]])}else s.push(e[i.name]);return Gt.apply(null,s)},Zt=["v","o","s","i","u","e","p","c","b","t","r","z","a"],Ht=["i","c","b","a"],Xt=Bt,qt=function(t,i){i=i||{},null==t.version&&(t.version=0),null==t.name&&(t.name=" "),t.media.forEach((function(t){null==t.payloads&&(t.payloads="")}));var e=i.outerOrder||Zt,s=i.innerOrder||Ht,n=[];return e.forEach((function(i){Yt[i].forEach((function(e){e.name in t&&null!=t[e.name]?n.push(Wt(i,e,t)):e.push in t&&null!=t[e.push]&&t[e.push].forEach((function(t){n.push(Wt(i,e,t))}))}))})),t.media.forEach((function(t){n.push(Wt("m",Yt.m[0],t)),s.forEach((function(i){Yt[i].forEach((function(e){e.name in t&&null!=t[e.name]?n.push(Wt(i,e,t)):e.push in t&&null!=t[e.push]&&t[e.push].forEach((function(t){n.push(Wt(i,e,t))}))}))}))})),n.join("\r\n")+"\r\n"};zt.write=qt,zt.parse=Xt.parse,zt.parseParams=Xt.parseParams,zt.parseFmtpConfig=Xt.parseFmtpConfig,zt.parsePayloads=Xt.parsePayloads,zt.parseRemoteCandidates=Xt.parseRemoteCandidates,zt.parseImageAttributes=Xt.parseImageAttributes,zt.parseSimulcastStreamList=Xt.parseSimulcastStreamList;let Kt=class t{equals(t){return t.foundation===this.foundation&&t.componentId===this.componentId&&t.transport===this.transport&&t.priority===this.priority&&t.address===this.address&&t.port===this.port&&t.type===this.type&&t.relAddr===this.relAddr&&t.relPort===this.relPort}clone(){return new t(this.foundation,this.componentId,this.transport,this.priority,this.address,this.port,this.type,this.relAddr,this.relPort)}plain(){const t={foundation:this.foundation,componentId:this.componentId,transport:this.transport,priority:this.priority,address:this.address,port:this.port,type:this.type};return this.relAddr&&(t.relAddr=this.relAddr),this.relPort&&(t.relPort=this.relPort),t}getFoundation(){return this.foundation}getComponentId(){return this.componentId}getTransport(){return this.transport}getPriority(){return this.priority}getAddress(){return this.address}getPort(){return this.port}getType(){return this.type}getRelAddr(){return this.relAddr}getRelPort(){return this.relPort}constructor(t,i,e,s,n,r,o,h,a){this.foundation=t,this.componentId=i,this.transport=e,this.priority=s,this.address=n,this.port=r,this.type=o,this.relAddr=h,this.relPort=a}};Kt.expand=function(t){return"CandidateInfo"===t.constructor.name?t:new Kt(t.foundation,t.componentId,t.transport,t.priority,t.address,t.port,t.type,t.relAddr,t.relPort)},Kt.clone=function(t){return"CandidateInfo"===t.constructor.name?t.clone():Kt.expand(t)};var Jt=Kt;let $t=class t{clone(){return new t(this.id,this.params)}plain(){return this.params.length?{id:this.id,params:this.params}:{id:this.id}}getId(){return this.id}getParams(){return this.params}constructor(t,i){this.id=t,this.params=i||[]}};$t.expand=function(t){return"RTCPFeedbackInfo"===t.constructor.name?t:new $t(t.id,t.params)},$t.clone=function(t){return"RTCPFeedbackInfo"===t.constructor.name?t.clone():$t.expand(t)};var ti=$t;const ii=ti;let ei=class t{clone(){const i=new t(this.codec,this.type,this.params);this.hasRTX()&&i.setRTX(this.getRTX());for(const t of this.rtcpfbs)i.addRTCPFeedback(t.clone());return this.hasChannels()&&i.setChannels(this.getChannels()),i}plain(){const t={codec:this.codec,type:this.type};this.rtx&&(t.rtx=this.rtx),this.channels&&(t.channels=this.channels),_.keys(this.params).length&&(t.params=this.params);for(const i of this.rtcpfbs)t.rtcpfbs||(t.rtcpfbs=[]),t.rtcpfbs.push(i.plain());return t}setRTX(t){this.rtx=t}getType(){return this.type}setType(t){this.type=t}getCodec(){return this.codec}getParams(){return this.params}addParams(t){for(const i in t)this.params[i]=t[i]}addParam(t,i){this.params[t]=i}hasParam(t){return _.hasOwnProperty.call(this.params,t)}getParam(t,i){if(void 0===i&&(i=void 0),this.hasParam(t))return this.params[t];if(void 0===i)throw new g("param ".concat(t," not found and no default value provided"));return""+i}hasRTX(){return this.rtx}getRTX(){return this.rtx}hasChannels(){return this.channels}getChannels(){return this.channels}setChannels(t){this.channels=t}addRTCPFeedback(t){this.rtcpfbs.add(t)}getRTCPFeedbacks(){return this.rtcpfbs}constructor(t,i,e){this.codec=t,this.type=i,this.params={},this.rtcpfbs=new Set,e&&this.addParams(e)}};ei.expand=function(t){if("CodecInfo"===t.constructor.name)return t;const i=new ei(t.codec,t.type,t.params);t.rtx&&i.setRTX(t.rtx),t.channels&&i.setChannels(t.channels);for(const e of t.rtcpfbs||[]){const t=ii.expand(e);i.addRTCPFeedback(t)}return i},ei.clone=function(t){return"CodecInfo"===t.constructor.name?t.clone():ei.expand(t)},ei.MapFromNames=function(t,i,e){var s;const n=new Map;let r=96;for(const o of t){let t;const h=o.split(";"),a=h.shift().toLowerCase().trim();t="pcmu"===a?0:"pcma"===a?8:++r;const u=new ei(a,t);"opus"===a?u.setChannels(2):"multiopus"===a&&u.setChannels(6),i&&"ulpfec"!==a&&"flexfec-03"!==a&&"red"!==a&&u.setRTX(++r);for(const t of e||[])u.addRTCPFeedback(new ii(t.id,t.params));for(const t of h){let i=t.split("=");u.addParam(i[0].trim(),null===(s=i[1])||void 0===s?void 0:s.trim())}n.set(t,u)}return n};var si=ei;var ni=function t(){var i=this;if(!(this instanceof t))return new(Function.prototype.bind.apply(t,[null].concat(Array.prototype.slice.call(arguments))));Array.from(arguments).forEach((function(t){i[t]=It("Rd"+t)}))};const ri=ni("ACTIVE","PASSIVE","ACTPASS","INACTIVE");ri.byValue=function(t){switch(t){case ri.ACTIVE:case ri.PASSIVE:case ri.ACTPASS:case ri.INACTIVE:return t}return ri[t.toUpperCase()]},ri.toString=function(t){switch(t){case ri.ACTIVE:return"active";case ri.PASSIVE:return"passive";case ri.ACTPASS:return"actpass";case ri.INACTIVE:return"inactive"}},ri.reverse=function(t,i){switch(t){case ri.ACTIVE:return ri.PASSIVE;case ri.PASSIVE:return ri.ACTIVE;case ri.ACTPASS:return i?ri.ACTIVE:ri.PASSIVE;case ri.INACTIVE:return ri.INACTIVE}};var oi=ri;const hi=oi;let ai=class t{clone(){return new t(this.setup,this.hash,this.fingerprint)}plain(){return{setup:hi.toString(this.setup),hash:this.hash,fingerprint:this.fingerprint}}getFingerprint(){return this.fingerprint}getHash(){return this.hash}getSetup(){return this.setup}setSetup(t){this.setup=t}constructor(t,i,e){this.setup=t,this.hash=i,this.fingerprint=e}};ai.expand=function(t){return"DTLSInfo"===t.constructor.name?t:new ai(t.setup?hi.byValue(t.setup):hi.ACTPASS,t.hash,t.fingerprint)},ai.clone=function(t){return"DTLSInfo"===t.constructor.name?t.clone():ai.expand(t)};var ui=ai;let ci=class t{clone(){return new t(this.tag,this.suite,this.keyParams,this.sessionParams)}plain(){return{tag:this.tag,suite:this.suite,keyParams:this.keyParams,sessionParams:this.sessionParams}}getSessionParams(){return this.sessionParams}getKeyParams(){return this.keyParams}getSuite(){return this.suite}getTag(){return this.tag}constructor(t,i,e,s){this.tag=t,this.suite=i,this.keyParams=e,this.sessionParams=s}};ci.expand=function(t){return"CryptoInfo"===t.constructor.name?t:new ci(t.tag,t.suite,t.keyParams,t.sessionParams)},ci.clone=function(t){return"CryptoInfo"===t.constructor.name?t.clone():ci.expand(t)};for(var li=ci,di={exports:{}},fi={exports:{}},gi={},_i={byteLength:function(t){var i=yi(t),e=i[0],s=i[1];return 3*(e+s)/4-s},toByteArray:function(t){var i,e,s=yi(t),n=s[0],r=s[1],o=new mi(function(t,i,e){return 3*(i+e)/4-e}(0,n,r)),h=0,a=r>0?n-4:n;for(e=0;e<a;e+=4)i=wi[t.charCodeAt(e)]<<18|wi[t.charCodeAt(e+1)]<<12|wi[t.charCodeAt(e+2)]<<6|wi[t.charCodeAt(e+3)],o[h++]=i>>16&255,o[h++]=i>>8&255,o[h++]=255&i;return 2===r&&(i=wi[t.charCodeAt(e)]<<2|wi[t.charCodeAt(e+1)]>>4,o[h++]=255&i),1===r&&(i=wi[t.charCodeAt(e)]<<10|wi[t.charCodeAt(e+1)]<<4|wi[t.charCodeAt(e+2)]>>2,o[h++]=i>>8&255,o[h++]=255&i),o},fromByteArray:function(t){for(var i,e=t.length,s=e%3,n=[],r=16383,o=0,h=e-s;o<h;o+=r)n.push(Mi(t,o,o+r>h?h:o+r));return 1===s?(i=t[e-1],n.push(vi[i>>2]+vi[i<<4&63]+"==")):2===s&&(i=(t[e-2]<<8)+t[e-1],n.push(vi[i>>10]+vi[i>>4&63]+vi[i<<2&63]+"=")),n.join("")}},vi=[],wi=[],mi=typeof T<"u"?T:Array,pi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ai=0;Ai<64;++Ai)vi[Ai]=pi[Ai],wi[pi.charCodeAt(Ai)]=Ai;function yi(t){var i=t.length;if(i%4>0)throw new g("Invalid string. Length must be a multiple of 4");var e=t.indexOf("=");return-1===e&&(e=i),[e,e===i?0:4-e%4]}function bi(t){return vi[t>>18&63]+vi[t>>12&63]+vi[t>>6&63]+vi[63&t]}function Mi(t,i,e){for(var s,n=[],r=i;r<e;r+=3)s=(t[r]<<16&16711680)+(t[r+1]<<8&65280)+(255&t[r+2]),n.push(bi(s));return n.join("")}wi[45]=62,wi[95]=63;var Ti={read:function(t,i,e,s,n){var r,o,h=8*n-s-1,a=(1<<h)-1,u=a>>1,c=-7,l=e?n-1:0,d=e?-1:1,f=t[i+l];for(l+=d,r=f&(1<<-c)-1,f>>=-c,c+=h;c>0;r=256*r+t[i+l],l+=d,c-=8);for(o=r&(1<<-c)-1,r>>=-c,c+=s;c>0;o=256*o+t[i+l],l+=d,c-=8);if(0===r)r=1-u;else{if(r===a)return o?NaN:1/0*(f?-1:1);o+=x.pow(2,s),r-=u}return(f?-1:1)*o*x.pow(2,r-s)},write:function(t,i,e,s,n,r){var o,h,a,u=8*r-n-1,c=(1<<u)-1,l=c>>1,d=23===n?x.pow(2,-24)-x.pow(2,-77):0,f=s?0:r-1,g=s?1:-1,_=i<0||0===i&&1/i<0?1:0;for(i=x.abs(i),j(i)||i===1/0?(h=j(i)?1:0,o=c):(o=x.floor(x.log(i)/x.LN2),i*(a=x.pow(2,-o))<1&&(o--,a*=2),(i+=o+l>=1?d/a:d*x.pow(2,1-l))*a>=2&&(o++,a/=2),o+l>=c?(h=0,o=c):o+l>=1?(h=(i*a-1)*x.pow(2,n),o+=l):(h=i*x.pow(2,l-1)*x.pow(2,n),o=0));n>=8;t[e+f]=255&h,f+=g,h/=256,n-=8);for(o=o<<n|h,u+=n;u>0;t[e+f]=255&o,f+=g,o/=256,u-=8);t[e+f-g]|=128*_}};(function(t){const i=_i,e=Ti,s="function"==typeof b&&"function"==typeof It?It("nodejs.util.inspect.custom"):null;t.Buffer=o,t.SlowBuffer=function(t){return+t!=t&&(t=0),o.alloc(+t)},t.INSPECT_MAX_BYTES=50;const n=2147483647;function r(t){if(t>n)throw new RangeError('The value "'+t+'" is invalid for option "size"');const i=new T(t);return _.setPrototypeOf(i,o.prototype),i}function o(t,i,e){if("number"==typeof t){if("string"==typeof i)throw new w('The "string" argument must be of type string. Received type number');return u(t)}return h(t,i,e)}function h(t,i,e){if("string"==typeof t)return function(t,i){if(("string"!=typeof i||""===i)&&(i="utf8"),!o.isEncoding(i))throw new w("Unknown encoding: "+i);const e=0|f(t,i);let s=r(e);const n=s.write(t,i);return n!==e&&(s=s.slice(0,n)),s}(t,i);if(ArrayBuffer.isView(t))return function(t){if(tt(t,T)){const i=new T(t);return l(i.buffer,i.byteOffset,i.byteLength)}return c(t)}(t);if(null==t)throw new w("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(tt(t,ArrayBuffer)||t&&tt(t.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(tt(t,SharedArrayBuffer)||t&&tt(t.buffer,SharedArrayBuffer)))return l(t,i,e);if("number"==typeof t)throw new w('The "value" argument must not be of type number. Received type number');const s=t.valueOf&&t.valueOf();if(null!=s&&s!==t)return o.from(s,i,e);const n=function(t){if(o.isBuffer(t)){const i=0|d(t.length),e=r(i);return 0===e.length||t.copy(e,0,0,i),e}if(void 0!==t.length)return"number"!=typeof t.length||it(t.length)?r(0):c(t);if("Buffer"===t.type&&Array.isArray(t.data))return c(t.data)}(t);if(n)return n;if(typeof b<"u"&&null!=b.toPrimitive&&"function"==typeof t[b.toPrimitive])return o.from(t[b.toPrimitive]("string"),i,e);throw new w("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function a(t){if("number"!=typeof t)throw new w('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function u(t){return a(t),r(t<0?0:0|d(t))}function c(t){const i=t.length<0?0:0|d(t.length),e=r(i);for(let s=0;s<i;s+=1)e[s]=255&t[s];return e}function l(t,i,e){if(i<0||t.byteLength<i)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<i+(e||0))throw new RangeError('"length" is outside of buffer bounds');let s;return s=void 0===i&&void 0===e?new T(t):void 0===e?new T(t,i):new T(t,i,e),_.setPrototypeOf(s,o.prototype),s}function d(t){if(t>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return 0|t}function f(t,i){if(o.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||tt(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new w('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const e=t.length,s=arguments.length>2&&!0===arguments[2];if(!s&&0===e)return 0;let n=!1;for(;;)switch(i){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":return K(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*e;case"hex":return e>>>1;case"base64":return J(t).length;default:if(n)return s?-1:K(t).length;i=(""+i).toLowerCase(),n=!0}}function v(t,i,e){let s=!1;if((void 0===i||i<0)&&(i=0),i>this.length||((void 0===e||e>this.length)&&(e=this.length),e<=0)||(e>>>=0)<=(i>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return O(this,i,e);case"utf8":case"utf-8":return E(this,i,e);case"ascii":return L(this,i,e);case"latin1":case"binary":return j(this,i,e);case"base64":return D(this,i,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,i,e);default:if(s)throw new w("Unknown encoding: "+t);t=(t+"").toLowerCase(),s=!0}}function m(t,i,e){const s=t[i];t[i]=t[e],t[e]=s}function p(t,i,e,s,n){if(0===t.length)return-1;if("string"==typeof e?(s=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),it(e=+e)&&(e=n?0:t.length-1),e<0&&(e=t.length+e),e>=t.length){if(n)return-1;e=t.length-1}else if(e<0){if(!n)return-1;e=0}if("string"==typeof i&&(i=o.from(i,s)),o.isBuffer(i))return 0===i.length?-1:A(t,i,e,s,n);if("number"==typeof i)return i&=255,"function"==typeof T.prototype.indexOf?n?T.prototype.indexOf.call(t,i,e):T.prototype.lastIndexOf.call(t,i,e):A(t,[i],e,s,n);throw new w("val must be string, number or Buffer")}function A(t,i,e,s,n){let r,o=1,h=t.length,a=i.length;if(void 0!==s&&("ucs2"===(s=String(s).toLowerCase())||"ucs-2"===s||"utf16le"===s||"utf-16le"===s)){if(t.length<2||i.length<2)return-1;o=2,h/=2,a/=2,e/=2}function u(t,i){return 1===o?t[i]:t.readUInt16BE(i*o)}if(n){let s=-1;for(r=e;r<h;r++)if(u(t,r)===u(i,-1===s?0:r-s)){if(-1===s&&(s=r),r-s+1===a)return s*o}else-1!==s&&(r-=r-s),s=-1}else for(e+a>h&&(e=h-a),r=e;r>=0;r--){let e=!0;for(let s=0;s<a;s++)if(u(t,r+s)!==u(i,s)){e=!1;break}if(e)return r}return-1}function y(t,i,e,s){e=Number(e)||0;const n=t.length-e;s?(s=Number(s))>n&&(s=n):s=n;const r=i.length;let o;for(s>r/2&&(s=r/2),o=0;o<s;++o){const s=C(i.substr(2*o,2),16);if(it(s))return o;t[e+o]=s}return o}function M(t,i,e,s){return $(K(i,t.length-e),t,e,s)}function S(t,i,e,s){return $(function(t){const i=[];for(let e=0;e<t.length;++e)i.push(255&t.charCodeAt(e));return i}(i),t,e,s)}function N(t,i,e,s){return $(J(i),t,e,s)}function I(t,i,e,s){return $(function(t,i){let e,s,n;const r=[];for(let o=0;o<t.length&&!((i-=2)<0);++o)e=t.charCodeAt(o),s=e>>8,n=e%256,r.push(n),r.push(s);return r}(i,t.length-e),t,e,s)}function D(t,e,s){return 0===e&&s===t.length?i.fromByteArray(t):i.fromByteArray(t.slice(e,s))}function E(t,i,e){e=x.min(t.length,e);const s=[];let n=i;for(;n<e;){const i=t[n];let r=null,o=i>239?4:i>223?3:i>191?2:1;if(n+o<=e){let e,s,h,a;switch(o){case 1:i<128&&(r=i);break;case 2:e=t[n+1],128==(192&e)&&(a=(31&i)<<6|63&e,a>127&&(r=a));break;case 3:e=t[n+1],s=t[n+2],128==(192&e)&&128==(192&s)&&(a=(15&i)<<12|(63&e)<<6|63&s,a>2047&&(a<55296||a>57343)&&(r=a));break;case 4:e=t[n+1],s=t[n+2],h=t[n+3],128==(192&e)&&128==(192&s)&&128==(192&h)&&(a=(15&i)<<18|(63&e)<<12|(63&s)<<6|63&h,a>65535&&a<1114112&&(r=a))}}null===r?(r=65533,o=1):r>65535&&(r-=65536,s.push(r>>>10&1023|55296),r=56320|1023&r),s.push(r),n+=o}return function(t){const i=t.length;if(i<=k)return String.fromCharCode.apply(String,t);let e="",s=0;for(;s<i;)e+=String.fromCharCode.apply(String,t.slice(s,s+=k));return e}(s)}t.kMaxLength=n,o.TYPED_ARRAY_SUPPORT=function(){try{const t=new T(1),i={foo:function(){return 42}};return _.setPrototypeOf(i,T.prototype),_.setPrototypeOf(t,i),42===t.foo()}catch(t){return!1}}(),!o.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),_.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),_.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}}),o.poolSize=8192,o.from=function(t,i,e){return h(t,i,e)},_.setPrototypeOf(o.prototype,T.prototype),_.setPrototypeOf(o,T),o.alloc=function(t,i,e){return function(t,i,e){return a(t),t<=0?r(t):void 0!==i?"string"==typeof e?r(t).fill(i,e):r(t).fill(i):r(t)}(t,i,e)},o.allocUnsafe=function(t){return u(t)},o.allocUnsafeSlow=function(t){return u(t)},o.isBuffer=function(t){return null!=t&&!0===t.Pd&&t!==o.prototype},o.compare=function(t,i){if(tt(t,T)&&(t=o.from(t,t.offset,t.byteLength)),tt(i,T)&&(i=o.from(i,i.offset,i.byteLength)),!o.isBuffer(t)||!o.isBuffer(i))throw new w('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===i)return 0;let e=t.length,s=i.length;for(let n=0,r=x.min(e,s);n<r;++n)if(t[n]!==i[n]){e=t[n],s=i[n];break}return e<s?-1:s<e?1:0},o.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(t,i){if(!Array.isArray(t))throw new w('"list" argument must be an Array of Buffers');if(0===t.length)return o.alloc(0);let e;if(void 0===i)for(i=0,e=0;e<t.length;++e)i+=t[e].length;const s=o.allocUnsafe(i);let n=0;for(e=0;e<t.length;++e){let i=t[e];if(tt(i,T))n+i.length>s.length?(o.isBuffer(i)||(i=o.from(i)),i.copy(s,n)):T.prototype.set.call(s,i,n);else{if(!o.isBuffer(i))throw new w('"list" argument must be an Array of Buffers');i.copy(s,n)}n+=i.length}return s},o.byteLength=f,o.prototype.Pd=!0,o.prototype.swap16=function(){const t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let i=0;i<t;i+=2)m(this,i,i+1);return this},o.prototype.swap32=function(){const t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let i=0;i<t;i+=4)m(this,i,i+3),m(this,i+1,i+2);return this},o.prototype.swap64=function(){const t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let i=0;i<t;i+=8)m(this,i,i+7),m(this,i+1,i+6),m(this,i+2,i+5),m(this,i+3,i+4);return this},o.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?E(this,0,t):v.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(t){if(!o.isBuffer(t))throw new w("Argument must be a Buffer");return this===t||0===o.compare(this,t)},o.prototype.inspect=function(){let i="";const e=t.INSPECT_MAX_BYTES;return i=this.toString("hex",0,e).replace(/(.{2})/g,"$1 ").trim(),this.length>e&&(i+=" ... "),"<Buffer "+i+">"},s&&(o.prototype[s]=o.prototype.inspect),o.prototype.compare=function(t,i,e,s,n){if(tt(t,T)&&(t=o.from(t,t.offset,t.byteLength)),!o.isBuffer(t))throw new w('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===i&&(i=0),void 0===e&&(e=t?t.length:0),void 0===s&&(s=0),void 0===n&&(n=this.length),i<0||e>t.length||s<0||n>this.length)throw new RangeError("out of range index");if(s>=n&&i>=e)return 0;if(s>=n)return-1;if(i>=e)return 1;if(this===t)return 0;let r=(n>>>=0)-(s>>>=0),h=(e>>>=0)-(i>>>=0);const a=x.min(r,h),u=this.slice(s,n),c=t.slice(i,e);for(let t=0;t<a;++t)if(u[t]!==c[t]){r=u[t],h=c[t];break}return r<h?-1:h<r?1:0},o.prototype.includes=function(t,i,e){return-1!==this.indexOf(t,i,e)},o.prototype.indexOf=function(t,i,e){return p(this,t,i,e,!0)},o.prototype.lastIndexOf=function(t,i,e){return p(this,t,i,e,!1)},o.prototype.write=function(t,i,e,s){if(void 0===i)s="utf8",e=this.length,i=0;else if(void 0===e&&"string"==typeof i)s=i,e=this.length,i=0;else{if(!isFinite(i))throw new g("Buffer.write(string, encoding, offset[, length]) is no longer supported");i>>>=0,isFinite(e)?(e>>>=0,void 0===s&&(s="utf8")):(s=e,e=void 0)}const n=this.length-i;if((void 0===e||e>n)&&(e=n),t.length>0&&(e<0||i<0)||i>this.length)throw new RangeError("Attempt to write outside buffer bounds");s||(s="utf8");let r=!1;for(;;)switch(s){case"hex":return y(this,t,i,e);case"utf8":case"utf-8":return M(this,t,i,e);case"ascii":case"latin1":case"binary":return S(this,t,i,e);case"base64":return N(this,t,i,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,t,i,e);default:if(r)throw new w("Unknown encoding: "+s);s=(""+s).toLowerCase(),r=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this.zd||this,0)}};const k=4096;function L(t,i,e){let s="";e=x.min(t.length,e);for(let n=i;n<e;++n)s+=String.fromCharCode(127&t[n]);return s}function j(t,i,e){let s="";e=x.min(t.length,e);for(let n=i;n<e;++n)s+=String.fromCharCode(t[n]);return s}function O(t,i,e){const s=t.length;(!i||i<0)&&(i=0),(!e||e<0||e>s)&&(e=s);let n="";for(let s=i;s<e;++s)n+=et[t[s]];return n}function R(t,i,e){const s=t.slice(i,e);let n="";for(let t=0;t<s.length-1;t+=2)n+=String.fromCharCode(s[t]+256*s[t+1]);return n}function P(t,i,e){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+i>e)throw new RangeError("Trying to access beyond buffer length")}function z(t,i,e,s,n,r){if(!o.isBuffer(t))throw new w('"buffer" argument must be a Buffer instance');if(i>n||i<r)throw new RangeError('"value" argument is out of bounds');if(e+s>t.length)throw new RangeError("Index out of range")}function B(t,i,e,s,n){Z(i,s,n,t,e,7);let r=Number(i&BigInt(4294967295));t[e++]=r,r>>=8,t[e++]=r,r>>=8,t[e++]=r,r>>=8,t[e++]=r;let o=Number(i>>BigInt(32)&BigInt(4294967295));return t[e++]=o,o>>=8,t[e++]=o,o>>=8,t[e++]=o,o>>=8,t[e++]=o,e}function U(t,i,e,s,n){Z(i,s,n,t,e,7);let r=Number(i&BigInt(4294967295));t[e+7]=r,r>>=8,t[e+6]=r,r>>=8,t[e+5]=r,r>>=8,t[e+4]=r;let o=Number(i>>BigInt(32)&BigInt(4294967295));return t[e+3]=o,o>>=8,t[e+2]=o,o>>=8,t[e+1]=o,o>>=8,t[e]=o,e+8}function Q(t,i,e,s,n,r){if(e+s>t.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function F(t,i,s,n,r){return i=+i,s>>>=0,r||Q(t,0,s,4),e.write(t,i,s,n,23,4),s+4}function Y(t,i,s,n,r){return i=+i,s>>>=0,r||Q(t,0,s,8),e.write(t,i,s,n,52,8),s+8}o.prototype.slice=function(t,i){const e=this.length;(t=~~t)<0?(t+=e)<0&&(t=0):t>e&&(t=e),(i=void 0===i?e:~~i)<0?(i+=e)<0&&(i=0):i>e&&(i=e),i<t&&(i=t);const s=this.subarray(t,i);return _.setPrototypeOf(s,o.prototype),s},o.prototype.readUintLE=o.prototype.readUIntLE=function(t,i,e){t>>>=0,i>>>=0,e||P(t,i,this.length);let s=this[t],n=1,r=0;for(;++r<i&&(n*=256);)s+=this[t+r]*n;return s},o.prototype.readUintBE=o.prototype.readUIntBE=function(t,i,e){t>>>=0,i>>>=0,e||P(t,i,this.length);let s=this[t+--i],n=1;for(;i>0&&(n*=256);)s+=this[t+--i]*n;return s},o.prototype.readUint8=o.prototype.readUInt8=function(t,i){return t>>>=0,i||P(t,1,this.length),this[t]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(t,i){return t>>>=0,i||P(t,2,this.length),this[t]|this[t+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(t,i){return t>>>=0,i||P(t,2,this.length),this[t]<<8|this[t+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(t,i){return t>>>=0,i||P(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(t,i){return t>>>=0,i||P(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},o.prototype.readBigUInt64LE=st((function(t){H(t>>>=0,"offset");const i=this[t],e=this[t+7];(void 0===i||void 0===e)&&X(t,this.length-8);const s=i+256*this[++t]+65536*this[++t]+this[++t]*2**24,n=this[++t]+256*this[++t]+65536*this[++t]+e*2**24;return BigInt(s)+(BigInt(n)<<BigInt(32))})),o.prototype.readBigUInt64BE=st((function(t){H(t>>>=0,"offset");const i=this[t],e=this[t+7];(void 0===i||void 0===e)&&X(t,this.length-8);const s=i*2**24+65536*this[++t]+256*this[++t]+this[++t],n=this[++t]*2**24+65536*this[++t]+256*this[++t]+e;return(BigInt(s)<<BigInt(32))+BigInt(n)})),o.prototype.readIntLE=function(t,i,e){t>>>=0,i>>>=0,e||P(t,i,this.length);let s=this[t],n=1,r=0;for(;++r<i&&(n*=256);)s+=this[t+r]*n;return n*=128,s>=n&&(s-=x.pow(2,8*i)),s},o.prototype.readIntBE=function(t,i,e){t>>>=0,i>>>=0,e||P(t,i,this.length);let s=i,n=1,r=this[t+--s];for(;s>0&&(n*=256);)r+=this[t+--s]*n;return n*=128,r>=n&&(r-=x.pow(2,8*i)),r},o.prototype.readInt8=function(t,i){return t>>>=0,i||P(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},o.prototype.readInt16LE=function(t,i){t>>>=0,i||P(t,2,this.length);const e=this[t]|this[t+1]<<8;return 32768&e?4294901760|e:e},o.prototype.readInt16BE=function(t,i){t>>>=0,i||P(t,2,this.length);const e=this[t+1]|this[t]<<8;return 32768&e?4294901760|e:e},o.prototype.readInt32LE=function(t,i){return t>>>=0,i||P(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},o.prototype.readInt32BE=function(t,i){return t>>>=0,i||P(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},o.prototype.readBigInt64LE=st((function(t){H(t>>>=0,"offset");const i=this[t],e=this[t+7];(void 0===i||void 0===e)&&X(t,this.length-8);const s=this[t+4]+256*this[t+5]+65536*this[t+6]+(e<<24);return(BigInt(s)<<BigInt(32))+BigInt(i+256*this[++t]+65536*this[++t]+this[++t]*2**24)})),o.prototype.readBigInt64BE=st((function(t){H(t>>>=0,"offset");const i=this[t],e=this[t+7];(void 0===i||void 0===e)&&X(t,this.length-8);const s=(i<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(s)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+e)})),o.prototype.readFloatLE=function(t,i){return t>>>=0,i||P(t,4,this.length),e.read(this,t,!0,23,4)},o.prototype.readFloatBE=function(t,i){return t>>>=0,i||P(t,4,this.length),e.read(this,t,!1,23,4)},o.prototype.readDoubleLE=function(t,i){return t>>>=0,i||P(t,8,this.length),e.read(this,t,!0,52,8)},o.prototype.readDoubleBE=function(t,i){return t>>>=0,i||P(t,8,this.length),e.read(this,t,!1,52,8)},o.prototype.writeUintLE=o.prototype.writeUIntLE=function(t,i,e,s){if(t=+t,i>>>=0,e>>>=0,!s){z(this,t,i,e,x.pow(2,8*e)-1,0)}let n=1,r=0;for(this[i]=255&t;++r<e&&(n*=256);)this[i+r]=t/n&255;return i+e},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(t,i,e,s){if(t=+t,i>>>=0,e>>>=0,!s){z(this,t,i,e,x.pow(2,8*e)-1,0)}let n=e-1,r=1;for(this[i+n]=255&t;--n>=0&&(r*=256);)this[i+n]=t/r&255;return i+e},o.prototype.writeUint8=o.prototype.writeUInt8=function(t,i,e){return t=+t,i>>>=0,e||z(this,t,i,1,255,0),this[i]=255&t,i+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(t,i,e){return t=+t,i>>>=0,e||z(this,t,i,2,65535,0),this[i]=255&t,this[i+1]=t>>>8,i+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(t,i,e){return t=+t,i>>>=0,e||z(this,t,i,2,65535,0),this[i]=t>>>8,this[i+1]=255&t,i+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(t,i,e){return t=+t,i>>>=0,e||z(this,t,i,4,4294967295,0),this[i+3]=t>>>24,this[i+2]=t>>>16,this[i+1]=t>>>8,this[i]=255&t,i+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(t,i,e){return t=+t,i>>>=0,e||z(this,t,i,4,4294967295,0),this[i]=t>>>24,this[i+1]=t>>>16,this[i+2]=t>>>8,this[i+3]=255&t,i+4},o.prototype.writeBigUInt64LE=st((function(t,i){return void 0===i&&(i=0),B(this,t,i,BigInt(0),BigInt("0xffffffffffffffff"))})),o.prototype.writeBigUInt64BE=st((function(t,i){return void 0===i&&(i=0),U(this,t,i,BigInt(0),BigInt("0xffffffffffffffff"))})),o.prototype.writeIntLE=function(t,i,e,s){if(t=+t,i>>>=0,!s){const s=x.pow(2,8*e-1);z(this,t,i,e,s-1,-s)}let n=0,r=1,o=0;for(this[i]=255&t;++n<e&&(r*=256);)t<0&&0===o&&0!==this[i+n-1]&&(o=1),this[i+n]=(t/r>>0)-o&255;return i+e},o.prototype.writeIntBE=function(t,i,e,s){if(t=+t,i>>>=0,!s){const s=x.pow(2,8*e-1);z(this,t,i,e,s-1,-s)}let n=e-1,r=1,o=0;for(this[i+n]=255&t;--n>=0&&(r*=256);)t<0&&0===o&&0!==this[i+n+1]&&(o=1),this[i+n]=(t/r>>0)-o&255;return i+e},o.prototype.writeInt8=function(t,i,e){return t=+t,i>>>=0,e||z(this,t,i,1,127,-128),t<0&&(t=255+t+1),this[i]=255&t,i+1},o.prototype.writeInt16LE=function(t,i,e){return t=+t,i>>>=0,e||z(this,t,i,2,32767,-32768),this[i]=255&t,this[i+1]=t>>>8,i+2},o.prototype.writeInt16BE=function(t,i,e){return t=+t,i>>>=0,e||z(this,t,i,2,32767,-32768),this[i]=t>>>8,this[i+1]=255&t,i+2},o.prototype.writeInt32LE=function(t,i,e){return t=+t,i>>>=0,e||z(this,t,i,4,2147483647,-2147483648),this[i]=255&t,this[i+1]=t>>>8,this[i+2]=t>>>16,this[i+3]=t>>>24,i+4},o.prototype.writeInt32BE=function(t,i,e){return t=+t,i>>>=0,e||z(this,t,i,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[i]=t>>>24,this[i+1]=t>>>16,this[i+2]=t>>>8,this[i+3]=255&t,i+4},o.prototype.writeBigInt64LE=st((function(t,i){return void 0===i&&(i=0),B(this,t,i,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),o.prototype.writeBigInt64BE=st((function(t,i){return void 0===i&&(i=0),U(this,t,i,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),o.prototype.writeFloatLE=function(t,i,e){return F(this,t,i,!0,e)},o.prototype.writeFloatBE=function(t,i,e){return F(this,t,i,!1,e)},o.prototype.writeDoubleLE=function(t,i,e){return Y(this,t,i,!0,e)},o.prototype.writeDoubleBE=function(t,i,e){return Y(this,t,i,!1,e)},o.prototype.copy=function(t,i,e,s){if(!o.isBuffer(t))throw new w("argument should be a Buffer");if(e||(e=0),!s&&0!==s&&(s=this.length),i>=t.length&&(i=t.length),i||(i=0),s>0&&s<e&&(s=e),s===e||0===t.length||0===this.length)return 0;if(i<0)throw new RangeError("targetStart out of bounds");if(e<0||e>=this.length)throw new RangeError("Index out of range");if(s<0)throw new RangeError("sourceEnd out of bounds");s>this.length&&(s=this.length),t.length-i<s-e&&(s=t.length-i+e);const n=s-e;return this===t&&"function"==typeof T.prototype.copyWithin?this.copyWithin(i,e,s):T.prototype.set.call(t,this.subarray(e,s),i),n},o.prototype.fill=function(t,i,e,s){if("string"==typeof t){if("string"==typeof i?(s=i,i=0,e=this.length):"string"==typeof e&&(s=e,e=this.length),void 0!==s&&"string"!=typeof s)throw new w("encoding must be a string");if("string"==typeof s&&!o.isEncoding(s))throw new w("Unknown encoding: "+s);if(1===t.length){const i=t.charCodeAt(0);("utf8"===s&&i<128||"latin1"===s)&&(t=i)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(i<0||this.length<i||this.length<e)throw new RangeError("Out of range index");if(e<=i)return this;let n;if(i>>>=0,e=void 0===e?this.length:e>>>0,t||(t=0),"number"==typeof t)for(n=i;n<e;++n)this[n]=t;else{const r=o.isBuffer(t)?t:o.from(t,s),h=r.length;if(0===h)throw new w('The value "'+t+'" is invalid for argument "value"');for(n=0;n<e-i;++n)this[n+i]=r[n%h]}return this};const V={};function G(t,i,e){V[t]=class extends e{get code(){return t}set code(t){_.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return"".concat(this.name," [").concat(t,"]: ").concat(this.message)}constructor(){super(),_.defineProperty(this,"message",{value:i.apply(this,arguments),writable:!0,configurable:!0}),this.name="".concat(this.name," [").concat(t,"]"),this.stack,delete this.name}}}function W(t){let i="",e=t.length;const s="-"===t[0]?1:0;for(;e>=s+4;e-=3)i="_".concat(t.slice(e-3,e)).concat(i);return"".concat(t.slice(0,e)).concat(i)}function Z(t,i,e,s,n,r){if(t>e||t<i){const e="bigint"==typeof i?"n":"";let s;throw s=0===i||i===BigInt(0)?">= 0".concat(e," and < 2").concat(e," ** ").concat(8*(r+1)).concat(e):">= -(2".concat(e," ** ").concat(8*(r+1)-1).concat(e,") and < 2 ** ")+"".concat(8*(r+1)-1).concat(e),new V.ERR_OUT_OF_RANGE("value",s,t)}!function(t,i,e){H(i,"offset"),(void 0===t[i]||void 0===t[i+e])&&X(i,t.length-(e+1))}(s,n,r)}function H(t,i){if("number"!=typeof t)throw new V.ERR_INVALID_ARG_TYPE(i,"number",t)}function X(t,i,e){throw x.floor(t)!==t?(H(t,e),new V.ERR_OUT_OF_RANGE("offset","an integer",t)):i<0?new V.ERR_BUFFER_OUT_OF_BOUNDS:new V.ERR_OUT_OF_RANGE("offset",">= 0 and <= ".concat(i),t)}G("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?"".concat(t," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"}),RangeError),G("ERR_INVALID_ARG_TYPE",(function(t,i){return'The "'.concat(t,'" argument must be of type number. Received type ').concat(typeof i)}),w),G("ERR_OUT_OF_RANGE",(function(t,i,e){let s='The value of "'.concat(t,'" is out of range.'),n=e;return Number.isInteger(e)&&x.abs(e)>2**32?n=W(String(e)):"bigint"==typeof e&&(n=String(e),(e>BigInt(2)**BigInt(32)||e<-(BigInt(2)**BigInt(32)))&&(n=W(n)),n+="n"),s+=" It must be ".concat(i,". Received ").concat(n),s}),RangeError);const q=/[^+/0-9A-Za-z-_]/g;function K(t,i){let e;i=i||1/0;const s=t.length;let n=null;const r=[];for(let o=0;o<s;++o){if(e=t.charCodeAt(o),e>55295&&e<57344){if(!n){if(e>56319){(i-=3)>-1&&r.push(239,191,189);continue}if(o+1===s){(i-=3)>-1&&r.push(239,191,189);continue}n=e;continue}if(e<56320){(i-=3)>-1&&r.push(239,191,189),n=e;continue}e=65536+(n-55296<<10|e-56320)}else n&&(i-=3)>-1&&r.push(239,191,189);if(n=null,e<128){if((i-=1)<0)break;r.push(e)}else if(e<2048){if((i-=2)<0)break;r.push(e>>6|192,63&e|128)}else if(e<65536){if((i-=3)<0)break;r.push(e>>12|224,e>>6&63|128,63&e|128)}else{if(!(e<1114112))throw new g("Invalid code point");if((i-=4)<0)break;r.push(e>>18|240,e>>12&63|128,e>>6&63|128,63&e|128)}}return r}function J(t){return i.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(q,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function $(t,i,e,s){let n;for(n=0;n<s&&!(n+e>=i.length||n>=t.length);++n)i[n+e]=t[n];return n}function tt(t,i){return t instanceof i||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===i.name}function it(t){return t!=t}const et=function(){const t="0123456789abcdef",i=new Array(256);for(let e=0;e<16;++e){const s=16*e;for(let n=0;n<16;++n)i[s+n]=t[e]+t[n]}return i}();function st(t){return typeof BigInt>"u"?nt:t}function nt(){throw new g("BigInt not supported")}})(gi),function(t,i){var e=gi,s=e.Buffer;function n(t,i){for(var e in t)i[e]=t[e]}function r(t,i,e){return s(t,i,e)}s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?t.exports=e:(n(e,i),i.Buffer=r),r.prototype=_.create(s.prototype),n(s,r),r.from=function(t,i,e){if("number"==typeof t)throw new w("Argument must not be a number");return s(t,i,e)},r.alloc=function(t,i,e){if("number"!=typeof t)throw new w("Argument must be a number");var n=s(t);return void 0!==i?"string"==typeof e?n.fill(i,e):n.fill(i):n.fill(0),n},r.allocUnsafe=function(t){if("number"!=typeof t)throw new w("Argument must be a number");return s(t)},r.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new w("Argument must be a number");return e.SlowBuffer(t)}}(fi,fi.exports);var Si=65536;var Ni=fi.exports.Buffer,Ii=y.crypto||y.msCrypto;Ii&&Ii.getRandomValues?di.exports=function(t,i){if(t>4294967295)throw new RangeError("requested too many random bytes");var e=Ni.allocUnsafe(t);if(t>0)if(t>Si)for(var s=0;s<t;s+=Si)Ii.getRandomValues(e.slice(s,s+Si));else Ii.getRandomValues(e);return"function"==typeof i?process.nextTick((function(){i(null,e)})):e}:di.exports=function(){throw new g("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")};const Di=di.exports;let Ei=class t{clone(){const i=new t(this.ufrag,this.pwd);return i.setLite(this.lite),i.setEndOfCandidates(this.endOfCandidates),i}plain(){const t={ufrag:this.ufrag,pwd:this.pwd};return this.lite&&(t.lite=this.lite),this.endOfCandidates&&(t.endOfCandidates=this.endOfCandidates),t}getUfrag(){return this.ufrag}getPwd(){return this.pwd}isLite(){return this.lite}setLite(t){this.lite=t}isEndOfCandidates(){return this.endOfCandidates}setEndOfCandidates(t){this.endOfCandidates=t}constructor(t,i){this.ufrag=t,this.pwd=i,this.lite=!1,this.endOfCandidates=!1}};Ei.generate=function(t){const i=new Ei,e=Di(8),s=Di(24);return i.ufrag=e.toString("hex"),i.pwd=s.toString("hex"),i.lite=t,i},Ei.expand=function(t){if("ICEInfo"===t.constructor.name)return t;const i=new Ei(t.ufrag,t.pwd);return i.setLite(t.lite),i.setEndOfCandidates(t.endOfCandidates),i},Ei.clone=function(t){return"ICEInfo"===t.constructor.name?t.clone():Ei.expand(t)};var ki=Ei;const Li=ni("SEND","RECV");Li.byValue=function(t){return Li[t.toUpperCase()]},Li.toString=function(t){switch(t){case Li.SEND:return"send";case Li.RECV:return"recv"}},Li.reverse=function(t){switch(t){case Li.SEND:return Li.RECV;case Li.RECV:return Li.SEND}};var xi=Li;const Ci=xi;let ji=class t{clone(){var i=new t(this.id,this.direction);return i.setFormats(this.formats),i.setParams(this.params),i}plain(){var t={id:this.id,direction:Ci.toString(this.direction)};for(var[i,e]of(this.formats&&(t.formats=this.formats),this.params.entries()))t.params||(t.params={}),t.params[i]=e;return t}getId(){return this.id}getDirection(){return this.direction}setDirection(t){this.direction=t}getFormats(){return this.formats}setFormats(t){this.formats=[];for(let i=0;i<t.length;++i)this.formats.push(C(t[i]))}getParams(){return this.params}setParams(t){this.params=new Map(t)}addParam(t,i){this.params.set(t,i)}constructor(t,i){this.id=t,this.direction=i,this.formats=[],this.params=new Map}};ji.expand=function(t){if("RIDInfo"===t.constructor.name)return t;const i=new ji(t.id,Ci.byValue(t.direction));for(const[e,s]of _.entries(t.params||{}))i.addParam(e,s);return t.formats&&i.setFormats(t.formats),i},ji.clone=function(t){return"RIDInfo"===t.constructor.name?t.clone():ji.expand(t)};var Oi=ji;let Ri=class t{clone(){return new t(this.id,this.paused)}plain(){return{id:this.id,paused:this.paused}}isPaused(){return this.paused}getId(){return this.id}constructor(t,i){this.paused=i,this.id=t}};Ri.expand=function(t){return"SimulcastStreamInfo"===t.constructor.name?t:new Ri(t.id,t.paused)},Ri.clone=function(t){return"SimulcastStreamInfo"===t.constructor.name?t.clone():Ri.expand(t)};var Pi=Ri;const zi=Pi,Bi=xi;let Ui=class t{clone(){const i=new t;for(const t of this.send)i.addSimulcastAlternativeStreams(Bi.SEND,t.map((t=>t.clone())));for(const t of this.recv)i.addSimulcastAlternativeStreams(Bi.RECV,t.map((t=>t.clone())));return i}plain(){const t={send:[],recv:[]};for(const i of this.send)t.send.push(i.map((t=>t.plain())));for(const i of this.recv)t.recv.push(i.map((t=>t.plain())));return t}addSimulcastAlternativeStreams(t,i){return t===Bi.SEND?this.send.push(i):this.recv.push(i)}addSimulcastStream(t,i){return t===Bi.SEND?this.send.push([i]):this.recv.push([i])}getSimulcastStreams(t){return t===Bi.SEND?this.send:this.recv}constructor(){this.send=[],this.recv=[]}};Ui.expand=function(t){if("SimulcastInfo"===t.constructor.name)return t;const i=new Ui;for(const e of t.send||[])i.addSimulcastAlternativeStreams(Bi.SEND,e.map(zi.expand));for(const e of t.recv||[])i.addSimulcastAlternativeStreams(Bi.RECV,e.map(zi.expand));return i},Ui.clone=function(t){return"SimulcastInfo"===t.constructor.name?t.clone():Ui.expand(t)};var Qi=Ui;const Fi=ni("SENDRECV","SENDONLY","RECVONLY","INACTIVE");Fi.byValue=function(t){return Fi[t.toUpperCase()]},Fi.toString=function(t){switch(t){case Fi.SENDRECV:return"sendrecv";case Fi.SENDONLY:return"sendonly";case Fi.RECVONLY:return"recvonly";case Fi.INACTIVE:return"inactive"}},Fi.reverse=function(t){switch(t){case Fi.SENDRECV:return Fi.SENDRECV;case Fi.SENDONLY:return Fi.RECVONLY;case Fi.RECVONLY:return Fi.SENDONLY;case Fi.INACTIVE:return Fi.INACTIVE}};var Yi=Fi;let Vi=class t{clone(){return new t(this.port,this.maxMessageSize)}plain(){return{port:this.port,maxMessageSize:this.maxMessageSize}}getPort(){return this.port}getMaxMessageSize(){return this.maxMessageSize}constructor(t,i){this.port=t,this.maxMessageSize=i}};Vi.expand=function(t){return"DataChannelInfo"===t.constructor.name?t:new Vi(t.port,t.maxMessageSize)},Vi.clone=function(t){return"DataChannelInfo"===t.constructor.name?t.clone():Vi.expand(t)};var Gi=Vi;const Wi=si,Zi=Oi,Hi=Qi,Xi=Yi,qi=xi,Ki=Gi;let Ji=class t{clone(){const i=new t(this.id,this.type);i.setDirection(this.direction),i.setBitrate(this.bitrate);for(const t of this.codecs.values())i.addCodec(t.clone());for(const[t,e]of this.extensions.entries())i.addExtension(t,e);for(const t of this.rids.values())i.addRID(t.clone());return this.simulcast&&i.setSimulcast(this.simulcast.clone()),this.control&&i.setControl(this.control),this.dataChannel&&i.setDataChannel(this.dataChannel.clone()),i}plain(){const t={id:this.id,type:this.type,direction:Xi.toString(this.direction),codecs:[]};this.dataChannel&&(t.dataChannel=this.dataChannel.plain()),this.bitrate&&(t.bitrate=this.bitrate);for(const i of this.codecs.values())t.codecs.push(i.plain());for(const[i,e]of this.extensions.entries())t.extensions||(t.extensions={}),t.extensions[i]=e;for(const i of this.rids.values())t.rids||(t.rids=[]),t.rids.push(i.plain());return this.simulcast&&(t.simulcast=this.simulcast.plain()),this.control&&(t.control=this.control),t}getType(){return this.type}getId(){return this.id}setId(t){this.id=t}addExtension(t,i){this.extensions.set(t,i)}addRID(t){this.rids.set(t.getId(),t)}addCodec(t){this.codecs.set(t.getType(),t)}setCodecs(t){this.codecs=t}getCodecForType(t){return this.codecs.get(t)}getCodec(t){for(const i of this.codecs.values())if(i.getCodec().toLowerCase()===t.toLowerCase())return i;return null}hasCodec(t){return null!==this.getCodec(t)}getCodecs(){return this.codecs}hasRTX(){for(const t of this.codecs.values())if(t.hasRTX())return!0;return!1}getExtensions(){return this.extensions}getRIDs(){return this.rids}getRID(t){return this.rids.get(t)}getBitrate(){return this.bitrate}setBitrate(t){this.bitrate=t}getDirection(){return this.direction}setDirection(t){this.direction=t}hasControl(){return!!this.control}getControl(){return this.control}setControl(t){this.control=t}hasDataChannel(){return!!this.dataChannel}getDataChannel(){return this.dataChannel}setDataChannel(t){this.dataChannel=t}answer(i){const e=new t(this.id,this.type);if(i){e.setDirection(Xi.reverse(this.direction));const{codecs:t,dataChannel:s}=i;if(t){let s;s=Array.isArray(t)?Wi.MapFromNames(t,i.rtx,i.rtcpfbs):t;for(let t of this.codecs.values())for(let i of s.values()){if(i.getCodec().toLowerCase()!==t.getCodec().toLowerCase()||"h264"===i.getCodec()&&i.hasParam("packetization-mode")&&i.getParam("packetization-mode")!=t.getParam("packetization-mode","0")||"h264"===i.getCodec()&&i.hasParam("profile-level-id")&&t.hasParam("profile-level-id")&&i.getParam("profile-level-id")!=t.getParam("profile-level-id")||"multiopus"===i.getCodec()&&i.hasParam("num_streams")&&t.hasParam("num_streams")&&i.getParam("num_streams")!=t.getParam("num_streams"))continue;const s=i.clone();s.setType(t.getType()),s.hasRTX()&&s.setRTX(t.getRTX()),t.hasChannels()&&s.setChannels(t.getChannels()),s.addParams(t.getParams()),e.addCodec(s);break}}const n=new Set(i.extensions);for(let[t,i]of this.extensions)n.has(i)&&e.addExtension(t,i);if(i.simulcast&&this.simulcast){const t=new Hi,i=this.simulcast.getSimulcastStreams(qi.SEND);if(i)for(const e of i){const i=e.map((t=>t.clone()));t.addSimulcastAlternativeStreams(qi.RECV,i)}const s=this.simulcast.getSimulcastStreams(qi.RECV);if(s)for(const i of s){const e=i.map((t=>t.clone()));t.addSimulcastAlternativeStreams(qi.SEND,e)}for(const t of this.rids.values()){const i=t.clone();i.setDirection(qi.reverse(t.getDirection())),e.addRID(i)}e.setSimulcast(t)}if(s&&this.dataChannel){const t=new Ki(this.dataChannel.getPort(),s.maxMessageSize?s.maxMessageSize:this.dataChannel.getMaxMessageSize());e.setDataChannel(t)}}else e.setDirection(Xi.INACTIVE);return e}getSimulcast(){return this.simulcast}setSimulcast(t){this.simulcast=t}constructor(t,i){this.id=t,this.type=i,this.direction=Xi.SENDRECV,this.extensions=new Map,this.codecs=new Map,this.rids=new Map,this.simulcast=null,this.bitrate=0,this.control=null,this.dataChannel=null}};function $i(t){const i=t.toString();if(!/^\d+$/.test(i))throw new g("invalid integer ".concat(i));return C(i)}Ji.create=function(t,i,e){!e&&"string"!=typeof i&&(e=i,i=t);const s=new Ji(t,i);if(e){const{codecs:t}=e;t&&(Array.isArray(t)?s.setCodecs(Wi.MapFromNames(t,e.rtx,e.rtcpfbs)):s.setCodecs(t))}else s.setDirection(Xi.INACTIVE);return s},Ji.expand=function(t){if("MediaInfo"===t.constructor.name)return t;const i=new Ji(t.id,t.type);if(t.direction&&i.setDirection(Xi.byValue(t.direction)),i.setBitrate(t.bitrate),t.dataChannel){const e=Ki.expand(t.dataChannel);e&&i.setDataChannel(e)}for(const[e,s]of _.entries(t.extensions))i.addExtension($i(e),s);for(const e of t.codecs){const t=Wi.expand(e);t&&i.addCodec(t)}for(const e of t.rids||[]){const t=Zi.expand(e);i.addRID(t)}return t.simulcast&&i.setSimulcast(Hi.expand(t.simulcast)),t.control&&i.setControl(t.control),i},Ji.clone=function(t){return"MediaInfo"===t.constructor.name?t.clone():Ji.expand(t)};var te=Ji;let ie=class t{clone(){return new t(this.semantics,this.ssrcs)}plain(){const t={semantics:this.semantics,ssrcs:[]};for(let i=0;i<this.ssrcs.length;++i)t.ssrcs.push(this.ssrcs[i]);return t}getSemantics(){return this.semantics}getSSRCs(){return this.ssrcs}constructor(t,i){this.semantics=t,this.ssrcs=[];for(let t=0;t<i.length;++t)this.ssrcs.push(C(i[t]))}};ie.expand=function(t){return"SourceGroupInfo"===t.constructor.name?t:new ie(t.semantics,t.ssrcs)},ie.clone=function(t){return"SourceGroupInfo"===t.constructor.name?t.clone():ie.expand(t)};var ee=ie;let se=class t{clone(){const i=new t(this.ssrc);return i.setCName(this.cname),i.setStreamId(this.streamId),i.setTrackId(this.trackId),i}plain(){const t={ssrc:this.ssrc};return this.cname&&(t.cname=this.cname),this.streamId&&(t.streamId=this.streamId),this.trackId&&(t.trackId=this.trackId),t}getCName(){return this.cname}setCName(t){this.cname=t}getStreamId(){return this.streamId}setStreamId(t){this.streamId=t}getTrackId(){return this.trackId}setTrackId(t){this.trackId=t}getSSRC(){return this.ssrc}constructor(t){this.ssrc=t}};se.expand=function(t){if("SourceInfo"===t.constructor.name)return t;const i=new se(t.ssrc);return i.setCName(t.cname),i.setStreamId(t.streamId),i.setTrackId(t.trackId),i},se.clone=function(t){return"SourceInfo"===t.constructor.name?t.clone():se.expand(t)};var ne=se;const re=si;let oe=class t{clone(){var i=new t(this.id,this.paused);for(let t of this.codecs.values())i.addCodec(t.clone());return i.setParams(this.params),i}plain(){var t={id:this.id,paused:this.paused,codecs:{},params:{}};for(var[i,e]of this.codecs.entries())t.codecs[i]=e.plain();for(var[i,s]of this.params.entries())t.params[i]=s;return t}getId(){return this.id}getCodecs(){return this.codecs}addCodec(t){this.codecs.set(t.getType(),t)}getParams(){return this.params}setParams(t){this.params=new Map(t)}addParam(t,i){this.params.set(t,i)}isPaused(){return this.paused}constructor(t,i=!1){this.id=t,this.paused=i,this.codecs=new Map,this.params=new Map}};oe.expand=function(t){if("TrackEncodingInfo"===t.constructor.name)return t;const i=new oe(t.id,t.paused);for(const e of _.values(t.codecs||{}))i.addCodec(re.expand(e));for(const[e,s]of _.entries(t.params||{}))i.addParam(e,s);return i},oe.clone=function(t){return"TrackEncodingInfo"===t.constructor.name?t.clone():oe.expand(t)};var he=oe;const ae=ee,ue=he;let ce=class t{clone(){const i=new t(this.media,this.id);this.mediaId&&i.setMediaId(this.mediaId);for(let t=0;t<this.ssrcs.length;++t)i.addSSRC(this.ssrcs[t]);for(let t=0;t<this.groups.length;++t)i.addSourceGroup(this.groups[t].clone());for(let t=0;t<this.encodings.length;++t){const e=[];for(let i=0;i<this.encodings[t].length;++i)e.push(this.encodings[t][i].clone());i.addAlternativeEncodings(e)}return i}plain(){const t={media:this.media,id:this.id,ssrcs:[]};this.mediaId&&(t.mediaId=this.mediaId);for(let i=0;i<this.ssrcs.length;++i)t.ssrcs.push(this.ssrcs[i]);for(let i=0;i<this.groups.length;++i)t.groups||(t.groups=[]),t.groups.push(this.groups[i].plain());for(let i=0;i<this.encodings.length;++i){const e=[];for(let t=0;t<this.encodings[i].length;++t)e.push(this.encodings[i][t].plain());e.length&&(t.encodings||(t.encodings=[]),t.encodings.push(e))}return t}getMedia(){return this.media}setMediaId(t){this.mediaId=t}getMediaId(){return this.mediaId}getId(){return this.id}addSSRC(t){this.ssrcs.push(t)}getSSRCs(){return this.ssrcs}addSourceGroup(t){this.groups.push(t)}getSourceGroup(t){for(const i of this.groups)if(i.getSemantics().toLowerCase()===t.toLowerCase())return i;return null}getSourceGroups(){return this.groups}getSourceGroupsForMediaSSRC(t){return this.groups.filter((i=>i.getSSRCs()[0]===t))}hasSourceGroup(t){for(const i of this.groups)if(i.getSemantics().toLowerCase()===t.toLowerCase())return!0;return!1}getEncodings(){return this.encodings}addEncoding(t){this.encodings.push([t])}addAlternativeEncodings(t){this.encodings.push(t)}setEncodings(t){this.encodings=t}getEncodingSources(){const t=[];if(this.encodings.length)for(const i of this.encodings)for(const e of i){const i={id:e.getId(),rid:e.getId()},s=e.getParams(),n=null==s?void 0:s.get("ssrc");if(void 0!==n){i.media=C(n);for(const t of this.getSourceGroupsForMediaSSRC(i.media))switch(t.getSemantics()){case"FID":i.rtx=t.getSSRCs()[1];break;case"FEC-FR":i.fec=t.getSSRCs()[1]}}t.push(i)}else if(this.hasSourceGroup("SIM")){const i=this.getSourceGroup("SIM").getSSRCs();this.getSourceGroups();for(const e of i){const i={id:String(e),media:e};for(const t of this.getSourceGroupsForMediaSSRC(i.media))switch(t.getSemantics()){case"FID":i.rtx=t.getSSRCs()[1];break;case"FEC-FR":i.fec=t.getSSRCs()[1]}t.push(i)}}else{const i={id:""};if(this.ssrcs.length){i.media=this.ssrcs[0];for(const t of this.getSourceGroupsForMediaSSRC(i.media))switch(t.getSemantics()){case"FID":i.rtx=t.getSSRCs()[1];break;case"FEC-FR":i.fec=t.getSSRCs()[1]}}t.push(i)}return t}constructor(t,i){this.media=t,this.id=i,this.ssrcs=[],this.groups=[],this.encodings=[]}};ce.expand=function(t){var i,e;if("TrackInfo"===t.constructor.name)return t;const s=new ce(t.media,t.id);if(t.mediaId&&s.setMediaId(t.mediaId),Array.isArray(t.ssrcs))for(const i of t.ssrcs)s.addSSRC(i);else if(void 0!==(null===(i=t.ssrcs)||void 0===i?void 0:i.media)){const i=t.ssrcs.media;if(s.addSSRC(i),void 0!==t.ssrcs.rtx){const e=t.ssrcs.rtx;s.addSSRC(e),s.addSourceGroup(new ae("FID",[i,e]))}if(void 0!==t.ssrcs.fec){const e=t.ssrcs.fec;s.addSSRC(e),s.addSourceGroup(new ae("FEC-FR",[i,e]))}}if(t.rid){const i=new ue(t.rid);void 0!==(null===(e=t.ssrcs)||void 0===e?void 0:e.media)&&i.addParam("ssrc",t.ssrcs.media),s.addAlternativeEncodings([i])}for(const i of t.groups||[])s.addSourceGroup(ae.expand(i));for(const i of t.encodings||[]){const t=[];for(const e of i)t.push(ue.expand(e));s.addAlternativeEncodings(t)}return s},ce.clone=function(t){return"TrackInfo"===t.constructor.name?t.clone():ce.expand(t)};var le=ce;const de=le;let fe=class t{clone(){const i=new t(this.id);for(const t of this.tracks.values())i.addTrack(t.clone());return i}plain(){const t={id:this.id,tracks:[]};for(const i of this.tracks.values())t.tracks.push(i.plain());return t}getId(){return this.id}addTrack(t){this.tracks.set(t.getId(),t)}removeTrack(t){return this.tracks.delete(t.getId())}removeTrackById(t){return this.tracks.delete(t)}getFirstTrack(t){for(let i of this.tracks.values())if(i.getMedia().toLowerCase()===t.toLowerCase())return i;return null}getTracks(){return this.tracks}removeAllTracks(){this.tracks.clear()}getTrack(t){return this.tracks.get(t)}constructor(t){this.id=t,this.tracks=new Map}};fe.expand=function(t){if("StreamInfo"===t.constructor.name)return t;const i=new fe(t.id);for(const e of t.tracks||[]){const t=de.expand(e);t&&i.addTrack(t)}return i},fe.clone=function(t){return"StreamInfo"===t.constructor.name?t.clone():fe.expand(t)};var ge=fe;const _e=zt,ve=function(t){const i=new Intl.Collator(t,{sensitivity:"base"});return(t,e)=>0==i.compare(t,e)}("en-US"),we=Jt,me=si,pe=ti,Ae=ui,ye=li,be=ki,Me=te,Te=oi,Se=Yi,Ne=xi,Ie=ee,De=ne,Ee=ge,ke=le,Le=he,xe=Qi,Ce=Pi,je=Oi,Oe=Gi;let Re=class t{clone(){const i=new t(this.version);for(const t of this.medias)i.addMedia(t.clone());for(const t of this.streams.values())i.addStream(t.clone());for(const t of this.candidates)i.addCandidate(t.clone());return i.setICE(this.ice.clone()),this.dtls&&i.setDTLS(this.dtls.clone()),this.crypto&&i.setCrypto(this.crypto.clone()),i.setExtmapAllowMixed(this.extmapAllowMixed),i}plain(){const t={version:this.version,streams:[],medias:[],candidates:[]};for(const i of this.medias)t.medias.push(i.plain());for(const i of this.streams.values())t.streams.push(i.plain());for(const i of this.candidates)t.candidates.push(i.plain());return this.ice&&(t.ice=this.ice.plain()),this.dtls&&(t.dtls=this.dtls.plain()),this.crypto&&(t.crypto=this.crypto.plain()),this.extmapAllowMixed||(t.extmapAllowMixedNotSupported=!this.extmapAllowMixed),t}unify(){const i=new t(this.version);for(const t of this.medias)i.addMedia(t.clone());const e={audio:i.getMediasByType("audio"),video:i.getMediasByType("video")};for(const t of this.streams.values()){const s=t.clone();for(const t of s.getTracks().values()){let s=e[t.getMedia()].pop();s||(s=this.getMedia(t.getMedia()).clone(),s.setId(t.getId()),i.addMedia(s)),t.setMediaId(s.getId())}i.addStream(s)}for(const t of this.candidates)i.addCandidate(t.clone());return this.ice&&i.setICE(this.ice.clone()),this.dtls&&i.setDTLS(this.dtls.clone()),this.crypto&&i.setCrypto(this.crypto.clone()),i}setVersion(t){this.version=t}addMedia(t){this.medias.push(t)}getMedia(t){for(let i in this.medias){let e=this.medias[i];if(ve(e.getType(),t))return e}return null}getMediasByType(t){let i=[];for(let e in this.medias){let s=this.medias[e];ve(s.getType(),t)&&i.push(s)}return i}getMediaById(t){for(const i of this.medias)if(ve(i.getId(),t))return i;return null}replaceMedia(t){for(let i in this.medias)if(this.medias[i].getId()==t.getId())return this.medias[i]=t,!0;return!1}getMedias(){return this.medias}getVersion(){return this.version}getDTLS(){return this.dtls}setDTLS(t){this.dtls=t}hasCrypto(){return!!this.crypto}getCrypto(){return this.crypto}setCrypto(t){this.crypto=t}hasICE(){return!!this.ice}getICE(){return this.ice}setICE(t){this.ice=t}addCandidate(t){for(const i of this.candidates)if(i.equals(t))return;this.candidates.push(t)}addCandidates(t){for(const i of t)this.addCandidate(i)}getCandidates(){return this.candidates}getStream(t){return this.streams.get(t)}getStreams(){return this.streams}getFirstStream(){for(const t of this.streams.values())return t;return null}addStream(t){this.streams.set(t.getId(),t)}removeStream(t){return this.streams.delete(t.getId())}removeAllStreams(){this.streams.clear()}getTracksByMediaType(t){let i=[];for(const e of this.streams.values())for(const[s,n]of e.getTracks())ve(n.getMedia(),t)&&i.push(n);return i}getTrackByMediaId(t){for(const i of this.streams.values())for(const[e,s]of i.getTracks())if(s.getMediaId()==t)return s;return null}getStreamByMediaId(t){for(const i of this.streams.values())for(const[e,s]of i.getTracks())if(s.getMediaId()==t)return i;return null}getExtmapAllowMixed(){return this.extmapAllowMixed}setExtmapAllowMixed(t){this.extmapAllowMixed=t}answer(i){const e=new t;i.ice&&(i.ice instanceof be?e.setICE(i.ice.clone()):e.setICE(be.expand(i.ice))),i.dtls&&(i.dtls instanceof Ae?e.setDTLS(i.dtls):e.setDTLS(Ae.expand(i.dtls))),i.crypto&&(i.crypto instanceof ye?e.setCrypto(i.crypto):e.setCrypto(ye.expand(i.crypto)));for(let t=0;i.candidates&&t<i.candidates.length;++t)i.candidates[t]instanceof we?e.addCandidate(i.candidates[t].clone()):e.addCandidate(we.expand(i.candidates[t]));for(const t of this.medias){const s=i&&i.capabilities&&i.capabilities[t.getType()];e.addMedia(t.answer(s))}return e.setExtmapAllowMixed(this.extmapAllowMixed),e}toString(){let t={version:0,media:[]};t.version=0,t.origin={username:"-",sessionId:(new Date).getTime(),sessionVersion:this.version,netType:"IN",ipVer:4,address:"127.0.0.1"},t.name="semantic-sdp",t.connection={version:4,ip:"0.0.0.0"},t.timing={start:0,stop:0},this.hasICE()&&this.getICE().isLite()&&(t.icelite="ice-lite"),t.msidSemantic={semantic:"WMS",token:"*"},t.groups=[],this.extmapAllowMixed&&(t.extmapAllowMixed="extmap-allow-mixed");const i=[];for(const e of this.medias){let s={type:e.getType(),port:9,protocol:"",fmtp:[],rtp:[],rtcpFb:[],ext:[],bandwidth:[],candidates:[],ssrcGroups:[],ssrcs:[],rids:[]};s.direction=Se.toString(e.getDirection()),this.extmapAllowMixed&&(s.extmapAllowMixed="extmap-allow-mixed"),s.mid=e.getId(),i.push(e.getId()),e.hasControl()&&(s.control=e.getControl()),e.getBitrate()>0&&(s.bandwidth.push({type:"AS",limit:e.getBitrate()}),s.bandwidth.push({type:"TIAS",limit:1e3*e.getBitrate()}));let n=this.getCandidates();for(const t of n)s.candidates.push({foundation:t.getFoundation(),component:t.getComponentId(),transport:t.getTransport(),priority:t.getPriority(),ip:t.getAddress(),port:t.getPort(),type:t.getType(),raddr:t.getRelAddr(),rport:t.getRelPort()});if(this.getICE()&&(s.iceUfrag=this.getICE().getUfrag(),s.icePwd=this.getICE().getPwd()),ve("audio",e.getType())||ve("video",e.getType())){s.rtcpMux="rtcp-mux",s.rtcpRsize="rtcp-rsize",this.getDTLS()?(s.protocol="UDP/TLS/RTP/SAVPF",s.fingerprint={type:this.getDTLS().getHash(),hash:this.getDTLS().getFingerprint()},s.setup=Te.toString(this.getDTLS().getSetup())):this.getCrypto()?(s.protocol="RTP/SAVPF",s.crypto=[{id:this.getCrypto().getTag(),suite:this.getCrypto().getSuite(),config:this.getCrypto().getKeyParams()}]):s.protocol="RTP/AVP";for(const t of e.getCodecs().values()){ve("video",e.getType())?s.rtp.push({payload:t.getType(),codec:t.getCodec().toUpperCase(),rate:9e4}):ve("opus",t.getCodec())||ve("multiopus",t.getCodec())?s.rtp.push({payload:t.getType(),codec:t.getCodec(),rate:48e3,encoding:t.getChannels()}):s.rtp.push({payload:t.getType(),codec:t.getCodec(),rate:8e3});for(const i of t.getRTCPFeedbacks())s.rtcpFb.push({payload:t.getType(),type:i.getId(),subtype:i.getParams().join(" ")});t.hasRTX()&&(s.rtp.push({payload:t.getRTX(),codec:"rtx",rate:9e4}),s.fmtp.push({payload:t.getRTX(),config:"apt="+t.getType()}));const i=t.getParams();if(_.keys(i).length){const e={payload:t.getType(),config:""};for(const t in i)e.config.length&&(e.config+=";"),_.hasOwnProperty.call(i,t)?e.config+=t+"="+i[t]:e.config+=t;s.fmtp.push(e)}}const t=[];for(const i of s.rtp)t.push(i.payload);s.payloads=t.join(" ");for(let[t,i]of e.getExtensions().entries())s.ext.push({value:t,uri:i});for(let t of e.getRIDs().values()){let i={id:t.getId(),direction:Ne.toString(t.getDirection()),params:""};t.getFormats().length&&(i.params="pt="+t.getFormats().join(","));for(let[e,s]of t.getParams().entries())i.params+=(i.params.length?";":"")+e+"="+s;s.rids.push(i)}const i=e.getSimulcast();if(i){let t=1;s.simulcast={};const e=i.getSimulcastStreams(Ne.SEND),n=i.getSimulcastStreams(Ne.RECV);if(e&&e.length){let i="";for(const t of e){let e="";for(const i of t)e+=(e.length?",":"")+(i.isPaused()?"~":"")+i.getId();i+=(i.length?";":"")+e}s.simulcast["dir"+t]="send",s.simulcast["list"+t]=i,t++}if(n&&n.length){let i="";for(const t of n){let e="";for(const i of t)e+=(e.length?",":"")+(i.isPaused()?"~":"")+i.getId();i+=(i.length?";":"")+e}s.simulcast["dir"+t]="recv",s.simulcast["list"+t]=i,t++}}}else if(e.hasDataChannel()){s.protocol="UDP/DTLS/SCTP",s.payloads="webrtc-datachannel";const t=e.getDataChannel();s.sctpPort=t.getPort(),s.maxMessageSize=t.getMaxMessageSize()}t.media.push(s)}for(let i of this.streams.values())for(let e of i.getTracks().values())for(let s in t.media){let n=t.media[s];if(e.getMediaId()){if(e.getMediaId()==n.mid){let t=e.getSourceGroups();for(let i in t){let e=t[i];n.ssrcGroups.push({semantics:e.getSemantics(),ssrcs:e.getSSRCs().join(" ")})}let s=e.getSSRCs();for(let t in s)n.ssrcs.push({id:s[t],attribute:"cname",value:i.getId()}),n.ssrcs.push({id:s[t],attribute:"msid",value:i.getId()+" "+e.getId()});n.msid=i.getId()+" "+e.getId();break}}else if(ve(n.type,e.getMedia())){let t=e.getSourceGroups();for(let i in t){let e=t[i];n.ssrcGroups.push({semantics:e.getSemantics(),ssrcs:e.getSSRCs().join(" ")})}let s=e.getSSRCs();for(let t in s)n.ssrcs.push({id:s[t],attribute:"cname",value:i.getId()}),n.ssrcs.push({id:s[t],attribute:"msid",value:i.getId()+" "+e.getId()});break}}const e={type:"BUNDLE",mids:i.join(" ")};return t.groups.push(e),_e.write(t)}toIceFragmentString(){let t={version:0,media:[],candidates:[]};this.hasICE()&&this.getICE().isLite()&&(t.icelite="ice-lite"),this.getICE()&&(t.iceUfrag=this.getICE().getUfrag(),t.icePwd=this.getICE().getPwd());for(const i of this.getCandidates())t.candidates.push({foundation:i.getFoundation(),component:i.getComponentId(),transport:i.getTransport(),priority:i.getPriority(),ip:i.getAddress(),port:i.getPort(),type:i.getType(),raddr:i.getRelAddr(),rport:i.getRelPort()});return _e.write(t).slice(10)}constructor(t){this.version=t||1,this.streams=new Map,this.medias=new Array,this.candidates=new Array,this.ice=null,this.dtls=null,this.crypto=null,this.extmapAllowMixed=!0}};Re.create=function(t){var i;const e=new Re;if(t.streams)for(const i of t.streams)e.addStream(Ee.expand(i));t.ice&&(t.ice instanceof be?e.setICE(t.ice.clone()):e.setICE(be.expand(t.ice))),t.dtls&&(t.dtls instanceof Ae?e.setDTLS(t.dtls):e.setDTLS(Ae.expand(t.dtls))),t.crypto&&(t.crypto instanceof ye?e.setCrypto(t.crypto):e.setCrypto(ye.expand(t.crypto)));for(const i of t.candidates||[])i instanceof we?e.addCandidate(i.clone()):e.addCandidate(we.expand(i));let s=96,n=1,r=0;for(const[o,h]of _.entries(t.capabilities||{}))if(t.unified&&null!==(i=t.streams)&&void 0!==i&&i.length)for(const t of e.getTracksByMediaType(o)){const i=Me.create(t.getMediaId(),o,h);for(const[t,e]of i.getCodecs())e.getType()>=96&&e.setType(s++),e.getRTX()&&e.setRTX(s++);if(h.extensions)for(let t of h.extensions)15===n&&n++,i.addExtension(n++,t);e.addMedia(i)}else{const i=Me.create(t.unified?String(r++):o,o,h);for(const[t,e]of i.getCodecs())e.getType()>=96&&e.setType(s++),e.getRTX()&&e.setRTX(s++);if(h.extensions)for(let t of h.extensions)15===n&&n++,i.addExtension(n++,t);e.addMedia(i)}return e},Re.expand=function(t){if("SDPInfo"===t.constructor.name)return t;const i=new Re(t.version);for(const e of t.medias||[]){const t=Me.expand(e);t&&i.addMedia(t)}for(const e of t.streams||[]){const t=Ee.expand(e);t&&i.addStream(t)}for(const e of t.candidates||[]){const t=we.expand(e);t&&i.addCandidate(t)}return t.ice&&i.setICE(be.expand(t.ice)),t.dtls&&i.setDTLS(Ae.expand(t.dtls)),t.crypto&&i.setCrypto(ye.expand(t.crypto)),t.extmapAllowMixedNotSupported&&(this.extmapAllowMixed=!t.extmapAllowMixedNotSupported),i},Re.clone=function(t){return"SDPInfo"===t.constructor.name?t.clone():Re.expand(t)},Re.process=function(t){return Re.parse(t)},Re.parse=function(t){const i=_e.parse(t),e=new Re;if(e.setVersion(i.version),i.iceUfrag&&i.icePwd){const t=String(i.iceUfrag),s=String(i.icePwd),n=new be(t,s);n.setLite("ice-lite"==i.icelite),n.setEndOfCandidates("end-of-candidates"==i.endOfCandidates),e.setICE(n)}for(let t in i.media){const s=i.media[t],n=s.type,r=s.mid?s.mid.toString():t,o=new Me(r,n);if(s.iceUfrag&&s.icePwd){const t=String(s.iceUfrag),n=String(s.icePwd),r=new be(t,n);r.setLite("ice-lite"==i.icelite),r.setEndOfCandidates("end-of-candidates"==s.endOfCandidates),e.setICE(r)}for(let t=0;s.candidates&&t<s.candidates.length;++t){const i=s.candidates[t],n=new we(i.foundation,i.component,i.transport,i.priority,i.ip,i.port,i.type,i.raddr,i.rport);e.addCandidate(n)}const h=s.fingerprint||i.fingerprint;if(h){const t=h.type,i=h.hash;let n=Te.ACTPASS;s.setup&&(n=Te.byValue(s.setup)),e.setDTLS(new Ae(n,t,i))}if(s.crypto){const t=s.crypto[0];e.setCrypto(new ye(t.id,t.suite,t.config,t.sessionConfig))}let a=Se.SENDRECV;s.direction&&(a=Se.byValue(s.direction),o.setDirection(a)),s.control&&o.setControl(s.control),e.setExtmapAllowMixed("extmap-allow-mixed"==s.extmapAllowMixed||"extmap-allow-mixed"==i.extmapAllowMixed);const u=new Map;for(let t in s.rtp){const i=s.rtp[t],e=i.payload,n=i.codec;if("RED"===n.toUpperCase()||"ULPFEC"===n.toUpperCase())continue;let r={};for(let t in s.fmtp){const i=s.fmtp[t];if(i.payload===e){const t=i.config.split(";");for(let i in t){const e=t[i].split("="),s=e[0].trim(),n=e.splice(1).join("=").trim();r[s]=n}}}if("RTX"===n.toUpperCase())u.set(C(r.apt),e);else{const t=new me(n,e,r);i.encoding>1&&t.setChannels(i.encoding),o.addCodec(t)}}for(let t of u.entries()){const i=o.getCodecForType(t[0]);i&&i.setRTX(t[1])}for(let t=0;s.rtcpFb&&t<s.rtcpFb.length;++t){const i=o.getCodecForType(s.rtcpFb[t].payload);if(i){const e=s.rtcpFb[t].type,n=s.rtcpFb[t].subtype?s.rtcpFb[t].subtype.split(" "):null;i.addRTCPFeedback(new pe(e,n))}}const c=s.ext;for(let t in c){const i=c[t];o.addExtension(i.value,i.uri)}const l=s.rids;for(let t in l){const i=l[t],e=new je(i.id,Ne.byValue(i.direction));let s=[];const n=new Map;if(i.params){const t=_e.parseParams(i.params);for(let i in t)"pt"===i?s=t[i].split(","):n.set(i,t[i]);e.setFormats(s),e.setParams(n)}o.addRID(e)}const d=[];if(s.simulcast){const t=new xe;if(s.simulcast.dir1){const i=Ne.byValue(s.simulcast.dir1),e=_e.parseSimulcastStreamList(s.simulcast.list1);for(let s=0;s<e.length;++s){const n=[];for(let t=0;t<e[s].length;++t)n.push(new Ce(e[s][t].scid,e[s][t].paused));t.addSimulcastAlternativeStreams(i,n)}}if(s.simulcast.dir2){const i=Ne.byValue(s.simulcast.dir2),e=_e.parseSimulcastStreamList(s.simulcast.list2);for(let s=0;s<e.length;++s){const n=[];for(let t=0;t<e[s].length;++t)n.push(new Ce(e[s][t].scid,e[s][t].paused));t.addSimulcastAlternativeStreams(i,n)}}for(let i of t.getSimulcastStreams(Ne.SEND)){const t=[];for(let e=0;e<i.length;e++){const s=new Le(i[e].getId(),i[e].isPaused()),n=o.getRID(s.getId());if(n){const i=n.getFormats();for(let t=0;i&&t<i.length;++t){const e=o.getCodecForType(i[t]);e&&s.addCodec(e)}s.setParams(n.getParams()),t.push(s)}}t.length&&d.push(t)}o.setSimulcast(t)}const f=new Map;if(s.ssrcs)for(let t in s.ssrcs){let i=s.ssrcs[t],o=i.id,h=i.attribute,a=i.value,u=f.get(o);if(u||(u=new De(o),f.set(u.getSSRC(),u)),ve("cname",h))u.setCName(a);else if(ve("msid",h)){let t=a.split(" "),i=t[0],s=t[1];u.setStreamId(i),u.setTrackId(s);let h=e.getStream(i);h||(h=new Ee(i),e.addStream(h));let c=h.getTrack(s);c||(c=new ke(n,s),c.setMediaId(r),c.setEncodings(d),h.addTrack(c)),c.addSSRC(o)}}if(s.msid){let t=s.msid.split(" "),i=t[0],o=t[1],h=e.getStream(i);h||(h=new Ee(i),e.addStream(h));let a=h.getTrack(o);a||(a=new ke(n,o),a.setMediaId(r),a.setEncodings(d),h.addTrack(a));for(let[t,e]of f.entries())e.getStreamId()||(e.setStreamId(i),e.setTrackId(o),a.addSSRC(t))}for(let[t,i]of f.entries())if(!i.getStreamId()){let s=i.getCName(),o=r;i.setStreamId(s),i.setTrackId(o);let h=e.getStream(s);h||(h=new Ee(s),e.addStream(h));let a=h.getTrack(o);a||(a=new ke(n,o),a.setMediaId(r),a.setEncodings(d),h.addTrack(a)),a.addSSRC(t)}if(s.ssrcGroups)for(let t in s.ssrcGroups){let i=s.ssrcGroups[t],n=i.ssrcs.split(" "),r=new Ie(i.semantics,n),o=f.get(C(n[0]));o&&e.getStream(o.getStreamId()).getTrack(o.getTrackId()).addSourceGroup(r)}if("application"==s.type&&"webrtc-datachannel"==s.payloads){const t=new Oe(s.sctpPort,s.maxMessageSize);o.setDataChannel(t)}e.addMedia(o)}return e};var Pe=Re;_.defineProperty(Pt,"__esModule",{value:!0});var ze=Pt.SDPInfo=Pe;Pt.CandidateInfo=Jt,Pt.CodecInfo=si,Pt.DTLSInfo=ui,Pt.CryptoInfo=li,Pt.ICEInfo=ki;var Be=Pt.MediaInfo=te;Pt.Setup=oi,Pt.SourceGroupInfo=ee,Pt.SourceInfo=ne,Pt.StreamInfo=ge,Pt.TrackInfo=le,Pt.RTCPFeedbackInfo=ti,Pt.TrackEncodingInfo=he,Pt.RIDInfo=Oi,Pt.SimulcastInfo=Qi,Pt.SimulcastStreamInfo=Pi,Pt.DataChannelInfo=Gi;var Ue=Pt.Direction=Yi,Qe={exports:{}};!function(t,i){!function(e,s){var n="function",r="undefined",o="object",h="string",a="major",u="model",c="name",l="type",d="vendor",f="version",g="architecture",_="console",v="mobile",w="tablet",m="smarttv",p="wearable",A="embedded",y="Amazon",b="Apple",M="ASUS",T="BlackBerry",S="Browser",N="Chrome",I="Firefox",D="Google",E="Huawei",k="LG",L="Microsoft",x="Motorola",C="Opera",j="Samsung",O="Sharp",R="Sony",P="Xiaomi",z="Zebra",B="Facebook",U="Chromium OS",Q="Mac OS",F=" Browser",Y=function(t){for(var i={},e=0;e<t.length;e++)i[t[e].toUpperCase()]=t[e];return i},V=function(t,i){return typeof t===h&&-1!==G(i).indexOf(G(t))},G=function(t){return t.toLowerCase()},W=function(t,i){if(typeof t===h)return t=t.replace(/^\s\s*/,""),typeof i===r?t:t.substring(0,500)},Z=function(t,i){for(var e,r,h,a,u,c,l=0;l<i.length&&!u;){var d=i[l],f=i[l+1];for(e=r=0;e<d.length&&!u&&d[e];)if(u=d[e++].exec(t))for(h=0;h<f.length;h++)c=u[++r],typeof(a=f[h])===o&&a.length>0?2===a.length?typeof a[1]==n?this[a[0]]=a[1].call(this,c):this[a[0]]=a[1]:3===a.length?typeof a[1]!==n||a[1].exec&&a[1].test?this[a[0]]=c?c.replace(a[1],a[2]):s:this[a[0]]=c?a[1].call(this,c,a[2]):s:4===a.length&&(this[a[0]]=c?a[3].call(this,c.replace(a[1],a[2])):s):this[a]=c||s;l+=2}},H=function(t,i){for(var e in i)if(typeof i[e]===o&&i[e].length>0){for(var n=0;n<i[e].length;n++)if(V(i[e][n],t))return"?"===e?s:e}else if(V(i[e],t))return"?"===e?s:e;return i.hasOwnProperty("*")?i["*"]:t},X={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},q={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[f,[c,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[f,[c,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[c,f],[/opios[\/ ]+([\w\.]+)/i],[f,[c,C+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[f,[c,C+" GX"]],[/\bopr\/([\w\.]+)/i],[f,[c,C]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[f,[c,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[c,f],[/quark(?:pc)?\/([-\w\.]+)/i],[f,[c,"Quark"]],[/\bddg\/([\w\.]+)/i],[f,[c,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[f,[c,"UC"+S]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[f,[c,"WeChat"]],[/konqueror\/([\w\.]+)/i],[f,[c,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[f,[c,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[f,[c,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[f,[c,"Smart Lenovo "+S]],[/(avast|avg)\/([\w\.]+)/i],[[c,/(.+)/,"$1 Secure "+S],f],[/\bfocus\/([\w\.]+)/i],[f,[c,I+" Focus"]],[/\bopt\/([\w\.]+)/i],[f,[c,C+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[f,[c,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[f,[c,"Dolphin"]],[/coast\/([\w\.]+)/i],[f,[c,C+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[f,[c,"MIUI "+S]],[/fxios\/([-\w\.]+)/i],[f,[c,I]],[/\bqihu|(qi?ho?o?|360)browser/i],[[c,"360"+F]],[/\b(qq)\/([\w\.]+)/i],[[c,/(.+)/,"$1Browser"],f],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[c,/(.+)/,"$1"+F],f],[/samsungbrowser\/([\w\.]+)/i],[f,[c,j+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[c,/_/g," "],f],[/metasr[\/ ]?([\d\.]+)/i],[f,[c,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[c,"Sogou Mobile"],f],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[c,f],[/(lbbrowser|rekonq)/i,/\[(linkedin)app\]/i],[c],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[c,B],f],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[c,f],[/\bgsa\/([\w\.]+) .*safari\//i],[f,[c,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[f,[c,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[f,[c,N+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[c,N+" WebView"],f],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[f,[c,"Android "+S]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[c,f],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[f,[c,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[f,c],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[c,[f,H,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[c,f],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[c,"Netscape"],f],[/(wolvic)\/([\w\.]+)/i],[c,f],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[f,[c,I+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[c,[f,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[c,[f,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[g,"amd64"]],[/(ia32(?=;))/i],[[g,G]],[/((?:i[346]|x)86)[;\)]/i],[[g,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[g,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[g,"armhf"]],[/windows (ce|mobile); ppc;/i],[[g,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[g,/ower/,"",G]],[/(sun4\w)[;\)]/i],[[g,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[g,G]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[u,[d,j],[l,w]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr])[-\w]+)/i,/sec-(sgh\w+)/i],[u,[d,j],[l,v]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[u,[d,b],[l,v]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[u,[d,b],[l,w]],[/(macintosh);/i],[u,[d,b]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[u,[d,O],[l,v]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[u,[d,E],[l,w]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[u,[d,E],[l,v]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i],[[u,/_/g," "],[d,P],[l,v]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[u,/_/g," "],[d,P],[l,w]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[u,[d,"OPPO"],[l,v]],[/\b(opd2\d{3}a?) bui/i],[u,[d,"OPPO"],[l,w]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[u,[d,"Vivo"],[l,v]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[u,[d,"Realme"],[l,v]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[u,[d,x],[l,v]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[u,[d,x],[l,w]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[u,[d,k],[l,w]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[u,[d,k],[l,v]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[u,[d,"Lenovo"],[l,w]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[u,/_/g," "],[d,"Nokia"],[l,v]],[/(pixel c)\b/i],[u,[d,D],[l,w]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[u,[d,D],[l,v]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[u,[d,R],[l,v]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[u,"Xperia Tablet"],[d,R],[l,w]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[u,[d,"OnePlus"],[l,v]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[u,[d,y],[l,w]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[u,/(.+)/g,"Fire Phone $1"],[d,y],[l,v]],[/(playbook);[-\w\),; ]+(rim)/i],[u,d,[l,w]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[u,[d,T],[l,v]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[u,[d,M],[l,w]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[u,[d,M],[l,v]],[/(nexus 9)/i],[u,[d,"HTC"],[l,w]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[d,[u,/_/g," "],[l,v]],[/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])\w*(\)| bui)/i],[u,[d,"TCL"],[l,w]],[/(itel) ((\w+))/i],[[d,G],u,[l,H,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[u,[d,"Acer"],[l,w]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[u,[d,"Meizu"],[l,v]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[u,[d,"Ulefone"],[l,v]],[/droid.+; (a(?:015|06[35]|142p?))/i],[u,[d,"Nothing"],[l,v]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[d,u,[l,v]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[d,u,[l,w]],[/(surface duo)/i],[u,[d,L],[l,w]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[u,[d,"Fairphone"],[l,v]],[/(u304aa)/i],[u,[d,"AT&T"],[l,v]],[/\bsie-(\w*)/i],[u,[d,"Siemens"],[l,v]],[/\b(rct\w+) b/i],[u,[d,"RCA"],[l,w]],[/\b(venue[\d ]{2,7}) b/i],[u,[d,"Dell"],[l,w]],[/\b(q(?:mv|ta)\w+) b/i],[u,[d,"Verizon"],[l,w]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[u,[d,"Barnes & Noble"],[l,w]],[/\b(tm\d{3}\w+) b/i],[u,[d,"NuVision"],[l,w]],[/\b(k88) b/i],[u,[d,"ZTE"],[l,w]],[/\b(nx\d{3}j) b/i],[u,[d,"ZTE"],[l,v]],[/\b(gen\d{3}) b.+49h/i],[u,[d,"Swiss"],[l,v]],[/\b(zur\d{3}) b/i],[u,[d,"Swiss"],[l,w]],[/\b((zeki)?tb.*\b) b/i],[u,[d,"Zeki"],[l,w]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[d,"Dragon Touch"],u,[l,w]],[/\b(ns-?\w{0,9}) b/i],[u,[d,"Insignia"],[l,w]],[/\b((nxa|next)-?\w{0,9}) b/i],[u,[d,"NextBook"],[l,w]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[d,"Voice"],u,[l,v]],[/\b(lvtel\-)?(v1[12]) b/i],[[d,"LvTel"],u,[l,v]],[/\b(ph-1) /i],[u,[d,"Essential"],[l,v]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[u,[d,"Envizen"],[l,w]],[/\b(trio[-\w\. ]+) b/i],[u,[d,"MachSpeed"],[l,w]],[/\btu_(1491) b/i],[u,[d,"Rotor"],[l,w]],[/(shield[\w ]+) b/i],[u,[d,"Nvidia"],[l,w]],[/(sprint) (\w+)/i],[d,u,[l,v]],[/(kin\.[onetw]{3})/i],[[u,/\./g," "],[d,L],[l,v]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[u,[d,z],[l,w]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[u,[d,z],[l,v]],[/smart-tv.+(samsung)/i],[d,[l,m]],[/hbbtv.+maple;(\d+)/i],[[u,/^/,"SmartTV"],[d,j],[l,m]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[d,k],[l,m]],[/(apple) ?tv/i],[d,[u,b+" TV"],[l,m]],[/crkey/i],[[u,N+"cast"],[d,D],[l,m]],[/droid.+aft(\w+)( bui|\))/i],[u,[d,y],[l,m]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[u,[d,O],[l,m]],[/(bravia[\w ]+)( bui|\))/i],[u,[d,R],[l,m]],[/(mitv-\w{5}) bui/i],[u,[d,P],[l,m]],[/Hbbtv.*(technisat) (.*);/i],[d,u,[l,m]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[d,W],[u,W],[l,m]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[l,m]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[d,u,[l,_]],[/droid.+; (shield) bui/i],[u,[d,"Nvidia"],[l,_]],[/(playstation [345portablevi]+)/i],[u,[d,R],[l,_]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[u,[d,L],[l,_]],[/\b(sm-[lr]\d\d[05][fnuw]?s?)\b/i],[u,[d,j],[l,p]],[/((pebble))app/i],[d,u,[l,p]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[u,[d,b],[l,p]],[/droid.+; (glass) \d/i],[u,[d,D],[l,p]],[/droid.+; (wt63?0{2,3})\)/i],[u,[d,z],[l,p]],[/(quest( \d| pro)?)/i],[u,[d,B],[l,p]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[d,[l,A]],[/(aeobc)\b/i],[u,[d,y],[l,A]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[u,[l,v]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[u,[l,w]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[l,w]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[l,v]],[/(android[-\w\. ]{0,9});.+buil/i],[u,[d,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[f,[c,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[f,[c,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[c,f],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[f,c]],os:[[/microsoft (windows) (vista|xp)/i],[c,f],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[c,[f,H,X]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[f,H,X],[c,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[f,/_/g,"."],[c,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[c,Q],[f,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[f,c],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[c,f],[/\(bb(10);/i],[f,[c,T]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[f,[c,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[f,[c,I+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[f,[c,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[f,[c,"watchOS"]],[/crkey\/([\d\.]+)/i],[f,[c,N+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[c,U],f],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[c,f],[/(sunos) ?([\w\.\d]*)/i],[[c,"Solaris"],f],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[c,f]]},K=function(t,i){if(typeof t===o&&(i=t,t=s),!(this instanceof K))return new K(t,i).getResult();var _=typeof e!==r&&e.navigator?e.navigator:s,m=t||(_&&_.userAgent?_.userAgent:""),p=_&&_.userAgentData?_.userAgentData:s,A=i?function(t,i){var e={};for(var s in t)i[s]&&i[s].length%2==0?e[s]=i[s].concat(t[s]):e[s]=t[s];return e}(q,i):q,y=_&&_.userAgent==m;return this.getBrowser=function(){var t={};return t[c]=s,t[f]=s,Z.call(t,m,A.browser),t[a]=function(t){return typeof t===h?t.replace(/[^\d\.]/g,"").split(".")[0]:s}(t[f]),y&&_&&_.brave&&typeof _.brave.isBrave==n&&(t[c]="Brave"),t},this.getCPU=function(){var t={};return t[g]=s,Z.call(t,m,A.cpu),t},this.getDevice=function(){var t={};return t[d]=s,t[u]=s,t[l]=s,Z.call(t,m,A.device),y&&!t[l]&&p&&p.mobile&&(t[l]=v),y&&"Macintosh"==t[u]&&_&&typeof _.standalone!==r&&_.maxTouchPoints&&_.maxTouchPoints>2&&(t[u]="iPad",t[l]=w),t},this.getEngine=function(){var t={};return t[c]=s,t[f]=s,Z.call(t,m,A.engine),t},this.getOS=function(){var t={};return t[c]=s,t[f]=s,Z.call(t,m,A.os),y&&!t[c]&&p&&p.platform&&"Unknown"!=p.platform&&(t[c]=p.platform.replace(/chrome os/i,U).replace(/macos/i,Q)),t},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return m},this.setUA=function(t){return m=typeof t===h&&t.length>500?W(t,500):t,this},this.setUA(m),this};K.VERSION="0.7.39",K.BROWSER=Y([c,f,a]),K.CPU=Y([g]),K.DEVICE=Y([u,d,l,_,v,m,w,p,A]),K.ENGINE=K.OS=Y([c,f]),t.exports&&(i=t.exports=K),i.UAParser=K;var J=typeof e!==r&&(e.jQuery||e.Zepto);if(J&&!J.ua){var $=new K;J.ua=$.getResult(),J.ua.get=function(){return $.getUA()},J.ua.set=function(t){$.setUA(t);var i=$.getResult();for(var e in i)J.ua[e]=i[e]}}}("object"==typeof s?s:y)}(Qe,Qe.exports);const Fe=M(Qe.exports),Ye=["iOS"];class Ve extends Fe{isChromium(){return this.getUA().match(/Chrome/i)}isChrome(){const t=this.getBrowser();if(!t.name)return!1;const i=this.getOS();let e=!0;return e=!new RegExp(Ye.join("|"),"i").test(i.name),t.name.match(/Chrome/i)&&e}isFirefox(){const t=this.getBrowser();return!!t.name&&t.name.match(/Firefox/i)}isOpera(){const t=this.getBrowser();return!!t.name&&t.name.match(/Opera/i)}isSafari(){const t=this.getBrowser();return!!t.name&&t.name.match(/Safari/i)}constructor(){super(s.navigator.userAgent)}}const Ge=at.get("SdpParser"),We=Array.from({length:31},((t,i)=>i+35)),Ze=Array.from({length:32},((t,i)=>i+96)),He=Array.from({length:14},((t,i)=>i+1)),Xe=Array.from({length:240},((t,i)=>i+16)),qe={setSimulcast(t,i){if(Ge.info("Setting simulcast. Codec: ",i),!(new Ve).isChromium())return Ge.warn("Your browser does not appear to support Simulcast. For a better experience, use a Chromium based browser."),t;if("h264"!==i&&"vp8"!==i)return Ge.warn("Your selected codec ".concat(i," does not appear to support Simulcast.  To broadcast using simulcast, please use H.264 or VP8.")),t;if(!/m=video/.test(t))return Ge.warn("There is no available video for simulcast to be enabled."),t;try{const i=new RegExp("m=video.*?a=ssrc:(\\d*) cname:(.+?)\\r\\n","s"),e=new RegExp("m=video.*?a=ssrc:(\\d*) msid:(.+?)\\r\\n","s"),s=i.exec(t),n=s[1],r=s[2],o=e.exec(t)[2],h=2,a=[n];for(let i=0;i<h;++i){const e=100+2*i,s=e+1;a.push(e),t+="a=ssrc-group:FID "+e+" "+s+"\r\na=ssrc:"+e+" cname:"+r+"\r\na=ssrc:"+e+" msid:"+o+"\r\na=ssrc:"+s+" cname:"+r+"\r\na=ssrc:"+s+" msid:"+o+"\r\n"}return t+="a=ssrc-group:SIM "+a.join(" ")+"\r\n",Ge.info("Simulcast setted"),Ge.debug("Simulcast SDP: ",t),t}catch(t){throw Ge.error("Error setting SDP for simulcast: ",t),t}},setStereo:t=>(Ge.info("Replacing SDP response for support stereo"),t=t.replace(/useinbandfec=1/g,"useinbandfec=1; stereo=1"),Ge.info("Replaced SDP response for support stereo"),Ge.debug("New SDP value: ",t),t),setDTX:t=>(Ge.info("Replacing SDP response for support dtx"),t=t.replace("useinbandfec=1","useinbandfec=1; usedtx=1"),Ge.info("Replaced SDP response for support dtx"),Ge.debug("New SDP value: ",t),t),setAbsoluteCaptureTime(t){const i="a=extmap:"+qe.getAvailableHeaderExtensionIdRange(t)[0]+" http://www.webrtc.org/experiments/rtp-hdrext/abs-capture-time\r\n";return t=t.replace(/(m=.*\r\n(?:.*\r\n)*?)(a=extmap.*\r\n)/gm,((t,e,s)=>e+i+s)),Ge.info("Replaced SDP response for setting absolute capture time"),Ge.debug("New SDP value: ",t),t},setDependencyDescriptor(t){const i="a=extmap:"+qe.getAvailableHeaderExtensionIdRange(t)[0]+" https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension\r\n";return t=t.replace(/(m=.*\r\n(?:.*\r\n)*?)(a=extmap.*\r\n)/gm,((t,e,s)=>e+i+s)),Ge.info("Replaced SDP response for setting depency descriptor"),Ge.debug("New SDP value: ",t),t},setVideoBitrate(t,i){if(i<1)Ge.info("Remove bitrate restrictions"),t=t.replace(/b=AS:.*\r\n/,"").replace(/b=TIAS:.*\r\n/,"");else{const e=ze.parse(t),s=e.getMedia("video");Ge.info("Setting video bitrate"),s.setBitrate(i),t=e.toString()}return t},removeSdpLine:(t,i)=>(Ge.debug("SDP before trimming: ",t),t=t.split("\n").filter((t=>t.trim()!==i)).join("\n"),Ge.debug("SDP trimmed result: ",t),t),adaptCodecName(t,i,e){if(!t)return t;const s=new RegExp("".concat(i),"i");return t.replace(s,e)},setMultiopus(t,i){if(!(new Ve).isFirefox()&&(!i||Ke(i)))if(t.includes("multiopus/48000/6"))Ge.info("Multiopus already setted");else{Ge.info("Setting multiopus");const i=/m=audio 9 UDP\/TLS\/RTP\/SAVPF (.*)\r\n/.exec(t)[0],e=qe.getAvailablePayloadTypeRange(t)[0],s=i.replace("\r\n"," ")+e+"\r\na=rtpmap:"+e+" multiopus/48000/6\r\na=fmtp:"+e+" channel_mapping=0,4,1,2,3,5;coupled_streams=2;minptime=10;num_streams=4;useinbandfec=1\r\n";t=t.replace(i,s),Ge.info("Multiopus offer created"),Ge.debug("SDP parsed for multioups: ",t)}return t},getAvailablePayloadTypeRange(t){const i=t.matchAll(/m=(?:.*) (?:.*) UDP\/TLS\/RTP\/SAVPF (.*)\r\n/gm);let e=Ze.concat(We);for(const t of i){const i=t[1].split(" ").map((t=>C(t)));e=e.filter((t=>!i.includes(t)))}return e},getAvailableHeaderExtensionIdRange(t){const i=t.matchAll(/a=extmap:(\d+)(?:.*)\r\n/gm);let e=He.concat(Xe);for(const t of i){const i=t[1].split(" ").map((t=>C(t)));e=e.filter((t=>!i.includes(t)))}return e},renegotiate(t,i){const e=ze.parse(t),s=ze.parse(i);for(const t of e.getMedias()){let i=s.getMediaById(t.getId());if(!i){i=new Be(t.getId(),t.getType()),i.setDirection(Ue.reverse(t.getDirection()));const e=s.getMedia(t.getType());if(e){i.setCodecs(e.getCodecs());for(const[t,s]of e.getExtensions())i.addExtension(t,s)}s.addMedia(i)}}return s.toString()},updateMissingVideoExtensions(t,i){var e;const s=ze.parse(t),n=null==(e=ze.parse(i).getMediasByType("video")[0])?void 0:e.getExtensions();if(n||n.length){for(const i of s.getMediasByType("video")){const e=i.getExtensions();n.forEach(((s,n)=>{if(!e.get(n)){const e=i.getId(),r="a=extmap:"+n+" "+s+"\r\n",o=new RegExp("(a=mid:"+e+"\r\n(?:.*\r\n)*?)","g");t=t.replace(o,((t,i,e)=>i+r))}}))}return t}},getCodecPayloadType(t){const i=t.matchAll(/a=rtpmap:(\d+) (\w+)\/\d+/g),e={};for(const t of i)e[t[1]]=t[2];return e}},Ke=t=>t.getAudioTracks().some((t=>t.getSettings().channelCount>2)),Je={VP8:"vp8",VP9:"vp9",H264:"h264",AV1:"av1",H265:"h265"},$e={OPUS:"opus",MULTIOPUS:"multiopus"},ts=at.get("PeerConnection"),is="Publisher",es="Viewer",ss={track:"track",connectionStateChange:"connectionStateChange"},ns={stereo:!1,mediaStream:null,codec:"h264",simulcast:!1,scalabilityMode:null,disableAudio:!1,disableVideo:!1,setSDPToPeer:!0};class rs extends Nt{async createRTCPeer(t,i){void 0===t&&(t={autoInitStats:!0,statsIntervalMs:1e3}),void 0===i&&(i=es),ts.info("Creating new RTCPeerConnection"),ts.debug("RTC configuration provided by user: ",t),this.peer=as(this,t),this.mode=i,t.autoInitStats&&this.initStats(t)}getRTCPeer(){return ts.info("Getting RTC Peer"),this.peer}async closeRTCPeer(){var t;ts.info("Closing RTCPeerConnection"),null==(t=this.peer)||t.close(),this.peer=null,this.stopStats(),this.emit(ss.connectionStateChange,"closed")}async setRTCRemoteSDP(t){ts.info("Setting RTC Remote SDP");const i={type:"answer",sdp:t};try{await this.peer.setRemoteDescription(i),ts.info("RTC Remote SDP was set successfully."),ts.debug("RTC Remote SDP new value: ",t)}catch(t){throw ts.error("Error while setting RTC Remote SDP: ",t),t}}async getRTCLocalSDP(t){void 0===t&&(t=ns),ts.info("Getting RTC Local SDP"),t=d(d({},ns),t),ts.debug("Options: ",t);const i=hs(t.mediaStream);i?ls(this.peer,i,t):ds(this.peer,t),ts.info("Creating peer offer");const e=await this.peer.createOffer();return ts.info("Peer offer created"),ts.debug("Peer offer response: ",e.sdp),this.sessionDescription=e,t.disableAudio||(t.stereo&&(this.sessionDescription.sdp=qe.setStereo(this.sessionDescription.sdp)),t.dtx&&(this.sessionDescription.sdp=qe.setDTX(this.sessionDescription.sdp)),this.sessionDescription.sdp=qe.setMultiopus(this.sessionDescription.sdp,i)),!t.disableVideo&&t.simulcast&&(this.sessionDescription.sdp=qe.setSimulcast(this.sessionDescription.sdp,t.codec)),t.absCaptureTime&&(this.sessionDescription.sdp=qe.setAbsoluteCaptureTime(this.sessionDescription.sdp)),t.dependencyDescriptor&&(this.sessionDescription.sdp=qe.setDependencyDescriptor(this.sessionDescription.sdp)),t.setSDPToPeer&&(await this.peer.setLocalDescription(this.sessionDescription),ts.info("Peer local description set")),this.sessionDescription.sdp}async addRemoteTrack(t,i){return new Promise(((e,s)=>{try{const s=this.peer.addTransceiver(t,{direction:"recvonly",streams:i});this.transceiverMap.set(s,e)}catch(t){s(t)}}))}updateBandwidthRestriction(t,i){if(this.mode===es)throw ts.error("Viewer attempting to update bitrate, this is not allowed"),new g("It is not possible for a viewer to update the bitrate.");return ts.info("Updating bandwidth restriction, bitrate value: ",i),ts.debug("SDP value: ",t),qe.setVideoBitrate(t,i)}async updateBitrate(t){if(void 0===t&&(t=0),this.mode===es)throw ts.error("Viewer attempting to update bitrate, this is not allowed"),new g("It is not possible for a viewer to update the bitrate.");if(!this.peer)throw ts.error("Cannot update bitrate. No peer found."),new g("Cannot update bitrate. No peer found.");ts.info("Updating bitrate to value: ",t),this.sessionDescription=await this.peer.createOffer(),await this.peer.setLocalDescription(this.sessionDescription);const i=this.updateBandwidthRestriction(this.peer.remoteDescription.sdp,t);await this.setRTCRemoteSDP(i),ts.info("Bitrate restrictions updated: ","".concat(t>0?t:"unlimited"," kbps"))}getRTCPeerStatus(){if(ts.info("Getting RTC peer status"),!this.peer)return null;const t=fs(this.peer);return ts.info("RTC peer status getted, value: ",t),t}replaceTrack(t){if(!this.peer)return void ts.error("Could not change track if there is not an active connection.");const i=this.peer.getSenders().find((i=>i.track.kind===t.kind));i?i.replaceTrack(t):ts.error("There is no ".concat(t.kind," track in active broadcast."))}static getCapabilities(t){const i=new Ve,e=RTCRtpSender.getCapabilities(t);if(e){const s={};let n=new RegExp("^video/(".concat(_.values(Je).join("|"),")x?$"),"i");"audio"===t&&(n=new RegExp("^audio/(".concat(_.values($e).join("|"),")$"),"i"),i.isChrome()&&(s.multiopus={mimeType:"audio/multiopus",channels:6}));for(const t of e.codecs){const i=t.mimeType.match(n);if(i){const e=i[1].toLowerCase();if(s[e]=p(d({},s[e]),{mimeType:t.mimeType}),t.scalabilityModes){let i=s[e].scalabilityModes||[];i=[...i,...t.scalabilityModes],s[e].scalabilityModes=[...new Set(i)]}t.channels&&(s[e].channels=t.channels)}}e.codecs=_.keys(s).map((t=>d({codec:t},s[t])))}return e}getTracks(){var t,i;return null==(i=null==(t=this.peer)?void 0:t.getSenders())?void 0:i.map((t=>t.track))}initStats(t){this.peerConnectionStats?ts.warn("PeerConnection.initStats() has already been called. Automatic initialization occurs via View.connect(), Publish.connect() or this.createRTCPeer(). See options"):this.peer?(this.peerConnectionStats=new Rt(this.peer,t),Lt(this.peerConnectionStats,this,[Ot])):ts.warn("Cannot init peer stats: RTCPeerConnection not initialized")}stopStats(){var t;null==(t=this.peerConnectionStats)||t.stop(),this.peerConnectionStats=null}constructor(){super(),this.mode=null,this.sessionDescription=null,this.peer=null,this.peerConnectionStats=null,this.transceiverMap=new Map}}const os=t=>(null==t?void 0:t.getAudioTracks().length)<=1&&(null==t?void 0:t.getVideoTracks().length)<=1,hs=t=>{if(!t)return null;if(t instanceof MediaStream&&os(t))return t;if(!(t instanceof MediaStream)){ts.info("Creating MediaStream to add received tracks.");const i=new MediaStream;for(const e of t)i.addTrack(e);if(os(i))return i}throw ts.error("MediaStream must have 1 audio track and 1 video track, or at least one of them."),new g("MediaStream must have 1 audio track and 1 video track, or at least one of them.")},as=(t,i)=>{const e=new RTCPeerConnection(i);return cs(t,e),e};async function us(t){return new Promise((i=>u(i,t)))}const cs=(t,i)=>{i.ontrack=async i=>{ts.info("New track from peer."),ts.debug("Track event value: ",i);const e=t.transceiverMap.get(i.transceiver);if(e){for(;!i.transceiver.mid;)await us(100);e(i.transceiver),t.transceiverMap.delete(i.transceiver)}u((()=>{t.emit(ss.track,i)}),0)},i.connectionState?i.onconnectionstatechange=e=>{ts.info("Peer connection state change: ",i.connectionState),t.emit(ss.connectionStateChange,i.connectionState)}:i.oniceconnectionstatechange=e=>{ts.info("Peer ICE connection state change: ",i.iceConnectionState),t.emit(ss.connectionStateChange,i.iceConnectionState)},i.onnegotiationneeded=async t=>{if(!i.remoteDescription)return;ts.info("Peer onnegotiationneeded, updating local description");const e=await i.createOffer();ts.info("Peer onnegotiationneeded, got local offer",e.sdp),e.sdp=qe.updateMissingVideoExtensions(e.sdp,i.remoteDescription.sdp),await i.setLocalDescription(e);const s=qe.renegotiate(e.sdp,i.remoteDescription.sdp);ts.info("Peer onnegotiationneeded, updating remote description",s),await i.setRemoteDescription({type:"answer",sdp:s}),ts.info("Peer onnegotiationneeded, renegotiation done")}},ls=(t,i,e)=>{ts.info("Adding mediaStream tracks to RTCPeerConnection");for(const s of i.getTracks()){const n={streams:[i]};"audio"===s.kind&&(n.direction=e.disableAudio?"inactive":"sendonly"),"video"===s.kind&&(n.direction=e.disableVideo?"inactive":"sendonly",e.scalabilityMode&&(new Ve).isChrome()?(ts.debug("Video track with scalability mode: ".concat(e.scalabilityMode,".")),n.sendEncodings=[{scalabilityMode:e.scalabilityMode}]):e.scalabilityMode&&ts.warn("SVC is only supported in Google Chrome")),t.addTransceiver(s,n),ts.info("Track '".concat(s.label,"' added: "),"id: ".concat(s.id),"kind: ".concat(s.kind))}},ds=(t,i)=>{const e=new Ve;if(!i.disableVideo){const i=t.addTransceiver("video",{direction:"recvonly"});e.isOpera()&&i.setCodecPreferences(RTCRtpReceiver.getCapabilities("video").codecs.filter((t=>"video/H264"!==t.mimeType||t.sdpFmtpLine.includes("profile-level-id=4"))))}i.disableAudio||t.addTransceiver("audio",{direction:"recvonly"});for(let e=0;e<i.multiplexedAudioTracks;e++)t.addTransceiver("audio",{direction:"recvonly"})},fs=t=>{var i;const e=null!=(i=t.connectionState)?i:t.iceConnectionState;switch(e){case"checking":return"connecting";case"completed":return"connected";default:return e}};var gs={};_.defineProperty(gs,"__esModule",{value:!0}),gs.TypedEmitter=St.EventEmitter;const{TypedEmitter:_s}=gs;class vs extends _s{cmd(t,i){return this.tm.cmd(t,i,this.namespace)}event(t,i){return this.tm.event(t,i,this.namespace)}close(){return this.tm.namespaces.delete(this.namespace)}constructor(t,i){super(),this.namespace=t,this.tm=i}}const ws=M(class extends _s{Bd(t){this.transport.send(JSON.stringify(t))}cmd(t,i,e){return void 0===e&&(e=void 0),new Promise(((s,n)=>{if(!t||0===t.length)throw new g("Bad command name");const r={type:"cmd",transId:this.maxId++,name:t,data:i};e&&(r.namespace=e),this.transactions.set(r.transId,p(d({},r),{resolve:s,reject:n}));try{this.Bd(r)}catch(t){throw this.transactions.delete(r.transId),t}}))}event(t,i,e){if(void 0===e&&(e=void 0),!t||0===t.length)throw new g("Bad event name");const s={type:"event",name:t,data:i};e&&(s.namespace=e),this.Bd(s)}namespace(t){let i=this.namespaces.get(t);return i||(i=new vs(t,this),this.namespaces.set(t,i),i)}close(){for(const t of this.namespaces.values())t.close();this.transport.removeListener?this.transport.removeListener("message",this.listener):this.transport.removeEventListener("message",this.listener)}constructor(t){super(),this.maxId=0,this.namespaces=new Map,this.transactions=new Map,this.transport=t,this.listener=t=>{let i;try{i=JSON.parse(t.utf8Data||t.data||t)}catch(t){return}switch(i.type){case"cmd":const{transId:t}=i,s={name:i.name,data:i.data,namespace:i.namespace,accept:i=>{this.Bd({type:"response",transId:t,data:i})},reject:i=>{this.Bd({type:"error",transId:t,data:i})}};if(s.namespace){const t=this.namespaces.get(s.namespace);t?t.emit("cmd",s):this.emit("cmd",s)}else this.emit("cmd",s);break;case"response":{const t=this.transactions.get(i.transId);if(!t)return;this.transactions.delete(i.transId),t.resolve(i.data);break}case"error":{const t=this.transactions.get(i.transId);if(!t)return;this.transactions.delete(i.transId),t.reject(i.data);break}case"event":const n={name:i.name,data:i.data,namespace:i.namespace};if(n.namespace){var e=this.namespaces.get(n.namespace);e?e.emit("event",n):this.emit("event",n)}else this.emit("event",n)}},this.transport.addListener?this.transport.addListener("message",this.listener):this.transport.addEventListener("message",this.listener)}}),ms=at.get("Signaling"),ps="wsConnectionSuccess",As="wsConnectionError",ys="wsConnectionClose",bs="broadcastEvent";class Ms extends Nt{async connect(){var t;return ms.info("Connecting to Signaling Server"),this.transactionManager&&(null==(t=this.webSocket)?void 0:t.readyState)===WebSocket.OPEN?(ms.info("Connected to server: ",this.webSocket.url),ms.debug("WebSocket value: ",{url:this.webSocket.url,protocol:this.webSocket.protocol,readyState:this.webSocket.readyState,binaryType:this.webSocket.binaryType,extensions:this.webSocket.extensions}),this.emit(ps,{ws:this.webSocket,tm:this.transactionManager}),this.webSocket):new Promise(((t,i)=>{this.webSocket=new WebSocket(this.wsUrl),this.transactionManager=new ws(this.webSocket),this.webSocket.onopen=()=>{ms.info("WebSocket opened"),this.transactionManager.on("event",(t=>{this.emit(bs,t)})),ms.info("Connected to server: ",this.webSocket.url),ms.debug("WebSocket value: ",{url:this.webSocket.url,protocol:this.webSocket.protocol,readyState:this.webSocket.readyState,binaryType:this.webSocket.binaryType,extensions:this.webSocket.extensions}),this.emit(ps,{ws:this.webSocket,tm:this.transactionManager}),t(this.webSocket)},this.webSocket.onerror=()=>{ms.error("WebSocket not connected: ",this.webSocket.url),this.emit(As,this.webSocket.url),i(this.webSocket.url)},this.webSocket.onclose=()=>{this.webSocket=null,this.transactionManager=null,ms.info("Connection closed with Signaling Server."),this.emit(ys)}}))}close(){var t;ms.info("Closing connection with Signaling Server."),null==(t=this.webSocket)||t.close()}async subscribe(t,i,e,s){var n,r,o,h;void 0===e&&(e=null),void 0===s&&(s=null),ms.info("Starting subscription to streamName: ",this.streamName),ms.debug("Subcription local description: ",t);const a=Ts(i,e,s),u={sdp:t=qe.adaptCodecName(t,"AV1X",Je.AV1),streamId:this.streamName,pinnedSourceId:a.pinnedSourceId,excludedSourceIds:a.excludedSourceIds,events:["active","inactive","layers","viewercount","vad","updated","migrate","stopped"]};a.vad&&(u.vad=!0),Array.isArray(a.events)&&(u.events=a.events),a.forcePlayoutDelay&&(u.forcePlayoutDelay=a.forcePlayoutDelay),a.layer&&(u.layer=a.layer);try{if(a.disableVideo&&a.disableAudio)throw new g("Not attempting to connect as video and audio are disabled");await this.connect(),ms.info("Sending view command");const t=await this.transactionManager.cmd("view",u),i=null==(h=null==(o=null==(r=null==(n=RTCRtpReceiver.getCapabilities)?void 0:n.call(RTCRtpReceiver,"video"))?void 0:r.codecs)?void 0:o.find)?void 0:h.call(o,(t=>"video/AV1X"===t.mimeType));return t.sdp=i?qe.adaptCodecName(t.sdp,Je.AV1,"AV1X"):t.sdp,ms.info("Command sent, subscriberId: ",t.subscriberId),ms.debug("Command result: ",t),this.serverId=t.subscriberId,this.clusterId=t.clusterId,this.streamViewId=t.streamViewId,V(this.streamName),G(this.serverId),W(t.streamViewId),q(this.clusterId),t.sdp}catch(t){throw ms.error("Error sending view command, error: ",t),t}}async publish(t,i,e,s){var n,r,o,h,a,u,c,l;void 0===e&&(e=null),void 0===s&&(s=null);const d=Ss(i,e,s);ms.info("Starting publishing to streamName: ".concat(this.streamName,", codec: ").concat(d.codec)),ms.debug("Publishing local description: ",t);const f=null!=(h=null==(o=null==(r=null==(n=rs.getCapabilities)?void 0:n.call(rs,"video"))?void 0:r.codecs)?void 0:o.map((t=>t.codec)))?h:[],v=_.values(Je);if(-1===v.indexOf(d.codec))throw ms.error("Invalid codec ".concat(d.codec,". Possible values are: "),v),new g("Invalid codec ".concat(d.codec,". Possible values are: ").concat(v));if(f.length>0&&-1===f.indexOf(d.codec))throw ms.error("Unsupported codec ".concat(d.codec,". Possible values are: "),f),new g("Unsupported codec ".concat(d.codec,". Possible values are: ").concat(f));d.codec===Je.AV1&&(t=qe.adaptCodecName(t,"AV1X",Je.AV1));const w={name:this.streamName,sdp:t,codec:d.codec,sourceId:d.sourceId};if(d.priority){if(!(Number.isInteger(d.priority)&&d.priority>=-2147483648&&d.priority<=2147483647))throw new g("Invalid value for priority option. It should be a decimal integer between the range [-2^31, +2^31 - 1]");w.priority=d.priority}null!==d.record&&(w.record=d.record),Array.isArray(d.events)&&(w.events=d.events);try{if(d.disableVideo&&d.disableAudio)throw new g("Not attempting to connect as video and audio are disabled");await this.connect(),ms.info("Sending publish command");const t=await this.transactionManager.cmd("publish",w);if(d.codec===Je.AV1){const i=null==(l=null==(c=null==(u=null==(a=RTCRtpSender.getCapabilities)?void 0:a.call(RTCRtpSender,"video"))?void 0:u.codecs)?void 0:c.find)?void 0:l.call(c,(t=>"video/AV1X"===t.mimeType));t.sdp=i?qe.adaptCodecName(t.sdp,Je.AV1,"AV1X"):t.sdp}return ms.info("Command sent, publisherId: ",t.publisherId),ms.debug("Command result: ",t),this.serverId=t.publisherId,this.clusterId=t.clusterId,V(this.streamName),G(this.serverId),Z(t.feedId),q(this.clusterId),t.sdp}catch(t){throw ms.error("Error sending publish command, error: ",t),t}}async cmd(t,i){return ms.info("Sending cmd: ".concat(t)),this.transactionManager.cmd(t,i)}constructor(t={streamName:null,url:"ws://localhost:8080/"}){super(),this.streamName=t.streamName,this.wsUrl=t.url,this.webSocket=null,this.transactionManager=null,this.serverId=null,this.clusterId=null,this.streamViewId=null}}const Ts=(t,i,e)=>{let s="object"==typeof t?t:{};return 0===_.keys(s).length&&(s={vad:t,pinnedSourceId:i,excludedSourceIds:e}),s},Ss=(t,i,e)=>{let s="object"==typeof t?t:{};if(0===_.keys(s).length){s={codec:null!=t?t:Je.H264,record:i,sourceId:e}}return s};class Ns extends g{constructor(t,i){super(t),this.name="FetchError",this.status=i}}const Is=at.get("Director"),Ds="WebRtc";let Es="",ks="https://director.millicast.com";const Ls={setEndpoint:t=>{ks=t.replace(/\/$/,"")},getEndpoint:()=>ks,setLiveDomain:t=>{Es=t.replace(/\/$/,"")},getLiveDomain:()=>Es,getPublisher:async(t,i,e)=>{void 0===i&&(i=null),void 0===e&&(e=Ds);const s=xs(t,i,e);Is.info("Getting publisher connection path for stream name: ",s.streamName);const n={streamName:s.streamName,streamType:s.streamType},r={"Content-Type":"application/json",Authorization:"Bearer ".concat(s.token)},o="".concat(Ls.getEndpoint(),"/api/director/publish");try{const t=await fetch(o,{method:"POST",headers:r,body:JSON.stringify(n)});let i=await t.json();if("fail"===i.status)throw new Ns(i.data.message,t.status);return i=js(i),Is.debug("Getting publisher response: ",i),Y(i.data.streamAccountId),i.data}catch(t){throw Is.error("Error while getting publisher connection path. ",t),t}},getSubscriber:async(t,i,e)=>{void 0===i&&(i=null),void 0===e&&(e=null);const s=Cs(t,i,e);Y(s.streamAccountId),Is.info("Getting subscriber connection data for stream name: ".concat(s.streamName," and account id: ").concat(s.streamAccountId));const n={streamAccountId:s.streamAccountId,streamName:s.streamName};let r={"Content-Type":"application/json"};s.subscriberToken&&(r=p(d({},r),{Authorization:"Bearer ".concat(s.subscriberToken)}));const o="".concat(Ls.getEndpoint(),"/api/director/subscribe");try{const t=await fetch(o,{method:"POST",headers:r,body:JSON.stringify(n)});let i=await t.json();if("fail"===i.status)throw new Ns(i.data.message,t.status);return i=js(i),Is.debug("Getting subscriber response: ",i),s.subscriberToken&&(i.data.subscriberToken=s.subscriberToken),i.data}catch(t){throw Is.error("Error while getting subscriber connection path. ",t),t}}},xs=(t,i,e)=>{let s="object"==typeof t?t:{};return 0===_.keys(s).length&&(s={token:t,streamName:i,streamType:e}),s},Cs=(t,i,e)=>{let s="object"==typeof t?t:{};return 0===_.keys(s).length&&(s={streamName:t,streamAccountId:i,subscriberToken:e}),s},js=t=>{if(Ls.getLiveDomain()){const i=/\/\/(.*?)\//,e=t.data.urls.map((t=>{const e=i.exec(t);return t.replace(e[1],Ls.getLiveDomain())}));t.data.urls=e}if(t.data.drmObject){const i=t.data.drmObject.playReadyUrl;i&&(t.data.drmObject.playReadyUrl="".concat(Ls.getEndpoint()).concat(i));const e=t.data.drmObject.widevineUrl;e&&(t.data.drmObject.widevineUrl="".concat(Ls.getEndpoint()).concat(e));const s=t.data.drmObject.fairPlayUrl;s&&(t.data.drmObject.fairPlayUrl="".concat(Ls.getEndpoint()).concat(s));const n=t.data.drmObject.fairPlayCertUrl;n&&(t.data.drmObject.fairPlayCertUrl="".concat(Ls.getEndpoint()).concat(n))}return t};function Os(t){this.message=t}Os.prototype=new g,Os.prototype.name="InvalidCharacterError";var Rs=typeof s<"u"&&s.atob&&s.atob.bind(s)||function(t){var i=String(t).replace(/=+$/,"");if(i.length%4==1)throw new Os("'atob' failed: The string to be decoded is not correctly encoded.");for(var e,s,n=0,r=0,o="";s=i.charAt(r++);~s&&(e=n%4?64*e+s:s,n++%4)?o+=String.fromCharCode(255&e>>(-2*n&6)):0)s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(s);return o};function Ps(t){this.message=t}function zs(t,i){if("string"!=typeof t)throw new Ps("Invalid token specified");var e=!0===(i=i||{}).header?0:1;try{return JSON.parse(function(t){var i=t.replace(/-/g,"+").replace(/_/g,"/");switch(i.length%4){case 0:break;case 2:i+="==";break;case 3:i+="=";break;default:throw"Illegal base64url string!"}try{return decodeURIComponent(Rs(i).replace(/(.)/g,(function(t,i){var e=i.charCodeAt(0).toString(16).toUpperCase();return e.length<2&&(e="0"+e),"%"+e})))}catch(t){return Rs(i)}}(t.split(".")[e]))}catch(t){throw new Ps("Invalid token specified: "+t.message)}}Ps.prototype=new g,Ps.prototype.name="InvalidTokenError";var Bs={exports:{}};!function(t,i){!function(e){if(null!=i&&"number"!=typeof i.nodeType)t.exports=e();else{var s=e(),n=typeof self<"u"?self:$o.global;"function"!=typeof n.btoa&&(n.btoa=s.btoa),"function"!=typeof n.atob&&(n.atob=s.atob)}}((function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function i(t){this.message=t}return i.prototype=new g,i.prototype.name="InvalidCharacterError",{btoa:function(e){for(var s,n,r,o,h=String(e),a=0,u="";a<h.length;){if(s=h.charCodeAt(a++),n=h.charCodeAt(a++),r=h.charCodeAt(a++),s>255||n>255||r>255)throw new i("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");u+=t.charAt((o=s<<16|n<<8|r)>>18&63)+t.charAt(o>>12&63)+t.charAt(o>>6&63)+t.charAt(63&o)}switch(h.length%3){case 0:return u;case 1:return u.slice(0,-2)+"==";case 2:return u.slice(0,-1)+"="}},atob:function(e){var s=String(e).replace(/[=]+$/,"");if(s.length%4==1)throw new i("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,r,o=0,h=0,a="";r=s.charAt(h++);~r&&(n=o%4?64*n+r:r,o++%4)?a+=String.fromCharCode(255&n>>(-2*o&6)):0)r=t.indexOf(r);return a}}}))}(Bs,Bs.exports);var Us=Bs.exports,Qs={exports:{}};!function(t,i){var e;self,e=()=>{return t={7629:(t,i,e)=>{const s=e(375),n=e(8571),r=e(9474),o=e(1687),h=e(8652),a=e(8160),u=e(3292),c=e(6354),l=e(8901),d=e(9708),f=e(6914),v=e(2294),w=e(6133),m=e(1152),p=e(8863),A=e(2036),y={Base:class{Ud(){this.Qd=new v.Ids,this.Fd=null,this.Yd=new w.Manager,this.Vd=null,this.Gd=null,this.Wd=null,this.Zd={},this.Hd=[],this.Xd=new Map,this.$_terms={},this.$_temp={ruleset:null,whens:{}}}describe(){return s("function"==typeof d.describe,"Manifest functionality disabled"),d.describe(this)}allow(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];return a.verifyFlat(i,"allow"),this.qd(i,"Gd")}alter(t){s(t&&"object"==typeof t&&!Array.isArray(t),"Invalid targets argument"),s(!this.Kd(),"Cannot set alterations inside a ruleset");const i=this.clone();i.$_terms.alterations=i.$_terms.alterations||[];for(const e in t){const n=t[e];s("function"==typeof n,"Alteration adjuster for",e,"must be a function"),i.$_terms.alterations.push({target:e,adjuster:n})}return i.$_temp.ruleset=!1,i}artifact(t){return s(void 0!==t,"Artifact cannot be undefined"),s(!this.Vd,"Cannot set an artifact with a rule cache"),this.$_setFlag("artifact",t)}cast(t){return s(!1===t||"string"==typeof t,"Invalid to value"),s(!1===t||this.Jd.cast[t],"Type",this.type,"does not support casting to",t),this.$_setFlag("cast",!1===t?void 0:t)}default(t,i){return this.$d("default",t,i)}description(t){return s(t&&"string"==typeof t,"Description must be a non-empty string"),this.$_setFlag("description",t)}empty(t){const i=this.clone();return void 0!==t&&(t=i.$_compile(t,{override:!1})),i.$_setFlag("empty",t,{clone:!1})}error(t){return s(t,"Missing error"),s(t instanceof g||"function"==typeof t,"Must provide a valid Error object or a function"),this.$_setFlag("error",t)}example(t,i){return void 0===i&&(i={}),s(void 0!==t,"Missing example"),a.assertOptions(i,["override"]),this.tf("examples",t,{single:!0,override:i.override})}external(t,i){return"object"==typeof t&&(s(!i,"Cannot combine options with description"),i=t.description,t=t.method),s("function"==typeof t,"Method must be a function"),s(void 0===i||i&&"string"==typeof i,"Description must be a non-empty string"),this.tf("externals",{method:t,description:i},{single:!0})}failover(t,i){return this.$d("failover",t,i)}forbidden(){return this.presence("forbidden")}id(t){return t?(s("string"==typeof t,"id must be a non-empty string"),s(/^[^\.]+$/.test(t),"id cannot contain period character"),this.$_setFlag("id",t)):this.$_setFlag("id",void 0)}invalid(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];return this.qd(i,"Wd")}label(t){return s(t&&"string"==typeof t,"Label name must be a non-empty string"),this.$_setFlag("label",t)}meta(t){return s(void 0!==t,"Meta cannot be undefined"),this.tf("metas",t,{single:!0})}note(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];s(i.length,"Missing notes");for(const t of i)s(t&&"string"==typeof t,"Notes must be non-empty strings");return this.tf("notes",i)}only(t){return void 0===t&&(t=!0),s("boolean"==typeof t,"Invalid mode:",t),this.$_setFlag("only",t)}optional(){return this.presence("optional")}prefs(t){s(t,"Missing preferences"),s(void 0===t.context,"Cannot override context"),s(void 0===t.externals,"Cannot override externals"),s(void 0===t.warnings,"Cannot override warnings"),s(void 0===t.debug,"Cannot override debug"),a.checkPreferences(t);const i=this.clone();return i.Fd=a.preferences(i.Fd,t),i}presence(t){return s(["optional","required","forbidden"].includes(t),"Unknown presence mode",t),this.$_setFlag("presence",t)}raw(t){return void 0===t&&(t=!0),this.$_setFlag("result",t?"raw":void 0)}result(t){return s(["raw","strip"].includes(t),"Unknown result mode",t),this.$_setFlag("result",t)}required(){return this.presence("required")}strict(t){const i=this.clone(),e=void 0!==t&&!t;return i.Fd=a.preferences(i.Fd,{convert:e}),i}strip(t){return void 0===t&&(t=!0),this.$_setFlag("result",t?"strip":void 0)}tag(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];s(i.length,"Missing tags");for(const t of i)s(t&&"string"==typeof t,"Tags must be non-empty strings");return this.tf("tags",i)}unit(t){return s(t&&"string"==typeof t,"Unit name must be a non-empty string"),this.$_setFlag("unit",t)}valid(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];a.verifyFlat(i,"valid");const s=this.allow(...i);return s.$_setFlag("only",!!s.Gd,{clone:!1}),s}when(t,i){const e=this.clone();e.$_terms.whens||(e.$_terms.whens=[]);const n=u.when(e,t,i);if(!["any","link"].includes(e.type)){const t=n.is?[n]:n.switch;for(const i of t)s(!i.then||"any"===i.then.type||i.then.type===e.type,"Cannot combine",e.type,"with",i.then&&i.then.type),s(!i.otherwise||"any"===i.otherwise.type||i.otherwise.type===e.type,"Cannot combine",e.type,"with",i.otherwise&&i.otherwise.type)}return e.$_terms.whens.push(n),e.$_mutateRebuild()}cache(t){s(!this.Kd(),"Cannot set caching inside a ruleset"),s(!this.Vd,"Cannot override schema cache"),s(void 0===this.Zd.artifact,"Cannot cache a rule with an artifact");const i=this.clone();return i.Vd=t||h.provider.provision(),i.$_temp.ruleset=!1,i}clone(){const t=_.create(_.getPrototypeOf(this));return this.ef(t)}concat(t){s(a.isSchema(t),"Invalid schema object"),s("any"===this.type||"any"===t.type||t.type===this.type,"Cannot merge type",this.type,"with another type:",t.type),s(!this.Kd(),"Cannot concatenate onto a schema with open ruleset"),s(!t.Kd(),"Cannot concatenate a schema with open ruleset");let i=this.clone();if("any"===this.type&&"any"!==t.type){const e=t.clone();for(const t of _.keys(i))"type"!==t&&(e[t]=i[t]);i=e}i.Qd.concat(t.Qd),i.Yd.register(t,w.toSibling),i.Fd=i.Fd?a.preferences(i.Fd,t.Fd):t.Fd,i.Gd=A.merge(i.Gd,t.Gd,t.Wd),i.Wd=A.merge(i.Wd,t.Wd,t.Gd);for(const e of t.Xd.keys())i.Xd.has(e)&&(i.Hd=i.Hd.filter((t=>t.keep||t.name!==e)),i.Xd.delete(e));for(const e of t.Hd)t.Jd.rules[e.method].multi||i.Xd.set(e.name,e),i.Hd.push(e);if(i.Zd.empty&&t.Zd.empty){i.Zd.empty=i.Zd.empty.concat(t.Zd.empty);const e=_.assign({},t.Zd);delete e.empty,o(i.Zd,e)}else if(t.Zd.empty){i.Zd.empty=t.Zd.empty;const e=_.assign({},t.Zd);delete e.empty,o(i.Zd,e)}else o(i.Zd,t.Zd);for(const e in t.$_terms){const s=t.$_terms[e];s?i.$_terms[e]?i.$_terms[e]=i.$_terms[e].concat(s):i.$_terms[e]=s.slice():i.$_terms[e]||(i.$_terms[e]=s)}return this.$_root.nf&&this.$_root.nf.rf(i,[this,t]),i.$_mutateRebuild()}extend(t){return s(!t.base,"Cannot extend type with another base"),l.type(this,t)}extract(t){return t=Array.isArray(t)?t:t.split("."),this.Qd.reach(t)}fork(t,i){s(!this.Kd(),"Cannot fork inside a ruleset");let e=this;for(let s of[].concat(t))s=Array.isArray(s)?s:s.split("."),e=e.Qd.fork(s,i,e);return e.$_temp.ruleset=!1,e}rule(t){const i=this.Jd;a.assertOptions(t,_.keys(i.modifiers)),s(!1!==this.$_temp.ruleset,"Cannot apply rules to empty ruleset or the last rule added does not support rule properties");const e=null===this.$_temp.ruleset?this.Hd.length-1:this.$_temp.ruleset;s(e>=0&&e<this.Hd.length,"Cannot apply rules to empty ruleset");const r=this.clone();for(let o=e;o<r.Hd.length;++o){const e=r.Hd[o],h=n(e);for(const n in t)i.modifiers[n](h,t[n]),s(h.name===e.name,"Cannot change rule name");r.Hd[o]=h,r.Xd.get(h.name)===e&&r.Xd.set(h.name,h)}return r.$_temp.ruleset=!1,r.$_mutateRebuild()}get ruleset(){s(!this.Kd(),"Cannot start a new ruleset without closing the previous one");const t=this.clone();return t.$_temp.ruleset=t.Hd.length,t}get $(){return this.ruleset}tailor(t){t=[].concat(t),s(!this.Kd(),"Cannot tailor inside a ruleset");let i=this;if(this.$_terms.alterations)for(const{target:e,adjuster:n}of this.$_terms.alterations)t.includes(e)&&(i=n(i),s(a.isSchema(i),"Alteration adjuster for",e,"failed to return a schema object"));return i=i.$_modify({each:i=>i.tailor(t),ref:!1}),i.$_temp.ruleset=!1,i.$_mutateRebuild()}tracer(){return m.location?m.location(this):this}validate(t,i){return p.entry(t,this,i)}validateAsync(t,i){return p.entryAsync(t,this,i)}$_addRule(t){"string"==typeof t&&(t={name:t}),s(t&&"object"==typeof t,"Invalid options"),s(t.name&&"string"==typeof t.name,"Invalid rule name");for(const i in t)s("_"!==i[0],"Cannot set private rule properties");const i=_.assign({},t);i.hf=[],i.method=i.method||i.name;const e=this.Jd.rules[i.method],n=i.args;s(e,"Unknown rule",i.method);const r=this.clone();if(n){s(1===_.keys(n).length||_.keys(n).length===this.Jd.rules[i.name].args.length,"Invalid rule definition for",this.type,i.name);for(const t in n){let o=n[t];if(e.argsByName){const h=e.argsByName.get(t);if(h.ref&&a.isResolvable(o))i.hf.push(t),r.$_mutateRegister(o);else if(h.normalize&&(o=h.normalize(o),n[t]=o),h.assert){const i=a.validateArg(o,t,h);s(!i,i,"or reference")}}void 0!==o?n[t]=o:delete n[t]}}return e.multi||(r.uf(i.name,{clone:!1}),r.Xd.set(i.name,i)),!1===r.$_temp.ruleset&&(r.$_temp.ruleset=null),e.priority?r.Hd.unshift(i):r.Hd.push(i),r}$_compile(t,i){return u.schema(this.$_root,t,i)}$_createError(t,i,e,s,n,r){void 0===r&&(r={});const o=!1!==r.flags?this.Zd:{},h=r.messages?f.merge(this.Jd.messages,r.messages):this.Jd.messages;return new c.Report(t,i,e,o,h,s,n)}$_getFlag(t){return this.Zd[t]}$_getRule(t){return this.Xd.get(t)}$_mapLabels(t){return t=Array.isArray(t)?t:t.split("."),this.Qd.labels(t)}$_match(t,i,e,s){(e=_.assign({},e)).abortEarly=!0,e.cf=!1,i.snapshot();const n=!p.validate(t,this,i,e,s).errors;return i.restore(),n}$_modify(t){return a.assertOptions(t,["each","once","ref","schema"]),v.schema(this,t)||this}$_mutateRebuild(){return s(!this.Kd(),"Cannot add this rule inside a ruleset"),this.Yd.reset(),this.Qd.reset(),this.$_modify({each:(t,i)=>{let{source:e,name:s,path:n,key:r}=i;const o=this.Jd[e][s]&&this.Jd[e][s].register;!1!==o&&this.$_mutateRegister(t,{family:o,key:r})}}),this.Jd.rebuild&&this.Jd.rebuild(this),this.$_temp.ruleset=!1,this}$_mutateRegister(t,i){let{family:e,key:s}=void 0===i?{}:i;this.Yd.register(t,e),this.Qd.register(t,{key:s})}$_property(t){return this.Jd.properties[t]}$_reach(t){return this.Qd.reach(t)}$_rootReferences(){return this.Yd.roots()}$_setFlag(t,i,e){void 0===e&&(e={}),s("_"===t[0]||!this.Kd(),"Cannot set flag inside a ruleset");const n=this.Jd.flags[t]||{};if(r(i,n.default)&&(i=void 0),r(i,this.Zd[t]))return this;const o=!1!==e.clone?this.clone():this;return void 0!==i?(o.Zd[t]=i,o.$_mutateRegister(i)):delete o.Zd[t],"_"!==t[0]&&(o.$_temp.ruleset=!1),o}$_parent(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];return this[t][a.symbols.parent].call(this,...e)}$_validate(t,i,e){return p.validate(t,this,i,e)}ef(t){t.type=this.type,t.$_root=this.$_root,t.$_temp=_.assign({},this.$_temp),t.$_temp.whens={},t.Qd=this.Qd.clone(),t.Fd=this.Fd,t.Gd=this.Gd&&this.Gd.clone(),t.Wd=this.Wd&&this.Wd.clone(),t.Hd=this.Hd.slice(),t.Xd=n(this.Xd,{shallow:!0}),t.Yd=this.Yd.clone(),t.Zd=_.assign({},this.Zd),t.Vd=null,t.$_terms={};for(const i in this.$_terms)t.$_terms[i]=this.$_terms[i]?this.$_terms[i].slice():null;t.$_super={};for(const i in this.$_super)t.$_super[i]=this.lf[i].bind(t);return t}df(){const t=this.clone();t.Ud();const i=t.Jd.terms;for(const e in i){const s=i[e];t.$_terms[e]=s.init}return t.$_mutateRebuild()}$d(t,i,e){return void 0===e&&(e={}),a.assertOptions(e,"literal"),s(void 0!==i,"Missing",t,"value"),s("function"==typeof i||!e.literal,"Only function value supports literal option"),"function"==typeof i&&e.literal&&(i={[a.symbols.literal]:!0,literal:i}),this.$_setFlag(t,i)}gf(t,i,e){if(!this.$_terms.whens)return{schema:this};const s=[],n=[];for(let r=0;r<this.$_terms.whens.length;++r){const o=this.$_terms.whens[r];if(o.concat){s.push(o.concat),n.push("".concat(r,".concat"));continue}const h=o.ref?o.ref.resolve(t,i,e):t,a=o.is?[o]:o.switch,u=n.length;for(let u=0;u<a.length;++u){const{is:c,then:l,otherwise:d}=a[u],f="".concat(r).concat(o.switch?"."+u:"");if(c.$_match(h,i.nest(c,"".concat(f,".is")),e)){if(l){const r=i.localize([...i.path,"".concat(f,".then")],i.ancestors,i.schemas),{schema:o,id:h}=l.gf(t,r,e);s.push(o),n.push("".concat(f,".then").concat(h?"(".concat(h,")"):""));break}}else if(d){const r=i.localize([...i.path,"".concat(f,".otherwise")],i.ancestors,i.schemas),{schema:o,id:h}=d.gf(t,r,e);s.push(o),n.push("".concat(f,".otherwise").concat(h?"(".concat(h,")"):""));break}}if(o.break&&n.length>u)break}const r=n.join(", ");if(i.mainstay.tracer.debug(i,"rule","when",r),!r)return{schema:this};if(!i.mainstay.tracer.active&&this.$_temp.whens[r])return{schema:this.$_temp.whens[r],id:r};let o=this;this.Jd.generate&&(o=this.Jd.generate(this,t,i,e));for(const t of s)o=o.concat(t);return this.$_root.nf&&this.$_root.nf.rf(o,[this,...s]),this.$_temp.whens[r]=o,{schema:o,id:r}}tf(t,i,e){void 0===e&&(e={}),s(!this.Kd(),"Cannot set ".concat(t," inside a ruleset"));const n=this.clone();return n.$_terms[t]&&!e.override||(n.$_terms[t]=[]),e.single?n.$_terms[t].push(i):n.$_terms[t].push(...i),n.$_temp.ruleset=!1,n}Kd(){return null!==this.$_temp.ruleset&&!1!==this.$_temp.ruleset}uf(t,i){if(void 0===i&&(i={}),!this.Xd.has(t))return this;const e=!1!==i.clone?this.clone():this;e.Xd.delete(t);const s=[];for(let i=0;i<e.Hd.length;++i){const n=e.Hd[i];n.name!==t||n.keep?s.push(n):e.Kd()&&i<e.$_temp.ruleset&&--e.$_temp.ruleset}return e.Hd=s,e}qd(t,i){a.verifyFlat(t,i.slice(1,-1));const e=this.clone(),n=t[0]===a.symbols.override;if(n&&(t=t.slice(1)),!e[i]&&t.length?e[i]=new A:n&&(e[i]=t.length?new A:null,e.$_mutateRebuild()),!e[i])return e;n&&e[i].override();for(const n of t){s(void 0!==n,"Cannot call allow/valid/invalid with undefined"),s(n!==a.symbols.override,"Override must be the first value");const t="Wd"===i?"Gd":"Wd";e[t]&&(e[t].remove(n),e[t].length||(s("Gd"===i||!e.Zd.only,"Setting invalid value",n,"leaves schema rejecting all values due to previous valid rule"),e[t]=null)),e[i].add(n,e.Yd)}return e}constructor(t){this.type=t,this.$_root=null,this.Jd={},this.Ud()}}};y.Base.prototype[a.symbols.any]={version:a.version,compile:u.compile,root:"$_root"},y.Base.prototype.isImmutable=!0,y.Base.prototype.deny=y.Base.prototype.invalid,y.Base.prototype.disallow=y.Base.prototype.invalid,y.Base.prototype.equal=y.Base.prototype.valid,y.Base.prototype.exist=y.Base.prototype.required,y.Base.prototype.not=y.Base.prototype.invalid,y.Base.prototype.options=y.Base.prototype.prefs,y.Base.prototype.preferences=y.Base.prototype.prefs,t.exports=new y.Base},8652:(t,i,e)=>{const s=e(375),n=e(8571),r=e(8160),o={max:1e3,supported:new Set(["undefined","boolean","number","string"])};i.provider={provision:t=>new o.Cache(t)},o.Cache=class{get length(){return this._f.size}set(t,i){if(null!==t&&!o.supported.has(typeof t))return;let e=this._f.get(t);if(e)return e.value=i,void this.vf.first(e);e=this.vf.unshift({key:t,value:i}),this._f.set(t,e),this.wf()}get(t){const i=this._f.get(t);if(i)return this.vf.first(i),n(i.value)}wf(){if(this._f.size>this.mf){const t=this.vf.pop();this._f.delete(t.key)}}constructor(t={}){r.assertOptions(t,["max"]),s(void 0===t.max||t.max&&t.max>0&&isFinite(t.max),"Invalid max cache size"),this.mf=t.max||o.max,this._f=new Map,this.vf=new o.List}},o.List=class{unshift(t){return t.next=null,t.prev=this.head,this.head&&(this.head.next=t),this.head=t,this.tail||(this.tail=t),t}first(t){t!==this.head&&(this.pf(t),this.unshift(t))}pop(){return this.pf(this.tail)}pf(t){const{next:i,prev:e}=t;return i.prev=e,e&&(e.next=i),t===this.tail&&(this.tail=i),t.prev=null,t.next=null,t}constructor(){this.tail=null,this.head=null}}},8160:(t,i,e)=>{const s=e(375),n=e(7916),r=e(5934);let o,h;const a={isoDate:/^(?:[-+]\d{2})?(?:\d{4}(?!\d{2}\b))(?:(-?)(?:(?:0[1-9]|1[0-2])(?:\1(?:[12]\d|0[1-9]|3[01]))?|W(?:[0-4]\d|5[0-2])(?:-?[1-7])?|(?:00[1-9]|0[1-9]\d|[12]\d{2}|3(?:[0-5]\d|6[1-6])))(?![T]$|[T][\d]+Z$)(?:[T\s](?:(?:(?:[01]\d|2[0-3])(?:(:?)[0-5]\d)?|24\:?00)(?:[.,]\d+(?!:))?)(?:\2[0-5]\d(?:[.,]\d+)?)?(?:[Z]|(?:[+-])(?:[01]\d|2[0-3])(?::?[0-5]\d)?)?)?)?$/};i.version=r.version,i.defaults={abortEarly:!0,allowUnknown:!1,artifacts:!1,cache:!0,context:null,convert:!0,dateFormat:"iso",errors:{escapeHtml:!1,label:"path",language:null,render:!0,stack:!1,wrap:{label:'"',array:"[]"}},externals:!0,messages:{},nonEnumerables:!1,noDefaults:!1,presence:"optional",skipFunctions:!1,stripUnknown:!1,warnings:!1},i.symbols={any:It("@hapi/joi/schema"),arraySingle:b("arraySingle"),deepDefault:b("deepDefault"),errors:b("errors"),literal:b("literal"),override:b("override"),parent:b("parent"),prefs:b("prefs"),ref:b("ref"),template:b("template"),values:b("values")},i.assertOptions=function(t,i,e){void 0===e&&(e="Options"),s(t&&"object"==typeof t&&!Array.isArray(t),"Options must be of type object");const n=_.keys(t).filter((t=>!i.includes(t)));s(0===n.length,"".concat(e," contain unknown keys: ").concat(n))},i.checkPreferences=function(t){h=h||e(3378);const i=h.preferences.validate(t);if(i.error)throw new n([i.error.details[0].message])},i.compare=function(t,i,e){switch(e){case"=":return t===i;case">":return t>i;case"<":return t<i;case">=":return t>=i;case"<=":return t<=i}},i.default=function(t,i){return void 0===t?i:t},i.isIsoDate=function(t){return a.isoDate.test(t)},i.isNumber=function(t){return"number"==typeof t&&!j(t)},i.isResolvable=function(t){return!!t&&(t[i.symbols.ref]||t[i.symbols.template])},i.isSchema=function(t,e){void 0===e&&(e={});const n=t&&t[i.symbols.any];return!!n&&(s(e.legacy||n.version===i.version,"Cannot mix different versions of joi schemas"),!0)},i.isValues=function(t){return t[i.symbols.values]},i.limit=function(t){return Number.isSafeInteger(t)&&t>=0},i.preferences=function(t,s){o=o||e(6914),t=t||{},s=s||{};const n=_.assign({},t,s);return s.errors&&t.errors&&(n.errors=_.assign({},t.errors,s.errors),n.errors.wrap=_.assign({},t.errors.wrap,s.errors.wrap)),s.messages&&(n.messages=o.compile(s.messages,t.messages)),delete n[i.symbols.prefs],n},i.tryWithPath=function(t,i,e){void 0===e&&(e={});try{return t()}catch(t){throw void 0!==t.path?t.path=i+"."+t.path:t.path=i,e.append&&(t.message="".concat(t.message," (").concat(t.path,")")),t}},i.validateArg=function(t,e,s){let{assert:n,message:r}=s;if(i.isSchema(n)){const i=n.validate(t);return i.error?i.error.message:void 0}if(!n(t))return e?"".concat(e," ").concat(r):r},i.verifyFlat=function(t,i){for(const e of t)s(!Array.isArray(e),"Method no longer accepts array arguments:",i)}},3292:(t,i,e)=>{const s=e(375),n=e(8160),r=e(6133),o={};i.schema=function(t,i,e){void 0===e&&(e={}),n.assertOptions(e,["appendPath","override"]);try{return o.schema(t,i,e)}catch(t){throw e.appendPath&&void 0!==t.path&&(t.message="".concat(t.message," (").concat(t.path,")")),t}},o.schema=function(t,i,e){s(void 0!==i,"Invalid undefined schema"),Array.isArray(i)&&(s(i.length,"Invalid empty array schema"),1===i.length&&(i=i[0]));const r=function(i){for(var s=arguments.length,n=new Array(s>1?s-1:0),r=1;r<s;r++)n[r-1]=arguments[r];return!1!==e.override?i.valid(t.override,...n):i.valid(...n)};if(o.simple(i))return r(t,i);if("function"==typeof i)return t.custom(i);if(s("object"==typeof i,"Invalid schema content:",typeof i),n.isResolvable(i))return r(t,i);if(n.isSchema(i))return i;if(Array.isArray(i)){for(const e of i)if(!o.simple(e))return t.alternatives().try(...i);return r(t,...i)}return i instanceof RegExp?t.string().regex(i):i instanceof Date?r(t.date(),i):(s(_.getPrototypeOf(i)===_.getPrototypeOf({}),"Schema can only contain plain objects"),t.object().keys(i))},i.ref=function(t,i){return r.isRef(t)?t:r.create(t,i)},i.compile=function(t,e,r){void 0===r&&(r={}),n.assertOptions(r,["legacy"]);const h=e&&e[n.symbols.any];if(h)return s(r.legacy||h.version===n.version,"Cannot mix different versions of joi schemas:",h.version,n.version),e;if("object"!=typeof e||!r.legacy)return i.schema(t,e,{appendPath:!0});const a=o.walk(e);return a?a.compile(a.root,e):i.schema(t,e,{appendPath:!0})},o.walk=function(t){if("object"!=typeof t)return null;if(Array.isArray(t)){for(const i of t){const t=o.walk(i);if(t)return t}return null}const i=t[n.symbols.any];if(i)return{root:t[i.root],compile:i.compile};s(_.getPrototypeOf(t)===_.getPrototypeOf({}),"Schema can only contain plain objects");for(const i in t){const e=o.walk(t[i]);if(e)return e}return null},o.simple=function(t){return null===t||["boolean","string","number"].includes(typeof t)},i.when=function(t,e,h){if(void 0===h&&(s(e&&"object"==typeof e,"Missing options"),h=e,e=r.create(".")),Array.isArray(h)&&(h={switch:h}),n.assertOptions(h,["is","not","then","otherwise","switch","break"]),n.isSchema(e))return s(void 0===h.is,'"is" can not be used with a schema condition'),s(void 0===h.not,'"not" can not be used with a schema condition'),s(void 0===h.switch,'"switch" can not be used with a schema condition'),o.condition(t,{is:e,then:h.then,otherwise:h.otherwise,break:h.break});if(s(r.isRef(e)||"string"==typeof e,"Invalid condition:",e),s(void 0===h.not||void 0===h.is,'Cannot combine "is" with "not"'),void 0===h.switch){let a=h;void 0!==h.not&&(a={is:h.not,then:h.otherwise,otherwise:h.then,break:h.break});let u=void 0!==a.is?t.$_compile(a.is):t.$_root.invalid(null,!1,0,"").required();return s(void 0!==a.then||void 0!==a.otherwise,'options must have at least one of "then", "otherwise", or "switch"'),s(void 0===a.break||void 0===a.then||void 0===a.otherwise,"Cannot specify then, otherwise, and break all together"),void 0===h.is||r.isRef(h.is)||n.isSchema(h.is)||(u=u.required()),o.condition(t,{ref:i.ref(e),is:u,then:a.then,otherwise:a.otherwise,break:a.break})}s(Array.isArray(h.switch),'"switch" must be an array'),s(void 0===h.is,'Cannot combine "switch" with "is"'),s(void 0===h.not,'Cannot combine "switch" with "not"'),s(void 0===h.then,'Cannot combine "switch" with "then"');const a={ref:i.ref(e),switch:[],break:h.break};for(let i=0;i<h.switch.length;++i){const e=h.switch[i],o=i===h.switch.length-1;n.assertOptions(e,o?["is","then","otherwise"]:["is","then"]),s(void 0!==e.is,'Switch statement missing "is"'),s(void 0!==e.then,'Switch statement missing "then"');const u={is:t.$_compile(e.is),then:t.$_compile(e.then)};if(r.isRef(e.is)||n.isSchema(e.is)||(u.is=u.is.required()),o){s(void 0===h.otherwise||void 0===e.otherwise,'Cannot specify "otherwise" inside and outside a "switch"');const i=void 0!==h.otherwise?h.otherwise:e.otherwise;void 0!==i&&(s(void 0===a.break,"Cannot specify both otherwise and break"),u.otherwise=t.$_compile(i))}a.switch.push(u)}return a},o.condition=function(t,i){for(const e of["then","otherwise"])void 0===i[e]?delete i[e]:i[e]=t.$_compile(i[e]);return i}},6354:(t,i,e)=>{const s=e(5688),n=e(8160),r=e(3328);i.Report=class{Af(t){if(this.template=t,!this.flags.label&&0===this.path.length){const t=this.yf(this.template,"root");t&&(this.local.label=t)}}toString(){if(this.message)return this.message;const t=this.code;if(!this.prefs.errors.render)return this.code;const i=this.yf(this.template)||this.yf(this.prefs.messages)||this.yf(this.messages);return void 0===i?'Error code "'.concat(t,'" is not defined, your custom type is missing the correct messages definition'):(this.message=i.render(this.value,this.state,this.prefs,this.local,{errors:this.prefs.errors,messages:[this.prefs.messages,this.messages]}),this.prefs.errors.label||(this.message=this.message.replace(/^"" /,"").trim()),this.message)}yf(t,e){return i.template(this.value,t,e||this.code,this.state,this.prefs)}constructor(t,e,s,n,r,o,h){if(this.code=t,this.flags=n,this.messages=r,this.path=o.path,this.prefs=h,this.state=o,this.value=e,this.message=null,this.template=null,this.local=s||{},this.local.label=i.label(this.flags,this.state,this.prefs,this.messages),void 0===this.value||this.local.hasOwnProperty("value")||(this.local.value=this.value),this.path.length){const t=this.path[this.path.length-1];"object"!=typeof t&&(this.local.key=t)}}},i.path=function(t){let i="";for(const e of t)"object"!=typeof e&&("string"==typeof e?(i&&(i+="."),i+=e):i+="[".concat(e,"]"));return i},i.template=function(t,i,e,s,o){if(!i)return;if(r.isTemplate(i))return"root"!==e?i:null;let h=o.errors.language;if(n.isResolvable(h)&&(h=h.resolve(t,s,o)),h&&i[h]){if(void 0!==i[h][e])return i[h][e];if(void 0!==i[h]["*"])return i[h]["*"]}return i[e]?i[e]:i["*"]},i.label=function(t,e,s,n){if(!s.errors.label)return"";if(t.label)return t.label;let r=e.path;return"key"===s.errors.label&&e.path.length>1&&(r=e.path.slice(-1)),i.path(r)||i.template(null,s.messages,"root",e,s)||n&&i.template(null,n,"root",e,s)||"value"},i.process=function(t,e,s){if(!t)return null;const{override:n,message:r,details:o}=i.details(t);if(n)return n;if(s.errors.stack)return new i.ValidationError(r,o,e);const h=g.stackTraceLimit;g.stackTraceLimit=0;const a=new i.ValidationError(r,o,e);return g.stackTraceLimit=h,a},i.details=function(t,i){void 0===i&&(i={});let e=[];const s=[];for(const n of t){if(n instanceof g){if(!1!==i.override)return{override:n};const t=n.toString();e.push(t),s.push({message:t,type:"override",context:{error:n}});continue}const t=n.toString();e.push(t),s.push({message:t,path:n.path.filter((t=>"object"!=typeof t)),type:n.code,context:n.local})}return e.length>1&&(e=[...new Set(e)]),{message:e.join(". "),details:s}},i.ValidationError=class extends g{static isError(t){return t instanceof i.ValidationError}constructor(t,i,e){super(t),this.bf=e,this.details=i}},i.ValidationError.prototype.isJoi=!0,i.ValidationError.prototype.name="ValidationError",i.ValidationError.prototype.annotate=s.error},8901:(t,i,e)=>{const s=e(375),n=e(8571),r=e(8160),o=e(6914),h={};i.type=function(t,i){const e=_.getPrototypeOf(t),a=n(e),u=t.ef(_.create(a)),c=_.assign({},i);delete c.base,a.Jd=c;const l=e.Jd||{};c.messages=o.merge(l.messages,c.messages),c.properties=_.assign({},l.properties,c.properties),u.type=c.type,c.flags=_.assign({},l.flags,c.flags);const d=_.assign({},l.terms);if(c.terms)for(const t in c.terms){const i=c.terms[t];s(void 0===u.$_terms[t],"Invalid term override for",c.type,t),u.$_terms[t]=i.init,d[t]=i}c.terms=d,c.args||(c.args=l.args),c.prepare=h.prepare(c.prepare,l.prepare),c.coerce&&("function"==typeof c.coerce&&(c.coerce={method:c.coerce}),c.coerce.from&&!Array.isArray(c.coerce.from)&&(c.coerce={method:c.coerce.method,from:[].concat(c.coerce.from)})),c.coerce=h.coerce(c.coerce,l.coerce),c.validate=h.validate(c.validate,l.validate);const f=_.assign({},l.rules);if(c.rules)for(const t in c.rules){const i=c.rules[t];s("object"==typeof i,"Invalid rule definition for",c.type,t);let e=i.method;if(void 0===e&&(e=function(){return this.$_addRule(t)}),e&&(s(!a[t],"Rule conflict in",c.type,t),a[t]=e),s(!f[t],"Rule conflict in",c.type,t),f[t]=i,i.alias){const t=[].concat(i.alias);for(const e of t)a[e]=i.method}i.args&&(i.argsByName=new Map,i.args=i.args.map((t=>("string"==typeof t&&(t={name:t}),s(!i.argsByName.has(t.name),"Duplicated argument name",t.name),r.isSchema(t.assert)&&(t.assert=t.assert.strict().label(t.name)),i.argsByName.set(t.name,t),t))))}c.rules=f;const g=_.assign({},l.modifiers);if(c.modifiers)for(const t in c.modifiers){s(!a[t],"Rule conflict in",c.type,t);const i=c.modifiers[t];s("function"==typeof i,"Invalid modifier definition for",c.type,t);const e=function(i){return this.rule({[t]:i})};a[t]=e,g[t]=i}if(c.modifiers=g,c.overrides){a.lf=e,u.$_super={};for(const t in c.overrides)s(e[t],"Cannot override missing",t),c.overrides[t][r.symbols.parent]=e[t],u.$_super[t]=e[t].bind(u);_.assign(a,c.overrides)}c.cast=_.assign({},l.cast,c.cast);const v=_.assign({},l.manifest,c.manifest);return v.build=h.build(c.manifest&&c.manifest.build,l.manifest&&l.manifest.build),c.manifest=v,c.rebuild=h.rebuild(c.rebuild,l.rebuild),u},h.build=function(t,i){return t&&i?function(e,s){return i(t(e,s),s)}:t||i},h.coerce=function(t,i){return t&&i?{from:t.from&&i.from?[...new Set([...t.from,...i.from])]:null,method(e,s){let n;if((!i.from||i.from.includes(typeof e))&&(n=i.method(e,s),n)){if(n.errors||void 0===n.value)return n;e=n.value}if(!t.from||t.from.includes(typeof e)){const i=t.method(e,s);if(i)return i}return n}}:t||i},h.prepare=function(t,i){return t&&i?function(e,s){const n=t(e,s);if(n){if(n.errors||void 0===n.value)return n;e=n.value}return i(e,s)||n}:t||i},h.rebuild=function(t,i){return t&&i?function(e){i(e),t(e)}:t||i},h.validate=function(t,i){return t&&i?function(e,s){const n=i(e,s);if(n){if(n.errors&&(!Array.isArray(n.errors)||n.errors.length))return n;e=n.value}return t(e,s)||n}:t||i}},5107:(t,i,e)=>{const s=e(375),n=e(8571),r=e(8652),o=e(8160),h=e(3292),a=e(6354),u=e(8901),c=e(9708),l=e(6133),d=e(3328),f=e(1152);let v;const w={types:{alternatives:e(4946),any:e(8068),array:e(546),boolean:e(4937),date:e(7500),function:e(390),link:e(8785),number:e(3832),object:e(8966),string:e(7417),symbol:e(8826)},aliases:{alt:"alternatives",bool:"boolean",func:"function"},root:function(){const t={Mf:new Set(_.keys(w.types))};for(const i of t.Mf)t[i]=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return s(!e.length||["alternatives","link","object"].includes(i),"The",i,"type does not allow arguments"),w.generate(this,w.types[i],e)};for(const i of["allow","custom","disallow","equal","exist","forbidden","invalid","not","only","optional","options","prefs","preferences","required","strip","valid","when"])t[i]=function(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];return this.any()[i](...e)};_.assign(t,w.methods);for(const i in w.aliases){const e=w.aliases[i];t[i]=t[e]}return t.x=t.expression,f.setup&&f.setup(t),t}};w.methods={ValidationError:a.ValidationError,version:o.version,cache:r.provider,assert(t,i){for(var e=arguments.length,s=new Array(e>2?e-2:0),n=2;n<e;n++)s[n-2]=arguments[n];w.assert(t,i,!0,s)},attempt:function(t,i){for(var e=arguments.length,s=new Array(e>2?e-2:0),n=2;n<e;n++)s[n-2]=arguments[n];return w.assert(t,i,!1,s)},build(t){return s("function"==typeof c.build,"Manifest functionality disabled"),c.build(this,t)},checkPreferences(t){o.checkPreferences(t)},compile(t,i){return h.compile(this,t,i)},defaults(t){s("function"==typeof t,"modifier must be a function");const i=_.assign({},this);for(const e of i.Mf){const n=t(i[e]());s(o.isSchema(n),"modifier must return a valid schema object"),i[e]=function(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];return w.generate(this,n,i)}}return i},expression:function(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];return new d(...i)},extend(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];o.verifyFlat(i,"extend"),v=v||e(3378),s(i.length,"You need to provide at least one extension"),this.assert(i,v.extensions);const r=_.assign({},this);r.Mf=new Set(r.Mf);for(let t of i){"function"==typeof t&&(t=t(r)),this.assert(t,v.extension);const i=w.expandExtension(t,r);for(const t of i){s(void 0===r[t.type]||r.Mf.has(t.type),"Cannot override name",t.type);const i=t.base||this.any(),e=u.type(i,t);r.Mf.add(t.type),r[t.type]=function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return w.generate(this,e,i)}}}return r},isError:a.ValidationError.isError,isExpression:d.isTemplate,isRef:l.isRef,isSchema:o.isSchema,in:function(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];return l.in(...i)},override:o.symbols.override,ref:function(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];return l.create(...i)},types(){const t={};for(const i of this.Mf)t[i]=this[i]();for(const i in w.aliases)t[i]=this[i]();return t}},w.assert=function(t,i,e,s){const r=s[0]instanceof g||"string"==typeof s[0]?s[0]:null,h=null!==r?s[1]:s[0],u=i.validate(t,o.preferences({errors:{stack:!0}},h||{}));let c=u.error;if(!c)return u.value;if(r instanceof g)throw r;const l=e&&"function"==typeof c.annotate?c.annotate():c.message;throw c instanceof a.ValidationError==0&&(c=n(c)),c.message=r?"".concat(r," ").concat(l):l,c},w.generate=function(t,i,e){return s(t,"Must be invoked on a Joi instance."),i.$_root=t,i.Jd.args&&e.length?i.Jd.args(i,...e):i},w.expandExtension=function(t,i){if("string"==typeof t.type)return[t];const e=[];for(const s of i.Mf)if(t.type.test(s)){const n=_.assign({},t);n.type=s,n.base=i[s](),e.push(n)}return e},t.exports=w.root()},6914:(t,i,e)=>{const s=e(375),n=e(8571),r=e(3328);i.compile=function(t,i){if("string"==typeof t)return s(!i,"Cannot set single message string"),new r(t);if(r.isTemplate(t))return s(!i,"Cannot set single message template"),t;s("object"==typeof t&&!Array.isArray(t),"Invalid message options"),i=i?n(i):{};for(let e in t){const n=t[e];if("root"===e||r.isTemplate(n)){i[e]=n;continue}if("string"==typeof n){i[e]=new r(n);continue}s("object"==typeof n&&!Array.isArray(n),"Invalid message for",e);const o=e;for(e in i[o]=i[o]||{},n){const t=n[e];"root"===e||r.isTemplate(t)?i[o][e]=t:(s("string"==typeof t,"Invalid message for",e,"in",o),i[o][e]=new r(t))}}return i},i.decompile=function(t){const i={};for(let e in t){const s=t[e];if("root"===e){i.root=s;continue}if(r.isTemplate(s)){i[e]=s.describe({compact:!0});continue}const n=e;for(e in i[n]={},s){const t=s[e];"root"!==e?i[n][e]=t.describe({compact:!0}):i[n].root=t}}return i},i.merge=function(t,e){if(!t)return i.compile(e);if(!e)return t;if("string"==typeof e)return new r(e);if(r.isTemplate(e))return e;const o=n(t);for(let t in e){const i=e[t];if("root"===t||r.isTemplate(i)){o[t]=i;continue}if("string"==typeof i){o[t]=new r(i);continue}s("object"==typeof i&&!Array.isArray(i),"Invalid message for",t);const n=t;for(t in o[n]=o[n]||{},i){const e=i[t];"root"===t||r.isTemplate(e)?o[n][t]=e:(s("string"==typeof e,"Invalid message for",t,"in",n),o[n][t]=new r(e))}}return o}},2294:(t,i,e)=>{const s=e(375),n=e(8160),r=e(6133),o={};i.Ids=o.Ids=class{clone(){const t=new o.Ids;return t.Tf=new Map(this.Tf),t.Sf=new Map(this.Sf),t.Nf=this.Nf,t}concat(t){t.Nf&&(this.Nf=!0);for(const[i,e]of t.Tf.entries())s(!this.Sf.has(i),"Schema id conflicts with existing key:",i),this.Tf.set(i,e);for(const[i,e]of t.Sf.entries())s(!this.Tf.has(i),"Schema key conflicts with existing id:",i),this.Sf.set(i,e)}fork(t,i,e){const r=this.If(t);r.push({schema:e});const h=r.shift();let a={id:h.id,schema:i(h.schema)};s(n.isSchema(a.schema),"adjuster function failed to return a joi schema type");for(const t of r)a={id:t.id,schema:o.fork(t.schema,a.id,a.schema)};return a.schema}labels(t,i){void 0===i&&(i=[]);const e=t[0],s=this.Df(e);if(!s)return[...i,...t].join(".");const n=t.slice(1);return i=[...i,s.schema.Zd.label||e],n.length?s.schema.Qd.labels(n,i):i.join(".")}reach(t,i){void 0===i&&(i=[]);const e=t[0],n=this.Df(e);s(n,"Schema does not contain path",[...i,...t].join("."));const r=t.slice(1);return r.length?n.schema.Qd.reach(r,[...i,e]):n.schema}register(t,i){let{key:e}=void 0===i?{}:i;if(!t||!n.isSchema(t))return;(t.$_property("schemaChain")||t.Qd.Nf)&&(this.Nf=!0);const r=t.Zd.id;if(r){const i=this.Tf.get(r);s(!i||i.schema===t,"Cannot add different schemas with the same id:",r),s(!this.Sf.has(r),"Schema id conflicts with existing key:",r),this.Tf.set(r,{schema:t,id:r})}e&&(s(!this.Sf.has(e),"Schema already contains key:",e),s(!this.Tf.has(e),"Schema key conflicts with existing id:",e),this.Sf.set(e,{schema:t,id:e}))}reset(){this.Tf=new Map,this.Sf=new Map,this.Nf=!1}If(t,i,e){void 0===i&&(i=[]),void 0===e&&(e=[]);const n=t[0],r=this.Df(n);s(r,"Schema does not contain path",[...i,...t].join(".")),e=[r,...e];const o=t.slice(1);return o.length?r.schema.Qd.If(o,[...i,n],e):e}Df(t){return this.Tf.get(t)||this.Sf.get(t)}constructor(){this.Tf=new Map,this.Sf=new Map,this.Nf=!1}},o.fork=function(t,e,s){const n=i.schema(t,{each:(t,i)=>{let{key:n}=i;if(e===(t.Zd.id||n))return s},ref:!1});return n?n.$_mutateRebuild():t},i.schema=function(t,i){let e;for(const s in t.Zd){if("_"===s[0])continue;const n=o.scan(t.Zd[s],{source:"flags",name:s},i);void 0!==n&&(e=e||t.clone(),e.Zd[s]=n)}for(let s=0;s<t.Hd.length;++s){const n=t.Hd[s],r=o.scan(n.args,{source:"rules",name:n.name},i);if(void 0!==r){e=e||t.clone();const i=_.assign({},n);i.args=r,e.Hd[s]=i,e.Xd.get(n.name)===n&&e.Xd.set(n.name,i)}}for(const s in t.$_terms){if("_"===s[0])continue;const n=o.scan(t.$_terms[s],{source:"terms",name:s},i);void 0!==n&&(e=e||t.clone(),e.$_terms[s]=n)}return e},o.scan=function(t,i,e,s,h){const a=s||[];if(null===t||"object"!=typeof t)return;let u;if(Array.isArray(t)){for(let s=0;s<t.length;++s){const n="terms"===i.source&&"keys"===i.name&&t[s].key,r=o.scan(t[s],i,e,[s,...a],n);void 0!==r&&(u=u||t.slice(),u[s]=r)}return u}if(!1!==e.schema&&n.isSchema(t)||!1!==e.ref&&r.isRef(t)){const s=e.each(t,p(d({},i),{path:a,key:h}));return s===t?void 0:s}for(const s in t){if("_"===s[0])continue;const n=o.scan(t[s],i,e,[s,...a],h);void 0!==n&&(u=u||_.assign({},t),u[s]=n)}return u}},6133:(t,i,e)=>{const s=e(375),n=e(8571),r=e(9621),o=e(8160);let h;const a={symbol:b("ref"),defaults:{adjust:null,in:!1,iterables:null,map:null,separator:".",type:"value"}};i.create=function(t,i){void 0===i&&(i={}),s("string"==typeof t,"Invalid reference key:",t),o.assertOptions(i,["adjust","ancestor","in","iterables","map","prefix","render","separator"]),s(!i.prefix||"object"==typeof i.prefix,"options.prefix must be of type object");const e=_.assign({},a.defaults,i);delete e.prefix;const n=e.separator,r=a.context(t,n,i.prefix);if(e.type=r.type,t=r.key,"value"===e.type)if(r.root&&(s(!n||t[0]!==n,"Cannot specify relative path with root prefix"),e.ancestor="root",t||(t=null)),n&&n===t)t=null,e.ancestor=0;else if(void 0!==e.ancestor)s(!n||!t||t[0]!==n,"Cannot combine prefix with ancestor option");else{const[i,s]=a.ancestor(t,n);s&&""===(t=t.slice(s))&&(t=null),e.ancestor=i}return e.path=n?null===t?[]:t.split(n):[t],new a.Ref(e)},i.in=function(t,e){return void 0===e&&(e={}),i.create(t,p(d({},e),{in:!0}))},i.isRef=function(t){return!!t&&!!t[o.symbols.ref]},a.Ref=class{resolve(t,i,e,n,r){return void 0===r&&(r={}),s(!this.in||r.in,"Invalid in() reference usage"),"global"===this.type?this.hf(e.context,i,r):"local"===this.type?this.hf(n,i,r):this.ancestor?"root"===this.ancestor?this.hf(i.ancestors[i.ancestors.length-1],i,r):(s(this.ancestor<=i.ancestors.length,"Invalid reference exceeds the schema root:",this.display),this.hf(i.ancestors[this.ancestor-1],i,r)):this.hf(t,i,r)}hf(t,i,e){let s;if("value"===this.type&&i.mainstay.shadow&&!1!==e.shadow&&(s=i.mainstay.shadow.get(this.absolute(i))),void 0===s&&(s=r(t,this.path,{iterables:this.iterables,functions:!0})),this.adjust&&(s=this.adjust(s)),this.map){const t=this.map.get(s);void 0!==t&&(s=t)}return i.mainstay&&i.mainstay.tracer.resolve(i,this,s),s}toString(){return this.display}absolute(t){return[...t.path.slice(0,-this.ancestor),...this.path]}clone(){return new a.Ref(this)}describe(){const t={path:this.path};"value"!==this.type&&(t.type=this.type),"."!==this.separator&&(t.separator=this.separator),"value"===this.type&&1!==this.ancestor&&(t.ancestor=this.ancestor),this.map&&(t.map=[...this.map]);for(const i of["adjust","iterables","render"])null!==this[i]&&void 0!==this[i]&&(t[i]=this[i]);return!1!==this.in&&(t.in=!0),{ref:t}}updateDisplay(){const t=null!==this.key?this.key:"";if("value"!==this.type)return void(this.display="ref:".concat(this.type,":").concat(t));if(!this.separator)return void(this.display="ref:".concat(t));if(!this.ancestor)return void(this.display="ref:".concat(this.separator).concat(t));if("root"===this.ancestor)return void(this.display="ref:root:".concat(t));if(1===this.ancestor)return void(this.display="ref:".concat(t||".."));const i=new Array(this.ancestor+1).fill(this.separator).join("");this.display="ref:".concat(i).concat(t||"")}constructor(t){s("object"==typeof t,"Invalid reference construction"),o.assertOptions(t,["adjust","ancestor","in","iterables","map","path","render","separator","type","depth","key","root","display"]),s([!1,void 0].includes(t.separator)||"string"==typeof t.separator&&1===t.separator.length,"Invalid separator"),s(!t.adjust||"function"==typeof t.adjust,"options.adjust must be a function"),s(!t.map||Array.isArray(t.map),"options.map must be an array"),s(!t.map||!t.adjust,"Cannot set both map and adjust options"),_.assign(this,a.defaults,t),s("value"===this.type||void 0===this.ancestor,"Non-value references cannot reference ancestors"),Array.isArray(this.map)&&(this.map=new Map(this.map)),this.depth=this.path.length,this.key=this.path.length?this.path.join(this.separator):null,this.root=this.path[0],this.updateDisplay()}},a.Ref.prototype[o.symbols.ref]=!0,i.build=function(t){return"value"===(t=_.assign({},a.defaults,t)).type&&void 0===t.ancestor&&(t.ancestor=1),new a.Ref(t)},a.context=function(t,i,e){if(void 0===e&&(e={}),t=t.trim(),e){const s=void 0===e.global?"$":e.global;if(s!==i&&t.startsWith(s))return{key:t.slice(s.length),type:"global"};const n=void 0===e.local?"#":e.local;if(n!==i&&t.startsWith(n))return{key:t.slice(n.length),type:"local"};const r=void 0===e.root?"/":e.root;if(r!==i&&t.startsWith(r))return{key:t.slice(r.length),type:"value",root:!0}}return{key:t,type:"value"}},a.ancestor=function(t,i){if(!i)return[1,0];if(t[0]!==i)return[1,0];if(t[1]!==i)return[0,1];let e=2;for(;t[e]===i;)++e;return[e-1,e]},i.toSibling=0,i.toParent=1,i.Manager=class{register(t,s){if(t)if(s=void 0===s?i.toParent:s,Array.isArray(t))for(const i of t)this.register(i,s);else if(o.isSchema(t))for(const i of t.Yd.refs)i.ancestor-s>=0&&this.refs.push({ancestor:i.ancestor-s,root:i.root});else i.isRef(t)&&"value"===t.type&&t.ancestor-s>=0&&this.refs.push({ancestor:t.ancestor-s,root:t.root}),h=h||e(3328),h.isTemplate(t)&&this.register(t.refs(),s)}get length(){return this.refs.length}clone(){const t=new i.Manager;return t.refs=n(this.refs),t}reset(){this.refs=[]}roots(){return this.refs.filter((t=>!t.ancestor)).map((t=>t.root))}constructor(){this.refs=[]}}},3378:(t,i,e)=>{const s=e(5107),n={};n.wrap=s.string().min(1).max(2).allow(!1),i.preferences=s.object({allowUnknown:s.boolean(),abortEarly:s.boolean(),artifacts:s.boolean(),cache:s.boolean(),context:s.object(),convert:s.boolean(),dateFormat:s.valid("date","iso","string","time","utc"),debug:s.boolean(),errors:{escapeHtml:s.boolean(),label:s.valid("path","key",!1),language:[s.string(),s.object().ref()],render:s.boolean(),stack:s.boolean(),wrap:{label:n.wrap,array:n.wrap,string:n.wrap}},externals:s.boolean(),messages:s.object(),noDefaults:s.boolean(),nonEnumerables:s.boolean(),presence:s.valid("required","optional","forbidden"),skipFunctions:s.boolean(),stripUnknown:s.object({arrays:s.boolean(),objects:s.boolean()}).or("arrays","objects").allow(!0,!1),warnings:s.boolean()}).strict(),n.nameRx=/^[a-zA-Z0-9]\w*$/,n.rule=s.object({alias:s.array().items(s.string().pattern(n.nameRx)).single(),args:s.array().items(s.string(),s.object({name:s.string().pattern(n.nameRx).required(),ref:s.boolean(),assert:s.alternatives([s.function(),s.object().schema()]).conditional("ref",{is:!0,then:s.required()}),normalize:s.function(),message:s.string().when("assert",{is:s.function(),then:s.required()})})),convert:s.boolean(),manifest:s.boolean(),method:s.function().allow(!1),multi:s.boolean(),validate:s.function()}),i.extension=s.object({type:s.alternatives([s.string(),s.object().regex()]).required(),args:s.function(),cast:s.object().pattern(n.nameRx,s.object({from:s.function().maxArity(1).required(),to:s.function().minArity(1).maxArity(2).required()})),base:s.object().schema().when("type",{is:s.object().regex(),then:s.forbidden()}),coerce:[s.function().maxArity(3),s.object({method:s.function().maxArity(3).required(),from:s.array().items(s.string()).single()})],flags:s.object().pattern(n.nameRx,s.object({setter:s.string(),default:s.any()})),manifest:{build:s.function().arity(2)},messages:[s.object(),s.string()],modifiers:s.object().pattern(n.nameRx,s.function().minArity(1).maxArity(2)),overrides:s.object().pattern(n.nameRx,s.function()),prepare:s.function().maxArity(3),rebuild:s.function().arity(1),rules:s.object().pattern(n.nameRx,n.rule),terms:s.object().pattern(n.nameRx,s.object({init:s.array().allow(null).required(),manifest:s.object().pattern(/.+/,[s.valid("schema","single"),s.object({mapped:s.object({from:s.string().required(),to:s.string().required()}).required()})])})),validate:s.function().maxArity(3)}).strict(),i.extensions=s.array().items(s.object(),s.function().arity(1)).strict(),n.desc={buffer:s.object({buffer:s.string()}),func:s.object({function:s.function().required(),options:{literal:!0}}),override:s.object({override:!0}),ref:s.object({ref:s.object({type:s.valid("value","global","local"),path:s.array().required(),separator:s.string().length(1).allow(!1),ancestor:s.number().min(0).integer().allow("root"),map:s.array().items(s.array().length(2)).min(1),adjust:s.function(),iterables:s.boolean(),in:s.boolean(),render:s.boolean()}).required()}),regex:s.object({regex:s.string().min(3)}),special:s.object({special:s.valid("deep").required()}),template:s.object({template:s.string().required(),options:s.object()}),value:s.object({value:s.alternatives([s.object(),s.array()]).required()})},n.desc.entity=s.alternatives([s.array().items(s.link("...")),s.boolean(),s.function(),s.number(),s.string(),n.desc.buffer,n.desc.func,n.desc.ref,n.desc.regex,n.desc.special,n.desc.template,n.desc.value,s.link("/")]),n.desc.values=s.array().items(null,s.boolean(),s.function(),s.number().allow(1/0,-1/0),s.string().allow(""),s.symbol(),n.desc.buffer,n.desc.func,n.desc.override,n.desc.ref,n.desc.regex,n.desc.template,n.desc.value),n.desc.messages=s.object().pattern(/.+/,[s.string(),n.desc.template,s.object().pattern(/.+/,[s.string(),n.desc.template])]),i.description=s.object({type:s.string().required(),flags:s.object({cast:s.string(),default:s.any(),description:s.string(),empty:s.link("/"),failover:n.desc.entity,id:s.string(),label:s.string(),only:!0,presence:["optional","required","forbidden"],result:["raw","strip"],strip:s.boolean(),unit:s.string()}).unknown(),preferences:{allowUnknown:s.boolean(),abortEarly:s.boolean(),artifacts:s.boolean(),cache:s.boolean(),convert:s.boolean(),dateFormat:["date","iso","string","time","utc"],errors:{escapeHtml:s.boolean(),label:["path","key"],language:[s.string(),n.desc.ref],wrap:{label:n.wrap,array:n.wrap}},externals:s.boolean(),messages:n.desc.messages,noDefaults:s.boolean(),nonEnumerables:s.boolean(),presence:["required","optional","forbidden"],skipFunctions:s.boolean(),stripUnknown:s.object({arrays:s.boolean(),objects:s.boolean()}).or("arrays","objects").allow(!0,!1),warnings:s.boolean()},allow:n.desc.values,invalid:n.desc.values,rules:s.array().min(1).items({name:s.string().required(),args:s.object().min(1),keep:s.boolean(),message:[s.string(),n.desc.messages],warn:s.boolean()}),keys:s.object().pattern(/.*/,s.link("/")),link:n.desc.ref}).pattern(/^[a-z]\w*$/,s.any())},493:(t,i,e)=>{const s=e(8571),n=e(9621),r=e(8160),o={value:b("value")};t.exports=o.State=class{localize(t,i,e){void 0===i&&(i=null),void 0===e&&(e=null);const s=new o.State(t,i,this);return e&&s.schemas&&(s.schemas=[o.schemas(e),...s.schemas]),s}nest(t,i){const e=new o.State(this.path,this.ancestors,this);return e.schemas=e.schemas&&[o.schemas(t),...e.schemas],e.debug=i,e}shadow(t,i){this.mainstay.shadow=this.mainstay.shadow||new o.Shadow,this.mainstay.shadow.set(this.path,t,i)}snapshot(){this.mainstay.shadow&&(this.Ef=s(this.mainstay.shadow.node(this.path))),this.mainstay.snapshot()}restore(){this.mainstay.shadow&&(this.mainstay.shadow.override(this.path,this.Ef),this.Ef=void 0),this.mainstay.restore()}commit(){this.mainstay.shadow&&(this.mainstay.shadow.override(this.path,this.Ef),this.Ef=void 0),this.mainstay.commit()}constructor(t,i,e){this.path=t,this.ancestors=i,this.mainstay=e.mainstay,this.schemas=e.schemas,this.debug=null}},o.schemas=function(t){return r.isSchema(t)?{schema:t}:t},o.Shadow=class{set(t,i,e){if(!t.length||"strip"===e&&"number"==typeof t[t.length-1])return;this.qd=this.qd||new Map;let s=this.qd;for(let i=0;i<t.length;++i){const e=t[i];let n=s.get(e);n||(n=new Map,s.set(e,n)),s=n}s[o.value]=i}get(t){const i=this.node(t);if(i)return i[o.value]}node(t){if(this.qd)return n(this.qd,t,{iterables:!0})}override(t,i){if(!this.qd)return;const e=t.slice(0,-1),s=t[t.length-1],r=n(this.qd,e,{iterables:!0});i?r.set(s,i):r&&r.delete(s)}constructor(){this.qd=null}}},3328:(t,i,e)=>{const s=e(375),n=e(8571),r=e(5277),o=e(1447),h=e(8160),a=e(6354),u=e(6133),c={symbol:b("template"),opens:new Array(1e3).join("\0"),closes:new Array(1e3).join("\x01"),dateFormat:{date:Date.prototype.toDateString,iso:Date.prototype.toISOString,string:Date.prototype.toString,time:Date.prototype.toTimeString,utc:Date.prototype.toUTCString}};t.exports=c.Template=class{kf(){if(!this.source.includes("{"))return;const t=c.encode(this.source),i=c.split(t);let e=!1;const s=[],n=i.shift();n&&s.push(n);for(const t of i){const i="{"!==t[0],n=i?"}":"}}",r=t.indexOf(n);if(-1===r||"{"===t[1]){s.push("{".concat(c.decode(t)));continue}let o=t.slice(i?0:1,r);const h=":"===o[0];h&&(o=o.slice(1));const a=this.Lf(c.decode(o),{raw:i,wrapped:h});s.push(a),"string"!=typeof a&&(e=!0);const u=t.slice(r+n.length);u&&s.push(c.decode(u))}e?this.yf=s:this.rendered=s.join("")}static date(t,i){return c.dateFormat[i.dateFormat].call(t)}describe(t){if(void 0===t&&(t={}),!this.xf&&t.compact)return this.source;const i={template:this.source};return this.xf&&(i.options=this.xf),this.Cf&&(i.functions=this.Cf),i}static build(t){return new c.Template(t.template,t.options||t.functions?p(d({},t.options),{functions:t.functions}):void 0)}isDynamic(){return!!this.yf}static isTemplate(t){return!!t&&!!t[h.symbols.template]}refs(){if(!this.yf)return;const t=[];for(const i of this.yf)"string"!=typeof i&&t.push(...i.refs);return t}resolve(t,i,e,s){return this.yf&&1===this.yf.length?this.jf(this.yf[0],t,i,e,s,{}):this.render(t,i,e,s)}jf(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];return t.ref?t.ref.resolve(...e):t.formula.evaluate(e)}render(t,i,e,s,n){if(void 0===n&&(n={}),!this.isDynamic())return this.rendered;const o=[];for(const h of this.yf)if("string"==typeof h)o.push(h);else{const a=this.jf(h,t,i,e,s,n),u=c.stringify(a,t,i,e,s,n);if(void 0!==u){const t=h.raw||!1===(n.errors&&n.errors.escapeHtml)?u:r(u);o.push(c.wrap(t,h.wrapped&&e.errors.wrap.label))}}return o.join("")}Lf(t,i){let{raw:e,wrapped:s}=i;const n=[],r=t=>{const i=u.create(t,this.xf);return n.push(i),t=>{const e=i.resolve(...t);return void 0!==e?e:null}};try{const i=this.Cf?d(d({},c.functions),this.Cf):c.functions;var h=new o.Parser(t,{reference:r,functions:i,constants:c.constants})}catch(i){throw i.message='Invalid template variable "'.concat(t,'" fails due to: ').concat(i.message),i}if(h.single){if("reference"===h.single.type){const t=n[0];return{ref:t,raw:e,refs:n,wrapped:s||"local"===t.type&&"label"===t.key}}return c.stringify(h.single.value)}return{formula:h,raw:e,refs:n}}toString(){return this.source}constructor(t,i){if(s("string"==typeof t,"Template source must be a string"),s(!t.includes("\0")&&!t.includes("\x01"),"Template source cannot contain reserved control characters"),this.source=t,this.rendered=t,this.yf=null,i){const t=i,{functions:e}=t,r=A(t,["functions"]);this.xf=_.keys(r).length?n(r):void 0,this.Cf=e,this.Cf&&(s(_.keys(this.Cf).every((t=>"string"==typeof t)),"Functions keys must be strings"),s(_.values(this.Cf).every((t=>"function"==typeof t)),"Functions values must be functions"))}else this.xf=void 0,this.Cf=void 0;this.kf()}},c.Template.prototype[h.symbols.template]=!0,c.Template.prototype.isImmutable=!0,c.encode=function(t){return t.replace(/\\(\{+)/g,((t,i)=>c.opens.slice(0,i.length))).replace(/\\(\}+)/g,((t,i)=>c.closes.slice(0,i.length)))},c.decode=function(t){return t.replace(/\u0000/g,"{").replace(/\u0001/g,"}")},c.split=function(t){const i=[];let e="";for(let s=0;s<t.length;++s){const n=t[s];if("{"===n){let n="";for(;s+1<t.length&&"{"===t[s+1];)n+="{",++s;i.push(e),e=n}else e+=n}return i.push(e),i},c.wrap=function(t,i){return i?1===i.length?"".concat(i).concat(t).concat(i):"".concat(i[0]).concat(t).concat(i[1]):t},c.stringify=function(t,i,e,s,n,r){void 0===r&&(r={});const o=typeof t,h=s&&s.errors&&s.errors.wrap||{};let a=!1;if(u.isRef(t)&&t.render&&(a=t.in,t=t.resolve(i,e,s,n,d({in:t.in},r))),null===t)return"null";if("string"===o)return c.wrap(t,r.arrayItems&&h.string);if("number"===o||"function"===o||"symbol"===o)return t.toString();if("object"!==o)return JSON.stringify(t);if(t instanceof Date)return c.Template.date(t,s);if(t instanceof Map){const i=[];for(const[e,s]of t.entries())i.push("".concat(e.toString()," -> ").concat(s.toString()));t=i}if(!Array.isArray(t))return t.toString();const l=[];for(const o of t)l.push(c.stringify(o,i,e,s,n,d({arrayItems:!0},r)));return c.wrap(l.join(", "),!a&&h.array)},c.constants={true:!0,false:!1,null:null,second:1e3,minute:6e4,hour:36e5,day:864e5},c.functions={if:(t,i,e)=>t?i:e,length:t=>"string"==typeof t?t.length:t&&"object"==typeof t?Array.isArray(t)?t.length:_.keys(t).length:null,msg(t){const[i,e,s,n,r]=this,o=r.messages;if(!o)return"";const h=a.template(i,o[0],t,e,s)||a.template(i,o[1],t,e,s);return h?h.render(i,e,s,n,r):""},number:t=>"number"==typeof t?t:"string"==typeof t?S(t):"boolean"==typeof t?t?1:0:t instanceof Date?t.getTime():null}},4946:(t,i,e)=>{const s=e(375),n=e(1687),r=e(8068),o=e(8160),h=e(3292),a=e(6354),u=e(6133),c={};t.exports=r.extend({type:"alternatives",flags:{match:{default:"any"}},terms:{matches:{init:[],register:u.toSibling}},args:function(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];return 1===e.length&&Array.isArray(e[0])?t.try(...e[0]):t.try(...e)},validate(t,i){const{schema:e,error:s,state:r,prefs:o}=i;if(e.Zd.match){const i=[],h=[];for(let s=0;s<e.$_terms.matches.length;++s){const n=e.$_terms.matches[s],a=r.nest(n.schema,"match.".concat(s));a.snapshot();const u=n.schema.$_validate(t,a,o);u.errors?(h.push(u.errors),a.restore()):(i.push(u.value),a.commit())}if(0===i.length)return{errors:s("alternatives.any",{details:h.map((t=>a.details(t,{override:!1})))})};if("one"===e.Zd.match)return 1===i.length?{value:i[0]}:{errors:s("alternatives.one")};if(i.length!==e.$_terms.matches.length)return{errors:s("alternatives.all",{details:h.map((t=>a.details(t,{override:!1})))})};const u=t=>t.$_terms.matches.some((t=>"object"===t.schema.type||"alternatives"===t.schema.type&&u(t.schema)));return u(e)?{value:i.reduce(((t,i)=>n(t,i,{mergeArrays:!1})))}:{value:i[i.length-1]}}const h=[];for(let i=0;i<e.$_terms.matches.length;++i){const s=e.$_terms.matches[i];if(s.schema){const e=r.nest(s.schema,"match.".concat(i));e.snapshot();const n=s.schema.$_validate(t,e,o);if(!n.errors)return e.commit(),n;e.restore(),h.push({schema:s.schema,reports:n.errors});continue}const n=s.ref?s.ref.resolve(t,r,o):t,a=s.is?[s]:s.switch;for(let e=0;e<a.length;++e){const h=a[e],{is:u,then:c,otherwise:l}=h,d="match.".concat(i).concat(s.switch?"."+e:"");if(u.$_match(n,r.nest(u,"".concat(d,".is")),o)){if(c)return c.$_validate(t,r.nest(c,"".concat(d,".then")),o)}else if(l)return l.$_validate(t,r.nest(l,"".concat(d,".otherwise")),o)}}return c.errors(h,i)},rules:{conditional:{method(t,i){s(!this.Zd.Of,"Unreachable condition"),s(!this.Zd.match,"Cannot combine match mode",this.Zd.match,"with conditional rule"),s(void 0===i.break,"Cannot use break option with alternatives conditional");const e=this.clone(),n=h.when(e,t,i),r=n.is?[n]:n.switch;for(const t of r)if(t.then&&t.otherwise){e.$_setFlag("Of",!0,{clone:!1});break}return e.$_terms.matches.push(n),e.$_mutateRebuild()}},match:{method(t){if(s(["any","one","all"].includes(t),"Invalid alternatives match mode",t),"any"!==t)for(const i of this.$_terms.matches)s(i.schema,"Cannot combine match mode",t,"with conditional rules");return this.$_setFlag("match",t)}},try:{method(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];s(i.length,"Missing alternative schemas"),o.verifyFlat(i,"try"),s(!this.Zd.Of,"Unreachable condition");const n=this.clone();for(const t of i)n.$_terms.matches.push({schema:n.$_compile(t)});return n.$_mutateRebuild()}}},overrides:{label(t){return this.$_parent("label",t).$_modify({each:(i,e)=>"is"!==e.path[0]&&"string"!=typeof i.Zd.label?i.label(t):void 0,ref:!1})}},rebuild(t){t.$_modify({each:i=>{o.isSchema(i)&&"array"===i.type&&t.$_setFlag("Rf",!0,{clone:!1})}})},manifest:{build(t,i){if(i.matches)for(const e of i.matches){const{schema:i,ref:s,is:n,not:r,then:o,otherwise:h}=e;t=i?t.try(i):s?t.conditional(s,{is:n,then:o,not:r,otherwise:h,switch:e.switch}):t.conditional(n,{then:o,otherwise:h})}return t}},messages:{"alternatives.all":"{{#label}} does not match all of the required types","alternatives.any":"{{#label}} does not match any of the allowed types","alternatives.match":"{{#label}} does not match any of the allowed types","alternatives.one":"{{#label}} matches more than one allowed type","alternatives.types":"{{#label}} must be one of {{#types}}"}}),c.errors=function(t,i){let{error:e,state:s}=i;if(!t.length)return{errors:e("alternatives.any")};if(1===t.length)return{errors:t[0].reports};const n=new Set,r=[];for(const{reports:i,schema:o}of t){if(i.length>1)return c.unmatched(t,e);const h=i[0];if(h instanceof a.Report==0)return c.unmatched(t,e);if(h.state.path.length!==s.path.length){r.push({type:o.type,report:h});continue}if("any.only"===h.code){for(const t of h.local.valids)n.add(t);continue}const[u,l]=h.code.split(".");"base"!==l?r.push({type:o.type,report:h}):"object.base"===h.code?n.add(h.local.type):n.add(u)}return r.length?1===r.length?{errors:r[0].report}:c.unmatched(t,e):{errors:e("alternatives.types",{types:[...n]})}},c.unmatched=function(t,i){const e=[];for(const i of t)e.push(...i.reports);return{errors:i("alternatives.match",a.details(e,{override:!1}))}}},8068:(t,i,e)=>{const s=e(375),n=e(7629),r=e(8160),o=e(6914);t.exports=n.extend({type:"any",flags:{only:{default:!1}},terms:{alterations:{init:null},examples:{init:null},externals:{init:null},metas:{init:[]},notes:{init:[]},shared:{init:null},tags:{init:[]},whens:{init:null}},rules:{custom:{method(t,i){return s("function"==typeof t,"Method must be a function"),s(void 0===i||i&&"string"==typeof i,"Description must be a non-empty string"),this.$_addRule({name:"custom",args:{method:t,description:i}})},validate(t,i,e){let{method:s}=e;try{return s(t,i)}catch(t){return i.error("any.custom",{error:t})}},args:["method","description"],multi:!0},messages:{method(t){return this.prefs({messages:t})}},shared:{method(t){s(r.isSchema(t)&&t.Zd.id,"Schema must be a schema with an id");const i=this.clone();return i.$_terms.shared=i.$_terms.shared||[],i.$_terms.shared.push(t),i.$_mutateRegister(t),i}},warning:{method(t,i){return s(t&&"string"==typeof t,"Invalid warning code"),this.$_addRule({name:"warning",args:{code:t,local:i},warn:!0})},validate:(t,i,e)=>{let{code:s,local:n}=e;return i.error(s,n)},args:["code","local"],multi:!0}},modifiers:{keep(t,i){void 0===i&&(i=!0),t.keep=i},message(t,i){t.message=o.compile(i)},warn(t,i){void 0===i&&(i=!0),t.warn=i}},manifest:{build(t,i){for(const e in i){const s=i[e];if(["examples","externals","metas","notes","tags"].includes(e))for(const i of s)t=t[e.slice(0,-1)](i);else if("alterations"!==e)if("whens"!==e){if("shared"===e)for(const i of s)t=t.shared(i)}else for(const i of s){const{ref:e,is:s,not:n,then:r,otherwise:o,concat:h}=i;t=h?t.concat(h):e?t.when(e,{is:s,not:n,then:r,otherwise:o,switch:i.switch,break:i.break}):t.when(s,{then:r,otherwise:o,break:i.break})}else{const i={};for(const{target:t,adjuster:e}of s)i[t]=e;t=t.alter(i)}}return t}},messages:{"any.custom":"{{#label}} failed custom validation because {{#error.message}}","any.default":"{{#label}} threw an error when running default method","any.failover":"{{#label}} threw an error when running failover method","any.invalid":"{{#label}} contains an invalid value","any.only":'{{#label}} must be {if(#valids.length == 1, "", "one of ")}{{#valids}}',"any.ref":"{{#label}} {{#arg}} references {{:#ref}} which {{#reason}}","any.required":"{{#label}} is required","any.unknown":"{{#label}} is not allowed"}})},546:(t,i,e)=>{const s=e(375),n=e(9474),r=e(9621),o=e(8068),h=e(8160),a=e(3292),u={};t.exports=o.extend({type:"array",flags:{single:{default:!1},sparse:{default:!1}},terms:{items:{init:[],manifest:"schema"},ordered:{init:[],manifest:"schema"},Pf:{init:[]},zf:{init:[]},Bf:{init:[]}},coerce:{from:"object",method(t,i){let{schema:e,state:s,prefs:n}=i;if(!Array.isArray(t))return;const r=e.$_getRule("sort");return r?u.sort(e,t,r.args.options,s,n):void 0}},validate(t,i){let{schema:e,error:s}=i;if(!Array.isArray(t)){if(e.Zd.single){const i=[t];return i[h.symbols.arraySingle]=!0,{value:i}}return{errors:s("array.base")}}if(e.$_getRule("items")||e.$_terms.externals)return{value:t.slice()}},rules:{has:{method(t){t=this.$_compile(t,{appendPath:!0});const i=this.$_addRule({name:"has",args:{schema:t}});return i.$_mutateRegister(t),i},validate(t,i,e){let{state:s,prefs:n,error:r}=i,{schema:o}=e;const h=[t,...s.ancestors];for(let i=0;i<t.length;++i){const e=s.localize([...s.path,i],h,o);if(o.$_match(t[i],e,n))return t}const a=o.Zd.label;return a?r("array.hasKnown",{patternLabel:a}):r("array.hasUnknown",null)},multi:!0},items:{method(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];h.verifyFlat(i,"items");const s=this.$_addRule("items");for(let t=0;t<i.length;++t){const e=h.tryWithPath((()=>this.$_compile(i[t])),t,{append:!0});s.$_terms.items.push(e)}return s.$_mutateRebuild()},validate(t,i){let{schema:e,error:s,state:n,prefs:r,errorsArray:o}=i;const a=e.$_terms.Bf.slice(),c=e.$_terms.ordered.slice(),l=[...e.$_terms.zf,...a],d=!t[h.symbols.arraySingle];delete t[h.symbols.arraySingle];const f=o();let g=t.length;for(let i=0;i<g;++i){const o=t[i];let h=!1,_=!1;const v=d?i:new Number(i),w=[...n.path,v];if(!e.Zd.sparse&&void 0===o){if(f.push(s("array.sparse",{key:v,path:w,pos:i,value:void 0},n.localize(w))),r.abortEarly)return f;c.shift();continue}const m=[t,...n.ancestors];for(const t of e.$_terms.Pf)if(t.$_match(o,n.localize(w,m,t),r,{presence:"ignore"})){if(f.push(s("array.excludes",{pos:i,value:o},n.localize(w))),r.abortEarly)return f;h=!0,c.shift();break}if(h)continue;if(e.$_terms.ordered.length){if(c.length){const h=c.shift(),a=h.$_validate(o,n.localize(w,m,h),r);if(a.errors){if(f.push(...a.errors),r.abortEarly)return f}else if("strip"===h.Zd.result)u.fastSplice(t,i),--i,--g;else{if(!e.Zd.sparse&&void 0===a.value){if(f.push(s("array.sparse",{key:v,path:w,pos:i,value:void 0},n.localize(w))),r.abortEarly)return f;continue}t[i]=a.value}continue}if(!e.$_terms.items.length){if(f.push(s("array.orderedLength",{pos:i,limit:e.$_terms.ordered.length})),r.abortEarly)return f;break}}const p=[];let A=a.length;for(let h=0;h<A;++h){const c=n.localize(w,m,a[h]);c.snapshot();const l=a[h].$_validate(o,c,r);if(p[h]=l,!l.errors){if(c.commit(),t[i]=l.value,_=!0,u.fastSplice(a,h),--h,--A,!e.Zd.sparse&&void 0===l.value&&(f.push(s("array.sparse",{key:v,path:w,pos:i,value:void 0},n.localize(w))),r.abortEarly))return f;break}c.restore()}if(_)continue;const y=r.stripUnknown&&!!r.stripUnknown.arrays||!1;A=l.length;for(const c of l){let l;const d=a.indexOf(c);if(-1!==d)l=p[d];else{const a=n.localize(w,m,c);if(a.snapshot(),l=c.$_validate(o,a,r),!l.errors){a.commit(),"strip"===c.Zd.result?(u.fastSplice(t,i),--i,--g):e.Zd.sparse||void 0!==l.value?t[i]=l.value:(f.push(s("array.sparse",{key:v,path:w,pos:i,value:void 0},n.localize(w))),h=!0),_=!0;break}a.restore()}if(1===A){if(y){u.fastSplice(t,i),--i,--g,_=!0;break}if(f.push(...l.errors),r.abortEarly)return f;h=!0;break}}if(!h&&(e.$_terms.zf.length||e.$_terms.Bf.length)&&!_){if(y){u.fastSplice(t,i),--i,--g;continue}if(f.push(s("array.includes",{pos:i,value:o},n.localize(w))),r.abortEarly)return f}}return a.length&&u.fillMissedErrors(e,f,a,t,n,r),c.length&&(u.fillOrderedErrors(e,f,c,t,n,r),f.length||u.fillDefault(c,t,n,r)),f.length?f:t},priority:!0,manifest:!1},length:{method(t){return this.$_addRule({name:"length",args:{limit:t},operator:"="})},validate:(t,i,e,s)=>{let{limit:n}=e,{name:r,operator:o,args:a}=s;return h.compare(t.length,n,o)?t:i.error("array."+r,{limit:a.limit,value:t})},args:[{name:"limit",ref:!0,assert:h.limit,message:"must be a positive integer"}]},max:{method(t){return this.$_addRule({name:"max",method:"length",args:{limit:t},operator:"<="})}},min:{method(t){return this.$_addRule({name:"min",method:"length",args:{limit:t},operator:">="})}},ordered:{method(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];h.verifyFlat(i,"ordered");const s=this.$_addRule("items");for(let t=0;t<i.length;++t){const e=h.tryWithPath((()=>this.$_compile(i[t])),t,{append:!0});u.validateSingle(e,s),s.$_mutateRegister(e),s.$_terms.ordered.push(e)}return s.$_mutateRebuild()}},single:{method(t){const i=void 0===t||!!t;return s(!i||!this.Zd.Rf,"Cannot specify single rule when array has array items"),this.$_setFlag("single",i)}},sort:{method(t){void 0===t&&(t={}),h.assertOptions(t,["by","order"]);const i={order:t.order||"ascending"};return t.by&&(i.by=a.ref(t.by,{ancestor:0}),s(!i.by.ancestor,"Cannot sort by ancestor")),this.$_addRule({name:"sort",args:{options:i}})},validate(t,i,e){let{error:s,state:n,prefs:r,schema:o}=i,{options:h}=e;const{value:a,errors:c}=u.sort(o,t,h,n,r);if(c)return c;for(let i=0;i<t.length;++i)if(t[i]!==a[i])return s("array.sort",{order:h.order,by:h.by?h.by.key:"value"});return t},convert:!0},sparse:{method(t){const i=void 0===t||!!t;return this.Zd.sparse===i?this:(i?this.clone():this.$_addRule("items")).$_setFlag("sparse",i,{clone:!1})}},unique:{method(t,i){void 0===i&&(i={}),s(!t||"function"==typeof t||"string"==typeof t,"comparator must be a function or a string"),h.assertOptions(i,["ignoreUndefined","separator"]);const e={name:"unique",args:{options:i,comparator:t}};if(t)if("string"==typeof t){const s=h.default(i.separator,".");e.path=s?t.split(s):[t]}else e.comparator=t;return this.$_addRule(e)},validate(t,i,e,o){let{state:h,error:a,schema:u}=i,{comparator:c,options:l}=e,{comparator:d,path:f}=o;const g={string:_.create(null),number:_.create(null),undefined:_.create(null),boolean:_.create(null),bigint:_.create(null),object:new Map,function:new Map,custom:new Map},v=d||n,w=l.ignoreUndefined;for(let i=0;i<t.length;++i){const e=f?r(t[i],f):t[i],n=d?g.custom:g[typeof e];if(s(n,"Failed to find unique map container for type",typeof e),n instanceof Map){const s=n.entries();let r;for(;!(r=s.next()).done;)if(v(r.value[0],e)){const e=h.localize([...h.path,i],[t,...h.ancestors]),s={pos:i,value:t[i],dupePos:r.value[1],dupeValue:t[r.value[1]]};return f&&(s.path=c),a("array.unique",s,e)}n.set(e,i)}else{if((!w||void 0!==e)&&void 0!==n[e]){const s={pos:i,value:t[i],dupePos:n[e],dupeValue:t[n[e]]};return f&&(s.path=c),a("array.unique",s,h.localize([...h.path,i],[t,...h.ancestors]))}n[e]=i}}return t},args:["comparator","options"],multi:!0}},cast:{set:{from:Array.isArray,to:(t,i)=>new Set(t)}},rebuild(t){t.$_terms.zf=[],t.$_terms.Pf=[],t.$_terms.Bf=[];for(const i of t.$_terms.items)u.validateSingle(i,t),"required"===i.Zd.presence?t.$_terms.Bf.push(i):"forbidden"===i.Zd.presence?t.$_terms.Pf.push(i):t.$_terms.zf.push(i);for(const i of t.$_terms.ordered)u.validateSingle(i,t)},manifest:{build:(t,i)=>(i.items&&(t=t.items(...i.items)),i.ordered&&(t=t.ordered(...i.ordered)),t)},messages:{"array.base":"{{#label}} must be an array","array.excludes":"{{#label}} contains an excluded value","array.hasKnown":"{{#label}} does not contain at least one required match for type {:#patternLabel}","array.hasUnknown":"{{#label}} does not contain at least one required match","array.includes":"{{#label}} does not match any of the allowed types","array.includesRequiredBoth":"{{#label}} does not contain {{#knownMisses}} and {{#unknownMisses}} other required value(s)","array.includesRequiredKnowns":"{{#label}} does not contain {{#knownMisses}}","array.includesRequiredUnknowns":"{{#label}} does not contain {{#unknownMisses}} required value(s)","array.length":"{{#label}} must contain {{#limit}} items","array.max":"{{#label}} must contain less than or equal to {{#limit}} items","array.min":"{{#label}} must contain at least {{#limit}} items","array.orderedLength":"{{#label}} must contain at most {{#limit}} items","array.sort":"{{#label}} must be sorted in {#order} order by {{#by}}","array.sort.mismatching":"{{#label}} cannot be sorted due to mismatching types","array.sort.unsupported":"{{#label}} cannot be sorted due to unsupported type {#type}","array.sparse":"{{#label}} must not be a sparse array item","array.unique":"{{#label}} contains a duplicate value"}}),u.fillMissedErrors=function(t,i,e,s,n,r){const o=[];let h=0;for(const t of e){const i=t.Zd.label;i?o.push(i):++h}o.length?h?i.push(t.$_createError("array.includesRequiredBoth",s,{knownMisses:o,unknownMisses:h},n,r)):i.push(t.$_createError("array.includesRequiredKnowns",s,{knownMisses:o},n,r)):i.push(t.$_createError("array.includesRequiredUnknowns",s,{unknownMisses:h},n,r))},u.fillOrderedErrors=function(t,i,e,s,n,r){const o=[];for(const t of e)"required"===t.Zd.presence&&o.push(t);o.length&&u.fillMissedErrors(t,i,o,s,n,r)},u.fillDefault=function(t,i,e,s){const n=[];let r=!0;for(let o=t.length-1;o>=0;--o){const h=t[o],a=[i,...e.ancestors],u=h.$_validate(void 0,e.localize(e.path,a,h),s).value;if(r){if(void 0===u)continue;r=!1}n.unshift(u)}n.length&&i.push(...n)},u.fastSplice=function(t,i){let e=i;for(;e<t.length;)t[e++]=t[e];--t.length},u.validateSingle=function(t,i){("array"===t.type||t.Zd.Rf)&&(s(!i.Zd.single,"Cannot specify array item with single rule enabled"),i.$_setFlag("Rf",!0,{clone:!1}))},u.sort=function(t,i,e,s,n){const r="ascending"===e.order?1:-1,o=-1*r,h=r,a=(a,c)=>{let l=u.compare(a,c,o,h);if(null!==l||(e.by&&(a=e.by.resolve(a,s,n),c=e.by.resolve(c,s,n)),l=u.compare(a,c,o,h),null!==l))return l;const d=typeof a;if(d!==typeof c)throw t.$_createError("array.sort.mismatching",i,null,s,n);if("number"!==d&&"string"!==d)throw t.$_createError("array.sort.unsupported",i,{type:d},s,n);return"number"===d?(a-c)*r:a<c?o:h};try{return{value:i.slice().sort(a)}}catch(t){return{errors:t}}},u.compare=function(t,i,e,s){return t===i?0:void 0===t?1:void 0===i?-1:null===t?s:null===i?e:null}},4937:(t,i,e)=>{const s=e(375),n=e(8068),r=e(8160),o=e(2036),h={isBool:function(t){return"boolean"==typeof t}};t.exports=n.extend({type:"boolean",flags:{sensitive:{default:!1}},terms:{falsy:{init:null,manifest:"values"},truthy:{init:null,manifest:"values"}},coerce(t,i){let{schema:e}=i;if("boolean"!=typeof t){if("string"==typeof t){const i=e.Zd.sensitive?t:t.toLowerCase();t="true"===i||"false"!==i&&t}return"boolean"!=typeof t&&(t=e.$_terms.truthy&&e.$_terms.truthy.has(t,null,null,!e.Zd.sensitive)||(!e.$_terms.falsy||!e.$_terms.falsy.has(t,null,null,!e.Zd.sensitive))&&t),{value:t}}},validate(t,i){let{error:e}=i;if("boolean"!=typeof t)return{value:t,errors:e("boolean.base")}},rules:{truthy:{method(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];r.verifyFlat(i,"truthy");const n=this.clone();n.$_terms.truthy=n.$_terms.truthy||new o;for(let t=0;t<i.length;++t){const e=i[t];s(void 0!==e,"Cannot call truthy with undefined"),n.$_terms.truthy.add(e)}return n}},falsy:{method(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];r.verifyFlat(i,"falsy");const n=this.clone();n.$_terms.falsy=n.$_terms.falsy||new o;for(let t=0;t<i.length;++t){const e=i[t];s(void 0!==e,"Cannot call falsy with undefined"),n.$_terms.falsy.add(e)}return n}},sensitive:{method(t){return void 0===t&&(t=!0),this.$_setFlag("sensitive",t)}}},cast:{number:{from:h.isBool,to:(t,i)=>t?1:0},string:{from:h.isBool,to:(t,i)=>t?"true":"false"}},manifest:{build:(t,i)=>(i.truthy&&(t=t.truthy(...i.truthy)),i.falsy&&(t=t.falsy(...i.falsy)),t)},messages:{"boolean.base":"{{#label}} must be a boolean"}})},7500:(t,i,e)=>{const s=e(375),n=e(8068),r=e(8160),o=e(3328),h={isDate:function(t){return t instanceof Date}};t.exports=n.extend({type:"date",coerce:{from:["number","string"],method:(t,i)=>{let{schema:e}=i;return{value:h.parse(t,e.Zd.format)||t}}},validate(t,i){let{schema:e,error:s,prefs:n}=i;if(t instanceof Date&&!j(t.getTime()))return;const r=e.Zd.format;return n.convert&&r&&"string"==typeof t?{value:t,errors:s("date.format",{format:r})}:{value:t,errors:s("date.base")}},rules:{compare:{method:!1,validate(t,i,e,s){let{date:n}=e,{name:o,operator:h,args:a}=s;const u="now"===n?Date.now():n.getTime();return r.compare(t.getTime(),u,h)?t:i.error("date."+o,{limit:a.date,value:t})},args:[{name:"date",ref:!0,normalize:t=>"now"===t?t:h.parse(t),assert:t=>null!==t,message:"must have a valid date format"}]},format:{method(t){return s(["iso","javascript","unix"].includes(t),"Unknown date format",t),this.$_setFlag("format",t)}},greater:{method(t){return this.$_addRule({name:"greater",method:"compare",args:{date:t},operator:">"})}},iso:{method(){return this.format("iso")}},less:{method(t){return this.$_addRule({name:"less",method:"compare",args:{date:t},operator:"<"})}},max:{method(t){return this.$_addRule({name:"max",method:"compare",args:{date:t},operator:"<="})}},min:{method(t){return this.$_addRule({name:"min",method:"compare",args:{date:t},operator:">="})}},timestamp:{method(t){return void 0===t&&(t="javascript"),s(["javascript","unix"].includes(t),'"type" must be one of "javascript, unix"'),this.format(t)}}},cast:{number:{from:h.isDate,to:(t,i)=>t.getTime()},string:{from:h.isDate,to:(t,i)=>{let{prefs:e}=i;return o.date(t,e)}}},messages:{"date.base":"{{#label}} must be a valid date","date.format":'{{#label}} must be in {msg("date.format." + #format) || #format} format',"date.greater":"{{#label}} must be greater than {{:#limit}}","date.less":"{{#label}} must be less than {{:#limit}}","date.max":"{{#label}} must be less than or equal to {{:#limit}}","date.min":"{{#label}} must be greater than or equal to {{:#limit}}","date.format.iso":"ISO 8601 date","date.format.javascript":"timestamp or number of milliseconds","date.format.unix":"timestamp or number of seconds"}}),h.parse=function(t,i){if(t instanceof Date)return t;if("string"!=typeof t&&(j(t)||!isFinite(t))||/^\s*$/.test(t))return null;if("iso"===i)return r.isIsoDate(t)?h.date(t.toString()):null;const e=t;if("string"==typeof t&&/^[+-]?\d+(\.\d+)?$/.test(t)&&(t=S(t)),i){if("javascript"===i)return h.date(1*t);if("unix"===i)return h.date(1e3*t);if("string"==typeof e)return null}return h.date(t)},h.date=function(t){const i=new Date(t);return j(i.getTime())?null:i}},390:(t,i,e)=>{const s=e(375),n=e(7824);t.exports=n.extend({type:"function",properties:{typeof:"function"},rules:{arity:{method(t){return s(Number.isSafeInteger(t)&&t>=0,"n must be a positive integer"),this.$_addRule({name:"arity",args:{n:t}})},validate:(t,i,e)=>{let{n:s}=e;return t.length===s?t:i.error("function.arity",{n:s})}},class:{method(){return this.$_addRule("class")},validate:(t,i)=>/^\s*class\s/.test(t.toString())?t:i.error("function.class",{value:t})},minArity:{method(t){return s(Number.isSafeInteger(t)&&t>0,"n must be a strict positive integer"),this.$_addRule({name:"minArity",args:{n:t}})},validate:(t,i,e)=>{let{n:s}=e;return t.length>=s?t:i.error("function.minArity",{n:s})}},maxArity:{method(t){return s(Number.isSafeInteger(t)&&t>=0,"n must be a positive integer"),this.$_addRule({name:"maxArity",args:{n:t}})},validate:(t,i,e)=>{let{n:s}=e;return t.length<=s?t:i.error("function.maxArity",{n:s})}}},messages:{"function.arity":"{{#label}} must have an arity of {{#n}}","function.class":"{{#label}} must be a class","function.maxArity":"{{#label}} must have an arity lesser or equal to {{#n}}","function.minArity":"{{#label}} must have an arity greater or equal to {{#n}}"}})},7824:(t,i,e)=>{const s=e(978),n=e(375),r=e(8571),o=e(3652),h=e(8068),a=e(8160),u=e(3292),c=e(6354),l=e(6133),f=e(3328),g={renameDefaults:{alias:!1,multiple:!1,override:!1}};t.exports=h.extend({type:"Uf",properties:{typeof:"object"},flags:{unknown:{default:void 0}},terms:{dependencies:{init:null},keys:{init:null,manifest:{mapped:{from:"schema",to:"key"}}},patterns:{init:null},renames:{init:null}},args:(t,i)=>t.keys(i),validate(t,i){let{schema:e,error:s,state:n,prefs:r}=i;if(!t||typeof t!==e.$_property("typeof")||Array.isArray(t))return{value:t,errors:s("object.base",{type:e.$_property("typeof")})};if(!(e.$_terms.renames||e.$_terms.dependencies||e.$_terms.keys||e.$_terms.patterns||e.$_terms.externals))return;t=g.clone(t,r);const o=[];if(e.$_terms.renames&&!g.rename(e,t,n,r,o))return{value:t,errors:o};if(!e.$_terms.keys&&!e.$_terms.patterns&&!e.$_terms.dependencies)return{value:t,errors:o};const h=new Set(_.keys(t));if(e.$_terms.keys){const i=[t,...n.ancestors];for(const s of e.$_terms.keys){const e=s.key,a=t[e];h.delete(e);const u=n.localize([...n.path,e],i,s),c=s.schema.$_validate(a,u,r);if(c.errors){if(r.abortEarly)return{value:t,errors:c.errors};void 0!==c.value&&(t[e]=c.value),o.push(...c.errors)}else"strip"===s.schema.Zd.result||void 0===c.value&&void 0!==a?delete t[e]:void 0!==c.value&&(t[e]=c.value)}}if(h.size||e.Zd.Qf){const i=g.unknown(e,t,h,o,n,r);if(i)return i}if(e.$_terms.dependencies)for(const i of e.$_terms.dependencies){if(null!==i.key&&!1===g.isPresent(i.options)(i.key.resolve(t,n,r,null,{shadow:!1})))continue;const s=g.dependencies[i.rel](e,i,t,n,r);if(s){const i=e.$_createError(s.code,t,s.context,n,r);if(r.abortEarly)return{value:t,errors:i};o.push(i)}}return{value:t,errors:o}},rules:{and:{method(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];return a.verifyFlat(i,"and"),g.dependency(this,"and",null,i)}},append:{method(t){return null==t||0===_.keys(t).length?this:this.keys(t)}},assert:{method(t,i,e){f.isTemplate(t)||(t=u.ref(t)),n(void 0===e||"string"==typeof e,"Message must be a string"),i=this.$_compile(i,{appendPath:!0});const s=this.$_addRule({name:"assert",args:{subject:t,schema:i,message:e}});return s.$_mutateRegister(t),s.$_mutateRegister(i),s},validate(t,i,e){let{error:s,prefs:n,state:r}=i,{subject:o,schema:h,message:a}=e;const u=o.resolve(t,r,n),c=l.isRef(o)?o.absolute(r):[];return h.$_match(u,r.localize(c,[t,...r.ancestors],h),n)?t:s("object.assert",{subject:o,message:a})},args:["subject","schema","message"],multi:!0},instance:{method(t,i){return n("function"==typeof t,"constructor must be a function"),i=i||t.name,this.$_addRule({name:"instance",args:{constructor:t,name:i}})},validate:(t,i,e)=>{let{constructor:s,name:n}=e;return t instanceof s?t:i.error("object.instance",{type:n,value:t})},args:["constructor","name"]},keys:{method(t){n(void 0===t||"object"==typeof t,"Object schema must be a valid object"),n(!a.isSchema(t),"Object schema cannot be a joi schema");const i=this.clone();if(t)if(_.keys(t).length){i.$_terms.keys=i.$_terms.keys?i.$_terms.keys.filter((i=>!t.hasOwnProperty(i.key))):new g.Keys;for(const e in t)a.tryWithPath((()=>i.$_terms.keys.push({key:e,schema:this.$_compile(t[e])})),e)}else i.$_terms.keys=new g.Keys;else i.$_terms.keys=null;return i.$_mutateRebuild()}},length:{method(t){return this.$_addRule({name:"length",args:{limit:t},operator:"="})},validate:(t,i,e,s)=>{let{limit:n}=e,{name:r,operator:o,args:h}=s;return a.compare(_.keys(t).length,n,o)?t:i.error("object."+r,{limit:h.limit,value:t})},args:[{name:"limit",ref:!0,assert:a.limit,message:"must be a positive integer"}]},max:{method(t){return this.$_addRule({name:"max",method:"length",args:{limit:t},operator:"<="})}},min:{method(t){return this.$_addRule({name:"min",method:"length",args:{limit:t},operator:">="})}},nand:{method(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];return a.verifyFlat(i,"nand"),g.dependency(this,"nand",null,i)}},or:{method(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];return a.verifyFlat(i,"or"),g.dependency(this,"or",null,i)}},oxor:{method(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];return g.dependency(this,"oxor",null,i)}},pattern:{method(t,i,e){void 0===e&&(e={});const s=t instanceof RegExp;s||(t=this.$_compile(t,{appendPath:!0})),n(void 0!==i,"Invalid rule"),a.assertOptions(e,["fallthrough","matches"]),s&&n(!t.flags.includes("g")&&!t.flags.includes("y"),"pattern should not use global or sticky mode"),i=this.$_compile(i,{appendPath:!0});const r=this.clone();r.$_terms.patterns=r.$_terms.patterns||[];const o={[s?"regex":"schema"]:t,rule:i};return e.matches&&(o.matches=this.$_compile(e.matches),"array"!==o.matches.type&&(o.matches=o.matches.$_root.array().items(o.matches)),r.$_mutateRegister(o.matches),r.$_setFlag("Qf",!0,{clone:!1})),e.fallthrough&&(o.fallthrough=!0),r.$_terms.patterns.push(o),r.$_mutateRegister(i),r}},ref:{method(){return this.$_addRule("ref")},validate:(t,i)=>l.isRef(t)?t:i.error("object.refType",{value:t})},regex:{method(){return this.$_addRule("regex")},validate:(t,i)=>t instanceof RegExp?t:i.error("object.regex",{value:t})},rename:{method(t,i,e){void 0===e&&(e={}),n("string"==typeof t||t instanceof RegExp,"Rename missing the from argument"),n("string"==typeof i||i instanceof f,"Invalid rename to argument"),n(i!==t,"Cannot rename key to same name:",t),a.assertOptions(e,["alias","ignoreUndefined","override","multiple"]);const r=this.clone();r.$_terms.renames=r.$_terms.renames||[];for(const i of r.$_terms.renames)n(i.from!==t,"Cannot rename the same key multiple times");return i instanceof f&&r.$_mutateRegister(i),r.$_terms.renames.push({from:t,to:i,options:s(g.renameDefaults,e)}),r}},schema:{method(t){return void 0===t&&(t="any"),this.$_addRule({name:"schema",args:{type:t}})},validate:(t,i,e)=>{let{type:s}=e;return!a.isSchema(t)||"any"!==s&&t.type!==s?i.error("object.schema",{type:s}):t}},unknown:{method(t){return this.$_setFlag("unknown",!1!==t)}},with:{method(t,i,e){return void 0===e&&(e={}),g.dependency(this,"with",t,i,e)}},without:{method(t,i,e){return void 0===e&&(e={}),g.dependency(this,"without",t,i,e)}},xor:{method(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];return a.verifyFlat(i,"xor"),g.dependency(this,"xor",null,i)}}},overrides:{default(t,i){return void 0===t&&(t=a.symbols.deepDefault),this.$_parent("default",t,i)}},rebuild(t){if(t.$_terms.keys){const i=new o.Sorter;for(const e of t.$_terms.keys)a.tryWithPath((()=>i.add(e,{after:e.schema.$_rootReferences(),group:e.key})),e.key);t.$_terms.keys=new g.Keys(...i.nodes)}},manifest:{build(t,i){if(i.keys&&(t=t.keys(i.keys)),i.dependencies)for(const{rel:e,key:s=null,peers:n,options:r}of i.dependencies)t=g.dependency(t,e,s,n,r);if(i.patterns)for(const{regex:e,schema:s,rule:n,fallthrough:r,matches:o}of i.patterns)t=t.pattern(e||s,n,{fallthrough:r,matches:o});if(i.renames)for(const{from:e,to:s,options:n}of i.renames)t=t.rename(e,s,n);return t}},messages:{"object.and":"{{#label}} contains {{#presentWithLabels}} without its required peers {{#missingWithLabels}}","object.assert":'{{#label}} is invalid because {if(#subject.key, `"` + #subject.key + `" failed to ` + (#message || "pass the assertion test"), #message || "the assertion failed")}',"object.base":"{{#label}} must be of type {{#type}}","object.instance":"{{#label}} must be an instance of {{:#type}}","object.length":'{{#label}} must have {{#limit}} key{if(#limit == 1, "", "s")}',"object.max":'{{#label}} must have less than or equal to {{#limit}} key{if(#limit == 1, "", "s")}',"object.min":'{{#label}} must have at least {{#limit}} key{if(#limit == 1, "", "s")}',"object.missing":"{{#label}} must contain at least one of {{#peersWithLabels}}","object.nand":"{{:#mainWithLabel}} must not exist simultaneously with {{#peersWithLabels}}","object.oxor":"{{#label}} contains a conflict between optional exclusive peers {{#peersWithLabels}}","object.pattern.match":"{{#label}} keys failed to match pattern requirements","object.refType":"{{#label}} must be a Joi reference","object.regex":"{{#label}} must be a RegExp object","object.rename.multiple":"{{#label}} cannot rename {{:#from}} because multiple renames are disabled and another key was already renamed to {{:#to}}","object.rename.override":"{{#label}} cannot rename {{:#from}} because override is disabled and target {{:#to}} exists","object.schema":"{{#label}} must be a Joi schema of {{#type}} type","object.unknown":"{{#label}} is not allowed","object.with":"{{:#mainWithLabel}} missing required peer {{:#peerWithLabel}}","object.without":"{{:#mainWithLabel}} conflict with forbidden peer {{:#peerWithLabel}}","object.xor":"{{#label}} contains a conflict between exclusive peers {{#peersWithLabels}}"}}),g.clone=function(t,i){if("object"==typeof t){if(i.nonEnumerables)return r(t,{shallow:!0});const e=_.create(_.getPrototypeOf(t));return _.assign(e,t),e}const e=function(){for(var i=arguments.length,e=new Array(i),s=0;s<i;s++)e[s]=arguments[s];return t.apply(this,e)};return e.prototype=r(t.prototype),_.defineProperty(e,"name",{value:t.name,writable:!1}),_.defineProperty(e,"length",{value:t.length,writable:!1}),_.assign(e,t),e},g.dependency=function(t,i,e,s,r){n(null===e||"string"==typeof e,i,"key must be a strings"),r||(r=s.length>1&&"object"==typeof s[s.length-1]?s.pop():{}),a.assertOptions(r,["separator","isPresent"]),s=[].concat(s);const o=a.default(r.separator,"."),h=[];for(const t of s)n("string"==typeof t,i,"peers must be strings"),h.push(u.ref(t,{separator:o,ancestor:0,prefix:!1}));null!==e&&(e=u.ref(e,{separator:o,ancestor:0,prefix:!1}));const c=t.clone();return c.$_terms.dependencies=c.$_terms.dependencies||[],c.$_terms.dependencies.push(new g.Dependency(i,e,h,s,r)),c},g.dependencies={and(t,i,e,s,n){const r=[],o=[],h=i.peers.length,a=g.isPresent(i.options);for(const t of i.peers)!1===a(t.resolve(e,s,n,null,{shadow:!1}))?r.push(t.key):o.push(t.key);if(r.length!==h&&o.length!==h)return{code:"object.and",context:{present:o,presentWithLabels:g.keysToLabels(t,o),missing:r,missingWithLabels:g.keysToLabels(t,r)}}},nand(t,i,e,s,n){const r=[],o=g.isPresent(i.options);for(const t of i.peers)o(t.resolve(e,s,n,null,{shadow:!1}))&&r.push(t.key);if(r.length!==i.peers.length)return;const h=i.paths[0],a=i.paths.slice(1);return{code:"object.nand",context:{main:h,mainWithLabel:g.keysToLabels(t,h),peers:a,peersWithLabels:g.keysToLabels(t,a)}}},or(t,i,e,s,n){const r=g.isPresent(i.options);for(const t of i.peers)if(r(t.resolve(e,s,n,null,{shadow:!1})))return;return{code:"object.missing",context:{peers:i.paths,peersWithLabels:g.keysToLabels(t,i.paths)}}},oxor(t,i,e,s,n){const r=[],o=g.isPresent(i.options);for(const t of i.peers)o(t.resolve(e,s,n,null,{shadow:!1}))&&r.push(t.key);if(!r.length||1===r.length)return;const h={peers:i.paths,peersWithLabels:g.keysToLabels(t,i.paths)};return h.present=r,h.presentWithLabels=g.keysToLabels(t,r),{code:"object.oxor",context:h}},with(t,i,e,s,n){const r=g.isPresent(i.options);for(const o of i.peers)if(!1===r(o.resolve(e,s,n,null,{shadow:!1})))return{code:"object.with",context:{main:i.key.key,mainWithLabel:g.keysToLabels(t,i.key.key),peer:o.key,peerWithLabel:g.keysToLabels(t,o.key)}}},without(t,i,e,s,n){const r=g.isPresent(i.options);for(const o of i.peers)if(r(o.resolve(e,s,n,null,{shadow:!1})))return{code:"object.without",context:{main:i.key.key,mainWithLabel:g.keysToLabels(t,i.key.key),peer:o.key,peerWithLabel:g.keysToLabels(t,o.key)}}},xor(t,i,e,s,n){const r=[],o=g.isPresent(i.options);for(const t of i.peers)o(t.resolve(e,s,n,null,{shadow:!1}))&&r.push(t.key);if(1===r.length)return;const h={peers:i.paths,peersWithLabels:g.keysToLabels(t,i.paths)};return 0===r.length?{code:"object.missing",context:h}:(h.present=r,h.presentWithLabels=g.keysToLabels(t,r),{code:"object.xor",context:h})}},g.keysToLabels=function(t,i){return Array.isArray(i)?i.map((i=>t.$_mapLabels(i))):t.$_mapLabels(i)},g.isPresent=function(t){return"function"==typeof t.isPresent?t.isPresent:t=>void 0!==t},g.rename=function(t,i,e,s,n){const r={};for(const o of t.$_terms.renames){const h=[],a="string"!=typeof o.from;if(a)for(const t in i){if(void 0===i[t]&&o.options.ignoreUndefined||t===o.to)continue;const e=o.from.exec(t);e&&h.push({from:t,to:o.to,match:e})}else!_.prototype.hasOwnProperty.call(i,o.from)||void 0===i[o.from]&&o.options.ignoreUndefined||h.push(o);for(const u of h){const h=u.from;let c=u.to;if(c instanceof f&&(c=c.render(i,e,s,u.match)),h!==c){if(!o.options.multiple&&r[c]&&(n.push(t.$_createError("object.rename.multiple",i,{from:h,to:c,pattern:a},e,s)),s.abortEarly)||_.prototype.hasOwnProperty.call(i,c)&&!o.options.override&&!r[c]&&(n.push(t.$_createError("object.rename.override",i,{from:h,to:c,pattern:a},e,s)),s.abortEarly))return!1;void 0===i[h]?delete i[c]:i[c]=i[h],r[c]=!0,o.options.alias||delete i[h]}}}return!0},g.unknown=function(t,i,e,s,n,r){if(t.$_terms.patterns){let o=!1;const h=t.$_terms.patterns.map((t=>{if(t.matches)return o=!0,[]})),a=[i,...n.ancestors];for(const o of e){const u=i[o],c=[...n.path,o];for(let l=0;l<t.$_terms.patterns.length;++l){const d=t.$_terms.patterns[l];if(d.regex){const t=d.regex.test(o);if(n.mainstay.tracer.debug(n,"rule","pattern.".concat(l),t?"pass":"error"),!t)continue}else if(!d.schema.$_match(o,n.nest(d.schema,"pattern.".concat(l)),r))continue;e.delete(o);const f=n.localize(c,a,{schema:d.rule,key:o}),g=d.rule.$_validate(u,f,r);if(g.errors){if(r.abortEarly)return{value:i,errors:g.errors};s.push(...g.errors)}if(d.matches&&h[l].push(o),i[o]=g.value,!d.fallthrough)break}}if(o)for(let e=0;e<h.length;++e){const o=h[e];if(!o)continue;const u=t.$_terms.patterns[e].matches,l=n.localize(n.path,a,u),d=u.$_validate(o,l,r);if(d.errors){const e=c.details(d.errors,{override:!1});e.matches=o;const h=t.$_createError("object.pattern.match",i,e,n,r);if(r.abortEarly)return{value:i,errors:h};s.push(h)}}}if(e.size&&(t.$_terms.keys||t.$_terms.patterns)){if(r.stripUnknown&&void 0===t.Zd.unknown||r.skipFunctions){const t=!(!r.stripUnknown||!0!==r.stripUnknown&&!r.stripUnknown.objects);for(const s of e)t?(delete i[s],e.delete(s)):"function"==typeof i[s]&&e.delete(s)}if(!a.default(t.Zd.unknown,r.allowUnknown))for(const o of e){const e=n.localize([...n.path,o],[]),h=t.$_createError("object.unknown",i[o],{child:o},e,r,{flags:!1});if(r.abortEarly)return{value:i,errors:h};s.push(h)}}},g.Dependency=class{describe(){const t={rel:this.rel,peers:this.paths};return null!==this.key&&(t.key=this.key.key),"."!==this.peers[0].separator&&(t.options=p(d({},t.options),{separator:this.peers[0].separator})),this.options.isPresent&&(t.options=p(d({},t.options),{isPresent:this.options.isPresent})),t}constructor(t,i,e,s,n){this.rel=t,this.key=i,this.peers=e,this.paths=s,this.options=n}},g.Keys=class extends Array{concat(t){const i=this.slice(),e=new Map;for(let t=0;t<i.length;++t)e.set(i[t].key,t);for(const s of t){const t=s.key,n=e.get(t);void 0!==n?i[n]={key:t,schema:i[n].schema.concat(s.schema)}:i.push(s)}return i}}},8785:(t,i,e)=>{const s=e(375),n=e(8068),r=e(8160),o=e(3292),h=e(6354),a={};t.exports=n.extend({type:"link",properties:{schemaChain:!0},terms:{link:{init:null,manifest:"single",register:!1}},args:(t,i)=>t.ref(i),validate(t,i){let{schema:e,state:n,prefs:r}=i;s(e.$_terms.link,"Uninitialized link schema");const o=a.generate(e,t,n,r),h=e.$_terms.link[0].ref;return o.$_validate(t,n.nest(o,"link:".concat(h.display,":").concat(o.type)),r)},generate:(t,i,e,s)=>a.generate(t,i,e,s),rules:{ref:{method(t){s(!this.$_terms.link,"Cannot reinitialize schema"),t=o.ref(t),s("value"===t.type||"local"===t.type,"Invalid reference type:",t.type),s("local"===t.type||"root"===t.ancestor||t.ancestor>0,"Link cannot reference itself");const i=this.clone();return i.$_terms.link=[{ref:t}],i}},relative:{method(t){return void 0===t&&(t=!0),this.$_setFlag("relative",t)}}},overrides:{concat(t){s(this.$_terms.link,"Uninitialized link schema"),s(r.isSchema(t),"Invalid schema object"),s("link"!==t.type,"Cannot merge type link with another link");const i=this.clone();return i.$_terms.whens||(i.$_terms.whens=[]),i.$_terms.whens.push({concat:t}),i.$_mutateRebuild()}},manifest:{build:(t,i)=>(s(i.link,"Invalid link description missing link"),t.ref(i.link))}}),a.generate=function(t,i,e,s){let n=e.mainstay.links.get(t);if(n)return n.gf(i,e,s).schema;const r=t.$_terms.link[0].ref,{perspective:o,path:h}=a.perspective(r,e);a.assert(o,"which is outside of schema boundaries",r,t,e,s);try{n=h.length?o.$_reach(h):o}catch(i){a.assert(!1,"to non-existing schema",r,t,e,s)}return a.assert("link"!==n.type,"which is another link",r,t,e,s),t.Zd.relative||e.mainstay.links.set(t,n),n.gf(i,e,s).schema},a.perspective=function(t,i){if("local"===t.type){for(const{schema:e,key:s}of i.schemas){if((e.Zd.id||s)===t.path[0])return{perspective:e,path:t.path.slice(1)};if(e.$_terms.shared)for(const i of e.$_terms.shared)if(i.Zd.id===t.path[0])return{perspective:i,path:t.path.slice(1)}}return{perspective:null,path:null}}return"root"===t.ancestor?{perspective:i.schemas[i.schemas.length-1].schema,path:t.path}:{perspective:i.schemas[t.ancestor]&&i.schemas[t.ancestor].schema,path:t.path}},a.assert=function(t,i,e,n,r,o){t||s(!1,'"'.concat(h.label(n.Zd,r,o),'" contains link reference "').concat(e.display,'" ').concat(i))}},3832:(t,i,e)=>{const s=e(375),n=e(8068),r=e(8160),o={numberRx:/^\s*[+-]?(?:(?:\d+(?:\.\d*)?)|(?:\.\d+))(?:e([+-]?\d+))?\s*$/i,precisionRx:/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/,exponentialPartRegex:/[eE][+-]?\d+$/,leadingSignAndZerosRegex:/^[+-]?(0*)?/,dotRegex:/\./,trailingZerosRegex:/0+$/,decimalPlaces(t){const i=t.toString(),e=i.indexOf("."),s=i.indexOf("e");return(e<0?0:(s<0?i.length:s)-e-1)+(s<0?0:x.max(0,-C(i.slice(s+1))))}};t.exports=n.extend({type:"number",flags:{unsafe:{default:!1}},coerce:{from:"string",method(t,i){let{schema:e,error:s}=i;if(!t.match(o.numberRx))return;t=t.trim();const n={value:S(t)};if(0===n.value&&(n.value=0),!e.Zd.unsafe)if(t.match(/e/i)){if(o.extractSignificantDigits(t)!==o.extractSignificantDigits(String(n.value)))return n.errors=s("number.unsafe"),n}else{const i=n.value.toString();if(i.match(/e/i))return n;if(i!==o.normalizeDecimal(t))return n.errors=s("number.unsafe"),n}return n}},validate(t,i){let{schema:e,error:s,prefs:n}=i;if(t===1/0||t===-1/0)return{value:t,errors:s("number.infinity")};if(!r.isNumber(t))return{value:t,errors:s("number.base")};const o={value:t};if(n.convert){const t=e.$_getRule("precision");if(t){const i=x.pow(10,t.args.limit);o.value=x.round(o.value*i)/i}}return 0===o.value&&(o.value=0),!e.Zd.unsafe&&(t>Number.MAX_SAFE_INTEGER||t<Number.MIN_SAFE_INTEGER)&&(o.errors=s("number.unsafe")),o},rules:{compare:{method:!1,validate:(t,i,e,s)=>{let{limit:n}=e,{name:o,operator:h,args:a}=s;return r.compare(t,n,h)?t:i.error("number."+o,{limit:a.limit,value:t})},args:[{name:"limit",ref:!0,assert:r.isNumber,message:"must be a number"}]},greater:{method(t){return this.$_addRule({name:"greater",method:"compare",args:{limit:t},operator:">"})}},integer:{method(){return this.$_addRule("integer")},validate:(t,i)=>x.trunc(t)-t==0?t:i.error("number.integer")},less:{method(t){return this.$_addRule({name:"less",method:"compare",args:{limit:t},operator:"<"})}},max:{method(t){return this.$_addRule({name:"max",method:"compare",args:{limit:t},operator:"<="})}},min:{method(t){return this.$_addRule({name:"min",method:"compare",args:{limit:t},operator:">="})}},multiple:{method(t){const i="number"==typeof t?o.decimalPlaces(t):null,e=x.pow(10,i);return this.$_addRule({name:"multiple",args:{base:t,baseDecimalPlace:i,pfactor:e}})},validate:(t,i,e,s)=>{let{base:n,baseDecimalPlace:r,pfactor:h}=e;return o.decimalPlaces(t)>r?i.error("number.multiple",{multiple:s.args.base,value:t}):x.round(h*t)%x.round(h*n)==0?t:i.error("number.multiple",{multiple:s.args.base,value:t})},args:[{name:"base",ref:!0,assert:t=>"number"==typeof t&&isFinite(t)&&t>0,message:"must be a positive number"},"baseDecimalPlace","pfactor"],multi:!0},negative:{method(){return this.sign("negative")}},port:{method(){return this.$_addRule("port")},validate:(t,i)=>Number.isSafeInteger(t)&&t>=0&&t<=65535?t:i.error("number.port")},positive:{method(){return this.sign("positive")}},precision:{method(t){return s(Number.isSafeInteger(t),"limit must be an integer"),this.$_addRule({name:"precision",args:{limit:t}})},validate(t,i,e){let{limit:s}=e;const n=t.toString().match(o.precisionRx);return x.max((n[1]?n[1].length:0)-(n[2]?C(n[2],10):0),0)<=s?t:i.error("number.precision",{limit:s,value:t})},convert:!0},sign:{method(t){return s(["negative","positive"].includes(t),"Invalid sign",t),this.$_addRule({name:"sign",args:{sign:t}})},validate:(t,i,e)=>{let{sign:s}=e;return"negative"===s&&t<0||"positive"===s&&t>0?t:i.error("number.".concat(s))}},unsafe:{method(t){return void 0===t&&(t=!0),s("boolean"==typeof t,"enabled must be a boolean"),this.$_setFlag("unsafe",t)}}},cast:{string:{from:t=>"number"==typeof t,to:(t,i)=>t.toString()}},messages:{"number.base":"{{#label}} must be a number","number.greater":"{{#label}} must be greater than {{#limit}}","number.infinity":"{{#label}} cannot be infinity","number.integer":"{{#label}} must be an integer","number.less":"{{#label}} must be less than {{#limit}}","number.max":"{{#label}} must be less than or equal to {{#limit}}","number.min":"{{#label}} must be greater than or equal to {{#limit}}","number.multiple":"{{#label}} must be a multiple of {{#multiple}}","number.negative":"{{#label}} must be a negative number","number.port":"{{#label}} must be a valid port","number.positive":"{{#label}} must be a positive number","number.precision":"{{#label}} must have no more than {{#limit}} decimal places","number.unsafe":"{{#label}} must be a safe number"}}),o.extractSignificantDigits=function(t){return t.replace(o.exponentialPartRegex,"").replace(o.dotRegex,"").replace(o.trailingZerosRegex,"").replace(o.leadingSignAndZerosRegex,"")},o.normalizeDecimal=function(t){return(t=t.replace(/^\+/,"").replace(/\.0*$/,"").replace(/^(-?)\.([^\.]*)$/,"$10.$2").replace(/^(-?)0+([0-9])/,"$1$2")).includes(".")&&t.endsWith("0")&&(t=t.replace(/0+$/,"")),"-0"===t?"0":t}},8966:(t,i,e)=>{const s=e(7824);t.exports=s.extend({type:"object",cast:{map:{from:t=>t&&"object"==typeof t,to:(t,i)=>new Map(_.entries(t))}}})},7417:(t,i,e)=>{const s=e(375),n=e(5380),r=e(1745),o=e(9959),h=e(6064),a=e(9926),u=e(5752),c=e(8068),l=e(8160),f={tlds:a instanceof Set&&{tlds:{allow:a,deny:null}},base64Regex:{true:{true:/^(?:[\w\-]{2}[\w\-]{2})*(?:[\w\-]{2}==|[\w\-]{3}=)?$/,false:/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/},false:{true:/^(?:[\w\-]{2}[\w\-]{2})*(?:[\w\-]{2}(==)?|[\w\-]{3}=?)?$/,false:/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}(==)?|[A-Za-z0-9+\/]{3}=?)?$/}},dataUriRegex:/^data:[\w+.-]+\/[\w+.-]+;((charset=[\w-]+|base64),)?(.*)$/,hexRegex:{withPrefix:/^0x[0-9a-f]+$/i,withOptionalPrefix:/^(?:0x)?[0-9a-f]+$/i,withoutPrefix:/^[0-9a-f]+$/i},ipRegex:o.regex({cidr:"forbidden"}).regex,isoDurationRegex:/^P(?!$)(\d+Y)?(\d+M)?(\d+W)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?$/,guidBrackets:{"{":"}","[":"]","(":")","":""},guidVersions:{uuidv1:"1",uuidv2:"2",uuidv3:"3",uuidv4:"4",uuidv5:"5",uuidv6:"6",uuidv7:"7",uuidv8:"8"},guidSeparators:new Set([void 0,!0,!1,"-",":"]),normalizationForms:["NFC","NFD","NFKC","NFKD"]};t.exports=c.extend({type:"string",flags:{insensitive:{default:!1},truncate:{default:!1}},terms:{replacements:{init:null}},coerce:{from:"string",method(t,i){let{schema:e,state:s,prefs:n}=i;const r=e.$_getRule("normalize");r&&(t=t.normalize(r.args.form));const o=e.$_getRule("case");o&&(t="upper"===o.args.direction?t.toLocaleUpperCase():t.toLocaleLowerCase());const h=e.$_getRule("trim");if(h&&h.args.enabled&&(t=t.trim()),e.$_terms.replacements)for(const i of e.$_terms.replacements)t=t.replace(i.pattern,i.replacement);const a=e.$_getRule("hex");if(a&&a.args.options.byteAligned&&t.length%2!=0&&(t="0".concat(t)),e.$_getRule("isoDate")){const i=f.isoDate(t);i&&(t=i)}if(e.Zd.truncate){const i=e.$_getRule("max");if(i){let r=i.args.limit;if(l.isResolvable(r)&&(r=r.resolve(t,s,n),!l.limit(r)))return{value:t,errors:e.$_createError("any.ref",r,{ref:i.args.limit,arg:"limit",reason:"must be a positive integer"},s,n)};t=t.slice(0,r)}}return{value:t}}},validate(t,i){let{schema:e,error:s}=i;if("string"!=typeof t)return{value:t,errors:s("string.base")};if(""===t){const i=e.$_getRule("min");return i&&0===i.args.limit?void 0:{value:t,errors:s("string.empty")}}},rules:{alphanum:{method(){return this.$_addRule("alphanum")},validate:(t,i)=>/^[a-zA-Z0-9]+$/.test(t)?t:i.error("string.alphanum")},base64:{method(t){return void 0===t&&(t={}),l.assertOptions(t,["paddingRequired","urlSafe"]),t=d({urlSafe:!1,paddingRequired:!0},t),s("boolean"==typeof t.paddingRequired,"paddingRequired must be boolean"),s("boolean"==typeof t.urlSafe,"urlSafe must be boolean"),this.$_addRule({name:"base64",args:{options:t}})},validate:(t,i,e)=>{let{options:s}=e;return f.base64Regex[s.paddingRequired][s.urlSafe].test(t)?t:i.error("string.base64")}},case:{method(t){return s(["lower","upper"].includes(t),"Invalid case:",t),this.$_addRule({name:"case",args:{direction:t}})},validate:(t,i,e)=>{let{direction:s}=e;return"lower"===s&&t===t.toLocaleLowerCase()||"upper"===s&&t===t.toLocaleUpperCase()?t:i.error("string.".concat(s,"case"))},convert:!0},creditCard:{method(){return this.$_addRule("creditCard")},validate(t,i){let e=t.length,s=0,n=1;for(;e--;){const i=t.charAt(e)*n;s+=i-9*(i>9),n^=3}return s>0&&s%10==0?t:i.error("string.creditCard")}},dataUri:{method(t){return void 0===t&&(t={}),l.assertOptions(t,["paddingRequired"]),t=d({paddingRequired:!0},t),s("boolean"==typeof t.paddingRequired,"paddingRequired must be boolean"),this.$_addRule({name:"dataUri",args:{options:t}})},validate(t,i,e){let{options:s}=e;const n=t.match(f.dataUriRegex);return!n||n[2]&&"base64"===n[2]&&!f.base64Regex[s.paddingRequired].false.test(n[3])?i.error("string.dataUri"):t}},domain:{method(t){t&&l.assertOptions(t,["allowFullyQualified","allowUnicode","maxDomainSegments","minDomainSegments","tlds"]);const i=f.addressOptions(t);return this.$_addRule({name:"domain",args:{options:t},address:i})},validate:(t,i,e,s)=>{let{address:r}=s;return n.isValid(t,r)?t:i.error("string.domain")}},email:{method(t){void 0===t&&(t={}),l.assertOptions(t,["allowFullyQualified","allowUnicode","ignoreLength","maxDomainSegments","minDomainSegments","multiple","separator","tlds"]),s(void 0===t.multiple||"boolean"==typeof t.multiple,"multiple option must be an boolean");const i=f.addressOptions(t),e=new RegExp("\\s*[".concat(t.separator?h(t.separator):",","]\\s*"));return this.$_addRule({name:"email",args:{options:t},regex:e,address:i})},validate(t,i,e,s){let{options:n}=e,{regex:o,address:h}=s;const a=n.multiple?t.split(o):[t],u=[];for(const t of a)r.isValid(t,h)||u.push(t);return u.length?i.error("string.email",{value:t,invalids:u}):t}},guid:{alias:"uuid",method(t){void 0===t&&(t={}),l.assertOptions(t,["version","separator"]);let i="";if(t.version){const e=[].concat(t.version);s(e.length>=1,"version must have at least 1 valid version specified");const n=new Set;for(let t=0;t<e.length;++t){const r=e[t];s("string"==typeof r,"version at position "+t+" must be a string");const o=f.guidVersions[r.toLowerCase()];s(o,"version at position "+t+" must be one of "+_.keys(f.guidVersions).join(", ")),s(!n.has(o),"version at position "+t+" must not be a duplicate"),i+=o,n.add(o)}}s(f.guidSeparators.has(t.separator),'separator must be one of true, false, "-", or ":"');const e=void 0===t.separator?"[:-]?":!0===t.separator?"[:-]":!1===t.separator?"[]?":"\\".concat(t.separator),n=new RegExp("^([\\[{\\(]?)[0-9A-F]{8}(".concat(e,")[0-9A-F]{4}\\2?[").concat(i||"0-9A-F","][0-9A-F]{3}\\2?[").concat(i?"89AB":"0-9A-F","][0-9A-F]{3}\\2?[0-9A-F]{12}([\\]}\\)]?)$"),"i");return this.$_addRule({name:"guid",args:{options:t},regex:n})},validate(t,i,e,s){let{regex:n}=s;const r=n.exec(t);return r?f.guidBrackets[r[1]]!==r[r.length-1]?i.error("string.guid"):t:i.error("string.guid")}},hex:{method(t){return void 0===t&&(t={}),l.assertOptions(t,["byteAligned","prefix"]),t=d({byteAligned:!1,prefix:!1},t),s("boolean"==typeof t.byteAligned,"byteAligned must be boolean"),s("boolean"==typeof t.prefix||"optional"===t.prefix,'prefix must be boolean or "optional"'),this.$_addRule({name:"hex",args:{options:t}})},validate:(t,i,e)=>{let{options:s}=e;return("optional"===s.prefix?f.hexRegex.withOptionalPrefix:!0===s.prefix?f.hexRegex.withPrefix:f.hexRegex.withoutPrefix).test(t)?s.byteAligned&&t.length%2!=0?i.error("string.hexAlign"):t:i.error("string.hex")}},hostname:{method(){return this.$_addRule("hostname")},validate:(t,i)=>n.isValid(t,{minDomainSegments:1})||f.ipRegex.test(t)?t:i.error("string.hostname")},insensitive:{method(){return this.$_setFlag("insensitive",!0)}},ip:{method(t){void 0===t&&(t={}),l.assertOptions(t,["cidr","version"]);const{cidr:i,versions:e,regex:s}=o.regex(t),n=t.version?e:void 0;return this.$_addRule({name:"ip",args:{options:{cidr:i,version:n}},regex:s})},validate:(t,i,e,s)=>{let{options:n}=e,{regex:r}=s;return r.test(t)?t:n.version?i.error("string.ipVersion",{value:t,cidr:n.cidr,version:n.version}):i.error("string.ip",{value:t,cidr:n.cidr})}},isoDate:{method(){return this.$_addRule("isoDate")},validate:(t,i)=>{let{error:e}=i;return f.isoDate(t)?t:e("string.isoDate")}},isoDuration:{method(){return this.$_addRule("isoDuration")},validate:(t,i)=>f.isoDurationRegex.test(t)?t:i.error("string.isoDuration")},length:{method(t,i){return f.length(this,"length",t,"=",i)},validate(t,i,e,s){let{limit:n,encoding:r}=e,{name:o,operator:h,args:a}=s;const u=!r&&t.length;return l.compare(u,n,h)?t:i.error("string."+o,{limit:a.limit,value:t,encoding:r})},args:[{name:"limit",ref:!0,assert:l.limit,message:"must be a positive integer"},"encoding"]},lowercase:{method(){return this.case("lower")}},max:{method(t,i){return f.length(this,"max",t,"<=",i)},args:["limit","encoding"]},min:{method(t,i){return f.length(this,"min",t,">=",i)},args:["limit","encoding"]},normalize:{method(t){return void 0===t&&(t="NFC"),s(f.normalizationForms.includes(t),"normalization form must be one of "+f.normalizationForms.join(", ")),this.$_addRule({name:"normalize",args:{form:t}})},validate:(t,i,e)=>{let{error:s}=i,{form:n}=e;return t===t.normalize(n)?t:s("string.normalize",{value:t,form:n})},convert:!0},pattern:{alias:"regex",method(t,i){void 0===i&&(i={}),s(t instanceof RegExp,"regex must be a RegExp"),s(!t.flags.includes("g")&&!t.flags.includes("y"),"regex should not use global or sticky mode"),"string"==typeof i&&(i={name:i}),l.assertOptions(i,["invert","name"]);const e=["string.pattern",i.invert?".invert":"",i.name?".name":".base"].join("");return this.$_addRule({name:"pattern",args:{regex:t,options:i},errorCode:e})},validate:(t,i,e,s)=>{let{regex:n,options:r}=e,{errorCode:o}=s;return n.test(t)^r.invert?t:i.error(o,{name:r.name,regex:n,value:t})},args:["regex","options"],multi:!0},replace:{method(t,i){"string"==typeof t&&(t=new RegExp(h(t),"g")),s(t instanceof RegExp,"pattern must be a RegExp"),s("string"==typeof i,"replacement must be a String");const e=this.clone();return e.$_terms.replacements||(e.$_terms.replacements=[]),e.$_terms.replacements.push({pattern:t,replacement:i}),e}},token:{method(){return this.$_addRule("token")},validate:(t,i)=>/^\w+$/.test(t)?t:i.error("string.token")},trim:{method(t){return void 0===t&&(t=!0),s("boolean"==typeof t,"enabled must be a boolean"),this.$_addRule({name:"trim",args:{enabled:t}})},validate:(t,i,e)=>{let{enabled:s}=e;return s&&t!==t.trim()?i.error("string.trim"):t},convert:!0},truncate:{method(t){return void 0===t&&(t=!0),s("boolean"==typeof t,"enabled must be a boolean"),this.$_setFlag("truncate",t)}},uppercase:{method(){return this.case("upper")}},uri:{method(t){void 0===t&&(t={}),l.assertOptions(t,["allowRelative","allowQuerySquareBrackets","domain","relativeOnly","scheme","encodeUri"]),t.domain&&l.assertOptions(t.domain,["allowFullyQualified","allowUnicode","maxDomainSegments","minDomainSegments","tlds"]);const{regex:i,scheme:e}=u.regex(t),s=t.domain?f.addressOptions(t.domain):null;return this.$_addRule({name:"uri",args:{options:t},regex:i,domain:s,scheme:e})},validate(t,i,e,s){let{options:r}=e,{regex:o,domain:h,scheme:a}=s;if(["http:/","https:/"].includes(t))return i.error("string.uri");let u=o.exec(t);if(!u&&i.prefs.convert&&r.encodeUri){const i=encodeURI(t);u=o.exec(i),u&&(t=i)}if(u){const e=u[1]||u[2];return!h||r.allowRelative&&!e||n.isValid(e,h)?t:i.error("string.domain",{value:e})}return r.relativeOnly?i.error("string.uriRelativeOnly"):r.scheme?i.error("string.uriCustomScheme",{scheme:a,value:t}):i.error("string.uri")}}},manifest:{build(t,i){if(i.replacements)for(const{pattern:e,replacement:s}of i.replacements)t=t.replace(e,s);return t}},messages:{"string.alphanum":"{{#label}} must only contain alpha-numeric characters","string.base":"{{#label}} must be a string","string.base64":"{{#label}} must be a valid base64 string","string.creditCard":"{{#label}} must be a credit card","string.dataUri":"{{#label}} must be a valid dataUri string","string.domain":"{{#label}} must contain a valid domain name","string.email":"{{#label}} must be a valid email","string.empty":"{{#label}} is not allowed to be empty","string.guid":"{{#label}} must be a valid GUID","string.hex":"{{#label}} must only contain hexadecimal characters","string.hexAlign":"{{#label}} hex decoded representation must be byte aligned","string.hostname":"{{#label}} must be a valid hostname","string.ip":"{{#label}} must be a valid ip address with a {{#cidr}} CIDR","string.ipVersion":"{{#label}} must be a valid ip address of one of the following versions {{#version}} with a {{#cidr}} CIDR","string.isoDate":"{{#label}} must be in iso format","string.isoDuration":"{{#label}} must be a valid ISO 8601 duration","string.length":"{{#label}} length must be {{#limit}} characters long","string.lowercase":"{{#label}} must only contain lowercase characters","string.max":"{{#label}} length must be less than or equal to {{#limit}} characters long","string.min":"{{#label}} length must be at least {{#limit}} characters long","string.normalize":"{{#label}} must be unicode normalized in the {{#form}} form","string.token":"{{#label}} must only contain alpha-numeric and underscore characters","string.pattern.base":"{{#label}} with value {:[.]} fails to match the required pattern: {{#regex}}","string.pattern.name":"{{#label}} with value {:[.]} fails to match the {{#name}} pattern","string.pattern.invert.base":"{{#label}} with value {:[.]} matches the inverted pattern: {{#regex}}","string.pattern.invert.name":"{{#label}} with value {:[.]} matches the inverted {{#name}} pattern","string.trim":"{{#label}} must not have leading or trailing whitespace","string.uri":"{{#label}} must be a valid uri","string.uriCustomScheme":"{{#label}} must be a valid uri with a scheme matching the {{#scheme}} pattern","string.uriRelativeOnly":"{{#label}} must be a valid relative uri","string.uppercase":"{{#label}} must only contain uppercase characters"}}),f.addressOptions=function(t){if(!t)return f.tlds||t;if(s(void 0===t.minDomainSegments||Number.isSafeInteger(t.minDomainSegments)&&t.minDomainSegments>0,"minDomainSegments must be a positive integer"),s(void 0===t.maxDomainSegments||Number.isSafeInteger(t.maxDomainSegments)&&t.maxDomainSegments>0,"maxDomainSegments must be a positive integer"),!1===t.tlds)return t;if(!0===t.tlds||void 0===t.tlds)return s(f.tlds,"Built-in TLD list disabled"),_.assign({},t,f.tlds);s("object"==typeof t.tlds,"tlds must be true, false, or an object");const i=t.tlds.deny;if(i)return Array.isArray(i)&&(t=_.assign({},t,{tlds:{deny:new Set(i)}})),s(t.tlds.deny instanceof Set,"tlds.deny must be an array, Set, or boolean"),s(!t.tlds.allow,"Cannot specify both tlds.allow and tlds.deny lists"),f.validateTlds(t.tlds.deny,"tlds.deny"),t;const e=t.tlds.allow;return e?!0===e?(s(f.tlds,"Built-in TLD list disabled"),_.assign({},t,f.tlds)):(Array.isArray(e)&&(t=_.assign({},t,{tlds:{allow:new Set(e)}})),s(t.tlds.allow instanceof Set,"tlds.allow must be an array, Set, or boolean"),f.validateTlds(t.tlds.allow,"tlds.allow"),t):t},f.validateTlds=function(t,i){for(const e of t)s(n.isValid(e,{minDomainSegments:1,maxDomainSegments:1}),"".concat(i," must contain valid top level domain names"))},f.isoDate=function(t){if(!l.isIsoDate(t))return null;/.*T.*[+-]\d\d$/.test(t)&&(t+="00");const i=new Date(t);return j(i.getTime())?null:i.toISOString()},f.length=function(t,i,e,n,r){return s(!r||!1,"Invalid encoding:",r),t.$_addRule({name:i,method:"length",args:{limit:e,encoding:r},operator:n})}},8826:(t,i,e)=>{const s=e(375),n=e(8068),r={};r.Map=class extends Map{slice(){return new r.Map(this)}},t.exports=n.extend({type:"symbol",terms:{map:{init:new r.Map}},coerce:{method(t,i){let{schema:e,error:s}=i;const n=e.$_terms.map.get(t);return n&&(t=n),e.Zd.only&&"symbol"!=typeof t?{value:t,errors:s("symbol.map",{map:e.$_terms.map})}:{value:t}}},validate(t,i){let{error:e}=i;if("symbol"!=typeof t)return{value:t,errors:e("symbol.base")}},rules:{map:{method(t){t&&!t[f]&&"object"==typeof t&&(t=_.entries(t)),s(t&&t[f],"Iterable must be an iterable or object");const i=this.clone(),e=[];for(const n of t){s(n&&n[f],"Entry must be an iterable");const[t,r]=n;s("object"!=typeof t&&"function"!=typeof t&&"symbol"!=typeof t,"Key must not be of type object, function, or Symbol"),s("symbol"==typeof r,"Value must be a Symbol"),i.$_terms.map.set(t,r),e.push(r)}return i.valid(...e)}}},manifest:{build:(t,i)=>(i.map&&(t=t.map(i.map)),t)},messages:{"symbol.base":"{{#label}} must be a symbol","symbol.map":"{{#label}} must be one of {{#map}}"}})},8863:(t,i,e)=>{const s=e(375),n=e(8571),r=e(738),o=e(9621),h=e(8160),a=e(6354),u=e(493),c={result:b("result")};i.entry=function(t,i,e){let n=h.defaults;e&&(s(void 0===e.warnings,"Cannot override warnings preference in synchronous validation"),s(void 0===e.artifacts,"Cannot override artifacts preference in synchronous validation"),n=h.preferences(h.defaults,e));const r=c.entry(t,i,n);s(!r.mainstay.externals.length,"Schema with external rules must use validateAsync()");const o={value:r.value};return r.error&&(o.error=r.error),r.mainstay.warnings.length&&(o.warning=a.details(r.mainstay.warnings)),r.mainstay.debug&&(o.debug=r.mainstay.debug),r.mainstay.artifacts&&(o.artifacts=r.mainstay.artifacts),o},i.entryAsync=async function(t,i,e){let s=h.defaults;e&&(s=h.preferences(h.defaults,e));const n=c.entry(t,i,s),r=n.mainstay;if(n.error)throw r.debug&&(n.error.debug=r.debug),n.error;if(r.externals.length){let i=n.value;const u=[];for(const n of r.externals){const l=n.state.path,d="link"===n.schema.type?r.links.get(n.schema):null;let f,g,_=i;const v=l.length?[i]:[],w=l.length?o(t,l):t;if(l.length){f=l[l.length-1];let t=i;for(const i of l.slice(0,-1))t=t[i],v.unshift(t);g=v[0],_=g[f]}try{const t=(t,i)=>(d||n.schema).$_createError(t,_,i,n.state,s),o=await n.method(_,{schema:n.schema,linked:d,state:n.state,prefs:e,original:w,error:t,errorsArray:c.errorsArray,warn:(t,i)=>r.warnings.push((d||n.schema).$_createError(t,_,i,n.state,s)),message:(t,i)=>(d||n.schema).$_createError("external",_,i,n.state,s,{messages:t})});if(void 0===o||o===_)continue;if(o instanceof a.Report){if(r.tracer.log(n.schema,n.state,"rule","external","error"),u.push(o),s.abortEarly)break;continue}if(Array.isArray(o)&&o[h.symbols.errors]){if(r.tracer.log(n.schema,n.state,"rule","external","error"),u.push(...o),s.abortEarly)break;continue}g?(r.tracer.value(n.state,"rule",_,o,"external"),g[f]=o):(r.tracer.value(n.state,"rule",i,o,"external"),i=o)}catch(t){throw s.errors.label&&(t.message+=" (".concat(n.label,")")),t}}if(n.value=i,u.length)throw n.error=a.process(u,t,s),r.debug&&(n.error.debug=r.debug),n.error}if(!s.warnings&&!s.debug&&!s.artifacts)return n.value;const u={value:n.value};return r.warnings.length&&(u.warning=a.details(r.warnings)),r.debug&&(u.debug=r.debug),r.artifacts&&(u.artifacts=r.artifacts),u},c.Mainstay=class{snapshot(){this.Ff.push({externals:this.externals.slice(),warnings:this.warnings.slice()})}restore(){const t=this.Ff.pop();this.externals=t.externals,this.warnings=t.warnings}commit(){this.Ff.pop()}constructor(t,i,e){this.externals=[],this.warnings=[],this.tracer=t,this.debug=i,this.links=e,this.shadow=null,this.artifacts=null,this.Ff=[]}},c.entry=function(t,e,s){const{tracer:n,cleanup:r}=c.tracer(e,s),o=s.debug?[]:null,h=e.Qd.Nf?new Map:null,l=new c.Mainstay(n,o,h),d=e.Qd.Nf?[{schema:e}]:null,f=new u([],[],{mainstay:l,schemas:d}),g=i.validate(t,e,f,s);r&&e.$_root.untrace();const _=a.process(g.errors,t,s);return{value:g.value,error:_,mainstay:l}},c.tracer=function(t,i){return t.$_root.nf?{tracer:t.$_root.nf.Yf(t)}:i.debug?(s(t.$_root.trace,"Debug mode not supported"),{tracer:t.$_root.trace().Yf(t),cleanup:!0}):{tracer:c.ignore}},i.validate=function(t,i,e,s,n){if(void 0===n&&(n={}),i.$_terms.whens&&(i=i.gf(t,e,s).schema),i.Fd&&(s=c.prefs(i,s)),i.Vd&&s.cache){const s=i.Vd.get(t);if(e.mainstay.tracer.debug(e,"validate","cached",!!s),s)return s}const r=(n,r,o)=>i.$_createError(n,t,r,o||e,s),o={original:t,prefs:s,schema:i,state:e,error:r,errorsArray:c.errorsArray,warn:(t,i,s)=>e.mainstay.warnings.push(r(t,i,s)),message:(n,r)=>i.$_createError("custom",t,r,e,s,{messages:n})};e.mainstay.tracer.entry(i,e);const a=i.Jd;if(a.prepare&&void 0!==t&&s.convert){const i=a.prepare(t,o);if(i){if(e.mainstay.tracer.value(e,"prepare",t,i.value),i.errors)return c.finalize(i.value,[].concat(i.errors),o);t=i.value}}if(a.coerce&&void 0!==t&&s.convert&&(!a.coerce.from||a.coerce.from.includes(typeof t))){const i=a.coerce.method(t,o);if(i){if(e.mainstay.tracer.value(e,"coerced",t,i.value),i.errors)return c.finalize(i.value,[].concat(i.errors),o);t=i.value}}const u=i.Zd.empty;u&&u.$_match(c.trim(t,i),e.nest(u),h.defaults)&&(e.mainstay.tracer.value(e,"empty",t,void 0),t=void 0);const l=n.presence||i.Zd.presence||(i.Zd.Of?null:s.presence);if(void 0===t){if("forbidden"===l)return c.finalize(t,null,o);if("required"===l)return c.finalize(t,[i.$_createError("any.required",t,null,e,s)],o);if("optional"===l){if(i.Zd.default!==h.symbols.deepDefault)return c.finalize(t,null,o);e.mainstay.tracer.value(e,"default",t,{}),t={}}}else if("forbidden"===l)return c.finalize(t,[i.$_createError("any.unknown",t,null,e,s)],o);const d=[];if(i.Gd){const n=i.Gd.get(t,e,s,i.Zd.insensitive);if(n)return s.convert&&(e.mainstay.tracer.value(e,"valids",t,n.value),t=n.value),e.mainstay.tracer.filter(i,e,"valid",n),c.finalize(t,null,o);if(i.Zd.only){const n=i.$_createError("any.only",t,{valids:i.Gd.values({display:!0})},e,s);if(s.abortEarly)return c.finalize(t,[n],o);d.push(n)}}if(i.Wd){const n=i.Wd.get(t,e,s,i.Zd.insensitive);if(n){e.mainstay.tracer.filter(i,e,"invalid",n);const r=i.$_createError("any.invalid",t,{invalids:i.Wd.values({display:!0})},e,s);if(s.abortEarly)return c.finalize(t,[r],o);d.push(r)}}if(a.validate){const i=a.validate(t,o);if(i&&(e.mainstay.tracer.value(e,"base",t,i.value),t=i.value,i.errors)){if(!Array.isArray(i.errors))return d.push(i.errors),c.finalize(t,d,o);if(i.errors.length)return d.push(...i.errors),c.finalize(t,d,o)}}return i.Hd.length?c.rules(t,d,o):c.finalize(t,d,o)},c.rules=function(t,i,e){const{schema:s,state:n,prefs:r}=e;for(const o of s.Hd){const a=s.Jd.rules[o.method];if(a.convert&&r.convert){n.mainstay.tracer.log(s,n,"rule",o.name,"full");continue}let u,l=o.args;if(o.hf.length){l=_.assign({},l);for(const i of o.hf){const e=a.argsByName.get(i),o=l[i].resolve(t,n,r),c=e.normalize?e.normalize(o):o,d=h.validateArg(c,null,e);if(d){u=s.$_createError("any.ref",o,{arg:i,ref:l[i],reason:d},n,r);break}l[i]=c}}u=u||a.validate(t,e,l,o);const d=c.rule(u,o);if(d.errors){if(n.mainstay.tracer.log(s,n,"rule",o.name,"error"),o.warn){n.mainstay.warnings.push(...d.errors);continue}if(r.abortEarly)return c.finalize(t,d.errors,e);i.push(...d.errors)}else n.mainstay.tracer.log(s,n,"rule",o.name,"pass"),n.mainstay.tracer.value(n,"rule",t,d.value,o.name),t=d.value}return c.finalize(t,i,e)},c.rule=function(t,i){return t instanceof a.Report?(c.error(t,i),{errors:[t],value:null}):Array.isArray(t)&&t[h.symbols.errors]?(t.forEach((t=>c.error(t,i))),{errors:t,value:null}):{errors:null,value:t}},c.error=function(t,i){return i.message&&t.Af(i.message),t},c.finalize=function(t,i,e){i=i||[];const{schema:n,state:r,prefs:o}=e;if(i.length){const s=c.default("failover",void 0,i,e);void 0!==s&&(r.mainstay.tracer.value(r,"failover",t,s),t=s,i=[])}if(i.length&&n.Zd.error)if("function"==typeof n.Zd.error){i=n.Zd.error(i),Array.isArray(i)||(i=[i]);for(const t of i)s(t instanceof g||t instanceof a.Report,"error() must return an Error object")}else i=[n.Zd.error];if(void 0===t){const s=c.default("default",t,i,e);r.mainstay.tracer.value(r,"default",t,s),t=s}if(n.Zd.cast&&void 0!==t){const i=n.Jd.cast[n.Zd.cast];if(i.from(t)){const s=i.to(t,e);r.mainstay.tracer.value(r,"cast",t,s,n.Zd.cast),t=s}}if(n.$_terms.externals&&o.externals&&!1!==o.cf)for(const{method:t}of n.$_terms.externals)r.mainstay.externals.push({method:t,schema:n,state:r,label:a.label(n.Zd,r,o)});const h={value:t,errors:i.length?i:null};return n.Zd.result&&(h.value="strip"===n.Zd.result?void 0:e.original,r.mainstay.tracer.value(r,n.Zd.result,t,h.value),r.shadow(t,n.Zd.result)),n.Vd&&!1!==o.cache&&!n.Yd.length&&n.Vd.set(e.original,h),void 0===t||h.errors||void 0===n.Zd.artifact||(r.mainstay.artifacts=r.mainstay.artifacts||new Map,r.mainstay.artifacts.has(n.Zd.artifact)||r.mainstay.artifacts.set(n.Zd.artifact,[]),r.mainstay.artifacts.get(n.Zd.artifact).push(r.path)),h},c.prefs=function(t,i){const e=i===h.defaults;return e&&t.Fd[h.symbols.prefs]?t.Fd[h.symbols.prefs]:(i=h.preferences(i,t.Fd),e&&(t.Fd[h.symbols.prefs]=i),i)},c.default=function(t,i,e,s){const{schema:r,state:o,prefs:a}=s,u=r.Zd[t];if(a.noDefaults||void 0===u)return i;if(o.mainstay.tracer.log(r,o,"rule",t,"full"),!u)return u;if("function"==typeof u){const i=u.length?[n(o.ancestors[0]),s]:[];try{return u(...i)}catch(i){return void e.push(r.$_createError("any.".concat(t),null,{error:i},o,a))}}return"object"!=typeof u?u:u[h.symbols.literal]?u.literal:h.isResolvable(u)?u.resolve(i,o,a):n(u)},c.trim=function(t,i){if("string"!=typeof t)return t;const e=i.$_getRule("trim");return e&&e.args.enabled?t.trim():t},c.ignore={active:!1,debug:r,entry:r,filter:r,log:r,resolve:r,value:r},c.errorsArray=function(){const t=[];return t[h.symbols.errors]=!0,t}},2036:(t,i,e)=>{const s=e(375),n=e(9474),r=e(8160),o={};t.exports=o.Values=class{get length(){return this.qd.size+this.Yd.size}add(t,i){r.isResolvable(t)?this.Yd.has(t)||(this.Yd.add(t),i&&i.register(t)):this.has(t,null,null,!1)||(this.qd.add(t),"string"==typeof t&&this.Vf.set(t.toLowerCase(),t))}static merge(t,i,e){if(t=t||new o.Values,i){if(i.Gf)return i.clone();for(const e of[...i.qd,...i.Yd])t.add(e)}if(e)for(const i of[...e.qd,...e.Yd])t.remove(i);return t.length?t:null}remove(t){r.isResolvable(t)?this.Yd.delete(t):(this.qd.delete(t),"string"==typeof t&&this.Vf.delete(t.toLowerCase()))}has(t,i,e,s){return!!this.get(t,i,e,s)}get(t,i,e,s){if(!this.length)return!1;if(this.qd.has(t))return{value:t};if("string"==typeof t&&t&&s){const i=this.Vf.get(t.toLowerCase());if(i)return{value:i}}if(!this.Yd.size&&"object"!=typeof t)return!1;if("object"==typeof t)for(const i of this.qd)if(n(i,t))return{value:i};if(i)for(const r of this.Yd){const o=r.resolve(t,i,e,null,{in:!0});if(void 0===o)continue;const h=r.in&&"object"==typeof o?Array.isArray(o)?o:_.keys(o):[o];for(const i of h)if(typeof i==typeof t)if(s&&t&&"string"==typeof t){if(i.toLowerCase()===t.toLowerCase())return{value:i,ref:r}}else if(n(i,t))return{value:i,ref:r}}return!1}override(){this.Gf=!0}values(t){if(t&&t.display){const t=[];for(const i of[...this.qd,...this.Yd])void 0!==i&&t.push(i);return t}return Array.from([...this.qd,...this.Yd])}clone(){const t=new o.Values(this.qd,this.Yd);return t.Gf=this.Gf,t}concat(t){s(!t.Gf,"Cannot concat override set of values");const i=new o.Values([...this.qd,...t.qd],[...this.Yd,...t.Yd]);return i.Gf=this.Gf,i}describe(){const t=[];this.Gf&&t.push({override:!0});for(const i of this.qd.values())t.push(i&&"object"==typeof i?{value:i}:i);for(const i of this.Yd.values())t.push(i.describe());return t}constructor(t,i){this.qd=new Set(t),this.Yd=new Set(i),this.Vf=o.lowercases(t),this.Gf=!1}},o.Values.prototype[r.symbols.values]=!0,o.Values.prototype.slice=o.Values.prototype.clone,o.lowercases=function(t){const i=new Map;if(t)for(const e of t)"string"==typeof e&&i.set(e.toLowerCase(),e);return i}},978:(t,i,e)=>{const s=e(375),n=e(8571),r=e(1687),o=e(9621),h={};t.exports=function(t,i,e){if(void 0===e&&(e={}),s(t&&"object"==typeof t,"Invalid defaults value: must be an object"),s(!i||!0===i||"object"==typeof i,"Invalid source value: must be true, falsy or an object"),s("object"==typeof e,"Invalid options: must be an object"),!i)return null;if(e.shallow)return h.applyToDefaultsWithShallow(t,i,e);const o=n(t);if(!0===i)return o;const a=void 0!==e.nullOverride&&e.nullOverride;return r(o,i,{nullOverride:a,mergeArrays:!1})},h.applyToDefaultsWithShallow=function(t,i,e){const a=e.shallow;s(Array.isArray(a),"Invalid keys");const u=new Map,c=!0===i?null:new Set;for(let e of a){e=Array.isArray(e)?e:e.split(".");const s=o(t,e);s&&"object"==typeof s?u.set(s,c&&o(i,e)||s):c&&c.add(e)}const l=n(t,{},u);if(!c)return l;for(const t of c)h.reachCopy(l,i,t);const d=void 0!==e.nullOverride&&e.nullOverride;return r(l,i,{nullOverride:d,mergeArrays:!1})},h.reachCopy=function(t,i,e){for(const t of e){if(!(t in i))return;const e=i[t];if("object"!=typeof e||null===e)return;i=e}const s=i;let n=t;for(let t=0;t<e.length-1;++t){const i=e[t];"object"!=typeof n[i]&&(n[i]={}),n=n[i]}n[e[e.length-1]]=s}},375:(t,i,e)=>{const s=e(7916);t.exports=function(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),n=1;n<i;n++)e[n-1]=arguments[n];if(!t)throw 1===e.length&&e[0]instanceof g?e[0]:new s(e)}},8571:(t,i,e)=>{const s=e(9621),n=e(4277),r=e(7043),o={needsProtoHack:new Set([n.set,n.map,n.weakSet,n.weakMap])};t.exports=o.clone=function(t,i,e){if(void 0===i&&(i={}),void 0===e&&(e=null),"object"!=typeof t||null===t)return t;let s=o.clone,h=e;if(i.shallow){if(!0!==i.shallow)return o.cloneWithShallow(t,i);s=t=>t}else if(h){const i=h.get(t);if(i)return i}else h=new Map;const a=n.getInternalProto(t);if(a===n.buffer)return!1;if(a===n.date)return new Date(t.getTime());if(a===n.regex)return new RegExp(t);const u=o.base(t,a,i);if(u===t)return t;if(h&&h.set(t,u),a===n.set)for(const e of t)u.add(s(e,i,h));else if(a===n.map)for(const[e,n]of t)u.set(e,s(n,i,h));const c=r.keys(t,i);for(const e of c){if("__proto__"===e)continue;if(a===n.array&&"length"===e){u.length=t.length;continue}const r=_.getOwnPropertyDescriptor(t,e);r?r.get||r.set?_.defineProperty(u,e,r):r.enumerable?u[e]=s(t[e],i,h):_.defineProperty(u,e,{enumerable:!1,writable:!0,configurable:!0,value:s(t[e],i,h)}):_.defineProperty(u,e,{enumerable:!0,writable:!0,configurable:!0,value:s(t[e],i,h)})}return u},o.cloneWithShallow=function(t,i){const e=i.shallow;(i=_.assign({},i)).shallow=!1;const n=new Map;for(const i of e){const e=s(t,i);"object"!=typeof e&&"function"!=typeof e||n.set(e,e)}return o.clone(t,i,n)},o.base=function(t,i,e){if(!1===e.prototype)return o.needsProtoHack.has(i)?new i.constructor:i===n.array?[]:{};const s=_.getPrototypeOf(t);if(s&&s.isImmutable)return t;if(i===n.array){const t=[];return s!==i&&_.setPrototypeOf(t,s),t}if(o.needsProtoHack.has(i)){const t=new s.constructor;return s!==i&&_.setPrototypeOf(t,s),t}return _.create(s)}},9474:(t,i,e)=>{const s=e(4277),n={mismatched:null};t.exports=function(t,i,e){return e=_.assign({prototype:!0},e),!!n.isDeepEqual(t,i,e,[])},n.isDeepEqual=function(t,i,e,r){if(t===i)return 0!==t||1/t==1/i;const o=typeof t;if(o!==typeof i||null===t||null===i)return!1;if("function"===o){if(!e.deepFunction||t.toString()!==i.toString())return!1}else if("object"!==o)return t!=t&&i!=i;const h=n.getSharedType(t,i,!!e.prototype);switch(h){case s.buffer:return!1;case s.promise:return t===i;case s.regex:return t.toString()===i.toString();case n.mismatched:return!1}for(let e=r.length-1;e>=0;--e)if(r[e].isSame(t,i))return!0;r.push(new n.SeenEntry(t,i));try{return!!n.isDeepEqualObj(h,t,i,e,r)}finally{r.pop()}},n.getSharedType=function(t,i,e){if(e)return _.getPrototypeOf(t)!==_.getPrototypeOf(i)?n.mismatched:s.getInternalProto(t);const r=s.getInternalProto(t);return r!==s.getInternalProto(i)?n.mismatched:r},n.valueOf=function(t){const i=t.valueOf;if(void 0===i)return t;try{return i.call(t)}catch(t){return t}},n.hasOwnEnumerableProperty=function(t,i){return _.prototype.propertyIsEnumerable.call(t,i)},n.isSetSimpleEqual=function(t,i){for(const e of Set.prototype.values.call(t))if(!Set.prototype.has.call(i,e))return!1;return!0},n.isDeepEqualObj=function(t,i,e,r,o){const{isDeepEqual:h,valueOf:a,hasOwnEnumerableProperty:u}=n,{keys:c,getOwnPropertySymbols:l}=_;if(t===s.array){if(!r.part){if(i.length!==e.length)return!1;for(let t=0;t<i.length;++t)if(!h(i[t],e[t],r,o))return!1;return!0}for(const t of i)for(const i of e)if(h(t,i,r,o))return!0}else if(t===s.set){if(i.size!==e.size)return!1;if(!n.isSetSimpleEqual(i,e)){const t=new Set(Set.prototype.values.call(e));for(const e of Set.prototype.values.call(i)){if(t.delete(e))continue;let i=!1;for(const s of t)if(h(e,s,r,o)){t.delete(s),i=!0;break}if(!i)return!1}}}else if(t===s.map){if(i.size!==e.size)return!1;for(const[t,s]of Map.prototype.entries.call(i))if(void 0===s&&!Map.prototype.has.call(e,t)||!h(s,Map.prototype.get.call(e,t),r,o))return!1}else if(t===s.error&&(i.name!==e.name||i.message!==e.message))return!1;const d=a(i),f=a(e);if((i!==d||e!==f)&&!h(d,f,r,o))return!1;const g=c(i);if(!r.part&&g.length!==c(e).length&&!r.skip)return!1;let v=0;for(const t of g)if(r.skip&&r.skip.includes(t))void 0===e[t]&&++v;else if(!u(e,t)||!h(i[t],e[t],r,o))return!1;if(!r.part&&g.length-v!==c(e).length)return!1;if(!1!==r.symbols){const t=l(i),s=new Set(l(e));for(const n of t){if(!r.skip||!r.skip.includes(n))if(u(i,n)){if(!u(e,n)||!h(i[n],e[n],r,o))return!1}else if(u(e,n))return!1;s.delete(n)}for(const t of s)if(u(e,t))return!1}return!0},n.SeenEntry=class{isSame(t,i){return this.obj===t&&this.ref===i}constructor(t,i){this.obj=t,this.ref=i}}},7916:(t,i,e)=>{const s=e(8761);t.exports=class extends g{constructor(t){super(t.filter((t=>""!==t)).map((t=>"string"==typeof t?t:t instanceof g?t.message:s(t))).join(" ")||"Unknown error"),"function"==typeof g.captureStackTrace&&g.captureStackTrace(this,i.assert)}}},5277:t=>{const i={};t.exports=function(t){if(!t)return"";let e="";for(let s=0;s<t.length;++s){const n=t.charCodeAt(s);i.isSafe(n)?e+=t[s]:e+=i.escapeHtmlChar(n)}return e},i.escapeHtmlChar=function(t){return i.namedHtml.get(t)||(t>=256?"&#"+t+";":"&#x".concat(t.toString(16).padStart(2,"0"),";"))},i.isSafe=function(t){return i.safeCharCodes.has(t)},i.namedHtml=new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[34,"&quot;"],[160,"&nbsp;"],[162,"&cent;"],[163,"&pound;"],[164,"&curren;"],[169,"&copy;"],[174,"&reg;"]]),i.safeCharCodes=function(){const t=new Set;for(let i=32;i<123;++i)(i>=97||i>=65&&i<=90||i>=48&&i<=57||32===i||46===i||44===i||45===i||58===i||95===i)&&t.add(i);return t}()},6064:t=>{t.exports=function(t){return t.replace(/[\^\$\.\*\+\-\?\=\!\:\|\\\/\(\)\[\]\{\}\,]/g,"\\$&")}},738:t=>{t.exports=function(){}},1687:(t,i,e)=>{const s=e(375),n=e(8571),r=e(7043),o={};t.exports=o.merge=function(t,i,e){if(s(t&&"object"==typeof t,"Invalid target value: must be an object"),s(null==i||"object"==typeof i,"Invalid source value: must be null, undefined, or an object"),!i)return t;if(e=_.assign({nullOverride:!0,mergeArrays:!0},e),Array.isArray(i)){s(Array.isArray(t),"Cannot merge array onto an object"),e.mergeArrays||(t.length=0);for(let s=0;s<i.length;++s)t.push(n(i[s],{symbols:e.symbols}));return t}const h=r.keys(i,e);for(let s=0;s<h.length;++s){const r=h[s];if("__proto__"===r||!_.prototype.propertyIsEnumerable.call(i,r))continue;const a=i[r];if(a&&"object"==typeof a){if(t[r]===a)continue;!t[r]||"object"!=typeof t[r]||Array.isArray(t[r])!==Array.isArray(a)||a instanceof Date||a instanceof RegExp?t[r]=n(a,{symbols:e.symbols}):o.merge(t[r],a,e)}else(null!=a||e.nullOverride)&&(t[r]=a)}return t}},9621:(t,i,e)=>{const s=e(375),n={};t.exports=function(t,i,e){if(!1===i||null==i)return t;"string"==typeof(e=e||{})&&(e={separator:e});const r=Array.isArray(i);s(!r||!e.separator,"Separator option is not valid for array-based chain");const o=r?i:i.split(e.separator||".");let h=t;for(let t=0;t<o.length;++t){let r=o[t];const a=e.iterables&&n.iterables(h);if(Array.isArray(h)||"set"===a){const t=Number(r);Number.isInteger(t)&&(r=t<0?h.length+t:t)}if(!h||"function"==typeof h&&!1===e.functions||!a&&void 0===h[r]){s(!e.strict||t+1===o.length,"Missing segment",r,"in reach path ",i),s("object"==typeof h||!0===e.functions||"function"!=typeof h,"Invalid segment",r,"in reach path ",i),h=e.default;break}h=a?"set"===a?[...h][r]:h.get(r):h[r]}return h},n.iterables=function(t){return t instanceof Set?"set":t instanceof Map?"map":void 0}},8761:t=>{t.exports=function(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];try{return JSON.stringify(...i)}catch(t){return"[Cannot display object: "+t.message+"]"}}},4277:(t,i)=>{const e={};i=t.exports={array:Array.prototype,buffer:!1,date:Date.prototype,error:g.prototype,generic:_.prototype,map:Map.prototype,promise:Promise.prototype,regex:RegExp.prototype,set:Set.prototype,weakMap:WeakMap.prototype,weakSet:WeakSet.prototype},e.typeMap=new Map([["[object Error]",i.error],["[object Map]",i.map],["[object Promise]",i.promise],["[object Set]",i.set],["[object WeakMap]",i.weakMap],["[object WeakSet]",i.weakSet]]),i.getInternalProto=function(t){if(Array.isArray(t))return i.array;if(t instanceof Date)return i.date;if(t instanceof RegExp)return i.regex;if(t instanceof g)return i.error;const s=_.prototype.toString.call(t);return e.typeMap.get(s)||i.generic}},7043:(t,i)=>{i.keys=function(t,i){return void 0===i&&(i={}),!1!==i.symbols?Reflect.ownKeys(t):_.getOwnPropertyNames(t)}},3652:(t,i,e)=>{const s=e(375),n={};i.Sorter=class{add(t,i){const e=[].concat((i=i||{}).before||[]),n=[].concat(i.after||[]),r=i.group||"?",o=i.sort||0;s(!e.includes(r),"Item cannot come before itself: ".concat(r)),s(!e.includes("?"),"Item cannot come before unassociated items"),s(!n.includes(r),"Item cannot come after itself: ".concat(r)),s(!n.includes("?"),"Item cannot come after unassociated items"),Array.isArray(t)||(t=[t]);for(const i of t){const t={seq:this.Qu.length,sort:o,before:e,after:n,group:r,node:i};this.Qu.push(t)}if(!i.manual){const t=this.Wf();s(t,"item","?"!==r?"added into group ".concat(r):"","created a dependencies error")}return this.nodes}merge(t){Array.isArray(t)||(t=[t]);for(const i of t)if(i)for(const t of i.Qu)this.Qu.push(_.assign({},t));this.Qu.sort(n.mergeSort);for(let t=0;t<this.Qu.length;++t)this.Qu[t].seq=t;const i=this.Wf();return s(i,"merge created a dependencies error"),this.nodes}sort(){const t=this.Wf();return s(t,"sort created a dependencies error"),this.nodes}Wf(){const t={},i=_.create(null),e=_.create(null);for(const s of this.Qu){const n=s.seq,r=s.group;e[r]=e[r]||[],e[r].push(n),t[n]=s.before;for(const t of s.after)i[t]=i[t]||[],i[t].push(n)}for(const i in t){const s=[];for(const n in t[i]){const r=t[i][n];e[r]=e[r]||[],s.push(...e[r])}t[i]=s}for(const s in i)if(e[s])for(const n of e[s])t[n].push(...i[s]);const s={};for(const i in t){const e=t[i];for(const t of e)s[t]=s[t]||[],s[t].push(i)}const n={},r=[];for(let t=0;t<this.Qu.length;++t){let i=t;if(s[t]){i=null;for(let t=0;t<this.Qu.length;++t){if(!0===n[t])continue;s[t]||(s[t]=[]);const e=s[t].length;let r=0;for(let i=0;i<e;++i)n[s[t][i]]&&++r;if(r===e){i=t;break}}}null!==i&&(n[i]=!0,r.push(i))}if(r.length!==this.Qu.length)return!1;const o={};for(const t of this.Qu)o[t.seq]=t;this.Qu=[],this.nodes=[];for(const t of r){const i=o[t];this.nodes.push(i.node),this.Qu.push(i)}return!0}constructor(){this.Qu=[],this.nodes=[]}},n.mergeSort=(t,i)=>t.sort===i.sort?0:t.sort<i.sort?-1:1},5380:(t,i,e)=>{const s=e(443),n=e(2178),r={minDomainSegments:2,nonAsciiRx:/[^\x00-\x7f]/,domainControlRx:/[\x00-\x20@\:\/\\#!\$&\'\(\)\*\+,;=\?]/,tldSegmentRx:/^[a-zA-Z](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?$/,domainSegmentRx:/^[a-zA-Z0-9](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?$/,URL:s.URL||URL};i.analyze=function(t,i){if(void 0===i&&(i={}),!t)return n.code("DOMAIN_NON_EMPTY_STRING");if("string"!=typeof t)throw new g("Invalid input: domain must be a string");if(t.length>256)return n.code("DOMAIN_TOO_LONG");if(r.nonAsciiRx.test(t)){if(!1===i.allowUnicode)return n.code("DOMAIN_INVALID_UNICODE_CHARS");t=t.normalize("NFC")}if(r.domainControlRx.test(t))return n.code("DOMAIN_INVALID_CHARS");t=r.punycode(t),i.allowFullyQualified&&"."===t[t.length-1]&&(t=t.slice(0,-1));const e=i.minDomainSegments||r.minDomainSegments,s=t.split(".");if(s.length<e)return n.code("DOMAIN_SEGMENTS_COUNT");if(i.maxDomainSegments&&s.length>i.maxDomainSegments)return n.code("DOMAIN_SEGMENTS_COUNT_MAX");const o=i.tlds;if(o){const t=s[s.length-1].toLowerCase();if(o.deny&&o.deny.has(t)||o.allow&&!o.allow.has(t))return n.code("DOMAIN_FORBIDDEN_TLDS")}for(let t=0;t<s.length;++t){const i=s[t];if(!i.length)return n.code("DOMAIN_EMPTY_SEGMENT");if(i.length>63)return n.code("DOMAIN_LONG_SEGMENT");if(t<s.length-1){if(!r.domainSegmentRx.test(i))return n.code("DOMAIN_INVALID_CHARS")}else if(!r.tldSegmentRx.test(i))return n.code("DOMAIN_INVALID_TLDS_CHARS")}return null},i.isValid=function(t,e){return!i.analyze(t,e)},r.punycode=function(t){t.includes("%")&&(t=t.replace(/%/g,"%25"));try{return new r.URL("http://".concat(t)).host}catch(i){return t}}},1745:(t,i,e)=>{const s=e(9848),n=e(5380),r=e(2178),o={nonAsciiRx:/[^\x00-\x7f]/,encoder:new(s.TextEncoder||TextEncoder)};i.analyze=function(t,i){return o.email(t,i)},i.isValid=function(t,i){return!o.email(t,i)},o.email=function(t,i){if(void 0===i&&(i={}),"string"!=typeof t)throw new g("Invalid input: email must be a string");if(!t)return r.code("EMPTY_STRING");const e=!o.nonAsciiRx.test(t);if(!e){if(!1===i.allowUnicode)return r.code("FORBIDDEN_UNICODE");t=t.normalize("NFC")}const s=t.split("@");if(2!==s.length)return s.length>2?r.code("MULTIPLE_AT_CHAR"):r.code("MISSING_AT_CHAR");const[h,a]=s;if(!h)return r.code("EMPTY_LOCAL");if(!i.ignoreLength){if(t.length>254)return r.code("ADDRESS_TOO_LONG");if(o.encoder.encode(h).length>64)return r.code("LOCAL_TOO_LONG")}return o.local(h,e)||n.analyze(a,i)},o.local=function(t,i){const e=t.split(".");for(const t of e){if(!t.length)return r.code("EMPTY_LOCAL_SEGMENT");if(i){if(!o.atextRx.test(t))return r.code("INVALID_LOCAL_CHARS")}else for(const i of t){if(o.atextRx.test(i))continue;const t=o.binary(i);if(!o.atomRx.test(t))return r.code("INVALID_LOCAL_CHARS")}}},o.binary=function(t){return Array.from(o.encoder.encode(t)).map((t=>String.fromCharCode(t))).join("")},o.atextRx=/^[\w!#\$%&'\*\+\-/=\?\^`\{\|\}~]+$/,o.atomRx=new RegExp(["(?:[\\xc2-\\xdf][\\x80-\\xbf])","(?:\\xe0[\\xa0-\\xbf][\\x80-\\xbf])|(?:[\\xe1-\\xec][\\x80-\\xbf]{2})|(?:\\xed[\\x80-\\x9f][\\x80-\\xbf])|(?:[\\xee-\\xef][\\x80-\\xbf]{2})","(?:\\xf0[\\x90-\\xbf][\\x80-\\xbf]{2})|(?:[\\xf1-\\xf3][\\x80-\\xbf]{3})|(?:\\xf4[\\x80-\\x8f][\\x80-\\xbf]{2})"].join("|"))},2178:(t,i)=>{i.codes={EMPTY_STRING:"Address must be a non-empty string",FORBIDDEN_UNICODE:"Address contains forbidden Unicode characters",MULTIPLE_AT_CHAR:"Address cannot contain more than one @ character",MISSING_AT_CHAR:"Address must contain one @ character",EMPTY_LOCAL:"Address local part cannot be empty",ADDRESS_TOO_LONG:"Address too long",LOCAL_TOO_LONG:"Address local part too long",EMPTY_LOCAL_SEGMENT:"Address local part contains empty dot-separated segment",INVALID_LOCAL_CHARS:"Address local part contains invalid character",DOMAIN_NON_EMPTY_STRING:"Domain must be a non-empty string",DOMAIN_TOO_LONG:"Domain too long",DOMAIN_INVALID_UNICODE_CHARS:"Domain contains forbidden Unicode characters",DOMAIN_INVALID_CHARS:"Domain contains invalid character",DOMAIN_INVALID_TLDS_CHARS:"Domain contains invalid tld character",DOMAIN_SEGMENTS_COUNT:"Domain lacks the minimum required number of segments",DOMAIN_SEGMENTS_COUNT_MAX:"Domain contains too many segments",DOMAIN_FORBIDDEN_TLDS:"Domain uses forbidden TLD",DOMAIN_EMPTY_SEGMENT:"Domain contains empty dot-separated segment",DOMAIN_LONG_SEGMENT:"Domain contains dot-separated segment that is too long"},i.code=function(t){return{code:t,error:i.codes[t]}}},9959:(t,i,e)=>{const s=e(375),n=e(5752);i.regex=function(t){void 0===t&&(t={}),s(void 0===t.cidr||"string"==typeof t.cidr,"options.cidr must be a string");const i=t.cidr?t.cidr.toLowerCase():"optional";s(["required","optional","forbidden"].includes(i),"options.cidr must be one of required, optional, forbidden"),s(void 0===t.version||"string"==typeof t.version||Array.isArray(t.version),"options.version must be a string or an array of string");let e=t.version||["ipv4","ipv6","ipvfuture"];Array.isArray(e)||(e=[e]),s(e.length>=1,"options.version must have at least 1 version specified");for(let t=0;t<e.length;++t)s("string"==typeof e[t],"options.version must only contain strings"),e[t]=e[t].toLowerCase(),s(["ipv4","ipv6","ipvfuture"].includes(e[t]),"options.version contains unknown version "+e[t]+" - must be one of ipv4, ipv6, ipvfuture");e=Array.from(new Set(e));const r="(?:".concat(e.map((t=>{if("forbidden"===i)return n.ip[t];const e="\\/".concat("ipv4"===t?n.ip.v4Cidr:n.ip.v6Cidr);return"required"===i?"".concat(n.ip[t]).concat(e):"".concat(n.ip[t],"(?:").concat(e,")?")})).join("|"),")"),o=new RegExp("^".concat(r,"$"));return{cidr:i,versions:e,regex:o,raw:r}}},5752:(t,i,e)=>{const s=e(375),n=e(6064),r={generate:function(){const t={},i="\\dA-Fa-f",e="["+i+"]",s="\\w-\\.~",n="!\\$&'\\(\\)\\*\\+,;=",r="%"+i,o=s+r+n+":@",h="["+o+"]",a="(?:0{0,2}\\d|0?[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])";t.ipv4address="(?:"+a+"\\.){3}"+a;const u=e+"{1,4}",c="(?:"+u+":"+u+"|"+t.ipv4address+")",l="(?:"+u+":){6}"+c,d="::(?:"+u+":){5}"+c,f="(?:"+u+")?::(?:"+u+":){4}"+c,g="(?:(?:"+u+":){0,1}"+u+")?::(?:"+u+":){3}"+c,_="(?:(?:"+u+":){0,2}"+u+")?::(?:"+u+":){2}"+c,v="(?:(?:"+u+":){0,3}"+u+")?::"+u+":"+c,w="(?:(?:"+u+":){0,4}"+u+")?::"+c,m="(?:(?:"+u+":){0,5}"+u+")?::"+u,p="(?:(?:"+u+":){0,6}"+u+")?::";t.ipv4Cidr="(?:\\d|[1-2]\\d|3[0-2])",t.ipv6Cidr="(?:0{0,2}\\d|0?[1-9]\\d|1[01]\\d|12[0-8])",t.ipv6address="(?:"+l+"|"+d+"|"+f+"|"+g+"|"+_+"|"+v+"|"+w+"|"+m+"|"+p+")",t.ipvFuture="v"+e+"+\\.["+s+n+":]+",t.scheme="[a-zA-Z][a-zA-Z\\d+-\\.]*",t.schemeRegex=new RegExp(t.scheme);const A="["+s+r+n+":]*",y="["+s+r+n+"]{1,255}",b="(?:\\[(?:"+t.ipv6address+"|"+t.ipvFuture+")\\]|"+t.ipv4address+"|"+y+")",M="(?:"+A+"@)?"+b+"(?::\\d*)?",T="(?:"+A+"@)?("+b+")(?::\\d*)?",S=h+"*",N=h+"+",I="(?:\\/"+S+")*",D="\\/(?:"+N+I+")?",E=N+I,k="["+s+r+n+"@]+"+I,L="(?:\\/\\/\\/"+S+I+")";return t.hierPart="(?:(?:\\/\\/"+M+I+")|"+D+"|"+E+"|"+L+")",t.hierPartCapture="(?:(?:\\/\\/"+T+I+")|"+D+"|"+E+")",t.relativeRef="(?:(?:\\/\\/"+M+I+")|"+D+"|"+k+"|)",t.relativeRefCapture="(?:(?:\\/\\/"+T+I+")|"+D+"|"+k+"|)",t.query="["+o+"\\/\\?]*(?=#|$)",t.queryWithSquareBrackets="["+o+"\\[\\]\\/\\?]*(?=#|$)",t.fragment="["+o+"\\/\\?]*",t}};r.rfc3986=r.generate(),i.ip={v4Cidr:r.rfc3986.ipv4Cidr,v6Cidr:r.rfc3986.ipv6Cidr,ipv4:r.rfc3986.ipv4address,ipv6:r.rfc3986.ipv6address,ipvfuture:r.rfc3986.ipvFuture},r.createRegex=function(t){const i=r.rfc3986,e="(?:\\?"+(t.allowQuerySquareBrackets?i.queryWithSquareBrackets:i.query)+")?(?:#"+i.fragment+")?",o=t.domain?i.relativeRefCapture:i.relativeRef;if(t.relativeOnly)return r.wrap(o+e);let h="";if(t.scheme){s(t.scheme instanceof RegExp||"string"==typeof t.scheme||Array.isArray(t.scheme),"scheme must be a RegExp, String, or Array");const e=[].concat(t.scheme);s(e.length>=1,"scheme must have at least 1 scheme specified");const r=[];for(let t=0;t<e.length;++t){const o=e[t];s(o instanceof RegExp||"string"==typeof o,"scheme at position "+t+" must be a RegExp or String"),o instanceof RegExp?r.push(o.source.toString()):(s(i.schemeRegex.test(o),"scheme at position "+t+" must be a valid scheme"),r.push(n(o)))}h=r.join("|")}const a="(?:"+(h?"(?:"+h+")":i.scheme)+":"+(t.domain?i.hierPartCapture:i.hierPart)+")",u=t.allowRelative?"(?:"+a+"|"+o+")":a;return r.wrap(u+e,h)},r.wrap=function(t,i){return{raw:t="(?=.)(?!https?:/(?:$|[^/]))(?!https?:///)(?!https?:[^/])".concat(t),regex:new RegExp("^".concat(t,"$")),scheme:i}},r.uriRegex=r.createRegex({}),i.regex=function(t){return void 0===t&&(t={}),t.scheme||t.allowRelative||t.relativeOnly||t.allowQuerySquareBrackets||t.domain?r.createRegex(t):r.uriRegex}},1447:(t,i)=>{const e={operators:["!","^","*","/","%","+","-","<","<=",">",">=","==","!=","&&","||","??"],operatorCharacters:["!","^","*","/","%","+","-","<","=",">","&","|","?"],operatorsOrder:[["^"],["*","/","%"],["+","-"],["<","<=",">",">="],["==","!="],["&&"],["||","??"]],operatorsPrefix:["!","n"],literals:{'"':'"',"`":"`","'":"'","[":"]"},numberRx:/^(?:[0-9]*(\.[0-9]*)?){1}$/,tokenRx:/^[\w\$\#\.\@\:\{\}]+$/,symbol:b("formula"),settings:b("settings")};i.Parser=class{kf(t){let s=[],n="",r=0,o=!1;const h=t=>{if(r)throw new g("Formula missing closing parenthesis");const h=s.length?s[s.length-1]:null;if(o||n||t){if(h&&"reference"===h.type&&")"===t)return h.type="function",h.value=this.Zf(n,h.value),void(n="");if(")"===t){const t=new i.Parser(n,this.settings);s.push({type:"segment",value:t})}else if(o){if("]"===o)return s.push({type:"reference",value:n}),void(n="");s.push({type:"literal",value:n})}else if(e.operatorCharacters.includes(n))h&&"operator"===h.type&&e.operators.includes(h.value+n)?h.value+=n:s.push({type:"operator",value:n});else if(n.match(e.numberRx))s.push({type:"constant",value:S(n)});else if(void 0!==this.settings.constants[n])s.push({type:"constant",value:this.settings.constants[n]});else{if(!n.match(e.tokenRx))throw new g("Formula contains invalid token: ".concat(n));s.push({type:"reference",value:n})}n=""}};for(const i of t)o?i===o?(h(),o=!1):n+=i:r?"("===i?(n+=i,++r):")"===i?(--r,r?n+=i:h(i)):n+=i:i in e.literals?o=e.literals[i]:"("===i?(h(),++r):e.operatorCharacters.includes(i)?(h(),n=i,h()):" "!==i?n+=i:h();h(),s=s.map(((t,i)=>"operator"!==t.type||"-"!==t.value||i&&"operator"!==s[i-1].type?t:{type:"operator",value:"n"}));let a=!1;for(const t of s){if("operator"===t.type){if(e.operatorsPrefix.includes(t.value))continue;if(!a)throw new g("Formula contains an operator in invalid position");if(!e.operators.includes(t.value))throw new g("Formula contains an unknown operator ".concat(t.value))}else if(a)throw new g("Formula missing expected operator");a=!a}if(!a)throw new g("Formula contains invalid trailing operator");1===s.length&&["reference","literal","constant"].includes(s[0].type)&&(this.single={type:"reference"===s[0].type?"reference":"value",value:s[0].value}),this.Hf=s.map((t=>{if("operator"===t.type)return e.operatorsPrefix.includes(t.value)?t:t.value;if("reference"!==t.type)return t.value;if(this.settings.tokenRx&&!this.settings.tokenRx.test(t.value))throw new g("Formula contains invalid reference ".concat(t.value));return this.settings.reference?this.settings.reference(t.value):e.reference(t.value)}))}Zf(t,s){const n=this.settings.functions[s];if("function"!=typeof n)throw new g("Formula contains unknown function ".concat(s));let r=[];if(t){let i="",n=0,o=!1;const h=()=>{if(!i)throw new g("Formula contains function ".concat(s," with invalid arguments ").concat(t));r.push(i),i=""};for(let s=0;s<t.length;++s){const r=t[s];o?(i+=r,r===o&&(o=!1)):r in e.literals&&!n?(i+=r,o=e.literals[r]):","!==r||n?(i+=r,"("===r?++n:")"===r&&--n):h()}h()}return r=r.map((t=>new i.Parser(t,this.settings))),function(t){const i=[];for(const e of r)i.push(e.evaluate(t));return n.call(t,...i)}}evaluate(t){const i=this.Hf.slice();for(let s=i.length-2;s>=0;--s){const n=i[s];if(n&&"operator"===n.type){const r=i[s+1];i.splice(s+1,1);const o=e.evaluate(r,t);i[s]=e.single(n.value,o)}}return e.operatorsOrder.forEach((s=>{for(let n=1;n<i.length-1;)if(s.includes(i[n])){const s=i[n],r=e.evaluate(i[n-1],t),o=e.evaluate(i[n+1],t);i.splice(n,2);const h=e.calculate(s,r,o);i[n-1]=0===h?0:h}else n+=2})),e.evaluate(i[0],t)}constructor(t,i={}){if(!i[e.settings]&&i.constants)for(const t in i.constants){const e=i.constants[t];if(null!==e&&!["boolean","number","string"].includes(typeof e))throw new g("Formula constant ".concat(t," contains invalid ").concat(typeof e," value type"))}this.settings=i[e.settings]?i:_.assign({[e.settings]:!0,constants:{},functions:{}},i),this.single=null,this.Hf=null,this.kf(t)}},i.Parser.prototype[e.symbol]=!0,e.reference=function(t){return function(i){return i&&void 0!==i[t]?i[t]:null}},e.evaluate=function(t,i){return null===t?null:"function"==typeof t?t(i):t[e.symbol]?t.evaluate(i):t},e.single=function(t,i){if("!"===t)return!i;const e=-i;return 0===e?0:e},e.calculate=function(t,i,s){if("??"===t)return e.exists(i)?i:s;if("string"==typeof i||"string"==typeof s){if("+"===t)return(i=e.exists(i)?i:"")+(e.exists(s)?s:"")}else switch(t){case"^":return x.pow(i,s);case"*":return i*s;case"/":return i/s;case"%":return i%s;case"+":return i+s;case"-":return i-s}switch(t){case"<":return i<s;case"<=":return i<=s;case">":return i>s;case">=":return i>=s;case"==":return i===s;case"!=":return i!==s;case"&&":return i&&s;case"||":return i||s}return null},e.exists=function(t){return null!=t}},9926:()=>{},5688:()=>{},9708:()=>{},1152:()=>{},443:()=>{},9848:()=>{},5934:t=>{t.exports=JSON.parse('{"version":"17.13.3"}')}},i={},function e(s){var n=i[s];if(void 0!==n)return n.exports;var r=i[s]={exports:{}};return t[s](r,r.exports,e),r.exports}(5107);var t,i},t.exports=e()}(Qs);const Fs=M(Qs.exports);let Ys;class Vs extends Nt{getRTCPeerConnection(){return this.webRTCPeer?this.webRTCPeer.getRTCPeer():null}stop(){var t;Ys.info("Stopping"),this.webRTCPeer.closeRTCPeer(),null==(t=this.signaling)||t.close(),this.signaling=null,this.stopReconnection=!0,this.webRTCPeer=new rs}isActive(){const t=this.webRTCPeer.getRTCPeerStatus();return Ys.info("Broadcast status: ",t||"not_established"),"connected"===t}setReconnect(){this.signaling.on("migrate",(()=>this.replaceConnection())),this.autoReconnect&&(this.signaling.on(As,(()=>{(this.firstReconnection||!this.alreadyDisconnected)&&(this.firstReconnection=!1,this.reconnect({error:new g("Signaling error: wsConnectionError")}))})),this.webRTCPeer.on(ss.connectionStateChange,(t=>{X(t),"connected"===t&&H(new Date),("failed"===t||"disconnected"===t&&this.alreadyDisconnected)&&this.firstReconnection?(this.firstReconnection=!1,this.reconnect({error:new g("Connection state change: RTCPeerConnectionState disconnected")})):"disconnected"===t?(this.alreadyDisconnected=!0,u((()=>this.reconnect({error:new g("Connection state change: RTCPeerConnectionState disconnected")})),1500)):this.alreadyDisconnected=!1})))}async reconnect(t){try{Ys.info("Attempting to reconnect..."),!this.isActive()&&!this.stopReconnection&&!this.isReconnecting&&(this.stop(),this.emit("reconnect",{timeout:Gs(this.reconnectionInterval),error:null!=t&&t.error?null==t?void 0:t.error:new g("Attempting to reconnect")}),this.isReconnecting=!0,await this.connect(this.options),this.alreadyDisconnected=!1,this.reconnectionInterval=1e3,this.firstReconnection=!0,this.isReconnecting=!1)}catch(t){this.isReconnecting=!1,this.reconnectionInterval=Gs(this.reconnectionInterval),Ys.error("Reconnection failed, retrying in ".concat(this.reconnectionInterval,"ms. "),t),u((()=>this.reconnect({error:t})),this.reconnectionInterval)}}constructor(t,i,e,s){if(super(),Ys=e,!i)throw Ys.error("Token generator is required to construct this module."),new g("Token generator is required to construct this module.");this.webRTCPeer=new rs,this.signaling=null,this.autoReconnect=s,this.reconnectionInterval=1e3,this.alreadyDisconnected=!1,this.firstReconnection=!0,this.stopReconnection=!1,this.isReconnecting=!1,this.tokenGenerator=i,this.options=null}}const Gs=t=>t<32e3?2*t:t,Ws=s.RTCRtpSender&&!!RTCRtpSender.prototype.createEncodedStreams&&s.RTCRtpReceiver&&!!RTCRtpReceiver.prototype.createEncodedStreams,Zs="RTCRtpScriptTransform"in s,Hs="KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3ZhciBGPXR5cGVvZiBnbG9iYWxUaGlzPCJ1Ij9nbG9iYWxUaGlzOnR5cGVvZiB3aW5kb3c8InUiP3dpbmRvdzp0eXBlb2YgZ2xvYmFsPCJ1Ij9nbG9iYWw6dHlwZW9mIHNlbGY8InUiP3NlbGY6e307ZnVuY3Rpb24gVyhuKXtyZXR1cm4gbiYmbi5fX2VzTW9kdWxlJiZPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobiwiZGVmYXVsdCIpP24uZGVmYXVsdDpufXZhciBCPXtleHBvcnRzOnt9fTsvKiEKICoganMtbG9nZ2VyIC0gaHR0cDovL2dpdGh1Yi5jb20vam9ubnlyZWV2ZXMvanMtbG9nZ2VyCiAqIEpvbm55IFJlZXZlcywgaHR0cDovL2pvbm55cmVldmVzLmNvLnVrLwogKiBqcy1sb2dnZXIgbWF5IGJlIGZyZWVseSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuCiAqLyhmdW5jdGlvbihuKXsoZnVuY3Rpb24odCl7dmFyIGU9e307ZS5WRVJTSU9OPSIxLjYuMSI7dmFyIHMscj17fSxvPWZ1bmN0aW9uKGksdSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHUuYXBwbHkoaSxhcmd1bWVudHMpfX0sYT1mdW5jdGlvbigpe3ZhciBpPWFyZ3VtZW50cyx1PWlbMF0saCxjO2ZvcihjPTE7YzxpLmxlbmd0aDtjKyspZm9yKGggaW4gaVtjXSkhKGggaW4gdSkmJmlbY10uaGFzT3duUHJvcGVydHkoaCkmJih1W2hdPWlbY11baF0pO3JldHVybiB1fSxkPWZ1bmN0aW9uKGksdSl7cmV0dXJue3ZhbHVlOmksbmFtZTp1fX07ZS5UUkFDRT1kKDEsIlRSQUNFIiksZS5ERUJVRz1kKDIsIkRFQlVHIiksZS5JTkZPPWQoMywiSU5GTyIpLGUuVElNRT1kKDQsIlRJTUUiKSxlLldBUk49ZCg1LCJXQVJOIiksZS5FUlJPUj1kKDgsIkVSUk9SIiksZS5PRkY9ZCg5OSwiT0ZGIik7dmFyIGw9ZnVuY3Rpb24oaSl7dGhpcy5jb250ZXh0PWksdGhpcy5zZXRMZXZlbChpLmZpbHRlckxldmVsKSx0aGlzLmxvZz10aGlzLmluZm99O2wucHJvdG90eXBlPXtzZXRMZXZlbDpmdW5jdGlvbihpKXtpJiYidmFsdWUiaW4gaSYmKHRoaXMuY29udGV4dC5maWx0ZXJMZXZlbD1pKX0sZ2V0TGV2ZWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZXh0LmZpbHRlckxldmVsfSxlbmFibGVkRm9yOmZ1bmN0aW9uKGkpe3ZhciB1PXRoaXMuY29udGV4dC5maWx0ZXJMZXZlbDtyZXR1cm4gaS52YWx1ZT49dS52YWx1ZX0sdHJhY2U6ZnVuY3Rpb24oKXt0aGlzLmludm9rZShlLlRSQUNFLGFyZ3VtZW50cyl9LGRlYnVnOmZ1bmN0aW9uKCl7dGhpcy5pbnZva2UoZS5ERUJVRyxhcmd1bWVudHMpfSxpbmZvOmZ1bmN0aW9uKCl7dGhpcy5pbnZva2UoZS5JTkZPLGFyZ3VtZW50cyl9LHdhcm46ZnVuY3Rpb24oKXt0aGlzLmludm9rZShlLldBUk4sYXJndW1lbnRzKX0sZXJyb3I6ZnVuY3Rpb24oKXt0aGlzLmludm9rZShlLkVSUk9SLGFyZ3VtZW50cyl9LHRpbWU6ZnVuY3Rpb24oaSl7dHlwZW9mIGk9PSJzdHJpbmciJiZpLmxlbmd0aD4wJiZ0aGlzLmludm9rZShlLlRJTUUsW2ksInN0YXJ0Il0pfSx0aW1lRW5kOmZ1bmN0aW9uKGkpe3R5cGVvZiBpPT0ic3RyaW5nIiYmaS5sZW5ndGg+MCYmdGhpcy5pbnZva2UoZS5USU1FLFtpLCJlbmQiXSl9LGludm9rZTpmdW5jdGlvbihpLHUpe3MmJnRoaXMuZW5hYmxlZEZvcihpKSYmcyh1LGEoe2xldmVsOml9LHRoaXMuY29udGV4dCkpfX07dmFyIGY9bmV3IGwoe2ZpbHRlckxldmVsOmUuT0ZGfSk7KGZ1bmN0aW9uKCl7dmFyIGk9ZTtpLmVuYWJsZWRGb3I9byhmLGYuZW5hYmxlZEZvciksaS50cmFjZT1vKGYsZi50cmFjZSksaS5kZWJ1Zz1vKGYsZi5kZWJ1ZyksaS50aW1lPW8oZixmLnRpbWUpLGkudGltZUVuZD1vKGYsZi50aW1lRW5kKSxpLmluZm89byhmLGYuaW5mbyksaS53YXJuPW8oZixmLndhcm4pLGkuZXJyb3I9byhmLGYuZXJyb3IpLGkubG9nPWkuaW5mb30pKCksZS5zZXRIYW5kbGVyPWZ1bmN0aW9uKGkpe3M9aX0sZS5zZXRMZXZlbD1mdW5jdGlvbihpKXtmLnNldExldmVsKGkpO2Zvcih2YXIgdSBpbiByKXIuaGFzT3duUHJvcGVydHkodSkmJnJbdV0uc2V0TGV2ZWwoaSl9LGUuZ2V0TGV2ZWw9ZnVuY3Rpb24oKXtyZXR1cm4gZi5nZXRMZXZlbCgpfSxlLmdldD1mdW5jdGlvbihpKXtyZXR1cm4gcltpXXx8KHJbaV09bmV3IGwoYSh7bmFtZTppfSxmLmNvbnRleHQpKSl9LGUuY3JlYXRlRGVmYXVsdEhhbmRsZXI9ZnVuY3Rpb24oaSl7aT1pfHx7fSxpLmZvcm1hdHRlcj1pLmZvcm1hdHRlcnx8ZnVuY3Rpb24ocCxfKXtfLm5hbWUmJnAudW5zaGlmdCgiWyIrXy5uYW1lKyJdIil9O3ZhciB1PXt9LGg9ZnVuY3Rpb24oYyxwKXtGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHkuY2FsbChjLGNvbnNvbGUscCl9O3JldHVybiB0eXBlb2YgY29uc29sZT4idSI/ZnVuY3Rpb24oKXt9OmZ1bmN0aW9uKGMscCl7Yz1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChjKTt2YXIgXz1jb25zb2xlLmxvZyxnO3AubGV2ZWw9PT1lLlRJTUU/KGc9KHAubmFtZT8iWyIrcC5uYW1lKyJdICI6IiIpK2NbMF0sY1sxXT09PSJzdGFydCI/Y29uc29sZS50aW1lP2NvbnNvbGUudGltZShnKTp1W2ddPW5ldyBEYXRlKCkuZ2V0VGltZSgpOmNvbnNvbGUudGltZUVuZD9jb25zb2xlLnRpbWVFbmQoZyk6aChfLFtnKyI6ICIrKG5ldyBEYXRlKCkuZ2V0VGltZSgpLXVbZ10pKyJtcyJdKSk6KHAubGV2ZWw9PT1lLldBUk4mJmNvbnNvbGUud2Fybj9fPWNvbnNvbGUud2FybjpwLmxldmVsPT09ZS5FUlJPUiYmY29uc29sZS5lcnJvcj9fPWNvbnNvbGUuZXJyb3I6cC5sZXZlbD09PWUuSU5GTyYmY29uc29sZS5pbmZvP189Y29uc29sZS5pbmZvOnAubGV2ZWw9PT1lLkRFQlVHJiZjb25zb2xlLmRlYnVnP189Y29uc29sZS5kZWJ1ZzpwLmxldmVsPT09ZS5UUkFDRSYmY29uc29sZS50cmFjZSYmKF89Y29uc29sZS50cmFjZSksaS5mb3JtYXR0ZXIoYyxwKSxoKF8sYykpfX0sZS51c2VEZWZhdWx0cz1mdW5jdGlvbihpKXtlLnNldExldmVsKGkmJmkuZGVmYXVsdExldmVsfHxlLkRFQlVHKSxlLnNldEhhbmRsZXIoZS5jcmVhdGVEZWZhdWx0SGFuZGxlcihpKSl9LGUuc2V0RGVmYXVsdHM9ZS51c2VEZWZhdWx0cyxuLmV4cG9ydHM/bi5leHBvcnRzPWU6KGUuX3ByZXZMb2dnZXI9dC5Mb2dnZXIsZS5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIHQuTG9nZ2VyPWUuX3ByZXZMb2dnZXIsZX0sdC5Mb2dnZXI9ZSl9KShGKX0pKEIpO3ZhciB6PUIuZXhwb3J0cyxEPVcoeik7Y2xhc3Mgd3tjb25zdHJ1Y3Rvcih0KXt0aGlzLmRhdGE9dCx0aGlzLmJpdE9mZnNldD0wfXJlYWRCaXRzKHQpe2lmKHRoaXMuYml0T2Zmc2V0K3Q+dGhpcy5kYXRhLmxlbmd0aCo4KXRocm93IG5ldyBFcnJvcigiQXR0ZW1wdGVkIHRvIHJlYWQgcGFzdCB0aGUgZW5kIG9mIHRoZSBiaXRzdHJlYW0iKTtsZXQgZT0wO2ZvcihsZXQgcz0wO3M8dDtzKyspe2NvbnN0IHI9TWF0aC5mbG9vcih0aGlzLmJpdE9mZnNldC84KSxvPTctdGhpcy5iaXRPZmZzZXQlOCxhPXRoaXMuZGF0YVtyXT4+byYxO2V8PWE8PHQtMS1zLHRoaXMuYml0T2Zmc2V0Kyt9cmV0dXJuIGV9c2tpcCh0KXt0aGlzLmJpdE9mZnNldCs9dH1yZWFkRXhwR29sb21iVW5zaWduZWQoKXtsZXQgdD0tMTtmb3IobGV0IGU9MDtlPT09MDt0KyspZT10aGlzLnJlYWRCaXRzKDEpO3JldHVybigxPDx0KS0xK3RoaXMucmVhZEJpdHModCl9cmVhZEV4cEdvbG9tYlNpZ25lZCgpe2NvbnN0IHQ9dGhpcy5yZWFkRXhwR29sb21iVW5zaWduZWQoKTtyZXR1cm4gdCUyPT09MD8tKHQvMik6KHQrMSkvMn19Y29uc3QgbT17U0xJQ0VfTk9OX0lEUjoxLFNMSUNFX1BBUlRJVElPTl9BOjIsU0xJQ0VfSURSOjUsU0VJX0gyNjQ6NixTRUlfSDI2NV9QUkVGSVg6MzksU0VJX0gyNjVfU1VGRklYOjQwLFNQU19IMjY0OjcsU1BTX0gyNjU6MzMsUFBTX0gyNjQ6OCxQUFNfSDI2NTozNH0sUj17UElDX1RJTUlORzoxLFVTRVJfREFUQV9VTlJFR0lTVEVSRUQ6NX0sRT17TEVHQUNZOjEsTkVXOjIsVElNRUNPREU6MyxPVEhFUjo0fSxqPSI2ZTljZmQyYS01OTA3LTQ5ZmYtYjM2My04OTc4YTZlODM0MGUiLHE9IjlhMjFmM2JlLTMxZjAtNGI3OC1iMGJlLWM3ZjdkYmI5NzI1MCIsTD0iZDQwZTM4ZWEtZDQxOS00YzYyLTk0ZWQtMjBhYzM3YjRlNGZhIjtjbGFzcyBWe2NvbnN0cnVjdG9yKHQ9IkgyNjQiKXt0aGlzLnNwcz1uZXcgTWFwLHRoaXMucHBzPW5ldyBNYXAsdGhpcy5hY3RpdmVTUFM9bnVsbCx0aGlzLmNvZGVjPXR9Y29sbGVjdFBQUyh0KXt0aGlzLmNvZGVjPT09IkgyNjQiP3RoaXMuY29sbGVjdEgyNjRQUFModCk6dGhpcy5jb2xsZWN0SDI2NVBQUyh0KX1jb2xsZWN0U1BTKHQpe3RoaXMuY29kZWM9PT0iSDI2NCI/dGhpcy5jb2xsZWN0SDI2NFNQUyh0KTp0aGlzLmNvbGxlY3RIMjY1U1BTKHQpfWNvbGxlY3RIMjY0U1BTKHQpe2NvbnN0IGU9bmV3IHcodCkscz1lLnJlYWRCaXRzKDgpLHI9WzEwMCwxMTAsMTIyLDI0NCw0NCw4Myw4NiwxMTgsMTI4LDEzOCwxMzksMTM0LDEzNV07ZS5za2lwKDgpLGUuc2tpcCg4KTtjb25zdCBvPWUucmVhZEV4cEdvbG9tYlVuc2lnbmVkKCk7aWYobz4zMXx8bzwwKXRocm93IG5ldyBFcnJvcigiSW52YWxpZCBzZXFfcGFyYW1ldGVyX3NldF9pZCIpO2lmKHIuaW5jbHVkZXMocykpe2NvbnN0IGw9ZS5yZWFkRXhwR29sb21iVW5zaWduZWQoKTtpZihsPT09MyYmZS5za2lwKDEpLGUucmVhZEV4cEdvbG9tYlVuc2lnbmVkKCksZS5yZWFkRXhwR29sb21iVW5zaWduZWQoKSxlLnNraXAoMSksZS5yZWFkQml0cygxKSl7Y29uc3QgaT1sIT09Mz84OjEyO2ZvcihsZXQgdT0wO3U8aTt1KyspaWYoZS5yZWFkQml0cygxKSl7Y29uc3QgaD11PDY/MTY6NjQ7bGV0IGM9OCxwPTg7Zm9yKGxldCBfPTA7XzxoO18rKyl7aWYocCE9PTApe2NvbnN0IGc9ZS5yZWFkRXhwR29sb21iU2lnbmVkKCk7cD0oYytnKzI1NiklMjU2fWM9cD09PTA/YzpwfX19fWUucmVhZEV4cEdvbG9tYlVuc2lnbmVkKCk7Y29uc3QgYT1lLnJlYWRFeHBHb2xvbWJVbnNpZ25lZCgpO2lmKGE9PT0wKWUucmVhZEV4cEdvbG9tYlVuc2lnbmVkKCk7ZWxzZSBpZihhPT09MSl7ZS5za2lwKDEpLGUucmVhZEV4cEdvbG9tYlNpZ25lZCgpLGUucmVhZEV4cEdvbG9tYlNpZ25lZCgpO2NvbnN0IGw9ZS5yZWFkRXhwR29sb21iVW5zaWduZWQoKTtmb3IobGV0IGY9MDtmPGw7ZisrKWUucmVhZEV4cEdvbG9tYlNpZ25lZCgpfWUucmVhZEV4cEdvbG9tYlVuc2lnbmVkKCksZS5za2lwKDEpLGUucmVhZEV4cEdvbG9tYlVuc2lnbmVkKCksZS5yZWFkRXhwR29sb21iVW5zaWduZWQoKSxlLnJlYWRCaXRzKDEpPT09MCYmZS5za2lwKDEpLGUuc2tpcCgxKSxlLnJlYWRCaXRzKDEpJiYoZS5yZWFkRXhwR29sb21iVW5zaWduZWQoKSxlLnJlYWRFeHBHb2xvbWJVbnNpZ25lZCgpLGUucmVhZEV4cEdvbG9tYlVuc2lnbmVkKCksZS5yZWFkRXhwR29sb21iVW5zaWduZWQoKSk7bGV0IGQ7aWYoZS5yZWFkQml0cygxKSl7bGV0IGY9ZnVuY3Rpb24oYyl7Y29uc3QgcD1jLnJlYWRFeHBHb2xvbWJVbnNpZ25lZCgpO2Muc2tpcCg0KSxjLnNraXAoNCk7Zm9yKGxldCB4PTA7eDw9cDt4KyspYy5yZWFkRXhwR29sb21iVW5zaWduZWQoKSxjLnJlYWRFeHBHb2xvbWJVbnNpZ25lZCgpLGMuc2tpcCgxKTtjLnNraXAoNSk7Y29uc3QgXz1jLnJlYWRCaXRzKDUpLGc9Yy5yZWFkQml0cyg1KSxBPWMucmVhZEJpdHMoNSk7cmV0dXJue2NwYl9yZW1vdmFsX2RlbGF5X2xlbmd0aF9taW51czE6XyxkcGJfb3V0cHV0X2RlbGF5X2xlbmd0aF9taW51czE6Zyx0aW1lX29mZnNldF9sZW5ndGg6QX19O2UucmVhZEJpdHMoMSkmJmUucmVhZEJpdHMoOCk9PT0yNTUmJihlLnNraXAoMTYpLGUuc2tpcCgxNikpLGUucmVhZEJpdHMoMSkmJmUuc2tpcCgxKSxlLnJlYWRCaXRzKDEpJiYoZS5za2lwKDMpLGUuc2tpcCgxKSxlLnJlYWRCaXRzKDEpJiZlLnNraXAoMjQpKSxlLnJlYWRCaXRzKDEpJiYoZS5yZWFkRXhwR29sb21iVW5zaWduZWQoKSxlLnJlYWRFeHBHb2xvbWJVbnNpZ25lZCgpKTtjb25zdCBsPWUucmVhZEJpdHMoMSk/e251bV91bml0c19pbl90aWNrOmUucmVhZEJpdHMoMzIpLHRpbWVfc2NhbGU6ZS5yZWFkQml0cygzMiksZml4ZWRfZnJhbWVfcmF0ZV9mbGFnOmUucmVhZEJpdHMoMSl9OnZvaWQgMCxpPWUucmVhZEJpdHMoMSk/ZihlKTp2b2lkIDAsdT1lLnJlYWRCaXRzKDEpP2YoZSk6dm9pZCAwOyhpfHx1KSYmZS5za2lwKDEpO2NvbnN0IGg9ZS5yZWFkQml0cygxKTtkPXt0aW1pbmdfaW5mbzpsLG5hbF9ocmRfcGFyYW1ldGVyczppLHZjbF9ocmRfcGFyYW1ldGVyczp1LHBpY19zdHJ1Y3RfcHJlc2VudF9mbGFnOmh9fXRoaXMuc3BzLnNldChvLHt2dWlfcGFyYW1ldGVyczpkfSl9Y29sbGVjdEgyNjVTUFModCl7fWNvbGxlY3RIMjY0UFBTKHQpe2NvbnN0IGU9bmV3IHcodCkscz1lLnJlYWRFeHBHb2xvbWJVbnNpZ25lZCgpO2lmKHM+MjU1fHxzPDApdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIHBpY19wYXJhbWV0ZXJfc2V0X2lkIik7Y29uc3Qgcj1lLnJlYWRFeHBHb2xvbWJVbnNpZ25lZCgpO3RoaXMucHBzLnNldChzLHtzZXFfcGFyYW1ldGVyX3NldF9pZDpyfSl9Y29sbGVjdEgyNjVQUFModCl7fWZpbmRBY3RpdmVTUFModCl7Y29uc3QgZT1uZXcgdyh0KTtlLnJlYWRFeHBHb2xvbWJVbnNpZ25lZCgpLGUucmVhZEV4cEdvbG9tYlVuc2lnbmVkKCk7Y29uc3Qgcz1lLnJlYWRFeHBHb2xvbWJVbnNpZ25lZCgpLHI9dGhpcy5wcHMuZ2V0KHMpO2lmKHIpe2NvbnN0IG89dGhpcy5zcHMuZ2V0KHIuc2VxX3BhcmFtZXRlcl9zZXRfaWQpO2lmKG8pe3RoaXMuYWN0aXZlU1BTPW87cmV0dXJufX10aHJvdyBuZXcgRXJyb3IoIkNhbm5vdCBmaW5kIHRoZSBhY3RpdmUgU1BTIil9fWNvbnN0IFM9bmV3IFY7ZnVuY3Rpb24gRyhuLHQpe2Zvcig7dDxuLmJ5dGVMZW5ndGgtNDspe2lmKG5bdF09PT0wJiZuW3QrMV09PT0wJiYoblt0KzJdPT09MXx8blt0KzJdPT09MCYmblt0KzNdPT09MSkpcmV0dXJuIHQ7dCs9MX1yZXR1cm4tMX1mdW5jdGlvbiBVKG4pe2NvbnN0IHQ9bmV3IFVpbnQ4QXJyYXkobi5ieXRlTGVuZ3RoKTtsZXQgZT0wLHM9MDtmb3IobGV0IHI9MjtyPG4uYnl0ZUxlbmd0aDtyKyspbltyXT09PTMmJm5bci0xXT09PTAmJm5bci0yXT09PTAmJih0LnNldChuLnN1YmFycmF5KHMsciksZSksZSs9ci1zLHM9cisxKTtyZXR1cm4gczxuLmJ5dGVMZW5ndGgmJnQuc2V0KG4uc3ViYXJyYXkocyksZSksdH1mdW5jdGlvbiBZKG4sdCl7bGV0IGU9MDtjb25zdCBzPXQ9PT0iSDI2NCI/MToyLHI9W107Zm9yKDtlPG4uYnl0ZUxlbmd0aC00Oyl7Y29uc3Qgbz1HKG4sZSk7aWYobz49ZSl7Y29uc3QgYT1uW28rMl09PT0xPzM6NCxkPUcobixvK2Ercyk7aWYoZD5vKXIucHVzaChuLnN1YmFycmF5KG8sZCkpLGU9ZDtlbHNle3IucHVzaChuLnN1YmFycmF5KG8pKTticmVha319ZWxzZSBicmVha31yZXR1cm4gcn1mdW5jdGlvbiBYKG4sdCl7bGV0IGU9ITA7cmV0dXJuIFkobix0KS5maWx0ZXIocz0+e2NvbnN0IHI9c1syXT09PTE/Mzo0LG89dD09PSJIMjY0Ij8xOjIsYT1zW3JdLGQ9dD09PSJIMjY0Ij9hJjMxOmE+PjEmNjM7aWYoZSlzd2l0Y2goZCl7Y2FzZSBtLlBQU19IMjY0OmNhc2UgbS5QUFNfSDI2NTpTLmNvbGxlY3RQUFMoVShzLnN1YmFycmF5KHIrbykpKTticmVhaztjYXNlIG0uU1BTX0gyNjQ6Y2FzZSBtLlNQU19IMjY1OlMuY29sbGVjdFNQUyhVKHMuc3ViYXJyYXkocitvKSkpO2JyZWFrO2Nhc2UgbS5TTElDRV9JRFI6Y2FzZSBtLlNMSUNFX05PTl9JRFI6Y2FzZSBtLlNMSUNFX1BBUlRJVElPTl9BOnRyeXtTLmZpbmRBY3RpdmVTUFMoVShzLnN1YmFycmF5KHIrbykpKSxlPSExfWNhdGNoKGwpe2NvbnNvbGUuaW5mbygiRmFpbGVkIHRvIGZpbmQgYWN0aXZlIFNQUy4gV2lsbCBub3QgYmUgYWJsZSB0byBleHRyYWN0IFBJQyB0aW1pbmcgbWV0YWRhdGEiKX1icmVha31yZXR1cm5bbS5TRUlfSDI2NCxtLlNFSV9IMjY1X1BSRUZJWCxtLlNFSV9IMjY1X1NVRkZJWF0uaW5jbHVkZXMoZCl9KX1mdW5jdGlvbiAkKG4pe2xldCB0PTAsZT0wO2Zvcig7bltlXT09PTI1NTspdCs9MjU1LGUrKzt0Kz1uW2VdLGUrKztsZXQgcz0wO2Zvcig7bltlXT09PTI1NTspcys9MjU1LGUrKztyZXR1cm4gcys9bltlXSxlKysse3R5cGU6dCxjb250ZW50Om4uc3ViYXJyYXkoZSxlK3MpfX1mdW5jdGlvbiBKKG4pe2NvbnN0IHQ9bmV3IFVpbnQ4QXJyYXkoVChxKSksZT1uZXcgVWludDhBcnJheShUKGopKSxzPW5ldyBVaW50OEFycmF5KFQoTCkpO3JldHVybiB0LmV2ZXJ5KChyLG8pPT5yPT09bltvXSk/RS5USU1FQ09ERTplLmV2ZXJ5KChyLG8pPT5yPT09bltvXSk/RS5MRUdBQ1k6cy5ldmVyeSgocixvKT0+cj09PW5bb10pP0UuTkVXOkUuT1RIRVJ9ZnVuY3Rpb24gSyhuLHQpe2xldCBlPTA7bi51dWlkPXQuc3ViYXJyYXkoZSxlKzE2KSxlKz0xNjtjb25zdCBzPUoobi51dWlkKSxyPXQuc3ViYXJyYXkoZSk7c3dpdGNoKHMpe2Nhc2UgRS5MRUdBQ1k6Y2FzZSBFLk9USEVSOm4udW5yZWdpc3RlcmVkPXI7YnJlYWs7Y2FzZSBFLlRJTUVDT0RFOm4udGltZWNvZGU9TyhyKTticmVhaztjYXNlIEUuTkVXOntsZXQgbz0wO2NvbnN0IGE9QyhEYXRlLm5vdygpKS5sZW5ndGgsZD1yLnN1YmFycmF5KG8sYSk7bys9YTtjb25zdCBsPXIuc3ViYXJyYXkobyk7bi50aW1lY29kZT1PKGQpLG4udW5yZWdpc3RlcmVkPWw7YnJlYWt9fX1mdW5jdGlvbiBPKG4pe2NvbnN0IHQ9bi5yZWR1Y2UoKG8sYSk9PihvPDxCaWdJbnQoOCkpK0JpZ0ludChhKSxCaWdJbnQoMCkpLGU9TnVtYmVyKHQpLHM9bmV3IERhdGUoZSk7cmV0dXJuIG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShzLnRvSVNPU3RyaW5nKCkpfWZ1bmN0aW9uIFoobix0KXt2YXIgZixpLHUsaCxjO2lmKCFTLmFjdGl2ZVNQUyl7Y29uc29sZS53YXJuKCJDYW5ub3QgZmluZCB0aGUgYWN0aXZlIFNQUyIpO3JldHVybn1jb25zdCBlPShmPVMuYWN0aXZlU1BTLnZ1aV9wYXJhbWV0ZXJzLm5hbF9ocmRfcGFyYW1ldGVycykhPW51bGw/ZjpTLmFjdGl2ZVNQUy52dWlfcGFyYW1ldGVycy52Y2xfaHJkX3BhcmFtZXRlcnMscz17Y3BiX2RwYl9kZWxheXNfcHJlc2VudF9mbGFnOmU/MTowLGNwYl9yZW1vdmFsX2RlbGF5X2xlbmd0aF9taW51czE6KGk9ZT09bnVsbD92b2lkIDA6ZS5jcGJfcmVtb3ZhbF9kZWxheV9sZW5ndGhfbWludXMxKSE9bnVsbD9pOjIzLGRwYl9vdXRwdXRfZGVsYXlfbGVuZ3RoX21pbnVzMToodT1lPT1udWxsP3ZvaWQgMDplLmRwYl9vdXRwdXRfZGVsYXlfbGVuZ3RoX21pbnVzMSkhPW51bGw/dToyMyx0aW1lX29mZnNldF9sZW5ndGg6ZT8oaD1lLnRpbWVfb2Zmc2V0X2xlbmd0aCkhPW51bGw/aDoyNDp2b2lkIDAscGljX3N0cnVjdF9wcmVzZW50X2ZsYWc6KGM9Uy5hY3RpdmVTUFMudnVpX3BhcmFtZXRlcnMucGljX3N0cnVjdF9wcmVzZW50X2ZsYWcpIT1udWxsP2M6MH07aWYoIXMucGljX3N0cnVjdF9wcmVzZW50X2ZsYWcpe2NvbnNvbGUud2FybigicGljX3N0cnVjdF9wcmVzZW50X2ZsYWcgaXMgbm90IHByZXNlbnQiKTtyZXR1cm59Y29uc3Qgcj1uZXcgdyh0KTtzLmNwYl9kcGJfZGVsYXlzX3ByZXNlbnRfZmxhZyYmKHIuc2tpcChzLmNwYl9yZW1vdmFsX2RlbGF5X2xlbmd0aF9taW51czErMSksci5za2lwKHMuZHBiX291dHB1dF9kZWxheV9sZW5ndGhfbWludXMxKzEpKTtjb25zdCBvPVsxLDEsMSwyLDIsMywzLDIsM10sYT1yLnJlYWRCaXRzKDQpO2lmKGE+PW8ubGVuZ3RoKXRocm93IG5ldyBFcnJvcigiSW52YWxpZCBwaWNfc3RydWN0Iik7Y29uc3QgZD1vW2FdLGw9W107Zm9yKGxldCBwPTA7cDxkO3ArKylpZihyLnJlYWRCaXRzKDEpKXtjb25zdCBnPXt9O3Iuc2tpcCgyKSxyLnNraXAoMSksci5za2lwKDUpO2NvbnN0IEE9ci5yZWFkQml0cygxKTtpZihyLnNraXAoMiksZy5uX2ZyYW1lcz1yLnJlYWRCaXRzKDgpLEE/KGcuc2Vjb25kc192YWx1ZT1yLnJlYWRCaXRzKDYpLGcubWludXRlc192YWx1ZT1yLnJlYWRCaXRzKDYpLGcuaG91cnNfdmFsdWU9ci5yZWFkQml0cyg1KSk6ci5yZWFkQml0cygxKSYmKGcuc2Vjb25kc192YWx1ZT1yLnJlYWRCaXRzKDYpLHIucmVhZEJpdHMoMSkmJihnLm1pbnV0ZXNfdmFsdWU9ci5yZWFkQml0cyg2KSxyLnJlYWRCaXRzKDEpJiYoZy5ob3Vyc192YWx1ZT1yLnJlYWRCaXRzKDUpKSkpLHMudGltZV9vZmZzZXRfbGVuZ3RoKXRyeXtnLnRpbWVfb2Zmc2V0PXIucmVhZEJpdHMocy50aW1lX29mZnNldF9sZW5ndGgpfWNhdGNoKHgpe2NvbnNvbGUuZXJyb3IoIkZhaWxlZCB0byByZWFkIHRpbWVfb2Zmc2V0Iix4KSxnLnRpbWVfb2Zmc2V0PTB9ZWxzZSBnLnRpbWVfb2Zmc2V0PTA7bC5wdXNoKGcpfW4uc2VpUGljVGltaW5nVGltZUNvZGVBcnJheT1sfWZ1bmN0aW9uIFEobix0KXtpZih0IT09IkgyNjQiJiZ0IT09IkgyNjUiKXRocm93IG5ldyBFcnJvcigiVW5zdXBwb3J0ZWQgY29kZWMgIi5jb25jYXQodCkpO2NvbnN0IGU9e307cmV0dXJuIFMuY29kZWM9dCxYKG5ldyBVaW50OEFycmF5KG4uZGF0YSksdCkuZm9yRWFjaChzPT57Y29uc3Qgcj1zWzJdPT09MT8zOjQsbz10PT09IkgyNjQiPzE6MixhPVUocy5zdWJhcnJheShyK28pKSxkPSQoYSk7c3dpdGNoKGQudHlwZSl7Y2FzZSBSLlBJQ19USU1JTkc6WihlLGQuY29udGVudCk7YnJlYWs7Y2FzZSBSLlVTRVJfREFUQV9VTlJFR0lTVEVSRUQ6SyhlLGQuY29udGVudCk7YnJlYWt9fSksZX1mdW5jdGlvbiBlZShuKXtyZXR1cm4vXlswLTlhLWZBLUZdezh9LVswLTlhLWZBLUZdezR9LVswLTlhLWZBLUZdezR9LVswLTlhLWZBLUZdezR9LVswLTlhLWZBLUZdezEyfSQvLnRlc3Qobil9ZnVuY3Rpb24gVChuKXtyZXR1cm4gbi5yZXBsYWNlKC8tL2csIiIpLm1hdGNoKC8uezEsMn0vZykubWFwKHQ9PnBhcnNlSW50KHQsMTYpKX1mdW5jdGlvbiB0ZShuLHQsZSl7Y29uc3Qgcz1uZXcgVWludDhBcnJheShUKG4pKSxyPUMoZSksbz1uZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUoSlNPTi5zdHJpbmdpZnkodCkpLGE9bmV3IFVpbnQ4QXJyYXkocy5sZW5ndGgrci5sZW5ndGgrby5sZW5ndGgpO3JldHVybiBhLnNldChzKSxhLnNldChyLHMubGVuZ3RoKSxhLnNldChvLHIubGVuZ3RoK3MubGVuZ3RoKSxhfWZ1bmN0aW9uIG5lKG4pe2NvbnN0IHQ9W10sZT1NYXRoLmZsb29yKG4uYnl0ZUxlbmd0aC8yNTUpLHM9bi5ieXRlTGVuZ3RoJTI1NTtmb3IobGV0IHI9MDtyPGU7cisrKXQucHVzaCgyNTUpO3JldHVybiB0LnB1c2gocyksbmV3IFVpbnQ4QXJyYXkoWzUsLi4udF0pfWZ1bmN0aW9uIHJlKG4pe2NvbnN0IHQ9W107Zm9yKGxldCBlPTA7ZTxuLmJ5dGVMZW5ndGg7ZSsrKWUrMjxuLmJ5dGVMZW5ndGgmJlswLDEsMiwzXS5pbmNsdWRlcyhuW2UrMl0pJiZuW2VdPT09MCYmbltlKzFdPT09MD8odC5wdXNoKG5bZV0pLHQucHVzaChuW2UrMV0pLGUrPTIsdC5wdXNoKDMpKTp0LnB1c2gobltlXSk7cmV0dXJuIHQucHVzaCgxMjgpLG5ldyBVaW50OEFycmF5KHQpfWZ1bmN0aW9uIEMobil7Y29uc3QgdD1bXTtpZighaXNOYU4obikpe2NvbnN0IGU9QmlnSW50KG4pO2ZvcihsZXQgcz0wO3M8TWF0aC5jZWlsKE1hdGguZmxvb3IoTWF0aC5sb2cyKG5ldyBOdW1iZXIobikpKzEpLzgpO3MrKyl0LnVuc2hpZnQobmV3IE51bWJlcihlPj5CaWdJbnQoOCpzKSZCaWdJbnQoMjU1KSkpfXJldHVybiBuZXcgVWludDhBcnJheSh0KX1mdW5jdGlvbiBzZSh7dXVpZDpuLHBheWxvYWQ6dCx0aW1lY29kZTplfSl7Y29uc3Qgcz1bMCwwLDAsMV0scj1bMTAyXSxvPXRlKG4sdCxlKSxhPW5lKG8pLGQ9cmUobyksbD1uZXcgVWludDhBcnJheShzLmxlbmd0aCtyLmxlbmd0aCthLmxlbmd0aCtkLmxlbmd0aCk7cmV0dXJuIGwuc2V0KHMpLGwuc2V0KHIscy5sZW5ndGgpLGwuc2V0KGEscy5sZW5ndGgrci5sZW5ndGgpLGwuc2V0KGQscy5sZW5ndGgrci5sZW5ndGgrYS5sZW5ndGgpLGx9ZnVuY3Rpb24gaWUoe3V1aWQ6bixwYXlsb2FkOnQsdGltZWNvZGU6ZX0scyl7aWYobj09PSIifHx0PT09IiIpdGhyb3cgbmV3IEVycm9yKCJ1dWlkIGFuZCBwYXlsb2FkIGNhbm5vdCBiZSBlbXB0eSIpO2VlKG4pfHwoY29uc29sZS53YXJuKCJJbnZhbGlkIFVVSUQuIFVzaW5nIGRlZmF1bHQgVVVJRC4iKSxuPUwsZT1EYXRlLm5vdygpKTtjb25zdCByPXNlKHt1dWlkOm4scGF5bG9hZDp0LHRpbWVjb2RlOmV9KSxvPW5ldyBEYXRhVmlldyhzLmRhdGEpLGE9bmV3IEFycmF5QnVmZmVyKHMuZGF0YS5ieXRlTGVuZ3RoK3IuYnl0ZUxlbmd0aCksZD1uZXcgRGF0YVZpZXcoYSk7Zm9yKGxldCBsPTA7bDxzLmRhdGEuYnl0ZUxlbmd0aDtsKyspZC5zZXRVaW50OChsLG8uZ2V0VWludDgobCkpO2ZvcihsZXQgbD0wO2w8ci5ieXRlTGVuZ3RoO2wrKylkLnNldFVpbnQ4KHMuZGF0YS5ieXRlTGVuZ3RoK2wscltsXSk7cy5kYXRhPWF9RC5nZXQoIlRyYW5zZm9ybVdvcmtlciIpLnNldExldmVsKEQuREVCVUcpO2NvbnN0IG9lPTJlMyxiPVtdO2xldCB5PSIiLFA9e307Y29uc3Qgdj17fTtsZXQgST1bXTtmdW5jdGlvbiBIKG4pe3JldHVybiBuZXcgVHJhbnNmb3JtU3RyZWFtKHtzdGFydCgpe30sZmx1c2goKXt9LGFzeW5jIHRyYW5zZm9ybSh0LGUpe3ZhciBzLHI7aWYodCBpbnN0YW5jZW9mIFJUQ0VuY29kZWRWaWRlb0ZyYW1lKXtjb25zdCBvPSgocz1QW3QuZ2V0TWV0YWRhdGEoKS5wYXlsb2FkVHlwZV0pPT1udWxsP3ZvaWQgMDpzLnRvVXBwZXJDYXNlKCkpfHwoeT09bnVsbD92b2lkIDA6eS50b1VwcGVyQ2FzZSgpKTtpZihvPT09IkgyNjQiKXtjb25zdCBhPVEodCxvKTsoYS50aW1lY29kZXx8YS51bnJlZ2lzdGVyZWR8fCgocj1hLnNlaVBpY1RpbWluZ1RpbWVDb2RlQXJyYXkpPT1udWxsP3ZvaWQgMDpyLmxlbmd0aCk+MCkmJnNlbGYucG9zdE1lc3NhZ2Uoe2V2ZW50OiJtZXRhZGF0YSIsbWlkOm4sbWV0YWRhdGE6YX0pfXNlbGYucG9zdE1lc3NhZ2Uoe2V2ZW50OiJjb21wbGV0ZSIsZnJhbWU6e3R5cGU6dC50eXBlLHRpbWVzdGFtcDp0LnRpbWVzdGFtcCxkYXRhOnQuZGF0YX19KX1lLmVucXVldWUodCl9fSl9ZnVuY3Rpb24gTSgpe09iamVjdC5rZXlzKHYpLnNvcnQoKS5qb2luKCk9PT1JLnNvcnQoKS5qb2luKCkmJihiLnNoaWZ0KCksST1bXSl9ZnVuY3Rpb24gYWUobil7Y29uc3QgdD1uZXcgRGF0ZSgpLmdldFRpbWUoKTt2W25dPXQsT2JqZWN0LmtleXModikuZmlsdGVyKHM9PnQtdltzXT5vZSkuZm9yRWFjaChzPT57ZGVsZXRlIHZbc10sZGVsZXRlIElbc119KSxNKCl9ZnVuY3Rpb24gTigpe3JldHVybiBuZXcgVHJhbnNmb3JtU3RyZWFtKHtzdGFydCgpe30sZmx1c2goKXt9LGFzeW5jIHRyYW5zZm9ybShuLHQpe2lmKG4gaW5zdGFuY2VvZiBSVENFbmNvZGVkVmlkZW9GcmFtZSl7Y29uc3Qgcz1uLmdldE1ldGFkYXRhKCkuc3luY2hyb25pemF0aW9uU291cmNlO2lmKGFlKHMpLCFJLmluY2x1ZGVzKHMpJiZiLmxlbmd0aCl0cnl7aWYoIS8oaDI2WzRdKS8udGVzdCh5KSl0aHJvdyBuZXcgRXJyb3IoIlNlbmRpbmcgbWV0YWRhdGEgaXMgbm90IHN1cHBvcnRlZCB3aXRoIGFueSBvdGhlciBjb2RlYyBvdGhlciB0aGFuIEguMjY0Iik7YlswXS51dWlkPT09TCYmKGJbMF0udGltZWNvZGU9RGF0ZS5ub3coKSksaWUoYlswXSxuKSxJLnB1c2gocyl9Y2F0Y2gocil7Y29uc29sZS5lcnJvcihyKX1maW5hbGx5e00oKX19dC5lbnF1ZXVlKG4pfX0pfWZ1bmN0aW9uIGsoe3JlYWRhYmxlOm4sd3JpdGFibGU6dH0sZSl7bi5waXBlVGhyb3VnaChlKS5waXBlVG8odCl9YWRkRXZlbnRMaXN0ZW5lcigicnRjdHJhbnNmb3JtIixuPT57bGV0IHQ7aWYobi50cmFuc2Zvcm1lci5vcHRpb25zLm5hbWU9PT0ic2VuZGVyVHJhbnNmb3JtIil5PW4udHJhbnNmb3JtZXIub3B0aW9ucy5jb2RlYyx0PU4oKTtlbHNlIGlmKG4udHJhbnNmb3JtZXIub3B0aW9ucy5uYW1lPT09InJlY2VpdmVyVHJhbnNmb3JtIilQPW4udHJhbnNmb3JtZXIub3B0aW9ucy5wYXlsb2FkVHlwZUNvZGVjfHx7fSx5PW4udHJhbnNmb3JtZXIub3B0aW9ucy5jb2RlY3x8IiIsdD1IKG4udHJhbnNmb3JtZXIub3B0aW9ucy5taWQpO2Vsc2UgcmV0dXJuO2sobi50cmFuc2Zvcm1lcix0KX0pLGFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLG49Pntjb25zdHthY3Rpb246dH09bi5kYXRhO3N3aXRjaCh0KXtjYXNlImluc2VydGFibGUtc3RyZWFtcy1zZW5kZXIiOnk9bi5kYXRhLmNvZGVjLGsobi5kYXRhLE4oKSk7YnJlYWs7Y2FzZSJpbnNlcnRhYmxlLXN0cmVhbXMtcmVjZWl2ZXIiOlA9bi5kYXRhLnBheWxvYWRUeXBlQ29kZWN8fHt9LHk9bi5kYXRhLmNvZGVjfHwiIixrKG4uZGF0YSxIKG4uZGF0YS5taWQpKTticmVhaztjYXNlIm1ldGFkYXRhLXNlaS11c2VyLWRhdGEtdW5yZWdpc3RlcmVkIjpiLnB1c2goe3V1aWQ6bi5kYXRhLnV1aWQscGF5bG9hZDpuLmRhdGEucGF5bG9hZH0pO2JyZWFrfX0pfSkoKTsK",Xs=typeof self<"u"&&self.Blob&&new Blob([(t=>T.from(atob(t),(t=>t.charCodeAt(0))))(Hs)],{type:"text/javascript;charset=utf-8"});function qs(t){let i;try{if(i=Xs&&(self.URL||self.webkitURL).createObjectURL(Xs),!i)throw"";const e=new Bl(i,{name:null==t?void 0:t.name});return e.addEventListener("error",(()=>{(self.URL||self.webkitURL).revokeObjectURL(i)})),e}catch(i){return new Bl("data:text/javascript;base64,"+Hs,{name:null==t?void 0:t.name})}finally{i&&(self.URL||self.webkitURL).revokeObjectURL(i)}}const Ks=at.get("Publish"),Js={mediaStream:null,bandwidth:0,metadata:!1,disableVideo:!1,disableAudio:!1,codec:Je.H264,simulcast:!1,scalabilityMode:null,peerConfig:{autoInitStats:!0,statsIntervalMs:1e3}};function $s(t){if(!t)return new T;const i=t.length,e=new T(i/2);for(let s=0;s<i;s+=2)e[s/2]=C(t.substr(s,2),16);return e}function tn(t,i,e){if(_.prototype.hasOwnProperty.call(t,e)&&_.prototype.hasOwnProperty.call(i,e)){const s=t[e];t[e]=i[e],i[e]=s}else console.error('One or both objects do not have the property "'.concat(e,'"'))}function en(t,i,e,s){return new(e||(e=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,h)}a((s=s.apply(t,i||[])).next())}))}const sn=nn;function nn(t,i){const e=gn();return(nn=function(t,i){return e[t-=257]})(t,i)}var rn;!function(){const t=nn,i=gn();for(;;)try{if(C(t(266))/1*(-C(t(261))/2)+C(t(258))/3*(-C(t(264))/4)+-C(t(267))/5*(C(t(274))/6)+C(t(260))/7*(C(t(268))/8)+C(t(270))/9+-C(t(277))/10+C(t(263))/11==303379)break;i.push(i.shift())}catch(t){i.push(i.shift())}}();const on=zl&&zl[sn(276)]||"",hn=zl&&zl.vendor||"",an=!(null==s||!s[sn(273)]),un=on[sn(278)](sn(257)),cn=!un&&hn[sn(278)](sn(259)),ln=!un&&!cn&&on.includes(sn(272)),dn=!un&&!cn&&!ln&&on[sn(278)](sn(275)),fn=(null===(rn=null==zl?void 0:zl[sn(262)])||void 0===rn?void 0:rn[sn(271)])||(null==zl?void 0:zl[sn(271)])||"";function gn(){const t=["2403660vsbxKa","includes","Firefox","653511krAkNS","Apple","63eEorAu","2iQvmqu","userAgentData","13393182jRLBxS","4fTXBZP","Win32","74923SyWRbn","1345hVdNEb","21688LwGppn","Windows","132498ZoOcLo","platform","Edg","RTCRtpScriptTransform","9372dNMWWf","Chrome","userAgent"];return(gn=function(){return t})()}const _n={supportsRtpScriptTransform:an,isFirefox:un,isSafari:cn,isEdge:ln,isChrome:dn,platform:fn,isWindows:fn===sn(269)||fn===sn(265)},vn=wn;function wn(t,i){const e=yn();return(wn=function(t,i){return e[t-=185]})(t,i)}!function(){const t=wn,i=yn();for(;;)try{if(-C(t(380))/1+-C(t(354))/2+-C(t(464))/3*(C(t(486))/4)+-C(t(253))/5+C(t(377))/6+C(t(321))/7*(-C(t(285))/8)+-C(t(444))/9*(-C(t(279))/10)==657542)break;i.push(i.shift())}catch(t){i.push(i.shift())}}();const mn=_n[vn(496)];function pn(t,i){const e=vn;let s=new T((0|t.byteLength)+(0|i[e(442)]));return s[e(311)](t,0),s[e(311)](i,0|t.byteLength),s}const An=(t,i,e,s)=>{const n=vn,r=s[n(203)]||1;i*=r,e*=r;const o=(u=t)instanceof ArrayBuffer?u:u[vn(492)],h=(t[n(447)]||0)+t[n(442)],a=(t[n(447)]||0)+i;var u;let c=x[n(389)](0,x[n(487)](a,h)),l=x[n(487)](c+x[n(389)](e,0),h);return c/=r,l/=r,new s(o,c,l-c)};function yn(){const t=["[MSE] source buffer error","ManagedMediaSource","BYTES_PER_ELEMENT","types","ready","valid","Num frames in chunk: ","readBits","getTrackID","mvhd","parsePPS","encrypted","dependsOn","payload","len","moov","VMHD","mse","volume","h264","setUint16","tfdt","nextDts","avc1.","audioSampleAuxInfo","message","endMSE","width","hdlr","warn","traf","readBoolean","shift","mseReady","revokeObjectURL","smhd","dts","indexOf","<PROTECTINFO>","webkitsourceclose","onMSEClose","[H264Parser] IDR without SPS/PPS, not suitable for recovery",'VALUE="',"createObjectURL","</KID>","mdhd","SMHD","getFramePayload","tkhd","flush","clRtcDrmDebugLog","getBits","2598770DahMdb","dbgQueue","dispatch","DINF","http://schemas.microsoft.com/DRM/2007/03/PlayReadyHeader","isReady","sps","nalus","endOfStream","toString","UNKNOWN","Opus","minf","onError","stco","STSC","buffered","</KIDS>","initSegment","dinf","org.w3.clearkey","mp4track","keyFrame","units","mseEnded","videoSampleAuxInfo","41695210Plpuuo","splice","ended","bitLength","seq","url","8YyaFaO","com.apple.fps","[MSE] error: ","bitsAvailable","</WRMHEADER>","trex","setData","buffer error","slice","length","readUByte","mp4a","Unsupported DRM type ","mdia","fromCharCode",'<WRMHEADER xmlns="',"index","string","both","NDR","dOps","cenc","getPayload","bind","PPS","sourceBuffer","set","Checking codec","releaseBuffer","tenc","trak","flags",'/mp4; codecs="',"[H264Parser] Both IDR and non-IDR VCL NALUs found in the same frame","clRtcDrmCreateMediaDump","STSD","6352549TgZLxu","initBrowser","IDR","trun"," - ","start","mediaSource","startsWith","stype","readSPS","addEventListener","schi","encv","createElement","getVideoFrames","onReady","href","sourceopen","setUint32","vmhd","FTYP","schm","getData","toISOString","remuxer","track","skipScalingList","STSZ","getSize","addSourceBuffer","[MSE] buffer error:","appendBufferError","off","2392886zJoPkf","destroy","sdtp","audiosamplerate",": NRI: ","reportDiscontinuity","extractNALUs","No A/V data","pps","senc","saio","concat","config","ftyp","parseNAL","esds","error","feed","Browser does not support codec","4.3.0.0","skipUEG","mp4","end","2232924PKvVOf","updating","options","227868XbMqAn","prototype","createBuffer","info","MediaSource","timestamp","mvex","isfmb","opus","max","stsz","POSITIVE_INFINITY","saiz","timescale","call","encryption","height","jmuxer","bufferControllers","open","patchSampleAuxinfo","queue","stsd","onBufferError","frameCounter","ntype","remux","getPayloadSize","isSupported","</LA_URL>","waitingForIdr","box","idr"," samples - expected 1","tracks","stbl","getNri",'<KID ALGID="AESCTR" ',"download","readUInt","join","com.microsoft.playready.recommendation",'" version="',"remuxController","Received ","frma","resetTrack","disableRemotePlayback","</DATA>","mfhd","pssh","charCodeAt","drm","mediaDuration","video","readyToDecode","from","SPS","skipLZ","data","keySystem","[MSE] sourceclose","byteLength","STTS","9mESMVl","Buffered range ","samples","byteOffset","parseHeader","codec","node","audio","Failure: Browser doesn't support MSE/MMS","subarray","replaceAll","downloadToFile","onBuffer","skipBits","mdat","isKeyframe","moof","mode","push","STCO","9ffcUcC","listener","isReset","map","enca","type","<LA_URL>","parseSPS","getElementById","no video element were found to render, provide a valid video element","sinf","doAppend","HDLR_TYPES","videoElement","stts","keyId","trackTypes","TYPES","remove","size","AUD","src","1376748eVkTXq","min","tfhd","initialized","offAll","appendBuffer","buffer","nri","skipEG","isvcl","isSafari","isTypeSupported","readyState","abort","apply","reduce","assign","calculateExpectedSizeFromSai","duration","generatePlayReadyHeader","readUEG","onMSEOpen","sampleAuxInfo","SEI","irrecoverableError","channelCount","saiIvSize","stsc"];return(yn=function(){return t})()}function bn(t,i,e){return void 0===i&&(i=0),void 0===e&&(e=1/0),An(t,i,e,T)}function Mn(t){const i=vn,e=Array[i(436)](t)[i(467)]((t=>t[i(431)](0)));return new T(e)}s[vn(455)]=(t,i,e)=>{void 0===e&&(e="application/octet-stream");const s=vn,n=h[s(334)]("a"),r=new Blob([t],{type:e});n[s(337)]=URL[s(244)](r),n[s(418)]=i,n.click(),URL[s(235)](n[s(337)])};class Tn{static get[vn(304)](){return 1}static get[vn(323)](){return 5}static get[vn(196)](){return 6}static get SPS(){return 7}static get PPS(){return 8}static get[vn(484)](){return 9}static get[vn(481)](){const t=vn;return{[Tn[t(323)]]:t(323),[Tn.SEI]:t(196),[Tn.SPS]:t(437),[Tn[t(309)]]:t(309),[Tn[t(304)]]:t(304),[Tn[t(484)]]:t(484)}}static type(t){const i=vn;return t[i(405)]in Tn[i(481)]?Tn[i(481)][t[i(405)]]:i(263)}toString(){const t=vn;return Tn[t(469)](this)+t(358)+this[t(416)]()}getNri(){return this[vn(493)]}[vn(469)](){return this[vn(405)]}[vn(459)](){const t=vn;return this[t(405)]===Tn[t(323)]}[vn(307)](){return this[vn(214)]}[vn(407)](){const t=vn;return this[t(214)][t(442)]}getSize(){return 4+this[vn(407)]()}[vn(343)](){const t=vn,i=new T(this.getSize());return new DataView(i.buffer)[t(339)](0,this.getSize()-4),i[t(311)](this[t(307)](),4),i}constructor(t){const i=vn;this.payload=t,this[i(493)]=(96&this.payload[0])>>5,this[i(405)]=31&this[i(214)][0],this[i(495)]=1==this.ntype||5==this[i(405)],this[i(329)]="",this[i(387)]=!1}}class Sn{[vn(291)](t){const i=vn;this.data=t,this[i(301)]=0,this[i(282)]=8*t[i(442)]}get[vn(288)](){const t=vn;return this[t(282)]-this[t(301)]}skipBits(t){if(this[vn(288)]<t)return!1;this.index+=t}[vn(208)](t,i){return void 0===i&&(i=!0),this.getBits(t,this.index,i)}[vn(252)](t,i,e){void 0===e&&(e=!0);const s=vn;if(this.bitsAvailable<t)return 0;const n=i%8,r=this[s(439)][i/8|0]&255>>>n,o=8-n;if(o>=t)return e&&(this.index+=t),r>>o-t;{e&&(this.index+=o);const n=t-o;return r<<n|this[s(252)](n,i+o,e)}}[vn(438)](){const t=vn;let i;for(i=0;i<this.bitLength-this[t(301)];++i)if(0!==this.getBits(1,this[t(301)]+i,!1))return this.index+=i,i;return i}[vn(374)](){const t=vn;this[t(457)](1+this[t(438)]())}[vn(494)](){const t=vn;this[t(457)](1+this[t(438)]())}readUEG(){const t=vn,i=this[t(438)]();return this[t(208)](i+1)-1}readEG(){const t=this[vn(193)]();return 1&t?1+t>>>1:-1*(t>>>1)}readBoolean(){return 1===this[vn(208)](1)}[vn(295)](t){return void 0===t&&(t=1),this[vn(208)](8*t)}readUShort(){return this[vn(208)](16)}[vn(419)](){return this[vn(208)](32)}constructor(t){const i=vn;this[i(439)]=t,this[i(301)]=0,this.bitLength=8*t[i(442)]}}class Nn{static[vn(360)](t,i){const e=vn;let s=[],n=!1,r=!1,o=!1,h=!1,a=0,u=0,c=0,l=[];for(;a<=t.byteLength;){if(a<t.byteLength){const i=t[a++];0!==i?(1===i&&u>1&&(c=u>2?4:3,l.push(a)),u=0):++u}else c=0,l.push(a++);if(l.length>1){const e=l.shift(),d=l[0]-c;if(e<d){let c=!1;const l=31&t[e];if(l===Tn.NDR?r=!0:l===Tn.IDR?n=!0:l===Tn.SPS?(c=o,o=!0):l===Tn.PPS&&(c=h,h=!0),!c)if(!i||l!==Tn.NDR&&l!==Tn.IDR)s.push(t.subarray(e,d));else{const i=new T(d-e);let n=0;for(a=e,u=0;a<d;){let e=t[a++];u>1&&3===e&&(u=0,e=t[a++]),0!==e?u=0:++u,i[n++]=e}s.push(i.subarray(0,n))}}}}let d=!0,f=!1;return r||n?r&&n&&(console[e(230)](e(318)),d=!1):(console[e(230)]("[H264Parser] No VCL NALUs found"),d=!1),n&&(o&&h?f=!0:console[e(230)](e(242))),{valid:d,idr:f,nalus:s}}static skipScalingList(t,i){let e,s=8,n=8;for(let r=0;r<i;r++)0!==n&&(e=t.readEG(),n=(s+e+256)%256),s=0===n?s:n}static[vn(330)](t){const i=vn;let e,s,n,r,o,h,a=new Sn(t),u=0,c=0,l=0,d=0,f=1;if(a[i(295)](),e=a.readUByte(),a[i(208)](5),a[i(457)](3),a.readUByte(),a[i(374)](),100===e||110===e||122===e||244===e||44===e||83===e||86===e||118===e||128===e){var g=a[i(193)]();if(3===g&&a[i(457)](1),a.skipUEG(),a[i(374)](),a[i(457)](1),a[i(232)]()){h=3!==g?8:12;for(let t=0;t<h;++t)a[i(232)]()&&(t<6?Nn[i(347)](a,16):Nn[i(347)](a,64))}}a[i(374)]();var _=a.readUEG();if(0===_)a[i(193)]();else if(1===_){a.skipBits(1),a[i(494)](),a[i(494)](),s=a[i(193)]();for(let t=0;t<s;++t)a.skipEG()}if(a.skipUEG(),a[i(457)](1),n=a[i(193)](),r=a.readUEG(),o=a[i(208)](1),0===o&&a[i(457)](1),a[i(457)](1),a[i(232)]()&&(u=a[i(193)](),c=a[i(193)](),l=a[i(193)](),d=a.readUEG()),a.readBoolean()){if(a[i(232)]()){let t;switch(a[i(295)]()){case 1:t=[1,1];break;case 2:t=[12,11];break;case 3:t=[10,11];break;case 4:t=[16,11];break;case 5:t=[40,33];break;case 6:t=[24,11];break;case 7:t=[20,11];break;case 8:t=[32,11];break;case 9:t=[80,33];break;case 10:t=[18,11];break;case 11:t=[15,11];break;case 12:t=[64,33];break;case 13:t=[160,99];break;case 14:t=[4,3];break;case 15:t=[3,2];break;case 16:t=[2,1];break;case 255:t=[a[i(295)]()<<8|a.readUByte(),a[i(295)]()<<8|a[i(295)]()]}t&&t[0]>0&&t[1]>0&&(f=t[0]/t[1])}a.readBoolean()&&a[i(457)](1),a[i(232)]()&&(a.skipBits(4),a[i(232)]()&&a[i(457)](24)),a.readBoolean()&&(a.skipUEG(),a[i(374)]()),a.readBoolean()&&(a[i(419)](),a[i(419)](),a.readBoolean())}return{width:x.ceil((16*(n+1)-2*u-2*c)*f),height:(2-o)*(r+1)*16-(o?2:4)*(l+d)}}static[vn(448)](t){const i=vn;let e=new Sn(t[i(307)]());e.readUByte(),t.isfmb=0===e[i(193)](),t.stype=e[i(193)]()}[vn(471)](t){const i=vn;var e=Nn[i(330)](new T(t));this[i(346)][i(228)]=e[i(228)],this[i(346)][i(396)]=e[i(396)],this[i(346)].sps=[new T(t)],this[i(346)][i(449)]=i(224);let s=new DataView(t.buffer,t[i(447)]+1,4);for(let t=0;t<3;++t){var n=s.getUint8(t)[i(262)](16);n.length<2&&(n="0"+n),this.track[i(449)]+=n}}[vn(211)](t){this[vn(346)].pps=[new T(t)]}[vn(368)](t){const i=vn;if(!t)return!1;let e=!1;switch(t.type()){case Tn[i(323)]:case Tn[i(304)]:e=!0;break;case Tn[i(309)]:!this[i(346)][i(362)]&&(this.parsePPS(t[i(307)]()),!this[i(345)][i(435)]&&this[i(346)][i(362)]&&this[i(346)][i(259)]&&(this[i(345)][i(435)]=!0)),e=!0;break;case Tn[i(437)]:!this[i(346)][i(259)]&&(this[i(471)](t[i(307)]()),!this[i(345)][i(435)]&&this[i(346)][i(362)]&&this.track.sps&&(this[i(345)][i(435)]=!0)),e=!0;break;case Tn[i(484)]:break;case Tn[i(196)]:e=!0}return e}constructor(t){const i=vn;this.remuxer=t,this[i(346)]=t[i(274)]}}class In{on(t,i){const e=vn;return!this[e(465)][t]&&(this[e(465)][t]=[]),this[e(465)][t][e(462)](i),!0}[vn(353)](t,i){const e=vn;if(this[e(465)][t]){var s=this.listener[t][e(238)](i);return s>-1&&this[e(465)][t][e(280)](s,1),!0}return!1}[vn(490)](){this[vn(465)]={}}[vn(255)](t,i){const e=vn;return!!this.listener[t]&&(this[e(465)][t][e(467)]((t=>{t[e(187)](null,[i])})),!0)}constructor(t){const i=vn;this[i(465)]={},this[i(469)]=""|t}}class Dn{static[vn(411)](t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];const n=vn;let r,o=8,h=e.length,a=h;for(;h--;)e[h]&&(o+=e[h].byteLength);for(r=new T(o),r[0]=o>>>24,r[1]=o>>>16&255,r[2]=o>>>8&255,r[3]=255&o,r[n(311)](t,4),h=0,o=8;h<a;++h)e[h]&&(r[n(311)](e[h],o),o+=e[h][n(442)]);return r}hdlr(t){const i=vn;return Dn[i(411)](Dn[i(204)][i(229)],Dn[i(476)][t])}mdat(t){const i=vn;return Dn.box(Dn.types[i(458)],t)}[vn(246)](t,i){const e=vn;return Dn.box(Dn[e(204)][e(246)],new T([0,0,0,0,0,0,0,0,0,0,0,0,t>>>24,t>>>16&255,t>>>8&255,255&t,0,0,0,0,85,196,0,0]))}[vn(298)](t){const i=vn;return Dn[i(411)](Dn[i(204)][i(298)],this[i(246)](t[i(393)],t.duration),this[i(229)](t[i(469)]),this[i(265)](t))}[vn(429)](t){const i=vn;return Dn[i(411)](Dn.types[i(429)],new T([0,0,0,0,t>>>24,t>>>16&255,t>>>8&255,255&t]))}[vn(265)](t){const i=vn;return t[i(469)]===i(451)?Dn[i(411)](Dn[i(204)][i(265)],Dn.box(Dn[i(204)][i(236)],Dn[i(247)]),Dn.DINF,this[i(415)](t)):Dn[i(411)](Dn[i(204)][i(265)],Dn[i(256)],this[i(415)](t),Dn[i(411)](Dn[i(204)][i(340)],Dn[i(217)]))}[vn(460)](t,i,e){const s=vn;return Dn[s(411)](Dn[s(204)][s(460)],this[s(429)](t),this.traf(e,i))}moov(t,i,e){const s=vn;let n=t[s(294)],r=[];for(;n--;)r[n]=this[s(315)](t[n]);return Dn[s(411)][s(187)](null,[Dn[s(204)].moov,this[s(210)](e,i),this[s(430)](t)].concat(r)[s(365)](this[s(386)](t)))}mvex(t){const i=vn;let e=t[i(294)],s=[];for(;e--;)s[e]=this[i(290)](t[e]);return Dn.box[i(187)](null,[Dn[i(204)].mvex].concat(s))}[vn(210)](t,i){const e=vn;let s=new T([0,0,0,0,0,0,0,0,0,0,0,0,t>>>24,t>>>16&255,t>>>8&255,255&t,i>>>24,i>>>16&255,i>>>8&255,255&i,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return Dn[e(411)](Dn[e(204)].mvhd,s)}[vn(356)](t){const i=vn;let e=t[i(446)]||[],s=new T(4+e.length);for(let t=0;t<e.length;t++){const n=e[t][i(316)];s[t+4]=n[i(213)]<<4|n.isDependedOn<<2|n.hasRedundancy}return Dn.box(Dn.types.sdtp,s)}[vn(415)](t){const i=vn;return Dn[i(411)](Dn.types[i(415)],this[i(402)](t),Dn.box(Dn.types[i(478)],Dn[i(443)]),Dn.box(Dn.types[i(200)],Dn[i(268)]),Dn[i(411)](Dn[i(204)][i(390)],Dn[i(348)]),Dn[i(411)](Dn[i(204)][i(267)],Dn[i(463)]))}[vn(333)](t){const i=vn;let e,s,n,r=[],o=[];for(e=0;e<t[i(259)][i(294)];e++)s=t[i(259)][e],n=s[i(442)],r.push(n>>>8&255),r[i(462)](255&n),r=r[i(365)](Array[i(381)].slice.call(s));for(e=0;e<t.pps.length;e++)s=t.pps[e],n=s[i(442)],o.push(n>>>8&255),o[i(462)](255&n),o=o[i(365)](Array[i(381)][i(293)][i(394)](s));const h=Dn[i(411)](Dn[i(204)].avcC,new T([1,r[3],r[4],r[5],255,224|t[i(259)][i(294)]][i(365)](r)[i(365)]([t[i(362)].length]).concat(o))),a=t[i(228)],u=t[i(396)],c=Dn[i(411)](Dn[i(204)][i(474)],Dn[i(411)](Dn.types[i(425)],new T([97,118,99,49])),Dn[i(411)](Dn[i(204)][i(342)],new T([0,0,0,0,...Mn(this[i(432)][i(366)].video[i(395)]),0,1,0,0])),Dn[i(411)](Dn[i(204)].schi,this[i(314)]("video")));return Dn[i(411)](Dn[i(204)][i(333)],new T([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,a>>>8&255,255&a,u>>>8&255,255&u,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,65,86,67,32,67,111,100,105,110,103,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]),h,c)}[vn(369)](t){const i=vn;let e=t.config[i(442)],s=new T(26+e+3);return s[i(311)]([0,0,0,0,3,23+e,0,1,0,4,15+e,64,21,0,0,0,0,0,0,0,0,0,0,0,5,e]),s[i(311)](t[i(366)],26),s[i(311)]([6,1,2],26+e),s}[vn(296)](t){const i=vn,e=t.audiosamplerate;return Dn[i(411)](Dn[i(204)][i(296)],new T([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t[i(198)],0,16,0,0,0,0,e>>>8&255,255&e,0,0]),Dn[i(411)](Dn[i(204)][i(369)],this.esds(t)))}dOps(t){const i=vn,e=t[i(357)];return new T([0,t[i(198)],1,56,0,0,e>>>8&255,255&e,0,0,0])}[vn(264)](t){const i=vn,e=t[i(357)];return Dn[i(411)](Dn[i(204)].Opus,new T([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t[i(198)],0,16,0,0,0,0,e>>>8&255,255&e,0,0]),Dn[i(411)](Dn.types[i(305)],this[i(305)](t)))}[vn(468)](t){const i=vn,e=Dn[i(411)](Dn[i(204)].dOps,this[i(305)](t)),s=Dn[i(411)](Dn[i(204)].sinf,Dn[i(411)](Dn[i(204)].frma,new T([79,112,117,115])),Dn[i(411)](Dn[i(204)][i(342)],new T([0,0,0,0,...Mn(this.drm[i(366)].audio[i(395)]),0,1,0,0])),Dn[i(411)](Dn[i(204)][i(332)],this[i(314)](i(451)))),n=t[i(357)];return Dn[i(411)](Dn[i(204)][i(468)],new T([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t[i(198)],0,16,0,0,0,0,n>>>8&255,255&n,0,0]),e,s)}[vn(402)](t){const i=vn;return t[i(469)]===i(451)?Dn.box(Dn[i(204)][i(402)],Dn[i(320)],t[i(212)]?this[i(468)](t):this[i(264)](t)):Dn.box(Dn[i(204)][i(402)],Dn[i(320)],this.encv(t))}[vn(249)](t){const i=vn,e=t.id,s=t[i(191)],n=t.width,r=t[i(396)],o=t[i(219)];return Dn[i(411)](Dn[i(204)][i(249)],new T([0,0,0,7,0,0,0,0,0,0,0,0,e>>>24,e>>>16&255,e>>>8&255,255&e,0,0,0,0,s>>>24,s>>>16&255,s>>>8&255,255&s,0,0,0,0,0,0,0,0,0,0,0,0,255&o,o%1*10&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,n>>>8&255,255&n,0,0,r>>>8&255,255&r,0,0]))}[vn(231)](t,i){var e;const s=vn,n=t.id,r=t[s(446)][0][s(483)],o=t[s(446)][0][s(191)],h=t[s(446)][0].flags,a=Dn[s(411)](Dn[s(204)][s(488)],new T([0,2,0,58,n>>>24,n>>>16&255,n>>>8&255,255&n,0,0,0,1,o>>>24,n>>>16&255,o>>>8&255,255&o,r>>>24,r>>>16&255,r>>>8&255,255&r,0,h.isNonSync,0,0])),u=Dn[s(411)](Dn[s(204)][s(222)],new T([0,0,0,0,i>>>24,i>>>16&255,i>>>8&255,255&i]));if(t[s(212)]){let i,n;if(t[s(469)]===s(434)?(i=!0,n=this[s(199)][s(434)]+(null==(e=t[s(446)][0].sampleAuxInfo)?void 0:e.byteLength)):(i=!1,n=this[s(199)][s(451)]),n>0){const e=this[s(392)](n),r=this[s(363)](t[s(446)],i),o=e.length+20+r.length+a[s(294)]+u[s(294)]+8+16+8+8,h=this[s(324)](t,o);return Dn[s(411)](Dn[s(204)][s(231)],a,u,h,e,this[s(364)](o-r[s(294)]+h[s(294)]+8),r)}{const i=this[s(363)](null,!1),e=i[s(294)]+a[s(294)]+u.length+8+16+8+8,n=this[s(324)](t,e);return Dn[s(411)](Dn[s(204)][s(231)],a,u,n,i)}}return Dn.box(Dn.types.traf,a,u,this[s(324)](t,a[s(294)]+u[s(294)]+8+16+8+8))}[vn(315)](t){const i=vn;return t[i(191)]=t[i(191)]||4294967295,Dn.box(Dn[i(204)][i(315)],this[i(249)](t),this[i(298)](t))}trex(t){const i=vn,e=t.id;return Dn[i(411)](Dn[i(204)][i(290)],new T([0,0,0,0,e>>>24,e>>>16&255,e>>>8&255,255&e,0,0,0,1,0,0,0,16,0,0,0,0,0,0,0,0]))}trun(t,i){const e=vn;let s=(t.samples||[]).length,n=new T(12);return i+=20,n[e(311)]([0,0,0,1,s>>>24,s>>>16&255,s>>>8&255,255&s,i>>>24,i>>>16&255,i>>>8&255,255&i],0),Dn.box(Dn.types[e(324)],n)}[vn(192)](t,i){const e=vn,s=e(373),n=e(257),r=function(t){const i=function(t){const i=vn;let e="";for(let s=0;s<t.length;s+=16e3){const n=t[i(453)](s,s+16e3);e+=String[i(299)][i(187)](null,n)}return e}(bn(t));return btoa(i)}(function(t){const i=vn,e=[];return e[i(462)](t[3]),e[i(462)](t[2]),e[i(462)](t[1]),e[i(462)](t[0]),e.push(t[5]),e.push(t[4]),e.push(t[7]),e.push(t[6]),(t=bn(t))[i(311)](e,0),t}(t));return bn(function(t,i){const e=vn,s=new T(2*t.length),n=new DataView(s[e(492)]);for(let i=0;i<t[e(294)];++i){const s=t[e(431)](i);n[e(221)](2*i,s,true)}return s[e(492)]}([e(300)+n+e(422)+s+'">',"<DATA>",e(239),"<KIDS>",e(417),e(243)+r+'"',">",e(245),e(270),"</PROTECTINFO>",i?e(470)+i+e(409):"",e(428),e(289)][e(420)]("")))}[vn(430)](t){const i=vn;if(this[i(432)][i(440)][i(328)]("com.widevine"))return Dn[i(411)](Dn[i(204)][i(430)],new T([0,0,0,0,237,239,139,169,121,214,74,206,163,200,39,220,213,29,33,237,0,0,0,18,18,16,...this[i(432)][i(366)][t[0][i(469)]][i(479)]]));if(this[i(432)].keySystem===i(421)){const e=this[i(192)](this[i(432)][i(366)][t[0].type][i(479)],this.drm.licenseUrl),s=e[i(442)];return Dn[i(411)](Dn[i(204)][i(430)],new T([0,0,0,0,154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149,s>>>24,s>>>16&255,s>>>8&255,255&s,...e]))}return this[i(432)][i(440)]===i(273)?Dn[i(411)](Dn[i(204)][i(430)],new T([1,0,0,0,16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75,0,0,0,1,...this.drm.config[t[0][i(469)]][i(479)],0,0,0,0])):this[i(432)][i(440)]===i(286)?null:void console[i(370)](i(297)+this[i(432)].keySystem)}[vn(314)](t){const i=vn;let e,s,n=this[i(432)][i(366)][t];return"cbcs"===n.encryption?(e=new T([16,...n.iv]),s=25):(e=new T([]),s=0),Dn[i(411)](Dn[i(204)].tenc,new T([1,0,0,0,0,s,1,this[i(199)][t],...n[i(479)],...e]))}[vn(392)](t){return Dn[vn(411)](Dn.types.saiz,new T([0,0,0,0,t,0,0,0,1]))}[vn(364)](t){const i=vn;return Dn[i(411)](Dn[i(204)][i(364)],new T([0,0,0,0,0,0,0,1,t>>>24,t>>>16&255,t>>>8&255,255&t]))}[vn(363)](t,i){const e=vn;let s=null;return t&&(1!==t[e(294)]&&console[e(370)](e(424)+t[e(294)]+e(413)),s=t[0][e(195)]),s&&s[e(442)]?Dn[e(411)](Dn[e(204)][e(363)],new T([0,0,0,i?2:0,0,0,0,1,...s])):Dn[e(411)](Dn[e(204)][e(363)],new T([0,0,0,0,0,0,0,1]))}[vn(271)](t,i,e){const s=vn,n=this[s(216)](t,i,e);let r=new T(Dn[s(341)][s(442)]+n.byteLength);return r.set(Dn[s(341)]),r[s(311)](n,Dn[s(341)].byteLength),r}constructor(t){var i,e;const s=vn;this[s(432)]=t,this[s(199)]={video:(null==(i=t[s(366)][s(434)])?void 0:i.encryption)===s(306)?16:0,audio:(null==(e=t[s(366)][s(451)])?void 0:e.encryption)===s(306)?16:0},Dn.types={avc1:[],encv:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],Opus:[],dOps:[],enca:[],mvex:[],mvhd:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[],pssh:[],sinf:[],frma:[],schm:[],schi:[],tenc:[],saiz:[],saio:[],senc:[]};for(let t in Dn[s(204)])Dn[s(204)][t]=[t[s(431)](0),t[s(431)](1),t.charCodeAt(2),t[s(431)](3)];const n=new T([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),r=new T([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);Dn[s(476)]={video:n,audio:r};const o=new T([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),h=new T([0,0,0,0,0,0,0,0]);Dn[s(443)]=Dn[s(268)]=Dn[s(463)]=h,Dn[s(348)]=new T([0,0,0,0,0,0,0,0,0,0,0,0]),Dn[s(217)]=new T([0,0,0,1,0,0,0,0,0,0,0,0]),Dn.SMHD=new T([0,0,0,0,0,0,0,0]),Dn[s(320)]=new T([0,0,0,0,0,0,0,1]);const a=new T([105,115,111,109]),u=new T([97,118,99,49]),c=new T([0,0,0,1]);Dn[s(341)]=Dn[s(411)](Dn[s(204)][s(367)],a,c,a,u),Dn.DINF=Dn[s(411)](Dn[s(204)][s(272)],Dn[s(411)](Dn[s(204)].dref,o))}}let En=1;class kn{static[vn(209)](){return En++}[vn(250)](){const t=vn;this[t(274)][t(215)]=0,this.mp4track[t(446)]=[]}[vn(258)](){const t=vn;return!(!this.readyToDecode||!this[t(446)][t(294)])}constructor(){this[vn(283)]=1}}class Ln extends kn{resetTrack(){const t=vn;this[t(283)]=1,this[t(223)]=0,this[t(237)]=0}[vn(406)](t,i,e){const s=vn;if(t.length>0)for(let n=0;n<t[s(294)];n++){let r=t[n],o=r[s(276)],h=o[s(442)];this.samples.push({units:o,size:h,duration:r.duration,sampleAuxInfo:i,timestamp:e}),this[s(274)][s(215)]+=h}}[vn(248)](){const t=vn;if(!this[t(446)])return null;let i,e=this[t(274)][t(446)];for(;this.samples[t(294)];){let s=this[t(446)][t(233)](),n=(1e3*s[t(385)]|0)-this.nextDts|0;n<5&&(n=5),this.dts=this.nextDts,this[t(223)]+=n,i={size:s.size,duration:n,cts:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1},sampleAuxInfo:s[t(195)]};let r=new T(s.size);return r[t(311)](s.units,0),e.push(i),new T(r.buffer,0,s[t(483)])}return null}constructor(t){const i=vn;super(),this[i(435)]=!0,this[i(223)]=0,this[i(237)]=0,this[i(274)]={id:kn[i(209)](),type:"audio",channelCount:2,audiosamplerate:48e3,len:0,fragmented:!0,timescale:t,duration:t,samples:[],codec:i(388),encrypted:!0},this[i(446)]=[]}}class xn extends kn{[vn(426)](){const t=vn;this[t(283)]=1,this.readyToDecode=!1,this[t(274)].sps="",this[t(274)][t(362)]="",this[t(223)]=0,this[t(237)]=0}[vn(406)](t,i,e){const s=vn;for(let n of t){let t=[],r=0;for(let i of n[s(276)])this.h264[s(368)](i)&&(t[s(462)](i),r+=i.getSize());t[s(294)]>0&&this[s(435)]&&(this[s(274)][s(215)]+=r,this[s(446)][s(462)]({units:t,size:r,keyFrame:n.keyFrame,duration:n[s(191)],sampleAuxInfo:i,timestamp:e}))}}[vn(248)](){const t=vn;if(!this[t(258)]()||!this.samples)return null;let i,e=this[t(274)][t(446)],n=this.samples[t(233)](),r=n[t(276)],o=(1e3*n.timestamp|0)-this[t(223)]|0;o<5&&(o=5),s[t(251)]&&o>5e3&&console[t(383)]("timestamp gap: "+(o/1e3|0)+" s"),this[t(237)]=this[t(223)],this.nextDts+=o,i={size:n[t(483)],duration:o,cts:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,isNonSync:n[t(275)]?0:1,dependsOn:n.keyFrame?2:1},sampleAuxInfo:n[t(195)]};let h=0;for(const i of r)h+=i[t(349)]();let a=0,u=new T(h);for(const i of r)u[t(311)](i[t(343)](),a),a+=i[t(349)]();return e[t(462)](i),new T(u[t(492)],0,h)}constructor(t,i){const e=vn;super(),this[e(435)]=!1,this.nextDts=0,this[e(237)]=0,this[e(477)]=i,this.mp4track={id:kn[e(209)](),type:e(434),len:0,fragmented:!0,sps:"",pps:"",width:0,height:0,timescale:t,duration:t,samples:[],encrypted:!0},this[e(446)]=[],this[e(220)]=new Nn(this)}}class Cn extends In{addTrack(t){const i=vn;(t===i(434)||"both"===t)&&(this[i(414)][i(434)]=new xn(this[i(393)],this.videoElement),this[i(480)][i(462)](i(434))),(t===i(451)||t===i(303))&&(this[i(414)][i(451)]=new Ln(this.timescale),this[i(480)][i(462)](i(451)))}reset(){const t=vn;for(let i of this[t(480)])this[t(414)][i][t(426)]();this[t(489)]=!1}[vn(355)](){const t=vn;this[t(414)]={},this[t(490)]()}[vn(250)](){const t=vn;if(this[t(489)])for(let i of this[t(480)]){let e=this[t(414)][i];for(;;){let s=e.getFramePayload();if(!s||!s[t(442)])break;let n={type:i,payload:pn(this[t(375)][t(460)](e[t(283)]++,e[t(237)],e[t(274)]),this[t(375)][t(458)](s)),dts:e[t(237)]};this[t(255)](t(492),n),e[t(250)]()}}else this[t(258)]()&&(this[t(255)](t(205)),this[t(271)](),this[t(489)]=!0,this[t(250)]())}initSegment(){const t=vn;for(let i of this[t(480)]){let e=this[t(414)][i],s={type:i,payload:this[t(375)][t(271)]([e[t(274)]],this[t(433)],this[t(393)])};this.dispatch(t(492),s)}}isReady(){const t=vn;for(let i of this.trackTypes)if(!this[t(414)][i][t(435)]||!this[t(414)][i].samples[t(294)])return!1;return!0}[vn(406)](t){const i=vn;for(let e of this[i(480)]){let s=t[e];s.length>0&&this[i(414)][e][i(406)](s,e===i(451)?t[i(225)]:t.videoSampleAuxInfo,t[i(385)])}this.flush()}constructor(t,i){const e=vn;super(e(345)),this.initialized=!1,this.trackTypes=[],this[e(414)]={},this[e(393)]=1e3,this.mediaDuration=0,this[e(477)]=t,this[e(375)]=i}}class jn extends In{[vn(355)](){const t=vn;this[t(401)]=null,this[t(254)]=null;try{this.sourceBuffer&&(this[t(310)][t(186)](),this[t(218)].removeSourceBuffer(this[t(310)]),this[t(310)]=null)}catch(t){}this.offAll()}[vn(475)](){const t=vn;if(this.queue[t(294)]&&this[t(310)]&&!this[t(310)].updating){if(this[t(310)].buffered[t(294)]>1){for(let i=0;i<this[t(310)].buffered[t(294)];++i){const e=i<this[t(310)].buffered[t(294)]-1;s[t(251)]&&console[t(383)](t(445)+i+(e?" (remove)":"")+": "+this[t(310)][t(269)][t(326)](i)+t(325)+this[t(310)][t(269)][t(376)](i)),e&&this.sourceBuffer[t(482)](this[t(310)][t(269)].start(i),this[t(310)].buffered[t(376)](i))}if(this.sourceBuffer[t(378)])return}try{this[t(310)][t(491)](this[t(401)]),this.queue=new T}catch(i){this[t(255)](t(370),{type:this[t(469)],name:t(352),error:i})}}}[vn(371)](t){const i=vn;if(this[i(254)]&&(this.dbgQueue=pn(this[i(254)],t),100==++this[i(404)])){const t=(new Date)[i(344)]().substring(0,19)[i(454)](":","-"),e=this.type+"-"+t+".mp4";s.downloadToFile(this[i(254)],e),this[i(254)]=null}this[i(197)]||(this[i(401)]=pn(this[i(401)],t)),this.doAppend()}constructor(t,i,e){const n=vn;super(n(492)),this[n(469)]=i,this.queue=new T,s[n(319)]&&(this[n(254)]=new T,this[n(404)]=0),this.sourceBuffer=t,this[n(218)]=e,this[n(197)]=!1,this[n(310)].addEventListener(n(370),(t=>{const i=n;console.warn(i(201),t,this.type),this[i(197)]=!0,this[i(255)](i(370),{type:this[i(469)],name:"buffer",error:i(292)})}))}}class On extends In{static isSupported(t){const i=vn;return s[i(202)]?s.ManagedMediaSource[i(497)](t):!!s[i(384)]&&s.MediaSource[i(497)](t)}[vn(322)](){const t=vn;typeof this.options.node===t(302)&&""==this.options[t(450)]&&console[t(370)](t(473)),this[t(234)]=!1,this.setupMSE()}setupMSE(){const t=vn;if(!s[t(202)]&&!s[t(384)])throw t(452);s.ManagedMediaSource?(this.node[t(427)]=!0,this[t(327)]=new ManagedMediaSource):this[t(327)]=new MediaSource,this[t(284)]=URL[t(244)](this[t(327)]),this.node[t(485)]=this[t(284)],this[t(277)]=!1,this[t(327)][t(331)](t(338),this.onMSEOpen[t(308)](this)),this.mediaSource.addEventListener("sourceclose",this[t(241)][t(308)](this)),this[t(327)][t(331)]("webkitsourceopen",this[t(194)][t(308)](this)),this.mediaSource[t(331)](t(240),this[t(241)].bind(this)),this[t(327)][t(331)]("error",(function(i){const e=t;console[e(370)](e(287),i[e(226)])}))}[vn(227)](){const t=vn;if(!this[t(277)])try{this.mseEnded=!0,this[t(327)][t(185)]===t(399)&&this[t(327)][t(261)]()}catch(i){console[t(370)]("mediasource is not available to end: ",i)}}[vn(359)](){this[vn(410)]=!0}[vn(371)](t){const i=vn;let e={video:[],audio:[]};if(this[i(197)]||this[i(277)]||!t||!this[i(423)])return-1;if(t[i(434)]){e.timestamp=t.timestamp;const s=this[i(190)](t.videoSampleAuxInfo,this.mp4[i(199)][i(434)]),n=s!=t[i(434)][i(442)];let r=Nn[i(360)](t[i(434)],n);if(!r[i(206)]||r[i(260)].length<1)return 0;if(this.waitingForIdr){if(!r[i(412)])return 0;this[i(410)]=!1}if(!mn&&t[i(278)]){const e=r[i(260)][i(188)](((t,e)=>t+4+e[i(442)]),0);e!==s&&this[i(400)](t[i(278)],this.mp4[i(199)][i(434)],e-s)}e[i(434)]=this[i(335)](r[i(260)]),e[i(278)]=t[i(278)]}return t[i(451)]&&(e[i(385)]=t[i(385)],e[i(451)]=[{units:t.audio}],e.audioSampleAuxInfo=t[i(225)]),t[i(434)]||t[i(451)]?(this[i(423)][i(406)](e),0):(console.error(i(361)),0)}[vn(335)](t){const i=vn;let e=[],s=[],n=!1,r=!1;for(let o of t){let t=new Tn(o);t.type()!==Tn.IDR&&t[i(469)]()!==Tn.NDR||Nn[i(448)](t),e[i(294)]&&r&&(t[i(387)]||!t[i(495)])&&(s[i(462)]({units:e,keyFrame:n}),e=[],n=!1,r=!1),e[i(462)](t),n=n||t[i(459)](),r=r||t[i(495)]}if(e[i(294)])if(r)s[i(462)]({units:e,keyFrame:n});else{let t=s[i(294)]-1;t>=0&&(s[t].units=s[t][i(276)].concat(e))}return 1!==s[i(294)]&&console[i(230)](i(207)+s[i(294)]),s}[vn(190)](t,i){const e=vn;if(!t)return 0;const s=(t[0]<<8)+t[1],n=i+2+4;let r=0,o=2;for(;0<s&&o+n<=t[e(442)];){o+=i;const e=(t[o]<<8)+t[o+1],s=(t[o+2]<<24)+(t[o+3]<<16)+(t[o+4]<<8)+t[o+5];o+=6,r+=e+s}return r}patchSampleAuxinfo(t,i,e){const s=vn;let n=2;if(0<(t[0]<<8)+t[1]&&n+(i+2+4)<=t[s(442)]){n+=i;let s=(t[n]<<8)+t[n+1];s+=e,s>=0&&(t[n]=s>>>8&255,t[n+1]=255&s)}return 0}[vn(382)](){const t=vn;if(this[t(234)]&&this[t(423)]&&this[t(423)].isReady()&&!this.bufferControllers){this.bufferControllers={};for(let i in this[t(423)][t(414)]){let e=this[t(423)][t(414)][i];const n="".concat(i,t(317))[t(365)](e[t(274)][t(449)],'"');if(s.clRtcDrmDebugLog&&console[t(383)](t(312),n),!On[t(408)](n))return console[t(370)](t(372)),!1;let r=this[t(327)][t(350)](n);this[t(398)][i]=new jn(r,i,this[t(327)]),this.bufferControllers[i].on(t(370),this[t(403)][t(308)](this))}}}[vn(313)](){const t=vn;for(let i in this[t(398)])this[t(398)][i].doAppend()}onBuffer(t){const i=vn;this[i(234)]&&this[i(398)]&&this[i(398)][t.type]&&this[i(398)][t[i(469)]][i(371)](t[i(214)])}[vn(194)](){const t=vn;s[t(251)]&&console.info("[MSE] sourceopen"),this[t(327)][t(185)]!==t(281)&&(this.mediaSource.duration=Number[t(391)],this[t(234)]=!0,"function"==typeof this[t(379)][t(336)]&&this[t(379)].onReady[t(394)](null,this[t(466)]),URL[t(235)](this.url),this[t(382)]())}[vn(241)](){const t=vn;s.clRtcDrmDebugLog&&console[t(383)](t(441)),this.mseReady=!1,this[t(227)]()}[vn(403)](t){const i=vn;console.warn(i(351),t),this.irrecoverableError=!0,this[i(227)](),"function"==typeof this[i(379)][i(266)]&&this[i(379)][i(266)][i(394)](null,t)}constructor(t){const i=vn;super(i(397)),this[i(197)]=!1,this[i(410)]=!0,this[i(466)]=!1,this[i(234)]=!1,this.mseEnded=!1,this[i(379)]=_[i(189)]({},{node:"",mode:"video",debug:!1,onReady:function(){},onError:function(t){}},t),this[i(450)]=typeof this.options[i(450)]===i(302)?h[i(472)](this.options.node):this[i(379)].node,this[i(432)]=t.drm,this.mp4=new Dn(this.drm),this[i(423)]=new Cn(this.node,this[i(375)]),this[i(423)].addTrack(this[i(379)][i(461)]),this[i(423)].on(i(492),this[i(456)].bind(this)),this[i(423)].on(i(205),this[i(382)][i(308)](this)),this.initBrowser()}}function Rn(t,i){const e=Pn();return(Rn=function(t,i){return e[t-=222]})(t,i)}function Pn(){const t=["Xf","1634635aeNfVS","4rWkceo","1051qHPzyB","314juHkBI","7752096GfpyFE","1023208nKrJjX","2137269uUqtNM","303058KNxeBb","1097196nHglzA"];return(Pn=function(){return t})()}!function(){const t=Rn,i=Pn();for(;;)try{if(C(t(228))/1*(-C(t(229))/2)+-C(t(222))/3*(C(t(227))/4)+C(t(226))/5+C(t(224))/6+C(t(223))/7+-C(t(231))/8+C(t(230))/9==409100)break;i.push(i.shift())}catch(t){i.push(i.shift())}}();const zn=Bn;function Bn(t,i){const e=Yn();return(Bn=function(t,i){return e[t-=460]})(t,i)}!function(){const t=Bn,i=Yn();for(;;)try{if(-C(t(471))/1*(-C(t(474))/2)+C(t(479))/3+C(t(473))/4*(C(t(461))/5)+C(t(487))/6+-C(t(467))/7+-C(t(482))/8+-C(t(464))/9==139726)break;i.push(i.shift())}catch(t){i.push(i.shift())}}();const Un="CrsCCAMSEKDc0WAwLAQT1SB2ogyBJEwYv4Tx7gUijgIwggEKAoIBAQC8Xc/GTRwZDtlnBThq8"+zn(462)+"wyoYOE+M/t1oIbccwlTQ7o+BpV1X6TB7fxFyx1jsBtRsBWphU65w121zqmSiwzZzJ4xsXVQCJ"+zn(460)+zn(476)+zn(480)+zn(484)+zn(485)+"7hyskG5ZLAyJMzTvgnV3D8/I5Y6mCFBPb/+/Ri+9bEvquPF3Ff9ip3yEHu9mcQeEYCeGe9zR/27eI5MATX39gYtCnn7dDXVxo4/rCYK0A4VemC3HRai2X3pSGcsKY7+6we7h4IycjqtuGtYg8A"+zn(475)+"RL9KsD0v7ysBQVdUXEbJotcFz71tI5qc3jwr6GjYIPA3VzusD17PN6AGQniMwxJV12z/EgnUo"+zn(477),Qn=T[zn(478)](s[zn(470)](Un),(t=>t.charCodeAt(0)));class Fn{[zn(469)](){return this[zn(488)]}[zn(483)](){const t=zn;switch(this[t(488)]){case t(489):return"https://lic.staging.drmtoday.com";case t(465):return t(481);default:return t(466)}}certificate(){return Qn}constructor(t){this[zn(488)]=t}}function Yn(){const t=["development","https://lic.drmtoday.com","462553oMrSQp","Staging","toString","atob","20047HjYCpd","Development","52chMPdC","6mbMcSk","baigovcoURAZcr1d/G0rpREjLdVLG0Gjqk63Gx688W5gh3TKemsK3R1jV0dOfj3e6uV/kTpsN","+vwmV2/NJWxKqHBKdL9JqvOnNiQUF0hDI7Wf8Wb63RYSXKE27Ky31hKgx1wuq7TTWkA+kHnJT","pcFB13osydpD2AaDsgWo5RWJcNf+fzCgtUQx/0Au9+xVm5LQBdv8Ja4f2oiHN3dw","from","146355HhTpSB","UrTEfQxfPR4dJTquE+IDLAi5yeVVxzbAgMBAAE6DGNhc3RsYWJzLmNvbUABEoADMmGXpXg/0q","https://lic.test.drmtoday.com","501688OkVRMl","baseUrl","xUuwokpsqVIHZrJfu62ar+BF8UVUKdK5oYQoiTZd9OzK3kr29kqGGk3lSgM0/p499p/FUL8oH","HzgsJ7Hajdsyzn0Vs3+VysAgaJAkXZ+k+N6Ka0WBiZlCtcunVJDiHQbz1sF9GvcePUUi2fM/h","Production","1063410zFUyaf","name","staging","pQnNI61gzHO42XZOMuxytMm0F6puNHTTqhyY3Z290YqvSDdOB+UY5QJuXJgjhvOUD9+oaLlvT","93365ZJpndd","V382D1oJAM0F/YgCQtNDLz7vTWJ+QskNGi5Dd2qzO4s48Cnx5BLvL4H0xCRSw2Ed6ekHSdrRU","production","2343546YgIYCY"];return(Yn=function(){return t})()}function Vn(t,i){const e=Gn();return(Vn=function(t,i){return e[t-=325]})(t,i)}function Gn(){const t=["1052499bnJBHn","cenc","4222tSxFth","Unsupported SampleAuxInfo version","12980Tusgux","3160ZwXFcU","40030ewyARR","16lkTHRT","1199124lbwxEr","data","105TSrukA","getUint8","12bBEpge","SampleAuxInfo corrupted (postfix not found)","getUint16","error","85265ZYYyUv","buffer","3616548TKdsLX","subarray","byteLength","SampleAuxInfo corrupted"];return(Gn=function(){return t})()}function Wn(t,i){const e=qn();return(Wn=function(t,i){return e[t-=295]})(t,i)}Fn[zn(468)]=new Fn(zn(489)),Fn[zn(486)]=new Fn(zn(463)),Fn[zn(472)]=new Fn(zn(465)),function(){const t=Vn,i=Gn();for(;;)try{if(C(t(328))/1+-C(t(332))/2*(-C(t(336))/3)+-C(t(338))/4*(-C(t(342))/5)+-C(t(344))/6+-C(t(326))/7*(C(t(333))/8)+C(t(334))/9+C(t(331))/10*(C(t(330))/11)==358550)break;i.push(i.shift())}catch(t){i.push(i.shift())}}(),function(){const t=Wn,i=qn();for(;;)try{if(C(t(305))/1*(-C(t(297))/2)+-C(t(295))/3+C(t(310))/4*(C(t(309))/5)+-C(t(304))/6*(C(t(296))/7)+C(t(307))/8*(-C(t(298))/9)+-C(t(301))/10*(C(t(302))/11)+-C(t(300))/12*(-C(t(308))/13)==178039)break;i.push(i.shift())}catch(t){i.push(i.shift())}}();const Zn=[];let Hn=null,Xn=0;function qn(){const t=["31476hbBsvr","850RxzAPl","4180KczaCN","push","156MUFuvQ","96571jvhWaB","buffer","26232BkewNd","4303YGAqiP","5yhGpFn","1137036pzCnTd","1035942NcoZLh","94073eTaQjy","2bXtEms","414snfiTE","slice"];return(qn=function(){return t})()}const Kn=er;function Jn(){const t=["Data does not seem to be UTF-16 encoded!","No init data available!","getElementsByTagName","min","14BFNrBA","keystatuseschange","catch","childNodes","internal-error","Failed to reuse previous EME session: ","output-downscaled","expired","bind","5576688EKOFOG","has","length","License acquisition failed with error ","arrayBuffer","apply","CDM error generating license request: ","<Challenge","No PR challenge data!","then","license","createSession","warn","[PR] License fetched:","text/xml","clRtcDrmDebugLog","push","encode","max","json"," is not ","replace","target","rtcdrmerror","update","fromCharCode","subarray","2993694njpqat","4002692oINhTV","Content-Type","1347492MkzfDC","Data has an incorrect length, must be even.","addEventListener","buffer","onFetch","generateRequest","initData","dispatchEvent","atob","No clear key test key provided!","Challenge","New lic will be requested","oct","BYTES_PER_ELEMENT","sessionId","usable for decryption (status: ","[WV] License fetched:","Key ","5MtuOVr","byteLength","744563CKOUzg","load","floor","error","decode","indexOf","info","isSafari","edef8ba979d64acea3c827dcd51d21ed","mediaKeys","Previous lic will be reused","charCodeAt","licenseUrl","status","Failed to update the session: ","log","keyStatuses","temporary","9a04f07998404286ab92e65be0885f95","output-restricted","nodeValue","btoa","message","EME createSession() failed - no DRM available","5977680uUTwUr","getUint16","[PR] Challenge node not found","A128KW","3974463jrELhf","Failed to update the session","stringify","[EME]","delete","No media keys for media element!","set","2nMQfRz"];return(Jn=function(){return t})()}!function(){const t=er,i=Jn();for(;;)try{if(-C(t(419))/1*(C(t(454))/2)+C(t(495))/3+C(t(496))/4*(-C(t(417))/5)+-C(t(498))/6*(-C(t(459))/7)+C(t(468))/8+-C(t(447))/9+C(t(443))/10==555073)break;i.push(i.shift())}catch(t){i.push(i.shift())}}();let $n={licenseUrl:"",onFetch:void 0};const tr={},ir=(t,i,e)=>(void 0===i&&(i=0),void 0===e&&(e=1/0),((t,i,e)=>{const s=er,n=T[s(511)];i*=n,e*=n;const r=(a=t)instanceof ArrayBuffer?a:a[er(501)],o=t[s(418)],h=i;var a;let u=x[s(486)](0,x[s(458)](h,o)),c=x[s(458)](u+x[s(486)](e,0),o);return u/=n,c/=n,new T(r,u,c-u)})(t,i,e));function er(t,i){const e=Jn();return(er=function(t,i){return e[t-=417]})(t,i)}const sr=t=>{const i=er;let e="";for(const s of t){let t=s.toString(16);1==t[i(470)]&&(t="0"+t),e+=t}return e};let nr=null;const rr=t=>{const i=er;return s[i(440)](String[i(493)][i(473)](null,t))[i(489)](/\+/g,"-")[i(489)](/\//g,"_")[i(489)](/=*$/,"")},or=(t,i)=>{const e=er,s=(t=>{const i=er,e=JSON.parse((new TextDecoder)[i(423)](t));if(console[i(434)]("CK license request:",e),null===nr)throw new g(i(507));const s=[];for(const t of e.kids){const e={kty:i(510),alg:i(446),kid:t,k:rr(nr)};s[i(484)](e)}return(new TextEncoder)[i(485)](JSON[i(449)]({keys:s}))})(i.message);i[e(490)][e(492)](s)[e(461)]((function(t){const i=e;console[i(422)](i(448),t)}))},hr=t=>{const i=er,e=s[i(506)](t[i(489)](/-/g,"+")[i(489)](/_/g,"/")),n=new T(e[i(470)]);for(let t=0;t<e.length;++t)n[t]=e[i(430)](t);return n},ar=function(t,i){for(var e=arguments.length,s=new Array(e>2?e-2:0),n=2;n<e;n++)s[n-2]=arguments[n];return en(void 0,[t,i,...s],void 0,(function*(t,i,e){void 0===e&&(e=!1);const s=er,n=new Headers(tr);e&&n.append(s(497),s(482));const r={method:"POST",headers:n,body:i},o=yield $n[s(502)]?$n[s(502)](t,r):fetch(t,r);if(!o.ok)throw new g(s(471)+o[s(432)]);return o}))},ur=(t,i)=>{const e=er;ar($n[e(431)],i[e(441)])[e(477)]((t=>t[e(487)]()))[e(477)]((t=>{const n=e;s[n(483)]&&console.info(n(514),t.license);const r=hr(t[n(478)])[n(501)];i[n(490)][n(492)](r)[n(461)]((t=>{console[n(422)]("Failed to update the session",t)}))}))[e(461)]((i=>{const s=e;t.dispatchEvent(new CustomEvent(s(491),{detail:{message:""+i}})),console[s(422)](i)}))},cr=(t,i)=>{const e=er,n=((t,i)=>{const e=er,s=new DOMParser;try{const t=function(t,i,e){void 0===e&&(e=!1);const s=er;if(!t)return"";let n=t;if(!e&&n.byteLength%2!=0)throw console[s(422)](s(499)),new g(s(455));const r=ir(n);let o;if((255===r[0]&&254===r[1]||254===r[0]&&255===r[1])&&(n=r[s(494)](2)),n instanceof ArrayBuffer)o=n;else{const t=new T(n[s(418)]);t[s(453)](ir(n)),o=t[s(501)]}const h=x[s(421)](n.byteLength/2),a=new Uint16Array(h),u=new DataView(o);for(let t=0;t<h;t++)a[t]=u[s(444)](2*t,i);return function(t){const i=er;let e="";for(let s=0;s<t[i(470)];s+=16e3){const n=t[i(494)](s,s+16e3);e+=String[i(493)].apply(null,n)}return e}(a)}(i,!0);if(t[e(424)](e(475))>-1){const i=s.parseFromString(t,e(482))[e(457)](e(508))[0][e(462)][0][e(439)];if(null===i)throw new g("No PR challenge data!");return hr(i)}console[e(480)](e(445))}catch(i){t.dispatchEvent(new CustomEvent(e(491),{detail:{message:""+i}})),console.error(i)}return null})(t,i.message);if(null===n)return t[e(505)](new CustomEvent("rtcdrmerror",{detail:{message:"No PR challenge data!"}})),void console.error(e(476));ar($n[e(431)],n[e(501)],!0)[e(477)]((t=>t[e(472)]()))[e(477)]((n=>{const r=e;s[r(483)]&&console[r(425)](r(481),n),i[r(490)].update(n)[r(461)]((function(i){const e=r;t[e(505)](new CustomEvent(e(491),{detail:{message:e(433)+i}})),console[e(422)](e(448),i)}))}))[e(461)]((i=>{const s=e;t.dispatchEvent(new CustomEvent("rtcdrmerror",{detail:{message:""+i}})),console[s(422)](i)}))},lr=(t,i)=>{const e=er;ar($n[e(431)],i[e(441)])[e(477)]((t=>{const i=e,n=t.text();return s[i(483)]&&console.info("[FPS] License fetched:",t,n),n}))[e(477)]((t=>{const s=e;i[s(490)][s(492)](hr(t))}))[e(461)]((i=>{const s=e;t.dispatchEvent(new CustomEvent(s(491),{detail:{message:""+i}})),console[s(422)](i)}))},dr=(t,i)=>{tr[t]=i},fr=_n[Kn(426)];let gr=!fr;const _r=new Map;function vr(t){return en(this,void 0,void 0,(function*(){const i=er;if(null===t[i(504)])throw new g(i(456));const e=t[i(490)];if(null===e)throw new g("No media element available!");const n=e[i(428)];if(null===n)throw new g(i(452));const r=sr(new T(t[i(504)])),o=r+e.id;let h=null;_r[i(469)](o)&&(h=_r.get(o),null!=h&&h.close(),_r[i(451)](o)),s[i(483)]&&console[i(425)](i(450),i(h?429:509));let a=null;try{a=n[i(479)](gr?"persistent-license":"temporary")}catch(t){console[i(434)]("EME createSession(persistent) failed:",t)}if(!a&&gr){gr=!1;try{a=n[i(479)](i(436))}catch(t){console[i(422)]("EME createSession(temporary) failed:",t)}}if(a)if(a[i(500)](i(460),(t=>{const s=i;t[s(490)][s(435)].forEach(((t,i)=>{const n=s;(t===n(466)||t===n(438)||t===n(465)||t===n(463))&&e[n(505)](new CustomEvent(n(491),{detail:{message:n(515)+sr(new T(i))+n(488)+(n(513)+t+")"),keyId:i}}))}))})),fr?a.addEventListener(i(441),lr[i(467)](null,e),!1):-1!==r[i(424)](i(427))?a.addEventListener(i(441),ur[i(467)](null,e),!1):-1!==r[i(424)](i(437))?a[i(500)](i(441),cr[i(467)](null,e),!1):a.addEventListener("message",or[i(467)](null,e),!1),h)try{(yield a[i(420)](h[i(512)]))?_r[i(453)](o,a):e.dispatchEvent(new CustomEvent(i(491),{detail:{message:"Failed to load previous EME session"}}))}catch(t){e[i(505)](new CustomEvent(i(491),{detail:{message:i(464)+t}}))}else a[i(503)](t.initDataType,t[i(504)]).then((()=>{gr&&_r[i(453)](o,a)}))[i(461)]((t=>{const s=i;e[s(505)](new CustomEvent(s(491),{detail:{message:s(474)+t}}))}));else e[i(505)](new CustomEvent(i(491),{detail:{message:i(442)}}))}))}const wr=Br;function mr(){const t=[" too close to seek, ","fpsCertificateUrl","9880640TWxZrg","H264","ignoreAudio","Unable to create Worker!","createMediaKeys(",", restart required: ","/license-proxy-headerauth/drmtoday/RightsManager.asmx","6236Nwzlef","worker","serverCertificateUrl","serverCertificate","seq",",255]).buffer,idrFrames.push(new Uint8Array([0,0,0,1,39,100,0,13,172,87,5,6,100,0,0,0,1,40,238,60,176,0,0,0,1,37,","ClearKey","No valid DRM config found, call rtcDrmConfigure first.","sessionId","toISOString","indexOf","robustness","isInteger","info","includes","Development","slice","16niaptx"," frame","video/mp4","isArray","Android","end","PlayReady","streamType","1772WtcYWF","]: ","Frame gap: ","nextKeyFrameAllowedTime","use rtcDrmFeedFrame to push frames manually","Error recovery attempted","merchant","FairPlay","requestMediaKeySystemAccess(","pipeThrough","/license-server-fairplay/","isChrome","type","MSE (re)init","const DUMMY_IDR_FRAME_SLICE_HDR0=new Uint8Array([32,0,203]),DUMMY_IDR_FRAME_SLICE_HDR1=new Uint8Array([16,0,50]);","DRM config env value must be one of: ","length","GOP is getting too long, requesting a new key frame","Worker","let brokenFrame=null,idrFrames=[];function initializeDummyFrames(){brokenFrame=new Uint8Array([0,0,0,1,65,154,255","srcObject","RTCRtpScriptTransform","),idrFrames.push(idrFrames[0].slice());let $=new Uint8Array(idrFrames[1]);$.set([16,0,50],27)}let idrPicIdToggle=","now"," to ","join","setServerCertificate","audioCapabilities","lastKeyFrameTime","prevSeqNum"," seeking from ",".experiment","clRtcDrmDebugLog","Server certificate fetch failed with error ","isFirefox","org.w3.clearkey","x-dt-custom-data","jitterBufferTarget","playbackRate","enabled","keyFrameNeeded","createEncodedStreams","wvCertificateUrl","key","sai","Discarding corrupted video frame (too small)",'gle^=1]}function audioTransformFunction($,e){postMessage({streamType:"audio",frame:{timestamp:$.timestamp,data:$.',"H264 is the only supported video codec.","com.microsoft.playready.recommendation"," will be used","DRM config iv must be an instance of 16-byte long Uint8Array.","encryption","0;function generateDummyFrame($){return(brokenFrame||initializeDummyFrames(),$)?brokenFrame:idrFrames[idrPicIdTog","toString","message","status","bytesSinceKey","currentTime","supportsRtpScriptTransform","1585647fRskxG","audioElement","track","sinf","createObjectURL","enqueue","Invalid videoElement, it must be an instance of HTMLVideoElement.","7302558TqFWae","pipeTo","SampleAuxInfo extraction failed (video)","isEdge","keys","not-allowed","rtcdrmerror","btoa","?audioTransformFunction:videoTransformFunction});e.pipeThrough(a).pipeTo(x)}self.RTCTransformEvent&&(self.onrtctr",", a1d1f1 is recommended).","reportDiscontinuity","onFetch","keyId","sessionTypes","). Edge only supports PlayReady, Widevine and ClearKey.","audioEncrypted","audioStartTimestamp","frame","videoStartTimestamp","184,32,0,203,255,38,29,217,24,192,161,96,0,0,12,229,174,166,6,7,20,3,84,0,247,96,193,181,229,128,0,32,32]).buffer","Duplicate/reordered frame, prev seq: ","ClearKey is not supported by Safari.","bind",") not found in [","DRM config robustness can only be one of: ","persistent-license","postMessage","receiver","get","both","jmuxer","Production","Blob","timestamp","cenc","emeConfig","clear","cbcs-1-9","5iKPdqC","isWindows","PlayReady license acquisition might fail without output protection enabled (sessionId is ","). Chrome only supports Widevine and ClearKey.","mediaBufferMs should be an integer.","size","certificate","prLicenseUrl","fpsLicenseUrl","/license-proxy-widevine/cenc/","4572770OAoUlm","BYTES_PER_ELEMENT","then","SW_SECURE_CRYPTO","ansform=$=>{let e=$.transformer;handleTransform(e.options.operation,e.readable,e.writable)}),onmessage=$=>{keyFra","splice","Safari doesn't support 'cenc'/AES-CTR, use 'cbcs' instead if possible.","videoElement","rtcDrmConfigure did not specify audioElement, audio will be dropped",'audio/mp4; codecs="opus"',"object","Invalid audioElement, it must be an instance of HTMLMediaElement.","keyFrameNeededPosted","debugCreateMediaDump","next","play","6591266VeIbXo","userId","jitterBufferDelayHint",'ame(keyFrameNeeded),e.enqueue($)}function handleTransform($,e,x){let a=new TransformStream({transform:"audio"===$',"dispatchEvent","reduce"," bytes, playback at ","offset","arrayBuffer","waitingForIdr","Widevine","DRM config mediaBufferMs should be an integer.","hwSecurity","authToken","audio"," bytes)","push","licenseUrl","Default transform mode enabled, ","RTCRtpScriptTransform/TransformStream will not be created, ","GET","baseUrl","video","trim","7377TdQrIK","3000","playoutDelayHint","catch","fpsCertificate","POSITIVE_INFINITY","/license-server-fairplay/cert/","DRM config:","streams","mediaBufferMs","log","codec","onmessage","Target video element (","Applying pre-configured certificate (","webkitURL","Discarding corrupted video frame (no Annex B startcode)"," requesting a new key frame (latency ","PlayReady might not support '","No target media element!","URL","set","warn","data","config","isSafari","forEach","setMediaKeys","buffered"," - ","keySystem",'data}}),e.enqueue($)}let keyFrameNeeded=!1;function videoTransformFunction($,e){postMessage({streamType:"video",f',"paused","wvCertificate","a1d1f1","2000","keyFrameRequestInterval","Several DRM configs detected, rtcDrmOnTrack have to be called with target DRM config.","error","238HZxcdH","HW_SECURE_ALL","Invalid DRM type (","buffer","x-dt-auth-token","clRtcDrmCreateMediaDump",'rame:{type:$.type,timestamp:$.timestamp,data:$.data}}),"key"===$.type&&(keyFrameNeeded=!1),$.data=generateDummyFr',"addEventListener",") failed","keyFrameLogCntr","feed","byteLength","kind","purchase","environment","videoCapabilities","requestMediaKeySystemAccess","temporary","). It has to be a string containing a JWT.","value",".. ","string"];return(mr=function(){return t})()}!function(){const t=Br,i=mr();for(;;)try{if(C(t(543))/1*(C(t(512))/2)+C(t(473))/3*(C(t(568))/4)+-C(t(672))/5*(-C(t(634))/6)+-C(t(536))/7+C(t(560))/8*(C(t(627))/9)+-C(t(682))/10+-C(t(449))/11==932877)break;i.push(i.shift())}catch(t){i.push(i.shift())}}();const pr=_n[wr(626)],Ar=_n[wr(602)],yr=_n[wr(498)],br=_n[wr(637)],Mr=_n[wr(579)],Tr=_n.platform,Sr=_n[wr(673)],Nr=br||Mr&&Tr===wr(564),Ir=1e6*(Ar?82:yr?220:120),Dr=Ar?5e3:2e3,Er=Ar?1.5:.5;function kr(t){const i=wr;return typeof t!==i(692)||null===t||t instanceof Element||t instanceof Fn?t:function(t){const i=wr;return!!((null==t?void 0:t[i(515)])instanceof ArrayBuffer&&null!=t&&t[i(683)])}(t)?t[i(559)]():Array[i(563)](t)?t[i(454)](((t,i,e)=>(t[e]=kr(i),t)),[]):t instanceof _?_[i(638)](t)[i(454)](((i,e)=>(i[e]=kr(t[e]),i)),{}):t}class Lr{constructor(t){const i=wr;this[i(545)]="",this.licenseUrl="",this[i(503)]="",this[i(669)]=[],this[i(497)]=kr(t),this[i(664)]=null,this[i(521)]=0,this[i(571)]=Date.now(),this.videoStartTimestamp=0,this.audioStartTimestamp=0,this.prevSeqNum=-1,this[i(596)]=0,this[i(624)]=0,this.keyFrameNeeded=!0,this.keyFrameNeededPosted=!1,this.keyFrameRequestInterval=Dr,this.worker=null}}const xr=new Map,Cr=new T([60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60]),jr=new T([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1]),Or=new T([213,251,214,184,46,217,62,78,249,138,228,9,49,238,51,183]);function Rr(t){const i=wr;let e=!1;if((t[i(497)].video&&"clear"!==t[i(497)].video[i(619)]&&"HW"===t.config[i(471)][i(554)]||t[i(497)][i(463)]&&t[i(497)][i(463)].encryption!==i(670)&&"HW"===t[i(497)][i(463)][i(554)])&&(e=!0),t.hwSecurity=e,function(t,i){const e=wr;void 0!==i&&(t[e(497)][e(482)]=i),(void 0===t[e(497)][e(482)]||t[e(497)].mediaBufferMs<0)&&(t.config[e(482)]=100,Ar?t[e(497)][e(482)]=350:!yr&&Sr&&(t[e(497)][e(580)]===e(566)||t[e(461)])&&(t[e(497)][e(482)]=1400))}(t,t[i(497)][i(482)]),void 0===t.config.authToken){void 0===t.config[i(450)]&&(t[i(497)][i(450)]=i(525)),void 0===t[i(497)][i(551)]&&(t.config[i(551)]=i(507));const e=s[i(641)](JSON.stringify({userId:t.config[i(450)],sessionId:t[i(497)][i(551)],merchant:t.config[i(574)]}));dr(i(604),e)}else dr(i(516),t.config[i(462)]);for(const e of[t[i(497)].audio,t[i(497)][i(471)]])e&&e[i(619)]!==i(670)&&(e[i(646)]||(e[i(646)]=jr),e.iv||(e.iv=Or));t[i(546)]=void 0,t[i(545)]="",t[i(466)]="";const n=t.config[i(526)][i(470)]();var r;if(t[i(497)][i(580)]===i(549)?(t.keySystem=i(603),nr=Cr):t.config.type===i(459)?(t[i(503)]="com.widevine.alpha",Sr&&e&&(t[i(503)]+=i(599)),t.config.wvCertificate?t[i(546)]=t[i(497)][i(506)]:t[i(497)][i(610)]?t[i(545)]=t[i(497)][i(610)]:t[i(546)]=t.config[i(526)][i(678)](),t.config.wvLicenseUrl?t[i(466)]=t[i(497)].wvLicenseUrl:t[i(466)]=n+i(681)):t[i(497)][i(580)]===i(566)?(t[i(503)]=i(616),t[i(497)][i(679)]?t.licenseUrl=t[i(497)][i(679)]:t[i(466)]=n+i(542)):t[i(497)].type===i(575)&&(t.keySystem="com.apple.fps",t.config[i(477)]?t[i(546)]=t[i(497)][i(477)]:t[i(497)][i(535)]?t.serverCertificateUrl=t.config[i(535)]:t[i(545)]=n+i(479)+t[i(497)].merchant,t[i(497)][i(680)]?t[i(466)]=t.config.fpsLicenseUrl:t.licenseUrl=n+i(578)),r={licenseUrl:t[i(466)],onFetch:t.config[i(645)]},$n=r,t[i(669)]=[],t.config[i(580)]!==i(575)){t[i(669)][i(465)]({initDataTypes:[i(668)],sessionTypes:["persistent-license",i(529)]});for(const e of[t[i(497)][i(471)],t[i(497)][i(463)]])if(e&&e.encryption!==i(670)){const s=e==t[i(497)][i(471)]?i(471):i(463);let n;t[i(497)][i(580)]===i(459)?n="HW"===e[i(554)]?i(513):i(685):"PlayReady"===t[i(497)][i(580)]&&(n="HW"===e.robustness?i(474):i(508)),s===i(471)?t[i(669)][0][i(527)]=[{contentType:'video/mp4; codecs="avc1.640032"',encryptionScheme:"cenc"===e[i(619)]?i(668):"cbcs-1-9",robustness:n||void 0}]:t[i(669)][0][i(595)]=[{contentType:i(691),encryptionScheme:e[i(619)]===i(668)?"cenc":i(671),robustness:n||void 0}]}}else t[i(669)]=[{initDataTypes:[i(630)],videoCapabilities:[{contentType:i(562),robustness:""}],distinctiveIdentifier:"not-allowed",persistentState:i(639),sessionTypes:["temporary"]}];s[i(600)]&&console.info(i(480),t)}function Pr(t){const i=wr;s[i(600)]&&console[i(556)](i(581));let e=t[i(497)].videoElement;(!t[i(497)][i(471)]||t.config[i(471)][i(619)]===i(670))&&(e=t.config.audioElement),t[i(664)]=null;const n=!t.ignoreAudio&&t[i(497)][i(463)]&&"clear"!==t[i(497)].audio[i(619)],r=t[i(497)][i(471)]&&t.config.video[i(619)]!==i(670);t[i(624)]=0,t[i(608)]=!0,t.keyFrameNeededPosted=!1,t[i(509)]=Dr,t[i(652)]=0,t[i(650)]=0,t[i(597)]=-1,t[i(596)]=0,t.jmuxer=new On({node:e,mode:n?i(r?663:463):"video",fps:60,drm:t}),yr&&t[i(497)].videoElement&&t[i(497)][i(689)][i(448)]()[i(684)]((()=>{}))[i(476)]((()=>{}))}function zr(t,i,e){const n=wr;if(t[n(497)][n(471)]&&"clear"===t.config[n(471)][n(619)])return null==e||e[n(632)](i),!1;const r=Date[n(591)]();if(i.type===n(611)){const e=s[n(600)];++t[n(521)]<(e?Number[n(478)]:5)&&(console[n(556)]((new Date)[n(552)]().slice(11,-1)+" "+i[n(580)]+", "+(i[n(496)].byteLength+n(455)+t[n(497)][n(689)][n(625)])),e&&1===t[n(521)]&&function(t,i,e){void 0===i&&(i=64),void 0===e&&(e=64);const s=wr,n=new T(t[s(496)]);let r="",o=0;for(let t=0;t<i&&t<n[s(584)];++t)r+=(n[t]<16?"0":"")+n[t].toString(16)+" ";if(o<n[s(584)])for(o<n[s(584)]-e&&(r+=s(532),o=n[s(584)]-e);o<n[s(584)];o++)r+=(n[o]<16?"0":"")+n[o][s(621)](16)+" ";console.info("["+((t[s(580)]||s(463))+s(561))+s(569)+r[s(472)]())}(i,128,8)),t[n(608)]=!1,t[n(624)]=0,t[n(571)]=r+t[n(509)]}return t[n(624)]+=i.data[n(523)],!t[n(608)]&&t[n(624)]>Ir&&(console[n(556)](n(585)),t[n(608)]=!0),t.jmuxer&&(function(t,i){const e=wr;0===t[e(652)]&&(t[e(652)]=i[e(667)],t[e(509)]=Dr,t[e(571)]=Date[e(591)]()+2e3);let n=null,r=!1;if(i.data[e(523)]<=4)console[e(495)](e(613)),r=!0;else{const s=new T(i[e(496)],0,4);0!=s[0]||0!=s[1]||0!=s[2]||1!=s[3]?(console[e(495)](e(489)),r=!0):(n=function(t,i){const e=Vn,s=new DataView(t[e(335)]),n=t.data[e(346)]-2,r=s[e(340)](n);if(r<n){let t=n-r;if(69!==s[e(337)](n-1))return console[e(341)](e(339)),null;if(s.getUint8(t++)>>>4!=1)return console[e(341)](e(329)),null;const o=new T(r-2);let h=0,a=0;for(;t<n-1;){let i=s.getUint8(t++);a>1&&3===i&&(a=0,i=s.getUint8(t++)),0!==i?a=0:++a,o[h++]=i}const u=new DataView(o[e(343)]),c=i===e(327)?16:0,l=c+2+6*u.getUint16(c);return l+2>h?(console.error(e(325)),null):{sai:o[e(345)](0,l),offset:n-r,seq:u.getUint16(l)}}return null}(i,t[e(497)][e(471)][e(619)]),!n&&(console.warn(e(636)),r=!0))}if(n)if(-1===t[e(597)]){if(i[e(580)]!==e(611))return 0;t[e(597)]=n[e(547)]}else{let o=n.seq-t[e(597)];if(o<-32767&&(o+=65536),o<=0)return s[e(600)]&&console[e(495)](e(654)+t[e(597)]+", curr: "+n[e(547)]),0;o>1&&(r=i[e(580)]!==e(611),console[e(495)](e(570)+t[e(597)]+e(502)+n[e(547)]+e(541)+r)),t.prevSeqNum=n[e(547)]}let o=0;r&&!t[e(664)][e(458)]&&(o=-1,t[e(664)][e(644)]());const h=(i[e(667)]-t[e(652)])/9e4;return n&&t[e(664)][e(522)]({video:new T(i.data,0,n[e(456)]),videoSampleAuxInfo:n[e(612)],timestamp:h})<0&&(o=-1,console[e(495)](e(573)),Pr(t)),o>=0&&"key"===i[e(580)]&&(t[e(596)]=h,console[e(483)]((new Date)[e(552)]()[e(559)](11,-1)+" kf at "+h+", playback at "+t[e(497)].videoElement[e(625)])),o}(t,i)<0?t[n(608)]=!0:function(t){const i=wr,e=t.config[i(689)];if(!e||e[i(501)][i(584)]<1||e[i(505)]||e[i(625)]<Er)return;const n=t[i(497)].mediaBufferMs;if(void 0===n||n<0)throw new g("targetLatency not set!");const r=e[i(501)][i(565)](e[i(501)][i(584)]-1),o=1e3*(r-e[i(625)])|0;if(!t[i(649)]&&function(t,i,e){const s=wr;let n;n=i<3*e>>>2?.875:i<=e?1:i<7*e>>>2?1.125:i<9*e>>>2?1.25:i<11*e>>>2?1.375:1.5,n!==t.playbackRate&&(t[s(606)]=n)}(e,o,n),!(o<n+50||o<5*n>>>2))if(t.lastKeyFrameTime>e[i(625)]+.1){const o=1e3*(r-t[i(596)])|0;o>40&&o>n-100?(s[i(600)]&&console.info((new Date).toISOString().slice(11,-1)+i(598)+(e[i(625)]+i(592)+t[i(596)]+" (")+(t.lastKeyFrameTime-e[i(625)])+")"),e[i(625)]=t[i(596)]):console[i(483)]((new Date)[i(552)]().slice(11,-1)+i(534)+o)}else!t[i(608)]&&Date[i(591)]()>t[i(571)]&&o>n+100&&o>3*n>>>1&&(s[i(600)]&&console[i(556)]((new Date).toISOString()[i(559)](11,-1)+i(490)+o+" ms)"),t[i(608)]=!0,t[i(509)]<16e3&&(t[i(509)]<<=1))}(t)),e?(!t[n(608)]||!Nr)&&(i[n(496)]=function(t){return!Hn&&function(){const t=Wn;Hn=new T([0,0,0,1,65,154,255,255]).buffer,Zn[t(303)](new T([0,0,0,1,39,100,0,13,172,87,5,6,100,0,0,0,1,40,238,60,176,0,0,0,1,37,184,32,0,203,255,38,29,217,24,192,161,96,0,0,12,229,174,166,6,7,20,3,84,0,247,96,193,181,229,128,0,32,32])[t(306)]),Zn[t(303)](Zn[0][t(299)](0)),new T(Zn[1]).set([16,0,50],27)}(),t?Hn:(Xn^=1,Zn[Xn])}(t[n(608)]),e[n(632)](i)):t[n(608)]!=t[n(445)]&&(t.worker&&t[n(544)][n(660)](t[n(608)]),t[n(445)]=t[n(608)]),t[n(608)]}function Br(t,i){const e=mr();return(Br=function(t,i){return e[t-=445]})(t,i)}function Ur(t,i,e){const s=wr;return t[s(497)][s(463)]&&t[s(497)].audio[s(619)]!==s(670)?i[s(496)][s(523)]>0&&function(t,i){const e=wr;var s;if(!t.jmuxer||t[e(538)])return 0;0===t[e(650)]&&(t[e(650)]=i[e(667)]);const n=(i[e(667)]-t.audioStartTimestamp)/48e3;if("cbcs"===(null===(s=t.config[e(463)])||void 0===s?void 0:s[e(619)]))return t[e(664)][e(522)]({audio:new T(i[e(496)]),timestamp:n});const r=function(t){const i=Vn,e=new DataView(t.data),s=t.data[i(346)]-2,n=e.getUint16(s);if(n<s){let t=s-n;if(69!==e[i(337)](s-1))return console[i(341)](i(339)),null;if(e[i(337)](t++)>>>4!=1)return console[i(341)](i(329)),null;const r=new T(n-2);let o=0;for(;t<s-1;){const s=e[i(337)](t++);if(r[o++]=s,o>=16)break}return{sai:r,offset:s-n}}return null}(i);r?t[e(664)][e(522)]({audio:new T(i[e(496)],0,r[e(456)]),audioSampleAuxInfo:r[e(612)],timestamp:n}):console[e(511)]("SampleAuxInfo extraction failed (audio)")}(t,i):e&&e[s(632)](i),!1}function Qr(t){const i=wr;if(!t||typeof t!==i(692))throw new w("Invalid config argument type, DRM config must be an object.");if(!(t[i(689)]instanceof HTMLVideoElement))throw new w(i(633));if(t[i(628)]&&!(t.audioElement instanceof HTMLMediaElement))throw new w(i(693));if(void 0!==t[i(482)]&&!Number[i(555)](t[i(482)]))throw new w(i(460));let e=!1,n=!1,r=!1;const o=["cbcs",i(668),i(670)],h=["SW","HW"];for(const s of[t[i(471)],t[i(463)]])if(s){if(!o[i(557)](s[i(619)]))throw new RangeError("DRM config encryption value must be one of: "+o[i(593)](", "));if(yr&&"cenc"===s.encryption)throw new RangeError(i(688));if(s[i(619)]!==i(670)){if(n=!0,s.keyId){if(!(s[i(646)]instanceof T)||16!==s.keyId[i(584)])throw new w("DRM config keyId must be an instance of 16-byte long Uint8Array.");r=!0}else if(yr)throw new ReferenceError(i(655));if(s.iv&&(!(s.iv instanceof T)||16!==s.iv.length))throw new w(i(618));if(s[i(554)]&&!h[i(557)](s.robustness))throw new RangeError(i(658)+h[i(593)](", "));if(s===t[i(471)]&&s[i(484)]!==i(537))throw new RangeError(i(615));yr&&s===t.audio&&"opus"===s.codec&&(e=!0,console.warn("Safari does not support Opus, audio will not be rendered.")),"PlayReady"===t[i(580)]&&(s[i(619)]!==i(668)&&console[i(495)](i(491)+s[i(619)]+"', it's safer to use 'cbcs' instead."),void 0===t.sessionId||t.sessionId[i(557)]("f1")||console.warn(i(674)+t.sessionId+i(643)))}}if(n){const e=[Fn[i(558)],Fn.Staging,Fn[i(665)]];if(!e.includes(t[i(526)]))throw new RangeError(i(583)+e.join(", "));if(t[i(462)]&&typeof t[i(462)]!==i(533))throw new w("Invalid authToken type ("+typeof t[i(462)]+i(530));if(t.type)if(yr){if(t[i(580)]!==i(575))throw new RangeError(i(514)+t[i(580)]+"). Safari only supports FairPlay.")}else if(Mr){if(t.type!==i(459)&&"ClearKey"!==t[i(580)])throw new RangeError("Invalid DRM type ("+t.type+i(675))}else if(br&&t[i(580)]!==i(566)&&"Widevine"!==t[i(580)]&&"ClearKey"!==t[i(580)])throw new RangeError(i(514)+t.type+i(648))}void 0!==t.debugLog&&(s[i(600)]=t.debugLog),void 0!==t[i(446)]&&(s[i(517)]=t[i(446)]);let a=xr.get(t[i(689)]);!a&&(a=new Lr(t),xr[i(494)](t[i(689)],a)),a.enabled=n,a[i(538)]=e,a[i(649)]=!e&&a[i(497)][i(463)]&&a[i(497)].audio.encryption!==i(670),n&&(a[i(497)].type||(a[i(497)][i(580)]=i(yr?575:459)),r||a[i(497)][i(580)]===i(549)||(a[i(497)][i(580)]=i(549)),Rr(a),function(t){en(this,void 0,void 0,(function*(){const i=Br;var e,n;let r=t[i(497)][i(689)];if((!t[i(497)][i(471)]||t[i(497)][i(471)].encryption===i(670))&&(r=t[i(497)][i(628)]),!r)throw new g(i(492));r.src="",r[i(588)]=null,yield r.setMediaKeys(null);let o=null;try{o=yield zl[i(528)](t[i(503)],t.emeConfig)}catch(t){}if(!o&&t[i(669)][0]){const s=null===(e=t[i(669)][0][i(647)])||void 0===e?void 0:e[i(553)](i(659));if(void 0!==s&&s>=0){null===(n=t.emeConfig[0].sessionTypes)||void 0===n||n[i(687)](s,1);try{o=yield zl[i(528)](t[i(503)],t[i(669)])}catch(t){}}}if(!o){const e=i(576)+t[i(503)]+i(520);return r.dispatchEvent(new CustomEvent(i(640),{detail:{message:e}})),void console[i(511)](e)}let h=null;try{h=yield o.createMediaKeys()}catch(t){}if(!h){const e=i(540)+t[i(503)]+i(520);return r[i(453)](new CustomEvent("rtcdrmerror",{detail:{message:e}})),void console[i(511)](e)}if(t.serverCertificate)s.clRtcDrmDebugLog&&console[i(556)](i(487)+t[i(546)][i(523)]+i(464)),yield h[i(594)](t[i(546)]);else if(t.serverCertificateUrl){const e={method:i(469)},n=t.serverCertificateUrl;try{const o=yield t[i(497)].onFetch?t.config[i(645)](n,e):fetch(n,e);if(!o.ok){const t=i(601)+o[i(623)];return void r[i(453)](new CustomEvent(i(640),{detail:{message:t}}))}const a=yield o[i(457)]();s.clRtcDrmDebugLog&&console[i(556)]("Fetched certificate from "+n+", "+a[i(523)]+" bytes"),yield h[i(594)](a)}catch(t){const e=t.name+": "+t[i(622)];return console.error(e),void r[i(453)](new CustomEvent(i(640),{detail:{message:e}}))}}yield r[i(500)](h),r[i(519)]("encrypted",vr),Pr(t)}))}(a)),a[i(497)][i(689)][i(519)](i(448),(function(){const t=i;a[t(497)][t(689)][t(625)]>.5&&(a[t(571)]=Date.now())}))}const Fr=wr(582)+wr(587)+wr(548)+wr(653)+wr(590)+wr(620)+wr(614)+wr(504)+wr(518)+wr(452)+wr(642)+wr(686)+"meNeeded=$.data};";function Yr(t){const i=wr;if(0===xr[i(677)])throw new w(i(550));let e;if(t&&t[i(689)])e=t[i(689)];else{if(1!==xr.size)throw new w(i(510));e=xr[i(638)]()[i(447)]()[i(531)]}const s=xr[i(662)](e);if(!s){let t="";throw xr[i(499)](((i,e)=>{t+=e.id+", "})),t=t.slice(0,-2),new w(i(486)+e.id+i(657)+t+"]")}return s}function Vr(t,i){const e=wr;if(t&&t[e(497)][e(689)]){const s=t[e(497)][e(689)];if(s[e(501)].length>0){const t=s.buffered[e(565)](s[e(501)][e(584)]-1)-s[e(625)];i.playoutDelayHint=i.jitterBufferDelayHint=i.jitterBufferTarget=t}u(Vr,1e3,t,i)}}const Gr=at.get("View");Gr.setLevel(at.DEBUG);const Wr={metadata:!1,enableDRM:!1,disableVideo:!1,disableAudio:!1,peerConfig:{autoInitStats:!0,statsIntervalMs:1e3}};t.Director=Ls,t.Logger=at,t.PeerConnection=rs,t.Publish=class extends Vs{async connect(t){void 0===t&&(t=Js);const i=Fs.object({sourceId:Fs.string(),stereo:Fs.boolean(),dtx:Fs.boolean(),absCaptureTime:Fs.boolean(),dependencyDescriptor:Fs.boolean(),mediaStream:Fs.alternatives().try(Fs.array().items(Fs.object()),Fs.object()),bandwidth:Fs.number(),metadata:Fs.boolean(),disableVideo:Fs.boolean(),disableAudio:Fs.boolean(),codec:Fs.string().valid(..._.values(Je)),simulcast:Fs.boolean(),scalabilityMode:Fs.string(),peerConfig:Fs.object(),record:Fs.boolean(),events:Fs.array().items(Fs.string().valid("active","inactive","viewercount")),priority:Fs.number()}),{error:e,value:s}=i.validate(t);e&&Ks.warn(e,s),this.options=p(d(d({},Js),t),{peerConfig:d(d({},Js.peerConfig),t.peerConfig),setSDPToPeer:!1}),this.options.metadata=this.options.metadata&&this.options.codec===Je.H264&&!this.options.disableVideo,await this.initConnection({migrate:!1})}async reconnect(t){var i,e;this.options.mediaStream=null!=(e=null==(i=this.webRTCPeer)?void 0:i.getTracks())?e:this.options.mediaStream,super.reconnect(t)}async replaceConnection(){var t,i;Ks.info("Migrating current connection"),this.options.mediaStream=null!=(i=null==(t=this.webRTCPeer)?void 0:t.getTracks())?i:this.options.mediaStream,await this.initConnection({migrate:!0})}async record(){var t;this.recordingAvailable?(this.options.record=!0,await(null==(t=this.signaling)?void 0:t.cmd("record")),Ks.info("Broadcaster start recording")):Ks.error("Record not available")}async unrecord(){var t;this.recordingAvailable?(this.options.record=!1,await(null==(t=this.signaling)?void 0:t.cmd("unrecord")),Ks.info("Broadcaster stop recording")):Ks.error("Unrecord not available")}stop(){var t;super.stop(),null==(t=this.worker)||t.terminate(),this.worker=null}async initConnection(t){var i,e;let s,n;if(Ks.debug("Broadcast option values: ",this.options),this.stopReconnection=!1,!this.options.mediaStream)throw Ks.error("Error while broadcasting. MediaStream required"),new g("MediaStream required");if(!t.migrate&&this.isActive())throw Ks.warn("Broadcast currently working"),new g("Broadcast currently working");try{n=await this.tokenGenerator(),this.options.peerConfig.iceServers=null==n?void 0:n.iceServers,this.options.peerConfig.encodedInsertableStreams=this.options.metadata}catch(t){throw Ks.error("Error generating token."),t instanceof Ns&&(401!==t.status&&this.autoReconnect?this.reconnect():this.stopReconnection=!0),t}if(!n)throw Ks.error("Error while broadcasting. Publisher data required"),new g("Publisher data required");const r=zs(n.jwt);if(this.streamName=r.millicast.streamName,this.recordingAvailable=r[Us.atob("bWlsbGljYXN0")].record,this.options.record&&!this.recordingAvailable)throw Ks.error("Error while broadcasting. Record option detected but recording is not available"),new g("Record option detected but recording is not available");const o=new Ms({streamName:this.streamName,url:"".concat(n.urls[0],"?token=").concat(n.jwt)}),h=t.migrate?new rs:this.webRTCPeer;await h.createRTCPeer(this.options.peerConfig,is),null==(i=this.stopReemitingWebRTCPeerInstanceEvents)||i.call(this),null==(e=this.stopReemitingSignalingInstanceEvents)||e.call(this),this.stopReemitingWebRTCPeerInstanceEvents=Lt(h,this,[ss.connectionStateChange]),this.stopReemitingSignalingInstanceEvents=Lt(o,this,[bs]);const a=h.getRTCLocalSDP(this.options),u=o.connect();s=await Promise.all([a,u]);const c=s[0];this.options.metadata&&(this.worker||(this.worker=new qs),this.getRTCPeerConnection().getSenders().forEach((t=>{if(Zs)t.transform=new RTCRtpScriptTransform(this.worker,{name:"senderTransform",codec:this.options.codec});else if(Ws){const{readable:i,writable:e}=t.createEncodedStreams();this.worker.postMessage({action:"insertable-streams-sender",codec:this.options.codec,readable:i,writable:e},[i,e])}})));let l=this.signaling;this.signaling=o;const d=this.signaling.publish(c,this.options),f=h.peer.setLocalDescription(h.sessionDescription);s=await Promise.all([d,f]);let _=s[0];!this.options.disableVideo&&this.options.bandwidth>0&&(_=h.updateBandwidthRestriction(_,this.options.bandwidth)),await h.setRTCRemoteSDP(_),Ks.info("Broadcasting to streamName: ",this.streamName);let v=this.webRTCPeer;this.webRTCPeer=h,this.setReconnect(),t.migrate&&this.webRTCPeer.on(ss.connectionStateChange,(t=>{var i,e;["connected","disconnected","failed","closed"].includes(t)&&(null==(i=null==l?void 0:l.close)||i.call(l),null==(e=null==v?void 0:v.closeRTCPeer)||e.call(v),l=v=null)}))}sendMetadata(t,i){var e;if(void 0===i&&(i="d40e38ea-d419-4c62-94ed-20ac37b4e4fa"),null!=(e=this.options)&&e.metadata&&this.worker)this.worker.postMessage({action:"metadata-sei-user-data-unregistered",uuid:i,payload:t});else{let t="Could not send metadata due to:";this.options?this.options.metadata?this.worker||(t+="\n- Stream not being published."):(t+="\n- Metadata option is not enabled.",this.options.codec!==Je.H264&&(t+="\n- Incompatible codec. Only H264 available."),this.options.disableVideo&&(t+="\n- Video disabled.")):t+="\n- Stream not being published.",Ks.warn(t)}}constructor(t,i,e=!0){t&&Ks.warn("The streamName property has been deprecated. In a future release, this will be removed. Please do not rely on this value. Instead, set via token generator"),super(null,i,Ks,e)}},t.Signaling=Ms,t.View=class extends Vs{async connect(t){void 0===t&&(t=Wr),this.options=p(d(d({},Wr),t),{peerConfig:d(d({},Wr.peerConfig),t.peerConfig),setSDPToPeer:!1}),this.eventQueue.length=0,await this.initConnection({migrate:!1})}async select(t){void 0===t&&(t={}),Gr.debug("Viewer select layer values: ",t),await this.signaling.cmd("select",{layer:t}),Gr.info("Connected to streamName: ",this.streamName)}async addRemoteTrack(t,i){Gr.info("Viewer adding remote track",t);const e=await this.webRTCPeer.addRemoteTrack(t,i);for(const t of i)t.addTrack(e.receiver.track);return e}async project(t,i){for(const t of i){if(!t.trackId&&!t.media)throw Gr.error("Error in projection mapping, trackId or mediaId must be set"),new g("Error in projection mapping, trackId or mediaId must be set");const i=this.webRTCPeer.getRTCPeer();if(t.mediaId&&!i.getTransceivers().find((i=>i.mid===t.mediaId.toString())))throw Gr.error("Error in projection mapping, ".concat(t.mediaId," mid not found in local transceivers")),new g("Error in projection mapping, ".concat(t.mediaId," mid not found in local transceivers"))}Gr.debug("Viewer project source: layer mappings: ",t,i),await this.signaling.cmd("project",{sourceId:t,mapping:i}),Gr.info("Projection done")}async unproject(t){Gr.debug("Viewer unproject mediaIds: ",t),await this.signaling.cmd("unproject",{mediaIds:t}),Gr.info("Unprojection done")}async replaceConnection(){Gr.info("Migrating current connection"),await this.initConnection({migrate:!0})}stop(){var t,i;super.stop(),null==(t=this.drmOptionsMap)||t.clear(),this.DRMProfile=null,null==(i=this.worker)||i.terminate(),this.worker=null,this.payloadTypeCodec={},this.tracksMidValues={},this.eventQueue.length=0}async initConnection(t){var i;let e,s;if(Gr.debug("Viewer connect options values: ",this.options),this.stopReconnection=!1,!t.migrate&&this.isActive())throw Gr.warn("Viewer currently subscribed"),new g("Viewer currently subscribed");try{s=await this.tokenGenerator(),this.options.peerConfig.iceServers=null==s?void 0:s.iceServers,this.options.peerConfig.encodedInsertableStreams=Ws&&(this.options.enableDRM||this.options.metadata)}catch(t){throw Gr.error("Error generating token."),t instanceof Ns&&(401!==t.status&&this.autoReconnect?this.reconnect():this.stopReconnection=!0),t}if(!s)throw Gr.error("Error while subscribing. Subscriber data required"),new g("Subscriber data required");const n=zs(s.jwt);this.streamName=n.millicast.streamName;const r=new Ms({streamName:this.streamName,url:"".concat(s.urls[0],"?token=").concat(s.jwt)});s.subscriberToken&&(this.subscriberToken=s.subscriberToken);const o=t.migrate?new rs:this.webRTCPeer;await o.createRTCPeer(this.options.peerConfig),null==(i=this.stopReemitingWebRTCPeerInstanceEvents)||i.call(this),this.stopReemitingWebRTCPeerInstanceEvents=Lt(o,this,_.values(ss).filter((t=>t!==ss.track))),this.options.metadata&&(this.worker||(this.worker=new qs),this.worker.onmessage=t=>{if("metadata"===t.data.event){const i=new TextDecoder,e=t.data.metadata;if(e.mid=t.data.mid,e.track=this.tracksMidValues[t.data.mid],e.uuid){const t=e.uuid;e.uuid=t.reduce(((t,i)=>t+i.toString(16).padStart(2,"0")),""),e.uuid=e.uuid.replace(/(.{8})(.{4})(.{4})(.{4})(.{12})/,"$1-$2-$3-$4-$5")}if(e.timecode&&(e.timecode=new Date(i.decode(e.timecode))),e.unregistered){const t=i.decode(e.unregistered);try{const i=JSON.parse(t);e.unregistered=i}catch(t){Gr.info("The content could not be converted to JSON, returning raw bytes instead")}}this.emit("metadata",e),this.emit("onMetadata",e)}}),o.on(ss.track,(t=>{this.isMainStreamActive?this.onTrackEvent(t):this.eventQueue.push(t)})),r.on(bs,(async t=>{if(this.isMainStreamActive||"active"!==t.name)"inactive"===t.name&&this.isMainStreamActive&&this.mainSourceId===t.data.sourceId&&(this.isMainStreamActive=!1),this.emit(bs,t);else{if(this.mainSourceId=t.data.sourceId,!this.DRMProfile&&t.data.encryption){const t=await this.tokenGenerator();t.drmObject&&(this.DRMProfile=t.drmObject)}for(this.emit(bs,t),this.isMainStreamActive=!0;this.eventQueue.length>0;)this.onTrackEvent(this.eventQueue.shift())}}));const h=o.getRTCLocalSDP(p(d({},this.options),{stereo:!0})),a=r.connect();e=await Promise.all([h,a]);const c=e[0];let l=this.signaling;this.signaling=r;const f=this.signaling.subscribe(c,p(d({},this.options),{vad:this.options.multiplexedAudioTracks>0})),v=o.peer.setLocalDescription(o.sessionDescription);e=await Promise.all([f,v]);const w=e[0];this.payloadTypeCodec=qe.getCodecPayloadType(w),await o.setRTCRemoteSDP(w),Gr.info("Connected to streamName: ",this.streamName);let m=this.webRTCPeer;this.webRTCPeer=o,this.setReconnect(),t.migrate&&this.webRTCPeer.on(ss.connectionStateChange,(t=>{var i,e;"connected"===t?u((()=>{var t,i;null==(t=null==l?void 0:l.close)||t.call(l),null==(i=null==m?void 0:m.closeRTCPeer)||i.call(m),l=m=null,Gr.info("Current connection migrated")}),1e3):["disconnected","failed","closed"].includes(t)&&(null==(i=null==l?void 0:l.close)||i.call(l),null==(e=null==m?void 0:m.closeRTCPeer)||e.call(m),l=m=null)}))}onTrackEvent(t){var i,e,n;if(this.tracksMidValues[null==(i=t.transceiver)?void 0:i.mid]=t.track,this.isDRMOn){const i=t.transceiver.mid,e=this.getDRMConfiguration(i);try{!function(t,i){const e=wr;var n,r;const o=t[e(629)][e(524)];"video"===o&&(t[e(661)][e(475)]=t[e(661)][e(451)]=t[e(661)][e(605)]=0);const h=Yr(i),a=h[e(497)].videoElement,u=h[e(497)][e(628)];if(h[e(607)]){if(h[e(497)].customTransform)s.clRtcDrmDebugLog&&console[e(556)](e(468)+e(572));else if(s[e(600)]&&console[e(556)](e(467)+(e(pr?589:609)+e(617))),pr){if(h[e(544)]=function(t){const i=wr,e=s[i(493)]||s[i(488)],n=s[i(666)],r=s[i(586)];if(!(e&&n&&r&&t))return null;const o=new n([t]);return new r(e[i(631)](o))}(Fr),null==h[e(544)])throw new g(e(539));h[e(544)][e(485)]=t=>{const i=e;t[i(496)][i(567)]===i(471)?zr(h,t[i(496)].frame,null):Ur(h,t[i(496)][i(651)],null)},t[e(661)].transform=new RTCRtpScriptTransform(h.worker,{operation:o})}else{const i=o===e(471)?zr:Ur,s={drm:h,transform:(t,e)=>{i(h,t,e)}},n=t.receiver.createEncodedStreams(),r=new TransformStream({transform:s.transform[e(656)](s)}),{readable:a,writable:u}=n;a[e(577)](r)[e(635)](u)}if("audio"===o&&(null===(n=h[e(497)][e(463)])||void 0===n?void 0:n.encryption)===e(670)){if(!u)return void console.warn(e(690));u[e(588)]!==t[e(481)][0]&&(u[e(588)]=t[e(481)][0]),h[e(497)].videoElement&&(t[e(661)][e(475)]=t[e(661)].jitterBufferDelayHint=t[e(661)][e(605)]=h[e(497)][e(482)],Vr(h,t[e(661)]))}else"video"===o&&"clear"===(null===(r=h.config[e(471)])||void 0===r?void 0:r[e(619)])&&a[e(588)]!==t[e(481)][0]&&(a.srcObject=t.streams[0])}else a[e(588)]!==t[e(481)][0]&&(a.srcObject=t[e(481)][0])}(t,e)}catch(t){Gr.error("Failed to apply DRM on media Id:",i,"error is: ",t),this.emit("error",new g("Failed to apply DRM on media Id: "+i+" error is: "+t))}this.worker||(this.worker=new qs),this.worker.addEventListener("message",(t=>{"complete"===t.data.event&&function(t,i,e){const s=wr,n=Yr(e);t[s(580)]?zr(n,t,i):Ur(n,t,i)}(t.data.frame,null,e)}))}if(this.options.metadata)if(Zs)t.receiver.transform=new RTCRtpScriptTransform(this.worker,{name:"receiverTransform",payloadTypeCodec:d({},this.payloadTypeCodec),codec:this.options.metadata&&"h264",mid:null==(e=t.transceiver)?void 0:e.mid});else if(Ws){const{readable:i,writable:e}=t.receiver.createEncodedStreams();this.worker.postMessage({action:"insertable-streams-receiver",payloadTypeCodec:d({},this.payloadTypeCodec),codec:this.options.metadata&&"h264",mid:null==(n=t.transceiver)?void 0:n.mid,readable:i,writable:e},[i,e])}this.emit(ss.track,t)}getDRMConfiguration(t){return this.drmOptionsMap?this.drmOptionsMap.get(t):null}async onRtcDrmFetch(t,i){return i.headers||(i.headers=new Headers),i.headers.get("x-dt-custom-data")&&i.headers.delete("x-dt-custom-data"),this.subscriberToken?i.headers.append("Authorization","Bearer ".concat(this.subscriberToken)):Gr.warn("onRtcDrmFetch: no subscriberToken"),fetch(t,i)}configureDRM(t){if(!t)throw new g("Required DRM options is not provided");this.drmOptionsMap||(this.drmOptionsMap=new Map);const i={merchant:"dolby",environment:Fn.Production,customTransform:this.options.metadata,videoElement:t.videoElement,audioElement:t.audioElement,video:{codec:"H264",encryption:"cbcs",keyId:$s(t.videoEncryptionParams.keyId),iv:$s(t.videoEncryptionParams.iv)},audio:{codec:"opus",encryption:"clear"},onFetch:this.onRtcDrmFetch.bind(this)};t.mediaBufferMs&&(i.mediaBufferMs=t.mediaBufferMs),this.DRMProfile&&(this.DRMProfile.playReadyUrl&&(i.prLicenseUrl=this.DRMProfile.playReadyUrl),this.DRMProfile.widevineUrl&&(i.wvLicenseUrl=this.DRMProfile.widevineUrl),this.DRMProfile.fairPlayUrl&&(i.fpsLicenseUrl=this.DRMProfile.fairPlayUrl),this.DRMProfile.fairPlayCertUrl&&(i.fpsCertificateUrl=this.DRMProfile.fairPlayCertUrl));try{Qr(i),this.drmOptionsMap.set(t.videoMid,i),t.audioMid&&this.drmOptionsMap.set(t.audioMid,i),i.videoElement.addEventListener("rtcdrmerror",(t=>{Gr.error("DRM error: ",t.detail.message,"in video element:",i.videoElement.id),this.emit("error",new g(t.detail.message))}))}catch(i){Gr.error("Failed to configure DRM with options:",t,"error is:",i)}}removeDRMConfiguration(t){var i;null==(i=this.drmOptionsMap)||i.delete(t)}get isDRMOn(){return!!this.drmOptionsMap&&this.drmOptionsMap.size>0}exchangeDRMConfiguration(t,i){const e=this.getDRMConfiguration(t),s=this.getDRMConfiguration(i);if(null===e)throw new g("No DRM configuration found for "+t);if(null===s)throw new g("No DRM configuration found for "+i);tn(e.video,s.video,"keyId"),tn(e.video,s.video,"iv");try{Qr(e)}catch(t){Gr.error("Failed to configure DRM with options:",e,"error is:",t)}try{Qr(s)}catch(t){Gr.error("Failed to configure DRM with options:",s,"error is:",t)}}constructor(t,i,e=null,s=!0){t&&Gr.warn("The streamName property has been deprecated. In a future release, this will be removed. Please do not rely on this value. Instead, set via token generator"),super(null,i,Gr,s),this.payloadTypeCodec={},this.tracksMidValues={},this.drmOptionsMap=null,this.eventQueue=[],this.isMainStreamActive=!1,e&&(this.on(ss.track,(t=>{e.srcObject=t.streams[0]})),Gr.warn("The mediaElement property has been deprecated. In a future release, this will be removed. Please do not rely on this value. Instead, do this in either the `track` or the `active` broadcast event."))}},_.defineProperty(t,b.toStringTag,{value:"Module"})}))})),Hl=qn((t=>{"use strict";function i(){const t=Zl();return i=function(){return t},t}r(),function(t,i){for(var e in i)_.defineProperty(t,e,{enumerable:!0,get:i[e]})}(t,{Director:function(){return i().Director},View:function(){return i().View}})})),Xl=qn(((t,i)=>{r(),i.exports=function(){var t=new Float32Array(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}})),ql=qn(((t,i)=>{r(),i.exports=function(t,i){var e=i[0],s=i[1],n=i[2],r=i[3],o=e+e,h=s+s,a=n+n,u=e*o,c=s*o,l=s*h,d=n*o,f=n*h,g=n*a,_=r*o,v=r*h,w=r*a;return t[0]=1-l-g,t[1]=c+w,t[2]=d-v,t[3]=0,t[4]=c-w,t[5]=1-u-g,t[6]=f+_,t[7]=0,t[8]=d+v,t[9]=f-_,t[10]=1-u-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}})),Kl=qn(((t,i)=>{r(),i.exports=function(t,i,e){var s,n,r,o=e[0],h=e[1],a=e[2],u=x.sqrt(o*o+h*h+a*a);if(x.abs(u)<1e-6)return null;return o*=u=1/u,h*=u,a*=u,s=x.sin(i),n=x.cos(i),r=1-n,t[0]=o*o*r+n,t[1]=h*o*r+a*s,t[2]=a*o*r-h*s,t[3]=0,t[4]=o*h*r-a*s,t[5]=h*h*r+n,t[6]=a*h*r+o*s,t[7]=0,t[8]=o*a*r+h*s,t[9]=h*a*r-o*s,t[10]=a*a*r+n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}})),Jl=qn(((t,i)=>{r(),i.exports=function(t,i){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}})),$l=qn(((t,i)=>{r(),i.exports=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}})),td=qn(((t,i)=>{r(),i.exports=function(t,i){var e=i[0],s=i[1],n=i[2],r=i[3],o=i[4],h=i[5],a=i[6],u=i[7],c=i[8],l=i[9],d=i[10],f=i[11],g=i[12],_=i[13],v=i[14],w=i[15],m=e*h-s*o,p=e*a-n*o,A=e*u-r*o,y=s*a-n*h,b=s*u-r*h,M=n*u-r*a,T=c*_-l*g,S=c*v-d*g,N=c*w-f*g,I=l*v-d*_,D=l*w-f*_,E=d*w-f*v,k=m*E-p*D+A*I+y*N-b*S+M*T;if(!k)return null;return k=1/k,t[0]=(h*E-a*D+u*I)*k,t[1]=(n*D-s*E-r*I)*k,t[2]=(_*M-v*b+w*y)*k,t[3]=(d*b-l*M-f*y)*k,t[4]=(a*N-o*E-u*S)*k,t[5]=(e*E-n*N+r*S)*k,t[6]=(v*A-g*M-w*p)*k,t[7]=(c*M-d*A+f*p)*k,t[8]=(o*D-h*N+u*T)*k,t[9]=(s*N-e*D-r*T)*k,t[10]=(g*b-_*A+w*m)*k,t[11]=(l*A-c*b-f*m)*k,t[12]=(h*S-o*I-a*T)*k,t[13]=(e*I-s*S+n*T)*k,t[14]=(_*p-g*y-v*m)*k,t[15]=(c*y-l*p+d*m)*k,t}})),id=qn(((t,i)=>{r(),i.exports=function(t,i,e){var s=i[0],n=i[1],r=i[2],o=i[3],h=i[4],a=i[5],u=i[6],c=i[7],l=i[8],d=i[9],f=i[10],g=i[11],_=i[12],v=i[13],w=i[14],m=i[15],p=e[0],A=e[1],y=e[2],b=e[3];return t[0]=p*s+A*h+y*l+b*_,t[1]=p*n+A*a+y*d+b*v,t[2]=p*r+A*u+y*f+b*w,t[3]=p*o+A*c+y*g+b*m,p=e[4],A=e[5],y=e[6],b=e[7],t[4]=p*s+A*h+y*l+b*_,t[5]=p*n+A*a+y*d+b*v,t[6]=p*r+A*u+y*f+b*w,t[7]=p*o+A*c+y*g+b*m,p=e[8],A=e[9],y=e[10],b=e[11],t[8]=p*s+A*h+y*l+b*_,t[9]=p*n+A*a+y*d+b*v,t[10]=p*r+A*u+y*f+b*w,t[11]=p*o+A*c+y*g+b*m,p=e[12],A=e[13],y=e[14],b=e[15],t[12]=p*s+A*h+y*l+b*_,t[13]=p*n+A*a+y*d+b*v,t[14]=p*r+A*u+y*f+b*w,t[15]=p*o+A*c+y*g+b*m,t}})),ed=qn(((t,i)=>{r(),i.exports=function(t,i,e,s,n){var r=1/x.tan(i/2),o=1/(s-n);return t[0]=r/e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(n+s)*o,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*n*s*o,t[15]=0,t}})),sd=qn(((t,i)=>{r(),i.exports=function(t,i,e,s){var n,r,o,h,a,u,c,l,d,f,g,_,v,w,m,p,A,y,b,M,T,S,N,I,D=s[0],E=s[1],k=s[2],L=x.sqrt(D*D+E*E+k*k);if(x.abs(L)<1e-6)return null;D*=L=1/L,E*=L,k*=L,n=x.sin(e),r=x.cos(e),o=1-r,h=i[0],a=i[1],u=i[2],c=i[3],l=i[4],d=i[5],f=i[6],g=i[7],_=i[8],v=i[9],w=i[10],m=i[11],p=D*D*o+r,A=E*D*o+k*n,y=k*D*o-E*n,b=D*E*o-k*n,M=E*E*o+r,T=k*E*o+D*n,S=D*k*o+E*n,N=E*k*o-D*n,I=k*k*o+r,t[0]=h*p+l*A+_*y,t[1]=a*p+d*A+v*y,t[2]=u*p+f*A+w*y,t[3]=c*p+g*A+m*y,t[4]=h*b+l*M+_*T,t[5]=a*b+d*M+v*T,t[6]=u*b+f*M+w*T,t[7]=c*b+g*M+m*T,t[8]=h*S+l*N+_*I,t[9]=a*S+d*N+v*I,t[10]=u*S+f*N+w*I,t[11]=c*S+g*N+m*I,i!==t&&(t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15]);return t}})),nd=qn(((t,i)=>{r(),i.exports=function(t,i,e){var s,n,r,o,h,a,u,c,l,d,f,g,_=e[0],v=e[1],w=e[2];i===t?(t[12]=i[0]*_+i[4]*v+i[8]*w+i[12],t[13]=i[1]*_+i[5]*v+i[9]*w+i[13],t[14]=i[2]*_+i[6]*v+i[10]*w+i[14],t[15]=i[3]*_+i[7]*v+i[11]*w+i[15]):(s=i[0],n=i[1],r=i[2],o=i[3],h=i[4],a=i[5],u=i[6],c=i[7],l=i[8],d=i[9],f=i[10],g=i[11],t[0]=s,t[1]=n,t[2]=r,t[3]=o,t[4]=h,t[5]=a,t[6]=u,t[7]=c,t[8]=l,t[9]=d,t[10]=f,t[11]=g,t[12]=s*_+h*v+l*w+i[12],t[13]=n*_+a*v+d*w+i[13],t[14]=r*_+u*v+f*w+i[14],t[15]=o*_+c*v+g*w+i[15]);return t}}));r();var Do=function(t){return t[t.CONFIGURATION_ERROR=1e3]="CONFIGURATION_ERROR",t[t.LICENSE_ERROR=2e3]="LICENSE_ERROR",t[t.LICENSE_INVALID_DOMAIN=2001]="LICENSE_INVALID_DOMAIN",t[t.LICENSE_INVALID_SOURCE=2002]="LICENSE_INVALID_SOURCE",t[t.LICENSE_EXPIRED=2003]="LICENSE_EXPIRED",t[t.LICENSE_INVALID_FEATURE=2004]="LICENSE_INVALID_FEATURE",t[t.SOURCE_INVALID=3e3]="SOURCE_INVALID",t[t.SOURCE_NOT_SUPPORTED=3001]="SOURCE_NOT_SUPPORTED",t[t.MANIFEST_LOAD_ERROR=4e3]="MANIFEST_LOAD_ERROR",t[t.MANIFEST_CORS_ERROR=4001]="MANIFEST_CORS_ERROR",t[t.MANIFEST_PARSE_ERROR=4002]="MANIFEST_PARSE_ERROR",t[t.MEDIA_NOT_SUPPORTED=5e3]="MEDIA_NOT_SUPPORTED",t[t.MEDIA_LOAD_ERROR=5001]="MEDIA_LOAD_ERROR",t[t.MEDIA_DECODE_ERROR=5002]="MEDIA_DECODE_ERROR",t[t.MEDIA_AVPLAYER_ERROR=5003]="MEDIA_AVPLAYER_ERROR",t[t.MEDIA_ABORTED=5004]="MEDIA_ABORTED",t[t.NETWORK_ERROR=6e3]="NETWORK_ERROR",t[t.NETWORK_TIMEOUT=6001]="NETWORK_TIMEOUT",t[t.CONTENT_PROTECTION_ERROR=7e3]="CONTENT_PROTECTION_ERROR",t[t.CONTENT_PROTECTION_NOT_SUPPORTED=7001]="CONTENT_PROTECTION_NOT_SUPPORTED",t[t.CONTENT_PROTECTION_CONFIGURATION_MISSING=7002]="CONTENT_PROTECTION_CONFIGURATION_MISSING",t[t.CONTENT_PROTECTION_CONFIGURATION_INVALID=7003]="CONTENT_PROTECTION_CONFIGURATION_INVALID",t[t.CONTENT_PROTECTION_INITIALIZATION_INVALID=7004]="CONTENT_PROTECTION_INITIALIZATION_INVALID",t[t.CONTENT_PROTECTION_CERTIFICATE_ERROR=7005]="CONTENT_PROTECTION_CERTIFICATE_ERROR",t[t.CONTENT_PROTECTION_CERTIFICATE_INVALID=7006]="CONTENT_PROTECTION_CERTIFICATE_INVALID",t[t.CONTENT_PROTECTION_LICENSE_ERROR=7007]="CONTENT_PROTECTION_LICENSE_ERROR",t[t.CONTENT_PROTECTION_LICENSE_INVALID=7008]="CONTENT_PROTECTION_LICENSE_INVALID",t[t.CONTENT_PROTECTION_KEY_EXPIRED=7009]="CONTENT_PROTECTION_KEY_EXPIRED",t[t.CONTENT_PROTECTION_KEY_MISSING=7010]="CONTENT_PROTECTION_KEY_MISSING",t[t.CONTENT_PROTECTION_OUTPUT_RESTRICTED=7011]="CONTENT_PROTECTION_OUTPUT_RESTRICTED",t[t.CONTENT_PROTECTION_INTERNAL_ERROR=7012]="CONTENT_PROTECTION_INTERNAL_ERROR",t[t.SUBTITLE_LOAD_ERROR=8e3]="SUBTITLE_LOAD_ERROR",t[t.SUBTITLE_CORS_ERROR=8001]="SUBTITLE_CORS_ERROR",t[t.SUBTITLE_PARSE_ERROR=8002]="SUBTITLE_PARSE_ERROR",t[t.VR_PLATFORM_UNSUPPORTED=9e3]="VR_PLATFORM_UNSUPPORTED",t[t.VR_PRESENTATION_ERROR=9001]="VR_PRESENTATION_ERROR",t[t.AD_ERROR=1e4]="AD_ERROR",t[t.AD_BLOCKER_DETECTED=10001]="AD_BLOCKER_DETECTED",t[t.FULLSCREEN_ERROR=11e3]="FULLSCREEN_ERROR",t[t.PICTURE_IN_PICTURE_ERROR=11001]="PICTURE_IN_PICTURE_ERROR",t[t.CACHE_SOURCE_ERROR=12e3]="CACHE_SOURCE_ERROR",t[t.CACHE_CONTENT_PROTECTION_ERROR=12001]="CACHE_CONTENT_PROTECTION_ERROR",t[t.THEO_LIVE_UNKNOWN_ERROR=13e3]="THEO_LIVE_UNKNOWN_ERROR",t[t.THEO_LIVE_CHANNEL_NOT_FOUND=13001]="THEO_LIVE_CHANNEL_NOT_FOUND",t[t.THEO_LIVE_END_OF_DEMO=13002]="THEO_LIVE_END_OF_DEMO",t[t.THEO_LIVE_ANALYTICS_ERROR=13003]="THEO_LIVE_ANALYTICS_ERROR",t}({}),Ee=function(t){return t[t.CONFIGURATION=1]="CONFIGURATION",t[t.LICENSE=2]="LICENSE",t[t.SOURCE=3]="SOURCE",t[t.MANIFEST=4]="MANIFEST",t[t.MEDIA=5]="MEDIA",t[t.NETWORK=6]="NETWORK",t[t.CONTENT_PROTECTION=7]="CONTENT_PROTECTION",t[t.SUBTITLE=8]="SUBTITLE",t[t.VR=9]="VR",t[t.AD=10]="AD",t[t.FULLSCREEN=11]="FULLSCREEN",t[t.CACHE=12]="CACHE",t[t.THEOLIVE=13]="THEOLIVE",t}({});!function(t){t.fromCode=function(i){const e=x.floor(i/1e3);if(e in t)return e;throw new w("Invalid error code: "+i)}}(Ee||(Ee={})),r(),r(),r(),r(),r(),r(),r(),r();var Et=function(t){return t.qf="web",t.Kf="android",t.Jf="android-tv",t.$f="ios",t.eg="tvos",t.rg="chromecast",t.og="theoliveweb",t}({});var O=zl?zl.userAgent:"",rd=O.match(/chrome\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/i),od=O.match(/Edg\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/i),hd=O.match(/Android ([0-9\.]+)/i),ad=O.match(/Windows NT ([0-9\.]+)/i),ud=O.match(/(Version)\/((\d+)\.(\d+)(?:\.(\d+))?).*Safari/),cd=O.match(/Firefox\/([0-9\.]+)/i),ld=O.match(/OPR\/(\d+\.\d+)/i),dd=O.match(/Tizen ([0-9\.]+)/i),fd=O.match(/(iPhone OS|iPad OS|iPod OS|Mac OS X) (\d+)_(\d+)_?(\d+)?/),gd=O.match(/HbbTV\/([0-9.]+)/i),_d=class{get Je(){return this.hg}get ag(){return this.cg}get dg(){return this.fg}get gg(){return this._g}get vg(){return this.wg}get pg(){return this.Ag}get yg(){return this.Mg}get Tg(){return this.Sg}get Ng(){return this.Ig}get Dg(){return this.Eg}get Lg(){return this.xg}get Ka(){return this.Cg}get jg(){return this.Og}get Rg(){return this.Pg||this.zg}get nd(){return this.Bg}get Qs(){return this.Ug}get Qg(){return this.Fg}get Yg(){return this.Vg}get Gg(){var t;return null!=(t=this.Wg)?t:this.Zg}get Hg(){return this.Xg}get qg(){var t;return(null==(t=s.chrome)?void 0:t.webview)&&this.Kg>0}get Jg(){return this.Kg}get $g(){return this.t_}get i_(){return this.e_}get s_(){return this.n_}get r_(){return this.o_}get h_(){return this.a_}get u_(){return this.c_}get l_(){return this.d_}get f_(){return this.g_}get __(){return this.v_}get w_(){return this.m_}get p_(){return this.A_}get y_(){return this.b_}get M_(){return this.T_}get S_(){return this.N_}get I_(){return this.D_}get E_(){return this.k_}get L_(){return this.x_}get C_(){return this.j_}get O_(){return!(!this.s_&&!this.$g)&&this.Gg<=56}get R_(){return this.P_}get z_(){return this.B_}get U_(){return this.Q_}get F_(){return this.Y_}get V_(){return this.G_}get W_(){return this.Z_}get H_(){return this.X_}get IS_IOS_CHROME(){return this.q_}constructor(){this.hg=Boolean("ontouchstart"in self||self.DocumentTouch&&h instanceof self.DocumentTouch||zl&&zl.msMaxTouchPoints),this.cg=/(mac\sos\sx)\s?([\w\s\.]+\w)*/i.test(O)||/(macintosh|mac(?=_powerpc)\s)/i.test(O),this.fg=/Windows NT/i.test(O),this._g=ad?S(ad[1]):0,this.wg=/Android/i.test(O),this.Ag=hd?S(hd[1]):0,this.Mg=/windows phone (8|8\.1)/i.test(O),this.Sg=/iPhone/i.test(O),this.Ig=/iPad/i.test(O),this.Eg=this.cg&&this.hg&&!this.Ig,this.xg=/iPod/i.test(O),this.Bg=/Mobile Safari/i.test(O),this.Pg=/EOS\d*STB/i.test(O),this.zg=/APP\d*STB/i.test(O),this.Cg=(this.Sg||this.Ig||this.Eg||this.xg)&&!this.Mg,this.Og=fd?S(fd[2]):0,this.Ug=this.Mg||this.Cg||this.wg||this.Bg,this.Fg=/CriOS/i.test(O),this.Vg=Boolean(self.chrome&&/google/i.test(zl.vendor))||this.Fg,this.Xg=this.Vg&&/Edg\//i.test(zl.userAgent),this.Kg=od?C(od[1],10):0,this.q_=Boolean(/CriOS/i.test(O)),this.X_=Boolean(self.chrome||/Chrome/i.test(O)||this.q_),this.Zg=rd?C(rd[1],10):0,this.t_=/SMART-TV.*Tizen/i.test(O),this.e_=dd?S(dd[1]):0,this.Wg=this.e_>0?function(t){return t>=8?108:t>=7?94:t>=6.5?85:t>=6?76:t>=5.5?69:t>=5?63:t>=4?56:t>=3?47:0}(this.e_):void 0,this.n_=/webos|web0s/i.test(O),this.o_=/HbbTV/i.test(O),this.a_=!!gd&&function(t){if(!t)return!1;let i=t.split(".").map(Number);return 3===i.length&&1===i[0]&&2===i[1]}(gd[1]),this.c_=/VIZIO/i.test(O),this.d_=/Edge\/\d+/i.test(O),this.g_=/Trident/i.test(O),this.v_=this.g_&&!self.ActiveXObject&&"ActiveXObject"in self,this.m_=/Vivaldi/i.test(O),this.A_=/Firefox/i.test(O)&&!/Seamonkey/i.test(O),this.b_=cd?S(cd[1]):0,this.T_=/Safari/i.test(O)&&!/Chrome/i.test(O)&&!this.Mg&&!this.t_,this.N_=ud?S(ud[2]):0,this.D_=Boolean(ld),this.k_=ld?S(ld[1]):0,this.x_=/CrKey/.test(O),this.j_=/\b(tv|smart-tv|smarttv|appletv|crkey|googletv|hbbtv|pov_tv|roku|viera|nettv|philipstv|vizio)\b/i.test(O),this.P_="web"===Et.Jf,this.B_="web"===Et.Kf,this.Q_=this.B_||this.P_,this.Y_="web"===Et.$f,this.G_="web"===Et.eg,this.Z_="web"===Et.rg}};_d.K_=new _d;var ui=_d.K_;r();var Ho={}.hasOwnProperty,vd={}.toString;function Rt(t){return null!=t}function wd(t){return void 0===t}var me,Kc=Array.isArray||function(t){return"[object Array]"===vd.call(t)};function ou(t){return jl(t)&&Ho.call(t,"length")&&Fn(t.length)}function jl(t){return"object"==typeof t&&null!==t}function Ec(t){return jl(t)&&t.constructor&&t.constructor===_}function cs(t){return"string"==typeof t}function md(t){return"boolean"==typeof t}function yt(t){return Rt(t)&&"function"==typeof t.then}function pd(t){return"[object Date]"===vd.call(t)}function Fn(t){return"number"==typeof t}function st(t){return"function"==typeof t}function te(t){return st(t)||jl(t)}function Xa(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function qu(t){let i;for(;Rt(i=t.firstChild);)t.removeChild(i)}function Ad(t,i){t.insertBefore(i,t.firstChild)}function yd(t){const i=t.className;return"string"==typeof i?i:i&&"string"==typeof i.baseVal?i.baseVal:""}function bd(t,i){const e=t.className;"string"==typeof e?t.className=i:e&&"string"==typeof e.baseVal&&(e.baseVal=i)}function Md(t,i){return void 0!==t.classList?t.classList.contains(i):void 0!==t.className&&-1!==(" "+yd(t)+" ").indexOf(" "+i+" ")}function Dn(t,i){if(void 0!==t.classList)t.classList.add(i);else if(void 0!==t.className){const e=yd(t);-1===(" "+e+" ").indexOf(" "+i+" ")&&bd(t,(e+" "+i).trim())}}function Td(t,i){if(void 0!==t.classList)t.classList.remove(i);else if(void 0!==t.className){let e=" "+yd(t)+" ";const s=" "+i+" ";for(;-1!==e.indexOf(s);)e=e.replace(s," ");bd(t,e.trim())}}function Sd(t,i,e){void 0===e&&(e=!Md(t,i)),e?Dn(t,i):Td(t,i)}function Nd(t){t.stopPropagation()}function Id(t,i){ui.$g&&ui.i_<3?function(t,i){let e=i;switch(i){case"flex":e="-webkit-flex";break;case"inline-flex":e="-webkit-inline-flex"}t.display=e}(t,i):function(t,i){if(t.display=i,t.display!==i){let e=i;switch(i){case"flex":e="-ms-flexbox";break;case"inline-flex":e="-ms-inline-flexbox"}t.display=e}}(t,i)}function Dd(t,i){const e=i.style;if(e)for(const i of _.keys(t)){const s=t[i];void 0!==s&&(e[i]=s)}}function Tu(t){const i=t.style;i.position="absolute",i.left="0",i.right="0",i.top="0",i.bottom="0",i.width="100%",i.height="100%"}function Ed(t){const i=t.style;i.position="",i.left="",i.right="",i.top="",i.bottom="",i.width="",i.height=""}function kd(t){t.removeAttribute("title")}function Ld(t){t.addEventListener("mouseover",(t=>{kd(t.target)}))}function xd(t){try{return Boolean(t)&&t===t.top}catch(t){return!1}}function Cd(t){try{return Boolean(t)&&t.parent!==t}catch(t){return!1}}r(),r();var ul=()=>{},_c=t=>t;function Gu(t,i){let e=-1/0;return function(){for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];const o=me.J_();o-e>=i&&(t.apply(this,n),e=o)}}function kn(t,i){let e=0;return function(){for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];const o=this;0!==e&&me.rv(e),e=me.ov((()=>{e=0,t.apply(o,n)}),i)}}function Vc(t){let i;return()=>(void 0!==t&&(i=t(),t=void 0),i)}function jd(t){return"video"===function(t){return t&&t.nodeName&&t.nodeName.toLowerCase()||""}(t)}function Od(t){t.src&&(t.removeAttribute("src"),t.load()),t.srcObject&&(t.srcObject=null,t.load())}function Rd(){return void 0!==h?h.createElement("video"):void 0}var Pd=Vc(Rd),zd=Vc((()=>"undefined"!=typeof HTMLVideoElement&&Pd()instanceof HTMLVideoElement));r(),r(),r();var $n=null;try{$n=new WebAssembly.Instance(new WebAssembly.Module(new T([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(p){}function Bd(t,i,e){this.low=0|t,this.high=0|i,this.unsigned=!!e}function Mt(t){return!0===(t&&t.hv)}function Ud(t){var i=x.clz32(t&-t);return t?31-i:i}Bd.prototype.hv,_.defineProperty(Bd.prototype,"hv",{value:!0}),Bd.isLong=Mt;var Qd={},Fd={};function bt(t,i){var e,s,n;return i?(n=0<=(t>>>=0)&&t<256)&&(s=Fd[t])?s:(e=Be(t,0,!0),n&&(Fd[t]=e),e):(n=-128<=(t|=0)&&t<128)&&(s=Qd[t])?s:(e=Be(t,t<0?-1:0,!1),n&&(Qd[t]=e),e)}function Rn(t,i){if(j(t))return i?Xd:Jo;if(i){if(t<0)return Xd;if(t>=Wd)return $d}else{if(t<=-Zd)return is;if(t+1>=Zd)return Jd}return t<0?Rn(-t,i).neg():Be(t%Gd|0,t/Gd|0,i)}function Be(t,i,e){return new Bd(t,i,e)}Bd.fromInt=bt,Bd.fromNumber=Rn,Bd.fromBits=Be;var Yd=x.pow;function Vd(t,i,e){if(0===t.length)throw g("empty string");if("number"==typeof i?(e=i,i=!1):i=!!i,"NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return i?Xd:Jo;if((e=e||10)<2||36<e)throw RangeError("radix");var s;if((s=t.indexOf("-"))>0)throw g("interior hyphen");if(0===s)return Vd(t.substring(1),i,e).neg();for(var n=Rn(Yd(e,8)),r=Jo,o=0;o<t.length;o+=8){var h=x.min(8,t.length-o),a=C(t.substring(o,o+h),e);if(h<8){var u=Rn(Yd(e,h));r=r.mul(u).add(Rn(a))}else r=(r=r.mul(n)).add(Rn(a))}return r.unsigned=i,r}function Zo(t,i){return"number"==typeof t?Rn(t,i):"string"==typeof t?Vd(t,i):Be(t.low,t.high,"boolean"==typeof i?i:t.unsigned)}Bd.fromString=Vd,Bd.fromValue=Zo;var Gd=4294967296,Wd=Gd*Gd,Zd=Wd/2,Hd=bt(1<<24),Jo=bt(0);Bd.ZERO=Jo;var Xd=bt(0,!0);Bd.UZERO=Xd;var Fc=bt(1);Bd.ONE=Fc;var qd=bt(1,!0);Bd.UONE=qd;var Kd=bt(-1);Bd.NEG_ONE=Kd;var Jd=Be(-1,2147483647,!1);Bd.MAX_VALUE=Jd;var $d=Be(-1,-1,!0);Bd.MAX_UNSIGNED_VALUE=$d;var is=Be(0,-2147483648,!1);Bd.MIN_VALUE=is;var K=Bd.prototype;K.toInt=function(){return this.unsigned?this.low>>>0:this.low},K.toNumber=function(){return this.unsigned?(this.high>>>0)*Gd+(this.low>>>0):this.high*Gd+(this.low>>>0)},K.toString=function(t){if((t=t||10)<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(is)){var i=Rn(t),e=this.div(i),s=e.mul(i).sub(this);return e.toString(t)+s.toInt().toString(t)}return"-"+this.neg().toString(t)}for(var n=Rn(Yd(t,6),this.unsigned),r=this,o="";;){var h=r.div(n),a=(r.sub(h.mul(n)).toInt()>>>0).toString(t);if((r=h).isZero())return a+o;for(;a.length<6;)a="0"+a;o=""+a+o}},K.getHighBits=function(){return this.high},K.getHighBitsUnsigned=function(){return this.high>>>0},K.getLowBits=function(){return this.low},K.getLowBitsUnsigned=function(){return this.low>>>0},K.getNumBitsAbs=function(){if(this.isNegative())return this.eq(is)?64:this.neg().getNumBitsAbs();for(var t=0!=this.high?this.high:this.low,i=31;i>0&&0==(t&1<<i);i--);return 0!=this.high?i+33:i+1},K.isZero=function(){return 0===this.high&&0===this.low},K.eqz=K.isZero,K.isNegative=function(){return!this.unsigned&&this.high<0},K.isPositive=function(){return this.unsigned||this.high>=0},K.isOdd=function(){return 1==(1&this.low)},K.isEven=function(){return 0==(1&this.low)},K.equals=function(t){return Mt(t)||(t=Zo(t)),(this.unsigned===t.unsigned||this.high>>>31!=1||t.high>>>31!=1)&&(this.high===t.high&&this.low===t.low)},K.eq=K.equals,K.notEquals=function(t){return!this.eq(t)},K.neq=K.notEquals,K.ne=K.notEquals,K.lessThan=function(t){return this.comp(t)<0},K.lt=K.lessThan,K.lessThanOrEqual=function(t){return this.comp(t)<=0},K.lte=K.lessThanOrEqual,K.le=K.lessThanOrEqual,K.greaterThan=function(t){return this.comp(t)>0},K.gt=K.greaterThan,K.greaterThanOrEqual=function(t){return this.comp(t)>=0},K.gte=K.greaterThanOrEqual,K.ge=K.greaterThanOrEqual,K.compare=function(t){if(Mt(t)||(t=Zo(t)),this.eq(t))return 0;var i=this.isNegative(),e=t.isNegative();return i&&!e?-1:!i&&e?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},K.comp=K.compare,K.negate=function(){return!this.unsigned&&this.eq(is)?is:this.not().add(Fc)},K.neg=K.negate,K.add=function(t){Mt(t)||(t=Zo(t));var i=this.high>>>16,e=65535&this.high,s=this.low>>>16,n=65535&this.low,r=t.high>>>16,o=65535&t.high,h=t.low>>>16,a=0,u=0,c=0,l=0;return c+=(l+=n+(65535&t.low))>>>16,u+=(c+=s+h)>>>16,a+=(u+=e+o)>>>16,a+=i+r,Be((c&=65535)<<16|(l&=65535),(a&=65535)<<16|(u&=65535),this.unsigned)},K.subtract=function(t){return Mt(t)||(t=Zo(t)),this.add(t.neg())},K.sub=K.subtract,K.multiply=function(t){if(this.isZero())return this;if(Mt(t)||(t=Zo(t)),$n)return Be($n.mul(this.low,this.high,t.low,t.high),$n.get_high(),this.unsigned);if(t.isZero())return this.unsigned?Xd:Jo;if(this.eq(is))return t.isOdd()?is:Jo;if(t.eq(is))return this.isOdd()?is:Jo;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(Hd)&&t.lt(Hd))return Rn(this.toNumber()*t.toNumber(),this.unsigned);var i=this.high>>>16,e=65535&this.high,s=this.low>>>16,n=65535&this.low,r=t.high>>>16,o=65535&t.high,h=t.low>>>16,a=65535&t.low,u=0,c=0,l=0,d=0;return l+=(d+=n*a)>>>16,c+=(l+=s*a)>>>16,l&=65535,c+=(l+=n*h)>>>16,u+=(c+=e*a)>>>16,c&=65535,u+=(c+=s*h)>>>16,c&=65535,u+=(c+=n*o)>>>16,u+=i*a+e*h+s*o+n*r,Be((l&=65535)<<16|(d&=65535),(u&=65535)<<16|(c&=65535),this.unsigned)},K.mul=K.multiply,K.divide=function(t){if(Mt(t)||(t=Zo(t)),t.isZero())throw g("division by zero");var i,e,s;if($n)return this.unsigned||-2147483648!==this.high||-1!==t.low||-1!==t.high?Be((this.unsigned?$n.div_u:$n.div_s)(this.low,this.high,t.low,t.high),$n.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?Xd:Jo;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return Xd;if(t.gt(this.shru(1)))return qd;s=Xd}else{if(this.eq(is))return t.eq(Fc)||t.eq(Kd)?is:t.eq(is)?Fc:(i=this.shr(1).div(t).shl(1)).eq(Jo)?t.isNegative()?Fc:Kd:(e=this.sub(t.mul(i)),s=i.add(e.div(t)));if(t.eq(is))return this.unsigned?Xd:Jo;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();s=Jo}for(e=this;e.gte(t);){i=x.max(1,x.floor(e.toNumber()/t.toNumber()));for(var n=x.ceil(x.log(i)/x.LN2),r=n<=48?1:Yd(2,n-48),o=Rn(i),h=o.mul(t);h.isNegative()||h.gt(e);)h=(o=Rn(i-=r,this.unsigned)).mul(t);o.isZero()&&(o=Fc),s=s.add(o),e=e.sub(h)}return s},K.div=K.divide,K.modulo=function(t){return Mt(t)||(t=Zo(t)),$n?Be((this.unsigned?$n.rem_u:$n.rem_s)(this.low,this.high,t.low,t.high),$n.get_high(),this.unsigned):this.sub(this.div(t).mul(t))},K.mod=K.modulo,K.rem=K.modulo,K.not=function(){return Be(~this.low,~this.high,this.unsigned)},K.countLeadingZeros=function(){return this.high?x.clz32(this.high):x.clz32(this.low)+32},K.clz=K.countLeadingZeros,K.countTrailingZeros=function(){return this.low?Ud(this.low):Ud(this.high)+32},K.ctz=K.countTrailingZeros,K.and=function(t){return Mt(t)||(t=Zo(t)),Be(this.low&t.low,this.high&t.high,this.unsigned)},K.or=function(t){return Mt(t)||(t=Zo(t)),Be(this.low|t.low,this.high|t.high,this.unsigned)},K.xor=function(t){return Mt(t)||(t=Zo(t)),Be(this.low^t.low,this.high^t.high,this.unsigned)},K.shiftLeft=function(t){return Mt(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?Be(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):Be(0,this.low<<t-32,this.unsigned)},K.shl=K.shiftLeft,K.shiftRight=function(t){return Mt(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?Be(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):Be(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},K.shr=K.shiftRight,K.shiftRightUnsigned=function(t){return Mt(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?Be(this.low>>>t|this.high<<32-t,this.high>>>t,this.unsigned):Be(32===t?this.high:this.high>>>t-32,0,this.unsigned)},K.shru=K.shiftRightUnsigned,K.shr_u=K.shiftRightUnsigned,K.rotateLeft=function(t){var i;return Mt(t)&&(t=t.toInt()),0==(t&=63)?this:32===t?Be(this.high,this.low,this.unsigned):t<32?(i=32-t,Be(this.low<<t|this.high>>>i,this.high<<t|this.low>>>i,this.unsigned)):(i=32-(t-=32),Be(this.high<<t|this.low>>>i,this.low<<t|this.high>>>i,this.unsigned))},K.rotl=K.rotateLeft,K.rotateRight=function(t){var i;return Mt(t)&&(t=t.toInt()),0==(t&=63)?this:32===t?Be(this.high,this.low,this.unsigned):t<32?(i=32-t,Be(this.high<<i|this.low>>>t,this.low<<i|this.high>>>t,this.unsigned)):(i=32-(t-=32),Be(this.low<<i|this.high>>>t,this.high<<i|this.low>>>t,this.unsigned))},K.rotr=K.rotateRight,K.toSigned=function(){return this.unsigned?Be(this.low,this.high,!1):this},K.toUnsigned=function(){return this.unsigned?this:Be(this.low,this.high,!0)},K.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},K.toBytesLE=function(){var t=this.high,i=this.low;return[255&i,i>>>8&255,i>>>16&255,i>>>24,255&t,t>>>8&255,t>>>16&255,t>>>24]},K.toBytesBE=function(){var t=this.high,i=this.low;return[t>>>24,t>>>16&255,t>>>8&255,255&t,i>>>24,i>>>16&255,i>>>8&255,255&i]},Bd.fromBytes=function(t,i,e){return e?Bd.fromBytesLE(t,i):Bd.fromBytesBE(t,i)},Bd.fromBytesLE=function(t,i){return new Bd(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,i)},Bd.fromBytesBE=function(t,i){return new Bd(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],i)};var Io=Bd;function tf(t,i){return t.lessThan(i)?t:i}r();var ef=9007199254740991,sf=2**-52;function rh(t,i,e){return x.min(x.max(t,i),e)}function Xs(t,i,e){return t===i||x.abs(t-i)<=e}function _n(t,i){if(t===i)return!0;const e=x.abs(t-i);if(e<sf)return!0;return e<x.max(x.abs(t),x.abs(i))*sf}function nf(t,i){return t%i+(t<0?i:0)}function rf(t){return t!=t}function of(t,i){return t===i||rf(t)&&rf(i)}function hf(t,i){let e=t,s=i;for(;0!==s;){const t=e%s;e=s,s=t}return e<0?-e:e}function xr(t,i){return t.reduce(((t,e)=>t+i(e)),0)}function af(t){return!j(t.getTime())}function Du(){return Date.now()||(new Date).getTime()}function uf(t){return t/1e3}function ia(t){return 1e3*t}var si=1/6,cf=Io.fromNumber(ef);function mt(t,i){if(0===i)return t.isZero()?NaN:t.isNegative()?-1/0:1/0;if(t.lessThanOrEqual(cf))return t.toNumber()/i;const e=t.divide(i),s=t.subtract(e.multiply(i));return e.toNumber()+s.toNumber()/i}var lf=!!("ontouchstart"in self||self.DocumentTouch&&h instanceof self.DocumentTouch)||!(!zl||!zl.msMaxTouchPoints),df=Pd(),ff=!(!df||!df.webkitShowPlaybackTargetPicker),Uc=class{get uv(){return void 0===this.fv&&(this.fv=this._v()),this.fv}_v(){return 0}get vv(){return!ui.C_}get mv(){if(s.screen)return{width:s.screen.width,height:s.screen.height}}get pv(){return s.devicePixelRatio||1}get Av(){return ff}get yv(){return!1}get bv(){return!0}get Mv(){return!(!ui.M_&&!ui.Ka)||!!ui.u_}get Tv(){return ui.u_}get Sv(){return!ui.Ka}get Nv(){return!0}get Iv(){return!0}get Dv(){return!1}get Ev(){}get Lv(){return!0}get xv(){return!1}get Cv(){return ui.u_}get Ov(){return!1}Rv(t,i){return!0}Pv(t){return t>=2*si}constructor(){this.fv=void 0,this.zv=!1,this.Je=lf,this.Qs=!1,this.Bv=!0}},Kn=class extends Uc{constructor(){super()}};r();var gf=class extends Kn{get Ev(){if(ui.ag)return 4096}Rv(t,i){if(t&&t.Uv&&i&&i.Uv){let e=Gn(t.Uv,"mp4a.40.2")&&Gn(i.Uv,"mp4a.40.5"),s=Gn(t.Uv,"mp4a.40.5")&&Gn(i.Uv,"mp4a.40.2"),n=Gn(t.Uv,"mp4a.40.2")&&Gn(i.Uv,"mp4a.40.34"),r=Gn(t.Uv,"mp4a.40.34")&&Gn(i.Uv,"mp4a.40.2"),o=Gn(t.Uv,"mp4a.40.5")&&Gn(i.Uv,"mp4a.40.34"),h=Gn(t.Uv,"mp4a.40.34")&&Gn(i.Uv,"mp4a.40.5");return!(e||s||n||r||o||h)}return!0}};function Gn(t,i){return t.indexOf(i)>-1}r();var _f=class extends Kn{Pv(t){return t>=2}};r();var vf=class extends Kn{get Ov(){return ui.S_<17}constructor(){super(),this.zv=ui.S_>=11,this.Bv=ui.M_&&!(ui.Ka&&ui.S_<10)}};r();var wf,mf=class extends Kn{get Lv(){return!ui.dg||(ui.Hg?92!==ui.Jg:ui.Gg>=100)}};r(),r(),r(),r(),r();var pf=function(){const t=Rd();if(!t)return!1;const i=t.muted;return t.muted=!i,t.muted!==i}(),Af=function(){if(ui.Dg)return!1;const t=Rd();if(!t)return!1;const i=t.volume;return t.volume=i/2+.1,i!==t.volume}();var Cn,yf,Ju,oi,bf,Mf,jn=class extends Uc{_v(){return this.Qv.uv}get Ev(){return this.Qv.Ev}get Lv(){return this.Qv.Lv}Rv(t,i){return this.Qv.Rv(t,i)}Pv(t){return this.Qv.Pv(t)}get Ov(){return this.Qv.Ov}constructor(t){super(),this.Qv=t,this.zv=this.Qv.zv,this.Je=this.Qv.Je,this.Bv=pf&&this.Qv.Bv}},Mc=class extends jn{get Dv(){return ui.Ka}constructor(t){super(t),this.zv=!0,this.Qs=!0}};r(),r();var kt=class{Fv(){return new this.Yv}Vv(t){return this.Yv.isTypeSupported(t)}constructor(t){this.Yv=ea(t)}};function ea(t){return t&&te(oi.ManagedMediaSource)?oi.ManagedMediaSource:te(oi.MediaSource)?oi.MediaSource:void 0}var Tf=class extends Mc{get Dv(){return!0}_v(){return ea(!0)?super._v():1}};r();var Sf=class extends jn{get yv(){return ui.i_<3}get bv(){return ui.i_>=3}get mv(){return s.tizen&&!this.Gv&&s.tizen.systeminfo.getPropertyValue("DISPLAY",(t=>{const i=t.resolutionWidth,e=t.resolutionHeight;1===i&&1===e||(this.Gv={width:i,height:e})})),this.Gv}get xv(){return ui.i_<3}Rv(t,i){return super.Rv(t,i)}};r();var Nf=class extends jn{get mv(){return s.webOS&&!this.Gv&&s.webOS.deviceInfo((t=>{this.Gv={width:t.screenWidth,height:t.screenHeight}})),this.Gv}get Nv(){return!1}};r();var If=class extends jn{get Dv(){return!0}};!function(t){wf=t}(function(){const t=function(){if(ui.p_)return new gf;if(ui.l_||ui.f_)return new _f;if(ui.M_)return new vf;if(ui.Yg)return new mf;return new Kn}();return ui.Ka?new Tf(t):ui.Qs?new Mc(t):ui.$g?new Sf(t):ui.s_?new Nf(t):ui.ag?new If(t):new jn(t)}()),r(),r(),r();var Df=!(ui.f_&&!ui.__),Sr=self.console;function Ef(t){if(jl(t))try{return JSON.stringify(t)}catch(t){}return t}function kf(t){return t.map(Ef).join(" ")}function Lf(t){const i=Sr&&Sr[t];return i?i.bind&&Df?i.bind(Sr):function(){for(var i=arguments.length,e=new Array(i),s=0;s<i;s++)e[s]=arguments[s];Sr[t](kf(e))}:void 0}var xf=Lf("log")||ul,ae=Lf("warn")||xf.bind(void 0,"WARNING:"),Xt=Lf("error")||xf.bind(void 0,"ERROR:"),Cf=(()=>{const t=Sr&&Sr.assert;return t?t.bind&&Df?t.bind(Sr):function(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];Sr.assert(t,kf(e))}:function(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];t||Xt("Assertion failed:",...e)}})();function jf(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),_.defineProperty(t,s.key,s)}}function Of(t,i){var e=function(t,i){var e=t.length;if(e<=1)return t;for(var s=new Array(e),n=1;n<e;n*=2){Rf(t,i,n,s);var r=t;t=s,s=r}return t}(t,i);return e!==t&&Rf(e,null,t.length,t),t}function Rf(t,i,e,s){var n,r,o,h,a,u=t.length,c=0,l=2*e;for(n=0;n<u;n+=l)for(o=(r=n+e)+e,r>u&&(r=u),o>u&&(o=u),h=n,a=r;;)if(h<r&&a<o)i(t[h],t[a])<=0?s[c++]=t[h++]:s[c++]=t[a++];else if(h<r)s[c++]=t[h++];else{if(!(a<o))break;s[c++]=t[a++]}}r();var Pf=/[a-zA-Z]/,zf=/[0-9]/,Bf=/[0-9a-fA-F]/,Uf=/^0x/i,Qf=/^[0-9]+$/,Ff=/^[0-9a-fA-F]+$/,Yf=/^[0-7]+$/,Vf=_.prototype.toString,Gf=Array.isArray||function(t){return"[object Array]"===Vf.call(t)},Wf=void 0!==b&&"symbol"==typeof f;function Zf(t){return Gf(t)?t:Array.from(t)}function Hf(t,i,e){var s=t[i];t[i]=t[e],t[e]=s}function Xf(t){return t>=65&&t<=90}function qf(t){return Xf(t)||function(t){return t>=97&&t<=122}(t)}function Kf(t){return t>=48&&t<=57}function Jf(t){return Kf(t)||qf(t)}function $f(t){return Kf(t)||t>=65&&t<=70||t>=97&&t<=102}function tg(t){return Xf(t)?t+32:t}function ig(t){return Kf(t)?t-48:t>=65&&t<=70?t-65+10:t>=97&&t<=102?t-97+10:-1}function eg(t,i){return void 0===i&&(i=!1),0<=t&&t<=9?t+48:10<=t&&t<=15?t+(i?87:55):-1}var sg=x.min,ng=String.fromCharCode,rg=16384;function og(t){for(var i=t.length,e=[],s=0;s<i;s+=rg){var n=sg(s+rg,i);e.push(ng.apply(null,t.slice(s,n)))}return e.join("")}var hg=2147483647,ag=/[^\0-\x7E]/,ug=/[\x2E\u3002\uFF0E\uFF61]/g,cg={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},lg=x.floor,dg=String.fromCharCode;function fg(t){throw new RangeError(cg[t])}function Bc(t){for(var i=[],e=0,s=t.length;e<s;){var n=t.charCodeAt(e++);if(n>=55296&&n<=56319&&e<s){var r=t.charCodeAt(e++);56320==(64512&r)?i.push(((1023&n)<<10)+(1023&r)+65536):(i.push(n),e--)}else i.push(n)}return i}var gg,_g,jr,vg=function(t,i){return t+22+75*(t<26)-((0!=i)<<5)},wg=function(t,i,e){var s=0;for(t=e?lg(t/700):t>>1,t+=lg(t/i);t>455;s+=36)t=lg(t/35);return lg(s+36*t/(t+38))},mg=function(t){return function(t,i){var e=t.split("@"),s="";e.length>1&&(s=e[0]+"@",t=e[1]);var n=function(t,i){for(var e=[],s=t.length;s--;)e[s]=i(t[s]);return e}((t=t.replace(ug,".")).split("."),i).join(".");return s+n}(t,(function(t){return ag.test(t)?"xn--"+function(t){for(var i=[],e=(t=Bc(t)).length,s=128,n=0,r=72,o=0,h=t;o<h.length;o++){var a=h[o];a<128&&i.push(dg(a))}var u=i.length,c=u;for(u&&i.push("-");c<e;){for(var l=hg,d=0,f=t;d<f.length;d++){var g=f[d];g>=s&&g<l&&(l=g)}var _=c+1;l-s>lg((hg-n)/_)&&fg("overflow"),n+=(l-s)*_,s=l;for(var v=0,w=t;v<w.length;v++){var m=w[v];if(m<s&&++n>hg&&fg("overflow"),m==s){for(var p=n,A=36;;A+=36){var y=A<=r?1:A>=r+26?26:A-r;if(p<y)break;var b=p-y,M=36-y;i.push(dg(vg(y+b%M,0))),p=lg(b/M)}i.push(dg(vg(p,0))),r=wg(n,_,c==u),n=0,++c}}++n,++s}return i.join("")}(t):t}))};function go(t){for(var i=[],e=0;e<t.length;e++){var s=t[e];s>65535&&(s-=65536,i.push(s>>>10&1023|55296),s=56320|1023&s),i.push(s)}return og(i)}function pg(t){if(t>=55296&&t<=57343)throw new g("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value")}function Ag(t,i){return t>>i&63|128}function yg(t,i){0!=(4294967168&t)?(0==(4294965248&t)?i.push(t>>6&31|192):0==(4294901760&t)?(pg(t),i.push(t>>12&15|224),i.push(Ag(t,6))):0==(4292870144&t)&&(i.push(t>>18&7|240),i.push(Ag(t,12)),i.push(Ag(t,6))),i.push(63&t|128)):i.push(t)}function bg(t){for(var i=[],e=0;e<t.length;e++){yg(t[e],i)}return i}function Mg(){if(jr>=_g)throw new g("Invalid byte index");var t=255&gg[jr];if(jr++,128==(192&t))return 63&t;throw new g("Invalid continuation byte")}function Tg(){var t,i;if(jr>_g)throw new g("Invalid byte index");if(jr===_g)return!1;if(t=255&gg[jr],jr++,0==(128&t))return t;if(192==(224&t)){if((i=(31&t)<<6|Mg())>=128)return i;throw new g("Invalid continuation byte")}if(224==(240&t)){if((i=(15&t)<<12|Mg()<<6|Mg())>=2048)return pg(i),i;throw new g("Invalid continuation byte")}if(240==(248&t)&&(i=(7&t)<<18|Mg()<<12|Mg()<<6|Mg())>=65536&&i<=1114111)return i;throw new g("Invalid UTF-8 detected")}function Sg(t){return[37,eg(t>>4),eg(15&t)]}function Ng(t){return function(t){return t>=0&&t<=31}(t)||t>126}function Ig(t){return Ng(t)||32===t||34===t||60===t||62===t||96===t}function Dg(t){return Ig(t)||35===t||63===t||123===t||125===t}function Eg(t){return Dg(t)||47===t||58===t||59===t||61===t||64===t||t>=91&&t<=94||124===t}function kg(t){return t<33||t>126||34===t||35===t||60===t||62===t}function Lg(t){return kg(t)||39===t}function xg(t,i){if(!i(t))return[t];for(var e=bg([t]),s=[],n=0;n<e.length;n++){var r=e[n];s.push.apply(s,Sg(r))}return s}function Cg(t,i){for(var e=[],s=0,n=Bc(t);s<n.length;s++){var r=n[s];e.push.apply(e,xg(r,i))}return go(e)}function jg(t){return function(t){for(var i=[],e=t.length,s=0;s<e;s++){var n=t[s];if(37===n&&s+2<e&&$f(t[s+1])&&$f(t[s+2])){var r=ig(t[s+1])<<4|ig(t[s+2]);i.push(r),s+=2}else i.push(n)}return i}(bg(t))}function Og(t){return go(function(t){gg=t.slice(),_g=gg.length,jr=0;for(var i,e=[];!1!==(i=Tg());)e.push(i);return e}(jg(Bc(t))))}function Rg(t){var i=t.length,e=[0,0,0,0,0,0,0,0],s=0,n=null,r=0;if(r<i&&":"===t[r]){if(!(r+1<i&&":"===t[r+1]))throw new w;r+=2,n=s+=1}for(;r<i;){if(8===s)throw new w("Too many groups");if(":"!==t[r]){for(var o=0,h=0;h<4&&r<i&&Bf.test(t[r]);)o=o<<4|C(t[r],16),r+=1,h+=1;if("."===t[r]){if(0===h)throw new w;if(r-=h,s>6)throw new w;for(var a=0;r<i;){var u=null;if(a>0){if(!("."===t[r]&&a<4))throw new w;r+=1}if(!zf.test(t[r]))throw new w;for(;r<i&&zf.test(t[r]);){var c=C(t[r],10);if(null===u)u=c;else{if(0===u)throw new w;if((u=10*u+c)>255)throw new w}r+=1}e[s]=e[s]<<8|u,2!==(a+=1)&&4!==a||(s+=1)}if(4!==a)throw new w;break}if(":"===t[r]){if((r+=1)===i)throw new w}else if(r<i)throw new w;e[s]=o,s+=1}else{if(null!==n)throw new w("Too many :: groups");r+=1,n=s+=1}}if(null!==n){var l=s-n;for(s=7;0!==s&&l>0;)Hf(e,s,n+l-1),s-=1,l-=1}else if(8!==s)throw new w;return e}function Pg(t){var i=10,e=Qf;return Uf.test(t)?(t=t.slice(2),i=16,e=Ff):t.length>=2&&"0"===t[0]&&(t=t.slice(1),i=8,e=Yf),""===t?0:e.test(t)?C(t,i):void 0}var Tr={Wv:4},zg=/[\0\t\n\r #%/:?@\[\\\]]/,Bg=/[\0\t\n\r #/:?@\[\\\]]/;function Ug(t,i){if("["===t[0]){if("]"!==t[t.length-1])throw new w("Invalid IPv6 address");return{Wv:2,Zv:Rg(t.slice(1,-1))}}if(!i)return function(t){if(Bg.test(t))throw new w("Invalid code point in opaque host");var i=Cg(t,Ng);return""===i?Tr:{Wv:3,Hv:i}}(t);var e=function(t){var i=function(t){return mg(t.toLowerCase())}(t);return i}(Og(t));if(zg.test(e))throw new w("Invalid code point in host");var s=function(t){var i=t.split(".");if(""===i[i.length-1]&&i.pop(),!(i.length>4)){for(var e=[],s=0;s<i.length;s++){var n=i[s];if(""===n)return;var r=Pg(n);if(void 0===r)return;e.push(r)}for(var o=0;o<e.length-1;o++)if(e[o]>255)throw new w;if(e[e.length-1]>=x.pow(256,5-e.length))throw new w;for(var h=e.pop(),a=0;a<e.length;a++)h+=e[a]*x.pow(256,3-a);return h}}(e);return void 0!==s?{Wv:1,Zv:s}:""===e?Tr:{Wv:0,Xv:e}}function Qg(t){switch(t.Wv){case 0:return t.Xv;case 1:return function(t){for(var i=[],e=t,s=1;s<=4;s++)i.push(""+(255&e)),4!==s&&i.push("."),e>>>=8;return i.reverse().join("")}(t.Zv);case 2:return"["+function(t){for(var i="",e=function(t){for(var i=0,e=0,s=0,n=0,r=0;r<8;r++)0===t[r]?(0===n&&(s=r),n++):(n>e&&(i=s,e=n),n=0);return n>e&&(i=s,e=n),e>1?i:null}(t),s=!1,n=0;n<8;n++){if(s){if(0===t[n])continue;s=!1}e!==n?(i+=t[n].toString(16),7!==n&&(i+=":")):(i+=0===n?"::":":",s=!0)}return i}(t.Zv)+"]";case 3:return t.Hv;case 4:return""}}var Fg=/\+/g;function Yg(t){return 42===t||45===t||46===t||95===t||Jf(t)}function Vg(t){for(var i=t.split("&"),e=[],s=0;s<i.length;s++){var n=i[s];if(""!==n){var r=n.indexOf("="),o=void 0,h=void 0;-1!==r?(o=n.slice(0,r),h=n.slice(r+1)):(o=n,h=""),o=o.replace(Fg," "),h=h.replace(Fg," ");var a=Og(o),u=Og(h);e.push([a,u])}}return e}function Gg(t){for(var i="",e=0;e<t.length;e++){var s=t[e];e>0&&(i+="&"),i+=Wg(bg(Bc(s[0])))+"="+Wg(bg(Bc(s[1])))}return i}function Wg(t){for(var i=[],e=0;e<t.length;e++){var s=t[e];32===s?i.push(43):Yg(s)?i.push(s):i.push.apply(i,Sg(s))}return og(i)}var Zg=/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/;function ke(t){var i=""+t,e=Zg.exec(i);return e?function(t,i){for(var e=t.length,s=[],n=i;n<e;n++){var r=t.charCodeAt(n);if(Xg(r))if(qg(r)||n===e-1)s.push(Hg);else{var o=t.charCodeAt(n+1);qg(o)?(s.push(r,o),n++):s.push(Hg)}else s.push(r)}return t.slice(0,i)+og(s)}(i,e.index):i}var Hg=65533,Xg=function(t){return 55296==(63488&t)},qg=function(t){return 0!=(1024&t)};function Kg(t,i){var e=t[0],s=i[0];return e===s?0:e<s?-1:1}function Jg(t){t.vf.length=0}function $g(t,i){!function(t,i){for(var e=0;e<i.length;e++)t[e]=i[e];t.length=i.length}(t.vf,Vg(i))}function t_(t){if(t.Yu){var i=Gg(t.vf);""===i&&(i=null),t.Yu.Yu.qv=i}}var Aa=function(){function t(t){if(void 0===t&&(t=void 0),this.Yu=null,null==t)this.vf=[];else if("object"==typeof t||"function"==typeof t)if(function(t){return t instanceof Aa&&!!Gf(t.vf)&&(!Wf||t[f]===i_)}(t))this.vf=t.vf.slice();else if(function(t){return null!=t&&(!!Gf(t)||!!Wf&&"function"==typeof t[f])}(t)){this.vf=[];for(var i=0,e=Zf(t);i<e.length;i++){var s=Zf(e[i]);if(2!==s.length)throw new w("Invalid name-value pair");this.vf.push([ke(s[0]),ke(s[1])])}}else for(var n in this.vf=[],t)_.prototype.hasOwnProperty.call(t,n)&&this.vf.push([ke(n),ke(t[n])]);else(t=ke(t)).length>0&&"?"===t[0]&&(t=t.slice(1)),this.vf=Vg(t)}var i=t.prototype;return i.append=function(t,i){t=ke(t),i=ke(i),this.vf.push([t,i]),t_(this)},i.delete=function(t){t=ke(t);for(var i=this.vf,e=0;e<i.length;){i[e][0]===t?i.splice(e,1):e++}t_(this)},i.get=function(t){t=ke(t);for(var i=this.vf,e=0;e<i.length;e++){var s=i[e];if(s[0]===t)return s[1]}return null},i.getAll=function(t){t=ke(t);for(var i=this.vf,e=[],s=0;s<i.length;s++){var n=i[s];n[0]===t&&e.push(n[1])}return e},i.has=function(t){t=ke(t);for(var i=this.vf,e=0;e<i.length;e++){if(i[e][0]===t)return!0}return!1},i.set=function(t,i){t=ke(t),i=ke(i);for(var e=this.vf,s=!1,n=0;n<e.length;){var r=e[n];r[0]===t?s?e.splice(n,1):(r[1]=i,s=!0,n++):n++}s||e.push([t,i]),t_(this)},i.sort=function(){Of(this.vf,Kg),t_(this)},i.toString=function(){return Gg(this.vf)},i.entries=function(){return new r_(this.vf,e_)},i.keys=function(){return new r_(this.vf,s_)},i.values=function(){return new r_(this.vf,n_)},i.forEach=function(t){var i=this;this.vf.forEach((function(e){return t(e[1],e[0],i)}))},t}(),i_=Aa.prototype.entries;Wf&&(Aa.prototype[f]=i_);var e_=function(t){return[t[0],t[1]]},s_=function(t){return t[0]},n_=function(t){return t[1]},r_=function(){function t(t,i){this.Kv=0,this.vf=t,this.Jv=i}return t.prototype.next=function(){return this.Kv<this.vf.length?{done:!1,value:this.Jv(this.vf[this.Kv++])}:{done:!0,value:void 0}},t}(),o_="null";var tc=_.create(null);tc.ftp=21,tc.file=0,tc.gopher=70,tc.http=80,tc.https=443,tc.ws=80,tc.wss=443;var h_=/^(?:\.|%2e)$/i,a_=/^(?:\.|%2e){2}$/i;function u_(t){return h_.test(t)}function c_(t){return a_.test(t)}function l_(t){return void 0!==tc[t]}function d_(t){return l_(t.$v)}function f_(t){return""!==t.iw||""!==t.ew}function g_(t){var i=t.length;if(!(i>=2))return!1;if(!v_(t.slice(0,2)))return!1;if(2!==i){var e=t[2];if(47!==e&&92!==e&&63!==e&&35!==e)return!1}return!0}function __(t){return 2===t.length&&Pf.test(t[0])&&(":"===t[1]||"|"===t[1])}function v_(t){return 2===t.length&&__(og(t))}function w_(t){return __(t)&&":"===t[1]}function m_(t){var i=t.nw;0!==i.length&&("file"===t.$v&&1===i.length&&w_(i[0])||i.pop())}function p_(t){return null===t.ow||Tr===t.ow||t.hw||"file"===t.$v}var ts=-1,A_=/\t|\n|\r/g,y_=/^[\x00-\x1f ]+|[\x00-\x1f ]+$/g;function b_(t,i,e,s){void 0===e&&(e=null),void 0===s&&(s=null),e||(e=new T_,t=t.replace(y_,""));var n=null!==s?s:0;i=i||null;for(var r=[],o=!1,h=!1,a=!1,u=Bc(t=t.replace(A_,"")),c=u.length,l=0;l<=c;){var d=l<c?u[l]:ts;switch(n){case 0:if(!qf(d)){if(null===s){r.length=0,n=2;continue}throw new w("Invalid scheme")}r.push(tg(d)),n=1;break;case 1:if(Jf(d)||43===d||45===d||46===d)r.push(tg(d));else{if(58!==d){if(null===s){r.length=0,n=2,l=0;continue}throw new w("Invalid scheme")}var f=go(r);if(null!==s){if(l_(e.$v)&&!l_(f))return;if(!l_(e.$v)&&l_(f))return;if((f_(e)||null!==e.aw)&&"file"===f)return;if("file"===e.$v&&(e.ow===Tr||null===e.ow))return}if(e.$v=f,null!==s)return void(d_(e)&&e.aw===tc[e.$v]&&(e.aw=null));r.length=0,"file"===e.$v?n=13:d_(e)&&i&&i.$v===e.$v?n=3:d_(e)?n=7:47===u[l+1]?(n=4,l+=1):(e.hw=!0,e.nw.push(""),n=18)}break;case 2:if(!i||i.hw&&35!==d)throw new w("Invalid scheme");i.hw&&35===d?(e.$v=i.$v,e.nw=i.nw.slice(),e.qv=i.qv,e.uw="",e.hw=!0,n=20):"file"!==i.$v?(n=5,l-=1):(n=13,l-=1);break;case 3:47===d&&47===u[l+1]?n=8:(n=5,l-=1);break;case 4:47===d?n=9:(n=17,l-=1);break;case 5:e.$v=i.$v,ts===d?(e.iw=i.iw,e.ew=i.ew,e.ow=i.ow,e.aw=i.aw,e.nw=i.nw.slice(),e.qv=i.qv):47===d?n=6:63===d?(e.iw=i.iw,e.ew=i.ew,e.ow=i.ow,e.aw=i.aw,e.nw=i.nw.slice(),e.qv="",n=19):35===d?(e.iw=i.iw,e.ew=i.ew,e.ow=i.ow,e.aw=i.aw,e.nw=i.nw.slice(),e.qv=i.qv,e.uw="",n=20):92===d&&d_(e)?n=6:(e.iw=i.iw,e.ew=i.ew,e.ow=i.ow,e.aw=i.aw,e.nw=i.nw.slice(),e.nw.pop(),n=17,l-=1);break;case 6:!d_(e)||47!==d&&92!==d?47===d?n=9:(e.iw=i.iw,e.ew=i.ew,e.ow=i.ow,e.aw=i.aw,n=17,l-=1):n=8;break;case 7:if(47!==d||47!==u[l+1]){n=8;continue}n=8,l+=1;break;case 8:47!==d&&92!==d&&(n=9,l-=1);break;case 9:if(64===d){o&&r.unshift(37,52,48),o=!0;for(var g=0;g<r.length;g++){var _=r[g];if(58!==_||a){var v=go(xg(_,Eg));a?e.ew+=v:e.iw+=v}else a=!0}r.length=0}else if(ts===d||47===d||63===d||35===d||d_(e)&&92===d){if(o&&0===r.length)throw new w("Invalid host");l-=r.length+1,r.length=0,n=10}else r.push(d);break;case 10:case 11:if(null!==s&&"file"===e.$v)l-=1,n=15;else if(58!==d||h)if(ts===d||47===d||63===d||35===d||d_(e)&&92===d){if(l-=1,d_(e)&&0===r.length)throw new w("Invalid host");if(null!==s&&0===r.length&&(f_(e)||null!==e.aw))return;var m=Ug(go(r),d_(e));if(e.ow=m,r.length=0,n=16,null!==s)return}else 91===d?h=!0:93===d&&(h=!1),r.push(d);else{if(0===r.length)throw new w("Invalid host");var p=Ug(go(r),d_(e));if(e.ow=p,r.length=0,n=12,11===s)return}break;case 12:if(Kf(d))r.push(d);else{if(!(ts===d||47===d||63===d||35===d||d_(e)&&92===d||null!==s))throw new w("Invalid port");if(0!==r.length){var A=C(go(r),10);if(A>65535)throw new w("Invalid port");e.aw=A===tc[e.$v]?null:A,r.length=0}if(null!==s)return;n=16,l-=1}break;case 13:e.$v="file",47===d||92===d?n=14:i&&"file"===i.$v?ts===d?(e.ow=i.ow,e.nw=i.nw.slice(),e.qv=i.qv):63===d?(e.ow=i.ow,e.nw=i.nw.slice(),e.qv="",n=19):35===d?(e.ow=i.ow,e.nw=i.nw.slice(),e.qv=i.qv,e.uw="",n=20):(g_(u.slice(l))||(e.ow=i.ow,e.nw=i.nw.slice(),m_(e)),n=17,l-=1):(n=17,l-=1);break;case 14:47===d||92===d?n=15:(i&&"file"===i.$v&&!g_(u.slice(l))&&(w_(i.nw[0])?e.nw.push(i.nw[0]):e.ow=i.ow),n=17,l-=1);break;case 15:if(ts===d||47===d||92===d||63===d||35===d)if(l-=1,null===s&&v_(r))n=17;else if(0===r.length){if(e.ow=Tr,null!==s)return;n=16}else{var y=Ug(go(r),d_(e));if(0===y.Wv&&"localhost"===y.Xv&&(y=Tr),e.ow=y,null!==s)return;r.length=0,n=16}else r.push(d);break;case 16:d_(e)?(n=17,47!==d&&92!==d&&(l-=1)):null===s&&63===d?(e.qv="",n=19):null===s&&35===d?(e.uw="",n=20):ts!==d&&(n=17,47!==d&&(l-=1));break;case 17:if(ts===d||47===d||d_(e)&&92===d||null===s&&(63===d||35===d)){var b=go(r);if(c_(b)?(m_(e),47===d||d_(e)&&92===d||e.nw.push("")):!u_(b)||47===d||d_(e)&&92===d?u_(b)||("file"===e.$v&&0===e.nw.length&&v_(r)&&(Tr!==e.ow&&null!==e.ow&&(e.ow=Tr),r[1]=58,b=go(r)),e.nw.push(b)):e.nw.push(""),r.length=0,"file"===e.$v&&(ts===d||63===d||35===d))for(;e.nw.length>1&&""===e.nw[0];)e.nw.shift();63===d?(e.qv="",n=19):35===d&&(e.uw="",n=20)}else r.push.apply(r,xg(d,Dg));break;case 18:63===d?(e.qv="",n=19):35===d?(e.uw="",n=20):ts!==d&&(e.nw[0]+=go(xg(d,Ng)));break;case 19:null===s&&35===d?(e.uw="",n=20):ts!==d&&(e.qv+=go(xg(d,d_(e)?Lg:kg)));break;case 20:ts===d||0===d||(e.uw+=go(xg(d,Ig)))}l++}return e}function M_(t,i,e,s){try{b_(t,i,e,s)}catch(t){}}var T_=function(){this.$v="",this.iw="",this.ew="",this.ow=null,this.aw=null,this.nw=[],this.qv=null,this.uw=null,this.hw=!1};function S_(t){switch(t.$v){case"blob":var i;try{i=b_(t.nw[0],null)}catch(t){return o_}return S_(i);case"ftp":case"gopher":case"http":case"https":case"ws":case"wss":return function(t,i,e){return t+"://"+Qg(i)+(null===e?"":":"+e)}(t.$v,t.ow,t.aw);default:return o_}}var N_=function(){function t(t,i){var e,s=null;if(null!=i)if(function(t){return null!=t&&t instanceof N_&&"object"==typeof t.Yu}(i))s=i.Yu;else try{s=b_(String(i),null)}catch(t){throw new w("Invalid base URL: "+t.message)}try{e=b_(String(t),s)}catch(t){throw new w("Invalid URL: "+t.message)}var n=e.qv;this.Yu=e,this.qv=function(t){var i=new Aa;return null!==t&&$g(i,t),i}(n),this.qv.Yu=this}var i=t.prototype;return i.toString=function(){return this.href},i.toJSON=function(){return this.href},function(t,i,e){i&&jf(t.prototype,i),e&&jf(t,e)}(t,[{key:"href",get:function(){return function(t,i){void 0===i&&(i=!1);var e=t.$v+":";if(null!==t.ow?(e+="//",f_(t)&&(e+=t.iw,""!==t.ew&&(e+=":"+t.ew),e+="@"),e+=Qg(t.ow),null!==t.aw&&(e+=":"+t.aw)):null===t.ow&&"file"===t.$v&&(e+="//"),t.hw)e+=t.nw[0];else for(var s=0,n=t.nw;s<n.length;s++)e+="/"+n[s];return null!==t.qv&&(e+="?"+t.qv),i||null===t.uw||(e+="#"+t.uw),e}(this.Yu)},set:function(t){var i;try{i=b_(String(t),null)}catch(t){throw new w("Invalid URL: "+t.message)}this.Yu=i,Jg(this.qv);var e=this.Yu.qv;null!==e&&$g(this.qv,e)}},{key:"origin",get:function(){return S_(this.Yu)}},{key:"protocol",get:function(){return this.Yu.$v+":"},set:function(t){M_(t+":",null,this.Yu,0)}},{key:"username",get:function(){return this.Yu.iw},set:function(t){p_(this.Yu)||(this.Yu.iw=Cg(t,Eg))}},{key:"password",get:function(){return this.Yu.ew},set:function(t){p_(this.Yu)||(this.Yu.ew=Cg(t,Eg))}},{key:"host",get:function(){var t=this.Yu,i=t.ow;if(null===i)return"";var e=t.aw,s=Qg(i);return null!==e&&(s+=":"+e),s},set:function(t){this.Yu.hw||M_(t,null,this.Yu,10)}},{key:"hostname",get:function(){var t=this.Yu.ow;return null===t?"":Qg(t)},set:function(t){this.Yu.hw||M_(t,null,this.Yu,11)}},{key:"port",get:function(){var t=this.Yu.aw;return null===t?"":""+t},set:function(t){p_(this.Yu)||(""===t?this.Yu.aw=null:M_(t,null,this.Yu,12))}},{key:"pathname",get:function(){var t=this.Yu.nw;return this.Yu.hw?t[0]:0===t.length?"":"/"+t.join("/")},set:function(t){this.Yu.hw||(this.Yu.nw.length=0,M_(t,null,this.Yu,16))}},{key:"search",get:function(){var t=this.Yu.qv;return null===t||""===t?"":"?"+t},set:function(t){t=ke(t);var i=this.Yu;if(""===t)return i.qv=null,void Jg(this.qv);"?"===t[0]&&(t=t.slice(1)),i.qv="",M_(t,null,i,19),$g(this.qv,t)}},{key:"searchParams",get:function(){return this.qv}},{key:"hash",get:function(){var t=this.Yu.uw;return null===t||""===t?"":"#"+t},set:function(t){""!==t?("#"===t[0]&&(t=t.slice(1)),this.Yu.uw="",M_(t,null,this.Yu,20)):this.Yu.uw=null}}]),t}();function I_(t){return t.document&&t.document.baseURI||t.location.href||""}function D_(){let t=oi,i=t.location.href;for(;t!==s.top;){t=t.parent;try{i=t.location.href}catch(t){}}return i}r();var E_=class{cw(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];xf(...i)}lw(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];ae(...i)}dw(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];Xt(...i)}fw(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];Cf(t,...e)}ov(t,i){return u(t,i)}gw(t,i){return v(t,i)}rv(t){c(t)}_w(t){m(t)}ww(){return this.mw.ww()}pw(){return this.mw.pw()}Aw(){return this.mw.Aw()}yw(){return this.mw.yw()}Mw(){return this.mw.Mw()}Tw(t,i){return this.mw.Tw(t,i)}Sw(t){return this.mw.Sw(t)}get Nw(){return this.Iw}Ah(t,i){let e;return void 0===i&&(i=I_(oi)),e="object"!=typeof i||i instanceof N_?i:i.href,new N_(t,e)}Dw(t,i){if(void 0===i&&(i=I_(oi)),this.Ew){const e=cs(i)?i:i.toString();return new self.URL(t,e).href}return this.Ah(t,i).href}get Ys(){return this.Lw}get xw(){return{Cw:zl&&zl.userAgent.match(/Android /i)?"Android":"other",jw:Boolean(zl&&zl.userAgent.match(/Android 8.0.0/i))}}get Ow(){return self&&self.location&&"https:"===self.location.protocol}get Rw(){return"languages"in zl?zl.languages.slice():[zl.language]}constructor(){this.Iw=new k_,this.Lw=wf,this.Ew=L_(),self.performance&&self.performance.now?this.J_=()=>self.performance.now():this.J_=Du}},k_=class{get Pw(){return zl.oscpu}get Ys(){return zl.platform}get zw(){return zl.vendor}get Bw(){return zl.vendorSub}};function L_(){if(self.URL)try{const t=new self.URL("b","http://a");return t.pathname="c d","http://a/c%20d"===t.href}catch(t){}return!1}function il(){return il=_.assign||function(t){for(var i=1;i<arguments.length;i++){var e=arguments[i];for(var s in e)_.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},il.apply(this,arguments)}function x_(){const t=_.create(null);return t.Uw=void 0,delete t.Uw,t}function Ge(){return new R_}function rn(){return new P_}function C_(t){const i=Ge();for(const e in t)Ho.call(t,e)&&i.set(e,t[e]);return i}function j_(t){const i=[];return t.forEach((t=>i.push(t))),i}r(),r(),r();var O_="undefined"!=typeof Map&&"entries"in Map.prototype?Map:void 0,R_=O_||function(){class t{next(){const t=this.index;return t<this.keys.length?(this.index++,{value:this.selector(this.data,this.keys[t]),done:!1}):{value:void 0,done:!0}}constructor(t,i){this.index=0,this.data=t,this.selector=i,this.keys=_.keys(t)}}return class{get(t){return this.data[t]}set(t,i){return this.has(t)||this.size++,this.data[t]=i,this}has(t){return t in this.data}delete(t){return!!this.has(t)&&(this.size--,delete this.data[t],!0)}clear(){this.data=x_(),this.size=0}keys(){return new t(this.data,((t,i)=>i))}values(){return new t(this.data,((t,i)=>t[i]))}entries(){return new t(this.data,((t,i)=>[i,t[i]]))}forEach(t){for(const i in this.data)t(this.data[i],i)}constructor(){this.data=x_(),this.size=0}}}();var P_=O_||function(){class t{next(){const t=this.Qw.next();return t.done?t:{value:this.Fw(t.value),done:!1}}constructor(t,i){this.Qw=t,this.Fw=i}}return class{get size(){return this._f.size}get(t){return this._f.get(""+t)}set(t,i){return this._f.set(""+t,i),this}has(t){return this._f.has(""+t)}delete(t){return this._f.delete(""+t)}clear(){this._f.clear()}keys(){return new t(this._f.keys(),(t=>Number(t)))}values(){return this._f.values()}entries(){return new t(this._f.entries(),(t=>{let[i,e]=t;return[Number(i),e]}))}forEach(t){this._f.forEach(((i,e)=>{t(i,Number(e))}))}constructor(){this._f=Ge()}}}();r(),r();var z_=function(t){return t.Yw="9a04f079-9840-4286-ab92-e65be0885f95",t.Vw="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",t.Gw="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",t.Ww="94ce86fb-07ff-4f43-adb8-93d2fa968ca2",t}({}),B_="urn:mpeg:dash:mp4protection:2011",Ca="cenc",U_="sinf",xt="skd",Q_="9a04f079-9840-4286-ab92-e65be0885f95",Zu="urn:uuid:"+Q_,F_="com.microsoft.playready",Y_="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",V_="urn:uuid:"+Y_,G_="com.widevine.alpha",W_="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",Z_="urn:uuid:"+W_,H_="94ce86fb-07ff-4f43-adb8-93d2fa968ca2",Z="urn:uuid:"+H_,X_="com.apple.fps.1_0",q_="com.apple.streamingkeydelivery",K_="identity";r();var Fs=function(t){return t.Yw="playready",t.Vw="widevine",t.Ww="fairplay",t.Gw="clearkey",t.Zw="aes128",t}({}),J_={Hw:Fs.Yw,Xw:F_,qw:"cenc",Kw:Q_,Jw:Zu,$w:"PlayReady"},Oe={Hw:Fs.Vw,Xw:G_,qw:"cenc",Kw:Y_,Jw:V_,$w:"Widevine"},$_={Hw:Fs.Ww,Xw:X_,qw:"skd",Kw:H_,Jw:Z,$w:"FairPlay"},iv={Hw:Fs.Ww,Xw:"com.apple.fps",qw:"sinf",Kw:H_,Jw:Z,$w:"FairPlay"},ev={Hw:Fs.Gw,Xw:"org.w3.clearkey",qw:"cenc",Kw:W_,Jw:Z_,$w:"ClearKey"},sv=[J_,Oe,$_,ev],nv=[J_,Oe,iv,ev];function rv(t){return sv.filter((i=>i.Jw===t.toLowerCase()))}r();var ov="function"==typeof String.prototype.replaceAll?(t,i,e)=>t.replaceAll(i,e):(t,i,e)=>t.split(i).join(e);function Re(t,i){return Rt(t)&&-1!==t.indexOf(i)}var sa="function"==typeof String.prototype.startsWith?(t,i)=>Rt(t)&&t.startsWith(i):(t,i)=>Rt(t)&&t.substr(0,i.length)===i,Qh="function"==typeof String.prototype.endsWith?(t,i)=>Rt(t)&&t.endsWith(i):(t,i)=>Rt(t)&&t.substr(t.length-i.length,i.length)===i;function pr(t,i){return t.length===i.length&&t.toUpperCase()===i.toUpperCase()}var hv="function"==typeof String.prototype.repeat?(t,i)=>t.repeat(i):(t,i)=>{let e=0|i;if(0===t.length||0===e)return"";let s=t,n="";for(;1==(1&e)&&(n+=s),e>>>=1,0!==e;)s+=s;return n},$h="function"==typeof String.prototype.padStart?(t,i,e)=>(void 0===e&&(e=" "),t.padStart(i,e)):(t,i,e)=>{void 0===e&&(e=" ");let s=e;const n=(0|i)-t.length;return n<=0?t:(n>s.length&&(s+=hv(s,n/s.length)),s.slice(0,n)+t)},av=(String.prototype.padEnd,16384),uv="function"==typeof String.fromCodePoint?t=>t.length<=av?String.fromCodePoint(...t):lv(t,String.fromCodePoint):t=>{const i=[];for(let e of t)e>65535&&(e-=65536,i.push(e>>>10&1023|55296),e=56320|1023&e),i.push(e);return cv(i)};function cv(t){return t.length<=av?String.fromCharCode(...t):lv(t,String.fromCharCode)}function lv(t,i){const e=[];for(let s=0;s<t.length;s+=av)e.push(i(...t.slice(s,s+av)));return e.join("")}function dv(t){return t.replace(/[\\"]/g,(t=>"\\"+t))}var fv=ui.Yg&&ui.Gg>=42||ui.p_&&ui.y_>=38||ui.l_||ui.__||ui.I_&&ui.E_>=29;function gv(t,i){return Re(t,"audio")?{initDataTypes:["cenc"],audioCapabilities:[il({contentType:t},i?{robustness:"SW_SECURE_CRYPTO"}:{})]}:{initDataTypes:["cenc"],videoCapabilities:[il({contentType:t},i?{robustness:"SW_SECURE_CRYPTO"}:{})]}}function _v(){return void 0!==zl&&"function"==typeof zl.requestMediaKeySystemAccess}function gt(){return"undefined"!=typeof HTMLMediaElement&&void 0!==HTMLMediaElement.prototype.webkitGenerateKeyRequest&&void 0!==HTMLMediaElement.prototype.webkitAddKey&&void 0!==HTMLMediaElement.prototype.webkitCancelKeyRequest}var vv=class{Mw(){return this.Sw(Oe)}pw(){return this.Sw(ev)}yw(){return this.Sw(J_)}Aw(){return this.Sw($_)}Sw(t){const i=t.Jw,e=this.im.get(i);if(e)return e;const s=this.Tw(t,'video/mp4; codecs="avc1.42000a"');return this.im.set(i,s),s}async Tw(t,i){try{return await this.hm.nm(t.Xw,[gv(i,!0)]),!0}catch(e){try{return await this.hm.nm(t.Xw,[gv(i,!1)]),!0}catch(t){return!1}}}ww(){return this.um||(this.um=this.lm()),this.um}async lm(){return"https:"!==bf.protocol&&(!!fv&&!await this.pw())}constructor(t){this.im=Ge(),this.um=void 0,this.hm=t}};function lt(t,i){return mv(t.slice(),i)}function wv(t,i){const e=mv(t,i);return e!==t&&pv(e,void 0,t.length,t),t}function mv(t,i){let e=t;const s=e.length;if(s<=1)return e;let n=new Array(s);for(let t=1;t<s;t*=2){pv(e,i,t,n);const s=e;e=n,n=s}return e}function pv(t,i,e,s){const n=t.length;let r=0;const o=2*e;let h,a,u,c,l;for(a=0;a<n;a+=o)for(u=a+e,h=u+e,u>n&&(u=n),h>n&&(h=n),c=a,l=u;;)if(c<u&&l<h)i&&i(t[c],t[l])<=0?s[r++]=t[c++]:s[r++]=t[l++];else if(c<u)s[r++]=t[c++];else{if(!(l<h))break;s[r++]=t[l++]}}r(),r(),r(),r(),r(),r(),r(),r(),r();var R=function(t){return t[t.Zr=0]="Zr",t[t.dm=1]="dm",t[t.fm=-1]="fm",t}({}),Av=(t,i)=>(0|t)-(0|i),ma=(t,i)=>t===i?0:t<i?-1:t>i?1:j(t)?j(i)?0:1:-1;function yv(t,i,e){return Xs(t,i,e)?0:ma(t,i)}var bv=(t,i)=>_n(t,i)?0:ma(t,i);var Mv="function"==typeof Array.prototype.find?(t,i)=>t.find(i):(t,i)=>{const e=en(t,i);return-1===e?void 0:t[e]},So=Mv,Tv="function"==typeof Array.prototype.findLast?(t,i)=>t.findLast(i):(t,i)=>{const e=Nv(t,i);return-1===e?void 0:t[e]},Sv=Tv,en="function"==typeof Array.prototype.findIndex?(t,i)=>t.findIndex(i):(t,i)=>{for(let e=0;e<t.length;e+=1){if(i(t[e],e,t))return e}return-1},Nv="function"==typeof Array.prototype.findLastIndex?(t,i)=>t.findLastIndex(i):(t,i)=>{for(let e=t.length-1;e>=0;e-=1){if(i(t[e],e,t))return e}return-1};function Ro(t,i){const e=t.indexOf(i);return-1!==e&&(zr(t,e),!0)}function zr(t,i){0===i?t.shift():t.splice(i,1)}function Iv(t,i){const e=new Array(t.length);let s=0,n=0;for(;n<t.length;){if(t[n]===i){n++,e.length-=1;break}e[s++]=t[n++]}for(;n<t.length;)e[s++]=t[n++];return e}function fh(t,i){return-1!==t.indexOf(i)}function Dv(t,i,e){if(t===i)return!0;if(t.length!==i.length)return!1;for(let s=0;s<t.length;s+=1)if(!e(t[s],i[s]))return!1;return!0}function Or(t){t.length=0}function Ev(t,i){if(t.length!==i.length)return!1;for(const e of t)if(!fh(i,e))return!1;return!0}Array.prototype.flat;var Qr="function"==typeof Array.prototype.flatMap?(t,i)=>t.flatMap(i):(t,i)=>{const e=[];for(let s=0;s<t.length;s++)e.push(...i(t[s],s));return e};function rs(t,i){return Lv(t,((t,e)=>ma(i(t),i(e))))}function kv(t,i){return xv(t,((t,e)=>ma(i(t),i(e))))}function Lv(t,i){if(0!==t.length)return t.reduce(((t,e)=>i(t,e)<=0?t:e))}function xv(t,i){return Lv(t,((t,e)=>i(e,t)))}function Cv(t){return t.filter(((i,e)=>t.indexOf(i)===e))}function jv(t,i){return Promise.all(t.map(i)).then((i=>t.filter(((t,e)=>i[e]))))}function Ov(t,i,e){if(t.length!==i.length)return!1;for(let s=0;s<t.length;s++)if(!e(t[s],i[s]))return!1;return!0}function lo(t,i,e){if(null!=i){if("object"!=typeof i&&"function"!=typeof i)throw new w("Object expected.");var s,n;if(e){if(!Pt)throw new w("Symbol.asyncDispose is not defined.");s=i[Pt]}if(void 0===s){if(!Nl)throw new w("Symbol.dispose is not defined.");s=i[Nl],e&&(n=s)}if("function"!=typeof s)throw new w("Object not disposable.");n&&(s=function(){try{n.call(this)}catch(t){return Promise.reject(t)}}),t.stack.push({value:i,dispose:s,async:e})}else e&&t.stack.push({async:!0});return i}r(),r(),r();var Rv="function"==typeof SuppressedError?SuppressedError:function(t,i,e){var s=new g(e);return s.name="SuppressedError",s.error=t,s.suppressed=i,s};function os(t){function i(i){t.error=t.hasError?new Rv(i,t.error,"An error was suppressed during disposal."):i,t.hasError=!0}var e,s=0;return function n(){for(;e=t.stack.pop();)try{if(!e.async&&1===s)return s=0,t.stack.push(e),Promise.resolve().then(n);if(e.dispose){var r=e.dispose.call(e.value);if(e.async)return s|=2,Promise.resolve(r).then(n,(function(t){return i(t),n()}))}else s|=1}catch(t){i(t)}if(1===s)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}()}r(),r();var Hc=function(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];g.apply(this,i)};(Hc.prototype=_.create(g.prototype)).constructor=Hc;var ai=class extends Hc{get name(){return"BaseError"}constructor(t,i){super(),this.message=t||"Unknown error",this.cause=i,g.captureStackTrace&&g.captureStackTrace(this,this.constructor)}},Rh=class extends ai{get name(){return"AbortError"}constructor(t,i){super(t||"Aborted",i)}};function F(t){return t instanceof g&&"AbortError"===t.name}function re(t){if(t&&t.gm)throw new Rh}function wh(t){if(F(t))throw t}function bu(t){if(!F(t))throw t}function Ic(t,i){return i?new Promise(((e,s)=>{if(i.gm)return t.catch(ul),s(new Rh);const n=()=>{i._m(n),s(new Rh)};i.vm(n),t.then((t=>{i._m(n),e(t)}),(t=>{i._m(n),s(t)}))})):t}async function Te(t,i){const e={stack:[],error:void 0,hasError:!1};try{lo(e,i,!1);return await t}catch(t){e.error=t,e.hasError=!0}finally{os(e)}}async function Pv(t,i){const e={stack:[],error:void 0,hasError:!1};try{lo(e,i,!1);return await t(i.wm)}catch(t){e.error=t,e.hasError=!0}finally{os(e)}}r(),r();var zv=class{pm(){if(!this.gm&&!this.Am){this.gm=!0;for(const t of this.ym.slice())t();this.Mm()}}Mm(){if(!this.Am){this.Am=!0;for(const t of this.Tm.slice())t();Or(this.ym),Or(this.Tm)}}vm(t){this.Am||this.ym.push(t)}_m(t){this.Am||Ro(this.ym,t)}Sm(t){this.Am||this.Tm.push(t)}Nm(t){this.Am||Ro(this.Tm,t)}constructor(){this.gm=!1,this.Am=!1,this.ym=[],this.Tm=[]}},Ai=class t{get wm(){return this.Im}Dm(){this.Im.pm()}Mm(){this.Im.Mm()}Em(t){const i=this.Im;if(i.gm)return;if(t.gm)return void i.pm();if(i.Am||t.Am)return;const e=()=>{s(),i.pm()},s=()=>{t._m(e),t.Nm(s),i._m(e),i.Nm(s)};t.vm(e),t.Sm(s),i.vm(e),i.Sm(s)}Lm(){const i=new t,e=new t,s=i.wm,n=e.wm,r=this.Im,o=()=>{s.gm&&n.Am||n.gm&&s.Am?r.pm():s.Am&&n.Am&&r.Mm()};s.vm(o),n.vm(o),s.Sm(o),n.Sm(o),i.Em(r),e.Em(r);return r.Sm((()=>{s._m(o),n._m(o),s.Nm(o),n.Nm(o)})),[i,e]}static xm(i){const e=new t;for(const t of i)void 0!==t&&e.Em(t);return e}[Nl](){this.Dm()}constructor(){this.Im=new zv}},Bv=Promise.resolve(),Uv="function"==typeof queueMicrotask?queueMicrotask:t=>{Bv.then(t)};function xe(t){t.then(ul,ul)}async function ds(t){try{return await Promise.all(t)}catch(i){throw await Promise.all(t.map((t=>t.catch(ul)))),i}}function Bn(t,i){return new Promise(((e,s)=>{if(void 0!==i&&i.gm)return void s(new Rh);const n=me.ov((()=>{void 0!==i&&i._m(r),e()}),t),r=()=>{me.rv(n),s(new Rh)};void 0!==i&&i.vm(r)}))}async function Qv(t,i){const e={stack:[],error:void 0,hasError:!1};try{const s=lo(e,new Ai,!1);return await Promise.race([t,Bn(i,s.wm).then((()=>{throw new g("Timeout")}))])}catch(t){e.error=t,e.hasError=!0}finally{os(e)}}function Fv(t,i,e){if("function"==typeof e)e.call(t,i);else for(const s of e)s.call(t,i)}var Bo=class{yn(t,i){if("function"==typeof i)if("string"==typeof t)this.Cm(t,i);else for(const e of t)this.Cm(e,i)}Cm(t,i){const e=this.jm[t];void 0===e?this.jm[t]=i:"function"==typeof e?this.jm[t]=[e,i]:0===this.Om?e.push(i):this.jm[t]=e.concat(i)}Rm(t){if("function"!=typeof t)return;const i=this.Pm;void 0===i?this.Pm=t:"function"==typeof i?this.Pm=[i,t]:0===this.Om?i.push(t):this.Pm=i.concat(t)}Bo(){this.jm=x_(),this.Pm=void 0}yo(t){this.Om++;const i=this.jm[t.type],e=this.Pm;void 0!==i&&Fv(this.zm,t,i),void 0!==e&&Fv(this.zm,t,e),this.Om--}fn(t,i){if("function"==typeof i)if("string"==typeof t)this.Bm(t,i);else for(const e of t)this.Bm(e,i)}Bm(t,i){const e=this.jm[t];void 0!==e&&("function"==typeof e?e===i&&(this.jm[t]=void 0):0===this.Om?Ro(e,i):this.jm[t]=Iv(e,i))}Um(t){if("string"==typeof t)this.jm[t]=void 0;else for(const i of t)this.jm[i]=void 0}Qm(t){const i=this.Pm;void 0!==i&&("function"==typeof i?i===t&&(this.Pm=void 0):0===this.Om?Ro(i,t):this.Pm=Iv(i,t))}Fm(t,i){return new Promise(((e,s)=>{if(i&&i.gm)return s(new Rh);const n=t=>{o(),e(t)},r=()=>{o(),s(new Rh)},o=()=>{this.fn(t,n),i&&i._m(r)};this.yn(t,n),i&&i.vm(r)}))}constructor(t){this.jm=x_(),this.Pm=void 0,this.Om=0,this.Ds=t=>{this.yo(t)},this.zm=null!=t?t:this}},Yv=class extends Bo{yo(t){Uv((()=>{super.yo(t)}))}},G=class extends Bo{Rm(t){super.Rm(t)}Qm(t){super.Qm(t)}};r(),r();var Gs=class{constructor(t,i=new Date){this.type=t,this.date=i}};r();var Qi=function(t){return t.Ym="Vm",t.Gm="Wm",t.Zm="contentprotectionerror",t.Hm="contentprotectionsuccess",t.Xm="currentsourcechange",t.qm="destroy",t.Km="durationchange",t.Jm="emptied",t.$m="encrypted",t.tp="ended",t.ep="sp",t.np="rp",t.op="hp",t.ap="cp",t.lp="loadstart",t.dp="manifestupdate",t.fp="nosupportedrepresentationfound",t.gp="offline",t._p="online",t.vp="pause",t.so="play",t.wp="progress",t.mp="ratechange",t.pp="representationchange",t.Ap="resize",t.yp="seeked",t.bp="seeking",t.Mp="segmentnotfound",t.Tp="Sp",t.Np="Ip",t.ro="sourcechange",t.Dp="timeupdate",t.Ep="volumechange",t.kp="Lp",t.xp="Cp",t.jp="metricschange",t}({}),Vv=["cenc"],Gv=["cbcs","cbcs-1-9"],Wv=class extends Gs{constructor(t){super(Qi.xp),this.Op=t}},gr=class extends Gs{constructor(t,i,e,s){super("Rp"),this.Pp=t,this.zp=i,this.Rp=e,this.Bp=s}},Zv=class extends Gs{constructor(){super("lt")}},xn=function(t){return t.$m="Up",t.Qp="Fp",t}({}),on=class extends Gs{constructor(t,i){super("Up"),this.qw=t,this.Yp=i}},Hv=class extends Gs{constructor(){super("Fp")}};r(),r(),r();var Xv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),qv=16383,Kv=/[\t\n\f\r ]/g;function Pn(t){return 43===t?62:47===t?63:t>=48&&t<=57?t-48+52:t>=65&&t<=90?t-65:t>=97&&t<=122?t-97+26:Jv()}function Jv(){throw new g("Invalid base64 input")}function Vs(t){let i=t;Kv.test(i)&&(i=i.replace(Kv,""));let e=i.length;e%4==0&&e>=1&&"="===i[e-1]&&(e>=2&&"="===i[e-2]?e-=2:e-=1,i=i.substr(0,e));const s=e%4;if(1===s)return Jv();const n=0===s?0:4-s,r=new T(function(t,i){return 3*(t+i)/4-i}(e,n)),o=n>0?e-4:e;let h,a=0,u=0;for(;a<o;a+=4)h=Pn(i.charCodeAt(a))<<18|Pn(i.charCodeAt(a+1))<<12|Pn(i.charCodeAt(a+2))<<6|Pn(i.charCodeAt(a+3)),r[u++]=h>>16&255,r[u++]=h>>8&255,r[u++]=255&h;return 2===n?(h=Pn(i.charCodeAt(a))<<2|Pn(i.charCodeAt(a+1))>>4,r[u++]=255&h):1===n&&(h=Pn(i.charCodeAt(a))<<10|Pn(i.charCodeAt(a+1))<<4|Pn(i.charCodeAt(a+2))>>2,r[u++]=h>>8&255,r[u++]=255&h),r}function $v(t,i,e){return Xv[t>>2]+Xv[(3&t)<<4|i>>4]+Xv[(15&i)<<2|e>>6]+Xv[63&e]}function tw(t,i,e){const s=[];for(let n=i;n<e;n+=3)s.push($v(t[n],t[n+1],t[n+2]));return s.join("")}function Ys(t){const i=t.length,e=i%3,s=[],n=i-e;for(let i=0;i<n;i+=qv)s.push(tw(t,i,x.min(n,i+qv)));if(1===e){const e=t[i-1];s.push(Xv[e>>2]+Xv[(3&e)<<4]+"==")}else if(2===e){const e=t[i-2],n=t[i-1];s.push(Xv[e>>2]+Xv[(3&e)<<4|n>>4]+Xv[(15&n)<<2]+"=")}return s.join("")}function iw(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/[=]/g,"")}function _a(t,i){const e=i.tc,s=t.getUint8(e>>3),n=1<<7-(7&e);return i.Vp(1),(s&n)===n?1:0}function Ye(t,i,e){let s=0;for(let n=0;n<e;n++)s=2*s+_a(t,i);return s}r(),r();var ew=class t{get tc(){return this.ic}Vp(t){this.ic+=t}Gp(t){this.ic=t}Wp(){return new t(this.tc)}constructor(t=0){this.ic=t}};var sw=x.clz32||function(t){let i=32,e=t>>16;return e&&(i-=16,t=e),e=t>>8,e&&(i-=8,t=e),e=t>>4,e&&(i-=4,t=e),e=t>>2,e&&(i-=2,t=e),e=t>>1,e?i-2:i-t};function nw(t){if(t>=55296&&t<=57343)throw new g("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value")}function rw(t,i){return t>>i&63|128}function ow(t,i){0!=(4294967168&t)?(0==(4294965248&t)?i.push(t>>6&31|192):0==(4294901760&t)?(nw(t),i.push(t>>12&15|224),i.push(rw(t,6))):0==(4292870144&t)&&(i.push(t>>18&7|240),i.push(rw(t,12)),i.push(rw(t,6))),i.push(63&t|128)):i.push(t)}function hw(t,i){if(i.tc>=t.length)throw new g("Invalid byte index");const e=255&t[i.tc];if(i.Vp(1),128==(192&e))return 63&e;throw new g("Invalid continuation byte")}function aw(t,i){const e=i.tc;if(e>t.length)throw new g("Invalid byte index");if(e===t.length)return!1;const s=255&t[e];if(i.Vp(1),0==(128&s))return s;if(192==(224&s)){const e=(31&s)<<6|hw(t,i);if(e>=128)return e;throw new g("Invalid continuation byte")}if(224==(240&s)){const e=(15&s)<<12|hw(t,i)<<6|hw(t,i);if(e>=2048)return nw(e),e;throw new g("Invalid continuation byte")}if(240==(248&s)){const e=(7&s)<<18|hw(t,i)<<12|hw(t,i)<<6|hw(t,i);if(e>=65536&&e<=1114111)return e}throw new g("Invalid UTF-8 detected")}r(),r();var uw=65279;var cw=[128,64,32,16,8,4,2,1],lw=class{Zp(t){return dw(this.Hp,t)}constructor(t){this.Hp=t}};function dw(t,i){return(t&i)===i}function _l(t,i){return dw(t,cw[i])}function ha(t,i){const e=t.getUint8(i.tc);return i.Vp(1),e}function fw(t,i,e){t.setUint8(i.tc,e),i.Vp(1)}function wi(t,i,e){const s=Bt(se(t),i.tc,i.tc+e);return i.Vp(s.byteLength),s}function gw(t,i,e){se(t).set(se(e),i.tc),i.Vp(e.byteLength)}function _w(t,i,e){return i.tc+e<=t.byteLength}function vw(t,i,e,s){return void 0===s&&(s=!1),s?function(t,i,e){let s=0,n=1;for(let r=0;r<e;r++)s+=ha(t,i)*n,n*=256;return s}(t,i,e):function(t,i,e){let s=0;for(let n=0;n<e;n++)s=256*s+ha(t,i);return s}(t,i,e)}function ww(t,i){const e=t.getUint8(i.tc);return i.Vp(1),e}function Tt(t,i,e){void 0===e&&(e=!1);const s=t.getUint16(i.tc,e);return i.Vp(2),s}function mw(t,i,e,s){void 0===s&&(s=!1),t.setUint16(i.tc,e,s),i.Vp(2)}function Se(t,i,e){void 0===e&&(e=!1);const s=t.getUint32(i.tc,e);return i.Vp(4),s}function zc(t,i,e,s){void 0===s&&(s=!1),t.setUint32(i.tc,e,s),i.Vp(4)}function Ze(t,i,e){void 0===e&&(e=!1);const s=Se(t,i,e),n=Se(t,i,e),r=e?n:s,o=e?s:n;return Io.fromBits(o,r,!0)}function pw(t,i,e,s){void 0===s&&(s=!1);const n=e.getHighBitsUnsigned(),r=e.getLowBitsUnsigned(),o=s?n:r;zc(t,i,s?r:n,s),zc(t,i,o,s)}function Aw(t,i){return sn(t,i)}function wu(t,i,e){return cv(jw(wi(t,i,e)))}function yw(t,i){const e=ha(t,i);let s;return 0==(128&e)?s=e:192==(224&e)?s=64*(31&e)+(63&ha(t,i)):224==(240&e)?s=4096*(15&e)+64*(63&ha(t,i))+(63&ha(t,i)):240==(248&e)&&(s=262144*(7&e)+4096*(63&ha(t,i))+64*(63&ha(t,i))+(63&ha(t,i))),s}function sn(t,i){return bw(t,i,!0)}function bw(t,i,e){const s=[];for(;i.tc<t.byteLength;){const n=ha(t,i);if(e&&!n)break;s.push(n)}return cv(s)}function Mw(t,i,e){const s=e.length;for(let n=0;n<s;n+=1){fw(t,i,e.charCodeAt(n))}}function Tw(t,i){if(!(i.tc+2<=t.byteLength))return;const e=t.getUint8(i.tc),s=t.getUint8(i.tc+1);return(254!==e||255!==s)&&(255===e&&254===s||void 0)}function Sw(t,i){const e=Tw(t,i);return void 0!==e&&i.Vp(2),Nw(t,i,!0===e)}function Nw(t,i,e){return void 0===e&&(e=!1),Iw(t,i,e,!0)}function Iw(t,i,e,s){const n=[];for(;i.tc+2<=t.byteLength;){const r=Tt(t,i,e);if(s&&!r)break;n.push(r)}return cv(n)}function Dw(t,i,e,s){void 0===s&&(s=!1);const n=e.length;for(let r=0;r<n;r+=1){mw(t,i,e.charCodeAt(r),s)}}function Cr(t){return bw(Os(t),new J,!1)}function Br(t){const i=new T(t.length);return Mw(Os(i),new J,t),i}function Ew(t,i){return void 0===i&&(i=!1),Iw(Os(t),new J,i,!1)}function kw(t,i){void 0===i&&(i=!1);const e=new T(2*t.length);return Dw(Os(e),new J,t,i),e}function Lw(t,i){return i.tc+3<=t.byteLength&&(239===t.getUint8(i.tc)&&187===t.getUint8(i.tc+1)&&191===t.getUint8(i.tc+2))}function da(t,i){return function(t,i,e){const s=[],n=Lw(t,i);n&&i.Vp(3);for(;i.tc<t.byteLength;){const n=yw(t,i);if(void 0===n)break;if(e&&0===n)break;s.push(n)}return uv(s)}(t,i,!0)}function _r(t){return function(t){return uv(t)}(function(t,i){const e=[],s=new J;let n;if(!i){if(n=aw(t,s),!1===n)return e;n===uw||e.push(n)}for(;!1!==(n=aw(t,s));)e.push(n);return e}(se(t)))}function Er(t){return new T(function(t){const i=[];for(const e of t)ow(e,i);return i}(function(t){const i=[];let e=0;const s=t.length;for(;e<s;){const n=t.charCodeAt(e++);if(n>=55296&&n<=56319&&e<s){const s=t.charCodeAt(e++);56320==(64512&s)?i.push(((1023&n)<<10)+(1023&s)+65536):(i.push(n),e--)}else i.push(n)}return i}(t)))}function xw(t,i){if(Lw(t,i))return da(t,i);if(void 0!==Tw(t,i))return Sw(t,i);if(i.tc+4<=t.byteLength){if(0===t.getUint8(i.tc)&&0===t.getUint8(i.tc+2))return Nw(t,i,!1);if(0===t.getUint8(i.tc+1)&&0===t.getUint8(i.tc+3))return Nw(t,i,!0)}return da(t,i)}function Bt(t,i,e){return void 0===i&&(i=0),void 0===e&&(e=t.byteLength),new T(t.buffer,t.byteOffset+i,e-i)}function Ma(t,i,e){return void 0===i&&(i=0),void 0===e&&(e=t.byteLength),new DataView(t.buffer,t.byteOffset+i,e-i)}function Os(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function se(t){return new T(t.buffer,t.byteOffset,t.byteLength)}function Cw(t){return t instanceof ArrayBuffer||Pw(t)}function Ae(t){return t instanceof ArrayBuffer?new T(t):se(t)}function Qu(t,i,e){return void 0===i&&(i=0),void 0===e&&(e=t.byteLength),t.slice?t.slice(i,e):cu(Bt(t,i,e))}function cu(t){if(t.slice)return t.slice(0);{const i=new T(t.byteLength);return i.set(t,0),i}}function jw(t){return[].slice.call(t)}var J=class t{get tc(){return this.ic}Vp(t){this.ic+=t}Gp(t){this.ic=t}Wp(){return new t(this.tc)}Xp(){return new ew(this.tc<<3)}constructor(t=0){this.ic=t}};function Vt(t){let i=t.toLowerCase(),e=0,s=0;sa(i,"0x")&&(i=i.substring(2));const n=new T(x.ceil(i.length/2));for(1==(1&i.length)&&(e=1,n[s++]=C(i[0],16));e<i.length;e+=2)n[s++]=C(i.substr(e,2),16);return n}function Ow(t){return.001*t}var Rw=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]","[object DataView]"],Pw=ArrayBuffer.isView||(t=>t&&fh(Rw,vd.call(t)));function Mr(t,i){if(t===i)return!0;if(t.byteLength!==i.byteLength)return!1;return ks(new T(t),new T(i))}function ks(t,i){if(t===i)return!0;if(t.byteLength!==i.byteLength)return!1;if(t.buffer===i.buffer&&t.byteOffset===i.byteOffset)return!0;for(let e=0;e<t.length;e+=1)if(t[e]!==i[e])return!1;return!0}function zw(t,i){return t===i||ks(Ae(t),Ae(i))}function Dt(t){const i=t.reduce(((t,i)=>t+i.byteLength),0);return Bw(t,i)}function Bw(t,i){const e=new T(i);let s=0;for(const i of t)e.set(i,s),s+=i.byteLength;return e}function Uw(t,i,e){const s=new T(t.byteLength+i.byteLength),n=Bt(t,0,e),r=Bt(t,e);return s.set(n),s.set(i,e),s.set(r,e+i.byteLength),s}function Qw(t){return Vs(t).buffer}function Fw(t){return Ys(new T(t))}function Yw(t){return Ys(Br(t))}var dl=new T([0]).buffer,Vw=class{get qp(){return this.Qu.length}Kp(t){for(const i of this.Qu)if(zw(i[0],t))return!0;return!1}Jp(t){for(const i of this.Qu)if(zw(i[0],t))return i[1]}$p(t,i){for(const e of this.Qu)if(zw(e[0],t))return void(e[1]=i);this.Qu.push([t,i])}tA(t,i){this.Qu.forEach((i=>t(i[1],i[0])),i)}iA(){Or(this.Qu)}constructor(){this.Qu=[]}};r();var pa=class{eA(t){this.hf&&(this.hf(t),this.Mm())}sA(t){this.nA&&(this.nA(t),this.Mm())}Dm(){this.rA.catch(ul),this.sA(new Rh)}Em(t){t.then((t=>this.eA(t)),(t=>this.sA(t)))}Mm(){this.hf=void 0,this.nA=void 0}constructor(){this.rA=new Promise(((t,i)=>{this.hf=t,this.nA=i}))}};function Gw(){return new T([8,4]).buffer}function Ww(t,i){return t===F_?function(t){if(t.byteLength<2*Zw.length)return t;const i=new DataView(t,0,2*Zw.length),e=Ew(i,!0);if(e===Zw)return t;return function(t){const i='<PlayReadyKeyMessage type="LicenseAcquisition"><LicenseAcquisition Version="1"><Challenge encoding="base64encoded">',e='</Challenge><HttpHeaders><HttpHeader><name>Content-Type</name><value>text/xml; charset=utf-8</value></HttpHeader><HttpHeader><name>SOAPAction</name><value>"http://schemas.microsoft.com/DRM/2007/03/protocols/AcquireLicense"</value></HttpHeader></HttpHeaders></LicenseAcquisition></PlayReadyKeyMessage>',s=""+i+Fw(t)+e;return kw(s,!0).buffer}(t)}(i):i}r();var Zw="<PlayReady";r(),r();var fs=class extends ai{constructor(t,i,e,s){super(t,s),this.oA=i,this.hA=e}};r(),r(),r(),r(),r();var Hw=function(t,i){return(Hw=_.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)_.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])})(t,i)};function bs(t,i){if("function"!=typeof i&&null!==i)throw new w("Class extends value "+String(i)+" is not a constructor or null");function e(){this.constructor=t}Hw(t,i),t.prototype=null===i?_.create(i):(e.prototype=i.prototype,new e)}function Xw(t,i,e){return t.indexOf?t.indexOf(i,e):Array.prototype.indexOf.call(t,i,e)}r(),r(),r(),r(),r(),r(),r();!function(){function t(t,i){this.aA=t,this.uA=i}t.prototype.get=function(t){var i=this.aA.get(t);if(0===this.uA||void 0===i)return i;var e=this.aA.get(t+1)||0,s=i&(1<<8-this.uA)-1,n=e>>8-this.uA;return(s<<this.uA)+n},t.prototype.getBit=function(t){if(!(t<0)){var i=this.aA.get(x.floor((t+this.uA)/8));if(void 0!==i)return(i&1<<7-this.uA-t%8)>0?1:0}},_.defineProperty(t.prototype,"bitLength",{get:function(){return this.aA.bitLength-this.uA},enumerable:!1,configurable:!0}),_.defineProperty(t.prototype,"length",{get:function(){return this.aA.length},enumerable:!1,configurable:!0})}();r(),r();x.pow(2,-52);function qw(t,i,e){return x.min(x.max(t,i),e)}function Kw(t,i){return t>>8-i}function pl(t,i){return t&(1<<i)-1}var wn=function(){function t(t){this.cA=t,this.lA=0,this.dA=0}return _.defineProperty(t.prototype,"totalBitsRead",{get:function(){return 8*this.lA+this.dA},enumerable:!1,configurable:!0}),_.defineProperty(t.prototype,"done",{get:function(){return this.lA===this.cA.length&&0===this.dA},enumerable:!1,configurable:!0}),_.defineProperty(t.prototype,"location",{get:function(){return{byte:this.lA,bit:this.dA}},enumerable:!1,configurable:!0}),t.prototype.copy=function(){var i=new t(this.cA);return i.seek(this.lA,this.dA),i},t.prototype.canReadBits=function(t){return 8*this.lA+t+this.dA<=8*this.cA.length},t.prototype.canReadBytes=function(t){return 0===this.dA?this.lA+t<=this.cA.length:this.lA+t<this.cA.length},t.prototype.incBit=function(){this.dA++,this.dA>7&&(this.lA++,this.dA=0)},t.prototype.seek=function(t,i){this.lA=t,this.dA=i},t.prototype.peekBit=function(){if(!this.canReadBits(1))throw new g("Cannot read past end of buffer.");return this.cA.get(this.lA)>>7-this.dA&1},t.prototype.readBit=function(){var t=this.peekBit();return this.incBit(),t},t.prototype.readByte=function(){if(!this.canReadBytes(1))throw new g("Cannot read past end of buffer.");if(0===this.dA)return this.cA.get(this.lA++);var t=pl(this.cA.get(this.lA),8-this.dA),i=Kw(this.cA.get(this.lA+1),this.dA);return this.lA++,t<<this.dA|i},t.prototype.readBits=function(t){if(!this.canReadBits(t))throw new g("Cannot read past end of buffer.");for(var i=[],e=0;e<t;e++)i.push(this.readBit());return i},t.prototype.readUInt=function(t){if(t>32)throw new g("The max bitlength that can be provided is 32.");if(!this.canReadBits(t))throw new g("Cannot read past end of buffer.");var i=0;if(0===this.dA&&t%8==0)for(var e=t-8;e>=0;e-=8)i|=this.readByte()<<e;else for(e=t-1;e>=0;e--)i|=this.readBit()<<e;return i},t.prototype.readInt=function(t){if(t>32)throw new g("The max bitlength that can be provided is 32.");if(!this.canReadBits(t))throw new g("Cannot read past end of buffer.");var i=this.readUInt(t);return 0===(i&1<<t-1)?i:i-x.pow(2,t)},t.prototype.readExponentialGolombCode=function(){for(var t=0;0===this.readBit();)t++;var i=1<<t;return i+=this.readUInt(t)-1},t.prototype.readSignedExponentialGolombCode=function(){var t=this.readExponentialGolombCode();return 1&t?(t+1)/2:-t/2},t.prototype.skipBits=function(t){if(!this.canReadBits(t))throw new g("Skipping over the buffer edge is not allowed.");var i=this.dA+t;this.lA+=i>>3,this.dA=7&i},t.prototype.readBool=function(){return this.readBit()>0},t.prototype.readString=function(t){if(!this.canReadBytes(t))throw new g("Cannot read past end of buffer.");for(var i=[],e=0;e<t;e++)i.push(this.readByte());return String.fromCharCode.apply(String,i)},t}();r(),r(),r();var Jw=function(t,i){return t===i?0:t<i?-1:t>i?1:j(t)?j(i)?0:1:-1},St=function(){function t(){this.fA=[],this.gA=[],this._A=0}return t.from=function(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];for(var s=new t,n=0,r=i;n<r.length;n++){var o=r[n];s.pushRange(o)}return s},t.prototype.pushRange=function(t,i,e){if(void 0===i&&(i=0),void 0===e&&(e=t.length),e<0)throw new g("The buffer length must be positive.");if(0!==e){if(0===this.gA.length)this.gA.push(0);else{var s=this.gA[this.gA.length-1]+this.fA[this.fA.length-1].length;this.gA.push(s)}this.fA.push(t.subarray(i,i+e)),this._A+=e}},t.prototype.concat=function(i){var e=new t;return e.pushRange(this.join()),e.pushRange(i.join()),e},t.prototype.copy=function(t,i,e,s){if(void 0===i&&(i=0),void 0===e&&(e=0),void 0===s&&(s=this.length),i<0||e<0||s<0)throw new RangeError;return this.slice(e,s).copyInternal(t,i)},t.prototype.copyInternal=function(t,i){for(var e=0,s=i,n=0,r=this.fA;n<r.length;n++){var o=r[n];t.set(o,s),e+=o.length,s+=o.length}return e},t.prototype.clear=function(){this.fA=[],this.gA=[],this._A=0},t.prototype.get=function(t){if(!(t<0||t>=this.length)){var i=this.findContainingBufferIndex(t),e=t-this.gA[i];return this.fA[i][e]}},_.defineProperty(t.prototype,"first",{get:function(){return this.get(0)},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){if(this.fA.length<1)return-1;if(this.fA.length>1){var i=this.join();this.clear(),this.pushRange(i)}var e=this.fA[0];return"number"==typeof t?Xw(e,t):"undefined"!=typeof Buffer?Buffer.from(e.buffer,e.byteOffset,e.byteLength).indexOf(t):function(t,i){if(0===i.length)return 0;for(var e=i[0],s=i.length,n=t.length-s,r=0;r<=n&&!((r=Xw(t,e,r))<0||r>n);r++){for(var o=r+1,h=r+s,a=1;o<h&&t[o]===i[a];o++,a++);if(o===h)return r}return-1}(e,t)},t.prototype.findContainingBufferIndex=function(t){return function(t,i,e){if(0!==t.length){var s=0,n=t.length-1;if(1!==e(t[s],i)){if(1===e(i,t[n]))return n;for(;s!==n;){var r=x.ceil((s+n)/2);e(t[r],i)<=0?s=r:n=r-1}return s}}}(this.gA,t,Jw)},t.prototype.join=function(){if(1===this.fA.length)return this.fA[0];var t=new T(this.length);return this.copyInternal(t,0),t},_.defineProperty(t.prototype,"length",{get:function(){return this._A},enumerable:!1,configurable:!0}),_.defineProperty(t.prototype,"bitLength",{get:function(){return 8*this.length},enumerable:!1,configurable:!0}),t.prototype.readUIntBE=function(t,i){if(i<=0||i>4)throw new g("Expected byteLength to be between 0 and 4 but was "+i);if(t<0||t>this.length-i)throw new g("Offset must be between 0 and buffer.length - byteLength, but was "+t+" (max allowed "+(this.length-i)+")");if(1===i)return this.get(t);for(var e=0,s=0;s<i;s++)e+=this.get(t+s)*x.pow(2,8*(i-s-1));return e},t.prototype.slice=function(i,e){void 0===e&&(e=this.length);var s=qw(i,0,this.length),n=qw(e,0,this.length);if(s>n)return new t;if(s===n)return new t;for(var r=new t,o=this.findContainingBufferIndex(s),h=this.fA[o],a=s,u=a-this.gA[o];a+h.length-u<n;)r.pushRange(h,u,h.length-u),o+=1,u=(a+=h.length-u)-this.gA[o],h=this.fA[o];var c=n-a;return r.pushRange(h,u,c),r},t.prototype.trim=function(){if(0===this.length)return new t;for(var i=this.length-1,e=this.fA.length-1,s=this.fA[e],n=s.length-1;i>=0&&e>=0;){if(0!==s[n])break;if(0===n){if(0===e)return new t;e-=1,n=(s=this.fA[e]).length-1}else n-=1;i-=1}return this.slice(0,i+1)},t}(),$w=function(){function t(i){this.vA=i||t.BUFFER_CHUNK_SIZE,this.wA=!1,this.mA=new St,this.cA=new T(this.vA),this.pA=0,this.AA=0,this.dA=7}return t.prototype.closeByte=function(){this.cA[this.pA++]=this.AA,this.pA>=this.vA&&this.closeBuffer(),this.AA=0,this.dA=7},t.prototype.closeBuffer=function(t){void 0===t&&(t=!0),0!==this.pA&&(this.mA.pushRange(this.cA,0,this.pA),t&&(this.cA=new T(this.vA)),this.pA=0)},_.defineProperty(t.prototype,"isWritingStartBit",{get:function(){return 7===this.dA},enumerable:!1,configurable:!0}),t.prototype.close=function(){if(this.wA)throw new g("Cannot close a closed BitWriter.");return this.isWritingStartBit||this.closeByte(),this.closeBuffer(!1),this.wA=!0,this.mA},t.prototype.writeBit=function(t){if(this.wA)throw new g("Cannot write to a closed BitWriter.");this.AA|=t<<this.dA,0===this.dA?this.closeByte():this.dA--},t.prototype.writeByte=function(t){if(this.wA)throw new g("Cannot write to a closed BitWriter.");this.isWritingStartBit?(this.AA=t,this.closeByte()):this.writeByteUnaligned(t)},t.prototype.writeByteUnaligned=function(t){var i=this.dA;this.AA|=Kw(t,i+1),this.closeByte(),this.AA=pl(t,8-i)<<i+1,this.dA=i},t.prototype.writeBits=function(t){for(var i=0,e=t;i<e.length;i++){var s=e[i];this.writeBit(s)}},t.prototype.writeBytes=function(t){if(this.wA)throw new g("Cannot write to a closed BitWriter.");this.isWritingStartBit?this.writeBytesAligned(t):this.writeBytesUnaligned(t)},t.prototype.writeBytesAligned=function(t){this.pA+t.length<=this.vA?(this.cA.set(t,this.pA),this.pA+=t.length,this.pA===this.vA&&this.closeBuffer()):(this.closeBuffer(),this.mA.pushRange(t))},t.prototype.writeBytesUnaligned=function(t){if(0!==t.length){var i=this.dA;this.AA|=Kw(t[0],i+1),this.closeByte();for(var e=1;e<t.length;e++){var s=pl(t[e-1],8-i),n=Kw(t[e],i+1);this.AA=s<<i+1|n,this.closeByte()}this.AA=pl(t[t.length-1],8-i)<<i+1,this.dA=i}},t.prototype.writeUInt=function(t,i){if(t<0)throw new g("Received a negative number.");if(i>32)throw new g("The max bitlength that can be provided is 32.");if(t>=x.pow(2,i))throw new g("Uint "+t+" cannot be represented in "+i+" bit(s).");if(this.isWritingStartBit&&i%8==0)for(var e=i-8;e>=0;e-=8)this.writeByte(t>>e&255);else for(e=i-1;e>=0;e--)this.writeBool((t&1<<e)>0)},t.prototype.writeInt=function(t,i){if(i>32)throw new g("The max bitlength that can be provided is 32.");if(x.abs(t)>=x.pow(2,i-1))throw new g("Signed integer "+t+" cannot be represented in "+i+" bit(s).");t<0?this.writeUInt(t+x.pow(2,i),i):this.writeUInt(t,i)},t.prototype.writeExponentialGolombCode=function(t){if(t<0)throw new g("Received a negative number.");for(var i=x.floor(x.log2(t+1))+1,e=0;e<i-1;e++)this.writeBit(0);this.writeUInt(t+1,i)},t.prototype.writeSignedExponentialGolombCode=function(t){0===t?this.writeExponentialGolombCode(0):t<0?this.writeExponentialGolombCode(-2*t):this.writeExponentialGolombCode(2*t-1)},t.prototype.padByte=function(t){for(;!this.isWritingStartBit;)this.writeBit(t)},t.prototype.writeBool=function(t){this.writeBit(t?1:0)},t.prototype.writeString=function(t){for(var i=function(t){for(var i=new T(t.length),e=0;e<t.length;e++)i[e]=t.charCodeAt(e);return i}(t),e=0;e<i.length;e++)this.writeByte(i[e])},t.BUFFER_CHUNK_SIZE=1024,t}();r();var tm=function(){function t(t){this.rb=new St,this.yA=t}return t.prototype.closeWriter=function(){void 0!==this.yA&&(this.rb=this.rb.concat(this.yA.close()),this.yA=void 0)},_.defineProperty(t.prototype,"writer",{get:function(){return void 0===this.yA&&(this.yA=new $w),this.yA},enumerable:!1,configurable:!0}),t.prototype.concat=function(t){this.closeWriter(),this.rb=this.rb.concat(t)},t.prototype.toRangedBuffer=function(){return this.closeWriter(),this.rb},t}(),We=function(){function t(t){if(this.boxType=t,4!==t.length&&16!==t.length)throw new g("The provided box type does not conform to either a 4 character type or a 16 byte uuid.")}return t.prototype.serializeCommonBoxHeader=function(i){var e=this.getSize(),s=e>=t.LARGE_SIZE/8,n=16===this.boxType.length;i.writeUInt(s?1:e,32),i.writeString(n?"uuid":this.boxType),s&&(i.writeUInt(x.floor(e/t.LARGE_SIZE),32),i.writeUInt(e%t.LARGE_SIZE,32)),n&&i.writeString(this.boxType)},t.prototype.getSize=function(){var i=8+(this.boxType.length>4?16:0),e=this.getBoxContentSize()+i;return e>=t.LARGE_SIZE/8&&(e+=8),e},t.prototype.serialize=function(){var t=new tm;return this.serializeCommonBoxHeader(t.writer),this.serializeBoxContent(t),t.toRangedBuffer()},t.LARGE_SIZE=x.pow(2,32),t}();function he(t,i){return t instanceof Io?64===i:t<x.pow(2,i)}function de(t,i){return x.round(t*x.pow(2,i))}function Tn(t,i){for(var e=0;e<i.length;e++)t.writeByte(i[e])}function Gt(t,i){return t/x.pow(2,i)}r();var jt=function(t){function i(i,e,s){var n=t.call(this,i)||this;if(n.version=e,!he(e,8))throw new g("the provided version cannot fit in 8 bits.");return n.flags=s,n}return bs(i,t),_.defineProperty(i.prototype,"flags",{get:function(){return this.Zd},set:function(t){this.Zd=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 4},i.prototype.serializeFlags=function(t){if("number"!=typeof this.flags)throw new g("Missing custom serializeFlags method.");t.writer.writeUInt(this.flags,24)},i.prototype.serializeBoxContent=function(t){t.writer.writeByte(this.version),this.serializeFlags(t)},i}(We);r(),r();var im=function(t){function i(i,e){var s=t.call(this,i)||this;return s.data=e,s}return bs(i,t),i.prototype.getBoxContentSize=function(){return this.data.length},i.prototype.serializeBoxContent=function(t){t.concat(St.from(this.data))},i}(We);r(),r();var em=function(){function t(t){void 0===t&&(t=0),this.offset=t}return t.prototype.shift=function(t){this.offset+=t},t.prototype.seek=function(t){this.offset=t},t.prototype.clone=function(){return new t(this.offset)},t}();r();var sm=16384;function nm(t){var i=t.length;if(i<=sm)return String.fromCharCode.apply(String,t);for(var e=[],s=0;s<i;s+=sm)e.push(String.fromCharCode.apply(String,t.slice(s,s+sm)));return e.join("")}var rm=function(){function t(t){this.raw=t}return t.prototype.isSet=function(t){return function(t,i){return(t&i)===i}(this.raw,t)},t}();function om(t,i){var e=t.getUint8(i.offset);return i.shift(1),e}function hm(t,i,e){var s=fm(vm(t),i.offset,i.offset+e);return i.shift(s.byteLength),s}function am(t,i,e){return i.offset+e<=t.byteLength}function On(t,i,e){void 0===e&&(e=!1);var s=t.getUint32(i.offset,e);return i.shift(4),s}function um(t,i,e){void 0===e&&(e=!1);var s=On(t,i,e),n=On(t,i,e),r=e?n:s,o=e?s:n;return Io.fromBits(o,r,!0)}function cm(t,i,e){return nm(function(t){return[].slice.call(t)}(hm(t,i,e)))}function lm(t,i){var e,s=om(t,i);return 0==(128&s)?e=s:192==(224&s)?e=64*(31&s)+(63&om(t,i)):224==(240&s)?e=4096*(15&s)+64*(63&om(t,i))+(63&om(t,i)):240==(248&s)&&(e=262144*(7&s)+4096*(63&om(t,i))+64*(63&om(t,i))+(63&om(t,i))),e}function dm(t,i){return function(t,i,e){var s=[],n=function(t,i){return i.offset+3<=t.byteLength&&239===t.getUint8(i.offset)&&187===t.getUint8(i.offset+1)&&191===t.getUint8(i.offset+2)}(t,i);n&&i.shift(3);for(;i.offset<t.byteLength;){var r=lm(t,i);if(void 0===r)break;if(e&&0===r)break;s.push(r)}return function(t){for(var i=[],e=0,s=t;e<s.length;e++){var n=s[e];n>65535&&(n-=65536,i.push(n>>>10&1023|55296),n=56320|1023&n),i.push(n)}return nm(i)}(s)}(t,i,!0)}function fm(t,i,e){return void 0===i&&(i=0),void 0===e&&(e=t.byteLength),new T(t.buffer,t.byteOffset+i,e-i)}function gm(t,i,e){return void 0===i&&(i=0),void 0===e&&(e=t.byteLength),new DataView(t.buffer,t.byteOffset+i,e-i)}function _m(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function vm(t){return new T(t.buffer,t.byteOffset,t.byteLength)}var wm=function(){function t(t){void 0===t&&(t=0),this.offset=t}return t.prototype.shift=function(t){this.offset+=t},t.prototype.seek=function(t){this.offset=t},t.prototype.clone=function(){return new t(this.offset)},t.prototype.toBit=function(){return new em(this.offset<<3)},t}();r();var mm=function(){function t(t,i){this.data=t,this.cursor=i}return t.prototype.nextUint8=function(){return om(this.data,this.cursor)},t.prototype.nextUint16=function(){return function(t,i,e){void 0===e&&(e=!1);var s=t.getUint16(i.offset,e);return i.shift(2),s}(this.data,this.cursor)},t.prototype.nextInt16=function(){return function(t,i,e){void 0===e&&(e=!1);var s=t.getInt16(i.offset,e);return i.shift(2),s}(this.data,this.cursor)},t.prototype.nextUint32=function(){return On(this.data,this.cursor)},t.prototype.nextInt32=function(){return function(t,i,e){void 0===e&&(e=!1);var s=t.getInt32(i.offset,e);return i.shift(4),s}(this.data,this.cursor)},t.prototype.nextInt64=function(){return function(t,i,e){void 0===e&&(e=!1);var s=On(t,i,e),n=On(t,i,e),r=e?n:s,o=e?s:n;return Io.fromBits(o,r,!1)}(this.data,this.cursor)},t.prototype.nextUint64=function(){return um(this.data,this.cursor)},t.prototype.nextUint8Array=function(t){return hm(this.data,this.cursor,t)},t.prototype.nextUint32Array=function(t){return function(t,i,e){for(var s=[],n=0;n<e;n++)s.push(On(t,i));return s}(this.data,this.cursor,t)},t.prototype.nextChars=function(t){return cm(this.data,this.cursor,t)},t.prototype.nextUTF8String=function(){return dm(this.data,this.cursor)},t.prototype.skip=function(t){this.cursor.shift(t)},t.prototype.clone=function(){return new t(this.data,this.cursor.clone())},t}();function ie(t,i){return t.type===i}var pm=8;function Ot(t){var i=function(t,i){var e=[];for(;i.offset<t.byteLength;){var s=Am(t,i);if(!s.complete)return{complete:!1,boxes:e};e.push(s.box)}return{complete:!0,boxes:e}}(t.data,t.cursor);if(!i.complete)throw new g("Data incomplete");return i.boxes}function Am(t,i){var e=i.offset,s=function(t,i){var e=i.offset;if(!am(t,i,pm)){return{complete:!1,neededOffset:r=i.offset+pm}}var s=On(t,i),n=cm(t,i,4);if(1===s){if(!am(t,i,8)){var r=i.offset+8;return i.seek(e),{complete:!1,neededOffset:r}}s=um(t,i).toNumber()}if("uuid"===n){if(!am(t,i,16)){r=i.offset+16;return i.seek(e),{complete:!1,neededOffset:r}}n=cm(t,i,16)}var o=i.offset,h={type:n,size:s,headerSize:o-e};return{complete:!0,header:h}}(t,i);if(!s.complete)return s;var n=s.header,r=n.size;0===r&&(r=t.byteLength-e);var o=e+r;if(o>t.byteLength){var h=o;return i.seek(e),{complete:!1,neededOffset:h}}var a={type:n.type,offset:e,data:new mm(gm(t,e,o),new wm(n.headerSize))};return i.seek(o),{complete:!0,box:a}}function el(t){return{version:t>>24,flags:new rm(16777215&t)}}function ym(t,i){var e,s,n,r;return 1===i?(e=t.nextUint64(),s=t.nextUint64(),n=t.nextUint32(),r=t.nextUint64()):(e=t.nextUint32(),s=t.nextUint32(),n=t.nextUint32(),r=t.nextUint32()),{creation:e,modification:s,scale:n,duration:r}}function Ft(t){return t.skipBits(4),{isLeading:t.readUInt(2),sampleDependsOn:t.readUInt(2),sampleIsDependedOn:t.readUInt(2),sampleHasRedundancy:t.readUInt(2),samplePaddingValue:t.readUInt(3),sampleIsNonSyncSample:Boolean(t.readBit()),sampleDegradationPriority:t.readUInt(16)}}function bm(t){var i=t.nextUint32Array(9);return{a:Gt(i[0],16),b:Gt(i[1],16),u:Gt(i[2],30),c:Gt(i[3],16),d:Gt(i[4],16),v:Gt(i[5],30),x:Gt(i[6],16),y:Gt(i[7],16),w:Gt(i[8],30)}}function zt(t){return new im(t.type,fm(vm(t.data.data),t.data.cursor.offset))}var Mm=function(t){function i(i,e,s,n){void 0===s&&(s=0),void 0===n&&(n=0);var r=t.call(this,"hdlr",s,n)||this;return r.name=e,r.handlerType=i,r}return bs(i,t),_.defineProperty(i.prototype,"handlerType",{get:function(){return this.bA},set:function(t){this.bA=t},enumerable:!1,configurable:!0}),i.prototype.serializeReserved=function(t){t.writer.writeUInt(0,32),t.writer.writeUInt(0,32),t.writer.writeUInt(0,32)},i.prototype.getBoxContentSize=function(){var i,e;return t.prototype.getBoxContentSize.call(this)+4+4+12+(null!==(e=null===(i=this.name)||void 0===i?void 0:i.length)&&void 0!==e?e:0)+1},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(0,32),i.writer.writeString(this.handlerType),this.serializeReserved(i),this.name&&i.writer.writeString(this.name),i.writer.writeByte(0)},i}(jt);function Tm(t){var i=t.data,e=el(i.nextUint32()),s=e.version,n=e.flags;i.skip(4);var r=i.nextChars(4);i.skip(12);var o=i.nextUTF8String();return new Mm(r,o,s,n.raw)}!function(t){function i(){return t.call(this,"mdir")||this}bs(i,t),i.prototype.serializeReserved=function(t){t.writer.writeString("appl"),t.writer.writeUInt(0,32),t.writer.writeUInt(0,32)}}(Mm);r(),r(),r();var Pr=function(){function t(t,i){void 0===i&&(i=!1),this.fixed28BitMode=i,this.tag=t}return t.prototype.encodeSize=function(t){for(var i=[];t>0;)i.length>0&&(i[i.length-1]+=128),i.push(t%128),t>>=7;if(this.fixed28BitMode)for(;i.length<4;)i.push(128);return i.reverse()},_.defineProperty(t.prototype,"tag",{get:function(){return this.MA},set:function(t){if(!he(t,8))throw new g("Provided tag does not fit in 8 bits.");this.MA=t},enumerable:!1,configurable:!0}),t.prototype.getSize=function(){return this.getDescriptorSize()+1+this.encodeSize(this.getDescriptorSize()).length},t.prototype.serialize=function(t){t.writer.writeByte(this.tag);for(var i=0,e=this.encodeSize(this.getDescriptorSize());i<e.length;i++){var s=e[i];t.writer.writeByte(s)}this.serializeDescriptorContent(t)},t}();r();!function(t){function i(i,e,s,n,r,o,h){void 0===h&&(h={});var a=t.call(this,4,h.fixed28BitMode)||this;return a.upStream=s,a.decoderSpecificInfo=o,a.objectTypeIndication=i,a.streamType=e,a.bufferSizeDb=n,a.maxBitrate=r.max,a.avgBitrate=r.avg,a}bs(i,t),_.defineProperty(i.prototype,"objectTypeIndication",{get:function(){return this.TA},set:function(t){if(!he(t,8))throw new g("Provided objectTypeIndication does not fit in 8 bits.");this.TA=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"streamType",{get:function(){return this.SA},set:function(t){if(!he(t,6))throw new g("Provided streamType does not fit in 6 bits.");this.SA=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"bufferSizeDb",{get:function(){return this.NA},set:function(t){if(!he(t,24))throw new g("Provided bufferSizeDb does not fit in 24 bits.");this.NA=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"maxBitrate",{get:function(){return this.IA},set:function(t){if(!he(t,32))throw new g("Provided maxBitrate does not fit in 32 bits.");this.IA=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"avgBitrate",{get:function(){return this.DA},set:function(t){if(!he(t,32))throw new g("Provided avgBitrate does not fit in 32 bits.");this.DA=t},enumerable:!1,configurable:!0}),i.prototype.getDescriptorSize=function(){return 13+this.decoderSpecificInfo.reduce((function(t,i){return t+i.getSize()}),0)},i.prototype.serializeDescriptorContent=function(t){t.writer.writeByte(this.objectTypeIndication),t.writer.writeUInt(this.streamType,6),t.writer.writeBool(this.upStream),t.writer.writeBit(1),t.writer.writeUInt(this.bufferSizeDb,24),t.writer.writeUInt(this.maxBitrate,32),t.writer.writeUInt(this.avgBitrate,32);for(var i=0,e=this.decoderSpecificInfo;i<e.length;i++){e[i].serialize(t)}}}(Pr);r();!function(t){function i(i,e){void 0===e&&(e={});var s=t.call(this,5,e.fixed28BitMode)||this;return s.data=i,s}bs(i,t),i.prototype.getDescriptorSize=function(){return this.data.length},i.prototype.serializeDescriptorContent=function(t){t.concat(St.from(this.data))}}(Pr);r(),r();var Sm=function(t){function i(i){void 0===i&&(i=!1);var e=t.call(this,6,i)||this;return e.predefined=2,e}return bs(i,t),i.prototype.getDescriptorSize=function(){return 1},i.prototype.serializeDescriptorContent=function(t){t.writer.writeByte(this.predefined)},i}(Pr);!function(t){function i(i,e,s,n){void 0===n&&(n={});var r=t.call(this,3,n.fixed28BitMode)||this;return r.decoderConfigDescriptor=s,r.esId=i,r.streamPriority=e,r.dependsOnEsId=null==n?void 0:n.dependsOnEsId,r.urlString=null==n?void 0:n.url,r.ocrEsId=null==n?void 0:n.ocrEsId,r.slConfigDescriptor=new Sm(n.fixed28BitMode),r}bs(i,t),_.defineProperty(i.prototype,"streamDependenceFlag",{get:function(){return void 0!==this.dependsOnEsId},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"urlFlag",{get:function(){return void 0!==this.urlString},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"ocrStreamFlag",{get:function(){return void 0!==this.ocrEsId},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"esId",{get:function(){return this.EA},set:function(t){if(!he(t,16))throw new g("Provided esId does not fit in 16 bits.");this.EA=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"streamPriority",{get:function(){return this.kA},set:function(t){if(!he(t,5))throw new g("Provided streamPriority does not fit in 5 bits.");this.kA=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"dependsOnEsId",{get:function(){return this.LA},set:function(t){if(t&&!he(t,16))throw new g("Provided dependsOnEsId does not fit in 16 bits.");this.LA=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"ocrEsId",{get:function(){return this.xA},set:function(t){if(t&&!he(t,16))throw new g("Provided ocrEsId does not fit in 16 bits.");this.xA=t},enumerable:!1,configurable:!0}),i.prototype.getDescriptorSize=function(){return 3+(this.streamDependenceFlag?2:0)+(this.urlFlag?1+this.urlString.length:0)+(this.ocrStreamFlag?2:0)+this.decoderConfigDescriptor.getSize()+this.slConfigDescriptor.getSize()},i.prototype.serializeDescriptorContent=function(t){t.writer.writeUInt(this.esId,16),t.writer.writeBool(this.streamDependenceFlag),t.writer.writeBool(this.urlFlag),t.writer.writeBool(this.ocrStreamFlag),t.writer.writeUInt(this.streamPriority,5),this.streamDependenceFlag&&t.writer.writeUInt(this.dependsOnEsId,16),this.urlFlag&&(t.writer.writeByte(this.urlString.length),t.writer.writeString(this.urlString)),this.ocrStreamFlag&&t.writer.writeUInt(this.ocrEsId,16),this.decoderConfigDescriptor.serialize(t),this.slConfigDescriptor.serialize(t)}}(Pr);r(),r(),r(),r(),r();var Nm=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.boxes=[],i}return bs(i,t),i.prototype.getSize=function(){return t.prototype.getSize.call(this)+this.boxes.reduce((function(t,i){return t+i.getSize()}),0)},i.prototype.serialize=function(){for(var i=t.prototype.serialize.call(this),e=0,s=this.boxes;e<s.length;e++){var n=s[e];i=i.concat(n.serialize())}return i},i}(We),Ih=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return bs(i,t),i.prototype.serializeBoxContent=function(t){},i.prototype.getBoxContentSize=function(){return 0},i}(Nm),Im=function(t){function i(i,e){var s=t.call(this,i)||this;return s.dataReferenceIndex=e,s}return bs(i,t),_.defineProperty(i.prototype,"dataReferenceIndex",{get:function(){return this.CA},set:function(t){if(!he(t,16))throw new g("Provided dataReferenceIndex does not fit in 16 bits.");this.CA=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 8},i.prototype.serializeBoxContent=function(t){for(var i=0;i<6;i++)t.writer.writeByte(0);t.writer.writeUInt(this.dataReferenceIndex,16)},i}(Ih),Dm=function(t){function i(i,e,s,n){var r,o,h=this;return(h=t.call(this,i,e)||this).extra=n,h.channelCount=null!==(r=s.channelCount)&&void 0!==r?r:2,h.sampleSize=null!==(o=s.sampleSize)&&void 0!==o?o:16,h.sampleRate=s.sampleRate,h}return bs(i,t),_.defineProperty(i.prototype,"channelCount",{get:function(){return this.jA},set:function(t){if(!he(t,16))throw new g("Provided channelCount does not fit in 16 bits.");this.jA=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"sampleSize",{get:function(){return this.OA},set:function(t){if(!he(t,16))throw new g("Provided sampleSize does not fit in 16 bits.");this.OA=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"sampleRate",{get:function(){return this.RA},set:function(t){if(!he(de(t,16),32))throw new g("Provided rate does not fit in 32 bits (fixed 16.16).");this.RA=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){var i,e;return t.prototype.getBoxContentSize.call(this)+8+2+2+2+2+(void 0!==this.sampleRate?4:0)+(null!==(e=null===(i=this.extra)||void 0===i?void 0:i.length)&&void 0!==e?e:0)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(0,32),i.writer.writeUInt(0,32),i.writer.writeUInt(this.channelCount,16),i.writer.writeUInt(this.sampleSize,16),i.writer.writeUInt(0,16),i.writer.writeUInt(0,16),i.writer.writeUInt(de(this.sampleRate,16),32),this.extra&&Tn(i.writer,this.extra)},i}(Im);r();!function(t){function i(i){var e=t.call(this,"stco",0,0)||this;return e.entries=i,e}bs(i,t),_.defineProperty(i.prototype,"entries",{get:function(){return this.PA},set:function(t){if(!he(t.length,32))throw new g("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!he(t,32)})))throw new g("Not all entries can be represented in 32 bits.");this.PA=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4*this.entries.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.entries.length,32);for(var e=0,s=this.entries;e<s.length;e++){var n=s[e];i.writer.writeUInt(n,32)}}}(jt);r();!function(t){function i(i){var e=t.call(this,"clap")||this;return e.cleanApertureWidthN=i.cleanApertureWidthN,e.cleanApertureWidthD=i.cleanApertureWidthD,e.cleanApertureHeightN=i.cleanApertureHeightN,e.cleanApertureHeightD=i.cleanApertureHeightD,e.horizOffN=i.horizOffN,e.horizOffD=i.horizOffD,e.vertOffN=i.vertOffN,e.vertOffD=i.vertOffD,e}bs(i,t),_.defineProperty(i.prototype,"cleanApertureWidthN",{get:function(){return this.zA},set:function(t){if(!he(t,32))throw new g("Provided cleanApertureWidthN does not fit in 32 bits.");this.zA=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"cleanApertureWidthD",{get:function(){return this.BA},set:function(t){if(!he(t,32))throw new g("Provided cleanApertureWidthD does not fit in 32 bits.");this.BA=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"cleanApertureHeightN",{get:function(){return this.UA},set:function(t){if(!he(t,32))throw new g("Provided cleanApertureHeightN does not fit in 32 bits.");this.UA=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"cleanApertureHeightD",{get:function(){return this.QA},set:function(t){if(!he(t,32))throw new g("Provided cleanApertureHeightD does not fit in 32 bits.");this.QA=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"horizOffN",{get:function(){return this.FA},set:function(t){if(!he(t,32))throw new g("Provided horizOffN does not fit in 32 bits.");this.FA=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"horizOffD",{get:function(){return this.YA},set:function(t){if(!he(t,32))throw new g("Provided horizOffD does not fit in 32 bits.");this.YA=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"vertOffN",{get:function(){return this.VA},set:function(t){if(!he(t,32))throw new g("Provided vertOffN does not fit in 32 bits.");this.VA=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"vertOffD",{get:function(){return this.GA},set:function(t){if(!he(t,32))throw new g("Provided vertOffD does not fit in 32 bits.");this.GA=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 32},i.prototype.serializeBoxContent=function(t){t.writer.writeUInt(this.cleanApertureWidthN,32),t.writer.writeUInt(this.cleanApertureWidthD,32),t.writer.writeUInt(this.cleanApertureHeightN,32),t.writer.writeUInt(this.cleanApertureHeightD,32),t.writer.writeUInt(this.horizOffN,32),t.writer.writeUInt(this.horizOffD,32),t.writer.writeUInt(this.vertOffN,32),t.writer.writeUInt(this.vertOffD,32)}}(We);r();!function(t){function i(i,e){var s=t.call(this,"ctts",i,0)||this;return s.entries=e,s}bs(i,t),_.defineProperty(i.prototype,"entries",{get:function(){return this.PA},set:function(t){if(!he(t.length,32))throw new g("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!he(t.sampleCount,32)||!he(t.sampleOffset,32)})))throw new g("Not all entries can be represented in 64 bits.");this.PA=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+8*this.entries.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.entries.length,32);for(var e=0,s=this.entries;e<s.length;e++){var n=s[e];i.writer.writeUInt(n.sampleCount,32),0===this.version?i.writer.writeUInt(n.sampleOffset,32):1===this.version&&i.writer.writeInt(n.sampleOffset,32)}}}(jt);r();!function(t){function i(i){var e=t.call(this,"url ",0,void 0===i?1:0)||this;return e.location=i,e}bs(i,t),_.defineProperty(i.prototype,"location",{get:function(){return this.WA},set:function(t){this.flags=void 0===t?1:0,this.WA=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){var i=t.prototype.getBoxContentSize.call(this);return this.location?i+this.location.length+1:i},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.location&&(i.writer.writeString(this.location),i.writer.writeByte(0))}}(jt);r();!function(t){function i(i,e,s){var n=t.call(this,"urn ",0,s)||this;return n.name=i,n.location=e,n}bs(i,t),_.defineProperty(i.prototype,"location",{get:function(){return this.WA},set:function(t){if(1&this.flags)throw new g("The moov containment flag is set, a DataEntryUrlBox should be used instead.");this.WA=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){var i=t.prototype.getBoxContentSize.call(this)+this.name.length+1;return this.location?i+this.location.length+1:i},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeString(this.name),i.writer.writeByte(0),this.location&&(i.writer.writeString(this.location),i.writer.writeByte(0))}}(jt);r();!function(t){function i(){return t.call(this,"dinf")||this}bs(i,t)}(Ih);r(),r();var Em=function(t){function i(i,e,s){var n=t.call(this,i)||this;if(n.version=e,!he(e,8))throw new g("the provided version cannot fit in 8 bits.");return n.flags=s,n}return bs(i,t),_.defineProperty(i.prototype,"flags",{get:function(){return this.Zd},set:function(t){this.Zd=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 4},i.prototype.serializeFlags=function(t){if("number"!=typeof this.flags)throw new g("Missing custom serializeFlags method.");t.writer.writeUInt(this.flags,24)},i.prototype.serializeBoxContent=function(t){t.writer.writeByte(this.version),this.serializeFlags(t)},i}(Nm);!function(t){function i(){return t.call(this,"dref",0,0)||this}bs(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.boxes.length,32)}}(Em);r(),r();var km=function(t){function i(i,e,s){void 0===s&&(s=0);var n=t.call(this,"elst",e,s)||this;return n.entries=i,n}return bs(i,t),_.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"entries",{get:function(){return this.PA},set:function(t){for(var i=0,e=t;i<e.length;i++){var s=e[i];if(!he(s.segmentDuration,this.bitSize))throw new g("SegmentDuration of one of the entries does not fit in ".concat(this.bitSize," bits."));if(!he(s.mediaTime,this.bitSize))throw new g("MediaTime of one of the entries does not fit in ".concat(this.bitSize," bits."));if(!he(s.mediaRateInteger,16))throw new g("Provided mediaRateInteger does not fit in 16 bits.");if(s.mediaRateFraction&&!he(s.mediaRateFraction,16))throw new g("Provided mediaRateFraction does not fit in 16 bits.")}this.PA=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+this.entries.length*(2*this.bitSize/8+2+2)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.entries.length,32),this.serializeElstBoxContent(i)},i}(jt),Lm=function(t){function i(i,e){return void 0===e&&(e=0),t.call(this,i,0,e)||this}return bs(i,t),i.prototype.serializeElstBoxContent=function(t){for(var i,e=0,s=this.entries;e<s.length;e++){var n=s[e];t.writer.writeUInt(n.segmentDuration,32),t.writer.writeInt(n.mediaTime,32),t.writer.writeUInt(n.mediaRateInteger,16),t.writer.writeUInt(null!==(i=n.mediaRateFraction)&&void 0!==i?i:0,16)}},i}(km),xm=function(t){function i(i,e){return void 0===e&&(e=0),t.call(this,i,1,e)||this}return bs(i,t),i.prototype.serializeElstBoxContent=function(t){for(var i,e=0,s=this.entries;e<s.length;e++){var n=s[e];t.writer.writeUInt(n.segmentDuration.getHighBitsUnsigned(),32),t.writer.writeUInt(n.segmentDuration.getLowBitsUnsigned(),32),t.writer.writeInt(n.mediaTime.getHighBits(),32),t.writer.writeInt(n.mediaTime.getLowBits(),32),t.writer.writeUInt(n.mediaRateInteger,16),t.writer.writeUInt(null!==(i=n.mediaRateFraction)&&void 0!==i?i:0,16)}},i}(km);function Cm(t){for(var i=t.data,e=el(i.nextUint32()),s=e.version,n=e.flags,r=i.nextUint32(),o=[],h=0;h<r;h++){var a=void 0,u=void 0;0===s?(a=i.nextUint32(),u=i.nextInt32()):(a=i.nextUint64(),u=i.nextInt64());var c=i.nextInt16(),l=i.nextInt16();o.push({segmentDuration:a,mediaTime:u,mediaRateFraction:l,mediaRateInteger:c})}return 0===s?new Lm(o,n.raw):new xm(o,n.raw)}var jm=function(t){function i(){return t.call(this,"edts")||this}return bs(i,t),i}(Ih);function Om(t){for(var i=new jm,e=0,s=Ot(t.data);e<s.length;e++){var n=s[e];ie(n,"elst")?i.boxes.push(Cm(n)):i.boxes.push(zt(n))}return i}r(),r();var Rm=function(t){function i(i,e,s,n){var r=t.call(this,i)||this;return r.majorBrand=e,r.minorVersion=s,r.compatibleBrands=n,r}return bs(i,t),_.defineProperty(i.prototype,"majorBrand",{get:function(){return this.ZA},set:function(t){if(4!==t.length)throw new g("the provided major brand does not conform to the 4 character requirement");this.ZA=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"minorVersion",{get:function(){return this.HA},set:function(t){if(!he(t,32))throw new g("the provided minor version does not fit in 32 bits.");this.HA=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"compatibleBrands",{get:function(){return this.XA},set:function(t){if(t.some((function(t){return 4!==t.length})))throw new g("Some of the compatible brands do not conform to the 4 character requirement");this.XA=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 4*(2+this.compatibleBrands.length)},i.prototype.serializeBoxContent=function(t){t.writer.writeString(this.majorBrand),t.writer.writeUInt(this.minorVersion,32);for(var i=0,e=this.compatibleBrands;i<e.length;i++){var s=e[i];t.writer.writeString(s)}},i}(We),Pm=function(t){function i(i,e,s){return t.call(this,"ftyp",i,e,s)||this}return bs(i,t),i}(Rm);function zm(t){for(var i=t.data,e=i.nextChars(4),s=i.nextUint32(),n=[];i.cursor.offset<i.data.byteLength;)n.push(i.nextChars(4));return new Pm(e,s,n)}r();var Bm=function(t){function i(i,e){void 0===e&&(e="free");var s=t.call(this,e)||this;return s.data=i,s}return bs(i,t),i.prototype.getBoxContentSize=function(){var t,i;return null!==(i=null===(t=this.data)||void 0===t?void 0:t.length)&&void 0!==i?i:0},i.prototype.serializeBoxContent=function(t){this.data&&t.concat(St.from(this.data))},i}(We);r(),r();var Um=function(t){function i(i,e,s,n){void 0===n&&(n=0);var r=t.call(this,"mdhd",s,n)||this;return r.creationTime=i.creation,r.modificationTime=i.modification,r.timescale=i.scale,r.duration=i.duration,r.language=e,r}return bs(i,t),_.defineProperty(i.prototype,"creationTime",{get:function(){return this.qA},set:function(t){if(!he(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.qA=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"modificationTime",{get:function(){return this.KA},set:function(t){if(!he(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.KA=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"timescale",{get:function(){return this.JA},set:function(t){if(!he(t,32))throw new g("Provided sequence number does not fit in 32 bits.");this.JA=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"duration",{get:function(){return this.$A},set:function(t){if(!he(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.$A=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"language",{get:function(){return this.iy},set:function(t){if(!Vm(t))throw new g("Expected an ISO-639-2/T language code");this.iy=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8*3+4+2+2},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.serializeMdiaContent(i),i.writer.writeBit(0);for(var e=0,s=this.language;e<s.length;e++){var n=s[e];i.writer.writeUInt(n.charCodeAt(0)-96,5)}i.writer.writeUInt(0,16)},i}(jt),Qm=function(t){function i(i,e,s){return void 0===s&&(s=0),t.call(this,i,e,0,s)||this}return bs(i,t),i.prototype.serializeMdiaContent=function(t){t.writer.writeUInt(this.creationTime,32),t.writer.writeUInt(this.modificationTime,32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration,32)},i}(Um),Fm=function(t){function i(i,e,s){return void 0===s&&(s=0),t.call(this,i,e,1,s)||this}return bs(i,t),i.prototype.serializeMdiaContent=function(t){t.writer.writeUInt(this.creationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.creationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration.getHighBitsUnsigned(),32),t.writer.writeUInt(this.duration.getLowBitsUnsigned(),32)},i}(Um);function Ym(t){var i=t.data,e=el(i.nextUint32()),s=e.version,n=e.flags,r=ym(i,s),o=new wn(St.from(i.nextUint8Array(2)));o.skipBits(1);for(var h=[],a=0;a<3;a++)h.push(o.readUInt(5));var u=h.map((function(t){return String.fromCharCode(t+96)})).join("");return Vm(u)||(u="und"),i.skip(2),0===s?new Qm(r,u,n.raw):new Fm(r,u,n.raw)}function Vm(t){return/^[a-z]{3}$/.test(t)}var gl=function(t){function i(){return t.call(this,"mdia")||this}return bs(i,t),i}(Ih);function Gm(t){for(var i=new gl,e=0,s=Ot(t.data);e<s.length;e++){var n=s[e];ie(n,"mdhd")?i.boxes.push(Ym(n)):ie(n,"hdlr")?i.boxes.push(Tm(n)):i.boxes.push(zt(n))}return i}r();var Wm=function(t){function i(){var i=t.call(this,"mdat")||this;return i.data=new St,i}return bs(i,t),i.prototype.getBoxContentSize=function(){return this.data.length},i.prototype.serializeBoxContent=function(t){t.concat(this.data)},i}(We);function Zm(t){var i=t.data,e=i.nextUint8Array(i.data.byteLength-i.cursor.offset),s=new Wm;return s.data.pushRange(e),s}r();!function(t){function i(){return t.call(this,"minf")||this}bs(i,t)}(Ih);r();var Hm;!function(t){function i(i){var e=t.call(this,"meta",0,0)||this;return e.handler=i,e}bs(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.handler.getSize()},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.concat(this.handler.serialize())}}(Em);r(),r(),function(t){t.VIDEO="vide",t.AUXILIARY_VIDEO="auxv",t.AUDIO="soun",t.METADATA="meta",t.HINT="hint",t.TEXT="text",t.SUBTITLE="subt",t.FONT="fdsm"}(Hm||(Hm={})),r();var Xm,qm,Km={a:1,b:0,u:0,c:0,d:1,v:0,x:0,y:0,w:1};function Jm(t,i){i.writer.writeUInt(de(t.a,16),32),i.writer.writeUInt(de(t.b,16),32),i.writer.writeUInt(de(0,30),32),i.writer.writeUInt(de(t.c,16),32),i.writer.writeUInt(de(t.d,16),32),i.writer.writeUInt(de(0,30),32),i.writer.writeUInt(de(t.x,16),32),i.writer.writeUInt(de(t.y,16),32),i.writer.writeUInt(de(1,30),32)}function $m(t,i){var e,s,n,r;i.writer.writeUInt(null!==(e=t.isLeading)&&void 0!==e?e:Xm.UNKNOWN,2),i.writer.writeUInt(null!==(s=t.sampleDependsOn)&&void 0!==s?s:qm.UNKNOWN,2),i.writer.writeUInt(null!==(n=t.sampleIsDependedOn)&&void 0!==n?n:qm.UNKNOWN,2),i.writer.writeUInt(null!==(r=t.sampleHasRedundancy)&&void 0!==r?r:qm.UNKNOWN,2)}function tp(t,i){var e,s,n;i.writer.writeUInt(0,4),$m(t,i),i.writer.writeUInt(null!==(e=t.samplePaddingValue)&&void 0!==e?e:0,3),i.writer.writeBool(null!==(s=t.sampleIsNonSyncSample)&&void 0!==s&&s),i.writer.writeUInt(null!==(n=t.sampleDegradationPriority)&&void 0!==n?n:0,16)}r(),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WITH_DEPENDENCY=1]="WITH_DEPENDENCY",t[t.NO=2]="NO",t[t.WITHOUT_DEPENDENCY=3]="WITHOUT_DEPENDENCY"}(Xm||(Xm={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.YES=1]="YES",t[t.NO=2]="NO",t[t.RESERVED=3]="RESERVED"}(qm||(qm={})),r(),r();var ip=function(){};r(),r(),r();var ep=function(t){function i(i,e,s){var n=t.call(this,"pssh",i,0)||this;return n.systemId=e,n.data=s,n}return bs(i,t),_.defineProperty(i.prototype,"systemId",{get:function(){return this.ey},set:function(t){if(16!==t.length)throw new g("Provided systemId length is not 16.");this.ey=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"data",{get:function(){return this.Hv},set:function(t){if(!he(t.length,32))throw new g("Provided data length does not fit in 32 bits.");this.Hv=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+16+4+this.data.length},i.prototype.serializeVersionBoxContent=function(t){},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.concat(St.from(this.systemId)),this.serializeVersionBoxContent(i),i.writer.writeUInt(this.data.length,32),i.concat(St.from(this.data))},i}(jt),sp=function(t){function i(i,e){return t.call(this,0,i,e)||this}return bs(i,t),i}(ep),np=function(t){function i(i,e,s){var n=t.call(this,1,i,e)||this;return n.kIds=s,n}return bs(i,t),_.defineProperty(i.prototype,"kIds",{get:function(){return this.sy},set:function(t){if(!he(t.length,32))throw new g("Provided kIds length cannot fit in 32 bits.");if(t.some((function(t){return 16!==t.length})))throw new g("Not all provided key ids are 16 bytes long.");this.sy=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+16*this.kIds.length},i.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.kIds.length,32);for(var i=0,e=this.kIds;i<e.length;i++){var s=e[i];t.concat(St.from(s))}},i}(ep);function rp(t){var i=t.data.nextUint8();t.data.skip(3);var e=t.data.nextUint8Array(16),s=[];if(1===i)for(var n=t.data.nextUint32(),r=0;r<n;r++)s.push(t.data.nextUint8Array(16));var o=t.data.nextUint32(),h=t.data.nextUint8Array(o);return 1===i?new np(e,h,s):new sp(e,h)}r(),r();var op=function(t){function i(i,e,s){void 0===s&&(s=0);var n=t.call(this,"mehd",e,s)||this;return n.fragmentDuration=i,n}return bs(i,t),_.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"fragmentDuration",{get:function(){return this.oy},set:function(t){if(!he(t,this.bitSize))throw new g("The provided fragmentDuration does not fit in ".concat(this.bitSize," bits."));this.oy=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8},i}(jt),hp=function(t){function i(i,e){return void 0===e&&(e=0),t.call(this,i,0,e)||this}return bs(i,t),i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.fragmentDuration,32)},i}(op),ap=function(t){function i(i,e){return void 0===e&&(e=0),t.call(this,i,1,e)||this}return bs(i,t),i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.fragmentDuration.getHighBitsUnsigned(),32),i.writer.writeUInt(this.fragmentDuration.getLowBitsUnsigned(),32)},i}(op);function up(t){var i=t.data,e=el(i.nextUint32()),s=e.version,n=e.flags;return 0===s?new hp(i.nextUint32(),n.raw):new ap(i.nextUint64(),n.raw)}r();var Fr=function(t){function i(i,e,s,n){void 0===e&&(e={}),void 0===s&&(s=0),void 0===n&&(n=0);var r,o,h,a=this;return(a=t.call(this,"trex",s,n)||this).trackId=i,a.defaultSampleDescriptionIndex=null!==(r=null==e?void 0:e.sampleDescriptionIndex)&&void 0!==r?r:0,a.defaultSampleDuration=null!==(o=e.sampleDuration)&&void 0!==o?o:0,a.defaultSampleSize=null!==(h=e.sampleSize)&&void 0!==h?h:0,a.defaultSampleFlags=e.sampleFlags,a}return bs(i,t),_.defineProperty(i.prototype,"trackId",{get:function(){return this.uy},set:function(t){if(!he(t,32))throw new g("Provided track id does not fit in 32 bits.");this.uy=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"defaultSampleDescriptionIndex",{get:function(){return this.ly},set:function(t){if(!he(t,32))throw new g("Provided default sample description index does not fit in 32 bits.");this.ly=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"defaultSampleDuration",{get:function(){return this.gy},set:function(t){if(!he(t,32))throw new g("Provided default sample duration does not fit in 32 bits.");this.gy=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"defaultSampleSize",{get:function(){return this._y},set:function(t){if(!he(t,32))throw new g("Provided default sample size does not fit in 32 bits.");this._y=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"defaultSampleFlags",{get:function(){return this.vy},set:function(t){if((null==t?void 0:t.samplePaddingValue)&&!he(t.samplePaddingValue,3))throw new g("Provided sample padding value does not fit in 3 bits.");if((null==t?void 0:t.sampleDegradationPriority)&&!he(t.sampleDegradationPriority,16))throw new g("Provided sample degradation priority does not fit in 16 bits.");this.vy=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+20},i.prototype.serializeBoxContent=function(i){var e;t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.trackId,32),i.writer.writeUInt(this.defaultSampleDescriptionIndex,32),i.writer.writeUInt(this.defaultSampleDuration,32),i.writer.writeUInt(this.defaultSampleSize,32),tp(null!==(e=this.defaultSampleFlags)&&void 0!==e?e:{},i)},i}(jt);function cp(t){var i=t.data,e=el(i.nextUint32()),s=e.version,n=e.flags,r=i.nextUint32(),o=i.nextUint32(),h=i.nextUint32(),a=i.nextUint32(),u=Ft(new wn(St.from(i.nextUint8Array(4))));return new Fr(r,{sampleDescriptionIndex:o,sampleDuration:h,sampleSize:a,sampleFlags:u},s,n.raw)}var Nr=function(t){function i(){return t.call(this,"mvex")||this}return bs(i,t),i}(Ih);function lp(t){for(var i=new Nr,e=0,s=Ot(t.data);e<s.length;e++){var n=s[e];ie(n,"mehd")?i.boxes.push(up(n)):ie(n,"trex")?i.boxes.push(cp(n)):i.boxes.push(zt(n))}return i}r();var dp=function(t){function i(e,s,n,r,o){void 0===o&&(o=0);var h,a,u,c=this;return(c=t.call(this,"mvhd",r,o)||this).creationTime=e.creation,c.modificationTime=e.modification,c.timescale=e.scale,c.duration=e.duration,c.rate=null!==(h=n.rate)&&void 0!==h?h:i.DEFAULT_RATE,c.volume=null!==(a=n.volume)&&void 0!==a?a:i.DEFAULT_VOLUME,c.matrix=null!==(u=n.matrix)&&void 0!==u?u:Km,c.wy=s,c}return bs(i,t),_.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"creationTime",{get:function(){return this.qA},set:function(t){if(!he(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.qA=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"modificationTime",{get:function(){return this.KA},set:function(t){if(!he(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.KA=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"timescale",{get:function(){return this.JA},set:function(t){if(!he(t,32))throw new g("Provided sequence number does not fit in 32 bits.");this.JA=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"duration",{get:function(){return this.$A},set:function(t){if(!he(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.$A=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"rate",{get:function(){return this.py},set:function(t){if(!he(de(t,16),32))throw new g("Provided rate does not fit in 32 bits (fixed 16.16).");this.py=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"volume",{get:function(){return this.Ay},set:function(t){if(!he(de(t,8),16))throw new g("Provided volume does not fit in 16 bits (fixed 8.8).");this.Ay=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"matrix",{get:function(){return this.yy},set:function(t){if(0!==t.u||0!==t.v||1!==t.w)throw new g("(u, v, w) does not match the required (0, 0, 1)");this.yy=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"nextTrackId",{get:function(){return this.wy},set:function(t){if(0===t)throw new g("NextTrackId cannot be 0.");if(!he(t,32))throw new g("NextTrackId cannot exceed 32 bits.");this.wy=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8*3+4+4+2+2+8+36+24+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.serializeMvhdContent(i),i.writer.writeUInt(de(this.rate,16),32),i.writer.writeUInt(de(this.volume,8),16),i.writer.writeUInt(0,16),i.writer.writeUInt(0,32),i.writer.writeUInt(0,32),Jm(this.matrix,i);for(var e=0;e<6;e++)i.writer.writeUInt(0,32);i.writer.writeUInt(this.nextTrackId,32)},i.DEFAULT_RATE=1,i.DEFAULT_VOLUME=1,i}(jt),fp=function(t){function i(i,e,s,n){return void 0===s&&(s={}),void 0===n&&(n=0),t.call(this,i,e,s,0,n)||this}return bs(i,t),i.prototype.serializeMvhdContent=function(t){t.writer.writeUInt(this.creationTime,32),t.writer.writeUInt(this.modificationTime,32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration,32)},i}(dp),gp=function(t){function i(i,e,s,n){return void 0===s&&(s={}),void 0===n&&(n=0),t.call(this,i,e,s,1,n)||this}return bs(i,t),i.prototype.serializeMvhdContent=function(t){t.writer.writeUInt(this.creationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.creationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration.getHighBitsUnsigned(),32),t.writer.writeUInt(this.duration.getLowBitsUnsigned(),32)},i}(dp);function _p(t){var i=t.data,e=el(i.nextUint32()),s=e.version,n=e.flags,r=ym(i,s),o=Gt(i.nextUint32(),16),h=Gt(i.nextUint16(),8);i.skip(2),i.skip(8);var a=bm(i);i.skip(24);var u=i.nextUint32();return 0===s?new fp(r,u,{rate:o,volume:h,matrix:a},n.raw):new gp(r,u,{rate:o,volume:h,matrix:a},n.raw)}r(),r();var vp=function(t){function i(i,e,s,n,r,o,h){void 0===h&&(h={});var a,u,c,l=this;return l=t.call(this,"tkhd",i,function(t){var i,e,s,n;return{trackEnabled:null===(i=null==t?void 0:t.trackEnabled)||void 0===i||i,trackInMovie:null===(e=null==t?void 0:t.trackInMovie)||void 0===e||e,trackInPreview:null===(s=null==t?void 0:t.trackInPreview)||void 0===s||s,trackSizeIsAspectRatio:null!==(n=null==t?void 0:t.trackSizeIsAspectRatio)&&void 0!==n&&n}}(h))||this,l.creationTime=e.creation,l.modificationTime=e.modification,l.trackId=s,l.duration=e.duration,l.volume=n,l.width=r,l.height=o,l.layer=null!==(a=h.layer)&&void 0!==a?a:0,l.alternateGroup=null!==(u=h.alternateGroup)&&void 0!==u?u:0,l.matrix=null!==(c=h.matrix)&&void 0!==c?c:Km,l}return bs(i,t),_.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"creationTime",{get:function(){return this.qA},set:function(t){if(!he(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.qA=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"modificationTime",{get:function(){return this.KA},set:function(t){if(!he(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.KA=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"trackId",{get:function(){return this.uy},set:function(t){if(0===t)throw new g("trackId cannot be 0.");if(!he(t,32))throw new g("trackId cannot exceed 32 bits.");this.uy=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"duration",{get:function(){return this.$A},set:function(t){if(!he(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.$A=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"volume",{get:function(){return this.Ay},set:function(t){if(!he(de(t,8),16))throw new g("Provided volume does not fit in 16 bits (fixed 8.8).");this.Ay=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"width",{get:function(){return this.My},set:function(t){if(!he(de(t,16),32))throw new g("Provided width does not fit in 32 bits (fixed 16.16).");this.My=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"height",{get:function(){return this.Ty},set:function(t){if(!he(de(t,16),32))throw new g("Provided height does not fit in 32 bits (fixed 16.16).");this.Ty=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"layer",{get:function(){return this.Sy},set:function(t){if(!he(t,16))throw new g("Provided layer does not fit in 16 bits.");this.Sy=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"alternateGroup",{get:function(){return this.Ny},set:function(t){if(!he(t,16))throw new g("Provided alternateGroup does not fit in 16 bits.");this.Ny=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"matrix",{get:function(){return this.yy},set:function(t){if(0!==t.u||0!==t.v||1!==t.w)throw new g("(u, v, w) does not match the required (0, 0, 1)");this.yy=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8*3+4+4+8+2+2+2+2+36+4+4},i.prototype.serializeFlags=function(t){t.writer.writeUInt(0,20),t.writer.writeBool(this.flags.trackSizeIsAspectRatio),t.writer.writeBool(this.flags.trackInPreview),t.writer.writeBool(this.flags.trackInMovie),t.writer.writeBool(this.flags.trackEnabled)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.serializeTkhdContent(i),i.writer.writeUInt(0,32),i.writer.writeUInt(0,32),i.writer.writeUInt(this.layer,16),i.writer.writeUInt(this.alternateGroup,16),i.writer.writeUInt(de(this.volume,8),16),i.writer.writeUInt(0,16),Jm(this.matrix,i),i.writer.writeUInt(de(this.width,16),32),i.writer.writeUInt(de(this.height,16),32)},i}(jt),wp=function(t){function i(i,e,s,n,r,o){return t.call(this,0,i,e,s,n,r,o)||this}return bs(i,t),i.prototype.serializeTkhdContent=function(t){t.writer.writeUInt(this.creationTime,32),t.writer.writeUInt(this.modificationTime,32),t.writer.writeUInt(this.trackId,32),t.writer.writeUInt(0,32),t.writer.writeUInt(this.duration,32)},i}(vp),mp=function(t){function i(i,e,s,n,r,o){return t.call(this,1,i,e,s,n,r,o)||this}return bs(i,t),i.prototype.serializeTkhdContent=function(t){t.writer.writeUInt(this.creationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.creationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.trackId,32),t.writer.writeUInt(0,32),t.writer.writeUInt(this.duration.getHighBitsUnsigned(),32),t.writer.writeUInt(this.duration.getLowBitsUnsigned(),32)},i}(vp);function pp(t){var i,e,s,n,r=t.data,o=el(r.nextUint32()),h=o.version,a=o.flags,u=a.isSet(8),c=a.isSet(4),l=a.isSet(2),d=a.isSet(1);0===h?(i=r.nextUint32(),e=r.nextUint32(),s=r.nextUint32(),r.skip(4),n=r.nextUint32()):(i=r.nextUint64(),e=r.nextUint64(),s=r.nextUint32(),r.skip(4),n=r.nextUint64()),r.skip(8);var f=r.nextInt16(),g=r.nextInt16(),_=Gt(r.nextInt16(),8);r.skip(2);var v=bm(r),w=Gt(r.nextUint32(),16),m=Gt(r.nextUint32(),16);return 0===h?new wp({creation:i,modification:e,duration:n},s,_,w,m,{layer:f,matrix:v,alternateGroup:g,trackSizeIsAspectRatio:u,trackEnabled:d,trackInPreview:c,trackInMovie:l}):new mp({creation:i,modification:e,duration:n},s,_,w,m,{layer:f,matrix:v,alternateGroup:g,trackSizeIsAspectRatio:u,trackEnabled:d,trackInPreview:c,trackInMovie:l})}var Ap=function(t){function i(){return t.call(this,"trak")||this}return bs(i,t),i}(Ih);function yp(t){for(var i=new Ap,e=0,s=Ot(t.data);e<s.length;e++){var n=s[e];ie(n,"tkhd")?i.boxes.push(pp(n)):ie(n,"mdia")?i.boxes.push(Gm(n)):ie(n,"edts")?i.boxes.push(Om(n)):i.boxes.push(zt(n))}return i}var bp=function(t){function i(){return t.call(this,"moov")||this}return bs(i,t),i}(Ih);function Mp(t){for(var i=new bp,e=0,s=Ot(t.data);e<s.length;e++){var n=s[e];ie(n,"mvhd")?i.boxes.push(_p(n)):ie(n,"trak")?i.boxes.push(yp(n)):ie(n,"mvex")?i.boxes.push(lp(n)):ie(n,"pssh")?i.boxes.push(rp(n)):i.boxes.push(zt(n))}return i}r(),r(),r();var Tp=function(t){function i(i,e,s){void 0===s&&(s=0);var n=t.call(this,"tfdt",e,s)||this;return n.baseMediaDecodeTime=i,n}return bs(i,t),_.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"baseMediaDecodeTime",{get:function(){return this.Iy},set:function(t){if(!he(t,this.bitSize))throw new g("Provided baseMediaDecodeTime does not fit in ".concat(this.bitSize," bits."));this.Iy=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8},i}(jt),Sp=function(t){function i(i,e){return void 0===e&&(e=0),t.call(this,i,0,e)||this}return bs(i,t),i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.baseMediaDecodeTime,32)},i}(Tp),Np=function(t){function i(i,e){return void 0===e&&(e=0),t.call(this,i,1,e)||this}return bs(i,t),i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.baseMediaDecodeTime.getHighBitsUnsigned(),32),i.writer.writeUInt(this.baseMediaDecodeTime.getLowBitsUnsigned(),32)},i}(Tp);function Ip(t){var i=t.data,e=el(i.nextUint32()),s=e.version,n=e.flags;return 0===s?new Sp(i.nextUint32(),n.raw):new Np(i.nextUint64(),n.raw)}r();var Dp=function(t){function i(i,e){void 0===e&&(e=0);var s=t.call(this,"tfhd",e,function(t){return{baseDataOffsetPresent:void 0!==t.baseDataOffset,sampleDescriptionIndexPresent:void 0!==t.sampleDescriptionIndex,defaultSampleDurationPresent:void 0!==t.defaultSampleDuration,defaultSampleSizePresent:void 0!==t.defaultSampleSize,defaultSampleFlagsPresent:void 0!==t.defaultSampleFlags,durationIsEmpty:t.durationIsEmpty,defaultBaseIsMoof:t.defaultBaseIsMoof}}(i))||this;return s.trackId=i.trackId,s.baseDataOffset=i.baseDataOffset,s.sampleDescriptionIndex=i.sampleDescriptionIndex,s.defaultSampleDuration=i.defaultSampleDuration,s.defaultSampleSize=i.defaultSampleSize,s.defaultSampleFlags=i.defaultSampleFlags,s}return bs(i,t),_.defineProperty(i.prototype,"trackId",{get:function(){return this.uy},set:function(t){if(!he(t,32))throw new g("Provided track id does not fit in 32 bits.");this.uy=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"baseDataOffset",{get:function(){return this.Dy},set:function(t){if(void 0===t&&this.flags.baseDataOffsetPresent)throw new g("The base data offset present flag is set.");if(void 0!==t&&!this.flags.baseDataOffsetPresent)throw new g("The base data offset present flag is not set.");if(t&&!he(t,64))throw new g("Provided baseDataOffset does not fit in 32 bits.");this.Dy=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"sampleDescriptionIndex",{get:function(){return this.Ey},set:function(t){if(void 0===t&&this.flags.sampleDescriptionIndexPresent)throw new g("The sample description index flag is set.");if(void 0!==t&&!this.flags.sampleDescriptionIndexPresent)throw new g("The sample description index flag is not set.");if(t&&!he(t,32))throw new g("Provided sampleDescriptionIndex does not fit in 32 bits.");this.Ey=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"defaultSampleDuration",{get:function(){return this.gy},set:function(t){if(void 0===t&&this.flags.defaultSampleDurationPresent)throw new g("The default sample duration present flag is set.");if(void 0!==t&&!this.flags.defaultSampleDurationPresent)throw new g("The default sample duration present flag is not set.");if(t&&!he(t,32))throw new g("Provided defaultSampleDuration does not fit in 32 bits.");this.gy=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"defaultSampleSize",{get:function(){return this._y},set:function(t){if(void 0===t&&this.flags.defaultSampleSizePresent)throw new g("The default sample size present flag is set.");if(void 0!==t&&!this.flags.defaultSampleSizePresent)throw new g("The default sample size present flag is not set.");if(t&&!he(t,32))throw new g("Provided defaultSampleSize does not fit in 32 bits.");this._y=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"defaultSampleFlags",{get:function(){return this.vy},set:function(t){if(void 0===t&&this.flags.defaultSampleFlagsPresent)throw new g("The default sample flags present flag is set.");if(void 0!==t&&!this.flags.defaultSampleFlagsPresent)throw new g("The default sample flags present flag is not set.");if((null==t?void 0:t.samplePaddingValue)&&!he(t.samplePaddingValue,3))throw new g("Provided sample padding value does not fit in 3 bits.");if((null==t?void 0:t.sampleDegradationPriority)&&!he(t.sampleDegradationPriority,16))throw new g("Provided sample degradation priority does not fit in 16 bits.");this.vy=t},enumerable:!1,configurable:!0}),i.prototype.serializeFlags=function(t){t.writer.writeUInt(0,6),t.writer.writeBool(this.flags.defaultBaseIsMoof),t.writer.writeBool(this.flags.durationIsEmpty),t.writer.writeByte(0),t.writer.writeUInt(0,2),t.writer.writeBool(this.flags.defaultSampleFlagsPresent),t.writer.writeBool(this.flags.defaultSampleSizePresent),t.writer.writeBool(this.flags.defaultSampleDurationPresent),t.writer.writeBit(0),t.writer.writeBool(this.flags.sampleDescriptionIndexPresent),t.writer.writeBool(this.flags.baseDataOffsetPresent)},i.prototype.getBoxContentSize=function(){var i=t.prototype.getBoxContentSize.call(this)+4;return this.flags.baseDataOffsetPresent&&(i+=8),this.flags.sampleDescriptionIndexPresent&&(i+=4),this.flags.defaultSampleDurationPresent&&(i+=4),this.flags.defaultSampleSizePresent&&(i+=4),this.flags.defaultSampleFlagsPresent&&(i+=4),i},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.trackId,32),this.flags.baseDataOffsetPresent&&(i.writer.writeUInt(this.baseDataOffset.getHighBitsUnsigned(),32),i.writer.writeUInt(this.baseDataOffset.getLowBitsUnsigned(),32)),this.flags.sampleDescriptionIndexPresent&&i.writer.writeUInt(this.sampleDescriptionIndex,32),this.flags.defaultSampleDurationPresent&&i.writer.writeUInt(this.defaultSampleDuration,32),this.flags.defaultSampleSizePresent&&i.writer.writeUInt(this.defaultSampleSize,32),this.flags.defaultSampleFlagsPresent&&tp(this.defaultSampleFlags,i)},i}(jt);function Ep(t){var i=t.data,e=i.nextUint8(),s=new wn(St.from(i.nextUint8Array(3)));s.skipBits(6);var n=Boolean(s.readBit()),r=Boolean(s.readBit());s.skipBits(10);var o=Boolean(s.readBit()),h=Boolean(s.readBit()),a=Boolean(s.readBit());s.skipBits(1);var u=Boolean(s.readBit()),c=Boolean(s.readBit()),l=i.nextUint32(),d=c?i.nextUint64():void 0,f=u?i.nextUint32():void 0,g=a?i.nextUint32():void 0,_=h?i.nextUint32():void 0,v=o?Ft(new wn(St.from(i.nextUint8Array(4)))):void 0;return new Dp({trackId:l,defaultBaseIsMoof:n,durationIsEmpty:r,baseDataOffset:d,sampleDescriptionIndex:f,defaultSampleDuration:g,defaultSampleSize:_,defaultSampleFlags:v},e)}r();var kp=function(t){function i(i,e,s){var n=t.call(this,"trun",i,function(t){var i,e,s,n;return{dataOffsetPresent:void 0!==t.dataOffset,firstSampleFlagsPresent:void 0!==t.firstSampleFlags,sampleDurationPresent:null!==(i=t.sampleDurationPresent)&&void 0!==i&&i,sampleSizePresent:null!==(e=t.sampleSizePresent)&&void 0!==e&&e,sampleFlagsPresent:null!==(s=t.sampleFlagsPresent)&&void 0!==s&&s,sampleCompositionTimeOffsetsPresent:null!==(n=t.sampleCompositionTimeOffsetsPresent)&&void 0!==n&&n}}(e))||this;return n.dataOffset=e.dataOffset,n.samples=s,n.firstSampleFlags=e.firstSampleFlags,n}return bs(i,t),_.defineProperty(i.prototype,"dataOffset",{get:function(){return this.Ly},set:function(t){if(t&&!he(t,32))throw new g("Provided data offset does not fit in 32 bits.");this.Ly=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"firstSampleFlags",{get:function(){return this.xy},set:function(t){if((null==t?void 0:t.samplePaddingValue)&&!he(t.samplePaddingValue,3))throw new g("Provided sample padding value does not fit in 3 bits.");if((null==t?void 0:t.sampleDegradationPriority)&&!he(t.sampleDegradationPriority,16))throw new g("Provided sample degradation priority does not fit in 16 bits.");this.xy=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"samples",{get:function(){return this.Cy},set:function(t){var i,e;if(!he(t.length,32))throw new g("The sample count cannot be represented in 32 bits.");for(var s=0,n=t;s<n.length;s++){var r=n[s];if(void 0===r.duration&&this.flags.sampleDurationPresent)throw new g("The sample duration present flag is set.");if(void 0!==r.duration&&!this.flags.sampleDurationPresent)throw new g("The sample duration present flag is not set.");if(r.duration&&!he(r.duration,32))throw new g("Provided sample duration does not fit in 32 bits.");if(void 0===r.size&&this.flags.sampleSizePresent)throw new g("The sample size present flag is set.");if(void 0!==r.size&&!this.flags.sampleSizePresent)throw new g("The sample size present flag is not set.");if(r.size&&!he(r.size,32))throw new g("Provided sample size does not fit in 32 bits.");if(void 0===r.flags&&this.flags.sampleFlagsPresent)throw new g("The sample flags present flag is set.");if(void 0!==r.flags&&!this.flags.sampleFlagsPresent)throw new g("The sample flags present flag is not set.");if((null===(i=r.flags)||void 0===i?void 0:i.samplePaddingValue)&&!he(r.flags.samplePaddingValue,3))throw new g("Provided sample padding value does not fit in 3 bits.");if((null===(e=r.flags)||void 0===e?void 0:e.sampleDegradationPriority)&&!he(r.flags.sampleDegradationPriority,16))throw new g("Provided sample degradation priority does not fit in 16 bits.");if(void 0===r.compositionTimeOffset&&this.flags.sampleCompositionTimeOffsetsPresent)throw new g("The sample compositionTimeOffset present flag is set.");if(void 0!==r.compositionTimeOffset&&!this.flags.sampleCompositionTimeOffsetsPresent)throw new g("The sample compositionTimeOffset present flag is not set.");if(r.compositionTimeOffset&&!he(r.compositionTimeOffset,32))throw new g("Provided sample compositionTimeOffset does not fit in 32 bits.")}this.Cy=t},enumerable:!1,configurable:!0}),i.prototype.serializeFlags=function(t){t.writer.writeByte(0),t.writer.writeUInt(0,4),t.writer.writeBool(this.flags.sampleCompositionTimeOffsetsPresent),t.writer.writeBool(this.flags.sampleFlagsPresent),t.writer.writeBool(this.flags.sampleSizePresent),t.writer.writeBool(this.flags.sampleDurationPresent),t.writer.writeUInt(0,5),t.writer.writeBool(this.flags.firstSampleFlagsPresent),t.writer.writeBit(0),t.writer.writeBool(this.flags.dataOffsetPresent)},i.prototype.getBoxContentSize=function(){var i=t.prototype.getBoxContentSize.call(this)+4;return this.flags.dataOffsetPresent&&(i+=4),this.flags.firstSampleFlagsPresent&&(i+=4),this.flags.sampleDurationPresent&&(i+=4*this.samples.length),this.flags.sampleSizePresent&&(i+=4*this.samples.length),this.flags.sampleFlagsPresent&&(i+=4*this.samples.length),this.flags.sampleCompositionTimeOffsetsPresent&&(i+=4*this.samples.length),i},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.samples.length,32),this.flags.dataOffsetPresent&&i.writer.writeUInt(this.dataOffset,32),this.flags.firstSampleFlagsPresent&&tp(this.firstSampleFlags,i);for(var e=0,s=this.samples;e<s.length;e++){var n=s[e];this.flags.sampleDurationPresent&&i.writer.writeUInt(n.duration,32),this.flags.sampleSizePresent&&i.writer.writeUInt(n.size,32),this.flags.sampleFlagsPresent&&tp(n.flags,i),this.flags.sampleCompositionTimeOffsetsPresent&&(0===this.version?i.writer.writeUInt(n.compositionTimeOffset,32):i.writer.writeInt(n.compositionTimeOffset,32))}},i}(jt);function Lp(t){var i=t.data,e=i.nextUint8(),s=new wn(St.from(i.nextUint8Array(3)));s.skipBits(12);var n=Boolean(s.readBit()),r=Boolean(s.readBit()),o=Boolean(s.readBit()),h=Boolean(s.readBit());s.skipBits(5);var a=Boolean(s.readBit());s.skipBits(1);var u=Boolean(s.readBit()),c=i.nextUint32(),l={sampleDurationPresent:h,sampleSizePresent:o,sampleFlagsPresent:r,sampleCompositionTimeOffsetsPresent:n};u&&(l.dataOffset=i.nextInt32()),a&&(l.firstSampleFlags=Ft(new wn(St.from(i.nextUint8Array(4)))));for(var d=[],f=0;f<c;f++){var g={};h&&(g.duration=i.nextUint32()),o&&(g.size=i.nextUint32()),r&&(g.flags=Ft(new wn(St.from(i.nextUint8Array(4))))),n&&(g.compositionTimeOffset=0===e?i.nextUint32():i.nextInt32()),d.push(g)}return new kp(e,l,d)}var Ir=function(t){function i(){return t.call(this,"traf")||this}return bs(i,t),i}(Ih);function xp(t){for(var i=new Ir,e=0,s=Ot(t.data);e<s.length;e++){var n=s[e];ie(n,"tfhd")?i.boxes.push(Ep(n)):ie(n,"tfdt")?i.boxes.push(Ip(n)):ie(n,"trun")?i.boxes.push(Lp(n)):i.boxes.push(zt(n))}return i}var Cp=function(t){function i(){return t.call(this,"moof")||this}return bs(i,t),i}(Ih);function jp(t){for(var i=new Cp,e=0,s=Ot(t.data);e<s.length;e++){var n=s[e];ie(n,"traf")?i.boxes.push(xp(n)):ie(n,"pssh")?i.boxes.push(rp(n)):i.boxes.push(zt(n))}return i}r();!function(t){function i(i){var e=t.call(this,"mfhd",0,0)||this;return e.sequenceNumber=i,e}bs(i,t),_.defineProperty(i.prototype,"sequenceNumber",{get:function(){return this.jy},set:function(t){if(!he(t,32))throw new g("Provided sequence number does not fit in 32 bits.");this.jy=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.sequenceNumber,32)}}(jt);r();var Op=function(t){function i(i){var e=t.call(this,"frma")||this;return e.codingName=i,e}return bs(i,t),_.defineProperty(i.prototype,"codingName",{get:function(){return this.Oy},set:function(t){if(4!==t.length)throw new g("Provided coding name was not 4 characters long.");this.Oy=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 4},i.prototype.serializeBoxContent=function(t){t.writer.writeString(this.codingName)},i}(We);r();!function(t){function i(i,e){var s=t.call(this,"pasp")||this;return s.hSpacing=i,s.vSpacing=e,s}bs(i,t),_.defineProperty(i.prototype,"hSpacing",{get:function(){return this.Ry},set:function(t){if(!he(t,32))throw new g("Provided hSpacing does not fit in 32 bits.");this.Ry=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"vSpacing",{get:function(){return this.Py},set:function(t){if(!he(t,32))throw new g("Provided vSpacing does not fit in 32 bits.");this.Py=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 8},i.prototype.serializeBoxContent=function(t){t.writer.writeUInt(this.hSpacing,32),t.writer.writeUInt(this.vSpacing,32)}}(We);r();!function(t){function i(i,e,s){var n=t.call(this,i)||this;return n.sample=e,n.sinf=s,n}bs(i,t),i.prototype.getBoxContentSize=function(){return this.sample.getBoxContentSize()+this.sinf.getSize()},i.prototype.serializeBoxContent=function(t){this.sample.serializeBoxContent(t),t.concat(this.sinf.serialize())}}(Ih);r();!function(t){function i(i,e,s){var n=t.call(this,"sinf")||this;return n.schm=e,n.schi=s,n.frma=new Op(i),n}bs(i,t),i.prototype.getBoxContentSize=function(){var t,i,e,s;return this.frma.getSize()+(null!==(i=null===(t=this.schm)||void 0===t?void 0:t.getSize())&&void 0!==i?i:0)+(null!==(s=null===(e=this.schi)||void 0===e?void 0:e.getSize())&&void 0!==s?s:0)},i.prototype.serializeBoxContent=function(t){t.concat(this.frma.serialize()),this.schm&&t.concat(this.schm.serialize()),this.schi&&t.concat(this.schi.serialize())}}(We);r();var Rp=function(t){function i(i,e,s){var n=t.call(this,"saio",i,void 0===s?0:1)||this;return n.entries=e,n.explicitAuxInfoType=s,n}return bs(i,t),_.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"entries",{get:function(){return this.PA},set:function(t){var i=this;if(!he(t.length,32))throw new g("Number of entries provided does not fit in 32 bits.");if(t.some((function(t){return!he(t,i.bitSize)})))throw new g("Not all provided entries fit in ".concat(this.bitSize," bits."));this.PA=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"explicitAuxInfoType",{get:function(){return this.zy},set:function(t){if(void 0===t)this.flags=0;else{if(!he(t.auxInfoType,32))throw new g("Provided auxInfoType does not fit in 32 bits.");if(!he(t.auxInfoTypeParameter,32))throw new g("Provided auxInfoTypeParameter does not fit in 32 bits.");this.flags=1}this.zy=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+(void 0===this.explicitAuxInfoType?0:8)+4+this.entries.length*this.bitSize/8},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),void 0!==this.explicitAuxInfoType&&(i.writer.writeUInt(this.explicitAuxInfoType.auxInfoType,32),i.writer.writeUInt(this.explicitAuxInfoType.auxInfoTypeParameter,32)),i.writer.writeUInt(this.entries.length,32),this.serializeSaioContent(i)},i}(jt);(function(t){function i(){return null!==t&&t.apply(this,arguments)||this}bs(i,t),i.prototype.serializeSaioContent=function(t){for(var i=0,e=this.entries;i<e.length;i++){var s=e[i];t.writer.writeUInt(s,32)}}})(Rp),function(t){function i(){return null!==t&&t.apply(this,arguments)||this}bs(i,t),i.prototype.serializeSaioContent=function(t){for(var i=0,e=this.entries;i<e.length;i++){var s=e[i];t.writer.writeUInt(s.getHighBitsUnsigned(),32),t.writer.writeUInt(s.getLowBitsUnsigned(),32)}}}(Rp);r();!function(t){function i(i,e,s){var n=t.call(this,"saiz",0,void 0===s?0:1)||this;return n.defaultSampleInfoSize=i,n.sampleInfoSizes=e,n.explicitAuxInfoType=s,n}bs(i,t),_.defineProperty(i.prototype,"defaultSampleInfoSize",{get:function(){return this.By},set:function(t){if(!he(t,8))throw new g("Provided defaultSampleInfoSize does not fit in a single byte.");this.By=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"sampleInfoSizes",{get:function(){return this.Uy},set:function(t){if(!he(t.length,32))throw new g("Number of sampleInfoSizes provided does not fit in 32 bits.");if(t.some((function(t){return!he(t,8)})))throw new g("Not all provided sampleInfoSizes fit in a byte.");this.Uy=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"explicitAuxInfoType",{get:function(){return this.zy},set:function(t){if(void 0===t)this.flags=0;else{if(!he(t.auxInfoType,32))throw new g("Provided auxInfoType does not fit in 32 bits.");if(!he(t.auxInfoTypeParameter,32))throw new g("Provided auxInfoTypeParameter does not fit in 32 bits.");this.flags=1}this.zy=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+(void 0===this.explicitAuxInfoType?0:8)+1+4+(0!==this.defaultSampleInfoSize?0:this.sampleInfoSizes.length)},i.prototype.serializeBoxContent=function(i){if(0!==this.defaultSampleInfoSize&&this.sampleInfoSizes.length>0)throw new g("Both a default size and specific sizes are provided.  This is prohibited.");t.prototype.serializeBoxContent.call(this,i),void 0!==this.explicitAuxInfoType&&(i.writer.writeUInt(this.explicitAuxInfoType.auxInfoType,32),i.writer.writeUInt(this.explicitAuxInfoType.auxInfoTypeParameter,32)),i.writer.writeByte(this.defaultSampleInfoSize),i.writer.writeUInt(this.sampleInfoSizes.length,32);for(var e=0,s=this.sampleInfoSizes;e<s.length;e++){var n=s[e];i.writer.writeByte(n)}}}(jt);r();!function(t){function i(i){var e=t.call(this,"sdtp",0,0)||this;return e.samples=i,e}bs(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.samples.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i);for(var e=0,s=this.samples;e<s.length;e++){$m(s[e],i)}}}(jt);r();!function(t){function i(i){return t.call(this,"stsd",i,0)||this}bs(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.boxes.length,32)}}(Em);r();var Pp=function(t){function i(i,e,s){var n=t.call(this,"sgpd",i,0)||this;return n.entries=s,n.groupingType=e,n}return bs(i,t),_.defineProperty(i.prototype,"groupingType",{get:function(){return this.Qy},set:function(t){if(4!==t.length)throw new g("The provided groupingType does not equal 4 characters.");this.Qy=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeString(this.groupingType),this.serializeVersionBoxContent(i),i.writer.writeUInt(this.entries.length,32);for(var e=0,s=this.entries;e<s.length;e++){var n=s[e];this.serializeEntryBoxContent(i,n)}},i.prototype.serializeEntryBoxContent=function(t,i){i.serializeBoxContent(t)},i}(jt);(function(t){function i(i,e){return t.call(this,0,i,e)||this}bs(i,t),i.prototype.serializeVersionBoxContent=function(t){}})(Pp),function(t){function i(i,e,s){var n=t.call(this,1,i,s)||this;return n.defaultLength=e,n}bs(i,t),_.defineProperty(i.prototype,"defaultLength",{get:function(){return this.Fy},set:function(t){if(!he(t,32))throw new g("The provided defaultLength does not fit in 32 bits.");this.Fy=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+this.entries.length*(this.defaultLength||4)},i.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.defaultLength,32)},i.prototype.serializeEntryBoxContent=function(t,i){0===this.defaultLength&&t.writer.writeUInt(i.getBoxContentSize(),32),i.serializeBoxContent(t)}}(Pp),function(t){function i(i,e,s,n){void 0===n&&(n=0);var r=this;if(i<2)throw new g("This constructor is only meant for versions 2 and up.");return(r=t.call(this,i,e,s)||this).defaultSampleDescriptionIndex=n,r}bs(i,t),_.defineProperty(i.prototype,"defaultSampleDescriptionIndex",{get:function(){return this.ly},set:function(t){if(!he(t,32))throw new g("The provided defaultSampleDescriptionIndex does not fit in 32 bits.");this.ly=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},i.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.defaultSampleDescriptionIndex,32)}}(Pp);r();(function(t){function i(i){void 0===i&&(i=[]);var e=t.call(this,"stsz",0,0)||this;return e.sampleSizes=i,e}bs(i,t),_.defineProperty(i.prototype,"sampleSizes",{get:function(){return this.Yy},set:function(t){if(!he(t.length,32))throw new g("Number of allowed samples cannot fit in 32 bits.");if(t.some((function(t){return!he(t,32)})))throw new g("Not all sampleSizes can be represented in 32 bits.");this.Yy=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4+4*this.sampleSizes.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(0,32),i.writer.writeUInt(this.sampleSizes.length,32);for(var e=0,s=this.sampleSizes;e<s.length;e++){var n=s[e];i.writer.writeUInt(n,32)}}})(jt),function(t){function i(i,e){void 0===i&&(i=0),void 0===e&&(e=0);var s=t.call(this,"stsz",0,0)||this;return s.defaultSampleSize=i,s.samples=e,s}bs(i,t),_.defineProperty(i.prototype,"defaultSampleSize",{get:function(){return this._y},set:function(t){if(!he(t,32))throw new g("Provided defaultSampleSize does not fit in 32 bits.");this._y=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"samples",{get:function(){return this.Cy},set:function(t){if(!he(t,32))throw new g("Number of allowed samples cannot fit in 32 bits.");this.Cy=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.defaultSampleSize,32),i.writer.writeUInt(this.samples,32)}}(jt);r();!function(t){function i(){return t.call(this,"stbl")||this}bs(i,t)}(Ih);r();!function(t){function i(i){var e=t.call(this,"stsc",0,0)||this;return e.entries=i,e}bs(i,t),_.defineProperty(i.prototype,"entries",{get:function(){return this.PA},set:function(t){if(!he(t.length,32))throw new g("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!he(t.firstChunk,32)||!he(t.sampleDescriptionIndex,32)||!he(t.samplesPerChunk,32)})))throw new g("Not all entries can be represented in 96 bits.");this.PA=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+12*this.entries.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.entries.length,32);for(var e=0,s=this.entries;e<s.length;e++){var n=s[e];i.writer.writeUInt(n.firstChunk,32),i.writer.writeUInt(n.samplesPerChunk,32),i.writer.writeUInt(n.sampleDescriptionIndex,32)}}}(jt);r();!function(t){function i(){return t.call(this,"schi")||this}bs(i,t)}(Ih);r();!function(t){function i(i,e,s){var n=t.call(this,"schm",0,void 0===s?0:1)||this;return n.schemeType=i,n.schemeVersion=e,n.schemeUri=s,n}bs(i,t),_.defineProperty(i.prototype,"schemeType",{get:function(){return this.Vy},set:function(t){if(4!==t.length)throw new g("The provided schemeType does not have a length of 4.");this.Vy=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"schemeVersion",{get:function(){return this.Gy},set:function(t){if(!he(t,32))throw new g("The provided schemeVersion does not fit in 23 bits.");this.Gy=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"schemeUri",{get:function(){return this.Wy},set:function(t){if(t&&4!==t.length)throw new g("The provided schemeUri does not have a length of 4.");this.flags=void 0===t?0:1,this.Wy=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4+(void 0===this.schemeUri?0:this.schemeUri.length+1)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeString(this.schemeType),i.writer.writeUInt(this.schemeVersion,32),this.schemeUri&&(i.writer.writeString(this.schemeUri),i.writer.writeByte(0))}}(jt);r();var zp=function(t){function i(i,e,s,n,r,o,h){void 0===h&&(h=0);var a=t.call(this,"sidx",i,h)||this;return a.referenceId=e,a.timescale=s,a.earliestPresentationTime=n,a.firstOffset=r,a.references=o,a}return bs(i,t),_.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"referenceId",{get:function(){return this.Zy},set:function(t){if(!he(t,32))throw new g("Provided referenceId does not fit in 32 bits.");this.Zy=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"timescale",{get:function(){return this.JA},set:function(t){if(!he(t,32))throw new g("Provided timescale does not fit in 32 bits.");this.JA=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"earliestPresentationTime",{get:function(){return this.Hy},set:function(t){if(!he(t,this.bitSize))throw new g("Provided earliestPresentationTime does not fit in ".concat(this.bitSize," bits."));this.Hy=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"firstOffset",{get:function(){return this.Xy},set:function(t){if(!he(t,this.bitSize))throw new g("Provided timescale does not fit in ".concat(this.bitSize," bits."));this.Xy=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"references",{get:function(){return this.qy},set:function(t){if(!he(t.length,16))throw new g("The number of provided reference items does not fit in 16 bits.");for(var i=0,e=t;i<e.length;i++){var s=e[i];if(!he(s.referencedSize,31))throw new g("Provided referenced size does not fit in 31 bits.");if(!he(s.subsegmentDuration,32))throw new g("Provided subsegment duration does not fit in 31 bits.");if(!he(s.sapType,3))throw new g("Provided SAP type does not fit in 3 bits.");if(!he(s.sapDeltaTime,28))throw new g("Provided SAP delta time does not fit in 28 bits.")}this.qy=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4+this.bitSize/8*2+2+2+12*this.references.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.referenceId,32),i.writer.writeUInt(this.timescale,32),this.serializeSidxBoxContent(i),i.writer.writeUInt(0,16),i.writer.writeUInt(this.references.length,16);for(var e=0,s=this.references;e<s.length;e++){var n=s[e];i.writer.writeBit(n.referenceType),i.writer.writeUInt(n.referencedSize,31),i.writer.writeUInt(n.subsegmentDuration,32),i.writer.writeBool(n.startsWithSap),i.writer.writeUInt(n.sapType,3),i.writer.writeUInt(n.sapDeltaTime,28)}},i}(jt),Bp=function(t){function i(i,e,s,n,r,o){return void 0===o&&(o=0),t.call(this,0,i,e,s,n,r,o)||this}return bs(i,t),i.prototype.serializeSidxBoxContent=function(t){t.writer.writeUInt(this.earliestPresentationTime,32),t.writer.writeUInt(this.firstOffset,32)},i}(zp),Up=function(t){function i(i,e,s,n,r,o){return void 0===o&&(o=0),t.call(this,1,i,e,s,n,r,o)||this}return bs(i,t),i.prototype.serializeSidxBoxContent=function(t){t.writer.writeUInt(this.earliestPresentationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.earliestPresentationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.firstOffset.getHighBitsUnsigned(),32),t.writer.writeUInt(this.firstOffset.getLowBitsUnsigned(),32)},i}(zp);r();var Qp=function(t){function i(i,e,s){return t.call(this,"styp",i,e,s)||this}return bs(i,t),i}(Rm);function Fp(t){for(var i=t.data,e=i.nextChars(4),s=i.nextUint32(),n=[];i.cursor.offset<i.data.byteLength;)n.push(i.nextChars(4));return new Qp(e,s,n)}r();!function(t){function i(i){void 0===i&&(i=0);var e=t.call(this,"smhd",0,0)||this;return e.balance=i,e}bs(i,t),_.defineProperty(i.prototype,"balance",{get:function(){return this.Ky},set:function(t){if(t<-1||t>1)throw new g("Provided balance does not fit in the allowed range [-1, 1].");if(!he(de(t,8),16))throw new g("Provided balance does not fit in 16 bits (fixed 8.8).");this.Ky=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+2+2},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(de(this.balance,8),16),i.writer.writeUInt(0,16)}}(jt);r();!function(t){function i(i){var e=t.call(this,"stss",0,0)||this;return e.entries=i,e}bs(i,t),_.defineProperty(i.prototype,"entries",{get:function(){return this.PA},set:function(t){if(!he(t.length,32))throw new g("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!he(t,32)})))throw new g("Not all entries can be represented in 32 bits.");this.PA=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4*this.entries.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.entries.length,32);for(var e=0,s=this.entries;e<s.length;e++){var n=s[e];i.writer.writeUInt(n,32)}}}(jt);r();!function(t){function i(i){var e=t.call(this,"stts",0,0)||this;return e.entries=i,e}bs(i,t),_.defineProperty(i.prototype,"entries",{get:function(){return this.PA},set:function(t){if(!he(t.length,32))throw new g("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!he(t.sampleCount,32)||!he(t.sampleDelta,32)})))throw new g("Not all entries can be represented in 64 bits.");this.PA=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+8*this.entries.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.entries.length,32);for(var e=0,s=this.entries;e<s.length;e++){var n=s[e];i.writer.writeUInt(n.sampleCount,32),i.writer.writeUInt(n.sampleDelta,32)}}}(jt);r();!function(t){function i(i){var e=t.call(this,"trep",0,0)||this;return e.trackId=i,e}bs(i,t),_.defineProperty(i.prototype,"trackId",{get:function(){return this.uy},set:function(t){if(!he(t,32))throw new g("The provided trackId does not fit in 32 bits.");this.uy=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.trackId,32)}}(Em);r();!function(t){function i(){return t.call(this,"udta")||this}bs(i,t)}(Ih);r();var Yp={red:0,green:0,blue:0};!function(t){function i(i,e){void 0===i&&(i=0),void 0===e&&(e=Yp);var s=t.call(this,"vmhd",0,1)||this;return s.graphicsMode=i,s.opColor=e,s}bs(i,t),_.defineProperty(i.prototype,"opColor",{get:function(){return this.Jy},set:function(t){if(!he(t.red,16)||!he(t.green,16)||!he(t.blue,16))throw new g("Not all colors could be represented in 16 bits.");this.Jy=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+2+6},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.graphicsMode,16),i.writer.writeUInt(this.opColor.red,16),i.writer.writeUInt(this.opColor.green,16),i.writer.writeUInt(this.opColor.blue,16)}}(jt);r();var Vp=function(t){function i(i,e,s,n,r){void 0===n&&(n={}),void 0===r&&(r=void 0);var o,h,a,u,c,l=this;return(l=t.call(this,i,e)||this).width=s.width,l.height=s.height,l.horizontalResolution=null!==(o=s.horizontal)&&void 0!==o?o:72,l.verticalResolution=null!==(h=s.vertical)&&void 0!==h?h:72,l.compressorName=null!==(a=n.compressorName)&&void 0!==a?a:"",l.frameCount=null!==(u=n.frameCount)&&void 0!==u?u:1,l.depth=null!==(c=n.depth)&&void 0!==c?c:24,l.clap=n.clap,l.pasp=n.pasp,l.extra=r,l}return bs(i,t),_.defineProperty(i.prototype,"width",{get:function(){return this.My},set:function(t){if(!he(t,16))throw new g("Provided width does not fit in 16 bits.");this.My=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"height",{get:function(){return this.Ty},set:function(t){if(!he(t,16))throw new g("Provided height does not fit in 16 bits.");this.Ty=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"horizontalResolution",{get:function(){return this.$y},set:function(t){if(!he(de(t,16),32))throw new g("Provided horizontalResolution does not fit in 32 bits (fixed 16.16).");this.$y=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"verticalResolution",{get:function(){return this.ib},set:function(t){if(!he(de(t,16),32))throw new g("Provided verticalResolution does not fit in 32 bits (fixed 16.16).");this.ib=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"compressorName",{get:function(){return this.eb},set:function(t){if(t.length>31)throw new g("The provided compressorName should at most be 31 characters long.");this.eb=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"frameCount",{get:function(){return this.sb},set:function(t){if(!he(t,16))throw new g("Provided frameCount does not fit in 16 bits.");this.sb=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"depth",{get:function(){return this.ob},set:function(t){if(!he(t,16))throw new g("Provided depth does not fit in 16 bits.");this.ob=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){var i,e,s,n,r,o;return t.prototype.getBoxContentSize.call(this)+2+2+12+2+2+4+4+4+2+32+2+2+(null!==(e=null===(i=this.clap)||void 0===i?void 0:i.getSize())&&void 0!==e?e:0)+(null!==(n=null===(s=this.pasp)||void 0===s?void 0:s.getSize())&&void 0!==n?n:0)+(null!==(o=null===(r=this.extra)||void 0===r?void 0:r.length)&&void 0!==o?o:0)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(0,16),i.writer.writeUInt(0,16),i.writer.writeUInt(0,32),i.writer.writeUInt(0,32),i.writer.writeUInt(0,32),i.writer.writeUInt(this.width,16),i.writer.writeUInt(this.height,16),i.writer.writeUInt(de(this.horizontalResolution,16),32),i.writer.writeUInt(de(this.verticalResolution,16),32),i.writer.writeUInt(0,32),i.writer.writeUInt(this.frameCount,16),i.writer.writeByte(this.compressorName.length),i.writer.writeString(this.compressorName);for(var e=0;e<31-this.compressorName.length;e++)i.writer.writeByte(0);i.writer.writeUInt(this.depth,16),i.writer.writeInt(-1,16),this.clap&&i.concat(this.clap.serialize()),this.pasp&&i.concat(this.pasp.serialize()),this.extra&&Tn(i.writer,this.extra)},i}(Im);r(),r();!function(t){function i(i){var e=t.call(this,"esds",0,0)||this;return e.esDescriptor=i,e}bs(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+(this.esDescriptor instanceof T?this.esDescriptor.length:this.esDescriptor.getSize())},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.esDescriptor instanceof T?i.concat(St.from(this.esDescriptor)):this.esDescriptor.serialize(i)}}(jt);r();!function(t){function i(i,e,s){var n=t.call(this,"mp4a",i,s)||this;return n.esd=e,n}bs(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.esd.getSize()},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.concat(this.esd.serialize())}}(Dm);r();!function(t){function i(i,e,s,n){void 0===n&&(n={});var r=t.call(this,"mp4v",i,e,n)||this;return r.esDescriptor=s,r}bs(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.esDescriptor.getSize()},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.esDescriptor.serialize(i)}}(Vp);r();!function(t){function i(i,e){var s=t.call(this,"mp4s",i)||this;return s.esDescriptor=e,s}bs(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.esDescriptor.getSize()},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.esDescriptor.serialize(i)}}(Im);r(),r();!function(t){function i(i){var e=t.call(this,"avcC")||this;return e.decoderConfig=i,e}bs(i,t),i.prototype.getBoxContentSize=function(){return this.decoderConfig.getSize()},i.prototype.serializeBoxContent=function(t){this.decoderConfig.serialize(t)}}(We);r();!function(){function t(t,i,e,s,n,r){void 0===r&&(r=1),this.lengthSizeMinusOne=e,this.version=r,this.profileIndication=t.indication,this.profileCompatibility=t.compatibility,this.levelIndication=i,this.spsSets=s,this.ppsSets=n}_.defineProperty(t.prototype,"version",{get:function(){return this.hb},set:function(t){if(!he(t,8))throw new g("Provided version does not fit in 8 bits.");this.hb=t},enumerable:!1,configurable:!0}),_.defineProperty(t.prototype,"profileIndication",{get:function(){return this.ub},set:function(t){if(!he(t,8))throw new g("Provided profileIndication does not fit in 8 bits.");this.ub=t},enumerable:!1,configurable:!0}),_.defineProperty(t.prototype,"profileCompatibility",{get:function(){return this.fb},set:function(t){if(!he(t,8))throw new g("Provided profileCompatibility does not fit in 8 bits.");this.fb=t},enumerable:!1,configurable:!0}),_.defineProperty(t.prototype,"levelIndication",{get:function(){return this.gb},set:function(t){if(!he(t,8))throw new g("Provided levelIndication does not fit in 8 bits.");this.gb=t},enumerable:!1,configurable:!0}),_.defineProperty(t.prototype,"spsSets",{get:function(){return this._b},set:function(t){if(!he(t.length,5))throw new g("Provided number of spsSets exceeds the max (32)");this._b=t},enumerable:!1,configurable:!0}),_.defineProperty(t.prototype,"ppsSets",{get:function(){return this.vb},set:function(t){if(!he(t.length,8))throw new g("Provided number of ppsSets exceeds the max (256)");this.vb=t},enumerable:!1,configurable:!0}),t.prototype.getSize=function(){return 7+2*this.spsSets.length+this.spsSets.reduce((function(t,i){return t+i.length}),0)+2*this.ppsSets.length+this.ppsSets.reduce((function(t,i){return t+i.length}),0)},t.prototype.serialize=function(t){t.writer.writeByte(this.version),t.writer.writeByte(this.profileIndication),t.writer.writeByte(this.profileCompatibility),t.writer.writeByte(this.levelIndication),t.writer.writeBits([1,1,1,1,1,1]),t.writer.writeUInt(this.lengthSizeMinusOne,2),t.writer.writeBits([1,1,1]),t.writer.writeUInt(this.spsSets.length,5);for(var i=0,e=this.spsSets;i<e.length;i++){var s=e[i];t.writer.writeUInt(s.length,16),t.concat(St.from(s))}t.writer.writeByte(this.ppsSets.length);for(var n=0,r=this.ppsSets;n<r.length;n++){var o=r[n];t.writer.writeUInt(o.length,16),t.concat(St.from(o))}}}();r();!function(t){function i(i,e,s,n,r){void 0===n&&(n={}),void 0===r&&(r=void 0);var o=t.call(this,"avc1",i,e,n)||this;return o.configurationBox=s,o.bitrateBox=r,o}bs(i,t),i.prototype.getBoxContentSize=function(){var i,e;return t.prototype.getBoxContentSize.call(this)+this.configurationBox.getSize()+(null!==(e=null===(i=this.bitrateBox)||void 0===i?void 0:i.getSize())&&void 0!==e?e:0)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.concat(this.configurationBox.serialize()),this.bitrateBox&&i.concat(this.bitrateBox.serialize())}}(Vp);r();!function(t){function i(i,e,s){var n=t.call(this,"btrt")||this;return n.bufferSizeDb=i,n.max=e,n.avg=s,n}bs(i,t),_.defineProperty(i.prototype,"bufferSizeDb",{get:function(){return this.NA},set:function(t){if(!he(t,32))throw new g("Provided bufferSizeDb does not fit in 32 bits.");this.NA=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"max",{get:function(){return this.mf},set:function(t){if(!he(t,32))throw new g("Provided max does not fit in 32 bits.");this.mf=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"avg",{get:function(){return this.wb},set:function(t){if(!he(t,32))throw new g("Provided avg does not fit in 32 bits.");this.wb=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 12},i.prototype.serializeBoxContent=function(t){t.writer.writeUInt(this.bufferSizeDb,32),t.writer.writeUInt(this.max,32),t.writer.writeUInt(this.avg,32)}}(We);r(),r(),r();var Gp=function(t){function i(i,e){var s,n,r,o,h=this;if(h=t.call(this,"tenc",i,0)||this,e.perSampleIvSize>0&&(null!==(n=null===(s=e.constantIv)||void 0===s?void 0:s.length)&&void 0!==n?n:0)>0)throw new g("Either perSampleSize should be > 0 or constantIv should be defined. Not both.");return h.kId=e.kId,h.isProtected=null!==(r=e.isProtected)&&void 0!==r?r:1,e.perSampleIvSize>0?h.perSampleIvSize=e.perSampleIvSize:h.constantIv=null!==(o=e.constantIv)&&void 0!==o?o:new T(0),h}return bs(i,t),_.defineProperty(i.prototype,"isProtected",{get:function(){return this.mb},set:function(t){if(!he(t,8))throw new g("Provided isProtected does not fit in 1 byte.");this.mb=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"perSampleIvSize",{get:function(){return this.pb},set:function(t){if(![8,16].includes(t))throw new g("Provided perSampleIvSize does not match any allowed value [8, 16].");this.pb=t,this.Ab=new T(0)},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"kId",{get:function(){return this.yb},set:function(t){if(16!==t.length)throw new g("Provided kId length is not 16.");this.yb=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"constantIv",{get:function(){return this.Ab},set:function(t){if(![8,16].includes(t.length))throw new g("Provided constant IV length does not match any allowed value [8, 16].");this.Ab=t,this.pb=0},enumerable:!1,configurable:!0}),i.prototype.getTencHeaderSize=function(){return 20+(this.constantIv.length>0?1+this.constantIv.length:0)},i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.getTencHeaderSize()},i.prototype.serializeVersionBoxContent=function(t){t.writer.writeByte(0)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.serializeOwnContent(i)},i.prototype.serializeOwnContent=function(t){t.writer.writeByte(0),this.serializeVersionBoxContent(t),t.writer.writeByte(this.isProtected),t.writer.writeByte(this.perSampleIvSize),Tn(t.writer,this.kId),0===this.perSampleIvSize&&(t.writer.writeByte(this.constantIv.length),Tn(t.writer,this.constantIv))},i}(jt),Wp=(function(t){function i(i){return t.call(this,0,i)||this}bs(i,t)}(Gp),function(t){function i(i){var e=t.call(this,1,i)||this;return e.cryptByteBlocks=i.cryptByteBlock,e.skipByteBlocks=i.skipByteBlock,e}return bs(i,t),_.defineProperty(i.prototype,"cryptByteBlocks",{get:function(){return this.bb},set:function(t){if(!he(t,4))throw new g("Provided cryptByteBlocks does not fit in 4 bits.");this.bb=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"skipByteBlocks",{get:function(){return this.Mb},set:function(t){if(!he(t,4))throw new g("Provided skipByteBlocks does not fit in 4 bits.");this.Mb=t},enumerable:!1,configurable:!0}),i.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.cryptByteBlocks,4),t.writer.writeUInt(this.skipByteBlocks,4)},i}(Gp));!function(t){function i(i){var e=t.call(this)||this;return e.tencBox=new Wp(i),e}bs(i,t),i.prototype.serializeBoxContent=function(t){this.tencBox.serializeOwnContent(t)},i.prototype.getBoxContentSize=function(){return this.tencBox.getTencHeaderSize()}}(ip);function Zp(t){return void 0!==t.iv}function Hp(t){return void 0!==t.subsamples}r();!function(t){function i(i){var e=t.call(this,"senc",0,{useSubsampleEncryption:!1})||this;return e.samples=i,e}bs(i,t),_.defineProperty(i.prototype,"samples",{get:function(){return this.Cy},set:function(t){var i;if(!he(t.length,32))throw new g("The number of samples provided does not fit in 32 bits.");for(var e=0,s=t;e<s.length;e++){var n=s[e];if(Zp(n)&&![8,16].includes(n.iv.length))throw new g("IV of one of the provided samples did not satisfy the required length constraints. [8, 16]");if(void 0===i&&(i=Hp(n)),!0===i&&!Hp(n)||!1===i&&Hp(n))throw new g("Mix of samples with and without subsamples detected.");if(Hp(n)){if(!he(n.subsamples.length,16))throw new g("Subsample length of one of the provided samples does not fit in 16 bits.");for(var r=0,o=n.subsamples;r<o.length;r++){var h=o[r];if(!he(h.clearData,16))throw new g("Subsample clearData of one of the provided samples does not fit in 16 bits.");if(!he(h.protectedData,23))throw new g("Subsample protectedData of one of the provided samples does not fit in 23 bits.")}}}this.flags.useSubsampleEncryption=null!=i&&i,this.Cy=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){for(var i=0,e=0,s=this.samples;e<s.length;e++){var n=s[e];Zp(n)&&(i+=n.iv.length),Hp(n)&&(i+=2+6*n.subsamples.length)}return t.prototype.getBoxContentSize.call(this)+4+i},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.samples.length,32);for(var e=0,s=this.samples;e<s.length;e++){var n=s[e];if(Zp(n)&&Tn(i.writer,n.iv),Hp(n)){i.writer.writeUInt(n.subsamples.length,16);for(var r=0,o=n.subsamples;r<o.length;r++){var h=o[r];i.writer.writeUInt(h.clearData,16),i.writer.writeUInt(h.protectedData,32)}}}},i.prototype.serializeFlags=function(t){t.writer.writeUInt(this.flags.useSubsampleEncryption?2:0,24)}}(jt);r(),r();!function(t){function i(i,e,s,n,r){var o=t.call(this,"emsg",0,0)||this;return o.schemeIdUri=i,o.value=e,o.data=r,o.id=s,o.timescale=n.timescale,o.presentationTimeDelta=n.presentationTimeDelta,o.eventDuration=n.eventDuration,o}bs(i,t),_.defineProperty(i.prototype,"timescale",{get:function(){return this.JA},set:function(t){if(!he(t,32))throw new g("The provided timescale does not fit in 32 bits.");this.JA=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"presentationTimeDelta",{get:function(){return this.Tb},set:function(t){if(!he(t,32))throw new g("The provided presentationTimeDelta does not fit in 32 bits.");this.Tb=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"eventDuration",{get:function(){return this.Sb},set:function(t){if(!he(t,32))throw new g("The provided eventDuration does not fit in 32 bits.");this.Sb=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"id",{get:function(){return this.Nb},set:function(t){if(!he(t,32))throw new g("The provided id does not fit in 32 bits.");this.Nb=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.schemeIdUri.length+1+this.value.length+1+16+this.data.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeString(this.schemeIdUri),i.writer.writeByte(0),i.writer.writeString(this.value),i.writer.writeByte(0),i.writer.writeUInt(this.timescale,32),i.writer.writeUInt(this.presentationTimeDelta,32),i.writer.writeUInt(this.eventDuration,32),i.writer.writeUInt(this.id,32),i.concat(St.from(this.data))}}(jt);r(),r(),r();var Xp=function(){function t(){this.boxes=[]}return t.prototype.serialize=function(){for(var t=new tm,i=0,e=this.boxes;i<e.length;i++){var s=e[i];t.concat(s.serialize())}return t.toRangedBuffer()},t}();function qp(t,i){return function(e){var s=function(t,i){for(var e=t.data,s=t.cursor;s.offset<e.byteLength;){var n=Am(e,s);if(!n.complete)return;if(ie(n.box,i))return n.box}}(new mm(_m(e),new wm),t);if(!s)throw new g("".concat(t," box not found"));return i(s)}}var Kp=qp("moov",Mp),Jp=qp("sidx",(function(t){var i,e,s=t.data,n=el(s.nextUint32()),r=n.version,o=n.flags,h=s.nextUint32(),a=s.nextUint32();0===r?(i=s.nextUint32(),e=s.nextUint32()):(i=s.nextUint64(),e=s.nextUint64()),s.skip(2);for(var u=s.nextUint16(),c=[],l=0;l<u;l++){var d=new wn(St.from(s.nextUint8Array(12))),f=d.readBit(),g=d.readUInt(31),_=d.readUInt(32),v=Boolean(d.readBit()),w=d.readUInt(3),m=d.readUInt(28);c.push({referenceType:f,referencedSize:g,subsegmentDuration:_,startsWithSap:v,sapType:w,sapDeltaTime:m})}return 0===r?new Bp(h,a,i,e,c,o.raw):new Up(h,a,i,e,c,o.raw)})),$p=qp("moof",jp),tA=qp("pssh",rp);function iA(t){return function(t){for(var i=new Xp,e=0,s=Ot(t);e<s.length;e++){var n=s[e];ie(n,"ftyp")?i.boxes.push(zm(n)):ie(n,"styp")?i.boxes.push(Fp(n)):ie(n,"moov")?i.boxes.push(Mp(n)):ie(n,"moof")?i.boxes.push(jp(n)):ie(n,"mdat")?i.boxes.push(Zm(n)):i.boxes.push(zt(n))}return i}(new mm(_m(t),new wm))}var eA=class extends Bo{get Ib(){return this.Db}get Eb(){return this.kb.expiration}get Op(){return this.Lb}get xb(){return this.kb.sessionId}Ws(){if(this.Cb)return this.Db;const t=[];return t.push(Promise.resolve(this.kb.close())),t.push(Bn(1e3)),this.jb.Em(Promise.race(t).catch(sA)),this.Cb=!0,this.Db}Ob(t,i,e){if(ui.Rg){const t=tA(Ae(i));if(1===t.version){i=new sp(t.systemId,t.data).serialize().join()}}return Promise.resolve(this.kb.generateRequest(t,i)).catch(sA)}$n(t){return Promise.resolve(this.kb.load(t)).catch(sA)}Rb(){return Promise.resolve(this.kb.remove()).catch(sA)}Yn(t){return Promise.resolve(this.kb.update(t)).catch(sA)}Pb(){this.Lb.iA(),this.kb.keyStatuses.forEach(((t,i)=>{this.zb(i,t)})),this.yo(new Wv(this.Lb))}zb(t,i){if("string"==typeof t){const e=t;t=i,i=e}const e=Ae(t);if(this.Bb===F_&&16===e.byteLength){let t=Os(e),i=t.getUint32(0,!0),s=t.getUint16(4,!0),n=t.getUint16(6,!0);t.setUint32(0,i,!1),t.setUint16(4,s,!1),t.setUint16(6,n,!1)}this.Bb===F_&&"status-pending"===i&&(i="usable"),this.Lb.$p(e,i)}constructor(t,i){super(),this.kb=t,this.Bb=i,this.Cb=!1,this.Ub=()=>{this.Pb()},this.Qb=t=>{this.yo(new gr(this,t.messageType,Ww(this.Bb,t.message)))},this.Fb=()=>{this.Cb=!0,this.Lb.qp>0&&(this.Lb.iA(),this.yo(new Wv(this.Lb))),this.kb.removeEventListener("keystatuseschange",this.Ub),this.kb.removeEventListener("message",this.Qb)},this.kb.addEventListener("keystatuseschange",this.Ub),this.kb.addEventListener("message",this.Qb),this.Lb=new Vw;const e=[];this.kb.closed&&e.push(Promise.resolve(this.kb.closed)),this.jb=new pa,e.push(this.jb.rA),this.Db=Promise.race(e).then(this.Fb,this.Fb),this.Pb()}};function sA(t){let i;if(t.message){const e=t.message.match(/^SystemCode:0x([0-9a-fA-F]+)$/);e&&(i=0|C(e[1],16))}throw new fs(t.message,void 0,i,t)}var nA=class{async Yb(t){return new eA(this.Vb.createSession(t),this.Gb)}Wb(t){return Promise.resolve(this.Vb.setServerCertificate(t))}bn(t){return Promise.resolve(t.setMediaKeys(this.Vb))}Zb(t){return Promise.resolve(t.setMediaKeys(null))}tr(){return Promise.resolve()}constructor(t,i,e){this.Vb=t,this.Gb=i,this.md=e}},rA=class{get Gb(){return this.Hb.keySystem}async Xb(){const t=await this.Hb.createMediaKeys();return new nA(t,this.Bb,this.qb)}Kb(){return this.qb}constructor(t,i,e){this.Hb=t,this.Bb=i,this.qb=e}};r(),r();var ba={VIDEO_H264:"video/avc",VIDEO_H265:"video/hevc",VIDEO_MP4:"video/mp4",VIDEO_MPEG:"video/mpeg",VIDEO_MPEG2:"video/mpeg2",VIDEO_WEBM:"video/webm",VIDEO_UNKNOWN:"video/x-unknown",AUDIO_AAC:"audio/mp4a-latm",AUDIO_MP4:"audio/mp4",AUDIO_WEBM:"audio/webm",AUDIO_UNKOWN:"audio/x-unknown",IMAGE_JPEG:"image/jpeg",APPLICATION_TTML_XML:"application/ttml+xml",APPLICATION_MP4:"application/mp4",TEXT_VTT:"text/vtt"};function ss(t){return Re(t,ba.APPLICATION_MP4)||Re(t,ba.VIDEO_MP4)||Re(t,ba.AUDIO_MP4)}function oA(t){return Re(t,ba.VIDEO_WEBM)||Re(t,ba.AUDIO_WEBM)}var hA=class{Jb(t){for(const[i,e]of this.$b)if(i.toLowerCase()===t.toLowerCase())return e}constructor(t,i){this.Hw=t,this.$b=i}};function $r(t){const i=t.trim(),e=i.indexOf(";");if(e<0)return new hA(i,[]);const s=i.substr(0,e).trim(),n=i.substr(e+1).trim(),r=[];let o=0,h=!1;for(let t=0;t<n.length;t++){const i=n[t];if(h||";"!==i)'"'===i&&(h=!h);else{const i=aA(n.substr(o,t));i&&r.push(i),o=t+1}}if(o!==n.length){const t=aA(n.substr(o));t&&r.push(t)}return new hA(s,r)}function aA(t){const i=t.indexOf("=");if(i<0)return;const e=t.substr(0,i).trim();let s=t.substr(i+1).trim();return'"'===s[0]&&(s=s.substring(1,s.length-1)),[e,s]}function uA(t){const i=t.trim(),e=i.indexOf(";");return e<0?i:i.substr(0,e).trim()}function cA(t){let i=t;const e=i.match(/^avc1\.(\d+)\.(\d+)$/);if(e){const t=Number(e[1]),s=Number(e[2]);i="avc1."+$h((t<<16|s).toString(16),6,"0")}return i}function lA(t,i,e,s){let n=!1;if(s.persistentState&&"optional"!==s.persistentState)return;if(s.distinctiveIdentifier&&"optional"!==s.distinctiveIdentifier)return;const r={audioCapabilities:[],videoCapabilities:[],persistentState:s.persistentState||"optional",distinctiveIdentifier:s.distinctiveIdentifier||"optional",initDataTypes:s.initDataTypes,sessionTypes:["temporary"],label:s.label,tM:s.tM};let o=!1;if(s.audioCapabilities){const h=s.audioCapabilities.filter((t=>Boolean(t.contentType)));h.length&&(r.audioCapabilities=h.filter((s=>dA(t,i,e,s))),o=!0,r.audioCapabilities.length&&(n=!0))}if(s.videoCapabilities){const h=s.videoCapabilities.filter((t=>Boolean(t.contentType)));h.length&&(r.videoCapabilities=h.filter((s=>dA(t,i,e,s))),o=!0,r.videoCapabilities.length&&(n=!0))}return o||(n=t(e,"video/mp4")),n?r:void 0}function dA(t,i,e,s){if(!s.contentType)return!1;if(s.encryptionScheme&&!fh(i,s.encryptionScheme))return!1;if(s.robustness)return!1;return t(e,uA(s.contentType))}function fA(t){if(t.videoCapabilities)for(const i of t.videoCapabilities)if(i.contentType)return i.contentType;if(t.audioCapabilities)for(const i of t.audioCapabilities)if(i.contentType)return i.contentType}function gA(t){const i=[];for(const e of t)e.encryptionScheme&&i.push({contentType:e.contentType,robustness:e.robustness});return t.concat(i)}function _A(t){return!(!t.audioCapabilities||!t.audioCapabilities.some(vA))||!(!t.videoCapabilities||!t.videoCapabilities.some(vA))}function vA(t){return!t.robustness}function wA(t,i){const e=[];for(const s of t)s.robustness?e.push(s):e.push(il({},s,{robustness:i}));return e}var mA=class{async nm(t,i){i=i.filter((t=>!t.tM));for(const t of i)t.audioCapabilities&&(t.audioCapabilities=gA(t.audioCapabilities)),t.videoCapabilities&&(t.videoCapabilities=gA(t.videoCapabilities));if(t===G_&&i.some(_A)){const e=i.map((t=>function(t,i){return il({},t,{videoCapabilities:t.videoCapabilities?wA(t.videoCapabilities,i):void 0,audioCapabilities:t.audioCapabilities?wA(t.audioCapabilities,i):void 0})}(t,"SW_SECURE_CRYPTO")));try{const i=await zl.requestMediaKeySystemAccess(t,e),s=i.getConfiguration();return new rA(i,t,s)}catch(t){}}const e=await zl.requestMediaKeySystemAccess(t,i),s=e.getConfiguration();return new rA(e,t,s)}static iM(){return _v()}};r(),r(),r(),r();var pA=class extends Bo{get xb(){return this.eM&&this.eM.sessionId||""}get Eb(){return NaN}get Ib(){return this.sM.rA}get Op(){return this.nM}async Ob(t,i,e){this.rM(),this.oM=new pa,this.Yb(Ae(i),e),await this.oM.rA}Yb(t,i){if(!t)throw new w("Expected initData to be defined but was "+t+".");const e=i&&i.playready&&i.playready.hM;let s;return s=i?this.aM.createSession(this.uM,t,e):this.aM.createSession(this.uM,t),s.addEventListener("mskeyclose",this.Fb),s.addEventListener("mskeymessage",this.cM),s.addEventListener("mskeyerror",this.Ss),s.addEventListener("mskeyadded",this.lM),this.eM=s,this.dM("status-pending"),s}async $n(t){return this.rM(),!0}async Yn(t){if(this.fM=new pa,this.rM(),!this.eM)return Promise.resolve();const i=Ae(t);if(0===i.byteLength)throw new w("Cannot call update with an empty response.");this.eM.update(i),await this.fM.rA}Ws(){return!this.Cb&&this.eM&&(this.Cb=!0,this.eM.close()),this.sM.rA}async Rb(){this.rM()}rM(){if(this.Cb)throw new w("Already closing or closed.")}dM(t){this.nM.iA(),this.nM.$p(dl,t),this.yo(new Wv(this.nM))}constructor(t,i){super(),this.aM=t,this.uM=i,this.Cb=!1,this.fM=void 0,this.oM=void 0,this.eM=void 0,this.Fb=()=>{this.Cb=!0,this.sM.eA(void 0),this.eM&&(this.eM.removeEventListener("mskeyclose",this.Fb),this.eM.removeEventListener("mskeymessage",this.cM),this.eM.removeEventListener("mskeyerror",this.Ss),this.eM.removeEventListener("mskeyadded",this.lM))},this.cM=t=>{this.oM&&(this.oM.eA(void 0),this.oM=void 0),this.yo(new gr(this,"license-request",cu(t.message).buffer,t.destinationURL||void 0))},this.Ss=()=>{const t=this.eM&&this.eM.error;if(!t)return;const i=new fs("Unknown CDM error",t.code,t.systemCode);if(this.oM)this.oM.sA(i),this.oM=void 0;else if(this.fM)this.fM.sA(i),this.fM=void 0;else switch(i.oA){case MSMediaKeyError.MS_MEDIA_KEYERR_OUTPUT:case MSMediaKeyError.MS_MEDIA_KEYERR_HARDWARECHANGE:this.dM("output-not-allowed");break;default:this.dM("internal-error")}},this.lM=()=>{this.oM&&(this.dM("usable"),this.oM.eA(void 0),this.oM=void 0),this.fM&&(this.dM("usable"),this.fM.eA(void 0),this.fM=void 0)},this.sM=new pa,this.nM=new Vw}},AA=class{async Yb(t){return new pA(this.aM,this.uM)}Wb(t){return Promise.resolve(!1)}bn(t){const i=()=>{t.msSetMediaKeys(this.aM),t.removeEventListener("loadedmetadata",i)};return t.readyState>=1?t.msSetMediaKeys(this.aM):t.addEventListener("loadedmetadata",i),Promise.resolve()}Zb(t){return Promise.resolve()}tr(){return Promise.resolve()}constructor(t,i,e){this.aM=t,this.Gb=i,this.md=e;const s=fA(e)||"video/mp4";this.uM=uA(s)}},yA=class{get Gb(){return this.Bb}Kb(){return this.gM}Xb(){const t=new oi.MSMediaKeys(this.Bb);return Promise.resolve(new AA(t,this.Bb,this.gM))}constructor(t,i){this.Bb=t,this.gM=i}},bA=class{nm(t,i){try{return Promise.resolve(function(t,i){if(!MA())throw new w("Unsupported key system "+t);for(let e of i){let i=lA(TA,Vv,t,e);if(i)return new yA(t,i)}throw new w("Unsupported key system configuration for "+t)}(t,i))}catch(t){return Promise.reject(t)}}static iM(){return MA()}};function MA(){return void 0!==oi.MSMediaKeys&&"function"==typeof oi.MSMediaKeys.isTypeSupported}function TA(t,i){return oi.MSMediaKeys.isTypeSupported(t,i)}r(),r(),r(),r();var SA=class extends Bo{get xb(){return this._M?this._M.sessionId:""}get Eb(){return NaN}get Ib(){return this.sM.rA}get Op(){return this.nM}Ob(t,i,e){const s=e&&e.fairplay&&e.fairplay.vM;if(!s)throw new w("Expected FairPlay contentId to be defined but was "+s+".");const n=function(t,i,e){const s=_r(t),n=2*s.length,r=2*i.length;let o=new ArrayBuffer(4+n+4+r+4+e.byteLength),h=new DataView(o),a=new J;return zc(h,a,n,!0),Dw(h,a,s,!0),zc(h,a,r,!0),Dw(h,a,i,!0),zc(h,a,e.byteLength,!0),gw(h,a,e),new T(o)}(Ae(i),s,this.wM);return this._M=this.mM.createSession(this.uM,n),this._M.addEventListener("webkitkeymessage",this.cM,!1),this._M.addEventListener("webkitkeyadded",this.lM,!1),this._M.addEventListener("webkitkeyerror",this.Ss,!1),this.dM("status-pending"),this.pM.eA(this._M),this.pM=new pa,Promise.resolve()}$n(t){return Promise.resolve(!0)}async Yn(t){const i=Ae(t);if(0===i.byteLength)throw new w("Cannot call update with an empty response.");this.AM=new pa;(this._M||await this.pM.rA).update(i),await this.AM.rA}Ws(){var t;const i=this._M;return i&&(i.removeEventListener("webkitkeymessage",this.cM,!1),i.removeEventListener("webkitkeyadded",this.lM,!1),i.removeEventListener("webkitkeyerror",this.Ss,!1),i.close()),this.pM.Dm(),null==(t=this.AM)||t.Dm(),this.sM.eA(void 0),this.sM.rA}Rb(){return Promise.resolve(void 0)}dM(t){this.nM.iA(),this.nM.$p(dl,t),this.yo(new Wv(this.nM))}constructor(t,i,e){super(),this.mM=t,this.uM=i,this.wM=e,this.sM=new pa,this.AM=void 0,this.nM=new Vw,this._M=void 0,this.pM=new pa,this.Ss=()=>{const t=this._M&&this._M.error;if(!t)return;const i=new fs("Unknown CDM error",t.code,t.systemCode);this.AM?(this.AM.sA(i),this.AM=void 0):i.oA===WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT?this.dM("output-not-allowed"):this.dM("internal-error"),this.yo(new Zv)},this.cM=t=>{this.yo(new gr(this,"license-request",cu(t.message).buffer,"this is a test string"===t.destinationURL?void 0:t.destinationURL))},this.lM=()=>{this.AM&&(this.AM.eA(void 0),this.AM=void 0),this.dM("usable")}}};r();var Ui=class extends ai{get name(){return"THEOplayerError"}get category(){return Ee.fromCode(this.code)}constructor(t,i,e){super(i,e),this.code=t}};function NA(t,i){return t instanceof Ui?t:t instanceof g?new Ui(i,t.message,t):new Ui(i,String(t))}var IA=class{getInternalMediaKeys(){return this.mM}async Yb(t){if(!this.wM)throw new Ui(Do.CONTENT_PROTECTION_CERTIFICATE_ERROR,"No valid certificate was provided.");return new SA(this.mM,this.uM,this.wM)}Wb(t){return this.wM=Ae(t),Promise.resolve(!0)}bn(t){return t.webkitSetMediaKeys(this.mM),Promise.resolve()}Zb(t){return t.webkitSetMediaKeys(null),Promise.resolve()}tr(){return Promise.resolve()}constructor(t,i,e){this.mM=t,this.Gb=i,this.md=e,this.wM=void 0;const s=fA(e)||"video/mp4";this.uM=uA(s)}},DA=class{get Gb(){return this.Bb}Kb(){return this.gM}Xb(){const t=new oi.WebKitMediaKeys(this.Bb);return Promise.resolve(new IA(t,this.Bb,this.gM))}constructor(t,i){this.Bb=t,this.gM=i}},EA=class{nm(t,i){try{return Promise.resolve(function(t,i){if(t!==X_)throw new w(t+" is not supported with webkit-prefixed Encrypted Media Extensions.");if(!kA())throw new w("Unsupported key system "+t);for(let e of i){let i=lA(LA,Gv,t,e);if(i)return new DA(t,i)}throw new w("Unsupported key system configuration for "+t)}(t,i))}catch(t){return Promise.reject(t)}}static iM(){return kA()}};function kA(){return void 0!==oi.WebKitMediaKeys&&"function"==typeof oi.WebKitMediaKeys.isTypeSupported}function LA(t,i){return oi.WebKitMediaKeys.isTypeSupported(t,i)}r();var xA=class{async nm(t,i){for(let e of this.yM)try{return await e.nm(t,i)}catch(t){}throw new w("Unsupported key system configuration for "+t)}constructor(t){this.yM=t}};r(),r(),r(),r(),r();var Ku=class{Wo(t,i){return new Promise((e=>{const s=Ai.xm([this.bM.wm,i]),n=()=>{s.Mm()};this.MM.push((()=>{const i=CA(t,s.wm);return e(i),i.then(n,n)})),this.TM||(this.TM=this.SM())}))}Dm(){return this.NM(!0)}gn(){return this.IM=void 0,this.NM(!1)}NM(t){const i=this.TM;return this.bM.Dm(),t&&(this.bM=new Ai),Promise.resolve(i)}constructor(t){this.MM=[],this.TM=void 0,this.bM=new Ai,this.SM=()=>{if(0===this.MM.length)return this.IM?CA(this.IM,this.bM.wm).then(this.DM,this.DM):this.DM();return this.MM.shift()().then(this.SM)},this.DM=()=>{if(0!==this.MM.length)return this.SM();this.TM=void 0},this.IM=t}};function CA(t,i){return new Promise((e=>e(t(i))))}var jA=new Ku,OA=class extends Bo{EM(){this.AM&&(this.dM("usable"),this.AM.eA(void 0),this.AM=void 0)}kM(t){const i=new fs("Unknown CDM error",t.errorCode,t.systemCode);this.AM?(this.AM.sA(i),this.AM=void 0):this.oM?(this.oM.sA(i),this.oM=void 0):i.oA===WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT?this.dM("output-restricted"):1===i.hA?this.dM("expired"):this.dM("internal-error")}LM(t){0!==t.message.byteLength?(this.oM&&(this.oM.eA(void 0),this.oM=void 0),this.yo(new gr(this,"license-request",Ww(this.Bb,cu(t.message).buffer),t.defaultURL||void 0))):this.oM&&(this.oM.sA("Empty key message"),this.oM=void 0)}xM(t){this.CM||(this.CM=t,this.jM.eA(t))}get Op(){return this.OM}get xb(){return this.RM}set xb(t){this.RM=t}get Ib(){return this.sM.rA}get Eb(){return NaN}async Ws(){this.throwIfClosed(),this.AM&&(this.AM.sA(void 0),this.AM=void 0),this.wA=!0,this.sM.eA(void 0)}async Ob(t,i){this.throwIfClosed(),this.oM=new pa,this.PM=Ae(i);(this.CM||await this.jM.rA).webkitGenerateKeyRequest(this.Bb,this.PM),await this.oM.rA}async $n(t){return this.throwIfClosed(),!1}async Rb(){this.throwIfClosed()}async Yn(t){if(this.throwIfClosed(),this.AM=new pa,ui.s_||ui.$g)return jA.Wo((async()=>{await this.doUpdate(t)}));await this.doUpdate(t)}async doUpdate(t){if(void 0===this.AM)return;(this.CM||await this.jM.rA).webkitAddKey(this.Bb,Ae(t),this.PM,this.xb),await this.AM.rA,ui.$g&&await Bn(500)}throwIfClosed(){if(this.wA)throw new w("Already closing or closed.")}dM(t){this.OM.iA(),this.OM.$p(dl,t),this.yo(new Wv(this.OM))}async zM(){const t=this.CM||await this.jM.rA;if(t.webkitCancelKeyRequest)try{t.webkitCancelKeyRequest(this.Bb,this.RM)}catch(t){}finally{await Bn(500)}}constructor(t){super(),this.Bb=t,this.oM=void 0,this.AM=void 0,this.wA=!1,this.PM=void 0,this.CM=void 0,this.sM=new pa,this.RM="",this.jM=new pa,this.OM=new Vw}},RA=class{bn(t){return this.CM=t,this.CM.addEventListener("webkitkeyadded",this.lM),this.CM.addEventListener("webkitkeyerror",this.BM),this.CM.addEventListener("webkitkeymessage",this.UM),this.QM.forEach(((i,e)=>i.xM(t))),this.FM.forEach((i=>i.xM(t))),Promise.resolve()}Zb(t){return t.removeEventListener("webkitkeyadded",this.lM),t.removeEventListener("webkitkeyerror",this.BM),t.removeEventListener("webkitkeymessage",this.UM),this.CM=void 0,Promise.resolve()}async tr(){let t=this.QM.entries(),i=t.next();for(;!i.done;)await i.value[1].zM(),i=t.next();this.QM.clear()}async Yb(t,i,e){const s=new OA(this.Gb);return this.CM&&s.xM(this.CM),this.FM.push(s),s}Wb(t){return Promise.resolve(!1)}YM(t){if(!t)return;let i=this.QM.get(t);return i||(i=this.FM.shift(),i?(i.xb=t,this.QM.set(t,i),i):void 0)}constructor(t,i){this.Gb=t,this.md=i,this.CM=void 0,this.QM=Ge(),this.FM=[],this.lM=t=>{const i=this.YM(t.sessionId);i&&i.EM()},this.BM=t=>{const i=this.YM(t.sessionId);i&&i.kM(t)},this.UM=t=>{const i=this.YM(t.sessionId);i&&i.LM(t)}}},PA=class{Xb(){return Promise.resolve(new RA(this.Gb,this.VM))}Kb(){return this.VM}constructor(t,i){this.Gb=t,this.VM=i}},zA=class{nm(t,i){try{return Promise.resolve(function(t,i){if(!zA.iM())throw new w("Unsupported key system "+t);for(let e of i){let i=lA(BA,Vv,t,e);if(i)return new PA(t,i)}throw new w("Unsupported key system configuration for "+t)}(t,i))}catch(t){return Promise.reject(t)}}static iM(){return gt()}};function BA(t,i){const e=Pd();return!(!e||!e.canPlayType||""===e.canPlayType(i,t))}r();var UA,QA=class{nm(t,i){return t===G_||t===F_?Promise.resolve(void 0):Promise.reject(new g("DRM configuration not supported"))}};function FA(){return UA||(UA=function(){const t=[];EA.iM()&&t.push(new EA);mA.iM()&&t.push(new mA);bA.iM()&&t.push(new bA);zA.iM()&&t.push(new zA);ui.r_&&t.push(new QA);return new xA(t)}()),UA}r(),r();var YA=class{iA(t){this.GM.delete(t)}WM(){this.GM.clear()}Jp(t){return this.GM.get(t)}$p(t,i){this.GM.set(t,i)}constructor(){this.GM=Ge()}},VA=class t{static ZM(){return t.K_||(t.K_=GA.iM()?new GA:new YA),t.K_}static iA(i){t.ZM().iA(i)}static WM(){t.ZM().WM()}static Jp(i){return t.ZM().Jp(i)}static $p(i,e){t.ZM().$p(i,e)}};VA.K_=void 0;var GA=class extends VA{static iM(){const t="foobar";try{return self.sessionStorage.setItem(t,t),self.sessionStorage.removeItem(t),!0}catch(t){return!1}}iA(t){self.sessionStorage.removeItem(t)}WM(){self.sessionStorage.clear()}Jp(t){var i;return null!=(i=self.sessionStorage.getItem(t))?i:void 0}$p(t,i){self.sessionStorage.setItem(t,i)}};r(),r();var WA=(()=>{const t=self.Blob;if(t)try{new t;return function(t){return(i,e)=>new t(i,e)}(t)}catch(t){}const i=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder;if(i)return function(t){return(i,e)=>{const s=new t;if(i)for(const t of i)s.append(t);return s.getBlob(e&&e.type||"")}}(i)})();function ZA(t,i,e){const s=WA([i],{type:"application/octet-stream"}),n=URL.createObjectURL(s),r=function(t,i){let e=t;const s=e.indexOf("?");if(s>=0&&(e=e.substr(0,s)),e=e.substr(e.lastIndexOf("/")+1),i){let t=e.indexOf(".");t<0&&(t=e.length),e=e.substr(0,t)+i+e.substr(t)}return e}(t,e),o=h.createElement("a");o.href=n,o.download=r,h.body.appendChild(o),o.click(),h.body.removeChild(o),URL.revokeObjectURL(n)}r();var HA="default";r(),r(),r(),r();var Me=function(t){return t.HM="arraybuffer",t.XM="json",t.qM="stream",t.KM="text",t}({});r();var Oh=class t{append(t,i){let e=t,s=i;e=XA(e),s=qA(s);const n=e.toLowerCase();if(this._f.hasOwnProperty(n)){const t=this._f[n],i=t[1];t[1]=i?i+", "+s:s}else this._f[n]=[e,s]}delete(t){const i=XA(t).toLowerCase();delete this._f[i]}get(t){const i=XA(t).toLowerCase();return this._f.hasOwnProperty(i)?this._f[i][1]:null}has(t){const i=XA(t).toLowerCase();return this._f.hasOwnProperty(i)}set(t,i){let e=t;e=XA(e);const s=e.toLowerCase();this._f[s]=[e,qA(i)]}forEach(t,i){for(const e in this._f)this._f.hasOwnProperty(e)&&t.call(i,this._f[e][1],e,this)}asList(){const t=[];for(const i in this._f)if(this._f.hasOwnProperty(i)){const[e,s]=this._f[i];t.push([e,s])}return t}JM(){const t={};return this.forEach(((i,e)=>{t[e]=i})),t}$M(t){t.forEach(((t,i)=>{this.append(i,t)}))}tT(t){t.forEach(((t,i)=>{this.set(i,t)}))}constructor(i){this._f={},i instanceof t?i.asList().forEach((t=>{let[i,e]=t;this.append(i,e)})):Array.isArray(i)?i.forEach((t=>{let[i,e]=t;this.append(i,e)})):i&&_.getOwnPropertyNames(i).forEach((t=>{this.append(t,i[t])}))}};function XA(t){let i=t;if("string"!=typeof i&&(i=String(i)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(i))throw new w("Invalid character in header field name");return i}function qA(t){let i=t;return"string"!=typeof i&&(i=String(i)),i}r(),r(),r(),r();var Un="function"==typeof b&&"symbol"==typeof f?b:function(t){return"Symbol("+t+")"};function KA(){}var JA=Number.isNaN||function(t){return t!=t},$A=KA;function ty(t){return"object"==typeof t&&null!==t||"function"==typeof t}function iy(t){return t.slice()}function ey(t,i,e,s,n){new T(t).set(new T(e,s,n),i)}function sy(t){return!1!==function(t){if("number"!=typeof t)return!1;if(JA(t))return!1;if(t<0)return!1;return!0}(t)&&t!==1/0}function ny(t,i,e){if("function"!=typeof t)throw new w("Argument is not a function");return Function.prototype.apply.call(t,i,e)}function ry(t,i,e,s){var n=t[i];if(void 0!==n){if("function"!=typeof n)throw new w(n+" is not a method");switch(e){case 0:return function(){return hy(n,t,s)};case 1:return function(i){var e=[i].concat(s);return hy(n,t,e)}}}return function(){return Ch(void 0)}}function oy(t,i,e){var s=t[i];if(void 0!==s)return ny(s,t,e)}function hy(t,i,e){try{return Ch(ny(t,i,e))}catch(t){return Lt(t)}}function ay(t){if(t=Number(t),JA(t)||t<0)throw new RangeError("highWaterMark property of a queuing strategy must be non-negative and non-NaN");return t}function uy(t){if(void 0===t)return function(){return 1};if("function"!=typeof t)throw new w("size property of a queuing strategy must be a function");return function(i){return t(i)}}var cy=Promise,ly=Promise.prototype.then,dy=Promise.resolve.bind(cy),fy=Promise.reject.bind(cy);function Us(t){return new cy(t)}function Ch(t){return dy(t)}function Lt(t){return fy(t)}function Ln(t,i,e){return ly.call(t,i,e)}function ja(t,i,e){Ln(Ln(t,i,e),void 0,$A)}function gy(t,i){ja(t,i)}function _y(t,i){ja(t,void 0,i)}function vy(t,i,e){return Ln(t,i,e)}function wy(t){Ln(t,void 0,$A)}var Yr=function(){function t(){this.iT=0,this.eT=0,this.sT={nT:[],rT:void 0},this.oT=this.sT,this.iT=0,this.eT=0}return _.defineProperty(t.prototype,"length",{get:function(){return this.eT},enumerable:!0,configurable:!0}),t.prototype.push=function(t){var i=this.oT,e=i;16383===i.nT.length&&(e={nT:[],rT:void 0}),i.nT.push(t),e!==i&&(this.oT=e,i.rT=e),++this.eT},t.prototype.shift=function(){var t=this.sT,i=t,e=this.iT,s=e+1,n=t.nT,r=n[e];return 16384===s&&(i=t.rT,s=0),--this.eT,this.iT=s,t!==i&&(this.sT=i),n[e]=void 0,r},t.prototype.forEach=function(t){for(var i=this.iT,e=this.sT,s=e.nT;!(i===s.length&&void 0===e.rT||i===s.length&&(i=0,0===(s=(e=e.rT).nT).length));)t(s[i]),++i},t.prototype.peek=function(){var t=this.sT,i=this.iT;return t.nT[i]},t}();function Na(t,i,e){var s=null;!0===e&&(s=_.prototype);var n=_.create(s);return n.value=t,n.done=i,n}function my(t,i){t.hT=!0,t.aT=i,i.uT=t,"readable"===i.Ea?by(t):"closed"===i.Ea?function(t){by(t),Sy(t)}(t):My(t,i.cT)}function py(t,i){return SM(t.aT,i)}function Ay(t){"readable"===t.aT.Ea?Ty(t,new w("Reader was released and can no longer be used to monitor the stream's closedness")):function(t,i){My(t,i)}(t,new w("Reader was released and can no longer be used to monitor the stream's closedness")),t.aT.uT=void 0,t.aT=void 0}function yy(t){return new w("Cannot "+t+" a stream using a released reader")}function by(t){t.Db=Us((function(i,e){t.lT=i,t.dT=e}))}function My(t,i){by(t),Ty(t,i)}function Ty(t,i){wy(t.Db),t.dT(i),t.lT=void 0,t.dT=void 0}function Sy(t){t.lT(void 0),t.lT=void 0,t.dT=void 0}var Ny=Un("[[CancelSteps]]"),Iy=Un("[[PullSteps]]");function Dy(t,i){void 0===i&&(i=!1);var e=new Oy(t);return e.hT=i,e}function Ey(t){return Us((function(i,e){var s={hf:i,nA:e};t.uT.fT.push(s)}))}function ky(t,i,e){var s=t.uT;s.fT.shift().hf(Na(i,e,s.hT))}function Ly(t){return t.uT.fT.length}function xy(t){var i=t.uT;return void 0!==i&&!!Ry(i)}var Cy,jy,Oy=function(){function t(t){if(!1===Rr(t))throw new w("ReadableStreamDefaultReader can only be constructed with a ReadableStream instance");if(!0===TM(t))throw new w("This stream has already been locked for exclusive reading by another reader");my(this,t),this.fT=new Yr}return _.defineProperty(t.prototype,"closed",{get:function(){return Ry(this)?this.Db:Lt(zy("closed"))},enumerable:!0,configurable:!0}),t.prototype.cancel=function(t){return Ry(this)?void 0===this.aT?Lt(yy("cancel")):py(this,t):Lt(zy("cancel"))},t.prototype.read=function(){return Ry(this)?void 0===this.aT?Lt(yy("read from")):Py(this):Lt(zy("read"))},t.prototype.releaseLock=function(){if(!Ry(this))throw zy("releaseLock");if(void 0!==this.aT){if(this.fT.length>0)throw new w("Tried to release a reader lock when that reader has pending read() calls un-settled");Ay(this)}},t}();function Ry(t){return!!ty(t)&&!!_.prototype.hasOwnProperty.call(t,"fT")}function Py(t){var i=t.aT;return i.gT=!0,"closed"===i.Ea?Ch(Na(void 0,!0,t.hT)):"errored"===i.Ea?Lt(i.cT):i._T[Iy]()}function zy(t){return new w("ReadableStreamDefaultReader.prototype."+t+" can only be used on a ReadableStreamDefaultReader")}"symbol"==typeof Un.asyncIterator&&((Cy={})[Un.asyncIterator]=function(){return this},jy=Cy,_.defineProperty(jy,Un.asyncIterator,{enumerable:!1}));var By={next:function(){if(!1===Uy(this))return Lt(Qy("next"));var t=this.vT;return void 0===t.aT?Lt(yy("iterate")):vy(Py(t),(function(i){var e=i.done;return e&&Ay(t),Na(i.value,e,!0)}))},return:function(t){if(!1===Uy(this))return Lt(Qy("next"));var i=this.vT;if(void 0===i.aT)return Lt(yy("finish iterating"));if(i.fT.length>0)return Lt(new w("Tried to release a reader lock when that reader has pending read() calls un-settled"));if(!1===this.wT){var e=py(i,t);return Ay(i),vy(e,(function(){return Na(t,!0,!0)}))}return Ay(i),Ch(Na(t,!0,!0))}};function Uy(t){return!!ty(t)&&!!_.prototype.hasOwnProperty.call(t,"vT")}function Qy(t){return new w("ReadableStreamAsyncIterator."+t+" can only be used on a ReadableSteamAsyncIterator")}function Fy(t){var i=t.mT.shift();return t.pT-=i.size,t.pT<0&&(t.pT=0),i.value}function Yy(t,i,e){if(!sy(e=Number(e)))throw new RangeError("Size must be a finite, non-NaN, non-negative number.");t.mT.push({value:i,size:e}),t.pT+=e}function Dr(t){t.mT=new Yr,t.pT=0}void 0!==jy&&_.setPrototypeOf(By,jy),_.defineProperty(By,"next",{enumerable:!1}),_.defineProperty(By,"return",{enumerable:!1});var Vy=Un("[[AbortSteps]]"),Gy=Un("[[ErrorSteps]]"),Wy=function(){function t(t,i){void 0===t&&(t={}),void 0===i&&(i={}),Hy(this);var e=i.size,s=i.highWaterMark;if(void 0!==t.type)throw new RangeError("Invalid type is specified");var n=uy(e);void 0===s&&(s=1),function(t,i,e,s){var n=_.create(lb.prototype);function r(){return oy(i,"start",[n])}var o=ry(i,"write",1,[n]),h=ry(i,"close",0,[]),a=ry(i,"abort",1,[]);db(t,n,r,o,h,a,e,s)}(this,t,s=ay(s),n)}return _.defineProperty(t.prototype,"locked",{get:function(){if(!1===Xy(this))throw pb("locked");return qy(this)},enumerable:!0,configurable:!0}),t.prototype.abort=function(t){return!1===Xy(this)?Lt(pb("abort")):!0===qy(this)?Lt(new w("Cannot abort a stream that already has a writer")):Ky(this,t)},t.prototype.close=function(){return!1===Xy(this)?Lt(pb("close")):!0===qy(this)?Lt(new w("Cannot close a stream that already has a writer")):!0===jh(this)?Lt(new w("Cannot close an already-closing stream")):Jy(this)},t.prototype.getWriter=function(){if(!1===Xy(this))throw pb("getWriter");return Zy(this)},t}();function Zy(t){return new nb(t)}function Hy(t){t.Ea="writable",t.cT=void 0,t.yA=void 0,t.AT=void 0,t.yT=new Yr,t.bT=void 0,t.MT=void 0,t.TT=void 0,t.ST=void 0,t.NT=!1}function Xy(t){return!!ty(t)&&!!_.prototype.hasOwnProperty.call(t,"AT")}function qy(t){return void 0!==t.yA}function Ky(t,i){var e=t.Ea;if("closed"===e||"errored"===e)return Ch(void 0);if(void 0!==t.ST)return t.ST.IT;var s=!1;"erroring"===e&&(s=!0,i=void 0);var n=Us((function(e,n){t.ST={IT:void 0,hf:e,nA:n,DT:i,ET:s}}));return t.ST.IT=n,!1===s&&tb(t,i),n}function Jy(t){var i=t.Ea;if("closed"===i||"errored"===i)return Lt(new w("The stream (in "+i+" state) is not in the writable state and cannot be closed"));var e=Us((function(i,e){var s={hf:i,nA:e};t.MT=s})),s=t.yA;return void 0!==s&&!0===t.NT&&"writable"===i&&kb(s),function(t){Yy(t,"close",0),_b(t)}(t.AT),e}function $y(t,i){"writable"!==t.Ea?ib(t):tb(t,i)}function tb(t,i){var e=t.AT;t.Ea="erroring",t.cT=i;var s=t.yA;void 0!==s&&ab(s,i),!1===function(t){if(void 0===t.bT&&void 0===t.TT)return!1;return!0}(t)&&!0===e.kT&&ib(t)}function ib(t){t.Ea="errored",t.AT[Gy]();var i=t.cT;if(t.yT.forEach((function(t){t.nA(i)})),t.yT=new Yr,void 0!==t.ST){var e=t.ST;if(t.ST=void 0,!0===e.ET)return e.nA(i),void eb(t);ja(t.AT[Vy](e.DT),(function(){e.hf(),eb(t)}),(function(i){e.nA(i),eb(t)}))}else eb(t)}function jh(t){return void 0!==t.MT||void 0!==t.TT}function eb(t){void 0!==t.MT&&(t.MT.nA(t.cT),t.MT=void 0);var i=t.yA;void 0!==i&&Tb(i,t.cT)}function sb(t,i){var e=t.yA;void 0!==e&&i!==t.NT&&(!0===i?function(t){Nb(t)}(e):kb(e)),t.NT=i}var nb=function(){function t(t){if(!1===Xy(t))throw new w("WritableStreamDefaultWriter can only be constructed with a WritableStream instance");if(!0===qy(t))throw new w("This stream has already been locked for exclusive writing by another writer");this.LT=t,t.yA=this;var i=t.Ea;if("writable"===i)!1===jh(t)&&!0===t.NT?Nb(this):Db(this),bb(this);else if("erroring"===i)Ib(this,t.cT),bb(this);else if("closed"===i)Db(this),function(t){bb(t),Sb(t)}(this);else{var e=t.cT;Ib(this,e),Mb(this,e)}}return _.defineProperty(t.prototype,"closed",{get:function(){return!1===rb(this)?Lt(Ab("closed")):this.Db},enumerable:!0,configurable:!0}),_.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===rb(this))throw Ab("desiredSize");if(void 0===this.LT)throw yb("desiredSize");return function(t){var i=t.LT,e=i.Ea;if("errored"===e||"erroring"===e)return null;if("closed"===e)return 0;return gb(i.AT)}(this)},enumerable:!0,configurable:!0}),_.defineProperty(t.prototype,"ready",{get:function(){return!1===rb(this)?Lt(Ab("ready")):this.xT},enumerable:!0,configurable:!0}),t.prototype.abort=function(t){return!1===rb(this)?Lt(Ab("abort")):void 0===this.LT?Lt(yb("abort")):function(t,i){var e=t.LT;return Ky(e,i)}(this,t)},t.prototype.close=function(){if(!1===rb(this))return Lt(Ab("close"));var t=this.LT;return void 0===t?Lt(yb("close")):!0===jh(t)?Lt(new w("Cannot close an already-closing stream")):ob(this)},t.prototype.releaseLock=function(){if(!1===rb(this))throw Ab("releaseLock");void 0!==this.LT&&ub(this)},t.prototype.write=function(t){return!1===rb(this)?Lt(Ab("write")):void 0===this.LT?Lt(yb("write to")):cb(this,t)},t}();function rb(t){return!!ty(t)&&!!_.prototype.hasOwnProperty.call(t,"LT")}function ob(t){return Jy(t.LT)}function hb(t,i){"pending"===t.CT?Tb(t,i):function(t,i){Mb(t,i)}(t,i)}function ab(t,i){"pending"===t.jT?Eb(t,i):function(t,i){Ib(t,i)}(t,i)}function ub(t){var i=t.LT,e=new w("Writer was released and can no longer be used to monitor the stream's closedness");ab(t,e),hb(t,e),i.yA=void 0,t.LT=void 0}function cb(t,i){var e=t.LT,s=e.AT,n=function(t,i){try{return t.OT(i)}catch(i){return vb(t,i),1}}(s,i);if(e!==t.LT)return Lt(yb("write to"));var r=e.Ea;if("errored"===r)return Lt(e.cT);if(!0===jh(e)||"closed"===r)return Lt(new w("The stream is closing or closed and cannot be written to"));if("erroring"===r)return Lt(e.cT);var o=function(t){return Us((function(i,e){var s={hf:i,nA:e};t.yT.push(s)}))}(e);return function(t,i,e){var s={chunk:i};try{Yy(t,s,e)}catch(i){return void vb(t,i)}var n=t.PT;if(!1===jh(n)&&"writable"===n.Ea){sb(n,wb(t))}_b(t)}(s,i,n),o}var lb=function(){function t(){throw new w("WritableStreamDefaultController cannot be constructed explicitly")}return t.prototype.error=function(t){if(!1===function(t){if(!ty(t))return!1;if(!_.prototype.hasOwnProperty.call(t,"PT"))return!1;return!0}(this))throw new w("WritableStreamDefaultController.prototype.error can only be used on a WritableStreamDefaultController");"writable"===this.PT.Ea&&mb(this,t)},t.prototype[Vy]=function(t){var i=this.zT(t);return fb(this),i},t.prototype[Gy]=function(){Dr(this)},t}();function db(t,i,e,s,n,r,o,h){i.PT=t,t.AT=i,i.mT=void 0,i.pT=void 0,Dr(i),i.kT=!1,i.OT=h,i.BT=o,i.UT=s,i.QT=n,i.zT=r;var a=wb(i);sb(t,a),ja(Ch(e()),(function(){i.kT=!0,_b(i)}),(function(e){i.kT=!0,$y(t,e)}))}function fb(t){t.UT=void 0,t.QT=void 0,t.zT=void 0,t.OT=void 0}function gb(t){return t.BT-t.pT}function _b(t){var i=t.PT;if(!1!==t.kT&&void 0===i.bT)if("erroring"!==i.Ea){if(0!==t.mT.length){var e=function(t){return t.mT.peek().value}(t);"close"===e?function(t){var i=t.PT;(function(t){t.TT=t.MT,t.MT=void 0})(i),Fy(t);var e=t.QT();fb(t),ja(e,(function(){!function(t){t.TT.hf(void 0),t.TT=void 0,"erroring"===t.Ea&&(t.cT=void 0,void 0!==t.ST&&(t.ST.hf(),t.ST=void 0)),t.Ea="closed";var i=t.yA;void 0!==i&&Sb(i)}(i)}),(function(t){!function(t,i){t.TT.nA(i),t.TT=void 0,void 0!==t.ST&&(t.ST.nA(i),t.ST=void 0),$y(t,i)}(i,t)}))}(t):function(t,i){var e=t.PT;!function(t){t.bT=t.yT.shift()}(e);var s=t.UT(i);ja(s,(function(){!function(t){t.bT.hf(void 0),t.bT=void 0}(e);var i=e.Ea;if(Fy(t),!1===jh(e)&&"writable"===i){var s=wb(t);sb(e,s)}_b(t)}),(function(i){"writable"===e.Ea&&fb(t),function(t,i){t.bT.nA(i),t.bT=void 0,$y(t,i)}(e,i)}))}(t,e.chunk)}}else ib(i)}function vb(t,i){"writable"===t.PT.Ea&&mb(t,i)}function wb(t){return gb(t)<=0}function mb(t,i){var e=t.PT;fb(t),tb(e,i)}function pb(t){return new w("WritableStream.prototype."+t+" can only be used on a WritableStream")}function Ab(t){return new w("WritableStreamDefaultWriter.prototype."+t+" can only be used on a WritableStreamDefaultWriter")}function yb(t){return new w("Cannot "+t+" a stream using a released writer")}function bb(t){t.Db=Us((function(i,e){t.lT=i,t.dT=e,t.CT="pending"}))}function Mb(t,i){bb(t),Tb(t,i)}function Tb(t,i){wy(t.Db),t.dT(i),t.lT=void 0,t.dT=void 0,t.CT="rejected"}function Sb(t){t.lT(void 0),t.lT=void 0,t.dT=void 0,t.CT="resolved"}function Nb(t){t.xT=Us((function(i,e){t.FT=i,t.YT=e})),t.jT="pending"}function Ib(t,i){Nb(t),Eb(t,i)}function Db(t){Nb(t),kb(t)}function Eb(t,i){wy(t.xT),t.YT(i),t.FT=void 0,t.YT=void 0,t.jT="rejected"}function kb(t){t.FT(void 0),t.FT=void 0,t.YT=void 0,t.jT="fulfilled"}function Lb(t){if("object"!=typeof t||null===t)return!1;try{return"boolean"==typeof t.aborted}catch(t){return!1}}var xb="undefined"!=typeof DOMException?DOMException:void 0;var Cb=function(t){if("function"!=typeof t&&"object"!=typeof t)return!1;try{return new t,!0}catch(t){return!1}}(xb)?xb:function(){var t=function(t,i){this.message=t||"",this.name=i||"Error",g.captureStackTrace&&g.captureStackTrace(this,this.constructor)};return t.prototype=_.create(g.prototype),_.defineProperty(t.prototype,"constructor",{value:t,writable:!0,configurable:!0}),t}();function jb(t,i,e,s,n,r){var o=Dy(t),h=Zy(i);t.gT=!0;var a=!1,u=Ch(void 0);return Us((function(c,l){var d,f,g,_;if(void 0!==r){if(d=function(){var e=new Cb("Aborted","AbortError"),r=[];!1===s&&r.push((function(){return"writable"===i.Ea?Ky(i,e):Ch(void 0)})),!1===n&&r.push((function(){return"readable"===t.Ea?SM(t,e):Ch(void 0)})),A((function(){return Promise.all(r.map((function(t){return t()})))}),!0,e)},!0===r.aborted)return void d();r.addEventListener("abort",d)}if(p(t,o.Db,(function(t){!1===s?A((function(){return Ky(i,t)}),!0,t):y(!0,t)})),p(i,h.Db,(function(i){!1===n?A((function(){return SM(t,i)}),!0,i):y(!0,i)})),f=t,g=o.Db,_=function(){!1===e?A((function(){return function(t){var i=t.LT,e=i.Ea;return!0===jh(i)||"closed"===e?Ch(void 0):"errored"===e?Lt(i.cT):ob(t)}(h)})):y()},"closed"===f.Ea?_():gy(g,_),!0===jh(i)||"closed"===i.Ea){var v=new w("the destination writable stream closed before all data could be piped to it");!1===n?A((function(){return SM(t,v)}),!0,v):y(!0,v)}function m(){var t=u;return Ln(u,(function(){return t!==u?m():void 0}))}function p(t,i,e){"errored"===t.Ea?e(t.cT):_y(i,e)}function A(t,e,s){function n(){ja(t(),(function(){return b(e,s)}),(function(t){return b(!0,t)}))}!0!==a&&(a=!0,"writable"===i.Ea&&!1===jh(i)?gy(m(),n):n())}function y(t,e){!0!==a&&(a=!0,"writable"===i.Ea&&!1===jh(i)?gy(m(),(function(){return b(t,e)})):b(t,e))}function b(t,i){ub(h),Ay(o),void 0!==r&&r.removeEventListener("abort",d),t?l(i):c(void 0)}wy(Us((function(t,i){!function e(s){s?t():Ln(!0===a?Ch(!0):Ln(h.xT,(function(){return Ln(Py(o),(function(t){return!0===t.done||(u=Ln(cb(h,t.value),void 0,KA),!1)}))})),e,i)}(!1)})))}))}var Ob=function(){function t(){throw new w}return _.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===Rb(this))throw Wb("desiredSize");return Yb(this)},enumerable:!0,configurable:!0}),t.prototype.close=function(){if(!1===Rb(this))throw Wb("close");if(!1===Vb(this))throw new w("The stream is not in a state that permits close");Ub(this)},t.prototype.enqueue=function(t){if(!1===Rb(this))throw Wb("enqueue");if(!1===Vb(this))throw new w("The stream is not in a state that permits enqueue");return Qb(this,t)},t.prototype.error=function(t){if(!1===Rb(this))throw Wb("error");Fb(this,t)},t.prototype[Ny]=function(t){Dr(this);var i=this.VT(t);return Bb(this),i},t.prototype[Iy]=function(){var t=this.GT;if(this.mT.length>0){var i=Fy(this);return!0===this.WT&&0===this.mT.length?(Bb(this),NM(t)):Pb(this),Ch(Na(i,!1,t.uT.hT))}var e=Ey(t);return Pb(this),e},t}();function Rb(t){return!!ty(t)&&!!_.prototype.hasOwnProperty.call(t,"GT")}function Pb(t){!1!==zb(t)&&(!0!==t.ZT?(t.ZT=!0,ja(t.HT(),(function(){t.ZT=!1,!0===t.XT&&(t.XT=!1,Pb(t))}),(function(i){Fb(t,i)}))):t.XT=!0)}function zb(t){var i=t.GT;return!1!==Vb(t)&&(!1!==t.kT&&(!0===TM(i)&&Ly(i)>0||Yb(t)>0))}function Bb(t){t.HT=void 0,t.VT=void 0,t.OT=void 0}function Ub(t){var i=t.GT;t.WT=!0,0===t.mT.length&&(Bb(t),NM(i))}function Qb(t,i){var e=t.GT;if(!0===TM(e)&&Ly(e)>0)ky(e,i,!1);else{var s=void 0;try{s=t.OT(i)}catch(i){throw Fb(t,i),i}try{Yy(t,i,s)}catch(i){throw Fb(t,i),i}}Pb(t)}function Fb(t,i){var e=t.GT;"readable"===e.Ea&&(Dr(t),Bb(t),IM(e,i))}function Yb(t){var i=t.GT.Ea;return"errored"===i?null:"closed"===i?0:t.BT-t.pT}function Vb(t){var i=t.GT.Ea;return!1===t.WT&&"readable"===i}function Gb(t,i,e,s,n,r,o){i.GT=t,i.mT=void 0,i.pT=void 0,Dr(i),i.kT=!1,i.WT=!1,i.XT=!1,i.ZT=!1,i.OT=o,i.BT=r,i.HT=s,i.VT=n,t._T=i,ja(Ch(e()),(function(){i.kT=!0,Pb(i)}),(function(t){Fb(i,t)}))}function Wb(t){return new w("ReadableStreamDefaultController.prototype."+t+" can only be used on a ReadableStreamDefaultController")}var Zb=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&x.floor(t)===t},Hb=function(){function t(){throw new w("ReadableStreamBYOBRequest cannot be used directly")}return _.defineProperty(t.prototype,"view",{get:function(){if(!1===Kb(this))throw fM("view");return this.qT},enumerable:!0,configurable:!0}),t.prototype.respond=function(t){if(!1===Kb(this))throw fM("respond");if(void 0===this.KT)throw new w("This BYOB request has been invalidated");this.qT.buffer,function(t,i){if(i=Number(i),!1===sy(i))throw new RangeError("bytesWritten must be a finite");hM(t,i)}(this.KT,t)},t.prototype.respondWithNewView=function(t){if(!1===Kb(this))throw fM("respond");if(void 0===this.KT)throw new w("This BYOB request has been invalidated");if(!ArrayBuffer.isView(t))throw new w("You can only respond with array buffer views");t.buffer,function(t,i){var e=t.JT.peek();if(e.byteOffset+e.bytesFilled!==i.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(e.byteLength!==i.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");e.buffer=i.buffer,hM(t,i.byteLength)}(this.KT,t)},t}(),Xb=function(){function t(){throw new w("ReadableByteStreamController constructor cannot be used directly")}return _.defineProperty(t.prototype,"byobRequest",{get:function(){if(!1===qb(this))throw gM("byobRequest");if(void 0===this.$T&&this.JT.length>0){var t=this.JT.peek(),i=new T(t.buffer,t.byteOffset+t.bytesFilled,t.byteLength-t.bytesFilled),e=_.create(Hb.prototype);!function(t,i,e){t.KT=i,t.qT=e}(e,this,i),this.$T=e}return this.$T},enumerable:!0,configurable:!0}),_.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===qb(this))throw gM("desiredSize");return lM(this)},enumerable:!0,configurable:!0}),t.prototype.close=function(){if(!1===qb(this))throw gM("close");if(!0===this.WT)throw new w("The stream has already been closed; do not close it again!");var t=this.tS.Ea;if("readable"!==t)throw new w("The stream (in "+t+" state) is not in the readable state and cannot be closed");!function(t){var i=t.tS;if(t.pT>0)return void(t.WT=!0);if(t.JT.length>0){if(t.JT.peek().bytesFilled>0){var e=new w("Insufficient bytes to fill elements in the given buffer");throw cM(t,e),e}}uM(t),NM(i)}(this)},t.prototype.enqueue=function(t){if(!1===qb(this))throw gM("enqueue");if(!0===this.WT)throw new w("stream is closed or draining");var i=this.tS.Ea;if("readable"!==i)throw new w("The stream (in "+i+" state) is not in the readable state and cannot be enqueued to");if(!ArrayBuffer.isView(t))throw new w("You can only enqueue array buffer views when using a ReadableByteStreamController");t.buffer,function(t,i){var e=t.tS,s=i.buffer,n=i.byteOffset,r=i.byteLength,o=s;if(!0===xy(e)){if(0===Ly(e))iM(t,o,n,r);else ky(e,new T(o,n,r),!1)}else!0===wM(e)?(iM(t,o,n,r),oM(t)):iM(t,o,n,r);Jb(t)}(this,t)},t.prototype.error=function(t){if(!1===qb(this))throw gM("error");cM(this,t)},t.prototype[Ny]=function(t){this.JT.length>0&&(this.JT.peek().bytesFilled=0);Dr(this);var i=this.VT(t);return uM(this),i},t.prototype[Iy]=function(){var t=this.tS;if(this.pT>0){var i=this.mT.shift();this.pT-=i.byteLength,nM(this);var e=void 0;try{e=new T(i.buffer,i.byteOffset,i.byteLength)}catch(t){return Lt(t)}return Ch(Na(e,!1,t.uT.hT))}var s=this.iS;if(void 0!==s){var n=void 0;try{n=new ArrayBuffer(s)}catch(t){return Lt(t)}var r={buffer:n,byteOffset:0,byteLength:s,bytesFilled:0,elementSize:1,ctor:T,readerType:"default"};this.JT.push(r)}var o=Ey(t);return Jb(this),o},t}();function qb(t){return!!ty(t)&&!!_.prototype.hasOwnProperty.call(t,"tS")}function Kb(t){return!!ty(t)&&!!_.prototype.hasOwnProperty.call(t,"KT")}function Jb(t){var i=function(t){var i=t.tS;if("readable"!==i.Ea)return!1;if(!0===t.WT)return!1;if(!1===t.kT)return!1;if(!0===xy(i)&&Ly(i)>0)return!0;if(!0===wM(i)&&vM(i)>0)return!0;var e=lM(t);if(e>0)return!0;return!1}(t);!1!==i&&(!0!==t.ZT?(t.ZT=!0,ja(t.HT(),(function(){t.ZT=!1,!0===t.XT&&(t.XT=!1,Jb(t))}),(function(i){cM(t,i)}))):t.XT=!0)}function $b(t,i){var e=!1;"closed"===t.Ea&&(e=!0);var s=tM(i);"default"===i.readerType?ky(t,s,e):function(t,i,e){var s=t.uT,n=s.eS.shift();n.hf(Na(i,e,s.hT))}(t,s,e)}function tM(t){var i=t.bytesFilled,e=t.elementSize;return new t.ctor(t.buffer,t.byteOffset,i/e)}function iM(t,i,e,s){t.mT.push({buffer:i,byteOffset:e,byteLength:s}),t.pT+=s}function eM(t,i){var e=i.elementSize,s=i.bytesFilled-i.bytesFilled%e,n=x.min(t.pT,i.byteLength-i.bytesFilled),r=i.bytesFilled+n,o=r-r%e,h=n,a=!1;o>s&&(h=o-i.bytesFilled,a=!0);for(var u=t.mT;h>0;){var c=u.peek(),l=x.min(h,c.byteLength),d=i.byteOffset+i.bytesFilled;ey(i.buffer,d,c.buffer,c.byteOffset,l),c.byteLength===l?u.shift():(c.byteOffset+=l,c.byteLength-=l),t.pT-=l,sM(t,l,i),h-=l}return a}function sM(t,i,e){rM(t),e.bytesFilled+=i}function nM(t){0===t.pT&&!0===t.WT?(uM(t),NM(t.tS)):Jb(t)}function rM(t){void 0!==t.$T&&(t.$T.KT=void 0,t.$T.qT=void 0,t.$T=void 0)}function oM(t){for(;t.JT.length>0;){if(0===t.pT)return;var i=t.JT.peek();!0===eM(t,i)&&(aM(t),$b(t.tS,i))}}function hM(t,i){var e=t.JT.peek();if("closed"===t.tS.Ea){if(0!==i)throw new w("bytesWritten must be 0 when calling respond() on a closed stream");!function(t,i){i.buffer=i.buffer;var e=t.tS;if(!0===wM(e))for(;vM(e)>0;)$b(e,aM(t))}(t,e)}else!function(t,i,e){if(e.bytesFilled+i>e.byteLength)throw new RangeError("bytesWritten out of range");if(sM(t,i,e),!(e.bytesFilled<e.elementSize)){aM(t);var s=e.bytesFilled%e.elementSize;if(s>0){var n=e.byteOffset+e.bytesFilled,r=e.buffer.slice(n-s,n);iM(t,r,0,r.byteLength)}e.buffer=e.buffer,e.bytesFilled-=s,$b(t.tS,e),oM(t)}}(t,i,e);Jb(t)}function aM(t){var i=t.JT.shift();return rM(t),i}function uM(t){t.HT=void 0,t.VT=void 0}function cM(t,i){var e=t.tS;"readable"===e.Ea&&(!function(t){rM(t),t.JT=new Yr}(t),Dr(t),uM(t),IM(e,i))}function lM(t){var i=t.tS.Ea;return"errored"===i?null:"closed"===i?0:t.BT-t.pT}function dM(t,i,e){var s=_.create(Xb.prototype);var n=ry(i,"pull",0,[s]),r=ry(i,"cancel",1,[]),o=i.autoAllocateChunkSize;if(void 0!==o&&(o=Number(o),!1===Zb(o)||o<=0))throw new RangeError("autoAllocateChunkSize must be a positive integer");!function(t,i,e,s,n,r,o){i.tS=t,i.XT=!1,i.ZT=!1,i.$T=void 0,i.mT=i.pT=void 0,Dr(i),i.WT=!1,i.kT=!1,i.BT=ay(r),i.HT=s,i.VT=n,i.iS=o,i.JT=new Yr,t._T=i,ja(Ch(e()),(function(){i.kT=!0,Jb(i)}),(function(t){cM(i,t)}))}(t,s,(function(){return oy(i,"start",[s])}),n,r,e,o)}function fM(t){return new w("ReadableStreamBYOBRequest.prototype."+t+" can only be used on a ReadableStreamBYOBRequest")}function gM(t){return new w("ReadableByteStreamController.prototype."+t+" can only be used on a ReadableByteStreamController")}function _M(t){return Us((function(i,e){var s={hf:i,nA:e};t.uT.eS.push(s)}))}function vM(t){return t.uT.eS.length}function wM(t){var i=t.uT;return void 0!==i&&!!pM(i)}var mM=function(){function t(t){if(!Rr(t))throw new w("ReadableStreamBYOBReader can only be constructed with a ReadableStream instance given a byte source");if(!1===qb(t._T))throw new w("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");if(TM(t))throw new w("This stream has already been locked for exclusive reading by another reader");my(this,t),this.eS=new Yr}return _.defineProperty(t.prototype,"closed",{get:function(){return pM(this)?this.Db:Lt(AM("closed"))},enumerable:!0,configurable:!0}),t.prototype.cancel=function(t){return pM(this)?void 0===this.aT?Lt(yy("cancel")):py(this,t):Lt(AM("cancel"))},t.prototype.read=function(t){return pM(this)?void 0===this.aT?Lt(yy("read from")):ArrayBuffer.isView(t)?(t.buffer,0===t.byteLength?Lt(new w("view must have non-zero byteLength")):function(t,i){var e=t.aT;if(e.gT=!0,"errored"===e.Ea)return Lt(e.cT);return function(t,i){var e=t.tS,s=1;i.constructor!==DataView&&(s=i.constructor.BYTES_PER_ELEMENT);var n=i.constructor,r={buffer:i.buffer,byteOffset:i.byteOffset,byteLength:i.byteLength,bytesFilled:0,elementSize:s,ctor:n,readerType:"byob"};if(t.JT.length>0)return t.JT.push(r),_M(e);if("closed"===e.Ea)return Ch(Na(new n(r.buffer,r.byteOffset,0),!0,e.uT.hT));if(t.pT>0){if(!0===eM(t,r)){var o=tM(r);return nM(t),Ch(Na(o,!1,e.uT.hT))}if(!0===t.WT){var h=new w("Insufficient bytes to fill elements in the given buffer");return cM(t,h),Lt(h)}}t.JT.push(r);var a=_M(e);return Jb(t),a}(e._T,i)}(this,t)):Lt(new w("view must be an array buffer view")):Lt(AM("read"))},t.prototype.releaseLock=function(){if(!pM(this))throw AM("releaseLock");if(void 0!==this.aT){if(this.eS.length>0)throw new w("Tried to release a reader lock when that reader has pending read() calls un-settled");Ay(this)}},t}();function pM(t){return!!ty(t)&&!!_.prototype.hasOwnProperty.call(t,"eS")}function AM(t){return new w("ReadableStreamBYOBReader.prototype."+t+" can only be used on a ReadableStreamBYOBReader")}var yM=function(){function t(t,i){void 0===t&&(t={}),void 0===i&&(i={}),MM(this);var e=i.size,s=i.highWaterMark,n=t.type;if("bytes"===String(n)){if(void 0!==e)throw new RangeError("The strategy for a byte stream cannot have a size function");void 0===s&&(s=0),dM(this,t,s=ay(s))}else{if(void 0!==n)throw new RangeError("Invalid type is specified");var r=uy(e);void 0===s&&(s=1),function(t,i,e,s){var n=_.create(Ob.prototype),r=ry(i,"pull",0,[n]),o=ry(i,"cancel",1,[]);Gb(t,n,(function(){return oy(i,"start",[n])}),r,o,e,s)}(this,t,s=ay(s),r)}}return _.defineProperty(t.prototype,"locked",{get:function(){if(!1===Rr(this))throw DM("locked");return TM(this)},enumerable:!0,configurable:!0}),t.prototype.cancel=function(t){return!1===Rr(this)?Lt(DM("cancel")):!0===TM(this)?Lt(new w("Cannot cancel a stream that already has a reader")):SM(this,t)},t.prototype.getReader=function(t){var i=(void 0===t?{}:t).mode;if(!1===Rr(this))throw DM("getReader");if(void 0===i)return Dy(this,!0);if("byob"===(i=String(i)))return function(t,i){void 0===i&&(i=!1);var e=new mM(t);return e.hT=i,e}(this,!0);throw new RangeError("Invalid mode is specified")},t.prototype.pipeThrough=function(t,i){var e=t.writable,s=t.readable,n=void 0===i?{}:i,r=n.preventClose,o=n.preventAbort,h=n.preventCancel,a=n.signal;if(!1===Rr(this))throw DM("pipeThrough");if(!1===Xy(e))throw new w("writable argument to pipeThrough must be a WritableStream");if(!1===Rr(s))throw new w("readable argument to pipeThrough must be a ReadableStream");if(r=Boolean(r),o=Boolean(o),h=Boolean(h),void 0!==a&&!Lb(a))throw new w("ReadableStream.prototype.pipeThrough's signal option must be an AbortSignal");if(!0===TM(this))throw new w("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(!0===qy(e))throw new w("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");return wy(jb(this,e,r,o,h,a)),s},t.prototype.pipeTo=function(t,i){var e=void 0===i?{}:i,s=e.preventClose,n=e.preventAbort,r=e.preventCancel,o=e.signal;return!1===Rr(this)?Lt(DM("pipeTo")):!1===Xy(t)?Lt(new w("ReadableStream.prototype.pipeTo's first argument must be a WritableStream")):(s=Boolean(s),n=Boolean(n),r=Boolean(r),void 0===o||Lb(o)?!0===TM(this)?Lt(new w("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):!0===qy(t)?Lt(new w("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):jb(this,t,s,n,r,o):Lt(new w("ReadableStream.prototype.pipeTo's signal option must be an AbortSignal")))},t.prototype.tee=function(){if(!1===Rr(this))throw DM("tee");var t=function(t,i){var e,s,n,r,o,h=Dy(t),a=!1,u=!1,c=!1,l=Us((function(t){o=t}));function d(){return!0===a||(a=!0,wy(vy(Py(h),(function(t){if(a=!1,!0===t.done)return!1===u&&Ub(n._T),void(!1===c&&Ub(r._T));var i=t.value,e=i,s=i;!1===u&&Qb(n._T,e),!1===c&&Qb(r._T,s)})))),Ch(void 0)}function f(){}return n=bM(f,d,(function(i){if(u=!0,e=i,!0===c){var n=iy([e,s]),r=SM(t,n);o(r)}return l})),r=bM(f,d,(function(i){if(c=!0,s=i,!0===u){var n=iy([e,s]),r=SM(t,n);o(r)}return l})),_y(h.Db,(function(t){Fb(n._T,t),Fb(r._T,t)})),[n,r]}(this);return iy(t)},t.prototype.getIterator=function(t){var i=(void 0===t?{}:t).preventCancel,e=void 0!==i&&i;if(!1===Rr(this))throw DM("getIterator");return function(t,i){void 0===i&&(i=!1);var e=Dy(t),s=_.create(By);return s.vT=e,s.wT=Boolean(i),s}(this,e)},t}();function bM(t,i,e,s,n){void 0===s&&(s=1),void 0===n&&(n=function(){return 1});var r=_.create(yM.prototype);return MM(r),Gb(r,_.create(Ob.prototype),t,i,e,s,n),r}function MM(t){t.Ea="readable",t.uT=void 0,t.cT=void 0,t.gT=!1}function Rr(t){return!!ty(t)&&!!_.prototype.hasOwnProperty.call(t,"_T")}function TM(t){return void 0!==t.uT}function SM(t,i){return t.gT=!0,"closed"===t.Ea?Ch(void 0):"errored"===t.Ea?Lt(t.cT):(NM(t),vy(t._T[Ny](i),KA))}function NM(t){t.Ea="closed";var i=t.uT;void 0!==i&&(Ry(i)&&(i.fT.forEach((function(t){t.hf(Na(void 0,!0,i.hT))})),i.fT=new Yr),Sy(i))}function IM(t,i){t.Ea="errored",t.cT=i;var e=t.uT;void 0!==e&&(Ry(e)?(e.fT.forEach((function(t){t.nA(i)})),e.fT=new Yr):(e.eS.forEach((function(t){t.nA(i)})),e.eS=new Yr),Ty(e,i))}function DM(t){return new w("ReadableStream.prototype."+t+" can only be used on a ReadableStream")}"symbol"==typeof Un.asyncIterator&&_.defineProperty(yM.prototype,Un.asyncIterator,{value:yM.prototype.getIterator,enumerable:!1,writable:!0,configurable:!0});var EM=function(){function t(t){var i=t.highWaterMark;this.highWaterMark=i}return t.prototype.size=function(t){return t.byteLength},t}(),kM=function(){function t(t){var i=t.highWaterMark;this.highWaterMark=i}return t.prototype.size=function(){return 1},t}(),LM=function(){function t(t,i,e){void 0===t&&(t={}),void 0===i&&(i={}),void 0===e&&(e={});var s=i.size,n=i.highWaterMark,r=e.size,o=e.highWaterMark;if(void 0!==t.writableType)throw new RangeError("Invalid writable type specified");var h=uy(s);if(void 0===n&&(n=1),n=ay(n),void 0!==t.readableType)throw new RangeError("Invalid readable type specified");var a,u=uy(r);void 0===o&&(o=0),o=ay(o),function(t,i,e,s,n,r){function o(){return i}function h(i){return function(t,i){var e=t.sS;if(!0===t.NT){return vy(t.nS,(function(){var s=t.rS;if("erroring"===s.Ea)throw s.cT;return UM(e,i)}))}return UM(e,i)}(t,i)}function a(i){return function(t,i){return CM(t,i),Ch(void 0)}(t,i)}function u(){return function(t){var i=t.oS,e=t.sS,s=e.hS();return zM(e),vy(s,(function(){if("errored"===i.Ea)throw i.cT;var t=i._T;!0===Vb(t)&&Ub(t)}),(function(e){throw CM(t,e),i.cT}))}(t)}function c(){return function(t){return OM(t,!1),t.nS}(t)}function l(i){return jM(t,i),Ch(void 0)}t.rS=function(t,i,e,s,n,r){void 0===n&&(n=1),void 0===r&&(r=function(){return 1});var o=_.create(Wy.prototype);return Hy(o),db(o,_.create(lb.prototype),t,i,e,s,n,r),o}(o,h,u,a,e,s),t.oS=bM(o,c,l,n,r),t.NT=void 0,t.nS=void 0,t.aS=void 0,OM(t,!0),t.sS=void 0}(this,Us((function(t){a=t})),n,h,o,u),function(t,i){var e=_.create(RM.prototype),s=function(t){try{return BM(e,t),Ch(void 0)}catch(t){return Lt(t)}},n=i.transform;if(void 0!==n){if("function"!=typeof n)throw new w("transform is not a method");s=function(t){return hy(n,i,[t,e])}}var r=ry(i,"flush",0,[e]);!function(t,i,e,s){i.uS=t,t.sS=i,i.cS=e,i.hS=s}(t,e,s,r)}(this,t);var c=oy(t,"start",[this.sS]);a(c)}return _.defineProperty(t.prototype,"readable",{get:function(){if(!1===xM(this))throw FM("readable");return this.oS},enumerable:!0,configurable:!0}),_.defineProperty(t.prototype,"writable",{get:function(){if(!1===xM(this))throw FM("writable");return this.rS},enumerable:!0,configurable:!0}),t}();function xM(t){return!!ty(t)&&!!_.prototype.hasOwnProperty.call(t,"sS")}function CM(t,i){Fb(t.oS._T,i),jM(t,i)}function jM(t,i){zM(t.sS),vb(t.rS.AT,i),!0===t.NT&&OM(t,!1)}function OM(t,i){void 0!==t.nS&&t.aS(),t.nS=Us((function(i){t.aS=i})),t.NT=i}var RM=function(){function t(){throw new w("TransformStreamDefaultController instances cannot be created directly")}return _.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===PM(this))throw QM("desiredSize");return Yb(this.uS.oS._T)},enumerable:!0,configurable:!0}),t.prototype.enqueue=function(t){if(!1===PM(this))throw QM("enqueue");BM(this,t)},t.prototype.error=function(t){if(!1===PM(this))throw QM("error");!function(t,i){CM(t.uS,i)}(this,t)},t.prototype.terminate=function(){if(!1===PM(this))throw QM("terminate");!function(t){var i=t.uS,e=i.oS._T;!0===Vb(e)&&Ub(e);var s=new w("TransformStream terminated");jM(i,s)}(this)},t}();function PM(t){return!!ty(t)&&!!_.prototype.hasOwnProperty.call(t,"uS")}function zM(t){t.cS=void 0,t.hS=void 0}function BM(t,i){var e=t.uS,s=e.oS._T;if(!1===Vb(s))throw new w("Readable side is not in a state that permits enqueue");try{Qb(s,i)}catch(t){throw jM(e,t),e.oS.cT}var n=function(t){return!0!==zb(t)}(s);n!==e.NT&&OM(e,!0)}function UM(t,i){return vy(t.cS(i),void 0,(function(i){throw CM(t.uS,i),i}))}function QM(t){return new w("TransformStreamDefaultController.prototype."+t+" can only be used on a TransformStreamDefaultController")}function FM(t){return new w("TransformStream.prototype."+t+" can only be used on a TransformStream")}r();var YM=class extends ai{get name(){return"AggregateError"}constructor(t){super(""+t.join("\n"),t[0]),this.causes=t}},Da=a,VM=te(Da.ReadableStream)&&te(Da.WritableStream)&&te(Da.TransformStream)&&st(Da.ReadableStream.prototype.pipeThrough)&&!wf.Ov,GM=VM?Da.ReadableStream:yM,WM=VM?Da.WritableStream:Wy,Iu=VM?Da.TransformStream:LM,ZM=(VM&&Da.ByteLengthQueuingStrategy&&Da.ByteLengthQueuingStrategy,VM&&Da.CountQueuingStrategy?Da.CountQueuingStrategy:kM);function HM(t){return function(t){return new GM({start(i){for(const e of t)i.enqueue(e);i.close()}})}([t])}function XM(t){return HM(function(t){return new T(t)}(t))}function qM(t,i){let e=i;const s=t.getReader(),n=new pa,r=()=>{o();const t=new Rh;s.cancel(t).catch(ul),n.sA(t)},o=()=>{e&&(e._m(r),e=void 0)};e&&(e.gm?r():e.vm(r));const h=[],a=t=>t.done?(o(),Promise.resolve(h)):(h.push(t.value),Promise.resolve(s.read()).then(a));return Promise.resolve(s.read()).then(a).then((t=>{o(),n.eA(t)}),(t=>{o(),n.sA(t)})),n.rA}function xs(t,i){return qM(t,i).then((t=>Dt(t).buffer))}function KM(t,i){let e=i;const{readable:s,writable:n}=new Iu,r=n.getWriter(),o=()=>{e&&e.Dm()};return r.closed.then(o,o),t.then((t=>(e=void 0,r.releaseLock(),t.pipeTo(n).catch(ul))),(t=>(e=void 0,r.releaseLock(),n.abort(t).catch(ul)))),s}function JM(t){const{readable:i,writable:e}=new Iu;return t.pipeTo(e,{preventCancel:!0}).catch((i=>{let e;e=Kc(i)?i[0]===i[1]||F(i[0])&&F(i[1])?i[0]:new YM(i):i,t.cancel(e).catch(ul)})),i.tee()}function $M(t){return _r(new T(t))}function tT(t){return Er(t).buffer}r();var iT="content-type",eT="text/plain;charset=UTF-8",nh=class{lS(t){return this.dS(t).then(JSON.parse)}fS(t,i){switch(t){case Me.HM:return this.gS(i);case Me.XM:return this.lS(i);case Me.qM:return this._S();case Me.KM:return this.dS(i);default:throw new w}}};function sT(t,i,e){if(t instanceof nh)return t;if(t instanceof GM)return function(t,i){return new rT({Hw:0,_S:t,vS:nT(i)})}(t,e);const s=nT(e),n=Promise.resolve(t).then((t=>function(t,i){if(t){if("string"==typeof t)return{Hw:Me.KM,wS:t,vS:i||eT};if(t instanceof ArrayBuffer||Pw(t))return{Hw:Me.HM,wS:dT(t),vS:i};if(Ec(t)||Kc(t))return{Hw:Me.XM,wS:t,vS:i};throw new w("Unsupported BodyInit type")}return{Hw:Me.KM,wS:null,vS:i}}(t,s)));return new rT({Hw:1,rA:n,mS:i})}function nT(t){return(t.get(iT)||"").toLowerCase()}var rT=class t extends nh{get pS(){return this.yS}get bS(){return 0===this.MS.Hw}TS(){return this.SS.rA}dS(t){return this.NS(oT,t)}lS(t){return this.NS(aT,t)}gS(t){return this.NS(cT,t)}_S(){return this.IS(function(t){return 0===t.Hw?t._S:KM(t.rA.then(lT).then(XM),t.mS)}(this.MS))}NS(t,i){if(this.yS)return Promise.reject(new w("Already used"));this.yS=!0;const e=t(this.MS,i);return this.SS.Em(e.then(ul)),e}IS(t){if(this.yS)throw new w("Already used");if(t.locked)throw new w("Body stream is locked");this.yS=!0;const i=new Iu,e=Promise.resolve(t.pipeTo(i.writable));return this.SS.Em(e),i.readable}DS(t){this.MS=t,1===t.Hw&&t.rA.catch(ul)}ES(){if(this.yS)throw new w("Already used");const i=function(t){if(0===t.Hw){const[i,e]=t._S.tee();return[{Hw:t.Hw,_S:i,vS:t.vS},{Hw:t.Hw,_S:e,vS:t.vS}]}{const[i,e]=t.mS.Lm();return[{Hw:t.Hw,rA:t.rA,mS:i},{Hw:t.Hw,rA:t.rA,mS:e}]}}(this.MS),e=i[0],s=i[1];return this.DS(e),new t(s)}constructor(t){super(),this.yS=!1,this.SS=new pa,this.SS.rA.catch(ul),this.DS(t)}};function oT(t,i){return 0===t.Hw?xs(t._S,i).then($M):(i&&t.mS.Em(i),Te(t.rA.then(hT),t.mS))}function hT(t){switch(t.Hw){case Me.KM:return Promise.resolve(t.wS||"");case Me.HM:return Promise.resolve(t.wS).then($M);case Me.XM:return Promise.resolve(t.wS).then(JSON.stringify)}}function aT(t,i){return 0===t.Hw?oT(t,i).then(JSON.parse):(i&&t.mS.Em(i),Te(t.rA.then(uT),t.mS))}function uT(t){return t.Hw===Me.XM?Promise.resolve(t.wS):hT(t).then(JSON.parse)}function cT(t,i){return 0===t.Hw?xs(t._S,i):(i&&t.mS.Em(i),Te(t.rA.then(lT),t.mS))}function lT(t){switch(t.Hw){case Me.HM:return Promise.resolve(t.wS);case Me.KM:case Me.XM:return hT(t).then(tT)}}function dT(t){return t instanceof ArrayBuffer?t:cu(se(t)).buffer}var fT=class extends nh{get pS(){return this.kS.pS}get bS(){return this.kS.bS}TS(){return this.kS.TS()}dS(t){return this.kS.dS(t)}lS(t){return this.kS.lS(t)}gS(t){return this.kS.gS(t)}_S(t){return this.kS._S(t)}ES(){return this.kS.ES()}constructor(t){super(),this.kS=t}};function Xn(t){return t.LS>=200&&t.LS<=299||304===t.LS}var vu=class t extends fT{xS(t){return this.fS(this.CS,t)}Wp(){return new t({xS:this.ES(),jS:this.jS},this)}constructor(t,i){let e,s,n,r,o;i?(e=i.RS,s=i.CS,n=i.LS,r=i.PS,o=i.zS):(e=[],s=Me.KM,n=200,r="OK",o=!1);const h=t.jS,a=new Oh(t.RS||e),u=t.CS||s,c=t.US||(i&&i.jS===h?i.US:h.Hu),l=i?i.kS:null;super(sT(void 0!==t.xS?t.xS:l,t.mS||new Ai,a)),this.RS=a,this.jS=h,this.US=c,this.CS=u,this.LS=void 0!==t.LS?t.LS:n,this.PS=void 0!==t.PS?String(t.PS):r,this.zS=t.zS||o}};r();var Ml=function(t){return t.DELETE="DELETE",t.GET="GET",t.HEAD="HEAD",t.OPTIONS="OPTIONS",t.POST="POST",t.PUT="PUT",t}({}),as=function(t){return t.QS="",t.FS="manifest",t.YS="segment",t.VS="preload-hint",t.GS="content-protection",t}({}),jo=function(t){return t.QS="",t.WS="initialization-segment",t.ZS="fairplay-license",t.HS="fairplay-certificate",t.XS="widevine-license",t.qS="widevine-certificate",t.KS="playready-license",t.JS="clearkey-license",t.$S="aes128-key",t}({}),Fh=function(t){return t.QS="",t.tN="audio",t.iN="video",t.KM="text",t.eN="image",t}({}),gT=function(t){return t.sN="same-origin",t.nN="no-cors",t.rN="cors",t.oN="navigate",t}({}),_e=class{constructor(t,i){const e=t.Hu;let s,n,r,o,h,a,u,c,l,d,f,g,_,v,w;var m,p,A;i?(s=i.wS,n=i.RS,r=i.hN,o=i.CS,h=i.aN,a=i.uN,u=i.wm,c=i.Hw,l=i.cN,d=i.lN,f=i.dN,g=i.fN,_=i.gN,v=i._N,w=i.vN):(s=null,n={},r="GET",o=Me.KM,h=0,a=0,c="",l="",d="",f=!1,_=void 0,v=!1,w=void 0),this.Hu=e,this.wS=t.wS||s,this.RS=new Oh(t.RS||n),this.hN=t.hN||r,this.CS=t.CS||o,this.aN=void 0!==t.aN?Number(t.aN)||0:h,this.uN=void 0!==t.uN?Number(t.uN)||0:a,this.wm=t.wm||u||(new Ai).wm,this.Hw=t.Hw||c,this.cN=t.cN||l,this.lN=t.lN||d,this.dN=void 0!==t.dN?Boolean(t.dN):f,this.fN=t.fN||g,this.gN=null!=(m=t.gN)?m:_,this._N=null!=(p=t._N)?p:v,this.vN=null!=(A=t.vN)?A:w}},_T=class{jS(t){const i=function(t){return new vu({xS:null,RS:{},jS:t,US:t.Hu,CS:t.CS,LS:0,PS:Qi.gp})}(new _e(t));return Promise.resolve(i)}wN(t){}gn(){}};var vT=class t{static get mN(){return t.pN||(t.pN=new t(new _T)),t.pN}jS(t){const i=this.AN(t);return this.yN.jS(i)}wN(t){return this.yN.wN(this.bN(t))}AN(i){let e=new _e(i);if(!this.MN){const i=t.TN(e.Hu);e=new _e({Hu:i},e)}return e}bN(i){let e=i.Hu;return this.MN||(e=t.TN(e)),{Hu:e,wS:i.wS}}static TN(t){return me.Ow&&sa(t,"http://")?t.replace(":","s:"):t}gn(){this.yN.gn()}constructor(t,i=!0){this.yN=t,this.MN=i}};function qr(t,i){const e=me.Ah(t);return wT(e,i),e.toString()}function wT(t,i){for(const e of _.keys(i))t.searchParams.set(e,i[e])}function Jt(t,i){let e=me.Dw(t);return i&&!Qh(e,"/")&&(e+="/"),e}vT.pN=void 0,r(),r(),r();var mT=/cache:(.+)?(?=&|$)/,pT="http://webcache.googleusercontent.com/search?q=cache:";function AT(t){if(!sa(t,pT))return"";const i=me.Ah(t).search.match(mT);return i&&i.length>1?i[1]:""}function yT(t){return me.Ah(".",t)}r(),r();var th=function(t){return t.SN="HttpOpenError",t.NN="HttpResponseError",t.DN="HttpTimeoutError",t}({}),bT=class extends ai{get jS(){return this.EN}constructor(t,i,e){super(i,e),this.EN=t}};var MT=class extends bT{get name(){return th.SN}constructor(t,i){super(t,function(t){return"Error while opening "+t+". Invalid URL."}(t.Hu),i)}};r();var Ts=class extends bT{get name(){return th.NN}get kN(){return this.LN}constructor(t,i,e){super(t.jS,null!=e?e:function(t){return"Error while loading "+t.jS.Hu+", status code "+t.LS}(t),i),this.LN=t}};r();var TT=class extends bT{get name(){return th.DN}constructor(t,i){super(t,function(t){return"Request for "+t.Hu+" timed out after "+t.aN+" seconds."}(t),i)}};r();var ST=self.fetch,NT=self.Request,IT=self.Response,DT=self.Headers,ET=self.ReadableStream,kT=self.AbortSignal,LT=self.AbortController,xT=Vc((()=>{try{return st(ST)&&te(NT)&&te(IT)&&te(DT)&&"forEach"in DT.prototype&&L_()}catch(t){return!1}})),CT=["http:","https:"];var jT=Vc((()=>{try{return xT()&&te(kT)&&te(LT)&&"signal"in NT.prototype}catch(t){return!1}})),OT=Vc((()=>{try{return xT()&&te(ET)&&"body"in IT.prototype&&!ui.Rg}catch(t){return!1}}));function hn(t){return t instanceof bT}function RT(t){return t instanceof Ts}function PT(t,i){const e=t.RS.has("content-length")?Number(t.RS.get("content-length")):void 0;let s;return s=t.bS?function(t,i,e){return t.pipeThrough(new Iu(new zT(i,e)))}(t._S(),i,e):async function(t,i,e){await Promise.resolve(),i(0,e);const s=await t,n=s.byteLength;return i(n,null!=e?e:n),s}(t.gS(),i,e),new vu({xS:s,jS:t.jS},t)}r(),r();var zT=class{transform(t,i){this.xN+=t.byteLength,this.CN(this.xN,this.jN),i.enqueue(t)}flush(t){var i;this.CN(this.xN,null!=(i=this.jN)?i:this.xN)}constructor(t,i){this.CN=t,this.jN=i,this.xN=0}};var BT=class{async ON(){const t=this.EN;let i,e;t.aN&&(this.RN=u((()=>{this.PN=!0,this.bM.Dm()}),t.aN),this.bM.wm.Sm((()=>{c(this.RN)})));try{i=ST(t.Hu,{method:t.hN,headers:t.RS.JM(),body:t.wS,credentials:t.dN?"include":"same-origin",signal:FT(this.bM.wm),mode:t.gN,keepalive:t.vN})}catch(i){throw new MT(t,i)}try{e=await i}catch(t){const i=this.zN(t);throw F(i)&&this.bM.Dm(),i}const s=e.url||t.Hu,n=0===e.status&&"file:"===function(t){return me.Ah(t).protocol}(s)?200:e.status,r=new UT(this,e,this.bM);let o=new vu({xS:r,jS:t,CS:t.CS,RS:YT(e.headers),LS:n,PS:e.statusText,US:s});if(!Xn(o))throw new Ts(o);return t.fN&&(o=PT(o,t.fN)),o}zN(t){return hn(t)?t:F(t)?this.PN?new TT(this.EN):new Rh(t.message,t):this.LN?new Ts(this.LN,t):new MT(this.EN,t)}constructor(t){this.bM=new Ai,this.LN=void 0,this.RN=0,this.PN=!1,this.EN=t,this.bM.Em(t.wm),this.kN=this.ON()}},UT=class t extends nh{get pS(){return this.BN.bodyUsed}get bS(){return Rt(this.BN.body)}TS(){return this.SS.rA}dS(t){return this.NS(this.BN.text(),t)}gS(t){return this.NS(this.BN.arrayBuffer(),t)}_S(){const t=this.BN.body;return t?this.IS(t):KM(this.gS().then(XM),this.bM)}ES(){const i=this.BN.clone(),[e,s]=this.bM.Lm();return this.bM=e,new t(this.UN,i,s)}NS(t,i){i&&this.bM.Em(i);let e=Ic(Promise.resolve(t),this.bM.wm).catch((t=>{throw this.UN.zN(t)}));return e=Te(e,this.bM),this.SS.Em(e.then(ul)),e}IS(t){return new GM(new VT(t,(t=>this.UN.zN(t)),this.bM,this.SS),{highWaterMark:0})}constructor(t,i,e){super(),this.SS=new pa,this.UN=t,this.BN=i,this.bM=e,this.SS.rA.catch(ul)}},QT="abort";function FT(t){if(!jT())return;const i=new LT;if(t.gm)i.abort();else if(!t.Am){const e=()=>{s(),i.abort()},s=()=>{i.signal.removeEventListener(QT,e),t._m(e),t.Nm(s)};i.signal.addEventListener(QT,e),t.vm(e),t.Sm(s)}return i.signal}function YT(t){if(function(t){return jl(t)&&"function"==typeof t.forEach}(t)){const i=new Oh;return t.forEach(((t,e)=>{Array.isArray(t)&&2===t.length?i.append(t[0],t[1]):i.append(e,t)})),i}return new Oh(t)}var VT=class{start(t){this.uT=this.QN.getReader()}async pull(t){let i;try{i=await Ic(this.uT.read(),this.bM.wm)}catch(i){const e=this.FN(i);return this.SS.sA(e),this.bM.Dm(),this.uT.cancel(e).catch(ul),void t.error(e)}i.done?(this.SS.eA(),this.bM.Dm(),t.close()):t.enqueue(i.value)}cancel(t){return this.bM.Dm(),this.SS.sA(t),this.uT.cancel(t)}constructor(t,i,e,s){this.QN=t,this.FN=i,this.bM=e,this.SS=s}};r();var GT=class{get kN(){return this.YN.rA}ON(){const t=this.VN,i=this.EN;if(i.wm.gm)return this.GN();t.onreadystatechange=()=>this.WN(),t.onprogress=t=>this.CN(t),t.onload=()=>this.ZN(),t.onloadend=()=>this.HN(),t.onerror=()=>this.XN(),t.ontimeout=()=>this.qN(),t.onabort=()=>this.GN(),t.open(i.hN,i.Hu,!0),t.withCredentials=Boolean(i.dN),"responseType"in t&&i.CS&&(i.CS===Me.KM?t.responseType="text":t.responseType="arraybuffer"),i.RS.forEach(((i,e)=>{t.setRequestHeader(e,i)})),i.aN&&(t.timeout=i.aN),this.bM.wm.vm(this.KN);const e=i.wS;e?t.send(e):t.send()}WN(){const t=this.VN;void 0!==t&&t.readyState>=2&&!this.JN&&(this.JN=!0,this.$N())}$N(){var t;const i=this.VN,e=function(t){const i=new Oh,e=t.replace(/\r?\n[\t ]+/g," ");return e.split(/\r?\n/).forEach((t=>{const e=t.split(":"),s=e.shift().trim();if(s){const t=e.join(":").trim();i.append(s,t)}})),i}(i.getAllResponseHeaders()||""),s=this.EN;var n;this.tI=new pa,this.LN=new vu({jS:s,CS:s.CS,xS:this.tI.rA,LS:i.status,PS:i.statusText,RS:e,US:null!=(n=i.responseURL)?n:e.get("X-Request-URL")}),null==(t=this.YN)||t.eA(this.LN)}ZN(){var t;const i=this.VN;if(void 0===i)return;let e=i.response;if(!Rt(e)){const t=this.EN.CS;e=t===Me.KM?i.responseText:t===Me.HM?new ArrayBuffer(0):{}}null==(t=this.tI)||t.eA(e)}HN(){this.gn()}CN(t){void 0!==this.VN&&(null==this.EN.fN||this.EN.fN.call(this.EN,t.loaded,t.lengthComputable?t.total:void 0))}XN(){const t=new g("Network request failed");this.LN?this.Ss(new Ts(this.LN,t)):this.Ss(new MT(this.EN,t))}qN(){this.Ss(new TT(this.EN))}GN(){this.Ss(new Rh),this.gn()}Ss(t){var i,e;null==(i=null!=(e=this.tI)?e:this.YN)||i.sA(t)}gn(){this.VN=void 0,this.LN=void 0,this.YN=void 0,this.tI=void 0,this.bM.Mm()}constructor(t){this.bM=new Ai,this.LN=void 0,this.YN=new pa,this.JN=!1,this.KN=()=>{var t;this.GN(),null==(t=this.VN)||t.abort()},this.EN=t,this.bM.Em(t.wm),this.VN=new Ul,this.ON()}};function WT(t,i,e){return new Promise(((s,n)=>{if(e&&e.gm)return n(new Rh);const r=t=>{h(),s(t)},o=()=>{h(),n(new Rh)},h=()=>{t.removeEventListener(i,r),e&&e._m(o)};t.addEventListener(i,r),e&&e.vm(o)}))}r();var ZT=class{jS(t){return function(t){if(!xT()||!function(t){try{return CT.indexOf(new self.URL(t,self.location.href).protocol)>=0}catch(t){return!1}}(t.Hu))return!1;if(!OT()&&t.fN)return!1;if(!t._N){if(ui.s_&&ui.Gg<=68)return!1;if(ui.$g)return!1}return!0}(t)?new BT(t).kN:new GT(t).kN}wN(t){if(Mf&&Mf.sendBeacon)Mf.sendBeacon(t.Hu,WA([t.wS],{type:t.vS}));else{const i=t.vS?{"Content-type":t.vS}:void 0;this.jS(new _e({hN:Ml.POST,Hu:t.Hu,wS:t.wS,RS:i,gN:gT.nN})).then((t=>{xe(t.gS())}),ul)}}gn(){}};r(),r();var Ua=function(t){return t[t.iI=1]="iI",t[t.eI=2]="eI",t[t.KM=3]="KM",t[t.sI=4]="sI",t[t.nI=9]="nI",t}({});function Vr(t){return 1===t.rI}function HT(t){return 3===t.rI}r();var XT=class extends ai{constructor(t){super("Invalid XML",t)}},qT=class{oI(t){const i=new DOMParser;let e;try{e=i.parseFromString(t,"text/xml")}catch(t){throw new XT(t)}if(!e||e.getElementsByTagName("parsererror").length>0)throw new XT;return new sS(e)}},KT=class t{get rI(){return Ua.eI}get hI(){var t;return null!=(t=this.aI.localName)?t:oS(this.aI.nodeName)}get l(){return this.aI.nodeName}get uI(){var t;return null!=(t=this.aI.namespaceURI)?t:void 0}get cI(){var t;return null!=(t=this.aI.prefix)?t:void 0}get lI(){return this.aI.nodeValue}dI(t){return this.aI.isEqualNode(t.aI)}fI(i){return new t(this.aI.cloneNode(i))}constructor(t){this.aI=t}},JT=class{get gI(){return void 0===this._I&&(this._I=function(t){const i=[];for(let e=0;e<t.length;e++){const s=rS(t.item(e));s&&i.push(s)}return i}(this.vI.childNodes)),this._I}get m(){return this.gI.filter(nS)}wI(t){return this.gI.filter((i=>nS(i)&&i.mI===t))}pI(t,i){return this.gI.filter((e=>nS(e)&&e.hI===i&&e.uI===t))}get AI(){return this.vI}yI(t){this.vI.appendChild(t.AI),this._I&&this._I.push(t)}dI(t){return this.vI.isEqualNode(t.AI)}constructor(t){this._I=void 0,this.vI=t}},$T=class t extends JT{get rI(){return Ua.iI}get hI(){var t;return null!=(t=this.vI.localName)?t:oS(this.vI.nodeName)}get uI(){var t;return null!=(t=this.vI.namespaceURI)?t:void 0}get cI(){var t;return null!=(t=this.vI.prefix)?t:void 0}get mI(){return this.vI.nodeName}get bI(){return function(t){const i=[];for(let e=0;e<t.length;e++)i.push(new KT(t.item(e)));return i}(this.vI.attributes)}get MI(){return this.vI.textContent}TI(t){if(this.vI.hasAttribute(t))return this.vI.getAttribute(t)}SI(t,i){if(this.vI.hasAttributeNS(t,i))return this.vI.getAttributeNS(t,i)}NI(t){this.vI.removeAttribute(t)}II(t,i){this.vI.removeAttributeNS(t,i)}DI(t,i){this.vI.setAttribute(t,i)}EI(t,i,e){this.vI.setAttributeNS(t,i,e)}fI(i){return new t(this.vI.cloneNode(i))}constructor(t){super(t)}},tS=class{get xS(){return this.vI.nodeValue}get AI(){return this.vI}dI(t){return this.xS===t.xS}constructor(t){this.vI=t}},iS=class t extends tS{get rI(){return Ua.KM}fI(i){return new t(this.vI.cloneNode(i))}constructor(t){super(t)}},eS=class t extends tS{get rI(){return Ua.sI}fI(i){return new t(this.vI.cloneNode(i))}constructor(t){super(t)}},sS=class t extends JT{get rI(){return Ua.nI}get kI(){return new $T(this.vI.documentElement)}fI(i){return new t(this.vI.cloneNode(i))}constructor(t){super(t)}};function nS(t){return Vr(t)}function rS(t){switch(t.nodeType){case Ua.iI:return new $T(t);case Ua.KM:return new iS(t);case Ua.sI:return new eS(t)}}function oS(t){const i=t.indexOf(":");return i<0?t:t.substr(i+1)}!function(t){me=t}(new class extends E_{get mw(){return this.LI||(this.LI=new vv(FA())),this.LI}get xI(){return this.CI}get jI(){return this.OI}get RI(){return this.zI}get BI(){return!1}get UI(){return VA.ZM()}get QI(){return{FI:ZA}}get YI(){return zl.connection&&zl.connection.effectiveType||HA}get VI(){return zl.connection&&zl.connection.type||"unknown"}get GI(){return this.WI||(this.WI=new vT(new ZT)),this.WI}oI(t){return this.ZI.oI(t)}constructor(...t){super(...t),this.LI=void 0,this.CI=OT(),this.OI=ui.O_||ui.Rg,this.zI=(ui.O_||ui.s_&&ui.Gg<=68||ui.Rg)&&!(ui.$g&&ui.i_<3),this.WI=void 0,this.ZI=new qT}}),r(),r(),r(),r(),r(),r();var hS=class extends G{},aS=class extends G{get ht(){return this.HI()}HI(){return this.XI.ht}qI(){return this.XI.qI()}get KI(){return this.JI()}JI(){return this.XI.KI}get $I(){return this.tD()}set $I(t){this.iD(t)}tD(){return this.XI.$I}iD(t){this.XI.$I=t}get bt(){return this.eD()}eD(){return this.XI.bt}get sD(){return this.nD()}set sD(t){this.rD(t)}nD(){return this.XI.sD}rD(t,i){this.XI.rD(t,i)}get ct(){return this._d()}_d(){return this.XI.ct}get ke(){return this.oD()}oD(){return this.XI.ke}get hD(){return this.aD()}aD(){return this.XI.hD}get lt(){return this.uD()}get cD(){return this.lD()}uD(){return this.XI.lt}lD(){return this.XI.cD}get dD(){return this.fD()}fD(){return this.XI.dD}get gD(){return this._D()}_D(){return this.XI.gD}get vD(){return this.wD()}wD(){return this.XI.vD}get mD(){return this.pD()}set mD(t){this.yD(t)}pD(){return this.XI.mD}yD(t){this.XI.mD=t}get bD(){return this.MD()}MD(){return this.XI.bD}get TD(){return this.SD()}SD(){return this.XI.TD}get ND(){return this.DD()}set ND(t){this.ED(t)}DD(){return this.XI.ND}ED(t){this.XI.ND=t}get kD(){return this.LD()}LD(){return this.XI.kD}get xD(){return this.CD()}set xD(t){this.jD(t)}CD(){return this.XI.xD}jD(t){this.XI.xD=t}get OD(){return this.RD()}RD(){return this.XI.OD}get PD(){return this.zD()}zD(){return this.XI.PD}get BD(){return this.UD()}UD(){return this.XI.BD}Ya(){return this.XI.Ya()}wa(t,i){return this.XI.wa(t,i)}get nt(){return this.QD()}QD(){return this.XI.nt}get FD(){return this.YD()}YD(){return this.XI.FD}get rt(){return this.VD()}VD(){return this.XI.rt}get GD(){return this.WD()}WD(){return this.XI.GD}get ZD(){return this.HD()}set ZD(t){this.XD(t)}get qD(){return this.KD()}KD(){return this.XI.qD}HD(){return this.XI.ZD}XD(t){this.XI.ZD=t}get JD(){return this.XI.JD}set JD(t){this.XI.JD=t}$D(){return this.XI.$D()}_a(){return this.XI._a()}tE(){return this.XI.tE()}ur(t){this.XI.ur(t)}ar(){this.XI.ar()}be(){this.XI.be()}iE(){this.XI.iE()}eE(){this.XI.eE()}sE(){this.XI.sE()}ge(){this.XI.ge()}nE(){return this.XI.nE()}rE(){return this.XI.rE()}oE(){this.XI.oE()}hE(){this.XI.hE()}tr(){return this.XI.tr()}aE(){this.XI.aE()}uE(){this.XI.uE()}cE(t){return this.XI.cE(t)}lE(t){return!1}async gn(){this.Bo(),await this.XI.gn()}dE(t){return this.XI.dE(t)}constructor(t){super(),this.fE=t=>{this.lE(t)||this.yo(t)},this.XI=t,t.Rm(this.fE)}};r(),r(),r();var di=function(t){return t.gE="_E",t.vE="wE",t}({});r(),r(),r(),r();var ps=class extends Gs{get ga(){return this.Za||(this.Za=this.ma()),this.Za}constructor(t,i){super(t,i),this.Za=void 0}};function uS(t){return Boolean(t&&t.ga)}var Ii=class extends ps{constructor(t){super(t)}},Vn=class extends Gs{constructor(t){super(t)}},cS=class extends Ii{ma(){return new lS(this.Lt.ga)}constructor(t){super(di.gE),this.Lt=t}},lS=class extends Vn{constructor(t){super("addtrack"),this.track=t}};r();var dS=class extends Ii{ma(){return new fS(this.Lt.ga)}constructor(t){super(di.vE),this.Lt=t}},fS=class extends Vn{constructor(t){super("removetrack"),this.track=t}};r();var Ct=function(t){return t.mE="pE",t.AE="yE",t.bE="TE",t.SE="NE",t.DE="EE",t.kE="LE",t.aa="xE",t.CE="jE",t.OE="RE",t.PE="Yn",t.zE="BE",t.UE="QE",t.QUALITY_UNAVAILABLE="qualityunavailable",t.NO_QUALITY="noquality",t}({}),gS=class extends Bo{get FE(){return this.YE}get ga(){return this.Za||(this.Za=this.ma()),this.Za}get U(){return this.YE.length}VE(t){return this.YE[t]}tt(t){return!(!t||fh(this.YE,t))&&(this.YE.push(t),this.Za&&this.Za.push(t.ga),t.yn(Ct.aa,this.Ds),this.yo(new cS(t)),!0)}it(t){if(!t)return!1;const i=this.YE.indexOf(t);return!(i<0)&&(zr(this.YE,i),this.Za&&zr(this.Za,i),t.fn(Ct.aa,this.Ds),this.yo(new dS(t)),!0)}GE(t){return fh(this.YE,t)}tr(){const t=this.YE;for(let i=t.length-1;i>=0;i-=1)this.it(t[i])}gn(){this.tr(),this.Bo()}constructor(){super(),this.YE=[],this.Za=void 0}};r();var dc=class extends Ii{ma(){return new _S(this.Lt.ga)}constructor(t){super(Ct.aa),this.Lt=t}},_S=class extends Vn{constructor(t){super("change"),this.track=t}},vS=class extends gS{get WE(){return this.ZE}set WE(t){const i=this.ZE;if(t!==i){if(i){this.HE(i);for(const e of i.FE)t&&t.GE(e)||this.it(e)}if(this.ZE=t,t){const i=[];for(const e of t.FE)this.tt(e),this.XE(e)&&i.push(e);this.qE(t);for(const t of i)t.yo(new dc(t))}}}qE(t){t.yn(di.gE,this.KE),t.yn(di.vE,this.JE)}HE(t){t.fn(di.gE,this.KE),t.fn(di.vE,this.JE)}gn(t){!t&&this.ZE&&this.ZE.gn(),super.gn()}constructor(){super(),this.ZE=void 0,this.KE=t=>{const i=t.Lt;this.tt(i)},this.JE=t=>{const i=t.Lt;this.it(i)}}};r(),r(),r();var wS=_.freeze||_c;function mS(t,i,e){_.defineProperty(t,i,{writable:!1,enumerable:!0,value:e})}function pS(t){return wS(t)}function Gr(t,i){for(const e of _.getOwnPropertyNames(i))_.defineProperty(t,e,_.getOwnPropertyDescriptor(i,e));return t}function Wa(t){if(Ec(t)){const i={};for(const e in t)Ho.call(t,e)&&(i[e]=Wa(t[e]));return i}if(Kc(t)){const i=new Array(t.length);for(let e=0;e<i.length;e++)e in t&&(i[e]=Wa(t[e]));return i}return t}function V(t,i){return t===i||!(!t||!i)&&(!(!jl(t)||!jl(i))&&(ou(t)?!!ou(i)&&function(t,i){const e=t.length,s=i.length;if(e!==s)return!1;for(let s=0;s<e;s+=1)if(!V(t[s],i[s]))return!1;return!0}(t,i):!ou(i)&&function(t,i){const e=_.keys(t),s=_.keys(i);if(!e||!s||e.length!==s.length)return!1;for(const s of e)if(!Ho.call(i,s)||!V(t[s],i[s]))return!1;return!0}(t,i)))}function AS(t,i){if(!jl(t))return!1;for(const e of i)if(!(e in t))return!1;return!0}function yS(t,i){return t.constructor===i.constructor}function bS(t){const i={};for(const e of _.keys(t)){const s=t[e];null!=s&&(i[e]=s)}return i}function MS(t){const i={};for(const e of _.keys(t)){const s=t[e];if(ou(s)){const t=[];for(let i=0;i<s.length;i+=1){const e=s[i];if(null!=e){const i=jl(e)?MS(e):e;t.push(i)}}i[e]=t}else null!=s&&(i[e]=jl(s)?MS(s):s)}return i}function dn(t){let i=t;if("string"==typeof i){if(i=i.toLowerCase(),"true"===i)return!0;if("false"===i)return!1}return Boolean(i)}function At(t){return Rt(t)?dn(t):void 0}function yn(t){return"string"==typeof t?""===t?NaN:Number(t):"boolean"==typeof t||null==t||t instanceof Date||"number"!=typeof Number(t)&&!t?NaN:Number(t)}function TS(t){const i=yn(t);if(j(i))throw new g("Expected a valid number.");return i}function To(t){return"string"==typeof t?t:""}function SS(t,i){if(!ou(t))return[];const e=0|t.length,s=new Array(e);for(let n=0;n<e;n++)s[n]=i(t[n]);return s}function yu(t,i){let e;return e=ou(t)?SS(t,i):i(t),e}r();var NS=[di.gE,di.vE,Ct.aa];function IS(t){let i;const e=t.FE.map((t=>t.ga));return e.item=i=>{const e=0|i,s=t.VE(e);return s&&s.ga||void 0},e.addEventListener=(t,e)=>{i.yn(t,e)},e.removeEventListener=(t,e)=>{i.fn(t,e)},i=new Yv(e),t.yn(NS,(t=>i.yo(t.ga))),e}r();var ut=function(t){return t[t.$E=0]="$E",t[t.ek=1]="ek",t[t.nk=2]="nk",t[t.rk=3]="rk",t[t.hk=4]="hk",t[t.TRANSCRIBES_SPOKEN_DIALOG=5]="TRANSCRIBES_SPOKEN_DIALOG",t[t.DESCRIBES_MUSIC_AND_SOUND=6]="DESCRIBES_MUSIC_AND_SOUND",t[t.ck=7]="ck",t}({});function DS(t){switch(t){case 0:return"caption";case 2:return"sign";case 1:return"description";case 3:return"enhanced audio intelligibility";case 4:return"easy reader";case 5:return"transcribes spoken dialog";case 6:return"describes music and sound";case 7:return"describes video"}}function ES(){}function Zt(t){const i=[Ct.PE,Ct.aa,Ct.zE,Ct.UE,Ct.QUALITY_UNAVAILABLE];let e;const s={get activeQuality(){return t.lk&&t.lk.ga},get enabled(){return t.Rt},set enabled(i){t.Rt=dn(i)},get id(){return t.o},get uid(){return t.dk},get kind(){return t.zt},get label(){return t.wh},set label(i){t.wh=To(i)},get accessibility(){var i,e;return null!=(e=null==(i=t.fk)?void 0:i.map(DS))?e:[]},get language(){return t.gs},get qualities(){return t.gk.ga},set targetQuality(i){let e;e=i?function(t,i){const e=[];for(const s of t.gk.FE)for(const t of i)s.ga===t&&e.push(s);return e}(t,Kc(i)?i:[i]):[],e.length>0?t._k=e:t._k=void 0},get targetQuality(){if(t._k)return 1===t._k.length?t._k[0].ga:t._k.map((t=>t.ga))},addEventListener(t,i){const s=yu(t,To);e.yn(s,i)},removeEventListener(t,i){const s=yu(t,To);e.fn(s,i)}};return e=new Yv(s),t.yn(i,(t=>e.yo(t.ga))),_.defineProperty(s,"constructor",{value:ES}),s}function kS(){}function LS(t){const i=IS(t);return _.defineProperty(i,"constructor",{value:kS}),i}var Dh=class extends vS{ma(){return LS(this)}XE(t){return t.Rt}};r(),r(),r();var P=function(t){return t.Ch="disabled",t.vk="hidden",t.Jn="showing",t}({});function Ha(t){if("string"==typeof t){const i=t.toLowerCase();switch(i){case"disabled":case"hidden":case"showing":return i}}else if("number"==typeof t)switch(t){case 0:return"disabled";case 1:return"hidden";case 2:return"showing"}return"disabled"}r();var ac=function(t){return t.ua="error",t}({});function xS(){}function Jr(t){const i=[Ct.aa,Ct.PE,Ct.mE,Ct.AE,Ct.SE,Ct.DE,Ct.bE,Ct.kE,Ct.CE,Ct.OE],e=[ac.ua];let s;const n={get kind(){return t.zt},get label(){return t.wh},set label(i){t.wh=To(i)},get language(){return t.gs},get id(){return t.o},get uid(){return t.dk},get inBandMetadataTrackDispatchType(){return t.wk},get mode(){return t.gN},set mode(i){i!==P.Jn&&i!==P.vk&&i!==P.Ch||t.pk(i)},get forced(){return Boolean(t.Ak)},get accessibility(){var i,e;return null!=(e=null==(i=t.fk)?void 0:i.map(DS))?e:[]},get type(){return t.Hw},get readyState(){return t.OD},get cues(){return t.gN===P.Ch?null:t.L.ga},get activeCues(){return t.gN===P.Ch?null:t.q.ga},get src(){return t.yk||""},addEventListener(t,i){const e=yu(t,To);s.yn(e,i)},removeEventListener(t,i){const e=yu(t,To);s.fn(e,i)}};return s=new Yv(t),t.yn(i,(t=>s.yo(t.ga))),t.yn(e,(t=>s.yo(t))),_.defineProperty(n,"constructor",{value:xS}),n}function CS(){}function jS(t){const i=IS(t);return _.defineProperty(i,"constructor",{value:CS}),i}var ci=class extends vS{ma(){return jS(this)}XE(t){return t.gN===P.Jn}};r(),r();var OS=class extends Bo{get bk(){}get Mk(){return!1}get Tk(){}get ga(){var t;return null!=(t=this.Za)?t:this.Za=RS(this)}Sk(){}};function RS(t){return{goLive:()=>t.Sk(),get isLive(){return t.Mk},get latencies(){return t.bk},get manifest(){return t.Tk},addEventListener(i,e){t.yn(zS(i),e)},removeEventListener(i,e){t.fn(zS(i),e)}}}var PS=["golive","latencyrecoveryseek"];function zS(t){const i=yu(t,To);return(cs(i)?[i]:i).filter((t=>fh(PS,t)))}var ah=class extends Bo{set WE(t){const i=this.ZE;t!==i&&(i&&this.HE(i),t&&this.qE(t),this.ZE=t)}get WE(){return this.ZE}get ga(){return this.Za||(this.Za=RS(this)),this.Za}qE(t){t.yn(PS,this.Ds)}HE(t){t.fn(PS,this.Ds)}Sk(){var t;null==(t=this.ZE)||t.Sk()}get bk(){var t;return null==(t=this.ZE)?void 0:t.bk}get Mk(){return!!this.ZE&&this.ZE.Mk}get Tk(){var t;return null==(t=this.ZE)?void 0:t.Tk}gn(){this.Bo(),this.ZE&&this.HE(this.ZE),this.ZE=void 0}constructor(){super(),this.ZE=void 0,this.Za=void 0,this.ZE=void 0}};r(),r();var BS="8E80B9CE",US=function(t){return t.AUTO="auto",t.MANUAL="manual",t.DISABLED="disabled",t}({});function QS(t){return{appID:t&&t.appID?To(t.appID):BS}}r(),r();var Sn=function(t){return t.nN="",t.Nk="anonymous",t.Ik="use-credentials",t}({}),vt=function(t){return t.Dk="application/dash+xml",t.Ek="application/vnd.apple.mpegurl",t.Lk="application/x-mpegurl",t.xk="video/mp4",t.Ck="application/vnd.theoplayer.hesp+json",t.jk="application/vnd.theo.hesp+json",t.Ok="millicast",t.Rk="theolive",t}({});function FS(t){if(null!==t)return t}function YS(t){const i={apiKey:t.apiKey,integration:t.integration,streamActivityMonitorID:FS(t.streamActivityMonitorID),adTagParameters:jl(t.adTagParameters)?t.adTagParameters:{},authToken:FS(t.authToken),omidAccessModeRules:FS(t.omidAccessModeRules)};if("vod"===(null==t?void 0:t.availabilityType)||function(t){const i=t;return Boolean(i.videoID&&i.contentSourceID)}(t)){const e=t.videoID,s=t.contentSourceID;return e?s?il({},i,{availabilityType:"vod",videoID:e,contentSourceID:s}):void me.lw("A VOD DAI configuration was provided without valid contentSourceID which is required."):void me.lw("A VOD DAI configuration was provided without valid videoID which is required.")}if("live"===(null==t?void 0:t.availabilityType)||function(t){const i=t;return Boolean(i.assetKey)}(t)){const e=t.assetKey;return e?il({},i,{availabilityType:"live",assetKey:e}):void me.lw("A Live DAI configuration was provided without valid assetKey which is required.")}me.lw("A DAI configuration was provided without a valid availabilityType which is required.")}function VS(t){switch(t.integration){case"google-dai":return YS(t);case"imagine":return function(t){return{integration:t.integration}}(t);default:return il({},t,{integration:String(t.integration)})}}r(),r(),r(),r(),r(),r(),r();var Bu,Wn="titanium",GS="conax",WS="ezdrm",ZS="irdeto",HS="vudrm",XS="verimatrix",zn="keyos",qS="drmtoday",KS="expressplay",JS="azure",$S="xstream",tN="vimond",iN="axinom",eN="uplynk",sN="comcast",nN="custom";function rN(t,i){if(null==t)return{};var e,s,n={},r=_.keys(t);for(s=0;s<r.length;s++)e=r[s],i.indexOf(e)>=0||(n[e]=t[e]);return n}function oN(t){return Rt(t.token&&t.deviceId)}function hN(t){var i;const e=null==(i=t.fairplay)?void 0:i.headers;return void 0!==e&&Rt(e.PreAuthorization)}function aN(t){const i=t;return oN(i)&&""!==i.token&&""!==i.deviceId&&!hN(i)}r(),r(),r(),r(),r(),function(t){t.Pk=!1,t.zk=!1,t.Bk=!1,t.Uk=!1,t.LOG_ADS_DETAILS=!1,t.LOG_CHROMECAST_DETAILS=!1,t.LOG_CUSTOM_DRM=!1,t.LOG_BUFFERING_VIDEO_MAIN=!1,t.LOG_BUFFERING_VIDEO_SELECTION=!1,t.LOG_BUFFERING_AUDIO_MAIN=!1,t.LOG_BUFFERING_AUDIO_SELECTION=!1,t.Qk=!1,t.Fk=!1,t.LOG_LCEVC_DETAILS=!1}(Bu||(Bu={})),r();var ti=class extends Ui{get name(){return"ContentProtectionError"}constructor(t,i,e,s,n,r,o,h){super(t,i,e),this.url=s,this.status=n,this.statusText=r,this.response=o,this.systemCode=h}};r();var uN=class{get Yk(){return this.Vk}get Gb(){return this.Bb}Gk(t){return function(t){const i=t.onCertificateRequest;if(void 0!==i&&"function"!=typeof i)throw new w("ContentProtectionIntegration.onCertificateRequest is not a function.");const e=t.onCertificateResponse;if(void 0!==e&&"function"!=typeof e)throw new w("ContentProtectionIntegration.onCertificateResponse is not a function.");const s=t.onLicenseRequest;if(void 0!==s&&"function"!=typeof s)throw new w("ContentProtectionIntegration.onLicenseRequest is not a function.");const n=t.onLicenseResponse;if(void 0!==n&&"function"!=typeof n)throw new w("ContentProtectionIntegration.onLicenseResponse is not a function.");const r=t.extractFairplayContentId;if(void 0!==r&&"function"!=typeof r)throw new w("ContentProtectionIntegration.extractFairplayContentId is not a function.");return t}(this.Wk.build(t))}constructor(t,i,e){this.Vk=t,this.Bb=i,this.Wk=e}};r();var cN=function(t){return t.FAILED="FAILED",t.OVERRIDDEN="OVERRIDDEN",t.SUCCEEDED="SUCCEEDED",t}({}),qc=class{registerContentProtectionIntegration(t,i,e){switch(this.Zk(t,i,e)){case cN.FAILED:throw new ti(Do.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The keySystem should be 'widevine', 'playready' or 'fairplay', but was "+i+".");case cN.OVERRIDDEN:{const e=CN(i);me.lw("Warning: Overwriting an earlier registered integration for "+t+" and "+e+".");break}case cN.SUCCEEDED:CN(i);0;break}}Zk(t,i,e){const s=CN(i);if(!s)return cN.FAILED;let n=cN.SUCCEEDED;for(const i of this.Hk.slice())i.Yk===t&&i.Gb===s&&(n=cN.OVERRIDDEN,Ro(this.Hk,i));return this.Hk.push(new uN(t,s,e)),n}Xk(t,i){return void 0!==this.qk(t,i)}Kk(t,i,e){const s=this.qk(t,i);if(!s)throw g("No ContentProtectionIntegrationInit was found for integration id "+t+" and key system "+i);return s.Gk(e)}qk(t,i){for(const e of this.Hk)if(e.Yk===t&&(!i||e.Gb===i))return e}constructor(){this.Hk=[]}};qc.Jk=new qc,r(),r();var Fo=function(t){return t.$k="moov",t.tL="mvhd",t.iL="trak",t.eL="tkhd",t.sL="mdia",t.nL="mdhd",t.rL="hdlr",t.oL="minf",t.hL="stbl",t.aL="stsd",t.uL="stsc",t.cL="mvex",t.lL="trex",t.dL="avc1",t.fL="avcC",t.gL="hev1",t._L="hvc1",t.vL="hvcC",t.wL="vp09",t.mL="vpcC",t.pL="av01",t.AL="av1C",t.yL="dvcC",t.bL="dvvC",t.ML="dvwC",t.TL="dec3",t.SL="dvav",t.NL="dva1",t.IL="dvhe",t.DL="dvh1",t.EL="ec-3",t.kL="colr",t.LL="pasp",t.xL="mp4a",t.CL="esds",t.jL="fLaC",t.OL="dfLa",t.RL="wvtt",t.PL="vttC",t.zL="vlab",t.BL="enca",t.UL="encv",t.QL="moof",t.FL="mfhd",t.YL="traf",t.VL="tfhd",t.GL="trun",t.WL="tfdt",t.ZL="senc",t.HL="mdat",t.XL="pssh",t.qL="emsg",t.KL="sidx",t.JL="styp",t.$L="ftyp",t.tx="sinf",t.ix="frma",t}({}),lN=function(t){return t.ON_SCREEN_COLOURS="nclx",t.RESTRICTED_ICC_PROFILE="rICC",t.UNRESTRICED_ICC_PROFILE="prof",t}({}),dN=function(t){return t[t.BASE_DATA_OFFSET_PRESENT=1]="BASE_DATA_OFFSET_PRESENT",t[t.SAMPLE_DESCRIPTION_INDEX_PRESENT=2]="SAMPLE_DESCRIPTION_INDEX_PRESENT",t[t.DEFAULT_SAMPLE_DURATION_PRESENT=8]="DEFAULT_SAMPLE_DURATION_PRESENT",t[t.DEFAULT_SAMPLE_SIZE_PRESENT=16]="DEFAULT_SAMPLE_SIZE_PRESENT",t[t.DEFAULT_SAMPLE_FLAGS_PRESENT=32]="DEFAULT_SAMPLE_FLAGS_PRESENT",t[t.DURATION_IS_EMPTY=65536]="DURATION_IS_EMPTY",t[t.DEFAULT_BASE_IS_MOOF=131072]="DEFAULT_BASE_IS_MOOF",t}({}),fN=function(t){return t[t.DATA_OFFSET_PRESENT=1]="DATA_OFFSET_PRESENT",t[t.FIRST_SAMPLE_FLAGS_PRESENT=4]="FIRST_SAMPLE_FLAGS_PRESENT",t[t.SAMPLE_DURATION_PRESENT=256]="SAMPLE_DURATION_PRESENT",t[t.SAMPLE_SIZE_PRESENT=512]="SAMPLE_SIZE_PRESENT",t[t.SAMPLE_FLAGS_PRESENT=1024]="SAMPLE_FLAGS_PRESENT",t[t.SAMPLE_COMPOSITION_TIME_OFFSET_PRESENT=2048]="SAMPLE_COMPOSITION_TIME_OFFSET_PRESENT",t}({});r();var Hu=class t{sx(){return ha(this.xS,this.nx)}ox(){return Tt(this.xS,this.nx)}hx(){return function(t,i,e){void 0===e&&(e=!1);const s=t.getInt16(i.tc,e);return i.Vp(2),s}(this.xS,this.nx)}ux(){return Se(this.xS,this.nx)}lx(){return function(t,i,e){void 0===e&&(e=!1);const s=t.getInt32(i.tc,e);return i.Vp(4),s}(this.xS,this.nx)}gx(){return Ze(this.xS,this.nx)}_x(t){return wi(this.xS,this.nx,t)}vx(t){return function(t,i,e){const s=[];for(let n=0;n<e;n++)s.push(Se(t,i));return s}(this.xS,this.nx,t)}wx(t){return wu(this.xS,this.nx,t)}mx(){return da(this.xS,this.nx)}Ax(t){this.nx.Vp(t)}Wp(){return new t(this.xS,this.nx.Wp())}constructor(t,i){this.xS=t,this.nx=i}};r(),r();function gN(t,i){return t.Hw===i}function dr(t,i){for(const e of t)if(gN(e,i))return e}var _N=class extends ai{get name(){return"DataIncompleteError"}constructor(t,i){super(),this.yx=t,this.bx=i}},Lu=class t{static Mx(i){const e=i.xS,s=i.nx,n=t.Tx(e,s,!1);if(!n.Sx)throw new _N(s.tc,n.m);return n.m}static Tx(i,e,s){const n=[];for(;e.tc<i.byteLength;){const r=t.Nx(i,e,s);if(!r.Sx)return{Sx:!1,m:n};n.push(r.Ix)}return{Sx:!0,m:n}}static Dx(i,e){const s=t.Nx(i,e,!1);if(!s.Sx)throw new _N(e.tc);return s.Ix}static Ex(i,e){const s=i.xS,n=i.nx;for(;n.tc<s.byteLength;){const i=t.Nx(s,n,!1);if(!i.Sx)return;if(i.Ix.Hw===e)return i.Ix}}static Nx(i,e,s){const n=e.tc,r=t.kx(i,e);if(!r.Sx)return r;const o=r.Lx;let h=o.qp;if(0===h){if(s)return e.Gp(n),{Sx:!1,xx:1/0};h=i.byteLength-n}const a=n+h;if(a>i.byteLength){const t=a;return e.Gp(n),{Sx:!1,xx:t}}const u={Hw:o.Hw,tc:n,xS:new Hu(Ma(i,n,a),new J(o.Cx))};return e.Gp(a),{Sx:!0,Ix:u}}static kx(t,i){const e=i.tc;if(!_w(t,i,8)){return{Sx:!1,xx:i.tc+8}}let s=Se(t,i),n=wu(t,i,4);if(1===s){if(!_w(t,i,8)){const t=i.tc+8;return i.Gp(e),{Sx:!1,xx:t}}s=Ze(t,i).toNumber()}if("uuid"===n){if(!_w(t,i,16)){const t=i.tc+16;return i.Gp(e),{Sx:!1,xx:t}}n=wu(t,i,16)}return{Sx:!0,Lx:{Hw:n,qp:s,Cx:i.tc-e}}}static jx(t,i,e){const s=t.xS,n=t.nx;let r=Bt(se(s),n.tc,s.byteLength);return e&&(r=cu(r)),n.Vp(r.byteLength),{Hw:i,xS:r}}static Ox(i,e,s){const n=i.ux(),{version:r,flags:o}=Yc(n);return{Hw:e,Rx:r,Px:o,xS:t.jx(i,e,s).xS}}};function $a(t,i){const e=Yt(t,i);if(!e)throw new g("Missing "+i+" atom");return e}function Yt(t,i){for(const e of t)if(e.Hw===i)return e.xS}function vN(t,i){const e=[];for(const s of t)s.Hw===i&&e.push(s.xS);return e}function Yc(t){return{version:t>>24,flags:new lw(16777215&t)}}var tn=class t{static zx(i){const e=[],s=Lu.Mx(new Hu(i,new J));for(const i of s){const s=t.Bx(i);s&&e.push(s)}return e}static Ux(t){return Lu.Tx(t,new J,!1).m.some(this.Qx)}static Fx(i){return vN(Lu.Mx(new Hu(i,new J)),Fo.XL).map(t.Yx)}static Vx(i){return vN(Lu.Mx(i.xS),Fo.XL).map(t.Yx)}static Qx(t){return t.Hw===Fo.$L||t.Hw===Fo.JL||t.Hw===Fo.$k||t.Hw===Fo.QL||t.Hw===Fo.HL||t.Hw===Fo.KL||t.Hw===Fo.qL}static Bx(i){switch(i.Hw){case Fo.$k:return t.Gx(i.xS);case Fo.QL:return t.Wx(i.xS,i.tc);case Fo.HL:return t.Zx(i.xS);case Fo.KL:return t.Hx(i.xS);case Fo.qL:return t.Xx(i.xS)}}static Gx(i){const e=Lu.Mx(i),s=$a(e,Fo.tL),n=vN(e,Fo.iL),r=Yt(e,Fo.cL),o=t.qx(s),h=n.map(t.Kx),a=r?t.Jx(r):void 0;return{Hw:Fo.$k,Lx:o,Z:h,$x:a}}static qx(t){const i=t.ux(),{version:e,flags:s}=Yc(i),n=1===e?t.gx():t.ux(),r=1===e?t.gx():t.ux(),o=t.ux(),h=1===e?t.gx():t.ux(),a=t.ux(),u=t.ox()>>8;t.Ax(2),t.Ax(8);const c=t.vx(9);t.Ax(24);const l=t.ux();return{Hw:Fo.tL,Rx:e,Px:s,tC:n,iC:r,eC:o,ct:h,sC:a,ZD:u,nC:c,rC:l}}static Kx(i){const e=Lu.Mx(i),s=$a(e,Fo.eL),n=$a(e,Fo.sL),r=t.oC(s),o=t.hC(n);return{Hw:Fo.iL,Lx:r,aC:o}}static oC(t){const i=t.ux(),{version:e,flags:s}=Yc(i),n=1===e?t.gx():t.ux(),r=1===e?t.gx():t.ux(),o=t.ux();t.Ax(4);const h=1===e?t.gx():t.ux();t.Ax(8);const a=t.hx(),u=t.hx(),c=t.hx()/256;t.Ax(2);const l=t.vx(9),d=t.ux()/65536,f=t.ux()/65536;return{Hw:Fo.eL,uC:s.Zp(1),cC:s.Zp(2),lC:s.Zp(4),tC:n,iC:r,dC:o,ct:h,fC:a,gC:u,ZD:c,nC:l,ji:d,Ti:f}}static hC(i){const e=Lu.Mx(i),s=$a(e,Fo.nL),n=$a(e,Fo.rL),r=$a(e,Fo.oL),o=t._C(s),h=t.vC(n),a=t.wC(r);return{Hw:Fo.sL,Lx:o,mC:h,pC:a}}static _C(t){const i=t.ux(),{version:e,flags:s}=Yc(i),n=1===e?t.gx():t.ux(),r=1===e?t.gx():t.ux(),o=t.ux(),h=1===e?t.gx():t.ux();t.ox();return t.Ax(2),{Hw:Fo.nL,Rx:e,Px:s,tC:n,iC:r,eC:o,ct:h}}static vC(t){const i=t.ux(),{version:e,flags:s}=Yc(i);t.Ax(4);const n=t.wx(4);t.Ax(12);const r=t.mx();return{Hw:Fo.rL,Rx:e,Px:s,AC:n,l:r}}static wC(i){const e=$a(Lu.Mx(i),Fo.hL),s=t.yC(e);return{Hw:Fo.oL,bC:s}}static yC(i){const e=$a(Lu.Mx(i),Fo.aL),s=t.MC(e);return{Hw:Fo.hL,TC:s}}static MC(i){const e=i.ux(),{version:s,flags:n}=Yc(e),r=(i.ux(),[]),o=Lu.Mx(i);for(const i of o){const e=t.SC(i.xS,i.Hw);e&&r.push(e)}return{Hw:Fo.aL,Rx:s,Px:n,NC:r}}static SC(i,e){let s=t.IC(i,e);return s||(s=t.DC(i,e),s||(e===Fo.RL?t.EC(i):void 0))}static IC(i,e){return e===Fo.xL?t.kC(i):e===Fo.jL||e===Fo.jL.toLowerCase()||e===Fo.jL.toUpperCase()?t.LC(i):e===Fo.BL?t.xC(i):e===Fo.EL?t.jC(i):void 0}static DC(i,e){return e===Fo.dL?t.OC(i):e===Fo.gL||e===Fo._L?t.RC(i,e):e===Fo.wL?t.zC(i,e):e===Fo.pL?t.BC(i,e):e===Fo.UL?t.QC(i):e===Fo.SL||e===Fo.NL||e===Fo.IL||e===Fo.DL?t.FC(i,e):void 0}static YC(t,i){t.Ax(6);return{Hw:i,VC:t.ox()}}static GC(i,e){const s=t.YC(i,e);i.Ax(8);const n=i.ox(),r=i.ox();i.Ax(2),i.Ax(2);return il({},s,{WC:n,ZC:r,HC:i.ux()>>>16})}static XC(i,e){const s=t.YC(i,e);i.Ax(2),i.Ax(2),i.Ax(12);const n=i.ox(),r=i.ox(),o=i.ux(),h=i.ux();i.Ax(4);const a=i.ox();i.Ax(32);const u=i.ox();return i.Ax(2),il({},s,{ji:n,Ti:r,qC:o,KC:h,JC:a,$C:u})}static kC(i){const e=t.GC(i,Fo.xL),s=$a(Lu.Mx(i),Fo.CL);return il({},e,{tj:t.ij(s)})}static LC(i){const e=t.GC(i,Fo.jL),s=$a(Lu.Mx(i),Fo.OL);return il({},e,{ej:t.sj(s)})}static EC(i){const e=t.YC(i,Fo.RL),s=Lu.Mx(i),n=$a(s,Fo.PL),r=t.nj(n),o=Yt(s,Fo.zL);return il({},e,{rj:r,hj:o?t.aj(o):void 0})}static nj(t){return{Hw:Fo.PL,md:t.mx()}}static aj(t){return{Hw:Fo.zL,wh:t.mx()}}static ij(t){return Lu.Ox(t,Fo.CL,!0)}static sj(t){return Lu.Ox(t,Fo.OL,!0)}static OC(i){const e=t.XC(i,Fo.dL),s=Lu.Mx(i),n=$a(s,Fo.fL),r=Yt(s,Fo.LL);return il({},e,{uj:t.cj(n),lj:r?t.dj(r):void 0})}static RC(i,e){const s=t.XC(i,e),n=$a(Lu.Mx(i),Fo.vL);return il({},s,{gj:t._j(n)})}static zC(i,e){const s=t.XC(i,e),n=$a(Lu.Mx(i),Fo.mL);return il({},s,{vj:t.wj(n)})}static BC(i,e){const s=t.XC(i,e),n=Lu.Mx(i),r=$a(n,Fo.AL),o=t.mj(r),h=Yt(n,Fo.kL);return il({},s,{pj:o,Aj:h?t.yj(h):void 0})}static QC(i){const e=i.Wp(),s=t.XC(i,Fo.UL),n=$a(Lu.Mx(i),Fo.tx),r=t.bj(n);return il({},s,{Mj:t.DC(e,r.Sj.Tj),Nj:r})}static FC(i,e){const s=t.XC(i,e),n=Lu.Mx(i);return il({},s,{Ij:t.Dj(n)})}static jC(i){const e=t.GC(i,Fo.EL),s=$a(Lu.Mx(i),Fo.TL);return il({},e,{Ej:t.Lj(s)})}static xC(i){const e=i.Wp(),s=t.GC(i,Fo.BL),n=$a(Lu.Mx(i),Fo.tx),r=t.bj(n);return il({},s,{Mj:t.IC(e,r.Sj.Tj),Nj:r})}static bj(i){const e=$a(Lu.Mx(i),Fo.ix),s=t.xj(e);return{Hw:Fo.tx,Sj:s}}static xj(t){const i=t.wx(4);return{Hw:Fo.ix,Tj:i}}static cj(t){return Lu.jx(t,Fo.fL,!0)}static _j(t){return Lu.jx(t,Fo.vL,!0)}static Dj(t){const i=Yt(t,Fo.yL);if(void 0!==i)return Lu.jx(i,Fo.yL,!0);const e=Yt(t,Fo.bL);if(void 0!==e)return Lu.jx(e,Fo.bL,!0);const s=Yt(t,Fo.ML);if(void 0!==s)return Lu.jx(s,Fo.ML,!0);throw g("Error parsing Dolby Vision configuration box.")}static Lj(t){return Lu.jx(t,Fo.TL,!0)}static wj(t){return Lu.jx(t,Fo.mL,!0)}static mj(t){return Lu.jx(t,Fo.AL,!0)}static yj(t){const i=t.wx(4);switch(i){case"nclx":return{Cj:lN.ON_SCREEN_COLOURS,jj:t.ox(),Oj:t.ox(),Rj:t.ox(),Pj:0!=(128&t.sx())};case"rICC":return{Cj:lN.RESTRICTED_ICC_PROFILE};case"prof":return{Cj:lN.UNRESTRICED_ICC_PROFILE};default:throw g("Could not parse ColourInformationBox: unknown type '"+i+"'.")}}static dj(t){const i=t.ux(),e=t.ux();return{Hw:Fo.LL,zj:i,Bj:e}}static Jx(i){const e=vN(Lu.Mx(i),Fo.lL).map(t.Uj);return{Hw:Fo.cL,Z:e}}static Uj(t){const i=t.ux(),{version:e,flags:s}=Yc(i),n=t.ux(),r=t.ux(),o=t.ux(),h=t.ux(),a=t.ux();return{Hw:Fo.lL,Rx:e,Px:s,dC:n,Qj:r,Fj:o,Yj:h,Vj:a}}static Wx(i,e){const s=Lu.Mx(i),n=$a(s,Fo.FL),r=vN(s,Fo.YL),o=t.Gj(n),h=r.map(t.Wj);return{Hw:Fo.QL,Zj:e,Lx:o,Z:h}}static Gj(t){const i=t.ux(),{version:e,flags:s}=Yc(i),n=t.ux();return{Hw:Fo.FL,Rx:e,Px:s,Hj:n}}static Wj(i){const e=Lu.Mx(i),s=$a(e,Fo.VL),n=vN(e,Fo.GL),r=Yt(e,Fo.WL),o=t.Xj(s),h=n.map((i=>t.qj(i,o))),a=r?t.Kj(r):void 0;return{Hw:Fo.YL,Lx:o,Jj:h,$j:a}}static Xj(t){const i=t.ux(),{version:e,flags:s}=Yc(i),n=t.ux(),r=s.Zp(dN.BASE_DATA_OFFSET_PRESENT)?t.gx():void 0,o=s.Zp(dN.SAMPLE_DESCRIPTION_INDEX_PRESENT)?t.ux():void 0,h=s.Zp(dN.DEFAULT_SAMPLE_DURATION_PRESENT)?t.ux():void 0,a=s.Zp(dN.DEFAULT_SAMPLE_SIZE_PRESENT)?t.ux():void 0,u=s.Zp(dN.DEFAULT_SAMPLE_FLAGS_PRESENT)?t.ux():void 0;return{Hw:Fo.VL,Rx:e,Px:s,dC:n,tO:r,iO:o,Fj:h,Yj:a,Vj:u}}static qj(i,e){const s=i.ux(),{version:n,flags:r}=Yc(s),o=i.ux(),h=r.Zp(fN.DATA_OFFSET_PRESENT)?i.lx():void 0,a=r.Zp(fN.FIRST_SAMPLE_FLAGS_PRESENT)?i.ux():void 0,u=[];for(let s=0;s<o;s++){const o=t.eO(i,r,n,e);0===s&&void 0!==a&&(o.Px=a),u.push(o)}return{Hw:Fo.GL,Rx:n,Px:r,sO:o,Zj:h,nO:a,rO:u}}static eO(t,i,e,s){return{ct:i.Zp(fN.SAMPLE_DURATION_PRESENT)?t.ux():s.Fj,qp:i.Zp(fN.SAMPLE_SIZE_PRESENT)?t.ux():s.Yj,Px:i.Zp(fN.SAMPLE_FLAGS_PRESENT)?t.ux():s.Vj,oO:i.Zp(fN.SAMPLE_COMPOSITION_TIME_OFFSET_PRESENT)?0===e?t.ux():t.lx():void 0}}static Xx(t){const i=t.xS,e=t.nx,s=Se(i,e),{version:n,flags:r}=Yc(s);if(1===n){const t=Se(i,e),s=Ze(i,e),o=Se(i,e),h=Se(i,e),a=Aw(i,e),u=Aw(i,e),c=Qu(se(i),e.tc,i.byteLength);return e.Vp(c.byteLength),{Hw:Fo.qL,Rx:n,Px:r,hO:a,lI:u,eC:t,aO:s,uO:o,o:h,cO:c}}{const t=Aw(i,e),s=Aw(i,e),o=Se(i,e),h=Se(i,e),a=Se(i,e),u=Se(i,e),c=Qu(se(i),e.tc,i.byteLength);return e.Vp(c.byteLength),{Hw:Fo.qL,Px:r,Rx:n,hO:t,lI:s,eC:o,lO:h,uO:a,o:u,cO:c}}}static Zx(t){return Lu.jx(t,Fo.HL,!1)}static Yx(i){const e=i.xS,s=i.nx,n=cu(se(e)).buffer,r=Se(e,s),{version:o,flags:h}=Yc(r),a=t.dO(e,s),u=[];if(o>0){const t=Se(e,s);for(let i=0;i<t;i++){const t=wi(e,s,16);u.push(t)}}const c=Se(e,s),l=new T(n,s.tc,c);return s.Vp(e.byteLength),{Hw:Fo.XL,Rx:o,Px:h,fO:a,gO:u,_O:c,xS:l,vO:n}}static dO(t,i){let e="";for(let s=0;s<4;s++){const s=ha(t,i).toString(16);e+=1===s.length?"0"+s:s}e+="-";for(let s=0;s<2;s++){const s=ha(t,i).toString(16);e+=1===s.length?"0"+s:s}e+="-";for(let s=0;s<2;s++){const s=ha(t,i).toString(16);e+=1===s.length?"0"+s:s}e+="-";for(let s=0;s<2;s++){const s=ha(t,i).toString(16);e+=1===s.length?"0"+s:s}e+="-";for(let s=0;s<6;s++){const s=ha(t,i).toString(16);e+=1===s.length?"0"+s:s}return e.toLowerCase()}static Hx(t){const i=t.xS,e=t.nx,s=Se(i,e),{version:n,flags:r}=Yc(s),o=Se(i,e),h=Se(i,e);let a,u;0===n?(a=Io.fromBits(Se(i,e),0,!0),u=Io.fromBits(Se(i,e),0,!0)):(a=Ze(i,e),u=Ze(i,e)),e.Vp(2);const c=Tt(i,e),l=[];for(let t=0;t<c;t+=1){const t=Se(i,e),s=t>>31&1,n=2147483647&t,r=Se(i,e),o=Se(i,e),h=o>>31&1,a=o>>28&7,u=268435455&o;l.push({wO:s,mO:n,ct:r,pO:h,AO:a,yO:u})}return{Hw:Fo.KL,Rx:n,Px:r,bO:o,eC:h,MO:a,TO:u,SO:c,IO:l}}static Kj(t){const i=t.xS,e=t.nx,s=Se(i,e),{version:n,flags:r}=Yc(s);let o;return o=0===n?Io.fromBits(Se(i,e),0,!0):Ze(i,e),{Hw:Fo.WL,Rx:n,Px:r,$j:o}}},wN={playready:"https://pr-keyos.licensekeyserver.com/core/rightsmanager.asmx",widevine:"https://wv-keyos.licensekeyserver.com/",fairplay:"https://fp-keyos.licensekeyserver.com/getkey"};function mN(t){if(!t)return!0;const i=t.licenseAcquisitionURL,e=t.certificateURL,s=t.keys,n=t.headers,r=t.useCredentials,o=t.queryParameters;return!(i||e||s||n||r||o)}function pN(t){return t&&void 0!==t.licenseAcquisitionURL}var AN=pN,yN=pN;function bN(t){if(!t)return!0;if(NN(t))return!1;const i=t.fairplay,e=t.playready,s=t.widevine,n=t.clearkey,r=t.aes128;return mN(i)&&mN(e)&&mN(s)&&void 0===n&&mN(r)}function MN(t){const i=aN(t),e=function(t){var i;const e=t;return hN(e)&&""!==(null==(i=e.fairplay)?void 0:i.headers.PreAuthorization)&&!oN(e)}(t);return(!i||!e)&&(i||e)}function TN(t){return t.integration===ZS}function SN(t){const i=t;if(!i)return!1;if(bN(i))return!1;const e=i.fairplay,s=i.playready,n=i.widevine,r=i.clearkey;if(NN(t))return!0;if(e&&!function(t){const i=t;return i&&(void 0!==i.certificateURL||void 0!==i.certificate)}(e))return!1;if(s&&!AN(s))return!1;if(n&&!yN(n))return!1;if(r&&!function(t){return void 0!==t}(r))return!1;if(i.integration){if(qc.Jk.Xk(i.integration))return!0;switch(i.integration){case Wn:if(!function(t){const i=t,e=i.integration===Wn;return e&&(IN(t)||DN(t))}(t))return!1;break;case HS:if(!EN(t))return!1;break;case XS:if(!function(t){const i=t;return i.integration===XS}(t))return!1;break;case ZS:if(!TN(t))return!1;break;case GS:if(!MN(t))return!1;break;case WS:if(!function(t){const i=t;return i.integration===WS}(t))return!1;break;case zn:if(!NN(t))return!1;break;case qS:if(!function(t){const i=t;return i.integration===qS&&(void 0!==i.token||function(t){return void 0!==t.merchant&&void 0!==t.sessionId&&void 0!==t.userId}(i))}(t))return!1;break;case KS:if(!function(t){const i=t;return i.integration===KS}(t))return!1;break;case $S:if(!kN(t))return!1;break;case tN:if(!function(t){return t.integration===tN}(t))return!1;break;case iN:if(!LN(t))return!1;break;case JS:if(!function(t){const i=t;return i.integration===JS&&void 0!==i.token}(t))return!1;break;case eN:if(!function(t){const i=t;return i.integration===eN}(t))return!1;break;case sN:if(!function(t){const i=t;return i&&Rt(i.releasePid)&&Rt(i.accountId)&&Rt(i.token)}(t))return!1;break;case nN:return!0;default:return!1}}return!0}function NN(t){return t.integration===zn}function IN(t){return void 0!==t.authToken}function DN(t){const i=t;return void 0!==i.accountName&&void 0!==i.customerName&&void 0!==i.portalId}function EN(t){const i=t;return i.integration===HS&&void 0!==i.token}function kN(t){const i=t;return i&&i.integration===$S&&cs(i.ticketAcquisitionURL)&&cs(i.streamId)}function LN(t){const i=t;return i.integration===iN&&void 0!==i.token}function xN(t,i){const e=i[t];var s;const n=null!=(s=null==e?void 0:e.licenseAcquisitionURL)?s:wN[t];var r;const o=null!=(r=null==e?void 0:e.customdata)?r:i.customdata,h=o?{customData:o}:{};var a;const u=il({},null!=(a=null==e?void 0:e.headers)?a:{},h),c=null!=e?e:{},{customdata:l}=c;return il({},rN(c,["customdata"]),{licenseAcquisitionURL:n,headers:u})}function CN(t){switch(t.toLowerCase()){case"widevine":case V_:return V_;case"playready":case Zu:return Zu;case"fairplay":case Z:return Z}}function jN(t,i){switch(t){case Ca:return function(t){const i={},e=tn.Fx(new DataView(t));for(const t of e)i[t.fO]=t.vO;return i}(i);case U_:case xt:return function(t){return{[H_]:t}}(i);default:throw new Ui(Do.CONTENT_PROTECTION_INITIALIZATION_INVALID,"Unsupported initDataType "+t)}}async function ON(t,i){return void 0===i&&(i=!1),!(!t.widevine||!await me.Mw())||(!(!t.playready||!await me.yw())||(!(!t.clearkey||!await me.pw())||!(i||!t.fairplay||!await me.Aw())))}function RN(t,i,e){const s=function(t,i,e){var s;const{useCredentials:n,crossOrigin:r}=function(t,i){let e=Sn.nN;return t.useCredentials?e=Sn.Ik:t.crossOrigin&&(e=uI(t.crossOrigin)),e===Sn.nN&&i&&i.vr&&i.vr[360]&&(e=Sn.Nk),{useCredentials:e===Sn.Ik,crossOrigin:e}}(t,i);let o=t.liveOffset;Rt(o)||(o=e&&Rt(e.liveOffset)?e.liveOffset:void 0);let h=t.timeServer;Rt(h)||(h=i&&Rt(i.timeServer)?i.timeServer:void 0);let a=t.hlsDateRange;Rt(a)||(a=e&&Rt(e.hlsDateRange)?Boolean(e.hlsDateRange):void 0);const u=Boolean(t.experimentalRendering),c=Boolean(t.nativeUiRendering),l=Boolean(t.lowLatency),d=Boolean(t.useNativePlayback),f=Boolean(t.useManagedMediaSource),g=Rt(t.dash)?zN(t.dash):void 0,_=Rt(t.hls)?BN(t.hls):void 0,v=YN(FN(t.abr),null==e?void 0:e.abr),w=At(t.lcevc),m=Rt(t.ignoreEmbeddedTextTrackTypes)?MI(t.ignoreEmbeddedTextTrackTypes):[];var p;const A=sI(null!=(p=t.seamlessSwitchStrategy)?p:null==(s=t.dash)?void 0:s.useSeamlessPeriodSwitch),y=iI(t.latencyConfiguration);return{crossOrigin:r,useCredentials:n,liveOffset:o,timeServer:h,hlsDateRange:a,experimentalRendering:u,nativeUiRendering:c,lowLatency:l,useNativePlayback:d,useManagedMediaSource:f,dash:g,hls:_,abr:v,lcevc:w,ignoreEmbeddedTextTrackTypes:m,seamlessSwitchStrategy:A,latencyConfiguration:y}}(t,i,e),n=FS(t.src);let r=t.type;r||(r=t.src?aI(t.src):void 0);const o=function(t,i){let e;e=Rt(t.contentProtection)?t.contentProtection:Rt(t.drm)?t.drm:Rt(i)&&Rt(i.contentProtection)?i.contentProtection:Rt(i)&&Rt(i.drm)?i.drm:void 0;return PN(e)}(t,i);return il({},s,{src:n,type:r,contentProtection:o,ssai:Rt(t.ssai)?VS(t.ssai):void 0,integrationData:void 0,isAdvertisement:Boolean(t.isAdvertisement)})}function PN(t){return SN(t)&&t.integration&&t.integration===zn?function(t){const i=xN(Fs.Vw,t),e=xN(Fs.Yw,t),s=t[Fs.Ww]&&xN(Fs.Ww,t);return il({integration:"keyos",widevine:i,playready:e},s?{fairplay:s}:{})}(t):t}function zN(t){return{useSeamlessPeriodSwitch:sI(null==t?void 0:t.useSeamlessPeriodSwitch),needsTimescaleShifting:At(null==t?void 0:t.needsTimescaleShifting),desiredTimescale:void 0!==(null==t?void 0:t.desiredTimescale)?yn(null==t?void 0:t.desiredTimescale):void 0,forceSeekToSynchronize:At(null==t?void 0:t.forceSeekToSynchronize),ignoreAvailabilityWindow:At(null==t?void 0:t.ignoreAvailabilityWindow),forceHardSwitchWhenSeekingBackwards:At(null==t?void 0:t.forceHardSwitchWhenSeekingBackwards),segmentRelativeVttTiming:At(null==t?void 0:t.segmentRelativeVttTiming)}}function BN(t){return{discontinuityAlignment:UN(null==t?void 0:t.discontinuityAlignment),delaySubtitlePreload:dn(null==t?void 0:t.delaySubtitlePreload)}}function UN(t){if(!t||!cs(t))return"auto";switch(t){case"playlist":return"playlist";case"media":return"media";default:return"auto"}}r(),r(),r(),r();var Q=function(t){return t.tN="audio",t.iN="video",t.KM="text",t.eN="image",t.QS="unknown",t}({});function QN(t){return"audio"===t||"video"===t}function FN(t){if(!Rt(t))return;return VN(SS(null==t?void 0:t.preferredAudioCodecs,To),SS(null==t?void 0:t.preferredVideoCodecs,To),At(null==t?void 0:t.restrictToPlayerSize))}function YN(t,i){if(!Rt(t)&&!Rt(i))return;var e;return VN(GN(null==t?void 0:t.preferredAudioCodecs,null==i?void 0:i.preferredAudioCodecs),GN(null==t?void 0:t.preferredVideoCodecs,null==i?void 0:i.preferredVideoCodecs),null!=(e=null==t?void 0:t.restrictToPlayerSize)?e:null==i?void 0:i.restrictToPlayerSize)}function VN(t,i,e){if(0!==t.length||0!==i.length||void 0!==e)return{preferredAudioCodecs:0===t.length?void 0:t,preferredVideoCodecs:0===i.length?void 0:i,restrictToPlayerSize:e}}function GN(t,i){return void 0!==t&&(null==t?void 0:t.length)>0?t:null!=i?i:[]}function WN(t,i){if(void 0!==i)switch(t){case Q.iN:return i.preferredVideoCodecs;case Q.tN:return i.preferredAudioCodecs;default:return}}r(),r(),r();var kh=!1;r();var fa=function(t){return t.DO="canplay",t.EO="canplaythrough",t.kO="loadeddata",t.LO="loadedmetadata",t.CE="readystatechange",t.xO="waiting",t.CO="playing",t}({}),ZN=["canplay","canplaythrough","loadeddata","loadedmetadata","readystatechange","waiting","playing"];function HN(t,i,e){return e?t<=i:t<i}r();var ge=class t{get jO(){return this.OO.slice()}Cn(t){return this.OO[2*t]}jn(t){return this.OO[2*t+1]}RO(t){return this.PO[2*t]}zO(t){return this.PO[2*t+1]}ws(){const t=this;return{get length(){return t.U},start(i){const e=0|i;return t.BO(e),t.Cn(e)},end(i){const e=0|i;return t.BO(e),t.jn(e)}}}UO(){const i=new Array(2*this.U),e=new Array(2*this.U);for(let t=0;t<this.U;t++)i[2*t]=this.Cn(t),i[2*t+1]=this.jn(t),e[2*t]=!0,e[2*t+1]=!0;return new t(i,e)}BO(t){if(t<0)throw new g("The index provided ("+t+") must be non-negative");if(t>=this.U)throw new g("The index provided ("+t+") is greater than the maximum bound ("+this.U+")")}QO(t){if(0===this.U)return 0;if(this.gr(t))return t;if(t<=this.Cn(0))return this.Cn(0);if(t>=this.jn(this.U-1))return this.jn(this.U-1);{let i=0,e=1/0;for(let s=0;s<this.U;s++){const n=this.Cn(s),r=x.abs(n-t);r<e&&(i=n,e=r);const o=this.jn(s),h=x.abs(o-t);h<e&&(i=o,e=h)}return i}}Sn(i){let e=0,s=0;const n=[],r=[];for(;e<this.U&&s<i.U;){const t=this.Cn(e),o=this.jn(e),h=this.RO(e),a=this.zO(e),u=i.Cn(s),c=i.jn(s),l=i.RO(s),d=i.zO(s),f=x.max(t,u),g=x.min(o,c);let _,v;_=t===u?h&&l:f===t?h:l,v=o===c?a&&d:g===o?a:d,(f<g||_&&v&&f===g)&&(n.push(f,g),r.push(_,v)),o===c?(e+=1,s+=1):o<c?e+=1:s+=1}return new t(n,r)}FO(){const i=this.YO(),e=i.U;if(0===e)return new t([-1/0,1/0],[!1,!1]);const s=[],n=[],r=i.Cn(0);r!==-1/0&&(s.push(-1/0,r),n.push(!1,!i.RO(0)));for(let t=0;t<e-1;t++)s.push(i.jn(t),i.Cn(t+1)),n.push(!i.zO(t),!i.RO(t+1));const o=i.jn(e-1);return o!==1/0&&(s.push(o,1/0),n.push(!i.zO(e-1),!1)),new t(s,n)}VO(i){let e=0,s=0;const n=this.U,r=i.U,o=new Array(2*(n+r)),h=new Array(2*(n+r));let a=0;for(;e<n&&s<r;){const t=this.Cn(e),n=this.jn(e),r=i.Cn(s),u=i.jn(s);t<r||t===r&&n<u?(o[a]=t,o[a+1]=n,h[a]=this.RO(e),h[a+1]=this.zO(e),e++):(o[a]=r,o[a+1]=u,h[a]=i.RO(s),h[a+1]=i.zO(s),s++),a+=2}for(;e<n;)o[a]=this.Cn(e),o[a+1]=this.jn(e),h[a]=this.RO(e),h[a+1]=this.zO(e),e++,a+=2;for(;s<r;)o[a]=i.Cn(s),o[a+1]=i.jn(s),h[a]=i.RO(s),h[a+1]=i.zO(s),s++,a+=2;return new t(o,h)}GO(i){void 0===i&&(i=0);const e=this.U;if(e<2)return this;const s=[],n=[];let r=this.Cn(0),o=this.jn(0),h=this.RO(0),a=this.zO(0);for(let t=1;t<e;t++){const e=this.Cn(t),u=this.jn(t);let c=this.RO(t),l=this.zO(t);r<e&&o>u||(r===e&&(c=h||c,h=c),o===u&&(l=a||l,a=l),HN(e,o+i,a||c)?(o=u,a=l):(s.push(r,o),n.push(h,a),r=e,o=u,h=c,a=l))}return s.push(r,o),n.push(h,a),new t(s,n).YO()}YO(){const i=[],e=[];for(let t=0;t<this.U;t++){const s=this.Cn(t),n=this.jn(t),r=this.RO(t),o=this.zO(t);s===n?(r||o)&&(i.push(s,n),e.push(!0,!0)):(i.push(s,n),e.push(r,o))}return new t(i,e)}WO(t){if(0===this.U)return t;if(0===t.U)return this;return this.VO(t).GO()}ZO(t){const i=this.YO(),e=t.YO(),s=i.FO(),n=e.FO(),r=s.Sn(e),o=n.Sn(i);return r.WO(o)}Vp(i){if(0===this.U||0===i)return this;const e=[],s=[];for(let t=0;t<this.U;t++){const n=this.Cn(t)+i,r=this.jn(t)+i;e.push(n,r),s.push(this.RO(t),this.zO(t))}return new t(e,s)}HO(t){return 0===this.U||0===t.U?this:this.YO().Sn(t.YO().FO())}gr(t,i){return this.XO(t,i)>=0}qO(t,i,e,s,n){return this.KO(t,i,e,s,n)>=0}JO(t,i,e,s,n){return this.$O(t,i,e,s,n)>=0}tR(t){if(t.U!==this.U)return!1;for(let i=0;i<this.U;i++)if(this.Cn(i)!==t.Cn(i)||this.jn(i)!==t.jn(i)||this.RO(i)!==t.RO(i)||this.zO(i)!==t.zO(i))return!1;return!0}iR(i){const e=[],s=[];for(let t=0;t<this.U;t++){const n=this.Cn(t),r=this.jn(t),o=this.RO(t),h=this.zO(t);i(n,r,o,h)&&(e.push(n,r),s.push(o,h))}return new t(e,s)}$O(t,i,e,s,n){void 0===e&&(e=!0),void 0===s&&(s=!0),void 0===n&&(n=0);const r=t-n,o=i+n;for(let t=0;t<this.U;t+=1)if(HN(this.Cn(t),o,!s||this.RO(t))&&HN(r,this.jn(t),!e||this.zO(t)))return t;return-1}KO(t,i,e,s,n){void 0===e&&(e=!0),void 0===s&&(s=!1),void 0===n&&(n=0);const r=t+n,o=i-n;for(let t=0;t<this.U;t+=1)if(HN(this.Cn(t),r,!e||this.RO(t))&&HN(o,this.jn(t),!s||this.zO(t)))return t;return-1}XO(t,i){return this.KO(t,t,!0,!0,i)}eR(t,i){void 0===i&&(i=0);const e=t+i;for(let t=this.U-1;t>=0;t-=1)if(HN(this.Cn(t),e,this.RO(t)))return t;return-1}sR(t,i){void 0===i&&(i=0);const e=t-i;for(let t=0;t<this.U;t+=1)if(HN(e,this.jn(t),this.zO(t)))return t;return-1}nR(t,i){void 0===i&&(i=0);const e=t+i;for(let t=0;t<this.U;t+=1)if(this.Cn(t)>e)return t;return-1}rR(i){return this.BO(i),new t([this.Cn(i),this.jn(i)],[this.RO(i),this.zO(i)])}oR(t,i){const e=this.XO(t,i);return e<0?void 0:this.rR(e)}get hR(){let t=0;for(let i=0;i<this.U;i++){t+=this.jn(i)-this.Cn(i)}return t}static xn(i){const e=[];for(let t=0;t<i.length;t++)e.push(i.start(t),i.end(t));return new t(e)}static aR(i){return new t([i,i],[!0,!0])}static uR(i,e){return i<=e?new t([i,e]):t.cR()}static cR(){return XN}constructor(t,i){this.U=t.length>>1,this.OO=t,this.PO=i||function(t){const i=new Array(2*t);for(let e=0,s=0;e<t;e+=1,s+=2)i[s]=!0,i[s+1]=!1;return i}(this.U)}},XN=new ge([]),D=.92,Ut=1.08,qN=.25,KN=class extends Bo{get lR(){return this.Le&&this.Kh}get dR(){return this.fR}get Rt(){return this.Le}set Rt(t){this.Le=t,t?this.Cn():this.nE()}gR(t){this._R.push(t),this.vR()}wR(t){Ro(this._R,t),this.vR()}vR(){this.fR=this.mR(),this.Kh&&this.pR()}mR(){const t=this.AR,i=function(t,i){const e=i-t.targetOffset;return{minimumOffset:t.minimumOffset+e,targetOffset:t.targetOffset+e,maximumOffset:t.maximumOffset+e,forceSeekOffset:t.forceSeekOffset+e,minimumPlaybackRate:t.minimumPlaybackRate,maximumPlaybackRate:t.maximumPlaybackRate,leniency:t.leniency}}(this.yR,this.bR),e=[i,...this._R],s=e.reduce(((t,i)=>{var e;return x.max(t,null!=(e=null==i?void 0:i.minimumOffset)?e:0)}),t),n=e.reduce(((t,i)=>{var e;return x.max(t,null!=(e=null==i?void 0:i.targetOffset)?e:0)}),s+qN),r=e.reduce(((t,i)=>{var e;return x.max(t,null!=(e=null==i?void 0:i.maximumOffset)?e:0)}),n+qN);return{minimumOffset:s,targetOffset:n,maximumOffset:r,forceSeekOffset:e.reduce(((t,i)=>{var e;return x.max(t,null!=(e=null==i?void 0:i.forceSeekOffset)?e:0)}),r+qN),minimumPlaybackRate:e.reduce(((t,i)=>{var e;return x.min(t,null!=(e=i.minimumPlaybackRate)?e:D)}),D),maximumPlaybackRate:e.reduce(((t,i)=>{var e;return x.max(t,null!=(e=i.maximumPlaybackRate)?e:Ut)}),Ut)}}MR(){var t;const i=null==(t=ge.xn(this.ta.KI).oR(this.ta.sD))?void 0:t.jn(0),e=void 0!==i?i-this.ta.sD:0;this.SR=x.min(this.SR,e),this.NR+=1}IR(){if(this.NR<10)return;const t=.25-this.SR,i=rh(this.bR+t,this.bR-.1,this.bR+.1);this.bR=rh(i,this.DR,this.ER),this.SR=1/0,this.NR=0}kR(){this.LR(),this.RN=me.ov((()=>this.pR()),500)}LR(){void 0!==this.RN&&(me.rv(this.RN),this.RN=void 0)}Cn(){this.Le&&this.xR&&(this.Kh||this.jR.yn(Qi.Dp,this.pR),this.OR=me.gw((()=>this.MR()),1e3),this.RR=me.gw((()=>this.IR()),6e4),this.kR(),this.Kh=!0)}nE(){this.Kh&&(this.LR(),this.OR&&me._w(this.OR),this.RR&&me._w(this.RR),this.jR.fn(Qi.Dp,this.pR),this.PR(1),this.Kh=!1)}Mm(){this.nE(),this.ta.fn(fa.xO,this.zR),this.ta.fn(fa.CO,this.UR),this.Bo()}PR(t){this.jR.FR.QR||this.ta.ND!==t&&(this.ta.ND=t)}get YR(){return this.ta.GR}constructor(t,i,e){var s;super(),this.Kh=!1,this.Le=!1,this._R=[],this.xR=!1,this.AR=0,this.RN=void 0,this.NR=0,this.SR=1/0,this.zR=()=>{const t=this.jR.KI,i=this.jR.sD,e=t.oR(i);e&&(this.AR=rh(e.jn(0)-i,this.AR,.5),this.vR())},this.UR=()=>{this.xR=!0,this.ta.fn(fa.CO,this.UR),this.Le&&this.Cn()},this.pR=()=>{this.LR(),this.kR();const t=this.YR;if(!t)return;const i=this.WR();if(t>this.fR.forceSeekOffset)return this.yo(new Gs("latencyrecoveryseek")),void this.Sk();const{minimumOffset:e,targetOffset:s,maximumOffset:n}=this.fR,r=this.jR.ND;if(i>n&&this.ZR()){const t=this.fR.maximumPlaybackRate;kh,this.PR(t)}else if(i<e&&!me.Ys.Mv){const t=this.fR.minimumPlaybackRate;kh,this.PR(t)}else if(r>1&&i<s){const t=1;kh,this.PR(t)}else if(r<1&&i>s){const t=1;kh,this.PR(t)}},this.ta=t,this.jR=i,this.yR=e,this.DR=e.targetOffset,this.ER=e.targetOffset+(null!=(s=e.leniency)?s:0),this.bR=e.targetOffset,this.fR=this.mR(),this.ta.yn(fa.xO,this.zR),this.ta.yn(fa.CO,this.UR)}},JN=.66,$N=1.5,tI=3;function iI(t){if(!Rt(t))return;const i=me.Ys.Tv?10:0,e=t.targetOffset;var s;var n;var r;var o;var h;var a;return{minimumOffset:null!=(s=t.minimumOffset)?s:e*JN,targetOffset:e,maximumOffset:null!=(n=t.maximumOffset)?n:e*$N,forceSeekOffset:x.max(null!=(r=t.forceSeekOffset)?r:e*tI,i),minimumPlaybackRate:null!=(o=t.minimumPlaybackRate)?o:D,maximumPlaybackRate:null!=(h=t.maximumPlaybackRate)?h:Ut,leniency:null!=(a=t.leniency)?a:void 0}}var vc=function(t){return t.HR="auto",t.XR="always",t.qR="never",t.CLEAR_ONLY="clear-only",t.SAME_DRM_ONLY="same-drm-only",t}({}),eI=function(t){return t.VERIZON_MEDIA="verizon-media",t.MEDIATAILOR="mediatailor",t}({});function sI(t){if(!t||!cs(t))return"auto";switch(t){case"always":return"always";case"never":return"never";case"clear-only":return"clear-only";case"same-drm-only":return"same-drm-only";default:return"auto"}}r(),r();var ys=function(t){return t.ENABLED="enabled",t.INSECURE="insecure",t.DISABLED="disabled",t}({});r();var nI=!1;r();var rI=function(t){return t.NONE="none",t.MIDROLL_AND_POSTROLL="midroll-and-postroll",t}({});r();var er=function(t){return t.DEFAULT="",t.SRT="srt",t.TTML="ttml",t.WEBVTT="webvtt",t.EMSG="emsg",t.EVENT_STREAM="eventstream",t.ID3="id3",t.CEA608="cea608",t.DATE_RANGE="daterange",t}({});function oI(t){switch(t){case"":case"srt":case"ttml":case"webvtt":case"emsg":case"eventstream":case"id3":case"cea608":case"daterange":return!0;default:return!1}}function hI(t){return!!t&&Re(t,"mpd")}function aI(t){let i=vt.xk;return hI(t)&&(i=vt.Dk),function(t){return!!t&&Re(t,"m3u8")}(t)&&(i=vt.Ek),i}function uI(t){switch(t){case Sn.Nk:case Sn.Ik:return t;default:return Sn.nN}}function cI(t){if(!t)return!1;const i=t.toLowerCase();return sa(i,vt.Dk)}function dh(t){if(!t)return!1;const i=t.toLowerCase();return sa(i,vt.Ek)||sa(i,vt.Lk)}function yh(t){return jl(t)&&jl(t.ssai)&&"google-dai"===t.ssai.integration}function lI(t){return jl(t)&&"verizon-media"===t.integration}function dI(t){return jl(t)&&("theolive"===t.type||"theolive"===t.integration)}function fI(t){return jl(t)&&"mediatailor"===t.integration}function sh(t){return jl(t)&&"millicast"===t.type}function gI(t){if(t.sources)if(Kc(t.sources)){for(const i of t.sources)if(sh(i))return!0}else if(jl(t.sources))return sh(t.sources);return!1}function _I(t){if(cs(t))return!t;if(lI(t))return!t.id;if(yh(t)){const i=t.ssai,e="live"===i.availabilityType&&i.assetKey,s="vod"===i.availabilityType&&i.contentSourceID&&i.videoID;return Boolean(e&&s)}return sh(t)?!t.src&&!t.streamName||!t.streamAccountId:!t.src}function gs(t){return Boolean(jl(t)&&cs(t.src))}function vI(t){return t.type===vt.Ck||t.type===vt.jk}function wI(t){return cs(t)||gs(t)||yh(t)||lI(t)||sh(t)}function Ls(t){if(t){if(wI(t))return _I(t);for(const i of t)if(!_I(i))return!1;return!0}return!0}function mI(){return{crossOrigin:Sn.nN,useCredentials:!1,liveOffset:void 0,timeServer:void 0,hlsDateRange:void 0,experimentalRendering:!1,nativeUiRendering:!1,lowLatency:!1,useNativePlayback:!1,useManagedMediaSource:!1,dash:void 0,hls:void 0,abr:void 0,lcevc:void 0,ignoreEmbeddedTextTrackTypes:[],seamlessSwitchStrategy:vc.HR,latencyConfiguration:void 0}}function pI(){return il({},mI(),{src:void 0,type:vt.xk,contentProtection:void 0,ssai:void 0,integrationData:void 0,isAdvertisement:void 0})}function AI(t){const i={allowedMimeTypes:void 0,preload:"midroll-and-postroll",showCountdown:!0,vpaidMode:ys.ENABLED,googleIma:{useNativeIma:!1,useAdUiElementForSsai:!1,bitrate:-1,language:void 0,uiElements:void 0},theoads:nI};return void 0===t||(void 0!==t.preload&&(i.preload=function(t){return"none"===t?rI.NONE:rI.MIDROLL_AND_POSTROLL}(t.preload)),void 0!==t.showCountdown&&(i.showCountdown=dn(t.showCountdown)),void 0!==t.vpaidMode&&(i.vpaidMode=function(t){switch(t){case"insecure":return ys.INSECURE;case"disabled":return ys.DISABLED;default:return ys.ENABLED}}(t.vpaidMode)),Kc(t.allowedMimeTypes)&&(i.allowedMimeTypes=t.allowedMimeTypes.filter(cs)),void 0!==t.googleIma&&(i.googleIma=function(t){return void 0===t?{useNativeIma:!1,useAdUiElementForSsai:!1,bitrate:-1,language:void 0,uiElements:void 0}:{useNativeIma:dn(t.useNativeIma),useAdUiElementForSsai:dn(t.useAdUiElementForSsai),bitrate:null!=(i=t.bitrate)?i:-1,language:Rt(t.language)?To(t.language):void 0,uiElements:t.uiElements};var i}(t.googleIma)),void 0!==t.theoads?i.theoads=dn(t.theoads):i.theoads=nI),i}function yI(t){if(!ou(t))return[];const i=[];for(const e of t)jl(e)&&i.push(e);return i}function bI(t){return cs(t.src)||sh(t)}function MI(t){return Kc(t)?t.filter(oI):[]}r(),r();var $i=function(t){return t[t.KR=0]="KR",t[t.Xn=1]="Xn",t[t.JR=2]="JR",t[t.$R=3]="$R",t[t.tP=4]="tP",t}({}),Zi=class extends Gs{constructor(t,i=$i.KR){super(Qi.Jm),this.currentTime=t,this.readyState=i}};r();var Ia=class extends Gs{constructor(t){super(Qi.vp),this.currentTime=t}};r();var us=class extends Gs{constructor(t){super(Qi.so),this.currentTime=t}};r();var TI=class extends Gs{constructor(t,i=$i.Xn){super(fa.LO),this.currentTime=t,this.readyState=i}};r();var In=class extends Gs{constructor(t){super(Qi.Km),this.duration=t}};r();var rr=class extends Gs{constructor(t,i){super(Qi.mp),this.currentTime=t,this.playbackRate=i}};r();var H=class extends Gs{constructor(t,i){super(Qi.Dp),this.currentTime=t,this.currentProgramDateTime=i}};r();var ce=class extends Gs{constructor(t){super(Qi.tp),this.currentTime=t}};r();var SI=class extends Gs{constructor(t,i=$i.JR){super(fa.kO),this.currentTime=t,this.readyState=i}};r();var ll=class extends Gs{constructor(t){super(Qi.bp),this.currentTime=t}};r();var ns=class extends Gs{constructor(t){super(Qi.yp),this.currentTime=t}};r();var B=class extends Gs{constructor(t,i){super(Qi.Ep),this.currentTime=t,this.volume=i}};r();var or=class extends Gs{constructor(t,i=$i.$R){super(fa.DO),this.currentTime=t,this.readyState=i}};r();var NI=class extends Gs{constructor(t,i=$i.tP){super(fa.EO),this.currentTime=t,this.readyState=i}};r();var hr=class extends Gs{constructor(t,i){super(fa.CE),this.currentTime=t,this.readyState=i}};r();var As=class extends ps{get error(){return this.errorObject.message}ma(){return this}constructor(t){super(ac.ua),this.errorObject=t}};async function _t(t,i,e,s,n){void 0===e&&(e=3),void 0===s&&(s=1e3),void 0===n&&(n=1/0);let r=0;for(;;)try{return await t(i)}catch(t){if(wh(t),r<e){const t=x.min(s*2**r,n);r++,await Bn(t,i);continue}throw t}}r();var II={maxRetries:1/0,minimumBackoff:200,maximumBackoff:3e4};r();var pc=function(t){return t.INLINE="inline",t.FULLSCREEN="fullscreen",t.PICTURE_IN_PICTURE="picture-in-picture",t.NATIVE_PICTURE_IN_PICTURE="native-picture-in-picture",t}({}),DI=function(t){return t.NONE="none",t.ALL="all",t.CONTENT="content",t}({});function EI(t){switch(t){case"all":case"content":return t;default:return"none"}}function kI(t){const i=Wa(t||{});return i.libraryLocation&&(i.libraryLocation=Jt(i.libraryLocation,!0)),i.isEmbeddable=Boolean(i.isEmbeddable),i.cast=function(t){const i=QS(t?t.chromecast:void 0),e=function(t){switch(t){case"auto":return"auto";case"manual":default:return"manual";case"disabled":return"disabled"}}(t?t.strategy:void 0);return{chromecast:i,strategy:e}}(i.cast),i.ads=AI(i.ads),i.analytics=yI(i.analytics),i.mutedAutoplay=EI(i.mutedAutoplay),i.allowNativeFullscreen=Boolean(i.allowNativeFullscreen),i.allowMixedContent=Boolean(i.allowMixedContent),i.persistVolume=Boolean(i.persistVolume),i.liveOffset=function(t){return Number(t)||void 0}(i.liveOffset),i.hlsDateRange=function(t){return Boolean(t)}(i.hlsDateRange),i.retainPlaybackRateOnSourceChange=Boolean(i.retainPlaybackRateOnSourceChange),i.license=function(t){return cs(t)?t:void 0}(i.license),i.licenseUrl=function(t){if(!t)return;try{return Jt(t)}catch(t){return void me.lw("Invalid 'licenseUrl', falling back to default URL")}}(i.licenseUrl),i.vr=function(t){return{useWebXR:Boolean(t&&t.useWebXR)}}(i.vr),i.abr=FN(i.abr),i.retryConfiguration=function(t){const i=il({},II);return void 0!==t&&(void 0!==t.maxRetries&&(i.maxRetries=Number(t.maxRetries)),void 0!==t.minimumBackoff&&(i.minimumBackoff=Number(t.minimumBackoff)),void 0!==t.maximumBackoff&&(i.maximumBackoff=Number(t.maximumBackoff))),i}(i.retryConfiguration),i.hideDeprecationWarnings=Boolean(i.hideDeprecationWarnings),i.theoLive=function(t){if(!t)return t;return il({},t,{externalSessionId:t.externalSessionId?To(t.externalSessionId):void 0,fallbackEnabled:At(t.fallbackEnabled)})}(i.theoLive),i}function LI(t){return{bt:t.bt,sD:t.sD,ct:t.ct,hD:t.hD,lt:t.lt,cD:t.cD,mD:t.mD,TD:t.TD,ND:t.ND,OD:t.OD,BD:t.BD,FD:t.FD,GD:t.GD,ZD:t.ZD}}function xI(t,i){const e=i.ZD,s=i.mD;t.ZD=e,t.mD=s}function ph(t,i,e){if(i===e)return;const s=i.bt!==e.bt,n=i.sD,r=i.ct,o=i.mD,h=i.TD,a=i.ND,u=i.OD,c=i.BD,l=(i.GD,i.FD,i.ZD),d=e.sD,f=e.ct,g=e.hD,_=e.cD,v=e.mD,w=e.TD,m=e.ND,p=e.OD,A=e.BD,y=(e.GD,e.FD,e.ZD);(s||u>$i.KR&&p===$i.KR)&&t.yo(new Zi(d,p)),w&&!h?t.yo(new Ia(d)):!w&&h&&t.yo(new us(d)),p>=$i.Xn&&(s||u<$i.Xn)&&t.yo(new TI(d,p)),f===r||j(f)&&j(r)||t.yo(new In(f)),m!==a&&t.yo(new rr(d,m)),d!==n&&t.yo(new H(d,void 0)),g&&t.yo(new ce(d)),p>=$i.JR&&(s||u<$i.JR)&&t.yo(new SI(d,p)),A&&!c?t.yo(new ll(d)):!A&&c&&t.yo(new ns(d)),y===l&&v===o||t.yo(new B(d,y)),p>=$i.$R&&(s||u<$i.$R)&&t.yo(new or(d,p)),p>=$i.tP&&(s||u<$i.tP)&&t.yo(new NI(d,p)),p!==u&&t.yo(new hr(d,p)),_&&t.yo(new As(_))}function CI(t){switch(t){case pc.INLINE:case pc.FULLSCREEN:case pc.PICTURE_IN_PICTURE:case pc.NATIVE_PICTURE_IN_PICTURE:return t;default:return}}r();var jI=class extends Gs{constructor(t){super(Qi.Xm),this.currentSource=t}};r();var ar=class extends Gs{constructor(){super(Qi.ep)}};r();var OI=class extends Gs{constructor(){super(Qi.np)}};r(),r(),r();var ra=function(t){return t.iP="enterpictureinpicture",t.eP="exitpictureinpicture",t.ua="pictureinpictureerror",t}({}),RI=class extends Gs{constructor(){super(ra.iP)}};r();var PI=class extends Gs{constructor(){super(ra.eP)}},Th=class extends Bo{get WE(){return this.ZE}set WE(t){if(t===this.ZE)return;this.HE(this.ZE);const i=this.ZE.sP;this.ZE=t,this.qE(t),!i&&this.ZE.sP?this.yo(new RI):i&&!this.ZE.sP&&this.yo(new PI)}qE(t){t.yn(ra.iP,this.Ds),t.yn(ra.eP,this.Ds),t.yn(ra.ua,this.Ds)}HE(t){t.fn(ra.iP,this.Ds),t.fn(ra.eP,this.Ds),t.fn(ra.ua,this.Ds)}get nP(){return this.ZE.nP}get sP(){return this.ZE.sP}co(){return this.ZE.co()}bo(){return this.ZE.bo()}gn(t){this.Bo(),this.HE(this.ZE),t||this.ZE.gn()}constructor(t){super(),this.ZE=t,this.qE(this.ZE)}},zI=class extends aS{_a(){return this.rP}HI(){return this.oP}get dD(){return this.fD()}fD(){return this.hP}QD(){return this.Ol}VD(){return this.aP}uP(t){const i=this.XI;if(i===t)return;i.Qm(this.fE);const e=LI(this),s=this.eD(),n=this.$D(),r=this.tE();this.XI=t,this.oP.WE=t.ht,this.aP.WE=t.rt,this.Ol.WE=t.nt,this.rP.WE=t._a(),this.hP.WE=t.dD,void 0!==e&&ph(this,e,this);const o=this.eD();o!==s&&this.yo(new jI(o)),this.$D()!==n&&this.yo(new ar),this.tE()!==r&&this.yo(new OI),t.Rm(this.fE)}async gn(){await super.gn(),this.rP.gn(),this.oP.gn(),this.aP.gn(),this.Ol.gn(),this.hP.gn()}constructor(t){super(t),this.oP=new Dh,this.aP=new Dh,this.Ol=new ci,this.hP=new ah,this.rP=new Th(t._a()),this.oP.WE=t.ht,this.aP.WE=t.rt,this.Ol.WE=t.nt,this.hP.WE=t.dD}};r();var BI=class extends zI{wD(){return function(t){let i=0,e=0,s=0,n=0,r=0,o=0,h=0;for(const a of t)i+=a.cP,e+=a.lP,s+=a.dP,n+=a.fP,r+=a.gP,o+=a._P.amountOfBufferedAudioSegments,h+=a._P.amountOfBufferedVideoSegments;return{cP:i,lP:e,dP:s,fP:n,gP:r,_P:{amountOfBufferedAudioSegments:o,amountOfBufferedVideoSegments:h}}}(this.vP.map((t=>t.vD)))}nE(){return ds(this.vP.map((t=>t.nE()))).then(ul)}tr(){return ds(this.vP.map((t=>t.tr()))).then(ul)}iE(){if(!this.do){for(const t of this.vP)t.iE();this.do=!0}}qI(){const t=[];for(const i of this.vP)t.push(...i.qI());return t}cE(t){let i=!1;for(const e of this.vP)i=e.cE(t)||i;return i}yo(t){this.cE(t)||super.yo(t)}get WE(){return this.XI}set WE(t){this.uP(t)}wP(t){this.vP.push(t)}mP(t){Ro(this.vP,t)}uP(t){if(t===this.XI)return;const i=this.XI;i.ar(),super.uP(t),t.ur(i)}aE(){for(const t of this.vP)t.aE()}async gn(){this.Bo(),this.XI.ar();for(const t of this.vP)this.XI!==t&&await t.gn();await super.gn()}constructor(t){super(t),this.vP=[],this.do=!1,this.pP=!1,this.wP(t)}};r();var sl=function(t){return t[t.ABORTED=1]="ABORTED",t[t.NETWORK=2]="NETWORK",t[t.DECODE=3]="DECODE",t[t.SRC_NOT_SUPPORTED=4]="SRC_NOT_SUPPORTED",t[t.ENCRYPTED=5]="ENCRYPTED",t[t.LICENSE_INVALID=6]="LICENSE_INVALID",t[t.ADVERTISEMENT_ERROR=7]="ADVERTISEMENT_ERROR",t}({}),La=class extends Hc{get name(){return"MediaError"}constructor(t,i,e,s){super(i),this.code=t,this.message=null!=i?i:"Unknown error",this.cause=e,this.systemCode=s,g.captureStackTrace&&g.captureStackTrace(this,this.constructor)}};function UI(t){mS(t,"MEDIA_ERR_ABORTED",1),mS(t,"MEDIA_ERR_NETWORK",2),mS(t,"MEDIA_ERR_DECODE",3),mS(t,"MEDIA_ERR_SRC_NOT_SUPPORTED",4),mS(t,"MEDIA_ERR_ENCRYPTED",5)}function be(t){var i,e;return function(t){return t.category===Ee.CONTENT_PROTECTION}(t)?new La(5,t.message,null==(i=t.cause)?void 0:i.message,t.systemCode):new La(QI(t.code),t.message,null==(e=t.cause)?void 0:e.message)}function QI(t){if(t===Do.MEDIA_ABORTED)return 1;if(t===Do.MANIFEST_LOAD_ERROR||t===Do.MEDIA_LOAD_ERROR||t===Do.SUBTITLE_LOAD_ERROR)return 2;if(t===Do.MEDIA_DECODE_ERROR)return 3;if(t===Do.MEDIA_NOT_SUPPORTED)return 4;const i=Ee.fromCode(t);return i===Ee.NETWORK?2:i===Ee.SOURCE?4:i===Ee.LICENSE?6:i===Ee.CONTENT_PROTECTION?5:i===Ee.AD?7:3}function FI(t){return new Ui(YI(t.code),t.message,t)}function YI(t){switch(t){case 1:return Do.MEDIA_ABORTED;case 2:return Do.NETWORK_ERROR;case 3:return Do.MEDIA_DECODE_ERROR;case 4:return Do.SOURCE_NOT_SUPPORTED;case 5:return Do.CONTENT_PROTECTION_ERROR;case 6:return Do.LICENSE_ERROR;case 7:return Do.AD_ERROR}}UI(La),UI(La.prototype),r(),r(),r(),r(),r();var $e=class extends gS{tt(t){return super.tt(t)}ma(){return LS(this)}};r(),r(),r(),r();var nc=class{get FE(){return this.AP}get U(){return this.AP.length}get ga(){return this.Za||(this.Za=function(t){const i=t.FE.map((t=>t.ga));return i.item=i=>{const e=0|i,s=t.VE(e);return s&&s.ga||void 0},i}(this)),this.Za}yP(t){this.AP.push(t),this.Za&&this.Za.push(t.ga)}Rb(t){Ro(this.AP,t),this.Za&&Ro(this.Za,t.ga)}VE(t){return this.AP[t]}bP(t){return Kc(t)?function(t,i){for(const e of i)if(!fh(t,e))return!1;return!0}(this.AP,t):fh(this.AP,t)}tr(){Or(this.AP),this.Za&&Or(this.Za)}constructor(){this.AP=[],this.Za=void 0}};r();var kc=class extends Ii{ma(){return new VI(this.Lt.ga)}constructor(t){super(Ct.PE),this.Lt=t}},VI=class extends Vn{constructor(t){super("update"),this.track=t}};r();var GI=0;function Xc(){return GI++}var WI=0;var ZI=0;function HI(){return ZI++}var XI=0;function qI(){return XI++}var KI=0;var JI=class extends Bo{get lk(){}get Rt(){return this.Le}set Rt(t){this.Le!==t&&(this.Le=t,this.MP=t,this.yo(new dc(this)))}get MP(){return this.TP.enabled}set MP(t){this.TP.enabled=t}get ga(){return this.Za||(this.Za=Zt(this)),this.Za}get o(){return this.Nb}get dk(){return this.SP}get zt(){return this.TP.kind}get wh(){return this.NP}set wh(t){t!==this.NP&&(this.NP=t,this.yo(new kc(this)))}get gs(){return this.TP.language}get gN(){return this.Rt?"enabled":"disabled"}get IP(){return this.TP}get gk(){return this.AP}get _k(){}set _k(t){}DP(t){this.Rt=t}EP(){this.Rt=this.MP}constructor(t){super(),this.Hw=Q.tN,this.Le=!1,this.Za=void 0,this.TP=t,this.SP=Xc(),this.Nb=KI+++"",this.NP=t.label,this.AP=new nc,this.EP()}};r();var $I=0;var tD=class extends Bo{get lk(){}get Rt(){return this.Le}set Rt(t){this.Le!==t&&(this.Le=t,this.MP=t,this.yo(new dc(this)))}get MP(){return!!this.TP.selected}set MP(t){this.TP.selected=t}get ga(){return this.Za||(this.Za=Zt(this)),this.Za}get o(){return this.Nb}get dk(){return this.SP}get zt(){return"main"}get wh(){return this.NP}set wh(t){t!==this.NP&&(this.NP=t,this.yo(new kc(this)))}get gs(){return this.TP.language}get gN(){return this.Rt?"enabled":"disabled"}get IP(){return this.TP}get gk(){return this.AP}get _k(){}set _k(t){}EP(){this.Rt=this.MP}DP(t){this.Rt=t}constructor(t){super(),this.Hw=Q.iN,this.Le=!1,this.Za=void 0,this.TP=t,this.SP=Xc(),this.Nb=$I+++"",this.AP=new nc,this.NP=t.label,this.EP()}};r();var iD=class extends Gs{constructor(t){super(Qi.Ym),this.gD=t}};r(),r();var ju=function(t){return t[t.NONE=0]="NONE",t[t.LOADING=1]="LOADING",t[t.LOADED=2]="LOADED",t[t.ERROR=3]="ERROR",t}({});r(),r();var eD=function(t){return t.kP="cue",t.LP="region",t.xP="stylesheet",t}({});r(),r();var sD={"line-left":"start",center:"middle","line-right":"end"},nD={start:"line-left",middle:"center",end:"line-right"};function rD(t,i){if("auto"===t)switch(i){case"start":case"left":return"line-left";case"end":case"right":return"line-right";default:return"center"}return t}function oD(t,i){if("auto"===t)switch(i){case"left":return 0;case"right":return 100;default:return 50}return function(t,i){const e="number"==typeof t?t:S(t);return j(e)?i:e}(t,50)}r(),r(),r();var ko=function(t){return t.iP="co",t.eP="bo",t.PE="Yn",t}({}),lh=class extends Ii{constructor(t,i){super(t),this.CP=i}},oh=class extends Vn{constructor(t,i){super(t),this.cue=i}};function ei(t){const i=[ko.iP,ko.eP,ko.PE];let e;const s={get jP(){return t},get track(){return t.Lt.ga},get id(){return t.o},get uid(){return t.dk},get startTime(){return t.OP},set startTime(i){t.OP=i},get endTime(){return t.RP},set endTime(i){t.RP=i},get content(){return t.O},addEventListener(t,i){const s=yu(t,To);e.yn(s,i)},removeEventListener(t,i){const s=yu(t,To);e.fn(s,i)}};return e=new Yv(s),t.yn(i,(t=>e.yo(t.ga))),s}function hD(){}function aD(t){return Gr(ei(t),{get align(){return t.PP},get line(){return t.zP},get lineAlign(){return t.BP},get position(){return t.uo},get positionAlign(){return t.UP},get region(){return t.QP?t.QP.ga:null},get size(){return t.qp},get snapToLines(){return t.FP},get text(){return t.O},get vertical(){return t.Pt}})}r(),r();var vh=class extends lh{ma(){return new uD(this.CP.ga)}constructor(t){super(ko.PE,t)}},uD=class extends oh{constructor(t){super("update",t)}};r();var gh=class extends Ii{ma(){return new cD(this.CP.ga)}constructor(t){super(Ct.bE),this.CP=t}},cD=class extends Vn{constructor(t){super("updatecue"),this.cue=t}},lD=.02;function dD(t,i){return Xs(t.YP,i.YP,lD)&&Xs(t.VP,i.VP,lD)&&t.o===i.o}var Bh=class extends Bo{get OP(){return this.GP}set OP(t){var i,e;this.GP!==t&&(this.GP=t,null==(i=this.WP)||i.ZP(this),this.yo(new vh(this)),null==(e=this.WP)||e.yo(new gh(this)))}get RP(){return this.HP}set RP(t){var i,e;this.HP!==t&&(this.HP=t,null==(i=this.WP)||i.ZP(this),this.yo(new vh(this)),null==(e=this.WP)||e.yo(new gh(this)))}get o(){return this.Nb}get dk(){return this.SP}get ga(){return this.Za||(this.Za=this.ma()),this.Za}ma(){return ei(this)}get Yh(){return this.Kh}set Yh(t){this.Kh=t}get Lt(){return this.WP}set Lt(t){this.WP=t}get O(){return this.qP}set O(t){var i;this.qP!==t&&(this.qP=t,this.yo(new vh(this)),null==(i=this.WP)||i.yo(new gh(this)))}get KP(){return this.JP}set KP(t){this.JP=t}$P(t){return this===t||yS(this,t)&&dD(this,t)&&this.tz(t)}tz(t){return V(this.O,t.O)}iz(t,i){this.GP=t,this.HP=i,this.YP=t,this.VP=i}gn(){this.Bo()}constructor(t,i,e,s,n){super(),this.Za=void 0,this.WP=void 0,this.Kh=!1,this.ez=-1,this.SP=qI(),this.GP=t,this.HP=i,this.YP=t,this.VP=i,this.qP=e,this.JP=Boolean(s),this.Nb=null!=n?n:""}};function fD(t,i){return t.O===i.O&&t.zP===i.zP&&t.BP===i.BP&&t.uo===i.uo&&t.UP===i.UP&&t.QP===i.QP&&t.FP===i.FP&&t.qp===i.qp&&t.PP===i.PP&&t.Pt===i.Pt}var Sh=class extends Bh{get ga(){return this.Za||(this.Za=aD(this)),this.Za}get Hw(){return eD.kP}tz(t){return fD(this,t)}constructor(t,i,e,s,n){super(t,i,e,s,n),this.zP="auto",this.BP="start",this.uo="auto",this.UP="auto",this.QP=void 0,this.FP=!0,this.qp=100,this.PP="center",this.Pt=""}};function gD(t){const i=t.zP,e=Fn(i);return e&&!t.FP&&(i<0||i>100)?100:e?Number(i):t.FP?-1:100}function _D(t){return oD(t.uo,t.PP)}function vD(t){return rD(t.UP,t.PP)}function wD(t){const i=vD(t),e=_D(t);let s;switch(i){case"line-left":s=100-e;break;case"line-right":s=e;break;case"center":s=e<=50?2*e:2*(100-e)}return x.min(t.qp,s)}function mD(t){return{get id(){return t.o},get identifier(){return t.o},get lines(){return t.nz},get regionAnchorX(){return t.rz},get regionAnchorY(){return t.oz},get scrollValue(){return t.cz},get viewportAnchorX(){return t.lz},get viewportAnchorY(){return t.fz},get width(){return t.ji}}}r(),r();var pD=class{get ga(){return this.Za||(this.Za=mD(this)),this.Za}get Hw(){return eD.LP}constructor(t,i,e,s,n,r,o,h){this.o=t,this.ji=i,this.nz=e,this.rz=s,this.oz=n,this.lz=r,this.fz=o,this.cz=h}};r(),r();var nr=1e6,AD=class{gz(t){return this._z()*t}vz(t){return this.wz(t)>0}mz(t){return this.wz(t)>=0}pz(t,i){return this.yz(t).Az(i)}$P(t){return 0===this.wz(t)}bz(t){return this.wz(t)<0}Az(t){return this.wz(t)<=0}Mz(){return this.Tz()?this.Sz():this}Nz(t){return this.yP(t.Sz())}yz(t){return this.Nz(t).Mz()}};function yD(t,i){return t.Iz()?i.Iz()?R.Zr:R.dm:i.Iz()?R.fm:t.Dz()?i.Dz()&&t.Tz()===i.Tz()?R.Zr:t.Tz()?R.fm:R.dm:i.Tz()?R.dm:R.fm}r(),r();var bD=4294967296,MD=bD*bD,TD=MD*MD,SD=TD/2,M=class t{static Ez(i,e,s){return s?new t(i.toUnsigned(),e.toUnsigned()):new t(i.toSigned(),e.toSigned())}static kz(i){return i.unsigned?new t(i,Io.UZERO):new t(i,i.isNegative()?Io.NEG_ONE:Io.ZERO)}static Lz(i,e){if(j(i))return e?t.xz:t.Cz;if(e){if(i<0)return t.xz;if(i>=TD)return t.jz}else{if(i<=-SD)return t.Oz;if(i+1>=SD)return t.Rz}return i<0?t.Lz(-i,e).Sz():t.Ez(Io.fromNumber(i%MD),Io.fromNumber(i/MD),e)}Pz(){return this.zz.unsigned}Bz(){return this.Uz.isZero()&&this.zz.isZero()}Tz(){return this.zz.isNegative()}Qz(){return this.Pz()?t.Ez(this.Uz,this.zz,!1):this}Fz(){return this.Pz()?this:t.Ez(this.Uz,this.zz,!0)}Yz(){return this.Uz}_z(){return this.Tz()?-this.Sz()._z():this.zz.toNumber()*MD+this.Uz.toUnsigned().toNumber()}Vz(){return this.Uz.toInt()}$P(t){return(this.Pz()===t.Pz()||this.zz.getHighBits()>>>31!=1||t.zz.getHighBits()>>>31!=1)&&(this.zz.toUnsigned().eq(t.zz.toUnsigned())&&this.Uz.toUnsigned().eq(t.Uz.toUnsigned()))}wz(t){if(this.$P(t))return R.Zr;const i=this.Tz(),e=t.Tz();if(i&&!e)return R.fm;if(!i&&e)return R.dm;if(!this.Pz())return this.Nz(t).Tz()?R.fm:R.dm;const s=this.Fz(),n=t.Fz(),r=n.zz.comp(s.zz);return r>0||0===r&&n.Uz.gt(s.Uz)?R.fm:R.dm}bz(t){return this.wz(t)<0}Az(t){return this.wz(t)<=0}Gz(t){return this.wz(t)>0}Wz(t){return this.wz(t)>=0}Zz(){return new t(this.Uz.not(),this.zz.not())}Xz(i){return new t(this.Uz.and(i.Uz),this.zz.and(i.zz))}qz(i){return new t(this.Uz.or(i.Uz),this.zz.or(i.zz))}Kz(i){const e=127&i;return 0===e?this:e<64?t.Ez(this.Uz.shl(e),this.zz.shl(e).or(this.Uz.shru(64-e)),this.Pz()):t.Ez(Io.ZERO,this.Uz.shl(e-64),this.Pz())}Jz(i){const e=127&i;return 0===e?this:e<64?t.Ez(this.Uz.shru(e).or(this.zz.shl(64-e)),this.zz.shr(e),this.Pz()):t.Ez(this.zz.shr(e-64),this.zz.isNegative()?Io.NEG_ONE:Io.ZERO,this.Pz())}$z(i){const e=127&i;return 0===e?this:e<64?t.Ez(this.Uz.shru(e).or(this.zz.shl(64-e)),this.zz.shru(e),this.Pz()):64===e?t.Ez(this.zz,Io.ZERO,this.Pz()):t.Ez(this.zz.shru(e-64),Io.ZERO,this.Pz())}yP(i){const e=this.zz.high>>>16,s=65535&this.zz.high,n=this.zz.low>>>16,r=65535&this.zz.low,o=this.Uz.high>>>16,h=65535&this.Uz.high,a=this.Uz.low>>>16,u=65535&this.Uz.low,c=i.zz.high>>>16,l=65535&i.zz.high,d=i.zz.low>>>16,f=65535&i.zz.low,g=i.Uz.high>>>16,_=65535&i.Uz.high,v=i.Uz.low>>>16;let w=0,m=0,p=0,A=0,y=0,b=0,M=0,T=0;T+=u+(65535&i.Uz.low),M+=T>>>16,T&=65535,M+=a+v,b+=M>>>16,M&=65535,b+=h+_,y+=b>>>16,b&=65535,y+=o+g,A+=y>>>16,y&=65535,A+=r+f,p+=A>>>16,A&=65535,p+=n+d,m+=p>>>16,p&=65535,m+=s+l,w+=m>>>16,m&=65535,w+=e+c,w&=65535;const S=this.Pz(),N=Io.fromBits(p<<16|A,w<<16|m,S),I=Io.fromBits(M<<16|T,y<<16|b,S);return t.Ez(I,N,S)}Nz(t){return this.yP(t.Sz())}Sz(){return this.Zz().yP(t.tB)}iB(i){if(this.Bz()||i.Bz())return this.Pz()?t.xz:t.Cz;if(this.Tz())return i.Tz()?this.Sz().iB(i.Sz()):this.Sz().iB(i).Sz();if(i.Tz())return this.iB(i.Sz()).Sz();if(this.zz.isZero()&&0===this.Uz.high&&i.zz.isZero()&&0===i.Uz.high)return t.kz(this.Uz.multiply(i.Uz));const e=Io.fromBits(4294967295,0,!0),s=this.Uz.and(e),n=this.Uz.shru(32),r=this.zz.and(e),o=this.zz.shru(32),h=i.Uz.and(e),a=i.Uz.shru(32),u=i.zz.and(e),c=i.zz.shru(32);let l=Io.UZERO,d=Io.UZERO,f=Io.UZERO,g=Io.UZERO;l=l.add(s.mul(h)),d=d.add(l.shru(32)),l=l.and(e),d=d.add(n.mul(h)),f=f.add(d.shru(32)),d=d.and(e),d=d.add(s.mul(a)),f=f.add(d.shru(32)),d=d.and(e),f=f.add(r.mul(h)),g=g.add(f.shru(32)),f=f.and(e),f=f.add(n.mul(a)),g=g.add(f.shru(32)),f=f.and(e),f=f.add(s.mul(u)),g=g.add(f.shru(32)),f=f.and(e),g=g.add(o.mul(h)).add(r.mul(a)).add(n.mul(u)).add(s.mul(c)).and(e);const _=Io.fromBits(l.getLowBitsUnsigned(),d.getLowBitsUnsigned(),!0),v=Io.fromBits(f.getLowBitsUnsigned(),g.getLowBitsUnsigned(),!0);return t.Ez(_,v,this.Pz())}eB(i){let e,s,n=i;if(n.Bz())throw new RangeError("division by zero");if(this.Bz())return this.Pz()?[t.xz,t.xz]:[t.Cz,t.Cz];if(this.Pz()){if(n.Pz()||(n=n.Fz()),n.Gz(this))return[t.xz,this];if(n.Gz(this.$z(1)))return s=t.sB,e=this.Nz(n),[s,e];s=t.xz}else{if(this.$P(t.Oz)){if(n.$P(t.tB)||n.$P(t.nB))return[t.Oz,t.Cz];if(n.$P(t.Oz))return[t.tB,t.Cz];{const i=this.Jz(1).rB(n).Kz(1);return i.$P(t.Cz)?s=n.Tz()?t.tB:t.nB:(e=this.Nz(n.iB(i)),s=i.yP(e.rB(n))),e=this.Nz(n.iB(s)),[s,e]}}if(n.$P(t.Oz))return this.Pz()?[t.xz,this]:[t.Cz,this];if(this.Tz())return n.Tz()?this.Sz().eB(n.Sz()):([s,e]=this.Sz().eB(n),[s.Sz(),e.Sz()]);if(n.Tz())return[s,e]=this.eB(n.Sz()),[s.Sz(),e.Sz()];s=t.Cz}for(e=this;e.Wz(n);){let i=x.max(1,x.floor(e._z()/n._z()));const r=x.ceil(x.log(i)/x.LN2),o=r<=48?1:2**(r-48);let h=t.Lz(i),a=h.iB(n);for(;a.Tz()||a.Gz(e);)i-=o,h=t.Lz(i,this.Pz()),a=h.iB(n);h.Bz()&&(h=t.tB),s=s.yP(h),e=e.Nz(a)}return[s,e]}rB(t){return this.eB(t)[0]}oB(t){return this.eB(t)[1]}toString(i){const e=i||10;if(e<2||e>36)throw new RangeError("radix");if(this.Bz())return"0";if(this.Tz()){if(this.$P(t.Oz)){const i=t.Lz(e),s=this.rB(i),n=s.iB(i).Nz(this);return s.toString(e)+n.Vz().toString(e)}return"-"+this.Sz().toString(e)}const s=t.Lz(e**6,this.Pz());let n=this,r="";for(;;){const t=n.rB(s);let i=(n.Nz(t.iB(s)).Vz()>>>0).toString(e);if(n=t,n.Bz())return i+r;for(;i.length<6;)i="0"+i;r=String(i)+r}}constructor(t,i){this.Uz=t,this.zz=i}};M.Cz=M.kz(Io.ZERO),M.xz=M.kz(Io.UZERO),M.tB=M.kz(Io.ONE),M.sB=M.kz(Io.UONE),M.nB=M.kz(Io.NEG_ONE),M.Rz=M.Ez(Io.NEG_ONE,Io.MAX_VALUE,!1),M.jz=M.Ez(Io.MAX_UNSIGNED_VALUE,Io.MAX_UNSIGNED_VALUE,!0),M.Oz=M.Ez(Io.ZERO,Io.MIN_VALUE,!1),r();var Cs=class t{get Dz(){return!isFinite(this.hB)}get sd(){return this.hB/this.eC}static aB(i){return new t(x.ceil(i.hB),i.eC)}static uB(i){return new t(x.floor(i.hB),i.eC)}static cB(t,i){return t.mz(i)?t:i}static lB(t,i){return t.Az(i)?t:i}yP(i){return this.eC>=i.eC?new t(this.hB+i.dB(this.eC).hB,this.eC):new t(this.dB(i.eC).hB+i.hB,i.eC)}vz(t){return t.bz(this)}mz(t){return t.Az(this)}yz(i){if(this.eC>=i.eC){const e=x.abs(this.hB-i.dB(this.eC).hB),s=this.eC;return new t(e,s)}return i.yz(this)}pz(t,i){return this.yz(t).Az(i)}wz(t){return function(t,i){return t.eC>=i.eC?bv(t.hB,i.dB(t.eC).hB):bv(t.dB(i.eC).hB,i.hB)}(this,t)}$P(t){return 0===this.wz(t)}bz(t){return this.wz(t)<0}Az(t){return this.wz(t)<=0}dB(i){return new t(this.hB*(i/this.eC),i)}Nz(i){return this.eC>=i.eC?new t(this.hB-i.dB(this.eC).hB,this.eC):new t(this.dB(i.eC).hB-i.hB,i.eC)}fB(i){return new t(this.hB*i,this.eC)}constructor(t,i=1){this.hB=t,this.eC=i}};Cs.ed=new Cs(1/6,1),Cs.Cz=new Cs(0),Cs.gB=new Cs(1/0),Cs._B=1e6;var fi=class t extends AD{static vB(i,e){return void 0===e&&(e=nr),t.Lz(i*e,e)}static Lz(i,e){return j(i)?t.wB:i===1/0?t.mB:i===-1/0?t.pB:new t(Io.fromNumber(i),e)}static kz(i,e){return new t(i,e)}static AB(i){return t.vB(i.sd,nr)}static yB(i){return new t(Io.fromNumber(i.getTime()),1e3)}static cB(t,i){return t.mz(i)?t:i}static lB(t,i){return t.Az(i)?t:i}static bB(i,e,s){return t.cB(e,t.lB(s,i))}Tz(){return this.lI.isNegative()}Bz(){return 0!==this.eC&&this.lI.isZero()}Dz(){return 0===this.eC&&!this.lI.isZero()}Iz(){return 0===this.eC&&this.lI.isZero()}_z(){if(0===this.eC)return this.lI.isZero()?NaN:this.lI.isNegative()?-1/0:1/0;const t=this.lI.divide(this.eC),i=this.lI.subtract(t.multiply(this.eC));return t.toNumber()+i.toNumber()/this.eC}Yz(){if(0===this.eC)throw new g("Failed to convert timestamp");return this.lI}MB(){return new Date(0===this.eC?NaN:this.dB(1e3).lI.toNumber())}TB(){return new Cs(0===this.eC?this._z():this.lI.toNumber(),this.eC)}dB(i,e){void 0===e&&(e=ri.SB);const s=this.eC;if(s===i)return this;if(0===s)return this;const n=hf(s,i),r=function(t,i,e){const[s,n]=t.eB(i);if(n.Bz())return s;if(e===ri.SB)return n.Tz()?s.Nz(M.tB):s;if(e===ri.NB)return n.Tz()?s:s.yP(M.tB);{const t=n.iB(M.Lz(2));return t.Tz()?t.Sz().bz(i)?s:s.Nz(M.tB):t.bz(i)?s:s.yP(M.tB)}}(M.kz(this.lI).iB(M.Lz(i/n)),M.Lz(s/n),e);return new t(r.Yz(),i)}wz(t){if(this===t)return R.Zr;if(0===this.eC||0===t.eC)return yD(this,t);if(this.Bz())return t.Bz()?R.Zr:t.Tz()?R.dm:R.fm;if(t.Bz())return this.Tz()?R.fm:R.dm;const i=x.min(this.eC,t.eC),e=this.dB(i,ri.IB).lI,s=t.dB(i,ri.IB).lI;return e.compare(s)}Sz(){return 0===this.eC?function(t){0;return t.Iz()?t:t.Tz()?fi.mB:fi.pB}(this):new t(this.lI.negate(),this.eC)}yP(i){if(0===this.eC||0===i.eC)return function(t,i){0;if(t.Iz()||i.Iz())return fi.wB;if(t.Dz()&&i.Dz())return t.Tz()===i.Tz()?t:fi.wB;return t.Dz()?t:i}(this,i);if(this.Bz())return i;if(i.Bz())return this;const e=x.max(this.eC,i.eC),s=this.dB(e,ri.IB),n=i.dB(e,ri.IB);return new t(s.lI.add(n.lI),e)}iB(i){if(this.Iz()||j(i))return t.wB;if(this.Dz()||!isFinite(i)){if(this.Bz()||0===i)return t.wB;{const e=this.Tz()?t.pB:t.mB;return i<0?e.Sz():e}}return this.Bz()?this:new t(0===i?Io.ZERO:this.lI.multiply(i),this.eC)}rB(i){if(this.Iz()||j(i))return t.wB;if(this.Dz())return isFinite(i)?0===i?1/i<0?this.Sz():this:i<0?this.Sz():this:t.wB;if(!isFinite(i))return new t(Io.ZERO,this.eC);if(this.Bz())return 0===i?t.wB:new t(Io.ZERO,this.eC);if(0===i){const e=this.Tz()?t.pB:t.mB;return 1/i<0?e.Sz():e}return new t(this.lI.divide(i),this.eC)}DB(){return[this.lI.low,this.lI.high,this.eC]}constructor(t,i){super(),this.lI=t.toSigned(),this.eC=i>>>0}};fi.Cz=new fi(Io.ZERO,nr),fi.wB=new fi(Io.ZERO,0),fi.mB=new fi(Io.ONE,0),fi.pB=new fi(Io.NEG_ONE,0),r();var ND=class t extends AD{static vB(i,e){return void 0===e&&(e=nr),t.Lz(i*e,e)}static Lz(i,e){return j(i)?t.wB:i===1/0?t.mB:i===-1/0?t.pB:new t(BigInt(x.floor(i)),e)}static kz(i,e){return new t(BigInt(i.high)<<BigInt(32)|BigInt(i.low>>>0),e)}static AB(i){return t.vB(i.sd,nr)}static yB(i){return t.Lz(i.getTime(),1e3)}static get Cz(){return t.EB||(t.EB=new t(BigInt(0),nr)),t.EB}static get wB(){return t.kB||(t.kB=new t(BigInt(0),0)),t.kB}static get mB(){return t.LB||(t.LB=new t(BigInt(1),0)),t.LB}static get pB(){return t.xB||(t.xB=new t(BigInt(-1),0)),t.xB}static cB(t,i){return t.mz(i)?t:i}static lB(t,i){return t.Az(i)?t:i}static bB(i,e,s){return t.cB(e,t.lB(s,i))}Tz(){return this.lI<BigInt(0)}Bz(){return 0!==this.eC&&this.lI===BigInt(0)}Dz(){return 0===this.eC&&this.lI!==BigInt(0)}Iz(){return 0===this.eC&&this.lI===BigInt(0)}_z(){if(0===this.eC)return this.lI===BigInt(0)?NaN:this.lI<BigInt(0)?-1/0:1/0;const t=this.lI/BigInt(this.eC),i=this.lI-t*BigInt(this.eC);return Number(t)+Number(i)/this.eC}Yz(){if(0===this.eC)throw new g("Failed to convert timestamp");return this.CB()}CB(){const t=this.lI&BigInt(4294967295),i=this.lI>>BigInt(32)&BigInt(4294967295);return Io.fromBits(Number(t),Number(i))}MB(){return new Date(0===this.eC?NaN:Number(this.dB(1e3).lI))}TB(){return new Cs(0===this.eC?this._z():Number(this.lI),this.eC)}dB(i,e){void 0===e&&(e=ri.SB);const s=this.eC;if(s===i)return this;if(0===s)return this;const n=hf(s,i),r=function(t,i,e){const s=t/i,n=t-s*i;if(n===BigInt(0))return s;if(e===ri.SB)return n<BigInt(0)?s-BigInt(1):s;if(e===ri.NB)return n<BigInt(0)?s:s+BigInt(1);{const t=n*BigInt(2);return t<BigInt(0)?-t<i?s:s-BigInt(1):t<i?s:s+BigInt(1)}}(this.lI*BigInt(i/n),BigInt(s/n),e);return new t(r,i)}wz(t){if(this===t)return R.Zr;if(0===this.eC||0===t.eC)return yD(this,t);if(this.Bz())return t.Bz()?R.Zr:t.Tz()?R.dm:R.fm;if(t.Bz())return this.Tz()?R.fm:R.dm;const i=x.min(this.eC,t.eC),e=this.dB(i,ri.IB).lI,s=t.dB(i,ri.IB).lI;return e>s?R.dm:e<s?R.fm:R.Zr}Sz(){return 0===this.eC?function(t){0;return t.Iz()?t:t.Tz()?ND.mB:ND.pB}(this):new t(-this.lI,this.eC)}yP(i){if(0===this.eC||0===i.eC)return function(t,i){0;if(t.Iz()||i.Iz())return ND.wB;if(t.Dz()&&i.Dz())return t.Tz()===i.Tz()?t:ND.wB;return t.Dz()?t:i}(this,i);if(this.Bz())return i;if(i.Bz())return this;const e=x.max(this.eC,i.eC),s=this.dB(e,ri.IB),n=i.dB(e,ri.IB);return new t(s.lI+n.lI,e)}iB(i){if(this.Iz()||j(i))return t.wB;if(this.Dz()||!isFinite(i)){if(this.Bz()||0===i)return t.wB;{const e=this.Tz()?t.pB:t.mB;return i<0?e.Sz():e}}return this.Bz()?this:new t(0===i?BigInt(0):this.lI*BigInt(i),this.eC)}rB(i){if(this.Iz()||j(i))return t.wB;if(this.Dz())return isFinite(i)?0===i?1/i<0?this.Sz():this:i<0?this.Sz():this:t.wB;if(!isFinite(i))return new t(BigInt(0),this.eC);if(this.Bz())return 0===i?t.wB:new t(BigInt(0),this.eC);if(0===i){const e=this.Tz()?t.pB:t.mB;return 1/i<0?e.Sz():e}return new t(this.lI/BigInt(i),this.eC)}DB(){const t=this.CB();return[t.low,t.high,this.eC]}constructor(t,i){super(),this.lI=BigInt.asIntN(64,t),this.eC=i>>>0}};ND.EB=void 0,ND.kB=void 0,ND.LB=void 0,ND.xB=void 0;var ri=function(t){return t[t.SB=0]="SB",t[t.NB=1]="NB",t[t.IB=2]="IB",t}({}),Fu=function(){try{return"function"==typeof BigInt&&"bigint"==typeof BigInt(0)}catch(t){return!1}}()?ND:fi;function ID(t,i){return t.wz(i)}function DD(t,i){return void 0!==t?void 0!==i?Fu.lB(t,i):t:i}r();var ED=9e4,kD=Vc((()=>Fu.Lz(8589934592,ED))),LD=Vc((()=>kD().rB(2)));r();var xD={jB:0,OB:1/0,RB:0},CD=6,jD=["WEBVTT","WEBVTT ","WEBVTT\t","WEBVTT\n"],OD=[" ","\t","\n","\f","\r"],RD=/^\d*$/,PD=/.*[0-9]+.*/,zD=/^[\d.-]+$/,BD=/(^\.|\.$)/,UD=/(\D\.|\.\D)/;function QD(t,i,e){void 0===i&&(i=xD),void 0===e&&(e=!0);return FD(xw(Os(t),new J),i,e)}function FD(t,i,e){void 0===i&&(i=xD),void 0===e&&(e=!0);const s={L:[],PB:[],zB:[]},n=YD(t),r=new J;if(tE(n),mh(n,(t=>"\n"!==t),r),r.tc>=n.length)return s;if(r.Vp(1),"\n"!==n.charAt(r.tc)){HD(VD(n,r,false,!0,s,i,e),s)}else r.Vp(1);for(mh(n,(t=>"\n"===t),r);r.tc<n.length;){HD(VD(n,r,false,!1,s,i,e),s),mh(n,(t=>"\n"===t),r)}return s}function YD(t){const i=ov(t,"\0"," "),e=ov(i,"\r\n","\n");return ov(e,"\r","\n")}function mh(t,i,e){const s=e.tc;for(;e.tc<t.length&&i(t.charAt(e.tc));)e.Vp(1);return t.substring(s,e.tc)}function VD(t,i,e,s,n,r,o){let h,a=0,u=i.tc,c="",l=!1,d=!1,f=null,g=null,_=null;for(;!l;)if(h=mh(t,(t=>"\n"!==t),i),a++,i.tc>=t.length?l=!0:i.Vp(1),Re(h,"--\x3e")){if(s||1!==a&&(2!==a||d)){i.Gp(u);break}d=!0,u=i.tc,f=new Sh(0,0,"",!1,c);try{XD(h,n.PB,f,r,o),c=""}catch(t){me.lw(t),f=null}}else{if(""===h)break;s&&sa(h,"X-TIMESTAMP-MAP")&&(n.BB=GD(h)),s||2!==a||e||(pr("STYLE",c.replace(/ /g,""))?(g={Hw:eD.xP},c=""):pr("REGION",c.replace(/ /g,""))&&(_=new pD("",100,3,0,100,0,100,""),c="")),c&&(c+="\n"),c+=h,u=i.tc}if(f)return f.O=c,f;if(g);else if(_)return function(t,i){const e=t.split(/\s/),s=":";for(const t of e)if(0!==t.length&&Re(t,s)&&t.charAt(0)!==s&&t.charAt(t.length-1)!==s){const e=t.indexOf(s),n=t.substring(0,e),r=t.substring(e+1,t.length);switch(n.toUpperCase()){case"ID":dE(r,i);break;case"WIDTH":_E(r,i);break;case"LINES":gE(r,i);break;case"REGIONANCHOR":{const t=lE(r);t&&(i.rz=t[0],i.oz=t[1]);break}case"VIEWPORTANCHOR":{const t=lE(r);t&&(i.lz=t[0],i.fz=t[1]);break}case"SCROLL":fE(r,i)}}}(c,_),_;return null}function GD(t){const i=t.split("=")[1].trim().split(","),e=ZD(i[0].trim(),"MPEGTS")?i[0]:i[1],s=ZD(i[0].trim(),"LOCAL")?i[0]:i[1];var n;return{UB:WD(Number(e.split(/:(.*)/)[1].trim())||0),lh:Fu.vB(null!=(n=JD(s.split(/:(.*)/)[1].trim(),new J))?n:0)}}function WD(t){return Fu.Lz(t,ED)}function ZD(t,i){return sa(t,i)}function HD(t,i){t&&function(t){return"cue"===t.Hw}(t)?i.L.push(t):t&&function(t){return"region"===t.Hw}(t)?i.PB.push(t):t&&function(t){return"stylesheet"===t.Hw}(t)&&i.zB.push(t)}function XD(t,i,e,s,n){const r=new J;eE(t,r);const o=qD(JD(t,r),s,n);if(eE(t,r),"--\x3e"!==t.substring(r.tc,r.tc+3))throw g("Something went wrong with parsing a WebVTT Cue");r.Vp(3),eE(t,r);const h=qD(JD(t,r),s,n);e.iz(o,h);!function(t,i,e){const s=t.split(/\s/),n=":";for(const t of s)if(0!==t.length&&Re(t,n)&&t.charAt(0)!==n&&t.charAt(t.length-1)!==n){const s=t.indexOf(n),r=t.substring(0,s),o=t.substring(s+1,t.length);switch(r.toUpperCase()){case"REGION":hE(o,i,e);break;case"VERTICAL":uE(o,i);break;case"D":cE(o,i);break;case"LINE":case"L":rE(o,i);break;case"POSITION":case"T":oE(o,i);break;case"SIZE":case"S":aE(o,i);break;case"ALIGN":case"A":nE(o,i)}}}(t.substring(r.tc,t.length),e,i)}function qD(t,i,e){return e?t+i.jB:t}function KD(t){return/^[0-9]$/.test(t)}function JD(t,i){const e=ov(t,",",".");let s,n,r,o=!1;if(i.tc>=e.length||!KD(e.charAt(i.tc)))throw new g("Something went wrong with parsing a WebVTT Cue timestamp");const h=mh(e,KD,i),a=C(h,10);if((h.length>2||a>59)&&(o=!0),i.tc>=e.length||":"!==e.charAt(i.tc))throw new g("Something went wrong with parsing a WebVTT Cue timestamp");i.Vp(1);const u=mh(e,KD,i);if(2!==u.length)throw new g("Something went wrong with parsing a WebVTT Cue timestamp");const c=C(u,10);if(o||i.tc<e.length&&":"===e.charAt(i.tc)){if(i.tc>=e.length||":"!==e.charAt(i.tc))throw new g("Something went wrong with parsing a WebVTT Cue timestamp");i.Vp(1);const t=mh(e,KD,i);if(2!==u.length)throw new g("Something went wrong with parsing a WebVTT Cue timestamp");s=a,n=c,r=C(t,10)}else s=0,n=a,r=c;if(i.tc>=e.length||"."!==e.charAt(i.tc))throw new g("Something went wrong with parsing a WebVTT Cue timestamp");i.Vp(1);const l=mh(e,KD,i),d=C(l,10);if(c>59||r>59)throw new g("Something went wrong with parsing a WebVTT Cue timestamp");return 60*s*60+60*n+r+d/1e3}function $D(t){return tE(YD(t))}function tE(t){if(t.length<CD)return!1;for(const i of jD)if(sa(t,i))return!0;return!1}function iE(t){return fh(OD,t)}function eE(t,i){for(;i.tc<t.length&&iE(t.charAt(i.tc));)i.Vp(1)}function sE(t){const i=t.lastIndexOf("%");if(i>-1){const e=S(t.substring(0,i));if(!j(e)&&e>=0&&e<=100)return e}return null}function nE(t,i){const e=t.toLowerCase();switch(e){case"start":case"center":case"end":case"left":case"right":i.PP=e;break;case"middle":i.PP="center"}}function rE(t,i){let e,s;const n=t.indexOf(",");if(n>=0?(e=t.substring(0,n),s=t.substring(n+1,t.length)):(e=t,s=""),!PD.test(e))return;let r,o;if(Qh(e,"%")){const t=sE(e);if(null===t)return;r=t,o=!1}else{if(!zD.test(e)||e.lastIndexOf("-")>0)return;const t=e.indexOf(".");if(t>=0&&(t!==e.lastIndexOf(".")||!UD.test(e)||BD.test(e)))return;if(r=S(e),j(r))return;o=!0}switch(i.zP=r,i.FP=o,s=s.toLowerCase(),s){case"start":case"center":case"end":i.BP=s;break;case"middle":i.BP="center"}}function oE(t,i){let e,s;const n=t.indexOf(",");n>=0?(e=t.substring(0,n),s=t.substring(n+1,t.length)):(e=t,s="");const r=sE(e);if(null!==r)switch(i.uo=r,s=s.toLowerCase(),s){case"line-left":case"center":case"line-right":case"auto":i.UP=s;break;case"start":i.UP="line-left";break;case"middle":i.UP="center";break;case"end":i.UP="line-right"}}function hE(t,i,e){const s=Sv(e,(i=>i.o===t));void 0!==s&&(i.QP=s)}function aE(t,i){const e=sE(t);null!==e&&(i.qp=e)}function uE(t,i){switch(t.toLowerCase()){case"rl":case"vertical:rl":case"vertical-rl":i.Pt="rl";break;case"lr":case"vertical:lr":case"vertical-lr":i.Pt="lr";break;default:i.Pt=""}}function cE(t,i){"VERTICAL"===t.toUpperCase()?i.Pt="rl":"VERTICAL-LR"===t.toUpperCase()&&(i.Pt="lr")}function lE(t){if(t.indexOf(",")>=0){const i=sE(t.substring(0,t.indexOf(","))),e=sE(t.substring(t.indexOf(",")+1,t.length));return[rh(i||0,0,100),rh(e||100,0,100)]}return null}function dE(t,i){i.o=t}function fE(t,i){"up"===t.toLowerCase()&&(i.cz="up")}function gE(t,i){RD.test(t)&&(i.nz=C(t))}function _E(t,i){const e=sE(t);null!==e&&(i.ji=e)}function vE(t){return t&&"AI"in t?t.AI:t}r(),r(),r();var wE=class extends Bh{get QB(){return this.FB}get YB(){return this.VB}get PB(){return this.GB}get WB(){return this.ZB}get ga(){return this.Za||(this.Za=function(t){return Gr(ei(t),{get extent(){return t.QB},get styles(){return t.YB},get regions(){return t.PB},get metadata(){return vE(t.WB)},get content(){return vE(t.O)}})}(this)),this.Za}tz(t){return!!V(this.QB,t.QB)&&(!!V(this.YB,t.YB)&&(!!V(this.PB,t.PB)&&(this.WB&&t.WB?!!this.WB.dI(t.WB)&&(this.O&&t.O?this.O.dI(t.O):this.O===t.O):this.WB===t.WB)))}constructor(t,i,e,s,n,r,o,h){super(t,i,e,s),this.FB=n,this.VB=r,this.GB=o,this.ZB=h||void 0}};r();var mE=class{get HB(){return this.qT.fI(!0)}get OP(){return this.XB}get RP(){return this.qB}constructor(t,i,e){this.XB=t,this.qB=i,Vr(e)?this.qT=function(t,i,e){for(const t of["begin","end","dur"])e.NI(t);return e}(0,0,e):this.qT=e}};r();var pE="http://www.w3.org/XML/1998/namespace";function AE(t,i,e,s){let n=t.pI(e,i);return 0===n.length&&(n=t.wI(s+":"+i)),n}function yE(t){const i={};for(const e of t.bI)i[e.hI]=e.lI;return i}var bE=/^(\d\d+):(\d\d):(\d+)((\.(\d+))?|(:(\d\d+)(\.(\d+))?))$/,ME=/^(\d+)(\.(\d+))?(h|m|s|ms|f|t)$/,TE="http://www.w3.org/ns/ttml";function SE(t,i,e,s){void 0===e&&(e=xD),void 0===s&&(s=ba.APPLICATION_TTML_XML);let n=[];const r=Os(t);return s===ba.APPLICATION_MP4?n=function(t,i,e){const s=tn.zx(t),n=dr(s,Fo.HL);if(!n)return[];return DE(Os(n.xS),i,e)}(r,i,e):s===ba.APPLICATION_TTML_XML&&(n=DE(r,i,e)),n}function NE(t,i,e){return void 0===e&&(e=xD),EE(t,i,e)}function IE(t,i){const e=RE(i.HB),s={};for(const i of e)s[i]=t[i];return s}function DE(t,i,e){return EE(xw(t,new J),i,e)}function EE(t,i,e){const s=[];let n;try{n=me.oI(t)}catch(t){return s}const r=n.kI;if("tt"!==r.hI)return s;const o=r.pI(TE,"head")[0],h=r.pI(TE,"body")[0];if(!h||!o)return s;const a=LE(r.TI("tts:extent")),u=a?{width:a[0],height:a[1]}:void 0,c=function(t){const i={},e=t.pI(TE,"styling")[0],s=e&&e.pI(TE,"style")||[];for(const t of s){i[t.SI(pE,"id")]=yE(t)}return i}(o),l=function(t){const i={},e=t.pI(TE,"layout")[0],s=e&&e.pI(TE,"region")||[];for(const t of s){const e=t.SI(pE,"id");if(!e)continue;i[e]=yE(t);const s=OE(t);for(const t in s)Ho.call(s,t)&&(i[e][t]=s[t])}return i}(o),d=a?function(t,i){const e=Wa(t);for(const t of _.keys(e)){const s=LE(e[t].extent);if(s){const n=kE(s[0],i[0]),r=kE(s[1],i[1]);e[t].extent=n+" "+r}const n=LE(e[t].origin);if(n){const s=kE(n[0],i[0]),r=kE(n[1],i[1]);e[t].origin=s+" "+r}}return e}(l,a):l,f=o.pI(TE,"metadata")[0],g=xE(h,e.jB,e.OB,e.RB);for(const t of g){const i=IE(d,t);s.push(new wE(t.OP,t.RP,t.HB,!1,u,c,i,f))}return s}function kE(t,i){return t/i*100+"%"}function LE(t){if(!t)return;const i=t.split(" ",2);if(2!==i.length)return;const[e,s]=i;if(!Qh(e,"px")||!Qh(s,"px"))return;return[Number(e.slice(0,-2)),Number(s.slice(0,-2))]}function xE(t,i,e,s){let n,r=i,o=e,h=[];const a=[];if(Vr(t)){var u,c;r=null!=(u=jE(t.TI("begin"),s))?u:r,n=jE(t.TI("dur"),0),o=null!=(c=jE(t.TI("end"),s))?c:void 0!==n?r+n:o;const i=t.gI;for(let e=0;e<i.length;e++)("body"===t.hI||"div"===t.hI)&&i[e].rI>1||(h=h.concat(xE(i[e],r,o,s)))}const l=function(t,i,e){const s=[];s.push(t,i);for(const t of e)s.push(t.OP,t.RP);s.sort(ma);let n=s.length;for(let t=0;t<n-1;t++)s[t+1]===s[t]&&(zr(s,t+1),t--,n=s.length);return s}(r,o,h);for(let i=0;i<l.length-1;i++){const e=CE(l[i],l[i+1],h);if(e.length<=0&&PE(t)){const e=t.fI(!1);a.push(new mE(l[i],l[i+1],e))}else if(e.length>0){const s=t.fI(!1);e.forEach((t=>s.yI(t.HB))),a.push(new mE(l[i],l[i+1],s))}}return a}function CE(t,i,e){const s=[];for(let n=0;n<e.length;n++){const r=e[n].OP,o=e[n].RP;(r>=t&&o<=i||r<i&&o>=i||r<t&&o>t)&&s.push(e[n])}return s}function jE(t,i){if(t){if(bE.test(t)){const e=bE.exec(t);if(!e)return;const s=Number(e[1])||0,n=Number(e[2])||0,r=Number(e[3])||0,o=e[6];return 3600*s+60*n+r+(o?Number(o)*.1**o.length:0)+i}if(ME.test(t)){const e=ME.exec(t);if(!e)return;const s=Number(e[1]);let n;switch(e[4]){case"h":n=3600*s;break;case"m":n=60*s;break;case"s":n=s;break;case"ms":n=.001*s;break;default:n=NaN}return n+i}}}function OE(t){const i={},e=t.wI("style")||[];for(const t of e){const e=yE(t);for(const t in e)Ho.call(e,t)&&(i[t]=e[t])}return i}function RE(t){let i,e=[];if(Vr(t)){i=t.TI("region"),i&&e.push(i);const s=t.gI;for(let t=0;t<s.length;t++)e=e.concat(RE(s[t]))}return e}function PE(t){if(Vr(t)){const i=t.hI.toUpperCase(),e=Boolean(t.TI("smpte:backgroundImage"));return"BR"===i||e}return t.rI===Ua.KM}function zE(t){const i=function(t){try{return me.oI(t).kI}catch(t){}}(t);return"tt"===(null==i?void 0:i.hI)}r(),r();var bn=class extends gS{tt(t){return super.tt(t)}it(t){const i=super.it(t);return i&&(t.gN=P.Ch),i}ma(){return jS(this)}};r(),r();var vs=function(t){return t.KB="subtitles",t.JB="captions",t.$B="descriptions",t.Fn="chapters",t.tU="metadata",t.iU="thumbnails",t}({}),BE=["subtitles","captions","descriptions","chapters","metadata","thumbnails"];function UE(t){return"string"==typeof t&&fh(BE,t)}function QE(t,i){return!(!UE(t)||!UE(i))&&(t===i||"subtitles"===t&&"captions"===i||"captions"===t&&"subtitles"===i)}r();var FE=class extends Ui{constructor(t,i,e,s,n){super(t,i,n),this.url=e,this.status=s}};function YE(t){return t===vs.KB||t===vs.JB}function VE(t){return t.some(GE)}function GE(t){return Re(t,"stpp")}function WE(t){return t.some(ZE)}function ZE(t){return Re(t,"vtt")||Re(t,"wvtt")}function HE(t,i){return ss(t)&&WE(i)}function XE(t,i){return t===vs.iU||t===vs.tU&&i===vs.iU}function qE(t,i,e,s){for(const n of t.L.FE){if(n.OP>e)break;i<=n.RP&&!fh(s,n)&&s.push(n)}}function KE(t,i){return Av(t.dk,i.dk)}function JE(t,i,e,s){const n=function(t){switch(t){case er.WEBVTT:return"WebVTT";case er.SRT:return"SRT";case er.TTML:return"TTML";default:return""}}(t);return new FE(Do.SUBTITLE_PARSE_ERROR,"Could not parse the "+(n?n+" ":"")+"subtitle file.",i,e,s)}function $E(t,i){const e=[];for(const s of t.L.FE)if(s.RP<=i)e.push(s);else if(s.OP>=i)break;for(const i of e)t.eU(i)}function tk(t,i){if(t.U>0){const e=10,s=t.Cn(0),n=x.max(0,s-e);for(const t of i)t.sU(n)}}var ik=class extends Bo{tt(t){t.yn(Ct.aa,this.nU),this.Z.tt(t),this.rU(t)}it(t){t.fn(Ct.aa,this.nU),t.gN=P.Ch,this.Z.it(t)}oU(t){}hU(t){}rU(t){t.gN!==P.Ch?this.oU(t):this.hU(t)}aU(){for(const t of this.Z.FE)t.fn(Ct.aa,this.nU),t.gn()}sU(t){if(t>0)for(const i of this.Z.FE)$E(i,t)}tr(){return this.aU(),this.Z.tr(),Promise.resolve()}async gn(){this.Bo(),await this.tr(),this.Z.gn()}constructor(...t){super(...t),this.Z=new bn,this.nU=t=>{const i=t.Lt;this.rU(i)}}};r();var ek=class extends ps{get error(){return this.errorObject.message}ma(){return this}constructor(t){super(ac.ua),this.errorObject=t}},ch=class extends ik{uU(t){if(!t.src)return;const i=t.kind||vs.KB,e=this.cU.dE(i,t.id,t.label,t.srclang,t.default);return e.yk=Jt(t.src),this.tt(e),e}async lU(t,i){t.OD=ju.LOADING;const e=new _e({Hu:t.yk,CS:Me.KM,hN:Ml.GET,wm:i});let s,n;try{const t=await this.dU.jS(e);n=t.LS,s=await t.dS()}catch(i){return wh(i),t.OD=ju.ERROR,void t.yo(new ek(function(t,i){let e=i,s=0;if(hn(t)&&t.name===th.SN)e=t.jS.Hu;else if(RT(t)){const i=t.kN;if(e=i.US,s=i.LS,0===s)return new FE(Do.SUBTITLE_CORS_ERROR,"Could not load the subtitle file. Make sure the source is set correctly and that CORS support is enabled.",e,s,t)}return new FE(Do.SUBTITLE_LOAD_ERROR,"Could not load the subtitle file.",e,s,t)}(i,t.yk)))}try{const i=function(t){return $D(t)?er.WEBVTT:zE(t)?er.TTML:er.SRT}(s);t.Hw=i;let e=[];if(i===er.WEBVTT||i===er.SRT){e=FD(s).L}else i===er.TTML&&(e=NE(s,t));for(const i of e)t.fU(i)}catch(i){return wh(i),t.OD=ju.ERROR,void t.yo(new ek(JE(t.Hw,t.yk,n,i)))}t.OD=ju.LOADED}oU(t){fh(this.Z.FE,t)&&t.OD===ju.NONE&&this.lU(t,this.gU.wm).catch(bu)}$n(){}async tr(){this.gU.Dm(),this.gU=new Ai;for(const t of this.Z.FE)this.cU._U(t);await super.tr()}constructor(t,i){super(),this.gU=new Ai,this.cU=t,this.dU=i}};function sk(t,i){for(const e of t)if(e.zt===i&&e.vU)return e}function nk(t,i){rk(sk(t.FE,i))}function rk(t){void 0!==t&&(t.gN=P.Jn)}function ok(t,i){const e=sk(t.FE,i)||function(t,i){for(const e of t)if(e.zt===i)return e}(t.FE,i);rk(e)}function Zh(t){for(const i of BE)i===vs.Fn?ok(t,i):nk(t,i)}r(),r();var lr=class extends Gs{constructor(){super(Qi.Ap)}};r(),r();var vl=function(t){return t[t.wU=0]="wU",t[t.mU=1]="mU",t}({});r(),r();var Oa=class extends Gs{constructor(t){super(fa.xO),this.currentTime=t}};r();var fo=class extends Gs{constructor(t){super(fa.CO),this.currentTime=t}},hk=[fa.CE,fa.CO,Qi.so,Qi.vp],li=class extends Bo{pU(t){!this.AU&&t>=$i.Xn&&(this.AU=!0,this.yo(new TI(this.yU.sD,t)))}bU(t){!this.MU&&t>=$i.JR&&(this.MU=!0,this.yo(new SI(this.yU.sD,t)))}TU(t){this.SU||(t>=$i.$R&&this.NU<$i.$R&&!this.yU.TD||this.IU&&t>=$i.$R)&&this.yo(new fo(this.yU.sD))}DU(t){!this.EU(t)||this.yU.hD||this.yU.lt||this.yo(new Oa(this.yU.sD))}kU(t){this.NU<=$i.JR&&t>=$i.$R&&this.yo(new or(this.yU.sD,t))}maybeDispatchCanPlayThroughEvent(t){t===$i.tP&&this.yo(new NI(this.yU.sD,t))}EU(t){const i=!this.yU.TD&&t<=$i.JR,e=!this.LU&&this.NU<=$i.JR;return i&&!e}get IU(){return!this.yU.TD&&this.LU}tr(){this.NU=$i.KR,this.LU=!0,this.MU=!1,this.AU=!1}gn(){this.Bo(),this.SU&&this.yU.fn(fa.CO,this.xU),this.yU.fn(Qi.so,this.CU),this.yU.fn(Qi.vp,this.jU),this.yU.fn(fa.CE,this.OU)}constructor(t,i=!1){super(),this.yU=t,this.SU=i,this.NU=$i.KR,this.LU=!0,this.MU=!1,this.AU=!1,this.OU=t=>{const i=this.yU.OD;i!==this.NU&&this.yo(new hr(t.currentTime,i)),i===$i.KR&&(this.MU=!1,this.AU=!1),this.pU(i),this.bU(i),this.kU(i),this.maybeDispatchCanPlayThroughEvent(i),this.TU(i),this.DU(i),this.NU=i},this.CU=()=>{this.DU(this.NU),this.TU(this.NU),this.LU=this.yU.TD},this.jU=()=>{this.LU=this.yU.TD},this.xU=t=>{this.yo(new fo(t.currentTime))},this.yU.yn(fa.CE,this.OU),this.yU.yn(Qi.so,this.CU),this.yU.yn(Qi.vp,this.jU),this.SU&&this.yU.yn(fa.CO,this.xU)}},ak=class extends Bo{get sD(){return this.yU.sD}get hD(){return this.yU.hD}get lt(){return this.yU.lt}get TD(){return this.yU.TD}get OD(){return this.yU.OD}Mm(){this.Bo(),this.yU.fn(hk,this.Ds)}constructor(t){super(),this.yU=t,this.yU.yn(hk,this.Ds)}};r(),r(),r(),r();var Eh=class{RU(){return this.PU}zU(t){this.PU=t}get GI(){return this.dU}get BU(){return!1}get UU(){const t=this.QU.certificate;if(t)return cs(t)?Vs(t):Ae(t)}FU(){return this.QU.licenseAcquisitionURL||this.RU()}get YU(){return!1}VU(t){return Promise.resolve()}GU(t,i){return Promise.resolve(void 0)}get dN(){return Boolean(this.QU.useCredentials)}async WU(t,i,e,s){const n=this.ZU(t,i,e,s);if(""===n.Hu)throw new ti(Do.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The license request URL has not been correctly configured.");try{const t=await this.GI.jS(n);return await t.fS(i)}catch(t){return wh(t),void await this.HU(t,n.Hu,s)}}ZU(t,i,e,s){const n=this.XU().JM(),r=this.dN,o={Hu:this.qU(),CS:i,RS:n,wS:t,dN:r,hN:Ml.POST,aN:0,wm:s,Hw:as.GS,cN:e};return new _e(o)}KU(t,i){return Promise.resolve(t)}JU(t,i,e,s){return Promise.resolve(t)}XU(){return new Oh(this.QU.headers||{})}async HU(t,i,e){throw new ti(Do.CONTENT_PROTECTION_LICENSE_ERROR,"Error during license server request",t)}qU(t,i){let e=i;const s=this.QU.queryParameters;if(!e){const t=this.FU();if(!t)return"";e=t}if(s||t){const i=me.Ah(e);t&&wT(i,t),s&&wT(i,s),e=i.href}return e}$U(t,i){return uk(t)}tQ(t){return new T(t)}async iQ(t,i,e){const s=await this.$U(t,e),n=await this.WU(s,this.eQ,i,e);return this.tQ(n)}gn(){}constructor(t,i,e,s,n){this.PU=void 0,this.Gb=t,this.sQ=i,this.nQ=e,this.dU=s,this.eQ=n,this.QU=this.rQ(i)}};function uk(t){return Promise.resolve(cu(t).buffer)}var ck=class extends Eh{rQ(t){return t.widevine||{}}async oQ(t,i){return this.UU?this.UU:this.hQ(new T(t),i)}hQ(t,i){return super.iQ(t,jo.XS,i)}constructor(t,i,e,s){super(Oe,t,i,e,s)}};r();var lk=function(t){return t.Vw="Widevine",t.aQ="PlayreadyV2",t.uQ="PlayreadyV3",t.Yw="PlayreadyV2",t.Ww="Fairplay",t}({}),dk={Widevine:{DRMProvider:"Google",DRMVersion:"1.4.8.86",DRMType:"Widevine"},PlayreadyV2:{DRMProvider:"Microsoft",DRMVersion:"2.9",DRMType:"Playready"},PlayreadyV3:{DRMProvider:"Microsoft",DRMVersion:"3",DRMType:"Playready"},Fairplay:{DRMProvider:"Apple",DRMType:"FairPlay",DRMVersion:"1.0"}};function fk(t,i){var e,s,n,r;const o=dk[i],h=t.accountName;return{CustomerName:t.customerName,AccountName:h,PortalId:t.portalId,FriendlyName:t.friendlyName,DeviceInfo:{FormatVersion:"1",DeviceType:"PC",OSType:null==(e=me.Nw)?void 0:e.Ys,OSVersion:null==(s=me.Nw)?void 0:s.Pw,DRMProvider:o.DRMProvider,DRMVersion:o.DRMVersion,DRMType:o.DRMType,DeviceVendor:null==(n=me.Nw)?void 0:n.zw,DeviceModel:null==(r=me.Nw)?void 0:r.Bw}}}function gk(t,i){if(!t.accountName)throw new ti(Do.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium "+i+" DRM configuration, accountName is not set.");if(!t.customerName)throw new ti(Do.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium "+i+" DRM configuration, customerName is not set.");if(!t.portalId)throw new ti(Do.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium "+i+" DRM configuration, portalId is not set.");throw new ti(Do.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium "+i+" DRM configuration.")}function _k(t,i,e){let s;if(IN(t))s={AuthToken:t.authToken,Payload:i};else{if(!DN(t))throw gk(t,e);s={LatensRegistration:fk(t,e),Payload:i}}return Yw(JSON.stringify(s))}async function vk(t,i,e){const s=t.kN;if(!s)throw new ti(Do.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Titanium server request",t,i);const n=s;let r,o;try{r=await n.lS(e),o=function(t){if(t){if(t.WvProxyErr)return t.WvProxyErr.desc;if(t.DrmErr)return t.DrmErr.desc}return}(r)}catch(t){o=""}throw new ti(Do.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Titanium server request",t,n.jS.Hu,n.LS,n.PS,o)}r();var wk=class extends ck{static cQ(){return me.Ys.Nv?"required":"optional"}HU(t,i,e){return vk(t,i,e)}VU(t){return this.lQ?Ic(this.lQ.rA,t):(this.lQ=new pa,Promise.resolve())}async $U(t,i){const e=this.sQ;if(!e)throw new ti(Do.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium Widevine DRM configuration.");return _k(e,Ys(t),lk.Vw)}tQ(t){let i;if(!t.license)throw new ti(Do.CONTENT_PROTECTION_LICENSE_INVALID,"Could not process the response from the Titanium Widevine license server");return i=Vs(t.license),i}dQ(t){return Promise.resolve(new T(t))}async oQ(t,i){this.fQ();const e=await this.$U(t,i),s=await this.WU(e,Me.HM,jo.qS,i);return await this.dQ(s)}async hQ(t,i){const e=await super.hQ(t,i);return this.fQ(),e}fQ(){this.lQ||(this.lQ=new pa),this.lQ.eA()}gn(){this.lQ&&this.lQ.Dm(),super.gn()}constructor(t,i,e){super(t,i,e,Me.XM),this.lQ=void 0}};r();var mk=class extends ck{get gQ(){if(EN(this.sQ))return this.sQ.token}async $U(t,i){const e=await uk(t),s=this.nQ,n=jw(new T(e)),r=this.gQ;if(void 0===r)throw new ti(Do.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The Widevine vuDRM token has not been correctly configured.");return JSON.stringify({token:r,drm_info:n,kid:s})}constructor(t,i,e){super(t,i,e,Me.HM),this.zU("https://widevine-proxy.drm.technology/proxy")}};function pk(t,i){let e=i||{};return t.ticket&&t.sessionId&&(e=il({},e,{SessionId:t.sessionId,Ticket:t.ticket})),il({},e,{CrmId:t.crmId,AccountId:t.accountId,ContentId:t.contentId})}r(),r();var Ak=class extends ck{qU(t,i){let e=t;return TN(this.sQ)&&(e=pk(this.sQ,e)),super.qU(e,i)}constructor(t,i,e){super(t,i,e,Me.HM),this.zU("https://emeademo.dev.ott.irdeto.com/Widevine/getlicense")}};r(),r();var yk="Conax-Custom-Data";function bk(t,i,e){const s=t&&MN(t)&&t;if(s&&!e.has(yk)){const t=aN(s)?s.token:void 0,n=aN(s)?s.deviceId:void 0,r=JSON.stringify({Version:"1.0.0",CxAuthenticationDataToken:t,CxClientInfo:{DeviceType:"Browser",DrmClientType:i+"-HTML5",DrmClientVersion:"1.0.0",CxDeviceId:n}});e.set(yk,r)}return e}var Mk=class extends ck{XU(){const t=super.XU();return bk(this.sQ,"Widevine",t)}constructor(t,i,e){super(t,i,e,Me.HM),this.zU("https://connect.conax.com:8094/license")}};function Tk(t){const i=Cr(new T(t));return Vs(JSON.parse(i).license)}function Sk(t){return"string"==typeof t.token?t.token:Yw(JSON.stringify({userId:t.userId,sessionId:t.sessionId,merchant:t.merchant}))}function Nk(t,i,e){let s;return s=e.token?"x-dt-auth-token":"dt-custom-data",t.set(s,i),t}r(),r();var Ik=class extends ck{get gQ(){return Sk(this.sQ)}tQ(t){return Tk(t)}XU(){return Nk(super.XU(),this.gQ,this.sQ)}constructor(t,i,e){super(t,i,e,Me.HM),this.zU("https://lic.drmtoday.com/license-proxy-widevine/cenc/")}};r();var Dk=class extends ck{XU(){const t=super.XU(),i=this.sQ.token;return t.set("Authorization","Bearer "+i),t}constructor(t,i,e){super(t,i,e,Me.HM)}};async function Ek(t,i,e,s){if(!kN(t))throw new ti(Do.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Xstream DRM Configuration");const n=new Oh;n.append("Cache-Control","no-cache"),n.append("Content-Type","application/json");const r=t.sessionId;r&&n.append("XSSESSION",r);const o=t.streamId;let h;h=t.fairplay?"persistent"===t.fairplay.licenseType?"persistent":"non-persistent":t.widevine&&"persistent"===t.widevine.licenseType?"persistent":"non-persistent";const a={drmType:i,licenseType:h,streamId:o},u={Hu:t.ticketAcquisitionURL,CS:Me.XM,RS:n,hN:Ml.POST,wS:JSON.stringify(a),wm:s},c=await e.jS(u);return await c.lS()}r(),r();var kk=class extends ck{XU(){const t=super.XU();return t.set("Content-Type","application/json"),t}async $U(t,i){const e=Fw(t.buffer),s=this.sQ,n=await Ek(s,"widevine_modular",this.GI,i);this.zU(n.licenseServerUrl);const r=Br(JSON.stringify({payload:e,ticket:n.ticket}));return super.$U(r,i)}tQ(t){return Vs(t.license)}constructor(t,i,e){super(t,i,e,Me.XM)}};r();var Lk=class extends ck{XU(){if(!LN(this.sQ))throw new ti(Do.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Axinom configuration");const t=super.XU();return t.set("X-AxDRM-Message",this.sQ.token),t}constructor(t,i,e){super(t,i,e,Me.HM)}};function xk(t){const i=new T(2*t.length);for(let e=0;e<t.length;e+=1)i[2*e]=t.charCodeAt(e),i[2*e+1]=0;return i}r();var Ck=class extends Eh{rQ(t){return t.playready||{}}XU(){const t=new Oh(this._Q);return t.tT(super.XU()),t}vQ(t){return t.length>=1&&t[0].gI.length>0}GU(t){const i=this.sQ.playready.customData;if(i){const t=xk(i),e=xk('<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">'+Ys(t)+"</CustomData></LicenseAcquisition></PlayReadyCDMData>");return Promise.resolve({playready:{hM:e}})}return super.GU(t)}async $U(t,i){const e=await uk(t);return this.wQ(e)}async wQ(t){var i,e;let s=null;const n=Nw(new DataView(t),new J,!0);let r;try{r=me.oI(n)}catch(t){return s}const o=null==(i=r.wI("PlayReadyKeyMessage")[0])?void 0:i.wI("LicenseAcquisition")[0];var h;const a=null!=(h=null==o?void 0:o.wI("Challenge"))?h:[];this.vQ(a)&&(s=Qw(a[0].MI));const u=new Oh;var c;const l=null!=(c=null==o||null==(e=o.wI("HttpHeaders")[0])?void 0:e.wI("HttpHeader"))?c:[];for(const t of l){const i=t.wI("name")[0].MI,e=t.wI("value")[0].MI;u.append(i,e)}return this._Q=u,s}oQ(t,i){return Promise.resolve(t)}hQ(t,i){return super.iQ(t,jo.KS,i)}constructor(t,i,e){super(J_,t,i,e,Me.HM),this._Q=void 0}};r(),r();var jk=class t{static mQ(t){return"3"===t.version?lk.uQ:lk.aQ}pQ(){const t={};if(this.hb===lk.uQ){const i={LatensRegistration:fk(this.AQ,lk.uQ)};t["X-TITANIUM-DRM-CDATA"]=Yw(JSON.stringify(i))}return t}get yQ(){return this.hb}get tM(){return this.hb===lk.aQ}constructor(i){this.AQ=i,this.hb=t.mQ(i)}};var Ok=class extends Ck{GU(t){const i=this.sQ;if(!this.sQ)throw new ti(Do.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium PlayReady DRM configuration.");if(DN(i)){const t={};return t.playready={hM:Rk(i,this.bQ.yQ)},Promise.resolve(t)}return Promise.reject(gk(i,lk.Yw))}XU(){const t=new Oh(this.bQ.pQ());return t.tT(super.XU()),t}async HU(t,i,e){const s=t.kN;if(!s)throw new ti(Do.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Titanium PlayReady license request",t,i);let n,r;try{const t=await s.gS(e),i=Cr(new T(t)),h=me.oI(i);if(h){const t=function(t,i){return function(t,i){const e=t.m.slice(),s=[];for(;e.length>0;){const t=e.shift();i(t)?s.push(t):e.push(...t.m)}return s}(t,(t=>t.mI===i))}(h,"CustomData");var o;if(t.length>0)n=JSON.parse(t[0].MI),r=null==(o=n.DrmErr)?void 0:o.desc}}catch(t){}throw new ti(Do.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Titanium PlayReady license request",t,i,s.LS,s.PS,r)}vQ(t){if(1!==t.length)throw new ti(Do.CONTENT_PROTECTION_INITIALIZATION_INVALID,"PlayReady license message incorrectly formatted, Challenge not found.");return!0}constructor(t,i,e){super(t,i,e),this.bQ=new jk(this.sQ)}};function Rk(t,i){const e=fk(t,i),s=e.DeviceInfo.FormatVersion,n=function(t){return t.replace(/&lt;/g,"<").replace(/&gt;/g,">")}(function(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}("<TitaniumCustomData>"+Yw('<LatensRegistration formatversion="'+s+'"><AccountName>'+e.AccountName+"</AccountName><CustomerName>"+e.CustomerName+"</CustomerName><PortalID>"+e.PortalId+'</PortalID><DeviceInfo formatversion="'+s+'"><DeviceType>'+e.DeviceInfo.DeviceType+"</DeviceType><OSType>"+e.DeviceInfo.OSType+"</OSType><OSVersion>"+e.DeviceInfo.OSVersion+"</OSVersion><DRMProvider>"+e.DeviceInfo.DRMProvider+"</DRMProvider><DRMVersion>"+e.DeviceInfo.DRMVersion+"</DRMVersion><DRMType>"+e.DeviceInfo.DRMType+"</DRMType><DeviceVendor>"+e.DeviceInfo.DeviceVendor+"</DeviceVendor><DeviceModel>"+e.DeviceInfo.DeviceModel+"</DeviceModel></DeviceInfo></LatensRegistration>")+"</TitaniumCustomData>")),r=kw(n,!0);return kw('<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0"><CustomData encoding="base64encoded">'+Ys(r)+"</CustomData></LicenseAcquisition></PlayReadyCDMData>",!0)}r();var Pk=class extends Ck{get gQ(){if(EN(this.sQ))return this.sQ.token}vQ(t){if(1!==t.length)throw new ti(Do.CONTENT_PROTECTION_INITIALIZATION_INVALID,"Vudrm PlayReady license message incorrectly formatted, Challenge not found.");return!0}qU(t,i){const e=il({},t||{},{token:this.gQ});return super.qU(e,i)}constructor(t,i,e){super(t,i,e),this.zU("https://playready-license.drm.technology/rightsmanager.asmx")}};r();var zk=class extends Ck{qU(t,i){let e=t;return TN(this.sQ)&&(e=pk(this.sQ,e)),super.qU(e,i)}constructor(t,i,e){super(t,i,e),this.zU("https://emeademo.dev.ott.irdeto.com/playready/rightsmanager.asmx")}};r();var Bk=class extends Ck{XU(){const t=super.XU();return bk(this.sQ,"PlayReady",t)}constructor(t,i,e){super(t,i,e),this.zU("https://connect.conax.com:8010/cxplayready/rightsmanager.asmx")}};r();var Uk=class extends Ck{get gQ(){return Sk(this.sQ)}tQ(t){const i=function(t){const i=Cr(new T(t));return sa(i,"<?xml")?0:1}(t);return 1===i?Tk(t):super.tQ(new T(t))}XU(){return Nk(super.XU(),this.gQ,this.sQ)}constructor(t,i,e){super(t,i,e),this.zU("https://lic.drmtoday.com/license-proxy-headerauth/drmtoday/RightsManager.asmx")}};r();var Qk=class extends Ck{XU(){const t=super.XU();return this.MQ&&t.set("Ticket",this.MQ),t.set("Content-Type","text/xml"),t}async $U(t,i){const e=this.sQ,s=await Ek(e,"playready",this.GI,i);return this.zU(s.licenseServerUrl),this.MQ=s.ticket,super.$U(t,i)}constructor(t,i,e){super(t,i,e)}};r();var Fk=class extends Ck{XU(){if(!LN(this.sQ))throw new ti(Do.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Axinom configuration");const t=super.XU();return t.set("X-AxDRM-Message",this.sQ.token),t}};r(),r();var Yk=function(t){return t.XM="application/json",t.TQ="application/x-www-form-urlencoded",t.SQ="application/octet-stream",t.KM="text/plain;charset=UTF-8",t}({}),Ke=class extends Eh{get YU(){return!0}NQ(){return this.QU.certificateURL||this.IQ}DQ(t){this.IQ=t}$U(t){return Promise.resolve(this.EQ(t,this.kQ))}EQ(t,i){return"spc="+encodeURIComponent(Ys(t))+"&assetId="+encodeURIComponent(i)}get LQ(){return Yk.TQ}rQ(t){return t.fairplay||{}}xQ(t){const i=t.indexOf("?");if(i>=0)return Promise.resolve(t.substr(i+1));{const i=t.split("skd://").pop();if(i){if(/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/.test(i))return Promise.resolve(i)}const e=t.split("/");return Promise.resolve(e[e.length-1])}}async GU(t){var i;const e=null!=(i=this.CQ)?i:_r(new T(t)),s=await this.xQ(e);this.kQ=s;const n={};return n.fairplay={vM:s},n}XU(){const t=super.XU();return t.set("Content-Type",this.LQ),t}async oQ(t,i){return this.UU?this.UU:await this.jQ(i)}hQ(t,i){return super.iQ(t,jo.ZS,i)}OQ(t){const i=this.NQ(),e=this.XU(),s={Hu:i,CS:Me.HM,RS:e,hN:Ml.GET,dN:!1,wS:null,aN:0,wm:t,Hw:as.GS,cN:jo.HS};return new _e(s)}async jQ(t){const i=this.OQ(t),e=await this.GI.jS(i),s=await e.gS();return new T(s)}tQ(t){let i;if("string"==typeof t){let e=t.trim();"<ckc>"===e.substr(0,5)&&"</ckc>"===e.substr(-6)&&(e=e.slice(5,-6)),i=Vs(e)}else i=new T(t);return i}qU(t,i){let e=super.qU(t,i);return sa(e,"skd:")&&(e=e.substr(4)),e}constructor(t,i,e,s,n){super(t.Gb,i,e,s,n),this.kQ="",this.IQ=void 0,this.CQ=t.RQ}};r();var Vk=class extends Ke{get LQ(){return Yk.SQ}xQ(t){let i=t.split("://",1);return"skd"!==i[0].slice(-3).toLowerCase()?Promise.resolve(""):(i=t.split(";",2),i.length>1?Promise.resolve(i[1]):Promise.resolve(super.xQ(t)))}async $U(t){return t}tQ(t){return new T(t)}qU(t,i){const e=t||{};return e.p1=Du(),super.qU(e,i)}constructor(t,i,e,s){super(t,i,e,s,Me.HM)}};r();var Gk=class extends Ke{get LQ(){return Yk.XM}get gQ(){if(!EN(this.sQ))throw new ti(Do.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Token is required for FairPlay VuDrm.");return this.sQ.token}EQ(t,i){const e={token:this.gQ,contentId:i,payload:Ys(t)};return JSON.stringify(e)}tQ(t){return new T(t)}XU(){const t=super.XU();return t.set("x-vudrm-token",this.gQ),t}constructor(t,i,e,s){super(t,i,e,s,Me.HM),this.zU("https://fairplay-license.drm.technology/license"),this.DQ("https://fairplay-license.drm.technology/certificate")}};r();var Wk="Verimatrix Fairplay license response incorrectly formatted. Invalid json.",Zk="Verimatrix Fairplay license response incorrectly formatted. Ckc not found.",Hk=class extends Ke{tQ(t){const i=function(t){let i;try{i=JSON.parse(t).ckc}catch(t){throw new ti(Do.CONTENT_PROTECTION_LICENSE_INVALID,Wk)}if(!i)throw new ti(Do.CONTENT_PROTECTION_LICENSE_ERROR,Zk);return i}(Cr(new DataView(t)));return super.tQ(i)}constructor(t,i,e,s){super(t,i,e,s,Me.HM)}};r();var Xk=class extends Ke{get LQ(){return Yk.XM}async $U(t){const i=this.sQ;if(!i)throw new ti(Do.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium Fairplay DRM configuration.");return _k(i,Ys(t),lk.Ww)}tQ(t){try{let i;if(cs(t)){const e=t.trim();i=JSON.parse(e)}else i=t;if(i.license){const t=Qw(i.license);return new T(t)}throw new ti(Do.CONTENT_PROTECTION_LICENSE_ERROR,"No license received from the Titanium Fairplay license server")}catch(t){throw new ti(Do.CONTENT_PROTECTION_LICENSE_INVALID,"Could not process the response from the Titanium Fairplay license server")}}HU(t,i,e){return vk(t,i,e)}constructor(t,i,e,s){super(t,i,e,s,Me.XM)}};r();var qk=class extends Ke{NQ(){const t=super.NQ();if(!t)return t;const i=me.Ah(t),e=this.sQ;return TN(e)&&wT(i,{accountId:e.accountId,applicationId:e.applicationId||""}),i.href}xQ(t){return TN(this.sQ)?Promise.resolve(this.sQ.contentId):super.xQ(t)}async $U(t){return t}tQ(t){return new T(t)}get LQ(){return Yk.SQ}qU(t,i){let e=t;return TN(this.sQ)&&(e=function(t,i){return il({},pk(t,i),{KeyId:t.keyId})}(this.sQ,e)),super.qU(e,i)}constructor(t,i,e,s){super(t,i,e,s,Me.HM),this.zU("https://emeademo.dev.ott.irdeto.com/streaming/getckc"),this.DQ("https://emeademo.dev.ott.irdeto.com/streaming/getcertificate")}};r();var Kk=class extends Ke{XU(){const t=super.XU();return bk(this.sQ,"FairPlay",t)}async jQ(t){const i={Hu:this.NQ(),CS:Me.HM,RS:{},hN:Ml.GET,dN:!1,wS:null,aN:0,wm:t,Hw:as.GS,cN:jo.HS},e=await this.GI.jS(i),s=await e.gS();return new T(s)}async $U(t){return t}xQ(t){const i=t.indexOf("?");if(0===t.indexOf("skd://")){let e;return e=i>=0?t.substring(6,i):t.substring(6),Promise.resolve(function(t){return Cr(Vs(t))}(e))}return Promise.resolve("unknown")}tQ(t){try{const i=JSON.parse(t);return new T(Qw(i.CkcMessage))}catch(t){throw new g("CFLRW-66")}}constructor(t,i,e,s){if(super(t,i,e,s,Me.KM),!MN(i))throw new ti(Do.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Conax configuration");this.zU("https://connect.conax.com:8097/license")}};r();var Jk=class extends Ke{xQ(t){return sa(t,"skd://")?Promise.resolve(t.substring(6,40)):Promise.reject(new ti(Do.CONTENT_PROTECTION_INITIALIZATION_INVALID,"Error while determining the KeyOS Content ID."))}EQ(t,i){return"spc="+Ys(t)+"&assetId="+i}constructor(t,i,e,s){super(t,i,e,s,Me.KM),this.zU(wN[Fs.Ww])}};r();var $k=class extends Ke{get gQ(){return Sk(this.sQ)}EQ(t,i){const e="spc="+encodeURIComponent(Ys(t))+"&"+encodeURI(i);return"persistent"===this.QU.licenseType?e+"&offline=true":e}XU(){return Nk(super.XU(),this.gQ,this.sQ)}constructor(t,i,e,s){super(t,i,e,s,Me.KM),this.zU("https://lic.drmtoday.com/license-server-fairplay/")}};r();var tL=class extends Ke{xQ(t){let i=t;return sa(i,"skd:")&&(i="http:"+i.substring(4)),sa(i,"http:")||sa(i,"https:")?Promise.resolve(me.Ah(i).hostname):Promise.reject(new g("Could not parse ExpressPlay FairPlay content ID."))}async $U(t){return t}tQ(t){return new T(t)}get LQ(){return Yk.SQ}constructor(t,i,e,s){super(t,i,e,s,Me.HM)}};r();var iL=class extends Ke{XU(){const t=super.XU(),i=this.sQ.token;return t.set("Authorization","Bearer "+i),t}constructor(t,i,e,s){super(t,i,e,s,Me.KM)}};r();var eL=class extends Ke{async jQ(t){const i=this.NQ(),e=this.XU(),s={Hu:i,CS:Me.XM,RS:e,hN:Ml.POST,wm:t,Hw:as.GS,cN:jo.HS},n=await this.GI.jS(s),r=await n.lS();return new T(Vs(r.certificate))}get LQ(){return Yk.XM}async hQ(t,i,e){void 0===e&&(e=Me.KM);const s=Ys(t),n=this.sQ,r=await Ek(n,"fairplay",this.GI,i),o=Br(JSON.stringify({spc:s,ticket:r.ticket})),h={Hu:this.FU(),CS:Me.XM,RS:this.XU(),hN:Ml.POST,wS:o,aN:0,wm:i,Hw:as.GS,cN:jo.ZS},a=await this.GI.jS(h);return Vs((await a.lS()).licence)}constructor(t,i,e,s){if(super(t,i,e,s,Me.XM),!kN(i))throw new g("Invalid Xstream DRM configuration")}};r();var sL=class extends Ke{EQ(t,i){return Ys(t)}tQ(t){if(0===t.length)throw new ti(Do.CONTENT_PROTECTION_LICENSE_ERROR,"Vimond license request error.");return super.tQ(t)}XU(){const t=super.XU();return t.set("Content-Type","text/plain"),t}constructor(t,i,e,s){super(t,i,e,s,Me.KM)}};r();var nL=class extends Ke{get LQ(){return Yk.XM}EQ(t,i){return t}tQ(t){return new T(t)}XU(){if(!LN(this.sQ))throw new ti(Do.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Axinom configuration");const t=super.XU();return t.set("X-AxDRM-Message",this.sQ.token),t}constructor(t,i,e,s){super(t,i,e,s,Me.HM)}};r();var rL=class extends Ke{get LQ(){return Yk.KM}EQ(t,i){const e={spc:Ys(t)};return JSON.stringify(e)}xQ(t){const i=me.Ah(t);return this.zQ=t,i.searchParams.has("b")?Promise.resolve(i.searchParams.get("b")):Promise.reject(new ti(Do.CONTENT_PROTECTION_INITIALIZATION_INVALID,"Error during license server request: Could not extract content id"))}qU(t,i){let e=this.FU();return!e&&this.zQ&&(e=this.zQ),e&&(e=e.replace("skd://","https://")),super.qU(t,i||e)}tQ(t){try{let i;if(i=cs(t)?JSON.parse(t.trim()):t,i.ckc)return Vs(i.ckc)}catch(t){throw new ti(Do.CONTENT_PROTECTION_LICENSE_INVALID,"Could not process the response from the Uplynk Fairplay license server")}throw new ti(Do.CONTENT_PROTECTION_LICENSE_ERROR,"No license received from the Uplynk Fairplay license server")}constructor(t,i,e,s){super(t,i,e,s,Me.XM),this.zQ=void 0}};r(),r(),r();var Ba=class{BQ(t){return this.UQ(t)}QQ(t,i){throw new w(i+" must be "+this.FQ+". (Received: "+t+")")}constructor(t,i){this.UQ=t,this.FQ=i}},$=(new Ba((function(t){return!0}),"any"),new Ba(Fn,"a number")),rl=new Ba(cs,"a string"),oL=new Ba(md,"a boolean"),ru=(new Ba(pd,"a date"),new Ba(wd,"undefined")),_h=new Ba(jl,"an object"),hL=new Ba((function(t){return null===t}),"null");new Ba((function(t){return null==t}),"null or undefined");function aL(t,i){throw new w(i+" has an incorrect type")}var uL=class{BQ(t){if(!jl(t))return!1;for(const i of _.keys(this.$v)){if(!this.$v[i].BQ(t[i]))return!1}return!0}QQ(t,i){if(!jl(t))throw new w(i+" must be an object.");for(const e of _.keys(this.$v)){const s=this.$v[e];if(!s.BQ(t[e]))return s.QQ(t[e],i+"."+String(e))}throw new w}constructor(t){this.$v=t}};function Dc(t){return new uL(t)}function cL(t){return _.keys(t).map((i=>t[i]))}var lL=class{BQ(t){return fh(this.qd,t)}QQ(t,i){return aL(0,i)}constructor(t){this.qd=t}};function dL(t){return new lL(t)}var fL=class{BQ(t){return this.YQ.some((i=>i.BQ(t)))}QQ(t,i){return aL(0,i)}constructor(t){this.YQ=t}};function oa(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];return new fL(i)}var gL=class{BQ(t){return Kc(t)&&t.every((t=>this.VQ.BQ(t)))}QQ(t,i){if(!Kc(t))throw new w(i+" must be an array.");for(let e=0;e<t.length;e++){const s=t[e];this.VQ.BQ(s)||this.VQ.QQ(s,i+"["+e+"]")}return aL(0,i)}constructor(t){this.VQ=t}};function hc(t){return new gL(t)}var _L=class{BQ(t){return jl(t)&&_.keys(t).every((i=>this.VQ.BQ(t[i])))}QQ(t,i){if(!jl(t))throw new w(i+" must be an object.");for(const e of _.keys(t))if(!this.VQ.BQ(t[e]))return this.VQ.QQ(t[e],i+"."+e);return aL(0,i)}constructor(t){this.VQ=t}};function vL(t){return new _L(t)}var wL=class{BQ(t){return this.VQ().BQ(t)}QQ(t,i){return this.VQ().QQ(t,i)}constructor(t){this.VQ=Vc(t)}};var mL=Dc({responseCode:$,isException:oL,description:rl,title:rl,correlationId:rl});async function pL(t,i,e,s,n){const r=function(t,i,e,s){const n={token:i.token,account:i.accountId,form:"json"},r=decodeURIComponent(qr(e,n)),o=new Oh({});o.append("Content-Type","application/json");const h=Ys(t),a={getFairplayLicense:{releasePid:i.releasePid,spcMessage:h}};return{Hu:r,CS:Me.KM,RS:o,hN:Ml.POST,wS:JSON.stringify(a),wm:s,Hw:as.GS,cN:jo.ZS}}(t,i,e,n);return await async function(t,i){const e=await i.jS(t),s=await e.lS();if(mL.BQ(s))throw new ti(Do.CONTENT_PROTECTION_LICENSE_ERROR,s.description,void 0,t.Hu,s.responseCode);return Vs(s.getFairplayLicenseResponse.ckcResponse)}(r,s)}var AL=class extends Ke{xQ(t){const i=t.replace("FairPlay",this.GQ.releasePid);return super.xQ(i)}async hQ(t,i){return await pL(t,this.GQ,this.FU(),this.GI,i)}constructor(t,i,e,s){super(t,i,e,s,Me.HM),this.GQ=i}};r();var yL=class extends Eh{rQ(t){return t.clearkey||{}}async WU(t,i,e,s){const n=this.QU;if(this.FU())return super.WU(t,this.eQ,e,s);if(n.keys&&n.keys.length){const t={keys:n.keys.map((t=>{let i=t;return i||(i={}),{kty:"oct",kid:i.id,k:i.value}}))};return Er(JSON.stringify(t)).buffer}throw new ti(Do.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The clearkey license has not been configured correctly.")}oQ(t,i){return Promise.resolve(new T(0))}async hQ(t,i){const e=await super.iQ(t,jo.JS,i),s=JSON.parse(_r(e));if(s.keys)for(const t of s.keys)t.k&&(t.k=iw(t.k)),t.kid&&(t.kid=iw(t.kid));return Er(JSON.stringify(s))}constructor(t,i,e){super(ev,t,i,e,Me.HM)}};r();var bL=class extends ck{};r(),r();var ML={url:"",method:"GET",headers:{},body:null,useCredentials:!1};async function TL(t,i,e){const s=LL(i),n=t.onCertificateRequest;if(!n||"function"!=typeof n)return Promise.resolve(i);const r=await Ic(Promise.resolve(n.call(t,s)),e);return Cw(r)?Ae(r):kL(il({},ML,r))}async function SL(t,i,e,s,n){const r=t.onCertificateResponse,o=EL(i,e,s);if(!r||"function"!=typeof r)return Promise.resolve(i);return Ae(await Ic(Promise.resolve(r.call(t,o)),n))}async function NL(t,i,e,s){const n=await async function(t,i,e,s){const n=null==t?void 0:t.onLicenseRequest,r=DL(i,e);if(!n||"function"!=typeof n)return Promise.resolve(r);0;const o=await Ic(Promise.resolve(n.call(t,r)),s);if(Cw(o))return Ae(o).buffer;return il({fairplaySkdUrl:void 0},ML,o)}(t,i,e,s);return n instanceof ArrayBuffer?n:kL(n)}async function IL(t,i,e,s,n,r){const o=DL(e,n),h=await async function(t,i,e,s,n){const r=null==t?void 0:t.onLicenseResponse,o=EL(i,e,s);if(!r||"function"!=typeof r)return Promise.resolve(i);0;const h=await Ic(Promise.resolve(r.call(t,o)),n);return Ae(h)}(t,new T(i),o,s,r);return Ae(h)}function DL(t,i){return il({},LL(t),{fairplaySkdUrl:i})}function EL(t,i,e){return{url:e.US,status:e.LS,statusText:e.PS,headers:e.RS.JM(),body:t,request:i}}function kL(t){return new _e({Hu:t.url,hN:t.method,RS:t.headers,wS:t.body,dN:t.useCredentials})}function LL(t){var i;return{url:t.Hu,body:null!=(i=xL(t.wS))?i:null,headers:t.RS.JM(),method:t.hN,useCredentials:t.dN}}function xL(t){if(t)return"string"==typeof t?Er(t):t instanceof ArrayBuffer?new T(t):Pw(t)?se(t):void 0}var CL=class extends Ck{oQ(t,i){return Promise.resolve(t)}async hQ(t,i){const e=await this.wQ(cu(t).buffer),s=this.ZU(e,Me.HM,jo.KS,i),n=await NL(this.WQ,s,void 0,i);if(n instanceof ArrayBuffer)return new T(n);if(""===n.Hu)throw new ti(Do.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The license request URL has not been correctly configured.");try{const t=await this.GI.jS(n),e=await t.gS(i);return await IL(this.WQ,e,s,t,void 0,i)}catch(t){throw wh(t),new ti(Do.CONTENT_PROTECTION_LICENSE_ERROR,"Error during PlayReady license request",t)}}constructor(t,i,e,s){super(t,i,e),this.WQ=s}};r();var jL=class extends bL{async oQ(t,i){if(this.UU)return this.UU;const e=this.ZU(t,Me.HM,jo.qS,i),s=await TL(this.WQ,e,i);if(s instanceof T)return s;if(""===s.Hu)throw new ti(Do.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The certificate request URL has not been correctly configured.");let n,r;try{n=await this.GI.jS(s),r=await n.gS(i)}catch(t){throw wh(t),new ti(Do.CONTENT_PROTECTION_CERTIFICATE_ERROR,"Error during Widevine certificate request",t)}const o=DL(e,void 0);return await SL(this.WQ,new T(r),o,n,i)}async hQ(t,i){const e=this.ZU(t,Me.HM,jo.XS,i),s=await NL(this.WQ,e,void 0,i);if(s instanceof ArrayBuffer)return new T(s);if(""===s.Hu)throw new ti(Do.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The license request URL has not been correctly configured.");try{const t=await this.GI.jS(s),n=await t.gS(i);return await IL(this.WQ,n,e,t,void 0,i)}catch(t){throw wh(t),new ti(Do.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Widevine license request",t)}}constructor(t,i,e,s){super(t,i,e,Me.HM),this.WQ=s}};r();var OL=class extends Ke{async oQ(t,i){if(this.UU)return this.UU;const e=this.OQ(i),s=await TL(this.WQ,e,i);if(Pw(s))return s;try{const t=await this.GI.jS(s),n=await t.gS(),r=DL(e,void 0);return await SL(this.WQ,new T(n),r,t,i)}catch(t){throw wh(t),new ti(Do.CONTENT_PROTECTION_CERTIFICATE_ERROR,"Error during FairPlay certificate request",t)}}async hQ(t,i){const e=this.ZU(t,Me.HM,jo.ZS,i),s=await NL(this.WQ,e,this.ZQ,i);if(s instanceof ArrayBuffer)return new T(s);if(""===s.Hu)throw new ti(Do.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The license request URL has not been correctly configured.");try{const t=await this.GI.jS(s),n=await t.gS(i);return await IL(this.WQ,n,e,t,this.ZQ,i)}catch(t){throw wh(t),new ti(Do.CONTENT_PROTECTION_LICENSE_ERROR,"Error during FairPlay license request",t)}}xQ(t){var i;return this.ZQ=t,(null==(i=this.WQ)?void 0:i.extractFairplayContentId)?Promise.resolve(this.WQ.extractFairplayContentId(t)):super.xQ(t)}constructor(t,i,e,s,n){super(t,i,e,s,Me.HM),this.WQ=n}},RL=class{HQ(t,i,e,s){switch(t.Gb.Hw){case Fs.Vw:return this.XQ(i,e,s);case Fs.Yw:return this.qQ(i,e,s);case Fs.Ww:return this.KQ(t,i,e,s);case Fs.Gw:default:return this.JQ(i,e,s)}}XQ(t,i,e){const s=function(t){return t.integration===nN&&cs(t.customIntegrationId)}(t)?t.customIntegrationId:t.integration;if(s&&qc.Jk.Xk(s,V_)){const n=qc.Jk.Kk(s,V_,t);return new jL(t,i,e,n)}switch(s){case Wn:return new wk(t,i,e);case HS:return new mk(t,i,e);case ZS:return new Ak(t,i,e);case GS:return new Mk(t,i,e);case qS:return new Ik(t,i,e);case JS:return new Dk(t,i,e);case $S:return new kk(t,i,e);case iN:return new Lk(t,i,e);default:return new bL(t,i,e,Me.HM)}}qQ(t,i,e){const s=t.integration;if(s&&qc.Jk.Xk(s,Zu)){const n=qc.Jk.Kk(s,Zu,t);return new CL(t,i,e,n)}switch(s){case Wn:return new Ok(t,i,e);case HS:return new Pk(t,i,e);case ZS:return new zk(t,i,e);case GS:return new Bk(t,i,e);case qS:return new Uk(t,i,e);case $S:return new Qk(t,i,e);case iN:return new Fk(t,i,e);default:return new Ck(t,i,e)}}KQ(t,i,e,s){const n=i.integration;if(n&&qc.Jk.Xk(n,Z)){const r=qc.Jk.Kk(n,Z,i);return new OL(t,i,e,s,r)}switch(n){case WS:return new Vk(t,i,e,s);case HS:return new Gk(t,i,e,s);case XS:return new Hk(t,i,e,s);case Wn:return new Xk(t,i,e,s);case ZS:return new qk(t,i,e,s);case GS:return new Kk(t,i,e,s);case zn:return new Jk(t,i,e,s);case qS:return new $k(t,i,e,s);case KS:return new tL(t,i,e,s);case JS:return new iL(t,i,e,s);case $S:return new eL(t,i,e,s);case tN:return new sL(t,i,e,s);case iN:return new nL(t,i,e,s);case eN:return new rL(t,i,e,s);case sN:return new AL(t,i,e,s);default:return new Ke(t,i,e,s,Me.KM)}}JQ(t,i,e){return new yL(t,i,e)}$Q(t){return t.Hw===Fs.Yw||t.Hw===Fs.Vw||t.Hw===Fs.Ww||t.Hw===Fs.Gw}tM(t,i){var e;if(t.Hw!==Fs.Yw)return!1;if(Rt(null==(e=i.playready)?void 0:e.customData))return!0;const s=i.integration;return(!s||!qc.Jk.Xk(s,Z))&&(s===Wn&&new jk(i).tM)}cQ(t,i){if(t.Hw!==Fs.Vw)return;const e=i.integration;return e&&qc.Jk.Xk(e,Z)?void 0:e===Wn?wk.cQ():void 0}};r(),r(),r();var PL="theoplayer-stored-network-info-v2",zL=25e5,fc=class{tF(t){var i;const e=null==(i=me.UI)?void 0:i.Jp(t);if(void 0===e)return;const s=JSON.parse(e);if(void 0!==s&&void 0!==s[this.iF]){if(!this.eF(s))return s[this.iF].availableBandwidth;var n;null==(n=me.UI)||n.$p(t,JSON.stringify({}))}}sF(){const t=this.tF(PL);if(void 0!==t)return t;const i=this.tF("theoplayer-stored-network-info");return i?8*i:void 0}eF(t){const i=t[this.iF].storedTimestamp;return!!i&&Du()-i>36e5}nF(t){this.rF=t,this.oF()}hF(){var t;return null!=this.rF||(this.rF=null!=(t=this.sF())?t:zL),this.rF}constructor(){this.iF=HA,this.rF=void 0,this.oF=Gu((()=>{var t;const i={[this.iF]:{availableBandwidth:this.rF,storedTimestamp:Du()}};null==(t=me.UI)||t.$p(PL,JSON.stringify(i))}),1e4)}};fc.K_=new fc,r();var bl=function(t){return t[t.aF=0]="aF",t[t.uF=1]="uF",t[t.cF=2]="cF",t[t.lF=3]="lF",t[t.dF=4]="dF",t[t.fF=5]="fF",t[t.Ek=6]="Ek",t[t.gF=7]="gF",t[t._F=8]="_F",t[t.jk=9]="jk",t[t.vF=10]="vF",t[t.Ok=11]="Ok",t[t.wF=12]="wF",t}({});r();var Nh=class{get mF(){return 0}get pF(){return 0}AF(t){}};r(),r();var BL=class extends Gs{constructor(t){super("contentProtectionsTracked"),this.yF=t}},Xh=class extends Bo{bF(t){this.AQ=t}cQ(t){const i=this.AQ;if(void 0!==i)return this.MF.cQ(t,i)}tM(t){const i=this.AQ;return void 0!==i&&this.MF.tM(t,i)}TF(t){const i={Gb:t.Gb,SF:t.SF||[],NF:t.NF,RQ:t.RQ},e=this.MF.HQ(i,this.AQ||{},t.nQ,this.dU);return i.NF&&e.zU(i.NF),new UL(e)}IF(t){if(!t)return;So(t,(t=>void 0!==t.nQ))&&this.yo(new BL(t))}constructor(t,i=new RL){super(),this.AQ=void 0,this.dU=t,this.MF=i}},UL=class{VU(t){return this.DF.VU(t)}GU(t,i,e){return this.DF.GU(i,e)}YU(){return this.DF.YU||void 0!==this.DF.UU}oQ(t,i){return this.DF.oQ(t,i)}hQ(t,i,e){return i&&this.DF.zU(i),this.DF.hQ(t,e)}Mm(){this.DF.gn()}constructor(t){this.DF=t}};r();var uu=class extends gS{EF(t){this.kF.push(t);for(const i of t.FE)this.tt(i);this.LF(t)}xF(t){Ro(this.kF,t),this.CF(t);for(const i of t.FE)this.jF(i)||this.it(i)}jF(t){for(const i of this.kF)if(i.GE(t))return!0;return!1}LF(t){t.yn(di.gE,this.OF),t.yn(di.vE,this.RF)}CF(t){t.fn(di.gE,this.OF),t.fn(di.vE,this.RF)}gn(){for(;this.kF.length>0;)this.xF(this.kF[0]);super.gn()}ma(){return jS(this)}constructor(t){super(),this.kF=[],this.OF=t=>{this.tt(t.Lt)},this.RF=t=>{const i=t.Lt;this.jF(i)||this.it(i)};for(const i of t)this.EF(i)}};r(),r();var QL,FL={forceSeekOffset:0,maximumOffset:0,maximumPlaybackRate:0,minimumOffset:0,minimumPlaybackRate:0,targetOffset:0},YL=class{get ga(){return null!=this.Za||(this.Za=function(t){return{get enabled(){return t.Rt},set enabled(i){t.Rt=dn(i)},get monitoringLivePlayback(){return t.PF},get currentLatency(){return t.GR},get currentConfiguration(){return function(t){if(void 0!==t)return{get minimumOffset(){return t.minimumOffset},get maximumOffset(){return t.maximumOffset},get targetOffset(){return t.targetOffset},get forceSeekOffset(){return t.forceSeekOffset},get minimumPlaybackRate(){return t.minimumPlaybackRate},get maximumPlaybackRate(){return t.maximumPlaybackRate}}}(t.md)}}}(this)),this.Za}get Rt(){var t,i;return null!=(i=this.Le)?i:Boolean(null==(t=this.zF)?void 0:t.Rt)}set Rt(t){this.Le=t,this.zF&&(this.zF.Rt=t)}get PF(){var t,i;return null!=(i=null==(t=this.zF)?void 0:t.lR)&&i}get GR(){var t;return null==(t=this.zF)?void 0:t.YR}get md(){return this.zF?this.zF.dR:FL}Sa(t){this.zF=t,void 0!==this.Le&&(this.zF.Rt=this.Le)}tr(){this.zF=void 0,this.Le=void 0}};var VL=!(!oi||!oi.TextTrack),GL=class extends G{get GR(){}get BF(){const t=this.jR.KI,i=this.sD;return t.gr(i,.01)}get ht(){return this.oP}get KI(){return this.jR.KI.ws()}get $I(){return this.jR.$I}set $I(t){t&&this.jR.UF(t)}get bt(){return this.kc}get sD(){return void 0!==this.QF?this.QF:this.jR.sD}set sD(t){this.rD(t)}rD(t,i){this.gD&&(this.QF=t),this.jR.Gp(t)}get ct(){return this.jR.ct}get hD(){return this.jR.hD}get lt(){return this.FF}get cD(){return this.YF}get dD(){}get gD(){return this.jR.gD}get vD(){return il({},{cP:0,lP:0,dP:0,fP:0,gP:0,_P:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}},this.jR.wD())}get mD(){return this.jR.mD}set mD(t){this.jR.mD=t}get bD(){return!0}get TD(){return this.jR.TD}get ND(){return this.jR.ND}set ND(t){this.jR.ND=t}get kD(){return this.jR.VF.played}get xD(){return this.GF}set xD(t){this.GF=t,this.WF&&(this.WF.xD=t)}get OD(){return this.jR.OD}get PD(){return this.jR.PD.ws()}get BD(){return this.jR.BD}get ZF(){return this.jR.ZF}get nt(){return this.Ol}get rt(){return this.aP}get FD(){return this.jR.FD}get GD(){return this.jR.GD}get ZD(){return this.jR.ZD}set ZD(t){this.jR.ZD=t}get qD(){return this.HF}get JD(){return this.jR.JD}set JD(t){this.jR.JD=t}get XF(){return this.qF}be(){this.jR.be()}ge(){this.jR.ge()}async wa(t,i,e){re(e),this.kc=t;const s={Hw:vl.wU,yk:t.src,vS:t.type,KF:this.JF(t),xD:this.GF,tY:t.crossOrigin,iY:i.metadata&&i.metadata.title};this.eY.bF(t.contentProtection),this.WF=await this.jR.$n(s),re(e),i.textTracks&&this.sY(i.textTracks),Zh(this.nt)}sY(t){for(const e of t)if(this.jR.nY()&&ui.Ka&&VL&&!XE(e.kind,e.label)&&this.rY(e)){var i;const t=null!=(i=e.kind)?i:vs.KB;this.jR.oY(e.src,t,e.label,e.srclang,e.default)}else{if(void 0===e.src)continue;this.hY.uU(e)}}rY(t){return!t.format||"webvtt"===t.format}async sE(){try{await this.jR.sE()}catch(t){}for(;!this.BF;)await this.jR.Fm(Qi.wp)}eE(){this.jR.eE()}rE(){return void 0!==this.jR.VF.webkitShowPlaybackTargetPicker}oE(){this.jR.VF.webkitShowPlaybackTargetPicker&&this.jR.VF.webkitShowPlaybackTargetPicker()}hE(){this.jR.VF.webkitShowPlaybackTargetPicker&&this.jR.VF.webkitShowPlaybackTargetPicker()}tE(){return this.jR.VF}$D(){return this.jR.ka}_a(){return this.jR.aY}dE(t){return this.jR.uY(t)}async tr(){this.kc=void 0,this.FF=void 0,this.YF=void 0,this.WF=void 0,await this.hY.tr(),this.jR.cY(),await this.jR.tr(),this.lY.tr(),this.xD=this.GF,this.ht.tr(),this.rt.tr(),this.QF=void 0}async gn(){await this.tr(),this.Bo(),this.dY(),this.fY(),this.lY.gn(),this.jR.gY=void 0,await this.vY._Y(this.jR),this.oP.gn(),this.aP.gn(),this.Ol.gn(),await this.hY.gn()}wY(){this.jR.yn(Qi.so,this.Ds),this.jR.yn(Qi.vp,this.Ds),this.jR.yn(Qi.Dp,this.xc),this.jR.yn(Qi.wp,this.Ds),this.jR.yn(Qi.lp,this.Ds),this.jR.yn(Qi.bp,this.Ds),this.jR.yn(Qi.yp,this.mY),this.jR.yn(Qi.tp,this.Ds),this.jR.yn(Qi.mp,this.Ds),this.jR.yn(Qi.Ep,this.Ds),this.jR.yn(Qi.Km,this.Ds),this.jR.yn(Qi.Ap,this.pY),this.jR.yn(fa.CO,this.UR),this.jR.yn(ac.ua,this.AY),this.jR.yn(Qi.Hm,this.Ds),this.jR.yn(Qi.Zm,this.yY),this.jR.VF.addEventListener("webkitcurrentplaybacktargetiswirelesschanged",this.bY)}dY(){this.jR.fn(Qi.so,this.Ds),this.jR.fn(Qi.vp,this.Ds),this.jR.fn(Qi.Dp,this.xc),this.jR.fn(Qi.wp,this.Ds),this.jR.fn(Qi.lp,this.Ds),this.jR.fn(Qi.bp,this.Ds),this.jR.fn(Qi.yp,this.mY),this.jR.fn(Qi.tp,this.Ds),this.jR.fn(Qi.mp,this.Ds),this.jR.fn(Qi.Ep,this.Ds),this.jR.fn(Qi.Km,this.Ds),this.jR.fn(Qi.Ap,this.pY),this.jR.fn(fa.CO,this.UR),this.jR.fn(ac.ua,this.AY),this.jR.fn(Qi.Hm,this.Ds),this.jR.fn(Qi.Zm,this.yY),this.jR.VF.removeEventListener("webkitcurrentplaybacktargetiswirelesschanged",this.bY)}JF(t){if(!t.contentProtection||!t.contentProtection.fairplay)return[];return[{Gb:$_,MY:[{initDataTypes:[$_.qw],videoCapabilities:[{contentType:"video/mp4",encryptionScheme:"cbcs"}]}]}]}TY(){const t=this.jR.VF.audioTracks,i=this.jR.VF.videoTracks;t&&(t.addEventListener("addtrack",this.SY),t.addEventListener("removetrack",this.NY),t.addEventListener("change",this.IY)),i&&(i.addEventListener("addtrack",this.DY),i.addEventListener("removetrack",this.EY),i.addEventListener("change",this.kY))}fY(){const t=this.jR.VF.audioTracks,i=this.jR.VF.videoTracks;t&&(t.removeEventListener("addtrack",this.SY),t.removeEventListener("removetrack",this.NY),t.removeEventListener("change",this.IY)),i&&(i.removeEventListener("addtrack",this.DY),i.removeEventListener("removetrack",this.EY),i.removeEventListener("change",this.kY))}nh(t){for(let i=0;i<t.U;i++){t.VE(i).EP()}}aE(){this.jR.aE()}uE(){}LY(t,i){this.FF||(this.FF=i,this.YF=t,this.yo(new As(t)))}constructor(t,i,e,s,n,r,o=new RL,h=FA()){super(),this.WF=void 0,this.kc=void 0,this.FF=void 0,this.YF=void 0,this.qF=new Nh,this.HF=new YL,this.AY=t=>{const i=t.lt,e=i.code,s=new Ui(YI(e),"Something went wrong during native playback.",i),n=new La(e,s.message,i.message);this.LY(s,n)},this.xc=()=>{this.yo(new H(this.sD,this.$I))},this.mY=t=>{this.TD||(this.QF=void 0),this.yo(t)},this.UR=t=>{this.QF=void 0},this.bY=()=>{this.yo(new iD(this.gD))},this.pY=()=>{this.GD>0&&this.FD>0&&this.yo(new lr)},this.SY=t=>{const i=this.jR.VF.audioTracks;if(i)for(let t=0;t<i.length;t++){const e=i[t];HL(this.oP,e)||this.oP.tt(new JI(e))}},this.NY=t=>{const i=[],e=this.jR.VF.audioTracks;if(e){for(const t of this.oP.FE)XL(e,t.IP)||i.push(t);for(const t of i)this.oP.it(t)}},this.IY=()=>{this.nh(this.oP)},this.DY=t=>{const i=this.jR.VF.videoTracks;if(i)for(let t=0;t<i.length;t++){const e=i[t];HL(this.aP,e)||this.aP.tt(new tD(e))}},this.EY=t=>{const i=[],e=this.jR.VF.videoTracks;if(e){for(const t of this.aP.FE)XL(e,t.IP)||i.push(t);for(const t of i)this.aP.it(t)}},this.kY=()=>{this.nh(this.aP)},this.yY=t=>{this.yo(t),this.LY(t.errorObject,be(t.errorObject))},this.vY=i,this.dU=e,this.hm=h,this.jR=this.vY.xY(Q.iN),this.GF=this.jR.VF.preload,this.lY=new li(this.jR,!0),this.lY.yn(ZN,this.Ds),this.eY=new Xh(e,o),this.jR.gY=this.eY,this.wY(),this.oP=new $e,this.aP=new $e,this.TY(),this.hY=new ch(this.jR,this.dU),this.Ol=new uu([this.jR.nt]),this.ge()}};function WL(t){var i,e;if(!(null==(i=(QL||(QL=oi&&oi.document&&oi.document.createElement("video")),e=QL).canPlayType)?void 0:i.call(e,t.type)))return!1;if(t.useNativePlayback)return!0;const s=ui.Ka||ui.F_;return!t.useManagedMediaSource||!s}var ZL=class{Gk(t,i,e,s,n,r,o){return new GL(t,i,e,s,n,r)}CY(t,i){return WL(t)}jY(t){return ON(t)}OY(){return!1}constructor(){this.RY=bl.wF}};function HL(t,i){for(const e of t.FE)if(e.IP===i)return e}function XL(t,i){for(let e=0;e<t.length;e++)if(t[e]===i)return!0;return!1}var qL=class{static PY(){return this.K_}zY(t){this.BY.push(t)}get RY(){return this.UY.RY}Gk(t,i,e,s,n,r,o){let h=this.UY.Gk(t,i,e,s,n,r,o);for(const t of this.BY)h=t(h,e,s);return h}CY(t,i){return this.UY.CY(t,i)}jY(t){return this.UY.jY(t)}OY(){return!1}constructor(){this.UY=new ZL,this.BY=[]}};function KL(t,i){return Av(t.RY,i.RY)}qL.K_=new qL,r(),r();var JL=class{QY(t){this.FY.push(t),this.FY.sort(KL)}async YY(t,i){for(const e of this.FY){const s=e.CY(t,i);if(yt(s)?await s:Boolean(s))return e}}constructor(){this.FY=[]}};function ki(t){fu.K_.QY(t)}r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r();var fu=class extends JL{VY(t){this.GY=t}WY(){return this.GY}async ZY(t,i){const e=this.GY;let s=!1;for(const n of t){const t=await this.YY(n,i);if(t){if(bN(n.contentProtection)||await t.jY(n.contentProtection))return{wc:n,t:t};n.contentProtection&&(s=!0)}const r=e.CY(n,i);if(yt(r)?await r:Boolean(r)){if(bN(n.contentProtection)||await e.jY(n.contentProtection))return{wc:n,t:e};n.contentProtection&&(s=!0)}}if(s)throw await me.ww()?new Ui(Do.CONTENT_PROTECTION_NOT_SUPPORTED,"Encrypted content over an insecure connection is not supported."):new Ui(Do.CONTENT_PROTECTION_NOT_SUPPORTED,"The DRM configuration is not supported by this platform.");return{wc:t[0],t:e}}constructor(...t){super(...t),this.GY=qL.PY()}};fu.K_=new fu,r();var $L=class{gn(){Xa(this.Us)}constructor(t){this.Us=oi&&oi.document&&oi.document.createElement("div"),Tu(this.Us),t.appendChild(this.Us)}};r(),r();var Ac=function(t){return t.wF="",t.HY="none",t.tU="metadata",t.HR="auto",t}({});var tx=[ac.ua,Qi.Jm,Qi.$m,Qi.jp,Qi.Ym,Qi.ep,Qi.np,Qi.gp,Qi._p,Qi.Tp,Qi.Np,fa.DO,fa.EO,fa.kO,fa.LO,fa.CE,fa.xO,fa.CO,Qi.Zm,Qi.Hm,Qi.Km,Qi.tp,Qi.lp,Qi.dp,Qi.so,Qi.wp,Qi.vp,Qi.mp,Qi.Ap,Qi.bp,Qi.yp,Qi.Dp,Qi.Ep,Qi.pp,Qi.fp,Qi.Mp],ix=class extends G{get ht(){return this.oP}get KI(){return this.ta.KI}get lt(){return this.ta.lt}get cD(){return this.ta.cD}get $I(){return this.ta.$I}set $I(t){this.ta.$I=t}get bt(){return this.XY}get sD(){return this.ta.sD}set sD(t){this.ta.sD=t}get ct(){return this.ta.ct}get hD(){return this.ta.hD}get dD(){return this.hP}get gD(){return this.ta.gD}get vD(){return this.ta.vD}get mD(){return this.ta.mD}set mD(t){this.ta.mD=t}get bD(){return this.ta.bD}get TD(){return this.ta.TD}get ND(){return this.ta.ND}set ND(t){this.ta.ND=t}get kD(){return this.ta.kD}get xD(){return this.GF}set xD(t){this.GF=t,this.ta&&(this.ta.xD=this.GF)}get OD(){return this.ta.OD}get PD(){return this.ta.PD}get BD(){return this.ta.BD}get nt(){return this.Ol}get FD(){return this.ta.FD}get rt(){return this.aP}get GD(){return this.ta.GD}get ZD(){return this.ta.ZD}set ZD(t){this.ta.ZD=t}get qD(){return this.ta.qD}get XF(){return this.ta.XF}eE(){this.ta.eE()}sE(){const t=this.ta.sE();yt(t)&&xe(t)}nE(){return this.wa(void 0)}iE(){}qY(){this.rP.WE=this.ta._a(),this.oP.WE=this.ta.ht,this.aP.WE=this.ta.rt,this.Ol.WE=this.ta.nt,this.hP.WE=this.ta.dD,this.ta.yn(tx,this.Ds)}KY(){this.ta.fn(tx,this.Ds),this.oP.WE=void 0,this.aP.WE=void 0,this.Ol.WE=void 0,this.hP.WE=void 0}Ya(){return this.JY}async wa(t,i){if(re(i),this.JY=t,!t)return;const e=t.sources.filter(bI);if(Ls(e))return;const s=await this.$Y.ZY(e,t);re(i);const n=s.wc,r=s.t,o=this.$D(),h=LI(this);(this.tV!==r||this.lt)&&(this.KY(),await this.ta.gn(),re(i),this.tV=r,this.ta=this.iV(r,n),function(t,i){t.mD!==i.mD&&(t.mD=i.mD);t.ZD!==i.ZD&&(t.ZD=i.ZD);t.ND!==i.ND&&(t.ND=i.ND)}(this.ta,h),ph(this,h,this),this.qY()),this.ta.xD=this.xD,this.eV?this.ta.ge():this.ta.be(),await this.ta.wa(n,t,i),re(i),this.sV(n),this.$D()!==o&&this.yo(new ar)}sV(t){this.XY!==t&&(this.XY=t,this.yo(new jI(t)))}rE(){return this.ta.rE()}oE(){this.ta.oE()}hE(){this.ta.hE()}$D(){return this.ta.$D()}_a(){return this.rP}aE(){this.ta.aE()}uE(){this.ta.uE()}dE(t){return this.ta.dE(t)}async tr(){this.JY=void 0,this.sV(void 0),await this.ta.tr()}async gn(){this.Bo(),await this.tr(),await this.ta.gn(),this.oP.gn(),this.aP.gn(),this.Ol.gn(),this.rP.gn(),this.hP.gn()}ge(){this.eV=!0,this.ta.ge()}be(){this.eV=!1,this.ta.be()}constructor(t,i){super(),this.tV=void 0,this.XY=void 0,this.GF=Ac.HY,this.JY=void 0,this.eV=!0,this.oP=new Dh,this.aP=new Dh,this.Ol=new ci,this.hP=new ah,this.$Y=t,this.ta=i,this.ta.xD=this.xD,this.rP=new Th(i._a()),this.qY()}};r(),r(),r(),r();var El=function(t){return t.aa="fullscreenchange",t.fa="fullscreensupportchange",t.ua="fullscreenerror",t}({});r();var ex=class extends Gs{constructor(){super(El.ua)}},sx=(El.aa,El.fa,El.ua,class extends Bo{get cs(){return!1}get ea(){return!1}co(){this.yo(new ex)}bo(){}gn(){this.Bo()}});r(),r();var xh=class extends Gs{constructor(){super(ra.ua)}},nx=class extends Bo{get nP(){return!1}get sP(){return!1}async co(){this.yo(new xh)}async bo(){this.yo(new xh)}gn(){this.Bo()}},rx=class extends Bo{get $I(){}set $I(t){}get bt(){}get sD(){return this.nV}set sD(t){this.rD(t)}rD(t,i){this.nV!==t&&(this.nV=t,this.rV=!0,this.yo(new ll(this.sD)))}get vD(){return{cP:0,lP:0,dP:0,fP:0,gP:0,_P:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}}}get mD(){return this.oV}set mD(t){this.oV!==t&&(this.oV=t,this.yo(new B(this.sD,this.ZD)))}get TD(){return this.hV}get ND(){return this.aV}set ND(t){this.aV!==t&&(this.aV=t,this.yo(new rr(this.sD,this.ND)))}get BD(){return this.rV}get ZD(){return this.Ay}set ZD(t){this.Ay!==t&&(this.Ay=t,this.yo(new B(this.sD,this.ZD)))}get JD(){return!1}set JD(t){}get XF(){return this.qF}get GR(){}ge(){}be(){}sE(){this.hV&&(this.hV=!1,this.yo(new us(this.sD)),this.yo(new Oa(this.sD)))}eE(){this.hV||(this.hV=!0,this.yo(new H(this.sD,this.$I)),this.yo(new Ia(this.sD)))}wa(t,i){return Promise.resolve()}rE(){return!1}oE(){}hE(){}$D(){return this.Zo}_a(){return this.Qo}dE(t){throw new g("Adding a CustomTextTrack is not supported without setting a source.")}aE(){}uE(){}async tr(){this.nV=0,this.rV=!1,this.eE(),this.yo(new Zi(this.nV))}async gn(){this.Bo(),this.ht.gn(),this.nt.gn(),this.rt.gn()}constructor(...t){super(...t),this.nV=0,this.oV=!1,this.hV=!0,this.aV=1,this.rV=!1,this.Ay=1,this.ht=new $e,this.KI=ge.cR().ws(),this.ct=NaN,this.hD=!1,this.lt=void 0,this.cD=void 0,this.dD=void 0,this.gD=!1,this.bD=!0,this.kD=ge.cR().ws(),this.xD=Ac.HY,this.OD=$i.KR,this.PD=ge.cR().ws(),this.ZF=void 0,this.nt=new bn,this.FD=0,this.rt=new $e,this.GD=0,this.qD=new YL,this.qF=new Nh,this.Zo=new sx,this.Qo=new nx}},ox=class extends rx{set uV(t){this.vY=t,this.jR=t.xY(Q.iN)}tE(){var t;return null==(t=this.jR)?void 0:t.VF}async gn(){await super.gn(),this.jR&&(await this.vY._Y(this.jR),this.jR=void 0)}constructor(...t){super(...t),this.vY=void 0,this.jR=void 0}},hx=class extends ix{get ke(){return this.wu}get JD(){return this.ta.JD}set JD(t){this.ta.JD=t}iE(){super.iE(),this.lV.cV()}ur(t){xI(this,t)}ar(){}cE(t){return!1}async wa(t,i){const e=this.$D(),s=this.tE();await super.wa(t,i),this.$D()!==e&&this.yo(new ar),this.tE()!==s&&this.yo(new OI)}rD(t,i){this.ta.rD(t,i)}iV(t,i){return t.Gk(this.wu,this.lV,this.dU,this.gM,this.dV,this.fV,this.gV,i)}tE(){return this.ta.tE()}qI(){return this.lV._V.map((t=>t.VF))}async gn(){await super.gn(),this.lV.gn(),this.vV.gn()}constructor(t,i,e,s,n,r,o){const h=new ox;super(fu.K_,h),this.wu=t,this.gM=i,this.dU=e,this.dV=s,this.fV=n,this.gV=o,this.lV=new Cn(r,this.gV),this.lV.wV(this.wu),h.uV=this.lV,this.vV=new $L(this.wu)}};r(),r();var ax=class extends G{get ht(){return this.mV}get KI(){return ge.cR().ws()}get $I(){return new Date(NaN)}set $I(t){}get bt(){}get sD(){return 0}set sD(t){}rD(t,i){}get ct(){return 0}get ke(){return this.wu}get hD(){return!0}get lt(){return this.pV}get cD(){return this.AV}get dD(){}get vD(){return{cP:0,lP:0,dP:0,fP:0,gP:0,_P:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}}}get mD(){return!1}set mD(t){}get bD(){return!0}get TD(){return!0}get ND(){return 0}set ND(t){}get kD(){return ge.cR().ws()}get xD(){return Ac.HY}set xD(t){}get OD(){return $i.KR}get PD(){return ge.cR().ws()}get BD(){return!1}get nt(){return this.yV}get FD(){return 0}get rt(){return this.mV}get GD(){return 0}get ZD(){return 1}set ZD(t){}get qD(){return this.HF}get JD(){return!1}set JD(t){}cE(t){return!0}be(){}sE(){throw this.yo(new As(this.AV)),this.pV}eE(){}Ya(){}async wa(t,i){throw re(i),this.yo(new As(this.AV)),this.pV}ge(){}nE(){return Promise.resolve()}tE(){}$D(){return this.Zo}_a(){return this.Qo}qI(){return[]}iE(){}ur(t){}ar(){}get gD(){return!1}rE(){return!1}oE(){}hE(){}aE(){}uE(){}dE(t){}tr(){return Promise.resolve()}gn(){return this.Bo(),this.mV.gn(),this.yV.gn(),Promise.resolve()}constructor(t,i,e){super(),this.Zo=new sx,this.Qo=new nx,this.HF=new YL,this.wu=t,this.pV=i,this.mV=new $e,this.yV=new bn,this.AV=e}};function ux(t){if(t&&jl(t))return il({},t,{integration:cx(t.integration),fairplay:vx(t.fairplay),widevine:lx(t.widevine),playready:dx(t.playready),clearkey:wx(t.clearkey),aes128:mx(t.aes128),integrationParameters:px(t.integrationParameters),preferredKeySystems:Ax(t.preferredKeySystems),useOipfDrmAgent:dn(t.useOipfDrmAgent)})}function cx(t){if(cs(t))return t}function lx(t){if(t&&jl(t))return{persistentState:fx(t.persistentState),distinctiveIdentifier:fx(t.distinctiveIdentifier),audioRobustness:gx(t.audioRobustness),videoRobustness:gx(t.videoRobustness),licenseAcquisitionURL:cs(t.licenseAcquisitionURL)?t.licenseAcquisitionURL:void 0,licenseType:_x(t.licenseType),headers:t.headers,useCredentials:!!md(t.useCredentials)&&t.useCredentials,queryParameters:t.queryParameters,certificate:cs(t.certificate)||Cw(t.certificate)?t.certificate:void 0}}function dx(t){if(!t)return;const i=lx(t);if(!i)return;return il({},i,{customData:cs(t.customData)?t.customData:void 0})}function fx(t){switch(null==t?void 0:t.toLowerCase()){case"required":return"required";case"optional":return"optional";case"not-allowed":return"not-allowed"}}function gx(t){switch(t){case"HW_SECURE_ALL":return"HW_SECURE_ALL";case"HW_SECURE_DECODE":return"HW_SECURE_DECODE";case"HW_SECURE_CRYPTO":return"HW_SECURE_CRYPTO";case"SW_SECURE_DECODE":return"SW_SECURE_DECODE";case"SW_SECURE_CRYPTO":return"SW_SECURE_CRYPTO";case"":return""}}function _x(t){switch(null==t?void 0:t.toLowerCase()){case"temporary":return"temporary";case"persistent":return"persistent"}}function vx(t){if(!t)return;const i=lx(t);if(!i)return;return il({},i,{certificateURL:cs(t.certificateURL)?t.certificateURL:void 0})}function wx(t){if(!t)return;const i=lx(t);if(!i)return;const e=Kc(t.keys)?t.keys.map((t=>function(t){if(!t||!jl(t))return;const i=t.id,e=t.value;if(!cs(i)||!cs(e))return;return{id:i,value:e}}(t))).filter(Rt):void 0;return il({},i,{keys:e})}function mx(t){if(jl(t))return{useCredentials:md(t.useCredentials)?t.useCredentials:void 0}}function px(t){if(jl(t))return t}function Ax(t){return t&&Kc(t)?t.map((t=>CN(t))).filter(Rt):[V_,Zu,Z]}r(),r(),r(),r();var yx={bt:void 0,sD:0,ct:NaN,hD:!1,lt:void 0,cD:void 0,mD:!1,TD:!0,ND:1,OD:$i.KR,BD:!1,FD:0,GD:0,ZD:1};r();var Mi=function(t){return t.DEFAULT="",t.THEO="theo",t.CSAI="csai",t.GOOGLE_IMA="google-ima",t.SPOTX="spotx",t.FREEWHEEL="freewheel",t.MEDIATAILOR="mediatailor",t.THEOADS="theoads",t}({}),Xu=class{get bV(){return this.MV}TV(t){const i=this.MV.filter((i=>i.SV(t)));if(i.length>1)0;else if(0===i.length)throw g("Unknown ad integration: "+t.integration);return i[0]||null}NV(t){this.MV.push(t)}constructor(){this.MV=[]}};Xu.K_=new Xu,r(),r(),r(),r();var bx=function(t){return t.CO="PLAYING",t.DV="PAUSED",t.EV="SEEK",t.kV="STALLED",t.LV="FAILED",t.xV="INITIAL_BUFFERING",t.CV="NO_ACCESS",t}({}),Go=function(t){return t.jV="HTTP_REQUEST_STATUS_CODE_1XX",t.OV="HTTP_REQUEST_STATUS_CODE_2XX",t.RV="HTTP_REQUEST_STATUS_CODE_3XX",t.PV="HTTP_REQUEST_STATUS_CODE_4XX",t.zV="HTTP_REQUEST_STATUS_CODE_5XX",t.BV="BUFFER_LENGTH",t.QV="BYTES_RECEIVED",t.FV="SEGMENT_READ_BITRATE",t.YV="SEGMENT_PROFILE_BITRATE",t.VV="VIDEO_PROFILE_BITRATE",t.GV="NUMBER_OF_FRAMES_DROPPED",t.WV="PLAYBACK_POSITION",t.ZV="NUMBER_OF_FRAMES_DECODED",t.HV="PLAYBACK_DELTA_TO_ORIGIN",t.XV="STREAM_DELTA_TO_ORIGIN",t.qV="ORIGIN_TIMESTAMP",t}({}),nl=function(t){return t.KV="MANIFEST_URI",t.JV="ASSET_DURATION",t.$V="NUMBER_OF_CONTENT_PROFILES",t.tG="CDN",t.iG="CONTENT_TITLE",t.eG="SERVICE_NAME",t.sG="CONTENT_TYPE",t.nG="CONTENT_DESCRIPTION",t}({}),Mx=function(t){return t.rG="shutdown_normal_shutdown",t}({}),Tx=function(t){return t.oG="session/",t.hG="content/",t.aG="internalError/",t.uG="drmError/",t.cG="caError/",t.lG="networkError/",t}({}),Sx=class{get code(){return this.category+this.statusCode}constructor(t,i){this.category=t,this.statusCode=i}},Nx=class extends Bo{};r(),r(),r();var Ix=function(t){return t.PAUSE="dG",t.RESUME="fG",t}({}),Dx=class extends Gs{constructor(){super("gG")}},yo=class extends Bo{_G(){this.vG=!0}wG(){}gn(){this.vG=!1,this.mG.fn(Ix.PAUSE,this.pG),this.mG.fn(Ix.RESUME,this.AG)}yG(){return isFinite(this.ta._d())}constructor(t,i){super(),this.ta=t,this.mG=i,this.vG=!1,this.pG=()=>{this.wG(),this.vG=!1},this.AG=()=>{this.vG=!0},this.mG.yn(Ix.PAUSE,this.pG),this.mG.yn(Ix.RESUME,this.AG)}},Ex=class extends yo{_G(){super._G(),this.bG()}gn(){this.MG(),super.gn()}bG(){this.ta.yn(fa.xO,this.TG),this.ta.yn(Qi.vp,this.SG),this.ta.yn(fa.CO,this.NG),this.ta.yn(Qi.bp,this.IG),this.ta.yn(Qi.yp,this.DG)}MG(){this.ta.fn(fa.xO,this.TG),this.ta.fn(Qi.vp,this.SG),this.ta.fn(fa.CO,this.NG),this.ta.fn(Qi.bp,this.IG),this.ta.fn(Qi.yp,this.DG)}EG(){this.kG=!0}xG(){const t=this.ta.uD(),i=new Sx(Tx.aG,String(t.code));this.CG(bx.LV,i,t.message)}jG(t){this.vG&&(this.mG.OG(t),this.yo(new Dx))}CG(t,i,e){this.mG.zG(t,i,e),this.yo(new Dx)}BG(t,i){this.mG.UG(t,i)}constructor(...t){super(...t),this.kG=!1,this.QG=!1,this.FG=!1,this.TG=()=>{this.QG&&!this.FG&&this.jG(bx.kV)},this.NG=()=>{this.ta.TD||(this.QG||this.BG(new Sx(Tx.hG,"firstFrameDisplayed"),"now"),this.QG=!0,this.jG(bx.CO))},this.SG=()=>{this.ta.TD&&(this.QG=!0,this.jG(bx.DV))},this.IG=()=>{this.kG&&(this.FG=!0,this.kG=!1,this.jG(bx.EV))},this.DG=()=>{this.FG=!1,this.ta.TD&&this.jG(bx.DV)}}};r();var kx=class extends yo{_G(){super._G(),this.YG(),this.bG()}gn(){this.MG(),super.gn()}bG(){this.ta.rt.yn(Ct.aa,this.YG),this.ta.GG.VG(this.WG),this.ta.yn(Qi.Km,this.ZG)}MG(){this.ta.rt.fn(Ct.aa,this.YG),this.ta.GG.HG(this.WG),this.ta.fn(Qi.Km,this.ZG)}XG(t){t.serviceName&&this.qG(nl.eG,t.serviceName),t.cdn&&this.qG(nl.tG,t.cdn),t.contentTitle&&this.qG(nl.iG,t.contentTitle),t.contentType&&this.qG(nl.sG,t.contentType),t.contentDescription&&this.qG(nl.nG,t.contentDescription)}qG(t,i){this.vG&&this.mG.KG(t,i)}constructor(...t){super(...t),this.ZG=()=>{this.yG()&&this.qG(nl.JV,x.round(this.ta._d()))},this.WG=t=>{"manifest"===t.request.type&&this.qG(nl.KV,t.url)},this.YG=()=>{const t=So(this.ta.rt.FE,(t=>t.Rt));t&&this.qG(nl.$V,t.gk.U)}}};r();var Lx=class extends yo{_G(){super._G(),this.JG=this.ta.vD.cP,this.$G=this.ta.vD.dP,this.bG(),this.tW.push(v(this.iW,1e3))}wG(){super.wG(),this.eW()}gn(){this.eW(),this.MG(),this.tW.forEach(m),Or(this.tW),super.gn()}bG(){this.ta.GG.VG(this.sW),this.ta.yn(Qi.Np,this.nW)}MG(){this.ta.GG.HG(this.sW),this.ta.fn(Qi.Np,this.nW)}rW(){this.eW()}oW(t){this.hW+=t,this.aW(Go.QV,this.hW)}uW(t,i){const e=this.cW.get(i)||0;this.aW(t,e)}lW(){const t=this.ta.vD.cP-this.JG;this.aW(Go.GV,t)}dW(){const t=this.ta.vD.dP-this.$G;this.aW(Go.ZV,t)}fW(){const t=fc.K_.hF();this.aW(Go.FV,Ow(t))}gW(t){this.aW(Go.YV,Ow(t)),this.aW(Go.VV,Ow(t))}eW(){if(!this.yG())return;const t=x.round(ia(this.ta.nD()));this.aW(Go.WV,t)}_W(){const t=ge.xn(this.ta.JI()),i=this.ta.nD(),e=t.oR(i),s=e?ia(e.jn(0)-i):0;this.aW(Go.BV,s)}aW(t,i){this.vG&&this.mG.vW(t,i)}constructor(...t){super(...t),this.cW=Ge(),this.hW=0,this.JG=0,this.$G=0,this.tW=[],this.iW=()=>{this.lW(),this.dW(),this._W()},this.nW=t=>{t.lN===Q.iN&&(this.oW(t.gP),this.fW(),this.gW(t.wW),this.eW())},this.sW=t=>{const i=t.status.toString()[0],e=this.cW.get(i)||0;this.cW.set(i,e+1),this.uW(Go.jV,"1"),this.uW(Go.OV,"2"),this.uW(Go.RV,"3"),this.uW(Go.PV,"4"),this.uW(Go.zV,"5")}}};r();function xx(t){return t&&t.integration===zx}function Cx(t){if(!cs(t.asset))throw new w("Agama source configuration: expected 'asset' to be a string");if(!function(t){return!!cs(t)&&("live"===t||"vod"===t)}(t.streamType))throw new w("Agama source configuration: expected 'streamType' to be 'live' or 'vod'");if(void 0!==t.serviceName&&!function(t){return!!cs(t)&&("live"===t||"svod"===t||"nvod"===t||"tvod"===t||"avod"===t||"catchuptv"===t)}(t.serviceName))throw new w("Agama source configuration: expected 'serviceName' to be 'live', 'svod', 'nvod','tvod', 'avod' or 'catchuptv'");if(void 0!==t.cdn&&!cs(t.cdn))throw new w("Agama source configuration: expected 'cdn' to be a string");if(void 0!==t.contentTitle&&!cs(t.contentTitle))throw new w("Agama source configuration: expected 'contentTitle' to be a string");if(void 0!==t.contentType&&!cs(t.contentType))throw new w("Agama source configuration: expected 'contentType' to be a string");if(void 0!==t.contentDescription&&!cs(t.contentDescription))throw new w("Agama source configuration: expected 'contentDescription' to be a string");return t}function jx(t){if(!cs(t.config))throw new w("Agama player configuration: expected 'config' to be a string");if(void 0!==t.logLevel&&!function(t){return!!cs(t)&&("info"===t||"debug"===t||"warning"===t||"error"===t||"fatal"===t)}(t.logLevel))throw new w("Agama player configuration: expected 'logLevel' to be 'info', 'debug', 'warning','error' or 'fatal'");if(void 0!==t.application&&!cs(t.application))throw new w("Agama player configuration: expected 'application' to be a string");if(void 0!==t.applicationVersion&&!cs(t.applicationVersion))throw new w("Agama player configuration: expected 'applicationVersion' to be a string");if(void 0!==t.userAccountID&&!cs(t.userAccountID))throw new w("Agama player configuration: expected 'userAccountID' to be a string");if(void 0!==t.deviceID&&!cs(t.deviceID))throw new w("Agama player configuration: expected 'deviceID' to be a string");return t}function Ox(){let t="00000000-0000-0000-0000-000000000000",i=s.navigator,e=s.screen,n=""+i.mimeTypes.length;n+=i.userAgent.replace(/\D+/g,""),n+=i.plugins.length,n+=e.height||"",n+=e.width||"",n+=e.pixelDepth||"",n+=x.floor(1e3*x.random());let r=function(t){let i,e,s=0;if(0===t.length)return"0";for(i=0;i<t.length;i++)e=t.charCodeAt(i),s=(s<<5)-s+e,s|=0;return x.abs(s).toString().substring(0,12)}(n);return t=[t.slice(0,t.length-r.length),r].join(""),t}function Rx(t,i,e){const s=i,n=function(t,i){return dh(i)?t.DsProtocol.APPLE_HLS:t.DsProtocol.MPEG_DASH}(t,s.type),r=function(t,i){let e=t.DsPlaylistType.VOD;"live"===i&&(e=t.DsPlaylistType.LIVE);return e}(t,e.streamType);return{asset:e.asset,playlistType:r,protocol:n,uri:s.src}}r();var un=function(t){return t.UNAVAILABLE="unavailable",t.AVAILABLE="available",t.CONNECTING="connecting",t.CONNECTED="connected",t}({}),Px=class{mW(){this.ta.fn(ac.ua,this.pW),this.AW(),this.yW(),this.mG.bW()}MW(){this.ta.TW.ga.chromecast&&this.ta.TW.ga.chromecast.addEventListener("statechange",this.NW)}yW(){this.ta.TW.ga.chromecast&&this.ta.TW.ga.chromecast.removeEventListener("statechange",this.NW)}IW(){return void 0!==this.ta.TW.ga.chromecast&&this.ta.TW.ga.chromecast.state===un.CONNECTED}gn(){this.ta.fn(Qi.ro,this.ho),this.ta.fn(Qi.so,this.DW),this.ta.fn(Qi.tp,this.EW),this.mW(),this.mG.gn()}kW(){this.LW||(this.LW=new Ex(this.ta,this.mG)),this.xW||(this.xW=new Lx(this.ta,this.mG)),this.jW||(this.jW=new kx(this.ta,this.mG))}_G(){this.LW&&(this.LW._G(),this.LW.yn("gG",this.OW)),this.xW&&this.xW._G(),this.jW&&this.jW._G()}AW(){this.LW&&(this.LW.fn("gG",this.OW),this.LW.gn(),this.LW=void 0),this.xW&&(this.xW.gn(),this.xW=void 0),this.jW&&(this.jW.gn(),this.jW=void 0)}XG(t){this.jW&&this.jW.XG(t)}RW(){this.LW&&this.LW.xG()}EG(){this.LW&&this.LW.EG()}constructor(t,i,e){this.ta=t,this.mG=i,this.ho=()=>{this.PW(),this.EW()},this.PW=()=>{const t=this.ta.Ya(),i=t&&t.analytics;this.zW=function(t){void 0===t&&(t=[]);for(let i of t)if(xx(i))return Cx(i)}(i)},this.EW=()=>{this.mW(),this.ta.fn(Qi.so,this.DW),!this.IW()&&this.mG.BW()&&this.ta.bt&&this.zW&&(this.kW(),this.ta.TD||this.ta.hD?this.ta.yn(Qi.so,this.DW):this.DW())},this.DW=()=>{this.ta.bt&&this.zW&&(this.mG.UW(this.ta.bt,this.zW),this._G(),this.XG(this.zW),this.MW(),this.ta.yn(ac.ua,this.pW),this.ta.fn(Qi.so,this.DW))},this.NW=()=>{this.IW()&&this.mW()},this.pW=()=>{this.RW(),this.mW()},this.OW=()=>{this.xW&&this.xW.rW()};const s=function(t){void 0===t&&(t=[]);for(const i of t)if(xx(i))return jx(i)}(e.analytics);s&&this.mG.QW()&&(this.mG.iE(s),this.mG.BW()?(this.mG.FW(),this.ta.yn(Qi.ro,this.ho),this.ta.yn(Qi.tp,this.EW)):console.warn("An error occurred while initializing an Agama EMP client. Please check your configuration"))}},zx="agama";r(),r();var fe=function(t){return t.NONE="",t.HORIZONTAL="horizontal",t.VERTICAL="vertical",t}({});r();var Bx=function(t){return t.NONE="",t.PM360="360",t.PM180="180",t}({});function Ux(t){switch(t){case"":return fe.NONE;case"horizontal":return fe.HORIZONTAL;case"vertical":return fe.VERTICAL;default:throw new w}}function Qx(t,i){if(i)return Bx.PM360;if(null==t)return Bx.NONE;switch(t){case"":return Bx.NONE;case"360":return Bx.PM360;case"180":return Bx.PM180;default:throw new w("Provided panoramaMode value is not recognized. Expected '', '360' or '180' but value was "+t)}}r();var Ds=function(t){return t.ASSET="asset",t.CHANNEL="channel",t.EVENT="event",t}({});r();var Fx="https://content.uplynk.com";function Vh(t){if(!t)return!0;const i=!function(t){return wI(t)||ou(t)&&wI(t[0])}(t.sources)||Ls(t.sources),e=!t.ads||Yx(t.ads),s=""!==t.poster&&!t.poster;return i&&e&&s}function Yx(t){return!t||Kc(t)&&0===t.length}function Vx(t){if(t&&t.sources)return Gx(t.sources)}function Gx(t){return cs(t)?aI(t):gs(t)?t.type||t.src&&aI(t.src):ou(t)&&t.length>0?Gx(t[0]):void 0}function Wx(t){if(t&&t.sources)return Zx(t.sources)}function Zx(t){return cs(t)?t:gs(t)?t.src:ou(t)&&t.length>0?Zx(t[0]):void 0}function Hx(t,i,e){return lI(t)?function(t,i,e){let s=il({},mI(),{ping:{adImpressions:!1,freeWheelVideoViews:!1,linearAdData:!1},integration:eI.VERIZON_MEDIA,id:"",prefix:Fx,preplayParameters:{},playbackUrlParameters:{},assetType:Ds.ASSET,contentProtected:!1,assetInfo:!0});s.id=function(t){if(cs(t))return t;if(ou(t)&&cs(t[0]))return t;if(function(t){return jl(t)&&cs(t.userId)&&(ou(t.externalId)||cs(t.externalId))}(t))return t;return""}(t.id),t.preplayParameters&&(s.preplayParameters=t.preplayParameters);t.playbackUrlParameters&&(s.playbackUrlParameters=t.playbackUrlParameters);t.assetType&&(s.assetType=function(t){switch(t){case"channel":return Ds.CHANNEL;case"event":return Ds.EVENT;default:return Ds.ASSET}}(t.assetType));t.contentProtected&&(s.contentProtected=dn(t.contentProtected));t.assetInfo?s.assetInfo=dn(t.assetInfo):s.assetInfo="asset"===s.assetType;t.prefix&&(s.prefix=To(t.prefix)||Fx);return s.ping=function(t,i){let e=!1,s=!1,n=!1;i?(e=!!md(i.adImpressions)&&i.adImpressions,s=!!md(i.freeWheelVideoViews)&&i.freeWheelVideoViews,n=md(i.linearAdData)?i.linearAdData:t!==Ds.ASSET):t!==Ds.ASSET&&(n=!0);return{adImpressions:e,freeWheelVideoViews:s,linearAdData:n}}(s.assetType,t.ping),s=qx(s,t),s=Jx(s,i,e),s=Kx(s,t,e),s}(t,i,e):fI(t)?function(t,i,e){var s;return il({},Xx(t,i,e),{integration:eI.MEDIATAILOR,adParams:null!=(s=t.adParams)?s:{}})}(t,i,e):dI(t)?function(t,i,e){return il({},Xx(t,i,e),{type:"theolive"})}(t,i,e):sh(t)?function(t,i,e){return il({},Xx(t,i,e),{type:vt.Ok,src:t.streamName||t.src,streamAccountId:t.streamAccountId,subscriberToken:t.subscriberToken,connectOptions:iC(t.connectOptions)})}(t,i,e):Xx(t,i,e)}function Xx(t,i,e){let s=pI();const n=i&&(i.contentProtection||i.drm);if(cs(t)){if(s.src=t,s.type=aI(t),n){const t=ux(n);s.contentProtection=PN(t)}}else if(gs(t)||yh(t)||sh(t)){s.src=t.src,s.type=t.type||aI(t.src),s.isAdvertisement=t.isAdvertisement;const i=vI(t)?t.hesp:void 0;void 0!==i&&(s.hesp=i);fI(t)&&(s.integration=t.integration);const e=ux(t.contentProtection||t.drm||n);s.contentProtection=PN(e),t.ssai&&(s.ssai=VS(t.ssai)),s=qx(s,t)}return s=Jx(s,i,e),s=Kx(s,t,e),s}function qx(t,i){var e,s;i.useCredentials?t.crossOrigin=Sn.Ik:i.crossOrigin&&(t.crossOrigin=uI(i.crossOrigin)),cs(i.timeServer)&&(t.timeServer=i.timeServer),i.liveOffset&&(t.liveOffset=i.liveOffset),i.hlsDateRange&&(t.hlsDateRange=i.hlsDateRange),i.lowLatency&&(t.lowLatency=dn(i.lowLatency)),i.useNativePlayback&&(t.useNativePlayback=dn(i.useNativePlayback)),i.useManagedMediaSource&&(t.useManagedMediaSource=dn(i.useManagedMediaSource)),i.dash&&(t.dash=zN(i.dash)),i.hls&&(t.hls=BN(i.hls)),i.lcevc&&(t.lcevc=dn(i.lcevc)),i.ignoreEmbeddedTextTrackTypes&&(t.ignoreEmbeddedTextTrackTypes=MI(i.ignoreEmbeddedTextTrackTypes)),i.latencyConfiguration&&(t.latencyConfiguration=iI(i.latencyConfiguration)),t.seamlessSwitchStrategy=sI(null!=(s=i.seamlessSwitchStrategy)?s:null==(e=i.dash)?void 0:e.useSeamlessPeriodSwitch);const n=At(i.experimentalRendering);void 0!==n&&(t.experimentalRendering=n);const r=At(i.nativeUiRendering);return void 0!==r&&(t.nativeUiRendering=r),t}function Kx(t,i,e){return t.abr=YN(cs(i)?void 0:FN(i.abr),null==e?void 0:e.abr),t}function Jx(t,i,e){var s;const n=i&&i.timeServer;return e&&e.liveOffset&&!Rt(t.liveOffset)&&(t.liveOffset=e.liveOffset),e&&e.hlsDateRange&&!Rt(t.hlsDateRange)&&(t.hlsDateRange=e.hlsDateRange),t.crossOrigin===Sn.nN&&(null==i||null==(s=i.vr)?void 0:s[360])&&(t.crossOrigin=Sn.Nk),t.useCredentials=t.crossOrigin===Sn.Ik,cs(n)&&!t.timeServer&&(t.timeServer=n),t}function $x(t){const i={src:""};if(t&&t.src){if(i.src=To(t.src),"default"in t&&(i.default=dn(t.default)),i.kind=function(t){const i=String(t||"").toLowerCase();return UE(i)?i:i?"metadata":"subtitles"}(t.kind),oI(t.format)&&(i.format=t.format),"srclang"in t){const e=t.srclang;"string"==typeof e&&""!==e&&(i.srclang=e)}if("label"in t){const e=t.label;"string"==typeof e&&""!==e&&(i.label=e)}}return i}function tC(t,i){if(jl(t))try{return i.TV(t).YW(t)}catch(t){return}}function iC(t){if(null==t)return t;if(!jl(t))throw new g("connectOptions must be an object");return t}function Hh(t,i,e){if(void 0===e&&(e=Xu.K_),Vh(t))return{sources:[pI()]};const s=Wa(t);if(s.sources=function(t,i,e){if(wI(t))return[Hx(t,i,e)];if(ou(t)&&wI(t[0])){const s=[];for(const n of t)s.push(Hx(n,i,e));return s}return[pI()]}(s.sources,s,i),"contentProtection"in s&&delete s.contentProtection,"drm"in s&&delete s.drm,"ads"in s){const t=function(t,i){if(!ou(t))return[];const e=[];for(let s of t)s=tC(s,i),s&&e.push(s);return e}(s.ads,e);0===t.length?delete s.ads:s.ads=t}const n=!Ls(s.sources),r=s.ads&&s.ads.length>0;if(n&&!r?delete s.ads:r&&!n&&(s.sources=[]),"textTracks"in s){const t=function(t){if(!ou(t))return[];const i=[];for(let e of t)e=$x(e),""!==e.src&&i.push(e);return i}(s.textTracks);0===t.length?delete s.textTracks:s.textTracks=t}"poster"in s&&(s.poster=To(s.poster)),"streamType"in s&&(s.streamType=function(t){switch(t){case"live":case"dvr":case"vod":return t}}(s.streamType)),"vr"in s&&(s.vr=function(t){const i=t||{};return i.stereoMode=function(t){return function(t){switch(t){case"":case"horizontal":case"vertical":return!0;default:return!1}}(t)?t:""}(i.stereoMode),{panoramaMode:Qx(i.panoramaMode,Boolean(i[360])),stereoMode:i.stereoMode?Ux(i.stereoMode):fe.NONE,nativeVR:Boolean(i.nativeVR)}}(s.vr));if("analytics"in s||(null==i?void 0:i.analytics)){const t=yI(s.analytics),e=i&&i.analytics||[];s.analytics=function(t,i){const e=Wa(t);for(const s of i){const i=!t.some((t=>t.integration===s.integration));i&&s.integration!==zx&&e.push(s)}return e}(t,e)}return"mutedAutoplay"in s&&(s.mutedAutoplay=EI(s.mutedAutoplay)),"timeServer"in s&&delete s.timeServer,"playAdsAfterTime"in s&&(s.playAdsAfterTime=yn(s.playAdsAfterTime)),s.blockContentIfAdError=function(t){return void 0!==t&&"boolean"==typeof t&&Boolean(t)}(s.blockContentIfAdError),s}r(),r(),r();var eC=function(){function t(t){this.VW=t}return t.prototype.GW=function(t){var i,e,s,n,r,o,h,a=[];if(!t)return"";var u=t.length%4;if(u>0)for(;u++<4;)t+=this.VW.charAt(64);for(i=0;i<t.length;i+=4)e=(h=this.VW.indexOf(t.charAt(i))<<18|this.VW.indexOf(t.charAt(i+1))<<12|(r=this.VW.indexOf(t.charAt(i+2)))<<6|(o=this.VW.indexOf(t.charAt(i+3))))>>>16&255,s=h>>>8&255,n=255&h,a[i/4]=String.fromCharCode(e,s,n),64===o&&(a[i/4]=String.fromCharCode(e,s)),64===r&&(a[i/4]=String.fromCharCode(e));return a.join("")},t.prototype.WW=function(t,i){var e,s,n,r,o,h,a,u=[],c="";if((h=t.length%3)>0)for(;h++<3;)c+=this.VW.charAt(64),t+="\0";for(h=0;h<t.length;h+=3)s=(e=t.charCodeAt(h)<<16|t.charCodeAt(h+1)<<8|t.charCodeAt(h+2))>>18&63,n=e>>12&63,r=e>>6&63,o=63&e,u[h/3]=this.VW.charAt(s)+this.VW.charAt(n)+this.VW.charAt(r)+this.VW.charAt(o);return a=(a=u.join("")).slice(0,a.length-c.length),i||(a+=c),a},t.lh=new t(function(){var t,i,e,s,n=[],r=["object","$","undefined","function","Cannot find module '","MODULE_NOT_FOUND","*","com.widevine.alpha","urn:mpeg:dash:mp4protection:2011","^","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed","__proto__","@@iterator","getUTCHours","setUTCFullYear","25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?","SegmentBase","RateChangeEvent","Symbol(","Symbol.",'; codecs="'];for(t=0;t<r.length;t+=1)for(i=r[t],e=0;e<i.length;e+=1)s=i.charAt(e),-1===n.indexOf(s)&&n.push(s);return n.join("")}()),t.ZW=new t(function(t){return t.GW("aDtm.Dd_DE.4DuN$CeaD $t?FUa0ac'NlYsgU]dU*|sMCON9NL.i'YU M:.LiEb5TLaTOu18F|'v*:s7C41nOMop")}(t.lh)),t}();function sC(t){return"string"==typeof t}function nC(t){return"number"==typeof t}r(),r(),r();var rC={}.toString;var ue,oC=Array.isArray||function(t){return"[object Array]"===rC.call(t)};function hC(t,i){return oC(t)&&t.every(i)}!function(t){t.HTML5="html5",t.ANDROID="android",t.IOS="ios",t.TVOS="tvos",t.ANDROIDTV="androidtv",t.TIZEN="tizen",t.WEBOS="webos",t.CHROMECAST="chromecast",t.ROKU="roku",t.FIRETV="firetv",t.CHROMECASTCAF="chromecastcaf",t.THEOLIVEWEB="theoliveweb",t.KEPLER="kepler"}(ue||(ue={}));var Mh,aC=_.keys(ue).map((function(t){return ue[t]}));function uC(t){return-1!==aC.indexOf(t)}!function(t){t.HESP="hesp",t.MULTIVIEW="multiview",t.THEOADS="theoads",t.MILLICAST="millicast"}(Mh||(Mh={}));var cC,lC=_.keys(Mh).map((function(t){return Mh[t]}));function dC(t){return-1!==lC.indexOf(t)}function fC(t){try{var i=eC.ZW.GW(t),e=JSON.parse(i);if(!function(t,i){var e,s=function(t){return"object"==typeof t&&null!==t}(t),n=sC(t.key),r=sC(t.customer_id),o=nC(t.generation_date),h=nC(t.expiration_date),a=hC(t.domains_page,sC),u=hC(t.domains_source,sC),c=hC(t.sdks,i?uC:sC),l=function(t){return"boolean"==typeof t}(t.send_impression);t.features?e=hC(t.features,i?dC:sC):(e=!0,t.features=[]);if(!(s&&n&&r&&o&&h&&a&&u&&c&&l&&e))return!1;return!0}(e,!1))throw new g("The provided license could not be decoded correctly.");return e}catch(t){throw new g("The provided license could not be decoded correctly.")}}function gC(){return cC||(cC={Hu:bf.href,XW:oi.parent&&oi.parent!==s,qW:vC()}),cC}var _C=["http:","https:","ftp:","ws:","wss:"];function vC(){var t;try{if(null==oi?void 0:oi.top)return oi.top.location.href}catch(t){}return null==oi||null==(t=oi.document)?void 0:t.referrer}var wC=function(t){return t[t.KW=0]="KW",t[t.JW=1]="JW",t[t.$W=2]="$W",t}({}),mC=class{constructor(t,i,e,s,n=[],r="",o=Date.now(),h=[],a=!0){this.tZ=t,this.iZ=i,this.eZ=e,this.sZ=s,this.nZ=n,this.rZ=r,this.oZ=o,this.hZ=h,this.aZ=a}},pC=function(t){return t.JW="expired",t.uZ="invaliddomain",t.cZ="invalidsource",t.lZ="invalidfeature",t.ua="error",t}({}),AC=class t{dZ(t,i){let e=[];wI(t.sources)?e=[t.sources]:ou(t.sources)&&(e=t.sources),this.fZ(t,e,i),this.gZ(e,i)}fZ(t,i,e){if(Vh(t)||0===e.eZ.length||NC(e.eZ))return;if(!i.every((t=>this._Z(t,e)))){const t="invalidsource",i=kC.vZ(t);throw new Ui(bC(t),i)}}gZ(t,i){for(const e of t)gs(e)&&vI(e)&&!e.bypassLicense&&this.wZ([Mh.HESP],i)}mZ(i){return this.pZ(i.hZ)&&this.AZ(i)?t.yZ(i.sZ)?0:1:2}wZ(t,i){for(const e of t)if(!fh(i.nZ,e)){const t="invalidfeature",i=kC.bZ(t,e);throw new Ui(bC(t),i)}}pZ(t){return 0===t.length||t.some((t=>this.MZ(t)))}MZ(t){return"web"===function(t){switch(t){case ue.ANDROID:return Et.Kf;case ue.ANDROIDTV:case ue.FIRETV:return Et.Jf;case ue.IOS:return Et.$f;case ue.TVOS:return Et.eg;case ue.CHROMECAST:case ue.CHROMECASTCAF:return Et.rg;case ue.THEOLIVEWEB:return Et.og;default:return Et.qf}}(t)}static yZ(t){const i=Number(new Date);return!!t&&i<=t}AZ(t){return!(this.TZ&&0!==t.iZ.length&&!NC(t.iZ))||!!(this.TZ&&this.SZ(t.iZ)&&this.NZ(t.iZ))}SZ(t){return IC(this.WA.Hu,t)}NZ(t){if(!this.WA.XW)return!0;if(this.IZ)return!0;const i=this.DZ();return!!i&&IC(i,t)}DZ(){if(!this.WA.XW)return;const t=Rl.ancestorOrigins;return t&&t.length>0?t[t.length-1]:this.WA.qW?this.WA.qW:void 0}_Z(i,e){return!!t.EZ(i,e.eZ)}static EZ(t,i){return IC(this.kZ(t),i)}static kZ(t){return cs(t)?t:gs(t)&&t.src||""}constructor(t,i,e){this.IZ=t,this.LZ=i,this.WA=e,this.TZ=EC(this.WA)}},yC=class{mZ(t){return 0}dZ(t,i){}wZ(t,i){}};function bC(t){switch(t){case"invaliddomain":return Do.LICENSE_INVALID_DOMAIN;case"invalidsource":return Do.LICENSE_INVALID_SOURCE;case"expired":return Do.LICENSE_EXPIRED;case"invalidfeature":return Do.LICENSE_INVALID_FEATURE;case"error":return Do.LICENSE_ERROR}}var MC="25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?",TC=Vc((()=>{const t="\\.",i="(\\*|"+MC+")";return new RegExp("ip-range\\("+i+t+i+t+i+t+i+"\\)")}));function SC(t,i){let e=t,s=i;if(!e)return!1;if(s=s.trim(),"*"===s)return!0;if(e=e.replace(/\.+$/,""),s===e)return!0;if(sa(s,"ip-range(")){const t="\\.",i=s.match(TC()),n=t=>"*"===t?"("+MC+")":t;if(null!==i&&5===i.length){const s=new RegExp("^"+i[1]+t+n(i[2])+t+n(i[3])+t+n(i[4])+"$");return null!==e.match(s)}}return s="."+s,-1!==e.indexOf(s,e.length-s.length)}function NC(t){return t.some((t=>"*"===t))}function IC(t,i){const e=me.Ah(t);if(!DC(e))return!0;for(const s of i){if(SC(e.hostname,s))return!0;if(SC(AT(t),s))return!0}return!1}function DC(t){return-1!==_C.indexOf(t.protocol)}function EC(t){const i=me.Ah(t.Hu);return DC(i)&&!function(t){return SC(t.hostname,"localhost")}(i)&&!function(t){return SC(t.hostname,"theoplayer.doubleclick.net")}(i)}var kC=class{static bZ(t,i){return"The requested feature '"+i+"' is not available with the license for this player."}static vZ(t){return"invaliddomain"===t?this.xZ:"invalidsource"===t?this.CZ:"expired"===t?this.jZ:"invalidfeature"===t?this.OZ:this.RZ}};kC.RZ="The license for this player is invalid.",kC.jZ="The usage license for this video player has expired.",kC.xZ="The current domain is incompatible with the license for this player.",kC.CZ="The provided video source is incompatible with the license for this player.",kC.OZ="The requested feature is not available with the license for this player.",r(),r();var sr=function(t){return t[t.PZ=1]="PZ",t[t.zZ=4]="zZ",t[t.BZ=5]="BZ",t[t.UZ=9]="UZ",t}({});function LC(t){const i=[t.Hj,t.QZ,t.FZ];switch(t.QZ){case 1:i.push(t.yk);break;case 4:i.push(t.sD),i.push(t.lt);break;case 5:i.push(t.lt);break;case 9:i.push(t.Hw)}return i}r();var Ci=new Array(256);for(let t=0;t<256;t+=1)Ci[t]=(t<16?"0":"")+t.toString(16);function Po(){const t=Du(),i=(4294967296*x.random()|0)+t&3029421624,e=(4294967296*x.random()|0)+t&3595553209,s=(4294967296*x.random()|0)+t&1130486254,n=(4294967296*x.random()|0)+t&1284287105;return Ci[255&i]+Ci[i>>>8&255]+Ci[i>>>16&255]+Ci[i>>>24&255]+"-"+Ci[255&e]+Ci[e>>>8&255]+"-"+Ci[e>>>16&15|64]+Ci[e>>>24&255]+"-"+Ci[63&s|128]+Ci[s>>>8&255]+"-"+Ci[s>>>16&255]+Ci[s>>>24&255]+Ci[255&n]+Ci[n>>>8&255]+Ci[n>>>16&255]+Ci[n>>>24&255]}function xC(t){return Vt(t.replace(/-/g,""))}function _o(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(t=>{const i=16*x.random()|0;return("x"===t?i:3&i|8).toString(16)}))}function xo(){return me.J_()}r(),r(),r();var CC,jC="theoplayer-session-id";function OC(){if(!CC){const t=VA.Jp(jC);t?CC=t:(CC=Po(),VA.$p(jC,CC))}return CC}r(),r();var RC=/[^\x00-\x7E]/g;function PC(t){return"\\u"+$h(t.charCodeAt(0).toString(16),4,"0")}var zC="https://license.theoplayer.com";function BC(t){const i=function(t){const i=[];return function(t,i,e){return JSON.stringify(t,i,e).replace(RC,PC)}(t,((t,e)=>{if(jl(e)){if(-1!==i.indexOf(e))return null;i.push(e)}return e}))}(function(t){return[t.YZ,t.xb,t.tZ,t.Rx,t.VZ,t.GZ,t.WZ.map(LC)]}(t));return eC.ZW.WW(i)}var UC=class{get WZ(){return this.Md}ZZ(){return Boolean(this.VZ)}get VZ(){return this.HZ}async XZ(t){if(!(await this.KZ.qZ()).aZ)return;const i={QZ:sr.PZ,FZ:Du(),yk:t};await this.BG(i)}async JZ(t){if(!(await this.KZ.qZ()).aZ)return;const i={QZ:sr.UZ,FZ:Du(),Hw:t};await this.BG(i)}async $Z(t,i){const e={QZ:sr.zZ,FZ:Du(),sD:i,lt:t};await this.BG(e)}async tH(t){const i={QZ:sr.BZ,FZ:Du(),lt:t};await this.BG(i)}async BG(t){const i=await this.KZ.qZ();"a:n[_O*[C4C-N$_@_MYY $D]iOp]N$_-_]th_:c|aen?C:pH"===this.iH.WW(i.tZ)&&t.QZ!==sr.BZ||(t.QZ===sr.PZ?this.eH():this.ZZ()||this.eH(),t.Hj=this.jy++,this.Md.push(t),!function(t){return t===sr.PZ||t===sr.BZ}(t.QZ)?this.Md.length>this.sH&&await this.nH():await this.rH())}async rH(t){for(void 0===t&&(t=!1);this.Md.length>0;)await this.nH(t)}async oH(t){const i=await this.KZ.qZ();return{YZ:Du(),xb:OC(),tZ:this.iH.WW(i.tZ)||"dev",Rx:this.hb,VZ:this.HZ,GZ:this.hH,WZ:t}}async nH(t){void 0===t&&(t=!1);const i=this.Md.splice(0,this.aH),e=await this.oH(i);t?this.wN(e):this.uH(e),this.cH=xo()}async uH(t){const i=BC(t),e=new _e({Hu:zC,wS:i,dN:!1,CS:Me.KM,RS:{"Content-Type":Yk.TQ},aN:4e3,hN:Ml.POST});try{const t=await this.dU.jS(e);await t.gS()}catch(t){(new Image).src="https://licensing.theoplayer.com/t?"+i}}wN(t){const i=BC(t);this.dU.wN({Hu:zC,wS:i,vS:Yk.TQ})}eH(){this.ZZ()&&this.rH(),this.HZ=Po(),this.jy=0}gn(){Ju.lH(this.dH),m(this.fH),this.rH()}constructor(t,i,e,s=eC.lh,n=0,r=1){this.hb=t,this.dU=i,this.KZ=e,this.iH=s,this.sH=n,this.aH=r,this.Md=[],this.HZ=null,this.cH=0,this.hH="unknown",this.jy=0,this.gH=()=>{xo()-this.cH>6e4&&this.rH()},this.dH=()=>{this.rH(!0)},Ju._H(this.dH),this.fH=v(this.gH,6e4)}};r(),r(),r();var QC=0;var FC=c,Qn=self.requestAnimationFrame||self.webkitRequestAnimationFrame||self.mozRequestAnimationFrame,du=self.cancelAnimationFrame||self.webkitCancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelRequestAnimationFrame;Qn&&du||(Qn=function(t){const i=xo(),e=x.max(0,16-(i-QC)),s=u((()=>t(i+e)),e);return QC=i+e,s},du=FC),Qn=Qn.bind(self),du=du.bind(self);var YC=ui.f_||ui.Ka&&ui.S_<13;function VC(t,i,e){const s=t.getImageData(i,e,1,1).data;return 0===s[0]&&0===s[1]&&0===s[2]&&0===s[3]}var GC=class{get ga(){var t;return null!=(t=this.Za)?t:this.Za=function(t){return{drawImage(i){for(var e=arguments.length,s=new Array(e>1?e-1:0),n=1;n<e;n++)s[n-1]=arguments[n];return t.vH(i,...s)},texImage2D:(i,e,s,n,r,o)=>t.wH(i,e,s,n,r,o),requestVideoFrameCallback:i=>t.mH(i),cancelVideoFrameCallback:i=>t.pH(i)}}(this)}vH(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];const n=this.AH;return void 0!==n&&(t.drawImage(n,...e),!0)}wH(t,i,e,s,n,r){let o=this.AH;return void 0!==o&&(YC&&(o=this.yH(o)),t.texImage2D(i,e,s,n,r,o),!0)}mH(t){const i=this.bH++,e=this.MH(t,i);return this.TH.set(i,{SH:t,NH:e}),i}pH(t){const i=this.TH.get(t);void 0!==i&&(this.TH.delete(t),i.NH())}MH(t,i){const e=this.AH;if(void 0===e)return ul;if(e instanceof HTMLVideoElement&&e.requestVideoFrameCallback){const s=e.requestVideoFrameCallback(((e,s)=>{this.TH.delete(i),t(e,s)}));return()=>e.cancelVideoFrameCallback(s)}{let e;const s=n=>{this.IH()?(this.TH.delete(i),this.DH=!1,t(n,void 0)):e=Qn(s)};return e=Qn(s),()=>du(e)}}IH(){return(!this.t.TD||this.DH)&&!this.t.BD&&this.t.OD>=$i.JR}yH(t){let i=this.EH;void 0===i&&(i=h.createElement("canvas"),this.EH=i);const e=i.getContext("2d"),s=this.t,n=s.GD,r=s.FD,o=i.width,a=i.height;e.clearRect(0,0,i.width,i.height),o===n&&a===r||(i.width=n,i.height=r),e.drawImage(t,0,0,n,r);let u=!1;return n>0&&VC(e,n-1,0)&&(i.width=o,u=!0),r>0&&VC(e,0,r-1)&&(i.height=a,u=!0),u&&e.drawImage(t,0,0,n,r),i}gn(){this.TH.forEach((t=>t.NH())),this.TH.clear(),this.t.fn(Qi.np,this.kH),this.t.fn(Qi.yp,this.LH),this.AH=void 0,this.EH=void 0}constructor(t){this.AH=void 0,this.Za=void 0,this.EH=void 0,this.TH=rn(),this.bH=1,this.DH=!0,this.LH=()=>{this.DH=!0},this.kH=()=>{this.AH=this.t.tE(),this.TH.forEach(((t,i)=>{t.NH(),t.NH=this.MH(t.SH,i)}))},this.t=t,this.t.yn(Qi.np,this.kH),this.t.yn(Qi.yp,this.LH),this.kH()}};r(),r(),r();var Ah=function(t){return t.pn="dimensionchange",t}({}),WC=class extends Bo{get Tu(){return 0}get Su(){return 0}},ZC=class extends Gs{constructor(t,i){super(Ah.pn),this.width=t,this.height=i}};r(),r();var HC,XC=class{constructor(t,i){this.ke=t,this.SH=i}},qC=class extends XC{get Tu(){return this.xH}get Su(){return this.CH}gn(){this.jH.disconnect()}constructor(t,i){super(t,i),this.xH=0,this.CH=0,this.OH=t=>{if(t.length>0){const i=t[t.length-1].contentRect;this.CH=i.width,this.xH=i.height,this.SH(this.CH,this.xH)}},this.jH=new oi.ResizeObserver(this.OH),this.jH.observe(this.ke)}};r(),r();var KC=["Webkit","Moz","O","ms"],JC=(()=>{let t=!1;try{if(void 0!==oi&&"function"==typeof oi.addEventListener){const i=_.defineProperty({},"passive",{get(){t=!0}});oi.addEventListener("testPassiveEventSupport",ul,i),oi.removeEventListener("testPassiveEventSupport",ul,i)}}catch(t){}return t})(),$C=Ge();function tj(t){return $C.has(t)||$C.set(t,function(t){const i=(HC||(HC=oi&&oi.document&&oi.document.createElement("span")),HC);if(!i||!i.style)return t;if(void 0!==i.style[t])return t;const e=t.charAt(0).toUpperCase()+t.slice(1);for(const t of KC){const s=t+e;if(void 0!==i.style[s])return s}return t}(t)),$C.get(t)}function ij(t){const i=t.style;i.position="absolute",i.left="0",i.right="0",i.bottom="0",i.top="0",i.overflow="scroll",i.zIndex="-1",i.visibility="hidden"}function ej(t){const i=t.style;i.position="absolute",i.left="0",i.top="0",i[tj("transition")]="0s"}var sj=class extends XC{gn(){du(this.RH),this.RH=0,this.PH.removeEventListener("scroll",this.zH),this.BH.removeEventListener("scroll",this.zH),Xa(this.UH),s&&s.removeEventListener("resize",this.QH)}get Tu(){return this.ke.getBoundingClientRect().height||this.xH||0}get Su(){return this.ke.getBoundingClientRect().width||this.CH||0}constructor(t,i,e){super(t,i),this.RH=0,this.CH=NaN,this.xH=NaN,this.FH=void 0,this.tr=()=>{const t=1e5;this.YH.style.width=t+"px",this.YH.style.height=t+"px",this.PH.scrollLeft=t,this.PH.scrollTop=t,this.BH.scrollLeft=t,this.BH.scrollTop=t,0===this.BH.scrollTop&&Qn(this.tr)},this.VH=()=>{const t=this.Su,i=this.Tu;this.SH(t,i),this.CH=t,this.xH=i,this.tr(),this.RH=0},this.zH=()=>{if(this.RH)return;const t=this.Su,i=this.Tu;t===this.CH&&i===this.xH||(this.RH=Qn(this.VH))},this.QH=()=>{this.FH||(this.FH=u(this.GH,66))},this.GH=()=>{this.FH=void 0,this.WH()},this.WH=()=>{this.zH()};const n=function(t,i){return s.getComputedStyle(t,void 0).getPropertyValue(i)||t.style[i]}(t,"position");e||"static"!==n||(t.style.position="relative");const r=h.createElement("div");this.UH=r,this.PH=h.createElement("div"),this.YH=h.createElement("div"),this.BH=h.createElement("div"),this.ZH=h.createElement("div"),ij(this.PH),ij(this.BH),ej(this.YH),function(t){ej(t),t.style.width="200%",t.style.height="200%"}(this.ZH),r.appendChild(this.PH),r.appendChild(this.BH),this.PH.appendChild(this.YH),this.BH.appendChild(this.ZH),t.appendChild(r),this.PH.addEventListener("scroll",this.zH),this.BH.addEventListener("scroll",this.zH),s&&s.addEventListener("resize",this.QH),this.zH()}},nj=class extends Bo{bn(t){this.jH||("function"==typeof oi.ResizeObserver?this.jH=new qC(this.ke,this.OH):this.jH=new sj(this.ke,this.OH,t))}gn(){this.Bo(),this.jH&&(this.jH.gn(),this.jH=void 0)}get Tu(){return this.jH?this.jH.Tu:0}get Su(){return this.jH?this.jH.Su:0}constructor(t){super(),this.jH=void 0,this.OH=(t,i)=>{this.yo(new ZC(t,i))},this.ke=t}};r(),r();var rj=class extends Gs{constructor(){super(El.aa)}};r();var Ur=function(){if(!h)return;const t=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]];for(let i of t)if(i[1]in h)return{HH:i[0],Jo:i[1],XH:i[2],qH:i[3],Qe:i[4],KH:i[5]}}();r();var oj=class extends Gs{constructor(){super(El.fa)}},hj=class t extends Bo{static na(t){return Boolean(Ur&&h[Ur.qH]&&Ur.HH in t)}co(){const t=this.ke[Ur.HH]();t&&t.then?t.then(this.JH,this.$H):(h.removeEventListener(Ur.KH,this.$H),h.addEventListener(Ur.KH,this.$H))}bo(){const t=h[Ur.Jo]();t&&t.then?t.then(this.JH,this.$H):(h.removeEventListener(Ur.KH,this.$H),h.addEventListener(Ur.KH,this.$H))}tX(){const t=this.cs,i=this.ke===h[Ur.XH];this.cs=i,t!==i&&this.yo(new rj)}iX(){this.yo(new ex)}gn(){this.Bo(),h.removeEventListener(Ur.Qe,this.JH),h.removeEventListener(Ur.KH,this.$H)}constructor(i){super(),this.cs=!1,this.JH=()=>this.tX(),this.$H=()=>this.iX(),this.ke=i,this.ea=t.na(i),h.addEventListener(Ur.Qe,this.JH),this.tX()}},aj=class t extends Bo{static na(t){return ui.Ka&&("webkitEnterFullscreen"in t||"webkitSupportsPresentationMode"in t)}co(){this.ke.webkitSupportsPresentationMode&&this.ke.webkitSupportsPresentationMode("fullscreen")?ui.Ka?requestAnimationFrame((()=>this.ke.webkitSetPresentationMode("fullscreen"))):this.ke.webkitSetPresentationMode("fullscreen"):this.ke.webkitEnterFullscreen()}bo(){this.ke.webkitSupportsPresentationMode&&this.ke.webkitSupportsPresentationMode("inline")?this.ke.webkitSetPresentationMode("inline"):this.ke.webkitExitFullscreen()}tX(){const t=this.cs;let i;i=this.ke.webkitPresentationMode?"fullscreen"===this.ke.webkitPresentationMode:Boolean(this.ke.webkitDisplayingFullscreen),this.cs=i,t!==i&&this.yo(new rj)}gn(){this.Bo(),this.ke.removeEventListener("webkitbeginfullscreen",this.JH),this.ke.removeEventListener("webkitendfullscreen",this.JH),this.ke.removeEventListener("webkitpresentationmodechanged",this.JH)}constructor(i){super(),this.cs=!1,this.JH=()=>this.tX(),this.ke=i,this.ea=t.na(i),this.ke.addEventListener("webkitbeginfullscreen",this.JH),this.ke.addEventListener("webkitendfullscreen",this.JH),this.ke.addEventListener("webkitpresentationmodechanged",this.JH),this.tX()}},uj=class extends Bo{get ea(){return!!this.eX&&this.eX.ea}get cs(){return this.sX}co(){this.eX?this.eX.co():this.yo(new ex)}bo(){for(const t of this.nX)t.cs&&t.bo()}rX(t){this.eX=t}oX(t){this.nX.push(t),t.yn(El.aa,this.tX),t.yn(El.ua,this.Ds),this.tX()}hX(t){Ro(this.nX,t),t.fn(El.aa,this.tX),t.fn(El.ua,this.Ds)}aX(){for(const t of this.nX)if(t.cs)return!0;return!1}tr(){this.eX=void 0,this.sX=!1;const t=this.nX.slice();for(const i of t)this.hX(i),i.gn();this.tX()}gn(){this.Bo(),this.tr()}constructor(...t){super(...t),this.nX=[],this.eX=void 0,this.sX=!1,this.tX=()=>{const t=this.sX,i=this.aX();t!==i&&(this.sX=i,this.yo(new rj))}}},cj=class extends Bo{get ea(){return!!this.uX&&this.cX.ea}get cs(){return this.cX.cs}co(){this.uX&&this.cX.co()}bo(){this.cX.bo()}lX(){this.cX.yn([El.aa,El.fa],this.tX),this.cX.yn(El.ua,this.Ds)}dX(){this.cX.fn([El.aa,El.fa],this.tX),this.cX.fn(El.ua,this.Ds)}Yn(){const t=this.cX,i=this.t.$D();if(t===i)return;this.ca=!0;const e=this.cs,s=this.ea;e&&this.bo(),this.dX(),this.cX=i,this.lX(),e&&!this.cs&&this.ea?this.co():this.bo(),this.ca=!1,s!==this.ea&&this.yo(new oj),e!==this.cs&&this.yo(new rj)}gn(){this.Bo(),this.dX(),this.t.fn(Qi.ep,this.fX)}constructor(t,i){super(),this.ca=!1,this.fX=()=>this.Yn(),this.tX=t=>{this.ca||this.yo(t)},this.t=t,this.uX=i,this.cX=new sx,this.lX(),this.t.yn(Qi.ep,this.fX),this.Yn()}};r(),r(),r();var lj=function(t){return t.MODE_CHANGE="presentationmodechange",t.ERROR="error",t}({}),dj=class extends Gs{constructor(t){super(lj.MODE_CHANGE),this.presentationMode=t}};r(),r();var fj=class extends Bo{iu(t){for(const i of this.Md)t.yn(i,this.gX);this._X.push(t)}vX(t){for(const i of this.Md)t.fn(i,this.gX);this._X.push(t)}gn(){this.Bo();for(const t of this._X)this.vX(t);Or(this._X)}constructor(t,i=!1,e){super(e),this._X=[],this.wX=t=>{Uv((()=>{this.Ds(t)}))},this.Md=t,this.gX=i?this.wX:this.Ds}},gj=class extends G{iu(t){t.Rm(this.mX),this._X.push(t)}vX(t){t.Qm(this.mX),Ro(this._X,t)}gn(){this.Bo();for(const t of this._X)t.Qm(this.mX);Or(this._X)}constructor(t,i=!1){super(t),this._X=[],this.wX=t=>{Uv((()=>{this.Ds(t)}))},this.mX=i?this.wX:this.Ds}};r();var _j=class extends ps{get error(){return this.errorObject.message}ma(){return this}constructor(t){super(lj.ERROR),this.errorObject=t}};r();var vj=class extends Ui{constructor(t,i,e){super(t,i,e)}},wj=class extends G{get ga(){return this.Za||(this.Za=this.ma()),this.Za}ma(){return function(t){let i,e={get currentMode(){return t.Oo()},requestMode(i){const e=CI(i);e&&t.zo(e)},supportsMode(i){const e=CI(i);return!!e&&t.Uo(e)},addEventListener(t,e){i.yn(t,e)},removeEventListener(t,e){i.fn(t,e)}};return i=new gj(e,!0),i.iu(t),e}(this)}zo(t){this.Ho!==t&&(this.Ho=t,this.Ko=!0,this.qo(t))}Oo(){return this.Ho}Uo(t){switch(t){case pc.NATIVE_PICTURE_IN_PICTURE:return this.Qo.nP;case pc.FULLSCREEN:return this.Zo.ea;case pc.INLINE:return!0}return!1}qo(t){switch(this.Go.Dm(),t){case pc.FULLSCREEN:xe(this.Go.Wo((t=>this.pX(t))));break;case pc.NATIVE_PICTURE_IN_PICTURE:xe(this.Go.Wo((t=>this.AX(t))));break;case pc.INLINE:xe(this.Go.Wo((t=>this.yX(t))))}}async pX(t){re(t),await this.Qo.bo().catch(ul),re(t);try{await this.bX(),this.yo(new dj(this.Ho))}catch(i){const e=new vj(Do.FULLSCREEN_ERROR,"Failed to enter fullscreen.");throw this.yo(new _j(e)),re(t),this.zo(pc.INLINE),e}finally{this.Ko=!1}}async AX(t){re(t),await this.Jo().catch(ul),re(t);try{await this.Qo.co(),this.yo(new dj(this.Ho))}catch(i){const e=new vj(Do.PICTURE_IN_PICTURE_ERROR,"Failed to enter native picture-in-picture.");throw this.yo(new _j(e)),re(t),this.zo(pc.INLINE),e}finally{this.Ko=!1}}async yX(t){re(t),await this.Jo().catch(ul),re(t),await this.Qo.bo().catch(ul),this.yo(new dj(this.Ho)),this.Ko=!1}async bX(){if(this.Zo.cs)return;const t=this.Zo.Fm([El.aa,El.ua]);if(this.Zo.co(),await t,!this.Zo.cs)throw new g("Failed to enter fullscreen.")}async Jo(){if(!this.Zo.cs)return;const t=this.Zo.Fm([El.aa,El.ua]);if(this.Zo.bo(),await t,this.Zo.cs)throw new g("Failed to exit fullscreen.")}ki(){this.Ko||(this.Ho!==pc.FULLSCREEN||this.Zo.cs?this.Ho!==pc.FULLSCREEN&&this.Zo.cs&&this.zo(pc.FULLSCREEN):this.zo(pc.INLINE))}gn(){this.Zo.fn(El.aa,this.tX),this.Zo.fn(El.ua,this.iX),this.Qo.fn(ra.iP,this.MX),this.Qo.fn(ra.eP,this.MX),this.Qo.fn(ra.ua,this.TX),this.Bo()}constructor(t,i){super(),this.Ho=pc.INLINE,this.Ko=!1,this.Go=new Ku,this.Za=void 0,this.tX=()=>{this.ki()},this.iX=()=>{this.Ko||(this.yo(new As(new Ui(Do.FULLSCREEN_ERROR,"Failed to enter fullscreen."))),this.ki())},this.MX=()=>{this.Ko||(this.Ho!==pc.NATIVE_PICTURE_IN_PICTURE||this.Qo.sP?this.Ho!==pc.NATIVE_PICTURE_IN_PICTURE&&this.Qo.sP&&this.zo(pc.NATIVE_PICTURE_IN_PICTURE):this.zo(pc.INLINE))},this.TX=()=>{this.Ko||(this.yo(new _j(new vj(Do.PICTURE_IN_PICTURE_ERROR,"Unexpected native picture-in-picture error."))),this.MX())},this.Zo=t,this.Qo=i,this.Zo.yn(El.aa,this.tX),this.Zo.yn(El.ua,this.iX),this.Qo.yn(ra.iP,this.MX),this.Qo.yn(ra.eP,this.MX),this.Qo.yn(ra.ua,this.TX)}};function mj(t){let i;return{get url(){return t.Hu},get method(){return t.hN},get headers(){return i||(i=t.RS.JM()),i},get body(){return t.wS},get useCredentials(){return t.dN},get type(){return t.Hw},get subType(){return t.cN},get mediaType(){return t.lN},get responseType(){return t.CS}}}function pj(t){switch(t.toLowerCase()){case"arraybuffer":return Me.HM;case"json":return Me.XM;case"stream":return Me.qM;default:return Me.KM}}function Aj(t){switch(t.toUpperCase()){case"POST":return Ml.POST;case"PUT":return Ml.PUT;case"DELETE":return Ml.DELETE;case"HEAD":return Ml.HEAD;case"OPTIONS":return Ml.OPTIONS;default:return Ml.GET}}function yj(t){switch(t.toLowerCase()){case"manifest":return as.FS;case"segment":return as.YS;case"preload-hint":return as.VS;case"content-protection":return as.GS;default:return as.QS}}function bj(t){switch(t.toLowerCase()){case"initialization-segment":return jo.WS;case"fairplay-license":return jo.ZS;case"fairplay-certificate":return jo.HS;case"widevine-license":return jo.XS;case"widevine-certificate":return jo.qS;case"playready-license":return jo.KS;case"clearkey-license":return jo.JS;case"aes128-key":return jo.$S;default:return jo.QS}}function Mj(t){switch(t.toLowerCase()){case"audio":return Fh.tN;case"video":return Fh.iN;case"text":return Fh.KM;case"image":return Fh.eN;default:return Fh.QS}}r(),r(),r(),r();var Tj=class{get SX(){return this.NX.rA}get ga(){return this.Za||(this.Za=this.IX()),this.Za}get DX(){return this.EX}get kX(){return!this.EX}get LX(){return this.xX>0}get kN(){return this.LN}Sx(){this.EX=!0,this.NX.eA(null)}CX(){this.NX.sA(new YM(this.jX))}OX(t){if(!this.kX)throw new w("Cannot respond more than once");if(!jl(t))throw new w("Expected valid response");this.LN=this.RX(t),this.Sx()}PX(){try{const t=this.zX(this.ga);t?this.BX(t):this.LX||this.DX||this.Sx()}catch(t){this.jX.push(t),this.CX()}}BX(t){if(this.DX)throw new g("Request has been redirected or a response already exists");if(yt(t))this.UX(t);else{if("function"!=typeof t)throw new w("Expected promise or function");{const i=new pa,e=t=>{t?i.sA(t):i.eA(void 0)};try{const s=t(e);yt(s)&&i.Em(s)}catch(t){i.sA(t)}this.UX(i.rA)}}}async UX(t){try{this.xX++,await t,this.xX--,this.LX||this.DX||(this.jX.length?this.CX():this.Sx())}catch(t){this.xX--,this.jX.push(t),this.LX||this.DX||this.CX()}}constructor(t,i){this.QX=t,this.zX=i,this.NX=new pa,this.jX=[],this.Za=void 0,this.EX=!1,this.LN=void 0,this.xX=0}},Sj=class t extends Tj{get wS(){return this.FX}get RS(){return this.QX.RS}get jS(){return this.QX.jS}get kN(){return this.LN}get LS(){return this.QX.LS}get PS(){return this.QX.PS}get Hu(){return this.QX.US}static YX(t,i,e){const s=void 0===t.body?e:t.body;return new vu({xS:s,jS:i.jS,CS:i.jS.CS,RS:t.headers,LS:t.status,PS:t.statusText,US:t.url,zS:!0},i)}IX(){return function(t){let i;const e=mj(t.jS);return{get closed(){return!t.kX},get request(){return e},get url(){return t.Hu},get status(){return t.LS},get statusText(){return t.PS},get headers(){return i||(i=t.RS.JM()),i},get body(){return t.wS},respondWith:i=>t.OX(i),waitUntil:i=>t.BX(i)}}(this)}RX(i){return t.YX(i,this.QX,this.FX)}constructor(t,i,e){super(t,i),this.FX=e,this.PX()}};r();var Nj=class extends Tj{get wS(){return this.QX.wS}get kX(){return this.VX&&!this.EX}get RS(){return this.QX.RS}get hN(){return this.QX.hN}get GX(){return this.WX}get kN(){return this.LN}get CS(){return this.QX.CS}get aN(){return this.QX.aN}get uN(){return this.QX.uN}get wm(){return this.QX.wm}get Hw(){return this.QX.Hw}get cN(){return this.QX.cN}get lN(){return this.QX.lN}get Hu(){return this.QX.Hu}get dN(){return this.QX.dN}get _N(){return this.QX._N}get fN(){return this.QX.fN}get gN(){return this.QX.gN}get vN(){return this.QX.vN}IX(){return function(t){let i;return{get url(){return t.Hu},get method(){return t.hN},get headers(){return i||(i=t.RS.JM()),i},get body(){return t.wS},get closed(){return!t.kX},get useCredentials(){return t.dN},get type(){return t.Hw},get subType(){return t.cN},get mediaType(){return t.lN},get responseType(){return t.CS},redirect:i=>t.ZX(i),respondWith:i=>t.OX(i),waitUntil:i=>t.BX(i)}}(this)}RX(t){const i=this.QX.wS,e=new vu({xS:i,RS:{},jS:this.QX,US:this.QX.Hu,CS:this.QX.CS,LS:200,PS:"OK"});return Sj.YX(t,e,i)}ZX(t){if(!this.kX)throw new w("Cannot redirect, already redirected or has a response");let i;i=cs(t)?{url:t}:t,this.WX=function(t,i){return new _e({Hu:void 0===t.url?i.Hu:t.url,hN:void 0!==t.method?Aj(t.method):void 0,RS:t.headers,wS:t.body,dN:t.useCredentials,Hw:void 0!==t.type?yj(t.type):void 0,cN:void 0!==t.subType?bj(t.subType):void 0,lN:void 0!==t.mediaType?Mj(t.mediaType):void 0,CS:void 0!==t.responseType?pj(t.responseType):void 0},i)}(i,this.QX),this.Sx()}constructor(t,i,e){super(t,i),this.WX=void 0,this.VX=e,this.PX()}};var Ij=class extends vT{HX(t){this.XX.HX(t)}qX(t){this.XX.qX(t)}KX(t){this.XX.KX(t)}VG(t){this.XX.VG(t)}HG(t){this.XX.HG(t)}constructor(t,i=!0){const e=new Dj(t);super(e,i),this.XX=e}},Dj=class{async jS(t){let i;try{i=await this.JX(t,t.wm)}catch(i){if(i instanceof bT)return await this.$X(i,t.wm);throw i}if(i=await this.tq(i,t.wm),Xn(i))return i;throw new Ts(i)}wN(t){return this.yN.wN(t)}async JX(t,i){re(i);let e,s=t;for(const t of this.iq.slice()){re(i);const n=new Nj(s,t,!e);if(!n.DX)try{await n.SX}catch(t){0;continue}n.GX&&!e?s=n.GX:n.kN&&!e&&(e=n.kN)}return e||this.yN.jS(s)}async $X(t,i){let e;if(t instanceof Ts)e=t.kN;else{const i=t.jS;e=new vu({xS:null,jS:i,CS:i.CS,LS:0,PS:""})}const s=await this.tq(e,i);if(s===e)throw t;if(Xn(s))return s;throw new Ts(s)}async tq(t,i){let e=t;for(const t of this.nq.slice()){re(i);const s=await Promise.resolve(e.Wp().xS(i)),n=new Sj(e,t,s);if(!n.DX)try{await n.SX}catch(t){0;continue}e=n.kN||e}return e}HX(t){this.iq.unshift(t)}qX(t){this.iq.push(t)}KX(t){Ro(this.iq,t)}VG(t){this.nq.unshift(t)}HG(t){Ro(this.nq,t)}gn(){this.yN.gn(),Or(this.iq),Or(this.nq)}constructor(t){this.iq=[],this.nq=[],this.yN=t}};r();var Ej=class{get ga(){return this.Za||(this.Za=function(t){return{addRequestInterceptor(i){t.HX(i)},removeRequestInterceptor(i){t.KX(i)},addResponseInterceptor(i){t.VG(i)},removeResponseInterceptor(i){t.HG(i)}}}(this)),this.Za}HX(t){this.dU.HX(t)}KX(t){this.dU.KX(t)}VG(t){this.dU.VG(t)}HG(t){this.dU.HG(t)}constructor(t){this.dU=t}},kj=class extends Bo{get ga(){return this.Za||(this.Za=function(t){return{get online(){return t.bD},get estimator(){return function(t){return{get bandwidth(){return t.mF},get roundTripTime(){return t.pF}}}(t.rq)},setEstimator(i){t.oq(function(t){if(!t)return;return{get mF(){return TS(t.bandwidth)},get pF(){return TS(t.roundTripTime)},AF:i=>function(t){if(!t)return;return{hq(i){t.markRequestStart(i)},aq(i){t.markResponseStart(i)},uq(i,e){t.markResponseData(i,e)},cq(i){t.markResponseEnd(i)}}}(t.createMeasurer(mj(i)))}}(i))},addRequestInterceptor(i){t.HX(i)},removeRequestInterceptor(i){t.KX(i)},addResponseInterceptor(i){t.VG(i)},removeResponseInterceptor(i){t.HG(i)},addEventListener(i,e){t.yn(i,e)},removeEventListener(i,e){t.fn(i,e)}}}(this)),this.Za}get bD(){return this.lq.bD}get rq(){return this.dV.rq}oq(t){this.dV.oq(t)}HX(t){this.dU.HX(t)}KX(t){this.dU.KX(t)}VG(t){this.dU.VG(t)}HG(t){this.dU.HG(t)}gn(){this.Bo(),this.lq.fn(Qi._p,this.dq),this.lq.fn(Qi.gp,this.fq)}constructor(t,i,e){super(i),this.lq=t,this.dU=i,this.dV=e,this.dq=t=>{this.yo(t)},this.fq=t=>{this.yo(t)},this.lq.yn(Qi._p,this.dq),this.lq.yn(Qi.gp,this.fq)}};r(),r(),r();var yi=function(t){return t.PERFORMANCE="performance",t.QUALITY="quality",t.BANDWIDTH="bandwidth",t}({});r();function Lj(t,i,e,s,n,r){const o=[];let h=t-x.max(r,1),a=t+n;if(i&&e){const t=rh(e,1,5),s=i-t;h=x.min(h,s);const n=i+e+t;a=x.max(a,n)}0!==h&&s.JO(0,h)&&o.push([0,h]);return s.JO(a,1/0)&&o.push([a,1/0]),o}function xj(t){return t instanceof g&&"QuotaExceededError"===t.name}r();var Cj={type:yi.BANDWIDTH};function jj(t){const i=Wa(Cj);return cs(t)?i.type=Oj(t):jl(t)&&function(t){switch(t){case yi.PERFORMANCE:case yi.QUALITY:case yi.BANDWIDTH:return!0;default:return!1}}(t.type)&&(i.type=Oj(t.type)),jl(t)&&jl(t.metadata)&&(i.metadata=function(t){const i={},e=yn(t.bitrate);return j(e)||(i.bitrate=e),i}(t.metadata)),i}function Oj(t){switch(t){case"bandwidth":return yi.BANDWIDTH;case"performance":return yi.PERFORMANCE;case"quality":return yi.QUALITY}}r();var Rj=class extends Gs{constructor(t){super("gq"),this._q=t}};r();var Pj=class extends Gs{constructor(t){super("vq"),this.wq=t}};r();var zj=class extends Gs{constructor(t){super("mq"),this.pq=t}},Bj=class extends Bo{Aq(t){this.yq=t}get bq(){switch(this.Mq.type){case yi.PERFORMANCE:return 0;case yi.QUALITY:return 1/0;case yi.BANDWIDTH:return this.Mq.metadata&&void 0!==this.Mq.metadata.bitrate?this.Mq.metadata.bitrate:fc.K_.hF();default:return fc.K_.hF()}}get ga(){return this.Za}get wq(){return this.Mq}set wq(t){this.Mq=t,this.yo(new Pj(t))}get _q(){return this.Tq}set _q(t){this.Tq=t,this.yo(new Rj(t))}get Sq(){return x.min(this.Tq,this.Nq)}get pq(){return this.Iq}set pq(t){this.Iq=t,this.yo(new zj(t))}get Dq(){return this.Nq}get rq(){var t;return null!=(t=this.Eq)?t:this.yq.XF}oq(t){this.Eq=t}kq(t){let i=x.min(t,.8*this.Nq);if(i=x.max(10,i),this.Nq===i)return!1;const e=this.Sq;this.Nq=i;const s=this.Sq;return s!==e&&this.yo(new Rj(s)),!0}get Lq(){return this.xq}set Lq(t){this.xq=t}constructor(...t){super(...t),this.Za=function(t){return{get strategy(){return function(t){return{metadata:t.metadata,type:t.type}}(t.wq)},set strategy(i){t.wq=jj(i)},get targetBuffer(){return t._q},set targetBuffer(i){const e=yn(i);j(e)||(t._q=e)},get bufferLookbackWindow(){return t.pq},set bufferLookbackWindow(i){const e=yn(i);j(e)||(t.pq=e<=0?30:e)},get maxBufferLength(){return t.Dq},get clearBufferWhenSettingTargetQuality(){return t.Lq},set clearBufferWhenSettingTargetQuality(i){t.Lq=dn(i)}}}(this),this.Mq=Cj,this.Tq=20,this.Iq=30,this.Nq=1/0,this.xq=!1,this.Eq=void 0}};r(),r();var Uj=class extends ps{ma(){return new Qj}constructor(){super("xE")}},Qj=class extends Gs{constructor(){super("change")}};r(),r();var Ao=class extends Bo{gn(){this.Bo();for(const t of this.Md)this.Cq.fn(t,this.jq)}constructor(t,i,e){super(e),this.jq=t=>{uS(t)&&Uv((()=>{this.yo(t.ga)}))},this.Cq=t,this.Md=i;for(const t of this.Md)this.Cq.yn(t,this.jq)}},xi=class extends G{gn(){this.Bo(),this.Cq.Qm(this.jq)}constructor(t,i){super(i),this.jq=t=>{uS(t)&&Uv((()=>{this.yo(t.ga)}))},this.Cq=t,this.Cq.Rm(this.jq)}};var Fj=class extends G{get OP(){return this.GP}set OP(t){if(this.RP<=t)throw new g("Start time of a clip should be smaller than the end time.");this.GP!==t&&(this.GP=t,this.yo(new Uj))}get RP(){return this.HP}set RP(t){if(t<=this.OP)throw new g("End time of a clip should be larger than the start time.");this.HP!==t&&(this.HP=t,this.yo(new Uj))}get ga(){return this.Za||(this.Za=function(t){let i,e={get startTime(){return t.OP},set startTime(i){t.OP=i},get endTime(){return t.RP},set endTime(i){t.RP=i},addEventListener(t,e){i.yn(t,e)},removeEventListener(t,e){i.fn(t,e)}};return i=new xi(t,e),e}(this)),this.Za}tr(){0===this.GP&&this.HP===1/0||(this.GP=0,this.HP=1/0,this.yo(new Uj))}Oq(){return new ge([this.OP,this.RP],[!0,!0])}constructor(...t){super(...t),this.GP=0,this.HP=1/0}};r();var Yj=class t extends aS{rD(t,i){const e=this.Rq.Oq().QO(t);super.rD(e,i),this.Pq()}aD(){return super.aD()||this.zq}get Bq(){return this.zD().length?this.zD():this.Rq.Oq().ws()}zD(){return ge.xn(super.zD()).Sn(this.Rq.Oq()).ws()}sE(){this.aD()?this.rD(this.Bq.start(0)):this.Uq(),super.sE(),this.Pq()}async wa(t,i){re(i),this.zq=!1,this.Rq.tr(),await super.wa(t,i)}gn(){return this.Rq.fn("xE",this.Qq),this.XI.fn(Qi.Dp,this.xc),this.Fq(),super.gn()}lE(t){switch(t.type){case Qi.bp:return this.yo(t),this.Yq(),!0;case Qi.yp:case Qi.Jm:return this.yo(t),this.Vq(),!0;case Qi.tp:if(this.Gq)return!0}return super.lE(t)}get Gq(){return this.Rq.RP<this.ct}Fq(){this.Wq&&(du(this.Wq),this.Wq=void 0)}Pq(){const i=this.sD,e=this.Gq&&i>=this.Rq.RP-t.ed;this.zq&&!e?(this.zq=!1,this.TD&&this.sE()):this.zq||!e||this.BD||this.Zq||(this.zq=!0,this.yo(new ce(i)),this.eE())}Uq(){if(this.ct===1/0)return;const i=this.Bq,e=ge.xn(i).QO(this.sD);Xs(this.sD,e,t.ed)||this.rD(e)}constructor(i,e){super(i),this.zq=!1,this.Wq=void 0,this.Zq=!1,this.Qq=()=>{this.Uq(),this.Pq()},this.xc=()=>{this.Fq(),this.Pq();this.Gq&&this.sD>=this.Rq.RP-t.Hq&&!this.hD&&(this.Wq=Qn(this.xc))},this.Yq=()=>{this.Zq=!0},this.Vq=()=>{this.Zq&&(this.Zq=!1,this.Pq())},this.Rq=e,this.Rq.yn("xE",this.Qq),this.XI.yn(Qi.Dp,this.xc)}};Yj.Hq=1,Yj.ed=.001,r();var Vj=class{get Xq(){return this.qq}set Xq(t){this.qq=t}constructor(){this.qq=!1}};r();var Gj=class extends aS{aD(){return!this.qq.Xq&&super.aD()}eE(){this.Kq=!0,super.eE()}sE(){this.Kq=!1,super.sE()}lE(t){if(this.qq.Xq)switch(t.type){case Qi.tp:return this.sD=0,this.Kq||(this.BD?this.Jq=!0:this.sE()),!0;case Qi.yp:this.Jq&&(this.Jq=!1,this.sE());break;case Qi.vp:if(this.Jq||super.aD())return!0}return super.lE(t)}constructor(t,i){super(t),this.Jq=!1,this.Kq=!1,this.qq=i}};r(),r();var Wj=class{get ga(){return this.Za}get lP(){return this.ta.vD.lP}get fP(){return this.ta.vD.fP}get cP(){return this.ta.vD.cP}get $q(){throw new g("Not implemented")}get tK(){throw new g("Not implemented")}get gP(){return this.ta.vD.gP}get dP(){return this.ta.vD.dP}get _P(){return this.ta.vD._P}constructor(t){this.ta=t,this.Za=function(t){return{get currentBandwidthEstimate(){return t.fP},get corruptedVideoFrames(){return t.lP},get droppedVideoFrames(){return t.cP},get totalVideoFrames(){return t.dP},get totalBytesLoaded(){return t.gP},get bufferedSegments(){return t._P}}}(this)}};function Zj(t){if(!t||!jd(t))return{cP:0,lP:0,dP:0,fP:0,gP:0,_P:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}};if("function"==typeof t.getVideoPlaybackQuality){const i=t.getVideoPlaybackQuality();return{cP:i.droppedVideoFrames,lP:i.corruptedVideoFrames||0,dP:i.totalVideoFrames}}return{cP:t.webkitDroppedFrameCount||0,lP:0,dP:t.webkitDecodedFrameCount||0}}r(),r();var Hj=class extends ps{ma(){return new Xj}constructor(){super("iK")}},Xj=class extends Gs{constructor(){super("castingchange")}};r();var qj=class extends Bo{get eK(){var t,i;return(null==(t=this.sK)?void 0:t.eK)||(null==(i=this.nK)?void 0:i.eK)||!1}get rK(){return this.sK}get oK(){return this.nK}hK(t){this.sK=t,this.aK(t)}uK(t){this.nK=t,this.aK(t)}aK(t){t.yn("statechange",this.cK)}lK(t){t.fn("statechange",this.cK)}get ga(){return this.Za||(this.Za=function(t){let i;const e={get casting(){return t.eK},get airplay(){var i;return null==(i=t.rK)?void 0:i.ga},get chromecast(){var i;return null==(i=t.oK)?void 0:i.ga},addEventListener(t,e){i.yn(t,e)},removeEventListener(t,e){i.fn(t,e)}};return i=new Ao(t,["iK"],e),e}(this)),this.Za}gn(){this.Bo(),this.sK&&(this.lK(this.sK),this.sK=void 0),this.nK&&(this.lK(this.nK),this.nK=void 0)}constructor(...t){super(...t),this.sK=void 0,this.nK=void 0,this.dK=!1,this.Za=void 0,this.cK=()=>{const t=this.dK,i=this.eK;t!==i&&(this.dK=i,this.yo(new Hj))}}};r(),r();var Ja=class{static async fK(t,i){try{const e=new _e({Hu:t,CS:Me.KM,hN:Ml.GET}),s=await i.jS(e);return(await s.xS()).trim()}catch(t){return void F(t)}}static gK(t){try{const i=fC(t);return new mC(i.key,i.domains_page,i.domains_source,i.expiration_date,i.features,i.customer_id,i.generation_date,i.sdks,i.send_impression)}catch(t){throw new Ui(Do.LICENSE_ERROR,"Invalid license. No valid license was configured.")}}static _K(t){void 0===t&&(t=eC.lh),me.lw("The baked-in license is used. Please update the configuration with your license.");const i=t.GW("F2b-iL'[FL[S"),e=JSON.parse('["F$(:_L50F|aY"]').map((i=>t.GW(i))),s=JSON.parse('[".$hsF|b9_Ess*rS:F]Y\\""]').map((i=>t.GW(i))),n=Number(new Date(Number(t.GW('COD|aHpHa:p3Ceo3Co""')))),r=JSON.parse("[]").map((i=>t.GW(i)));return new mC(i,e,s,n,r)}static convertLicenseToDummyLicense(t){return new mC(t.tZ,t.iZ,t.eZ,864e13,t.nZ,t.rZ,Date.now(),t.hZ,t.aZ)}};r();var wa=class t{static ZM(){return t.K_||(t.K_=Kj.iM()?new Kj:new YA),t.K_}static iA(i){t.ZM().iA(i)}static WM(){t.ZM().WM()}static Jp(i){return t.ZM().Jp(i)}static $p(i,e){t.ZM().$p(i,e)}static vK(i){const e=t.Jp(i);if(void 0!==e)return S(e)}static wK(i){return"true"===t.Jp(i)}};wa.K_=void 0;var Kj=class extends wa{static iM(){const t="foobar";try{return self.localStorage.setItem(t,t),self.localStorage.removeItem(t),!0}catch(t){}return!1}iA(t){self.localStorage.removeItem(t)}WM(){self.localStorage.clear()}Jp(t){var i;return null!=(i=self.localStorage.getItem(t))?i:void 0}$p(t,i){self.localStorage.setItem(t,i)}},Jj="https://validate.theoplayer.com/1/",$j=72e5,tO=x.floor(14399999*x.random()-$j),iO="THEOplayer.license",eO=class{async mK(){const t=await this.pK(this.AK.license,this.AK.licenseUrl);this.KZ.yK(t)}async pK(t,i){let e,s=i;t?e=Ja.gK(t):s||(e=Ja._K()),s||(s=Jj+e.tZ);const n=this.bK();let r;if(e&&(r=this.MK.mZ(e),r===wC.KW)){if(this.TK(e.sZ)&&this.TK(null==n?void 0:n.sZ)){const t=await this.SK(s);if(t)return t}return e}if(n){if(this.MK.mZ(n)===wC.KW){if(this.TK(null==n?void 0:n.sZ)){const t=await this.SK(s);if(t)return t}return n}wa.iA(iO)}const o=await Ja.fK(s,this.dU);let h;if(o){h=Ja.gK(o);if(this.MK.mZ(h)===wC.KW)return wa.$p(iO,o),h;wa.iA(iO)}else if(!this.TZ&&e&&r===wC.JW&&s===Jj+e.tZ)return Ja.convertLicenseToDummyLicense(e);if(!e&&!h)throw new Ui(Do.LICENSE_ERROR,"The given license is invalid!");this.NK(null!=e?e:h,new Ui(Do.LICENSE_ERROR,"The given license is invalid!"))}async dZ(t){let i=await this.KZ.qZ();if(this.TK(i.sZ)){var e;const t=null!=(e=this.AK.licenseUrl)?e:Jj+i.tZ,s=await this.SK(t);s&&(this.KZ.yK(s),i=s)}try{const e=this.MK.mZ(i);if(e===wC.$W){const t=pC.uZ;throw new Ui(bC(t),kC.vZ(t))}if(e===wC.JW){const t=pC.JW;throw new Ui(bC(t),kC.vZ(t))}this.MK.dZ(t,i)}catch(t){this.IK(t)}}async wZ(t){const i=await this.KZ.qZ();try{this.MK.wZ(t,i)}catch(t){this.IK(t)}}async SK(t){try{const i=await Ja.fK(t,this.dU);if(void 0===i)return;const e=Ja.gK(i);return this.MK.mZ(e)===wC.KW?(wa.$p(iO,i),e):void 0}catch(t){return}}TK(t){return!t||Number(new Date)+2592e5+tO>=t}bK(){const t=wa.Jp(iO);if(t)return Ja.gK(t)}NK(t,i){this.KZ.yK(t),this.IK(i)}IK(t){throw Xt(t.message),this.DK.tH(t.message),t}constructor(t,i,e,s,n,r){this.dU=t,this.MK=i,this.DK=e,this.KZ=s,this.AK=n,this.WA=r,this.TZ=EC(r)}};r();var sO=class{yK(t){this.EK=t,this.kK.eA()}get LK(){return this.EK}async qZ(){return this.EK?Promise.resolve(this.EK):(await this.kK.rA,this.EK)}constructor(){this.kK=new pa}};r(),r();var nO=class extends ps{ma(){return new rO}constructor(){super("xE")}},rO=class extends Gs{constructor(){super("change")}};function oO(t){let i;const e={get fontFamily(){return t.xK},set fontFamily(i){t.xK=i},get fontColor(){return t.CK},set fontColor(i){t.CK=i},get fontSize(){return t.jK},set fontSize(i){t.jK=i},get backgroundColor(){return t.RK},set backgroundColor(i){t.RK=i},get windowColor(){return t.PK},set windowColor(i){t.PK=i},get edgeStyle(){return t.zK},set edgeStyle(i){t.zK=i},get marginTop(){return t.BK},set marginTop(i){t.BK=i},get marginBottom(){return t.UK},set marginBottom(i){t.UK=i},get marginLeft(){return t.QK},set marginLeft(i){t.QK=i},get marginRight(){return t.FK},set marginRight(i){t.FK=i},addEventListener(t,e){const s=yu(t,To);i.yn(s,e)},removeEventListener(t,e){const s=yu(t,To);i.fn(s,e)}};return i=new Yv(e),t.yn(["xE"],(t=>i.yo(t.ga))),e}r();var hO={xK:void 0,CK:void 0,jK:void 0,RK:void 0,PK:void 0,zK:void 0,BK:void 0,UK:void 0,QK:void 0,FK:void 0},aO="THEOplayer.textTrackStyle.",uO=class t extends Bo{get YK(){return this.VK}get xK(){return this.VK.xK}set xK(t){this.Yn({xK:t})}get CK(){return this.VK.CK}set CK(t){this.Yn({CK:t})}get jK(){return this.VK.jK}set jK(t){this.Yn({jK:t})}get RK(){return this.VK.RK}set RK(t){this.Yn({RK:t})}get PK(){return this.VK.PK}set PK(t){this.Yn({PK:t})}get zK(){return this.VK.zK}set zK(t){this.Yn({zK:t})}get BK(){return this.VK.BK}set BK(t){this.Yn({BK:t})}get UK(){return this.VK.UK}set UK(t){this.Yn({UK:t})}get FK(){return this.VK.FK}set FK(t){this.Yn({FK:t})}get QK(){return this.VK.QK}set QK(t){this.Yn({QK:t})}get ga(){return this.Za||(this.Za=oO(this)),this.Za}Yn(i){this.VK=il({},this.VK,i),t.GK(this.VK),this.yo(new nO)}static WK(){let t=il({},hO);return t.xK=wa.Jp(aO+"fontFamily")||t.xK,t.CK=wa.Jp(aO+"fontColor")||t.CK,t.jK=wa.Jp(aO+"fontSize")||t.jK,t.RK=wa.Jp(aO+"backgroundColor")||t.RK,t.PK=wa.Jp(aO+"windowColor")||t.PK,t.zK=wa.Jp(aO+"edgeStyle")||t.zK,t}static GK(t){wa.$p(aO+"fontFamily",t.xK||""),wa.$p(aO+"fontColor",t.CK||""),wa.$p(aO+"fontSize",t.jK||""),wa.$p(aO+"backgroundColor",t.RK||""),wa.$p(aO+"windowColor",t.PK||""),wa.$p(aO+"edgeStyle",t.zK||"")}constructor(){super(),this.Za=void 0,this.VK=t.WK()}};function cO(t,i){var e,s;t.style.marginLeft=(null!=(e=i.QK)?e:0)+"px",t.style.marginRight=(null!=(s=i.FK)?s:0)+"px",t.style.width="calc(100% - "+t.style.marginLeft+" - "+t.style.marginRight+")"}r(),r(),r(),r();var lO=[Qi.so,Qi.vp,fa.CO,Qi.Dp,Qi.wp,Qi.lp,Qi.bp,Qi.yp,Qi.tp,Qi.mp,Qi.Ep,Qi.Km,fa.CE,Qi.Ap,ac.ua,xn.$m,xn.Qp,Qi.Hm,Qi.Zm,Qi.kp,Qi.xp,Qi.op,Qi.ap,Qi.np,Qi.ep],dO={QR:!1};function fO(t){return t.md.Hw===vl.mU}r();var W=function(t){return t.ZK="HK",t}({}),Ph=["HK"],z=function(t){return t[t.XK=0]="XK",t[t.qM=1]="qM",t[t.qK=2]="qK",t}({});r(),r();var gO=["loadstart","encrypted","waitingforkey","webkitneedkey","msneedkey"],Hn=function(t){return t.KK="JK",t.$K="tJ",t.iJ="eJ",t}({}),_O=class extends Bo{get md(){return this.gM}get VF(){return this.CM}async sJ(t,i){const e=await this.hm.nm(t.Xw,i),s=await e.Xb();return await this.nJ(s),s}rJ(t){const i=this.Vb;return i?0!==t.KF.length&&t.KF.some((t=>t.Gb.Xw===i.Gb)):0!==this.gM.KF.length?t.KF.some((t=>this.gM.KF.some((i=>t.Gb===i.Gb)))):0===t.KF.length||!this.oJ}hJ(t){return this.aJ.hJ(t),this.gM=t,Promise.resolve()}uJ(t){this.aJ.uJ(t)}async Mm(){this.Bo(),this.CM.removeEventListener("loadedmetadata",this.cJ);for(const t of gO)this.CM.removeEventListener(t,this.lJ);await this.Go.gn(),this.dJ(),await this.aJ.tr(),await this.fJ(void 0)}gJ(t){t!==this._J&&(this._J=t,t?this.vJ.eA(void 0):this.vJ=new pa)}nJ(t){return this.Go.Wo((()=>this.fJ(t)))}async fJ(t){if(t&&!this.CM.src&&!this.CM.srcObject)throw new ti(Do.CONTENT_PROTECTION_ERROR,"Attempted to attach MediaKeys to a sourceless MediaElement");if(!t&&(this.CM.src||this.CM.srcObject))throw new ti(Do.CONTENT_PROTECTION_ERROR,"Attempted to remove MediaKeys from a non-empty MediaElement");t&&!this._J&&await this.vJ.rA;const i=this.Vb;i&&(await i.Zb(this.CM),this.Vb=void 0),t&&(await t.bn(this.CM),this.Vb=t)}wa(t){return this.Go.Wo((()=>this.wJ(t)))}wJ(t){this.gJ(!1);const i=this.jR.ND;if(cs(t))this.CM.src=t;else if(function(t){if(void 0!==s.ManagedMediaSource&&t instanceof s.ManagedMediaSource)return!0;if("undefined"!=typeof MediaSource&&t instanceof MediaSource)return!0;return!1}(t))if(function(t){return"srcObject"in t&&ui.Ka&&ui.S_>=17}(this.CM))try{this.CM.srcObject=t}catch(i){this.CM.src=URL.createObjectURL(t)}else this.CM.src=URL.createObjectURL(t);else vO(t)&&(this.CM.srcObject=t);this.jR.ND=i}mJ(t){return this.Go.Wo((()=>this.pJ(t)))}pJ(t){this.wJ(t),this.CM.load()}dJ(){this.gJ(!1),Od(this.CM)}async AJ(){this.Vb&&await this.Vb.tr()}constructor(t,i,e,s){super(),this._J=!1,this.vJ=new pa,this.oJ=!1,this.Go=new Ku,this.Vb=void 0,this.cJ=()=>{this.oJ=!0},this.lJ=()=>{this.gJ(!0)},this.gM=t,this.jR=i,this.CM=i.VF,this.aJ=e,this.hm=s,this.CM.addEventListener("loadedmetadata",this.cJ);for(const t of gO)this.CM.addEventListener(t,this.lJ)}};function vO(t){return"undefined"!=typeof MediaStream&&t instanceof MediaStream}var wO=class extends _O{get KI(){return ge.xn(this.CM.buffered)}get ct(){return this.CM.duration}get yJ(){const t=this.ct;if(!isFinite(t))return!1;const i=this.KI;if(0===i.U)return!1;return t-i.jn(i.U-1)<si}get xD(){return this.CM.preload}set xD(t){this.CM.preload=t}get PD(){return ge.xn(this.CM.seekable)}get bJ(){return this.KI}get MJ(){if(jd(this.CM)&&(this.CM.videoWidth>0||this.CM.videoHeight>0))return this.KI}async Aq(){const t=this.md;switch(t.tY){case Sn.Nk:case Sn.Ik:this.CM.setAttribute("crossorigin",t.tY);break;case Sn.nN:default:this.CM.removeAttribute("crossorigin")}void 0!==t.xD?this.CM.preload=t.xD:this.CM.preload=Ac.wF,void 0!==t.iY?this.CM.title=t.iY:kd(this.CM),t.TJ?await this.mJ(t.TJ):await this.wa(t.yk),this.aJ.$n(this,t)}rJ(t){return!1}hJ(t){return Promise.resolve(void 0)}SJ(t){return!1}NJ(){return!vO(this.gM.TJ)}async Mm(){kd(this.CM),await super.Mm()}static IJ(t,i){return!!i.canPlayType&&Boolean(i.canPlayType(t.vS))}};r();var mO=class extends Gs{constructor(t){super(Qi.wp),this.currentTime=t}};r();var Ti=class extends Gs{constructor(){super(Qi.lp)}};r(),r();var pO=function(t){return t.DJ="EJ",t}({}),AO=class extends Gs{constructor(t){super("EJ"),this.kJ=t}},yO=class extends Bo{get LJ(){return this.xJ}CJ(t,i){const e=new ge([t,i]);this.xJ=this.xJ.WO(e),this.yo(new AO(e))}jJ(t,i){this.xJ=this.xJ.HO(new ge([t,i]))}tr(){this.xJ=ge.cR()}gn(){this.Bo()}constructor(...t){super(...t),this.xJ=ge.cR()}};function bO(t,i){return void 0===i&&(i=new ZM({highWaterMark:1/0})),new GM(new MO(t,i),{highWaterMark:0})}r(),r(),r();var MO=class{start(t){this.kK=t,this.OJ()&&this.RJ()}pull(){this.mT.length>0?this.PJ():this.zJ=!0,this.OJ()&&this.RJ()}cancel(t){return Or(this.mT),this.pT=0,this.zJ=!1,this.uT.cancel(t)}PJ(){if(0===this.mT.length)return;const t=this.mT;this.mT=[],this.pT=0,this.zJ=!1,this.kK.enqueue(t)}OJ(){if(this.zJ)return!0;return this.BJ-this.pT>0}RJ(){if(this.UJ)return;const t=this.uT.read().then(this.QJ).catch(this.XN);this.UJ=t;const i=()=>{this.UJ===t&&(this.UJ=void 0)};t.then(i,i)}constructor(t,{size:i=(()=>1),highWaterMark:e=1}){this.mT=[],this.pT=0,this.kK=void 0,this.zJ=!1,this.UJ=void 0,this.QJ=t=>t.done?(this.PJ(),void this.kK.close()):(this.mT.push(t.value),this.pT+=this.FJ(t.value),this.zJ&&this.PJ(),this.OJ()?this.uT.read().then(this.QJ):void 0),this.XN=t=>{this.PJ(),this.kK.error(t)},this.uT=t.getReader(),this.FJ=i,this.BJ=e}};r(),r(),r(),r();var TO=class{YJ(t){this.VJ.push(t),this.qp+=t.byteLength}GJ(t){if(this.qp<=t)return this.WJ();const i=this.VJ;let e=0,s=0;for(;s<i.length&&e+i[s].byteLength<=t;)e+=i[s].byteLength,s++;const n=i.slice(0,s);if(s<i.length&&e<t){const r=t-e;0,n.push(Bt(i[s],0,r)),e+=r}return{VJ:n,qp:e}}ZJ(t){const i=this.GJ(t);return 1===i.VJ.length?i.VJ[0]:Bw(i.VJ,i.qp)}WJ(){return{VJ:this.VJ,qp:this.qp}}HJ(t){if(this.qp<=t)return this.XJ();const i=this.VJ;let e=0,s=0;for(;s<i.length&&e+i[s].byteLength<=t;)e+=i[s].byteLength,s++;const n=i.splice(0,s);if(i.length>0&&e<t){const s=t-e;0,n.push(Bt(i[0],0,s)),i[0]=Bt(i[0],s),e+=s}return this.qp-=e,{VJ:n,qp:e}}qJ(t){const i=this.HJ(t);return 1===i.VJ.length?i.VJ[0]:Bw(i.VJ,i.qp)}XJ(){const t=this.WJ();return this.VJ=[],this.qp=0,t}KJ(){const t=1===this.VJ.length?this.VJ[0]:Bw(this.VJ,this.qp);return this.VJ=[],this.qp=0,t}constructor(){this.VJ=[],this.qp=0}},mo=class{JJ(t,i){}$J(){}t$(t){this.mT.YJ(t),this.i$(!1)}e$(){this.i$(!0)}s$(){return 0!==this.Ea||0!==this.mT.qp}i$(t){for(;0!==this.mT.qp;){if(!t&&this.n$>this.mT.qp)return;switch(this.Ea){case 0:this.r$(t);break;case 1:this.o$(t);break;case 2:this.h$(t)}}}a$(){this.Ea=0,this.n$=8}r$(t){const i=Os(this.mT.ZJ(this.n$)),e=new J,s=Lu.kx(i,e);if(!s.Sx)return this.n$=s.xx,void(t&&this.n$>this.mT.qp&&this.u$(this.mT.qp));const n=s.Lx.Hw;let r=s.Lx.qp;0===r&&(r=1/0),this.JJ(n,r),this.c$(n)?this.l$(r):this.u$(r)}l$(t){this.Ea=1,this.n$=t}o$(t){const i=Os(this.mT.qJ(this.n$)),e=new J,s=Lu.Nx(i,e,!t);if(!s.Sx)throw new _N(e.tc);this.$J(),this.d$(s.Ix),this.a$()}u$(t){this.Ea=2,this.n$=0,this.f$=t}h$(t){const i=this.mT.HJ(this.f$);this.f$-=i.qp;for(const t of i.VJ)this.g$(t);(0===this.f$||t&&this.f$===1/0)&&(this.$J(),this.a$())}constructor(){this.mT=new TO,this.Ea=0,this.n$=0,this.f$=0,this.a$()}};function SO(t){return t instanceof bp}function NO(t){return t instanceof Ap}function IO(t){return t instanceof wp||t instanceof mp}function DO(t){return t instanceof gl}function EO(t){return t instanceof Mm}function kO(t){return t instanceof Nr}function LO(t){return t instanceof Fr}function xO(t){return t instanceof Cp}function CO(t){return t instanceof Ir}function jO(t){return t instanceof Dp}function OO(t){return t instanceof kp}function RO(t,i){const e=So(t.boxes,jO);if(e&&e.flags.baseDataOffsetPresent)e.baseDataOffset=e.baseDataOffset.add(i);else for(const e of t.boxes)e instanceof kp&&e.flags.dataOffsetPresent&&(e.dataOffset=e.dataOffset+i)}r();var PO=class extends mo{start(t){this.kK=t}transform(t){this.t$(t)}flush(){this.e$()}c$(t){return t===Fo.$k||t===Fo.QL||t===Fo.KL}d$(t){const i=this._$(t);this.kK.enqueue(i)}g$(t){this.kK.enqueue(t)}_$(t){const i=se(t.xS.xS);switch(t.Hw){case"moov":return this.v$(i);case"sidx":return this.w$(i);case"moof":return this.m$(i)}return i}get p$(){if(void 0===this.A$)throw new g("Expected to have found a movie header timescale.");return this.A$}y$(t){const i=this.b$.get(t);if(void 0===i)throw new g("Expected to have found a media header timescale for track ID "+t+".");return i}v$(t){const i=Kp(t);for(let t=0;t<i.boxes.length;t++){const e=i.boxes[t];e instanceof fp?i.boxes[t]=this.M$(e):e instanceof gp?i.boxes[t]=this.T$(e):e instanceof Ap&&this.S$(e)}for(const t of i.boxes)t instanceof Nr&&this.N$(t);return i.serialize().join()}M$(t){this.A$=t.timescale;const i=UO(Io.fromNumber(t.duration,!0),this.p$,this.I$);return 0!==i.getHighBits()?this.T$(function(t){return new gp({creation:Io.fromNumber(t.creationTime,!0),modification:Io.fromNumber(t.modificationTime,!0),scale:t.timescale,duration:Io.fromNumber(t.duration,!0)},t.nextTrackId,{rate:t.rate,volume:t.volume,matrix:t.matrix},t.flags)}(t)):(t.timescale=this.I$,t.duration=i.toInt(),t)}T$(t){return this.A$=t.timescale,t.timescale=this.I$,t.duration=UO(t.duration,this.p$,this.I$),t}S$(t){let i;for(let e=0;e<t.boxes.length;e++){const s=t.boxes[e];s instanceof wp?(i=s.trackId,t.boxes[e]=this.D$(s)):s instanceof mp?(i=s.trackId,t.boxes[e]=this.E$(s)):s instanceof gl?this.k$(s,i):s instanceof jm&&this.L$(s)}}D$(t){const i=UO(Io.fromNumber(t.duration,!0),this.p$,this.I$);return 0!==i.getHighBits()?this.E$(function(t){return new mp({creation:Io.fromNumber(t.creationTime,!0),modification:Io.fromNumber(t.modificationTime,!0),duration:Io.fromNumber(t.duration,!0)},t.trackId,t.volume,t.width,t.height,{layer:t.layer,alternateGroup:t.alternateGroup,matrix:t.matrix})}(t)):(t.duration=i.toInt(),t)}E$(t){return t.duration=UO(t.duration,this.p$,this.I$),t}k$(t,i){for(let e=0;e<t.boxes.length;e++){const s=t.boxes[e];s instanceof Qm?t.boxes[e]=this.x$(s,i):s instanceof Fm&&(t.boxes[e]=this.C$(s,i))}}x$(t,i){this.b$.set(i,t.timescale);const e=UO(Io.fromNumber(t.duration,!0),t.timescale,this.I$);return 0!==e.getHighBits()?this.C$(function(t){return new Fm({creation:Io.fromNumber(t.creationTime,!0),modification:Io.fromNumber(t.modificationTime,!0),scale:t.timescale,duration:Io.fromNumber(t.duration,!0)},t.language,t.flags)}(t),i):(t.timescale=this.I$,t.duration=e.toInt(),t)}C$(t,i){return this.b$.set(i,t.timescale),t.timescale=this.I$,t.duration=UO(t.duration,t.timescale,this.I$),t}L$(t){for(const i of t.boxes)i instanceof Lm?this.j$(i):i instanceof xm&&this.O$(i)}j$(t){for(const i of t.entries)i.mediaTime=BO(i.mediaTime,this.p$,this.I$),i.segmentDuration=BO(i.segmentDuration,this.p$,this.I$)}O$(t){for(const i of t.entries)i.mediaTime=UO(i.mediaTime,this.p$,this.I$),i.segmentDuration=UO(i.segmentDuration,this.p$,this.I$)}N$(t){for(let i=0;i<t.boxes.length;i++){const e=t.boxes[i];e instanceof Fr?this.R$(e):e instanceof hp?t.boxes[i]=this.P$(e):e instanceof ap&&(t.boxes[i]=this.z$(e))}}R$(t){const i=this.y$(t.trackId);t.defaultSampleDuration=BO(t.defaultSampleDuration,i,this.I$)}P$(t){const i=UO(Io.fromNumber(t.fragmentDuration,!0),this.p$,this.I$);return 0!==i.getHighBits()?this.z$(function(t){return new ap(Io.fromNumber(t.fragmentDuration,!0),t.flags)}(t)):(t.fragmentDuration=i.toInt(),t)}z$(t){return t.fragmentDuration=UO(t.fragmentDuration,this.p$,this.I$),t}w$(t){let i=Jp(t);return i=i instanceof Bp?this.B$(i):this.U$(i),i.serialize().join()}B$(t){const i=t.timescale,e=UO(Io.fromNumber(t.earliestPresentationTime,!0),i,this.I$);if(0!==e.getHighBits())return this.U$(function(t){return new Up(t.referenceId,t.timescale,Io.fromNumber(t.earliestPresentationTime,!0),Io.fromNumber(t.firstOffset,!0),t.references,t.flags)}(t));t.timescale=this.I$,t.earliestPresentationTime=e.toInt();for(const e of t.references)e.subsegmentDuration=BO(e.subsegmentDuration,i,this.I$);return t}U$(t){const i=t.timescale;t.timescale=this.I$,t.earliestPresentationTime=UO(t.earliestPresentationTime,i,this.I$);for(const e of t.references)e.subsegmentDuration=BO(e.subsegmentDuration,i,this.I$);return t}m$(t){const i=$p(t),e=i.getSize();for(const t of i.boxes)t instanceof Ir&&this.Q$(t);const s=i.getSize();if(s!==e){const t=s-e;for(const e of i.boxes)e instanceof Ir&&RO(e,t)}return i.serialize().join()}Q$(t){let i;for(let e=0;e<t.boxes.length;e++){const s=t.boxes[e];s instanceof Dp?(i=this.y$(s.trackId),this.F$(s,i)):s instanceof Sp?t.boxes[e]=this.Y$(s,i):s instanceof Np?t.boxes[e]=this.V$(s,i):s instanceof kp&&this.G$(s,i)}}F$(t,i){void 0!==t.defaultSampleDuration&&(t.defaultSampleDuration=BO(t.defaultSampleDuration,i,this.I$))}Y$(t,i){const e=UO(Io.fromNumber(t.baseMediaDecodeTime,!0),i,this.I$);return 0!==e.getHighBits()?this.V$(function(t){return new Np(Io.fromNumber(t.baseMediaDecodeTime,!0),t.flags)}(t),i):(t.baseMediaDecodeTime=e.toInt(),t)}V$(t,i){return t.baseMediaDecodeTime=UO(t.baseMediaDecodeTime,i,this.I$),t}G$(t,i){let e=0,s=0;for(const n of t.samples){if(void 0!==n.duration){s+=n.duration;const t=BO(s,i,this.I$);n.duration=t-e,e=t}void 0!==n.compositionTimeOffset&&(n.compositionTimeOffset=zO(n.compositionTimeOffset,i,this.I$))}}constructor(t){super(),this.b$=rn(),this.I$=t}};function zO(t,i,e){return Io.fromInt(t,!1).multiply(e).divide(i).toNumber()}function BO(t,i,e){return Io.fromInt(t,!0).multiply(e).divide(i).toNumber()}function UO(t,i,e){return M.kz(t).iB(M.Lz(e,!0)).rB(M.Lz(i,!0)).Yz()}var QO=class{W$(t){return t.pipeThrough(new Iu(this.Z$))}constructor(t){this.Z$=new PO(t)}};r(),r();var FO=function(t){return t[t.H$=64]="H$",t[t.X$=103]="X$",t[t.q$=107]="q$",t}({});function YO(t,i,e){const s=ha(t,i);if(s!==e)throw new w("Expected descriptor with tag "+e+", but found "+s)}function VO(t,i){YO(t,i,3);const e=GO(t,i),s=i.tc+e,n=Tt(t,i),r=ha(t,i),o=0!=(64&r),h=0!=(32&r),a=31&r;let u,c,l;if(0!=(128&r)&&(u=Tt(t,i)),o){c=wu(t,i,ha(t,i))}h&&(l=wu(t,i,2));const d=function(t,i){YO(t,i,4);const e=GO(t,i),s=i.tc+e,n=ha(t,i),r=ha(t,i),o=r>>2,h=0!=(2&r),a=vw(t,i,3),u=Se(t,i),c=Se(t,i);let l;if(i.tc<s){const e=function(t,i){return t.getUint8(i.tc)}(t,i);5===e&&(l=function(t,i){YO(t,i,5);const e=GO(t,i),s=wi(t,i,e);return{K$:5,J$:s}}(t,i))}return i.Gp(s),{K$:4,t0:n,i0:o,e0:h,s0:a,n0:u,r0:c,o0:l}}(t,i);return i.Gp(s),{K$:3,o:n,h0:u,Hu:c,a0:a,u0:l,c0:d}}function GO(t,i){let e=0;for(let s=0;s<4;s++){const s=ha(t,i);if(e=e<<7|127&s,!(128&s))break}return e}function WO(t,i){const e=ha(t,i),s=ha(t,i),n=ha(t,i),r=ha(t,i),o=3&ha(t,i),h=31&ha(t,i),a=[];for(let e=0;e<h;e++){const e=Tt(t,i);a.push(wi(t,i,e))}const u=ha(t,i),c=[];for(let e=0;e<u;e++){const e=Tt(t,i);c.push(wi(t,i,e))}return{l0:e,d0:s,f0:n,g0:r,_0:o,v0:a,w0:c}}function nu(t,i,e){if(e&&i.byte>=e)return;const s=t.Jp(i.byte);return i.byte+=1,s}function ZO(t,i){return function(t,i,e){let s=0,n=e;for(;n>0;)n-=1,s=256*s+nu(t,i);return s}(t,i,2)}r(),r(),r(),r(),r(),r();var HO=class t{m0(t){this.p0=this.p0.concat(t.p0),this.A0+=t.U}y0(t,i,e){const s=this.A0,n=e-i;n>0&&(this.p0.push({b0:i,M0:e,T0:n,S0:s,N0:t}),this.A0+=n)}Jp(t){for(const i of this.p0)if(i.S0<=t&&t<i.S0+i.T0)return i.N0[t+i.b0-i.S0]}I0(t,i){let e=i;for(const i of this.p0){const s=i.M0;for(let n=i.b0;n<s;n+=1,e+=1)t[e]=i.N0[n]}return e}get U(){return this.A0}set U(t){const i=this.p0;let e=this.A0-t;if(!(t>=this.A0))if(this.A0=t,0!==t)for(let t=i.length-1;t>=0;t-=1){const s=i[t];if(e<=s.T0)return s.M0-=e,s.T0-=e,void(i.length!==t+1&&(i.length=t+1));e-=s.T0}else i.length=0}get xS(){const t=new Array(this.A0);let i=0;for(const e of this.p0){const s=e.M0;for(let n=e.b0;n<s;n+=1,i+=1)t[i]=e.N0[n]}return t}D0(){const t=new T(this.A0);let i=0;for(const e of this.p0){const s=e.M0;for(let n=e.b0;n<s;n+=1,i+=1)t[i]=e.N0[n]}return t}Wp(i){const e=new t;for(const t of this.p0)e.y0(t.N0,t.b0,t.M0);return e.WB=i||il({},this.WB),e}constructor(){this.A0=0,this.p0=[],this.WB={}}};r();var XO=[128,64,32,16,8,4,2,1];function qO(t,i){const e=x.floor(i.bit/8),s=0==(t.Jp(e)&XO[i.bit%8])?0:1;return i.bit+=1,s}function Yh(t,i,e){let s=0,n=e;for(;n>0;)n-=1,s=2*s+qO(t,i);return s}function KO(t,i){let e=0;for(;0===qO(t,i)&&e<32;)e+=1;return Yh(t,i,e)+2**e-1}function JO(t,i){const e=KO(t,i);return 1&e?x.floor((e+1)/2):-x.floor(e/2)}function $O(t,i){const e=[],s={byte:1};let n;do{e.push(iR(t,i,s)),n=i.Jp(s.byte)}while(void 0!==n&&128!==n);return e}function tR(t,i){let e,s=0;do{e=nu(t,i),s+=e}while(255===e);return s}function iR(t,i,e){const s=tR(i,e),n=tR(i,e),r=e.byte,o=r+n;return e.byte=o,{E0:t,k0:s,L0:n,x0:r,C0:o,j0:i}}var eR=function(t){return t[t.O0=1]="O0",t[t.R0=2]="R0",t[t.P0=3]="P0",t[t.z0=4]="z0",t[t.B0=5]="B0",t[t.U0=6]="U0",t[t.Q0=7]="Q0",t[t.F0=8]="F0",t[t.Y0=9]="Y0",t}({}),sR=[void 0,[1,1],[12,11],[10,11],[16,11],[40,33],[24,11],[20,11],[32,11],[80,33],[18,11],[15,11],[64,33],[160,99],[4,3],[3,2],[2,1]];function nR(t,i,e){let s=8,n=8;for(let r=0;r<e;r+=1){if(0!==n){n=(s+JO(t,i)+256)%256}s=0===n?s:n}}var rR=class{V0(){const t=this.G0;let i=x.max(0,this.W0+t.length-2);const e=this.Z0,s=e.U;let n=0;for(;i<s;i+=1){const s=e.Jp(i);0===s?n+=1:(3===s&&n>=2&&t.push(i),n=0)}this.W0=i-t.length}H0(t){const i=this.G0;let e=t;for(const t of i){if(!(t<=e))return e;e+=1}return e}Jp(t){if(!(t>this.Z0.U))return t>this.W0&&this.V0(),this.Z0.Jp(this.H0(t))}constructor(t){this.G0=[],this.W0=0,this.Z0=t}};function oR(t){const i=new rR(t);let e,s,n,r,o,h,a=0,u=0,c=0,l=0;const d=i.Jp(1),f={bit:32};if(KO(i,f),100===d||110===d||122===d||144===d){const t=KO(i,f);3===t&&(e=qO(i,f)),KO(i,f),KO(i,f),qO(i,f);if(1===qO(i,f))for(let e=0;e<(3!==t?8:12);e+=1){1===qO(i,f)&&nR(i,f,e<6?16:64)}}const g=KO(i,f),_=KO(i,f);if(0===_)KO(i,f);else if(1===_){qO(i,f),JO(i,f),JO(i,f);const t=KO(i,f);for(let e=0;e<t;e+=1)JO(i,f)}KO(i,f),qO(i,f);const v=KO(i,f),w=KO(i,f),m=qO(i,f);0===m&&qO(i,f),qO(i,f);1===qO(i,f)&&(a=KO(i,f),u=KO(i,f),c=KO(i,f),l=KO(i,f));if(1===qO(i,f)){if(1===qO(i,f)){const t=Yh(i,f,8);if(255===t)s=Yh(i,f,16),n=Yh(i,f,16);else{const i=sR[t];i&&(s=i[0],n=i[1])}}1===qO(i,f)&&qO(i,f);if(1===qO(i,f)){Yh(i,f,3),qO(i,f);1===qO(i,f)&&(Yh(i,f,8),Yh(i,f,8),Yh(i,f,8))}1===qO(i,f)&&(KO(i,f),KO(i,f)),r=qO(i,f),1===r&&(o=Yh(i,f,32),h=Yh(i,f,32),qO(i,f))}return{width:x.floor(16*(v+1)-2*a-2*u),height:x.floor((2-m)*(w+1)*16-2*c-2*l),zj:s,Bj:n,X0:r?h/(2*o):void 0,q0:e,K0:g}}function hR(t,i,e){void 0===e&&(e=1);const s=dr(tn.zx(t),Fo.QL);if(s&&0!==s.Z.length)return function(t,i,e){void 0===e&&(e=1);var s;let n;n=void 0!==i?So(t.Z,(t=>t.Lx.dC===i)):t.Z[0];const r=null==n||null==(s=n.$j)?void 0:s.$j;return r?mt(r,e):void 0}(s,i,e)}function aR(t){const i=dr(tn.zx(t),Fo.$k);if(!i)return;const e=i.Lx.eC,s=[];for(const t of i.Z){const i=t.Lx.dC,e=t.aC.Lx.eC;let h,a,u;for(const i of t.aC.pC.bC.TC.NC){const t=uR(i);var n,r,o;if(t)h=null!=(n=t.J0)?n:h,a=null!=(r=t.$0)?r:a,u=null!=(o=t.t1)?o:u}s.push({dC:i,eC:e,J0:h,$0:a,t1:u})}return{eC:e,Z:s}}function uR(t){let i,e,s;if(t.Hw===Fo.dL){var n;const e=WO(Os(t.uj.xS),new J);i=function(t){return"avc1."+cR(t.d0,2)+cR(t.f0,2)+cR(t.g0,2)}(e),s=null==(n=function(t){if(0===t.v0.length)return;const i=t.v0[0],e=new HO;return e.y0(i,0,i.byteLength),oR(e)}(e))?void 0:n.X0}else if(t.Hw===Fo.gL||t.Hw===Fo._L){const e=function(t,i){const e=i.Xp(),s=Ye(t,e,8),n=Ye(t,e,2),r=Ye(t,e,1),o=Ye(t,e,5),h=Ye(t,e,32),a=[];for(let i=0;i<6;i++)a.push(Ye(t,e,8));const u=Ye(t,e,8);e.Vp(4);const c=Ye(t,e,12);e.Vp(6);const l=Ye(t,e,2);e.Vp(6);const d=Ye(t,e,2);e.Vp(5);const f=Ye(t,e,3);e.Vp(5);const g=Ye(t,e,3),_=Ye(t,e,16),v=Ye(t,e,2),w=Ye(t,e,3),m=Ye(t,e,1),p=Ye(t,e,2),A=Ye(t,e,8),y=[];for(let i=0;i<A;i++){const i=Ye(t,e,1);e.Vp(1);const s=Ye(t,e,6),n=Ye(t,e,16),r=[];for(let i=0;i<n;i++){const i=Ye(t,e,16),s=wi(t,new J(e.tc>>3),i);e.Vp(8*i),r.push({i1:i,e1:s})}y.push({s1:i,n1:s,o1:n,a1:r})}return{l0:s,u1:n,c1:r,l1:o,d1:a,g1:u,_1:c,v1:l,w1:h,m1:d,A1:f,b1:g,M1:_,T1:w,S1:m,N1:v,_0:p,I1:A,D1:y}}(Os(t.gj.xS),new J);i=function(t,i){let e=t.toString()+".";switch(i.u1){case 0:break;case 1:e+="A";break;case 2:e+="B";break;case 3:e+="C";break;default:return}switch(e+=i.l1.toString()+".",e+=function(t){let i=t;return i=i>>>1&1431655765|(1431655765&i)<<1,i=i>>>2&858993459|(858993459&i)<<2,i=i>>>4&252645135|(252645135&i)<<4,i=i>>>8&16711935|(16711935&i)<<8,i=i>>>16|i<<16,i}(i.w1).toString(16)+".",i.c1){case 0:e+="L";break;case 1:e+="H";break;default:return}e+=i.g1.toString();const s=i.d1.reduce(((t,i)=>0===t?i:i+1),0);for(let t=0;t<s;t++)e+="."+i.d1[t].toString(16).toUpperCase();return e}(t.Hw,e)}else if(t.Hw===Fo.SL||t.Hw===Fo.NL||t.Hw===Fo.IL||t.Hw===Fo.DL){const e=function(t,i){const e=i.Xp(),s=Ye(t,e,8),n=Ye(t,e,8),r=Ye(t,e,7),o=Ye(t,e,6),h=Boolean(Ye(t,e,1)),a=Boolean(Ye(t,e,1)),u=Boolean(Ye(t,e,1)),c=Ye(t,e,4);return Ye(t,e,28),Ye(t,e,32),Ye(t,e,32),Ye(t,e,32),Ye(t,e,32),{E1:s,L1:n,C1:r,j1:o,O1:h,R1:a,P1:u,z1:c}}(Os(t.Ij.xS),new J);i=function(t,i){const e=t.toString(),s=$h(i.C1.toString(),2,"0"),n=$h(i.j1.toString(),2,"0");return e+"."+s+"."+n}(t.Hw,e)}else if(t.Hw===Fo.wL){const e=function(t,i){const e=i.Xp(),s=Ye(t,e,8);e.Vp(24);const n=Ye(t,e,8),r=Ye(t,e,8),o=Ye(t,e,4),h=Ye(t,e,3),a=_a(t,e),u=Ye(t,e,8),c=Ye(t,e,8),l=Ye(t,e,8),d=Ye(t,e,16),f=new Array(8);for(let i=0;i<d;i++)f[i]=Ye(t,e,8);return{l0:s,C1:n,j1:r,B1:o,U1:h,Q1:a,jj:u,Oj:c,Rj:l,F1:d,Y1:f}}(Os(t.vj.xS),new J);i=function(t,i){let e=t.toString()+".";return e+="0"+i.C1+".",e+=$h(""+i.j1,2,"0")+".",e+=$h(""+i.B1,2,"0")+".",e+=$h(""+i.U1,2,"0")+".",e+=$h(""+i.jj,2,"0")+".",e+=$h(""+i.Oj,2,"0")+".",e+=$h(""+i.Rj,2,"0")+".",e+="0"+i.Q1,e}(t.Hw,e)}else if(t.Hw===Fo.pL){const e=function(t,i){const e=i.Xp();e.Vp(1);const s=Ye(t,e,7),n=Ye(t,e,3),r=Ye(t,e,5),o=_a(t,e),h=_a(t,e),a=_a(t,e),u=_a(t,e),c=_a(t,e),l=_a(t,e),d=Ye(t,e,2);e.Vp(3);const f=_a(t,e);let g;return f?g=Ye(t,e,4):e.Vp(4),{Rx:s,V1:n,G1:r,W1:o,Z1:h,H1:a,X1:u,q1:c,K1:l,J1:d,t2:f,i2:g}}(Os(t.pj.xS),new J);i=function(t,i,e){let s=t.toString()+".";if(s+=i.V1+".",s+=""+$h(""+i.G1,2,"0"),s+=(0===i.W1?"M":"H")+".",s+=(1===i.H1?12:10)+".",s+=(1===i.V1?0:i.X1)+".",s+=""+i.q1+i.K1+(1===i.q1&&1===i.K1?i.J1:"0"),e&&e.Cj===lN.ON_SCREEN_COLOURS){const t=e;s+="."+$h(""+t.jj,2,"0")+"."+$h(""+t.Oj,2,"0")+"."+$h(""+t.Rj,2,"0")+"."+(t.Pj?1:0)}return s}(t.Hw,e,t.Aj)}else if(t.Hw===Fo.xL){e=function(t){const i=t.c0;switch(i.t0){case FO.H$:return function(t){var i;if(!(null==(i=t.o0)?void 0:i.J$))return"mp4a.40";const e=function(t,i){let e=Ye(t,i,5);31===e&&(e=32+Ye(t,i,6));const s=Ye(t,i,4);let n;return 15===s&&(n=Ye(t,i,24)),{e2:e,s2:s,n2:n,o2:Ye(t,i,4)}}(Os(t.o0.J$),new ew);return"mp4a.40."+e.e2}(i);case FO.X$:return"mp4a.40.2";case FO.q$:return"mp4a.40.34"}}(VO(Os(t.tj.xS),new J))}else if(t.Hw===Fo.jL)e="fLaC";else{if(t.Hw!==Fo.EL)return(t.Hw===Fo.UL||t.Hw===Fo.BL)&&t.Mj?uR(t.Mj):void 0;e="ec-3"}return{J0:i,$0:e,t1:s}}function cR(t,i){const e=t.toString(16);return $h(e,i,"0")}function lR(t,i){const e=tn.zx(Os(t)),s=function(t,i){let e;for(const n of t.Z){var s;const t=null==(s=n.$j)?void 0:s.$j;if(t){const s=n.Lx.dC,r=So(i.Z,(t=>t.dC===s)),o=Fu.kz(t,r.eC);e&&!o.bz(e)||(e=o)}}return e}(dr(e,Fo.QL),i),n=dr(e,Fo.HL);return{OP:s._z(),h2:n.xS}}r(),r();var dR=ui.M_,fR=class extends Bo{get _q(){return this.Tq}set _q(t){this.Tq=t}get pq(){return this.Iq}set pq(t){this.Iq=t}get ca(){return this.a2||this.u2.updating}c2(t,i,e){switch(t.Hw){case z.XK:case z.qM:return this.l2((e=>this.d2(t,i,e)),e);case z.qK:throw new g("Opaque segments are not supported on web.")}}f2(t,i){switch(t.Hw){case z.XK:return this.l2((i=>this.g2(t,i)),i);case z.qM:throw new g("Streaming initialization segments are not supported on web.");case z.qK:throw new g("Opaque initialization segments are not supported on web.")}}async g2(t,i){this._2?this.w2=aR(Os(t.xS)):(await this.m2(t,void 0,i),dR&&(this.A2=!1,this.b2=t))}async d2(t,i,e){dR&&this.A2&&this.b2&&await this.g2(this.b2,e);try{if(re(e),this._2&&this.w2){const n=await async function(t,i){switch(t.Hw){case z.XK:return t;case z.qM:{const e=await xs(t.xS,i);return re(i),{Hw:z.XK,xS:new T(e)}}case z.qK:throw new g("MediaBufferWrapper - Cannot convert opaque SegmentData to ArraySegmentData.")}}(t,e),r=lR(n.xS,this.w2);var s;t={Hw:z.XK,xS:r.h2},i=il({},i,{RB:r.OP+(null!=(s=i.RB)?s:0)})}await this.m2(t,i,e),this.yo(new Gs(W.ZK))}finally{t.Hw===z.qM&&t.xS.cancel(new Rh).catch(ul)}}async m2(t,i,e){switch(re(e),i&&await this.M2(i),t.Hw){case z.XK:if(this.T2){const i=this.T2.W$(HM(t.xS));return await this.S2(i,e)}return await this.N2(t.xS);case z.qM:if(this.T2){const i=this.T2.W$(t.xS);return await this.S2(i,e)}return await this.S2(t.xS,e)}}async S2(t,i){const e=this.I2.KI,s=bO(t).getReader();let n=!1;try{for(;;){const t=await Ic(s.read(),i);if(t.done){n=!1;break}re(i);const e=Dt(t.value);n=!0,await this.N2(e)}}catch(t){if(s.cancel(t).catch(ul),n){await this.D2();const t=this.I2.KI.Sn(e.FO());for(let i=0;i<t.U;i++)await this.E2(t.Cn(i),t.jn(i))}throw t}}L2(t,i){return this.l2((()=>this.C2(t,i)))}async C2(t,i){this.u2.appendWindowStart===t&&this.u2.appendWindowEnd===i||(await this.D2(),this.u2.appendWindowStart=0,this.u2.appendWindowEnd=i,this.u2.appendWindowStart=t)}async M2(t){if(this.u2.timestampOffset!==t.RB)try{this.u2.timestampOffset=t.RB}catch(i){await this.D2(),this.u2.timestampOffset=t.RB}}async N2(t){this.u2.appendBuffer(t),this.j2=!0,await this.O2()}R2(t,i,e){return this.l2((e=>this.E2(t,i,e)),e)}async E2(t,i,e){re(e),this.u2.remove(t,i),await this.O2()}O2(){const t=this.I2.KI;return new Promise(((i,e)=>{let s,n=!1,r=()=>{n=!0},o=()=>{n=!1,s="error"},h=()=>{n=!1,s="aborted"},a=()=>{n=!1,s="sourceclose",u()},u=()=>{c(),n&&!s?(t.tR(this.I2.KI)||this.yo(new Gs(W.ZK)),i()):e(new g(s))},c=()=>{this.u2.removeEventListener("update",r),this.u2.removeEventListener("error",o),this.u2.removeEventListener("abort",h),this.u2.removeEventListener("updateend",u),this.P2.fn(Hn.$K,a)};this.u2.addEventListener("update",r),this.u2.addEventListener("error",o),this.u2.addEventListener("abort",h),this.u2.addEventListener("updateend",u),ui.$g&&ui.i_<3&&this.P2.yn(Hn.$K,a)}))}z2(){return this.l2((()=>this.D2()))}async D2(){if(this.P2.OD===xR.SN){dR&&(this.A2=!0),this.u2.updating&&(this.a2=!0);try{this.u2.abort()}catch(t){0,this.a2=!1}this.ca&&await this.O2().catch(ul)}}B2(){return"function"==typeof this.u2.changeType&&!ui.qg}hJ(t){if(this.U2(),this.P2.OD===xR.Q2)return;var i;this.F2=t;const e=null!=(i=this.P2.Y2(t.vS))?i:t.vS;this._2=gR(t.vS,this.V2),this.B2()&&!pr(this.V2,e)&&(this.V2=e,this.u2.changeType(this.V2))}G2(){this.P2.OD!==xR.tp||this.W2||this.ca||(this.u2.timestampOffset=this.u2.timestampOffset,this.P2.Z2())}async l2(t,i){this.U2();const e=new Ai;e.Em(this.H2.wm),i&&e.Em(i);try{this.W2=t(e.wm),await this.W2,this.P2.Z2(),this.ca&&await this.O2()}finally{this.W2=void 0,e.Mm()}}U2(){if(this.W2)throw new g("Internal error")}async Mm(){this.Bo(),this.H2.Dm(),this.W2&&(await this.W2.catch(ul),this.W2=void 0),this.u2.removeEventListener("updateend",this.X2),this.u2.removeEventListener("bufferedchange",this.q2)}constructor(t,i,e,s,n){var r;if(super(),this.Tq=20,this.Iq=30,this.a2=!1,this.j2=!1,this.W2=void 0,this.H2=new Ai,this.A2=!1,this.b2=void 0,this._2=!1,this.w2=void 0,this.X2=()=>{this.a2=!1},this.q2=t=>{t.removedRanges&&this.yo(new Gs(W.ZK))},this.P2=i,this.I2=t,this.u2=e,this.u2.addEventListener("updateend",this.X2),this.u2.addEventListener("bufferedchange",this.q2),this.F2=s,this.V2=n,this._2=gR(s.vS,n),null==(r=i.md)?void 0:r.xv){var o;const t=null!=(o=i.md.K2)?o:1e5;this.T2=new QO(t)}}};function gR(t,i){return sa(t,"audio/mp4")&&sa(i,"audio/mpeg")}r();var _R=class{get KI(){if(this.J2.OD===xR.Q2)return ge.cR();let t=ge.xn(this.u2.buffered).Sn(new ge([0,1/0]));const i=this.t4;return void 0!==i&&t.U>0&&t.jn(t.U-1)===i&&(t=t.WO(ge.aR(i))),t}yJ(){return!!this.t4&&this.KI.UO().gr(this.t4)}i4(){const t=this.KI;this.t4=t.U>0?t.jn(t.U-1):0,this.J2.e4()}G2(){this.t4=void 0}constructor(t,i){this.t4=void 0,this.J2=i,this.u2=t}};function vR(t){const i=t.Jb("codecs");return i?i.split(",").map((t=>t.trim())):[]}function wR(t,i){return!("opus"===t)&&!("opus"===i)||t===i}function mR(t,i){const e=pR(t)||AR(t),s=pR(i)||AR(i);return!e&&!s||t.split(".")[0]===i.split(".")[0]}function pR(t){return/^(ac-3|dac3|ec-3|dec3|ec\+3|ac-4|dac4)/.test(t)}function AR(t){return/^(dvav|dva1|dvhe|dvh1)/.test(t)}function _s(t,i){if(t===i)return!0;const e=t.split("."),s=i.split("."),n=e[0];if(n!==s[0])return!1;if("mp4a"===n){const[,t,i]=e,[,n,r]=s;if(t!==n)return!1;if(Number(i)!==Number(r))return!1}return!0}function yR(t,i,e,s,n,r,o){const h=new _R(n,t),a=new fR(h,t,n,e,r);return new bR(t,i,e,s,h,a,o)}r();var bR=class extends Bo{get KI(){return this.I2.KI}get md(){return this.gM}get vS(){return this.uM}get s4(){return this.n4}get r4(){return this.o4.LJ}get _q(){return this.h4._q}set _q(t){this.h4._q=t}get pq(){return this.h4.pq}set pq(t){this.h4.pq=t}get ca(){return this.h4.ca}yJ(){return this.I2.yJ()}i4(){this.I2.i4()}G2(){this.I2.G2(),this.h4.G2()}a4(t,i){this.o4.CJ(t,i)}u4(t,i){this.o4.jJ(t,i)}c4(){return this.h4.z2()}c2(t,i,e){return this.h4.c2(t,i,e)}f2(t,i,e){return this.h4.f2(t,e)}L2(t,i){return ui.$g&&ui.i_<3?this.h4.L2(t,1/0):this.h4.L2(t,i)}async Rb(t,i,e){this.u4(t,i);const s=this.KI;await this.h4.R2(t,i,e);const n=0!==s.U&&0===this.KI.U;(ui.L_||ui.s_)&&n&&this.jR.Gp(this.jR.sD)}rJ(t){const i=t.vS;if(this.uM===i)return!0;const e=this.l4.get(i);if(void 0!==e)return e;const s=this.d4(t);return this.l4.set(i,s),s}d4(t){const i=this.P2.Y2(t.vS);if(void 0===i)return!1;const e=$r(this.uM),s=$r(i),n=vR(e),r=vR(s);if(this.h4.B2()){if(!function(t,i){return Ov(t,i,mR)}(n,r))return!1;if(ui.C_&&!function(t,i){return Ov(t,i,wR)}(n,r))return!1}else{if(e.Hw!==s.Hw)return!1;if(!function(t,i){return Ov(t,i,_s)}(n,r))return!1}return!0}async hJ(t){const i=t.vS;this.uM!==i&&(this.l4.clear(),this.h4.hJ(t),this.uM=i),this.gM=t,this.P2.f4()}async Mm(){this.l4.clear(),this.Bo(),this.o4.gn();try{this.h4.fn(W.ZK,this.Ds),await this.h4.Mm()}catch(t){}}constructor(t,i,e,s,n,r,o){super(),this.l4=Ge(),this.P2=t,this.gM=e,this.uM=e.vS,this.n4=s,this.jR=i,this.I2=n,this.h4=r,this.o4=o,this.h4.yn(W.ZK,this.Ds)}};r();var MR=class{g4(){let t=this.Cn,i=this.jn;if(this._4||this.v4){const e=.001*(me.J_()-this.w4);this._4&&(t+=e),this.v4&&(i+=e)}return ge.uR(t,i)}constructor(t,i,e=!1,s=!1){this.Cn=t,this.jn=i,this._4=e,this.v4=s,this.w4=me.J_()}};r(),r();var TR=.5,SR=[Qi.so,Qi.vp,Qi.bp,Qi.yp,Qi.op,Qi.ap,Qi.tp,Qi.mp,fa.CE,ac.ua],NR=class{m4(t){this.A4.push(t),t.yn(pO.DJ,this.y4)}get LJ(){return this.A4.reduce(((t,i)=>t.WO(i.LJ)),ge.cR())}gn(){this.b4(),this.M4.fn(fa.CE,this.T4),this.jR.fn(Qi.wp,this.T4),this.jR.fn(SR,this.S4),this.A4.forEach((t=>t.fn(pO.DJ,this.y4))),this.N4(),this.I4=!0}SJ(t){if(this.jR.hD)return!1;if(0!==this.D4)return!1;const i=this.I2.KI,e=i.XO(t);if(e>=0&&t+TR<i.jn(e))return!1;const s=e>=0?e+1:i.nR(t);if(s<0||s>=i.U)return!1;const n=i.Cn(s);if(ge.uR(t,n).HO(this.LJ).hR>1)return!1;if(0===t&&!this.jR.BD)return this.E4(t,n,2e3),!0;if(me.jI)return this.E4(t,n,250),!0;return!(x.abs(n-t)<=.001)&&(this.L4(n),!0)}E4(t,i,e){this.N4(),this.x4=t,this.jR.yn(Qi.bp,this.C4),this.D4=me.ov((()=>{this.x4===this.jR.sD&&this.L4(i),this.N4()}),e)}N4(){0!==this.D4&&(this.jR.fn(Qi.bp,this.C4),me.rv(this.D4),this.D4=0)}L4(t){this.jR.Gp(t,!1,!0)}j4(){0!==this.O4&&(me.rv(this.O4),this.O4=0),this.jR.fn(Qi.Dp,this.Kl)}R4(){this.I4||0===this.P4&&(this.j4(),this.P4=me.gw(this.z4,250))}b4(){0!==this.P4&&(me._w(this.P4),this.P4=0),this.j4(),this.jR.BD||(this.B4=0)}U4(){return!this.jR.TD&&!this.jR.BD&&0!==this.jR.ND&&!this.jR.hD&&!this.jR.lt&&(this.Q4()||this.M4.OD>=$i.$R)}Q4(){const t=this.jR.sD,i=this.I2.KI,e=i.XO(t);return-1!==e&&i.jn(e)>t+TR}F4(t,i){const e=i.XO(t);return e>-1?i.jn(e):t}constructor(t,i,e,s){this.I2=t,this.M4=i,this.jR=e,this.I4=!1,this.A4=[],this.D4=0,this.O4=0,this.Y4=0,this.x4=0,this.B4=0,this.P4=0,this.V4=1,this.y4=t=>{const i=this.jR.sD,e=t.kJ.gr(i),s=t.kJ.gr(i,TR)&&this.jR.OD<=$i.JR;(e||s)&&this.SJ(i)},this.T4=kn((t=>{if(this.I4)return;if(this.M4.OD<=$i.JR){const t=this.jR.sD;this.SJ(t)||this.z4()}else this.N4()}),100),this.Kl=kn((t=>{this.R4()}),100),this.C4=t=>{t.currentTime!==this.x4&&this.N4()},this.S4=()=>{this.U4()?0===this.P4&&(this.jR.yn(Qi.Dp,this.Kl),this.O4=me.ov((()=>{this.R4()}),3500)):this.b4()},this.z4=()=>{const t=this.Y4,i=this.B4,e=this.jR.sD,s=me.J_(),n=this.I2.KI;if(t!==e)return this.Y4=e,this.B4=s,this.V4=1,void(this.G4=me.RI?2e3:1e3);if(this.U4()&&0!==n.U&&i>0&&s>i+this.G4){let t;const i=this.LJ.UO().HO(n),s=i.sR(e);if(-1!==s){const n=i.Cn(s);if(n-e<1){const e=i.jn(s);0,t=e}}var r;if(!t)t=null==(r=this.W4)?void 0:r.determineStallJumpTarget(),t||(t=e+.01*this.V4,n.gr(t)||(t=this.F4(e,n)));0,this.Y4=t,this.V4++,this.G4=x.min(2*this.G4,1e4),this.L4(t)}},this.M4.yn(fa.CE,this.T4),this.jR.yn(Qi.wp,this.T4),this.jR.yn(SR,this.S4),this.W4=s,this.G4=me.RI?2e3:1e3}};function IR(t){const i=[];if(t.Z4&&i.push(t.Z4.KI),t.H4&&i.push(t.H4.KI),0===i.length)return ge.cR();let e=0;for(const t of i)t.U>0&&(e=x.max(e,t.jn(t.U-1)));const s=t.yJ;let n=new ge([0,e],[!0,s]);for(let t of i)s&&t.U>0&&(t=t.WO(new ge([t.jn(t.U-1),e],[!0,!0]))),n=n.Sn(t);return n}function DR(t,i,e){const s=t.KI;let n,r=s.XO(i);if(r>=0){if(!(r+1<s.U))return Promise.resolve();n=s.Cn(r+1)}else{if(r=s.nR(i),!(r>=0))return Promise.resolve();n=s.Cn(r)}return t.Rb(n,1/0,e)}function ER(t,i,e){if(!t.gr(i)){const s=t.XO(i,e);if(s>=0){const e=t.Cn(s);if(i<e)return e}}return i}r();var kR=ui.l_||ui.f_,LR=ui.p_||ui.M_||ui.Ka,xR=function(t){return t.Q2="closed",t.SN="open",t.tp="ended",t}({}),CR=class extends _O{get Z4(){return this.X4}get H4(){return this.q4}get ct(){if(this.K4)return this.K4;const t=this.WF.duration;return t===ef?1/0:t}J4(t){if(j(t)||t<0)throw new g("Invalid duration");this.t3()?this.i3(t):this.K4=t}i3(t){const i=t===1/0;if(i&&this.WF.setLiveSeekableRange){const t=2**39;this.WF.setLiveSeekableRange(0,t)}this.WF.duration=i?LR?1/0:ef:t,this.K4=void 0}get KI(){return kR?IR(this):function(t,i){let e=i;return e.U>0&&t.yJ&&(e=e.WO(ge.aR(e.jn(e.U-1)))),e}(this,ge.xn(this.CM.buffered))}get bJ(){var t;return null==(t=this.X4)?void 0:t.KI}get MJ(){var t;return null==(t=this.q4)?void 0:t.KI}get PD(){return this.e3.g4().Sn(new ge([0,this.ct],[!0,!0]))}s3(t,i,e,s){this.e3=new MR(t,i,!!e,!!s)}get yJ(){return(!this.X4||this.X4.yJ())&&(!this.q4||this.q4.yJ())}get OD(){return this.WF.readyState}async Aq(){const t=this.gM,i=So(t.n3,(t=>sa(t.vS,"audio"))),e=So(t.n3,(t=>sa(t.vS,"video")));if(this.CM.disableRemotePlayback=!0,await this.r3(),i){const t=new yO;var s;this.o3.m4(t);const e=null!=(s=this.Y2(i.vS))?s:i.vS;this.h3=this.WF.addSourceBuffer(e),this.X4=yR(this,this.jR,i,Q.tN,this.h3,e,t),this.X4.yn(W.ZK,this.q2)}if(e){const t=new yO;var n;this.o3.m4(t);const i=null!=(n=this.Y2(e.vS))?n:e.vS;this.a3=this.WF.addSourceBuffer(i),this.q4=yR(this,this.jR,e,Q.iN,this.a3,i,t),this.q4.yn(W.ZK,this.q2)}this.aJ.$n(this,t)}async r3(){await super.mJ(this.WF),"open"!==this.OD&&await WT(this.WF,"sourceopen")}t3(){if("open"!==this.OD)return!1;const t=this.X4&&this.X4.ca,i=this.q4&&this.q4.ca;return!(t||i)}i4(){this.u3=!0,this.X4&&this.X4.i4(),this.q4&&this.q4.i4(),this.u3=!1,this.l3()}G2(){this.X4&&this.X4.G2(),this.q4&&this.q4.G2()}rJ(t){const i=So(t.n3,(t=>sa(t.vS,"audio"))),e=So(t.n3,(t=>sa(t.vS,"video")));if(this.X4){if(!i)return!1;if(!this.X4.rJ(i))return!1}else if(i)return!1;if(this.q4){if(!e)return!1;if(!this.q4.rJ(e))return!1}else if(e)return!1;return!!super.rJ(t)}async hJ(t){const i=So(t.n3,(t=>sa(t.vS,"audio"))),e=So(t.n3,(t=>sa(t.vS,"video"))),s=[];this.X4&&s.push(this.X4.hJ(i)),this.q4&&s.push(this.q4.hJ(e)),await Promise.all(s),await super.hJ(t)}uJ(t){super.uJ(t)}async Mm(){if(this.WF.removeEventListener("sourceclose",this.d3),ui.s_&&await this.AJ(),this.X4){if(await this.X4.Mm(),this.X4=void 0,gt()&&(ui.s_||ui.$g))try{this.WF.removeSourceBuffer(this.h3)}catch(t){}this.h3=void 0}if(this.q4){if(await this.q4.Mm(),this.q4=void 0,gt()&&(ui.s_||ui.$g))try{this.WF.removeSourceBuffer(this.a3)}catch(t){}this.a3=void 0}this.CM.src&&URL.revokeObjectURL(this.CM.src),this.CM.disableRemotePlayback=!1,this.jR.fn([Qi.bp,Qi.op],this.f3),this.o3.gn(),ui.$g&&await this.AJ(),await super.Mm()}f4(){const t=this.gM,i=t.n3.map((t=>sa(t.vS,"audio")&&this.X4?this.X4.md:sa(t.vS,"video")&&this.q4?this.q4.md:t));this.gM=il({},t,{n3:i})}e4(){this.u3||this.l3()}get g3(){if(!this.yJ)return!1;const t=this.KI;return 0!==t.U&&t.Cn(t.U-1)<=this.jR.sD}l3(){this.g3&&this.t3()&&(this.WF.endOfStream(),this.K4=void 0,this.yo(new Gs(Hn.KK)),this.jR.q2())}Z2(){this.t3()&&(this.yJ?this.l3():void 0!==this.K4&&this.i3(this.K4))}SJ(t){return this.o3.SJ(t)}NJ(){return!0}Y2(t){return jR(this._3,t)}static IJ(t){const i=ea(t.v3);if(void 0===i)return!1;if("function"!=typeof i.isTypeSupported)return!1;const e=new kt(t.v3);for(const i of t.n3)if(void 0===jR(e,i.vS))return!1;return!0}constructor(t,i,e,s,n,r=new kt(t.v3),o){super(t,i,s,n),this.X4=void 0,this.h3=void 0,this.q4=void 0,this.a3=void 0,this.e3=new MR(0,1/0),this.K4=void 0,this.u3=!1,this.d3=()=>{this.yo(new Gs(Hn.$K))},this.w3=()=>{this.yo(new Gs(Hn.iJ))},this.f3=()=>{this.l3()},this.q2=()=>{this.jR.q2()},this._3=r,this.WF=this._3.Fv(),this.WF.addEventListener("sourceclose",this.d3),this.WF.addEventListener("sourceopen",this.w3),this.jR.yn([Qi.bp,Qi.op],this.f3),this.o3=new NR(this,e,this.jR,o)}};function jR(t,i){const e=$r(i),s=vR(e),n="audio/mp4"===e.Hw,r=n&&1===s.length&&"mp4a.40.34"===s[0];if(t.Vv(i)&&(!r||!ui.M_))return i;if(r){const i=['audio/mp4; codecs="mp3"',"audio/mpeg"];for(const e of i)if(t.Vv(e))return e}if(n&&1===s.length&&"flac"===s[0].toLowerCase()){const e=["flac","fLaC","FLAC"];for(const s of e){const e='audio/mp4; codecs="'+s+'"';if(t.Vv(i))return e}}}r(),r();var za=class extends Gs{constructor(t){super(Qi.op),this.currentTime=t}},OR=[Qi.Ep,Qi.mp,Qi.bp,Qi.op,Qi.so,Qi.vp],RR=class extends Bo{get sD(){return this.nV}get m3(){return this.A3}get y3(){return this.b3}get ct(){return this.$A}get hD(){return this.M3}get TD(){return this.hV}get OD(){return this.T3}get BD(){return this.rV}get mD(){return this.oV}set mD(t){this.mD!==t&&(this.oV=t,this.yo(new B(this.sD,this.ZD)))}get ND(){return this.aV}set ND(t){this.ND!==t&&(this.aV=t,this.yo(new rr(this.sD,this.ND)))}get ZD(){return this.Ay}set ZD(t){this.ZD!==t&&(this.Ay=t,this.yo(new B(this.sD,this.ZD)))}Gp(t,i,e){this.nV!==t&&(this.nV=t,this.A3=i,e&&!this.rV?(this.b3=!0,this.yo(new za(this.sD))):(this.b3=!1,this.rV=!0,this.yo(new ll(this.sD))))}eE(){this.hV||(this.hV=!0,this.yo(new Ia(this.sD)))}sE(){this.hV&&(this.hV=!1,this.yo(new us(this.sD)))}Mm(){this.Bo()}constructor(t,i,e,s,n,r,o,h,a,u,c){super(),this.nV=t,this.$A=i,this.M3=e,this.hV=s,this.rV=n,this.oV=r,this.aV=o,this.Ay=h,this.T3=a,this.A3=u,this.b3=c}};function PR(t){return new RR(t.sD,t.ct,t.hD,t.TD,t.BD,t.mD,t.ND,t.ZD,t.OD,!1,t.y3)}function zR(t,i){i.ct===t.ct||j(i.ct)&&j(t.ct)||t.yo(new In(t.ct)),t.mD=i.mD,t.ZD=i.ZD,t.ND=i.ND,i.TD?t.eE():t.sE().catch(ul),i.sD!==t.sD||i.OD>$i.KR&&t.OD===$i.KR?t.Gp(i.sD,i.m3,i.y3):!i.BD&&t.BD?t.yo(new ll(t.sD)):i.BD&&!t.BD&&t.OD>=$i.JR&&t.yo(new ns(t.sD)),!i.hD&&t.hD&&t.yo(new ce(t.sD))}r(),r();var BR=class extends Bo{get OD(){return this.RD()}S3(t){this.NU!==t&&(this.NU=t,this.yo(new hr(this.jR.sD,t)))}N3(){this.S3(this.RD())}tr(){this.S3($i.KR)}Mm(){this.Bo()}constructor(t){super(),this.NU=$i.KR,this.I3=()=>{this.N3()},this.jR=t}};r();var UR=["emptied","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","timeupdate","progress","seeking","seeked"],to=class extends BR{RD(){let t=this.jR.VF.readyState;return t>$i.JR&&this.jR.D3?$i.JR:(this.jR.VF.seeking&&t>$i.Xn&&(t=$i.Xn),t)}Mm(){for(const t of UR)this.jR.VF.removeEventListener(t,this.I3);super.Mm()}constructor(t){super(t);for(const t of UR)this.jR.VF.addEventListener(t,this.I3)}};r();var QR=class extends BR{RD(){if(this.jR.VF.readyState===$i.KR)return $i.KR;const t=this.E3(),i=t?t.jn-t.Cn:0;if(!t)return $i.Xn;const e=this.jR.ND;return this.L3()||i>=3*e?$i.tP:i>=3?$i.$R:$i.JR}E3(){const t=this.jR.sD,i=this.jR.KI.GO(.04),e=i.XO(t);if(!(e<0))return{Cn:t,jn:i.jn(e)}}L3(){if(this.jR.hD)return!0;const t=this.jR.ct,i=this.E3();return!!i&&t-i.jn<=.16666666666666666}Mm(){this.jR.fn([Qi.bp,Qi.op],this.I3);for(const t of UR)this.jR.VF.removeEventListener(t,this.I3);super.Mm()}constructor(t){super(t),this.jR.yn([Qi.bp,Qi.op],this.I3);for(const t of UR)this.jR.VF.addEventListener(t,this.I3)}};r(),r();var FR=[fa.CE,Qi.so,Qi.vp,Qi.bp,Qi.yp,Qi.op,Qi.ap,Qi.tp,ac.ua],YR=class extends Bo{x3(){return(!this.yU.y3||!this.yU.C3)&&this.yU.OD<$i.$R}j3(){return!this.yU.BD&&!(this.yU.TD||this.yU.hD||this.yU.lt||this.x3())}Yn(){const t=this.O3;this.O3=this.j3(),!t&&this.O3&&this.yo(new fo(this.yU.sD))}tr(){this.O3=!1}Mm(){this.Bo(),this.yU.fn(FR,this.fX)}constructor(t){super(),this.O3=!1,this.fX=()=>{this.Yn()},this.yU=t,this.yU.yn(FR,this.fX)}},VR=class extends YR{j3(){return this.R3&&super.j3()}Yn(){this.R3&&(this.CM.paused||this.CM.ended||this.CM.error)&&(this.R3=!1),super.Yn()}tr(){super.tr(),this.R3=!1}Mm(){this.CM.removeEventListener(fa.CO,this.xU),super.Mm()}constructor(t){super(t),this.R3=!1,this.xU=()=>{this.R3=!0,this.Yn()},this.CM=t.VF,this.CM.addEventListener(fa.CO,this.xU)}};r();var Wh=class extends Gs{constructor(t){super(ac.ua),this.lt=t}};function GR(t,i){return t.OP<=i&&t.RP>i}function Wt(t,i){return function(t,i){return yv(t.OP,i.OP,lD)}(t,i)||function(t,i){return yv(t.RP,i.RP,lD)}(t,i)}function WR(t,i){return function(t,i){return yv(t.YP,i.YP,lD)}(t,i)||function(t,i){return yv(t.VP,i.VP,lD)}(t,i)}function mc(t,i,e){let s=function(t,i,e,s,n,r,o){void 0===n&&(n=!1),void 0===r&&(r=0),void 0===o&&(o=t.length);let h=r,a=o-1;for(;h<=a;){const o=h+(a-h>>1),u=s(e(t[o]),i);if(u<0)h=o+1;else if(u>0)a=o-1;else{if(!(n&&o>r&&0===s(e(t[o-1]),i)))return o;a=o-1}}return~h}(t,i,_c,e,!0);if(s<0)return s;for(;s<t.length&&e(i,t[s])===R.Zr;s++)if(t[s].$P(i))return s;return-(s+1)}function ZR(t,i,e){const s=mc(t,i,e);return s>=0?s:-(s+1)}function HR(t){const i=t.Lt;if(!i)return-1;if(t instanceof Bh)return i.P3(t);const e=i.L;if(!e)return-1;const s=mc(e.FE,t,Wt);return s>=0?s:-1}function XR(t,i){const e=function(t,i,e){const s=t.length,n=i.length;let r=0,o=0;const h=[],a=[];for(;r<s&&o<n;){const s=t[r],n=i[o];s===n?(r++,o++):e(n,s)<=0?(h.push(n),o++):(a.push(s),r++)}for(;r<s;)a.push(t[r]),r++;for(;o<n;)h.push(i[o]),o++;return{z3:h,B3:a}}(t,i,Wt);return function(t,i){const e=i.length;for(let s=0;s<e;s++)t[s]=i[s];t.length=e}(t,i),e}r(),r(),r(),r();var qR=class{get FE(){return this.U3}get U(){return this.U3.length}get ga(){if(this.Za){const t=this.U3;this.Za.length=t.length;for(let i=0;i<t.length;i++)this.Za[i]=t[i].ga}else this.Za=this.ma();return this.Za}ma(){return function(t){const i=[];for(let e=0;e<t.U;e++)i[e]=t.Jp(e).ga;return i.item=i=>{const e=0|i,s=t.Jp(e);return s&&s.ga||void 0},_.defineProperty(i,"constructor",{value:hD}),i}(this)}bP(t){const i=this.U3;for(let e=i.length-1;e>=0;e-=1){const s=i[e];if(t.$P(s))return!0}return!1}Jp(t){return this.U3[t]}constructor(t){this.Za=void 0,this.U3=t}};r();var KR=class extends Ii{ma(){return new JR(this.Lt.ga,this.OD)}constructor(t,i){super(Ct.CE),this.Lt=t,this.OD=i}},JR=class extends Vn{constructor(t,i){super("readystatechange"),this.track=t,this.readyState=i}};r();var $R=class extends Ii{ma(){return new tP(this.Lt.ga)}constructor(t){super(Ct.OE),this.Lt=t}},tP=class extends Vn{constructor(t){super("typechange"),this.track=t}};r();var gc=class extends Ii{ma(){return new iP(this.CP.ga)}constructor(t){super(Ct.mE),this.CP=t}},iP=class extends Vn{constructor(t){super("addcue"),this.cue=t}};r();var eP=class extends Ii{ma(){return new sP(this.CP.ga)}constructor(t){super(Ct.AE),this.CP=t}},sP=class extends Vn{constructor(t){super("removecue"),this.cue=t}},an=class extends Bo{get q(){return this.Q3}get L(){return this.F3}Y3(t){return So(this.F3.FE,(i=>i.o===t))}get vU(){return this.$d}set vU(t){this.$d=t}get Ak(){return this.V3}get ga(){return this.Za||(this.Za=this.ma()),this.Za}ma(){return Jr(this)}get o(){return this.Nb}get dk(){return this.SP}get wk(){return this.G3}set wk(t){this.G3=t}get zt(){return this.W3}get wh(){return this.NP}set wh(t){t!==this.NP&&(this.NP=t,this.yo(new kc(this)))}get gs(){return this.iy}get fk(){return this.Z3}get gN(){return this.Ho}set gN(t){this.H3(t)}H3(t){const i=Ha(t);i!==this.gN&&(this.Ho=i,i===P.Ch&&(this.X3.forEach((t=>{t.Yh=!1})),Or(this.X3),this.q3=0),this.yo(new dc(this)))}get OD(){return this.T3}set OD(t){this.T3!==t&&(this.T3=t,this.yo(new KR(this,this.T3)))}get yk(){return this.K3}set yk(t){this.K3=t}get Hw(){return this.Wv}set Hw(t){this.Wv!==t&&(this.Wv=t,this.yo(new $R(this)))}fU(t){if(!t||t.Lt)return;const i=mc(this.J3,t,WR);if(i>=0)return;t.Lt=this;const e=-(i+1);this.J3.splice(e,0,t);const s=ZR(this.L.FE,t,Wt);this.t5(t,s),this.yo(new gc(t))}t5(t,i){this.U3.splice(i,0,t),this.i5(i),t.ez=i,i<this.q3&&(this.q3=i)}eU(t){if(!t||t.Lt!==this)return;const i=this.P3(t);if(i<0)return;t.Yh=!1;const e=this.X3,s=mc(e,t,Wt);s>=0&&zr(e,s);const n=mc(this.J3,t,WR);n>=0&&zr(this.J3,n),this.e5(t,i),this.yo(new eP(t))}e5(t,i){zr(this.U3,i),this.i5(i),t.ez=-1,this.q3>i&&--this.q3}ZP(t){if(!t||t.Lt!==this)return;const i=this.P3(t);if(i<0)return;this.e5(t,i);const e=ZR(this.L.FE,t,Wt);this.t5(t,e);const s=en(this.X3,(i=>i===t));if(s>=0){zr(this.X3,s);const i=ZR(this.X3,t,Wt);this.X3.splice(i,0,t)}}s5(t,i){const e=this.X3,s=this.U3;let n=this.q3,r=!1,o=1/0;i&&(n=0);for(let i=e.length-1;i>=0;i--){const s=e[i];GR(s,t)?s.RP<o&&(o=s.RP):(r=!0,zr(e,i))}for(;n<s.length&&s[n].OP<=t;){const i=s[n];GR(i,t)&&(fh(e,i)||(r=!0,e.push(i)),i.RP<o&&(o=i.RP)),n++}return n<s.length&&s[n].OP<o&&(o=s[n].OP),r&&wv(e,Wt),this.q3=n,o}P3(t){return(-1===t.ez||t.ez>=this.n5)&&this.r5(),t.ez}r5(){const t=this.U3;for(let i=this.n5;i<t.length;i++)t[i].ez=i;this.n5=t.length}i5(t){t<this.n5&&(this.n5=x.max(t,0))}pk(t){this.Ak||(this.gN=t)}gn(){this.Bo();const t=this.U3.slice();for(const i of t)i.gn();Or(this.U3),Or(this.J3),Or(this.X3)}constructor(t,i,e,s,n,r,o,h,a){super(),this.SP=Xc(),this.$d=!1,this.Ho=P.Ch,this.T3=ju.NONE,this.K3=void 0,this.U3=[],this.J3=[],this.X3=[],this.n5=0,this.q3=0,this.Nb=i||"",this.G3=h||"",this.W3=t,this.iy=s||"",this.$d=Boolean(n),this.V3=Boolean(o),this.Wv=r||er.DEFAULT,this.NP=e||"",this.Z3=a||[],this.F3=new qR(this.U3),this.Q3=new qR(this.X3)}};r(),r(),r();var nP=class extends lh{ma(){return new rP(this.CP.ga)}constructor(t,i){super(ko.iP,t),this.hB=i}},rP=class extends oh{constructor(t){super("enter",t)}};r();var oP=class extends lh{ma(){return new hP(this.CP.ga)}constructor(t,i){super(ko.eP,t),this.hB=i}},hP=class extends oh{constructor(t){super("exit",t)}};r();var aP=class extends Ii{ma(){return new uP(this.CP.ga)}constructor(t){super(Ct.SE),this.CP=t}},uP=class extends Vn{constructor(t){super("entercue"),this.cue=t}};r();var cP=class extends Ii{ma(){return new lP(this.CP.ga)}constructor(t){super(Ct.DE),this.CP=t}},lP=class extends Vn{constructor(t){super("exitcue"),this.cue=t}},Sc=class extends G{get dk(){return this.SP}get OP(){return this.o5.startTime}set OP(t){this.o5.startTime=t}get RP(){return this.o5.endTime}set RP(t){this.o5.endTime=t}get O(){return this.qP}set O(t){this.qP=t}get KP(){return!!this.o5.pauseOnExit}set KP(t){this.o5.pauseOnExit=!!t}get Lt(){return this.WP}set Lt(t){this.WP=t}get o(){return this.o5.id||""}get ga(){return this.Za||(this.Za=this.ma()),this.Za}ma(){return ei(this)}get Yh(){return this.Kh}set Yh(t){this.Yh!==t&&(this.Kh=t,t?(this.yo(new nP(this,this.OP)),this.WP&&this.WP.yo(new aP(this))):(this.yo(new oP(this,this.RP)),this.WP&&this.WP.yo(new cP(this))))}$P(t){return this===t||yS(this,t)&&dD(this,t)&&this.tz(t)}tz(t){return V(this.O,t.O)}gn(){this.Bo(),this.o5.removeEventListener("enter",this.h5),this.o5.removeEventListener("exit",this.a5)}constructor(t){super(),this.qP=void 0,this.WP=void 0,this.Za=void 0,this.Kh=!1,this.h5=()=>{this.Yh=!0},this.a5=()=>{this.Yh=!1},this.SP=qI(),this.o5=t,this.YP=t.startTime,this.VP=t.endTime,this.o5.addEventListener("enter",this.h5),this.o5.addEventListener("exit",this.a5)}};r();var dP=class extends Ii{ma(){return new fP(this.Lt.ga)}constructor(t){super(Ct.kE),this.Lt=t}},fP=class extends Vn{constructor(t){super("cuechange"),this.track=t}};function gP(t){if(!t)return;let i=t.THEOplayerVTTRegion;return i||(i=new _P(t),t.THEOplayerVTTRegion=i),i}r(),r();var _P=class{get u5(){return this.c5}get o(){return this.c5.id||""}get ji(){return+this.c5.width||0}set ji(t){this.c5.width=t||0}get nz(){return+this.c5.lines||0}set nz(t){this.c5.lines=t||0}get rz(){return+this.c5.regionAnchorX||0}set rz(t){this.c5.regionAnchorX=t||0}get oz(){return+this.c5.regionAnchorY||0}set oz(t){this.c5.regionAnchorY=t||0}get lz(){return+this.c5.viewportAnchorX||0}set lz(t){this.c5.viewportAnchorX=t||0}get fz(){return+this.c5.viewportAnchorY||0}set fz(t){this.c5.viewportAnchorY=t||0}get cz(){return this.c5.scroll||""}get ga(){return this.Za||(this.Za=mD(this)),this.Za}constructor(t){this.Za=void 0,this.c5=t}};var vP=class extends Sc{get O(){return this.o5.text}set O(t){this.o5.text=t}get Pt(){return this.o5.vertical||""}set Pt(t){this.o5.vertical=t||""}get FP(){return this.o5.snapToLines}set FP(t){this.o5.snapToLines=t}get zP(){return this.o5.line}set zP(t){this.o5.line=t}get qp(){return+this.o5.size}set qp(t){this.o5.size=rh(t,0,100)}get ga(){return this.Za||(this.Za=this.ma()),this.Za}ma(){return aD(this)}tz(t){return fD(this,t)}constructor(t){super(t)}},wP=class extends vP{get QP(){return gP(this.o5.region)}get BP(){return this.o5.lineAlign||"start"}set BP(t){this.o5.lineAlign=t||"start"}get uo(){return this.o5.position}set uo(t){this.o5.position=t}get UP(){return this.o5.positionAlign||"auto"}set UP(t){this.o5.positionAlign=t||"auto"}get PP(){return this.o5.align||"center"}set PP(t){this.o5.align=t||"center"}constructor(t){super(t)}},mP=class extends vP{get QP(){return gP(this.u5)}get u5(){return function(t,i){if(void 0===i)return;let e=t&&t.regions;return e&&e.getRegionById(i)||void 0}(this.o5.track,this.o5.regionId)}get BP(){return function(t){return"middle"===t?"center":t}(this.o5.lineAlign||"start")}set BP(t){this.o5.lineAlign=function(t){return"center"===t?"middle":t}(t||"start")}get uo(){return this.o5.position}set uo(t){this.o5.position=function(t,i){return oD(t,i)}(t,this.PP)}get UP(){return function(t){return nD[t]}(this.o5.positionAlign||"middle")}set UP(t){this.o5.positionAlign=function(t,i){return sD[rD(t,i)]}(t||"center",this.PP)}get PP(){return function(t){return"middle"===t?"center":t}(this.o5.align||"middle")}set PP(t){this.o5.align=function(t){return"center"===t?"middle":t}(t||"center")}constructor(t){super(t)}};function pP(t,i){return t.O===i.O}function AP(t,i){if(0===i.length)return;const e=i.length-1;if(i[e].OP<t.OP)return void yP(i,e,t.OP);const s=i[0];if(s.OP>t.OP)return void(t.RP=s.OP);const n=mc(i,t,Wt);if(n>=0)return;const r=-(n+1),o=r-1;if(o>=0){i[o].OP<t.OP&&yP(i,o,t.OP)}if(r<i.length){const e=i[r];t.RP=e.OP}}function yP(t,i,e){const s=t[i].OP;for(let n=i;n>=0&&t[n].OP===s;n--)t[n].RP=e}function bP(t){return ei(t)}r(),r(),r(),r();var MP=class extends Sc{get O(){return this.l5}get ga(){return this.Za||(this.Za=this.ma()),this.Za}ma(){return bP(this)}tz(t){return pP(this,t)}constructor(t,i){super(t),this.l5=i}};function TP(t){switch(t){case 0:case 1:case 2:case 3:return!0}return!1}function SP(t){switch(t){case 0:return sn;case 1:return Sw;case 2:return Nw;case 3:return da}}function NP(t,i){const e=i.tc,s=t.byteLength,n=se(t);return i.Vp(s-e),Qu(n,e,s).buffer}function IP(t,i){return{id:t||"",data:i instanceof ArrayBuffer?i:void 0}}function DP(t,i,e){const s=ha(t,i);if(!TP(s))return;const n=SP(s);return{id:e,language:wu(t,i,3),description:n(t,i),text:n(t,i)}}function EP(t,i,e){const s=ha(t,i);if(!TP(s))return;const n=SP(s);return{id:e,mimeType:sn(t,i),fileName:n(t,i),description:n(t,i),data:NP(t,i)}}function kP(t,i,e){const s=ha(t,i);if(!TP(s))return;const n=SP(s),r=[];for(;i.tc<t.byteLength;)r.push({involvement:n(t,i),involvee:n(t,i)});return{id:e,entries:r}}function LP(t,i,e){const s=ha(t,i);if(!TP(s))return;const n=SP(s),r=wu(t,i,3),o=ha(t,i),h=ha(t,i),a=n(t,i);let u=!1;const c=[];for(;i.tc<t.byteLength;){let e;if(1===s){let s=Tw(t,i);void 0===s?s=u:u=s,e=Nw(t,i,s)}else e=n(t,i);if(!e||i.tc+4>t.byteLength)break;c.push({text:e,timestamp:Se(t,i)})}return{id:e,language:r,format:o,contentType:h,description:a,entries:c}}function xP(t,i,e){return{id:e,ownerIdentifier:sn(t,i),identifier:NP(t,i)}}function CP(t,i,e){const s=ha(t,i);if(!TP(s))return;const n=SP(s);return{id:e,language:wu(t,i,3),description:n(t,i),text:n(t,i)}}function jP(t,i,e){const s=ha(t,i);if(!TP(s))return;return{id:e,text:SP(s)(t,i)}}function OP(t,i,e){return{id:e,url:sn(t,i)}}function RP(t,i,e){const s=ha(t,i);if(!TP(s))return;const n=SP(s);return{id:e,description:n(t,i),text:n(t,i)}}function PP(t,i,e){const s=ha(t,i);if(!TP(s))return;return{id:e,description:SP(s)(t,i),url:sn(t,i)}}function zP(t,i,e){switch(e){case"COM":return DP(t,i,e);case"GEO":return EP(t,i,e);case"IPL":return kP(t,i,e);case"PIC":return function(t,i,e){const s=ha(t,i);if(!TP(s))return;const n=SP(s),r=wu(t,i,3),o=ha(t,i),h=n(t,i);let a,u;return"--\x3e"===r?(a=r,u=sn(t,i)):(a="image/"+r.toLowerCase(),u=NP(t,i)),{id:e,mimeType:a,pictureType:o,description:h,data:u}}(t,i,e);case"SLT":return LP(t,i,e);case"TXX":return RP(t,i,e);case"UFI":return xP(t,i,e);case"ULT":return CP(t,i,e);case"WXX":return PP(t,i,e);default:if("T"===e.charAt(0))return jP(t,i,e);if("W"===e.charAt(0))return OP(t,i,e)}}function BP(t,i,e){switch(e){case"APIC":return function(t,i,e){const s=ha(t,i);if(!TP(s))return;const n=SP(s),r=sn(t,i),o=ha(t,i),h=n(t,i);let a;return a="--\x3e"===r?sn(t,i):NP(t,i),{id:e,mimeType:r,pictureType:o,description:h,data:a}}(t,i,e);case"COMM":return DP(t,i,e);case"COMR":return function(t,i,e){const s=ha(t,i);if(!TP(s))return;const n=SP(s),r=sn(t,i),o=wu(t,i,8),h=sn(t,i),a=ha(t,i),u=n(t,i),c=n(t,i);let l,d;return i.tc<t.byteLength&&(l=sn(t,i)||"image/",d=NP(t,i)),{id:e,price:r,validUntil:o,contactURL:h,receivedAs:a,nameOfSeller:u,description:c,pictureMimeType:l,sellerLogo:d}}(t,i,e);case"GEOB":return EP(t,i,e);case"IPLS":return kP(t,i,e);case"PRIV":return function(t,i,e){return{id:e,ownerIdentifier:sn(t,i),data:NP(t,i)}}(t,i,e);case"POSS":return function(t,i,e){return{id:e,format:ha(t,i),position:Se(t,i)}}(t,i,e);case"SYLT":return LP(t,i,e);case"TXXX":return RP(t,i,e);case"UFID":return xP(t,i,e);case"USER":return function(t,i,e){const s=ha(t,i);if(!TP(s))return;const n=SP(s);return{id:e,language:wu(t,i,3),text:n(t,i)}}(t,i,e);case"USLT":return CP(t,i,e);case"WXXX":return PP(t,i,e);case"YMID":case"YTYP":case"YSEQ":case"YDUR":case"YCSP":return jP(t,i,e);default:{const s=e.charAt(0);if("T"===s)return jP(t,i,e);if("W"===s)return OP(t,i,e)}}}r(),r();var UP=10;function QP(t,i){return(127&ha(t,i))<<21|(127&ha(t,i))<<14|(127&ha(t,i))<<7|127&ha(t,i)}function FP(t,i){switch(t){case 4:return{d5:_l(i,0),f5:_l(i,1),g5:_l(i,2),_5:_l(i,3)};case 3:return{d5:_l(i,0),f5:_l(i,1),g5:_l(i,2)};case 2:return{d5:_l(i,0),v5:_l(i,1)}}}function YP(t,i,e){switch(e.Rx){case 3:e.Px.f5&&function(t,i){const e=i.tc,s=Se(t,i)+4,n=32768&Tt(t,i);i.Gp(e+s),n&&Se(t,i)}(t,i);break;case 4:e.Px.f5&&function(t,i){const e=i.tc,s=QP(t,i);i.Gp(e+s)}(t,i)}}function VP(t,i){if(t.byteLength-i.tc<UP)return null;if(73!==ha(t,i)||68!==ha(t,i)||51!==ha(t,i))return null;const e=ha(t,i),s=ha(t,i);if(!function(t){switch(t){case 2:case 3:case 4:return!0}return!1}(e))return null;const n=ha(t,i),r=QP(t,i);return{Rx:e,w5:s,Px:FP(e,n),m5:r}}function GP(t,i,e){switch(e){case 2:return function(t,i){if(i.tc+6>t.byteLength)return;return{o:wu(t,i,3),qp:vw(t,i,3)}}(t,i);case 3:return function(t,i){if(i.tc+10>t.byteLength)return;const e=wu(t,i,4),s=Se(t,i);ha(t,i);const n=ha(t,i);return{o:e,qp:s,Px:{v5:_l(n,0),A5:_l(n,1),groupingIdentity:_l(n,2)}}}(t,i);case 4:return function(t,i){if(i.tc+10>t.byteLength)return;const e=wu(t,i,4),s=QP(t,i);ha(t,i);const n=ha(t,i);return{o:e,qp:s,Px:{groupingIdentity:_l(n,1),v5:_l(n,4),A5:_l(n,5),d5:_l(n,6),y5:_l(n,7)}}}(t,i)}}function WP(t){const i=se(t),e=new T(i.byteLength);let s=0;for(let t=0;t<i.byteLength;t++){const n=i[t];255===n&&t++,e[s]=n,s++}return Os(Qu(e,0,s))}function ZP(t,i){const e=i||new J,s=VP(t,e);if(!s)return null;const n=function(t,i,e){const s=[],n=i.tc;let r=Ma(t,n,n+e.m5);const o=new J;switch(i.Vp(e.m5),e.Rx){case 2:case 3:e.Px.d5&&(r=WP(r))}YP(t,i,e);for(;o.tc<r.byteLength;){const t=HP(r,o,e);if(void 0===t)break;s.push(t)}return s}(t,e,s);return{Lx:s,b5:n}}function HP(t,i,e){const s=GP(t,i,e.Rx);if(void 0===s)return;if(0===s.o.charCodeAt(0)||0===s.qp)return;const n=i.tc;let r,o,h=Ma(t,n,n+s.qp);switch(i.Vp(s.qp),e.Rx){case 2:{const t=s;o=h,r=zP(o,new J,t.o);break}case 3:{const t=s,i=new J;!function(t,i,e){const s=e.Px;let n,r,o;s.v5&&(n=Se(t,i)),s.A5&&(r=ha(t,i)),s.groupingIdentity&&(o=ha(t,i))}(h,i,t);o=Ma(h,i.tc,h.byteLength),r=BP(o,new J,t.o);break}case 4:{const t=s,i=new J;t.Px.d5&&(h=WP(h)),function(t,i,e){const s=e.Px;let n,r,o,h;s.groupingIdentity&&(n=ha(t,i)),s.v5&&(r=Se(t,i)),s.A5&&(o=ha(t,i)),s.y5&&(h=QP(t,i))}(h,i,t);o=Ma(h,i.tc,h.byteLength),r=BP(o,new J,t.o);break}}if(!r){const t=cu(se(o));r=IP(s.o,t.buffer)}return r}r();function XP(t){return Rt(t)&&"org.id3"===t.type&&Rt(t.value)}function qP(t){return function(t,i,e){return jP(t,i,e)}(new DataView(t.data),new J,t.key)}function KP(t){switch(t.key){case"APIC":case"PIC":return function(t){return{id:t.key,mimeType:t.type,pictureType:16,description:t.info,data:t.data}}(t);case"GEOB":case"GEO":return function(t){return{id:t.key,mimeType:t.type,fileName:t.name,description:t.info,data:t.data}}(t);case"PRIV":return function(t){return{id:t.key,ownerIdentifier:t.info,data:t.data}}(t);case"TXXX":case"TXX":return function(t){return{id:t.key,description:t.info,text:t.data}}(t);case"WXXX":case"WXX":return function(t){return{id:t.key,description:t.info,url:t.data}}(t);case"YMID":case"YTYP":case"YSEQ":case"YDUR":case"YCSP":return qP(t);default:let i=t.key.charAt(0);if("T"===i)return function(t){return{id:t.key,text:t.data}}(t);if("W"===i)return function(t){return{id:t.key,url:t.data}}(t)}return function(t){return IP(t.key,t.data)}(t)}r(),r();var JP=class extends Bo{get q(){return this.Q3}get vU(){return this.M5?this.M5.default:void 0}get L(){return this.F3}get ga(){return this.Za||(this.Za=this.ma()),this.Za}ma(){return Jr(this)}get o(){return this.TP.id||this.M5&&this.M5.id||""}get dk(){return this.SP}get wk(){return this.TP.inBandMetadataTrackDispatchType||""}get zt(){return this.TP.kind||vs.KB}get wh(){return this.NP}set wh(t){t!==this.NP&&(this.NP=t,void 0!==this.M5&&(this.M5.label=t),this.yo(new kc(this)))}get gs(){return this.TP.language||""}get gN(){return this.Ho}set gN(t){let i=this.gN;this.Ho=Ha(t),this.T5();let e=this.gN;i!==e&&this.yo(new dc(this)),e!==P.Ch&&this.S5(ju.LOADING)}get N5(){return Ha(this.TP.mode)}set N5(t){this.TP.mode=t}get IP(){return this.TP}get OD(){return this.T3}get I5(){return this.M5?+this.M5.readyState||ju.NONE:ju.LOADED}get yk(){return this.K3}get Hw(){return this.Wv}set Hw(t){this.Wv!==t&&(this.Wv=t,this.yo(new $R(this)))}get D5(){return this.E5}set D5(t){this.E5=t,t&&(this.k5=!0,u((()=>{this.k5=!1}),50)),this.T5()}fU(t){t.Lt!==this&&(t.Lt=this,this.TP.addCue(t.o5),this.L5())}eU(t){t.Lt===this&&(t.Lt=void 0,this.TP.removeCue(t.o5),this.L5())}Y3(t){var i;const e=null==(i=this.TP.cues)?void 0:i.getCueById(t);if(!e)return;const s=$P(e);return s&&ou(s)?s[0]:s}sU(t){this.x5>=t||(this.x5=t,$E(this,t))}T5(){let t=this.gN;this.D5||t!==P.Jn?this.N5=t:this.N5=P.vk}C5(){let t=this.gN,i=this.N5;t!==i&&(this.D5||t!==P.Jn||i!==P.vk)&&("metadata"===this.zt&&i===P.Ch?this.gN=t:this.k5&&i===P.Ch&&t===P.Jn?this.N5=t:this.gN=i)}N3(t){this.T3!==t&&(this.T3=t,this.yo(new KR(this,t)))}S5(t){let i=x.max(this.T3,this.I5,t);this.N3(i)}j5(t){let i=$P(t);if(i)return i;if(i=this.O5(t),ou(i))for(let t of i)t.Lt=this;else i.Lt=this;return i}O5(t){const i=this.R5(t);return t.THEOplayerTextTrackCue=i,i}R5(t){return t.endTime<this.x5?[]:XP(t)?(this.Hw=er.ID3,function(t){let i;try{i=KP(t.value)}catch(t){i=IP("")}return new MP(t,i)}(t)):function(t){return t&&t.data instanceof ArrayBuffer}(t)?(this.Hw=er.ID3,function(t){let i=[];try{let e=ZP(new DataView(t.data));if(e)for(let s of e.b5)i.push(new MP(t,s))}catch(t){}return i}(t)):function(t){return"text"in t}(t)?(this.Hw=er.WEBVTT,function(t){return"regionId"in t}(t)?new mP(t):new wP(t)):new Sc(t)}P5(t){let i=[];if(!t)return i;let e=t.length;for(let n=0;n<e;n++){var s;let e=this.j5(null!=(s=t[n])?s:t.item(n));if(ou(e))for(let t of e)i.push(t);else i.push(e)}return i}z5(){let t=this.P5(this.TP.cues),i=XR(this.U3,t);for(let t of i.B3)t.fn(ko.eP,this.L5),t.fn(ko.iP,this.L5),this.yo(new eP(t));for(let t of i.z3)t.yn(ko.iP,this.L5),t.yn(ko.eP,this.L5),this.yo(new gc(t))}s5(){let t=this.P5(this.TP.activeCues),i=XR(this.X3,t);for(let t of i.B3)t.Yh=!1;for(let t of i.z3)t.Yh=!0;(i.z3.length||i.B3.length)&&this.yo(new dP(this))}pk(t){this.gN=t}gn(){this.Bo();const t=this.U3.slice();for(let i of t)i.gn();Or(this.U3),Or(this.X3),this.TP.removeEventListener("cuechange",this.B5),this.TP.removeEventListener("cuechange",this.L5),this.M5&&(this.M5.removeEventListener("load",this.U5),this.M5.removeEventListener("error",this.Q5),Xa(this.M5))}constructor(t,i,e=!0){super(),this.U3=[],this.X3=[],this.Ho=P.Ch,this.T3=ju.NONE,this.K3=void 0,this.Wv=er.DEFAULT,this.k5=!1,this.x5=0,this.B5=()=>{this.T5(),this.TP.removeEventListener("cuechange",this.B5)},this.L5=()=>{this.gN!==P.Ch&&(this.z5(),this.s5(),this.U3.length&&this.S5(ju.LOADING))},this.U5=()=>{this.S5(ju.LOADED)},this.Q5=()=>{this.S5(ju.ERROR)},this.TP=t,this.E5=e,this.TP.addEventListener("cuechange",this.B5),this.TP.addEventListener("cuechange",this.L5),this.M5=i,this.M5&&(this.K3=Jt(this.M5.src),this.M5.addEventListener("load",this.U5),this.M5.addEventListener("error",this.Q5)),this.SP=Xc(),this.NP=t.label||"",this.F3=new qR(this.U3),this.Q3=new qR(this.X3),this.gN=this.N5,Uv((()=>{this.L5(),this.S5(ju.NONE)}))}};function $P(t){return null==t?void 0:t.THEOplayerTextTrackCue}r(),r();function tz(t,i){return ma(t.hB,i.hB)||function(t,i){return t.Lt===i.Lt?Av(HR(t),HR(i)):KE(t.Lt,i.Lt)}(t.CP,i.CP)||function(t,i){return t===i?R.Zr:t===ko.iP?R.fm:R.dm}(t.type,i.type)}var iz=class{tr(){Or(this.F5);for(const t of this.Ol.slice())this.it(t);this.Y5(),this.V5=0,this.An=0,Or(this.G5),this.W5=!1,this.Z5=!1,this.H5=0}tt(t){fh(this.Ol,t)||(this.Ol.push(t),t.yn(Ct.aa,this.X5),t.gN!==P.Ch&&this.q5())}it(t){Ro(this.Ol,t)&&(t.fn(Ct.aa,this.X5),t.gN!==P.Ch&&this.q5())}q5(){const t=this.G5,i=this.Ol.filter((t=>t.gN!==P.Ch));this.G5=i;for(const e of t)fh(i,e)||this.K5(e);for(const e of i)fh(t,e)||this.J5(e);this.H5=0}J5(t){if(t.yn(Ct.mE,this.t6),t.yn(Ct.AE,this.i6),t.yn(Ct.bE,this.e6),t.L.U>0){for(const i of t.L.FE)this.s6.push(i);this.n6()}}K5(t){if(t.fn(Ct.mE,this.t6),t.fn(Ct.AE,this.i6),t.fn(Ct.bE,this.e6),t.L.U>0){for(const i of t.L.FE)Ro(this.F5,i),Ro(this.s6,i);this.n6()}}r6(){this.ta.BD||this.ta.TD?this.Y5():this.n6()}n6(){this.W5&&0!==this.G5.length&&(this.H5-this.ta.sD>.25*this.ta.ND||this.V5||(this.V5=this.h6.o6(this.a6)))}Y5(){this.V5&&(this.h6.u6(this.V5),this.V5=0)}c6(t){0!==this.H5&&(t.Yh!==GR(t,this.ta.sD)?this.H5=0:this.An<t.OP&&t.OP<this.H5?this.H5=t.OP:this.An<t.RP&&t.RP<this.H5&&(this.H5=t.RP))}l6(){if(!this.W5)return;if(0===this.G5.length)return;if(this.ta.BD)return;const t=this.G5,i=this.An,e=this.ta.sD,s=e-i<-.1;let n=this.Z5||s;n&&e>i&&e-i<.1&&(n=!1),this.Z5=!1;const r=[];let o=1/0;for(const i of t){const t=i.s5(e,n);t<o&&(o=t);for(const t of i.q.FE)r.push(t)}const h=this.F5.slice();if(n);else for(const s of t)qE(s,i-si,e,h);for(let t=h.length-1;t>=0;t--)fh(r,h[t])&&zr(h,t);const a=[];if(!n)for(let t=h.length-1;t>=0;t--){const s=h[t];s.OP>i&&s.RP<=e&&(a.push(s),zr(h,t))}for(const t of this.s6)Ro(a,t);Or(this.s6);const u=[],c=[];for(const t of a)t.Yh||u.push(new nP(t,t.OP)),u.push(new oP(t,x.max(t.OP,t.RP))),t.Yh=!1;for(const t of h)t.Yh&&(u.push(new oP(t,x.max(t.OP,t.RP))),t.Yh=!1);for(const t of r)t.Yh||(u.push(new nP(t,t.OP)),t.Yh=!0);u.sort(tz);for(const t of u){const i=t.CP;i.yo(t);const e=i.Lt;e&&(t.type===ko.iP?e.yo(new aP(i)):e.yo(new cP(i)),fh(c,e)||c.push(e))}c.sort(KE);for(const t of c)t.yo(new dP(t));this.An=e,this.F5=r,this.H5=o}gn(){this.tr(),this.ta.fn(Qi.Dp,this.d6),this.ta.fn(Qi.so,this.f6),this.ta.fn(fa.CO,this.d6),this.ta.fn(Qi.vp,this.d6),this.ta.fn(Qi.bp,this.g6),this.ta.fn(Qi.yp,this.d6)}constructor(t,i){this.Ol=[],this.V5=0,this.An=0,this.F5=[],this.s6=[],this.G5=[],this.W5=!1,this.Z5=!1,this.H5=0,this.a6=()=>{this.V5=0,this.l6(),this.r6()},this.d6=()=>{this.l6(),this.r6()},this.f6=()=>{this.W5=!0,this.d6()},this.g6=()=>{this.Z5=!0,this.H5=0,this.Y5()},this.X5=()=>{this.q5(),this.l6(),this.r6()},this.t6=t=>{const i=t.CP;fh(this.s6,i)||this.s6.push(i),this.c6(i),this.n6()},this.i6=t=>{const i=t.CP;Ro(this.F5,i),Ro(this.s6,i),this.c6(i),this.n6()},this.e6=t=>{this.c6(t.CP),this.n6()},this.h6=i,this.ta=t,t.yn(Qi.Dp,this.d6),t.yn(Qi.so,this.f6),t.yn(fa.CO,this.d6),t.yn(Qi.vp,this.d6),t.yn(Qi.bp,this.g6),t.yn(Qi.yp,this.d6),this.n6()}};r();var Yn=class{o6(t){return Qn(t)}u6(t){du(t)}},ez=new Yn,zh=class extends iz{constructor(t,i=ez){super(t,i)}};r(),r();var sz=class extends Bh{get ga(){return this.Za||(this.Za=bP(this)),this.Za}tz(t){return pP(this,t)}constructor(t,i,e){super(t,1/0,i,!1,e)}};r(),r();var nz=class extends an{constructor(t,i,e=er.DEFAULT){super(vs.tU,"",i||"","",!1,e,!1,t)}},rz=class extends nz{fU(t){AP(t,this.U3),super.fU(t)}ma(){return Jr(this)}constructor(t,i){super(t,i),this.Hw=er.ID3}},oz=class extends rz{get o(){return this.TP.id||""}get wk(){return this.TP.inBandMetadataTrackDispatchType||""}get gs(){return this.TP.language||""}H3(t){super.H3(t),this.N5=this.gN}get N5(){return Ha(this.TP.mode)}set N5(t){this.TP.mode=t}get IP(){return this.TP}fU(t){super.fU(t),t.o5.track!==this.TP&&this.TP.addCue(t.o5)}eU(t){super.eU(t),t.o5.track===this.TP&&this.TP.removeCue(t.o5)}sU(t){this.x5>=t||(this.x5=t,$E(this,t))}S5(t){this.OD=x.max(this.OD,t)}z5(){let t=this.TP.cues;if(!t)return;const i=t.length,e=[],s=[];for(let o=0;o<i;o++){var n;const i=null!=(n=t[o])?n:t.item(o);if(XP(i)&&i.endTime>=this.x5){var r;const t=null!=(r=null==i?void 0:i.THEOplayerTextTrackCue)?r:new hz(i);e.push(t)}else s.push(i)}wv(e,Wt);let o=XR(this.L.FE.slice(),e);for(const t of s)this.TP.removeCue(t);for(let t of o.B3)t.gn(),this.eU(t);for(let t of o.z3)this.fU(t)}gn(){this.TP.removeEventListener("cuechange",this.L5),super.gn()}constructor(t){super(t.inBandMetadataTrackDispatchType,t.label),this.x5=0,this.L5=()=>{this.gN!==P.Ch&&(this.z5(),this.S5(ju.LOADED))},this.TP=t,this.TP.addEventListener("cuechange",this.L5),this.gN=this.N5,Uv((()=>{this.L5()}))}},hz=class extends sz{gn(){super.gn(),this.o5.THEOplayerTextTrackCue=void 0}constructor(t){super(t.startTime,KP(t.value),t.id),this.o5=t,this.o5.THEOplayerTextTrackCue=this}};function az(t){return"TXXX"===t.id||"TXX"===t.id}r(),r();var uz=class extends ik{_6(){this.v6.yn(di.gE,this.OF),this.v6.yn(di.vE,this.RF)}w6(){this.v6.fn(di.gE,this.OF),this.v6.fn(di.vE,this.RF)}m6(t){const i=t.L.FE[0];if(!cz(i))return;const e=function(t){const i=t.match(lz);if(!i)return;return{Lt:i[1],gs:i[2]}}(i.O.description),s=e.Lt,n=e.gs;if(this.p6(s,n))return;const r=this.cU.dE(vs.KB,t.o,s,n,!1,er.TTML);this.tt(r),this.A6.set(t.dk,r);for(let i of t.L.FE)cz(i)&&this.y6(i);t.yn(Ct.mE,this.b6)}p6(t,i){return this.Z.FE.some((e=>e.wh===t&&e.gs===i))}y6(t){if(!t.Lt)return;const i=this.A6.get(t.Lt.dk),e=NE(t.O.text,i,{jB:0,OB:1/0,RB:t.OP});for(let t of e)i.fU(t)}async tr(){for(let t of this.v6.FE)t.fn(Ct.mE,this.b6);for(let t of this.Z.FE)this.cU._U(t);this.A6.clear(),await super.tr()}async gn(){this.w6(),await super.gn()}constructor(t,i){super(),this.cU=t,this.v6=i,this.A6=rn(),this.OF=async t=>{const i=t.Lt;if(i.Hw||await i.Fm(Ct.OE),i.Hw===er.ID3){for(;0===i.L.U;)await i.Fm(Ct.mE);this.m6(i)}},this.RF=t=>{const i=t.Lt;if(i.Hw!==er.ID3||!this.A6.has(i.dk))return;const e=this.A6.get(i.dk);this.it(e),this.cU._U(e),i.fn(Ct.mE,this.b6)},this.b6=t=>{cz(t.CP)&&this.y6(t.CP)},this._6()}};function cz(t){return function(t){return az(t)&&lz.test(t.description)}(t.O)}var lz=/^Track:(.+),Lang:(.+)$/;r(),r();var dz=[Qi.Hm,Qi.Zm,Qi.kp,Qi.xp];r();var Qs=class extends Gs{get error(){return this.errorObject.message}get licenseAcquisitionURL(){return this.errorObject.url}get status(){return this.errorObject.status}get statusText(){return this.errorObject.statusText}get licenseAcquisitionMessage(){return this.errorObject.response}get systemCode(){return this.errorObject.systemCode}constructor(t){super(Qi.Zm),this.errorObject=t}};r(),r(),r();var xc=class extends Gs{constructor(t){super(Qi.Hm),this.M6=t}};r();var fz=class extends Gs{constructor(t){super("Lp"),this.M6=t}},gz=new Ku,_z=class extends Gs{constructor(t){super("Ws"),this.session=t}},vz=class extends Bo{get T6(){return this.S6}Ob(){return this.N6=!0,gz.Wo((t=>this.I6(t)),this.bM.wm)}async I6(t){try{re(t),await this.D6.VU(t);const i=await this.D6.GU(this.E6.qw,this.E6.Yp,t);await this.k6.Ob(this.E6.qw,this.E6.Yp,i)}catch(t){wh(t);const i=t instanceof fs?t.hA:void 0,e=new ti(Do.CONTENT_PROTECTION_INTERNAL_ERROR,"Error while performing the CDM request",t,void 0,void 0,void 0,void 0,i);throw this.Ss(e),e}}async KU(t,i){let e;try{e=function(t){return Mr(t,Gw())}(t)?await this.D6.oQ(new T(t),this.bM.wm):await this.D6.hQ(new T(t),i,this.bM.wm)}catch(t){if(F(t))return;throw t}if(this.bM.wm.gm)return;const s=this.L6,n=new pa;this.L6=n;try{await this.k6.Yn(e),await Bn(100)}catch(t){const i=t instanceof fs?t.hA:void 0;throw new ti(Do.CONTENT_PROTECTION_INTERNAL_ERROR,"Error while applying license response",t,void 0,void 0,void 0,void 0,i)}finally{void 0!==s&&await s.rA,n.eA(),this.L6===n&&(this.L6=void 0)}}Ss(t){const i=t instanceof ti?t:new ti(Do.CONTENT_PROTECTION_ERROR,t.message,t);this.yo(new Qs(i)),this.Ws()}x6(){this.k6.fn("Rp",this.Qb),this.k6.fn(Qi.xp,this.C6),this.k6.fn("lt",this.j6),this.O6=!1,this.S6=!1,this.bM.Dm(),this.yo(new _z(this))}async Ws(){let t;this.Bo();do{t=this.L6,void 0!==t&&await t.rA}while(this.L6!==t);this.x6(),await this.k6.Ws().catch(ul)}constructor(t,i,e){super(),this.k6=t,this.D6=i,this.E6=e,this.N6=!1,this.O6=!1,this.bM=new Ai,this.S6=!1,this.Qb=t=>{if(!this.bM.wm.gm)switch(t.zp){case"license-request":case"license-renewal":this.KU(t.Rp,t.Bp).catch((t=>this.Ss(t)));break;default:this.Ss(new ti(Do.CONTENT_PROTECTION_NOT_SUPPORTED,"Unsupported CDM message type: "+t.zp))}},this.C6=t=>{this.k6.Op.tA(((t,i)=>{switch(t){case"usable":me.ov((()=>{this.O6=!0,this.yo(new xc(i))}),100);break;case"expired":case"status-pending":default:break;case"output-restricted":case"internal-error":this.yo(new fz(i))}})),this.S6=!0,this.yo(t)},this.j6=t=>{this.Ss(new ti(Do.CONTENT_PROTECTION_INTERNAL_ERROR,"Unknown CDM error"))},t.yn("Rp",this.Qb),t.yn(Qi.xp,this.C6),t.yn("lt",this.j6),t.Ib.then((()=>this.x6()),(t=>this.Ss(t)))}},wz=class extends Bo{get Gb(){return this.Bb}get R6(){return this.P6.every((t=>t.T6))}YU(){return this.z6.YU()}B6(t){return this.U6||(this.U6=this.Q6(t)),this.U6}async Q6(t){re(t);const i=await this.z6.oQ(new T(Gw()),t);if(re(t),!this.Vb)throw new g("Invalid MediaKeys when setting ServerCertificate");await this.Vb.Wb(i.buffer)}async F6(t){if(!this.Vb)throw new g("Invalid MediaKeys when creating KeySession");try{this.Y6.push(t);const i=await this.Vb.Yb("temporary"),e=new vz(i,this.z6,t);return this.P6.push(e),e.yn(dz,this.V6),e.yn("Ws",this.G6),e}finally{Ro(this.Y6,t)}}W6(t){if(t.Z6)return!1;for(const i of this.P6)if(mz(i.E6,t))return!0;for(const i of this.Y6)if(mz(i,t))return!0;return!1}async gn(){this.Vb=void 0,this.Bo();const t=this.P6.slice();Or(this.P6),await Promise.all(t.map((t=>t.Ws()))),this.H6=void 0,this.z6.Mm()}constructor(t,i,e){super(),this.P6=[],this.U6=void 0,this.Y6=[],this.V6=t=>{if(t instanceof Wv)return null!=this.H6||(this.H6=new Vw),t.Op.tA(((t,i)=>{this.H6.$p(i,t)})),void(this.R6&&this.yo(new Wv(this.H6)));this.Ds(t)},this.G6=t=>{t.session.fn(dz,this.Ds),t.session.fn("Ws",this.G6),Ro(this.P6,t.session),this.H6=void 0},this.Bb=t,this.Vb=i,this.z6=e}};function mz(t,i){return!t.Z6&&t.qw===i.qw&&Mr(t.Yp,i.Yp)}var jc=class extends Bo{get X6(){var t;return null==(t=this.Bb)?void 0:t.Gb}get gY(){return this.z6}set gY(t){this.z6=t}$n(t,i){this.WF=t,this.hJ(i)}hJ(t){this.gM=t,this.q6(this.bM.wm).catch(bu)}uJ(t){this.K6(t,this.bM.wm).catch(bu)}async K6(t,i){var e,s;re(i);var n;if(null==(e=this.gM)?void 0:e.KF)for(const e of null!=(n=null==(s=this.gM)?void 0:s.KF)?n:[]){var r;const s=So(t,(t=>t.J6===e.Gb.Jw));if(void 0!==(null==s?void 0:s.t9)&&!(null==(r=e.SF)?void 0:r.some((t=>Mr(s.t9,t)))))try{return void await this.i9(e.Gb.qw,s.t9,i)}catch(t){wh(t)}}}async q6(t){if(!me.Ys.bv||!await this.e9(t))return this.gM&&this.gM.s9?await this.n9(t):void 0}async e9(t){var i,e;if(!(null==(i=this.gM)?void 0:i.KF))return!1;let s=!1;var n;for(const i of null!=(n=null==(e=this.gM)?void 0:e.KF)?n:[]){var r;for(const e of null!=(r=i.SF)?r:[])try{await this.i9(i.Gb.qw,e,t),s=!0}catch(t){wh(t)}if(s)return!0}return!1}async i9(t,i,e){if(re(e),!i.byteLength)return;if(!this.gM||!this.gM.KF.length)throw new ti(Do.CONTENT_PROTECTION_CONFIGURATION_MISSING,"Missing configuration for encrypted content");if(t!==Ca&&t!==xt&&t!==U_)return void 0;const s=jN(t,i),n=this.gM.KF;let r;for(const i of n){re(e);const n=s[i.Gb.Kw];if(n&&i.Gb.qw===t)try{const t=await this.r9(i,e);t.YU()&&await t.B6();const s=this.jR.gD,r={qw:i.Gb.qw,Yp:n,Z6:s};if(this.o9(t,r)){const i=await t.F6(r);await i.Ob()}return}catch(t){wh(t),r=t}}throw await me.ww()?new ti(Do.CONTENT_PROTECTION_NOT_SUPPORTED,"Encrypted content over an insecure connection is not supported",r):new ti(Do.CONTENT_PROTECTION_NOT_SUPPORTED,"Cannot create content decryption session",r)}async n9(t){var i;const e=null==(i=this.gM)?void 0:i.KF;if(e)for(const i of e){re(t);try{const e=await this.r9(i,t);return void(e.YU()&&await e.B6())}catch(t){wh(t)}}}o9(t,i){return me.Ys.yv||this.jR.FR.QR||!t.W6(i)}r9(t,i){return this.Go.Wo((i=>this.h9(t,i)),i)}async h9(t,i){if(re(i),!this.gM||!this.z6||!this.WF)throw new g("Not initialized");if(this.Bb){if(this.Bb.Gb!==t.Gb)throw new g("Internal key system error");return this.Bb}const e=this.z6,s=il({},t,{MY:t.MY.map((i=>{var s;return il({},i,{persistentState:null!=(s=i.persistentState)?s:e.cQ(t.Gb),tM:i.tM||e.tM(t.Gb)})}))}),n=await this.WF.sJ(s.Gb,s.MY),r=e.TF(s),o=new wz(s.Gb,n,r);return o.yn(dz,this.Ds),this.Bb=o,o}Ss(t){if(F(t))return;const i=t instanceof ti?t:new ti(Do.CONTENT_PROTECTION_ERROR,t.message,t);this.yo(new Qs(i))}async tr(){this.WF=void 0,this.gM=void 0,this.bM.Dm(),this.bM=new Ai,await this.a9()}async a9(){await this.Go.Dm();const t=this.Bb;t&&(t.fn(Qi.kp,this.Ds),this.Bb=void 0,await t.gn())}async Mm(){this.Bo(),this.jR.fn(xn.$m,this.u9),await this.tr(),await this.Go.gn()}constructor(t){super(),this.bM=new Ai,this.Go=new Ku,this.gM=void 0,this.z6=void 0,this.WF=void 0,this.Bb=void 0,this.u9=t=>{this.i9(t.qw,t.Yp,this.bM.wm).catch((t=>this.Ss(t)))},this.jR=t,this.jR.yn(xn.$m,this.u9)}};r();var pz=class extends Gs{constructor(t){super(Qi.ap),this.currentTime=t}};r();var Az=class extends Bo{get OD(){return void 0!==this.c9?this.c9.OD:$i.KR}N3(){var t;null==(t=this.c9)||t.N3()}tr(){var t;null==(t=this.c9)||t.tr()}Mm(){this.Bo(),void 0!==this.c9&&(this.c9.Mm(),this.c9=void 0)}l9(t){if(this.c9===t)return;const i=this.OD;void 0!==this.c9&&this.c9.Mm(),this.c9=t,void 0!==t&&(t.yn(fa.CE,this.Ds),t.N3());const e=this.OD;i!==e&&this.yo(new hr(this.d9.sD,e))}constructor(t){super(),this.d9=t}};r();var yz=class extends an{get ga(){var t;return null!=(t=this.Za)?t:this.Za=bz(this)}f9(t,i,e){const s=new Sh(t,i,e,!1);return this.fU(s),s}g9(t){this.eU(t)}constructor(t,i,e){super(t,i,"",e,void 0,er.WEBVTT)}};function bz(t){return Gr(Jr(t),{get type(){return t.Hw},addCue:(i,e,s)=>t.f9(i,e,s).ga,removeCue(i){t.g9(i.jP)}})}r();var Mz=class extends JP{get ga(){var t;return null!=(t=this.Za)?t:this.Za=bz(this)}f9(t,i,e){const n=this.O5(new s.VTTCue(t,i,e));return this.xN?this.fU(n):this._9.push(n),n}g9(t){Ro(this._9,t),this.eU(t)}gn(){var t;super.gn(),null==(t=this.M5)||t.removeEventListener("load",this.v9),Or(this._9)}constructor(t,i){var e;super(t,i),this.xN=!1,this._9=[],this.v9=()=>{var t;null==(t=this.M5)||t.removeEventListener("load",this.v9),this.xN=!0;for(const t of this._9)this.fU(t);Or(this._9)},null==(e=this.M5)||e.addEventListener("load",this.v9),this.Hw=er.WEBVTT}},Tz=ui.l_||ui.f_,Sz=ui.H_,Nz=ui.M_,Iz=ui.M_&&ui.Ka,Dz=class extends Bo{get D3(){return this.w9}get KI(){return this.WF?this.WF.KI:ge.cR()}get $I(){const t=this.ZF;if(!t||j(t.getTime()))return;const i=1e3*this.sD;return new Date(t.getTime()+i)}get ZF(){if(this.VF.getStartDate)return this.rV&&this.m9||(this.m9=this.VF.getStartDate()),this.m9}get sD(){return this.p9?this.p9.sD:void 0!==this.A9?this.A9:this.CM.currentTime}get Ou(){return this.Xu}get ct(){return this.p9?this.p9.ct:this.WF?this.WF.ct:this.CM.duration}get hD(){return this.BD?this.y9():this.p9?this.p9.hD:this.CM.ended||this.b9}y9(){return void 0!==this.A9&&this.ct===this.A9}get lt(){return this.FF}get VF(){return this.CM}get TD(){return this.M9?this.T9:this.p9?this.p9.TD:this.CM.paused}get kD(){return this.Fo.WO(ge.xn(this.CM.played))}get Ti(){return this.CM.offsetHeight*me.Ys.pv}get ji(){return this.CM.offsetWidth*me.Ys.pv}get ka(){return this.Zo}get aY(){return this.Qo}get OD(){return this.S9.OD}get PD(){return this.WF?this.WF.PD:ge.cR()}get BD(){return this.p9?this.p9.BD:this.rV||this.CM.seeking&&!this.b3}get y3(){return this.p9?this.p9.y3:this.b3}get C3(){return 0!==this.N9}get mD(){return this.p9?this.p9.mD:this.CM.muted}set mD(t){this.p9?this.p9.mD=t:(this.CM.muted=t,this.I9())}get ND(){return this.p9?this.p9.ND:void 0!==this.D9?this.D9:this.CM.playbackRate}set ND(t){this.p9?this.p9.ND=t:this.TD||this.w9?(this.D9=t,this.E9()):(this.D9=void 0,this.CM.playbackRate=t,this.E9())}E9(){const t=this.ND;this.k9!==t&&(this.k9=t,this.yo(new rr(this.sD,t)))}get L9(){return this.eV}get ZD(){return this.p9?this.p9.ZD:this.CM.volume}set ZD(t){this.p9?this.p9.ZD=t:(this.CM.volume=t,this.I9())}I9(){const t=this.ZD,i=this.mD;this.x9===t&&this.C9===i||(this.x9=t,this.C9=i,this.yo(new B(this.sD,this.ZD)))}wD(){return Zj(this.CM)}sE(){this.j9||(this.j9=!0);const t=this.O9();return this.R9(),t}R9(){this.M9?this.T9&&(this.T9=!1,this.yo(new us(this.sD))):this.P9()}P9(){if(this.p9)this.p9.sE();else{ui.M_&&!ui.Ka&&this.CM.preload===Ac.HY&&(this.CM.preload=Ac.tU);const t=this.ND,i=this.CM.play();t!==this.VF.playbackRate&&(this.ND=t),this.b9=!1,yt(i)?i.then(this.z9,this.B9):this.U9.j3()&&this.Q9()}}eE(){this.M9?this.T9||(this.T9=!0,this.yo(new Ia(this.sD))):this.F9()}F9(){this.p9?this.p9.eE():(this.CM.pause(),this.U9.Yn()),this.Y9(new Rh)}O9(){const t=new pa;return this.V9.push(t),t.rA}G9(){for(const t of this.V9)t.eA(void 0);Or(this.V9)}Y9(t){for(const i of this.V9)i.sA(t);Or(this.V9)}Q9(){this.M9||this.p9||this.G9()}W9(t){this.M9||this.p9||this.Y9(t)}Gp(t,i,e){void 0===i&&(i=!1),void 0===e&&(e=!1),this.p9?this.p9.Gp(t,i,e):(this.Z9.Dm(),this.Z9=new Ai,this.H9=Te(this.X9(t,i,e,this.H9,this.Z9.wm),this.Z9).catch(ul))}UF(t){const i=this.ZF;if(!i||j(i.getTime()))return;const e=(t.getTime()-i.getTime())/1e3;this.Gp(e)}async X9(t,i,e,s,n){try{if(this.A9=t,this.q9=t,this.K9=me.J_(),e&&!this.rV?this.b3=!0:(this.rV=!0,this.b3=!1),this.b9&&!this.y9()&&(this.b9=!1),this.b3?this.yo(new za(this.sD)):this.yo(new ll(t)),await s.catch(ul),re(n),this.WF&&!this.WF.NJ())return void this.J9();for(this.t8&&this.i8(),this.S9.OD===$i.KR&&await this.S9.Fm(fa.CE,n);0===this.CM.seekable.length||Iz&&!this.j9;){const t={stack:[],error:void 0,hasError:!1};try{const i=lo(t,Ai.xm([n]),!1);await Promise.race([WT(this.CM,"timeupdate",i.wm),Bn(100,i.wm)]),re(n)}catch(i){t.error=i,t.hasError=!0}finally{os(t)}}let o=ER(this.KI,t,.05),h=this.PD,a=!0,u=!1;for(;;){const t={stack:[],error:void 0,hasError:!1};try{var r;if(h=this.PD,h.U>0&&!h.gr(o)&&(o=h.QO(o),a=!0),i&&!this.CM.fastSeek){const t=this.KI;if(!t.gr(o)){const i=ER(t,o,1);i!==o&&(o=i,a=!0)}}if(Nz){const t=this.e8();void 0!==t&&o>t&&(o=t,a=!0)}if(!u){const t=this.s8();void 0!==t&&o>t&&(u=!0,await this.n8(t,!1,n),await WT(this.CM,"seeked",n),re(n),a=!0)}if(a){a=!1,await this.n8(o,i,n),re(n);let t=this.sD;h=this.PD,o=h.QO(o);let e=1;for(;x.abs(o-t)>=si;)h=this.PD,o=kz(o,h,e),await this.n8(o,i,n),re(n),t=this.sD,e++}if(!(this.CM.seeking||this.S9.OD<$i.JR))break;const e=lo(t,Ai.xm([n]),!1);await Promise.race([WT(this.CM,"seeked",e.wm),this.Fm([Qi.wp,Qi.Km],e.wm),this.S9.Fm(fa.CE,e.wm),null==(r=this.WF)?void 0:r.Fm(Hn.KK,e.wm)].filter(Rt)),re(n)}catch(i){t.error=i,t.hasError=!0}finally{os(t)}}this.J9()}catch(t){if(F(t))return;0}}async n8(t,i,e){re(e);let s=this.PD;if(t=s.QO(t),this.t8){let i=!0;for(;i||this.S9.OD<$i.$R;){const n={stack:[],error:void 0,hasError:!1};try{if(s=this.PD,s.gr(t)||(t=s.QO(t),i=!0),i){i=!1,this.A9=t,this.r8(this.sD);continue}const r=lo(n,Ai.xm([e]),!1);await Promise.race([this.Fm(Qi.Km,r.wm),this.S9.Fm(fa.CE,r.wm)])}catch(t){n.error=t,n.hasError=!0}finally{os(n)}}re(e)}const n=WT(this.CM,"seeking",e);i&&this.CM.fastSeek?this.CM.fastSeek(t):this.CM.currentTime=t,this.A9=void 0,this.r8(this.sD),this.CM.seeking&&await n}e8(){if(!this.WF||!this.WF.yJ)return;const t=this.WF.bJ,i=this.WF.MJ,e=t&&i?t.Sn(i):t||i;if(!e||0===e.U)return;const s=e.Cn(e.U-1),n=e.jn(e.U-1);return x.max(s,n-.001)}s8(){if(!this.WF||!this.WF.yJ)return;const t=this.WF.MJ;if(!t||0===t.U)return;const i=t.Cn(t.U-1);let e=t.jn(t.U-1)-.02;return e-=.001,x.max(i,e)}r8(t){this.q9!==t&&(this.q9=t,this.b3?this.yo(new za(t)):this.yo(new ll(t)))}J9(){const t=this.b3;this.rV=!1,this.b3=!1,this.K9=0,this.q9=NaN,this.t8&&this.o8(),t?(this.yo(new pz(this.sD)),this.h8()):(this.yo(new ns(this.sD)),this.a8=!0),this.Pq()}i8(){this.M9||(this.T9=this.TD,this.M9=!0,this.F9())}o8(){this.M9&&(this.M9=!1,this.T9||this.R9())}IJ(t){for(const i of t){if(i.Hw===vl.wU&&wO.IJ(i,this.CM))return i;if(i.Hw===vl.mU&&CR.IJ(i))return i}}be(){this.eV=!1,jd(this.CM)&&(this.CM.style.display="none")}ge(){this.eV=!0,jd(this.CM)&&(this.CM.style.display="block")}get nt(){return this.u8}get zl(){return this.gV}dE(t,i,e,s,n,r,o,h,a){const u=new an(t,i,e,s,n,r,o,a,h);return this.Ol.tt(u),this.c8.tt(u),u}uY(t){const{zt:i,wh:e,gs:n}=t;if("function"==typeof this.CM.addTextTrack&&"function"==typeof s.VTTCue){const{track:t,trackElement:s}=this.l8("data:text/vtt,WEBVTT%0A%0A",i,e,n);let r=new Mz(t,s);return this.d8.tt(r),this.f8.push(r),r}const r=new yz(i,e,n);return this.Ol.tt(r),this.c8.tt(r),r}nY(){return!0}oY(t,i,e,s,n){const{track:r,trackElement:o}=this.l8(t,i,e,s,n),h=new JP(r,o);return this.d8.tt(h),this.f8.push(h),h}l8(t,i,e,s,n){const r=h.createElement("track");r.src=Jt(t),r.kind=i,r.label=null!=e?e:"",s&&(r.srclang=s),r.default=!!n,r.id=Po(),this.CM.appendChild(r);return{track:this.CM.textTracks.getTrackById(r.id),trackElement:r}}_U(t){this.Ol.it(t),this.c8.it(t)}cY(){for(const t of this.Ol.FE.slice())t.gn();this.Ol.tr();for(const t of this.f8.slice())this.d8.it(t),t.gn();Or(this.f8)}TY(){let t=this.CM.textTracks;t&&t.addEventListener&&(t.addEventListener("addtrack",this.g8),t.addEventListener("removetrack",this._8),t.addEventListener("change",this.v8))}fY(){let t=this.CM.textTracks;t&&t.removeEventListener&&(t.removeEventListener("addtrack",this.g8),t.removeEventListener("removetrack",this._8),t.removeEventListener("change",this.v8))}w8(t){t.mode=P.vk;const i=new oz(t);this.d8.tt(i),this.c8.tt(i)}m8(t,i){const e=()=>{xz(t)&&(t.removeEventListener("cuechange",e),this.d8.tt(new JP(t,i)))};t.addEventListener("cuechange",e),t.mode=P.vk}p8(t){let i=this.CM.getElementsByTagName("track");for(let e=0;e<i.length;e++){let s=i[e]||i.item(e);if(s.track===t)return s}}A8(){if(0===this.d8.U)return;const t=this.PD;if(0===t.U)return;const i=t.Cn(0);if(this.y8!==i){for(const t of this.d8.FE)t.sU(i);this.y8=i}}$n(t){return this.b8.Wo((async i=>{if(re(i),this.WF)throw new g("Already loaded a media source");let e;if(t.Hw===vl.wU)e=new wO(t,this,this.aJ,this.hm),this.t8=!1,this.S9.l9(this.M8());else{if(t.Hw!==vl.mU)throw new g("Unsupported configuration");{this.t8=Tz;const i=this.M8();e=new CR(t,this,i,this.aJ,this.hm,void 0,this.W4),this.S9.l9(i),Sz&&(this.yn(Qi.Dp,this.T8),this.S9.yn(fa.CE,this.S8))}}return this.WF=e,await e.Aq(),e}))}M8(){return this.t8?new QR(this):new to(this)}N8(){if(this.w9)return;const t=this.ND;this.w9=!0,this.ND=t,this.CM.playbackRate=0,this.S9&&this.S9.N3()}I8(){if(!this.w9)return;const t=this.ND;this.w9=!1,this.ND=t,this.D8()}D8(){this.CM.currentTime=this.CM.currentTime,this.S9&&this.S9.N3()}async tr(){this.rV=!1,this.b3=!1,this.a8=!1,me.rv(this.N9),this.N9=0,this.Fo=ge.cR(),this.Z9.Dm(),this.A9=void 0,this.q9=NaN,this.m9=void 0,this.t8=!1,this.M9=!1,this.FF=void 0,this.b9=!1,this.E8=void 0,this.y8=0,this.k8=!1,this.j9=!1,this.L8&&(this.x8(),this.L8=!1),this.Y9(new Rh),this.S9.l9(new to(this)),this.U9.tr(),this.d8.tr(),this.I8(),Sz&&(du(this.C8),this.C8=0,this.fn(Qi.Dp,this.T8)),await this.b8.Dm(),await this.b8.Wo((async()=>{this.WF&&(await this.WF.Mm(),this.WF=void 0,ui.$g&&ui.i_<3&&this.j8())}))}j8(){this.O8();const t=this.CM,i=t.parentElement,e=t.tagName.toLowerCase();this.CM=wU(e),this.retainMediaElementState(t),mU(t),null==i||i.replaceChild(this.CM,t),this.x8(),this.S9.l9(this.M8()),this.U9.fn(fa.CO,this.P8),this.U9.Mm(),this.U9=new VR(this),this.U9.yn(fa.CO,this.P8),this.eV?this.ge():this.be(),this.yo(new ar),this.yo(new OI)}retainMediaElementState(t){this.VF.muted=t.muted,this.VF.volume=t.volume}async Mm(){this.L8=!1,this.O8(),this.fY(),await this.tr(),await this.b8.gn(),this.U9.Mm(),this.S9.Mm(),await this.aJ.Mm(),this.cY(),this.Ol.gn(),this.d8.gn(),await this.z8.gn(),this.B8.gn(),this.u8.gn(),this.Bo()}x8(){this.VF.addEventListener("play",this.U8),this.VF.addEventListener("pause",this.Q8),this.VF.addEventListener("timeupdate",this.F8),this.VF.addEventListener("progress",this.Y8),this.VF.addEventListener("loadstart",this.V8),this.VF.addEventListener("ended",this.G8),this.VF.addEventListener("ratechange",this.W8),this.VF.addEventListener("volumechange",this.Z8),this.VF.addEventListener("durationchange",this.H8),this.VF.addEventListener("resize",this.X8),this.VF.addEventListener("loadedmetadata",this.X8),this.VF.addEventListener("error",this.q8),this.VF.addEventListener("emptied",this.K8),this.VF.addEventListener("seeked",this.J8),this.VF.addEventListener("seeking",this.t7),_v()?(this.CM.addEventListener("encrypted",this.i7),this.CM.addEventListener("waitingforkey",this.e7)):void 0!==oi.WebKitMediaKeys&&"function"==typeof oi.WebKitMediaKeys.isTypeSupported?this.CM.addEventListener("webkitneedkey",this.s7):gt()?this.CM.addEventListener("webkitneedkey",this.n7):void 0!==oi.MSMediaKeys&&"function"==typeof oi.MSMediaKeys.isTypeSupported&&this.CM.addEventListener("msneedkey",this.r7)}O8(){this.VF.removeEventListener("play",this.U8),this.VF.removeEventListener("pause",this.Q8),this.VF.removeEventListener("timeupdate",this.F8),this.VF.removeEventListener("progress",this.Y8),this.VF.removeEventListener("loadstart",this.V8),this.VF.removeEventListener("ended",this.G8),this.VF.removeEventListener("ratechange",this.W8),this.VF.removeEventListener("volumechange",this.Z8),this.VF.removeEventListener("durationchange",this.H8),this.VF.removeEventListener("resize",this.X8),this.VF.removeEventListener("loadedmetadata",this.X8),this.VF.removeEventListener("error",this.q8),this.VF.removeEventListener("encrypted",this.i7),this.VF.removeEventListener("waitingforkey",this.e7),this.VF.removeEventListener("webkitneedkey",this.s7),this.VF.removeEventListener("webkitneedkey",this.n7),this.VF.removeEventListener("msneedkey",this.r7),this.VF.removeEventListener("emptied",this.K8),this.VF.removeEventListener("seeked",this.J8),this.VF.removeEventListener("seeking",this.t7)}o7(){this.p9||(this.Fo=this.kD,this.p9=PR(this),this.O8(),this.p9.yn(OR,this.Ds))}h7(){if(!this.p9)return;const t=this.p9;this.p9=void 0,this.S9.N3(),zR(this,t),t.Mm(),this.x8()}h8(){const t=this.sD;this.yo(new H(t,void 0)),this.E8=t}Pq(){this.b9||!this.hD||this.BD||(this.b9=!0,this.yo(new ce(this.sD)))}LY(t){this.FF=t,this.Y9(this.FF),this.yo(new Wh(this.FF))}get gD(){return!!this.CM.webkitCurrentPlaybackTargetIsWireless}get a7(){return this.u7}get FR(){return il({},dO)}l7(){this.u7||(AU(this.CM,me.Ys),this.u7=!0)}d7(t){t.appendChild(this.CM)}q2(){Sz&&this.T8(),this.S9.N3()}get gY(){return this.aJ.gY}set gY(t){this.aJ.gY=t}get f7(){return this.W4}set f7(t){this.W4=t}get X6(){return this.aJ.X6}aE(){this.aJ.a9().catch(ul),this.d8.tr()}get JD(){return this.k8}set JD(t){this.k8=t,this.L8&&!this.k8&&(this.L8=!1,this.x8())}constructor(t,i,e,s){super(),this.FF=void 0,this.eV=!0,this.WF=void 0,this.b8=new Ku,this.p9=void 0,this.Zo=new sx,this.Qo=new nx,this.f8=[],this.A9=void 0,this.K9=0,this.q9=NaN,this.m9=void 0,this.a8=!1,this.E8=void 0,this.y8=0,this.rV=!1,this.b3=!1,this.g7=$i.KR,this.N9=0,this.H9=Promise.resolve(),this.Z9=new Ai,this.V9=[],this.Fo=ge.cR(),this.D9=void 0,this.k9=1,this.C9=!1,this.x9=1,this.b9=!1,this.k8=!1,this.L8=!1,this.t8=!1,this.M9=!1,this.T9=!1,this.w9=!1,this.u7=!1,this.C8=0,this.j9=!1,this.g8=t=>{const i=t.track,e=this.p8(i);if(!Lz(this.d8,i)){if(ui.M_){if(i.kind===vs.tU)return void this.w8(i);if(i.kind===vs.JB&&""===i.label&&""===i.language&&!xz(i))return void this.m8(i,e)}this.d8.tt(new JP(i,e))}},this._8=t=>{const i=Lz(this.d8,t.track);i&&this.d8.it(i)},this.v8=()=>{for(let t=0;t<this.d8.U;t++){let i=this.d8.VE(t);i instanceof JP&&i.C5()}},this.T8=()=>{if(void 0===this.WF||!fO(this.WF))return;const t=this.WF,i=t.Z4,e=t.H4;if(!i||!e)return;if(t.yJ)return void this.I8();if(t.OD===xR.Q2)return;const s=i.KI,n=e.KI;if(0===s.U&&0===n.U)return void this.I8();const r=this.sD;if(r<s.Cn(0)||r<n.Cn(0))return void this.I8();if(s.gr(r)!==n.gr(r)){if(t.SJ(r))return;this.N8()}else if(this.I8(),!this.C8&&this.U9.j3()){s.ZO(n).JO(r,r+.5)&&(this.C8=Qn(this._7))}},this._7=()=>{this.C8=0,this.T8()},this.S8=()=>{if(this.BD||this.y3)return;if(this.S9.OD>=$i.$R)return;if(void 0===this.WF||!fO(this.WF))return;const t=this.WF,i=t.Z4,e=t.H4;if(!i||!e)return;const s=this.sD,n=i.KI,r=e.KI;if(!n.gr(s)||!r.gr(s))return;n.ZO(r).JO(s-5,s)&&(this.w9?this.I8():this.D8())},this.U8=()=>{this.yo(new us(this.sD))},this.Q8=()=>{this.W9(new Rh),this.yo(new Ia(this.sD))},this.P8=()=>{this.Q9(),this.yo(new fo(this.sD))},this.W8=()=>{this.E9()},this.H8=()=>{this.yo(new In(this.ct))},this.Y8=()=>{this.yo(new mO(this.sD))},this.V8=()=>{this.yo(new Ti)},this.J8=()=>{this.rV||this.b3||this.a8?this.a8=!1:this.yo(new ns(this.sD))},this.t7=()=>{this.r8(this.sD),this.a8=!1},this.F8=()=>{const t=this.sD,i=this.BD,e=this.S9.OD<$i.$R&&!this.hD,s=void 0!==this.E8,n=s&&this.E8!==t;this.A8(),(i||!s||n&&!e)&&this.h8()},this.G8=()=>{this.Pq()},this.q8=()=>{if(null!==this.CM.error){const i=this.CM.error;var t;this.LY(new La(null!=(t=i.code)?t:sl.DECODE,i.message||"Error decoding media",void 0,i.msExtendedCode))}},this.K8=()=>{this.k8&&(this.O8(),this.L8=!0)},this.v7=t=>{if(me.rv(this.N9),this.N9=0,t.readyState<=$i.JR)if(this.rV||this.b3){const i=me.J_()-this.K9;if(i<250)return void(this.N9=me.ov((()=>this.v7(t)),250-i))}else if(void 0!==this.WF&&this.WF.SJ(this.sD))return void(this.N9=me.ov((()=>this.v7(t)),250));this.g7!==t.readyState&&(this.g7=t.readyState,this.yo(t))},this.Z8=()=>{this.I9()},this.X8=()=>{this.GD>0&&this.FD>0&&this.yo(new lr)},this.i7=t=>{this.yo(new on(t.initDataType,t.initData||new ArrayBuffer(0)))},this.e7=()=>{this.yo(new Hv)},this.r7=t=>{const i=t.initData,e=i?cu(i).buffer:new ArrayBuffer(0);this.yo(new on(Ca,e))},this.s7=t=>{if(t.initData){const i=function(t){try{const i=Os(t),e=new J,s=wi(i,e,Se(i,e,!0));return Br(Ew(s,!0))}catch(t){return}}(t.initData);if(!i)return;this.yo(new on(xt,i))}else this.yo(new on(xt,new ArrayBuffer(0)))},this.n7=t=>{const i=t.initData,e=i?cu(i).buffer:new ArrayBuffer(0);this.yo(new on(Ca,e))},this.z9=()=>{this.Q9()},this.B9=t=>{this.W9(t)},this.w7=t=>{this.yo(t),t.type===Qi.Zm&&this.LY(be(t.errorObject))},this.CM=t,this.hm=i,this.Xu=e,this.gV=s,this.S9=new Az(this),this.S9.yn(fa.CE,this.v7),this.S9.l9(new to(this)),this.U9=new VR(this),this.U9.yn(fa.CO,this.P8),this.aJ=new jc(this),this.aJ.yn(dz,this.w7),this.Ol=new bn,this.d8=new bn,this.B8=new uu([this.Ol,this.d8]),this.z8=new uz(this,this.B8),this.u8=new uu([this.B8,this.z8.Z]),this.c8=new zh(this),this.x8(),this.TY()}};var Ez=.01;function kz(t,i,e){if(void 0===e&&(e=0),!i.U)return 0;let s=i.QO(t);const n=Ez*e;return s===i.Cn(0)?s+=n:s===i.jn(i.U-1)&&(s-=n),s}function Lz(t,i){for(let e of t.FE)if(e.IP===i)return e}function xz(t){return!!t.cues&&t.cues.length>0}r();var Cz={xK:void 0,CK:void 0,jK:void 0,RK:void 0,PK:void 0,zK:void 0,BK:void 0,UK:void 0,QK:void 0,FK:void 0},jz=class extends Bo{get ga(){return this.Za||(this.Za=oO(this)),this.Za}get xK(){}get CK(){}get jK(){}get RK(){}get PK(){}get zK(){}get m7(){}get BK(){}get UK(){}get QK(){}get FK(){}constructor(...t){super(...t),this.Za=void 0}},Oz=class extends Dz{tE(){}get FD(){return 0}get GD(){return 0}constructor(t,i,e){super(t,i,e,new jz)}};r(),r();var Rz=class{get ke(){return this.p7}be(){this.p7.style.display="none"}ge(){this.p7.style.display="block"}d7(t){t.appendChild(this.p7)}gn(){Xa(this.p7)}constructor(t=5){let i=oi.document.createElement("div");i.className="theoplayer-texttracks",i.style.position="absolute",i.style.display="none",i.style.overflow="hidden",i.style.pointerEvents="none",i.style.left="0",i.style.right="0",i.style.top="0",i.style.bottom="0",i.style.width="100%",i.style.height="100%",i.style.lineHeight="1.3em",i.style.zIndex=""+t,this.p7=i,this.ge()}};function Pz(t,i){return il({},i,bS(function(t){return{xK:t.xK,CK:t.CK,jK:t.jK,RK:t.RK,PK:t.PK,zK:t.zK,BK:t.BK,UK:t.UK,QK:t.QK,FK:t.FK}}(t)))}function zz(t){return t.jK&&Qh(t.jK,"%")?Number(t.jK.replace("%",""))/100:t.jK&&Qh(t.jK,"em")?Number(t.jK.replace("em","")):1}r(),r(),r(),r(),r();var Bz=class t{get A7(){return this.y7+this.ji}set A7(t){this.y7=t-this.ji}get b7(){return this.M7+this.Ti}set b7(t){this.M7=t-this.Ti}T7(t){return this.y7<t.A7&&this.A7>t.y7&&this.M7<t.b7&&this.b7>t.M7}bP(t){return this.y7<=t.y7&&t.A7<=this.A7&&this.M7<=t.M7&&t.b7<=this.b7}Wp(){return new t(this.y7,this.M7,this.ji,this.Ti)}S7(i){const e=this.y7+i,s=this.M7+i,n=x.max(0,this.ji-2*i),r=x.max(0,this.Ti-2*i);return new t(e,s,n,r)}N7(i){const e=x.min(this.y7,i.y7),s=x.max(this.A7,i.A7),n=x.min(this.M7,i.M7),r=x.max(this.b7,i.b7);return new t(e,n,s-e,r-n)}constructor(t,i,e,s){this.y7=t,this.M7=i,this.ji=e,this.Ti=s}},$c=class{I7(t){const i=this.D7(t);if(!i)return!1;for(const t of i)Xa(t);return this.E7(t),!0}get Lt(){return this.WP}get VF(){return this.CM}get Ou(){return this.Xu}get k7(){return this.L7}get x7(){return this.C7}Aq(){this.j7(),this.WP.L.FE.forEach((t=>this.fU(t))),this.Ou.yn(Ah.pn,this.O7),this.re(this.Ou.Su,this.Ou.Tu)}R7(t){this.C7=t,this.L7=Pz(this.C7,this.P7),this.L7.xK&&(this.VF.style.fontFamily=this.L7.xK),this.re(this.Ou.Su,this.Ou.Tu),this.z7(!0)}B7(){return this.L7}U7(t){return this.Q7.has(t.dk)}j7(){this.WP.yn(Ct.mE,this.F7),this.WP.yn(Ct.AE,this.Y7),this.WP.yn(Ct.aa,this.V7)}G7(){this.WP.fn(Ct.mE,this.F7),this.WP.fn(Ct.AE,this.Y7),this.WP.fn(Ct.aa,this.V7)}W7(t){t.yn(ko.iP,this.Z7),t.yn(ko.eP,this.H7),t.yn(ko.PE,this.X7)}q7(t){t.fn(ko.iP,this.Z7),t.fn(ko.eP,this.H7),t.fn(ko.PE,this.X7)}fU(t){this.W7(t),t.Yh&&this.K7(t)}eU(t){this.q7(t),this.J7(t)}ttt(){this.WP.gN===P.Jn?this.itt():this.ett()}itt(){if(!this.stt)return;this.stt=!1;const t=this.Ou.Su,i=this.Ou.Tu;this.re(t,i),this.z7(!1)}ett(){this.stt||(this.stt=!0,this.z7(!0))}K7(t){this.stt||t.Yh&&!this.U7(t)&&this.z7(!1)}J7(t){this.U7(t)&&this.z7(!0)}ntt(t){(t.Yh||this.U7(t))&&this.z7(!0)}z7(t){const i=this.ott,e=this.stt?[]:this.WP.q.FE.slice();this.htt(e,i,t),this.ott=e}D7(t){return this.Q7.get(t.dk)}att(t,i){this.Q7.set(t.dk,i)}E7(t){this.Q7.delete(t.dk)}utt(t){const i=[],e=this.L7;if(void 0!==e.BK){const s=t.Wp();s.Ti=e.BK,i.push(s)}if(void 0!==e.UK){const s=t.Wp();s.Ti=e.UK,s.b7=t.b7,i.push(s)}return i}ctt(){return this.ott.slice()}gn(){Xa(this.VF),this.Q7.clear(),this.G7(),this.WP.L.FE.forEach((t=>this.q7(t))),this.Ou.fn(Ah.pn,this.O7)}constructor(t,i,e,s,n){this.Q7=rn(),this.stt=!0,this.C7=il({},Cz),this.ott=[],this.F7=t=>this.fU(t.CP),this.Y7=t=>this.eU(t.CP),this.V7=()=>this.ttt(),this.Z7=t=>this.K7(t.CP),this.H7=t=>this.J7(t.CP),this.X7=t=>this.ntt(t.CP),this.O7=t=>this.re(t.width,t.height),this.WP=t,this.P7=this.L7=n,this.CM=this.ltt(e),this.Xu=s,i.appendChild(this.CM)}};function Uz(t,i,e,s,n){let r=t.Wp(),o=r,h=1,a=!1;const u=S(getComputedStyle(i).lineHeight)/4;if(!j(u)&&u>0){for(let i=0;i<e.length&&!a;i++){for(;!Vz(t,s,e[i],.01)&&(!s.bP(t)||Qz(t,n));)Yz(t,e[i],u);if(s.bP(t)){o=t.Wp(),a=!0;break}let c=Gz(t,s);h>c&&(o=t.Wp(),h=c),t=r.Wp()}s.bP(t)||(o=r.Wp())}i.style.left=(o.y7-s.y7)/s.ji*100+"%",i.style.top=(o.M7-s.M7)/s.Ti*100+"%"}function Qz(t,i){return i.some((i=>t.T7(i)))}function Kh(t){return new Bz(t.left,t.top,t.width,t.height)}var Fz=function(t){return t[t.POS_X=0]="POS_X",t[t.NEG_X=1]="NEG_X",t[t.POS_Y=2]="POS_Y",t[t.NEG_Y=3]="NEG_Y",t}({});function Yz(t,i,e){switch(i){case 0:t.y7+=e;break;case 1:t.y7-=e;break;case 2:t.M7+=e;break;case 3:t.M7-=e}}function Vz(t,i,e,s){switch(e){case 0:return t.A7>i.A7+s;case 1:return t.y7<i.y7-s;case 2:return t.b7>i.b7+s;case 3:return t.M7<i.M7-s}}function Gz(t,i){return x.max(0,x.min(t.A7,i.A7)-x.max(t.y7,i.y7))*x.max(0,x.min(t.b7,i.b7)-x.max(t.M7,i.M7))/(t.ji*t.Ti)}r();var Wz=function(t){return t.Gc='"Courier New", Courier, "Nimbus Mono L", "Cutive Mono", monospace',t.Xc='"Times New Roman", Times, Georgia, Cambria, "PT Serif Caption", serif',t.Jc='"Deja Vu Sans Mono", "Lucida Console", Monaco, Consolas, "PT Mono", monospace',t.Qc='Arial, Helvetica, Verdana, "PT Sans Caption", sans-serif',t}({});function Zz(t,i){return t?{dtt:t.dtt,ftt:t.ftt,gtt:t.gtt,El:i}:null}function Hz(t){const i=t?t.match(/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i):null;return i?{dtt:C(i[1],16),ftt:C(i[2],16),gtt:C(i[3],16)}:null}function Xz(t){return("0"+t.toString(16)).slice(-2)}function qz(t){return"#"+Xz(t.dtt)+Xz(t.ftt)+Xz(t.gtt)}function Kz(t){const i=t?t.match(/^rgba\(([0-9]+),\s*([0-9]+),\s*([0-9]+),\s*([0-9.]+)\)$/i):null;return i?{dtt:C(i[1],10),ftt:C(i[2],10),gtt:C(i[3],10),El:S(i[4])}:null}function Jz(t,i){return function(t){return t?"rgba("+t.dtt+", "+t.ftt+", "+t.gtt+", "+t.El+")":void 0}(Zz(Hz(t),i/100))}var ol=function(t){return t.BLACK="#000000",t.WHITE="#FFFFFF",t.GREEN="#00ff00",t.BLUE="#0000ff",t.CYAN="#00ffff",t.RED="#ff0000",t.YELLOW="#ffff00",t.MAGENTA="#ff00ff",t.TRANSPARENT="transparent",t}({});function $z(t){return tB[t||"none"]}var tB={none:"",dropshadow:"#222 2px 2px 3px, #222 2px 2px 4px, #222 2px 2px 5px",raised:"#222 1px 1px, #222 2px 2px, #222 3px 3px",depressed:"#ccc 1px 1px, #ccc 0px 1px, #222 -1px -1px, #222 0px -1px",uniform:"#222 -1px -1px 0, #222 1px -1px 0, #222 -1px 1px 0, #222 1px 1px 0"},iB="monospace, sans-serif",eB="Arial, Helvetica, sans-serif",sB='"Times New Roman", Times, serif',nB=C_({monospace:"monospace",sansSerif:eB,serif:sB,monospaceSansSerif:iB,monospaceSerif:"monospace, serif",proportionalSansSerif:eB,proportionalSerif:sB,default:iB}),rB=16,oB="1.3em",hB=class extends $c{ltt(t){let i=h.createElement("div");i.className="theoplayer-ttml-texttrack-"+t;const e=i.style;return e.position="absolute",Id(e,"flex"),e.flexDirection=e.webkitFlexDirection="column",e.overflow="hidden",e.pointerEvents="none",e.top="0",e.left="0",e.width="100%",e.height="100%",e.fontSize=rB+"px",e.lineHeight=oB,i}re(t,i){const e=x.min(t/640,i/360),s=rB*e*zz(this.k7);this.VF.style.fontSize=s+"px"}htt(t,i,e){for(const t of i)!e&&t.Yh||this.I7(t);let s=[];const n=Kh(this.VF.getBoundingClientRect());s.push(...this.utt(n));for(const i of t){const t=this._tt(i,s,n);for(const i of t)s.push(i.S7(.1))}}_tt(t,i,e){let s=this.D7(t);s||(s=this.wtt(t),this.att(t,s));for(const t of s)this.VF.appendChild(t);const n=[],r=[Fz.POS_Y,Fz.NEG_Y,Fz.POS_X,Fz.NEG_X];for(const t of s){Uz(AB(t),t,r,e,i),n.push(AB(t))}return n}wtt(t){let i=[];const e=t.YB,s=t.PB,n=t.WB,r=t.O,o=t.QB,a=o?x.min(640/o.width,360/o.height):1,u=this.k7;if(0===_.keys(s).length){const t=h.createElement("div");mB(t),aB(r,e,n,t,t,a,u),uB(t,"body",u),t.firstChild&&i.push(t)}else for(let t of _.keys(s)){let o=h.createElement("div");o.id=t,mB(o),dB(o,"region",s[t],e,a),aB(r,e,n,o,o,a,u),uB(o,"body",u),o.firstChild&&i.push(o)}return i}R7(t){return cO(this.VF,t),super.R7(t)}constructor(t,i,e,s){super(t,i,e,s,Cz)}};function aB(t,i,e,s,n,r,o){if(Vr(t)&&function(t){const i=t.hI.toUpperCase();return"SPAN"===i||"P"===i||"BR"===i||"DIV"===i||"BODY"===i}(t)){let a=cB(t);if(!a||(null==n?void 0:n.id)===a){let a;if("BODY"===t.hI.toUpperCase())a=n;else{if(a=function(t){let i;switch(t.hI.toUpperCase()){case"BR":i=h.createElement("br");break;case"SPAN":i=h.createElement("span"),pB(i),lB(i,t);break;case"P":i=h.createElement("p"),function(t){pB(t);const i=t.style;i.textAlign="inherit",i.padding="0",i.margin="0"}(i),lB(i,t);break;case"DIV":i=h.createElement("div"),lB(i,t)}return i}(t),!a)return;s.appendChild(a)}!function(t,i,e,s,n){let r=i.TI("style");_B(t,i.hI,r,e,s,n),function(t,i,e,s){for(const n of i.bI)vB(t,i.hI,n.hI,n.lI,e,s)}(t,i,s,n)}(a,t,i,n,r),function(t,i,e){let s=null==i?void 0:i.TI("smpte:backgroundImage");if(s){s=s.replace("#","");let n=e&&fB(e,(t=>t.bI.some((t=>"id"===t.hI&&t.lI===s))));n&&gB(t,n,i,!0)}!function(t,i){const e=i.m[0];if(!e||"metadata"!==e.hI.toLowerCase())return;const s=e.m[0];gB(t,s,i)}(t,i)}(a,t,e),uB(a,t.hI,o);for(const s of t.gI)aB(s,i,e,a,n,r,o)}}else if(HT(t)){const i=h.createTextNode(t.xS);if("SPAN"!==s.nodeName.toUpperCase()){const t=h.createElement("span");pB(t),uB(t,"span",o),t.appendChild(i),s.appendChild(t)}else s.appendChild(i)}}function uB(t,i,e){const s=t.style;switch(e.xK&&(s.fontFamily=e.xK),e.CK&&(s.color=e.CK),i.toLowerCase()){case"span":e.RK&&(s.background=e.RK);break;case"p":case"div":e.PK&&(s.backgroundColor=e.PK);break;case"body":e.zK&&(s.textShadow=$z(e.zK))}}function cB(t){const i=t.TI("region");if("p"===t.hI.toLowerCase())return i;const e=[];for(const i of t.m)e.push(cB(i));return Cv(e),0===e.length?i:1===e.length?null!=(s=e[0])?s:i:void 0;var s}function lB(t,i){let e=i.SI(pE,"id");e&&(t.id=e)}function dB(t,i,e,s,n){_B(t,i,e.style,s,t,n);for(const s of _.keys(e))vB(t,i,s,e[s],t,n)}function fB(t,i){if(i(t))return t;for(let e of t.m){const t=fB(e,i);if(t)return t}return null}function gB(t,i,e,s){void 0===s&&(s=!1),s&&(t.style.width=t.style.height="100%");const n=h.createElement("img");n.src=function(t){const i=t&&t.gI.length>0?t.gI[0]:null;return i&&HT(i)?"data:image/png;base64,"+i.xS:""}(i),n.id=t.id,n.style.height="100%",n.style.maxWidth="100%",function(t,i){const e=t.style;Id(e,"flex"),e.flexDirection=e.webkitFlexDirection="column";let s=i.TI("smpte:backgroundImageVertical"),n="center";if(s)switch(s.toLowerCase()){case"left":n="flex-start";break;case"center":n="center";break;case"right":n="flex-end";break;case"inherit":n="inherit"}e.justifyContent=e.webkitJustifyContent=n;let r=i.TI("smpte:backgroundImageHorizontal"),o="center";if(r)switch(r.toLowerCase()){case"left":o="flex-start";break;case"center":o="center";break;case"right":o="flex-end";break;case"inherit":o="inherit"}e.alignItems=e.webkitAlignItems=o}(t,e),t.appendChild(n)}function _B(t,i,e,s,n,r){if(e)for(const o of e.split(" "))if(s[o])for(const e of _.keys(s[o]))"style"===e.toLowerCase()?_B(t,i,s[o][e],s,n,r):vB(t,i,e,s[o][e],n,r)}function vB(t,i,e,s,n,r){const o=t.style;switch(e){case"backgroundColor":o.backgroundColor=s;break;case"color":o.color=s;break;case"direction":o.direction=s;break;case"display":"none"===s&&(o.display="none");break;case"fontFamily":var h;o.fontFamily=null!=(h=nB.get(s))?h:s;break;case"fontSize":{let t=s;if(Qh(t,"px")){const i=Number(t.slice(0,-2));t=i*r/rB+"em"}else Qh(t,"c")&&(t=t.replace("c","em"));o.fontSize=t,o.lineHeight&&"inherit"!==o.lineHeight||(o.lineHeight=oB);break}case"fontStyle":o.fontStyle=s;break;case"fontWeight":o.fontWeight=s;break;case"lineHeight":{let t=s;if(Qh(t,"px")){const i=Number(t.slice(0,-2));t=i*r+"px"}o.lineHeight=t;break}case"opacity":o.opacity=s;break;case"overflow":o.overflow=s;break;case"padding":o.padding=s;break;case"textAlign":o.textAlign=s;break;case"textDecoration":switch(s){case"lineThrough":o.textDecoration="line-through";break;case"underline":case"overline":o.textDecoration=s;break;case"noUnderline":case"noLineThrough":case"noOverline":o.textDecoration="none"}break;case"unicodeBidi":switch(s){case"bidiOverride":o.unicodeBidi="bidi-override";break;case"normal":case"embed":case"isolate":o.unicodeBidi=s}break;case"visibility":o.visibility=s;break;case"zIndex":o.zIndex=s;break;case"displayAlign":{let t;switch(s.toLowerCase()){case"before":t="flex-start";break;case"center":t="center";break;case"after":t="flex-end";break;case"justify":t="space-between";break;default:return}o.justifyContent=o.webkitJustifyContent=t;break}case"extent":{const e=wB(i.toLowerCase())?n:t;let r,o,h=s.split(" ",2);2===h.length?(r=h[0],o=h[1]):r=o="100%",e&&(e.style.height=o,e.style.width=r);break}case"origin":{const e=wB(i.toLowerCase())?n:t,[r,o]=s.split(" ",2);e&&(r||o)&&(r&&(e.style.left=r),o&&(e.style.top=o));break}case"showBackground":case"textOutline":break;case"wrapOption":switch(s){case"wrap":o.whiteSpace="normal";break;case"noWrap":o.whiteSpace="nowrap"}break;case"writingMode":{let t,i,e,n;switch(s){case"lrtb":case"lr":t="horizontal-tb";break;case"rltb":t="horizontal-tb",i="rtl",n="bidi-override";break;case"tbrl":case"tb":t="vertical-rl",e="upright";break;case"tblr":t="vertical-lr",e="upright";break;case"rl":t="horizontal-tb",i="rtl";break;default:return}o.writingMode=t,o.setProperty("-webkit-writing-mode",t),i&&(o.direction=i),e&&(o.textOrientation=e,o.setProperty("-webkit-text-orientation",e)),n&&(o.unicodeBidi=n);break}case"linePadding":if(Qh(s,"c")){let t=s.replace("c","em");o.paddingLeft=o.paddingRight=t}break;case"multiRowAlign":"auto"===s.toLowerCase()?o.textAlign="":o.textAlign=s}}function wB(t){return"div"===t||"p"===t||"span"===t}function mB(t){const i=t.style;Id(i,"flex"),i.flexDirection=i.webkitFlexDirection="column",i.top="auto",i.left="5%",i.width="90%",i.height="100%",i.maxHeight="100%",i.maxWidth="100%",i.overflow="visible",i.position="absolute",i.fontFamily=eB,i.color=ol.WHITE,i.background=ol.TRANSPARENT,i.textShadow=$z("uniform"),i.textAlign="start",i.writingMode="horizontal-tb",i.setProperty("-webkit-writing-mode","horizontal-tb"),i.padding="0",i.margin="0",i.fontSize="inherit",i.lineHeight="inherit"}function pB(t){const i=t.style;i.fontFamily="inherit",i.color="inherit",i.fontSize="inherit",i.lineHeight="inherit",i.textShadow="inherit"}function AB(t){let i=Kh(t.getBoundingClientRect());if("visible"===getComputedStyle(t).overflow&&t.scrollHeight>t.clientHeight){const e=t.children;for(let t=0;t<e.length;t++){const s=e[t];i=i.N7(Kh(s.getBoundingClientRect()))}}return i}r(),r();var yB=void 0;function bB(t){return yB||(yB=oi.document.createElement("textarea")),yB.innerHTML=t,yB.value}function MB(t,i){let e="Data",s="",n=[],r=t.charAt(i.tc),o="",h={Hw:"starttag",mI:"",mtt:[]};for(;i.tc<t.length+1;){switch(r=i.tc<t.length?t.charAt(i.tc):"EOF",e){case"Data":switch(r){case"&":let n=t.substring(i.tc).match(/&#?[0-9a-zA-Z]+;/);n?(s+=bB(n[0]),i.Vp(n[0].length-1)):s+="&";break;case"<":if(s)return{Hw:"string",O:s};e="Tag";break;case"EOF":return{Hw:"string",O:s};default:s+=r}break;case"Tag":switch(r){case"\t":case"\n":case"\f":case" ":e="StartTagAnnotation";break;case".":e="StartTagClass";break;case"/":e="EndTag";break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":s=r,e="TimestampTag";break;case">":return i.Vp(1),h;case"EOF":return h;default:s=r,e="StartTag"}break;case"StartTag":switch(r){case"\t":case"\f":case" ":e="StartTagAnnotation";break;case"\n":o=r,e="StartTagAnnotation";break;case".":e="StartTagClass";break;case">":return i.Vp(1),{Hw:"starttag",mI:s,mtt:[]};case"EOF":return{Hw:"starttag",mI:s,mtt:[]};default:s+=r}break;case"StartTagClass":switch(r){case"\t":case"\f":case" ":n.push(o),o="",e="StartTagAnnotation";break;case"\n":n.push(o),o=r,e="StartTagAnnotation";break;case".":n.push(o),o="";break;case">":return i.Vp(1),n.push(o),{Hw:"starttag",mI:s,mtt:n};case"EOF":return n.push(o),{Hw:"starttag",mI:s,mtt:n};default:o+=r}break;case"StartTagAnnotation":switch(r){case"&":e="CharRefInAnnotation";break;case">":i.Vp(1);let t=o.trim();return t=t.replace(/\s/," "),{Hw:"starttag",mI:s,mtt:n,ptt:t};default:o+=r}break;case"CharRefInAnnotation":let a="";for(let e=i.tc;">"===t.charAt(e);e++)a+=t.charAt(e);o+=a||"&",e="StartTagAnnotation";break;case"EndTag":switch(r){case">":return i.Vp(1),{Hw:"endtag",mI:s};case"EOF":return{Hw:"endtag",mI:s};default:s+=r}break;case"TimestampTag":switch(r){case">":return i.Vp(1),{Hw:"timestamp",Att:s};case"EOF":return{Hw:"timestamp",Att:s};default:s+=r}}i.Vp(1)}return h}var TB=function(t){return t.ytt="string",t.btt="starttag",t.Mtt="endtag",t.Ttt="timestamp",t}({});function SB(t){let i;if(t.getBoundingClientRect&&t.parentNode&&(i=t.getBoundingClientRect()),!i)return{left:0,top:0};const e=h.documentElement,n=h.body,r=e.clientLeft||n.clientLeft||0,o=s.pageXOffset||n.scrollLeft,a=i.left+o-r,u=e.clientTop||n.clientTop||0,c=s.pageYOffset||n.scrollTop,l=i.top+c-u;return{left:x.round(a),top:x.round(l)}}function NB(t,i,e,s){if(void 0===s&&(s=0),!t||!i)return;t.style.left="0px";let n=t.getClientRects(),r=i.getClientRects();if(0===n.length||0===r.length)return;let o=n[0],h=r[0],a=o.width/2+o.left;IB(t,h.width/2+h.left-a,e,s)}function IB(t,i,e,s){void 0===s&&(s=0),EB(t,i,"left","right",e,s)}function DB(t,i,e,s){void 0===s&&(s=0),EB(t,i,"top","bottom",e,s)}function EB(t,i,e,s,n,r){void 0===r&&(r=0);const o=t.getClientRects();if(n&&o.length>0){const t=o[0];i=rh(i,n[e]+r-t[e],n[s]-r-t[s])}t.style[e]=i+"px"}function gu(t,i){void 0===t.textContent?t.innerText=i:t.textContent=i}r();var kB={CK:ol.WHITE,xK:"sans-serif",jK:"100%",RK:"rgba(0,0,0,0.8)",PK:ol.TRANSPARENT,zK:"none",BK:void 0,UK:void 0,QK:void 0,FK:void 0},LB="theoplayer-webvtt-region-",xB="theoplayer-webvtt-styling-",CB="theoplayer-webvtt-default-style",jB=5.23,OB=1.14,RB=class extends $c{ltt(t){let i=h.createElement("div");i.className="theoplayer-webvtt-texttrack-"+t,Tu(i),i.style.overflow="hidden",i.style.pointerEvents="none";const e=this.k7.xK;return e&&(i.style.fontFamily=e),i.style.whiteSpace="pre-line",function(){if(h.getElementById(CB))return;const t=[];for(const[i,e]of GB)t.push("."+xB+i+" { color: "+e+" !important; }"),t.push("."+xB+"Stt"+i+" { background-color: "+e+" !important; }"),t.push("video::cue(."+i+") { color: "+e+"; }"),t.push("Ntt"+i+") { background-color: "+e+"; }");const i=h.createElement("style");i.id=CB,i.innerHTML=t.join("\n"),h.body.appendChild(i)}(),i}Aq(){this.VF.appendChild(this.Itt),super.Aq()}re(t,i){const e=x.min(t/100,i/100),s=zz(this.k7);this.Dtt.forEach((t=>{let{QP:i,Ett:n}=t;this.ktt(n,e,s,i)})),this.ktt(this.Itt,e,s)}R7(t){cO(this.VF,t),super.R7(t)}htt(t,i,e){const s=this.VF,n=this.Ou.Tu/100;let r=[];for(const i of t)void 0!==i.QP&&(fh(r,i.QP)||r.push(i.QP));this.Dtt.forEach(((t,i)=>{let{QP:s,Ett:n}=t;!e&&fh(r,s)||(Xa(n),this.Dtt.delete(i))}));for(const t of i)!e&&t.Yh||this.I7(t);let o=[];const h=Kh(this.Itt.getBoundingClientRect());o.push(...this.utt(h));for(const t of r){let i;this.Dtt.has(t.o)?i=this.Dtt.get(t.o).Ett:(i=YB(t,n),s.appendChild(i),this.Dtt.set(t.o,{QP:t,Ett:i})),o.push(Kh(i.getBoundingClientRect()))}t.sort(WB);for(const i of t){const t=this._tt(i,o,h);void 0!==t&&o.push(t.S7(.1))}}_tt(t,i,e){var s;let n;t.QP?(n=this.Dtt.get(t.QP.o).Ett,"up"===t.QP.cz&&n.children.length>=1&&(n.style.transitionProperty="top",n.style.transitionDuration="0.433s")):n=this.Itt;let r=null==(s=this.D7(t))?void 0:s[0];if(r||(r=this.Ltt(t),this.att(t,[r])),n.appendChild(r),t.QP||(PB(r,t),t.FP?function(t,i,e,s){const n=VB(t),r=n?e.Ti:e.ji;let o=S(getComputedStyle(i).lineHeight);if(0===o||j(o))return;let h=Kh(i.getBoundingClientRect()),a=x.round(gD(t));"rl"===t.Pt&&(a=-(a+1));let u=o*a;"rl"===t.Pt&&(u=u-h.ji+o);a<0&&(u+=r,o=-o);n?h.M7+=u:h.y7+=u;const c=h.Wp();let l=!1;for(;!e.bP(h)||Qz(h,s);)if(n)if(o<0&&h.M7<e.M7||o>0&&h.b7>e.b7){if(h.M7=c.M7,l)break;o=-o,l=!0}else h.M7+=o;else if(o<0&&h.y7<e.y7||o>0&&h.A7>e.A7){if(h.y7=c.y7,l)break;o=-o,l=!0}else h.y7+=o;n?i.style.top=(h.M7-e.M7)/e.Ti*100+"%":i.style.left=(h.y7-e.y7)/e.ji*100+"%"}(t,r,e,i):function(t,i,e,s){let n,r=Kh(i.getBoundingClientRect());if(0===r.ji||0===r.Ti)return;VB(t)?"center"===t.BP?r.M7-=r.Ti/2:"end"===t.BP&&(r.M7-=r.Ti):"center"===t.BP?r.y7-=r.ji/2:"end"===t.BP&&(r.y7-=r.ji);n=""===t.Pt?[Fz.POS_Y,Fz.NEG_Y,Fz.POS_X,Fz.NEG_X]:"lr"===t.Pt?[Fz.POS_X,Fz.NEG_X,Fz.POS_Y,Fz.NEG_Y]:[Fz.NEG_X,Fz.POS_X,Fz.POS_Y,Fz.NEG_Y];Uz(r,i,n,e,s)}(t,r,e,i)),!t.QP)return Kh(r.getBoundingClientRect())}Ltt(t){let i=new J,e=t.O,s=this.xtt(t),n={Ctt:void 0,ke:s},r=n,o="",a="",u=[n],c=[],l=[];for(;i.tc<e.length;){let t=MB(e,i);if(t.Hw===TB.ytt){const i=h.createElement("span");gu(i,t.O),zB(i,u),""!==o&&(i.lang=o),this.jtt(i,a),r.ke.appendChild(i)}else if(t.Hw===TB.btt){const i=t.mI.toLowerCase();switch(i){case"i":case"b":case"u":case"ruby":{let e=h.createElement(i);r.ke.appendChild(e),r={Ctt:t,ke:e},u.push(r);break}case"rt":var d;if("ruby"===(null==(d=r.Ctt)?void 0:d.mI.toLowerCase())){let i=h.createElement("rt");r.ke.appendChild(i),r={Ctt:t,ke:i},u.push(r)}break;case"c":case"v":r={Ctt:t,ke:r.ke},u.push(r);break;case"font":{var f;const i=null==(f=t.ptt)?void 0:f.match(/(?:^| )color=["']([^"']+)/i);i&&(a=i[1],l.push(a),r={Ctt:t,ke:r.ke},u.push(r));break}case"lang":var g;o=null!=(g=t.ptt)?g:"",c.push(o)}}else if(t.Hw===TB.Mtt){var _;const i=t.mI.toLowerCase(),e=null==(_=r.Ctt)?void 0:_.mI.toLowerCase();e===i?(u.pop(),r=u[u.length-1],"font"===i&&(l.pop(),a=l.length>0?l[l.length-1]:"")):"rt"===e&&"ruby"===i?(u.pop(),u.pop(),r=u[u.length-1]):"lang"===i&&(c.pop(),o=c.length>0?c[c.length-1]:"")}else if(t.Hw===TB.Ttt){let i=t.Att,e=new J;try{JD(i,e)}catch(t){Xt("ERROR collecting timestamp",t)}}}return s}jtt(t,i){const e=this.k7,s=this.x7;e.RK&&(t.style.background=e.RK);const n=s.CK||i||e.CK;n&&(t.style.color=n)}ktt(t,i,e,s){if(s){let n=BB(s,i);t.style.height=n*e+"px",t.style.left=UB(s)+"%",t.style.top=QB(s,i)+"px"}t.style.fontSize=jB*i*e+"px"}xtt(t){const i=h.createElement("div");i.style.position="absolute",i.style.margin="0",i.style.padding="0",i.style.unicodeBidi="plaintext",i.style.wordWrap="break-word",i.style.overflowWrap="break-word",i.style.width="auto",i.style.textAlign=t.PP,function(t,i){"rl"===i.Pt?t.style.writingMode="vertical-rl":"lr"===i.Pt?t.style.writingMode="vertical-lr":t.style.writingMode="horizontal-tb"}(i,t),function(t,i){let e=wD(i);VB(i)?(t.style.width=e+"%",t.style.height="auto"):(t.style.height=e+"%",t.style.width="auto")}(i,t),PB(i,t);const e=this.k7.PK;e&&(i.style.background=e);const s=this.k7.CK;return s&&(i.style.color=s),i.style.textShadow=$z(this.k7.zK),i}constructor(t,i,e,s){super(t,i,e,s,kB),this.Dtt=Ge(),this.Itt=FB(3)}};function PB(t,i){let e,s,n=vD(i),r=_D(i),o=wD(i);if(VB(i)){switch(n){case"line-left":e=r;break;case"center":e=r-o/2;break;case"line-right":e=r-o}s=i.FP?0:gD(i)}else{switch(n){case"line-left":s=r;break;case"center":s=r-o/2;break;case"line-right":s=r-o}e=i.FP?0:gD(i)}t.style.left=e+"%",t.style.top=s+"%"}function zB(t,i){for(const e of i)if(e.Ctt){for(const i of e.Ctt.mtt)Dn(t,xB+i);"v"===e.Ctt.mI.toLowerCase()&&e.Ctt.ptt&&Dn(t,"theoplayer-webvtt-voice-"+e.Ctt.ptt)}}function BB(t,i){return t.nz*(jB*i)*OB}function UB(t){return t.lz-t.rz*t.ji/100}function QB(t,i){let e=t.fz,s=t.oz*BB(t,i)/100;return x.max(0,e-s)}function FB(t){let i=h.createElement("div");return i.className=LB+"default",Tu(i),i.style.wordWrap="break-word",i.style.writingMode="horizontal-tb",i.style.pointerEvents="none",i.style.width="auto",i.style.height="auto",i.style.maxHeight="100%",i.style.minHeight="0px",i.style.padding="0",i.style.boxSizing="border-box",i.style.fontSize=jB*t+"px",i.style.lineHeight=OB+"em",i}function YB(t,i){let e=FB(i);e.className=LB+t.o;let s=t.ji,n=BB(t,i);return e.style.width=s+"%",e.style.height=n+"px",e.style.left=UB(t)+"%",e.style.right="",e.style.top=QB(t,i)+"px",e.style.bottom="",e.style.boxSizing="border-box",e}function VB(t){return""===t.Pt}var GB=[["white","#fff"],["lime","#0f0"],["cyan","#0ff"],["red","#f00"],["yellow","#ff0"],["magenta","#f0f"],["blue","#00f"],["black","#000"]];function WB(t,i){const e=gD(t),s=gD(i),n=ZB(e,t.FP),r=ZB(s,i.FP);return n&&r?e-s||Wt(i,t)||i.dk-t.dk:Wt(t,i)||t.dk-i.dk}function ZB(t,i){return i?t<0?t>-8:t>8:t>50}r(),r(),r();var HB=function(t){return t.FONT_REGULAR="regular",t.FONT_UNDERLINE="underline",t.FONT_ITALICS="italics",t.FONT_UNDERLINE_ITALICS="underline-italics",t}({}),XB={CK:ol.WHITE,xK:Wz.Jc,jK:"100%",RK:ol.BLACK,PK:"transparent",zK:"none",Ott:"regular",BK:void 0,UK:void 0,QK:void 0,FK:void 0},qB=[{Rtt:ol.WHITE,Ott:"regular",Ptt:0},{Rtt:ol.WHITE,Ott:"underline",Ptt:0},{Rtt:ol.GREEN,Ott:"regular",Ptt:0},{Rtt:ol.GREEN,Ott:"underline",Ptt:0},{Rtt:ol.BLUE,Ott:"regular",Ptt:0},{Rtt:ol.BLUE,Ott:"underline",Ptt:0},{Rtt:ol.CYAN,Ott:"regular",Ptt:0},{Rtt:ol.CYAN,Ott:"underline",Ptt:0},{Rtt:ol.RED,Ott:"regular",Ptt:0},{Rtt:ol.RED,Ott:"underline",Ptt:0},{Rtt:ol.YELLOW,Ott:"regular",Ptt:0},{Rtt:ol.YELLOW,Ott:"underline",Ptt:0},{Rtt:ol.MAGENTA,Ott:"regular",Ptt:0},{Rtt:ol.MAGENTA,Ott:"underline",Ptt:0},{Rtt:ol.WHITE,Ott:"italics",Ptt:0},{Rtt:ol.WHITE,Ott:"underline-italics",Ptt:0},{Rtt:ol.WHITE,Ott:"regular",Ptt:0},{Rtt:ol.WHITE,Ott:"underline",Ptt:0},{Rtt:ol.WHITE,Ott:"regular",Ptt:4},{Rtt:ol.WHITE,Ott:"underline",Ptt:4},{Rtt:ol.WHITE,Ott:"regular",Ptt:8},{Rtt:ol.WHITE,Ott:"underline",Ptt:8},{Rtt:ol.WHITE,Ott:"regular",Ptt:12},{Rtt:ol.WHITE,Ott:"underline",Ptt:12},{Rtt:ol.WHITE,Ott:"regular",Ptt:16},{Rtt:ol.WHITE,Ott:"underline",Ptt:16},{Rtt:ol.WHITE,Ott:"regular",Ptt:20},{Rtt:ol.WHITE,Ott:"underline",Ptt:20},{Rtt:ol.WHITE,Ott:"regular",Ptt:24},{Rtt:ol.WHITE,Ott:"underline",Ptt:24},{Rtt:ol.WHITE,Ott:"regular",Ptt:28},{Rtt:ol.WHITE,Ott:"underline",Ptt:28}],KB=[11,-1,1,2,3,4,12,13,14,15,5,6,7,8,9,10];function JB(t,i){return ID(t.ztt,i.ztt)||Av(t.Hj,i.Hj)}r();var ji=32,$B=/CC([1-4])=(.*)/;function tU(t){if(!t)return[];const i=[],e=t.trim().split(";");if(e.every((t=>t.match($B))))for(const t of e){const[,e,s]=t.match($B);i.push({Btt:Number(e),Utt:s})}else for(let t=0;t<e.length;t++)i.push({Btt:t+1,Utt:e[t]});return i}var iU=class t{get Qtt(){return this.Ytt.Ftt}get Vtt(){return this.Ytt.Gtt}get Wtt(){return this.Ytt.Gtt.Ptt-this.Ytt.Ftt.Ptt+1}get Ztt(){return this.Ytt.Gtt.Htt-this.Ytt.Ftt.Htt+1}pr(){return this.Xtt=this.qtt(),this.Ktt(),this.Jtt(),this.Xtt}qtt(){let t=h.createElement("div");t.style.position="absolute",t.style.margin="0",t.style.padding="0",t.style.whiteSpace="pre",t.style.width=this.Wtt/ji*this.tit.$tt*100+"%",t.style.height=1.2*this.Ztt+"em",t.style.lineHeight="1.2em",t.style.letterSpacing=this.tit.iit?"calc(1em - 1ch)":"";const i=this.L7.xK;i&&(t.style.fontFamily=i);const e=this.L7.PK;return e&&(t.style.backgroundColor=e),t}Ktt(){if(!this.Xtt)return;let t=this.Qtt.Htt/15*100,i=this.Qtt.Ptt/ji*100,e=(ji-this.Vtt.Ptt-1)/ji*100,s=(15-this.Vtt.Htt-1)/15*100;this.tit.eit||(i=e=1,this.Xtt.style.width="98%"),s<t?this.Xtt.style.bottom=s*this.tit.$tt+"%":this.Xtt.style.top=t*this.tit.$tt+"%",e<i?this.Xtt.style.right=e+"%":this.Xtt.style.left=i+"%"}Jtt(){const t=this.Ytt.sit.sort(eU);for(let i=0;i<t.length;i++)this.nit(t[i-1],t[i]),this.rit(t[i]);this.nit(t[t.length-1],void 0)}rit(i){var e;const s=Pz(this.L7,i.oit),n=t.hit(s);gu(n,i.ait),null==(e=this.Xtt)||e.appendChild(n)}static hit(t){const i=h.createElement("span");i.style.display="inline-block",t.Ott!==HB.FONT_ITALICS&&t.Ott!==HB.FONT_UNDERLINE_ITALICS||(i.style.fontStyle="italic"),t.Ott!==HB.FONT_UNDERLINE&&t.Ott!==HB.FONT_UNDERLINE_ITALICS||(i.style.textDecoration="underline");const e=t.CK;e&&(i.style.color=e);const s=t.RK;return s&&(i.style.backgroundColor=s),i.style.textShadow=$z(t.zK),i.style.height="1.2em",i}nit(t,i){let e=t?t.Gtt.Htt:this.Ytt.Ftt.Htt;const s=i?i.Ftt.Htt:this.Ytt.Gtt.Htt;let n=t?t.Gtt.Ptt:this.Ytt.Ftt.Ptt;const r=i?i.Ftt.Ptt:this.Ytt.Gtt.Ptt;e<s&&(!i||t&&t.Ftt.Htt!==i.Ftt.Htt?this.uit():this.cit(this.Ytt.Gtt.Ptt-n),n=this.Ytt.Ftt.Ptt),n<r&&(i?this.cit(r-n):this.uit())}uit(){var t;const i=h.createElement("br");null==(t=this.Xtt)||t.appendChild(i)}cit(t){var i;if(t<=0)return;const e=h.createElement("span");e.style.display="inline-block",gu(e,hv(" ",t)),null==(i=this.Xtt)||i.appendChild(e)}constructor(t,i,e){this.Ytt=t,this.tit=i,this.L7=e}};function eU(t,i){return function(t,i){if(t.Htt!==i.Htt)return t.Htt-i.Htt;return t.Ptt-i.Ptt}(t.Ftt,i.Ftt)}var sU=class extends $c{ltt(t){let i=h.createElement("div");return i.className="theoplayer-cea608-texttrack-"+t,i.style.position="absolute",i.style.overflow="hidden",i.style.pointerEvents="none",i.style.top="10%",i.style.bottom="10%",this.k7.xK&&(i.style.fontFamily=this.k7.xK),i}re(t,i){this.vl()}vl(){let t=zz(this.k7);this.dit=function(t){return{$tt:t/100,iit:t<=100,eit:t<=150}}(100*t);const i=this.fit/ji;this.git=i*t,this.VF.style.fontSize=this.git+"px"}get fit(){let t=this.VF.offsetWidth;return this.dit&&this.dit.eit||(t*=.8),t}htt(t,i,e){for(const t of i)!e&&t.Yh||this.I7(t);for(const i of t)this._tt(i)}_tt(t){this.dit&&this.dit.eit?this._it(80):this._it(100),this.vl();let i=this.D7(t);i||(i=this.wtt(t),this.att(t,i));for(const t of i)this.VF.appendChild(t)}wtt(t){return t.O.map((t=>new iU(t,this.dit,this.k7).pr()))}_it(t){const i=(100-t)/2;this.VF.style.left=i+"%",this.VF.style.width=t+"%"}constructor(t,i,e,s){super(t,i,e,s,XB)}},nU=class t{vit(t){for(let i of this.wit)if(i.Lt===t)return i}static mit(t){switch(t.Hw){case er.TTML:case er.SRT:case er.WEBVTT:case er.CEA608:return!0}return!1}pit(t){switch(t.Hw){case er.TTML:return new hB(t,this.Ait,t.wh,this.Xu);case er.SRT:case er.WEBVTT:return new RB(t,this.Ait,t.wh,this.Xu);case er.CEA608:return new sU(t,this.Ait,t.wh,this.Xu)}}yit(t){let i=this.vit(t);i||(i=this.pit(t),i&&(i.Aq(),i.R7(this.gV),this.wit.push(i),t.gN===P.Jn&&i.itt()))}Mit(t){let i=this.wit;for(let e=i.length-1;e>=0;e-=1){let s=i[e];s.Lt===t&&(s.gn(),zr(i,e))}}Tit(i){YE(i.zt)&&t.mit(i)&&(i.OD===ju.ERROR?this.Mit(i):this.yit(i))}get D5(){return this.Sit.cs||this.Qo.sP}tr(){for(let t of this.wit)t.Lt.fn(Ct.CE,this.Nit),t.Lt.fn(Ct.OE,this.Nit),t.gn();Or(this.wit)}gn(){this.tr();for(let t of this.wit)t.gn();this.Ol.fn(di.gE,this.Iit),this.Ol.fn(di.vE,this.Dit),this.Ol.fn(Ct.aa,this.Nit),this.Sit.fn(El.aa,this.Eit),this.Qo.fn([ra.iP,ra.eP],this.Eit),this.gV.fn("xE",this.kit)}constructor(t,i,e,s,n,r){this.wit=[],this.Iit=t=>{let i=t.Lt;i.yn(Ct.CE,this.Nit),i.yn(Ct.OE,this.Nit),i instanceof JP&&(i.D5=this.D5),this.Tit(i)},this.Nit=t=>{let i=t.Lt;this.Tit(i)},this.Dit=t=>{let i=t.Lt;i.fn(Ct.CE,this.Nit),i.fn(Ct.OE,this.Nit),this.Mit(i)},this.Eit=()=>{let t=this.D5;for(let i of this.Ol.FE)i instanceof JP&&(i.D5=t)},this.kit=()=>{for(let t of this.wit)t.R7(this.gV)},this.Ait=t,this.Xu=i,this.Ol=e,this.Sit=n,this.Qo=r,this.gV=s,this.Ol.yn(di.gE,this.Iit),this.Ol.yn(di.vE,this.Dit),this.Ol.yn(Ct.aa,this.Nit),this.Sit.yn(El.aa,this.Eit),this.Qo.yn([ra.iP,ra.eP],this.Eit),this.gV.yn("xE",this.kit),this.Eit()}};r();var rU=class extends Bo{get nP(){var t;return null!=(t=this.Lit.ownerDocument.pictureInPictureEnabled)&&t}get sP(){return this.xit}async co(){this.nP?this.sP||await this.Lit.requestPictureInPicture():this.yo(new xh)}async bo(){this.nP?this.xit&&await this.Lit.ownerDocument.exitPictureInPicture():this.yo(new xh)}gn(){this.Bo(),this.Lit.removeEventListener("enterpictureinpicture",this.Cit),this.Lit.removeEventListener("leavepictureinpicture",this.jit)}constructor(t){super(),this.xit=!1,this.Cit=()=>{this.xit=!0,this.yo(new RI)},this.jit=()=>{this.xit=!1,this.yo(new PI)},this.Lit=t,this.Lit.addEventListener("enterpictureinpicture",this.Cit),this.Lit.addEventListener("leavepictureinpicture",this.jit)}};function oU(t){const i=new uj,e=function(t){const i=[];return hj.na(t)&&i.push(new hj(t)),aj.na(t)&&i.push(new aj(t)),i}(t);if(e.length>0){for(const t of e)i.oX(t);i.rX(e[0])}return i}var hU=class extends Dz{get VF(){return this.CM}get FD(){return this.CM.videoHeight}get GD(){return this.CM.videoWidth}get ka(){return this.Oit}get aY(){return this.Rit}tE(){return this.CM}async Mm(){this.Rit.gn(),this.Oit.gn(),this.Pit.gn(),this.zit.gn(),await super.Mm()}be(){super.be(),this.Pit.be()}ge(){super.ge(),this.Pit.ge()}d7(t){super.d7(t),this.Pit.d7(t)}constructor(t,i,e,s){super(t,i,e,s),this.Oit=oU(t),this.Rit=new rU(t),this.Pit=new Rz,this.zit=new nU(this.Pit.ke,this.Ou,this.nt,this.zl,this.ka,this.aY)}};r(),r();r(),r();var aU=function(t){return t.Bit="HELLO",t.Uit="HI_THERE",t.Qit="INITIALIZE",t.Fit="APPEND_INIT",t.Yit="APPEND_DATA",t.Vit="ACK",t.Git="REMOVE",t.Wit="DESTROY_SESSION",t}({}),uU=class{Zit(t){return this.Go.Wo((async t=>{re(t);const i=new MessageChannel,e=i.port1,s=i.port2;zl.serviceWorker.controller||await WT(zl.serviceWorker,"install",t),"activated"!==zl.serviceWorker.controller.state&&await WT(zl.serviceWorker.controller,"activate",t);const n={kind:"HELLO",port:s};zl.serviceWorker.controller.postMessage(n,[s]),e.start(),this.aw=e;try{const i=await WT(e,"message",t),s=i.data;if("HI_THERE"!==s.kind)throw new g("Could not set up message channel");this.RM=s.sessionId}catch(t){throw F(t)&&this.Hit(),t}}),t)}Xit(t,i){return this.aw,this.Go.Wo((async()=>{if(!this.aw)throw new g("MessageSession not set up yet or already closed.");i||(i=[]),this.aw.postMessage(t,i);const e=await WT(this.aw,"message");return e.data}))}qit(){return this.Go.Wo((()=>this.Hit()))}Hit(){if(!zl.serviceWorker.controller)return;if("activated"!==zl.serviceWorker.controller.state)return;if(!this.aw)return;const t={kind:"DESTROY_SESSION"};this.aw.postMessage(t),this.aw.close(),this.aw=void 0}constructor(){this.Go=new Ku}};r();var cU=class{get Kit(){return this.Jit}$it(t,i){const e=t-i;this.Jit=e>this.Kit?this.Jit:e}tet(t){this.Jit=t}constructor(){this.Jit=1/0}};r(),r(),r();var lU=function(t){return t.tN="audio",t.iN="video",t.tU="metadata",t}({}),dU=class extends Bo{get KI(){return void 0===this.iet||void 0===this.eet?ge.cR():new ge([this.iet,this.eet])}get md(){return{vS:this.hH}}get s4(){return sa(this.hH,"audio")?Q.tN:sa(this.hH,"video")?Q.iN:Q.QS}get GZ(){return this.hH}get r4(){return ge.cR()}get _q(){return 30}set _q(t){}get pq(){return 30}set pq(t){}a4(t,i){}u4(t,i){}yJ(){return this.net}get ca(){return this.ret}get oet(){return this.iet}get RP(){return this.eet}async c4(){}async L2(t,i){}async c2(t,i,e){if(t.Hw!==z.XK)throw new g("Streaming or opaque segments are not supported yet.");const s=t.xS,n=async()=>{const t=s.buffer,e={kind:aU.Yit,mediaType:fU(this.hH),segment:s,startPts:i.het,totalDuration:i.ct};if(await this.aet.Xit(e,[t]),void 0===this.iet){const t=i.het+i.RB;this.iet=t,this.eet=t}this.eet=this.eet+i.ct,this.yo(new Gs(W.ZK))};return this.Go.Wo((async t=>{re(t);try{this.ret=!0,await n()}finally{this.ret=!1}}),e)}async f2(t,i,e){if(t.Hw!==z.XK)throw new g("Streaming or opaque initialization segments are not supported yet.");const s=t.xS,n=async()=>{const t={kind:aU.Fit,mediaType:fU(this.hH),segment:s};await this.aet.Xit(t,[])};return this.Go.Wo((async t=>{re(t);try{this.ret=!0,await n()}finally{this.ret=!1}}),e)}i4(){this.net=!0}G2(){this.net=!1}async Rb(t,i,e){const s=async()=>{const t={kind:aU.Git,mediaType:fU(this.hH),endTime:i};await this.aet.Xit(t),this.iet=void 0,this.eet=void 0,this.yo(new Gs(W.ZK))};return this.Go.Wo((async t=>{re(t);try{this.ret=!0,await s()}finally{this.ret=!1}}),e)}rJ(t){return this.hH===t.vS}hJ(t){return this.hH=t.vS,Promise.resolve()}async Mm(){this.Bo(),await this.Go.gn()}constructor(t,i){super(),this.hH=t,this.aet=i,this.iet=void 0,this.eet=void 0,this.Go=new Ku,this.ret=!1,this.net=!1}};function fU(t){return t.match(/video/)?lU.iN:lU.tN}var gU=class t{static uet(i,e,s,n){const r=[];for(let t=0;t<i.n3.length;t++){const s=i.n3[t].vS;r.push(new dU(s,e))}return new t(i,r,s,n)}cet(){}get let(){return[this.X4,this.q4].filter(Rt)}get Z4(){return this.X4}get KI(){return IR(this)}get md(){return this.gM}get ct(){return 0}get yJ(){var t,i,e;const s=null==(e=null==(t=this.X4)?void 0:t.yJ())||e;var n;const r=null==(n=null==(i=this.q4)?void 0:i.yJ())||n;return s&&r}get PD(){return new ge([0,1/0])}get H4(){return this.q4}async Mm(){await Promise.all([this.X4,this.q4].filter(Rt).map((t=>t.Mm())))}J4(t){}s3(t,i,e,s){}i4(){var t,i;null==(t=this.X4)||t.i4(),null==(i=this.q4)||i.i4()}G2(){var t,i;null==(t=this.X4)||t.G2(),null==(i=this.q4)||i.G2()}rJ(t){return!0}hJ(t){return this.gM=t,Promise.resolve()}uJ(t){}async sJ(t,i){const e=await this.hm.nm(t.Xw,i),s=await e.Xb();return await this.nJ(s),s}async nJ(t){if(t&&!this.CM.src)throw new ti(Do.CONTENT_PROTECTION_ERROR,"Attempted to attach MediaKeys to a sourceless MediaElement");if(!t&&this.CM.src)throw new ti(Do.CONTENT_PROTECTION_ERROR,"Attempted to remove MediaKeys from a non-empty MediaElement");const i=this.Vb;i&&(await i.Zb(this.CM),this.Vb=void 0),t&&(await t.bn(this.CM),this.Vb=t)}constructor(t,i,e,s){this.Vb=void 0,this.gM=t,this.q4=So(i,(t=>Boolean(t.GZ.match(/video/)))),this.X4=So(i,(t=>Boolean(t.GZ.match(/audio/)))),this.hm=e,this.CM=s,this.cet()}},_U=class extends Bo{det(){this.Lit.addEventListener("timeupdate",this.fet),this.Lit.addEventListener("ended",this._et),this.Lit.addEventListener("timeupdate",this.vet),this.Lit.addEventListener("ratechange",this.wet),this.Lit.addEventListener("volumechange",this.met),this.Lit.addEventListener("durationchange",this.pet),this.Lit.addEventListener("playing",this.Aet),this.Lit.addEventListener("seeking",this.yet),this.Lit.addEventListener("play",this.bet),this.Lit.addEventListener("pause",this.Met),this.Lit.addEventListener("encrypted",this.i7)}Tet(){this.Lit.removeEventListener("timeupdate",this.fet),this.Lit.removeEventListener("ended",this._et),this.Lit.removeEventListener("timeupdate",this.vet),this.Lit.removeEventListener("ratechange",this.wet),this.Lit.removeEventListener("volumechange",this.met),this.Lit.removeEventListener("durationchange",this.pet),this.Lit.removeEventListener("playing",this.Aet),this.Lit.removeEventListener("seeking",this.yet),this.Lit.removeEventListener("play",this.bet),this.Lit.removeEventListener("pause",this.Met)}Net(){this.S9.yn(fa.CE,this.Ds)}Iet(){this.S9.fn(fa.CE,this.Ds)}get VF(){return this.Lit}get D3(){return!1}get sD(){return this.Lit.currentTime+this.Det.Kit}get TD(){return this.Lit.paused}get ZD(){return this.Lit.volume}set ZD(t){this.Lit.volume=t}get ND(){return this.Lit.playbackRate}set ND(t){this.Lit.playbackRate=t}get Eet(){return this.Lit.defaultPlaybackRate}get KI(){var t,i;return null!=(i=null==(t=this.WF)?void 0:t.KI)?i:ge.cR()}get ket(){return ge.xn(this.Lit.buffered)}get kD(){const t=this.Let;return this.Fo.WO(t.Vp(this.Det.Kit))}get Let(){return ge.xn(this.Lit.played)}get BD(){return this.rV}get y3(){return!1}get C3(){return!1}get ct(){return this.Lit.duration}get mD(){return this.Lit.muted}set mD(t){this.Lit.muted=t}get oit(){return this.Lit.style}get FR(){return il({},dO,{QR:!0})}Gp(t,i,e){this.Z9.Dm(),this.Z9=new Ai,this.H9=Te(this.X9(t,this.H9,this.Z9.wm),this.Z9).catch(ul)}async X9(t,i,e){var s;this.Fo=this.kD;const n=null==(s=this.WF)?void 0:s.let;if(!n)return;const r=x.max(...n.map((t=>t.oet?t.oet:1/0)));this.rV=!0,this.yo(new ll(t)),await i.catch(ul),re(e);try{for(this.xet||this.Cet(),this.Lit.load(),this.jet||(this.Oet=!1,await Ic(this.Lit.play(),e));this.OD<$i.JR;)await this.S9.Fm(fa.CE,e);this.Ret.eA(),this.xet=!1,this.rV=!1,this.yo(new ns(this.sD))}catch(t){throw this.Ret.sA(t),t}finally{this.Pet(),this.Det.tet(r)}}eE(){this.jet=!0,this.Lit.pause()}async sE(){this.jet&&(this.Lit.src||this.l7(),await this.Ret.rA,await this.Lit.play())}async Mm(){this.aet&&this.aet.qit().catch(ul),this.Z9.Dm(),this.Tet(),this.Iet(),this.S9.Mm(),this.Bo(),this.Ol.gn(),this.Pit.gn(),this.zit.gn()}async tr(){this.aet&&this.aet.qit().catch(ul),this.Z9.Dm(),this.Lit.removeAttribute("src"),this.Lit.removeAttribute("x-webkit-wirelessvideoplaybackdisabled"),this.Lit.removeAttribute("x-airplay-deny"),this.Lit.disableRemotePlayback=!1,this.Lit.load(),this.S9.tr(),this.Fo=ge.cR()}l7(){this.a7||(AU(this.Lit,me.Ys),this.u7=!0)}get OD(){return this.S9.OD}Cet(){const t=this.Lit.getClientRects();let i;if(!(t.length>0))return;i=t[0];const e=i.width,s=this.Lit.videoWidth/this.Lit.videoHeight,n=i.height;let r,o;e/n>s?(r=n*s,o=n):(o=e/s,r=e),this.Lit.style.width=r+"px",this.Lit.style.height=o+"px",this.Lit.style.marginLeft=(e-r)/2+"px",this.Lit.style.marginTop=(n-o)/2+"px",this.Lit.style.backgroundColor="black"}Pet(){this.Lit.style.width="100%",this.Lit.style.height="100%",this.Lit.style.marginLeft="",this.Lit.style.marginTop="",this.Lit.style.backgroundColor=""}get FD(){return this.Lit.videoHeight}get GD(){return this.Lit.videoWidth}get hD(){return this.Lit.ended}get Ti(){return this.Lit.offsetHeight*me.Ys.pv}get ji(){return this.Lit.offsetWidth*me.Ys.pv}get gD(){return!1}get a7(){return this.u7}get $I(){}get Ou(){return this.zet}get lt(){}get ka(){return this.Oit}get aY(){return this.Qo}get PD(){return this.WF?this.WF.PD:ge.cR()}get ZF(){}get nt(){return this.Ol}get zl(){return this.gV}get JD(){return!1}set JD(t){}oY(t,i,e,s,n){}dE(t,i,e,s,n,r,o,h,a){const u=new an(t,i,e,s,n,r,o,a,h);return this.Ol.tt(u),this.c8.tt(u),u}uY(t){throw g("Not supported.")}IJ(t){}wD(){return Zj(this.Lit)}get L9(){return"block"===this.Lit.style.display}ge(){this.Lit.style.display="block",this.Pit.ge()}be(){this.Lit.style.display="none",this.Pit.be()}o7(){}async $n(t){if(t.Hw===vl.wU)throw new g("Not yet implemented");await this.aet.Zit();const i=So(t.KF,(t=>t.Gb.Hw===Fs.Ww)),e={kind:aU.Qit,mediaBufferConfigs:t.n3.map((t=>t.vS)),fairPlaySdkUri:null==i?void 0:i.RQ};return await this.aet.Xit(e),this.WF=gU.uet(t,this.aet,this.hm,this.Lit),this.aJ.$n(this.WF,t),this.Lit.setAttribute("x-webkit-airplay","deny"),this.Lit.setAttribute("x-webkit-wirelessvideoplaybackdisabled",""),this.Lit.disableRemotePlayback=!0,this.Lit.preload="none",this.Lit.src="https://theo.proxy/"+this.aet.RM+"/master.m3u8",this.WF}h7(){}_U(t){this.Ol.it(t),this.c8.it(t)}cY(){for(const t of this.Ol.FE.slice())t.gn();this.Ol.tr()}UF(t){}nY(){return!1}d7(t){t.appendChild(this.Lit),this.Pit.d7(t)}tE(){return this.Lit}get gY(){return this.aJ.gY}set gY(t){this.aJ.gY=t}get f7(){}set f7(t){}get X6(){}aE(){}constructor(t,i,e,s){super(),this.xet=!0,this.aet=new uU,this.Det=new cU,this.jet=!0,this.Ret=new pa,this.rV=!1,this.H9=Promise.resolve(),this.Z9=new Ai,this.Oet=!0,this.Fo=ge.cR(),this.u7=!1,this.fet=()=>{this.TD||this.ket.U<=0||this.KI.U<=0||this.Det.$it(this.KI.jn(this.KI.U-1),this.ket.jn(this.ket.U-1))},this._et=()=>{this.yo(new ce(this.sD))},this.vet=()=>{this.yo(new H(this.sD,this.$I))},this.wet=()=>{this.yo(new rr(this.sD,this.ND))},this.met=()=>{this.yo(new B(this.sD,this.ZD))},this.pet=()=>{this.yo(new In(this.ct))},this.Aet=()=>{this.yo(new fo(this.sD))},this.yet=()=>{this.Gp(this.sD)},this.bet=async()=>{this.Oet&&this.yo(new us(this.sD)),this.jet=!1,this.Oet=!0},this.Met=()=>{this.jet=!0,this.yo(new Ia(this.sD))},this.i7=t=>{const i=t.initDataType;var e;const s=null!=(e=t.initData)?e:new ArrayBuffer(0);this.yo(new on(i,s))},this.Lit=t,this.S9=new to(this),this.zet=e,this.gV=s,this.Lit.playsInline=!0,this.Lit.style.width="100%",this.Lit.style.height="100%",this.det(),this.Net(),this.Oit=oU(this.Lit),this.Qo=new rU(this.Lit),this.aJ=new jc(this),this.hm=i,this.Ol=new bn,this.c8=new zh(this),this.Pit=new Rz,this.zit=new nU(this.Pit.ke,this.Ou,this.nt,this.zl,this.ka,this.aY)}},vU=[Q.tN,Q.iN];function wU(t){const i=h.createElement(t);return jd(i)&&i.addEventListener("contextmenu",yU),pU(i),i}function mU(t){pU(t),t.removeEventListener("contextmenu",yU)}function pU(t){t.removeAttribute("id"),t.removeAttribute("class"),t.removeAttribute("style"),qu(t),Od(t),t.pause(),t.playbackRate=1,t.disableRemotePlayback=!1,t.preload=Ac.HR,t.controls=!1,t.style.display="none",jd(t)&&(t.style.width="100%",t.style.height="100%",t.style.pointerEvents="none",t.playsInline=!0,t.setAttribute("webkit-playsinline",""))}function AU(t,i){if(i.Bv){const i=t.muted;t.muted=!0,t.muted=!1,t.muted=i}else if(t.paused){const i=t.play();yt(i)&&xe(i),t.pause()}}function yU(t){t.preventDefault()}r(),r();var bU=class{jS(t){return this.dU.jS(t)}wN(t){this.dU.wN(t)}gn(){this.dU.gn()}constructor(t){this.dU=t}},MU=class extends bU{jS(t){const i=new _e(t),e=this.dV.rq.AF(i);return e?this.Bet(i,e):this.dU.jS(i)}async Bet(t,i){i.hq(me.J_()/1e3);const e=await this.dU.jS(t);let s;i.aq(me.J_()/1e3),s=e.bS?e._S().pipeThrough(new Iu(new TU(i))):e.gS().then((t=>{const e=me.J_()/1e3;return i.uq(e,new T(t)),i.cq(e),t}));const n={xS:s,jS:e.jS};return new vu(n,e)}constructor(t,i){super(t),this.dV=i}},TU=class{start(t){this.kK=t}transform(t){this.Uet.uq(me.J_()/1e3,t),this.kK.enqueue(t)}flush(){this.Uet.cq(me.J_()/1e3)}constructor(t){this.Uet=t}};function SU(t){return{get ratio(){return t.$o},get thresholds(){return t.Qet.slice()}}}function NU(t){const i=[],e=x.floor(1/t);if(j(e))return[];for(let s=0;s<=e;s++){const e=rh(s*t,0,1);i.push(e)}return i}r(),r(),r();var IU=class{get $o(){return this.Fet}get Qet(){return this.Yet}Vet(t){return i=>{const e=i[i.length-1];this.Fet=e.intersectionRatio,t(e.intersectionRatio)}}get ga(){return this.Za||(this.Za=SU(this)),this.Za}nE(){this.Get.disconnect()}constructor(t,i,e){this.Fet=1,this.Za=void 0,this.Yet=NU(i);const n=this.Vet(e);this.Get=new s.IntersectionObserver(n,{root:null,threshold:this.Yet}),this.Get.observe(t)}},DU=class{get $o(){return this.Fet}get Qet(){return this.Yet}get ga(){return this.Za||(this.Za=SU(this)),this.Za}Wet(t){this.Fet=t;const i=this.Yet;let e=0;if(t>0)for(;e<i.length&&i[e]<=t;)++e;this.Zet!==e&&(this.Zet=e,this.Het(t))}constructor(t,i){this.Fet=1,this.Zet=-1,this.Za=void 0,this.Yet=NU(t),this.Het=i}},EU=class extends DU{Xet(){const t=this.lo.getBoundingClientRect();return rh(x.max(0,x.min(s.innerWidth,t.right)-x.max(0,t.left))*x.max(0,x.min(s.innerHeight,t.bottom)-x.max(0,t.top))/(t.width*t.height),0,1)}nE(){s.removeEventListener("scroll",this.qet)}constructor(t,i,e){super(i,e),this.qet=Gu((()=>this.Wet(this.Xet())),50),this.lo=t,s.addEventListener("scroll",this.qet,!!JC&&{passive:!0}),Uv((()=>this.Wet(this.Xet())))}},kU=.1,LU=class{get Ket(){return this.Jet}get Do(){return this.$et}set Do(t){if(j(t)||t<0||t>1)throw new RangeError("The threshold must be a value between 0 and 1");this.$et=t}get ga(){return this.Za||(this.Za=function(t){return{get ratio(){return t.Ket},get visible(){return t.Ket>t.Do},get visibleThreshold(){return t.Do},set visibleThreshold(i){i=yn(i),t.Do=i},addObserver:(i,e)=>(i=yn(i),t.Ao(i,e).ga),removeObserver(i){let e=t.tst(i);e&&t.No(e)}}}(this)),this.Za}ist(t){return i=>{this.Jet=i,null==t||t(this.Jet)}}Ao(t,i){if(j(t))throw new w("step is not of the right type");if(t>1||t<=0)throw new RangeError("The step must be a number greater than 0 and smaller than or equal to 1");let e;return e="function"==typeof s.IntersectionObserver?new IU(this.lo,t,this.ist(i)):new EU(this.lo,t,this.ist(i)),this.sst.push(e),e}No(t){t.nE(),Ro(this.sst,t)}tst(t){for(const i of this.sst)if(i.ga===t)return i}gn(){for(const t of this.sst)t.nE();Or(this.sst)}constructor(t){this.Jet=1,this.$et=0,this.sst=[],this.Za=void 0,this.lo=t,this.Ao(.1,this.ist())}};r();var xU=class extends Gs{constructor(){super(Qi.qm)}},CU=class extends G{get nst(){return this.dV}get pP(){return this.rst}set pP(t){this.rst=t,this.xa.pP=t}get ost(){return this.hst}get ht(){return this.xa.ht}get TW(){return this.ast}get Ou(){return this.ust}get dD(){return this.xa.dD}get vD(){return this.cst}get GG(){return this.lst}get nt(){return this.xa.nt}get zl(){return this.gV}get rt(){return this.xa.rt}get KI(){return this.JI()}JI(){return this.xa.KI}get dst(){return this.Rq}get Xq(){return this.qq}get sD(){return this.nD()}set sD(t){this.rD(t)}nD(){return this.xa.sD}rD(t,i){this.xa.rD(t,i)}fst(){return this.nD()}get $I(){return this.xa.$I}set $I(t){this.xa.$I=t}get bt(){return this.xa.bt}get ct(){return this._d()}_d(){return this.xa.ct}get ke(){return this.xa.ke}get hD(){return this.xa.hD}get lt(){return this.uD()}uD(){return this.xa.lt}get cD(){return this.lD()}lD(){return this.xa.cD}get ka(){return this.xa.$D()}get aY(){return this.xa._a()}get JD(){return this.xa.JD}set JD(t){this.xa.JD=t}get mD(){return this.xa.mD}set mD(t){const i=Boolean(t);this.yD(i)}yD(t){this.xa.mD=t,t||this.TD||this.iE()}get TD(){return this.xa.TD}get ND(){return this.DD()}set ND(t){this.ED(t)}DD(){return this.xa.ND}ED(t){this.xa.ND=t}get kD(){return this.LD()}LD(){return this.xa.kD}get xD(){return this.xa.xD}set xD(t){this.xa.xD=t}get OD(){return this.xa.OD}get PD(){return this.zD()}zD(){return this.xa.PD}get BD(){return this.xa.BD}get dk(){return this.SP}get FD(){return this.xa.FD}get GD(){return this.xa.GD}get ZD(){return this.xa.ZD}set ZD(t){const i=rh(Number(t),0,1)||0;this.XD(i)}get qD(){return this.fV}XD(t){this.xa.ZD=t}Sa(){ph(this,yx,this)}sE(){this.xa.sE()}eE(){this.xa.eE()}Ya(){return this.JY}async wa(t,i){if(this.JY=t,t){this.gst.dZ(t).catch(this._st);const e=function(t){t.sources;const i=t.sources.filter((t=>wd(t.integration)));0;return t.sources=i,t}(t);await this.xa.wa(e,i)}}iE(){if(this.do)return;this.xa.iE(),this.hst.iE();const t=this.ke.getElementsByTagName("video");for(let i=0;i<t.length;i++){const e=t[i];"Advertisement"===e.title&&AU(e,me.Ys)}this.do=!0}cs(){return this.vst.Oo()===pc.FULLSCREEN}ge(){this.xa.ge()}be(){this.xa.be()}tE(){return this.xa.tE()}aE(){this.xa.aE()}uE(){this.xa.uE()}dE(t){return this.xa.dE(t)}async nE(){this.JY=void 0,await this.xa.nE(),await this.xa.tr()}async gn(){this.yo(new xU),this.Bo(),this.ast.gn(),this.GI.gn(),this.lst.gn(),this.wst.gn(),this.mst.gn(),this.vst.gn(),this.ust.gn(),this.pst.gn(),this.hst.gn(),this.lV.gn(),await this.xa.gn()}constructor(t,i,e){super(),this.rst=!1,this.do=!1,this.JY=void 0,this.Ast=!1,this.Ca=void 0,this._st=t=>{if(this.Ast)return;this.Ast=!0;const i=this.yst,e=be(t);this.xa.WE=new ax(this.ke,e,t),xe(i.gn())},this.bst=t=>{t.type!==Qi._p&&t.type!==Qi.gp&&this.yo(t)};const s=yn(i.uid);j(s)?this.SP=WI++:this.SP=s,this.md=i;const n=me.GI,r=new sO;this.pst=new UC("8.11.0",n,r),this.dV=new Bj,this.fV=new YL;const o=new MU(n,this.dV);this.GI=new Ij(o,i.allowMixedContent),this.MK=null!=e?e:new AC(i.isEmbeddable,"8.11.0",gC()),this.gst=new eO(n,this.MK,this.pst,r,i,gC()),this.gst.mK().catch(this._st),this.ust=new nj(t),this.ust.yn(Ah.pn,this.Ds),this.gV=new uO,this.Rq=new Fj,this.qq=new Vj;const h=new hx(t,i,this.GI,this.dV,this.fV,this.ust,this.gV);this.dV.Aq(h);let a=h;a=new Yj(a,this.dst),a=new Gj(a,this.Xq),this.yst=a,this.xa=new BI(this.yst),this.xa.Rm(this.bst),this.cst=new Wj(this.xa),this.lst=new kj(this.xa,this.GI,this.dV),this.wst=new GC(this),this.mst=new cj(this.xa,i.allowNativeFullscreen),this.vst=new wj(this.mst,this.xa._a()),this.ust.bn(),this.To=new LU(t),this.lV=new Cn(this.ust,this.gV,1,[Q.iN]),this.hst=new yf(this.lV),this.ast=new qj}};r(),r();var Nu=class extends G{get nst(){return this.Mst()}Mst(){return this.ta.nst}get Uc(){return this.Tst()}Tst(){return this.ta.Uc}get pst(){return this.ta.pst}get ost(){return this.Sst()}Sst(){return this.ta.ost}get pP(){return this.ta.pP}set pP(t){this.ta.pP=t}get wst(){return this.ta.wst}get TW(){return this.ta.TW}get dst(){return this.ta.dst}get md(){return this.ta.md}get Ou(){return this.ta.Ou}get ka(){return this.$D()}$D(){return this.ta.ka}get aY(){return this._a()}_a(){return this.ta.aY}get GI(){return this.ta.GI}get qD(){return this.ta.qD}get gst(){return this.ta.gst}get Xq(){return this.ta.Xq}get GG(){return this.ta.GG}get vst(){return this.ta.vst}get ust(){return this.ta.ust}get xa(){return this.ta.xa}get zl(){return this.ta.zl}get Nst(){return this.Ist()}Ist(){return this.ta.Nst}get dk(){return this.ta.dk}get To(){return this.ta.To}get ht(){return this.HI()}HI(){return this.ta.ht}JI(){return this.ta.JI()}get $I(){return this.tD()}set $I(t){this.iD(t)}tD(){return this.ta.$I}iD(t){this.ta.$I=t}get bt(){return this.eD()}eD(){return this.ta.bt}nD(){return this.ta.nD()}rD(t,i){this.ta.rD(t,i)}fst(){return this.ta.fst()}_d(){return this.ta._d()}get ke(){return this.oD()}oD(){return this.ta.ke}get hD(){return this.aD()}aD(){return this.ta.hD}uD(){return this.ta.uD()}lD(){return this.ta.lD()}get dD(){return this.fD()}fD(){return this.ta.dD}get JD(){return this.ta.JD}set JD(t){this.ta.JD=t}get vD(){return this.wD()}wD(){return this.ta.vD}get mD(){return this.pD()}set mD(t){this.yD(t)}pD(){return this.ta.mD}yD(t){this.ta.yD(t)}get TD(){return this.SD()}SD(){return this.ta.TD}get ND(){return this.DD()}set ND(t){this.ED(t)}DD(){return this.ta.ND}ED(t){this.ta.ND=t}LD(){return this.ta.LD()}get xD(){return this.CD()}set xD(t){this.jD(t)}CD(){return this.ta.xD}jD(t){this.ta.xD=t}get OD(){return this.RD()}RD(){return this.ta.OD}get Ca(){return this.ta.Ca}set Ca(t){this.ta.Ca=t}zD(){return this.ta.zD()}get BD(){return this.UD()}UD(){return this.ta.BD}get nt(){return this.QD()}QD(){return this.ta.nt}get FD(){return this.YD()}YD(){return this.ta.FD}get rt(){return this.VD()}VD(){return this.ta.rt}get GD(){return this.WD()}WD(){return this.ta.GD}get ZD(){return this.HD()}set ZD(t){this.XD(t)}HD(){return this.ta.ZD}XD(t){this.ta.XD(t)}iE(){this.ta.iE()}eE(){this.ta.eE()}sE(){this.ta.sE()}ge(){this.ta.ge()}be(){this.ta.be()}cs(){return this.ta.cs()}tE(){return this.ta.tE()}aE(){this.ta.aE()}uE(){this.ta.uE()}dE(t){return this.ta.dE(t)}Sa(){this.ta.Sa()}Ya(){return this.ta.Ya()}wa(t,i){return this.ta.wa(t,i)}nE(){return this.ta.nE()}lE(t){return!1}qY(){this.Dst&&this.ta.Rm(this.fE)}KY(){this.Dst&&this.ta.Qm(this.fE)}async gn(t){this.Bo(),t||await this.ta.gn(),this.KY()}constructor(t,i){super(),this.fE=t=>{this.lE(t)||this.yo(t)},this.ta=t,this.Dst=!i,this.qY()}},hh=function(t){return t[t.nu=0]="nu",t[t.Est=1]="Est",t[t.Ok=2]="Ok",t[t.kst=3]="kst",t[t.Lst=4]="Lst",t[t.xst=5]="xst",t}({}),jU=[0,1,2,3,4,5],OU={};function sc(t,i){(OU[i]||(OU[i]=[])).push(t)}var RU={};function ya(t,i){(RU[i]||(RU[i]=[])).push(t)}var PU=[];function zU(t){for(const i of PU)i(t)}r();var BU=self.CustomEvent;var UU=function(){try{const t=new BU("cat",{detail:{foo:"bar"}});return"cat"===t.type&&"bar"===t.detail.foo}catch(t){}return!1}()?function(t,i){return new CustomEvent(t,i)}:function(t,i){const e=h.createEvent("CustomEvent");return e.initCustomEvent(t,(null==i?void 0:i.bubbles)||!1,(null==i?void 0:i.cancelable)||!1,null==i?void 0:i.detail),e};r();var QU=new class{get U(){return this.vP.length}get ga(){var t;return null!=(t=this.Za)?t:this.Za=function(t){const i=[];for(let e=0;e<t.U;e++)i[e]=t.VE(e).ga;return i.getPlayerByUID=i=>{const e=t.Cst(i);return e&&e.ga},i}(this)}VE(t){return this.vP[t]}YJ(t){this.vP.push(t),this.ga.push(t.ga)}Rb(t){const i=this.vP.indexOf(t);i<0||(zr(this.vP,i),this.Za&&zr(this.Za,i))}Cst(t){for(const i of this.vP)if(i.dk===t)return i}constructor(){this.vP=[],this.Za=void 0}};function FU(t){let i,e;const s=i=>{e=i;const s=Hh(i,t.md);t.wa(s)};let n={get abr(){return t.nst.ga},get ads(){var i;return null==(i=t.Uc)?void 0:i.ga},get audioTracks(){return t.ht.ga},get autoplay(){return t.pP},set autoplay(i){t.pP=Boolean(i)},get buffered(){return t.JI()},get canvas(){return t.wst.ga},get cast(){var i;return null==(i=t.TW)?void 0:i.ga},get clip(){return t.dst.ga},get currentProgramDateTime(){var i;return null!=(i=t.$I)?i:null},set currentProgramDateTime(i){t.$I=null!=i?i:void 0},get currentTime(){return t.nD()},set currentTime(i){t.rD(Number(i))},get duration(){return t._d()},get element(){return t.ke},get ended(){return t.hD},get error(){return t.uD()},get errorObject(){return t.lD()},get loop(){return t.Xq.Xq},set loop(i){t.Xq.Xq=Boolean(i)},get metrics(){return t.vD.ga},get muted(){return t.mD},set muted(i){t.yD(i)},get network(){return t.GG.ga},get paused(){return t.TD},get playbackRate(){return t.ND},set playbackRate(i){const e=Number(i);if(e<0)throw new RangeError("playbackRate must be a positive number");t.ND=e},get played(){return t.LD()},get poster(){return t.mi},set poster(i){t.mi=To(i)},get preload(){return t.xD},set preload(i){t.xD=function(t){switch(t){case"auto":case"":return"auto";case"metadata":return"metadata";default:return"none"}}(i)},get presentation(){return t.vst.ga},get readyState(){return t.OD},get seekable(){return t.zD()},get seeking(){return t.BD},get source(){return e},set source(t){s(t)},get src(){return Wx(t.Ya())},set src(t){s({sources:t})},get textTracks(){return t.nt.ga},get textTrackStyle(){return t.zl.ga},get theoLive(){return t.Nst},get uid(){return t.dk},get videoHeight(){return t.FD},get videoTracks(){return t.rt.ga},get videoWidth(){return t.GD},get visibility(){return t.To.ga},get volume(){return t.ZD},set volume(i){t.XD(Number(i))},get latency(){return t.qD.ga},destroy(){t.gn(),t=null,e=void 0},play(){t.jst()},pause(){t.eE()},stop(){e=void 0,t.nE()},prepareWithUserAction(){t.iE()},addEventListener(t,e){i.yn(t,e)},removeEventListener(t,e){i.fn(t,e)},setSource(t){s(t)},addTextTrack:i=>t.dE(function(t){return{zt:To(t.kind),wh:To(t.label),gs:To(t.language),Hw:To(t.type)}}(i)).ga};return i=new gj(n,!0),i.iu(t),i.yn("destroy",(()=>{i.gn()})),n}r(),r(),r(),r();var YU=class extends Gs{constructor(t){super(Qi.ro),this.source=t}};r();var VU=class extends G{get $I(){}set $I(t){}get sD(){return this.nD()}set sD(t){this.rD(t)}nD(){return this.nV}fst(){return this.nD()}rD(t,i){this.rV&&this.nV===t||(this.nV=t,this.rV=!0,this.yo(new ll(this.nV)))}get TD(){return this.hV}get ND(){return this.aV}set ND(t){this.aV!==t&&(this.aV=t,this.yo(new rr(this.nV,this.ND)))}get OD(){return $i.KR}get BD(){return this.rV}sE(){this.hV&&(this.hV=!1,this.yo(new us(this.nV)),this.yo(new Oa(this.nV)))}eE(){this.hV||(this.hV=!0,this.yo(new H(this.nV,this.$I)),this.yo(new Ia(this.nV)))}tr(){this.nV=0,this.rV=!1,this.aV=1,this.eE()}gn(){this.Bo()}be(){}ge(){}constructor(){super(),this.nV=0,this.hV=!0,this.rV=!1,this.aV=1}};r();var GU={zIndex:"1",display:"inline-block",verticalAlign:"middle",backgroundRepeat:"no-repeat",backgroundPosition:"50% 50%",backgroundSize:"contain",cursor:"pointer",margin:"0",padding:"0",position:"absolute",top:"0",right:"0",bottom:"0",left:"0",height:"100%"},WU={visibility:"hidden"},ZU={visibility:"visible"},HU=class{get Hu(){return void 0!==this.Ost?this.Ost:void 0!==this.Rst?this.Rst:void 0}set Pst(t){this.Rst=t,this.Yn()}Yn(){const t=this.ta.TD,i=this.zst;this.Hu?this.Us.style.backgroundImage='url("'+dv(this.Hu)+'")':this.Us.style.backgroundImage="",t&&this.Hu&&!i?this.ge():this.be()}ge(){Dd(WU,this.ta.ke),Dd(ZU,this.Us)}be(){Dd(WU,this.Us),Dd(ZU,this.ta.ke)}qY(){this.ta.yn(Qi.ro,this.Bst),this.ta.yn(Qi.so,this.CU)}gn(){this.ta.fn(Qi.ro,this.Bst),this.ta.fn(Qi.so,this.CU),Xa(this.Us)}constructor(t){this.zst=!1,this.Bst=t=>{var i;this.zst=!this.ta.TD,this.Ost=null==(i=t.source)?void 0:i.poster,this.Yn()},this.CU=()=>{this.zst=!0,this.be()},this.ta=t,this.qY(),this.Us=function(){let t=oi&&oi.document&&oi.document.createElement("div");return t.className="theoplayer-poster",Dd(GU,t),t}(),t.ke.appendChild(this.Us)}};r(),r(),r();var Pa=function(t){return t[t.Ust=0]="Ust",t[t.Qst=1]="Qst",t}({});function Rc(t){let i;const e={get playing(){return t.$c},get currentAds(){return t.Fst.map((t=>t.Yst()))},get currentAdBreak(){var i,e;return null!=(e=null==(i=t.Vst)?void 0:i.Yst())?e:null},get scheduledAds(){return t.Gst.map((t=>t.Yst()))},get scheduledAdBreaks(){return t.Wst.map((t=>t.Yst()))},skip(){t.Ax()},schedule(i){let e=tC(i,Xu.K_);e?t.o6(e,Pa.Ust,!1):console.error("Invalid ad description")},registerServerSideIntegration(i,e){t.Zst(i,e)},addEventListener(t,e){i.yn(t,e)},removeEventListener(t,e){i.fn(t,e)},get theoads(){var i;return null==(i=t.Hst)?void 0:i.ga}};return i=new xi(t,e),e}r(),r();var Hr=class extends ps{constructor(t,i){super(t),this.Yl=i}},Kr=class extends Gs{get ad(){return this.adBreak}constructor(t,i){super(t),this.adBreak=i}},io=class extends Hr{ma(){return new XU(this.Yl.Yst())}constructor(t){super("Xst",t)}},XU=class extends Kr{constructor(t){super("removeadbreak",t)}};r();var Qo=class extends Hr{ma(){return new qU(this.Yl.Yst())}constructor(t){super("qst",t)}},qU=class extends Kr{constructor(t){super("addadbreak",t)}};r(),r();var xa=class extends ps{constructor(t,i){super(t),this.Kst=i}},va=class extends Gs{constructor(t,i){super(t),this.ad=i}},Jh=class extends xa{ma(){return new KU(this.Kst.Yst())}constructor(t){super("Jst",t)}},KU=class extends va{constructor(t){super("addad",t)}};r();var ir=class extends Hr{ma(){return new JU(this.Yl.Yst())}constructor(t){super("$st",t)}},JU=class extends Kr{constructor(t){super("adbreakend",t)}};r();var Va=class extends Hr{ma(){return new $U(this.Yl.Yst())}constructor(t){super("tnt",t)}},$U=class extends Kr{constructor(t){super("adbreakbegin",t)}};r();var Nc=class extends xa{ma(){return new tQ(this.Kst.Yst(),this.currentTime)}constructor(t,i){super("int",t),this.currentTime=i}},tQ=class extends va{constructor(t,i){super("adbegin",t),this.currentTime=i}};r();var ic=class extends xa{ma(){return new iQ(this.Kst.Yst(),this.currentTime)}constructor(t,i){super("ent",t),this.currentTime=i}},iQ=class extends va{constructor(t,i){super("adend",t),this.currentTime=i}};r();var cl=class extends ps{ma(){return new eQ}constructor(){super("snt")}},eQ=class extends Gs{constructor(){super("adadded")}},Qc=class extends G{get $c(){return!!this.Dc&&this.Dc.$c}get Fst(){return this.Dc?this.Dc.Fst:[]}get Vst(){return this.Dc?this.Dc.Vst:null}get Gst(){return this.Dc?this.Dc.Gst:[]}get Wst(){return this.Dc?this.Dc.Wst:[]}get Hst(){var t;return null==(t=this.Dc)?void 0:t.Hst}o6(t,i,e){var s;null==(s=this.Dc)||s.o6(t,i,e)}nnt(t){var i;null==(i=this.Dc)||i.nnt(t)}Ax(){var t;null==(t=this.Dc)||t.Ax()}rnt(t){var i;null==(i=this.Dc)||i.rnt(t)}Zst(t,i){var e;null==(e=this.Dc)||e.Zst(t,i)}get ga(){var t;return null!=(t=this.Za)?t:this.Za=Rc(this)}get WE(){return this.Dc}set WE(t){const i=this.Dc;if(i===t)return;const e=this.Fst,s=this.Vst,n=this.Gst,r=this.Wst;null==i||i.Qm(this.Ds),this.Dc=t,null==t||t.Rm(this.Ds);const o=this.Fst,h=this.Vst,a=this.Gst,u=this.Wst,c=[];let l=!1;for(const t of r)fh(u,t)||c.push(new io(t));for(const t of u)fh(r,t)||c.push(new Qo(t));for(const t of a)fh(n,t)||(c.push(new Jh(t)),l=!0);l&&c.push(new cl),s!==h&&(s&&c.push(new ir(s)),h&&c.push(new Va(h)));for(const t of e)fh(o,t)||c.push(new ic(t,this.ta.nD()));for(const t of o)fh(e,t)||c.push(new Nc(t,this.ta.nD()));for(const t of c)this.yo(t)}gn(){var t;return this.Bo(),null==(t=this.Dc)||t.Qm(this.Ds),this.Dc=void 0,Promise.resolve()}constructor(t){super(),this.Za=void 0,this.ta=t}};r();var Lc=class extends G{get $c(){return!1}get Fst(){return[]}get Vst(){return null}get Gst(){return[]}get Wst(){return[]}o6(t,i,e){this.ont.push({hnt:t,ant:i,unt:e})}Ax(){}rnt(t){}Zst(t,i){this.cnt.push({Yk:t,lnt:i})}get ga(){var t;return null!=(t=this.Za)?t:this.Za=Rc(this)}nnt(t){const i=this.cnt.slice(),e=this.ont.slice();this.tr();for(const e of i)t.Zst(e.Yk,e.lnt);for(const i of e)t.o6(i.hnt,i.ant,i.unt)}dnt(){const t=this.ont.map((t=>t.hnt));return this.tr(),t}tr(){Or(this.cnt),Or(this.ont)}gn(){return this.Bo(),this.tr(),Promise.resolve()}constructor(...t){super(...t),this.Za=void 0,this.cnt=[],this.ont=[]}};r();var sQ,nQ=class extends Gs{constructor(t){super("tizen2retry"),this.originalErrorEvent=t}};function rQ(){if(!sQ){let t=CU;t=function(t){return class extends Nu{constructor(i,e){let s=new t(i,e);for(const t of jU)if(RU[t])for(const i of RU[t])s=i(s);super(s)}}}(t);let i=function(t){return class extends G{get pst(){return this.fnt.pst}get Uc(){return this.Dc}get wst(){return this.fnt.wst}get md(){return this.fnt.md}get GI(){return this.fnt.GI}get ka(){return this.fnt.ka}get aY(){return this.fnt.aY}get vst(){return this.fnt.vst}get ust(){return this.fnt.ust}get xa(){return this.fnt.xa}get nst(){return this.fnt.nst}get pP(){return this.fnt.pP}set pP(t){this.fnt.pP=t,this.gnt()}get ost(){return this.fnt.ost}get ht(){return this.fnt.ht}get TW(){return this.fnt.TW}get Ou(){return this.fnt.ust}get ga(){return this.Za||(this.Za=this.ma()),this.Za}get dD(){return this.fnt.dD}get JD(){return this.fnt.JD}set JD(t){this.fnt.JD=t}get vD(){return this.fnt.vD}get GG(){return this.fnt.GG}get nt(){return this.fnt.nt}get zl(){return this.fnt.zl}get rt(){return this.fnt.rt}get dst(){return this.fnt.dst}get Xq(){return this.fnt.Xq}get $I(){return this.ta.$I}set $I(t){this.ta.$I=t}get bt(){return this.fnt.bt}get ke(){return this.fnt.ke}get hD(){return this.fnt.hD}get mD(){return this.fnt.mD}set mD(t){this.yD(t)}get TD(){return this.ta.TD}get mi(){return this._nt.Hu||""}set mi(t){this._nt.Pst=t}get ND(){return this.DD()}set ND(t){this.ED(t)}DD(){return this.fnt.ND}ED(t){this.ta.ND=t}get xD(){return this.fnt.xD}set xD(t){this.fnt.xD=t}get OD(){return this.ta.OD}get Ca(){return this.fnt.Ca}set Ca(t){this.fnt.Ca=t}get BD(){return this.ta.BD}get Nst(){return this.fnt.Nst}get dk(){return this.fnt.dk}get FD(){return this.fnt.FD}get GD(){return this.fnt.GD}get ZD(){return this.fnt.ZD}set ZD(t){this.XD(t)}get qD(){return this.fnt.qD}get gst(){return this.fnt.gst}get To(){return this.fnt.To}async Wo(t,i){return this.Go.Wo(t,i).catch(bu)}async vnt(t,i){re(i),this.fnt.Rm(this.wnt);try{await this.fnt.wa(t,i)}finally{this.fnt.Qm(this.wnt)}}async gnt(){const t=await this.mnt();this.pnt(t)}async mnt(){const t=this.Ya();return t&&!Vh(t)&&this.pP&&this.TD?this.ost.Ant(this.mD):"none"}pnt(t){var i;const e=(null==(i=this.Ya())?void 0:i.mutedAutoplay)||this.md.mutedAutoplay;switch(t){case"all":this.jst();break;case"muted":(this.mD||e===DI.ALL)&&(this.mD=!0,this.sE())}}wa(t){Vh(this.JY)||this.yo(new Zi(0,$i.KR)),this.tr(),this.JY=t,xe(this.Wo((async i=>{re(i);try{await this.vnt(t,i)}catch(t){return wh(t),this.JY=void 0,void this.LY(NA(t,Do.SOURCE_NOT_SUPPORTED))}finally{this.ynt(this.fnt)}const e=await this.mnt();this.yo(new YU(this.Ya())),this.pnt(e)})))}rD(t,i){this.ta.rD(t,i)}uD(){var t;return null!=(t=this.pV)?t:this.fnt.uD()}lD(){var t;return null!=(t=this.FF)?t:this.fnt.lD()}LY(t){void 0===this.lD()&&(this.FF=t,this.pV=be(t),this.yo(new As(t)))}sE(){this.ta.sE()}jst(){this.mD||this.iE(),this.sE()}iE(){this.fnt.iE()}eE(){this.ta.eE()}nE(){this.wa(void 0)}ge(){this.eV=!0,this.ta.ge()}be(){this.eV=!1,this.ta.be()}Sa(){this.fnt.Sa()}XD(t){this.fnt.XD(t)}yD(t){this.fnt.yD(t)}ja(t){this.bnt=t,t.YJ(this)}cs(){return this.fnt.cs()}Ya(){return this.JY}tE(){return this.fnt.tE()}nD(){return this.ta.nD()}fst(){return this.ta.fst()}_d(){return this.fnt._d()}JI(){return this.fnt.JI()}LD(){return this.fnt.LD()}zD(){return this.fnt.zD()}aE(){this.fnt.aE()}uE(){this.fnt.uE()}dE(t){return this.fnt.dE(t)}tr(){this.JY=void 0,this.FF=void 0,this.pV=void 0,this.Mnt=!0,Or(this.Tnt),this.Snt.tr(),this.ynt(this.Snt),this.Go.Dm(),xe(this.Go.Wo((async t=>{re(t),await this.fnt.nE()})))}gn(){this.yo(new xU),this._nt.gn(),this.KY(),this.tr(),xe(this.Wo((async()=>{await this.fnt.gn(),this.bnt&&(this.bnt.Rb(this),this.bnt=void 0),this.Go.gn()}))),this.Bo()}ynt(t){if(this.ta===t)return;const i=this.ta.TD,e=this.ta.nD(),s=this.ta.ND,n=this.ta.OD,r=this.ta.BD;this.Nnt=i,this.g7=n,this.KY(),t.Rm(this.Int),t===this.fnt?(void 0!==this.Dc&&(this.Dc.WE=t.Uc,this.Dnt.nnt(this.Dc)),(r||t.nD()!==e)&&t.rD(e),t.ND!==s&&(t.ND=s),i?t.eE():t.sE()):(void 0!==this.Dc&&(this.Dc.WE=this.Dnt,this.Dnt.tr()),this.md.retainPlaybackRateOnSourceChange?t.ND=s:1!==s&&this.yo(new rr(this.nD(),1))),t.Qm(this.Int),this.ta=t,this.qY();for(const t of this.Tnt)this.yo(t);Or(this.Tnt),this.eV?t.ge():t.be()}qY(){this.ta.Rm(this.cE)}KY(){this.ta.Qm(this.cE)}ma(){return FU(this)}constructor(i,e){super(),this.Nnt=!0,this.g7=$i.KR,this.Mnt=!1,this.JY=void 0,this.FF=void 0,this.pV=void 0,this.wnt=t=>{t.type!==Qi.mp&&this.Tnt.push(t)},this.Int=t=>{(t.type!==Qi.so||this.ta.TD)&&(t.type===Qi.vp&&this.ta.TD||t.type===Qi.bp&&this.ta.BD&&this.ta.nD()===t.currentTime||t.type===Qi.mp&&this.ta.ND===t.playbackRate||this.yo(t))},this.cE=t=>{if(this.Mnt){if(t.type===fa.xO)return;t.type!==fa.DO&&t.type!==fa.CO||(this.Mnt=!1)}if(t.type===Qi.so){if(!this.Nnt)return;this.Nnt=!1}else if(t.type===Qi.vp){if(this.Nnt)return;this.Nnt=!0}else if(t.type===fa.CE){if(this.g7===t.readyState)return;this.g7=t.readyState}else if(t.type===Qi.qm)return;this.yo(t)},this.fnt=new t(i,e),this.Snt=new VU,this.ta=this.fnt,this._nt=new HU(this),this.fnt.Uc&&(this.Dc=new Qc(this),this.Dc.WE=this.fnt.Uc,this.Dnt=new Lc),this.Go=new Ku,this.Tnt=[],this.eV=!0,this.qY()}}}(t);ui.$g&&ui.i_<3&&(i=function(t){return class extends t{wa(t){this.Ent=0,super.wa(t)}yo(t){if(t.type===ac.ua&&this.Ent<3)return this.Ent++,super.yo(new nQ(t)),void super.wa(this.Ya());super.yo(t)}constructor(...t){super(...t),this.Ent=0}}}(i)),i=function(t){let i=t;for(const t of jU)if(OU[t])for(const e of OU[t])i=e(i);return i}(i),sQ=i}return sQ}function oQ(t,i){const e=kI(i),s=new(rQ())(t,e);s.Ca=s;let n=s.ga;return s.Sa(),s.ja(QU),_.defineProperty(n,"constructor",{value:oQ}),n=pS(n),zU(s),n}Uv((()=>{self.dispatchEvent&&self.dispatchEvent(UU("theoplayerready"))})),r();var hQ={base64:new class{encode(t){return Ys(t)}decode(t){return Vs(t)}}};r();var aQ=JSON.parse('["hbbtv","dash","hesp","millicast","hls","chromecast","ads","theoads","airplay","spotx","vr","vr-webxr","cache","webaudio","youbora","mediamelon","moat","google-dai","streamone","lcevc","freewheel","agama","verizonmedia","mediatailor","ui","relatedcontent","social","upnext","contextmenu","texttrackstyle-ui","activequalitylabel","upcomingadnotification"]');r(),r(),r();var uQ=class{get sD(){const t=this.ta.currentTime;return isFinite(t)?t:"now"}get knt(){return this.ta.src||""}tr(){}constructor(t,i){this.Lnt=!1,this.xnt=t=>{this.Cnt.$Z(t.error,this.sD)},this.jnt=()=>{this.Cnt.XZ(this.knt),this.ta.removeEventListener("playing",this.jnt),this.Lnt=!1},this.js=()=>{var t,i,e,s;this.Lnt||(this.ta.addEventListener("playing",this.jnt),this.Lnt=!0),null==(t=this.ta.ads)||t.removeEventListener("adbegin",this.Ont),null==(i=this.ta.ads)||i.removeEventListener("overlaybegin",this.Rnt);var n,r;(null==(s=this.ta.source)||null==(e=s.ads)?void 0:e.some((t=>"theoads"===t.integration)))&&(null==(n=this.ta.ads)||n.addEventListener("adbegin",this.Ont),null==(r=this.ta.ads)||r.addEventListener("overlaybegin",this.Rnt))},this.Ont=t=>{"theoads"!==t.ad.integration||t.ad.isSlate||this.Cnt.JZ("ad")},this.Rnt=()=>{this.Cnt.JZ("overlay")},this.Cnt=i,this.ta=t,this.ta.addEventListener("error",this.xnt),this.ta.addEventListener("sourcechange",this.js),this.js()}};!function(t){PU.push(t)}((function(t){new uQ(t.ga,t.pst)})),r();var cQ="theoplayer-stored-volume",lQ="theoplayer-stored-mutedstate";sc((function(t){return class extends t{yD(t){this.md.persistVolume&&wa.$p(lQ,""+Boolean(t)),super.yD(t)}XD(t){this.md.persistVolume&&wa.$p(cQ,""+Number(t)),super.XD(t)}constructor(t,i){if(super(t,i),i.persistVolume){let t=wa.vK(cQ);(void 0===t||j(t))&&(t=1);const i=wa.wK(lQ)||!1;this.ZD=t,this.mD=i}}}}),hh.nu);var dQ="8.11.0",fQ="2025.1.2",gQ=QU.ga,_Q=qc.Jk.registerContentProtectionIntegration.bind(qc.Jk);r(),r(),r(),r();var vQ={_H(t){oi.addEventListener("beforeunload",t)},lH(t){oi.removeEventListener("beforeunload",t)}},wQ={Pnt:class{get _V(){const t=[];for(const i of this.znt){const e=this.Bnt.get(i);if(e){const i=e.map((t=>t.Unt));t.push(...i)}}return this.Qnt&&t.push(this.Qnt),t}wV(t){for(const i of this._V)i.d7(t)}xY(t){const i=So(this.Bnt.get(t),(t=>t.Fnt));if(i)return i.Fnt=!1,i.Unt}Ynt(t){if(!this.Qnt){var i;const t=null==(i=this.Bnt.get(Q.iN))?void 0:i[0].Unt.VF;if(!t)throw new g("Error creating iOS Safari MediaController");this.Qnt=new _U(t,this.hm,this.Xu,this.gV),t.parentElement&&this.Qnt.d7(t.parentElement)}return this.Qnt}async _Y(t){const i=t.VF,e=i.tagName.toLowerCase();await t.tr(),pU(i);const s=So(this.Bnt.get(e)||[],(i=>t===i.Unt));s&&(s.Fnt=!0)}cV(){for(const t of this._V)t.l7()}gn(){for(const t of this._V){const i=t.VF;t.Mm(),mU(i),Xa(i)}this.Bnt.clear(),this.Qnt=void 0}Vnt(){for(const t of this.znt){const i=[];this.Bnt.set(t,i);for(let e=0;e<this.Gnt;e++){const e=wU(t),s=t===Q.tN?new Oz(e,this.hm,this.Xu):new hU(e,this.hm,this.Xu,this.gV);i.push({Unt:s,Fnt:!0})}}}constructor(t,i,e=2,s=vU,n=FA()){this.Gnt=e,this.znt=[...s],this.hm=n,this.Xu=t,this.gV=i,this.Bnt=Ge(),this.Vnt()}},Wnt:class t{Ant(t){return this.Znt.Wo((()=>this.Hnt(t)))}iE(){this.lV.cV()}async Hnt(i){const e=this.lV.xY(Q.iN),s=e.VF,n=await t.Xnt(s,i);return await this.lV._Y(e),n}static async Xnt(i,e){return ui.s_||ui.$g?"all":(i.src||(i.src="data:video/mp4;base64,AAAAHGZ0eXBNNFYgAAACAGlzb21pc28yYXZjMQAAAAhmcmVlAAAGF21kYXTeBAAAbGliZmFhYyAxLjI4AABCAJMgBDIARwAAArEGBf//rdxF6b3m2Ui3lizYINkj7u94MjY0IC0gY29yZSAxNDIgcjIgOTU2YzhkOCAtIEguMjY0L01QRUctNCBBVkMgY29kZWMgLSBDb3B5bGVmdCAyMDAzLTIwMTQgLSBodHRwOi8vd3d3LnZpZGVvbGFuLm9yZy94MjY0Lmh0bWwgLSBvcHRpb25zOiBjYWJhYz0wIHJlZj0zIGRlYmxvY2s9MTowOjAgYW5hbHlzZT0weDE6MHgxMTEgbWU9aGV4IHN1Ym1lPTcgcHN5PTEgcHN5X3JkPTEuMDA6MC4wMCBtaXhlZF9yZWY9MSBtZV9yYW5nZT0xNiBjaHJvbWFfbWU9MSB0cmVsbGlzPTEgOHg4ZGN0PTAgY3FtPTAgZGVhZHpvbmU9MjEsMTEgZmFzdF9wc2tpcD0xIGNocm9tYV9xcF9vZmZzZXQ9LTIgdGhyZWFkcz02IGxvb2thaGVhZF90aHJlYWRzPTEgc2xpY2VkX3RocmVhZHM9MCBucj0wIGRlY2ltYXRlPTEgaW50ZXJsYWNlZD0wIGJsdXJheV9jb21wYXQ9MCBjb25zdHJhaW5lZF9pbnRyYT0wIGJmcmFtZXM9MCB3ZWlnaHRwPTAga2V5aW50PTI1MCBrZXlpbnRfbWluPTI1IHNjZW5lY3V0PTQwIGludHJhX3JlZnJlc2g9MCByY19sb29rYWhlYWQ9NDAgcmM9Y3JmIG1idHJlZT0xIGNyZj0yMy4wIHFjb21wPTAuNjAgcXBtaW49MCBxcG1heD02OSBxcHN0ZXA9NCB2YnZfbWF4cmF0ZT03NjggdmJ2X2J1ZnNpemU9MzAwMCBjcmZfbWF4PTAuMCBuYWxfaHJkPW5vbmUgZmlsbGVyPTAgaXBfcmF0aW89MS40MCBhcT0xOjEuMDAAgAAAAFZliIQL8mKAAKvMnJycnJycnJycnXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXiEASZACGQAjgCEASZACGQAjgAAAAAdBmjgX4GSAIQBJkAIZACOAAAAAB0GaVAX4GSAhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGagC/AySEASZACGQAjgAAAAAZBmqAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZrAL8DJIQBJkAIZACOAAAAABkGa4C/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmwAvwMkhAEmQAhkAI4AAAAAGQZsgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGbQC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm2AvwMkhAEmQAhkAI4AAAAAGQZuAL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGboC/AySEASZACGQAjgAAAAAZBm8AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZvgL8DJIQBJkAIZACOAAAAABkGaAC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmiAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpAL8DJIQBJkAIZACOAAAAABkGaYC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmoAvwMkhAEmQAhkAI4AAAAAGQZqgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGawC/AySEASZACGQAjgAAAAAZBmuAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZsAL8DJIQBJkAIZACOAAAAABkGbIC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm0AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZtgL8DJIQBJkAIZACOAAAAABkGbgCvAySEASZACGQAjgCEASZACGQAjgAAAAAZBm6AnwMkhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AAAAhubW9vdgAAAGxtdmhkAAAAAAAAAAAAAAAAAAAD6AAABDcAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAzB0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAABAAAAAAAAA+kAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAALAAAACQAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAPpAAAAAAABAAAAAAKobWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAB1MAAAdU5VxAAAAAAALWhkbHIAAAAAAAAAAHZpZGUAAAAAAAAAAAAAAABWaWRlb0hhbmRsZXIAAAACU21pbmYAAAAUdm1oZAAAAAEAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAhNzdGJsAAAAr3N0c2QAAAAAAAAAAQAAAJ9hdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAALAAkABIAAAASAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAALWF2Y0MBQsAN/+EAFWdCwA3ZAsTsBEAAAPpAADqYA8UKkgEABWjLg8sgAAAAHHV1aWRraEDyXyRPxbo5pRvPAyPzAAAAAAAAABhzdHRzAAAAAAAAAAEAAAAeAAAD6QAAABRzdHNzAAAAAAAAAAEAAAABAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAABAAAAAQAAAIxzdHN6AAAAAAAAAAAAAAAeAAADDwAAAAsAAAALAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAAiHN0Y28AAAAAAAAAHgAAAEYAAANnAAADewAAA5gAAAO0AAADxwAAA+MAAAP2AAAEEgAABCUAAARBAAAEXQAABHAAAASMAAAEnwAABLsAAATOAAAE6gAABQYAAAUZAAAFNQAABUgAAAVkAAAFdwAABZMAAAWmAAAFwgAABd4AAAXxAAAGDQAABGh0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAACAAAAAAAABDcAAAAAAAAAAAAAAAEBAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAQkAAADcAABAAAAAAPgbWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAC7gAAAykBVxAAAAAAALWhkbHIAAAAAAAAAAHNvdW4AAAAAAAAAAAAAAABTb3VuZEhhbmRsZXIAAAADi21pbmYAAAAQc21oZAAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAADT3N0YmwAAABnc3RzZAAAAAAAAAABAAAAV21wNGEAAAAAAAAAAQAAAAAAAAAAAAIAEAAAAAC7gAAAAAAAM2VzZHMAAAAAA4CAgCIAAgAEgICAFEAVBbjYAAu4AAAADcoFgICAAhGQBoCAgAECAAAAIHN0dHMAAAAAAAAAAgAAADIAAAQAAAAAAQAAAkAAAAFUc3RzYwAAAAAAAAAbAAAAAQAAAAEAAAABAAAAAgAAAAIAAAABAAAAAwAAAAEAAAABAAAABAAAAAIAAAABAAAABgAAAAEAAAABAAAABwAAAAIAAAABAAAACAAAAAEAAAABAAAACQAAAAIAAAABAAAACgAAAAEAAAABAAAACwAAAAIAAAABAAAADQAAAAEAAAABAAAADgAAAAIAAAABAAAADwAAAAEAAAABAAAAEAAAAAIAAAABAAAAEQAAAAEAAAABAAAAEgAAAAIAAAABAAAAFAAAAAEAAAABAAAAFQAAAAIAAAABAAAAFgAAAAEAAAABAAAAFwAAAAIAAAABAAAAGAAAAAEAAAABAAAAGQAAAAIAAAABAAAAGgAAAAEAAAABAAAAGwAAAAIAAAABAAAAHQAAAAEAAAABAAAAHgAAAAIAAAABAAAAHwAAAAQAAAABAAAA4HN0c3oAAAAAAAAAAAAAADMAAAAaAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAACMc3RjbwAAAAAAAAAfAAAALAAAA1UAAANyAAADhgAAA6IAAAO+AAAD0QAAA+0AAAQAAAAEHAAABC8AAARLAAAEZwAABHoAAASWAAAEqQAABMUAAATYAAAE9AAABRAAAAUjAAAFPwAABVIAAAVuAAAFgQAABZ0AAAWwAAAFzAAABegAAAX7AAAGFwAAAGJ1ZHRhAAAAWm1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAALWlsc3QAAAAlqXRvbwAAAB1kYXRhAAAAAQAAAABMYXZmNTUuMzMuMTAw"),await t.qnt(),!e&&await t.Knt(i,!1)?"all":await t.Knt(i,!0)?"muted":"none")}static async Knt(t,i){t.muted=i;const e=t.play();try{if(!yt(e))return!ui.Qs;const t=Bn(250);return await Promise.race([e,t]),!0}catch(t){return!1}finally{t.pause(),t.muted=!0}}static qnt(){return new Promise((t=>{if("function"==typeof MessageChannel){const i=new MessageChannel;i.port1.onmessage=()=>t(),i.port2.postMessage("")}else u(t,0)}))}gn(){this.Znt.gn()}constructor(t){this.lV=t,this.Znt=new Ku}},Jnt:vQ,$nt:s};r();(function(t){Cn=t.Pnt,yf=t.Wnt,Ju=t.Jnt,oi=t.$nt,bf=oi&&oi.location,Mf=oi&&oi.navigator})(ui.r_&&ui.h_?il({},wQ,{Wnt:class{Ant(t){return Promise.resolve("all")}iE(){}gn(){}}}):wQ),r(),r(),r(),r();var mQ=class{async CY(t){return cI(t.type)}async jY(t){return!!await ON(t,!0)}},pQ=class extends mQ{async CY(t){return!!ea(t.useManagedMediaSource)&&super.CY(t)}};function AQ(t){return Jt(t)}function Gc(t,i){const e=Jt(t);return i?""+e+i:""+e}r(),r();var yQ=class{async trt(t){return(await this.ert.irt(t.map(AQ))).shift()}nrt(t,i){const e=Gc(t,i);return this.rrt.Kp(e)}async ort(t,i){var e;const s=Gc(t,i);return null==(e=await this.hrt.Jp(s))?void 0:e.data}bK(t){return this.art.Jp(t)}constructor(t,i,e,s){this.ert=t,this.rrt=i,this.hrt=e,this.art=s}};r(),r(),r();var Jc=class{urt(t){return Promise.resolve(!1)}crt(t){return Promise.reject(bQ)}lrt(t){return Promise.reject(bQ)}Kp(t){return Promise.resolve(!1)}Jp(t){return Promise.resolve(void 0)}drt(t,i){return Promise.resolve(void 0)}irt(t){return Promise.resolve([])}frt(){return Promise.resolve([])}grt(t){return Promise.resolve([])}_rt(t,i){return Promise.resolve([])}Rb(t){return Promise.reject(bQ)}vrt(t){return Promise.reject(bQ)}wrt(){return Promise.reject(bQ)}},bQ="Storage disabled",MQ="Storage disabled";r(),r(),r();var Wc=class{get mrt(){return this.Im.rA}async urt(t){return(this.prt||await this.mrt).urt(t)}async crt(t,i){return(this.prt||await this.mrt).crt(t,i)}async lrt(t,i){return(this.prt||await this.mrt).lrt(t,i)}async Kp(t){return(this.prt||await this.mrt).Kp(t)}async Jp(t){return(this.prt||await this.mrt).Jp(t)}async drt(t,i){return(this.prt||await this.mrt).drt(t,i)}async irt(t){return(this.prt||await this.mrt).irt(t)}async frt(){return(this.prt||await this.mrt).frt()}async grt(t){return(this.prt||await this.mrt).grt(t)}async _rt(t,i){return(this.prt||await this.mrt)._rt(t,i)}async Rb(t){return(this.prt||await this.mrt).Rb(t)}async vrt(t){return(this.prt||await this.mrt).vrt(t)}async wrt(){return(this.prt||await this.mrt).wrt()}constructor(t){this.Im=new pa,this.prt=void 0,this.Im.Em(t),this.Im.rA.then((t=>{this.prt=t}))}},TQ=class{get Art(){return this.Im.rA}async yrt(t){const i=this.brt||await this.Art;return await i.yrt(t)}constructor(t){this.Im=new pa,this.brt=void 0,this.Im.Em(t);const i=this.Im.rA;i.then((t=>{this.brt=t})),this.Mrt=new Wc(i.then((t=>t.Mrt))),this.Trt=new Wc(i.then((t=>t.Trt))),this.Srt=new Wc(i.then((t=>t.Srt))),this.Nrt=new Wc(i.then((t=>t.Nrt))),this.Irt=new Wc(i.then((t=>t.Irt)))}};function SQ(t){return new g("This storage cannot handle persistency type "+t)}r(),r(),r();var aa=function(t){return t.Drt="readonly",t.Ert="readwrite",t}({}),NQ=class{urt(t){return Promise.resolve("temporary"===t)}crt(t,i){return void 0===i&&(i="temporary"),"temporary"!==i?Promise.reject(SQ(i)):(this.krt(t.key),this.PA.push(t),Promise.resolve())}lrt(t,i){if(void 0===i&&(i="temporary"),"temporary"!==i)return Promise.reject(SQ(i));for(const i of t)this.krt(i.key);for(const i of t)this.PA.push(i);return Promise.resolve()}Kp(t){return Promise.resolve(Boolean(this.Lrt(t)))}Jp(t){return Promise.resolve(this.Lrt(t))}drt(t,i){return Promise.resolve(this.xrt(t,i))}irt(t){const i=t?t.map((t=>this.Lrt(t))):this.PA;return Promise.resolve(i.filter(Rt))}frt(){return Promise.resolve([...this.PA])}grt(t){return this._rt(t,"key")}_rt(t,i){const e=this.PA.filter((e=>e[i]===t));return Promise.resolve(e)}Rb(t){return this.krt(t),Promise.resolve()}vrt(t){for(const i of t)this.krt(i);return Promise.resolve()}wrt(){return Or(this.PA),Promise.resolve()}Lrt(t){return this.xrt(t,"key")}xrt(t,i){for(const e of this.PA)if(e[i]===t)return e}krt(t){const i=this.Lrt(t);i&&Ro(this.PA,i)}constructor(){this.PA=[]}},IQ=class t{static uet(){return Promise.resolve(new t)}yrt(t){return t(this)}constructor(){this.Trt=new NQ,this.Mrt=new NQ,this.Srt=new NQ,this.Nrt=new NQ,this.Irt=new NQ}};r(),r();var tl=class{async urt(t){for(let i of this.Crt)if(await i.urt(t))return!0;return!1}async crt(t,i){void 0===i&&(i="persistent");for(let e of this.Crt)if(await e.urt(i))return e.crt(t);throw SQ(i)}async lrt(t,i){void 0===i&&(i="persistent");for(let e of this.Crt)if(await e.urt(i))return e.lrt(t);throw SQ(i)}async Kp(t){for(let i of this.Crt)if(await i.Kp(t))return!0;return!1}async Jp(t){for(let i of this.Crt){const e=await i.Jp(t);if(e)return e}}async drt(t,i){for(let e of this.Crt){const s=await e.drt(t,i);if(s)return s}}async irt(t){const i=[];for(let e of this.Crt)i.push(...await e.irt(t));return i}async frt(){const t=[];for(let i of this.Crt)t.push(...await i.frt());return t}async grt(t){const i=[];for(let e of this.Crt)i.push(...await e.grt(t));return i}async _rt(t,i){const e=[];for(let s of this.Crt)e.push(...await s._rt(t,i));return e}async Rb(t){for(let i of this.Crt)await i.Rb(t)}async vrt(t){for(let i of this.Crt)await i.vrt(t)}async wrt(){for(let t of this.Crt)await t.wrt()}constructor(t){this.Crt=t}};function DQ(t){return async()=>{const i=await Promise.all(t.map((t=>t())));return EQ.uet(i)}}var EQ=class t{static uet(i){return Promise.resolve(new t(i))}get Nrt(){return this.jrt}get Irt(){return this.Ort}get Srt(){return this.Rrt}get Trt(){return this.Prt}get Mrt(){return this.zrt}yrt(i){if(0===this.Brt.length)return i(this);const e=[];let s=0;const n=r=>(e.push(r),s++,s<this.Brt.length?this.Brt[s].yrt(n):i(new t(e)));return this.Brt[s].yrt(n)}constructor(t){this.Brt=t,this.jrt=new tl(t.map((t=>t.Nrt))),this.Ort=new tl(t.map((t=>t.Irt))),this.Rrt=new tl(t.map((t=>t.Srt))),this.Prt=new tl(t.map((t=>t.Trt))),this.zrt=new tl(t.map((t=>t.Mrt)))}},ga=class t{static ja(i){t.MF.ja(i)}static get K_(){return t.Urt||(t.Urt=t.MF.uet()),t.Urt}};function fl(t){return void 0!==t.FD}function kQ(t){const i=ui.s_||ui.$g,e=void 0!==t&&void 0!==t.preferredAudioCodecs&&t.preferredAudioCodecs.some((t=>"ac-3"===t||"ec-3"===t)),s=i&&!e,n=new kt(!0);return async t=>{const i=t.vS;if(!n.Vv(i)&&!function(t,i){return!!t&&(ss(t)?VE(i)||WE(i):Re(t,ba.APPLICATION_TTML_XML)||Re(t,ba.TEXT_VTT)||Re(t,ba.IMAGE_JPEG))}(t.GZ,t.Qrt))return!1;const e=t.Qrt.some((t=>"ac-3"===t||"ec-3"===t));if(s&&e)return!1;if(t.yF){const e=t.yF,s=Qr(e,(t=>rv(t.J6))).filter(Rt),n=await async function(t,i){for(const e of t)if(await i(e))return!0;return!1}(s,(t=>me.Tw(t,i)));if(!n)return!1}return!0}}ga.MF=new class{uet(){return new TQ(this.Frt())}async Frt(){this.Yrt&&(await Promise.resolve(),this.Yrt=!1);for(const t of this.Vrt)try{return await DQ([IQ.uet,t])()}catch(t){}return await DQ([IQ.uet,this.Grt])()}ja(t){if(!this.Yrt)throw new g("Registration overdue");this.Vrt.push(t)}constructor(t){this.Vrt=[],this.Yrt=!0,this.Grt=t}}(class t{static uet(){return Promise.resolve(new t)}yrt(t){return Promise.reject(MQ)}constructor(){this.Trt=new Jc,this.Mrt=new Jc,this.Srt=new Jc,this.Nrt=new Jc,this.Irt=new Jc}}.uet),ga.Urt=void 0,r(),r(),r(),r();var LQ=class{get Ti(){return this.Wrt.offsetHeight*me.Ys.pv}get ji(){return this.Wrt.offsetWidth*me.Ys.pv}constructor(t){this.Wrt=t}};r();var xQ=class{get nt(){return this.Ol}dE(t,i,e,s,n,r,o,h){const a=new an(t,i,e,s,n,r,o,void 0,h);return this.Ol.tt(a),this.c8.tt(a),a}_U(t){this.Ol.it(t),this.c8.it(t),t.gn()}uY(t){const i=new yz(t.zt,t.wh,t.gs);return this.Ol.tt(i),this.c8.tt(i),i}tr(){for(const t of this.Ol.FE.slice())t.gn();this.Ol.tr(),this.c8.tr()}gn(){this.tr(),this.Ol.gn(),this.c8.gn()}constructor(t,i){this.Ol=new bn,this.c8=new iz(t,i)}};r(),r();var CQ=class{xY(t){return this.MF.xY(t)}Ynt(t){return this.MF.Ynt(t)}_Y(t){return this.MF._Y(t)}constructor(t){this.MF=t}};r(),r(),r();var Zc=class extends Bo{get Zrt(){return this.jR}get KI(){return this.JI()}JI(){return this.jR.KI}get $I(){return this.tD()}tD(){return this.jR.$I}get sD(){return this.nD()}nD(){return this.jR.sD}get Ou(){return this.jR.Ou}get ct(){return this._d()}_d(){return this.jR.ct}get ZF(){return this.Hrt()}Hrt(){return this.jR.ZF}get hD(){return this.Xrt()}Xrt(){return this.jR.hD}get lt(){return this.jR.lt}get Ti(){return this.jR.Ti}get ji(){return this.jR.ji}get ka(){return this.$D()}$D(){return this.jR.ka}get aY(){return this._a()}_a(){return this.jR.aY}get mD(){return this.jR.mD}set mD(t){this.jR.mD=t}get TD(){return this.qrt()}qrt(){return this.jR.TD}get ND(){return this.jR.ND}set ND(t){this.jR.ND=t}get kD(){return this.LD()}LD(){return this.jR.kD}get OD(){return this.RD()}RD(){return this.jR.OD}get PD(){return this.zD()}zD(){return this.jR.PD}get BD(){return this.UD()}UD(){return this.jR.BD}get y3(){return this.Krt()}Krt(){return this.jR.y3}get C3(){return this.Jrt()}Jrt(){return this.jR.C3}get nt(){return this.QD()}QD(){return this.$rt}get zl(){return this.B7()}B7(){return this.jR.zl}get L9(){return this.jR.L9}get ZD(){return this.jR.ZD}set ZD(t){this.jR.ZD=t}get a7(){return this.jR.a7}get gD(){return this.jR.gD}get FR(){return this.jR.FR}get gY(){return this.tot()}set gY(t){this.iot(t)}tot(){return this.jR.gY}iot(t){this.jR.gY=t}get f7(){return this.jR.f7}set f7(t){this.eot(t)}eot(t){this.jR.f7=t}get X6(){return this.rot()}rot(){return this.jR.X6}wD(){return this.jR.wD()}sE(){return this.jR.sE()}eE(){this.jR.eE()}Gp(t,i,e){this.jR.Gp(t,i,e)}UF(t){this.jR.UF(t)}ge(){this.jR.ge()}be(){this.jR.be()}dE(t,i,e,s,n,r,o,h){return this.jR.dE(t,i,e,s,n,r,o,h)}uY(t){return this.jR.uY(t)}nY(){return this.jR.nY()}oY(t,i,e,s,n){return this.jR.oY(t,i,e,s,n)}_U(t){this.jR._U(t)}cY(){this.jR.cY()}IJ(t){return this.jR.IJ(t)}async $n(t){const i=await this.jR.$n(t);let e;return e=t.Hw===vl.wU?this.oot(i):this.hot(i),this.WF=e,e}async tr(){this.WF&&(await this.WF.Mm(),this.WF=void 0),await this.jR.tr()}o7(){this.jR.o7()}h7(){this.jR.h7()}async Mm(){this.Bo(),this.jR.fn(lO,this.aot),this.$rt.WE=void 0,this.$rt.gn(),this.WF&&(await this.WF.Mm(),this.WF=void 0)}l7(){this.jR.l7()}uot(t){this.jR.fn(lO,this.aot),this.jR=t,this.$rt.WE=t.nt,this.jR.yn(lO,this.aot)}cE(t){this.yo(t)}constructor(t){super(),this.WF=void 0,this.$rt=new ci,this.aot=t=>this.cE(t),this.jR=t,this.$rt.WE=t.nt,this.jR.yn(lO,this.aot)}},jQ=class extends Zc{get VF(){return this.jR.VF}get D3(){return this.jR.D3}get JD(){return this.jR.JD}set JD(t){this.jR.JD=t}d7(t){this.jR.d7(t)}aE(){this.jR.aE()}constructor(t){super(t)}};r(),r(),r();var OQ=class{get md(){return this.Kb()}Kb(){return this.WF.md}get PD(){return this.zD()}zD(){return this.WF.PD}rJ(t){return this.WF.rJ(t)}hJ(t){return this.WF.hJ(t)}Mm(){return Promise.resolve()}constructor(t){this.WF=t}},RQ=class extends OQ{get Z4(){return this.X4}get H4(){return this.q4}get KI(){return this.JI()}JI(){return this.WF.KI}get ct(){return this._d()}_d(){return this.WF.ct}get yJ(){return this.cot()}cot(){return this.WF.yJ}J4(t){this.WF.J4(t)}s3(t,i,e,s){this.WF.s3(t,i,e,s)}i4(){this.WF.i4()}G2(){this.WF.G2()}Mm(){return this.X4&&(this.X4.Mm(),this.X4=void 0),this.q4&&(this.q4.Mm(),this.q4=void 0),super.Mm()}lot(t){this.WF=t,this.X4?t.Z4?this.X4.fot(t.Z4):(this.X4.Mm(),this.X4=void 0):t.Z4&&(this.X4=this.got(t.Z4),this.X4.yn(Ph,this._ot)),this.q4?t.H4?this.q4.fot(t.H4):(this.q4.Mm(),this.q4=void 0):t.H4&&(this.q4=this.got(t.H4),this.q4.yn(Ph,this._ot))}uJ(t){this.WF.uJ(t)}vot(t){}constructor(t){super(t),this.X4=void 0,this.q4=void 0,this._ot=t=>this.vot(t)}};r(),r(),r();var PQ=class extends Bo{get pq(){return this.Iq}set pq(t){this.Iq=t}get KI(){return ge.cR()}get md(){return this.gM}get s4(){return Q.QS}get r4(){return ge.cR()}get wot(){return!1}get _q(){return this.Tq}set _q(t){this.Tq=t}c2(t,i,e){return Promise.reject(new g("Invalid media buffer"))}c4(){return Promise.reject(new g("Invalid media buffer"))}f2(t,i,e){return Promise.reject(new g("Invalid media buffer"))}yJ(){return!1}i4(){}a4(t,i){}u4(t,i){}Rb(t,i,e){return Promise.resolve()}L2(t,i){return Promise.reject(new g("Invalid media buffer"))}DP(t,i){return Promise.reject(new g("Invalid media buffer"))}rJ(t){return!1}hJ(t){return Promise.reject(new g("Invalid media buffer"))}Mm(){this.Bo()}constructor(t){super(),this.Tq=0,this.Iq=0,this.gM=t}},zQ=class extends Bo{get pq(){return this.mot()}set pq(t){this.pot(t)}mot(){return this.Aot.pq}pot(t){this.Aot.pq=t}get KI(){return this.JI()}JI(){return this.Aot.KI}get md(){return this.Kb()}Kb(){return this.Aot.md}get s4(){return this.Aot.s4}get r4(){return this.yot()}yot(){return this.Aot.r4}get _q(){return this.bot()}set _q(t){this.Mot(t)}bot(){return this.Aot._q}Mot(t){this.Aot._q=t}c2(t,i,e){return this.Aot.c2(t,i,e)}c4(){return this.Aot.c4()}f2(t,i,e){return this.Aot.f2(t,i,e)}yJ(){return this.Aot.yJ()}i4(){this.Aot.i4()}a4(t,i){this.Aot.a4(t,i)}u4(t,i){this.Aot.u4(t,i)}Rb(t,i,e){return this.Aot.Rb(t,i,e)}L2(t,i){return this.Aot.L2(t,i)}rJ(t){return this.Aot.rJ(t)}hJ(t){return this.Aot.hJ(t)}cE(t){this.yo(t)}Mm(){this.Bo(),this.fot(new PQ(this.md))}fot(t){this.Aot.fn(Ph,this.Tot),this.Aot=t,this.Aot.yn(Ph,this.Tot)}constructor(t){super(),this.Tot=t=>this.cE(t),this.Aot=t,this.Aot.yn(Ph,this.Tot)}},BQ=class extends zQ{get Unt(){return this.jR}set Unt(t){this.jR=t}async c2(t,i,e){return re(e),await this.Sot(this.jR.sD,null==i?void 0:i.het,null==i?void 0:i.ct),re(e),t.Hw===z.qM?await this.Not(t,i,e):await this.Iot(t,i,e)}async Not(t,i,e){let s=t;for(;;){const[t,n]=JM(s.xS);s={Hw:z.qM,xS:t};try{return await this.Dot(s,i,e),void n.cancel(new Rh).catch(ul)}catch(t){if(xj(t)){if(await this.Sot(this.jR.sD,i.het,i.ct,e)){s={Hw:z.qM,xS:n};continue}}throw n.cancel(t).catch(ul),t}}}async Iot(t,i,e){for(;;)try{return re(e),await this.Dot(t,i,e)}catch(t){if(xj(t)){if(await this.Sot(this.jR.sD,i.het,i.ct,e))continue}throw t}}async Sot(t,i,e,s){const n=Lj(t,i,e,this.KI,this._q,this.pq);for(const[t,i]of n)await this.Eot(t,i,s);return n.length>0}Dot(t,i,e){return super.c2(t,i,e)}Eot(t,i,e){return super.Rb(t,i,e)}constructor(t){super(t),this.jR=void 0}},UQ=class extends RQ{get Unt(){return this.jR}set Unt(t){this.jR=t,this.X4&&(this.X4.Unt=t),this.q4&&(this.q4.Unt=t)}got(t){const i=new BQ(t);return i.Unt=this.jR,i}constructor(t){super(t),this.jR=void 0,this.lot(t)}};r();var Ws=class extends OQ{get xD(){return this.WF.xD}set xD(t){this.WF.xD=t}};r();var Co=class extends Zc{get VF(){return this.jR.VF}get D3(){return this.jR.D3}get GD(){return this.jR.GD}get FD(){return this.jR.FD}get JD(){return this.jR.JD}set JD(t){this.jR.JD=t}d7(t){this.jR.d7(t)}aE(){this.jR.aE()}tE(){return this.jR.tE()}constructor(t){super(t)}},QQ=class extends jQ{get Zrt(){return this.jR}hot(t){const i=new UQ(t);return i.Unt=this,i}oot(t){return new Ws(t)}},FQ=class extends Co{get Zrt(){return this.jR}hot(t){const i=new UQ(t);return i.Unt=this,i}oot(t){return new Ws(t)}},rt=class extends CQ{xY(t){return t===Q.iN?new FQ(super.xY(t)):t===Q.tN?new QQ(super.xY(t)):void 0}async _Y(t){const i=t;await i.Mm(),await super._Y(i.Zrt)}};r();var YQ=class{kot(){this.ta.uE()}gn(){s.removeEventListener("pageshow",this.Lot)}constructor(t){this.Lot=t=>{t.persisted&&this.kot()},this.ta=t,s.addEventListener("pageshow",this.Lot)}};r(),r(),r(),r(),r();var VQ=class{xot(t,i,e){return Promise.resolve()}Cot(t,i,e,s){let n=[];if(s){const r={jB:i.OP,OB:i.RP,RB:e.jot.RB};s.Hw===er.TTML?n=SE(t,s,r,e.GZ):s.Hw===er.WEBVTT&&(n=QD(t,r,this.Oot).L)}return n}tr(){}constructor(t){this.Oot=t}};r(),r(),r();var ec=function(t){return t.PL="vttc",t.Rot="vsid",t.Pot="iden",t.zot="ctim",t.Bot="sttg",t.Uot="payl",t.Qot="vtte",t.Fot="vtta",t}({}),wl=class t{static Yot(i){return Boolean(t.Vot[i])}static zx(i){const e=[],s=Lu.Mx(new Hu(i,new J));for(const i of s)t.Yot(i.Hw)&&e.push(t.Vot[i.Hw](i.xS));return e}static Got(i){const e=Lu.Mx(i),s=Yt(e,ec.Rot),n=Yt(e,ec.Pot),r=Yt(e,ec.zot),o=Yt(e,ec.Bot),h=Yt(e,ec.Uot);return{Hw:ec.PL,Wot:s?t.Zot(s):void 0,Hot:n?t.Xot(n):void 0,qot:r?t.Kot(r):void 0,Jot:o?t.$ot(o):void 0,tht:h?t.iht(h):void 0}}static Zot(t){return{Hw:ec.Rot,eht:t.lx()}}static Xot(t){return{Hw:ec.Pot,Hot:t.mx()}}static Kot(t){return{Hw:ec.zot,sht:t.mx()}}static $ot(t){return{Hw:ec.Bot,nht:t.mx()}}static iht(t){return{Hw:ec.Uot,rht:t.mx()}}static oht(t){return{Hw:ec.Qot}}static hht(t){return{Hw:ec.Fot,aht:t.mx()}}};wl.Vot={[ec.PL]:wl.Got,[ec.Qot]:wl.oht,[ec.Fot]:wl.hht};var GQ=class{xot(t,i,e){const s=new DataView(t.uht),n=tn.zx(s),r=So(n,(t=>t.Hw===Fo.$k));return r&&(this.cht=r.Z[0].aC.Lx.eC),Promise.resolve()}Cot(t,i,e){if(j(this.cht))return[];const s=Os(t),n=tn.zx(s),r=dr(n,Fo.QL),o=dr(n,Fo.HL);if(!r||0===r.Z.length||!o)return[];const h=function(t,i,e){const s=t.Z[0],n=s.$j?s.$j.$j.toNumber()/e:i.OP,r=[];for(const t of s.Jj)r.push(...t.rO);return{dht:n,rO:r}}(r,i,this.cht),a=e.jot.RB;return function(t,i,e,s){const n=wl.zx(Os(i.xS)),r=t.rO,o=t.dht+s,h=[];let a=0;for(let t=0;t<r.length;t++){const i=r[t],s=n[t];var u;const c=(null!=(u=i.ct)?u:0)/e;let l;s.Hw===ec.PL&&(l=WQ(s,a,c,o)),l&&h.push(l),a+=c}return h}(h,o,this.cht,a)}tr(){this.cht=NaN}constructor(){this.cht=NaN}};function WQ(t,i,e,s){if(!t.tht)return void 0;const n=t.qot?function(t){return JD(t.sht,new J(0))}(t.qot):i,r=s+n,o=r+e,h=t.tht.rht;return new Sh(r,o,h,!1)}r(),r(),r();var ZQ=class t extends ik{get fht(){return this.ght}set fht(t){this.ght=t}get Rt(){for(const t of this.Z.FE)if(t.gN!==P.Ch)return!0;return!1}async $n(t){await this.tr(),this._ht=t,this.vht(t)}vht(t){for(const i of t.wht){const t=this.mht(i);this.pht(t,i),t.OD=ju.LOADED,this.tt(t)}}it(t){this.Aht(t),super.it(t)}oU(t){const i=this.yht(t);if(i&&this.fht!==i){this.fht=i;for(const t of this.Z.FE)t!==i&&(t.gN=P.Ch)}}hU(t){const i=this.yht(t);i&&this.fht===i&&(this.fht=void 0)}yht(t){return So(this.Z.FE,(i=>t.dk===i.dk))}pht(t,i){this.bht.set(t.dk,i)}Mht(t){return this.bht.get(t.dk)}Aht(t){this.bht.delete(t.dk)}Tht(){if(!this.fht)return;const i=this.Mht(this.fht);return i?t.Sht(i):void 0}static Sht(t){return t.Nht&&t.Nht.length>0?t.Nht[0]:void 0}constructor(...t){super(...t),this.bht=rn()}};r();var Ka=function(t){return t[t.LV=0]="LV",t[t.Iht=1]="Iht",t[t.Dht=10]="Dht",t[t.Eht=11]="Eht",t[t.kht=12]="kht",t[t.Lht=13]="Lht",t[t.xht=14]="xht",t[t.Cht=15]="Cht",t[t.jht=20]="jht",t[t.Oht=21]="Oht",t[t.Rht=22]="Rht",t[t.Pht=23]="Pht",t[t.zht=24]="zht",t[t.Bht=30]="Bht",t[t.Uht=31]="Uht",t[t.Qht=32]="Qht",t[t.Fht=33]="Fht",t[t.Yht=34]="Yht",t[t.Vht=35]="Vht",t[t.Ght=40]="Ght",t[t.Wht=41]="Wht",t[t.Zht=42]="Zht",t[t.Hht=43]="Hht",t[t.Xht=44]="Xht",t[t.qht=50]="qht",t[t.Kht=51]="Kht",t[t.Jht=52]="Jht",t[t.$ht=60]="$ht",t[t.iat=61]="iat",t[t.eat=62]="eat",t[t.sat=63]="sat",t[t.nat=70]="nat",t[t.rat=71]="rat",t[t.oat=72]="oat",t[t.aat=73]="aat",t[t.uat=74]="uat",t[t.dat=75]="dat",t[t.fat=76]="fat",t[t.gat=77]="gat",t[t._at=90]="_at",t[t.vat=91]="vat",t}({});function kl(t,i){const e=i.iR(((i,e)=>t.JO(i,e,!1,!1)));return t.WO(e)}function HQ(t,i){const e=i.Sn(t.FO()).iR(((i,e)=>t.gr(e)));return t.WO(e)}r(),r(),r(),r();var Xi=function(t){return t.wat="mat",t.pat="Aat",t}({});r();var zo=class extends ai{constructor(t,i,e){super("yat"),this.Cn=t,this.jn=i,this.bat=e}},XQ=class extends Gs{constructor(){super("Mat")}},qQ=[Qi.Tp,Qi.Np,Qi.Mp,Qi.Gm],KQ=class extends Bo{get Tat(){var t,i;return(null==(t=this.Nat.Sat)?void 0:t.bat)||(null==(i=this.Nat.Iat)?void 0:i.bat)}get Dat(){return this.Eat}set Lat(t){this.Nat.Lat=t}get Lat(){return this.Nat.Lat}get LS(){return this.xat}Cat(t){this.xat!==t&&(this.xat=t,this.yo(new XQ))}get jat(){return this.Eat.Lt.jat}get lt(){return this.FF}async Cn(t){if(!this.Oat&&!this.Rat)return;const i=this.Fm("Mat");this.Oat?(this.Pat.Dm(),this.Pat=new Ai,Te(this.zat(this.Pat.wm),this.Pat)):(this.Bat.eA(void 0),this.Bat=new pa),await i}get Oat(){return"Uat"===this.xat}get Rat(){return"Qat"===this.xat}get Fat(){return"Yat"===this.xat}get Vat(){return"Gat"===this.xat}async nE(t){if(this.Fat||this.Rat)for(0,this.Pat.Dm();!this.Oat&&!this.Vat;)await this.Fm("Mat")}async tr(t){this.Vat?(this.FF=void 0,this.Cat("Uat")):await this.nE(t),this.Nat.tr(),this.Eat.tr()}LY(t){this.FF=t,this.Cat("Gat"),this.yo(new As(t))}Wat(){this.d9.yn(Qi.Dp,this.ld),this.d9.yn([Qi.bp,Qi.op],this.We),this.Nat.yn(qQ,this.Ds),this.Zat.yn(Xi.wat,this.ld)}Hat(){this.d9.fn(Qi.Dp,this.ld),this.d9.fn([Qi.bp,Qi.op],this.We),this.Nat.fn(qQ,this.Ds),this.Zat.fn(Xi.wat,this.ld)}async Xat(t){this.Hat(),this.qat.Dm(),await this.nE(null!=t?t:Ka.Hht),this.Nat.tr()}async Kat(t){this.Wat(),await this.Cn(null!=t?t:Ka.Cht)}Jat(t,i,e){if(this.Oat)for(const s of t.Eat.$at())s.tut<=e&&i<=s.iut&&this.Zat.Nht.some((t=>t.o===s.eut))&&this.Eat.sut(s)}async gn(){this.Bo(),this.Hat(),this.qat.Dm(),await this.nE(Ka.Xht),this.Nat.gn()}async zat(t){for(;;)try{re(t),this.Cat("Yat"),await this.Nat.nut(t),re(t),this.Cat("Qat"),await Ic(this.Bat.rA,t)}catch(t){if(F(t))this.Cat("Uat");else{const i=t instanceof Ui?t:new Ui(Do.MEDIA_LOAD_ERROR,t.message,t);this.LY(i)}break}}async rut(t){re(t),await this.nE(Ka.Zht),this.Nat.tr(),re(t),await this.Cn(Ka.Lht)}constructor(t,i,e,s,n){super(),this.out=t,this.Zat=i,this.Eat=e,this.Nat=s,this.d9=n,this.xat="Uat",this.FF=void 0,this.Bat=new pa,this.qat=new Ai,this.Pat=new Ai,this.We=t=>{if(this.Oat||this.Vat)return;if(!me.BI&&this.Nat.hut(t.currentTime))return;this.qat.Dm(),this.qat=new Ai;Te(this.rut(this.qat.wm),this.qat).catch(bu)},this.ld=Gu((()=>{if(this.Rat){try{this.Nat.aut();if(this.Nat.uut())return}catch(t){if(!(t instanceof zo))throw t}this.Cn(Ka.xht)}}),250),this.Wat()}};r(),r();var JQ=class t{cut(t,i){return this.lut(t,!1,i)}fut(t,i){return this.lut(t,!0,i)}async lut(i,e,s){re(s.wm);const n=await this.gut(i,e,s);return n.bS?t._ut(n):this.vut(n)}vut(t){return t}static _ut(t){return t}gut(t,i,e){var s;const n=new _e({Hu:t.Hu,CS:Me.HM,RS:t.wut?{Range:"bytes="+t.wut[0]+"-"+(null!=(s=t.wut[1])?s:"")}:void 0,dN:t.dN,hN:Ml.GET,Hw:as.YS,cN:i?jo.WS:jo.QS,lN:this.mut,aN:e.Aut,uN:e.uN,wm:e.wm,_N:e._N});return this.dU.jS(n)}constructor(t,i){this.dU=t,this.mut=i}};r(),r();var $Q=class{yut(t,i){const e=this.but**t,s=i*(1-e)+e*this.$it;j(s)||(this.$it=s,this.Mut+=t)}Tut(){const t=1-this.but**this.Mut;return this.$it/t}constructor(t){this.$it=0,this.Mut=0,this.but=x.exp(x.log(.5)/t)}},tF=class{yut(t,i){const e=8e3*i/t,s=t/1e3;this.Sut+=i,this.Nut.yut(s,e),this.Iut.yut(s,e)}Tut(){return this.Dut()?x.min(this.Nut.Tut(),this.Iut.Tut()):this.Eut}Dut(){return this.Sut>=this.kut}constructor(t=2,i=5,e=128e3){this.Sut=0,this.Eut=zL,this.Nut=new $Q(t),this.Iut=new $Q(i),this.kut=e}},iF=class{get Lut(){return this.xut.Tut()}get Dut(){return this.xut.Dut()}Cut(t){const i=t.jut,e=this.Out?t.Rut-t.Put:t.Rut-t.zut,s=t.But;!s&&i<this.Uut||(s?this.xut.yut(2*e,i):this.xut.yut(e,i))}constructor(t,i){this.Out=i,i&&QN(t)?t===Q.iN?(this.Uut=5e3,this.xut=new tF(.05,1,0)):(this.Uut=0,this.xut=new tF(.005,.1,0)):(this.Uut=16e3,this.xut=new tF)}};r(),r(),r();var eF=class{transform(t,i){this.yA.write(t).catch(ul),i.enqueue(t)}flush(){this.yA.close().catch(ul)}constructor(t){this.yA=t}},Li=class{Qut(){return new sF(XM(this.uht),this.Fut,this.Yut)}constructor(t,i,e){this.uht=t,this.Fut=i,this.Yut=e}},sF=class t{get _S(){return this.Vut}gS(t){return xs(this.Vut,t)}Wp(){const[i,e]=JM(this.Vut);return this.Vut=i,new t(e,this.Fut,this.Yut)}Gut(){const[i,e]=function(t){const i=new Iu,e=i.writable.getWriter(),s=new Iu(new eF(e));return t.pipeTo(s.writable).catch((t=>{e.abort(t).catch(ul)})),[s.readable,i.readable]}(this.Vut);return this.Vut=i,new t(e,this.Fut,this.Yut)}Wut(t){return this.gS(t).then((t=>new Li(t,this.Fut,this.Yut)))}constructor(t,i,e){this.Vut=t,this.Fut=i,this.Yut=e}};r();var nF=class extends ai{constructor(t,i,e){super(i,e),this.Zut=t}},rF="Cache lookup failed.",oF=class extends Bo{async Hut(t,i){re(i);const e=await this.Xut.ort(t.Hu.Hu,t.Hu.wut);if(re(i),!e)throw new nF(t,rF);const s=new Li(e.buffer,e.byteLength,e.reference);return{Zut:t.Zut,qut:{Hw:z.XK,xS:s},bat:t.bat,Hu:t.Hu}}async Kut(t,i){re(i);const e=await this.Xut.ort(t.Hu,t.wut);if(re(i),!e)throw new nF(t,rF);const s=new Li(e.buffer,e.byteLength,e.reference);return{Hw:z.XK,xS:s}}gn(){this.Bo()}constructor(t){super(),this.Xut=t}};r();var hF=["Sp","Ip"],aF=class extends Bo{async Hut(t,i){let e;for(const s of this.Jut)try{return await s.Hut(t,i)}catch(t){wh(t),e=t}throw e}async Kut(t,i){let e;for(const s of this.Jut)try{return await s.Kut(t,i)}catch(t){wh(t),e=t}throw e}gn(){for(const t of this.Jut)t.fn(hF,this.Ds),t.gn()}constructor(t){super(),this.Jut=t;for(const t of this.Jut)t.yn(hF,this.Ds)}};function zs(t){return Fn(t.$ut)}function uF(t){return zs(t)?t.$ut:t.tct}r(),r(),r(),r();var cF=class extends Gs{constructor(t,i,e,s,n,r){super(t),this.ict=i,this.wW=e,this.Hj=s,this.dC=n,this.lN=r}},lF=class extends cF{constructor(t,i,e,s,n){super(Qi.Tp,t,i,e,s,n)}};r(),r();var dF=class{constructor(t,i){this.ect=t,this.sct=i}},fF=class extends dF{get jut(){return this.nct}start(){}transform(t,i){this.nct+=t.byteLength,i.enqueue(t)}flush(){this.rct(!1)}Dm(){this.rct(!0)}rct(t){this.ect(this.sct,me.J_(),this.jut,t)}constructor(...t){super(...t),this.nct=0}},gF=class extends dF{get jut(){return this.nct}start(){this.sct=me.J_()}transform(t,i){this.nct+=t.byteLength,this.hct||this.act(t)&&this.rct(!1),i.enqueue(t)}flush(){}Dm(){this.rct(!0)}act(t){const i=this.uct(t),e=this.cct(i);return Boolean(So(e,_F))}uct(t){return this.lct&&void 0!==this.dct?(this.lct=Dt([this.lct,t]),new Hu(Os(this.lct),new J(this.dct))):(this.lct=t,new Hu(Os(t),new J))}cct(t){const i=Lu.Tx(t.xS,t.nx,!0);return i.Sx?(this.lct=void 0,this.dct=void 0):this.dct=t.nx.tc,i.m}rct(t){this.hct||(this.ect(this.sct,me.J_(),this.jut,t),this.hct=!0)}constructor(...t){super(...t),this.nct=0,this.hct=!1}};function _F(t){return t.Hw===Fo.HL}var vF=class{fct(t){const i=t.zS?this.gct:me.J_(),e=this._ct(i),s=new Iu(e),n=t._S().pipeTo(s.writable).then((()=>({vD:{jut:e.jut}})),(t=>{throw e.Dm(),t}));return this.vct.Em(n),s.readable}wct(t){const i=t.zS?this.gct:me.J_(),e=t.gS(),s=e.then((t=>{const e=me.J_();return this.Cut(i,e,t.byteLength,!1),{vD:{jut:t.byteLength}}}),(t=>{const e=me.J_();throw this.Cut(i,e,0,!0),t}));return this.vct.Em(s),e}get mct(){return this.vct.rA}constructor(t){this.pct=t,this.vct=new pa,this.Cut=(t,i,e,s)=>{const n={zut:this.gct,Put:t,Rut:i,jut:e,But:s};this.pct.Cut(n),this.pct.Dut&&fc.K_.nF(this.pct.Lut)},this.vct.rA.catch(ul),this.gct=me.J_()}},wF=class extends vF{_ct(t){return new fF(this.Cut,t)}},mF=class extends vF{_ct(t){return new gF(this.Cut,t)}};r();var pF=class extends cF{constructor(t,i,e,s,n,r,o){super(Qi.Np,t,i,e,s,n),this.Act=r,this.gP=o}};r();var AF=class extends ai{constructor(t,i,e){super("Error downloading segment "+uF(i),t),this.yct=i.OP,this.bct=i.RP,this.Mct=e}},yF=class extends Bo{Tct(){return this.Out?new mF(this.pct):new wF(this.pct)}async Hut(t,i){re(i);const e=t.bat,s=t.Hu,n=t.Zut,r=uF(n),o=e.bat?e.bat.dk:-1,h=function(t){const i=t.bat;let e;e=i===function(t){return t.Nht.reduce(((t,i)=>t.mF<i.mF?t:i))}(i.Sct)?ia(5*t.Zut.ct):ia(1.2*t.Zut.ct);return rh(e,1e3,18e3)}(t);this.yo(new lF(s,e.mF,r,o,e.Hw));try{const t=this.Tct(),a=await this.Nct.cut(s,{_N:this.Out,Aut:h,wm:i}),u=await this.Ict(a,a.bS,i,t);return xe(this.Dct(t.mct,e,s,r,o,a)),{qut:u,bat:e,Zut:n,Hu:s}}catch(t){throw wh(t),new AF(t,n,e)}}async Kut(t,i){re(i);const e=await this.Nct.fut(t,{_N:false,Aut:1e4,wm:i});return await this.Ict(e,false,i)}async Ict(t,i,e,s){if(i){const i=s?s.fct(t):t._S();return{Hw:z.qM,xS:new sF(i)}}{const i=s?await s.wct(t):await t.gS(e);return{Hw:z.XK,xS:new Li(i)}}}async Dct(t,i,e,s,n,r){try{const o=await t;this.yo(new pF(e,i.mF,s,n,i.Hw,r.LS,o.vD.jut))}catch(t){}}gn(){this.Bo()}constructor(t,i,e){super(),this.Nct=t,this.pct=i,this.Out=e}};r();var bF=.001,MF=class{get KI(){return this.Ect.KI}get kct(){return this.Ect.kct}get LJ(){return this.Ect.LJ}get Lct(){if(this.M4.OD<$i.Xn)return!1;if(this.Ect.jn<=this.xct&&this.Ect.Cct())return!0;const t=this.Ect.BF;if(!t||0===t.U)return!1;const i=ge.uR(this.d9.sD,1/0);return t.Sn(i).HO(this.Ect.LJ).hR>=this.dV.Sq}get xct(){const t=this.Ect.BF;let i;if(t&&t.U>0)i=t.jn(0);else{i=this.d9.sD;const t=this.Ect.LJ,e=t.XO(i);e>=0&&(i=t.jn(e))}const e=this.Ect.PD.Cn(0);if(e>i){if(this.Ect.Cn<=i&&this.Ect.jn>=i&&e>i+bF)throw new zo(i,e);i=e}return i=this.Ect.jct.QO(i),i}constructor(t,i,e,s){this.Ect=t,this.d9=i,this.M4=e,this.dV=s}};r();var TF=class{get Oct(){if(0===this._f.size)return this.Rct;let t=ge.uR(0,1/0);return t=t.Sn(this.Rct),this._f.forEach((i=>{t=t.Sn(i)})),t}Pct(t){return this._f.get(t.o)}zct(){let t=this.Rct;return this._f.forEach((i=>{t=t.WO(i)})),t}Bct(t){if(this.Rct.gr(t))return!0;let i=!1;return this._f.forEach((e=>{i=i||e.gr(t)})),i}Uct(t,i){const e=this._f.get(i.o);return!!e&&e.gr(t)}qO(t,i){if(this.Rct.qO(t,i))return!0;let e=!1;return this._f.forEach((s=>{e=e||s.qO(t,i)})),e}Qct(t,i){const e=this._f.get(i),s=e?e.WO(t):t;this._f.set(i,s),this.Rct=this.Rct.WO(t)}Fct(t){this._f.forEach(((i,e)=>{this._f.set(e,i.WO(t))})),this.Rct=this.Rct.WO(t)}Yct(t){this._f.forEach(((i,e)=>{this._f.set(e,i.Sn(t))})),this.Rct=this.Rct.Sn(t)}tr(){this._f.forEach(((t,i)=>{this._f.set(i,ge.cR())})),this.Rct=ge.cR()}constructor(){this._f=Ge(),this.Rct=ge.cR()}},SF=class{get Vct(){return this.Gct}get LJ(){return this.xJ}Wct(t){for(const i of this.Mrt){if(i.tut>t)break;if(i.iut>t)return i}}Zct(t){for(const i of this.Mrt){if(i.Hct>t)break;if(i.Xct>=t)return i}}qct(t,i){const e=[];for(const s of this.Mrt){if(s.tut>t)break;s.iut>=i&&e.push(s)}return e}$at(){return this.Mrt}sut(t){const i=ge.uR(t.Hct,t.Xct),e=i.FO();this.Gct.Yct(e),this.Gct.Qct(i,t.eut),this.Kct(e);const s=en(this.Mrt,(i=>t.tut<=i.tut));if(s<0)this.Mrt.push(t);else{this.Mrt[s].iut<=t.iut?this.Mrt.splice(s,1,t):this.Mrt.splice(s,0,t)}}CJ(t,i){this.xJ.Qct(t,i)}Jct(t){this.xJ.Fct(t)}Yct(t){this.Gct.Yct(t),this.xJ.Yct(t);const i=this.Gct.zct();this.Kct(i)}Kct(t){this.Mrt=this.Mrt.filter((i=>t.JO(i.Hct,i.Xct))).map((i=>i.$ct&&!t.qO(i.Hct,i.Xct)?function(t,i){return{eut:t.eut,tut:t.tut,iut:t.iut,Hct:t.Hct,Xct:t.Xct,$ct:i}}(i,!1):i))}tr(){this.Gct.tr(),this.xJ.tr(),this.Mrt=[]}gn(){this.tr()}constructor(t){this.Mrt=[],this.Lt=t,this.Gct=new TF,this.xJ=new TF}};r(),r();var NF=class{get Lat(){return this.tlt}set Lat(t){this.tlt=t}get jat(){return this.Eat.Lt.jat}async ilt(t,i,e){let s;re(e);const n=this.Eat.Zct(t);s=n&&Xs(n.Xct,t,1e-5)?n.iut:t;const r=this.elt(s),o=function(t){return IF.bind(void 0,t)}(s);let h=await this.Jv.slt(o,r,i,e);for(re(e);h&&this.nlt(h.Zut);){const t=LF(h.Zut),s=h.bat;h=await this.Jv.slt(t,[s],i,e),re(e)}if(!h)return void 0;if(!this.rlt(h.Zut))return h;const a=this.olt(h.Zut);if(t<a.Cn)return await this.findFirstNonAppendedSegmentBeforeSegment(h,i,e,a);if(t>=a.jn)return await this.findFirstNonAppendedSegmentAfterSegment(h,i,e);if(!h.bat.hlt(h.Zut))throw new g("Fatal buffering error")}async findFirstNonAppendedSegmentAfterSegment(t,i,e){let s=t;do{const n=LF(s.Zut),r=t.bat;s=await this.Jv.slt(n,[r],i,e),re(e)}while(s&&this.rlt(s.Zut));if(s)return s}async findFirstNonAppendedSegmentBeforeSegment(t,i,e,s){let n=t;do{const s=kF(n.Zut),r=t.bat;n=await this.Jv.slt(s,[r],i,e),re(e)}while(n&&this.rlt(n.Zut));if(!n){0;const i=t.bat.ult.Cn;throw new zo(i,s.Cn,t.bat)}return n}clt(t){return this.Eat.Vct.Bct(t)}llt(t){return this.Eat.qct(t.OP,t.RP)}rlt(t){const i=this.llt(t);return i.length>0&&function(t,i){return function(t){let i=ge.cR();for(const e of t)i=i.WO(ge.uR(e.tut,e.iut));return i}(t).qO(i.OP,i.RP)}(i,t)&&i.every(xF)}nlt(t){return this.Eat.LJ.qO(t.OP,t.RP)}olt(t){const i=this.llt(t);return{Cn:i[0].Hct,jn:i[i.length-1].Xct}}elt(t){const i=this.dlt(t);if(0===i.length){const t=this.tlt?this.tlt:this.Eat.Lt.Nht;return[t[t.length-1]]}const e=i.filter((t=>{var i;return(null==(i=t.bat)?void 0:i.Fnt)&&!t.flt}));return e.length>0?e:[i[i.length-1]]}dlt(t){return(this.tlt?this.tlt:this.Eat.Lt.Nht).filter((i=>!this.Eat.LJ.Uct(t,i)))}constructor(t,i,e){this.out=t,this.Eat=i,this.Jv=e}};async function IF(t,i,e,s){const n=i.jot.glt(t);if(n){if(i._lt(n)){return(await i.wlt(n,e,s)).vlt(t)}return n}}async function DF(t,i,e,s){if(zs(t)){if(0===t.$ut)return;const n=i.jot.plt(t);if(!n)return;return(await i.wlt(n,e,s)).Alt(t.$ut-1)}return i.jot.ylt(t)}async function EF(t,i,e,s){if(zs(t)){const n=i.jot.plt(t);if(!n)return;const r=await i.wlt(n,e,s);if(t.$ut+1===r.U)return;return r.Alt(t.$ut+1)}return i.jot.blt(t)}function kF(t){return DF.bind(void 0,t)}function LF(t){return EF.bind(void 0,t)}function xF(t){return t.$ct}r();var CF=class{async slt(t,i,e,s){re(s);const n=this.Mlt(i,e);if(!n)return;const r=await t(n,this.Tlt,s);if(!r)return;const o=n.Slt(r);return{bat:n,Zut:r,Hu:o}}Mlt(t,i){if(0===t.length)return;const e=this.Ilt.Nlt(t,this.Dlt?i:void 0,this.Ect,this.dV.bq);return this.Dlt||(this.Dlt=!0),e}constructor(t,i,e,s){this.Ilt=t,this.Ect=i,this.dV=e,this.Tlt=s,this.Dlt=!1}};r();var jF=class{async slt(t,i,e,s){re(s);const n=this.Ilt.Elt(i,e,this.Ect);if(!n.length)return;let r;for(const i of n)try{re(s);const e=await t(i,this.Tlt,s);if(e){const t=i.Slt(e);if(await this.Xut.nrt(t.Hu,t.wut))return{Zut:e,bat:i,Hu:t}}}catch(t){wh(t),r=t}if(r)throw r}constructor(t,i,e,s){this.Ilt=t,this.Ect=i,this.Xut=e,this.Tlt=s}};function OF(t){return void 0!==t.ND}function RF(t,i){const e=t.ji&&i.ji,s=t.Ti&&i.Ti;if(e||s){if(e&&s)return t.ji*t.Ti-i.ji*i.Ti;if(e)return t.ji-i.ji;if(s)return t.Ti-i.Ti;return(t.ji||1)*(t.Ti||1)-(i.ji||1)*(i.Ti||1)}return 0}function PF(t,i){return RF(t,i)||function(t,i){return t.mF-i.mF}(t,i)}r(),r();var Jn=class t{Nlt(i,e,s,n){let r=t.sortByQuality(i);if(void 0!==this.klt&&void 0===e&&i.length>1){const i=t.Llt(r,this.klt);i&&(r=i)}const o=this.Elt(r,e,s,n);return o.length?o[o.length-1]:r[0]}Elt(i,e,s,n){var r;const o=t.sortByQuality(i),h={Lut:void 0===n||this.xlt.Dut?this.xlt.Lut:n,ND:OF(s)&&s.ND?s.ND:1,Clt:s.ji,jlt:s.Ti,Olt:null==(r=this.Rlt)?void 0:r.restrictToPlayerSize};let a=o;for(const t of this.Hd)a=t(a,e,h,this.Lw,this.Plt);return a}static zlt(i){return t.sortByQuality(i)[0]}static Blt(i,e){var s;return e?t.zlt(null!=(s=t.Llt(i,e))?s:i):t.zlt(i)}static Llt(t,i){for(const e of i){const i=t.filter((t=>_s(t.Uv,e)));if(i.length>0)return i}}static sortByQuality(t){const i=[...t];return i.sort(PF),i}constructor(t,i,e,s,n,r){this.Hd=t,this.xlt=i,this.Lw=e,this.Rlt=s,this.klt=n,this.Plt=r}};r();var zF=(t,i,e,s,n)=>t.filter((t=>n.rJ(t)&&s.Rv(i,t)));r();var BF=(t,i,e)=>t.filter((t=>function(t,i,e){const s=e.Lut;if(s<=0)return!1;return.8*s>t.mF*e.ND}(t,0,e)));r();var UF=(t,i,e,s,n)=>{const r=e.Olt;if(void 0===r&&!s.Qs)return t;if(!1===r)return t;if(t.length>0&&t[0].Hw!==Q.iN)return t;for(let i=t.length-1;i>=0;i--){const s=t[i];if(s.Ti===e.jlt&&s.ji===e.Clt)return t.slice(0,i+1);if(s.Ti<e.jlt||s.ji<e.Clt)return t.slice(0,i+2)}return[]};r();var QF=class{async slt(t,i,e,s){let n;for(const r of this.Ult)try{const n=await r.slt(t,i,e,s);if(n)return n}catch(t){n=t}if(n)throw n}constructor(t){this.Ult=t}};r(),r();var FF=class{async Qlt(t,i,e,s){let n;for(const r of this.Flt)try{return await r.Qlt(t,i,e,s)}catch(t){wh(t),n=t}throw n}constructor(t){this.Flt=t}};r();var YF=class{async Qlt(t,i,e,s){var n;const r=await this.dU.jS({Hu:t,CS:Me.HM,RS:i?{Range:"bytes="+i[0]+"-"+(null!=(n=i[1])?n:"")}:void 0,dN:e,hN:Ml.GET,Hw:as.QS,wm:s});return await r.gS()}constructor(t){this.dU=t}};r();var VF=class{async Qlt(t,i,e,s){const n=await this.Xut.ort(t,i);if(n)return n.buffer;if(i){const e=await this.Xut.ort(t);if(e)return Qu(new T(e.buffer),i[0],i[1])}throw new nF({Hu:t,wut:i,dN:!1})}constructor(t){this.Xut=t}};r();var GF=1.05,WF=(t,i,e,s)=>{if(!1===e.Olt)return t;if(s.vv)return t;const n=s.mv;var r;const o=(null!=(r=null==n?void 0:n.width)?r:e.Clt)*GF;var h;const a=(null!=(h=null==n?void 0:n.height)?h:e.jlt)*GF;for(let i=t.length-1;i>=0;i--){const e=t[i];if(e.Ti<=a&&e.ji<=o)return t.slice(0,i+1)}return[]},ZF=class{static uet(t,i,e,s,n,r,o,h,a,u){const c=function(t,i){return new FF([new VF(i),new YF(t)])}(r,o),l=new Jn([zF],n,me.Ys,h,a,u),d=new jF(l,i,o,c),f=new Jn([BF,zF,UF,WF],n,me.Ys,h,a,u),g=new CF(f,i,s,c),_=new QF([d,g]);return new NF(t,e,_)}};r();var HF=class{Ylt(t,i,e,s){return this.Ect.Ylt(t,i,e,s)}Vlt(t,i,e){return this.Ect.xot(t,i,e)}Glt(t,i,e){return this.Ect.Glt(t,i,e)}CJ(t,i){this.Ect.CJ(t,i)}jJ(t,i){this.Ect.jJ(t,i)}i4(){this.Ect.i4()}kq(){return this.Ect.kq()}constructor(t){this.Ect=t}};r(),r();var XF=class extends Gs{constructor(t,i,e,s,n,r=0){super(Qi.Mp),this.segmentStartTime=t,this.error=i,this.trackType=e,this.track=s,this.quality=n,this.retryCount=r}};r();var qF=class extends Gs{constructor(t,i){super(Qi.Gm),this.track=t,this.segments=i}},KF=class extends ai{constructor(t,i){super(i),this.Wlt=t}},JF=[Qi.Tp,Qi.Np],$F=class extends Bo{get Sat(){return this.Zlt}get Iat(){return this.Hlt}set Lat(t){this.Xlt.Lat=t}get Lat(){return this.Xlt.Lat}get jat(){return this.Eat.Lt.jat}qlt(t){return!this.b2||!t||!Mr(this.b2.uht,t.uht)}hut(t){if(!this.Zlt)return!1;const i=this.Zlt.Zut,e=ge.uR(i.OP,i.RP),s=this.Klt.kct,n=s.XO(t);return n<0?e.gr(t,bF):e.JO(t,s.jn(n),!0,!0,bF)}async nut(t){const i=this.Eat.Lt.Nht;for(;;){let n;try{var e;re(t),this.aut();if(this.uut())break;n=this.Jlt();const r=await this.slt(n,t);if(void 0===r)break;if(this.Zlt=r,!tY(this.Zlt)){await this.$lt(this.Zlt,t);continue}var s;if(this.Hlt&&!_s(this.Hlt.bat.vS,this.Zlt.bat.vS)&&await this.Plt.hJ(this.Zlt.bat),this.Zlt.bat.yF&&(!this.Iat||(null==(e=this.Hlt)?void 0:e.bat)!==this.Zlt.bat))null==(s=this.eY)||s.IF(this.Zlt.bat.yF);await this.tdt(n,this.Zlt.Zut,t),this.b2=await this.idt(this.Zlt.bat,t);const o=await this.Hut(this.Zlt,t),h=this.Klt.KI,a=this.Hlt;this.Hlt=await this.edt(o,t);const u=this.Klt.KI;this.sdt(a,this.Zlt,h,u,n),i.forEach((t=>t.flt=!1)),this.ndt=0,this.rdt=0}catch(e){if(e instanceof zo){this.a4(e.Cn,e.jn,e.bat);continue}if(e instanceof KF){let s=500;if(i.every((t=>t.flt))){if(2===this.ndt){const t=this.Klt.KI;if(this.odt(this.Zlt),this.sdt(this.Hlt,this.Zlt,t,t,n),i.forEach((t=>t.flt=!1)),this.rdt+=1,this.ndt=0,this.rdt===this.hdt.maxRetries)throw new Ui(Do.MEDIA_LOAD_ERROR,"The segments could not be loaded.",e);continue}this.ndt++;const t=this.hdt.minimumBackoff*2**(this.ndt-1);s=x.min(t,this.hdt.maximumBackoff)}await Bn(s,t);continue}throw this.adt=ge.cR(),e}finally{this.Zlt=void 0}}}sdt(t,i,e,s,n){const r=s.HO(e),o=i.bat,h=o.udt(i.Zut),a=o.hlt(i.Zut);let u=i.Zut.OP,c=i.Zut.RP;h&&(u=x.min(u,x.max(0,o.ult.Cn-.05))),a&&(c=x.max(c,o.ult.jn));const l=ge.uR(u,c).HO(s);if(0===r.U)return void this.cdt(e,l,u,n);if(h||this.adt.U>0){const t=l.Sn(ge.uR(u,r.Cn(0)));this.ldt(t)}const d=r.FO().Sn(ge.uR(r.Cn(0),r.jn(r.U-1)));if(this.ldt(d),a){const t=l.Sn(ge.uR(r.jn(r.U-1),c));this.ldt(t)}if(this.adt.U>0){const t=this.adt.HO(r);this.ldt(t),this.adt=ge.cR()}const f=o.jot,g=zs(i.Zut)?void 0:f.ylt(i.Zut);var _;const v=null!=(_=null==t?void 0:t.Zut)?_:this.ddt(g)?g:void 0;if(v){const t=this.Eat.qct(v.OP,v.RP);if(t.length>0){const i=ge.uR(t[t.length-1].Xct,r.Cn(0));this.ldt(i)}}const w=zs(i.Zut)?void 0:f.blt(i.Zut);if(w&&this.ddt(w)){const t=this.Eat.qct(w.OP,w.RP);if(t.length>0){const i=ge.uR(r.jn(r.U-1),t[0].Hct);this.ldt(i)}}}cdt(t,i,e,s){let n=i;0===this.adt.U&&(this.adt=ge.uR(t.jn(t.U-1),e)),0===n.U&&void 0!==s&&(n=ge.aR(s)),this.adt=this.adt.WO(n),this.Eat.Jct(this.adt)}ddt(t){return!!t&&this.Eat.qct(t.OP,t.RP).length>0}ldt(t){const i=t.HO(this.Klt.KI);for(let t=0;t<i.U;t++)i.Cn(t)!==i.jn(t)&&this.fdt.CJ(i.Cn(t),i.jn(t))}gdt(t,i){throw new KF(t,i)}aut(){if(this.adt.U>0)return;var t;const i=this.Klt.kct.WO(null!=(t=this.Klt.LJ.UO().oR(this.Klt.xct))?t:ge.cR());this.Eat.Yct(i),this._dt&&!this.vdt(this._dt)&&(this._dt=void 0),this.yo(new qF(this.Eat.Lt.jat,this.Eat.$at()))}uut(){return this.Hlt&&this.Hlt.bat.hlt(this.Hlt.Zut)?(this.fdt.i4(),!0):(this._dt&&this._dt.bat.hlt(this._dt.Zut)&&this.vdt(this._dt)&&this.fdt.i4(),!!this.Klt.Lct)}vdt(t){return this.Eat.Vct.qO(t.wdt,t.mdt)}pdt(t,i,e){(!this._dt||this._dt.Zut.RP<t.Zut.RP)&&(this._dt=il({},t,{wdt:i,mdt:e}))}Jlt(){const t=this.Klt.xct;return t}async slt(t,i){re(i);const e=this.Hlt?this.Hlt.bat:void 0,s=await this.Xlt.ilt(t,e,i);if(s)return s}async $lt(t,i){const e={stack:[],error:void 0,hasError:!1};try{const s=t.bat,n=s.jot,r=zs(t.Zut)?n.plt(t.Zut):t.Zut,o=s.ydt.Adt(),h=n.bdt(r);if(h&&h.getTime()<=o.getTime())return this.gdt(Ka.Rht,"Segment is not available.");const a=n.Mdt(r).getTime()-o.getTime();0;const u=lo(e,Ai.xm([i]),!1);await Promise.race([Bn(a,u.wm),s.Fm(Xi.wat,u.wm)])}catch(t){e.error=t,e.hasError=!0}finally{os(e)}}async idt(t,i,e){void 0===e&&(e=0),re(i);const s=t.Tdt;if(!s)return this.b2;try{if(!t.Sdt){const e=await this.Ndt.Kut(s,i);t.Sdt=e.xS}}catch(s){if(wh(s),hn(s)){if(2===e)return t.flt=!0,this.gdt(Ka.Vht,"Could not fetch the initializer.");const s=x.min(this.hdt.minimumBackoff*2**e,this.hdt.maximumBackoff);return await Bn(s,i),this.idt(t,i,e+1)}throw new Ui(Do.MEDIA_LOAD_ERROR,s.message,s)}re(i);try{this.qlt(t.Sdt)&&await this.fdt.Vlt(t.Sdt,t,i)}catch(t){if(wh(t),hn(t))return this.gdt(Ka.Vht,"Could not append the initializer.");throw new Ui(Do.MEDIA_DECODE_ERROR,t.message,t)}return t.Sdt}async Hut(t,i,e){void 0===e&&(e=0);try{return re(i),await this.Ndt.Hut(t,i)}catch(s){if(wh(s),s instanceof AF){if(function(t){return t instanceof TT}(s.cause))return this.Idt(new AF(s,t.Zut,t.bat),e),this.gdt(Ka.Rht,"Could not append the segment.");if(2===e)return t.bat.flt=!0,this.Idt(s,e),this.gdt(Ka.Rht,"Could not fetch the segment.");const n=x.min(this.hdt.minimumBackoff*2**e,this.hdt.maximumBackoff);return await Bn(n,i),await this.Hut(t,i,e+1)}throw new Ui(Do.MEDIA_LOAD_ERROR,s.message,s)}}async tdt(t,i,e){const s=this.Eat.qct(i.OP,i.RP),n=this.Klt.kct.oR(t);let r=ge.cR();for(const t of s){re(e);const i=t.Hct,s=t.Xct,o=n&&n.JO(i,s)?x.max(i,n.jn(0)):i,h=s;o<h&&(r=r.WO(ge.uR(o,h)))}for(let t=0;t<r.U;t++)await this.fdt.Glt(r.Cn(t),r.jn(t),e);this.aut()}async edt(t,i){try{re(i);const e=await this.fdt.Ylt(t.qut,t.Zut,t.bat,i);return this.Ddt(t,e.wdt,e.mdt),this.pdt(t,e.wdt,e.mdt),t}catch(i){if(wh(i),hn(i))return this.Idt(new AF(i,t.Zut,t.bat),0),this.gdt(Ka.Rht,"Could not append the segment.");if(xj(i)&&this.fdt.kq())return this.gdt(Ka.zht,"Buffer is full. Could not reduce the buffer.");throw new Ui(Do.MEDIA_DECODE_ERROR,i.message,i)}}Ddt(t,i,e){const s=t.bat,n=t.Zut;this.sut(n,s,i,e)}sut(t,i,e,s){this.Eat.sut({eut:i.o,tut:t.OP,iut:t.RP,Hct:e,Xct:s,$ct:!0}),this.fdt.jJ(e,s)}a4(t,i,e){const s=ge.uR(t,i);e?this.Eat.CJ(s,e.o):this.Eat.Jct(s),this.fdt.CJ(t,i)}odt(t){const i=ge.uR(t.Zut.OP,t.Zut.RP);t.bat?this.Eat.CJ(i,t.bat.o):this.Eat.Jct(i)}Idt(t,i){const e=t.yct,s=this.Eat.Lt.jat,n=this.Eat.Lt.ga,r=t.Mct.bat&&t.Mct.bat.ga,o=new XF(e,t.message,s,n,r,i);this.yo(o)}tr(){this.b2=void 0,this.Hlt=void 0}gn(){this.tr(),this._dt=void 0,this.Ndt.fn(JF,this.Ds),this.Ndt.gn()}constructor(t,i,e,s,n,r,o,h,a){super(),this.out=t,this.Eat=i,this.Klt=e,this.Xlt=s,this.Ndt=n,this.fdt=r,this.Plt=o,this.hdt=h,this.eY=a,this.Zlt=void 0,this.b2=void 0,this.Hlt=void 0,this._dt=void 0,this.ndt=0,this.rdt=0,this.adt=ge.cR(),this.Ndt.yn(JF,this.Ds)}};function tY(t){const i=t.bat,e=i.jot,s=zs(t.Zut)?e.plt(t.Zut):t.Zut;return e.Edt(s,i.ydt.Adt())}var iY=0,eY=class{uet(t){const i=iY++,e=this.Ect.s4,s=new SF(t),n=this.kdt&&QN(e),r=new iF(e,n),o=new MF(this.Ect,this.d9,this.M4,this.dV),h=ZF.uet(i,this.Ect,s,this.dV,r,this.dU,this.Xut,this.Rlt,this.klt,this.Plt),a=function(t){switch(t){case Q.tN:return Fh.tN;case Q.iN:return Fh.iN;case Q.KM:return Fh.KM;case Q.eN:return Fh.eN;default:return Fh.QS}}(e),u=function(t,i,e,s){const n=new oF(s),r=new yF(t,i,e);return new aF([n,r])}(new JQ(this.dU,a),r,n,this.Xut),c=new HF(this.Ect),l=new $F(i,s,o,h,u,c,this.Plt,this.hdt,this.eY);return new KQ(i,t.Sct,s,l,this.d9)}Ldt(t,i){const e={jat:Q.KM,Sct:i,Nht:i.Nht,ga:t.ga};return this.uet(e)}constructor(t,i,e,s,n,r,o,h,a,u,c,l){this.Ect=t,this.d9=i,this.M4=e,this.dU=s,this.dV=n,this.kdt=r,this.Xut=o,this.Rlt=h,this.klt=a,this.Plt=u,this.hdt=c,this.eY=l}};r();var sY=class{rJ(t){return this.Aot.rJ(t)}hJ(t){return this.Aot.hJ(t)}constructor(t){this.Aot=t}},nY=class{rJ(t){return!0}hJ(t){return Promise.resolve(void 0)}};r(),r();var rY=class extends ps{ma(){return new oY(this.gk.map((t=>t.ga)))}constructor(t,i){super(Ct.UE),this.gk=t||[],this.Lt=i}},oY=class extends Gs{constructor(t){super("targetqualitychanged"),this.qualities=t,this.quality=this.qualities.length>0?this.qualities[0]:void 0}};r();var hY=class extends Ii{ma(){return new aY(this.quality.ga)}constructor(t){super(Ct.QUALITY_UNAVAILABLE),this.quality=t}},aY=class extends Vn{constructor(t){super("qualityunavailable"),this.quality=t}};r();var uY=class extends Gs{constructor(){super(Ct.NO_QUALITY)}};function cY(t){return{mF:t.mF,Uv:t.Qrt,Ti:lY(t)?t.Ti:0,Hw:lY(t)?Q.iN:Q.tN,ji:lY(t)?t.ji:0}}function lY(t){const i=t;return void 0!==i.Ti&&void 0!==i.ji}r();var dY=0,fY=class extends Bo{get fk(){return this.Zat.xdt.map(gY).filter(Rt)}Cdt(t){for(const i of t)i.yn("update",this.jdt),this.AP.yP(i)}Odt(t){if(!this.AP.bP(t))return;t.hU();const i=this.Rdt();if(this.Pdt&&fh(this.Pdt,t)){const t=this.Pdt.filter((t=>t.Fnt));0===t.length&&i.length>0?this._k=i:this._k=t}else this._k=i;this.yo(new hY(t))}zdt(t){if(!this.AP.bP(t))return;const i=this.Rdt();t.oU(),this.Pdt&&!function(t,i){return Dv(t,i,((t,i)=>t===i))}(this.Pdt,i)||(this._k=this.Rdt())}Rdt(){const t=[];for(const i of this.AP.FE)i.Fnt&&t.push(i);return t}get lk(){return this.Bdt}Udt(t){this.Bdt=t.bat,this.yo(t)}get Sct(){return this.Zat}get Rt(){return this.Le}set Rt(t){this.DP(t)}get ga(){return this.Za||(this.Za=Zt(this)),this.Za}get Qdt(){return this.Fdt}set Qdt(t){this.Fdt=t}get o(){return this.Nb}get dk(){return this.SP}get zt(){return this.W3}get gs(){return this.iy}get wh(){return this.NP}set wh(t){t!==this.NP&&(this.NP=t,this.yo(new kc(this)))}get gN(){return this.Rt?"enabled":"disabled"}get _k(){return this.Pdt}set _k(t){let i=[];if(t){const e=(null!=t?t:[]).filter((t=>{const i=this.lk?cY(this.lk):void 0;return me.Ys.Rv(i,cY(t))}));if(0===e.length)return;i=e.filter((t=>t.Fnt))}else i=this.Rdt();0===i.length&&this.yo(new uY),this.Pdt=t&&this.AP.bP(t)?t:void 0,this.Ydt=this.Vdt(this.Pdt),this.yo(new rY(t,this))}get Gdt(){return this.Ydt}Vdt(t){if(!t||0===t.length)return;const i=[];for(const e of this.Nht)for(const s of t)s===e.bat&&s.Fnt&&i.push(e);return i}get gk(){return this.AP}get Nht(){return this.Wdt}Zdt(t){this.Hdt.push(t),this.Wdt.push(...t.Nht);const i=t.Nht.map((t=>t.bat));this.Cdt(i)}get jat(){return this.Xdt}get qdt(){return this.Hdt}get Kdt(){return this.Nht.every((t=>t.Kdt))}DP(t){this.Le=t,this.Fdt&&(t?this.Fdt.oU(this):this.Fdt.hU(this))}Jdt(t){this.Le=t,this.$dt!==t&&(this.$dt=t,this.yo(new dc(this)))}gn(){for(const t of this.AP.FE)t.fn("update",this.jdt);this.AP.tr()}constructor(t,i,e="alternative"){super(),this.Bdt=void 0,this.Le=!1,this.Za=void 0,this.Fdt=void 0,this.Nb="",this.$dt=!1,this.AP=new nc,this.Wdt=[],this.Pdt=void 0,this.Ydt=void 0,this.jdt=()=>this.yo(new kc(this)),this.Hdt=[],this.Zat=t,this.Nb=String(dY++),this.SP=Xc(),this.W3=e,this.iy=t.Utt,this.NP=t.wh,this.Xdt=t.Hw,this.Wdt=t.Nht,this.Cdt(i)}};function gY(t){if("urn:mpeg:dash:role:2011"===t.J6)return _Y(t);if("urn:tva:metadata:cs:AudioPurposeCS:2007"===t.J6){if("1"===t.lI)return ut.ek;if("2"===t.lI)return ut.rk}}function _Y(t){if(void 0!==(null==t?void 0:t.lI))switch(t.lI){case"caption":return ut.$E;case"sign":return ut.nk;case"description":return ut.ek;case"enhanced-audio-intelligibility":return ut.rk;default:return}}var vY=class extends ZQ{get BF(){const t=this.d9.sD;return this.kct.oR(t,.01)}get tft(){return this.fht&&this.ift[this.fht.dk]?this.ift[this.fht.dk]:ge.cR()}get eft(){return this.fht&&this.sft[this.fht.dk]?this.sft[this.fht.dk]:ge.cR()}get jct(){return new ge([0,1/0])}get KI(){return this.tft}get LJ(){return this.nft?this.nft.Dat.LJ.Oct:ge.cR()}get kct(){return kl(this.KI,this.LJ).GO(2*this.rft)}get Cn(){return this._ht?this._ht.ult.Cn:NaN}get jn(){return this._ht?this._ht.ult.jn:NaN}get hD(){const t=this.jn;return!!t&&this.d9.sD>=t}get rft(){var t;const i=this.Tht();if(!i)return.04;var e;return 1/(null!=(e=this.fht&&(null==i||null==(t=i.oft)?void 0:t._z()))?e:25)}get Ti(){return this.Ty}get s4(){return Q.KM}get ND(){return this.aV}set ND(t){this.aV=t}get kD(){return this.eft}get PD(){if(!this.fht)return ge.aR(0);const t=this.Mht(this.fht),i=null==t?void 0:t.hft,e=null==t?void 0:t.aft;if(void 0===e||void 0===i)return ge.aR(0);const s=x.max(i,this.d9.sD);return new ge([e,s]).UO()}get ji(){return this.My}i4(){}Cct(){return this.kct.gr(this.jn)}async Ylt(t,i,e,s){const n=t.Hw===z.XK?t.xS.uht:await t.xS.gS(s),r=this.findTrackForRepresentation(e),o=this.ift[r.dk],h=i.OP,a=i.RP,u=new ge([h,a]);o||(this.ift[r.dk]=ge.cR(),this.sft[r.dk]=ge.cR()),this.Sot(s);const c=this.Cot(new T(n),i,e,r);for(const t of c)r.fU(t);return this.ift[r.dk]=this.ift[r.dk].WO(u),{wdt:h,mdt:a}}Sot(t){const i=Lj(this.d9.sD,void 0,void 0,this.KI,this.dV.Sq,this.dV.pq);for(const[e,s]of i)xe(this.Glt(e,s,t))}xot(t,i,e){return this.uft.xot(t,i,e)}Cot(t,i,e,s){return this.uft.Cot(t,i,e,s)}Glt(t,i,e){const s=t,n=i;let r=new ge([t,i]);for(const t of this.Z.FE){const i=[];for(const e of t.L.FE)e.OP>=s&&e.RP<=n?i.push(e):r=r.HO(new ge([e.OP,e.RP]));for(const e of i)t.eU(e);const e=this.ift[t.dk];e&&(this.ift[t.dk]=e.HO(r))}return Promise.resolve()}CJ(t,i){}jJ(t,i){}kq(){return!1}oU(t){if(super.oU(t),this.uft.tr(),this.nft&&(this.nft.gn(),this.nft=void 0),this.fht){const t=this.Mht(this.fht);this.nft=new eY(this,this.d9,this.d9,this.dU,this.dV,!1,this.Xut,void 0,void 0,new nY,II,void 0).Ldt(this.fht,t),this.nft.yn(ac.ua,this.cft),this.nft.Cn(Ka.Eht)}}hU(t){this.fht===t&&(super.hU(t),this.nft&&(this.nft.gn(),this.nft=void 0))}mht(t){const i=function(t){const i=t.Nht&&t.Nht.length>0&&t.Nht[0],e=i&&VE(i.Qrt),s=VE(t.Qrt),n=t.GZ===ba.APPLICATION_TTML_XML;return e||s||n?er.TTML:t.GZ===ba.TEXT_VTT||HE(t.GZ,t.Qrt)?er.WEBVTT:er.DEFAULT}(t);if(!i)throw new g("Unknown TextTrack type for Representation");const e=t.lft.concat(t.xdt);return this.dft(function(t){return fh(t.filter((t=>"urn:mpeg:dash:role:2011"===t.J6)).map((t=>t.lI)).filter(Rt),"caption")?vs.JB:vs.KB}(e),t.wh,t.Utt,!1,i,t,function(t){return t.filter((t=>"urn:mpeg:dash:role:2011"===t.J6)).some((t=>function(t){return"forced-subtitle"===t||"forced_subtitle"===t}(t.lI)))}(t.lft),t.xdt.map(_Y).filter(Rt))}async tr(){await super.tr(),this.nft&&(await this.nft.tr(Ka.Kht),this.nft.fn(ac.ua,this.cft),this.nft=void 0),this._ht=void 0,this.ift={},this.sft={}}fft(){this.ift={},this.sft={}}findTrackForRepresentation(t){for(const i of this.Z.FE){const e=this.Mht(i);if(e&&ZQ.Sht(e)===t)return i}}constructor(t,i,e,s,n){super(),this.Ty=0,this.aV=1,this.nft=void 0,this.ift={},this.sft={},this.My=0,this.cft=t=>{0},this.d9=t,this.dU=i,this.dV=e,this.uft=s,this.Xut=n}},wY=class extends vY{dft(t,i,e,s,n,r,o,h){var a;const u=r.Nht.reduce(((t,i)=>t||i.o),void 0);var c;const l=null!=(c=null!=u?u:null==(a=r.o)?void 0:a.toString())?c:"";return this.cU.dE(t,l,i,e,s,n,o,h)}gn(){for(const t of this.Z.FE)this.cU._U(t);return super.gn()}constructor(t,i,e,s,n,r){super(t,i,e,s,n),this.cU=r}},mY=class{get nt(){return this.Ol}async lU(t){if(t.Hw!==Q.KM)return;const i=function(t,i,e){return VE(i)||t===ba.APPLICATION_TTML_XML||t===ba.TEXT_VTT?new VQ(e):HE(t,i)?new GQ:void 0}(t.GZ,t.Qrt,this.Oot);if(i){const e=this.gft(i);return this._ft(e),await e.$n(t),e}}gft(t){return new wY(this.d9,this.dU,this.dV,t,this.Xut,this.cU)}_ft(t){this.vft.push(t),this.Ol.EF(t.Z)}async tr(){for(const t of this.vft.slice())await t.tr();Or(this.vft),this.Ol.tr()}async gn(){for(const t of this.vft)await t.gn();Or(this.vft),this.Ol.gn()}constructor(t,i,e,s,n,r){this.vft=[],this.Ol=new uu([]),this.d9=t,this.dU=i,this.dV=e,this.Xut=s,this.cU=n,this.Oot=r}};r();var pY=class extends Gs{constructor(t){super(Qi.fp),this.error=t}};r();var Mo=function(t){return t.wU="static",t.mU="dynamic",t}({});r(),r();var AY=function(t){return t.wft="mft",t}({}),yY=class extends Gs{constructor(){super(AY.wft)}};r(),r();var bY=0;r();var MY=class extends Gs{constructor(t,i){super(Qi.pp),this.representation=t,this.previousRepresentation=i}};r(),r(),r();var Xo=function(t){return t[t.pft=0]="pft",t[t.Aft=1]="Aft",t[t.yft=2]="yft",t[t.bft=3]="bft",t[t.Mft=4]="Mft",t[t.Tft=5]="Tft",t}({}),su=function(t){return t[t.Sft=0]="Sft",t[t.Nft=1]="Nft",t[t.Ift=2]="Ift",t[t.Dft=3]="Dft",t}({});function TY(t,i,e){return e===Xo.pft?e:i!==su.Sft&&i!==su.Nft||e!==Xo.Aft&&e!==Xo.yft?t?i===su.Ift?Xo.Mft:i===su.Dft?Xo.bft:Xo.pft:Xo.Tft:Xo.yft}function SY(t,i,e,s){const n={byte:e};let r=Xo.Aft;const o=[],h=31&nu(i,n,s);n.byte+=1;for(let e=0;e<h;e+=1){const h=nu(i,n,s),a=4&h,u=3&h;r=TY(Boolean(a),u,r);const c=nu(i,n,s),l=nu(i,n,s);o.push({Eft:t,Hj:-1,kft:!e,Lft:Boolean(a),Hw:u,xft:r,Cft:c,jft:l})}return o}function NY(t,i,e){const s=nu(t,i,e);if(!j(s))return String.fromCharCode(s)}function IY(t){const i=t.j0,e={byte:t.x0},s=t.C0,n=nu(i,e,s);if(255===n&&(e.byte+=1),181!==n)return;const r=ZO(i,e);if(47!==r&&49!==r)return;if(49===r){const t=function(t,i,e){let s="",n=e;for(;n>0;)n-=1,s+=NY(t,i);return s}(i,e,4);if("GA94"!==t)return}if(3!==nu(i,e,s))return;47===r&&(e.byte+=1);const o=t;return o.Oft=e.byte,o}function DY(t){return 4===t.k0}function EY(t){const i=t.filter(DY).map(IY).filter(Rt),e=[];for(const t of i)e.push(...SY(t.E0,t.j0,t.Oft,t.C0));return e}r();var kY="und";function LY(t){if(t===kY)return;const i=t.toLowerCase();for(const t of xY)if(t[1]===i||t[2]===i||t["2T"]===i||t["2B"]===i||t[3]===i)return t}var xY=[{l:"Abkhaz",lh:"\u0410\u04a7\u0441\u0443\u0430",1:"ab",2:"abk","2T":"abk","2B":"abk",3:"abk"},{l:"Afar",lh:"Afaraf",1:"aa",2:"aar","2T":"aar","2B":"aar",3:"aar"},{l:"Afrikaans",lh:"Afrikaans",1:"af",2:"afr","2T":"afr","2B":"afr",3:"afr"},{l:"Akan",lh:"Akan",1:"ak",2:"aka","2T":"aka","2B":"aka",3:"aka"},{l:"Albanian",lh:"Shqip",1:"sq",2:"sqi","2T":"sqi","2B":"alb",3:"sqi"},{l:"Amharic",lh:"\u12a0\u121b\u122d\u129b",1:"am",2:"amh","2T":"amh","2B":"amh",3:"amh"},{l:"Arabic",lh:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629",1:"ar",2:"ara","2T":"ara","2B":"ara",3:"ara"},{l:"Aragonese",lh:"Aragon\xe9s",1:"an",2:"arg","2T":"arg","2B":"arg",3:"arg"},{l:"Armenian",lh:"\u0540\u0561\u0575\u0565\u0580\u0565\u0576",1:"hy",2:"hye","2T":"hye","2B":"arm",3:"hye"},{l:"Assamese",lh:"\u0985\u09b8\u09ae\u09c0\u09af\u09bc\u09be",1:"as",2:"asm","2T":"asm","2B":"asm",3:"asm"},{l:"Avaric",lh:"\u0410\u0432\u0430\u0440",1:"av",2:"ava","2T":"ava","2B":"ava",3:"ava"},{l:"Avestan",lh:"avesta",1:"ae",2:"ave","2T":"ave","2B":"ave",3:"ave"},{l:"Aymara",lh:"Aymar",1:"ay",2:"aym","2T":"aym","2B":"aym",3:"aym"},{l:"Azerbaijani",lh:"Az\u0259rbaycanca",1:"az",2:"aze","2T":"aze","2B":"aze",3:"aze"},{l:"Bambara",lh:"Bamanankan",1:"bm",2:"bam","2T":"bam","2B":"bam",3:"bam"},{l:"Bashkir",lh:"\u0411\u0430\u0448\u04a1\u043e\u0440\u0442\u0441\u0430",1:"ba",2:"bak","2T":"bak","2B":"bak",3:"bak"},{l:"Basque",lh:"Euskara",1:"eu",2:"eus","2T":"eus","2B":"baq",3:"eus"},{l:"Belarusian",lh:"\u0411\u0435\u043b\u0430\u0440\u0443\u0441\u043a\u0430\u044f",1:"be",2:"bel","2T":"bel","2B":"bel",3:"bel"},{l:"Bengali",lh:"\u09ac\u09be\u0982\u09b2\u09be",1:"bn",2:"ben","2T":"ben","2B":"ben",3:"ben"},{l:"Bihari",lh:"\u092d\u094b\u091c\u092a\u0941\u0930\u0940",1:"bh",2:"bih","2T":"bih","2B":"bih",3:"bih"},{l:"Bislama",lh:"Bislama",1:"bi",2:"bis","2T":"bis","2B":"bis",3:"bis"},{l:"Bosnian",lh:"Bosanski",1:"bs",2:"bos","2T":"bos","2B":"bos",3:"bos"},{l:"Breton",lh:"Brezhoneg",1:"br",2:"bre","2T":"bre","2B":"bre",3:"bre"},{l:"Bulgarian",lh:"\u0411\u044a\u043b\u0433\u0430\u0440\u0441\u043a\u0438",1:"bg",2:"bul","2T":"bul","2B":"bul",3:"bul"},{l:"Burmese",lh:"\u1019\u103c\u1014\u103a\u1019\u102c\u1018\u102c\u101e\u102c",1:"my",2:"mya","2T":"mya","2B":"bur",3:"mya"},{l:"Catalan",lh:"Catal\xe0",1:"ca",2:"cat","2T":"cat","2B":"cat",3:"cat"},{l:"Chamorro",lh:"Chamoru",1:"ch",2:"cha","2T":"cha","2B":"cha",3:"cha"},{l:"Chechen",lh:"\u041d\u043e\u0445\u0447\u0438\u0439\u043d",1:"ce",2:"che","2T":"che","2B":"che",3:"che"},{l:"Chichewa",lh:"Chichewa",1:"ny",2:"nya","2T":"nya","2B":"nya",3:"nya"},{l:"Chinese",lh:"\u4e2d\u6587",1:"zh",2:"zho","2T":"zho","2B":"chi",3:"zho"},{l:"Chuvash",lh:"\u0427\u04d1\u0432\u0430\u0448\u043b\u0430",1:"cv",2:"chv","2T":"chv","2B":"chv",3:"chv"},{l:"Cornish",lh:"Kernewek",1:"kw",2:"cor","2T":"cor","2B":"cor",3:"cor"},{l:"Corsican",lh:"Corsu",1:"co",2:"cos","2T":"cos","2B":"cos",3:"cos"},{l:"Cree",lh:"\u14c0\u1426\u1403\u152d\u140d\u140f\u1423",1:"cr",2:"cre","2T":"cre","2B":"cre",3:"cre"},{l:"Croatian",lh:"Hrvatski",1:"hr",2:"hrv","2T":"hrv","2B":"hrv",3:"hrv"},{l:"Czech",lh:"\u010ce\u0161tina",1:"cs",2:"ces","2T":"ces","2B":"cze",3:"ces"},{l:"Danish",lh:"Dansk",1:"da",2:"dan","2T":"dan","2B":"dan",3:"dan"},{l:"Divehi",lh:"Divehi",1:"dv",2:"div","2T":"div","2B":"div",3:"div"},{l:"Dutch",lh:"Nederlands",1:"nl",2:"nld","2T":"nld","2B":"dut",3:"nld"},{l:"Dzongkha",lh:"\u0f62\u0fab\u0f7c\u0f44\u0f0b\u0f41",1:"dz",2:"dzo","2T":"dzo","2B":"dzo",3:"dzo"},{l:"English",lh:"English",1:"en",2:"eng","2T":"eng","2B":"eng",3:"eng"},{l:"Esperanto",lh:"Esperanto",1:"eo",2:"epo","2T":"epo","2B":"epo",3:"epo"},{l:"Estonian",lh:"Eesti",1:"et",2:"est","2T":"est","2B":"est",3:"est"},{l:"Ewe",lh:"E\u028begbe",1:"ee",2:"ewe","2T":"ewe","2B":"ewe",3:"ewe"},{l:"Faroese",lh:"F\xf8royskt",1:"fo",2:"fao","2T":"fao","2B":"fao",3:"fao"},{l:"Fijian",lh:"Na Vosa Vaka-Viti",1:"fj",2:"fij","2T":"fij","2B":"fij",3:"fij"},{l:"Finnish",lh:"Suomi",1:"fi",2:"fin","2T":"fin","2B":"fin",3:"fin"},{l:"French",lh:"Fran\xe7ais",1:"fr",2:"fra","2T":"fra","2B":"fre",3:"fra"},{l:"Fula",lh:"Fulfulde",1:"ff",2:"ful","2T":"ful","2B":"ful",3:"ful"},{l:"Galician",lh:"Galego",1:"gl",2:"glg","2T":"glg","2B":"glg",3:"glg"},{l:"Georgian",lh:"\u10e5\u10d0\u10e0\u10d7\u10e3\u10da\u10d8",1:"ka",2:"kat","2T":"kat","2B":"geo",3:"kat"},{l:"German",lh:"Deutsch",1:"de",2:"deu","2T":"deu","2B":"ger",3:"deu"},{l:"Greek",lh:"\u0395\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ac",1:"el",2:"ell","2T":"ell","2B":"gre",3:"ell"},{l:"Guaran\xed",lh:"Ava\xf1e'\u1ebd",1:"gn",2:"grn","2T":"grn","2B":"grn",3:"grn"},{l:"Gujarati",lh:"\u0a97\u0ac1\u0a9c\u0ab0\u0abe\u0aa4\u0ac0",1:"gu",2:"guj","2T":"guj","2B":"guj",3:"guj"},{l:"Haitian",lh:"Krey\xf2l Ayisyen",1:"ht",2:"hat","2T":"hat","2B":"hat",3:"hat"},{l:"Hausa",lh:"\u0647\u064e\u0648\u064f\u0633\u064e",1:"ha",2:"hau","2T":"hau","2B":"hau",3:"hau"},{l:"Hebrew",lh:"\u05e2\u05d1\u05e8\u05d9\u05ea",1:"he",2:"heb","2T":"heb","2B":"heb",3:"heb"},{l:"Herero",lh:"Otjiherero",1:"hz",2:"her","2T":"her","2B":"her",3:"her"},{l:"Hindi",lh:"\u0939\u093f\u0928\u094d\u0926\u0940",1:"hi",2:"hin","2T":"hin","2B":"hin",3:"hin"},{l:"Hiri Motu",lh:"Hiri Motu",1:"ho",2:"hmo","2T":"hmo","2B":"hmo",3:"hmo"},{l:"Hungarian",lh:"Magyar",1:"hu",2:"hun","2T":"hun","2B":"hun",3:"hun"},{l:"Interlingua",lh:"Interlingua",1:"ia",2:"ina","2T":"ina","2B":"ina",3:"ina"},{l:"Indonesian",lh:"Bahasa Indonesia",1:"id",2:"ind","2T":"ind","2B":"ind",3:"ind"},{l:"Interlingue",lh:"Interlingue",1:"ie",2:"ile","2T":"ile","2B":"ile",3:"ile"},{l:"Irish",lh:"Gaeilge",1:"ga",2:"gle","2T":"gle","2B":"gle",3:"gle"},{l:"Igbo",lh:"Igbo",1:"ig",2:"ibo","2T":"ibo","2B":"ibo",3:"ibo"},{l:"Inupiaq",lh:"I\xf1upiak",1:"ik",2:"ipk","2T":"ipk","2B":"ipk",3:"ipk"},{l:"Ido",lh:"Ido",1:"io",2:"ido","2T":"ido","2B":"ido",3:"ido"},{l:"Icelandic",lh:"\xcdslenska",1:"is",2:"isl","2T":"isl","2B":"ice",3:"isl"},{l:"Italian",lh:"Italiano",1:"it",2:"ita","2T":"ita","2B":"ita",3:"ita"},{l:"Inuktitut",lh:"\u1403\u14c4\u1483\u144e\u1450\u1466",1:"iu",2:"iku","2T":"iku","2B":"iku",3:"iku"},{l:"Japanese",lh:"\u65e5\u672c\u8a9e",1:"ja",2:"jpn","2T":"jpn","2B":"jpn",3:"jpn"},{l:"Javanese",lh:"Basa Jawa",1:"jv",2:"jav","2T":"jav","2B":"jav",3:"jav"},{l:"Kalaallisut",lh:"Kalaallisut",1:"kl",2:"kal","2T":"kal","2B":"kal",3:"kal"},{l:"Kannada",lh:"\u0c95\u0ca8\u0ccd\u0ca8\u0ca1",1:"kn",2:"kan","2T":"kan","2B":"kan",3:"kan"},{l:"Kanuri",lh:"Kanuri",1:"kr",2:"kau","2T":"kau","2B":"kau",3:"kau"},{l:"Kashmiri",lh:"\u0643\u0634\u0645\u064a\u0631\u064a",1:"ks",2:"kas","2T":"kas","2B":"kas",3:"kas"},{l:"Kazakh",lh:"\u049a\u0430\u0437\u0430\u049b\u0448\u0430",1:"kk",2:"kaz","2T":"kaz","2B":"kaz",3:"kaz"},{l:"Khmer",lh:"\u1797\u17b6\u179f\u17b6\u1781\u17d2\u1798\u17c2\u179a",1:"km",2:"khm","2T":"khm","2B":"khm",3:"khm"},{l:"Kikuyu",lh:"G\u0129k\u0169y\u0169",1:"ki",2:"kik","2T":"kik","2B":"kik",3:"kik"},{l:"Kinyarwanda",lh:"Kinyarwanda",1:"rw",2:"kin","2T":"kin","2B":"kin",3:"kin"},{l:"Kyrgyz",lh:"\u041a\u044b\u0440\u0433\u044b\u0437\u0447\u0430",1:"ky",2:"kir","2T":"kir","2B":"kir",3:"kir"},{l:"Komi",lh:"\u041a\u043e\u043c\u0438",1:"kv",2:"kom","2T":"kom","2B":"kom",3:"kom"},{l:"Kongo",lh:"Kongo",1:"kg",2:"kon","2T":"kon","2B":"kon",3:"kon"},{l:"Korean",lh:"\ud55c\uad6d\uc5b4",1:"ko",2:"kor","2T":"kor","2B":"kor",3:"kor"},{l:"Kurdish",lh:"Kurd\xee",1:"ku",2:"kur","2T":"kur","2B":"kur",3:"kur"},{l:"Kwanyama",lh:"Kuanyama",1:"kj",2:"kua","2T":"kua","2B":"kua",3:"kua"},{l:"Latin",lh:"Latina",1:"la",2:"lat","2T":"lat","2B":"lat",3:"lat"},{l:"Luxembourgish",lh:"L\xebtzebuergesch",1:"lb",2:"ltz","2T":"ltz","2B":"ltz",3:"ltz"},{l:"Ganda",lh:"Luganda",1:"lg",2:"lug","2T":"lug","2B":"lug",3:"lug"},{l:"Limburgish",lh:"Limburgs",1:"li",2:"lim","2T":"lim","2B":"lim",3:"lim"},{l:"Lingala",lh:"Ling\xe1la",1:"ln",2:"lin","2T":"lin","2B":"lin",3:"lin"},{l:"Lao",lh:"\u0e9e\u0eb2\u0eaa\u0eb2\u0ea5\u0eb2\u0ea7",1:"lo",2:"lao","2T":"lao","2B":"lao",3:"lao"},{l:"Lithuanian",lh:"Lietuvi\u0173",1:"lt",2:"lit","2T":"lit","2B":"lit",3:"lit"},{l:"Luba-Katanga",lh:"Tshiluba",1:"lu",2:"lub","2T":"lub","2B":"lub",3:"lub"},{l:"Latvian",lh:"Latvie\u0161u",1:"lv",2:"lav","2T":"lav","2B":"lav",3:"lav"},{l:"Manx",lh:"Gaelg",1:"gv",2:"glv","2T":"glv","2B":"glv",3:"glv"},{l:"Macedonian",lh:"\u041c\u0430\u043a\u0435\u0434\u043e\u043d\u0441\u043a\u0438",1:"mk",2:"mkd","2T":"mkd","2B":"mac",3:"mkd"},{l:"Malagasy",lh:"Malagasy",1:"mg",2:"mlg","2T":"mlg","2B":"mlg",3:"mlg"},{l:"Malay",lh:"Bahasa Melayu",1:"ms",2:"msa","2T":"msa","2B":"may",3:"msa"},{l:"Malayalam",lh:"\u0d2e\u0d32\u0d2f\u0d3e\u0d33\u0d02",1:"ml",2:"mal","2T":"mal","2B":"mal",3:"mal"},{l:"Maltese",lh:"Malti",1:"mt",2:"mlt","2T":"mlt","2B":"mlt",3:"mlt"},{l:"M\u0101ori",lh:"M\u0101ori",1:"mi",2:"mri","2T":"mri","2B":"mao",3:"mri"},{l:"Marathi",lh:"\u092e\u0930\u093e\u0920\u0940",1:"mr",2:"mar","2T":"mar","2B":"mar",3:"mar"},{l:"Marshallese",lh:"Kajin M\u0327aje\u013c",1:"mh",2:"mah","2T":"mah","2B":"mah",3:"mah"},{l:"Mongolian",lh:"\u041c\u043e\u043d\u0433\u043e\u043b",1:"mn",2:"mon","2T":"mon","2B":"mon",3:"mon"},{l:"Nauru",lh:"Dorerin Naoero",1:"na",2:"nau","2T":"nau","2B":"nau",3:"nau"},{l:"Navajo",lh:"Din\xe9 Bizaad",1:"nv",2:"nav","2T":"nav","2B":"nav",3:"nav"},{l:"Northern Ndebele",lh:"isiNdebele",1:"nd",2:"nde","2T":"nde","2B":"nde",3:"nde"},{l:"Nepali",lh:"\u0928\u0947\u092a\u093e\u0932\u0940",1:"ne",2:"nep","2T":"nep","2B":"nep",3:"nep"},{l:"Ndonga",lh:"Owambo",1:"ng",2:"ndo","2T":"ndo","2B":"ndo",3:"ndo"},{l:"Norwegian Bokm\xe5l",lh:"Norsk (Bokm\xe5l)",1:"nb",2:"nob","2T":"nob","2B":"nob",3:"nob"},{l:"Norwegian Nynorsk",lh:"Norsk (Nynorsk)",1:"nn",2:"nno","2T":"nno","2B":"nno",3:"nno"},{l:"Norwegian",lh:"Norsk",1:"no",2:"nor","2T":"nor","2B":"nor",3:"nor"},{l:"Nuosu",lh:"\ua188\ua320\ua4bf Nuosuhxop",1:"ii",2:"iii","2T":"iii","2B":"iii",3:"iii"},{l:"Southern Ndebele",lh:"isiNdebele",1:"nr",2:"nbl","2T":"nbl","2B":"nbl",3:"nbl"},{l:"Occitan",lh:"Occitan",1:"oc",2:"oci","2T":"oci","2B":"oci",3:"oci"},{l:"Ojibwe",lh:"\u140a\u14c2\u1511\u14c8\u142f\u14a7\u140e\u14d0",1:"oj",2:"oji","2T":"oji","2B":"oji",3:"oji"},{l:"Old Church Slavonic",lh:"\u0421\u043b\u043e\u0432\u0463\u0301\u043d\u044c\u0441\u043a\u044a",1:"cu",2:"chu","2T":"chu","2B":"chu",3:"chu"},{l:"Oromo",lh:"Afaan Oromoo",1:"om",2:"orm","2T":"orm","2B":"orm",3:"orm"},{l:"Oriya",lh:"\u0b13\u0b21\u0b3f\u0b3c\u0b06",1:"or",2:"ori","2T":"ori","2B":"ori",3:"ori"},{l:"Ossetian",lh:"\u0418\u0440\u043e\u043d \xe6\u0432\u0437\u0430\u0433",1:"os",2:"oss","2T":"oss","2B":"oss",3:"oss"},{l:"Panjabi",lh:"\u0a2a\u0a70\u0a1c\u0a3e\u0a2c\u0a40",1:"pa",2:"pan","2T":"pan","2B":"pan",3:"pan"},{l:"P\u0101li",lh:"\u092a\u093e\u0934\u093f",1:"pi",2:"pli","2T":"pli","2B":"pli",3:"pli"},{l:"Persian",lh:"\u0641\u0627\u0631\u0633\u06cc",1:"fa",2:"fas","2T":"fas","2B":"per",3:"fas"},{l:"Polish",lh:"Polski",1:"pl",2:"pol","2T":"pol","2B":"pol",3:"pol"},{l:"Pashto",lh:"\u067e\u069a\u062a\u0648",1:"ps",2:"pus","2T":"pus","2B":"pus",3:"pus"},{l:"Portuguese",lh:"Portugu\xeas",1:"pt",2:"por","2T":"por","2B":"por",3:"por"},{l:"Quechua",lh:"Runa Simi",1:"qu",2:"que","2T":"que","2B":"que",3:"que"},{l:"Romansh",lh:"Rumantsch",1:"rm",2:"roh","2T":"roh","2B":"roh",3:"roh"},{l:"Kirundi",lh:"Kirundi",1:"rn",2:"run","2T":"run","2B":"run",3:"run"},{l:"Romanian",lh:"Rom\xe2n\u0103",1:"ro",2:"ron","2T":"ron","2B":"rum",3:"ron"},{l:"Russian",lh:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439",1:"ru",2:"rus","2T":"rus","2B":"rus",3:"rus"},{l:"Sanskrit",lh:"\u0938\u0902\u0938\u094d\u0915\u0943\u0924\u092e\u094d",1:"sa",2:"san","2T":"san","2B":"san",3:"san"},{l:"Sardinian",lh:"Sardu",1:"sc",2:"srd","2T":"srd","2B":"srd",3:"srd"},{l:"Sindhi",lh:"\u0633\u0646\u068c\u064a\u200e",1:"sd",2:"snd","2T":"snd","2B":"snd",3:"snd"},{l:"Northern Sami",lh:"S\xe1megiella",1:"se",2:"sme","2T":"sme","2B":"sme",3:"sme"},{l:"Samoan",lh:"Gagana S\u0101moa",1:"sm",2:"smo","2T":"smo","2B":"smo",3:"smo"},{l:"Sango",lh:"S\xe4ng\xf6",1:"sg",2:"sag","2T":"sag","2B":"sag",3:"sag"},{l:"Serbian",lh:"\u0421\u0440\u043f\u0441\u043a\u0438",1:"sr",2:"srp","2T":"srp","2B":"srp",3:"srp"},{l:"Gaelic",lh:"G\xe0idhlig",1:"gd",2:"gla","2T":"gla","2B":"gla",3:"gla"},{l:"Shona",lh:"ChiShona",1:"sn",2:"sna","2T":"sna","2B":"sna",3:"sna"},{l:"Sinhala",lh:"\u0dc3\u0dd2\u0d82\u0dc4\u0dbd",1:"si",2:"sin","2T":"sin","2B":"sin",3:"sin"},{l:"Slovak",lh:"Sloven\u010dina",1:"sk",2:"slk","2T":"slk","2B":"slo",3:"slk"},{l:"Slovene",lh:"Sloven\u0161\u010dina",1:"sl",2:"slv","2T":"slv","2B":"slv",3:"slv"},{l:"Somali",lh:"Soomaaliga",1:"so",2:"som","2T":"som","2B":"som",3:"som"},{l:"Southern Sotho",lh:"Sesotho",1:"st",2:"sot","2T":"sot","2B":"sot",3:"sot"},{l:"Spanish",lh:"Espa\xf1ol",1:"es",2:"spa","2T":"spa","2B":"spa",3:"spa"},{l:"Sundanese",lh:"Basa Sunda",1:"su",2:"sun","2T":"sun","2B":"sun",3:"sun"},{l:"Swahili",lh:"Kiswahili",1:"sw",2:"swa","2T":"swa","2B":"swa",3:"swa"},{l:"Swati",lh:"SiSwati",1:"ss",2:"ssw","2T":"ssw","2B":"ssw",3:"ssw"},{l:"Swedish",lh:"Svenska",1:"sv",2:"swe","2T":"swe","2B":"swe",3:"swe"},{l:"Tamil",lh:"\u0ba4\u0bae\u0bbf\u0bb4\u0bcd",1:"ta",2:"tam","2T":"tam","2B":"tam",3:"tam"},{l:"Telugu",lh:"\u0c24\u0c46\u0c32\u0c41\u0c17\u0c41",1:"te",2:"tel","2T":"tel","2B":"tel",3:"tel"},{l:"Tajik",lh:"\u0422\u043e\u04b7\u0438\u043a\u04e3",1:"tg",2:"tgk","2T":"tgk","2B":"tgk",3:"tgk"},{l:"Thai",lh:"\u0e20\u0e32\u0e29\u0e32\u0e44\u0e17\u0e22",1:"th",2:"tha","2T":"tha","2B":"tha",3:"tha"},{l:"Tigrinya",lh:"\u1275\u130d\u122d\u129b",1:"ti",2:"tir","2T":"tir","2B":"tir",3:"tir"},{l:"Tibetan Standard",lh:"\u0f56\u0f7c\u0f51\u0f0b\u0f61\u0f72\u0f42",1:"bo",2:"bod","2T":"bod","2B":"tib",3:"bod"},{l:"Turkmen",lh:"T\xfcrkmen\xe7e",1:"tk",2:"tuk","2T":"tuk","2B":"tuk",3:"tuk"},{l:"Tagalog",lh:"Tagalog",1:"tl",2:"tgl","2T":"tgl","2B":"tgl",3:"tgl"},{l:"Tswana",lh:"Setswana",1:"tn",2:"tsn","2T":"tsn","2B":"tsn",3:"tsn"},{l:"Tonga",lh:"faka Tonga",1:"to",2:"ton","2T":"ton","2B":"ton",3:"ton"},{l:"Turkish",lh:"T\xfcrk\xe7e",1:"tr",2:"tur","2T":"tur","2B":"tur",3:"tur"},{l:"Tsonga",lh:"Xitsonga",1:"ts",2:"tso","2T":"tso","2B":"tso",3:"tso"},{l:"Tatar",lh:"\u0422\u0430\u0442\u0430\u0440\u0447\u0430",1:"tt",2:"tat","2T":"tat","2B":"tat",3:"tat"},{l:"Twi",lh:"Twi",1:"tw",2:"twi","2T":"twi","2B":"twi",3:"twi"},{l:"Tahitian",lh:"Reo M\u0101\u2019ohi",1:"ty",2:"tah","2T":"tah","2B":"tah",3:"tah"},{l:"Uyghur",lh:"\u0626\u06c7\u064a\u063a\u06c7\u0631\u0686\u0647",1:"ug",2:"uig","2T":"uig","2B":"uig",3:"uig"},{l:"Ukrainian",lh:"\u0423\u043a\u0440\u0430\u0457\u043d\u0441\u044c\u043a\u0430",1:"uk",2:"ukr","2T":"ukr","2B":"ukr",3:"ukr"},{l:"Urdu",lh:"\u0627\u0631\u062f\u0648",1:"ur",2:"urd","2T":"urd","2B":"urd",3:"urd"},{l:"Uzbek",lh:"O\u2018zbek",1:"uz",2:"uzb","2T":"uzb","2B":"uzb",3:"uzb"},{l:"Venda",lh:"Tshiven\u1e13a",1:"ve",2:"ven","2T":"ven","2B":"ven",3:"ven"},{l:"Vietnamese",lh:"Ti\u1ebfng Vi\u1ec7t",1:"vi",2:"vie","2T":"vie","2B":"vie",3:"vie"},{l:"Volap\xfck",lh:"Volap\xfck",1:"vo",2:"vol","2T":"vol","2B":"vol",3:"vol"},{l:"Walloon",lh:"Walon",1:"wa",2:"wln","2T":"wln","2B":"wln",3:"wln"},{l:"Welsh",lh:"Cymraeg",1:"cy",2:"cym","2T":"cym","2B":"wel",3:"cym"},{l:"Wolof",lh:"Wolof",1:"wo",2:"wol","2T":"wol","2B":"wol",3:"wol"},{l:"Western Frisian",lh:"Frysk",1:"fy",2:"fry","2T":"fry","2B":"fry",3:"fry"},{l:"Xhosa",lh:"isiXhosa",1:"xh",2:"xho","2T":"xho","2B":"xho",3:"xho"},{l:"Yiddish",lh:"\u05d9\u05d9\u05b4\u05d3\u05d9\u05e9",1:"yi",2:"yid","2T":"yid","2B":"yid",3:"yid"},{l:"Yoruba",lh:"Yor\xf9b\xe1",1:"yo",2:"yor","2T":"yor","2B":"yor",3:"yor"},{l:"Zhuang",lh:"Cuengh",1:"za",2:"zha","2T":"zha","2B":"zha",3:"zha"},{l:"Zulu",lh:"isiZulu",1:"zu",2:"zul","2T":"zul","2B":"zul",3:"zul"}];r();function CY(t){var i;const e=null!=(i=function(t){const i=t.v0,e=new HO;return e.y0(i,0,i.byteLength),oR(e).X0}(t))?i:24;return t.Rft/e}function jY(t){return t.Hw===Fo.QL}function OY(t,i,e,s,n){const r=function(t,i,e,s){const n=e.Rft,r=Io.fromNumber(t.oO||0),o=s.yP(Fu.kz(r,n));return{Pft:s._z(),zft:s,Bft:o,Uft:s}}(t,0,e,s),o=Fu.Lz(t.ct||0,e.Rft),h=t.Px||0,a=!(65536&h)&&1!==(h>>24&3);let u;const c=Os(n),l=new J;for(;l.tc<c.byteLength;){const t=Se(c,l);if((31&vw(c,l,1))===eR.U0){const i=new HO;i.y0(n,l.tc-1,l.tc+t-1);const e=new rR(i),s=$O(r.Bft,e);u=u||[],u.push(...EY(s))}l.Vp(t-1)}return il({},r,{ct:o._z(),Qft:o,Fft:r.Bft._z(),Yft:r.Pft,Vft:a,Gft:u,Wft:!1,Zft:!1})}function RY(t){return{dC:t.Lx.dC,Rft:t.aC.Lx.eC}}function PY(t){return t.Hw===Fo.$k}r(),r(),r(),r(),r(),r(),r(),r();var zY=class{$P(t){return this.Htt===t.Htt&&this.Ptt===t.Ptt}constructor(t,i){this.Htt=t,this.Ptt=i}};r();var BY=class{get ait(){return this.Hft}get sit(){return[this]}get oit(){return this.VK}get Ftt(){return this.Xft}get Gtt(){return new zY(this.Ftt.Htt,this.Ftt.Ptt+this.ait.length-1)}qft(t){this.Hft+=t}Kft(t){for(const i of t)this.qft(i)}constructor(t,i){this.VK=t,this.Xft=i,this.Hft=""}};function UY(t,i){return t===i||t.ait===i.ait&&t.Ftt.$P(i.Ftt)&&V(t.oit,i.oit)}function QY(t,i){return t===i||t.Ftt.$P(i.Ftt)&&t.Gtt.$P(i.Gtt)&&Dv(t.sit,i.sit,UY)}var FY=class extends Bh{tz(t){return Dv(this.O,t.O,QY)}constructor(t,i,e){super(t,i,e,!1)}};r();var YY=class{Jft(t){return t.DB(this)}$ft(t){return Qr(t,((t,i)=>t.DB(this,i)))}tgt(t,i){return new VY(t,i).igt()}},VY=class{igt(){if(this.egt)return[];for(let t=0;t<this.Htt.length;t++)this.sgt(t);return this.ngt(),this.rgt}ogt(t){this.hgt=new BY(XB,new zY(this.agt,t))}ngt(){this.hgt&&(this.rgt.push(this.hgt),this.hgt=null)}sgt(t){const i=this.Htt[t];GY(i)?this.hgt&&this.ngt():(this.hgt||this.ogt(t),this.hgt.qft(i))}get egt(){return this.Htt.every(GY)}constructor(t,i){this.Htt=t,this.agt=i,this.rgt=[],this.hgt=null}};function GY(t){return null==t}var WY=class{static ugt(t,i,e){if(i>=e)return;const s=Qr(t,((t,i)=>new VY(t.map((t=>t?t.cgt():null)),i).igt()));return 0!==s.length?new FY(i,e,s):void 0}},yl="black",ZY="white";r(),r();var HY=[[42,225],[92,233],[94,237],[95,243],[96,250],[123,231],[124,247],[125,209],[126,241],[127,9608],[128,174],[129,176],[130,189],[131,191],[132,8482],[133,162],[134,163],[135,9834],[136,224],[137,32],[138,232],[139,226],[140,234],[141,238],[142,244],[143,251],[144,193],[145,201],[146,211],[147,218],[148,220],[149,252],[150,8216],[151,161],[152,42],[153,8217],[154,9473],[155,169],[156,8480],[157,8226],[158,8220],[159,8221],[160,192],[161,194],[162,199],[163,200],[164,202],[165,203],[166,235],[167,206],[168,207],[169,239],[170,212],[171,217],[172,249],[173,219],[174,171],[175,187],[176,195],[177,227],[178,205],[179,204],[180,236],[181,210],[182,242],[183,213],[184,245],[185,123],[186,125],[187,92],[188,94],[189,95],[190,124],[191,8764],[192,196],[193,228],[194,214],[195,246],[196,223],[197,165],[198,164],[199,9475],[200,197],[201,229],[202,216],[203,248],[204,9487],[205,9491],[206,9495],[207,9499]].reduce(((t,i)=>(t[i[0]]=i[1],t)),{}),XY=class{lgt(t){for(let i=0;i<ji;i++)t&&(this.dgt[i]=t.dgt[i])}$P(t){for(let i=0;i<ji;i++)if(this.dgt[i]!==t.dgt[i])return!1;return!0}fgt(){for(let t=0;t<ji;t++)if(null!==this.dgt[t])return!1;return!0}ggt(t){this._gt!==t&&(this._gt=t),this._gt<0?this._gt=0:this._gt>ji&&(this._gt=31)}vgt(t){const i=this._gt+t;this.ggt(i)}wgt(){this.vgt(-1),this.dgt[this._gt]=null}qft(t){t>=144&&this.wgt();const i=function(t){return HY[t]?String.fromCharCode(HY[t]):String.fromCharCode(t)}(t);this.addParsedChar(i)}addParsedChar(t){this._gt>=ji||(32===Number(t)?(this.dgt[this._gt]=this.mgt?"</i>":"<i>",this.mgt=!this.mgt):this.dgt[this._gt]=t,this.vgt(1))}pgt(t){for(let i=t;i<ji;i++)this.dgt[i]=null}iA(){this.pgt(0),this._gt=0}Agt(){this.pgt(this._gt)}ygt(t,i){const e=this.dgt;let s=null;for(let n=0;n<ji;n++){const r=e[n];null===r?s=null:(s||(s={Vh:n,Uh:t,ji:0,Ti:1,dgt:[[]]},i.push(s)),s.dgt[0].push(r),s.ji++)}}DB(t,i){return t.tgt(this.dgt,i)}constructor(){this.dgt=[],this._gt=0;for(let t=0;t<ji;t++)this.dgt.push(null);this.mgt=!1}};var qY=class{bgt(t,i){const e="CC"+(this.Mgt<<1|this.Tgt+1);if(t>=i)return null;const s=(new YY).$ft(this.Sgt.slice(1));return 0===s.length?null:{CP:new FY(t,i,s),_S:e,Ngt:this.Mgt<<1|this.Tgt+1}}tr(){this.Igt(),this.Dgt=1}Egt(){return this.Dgt}kgt(t){this.Dgt=t}ggt(t){this.Sgt[this.Dgt].ggt(t)}vgt(t){this.Sgt[this.Dgt].vgt(t)}Lgt(){return this.xgt}Cgt(t){this.xgt=t}qft(t,i){if(i<32||i>127)return;let e="";switch(t){case 0:e=void 0!==$Y[i]?$Y[i]:String.fromCharCode(i);break;case 1:e=tV[i];break;case 2:this.jgt(),e=iV[i];break;case 3:this.jgt(),e=eV[i]}e&&this.Sgt[this.Dgt].addParsedChar(e)}jgt(){this.Sgt[this.Dgt].wgt()}Ogt(t,i,e){if(t>=i)for(let s=e-1;s>=0;s--)this.Sgt[t+s]=this.Sgt[i+s];else for(let s=0;s<e;s++)this.Sgt[t+s]=this.Sgt[i+s]}Rgt(t,i){for(let e=0;e<=i;e++)this.Sgt[t+e]=new XY}Igt(){this.Rgt(0,KY)}Pgt(){this.Dgt=this.xgt>0?this.xgt:0,this.Igt()}zgt(t){this.Bgt=t}Ugt(t){this.Qgt=t}Fgt(t){this.Ygt=t}Vgt(t){this.Ggt=t}constructor(t,i){this.Sgt=new Array(KY+1);for(let t=0;t<=KY;t++)this.Sgt[t]=new XY;this.Dgt=1,this.xgt=0,this.Mgt=t,this.Tgt=i,this.Bgt=!1,this.Qgt=!1,this.Ygt=ZY,this.Ggt=yl,this.tr()}},KY=15,JY=function(t){return t[t.Wgt=0]="Wgt",t[t.Zgt=1]="Zgt",t[t.Hgt=2]="Hgt",t[t.Xgt=3]="Xgt",t}({}),$Y={39:"\u2019",42:"\xe1",92:"\xe9",94:"\xed",95:"\xf3",96:"\xfa",123:"\xe7",124:"\xf7",125:"\xd1",126:"\xf1",127:"\u2588"},tV={48:"\xae",49:"\xb0",50:"\xbd",51:"\xbf",52:"\u2122",53:"\xa2",54:"\xa3",55:"\u266a",56:"\xe0",57:"\u2800",58:"\xe8",59:"\xe2",60:"\xea",61:"\xee",62:"\xf4",63:"\xfb"},iV={32:"\xc1",33:"\xc9",34:"\xd3",35:"\xda",36:"\xdc",37:"\xfc",38:"\u2018",39:"\xa1",40:"*",41:"'",42:"\u2500",43:"\xa9",44:"\u2120",45:"\xb7",46:"\u201c",47:"\u201d",48:"\xc0",49:"\xc2",50:"\xc7",51:"\xc8",52:"\xca",53:"\xcb",54:"\xeb",55:"\xce",56:"\xcf",57:"\xef",58:"\xd4",59:"\xd9",60:"\xf9",61:"\xdb",62:"\xab",63:"\xbb"},eV={32:"\xc3",33:"\xe3",34:"\xcd",35:"\xcc",36:"\xec",37:"\xd2",38:"\xf2",39:"\xd5",40:"\xf5",41:"{",42:"}",43:"\\",44:"^",45:"_",46:"|",47:"~",48:"\xc4",49:"\xe4",50:"\xd6",51:"\xf6",52:"\xdf",53:"\xa5",54:"\xa4",55:"\u2502",56:"\xc5",57:"\xe5",58:"\xd8",59:"\xf8",60:"\u250c",61:"\u2510",62:"\u2514",63:"\u2518"},sV=class{tr(){this.qgt=!0,this.Kgt=0,this.Wv=0,this.Jgt=this.$gt,this.t_t=void 0,this.$gt.tr(),this.i_t.tr(),this.e_t.tr()}s_t(t,i){return[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(7&t)<<1|i>>5&1]}n_t(t,i){const e=this.s_t(t,i),s=(30&i)>>1;let n=ZY,r=!1;s<7?n=oV[s]:7===s&&(r=!0);const o=1==(1&i);if(4===this.Wv)return;const h=this.Jgt;if(3===this.Wv&&e!==h.Egt()){const t=1+h.Egt()-h.Lgt(),i=1+e-h.Lgt();h.Ogt(i,t,h.Lgt()),h.Rgt(0,i-1),h.Rgt(e+1,KY-e)}h.kgt(e);const a=KB[t<<1&14|i>>5&1]-1;if(a<0)return;const u=function(t,i){const e=i>95?i-96:i-64;return{Rtt:qB[e].Rtt,Ott:qB[e].Ott,Ptt:qB[e].Ptt,Htt:t}}(a,i);h.ggt(u.Ptt),this.Jgt.zgt(o),this.Jgt.Ugt(r),this.Jgt.Fgt(n),this.Jgt.Vgt(yl)}r_t(t,i){this.Jgt.zgt(!1),this.Jgt.Ugt(!1),this.Jgt.Fgt(ZY);const e=this.o_t(t,JY.Wgt," ".charCodeAt(0));let s=ZY,n=!1;const r=1==(1&i);return s=oV[(14&i)>>1],"white_italics"===s&&(s="white",n=!0),this.Jgt.zgt(r),this.Jgt.Ugt(n),this.Jgt.Fgt(s),e}o_t(t,i,e){if(this.Jgt.qft(i,e),2===this.Wv||3===this.Wv){const i=this.h_t(this.Jgt,this.Kgt,t);return this.Kgt=t,i}return null}h_t(t,i,e){return this.qgt?null:2===this.Wv||3===this.Wv?t.bgt(e,e+10):t.bgt(i,e)}a_t(t,i){let e=yl;0==(7&t)&&(e=rV[(14&i)>>1]),this.Jgt.Vgt(e)}u_t(t){const i=nV,e=t.c_t,s=t.l_t;let n=null;switch(e){case i.RCL:this.d_t();break;case i.BS:this.f_t();break;case i.AOD:case i.AON:case i.DER:break;case i.RU2:n=this.g_t(2,s);break;case i.RU3:n=this.g_t(3,s);break;case i.RU4:n=this.g_t(4,s);break;case i.FON:n=this.__t(s);break;case i.RDC:this.v_t(s);break;case i.TR:this.w_t();break;case i.RTD:this.m_t();break;case i.EDM:n=this.p_t(s);break;case i.CR:n=this.A_t(s);break;case i.ENM:this.y_t();break;case i.EOC:n=this.b_t(s)}return n}A_t(t){const i=this.Jgt;if(3!==this.Wv)return null;const e=this.h_t(i,this.Kgt,t),s=i.Egt()-i.Lgt()+1;return i.Ogt(s-1,s,i.Lgt()),i.Rgt(0,s-1),i.Rgt(i.Egt(),KY-i.Egt()),this.Kgt=t,e}g_t(t,i){this.Jgt=this.$gt;const e=this.Jgt;let s=null;return 3!==this.Wv&&4!==this.Wv&&(s=this.h_t(e,this.Kgt,i),this.$gt.Pgt(),this.i_t.Pgt(),this.qgt=!1,e.kgt(KY)),this.Wv=3,e.Cgt(t),s}__t(t){return this.o_t(t,JY.Wgt," ".charCodeAt(0))}p_t(t){const i=this.$gt;let e=null;return 4!==this.Wv&&(e=this.h_t(i,this.Kgt,t)),i.Igt(),this.qgt=!1,e}v_t(t){this.Wv=2,this.Jgt=this.$gt,this.Jgt.Cgt(0),this.Kgt=t}y_t(){this.i_t.Igt()}b_t(t){let i=null;4!==this.Wv&&(i=this.h_t(this.$gt,this.Kgt,t));const e=this.i_t;return this.i_t=this.$gt,this.$gt=e,this.d_t(),this.Kgt=t,i}d_t(){this.Wv=1,this.Jgt=this.i_t,this.Jgt.Cgt(0)}f_t(){this.Jgt.jgt()}w_t(){this.e_t.tr(),this.qgt=!1,this.m_t()}m_t(){this.Jgt=this.e_t,this.Wv=4}M_t(t,i,e){return this.Jgt.qft(JY.Wgt,i),this.o_t(t,JY.Wgt,e)}T_t(t,i,e){const s=1&i?JY.Xgt:JY.Hgt;return this.o_t(t,s,e)}S_t(t){const i=t.N_t,e=t.c_t,s=t.l_t;if(this.t_t===(i<<8|e))return this.t_t=void 0,null;if(this.t_t=i<<8|e,this.I_t(i,e))this.n_t(i,e);else{if(this.D_t(i,e))return this.r_t(s,e);if(this.E_t(i,e))this.a_t(i,e);else{if(this.k_t(i,e))return this.o_t(s,JY.Zgt,e);if(this.L_t(i,e))return this.T_t(s,i,e);if(this.x_t(i,e))return this.u_t(t);this.isTabOffset(i)&&this.Jgt.vgt(e-32)}}return null}isTabOffset(t){return 23===t||31===t}x_t(t,i){return 20==(246&t)&&32==(240&i)}I_t(t,i){return 16==(240&t)&&64==(192&i)}D_t(t,i){return 17==(247&t)&&32==(240&i)}E_t(t,i){return 16==(247&t)&&32==(240&i)||23==(247&t)&&45==(255&i)}k_t(t,i){return 17==(247&t)&&48==(240&i)}L_t(t,i){return 18==(246&t)&&32==(224&i)}static C_t(t){return 16==(112&t)}constructor(t,i){this.Wv=0,this.e_t=new qY(t,i),this.$gt=new qY(t,i),this.i_t=new qY(t,i),this.Jgt=this.$gt,this.Kgt=0,this.t_t=void 0,this.qgt=!1}},nV={RCL:32,BS:33,AOD:34,AON:35,DER:36,RU2:37,RU3:38,RU4:39,FON:40,RDC:41,TR:42,RTD:43,EDM:44,CR:45,ENM:46,EOC:47},rV=["black","green","blue","cyan","red","yellow","magenta","black"],oV=["white","green","blue","cyan","red","yellow","magenta","white_italics"];r(),r(),r();var hV=class{cgt(){return this.j_t}O_t(){return this.Bgt}R_t(){return this.Qgt}P_t(){return this.Ggt}z_t(){return this.Ygt}constructor(t,i,e,s,n){this.j_t=t,this.Bgt=i,this.Qgt=e,this.Ggt=s,this.Ygt=n}},aV=class{B_t(t,i,e,s,n,r,o){this.eV=t,this.U_t=i,this.Q_t=e,this.F_t=s,this.Y_t=n,this.V_t=r,this.G_t=o}W_t(){this.Z_t=[];for(let t=0;t<cV;t++)this.Z_t.push(this.H_t())}H_t(){const t=[];for(let i=0;i<uV;i++)t.push(null);return t}X_t(t){this.q_t()&&(this.Z_t[this.Dgt][this.K_t]=new hV(t,this.Bgt,this.Qgt,this.Ggt,this.Ygt),this.K_t++)}J_t(){this.q_t()&&(this.K_t<=0&&this.Dgt<=0||(this.K_t<=0?(this.K_t=this.G_t-1,this.Dgt--):this.K_t--,this.Z_t[this.Dgt][this.K_t]=null))}q_t(){const t=this.Dgt<this.V_t&&this.Dgt>=0,i=this.K_t<this.G_t&&this.K_t>=0;return t&&i}$_t(){return this.eV}tvt(t){let i=0;for(let e=t;e<cV;e++,i++)this.Z_t[i]=this.Z_t[e];for(let e=0;e<t;e++,i++)this.Z_t[i]=this.H_t()}ivt(){if(this.Dgt+1>=this.V_t)return this.tvt(1),void(this.K_t=0);this.Dgt++,this.K_t=0}evt(){this.Z_t[this.Dgt]=this.H_t(),this.K_t=0}bgt(t,i){if(this.GP>=t)return null;const e=WY.ugt(this.Z_t,this.GP,t);return e?(this.svt(t),{CP:e,_S:"svc"+i,Ngt:i}):null}nvt(t,i){this.Dgt=t,this.K_t=i}rvt(t){this.Ggt=t}ovt(t){this.Ygt=t}avt(t){this.Bgt=t}uvt(t){this.Qgt=t}cvt(){this.Dgt=0,this.K_t=0,this.Bgt=!1,this.Qgt=!1,this.Ygt=ZY,this.Ggt=yl}lvt(t){this.dvt=t}fvt(){this.eV=!0}be(){this.eV=!1}kh(){this.eV=!this.eV}svt(t){this.GP=t}constructor(t){this.gvt=t,this.eV=!1,this.Y_t=!1,this.Q_t=0,this.U_t=0,this.F_t=0,this.V_t=0,this.G_t=0,this.dvt=2,this.Z_t=[],this.GP=0,this.Dgt=0,this.K_t=0,this.Qgt=!1,this.Bgt=!1,this.Ygt=ZY,this.Ggt=yl,this.W_t()}},uV=42,cV=15,lV=class{_vt(t){const i=t.vvt();let e=i.lI;const s=i.l_t;if(e===vV){e=e<<16|t.vvt().lI}return e>=0&&e<=31?this.wvt(e,s):e>=128&&e<=159?this.mvt(t,e,s):(e>=4096&&e<=4127?this.pvt(t,255&e):e>=4224&&e<=4255?this.Avt(t,255&e):e>=32&&e<=127?this.yvt(e):e>=160&&e<=255?this.bvt(e):e>=4128&&e<=4223?this.Mvt(255&e):e>=4256&&e<=4351&&this.Tvt(255&e),null)}yvt(t){this.Svt&&(127!==t?this.Svt.X_t(String.fromCharCode(t)):this.Svt.X_t("\u266a"))}bvt(t){this.Svt&&this.Svt.X_t(String.fromCharCode(t))}Mvt(t){if(!this.Svt)return;if(void 0===wV[t])return void this.Svt.X_t("_");const i=wV[t];this.Svt.X_t(i)}Tvt(t){this.Svt&&(160===t?this.Svt.X_t("[CC]"):this.Svt.X_t("_"))}wvt(t,i){if(!this.Svt)return null;const e=this.Svt;let s=null;switch(t){case dV:e.J_t();break;case gV:e.$_t()&&(s=e.bgt(i,this.Nvt)),e.ivt();break;case _V:e.$_t()&&(s=e.bgt(i,this.Nvt)),e.evt();break;case fV:e.$_t()&&(s=e.bgt(i,this.Nvt)),e.W_t(),e.nvt(0,0)}return s}mvt(t,i,e){if(i>=128&&i<=135){const t=7&i;this.Ivt(t)}else{if(136===i){const i=t.vvt().lI;return this.Dvt(i,e)}if(137===i){const i=t.vvt().lI;this.Evt(i,e)}else{if(138===i){const i=t.vvt().lI;return this.kvt(i,e)}if(139===i){const i=t.vvt().lI;return this.Lvt(i,e)}if(140===i){const i=t.vvt().lI;return this.xvt(i,e)}if(143===i)return this.tr(e);if(144===i)this.Cvt(t);else if(145===i)this.jvt(t);else if(146===i)this.nvt(t);else if(151===i)this.Ovt(t);else if(i>=152&&i<=159){const s=(15&i)-8;this.B_t(t,s,e)}}}return null}pvt(t,i){i>=8&&i<=15?t.Ax(1):i>=16&&i<=23?t.Ax(2):i>=24&&i<=31&&t.Ax(3)}Avt(t,i){i>=128&&i<=135?t.Ax(4):i>=136&&i<=143&&t.Ax(5)}Ivt(t){this.Rvt[t]&&(this.Svt=this.Rvt[t])}*Pvt(t){for(let i=0;i<8;i++){1==(1&t)&&this.Rvt[i]&&(yield i),t>>=1}}Dvt(t,i){let e=null;for(const s of this.Pvt(t)){const t=this.Rvt[s];t.$_t()&&(e=t.bgt(i,this.Nvt)),t.W_t()}return e}Evt(t,i){for(const e of this.Pvt(t)){const t=this.Rvt[e];t.$_t()||t.svt(i),t.fvt()}}kvt(t,i){let e=null;for(const s of this.Pvt(t)){const t=this.Rvt[s];t.$_t()&&(e=t.bgt(i,this.Nvt)),t.be()}return e}Lvt(t,i){let e=null;for(const s of this.Pvt(t)){const t=this.Rvt[s];t.$_t()?e=t.bgt(i,this.Nvt):t.svt(i),t.kh()}return e}xvt(t,i){let e=null;for(const s of this.Pvt(t)){const t=this.Rvt[s];t.$_t()&&(e=t.bgt(i,this.Nvt)),this.Rvt[s]=void 0}return e}tr(t){const i=this.xvt(255,t);return this.iA(),i}iA(){this.Svt=void 0,this.Rvt=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0]}Cvt(t){t.Ax(1);const i=t.vvt().lI;if(!this.Svt)return;const e=(128&i)>0,s=(64&i)>0;this.Svt.uvt(e),this.Svt.avt(s)}jvt(t){const i=t.vvt().lI,e=t.vvt().lI;if(t.Ax(1),!this.Svt)return;const s=3&i,n=(12&i)>>2,r=(48&i)>>4,o=3&e,h=(12&e)>>2,a=(48&e)>>4,u=this.zvt(r,n,s),c=this.zvt(a,h,o);this.Svt.ovt(u),this.Svt.rvt(c)}nvt(t){const i=t.vvt().lI,e=t.vvt().lI;if(!this.Svt)return;const s=15&i,n=63&e;this.Svt.nvt(s,n)}Ovt(t){t.Ax(1),t.Ax(1);const i=t.vvt().lI;if(t.Ax(1),!this.Svt)return;const e=3&i;this.Svt.lvt(e)}B_t(t,i,e){const s=void 0!==this.Rvt[i];if(!s){const t=new aV(i);t.svt(e),this.Rvt[i]=t}const n=t.vvt().lI,r=t.vvt().lI,o=t.vvt().lI,h=t.vvt().lI,a=t.vvt().lI,u=t.vvt().lI,c=(32&n)>0,l=127&r,d=(128&r)>0,f=o,g=1+(15&h),_=(240&h)>>4,v=1+(63&a);s&&0===(7&u)||this.Rvt[i].cvt(),this.Rvt[i].B_t(c,l,f,_,d,g,v),this.Svt=this.Rvt[i]}zvt(t,i,e){const s={0:0,1:0,2:1,3:1};return mV[s[t]<<2|s[i]<<1|s[e]]}constructor(t){this.Nvt=t,this.Rvt=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0],this.Svt=void 0}},dV=8,fV=12,gV=13,_V=14,vV=16,wV={32:" ",33:"\xa0",37:"\u2026",42:"\u0160",44:"\u0152",48:"\u2588",49:"\u2018",50:"\u2019",51:"\u201c",52:"\u201d",53:"\u2022",57:"\u2122",58:"\u0161",60:"\u0153",61:"\u2120",63:"\u0178",118:"\u215b",119:"\u215c",120:"\u215d",121:"\u215e",122:"\u2502",123:"\u2510",124:"\u2514",125:"\u2500",126:"\u2518",127:"\u250c"},mV=["black","blue","green","cyan","red","magenta","yellow","white"];r();var pV=class{Bvt(t){if(t.Hw===su.Dft){const i=63&t.lI;return this.Uvt=2*i-1,void(this.Qvt=[])}if(this.Qvt&&(this.Uvt>0&&(this.Qvt.push(t),this.Uvt--),0===this.Uvt)){const t=new AV(this.Qvt);this.Fvt.push(t),this.Qvt=null,this.Uvt=0}}Yvt(){return this.Fvt}Vvt(){this.Fvt=[]}iA(){this.Fvt=[],this.Qvt=[],this.Uvt=0}constructor(){this.Fvt=[],this.Qvt=null,this.Uvt=0}},AV=class{Gvt(){return this.Wvt<this.Zvt.length}Hvt(){return this.Wvt}vvt(){if(!this.Gvt())throw new Ui(Do.SUBTITLE_PARSE_ERROR,"Buffer read out of bounds / invalid CEA-708 Data.");return this.Zvt[this.Wvt++]}Ax(t){if(this.Wvt+t>this.Zvt.length)throw new Ui(Do.SUBTITLE_PARSE_ERROR,"Buffer read out of bounds / invalid CEA-708 Data.");this.Wvt+=t}constructor(t){this.Wvt=0,this.Zvt=t}},yV=class{iA(){this.Xvt=0,this.qvt=[],this.Kvt=[],this.Jvt.iA(),this.tr(),this.$vt.forEach((t=>{t.iA()}))}tr(){this.twt=0,this.iwt=0,this.ewt.forEach((t=>{t.tr()}))}swt(t,i){if(t.Lft){const e=t.Cft,s=t.jft,n=t.Hw;n===su.Sft||n===su.Nft?this.qvt.push({l_t:i,Hw:n,N_t:e,c_t:s,nwt:this.qvt.length}):this.rwt&&(this.Kvt.push({l_t:i,Hw:n,lI:e,nwt:this.Kvt.length}),this.Kvt.push({l_t:i,Hw:su.Ift,lI:s,nwt:this.Kvt.length}))}}GW(){const t=[];this.qvt.sort(((t,i)=>t.l_t-i.l_t||t.nwt-i.nwt)),this.Kvt.sort(((t,i)=>t.l_t-i.l_t||t.nwt-i.nwt));for(const i of this.qvt){const e=this.owt(i);e&&t.push(e)}for(const t of this.Kvt)this.Jvt.Bvt(t);const i=this.Jvt.Yvt();for(const e of i){const i=this.hwt(e);t.push(...i)}return this.Jvt.Vvt(),this.qvt=[],this.Kvt=[],t}owt(t){const i=t.Hw;if(sV.C_t(t.N_t)){const e=t.N_t>>3&1;0===i?this.twt=e:this.iwt=e}const e="CC"+(i<<1|(i?this.iwt:this.twt)+1),s=this.ewt.get(e);return 255===t.N_t&&255===t.c_t||!t.N_t&&!t.c_t||!this.awt(t.N_t)||!this.awt(t.c_t)?(++this.Xvt>=45&&this.tr(),null):(this.Xvt=0,t.N_t&=127,t.c_t&=127,t.N_t||t.c_t?sV.C_t(t.N_t)?s.S_t(t):s.M_t(t.l_t,t.N_t,t.c_t):null)}hwt(t){const i=[];try{for(;t.Gvt();){const e=t.vvt().lI;let s=(224&e)>>5;const n=31&e;if(7===s&&0!==n){s=63&t.vvt().lI}if(0!==s){if(!this.$vt.has(s)){const t=new lV(s);this.$vt.set(s,t)}const e=this.$vt.get(s),r=t.Hvt();for(;t.Hvt()-r<n;){const s=e._vt(t);s&&i.push(s)}}}}catch(t){if(!(t instanceof Ui&&t.code===Do.SUBTITLE_PARSE_ERROR))throw t}return i}awt(t){let i=0;for(;t;)i^=1&t,t>>=1;return 1===i}constructor(){this.rwt=!1,this.qvt=[],this.Kvt=[],this.Jvt=new pV,this.Xvt=0,this.ewt=C_({CC1:new sV(0,0),CC2:new sV(0,1),CC3:new sV(1,0),CC4:new sV(1,1)}),this.twt=0,this.iwt=0,this.$vt=rn(),this.tr()}};r();var bV=class extends Gs{constructor(t,i){super("uwt"),this.Ngt=t,this.CP=i}},MV=Fu.vB(.1),TV=class extends Bo{cwt(t,i){this.lwt.swt(t,i)}GW(){const t=this.lwt.GW();for(const i of t)this.yo(new bV(i.Ngt,i.CP))}tr(){this.lwt.iA()}gn(){this.Bo(),this.lwt.iA()}constructor(){super(),this.lwt=new yV}},SV=class extends TV{dwt(t,i,e,s){const n=this.fwt(t,s);this.gwt(n,i,e),this.GW()}fwt(t,i){const e=t.slice().sort(JB),s=this._wt;if(0===s.length)return e;if(0===e.length)return s;let n;const r=s[0].ztt,o=s[s.length-1].ztt,h=e[0].ztt,a=s[0].bat===e[0].bat;if(o.Nz(h).Mz().bz(Fu.vB(2.5*i))&&a)n=s.concat(e).sort(JB);else if(h.mz(r)){let t=0;for(;t<s.length&&s[t].ztt.bz(h);)t++;let i=!1,r=!1;for(let n=t,o=0;n<s.length&&o<e.length;n++,o++)NV(s[n],e[o])?i=!0:r=!0;const o=i&&!r,a=i&&r;!i&&r?n=s.concat(e).sort(JB):o?n=s.slice(0,t).concat(e):(n=e,a&&this.tr())}else n=e,this.tr();return n}gwt(t,i,e){for(let s=0;s<t.length;s++){const n=t[s],r=n.ztt._z();if(!e&&i-r<MV._z())return void(this._wt=t.slice(s));this.cwt(n,r)}this._wt=[]}constructor(...t){super(...t),this._wt=[]}};function NV(t,i){return t.ztt.$P(i.ztt)&&t.Hw===i.Hw&&t.Cft===i.Cft&&t.jft===i.jft}var Ki=class extends ik{vwt(t){return this.wwt.get(t)}mwt(t){let i=this.wwt.get(t.Btt);return i||(i=this.pwt(t),this.wwt.set(t.Btt,i)),i}pwt(t){const i=[ut.$E],e=LY(t.Utt);let s,n=e?e.l:"";t.Awt&&(n="easy "+n,i.push(ut.hk)),s=t.wh?"CC "+t.wh:n?"CC "+n:"CC"+t.Btt;const r=this.cU.dE(vs.JB,s,s,t.Utt,!1,er.CEA608,void 0,i);return this.tt(r),r}xot(t){const i=tn.zx(Os(t));this.ywt=function(t){for(const i of t.Z){const t=RY(i),e=i.aC.pC.bC.TC.NC;let s=So(e,(t=>t.Hw===Fo.dL));if(!s){const t=e.filter((t=>t.Hw===Fo.UL)),i=So(t,(t=>{var i;return(null==(i=t.Mj)?void 0:i.Hw)===Fo.dL}));i&&(s=i.Mj)}if(!s)continue;const n=WO(Os(s.uj.xS),new J),r=s.lj;return il({},t,{dC:i.Lx.dC,uj:jw(s.uj.xS),ji:s.ji,Ti:s.Ti,Bj:r&&r.Bj,zj:r&&r.zj,C1:n.d0,bwt:n.f0,j1:n.g0,v0:n.v0[0],w0:n.w0[0]})}}(So(i,PY))}Ylt(t,i,e,s,n,r){var o;if(!this.ywt)return;if(!j(this.Mwt)&&Xs(this.Mwt,i,1e-5))return;j(this.Twt)||Xs(this.Twt,i,.1)||this.Swt.tr();const h=function(t,i,e,s,n){const r=[],o=i.filter(jY),h=s(e);for(const i of o){const s=So(i.Z,(t=>t.Lx.dC===e.dC));if(!s)continue;const o=s.Lx.Fj||0,u=s.Lx.Yj||0;let c=s.$j?s.$j.$j:Io.ZERO;var a;const l=i.Zj+(null!=(a=s.Lx.tO)?a:Io.ZERO).toNumber();for(const a of s.Jj){let s=l+(a.Zj||0);for(const l of a.rO){const a=l.qp||u,d=new HO;d.y0(t,s,s+a);const f=Fu.kz(c,e.Rft);d.WB=n(l,i,e,f,Qu(t,s,s+a)),r.push(d),s+=a,c=c.add(l.ct||o||h)}}}return r}(t,tn.zx(Os(t)),this.ywt,CY,OY);var a;const u=null!=(a=null==(o=xv(h,(t=>t.WB.ct)))?void 0:o.WB.ct)?a:0,c=function(t){const i=[];for(const e of t)e.WB.Gft&&i.push(...e.WB.Gft),delete e.WB.Gft;for(let t=0;t<i.length;t+=1)i[t].Hj=t;return i}(h),l=Fu.vB(s),d=[];for(const t of c)d.push(il({},t,{bat:n,ztt:t.Eft.yP(l)}));this.Swt.dwt(d,e,r,u),this.Mwt=i,this.Twt=e}tr(){return this.Swt.tr(),this.wwt.forEach((t=>{t.gn(),this.it(t),this.cU._U(t)})),this.wwt.clear(),this.ywt=void 0,this.Mwt=NaN,this.Twt=NaN,super.tr()}gn(){return this.Swt.fn("uwt",this.Nwt),this.Swt.gn(),super.gn()}constructor(t){super(),this.ywt=void 0,this.Mwt=NaN,this.Twt=NaN,this.Nwt=t=>{const i=this.mwt({Btt:t.Ngt,Utt:""}),e=t.CP;for(const t of i.L.FE)e.OP<t.OP&&e.RP>t.OP?e.RP=t.OP:e.OP>t.OP&&t.RP>e.OP?t.RP=e.OP:e.OP===t.OP&&(e.RP=t.RP);i.fU(e)},this.cU=t,this.wwt=rn(),this.Swt=new SV,this.Swt.yn("uwt",this.Nwt)}};r(),r();var IV=/(.*)=(.*)/,DV=/(.*):(.*)/;function EV(t){if(!t)return[];const i=[],e=t.trim().split(";");for(const t of e){const e=t.match(IV);if(e){const[,t,s]=e;let n="",r=!1;for(const t of s.trim().split(","))if(t.match(DV)){const[,i,e]=t.match(DV);switch(i){case"lang":n=e;break;case"er":r=Boolean(Number(e))}}i.push({Btt:Number(t),Utt:n,Awt:r})}}return i}var kV={1:1,2:3,3:2,4:4},LV="urn:scte:dash:cc:cea-608:2015",xV="urn:scte:dash:cc:cea-708:2015";r(),r();var eu=class extends ps{ma(){return new CV(this.bat&&this.bat.ga)}constructor(t,i,e){super(Ct.zE),this.bat=t,this.Mct=i,this.Iwt=e}},CV=class extends Gs{constructor(t){super("activequalitychanged"),this.quality=t}},jV=[Qi.so,fa.CE,Qi.Dp],OV=class extends Bo{Dwt(t){const i=this.nft.Dat;for(const e of i.Lt.Nht)if(i.Vct.Uct(t,e))return e}gn(){this.Bo(),this.jR.fn(jV,this.Ewt)}constructor(t,i){super(),this.Ewt=t=>{const i=this.kwt,e=this.Dwt(t.currentTime)||this.nft.Tat;e&&i!==e&&(this.kwt=e,e.bat&&this.yo(new eu(e.bat,null==e?void 0:e.ga,null==i?void 0:i.ga)))},this.jR=t,this.jR.yn(jV,this.Ewt),this.nft=i}};function RV(t,i,e){const s=new Hu(Os(t),new J),n=Lu.Ex(s,Fo.$k);if(!n)return;const r=Lu.Mx(n.xS),o=So(r,(t=>t.Hw===Fo.iL)),h=So(r,(t=>t.Hw===Fo.XL));if(!o)return;const a=Lu.Ex(o.xS,Fo.sL);if(!a)return;const u=Lu.Ex(a.xS,Fo.oL);if(!u)return;const c=Lu.Ex(u.xS,Fo.hL);if(!c)return;const l=Lu.Mx(c.xS),d=So(l,(t=>t.Hw===Fo.aL));if(!d)return;const f=Lu.Ox(d.xS,Fo.aL,!1),g=new Hu(Os(f.xS),new J);g.Ax(4);const _=Lu.Mx(g),v=[];for(const t of _){if(t.Hw===Fo.BL||t.Hw===Fo.UL)return;t.Hw===Fo.dL?v.push({Lwt:t,xwt:Fo.UL}):t.Hw===Fo.xL&&v.push({Lwt:t,xwt:Fo.BL})}if(!function(t,i){return void 0===t&&void 0!==i&&i.length>0}(h,i)&&0===v.length)return;let w=cu(t);const m=So(r,(t=>t.Hw===Fo.cL)),p=m?Lu.Ex(m.xS,Fo.lL):void 0,A=p?function(t){const i=t.xS.Wp();return i.Ax(4),i.Ax(4),i.ux()}(p):1,y=So(l,(t=>t.Hw===Fo.uL));y&&function(t,i,e){const s=BV(Os(t),i),n=Lu.Dx(s,new J),r=n.xS;r.Ax(4);const o=r.ux();for(let t=0;t<o;t++){r.Ax(4),r.Ax(4);const t=r.nx.Wp(),i=r.ux();zc(r.xS,t,i+e)}}(w,y,v.length),p&&function(t,i,e){const s=BV(Os(t),i),n=Lu.Dx(s,new J),r=n.xS;r.Ax(4),r.Ax(4),zc(r.xS,r.nx,e)}(w,p,1),w=function(t,i,e,s){if(e||!s)return t;let n=t;for(const t of s)n=PV(n,i,new T(t));return n}(w,n,h,i);const b=[n,o,a,u,c,d];for(let t=v.length-1;t>=0;t--){const i=v[t];w=zV(w,i.Lwt,d,b,i.xwt,e)}return{Cwt:w,Owt:{Rwt:v.length,Qj:A}}}function PV(t,i,e){const s=Uw(t,e,i.xS.xS.byteOffset+i.xS.xS.byteLength);return UV(BV(Os(s),i),e.byteLength),s}function zV(t,i,e,s,n,r){const o=function(t,i,e){0;const s=t.xS.xS,n=GV(),r=new T(s.byteLength+n.byteLength),o=Os(r);r.set(se(s),0),UV(o,n.byteLength),Mw(o,new J(HV),i),r.set(n,s.byteLength),Mw(o,new J(s.byteLength+WV),t.Hw),e&&gw(o,new J(s.byteLength+ZV),e);return r}(i,n,r),h=Uw(t,o,i.xS.xS.byteOffset),a=Os(h);!function(t,i){const e=Lu.Dx(t,new J),s=Lu.Ox(e.xS,Fo.aL,!1),n=Os(s.xS),r=n.getUint32(0);n.setUint32(0,r+i)}(BV(a,e),1);for(const t of s)UV(BV(a,t),o.byteLength);return h}function BV(t,i){const e=i.xS.xS.byteOffset;return Ma(t,e,e+i.xS.xS.byteLength)}function UV(t,i){const e=new J,s=Se(t,e);if(0===s);else if(1===s){e.Vp(4);const s=Ze(t,e.Wp());pw(t,e,s.add(i))}else e.Gp(0),zc(t,e,s+i)}r();var QV=class extends mo{start(t){this.kK=t}transform(t){this.t$(t),this.Pwt()}flush(){this.e$(),this.Pwt()}c$(t){return t===Fo.QL}d$(t){let i=cu(se(t.xS.xS));const e=Lu.Dx(Os(i),new J);i=FV(i,e,this.zwt),this.Bwt.push(i)}g$(t){this.Bwt.push(t)}Pwt(){for(const t of function(t){if(t.length<2)return t;const i=[];let{buffer:e,byteOffset:s,byteLength:n}=t[0];for(let r=1;r<t.length;r++){const o=t[r];e===o.buffer&&s+n===o.byteOffset?n+=o.byteLength:(i.push(new T(e,s,n)),({buffer:e,byteOffset:s,byteLength:n}=o))}return i.push(new T(e,s,n)),i}(this.Bwt))this.kK.enqueue(t);Or(this.Bwt)}constructor(t){super(),this.Bwt=[],this.zwt=t}};function FV(t,i,e){let s=t;const n=Lu.Mx(i.xS);for(let t=n.length-1;t>=0;t--){const r=n[t];r.Hw===Fo.YL&&(s=YV(s,r,i,e))}return s}function YV(t,i,e,s){const n=BV(Os(t),i),r=Lu.Dx(n,new J),o=Lu.Mx(r.xS),h=So(o,(t=>t.Hw===Fo.VL));if(!h)return t;const a=h.xS,u=a.nx.Wp(),c=a.ux(),{flags:l}=Yc(c);a.Ax(4),l.Zp(dN.BASE_DATA_OFFSET_PRESENT)&&a.Ax(8);const d=a.nx.Wp();if(l.Zp(dN.SAMPLE_DESCRIPTION_INDEX_PRESENT)){const i=Se(a.xS,d);return zc(a.xS,a.nx,i+s.Rwt),t}{zc(a.xS,u,c|dN.SAMPLE_DESCRIPTION_INDEX_PRESENT);const n=new T(4);Os(n).setUint32(0,s.Qj+s.Rwt);const r=a.xS.byteOffset+d.tc;for(const t of o.filter((t=>t.Hw===Fo.GL)))VV(t,n.byteLength);for(const s of[h,i,e])UV(BV(Os(t),s),n.byteLength);return Uw(t,n,r)}}function VV(t,i){const e=t.xS,s=e.ux(),{flags:n}=Yc(s);if(e.Ax(4),n.Zp(fN.DATA_OFFSET_PRESENT)){const t=e.Wp().ux();zc(e.xS,e.nx,t+i)}}var GV=Vc((()=>new T([0,0,0,80,115,105,110,102,0,0,0,12,102,114,109,97,0,0,0,0,0,0,0,20,115,99,104,109,0,0,0,0,99,101,110,99,0,1,0,0,0,0,0,40,115,99,104,105,0,0,0,32,116,101,110,99,0,0,0,0,0,0,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]))),WV=16,ZV=64,HV=4,XV=[ac.ua,Qi.Mp,Qi.Tp,Qi.Np,Qi.Gm],qV=class extends Bo{get fht(){return this.ght}get o(){return this.Nb}get s4(){return this.n4}get nt(){return this.Uwt}get oft(){return function(t){const i=29.97,e=1024,s=44100;return t===Q.tN?s/e:i}(this.n4)}get rft(){return 1/this.oft}get Rt(){return Boolean(this.ght&&this.ght.Rt)}get LJ(){const t=this.nft?this.nft.Dat.LJ.Oct:ge.cR();return this.Qwt().WO(t)}get KI(){let t=this.Fwt();const i=this.Ywt;return void 0!==i&&t.UO().gr(i)&&(t=t.WO(ge.aR(i))),t}get kct(){return kl(this.Fwt(),this.LJ.WO(this.Vwt)).GO(2*this.rft)}get Vwt(){const t=this.Ywt;if(t&&isFinite(t)){const i=this.Gwt.jn;if(isFinite(i)&&t<i)return new ge([t,i],[!1,!0])}return ge.cR()}get PD(){const t=this.ght;if(!t)return ge.aR(0);const i=t.Sct.hft,e=t.Sct.aft;if(void 0===e||void 0===i)return ge.aR(0);const s=e;let n=i>=t.Sct.ult.jn?x.max(i,this.jn):i;return n=x.max(s,n),ge.uR(s,n).UO()}get BF(){return this.kct.oR(this.sD)}get jct(){return this.Gwt.jct}get sD(){return this.jR.sD}get Cn(){return this.ght?this.ght.Sct.ult.Cn:NaN}get jn(){const t=this.Wwt(),i=this.Ywt;return void 0===t?NaN:void 0!==i?i:t}Wwt(){var t;return null==(t=this.ght)?void 0:t.Sct.ult.jn}get Ti(){return this.Gwt.Ti}get ji(){return this.Gwt.ji}get Zwt(){return this.Ywt}Fat(){return void 0!==this.nft&&this.nft.Fat}Cct(){if(void 0===this.Ywt)return!1;const t=this.Fwt().UO(),i=t.XO(this.Ywt);return!(i<0)&&t.Cn(i)!==this.Ywt}i4(){const t=this.Gwt.jct,i=this.Fwt().Sn(t);this.Ywt=i.U>0?i.jn(i.U-1):0;const e=t.jn(0);isFinite(e)&&this.Ywt<e&&this.CJ(this.Ywt,e),this.Hwt()}async Ylt(t,i,e,s){const n=e.jot.RB,r=this.Xwt(t,i,e,n,s),o=this.qwt(t,i,e,n,s),[h]=await ds([o,r]);return h}async Xwt(t,i,e,s,n){if(!ss(e.GZ))return;let r;if(t.Hw===z.qM){const i=t.xS.Gut(),e=await i.gS(n);r=new T(e)}else r=new T(t.xS.uht);const o=[];if(void 0!==this.Kwt&&(this.Kwt.Ylt(r,i.OP,s),o.push(this.Kwt)),void 0!==this.Jwt){const t=e.hlt(i);this.Jwt.Ylt(r,i.OP,i.RP,s,e.bat,t),o.push(this.Jwt)}tk(this.KI,o)}async qwt(t,i,e,s,n){var r;let o;if(re(n),t.Hw===z.qM){let i=t.xS._S;this.$wt&&(i=function(t,i){return t.pipeThrough(new Iu(new QV(i)))}(i,this.$wt)),o={Hw:z.qM,xS:i}}else{let i=new T(t.xS.uht);this.$wt&&(i=function(t,i){let e=cu(t);const s=new Hu(Os(e),new J),n=Lu.Mx(s);for(let t=n.length-1;t>=0;t--){const s=n[t];s.Hw===Fo.QL&&(e=FV(e,s,i))}return e}(i,this.$wt)),o={Hw:z.XK,xS:i}}const h={het:i.OP,ct:i.ct,RB:s,j1:null==(r=e.bat)?void 0:r.dk},a=this.Aot.KI;await this.tmt(),await this.Aot.c2(o,h,n);return function(t,i,e,s){let n,r,o=i.HO(t.UO());o=o.HO(e.HO(i)),!1;0===o.U?(n=s.RP,r=n):(n=o.Cn(0),r=o.jn(0));return{wdt:n,mdt:r}}(a,this.Aot.KI,this.Aot.r4,i)}async xot(t,i,e){var s;re(e),this.Jwt&&this.Jwt.xot(new T(t.uht));let n=new T(t.uht);if(this.imt(i)){const t=this.Gwt.emt;let i,e=[];t&&(e=Qr(t.smt,(t=>t.SF)),i=t.nmt.nQ?xC(t.nmt.nQ):void 0);const s=RV(n,e,i);s?(this.$wt=s.Owt,n=s.Cwt):this.$wt=void 0}const r={Hw:z.XK,xS:n};await this.tmt(),await this.Aot.f2(r,{j1:null==(s=i.bat)?void 0:s.dk},e)}Glt(t,i,e){return this.Aot.Rb(t,i,e)}CJ(t,i){this.Aot.a4(t,i)}jJ(t,i){this.Aot.u4(t,i)}Fwt(){return this.Aot?this.Aot.KI:ge.cR()}Qwt(){return this.Aot?this.Aot.r4:ge.cR()}omt(){return this.Aot?this.Aot.Rb(0,1/0):Promise.resolve()}hmt(){return this.Aot&&(this.Aot.fn(W.ZK,this.Ds),this.Aot=void 0),Promise.resolve()}async amt(t){var i;const e=Jn.Blt(null!=(i=t.Gdt)?i:t.Nht,this.klt).GZ;this.Aot||(this.Aot=this.Gwt.umt(e),this.Aot.yn(W.ZK,this.Ds),this.Plt=new sY(this.Aot)),await this.tmt()}$n(t,i){const e=Ai.xm([i]);this.gU.Dm(),this.gU=e;const s=this.cmt(t,this.lmt,e.wm);return this.lmt=s,s}dmt(t){if(fh(this.fmt,er.CEA608))return;const i=t.Sct.xdt;if(function(t){return t.some((t=>t.J6===LV||t.J6===xV))}(i)){this.Jwt=new Ki(this.cU);const t=function(t){const i=[];for(const e of t)if(e.J6===LV){const t=tU(e.lI);for(const e of t)i.push(e)}else if(e.J6===xV){const t=EV(e.lI);for(const e of t)if(e.Btt<=4){const t=kV[e.Btt];i.push(il({},e,{Btt:t}))}}return i}(i);for(const i of t)this.Jwt.mwt(i);this.Uwt.EF(this.Jwt.Z)}}async cmt(t,i,e){re(e),i&&await i.catch(ul),this.ght===t&&this.gmt||(await this._mt(),re(e),await this.omt(),re(e),t&&await this.lU(t))}async _mt(){const t=this.ght;this.ght=void 0,this.gmt=!1,this.Ywt=void 0,t&&(t.fn(Ct.UE,this.vmt),t.Jdt(!1),t.fn(Ct.NO_QUALITY,this.Ds)),this.wmt&&(this.wmt.gn(),this.wmt=void 0),this.nft&&(await this.nft.gn(),this.nft=void 0),this.Jwt&&(this.Uwt.xF(this.Jwt.Z),await this.Jwt.gn())}async lU(t){this.ght=t,this.dmt(t),t.yn(Ct.UE,this.vmt),t.yn(Ct.NO_QUALITY,this.Ds),await this.amt(t),this.nft=this.mmt(t),this.nft.yn(XV,this.Ds),this.nft.yn("Mat",this.Hwt),this.nft.Lat=t.Gdt,this.wmt=new OV(this.jR,this.nft),this.wmt.yn(Ct.zE,this.Udt),t.Jdt(!0),this.gmt=!0}mmt(t){return new eY(this,this.jR,this.jR,this.dU,this.dV,this.kdt,this.Xut,this.Rlt,this.klt,this.Plt,this.hdt,this.eY).uet(t)}async tr(t){this.gU.Dm(),this.lmt&&(await this.lmt.catch(ul),this.lmt=void 0),await this._mt(),t||await this.omt(),await this.hmt()}async pmt(){await this._mt()}zdt(t){var i;null==(i=this.fht)||i.zdt(t)}async Odt(t,i){var e,s;await this.Xat(),null==(e=this.fht)||e.Odt(i);const n=null==(s=this.nft)?void 0:s.Dat.Vct.Pct(t);if(n&&n.U>0)for(let t=0;t<n.U;t++){var r;await(null==(r=this.Aot)?void 0:r.Rb(n.Cn(t),n.jn(t)))}await this.Kat()}Amt(t){const i=t.Lt.Gdt;if(void 0===i)return this.ymt(t);if(i.some((t=>this.Plt.rJ(t))))return this.ymt(t);this.yo(new Gs("bmt"))}ymt(t){this.nft&&this.ght&&this.ght===t.Lt&&(this.nft.Lat=this.ght.Gdt)}async Xat(t){this.nft&&await this.nft.Xat(t)}async Kat(t){this.nft&&await this.nft.Kat(t)}kq(){const t=this.KI.hR;return this.dV.kq(t)}tmt(){const t=this.Gwt.jct,i=x.max(0,t.Cn(0)-.1),e=t.jn(0)+.01;return this.Aot.L2(i,e)}imt(t){if(!ss(t.GZ))return!1;if(this.Gwt.X6)return!0;return void 0!==this.Gwt.emt}Jat(t){if(!QN(this.n4))return;const i=this.nft,e=t.nft;void 0!==i&&void 0!==e&&i.Jat(e,this.Cn,this.jn)}async gn(t){this.Bo();try{await this.tr(t),await this.pmt()}catch(t){}}constructor(t,i,e,s,n,r,o,h,a,u,c,l,d){super(),this.ght=void 0,this.nft=void 0,this.gmt=!1,this.gU=new Ai,this.lmt=void 0,this.Ywt=void 0,this.Aot=void 0,this.Plt=new nY,this.$wt=void 0,this.Jwt=void 0,this.Uwt=new uu([]),this.Hwt=()=>{!this.Fat()&&this.Cct()&&this.Gwt.Hwt()},this.Udt=t=>{this.ght.Udt(t),this.yo(new MY(t.Mct,t.Iwt))},this.vmt=t=>{this.Amt(t)},this.Nb=function(){const t=bY;return bY+=1,t}(),this.n4=t,this.dU=s,this.dV=n,this.Gwt=i,this.jR=e,this.Xut=r,this.cU=o,this.Kwt=h,this.Rlt=a,this.klt=a?WN(t,a):void 0,this.hdt=u,this.fmt=c,this.kdt=l,this.eY=d}};var KV=class extends Bo{Aq(t,i){return this.Mmt(t,i)}async Mmt(t,i){for(const i of t)this.Tmt(i);await this.$n(i);for(const t of this.Nmt.Smt)t.Hw===Q.KM&&(t.Nht&&0!==t.Nht.length?await this.Imt.lU(t):this.yo(new pY("No supported representation found in the AdaptationSet with mimetype : "+t.Hw)))}get dk(){return this.SP}get ct(){return this.jR.ct}Dmt(t){return new qV(t,this,this.jR,this.dU,this.dV,this.Xut,this.cU,this.Kwt,this.Emt,this.hdt,this.fmt,this.kdt,this.eY)}Fat(){return this.vft.some((t=>t.Fat()))}Cct(){return 0!==this.vft.length&&this.vft.every((t=>t.Cct()))}Hwt(){this.kmt()&&this.yo(new yY)}umt(t){if(sa(t,"audio")){if(this.P2.Z4)return this.P2.Z4}else if(sa(t,"video")&&this.P2.H4)return this.P2.H4;throw new g("Cannot allocate source buffer for mime type "+t)}Lmt(t){t.yn([ac.ua,Qi.pp,Qi.Mp,Qi.Tp,Qi.Np,Qi.Gm],this.Ds),t.yn(W.ZK,this.xmt),t.yn("bmt",this.Ds)}get Rt(){return this.vft.some((t=>t.Rt))}async Cmt(t){await Promise.all(this.vft.map((i=>i.gn(t)))),Or(this.vft)}get ht(){return this.oP}get KI(){if(0===this.vft.length)return ge.cR();const t=this.vft.map((t=>t.KI));let i=ge.uR(0,1/0);for(const e of t)i=i.Sn(e);if(0===i.U)return i;if(this.Cct()){const t=i.Sn(this.jct);if(0===t.U)return i;const e=t.jn(t.U-1);let s=0;for(const t of this.vft)s=x.max(s,t.Zwt);e<=s&&(i=i.WO(new ge([e,s],[!0,!0])))}return i}get X6(){return this.jR.X6}get sD(){return this.jR.sD}get emt(){return this.jmt}get jn(){if(this.Omt){const t=this.ct;if(!j(t)&&t!==ef)return t}if(!this.vft.length)return NaN;let t=0;for(const i of this.vft)t=x.max(t,i.jn);return t}get Omt(){const t=this.Nmt.ydt;if(t.Hw===Mo.mU)return!1;const i=t.Rmt;return 0!==i.length&&this.Nmt===i[i.length-1]}get PD(){if(!this.vft.length)return ge.cR();let t=new ge([0,1/0]);for(const i of this.vft)t=t.Sn(i.PD);if(t.U>0&&this.Omt&&isFinite(this.ct)){const i=this.ct,e=t.jn(t.U-1);i>e&&(t=t.WO(ge.uR(e,i).UO()))}return t}get wc(){return this.Nmt}get nt(){return this.Ol}get rt(){return this.aP}get ji(){return this.bu.ji}get Ti(){return this.bu.Ti}get BF(){const t=this.sD,i=this.KI,e=i.XO(t);if(-1!==e)return{Cn:i.Cn(e),jn:i.jn(e)}}get jct(){const t=this.Nmt.Cn,i=this.Omt?1/0:this.Nmt.jn;return ge.uR(t,i)}kmt(){if(this.Fat())return!1;if(!this.Cct())return!1;const t=this.KI;if(0===t.U)return!1;const i=this.sD;if(this.Omt)return t.Cn(t.U-1)<=i;{const e=t.Sn(this.jct);if(0===e.U)return!0;const s=e.Cn(e.U-1),n=e.jn(e.U-1)+.1;return s<=i&&i<=n}}get Pmt(){return this.zmt}async Xat(t){this.zmt||(this.zmt=!0,await Promise.all(this.vft.map((i=>i.Xat(t)))))}async Kat(t){this.zmt&&(this.zmt=!1,await Promise.all(this.vft.map((i=>i.Kat(t)))))}async gn(t){this.jR.fn(Qi.kp,this.Bmt),this.jR.fn(Qi.Hm,this.Umt),this.Bo(),this.Nmt.fn(Xi.pat,this.Ds),this.Qmt.Dm(),this.lmt&&(await this.lmt.catch(ul),this.lmt=void 0),await this.Cmt(t),await this.Imt.gn(),this.oP.gn(),this.aP.gn(),this.Ol.gn(),this.Fmt()}Tmt(t){this.Ymt.push(t),t.yn("Vmt",this.Gmt);const i=t.Hw===Q.tN?this.oP:this.aP;for(const e of t.Z)i.tt(e)}Wmt(t){const i=t.Hw===Q.tN?this.oP:this.aP;for(const e of t.Z)i.it(e),e.gn();t.gn(),Ro(this.Ymt,t)}Fmt(){for(let t=this.Ymt.length-1;t>=0;t--)this.Wmt(this.Ymt[t])}get Zmt(){return this.Ymt.map((t=>t.fht)).filter(Rt)}get Hmt(){return this.vft.map((t=>t.fht)).filter(Rt)}$n(t,i){return this.Qmt.Dm(),this.Qmt=Ai.xm([i]),this.lmt=Te(this.ON(t,this.lmt,this.Qmt.wm),this.Qmt).catch(this.Xmt),this.lmt}async ON(t,i,e){i&&await i.catch(ul),re(e);const s=[],n=this.vft.slice(),r=t.slice();Or(this.vft);for(const t of n){const i=t.fht;i&&fh(r,i)?(this.vft.push(t),s.push(t.$n(i,e)),Ro(r,i)):(this.Ol.xF(t.nt),await t.gn(),re(e))}for(const t of r){const i=this.Dmt(t.jat);this.Ol.EF(i.nt),this.vft.push(i),this.Lmt(i),s.push(i.$n(t,e))}await Promise.all(s)}async hJ(t,i,e){this.P2!==e&&(this.P2=e,await this.Cmt(!1)),await this.$n(t),this.jmt=i}async qmt(t){for(const i of this.vft){const e=i.fht;if(void 0!==e)for(const s of e.Sct.Nht){(s.yF||[]).some((i=>i.nQ&&ks(Ae(t),xC(i.nQ))))&&!s.Kdt&&(s.Kdt=!0,await i.Odt(s,s.bat),this.yo(new Qs(new ti(Do.CONTENT_PROTECTION_OUTPUT_RESTRICTED,"Content unavailable due to DRM restrictions"))))}}}async Kmt(t){for(const i of this.vft){const e=i.fht;if(void 0!==e)for(const s of e.Nht){const e=s.yF,n=s.bat;if(void 0===e||0===e.length||void 0===n)continue;const r=this.Jmt(e,t.Op);n.Fnt!==r&&(r?i.zdt(n):await i.Odt(s,n))}}}Jmt(t,i){let e=!1;return i.tA(((i,s)=>{t.some((t=>t.nQ&&ks(Ae(s),xC(t.nQ))))&&"usable"===i&&(e=!0)})),e}Jat(t){if(void 0===t)return;const i=t.Nmt;if(this.Nmt.$mt===i||this.Nmt.tpt===i)for(const i of this.vft){const e=So(t.vft,(t=>t.s4===i.s4));void 0!==e&&i.Jat(e)}}constructor(t,i,e,s,n,r,o,h,a,u,c,l,d,f){var g,_;super(),this.oP=new $e,this.aP=new $e,this.Ymt=[],this.Qmt=new Ai,this.zmt=!0,this.vft=[],this.lmt=void 0,this.xmt=Gu((()=>{this.yo(new mO(this.sD))}),350),this.Gmt=t=>{const i=t.ipt.fht;if(i)for(const t of this.Ymt){var e;t.fht&&t.fht!==i&&t.Hw===(null==(e=i.Qdt)?void 0:e.Hw)&&(t.fn("Vmt",this.Gmt),t.fht.Rt=!1,t.yn("Vmt",this.Gmt))}this.Ds(t)},this.Xmt=t=>{F(t)||this.yo(new As(NA(t,Do.MEDIA_LOAD_ERROR)))},this.Bmt=t=>{const i=t.M6;i&&this.qmt(i).catch(this.Xmt)},this.ept=t=>{this.Kmt(t).catch(this.Xmt)},this.Umt=t=>{const i=t.M6;if(i)for(const t of this.Hmt)for(const e of t.Sct.Nht){const s=(e.yF||[]).some((t=>t.nQ&&ks(Ae(i),xC(t.nQ))));e.Kdt&&s&&(e.Kdt=!1,e.bat&&t.zdt(e.bat))}},this.dU=e,this.dV=s,this.Xut=n,this.jR=t,this.SP=Xc(),this.Ymt=[],this.Nmt=o,this.jmt=h,this.eY=f,this.cU=u,this.Imt=new mY(t,e,s,n,u,null==(_=null==r||null==(g=r.dash)?void 0:g.segmentRelativeVttTiming)||_),this.Ol=new uu([this.Imt.nt]),this.hdt=l,this.fmt=d,this.Nmt.yn(Xi.pat,this.Ds),this.bu=a,this.P2=i,this.kdt=r.lowLatency,this.Kwt=c,this.Emt=r.abr,this.jR.yn(Qi.kp,this.Bmt),this.jR.yn(Qi.Hm,this.Umt)}};r(),r(),r();var JV=/^P(?:(\d+)Y)?(?:(\d+)M)?(?:(\d+)D)?(?:T(?:(\d+)H)?(?:(\d+)M)?(?:(\d*\.?\d*)S)?)?$/,$V=class t{static zx(i){const e=i.match(JV);if(!e)throw new g("The given value could not be parsed as a valid DateTimeInterval");const s=Number(e[1])||0,n=Number(e[2])||0,r=Number(e[3])||0,o=Number(e[4])||0,h=Number(e[5])||0,a=Number(e[6])||0;return new t(31536e3*s+2592e3*n+86400*r+3600*o+60*h+a)}get Pft(){return Fu.vB(this.spt,1e3)}npt(){return this.spt}rpt(){return 1e3*this.spt}constructor(t){this.spt=t}};r();var tG=function(t){return t.opt="progressive",t.hpt="interlaced",t.QS="unknown",t}({});r();var iG=class{_z(){return this.upt/this.cpt}constructor(t,i){this.upt=t,this.cpt=i}},eG=/^(?:true|false)$/i,sG=/^(-?)(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(?:Z|([+-])(\d{2}):(\d{2}))?$/;function nG(t){if(void 0!==t)return $V.zx(t)}function rG(t){if(void 0===t)return;const i=t.match(sG);if(!i)throw new g("The given value could not be parsed as a valid Date");const[,e,s,n,r,o,h,a,u,c,l,d]=i,f=("-"===e?-1:1)*Number(s),_=Number(n)-1,v=Number(r),w=Number(o);let m=Number(h);const p=Number(a),A=Number("0."+(u||"")),y=x.round(1e3*A);if(c){m-=("-"===c?-1:1)*(60*Number(l)+Number(d))}const b=new Date(Date.UTC(f,_,v,w,m,p,y));if(j(b.getTime()))throw new g("The given value could not be parsed as a valid Date");return b}function oG(t){if(!t)return;const i=/(\d+)-(\d+)/.exec(t);return i?[Uh(i[1]),Uh(i[2])]:void 0}function hG(t){if(void 0!==t){if(!j(Number(t)))try{return Io.fromString(t,!0)}catch(t){}throw new g("The given value could not be parsed as a valid unsigned long")}}function Uh(t){if(void 0===t)return;const i=Number(t);if(!j(i))return i;throw new g("The given value could not be parsed as a valid Number")}function aG(t){if(void 0===t)return;const i=t.split("/"),e=Number(i[0]),s=Number(i[1]||1);if(!j(e)&&!j(s))return new iG(e,s);throw new g("The given value could not be parsed as a valid frame rate")}function Nt(t){if(void 0!==t){if(eG.test(t))return"true"===t.toLowerCase();if(!j(C(t)))return Boolean(C(t));throw new g("The given value could not be parsed as a valid Boolean.")}}function uG(t){return{Hu:t.MI,lpt:Nt(t.TI("availabilityTimeComplete")),dpt:Uh(t.TI("availabilityTimeOffset"))}}function cG(t){return t.map(uG)}function lG(t){const i=yG(t),e=function(t,i,e,s){let n=t.SI(e,i);return void 0===n&&(n=t.TI(s+":"+i)),n}(t,"default_KID","urn:mpeg:cenc:2013","cenc");let s;const n=AE(t,"pssh","urn:mpeg:cenc:2013","cenc")[0];if(void 0!==n&&(s=Qw(n.MI)),!s){const i=AE(t,"pro","urn:microsoft:playready","mspr")[0];void 0!==i&&(s=function(t){const i=Vs(t.MI),e=new T([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),s=i.length,n=12+e.length+4+s,r=new ArrayBuffer(n),o=new T(r),h=new DataView(r),a=new J;zc(h,a,n),zc(h,a,1886614376),zc(h,a,0),gw(h,a,e),zc(h,a,s),gw(h,a,i),!1;return o.buffer}(i))}return{nQ:e,t9:s,J6:i.J6,lI:i.lI}}function dG(t){return{fpt:t.TI("sourceURL"),wut:oG(t.TI("range"))}}function fG(t,i){const e=t.TI("d"),s=t.TI("t"),n=Uh(t.TI("r"));i.push({ct:e,OP:s,gpt:n})}function gG(t){return{tct:t.TI("index"),_pt:oG(t.TI("indexRange")),aC:t.TI("media"),vpt:oG(t.TI("mediaRange"))}}function _G(t){const i=wG(t),e=function(t){const i=t.map(gG);return i.length>0?i:void 0}(t.wI("SegmentURL"));return il({},i,{wpt:e,mpt:t.TI("xlink:href"),ppt:t.TI("xlink:actuate")})}function vG(t){const i=Nt(t.TI("availabilityTimeComplete")),e=Uh(t.TI("availabilityTimeOffset")),s=oG(t.TI("indexRange")),n=Nt(t.TI("indexRangeExact")),r=t.wI("Initialization");if(r.length>1)throw new g("The provided MPEG-DASH document's "+t.mI+" element can not have more than one Initialization element.");const o=1===r.length?dG(r[0]):void 0,h=hG(t.TI("presentationTimeOffset")),a=t.wI("RepresentationIndex");if(a.length>1)throw new g("The provided MPEG-DASH document's "+t.mI+" element can not have more than one RepresentationIndex element.");return{lpt:i,dpt:e,_pt:s,Apt:n,ypt:o,bpt:h,Mpt:1===a.length?dG(a[0]):void 0,Tpt:nG(t.TI("timeShiftBufferDepth")),eC:Uh(t.TI("timescale"))}}function wG(t){const i=vG(t),e=t.wI("BitstreamSwitching"),s=e.length>0?dG(e[0]):void 0,n=Uh(t.TI("duration")),r=t.wI("SegmentTimeline");if(r.length>1)throw new g("The provided MPEG-DASH document's "+t.mI+" element can not have more than one SegmentTimeline element.");const o=1===r.length?function(t){const i=[],e=t.wI("S");for(const t of e)fG(t,i);return i}(r[0]):void 0;return il({},i,{Spt:s,ct:n,jot:o,Npt:Uh(t.TI("startNumber")),Ipt:Uh(t.TI("endNumber"))})}function mG(t){return{Dpt:function(t){if(!t)return;const i=t.split(/\s/);return i.length>1?(i.length=2,i.map(Uh)):1===i.length?i.map(Uh)[0]:void 0}(t.TI("audioSamplingRate")),Qrt:t.TI("codecs"),Ept:Nt(t.TI("codingDependency")),yF:function(t){if(0!==t.length)return t.map(lG)}(t.wI("ContentProtection")),kpt:function(t){return t.map(bG)}(t.wI("EssentialProperty")),Lpt:function(t){return t.map(MG)}(t.wI("SupplementalProperty")),oft:aG(t.TI("frameRate")),Ti:Uh(t.TI("height")),xpt:Uh(t.TI("maxPlayoutRate")),Cpt:Uh(t.TI("maximumSAPPeriod")),GZ:t.TI("mimeType"),jpt:t.TI("profiles"),Opt:t.TI("sar"),Rpt:function(t){switch(t){case tG.opt:case tG.hpt:case tG.QS:return t;default:return}}(t.TI("scanType")),Ppt:t.TI("segmentProfiles"),zpt:Uh(t.TI("startWithSAP")),ji:Uh(t.TI("width"))}}function pG(t){const i=cG(t.wI("BaseURL")),e=t.wI("SegmentBase");if(e.length>1)throw new g("The provided MPEG-DASH document's "+t.hI+" element can not have more than one SegmentBase element.");const s=1===e.length?vG(e[0]):void 0,n=function(t){const i=t.map(_G);return i.length>0?i:void 0}(t.wI("SegmentList")),r=t.wI("SegmentTemplate");if(r.length>1)throw new g("The provided MPEG-DASH document's "+t.hI+" element can not have more than one SegmentTemplate element.");const o=1===r.length?function(t){return il({},wG(t),{Bpt:t.TI("bitstreamSwitching"),Upt:t.TI("index"),Qpt:t.TI("initialization"),Fpt:t.TI("media")})}(r[0]):void 0;return{Ypt:i,Vpt:s,Gpt:n,Wpt:o}}function AG(t){const i=mG(t),e=pG(t),s=Uh(t.TI("bandwidth")),n=t.TI("dependencyId"),r=t.TI("id"),o=t.TI("mediaStreamStructureId"),h=Uh(t.TI("qualityRanking"));if(t.wI("SegmentBase").length>1)throw new g("The provided MPEG-DASH document's Representation element can not have more than one SegmentBase element.");return il({},i,e,{mF:s,Zpt:n,o:r,Hpt:o,Xpt:h})}function yG(t){return{J6:t.TI("schemeIdUri"),lI:t.TI("value")}}function bG(t){return yG(t)}function MG(t){return yG(t)}function TG(t){return yG(t)}function SG(t){return yG(t)}function NG(t){var i;const e=mG(t),s=pG(t),n=function(t){return t.map(SG)}(t.wI("Accessibility")),r=Nt(t.TI("bitstreamSwitching")),o=t.TI("contentType"),h=Uh(t.TI("group")),a=Uh(t.TI("id")),u=(null==(i=t.wI("Label")[0])?void 0:i.MI)||"",c=t.TI("lang"),l=Uh(t.TI("maxBandwidth")),d=aG(t.TI("maxFrameRate")),f=Uh(t.TI("maxHeight")),_=Uh(t.TI("maxWidth")),v=Uh(t.TI("minBandwidth")),w=aG(t.TI("minFrameRate")),m=Uh(t.TI("minHeight")),p=Uh(t.TI("minWidth")),A=t.TI("par"),y=function(t){return t.map(AG)}(t.wI("Representation"));if(0===y.length)throw new g("The provided MPEG-DASH document has an AdaptationSet with no valid Representation's");const b=function(t){return t.map(TG)}(t.wI("Role")),M=Nt(t.TI("segmentAlignment"))||!1,T=Uh(t.TI("selectionPriority")),S=T||1,N=Nt(t.TI("subsegmentAlignment"))||!1;let I;try{I=Uh(t.TI("subsegmentStartsWithSAP"))}catch(t){}return il({},e,s,{xdt:n,Spt:r,vS:o,Qdt:h,o:a,wh:u,gs:c,qpt:l,Kpt:d,Jpt:f,$pt:_,tAt:v,iAt:w,eAt:m,sAt:p,nAt:A,Nht:y,lft:b,rAt:M,RY:S,oAt:N,hAt:I,aAt:t.TI("xlink:actuate")||"onRequest",uAt:t.TI("xlink:href")})}function IG(t){const i=hG(t.TI("presentationTime"))||Io.ZERO,e=hG(t.TI("duration")),s=Uh(t.TI("id")),n=function(t){const i=t.bI,e={};for(let t=0;t<i.length;t++)e[i[t].l]=i[t].lI;return e}(t),r=t.MI;return{aO:i,ct:e,o:s,bI:n,xS:""!==r.trim()?r:t.TI("messageData")||""}}function DG(t){return{uAt:t.TI("xlink:href"),aAt:t.TI("xlink:actuate"),J6:t.TI("schemeIdUri"),lI:t.TI("value"),eC:Uh(t.TI("timescale")),bpt:hG(t.TI("presentationTimeOffset")),WZ:t.wI("Event").map(IG)}}function EG(t){const i=pG(t),e=t.wI("AssetIdentifier");if(e.length>1)throw new g("The provided MPEG-DASH document's Period element can not have more than one AssetIdentifier element.");const s=1===e.length?function(t){return yG(t)}(e[0]):void 0,n=function(t){return t.map(NG)}(t.wI("AdaptationSet")),r=Nt(t.TI("bitstreamSwitching")),o=nG(t.TI("duration")),h=function(t){return t.map(DG)}(t.wI("EventStream")),a=t.TI("id"),u=nG(t.TI("start")),c=(t.wI("Subset"),t.TI("xlink:href"));return il({},i,{wht:n,cAt:s,Spt:r,ct:o,lAt:h,o:a,Cn:u,aAt:t.TI("xlink:actuate"),uAt:c})}function kG(t){const i=t.TI("schemeIdUri");if(!i)return;return{J6:i,lI:t.TI("value")}}function LG(t,i){const e=rG(t.TI("availabilityEndTime")),s=rG(t.TI("availabilityStartTime")),n=cG(t.wI("BaseURL")),r=t.TI("id"),o=function(t){return t.map((t=>""+t.MI))}(t.wI("Location")),h=nG(t.TI("maxSegmentDuration")),a=nG(t.TI("maxSubsegmentDuration")),u=nG(t.TI("mediaPresentationDuration")),c=(t.wI("Metrics"),nG(t.TI("minBufferTime")));if(!c)throw new g("The provided MPEG-DASH document's MPD element does not have the required 'minimumBufferTime' attribute.");const l=nG(t.TI("minimumUpdatePeriod")),d=function(t){return t.map((t=>EG(t)))}(t.wI("Period"));if(!d.length)throw new g("The provided MPEG-DASH document's MPD element does not have the required 'Period' element.");const f=t.TI("profiles");if(!f)throw new g("The provided MPEG-DASH document's MPD element does not have the required 'profiles' attribute.");const _=rG(t.TI("publishTime")),v=nG(t.TI("suggestedPresentationDelay")),w=nG(t.TI("timeShiftBufferDepth")),m=function(t){switch(t){case Mo.wU:case Mo.mU:return t;default:return}}(t.TI("type")),p=function(t){const i=[];for(const e of t){const t=kG(e);t&&i.push(t)}return i}(t.wI("UTCTiming")),A=function(t){if(0===t.length)return;const i=t[0],e=i.wI("Latency");if(0===e.length)return;const s=function(t){const i=t[0],e=Uh(i.TI("target"));if(void 0===e)return;const s=Uh(i.TI("min")),n=Uh(i.TI("max"));return{dAt:e,lB:s,cB:n}}(e);if(void 0===s)return;const n=function(t){if(0===t.length)return;const i=t[0],e=Uh(i.TI("max")),s=Uh(i.TI("min"));return{lB:s,cB:e}}(i.wI("PlaybackRate"));return{fAt:s,ND:n}}(t.wI("ServiceDescription"));return{gAt:e,_At:s,Ypt:n,o:r,vAt:o,wAt:i,mAt:h,pAt:a,AAt:u,yAt:c,bAt:l,Rmt:d,jpt:f,MAt:_,TAt:v,Tpt:w,Hw:m,SAt:p,NAt:A}}var xG=class{IAt(t,i){return function(t,i){if(!t)throw new g("The provided MPEG-DASH document does not contain a valid MPD root element.");return LG(t,i)}(me.oI(t).kI,i)}};function CG(t){return{get bandwidth(){return t.mF},get codecs(){return t.Qrt},get id(){return t.o},get uid(){return t.dk},get name(){return t.wh},get averageBandwidth(){return t.DAt},get label(){return t.wh},set label(i){t.wh=To(i)},get available(){return t.Fnt},get score(){return t.EAt},addEventListener(i,e){t.yn(i,e)},removeEventListener(i,e){t.fn(i,e)}}}function jG(t){return Gr(CG(t),{get height(){return t.Ti},get width(){return t.ji},get frameRate(){return t.oft},get firstFrame(){return t.kAt}})}function Vi(t){return Gr(CG(t),{get audioSamplingRate(){return t.Dpt}})}r(),r(),r(),r(),r(),r(),r(),r();var OG=class extends Gs{constructor(t){super("update"),this.quality=t}},RG=class extends Bo{get wh(){return this.NP}set wh(t){this.NP!==t&&(this.NP=t,this.yo(new OG(this.ga)))}get DAt(){}get Fnt(){return this.LAt}get EAt(){}hU(){this.LAt=!1,this.yo(new OG(this.ga))}oU(){this.LAt=!0,this.yo(new OG(this.ga))}constructor(t,i,e,s,n){super(),this.o=t,this.mF=i,this.Qrt=e,this.xAt=n,this.dk=HI(),this.NP=s||"",this.LAt=!0}},PG=class extends RG{get ga(){return this.Za||(this.Za=jG(this)),this.Za}constructor(t,i,e,s,n,r,o,h,a=0){super(t,i,e,s,n),this.oft=r,this.ji=o,this.Ti=h,this.kAt=a,this.Za=void 0}},zG=class extends RG{get ga(){return this.Za||(this.Za=Vi(this)),this.Za}constructor(t,i,e,s,n,r){super(t,i,e,s,n),this.Dpt=r,this.Za=void 0}};r(),r();var Su=class extends Bo{get CAt(){const t=this.jAt();return null==t?void 0:t.Cn}get OAt(){const t=this.jAt();return null==t?void 0:t.jn}constructor(...t){super(...t),this.RAt=t=>{this.yo(t)}}},BG=class extends Su{get Sct(){return this.Zat}get Dpt(){var t;return null!=(t=this.PAt.xS.Dpt)?t:this.Sct.Dpt}get mF(){return this.PAt.xS.mF||0}get Qrt(){const t=this.PAt.xS;return t.Qrt?[t.Qrt]:this.Sct.Qrt}get zAt(){const t=this.PAt.xS;return t.Qrt?[t.Qrt]:[]}get Uv(){return this.PAt.xS.Qrt||this.Sct.Uv}get Ept(){return this.PAt.xS.Ept||this.Sct.Ept}get yF(){return this.PAt.xS.yF||this.Sct.yF}get vS(){return this.GZ+'; codecs="'+this.Uv+'"'}get kpt(){const t=this.PAt.xS;return t.kpt.length?t.kpt:this.Sct.kpt}get ga(){return this.Za||(this.Za=function(t){return{get id(){return t.o},get type(){return t.Hw},get bandwidth(){return t.mF},get width(){return t.ji},get height(){return t.Ti},get frameRate(){var i,e;return null!=(e=null==(i=t.oft)?void 0:i._z())?e:NaN},get audioSamplingRate(){return t.Dpt}}}(this))}get oft(){var t;return null!=(t=this.PAt.xS.oft)?t:this.Sct.oft}get Ti(){return this.PAt.xS.Ti||this.Sct.Ti}get o(){return this.PAt.xS.o||""}get Sdt(){return this.BAt}set Sdt(t){this.BAt=t}get Tdt(){const t=this.PAt.UAt();if(t)return{Hu:t.Hu,wut:t.wut,dN:this.ydt.dN}}get xpt(){return this.PAt.xS.xpt||this.Sct.xpt||1}get Cpt(){return this.PAt.xS.Cpt||this.Sct.Cpt}get ydt(){return this.ult.ydt}get GZ(){return this.PAt.xS.GZ||this.Sct.GZ}get ult(){return this.Sct.ult}get jpt(){return this.PAt.xS.jpt||this.Sct.jpt}get bat(){return this.QAt}get Opt(){return this.PAt.xS.Opt||this.Sct.Opt}get Rpt(){return this.PAt.xS.Rpt||this.Sct.Rpt}get FAt(){return this.PAt.FAt}get Ppt(){return this.PAt.xS.Ppt||this.Sct.Ppt}get jot(){return this.PAt.jot}get zpt(){return this.PAt.xS.zpt||this.Sct.zpt}get Hw(){const t=this.GZ.split("/")[0];return"application"===t||"text"===t||HE(this.GZ,this.Qrt)?Q.KM:"video"===t?Q.iN:"audio"===t?Q.tN:"image"===t?Q.eN:Q.QS}get ji(){return this.PAt.xS.ji||this.Sct.ji}get flt(){return this.YAt}set flt(t){this.YAt=t}get Kdt(){return this.VAt}set Kdt(t){this.VAt=t}Slt(t){const i=zs(t)?this.PAt.GAt(t):this.PAt.Slt(t);return{Hu:i.Hu,wut:i.wut,dN:this.ydt.dN}}WAt(){return this.PAt.WAt()}jAt(){return this.PAt.jAt()}ZAt(){return this.PAt.ZAt()}_lt(t){return this.PAt._lt(t)}wlt(t,i,e){return this.PAt.wlt(t,this.ydt.dN,i,e)}udt(t){return zs(t)?this.jot.HAt(t,this.PAt):this.jot.udt(t)}hlt(t){return zs(t)?this.jot.XAt(t,this.PAt):this.jot.hlt(t)}gn(){this.PAt.fn(Xi.wat,this.RAt)}constructor(t,i){if(super(),this.Za=void 0,this.BAt=void 0,this.YAt=!1,this.VAt=!1,this.Zat=t,this.PAt=i,this.PAt.yn(Xi.wat,this.RAt),this.Hw===Q.iN){var e,s;const t=null!=(s=null==(e=this.oft)?void 0:e._z())?s:NaN;this.QAt=new PG(this.o,this.mF,this.Uv,"","",t,this.ji,this.Ti)}else this.Hw===Q.tN?this.QAt=new zG(this.o,this.mF,this.Uv,"","",this.Dpt):this.QAt=void 0}},UG=class extends Su{get xdt(){return this.PAt.xS.xdt}get Dpt(){var t;return null!=(t=this.PAt.xS.Dpt)?t:-1}get Qrt(){if(this.PAt.xS.Qrt)return[this.PAt.xS.Qrt];{const t=[];for(const i of this.Nht)i.zAt.length&&-1===t.indexOf(i.Uv)&&t.push(i.Uv);return t}}get Uv(){return this.Qrt.join()}get Ept(){return this.PAt.xS.Ept}get yF(){return this.PAt.xS.yF}get vS(){return this.GZ+'; codecs="'+this.Uv+'"'}get kpt(){return this.PAt.kpt}get Lpt(){return this.PAt.Lpt}get oft(){return this.PAt.xS.oft}get Qdt(){return this.PAt.xS.Qdt}get Ti(){return this.PAt.xS.Ti||0}get o(){return this.PAt.xS.o}get wh(){return this.PAt.xS.wh||""}get xpt(){return this.PAt.xS.xpt}get Cpt(){return this.PAt.xS.Cpt}get ydt(){return this.ult.ydt}get GZ(){return this.PAt.xS.GZ||this.Wdt[0].GZ}get ult(){return this.Nmt}get jpt(){return this.PAt.xS.jpt}get Nht(){return this.Wdt}get lft(){return this.PAt.xS.lft||[]}get Opt(){return this.PAt.xS.Opt}get Rpt(){return this.PAt.xS.Rpt}get Ppt(){return this.PAt.xS.Ppt}get RY(){return this.PAt.xS.RY}get zpt(){return this.PAt.xS.zpt}get Hw(){const t=(this.PAt.xS.vS||this.GZ).split("/")[0];return"application"===t||"text"===t||"subtitle"===t||HE(this.GZ,this.Qrt)?Q.KM:"video"===t?Q.iN:"audio"===t?Q.tN:"image"===t?Q.eN:Q.QS}get ji(){return this.PAt.xS.ji||0}get Utt(){return this.PAt.xS.gs||""}get aft(){return this.CAt}get hft(){const t=this.aft,i=this.OAt;if(void 0===t||void 0===i)return;const e=x.min(i,this.ydt.qAt);return x.max(t,e)}async Yn(t,i){if(0===this.Wdt.length){const e=this.PAt.Nht.map((e=>this.KAt(e,t,i)));this.Wdt=(await Promise.all(e)).filter(Rt)}this.JAt()}async KAt(t,i,e){const s=new BG(this,t),n=await i(s);if(re(e),n)return s}JAt(){if(!this.Wdt.length)throw new g("Detected an AdaptationSet without any supported Representations.")}jAt(){return this.PAt.jAt()}ZAt(){return this.PAt.ZAt()}gn(){this.PAt.fn(Xi.wat,this.RAt);for(const t of this.Wdt)t.gn();Or(this.Wdt)}constructor(t,i){super(),this.Wdt=[],this.Nmt=t,this.PAt=i,this.PAt.yn(Xi.wat,this.RAt)}};function QG(t,i){const e=[];for(const s of i)for(const i of t)e.push(me.Ah(i,s));return e}r(),r(),r(),r(),r(),r(),r();var FG=class{$At(t){const i=t-this.Nmt.Cn;if(i<0||i>=this.Nmt.ct)return;const e=this.tyt();return void 0!==e&&Xs(e,i,1e-5)?this.iyt():this.eyt(i)}glt(t){const i=t-this.Nmt.Cn;if(!(i<0))return this.syt(x.min(i,this.Nmt.ct))}iyt(){return this.nyt(0)}ryt(){const t=this.Nmt.ct;if(isFinite(t))return this.syt(t)}get oyt(){return this.Nmt.ayt.hyt&&void 0!==this.uyt()}WAt(t){if(this.Nmt.ayt.Hw===Mo.mU){if(this.oyt){const i=this.iyt(),e=this.uyt();if(void 0===i||void 0===e)return;return{cyt:t,lyt:i,dyt:e}}const i=this.fyt(t);if(!i)return;return{cyt:t,lyt:this.gyt(t),dyt:i}}{0;const i=this.iyt();if(i)return{cyt:t,lyt:i,dyt:this.ryt()}}}ZAt(t,i){if(i){let t=this.bdt(i.lyt);const e=this.blt(i.dyt);if(e){const i=this.Mdt(e);(!t||i.getTime()<t.getTime())&&(t=i)}return t}{const i=this.iyt();if(i){const e=this.Mdt(i);if(t.getTime()<e.getTime())return e}const e=this.Nmt.ayt._At;return t.getTime()<e.getTime()?e:void 0}}fyt(t){const i=(t.getTime()-this.Nmt.ayt._At.getTime())/1e3-this.Nmt.Cn+this._yt;let e=this.syt(rh(i,0,this.Nmt.ct));if(!e)return;if(e=this.vyt(e,t),!e)return;let s=this.blt(e);for(;s&&this.Edt(s,t);)e=s,s=this.blt(e);return e}gyt(t){let i;const e=this.wyt.Tpt;if(e){const s=(t.getTime()-this.Nmt.ayt._At.getTime())/1e3-this.Nmt.Cn-e.npt();i=this.syt(rh(s,0,this.Nmt.ct)),i||(i=this.iyt())}else i=this.iyt();if(!i)return;if(i=this.vyt(i,t),!i)return;let s=this.ylt(i);for(;s&&this.Edt(s,t);)i=s,s=this.ylt(i);return i}vyt(t,i){let e=t;for(;e&&this.Mdt(e).getTime()>i.getTime();)e=this.ylt(e);if(!e)return;const s=this.bdt(e);if(s&&s.getTime()<=i.getTime()){const t=this.ylt(e);for(t&&this.Edt(t,i)&&(e=t);e;){if(this.Mdt(e).getTime()>i.getTime())return;if(this.Edt(e,i))break;e=this.blt(e)}if(!e)return}return e}Edt(t,i){if(this.oyt)return!0;if(this.Mdt(t).getTime()>i.getTime())return!1;const e=this.bdt(t);return!(e&&i.getTime()>=e.getTime())}myt(t,i){if(this.oyt)return!0;if(this.pyt(t).getTime()>i.getTime())return!1;const e=this.bdt(t);return!(e&&i.getTime()>=e.getTime())}Ayt(t,i,e){const s=mt(i,this.JA)+this.Nmt.Cn;return{tct:t,yyt:i,OP:s,ct:e,RP:s+e}}pyt(t){return this.Nmt.ayt.Hw===Mo.mU?new Date(this.Nmt.ayt._At.getTime()+1e3*(t.OP+t.ct)):this.Nmt.ayt._At}Mdt(t){const i=this.pyt(t);return this.Nmt.ayt.Hw===Mo.mU?new Date(i.getTime()-1e3*this._yt):i}bdt(t){let i=1/0;if(this.Nmt.ayt.Hw===Mo.mU){const e=this.wyt.Tpt;e&&(i=this.pyt(t).getTime()+1e3*t.ct+e.rpt())}const e=this.Nmt.ayt.gAt;return e&&(i=x.min(i,e.getTime())),i===1/0?void 0:new Date(i)}byt(t,i){return t.tct+i}get RB(){return this.Nmt.Cn-mt(this.Myt,this.JA)}get bpt(){return mt(this.Myt,this.JA)}_lt(t){return!1}wlt(t,i,e,s,n){const r=this.Tyt(t);if(!r)return Promise.reject(new g("Invalid segment"));const o=this.Syt(r.tct,i);return o?Promise.resolve(o):Ic(this.Nyt(r.tct,i,e,s),n)}Syt(t,i){}Nyt(t,i,e,s){return Promise.reject(new g("Not supported"))}ylt(t){const i=this.Tyt(t);if(i)return this.nyt(i.tct-1)}blt(t){const i=this.Tyt(t);if(i)return this.nyt(i.tct+1)}Tyt(t){const i=this.nyt(t.tct);if(i&&i.OP===t.OP)return i;const e=this.$At(t.OP);return e&&e.OP===t.OP?e:void 0}Iyt(t,i){const e=this.plt(t);if(!e||!this._lt(e.tct))return;const s=this.Syt(e.tct,i);return s?s.Iyt(t):void 0}plt(t){return this.nyt(t.Dyt)}udt(t){const i=this.Tyt(t);return!!i&&0===i.tct}HAt(t,i){const e=this.Iyt(t,i);return!!e&&0===e.$ut}hlt(t){const i=this.Tyt(t);if(!i)return!1;const e=this.ryt();return!!e&&i.tct===e.tct}XAt(t,i){const e=this.Iyt(t,i);if(!e)return!1;const s=this.ryt();if(!s||e.Dyt!==s.tct)return!1;const n=this.Syt(e.Dyt,i);return e.$ut+1===n.U}Mm(){}constructor(t,i){this.Nmt=t,this.wyt=i,this.JA=i.eC,this._yt=i.dpt,this.Myt=i.bpt}},YG=class extends FG{nyt(t){if(t<0)return;const i=this.Eyt.multiply(t),e=mt(i,this.JA),s=this.Nmt.ct;if(e>=s)return;const n=this.kyt();if(void 0!==n){if(t>n)return;if(t===n&&isFinite(s))return this.Ayt(t,i,s-e)}return isFinite(s)&&e+this.Lyt>s?this.Ayt(t,i,s-e):this.Ayt(t,i,this.Lyt)}tyt(){return 0}eyt(t){const i=x.floor(t/this.Lyt),e=this.kyt();return void 0!==e&&i>=e?this.nyt(e):this.nyt(i)}syt(t){if(t>=this.Nmt.ct){const t=x.ceil(this.Nmt.ct/this.Lyt)-1,i=this.kyt();return void 0!==i&&t>=i?this.nyt(i):this.nyt(t)}return this.eyt(t)}kyt(){const t=this.wyt.Ipt;var i;if(void 0!==t)return t-(null!=(i=this.wyt.Npt)?i:1);const e=this.wyt.xyt;return void 0!==e&&e>0?e-1:void 0}uyt(){if(isFinite(this.Nmt.ct))return this.ryt()}Cyt(t,i){return this.Eyt.multiply(t.tct+(i-1))}Yn(){}constructor(t,i){super(i,t);const e=t.jyt,s=t.ct;if(void 0===e||void 0===s)throw new g("MultipleSegmentBase does not have a segment duration specified.");this.Eyt=e,this.Lyt=s}};function VG(t,i,e){const s=i.length;if(0===s)return-1;let n=0,r=s-1,o=t.Oyt(i[n]),h=t.Ryt(i[r]);for(;n<=r&&t.Pyt(o,e)<=0&&t.Pyt(e,h)<0;){const a=n+x.floor(t.zyt(e,o,h)*(r-n)),u=i[a],c=t.Oyt(u),l=a+1<s?t.Oyt(i[a+1]):t.Ryt(u);if(t.Pyt(l,e)<=0)n=a+1,o=l;else{if(!(t.Pyt(e,c)<0))return a;r=a-1,h=c}}return-1}function GG(t,i){return VG(WG.K_,t,i)}r(),r(),r();var WG=class t{static get K_(){return null!=this.Urt||(this.Urt=new t),this.Urt}Oyt(t){return t.OP}Ryt(t){return t.RP}Pyt(t,i){return t.compare(i)}zyt(t,i,e){return t.subtract(i).toNumber()/e.subtract(i).toNumber()}},ZG=.01,HG=class extends FG{nyt(t){if(!(t<0))return t<this.Byt.length?this.Byt[t].Zut:this.Uyt(t-this.Byt.length)}tyt(){if(this.Byt.length>0)return mt(this.Byt[0].OP,this.JA)}eyt(t){if(this.Qyt&&mt(this.Qyt.OP,this.JA)<=t){const i=mt(this.Qyt.OP,this.JA),e=mt(this.Qyt.ct,this.JA),s=x.floor((t-i)/e);return this.Uyt(s)}if(this.Byt.length>0&&Xs(t,mt(this.Byt[0].OP,this.JA),1e-5))return this.Byt[0].Zut;const i=GG(this.Byt,Io.fromNumber(t*this.JA));return i<0?void 0:this.Byt[i].Zut}syt(t){if(!this.Qyt&&this.Byt.length>0){const i=this.Byt[this.Byt.length-1];if(function(t,i,e){return yv(t,i,e)>=0}(t,mt(i.RP,this.JA),1e-5))return i.Zut}const i=this.tyt();return i&&t<i?this.Byt[0].Zut:this.eyt(t)}uyt(){return isFinite(this.Nmt.ct)?this.ryt():this.nyt(this.Byt.length-1)}Cyt(t){return this.Fyt(t)}Uyt(t){if(!this.Qyt)return;const i=this.Qyt.OP,e=this.Qyt.ct,s=i.add(e.multiply(t)),n=mt(s,this.JA),r=this.Nmt.ct;if(n>=r)return;const o=this.Byt.length+t,h=x.min(mt(e,this.JA),n+r);return this.Ayt(o,s,h)}Fyt(t){return t.yyt.add(this.Myt)}Yn(){const t=this.wyt.xS.jot;if(!t)throw new g("MultipleSegmentBaseTO does not have a SegmentTimeline specified.");this.Yyt(t)}Yyt(t){const i=this.Myt;this.Vyt(t,i);const e=this.Gyt(t);this.Wyt(t,i,e.Zyt,e.Dyt)}Vyt(t,i){const e=this.Byt;if(0===t.length)Or(e);else{const s=t[0];let n=0;const r=mt(s.OP?Io.fromString(s.OP,!1).subtract(i):Io.ZERO,this.JA);for(;n<e.length&&mt(e[n].OP,this.JA)<r-ZG;)n++;n>0&&e.splice(0,n)}}Gyt(t){const i=this.Byt,e=this.Mwt;let s=0,n=0;for(;s<t.length&&n<i.length;){const r=t[s].gpt||0;if(r<0)break;const o=n+r;if(o>=i.length)break;if(i[o].OP.greaterThanOrEqual(e))break;if(i[n].Zut.tct===n)n=o+1;else for(;n<=o;)i[n].Zut.tct=n,n++;0,s++}return{Zyt:s,Dyt:n}}Wyt(t,i,e,s){const n=this.Byt;let r,o=e,h=s;for(;o<t.length;){const e=t[o],s=Io.fromString(e.ct,!1),a=e.gpt||0;let u;if(e.OP){if(u=Io.fromString(e.OP,!1).subtract(i),h>0){const t=n[h-1];t.RP.greaterThan(u)&&(t.ct=u.subtract(t.OP),t.RP=t.OP.add(t.ct))}}else u=h>0?n[h-1].RP:Io.ZERO;if(a<0){if(o+1===t.length){r={OP:u,ct:s};break}const e=Io.fromString(t[o+1].OP,!1).subtract(i);for(;u.lessThan(e);){const t=u.add(s);this.Hyt(n,h,u,s,t),u=t,h++}}else{const t=h+a;for(;h<=t;){const t=u.add(s);this.Hyt(n,h,u,s,t),u=t,h++}}o++}h<n.length&&n.splice(h),n.length>0&&(this.Mwt=n[n.length-1].OP),this.Qyt=r}Hyt(t,i,e,s,n){if(i<t.length){const r=t[i];0,r.ct.equals(s)?r.Zut.tct=i:t[i]={OP:e,ct:s,RP:n,Zut:this.Ayt(i,e,mt(s,this.JA))}}else t.push({OP:e,ct:s,RP:n,Zut:this.Ayt(i,e,mt(s,this.JA))})}constructor(t,i){super(i,t),this.Byt=[],this.Qyt=void 0,this.Mwt=Io.ZERO,this.Yn()}};r();var XG=class{get xS(){return this.Hv}get dpt(){return this.Hv&&void 0!==this.Hv.dpt?this.Hv.dpt:this.Xyt?this.Xyt.dpt:0}get bpt(){return this.Hv&&void 0!==this.Hv.bpt?this.Hv.bpt:this.Xyt?this.Xyt.bpt:Io.ZERO}get Tpt(){return this.Hv&&void 0!==this.Hv.Tpt?this.Hv.Tpt:this.Xyt?this.Xyt.Tpt:this.ult.ayt.Tpt}get eC(){return this.Hv&&void 0!==this.Hv.eC?this.Hv.eC:this.Xyt&&this.Xyt.eC?this.Xyt.eC:1}get _pt(){return this.Hv&&void 0!==this.Hv._pt?this.Hv._pt:this.Xyt?this.Xyt._pt:void 0}get ypt(){return this.Hv&&void 0!==this.Hv.ypt?this.Hv.ypt:this.Xyt?this.Xyt.ypt:void 0}get jot(){return this.qyt||(this.qyt=this.Kyt()),this.qyt}Kyt(){if(this.Jyt=this.$yt(),this.Jyt)return this.Jyt;if(this.Xyt)return this.Xyt.jot;throw new g("Missing media segment information.")}UAt(t){const i=this.ypt;if(i){return{Hu:(void 0!==i.fpt?me.Ah(i.fpt,t.Ypt[0]):t.Ypt[0]).href,wut:i.wut}}const e=this._pt;if(e)return{Hu:t.Ypt[0].href,wut:[0,e[0]-1]}}Yn(t){this.Hv=t,this.Jyt&&this.Jyt.Yn()}Mm(){this.Jyt&&(this.Jyt.Mm(),this.Jyt=void 0)}constructor(t,i,e){this.qyt=void 0,this.Jyt=void 0,this.ult=t,this.Xyt=i,this.Hv=e}},qG=class extends XG{get ct(){return void 0!==this.Hv.ct?this.Hv.ct/this.eC:this.Xyt&&KG(this.Xyt)?this.Xyt.ct:void 0}get jyt(){return void 0!==this.Hv.ct?Io.fromNumber(this.Hv.ct):this.Xyt&&KG(this.Xyt)?this.Xyt.jyt:void 0}get Npt(){return void 0!==this.Hv.Npt?this.Hv.Npt:this.Xyt&&KG(this.Xyt)?this.Xyt.Npt:void 0}get Ipt(){return void 0!==this.Hv.Ipt?this.Hv.Ipt:this.Xyt&&KG(this.Xyt)?this.Xyt.Ipt:void 0}$yt(){return void 0!==this.Hv.jot?new HG(this,this.ult):void 0!==this.Hv.ct?new YG(this,this.ult):void 0}};function KG(t){return t instanceof qG}r();var JG=class{eA(t){return this.tbt.replace(/\$\$|\$(RepresentationID|Number|Bandwidth|Time)(?:%0(\d+)([diuxXo]))?\$/g,((i,e,s,n)=>{if("$$"===i)return"$";const r=t[e];if(void 0===r)return i;if(void 0===s)return r.toString();let o=function(t,i){switch(i){case"d":case"i":case"u":return t.toString(10);case"x":return t.toString(16);case"X":return t.toString(16).toUpperCase();case"o":return t.toString(8);default:return}}(r,n);return void 0===o?i:(o=$h(o,Number(s),"0"),o)}))}constructor(t){this.tbt=t}};var $G=class t extends qG{get Qpt(){return this.ibt?this.ibt:this.Xyt&&this.Xyt instanceof t?this.Xyt.Qpt:void 0}get Fpt(){return this.ebt?this.ebt:this.Xyt&&this.Xyt instanceof t?this.Xyt.Fpt:void 0}UAt(t){const i=this.Qpt;if(!i)return super.UAt(t);const e=i.eA({Bandwidth:t.xS.mF,RepresentationID:t.xS.o});return{Hu:me.Dw(e,t.Ypt[0])}}Slt(t,i){var e;const s=null!=(e=i.FAt.Npt)?e:1,n=this.Fpt.eA({Bandwidth:i.xS.mF,Number:i.jot.byt(t,s),RepresentationID:i.xS.o,Time:i.jot.Cyt(t,s)});return{Hu:me.Dw(n,i.Ypt[0])}}GAt(t,i){}get xyt(){}constructor(t,i,e){super(t,i,e),this.ibt=e.Qpt?new JG(e.Qpt):void 0,this.ebt=e.Fpt?new JG(e.Fpt):void 0}};r();var tW=class t extends qG{Slt(t,i){const e=this.wpt[t.tct],s=i.Ypt[0];let n;return n=e.aC?me.Ah(e.aC,s):s,{Hu:n.href,wut:e.vpt}}GAt(t,i){}get wpt(){return void 0!==this.Hv.wpt?this.Hv.wpt:this.Xyt&&this.Xyt instanceof t?this.Xyt.wpt:void 0}get xyt(){var t;return null==(t=this.wpt)?void 0:t.length}};r(),r(),r(),r();var iW=class{Iyt(t){const i=this.Alt(t.$ut);if(i&&i.OP===t.OP)return i;const e=this.sbt(t.OP);return e&&e.OP===t.OP?e:void 0}},eW=class extends iW{get U(){return this.nbt.length}Alt(t){if(t>=0&&t<this.U)return this.rbt(this.nbt[t])}sbt(t){const i=this.obt(t);if(this.nbt.length>0){const t=this.nbt[0];if(i<=mt(t.OP,this.eC))return this.rbt(t)}const e=GG(this.nbt,Io.fromNumber(i*this.eC));if(!(e<0))return this.rbt(this.nbt[e])}vlt(t){const i=this.obt(t);if(this.nbt.length>0){const t=this.nbt[this.nbt.length-1];if(i>=mt(t.RP,this.eC))return this.rbt(t)}return this.sbt(t)}rbt(t){const i=mt(t.OP,this.eC)-this.bpt,e=i+this.hbt,s=mt(t.ct,this.eC);return{Dyt:this.Dyt,$ut:t.tct,OP:e,yyt:Io.fromNumber(i*this.eC),ct:s,RP:e+s,abt:[t.ubt,t.cbt]}}obt(t){return t-this.hbt+this.bpt}constructor(t,i,e,s,n){super(),this.Dyt=t,this.eC=i,this.hbt=e,this.bpt=s,this.nbt=n}};r(),r(),r();var sW=class t{Gvt(){return this.nx.tc<this.xS.byteLength}lbt(){const i=this.dbt(),e=this.fbt(),s=this.nx.tc,n=this.xS.byteLength;let r;r=t.gbt(e)?n-s:t._bt(e);const o=s+r<=n?r:n-s,h=wi(this.xS,this.nx,o);return new rW(i,Os(h))}dbt(){const t=this.fbt();if(t.length>7)throw new RangeError("Invalid EBML ID size");let i=0;for(let e=0;e<t.length;e++)i=256*i+t[e];return i}fbt(){const t=ha(this.xS,this.nx.Wp());if(0===t)throw new RangeError("EBML variable sized integer is invalid");const i=8-(31-sw(t));return me.fw(i<=8&&i>=1,"Incorrect log2 value"),wi(this.xS,this.nx,i)}static _bt(t){if(8===t.length&&224&t[1])throw new w("EBML variable sized integer is too large");let i=0;for(let e=0;e<t.length;e++){const s=t[e];if(0===e){i=s&(1<<8-t.length)-1}else i=256*i+s}return i}static gbt(t){for(const i of nW)if(ks(t,new T(i)))return!0;return!1}constructor(t){this.xS=t,this.nx=new J}},nW=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]],rW=class{vbt(){return this.wbt.byteOffset}mbt(){return new sW(this.wbt)}pbt(){const t=this.wbt.byteLength;if(t>8)throw new RangeError("EMBL integer field size is too large");if(8===t&&224&this.wbt.getUint8(0))throw new RangeError("EMBL integer field value is too large");let i=0;for(let e=0;e<t;e++){i=256*i+this.wbt.getUint8(e)}return i}vK(){if(4===this.wbt.byteLength)return this.wbt.getFloat32(0);if(8===this.wbt.byteLength)return this.wbt.getFloat64(0);throw new RangeError("Invalid size for EMBL floating-point field")}constructor(t,i){this.id=t,this.wbt=i}};function oW(t,i){const e=function(t){const i=new sW(Os(t)),e=i.lbt();if(e.id!==aW)throw new w("Missing WebM EBML header");const s=i.lbt();if(s.id!==uW)throw new w("Missing WebM SegmentElement");const n=s.vbt(),r=function(t){const i=t.mbt();let e;for(;i.Gvt();){const t=i.lbt();if(t.id===cW){e=t;break}}if(!e)throw new w("Missing WebM InfoElement");return function(t){const i=t.mbt();let e,s=1e6;for(;i.Gvt();){const t=i.lbt();t.id===lW?s=t.pbt():t.id===dW&&(e=t.vK())}if(void 0===e)throw new w("Missing Duration in WebM InfoElement");const n=s/1e9,r=e*n;return{timecodeScale:n,duration:r}}(e)}(s);return{segmentOffset:n,timecodeScale:r.timecodeScale,duration:r.duration}}(i),s=new sW(Os(t)).lbt();if(s.id!==fW)throw new w("Missing WebM CuesElement");const n=function(t,i,e,s){const n=[],r=t.mbt();let o,h;for(;r.Gvt();){const t=r.lbt();if(t.id!==gW)continue;const e=hW(t);if(!e)continue;const s=e.unscaledTime,a=i+e.relativeOffset;void 0!==o&&n.push({tct:n.length,OP:o,ct:s.subtract(o),RP:s,ubt:h,cbt:a-1}),o=s,h=a}if(void 0!==o){0;const t=Io.fromNumber(s/e);n.push({tct:n.length,OP:o,ct:t.subtract(o),RP:t,ubt:h,cbt:void 0})}return n}(s,e.segmentOffset,e.timecodeScale,e.duration);return{eC:x.round(1/e.timecodeScale),Abt:n}}function hW(t){const i=t.mbt(),e=i.lbt();if(e.id!==_W)throw new w("Missing CueTime in WebM CuePointElement");const s=Io.fromNumber(e.pbt()),n=i.lbt();if(n.id!==vW)throw new w("Missing CueTrackPositions in WebM CuePointElement");const r=n.mbt();let o=0;for(;r.Gvt();){const t=r.lbt();if(t.id===wW){o=t.pbt();break}}return{unscaledTime:s,relativeOffset:o}}var aW=440786851,uW=408125543,cW=357149030,lW=2807729,dW=17545,fW=475249515,gW=187,_W=179,vW=183,wW=241,mW=class extends FG{nyt(t){if(0===t)return this.ybt}tyt(){return 0}eyt(t){return this.ybt}syt(t){return this.eyt(t)}uyt(){return this.ybt}Cyt(t,i){return Io.ZERO}WAt(t){const i=this.bbt(t);return i&&{cyt:t,lyt:i,dyt:i}}bbt(t){const i=this.ybt;return this.Edt(i,t)?i:void 0}fyt(t){return this.bbt(t)}gyt(t){return this.bbt(t)}Yn(){}_lt(t){return 0===t&&void 0!==this.Mbt}Syt(t,i){const e=i.Ypt[0].href;return this.Tbt.get(e)}Nyt(t,i,e,s){const n=i.Ypt[0].href;let r=this.Sbt.get(n);if(void 0===r){const o=i.GZ,h=this.Nbt.wm;if(ss(o))r=this.Ibt(t,n,e,s,h);else{if(!oA(o))throw new Ui(Do.MEDIA_NOT_SUPPORTED,"Unsupported MIME type for segment index: "+o);r=this.Dbt(t,n,i,e,s,h)}this.Sbt.set(n,r)}return r}async Ibt(t,i,e,s,n){const r=this.Mbt,o=await s.Qlt(i,r,e,n),h=this.Ebt(t,o);return this.Tbt.set(i,h),h}Ebt(t,i){const e=this.Mbt,s=Lu.Dx(new DataView(i),new J);if(s.Hw!==Fo.KL)throw new g("Invalid segment index");const n=tn.Hx(s.xS),r=function(t,i){const e=[];let s=t.MO,n=i+t.TO.toNumber(),r=0;for(const i of t.IO){const t=i.mO,o=Io.fromNumber(i.ct),h=s.add(o);0===i.wO&&e.push({tct:r++,OP:s,ct:o,RP:h,ubt:n,cbt:n+t-1}),n+=t,s=h}return e}(n,e[1]+1);return new eW(t,n.eC,this.Nmt.Cn,mt(this.Myt,this.JA),r)}async Dbt(t,i,e,s,n,r){const o=e.UAt(),h=this.Mbt,a=n.Qlt(o.Hu,o.wut,s,r),u=n.Qlt(i,h,s,r),[c,l]=await Promise.all([a,u]),d=this.kbt(t,l,c);return this.Tbt.set(i,d),d}kbt(t,i,e){const s=oW(new T(i),new T(e));return new eW(t,s.eC,this.Nmt.Cn,mt(this.Myt,this.JA),s.Abt)}Mm(){super.Mm(),this.Nbt.Dm()}constructor(t,i){super(i,t),this.Tbt=Ge(),this.Sbt=Ge(),this.Nbt=new Ai,this.Mbt=t._pt,this.ybt=this.Ayt(0,Io.ZERO,this.Nmt.ct)}},pW=class extends XG{get Npt(){}Slt(t,i){return{Hu:i.Ypt[0].href}}GAt(t,i){return{Hu:i.Ypt[0].href,wut:t.abt}}$yt(){return new mW(this,this.ult)}};r();var AW=class extends Gs{constructor(){super(Xi.wat)}};r();var yW=class extends Bo{get xS(){return this.Hv}get Ypt(){return this.Lbt}xbt(){var t,i;return null!=(i=this.wyt)?i:null==(t=this.UN)?void 0:t.xbt()}Cbt(t){const i=this.ult,e=this.UN&&this.UN.xbt();this.Hv.Wpt?this.wyt=new $G(i,e,this.Hv.Wpt):this.Hv.Gpt?this.wyt=new tW(i,e,this.Hv.Gpt[0]):this.Hv.Vpt?this.wyt=new pW(i,e,this.Hv.Vpt):t&&!e&&(this.wyt=new pW(i,e,void 0))}jbt(t,i){this.Hv=t,this.Lbt=t.Ypt&&t.Ypt.length>0?QG(t.Ypt.map((t=>t.Hu)),i):i.slice(),this.wyt&&(t.Wpt?this.wyt.Yn(t.Wpt):t.Gpt?this.wyt.Yn(t.Gpt[0]):t.Vpt&&this.wyt.Yn(t.Vpt))}jAt(){var t;return null==(t=this.Obt)?void 0:t.Rbt}ZAt(){var t;return null==(t=this.Obt)?void 0:t.Pbt}zbt(t){const i=this.Bbt,e=this.ult.ct,s=this.Obt,n=this.Ubt(t);s&&Xs(e,i,1e-5)&&SW(s,n)||(this.Bbt=e,this.Obt=n,this.yo(new AW))}Mm(){this.Bo(),this.wyt&&(this.wyt.Mm(),this.wyt=void 0)}constructor(t,i,e){super(),this.wyt=void 0,this.Bbt=1/0,this.Obt=void 0,this.UN=i,this.jbt(t,e)}};function bW(t){let i,e;for(const e of t){const t=e.jAt();if(t){i=t.Cn;break}}if(void 0!==i){for(let i=t.length-1;i>=0;i--){const s=t[i].jAt();if(s){e=s.jn;break}}return void 0!==e?{Cn:i,jn:e}:void 0}}function MW(t){if(0===t.length)return;let i=0,e=1/0;for(const s of t){const t=s.jAt();if(!t)return;if(i=x.max(i,t.Cn),e=x.min(e,t.jn),i>=e)return}return{Cn:i,jn:e}}function TW(t){let i;for(const e of t){const t=e.ZAt();t&&(!i||t.getTime()<i.getTime())&&(i=t)}return i}function SW(t,i){return function(t,i){return t&&i?t.getTime()===i.getTime():t===i}(t.Pbt,i.Pbt)&&function(t,i){return t&&i?Xs(t.Cn,i.Cn,1e-5)&&Xs(t.jn,i.jn,1e-5):t===i}(t.Rbt,i.Rbt)}var NW=class extends Su{get wht(){return this.Qbt}get Qrt(){return this.wht.reduce(((t,i)=>{for(const e of i.Qrt)fh(t,e)||t.push(e);return t}),[])}get Uv(){return this.Qrt.length>0?this.Qrt[0]:""}get Hw(){return this.Qbt[0].Hw}get o(){return this.Nb}get ydt(){return this.Nmt.ydt}get GZ(){return this.Qbt[0].GZ}get ult(){return this.Nmt}get Nht(){return Qr(this.wht,(t=>t.Nht))}jAt(){return MW(this.Qbt)}ZAt(){let t;for(const i of this.Qbt){const e=i.ZAt();e&&(!t||e.getTime()<t.getTime())&&(t=e)}return t}gn(){this.Bo();for(const t of this.Qbt)t.fn(Xi.wat,this.RAt)}constructor(t,i,e){super(),this.Nmt=t,this.Nb=i,this.Qbt=e.slice();for(const t of e)t.yn(Xi.wat,this.RAt)}};r();var IW=class extends Gs{constructor(){super(Xi.pat)}};function DW(t){const i=[];for(const e of t){let t;const s=e.Qdt;void 0===s||(t=So(i,(t=>t.o===s))),t||(t={o:s,wht:[]},i.push(t)),t.wht.push(e)}return i}r();var EW=class extends Su{get wht(){return this.Qbt}get Smt(){return this.Fbt}get cAt(){return this.PAt.xS.cAt}get ct(){return this.PAt.ct}get jn(){return this.Cn+this.ct}get lAt(){return this.PAt.xS.lAt||[]}get o(){return this.PAt.o}get Aat(){return this.Ybt}get ydt(){return this.Vbt}get tpt(){return this.Vbt.Gbt(this)}get ult(){return this}get $mt(){return this.Vbt.Wbt(this)}get Zbt(){return this.Hbt(1/0,x.min)}get Xbt(){return this.Hbt(0,x.max)}Hbt(t,i){if(0===this.Fbt.length)return;let e=t;for(const t of this.Fbt)if(QN(t.Hw)){const s=t.OAt;if(void 0===s)return;e=i(e,s)}return e}get Cn(){return this.PAt.Cn}get dN(){return this.ydt.dN}qbt(){this.Ybt||(this.Ybt=!0,this.yo(new IW),this.gn())}async Yn(t,i){0===this.Qbt.length?(await this.Kbt(this.PAt.wht,t,i),this.Jbt(this.Qbt),re(i)):await this.$bt(t,i)}async Kbt(t,i,e){for(const s of t){const t=new UG(this,s);try{await t.Yn(i,e),this.Qbt.push(t)}catch(t){wh(t)}}}Jbt(t){const i=DW(t);for(const t of i){const i=new NW(this,t.o,t.wht);this.Fbt.push(i)}}async $bt(t,i){for(const e of this.Qbt)await e.Yn(t,i)}jAt(){return this.PAt.jAt()}ZAt(){return this.PAt.ZAt()}gn(){this.Bo(),this.PAt.fn(Xi.wat,this.RAt);for(const t of this.Fbt)t.gn();for(const t of this.Qbt)t.gn();Or(this.Qbt),Or(this.Fbt)}constructor(t,i){super(),this.Qbt=[],this.Fbt=[],this.Ybt=!1,this.Vbt=t,this.PAt=i,this.PAt.yn(Xi.wat,this.RAt)}};r();var kW=class extends Gs{constructor(){super(Qi.dp)}};r(),r();var LW=function(t){return t.tMt="iMt",t}({}),xW=class extends Gs{constructor(){super(LW.tMt)}};r(),r(),r(),r();var CW=class extends yW{get Sct(){return this.Zat}get ult(){return this.Zat.ult}get ayt(){return this.Zat.ayt}get GZ(){return this.Hv.GZ||this.Zat.GZ}get FAt(){return this.xbt()}get jot(){return this.FAt.jot}_lt(t){const i=this.GZ;return!(!ss(i)&&!oA(i))&&this.jot._lt(t.tct)}wlt(t,i,e,s){return this.jot.wlt(t,this,i,e,s)}UAt(){return this.FAt.UAt(this)}Slt(t){return this.FAt.Slt(t,this)}GAt(t){return this.FAt.GAt(t,this)}WAt(){return this.eMt}Ubt(t){const i=this.jot,e=i.WAt(t),s=e&&function(t,i){const{lyt:e,dyt:s,cyt:n}=t,r=e.OP;let o;const h=i.pyt(s);if(h.getTime()<=n.getTime())o=s.RP;else{const t=(h.getTime()-n.getTime())/1e3,i=x.max(s.ct-t,0);o=s.OP+i}return{Cn:r,jn:o}}(e,i),n=this.jot.ZAt(t,e);return this.eMt=e,{cyt:t,Rbt:s,Pbt:n}}Yn(t){this.jbt(t,this.Zat.Ypt)}constructor(t,i){super(t,i,i.Ypt),this.eMt=void 0,this.Zat=i,this.Cbt(!0)}},jW=class extends yW{get Nht(){return this.Wdt}get ult(){return this.Nmt}get ayt(){return this.Nmt.ayt}get Qdt(){return this.Hv.Qdt}get GZ(){var t;return this.Hv.GZ||(null==(t=this.Wdt[0])?void 0:t.xS.GZ)||""}get kpt(){return this.xS.kpt}get Lpt(){return this.xS.Lpt}Yn(t){this.jbt(t,this.Nmt.Ypt);const i=t.Nht||[];if(this.Wdt.length!==i.length)throw new g("Expected "+this.Wdt.length+' representations in adaptation set "'+t.o+'", found '+i.length);for(let t=0;t<i.length;t++)this.Wdt[t].Yn(i[t])}zbt(t){for(const i of this.Wdt)i.zbt(t);super.zbt(t)}Ubt(t){return{cyt:t,Rbt:MW(this.Wdt),Pbt:TW(this.Wdt)}}Mm(){for(const t of this.Wdt)t.Mm();super.Mm()}constructor(t,i){super(t,i,i.Ypt),this.Nmt=i,this.Cbt(!1),this.Wdt=t.Nht.map((t=>new CW(t,this)))}},OW=class extends yW{get wht(){return this.Qbt}get Smt(){return this.Fbt}get ult(){return this}get ayt(){return this.sMt}get o(){return this.Hv.o}get Cn(){return this.XB}get ct(){return this.$A}Yn(t,i){this.jbt(t,this.sMt.Ypt),this.$A=i;const e=t.wht||[];if(this.Qbt.length!==e.length)throw new g("Expected "+this.Qbt.length+' adaptation sets in period "'+t.o+'", found '+e.length);for(let t=0;t<e.length;t++)this.Qbt[t].Yn(e[t])}zbt(t){for(const i of this.Qbt)i.zbt(t);super.zbt(t)}Ubt(t){return{cyt:t,Rbt:MW(this.Qbt),Pbt:TW(this.Qbt)}}Mm(){for(const t of this.Qbt)t.Mm();super.Mm()}constructor(t,i,e,s){super(i,void 0,t.Ypt),this.Fbt=[],this.sMt=t,this.XB=e,this.$A=s,this.Cbt(!1),this.Qbt=(i.wht||[]).map((t=>new jW(t,this))),this.Fbt=DW(this.Qbt)}};r();var RW=class{get nMt(){return this.rMt.fAt.lB}get oMt(){return this.rMt.fAt.cB}get hMt(){return this.rMt.fAt.dAt}get aMt(){var t;return null==(t=this.rMt.ND)?void 0:t.lB}get uMt(){var t;return null==(t=this.rMt.ND)?void 0:t.lB}constructor(t){this.rMt=t}},PW=new Date("2000-01-01"),zW=class extends Bo{get xS(){return this.Hv}get Hw(){return this.Hv.Hw||Mo.wU}get _At(){return this.cMt||this.Hv._At||this.MAt}get gAt(){return this.Hv.gAt}get hyt(){var t,i;return null!=(i=null==(t=this.lMt)?void 0:t.ignoreAvailabilityWindow)&&i}get AAt(){return this.dMt}get Ypt(){return this.Lbt}get vAt(){return this.fMt}get Rmt(){return this.gMt}get MAt(){return this.Hv.MAt||this.An}get Tpt(){return this.Hv.Tpt}get _Mt(){return this.vMt}get wMt(){return this.An}get NAt(){return this.rMt}jAt(){var t;return null==(t=this.Obt)?void 0:t.Rbt}ZAt(){var t;return null==(t=this.Obt)?void 0:t.Pbt}Yn(t,i,e,s){var n;const r=void 0!==this.Hv&&this.Hv.Hw===Mo.mU;this.Hv=t,this.vMt=null!=s?s:e,this.An=e;const o=[yT(i)];this.Lbt=t.Ypt&&t.Ypt.length>0?QG(t.Ypt.map((t=>t.Hu)),o):o,this.fMt=t.vAt&&t.vAt.length>0?QG(t.vAt,this.Lbt):[];const h=this.fMt.map((t=>t.href)),a=i.href;fh(h,a)||(this.fMt.push(i),h.push(a));const u=this.mMt.href;fh(h,u)||(this.fMt.push(this.mMt),h.push(u)),this.dMt=null==(n=t.AAt)?void 0:n.npt(),t.NAt&&(this.rMt=new RW(t.NAt));const c=t.Hw===Mo.mU,l=function(t,i,e){const s=[];for(let e=0;e<t.length;e++){const n=t[e];let r;if(n.Cn)r=n.Cn.npt();else if(e>0&&t[e-1].ct){r=s[e-1]+t[e-1].ct.npt()}else{if(0!==e||i)break;r=0}s.push(r)}const n=[];for(let i=0;i<s.length-1;i++)n.push({xS:t[i],Cn:s[i],ct:s[i+1]-s[i]});if(s.length>0){const r=s.length-1,o=t[r],h=s[r];let a=1/0;i||(a=o.ct?o.ct.npt():e-h),n.push({xS:o,Cn:h,ct:a})}return n}(t.Rmt,c,this.dMt);this.pMt(l,r,c),this.zbt(e)}pMt(t,i,e){const s=this.gMt;if(0===t.length)return void Or(s);const n=t[0].xS.o;let r=0;for(;r<s.length&&s[r].o!==n;)r++;const o=s.splice(0,r);for(const t of o)t.Mm();if(i&&!e&&s.length>0&&t.length>0){var h;const i=null!=(h=BW(s[0].xS))?h:Fu.Cz;var a;const e=null!=(a=BW(t[0].xS))?a:Fu.Cz;if(e.vz(i)){const n=e.Nz(i);void 0!==this.dMt&&(this.dMt+=n._z());for(let i=0;i<t.length;i++){const e=t[i];if(i<s.length){const t=s[i];e.Cn=t.Cn,VW(e.xS,t.xS)}i===t.length-1&&(e.ct+=n._z())}}}for(let i=0;i<t.length;i++){const e=t[i];if(i<s.length){const t=s[i];0,t.Yn(e.xS,e.ct)}else s.push(new OW(this,e.xS,e.Cn,e.ct))}}zbt(t){for(const i of this.gMt)i.zbt(t);const i=this.Obt,e=this.Ubt(t);i&&SW(i,e)||(this.Obt=e,this.yo(new AW))}Ubt(t){return{cyt:t,Rbt:bW(this.gMt),Pbt:TW(this.gMt)}}uyt(){if(0===this.gMt.length)return;const t=this.gMt[this.gMt.length-1];if(isFinite(t.ct))return;if(0===t.wht.length)return;const i=t.wht[0];if(0===i.Nht.length)return;const e=i.Nht[0].jot,s=e.uyt();return s?{Zut:s,gAt:e.bdt(s)}:void 0}Mm(){this.Bo();for(const t of this.gMt)t.Mm()}constructor(t,i,e,s,n){if(super(),this.Obt=void 0,this.dMt=void 0,this.cMt=void 0,this.gMt=[],this.mMt=i,this.lMt=n,this.Yn(t,e,s),t.Hw===Mo.mU){const t=this.uyt();t&&t.gAt&&t.gAt.getTime()<PW.getTime()&&(this.cMt=new Date(this.MAt.getTime()-1e3*(t.Zut.OP+t.Zut.ct)),this.zbt(s))}}};function BW(t){let i=FW(t);var e,s;for(const s of null!=(e=t.wht)?e:[])i=DD(i,UW(s));for(const e of null!=(s=t.lAt)?s:[])i=DD(i,YW(e));return i}function UW(t){let i=FW(t);for(const e of t.Nht)i=DD(i,QW(e));return i}function QW(t){return FW(t)}function FW(t){let i;if(void 0!==t.Wpt&&(i=DD(i,YW(t.Wpt))),void 0!==t.Vpt&&(i=DD(i,YW(t.Vpt))),void 0!==t.Gpt)for(const e of t.Gpt)i=DD(i,YW(e));return i}function YW(t){var i,e;return Fu.kz(null!=(i=t.bpt)?i:Io.ZERO,null!=(e=t.eC)?e:1)}function VW(t,i){if(ZW(t,i),t.Cn=i.Cn,void 0!==t.wht&&void 0!==i.wht&&t.wht.length===i.wht.length)for(let e=0;e<t.wht.length;e++)GW(t.wht[e],i.wht[e]);if(void 0!==t.lAt&&void 0!==i.lAt&&t.lAt.length===i.lAt.length)for(let e=0;e<t.lAt.length;e++)HW(t.lAt[e],i.lAt[e])}function GW(t,i){if(ZW(t,i),void 0!==t.Nht&&void 0!==i.Nht&&t.Nht.length===i.Nht.length)for(let e=0;e<t.Nht.length;e++)WW(t.Nht[e],i.Nht[e])}function WW(t,i){ZW(t,i)}function ZW(t,i){if(void 0!==t.Wpt&&void 0!==i.Wpt&&HW(t.Wpt,i.Wpt),void 0!==t.Vpt&&void 0!==i.Vpt&&HW(t.Vpt,i.Vpt),void 0!==t.Gpt&&void 0!==i.Gpt&&t.Gpt.length===i.Gpt.length)for(let e=0;e<t.Gpt.length;e++)HW(t.Gpt[e],i.Gpt[e])}function HW(t,i){t.eC=i.eC,t.bpt=i.bpt}r();var XW=class{async Aq(t){await this.AMt(t,this.dU,this.yMt,this.bMt).catch(bu)}Adt(){return new Date(Du()+this.MMt)}async AMt(t,i,e,s){let n;if(s&&(n=await this.TMt(i,s,e)),void 0===n){re(e);for(const s of t)if(n=await this.SMt(i,s,e),void 0!==n)break}this.MMt=void 0===n?0:n-Du()}async SMt(t,i,e){switch(i.J6){case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2012":case"urn:mpeg:dash:utc:http-iso:2014":{const s=i.lI;if(s)return await this.TMt(t,s,e);break}case"urn:mpeg:dash:utc:direct:2012":case"urn:mpeg:dash:utc:direct:2014":{const t=i.lI;if(t){const i=new Date(t).getTime();if(!j(i))return i}break}default:return}}async TMt(t,i,e){try{const s=await t.jS({Hu:i,hN:Ml.GET,CS:Me.KM,wm:e}),n=await s.dS(),r=new Date(n).getTime();if(!j(r))return r}catch(t){wh(t)}}constructor(t,i,e){this.dU=t,this.yMt=i,this.bMt=e,this.MMt=0}},qW=class extends Bo{get gAt(){return this.PAt&&this.PAt.gAt}get _At(){return this.PAt&&this.PAt._At}get hyt(){return this.PAt&&this.PAt.hyt}get o(){return this.PAt&&this.PAt.xS.o}get _Mt(){var t;return null==(t=this.PAt)?void 0:t._Mt}get NMt(){var t;return null==(t=this.PAt)?void 0:t.wMt}get vAt(){return this.PAt?this.PAt.vAt.map((t=>t.href)):[this.IMt]}get IMt(){return this.DMt.href}get mAt(){return this.PAt&&this.PAt.xS.mAt}get pAt(){return this.PAt&&this.PAt.xS.pAt}get AAt(){return this.PAt&&this.PAt.xS.AAt}get yAt(){return this.PAt&&this.PAt.xS.yAt}get bAt(){var t,i;const e=(null==(i=this.PAt)||null==(t=i.xS.bAt)?void 0:t.rpt())||0;return x.max(e,JW)}get bD(){return this.EMt}kMt(t){const i=this.bD;this.EMt=t,i!==this.bD&&this.yo(new xW)}get Rmt(){return this.gMt}get LMt(){return this.Hw===Mo.mU?this.qAt:this.xMt}get CMt(){const t=this.LMt;if(void 0!==t)for(const i of this.Rmt)if(i.Cn<=t&&i.jn>t)return i}get jpt(){return this.PAt&&this.PAt.xS.jpt}get MAt(){return this.PAt&&this.PAt.MAt}get Zbt(){for(let t=this.gMt.length-1;t>=0;t-=1){const i=this.gMt[t].Zbt;if(i)return i}}get qAt(){const t=this.Zbt;if(void 0===t)return;const i=t-this.jMt;return x.max(i,this.xMt)}get xMt(){for(const t of this.gMt){const i=t.CAt;if(void 0!==i)return i}}get dN(){return Boolean(this.OMt.dN)}get jMt(){var t,i;if(this.OMt.RMt&&this.Hw===Mo.mU)return this.OMt.RMt;const e=null==(i=this.PAt)||null==(t=i.xS.TAt)?void 0:t.npt();return void 0!==e?e:this.Hw===Mo.mU?1.5*this.yAt.npt():0}get Tpt(){return this.PAt&&this.PAt.Tpt}get Hw(){return this.PAt?this.PAt.Hw:void 0}get NAt(){var t;return null==(t=this.PAt)?void 0:t.NAt}async Yn(t,i,e){const s=[],n=[],r=t.wAt?me.Ah(t.wAt,this.DMt):this.DMt;void 0===this.PAt?(await this.PMt.Aq(t.SAt),this.PAt=new zW(t,this.DMt,r,this.Adt(),this.lMt),this.PAt.yn(Xi.wat,this.Ds)):this.PAt.Yn(t,r,this.Adt(),i);const o=this.PAt.Rmt;let h;if(0===o.length)h=this.gMt.slice(),Or(this.gMt);else{const t=o[0].o;let i=0;for(;i<this.gMt.length&&this.gMt[i].o!==t;)i++;h=this.gMt.splice(0,i);for(let t=0;t<o.length;t++){const i=o[t];let r;t<this.gMt.length?r=this.gMt[t]:(r=new EW(this,i),s.push(r)),n.push(r.Yn(this.zMt,e))}}await Promise.all(n),this.gMt.push(...s);for(const t of h)t.qbt();this.yo(new kW)}Adt(){return this.PMt.Adt()}Wbt(t){const i=this.gMt.indexOf(t);if(i>0)return this.gMt[i-1]}Gbt(t){const i=this.gMt.indexOf(t);if(i>=0&&i+1<this.gMt.length)return this.gMt[i+1]}jAt(){return this.PAt?this.PAt.jAt():void 0}ZAt(){return this.PAt&&this.PAt.ZAt()}zbt(t){this.PAt&&this.PAt.zbt(t)}gn(){this.Bo(),this.BMt=void 0,this.kMt(!1);for(const t of this.gMt)t.gn();Or(this.gMt),this.PAt&&this.PAt.Mm()}constructor(t,i,e,s,n){super(),this.PAt=void 0,this.EMt=!0,this.gMt=[],this.BMt=void 0,this.OMt=t,this.DMt=t.yk,this.zMt=i,this.dU=e,this.UMt=s,this.PMt=new XW(this.dU,this.UMt,this.OMt.QMt),this.lMt=n}},KW=class{get ydt(){return this.Vbt}constructor(t,i,e,s,n){this.Vbt=new qW(t,i,e,s,n)}},JW=1e3,$W=class{get Tr(){return this.PAt}get W(){return this.FMt||(this.FMt=this.ON(this.YMt.wm),xe(this.FMt)),this.FMt}async ON(t){this.PAt.ydt.yo(new Ti);try{await this.VMt(t),this.PAt.ydt.kMt(!0)}catch(t){throw wh(t),this.FMt=void 0,this.PAt.ydt.kMt(!1),new g("The provided MPEG-DASH document could not be loaded - "+t.message)}this.GMt=this.WMt(this.YMt.wm)}async WMt(t){try{for(;this.PAt.ydt.Hw===Mo.mU;)await Ic(this.ZMt,t)}catch(t){}}get ZMt(){return this.PAt.ydt.NMt&&this.PAt.ydt.Hw===Mo.mU?this.HMt(this.YMt.wm):this.W}async XMt(t){re(t);const i=this.qMt();if(i>0){const e=x.min(i,2147483647);await Bn(e,t)}try{await this.VMt(t),this.PAt.ydt.kMt(!0)}catch(t){throw new g("The provided MPEG-DASH manifest could not be loaded - "+t.message)}finally{this.KMt=void 0}}qMt(){const t=this.PAt.ydt.Adt().getTime()-this.PAt.ydt._Mt.getTime();return this.PAt.ydt.bAt-t}JMt(t){const i=this.PAt.ydt.ZAt();if(i){const e=i.getTime()-t.getTime();if(e>0)return e}this.PAt.ydt.zbt(t);const e=this.PAt.ydt.ZAt();return e?e.getTime()-t.getTime():NaN}async HMt(t){const i={stack:[],error:void 0,hasError:!1};try{null!=this.KMt||(this.KMt=this.XMt(t));const e=lo(i,Ai.xm([t]),!1),s=[this.KMt,this.$Mt(e.wm)].filter(Rt);await Promise.race(s).catch(bu)}catch(t){i.error=t,i.hasError=!0}finally{os(i)}}$Mt(t){const i=this.PAt.ydt.Adt(),e=this.JMt(i);if(!j(e)&&!this.Tr.ydt.hyt)return this.tTt(e,t)}async tTt(t,i){await Bn(t,i);const e=this.PAt.ydt.Adt();this.PAt.ydt.zbt(e)}async iTt(t,i){const e=await this.sTt.eTt(t,{},i);return(new xG).IAt(e.nTt,e.US)}gn(){return this.YMt.Dm(),this.GMt=void 0,this.FMt=void 0,this.KMt=void 0,this.PAt.ydt.gn(),Promise.resolve()}constructor(t,i,e,s,n){this.YMt=new Ai,this.VMt=async t=>{try{const i=this.PAt.ydt.Adt(),e=await this.iTt(this.PAt.ydt.vAt,t);await this.PAt.ydt.Yn(e,i,t)}catch(t){throw hn(t)&&this.PAt.ydt.kMt(!1),t}},this.sTt=s,this.PAt=new KW(t,i,e,this.YMt.wm,n)}};r(),r();var tZ=class extends Gs{constructor(t,i){super("Vmt"),this.ipt=t,this.fht=i}},iZ=class extends Bo{get fht(){return this.ght}get Hw(){return this.Wv}get Z(){return this.YE.slice()}oU(t){t&&this.ght!==t&&this.rTt(t)}hU(t){this.ght===t&&this.rTt(void 0)}rTt(t){this.ght=t,this.yo(new tZ(this,this.ght))}gn(){this.Bo();for(const t of this.YE)t.Qdt=void 0;Or(this.YE)}constructor(t,i){super(),this.ght=void 0,this.Wv=t,this.YE=i;for(const t of this.YE)t.Qdt=this}};r(),r(),r();var eZ=class extends Gs{constructor(t,i,e){super(Qi.$m),this.currentTime=t,this.initDataType=i,this.initData=e}};function sZ(t,i,e,s,n){let r=[],o=[];for(const t of i)t.Hw===Q.tN?r=r.concat(t.Z):t.Hw===Q.iN&&(o=o.concat(t.Z));return[nZ(t,r,e,s,null==n?void 0:n.preferredAudioCodecs),rZ(t,o,e,s,null==n?void 0:n.preferredVideoCodecs)].filter(Rt)}function nZ(t,i,e,s,n){const r=So(s||[],(t=>t.jat===Q.tN&&t.Rt)),o=[hZ(r,e,t),aZ(r),uZ(r),cZ(r,n),lZ(),t=>{const i=t.filter((t=>"main"===t.zt));return i.length>0?i:t}];return oZ(i,o)}function rZ(t,i,e,s,n){const r=So(s||[],(t=>t.jat===Q.iN&&t.Rt)),o=[hZ(r,e,t),cZ(r,n),lZ(),t=>{const i=t.filter((t=>"main"===t.zt));return i.length>0?i:t}];return oZ(i,o)}function oZ(t,i){if(0===t.length)return;let e=t;for(const t of i){if(1===e.length)return e[0];e=t(e)}return e[0]}function hZ(t,i,e){return s=>{const n=t?t.Sct.o:void 0;if(!Rt(n))return s;const r=null==i?void 0:i.cAt,o=e.cAt,h=r&&o&&r.lI===o.lI,a=So(s,(t=>t.Sct.o===n));return h&&a?[a]:s}}function aZ(t){return i=>{const e=t?t.gs:"",s=i.some((t=>""!==t.gs))?i.filter((t=>""!==t.gs)):i;if(""===e)return s;const n=s.filter((t=>t.gs===e));return n.length>0?n:s}}function uZ(t){return i=>{const e=t?t.zt:"";if(""===e)return i;const s=i.filter((t=>t.zt===e));return s.length>0?s:i}}function cZ(t,i){return t=>{if(i&&i.length>0)for(const e of i){const i=t.filter((t=>t.gk.FE.some((t=>_s(t.Qrt,e)))));if(i.length>0)return i}return t}}function lZ(){return t=>{let i=[],e=-1/0;for(const s of t){const t=s.Sct.RY;t>e?(e=t,i=[s]):t===e&&i.push(s)}return i}}r(),r();var dZ=function(t){return t.oTt="api",t.hTt="start",t}({});r();var fZ={maxRetries:3,minimumBackoff:1e3,maximumBackoff:1/0},gZ=class{aTt(t,i,e){const s=this.hdt.maxRetries===1/0?fZ:this.hdt;return _t((()=>this.uTt(t,i,e)),e,s.maxRetries,s.minimumBackoff,s.maximumBackoff)}async uTt(t,i,e){let s;for(const n of t)try{const t=new _e({Hu:n,CS:Me.KM,RS:i,dN:this.cTt,hN:Ml.GET,Hw:as.FS,cN:jo.QS,wm:e,aN:15e3,uN:5e3}),s=await this.dU.jS(t),r=await s.dS(e);return{nTt:r,lTt:n,US:s.US}}catch(t){s=t}throw s}constructor(t,i,e=fZ){this.dU=t,this.cTt=i,this.hdt=e}};r();var _Z=class{async eTt(t,i,e){let s;for(const n of this.dTt)try{return await n.eTt(t,i,e)}catch(t){wh(t),s=t}throw s}constructor(t){this.dTt=t}},vZ=class{async eTt(t,i,e){const s=await this.Xut.trt(t);if(s)return{nTt:s.data,lTt:s.locationURL,US:s.responseURL};throw new g("Manifest fetch from cache unsuccesful")}constructor(t){this.Xut=t}},wZ=class{async eTt(t,i,e){return await this.fTt.aTt(t,i,e)}constructor(t){this.fTt=t}};function mZ(t,i){return new _Z([new vZ(i),new wZ(t)])}var pZ=class{async eTt(t,i,e){const s=await this.sTt.eTt(t,i,e);return await this.gTt(s),s}async gTt(t){await this.Vd.crt({key:AQ(t.lTt),locationURL:Jt(t.lTt),responseURL:Jt(t.US),data:t.nTt,references:[this._Tt.o]})}constructor(t,i,e){this.sTt=t,this.Vd=i,this._Tt=e}};r();var AZ=class extends Gs{constructor(){super(Qi._p)}};r();var yZ=class extends Gs{constructor(){super(Qi.gp)}};r(),r();var le=class extends ik{vTt(t){return t.OD=ju.LOADED,this.tt(t),t}wTt(t){for(const i of this.Z.FE)if(i.wk===t)return i}constructor(){super()}};function bZ(t,i){return""===i?t:t+" "+i}r(),r(),r();var MZ=class extends Bh{get ga(){return this.Za||(this.Za=function(t){return Gr(ei(t),{get attributes(){return t.bI},get eventID(){var i;return""+(null!=(i=t.mTt)?i:"")}})}(this)),this.Za}tz(t){return this.O===t.O}constructor(t,i,e,s,n){super(t,i,e,!1,null==n?void 0:n.toString()),this.bI=s,this.mTt=n}},TZ=class extends le{pTt(t){const i=this.cU.dE(vs.tU,"","","",void 0,er.EVENT_STREAM);return i.wk=t,this.vTt(i),i}ATt(t,i,e){const s=t.J6;var n;const r=null!=(n=t.lI)?n:"";var o;const h=null!=(o=t.eC)?o:1;var a;const u=null!=(a=t.bpt)?a:Io.ZERO,c=bZ(s,r);let l=this.wTt(c);l||(l=this.pTt(c));for(const s of t.WZ)if(!SZ(s,l)){const t=NZ(s,h,u,i);t.RP>e&&l.fU(t)}}async $n(t){await this.tr(),this.sMt=t,this.sMt.yn(Qi.dp,this.yTt),this.yTt()}async tr(){this.sMt&&(this.sMt.fn(Qi.dp,this.yTt),this.sMt=void 0);for(const t of this.Z.FE)this.cU._U(t);await super.tr()}constructor(t){super(),this.sMt=void 0,this.yTt=()=>{var t,i;const e=null!=(i=null==(t=this.sMt.jAt())?void 0:t.Cn)?i:0;if(e>0)for(const t of this.Z.FE)$E(t,e);for(const t of this.sMt.Rmt)if(t.jn>e)for(const i of t.lAt)this.ATt(i,t,e)},this.cU=t}};function SZ(t,i){const e=t.o;if(void 0!==e){if(So(i.L.FE,(i=>i.mTt===e&&i.O===t.xS)))return!0}return!1}function NZ(t,i,e,s){const n=t.o,r=t.aO.toSigned().subtract(e),o=t.ct,h=t.xS,a=t.bI,u=r.toNumber()/i+s.Cn,c=o?o.toNumber()/i:void 0,l=void 0!==c?u+c:s.Xbt;return new MZ(u,l,h,a,n)}function IZ(t,i,e,s,n){const r=[],o=So(e,(t=>t.J6===B_));if(void 0===o)return;const h=o.lI?function(t){const i=t.split(":",1)[0];switch(i){case"cbcs":case"cenc":return i;default:return}}(o.lI.toLowerCase()):"cenc";if(void 0!==h){for(const t of e)if(t.J6!==B_)for(const i of rv(t.J6)){const e=n&&t.t9?[t.t9]:[];r.push({Gb:i,SF:e,NF:void 0,RQ:void 0})}if(r.length)return{sQ:t,nmt:{bTt:h,nQ:o.nQ},smt:r,MTt:i===Q.tN?s.slice():[],TTt:i===Q.iN?s.slice():[],s9:!1}}}function DZ(t,i){if(!t)return i;if(!i)return t;const e=[],s=Ge();var n;return EZ(e,s,t.smt),EZ(e,s,i.smt),{sQ:t.sQ,nmt:{bTt:t.nmt.bTt,nQ:null!=(n=t.nmt.nQ)?n:i.nmt.nQ},smt:e,MTt:kZ(t.MTt,i.MTt,fh),TTt:kZ(t.TTt,i.TTt,fh),s9:t.s9||i.s9||!1}}function EZ(t,i,e){for(const s of e){const e=s.Gb.Jw;let n;i.has(e)?(n=i.get(e),n.SF=kZ(n.SF,s.SF,LZ)):(n=il({},s),t.push(n),i.set(e,n))}}function kZ(t,i,e){const s=t.slice();for(const t of i)e(s,t)||s.push(t);return s}function LZ(t,i){for(const e of t)if(Mr(e,i))return!0;return!1}function xZ(t,i,e){let s;const n=t.yF;if(n){const r=t.GZ,o=[];for(const i of t.Qrt)o.push(r+'; codecs="'+i+'"');s=IZ(i||{},t.Hw,n,o,e)}for(const n of t.Nht)s=DZ(s,CZ(n,i,e));return s}function CZ(t,i,e){return IZ(i||{},t.Hw,t.yF||[],[t.vS],e)}function jZ(t){return t?t.smt.map((i=>{const e=OZ(t.sQ,i.Gb),s=t.nmt.bTt;return{Gb:i.Gb,SF:i.SF,RQ:i.RQ,MY:[{initDataTypes:[i.Gb.qw],audioCapabilities:RZ(t.MTt,s,null==e?void 0:e.audioRobustness),videoCapabilities:RZ(t.TTt,s,null==e?void 0:e.videoRobustness),persistentState:null==e?void 0:e.persistentState,distinctiveIdentifier:null==e?void 0:e.distinctiveIdentifier}]}})):[]}function OZ(t,i){switch(i.Hw){case Fs.Vw:return t.widevine;case Fs.Yw:return t.playready;case Fs.Ww:return t.fairplay;case Fs.Gw:return t.clearkey}}function RZ(t,i,e){if(0!==t.length)return t.map((t=>({contentType:t,encryptionScheme:i,robustness:e})))}function PZ(t,i){const e=t=>{const e=i.indexOf(t.Gb.Jw);return e>=0?e:i.length};return lt(t,((t,i)=>e(t)-e(i)))}r(),r();var zZ=class extends le{pTt(t){const i=this.cU.dE(vs.tU,t.o,"thumbnails","",!1,er.DEFAULT);return i.gN=P.Jn,this.vTt(i),i}async $n(t){await this.tr(),this.sMt=t,this.sMt.yn(Qi.dp,this.Yn),this.Yn()}STt(t){this.NTt(t),this.ITt()}ITt(){const t=[];for(const i of this.Z.FE)this.DTt(i)||t.push(i);for(const i of t)this.it(i)}NTt(t){const i=[];for(const e of this.Wdt)-1===t.indexOf(e)&&i.push(e);for(const t of i)Ro(this.Wdt,t)}async tr(){this.sMt&&(this.sMt.fn(Qi.dp,this.Yn),this.sMt=void 0);for(const t of this.Wdt)t.fn(Xi.wat,this.ETt);this.Wdt.length=0;for(const t of this.Z.FE)this.cU._U(t);await super.tr()}gn(){return this.ETt=void 0,super.gn()}kTt(){var t,i;const e=null!=(i=null==(t=this.sMt.jAt())?void 0:t.Cn)?i:0;if(e>0)for(const t of this.Z.FE)$E(t,e)}LTt(t){return this.Z.FE.some((i=>i.o===t.o))}xTt(t){return So(this.Z.FE,(i=>i.o===t.o))}DTt(t){return this.Wdt.some((i=>t.o===i.o))}constructor(t){super(),this.Wdt=[],this.Yn=()=>{const t=[];for(const i of this.sMt.Rmt)for(const e of i.wht)if(e.Hw===Q.eN&&e.Nht.length>0){const i=e.Nht[0];t.push(i),this.LTt(i)||this.pTt(i),-1===this.Wdt.indexOf(i)&&(this.Wdt.push(i),i.yn(Xi.wat,this.ETt)),this.CTt(i)}this.STt(t)},this.CTt=t=>{const i=this.xTt(t);i&&t&&i.gN!==P.Ch&&(this.kTt(),function(t,i){const e=t.jot,s=t.WAt();if(!s)return;const n=s.lyt,r=s.dyt,o=t.ji,h=t.Ti,[a,u]=function(t){for(const i of t)if(pr(i.J6,UZ)||pr(i.J6,QZ)){const t=i.lI.match(BZ);if(t){const[,i,e]=t;return[Number(i),Number(e)]}}return[1,1]}(t.kpt);let c=n;for(;c&&c.tct<=r.tct;){const s=t.FAt.ct||c.ct,n=FZ(i,c,t.Slt(c).Hu,o,h,a,u,s);for(const t of n)i.fU(t);c=e.blt(c)}}(t,i))},this.cU=t;const i=this;this.ETt=function(){i.CTt(this)}}},BZ=/^(\d+)x(\d+)$/,UZ="http://dashif.org/guidelines/thumbnail_tile",QZ="http://dashif.org/thumbnail_tile";function FZ(t,i,e,s,n,r,o,h){const a=[],u=i.OP,c=r*o,l=s/r,d=n/o,f=x.round(l),g=x.round(d),_=h/c;if(1===c){const i=u+_;return YZ(t,u,i,e)?a:[new Bh(u,i,e,!1)]}for(let s=0;s<o;s++)for(let n=0;n<r;n++){const o=u+(s*r+n)*_,h=o+_,c=e+"#xywh="+x.round(n*l)+","+x.round(s*d)+","+f+","+g;if(YZ(t,o,h,c)||a.push(new Bh(o,h,c,!1)),h>=i.RP)return a}return a}function YZ(t,i,e,s){return t.L.FE.some((t=>t.OP===i&&t.RP===e&&t.O===s))}r(),r(),r(),r();var VZ=class extends Bh{get hO(){return this.jTt}get lI(){return this.OTt}get RTt(){return this.PTt}get ga(){return this.Za||(this.Za=function(t){return Gr(ei(t),{get schemeIDURI(){return t.hO},get value(){return t.lI},get emsgID(){return t.RTt}})}(this)),this.Za}tz(t){return ks(this.O,t.O)}constructor(t,i,e,s,n,r){super(t,i,r,!1),this.jTt=e,this.OTt=s,this.PTt=n}},GZ=class t extends le{Ylt(i,e,s){const n=tn.zx(Os(i));if(!n)return;const r=function(t,i){const e=[];for(const s of t)gN(s,i)&&e.push(s);return e}(n,Fo.qL);if(r.length){const i=t.zTt(n,e,s);this.BTt(r,i,s)}}BTt(t,i,e){for(const s of t){let t;t=1===s.Rx?s.aO.toNumber()/s.eC+e:i+s.lO/s.eC;const n=t+s.uO/s.eC;"https://aomedia.org/emsg/ID3"===s.hO||"https://developer.apple.com/streaming/emsg-id3"===s.hO?this.UTt(s,t):this.QTt(s,t,n)}}QTt(t,i,e){const s=bZ(t.hO,t.lI);let n=this.wTt(s);n||(n=this.FTt(s),this.vTt(n)),n.fU(new VZ(i,e,t.hO,t.lI,t.o,t.cO))}UTt(t,i){const e=ZP(Os(t.cO));if(!e)return;const s=bZ(t.hO,t.lI);let n=this.wTt(s);n||(n=this.YTt(s),this.vTt(n));for(const t of e.b5){const e=new sz(i,t);AP(e,n.L.FE),n.fU(e)}}static zTt(t,i,e){const s=dr(t,Fo.KL);return s?mt(s.MO,s.eC)+e:i}FTt(t){const i=this.cU.dE(vs.tU,"","","",void 0,er.EMSG);return i.wk=t,i.gN=P.vk,i}YTt(t){const i=this.cU.dE(vs.tU,"","","",void 0,er.ID3);return i.wk=t,i.gN=P.vk,i}async tr(){for(const t of this.Z.FE)this.cU._U(t);await super.tr()}constructor(t){super(),this.cU=t}},WZ=class extends GZ{async $n(t){await this.tr(),this.sMt=t,this.sMt.yn(Qi.dp,this.yTt),this.yTt()}async tr(){this.sMt&&(this.sMt.fn(Qi.dp,this.yTt),this.sMt=void 0),await super.tr()}constructor(...t){super(...t),this.yTt=()=>{var t,i;const e=null!=(i=null==(t=this.sMt.jAt())?void 0:t.Cn)?i:0;this.sU(e)}}};r(),r();var ZZ=class{nrt(t,i){return this.VTt?this.Xut.nrt(t,i):Promise.resolve(!1)}ort(t,i){return this.VTt?this.Xut.ort(t,i):Promise.resolve(void 0)}async trt(t){const i=await this.Xut.trt(t);return this.VTt=void 0!==i,i}bK(t){return this.Xut.bK(t)}constructor(t){this.VTt=!1,this.Xut=t}};r();var HZ=class extends KN{WR(){var t;return null!=(t=this.YR)?t:0}Sk(){this.ta.sD=1/0}ZR(){return!0}constructor(t,i,e){super(t,i,e)}},XZ=[Qi.wp,Qi.pp,Qi.Mp,Qi.fp,Qi.Tp],qZ=[Qi.mp,Qi.Ep,Qi.np,Qi.ep],KZ=class t extends Bo{GTt(t){return!!this.WF&&this.WF.rJ(t)}async Fv(t){this.WF=await this.jR.$n(t),this.WTt(),this.ZTt(),this.WF.J4(this.ct)}HTt(t){return this.WF.hJ(t)}XTt(t){return this.WF.uJ(t)}async qTt(){this.KTt=this.JTt,this.WF&&(await this.jR.tr(),this.WF=void 0)}i4(){this.WF.i4()}G2(){const t=this.ct;this.WF.ct<t&&this.WF.J4(t),this.WF.G2()}async $Tt(t){const i=this.WF,e=[];i.Z4&&e.push(DR(i.Z4,t)),i.H4&&e.push(DR(i.H4,t)),await Promise.all(e)}tSt(t,i,e,s,n,r){const o=this.jR,h=this.WF;return new KV(o,h,t,i,e,s,n,r,this.iSt,o,this.Kwt,this.hdt,this.fmt,this.eY)}eSt(t,i,e){return t.hJ(i,e,this.WF)}async sSt(t,i,e,s){const n=this.tSt(this.dU,this.dV,this.Xut,this.kc,t,s);return n.yn(Xi.pat,this.nSt),n.yn(Qi.fp,this.Ds),await n.Aq(i,e),n}rSt(t){void 0===t&&(t=!1),this.oSt.Dm(),this.Z9.Dm(),this.hSt.Dm(),this.hSt=new Ai,this.aSt=Te(this.uSt(this.cSt,this.H9,this.aSt,t,this.hSt.wm),this.hSt).catch(this.Xmt)}async uSt(t,i,e,s,n){await Promise.all([t,i,e]),re(n),await Ic(this.lSt.rA,n);const r=this.dSt;await r.Xat(),this.G2(),re(n);const o=r.wc,h=r.Hmt,a=r.Zmt;let u=this.fSt(o,a,o,h,!1),c=this.gSt(a,u);!s&&this.GTt(c)?await this._St(a,u,c):(u=this.fSt(o,a,o,h,!0),c=this.gSt(a,u),await this.vSt(a,u,c,n)),re(n),this.BD?this.Gp(this.sD):this.wSt(),this.mSt()}async _St(t,i,e){const s=this.dSt;await this.HTt(e),this.pSt=e,await this.eSt(s,t,i),await s.Kat(Ka.Eht)}async vSt(t,i,e,s){const n=this.dSt;this.i8(),this.ASt();const r=this.ySt;await this.qTt(),await this.Fv(e),this.pSt=e,await this.eSt(n,t,i);try{const t=this.bSt(r,!1,!0,s);xe(t),await n.Kat(Ka.Eht),await t}finally{this.o8(),this.MSt()}}get ht(){return this.oP}get BF(){const t=this.ySt,i=this.TSt,e=i.XO(t);if(-1!==e)return{Cn:i.Cn(e),jn:i.jn(e)}}get TSt(){var t,i,e;const s=null!=(e=null==(t=this.dSt)?void 0:t.KI)?e:ge.cR();var n;const r=null!=(n=null==(i=this.SSt)?void 0:i.KI)?n:ge.cR();return s.WO(r)}get KI(){return this.TSt.ws()}get $I(){var t;const i=null==(t=this.PAt)?void 0:t.ydt,e=null==i?void 0:i._At;if(!i||!e)return;const s=e.getTime(),n=1e3*this.sD;return new Date(n+s)}set $I(t){var i;const e=null==(i=this.PAt)?void 0:i.ydt,s=null==e?void 0:e._At;if(!t||!e||!s)return;const n=s.getTime()/1e3,r=t.getTime()/1e3;this.Gp(r-n)}get bt(){return this.kc}get ySt(){return void 0!==this.A9?this.A9:void 0!==this.NSt?this.NSt:this.jR.sD}get sD(){return this.ySt}set sD(t){this.rD(t)}rD(t,i){this.Gp(t,t===1/0)}get ct(){let t=NaN;return this.dSt&&this.dSt.Omt?t=this.dSt.jn:this.PAt&&void 0!==this.PAt.ydt.Hw&&(t=this.PAt.ydt.AAt?this.PAt.ydt.AAt.npt():1/0),t}get jn(){return this.ct}get hD(){return this.BD?this.y9():!(!this.dSt||!this.dSt.Omt)&&this.jR.hD}y9(){return!!this.BD&&(!(!this.dSt||!this.dSt.Omt)&&this.ySt===this.dSt.jn)}get lt(){return this.FF}get cD(){return this.YF}get dD(){}ISt(){var t;const i=this.DSt;if(0===i.U)return!0;var e;const s=null!=(e=null==(t=this.BF)?void 0:t.jn)?e:this.ySt,n=i.Cn(0);return s>=n||Xs(s,n,.001)}ESt(){var t;if(!this.PAt)return!1;if(this.PAt.ydt.Hw!==Mo.mU)return!1;const i=null==(t=this.dSt)?void 0:t.wc;if(i&&i.Aat)return!0;const e=[];for(const t of this.PAt.ydt.Rmt){const i=t.CAt,s=t.Xbt;void 0!==i&&void 0!==s&&e.push(i,s)}const s=new ge(e).GO();return function(t,i,e){if(!i.U||!e.U)return ge.cR();const s=i.Cn(0),n=i.jn(i.U-1),r=t.Sn(e).FO().Sn(t).WO(i);return ge.uR(r.Cn(0),r.jn(r.U-1)).ZO(r).iR(((t,i)=>t<s&&i<=n&&i-t>si))}(this.TSt,this.DSt,s).U>0}get vD(){return il({},this.JTt,{fP:fc.K_.hF(),gP:this.kSt,_P:{amountOfBufferedAudioSegments:this.LSt,amountOfBufferedVideoSegments:this.xSt}})}get JTt(){return function(t,i){return{cP:t.cP+i.cP,lP:t.lP+i.lP,dP:t.dP+i.dP}}(this.KTt,this.jR.wD())}get mD(){return this.jR.mD}set mD(t){this.jR.mD=t}get TD(){return this.M9?this.CSt:this.dSt&&this.dSt.Omt?this.jSt:this.CSt}get ND(){return this.jR.ND}set ND(t){this.jR.ND=t}get kD(){let t=this.Fo;return this.dSt&&(t=t.WO(this.OSt)),t.GO(.1).ws()}get OSt(){return this.jR.kD}RSt(t){this.Fo=this.Fo.WO(t)}get xD(){return this.GF}set xD(t){this.GF=t,this.PSt()}get OD(){let t=this.jR.OD;return this.zSt&&(t=x.max($i.Xn,t)),t}get DSt(){return this.BSt(!1)}get USt(){return this.BSt(!0)}get PD(){return this.DSt.ws()}get BD(){return this.rV||this.QSt}get QSt(){return this.jR.BD}get y3(){return this.jR.y3}get ZF(){}get FSt(){var t,i;return null!=(i=null==(t=this.PAt)?void 0:t.ydt.Hw)?i:Mo.wU}get nt(){return this.Ol}get rt(){return this.aP}get FD(){var t;return this.YSt||(null==(t=this.VSt())?void 0:t.Ti)||0}get GD(){var t;return this.GSt||(null==(t=this.VSt())?void 0:t.ji)||0}get ZD(){return this.jR.ZD}set ZD(t){this.jR.ZD=rh(t,0,1)}get qD(){return this.HF}get JD(){return!1}set JD(t){}get XF(){return this.qF}WSt(t){t.yn(XZ,this.Ds),t.yn(Qi.Np,this.ZSt),t.yn(Qi.Gm,this.HSt),t.yn(ac.ua,this.XSt),t.yn(Qi.Zm,this.qSt),t.yn(Qi.pp,this.KSt),t.yn("Vmt",this.JSt),t.yn("bmt",this.JSt)}$St(t){t.fn(XZ,this.Ds),t.fn(Qi.Np,this.ZSt),t.fn(Qi.Gm,this.HSt),t.fn(ac.ua,this.XSt),t.fn(Qi.Zm,this.qSt),t.fn(Qi.pp,this.KSt),t.fn("Vmt",this.JSt),t.fn("bmt",this.JSt)}tNt(t){t.yn(Qi.wp,this.Ds)}iNt(t){t.fn(Qi.wp,this.Ds)}VSt(){if(!this.dSt)return;const t=So(this.dSt.Zmt,(t=>t.jat===Q.iN));return t?t.lk:void 0}BSt(t){var i;const e=null==(i=this.PAt)?void 0:i.ydt;if(!e)return ge.cR();const s=e.xMt;let n=t?e.Zbt:e.qAt;if(void 0===s||void 0===n)return ge.cR();if(!t){const t=this.OSt;t.U>0&&t.jn(t.U-1)>n&&(n=x.min(t.jn(t.U-1),e.Zbt))}const r=this.ct;return isFinite(r)&&r>n&&(n=r),ge.uR(s,n).UO()}async $n(t,i){let e,s;re(i);const n=this.PAt.ydt;try{e=n.CMt,s=n.LMt}catch(t){throw new g("Something went wrong determining the start of the provided MPEG-DASH stream")}if(!e)throw new g("Something went wrong determining the initial Period of the provided MPEG-DASH stream");if(void 0===s)throw new g("Something went wrong determining the start time of the provided MPEG-DASH stream");t.textTracks&&this.eNt(t.textTracks),this.i8();const r=this.vht(e),o=sZ(e,r,void 0,void 0,this.Emt),h=this.fSt(e,o,e,o,!0);o.forEach((t=>t.Rt=!0));const a=this.gSt(o,h);await this.Fv(a),this.pSt=a,re(i);const u=await this.sSt(e,r,o,h);re(i),this.sNt(u),this.o8(),re(i),await u.Kat(),re(i),!this.nNt&&s>0&&this.Gp(s,!0,dZ.hTt),this.rV||(this.wSt(),this.rNt())}wSt(){this.oSt.Dm(),this.oSt=new Ai,this.cSt=Te(this.oNt(this.cSt,this.aSt,this.oSt.wm),this.oSt).catch(this.Xmt)}hNt(){this.oSt.Dm()}async oNt(t,i,e){for(await Promise.all([t,i]),re(e);;){var s;const t=null==(s=this.dSt)?void 0:s.wc;if(!t){0;break}if(!await this.aNt(t,e)){0;break}}}async aNt(t,i){var e;re(i);const s=this.dSt;for(0;this.PAt.ydt.Hw===Mo.mU&&void 0===(null==(e=this.Gbt(t))?void 0:e.CAt);)await Ic(this.uNt.ZMt,i),await this.cNt();for(re(i),await this.cNt(),re(i);!s.kmt();)await s.Fm(AY.wft,i),await this.cNt();re(i),await this.cNt(),re(i);const n=this.Gbt(t);return n?(this.lNt(n)?await this.dNt(n,i):await this.fNt(n,i),!0):(this.i4(),!1)}lNt(t){var i,e,s,n,r;const o=null!=(r=null==(i=this.kc)?void 0:i.seamlessSwitchStrategy)?r:vc.HR;if(o===vc.XR)return!0;if(o===vc.qR)return!1;const h=this.dSt,a=null==h?void 0:h.wc,u=null==h?void 0:h.Zmt,c=sZ(t,this.vht(t),a,u,this.Emt),l=this.fSt(t,c,a,u,!1);if(o===vc.CLEAR_ONLY&&((null==(e=this.dSt)?void 0:e.emt)||l)||o===vc.SAME_DRM_ONLY&&!((null==(s=this.dSt)?void 0:s.emt)&&l||!(null==(n=this.dSt)?void 0:n.emt)&&!l))return!1;const d=this.gSt(c,l);return this.GTt(d)}gNt(){return!0}_Nt(t){const i=this.vNt();for(const e of i)e!==t&&(e.gN=P.Ch)}mSt(){if(void 0!==this.wNt){if(this.wNt.Ak){const t=So(this.ht.FE,(t=>t.Rt));void 0!==t&&this.wNt.gs===t.gs||(this.wNt.gN=P.Ch)}}else this.mNt()}mNt(){if(this.vNt().length)return;const t=So(this.ht.FE,(t=>t.Rt));if(void 0===t)return;const i=this.nt.FE.filter((t=>t.Ak));for(const e of i)if(e.gs===t.gs)return e.gN=P.Jn,void(this.wNt=e)}vNt(){return this.nt.FE.filter((t=>t.gN===P.Jn&&(t.zt===vs.JB||t.zt===vs.KB)))}pNt(t){if(t&&this.wNt){const i=function(t,i){if(""===t.gs)return;return i.filter((i=>i.gs===t.gs))[0]}(this.wNt,t.nt.FE);i&&(i.gN=P.Jn)}}async dNt(t,i){var e,s;const n=this.dSt;let r=this.SSt;const o=this.pSt;try{re(i);const e=n.wc,s=n.Zmt,o=this.vht(t),h=sZ(t,o,e,s,this.Emt),a=this.fSt(t,h,e,s,!1);h.forEach((t=>t.Rt=!0));const u=this.gSt(h,a);for(0,await n.Xat(),this.G2(),re(i),r&&r.wc===t?(this.GTt(u)&&await this.HTt(u),this.pSt=u):(r&&await r.gn(!0),this.GTt(u)&&await this.HTt(u),this.pSt=u,r=await this.sSt(t,o,h,a),this.SSt=r,this.tNt(r),this.ANt.WE=r.nt,r.Jat(n)),await r.Kat(),re(i);this.ySt<t.Cn;)await this.jR.Fm(Qi.Dp,i);re(i),this.sNt(r)}catch(t){throw F(t)&&(r&&await r.Xat(),o&&this.pSt!==o&&(this.GTt(o)&&await this.HTt(o),this.pSt=o)),t}(null==(s=this.kc)||null==(e=s.dash)?void 0:e.forceSeekToSynchronize)&&await this.yNt(t,i)}async yNt(t,i){const e=Date.now()/1e3;if(void 0===this.bNt)this.bNt=e;else if(e-this.bNt>900){this.bNt=e,this.ASt();const s=x.max(this.ySt,t.Cn);try{await this.bSt(s,!1,!0,i)}finally{this.MSt()}}}async fNt(t,i){for(re(i),await this.dSt.Xat(),this.G2(),await this.$Tt(t.Cn),re(i),this.i4();!this.jR.hD&&this.ySt<t.Cn;)await this.jR.Fm([Qi.Dp,Qi.tp],i);re(i);const e=this.dSt.wc,s=this.dSt.Zmt,n=this.vht(t),r=sZ(t,n,e,s,this.Emt),o=this.fSt(t,r,e,s,!0);r.forEach((t=>t.Rt=!0));const h=this.gSt(r,o);this.dSt&&(this.MNt.fn(Ct.aa,this.TNt),await this.dSt.gn(),this.MNt.yn(Ct.aa,this.TNt),this.dSt=void 0),this.SSt&&(await this.SSt.gn(),this.SSt=void 0),this.ASt(),this.i8();const a=x.max(this.ySt,t.Cn);await this.qTt(),await this.Fv(h),this.pSt=h;const u=await this.sSt(t,n,r,o);this.sNt(u);try{const t={stack:[],error:void 0,hasError:!1};try{const e=this.bSt(a,!1,!0,i);xe(e),await u.Kat();const s=lo(t,Ai.xm([i]),!1);await Promise.race([e,u.Fm([AY.wft],s.wm)])}catch(i){t.error=i,t.hasError=!0}finally{os(t)}}finally{this.o8(),this.MSt()}}async cNt(){const t=this.SSt;t&&t.wc.Aat&&(await t.gn(!0),this.SSt=void 0)}static SNt(t,i){const e=[],s=[];let n=!i.some((t=>t.lft.some((t=>"main"===t.lI))));for(const t of i){if(-1!==e.indexOf(t))continue;const r=$Z(t.xdt.concat(t.lft),n);n=!1;const o=t.Nht.map((t=>t.bat)),h=new fY(t,o,r),a=tH(t,i);for(const t of a)h.Zdt(t),e.push(t);s.push(h)}return new iZ(t,s)}vht(i){const e=[],s=[];for(const t of i.Smt)QN(t.Hw)&&(0===t.Nht.length?this.yo(new pY("No supported representation found in the AdaptationSet with mimetype : "+t.Hw)):t.Hw===Q.tN?e.push(...t.wht):s.push(...t.wht));const n=[];return e.length>0&&n.push(t.SNt(Q.tN,e)),s.length>0&&n.push(t.SNt(Q.iN,s)),n}gSt(t,i){var e,s,n,r,o,h,a,u;const c=t.map((t=>{var i;return Jn.Blt(null!=(i=t.Gdt)?i:t.Nht,WN(t.jat,this.Emt))})).map((t=>({vS:t.vS}))),l=null==(s=this.kc)||null==(e=s.dash)?void 0:e.desiredTimescale;var d;const f=(null==(n=this.kc)?void 0:n.seamlessSwitchStrategy)!==vc.qR&&(null==(r=this.kc)?void 0:r.seamlessSwitchStrategy)!==vc.CLEAR_ONLY&&(null==(o=this.kc)?void 0:o.seamlessSwitchStrategy)!==vc.SAME_DRM_ONLY&&(null!=(d=null==(a=this.kc)||null==(h=a.dash)?void 0:h.needsTimescaleShifting)?d:me.Ys.xv),g=null==(u=this.kc)?void 0:u.useManagedMediaSource;return{Hw:vl.mU,n3:c,KF:jZ(i),s9:null==i?void 0:i.s9,xv:f,K2:l,v3:g}}static NNt(t,i){if(!t.length)return;let e;for(const s of t){const t=0===s.qdt.length;e=DZ(e,xZ(s.Sct,i,t))}return(null==i?void 0:i.preferredKeySystems)&&e&&(e.smt=PZ(e.smt,i.preferredKeySystems)),e}fSt(i,e,s,n,r){var o,h;const a=this.kc.contentProtection;let u=t.NNt(e,a);if(void 0!==u)return u;var c;const l=null!=(c=null==(o=this.kc)?void 0:o.seamlessSwitchStrategy)?c:vc.HR;if(l===vc.qR||l===vc.CLEAR_ONLY||l===vc.SAME_DRM_ONLY)return;const d=null==(h=this.dSt)?void 0:h.emt;if(!r&&void 0!==d){const t=!d.s9;if(l===vc.HR&&t&&!this.gNt())return;return d}const f=!r&&l===vc.HR;return u=this.INt(i,a,s,n,f),void 0!==u?(u.s9=!0,u):void 0}INt(i,e,s,n,r){let o=i,h=!1;for(;;){if(o=h?this.Wbt(o):this.Gbt(o),void 0===o){if(h)return;h=!0,o=i;continue}const a=sZ(o,this.vht(o),s,n,this.Emt),u=t.NNt(a,e);if(r){const t=this.gSt(a,u);if(!this.GTt(t))return}if(void 0!==u)return u}}eNt(t){for(const i of t)i.src&&this.hY.uU(i);Zh(this.hY.Z)}eE(){var t;const i=this.TD;this.CSt=!0,i||(this.M9||(this.DNt(new Rh),this.ENt()),(null==(t=this.zF)?void 0:t.lR)&&this.zF.nE(),this.kNt())}sE(){this.LNt||(this.LNt=new pa),this.xNt();const t=this.LNt.rA;return xe(t),t}xNt(){if(this.CSt=!1,this.j9=!0,this.CNt=!1,this.PSt(),this.hD){const t=this.DSt;t.U>0&&this.Gp(t.Cn(0))}this.M9||this.R9().then(this.jNt,this.DNt),this.nSt(),this.kNt()}get jSt(){return this.jR.TD}R9(){return this.jR.sE()}ENt(){this.jR.eE()}i8(){this.M9||(this.CSt=this.TD,this.M9=!0,this.ENt())}o8(){this.M9&&(this.M9=!1,this.CSt||this.R9().then(this.jNt,this.DNt),this.nSt(),this.kNt())}kNt(){const t=this.LU,i=this.TD;t!==i&&(this.LU=i,i?this.yo(new Ia(this.sD)):this.yo(new us(this.sD)))}Gp(t,i,e){return void 0===i&&(i=!1),void 0===e&&(e=dZ.oTt),this.nNt=!0,this.oSt.Dm(),this.Z9.Dm(),this.rV=!0,this.A9=t,this.CNt=this.CNt&&this.y9(),this.RSt(this.OSt),this.ONt(new ll(this.sD)),this.Z9=new Ai,this.H9=Te(this.X9(t,this.cSt,this.H9,this.aSt,this.Z9.wm,i,e),this.Z9).catch(this.Xmt),this.H9}RNt(){this.Z9.Dm()}async X9(t,i,e,s,n,r,o,h){var a;void 0===r&&(r=!1),void 0===o&&(o=dZ.oTt),void 0===h&&(h=!1),null==(a=this.zF)||a.nE();try{var u,c;0,await Promise.all([i,e,s]),re(n),await Ic(this.lSt.rA,n);const a=this.DSt.QO(t);this.A9=a;const l=h||(null==(c=this.kc)||null==(u=c.dash)?void 0:u.forceHardSwitchWhenSeekingBackwards)&&a<=this.sD,d=this.PNt(a),f=this.dSt;if(l||!f||!f.PD.gr(a)&&o!==dZ.hTt&&f.wc!==d){if(d){let t=this.SSt;if(this.i8(),f&&await f.Xat(),t&&t.wc===d&&!l){const i=this.gSt(t.Hmt,t.emt);this.G2(),this.GTt(i)&&await this.HTt(i),this.pSt=i}else{t&&await t.gn(!0);const i=this.vht(d),e=null==f?void 0:f.wc,s=null==f?void 0:f.Zmt,n=sZ(d,i,e,s,this.Emt);let r=this.fSt(d,n,e,s,!1);n.forEach((t=>t.Rt=!0));let o=this.gSt(n,r);this.lNt(d)&&!l?(this.G2(),this.GTt(o)&&await this.HTt(o)):(r=this.fSt(d,n,e,s,!0),o=this.gSt(n,r),f&&(this.MNt.fn(Ct.aa,this.TNt),await f.gn(),this.MNt.yn(Ct.aa,this.TNt),this.dSt=void 0),await this.qTt(),await this.Fv(o)),this.pSt=o,t=await this.sSt(d,i,n,r),this.SSt=t,this.ANt.WE=t.nt,this.tNt(t),t.Jat(this.dSt)}await t.Kat(Ka.Lht),this.sNt(t)}}else{0;const t=this.SSt;if(t&&!t.Pmt){await t.Xat(),this.G2();const i=this.gSt(f.Hmt,f.emt);this.GTt(i)&&await this.HTt(i),this.pSt=i}}0;const g=this.bSt(a,r,!1,n);xe(g),this.A9=void 0,await this.dSt.Kat(Ka.Lht),re(n),this.wSt(),await g,re(n),this.o8(),this.rV=!1,this.zNt(new ns(this.sD)),this.rNt()}catch(t){if(F(t))return void 0;0}}rNt(){if(this.TD||this.BD||void 0===this.GR)return;const t=this.sD;var i,e;this.sD+this.GR-this.qD.md.maximumOffset<t?null==(i=this.zF)||i.Cn():null==(e=this.zF)||e.nE()}async bSt(t,i,e,s){let n,r,o=!0,h=t;for(;;){const a={stack:[],error:void 0,hasError:!1};try{const u=this.USt;if(u.U>0){const i=u.QO(t);h!==i&&(u.gr(h)&&this.PAt.ydt.Hw===Mo.mU||(h=i,o=!0))}if(o)o=!1,null==r||r.Dm(),r=new Ai,r.Em(s),n=Te(this.BNt(h,i,e,r.wm),r),xe(n);else if(!this.QSt&&!this.y3)break;const c=lo(a,Ai.xm([s]),!1);await Promise.race([n,this.Fm([Qi.Mp,Qi.Km],c.wm),this.PAt.ydt.Fm(Xi.wat,c.wm)])}catch(t){a.error=t,a.hasError=!0}finally{os(a)}}}async BNt(t,i,e,s){for(this.jR.Gp(t,i,e);this.QSt||this.y3;)await this.jR.Fm([Qi.yp,Qi.ap],s)}ASt(){void 0===this.NSt&&(this.NSt=this.ySt,this.jR.fn(Qi.bp,this.ONt),this.jR.fn(Qi.yp,this.zNt))}MSt(){if(void 0===this.NSt)return;const t=this.ySt;this.NSt=void 0,this.jR.yn(Qi.bp,this.ONt),this.jR.yn(Qi.yp,this.zNt),this.ySt!==t&&this.xc()}UNt(t){this.Fo=this.Fo.WO(t)}PNt(t){const i=this.PAt.ydt,e=i.Rmt.filter((t=>t.ct>=.2));if(0===e.length)return;const s=e[0];if(t<=s.Cn)return s;for(const i of e)if(i.jn>t)return i;return i.Hw!==Mo.mU?e[e.length-1]:void 0}Wbt(t){let i=t.$mt;for(;i&&i.ct<.2;)i=i.$mt;return i}Gbt(t){let i=t.tpt;for(;i&&i.ct<.2;)i=i.tpt;return i}async wa(t,i,e){const s={stack:[],error:void 0,hasError:!1};try{var n;if(this.eY.bF(t.contentProtection),this.QNt(),this.kc&&!Ls(this.kc)&&await this.tr(),!t||Ls(t))return;const o=lo(s,Ai.xm([e]),!1);this.gU=Ai.xm([o.wm]),this.kc=t,this.FNt=i,this.Emt=t.abr,this.fmt=t.ignoreEmbeddedTextTrackTypes;const h=mZ(new gZ(this.dU,Boolean(this.kc.useCredentials),this.hdt),this.Xut);var r;if(this.kMt(!0),this.uNt=new $W({yk:me.Ah(this.kc.src),RMt:null!=(r=null==(n=this.kc.latencyConfiguration)?void 0:n.targetOffset)?r:this.kc.liveOffset,QMt:this.kc.timeServer,dN:this.kc.useCredentials},this.YNt(this.Emt),this.dU,h,this.kc.dash),this.PAt=this.uNt.Tr,this.PAt.ydt.yn(Qi.lp,this.VNt),this.PAt.ydt.yn(Qi.dp,this.GNt),this.PAt.ydt.yn(LW.tMt,this.WNt),this.PAt.ydt.yn(Xi.wat,this.nSt),await this.ZNt.$n(this.PAt.ydt),await this.HNt.$n(this.PAt.ydt),fh(this.fmt,er.EMSG)||(this.Kwt=new WZ(this.cU),this.Ol.EF(this.Kwt.Z),await this.Kwt.$n(this.PAt.ydt)),t.latencyConfiguration){const i=t.latencyConfiguration;this.zF=new HZ(this,this.jR,i),this.zF.Rt=!0,this.HF.Sa(this.zF)}this.PSt(),o.Mm()}catch(t){s.error=t,s.hasError=!0}finally{os(s)}}async XNt(){const t=this.PAt.ydt.bD;var i,e;(this.kMt(t),t)?this.JSt():(await Promise.all([null==(i=this.dSt)?void 0:i.Xat(Ka.Wht),null==(e=this.SSt)?void 0:e.Xat(Ka.Wht)].filter(Rt)),this.hNt(),this.RNt(),this.hSt.Dm())}get bD(){return this.EMt}kMt(t){this.EMt!==t&&(this.EMt=t,this.yo(t?new AZ:new yZ))}PSt(){this.PAt&&(this.qNt=this.KNt(this.qNt,this.gU.wm).catch(this.Xmt))}async KNt(t,i){t&&(await t,re(i));try{this.xD===Ac.HR||this.j9?await this.JNt(i):this.xD===Ac.tU&&await this.$Nt(i)}catch(t){throw wh(t),this.LY(new Ui(Do.MANIFEST_LOAD_ERROR,t.message,t)),t}}async JNt(t){await this.$Nt(t),this.tIt||(this.tIt=!0,this.lSt.Em(this.$n(this.FNt,t)));try{await this.lSt.rA}catch(t){wh(t),this.LY(new Ui(Do.MEDIA_DECODE_ERROR,t.message,t))}}async $Nt(t){await Ic(this.uNt.W,t);const i=this.PAt.ydt;if(void 0===this.zF&&i.Hw===Mo.mU){const t=i.NAt,e=(null==t?void 0:t.hMt)?(null==t?void 0:t.hMt)/1e3:i.jMt,s={minimumOffset:(null==t?void 0:t.nMt)?(null==t?void 0:t.nMt)/1e3:.5*e,maximumOffset:(null==t?void 0:t.oMt)?(null==t?void 0:t.oMt)/1e3:1.5*e,targetOffset:e,forceSeekOffset:2.5*e,minimumPlaybackRate:D,maximumPlaybackRate:Ut};this.zF=new HZ(this,this.jR,s),this.HF.Sa(this.zF)}}sNt(i){const e=this.dSt;i!==e&&(this.dSt&&this.$St(this.dSt),this.SSt&&this.iNt(this.SSt),e&&this.RSt(this.OSt),this.dSt=i,this.SSt=e,this.WSt(this.dSt),this.SSt&&this.tNt(this.SSt),this.oP.WE=i.ht,this.aP.WE=i.rt,this.pNt(i),this.MNt.fn(Ct.aa,this.TNt),t.iIt(this.MNt),this.MNt.yn(Ct.aa,this.TNt),this.MNt.WE=i.nt,this.ANt.WE=void 0,this.mNt())}static iIt(t){for(const i of t.FE)i.gN=P.Ch}ge(){this.jR.ge()}be(){this.jR.be()}LY(t){this.FF||(xe(this.tr()),this.FF=be(t),this.YF=t,this.yo(new As(t)))}QNt(){this.FF=void 0,this.YF=void 0}WTt(){const t=this.WF;t&&(t.H4&&(t.H4._q=this.dV.Sq),t.Z4&&(t.Z4._q=this.dV.Sq))}ZTt(){const t=this.WF;t&&(t.H4&&(t.H4.pq=this.dV.pq),t.Z4&&(t.Z4.pq=this.dV.pq))}determineStallJumpTarget(){if(this.dSt)return this.dSt.kmt()&&this.sD>this.dSt.jn-TR&&!this.dSt.Omt?this.dSt.jn:void 0}async tr(){if(this.eIt)return this.eIt;try{this.eIt=this.sIt(),await this.eIt}finally{this.eIt=void 0}}async sIt(){this.ND=1,this.gU.Dm(),this.RNt(),this.hNt(),this.hSt.Dm(),this.lSt.Dm(),this.nNt=!1,this.eE(),this.j9=!1,this.CNt=!1,this.oP.WE=void 0,this.aP.WE=void 0,this.MNt.WE=void 0,this.ANt.WE=void 0,this.qNt&&(await this.qNt.catch(ul),this.qNt=void 0),await Promise.all([this.cSt,this.H9,this.aSt,this.lSt.rA.catch(ul)]),this.dSt&&(await this.dSt.gn(!0),this.dSt=void 0),this.SSt&&(this.iNt(this.SSt),await this.SSt.gn(!0),this.SSt=void 0),await this.qTt(),this.pSt=void 0,this.wNt=void 0,this.lY.tr(),await this.ZNt.tr(),await this.HNt.tr(),void 0!==this.Kwt&&(this.Ol.xF(this.Kwt.Z),await this.Kwt.gn(),this.Kwt=void 0),this.cU.tr(),this.PAt&&(this.PAt.ydt.fn(Qi.lp,this.VNt),this.PAt.ydt.fn(Qi.dp,this.GNt),this.PAt.ydt.fn(LW.tMt,this.WNt),await this.uNt.gn(),this.PAt=void 0),this.zSt=!1,this.nIt=NaN,this.rIt=0,this.oIt=0,this.NSt=void 0,this.M9=!1,this.Fo=ge.cR(),this.LU=!0,this.A9=void 0,this.hIt=!1,this.rV=!1,this.tIt=!1,this.lSt=new pa,this.kSt=0,this.LSt=0,this.xSt=0,this.kc=void 0,this.FNt=void 0,this.fmt=[],this.bNt=void 0,this.HF.tr(),this.zF=void 0,this.KTt={cP:0,lP:0,dP:0},await this.hY.tr(),this.jR.cY(),this.aIt.tr()}async gn(){this.Bo(),this.QNt(),await this.tr(),this.Bo(),this.oP.gn(),this.aP.gn(),this.MNt.gn(),this.ANt.gn(),this.Ol.gn(),this.lY.gn(),this.uIt.Mm(),await this.ZNt.gn(),await this.HNt.gn(),this.cU.gn(),this.aIt.gn(),this.jR.fn(Qi.Km,this.H8),this.jR.fn(xn.$m,this.u9),this.jR.fn(Qi.tp,this.cIt),this.jR.fn(Qi.bp,this.ONt),this.jR.fn(Qi.yp,this.zNt),this.jR.fn(Qi.Ap,this.KSt),this.jR.fn(Qi.Dp,this.xc),this.jR.fn([Qi.so,Qi.vp],this.lIt),this.jR.fn(qZ,this.Ds),await this.hY.gn(),this.Ol.gn(),this.dV.fn("gq",this.dIt),this.dV.fn("mq",this.fIt),this.jR.fn(ac.ua,this.gIt),this.jR.fn([Qi.Hm,Qi.Zm],this.Ds),this.jR.fn(Qi.xp,this.ept),this.jR.gY=void 0,this.eY.fn("contentProtectionsTracked",this._It),this.jR.f7=void 0}$D(){return this.jR.ka}_a(){return this.jR.aY}get gD(){return!1}rE(){return!1}oE(){}hE(){}aE(){}uE(){this.rSt(!0)}get GR(){var t;const i=null==(t=this.PAt)?void 0:t.ydt;if(i&&i.Hw===Mo.mU&&i._At)return i.Adt().getTime()/1e3-i._At.getTime()/1e3-this.sD}dE(t){const i=this.jR.uY(t);return this.aIt.tt(i),i}constructor(t,i,e,s,n,r,o){super(),this.dSt=void 0,this.SSt=void 0,this.j9=!1,this.nIt=NaN,this.FF=void 0,this.YF=void 0,this.M9=!1,this.NSt=void 0,this.A9=void 0,this.hIt=!1,this.rIt=0,this.oIt=0,this.zSt=!1,this.gU=new Ai,this.lSt=new pa,this.tIt=!1,this.PAt=void 0,this.uNt=void 0,this.EMt=!0,this.CSt=!0,this.LNt=void 0,this.Fo=ge.cR(),this.GF=Ac.HY,this.qNt=void 0,this.LU=!0,this.kc=void 0,this.FNt=void 0,this.Emt=void 0,this.fmt=[],this.rV=!1,this.oSt=new Ai,this.cSt=Promise.resolve(),this.Z9=new Ai,this.H9=Promise.resolve(),this.nNt=!1,this.CNt=!1,this.hSt=new Ai,this.aSt=Promise.resolve(),this.pSt=void 0,this.Kwt=void 0,this.kSt=0,this.LSt=0,this.xSt=0,this.qF=new Nh,this.bNt=void 0,this.KTt={cP:0,lP:0,dP:0},this.WF=void 0,this.zF=void 0,this.JSt=()=>{this.rSt()},this.ept=t=>{var i;null==(i=this.dSt)||i.ept(t)},this.xc=()=>{this.yo(new H(this.sD,this.$I))},this.u9=t=>{this.yo(new eZ(this.sD,t.qw,t.Yp))},this.ZSt=t=>{this.kSt+=t.gP,this.yo(t)},this.HSt=t=>{const i=t.segments.filter((t=>t.$ct));t.track===Q.tN?this.LSt=i.length:t.track===Q.iN&&(this.xSt=i.length)},this.H8=()=>{const t=this.ct;j(t)||t===this.nIt||(this.nIt=t,this.yo(new In(this.nIt)))},this.lIt=()=>{this.nSt(),this.kNt()},this.cIt=t=>{this.CNt||!this.hD||this.BD||(this.CNt=!0,this.yo(null!=t?t:new ce(this.sD)))},this.GNt=t=>{this.Ds(t),this.zSt||(this.zSt=!0,this.uIt.vIt())},this.VNt=()=>{this.PAt.ydt.fn(Qi.lp,this.VNt),this.yo(new Ti)},this.qSt=t=>{var i;if(t.errorObject.code===Do.CONTENT_PROTECTION_OUTPUT_RESTRICTED&&(null==(i=this.dSt)?void 0:i.Hmt.every((t=>!t.Kdt))))return;this.LY(t.errorObject),this.yo(t)},this.XSt=t=>{this.LY(t.errorObject)},this.Xmt=t=>{F(t)||this.LY(new Ui(Do.MEDIA_DECODE_ERROR,t.message,t))},this.nSt=()=>{if(!this.TD)if(this.ISt())if(this.ESt()){const t=this.PAt.ydt.LMt;this.Gp(t,!0)}else;else{const t=this.PAt.ydt.LMt;this.Gp(t,!0)}},this.ONt=t=>{this.hIt=this.BD,this.yo(t)},this.zNt=t=>{const i=this.hIt,e=this.BD;this.hIt=e,i&&!e&&this.yo(t),this.cIt()},this.KSt=()=>{const t=this.GD,i=this.FD;this.rIt===t&&this.oIt===i||(this.rIt=t,this.oIt=i,this.yo(new lr))},this.TNt=t=>{const i=t.Lt;i.gN===P.Jn?(this._Nt(i),this.wNt=i):i===this.wNt&&i.gN===P.Ch&&(this.wNt=void 0,this.mNt())},this.jNt=()=>{this.M9||this.LNt&&(this.LNt.eA(),this.LNt=void 0)},this.DNt=t=>{this.M9||this.LNt&&(this.LNt.sA(t),this.LNt=void 0)},this.WNt=()=>{this.XNt().catch(this.Xmt)},this.gIt=t=>{this.LY(FI(t.lt))},this.dIt=()=>{this.WTt()},this.fIt=()=>{this.ZTt()},this._It=t=>{this.XTt(t.yF)},this.dU=t,this.Xut=new ZZ(n),this.jR=r,this.iSt=o,this.dV=e,this.dV.yn("gq",this.dIt),this.dV.yn("mq",this.fIt),this.HF=s,this.hdt=i.retryConfiguration,this.oP=new Dh,this.aP=new Dh,this.eY=new Xh(t),this.eY.yn("contentProtectionsTracked",this._It),this.jR.yn(Qi.Km,this.H8),this.jR.yn(xn.$m,this.u9),this.jR.yn(Qi.tp,this.cIt),this.jR.yn(Qi.bp,this.ONt),this.jR.yn(Qi.yp,this.zNt),this.jR.yn(Qi.Ap,this.KSt),this.jR.yn(Qi.Dp,this.xc),this.jR.yn([Qi.so,Qi.vp],this.lIt),this.jR.yn(qZ,this.Ds),this.jR.yn(ac.ua,this.gIt),this.jR.gY=this.eY,this.jR.f7=this,this.jR.yn([Qi.Hm,Qi.Zm],this.Ds),this.jR.yn(Qi.xp,this.ept),this.uIt=new JZ(this,this.jR),this.lY=new li(this.uIt,!0),this.lY.yn(fa.xO,this.nSt),this.lY.yn(ZN,this.Ds),this.MNt=new ci,this.MNt.yn(Ct.aa,this.TNt),this.ANt=new ci,this.cU=this.wIt(),this.ZNt=new TZ(this.cU),this.HNt=new zZ(this.cU),this.hY=new ch(this.jR,this.dU),this.aIt=new bn,this.Ol=new uu([this.MNt,this.ZNt.Z,this.HNt.Z,this.hY.Z,this.aIt])}},JZ=class extends ak{get OD(){return this.ta.OD}vIt(){this.yo(new hr(this.sD,this.OD))}constructor(t,i){super(i),this.ta=t}};function $Z(t,i){const e=t.filter((t=>"urn:mpeg:dash:role:2011"===t.J6)).map((t=>t.lI)).filter(Rt);return i||fh(e,"main")?fh(e,"caption")?"captions":fh(e,"subtitle")?"subtitles":fh(e,"dub")?"translation":"main":fh(e,"sign")?"sign":fh(e,"description")?"descriptions":fh(e,"commentary")?"commentary":"alternative"}function tH(t,i){var e;const s=So([...t.kpt,...t.Lpt],(t=>"urn:mpeg:dash:adaptation-set-switching:2016"===t.J6));var n;const r=null!=(n=null==s||null==(e=s.lI)?void 0:e.split(","))?n:[],o=[];for(const t of r){const e=Number(t),s=So(i,(t=>t.o===e));s&&o.push(s)}return o}var iH=class extends KZ{tE(){if(fl(this.jR))return this.jR.tE()}get YSt(){return fl(this.jR)?this.jR.FD:0}get GSt(){return fl(this.jR)?this.jR.GD:0}async gn(){var t;await super.gn(),null==(t=this.mIt)||t.gn()}lNt(t){var i,e;return((null!=(e=null==(i=this.kc)?void 0:i.seamlessSwitchStrategy)?e:vc.HR)!==vc.HR||!ui.R_)&&super.lNt(t)}gNt(){return!(ui.$g&&ui.i_<3)&&super.gNt()}wIt(){return new xQ(this,new Yn)}YNt(t){return kQ(t)}constructor(t,i,e,s,n,r,o){super(t,i,e,s,n,r,new LQ(o)),this.Wrt=o,ui.M_&&(this.mIt=new YQ(this))}},eH=class extends iH{async gn(){await super.gn(),await this.vY._Y(this.jR)}constructor(t,i,e,s,n,r,o,h){const a=new rt(r);super(t,i,e,s,n,a.xY(o),h),this.vY=a}};r(),r(),r(),r(),r();var sH=class extends zQ{get pIt(){return this.UN.pIt}JI(){return super.JI().Vp(this.pIt)}yot(){return super.yot().Vp(this.pIt)}c2(t,i,e){const s=this.pIt;return super.c2(t,{het:i.het-s,ct:i.ct,RB:i.RB-s},e)}L2(t,i){const e=this.pIt;return super.L2(x.max(0,t-e),x.max(0,i-e))}Rb(t,i,e){const s=this.pIt;return super.Rb(x.max(0,t-s),x.max(0,i-s),e)}a4(t,i){const e=this.pIt;super.a4(x.max(0,t-e),x.max(0,i-e))}u4(t,i){const e=this.pIt;super.u4(x.max(0,t-e),x.max(0,i-e))}constructor(t,i){super(i),this.UN=t}},nH=class extends RQ{get pIt(){return this.UN.pIt}_d(){return super._d()+this.pIt}J4(t){super.J4(t-this.pIt)}zD(){return super.zD().Vp(this.pIt)}s3(t,i,e,s){const n=this.pIt;super.s3(t-n,i-n,e,s)}got(t){return new sH(this,t)}constructor(t,i){super(i),this.lot(i),this.UN=t}},rH=class extends Co{get Zrt(){return this.jR}get pIt(){return this.AIt}set pIt(t){this.AIt=t}JI(){return super.JI().Vp(this.AIt)}tD(){return oH(super.tD(),this.AIt)}nD(){return super.nD()+this.AIt}_d(){return super._d()+this.AIt}LD(){return super.LD().Vp(this.AIt)}zD(){return super.zD().Vp(this.AIt)}Gp(t,i,e){const s=x.max(0,t-this.AIt);super.Gp(s,i,e)}UF(t){super.UF(oH(t,-this.AIt))}QD(){return this.Ol}dE(t,i,e,s,n,r,o,h){return this.cU.dE(t,i,e,s,n,r,o,h)}uY(t){return this.cU.uY(t)}_U(t){this.cU._U(t)}cY(){this.cU.tr(),super.cY()}nY(){return!1}oY(t,i,e,s,n){throw new g("Not supported")}Mm(){return this.zit.gn(),this.Pit.gn(),this.cU.gn(),this.Ol.gn(),super.Mm()}hot(t){return new nH(this,t)}oot(t){return new Ws(t)}cE(t){let i;switch(t.type){case Qi.so:i=new us(t.currentTime+this.AIt);break;case Qi.vp:i=new Ia(t.currentTime+this.AIt);break;case fa.CO:i=new fo(t.currentTime+this.AIt);break;case Qi.Dp:i=new H(t.currentTime+this.AIt,oH(t.currentProgramDateTime,this.AIt));break;case Qi.wp:i=new mO(t.currentTime+this.AIt);break;case Qi.bp:i=new ll(t.currentTime+this.AIt);break;case Qi.yp:i=new ns(t.currentTime+this.AIt);break;case Qi.op:i=new za(t.currentTime+this.AIt);break;case Qi.ap:i=new pz(t.currentTime+this.AIt);break;case Qi.tp:i=new ce(t.currentTime+this.AIt);break;case Qi.mp:i=new rr(t.currentTime+this.AIt,t.playbackRate);break;case Qi.Ep:i=new B(t.currentTime+this.AIt,t.volume);break;case Qi.Km:i=new In(t.duration+this.AIt);break;case fa.CE:i=new hr(t.currentTime+this.AIt,t.readyState);break;default:i=t}super.cE(i)}be(){super.be(),this.Pit.be()}ge(){super.ge(),this.Pit.ge()}constructor(t){super(t),this.AIt=0,this.cU=new xQ(this,new Yn),this.Ol=new uu([this.cU.nt,super.QD()]),this.Pit=new Rz,this.Pit.d7(this.VF.parentElement),this.zit=new nU(this.Pit.ke,this.Ou,this.Ol,this.zl,this.ka,this.aY)}};function oH(t,i){return t?new Date(t.getTime()+1e3*i):void 0}var hH=class extends CQ{xY(t){if(t===Q.iN)return new rH(super.xY(t))}async _Y(t){const i=t;await i.Mm(),await super._Y(i.Zrt)}},aH=class extends iH{async Fv(t){await super.Fv(t),void 0===this.yIt&&(this.yIt=this.bIt(),this.jR.pIt=this.yIt)}bIt(){if(this.ct===1/0){const t=this.DSt;if(t.U>0)return x.max(0,t.Cn(0)-300)}return 0}X9(t,i,e,s,n,r,o,h){return void 0===r&&(r=!1),void 0===o&&(o=dZ.oTt),void 0===h&&(h=!1),h||(h=this.ct===1/0&&ui.$g&&ui.i_<3&&t<=this.sD),super.X9(t,i,e,s,n,r,o,h)}async tr(){await super.tr(),this.yIt=void 0,this.jR.pIt=0}async gn(){await super.gn(),await this.jR.Mm(),await this.vY._Y(this.jR)}static iM(t){var i;return(!t||"google-dai"!==(null==t||null==(i=t.ssai)?void 0:i.integration))&&(ui.$g&&ui.i_<4)}constructor(t,i,e,s,n,r,o,h){const a=new hH(new rt(r));super(t,i,e,s,n,a.xY(o),h),this.vY=a,this.yIt=void 0}};r(),r(),r(),r(),r();var uH=class extends Zc{get Zrt(){return this.jR}get FD(){return this.jR.FD}get GD(){return this.jR.GD}constructor(t){super(t)}};r(),r(),r();var cH=class extends zQ{mot(){return this.MIt?this.Iq:super.mot()}pot(t){this.MIt?this.Iq=t:super.pot(t)}JI(){return this.MIt?this.TIt:super.JI()}Kb(){return this.MIt?this.gM:super.Kb()}yot(){return this.MIt?this.SIt:super.yot()}bot(){return this.MIt?this.Tq:super.bot()}Mot(t){this.MIt?this.Tq=t:super.Mot(t)}c2(t,i,e){return this.l2((e=>this.NIt(t,i,e)),e)}NIt(t,i,e){return super.c2(t,i,e)}c4(){return this.l2((()=>this.IIt()))}IIt(){return super.c4()}f2(t,i,e){return this.l2((e=>this.DIt(t,i,e)),e)}DIt(t,i,e){return super.f2(t,i,e)}yJ(){return this.MIt?this.net:super.yJ()}i4(){this.MIt?this.EIt=!0:super.i4()}a4(t,i){this.U2(),this.MIt?(this.SIt=this.SIt.WO(new ge([t,i])),this.kIt.push({Hw:"Qct",OP:t,RP:i})):this.LIt(t,i)}LIt(t,i){super.a4(t,i)}L2(t,i){return this.l2((()=>this.xIt(t,i)))}xIt(t,i){return super.L2(t,i)}u4(t,i){this.U2(),this.MIt?(this.SIt=this.SIt.HO(new ge([t,i])),this.kIt.push({Hw:"Rb",OP:t,RP:i})):this.CIt(t,i)}CIt(t,i){super.u4(t,i)}Rb(t,i,e){return this.l2((e=>this.jIt(t,i,e)),e)}jIt(t,i,e){return super.Rb(t,i,e)}hJ(t){return this.l2((()=>this.OIt(t)))}OIt(t){return super.hJ(t)}async l2(t,i){this.U2(),this.MIt&&(await Ic(this.MIt.rA,i),this.U2()),re(i);try{this.W2=t(i),await this.W2}finally{this.W2=void 0}}U2(){if(this.W2)throw new g("Internal error")}async RIt(){if(this.MIt)throw new w("Already locked");this.MIt=new pa,this.PIt(),this.W2&&(await this.W2.catch(ul),this.PIt())}zIt(){var t;null==(t=this.MIt)||t.eA(),this.MIt=void 0,this.BIt()}PIt(){this.gM=super.Kb(),this.Iq=super.mot(),this.Tq=super.bot(),this.TIt=super.JI(),this.SIt=super.yot(),this.net=super.yJ(),this.EIt=!1}BIt(){this.U2(),super.pot(this.Iq),super.Mot(this.Tq);const t=this.kIt.slice();Or(this.kIt);for(const i of t)"Qct"===i.Hw?this.LIt(i.OP,i.RP):this.CIt(i.OP,i.RP);this.EIt&&super.i4(),this.TIt.tR(super.JI())||this.yo(new Gs(W.ZK))}Mm(){var t;null==(t=this.MIt)||t.Dm(),this.MIt=void 0,super.Mm()}constructor(t){super(t),this.W2=void 0,this.MIt=void 0,this.Iq=0,this.TIt=ge.cR(),this.SIt=ge.cR(),this.kIt=[],this.net=!1,this.EIt=!1,this.Tq=0,this.gM=t.md}},lH=class extends cH{JI(){var t,i;return super.JI().WO(null!=(i=null==(t=this.UIt)?void 0:t.KI)?i:ge.cR())}yot(){var t,i;return super.yot().WO(null!=(i=null==(t=this.UIt)?void 0:t.r4)?i:ge.cR())}pot(t){super.pot(t),this.UIt&&(this.UIt.pq=t)}Mot(t){super.Mot(t),this.UIt&&(this.UIt._q=t)}LIt(t,i){super.LIt(t,i),this.UIt&&this.UIt.a4(t,i)}CIt(t,i){super.CIt(t,i),this.UIt&&this.UIt.u4(t,i)}async jIt(t,i,e){re(e);const s=[];s.push(super.jIt(t,i,e)),this.UIt&&s.push(this.UIt.Rb(t,i,e)),await Promise.all(s)}rJ(t){return!!super.rJ(t)||this.UN.QIt(t)}OIt(t){return super.rJ(t)?super.OIt(t):this.UN.FIt(t)}YIt(t){var i,e;null==(i=this.UIt)||i.fn(Ph,this.Tot),this.UIt=t,null==(e=this.UIt)||e.yn(Ph,this.Tot)}constructor(t,i){super(i),this.UIt=void 0,this.UN=t}},dH=class extends RQ{rJ(t){const i=void 0!==this.X4,e=void 0!==this.q4,s=t.n3.some((t=>sa(t.vS,"audio"))),n=t.n3.some((t=>sa(t.vS,"video")));return i===s&&e===n&&(!!super.rJ(t)||(!(!this.VIt||!this.VIt.rJ(t))||this.UN.GIt(t)))}async hJ(t){return super.rJ(t)?await super.hJ(t):this.VIt&&this.VIt.rJ(t)?(this.WIt(),await this.hJ(t)):(await this.UN.ZIt(t),await this.hJ(t))}QIt(t){return this.rJ(this.HIt(t))}FIt(t){return this.hJ(this.HIt(t))}HIt(t){const i=this.md,e=i.n3.map((i=>sa(t.vS,"audio")&&sa(i.vS,"audio")||sa(t.vS,"video")&&sa(i.vS,"video")?t:i));return il({},i,{n3:e})}s3(t,i,e,s){super.s3(t,i,e,s),this.VIt&&this.VIt.s3(t,i,e,s)}XIt(){return!this.qIt&&this.KIt}_d(){return void 0!==this.JIt?this.JIt:this.XIt()?this.$A:super._d()}J4(t){this.$A=t,this.JIt=void 0,this.XIt()||super.J4(t)}cot(){return!this.XIt()&&super.cot()}i4(){this.JIt=x.max(fH(this.WF.Z4),fH(this.WF.H4)),this.XIt()||super.i4()}G2(){this.JIt=void 0,this.XIt()||super.G2()}got(t){return new lH(this,t)}$It(){this.qIt=!this.qIt}WIt(){const t=this.WF,i=this.VIt;i&&(this.qIt=!this.qIt,this.lot(i),this.tDt(t),this.XIt()&&this.iDt())}tDt(t){var i,e;this.VIt=t,null==(i=this.X4)||i.YIt(null==t?void 0:t.Z4),null==(e=this.q4)||e.YIt(null==t?void 0:t.H4)}eDt(t){const i=this.WF,e=this.VIt;if(!e)return;const s=this.qIt,n=s?i:e,r=(s?e:i).KI.oR(t);if(!r)return;const o=HQ(n.KI,this.yot()).oR(r.jn(0),si);return!o||r.jn(0)+si>=o.jn(0)?void 0:x.max(r.jn(0),o.Cn(0))}sDt(t,i){if(this.KIt)return Promise.resolve();const e=this.qIt?this.VIt:this.WF;return e?(this.KIt=!0,this.nDt((i=>{if(re(i),this.KIt)return async function(t,i,e){re(e);const s=[];t.Z4&&s.push(DR(t.Z4,i,e));t.H4&&s.push(DR(t.H4,i,e));await Promise.all(s),t.i4()}(e,t,i)}),i)):Promise.resolve()}iDt(){if(!this.KIt)return;const t=this.qIt?this.VIt:this.WF;if(!t)return;var i;this.KIt=!1;const e=null!=(i=this.JIt)?i:this.$A;t.ct<e&&t.J4(e),t.G2()}rDt(t){var i;const e=null!=(i=this.JIt)?i:this.$A;t.J4(e),this.qIt?this.lot(t):this.tDt(t)}yot(){var t,i,e;const s=null!=(e=null==(t=this.X4)?void 0:t.r4)?e:ge.cR();var n;const r=null!=(n=null==(i=this.q4)?void 0:i.r4)?n:ge.cR();return s.WO(r)}async nDt(t,i){const e=[];this.X4&&e.push(this.X4.RIt()),this.q4&&e.push(this.q4.RIt());try{await Promise.all(e),await t(i)}finally{this.X4&&this.X4.zIt(),this.q4&&this.q4.zIt()}}vot(t){t.type===W.ZK&&this.UN.q2(),super.vot(t)}constructor(t,i){super(i),this.VIt=void 0,this.$A=NaN,this.qIt=!1,this.KIt=!1,this.JIt=void 0,this.lot(i),this.UN=t}};function fH(t){if(!t)return 0;const i=t.KI;return i.U>0?i.jn(i.U-1):0}function Au(t){return t.md.Hw===vl.mU}r();var gH=class extends uH{get oDt(){return this.hDt}JI(){return super.JI().WO(this.hDt.KI)}_d(){if(!this.aDt){const t=this.WF;if(t&&Au(t))return t.ct}return super._d()}Xrt(){return!!super.Xrt()&&!(!this.aDt&&!this.yJ())}qrt(){return!!super.qrt()&&!(!this.aDt&&super.Xrt()&&!this.yJ())}yJ(){const t=this.WF;return!(!t||!Au(t))&&t.yJ}LD(){return this.Fo.WO(this.jR.kD)}zD(){return super.zD().WO(this.hDt.PD)}RD(){return super.RD()}Hrt(){var t;return null!=(t=super.Hrt())?t:this.hDt.ZF}sE(){return this.hV=!1,super.sE()}eE(){this.hV=!0,super.eE()}o7(){this.aDt=!0,super.o7(),this.hDt.o7()}h7(){this.aDt=!1,super.h7(),this.hDt.o7()}nD(){var t;return null!=(t=this.A9)?t:super.nD()}UD(){return void 0!==this.A9||super.UD()}Gp(t,i,e){void 0===i&&(i=!1),void 0===e&&(e=!1),this.uDt.Dm(),this.Z9.Dm(),this.Z9=new Ai,this.cDt=Te(this.X9(t,i,e,this.cDt,this.Z9.wm),this.Z9).catch(ul)}async X9(t,i,e,s,n){this.A9=t,this.q9=t,this.yo(new ll(t)),s&&await s.catch(ul),re(n),this.WF&&Au(this.WF)&&this.WF.iDt(),this.A9=void 0,super.Gp(t,i,e),this.hDt.Gp(t,i,e),this.lDt()}UF(t){const i=this.ZF;if(!i||j(i.getTime()))return;const e=(t.getTime()-i.getTime())/1e3;this.Gp(e)}l7(){super.l7(),this.hDt.l7()}get FD(){return this.dDt.FD}get GD(){return this.dDt.GD}be(){this.eV&&(this.eV=!1,this.dDt.be())}ge(){this.eV||(this.eV=!0,this.dDt.ge())}async fDt(){var t;this.A9=void 0,this.q9=NaN,this.Fo=ge.cR(),null==(t=this.gDt)||t.Dm(),this.uDt.Dm(),this.Z9.Dm(),this.cDt&&(await this.cDt.catch(ul),this.cDt=void 0)}iot(t){super.iot(t),this.hDt.gY=t}eot(t){super.eot(t),this.hDt.f7=t}QD(){return this.Ol}dE(t,i,e,s,n,r,o,h){return this.cU.dE(t,i,e,s,n,r,o,h)}uY(t){return this.cU.uY(t)}oY(t,i,e,s,n){throw new g("Not implemented yet")}nY(){return!1}_U(t){this.cU._U(t)}cY(){this.cU.tr(),super.cY()}async $n(t){const i=await super.$n(t);return Au(i)&&this.lDt(),i}async tr(){await this.fDt(),await super.tr(),await this.hDt.tr()}async Mm(){await this.fDt(),this.cU.gn(),this.Ol.gn(),await super.Mm()}hot(t){return new dH(this,t)}oot(t){return new Ws(t)}lDt(){this.uDt.Dm(),this.uDt=new Ai,this.cDt=Te(this._Dt(this.cDt,this.uDt.wm),this.uDt).catch(ul)}async _Dt(t,i){if(t&&await t.catch(ul),this.WF&&Au(this.WF))for(;;){let t;for(re(i),this.vDt()&&this.$It(),this.WF.iDt(),re(i);;){const e={stack:[],error:void 0,hasError:!1};try{if(re(i),this.vDt())break;if(t=this.WF.eDt(this.nD()),void 0!==t){0,this.wDt(),await this.WF.sDt(t,i),re(i),this.hDt.Gp(t);break}const s=lo(e,Ai.xm([i]),!1);await Promise.race([this.Fm(Qi.Dp,s.wm),this.mDt(s.wm)])}catch(t){e.error=t,e.hasError=!0}finally{os(e)}}for(re(i);!this.vDt();)await this.jR.Fm([Qi.Dp,Qi.tp,fa.CE],i)}}vDt(){const t=this.WF;if(void 0===t||!Au(t))return!1;const i=this.nD(),e=this.jR.KI;if(!this.jR.hD&&e.gr(i))return!1;return!!HQ(this.hDt.KI,t.yot()).JO(i,i+si)}$It(){if(this.pDt)return;this.pDt=!0,this.Fo=this.LD();const t=PR(this),i=this.UD(),e=this.RD(),s=this.jR,n=this.hDt,r=this.WF;r.iDt(),r.$It(),zR(n,t),this.uot(n),this.hDt=s,s.eE(),s.mD=!0,this.pDt=!1;const o=this.UD();i!==o&&(o?this.yo(new ll(this.sD)):this.yo(new ns(this.sD)));const h=this.RD();e!==h&&this.yo(new hr(this.sD,h)),o||this.wDt()}wDt(){const t=this.jR,i=this.dDt;if(i===t)return;const e=this.GD,s=this.FD;this.dDt=t,this.eV&&(i.be(),t.ge());const n=this.GD,r=this.FD;n>0&&r>0&&(e!==n||s!==r)&&this.yo(new lr)}GIt(t){return void 0!==this.hDt.IJ([t])}async ZIt(t){this.wDt();const i=this.WF,e=this.hDt;await e.tr();const s=await e.$n(t);i.rDt(s)}mDt(t){return this.gDt=new pa,Ic(this.gDt.rA,t)}q2(){var t;null==(t=this.gDt)||t.eA()}cE(t){t.type===Qi.bp&&this.q9===t.currentTime||(t.type===Qi.yp&&(this.q9=NaN,this.wDt()),t.type!==fa.CE&&t.type!==Qi.vp&&t.type!==Qi.tp||this.pDt||!this.vDt()?(t.type!==Qi.tp||this.hD)&&super.cE(t):this.lDt())}constructor(t,i,e){super(t),this.aDt=!1,this.A9=void 0,this.q9=NaN,this.Fo=ge.cR(),this.hV=!0,this.pDt=!1,this.eV=!0,this.gDt=void 0,this.cDt=void 0,this.uDt=new Ai,this.Z9=new Ai,this.hDt=i,this.dDt=t,this.jR.ge(),this.hDt.be(),this.cU=new xQ(this,e),this.Ol=new uu([this.cU.nt,super.QD()])}},_H=class extends gH{get Zrt(){return this.jR}get oDt(){return this.hDt}be(){super.be(),this.Pit.be()}ge(){super.ge(),this.Pit.ge()}get VF(){return this.jR.VF}get D3(){return this.jR.D3}get JD(){return this.jR.JD}set JD(t){this.jR.JD=t}d7(t){this.jR.d7(t),this.hDt.d7(t)}aE(){this.jR.aE(),this.hDt.aE()}tE(){return this.jR.tE()}_a(){return this.rP}uot(t){const i=this.$D(),e=this.tE();super.uot(t),this.rP.WE=t.aY,this.$D()!==i&&this.yo(new ar),this.tE()!==e&&this.yo(new OI)}Mm(){return this.rP.gn(),this.zit.gn(),this.Pit.gn(),super.Mm()}constructor(t,i){super(t,i,new Yn),this.rP=new Th(t.aY),this.Pit=new Rz,this.Pit.d7(t.VF.parentElement),this.zit=new nU(this.Pit.ke,this.Ou,this.nt,this.zl,this.ka,this.aY)}},vH=class extends CQ{xY(t){if(t===Q.iN){const i=super.xY(t),e=super.xY(t);return new _H(i,e)}return super.xY(t)}async _Y(t){t instanceof _H?(await t.Mm(),await super._Y(t.Zrt),await super._Y(t.oDt)):await super._Y(t)}},wH=class extends iH{async gn(){await super.gn(),await this.vY._Y(this.jR)}static iM(t){var i;return!ui.Qs&&!ui.C_&&!(t&&"google-dai"===(null==(i=t.ssai)?void 0:i.integration))}constructor(t,i,e,s,n,r,o,h){const a=new rt(new vH(r));super(t,i,e,s,n,a.xY(o),h),this.vY=a}};r(),r(),r();var mH=class extends RQ{got(t){return new cH(t)}Kb(){return this.ADt?this.gM:super.Kb()}JI(){return this.ADt?this.TIt:super.JI()}_d(){return this.ADt?this.$A:super._d()}J4(t){this.ADt?(this.$A=t,this.yDt=!0):super.J4(t)}zD(){return this.ADt?this.bDt?this.bDt.g4():this.e3:super.zD()}s3(t,i,e,s){this.ADt?this.bDt=new MR(t,i,e,s):super.s3(t,i,e,s)}cot(){return this.ADt?this.net&&!1!==this.EIt:super.cot()}i4(){this.ADt?this.EIt=!0:super.i4()}G2(){this.ADt?this.EIt=!1:super.G2()}rJ(t){return!this.ADt&&super.rJ(t)}hJ(t){return this.ADt?Promise.reject(new w("Not supported")):super.hJ(t)}async RIt(){if(this.ADt)throw new w("Already locked");this.ADt=!0,this.PIt();const t=[];this.X4&&t.push(this.X4.RIt()),this.q4&&t.push(this.q4.RIt()),await Promise.all(t)}zIt(){this.ADt=!1,this.X4&&this.X4.zIt(),this.q4&&this.q4.zIt(),this.BIt()}PIt(){this.gM=super.Kb(),this.TIt=super.JI(),this.$A=super._d(),this.e3=super.zD(),this.yDt=!1,this.EIt=void 0,this.bDt=void 0}BIt(){if(this.yDt&&(super.J4(this.$A),this.yDt=!1),void 0!==this.bDt){const t=this.bDt;super.s3(t.Cn,t.jn,t._4,t.v4),this.bDt=void 0}void 0!==this.EIt&&(this.EIt?super.i4():super.G2(),this.EIt=void 0)}constructor(t){super(t),this.ADt=!1,this.TIt=ge.cR(),this.$A=0,this.yDt=!1,this.net=!1,this.EIt=void 0,this.e3=ge.cR(),this.bDt=void 0,this.lot(t),this.gM=t.md}},pH=class extends Co{get Zrt(){return this.jR}sE(){return void 0!==this.WF&&Au(this.WF)&&this.hD&&this.Gp(0),super.sE()}Gp(t,i,e){void 0!==this.WF&&Au(this.WF)&&this.hD&&t<this.ct&&this.MDt(),super.Gp(t,i,e)}o7(){this.TDt=!0,super.o7()}h7(){this.TDt=!1,this.SDt()||super.h7()}SDt(){return this.TDt||this.NDt}IDt(){this.NDt||(this.NDt=!0,super.o7())}DDt(){this.NDt&&(this.NDt=!1,this.SDt()||super.h7())}$n(t){this.EDt.Dm();const i=this.ON(t,this.kDt);return this.LDt=i,i}async ON(t,i){return i&&await i.catch(ul),this.DDt(),await super.$n(t)}hot(t){return new mH(t)}oot(t){return new Ws(t)}tr(){this.EDt.Dm();const t=this.sIt(this.kDt);return this.LDt=t,t}async sIt(t){return t&&await t.catch(ul),this.DDt(),await super.tr()}MDt(){this.IDt(),this.EDt.Dm(),this.EDt=new Ai,this.kDt=Te(this.xDt(this.LDt,this.kDt,this.EDt.wm),this.EDt).catch(bu)}async xDt(t,i,e){t&&await t.catch(ul),i&&await i.catch(ul),re(e);const s=this.WF;if(!s||!Au(s))return;const n=s.md;await s.RIt(),await this.jR.tr();const r=await this.jR.$n(n);r.J4(s.ct),s.lot(r),s.zIt(),this.DDt()}async Mm(){this.EDt.Dm(),this.kDt&&(await this.kDt.catch(ul),this.kDt=void 0),this.SDt()&&super.h7(),await super.Mm()}constructor(...t){super(...t),this.TDt=!1,this.NDt=!1,this.LDt=void 0,this.kDt=void 0,this.EDt=new Ai}},Rs=class extends CQ{xY(t){if(t===Q.iN)return new pH(super.xY(t))}async _Y(t){const i=t;await i.Mm(),await super._Y(i.Zrt)}static iM(){return ui.O_}};ki(new class extends pQ{Gk(t,i,e,s,n,r,o,h){const a=new yQ(ga.K_.Srt,ga.K_.Trt,ga.K_.Mrt,ga.K_.Irt);let u;u=aH.iM(h)?aH:wH.iM(h)?wH:eH;let c=i;return Rs.iM()&&(c=new Rs(c)),new u(e,s,n,r,a,c,Q.iN,t)}OY(){return!0}constructor(...t){super(...t),this.RY=bl.dF}}),r(),r(),sc((function(t){return class extends t{ma(){const t=this.dD.ga;return Gr(super.ma(),{get hesp(){return t}})}}}),hh.nu),r(),r(),r(),r(),r();var AH=0;function lu(t,i){if(void 0===i&&(i=!0),!t)return;let e=t;return"/"===e.charAt(0)&&(e=e.substring(1)),i&&"/"!==e.charAt(e.length-1)&&(e+="/"),e}function yH(t){var i,e,s;return il({},t,{baseUrl:lu(t.baseUrl),id:null!=(i=t.id)?i:String(AH++),timeBounds:il({},t.timeBounds,{scale:null!=(e=t.timeBounds.timescale)?e:1e3}),currentTime:t.currentTime?{value:t.currentTime.timestamp,scale:null!=(s=t.currentTime.timescale)?s:1e3}:void 0,audio:t.audio.map(NH),video:t.video.map(DH),metadata:t.metadata.map(kH),events:t.events.map(OH)})}var bH=0;function MH(t){const i=lu(t.initPattern,!1),e=lu(t.contPattern,!1);var s;return il({},t,{id:null!=(s=t.id)?s:String(bH++),continuationPattern:e?ov(e,"${segmentId}","{segmentId}"):void 0,initializationPattern:i?ov(i,"${initId}","{initId}"):void 0})}function TH(t){var i;const e=lu(t.initPattern,!1),s=lu(t.contPattern,!1);return il({},t,{continuationPattern:s?ov(s,"${segmentId}","{segmentId}"):void 0,initializationPattern:e?ov(e,"${initId}","{initId}"):void 0,segmentDuration:t.segmentDuration?{value:t.segmentDuration.duration,scale:t.segmentDuration.timescale}:void 0,segments:t.segments.map(SH),activeSegment:null==(i=So(t.segments,(t=>t.active)))?void 0:i.id})}function SH(t){var i;return il({},t,{timeBounds:il({},t.timeBounds,{endTime:void 0!==t.timeBounds.duration?t.timeBounds.startTime+t.timeBounds.duration:void 0,scale:null!=(i=t.timeBounds.timescale)?i:1e3})})}function Ps(t){return t&&"-"===t.charAt(0)}function NH(t){let i;try{var e;i=C(null!=(e=t.channels)?e:"2")}catch(t){i=2}return Ps(t.contPattern)||Ps(t.initPattern)?function(t,i){const e=t.initPattern,s=t.contPattern;return t.initPattern=void 0,t.contPattern=void 0,il({},MH(t),{baseUrl:lu(t.baseUrl),language:"eng",channels:i,sampleRate:t.samplerate,tracks:t.tracks.map((t=>{var i,n;return t.initPattern=null!=(i=t.initPattern)?i:e,t.contPattern=null!=(n=t.contPattern)?n:s,IH(t)}))})}(t,i):il({},MH(t),{baseUrl:lu(t.baseUrl),language:"eng",channels:i,sampleRate:t.samplerate,tracks:t.tracks.map(IH)})}function IH(t){let i;try{var e;i=C(null!=(e=t.channels)?e:"2")}catch(t){i=2}return Ps(t.contPattern)||Ps(t.initPattern)?function(t,i){return t.contPattern=t.baseUrl+t.contPattern,t.initPattern=t.baseUrl+t.initPattern,il({},TH(t),{baseUrl:"./",channels:i,sampleRate:t.samplerate})}(t,i):il({},TH(t),{baseUrl:lu(t.baseUrl),channels:i,sampleRate:t.samplerate})}function DH(t){return Ps(t.contPattern)||Ps(t.initPattern)?function(t){const i=t.initPattern,e=t.contPattern;return t.initPattern=void 0,t.contPattern=void 0,il({},MH(t),{baseUrl:lu(t.baseUrl),frameRate:t.framerate?{value:t.framerate.rate,scale:t.framerate.scale}:void 0,tracks:t.tracks.map((t=>(t.initPattern=i,t.contPattern=e,EH(t))))})}(t):il({},MH(t),{baseUrl:lu(t.baseUrl),frameRate:t.framerate?{value:t.framerate.rate,scale:t.framerate.scale}:void 0,tracks:t.tracks.map(EH)})}function EH(t){var i,e;return Ps(t.contPattern)||Ps(t.initPattern)?function(t){var i,e;return t.contPattern=t.baseUrl+t.contPattern,t.initPattern=t.baseUrl+t.initPattern,il({},TH(t),{baseUrl:"./",frameRate:t.framerate?{value:t.framerate.rate,scale:t.framerate.scale}:void 0,resolution:il({},t.resolution,{sarWidth:null==(i=t.resolution.sar)?void 0:i.width,sarHeight:null==(e=t.resolution.sar)?void 0:e.height})})}(t):il({},TH(t),{baseUrl:lu(t.baseUrl),frameRate:t.framerate?{value:t.framerate.rate,scale:t.framerate.scale}:void 0,resolution:il({},t.resolution,{sarWidth:null==(i=t.resolution.sar)?void 0:i.width,sarHeight:null==(e=t.resolution.sar)?void 0:e.height})})}function kH(t){var i;return il({},t,{id:null!=(i=t.id)?i:String(bH++),schemeId:"",tracks:t.tracks.map(LH)})}function LH(t){return il({},t,{segments:t.segments.map(CH)})}var xH=0;function CH(t){return{id:xH++,timeBounds:il({},t.timeBounds,{scale:t.timeBounds.timescale})}}var jH=0;function OH(t){var i,e;return il({},t,{id:null!=(i=t.id)?i:String(jH++),timeBounds:il({},t.timestamp,{scale:null!=(e=t.timestamp.timescale)?e:1e3})})}var RH=class{async CDt(t,i){const e={Hu:t,wm:i},s=await this.GI.jS(e);let n=await s.lS(i);return function(t){const i=t;if(cs(i.manifestVersion)&&Re(i.manifestVersion,"alpha"))return!0;let e,s;for(const t of i.presentations){for(const i of[...t.video,...t.audio])if(i.tracks.length>0){e=i.tracks[0],s=i;break}if(Rt(e))break}return(cs(null==s?void 0:s.initPattern)||cs(null==e?void 0:e.initPattern))&&!cs(null==e?void 0:e.initializationPattern)&&!cs(null==s?void 0:s.initializationPattern)}(n)&&(n=function(t){return il({},t,{availabilityDuration:{value:t.dvrDuration?t.dvrDuration.duration/t.dvrDuration.timescale:0},manifestVersion:"1.0.0",presentations:t.presentations.map(yH),contentBaseUrl:t.contentBaseUrl||"./"})}(n)),n}constructor(t){this.GI=t}};r();var PH=class extends Bo{get ga(){return this.Za||(this.Za=RS(this)),this.Za}Sk(){return this.jDt.Sk()}get bk(){return this.jDt.bk}get Mk(){return this.jDt.Mk}get Tk(){return this.jDt.Tk}yn(t,i){this.jDt.yn(t,i)}fn(t,i){this.jDt.fn(t,i)}constructor(t){super(),this.jDt=t}};r(),r(),r();var Qa=class{get $it(){const t=1-this.ODt**this.RDt;return this.PDt/t}yut(t,i){const e=this.ODt**t,s=i*(1-e)+e*this.PDt;j(s)||(this.PDt=s,this.RDt+=t)}hJ(t){const i=x.exp(x.log(.5)/t);if(i===this.ODt)return;if(0===this.RDt)return void(this.ODt=i);const e=this.$it,s=1-i**this.RDt;this.PDt=e*s,this.ODt=i}constructor(t){this.PDt=0,this.RDt=0,this.ODt=x.exp(x.log(.5)/t)}},Ns=class t{get $it(){return this.Dut()?x.max(this.zDt.$it,this.BDt.$it):this.UDt}yut(t){const i=me.J_(),e=t;this.QDt&&void 0!==this.FDt&&i-this.FDt>=this.YDt&&this.tr(),this.VDt+=1,this.zDt.yut(1,e),this.BDt.yut(1,e),this.GDt.push(e),this.GDt.length>this.WDt&&this.GDt.shift(),this.FDt=i}Dut(){return void 0!==this.FDt&&me.J_()-this.FDt<=this.YDt}tr(){this.zDt=new Qa(this.ZDt),this.BDt=new Qa(this.HDt),this.VDt=0,this.GDt=[],this.FDt=void 0}constructor(i=t.XDt,e=t.qDt,s=t.Eut,n=!1){this.VDt=0,this.GDt=[],this.FDt=void 0,this.YDt=6e4,this.WDt=10,this.ZDt=i,this.HDt=e,this.UDt=s,this.QDt=n,this.zDt=new Qa(i),this.BDt=new Qa(e)}};Ns.XDt=2,Ns.qDt=5,Ns.Eut=.1,r();var zH=class{hq(t){for(const i of this.KDt)i.hq(t)}aq(t){for(const i of this.KDt)i.aq(t)}uq(t,i){for(const e of this.KDt)e.uq(t,i)}cq(t){for(const i of this.KDt)i.cq(t)}constructor(t){this.KDt=t}};r();var BH=class{hq(t){this.JDt=t}aq(t){this.$Dt.yut(t-this.JDt)}uq(t){}cq(t){}constructor(t){this.JDt=0,this.$Dt=t}};r();var UH=class{aq(t){this.tEt=t}uq(t,i){this.xut.yut(t-this.tEt,i.byteLength),this.tEt=t}cq(t){}hq(t){}constructor(t){this.tEt=0,this.xut=t}};r();var QH=class{hq(t){}uq(t,i){const e=i.byteLength,s=this.iEt;this.iEt=e;const n=t-this.An;this.An=t,this.eEt.t$(i);const r=!this.eEt.sEt(),o=e>=this.nEt;s!==me.Ys.Ev&&r&&o&&this.xut.yut(n,e)}aq(t){this.An=t}cq(t){}constructor(t,i=0){this.eEt=new FH,this.An=0,this.iEt=0,this.xut=t,this.nEt=i}},FH=class extends mo{sEt(){return this.rEt}t$(t){this.rEt=!1,super.t$(t)}JJ(t,i){this.oEt&&this.oEt!==Fo.HL||(this.rEt=!0),super.JJ(t,i),this.oEt=t}c$(t){return!1}d$(t){}g$(t){}constructor(...t){super(...t),this.oEt=void 0,this.rEt=!1}};r();var YH=function(t){return t.hEt="sample",t}({}),VH=class extends Bo{nF(){if(!this.Dut())return;const t=me.J_();t-this.aEt>1e3&&(this.aEt=t,fc.K_.nF(this.$it))}constructor(...t){super(...t),this.aEt=0}};r();var GH=class extends VH{get $it(){return this.Dut()?this.PDt:this.uEt}Dut(){return this.Cy.length>=3}yut(t,i){if(0===t)return;const e={mF:8*i/t,cEt:i};if(this.Cy.push(e),this.lEt+=e.cEt,this.Cy.length>30){const t=this.Cy.shift();this.lEt-=t.cEt}const s=this.Cy.slice().sort(((t,i)=>t.mF-i.mF));let n=0;for(let t=0;t<s.length;t++){const i=s[t];if(n+=i.cEt/this.lEt,this.PDt=i.mF,n>=.5)break}this.nF(),this.yo(new Gs(YH.hEt))}constructor(t){super(),this.Cy=[],this.lEt=0,this.uEt=t,this.PDt=t}};r();var Y=class t extends VH{yut(t,i){const e=8*i/t;this.zDt.yut(t,e),this.BDt.yut(t,e),this.dEt+=i,this.nF(),this.yo(new Gs(YH.hEt))}get $it(){return this.Dut()?x.min(this.zDt.$it,this.BDt.$it):this.UDt}Dut(){return this.dEt>=this.fEt}constructor(i=t.XDt,e=t.qDt,s=t.gEt,n=t.Eut){super(),this.dEt=0,this.fEt=s,this.zDt=new Qa(i),this.BDt=new Qa(e),this.UDt=n}};Y.gEt=128e3,Y.Eut=zL,Y.XDt=.5,Y.qDt=5;var WH=class{_Et(t){var i;null==(i=this.xut)||i.fn(YH.hEt,this.vEt),this.xut=new GH(t),this.xut.yn(YH.hEt,this.vEt)}wEt(t){this.mEt.push(t)}pEt(t){Ro(this.mEt,t)}get mF(){var t,i;return null!=(i=null==(t=this.xut)?void 0:t.$it)?i:this.AEt}get pF(){return this.yEt.$it}AF(t){if("segment"!==t.Hw)return;if("video"!==t.lN)return;const i=[new BH(this.yEt)];return this.xut&&("stream"===t.CS&&"initialization-segment"!==t.cN?i.push(new QH(this.xut,1e3)):i.push(new UH(this.xut))),new zH(i)}constructor(t,i){this.mEt=[],this.vEt=()=>{for(const t of this.mEt)t()},this.AEt=t>0?t:Y.Eut,this.yEt=new Ns(Ns.XDt,Ns.qDt,i>0?i:Ns.Eut),this._Et(this.AEt)}};r();var ZH=class{bEt(t,i){const e=i-t;(!this.MEt||e<this.MEt)&&(this.MEt=e)}TEt(t,i){this.SEt=i-t}NEt(t,i){this.IEt=i-t}DEt(t,i){this.EEt=i-t}get kEt(){const t=rs([this.IEt,this.EEt].filter(Rt),_c);return void 0!==t?me.J_()/1e3+t:void 0!==this.SEt?me.J_()/1e3+this.SEt:void 0!==this.MEt?me.J_()/1e3+this.MEt:void 0}LEt(t){const i=this.kEt;if(void 0!==i)return i-t}tr(){this.MEt=void 0,this.SEt=void 0,this.EEt=void 0,this.IEt=void 0}};r();var HH=.25,XH=400,qH={minimumOffset:.2,targetOffset:.45,maximumOffset:.7,forceSeekOffset:3,minimumPlaybackRate:D,maximumPlaybackRate:Ut},KH={minimumOffset:.4,targetOffset:.65,maximumOffset:1,forceSeekOffset:3,minimumPlaybackRate:D,maximumPlaybackRate:Ut},JH={minimumOffset:.4,targetOffset:.7,maximumOffset:.9,forceSeekOffset:3,minimumPlaybackRate:D,maximumPlaybackRate:Ut},$H={minimumOffset:.2,targetOffset:.45,maximumOffset:1,forceSeekOffset:3,minimumPlaybackRate:D,maximumPlaybackRate:Ut},tX={minimumOffset:.5,targetOffset:1.125,maximumOffset:1.75,forceSeekOffset:2.55,minimumPlaybackRate:D,maximumPlaybackRate:Ut};function iX(t){if(me.xw.jw){const i=(XH+250)/1e3,e=x.max(i,t.minimumOffset),s=x.max(e+HH,t.targetOffset),n=x.max(s+HH,t.maximumOffset);return{minimumOffset:e,targetOffset:s,maximumOffset:n,forceSeekOffset:x.max(n+HH,t.forceSeekOffset),minimumPlaybackRate:D,maximumPlaybackRate:Ut}}return t}function eX(){let t;return t=me.Ys.Mv?$H:me.Ys.Dv?KH:me.Ys.Iv?"Android"===me.xw.Cw?JH:qH:tX,me.xw.jw?iX(t):t}r(),r(),r();var sX=class{xEt(t){for(const i of this.TIt)i[1]=i[1].Sn(t)}CEt(t,i){let e=!0;for(const s of this.TIt){let n=s[1];n=n.HO(i),t===s[0]&&(n=n.WO(i),e=!1),s[1]=n.GO(1e-5)}e&&this.TIt.push([t,i])}jEt(t){for(const i of this.TIt)i[1]=i[1].HO(t)}OEt(t){for(let i=0;i<this.TIt.length;i++)if(this.TIt[i][1].gr(t))return this.TIt[i][0]}constructor(){this.TIt=[]}},nX=class extends Bo{get KI(){let t=ge.cR();for(const[,i]of this.REt){const e=i.het+i.RB,s=e+i.ct;t=t.WO(ge.uR(e,s))}return this.Aot.KI.WO(t)}OEt(t){return this.PEt.OEt(t)}get zEt(){return void 0!==this.BEt}get UEt(){return this.BEt?this.BEt.rA:Promise.resolve()}async appendStream(t,i,e){if(this.zEt)throw new g("Concurrent appends are not supported.");try{const s={stack:[],error:void 0,hasError:!1};try{const n=lo(s,Ai.xm([e,this.H2.wm]),!1).wm;this.PEt.xEt(this.KI),this.BEt=new pa;const r=bO(t).getReader();for(;;){const t=await Ic(r.read(),n);if(t.done)break;const e=t.value,s={Hw:z.XK,xS:Dt(e.map((t=>t.Zut)))},o={ct:xr(e,(t=>t.ct)),het:e[0].l_t,RB:-i.bat.QEt};await this.d2(s,o,n);const h=o.het+o.RB,a=h+o.ct;this.PEt.CEt(i.bat,ge.uR(h,a))}}catch(t){s.error=t,s.hasError=!0}finally{os(s)}}finally{i.FEt();const t=this.BEt;this.BEt=void 0,null==t||t.eA()}}async c2(t,i,e,s){if(this.zEt)throw new g("Concurrent appends are not supported.");try{const n={stack:[],error:void 0,hasError:!1};try{const r=lo(n,Ai.xm([s,this.H2.wm]),!1).wm;this.BEt=new pa,await this.d2(t,i,r);const o=i.het+i.RB,h=o+i.ct;this.PEt.xEt(this.KI),this.PEt.CEt(e,ge.uR(o,h))}catch(t){n.error=t,n.hasError=!0}finally{os(n)}}finally{const t=this.BEt;this.BEt=void 0,null==t||t.eA()}}async d2(t,i,e){this.Aot.s4===Q.iN&&this.YEt.Ylt(t.xS,i.het,i.het+i.ct,i.RB,this.QAt,!1);const s=this.jR.FR.QR,n=this.Aot.KI.gr(this.jR.sD);if(s||n)return await this.VEt(e),await this.Aot.c2(t,i,e);this.REt.push([t,i]);const r=this.REt[0][1].het;return this.REt[this.REt.length-1][1].het-r>=.4?await this.VEt(e):void 0}async f2(t,i){if(this.zEt)throw new g("Concurrent appends are not supported.");try{const e={stack:[],error:void 0,hasError:!1};try{const s=lo(e,Ai.xm([i,this.H2.wm]),!1).wm;this.BEt=new pa,await this.VEt(s),await this.Aot.f2(t,{},s),this.Aot.s4===Q.iN&&this.YEt.xot(t.xS)}catch(t){e.error=t,e.hasError=!0}finally{os(e)}}finally{const t=this.BEt;this.BEt=void 0,null==t||t.eA()}}async Rb(t,i,e){if(this.zEt)throw new g("Concurrent appends are not supported.");try{const s={stack:[],error:void 0,hasError:!1};try{const n=lo(s,Ai.xm([e,this.H2.wm]),!1).wm;this.BEt=new pa,await this.VEt(n),await this.Aot.Rb(t,i,n),this.PEt.jEt(ge.uR(t,i))}catch(t){s.error=t,s.hasError=!0}finally{os(s)}}finally{const t=this.BEt;this.BEt=void 0,null==t||t.eA()}}async rH(t){if(this.zEt)throw new g("Concurrent appends are not supported.");try{const i={stack:[],error:void 0,hasError:!1};try{const e=lo(i,Ai.xm([t,this.H2.wm]),!1).wm;this.BEt=new pa,await this.VEt(e)}catch(t){i.error=t,i.hasError=!0}finally{os(i)}}finally{const t=this.BEt;this.BEt=void 0,null==t||t.eA()}}async VEt(t){for(const[i,e]of this.REt)await this.Aot.c2(i,e,t);Or(this.REt)}async Mm(){for(this.H2.Mm();this.zEt;)await this.UEt}constructor(t,i,e,s){super(),this.REt=[],this.BEt=void 0,this.H2=new Ai,this.jR=i,this.Aot=t,this.QAt=e,this.YEt=s,this.PEt=new sX,this.Aot.yn(W.ZK,this.Ds)}};r(),r();var rX=class{async GEt(t,i){if(this.WEt>=this.ZEt.maxRetries)throw t;const e=this.HEt(this.WEt++);await Bn(e,i)}HEt(t){let i=0;return 0!==t&&(i+=x.min(this.ZEt.maximumBackoff,this.ZEt.minimumBackoff*(2**t-1))),i}constructor(t){this.WEt=0,this.ZEt=t}};r(),r();var oX=function(t){return t.XEt="emsgdata",t}({}),hX=class extends Gs{constructor(t,i){super("emsgdata"),this.value=t,this.data=i}};r();var aX=class{start(t){this.kK=t}qEt(t){this.kK.enqueue(t)}};r(),r();var Zn=function(t){return t.KEt="initdata",t.MANIFEST_UPDATE="manifestupdate",t.JEt="timestamps:v1",t}({});var uX="urn:theo:hesp:2020";function cX(t){if(t.hO!==uX)return;const i=t.lI;if(i===Zn.KEt){return function(t){if(!t||!jl(t))return;const i=t;return!Fn(i.index)||!Fn(i.offset)||i.index<0&&i.offset<0?void 0:{Hw:"initdata",index:i.index,offset:i.offset}}(JSON.parse(da(Os(t.cO),new J)))}if(i===Zn.MANIFEST_UPDATE){return function(t){if(!t||!jl(t))return;const i=t;return!Rt(i.url)||cs(i.url)?{Hw:"manifestupdate",url:i.url}:void 0}(JSON.parse(da(Os(t.cO),new J)))}if(i===Zn.JEt){const i=Os(t.cO),e=new J,s=Ze(i,e).toNumber()/t.eC,n=Ze(i,e).toNumber()/1e3,r=Se(i,e)/1e3;let o;return e.tc+8<=i.byteLength&&(o={hours:Se(i,e),minutes:ww(i,e),seconds:ww(i,e),frames:Tt(i,e)}),{Hw:Zn.JEt,$Et:s,tkt:n,ikt:r,ekt:o}}}var lX=class extends aX{transform(t){if(t.Hw===Fo.qL)try{const i=cX(tn.Xx(t.xS));i&&this.skt.yo(new hX(i.Hw,i))}catch(t){false}this.qEt(t)}Mm(){this.skt.Bo()}constructor(...t){super(...t),this.skt=new Bo}};r();var dX=class{start(t){this.tf=new fX(t)}transform(t){this.tf.t$(t)}flush(){this.tf.e$()}},fX=class extends mo{c$(t){return!0}d$(t){this.kK.enqueue(t)}g$(t){}constructor(t){super(),this.kK=t}};r(),r();var gX=Io.fromNumber(ef);var _X=class extends Bo{async jS(t){for(;;)try{return await this.dU.jS(t)}catch(i){if(F(i))throw i;await this.nkt.GEt(i,t.wm)}}constructor(t,i){super(),this.dU=t,this.nkt=i}};function vX(t,i,e,s,n,r,o,h){const a=new Oh;return n&&a.tT(function(t,i){return void 0===i&&(i=gX),new Oh({Range:"bytes="+t.toString()+"-"+i.toString()})}(n.start,n.end)),{Hu:t,RS:a,dN:!1,wm:h,Hw:as.YS,cN:e,lN:s,aN:r,uN:o,CS:i,_N:i===Me.qM}}r(),r();var wX=function(t){return t[t.INITIALIZER=0]="INITIALIZER",t[t.FRAMES=1]="FRAMES",t}({}),mX=class extends aX{transform(t){this.rkt.push(t),t.Hw===Fo.HL&&this.okt(this.rkt.splice(0),wX.FRAMES)}okt(t,i){const e={eC:this.JA,GZ:this.hH},s=Dt(t.map((t=>se(t.xS.xS)))),n=So(t,pX),r=tn.zx(n.xS.xS)[0],o={lN:this.mut,Yp:e,Zut:s,Hw:i,ct:this._d(r)/this.JA,l_t:mt(this.hkt(r),this.JA)};this.qEt(o)}_d(t){const i=t.Z[0];if(!i||0===i.Jj.length)return 0;var e;const s=null!=(e=i.Lx.Fj)?e:0;return i.Jj[0].rO.reduce(((t,i)=>{var e;return t+(null!=(e=i.ct)?e:s)}),0)}hkt(t){var i,e;return null!=(e=null==(i=t.Z[0].$j)?void 0:i.$j)?e:Io.UZERO}constructor(t,i){super(),this.rkt=[],this.hH=t,this.mut=this.hH.match(/video/)?lU.iN:lU.tN,this.JA=i}};function pX(t){return t.Hw===Fo.QL}r();var AX=class extends Bo{get bat(){return this.akt}blt(t){return t+1}get ukt(){return!1}get ckt(){return this.lkt}get zEt(){return void 0!==this.BEt}get UEt(){return this.BEt?this.BEt.rA:Promise.resolve()}Gp(t){this.lkt=t,this.dkt=void 0,this.fkt=void 0}gkt(){return void 0!==this.dkt}async _kt(){if(this.zEt)throw new g("Concurrent downloads are not supported.");try{this.BEt=new pa;let t;if("now"===this.lkt)t=me.Dw(this.akt.vkt("now"),this.akt.wkt);else{const i=this.lkt,e=0===i?1:this.akt.mkt(i);t=me.Dw(this.akt.vkt(e),this.akt.wkt)}const i=vX(t,Me.HM,jo.WS,this.mut,void 0,3e3,1e3,this.pkt.wm),e=await this.Akt.jS(i),s=await e.gS(this.pkt.wm),n=new T(s),{ykt:r,aC:o}=function(t){const i=Lu.Mx(new Hu(Os(t),new J)),e=So(i,(t=>t.Hw===Fo.JL||t.Hw===Fo.QL));if(void 0===e)return{ykt:t,aC:void 0};const s=Bt(t,0,e.tc),n=Bt(t,e.tc);return{ykt:s,aC:0===n.byteLength?void 0:n}}(n),h=tn.zx(Os(n));this.JA=function(t){const i=So(t,(t=>t.Hw===Fo.$k));return i.Z[0].aC.Lx.eC}(h);const a=function(t){const i=t.filter((t=>t.Hw===Fo.qL)),e=i.map((t=>cX(t))),s=So(e,(t=>(null==t?void 0:t.Hw)===Zn.KEt));if(!s)throw new g("No init data in init response");return s}(h);let u;if(this.dkt=a.index,this.fkt=a.offset,o){u=function(t,i,e){var s;const n=So(t,(t=>t.Hw===Fo.QL));var r;const o=mt(null!=(r=null==(s=n.Z[0].$j)?void 0:s.$j)?r:Io.UZERO,e),h=n.Z[0];var a;const u=null!=(a=h.Lx.Fj)?a:0,c=h.Jj[0],l=c.rO.reduce(((t,i)=>{var e;return t+(null!=(e=i.ct)?e:u)}),0)/e;return{het:o,ct:l,RB:i}}(tn.zx(Os(n)),-this.bat.QEt,this.JA)}return{initialization:r,data:o,metadata:u}}finally{const t=this.BEt;this.BEt=void 0,null==t||t.eA()}}bkt(){if(this.zEt)throw new g("Concurrent downloads are not supported.");this.BEt=new pa;const t=void 0!==this.fkt?Io.fromNumber(this.fkt):void 0;return KM(this.Mkt(this.dkt,t,this.pkt.wm)).pipeThrough(new Iu(new mX(this.bat.GZ,this.JA))).pipeThrough(new Iu(new yX(this.pkt.wm)))}async Mkt(t,i,e){const s=this.Tkt(t,i,e);return(await this.Akt.jS(s))._S().pipeThrough(new Iu(new dX)).pipeThrough(new Iu(this.Skt))}Tkt(t,i,e){const s=this.akt.Nkt(t),n=void 0!==i?{start:i,end:void 0}:void 0;return vX(me.Dw(s,this.akt.wkt),Me.qM,jo.QS,this.mut,n,25e3,1e3,e)}FEt(){void 0!==this.dkt&&(this.dkt=this.blt(this.dkt)),this.fkt=void 0;const t=this.BEt;this.BEt=void 0,null==t||t.eA()}cancelDownload(){var t;this.pkt.Dm(),this.pkt=new Ai,this.BEt=null!=(t=this.BEt)?t:new pa,this.dkt=void 0,this.fkt=void 0;const i=this.BEt;this.BEt=void 0,null==i||i.eA()}async Mm(){this.Bo(),this.Skt.Mm(),this.pkt.Dm(),await this.UEt,this.dkt=void 0,this.fkt=void 0}constructor(t,i,e){super(),this.lkt="now",this.pkt=new Ai,this.BEt=void 0,this.akt=t,this.nkt=new rX(e),this.Skt=new lX,this.Skt.skt.yn(oX.XEt,this.Ds),this.dU=i,this.mut=function(t){switch(t){case lU.tN:return Fh.tN;case lU.iN:return Fh.iN;default:return Fh.QS}}(t.Hw),this.Akt=new _X(this.dU,this.nkt)}};var yX=class{start(t){this.kK=t,this.Im.vm(this.Ikt)}flush(){this.Im._m(this.Ikt)}constructor(t){this.Ikt=()=>{this.kK.error(new Rh)},this.Im=t}};function tu(t){var i;return t.value/(null!=(i=t.scale)?i:1)}r(),r(),r(),r(),r();var bX="{initId}",MX=/{initId(?::0(?:\d+)d)?}/,TX=/{segmentId(?::0(?:\d+)d)?}/,SX=class{get o(){return this.Nb}get mF(){return this.rF}get DAt(){return this.Dkt}get Mrt(){return this.Byt}get Ekt(){return this.kkt}get Lkt(){return this.xkt}get wkt(){return me.Dw(this.Ckt,this.jkt.wkt)}get Qrt(){return this.Okt}get wh(){return this.NP}get Rkt(){return this.Pkt}get zkt(){return this.Bkt}get QEt(){return this.Ukt}get Qkt(){return this.Lyt}Yn(t){this.kkt=t.activeSegment,this.xkt=t.activeSequenceNumber,this.Byt=t.segments}constructor(t,i,e){var s,n,r,o;this.Byt=[],this.WP=t,this.Fkt=e,this.Nb=t.id,this.rF=t.bandwidth,this.Dkt=t.averageBandwidth,this.Ckt=null!=(s=t.baseUrl)?s:"",this.Okt=null!=(n=t.codecs)?n:i.codecs,this.Pkt=null!=(r=t.continuationPattern)?r:i.continuationPattern,this.Bkt=null!=(o=t.initializationPattern)?o:i.initializationPattern,this.NP=t.label,this.Ukt=t.mediaTimeOffset?tu(t.mediaTimeOffset):0,this.Lyt=t.segmentDuration?tu(t.segmentDuration):0,this.Yn(t)}},NX=class extends SX{get Hw(){return lU.tN}get jkt(){return this.Fkt}get Ykt(){return this.Vkt}get oft(){return this.Gkt}get HC(){return this.RA}get GZ(){return'audio/mp4; codecs="'+this.Qrt+'"'}constructor(t,i,e){var s,n,r,o;super(t,i,e),this.Vkt=null!=(s=t.channels)?s:1,this.Gkt=null!=(r=null!=(n=t.frameRate)?n:i.frameRate)?r:1024,this.RA=null!=(o=t.sampleRate)?o:i.sampleRate}},IX=class extends SX{get Hw(){return lU.iN}get jkt(){return this.Fkt}get Wkt(){return this.Gv}get oft(){return this.Gkt}get GZ(){return'video/mp4; codecs="'+this.Qrt+'"'}constructor(t,i,e){var s;super(t,i,e),this.Gv=t.resolution,this.Gkt=tu(null!=(s=t.frameRate)?s:i.frameRate)}};function DX(t,i){const e=String(i);if(t===bX||"now"===i)return e;const s=C(t.substring(9,t.lastIndexOf("d")));return $h(e,s,"0")}function EX(t,i){const e=String(i);if(t===bX)return e;const s=C(t.substring(12,t.lastIndexOf("d")));return $h(e,s,"0")}var kX=class{get vst(){return this.Zkt}get o(){return this.Nb}get Hkt(){return this.Xkt}get wkt(){return me.Dw(this.Ckt,this.vst.wkt)}get wh(){return this.NP}get QEt(){return this.Ukt}get qkt(){return this.Kkt}Yn(t){for(const i of this.YE){const e=So(t.tracks,(t=>i.o===t.id));e&&i.Yn(e)}}constructor(t,i,e){var s;this.Fkt=t,this.YE=e,this.Zkt=i,this.Nb=t.id,this.Xkt=t.alignId,this.Ckt=null!=(s=t.baseUrl)?s:"",this.NP=t.label,this.Ukt=t.mediaTimeOffset?tu(t.mediaTimeOffset):0,this.Kkt=t.protection,this.Yn(t)}},LX=class extends kX{get jkt(){return this.Fkt}get Z(){return this.YE}get gs(){return this.iy}get Ykt(){return this.Vkt}Yn(t){var i,e;super.Yn(t),this.iy=t.language,this.Vkt=null!=(i=t.channels)?i:1,this.hH=null!=(e=t.mimeType)?e:"audio/mp4"}constructor(t,i){const e=[];super(t,i,e);for(const i of t.tracks)e.push(new NX(i,t,this))}},xX=class extends kX{get jkt(){return this.Fkt}get Z(){return this.YE}Yn(t){var i;super.Yn(t),this.hH=null!=(i=t.mimeType)?i:"video/mp4"}constructor(t,i){const e=[];super(t,i,e);for(const i of t.tracks)e.push(new IX(i,t,this))}},CX=class{get o(){return this.Nb}get wkt(){return me.Dw(this.Ckt,this.$kt.Jkt)}get tLt(){return this.iLt}get sD(){return this.nV}get WZ(){return this.Md}get eLt(){return this.sLt}get nLt(){return this.rLt}Yn(t){var i;this.iLt=t.timeBounds,this.Md=null!=(i=t.events)?i:[],this.nV=t.currentTime?tu(t.currentTime):void 0}constructor(t,i){var e,s,n;this.sLt=[],this.rLt=[],this.$kt=t,this.Nb=i.id,this.Ckt=null!=(e=i.baseUrl)?e:"";for(const t of null!=(s=i.audio)?s:[])this.sLt.push(new LX(t,this));for(const t of null!=(n=i.video)?n:[])this.rLt.push(new xX(t,this));this.Yn(i)}},jX=class{get Tk(){return this.$kt}get oLt(){return this.hLt}get aLt(){return this.uLt}get cLt(){return this.lLt}get dLt(){return this.fLt}get gLt(){return this._Lt}get i0(){return this.SA}get vLt(){return this.wLt}get Jkt(){var t;return me.Dw(null!=(t=this.mLt)?t:"",this.pLt)}get ALt(){return this.yLt}Yn(t){var i;this.hLt=tu(t.availabilityDuration),this.uLt=t.creationDate,this.lLt=t.fallbackPollRate,this.fLt=t.manifestVersion,this.SA=t.streamType,this.wLt=t.activePresentation,this.mLt=t.contentBaseUrl,this.yLt=null==(i=t.timeSource)?void 0:i.url,this.$kt=t;for(const i of t.presentations){const t=So(this._Lt,(t=>t.o===i.id));t?t.Yn(i):this._Lt.push(new CX(this,i))}this._Lt=this._Lt.filter((i=>t.presentations.some((t=>t.id===i.o))))}constructor(t,i){this._Lt=[],this.pLt=t,this.$kt=i,this.Yn(i)}};r(),r();var OX=0,RX=class extends Bo{get Fnt(){return!0}get DAt(){return this.bLt.DAt}get mF(){return this.bLt.mF}get Qrt(){return this.bLt.Qrt}get o(){return this.bLt.o}get wh(){var t;return null!=(t=this.bLt.wh)?t:""}get dk(){return this.SP}get xAt(){return this.bLt.wkt}get EAt(){}get GZ(){return this.bLt.GZ}get QEt(){return this.bLt.QEt}get wkt(){return this.bLt.wkt}get Hw(){return this.bLt.Hw}mkt(t){const i=(t-this.bLt.jkt.vst.sD)*this.framesPerSecond();return x.round(this.bLt.Lkt+i)}MLt(t){return t+1}vkt(t){var i;let e,s=this.bLt.zkt;for(;e=null==(i=s.match(MX))?void 0:i.pop();)s=s.split(e).join(DX(e,t));return s+("now"===t?"?uuid="+_o():"")}Nkt(t){var i;let e,s=this.bLt.Rkt;for(;e=null==(i=s.match(TX))?void 0:i.pop();)s=s.split(e).join(EX(e,t));return s}hU(){}oU(){}constructor(t){super(),this.SP=OX++,this.bLt=t}},PX=class extends RX{get TLt(){return this.bLt}get Dpt(){return this.bLt.HC}get Lt(){return this.WP}framesPerSecond(){return this.bLt.HC/this.bLt.oft}get ga(){return this.Za||(this.Za=Vi(this)),this.Za}constructor(t,i){super(t),this.Za=void 0,this.WP=i}},zX=class extends RX{get TLt(){return this.bLt}get kAt(){return 0}get oft(){return this.bLt.oft}get Ti(){return this.bLt.Wkt.height}get ji(){return this.bLt.Wkt.width}get Wkt(){return this.bLt.Wkt}get Lt(){return this.WP}framesPerSecond(){return this.bLt.oft}get ga(){return this.Za||(this.Za=jG(this)),this.Za}constructor(t,i){super(t),this.Za=void 0,this.WP=i}};r();var $u=function(t){return t.SLt="alternative",t.NLt="main",t.ILt="commentary",t.DLt="",t.$B="descriptions",t.ELt="main-desc",t.kLt="translation",t}({}),BX=function(t){return t.SLt="alternative",t.NLt="main",t.ILt="commentary",t.DLt="",t.JB="captions",t.nk="sign",t.KB="subtitles",t}({}),UX=0,QX=class extends Bo{get lk(){return this.LLt()}get Rt(){return this.Le}set Rt(t){this.Rt!==t&&(this.Le=t,t&&this.xLt(),this.jLt.CLt(),this.yo(new dc(this)))}get ga(){return this.Za||(this.Za=Zt(this)),this.Za}get Qdt(){return this.OLt}get o(){return this.Fkt.o}get dk(){return this.SP}get wh(){var t;return null!=(t=this.Fkt.wh)?t:""}get gN(){return this.Rt?"enabled":"disabled"}set gN(t){"enabled"===t?this.Rt=!0:"disabled"===t&&(this.Rt=!1)}get gk(){return this.AP}get _k(){return this.tlt}set _k(t){this.tlt=t,this.jLt.CLt(),this.yo(new rY(t,this))}DP(t){this.Rt=t}RLt(t){for(const i of this.AP.FE)i===t&&this.yo(new eu(i))}constructor(t,i,e){super(),this.AP=new nc,this.SP=UX++,this.Le=!1,this.tlt=void 0,this.Fkt=i,this.jLt=e,this.OLt=new iZ(t,[]);for(const t of i.Z)this.AP.yP(this.createQuality(t))}},FX=class extends QX{get Hw(){return lU.tN}get zt(){return $u.NLt}get gs(){return this.Fkt.gs}get jkt(){return this.Fkt}xLt(){this.jLt.PLt(this)}LLt(){const t=this.jLt.zLt;return(null==t?void 0:t.Lt)===this?t:void 0}createQuality(t){return new PX(t,this)}constructor(t,i){super(Q.tN,t,i)}},YX=class extends QX{get Hw(){return lU.iN}get zt(){return BX.NLt}get gs(){return""}get jkt(){return this.Fkt}xLt(){this.jLt.BLt(this)}LLt(){const t=this.jLt.ULt;return(null==t?void 0:t.Lt)===this?t:void 0}createQuality(t){return new zX(t,this)}constructor(t,i){super(Q.iN,t,i)}};function VX(t,i,e,s){if(!t)return;const n=function(t,i,e){const s=[];for(const t of i){var n;const i=null!=(n=t.mimeType)?n:"audio/mp4";var r;const e=null!=(r=t.codecs)?r:t.tracks.map((t=>t.codecs))[0];s.push(i+'; codecs="'+e+'"')}return GX(t,i,s,[],e)}(t,i?[i]:[],!s),r=function(t,i,e){const s=[];for(const t of i){var n;const i=null!=(n=t.mimeType)?n:"video/mp4";var r;const e=null!=(r=t.codecs)?r:t.tracks.map((t=>t.codecs))[0];s.push(i+'; codecs="'+e+'"')}return GX(t,i,[],s,e)}(t,e?[e]:[],!s),o=DZ(n,r);return t.preferredKeySystems&&(null==o?void 0:o.smt)&&(o.smt=PZ(o.smt,t.preferredKeySystems)),o}function GX(t,i,e,s,n){const r=i.map((t=>t.protection)).filter(Rt);if(!r.length)return;const o=r[0].type,h=Qr(r,(t=>t.systems)),a=Qr(h,(t=>function(t,i){void 0===i&&(i=!0);const e=[],s=i?function(t){return nv.filter((i=>i.Kw===t.toLowerCase()))}(t.schemeId):function(t){return sv.filter((i=>i.Kw===t.toLowerCase()))}(t.schemeId);for(const i of s)e.push({RQ:WX(t)?t.uri:void 0,Gb:i,NF:void 0,SF:t.pssh?[Vs(t.pssh).buffer]:[]});return e}(t,n)));return{sQ:t,nmt:{bTt:o},smt:a,MTt:e,TTt:s}}function WX(t){return t.schemeId===z_.Ww&&void 0!==t.keyFormat&&void 0!==t.keyFormatVersions}r(),r(),r();var ZX;function HX(t){const i=t.sD,e=t.KI.oR(i);return e?e.jn(0)-i:0}ZX="Android"===me.xw.Cw?200:300;var XX=me.Ys.Dv?1:.5,qX=class{Cn(){1!==this.Ea&&(this.Ea=1,this.QLt=me.gw((()=>{this.FLt()}),ZX),this.YLt.wEt(this.VLt),this.jR.TD?this.GLt.yn(fa.CO,this.WLt):this.WLt())}nE(){0!==this.Ea&&(this.Ea=0,void 0!==this.QLt&&me._w(this.QLt),this.YLt.pEt(this.VLt),this.GLt.fn(fa.xO,this.ZLt),this.GLt.fn(fa.CO,this.WLt),this.HLt=void 0,this.wR())}get XLt(){return KX(this.qLt.zLt,this.qLt.ULt)}async FLt(){await this.KLt,this.KLt=this.JLt(),await this.KLt}$Lt(t,i){const e=this.txt(t,i),s=this.YLt.mF;for(const t of e){if(t.ixt<=s)return t}return e[e.length-1]}async JLt(){var t,i;const e=null==(t=this.qLt.zLt)?void 0:t.Lt,s=null==(i=this.qLt.ULt)?void 0:i.Lt,n=this.txt(e,s);if(0===n.length)return void 0;const r=this.maybeSwitchToTargetQuality(n);if(r)return void await this.sxt(r);const o=this.maybeGetUpSwitch(n);o&&await this.sxt(o)}maybeSwitchToTargetQuality(t){const i=this.XLt;if(t.some((t=>JX(t,i))))return;const e=this.YLt.mF;for(const i of t){if(i.ixt<=e)return i}return t[t.length-1]}maybeGetUpSwitch(t){var i,e;const s=this.YLt.mF;var n;var r;const o=(null!=(n=null==(i=this.qLt.zLt)?void 0:i.mF)?n:0)+(null!=(r=null==(e=this.qLt.ULt)?void 0:e.mF)?r:0);let h;for(const i of t){if(i.ixt<s&&i.ixt>o){h={nxt:i,Pft:me.J_(),sO:0};break}}if(!this.HLt||!JX(this.HLt.nxt,null==h?void 0:h.nxt))return void(this.HLt=h);const a=me.J_()-this.HLt.Pft,u=this.HLt.sO>3;if(a>1e3&&u){if(this.jR.FR.QR||me.Ys.Mv){const t=2*this.YLt.pF;if(!(HX(this.jR)>t))return}else{const t=x.max(2*this.YLt.pF+XX,this.zF.dR.minimumOffset);if(!(HX(this.jR)>t))return void(this.rxt&&this.rxt.minimumOffset===t||(this.wR(),this.rxt={minimumOffset:t},this.zF.gR(this.rxt)))}return this.HLt.nxt}}async sxt(t){this.HLt=void 0,this.wR();const i=this.XLt;if(i.oxt===t.oxt&&i.hxt===t.hxt)return;const e=t.oxt,s=t.hxt;i.hxt&&s&&i.hxt.mF>s.mF&&this.YLt._Et(t.ixt),await this.qLt.axt(s,e)}wR(){this.rxt&&(this.zF.wR(this.rxt),this.rxt=void 0)}txt(t,i){let e=[],s=[];var n;t&&(e=(null==(n=t._k)?void 0:n.length)?t._k:t.gk.FE);if(i){var r;const t=(null==(r=i._k)?void 0:r.length)?i._k:i.gk.FE,e=t.slice().sort(((t,i)=>t.mF-i.mF)),n=this.uxt(e);0===n.length&&t.length>0&&n.push(rs(t,(t=>t.mF))),s=n}const o=[],h=e.length>0?e:[void 0],a=s.length>0?s:[void 0];for(const t of h)for(const i of a)o.push(KX(t,i));return function(t){return t.sort(((t,i)=>i.ixt-t.ixt))}(o)}uxt(t){for(let i=0;i<t.length;i++){const e=t[i].Wkt;if(e.height>=this.jR.Ti&&e.width>=this.jR.ji)return t.slice(0,i+1)}return t.slice()}Mm(){this.HLt=void 0,this.GLt.tr(),this.wR()}constructor(t,i,e,s,n){this.jR=t,this.zF=i,this.qLt=e,this.cxt=s,this.YLt=n,this.Ea=0,this.KLt=Promise.resolve(),this.rxt=void 0,this.ZLt=()=>{var t,i;if(this.cxt.BD)return;const e=null==(t=this.qLt.zLt)?void 0:t.Lt,s=null==(i=this.qLt.ULt)?void 0:i.Lt,n=rs(this.txt(e,s),(t=>t.ixt));n&&(xe(this.sxt(n)),this.jR.FR.QR&&this.cxt.Sk())},this.WLt=()=>{this.GLt.yn(fa.xO,this.ZLt),this.GLt.fn(fa.CO,this.WLt)},this.VLt=()=>{if(this.HLt){this.HLt.sO+=1;const t=this.HLt.nxt.ixt;this.YLt.mF<t&&(this.HLt=void 0,this.wR())}},this.GLt=new li(this.jR)}};function KX(t,i){var e;var s;return{oxt:t,hxt:i,ixt:(null!=(e=null==t?void 0:t.mF)?e:0)+(null!=(s=null==i?void 0:i.mF)?s:0)}}function JX(t,i){var e,s,n,r;return void 0===t||void 0===i?t===i:(null==(e=t.oxt)?void 0:e.o)===(null==(s=i.oxt)?void 0:s.o)&&(null==(n=t.hxt)?void 0:n.o)===(null==(r=i.hxt)?void 0:r.o)&&t.ixt===i.ixt}r();var $X=class t{static async create(i,e,s){const n=await tq(i,e,s);return new t(n,i,e)}get cyt(){return(this.lxt.serverTimeMs+(me.J_()-this.lxt.localTimeMs))/1e3}get dxt(){return(this.lxt.localTimeMs-this.lxt.serverTimeMs)/1e3}async _Dt(t,i,e){for(;!e.gm;){await Bn(6e5,e);try{this.lxt=await tq(t,i,e)}catch(t){wh(t)}}}Mm(){this.bM.Dm()}constructor(t,i,e){this.bM=new Ai,this.lxt=t,this._Dt(i,e,this.bM.wm).catch(ul)}};async function tq(t,i,e){let[s,n,r]=await iq(t,i,e);return n>20&&([s,n,r]=await iq(t,i,e)),{localTimeMs:s,serverTimeMs:r-n/2}}async function iq(t,i,e){const s=me.J_(),n=await i.jS({hN:Ml.GET,Hu:t,wm:e}),r=me.J_()-s,o=await n.dS(e);return[s,r,1e3*Number(o)]}var eq=class extends Gs{constructor(){super("seek")}},sq=function(t){return t.EV="seek",t}({}),nq=[Qi.so,fa.CE,Qi.Dp],rq=class extends Bo{get Tk(){return this.$kt}get KI(){return this.fxt&&this.gxt?this.fxt.KI.Sn(this.gxt.KI):this.fxt?this.fxt.KI:this.gxt?this.gxt.KI:ge.cR()}get zLt(){return this._xt}get ULt(){return this.vxt}get ht(){return this.oP}get rt(){return this.aP}get wxt(){return this.mxt.rA}get W(){return this.pxt.rA}get PD(){return this.$kt?function(t,i,e){var s;const n=null==(s=t.gLt[0])?void 0:s.sD,r=t.oLt;if(void 0===n||void 0===r)return e>0&&e<ef?new ge([0,e],[!0,!0]):ge.cR();let o=i.kEt;if(!o){const i=rG(t.aLt).getTime()/1e3;o=n+(Date.now()/1e3-i)}return new ge([o-r,o],[!0,!0])}(this.$kt,this.Axt,this.jR.ct):ge.cR()}async yxt(){this.fxt&&await this.fxt.Rb(0,1/0),this.gxt&&await this.gxt.Rb(0,1/0)}$n(){if(!this.kc.src)throw new Ui(Do.SOURCE_INVALID,"No src property found in given source.");this.lmt||(this.lmt=this.ON(this.gU.wm).catch(this.j6))}async ON(t){this.yo(new Ti);const i=this.kc.src,e=await this.bxt.CDt(i,t);this.$kt=new jX(i,e),this.$kt.ALt&&(this.Mxt=await $X.create(this.$kt.ALt,this.dU,t)),this.Txt();const s=this.$kt.gLt[this.$kt.gLt.length-1];this.createTracksForPresentation(s),this.mxt.eA(),this.CLt()}PLt(t){for(const i of this.oP.FE)i.DP(i===t)}BLt(t){for(const i of this.aP.FE)i.DP(i===t)}CLt(){const t=So(this.oP.FE,(t=>t.Rt)),i=So(this.aP.FE,(t=>t.Rt)),e=this.dV.$Lt(t,i);xe(this.axt(e.hxt,e.oxt))}Txt(){if(!this.$kt||"live"!==this.$kt.i0||!this.Mxt)return;const t=this.$kt.gLt.filter((t=>t.o===this.$kt.vLt))[0].sD,i=this.Mxt.dxt+new Date(this.$kt.aLt).getTime()/1e3;this.Axt.TEt(i,t)}createTracksForPresentation(t){var i,e,s,n;for(const i of null!=(s=t.eLt)?s:[])this.oP.tt(new FX(i,this));for(const i of null!=(n=t.nLt)?n:[])this.aP.tt(new YX(i,this));null==(i=this.oP.VE(0))||i.DP(!0),null==(e=this.aP.VE(0))||e.DP(!0)}get bk(){return rs([this.Sxt,this.Nxt].filter(Rt),(t=>t.theolive))}get Ixt(){const t=this.Axt.kEt;if(void 0!==t)return t}Cn(){this.Dxt=!0,this.Ext()}nE(){var t;this.Dxt=!1,this.kxt().catch(this.j6),"live"===(null==(t=this.Tk)?void 0:t.i0)&&(this.Lxt(),this.xxt())}Lxt(){this.Cxt&&this.Cxt.cancelDownload()}xxt(){this.jxt&&this.jxt.cancelDownload()}Sk(t){this.Z9.Dm(),this.Z9=new Ai,this.H9=Pv((i=>this.Oxt(t,this.H9,i)),this.Z9).catch(this.j6)}async Oxt(t,i,e){if(i&&await i,await Ic(this.W,e),"live"!==this.$kt.i0)throw new g("The current video source does not support Live playback.");if(re(e),await this.kxt(),re(e),this.Cxt&&(this.Cxt.gkt()||this.Cxt.ckt!==(null!=t?t:"now"))){var s;if(this.Lxt(),this.fxt){for(;this.fxt.zEt;)await Ic(this.fxt.UEt,e);await this.fxt.Rb(0,1/0)}null==(s=this.Cxt)||s.Gp(null!=t?t:"now")}if(this.jxt&&(this.jxt.gkt()||this.jxt.ckt!==(null!=t?t:"now"))){var n;if(this.xxt(),this.gxt){for(;this.gxt.zEt;)await Ic(this.gxt.UEt,e);await this.gxt.Rb(0,1/0)}null==(n=this.jxt)||n.Gp(null!=t?t:"now")}this.yo(new eq),re(e),this.H9=void 0,this.Ext()}Gp(t){this.Z9.Dm(),this.Z9=new Ai,this.H9=Pv((i=>this.X9(t,this.H9,i)),this.Z9).catch(this.j6)}async X9(t,i,e){var s,n;i&&await i,await Ic(this.W,e),re(e),await this.kxt(),re(e),this.Cxt&&(this.Cxt.gkt()||this.Cxt.ckt!==t)&&this.Lxt(),this.jxt&&(this.jxt.gkt()||this.jxt.ckt!==t)&&this.xxt(),this.yo(new eq),re(e),null==(s=this.Cxt)||s.Gp(t),null==(n=this.jxt)||n.Gp(t),this.H9=void 0,this.Ext()}axt(t,i){var e,s;return(null==(e=this.Cxt)?void 0:e.bat)===i&&(null==(s=this.jxt)?void 0:s.bat)===t?Promise.resolve():(this.Rxt.Dm(),this.Rxt=new Ai,this.Pxt=Pv((e=>this.zxt(t,i,this.Pxt,e)),this.Rxt).catch(this.j6),this.Pxt)}async zxt(t,i,e,s){e&&await e,await Ic(this.mxt.rA,s),re(s),await this.kxt(),re(s),await this.Bxt(t,i),await this.Uxt(t,i),re(s),this.Pxt=void 0,this.Ext()}async Bxt(t,i){var e,s,n;const r=null!=(n=this.Ixt)?n:"now";if((null==(e=this.Cxt)?void 0:e.bat)!==i){var o;const t=this.Cxt&&!this.Cxt.gkt(),e=null==(o=this.Cxt)?void 0:o.ckt;if(this.Cxt&&(await this.Cxt.Mm(),this.Cxt=void 0),this.fxt&&await this.fxt.UEt,i){var h,a;const s=null!=(a=null==(h=this.fxt)?void 0:h.KI)?a:ge.cR(),n=t?e:s.jn(s.U-1);this.Cxt=new AX(i,this.dU,this.hdt),this.Cxt.yn(oX.XEt,(t=>this.Qxt(Q.tN,t))),this.Cxt.Gp(null!=n?n:r)}}if((null==(s=this.jxt)?void 0:s.bat)!==t){var u;const i=this.jxt&&!this.jxt.gkt(),e=null==(u=this.jxt)?void 0:u.ckt;if(this.jxt&&(await this.jxt.Mm(),this.jxt=void 0),this.gxt&&await this.gxt.UEt,t){var c,l;const s=null!=(l=null==(c=this.gxt)?void 0:c.KI)?l:ge.cR(),n=i?e:s.jn(s.U-1);this.jxt=new AX(t,this.dU,this.hdt),this.jxt.yn(oX.XEt,(t=>this.Qxt(Q.iN,t))),this.jxt.Gp(null!=n?n:r)}}}async Uxt(t,i){const e=function(t,i,e,s,n){const r=VX(t,null==i?void 0:i.Lt.jkt.jkt,null==e?void 0:e.Lt.jkt.jkt,s),o=jZ(r),h=[];i&&h.push({vS:i.GZ});e&&h.push({vS:e.GZ});return{Hw:vl.mU,n3:h,KF:o,v3:n&&!s}}(this.kc.contentProtection,i,t,this.jR.FR.QR,this.kc.useManagedMediaSource);if(this.WF&&this.WF.rJ(e)){var s,n;const t=!(null==(s=this.Cxt)?void 0:s.gkt());if(this.fxt&&t){for(;this.fxt.zEt;)await this.fxt.UEt;await this.fxt.rH()}const i=!(null==(n=this.jxt)?void 0:n.gkt());if(this.gxt&&i){for(var r,o;null==(r=this.gxt)?void 0:r.zEt;)await this.gxt.UEt;await(null==(o=this.gxt)?void 0:o.rH())}await this.WF.hJ(e)}else{this.Lxt(),this.xxt(),this.fxt&&(await this.fxt.Mm(),this.fxt=void 0),this.gxt&&(await this.gxt.Mm(),this.gxt=void 0),this.jR.o7();try{await this.jR.tr(),this.WF=await this.jR.$n(e),this.pxt.eA(),this.WF.Z4&&this.Cxt&&(this.WF.Z4.yn(W.ZK,this.Ds),this.fxt=new nX(this.WF.Z4,this.jR,i,this.Fxt)),this.WF.H4&&this.jxt&&(this.WF.H4.yn(W.ZK,this.Ds),this.gxt=new nX(this.WF.H4,this.jR,t,this.Fxt)),"live"===this.$kt.i0&&this.WF.J4(1/0)}finally{this.jR.h7()}}}Ext(){!this.Dxt||this.H9||this.Pxt||this.Yxt||this.Vxt||(this.dV.Cn(),this.Gxt=new Ai,this.jxt&&this.gxt&&(this.Yxt=this.Wxt(this.jxt,this.gxt,this.Gxt.wm).catch(this.j6)),this.Cxt&&this.fxt&&(this.Vxt=this.Wxt(this.Cxt,this.fxt,this.Gxt.wm).catch(this.j6)))}async kxt(){this.dV.nE(),this.Gxt&&(this.Gxt.Dm(),this.Gxt=void 0),this.Yxt&&(await this.Yxt,this.Yxt=void 0),this.Vxt&&(await this.Vxt,this.Vxt=void 0)}async Wxt(t,i,e){for(await this.W;t.zEt;)await Ic(t.UEt,e);for(;i.zEt;)await Ic(i.UEt,e);if(!t.gkt()){const e=me.J_()/1e3,s="now"===t.ckt,{initialization:n,data:r,metadata:o}=await t._kt(),h={Hw:z.XK,xS:n},a=r?{Hw:z.XK,xS:r}:void 0,u=i.KI;!me.Ys.Sv&&!this.jR.FR.QR&&o&&u.jn(u.U-1)>o.het&&await i.Rb(o.het,1/0),await i.f2(h),a&&await i.c2(a,o,t.bat);const c=i.KI.HO(u);s&&c.U>0&&this.Axt.bEt(e,c.jn(c.U-1))}for(;!t.ukt;){re(e);const s=t.bkt();await Ic(i.appendStream(s,t),e)}}async Mm(){this.gU.Dm(),this.lmt&&await this.lmt.catch(ul),this.H9&&(this.Z9.Dm(),this.Lxt(),this.xxt(),await this.H9.catch(ul)),this.Pxt&&(this.Rxt.Dm(),this.Lxt(),this.xxt(),await this.Pxt.catch(ul)),await this.kxt(),this.Cxt&&await this.Cxt.Mm(),this.jxt&&await this.jxt.Mm(),this.Cxt=void 0,this.jxt=void 0,this.pxt.Dm(),this.mxt.Dm(),this.WF&&(await this.jR.tr(),this.WF=void 0),this.fxt=void 0,this.gxt=void 0,this.jR.fn(fa.CO,this.UR),this.jR.fn(nq,this.updateActiveQualities),this.oP.tr(),this._xt=void 0,this.aP.tr(),this.vxt=void 0,this.$kt=void 0,this.Mxt&&(this.Mxt.Mm(),this.Mxt=void 0),this.Dxt=!1}constructor(t,i,e,s,n,r,o,h,a,u){super(),this.Dxt=!1,this.Zxt=!1,this.oP=new $e,this.aP=new $e,this.Hxt=void 0,this._xt=void 0,this.vxt=void 0,this.mxt=new pa,this.WF=void 0,this.lmt=void 0,this.pxt=new pa,this.gU=new Ai,this.Pxt=void 0,this.Rxt=new Ai,this.H9=void 0,this.Z9=new Ai,this.Cxt=void 0,this.fxt=void 0,this.Vxt=void 0,this.jxt=void 0,this.gxt=void 0,this.Yxt=void 0,this.Gxt=void 0,this.UR=()=>{this.Zxt=!0},this.updateActiveQualities=()=>{var t,i;const e=this.jR.sD,s=null==(t=this.fxt)?void 0:t.OEt(e),n=null==(i=this.gxt)?void 0:i.OEt(e);if(this._xt!==s&&(this._xt=s,s))for(const t of this.oP.FE)t.RLt(s);if(this.vxt!==n&&(this.vxt=n,n))for(const t of this.aP.FE)t.RLt(n)},this.Qxt=(t,i)=>{const e=i.data;if(e.Hw===Zn.JEt){const{tkt:i,ikt:n,$Et:r,ekt:o}=e;if(this.Mxt){const e=this.Mxt.cyt,s=this.jR.sD;if(this.Zxt&&0!==s){const o={theolive:e-i+r-s,engine:n,distribution:e-(i+n),player:r-s};t===Q.tN?(this.Nxt=o,this.Axt.DEt(this.Mxt.dxt+i,r)):(this.Sxt=o,this.Axt.NEt(this.Mxt.dxt+i,r))}}var s;if(o)this.Hxt||(this.Hxt=this.jR.dE(vs.tU,"timecode","timecode",void 0,!1,er.DEFAULT,!1,void 0)),this.Hxt.fU(new Bh(r,r,o,!1,void 0)),$E(this.Hxt,null!=(s=this.jR.KI.Cn(0))?s:-1)}this.yo(i)},this.j6=t=>{F(t)||(this.nE(),this.yo(new As(new Ui(Do.MEDIA_LOAD_ERROR,t.message))))},this.kc=t,this.bxt=i,this.jR=e,this.dU=n,this.Axt=r,this.dV=new qX(e,o,this,a,s),this.hdt=h,this.Fxt=u,this.jR.yn(fa.CO,this.UR),this.jR.yn(nq,this.updateActiveQualities)}};r();var oq=class extends KN{WR(){const t=this.jR.KI;return 0===t.U?0:t.jn(t.U-1)-this.jR.sD}Sk(){this.ta.Sk()}mR(){return iX(super.mR())}ZR(){return!me.Ys.Mv}constructor(t,i,e){super(t,i,e)}},hq=[Qi.Ap,Qi.Dp,Qi.tp,Qi.mp,Qi.Ep,Qi.Km,Qi.np,Qi.ep],aq=class extends Bo{qE(){this.jR.yn(hq,this.Ds),this.jR.yn(fa.CO,this.NG),this.jR.yn([Qi.so,Qi.vp],this.Xxt),this.jR.yn(ac.ua,this.qxt),this.lY.yn(ZN,this.Ds)}HE(){this.jR.fn(hq,this.Ds),this.jR.fn(fa.CO,this.NG),this.jR.fn([Qi.so,Qi.vp],this.Xxt),this.jR.fn(ac.ua,this.qxt),this.lY.fn(ZN,this.Ds)}get ht(){return this.oP}get rt(){return this.aP}get Tk(){var t,i;return null==(i=this.qLt)||null==(t=i.Tk)?void 0:t.Tk}get ZD(){return this.jR.ZD}set ZD(t){this.jR.ZD=t}get JD(){return!1}set JD(t){}get XF(){return this.qF}rE(){return!1}$D(){return this.jR.ka}_a(){return this.jR.aY}dE(t){return this.jR.uY(t)}be(){this.jR.be()}ge(){return this.jR.ge()}aE(){}uE(){}oE(){}hE(){}get mD(){return this.jR.mD}set mD(t){this.jR.mD=t}get sD(){var t;return null!=(t=this.Kxt)?t:this.jR.sD}set sD(t){this.rD(t)}rD(t,i){this.Z9.Dm(),this.Z9=new Ai,this.H9=Pv((i=>this.X9(t,i,this.H9)),this.Z9)}get $I(){const t=this.Jxt();if(t)return new Date(t.getTime()+1e3*this.sD)}set $I(t){const i=this.Jxt();t&&i&&(this.sD=i.getTime()-t.getTime())}Jxt(){const t=this.Tk;if(!t)return;const i=new Date(t.creationDate).getTime();let e=NaN;for(const i of t.presentations)i.currentTime&&(e=i.currentTime.value/(i.currentTime.scale||1)*1e3);return j(e)?void 0:new Date(i-e)}get bt(){return this.kc}get ND(){return this.jR.ND}set ND(t){this.jR.ND=t}get ct(){const t=this.jR.ct;return t===ef?1/0:t}get hD(){return!1}get cD(){return this.YF}get lt(){return this.FF}get dD(){return this.$xt}get gD(){return!1}get vD(){return il({},{cP:0,lP:0,dP:0,fP:0,gP:0,_P:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}},this.jR.wD())}get bD(){return!0}get BD(){return this.rV}get ZF(){}get nt(){return this.Ol}get FD(){return this.jR.FD}get GD(){return this.jR.GD}get KI(){return this.TSt.ws()}get TSt(){return this.qLt?this.qLt.KI:ge.cR()}get kD(){return this.jR.kD.ws()}get PD(){var t,i;return null!=(i=null==(t=this.qLt)?void 0:t.PD.ws())?i:ge.cR().ws()}get TD(){return this.jet}get Mk(){return!0}get qD(){return this.fV}get Ixt(){var t;return null==(t=this.qLt)?void 0:t.Ixt}get GR(){if(this.TD)return;if(!this.Zxt)return;const t=this.sD,i=this.Axt.LEt(t);if(void 0===i)return;const e=this.TSt;let s=0;if(e.U>0){const i=e.jn(e.U-1);s=x.max(i-t,0)}return x.max(i,s)}get bk(){var t;return null==(t=this.qLt)?void 0:t.bk}get OD(){return this.jR.OD}get xD(){return this.tCt}set xD(t){this.tCt=t,this.iCt()}async iCt(){this.tCt!==Ac.HY&&this.qLt&&(this.qLt.$n(),this.tCt!==Ac.HR&&this.tCt!==Ac.wF||(await this.qLt.wxt,"vod"===this.qLt.Tk.i0&&this.qLt.Cn()))}async wa(t,i,e){if(re(e),await this.tr(),re(e),!vI(t))return this.YF=new Ui(Do.SOURCE_INVALID,"HESP source incorrectly configured"),this.FF=be(this.YF),this.eCt(this.YF),Promise.resolve();const s=t;this.kc=s;const n=new RH(this.dU);this.sCt=this.nCt(t),this.zF=new oq(this,this.jR,this.sCt),this.zF.Rt=!0,this.zF.yn("latencyrecoveryseek",this.Ds),this.qD.Sa(this.zF),this.qLt=new rq(s,n,this.jR,this.qF,this.dU,this.Axt,this.zF,this.hdt,this,this.Fxt),this.qLt.yn(Qi.lp,this.Ds),this.qLt.yn(ac.ua,this.rCt),this.oP.WE=this.qLt.ht,this.aP.WE=this.qLt.rt,this.eY.bF(t.contentProtection),xe(this.iCt())}nCt(t){return t.latencyConfiguration?t.latencyConfiguration:eX()}async sE(){var t;if(!this.qLt)return;this.jet=!1,this.qLt.$n(),await this.qLt.W,this.yo(new us(this.sD));const i=this.qLt.Fm(sq.EV);this.Sk(),await i,this.qLt.Cn(),await this.jR.sE(),null==(t=this.zF)||t.Cn()}eE(){var t;this.qLt&&(this.jet=!0,this.yo(new Ia(this.sD)),this.qLt.nE(),null==(t=this.zF)||t.nE(),this.jR.eE())}Sk(){if(this.eIt)throw new g("Cannot seek while resetting");this.Z9.Dm(),this.Z9=new Ai,this.H9=Pv((t=>this.Oxt(this.H9,t)),this.Z9)}oCt(){var t;null==(t=this.qLt)||t.nE()}eCt(t){this.yo(new As(t)),this.oCt()}async X9(t,i,e){var s;if(this.eIt)throw new g("Cannot seek while resetting");let n=t;if(this.hCt(n),this.PD.length>0&&(n=ge.xn(this.PD).QO(n),this.hCt(n)),this.qLt){e&&(await e.catch(ul),re(i)),(null==(s=this.zF)?void 0:s.lR)&&this.zF.nE();try{const t=this.jR.Fm(Qi.yp,i);this.jR.Gp(n),this.qLt.Gp(n),await t}catch(t){throw wh(t),this.qLt.nE(),this.aCt(),t}this.uCt()}}async Oxt(t,i){this.yo(new Gs("golive"));const e=this.Ixt;if(this.hCt(e),this.qLt){t&&(await t.catch(ul),re(i));try{let t,s=this.zF.dR.targetOffset;if(await this.qLt.wxt,e&&s>=1){if(!this.zF.ZR()){s-=x.min(1,.5*s)}t=e-s}else t=this.Ixt?this.Ixt-.2:void 0;for(this.qLt.Sk(t);this.TSt.U>0;)await this.qLt.Fm(W.ZK,i);const n=this.TSt;for(;0===this.TSt.HO(n).U;)await this.qLt.Fm(W.ZK,i);t=this.TSt.Cn(this.TSt.U-1),t=this.cCt(t),this.hCt(t);const r=this.jR.Fm(Qi.yp,i);this.jR.Gp(t,!0),await r}catch(t){var s;if(F(t))throw null==(s=this.zF)||s.Cn(),t;throw this.qLt.nE(),await this.qLt.yxt(),this.aCt(),t}this.uCt()}}hCt(t){this.rV=!0,this.Kxt=t,this.yo(new ll(this.sD))}uCt(){this.rV&&(this.Kxt=void 0,this.rV=!1,this.yo(new ns(this.sD)))}aCt(){this.Kxt=void 0,this.rV=!1}cCt(t){return t}async sIt(t,i,e){var s;re(e),t&&await t.catch(ul),i&&await i.catch(ul),await this.Fxt.tr(),null==(s=this.zF)||s.nE(),this.qLt&&(await this.qLt.Mm(),this.qLt=void 0),re(e),await this.jR.tr(),re(e),this.jR.cY(),this.aP.tr(),this.oP.tr(),this.aCt(),this.lY.tr(),this.Axt.tr(),this.YF=void 0,this.FF=void 0,this.jet=!0,this.Zxt=!1,this.kc=void 0,this.eIt=void 0,this.sCt=void 0}tr(){return this.Z9.Dm(),this.Z9=new Ai,this.lCt.Dm(),this.lCt=new Ai,this.eIt=this.sIt(this.H9,this.eIt,this.lCt.wm),this.eIt}async gn(){var t,i;this.HE(),this.lY.gn(),this.kc&&await this.tr(),this.Bo(),this.jR.gY=void 0,null==(t=this.zF)||t.fn("latencyrecoveryseek",this.Ds),null==(i=this.zF)||i.Mm(),await this.Fxt.gn(),this.Ol.gn(),this.oP.gn(),this.aP.gn()}constructor(t,i,e,s,n){super(),this.qLt=void 0,this.rV=!1,this.Z9=new Ai,this.H9=void 0,this.eIt=void 0,this.lCt=new Ai,this.jet=!0,this.Zxt=!1,this.oP=new Dh,this.aP=new Dh,this.YF=void 0,this.FF=void 0,this.tCt=Ac.HY,this.Xxt=()=>{this.jR.TD!==this.jet&&(this.jR.TD?this.eE():this.sE().catch(ul))},this.NG=()=>{this.Zxt=!0},this.rCt=t=>{this.YF=t.errorObject,this.FF=be(this.YF),this.eCt(this.YF)},this.qxt=t=>{this.YF=FI(t.lt),this.FF=t.lt,this.eCt(this.YF)},this.jR=t,this.lY=new li(this.jR,!0),this.dU=i,this.qF=new WH(e.bq,e.rq.pF),this.eY=new Xh(i),this.jR.gY=this.eY,this.Fxt=new Ki(this.jR),this.Ol=new uu([this.jR.nt,this.Fxt.Z]),this.Axt=new ZH,this.$xt=new PH(this),this.fV=s,this.hdt=n.retryConfiguration,this.qE()}},uq=class extends aq{yo(t){if(this.dCt){if(t.type===Qi.yp)return void this.fCt();if(t.type===fa.xO||t.type===Qi.bp||t.type===fa.CO)return void this.gCt.push(t)}super.yo(t)}fCt(){this.dCt=!1,void 0!==this._Ct&&me.rv(this._Ct);const t=So(this.gCt,(t=>t.type===fa.CO));t&&super.yo(t),Or(this.gCt)}tE(){if(fl(this.jR))return this.jR.tE()}async tr(){this.vCt=!1,this.fCt(),await super.tr()}async gn(){h.removeEventListener("visibilitychange",this.wCt),this.fCt(),await super.gn(),await this.jR.Mm(),await this.vY._Y(this.mCt)}cCt(t){return ui.M_&&ui.S_>=15&&ui.Dg?t+.25:t}constructor(t,i,e,s,n,r){super(t,i,e,s,r),this.vCt=!1,this.dCt=!1,this.gCt=[],this._Ct=void 0,this.wCt=()=>{const t=this.mD||0===this.ZD;"hidden"===h.visibilityState&&!this.TD&&t?(this.eE(),this.vCt=!0):"visible"===h.visibilityState&&this.vCt&&(this.dCt=!0,this._Ct=me.ov((()=>{for(const t of this.gCt)super.yo(t);this._Ct=void 0,this.dCt=!1}),2e3),xe(this.sE()),this.vCt=!1)},this.vY=n,this.mCt=t,ui.H_&&h.addEventListener("visibilitychange",this.wCt)}};r();var cq=class{get RY(){return bl.jk}async CY(t,i){return function(t){if(!t)return!1;const i=t.toLowerCase();return sa(i,vt.Ck)||sa(i,vt.jk)}(t.type)}async jY(t){return ON(t)}};ki(new class extends cq{Gk(t,i,e,s,n,r,o){const h=new rt(i),a=h.xY(Q.iN);return new uq(a,e,n,r,h,s)}CY(t,i){return me.xI&&VM?ui.IS_IOS_CHROME||ui.$g&&ui.i_<6?Promise.resolve(!1):ea(t.useManagedMediaSource)?super.CY(t,i):Promise.resolve(!1):Promise.resolve(!1)}OY(){return!1}}),r(),r();var lq=class extends aq{tE(){if(fl(this.jR))return this.jR.tE()}async gn(){await super.gn(),await this.vY._Y(this.jR)}constructor(t,i,e,s,n,r){super(t,i,e,s,r),this.vY=n}};ui.M_&&ui.Ka&&ki(new class extends cq{get RY(){return bl.vF}async CY(t,i){var e,s;if(ui.IS_IOS_CHROME)return!1;const n=await super.CY(t,i);var r;if(null==(r=null==(s=Pd())||null==(e=s.canPlayType)?void 0:e.call(s,vt.Ek))||!r||!n||!("serviceWorker"in zl))return!1;try{const t=zl.serviceWorker.ready;return await Qv(t,1e3),!0}catch(t){return!1}}async jY(t){return!!t.fairplay&&await super.jY(t)}Gk(t,i,e,s,n,r,o){if(t instanceof HTMLDivElement){const t=i.Ynt(Q.iN);return new lq(t,e,n,r,i,s)}throw new Ui(Do.CONFIGURATION_ERROR,"Container Div element expected.")}OY(){return!1}}),r(),r(),r(),r();var dq="theo_live_user_id",fq=class{incrementSequenceNumber(){this.jy+=1}get sequenceNumber(){return this.jy}constructor(t){this.externalId=t,this.id=_o(),this.userId=gq(),this.jy=0}};function gq(){try{const t=localStorage.getItem(dq);if(t)return t;const i=_o();return localStorage.setItem(dq,i),i}catch(t){return _o()}}r();var _q=class{vwt(t){const i=this.pCt.get(t.id);if(i)return i;const e=new vq(t,this.dU,this.ACt);return this.pCt.set(t.id,e),e}constructor(t,i){this.dU=t,this.pCt=new Map,this.ACt=i}},vq=class{get yCt(){return Du()-this.bCt>36e5}Yn(){this.MCt=!1,this.bCt=Du(),this.TCt=this.eTt(),this.TCt.catch((()=>this.MCt=!0))}async eTt(){const{id:t,discovery:i}=this.Nb;if(Qh(i.pathname,"manifest.json"))return function(t){return{id:{id:t.id,discovery:me.Ah("dev://")},name:"demo",mode:"demo",status:"playing",source:{src:t.id,type:"theo.live"},customization:{autoplay:!0}}}(this.Nb);const e=await this.SCt(this.Nb,this.NCt);if(!e)throw new mq(t);const{mode:s,status:n,fallback:r,metadata:o}=e;if("locked"===s)throw new pq(t);if("deleted"===n)throw new Aq(t);return{id:this.Nb,name:o.name,mode:s,status:n,source:yq(e),fallback:r?await this.ICt(r,i,this.NCt):void 0,insights:null==o?void 0:o.insights,enhancedLogging:null==o?void 0:o.enhancedLogging,customization:null==o?void 0:o.customization}}async ICt(t,i,e){if("theo.live"!==t.type)return{src:t.src,type:t.type};const s={id:t.src,discovery:i},n=await this.SCt(s,e);return n?yq(n):void 0}async SCt(t,i){let{id:e,discovery:s}=t;try{const t=await this.dU.jS({Hu:me.Ah(e,s.toString()).toString(),RS:i});return await t.lS()}catch(t){return}}get Btt(){return(this.MCt||this.yCt)&&this.Yn(),this.TCt}constructor(t,i,e){this.Nb=t,this.dU=i,this.NCt=new Oh,e.discoveryHeader&&this.NCt.append("x-theolive-discovery",e.discoveryHeader),this.Yn()}};var wq=class extends Ui{constructor(t,i,e){super(t,"Could not load channel with id "+i+": "+e),this.channelId=i,this.reason=e}},mq=class extends wq{constructor(t){super(Do.THEO_LIVE_CHANNEL_NOT_FOUND,t,"The channel could not be found")}},pq=class extends wq{constructor(t){super(Do.THEO_LIVE_CHANNEL_NOT_FOUND,t,"This account has been locked")}},Aq=class extends wq{constructor(t){super(Do.THEO_LIVE_CHANNEL_NOT_FOUND,t,"The channel got deleted")}};function yq(t){var i;return{src:t.hespSrc,type:"theo.live",hlsSrc:t.hlsSrc,targetLatency:null==(i=t.metadata.customization)?void 0:i.targetLatency,contentProtection:t.drmConfig?bq(t.drmConfig):void 0}}function bq(t){const{integration:i,widevine:e,playready:s,fairplay:n}=t;return il({integration:i},e&&{widevine:{licenseAcquisitionURL:e.licenseUrl}},s&&{playready:{licenseAcquisitionURL:s.licenseUrl}},n&&{fairplay:{licenseAcquisitionURL:n.licenseUrl,certificateURL:n.certificateUrl}})}function Mq(t,i){return{id:t,discovery:me.Ah(t,i)}}r(),r();var Tq=class{get DCt(){return this.amountOfSamples>0?this.currentAverage:0}get ECt(){return this.kCt}LCt(t){this.xCt=!0,this.currentAverage=this.currentAverage+(t-this.currentAverage)/(this.amountOfSamples+1),this.amountOfSamples+=1,this.kCt=x.min(this.ECt,t)}constructor(){this.xCt=!1,this.amountOfSamples=0,this.currentAverage=0,this.kCt=1/0}},Sq=class extends Ui{constructor(){super(Do.THEO_LIVE_ANALYTICS_ERROR,"Illegal configuration: unexpected property analyticsEnabled")}},Nq=class{Na(t){var i,e,s;const n={state:t,width:this.ta.ke.clientWidth,height:this.ta.ke.clientHeight,activeQuality:null!=(s=null==(e=this.ta.rt.VE(0))||null==(i=e.lk)?void 0:i.mF)?s:-1,time:me.J_()};this.Ea&&function(t,i){return t.state===i.state&&t.activeQuality===i.activeQuality&&t.height===i.height&&t.width===i.width}(this.Ea,n)||(this.Ea=n,this.CCt("statechange",n))}jCt(t){var i,e;this.Na("loading");const s=Qh(me.Ah(t.source.src).host,"fastly.net");if(!this.OCt()&&!s)throw new Sq;var n,r;this.RCt=t,this.PCt=!1,this.Zxt=!1,this.zCt=-1/0,this.BCt({type:"session",channelId:t.id.id,channelStatus:t.status,sessionId:this.UCt.id,externalSessionId:this.UCt.externalId,backup:null==(i=t.fallback)?void 0:i.src,autoplay:null!=(n=null==(e=t.customization)?void 0:e.autoplay)&&n,userAgent:zl.userAgent,clientVersion:"8.11.0",clientType:"theoplayer"}),this.CCt("loadchannel",{targetLatency:null!=(r=t.source.targetLatency)?r:0})}Cn(){if(!this.QCt){var t,i;this.QCt=!0,this.ta.yn(ac.ua,this.FCt),this.ta.yn(Qi.Ep,this.YCt),this.ta.rt.yn(di.gE,this.VCt),this.ta.yn(Qi.mp,this.GCt),this.ta.yn(fa.CO,this.Aet),this.ta.yn(Qi.vp,this.Met),this.ta.yn(Qi.so,this.bet),this.ta.dD.yn("golive",this.WCt),this.ta.dD.yn("latencyrecoveryseek",this.ZCt),this.ta.yn(fa.xO,this.HCt),this.ta.yn(Qi.Dp,this.XCt),this.ta.yn(Ah.pn,this.qCt),null==(t=this.ta.Uc)||t.yn(["tnt","$st","int","ent","KCt"],this.JCt),null==(i=this.ta.Uc)||i.yn("$Ct",this.tjt),s.addEventListener("beforeunload",this.ijt),h.addEventListener("visibilitychange",this.ejt),this.CCt("visibilitychange",{visibility:h.visibilityState});const e=this.ta.ke;this.CCt("dimensionchange",{width:e.clientWidth,height:e.clientHeight}),this.sjt=me.J_(),this.njt=me.gw((()=>{const t=this.rjt();this.BCt(t)}),3e4),this.ojt=me.gw((()=>{this.hjt()}),5e3),this.ajt=me.gw((()=>{this.ujt.push(this.ta.GG.rq.mF)}),100)}}nE(){if(this.cjt.length>0){const t=this.rjt();this.BCt(t)}var t,i,e;(this.cjt=[],this.ljt=[],this.djt=[],this.QCt)&&(this.QCt=!1,this.ta.fn(ac.ua,this.FCt),this.ta.fn(Qi.Ep,this.YCt),this.ta.rt.fn(di.gE,this.VCt),null==(t=this.ta.rt.VE(0))||t.fn(Ct.zE,this.fjt),this.ta.fn(Qi.mp,this.GCt),this.ta.fn(fa.CO,this.Aet),this.ta.fn(Qi.vp,this.Met),this.ta.fn(Qi.so,this.bet),this.ta.dD.fn("golive",this.WCt),this.ta.dD.fn("latencyrecoveryseek",this.ZCt),this.ta.fn(fa.xO,this.HCt),this.ta.fn(Qi.Dp,this.XCt),this.ta.fn(Ah.pn,this.qCt),null==(i=this.ta.Uc)||i.fn(["tnt","$st","int","ent","KCt"],this.JCt),null==(e=this.ta.Uc)||e.fn("$Ct",this.tjt),s.removeEventListener("beforeunload",this.ijt),h.removeEventListener("visibilitychange",this.ejt),me._w(this.njt),me._w(this.ojt),me._w(this.ajt))}gjt(){this.CCt("intenttofallback")}_jt(){this.CCt("fallback")}hjt(){const t=this.ta.JI();if(t.length){const i=t.end(t.length-1)-this.ta.nD();this.ljt.push(i)}this.djt.push(this.ta.GG.rq.mF);const i=this.ta.qD.GR;void 0===i||this.ta.TD||(this.vjt=x.min(this.vjt,i),this.wjt=x.max(this.wjt,i),this.mjt.LCt(i))}pjt(t){var i;this.ujt.sort(((t,i)=>t-i));const e=null!=(i=this.ujt[0])?i:0;var s;const n=null!=(s=this.ujt[x.round(.05*this.ujt.length)])?s:0;var r;const o=null!=(r=this.ujt[x.round(.25*this.ujt.length)])?r:0;var h;const a=null!=(h=this.ujt[x.round(.5*this.ujt.length)])?h:0;var u;const c=null!=(u=this.ujt[x.round(.75*this.ujt.length)])?u:0;var l;const d=null!=(l=this.ujt[x.round(.95*this.ujt.length)])?l:0;var f;const g=null!=(f=this.ujt[this.ujt.length-1])?f:0,_=me.J_();var v;const w=(_-(null!=(v=this.sjt)?v:0))/1e3;return this.ujt.length=0,this.sjt=_,{activeQuality:t.mF,duration:w,min:e,p5:n,p25:o,median:a,p75:c,p95:d,max:g}}rjt(){var t,i,e;this.CCt("beacon",{activeQuality:null==(i=this.ta.rt.VE(0))||null==(t=i.lk)?void 0:t.mF,averageLatency:this.mjt.DCt,minLatency:this.vjt,maxLatency:this.wjt}),this.mjt=new Tq,this.vjt=1/0,this.wjt=-1/0;const s=null==(e=this.ta.rt.VE(0))?void 0:e.lk;if(s){const t=this.pjt(s);this.CCt("bandwidth-distribution",t)}const n=this.cjt.slice(0),r=x.round(this.djt.reduce(((t,i)=>t+i),0)/x.max(this.djt.length,1)),o=this.ljt.reduce(((t,i)=>t+i),0)/x.max(this.ljt.length,1);return this.djt=[],this.ljt=[],this.cjt.splice(0),{type:"events",channelId:this.RCt.id.id,userId:this.UCt.userId,currentTime:Du()/1e3,latency:this.ta.qD.GR,paused:this.ta.TD,events:n,rtt:x.round(1e3*this.ta.GG.rq.pF),sessionId:this.UCt.id,externalSessionId:this.UCt.externalId,userAgent:zl.userAgent,weightedAverageBandwidth:r,weightedAverageBufferSize:o}}OCt(){var t,i,e,s;return!1!==(null==(t=this.ACt)?void 0:t.analyticsEnabled)&&(null==(s=null==(e=this.RCt)||null==(i=e.insights)?void 0:i.enabled)||s)}BCt(t){if(this.OCt()){this.Ajt.push(t);for(const i of this.ACt.analyticsUrls)this.ta.GI.jS({Hu:i,hN:Ml.POST,RS:{Accept:"application/json","Content-Type":"application/json"},gN:gT.nN,wS:JSON.stringify(t)}).then((i=>{Ro(this.Ajt,t),xe(i.gS())})).catch((()=>{Ro(this.Ajt,t)}))}}yjt(t){if(this.OCt())for(const i of this.ACt.analyticsUrls)this.ta.GI.wN({Hu:i,wS:JSON.stringify(t)})}constructor(t,i,e){this.bjt=me.J_(),this.PCt=!1,this.Zxt=!1,this.QCt=!1,this.Mjt=!1,this.Tjt=0,this.Ajt=[],this.Sjt=0,this.cjt=[],this.ljt=[],this.djt=[],this.vjt=1/0,this.wjt=-1/0,this.mjt=new Tq,this.zCt=-1/0,this.ujt=[],this.sjt=void 0,this.Njt=void 0,this.Ea=void 0,this.VCt=()=>{var t,i;this.ta.rt.VE(0).yn(Ct.zE,this.fjt),this.CCt("qualities",{qualities:null==(i=this.ta.rt.VE(0))||null==(t=i.gk)?void 0:t.FE.map((t=>({id:t.o,bandwidth:t.mF,label:t.wh,width:t.ji,height:t.Ti})))})},this.ijt=()=>{this.CCt("exit"),this.Na("end");const t=this.rjt();for(const t of this.Ajt)this.yjt(t);this.Ajt.length=0,this.yjt(t)},this.ejt=()=>{this.CCt("visibilitychange",{visibility:h.visibilityState})},this.FCt=t=>{this.CCt("error",{message:t.errorObject.message})},this.YCt=()=>{this.CCt("volumechange",{volume:this.ta.ZD,muted:this.ta.mD})},this.fjt=t=>{var i;const e=t.bat.mF;this.CCt("qualitychange",{from:this.Njt,to:e}),this.Njt=e;const s=this.pjt(t.bat);var n;this.CCt("bandwidth-distribution",s),this.Na(null!=(n=null==(i=this.Ea)?void 0:i.state)?n:"loading")},this.GCt=t=>{this.CCt("playbackratechange",{rate:t.playbackRate,latency:this.ta.qD.GR})},this.Aet=()=>{this.Zxt||(this.Zxt=!0,this.CCt("firstplaying",{targetLatency:this.ta.qD.GR}));const t=this.PCt;var i,e,s,n;(this.PCt=!0,t)?this.CCt("playing",{activeQuality:null==(e=this.ta.rt.VE(0))||null==(i=e.lk)?void 0:i.mF}):this.CCt("playing",{timeSincePlay:(me.J_()-this.bjt)/1e3,activeQuality:null==(n=this.ta.rt.VE(0))||null==(s=n.lk)?void 0:s.mF});this.Na("play")},this.Met=t=>{this.CCt("pause"),this.PCt=!1,this.Na("pause")},this.bet=()=>{this.CCt("play"),this.bjt=me.J_()},this.WCt=()=>{me.J_()-this.zCt>100&&this.CCt("liveseek",{when:this.PCt?"playback":"after-pause"})},this.ZCt=()=>{this.zCt=me.J_(),this.CCt("latencyrecoveryseek",{when:this.PCt?"playback":"after-pause"})},this.HCt=t=>{this.Mjt||(this.Mjt=!0,this.Tjt=Du(),this.CCt("stallstart",{when:this.PCt?"playback":"after-pause"})),this.Na("stall")},this.XCt=t=>{if(this.Mjt){this.Mjt=!1;const t=(Du()-this.Tjt)/1e3;this.CCt("stallend",{stallDuration:t})}},this.qCt=kn((t=>{var i,e;this.CCt("dimensionchange",{width:t.width,height:t.height}),this.Na(null!=(e=null==(i=this.Ea)?void 0:i.state)?e:"loading")}),1e3),this.tjt=t=>{this.CCt("aderror",null==t?void 0:t.message)},this.JCt=t=>{switch(t.type){case"tnt":this.CCt("adbreakbegin");break;case"$st":this.CCt("adbreakend");break;case"int":this.CCt("adbegin");break;case"ent":this.CCt("adend");break;case"KCt":this.CCt("adskip")}},this.CCt=(t,i)=>{this.cjt.push({sequenceNumber:this.Sjt++,currentTime:Du()/1e3,type:t,extra:i})},this.ta=t,this.UCt=i,this.ACt=e}};r(),r();var hu=function(t){return t.STARTING="s",t.PLAYING="p",t.SEEKING="k",t.REBUFFERING="r",t.PAUSED="a",t.ENDED="e",t.QUIT="q",t}({}),ur=function(t){return t.MANIFEST="m",t.AUDIO="a",t.VIDEO="v",t.OTHER="o",t}({});function Js(t){return 100*x.round(t/100)}function Iq(t){const i=t.nD(),e=t.JI();for(let t=0;t<e.length;t++)if(e.start(t)<=i&&i<=e.end(t))return 1e3*(e.end(t)-i);return 0}function Is(t){return So(t.FE,(t=>t.Rt))}function Dq(t){return t.gk.VE(0)}function Eq(t){return t.gk.VE(t.gk.U-1)}r(),r();var eo=class t{static starting(i,e,s){return new t(hu.STARTING,i,e,s)}static playing(i){return new t(hu.PLAYING,i)}static seeking(i,e){return new t(hu.SEEKING,i,e)}static rebuffering(i,e){return new t(hu.REBUFFERING,i,e)}static paused(i){return new t(hu.PAUSED,i)}static ended(i){return new t(hu.ENDED,i)}static quit(i){return new t(hu.QUIT,i)}get ct(){return Date.now()-this.Ijt}Djt(){const t=this.ta.GG.rq.mF,i=this.ta.qD.GR,e=Iq(this.ta);t>0&&void 0!==e&&void 0!==i&&(this.Ejt+=1,this.kjt=this.Ljt(this.kjt,e),this.xjt=this.Ljt(this.xjt,1e3*this.ta.qD.md.targetOffset),this.HF=this.Ljt(this.HF,1e3*i),this.Cjt=this.Ljt(this.Cjt,t/1e3))}Ljt(t,i){return t+(i-t)/this.Ejt}Gk(){const t={sta:this.Wv,ts:this.Ijt,"theo-vt":this.jjt,"theo-at":this.Ojt,"theo-d":this.ct,"theo-r":this.DT};return this.Ejt>0?il({},t,{bl:Js(this.kjt),tbl:Js(this.xjt),ltc:Js(this.HF),mtp:Js(this.Cjt),"theo-w":this.Ejt}):t}Rjt(){return new t(this.Wv,this.ta,this.DT)}constructor(t,i,e,s){var n,r,o,h;this.Ijt=Date.now(),this.kjt=0,this.xjt=0,this.HF=0,this.Cjt=0,this.Ejt=0,this.Wv=t,this.ta=i,this.jjt=null==(r=Is(this.ta.rt))||null==(n=r.lk)?void 0:n.o,this.Ojt=null==(h=Is(this.ta.ht))||null==(o=h.lk)?void 0:o.o,this.DT=e,this.FF=s}},kq=class{Pjt(){var t;const i=this.ta.qD.GR,e=Iq(this.ta),s=this.ta.GG.rq.mF;return Lq({bl:e?Js(e):void 0,tbl:Js(1e3*this.ta.qD.md.targetOffset),ltc:i?Js(i):void 0,mtp:s?Js(s/1e3):void 0,sta:null==(t=this.zjt)?void 0:t.Wv,su:!this.Zxt||void 0,"theo-sq":this.UCt.sequenceNumber})}Bjt(t){var i,e;const s=function(t,i){switch(i){case ur.VIDEO:return Is(t.rt);case ur.AUDIO:return Is(t.ht)}}(this.ta,t);return Lq({br:(null==s||null==(i=s.lk)?void 0:i.mF)?Js((null==s||null==(e=s.lk)?void 0:e.mF)/1e3):void 0,ot:t,tb:s?Js(Eq(s).mF/1e3):void 0,lb:s?Js(Dq(s).mF/1e3):void 0})}Ujt(){return Lq({"theo-cw":this.ta.ke.clientWidth,"theo-ch":this.ta.ke.clientHeight})}Qjt(){var t;return Lq({sf:"e",sid:this.UCt.id,st:"l",v:2,"theo-eid":null==(t=this.UCt.externalId)?void 0:t.substring(0,128),"theo-cn":this.RCt.name.substring(0,128),"theo-v":"8.11.0","theo-t":"web","theo-u":this.UCt.userId})}Fjt(){const t={"CMCD-States":btoa(JSON.stringify(this.Yjt))};return this.Yjt=[],t}Vjt(t){this.zjt&&this.Yjt.push(this.zjt.Gk()),this.zjt=t}destroy(){this.Gjt(),s.removeEventListener("beforeunload",this.Gjt),this.ta.fn(fa.CO,this.UR),this.ta.fn(fa.xO,this.zR),this.ta.fn(Qi.vp,this.Wjt),this.ta.dD.fn("latencyrecoveryseek",this.Zjt),this.ta.dD.fn("golive",this.Hjt),this.ta.rt.fn(di.gE,this.OF),this.ta.ht.fn(di.gE,this.OF),this.ta.rt.FE.forEach((t=>t.fn(Ct.zE,this.Jr))),this.ta.ht.FE.forEach((t=>t.fn(Ct.zE,this.Jr))),this.ta.Nst.removeEventListener("intenttofallback",this.Xjt),this.ta.Nst.removeEventListener("publicationloadstart",this.qjt),this.ta.Nst.removeEventListener("publicationoffline",this.Kjt),this.ta.GG.KX(this.Jjt),me._w(this.$jt)}constructor(t,i,e){this.Yjt=[],this.Zxt=!1,this.FG=!1,this.Xjt=()=>{var t;this.Vjt(eo.starting(this.ta,"fallback",null==(t=this.ta.lD())?void 0:t.message))},this.qjt=()=>{this.Vjt(eo.starting(this.ta,"loadChannel"))},this.Kjt=()=>{this.Vjt(eo.ended(this.ta))},this.OF=t=>{t.Lt.yn(Ct.zE,this.Jr)},this.Jr=()=>{var t,i,e,s;const n=null==(i=Is(this.ta.rt))||null==(t=i.lk)?void 0:t.o,r=null==(s=Is(this.ta.ht))||null==(e=s.lk)?void 0:e.o;n&&r&&(this.zjt&&this.zjt.Wv===hu.PLAYING&&this.zjt.jjt===n&&this.zjt.Ojt===r||this.Vjt(eo.playing(this.ta)))},this.UR=()=>{this.Zxt=!0,this.FG=!1,this.Vjt(eo.playing(this.ta))},this.Zjt=()=>{this.Zxt&&!this.FG&&(this.FG=!0,this.Vjt(eo.seeking(this.ta,"latencyRecovery")))},this.Hjt=()=>{this.Zxt&&!this.FG&&(this.FG=!0,this.Vjt(eo.seeking(this.ta,"goLive")))},this.zR=()=>{this.ta.BD||this.Vjt(eo.rebuffering(this.ta,"visible"===h.visibilityState?void 0:"invisible"))},this.Wjt=()=>{this.Vjt(eo.paused(this.ta))},this.Jjt=t=>{const i=me.Ah(t.url),e=function(t){const{pathname:i}=t;if(Qh(i,"manifest.json"))return ur.MANIFEST;if(Re(i,"/video/"))return ur.VIDEO;if(Re(i,"/audio/"))return ur.AUDIO;return ur.OTHER}(i);if("o"===e)return;this.UCt.incrementSequenceNumber();let s=il({},t.headers,{"CMCD-Request":this.Pjt(),"CMCD-Object":this.Bjt(e),"CMCD-Status":this.Ujt(),"CMCD-Session":this.Qjt()});e===ur.VIDEO&&Qh(i.pathname,".hspc")&&this.zjt&&(this.Vjt(this.zjt.Rjt()),s=il({},s,this.Fjt())),t.redirect(il({},t,{headers:s}))},this.Gjt=()=>{this.zjt&&(this.Yjt.push(this.zjt.Gk()),this.zjt=void 0),this.Yjt.push(eo.quit(this.ta).Gk()),xe(this.ta.GI.jS({Hu:this.tOt,RS:this.Fjt(),vN:!0}))},this.ta=t,this.RCt=i,this.UCt=e,this.tOt=me.Ah("bye",i.source.src).href,s.addEventListener("beforeunload",this.Gjt),this.ta.yn(fa.CO,this.UR),this.ta.yn(fa.xO,this.zR),this.ta.yn(Qi.vp,this.Wjt),this.ta.dD.yn("latencyrecoveryseek",this.Zjt),this.ta.dD.yn("golive",this.Hjt),this.ta.GG.HX(this.Jjt),this.ta.rt.yn(di.gE,this.OF),this.ta.ht.yn(di.gE,this.OF),this.ta.Nst.addEventListener("intenttofallback",this.Xjt),this.ta.Nst.addEventListener("publicationloadstart",this.qjt),this.ta.Nst.addEventListener("publicationoffline",this.Kjt),this.zjt=eo.starting(this.ta,"loadchannel"),this.$jt=me.gw((()=>{var t;null==(t=this.zjt)||t.Djt()}),1e3)}};function Lq(t){return _.keys(t).map((i=>function(t,i){switch(typeof i){case"boolean":return i?t:t+"=false";case"number":return t+"="+i;case"string":return t+'="'+i+'"';default:return}}(i,t[i]))).filter(Boolean).sort().join(",")}r();var xq=class extends Gs{constructor(t){super("publicationloadstart"),this.publicationId=t}},Cq=class extends Gs{constructor(t){super("publicationoffline"),this.publicationId=t}},jq=class extends Gs{constructor(t,i){super("publicationloaded"),this.publicationId=t,this.channelName=i}},Oq=class extends Gs{constructor(){super("intenttofallback")}},Rq=class extends Gs{constructor(){super("enterbadnetworkmode")}},Pq=class extends Gs{constructor(){super("exitbadnetworkmode")}},zq=class extends Bo{get ga(){return this.Za||(this.Za=function(t){return{addEventListener(i,e){t.yn(i,e)},removeEventListener(i,e){t.fn(i,e)},get badNetworkMode(){return t.iOt},set badNetworkMode(i){t.iOt=i},preloadPublications:async i=>(await t.eOt(i)).map((t=>({name:t.name})))}}(this)),this.Za}get iOt(){return this.ta.iOt}set iOt(t){this.ta.iOt=t}eOt(t){return this.ta.eOt(t)}constructor(t){super(),this.ta=t}};var Bq=["https://theo-insights-prod-5cb0.ew.r.appspot.com/"],Uq=8e5,Qq=class extends Nu{sOt(){this.ta.dD.yn("latencyrecoveryseek",this.Zjt),this.ta.rt.yn(di.gE,this.OF)}nOt(){this.ta.dD.fn("latencyrecoveryseek",this.Zjt),this.ta.rt.fn(di.gE,this.OF)}lE(t){return this.Dxt?t.type===fa.CO?(void 0!==this.rOt?(me.rv(this.rOt),this.rOt=void 0,this.Zxt||this.yo(new fo(this.nD()))):this.yo(new fo(this.nD())),this.Zxt=!0,!0):t.type===fa.xO?(this.rOt||(this.rOt=me.ov((()=>{this.yo(new Oa(this.nD())),this.rOt=void 0}),100)),!0):"error"===t.type?(this.oOt.nE(),xe(this.hOt()),!0):super.lE(t):super.lE(t)}Ist(){return this.aOt.ga}get iOt(){return this.uOt}set iOt(t){this.Dxt&&(t?this.cOt():this.lOt())}cOt(){if(this.uOt)return;if(this.uOt=!0,this.aOt.yo(new Rq),0===this.ta.rt.U)return;const t=this.rt.VE(0),i=Lv(t.gk.FE,(t=>t.mF));var e;(null!=(e=i.DAt)?e:i.mF)<Uq?(t._k=[i],Promise.resolve().then((()=>t._k=t.gk.FE.slice()))):this.lOt()}lOt(){if(!this.uOt)return;if(this.uOt=!1,this.aOt.yo(new Pq),0===this.ta.rt.U)return;const t=this.ta.rt.VE(0);var i;const e=Fq(null!=(i=t._k)?i:t.gk.FE);t._k=e.length>0?e:Fq(t.gk.FE)}eOt(t){return Promise.all(t.map((async t=>{const i=this.dOt.vwt(Mq(t,this.fOt.discoveryUrl));return await Ic(i.Btt,this.bM.wm)})))}async wa(t,i){var e;this.Dxt=!1;for(const s of null!=(e=null==t?void 0:t.sources)?e:[]){if(bI(s)&&s.type===vt.Rk){if(void 0===s.src)continue;this.sOt(),this.Dxt=!0,this.aOt.yo(new xq(s.src));const e=Mq(s.src,this.fOt.discoveryUrl),n=this.aOt.Fm("publicationloaded");try{this.kc=t,this.XY=s,this.gOt=this.dOt.vwt(e);const n=await this.gOt.Btt;this.oOt.jCt(n);const{enhancedLogging:r}=n;(null==r?void 0:r.enabled)&&x.random()<=r.percentage&&this.ta.GG.HX(this._Ot),this.fOt.analyticsEnabled&&"theo.live"===n.source.type&&(this.vOt=new kq(this,n,this.UCt)),await Ic(this.wOt(this.ta.pP),i)}catch(t){throw this.a9(),this.dispatchErrorEvent(t),t}return void await Ic(n,i).catch(wh)}if("web"===Et.og&&(null==t?void 0:t.contentProtection)&&(!bI(s)||s.type!==vt.jk)){const t=new Ui(Do.CONFIGURATION_ERROR,"Content protection is not supported for this source type");throw this.dispatchErrorEvent(t),t}}return await super.wa(t,i)}async wOt(t){if(this.a9(),!this.gOt)return;const{source:i}=await this.gOt.Btt,e=await this.mOt(i);if("live"===e)if("primary"===this.pOt)try{await this.AOt(t)}catch(i){await this.yOt(t)}else await this.yOt(t);else if("offline"===e)await this.Kjt();else try{await this.AOt(t)}catch(t){await this.Kjt()}}async mOt(t){try{const i=await this.ta.GI.jS({Hu:t.src});return i.LS>=200&&i.LS<300?"live":404===i.LS||503===i.LS?"offline":"error"}catch(t){return"error"}}async yOt(t){if(!this.gOt)return;const i=await this.gOt.Btt;this.pOt="primary",this.wJ(i.source,t)}async Kjt(){if(!this.gOt)return;const t=await this.gOt.Btt;this.aOt.yo(new Cq(t.id.id)),this.bOt=me.ov((()=>this.wOt(this.ta.pP)),15e3)}wJ(t,i){var e,s,n;const r=this.gOt.Nb.id;var o;this.oOt.Cn();const h=Hh({sources:[{type:Yq(t.type),src:t.src,contentProtection:t.contentProtection,useManagedMediaSource:!0,latencyConfiguration:null!=(o=null==(e=this.XY)?void 0:e.latencyConfiguration)?o:Vq(t.targetLatency)},t.hlsSrc?{type:"application/x-mpegurl",src:t.hlsSrc}:void 0].filter(Rt),ads:this.Zxt?[]:null==(s=this.kc)?void 0:s.ads,blockContentIfAdError:null==(n=this.kc)?void 0:n.blockContentIfAdError,streamType:"live"});h.sources[0].bypassLicense=!0,this.ta.wa(h,(new Ai).wm).then((()=>{i&&this.ta.sE()})).catch(this.dispatchErrorEvent),this.gOt.Btt.then((t=>{this.aOt.yo(new jq(r,t.name))}))}async AOt(t){if(this.oOt.gjt(),this.aOt.yo(new Oq),!await this.MOt())throw new g("fallback not live");await this.TOt(t)}async TOt(t){var i;const e=await(null==(i=this.gOt)?void 0:i.Btt);(null==e?void 0:e.fallback)&&(this.oOt._jt(),this.pOt="fallback",this.wJ(e.fallback,t))}async MOt(){var t,i;const e=await(null==(t=this.gOt)?void 0:t.Btt);if(!(null==(i=this.fOt)?void 0:i.fallbackEnabled)||!(null==e?void 0:e.fallback))return!1;const s=await this.ta.GI.jS({Hu:e.fallback.src});return s.LS>=200&&s.LS<300}dispatchErrorEvent(t){if(t instanceof Ui)return this.yo(new As(t));this.yo(new As(new Ui(Do.THEO_LIVE_UNKNOWN_ERROR,t.message,t)))}async a9(){await this.ta.nE(),void 0!==this.bOt&&(me.rv(this.bOt),this.bOt=void 0)}nE(){var t;return this.bM.Dm(),this.bM=new Ai,this.nOt(),void 0!==this.rOt&&(me.rv(this.rOt),this.rOt=void 0),this.Dxt=!1,this.Zxt=!1,this.oOt.nE(),null==(t=this.vOt)||t.destroy(),this.vOt=void 0,this.kc=void 0,this.XY=void 0,this.gOt=void 0,this.pOt=void 0,this.SOt=[],this.ta.GG.KX(this._Ot),this.uOt&&this.lOt(),super.nE()}async gn(t){var i;this.bM.Dm(),void 0!==this.rOt&&(me.rv(this.rOt),this.rOt=void 0),this.Bo(),this.nOt(),null==(i=this.vOt)||i.destroy(),this.ta.dD.fn("latencyrecoveryseek",this.Zjt),await super.gn(t)}constructor(t,i){var e,s;super(t,i),this.Dxt=!1,this.bM=new Ai,this.rOt=void 0,this.Zxt=!1,this.SOt=[],this.uOt=!1,this.OF=t=>{const i=t.Lt;var e;i.yn(Ct.zE,this.Jr);const s=Fq(null!=(e=i._k)?e:i.gk.FE);i._k=s.length>0?s:Fq(i.gk.FE)},this.Jr=t=>{const i=t.bat;var e;(!i||(null!=(e=i.DAt)?e:i.mF)>=Uq)&&this.lOt()},this.Zjt=async()=>{this.cOt(),this.SOt.push(me.J_()),this.SOt=this.SOt.filter((t=>me.J_()-t<=3e5)),this.SOt.length>=3&&(this.SOt=[],await this.wOt(!0))},this.hOt=async()=>{if(this.gOt){if("demo"===(await this.gOt.Btt).mode){this.gOt.Yn();if("playing"!==(await this.gOt.Btt).status)return void this.yo(new As(new Ui(Do.THEO_LIVE_END_OF_DEMO,"This demo channel has been stopped automatically after 5 minutes")))}await this.wOt(!0)}},this._Ot=t=>{if("manifest"===t.type||"segment"===t.type||""===t.type){const i=me.Ah(t.url);i.searchParams.append("enhancedLogging","true"),t.redirect({url:i.toString()})}},this.aOt=new zq(this);const n=t.md.theoLive;var r,o,h,a;this.fOt={sessionId:null!=(r=null==n?void 0:n.sessionId)?r:_o(),userId:null!=(o=null==n?void 0:n.userId)?o:gq(),externalSessionId:null==n?void 0:n.externalSessionId,analyticsEnabled:!1!==(null==n?void 0:n.analyticsEnabled),fallbackEnabled:!1!==(null==n?void 0:n.fallbackEnabled),discoveryUrl:null!=(h=null==n?void 0:n.discoveryUrl)?h:"https://discovery.theo.live/channels/",analyticsUrls:null!=(a=null==n?void 0:n.analyticsUrls)?a:Bq},this.UCt=new fq(null==(e=this.fOt)?void 0:e.externalSessionId),this.oOt=new Nq(this,this.UCt,this.fOt),this.dOt=new _q(t.GI,{discoveryHeader:null==(s=this.fOt)?void 0:s.discoveryHeader}),this.ta.dD.yn("latencyrecoveryseek",this.Zjt)}};function Fq(t){return t.filter((t=>{var i;return(null!=(i=t.DAt)?i:t.mF)>=Uq}))}function Yq(t){switch(t){case"theo.live":return"application/vnd.theo.hesp+json";case"hls":return"application/x-mpegurl";case"dash":return"application/dash+xml";default:throw new g("Unknown source type: "+t)}}function Vq(t){return void 0===t?eX():{minimumOffset:t-qN,targetOffset:t,maximumOffset:t+qN,forceSeekOffset:t+2.5,minimumPlaybackRate:D,maximumPlaybackRate:Ut}}ya((t=>new Qq(t)),hh.nu),r(),r(),r();var Gq=Wo(Hl());r(),r(),r();var Wq=class extends Bo{get fC(){return this.NOt}Yn(t,i){this.Sy=t,this.NOt=i,this.Za&&this.yo(new OG(this.Za))}get ga(){var t;return null!=(t=this.Za)?t:this.Za=this.ma()}get o(){return this.Sy.id}get dk(){return this.SP}get mF(){return this.Sy.bitrate}get DAt(){}get Qrt(){return""}get wh(){return""}get xAt(){return""}get Fnt(){return!0}get EAt(){}oU(){throw new g("Method not implemented.")}hU(){throw new g("Method not implemented.")}gn(){this.Bo()}constructor(t,i){super(),this.SP=HI(),this.Za=void 0,this.Sy=t,this.NOt=i}},Zq=class extends Wq{ma(){return jG(this)}get oft(){return 0}get ji(){return this.Sy.targetWidth}get Ti(){return this.Sy.targetHeight}get kAt(){return 0}constructor(t,i){super(t,i)}};r();var Hq=class extends Bo{get Rt(){return!0}set Rt(t){}get ga(){var t;return null!=(t=this.Za)?t:this.Za=Zt(this)}DP(t){this.Rt=t}get Qdt(){}get zt(){return this.W3}get o(){return this.Nb||"millitrack"}get dk(){return this.SP}get wh(){return""}get gs(){return""}get gN(){return this.Rt?"enabled":"disabled"}set gN(t){this.DP("enabled"===t)}get lk(){}get gk(){return this.AP}get _k(){return this.IOt}set _k(t){if(this.IOt=t,this.Rt){const i=1===(null==t?void 0:t.length)?t[0].fC:void 0;this.DOt(i)}this.yo(new rY(this.AP.FE.slice(),this)),((null==t?void 0:t.length)||this.AP.U)&&this.yo(new eu((null==t?void 0:t[0])||this.AP.VE(0)))}get fk(){}gn(){this.Bo();for(const t of this.AP.FE)t.gn();this.AP.tr()}constructor(t,i){super(),this.SP=Xc(),this.AP=new nc,this.Nb=t,this.W3=i}},Xq=class extends Hq{Yn(t){for(const i of t.active){const e=So(t.layers,(t=>t.encodingId===i.id)),s=So(this.AP.FE,(t=>t.o===i.id));s?s.Yn(i,e):this.AP.yP(new Zq(i,e))}this.yo(new kc(this))}get Hw(){return Q.iN}DOt(t){var i;null==(i=this.EOt)||i.kOt(t)}gn(){this.EOt=void 0,super.gn()}constructor(t,i,e){super(t,i),this.EOt=e}};r();var qq=class{Yn(t){this.LOt=t}get mF(){var t,i,e,s,n;var r;return(null!=(n=null==(i=this.LOt)||null==(t=i.video.inbounds)?void 0:t.reduce(((t,i)=>t+i.bitrateBitsPerSecond),0))?n:0)+(null!=(r=null==(s=this.LOt)||null==(e=s.audio.inbounds)?void 0:e.reduce(((t,i)=>t+i.bitrateBitsPerSecond),0))?r:0)}get pF(){var t,i;return null!=(i=null==(t=this.LOt)?void 0:t.currentRoundTripTime)?i:0}AF(t){}};r(),r();var Kq=class extends Wq{ma(){return Vi(this)}get Dpt(){return this.xOt}constructor(t,i){super(t,i),this.xOt=0}},Jq=class extends Hq{Yn(t){for(const i of t.active){const e=So(t.layers,(t=>t.encodingId===i.id)),s=So(this.AP.FE,(t=>t.o===i.id));s?s.Yn(i,e):this.AP.yP(new Kq(i,e))}this.yo(new kc(this))}get Hw(){return Q.tN}DOt(t){var i;null==(i=this.EOt)||i.COt(t)}gn(){this.EOt=void 0,super.gn()}constructor(t,i,e){super(t,i),this.EOt=e}},$q=[Qi.so,Qi.vp,fa.CO,Qi.Dp,Qi.wp,Qi.lp,Qi.bp,Qi.yp,Qi.tp,Qi.mp,Qi.Ep,Qi.Km,Qi.Ap,Qi.Hm,Qi.Zm,Qi.np,Qi.ep],tK=["active","inactive","stopped","vad","layers","migrate","viewercount"],iK=class extends Bo{kOt(t){var i;null==(i=this.qT)||i.select(t).catch(this.Xmt)}COt(t){var i;null==(i=this.qT)||i.select(t).catch(this.Xmt)}get JD(){return!1}tE(){return this.jR.tE()}get ht(){return this.oP}get KI(){return this.jR.KI.ws()}get $I(){return this.jR.$I}set $I(t){}get bt(){return this.kc}get sD(){return this.jR.sD}set sD(t){this.rD(t)}rD(t,i){}get ct(){return this.jR.ct}get hD(){return this.jR.hD}get lt(){return this.FF}get cD(){return this.YF}get dD(){}get gD(){return this.jR.gD}get vD(){var t,i;const e=this.jOt,s=null==e||null==(t=e.video.inbounds)?void 0:t[0],n=null==e||null==(i=e.audio.inbounds)?void 0:i[0];var r,o,h,a;return{fP:this.dV.rq.mF,cP:null!=(r=null==s?void 0:s.framesDropped)?r:0,lP:0,dP:null!=(o=null==s?void 0:s.framesReceived)?o:0,gP:(null!=(h=null==s?void 0:s.totalBytesReceived)?h:0)+(null!=(a=null==n?void 0:n.totalBytesReceived)?a:0),_P:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}}}get mD(){return this.jR.mD}set mD(t){this.jR.mD=t}get bD(){var t,i;return null!=(i=null==(t=this.qT)?void 0:t.isActive())&&i}get TD(){return this.jR.TD}get ND(){return 1}set ND(t){}get kD(){return this.jR.kD.ws()}get xD(){return Ac.HY}set xD(t){}get OD(){return this.jR.OD}get PD(){return this.jR.PD.ws()}get BD(){return this.jR.BD}get ZF(){return this.jR.ZF}get nt(){return this.jR.nt}get FD(){return this.jR.FD}get rt(){return this.aP}get GD(){return this.jR.GD}get ZD(){return this.jR.ZD}set ZD(t){this.jR.ZD=t}get qD(){return this.fV}get XF(){return this.qF}get GR(){return this.fV.GR}ge(){this.jR.ge()}be(){this.jR.be()}async sE(){this.$n(),await this.jR.sE()}eE(){this.jR.eE()}async tr(){var t;this.kc=void 0,this.bM.Dm(),null==(t=this.qT)||t.stop(),this.qT=void 0,this.lmt&&(await this.lmt.catch(ul),this.lmt=void 0),this.OOt=void 0,await this.jR.tr(),this.jR.cY();for(const t of this.aP.FE)t.gn();this.oP.tr(),this.aP.tr()}async gn(){this.Bo(),await this.tr(),this.oP.gn(),this.aP.gn(),this.lY.gn(),this.jR.fn($q,this.Ds),this.jR.fn(ac.ua,this.Ss),await this.lV._Y(this.jR)}async wa(t,i,e){re(e),this.QNt();const s=t;this.kc=s,this.bM=new Ai;this.qT=new Gq.View(s.src,(()=>Gq.Director.getSubscriber({streamName:s.src,streamAccountId:s.streamAccountId,subscriberToken:s.subscriberToken})),void 0,!0),this.ROt=il({},s.connectOptions,{events:tK}),this.POt()}$n(){if(void 0!==this.lmt)return;const t=this.qT;void 0!==t&&(this.lmt=this.ON(t,this.ROt,this.bM.wm).catch(this.Xmt))}async ON(t,i,e){re(e);try{await Ic(t.connect(i),e),t.webRTCPeer.initStats({autoInitStats:!0,statsIntervalMs:1e3})}catch(i){wh(i),me.lw("[THEOplayer] Millicast connect error, reconnecting.",i),await Ic(t.reconnect(),e)}}async zOt(t,i){re(i);try{this.jR.o7(),this.OOt=t,await this.jR.tr(),await this.jR.$n({Hw:vl.wU,yk:"",TJ:t,vS:vt.Ok,KF:[]})}finally{this.jR.h7()}}POt(){const t=this.qT;t.on("track",(t=>{const i=this.ht.U,e=this.rt.U,s=i&&!e;if(e&&t.track.kind===Q.iN||s&&t.track.kind===Q.tN){const i=t.streams[0];if(s){const t=i.getVideoTracks().concat([]);for(const e of t)i.removeTrack(e)}this.zOt(i,this.bM.wm).catch(this.Xmt)}})),t.on("broadcastEvent",(t=>{switch(t.name){case"active":{this.yo(new AZ);const i=t.data;for(const t of i.tracks)t.media===Q.iN?this.aP.tt(new Xq(t.trackId,this.aP.U?BX.SLt:BX.NLt,this)):t.media===Q.tN&&this.oP.tt(new Jq(t.trackId,this.oP.U?$u.SLt:$u.NLt,this));break}case"inactive":this.yo(new yZ),this.aP.tr(),this.oP.tr();break;case"stopped":this.yo(new yZ);break;case"viewercount":default:break;case"layers":{const i=t.data;if(0===this.aP.U){const t=new Xq("",BX.NLt,this);t.Yn(i.medias[0]),this.aP.tt(t)}else{const t=So(this.aP.FE,(t=>t.zt===BX.NLt));null==t||t.Yn(i.medias[0])}break}}})),t.webRTCPeer.on("stats",(t=>{this.jOt=t,this.qF.Yn(t)}))}LY(t){this.FF||(xe(this.tr()),this.FF=be(t),this.YF=t,this.yo(new As(t)))}QNt(){this.FF=void 0,this.YF=void 0}rE(){return!1}oE(){}hE(){}aE(){this.jR.aE()}uE(){const t=this.OOt;void 0!==t&&this.zOt(t,this.bM.wm).catch(this.Xmt)}$D(){return this.jR.ka}_a(){return this.jR.aY}dE(t){return this.jR.uY(t)}constructor(t,i,e){super(),this.lV=t,this.dV=i,this.fV=e,this.bM=new Ai,this.lmt=void 0,this.OOt=void 0,this.aP=new $e,this.oP=new $e,this.qF=new qq,this.Ss=t=>{this.LY(FI(t.lt))},this.Xmt=t=>{F(t)||this.LY(new Ui(Do.MEDIA_DECODE_ERROR,t.message,t))},this.jR=this.lV.xY(Q.iN),this.lY=new li(this.jR,!0),this.jR.yn($q,this.Ds),this.jR.yn(ac.ua,this.Ss),this.lY.yn(ZN,this.Ds)}};ki(new class{get RY(){return bl.Ok}Gk(t,i,e,s,n,r,o,h){return new iK(i,n,r)}CY(t,i){return t.type===vt.Ok}async jY(t){let i=await ON(t);return i&&(i=Boolean(t.widevine||t.fairplay)),i&&!1}OY(){return!1}}),r(),r(),r(),r();var E=function(t){return t.BOt="currentbufferingrenditionchange",t.UOt="QOt",t.FOt="YOt",t.VOt="GOt",t}({});r(),r();var eK=class{constructor(t,i){var e,s;this.Qrt=void 0,this.dk=HI(),this.WOt=i,this.Hw=t.Hw,this.ZOt=t.ZOt,this.HOt=t.HOt,this.XOt=t.XOt,this.l=t.l,this.gs=t.gs,this.qOt=t.qOt,this.KOt=t.KOt,this.JOt=void 0===t.xAt,this.$Ot=null!=(s=null==(e=t.$Ot)?void 0:e.split(","))?s:[]}};function ne(t,i){return t.Hw===i.Hw&&(t.l===i.l||!(!t.ZOt||!i.ZOt))}function sK(t,i){return void 0!==t&&void 0!==i&&nK(t,i)}function nK(t,i){return t.WOt===i.WOt}function rK(t,i){return nK(t,i)&&t.qOt===i.qOt}function oK(t,i){for(const e of t)if(rK(e,i))return!0;return!1}var hK=class extends Bo{get fk(){return this.tRt}get Rt(){const t=this.iRt();if(!t)return!1;for(const i of this.gk.FE)if(i.eRt===t)return!0;return!1}set Rt(t){if(t!==this.Rt)if(t){var i;let t=null==(i=this.gk.VE(0))?void 0:i.eRt;const e=this.ta.sRt;for(const i of this.gk.FE)if(i.nRt===e){t=i.eRt;break}this.rRt(t)}else this.rRt(void 0)}get lk(){if(!this.Rt)return;const t=this.ta.oRt;for(const i of this.gk.FE)if(oK(t,i.eRt))return i}get ga(){return this.Za||(this.Za=Zt(this)),this.Za}get o(){return this.SP.toString()}get dk(){return this.SP}get wh(){return this.NP}set wh(t){t!==this.NP&&(this.NP=t,this.yo(new kc(this)))}get gs(){return this.iy}get gN(){return this.Rt?"enabled":"disabled"}get _k(){return this.tlt}set _k(t){let i=[];if(t){i=t.filter((t=>{const i=this.lk?cY(this.lk):void 0;return me.Ys.Rv(i,cY(t))})).filter((i=>this.gk.bP(t)&&i.Fnt))}else i=this.gk.FE.filter((t=>t.Fnt));if(0!==i.length){if(!(t===this.tlt||this.tlt&&Ev(this.tlt,i))){if(this.tlt=t?i:void 0,this.ta.hRt(i.map((t=>t.nRt))),1===i.length){const t=i[0].nRt,e=this.Wv===Q.iN,s=this.dV.Lq;xe(this.ta.aRt(t,{uRt:!0,cRt:s&&e,lRt:s&&!e}))}this.yo(new rY(i,this))}}else this.yo(new uY)}DP(t){this.Rt=t}gn(){this.Bo(),this.ta.fn(E.BOt,this.dRt),this.ta.fn(E.UOt,this.fRt);for(const t of this.gk.FE)t.gn();this.gk.tr()}constructor(t,i,e,s,n){var r;super(),this.Wv=t,this.ta=i,this.dV=e,this.fh=s,this.gk=n,this.tlt=void 0,this.gRt=void 0,this._Rt=()=>this.yo(new kc(this)),this.dRt=()=>{const t=this.lk;t&&this.gRt!==t&&(this.gRt=t,this.yo(new eu(t)))},this.fRt=()=>{const t=this.Rt;this.vRt!==t&&(this.vRt=t,this.fh.yo(new dc(this)),this.yo(new dc(this)))},this.gRt=this.lk,this.vRt=this.Rt;const o=n.VE(0);var h,a;this.NP=null!=(h=null==o?void 0:o.eRt.l)?h:"",this.iy=null!=(a=null==o?void 0:o.eRt.gs)?a:"",this.tRt=null==o||null==(r=o.eRt)?void 0:r.$Ot.map(fK).filter(Rt),this.SP=Xc(),this.ta.yn(E.BOt,this.dRt),this.ta.yn(E.UOt,this.fRt);for(let t=0;t<this.gk.U;t++){this.gk.VE(t).yn("update",this._Rt)}}},aK=class extends hK{get zt(){return $u.NLt}iRt(){return this.ta.wRt}rRt(t){xe(this.ta.mRt(t))}constructor(t,i,e,s){super(Q.tN,t,i,e,s)}},uK=class extends hK{get zt(){return BX.NLt}iRt(){return this.ta.pRt}rRt(t){xe(this.ta.ARt(t))}constructor(t,i,e,s){super(Q.iN,t,i,e,s)}},cK=class extends Bo{get o(){return String(this.nRt.o)}get dk(){return this.nRt.o}get mF(){return this.nRt.mF}get DAt(){return this.nRt.DAt}get wh(){var t;return null!=(t=this.NP)?t:this.eRt.l}set wh(t){this.wh!==t&&(this.NP=t,this.yo(new OG(this.ga)))}get xAt(){return this.eRt.WOt.yRt()}get EAt(){return this.nRt.EAt}hU(){}oU(){}gn(){this.Bo()}constructor(t,i){super(),this.nRt=t,this.eRt=i,this.NP="",this.Fnt=!0}},lK=class extends cK{get Dpt(){return 0}get Qrt(){var t;return(null==(t=this.nRt.Qrt)?void 0:t.eLt)||""}get ga(){return this.Za||(this.Za=this.ma()),this.Za}ma(){return Vi(this)}constructor(t,i){super(t,i),this.Za=void 0}},dK=class extends cK{get Qrt(){var t;return(null==(t=this.nRt.Qrt)?void 0:t.nLt)||""}get kAt(){return this.bRt}set kAt(t){this.bRt!==t&&(this.bRt=t,this.yo(new OG(this.ga)))}get oft(){var t,i;return null!=(i=null!=(t=this.Gkt)?t:this.nRt.oft)?i:0}set oft(t){this.oft!==t&&(this.Gkt=t,this.yo(new OG(this.ga)))}get Ti(){var t,i;return null!=(i=null==(t=this.nRt.Wkt)?void 0:t.Ti)?i:0}get ji(){var t,i;return null!=(i=null==(t=this.nRt.Wkt)?void 0:t.ji)?i:0}get ga(){return this.Za||(this.Za=this.ma()),this.Za}ma(){return jG(this)}constructor(t,i){super(t,i),this.Za=void 0,this.bRt=0,this.Gkt=void 0}};function fK(t){return"public.accessibility.describes-video"===t?ut.ck:"public.accessibility.transcribes-spoken-dialog"===t?ut.TRANSCRIBES_SPOKEN_DIALOG:"public.accessibility.describes-music-and-sound"===t?ut.DESCRIBES_MUSIC_AND_SOUND:"public.accessibility.easy-to-read"===t?ut.hk:void 0}r(),r();var Gi=new class{MRt(t){if(!this.Rt())return!1;const i=[];return!(i.length>0)||i.some((i=>i.toLowerCase()===t.toLowerCase()))}TRt(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];this.MRt(t)&&me.cw("DEBUG "+t+" -",...e)}pC(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];this.MRt(t)&&me.cw("INFO "+t+" -",...e)}SRt(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];this.MRt(t)&&me.lw("WARNING "+t+" -",...e)}lt(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];this.MRt(t)&&me.dw("ERROR "+t+" -",...e)}NRt(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];this.MRt(t)&&me.dw("FATAL "+t+" -",...e)}constructor(){this.Rt=()=>!1}},ms="HLSPlaylistParser",gK="Discontinuity",Mu="Buffering",_K=class{vht(){var t;const i=null==(t=this.ta.Tr)?void 0:t.IRt;if(!i||0===i.length)return void Gi.SRt("LLHLSTrackConfigurator","The HLSModel contains no variant streams.");var e;const s=null!=(e=So(i,(t=>0!==t.DRt.length&&0!==t.ERt.length)))?e:i[0],n=i.filter((t=>t!==s));for(const t of s.DRt){const i=new nc,e=[];i.yP(new lK(s,t)),e.push(t);for(const s of n)for(const n of s.DRt)if(ne(n,t)&&!oK(e,n)){i.yP(new lK(s,n)),e.push(n);break}this.kRt.tt(new aK(this.ta,this.dV,this.kRt,i))}for(const t of s.ERt){const i=new nc,e=[];i.yP(new dK(s,t)),e.push(t);for(const s of n)for(const n of s.ERt)if(ne(n,t)&&!oK(e,n)){i.yP(new dK(s,n)),e.push(n);break}this.LRt.tt(new uK(this.ta,this.dV,this.LRt,i))}}xRt(){this.CRt(this.kRt),this.CRt(this.LRt)}CRt(t){const i=[];for(const e of t.FE){const t=[];for(const i of e.gk.FE)fh(i.nRt.jRt,i.eRt)||t.push(i);for(const i of t)e.gk.Rb(i),i.gn();0===e.gk.U&&i.push(e)}for(const e of i)t.it(e),e.gn()}ORt(t,i){const e=this.RRt(t);void 0!==e&&(e.oft=i)}PRt(t,i){const e=this.RRt(t);void 0!==e&&(e.kAt=i)}RRt(t){for(const i of this.LRt.FE){const e=So(i.gk.FE,(i=>i.eRt===t));if(void 0!==e)return e}}constructor(t,i,e,s){this.ta=t,this.dV=i,this.kRt=e,this.LRt=s}};r();var vK=class{get mF(){return this.xut.$it}get pF(){return this.yEt.$it}AF(t){if("segment"!==t.Hw&&"preload-hint"!==t.Hw)return;const i=[new BH(this.yEt)];return"stream"!==t.CS||!function(t){return"segment"===t.Hw&&"initialization-segment"!==t.cN}(t)&&"preload-hint"!==t.Hw?i.push(new UH(this.xut)):i.push(new QH(this.xut,1e3)),new zH(i)}_Et(t){this.xut=new Y(Y.XDt,Y.qDt,1,t)}constructor(t){const i=t.mF>0?t.mF:Y.Eut,e=t.pF>0?t.pF:Ns.Eut;this.xut=new Y(Y.XDt,Y.qDt,1,i),this.yEt=new Ns(Ns.XDt,Ns.qDt,e)}};r();var wK=class extends Gs{constructor(t){super(E.VOt),this.lt=t}};r();var mK=class{IJ(t,i){const e={Hw:vl.mU,KF:[],n3:t.map((t=>({vS:t}))),v3:i};return Promise.resolve(void 0!==this.Unt.IJ([e]))}constructor(t){this.Unt=t}};r(),r();var pK=(t,i,e,s,n)=>t.filter((t=>!!fh(s,t)||1.1*t.mF<=e.mF)),AK=(t,i,e,s,n)=>t.filter((t=>{if(fh(s,t))return!0;let r=1/0;for(const i of t.jRt){var o,h;r=x.min(r,null!=(h=null!=(o=i.WOt.zRt)?o:i.WOt.BRt)?h:1/0)}r===1/0&&(r=1);const a=2*e.pF+t.mF*r/e.mF;return t.mF<=i.mF||n.URt>a})),yK=(t,i,e,s,n)=>lt(t,((t,i)=>i.mF-t.mF)),bK=(t,i,e,s,n)=>t.every((t=>t.EAt&&!j(t.EAt)))?lt(t,((t,i)=>i.EAt-t.EAt)):t,MK=(t,i,e,s,n)=>0===s.length?t:lt(t,((t,i)=>{const e=fh(s,t)?1:0;return(fh(s,i)?1:0)-e})),TK=(t,i,e,s,n,r)=>t.filter((t=>!t.Qrt||!i.Qrt||!(void 0!==i.Qrt.nLt&&void 0!==t.Qrt.nLt&&!_s(i.Qrt.nLt,t.Qrt.nLt)&&!r.QRt({vS:'video/mp4; codecs="'+t.Qrt.nLt+'"'}))&&!(void 0!==i.Qrt.eLt&&void 0!==t.Qrt.eLt&&!_s(i.Qrt.eLt,t.Qrt.eLt)&&!r.FRt({vS:'audio/mp4; codecs="'+t.Qrt.eLt+'"'})))),SK=(t,i,e,s,n)=>{if(!1===n.Olt)return t;if(me.Ys.vv)return t;const r=me.Ys.mv;var o;const h=(null!=(o=null==r?void 0:r.width)?o:n.ji)*GF;var a;const u=(null!=(a=null==r?void 0:r.height)?a:n.Ti)*GF;for(let i=0;i<t.length;i++){const e=t[i];if(void 0===e.Wkt)return t;const s=e.Wkt.Ti,n=e.Wkt.ji;if(s<=u&&n<=h)return t.slice(i,t.length)}return[]},NK=(t,i,e,s,n)=>function(t,i){const e=i.Olt;if(void 0===e&&!me.Ys.Qs)return t;if(!1===e)return t;for(let e=0;e<t.length;e++){const s=t[e];if(void 0===s.Wkt)return t;const n=s.Wkt.Ti,r=s.Wkt.ji;if(n===i.Ti&&r===i.ji)return t.slice(e,t.length);if(n<i.Ti||r<i.ji)return t.slice(0===e?e:e-1,t.length)}return[]}(t,n);var IK="AbrEvaluator",DK=class{get YRt(){return this.dV.rq}VRt(t){this.Hd=t}async GRt(t,i,e,s,n){return(await this.WRt(t,i,e,s,n))[0]}async WRt(t,i,e,s,n){if(0===t.length)throw new g("AbrEvaluator - Unable to select optimal variant stream from an empty list.");Gi.TRt(IK,"Performing optimal variant stream selection.");const r=this.YRt;let o=t;for(const t of this.Hd){const h=t(o,i,r,e,s,n);o=Kc(h)?h:await h}if(0===o.length){Gi.SRt(IK,"No possible variant stream remains after ABR rule evaluation. Selecting the lowest bandwidth variant stream.");return[rs(t,(t=>t.mF))]}return o}constructor(t){this.dV=t,this.Hd=[TK,pK,AK,yK,SK,NK,bK,MK]}};function EK(t,i){return[t,void 0!==i?t+i-1:ef]}function kK(t){return Boolean(t.aC)}function LK(t){return Boolean(t.Mrt)}r(),r(),r(),r(),r();var dt=function(t){return t[t.tN=0]="tN",t[t.iN=1]="iN",t[t.KB=2]="KB",t[t.ZRt=3]="ZRt",t}({}),qa=function(t){return t[t.HRt=0]="HRt",t[t.XRt=1]="XRt",t}({}),N=function(t){return t[t.HY=0]="HY",t[t.qRt=1]="qRt",t[t.KRt=2]="KRt",t}({}),xK=function(t){return t[t.QS=0]="QS",t[t.JRt=1]="JRt",t[t.$Rt=2]="$Rt",t}({});function L(t){return t?t.abt?t.lI+"@"+t.abt.Cn+"-"+(null!=(i=t.abt.U)?i:""):""+t.lI:"";var i}function CK(t,i){if(i===t)return!0;if(i.lI!==t.lI)return!1;if(!t.abt)return!0;if(i.abt){const e=EK(t.abt.Cn,t.abt.U),s=EK(i.abt.Cn,i.abt.U);if(e[0]<=s[0])return void 0===e[1]||void 0!==s[1]&&e[1]>=s[1]}return!1}function jK(t,i){return t===i||t.lI===i.lI&&(t.abt&&i.abt?t.abt.Cn===i.abt.Cn&&t.abt.U===i.abt.U:t.abt===i.abt)}function OK(t){const i=!!t.tPt||void 0;return{o:t.o,iPt:t.iPt,ZF:t.ZF,ePt:t.ePt,ct:t.ct,sPt:t.sPt,tPt:i,nPt:t.rPt,oPt:t.hPt,aPt:t.aPt,uPt:t.uPt}}function RK(t,i){var e,s,n;return{eLt:null!=(e=i.eLt)?e:null==t?void 0:t.eLt,nLt:null!=(s=i.nLt)?s:null==t?void 0:t.nLt,cPt:null!=(n=i.cPt)?n:null==t?void 0:t.cPt}}async function PK(t,i,e,s,n){const r=i.filter((t=>Re(t,"audio"))),o=i.filter((t=>Re(t,"video"))),h=[],a=e.map((t=>async function(t,i,e){if(!t.xAt)return;if(!t.lPt)return;if(t.hN!==N.KRt)return;const s=zK(t.lPt);if(!s)return;if(s.Jw===Z)return{Gb:s,SF:[],NF:void 0,RQ:t.xAt};if(s.Jw===Z_&&t.lPt===K_)return{Gb:s,SF:[],NF:t.xAt,RQ:void 0};{Gi.pC("HLSDrmUtils","Fetching key uri "+t.xAt+".");const n=await i.jS({Hu:t.xAt,dN:e});return{Gb:s,SF:[await n.gS()],NF:void 0,RQ:void 0}}}(t,s,n)));var u;const c=function(t,i){if(0===i.length)return t;const e=t=>{const e=i.indexOf(t.Gb.Jw);return e>=0?e:i.length};return lt(t,((t,i)=>e(t)-e(i)))}((await Promise.all(a)).filter(Rt),null!=(u=null==t?void 0:t.preferredKeySystems)?u:[]);for(const i of c){const e=OZ(null!=t?t:{},i.Gb),s="cbcs";h.push({Gb:i.Gb,SF:i.SF,NF:i.NF,RQ:i.RQ,MY:[{initDataTypes:[i.Gb.qw],audioCapabilities:RZ(r,s,null==e?void 0:e.audioRobustness),videoCapabilities:RZ(o,s,null==e?void 0:e.videoRobustness),persistentState:null==e?void 0:e.persistentState,distinctiveIdentifier:null==e?void 0:e.distinctiveIdentifier}]})}return h}function zK(t){return t===V_?Oe:t===F_?J_:t===q_?iv:t===K_?ev:void 0}function BK(t){if("#"!==t[0])throw new g("HLSPlaylistParser - Could not extract M3U8 tag or comment: "+t);return t.split(":",1)[0]}function UK(t){return"#"!==t[0]?t:t.split(":",1)[0]}function QK(t){const i=t.indexOf(":");if(-1===i||t.length<i+1)throw new g("HLSPlaylistParser - Could not extract M3U8 parameter: "+t);return t.substring(i+1)}function FK(t){const i=iu(QK(t));if(void 0===i)throw new g("HLSPlaylistParser - Could not extract M3U8 float parameter: "+t);return i}function ee(t){const i={},e=/[:,] ?([A-Z0-9-]+)=([^",]+|"([^"]*)")/gi;let s=e.exec(t);for(;null!==s;){const n=s[1];let r;r=void 0!==s[3]?s[3]:s[2],null!==n?i[n]=r:Gi.SRt(ms,"Ignoring unparsable M3U8 attribute name: "+t+"."),s=e.exec(t)}return i}function YK(t,i){const e=ee(t);let s,n;try{s=e.URI?me.Dw(e.URI,i):void 0,n=function(t){switch(t){case"AUDIO":return dt.tN;case"VIDEO":return dt.iN;case"SUBTITLES":return dt.KB;case"CLOSED-CAPTIONS":return dt.ZRt}throw new g("HLSPlaylistParser - Could not parse M3U8 media type: "+t+".")}(e.TYPE)}catch(i){throw new g("HLSPlaylistParser - Could not parse #EXT-X-MEDIA tag: "+t+".")}const r=e["GROUP-ID"],o=e.LANGUAGE,h=e["ASSOC-LANGUAGE"],a=e.NAME,u="YES"===e.DEFAULT;let c="YES"===e.AUTOSELECT;const l="YES"===e.FORCED,d=e["INSTREAM-ID"],f=e.CHARACTERISTICS,_=e.CHANNELS;if(r||Gi.SRt(ms,"#EXT-X-MEDIA tag has no GROUP-ID attribute: "+t+"."),o||Gi.SRt(ms,"#EXT-X-MEDIA tag has no LANGUAGE attribute: "+t+"."),a||Gi.SRt(ms,"#EXT-X-MEDIA tag has no NAME attribute: "+t+"."),n===dt.ZRt?(s&&Gi.SRt(ms,"#EXT-X-MEDIA tag of type CAPTIONS must not have a URI: "+t+"."),d?/^(CC[0-4])|(SERVICE([1-9]|[1-5][0-9]|6[0-3]))$/.test(d)||Gi.SRt(ms,"#EXT-X-MEDIA's INSTREAM-ID is invalid: "+t+"."):Gi.SRt(ms,"#EXT-X-MEDIA tag of type CAPTIONS must have an INSTREAM-ID attribute: "+t+".")):d&&Gi.SRt(ms,"#EXT-X-MEDIA tag must not have an INSTREAM-ID attribute if the TYPE is not CAPTIONS: "+t+"."),u&&!c&&(c=!0,e.AUTOSELECT&&Gi.SRt(ms,"#EXT-X-MEDIA tag with DEFAULT=YES attribute must have AUTOSELECT=YES attribute: "+t+".")),e.FORCED&&n!==dt.KB&&Gi.SRt(ms,"#EXT-X-MEDIA tag must not have a FORCED attribute if the TYPE is not SUBTITLES: "+t+"."),void 0===r||void 0===a)throw new g("HLSPlaylistParser - Could not parse #EXT-X-MEDIA tag: "+t+".");return{dPt:h,Ykt:_,$Ot:f,qOt:r,HOt:c,ZOt:u,XOt:l,KOt:d,gs:o,l:a,Hw:n,xAt:s}}function VK(t,i,e){const s=ee(t);let n,r,o;try{n=me.Dw(e,i),o=function(t){if(void 0===t)return;const i=t.split("x"),e=Number(i[0]),s=Number(i[1]);if(j(e)||j(s))throw new g("HLSPlaylistParser - Could not parse RESOLUTION attribute: "+t+".");return{ji:e,Ti:s}}(s.RESOLUTION),r=function(t){if(!t)return;let i,e,s;const n=t.split(",");for(const t of n){const n=t.trim();sa(n,"mp4a")?i="mp4a.40.05"===n?"mp4a.40.5":"mp4a.40.02"===n?"mp4a.40.2":n:"ac-3"===n||"ec-3"===n||"flac"===n.toLowerCase()?i=n:sa(n,"avc")||sa(n,"hvc1")||sa(n,"hev1")||sa(n,"dvh")||sa(n,"vp09")||sa(n,"av01")?e=n:s=s?s+","+n:n}return{eLt:i,nLt:e,cPt:s}}(s.CODECS)}catch(i){throw new g("HLSPlaylistParser - Could not parse #EXT-X-STREAM-INF tag: "+t+".")}const h=iu(s.BANDWIDTH),a=iu(s["AVERAGE-BANDWIDTH"]),u=iu(s.SCORE),c=iu(s["FRAME-RATE"]),l=s["HDCP-LEVEL"],d=[];if(void 0!==s["ALLOWED-CPC"]){const t=s["ALLOWED-CPC"].split(",");d.push(...t.map((t=>{const i=t.split(":");return{keysystem:i[0],label:i[1]}})))}const f=s["VIDEO-RANGE"],_=s.AUDIO,v=s.VIDEO,w=s.SUBTITLES,m=s["CLOSED-CAPTIONS"];if(void 0===h?Gi.SRt(ms,"#EXT-X-STREAM-INF tag has no valid BANDWIDTH attribute: "+t+"."):void 0!==a&&a>h&&Gi.SRt(ms,"#EXT-X-STREAM-INF tag must have BANDWIDTH attribute higher or equal to AVERAGE-BANDWIDTH attribute: "+t+"."),r||Gi.pC(ms,"#EXT-X-STREAM-INF tag should have a CODECS attribute: "+t+"."),r&&r.nLt&&void 0===o&&Gi.pC(ms,"#EXT-X-STREAM-INF tag should have a valid RESOLUTION attribute if it contains video codecs: "+t+"."),void 0===l||fh(["TYPE-0","TYPE-1","NONE"],l)||Gi.SRt(ms,"#EXT-X-STREAM-INF tag has an invalid HDCP-LEVEL attribute: "+t+"."),void 0===f||fh(["SDR","PQ","HLG"],f)||Gi.SRt(ms,"#EXT-X-STREAM-INF tag has an invalid VIDEO-RANGE attribute: "+t+"."),void 0===h)throw new g("HLSPlaylistParser - Could not parse #EXT-X-STREAM-INF tag: "+t+".");return{fPt:d,gPt:_,DAt:a,mF:h,_Pt:m,Qrt:r,oft:c,vPt:l,Wkt:o,EAt:u,wPt:w,xAt:n,mPt:v,pPt:f}}function GK(t,i){const e=ee(t);if(!e.URI)throw new g("HLSPlaylistParser - Could not parse #EXT-X-I-FRAME-STREAM-INF tag: "+t+".");try{return VK(t,i,e.URI)}catch(i){throw new g("HLSPlaylistParser - Could not parse #EXT-X-I-FRAME-STREAM-INF tag: "+t+".")}}function iu(t){const i=Number(t);return j(i)?void 0:i}function WK(t,i){const e=ee(t);let s,n;try{s=function(t){switch(t){case"NONE":return N.HY;case"AES-128":return N.qRt;case"SAMPLE-AES":return N.KRt;case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return t}throw new g("LLHLSPlaylistParser - Could not parse M3U8 key method: "+t+".")}(e.METHOD),n=e.URI?tJ(e.URI,i):void 0}catch(i){throw new g("HLSPlaylistParser - Could not parse #EXT-X-KEY tag: "+t+".")}const r=e.KEYFORMAT,o=e.IV,h=e.KEYFORMATVERSIONS;let a,u,c,l,d;if(s!==N.HY){if(c=r||K_,"SAMPLE-AES-CENC"===s||"SAMPLE-AES-CTR"===s){if(zK(c)!==Oe)throw new g("HLSPlaylistParser - #EXT-X-KEY tag with METHOD="+s+" is only compatible with Widevine.");a=N.KRt}else a=s;u=n,l=o?Vt(o):void 0,d=h?h.split("/").map((t=>Number(t))):[1]}else a=N.HY,(n||r||h||o)&&Gi.SRt(ms,"#EXT-X-KEY tag with METHOD=NONE must not have additional attributes: "+t+".");return{hN:a,xAt:u,APt:l,lPt:c,yPt:d}}function ZK(t){const i=QK(t);if(!i)return[void 0,""];const[e,s]=i.split(",");return[iu(e),s]}function HK(t,i){const e=t.split("@"),s=iu(e[0]),n=e.length>1?iu(e[1]):i;if(void 0===s||void 0===n)throw new g("HLSPlaylistParser - Could not parse #EXT-X-BYTERANGE tag: "+t+".");return{Cn:n,U:s}}function XK(t){if(void 0!==t)return HK(t,void 0)}function qK(t,i){return HK(QK(t),i)}function KK(t,i){const e=ee(t);try{const t=tJ(e.URI,i);return{lI:t,abt:XK(e.BYTERANGE)}}catch(i){throw new g("HLSPlaylistParser - Could not parse #EXT-X-MAP tag: "+t+".")}}function JK(t){const i=QK(t);if(!i)throw new g("HLSPlaylistParser - Could not parse #EXT-X-PROGRAM-DATE-TIME tag: "+t+".");const e=new Date(i);if(!af(e))throw new g("HLSPlaylistParser - Could not parse #EXT-X-PROGRAM-DATE-TIME tag: "+t+".");return e}function $K(t){const i=ee(t),e=i["START-DATE"],s=i["END-DATE"],n=iu(i["PLANNED-DURATION"]);let r,o,h,a=iu(i.DURATION);void 0!==i["SCTE35-CMD"]&&(r=Vt(i["SCTE35-CMD"]).buffer),i["SCTE35-IN"]&&(o=Vt(i["SCTE35-IN"]).buffer),i["SCTE35-OUT"]&&(h=Vt(i["SCTE35-OUT"]).buffer);const u="YES"===i["END-ON-NEXT"],c=function(t){const i={};for(const e of _.keys(t)){const s=t[e];void 0!==s&&sa(e,"X-")&&(i[e]=s)}return i}(i),l=i.ID,d=i.CLASS;let f,v;if(void 0===e)Gi.SRt(ms,"Could not parse #EXT-X-DATERANGE tag without START-DATE attribute: "+e+".");else if(f=new Date(e),v=void 0!==s?new Date(s):void 0,af(f)||Gi.SRt(ms,"Could not parse EXT-X-DATERANGE tag with invalid START-DATE attribute: "+f+"."),void 0!==a){const i=new Date(f.getTime()+1e3*a);v?v.getTime()!==i.getTime()&&(Gi.SRt(ms,"DURATION and END-DATE attributes of #EXT-X-DATERANGE tag are not aligned, updating the END-DATE: "+t+"."),v=i):v=i}else v&&(a=(f.getTime()-v.getTime())/1e3);if(u&&(i.CLASS||Gi.SRt(ms,"Could not parse #EXT-X-DATERANGE tag with END-ON-NEXT attribute without CLASS attribute: "+t+"."),i.DURATION&&Gi.SRt(ms,"Could not parse #EXT-X-DATERANGE tag with END-ON-NEXT attribute with DURATION attribute: "+t+"."),v&&Gi.SRt(ms,"Could not parse #EXT-X-DATERANGE tag with END-ON-NEXT attribute with END-DATE attribute: "+t+".")),void 0===l&&Gi.SRt(ms,"Could not parse #EXT-X-DATERANGE tag without valid ID attribute: "+t+"."),void 0===l||void 0===f)throw new g("HLSPlaylistParser - Could not parse #EXT-X-DATERANGE tag: "+t+".");return{o:l,iPt:d,ZF:f,ePt:v,ct:a,sPt:n,hPt:r,uPt:o,aPt:h,tPt:u,rPt:c}}function tJ(t,i){if(void 0===t)throw new g("HLSPlaylistParser - Unable to parse URL from string: "+t+".");return me.Dw(t,i)}function iJ(t,i){const e=ee(t),s=iu(e.DURATION),n=tJ(e.URI,i),r=XK(e.BYTERANGE),o="YES"===e.INDEPENDENT,h="YES"===e.GAP;if(void 0===s)throw new g("HLSPlaylistParser - Unable to parse #EXT-X-PART without valid DURATION: "+t);return{ct:s,xAt:{lI:n,abt:r},bPt:o,MPt:h}}function eJ(t){const i=ee(t);return{TPt:"YES"===i["CAN-BLOCK-RELOAD"],SPt:iu(i["CAN-SKIP-UNTIL"]),NPt:"YES"===i["CAN-SKIP-DATERANGES"],IPt:iu(i["HOLD-BACK"]),DPt:iu(i["PART-HOLD-BACK"])}}function sJ(t,i){const e=ee(t);if(void 0===e.URI)throw new g("HLSPlaylistParser - Could not parse #EXT-X-RENDITION-REPORT: "+t+".");const s=tJ(e.URI,i),n=iu(e["LAST-MSN"]),r=iu(e["LAST-PART"]);if(void 0===n)throw new g("HLSPlaylistParser - Could not parse #EXT-X-RENDITION-REPORT: "+t+".");return{xAt:s,EPt:n,kPt:r}}function nJ(t,i){var e;const s=ee(t),n=iu(s["SKIPPED-SEGMENTS"]),r=null==(e=s["RECENTLY-REMOVED-DATERANGES"])?void 0:e.split("\t");if(void 0===n)throw new g("HLSPlaylistParser - Could not parse #EXT-X-SKIP tag without valid SKIPPED-SEGMENTS attribute: "+t+".");return{LPt:n,xPt:r,CPt:i}}function rJ(t){const i=iu(ee(t)["PART-TARGET"]);if(void 0===i)throw new g("HLSPlaylistParser - Could not parse #EXT-X-PART-TARGET-DURATION tag: "+t+".");return i}function oJ(t){switch(QK(t)){case"VOD":return xK.JRt;case"EVENT":return xK.$Rt;default:return Gi.SRt(ms,"Found #EXT-X-PLAYLIST-TYPE tag with invalid value: "+t+"."),xK.QS}}function hJ(t,i){const e=ee(t);let s,n;try{s=function(t){if(void 0===t)throw new g("HLSPlaylistParser - Could not parse PRELOAD-HINT type: "+t+".");if("MAP"===t)return qa.HRt;if("PART"===t)return qa.XRt;throw new g("HLSPlaylistParser - Could not parse PRELOAD-HINT type: "+t+".")}(e.TYPE),n=tJ(e.URI,i)}catch(i){throw new g("HLSPlaylistParser - Could not parse #EXT-X-PRELOAD-HINT tag: "+t+".")}const r=iu(e["BYTERANGE-START"]),o=iu(e["BYTERANGE-LENGTH"]);let h;return void 0===r&&void 0===o||(h={Cn:r||0,U:o}),{Hw:s,xAt:{lI:n,abt:h}}}r(),r(),r();var aJ=class t{jPt(){const t=this.OPt[this.RPt];return this.RPt+=1,t}PPt(){return this.OPt[this.RPt]}Wp(){const i=new t("");return i.RPt=0,i.OPt=this.OPt.slice(this.RPt),i}static zPt(t){if(!t)return[];return t.split(/[\r\n]+/).map((t=>t.trim())).filter((t=>t))}constructor(i){this.RPt=0,this.OPt=t.zPt(i)}};function uJ(t,i,e){const s=t.xAt;let n=t.Rx,r=t.BPt,o=t.Cn;switch(e){case"#EXT-X-VERSION":n=function(t){const i=FK(t);return j(i)?(Gi.SRt(ms,"Playlist version is NaN: "+t+"."),1):i}(i);break;case"#EXT-X-INDEPENDENT-SEGMENTS":r=!0;break;case"#EXT-X-START":o=function(t){const i=ee(t),e=iu(i["TIME-OFFSET"]);if(void 0===e)throw new g("HLSPlaylistParser - #EXT-X-START is missing a TIME-OFFSET: "+t+".");return{UPt:e,QPt:"YES"===i.PRECISE}}(i);break;case"#EXT-X-DEFINE":Gi.SRt(ms,"Ignoring unsupported #EXT-X-DEFINE: "+i+".");break;default:Gi.pC(ms,"Ignoring unrecognized line or comment: "+i+".")}return{xAt:s,Rx:n,BPt:r,Cn:o}}function cJ(t,i){return t.map((t=>t.hN===N.HY||t.APt?t:il({},t,{APt:lJ(i)})))}function lJ(t){const i=new DataView(new ArrayBuffer(16)),e=new J;return e.Vp(8),pw(i,e,Io.fromNumber(t)),new T(i.buffer)}function dJ(t,i,e){Gi.pC(ms,"Parsing M3U8 playlist at "+t+".");const s=new aJ(e);if("#EXTM3U"!==s.jPt())throw new g("HLSPlaylistParser - Could not parse M3U8 playlist. Playlist does not start with #EXTM3U.");return function(t){return/^#EXT-X-(MEDIA|STREAM-INF|I-FRAME-STREAM-INF|SESSION-DATA|SESSION-KEY):/m.test(t)}(e)?function(t,i){let e;try{e=me.Dw(t)}catch(i){throw Gi.SRt(ms,"The master playlist has no valid base URI: "+t+"."),new g("HLSPlaylistParser - Could not parse HLS master playlist: "+t)}let s={xAt:e,BPt:void 0,Cn:void 0,Rx:void 0};const n=[],r=[],o=[],h=[];for(;;){const t=i.jPt();if(!t)break;try{const a=BK(t);switch(a){case"#EXT-X-MEDIA":{const i=YK(t,e);n.push(i);break}case"#EXT-X-STREAM-INF":{const s=VK(t,e,i.jPt());r.push(s);break}case"#EXT-X-I-FRAME-STREAM-INF":{const i=GK(t,e);o.push(i);break}case"#EXT-X-SESSION-DATA":Gi.SRt(ms,"Ignoring unsupported #EXT-X-SESSION-DATA: "+t+".");break;case"#EXT-X-SESSION-KEY":{const i=WK(t,e);h.push(i);break}default:s=uJ(s,t,a)}}catch(i){Gi.SRt(ms,"Ignoring unparsable line: "+t,i)}}let a=s.Rx;var u;const c=null!=(u=s.BPt)&&u,l=s.Cn;return void 0===a&&(Gi.SRt(ms,"The playlist has no #EXT-X-VERSION, assuming version is 2."),a=2),a>=8&&(r.some((t=>void 0!==t.EAt))||o.some((t=>void 0!==t.EAt)))&&(r.some((t=>void 0===t.EAt))||o.some((t=>void 0===t.EAt)))&&Gi.SRt(ms,"If one master playlist variant stream has a SCORE, all variants should have it."),{xAt:e,Rx:a,BPt:c,Cn:l,FPt:o,YPt:h,aC:n,VPt:r}}(t,s):function(t,i,e){let s={xAt:t,BPt:void 0,Cn:void 0,Rx:void 0};const n=[];let r,o,h,a,u=!1,c=!1;const l=[],d=Ge();let f,_,v,w,m,p,A,y,b,M=[],T=[],S=!1,I=!1;const D=[],E=[];let k,L,x,C,j,O=0,R=!1,P=xK.QS,z=!1,B=0;try{j=me.Dw(t)}catch(i){throw Gi.SRt(ms,"The media playlist has no valid base URI: "+t+".",i),new g("HLSPlaylistParser - Could not parse HLS media playlist.")}const U=e.Wp();for(;void 0===L||void 0===x;){const t=U.jPt();if(!t)break;try{switch(UK(t)){case"#EXT-X-MEDIA-SEQUENCE":L=FK(t);break;case"#EXT-X-DISCONTINUITY-SEQUENCE":x=FK(t)}}catch(i){Gi.SRt(ms,"Ignoring unparsable line: "+t,i)}}void 0===L&&(Gi.pC(ms,"#EXT-X-MEDIA-SEQUENCE tag is missing, assuming first segment media sequence number is 0."),L=0),void 0===x&&(Gi.pC(ms,"#EXT-X-DISCONTINUITY-SEQUENCE tag is missing, assuming first segment discontinuity sequence number is 0."),x=0);let Q=L,F=x;for(;;){const t=e.jPt();if(!t)break;let i=!1;try{const e=UK(t);switch(e){case"#EXTINF":i=!0,[f,_]=ZK(t);break;case"#EXT-X-BYTERANGE":i=!0,v=qK(t,O),v&&(O=v.Cn+v.U);break;case"#EXT-X-DISCONTINUITY":i=!0,S=!0,F++;break;case"#EXT-X-KEY":{var Y;i=!0;const e=WK(t,j);if(e.hN===N.HY){d.clear(),b=void 0;break}var V;const s=null!=(V=null==(Y=e.lPt)?void 0:Y.toString())?V:"identity";d.set(s,e),e.hN===N.qRt&&(b=e);break}case"#EXT-X-MAP":i=!0,m=KK(t,j),p=b;break;case"#EXT-X-PROGRAM-DATE-TIME":i=!0,A=JK(t);break;case"#EXT-X-GAP":i=!0,I=!0;break;case"#EXT-X-BITRATE":i=!0,y=FK(t);break;case"#EXT-X-TARGETDURATION":r=FK(t);break;case"#EXT-X-DATERANGE":{const i=$K(t);n.push(i);break}case"#EXT-X-PART":{i=!0;const e=iJ(t,j);T.push(e);break}case"#EXT-X-PRELOAD-HINT":{const i=hJ(t,j);D.push(i);break}case"#EXT-X-SKIP":{l.length>0&&Gi.SRt(ms,"#EXT-X-SKIP must appear before any #EXTINF tags."),i=!0;const e=nJ(t,Q);B=e.LPt,C=e.xPt,Q+=e.LPt;break}case"#EXT-X-SERVER-CONTROL":{const i=eJ(t);u=i.TPt,o=i.SPt,c=i.NPt,h=i.IPt,a=i.DPt;break}case"#EXT-X-RENDITION-REPORT":{const i=sJ(t,j);E.push(i);break}case"#EXT-X-PART-INF":k=rJ(t);break;case"#EXT-X-MEDIA-SEQUENCE":i&&Gi.SRt(ms,"#EXT-X-MEDIA-SEQUENCE must appear before any media segment tags.");break;case"#EXT-X-DISCONTINUITY-SEQUENCE":i&&Gi.SRt(ms,"#EXT-X-DISCONTINUITY-SEQUENCE must appear before any media segment tags.");break;case"#EXT-X-ENDLIST":R=!0;break;case"#EXT-X-PLAYLIST-TYPE":P=oJ(t);break;case"#EXT-X-I-FRAMES-ONLY":z=!0;break;default:if(sa(e,"#"))s=uJ(s,t,e);else{w=me.Dw(t,j);const i=m?{xAt:m,GPt:p}:void 0,e={YPt:cJ(j_(d),Q),WB:M,WPt:T,ct:f,iY:_,ZPt:S,xAt:{abt:v,lI:w},HPt:i,XPt:A,MPt:I,qPt:y,CPt:Q,KPt:F};l.push(e),Q++,M=[],T=[],f=void 0,_=void 0,S=!1,v=void 0,w=void 0,A=void 0,I=!1,y=void 0}}}catch(i){Gi.SRt(ms,"Ignoring unparsable line: "+t,i)}}if(T.length){const t=m?{xAt:m,GPt:b}:void 0,i={YPt:cJ(j_(d),Q),WB:M,WPt:T,ct:f,iY:_,ZPt:S,xAt:void 0,HPt:t,XPt:A,MPt:I,qPt:y,CPt:Q,KPt:F};l.push(i)}let G=s.Rx;var W;const Z=null!=(W=s.BPt)&&W,H=s.Cn;void 0===G&&(Gi.SRt(ms,"The media playlist has no #EXT-X-VERSION tag, assuming version is 2."),G=2),void 0===r&&Gi.SRt(ms,"Could not parse the HLS media playlist: no #EXT-X-TARGET-DURATION tag was found.");const X=l.length,q=X>0;q||Gi.SRt(ms,"The HLS media playlist contains no segments.");const K=q&&l[X-1].WPt.length>0;return K&&void 0===k&&Gi.SRt(ms,"Could not parse the HLS media playlist: no #EXT-X-PART-TARGET-DURATION tag was found, but it is required when some or all segments contain parts."),K&&void 0===a&&Gi.SRt(ms,"Could not parse the HLS media playlist: The #EXT-X-SERVER-CONTROL tag has no PART-HOLDBACK attribute, but it is required when some or all segments contain parts."),{TPt:u,SPt:o,NPt:c,JPt:n,KPt:x,$Pt:R,BPt:Z,IPt:h,tzt:z,CPt:L,LPt:B,DPt:a,zRt:k,izt:P,ezt:D,xPt:C,szt:E,nzt:r,Mrt:l,Cn:H,xAt:j,rzt:i,Rx:G}}(t,i,s)}r(),r();var fJ=class{get xAt(){return this.WOt.xAt}get Qrt(){return this.Okt}set Qrt(t){this.Okt=t?_J(t):void 0,this.ozt=function(t,i){return!(void 0!==(null==t?void 0:t.eLt)&&void 0===(null==i?void 0:i.eLt)||void 0!==(null==t?void 0:t.nLt)&&void 0===(null==i?void 0:i.nLt))}(this.hzt,this.Okt)}get azt(){return this.ozt}get jRt(){return this.uzt}get DRt(){return this.uzt.filter((t=>t.Hw===dt.tN))}get ERt(){return this.uzt.filter((t=>t.Hw===dt.iN))}get czt(){return this.uzt.filter((t=>t.Hw===dt.KB))}get lzt(){return this.uzt.filter((t=>t.Hw===dt.ZRt))}dzt(t){for(const i of this.uzt){const e=i.WOt.dzt(t);if(void 0!==e)return e}}fzt(t){for(const i of this.uzt){const e=i.WOt.fzt(t);if(void 0!==e)return e}}gzt(t){Ro(this.uzt,t)}constructor(t,i,e){var s,n,r,o;this.o=gJ++,this.EAt=void 0,this.Wkt=void 0,this.DAt=void 0,this.ozt=!1,this.uzt=[],this.WOt=i,this.mF=t.mF,this.DAt=t.DAt,this.EAt=t.EAt,this.hzt=t.Qrt?_J(t.Qrt):void 0,this.Okt=this.hzt,this.Wkt=t.Wkt,this.oft=t.oft,this.gPt=null!=(s=t.gPt)?s:"_zt"+this.o,this.mPt=null!=(n=t.mPt)?n:"vzt"+this.o,this.wPt=null!=(r=t.wPt)?r:"wzt"+this.o,this._Pt=null!=(o=t._Pt)?o:"mzt"+this.o,this.uzt=e}},gJ=0;function _J(t){return il({},t,{nLt:t.nLt?cA(t.nLt):void 0})}r(),r(),r();var vJ=class{get OP(){var t;return this.GP+(null!=(t=this.pzt)?t:0)}get Azt(){return this.yzt}get YPt(){return this.bzt.YPt}Mzt(t,i){this.GP=t,this.yzt=i}constructor(t,i,e,s,n){this.het=void 0,this.bzt=t,this.Tzt=i,this.GP=e,this.yzt=s,this.ct=n.ct,this.xAt=n.xAt,this.bPt=n.bPt,this.MPt=n.MPt}},wJ=class{get OP(){var t;return this.GP+(null!=(t=this.Szt)?t:0)}get Nzt(){return this.GP}get ct(){return this.$A}get xAt(){return this.Izt}get Dzt(){return this.Ezt}get Azt(){return this.yzt}get WPt(){return this.Hf}get kzt(){return this.Lzt}get RP(){var t;return this.OP+(null!=(t=this.$A)?t:this.Lzt)}set pzt(t){this.Szt=t;for(const i of this.Hf)i.pzt=t}get pzt(){return this.Szt}xzt(t){return this.Hf[t]}Czt(t){for(let i=0;i<this.Hf.length;i++){const e=this.Hf[i],s=e.OP,n=s+e.ct;if(s<=t&&t<=n)return t===n&&i+1<this.Hf.length?this.Hf[i+1]:e}}jzt(t){for(let i=this.Hf.length-1;i>=0;i--){const e=this.Hf[i];if(e.OP<=t)return e}}Ozt(t){let i=this.jzt(t);for(;i&&!i.bPt&&i.Tzt>0;)i=this.xzt(i.Tzt-1);return i}Mzt(t,i,e){const s=t.WPt.length!==this.Hf.length||e!==this.yzt;this.Ezt=i,this.yzt=e,this.$A=t.ct,null!=this.XPt||(this.XPt=t.XPt),void 0===this.Izt&&(this.Izt=t.xAt),s&&this.Rzt(t.WPt)}Rzt(t){this.Hf.length>t.length&&(this.Hf.length=t.length);let i=0;for(let e=0;e<t.length;e++){const s=t[e],n=this.yzt&&e===t.length-1,r=this.GP+i;if(e<this.Hf.length)this.Hf[e].Mzt(r,n);else{const t=new vJ(this,e,r,n,s);t.pzt=this.Szt,this.Hf.push(t)}i+=s.ct}this.Lzt=i}Pzt(){Or(this.Hf),this.Lzt=0}constructor(t,i,e,s,n){this.het=void 0,this.Hf=[],this.Lzt=0,this.GP=t,this.HPt=n.HPt,this.Ezt=e,this.yzt=s,this.$A=n.ct,this.XPt=n.XPt,this.Izt=n.xAt,this.MPt=n.MPt,this.CPt=n.CPt,this.ZPt=n.ZPt,this.KPt=i,this.YPt=n.YPt,this.Rzt(n.WPt)}};r();var mJ=function(t){return t.zzt="YES",t.Bzt="v2",t}({});r();var pJ=class extends ai{};r(),r(),r();var AJ=class extends Bh{get ga(){return this.Za||(this.Za=function(t){return Gr(ei(t),{get content(){return t.O},get class(){return t.iPt},get startDate(){return t.ZF},get endDate(){return t.ePt},get duration(){return t.ct},get plannedDuration(){return t.sPt},get endOnNext(){return t.tPt},get scte35Cmd(){return t.oPt},get scte35Out(){return t.aPt},get scte35In(){return t.uPt},get customAttributes(){return t.nPt}})}(this)),this.Za}get iPt(){return this.Uzt}get ZF(){return this.Qzt}get ePt(){return this.Fzt}get ct(){return this.$A}get sPt(){return this.Yzt}get tPt(){return this.Vzt}get oPt(){return this.Gzt}get aPt(){return this.Wzt}get uPt(){return this.Zzt}get nPt(){return this.Hzt}Yn(t){let i=!1;var e;(void 0===this.Uzt&&void 0!==t.iPt&&(i=!0,this.Uzt=t.iPt),void 0===this.Fzt&&void 0!==t.ePt&&(i=!0,this.Fzt=t.ePt),void 0===this.$A&&void 0!==t.ct&&(i=!0,this.$A=t.ct),void 0===this.Yzt&&void 0!==t.sPt&&(i=!0,this.Yzt=t.sPt),!this.Vzt&&t.tPt&&(i=!0,this.Vzt=t.tPt),i=this.updateCustomAttributes(t,i),void 0===this.Gzt&&void 0!==t.oPt&&(i=!0,this.Gzt=t.oPt),void 0===this.Wzt&&void 0!==t.aPt&&(i=!0,this.Wzt=t.aPt),void 0===this.Zzt&&void 0!==t.uPt&&(i=!0,this.Zzt=t.uPt),this.Xzt(),this.qzt(),this.Kzt(),i)&&(this.yo(new vh(this)),null==(e=this.WP)||e.yo(new gh(this)))}updateCustomAttributes(t,i){let e=i;if(t.nPt)for(const i of _.keys(t.nPt))void 0===this.Hzt[i]&&(e=!0,this.Hzt[i]=t.nPt[i]);return e}Xzt(){this.$A&&!this.Fzt&&(this.Fzt=new Date(this.Qzt.getTime()+ia(this.$A)))}qzt(){this.Fzt&&!this.$A&&(this.$A=uf(this.Fzt.getTime()-this.Qzt.getTime()))}Kzt(){this.HP===1/0&&(this.Fzt||this.$A)&&(this.HP=yJ(this.GP,this.$A,this.Qzt,this.Fzt))}constructor(t,i){super(i,yJ(i,t.ct,t.ZF,t.ePt),void 0,!1,t.o),this.Uzt=t.iPt,this.Qzt=t.ZF,this.Fzt=t.ePt,this.$A=t.ct,this.Yzt=t.sPt,this.Vzt=Boolean(t.tPt),this.Hzt=t.nPt||{},this.Gzt=t.oPt,this.Wzt=t.aPt,this.Zzt=t.uPt,this.Xzt(),this.qzt()}};function yJ(t,i,e,s){return Rt(i)?t+i:s?t+(uf(s.getTime())-uf(e.getTime())):1/0}var bJ=class extends nz{Yn(t,i){MJ(this,TJ(t),i)}fU(t){SJ(this.L.FE,t),super.fU(t)}constructor(){super(void 0,void 0,er.DATE_RANGE)}};function MJ(t,i,e){const s=t.L.FE;for(let e=s.length-1;e>=0;e--){const n=s[e],r=So(i,(t=>t.o===n.o));r?n.Yn(r):t.eU(n)}for(const s of i){const i=s.ZF;if(void 0!==i&&!t.Y3(s.o)){const n=e(i),r=new AJ(s,n);SJ(t.L.FE,r),t.fU(r)}}}function TJ(t){const i=Ge(),e=[];for(const s of t)if(i.has(s.o)){const t=i.get(s.o),e=il({},t,bS(s),{nPt:il({},t.nPt,s.nPt)});i.set(s.o,e)}else i.set(s.o,s),e.push(s.o);return e.map((t=>i.get(t)))}function SJ(t,i){const e=Sv(t,(t=>t.iPt===i.iPt));e&&e.tPt&&e.Yn({o:e.o,ePt:i.ZF})}var NJ=String.fromCharCode(95),IJ=NJ+"HLS_msn",DJ=NJ+"HLS_part",EJ=NJ+"HLS_skip",kJ="HLSMediaPlaylist",LJ=class{get $Pt(){if(0===this.Byt.length)return!1;return this.Byt[this.Byt.length-1].Azt}get ct(){return this.$A}get PD(){return this.e3}get Jzt(){return this.$zt}get BRt(){return this.tBt}get zRt(){return this.iBt}get IPt(){return this.$Pt?0:this.eBt?this.eBt:this.tBt?3*this.tBt:void 0}get DPt(){var t;return null!=(t=this.sBt)?t:this.iBt?3*this.iBt:void 0}get TPt(){return this.nBt}get SPt(){return this.rBt}get NPt(){return this.oBt}get izt(){return this.hBt}get aBt(){return void 0!==this.zRt}get uBt(){if(this.$Pt)return!0;const t=me.J_()/1e3,i=this.cBt,e=this.lBt;return void 0!==i&&t-i<e}get cBt(){return this.dBt}get fBt(){if(this.gBt)return me.J_()/1e3-this.gBt}get pzt(){return this.Szt}get lBt(){var t;return null!=(t=this.tBt)?t:void 0===this.dBt?5:1}get Mrt(){return this.Byt}get JPt(){return this._Bt}get vBt(){return this.wBt}set vBt(t){this.wBt=t}get Cn(){return this.XB}get mBt(){return this.pBt}yRt(t){if(!t)return this.xAt;const i=me.Ah(this.xAt);return void 0!==t.CPt&&i.searchParams.append(IJ,String(t.CPt)),void 0!==t.ABt&&i.searchParams.append(DJ,String(t.ABt)),void 0!==t.Ax&&i.searchParams.append(EJ,t.Ax),i.href}lut(t){const i=this.Byt;if(0===i.length)return;const e=t-i[0].CPt;return e<0||e>=i.length?void 0:i[e]}yBt(t){if(0===this.Byt.length)return;const i=VG(xJ.K_,this.Byt,t);if(!(i<0)){const e=this.Byt[i];return t===e.RP&&i+1<this.Byt.length?this.Byt[i+1]:e}{const i=this.Byt[this.Byt.length-1];if(t===i.RP)return i}}bBt(t){if(0===this.Byt.length)return;const i=this.Byt[0];if(t<i.RP)return i;const e=this.Byt[this.Byt.length-1];return t>=e.OP?e:this.yBt(t)}dzt(t){const i=this.bBt(t);if(void 0===i)return;for(let e=i.CPt-this.Byt[0].CPt;e>=0;e--){const i=this.Byt[e];if(void 0!==i.XPt)return new Date(i.XPt.getTime()+1e3*(t-i.OP))}}fzt(t){let i;for(const e of this.Byt)if(CJ(e))if(void 0===i)i=e;else{if(!(e.XPt.getTime()<=t.getTime()))break;i=e}if(void 0!==i)return i.OP+(t.getTime()-i.XPt.getTime())/1e3}MBt(t){switch(t){case qa.HRt:return this.TBt;case qa.XRt:return this.SBt;default:return}}Mzt(t){var i;void 0===this.tBt&&(this.tBt=null!=(i=t.nzt)?i:this.NBt(t));void 0===this.eBt&&void 0!==t.IPt&&(this.eBt=t.IPt),void 0===this.iBt&&void 0!==t.zRt&&(this.iBt=t.zRt),void 0===this.sBt&&void 0!==t.DPt&&(this.sBt=t.DPt),this.nBt=t.TPt,this.rBt=t.SPt,this.oBt=t.NPt,this.hBt=t.izt,this.Yyt(t),this.IBt(t);const e=So(t.ezt,(t=>t.Hw===qa.HRt)),s=So(t.ezt,(t=>t.Hw===qa.XRt));this.TBt=e?{xAt:e.xAt,Hw:e.Hw,KPt:t.KPt}:void 0,this.SBt=s?{xAt:s.xAt,Hw:s.Hw,KPt:t.KPt}:void 0,this.dBt=me.J_()/1e3;const n=this.e3.jn(this.e3.U-1);this.DBt();const r=this.e3.jn(this.e3.U-1);(!this.gBt||r-n>0)&&(this.gBt=this.dBt),null!=this.XB||(this.XB=t.Cn)}DBt(){this.$zt=this.EBt(),this.e3=this.kBt(this.$zt),this.$A=this.LBt()}EBt(){const t=this.Mrt;if(0===t.length)return ge.cR();const i=t[0].OP,e=t[t.length-1].RP;return new ge([i,e])}kBt(t){if(0===t.U||this.$Pt)return t;const i=t.Cn(0),e=t.jn(0)-this.RMt;return e<i?ge.aR(i):new ge([i,e])}get RMt(){return this.$Pt?0:null!=(e=null!=(i=null!=(t=this.xBt)?t:this.DPt)?i:this.IPt)?e:0;var t,i,e}LBt(){return 0===this.Byt.length?0:this.$Pt?xr(this.Byt,(t=>{var i;return null!=(i=t.ct)?i:t.kzt})):1/0}NBt(t){let i;for(const e of t.Mrt)if(void 0!==e.ct){const t=x.max(1,x.round(e.ct));(void 0===i||i<t)&&(i=t)}if(void 0===i)throw new g("HLSModel - Could not determine required segment target duration.");return i}Yyt(t){if(0===t.Mrt.length)return Or(this.Byt),void this.CBt();const i=this.jBt(t);if(!i)return;let e,s,n;i.OBt>0&&this.Byt.splice(0,i.OBt);const r=t.LPt;if(r>0){if(r>this.Byt.length)throw new pJ("New playlist skips over missing segments.");const i=this.Byt[r-1];if(void 0===i.ct)throw new pJ("New playlist skips over an incomplete segment.");e=i.Nzt+i.ct,n=i.KPt-t.KPt,s=r;for(let t=0;t<r;t++)this.Byt[t].Pzt()}else e=i.RBt,n=0,s=0;for(let i=0;i<t.Mrt.length;i++,s++){const r=t.Mrt[i],o=0===i,h=t.$Pt&&i===t.Mrt.length-1,a=r.ct,u=r.KPt+n;if(s<this.Byt.length){const t=this.Byt[s];0,t.Mzt(r,o,h)}else{let t=r;if(this.Byt.length>0&&void 0===t.HPt){t=il({},t,{HPt:this.Byt[this.Byt.length-1].HPt})}const i=new wJ(e,u,o,h,t);i.pzt=this.Szt,this.Byt.push(i)}void 0!==a&&(e+=a)}}jBt(t){if(0===this.Byt.length)return{OBt:0,RBt:0};const i=this.Byt[0].CPt,e=this.Byt[this.Byt.length-1].CPt,s=t.Mrt[0].CPt-t.LPt,n=t.Mrt[t.Mrt.length-1].CPt;let r=0,o=0;if(s<i){const e=this.Mrt[0].XPt,n=t.Mrt[0].XPt;if(!(e&&n&&e<n))return void Gi.SRt(kJ,"Ignoring older playlist (first media sequence number is "+s+", but previous playlist already started at "+i+")");r=this.Byt.length,this.CBt()}else{if(n<e)return void Gi.SRt(kJ,"Ignoring older playlist (last media sequence number is "+n+", but previous playlist already ended at "+e+")");if(e<s){var h;o=null!=(h=function(t,i){const e=Sv(t,(t=>void 0!==t.XPt));if(void 0===e)return;const s=function(t){let i=0;for(const s of t){if(s.ZPt)return;if(s.XPt)return[s,i];var e;i+=null!=(e=s.ct)?e:0}return}(i.Mrt);if(void 0===s)return;const[n,r]=s;if(e.KPt!==n.KPt)return;const o=(n.XPt.getTime()-e.XPt.getTime())/1e3;return e.Nzt+o-r}(this.Byt,t))?h:function(t,i,e){const s=t[t.length-1];var n;const r=null!=(n=s.ct)?n:x.max(e,s.kzt),o=e*(i-s.CPt-1);return s.Nzt+r+o}(this.Byt,s,this.tBt),Gi.TRt(kJ,"New playlist (starting at "+s+") is entirely after previous playlist (ending at "+e+"), resetting playlist and restarting at "+o+"s"),r=this.Byt.length,this.CBt()}else{0;const t=en(this.Byt,(t=>t.CPt===s));0,o=this.Byt[t].Nzt,t>0&&(r=t)}}return{OBt:r,RBt:o}}IBt(t){let i=t.JPt.map(OK);if(t.NPt&&t.rzt.Ax===mJ.Bzt&&(i=this._Bt.concat(i)),this._Bt=TJ(i),t.xPt)for(const i of t.xPt){const t=en(this._Bt,(t=>t.o===i));t>=0&&zr(this._Bt,t)}}PBt(t,i){if(this.Szt!==t){this.Szt=t;for(const t of this.Byt)t.pzt=this.Szt;this.DBt()}this.pBt=i}CBt(){this.Szt=void 0,this.pBt=void 0}constructor(t,i,e){this.dBt=void 0,this.gBt=void 0,this.TBt=void 0,this.SBt=void 0,this.tBt=void 0,this.iBt=void 0,this.eBt=void 0,this.sBt=void 0,this.Byt=[],this._Bt=[],this.nBt=!1,this.rBt=void 0,this.oBt=!1,this.hBt=xK.QS,this.e3=ge.cR(),this.$zt=ge.cR(),this.$A=void 0,this.wBt=-1/0,this.pBt=void 0,this.xAt=t,this.XB=i,this.xBt=e}},xJ=class t{static get K_(){return null!=this.Urt||(this.Urt=new t),this.Urt}Oyt(t){return t.OP}Ryt(t){return t.RP}Pyt(t,i){return ma(t,i)}zyt(t,i,e){return(t-i)/(e-i)}};function CJ(t){return void 0!==t.XPt}function jJ(t){return void 0!==t.WPt}function OJ(t){return jJ(t)?t.Dzt:0===t.Tzt&&t.bzt.Dzt}function RJ(t,i){return jJ(t)?jJ(i)?t.CPt+1===i.CPt:0===i.Tzt&&RJ(t,i.bzt):t.Tzt===t.bzt.WPt.length-1?RJ(t.bzt,i):!jJ(i)&&t.bzt===i.bzt&&t.Tzt+1===i.Tzt}r(),r(),r();var PJ=class extends ai{get name(){return"DiscontinuityMisalignmentError"}constructor(){super("Tried to wait for multiple discontinuity mappings at the same time")}};var zJ=class{zBt(t){const i=this.BBt.get(t);return void 0!==i&&BJ(i)}UBt(t){if(this.QBt()>t)return Promise.reject(new PJ);const i=[];for(const s of this.FBt){var e;if(s<t)null==(e=this.BBt.get(s))||e.YBt.sA(new PJ),this.BBt.delete(s);else i.push(s)}return this.FBt=i,-1===this.FBt.indexOf(t)&&this.FBt.push(t),this.VBt(t).YBt.rA}GBt(t){const i=this.BBt.get(t);if(!i||!BJ(i))throw new g("LLHLSPlayer - Missing timestamp mapping for discontinuity #"+t);return i}WBt(t){return this.GBt(t).RB}ZBt(t,i){const e=jJ(i)?i:i.bzt,s=this.GBt(e.KPt);let n=t.yP(s.RB);if(s.HBt){const t=Fu.vB(i.OP).Nz(n);if(t.Mz().vz(LD())){const i=x.round(t._z()/kD()._z());n=n.yP(kD().iB(i))}}return n}XBt(t,i){return this.ZBt(t,i).Nz(t)}qBt(t,i,e,s,n,r){this.KBt<t&&(this.KBt=t);const o=this.VBt(t);void 0===o.RB&&(o.JBt.some((t=>t.jat===i))||(o.JBt.push({jat:i,$Bt:e,tUt:s.dB(e.eC),iUt:n,HBt:r}),this.eUt(o,t)))}eUt(t,i){if(t.RB||!this.sUt(t))return;const e=function(t){return xv(t,UJ)}(t.JBt);t.RB=e.tUt.Nz(e.$Bt),t.HBt=t.JBt.some((t=>t.HBt)),t.YBt.eA(),Or(t.JBt),Ro(this.FBt,i)}sUt(t){return this.nUt.length>0&&this.nUt.every((i=>t.JBt.some((t=>t.jat===i))))}VBt(t){if(this.BBt.has(t))return this.BBt.get(t);{const i={RB:void 0,HBt:!1,YBt:new pa,JBt:[]};return this.BBt.set(t,i),i}}rUt(t){this.nUt=t,this.BBt.forEach(((t,i)=>this.eUt(t,i)))}oUt(){this.KBt=-1}QBt(){return this.KBt}Mm(){this.BBt.forEach((t=>t.YBt.Dm())),this.BBt.clear()}constructor(){this.nUt=[],this.BBt=rn(),this.FBt=[],this.KBt=-1}};function BJ(t){return void 0!==t.RB}function UJ(t,i){return-function(t,i){if(t.HBt||i.HBt)return function(t,i){let e=t.Nz(i);return t.Dz()||i.Dz()||(e.mz(LD())?e=e.Nz(kD()):e.bz(LD().Sz())&&(e=e.yP(kD()))),e}(t.$Bt,i.$Bt).wz(Fu.Cz);return t.$Bt.wz(i.$Bt)}(t,i)||function(t,i){return t.iUt===i.iUt?R.Zr:t.iUt?R.dm:R.fm}(t,i)||function(t,i){return t.tUt.wz(i.tUt)}(t,i)}var QJ=class{get hUt(){return this.aUt}get IRt(){return this.uUt}get IO(){return this.cUt}Mzt(t,i){if(LK(t))if(0===this.uUt.length)this.lUt(t);else{if(!i)return void Gi.SRt("HLSModel","No rendition was provided to update the playlist. Ignoring the update.");i.WOt.Mzt(t)}else{if(0!==this.uUt.length)return void Gi.SRt("HLSModel","Master playlist can only be applied once. Ignoring the update.");this.dUt(t)}}lUt(t){const i=this.fUt(t.xAt);i.Mzt(t);const e=this.gUt(dt.tN,i),s=this.gUt(dt.iN,i),n=new fJ({xAt:i.xAt,mF:0,DAt:0,EAt:NaN,Qrt:void 0,Wkt:void 0,oft:0,fPt:[],vPt:void 0,pPt:void 0,gPt:void 0,mPt:void 0,wPt:void 0,_Pt:void 0},i,[e,s]);this.uUt.push(n)}dUt(t){this.aUt.push(...t.YPt);const i=this._Ut(t);for(const e of t.VPt){const s=i.filter((t=>YJ(t,e)));this.vUt(e,s);const n=new fJ(e,this.fUt(e.xAt,t.Cn),s);this.uUt.push(n)}}fUt(t,i){let e=this.wUt.get(t);return void 0===e&&(e=new LJ(t,i,this.xBt),this.wUt.set(t,e)),e}_Ut(t){const i=[];for(const e of t.aC)if(void 0===e.xAt){for(const s of t.VPt)if(FJ(e.Hw,e.qOt,s)){const t=new eK(e,this.fUt(s.xAt));i.push(t)}}else{const t=new eK(e,this.fUt(e.xAt));i.push(t)}return i}gUt(t,i){return new eK({Hw:t,xAt:void 0,qOt:"",gs:void 0,dPt:void 0,l:"",ZOt:!0,HOt:!1,XOt:!1,$Ot:void 0,KOt:void 0,Ykt:void 0},i)}vUt(t,i){const e=i.filter((t=>t.Hw===dt.tN)),s=i.filter((t=>t.Hw===dt.iN)),n=t.Qrt&&(t.Qrt.nLt||t.Qrt.eLt);if((!n||t.Qrt.nLt)&&0===s.length){const e=this.gUt(dt.iN,this.fUt(t.xAt));i.push(e)}if((!n||t.Qrt.eLt)&&0===e.length){const e=this.gUt(dt.tN,this.fUt(t.xAt));i.push(e)}t.Qrt&&t.Qrt.cPt}mUt(t){for(const i of this.uUt)for(const e of i.jRt)if(e===t)return e}pUt(t){for(const i of this.uUt)if(i===t)return i}AUt(t){for(const i of this.uUt)if(fh(i.jRt,t))return i}Mm(){Or(this.uUt),Or(this.aUt),this.wUt.clear(),this.cUt.Mm()}constructor(t,i){this.uUt=[],this.aUt=[],this.wUt=Ge(),this.cUt=new zJ,this.yUt=t,this.xBt=i}};function FJ(t,i,e){switch(t){case dt.tN:return e.gPt===i;case dt.iN:return e.mPt===i;case dt.KB:return e.wPt===i;case dt.ZRt:return e._Pt===i}return!1}function YJ(t,i){return FJ(t.Hw,t.qOt,i)&&(!t.JOt||t.WOt.xAt===i.xAt)}r();var VJ=class extends Gs{constructor(t){super(WJ.bUt),this.eRt=t}};r();var GJ=class extends Gs{constructor(t){super(WJ.MUt),this.eRt=t}},Zs="HlsModelUpdater",WJ=function(t){return t.bUt="TUt",t.MUt="SUt",t}({}),ZJ=class extends Bo{get NUt(){return this.IUt}get DUt(){return this.EUt}get Tr(){return this.PAt}get kUt(){return this.LUt}async xUt(t){const i=this.PAt.yUt;if(!i)throw new g("HLSModelUpdater - Could not load HLS playlist: The provided source is empty.");this.yo(new Ti);const e=await this.CUt(i,{},2,!0,t),s=e.WOt;if(!kK(s)&&!LK(s))throw new g("HLSModelUpdater - Could not load HLS playlist: The playlist is invalid.");kK(s)||Gi.pC(Zs,"Detected media playlist only HLS stream."),this.jUt(s),e.OUt&&(this.EUt=!0,await this.RUt(t)),this.IUt=!0}async PUt(t,i,e,s){const n=this.PAt.mUt(t);if(!n)throw new g("HLSModelUpdater - Could not load HLS playlist for rendition: the rendition does not exist on the internal model.");const r={CPt:i,ABt:e,Ax:KJ(n)},o=ia(x.max(1,3*t.WOt.lBt));try{await this.zUt(n,r,s,o)}catch(t){throw wh(t),this.BUt(n),t}}UUt(t,i){const e=this.PAt.mUt(t);if(!e)throw new g("HLSModelUpdater - Could not load HLS playlist for rendition: the rendition does not exist on the internal model.");const s={CPt:void 0,ABt:void 0,Ax:KJ(e)},n=ia(x.max(1,3*t.WOt.lBt));return this.zUt(e,s,i,n)}QUt(t,i){return this.FUt.has(t.dk)||this.FUt.set(t.dk,new pa),Ic(this.FUt.get(t.dk).rA,i)}BUt(t){this.yo(new GJ(t))}async zUt(t,i,e,s){const n=t.WOt.yRt(i);let r;try{r=(await this.CUt(n,i,0,this.EUt,e,s)).WOt}catch(i){throw wh(i),t.WOt.vBt=me.J_(),i}if(!LK(r))throw new g("HLSModelUpdater - Could not load HLS playlist for rendition: the playlist is not a media playlist.");if(this.YUt&&t!==this.YUt&&!this.YUt.WOt.uBt)try{await this.UUt(this.YUt,e)}catch(i){wh(i),this.YUt=t,this.VUt()}try{this.jUt(r,t)}catch(n){if(n instanceof pJ&&void 0!==i.Ax){const n=il({},i,{Ax:void 0});return this.zUt(t,n,e,s)}throw n}this.GUt(t),this.YUt=t}async CUt(t,i,e,s,n,r){if(Gi.pC(Zs,"Loading HLS playlist at "+t+"."),s){const i=await this.WUt(t,n);if(void 0!==i)return{WOt:i,OUt:!0}}return{WOt:await this.ZUt(t,i,e,n,r),OUt:!1}}async WUt(t,i){try{const e=await this.Xut.trt([t]);if(re(i),void 0!==e)return dJ(e.responseURL,{},e.data)}catch(t){wh(t)}}async ZUt(t,i,e,s,n){const r={Hu:t,CS:Me.KM,dN:this.cTt,hN:Ml.GET,Hw:as.FS,wm:s,aN:n},o=await _t((()=>this.HUt(r)),s,e);return dJ(o.US,i,o.xS)}async HUt(t){const i=await this.dU.jS(t);return{xS:await i.dS(),US:i.US}}async RUt(t){re(t);const i=[];for(const e of this.PAt.IRt)for(const s of e.jRt)i.push(this.XUt(s,t));await Promise.all(i)}async XUt(t,i){try{const e=await this.Xut.trt([t.WOt.xAt]);re(i),void 0===e||t.WOt.uBt||await this.UUt(t,i)}catch(t){wh(t)}}VUt(){for(const t of this.PAt.IRt)for(const i of t.jRt)i!==this.YUt&&void 0!==i.WOt.pzt&&(i.WOt.uBt?this.GUt(i):i.WOt.CBt())}GUt(t){if(0!==t.WOt.Mrt.length){if(!this.YUt)return this.YUt=t,void this.YUt.WOt.PBt(0,void 0);if(this.qUt(this.YUt),!this.qUt(t)&&void 0===t.WOt.pzt){const i=this.KUt(t,this.YUt);Gi.TRt(Zs,"Assuming global timeline offset of "+i+"s for rendition "+t.WOt.xAt+"."),t.WOt.PBt(i,void 0)}}}KUt(t,i){if(HJ(t)){const e=t.WOt.Mrt[0],s=i.WOt.Mrt[0];return Gi.TRt(Zs,"Synchronizing by start of VOD: "+s.OP+" vs "+e.OP),s.OP-e.Nzt}const e=function(t,i){let e=t.length-1,s=i.length-1;for(;e>=0&&s>=0;){const n=t[e],r=i[s];if(n.KPt>r.KPt)e--;else if(n.KPt<r.KPt)s--;else if(n.ZPt){if(r.ZPt)return{segment:n,referenceSegment:r};s--}else e--}return}(t.WOt.Mrt,i.WOt.Mrt);if(void 0!==e){const{segment:t,referenceSegment:i}=e;return Gi.TRt(Zs,"Synchronizing by start of discontinuity #"+i.KPt+": "+i.OP+" vs "+t.OP),i.OP-t.Nzt}const s=qJ(t.WOt.Mrt);if(void 0!==s){const t=qJ(i.WOt.Mrt);if(void 0!==t){Gi.TRt(Zs,"Synchronizing by PDT:",t.XPt.toISOString()+" vs "+s.XPt.getTime());return t.OP-s.Nzt-(t.XPt.getTime()-s.XPt.getTime())/1e3}}const n=XJ(i),r=XJ(t);var o;const h=null!=(o=t.WOt.pzt)?o:0;return Gi.TRt(Zs,"Synchronizing by last segment:",n+" vs "+r),n-r+h}qUt(t){const i=this.PAt.mUt(t);if(!i)return!1;if(HJ(i))return!1;const e=function(t,i){return Sv(t,(t=>void 0!==t.het&&i.zBt(t.KPt)))}(i.WOt.Mrt,this.PAt.IO);if(void 0===e)return!1;if(i.WOt.mBt===e.KPt)return!0;const s=this.PAt.IO.ZBt(e.het,e)._z()-e.Nzt;return Gi.TRt(Zs,"Synchronize by media timestamp: "+s+"s for rendition "+t.WOt.xAt+"."),i.WOt.PBt(s,e.KPt),(void 0===this.YUt||void 0===this.YUt.WOt.mBt||this.YUt.WOt.mBt<e.KPt)&&(this.YUt=i),!0}jUt(t,i){var e;(this.PAt.Mzt(t,i),LK(t)&&i)&&(this.LUt=i,this.yo(new VJ(i)),null==(e=this.FUt.get(i.dk))||e.eA(),this.FUt.delete(i.dk));this.yo(new kW)}JUt(t,i){for(const e of this.PAt.IRt){const s=So(e.ERt,(t=>t.WOt===i));void 0!==s&&void 0!==t.nLt&&(s.Qrt=RK(s.Qrt,t));const n=So(e.DRt,(t=>t.WOt===i));void 0!==n&&void 0!==t.eLt&&(n.Qrt=RK(n.Qrt,t)),e.azt||void 0===s&&void 0===n||(e.Qrt=RK(e.Qrt,t))}}$Ut(t,i){for(const e of this.PAt.IRt){const s=So(e.ERt,(t=>t.WOt===i));void 0!==s&&void 0===t.nLt&&e.gzt(s);const n=So(e.DRt,(t=>t.WOt===i));void 0!==n&&void 0===t.eLt&&e.gzt(n)}}Mm(){this.Bo(),this.PAt.Mm(),this.FUt.forEach((t=>t.Dm())),this.FUt.clear()}constructor(t,i,e,s,n){super(),this.dU=t,this.Xut=i,this.cTt=e,this.IUt=!1,this.EUt=!1,this.YUt=void 0,this.LUt=void 0,this.FUt=rn(),this.PAt=new QJ(s,n)}};function HJ(t){return t.WOt.$Pt||t.WOt.izt===xK.$Rt}function XJ(t){const i=t.WOt.Mrt;return i[i.length-1].RP}function qJ(t){return Sv(t,(t=>void 0!==t.XPt))}function KJ(t){if(void 0!==t.WOt.SPt&&!t.WOt.$Pt&&!(void 0===t.WOt.cBt||me.J_()/1e3-t.WOt.cBt>=t.WOt.SPt/2))return t.WOt.NPt?mJ.Bzt:mJ.zzt}var JJ=class{get nt(){return this.Uwt}IBt(t){if(0===t.WOt.JPt.length)return;this.tQt||(this.tQt=this.jR.dE(vs.tU,void 0,void 0,void 0,void 0,er.DATE_RANGE),this.Uwt.tt(this.tQt));MJ(this.tQt,t.WOt.JPt,(i=>{var e;return null!=(e=t.WOt.fzt(i))?e:NaN}))}constructor(t,i){this.iQt=t=>{this.IBt(t.eRt)},this.uNt=t,this.jR=i,this.Uwt=new bn,this.uNt.yn(WJ.bUt,this.iQt)}};r();var $J=class extends Gs{constructor(){super(E.BOt)}};r(),r(),r();var t$=class{get eQt(){return this.b2}get KI(){return kl(this.Aot.KI,this.Aot.r4)}get Mrt(){return this.Byt}get Zwt(){return this.Ywt}sQt(t){var i;return null==(i=this.nQt(t))?void 0:i.eRt}Vlt(t){this.b2=t,this.rQt()}Ylt(t,i,e,s,n,r){this.Byt.push({eRt:t,Zut:i,oQt:ge.uR(n,r),hQt:ge.uR(e,s)}),this.rQt()}nQt(t){return So(this.Byt,(i=>i.hQt.gr(t)))}lut(t){return So(this.Byt,(i=>i.Zut===t))}ylt(t,i){return So(this.Byt,(e=>e.eRt===t&&RJ(e.Zut,i)))}i4(){const t=this.KI;t.U>0&&(this.Ywt=t.jn(t.U-1))}rQt(){const t=this.Aot.KI;this.Byt=this.Byt.filter((i=>0!==t.Sn(i.hQt).U))}constructor(t){this.Aot=t,this.Byt=[],this.b2=void 0,this.Ywt=void 0}},i$=class{get Hw(){return this.Wv}get aQt(){return QN(this.Wv)}get uQt(){return this.Eat}get cQt(){return this.lQt}get zEt(){return void 0!==this.dQt}fQt(){if(this.zEt)throw new g("Cannot perform new operation while BufferAppender is still busy")}fot(t){this.Aot!==t&&(this.fQt(),this.Aot=t,this.Eat=new t$(t))}gQt(){return this.dQt?this.dQt.rA:Promise.resolve()}_Qt(t){const i=this.Eat.Zwt;return void 0!==i&&this.vQt(t,i)}vQt(t,i){var e;const s=x.min(t,i);var n;return null!=(n=null==(e=this.Eat.KI.UO().HO(this.cQt).oR(s))?void 0:e.gr(i))&&n}wQt(t){return this.Eat.sQt(t)}Dm(){this.bM.Dm(),this.bM=new Ai}f2(t){this.fQt(),this.dQt=new pa;const i=i=>{this.pQt.mQt(t),this.AQt(i)};this.g2(t,this.bM.wm).then(i,i)}async g2(t,i){Gi.TRt(Mu,"Appending initializer",L(t.yQt.xAt)),await this.Aot.f2(t,i),Gi.TRt(Mu,"Appended initializer",L(t.yQt.xAt)),this.Eat.Vlt(t)}edt(t){this.fQt(),this.dQt=new pa;const i=i=>{this.pQt.mQt(t),this.AQt(i)};this.bQt(t,this.bM.wm).then(i,i)}async bQt(t,i){const e=t.eRt;if(void 0===e.WOt.BRt)throw new g("MediaBufferWrapper - Cannot append HLSAsset to "+this.Wv+" MediaBuffer for a HLSRendition with an undefined targetDuration.");const s=this.Eat.KI.jO,n=this.Aot.KI;Gi.TRt(Mu,"Appending",L(t.yQt.xAt)),await this.Aot.c2(t,i),Gi.TRt(Mu,"Appended",L(t.yQt.xAt),s,this.Eat.KI.jO);const r=t.OP,o=r+t.ct,h=t.yQt,a=h.OP;var u;const c=h.OP+(null!=(u=h.ct)?u:0);this.Eat.Ylt(e,h,r,o,a,c);const l=this.Aot.KI.HO(n),d=this.Eat.ylt(e,h);if(this.Hw===Q.iN)if(d)if(this.MQt(d))if(0===l.U){if(void 0===this.Eat.lut(h)){const t=this.Aot.r4.Sn(new ge([r,o]));this.lQt=this.lQt.WO(t)}}else{const t=l.Cn(0),i=new ge([t,o]);if(this.lQt=this.lQt.HO(i),t>r){const i=this.Aot.r4.Sn(new ge([r,t]));this.lQt=this.lQt.WO(i)}}else{const t=l.U>0&&l.Cn(0)<r?l.Cn(0):r;this.lQt=this.lQt.HO(new ge([t,o]))}else if(0===l.U){const t=this.Aot.r4.Sn(new ge([r,o]));this.lQt=this.lQt.WO(t)}else{var f;const t=l.Cn(0),i=null==(f=n.oR(r))?void 0:f.jn(0),e=i&&i>r?i:r;if(t>e){const t=this.Aot.r4.Sn(new ge([e,l.Cn(0)]));this.lQt=this.lQt.WO(t)}}t.yQt.Azt&&this.Eat.i4()}MQt(t){const i=t.hQt,e=i.Cn(0),s=i.jn(i.U-1),n=i.RO(0),r=i.zO(i.U-1);return this.lQt.qO(e,s,n,r)}constructor(t,i,e,s,n){this.dQt=void 0,this.bM=new Ai,this.lQt=ge.cR(),this.AQt=t=>{this.dQt&&(t?xj(t)&&this.aQt?this.TQt.kq(this.Aot.KI.hR)?this.dQt.eA():this.dQt.sA(t):F(t)?this.dQt.eA():this.dQt.sA(t):this.dQt.eA(),this.dQt=void 0)},this.Wv=t,this.pQt=e,this.Aot=i,this.Eat=s,this.TQt=n}};r(),r();var e$=class{async SQt(t,i,e,s){const n=await this.NQt(i,s);return await this.IQt.SQt(t,n,e)}async NQt(t,i){var e;if((null==(e=this.DQt)?void 0:e.Hu)!==t){Gi.TRt("HLSDecryptor","Fetching new AES-128 decryption key from "+t+".");const e=await this.dU.jS({Hu:t,CS:Me.HM,hN:Ml.GET,wm:i,Hw:as.GS,cN:jo.$S,dN:this.cTt}),s=await e.gS(),n=new T(s);this.DQt={Hu:t,xS:n}}return this.DQt.xS}constructor(t,i,e){this.IQt=t,this.dU=i,this.cTt=e,this.DQt=void 0}};r();var s$=class{async jS(t,i,e,s,n){const r=await this.EQt(t,i,e,Me.HM,s,n),o=await r.gS(n);return{httpStatusCode:r.LS,response:new T(o)}}async kQt(t,i,e,s,n){return(await this.EQt(t,i,e,Me.qM,s,n))._S(n)}async EQt(t,i,e,s,n,r){let o;t.abt&&(o=EK(t.abt.Cn,t.abt.U),0===o[0]&&o[1]===ef&&(o=void 0));const h=o?{Range:"bytes="+o[0]+"-"+o[1]}:void 0,a=new _e({Hu:t.lI,CS:s,RS:h,dN:this.cTt,hN:Ml.GET,Hw:i,cN:e,lN:this.mut,_N:s===Me.qM,fN:n,wm:r});try{const i=await this.Xut.ort(t.lI,o);if(re(r),void 0!==i)return null==n||n(i.buffer.byteLength,i.buffer.byteLength),new vu({jS:a,CS:a.CS,xS:i.buffer})}catch(t){wh(t)}return await _t((()=>Ic(this.dU.jS(a),a.wm)),r,this.Ent)}constructor(t,i,e,s,n=2){this.dU=t,this.Xut=i,this.mut=e,this.cTt=s,this.Ent=n}};r();var n$=class{LQt(){return this.xQt.WOt.TPt}async CQt(t,i,e){if(!this.LQt())throw new g("Could not perform blocking playlist update.");const s=this.jQt,n={CPt:t,ABt:i};return void 0!==s&&function(t,i,e){if(t.CPt===i.CPt){if(t.ABt===i.ABt)return!0;if(0===t.ABt&&void 0===i.ABt)return!0}if(t.CPt===i.CPt+1&&0===t.ABt&&void 0!==i.ABt){const t=e.lut(i.CPt);if(t&&t.xAt&&i.ABt>=t.WPt.length)return!0}return!1}(s,n,this.xQt.WOt)||(await this.OQt(),this.RQt(n)),this.uNt.QUt(this.xQt,e)}PQt(t){return this.RQt(),this.uNt.QUt(this.xQt,t)}RQt(t){if(!this.zQt&&!this.BQt){const i=()=>{this.zQt=void 0};this.zQt=this.UQt(t,this.QQt.wm).then(i,i)}}async OQt(){this.zQt&&(this.QQt.Dm(),this.QQt=new Ai,await this.zQt.catch(ul),this.zQt=void 0)}async UQt(t,i){let e=t;for(;;){if(re(i),this.xQt.WOt.$Pt&&this.xQt.WOt.uBt)return;null!=e||(e=this.FQt()),this.jQt=e;try{if(e)await this.uNt.PUt(this.xQt,e.CPt,e.ABt,i);else{const t=me.J_()-this.An,e=1e3*this.xQt.WOt.lBt;t<e&&await Bn(e-t,i),await this.uNt.UUt(this.xQt,i)}}catch(t){throw this.jQt=void 0,wh(t),this.uNt.BUt(this.xQt),t}e=void 0,this.An=me.J_()}}FQt(){const t=this.xQt.WOt;if(!t.TPt||t.$Pt||0===t.Mrt.length)return;const i=t.Mrt[t.Mrt.length-1];return i.xAt?{CPt:i.CPt+1,ABt:t.aBt?0:void 0}:{CPt:i.CPt,ABt:i.WPt.length}}Mm(){this.BQt=!0,xe(this.OQt())}constructor(t,i){this.zQt=void 0,this.QQt=new Ai,this.An=-1/0,this.jQt=void 0,this.BQt=!1,this.uNt=t,this.xQt=i,this.RQt()}};r();var r$=function(t){return t[t.HRt=0]="HRt",t[t.XRt=1]="XRt",t[t.YS=2]="YS",t[t.VS=3]="VS",t}({});r(),r();var U="AssetExtractor",o$=class{YQt(t,i,e){let s=i;for(const i of this.VQt){if(s>=t)return!0;if(s<i.Cn)return!1;if(s<i.jn){if(e<=i.jn)return!0;s=i.jn}}return s>=t}GQt(t,i){const e=[];for(let s=0;s<this.VQt.length;s+=1){const n=this.VQt[s],r=t-n.Cn,o=n.xS.length,h=x.min(o,x.max(r,0)),a=x.max(0,i+r),u=Qu(n.xS,h,a);u.length&&(s=this.WQt(s,n,t,h,a),e.push(u))}return e}ZQt(t,i){this.VQt.push({Cn:t,jn:t+i.length,xS:i})}WQt(t,i,e,s,n){let r=t;this.VQt.splice(r,1),r-=1,i.Cn<e&&(r+=1,this.VQt.splice(r,0,{Cn:i.Cn,jn:e,xS:Qu(i.xS,0,s)}));const o=e+n-s;return o<i.jn&&(r+=1,this.VQt.splice(r,0,{Cn:o,jn:i.jn,xS:Qu(i.xS,n)})),r}constructor(){this.VQt=[]}},h$=class{get HQt(){return this.XQt}async qQt(){const t=await this.uT.read();if(t.done)throw this.XQt=1/0,new g("No more data can be read from the given stream.");return this.XQt+=t.value.length,t.value}async KQt(t){await this.uT.cancel(t)}constructor(t,i){this.XQt=i,this.uT=t.getReader()}},a$=class{JQt(){this.$Qt.eA(),this.$Qt=new pa}tFt(t){const{ubt:i,cbt:e}=c$(this.Izt.abt),s=this.iFt.GQt(i,e-i);Gi.TRt(U,"Collected "+s.length+" chunks.");for(const i of s)t.enqueue(i)}async readAndSliceOutAssetBytes(t){await this.eFt.rA;const{ubt:i,cbt:e}=c$(this.Izt.abt);try{for(;;){const s=this.uT.HQt,n=await this.uT.qQt(),r=n.length;Gi.TRt(U,"Read "+r+" at "+s+" for extraction of "+L(this.Izt));const o=x.min(s+r,i)-s;if(!(o>0)){if(s+r<=e)return Gi.TRt(U,"Extracting the read data range for extraction of "+L(this.Izt)),t.enqueue(n),this.JQt(),xe(this.readAndSliceOutAssetBytes(t));{const i=e-s,o=Qu(n,0,i),h=Qu(n,i);return o.length>0&&(Gi.TRt(U,"Extracting "+o.length+" bytes for extraction of "+L(this.Izt)),t.enqueue(o)),Gi.TRt(U,"Of the read "+r+" bytes, the last "+h.length+" will be stored locally for extraction of "+L(this.Izt)),this.iFt.ZQt(s+i,h),Gi.TRt(U,"Extraction of "+L(this.Izt)+" completed as the entire request has been fulfilled."),this.sFt(t),void(this.nFt&&(Gi.TRt(U,"Aborting stream upstream as no more bytes are needed from "+L(this.Izt)+"."),await this.uT.KQt("AssetExtraction - AbortOnEnd")))}}{const i=Qu(n,0,o),e=Qu(n,o);if(Gi.TRt(U,"Of the read "+r+" bytes, the first "+o+" will be stored locally for extraction of "+L(this.Izt)),this.iFt.ZQt(s,i),e.length>0)return Gi.TRt(U,"Extracting "+e.length+" bytes for extraction of "+L(this.Izt)),t.enqueue(e),this.JQt(),xe(this.readAndSliceOutAssetBytes(t))}}}catch(i){Gi.TRt(U,"Extraction of "+L(this.Izt)+" completed as the entire source stream has been read."),this.sFt(t)}}sFt(t){t.close(),this.JQt(),this.rFt.eA()}start(t){Gi.TRt(U,"Preparing to push all collected data to controller for extraction of "+L(this.Izt)),this.tFt(t),Gi.TRt(U,"Collected data pushed to controller for extraction of "+L(this.Izt));const{cbt:i}=c$(this.Izt.abt);this.uT.HQt>=i?(Gi.TRt(U,"Extraction of "+L(this.Izt)+" completed as the entire request has been fulfilled."),this.sFt(t)):(Gi.TRt(U,"Continuing read from original stream for extraction of "+L(this.Izt)),xe(this.readAndSliceOutAssetBytes(t)))}get oFt(){return this.rFt.rA}pull(){return this.eFt.eA(),this.eFt=new pa,this.$Qt.rA}constructor(t,i,e,s){this.rFt=new pa,this.Izt=t,this.uT=i,this.iFt=e,this.nFt=s,this.eFt=new pa,this.$Qt=new pa}},u$=class{bP(t){if(!CK(this.Izt,t))return!1;const{ubt:i,cbt:e}=c$(t.abt);return this.iFt.YQt(this.hFt.HQt,i,e)}async swt(t,i){void 0===i&&(i=!1);const e=this.hFt,s=this.iFt;if(Gi.pC(U,"Extracting data from "+L(t)+" out of "+L(this.Izt)),this.aFt&&(Gi.TRt(U,"Awaiting previous extraction before extracting "+L(t)+" out of "+L(this.Izt)),await this.aFt),!this.bP(t))throw new g("The extractor does not contain the data requested");const n=new a$(t,e,s,i);return this.aFt=n.oFt,new GM(n)}constructor(t,i){this.Izt=i;const{ubt:e}=c$(this.Izt.abt);this.hFt=new h$(t,e),this.iFt=new o$}};function c$(t){if(t){const i=t.Cn;return{ubt:i,cbt:void 0!==t.U?i+t.U:ef}}return{ubt:0,cbt:ef}}var l$=class{async $n(){const t=await this.uFt.kQt(this.Izt,as.VS,jo.QS,void 0,this.bM.wm);return new u$(t,this.Izt)}bP(t){return CK(this.Izt,t)}async swt(t,i){void 0===i&&(i=!1);const e=await this.lmt;return await Ic(e.swt(t,i),this.bM.wm)}Dm(){this.lmt.catch(ul),this.bM.Dm()}constructor(t,i){this.Izt=t,this.uFt=i,this.bM=new Ai,this.lmt=this.$n()}};r();var d$=class extends Gs{constructor(t){super(p$.cFt),this.lN=t}};r();var f$=class extends Gs{constructor(t,i,e,s,n,r,o){super(p$.lFt),this.uri=t,this.dFt=i,this.lN=e,this.mediaSequenceNumeber=s,this.mediaTrackId=n,this.fFt=r,this.httpStatusCode=o}};function g$(t,i,e){const s=jJ(e)?e:e.bzt;if(i.zBt(s.KPt)){if(void 0!==e.het)return i.ZBt(e.het,e)._z();if(e!==s&&void 0!==s.het){const t=i.ZBt(s.het,s)._z();return e.OP+(t-s.OP)}}const n=t.WOt.lut(s.CPt-1);if(void 0!==n&&i.zBt(n.KPt)){if(n.WPt.length>0){const t=n.xzt(n.WPt.length-1);if(void 0!==t.het){const s=i.ZBt(t.het,t)._z();return e.OP+(s-t.OP)}}if(void 0!==n.het){const t=i.ZBt(n.het,n)._z();return e.OP+(t-n.OP)}}const r=t.WOt.lut(s.CPt+1);if(void 0!==r&&i.zBt(r.KPt)){if(r.WPt.length>0){const t=r.xzt(0);if(void 0!==t.het){const s=i.ZBt(t.het,t)._z();return e.OP+(s-t.OP)}}if(void 0!==r.het){const t=i.ZBt(r.het,r)._z();return e.OP+(t-r.OP)}}return e.OP}function _$(t){return void 0!==t.het}function v$(t,i,e,s){for(let n=i;n<t.length;n++){const i=t[n];if(i.KPt!==e)break;if(_$(i)){if(s(i,n))break}}}function w$(t,i,e,s){for(let n=i;n>=0;n--){const i=t[n];if(i.KPt!==e)break;if(_$(i)){if(s(i,n))break}}}r();var m$="HlsPlaylistDownloader",p$=function(t){return t.cFt="segmentdownloadprogress",t.lFt="segmentdownloaded",t}({}),A$=class extends Bo{gFt(t){this._Ft.Mm(),this._Ft=new n$(this.uNt,t),this.zEt?this.vFt=t:(this.xQt=t,this.wFt=0,this.mFt=void 0,this.pFt=void 0)}get zEt(){return void 0!==this.AFt}gQt(){return this.AFt?this.AFt.rA:Promise.resolve()}yFt(){return this.pQt.yFt()}bFt(t){this.pQt.bFt(t)}Dm(){var t,i,e;this.MFt.Dm(),this.MFt=new Ai,null==(t=this.TFt)||t.Dm(),this.TFt=void 0,null==(i=this.SFt)||i.Dm(),null==(e=this.NFt)||e.Dm(),this.SFt=void 0,this.NFt=void 0,this.wFt=0,this.mFt=void 0,this.pFt=void 0}Mm(){this._Ft.Mm()}get eRt(){var t;return null!=(t=this.vFt)?t:this.xQt}get ukt(){if(!this.xQt.WOt.$Pt||void 0===this.mFt)return!1;const t=this.xQt.WOt.lut(this.mFt);if(!t.Azt)return!1;if(void 0!==this.pFt){if(!t.xzt(this.pFt).Azt)return!1}return!0}IFt(t){const i=this.xQt.WOt.yBt(t);if(!i)return!1;if(void 0!==this.mFt){const e=i.CPt===this.mFt;return void 0!==this.pFt?i.Czt(t)===i.xzt(this.pFt)&&e:e}return!1}DFt(t){let i;if(void 0===this.mFt||t<this.wFt-1e-6)i=this.EFt(t);else if(i=this.kFt(this.mFt,this.pFt),void 0!==i){const[e,s]=i,n=g$(this.xQt,this.uNt.Tr.IO,null!=s?s:e),r=3*this.xQt.WOt.BRt;x.abs(n-t)>=r&&(i=this.EFt(t))}else if(this.xQt.WOt.$Pt){if(this.xQt.WOt.lut(this.mFt).Azt&&(i=this.EFt(t),void 0!==i&&i[0].CPt===this.mFt))return}if(i){this.wFt=t;const[e,s]=i;return 0===(null==s?void 0:s.Tzt)&&void 0!==e.ct?[e,void 0]:[e,s]}}EFt(t){let i,e;const s=this.xQt.WOt.Mrt;if(0===s.length)return;const n=this.uNt.Tr.IO,r=Fu.vB(t),o=function(t,i,e){const s=t.WOt.Mrt;if(0===s.length)return;const n=t.WOt.bBt(e._z());if(!i.zBt(n.KPt))return;const r=n.CPt-s[0].CPt,o=n.KPt;let h,a,u,c=0;if(w$(s,r,o,((t,i)=>(h=t,c=i,!0))),void 0===h&&(v$(s,r+1,o,((t,i)=>(h=t,c=i,!0))),void 0===h))return;return i.ZBt(h.het,h).Az(e)?(a=h,v$(s,c+1,o,(t=>i.ZBt(t.het,t).vz(e)?(u=t,!0):(a=t,!1)))):(u=h,w$(s,c-1,o,(t=>i.ZBt(t.het,t).Az(e)?(a=t,!0):(u=t,!1)))),void 0!==a&&void 0!==u?[a,u]:void 0}(this.xQt,n,r);let h;if(void 0!==o){const[t,i]=o,e=n.ZBt(t.het,t),s=n.ZBt(i.het,i),a=r.Nz(e)._z()/s.Nz(e)._z()*(i.OP-t.OP);h=t.OP+a}else h=t;const a=s[s.length-1];return a.RP<=h?(i=a,e=a.Ozt(h)):s[0].OP>h?(i=s[0],e=i.xzt(0)):(i=this.xQt.WOt.yBt(h),e=null==i?void 0:i.Ozt(h)),i?[i,e]:void 0}kFt(t,i){let e,s;if(e=this.xQt.WOt.lut(t),e&&void 0!==i){if(0===e.WPt.length)return[e,void 0];s=e.xzt(i+1)}return void 0!==e&&void 0!==s||(e=this.xQt.WOt.lut(t+1),s=null==e?void 0:e.xzt(0)),e?[e,s]:void 0}fQt(){if(this.zEt)throw new g("Cannot perform new operation while PlaylistDownloader is still busy")}LFt(t){this.fQt(),this.AFt=new pa,this.xFt(t,this.MFt.wm).then(this.CFt,this.CFt)}jFt(){this._Ft.RQt()}async xFt(t,i){if(this.xQt.WOt.$Pt)return;let e=this.DFt(t);for(!e&&this._Ft.LQt()&&void 0!==this.mFt&&(await this._Ft.CQt(void 0===this.pFt?this.mFt+1:this.mFt,void 0!==this.pFt?this.pFt+1:void 0,i),e=this.DFt(t)),!e&&this._Ft.LQt()&&void 0!==this.mFt&&(await this._Ft.CQt(this.mFt+1,0,i),e=this.DFt(t));!e;){Gi.pC(m$,"No next segment / part available, need to update playlist before continuing."),await this._Ft.PQt(i);const s=this.eRt.WOt.Mrt;s[0].OP>t&&(this.pFt=void 0,this.mFt=void 0);s[s.length-1].CPt<this.mFt&&(this.pFt=void 0,this.mFt=void 0),e=this.DFt(t)}}OFt(){return this.pQt.RFt()}PFt(){this.fQt();try{const t=this.xQt.WOt.MBt(qa.HRt);t&&this.zFt(t);const i=this.xQt.WOt.MBt(qa.XRt);i&&this.BFt(i)}catch(t){throw wh(t),this.xQt.WOt.vBt=me.J_(),this.uNt.BUt(this.xQt),t}}zFt(t){this.NFt&&!this.NFt.bP(t.xAt)&&(this.NFt.Dm(),this.NFt=void 0),this.NFt||(this.NFt=new l$(t.xAt,this.uFt))}BFt(t){this.SFt&&!this.SFt.bP(t.xAt)&&(this.SFt.Dm(),this.SFt=void 0),this.SFt||(this.SFt=new l$(t.xAt,this.uFt))}cut(t,i,e){this.fQt(),Gi.pC(m$,"Starting download of segment "+L(t.xAt)+" and part "+(null==i?void 0:i.Tzt)),this.AFt=new pa,this.UFt(t,i,e,this.MFt.wm).catch((t=>{throw wh(t),this.xQt.WOt.vBt=me.J_(),this.uNt.BUt(this.xQt),t})).then(this.CFt,this.CFt)}async UFt(t,i,e,s){let n;if(t.HPt){var r,o;if(!e||!jK(e.yQt.xAt,null==(r=t.HPt)?void 0:r.xAt)||t.KPt!==e.KPt){var h;null==(h=this.TFt)||h.Dm(),this.TFt=new pa;const i=this.QFt(t.HPt,t,s).then((()=>{this.TFt=void 0}));this.TFt.Em(i)}n=null==(o=this.TFt)?void 0:o.rA}await this.FFt(t,i,n,s)}async QFt(t,i,e){const s=await this.YFt(t,i,e),n=s.HPt.xS.xS.byteLength;this.pQt.VFt(s),this.yo(new f$(s.HPt.yQt.xAt,s.Hw,this.Wv,i.CPt,s.eRt.dk,n,s.HPt.Act)),Gi.TRt(Mu,"Download initializer complete",L(t.xAt))}async FFt(t,i,e,s){const n=await this.GFt(t,i,s),r=n.Zut.xS.xS.byteLength;var o;e&&await Ic(e,s),this.pQt.VFt(n),this.yo(new f$(n.Zut.yQt.xAt,n.Hw,this.Wv,t.CPt,n.eRt.dk,r,n.Zut.Act)),Gi.TRt(Mu,"Download complete",L(null!=(o=null==i?void 0:i.xAt)?o:t.xAt))}async GFt(t,i,e){let s;if(i){if(this.SFt)if(this.SFt.bP(i.xAt)){const t=await this.SFt.swt(i.xAt),n=await xs(t,e),r=new T(n);s=b$(i,await this.SQt(r,i.YPt,e),200)}else this.SFt.Dm(),this.SFt=void 0;s||(Gi.TRt(Mu,"Start download",L(i.xAt)),s=await this.WFt(i,e))}else Gi.TRt(Mu,"Start download",L(t.xAt)),s=await this.gut(t,e);return this.mFt=t.CPt,this.pFt=null==i?void 0:i.Tzt,{Hw:"Zut",Zut:s,eRt:this.xQt,KPt:t.KPt}}async YFt(t,i,e){let s;if(this.NFt){var n;if(this.NFt.bP(t.xAt)){const n=await Ic(this.NFt.swt(t.xAt),e),r=await xs(n,e),o=new T(r);s=y$(t,i,await this.SQt(o,t.GPt?[t.GPt]:[],e),200)}Gi.pC(m$,"MAP is required for segment, downloading MAP data."),null==(n=this.NFt)||n.Dm(),this.NFt=void 0}return s||(Gi.TRt(Mu,"Start download",L(t.xAt)),s=await this.ZFt(t,i,e)),{Hw:"HPt",HPt:s,eRt:this.xQt,OP:i.OP,KPt:i.KPt,YPt:i.YPt}}async ZFt(t,i,e){const{response:s,httpStatusCode:n}=await this.uFt.jS(t.xAt,as.YS,jo.WS,void 0,e),r=t.GPt?[t.GPt]:[];return y$(t,i,await this.SQt(s,r,e),n)}async gut(t,i){if(!t.xAt)throw new g("Internal error: attempted to download an incomplete segment");let e,s;try{this.HFt(t);const n=await this.uFt.jS(t.xAt,as.YS,jo.QS,this.XFt,i);e=n.response,s=n.httpStatusCode}finally{this.qFt()}return function(t,i,e){return{xS:{xS:i,Hw:z.XK},Hw:r$.YS,Act:e,yQt:t,KPt:t.KPt}}(t,await this.SQt(e,t.YPt,i),s)}async WFt(t,i){let e,s;try{this.HFt(t);const n=await this.uFt.jS(t.xAt,as.YS,jo.QS,this.XFt,i);e=n.response,s=n.httpStatusCode}finally{this.qFt()}return b$(t,await this.SQt(e,t.YPt,i),s)}async SQt(t,i,e){const s=So(i,(t=>t.hN===N.qRt));return s?s.xAt&&s.APt?await this.KFt.SQt(t,s.xAt,s.APt,e):(Gi.lt(m$,"Encountered an AES-128 encrypted segment for which no initialization vector could be determined."),t):t}HFt(t){var i,e,s;this.JFt=t,this.$Ft=0,this.tYt=me.J_(),this.iYt=0,this.eYt=null!=(s=null==(e=t.xAt)||null==(i=e.abt)?void 0:i.U)?s:0}qFt(){this.JFt=void 0,this.$Ft=0,this.tYt=0,this.iYt=0,this.eYt=0}sYt(){if(void 0!==this.JFt)return{Zut:this.JFt,nYt:this.iYt,rYt:this.eYt,oYt:me.J_()-this.tYt}}hYt(t){return void 0!==this.JFt&&(0!==this.$Ft&&(!(this.eYt>0&&this.iYt>=this.eYt)&&!(t-this.$Ft<500)))}constructor(t,i,e,s,n,r,o,h){super(),this.vFt=void 0,this.AFt=void 0,this.JFt=void 0,this.$Ft=0,this.tYt=0,this.iYt=0,this.eYt=0,this.MFt=new Ai,this.TFt=void 0,this.wFt=0,this.mFt=void 0,this.pFt=void 0,this.NFt=void 0,this.SFt=void 0,this.CFt=t=>{this.vFt&&(this.xQt=this.vFt,this.vFt=void 0,this.wFt=0,this.mFt=void 0,this.pFt=void 0),this.AFt&&(t&&!F(t)?this.AFt.sA(t):this.AFt.eA(),this.AFt=void 0)},this.XFt=(t,i)=>{this.iYt=t,t>0&&0===this.$Ft&&(this.$Ft=me.J_()),void 0!==i&&(this.eYt=i),this.yo(new d$(this.Wv))},this.Wv=t,this.uNt=e,this.pQt=s,this.xQt=i,this._Ft=new n$(e,i),this.KFt=new e$(o,n,h),this.uFt=new s$(n,r,function(t){switch(t){case dt.iN:return Fh.iN;case dt.tN:return Fh.tN;case dt.KB:case dt.ZRt:return Fh.KM;default:return Fh.QS}}(i.Hw),h)}};function y$(t,i,e,s){return{xS:{xS:e,Hw:z.XK},Hw:r$.HRt,Act:s,yQt:t,KPt:i.KPt}}function b$(t,i,e){return{xS:{xS:i,Hw:z.XK},Act:e,Hw:r$.XRt,yQt:t,KPt:t.bzt.KPt}}r();var M$=class{get eQt(){return this.aYt}get uYt(){const t=[];for(const e of this.cYt)if("Zut"===e.Hw){const s=e.Zut.yQt,n=g$(e.eRt,this.cUt,s);var i;t.push({Zut:s,eRt:e.eRt,OP:n,RP:n+(null!=(i=s.ct)?i:0)})}return t}get lYt(){const t=[];return this.dYt.forEach((i=>{for(const e of i.fYt)"Zut"===e.Hw&&t.push({Zut:e.yQt,eRt:e.eRt,OP:e.OP,RP:e.OP+e.ct})})),t}VFt(t){"HPt"===t.Hw&&(this.aYt=t.HPt),this.cYt.push(t),this.gYt&&(this.gYt.eA(),this.gYt=void 0)}yFt(){return this.cYt[0]}bFt(t){Ro(this.cYt,t)}RFt(){return null!=this.gYt||(this.gYt=new pa),this.gYt.rA}_Yt(t){this.vYt(t.jat)._Yt(t)}wYt(t){return this.vYt(t).wYt()}mQt(t){this.vYt(t.jat).mQt(t)}mYt(t){var i;null==(i=this.dYt.get(t))||i.Mm()}pYt(t){return this.vYt(t).pYt()}vYt(t){if(this.dYt.has(t))return this.dYt.get(t);{const i=new T$;return this.dYt.set(t,i),i}}iA(){this.AYt(),this.yYt()}AYt(){this.aYt=void 0,Or(this.cYt)}yYt(){this.dYt.forEach((t=>t.iA()))}Mm(){this.dYt.forEach((t=>t.Mm())),this.dYt.clear(),this.iA(),this.gYt&&(this.gYt.Dm(),this.gYt=void 0)}constructor(t){this.cYt=[],this.dYt=Ge(),this.gYt=void 0,this.aYt=void 0,this.cUt=t}},T$=class{get fYt(){return this.bYt}_Yt(t){this.bYt.push(t),this.MYt&&(this.MYt.eA(),this.MYt=void 0)}wYt(){return this.bYt[0]}mQt(t){Ro(this.bYt,t)}pYt(){return null!=this.MYt||(this.MYt=new pa),this.MYt.rA}iA(){Or(this.bYt)}Mm(){this.iA(),this.MYt&&(this.MYt.Dm(),this.MYt=void 0)}constructor(){this.bYt=[],this.MYt=void 0}};r();var S$=1e-6,N$=class{get KI(){return this.TIt}get r4(){return this.SIt}async f2(t,i){const e=t.xS.xS;if(this.TYt(e),this.SYt.Hw===er.TTML){this.cUt.zBt(t.KPt)||await Ic(this.cUt.UBt(t.KPt),i);const s=this.NYt(e,t.KPt);for(const t of s)this.SYt.fU(t)}}async c2(t,i){if(void 0===t.xS)return;const e=t.OP,s=e+t.ct;this.TIt=this.TIt.WO(ge.uR(e,s)).GO(S$),this.a4(t.IYt,t.DYt),this.u4(e,s),this.cUt.zBt(t.KPt)||await Ic(this.cUt.UBt(t.KPt),i),this.d2(t.xS.xS,t.KPt,t.yQt)}d2(t,i,e){let s;this.TYt(t),s=this.SYt.Hw===er.WEBVTT?this.EYt(t,e):this.NYt(t,i);for(const t of s)this.SYt.fU(t)}EYt(t,i){const e=QD(t),s=e.L;var n;const r=null!=(n=e.BB)?n:{UB:Fu.Cz,lh:Fu.Cz};for(const t of s){const e=Fu.vB(t.OP).Nz(r.lh).yP(r.UB),s=this.cUt.ZBt(e,i)._z(),n=s+(t.RP-t.OP);t.iz(s,n)}return s}NYt(t,i){const e=this.cUt.WBt(i)._z();return SE(t,this.SYt,{jB:0,OB:1/0,RB:e},ba.APPLICATION_MP4)}TYt(t){this.SYt.Hw===er.DEFAULT&&(this.SYt.Hw=this.kYt(t)?er.WEBVTT:er.TTML)}kYt(t){return $D(xw(Ma(Os(t),0,x.min(t.byteLength,16)),new J))}a4(t,i){this.SIt=this.SIt.WO(ge.uR(t,i)).GO(S$)}u4(t,i){this.SIt=this.SIt.HO(ge.uR(t,i))}constructor(t,i){this.TIt=ge.cR(),this.SIt=ge.cR(),this.SYt=t,this.cUt=i}};r(),r(),r();var I$=class extends Gs{constructor(t,i){super(q.LYt),this.eRt=t,this.Qrt=i}};r();var D$=class extends Gs{constructor(t){super(q.xYt),this.eRt=t}};r();var E$=class extends Gs{constructor(t,i){super(q.CYt),this.eRt=t,this.oft=i}};r();var k$=class extends Gs{constructor(t,i){super(q.jYt),this.eRt=t,this.OYt=i}},q=function(t){return t.LYt="RYt",t.CYt="PYt",t.jYt="zYt",t.xYt="BYt",t}({}),L$=class extends Bo{get UYt(){return this.QYt}FYt(t){for(const i of this.QYt)fh(t,i)||this.pQt.mYt(i);this.QYt=t}get zEt(){return void 0!==this.YYt}gQt(){var t,i;return null!=(i=null==(t=this.YYt)?void 0:t.rA)?i:Promise.resolve()}fQt(){if(this.zEt)throw new g("Cannot perform new operation while transmuxer is still busy")}VYt(t,i){}GYt(t){this.fQt(),this.YYt=new pa;const i=i=>{this.WYt(t,i)};this.ZYt(t,this.bM.wm).then(i,i)}HYt(t){this.fQt(),this.YYt=new pa;const i=i=>{this.WYt(t,i)};this.XYt(t,this.bM.wm).then(i,i)}WYt(t,i){this.YYt&&(!i||F(i)||function(t){return t instanceof PJ}(i)?(F(i)||this.pQt.bFt(t),this.YYt.eA(),this.YYt=void 0):this.YYt.sA(i))}qYt(t,i){this.yo(new I$(t,i))}KYt(t,i){this.yo(new E$(t,i))}JYt(t,i,e){OJ(i)&&this.yo(new k$(t,e))}$Yt(t){this.yo(new D$(t))}_Yt(t){fh(this.QYt,t.jat)&&this.pQt._Yt(t)}tVt(t){return this.pQt.wYt(t)}mQt(t){this.pQt.mQt(t)}iVt(t){return this.pQt.pYt(t)}Dm(){this.bM.Dm(),this.bM=new Ai}constructor(t,i,e){super(),this.YYt=void 0,this.bM=new Ai,this.pQt=t,this.cUt=i,this.QYt=e}};function x$(t,i){return OJ(t)?0:x.min(t.OP,i)}function C$(t,i){var e;return x.max(t.OP,i)+(null!=(e=t.ct)?e:0)}var j$=class extends L${ZYt(t,i){re(i);const e={Hw:"ykt",xS:t.HPt.xS,jat:this.UYt[0],KPt:t.KPt,eVt:{Qrt:"",YPt:t.YPt},OP:t.OP,eRt:t.eRt,yQt:t.HPt.yQt};return this._Yt(e),Promise.resolve()}async XYt(t,i){re(i);const e=t.Zut.yQt;let s;void 0!==e.het?(this.cUt.zBt(t.KPt)||await Ic(this.cUt.UBt(t.KPt),i),s=this.cUt.ZBt(e.het,e)._z()):s=e.OP;const n=x$(e,s),r=C$(e,n);var o;const h={Hw:"Zut",xS:t.Zut.xS,jat:this.UYt[0],IYt:n,DYt:r,OP:s,ct:null!=(o=e.ct)?o:0,RB:0,KPt:t.KPt,eRt:t.eRt,yQt:t.Zut.yQt};this._Yt(h)}constructor(t,i,e){super(t,i,[e])}};function O$(t,i){let e=ge.cR();for(const s of t){let n=s.OP;if(s.eRt.WOt.$Pt&&OJ(s.Zut))n=0;else{const e=t=>s.eRt===t.eRt&&RJ(t.Zut,s.Zut),r=So(t,e);if(void 0!==r)n=x.min(n,r.RP);else{const t=So(i,e);void 0!==t&&(n=x.min(n,t.hQt.jn(0)))}}e=e.WO(ge.uR(n,s.RP))}return e}r();var R$=.001,P$=class{get sVt(){return this.nVt}get eRt(){return this.rVt.eRt}gFt(t){this.rVt.gFt(t)}get zEt(){return this.rVt.zEt||this.oVt.zEt||this.nVt.some((t=>t.zEt))}hVt(t){const i=t.slice();for(let t=this.nVt.length-1;t>=0;t--){const e=this.nVt[t];if(!e.aQt)throw new g("Invalid state");const s=en(i,(t=>t.Hw===e.Hw));s>=0?(e.fot(i[s]),zr(i,s)):zr(this.nVt,t)}for(const t of i){const i=new t$(t);this.nVt.push(new i$(t.Hw,t,this.aVt,i,this))}i.length>0&&this.aVt.iA();const e=t.map((t=>t.Hw));this.oVt.FYt(e)}kq(t){var i;const e=(null==(i=this.dV)?void 0:i.kq(t))||!1;return e&&(this.Dm(),this.aVt.iA()),e}uVt(t){for(const t of this.nVt)if(t.Hw!==Q.KM||t.zEt)throw new g("Invalid state");const i=new t$(t),e=new i$(Q.KM,t,this.aVt,i,this);this.nVt=[e]}get eQt(){const t=this.aVt.eQt;if(t)return t;if(this.nVt.length>0){const t=this.nVt[0].uQt.eQt;if(t&&this.nVt.every((i=>i.uQt.eQt===t)))return t}}aut(){for(const t of this.nVt)t.uQt.rQt()}get cVt(){if(0===this.nVt.length)return ge.cR();const t=O$(this.aVt.uYt.concat(this.aVt.lYt),Qr(this.nVt,(t=>t.uQt.Mrt))).UO();let i=new ge([0,1/0]);for(const t of this.nVt)i=i.Sn(t.uQt.KI);for(const t of this.nVt)i=i.HO(t.cQt);return i=i.WO(t),i.GO(R$)}get lVt(){if(0===this.nVt.length)return ge.cR();const t=O$(this.aVt.lYt,Qr(this.nVt,(t=>t.uQt.Mrt))).UO();let i=new ge([0,1/0]);for(const t of this.nVt)i=i.Sn(t.uQt.KI);return i=i.WO(t),i}Jlt(t){const i=this.cVt.oR(t,R$);return i?i.jn(i.U-1):t}IFt(t){return!!this.cVt.oR(t,R$)||this.rVt.IFt(t)}dVt(t){return this.lVt.gr(t,R$)}fVt(t,i,e){for(const t of this.nVt){const e=t.uQt,s=e.Zwt;if(void 0!==s&&i>=s&&!e.KI.UO().gr(s))return!0}return i-t<e}Dm(){this.gVt(),this._Vt()}gVt(){this.rVt.Dm()}_Vt(){this.oVt.Dm(),this.sVt.forEach((t=>t.Dm()))}Mm(){this.Dm(),this.rVt.Mm()}constructor(t,i,e,s){this.rVt=t,this.aVt=i,this.oVt=e,this.dV=s,this.nVt=[]}};r();var z$=class extends Gs{constructor(){super(E.FOt)}};r();var B$=class extends Gs{constructor(){super(E.UOt)}};r(),r();var U$="LazyMediaBuffer",Q$=class extends Bo{get vS(){return this.uM}get s4(){return this.Wv}get md(){if(!this.Aot)throw new Ui(Do.MEDIA_LOAD_ERROR,"Cannot get the configuration of an uninitialized MediaBuffer.");return this.Aot.md}get _q(){return this.Tq}set _q(t){this.Tq=t,this.Aot&&(this.Aot._q=t)}yJ(){return this.Aot?this.Aot.yJ():this.vVt}get KI(){return this.Aot?this.Aot.KI:ge.cR()}get r4(){return this.Aot?this.Aot.r4:this.o4.LJ}get pq(){return this.Iq}set pq(t){this.Iq=t,this.Aot&&(this.Aot.pq=t)}a4(t,i){Gi.TRt(U$,"Marking gap from "+t+" to "+i+"."),this.o4.CJ(t,i),this.Aot&&this.Aot.a4(t,i)}u4(t,i){Gi.TRt(U$,"Removing gap from "+t+" to "+i+"."),this.o4.jJ(t,i),this.Aot&&this.Aot.u4(t,i)}wVt(t){this.Aot=t,this.Aot.pq=this.Iq,this.Aot._q=this.Tq;const i=this.o4.LJ;for(let t=0;t<i.U;t++)this.Aot.a4(i.Cn(t),i.jn(t));var e;this.vVt&&(Gi.TRt(U$,"End of stream"),null==(e=this.Aot)||e.i4());this.Aot.yn(W.ZK,this.Ds),this.mVt.eA(t)}pVt(t){return Ic(this.mVt.rA,t)}async c2(t,i,e){const s=await this.pVt(e);await s.c2(t,i,e)}async c4(){const t=await this.pVt();await t.c4()}async f2(t,i,e){const s=await this.pVt(e);await s.f2(t,i,e)}async Rb(t,i,e){const s=await this.pVt(e);await s.Rb(t,i,e)}async L2(t,i){const e=await this.pVt();await e.L2(t,i)}i4(){this.vVt=!0,this.Aot&&this.Aot.i4()}rJ(t){return!!this.Aot&&this.Aot.rJ(t)}async hJ(t){const i=await this.pVt();await i.hJ(t)}async gn(){var t;this.Bo(),null==(t=this.Aot)||t.fn(W.ZK,this.Ds)}constructor(t,i){super(),this.Wv=t,this.AVt=i,this.uM=void 0,this.Aot=void 0,this.mVt=new pa,this.Tq=20,this.vVt=!1,this.Iq=30,this.o4=new yO}},F$="LazyMediaSource",Y$=class{get md(){return{Hw:vl.mU,n3:[],KF:[]}}get Z4(){return this.yVt}get H4(){return this.bVt}get KI(){return this.WF?this.WF.KI:ge.cR()}get ct(){return this.WF?this.WF.ct:this.$A}get yJ(){return!!this.WF&&this.WF.yJ}get PD(){return this.WF?this.WF.PD:new ge([0,1/0])}J4(t){this.$A=t,this.WF&&this.WF.J4(t)}i4(){this.net=!0,this.WF&&this.WF.i4()}G2(){this.net=!1,this.WF&&this.WF.G2()}s3(t,i,e,s){this.MVt=t,this.TVt=i,this.SVt=Boolean(e),this.NVt=Boolean(s),this.WF&&this.WF.s3(t,i,e,s)}rJ(t){return!this.WF||this.WF.rJ(t)}async hJ(t){if(!this.rJ(t))throw new g("LazyMediaSource - Unable to reconfigure MediaSource.");if(this.WF)await this.WF.hJ(t);else{var i,e;this.jR.o7();const s=await this.jR.$n(t);j(this.$A)||s.J4(this.$A),this.net&&s.i4(),s.s3(this.MVt,this.TVt,this.SVt,this.NVt),Gi.TRt(F$,"The MediaSource has been loaded."),this.IVt=!0,this.WF=s,null==(i=this.yVt)||i.wVt(this.WF.Z4),null==(e=this.bVt)||e.wVt(this.WF.H4),this.DVt.eA(s),this.jR.h7()}}uJ(t){this.WF.uJ(t)}async Mm(){this.WF&&await this.WF.Mm()}constructor(t,i,e){this.jR=t,this.yVt=void 0,this.bVt=void 0,this.DVt=new pa,this.WF=void 0,this.IVt=!1,this.$A=NaN,this.net=!1,this.MVt=0,this.TVt=1/0,this.SVt=!1,this.NVt=!1,i&&(Gi.TRt(F$,"Created lazy media buffer for audio."),this.yVt=new Q$(Q.tN,this)),e&&(Gi.TRt(F$,"Created lazy media buffer for video."),this.bVt=new Q$(Q.iN,this))}};function V$(t,i){return void 0===i&&(i=!1),function(e,s){void 0===s&&(s="*");let n=W$(e,"tag");const r=W$(null==s?"*":s,"range"),o=[];let h,a,u,c=-1;for(;++c<r.length;)if(h=r[c].toLowerCase(),i||"*"!==h){for(a=-1,u=[];++a<n.length;)if(t(n[a].toLowerCase(),h)){if(!i)return n[a];o.push(n[a])}else u.push(n[a]);n=u}return i?o:void 0}}r();V$(((t,i)=>"*"===i||t===i||Re(t,i+"-")),!0),V$(((t,i)=>{const e=t.split("-"),s=i.split("-");let n=0,r=0;if("*"!==s[r]&&e[n]!==s[r])return!1;for(n++,r++;r<s.length;)if("*"!==s[r]){if(!e[n])return!1;if(e[n]!==s[r]){if(1===e[n].length)return!1;n++}else n++,r++}else r++;return!0}),!0);var G$=V$(((t,i)=>{let e,s=i;for(;;){if("*"===s||t===s)return!0;if(e=s.lastIndexOf("-"),e<0)return!1;"-"===s.charAt(e-2)&&(e-=2),s=s.slice(0,e)}}));function W$(t,i){const e=t&&"string"==typeof t?[t]:t;if(!e||"object"!=typeof e||!("length"in e))throw new g("Invalid "+i+" `"+e+"`, expected non-empty string");return e}r(),r();var Z$=16384,H$=71,X$=188,q$=2,K$=3,J$=function(t){return t[t.QS=0]="QS",t[t.xk=1]="xk",t[t.EVt=2]="EVt",t[t.kVt=3]="kVt",t}({});function $$(t){return t0(t)?1:function(t){return function(t){if(t.length<q$*X$)return-1;const i=t.length<K$*X$?q$:K$,e=x.min(1e3,t.length-i*X$);for(let s=0;s<=e;s++){let e=!0;for(let n=0;n<i;n++)if(t[s+n*X$]!==H$){e=!1;break}if(e)return s}return-1}(t)>=0}(t)?2:function(t){return null!==VP(Os(t),new J)}(t)?3:0}function t0(t){const i=Bt(t,0,x.min(t.length,Z$));return tn.Ux(Os(i))}var i0=class{get Hw(){return this.Wv}get KI(){return this.Aot.KI}get r4(){return this.Aot.r4}LVt(t){return this.Aot===t}async f2(t,i){if(this.Aot.md.vS!==t.eVt.Qrt){const e={vS:t.eVt.Qrt};this.Aot.rJ(e)&&(await this.Aot.hJ(e),re(i))}await this.Aot.f2(t.xS,{j1:t.eRt.dk},i),void 0!==this.Fxt&&this.Wv===Q.iN&&t0(t.xS.xS)&&this.Fxt.xot(t.xS.xS)}async c2(t,i){re(i),Gi.pC("HlsMediaBuffer","Got media data, appending to "+this.Wv+" MediaBuffer: "+L(t.yQt.xAt));const e=t.IYt,s=t.DYt,n={het:t.OP,ct:t.ct,RB:t.RB,j1:t.eRt.dk};void 0!==t.xS&&(await this.Aot.c2(t.xS,n,i),this.xVt(t.xS,t)),this.CVt(e,s)}xVt(t,i){var e;if(!t0(t.xS))return;const s=i.OP,n=s+i.ct,r=i.RB;if(null==(e=this.Kwt)||e.Ylt(t.xS,s,r),void 0!==this.Fxt&&this.Wv===Q.iN){const e=i.yQt.Azt;this.Fxt.Ylt(t.xS,s,n,r,i.eRt,e)}const o=[];void 0!==this.Kwt&&o.push(this.Kwt),void 0!==this.Fxt&&o.push(this.Fxt),tk(this.KI,o)}CVt(t,i){const e=this.Aot.KI,s=new ge([t,i]).HO(e);for(let t=0;t<s.U;t++)this.Aot.a4(s.Cn(t),s.jn(t));for(let t=0;t<e.U;t++)this.Aot.u4(e.Cn(t),e.jn(t))}a4(t,i){this.Aot.a4(t,i)}u4(t,i){this.Aot.u4(t,i)}constructor(t,i,e,s){this.Wv=t,this.Aot=i,this.Kwt=e,this.Fxt=s}};function e0(t){if(t.Hw!==dt.ZRt||void 0===t.KOt)return;const i=t.KOt.match(/^CC([1-4])$/);if(i)return Number(i[1]);const e=t.KOt.match(/^SERVICE([\d+])$/);return e?Number(e[1]):void 0}r(),r(),r();var s0=class{QRt(t){var i,e,s;return null==(s=null==(e=this.WF)||null==(i=e.H4)?void 0:i.rJ(t))||s}FRt(t){var i,e,s;return null==(s=null==(e=this.WF)||null==(i=e.Z4)?void 0:i.rJ(t))||s}constructor(t){this.WF=t}},Gh="LLHLSPlayer",n0=[fa.EO,fa.kO,fa.LO,fa.CE],r0=[Qi.mp,Qi.Hm,Qi.np,Qi.ep],o0=2e3,h0=class extends Bo{get GR(){var t;const i=[this.jVt,this.OVt].filter(Rt);if(0===i.length||this.ct!==1/0)return;const e=null==(t=this.$I)?void 0:t.getTime();if(e){return(Date.now()-e)/1e3}let s;for(const t of i){const i=t.WOt.PD;if(0===i.U)continue;const e=i.jn(i.U-1)+t.WOt.RMt,n=t.WOt.fBt,r=e+(null!=n?n:0)-this.sD;(!s||s<r)&&(s=r)}return s}RVt(){if(void 0===this.PVt)return!1;const t=me.J_();if(!this.PVt.rVt.hYt(t))return!1;const i=this.PVt.rVt.sYt();if(void 0===i||void 0===i.Zut.ct)return!1;const e=this.sD,s=this.ND,n=this.PVt.cVt.oR(e);if((void 0!==n?n.jn(0)-e:0)>=2*i.Zut.ct*s)return!1;if(i.nYt>0&&0===i.rYt)return i.oYt>1e3*i.Zut.ct*.8;return 8*i.rYt/this.dV.rq.mF>=1.8*i.Zut.ct}async zVt(){var t;const i=await this.GRt();if(void 0===i)return;const e=null==(t=this.PVt)?void 0:t.rVt.sYt();if(void 0===e)return;const s=this.BVt;if(e.rYt>0){if(x.max(0,e.rYt-e.nYt)<=e.rYt*(i.mF/s.mF))return}const n=i.mF<s.mF;await this.aRt(i,{uRt:n})}UVt(t){return rs(t,(t=>t.mF))}async QVt(){let t=await this.FVt();if(0===t.length)return;const i=await this.YVt(t);i.length>0&&(t=i);const e=this.UVt(t);void 0!==e&&(await this.aRt(e,{uRt:!0}),this.qF._Et(e.mF))}get VVt(){const t=[this.OVt,this.jVt].filter(Rt);for(const i of t){if(!i.WOt.$Pt)return!1;const t=i.WOt.Mrt,e=t[t.length-1];if(e&&e.KPt!==this.GVt)return!1}return!0}get sRt(){return this.BVt}get wRt(){return this.OVt}get pRt(){return this.jVt}get WVt(){return this.ZVt}get ht(){return this.oP}get KI(){return this.jR.KI.ws()}get oRt(){const t=[];if(this.BVt){const i=this.jR.sD;for(const e of this.HVt)for(const s of e.sVt){const e=s.wQt(i);e&&!fh(t,e)&&t.push(e)}}return t}get $I(){if(this.BVt){const t=this.jR.sD;return this.BVt.dzt(t)}}set $I(t){if(!t||!this.BVt)return;const i=this.BVt.fzt(t);void 0!==i&&this.rD(i,{XVt:!1,qVt:!0})}get bt(){return this.KVt}get sD(){var t;return null!=(t=this.JVt)?t:this.jR.sD}set sD(t){this.rD(t)}rD(t,i){var e,s,n,r;Gi.pC(Gh,"Seeking to "+t+" s.");const o={XVt:null!=(s=null==i?void 0:i.XVt)?s:t===1/0,qVt:null==(n=null==i?void 0:i.qVt)||n,QPt:null!=(r=null==i?void 0:i.QPt)&&r};this.JVt=t,this.$Vt=o,this.tGt=!0,this.nNt=!0,null==(e=this.zF)||e.nE(),this.yo(new ll(t)),this.Z9.Dm(),this.iGt&&(me.rv(this.eGt),o.qVt?this.eGt=me.ov((()=>this.sGt(t,o)),50):this.sGt(t,o))}sGt(t,i){me.rv(this.eGt);const e=[this.lmt,this.nGt,this.H9].filter(Rt);this.Z9=new Ai,this.Z9.Em(this.gU.wm),this.H9=Te(this.X9(e,t,i,this.Z9.wm),this.Z9).catch(this.rGt)}get ct(){var t,i,e,s,n,r,o;if(!this.VVt)return null!=(o=null!=(r=null!=(n=null==(t=this.OVt)?void 0:t.WOt.ct)?n:null==(i=this.jVt)?void 0:i.WOt.ct)?r:null==(s=this.uNt)||null==(e=s.kUt)?void 0:e.WOt.ct)?o:[this.OVt,this.jVt].filter(Rt).every((t=>function(t){if(void 0===t)return!1;return t.WOt.Mrt.length>0&&!t.WOt.$Pt}(t)))?1/0:NaN;const h=this.jR.ct;if(j(h)){var a,u;const t=null==(u=this.uNt)||null==(a=u.kUt)?void 0:a.WOt.ct;if(void 0!==t)return t}return h}get hD(){if(!this.VVt)return!1;if(this.BD&&this.iGt){var t,i;const e=this.sD,s=null==(t=this.OVt)?void 0:t.WOt.ct,n=null==(i=this.jVt)?void 0:i.WOt.ct;return!(void 0!==s&&e<s)&&!(void 0!==n&&e<n)}return this.jR.hD}get lt(){return this.FF}get cD(){return this.YF}get dD(){}get gD(){return!1}get vD(){return il({},{cP:0,lP:0,dP:0,fP:0,gP:0,_P:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}},this.jR.wD(),{gP:this.kSt,fP:this.dV.rq.mF})}get Tr(){var t;return null==(t=this.uNt)?void 0:t.Tr}get mD(){return this.jR.mD}set mD(t){this.jR.mD=t}get bD(){return this.EMt}set bD(t){this.EMt!==t&&(this.EMt=t,this.yo(t?new AZ:new yZ))}get TD(){return this.jR.TD}get ND(){return this.jR.ND}set ND(t){Gi.pC(Gh,"Setting playback rate to "+t+"."),this.jR.ND=t}get kD(){return this.OSt.ws()}get OSt(){return this.jR.kD}get xD(){return this.GF}set xD(t){this.GF!==t&&(this.GF=t,this.oGt())}get OD(){let t=this.jR.OD;return this.zSt&&(t=x.max($i.Xn,t)),t}get PD(){return this.DSt.ws()}get DSt(){let t=this.e3;const i=[this.OVt,this.jVt].filter(Rt);if(t.U>0&&i.some((t=>!t.WOt.$Pt))){const e=this.OSt,s=t.jn(t.U-1);if(e.U>0&&e.jn(e.U-1)>s){let n=e.jn(e.U-1);const r=c0(i);r.U>0&&(n=x.min(n,r.jn(r.U-1))),t=t.WO(new ge([s,n]))}}return t}DBt(){let t=function(t){if(0===t.length)return ge.cR();let i=new ge([0,1/0]),e=0;for(const s of t){const t=s.WOt.PD;t.U>0&&(i=i.Sn(t),e=x.max(e,t.Cn(0)))}if(i.U>0)return i;return ge.aR(e)}([this.OVt,this.jVt].filter(Rt));0!==t.U&&(this.WF&&this.VVt&&this.WF.ct!==1/0&&(t=new ge([t.Cn(0),this.WF.ct])),this.e3=t,this.hGt&&this.Kwt.sU(t.Cn(0)),this.aGt&&this.Fxt.sU(t.Cn(0)))}get BD(){var t;return null!=(t=this.tGt)?t:this.jR.BD}get ZF(){}get nt(){return this.Ol}get rt(){return this.aP}get FD(){var t,i;return this.jR.FD||(null==(i=this.BVt)||null==(t=i.Wkt)?void 0:t.Ti)||0}get GD(){var t,i;return this.jR.GD||(null==(i=this.BVt)||null==(t=i.Wkt)?void 0:t.ji)||0}get ZD(){return this.jR.ZD}set ZD(t){Gi.pC(Gh,"Setting volume to "+t+"."),this.jR.ZD=t}get qD(){return this.fV}get JD(){return!1}set JD(t){}get XF(){return this.qF}rE(){return!1}$D(){return this.jR.ka}_a(){return this.jR.aY}dE(t){return this.jR.uY(t)}be(){Gi.pC(Gh,"Hiding the player."),this.jR.be()}eE(){var t;Gi.pC(Gh,"Pausing the player."),this.jR.eE(),(null==(t=this.zF)?void 0:t.lR)&&this.zF.nE()}async sE(){this.j9=!0;const t=this.jR.sE();if(this.hD){const t=this.DSt;t.U>0&&this.rD(t.Cn(0),{qVt:!1})}this.iGt||await this.oGt(),this.nSt(),await t,this.rNt()}nSt(){var t;if(!this.ISt())if(null==(t=this.sRt)?void 0:t.WOt.$Pt){var i;let t=!0,e=0;const s=null==(i=this.BVt)?void 0:i.WOt.Cn;if(!this.nNt&&s&&(t=!s.QPt,e=s.UPt,e<0)){const t=this.sRt.WOt.Jzt;e+=t.jn(t.U-1)}this.sGt(e,{XVt:t})}else this.sGt(1/0,{XVt:!0});this.uGt()&&this.sGt(1/0,{XVt:!0})}ISt(){var t;const i=this.DSt;if(0===i.U)return!0;const e=null==(t=this.cGt)?void 0:t.XO(this.sD);return(e&&e>0?this.cGt.jn(e):this.sD)>=i.Cn(0)}get cGt(){var t,i;const e=null==(t=this.lGt)?void 0:t.cVt,s=null==(i=this.PVt)?void 0:i.cVt;return e?s?s.Sn(e):e:s}uGt(){return v0(this.sD,this.OVt)||v0(this.sD,this.jVt)}QNt(){this.FF=void 0,this.YF=void 0}LY(t){this.FF||(xe(this.tr()),this.FF=be(t),this.YF=t,this.yo(new As(t)))}ge(){Gi.pC(Gh,"Showing the player."),this.jR.ge()}oE(){throw new g("Not implemented")}hE(){throw new g("Not implemented")}aE(){}uE(){this.iGt&&xe(this.dGt(this.OVt,this.jVt,this.ZVt,{uE:!0}))}async wa(t,i,e){const s={stack:[],error:void 0,hasError:!1};try{var n;if(Gi.pC(Gh,"Setting the player source to "+t.src+"."),this.QNt(),this.KVt&&!Ls(this.KVt)&&(await this.tr(),re(e)),!t.src||Ls(t))return;const o=lo(s,Ai.xm([e]),!1);var r;this.gU=Ai.xm([o.wm]),this.eY.bF(t.contentProtection),this.KVt=t,this.fGt=t.seamlessSwitchStrategy,this.aGt=!fh(t.ignoreEmbeddedTextTrackTypes,er.CEA608),this.hGt=!fh(t.ignoreEmbeddedTextTrackTypes,er.EMSG),this.yn(E.VOt,this.handleBufferingErrorEvent);const h=null!=(r=null==(n=t.latencyConfiguration)?void 0:n.targetOffset)?r:t.liveOffset;if(this.uNt=new ZJ(this.dU,this.Xut,t.useCredentials,me.Dw(t.src),h),this.uNt.yn(WJ.bUt,this.iQt),this.uNt.yn(WJ.MUt,this.gGt),this.uNt.yn(Qi.lp,this.Ds),this.uNt.yn(Qi.dp,this.Ds),t.hlsDateRange&&(this._Gt=new JJ(this.uNt,this.jR),this.Ol.EF(this._Gt.nt)),null!=this.vGt||(this.vGt=this.wGt.uet()),i.textTracks&&this.sY(i.textTracks),t.latencyConfiguration){const i=t.latencyConfiguration;this.zF=new HZ(this,this.jR,i),this.zF.Rt=!0,this.qD.Sa(this.zF)}Zh(this.Ol),this.oGt(),o.Mm()}catch(t){s.error=t,s.hasError=!0}finally{os(s)}}oGt(){return this.lmt=this.mGt(this.lmt,this.gU.wm).catch(this.Xmt),this.lmt}async mGt(t,i){if(t&&(await t,re(i)),!this.uNt)return;const e=this.GF;e===Ac.HR||this.j9?await this.ON(i):e===Ac.tU&&await this.pGt(i)}async pGt(t){if(void 0===this.uNt||this.zSt)return;if(!this.uNt.NUt){try{await this.uNt.xUt(t)}catch(t){throw wh(t),this.bD=!1,new Ui(Do.MANIFEST_LOAD_ERROR,"The provided HLS document could not be loaded - "+t.message,t)}this.AGt.vht()}const i=await this.yGt();this.bGt(i);const e=this.MGt(i.DRt),s=this.TGt(i.ERt),n=this.SGt(i.czt);if(!n){const t=l0(i.lzt);t&&(Gi.pC(Gh,"Detected initial closed caption rendition."),this.NGt(i,t))}await this.dGt(e,s,n,{IGt:!0}),this.zSt=!0,this.uIt.vIt(),this.DGt()}DGt(){const t=[this.OVt,this.jVt].filter(Rt);if(t.some((t=>t.WOt.$Pt)))return;if(this.zF)return;const i=x.max(...t.map((t=>{var i;return null!=(i=t.WOt.RMt)?i:0}))),e={minimumOffset:.66*i,maximumOffset:2*i,targetOffset:1*i,forceSeekOffset:3*i,minimumPlaybackRate:D,maximumPlaybackRate:Ut};this.zF=new HZ(this,this.jR,e),this.fV.Sa(this.zF)}async yGt(){if(this.EGt=this.uNt.Tr.IRt,!this.EGt.length)throw new Ui(Do.MANIFEST_LOAD_ERROR,"LLHLSPlayer - Could not select initial variant stream: the HLS stream contains no variant streams.");let t=await this.kGt(this.EGt);if(0===t.length)throw new Ui(Do.MANIFEST_LOAD_ERROR,"LLHLSPlayer - Could not select initial variant stream: the HLS stream contains no variant stream with a supported codec.");const i=await this.YVt(t);return i.length>0&&(t=i),Gi.pC(Gh,"Selecting initial active variant stream."),function(t,i,e,s){void 0===s&&(s=II.maximumBackoff);const n=function(t,i){if(void 0===i)return t;const e=i.preferredVideoCodecs,s=i.preferredAudioCodecs;if(void 0!==e){let i;for(const n of e){const e=t.filter((t=>t.Qrt&&t.Qrt.nLt&&_s(t.Qrt.nLt,n)));if(0===e.length)continue;if(void 0===s)return e;void 0===i&&(i=e);const r=d0(e,s);if(void 0!==r)return r}if(void 0!==i)return i}if(void 0!==s){const i=d0(t,s);if(void 0!==i)return i}return t}(t,i),r=g0(n,s);switch(e.wq.type){case yi.BANDWIDTH:{const t=e.bq,i=r.filter((i=>i.mF<=t));if(i.length>0)return kv(i,(t=>t.mF))}case yi.PERFORMANCE:return rs(r,(t=>t.mF));case yi.QUALITY:return kv(r,(t=>t.mF))}}(t,this.KVt.abr,this.dV,this.hdt.maximumBackoff)}MGt(t){if(this.LGt){const t=this.xGt(this.LGt);if(t)return t}return f0(t)}TGt(t){if(this.CGt){const t=this.xGt(this.CGt);if(t)return t}return f0(t)}SGt(t){for(const t of this.Ol.FE)t.gN===P.Jn&&(this.jGt=this.OGt(t));if(this.jGt){const t=this.xGt(this.jGt);if(t)return t}return l0(t)}OGt(t){return So(this.BVt.czt,(i=>t===this.RGt.get(i.dk)))}async ON(t){this.iGt||(await this.pGt(t),re(t),this.iGt=!0,await this.dGt(this.OVt,this.jVt,this.ZVt,{IGt:!0}))}sY(t){for(const i of t)i.src&&this.hY.uU(i)}NGt(t,i){if(!this.aGt)return;const e=function(t){const i=[];for(const e of t){const t=e0(e);void 0!==t&&i.push({Btt:t,Utt:e.gs||"",wh:e.l})}return i}(t.lzt);for(const t of e)this.Fxt.mwt(t);if(void 0!==i){const t=e0(i);this.Fxt.vwt(t).gN=P.Jn}}get HVt(){return[this.lGt,this.PVt,this.PGt].filter(Rt)}hRt(t){for(const i of t)if(!this.zGt(i))throw new g("LLHLSPlayer - Could not set an allowed variant stream that does not exists in the internal HLS model.");this.EGt=t}zGt(t){const i=this.Tr;return!!i&&fh(i.IRt,t)}xGt(t){if(t&&this.BVt)return So(this.BVt.jRt,(i=>i===t))}bGt(t){var i;if(Gi.pC(Gh,"Setting active variant stream."),this.BVt===t)return;const e=(null==(i=this.BVt)?void 0:i.wPt)!==(null==t?void 0:t.wPt);if(this.BVt&&e)for(const t of this.BVt.czt)this._U(t);if(this.BVt=t,this.yo(new z$),this.KSt(),t&&e)for(const i of t.czt)this.BGt(i)}BGt(t){const i=this.jR.dE(vs.KB,void 0,t.l,t.gs,t.ZOt,void 0,void 0,t.$Ot.map(fK).filter(Rt));i.yn(Ct.aa,this.onTextTrackChange),this.RGt.set(t.dk,i),this.UGt.tt(i)}_U(t){const i=this.RGt.get(t.dk);i&&(i.fn(Ct.aa,this.onTextTrackChange),this.UGt.it(i),this.RGt.delete(t.dk),this.jR._U(i))}async FVt(){var t;const i=null!=(t=this.EGt)?t:this.Tr.IRt;if(0===i.length&&!this.EGt)return Gi.pC(Gh,"The HLS stream does not contain any variant streams, skipping ABR selection."),[];if(1===i.length&&!this.EGt)return Gi.pC(Gh,"The HLS stream contains only a single variant stream, skipping ABR selection."),[];const e=await this.kGt(i);if(0===e.length)return Gi.SRt(Gh,"LLHLSPlayer - No variant streams with supported codecs available to perform ABR selection on."),[];const s=g0(e,this.hdt.maximumBackoff);return 0===s.length?(this.QGt||(Gi.SRt(Gh,"LLHLSPlayer - No variant streams with online renditions available to perform ABR selection on."),this.FGt++,await this.YGt(e)),[]):s}async VGt(){const t=await this.GRt();if(void 0===t)return;const i=!!this.BVt&&t.mF<this.BVt.mF;await this.aRt(t,{uRt:i})}async GRt(){var t,i;const e=await this.FVt();if(0===e.length)return;const s=HX(this.jR),n=await this.YVt(e),r={ji:this.jR.ji,Ti:this.jR.Ti,URt:s,Olt:null==(i=this.KVt)||null==(t=i.abr)?void 0:t.restrictToPlayerSize},o=await this.GGt.GRt(e,this.BVt,n,r,new s0(this.WF));return!!this.BVt&&o.mF<this.BVt.mF||this.WGt(o,s)?o:void 0}WGt(t,i){var e;if(t===this.sRt)return!1;const s=this.sRt&&_0(this.sRt,this.hdt.maximumBackoff),n=_0(t,this.hdt.maximumBackoff);if(!s&&n)return!0;(!this.HLt||this.HLt.nRt.mF>t.mF)&&(this.HLt={nRt:t,Pft:me.J_()});const r=me.J_()-this.HLt.Pft;var o;const h=null!=(o=null==(e=this.pRt)?void 0:e.WOt.BRt)?o:1/0;return i>=x.max(h-1,5)||r>1e3}async YGt(t){this.QGt=!0;let i=!1;for(const e of t)try{const t=this.jVt?So(e.ERt,(t=>ne(t,this.jVt))):void 0;if(void 0===t)continue;await this.UUt(t),t.WOt.vBt=-1/0,i=!0}catch(t){}if(i)this.FGt=0,await this.ZGt();else{if(this.FGt>=this.hdt.maxRetries)return void this.LY(new Ui(Do.MEDIA_LOAD_ERROR,"The provided video renditions could not be loaded."));const t=x.min(this.hdt.minimumBackoff*2**(this.FGt-1),this.hdt.maximumBackoff);await Bn(t)}this.QGt=!1,await this.VGt()}async kGt(t){let i=await jv(t,(async t=>{var i,e,s;const n=[(null==(i=t.Qrt)?void 0:i.eLt)?'audio/mp4; codecs="'+t.Qrt.eLt+'"':void 0,(null==(e=t.Qrt)?void 0:e.nLt)?'video/mp4; codecs="'+t.Qrt.nLt+'"':void 0].filter(Rt);return 0===n.length||await this.HGt.IJ(n,null==(s=this.KVt)?void 0:s.useManagedMediaSource)}));return i.some((t=>{var i;return null==(i=t.Qrt)?void 0:i.nLt}))&&(i=i.filter((t=>!t.Qrt||t.Qrt.nLt||0!==t.ERt.length))),i.some((t=>{var i;return null==(i=t.Qrt)?void 0:i.eLt}))&&(i=i.filter((t=>!t.Qrt||t.Qrt.eLt||0!==t.DRt.length))),i}YVt(t){return this.uNt.DUt?jv(t,(t=>async function(t,i){for(const e of t)if(!await i(e))return!1;return!0}([f0(t.DRt),f0(t.ERt),l0(t.czt),l0(t.lzt)].filter(Rt),(t=>this.XGt(t))))):Promise.resolve([])}async XGt(t){if(0===t.WOt.Mrt.length)return!1;const i=t.WOt.Mrt[0];if(!i.xAt)return!1;const e=i.xAt,s=e.abt?EK(e.abt.Cn,e.abt.U):void 0;try{return await this.Xut.nrt(e.lI,s)}catch(t){return!1}}async aRt(t,i){if(!this.iGt)throw new g("LLHLSPlayer - The LLHLSPlayer is not loaded.");if(!t)throw new g("LLHLSPlayer - Cannot explicitly set the active variant stream to undefined.");if(!this.zGt(t))throw new g("LLHLSPlayer - Trying to set an active variant stream that does not exists on the internal model.");if(t===this.BVt)return void Gi.pC(Gh,"Trying to set the already active variant stream, ignoring.");const e=this.OVt?So(t.DRt,(t=>ne(t,this.OVt))):void 0,s=this.jVt?So(t.ERt,(t=>ne(t,this.jVt))):void 0,n=this.ZVt?So(t.czt,(t=>ne(t,this.ZVt))):void 0;this.bGt(t),this.HLt=void 0,await this.dGt(e,s,n,i)}async mRt(t){if(!this.BVt)return void(this.LGt=t);const i=this.xGt(t);if(t&&!i)throw new g("LLHLSPlayer - Trying to set an invalid rendition as the active audio rendition.");this.wRt!==i&&(Gi.pC(Gh,"Switching audio rendition"),await this.dGt(i,this.jVt,this.ZVt,{lRt:!0}))}async ARt(t){if(!this.BVt)return void(this.CGt=t);const i=this.xGt(t);if(t&&!i)throw new g("LLHLSPlayer - Trying to set an invalid rendition as the active video rendition.");this.pRt!==i&&(Gi.pC(Gh,"Switching video rendition"),await this.dGt(this.OVt,i,this.ZVt,{cRt:!0}))}async qGt(t){if(!t)throw new g("LLHLSPlayer - Cannot explicitly set the active subtitle rendition to undefined.");if(!this.zSt)return void(this.jGt=t);const i=this.xGt(t);if(!i)throw new g("LLHLSPlayer - Trying to set an invalid rendition as the active subtitle rendition.");Gi.pC(Gh,"Switching subtitle rendition"),await this.dGt(this.OVt,this.jVt,i)}async KGt(t,i){if(this.QGt)return;const e=0===this.rt.U;t.Hw===dt.iN||t.Hw===dt.tN&&e?this.EGt&&this.EGt.length<=1?(t.Hw===dt.iN&&this.jVt!==t?await this.dGt(this.OVt,t,this.ZVt):t.Hw===dt.tN&&e&&this.OVt!==t&&await this.dGt(t,this.jVt,this.ZVt),await this.JGt(t,i)):await this.VGt():await this.JGt(t,i)}async UUt(t,i){try{await this.uNt.UUt(t,i)}catch(e){throw wh(e),(hn(e)||RT(e))&&await this.KGt(t,i),e}}async JGt(t,i){if(!fh(this.$Gt,t)){this.$Gt.push(t);try{const e=t.Hw===dt.KB||t.Hw===dt.ZRt?1/0:this.hdt.maxRetries;await _t((()=>this.retryOfflineRenditionsCallback(t,i)),i,e,this.hdt.minimumBackoff,this.hdt.maximumBackoff)}catch(t){this.LY(new Ui(Do.MEDIA_LOAD_ERROR,t.message,t))}finally{Ro(this.$Gt,t),t.WOt.vBt===-1/0&&await this.ZGt()}}}dGt(t,i,e,s){void 0===s&&(s={});const n={uRt:s.uRt||!1,lRt:s.lRt||!1,cRt:s.cRt||!1,uE:s.uE||!1,IGt:s.IGt||!1};return n.IGt||n.uE||this.OVt!==t||this.jVt!==i||this.ZVt!==e?void 0===t&&void 0===i?Promise.reject(new g("Trying to buffer no media renditions.")):(this.OVt=t,this.jVt=i,this.ZVt=e,this.DBt(),this.yo(new B$),this.Z9.Dm(),this.Z9=new Ai,this.Z9.Em(this.gU.wm),this.tWt.Dm(),this.tWt=new Ai,this.tWt.Em(this.gU.wm),this.nGt=Te(this.iWt([this.nGt,this.H9].filter(Rt),t,i,e,n,this.tWt.wm),this.tWt).catch(this.rGt),this.nGt):Promise.resolve()}async eWt(t,i,e,s){var n,r;const o=[];if(o.push(this.sWt(i,s)),sK(t,i)||o.push(this.sWt(t,s)),null==(r=this.KVt)||null==(n=r.hls)?void 0:n.delaySubtitlePreload)return Promise.all(o).then((()=>this.sWt(e,s)));const h=this.sWt(e,s);return Promise.all([...o,h])}async sWt(t,i){if(t)try{await this.uNt.UUt(t,i)}catch(e){wh(e),(hn(e)||RT(e))&&await this.nWt(t,i)}}async nWt(t,i){if(this.QGt)return;const e=0===this.rt.U;if(t.Hw===dt.iN||t.Hw===dt.tN&&e)if(this.EGt&&this.EGt.length<=1)await this.JGt(t,i);else{const t=await this.yGt();this.bGt(t);const i=this.MGt(t.DRt),e=this.TGt(t.ERt),s=this.SGt(t.czt);await this.dGt(i,e,s)}else await this.JGt(t,i)}async iWt(t,i,e,s,n,r){var o;if(!this.iGt)return void await this.eWt(i,e,s,r);await Promise.all(t.map((t=>t.catch(ul)))),this.rWt(),await this.oWt(r),await this.hWt();const h=[];n.lRt&&this.WF&&this.WF.Z4&&h.push(this.WF.Z4.Rb(0,1/0)),n.cRt&&this.WF&&this.WF.H4&&h.push(this.WF.H4.Rb(0,1/0)),await Promise.all(h),re(r);const a=await this.aWt(i,e,n.uE,r);this.uWt(i,e,n.uRt||a),this.cWt(s,n.uRt),re(r);const u=[e,sK(i,e)?void 0:i,s].filter(Rt);try{await Promise.all(u.filter((t=>!t.WOt.uBt)).map((t=>{var i;return null==(i=this.uNt)?void 0:i.QUt(t,r)})))}catch(t){wh(t)}if(re(r),this.i3(),this.DBt(),void 0!==this.JVt)this.sGt(this.JVt,this.$Vt);else if(!this.nNt&&(null==(o=this.BVt)?void 0:o.WOt.Cn)){const t=this.BVt.WOt,i=t.Cn;let e=i.UPt;if(i.UPt<0){const i=t.Jzt;e+=i.jn(i.U-1)}this.sGt(e,{XVt:!i.QPt})}else!this.nNt&&u.every((t=>!t.WOt.$Pt))?this.sGt(1/0,{XVt:!0}):this.HVt.length>0&&this.lWt()}async aWt(t,i,e,s){var n,r;const o=void 0!==t&&t!==i,h=void 0!==i,a=await this.dWt(t,i,this.BVt);if(re(s),!e&&this.WF&&!a)return!1;const u=void 0!==(null==(n=this.WF)?void 0:n.Z4),c=void 0!==(null==(r=this.WF)?void 0:r.H4);if(!e&&!(o!==u||h!==c)&&a&&this.WF&&this.WF.rJ(a))return await this.oWt(s),await this.WF.hJ(a),!0;for(const t of this.HVt)t.sVt.forEach((t=>t.Dm()));this.jR.o7();try{this.WF&&await this.jR.tr(),this.WF=await this.fWt(a,o,h)}finally{this.jR.h7()}return!0}async dWt(t,i,e){var s,n;const r=e.Qrt,o=[];if(void 0!==t){var h,a;const i=null!=(a=null==(h=t.Qrt)?void 0:h.eLt)?a:null==r?void 0:r.eLt;if(!i)return;{const t='audio/mp4; codecs="'+i+'"';Gi.pC(Gh,"Configuring MediaSource for initial audio rendition with codec: "+t+"."),o.push(t)}}if(void 0!==i){var u,c;const t=null!=(c=null==(u=i.Qrt)?void 0:u.nLt)?c:null==r?void 0:r.nLt;if(!t)return;{const i='video/mp4; codecs="'+t+'"';Gi.pC(Gh,"Configuring MediaSource for initial video rendition with codec: "+i+"."),o.push(i)}}if(0===o.length)return void Gi.SRt(Gh,"No codecs found on the active variant stream.");var l;const d=null!=(l=null==i||null==(s=i.WOt.Mrt[0])?void 0:s.YPt)?l:[];var f;const g=null!=(f=null==t||null==(n=t.WOt.Mrt[0])?void 0:n.YPt)?f:[],_=this.uNt.Tr,v=await PK(this.KVt.contentProtection,o,_.hUt.concat(g).concat(d),this.dU,this.KVt.useCredentials);return{Hw:vl.mU,n3:o.map((t=>({vS:t}))),KF:v,v3:this.KVt.useManagedMediaSource}}async fWt(t,i,e){let s;return s=t?await this.jR.$n(t):new Y$(this.jR,i,e),this.WF=s,this.i3(),this.WTt(),this.ZTt(),s}i3(){const t=this.WF;if(t&&j(t.ct)){var i,e,s;const n=null!=(s=null==(i=this.OVt)?void 0:i.WOt.ct)?s:null==(e=this.jVt)?void 0:e.WOt.ct;void 0!==n&&n>0&&t.J4(n)}this.DBt()}WTt(){const t=this.WF;t&&(t.H4&&(t.H4._q=this.dV.Sq),t.Z4&&(t.Z4._q=this.dV.Sq))}ZTt(){const t=this.WF;t&&(t.H4&&(t.H4.pq=this.dV.pq),t.Z4&&(t.Z4.pq=this.dV.pq))}uWt(t,i,e){if(!this.WF)throw new g("Invalid state");this.WF.Z4?this.X4&&this.X4.LVt(this.WF.Z4)||(this.X4=new i0(Q.tN,this.WF.Z4,this.hGt?this.Kwt:void 0,this.aGt?this.Fxt:void 0)):this.X4=void 0,this.WF.H4?this.q4&&this.q4.LVt(this.WF.H4)||(this.q4=new i0(Q.iN,this.WF.H4,this.hGt?this.Kwt:void 0,this.aGt?this.Fxt:void 0)):this.q4=void 0;const s=sK(t,i);if(this.q4&&i){const t=s&&this.X4?[this.q4,this.X4]:[this.q4];this.PVt?this.PVt.eRt!==i&&(e&&(this.PVt.Dm(),this.PVt.aVt.iA()),this.PVt.gFt(i)):(this.PVt=function(t,i,e,s,n,r,o,h,a,u){const c=s.Tr.IO,l=new M$(c),d=new A$(Q.iN,t,s,l,n,r,o,u),f=i.map((t=>t.Hw)),g=h.pTt(l,s.Tr.IO,f),_=new P$(d,l,g,a);return _.hVt(i),_}(i,t,this.jR,this.uNt,this.dU,this.Xut,this.IQt,this.vGt,this.dV,this.KVt.useCredentials),this.PVt.rVt.yn(p$.cFt,this.gWt),this.PVt.rVt.yn(p$.lFt,this._Wt),this.PVt.oVt.yn(q.LYt,this.vWt),this.PVt.oVt.yn(q.CYt,this.wWt),this.PVt.oVt.yn(q.jYt,this.mWt),this.PVt.oVt.yn(q.xYt,this.pWt)),this.PVt.hVt(t)}else{var n;null==(n=this.PVt)||n.Mm(),this.PVt=void 0}var r;this.X4&&t&&!s?(this.lGt?this.lGt.eRt!==t&&(e&&(this.lGt.Dm(),this.lGt.aVt.iA()),this.lGt.gFt(t)):(this.lGt=function(t,i,e,s,n,r,o,h,a,u){const c=s.Tr.IO,l=new M$(c),d=new A$(Q.tN,t,s,l,n,r,o,u),f=h.pTt(l,s.Tr.IO,[i.Hw]),g=new P$(d,l,f,a);return g.hVt([i]),g}(t,this.X4,this.jR,this.uNt,this.dU,this.Xut,this.IQt,this.vGt,this.dV,this.KVt.useCredentials),this.lGt.rVt.yn(p$.lFt,this._Wt),this.lGt.oVt.yn(q.LYt,this.vWt),this.lGt.oVt.yn(q.xYt,this.pWt)),this.lGt.hVt([this.X4])):(null==(r=this.lGt)||r.Mm(),this.lGt=void 0);this.AWt()}cWt(t,i){if(this.PGt){this.PGt.rVt.eRt===t?i&&(this.PGt.Dm(),this.PGt.aVt.iA()):(this.PGt.Mm(),this.PGt=void 0)}if(!this.PGt&&t){const i=this.RGt.get(t.dk);i.gN=P.Jn,this.PGt=function(t,i,e,s,n,r,o){const h=e.Tr.IO,a=new N$(i,h),u=new M$(h),c=new A$(Q.KM,t,e,u,s,n,r,o),l=new j$(u,h,Q.KM),d=new P$(c,u,l);return d.uVt(a),d}(t,i,this.uNt,this.dU,this.Xut,this.IQt,this.KVt.useCredentials)}}AWt(){const t=[this.X4,this.q4].filter(Rt).map((t=>t.Hw));this.uNt.Tr.IO.rUt(t)}async X9(t,i,e,s){let n;if(await Promise.all(t.map((t=>t.catch(ul)))),re(s),await this.hWt(),re(s),this.JVt=void 0,this.tGt=void 0,this.nNt=!0,e.QPt){n=c0([this.OVt,this.jVt].filter(Rt))}else n=this.DSt;const r=n.QO(i),o=this.jR.Fm(Qi.yp,s);this.jR.Gp(r,e.XVt),this.iGt&&this.HVt.length>0&&(this.uNt.Tr.IO.oUt(),this.yWt(this.jR.sD),this.lWt()),await o,this.rNt()}rNt(){const t=this.GR;if(this.TD||this.BD||void 0===t)return;const i=this.sD;var e,s;t+this.sD-this.qD.md.maximumOffset<i?null==(e=this.zF)||e.Cn():null==(s=this.zF)||s.nE()}yWt(t){for(const i of this.HVt)i.IFt(t)||(i.gVt(),i.aVt.AYt()),i.dVt(t)||(i._Vt(),i.aVt.yYt())}rWt(){for(const t of this.HVt)t.Dm()}hWt(){return Promise.all([this.kxt(),this.bWt(),this.MWt()])}lWt(){this.Ext(),this.TWt(),this.SWt()}async ZGt(){this.iGt&&this.HVt.length>0&&(this.HVt.forEach((t=>t.gVt())),await this.kxt(),this.Ext(),this.HVt.forEach((t=>t.rVt.jFt())))}Ext(){if(this.NWt)return;const t=()=>{this.NWt=void 0};this.IWt=new Ai,this.IWt.Em(this.gU.wm),this.NWt=Te(this.Wxt(this.IWt.wm),this.IWt).catch(this.rGt).then(t,t)}async kxt(){var t;null==(t=this.IWt)||t.Dm();const i=this.NWt;this.NWt=void 0,i&&await i}async Wxt(t){re(t);const i=this.HVt;for(;;){const e={stack:[],error:void 0,hasError:!1};try{const s=[],n=this.jR.sD;for(const t of i){const i=t.rVt,e=t.Jlt(n);if(i.zEt)s.push(i.gQt());else if(t.fVt(n,e,this.dV.Sq)){const n=i.DFt(e);if(void 0===n){if(i.eRt.WOt.$Pt)continue;const t=i.eRt.WOt.Mrt;t.length&&t[0].OP>e&&(this.sD=1/0),i.PFt(),i.LFt(e)}else{const[e,s]=n;i.cut(e,s,t.eQt),t.oVt.VYt(e,s)}s.push(i.gQt())}}const r=lo(e,Ai.xm([t]),!1);if(0===s.length){i.every((t=>t.rVt.ukt))||s.push(this.jR.Fm(Qi.Dp,r.wm));for(const t of i)s.push(t.oVt.Fm(q.xYt,r.wm))}await Ic(Promise.race(s),r.wm)}catch(t){e.error=t,e.hasError=!0}finally{os(e)}}}TWt(){if(this.DWt)return;const t=()=>{this.DWt=void 0};this.EWt=new Ai,this.EWt.Em(this.gU.wm),this.DWt=Te(this.kWt(this.EWt.wm),this.EWt).catch(this.rGt).then(t,t)}async bWt(){var t;null==(t=this.EWt)||t.Dm();const i=this.DWt;this.DWt=void 0,i&&await i}async kWt(t){re(t);const i=this.HVt;for(;;){const e=[];for(const t of i){const i=t.rVt,s=t.oVt;if(s.zEt)e.push(s.gQt());else{const t=i.yFt();t?"Zut"===t.Hw?(s.HYt(t),e.push(s.gQt())):"HPt"===t.Hw&&(s.GYt(t),e.push(s.gQt())):e.push(i.OFt())}}if(0===e.length)break;await Ic(Promise.race(e),t)}}SWt(){if(this.LWt)return;this.xWt=new Ai,this.xWt.Em(this.gU.wm);const t=()=>{this.LWt=void 0};this.LWt=Te(this.CWt(this.xWt.wm),this.xWt).catch(this.rGt).then(t,t)}async MWt(){var t;null==(t=this.xWt)||t.Dm();const i=this.LWt;this.LWt=void 0,i&&await i}async CWt(t){for(;;){const i=this.HVt;i.forEach((t=>t.aut()));const e=this.jR.sD,s=[],n=[];for(const t of i){const i=t.oVt;for(const r of t.sVt){const t=r.aQt?s:n;if(r.zEt)t.push(r.gQt());else if(!r._Qt(e)){const e=i.tVt(r.Hw);e?"Zut"===e.Hw&&e.KPt===this.GVt?(r.edt(e),t.push(r.gQt())):"ykt"===e.Hw&&e.KPt===this.GVt&&(r.f2(e),t.push(r.gQt())):n.push(i.iVt(r.Hw))}}}if(0===s.length){if(await this.jWt(i,e,t))continue}if(0===s.length&&0===n.length){i.every((t=>t.sVt.length>0&&t.sVt.every((t=>t._Qt(e)))))&&this.WF.i4();break}await Ic(Promise.race([...s,...n]),t)}}async jWt(t,i,e){const s=[],n=[];for(const e of t){const t=e.Jlt(i);for(const r of e.sVt){if(!r.aQt)continue;const o=e.oVt.tVt(r.Hw);if(void 0!==o){if(o.KPt===this.GVt)return!1;s.push(o)}else{if(e.zEt||e.fVt(i,t,this.dV.Sq)||!r.vQt(i,t))return!1;{const t=r.uQt.eQt;void 0!==t&&n.push(t)}}}}if(0===s.length)return!1;const r=kv(s,(t=>t.KPt)).KPt;if(s.every((t=>"ykt"===t.Hw&&t.KPt===r))){const t=rs(s,(t=>t.OP)).OP,i=[...s,...n],r=await this.OWt(i);this.RWt(r)?(Gi.TRt(gK,"Seamless switch from",this.WF.md,"to",r),await this.WF.hJ(r),Gi.TRt(gK,"Seamless switch complete.")):await this.PWt(t,r,e),this.GVt=s[0].KPt}else for(const i of t)for(const t of i.sVt){let e=i.oVt.tVt(t.Hw);for(;void 0!==e&&("ykt"!==e.Hw||e.KPt!==r);)Gi.TRt(gK,"Removing append for other discontinuity, expecting "+r,e),i.oVt.mQt(e),e=i.oVt.tVt(t.Hw)}return!0}RWt(t){return this.fGt===vc.XR||this.fGt!==vc.qR&&this.WF.rJ(t)}async OWt(t){const i=t.map((t=>t.eVt.Qrt)),e=i.map((t=>({vS:t}))),s=Qr(t,(t=>t.eVt.YPt));s.push(...this.uNt.Tr.hUt);let n=await PK(this.KVt.contentProtection,i,s,this.dU,this.KVt.useCredentials);return 0===n.length&&this.WF&&this.WF.md.KF.length>0&&(n=this.WF.md.KF),{Hw:vl.mU,n3:e,KF:n,v3:this.KVt.useManagedMediaSource}}async PWt(t,i,e){var s;const n=this.WF,r=n.ct,o=this.KI.length>0&&this.sD<t;if(o)try{for(Gi.TRt(gK,"Marking end of stream and waiting for ended to switch discontinuity."),n.i4();!this.jR.hD&&this.jR.sD<t;)await this.jR.Fm([Qi.Dp,Qi.tp],e)}catch(t){throw n.G2(),n.J4(r),t}Gi.TRt(gK,"Perform hard switch from",null==(s=this.WF)?void 0:s.md,"to",i);try{this.jR.o7(),this.sD<t&&this.jR.Gp(t,!0,!0),this.q4=void 0,this.X4=void 0,this.AWt(),await this.jR.tr(),this.WF=await this.jR.$n(i),this.i3(),this.WTt(),this.ZTt(),this.WF.H4&&(this.q4=new i0(Q.iN,this.WF.H4,this.hGt?this.Kwt:void 0,this.aGt?this.Fxt:void 0),this.q4.a4(t-1,t)),this.WF.Z4&&(this.X4=new i0(Q.tN,this.WF.Z4,this.hGt?this.Kwt:void 0,this.aGt?this.Fxt:void 0),this.X4.a4(t-1,t)),this.AWt()}finally{o&&xe(this.jR.sE()),this.jR.h7()}if(this.PVt){const t=void 0!==this.X4&&void 0===this.lGt?[this.q4,this.X4]:[this.q4];this.PVt.hVt(t)}this.lGt&&this.lGt.hVt([this.X4]),Gi.TRt(gK,"Hard switch complete.")}oWt(t){return Ic(ds(Qr(this.HVt,(t=>t.sVt.map((t=>t.gQt()))))),t)}KSt(){const t=this.GD,i=this.FD;this.rIt===t&&this.oIt===i||(this.rIt=t,this.oIt=i,this.yo(new lr))}async gn(){Gi.pC(Gh,"Unloading the player."),this.zWt(),this.QNt(),await this.tr(),this.jR.gY=void 0,this.UGt.gn(),await this.hY.gn(),await this.Kwt.gn(),await this.Fxt.gn(),this.oP.gn(),this.aP.gn(),this.Ol.gn(),this.BWt.gn(),this.uIt.Mm(),this.IQt.Mm(),this.vGt&&(this.vGt.Mm(),this.vGt=void 0)}async tr(){Gi.pC(Gh,"Resetting the player."),this.fn(E.VOt,this.handleBufferingErrorEvent),this.GVt=-1,this.gU.Dm(),this.Z9.Dm(),this.Z9=new Ai,this.Z9.Em(this.gU.wm),this.tWt.Dm(),this.tWt=new Ai,this.tWt.Em(this.gU.wm);const t=[this.lmt,this.H9,this.nGt].filter(Rt);await Promise.all(t.map((t=>t.catch(ul)))),this.lmt=void 0,this.H9=void 0,this.nGt=void 0,this.OVt=void 0,this.jVt=void 0,this.ZVt=void 0,this.EGt=void 0,this.LGt=void 0,this.CGt=void 0,this.jGt=void 0,this.LGt=void 0,this.CGt=void 0,this.jGt=void 0,this.zF=void 0,this.fV.tr(),this.$Gt=[],this.bGt(void 0),this.rWt(),await this.hWt(),this.lGt&&(this.lGt.Mm(),this.lGt=void 0),this.PVt&&(this.PVt.Mm(),this.PVt=void 0),this.PGt&&(this.PGt.Mm(),this.PGt=void 0),this.X4=void 0,this.q4=void 0,this.WF=void 0,this.uNt&&(this.uNt.Mm(),this.uNt=void 0),this._Gt&&(this.Ol.xF(this._Gt.nt),this._Gt=void 0),await this.hY.tr(),await this.Kwt.tr(),await this.Fxt.tr(),this.jR.cY(),await this.jR.tr(),this.KVt=void 0,this.iGt=!1,this.e3=ge.cR(),this.JVt=void 0,this.nIt=void 0,this.rIt=0,this.oIt=0,this.tGt=void 0,this.nNt=!1,this.j9=!1,me.rv(this.eGt),this.zSt=!1,this.UWt=!1,this.kSt=0,this.fGt=vc.HR,this.BWt.tr(),this.QWt(),this.yo(new Zi(this.sD,this.OD))}QWt(){for(const t of this.oP.FE)t.gn();for(const t of this.aP.FE)t.gn();for(const t of this.Ol.FE)t.gn();this.oP.tr(),this.aP.tr(),this.Ol.tr(),this.RGt.clear()}FWt(){this.BWt.yn(n0,this.Ds),this.BWt.yn(fa.CO,this.UR),this.BWt.yn(fa.xO,this.YWt),this.BWt.yn(fa.DO,this.VWt),this.dV.yn("gq",this.dIt),this.dV.yn("mq",this.fIt),this.jR.yn(r0,this.Ds),this.jR.yn(ac.ua,this.gIt),this.jR.yn(Qi.Zm,this.handleContentProtectionErrorEvent),this.jR.yn(Qi.Km,this.GWt),this.jR.yn(Qi.tp,this.Sh),this.jR.yn(Qi.vp,this.Wjt),this.jR.yn(Qi.so,this.WWt),this.jR.yn(Qi.wp,this.ZWt),this.jR.yn(fa.CE,this.OU),this.jR.yn(Qi.Dp,this.d6),this.jR.yn(Qi.bp,this.We),this.jR.yn(Qi.yp,this.mY),this.jR.yn(Qi.Ap,this.HWt),this.jR.yn(Qi.Ep,this.XWt)}zWt(){this.BWt.fn(n0,this.Ds),this.BWt.fn(fa.CO,this.UR),this.BWt.fn(fa.xO,this.YWt),this.BWt.fn(fa.DO,this.VWt),this.dV.fn("gq",this.dIt),this.dV.fn("mq",this.fIt),this.jR.fn(r0,this.Ds),this.jR.fn(ac.ua,this.gIt),this.jR.fn(Qi.Zm,this.handleContentProtectionErrorEvent),this.jR.fn(Qi.Km,this.GWt),this.jR.fn(Qi.tp,this.Sh),this.jR.fn(Qi.vp,this.Wjt),this.jR.fn(Qi.so,this.WWt),this.jR.fn(Qi.wp,this.ZWt),this.jR.fn(fa.CE,this.OU),this.jR.fn(Qi.Dp,this.d6),this.jR.fn(Qi.bp,this.We),this.jR.fn(Qi.yp,this.mY),this.jR.fn(Qi.Ap,this.HWt),this.jR.fn(Qi.Ep,this.XWt)}constructor(t,i,e,s,n,r,o,h){super(),this.dV=e,this.fV=s,this.IQt=n,this.wGt=r,this.RGt=rn(),this.aGt=!0,this.hGt=!0,this.iGt=!1,this.KVt=void 0,this.WF=void 0,this.lmt=void 0,this.gU=new Ai,this.uNt=void 0,this.LGt=void 0,this.CGt=void 0,this.jGt=void 0,this.BVt=void 0,this.OVt=void 0,this.jVt=void 0,this.ZVt=void 0,this.EGt=void 0,this.$Gt=[],this.X4=void 0,this.q4=void 0,this.lGt=void 0,this.PVt=void 0,this.PGt=void 0,this.vGt=void 0,this.tWt=new Ai,this.nGt=void 0,this.Z9=new Ai,this.H9=void 0,this.GVt=-1,this.IWt=void 0,this.EWt=void 0,this.xWt=void 0,this.NWt=void 0,this.DWt=void 0,this.LWt=void 0,this.EMt=!0,this.FGt=0,this.QGt=!1,this.GF=Ac.HY,this.FF=void 0,this.YF=void 0,this.e3=ge.cR(),this.qWt=[],this.JVt=void 0,this.$Vt=void 0,this.nNt=!1,this.j9=!1,this.nIt=void 0,this.rIt=0,this.oIt=0,this.tGt=void 0,this.eGt=0,this.zSt=!1,this.UWt=!1,this.fGt=vc.HR,this.HLt=void 0,this.KWt=void 0,this.kSt=0,this.handleContentProtectionErrorEvent=t=>{this.FF=be(t.errorObject),this.YF=t.errorObject,this.Ds(t)},this.handleBufferingErrorEvent=t=>{this.LY(new Ui(Do.MEDIA_LOAD_ERROR,t.lt.message,t.lt))},this.gIt=t=>{this.LY(FI(t.lt))},this.GWt=()=>{this.DBt();const t=this.ct;t!==this.nIt&&(this.nIt=t,this.yo(new In(this.nIt)))},this.Sh=()=>{this.hD&&this.yo(new ce(this.sD))},this.Wjt=()=>{this.yo(new Ia(this.sD))},this.WWt=()=>{this.nSt(),this.yo(new us(this.sD))},this.UR=()=>{void 0!==this.KWt&&(me.rv(this.KWt),this.KWt=void 0),this.yo(new fo(this.sD))},this.ZWt=()=>{this.yo(new mO(this.sD))},this.OU=()=>{this.yo(new hr(this.sD,this.OD))},this.d6=()=>{const t=this.oRt;Ev(this.qWt,t)||(this.yo(new $J),this.qWt=t),this.yo(new H(this.sD,this.$I))},this.gWt=Gu((t=>{t.lN===Q.iN&&this.RVt()&&xe(this.zVt())}),200),this._Wt=t=>{var i;this.kSt+=t.fFt;const e=this.rt.U>0?t.lN===Q.iN:t.lN===Q.tN;"Zut"===t.dFt&&e&&xe(this.VGt()),this.yo(new pF(function(t){if(t){if(void 0!==t.abt){var i,e;const s=t.abt.Cn+(null!=(e=t.abt.U)?e:0);return{Hu:t.lI,wut:[null==(i=t.abt)?void 0:i.Cn,s],dN:!0}}return{Hu:t.lI.toString()||"",dN:!0}}return{Hu:"",dN:!0}}(t.uri),(null==(i=this.sRt)?void 0:i.mF)||0,t.mediaSequenceNumeber,t.mediaTrackId,t.lN,t.httpStatusCode,t.fFt))},this.We=()=>{this.yo(new ll(this.sD))},this.mY=()=>{this.yo(new ns(this.sD))},this.HWt=()=>{this.KSt()},this.XWt=()=>{this.yo(new B(this.sD,this.ZD))},this.YWt=()=>{this.jR.BD?this.yo(new Oa(this.sD)):(null!=this.KWt||(this.KWt=me.ov((()=>{this.UWt&&(this.HLt=void 0,xe(this.QVt()))}),2500)),this.nSt(),this.yo(new Oa(this.sD)))},this.VWt=()=>{this.UWt=!0,this.yo(new or(this.sD,this.OD))},this.rGt=t=>{F(t)||hn(t)||RT(t)||(this.rWt(),xe(this.hWt()),this.yo(new wK(t)))},this.iQt=()=>{this.DBt()},this.gGt=t=>{xe(this.KGt(t.eRt,this.gU.wm))},this.Xmt=t=>{if(F(t))return;const i=t instanceof Ui?t:new Ui(Do.MEDIA_DECODE_ERROR,t.message,t);this.LY(i)},this.onTextTrackChange=t=>{if(!this.BVt)return;const i=t.Lt,e=this.OGt(i);e&&(i.gN===P.vk||i.gN===P.Jn?(xe(this.qGt(e)),this.RGt.forEach((t=>{t!==i&&(t.gN=P.Ch)}))):this.ZVt&&this.ZVt===e&&xe(this.dGt(this.OVt,this.jVt,void 0)))},this.retryOfflineRenditionsCallback=async(t,i)=>{this.WVt!==t&&this.wRt!==t&&this.pRt!==t||(await this.uNt.UUt(t,i),t.WOt.vBt=-1/0)},this.dIt=()=>{this.WTt()},this.fIt=()=>{this.ZTt()},this.vWt=t=>{const i=this.BVt,e=null==i?void 0:i.azt;if(this.uNt.JUt(t.Qrt,t.eRt.WOt),!e&&(this.uNt.$Ut(t.Qrt,t.eRt.WOt),this.AGt.xRt(),i)){const t=void 0!==this.OVt&&!fh(i.DRt,this.OVt),e=void 0!==this.jVt&&!fh(i.ERt,this.jVt);(t||e)&&this.dGt(t?void 0:this.OVt,e?void 0:this.jVt,this.ZVt).catch(ul)}},this.wWt=t=>{this.AGt.ORt(t.eRt,t.oft)},this.mWt=t=>{this.AGt.PRt(t.eRt,t.OYt._z())},this.pWt=t=>{this.uNt.qUt(t.eRt)},this.Xut=new ZZ(o),this.jR=t,this.dU=i,this.qF=new vK(this.dV.rq),this.HGt=new mK(this.jR),this.GGt=new DK(this.dV),this.hdt=h.retryConfiguration,this.oP=new $e,this.aP=new $e,this.AGt=new _K(this,this.dV,this.oP,this.aP),this.UGt=new bn,this.hY=new ch(this.jR,this.dU),this.Kwt=new GZ(this.jR),this.Fxt=new Ki(this.jR),this.Ol=new uu([this.UGt,this.hY.Z,this.Kwt.Z,this.Fxt.Z,this.jR.nt]),this.eY=new Xh(this.dU),this.jR.gY=this.eY,this.uIt=new u0(this,this.jR),this.BWt=new li(this.uIt,!0),this.FWt()}},a0=class{async CY(t,i){return!!dh(t.type)&&!t.useNativePlayback}async jY(t){return!!t.aes128||await ON(t,!0)}},u0=class extends ak{get OD(){return this.ta.OD}vIt(){this.yo(new hr(this.sD,this.OD))}constructor(t,i){super(i),this.ta=t}};function c0(t){return t.reduce(((t,i)=>t.Sn(i.WOt.Jzt)),new ge([0,1/0]))}function l0(t){const i=So(t,(t=>t.ZOt)),e=t.filter((t=>t.HOt)),s=me.Rw,n=e.map((t=>t.gs)).filter(Rt),r=G$(n,s);return r?So(e,(t=>t.gs===r)):i}function d0(t,i){for(const e of i){const i=t.filter((t=>t.Qrt&&t.Qrt.eLt&&_s(t.Qrt.eLt,e)));if(0!==i.length)return i}}function f0(t){var i;return null!=(i=l0(t))?i:t[0]}function g0(t,i){return t.filter((t=>_0(t,i)))}function _0(t,i){const e=i+o0,s=0===t.ERt.length||t.ERt.some((t=>t.WOt.vBt<me.J_()-e)),n=0===t.DRt.length||t.DRt.some((t=>t.WOt.vBt<me.J_()-e));return s&&n}function v0(t,i){if(!i||i.WOt.$Pt)return!1;const e=i.WOt.Mrt;return 0!==e.length&&e[0].OP>t}r(),r();var w0=class{async SQt(t,i,e){try{const s=await crypto.subtle.importKey("raw",i,{name:"AES-CBC"},!1,["decrypt"]),n=await crypto.subtle.decrypt({name:"AES-CBC",iv:e},s,t);return new T(n)}catch(t){throw new Ui(Do.CONTENT_PROTECTION_INTERNAL_ERROR,"Error during AES128 decrypt.")}}Mm(){}static iM(){return"undefined"!=typeof crypto&&void 0!==crypto.subtle&&void 0!==crypto.subtle.decrypt}};r(),r(),r(),r();var m0=class extends Gs{constructor(t,i){super(t),this.data=i}},p0=["message","messageerror","error"];r();var A0=class extends Gs{constructor(t){super(ac.ua),this.error=t}},y0=class extends Bo{get JWt(){return this.$Wt.wm.gm}tZt(t,i){this.JWt||(void 0!==this.iZt?this.iZt.tZt(t,i):this.eZt.push({Rp:t,sZt:i}))}nZt(){this.JWt||(this.$Wt.Dm(),Or(this.eZt),void 0!==this.iZt&&this.iZt.nZt())}constructor(t){super(),this.iZt=void 0,this.eZt=[],this.rZt=t=>{if(this.JWt)t.nZt();else{this.iZt=t,this.iZt.yn(p0,this.Ds);for(const i of this.eZt)t.tZt(i.Rp,i.sZt);Or(this.eZt)}},this.oZt=t=>{if(this.JWt)return;const i=t instanceof g?t:new g("Could not create Worker.");this.yo(new A0(i)),this.nZt()},this.$Wt=new Ai,t(this.$Wt.wm).then(this.rZt,this.oZt)}};r(),r();var b0=class extends Bo{tZt(t,i){i?this.iZt.postMessage(t,i):this.iZt.postMessage(t)}nZt(){this.Bo(),this.iZt.removeEventListener("message",this.hZt),this.iZt.removeEventListener("messageerror",this.aZt),this.iZt.removeEventListener("error",this.q8),this.iZt.terminate()}constructor(t,i){super(),this.hZt=t=>{this.yo(new m0("message",t.data))},this.aZt=t=>{this.yo(new m0("messageerror",t.data))},this.q8=t=>{null==t.preventDefault||t.preventDefault.call(t);const i=t.error instanceof g?t.error:new g(t.message);this.yo(new A0(i)),this.nZt()},this.iZt=new Bl(t,i),this.iZt.addEventListener("message",this.hZt),this.iZt.addEventListener("messageerror",this.aZt),this.iZt.addEventListener("error",this.q8)}};r();var M0=0,T0=class extends Bo{tZt(t,i){i?this.uZt.contentWindow.postMessage({type:"message",data:t},"*",i):this.uZt.contentWindow.postMessage({type:"message",data:t},"*")}nZt(){var t;this.uZt.removeEventListener("load",this.cZt),self.removeEventListener("message",this.lZt),null==(t=this.uZt.contentWindow)||t.postMessage({type:"terminate"},"*"),Xa(this.uZt)}constructor(t,i){super(),this.cZt=()=>{this.uZt.removeEventListener("load",this.cZt),this.uZt.contentWindow.postMessage({type:"initialize",id:this.Nb,script:this.dZt},"*")},this.lZt=t=>{t.origin===this.fZt&&t.data.id===this.Nb&&("initialized"===t.data.type||("error"===t.data.type?(this.yo(new A0(new g(t.data.data.message))),this.nZt()):this.yo(new m0("message",t.data.data))))},this.Nb=M0++,this.dZt=t;const e=me.Ah("iframe.html",i);this.uZt=function(t){const i=h.createElement("iframe");return i.width="0",i.height="0",i.style.display="none",i.role="",i.src=t,h.body.appendChild(i),i}(e.href),this.fZt=e.origin,this.uZt.addEventListener("load",this.cZt),self.addEventListener("message",this.lZt)}};function S0(t,i,e){const s=me.Dw(t,i);return new y0((t=>async function(t,i,e,s){let n;try{return n=new b0(t,e),await I0(n,s),n}catch(t){null==n||n.nZt(),wh(t)}if(N0&&WA){let i;try{const e=await me.GI.jS({Hu:t,hN:Ml.GET,CS:Me.KM,wm:s});i=await e.dS(s)}catch(t){wh(t)}if(i){let t;try{const r=WA([i],{type:"application/javascript"});return t=URL.createObjectURL(r),n=new b0(t,e),await I0(n,s),n}catch(t){null==n||n.nZt(),wh(t),N0=!1}finally{t&&URL.revokeObjectURL(t)}}}try{return n=new T0(t,i),await I0(n,s),n}catch(t){throw null==n||n.nZt(),t}}(s,i,e,t)))}var N0=!0;async function I0(t,i){const e=await t.Fm(["message","error"],i);if("error"===e.type)throw function(t){return new Ui(Do.CONFIGURATION_ERROR,"THEOplayer workers could not be loaded. Please check the configuration of the libraryLocation.",t)}(e.error);if(!function(t){return Ec(t)&&"8.11.0"===t.gZt}(e.data))throw new Ui(Do.CONFIGURATION_ERROR,"THEOplayer workers could not be loaded. Please check that the worker's version matches THEOplayer's version (8.11.0).");return e}r();var D0=function(t){return t._Zt="SQt",t.vZt="KQt",t}({}),E0=function(t){return t.wZt="mZt",t.pZt="AZt",t}({}),k0=class{yZt(){const t=S0(this.bZt,this.MZt,{name:"THEOplayer decrypt worker"});return t.yn("message",this.TZt),t.yn("error",this.SZt),t}SQt(t,i,e){const s=""+ ++this.NZt,n={IZt:D0._Zt,DZt:s,EZt:t,kZt:i,LZt:e},r=new pa;return this.xZt.set(s,r),null!=this.iZt||(this.iZt=this.yZt()),this.iZt.tZt(n),r.rA}Mm(t){void 0===t&&(t=new Rh),this.xZt.forEach((i=>i.sA(t))),this.xZt.clear(),this.iZt&&(this.iZt.nZt(),this.iZt=void 0)}constructor(t){this.iZt=void 0,this.NZt=0,this.xZt=Ge(),this.TZt=t=>{const i=t.data,e=i.CZt,s=this.xZt.get(e);if(s)if(this.xZt.delete(e),i.jZt===E0.wZt)s.eA(i.OZt);else if(i.jZt===E0.pZt){const t=i.RZt,e=i.PZt?new g(i.PZt):void 0,n=new Ui(Do.CONTENT_PROTECTION_INTERNAL_ERROR,"Error during AES128 decrypt. (code: "+t+")",e);s.sA(n)}},this.SZt=t=>{const i=new Ui(Do.CONTENT_PROTECTION_INTERNAL_ERROR,t.error.message,t.error);this.Mm(i)},this.MZt=t;try{this.bZt=me.Dw("theoplayer.d.js",t)}catch(t){throw new Ui(Do.CONFIGURATION_ERROR,"Invalid player configuration: missing libraryLocation",t)}}};function L0(t){return w0.iM()?new w0:new k0(t)}function x0(t){const i=So(t.boxes,DO);if(!i)return;const e=So(i.boxes,EO);return e?e.handlerType:void 0}function C0(t){const i=new Xp;return i.boxes.push(...t.boxes),i}function j0(t){const i=new Nr;return i.boxes.push(...t.boxes),i}r(),r(),r(),r();var O0=8;function R0(t,i){const e=function(t){const i=new bp;return i.boxes.push(...t.boxes),i}(t),s=z0(i);for(let t=0;t<e.boxes.length;t++){const n=e.boxes[t];if(n===i)e.boxes[t]=new Bm(new T(i.getSize()-O0));else if(kO(n)){const i=n,r=en(i.boxes,(t=>t instanceof Fr&&t.trackId===s));if(r>=0){const s=i.boxes[r],n=j0(i);n.boxes[r]=new Bm(new T(s.getSize()-O0)),e.boxes[t]=n}}}return e}function P0(t,i){const e=function(t){const i=new Cp;return i.boxes.push(...t.boxes),i}(t);for(let t=0;t<e.boxes.length;t++){const s=e.boxes[t];if(CO(s)){const n=So(s.boxes,jO);n&&n.trackId===i&&(e.boxes[t]=new Bm(new T(s.getSize()-O0)))}}return e}function z0(t){return So(t.boxes,IO).trackId}function B0(t,i,e,s){const n=So(t.boxes,jO),r=e.dB(i).Yz();let o=Io.ZERO;for(const i of t.boxes){if(i instanceof Np){o=tf(i.baseMediaDecodeTime,r),i.baseMediaDecodeTime=i.baseMediaDecodeTime.subtract(o);break}if(i instanceof Sp){o=tf(Io.fromNumber(i.baseMediaDecodeTime),r),i.baseMediaDecodeTime-=o.toNumber();break}}if(o.isZero())return;const h=So(t.boxes,OO);if(void 0!==h&&h.samples.length>0){const t=h.samples;if(!h.flags.sampleDurationPresent){h.flags.sampleDurationPresent=!0;const i=null!=s?s:n.defaultSampleDuration;for(const e of t)e.duration=i}t[0].duration+=o.toNumber(),h.samples=t}}r();var U0="Mp4Transmuxer",Q0=class extends L${ZYt(t,i){re(i);const e=t.eRt,s=aR(Os(t.HPt.xS.xS));if(!s)throw new g("Mp4Transmuxer - Unable to parse "+e.Hw+" MP4 initializer.");this.w2=s;const n=function(t){let i,e;for(const s of t.Z)i||(i=s.$0),e||(e=s.J0);if(i||e)return{eLt:i,nLt:e,cPt:void 0};return}(s);n&&this.qYt(e,n);const r=function(t){for(const i of t.Z)if(void 0!==i.t1)return i.t1;return}(s);void 0!==r&&this.KYt(e,r);const o=function(t){var i;const e=iA(t),s=So(e.boxes,SO),n=s.boxes.filter(NO),r=So(n,(t=>x0(t)===Hm.AUDIO)),o=So(n,(t=>x0(t)===Hm.VIDEO)),h={eLt:{dC:r?z0(r):void 0},nLt:{dC:o?z0(o):void 0}},a=null==(i=So(s.boxes,kO))?void 0:i.boxes.filter(LO);var u,c;const l=a?{eLt:null!=(u=So(a,(t=>t.trackId===h.eLt.dC)))?u:void 0,nLt:null!=(c=So(a,(t=>t.trackId===h.nLt.dC)))?c:void 0}:void 0;var d,f;if(l&&(h.eLt.Fj=null==(d=l.eLt)?void 0:d.defaultSampleDuration,h.nLt.Fj=null==(f=l.nLt)?void 0:f.defaultSampleDuration),!r||!o)return{eLt:r?t:void 0,nLt:o?t:void 0,WB:h};const g=C0(e),_=C0(e),v=e.boxes.indexOf(s);g.boxes[v]=R0(s,o),_.boxes[v]=R0(s,r);const w=g.serialize().join(),m=_.serialize().join();return{eLt:w,nLt:m,WB:h}}(t.HPt.xS.xS);if(this.zZt=o.WB,o.nLt){const i=So(s.Z,(t=>t.dC===o.WB.nLt.dC)),e={Hw:"ykt",xS:{Hw:z.XK,xS:o.nLt},jat:Q.iN,KPt:t.KPt,eVt:{Qrt:'video/mp4; codecs="'+i.J0+'"',YPt:t.YPt},OP:t.OP,eRt:t.eRt,yQt:t.HPt.yQt};this._Yt(e)}if(o.eLt){const i=So(s.Z,(t=>t.dC===o.WB.eLt.dC)),e={Hw:"ykt",xS:{Hw:z.XK,xS:o.eLt},jat:Q.tN,KPt:t.KPt,eVt:{Qrt:'audio/mp4; codecs="'+i.$0+'"',YPt:t.YPt},OP:t.OP,eRt:t.eRt,yQt:t.HPt.yQt};this._Yt(e)}return Promise.resolve()}async XYt(t,i){re(i);const e=t.Zut.yQt;Gi.pC(U0,"Transmuxing fMP4: "+L(e.xAt));const s=t.Zut.xS,n=F0(s.xS,this.w2),r=Lv(n.map((t=>t.oet)),ID);if(void 0!==r&&(e.het=r,this.$Yt(t.eRt)),!this.cUt.zBt(t.KPt)){const s=Fu.vB(e.OP);if(n.length>0){const i=Lv(n.map((t=>t.BZt)),ID);for(const n of this.UYt)this.cUt.qBt(t.KPt,n,i,s,Y0(e),!1);this.$Yt(t.eRt)}this.cUt.zBt(t.KPt)||await Ic(this.cUt.UBt(t.KPt),i)}const o=this.cUt.WBt(t.KPt),h=e.het?this.cUt.ZBt(e.het,e)._z():e.OP,a=x$(e,h);var u;const c={IYt:a,DYt:C$(e,a),OP:h,ct:null!=(u=e.ct)?u:0,RB:o._z(),KPt:t.KPt,eRt:t.eRt,yQt:t.Zut.yQt},l=function(t,i){if(void 0===i.eLt.dC)return{eLt:void 0,nLt:t};if(void 0===i.nLt.dC)return{eLt:t,nLt:void 0};const e=iA(t),s=C0(e),n=C0(e);for(let t=0;t<e.boxes.length;t++){const r=e.boxes[t];xO(r)&&(s.boxes[t]=P0(r,i.nLt.dC),n.boxes[t]=P0(r,i.eLt.dC))}const r=s.serialize().join(),o=n.serialize().join();return{eLt:r,nLt:o}}(s.xS,this.zZt);if(l.nLt){var d;const i=this.zZt.nLt.dC,s=So(this.w2.Z,(t=>t.dC===i)),o=So(n,(t=>t.dC===i)),h=this.UZt(l.nLt,s,o,null==(d=this.zZt)?void 0:d.nLt.Fj,e);this.QZt=s,this.JYt(t.eRt,e,o.oet.Nz(r));const a=il({Hw:"Zut",xS:{Hw:z.XK,xS:h},jat:Q.iN},c);this._Yt(a)}if(l.eLt){const t=il({Hw:"Zut",xS:{Hw:z.XK,xS:l.eLt},jat:Q.tN},c);this._Yt(t)}this.FZt=e,this.YZt=n}UZt(t,i,e,s,n){if(!Y0(n))return t;if(!this.FZt||!this.QZt||!this.YZt)return t;const r=this.QZt.dC,o=So(this.YZt,(t=>t.dC===r)),h=this.cUt.ZBt(o.VZt,this.FZt),a=this.cUt.ZBt(e.oet,n).Nz(h).dB(i.eC);if(a.Az(Fu.Cz))return t;if(a.vz(Fu.vB(.5)))return t;const u=jJ(n)?n:n.bzt;return Gi.TRt(U0,"Stretching first video frame of segment #"+u.CPt+" to fill gap of "+a._z()+"s"),function(t,i,e,s){const n=iA(t),r=So(n.boxes,xO);if(r){const t=r.getSize();for(const t of r.boxes)t instanceof Ir&&B0(t,i,e,s);const n=r.getSize();if(n!==t){const i=n-t;for(const t of r.boxes)t instanceof Ir&&RO(t,i)}}return n.serialize().join()}(t,i.eC,a,s)}constructor(...t){super(...t),this.w2=void 0,this.zZt=void 0,this.FZt=void 0,this.YZt=void 0,this.QZt=void 0}};function F0(t,i){const e=dr(tn.zx(Os(t)),Fo.QL);if(!e)throw new g("Mp4Transmuxer - Unable to parse segment or part.");return function(t,i){const e=[];for(const n of t.Z){if(!n.$j||0===n.Jj.length||0===n.Jj[0].rO.length)continue;const t=n.Lx.dC,r=So(i.Z,(i=>i.dC===t));let o=0,h=1/0,a=0;const u=n.Lx.Fj||0;for(const t of n.Jj)for(const i of t.rO){const t=i.oO||0,e=o+t;var s;o+=null!=(s=i.ct)?s:u;const n=o+t;e<h&&(h=e),n>a&&(a=n)}const c=Fu.kz(n.$j.$j,r.eC);e.push({dC:t,BZt:c,oet:c.yP(Fu.Lz(h,r.eC)),GZt:c.yP(Fu.Lz(o,r.eC)),VZt:c.yP(Fu.Lz(a,r.eC))})}return e}(e,i)}function Y0(t){return jJ(t)?t.ZPt:0===t.Tzt&&t.bzt.ZPt}var V0="MpegtsTransmuxer",G0=class extends Q0{ZYt(t,i){return super.ZYt(t,i)}VYt(t,i){if(super.VYt(t,i),this.UN.WZt())return;var e;const s=null!=(e=null==i?void 0:i.xAt)?e:t.xAt;if(!s)return;/\.(ts|aac|mp3)/i.test(s.lI)&&this.UN.ZZt()}HZt(t){let i;return t.eRt===this.XZt&&this.qZt.has(t.KPt)?i=this.qZt.get(t.KPt):(i=$$(t.Zut.xS.xS),this.XZt=t.eRt,this.qZt.set(t.KPt,i)),i}async XYt(t,i){re(i);const e=this.HZt(t),s=t.Zut;if(e!==J$.EVt&&e!==J$.kVt)return super.XYt(t,i);if(s.yQt.YPt.some(Z0))throw new Ui(Do.CONTENT_PROTECTION_NOT_SUPPORTED,"SAMPLE-AES encryption is not supported for MPEG-TS or Packed Audio segments");const n=this.UN.ZZt();let r;e===J$.EVt?(Gi.pC(V0,"Transmuxing MPEG-TS: "+L(s.yQt.xAt)),r=await n.KZt({data:s.xS.xS,metadata:this.JZt})):(Gi.pC(V0,"Transmuxing raw audio: "+L(s.yQt.xAt)),r=await n.$Zt({data:s.xS.xS,metadata:this.JZt})),re(i),this.qYt(t.eRt,{eLt:r.metadata.audio_codec,nLt:r.metadata.video_codec,cPt:void 0}),r.metadata.video_frame_rate&&this.KYt(t.eRt,r.metadata.video_frame_rate);const o=H0(r.metadata.first_decode_timestamp),h=H0(r.metadata.first_presentation_timestamp),a=void 0!==r.metadata.first_video_presentation_timestamp?H0(r.metadata.first_video_presentation_timestamp):void 0;if(s.yQt.het=h,this.$Yt(t.eRt),void 0!==a&&this.JYt(t.eRt,s.yQt,function(t,i){let e=t.Nz(i);return e.bz(Fu.Cz)&&(e=e.yP(kD())),e}(a,h)),!this.cUt.zBt(t.KPt)){const e=Fu.vB(s.yQt.OP);for(const i of this.UYt)this.cUt.qBt(t.KPt,i,o,e,Y0(s.yQt),!0);this.$Yt(t.eRt),this.cUt.zBt(t.KPt)||await Ic(this.cUt.UBt(t.KPt),i)}const u=this.cUt.XBt(o,s.yQt);this.JZt=r.metadata;const c=this.cUt.ZBt(h,s.yQt)._z(),l=x$(s.yQt,c);var d;const f={IYt:l,DYt:C$(s.yQt,l),OP:c,ct:null!=(d=s.yQt.ct)?d:0,RB:u._z(),KPt:t.KPt,eRt:t.eRt,yQt:s.yQt};if(void 0===r.data.audio_media&&void 0===r.data.video_media){for(const t of this.UYt){const i=il({Hw:"Zut",xS:void 0,jat:t},f);this._Yt(i)}return}const g=[];if(void 0!==r.data.audio_media){if(r.data.audio_init&&(!this.tHt||this.iHt!==t.KPt||!ks(this.tHt,r.data.audio_init))){const i=this.cUt.ZBt(s.yQt.het,s.yQt)._z(),e={Hw:"ykt",xS:{Hw:z.XK,xS:r.data.audio_init},jat:Q.tN,KPt:t.KPt,eVt:{Qrt:'audio/mp4; codecs="'+r.metadata.audio_codec+'"',YPt:s.yQt.YPt},OP:i,eRt:t.eRt,yQt:s.yQt};this.tHt=r.data.audio_init,this.iHt=t.KPt,this._Yt(e)}const i=il({Hw:"Zut",xS:{Hw:z.XK,xS:r.data.audio_media},jat:Q.tN},f);this._Yt(i)}else if(t.Zut.yQt.Azt&&fh(this.UYt,Q.tN)){const t=il({Hw:"Zut",xS:void 0,jat:Q.tN},f);this._Yt(t)}if(void 0!==r.data.video_media){if(r.data.video_init&&(!this.eHt||this.sHt!==t.KPt||!ks(this.eHt,r.data.video_init))){const i=this.cUt.ZBt(s.yQt.het,s.yQt)._z(),e={Hw:"ykt",xS:{Hw:z.XK,xS:r.data.video_init},jat:Q.iN,KPt:t.KPt,eVt:{Qrt:'video/mp4; codecs="'+r.metadata.video_codec+'"',YPt:s.yQt.YPt},OP:i,eRt:t.eRt,yQt:s.yQt};this.eHt=r.data.video_init,this.sHt=t.KPt,this.nHt=aR(Os(r.data.video_init)),this._Yt(e)}const i=this.nHt.Z[0],e=F0(r.data.video_media,this.nHt)[0],n=this.UZt(r.data.video_media,i,e,void 0,s.yQt);this.QZt=i;const o=il({Hw:"Zut",xS:{Hw:z.XK,xS:n},jat:Q.iN},f);this._Yt(o),g.push(e)}else if(t.Zut.yQt.Azt&&fh(this.UYt,Q.iN)){const t=il({Hw:"Zut",xS:void 0,jat:Q.iN},f);this._Yt(t)}this.FZt=s.yQt,this.YZt=g}Dm(){this.tHt=void 0,this.eHt=void 0,this.iHt=-1,this.sHt=-1,super.Dm()}constructor(t,i,e,s){super(i,e,s),this.JZt=void 0,this.tHt=void 0,this.eHt=void 0,this.nHt=void 0,this.iHt=-1,this.sHt=-1,this.XZt=void 0,this.qZt=rn(),this.UN=t}},W0=class{pTt(t,i,e){return new G0(this,t,i,e)}};function Z0(t){return t.hN===N.KRt}function H0(t){return Fu.kz(Io.fromBits(t.low,t.high),t.base)}r(),r();var X0=function(t){return t[t.MPEGTS_TO_FMP4=0]="MPEGTS_TO_FMP4",t[t.RAW_AUDIO_TO_FMP4=1]="RAW_AUDIO_TO_FMP4",t}({}),q0=()=>{const t=function(){if("undefined"==typeof WebAssembly)return!1;const t=ui.Gg;if(t>0&&t<=56)return!1;try{return void 0!==new WebAssembly.Module(Vs("AGFzbQEAAAA="))}catch(t){return!1}}();return q0=()=>t,t};var K0=class{KZt(t){return this.rHt(X0.MPEGTS_TO_FMP4,t)}$Zt(t){return this.rHt(X0.RAW_AUDIO_TO_FMP4,t)}yZt(){const t=S0(this.bZt,this.MZt,{name:"THEOplayer transmux worker"});return t.yn("message",this.TZt),t.yn("error",this.SZt),t}rHt(t,i){const e=++this.NZt,s={type:t,id:e,input:i},n=new pa;return this.xZt.set(e,n),this.iZt.tZt(s),n.rA}Mm(t){void 0===t&&(t=new Rh),this.xZt.forEach((i=>i.sA(t))),this.xZt.clear(),this.iZt.nZt()}constructor(t){this.NZt=0,this.xZt=rn(),this.TZt=t=>{const i=t.data;if(void 0!==i.requestId){const t=this.xZt.get(i.requestId);if(!t)return;this.xZt.delete(i.requestId),i.success?t.eA(i.output):t.sA(new Ui(i.errorCode,i.error))}else i.success||this.Mm(new Ui(i.errorCode,i.error))},this.SZt=t=>{const i=new Ui(Do.MEDIA_DECODE_ERROR,t.error.message,t.error);this.Mm(i)},this.MZt=t;const i=q0()?"THEOplayer.transmux.js":"THEOplayer.transmux.asmjs.js";try{this.bZt=me.Dw(i,t)}catch(t){throw new Ui(Do.CONFIGURATION_ERROR,"Invalid player configuration: missing libraryLocation",t)}this.iZt=this.yZt()}},J0=class extends W0{WZt(){return void 0!==this.iZt}ZZt(){var t;return null!=(t=this.iZt)?t:this.iZt=new K0(this.oHt)}Mm(){this.iZt&&(this.iZt.Mm(),this.iZt=void 0)}constructor(t){super(),this.oHt=t,this.iZt=void 0}},$0=class{uet(){return new J0(this.oHt)}constructor(t){this.oHt=t}},t1=class extends h0{tE(){return this.jR.tE()}get JD(){return this.jR.JD}set JD(t){this.jR.JD=t}async gn(){var t;await super.gn(),null==(t=this.mIt)||t.gn()}constructor(t,i,e,s,n,r,o,h){super(t,i,e,s,n,r,o,h),ui.M_&&(this.mIt=new YQ(this))}},i1=class extends t1{async gn(){await super.gn(),await this.vY._Y(this.jR)}constructor(t,i,e,s,n,r,o,h){const a=new rt(t);super(a.xY(Q.iN),i,e,s,n,r,o,h),this.vY=a}},e1=class extends a0{async CY(t,i){return!!ea(t.useManagedMediaSource)&&(!(!t.useManagedMediaSource&&(ui.Ka||ui.F_))&&super.CY(t,i))}async jY(t){return!(t.clearkey&&!t.fairplay&&ui.M_)&&super.jY(t)}};ki(new class extends e1{Gk(t,i,e,s,n,r,o){return new i1(i,e,n,r,L0(s.libraryLocation),new $0(s.libraryLocation),new yQ(ga.K_.Srt,ga.K_.Trt,ga.K_.Mrt,ga.K_.Irt),s)}OY(){return!0}constructor(...t){super(...t),this.RY=bl.Ek}}),Gi.Rt=()=>{var t;return Boolean(null==(t=s)?void 0:t.THEOplayerDebugLogsEnabled)},r(),r(),r(),r();var s1=class{nrt(t,i){return Promise.resolve(!1)}ort(t,i){return Promise.resolve(void 0)}trt(t){return Promise.resolve(void 0)}bK(t){return Promise.resolve(void 0)}},n1=class extends Bo{hHt(){var t;return null==(t=this.aHt)?void 0:t.WOt}Cn(){xe(_t((()=>this.uHt(this.bM.wm)),this.bM.wm))}async uHt(t){await this.uNt.xUt(t),this.cHt&&(this.lHt(this.cHt.ji,this.cHt.Ti),this.cHt=void 0),this.N6=!0}dHt(t,i){this.N6?this.lHt(t,i):this.cHt={ji:t,Ti:i}}lHt(t,i){const e=this.fHt(t,i),s=null==e?void 0:e.ERt[0];s!==this.aHt&&(this.gHt(),void 0!==s&&(this.aHt=s,this._Ht=new n$(this.uNt,s),this._Ht.RQt()))}gHt(){this.aHt=void 0,this._Ht&&(this._Ht.Mm(),this._Ht=void 0)}fHt(t,i){const e=So(this.uNt.Tr.IRt,(e=>void 0!==e.Wkt&&e.Wkt.ji===t&&e.Wkt.Ti===i));return null!=e?e:this.uNt.Tr.IRt[0]}gn(){this.Bo(),this.bM.Dm(),this.bM.Mm(),this.gHt(),this.uNt.Mm()}constructor(t,i,e){super(),this.aHt=void 0,this._Ht=void 0,this.cHt=void 0,this.bM=new Ai,this.vHt=()=>{this.yo(new kW)},this.kc=t,this.uNt=new ZJ(e,new s1,t.useCredentials,t.src,t.liveOffset),this.uNt.yn(Qi.dp,this.Ds),this.N6=!1}};r();var r1=class extends G{get ht(){return this.c9.ht}get KI(){return this.c9.KI}get $I(){return this.c9.$I}set $I(t){this.c9.$I=t}get bt(){return this.c9.bt}get sD(){return this.c9.sD}set sD(t){this.c9.sD=t}rD(t,i){this.sD=t}get ct(){return this.c9.ct}get hD(){return this.c9.hD}get cD(){return this.c9.cD}get dD(){return this.c9.dD}get lt(){return this.c9.lt}get gD(){return this.c9.gD}get vD(){return this.c9.vD}get mD(){return this.c9.mD}set mD(t){this.c9.mD=t}get bD(){return this.c9.bD}get TD(){return this.c9.TD}get ND(){return this.c9.ND}set ND(t){this.c9.ND=t}get kD(){return this.c9.kD}get xD(){return this.c9.xD}set xD(t){this.c9.xD=t}get OD(){return this.c9.OD}get PD(){return this.c9.PD}get BD(){return this.c9.BD}get ZF(){return this.c9.ZF}get nt(){return this.c9.nt}get FD(){return this.c9.FD}get rt(){return this.c9.rt}get GD(){return this.c9.GD}get ZD(){return this.c9.ZD}set ZD(t){this.c9.ZD=t}get qD(){return this.c9.qD}get JD(){return this.c9.JD}set JD(t){this.c9.JD=t}get XF(){return this.c9.XF}get GR(){}rE(){return this.c9.rE()}$D(){return this.c9.$D()}_a(){return this.c9._a()}dE(t){return this.c9.dE(t)}tE(){return this.c9.tE()}be(){return this.c9.be()}aE(){return this.c9.aE()}uE(){return this.c9.uE()}eE(){return this.c9.eE()}sE(){return this.c9.sE()}tr(){return this.c9.tr()}wa(t,i,e){return this.c9.wa(t,i,e)}ge(){return this.c9.ge()}oE(){return this.c9.oE()}hE(){return this.c9.hE()}gn(){this.Bo();for(const t of tx)this.c9.fn(t,this.Ds);return this.c9.gn()}constructor(t){super(),this.c9=t;for(const t of tx)this.c9.yn(t,this.Ds)}},o1=class extends r1{async wa(t,i,e){await super.wa(t,i,e),t.hlsDateRange&&this.IAt(t,i)}IAt(t,i){this.wHt=new n1(t,i,this.mHt),this.wHt.yn(Qi.dp,this.handleManifestUpdate),this.wHt.Cn()}tr(){return this.tQt&&(this.nt.it(this.tQt),this.c8.it(this.tQt),this.tQt.gn(),this.tQt=void 0,this.pHt=!1),this.wHt&&(this.wHt.gn(),this.wHt=void 0),this.c8.tr(),super.tr()}gn(){return this.fn(Qi.Ap,this.HWt),this.wHt&&(this.wHt.gn(),this.wHt=void 0),this.c8.gn(),super.gn()}constructor(t,i,e){super(t),this.wHt=void 0,this.pHt=!1,this.tQt=void 0,this.handleManifestUpdate=()=>{const t=this.wHt.hHt();if(t){const i=this.ZF;if(i){const e=i.getTime();let s=this.tQt;s||(s=new bJ,this.tQt=s),s.Yn(t.JPt,(t=>(t.getTime()-e)/1e3)),!this.pHt&&s.L.U>0&&(this.nt.tt(s),this.c8.tt(s),this.pHt=!0)}}},this.HWt=()=>{this.wHt&&this.wHt.dHt(this.GD,this.FD)},this.mHt=i,this.c8=new zh(this),this.yn(Qi.Ap,this.HWt)}};!function(t){qL.PY().zY(t)}((function(t,i,e){return new o1(t,i,e)})),r(),r(),r(),r();var I=class extends ai{get name(){return"CastError"}constructor(t,i=""){super("An error occurred while casting."),this.errorCode=t,this.description=i}};async function h1(t){c1()||await async function(t){if(null==t?void 0:t.gm)return Promise.reject(new Rh);const{rA:i,eA:e,sA:n}=function(){let t,i;return{rA:new Promise(((e,s)=>{t=e,i=s})),eA:t,sA:i}}(),r=s.__onGCastApiAvailable,o=()=>{s.__onGCastApiAvailable=r,n(new Rh)};return s.__onGCastApiAvailable=(i,h)=>{i?e():n(new g(h)),null==t||t._m(o),s.__onGCastApiAvailable=r,r&&r(i,h)},null==t||t.vm(o),i}(t),u1()||await Bn(100,t),u1()||(me.lw('Detected the Chromecast library was loaded without the CAF framework. It is strongly encouraged to load it with the CAF framework by using this URL: "//www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1"'),await a1())}var a1=Vc((()=>function(t){return new Promise(((i,e)=>{const s=h.createElement("script");s.onload=()=>i(),s.onerror=t=>e((null==t?void 0:t.error)||t),s.type="text/javascript",s.src=t,(h.head||h.documentElement).appendChild(s)}))}("//www.gstatic.com/cast/sdk/libs/sender/1.0/cast_framework.js").catch((()=>{throw new I("API_NOT_INITIALIZED","The Chromecast library could not be loaded successfully.")}))));function u1(){return Boolean("undefined"!=typeof cast&&cast.framework)}function c1(){return"undefined"!=typeof chrome&&chrome&&chrome.cast&&chrome.cast.isAvailable}function l1(t,i,e,s){if(Rt(i))for(const e of _.keys(i)){if("type"===e||"images"===e)continue;const s=i[e];Rt(s)&&(t[e]=s)}!function(t,i,e,s){if(!Rt(e)&&!Rt(null==i?void 0:i.images))return;t.images=[],e&&t.images.push(new s.Image(e));if(null==i?void 0:i.images)if(cs(i.images))t.images.push(new s.Image(i.images));else if(Kc(i.images))for(const e of i.images){let i;var n,r;if(cs(e))i=new s.Image(e);else i=new s.Image(e.src),i.height=null!=(n=e.height)?n:null,i.width=null!=(r=e.width)?r:null;t.images.push(i)}}(t,i,e,s)}function d1(t,i,e){return void 0===e&&(e=chrome),function(t,i,e){switch(null==t?void 0:t.type){case"movie":{const s=new e.MovieMediaMetadata;return l1(s,t,i,e),s}case"audio":{const s=new e.MusicTrackMediaMetadata;return l1(s,t,i,e),!Rt(s.artist)&&Rt(t.artistName)&&(s.artist=t.artistName),s}case"tv-show":{const s=new e.TvShowMediaMetadata;return l1(s,t,i,e),!Rt(s.title)&&Rt(t.episodeTitle)&&(s.title=t.episodeTitle),!Rt(s.season)&&Rt(t.seasonNumber)&&(s.season=t.seasonNumber),!Rt(s.episode)&&Rt(t.episodeNumber)&&(s.episode=t.episodeNumber),s}default:{const s=new e.GenericMediaMetadata;return l1(s,t,i,e),s}}}(t,i,function(t){return{GenericMediaMetadata:t.cast.media.GenericMediaMetadata,MovieMediaMetadata:t.cast.media.MovieMediaMetadata,TvShowMediaMetadata:t.cast.media.TvShowMediaMetadata,MusicTrackMediaMetadata:t.cast.media.MusicTrackMediaMetadata,Image:t.cast.Image}}(e))}function Ru(t){switch(t){case chrome.cast.ErrorCode.CANCEL:return"CANCEL";case chrome.cast.ErrorCode.TIMEOUT:return"TIMEOUT";case chrome.cast.ErrorCode.API_NOT_INITIALIZED:return"API_NOT_INITIALIZED";case chrome.cast.ErrorCode.INVALID_PARAMETER:return"INVALID_PARAMETER";case chrome.cast.ErrorCode.EXTENSION_NOT_COMPATIBLE:return"EXTENSION_NOT_COMPATIBLE";case chrome.cast.ErrorCode.EXTENSION_MISSING:return"EXTENSION_MISSING";case chrome.cast.ErrorCode.RECEIVER_UNAVAILABLE:return"RECEIVER_UNAVAILABLE";case chrome.cast.ErrorCode.SESSION_ERROR:return"SESSION_ERROR";case chrome.cast.ErrorCode.CHANNEL_ERROR:return"CHANNEL_ERROR";case chrome.cast.ErrorCode.LOAD_MEDIA_FAILED:return"LOAD_MEDIA_FAILED";default:return"CANCEL"}}function f1(t){if(t.items&&t.items.length>0&&t.currentItemId>=0)return So(t.items,(i=>i.itemId===t.currentItemId))}r(),r(),r(),r(),r();var g1="urn:x-cast:com.theoplayer.cast";r(),r();var _1=function(t){return t.AHt="theoplayer_receiver_info",t.yHt="theoplayer_trackpropertychange",t.bHt="theoplayer_propertychange",t}({});r();var v1=function(t){return t.SKIP_AD="SKIP_AD",t}({});r();function Vu(t){h.createElement("img").src=t}r(),r(),r();var w1=new RegExp(/^(\d\d):(\d\d):(\d\d)(?:\.(\d{3}))?$/);function m1(t){if(!cs(t))return;const i=t.match(w1);return i?3600*C(i[1],10)+60*C(i[2],10)+Number(i[3])+(Number(i[4])||0)/1e3:void 0}function p1(t){if(void 0===t)return;const i=t.match(/^([1-9]?\d|100)%$/);return i?C(i[1])/100:void 0}function Ie(t,i){return"vmap"===t.type||!Rt(t.type)&&!Rt(i)}function A1(t,i){return"vast"===t.type||!Rt(t.type)&&Rt(i)}r(),r(),r();var y1=class{},b1=class extends y1{get MHt(){return this.Dc}THt(){return null!=this.SHt||(this.SHt=Qr(this.Dc,(t=>t.THt()))),this.SHt}constructor(t){super(),this.Dc=t.sort(((t,i)=>t.Hj-i.Hj))}};r(),r();var M1=class extends y1{get o(){return this.NHt}get Hj(){return this.IHt}get DHt(){return this.EHt}constructor(t,i){super(),this.NHt=t,this.IHt=i,this.EHt=!1}},T1=class extends M1{get kHt(){return this.LHt}get xHt(){return this.CHt}get jHt(){return this.OHt}get RHt(){return this.PHt}get lt(){return this.FF}THt(){if(void 0===this.zHt){let t,i,e,s=[];for(const n of this.LHt)n.BHt&&(t=n.BHt),n.UHt&&(i=n.UHt),n.QHt&&(e=n.QHt),s=s.concat(n.universalAdIds);this.zHt={RHt:this.RHt,BHt:t,FHt:i,QHt:e,lt:this.lt,YHt:s}}return[this.zHt]}constructor(t,i,e,s,n,r,o){super(t,i),this.CHt=e,this.OHt=s,this.PHt=n,this.LHt=r,this.FF=o}};r(),r();var S1=class{get VHt(){return this.GHt}get WHt(){return this.ZHt}constructor(t,i){this.GHt=t,this.ZHt=i}},N1=class{get HHt(){return this.XHt}get qHt(){return this.KHt}get JHt(){return this.$Ht}get tXt(){return this.iXt}get Yl(){return this.eXt}set Yl(t){this.eXt=t}get sXt(){return this.nXt}get rXt(){return this.oXt}hXt(){this.oXt=!0}get xHt(){return this.CHt}constructor(t,i,e,s,n,r){this.XHt=t,this.KHt=i,this.$Ht=e,this.iXt=s,this.oXt=!1,this.nXt=n,this.CHt=r}};r();var I1=function(t){return t.aXt="all",t.uXt="any",t.HY="none",t}({});var D1=class{get cXt(){return this.lXt}get dXt(){return this.fXt}constructor(t,i){this.lXt=t,this.fXt=i}},E1=class{get o(){return this.Nb}get ji(){return this.My}get Ti(){return this.Ty}get gXt(){return this._Xt}get vXt(){return this.wXt}get mXt(){return this.pXt}get AXt(){return this.yXt}get bXt(){return this.MXt}get TXt(){return this.SXt}get NXt(){return this.IXt}get HHt(){return this.XHt}get qHt(){return this.KHt}get JHt(){return this.$Ht}get DXt(){return this.EXt}get WHt(){return this.kXt}get LXt(){return this.xXt}constructor(t,i,e,s,n,r,o,h,a,u,c,l,d,f,g,_){this.My=t,this.Ty=i,this.Nb=e,this._Xt=s,this.wXt=n,this.pXt=r,this.yXt=o,this.MXt=h,this.SXt=a,this.IXt=u,this.XHt=c,this.KHt=l,this.$Ht=d,this.EXt=f,this.kXt=g,this.xXt=_}};r();var k1=class{get id(){return this.Nb}get uri(){return this.Izt}constructor(t,i){this.Nb=t,this.Izt=i}},Uu=class{get CXt(){return this.jXt}get OXt(){return this.RXt}get PXt(){return this.zXt}get BXt(){return this.UXt}constructor(t,i,e,s){this.jXt=t,this.RXt=i,this.zXt=e,this.UXt=s}},L1=class extends M1{get RHt(){return this.PHt}get QXt(){return this.FXt}get YXt(){return this.VXt}get kHt(){return this.LHt}get GXt(){return this.WXt}get ZXt(){return this.HXt}get lt(){return this.FF}THt(){return void 0===this.FXt?[]:(null!=this.SHt||(this.SHt=this.FXt.THt().map((t=>this.XXt(t)))),this.SHt)}XXt(t){let i,e,s;for(const t of this.kHt)t.BHt&&(i=t.BHt),t.UHt&&(e=t.UHt),t.QHt&&(s=t.QHt);const n=t.RHt.concat(this.RHt);let r=t.BHt;if(i&&t.BHt){const e=new Uu(t.BHt.qXt.CXt,t.BHt.qXt.OXt,t.BHt.qXt.PXt.concat(i.qXt.PXt),t.BHt.qXt.BXt.concat(i.qXt.BXt));r=t.BHt,r.qXt=e,r.WHt=r.WHt.concat(i.WHt)}let o=t.FHt;if(e&&e.VHt){var h,a;const s=[];for(const t of e.VHt)s.concat(t.tXt.PXt);const n=[];var u,c;for(const e of null!=(u=null==(h=t.FHt)?void 0:h.VHt)?u:[]){var l,d,f;const r=new Uu(e.tXt.CXt,e.tXt.OXt,e.tXt.PXt.concat(s),(null!=(d=null==(l=t.BHt)?void 0:l.qXt.BXt)?d:[]).concat(null!=(f=null==i?void 0:i.qXt.BXt)?f:[]));n.push(new N1(e.HHt,e.qHt,e.JHt,r,e.sXt,e.xHt))}o=new S1(n,(null!=(c=null==(a=t.FHt)?void 0:a.WHt)?c:[]).concat(e.WHt))}let g=t.QHt;if(g){var _;let i=g.cXt;var v,w;s&&s.cXt&&(i=s.cXt),g=new D1(i,(null!=(v=null==(_=t.QHt)?void 0:_.dXt)?v:[]).concat(null!=(w=null==s?void 0:s.dXt)?w:[]))}let m=t.lt;return this.lt&&(m=this.lt),{RHt:n,BHt:r,FHt:o,QHt:g,lt:m,YHt:t.YHt}}constructor(t,i,e,s,n,r,o,h,a){super(t,i),this.PHt=e,this.FXt=s,this.VXt=n,this.LHt=r,this.WXt=o,this.HXt=h,this.FF=a}};r();var x1=class{get o(){return this.Nb}get KXt(){return this.JXt}get $Xt(){return this.tqt}get bXt(){return this.MXt}get BHt(){return this.iqt}get UHt(){return this.eqt}get QHt(){return this.sqt}get universalAdIds(){return this.nqt}constructor(t,i,e,s,n,r,o,h){this.Nb=t,this.JXt=i,this.tqt=e,this.MXt=s,this.iqt=n,this.eqt=r,this.sqt=o,this.nqt=h}};r();var C1=class{get ct(){return this.rqt}get oqt(){return this.hqt}get WHt(){return this.ZHt}set WHt(t){this.ZHt=t}set qXt(t){this.aqt=t}get qXt(){return this.aqt}get uqt(){return this.cqt}set uqt(t){this.cqt=t}get lqt(){return this.oXt}get Yl(){return this.eXt}set Yl(t){this.eXt=t}get sXt(){return this.nXt}get xHt(){return this.CHt}hXt(){this.oXt=!0}constructor(t,i,e,s,n,r,o){this.rqt=t,this.hqt=i,this.ZHt=e,this.aqt=s,this.cqt=n,this.oXt=!1,this.nXt=r,this.CHt=o}};function Qt(t,i){return R1(t)&&t.getAttribute(i)||void 0}function j1(t,i){return O1(t,i,void 0,!1)}function O1(t,i,e,s){return i===(t.localName?t.localName:t.nodeName)&&(s&&e?e===t.namespaceURI:!e||!t.namespaceURI||e===t.namespaceURI)}function Ei(t,i){const e=[];for(let s=0;s<t.childNodes.length;s+=1){const n=t.childNodes.item(s);R1(n)&&j1(n,i)&&e.push(n)}return e}function R1(t){return t&&1===t.nodeType}function P1(t,i){const e=(new DOMParser).parseFromString(t,i);if(!e||e.getElementsByTagName("parsererror").length>0)throw new g('Invalid document for MIME type "'+i+'"');return e}function z1(t){return t.replace(/[<>&'"]/g,(t=>{switch(t){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case"'":return"&apos;";case'"':return"&quot;";default:return t}}))}function B1(t){return"data:application/xml,"+encodeURIComponent(t)}r(),r();var U1=function(t){return t.dqt="mute",t.fqt="unmute",t.vp="pause",t.gqt="resume",t._qt="rewind",t.vqt="skip",t.wqt="playerExpand",t.mqt="playerCollapse",t.pqt="fullscreen",t.Aqt="exitFullscreen",t.yqt="expand",t.COLLAPSE="collapse",t.hTt="start",t.bqt="firstQuartile",t.Mqt="thirdQuartile",t.Tqt="midpoint",t.Sqt="complete",t.Nqt="acceptInvitationLinear",t.Iqt="acceptInvitation",t.Dqt="timeSpentViewing",t.Eqt="otherAdInteraction",t.wp="progress",t.kqt="creativeView",t.Lqt="adExpand",t.xqt="adCollapse",t.Cqt="minimize",t.jqt="close",t.Oqt="closeLinear",t.Rqt="overlayViewDuration",t.Pqt="breakStart",t.zqt="breakEnd",t.ua="error",t}({});function Q1(t){switch(t){case"breakStart":case"breakEnd":case"error":return!0;default:return!1}}var F1=["mute","unmute","pause","resume","rewind","skip","closeLinear","close","playerExpand","playerCollapse","fullscreen","exitFullscreen","expand","collapse","creativeView","start","firstQuartile","midpoint","thirdQuartile","complete","acceptInvitationLinear","acceptInvitation","timeSpentViewing","otherAdInteraction","progress"];function Y1(t){return void 0!==t&&-1!==F1.indexOf(t)}var V1=["start","firstQuartile","midpoint","thirdQuartile","complete","mute","unmute","pause","resume","rewind","skip","playerExpand","playerCollapse","expand","collapse","fullscreen","exitFullscreen","creativeView","acceptInvitation","adExpand","adCollapse","minimize","close","overlayViewDuration","otherAdInteraction","progress"];function G1(t){return void 0!==t&&-1!==V1.indexOf(t)}var W1=["mute","unmute","pause","resume","rewind","skip","playerExpand","playerCollapse","creativeView"];function Z1(t){return void 0!==t&&-1!==W1.indexOf(t)}function H1(t,i){if(void 0===t||""===t||void 0===i)return;let e=t.match(/^(\d+):(\d+):(\d+)$/);return e?S(e[1]||"0")+60*S(e[2]||"0")+S(e[3]||"0"):(e=t.match(/^(100|[1-9]\d|\d)%$/),e?S(e[1]||"0")*i/100:void 0)}var X1=class{get UG(){return this.Bqt}get tc(){return this.Uqt}get eventURL(){return this.Qqt}constructor(t,i,e){this.Bqt=t,this.Uqt=i,this.Qqt=e}};r();var q1=class{get Fqt(){return this.Yqt}constructor(t){this.Yqt=t}},K1=class extends q1{get CXt(){return this.jXt}get LXt(){return this.xXt}get Vqt(){return this.Gqt}constructor(t,i,e,s){super(t),this.Gqt=i,this.jXt=e,this.xXt=s}},J1=class extends q1{constructor(t){super(t)}},$1=class extends q1{constructor(t){super(t)}};r();var t2={Wqt:{oA:100,Rp:"XML parsing error."},Zqt:{oA:303,Rp:"Empty or invalid VAST error."},Hqt:{oA:400,Rp:"General linear error"},Xqt:{oA:403,Rp:"Unsupported MIME-type or missing mediafiles error"},qqt:{oA:500,Rp:"General nonlinear error"},lG:{oA:900,Rp:"Network error"}},i2=class{get Kqt(){return this.Jqt}$qt(t){if(!this.Kqt)return;const i=this.Kqt.replace(/\[ERRORCODE]/,""+t.oA);Vu(i)}constructor(t){this.Jqt=t}};r();var Ji=class extends ai{get tKt(){return this.iKt}get eKt(){var t;return null!=(t=this.sKt)?t:900}constructor(t,i,e,s){super(e||i&&e2[i]||t,s),this.iKt=t,this.sKt=i,this.nKt=e}},Oc=function(t){return t.ADBLOCK="adblock",t.NETWORK="network",t.PARSING="parsing",t.PLAYBACK="playback",t.GENERAL="general",t}({}),na=function(t){return t[t.VAST_MALFORMED_RESPONSE=100]="VAST_MALFORMED_RESPONSE",t[t.VAST_SCHEMA_VALIDATION_ERROR=101]="VAST_SCHEMA_VALIDATION_ERROR",t[t.VAST_UNSUPPORTED_VERSION=102]="VAST_UNSUPPORTED_VERSION",t[t.VAST_TRAFFICKING_ERROR=200]="VAST_TRAFFICKING_ERROR",t[t.VAST_UNEXPECTED_LINEARITY=201]="VAST_UNEXPECTED_LINEARITY",t[t.VAST_UNEXPECTED_DURATION_ERROR=202]="VAST_UNEXPECTED_DURATION_ERROR",t[t.UNEXPECTED_SIZE=203]="UNEXPECTED_SIZE",t[t.VAST_WRAPPER_ERROR=300]="VAST_WRAPPER_ERROR",t[t.VAST_LOAD_TIMEOUT=301]="VAST_LOAD_TIMEOUT",t[t.VAST_TOO_MANY_REDIRECTS=302]="VAST_TOO_MANY_REDIRECTS",t[t.VAST_NO_ADS_AFTER_WRAPPER=303]="VAST_NO_ADS_AFTER_WRAPPER",t[t.GENERAL_LINEAR_ERROR=400]="GENERAL_LINEAR_ERROR",t[t.FILE_NOT_FOUND=401]="FILE_NOT_FOUND",t[t.VAST_MEDIA_LOAD_TIMEOUT=402]="VAST_MEDIA_LOAD_TIMEOUT",t[t.VAST_LINEAR_ASSET_MISMATCH=403]="VAST_LINEAR_ASSET_MISMATCH",t[t.VAST_PROBLEM_DISPLAYING_MEDIA_FILE=405]="VAST_PROBLEM_DISPLAYING_MEDIA_FILE",t[t.MEZZANINE_FILE_REQUIRES=406]="MEZZANINE_FILE_REQUIRES",t[t.MEZZANINE_FILE_DOWNLOADED_FIRST_TIME=407]="MEZZANINE_FILE_DOWNLOADED_FIRST_TIME",t[t.AD_IN_VAST_REJECTED=408]="AD_IN_VAST_REJECTED",t[t.INTERACTIVE_CREATIVE_NOT_EXECUTED=409]="INTERACTIVE_CREATIVE_NOT_EXECUTED",t[t.VERIFICATION_CODE_NOT_EXECUTED=410]="VERIFICATION_CODE_NOT_EXECUTED",t[t.GENERAL_NON_LINEAR_ERROR=500]="GENERAL_NON_LINEAR_ERROR",t[t.NONLINEAR_DIMENSIONS_ERROR=501]="NONLINEAR_DIMENSIONS_ERROR",t[t.OVERLAY_AD_LOADING_FAILED=502]="OVERLAY_AD_LOADING_FAILED",t[t.VAST_NONLINEAR_ASSET_MISMATCH=503]="VAST_NONLINEAR_ASSET_MISMATCH",t[t.GENERAL_COMPANION_AD_ERROR=600]="GENERAL_COMPANION_AD_ERROR",t[t.INVALID_DIMENSIONS_COMPANION_AD=601]="INVALID_DIMENSIONS_COMPANION_AD",t[t.COMPANION_REQUIRED_ERROR=602]="COMPANION_REQUIRED_ERROR",t[t.COMPANION_AD_LOADING_FAILED=603]="COMPANION_AD_LOADING_FAILED",t[t.UNABLE_TO_FIND_SUPPORTED_COMPANION=604]="UNABLE_TO_FIND_SUPPORTED_COMPANION",t[t.UNKNOWN_ERROR=900]="UNKNOWN_ERROR",t[t.GENERAL_VPAID_ERROR=901]="GENERAL_VPAID_ERROR",t[t.MALFORMED_URI=1005]="MALFORMED_URI",t[t.VAST_ASSET_NOT_FOUND=1007]="VAST_ASSET_NOT_FOUND",t[t.VAST_EMPTY_RESPONSE=1009]="VAST_EMPTY_RESPONSE",t[t.UNKNOWN_AD_RESPONSE=1010]="UNKNOWN_AD_RESPONSE",t[t.UNSUPPORTED_LOCALE=1011]="UNSUPPORTED_LOCALE",t[t.INVALID_ARGUMENTS=1101]="INVALID_ARGUMENTS",t[t.INVALID_ADX_EXTENSION=1105]="INVALID_ADX_EXTENSION",t[t.AUTOPLAY_DISALLOWED=1205]="AUTOPLAY_DISALLOWED",t}({}),e2={100:"XML parsing error.",101:"VAST schema validation error.",102:"VAST version of response not supported.",200:"Trafficking error. The video player received an ad type that it was not expecting and/or cannot display.",201:"Video player expecting different linearity.",202:"Video player expecting different duration.",203:"Video player expecting different size.",300:"General wrapper error.",301:"Timeout of VAST URI provided in wrapper element, or of VAST URI provided in a subsequent wrapper element. This includes request errors such as invalid URI, unreachable or request timeout for URI, and security or other exceptions related to requesting a VAST URI.",302:"Wrapper limit reached, as defined by the video player. Too many wrapper responses have been received with no InLine response. This can be caused by a circular loop of daisy chaining (one network bouncing to another and another).",303:"No ads VAST response after one or more wrappers. This also includes the number of empty VAST responses from fallback.",400:"General linear error. The video player is unable to display the linear ad.",401:"File not found. Unable to find Linear/MediaFile from URI.",402:"Unable to download or timeout of MediaFile URI.",403:"Could not find a media file that is supported by this video player, based on the attributes of the MediaFile element.",405:"Problem displaying a media file.",406:"A mezzanine file was required, but not provided.",407:"The mezzanine file was downloaded for the first time, so the ad did not serve. This can occur when an ad insertion is missed because the creative is being transcoded. It continues to occur until the creative is available for insertion.",408:"The ad returned in the VAST response was rejected.",409:"The interactive creative defined in the InteractiveCreativeFile node was not executed.",410:"The code referenced in the Verification node was not executed.",500:"General NonLinearAds error.",501:"Unable to display non-linear ad because creative dimensions do not align with creative display area (in other words, the creative dimension was too large). This can occur if you use CSS styles to set width and height of the video ,content element. You should instead use the width and height HTML attributes.",502:"Unable to fetch NonLinearAds/NonLinear resource.",503:"Could not find NonLinearResource with supported type. This can occur when a creative size is larger than the player size.",600:"General CompanionAds error.",601:"Unable to display companion because creative dimensions do not fit within the companion display area (in other words, space was not available).",602:"Unable to display required companion.",603:"Unable to fetch CompanionAds/Companion resource.",604:"Could not find Companion resource with supported type.",900:"VAST 2 error. Even if you request VAST 3 or your DFP network default is VAST 3, this can occur if you have a VAST redirect that returns a VAST 2 response.",901:"General VPAID error",1005:"URI malformed."};function s2(t){if(!t)return!1;switch(t.toLocaleLowerCase()){case vt.Ek:case vt.Lk:case vt.Dk:return!0;default:return!1}}function n2(t){const i=Pd();return!!(s2(t)||t&&i&&(null==i?void 0:i.canPlayType)&&i.canPlayType(t))||(o2("Invalid or unsupported MediaFile Content delivery type, skipping mediafile"),!1)}function r2(t,i){for(const e of i){new i2(e).$qt(t)}}function o2(t){0}r(),r();var h2=class{get rKt(){return this.oKt}get hKt(){return this.aKt}constructor(t,i){this.oKt=t,this.aKt=i}},a2=class t{async uKt(i,e){if(Ie(i.sources,i.timeOffset)){const s=await t.cKt(i.sources.src,e),n=s&&s.documentElement;if(!n)throw new Ji(Oc.NETWORK,na.VAST_SCHEMA_VALIDATION_ERROR,"Ad source is not a valid XML document.");if(j1(n,"VMAP"))return await this.lKt(n,i,e);if(j1(n,"VAST")){const t=await this.dKt(n,e,!1);if(t){const e=new d2("",!0,!0,t);return[new c2("start",e,u2.fKt,"",[],!1,!0,i)]}return[]}throw new Ji(Oc.GENERAL,na.VAST_MALFORMED_RESPONSE,"Only VMAP and VAST files are allowed as ad source.")}if(A1(i.sources,i.timeOffset))return[new l2(String(i.timeOffset),i,e)];throw new Ji(Oc.GENERAL,na.VAST_MALFORMED_RESPONSE,"Something went wrong parsing the ad source; only VMAP and VAST files are allowed as ad source.")}async gKt(i,e,s,n){let r;void 0===n&&(n=[]);try{r=await t.cKt(i,e)}catch(t){throw r2(t instanceof Ji&&t.eKt===na.VAST_MALFORMED_RESPONSE?t2.Zqt:t2.lG,n),t}const o=r&&r.documentElement;if(o&&j1(o,"VAST"))return await this.dKt(o,e,s,n);o&&j1(o,"VMAP")&&ae("Received VMAP ad when expecting VAST. Please set the type of your ad source in the configuration, or make sure to not set a timeOffset for VMAP ad sources. VMAP ads have their own offsets included.")}async _Kt(t,i,e,s){var n;if(!(null==(n=t.sources)?void 0:n.src))throw new Ji(Oc.GENERAL,na.MALFORMED_URI,"Property src on adSource is missing.");const r=await this.gKt(t.sources.src,s,!1),o=new d2("",!0,!0,r),h=new c2(i,o,u2.fKt,"",[],!1,!0,t);return h.vKt=e,h}static async requestSuccessOnly(t,i){let e;try{e=await i.jS(t)}catch(t){throw new Ji(Oc.NETWORK,na.UNKNOWN_ERROR,"Something went wrong while requesting xml from server.",t)}if(!Xn(e))throw new Ji(Oc.NETWORK,na.UNKNOWN_ERROR,"Something went wrong while requesting xml from server.");return e}static async cKt(t,i){const e=new _e({Hu:t,CS:Me.KM,hN:Ml.GET}),s=await this.requestSuccessOnly(e,i);try{return function(t){return P1(t,"text/xml")}(await s.xS())}catch(t){throw new Ji(Oc.NETWORK,na.VAST_MALFORMED_RESPONSE,"The ad source could not be loaded.")}}async dKt(t,i,e,s){void 0===s&&(s=[]);const n=[],r=[],o=[];if(t&&j1(t,"VAST")){if(0!==Ei(t,"Ad").length){for(const e of Ei(t,"Ad"))try{const t=await this.wKt(e,i,s);0===t.Hj?n.push(t):r.push(t)}catch(t){o.push(t)}if(0===n.length&&0===r.length&&o.length>0)throw o[0];return 1===n.length&&0===r.length?n[0]:0===n.length&&0!==r.length?new b1(r):n.length>0||r.length>0?new b1(r.concat(n)):void 0}if(0!==Ei(t,"Error").length){for(const i of Ei(t,"Error")){o2(t2.Wqt.Rp);const t=i.textContent;t&&s.push(t),r2(t2.Wqt,s)}throw new Ji(Oc.GENERAL,na.VAST_MALFORMED_RESPONSE,"The Ad Server responded with a VAST Error")}if(e)throw r2(t2.Zqt,s),new Ji(Oc.PARSING,na.VAST_NO_ADS_AFTER_WRAPPER,"No VAST element found after wrapper.")}else if(e)throw r2(t2.Zqt,s),new Ji(Oc.PARSING,na.VAST_NO_ADS_AFTER_WRAPPER,"No VAST element found after wrapper.")}async lKt(t,i,e){const s=[],n=Ei(t,"AdBreak");for(const t of n)try{const n=await this.mKt(t,i,e);n&&s.push(n)}catch(t){me.cw(t)}return s}async wKt(i,e,s){const n=Qt(i,"id")||"";let r=Uh(Qt(i,"sequence"));r||(r=0);const o=Ei(i,"InLine"),h=Ei(i,"Wrapper");if(0!==h.length)return await this.pKt(h[0],n,r,e,s);if(0!==o.length)return t.AKt(o[0],n,r,s);throw new Ji(Oc.PARSING,na.VAST_SCHEMA_VALIDATION_ERROR,"An Ad tag without a Wrapper or inline element cannot be parsed")}static AKt(i,e,s,n){const r=Ei(i,"Error")[0];let o;r&&r.textContent&&(o=r.textContent,n.push(o));const h=Ei(i,"AdSystem")[0];let a,u="";h&&(u=h.textContent||u);const c=Ei(i,"AdTitle")[0];c&&(a=c.textContent||void 0);const l=[];for(const t of Ei(i,"Impression"))t.textContent&&l.push(t.textContent);const d=t.yKt(Ei(i,"Creatives")[0],u,n);return new T1(e,s,u,a,l,d,new i2(o))}async pKt(i,e,s,n,r){const o=Ei(i,"Error")[0];let h="";o&&o.textContent&&(h=o.textContent,r.push(h));const a=Ei(i,"AdSystem")[0];let u="";a&&(u=a.textContent||u);const c=[];for(const t of Ei(i,"Impression"))t.textContent&&c.push(t.textContent);const l=Ei(i,"VASTAdTagURI")[0];let d="";l&&l.textContent&&(d=l.textContent);const f=await this.gKt(d,n,!0,r),g=Ei(i,"Creatives")[0];let _=[];g&&(_=t.bKt(g,u,r));let v=Nt(Qt(i,"followAdditionalWrappers"));v||(v=!0);let w=Nt(Qt(i,"allowMultipleAds"));w||(w=!0);let m=Nt(Qt(i,"fallbackOnNoAd"));return m||(m=!1),new L1(e,s,c,f,v,_,w,m,new i2(h))}static bKt(i,e,s){const n=[];for(const r of Ei(i,"Creative")){let i=Qt(r,"id");i||(i="");let o=Uh(Qt(r,"sequence"));o||(o=0);let h=Qt(r,"adId");h||(h="");const a=Ei(r,"Linear")[0];let u;a&&(u=t.MKt(a,"wrapper",i,e,s));const c=Ei(r,"NonLinearAds")[0];let l,d;if(c)try{d=t.TKt(c,i,e),l=d}catch(t){}const f=Ei(r,"CompanionAds")[0];let g;f&&(g=t.SKt(f)),n.push(new x1(i,h,o,"",u,l,g,[]))}return n}static yKt(i,e,s){const n=[];for(const r of Ei(i,"Creative")){let i=Qt(r,"id");i||(i="");let o=Uh(Qt(r,"sequence"));o||(o=0);let h=Qt(r,"adId");h||(h="");let a=Qt(r,"apiFramework");a||(a="");const u=Ei(r,"Linear")[0];let c;if(u)try{c=t.MKt(u,"inline",i,e,s)}catch(t){}const l=Ei(r,"NonLinearAds")[0];let d,f;if(l)try{f=t.TKt(l,i,e),d=f}catch(t){}const g=Ei(r,"CompanionAds")[0];let _;g&&(_=t.SKt(g));const v=Ei(r,"UniversalAdId"),w=t.parseUniversalAdIds(v);n.push(new x1(i,h,o,a,c,d,_,w))}return n}static MKt(i,e,s,n,r){const o=Ei(i,"Duration")[0];let h=0;if(o)h=m1(o.textContent)||0;else if(!o&&"inline"===e)throw new Ji(Oc.PARSING,na.VAST_SCHEMA_VALIDATION_ERROR,"Missing duration element in inLine linear");const a=Qt(i,"skipoffset");let u=-1;if(a){let t=m1(a);if(void 0===t&&a.indexOf("%")>-1){const i=x.abs(Number(a.replace(/(?![0-9])./g,"")))/100;j(i)||(t=h*i)}void 0!==t&&(u=t)}const c=Ei(i,"MediaFiles")[0];let l=[];if(c&&(l=function(t,i){const e=[];for(const s of Ei(t,"MediaFile")){const t=Qt(s,"delivery"),n=Qt(s,"type");if(!n){o2();continue}if(!i(n))continue;let r=Uh(Qt(s,"width")),o=Uh(Qt(s,"height"));r||(o2(),r=0),o||(o2(),o=0);const h={delivery:t,type:n,width:r,height:o,contentURL:""+s.textContent};e.push(h)}return e}(c,n2)),"inline"===e&&(!c||0===l.length))throw r2(t2.Xqt,r),new Ji(Oc.PARSING,na.VAST_LINEAR_ASSET_MISMATCH,"Missing MediaFiles in linear element");const d=Ei(i,"TrackingEvents")[0];let f=[];d&&(f=t.NKt(d,Y1,"linear"));const g=Ei(i,"VideoClicks")[0],_=t.IKt(g);return new C1(h,l,f,_,u,s,n)}static IKt(i){if(!i)return new Uu("","",[],[]);const e=Ei(i,"ClickThrough")[0];let s,n="";e&&(s=e.textContent||void 0,n=Qt(e,"id")||"");const r=t.DKt(Ei(i,"ClickTracking")),o=t.DKt(Ei(i,"CustomClick"));return new Uu(s,n,r,o)}static DKt(t){const i=[];for(const e of t){const t=e.textContent;if(!t)continue;const s=Qt(e,"id")||"";i.push(new k1(s,t))}return i}static NKt(t,i,e){const s=[];for(const n of Ei(t,"Tracking")){const r=Qt(n,"event");if(!i(r)){o2();continue}let o="";"linear"===e&&(o=Qt(t,"offset")||"0");const h=n.textContent;h&&s.push(new X1(r,o,h))}return s}static TKt(i,e,s){const n=[];for(const r of Ei(i,"NonLinear")){const i=Ei(r,"NonLinearClickThrough")[0];let o;i&&(o=i.textContent||void 0);const h=t.DKt(Ei(r,"NonLinearClickTracking")),a=Ei(r,"StaticResource")[0];let u;if(a&&a.parentNode){const t=Qt(a,"creativeType"),i=a.textContent||"",e=Ei(a.parentNode,"NonLinearClickThrough")[0];let s="";e&&(s=e.textContent||""),u=new K1(i,t,s,"")}const c=t.EKt(r),l=t.parseHtmlResource(r);if(!u&&!c&&!l){o2();continue}const d=new Uu(o,"",h,[]);n.push(new N1(u,c,l,d,e,s))}if(0===n.length)throw new Ji(Oc.PARSING,na.VAST_SCHEMA_VALIDATION_ERROR,"nonLinearAds element found with no nonLinear elements");const r=Ei(i,"TrackingEvents")[0];let o=[];return r&&(o=t.NKt(r,G1,"nonlinear")),new S1(n,o)}static parseUniversalAdIds(t){const i=[];for(const r of t){var e;const t=null!=(e=Qt(r,"idRegistry"))?e:"";var s,n;const o=null!=(n=null!=(s=Qt(r,"idValue"))?s:r.textContent)?n:"";i.push(new h2(t,o))}return i}static SKt(i){let e=Qt(i,"requiredType");(function(t){switch(t){case"all":case"any":case"none":return!0;default:return!1}})(e)||(e=I1.HY);const s=[];for(const e of Ei(i,"Companion")){let i=Uh(Qt(e,"width")),n=Uh(Qt(e,"height")),r=Qt(e,"id"),o=Uh(Qt(e,"assetWidth")),h=Uh(Qt(e,"assetHeight")),a=Uh(Qt(e,"expandedWidth")),u=Uh(Qt(e,"rxpandedHeight")),c=Qt(e,"apiFramework"),l=Qt(e,"adSlotId"),d=Uh(Qt(e,"pxratio"));const f=Ei(e,"AltText")[0];let g=f?f.textContent:"";i||(o2(),i=0),n||(o2(),n=0),r||(r=""),o||(o=0),h||(h=0),a||(a=0),u||(u=0),c||(c=""),l||(l=""),d||(d=1),g||(g="");const _=t.kKt(e),v=t.EKt(e),w=t.parseHtmlResource(e),m=Ei(e,"TrackingEvents")[0];let p=[];m&&(p=t.NKt(m,Z1,"companion"));const A=Ei(e,"CompanionClickThrough")[0];let y;A&&(y=A.textContent||void 0);const b=t.DKt(Ei(e,"CompanionClickTracking"));(_||v||w)&&s.push(new E1(i,n,r,o,h,a,u,c,l,d,_,v,w,new Uu(y,"",b,[]),p,g))}return new D1(e,s)}static kKt(t){const i=Ei(t,"StaticResource")[0];let e;if(i&&i.parentNode){let t=Qt(i,"creativeType");t||(t="");const s=i.textContent,n=Ei(i.parentNode,"AltText")[0],r=Ei(i.parentNode,"CompanionClickThrough")[0];let o,h="";n&&(h=n.textContent||""),r&&(o=r.textContent||void 0),s&&(e=new K1(s,t,o,h))}return e}static EKt(t){const i=Ei(t,"IFrameResource")[0];let e;if(i){const t=i.textContent||"";e=new J1(t)}return e}static parseHtmlResource(t){const i=Ei(t,"HTMLResource")[0];let e;if(i){const t=i.textContent||"";e=new $1(t)}return e}async mKt(i,e,s){const n=Qt(i,"timeOffset")||"0",r=Qt(i,"breakType")||u2.QS;let o=Qt(i,"breakId"),h=Nt(Qt(i,"repeatAfter"));if(void 0===o&&(o=""),void 0===h&&(h=!1),!(void 0!==Lh.LKt(n)))throw new Ji(Oc.PARSING,na.VAST_SCHEMA_VALIDATION_ERROR,"Invalid TimeOffset type");const a=Ei(i,"AdSource")[0],u=Ei(i,"TrackingEvents")[0];let c=[];u&&(c=t.NKt(u,Q1,"vmap"));let l=Qt(a,"id");l||(l="");let d=Nt(Qt(a,"allowMultipleAds"));void 0===d&&(d=!0);let f=Nt(Qt(a,"followRedirects"));f||(f=!0);const g=Ei(a,"AdTagURI")[0];let _="";const v=Ei(a,"VASTAdData")[0];if(!g||!g.textContent){if(v){if(v.firstElementChild&&O1(v.firstElementChild,"VAST")){const t=await this.dKt(v.firstElementChild,s,!1);if(t){const i=new d2(l,d,f,t);return new c2(n,i,r,o,c,h,!1,e)}return}throw new Ji(Oc.PARSING,na.VAST_SCHEMA_VALIDATION_ERROR,"vmap:VASTAdData does not have a VAST-structure as a child element")}throw new Ji(Oc.PARSING,na.VAST_SCHEMA_VALIDATION_ERROR,"Invalid AdTagURI source or invalid VASTAdData in Adbreak Element")}try{_=g.textContent;const t=Wa(e);return t.sources.src=_,new l2(n,t,s)}catch(t){return}}},u2=function(t){return t.QS="",t.fKt="linear",t.xKt="nonlinear",t.CKt="display",t}({}),Lh=class{static jKt(t){switch(t){case"linear":case"nonlinear":case"display":return!0;default:return!1}}static OKt(t){}static RKt(t){if(void 0!==t)return"start"===t?0:"end"===t?-1:void 0}static PKt(t){const i=t.split(":");let e=0;return e+=3600*Number(i[0]),e+=60*Number(i[1]),e+=Number(i[2]),e}static zKt(t){if(t<=0)return"00:00:00.000";const i=x.floor(t),e=t-i;return this.BKt(i/3600,2)+":"+this.BKt(i/60%60,2)+":"+this.BKt(i%60,2)+"."+this.BKt(1e3*e,3)}static BKt(t,i){return("00"+x.floor(t)).slice(-i)}static UKt(t,i){const e=this.LKt(t);if(0===e)switch(t){case"start":return 0;case"end":return-1}else{if(2===e)return p1(t)*i;if(1===e)return m1(t);if(3===e)return this.RKt(t);if(4===e){const i=Number(t);if(!j(i)&&i>=-1)return i}}}static LKt(t){return"start"===t||"end"===t?0:void 0!==m1(t.toString())?1:void 0!==p1(t.toString())?2:void 0!==this.OKt(t.toString())?3:j(Number(t))?void 0:4}},c2=class{get QKt(){return this.FKt.integration}get YKt(){return this.VKt}get UPt(){return this.GKt}get uqt(){return this.cqt}set uqt(t){this.cqt=t}get WHt(){return this.kXt}get WKt(){return this.ZKt}get HKt(){return this.XKt}get hnt(){return this.FKt}get qKt(){return this.vKt.sd}get W(){return!0}$n(){return Promise.resolve()}get vKt(){return this.KKt}set vKt(t){this.KKt=t}constructor(t,i,e,s,n,r,o,h){this.cqt=-1,this.VKt=i,this.GKt=t,this.JKt=e,this.ZKt=s,this.XKt=r,this.kXt=n,this.$Kt=o,this.FKt=h}},l2=class{get QKt(){return this.eXt.QKt}get YKt(){return this.eXt.YKt}get UPt(){return this.eXt.UPt}get uqt(){return this.eXt.uqt}set uqt(t){this.eXt.uqt=t}get WHt(){return this.eXt.WHt}get WKt(){return this.eXt.WKt}get HKt(){return this.eXt.HKt}get hnt(){return this.eXt.hnt}get qKt(){return this.eXt.qKt}get W(){return this.xN}$n(){var t;return null!=(t=this.tJt)?t:this.tJt=this.ON()}async ON(){const t=new a2;this.eXt=await t._Kt(this.hnt,this.UPt,this.vKt,this.dU),this.xN=!0}get vKt(){return this.eXt.vKt}set vKt(t){this.eXt.vKt=t}constructor(t,i,e){this.xN=!1,this.dU=e,this.eXt=new c2(t,void 0,"","",[],!1,!1,i)}},d2=class{get o(){return this.Nb}get GXt(){return this.iJt}get eJt(){return this.sJt}get MHt(){return this.nJt}constructor(t,i,e,s){this.Nb=t,this.iJt=i,this.nJt=s,this.sJt=e}};function f2(t,i){let e;if(t.vastAdsRequest&&(e=function(t){if(t.adTagUrl)return t.adTagUrl;if(t.adsResponse)return B1(t.adsResponse);return}(t.vastAdsRequest)),!e){const i=function(t){const i=t.contentUrl||t.contentId;if(!i)return;const e=t.contentType||"video/mp4",s=hI(e)||dh(t.contentType)?"streaming":"progressive",n=void 0!==t.duration?"<Duration>"+Lh.zKt(t.duration)+"</Duration>":"",r=void 0!==t.whenSkippable&&t.whenSkippable>=0?' skipoffset="'+Lh.zKt(t.whenSkippable)+'"':"",o='<MediaFile delivery="'+s+'" type="'+e+'">'+z1(i)+"</MediaFile>",h=t.clickThroughUrl?"<VideoClicks><ClickThrough>"+z1(t.clickThroughUrl)+"</ClickThrough></VideoClicks>":"",a="<Linear"+r+">"+n+"<MediaFiles>"+o+"</MediaFiles>"+h+"</Linear>",u=t.title?"<AdTitle>"+z1(t.title)+"</AdTitle>":"";return'<VAST version="3.0"><Ad>'+u+"<InLine><Creatives><Creative>"+a+"</Creative></Creatives></InLine></Ad></VAST>"}(t);i&&(e=B1(i))}const s=t.customData;if(e){const n={integration:null==s?void 0:s.integration,sources:{src:e,type:"vast"},timeOffset:i};return n.integration&&"csai"!==n.integration&&"theo"!==n.integration||(n.skipOffset=t.whenSkippable),n}}var Ue=function(t){return t.rJt="error",t.oJt="sourceupdate",t}({}),g2=class extends Gs{constructor(t){super("error"),this.lt=t}},_2=class extends Gs{constructor(t,i){super("sourceupdate"),this.bt=t,this.wc=i}},v2=class extends Bo{get aC(){return this.hJt}aJt(t){this.uJt.aJt(t)}cJt(t){this.uJt.cJt(t)}lJt(t){this.uJt.lJt(t)}dJt(t){this.uJt.dJt(t)}fJt(t){this.hJt.addUpdateListener(t)}gJt(t){this.hJt.removeUpdateListener(t)}_Jt(){const t=new pa,i=new chrome.cast.media.GetStatusRequest;return this.hJt.getStatus(i,(()=>{t.eA({bt:this.eD(),wc:this.Ya()})}),(i=>t.sA(i))),t.rA}eD(){var t;return null==(t=this.hJt.customData)?void 0:t.currentSource}Ya(){var t;let i;if(null==(t=this.UCt.vJt())?void 0:t.version){var e;i=null==(e=this.hJt.customData)?void 0:e.sourceDescription}else{var s;const t=null==(s=f1(this.hJt))?void 0:s.customData;(function(t){return jl(t)&&t.theoplayer_version>=1&&Rt(t.streamStart)&&Rt(t.isLive)&&Rt(t.sourceDescription)})(t)&&(i=t.sourceDescription),i||(i=function(t){return{sources:[{src:t.contentId,type:t.contentType}],ads:w2(t)}}(this.hJt.media))}return i}eE(){const t=new chrome.cast.media.PauseRequest;this.hJt.pause(t,ul,this.wJt)}nE(){const t=new chrome.cast.media.StopRequest;this.hJt.stop(t,ul,this.wJt)}sE(){const t=new chrome.cast.media.PlayRequest;this.hJt.play(t,ul,this.wJt)}Gp(t,i){const e=new chrome.cast.media.SeekRequest;return e.currentTime=t,e.resumeState=i?chrome.cast.media.ResumeState.PLAYBACK_PAUSE:chrome.cast.media.ResumeState.PLAYBACK_START,new Promise(((t,i)=>{this.hJt.seek(e,t,(t=>{var e;i(new I(Ru(t.code),null!=(e=t.description)?e:void 0))}))}))}ED(t){this.uJt.Xit(g1,function(t){return{type:_1.bHt,properties:{playbackRate:t}}}(t)).catch(this.mJt)}pJt(t){const i=new chrome.cast.media.EditTracksInfoRequest(t);this.hJt.editTracksInfo(i,ul,this.wJt)}AJt(){return this.hJt.getEstimatedTime()}yJt(){return this.hJt.getEstimatedBreakClipTime()}bJt(){return this.hJt.getEstimatedBreakTime()}MJt(){this.uJt.Xit("urn:x-cast:com.google.cast.media",{type:v1.SKIP_AD,requestId:this.TJt++,mediaSessionId:this.hJt.mediaSessionId}).catch(this.mJt)}gn(){this.Bo()}constructor(t,i,e){super(i),this.TJt=0,this.mJt=t=>{this.yo(new g2(t))},this.wJt=t=>{var i;const e=new I(Ru(t.code),null!=(i=t.description)?i:void 0);this.mJt(e)},this.UCt=t,this.uJt=i,this.hJt=e}};function w2(t){return t.vmapAdsRequest&&t.vmapAdsRequest.adTagUrl?[{sources:{src:t.vmapAdsRequest.adTagUrl,type:"vmap"}}]:t.breaks&&t.breakClips?Qr(t.breaks,(i=>function(t,i){const e=[];if(t.isWatched)return e;for(const s of t.breakClipIds){const n=So(i,(t=>t.id===s));if(n){const i=f2(n,t.position);i&&e.push(i)}}return e}(i,t.breakClips))):[]}r();var m2=class{SJt(t,i){this.UCt.addMessageListener(t,i)}NJt(t,i){this.UCt.removeMessageListener(t,i)}Xit(t,i){return new Promise(((e,s)=>{this.UCt.sendMessage(t,i,e,(t=>{var i;s(new I(Ru(t.code),null!=(i=t.description)?i:void 0))}))}))}gn(){}constructor(t){this.UCt=t}};function p2(t){return"vmap"===t||"adrule"===t}function A2(t){if(t)return cs(t)&&""!==t?{src:To(t),type:void 0}:function(t){return jl(t)&&Boolean(t.src)}(t)&&""!==t.src?{src:To(t.src),type:y2(t.type)}:void 0}function y2(t){if(cs(t)){const i=t.toLowerCase();switch(i){case"vast":case"vmap":case"adrule":return i;default:return void ae("The ad source type provided in the configuration could not be recognized: '"+t+"'.")}}else t||ae("For better performance it is highly recommended to add the type to the configuration of your ad sources.")}function b2(t){if(void 0!==t&&""!==t&&("string"==typeof t||"number"==typeof t)){switch(t){case"start":case"00:00:00":case"00:00:00.000":case"0%":case"0":return 0;case"end":case"100%":return-1}if("string"==typeof t){if(function(t){return w1.test(t)}(t))return Lh.PKt(t);if(M2(t))return t}return Number(t)>=0?Number(t):void 0}}function M2(t){return new RegExp(/^\d{1,2}%$/).test(t)}function T2(t){const i=[],e=(t,s)=>{if(Kc(s))for(let i=0,n=s.length;i<n;i++){const n=jl(s[i])&&s[i]?String(i):"";e(t+"["+encodeURIComponent(n)+"]",s[i])}else if(jl(s))for(const i of _.keys(s))e(t+"["+encodeURIComponent(i)+"]",s[i]);else((t,e)=>{i.push(t+"="+encodeURIComponent(null!=e?e:""))})(t,String(s))};for(const i of _.keys(t))e(encodeURIComponent(i),t[i]);return i.join("&")}r(),r(),r();var S2=function(t){return t.AHt="receiver_info",t.$Rt="event",t.IJt="propertychange",t.yHt="trackevent",t}({}),N2=class{DJt(t){let i;try{i=JSON.parse(t)}catch(t){0}return i}aJt(t){this.EJt.push(t)}cJt(t){Ro(this.EJt,t)}lJt(t){this.kJt.push(t)}dJt(t){Ro(this.kJt,t)}LJt(t){this.xJt=t}Xit(t,i){return this.CJt.Xit(t,i)}gn(){this.CJt.NJt(g1,this.jJt),Or(this.kJt),Or(this.EJt),this.xJt=void 0}constructor(t){this.EJt=[],this.kJt=[],this.jJt=(t,i)=>{const e=this.DJt(i);if(e)if(e.type===S2.IJt)for(const t of this.EJt)for(const i of _.keys(e.properties))t(i,e.properties[i]);else if(e.type===S2.$Rt)for(const t of this.kJt)t(e.event);else e.type===S2.yHt&&this.xJt&&e.event.trackState&&this.xJt(e.event.trackId,e.event.trackState.targetQualityIds)},this.CJt=t,this.CJt.SJt(g1,this.jJt)}};r(),r();var I2=function(t){return t.OJt="medialoadedchange",t.Ep="volumechange",t.rJt="casterror",t.RJt="playererror",t.PJt="targetqualitychanged",t.zJt="receiverinfochanged",t}({}),D2=class extends Gs{constructor(){super("medialoadedchange")}},E2=class extends Gs{constructor(t,i){super("volumechange"),this.ZD=t,this.mD=i}},k2=class extends Gs{constructor(t){super("casterror"),this.lt=t}},L2=class extends Gs{constructor(t){super("playererror"),this.lt=t}},x2=class extends Gs{constructor(t,i){super("targetqualitychanged"),this.dC=t,this.BJt=i}},C2=class extends Gs{constructor(){super("receiverinfochanged")}},j2=class extends Bo{UJt(t,i,e){this.uJt.Xit(g1,function(t,i,e){return{type:_1.yHt,trackID:t,trackType:i,properties:{targetQuality:e}}}(t,i,e)).catch(this.mJt)}QJt(){this.CJt.SJt(g1,this.FJt),this.uJt.Xit(g1,{type:_1.AHt}).catch(ul)}vJt(){return this.YJt}VJt(){return this.UCt.getSessionObj()}GJt(t){!this.WJt&&t&&t.idleReason!==chrome.cast.media.IdleReason.FINISHED&&(this.WJt=new v2(this,this.uJt,t),this.ZJt(),this.yo(new D2),this.WJt.fJt(this.HJt))}XJt(){return this.WJt}async qJt(t){const i=function(t){const i=function(t,i,e,s){const[n,r]=function(t){for(const e of t.sources)if(gs(e)){const t=e.src;if(t){var i;const s=null!=(i=e.type)?i:aI(t);if(O2(s))return[t,s]}}var e,s;return[null!=(e=Wx(t))?e:"",null!=(s=Vx(t))?s:""]}(t),o=new chrome.cast.media.MediaInfo(n,r);return o.metadata=d1(t.metadata,t.poster),o.streamType=s,function(t,i,e){const s=[],n=[];let r,o=0,h=0;for(const t of i){const i=A2(t.sources);if(i)if(Ie(i,t.timeOffset))r=new chrome.cast.media.VastAdsRequest,r.adTagUrl=i.src;else if(A1(i,t.timeOffset)){var a;const r=null!=(a=t.timeOffset)?a:0,c=t.skipOffset;var u;const l=null!=(u=Lh.UKt(r,e))?u:0,d=void 0!==c?Lh.UKt(c,e):void 0,f=new chrome.cast.media.BreakClip("bc"+h++);f.vastAdsRequest=new chrome.cast.media.VastAdsRequest,f.vastAdsRequest.adTagUrl=i.src,f.whenSkippable=d,f.customData={integration:t.integration};let g=So(n,(t=>t.position===l));void 0===g&&(g=new chrome.cast.media.Break("b"+o++,[],l),n.push(g)),g.breakClipIds.push(f.id),s.push(f)}else 0;else 0}t.breakClips=s,t.breaks=n,t.vmapAdsRequest=r}(o,i,e),o}(t.KJt,t.Uc,t.ct,t.i0),e=new chrome.cast.media.LoadRequest(i);return e.autoplay=!0,e.currentTime=t.sD,e.customData=t.JJt,e}(t);let e;try{e=await this.UCt.loadMedia(i)}catch(t){e=t}if(e)throw new I(Ru(e))}yD(t){this.VJt().setReceiverMuted(t,ul,this.$Jt)}XD(t){this.VJt().setReceiverVolumeLevel(t,ul,this.$Jt)}t$t(){return this.VJt().receiver.friendlyName}gn(){this.Bo(),this.UCt.removeEventListener(cast.framework.SessionEventType.MEDIA_SESSION,this.i$t),this.VJt().removeUpdateListener(this.ZJt),this.CJt.NJt(g1,this.FJt),this.uJt.gn(),this.CJt.gn()}constructor(t){super(),this.YJt=void 0,this.mJt=t=>{this.yo(new k2(t))},this.e$t=(t,i)=>{"error"===t&&this.yo(new L2(i))},this.s$t=(t,i)=>{this.yo(new x2(t,i))},this.FJt=(t,i)=>{const e=JSON.parse(i);e.type===S2.AHt&&(this.YJt=e.info,this.yo(new C2))},this.ZJt=()=>{const t=this.VJt(),{level:i,muted:e}=t.receiver.volume;this.yo(new E2(null!=i?i:void 0,null!=e?e:void 0))},this.i$t=()=>this.GJt(this.UCt.getMediaSession()),this.HJt=t=>{var i;t||(null==(i=this.WJt)||i.gJt(this.HJt),this.WJt=void 0,this.yo(new D2))},this.$Jt=t=>{var i;const e=new I(Ru(t.code),null!=(i=t.description)?i:void 0);this.mJt(e)},this.UCt=t,this.UCt.addEventListener(cast.framework.SessionEventType.MEDIA_SESSION,this.i$t),this.CJt=new m2(t.getSessionObj()),this.uJt=new N2(this.CJt),this.uJt.aJt(this.e$t),this.uJt.LJt(this.s$t),this.VJt().addUpdateListener(this.ZJt),this.ZJt(),this.QJt();const i=this.UCt.getMediaSession();i&&this.GJt(i)}};function O2(t){switch(t){case vt.Ek:case vt.Dk:case vt.Lk:case vt.xk:return!0}return!1}var R2=function(t){return t.n$t="statechange",t}({}),P2=class extends Gs{constructor(t){super("statechange"),this.xft=t}};r(),r(),r(),r();var z2=class extends Bo{Tst(){return this.Dc}JI(){return ge.cR()}nD(){return this.nV+this.r$t}fst(){return this.nD()}tD(){}_d(){return this.$A}aD(){return this.M3}uD(){}SD(){return this.hV}o$t(){}DD(){return this.aV}ED(t){this.aV!==t&&(this.aV=t,this.yo(new rr(this.ta.sD,t)))}RD(){return $i.KR}LD(){return ge.cR()}zD(){return ge.cR()}UD(){return!1}HI(){return this.oP}VD(){return this.aP}QD(){return this.Ol}pJt(t){}WD(){return this.h$t}YD(){return this.a$t}sE(){this.hV=!1}eE(){this.hV=!0}Gp(t){this.nV=t-this.r$t}u$t(){return this.r$t}c$t(t){this.r$t=t}nnt(t){this.Dc.nnt(t)}nE(){}gn(){this.Bo(),this.oP.gn(),this.aP.gn(),this.Ol.gn(),this.Dc.gn()}constructor(t,i,e,s,n,r,o,h,a){super(),this.ta=t,this.r$t=0,this.oP=new $e,this.aP=new $e,this.Ol=new bn,this.Dc=new Lc,this.r$t=i,this.nV=e-i,this.$A=s,this.M3=n,this.hV=r,this.aV=o,this.h$t=h,this.a$t=a}};r(),r(),r(),r();var B2=function(t){return t.l$t="ccmodechangerequest",t.d$t="cctargetqualitychangerequest",t.f$t="cctrackchangerequest",t}({}),U2=class extends Gs{constructor(t,i,e){super(B2.l$t),this.track=t,this.trackId=i,this.mode=e}};r();var Q2=function(t){return t.KM="TEXT",t.tN="AUDIO",t.iN="VIDEO",t}({}),F2=function(t){return t.KB="SUBTITLES",t.JB="CAPTIONS",t.$B="DESCRIPTIONS",t.Fn="CHAPTERS",t.tU="METADATA",t}({});function Y2(t){return"AUDIO"===t.type}function V2(t){return"VIDEO"===t.type}function G2(t){return"TEXT"===t.type}var W2=class extends Bo{get ga(){return this.Za||(this.Za=Jr(this)),this.Za}get wh(){return this.NP}set wh(t){t!==this.NP&&(this.NP=t,this.yo(new kc(this)))}get q(){return this.Q3}get L(){return this.F3}get gN(){return this.Ho}set gN(t){const i=Ha(t);this.Ho!==i&&(this.Ho=i,this.g$t!==i&&this.yo(new U2(this,this.dk,i)),this.yo(new dc(this)))}get _$t(){return this.g$t}set _$t(t){const i=Ha(t),e=this.Ho!==i;this.Ho=i,this.g$t=i,e&&this.yo(new dc(this))}Y3(t){return So(this.F3.FE,(i=>i.o===t))}pk(t){this.gN=t}v$t(t){}gn(){}tr(){}constructor(t){super(),this.Za=void 0;const i=t.customData;this.dk=Number(t.trackId)||0,this.o=""+(i&&i.id||this.dk),this.NP=i&&i.label||t.name||"",this.gs=i&&i.language||t.language||"",this.wk=i&&i.inBandMetadataTrackDispatchType||"",this.zt=i&&i.kind||function(t){switch(t){case F2.KB:return vs.KB;case F2.JB:return vs.JB;case F2.$B:return vs.$B;case F2.Fn:return vs.Fn;case F2.tU:return vs.tU}return}(t.subtype)||"subtitles",this.OD=ju.NONE,this.Hw=i&&void 0!==i.type?function(t){return oI(t)?t:er.DEFAULT}(i.type):er.WEBVTT,this.U3=[],this.F3=new qR(this.U3),this.X3=[],this.Q3=new qR(this.X3),this.Ho=Ha(i&&i.mode||P.Ch),this.g$t=this.Ho}};r(),r();var Z2=class extends Gs{constructor(t,i){super(B2.f$t),this.trackId=t,this.enabled=i}};r();var H2=class extends Gs{constructor(t,i){super(B2.d$t),this.track=t,this.targetQuality=i}};r();var X2=function(t){return t.tN="audio",t.iN="video",t.KM="text",t}({}),q2=class extends Bo{get lk(){return this.Bdt}get _k(){return this.Pdt}set _k(t){this.w$t(t),this.yo(new H2(this,t))}get gk(){return this.AP}get wh(){return this.NP}set wh(t){t!==this.NP&&(this.NP=t,this.yo(new kc(this)))}get Rt(){return this.Le}set Rt(t){this.Le!==t&&(this.Le=t,this.m$t!==t&&this.yo(new Z2(this.dk,t)),this.yo(new dc(this)))}get p$t(){return this.m$t}set p$t(t){const i=this.Le!==t;this.Le=t,this.m$t=t,i&&this.yo(new dc(this))}get ga(){return this.Za||(this.Za=Zt(this)),this.Za}get gN(){return this.Rt?"enabled":"disabled"}DP(t){this.Rt=t}v$t(t){if(t.targetQualityIds){const i=[];for(const e of this.AP.FE)t.targetQualityIds.indexOf(e.o)>-1&&i.push(e);const e=i.length?i:void 0;this.w$t(e)}}w$t(t){(function(t,i){return!t&&i||t&&!i||t&&i&&!Ev(t,i)})(this.Pdt,t)&&(this.Pdt=t&&this.AP.bP(t)?t:void 0,this.yo(new rY(this.Pdt,this)))}unload(){for(const t of this.AP.FE)t.fn("update",this._Rt);this.AP.tr()}constructor(t){super(),this.Bdt=void 0,this.AP=new nc,this.Pdt=void 0,this.Za=void 0,this._Rt=()=>this.yo(new kc(this));const i=t.customData;if(this.dk=Number(t.trackId)||0,this.o=""+(i&&i.id||this.dk),this.NP=i&&i.label||t.name||"",this.gs=i&&i.language||t.language||"",this.zt=i&&i.kind||"main",this.Le=i&&i.enabled,this.m$t=this.Le,Y2(t)){this.s4=X2.tN;const i=t.customData&&t.customData.qualities;if(i)for(const t of i){const i=new zG(t.id,t.bandwidth,t.codecs,t.name,"",t.audioSamplingRate);i.yn("update",this._Rt),this.AP.yP(i)}}else{this.s4=X2.iN;const i=t.customData&&t.customData.qualities;if(i)for(const t of i){const i=new PG(t.id,t.bandwidth,t.codecs,t.name,"",t.frameRate,t.width,t.height);i.yn("update",this._Rt),this.AP.yP(i)}}}};r();var K2=function(t){return t.A$t="legacy",t.y$t="caf",t}({});r(),r(),r(),r();var J2=class{Pc(){if(this.b$t>=this.Dc.length)return;const t=this.Dc[this.b$t];return this.b$t+=1,t}lt(){return this.Pc()}constructor(t){this.b$t=0,this.Dc=t}};function $2(t){var i,e,s;return null!=(s=null==(e=t.YKt)||null==(i=e.MHt)?void 0:i.THt())?s:[]}var t4=class{},i4=class{Yst(){var t;return null!=(t=this.Za)?t:this.Za=function(t){return{get ads(){return t.Uc.map((t=>t.Yst()))},get integration(){return t.QKt},get maxDuration(){return t.M$t},get maxRemainingDuration(){return t.T$t},get timeOffset(){return t.UPt},get customData(){return t.JJt}}}(this)}constructor(){this.Za=void 0}},e4=class{get S$t(){return this.N$t}get t(){return this.ta}constructor(t,i){this.N$t=t,this.ta=i}},s4=class extends i4{get vKt(){return this.KKt}get Uc(){const t=[];for(const s of this.KKt.I$t)for(const n of $2(s)){var i,e;const r=null!=(e=null==(i=n.QHt)?void 0:i.dXt)?e:[];if(n.BHt&&t.push(this.D$t(n.BHt,r,n.YHt,s.hnt)),n.FHt)for(const i of n.FHt.VHt)t.push(this.E$t(i,r,n.FHt,n.YHt,s.hnt))}return t}D$t(t,i,e,s){const n=So(this.k$t,(i=>i.BHt===t));if(void 0!==n)return n;const r=new h4(t,i,this,this.L$t,e,s);return this.k$t.push(r),r}E$t(t,i,e,s,n){const r=So(this.x$t,(i=>i.FHt===t));if(void 0!==r)return r;const o=new o4(t,i,e,this,this.L$t,s,n);return this.x$t.push(o),o}get QKt(){return Mi.CSAI}get UPt(){const t=this.KKt.sd;return t>=0?t:this.L$t.t._d()}get T$t(){let t=0;for(const i of this.KKt.I$t)for(const e of $2(i))e.BHt&&!e.BHt.lqt&&(t+=e.BHt.ct);return this.L$t&&this.L$t.S$t&&(t+=this.L$t.S$t.ct-this.L$t.S$t.sD),t}get M$t(){let t=0;for(const i of this.KKt.I$t)for(const e of $2(i))e.BHt&&(t+=e.BHt.ct);return t}get JJt(){}constructor(t,i){super(),this.k$t=[],this.x$t=[],this.KKt=t,this.L$t=i}},n4={height:0,width:0,clickThrough:"",contentHTML:"",resourceURI:"",altText:""},r4=class extends t4{get Yl(){return this.eXt}get hnt(){return this.FKt}get YHt(){return this.nqt}C$t(){return this.j$t}O$t(){this.j$t=!0}R$t(t){return il({},n4,{resourceURI:t.Fqt||""})}P$t(t){return il({},n4,{contentHTML:t.Fqt.trim(),type:"HTMLResource"})}z$t(t){var i,e;return il({},n4,{clickThrough:(null==(i=t.CXt)?void 0:i.trim())||"",resourceURI:(null==(e=t.Fqt)?void 0:e.trim())||"",altText:t.LXt||"",type:"StaticResource"})}B$t(t,i,e){if(!t||!i)return;const s="<img "+(e?"title='"+e+"' ":"")+"src='"+encodeURI(t)+"'>";return"<a href='"+encodeURI(i)+"' target='_blank' rel='noopener'>"+s+"</a>"}QHt(t){return t?t.map((t=>{let i;const e={adSlotId:t.TXt||"",height:t.Ti||0,width:t.ji||0};if(t.HHt){var s;const e=this.z$t(t.HHt),n=e.clickThrough||(null==(s=t.DXt)?void 0:s.CXt);i=il({},e,{contentHTML:this.B$t(e.resourceURI,n,e.altText)||""})}else if(t.JHt)i=this.P$t(t.JHt);else{if(!t.qHt)return;i=this.R$t(t.qHt)}return Gr(i,e)})).filter((t=>void 0!==t)):[]}U$t(){return this.Q$t.xHt}constructor(t,i,e,s,n,r){super(),this.j$t=!1,this.Q$t=t,this.fXt=i,this.eXt=e,this.L$t=s,this.nqt=n,this.FKt=r}},o4=class extends r4{get FHt(){return this.Q$t}get UHt(){return this.F$t}ma(){const t=this.eXt,i={companions:this.QHt(this.fXt),type:"nonlinear",id:this.Q$t.sXt,skipOffset:this.uqt,integration:this.FKt.integration,adSystem:this.Q$t.xHt,get adBreak(){return t.Yst()},creativeId:this.Q$t.sXt,universalAdIds:this.nqt.map((t=>({adIdRegistry:t.rKt,adIdValue:t.hKt})))};return this.Q$t.qHt?Gr(this.R$t(this.Q$t.qHt),i):this.Q$t.JHt?Gr(this.P$t(this.Q$t.JHt),i):this.Q$t.HHt?Gr(this.z$t(this.Q$t.HHt),i):i}Yst(){var t;return null!=(t=this.Za)?t:this.Za=this.ma()}Y$t(){var t,i;return null!=(i=null==(t=this.Q$t.HHt)?void 0:t.Fqt)?i:""}V$t(){var t,i,e;return null!=(e=null==(i=this.Q$t)||null==(t=i.HHt)?void 0:t.Vqt)?e:""}get uqt(){const t=this.Q$t.Yl;return t&&t.hnt&&void 0!==t.hnt.skipOffset?Lh.UKt(t.hnt.skipOffset,this.L$t.S$t.ct):(null==(i=this.Q$t.Yl)?void 0:i.uqt)||-1;var i}constructor(t,i,e,s,n,r,o){super(t,i,s,n,r,o),this.F$t=e}},h4=class extends r4{get BHt(){return this.Q$t}ma(){var t;const i=this.eXt;return{companions:this.QHt(this.fXt),duration:this.Q$t.ct,id:this.Q$t.sXt,mediaFiles:this.Q$t.oqt,skipOffset:this.uqt,type:"linear",integration:this.FKt.integration,adSystem:this.Q$t.xHt,width:void 0,height:void 0,get adBreak(){return i.Yst()},clickThrough:null==(t=this.Q$t.qXt)?void 0:t.CXt,creativeId:this.Q$t.sXt,universalAdIds:this.nqt.map((t=>({adIdRegistry:t.rKt,adIdValue:t.hKt})))}}Yst(){var t;return null!=(t=this.Za)?t:this.Za=this.ma()}Y$t(){return this.Q$t.oqt.length>0?this.Q$t.oqt[0].contentURL:""}V$t(){return this.Q$t.oqt.length>0?this.Q$t.oqt[0].type:""}get uqt(){const t=this.Q$t.Yl;return t&&t.hnt&&void 0!==t.hnt.skipOffset?Lh.UKt(t.hnt.skipOffset,this.L$t.S$t.ct):this.Q$t.uqt||-1}constructor(t,i,e,s,n,r){super(t,i,e,s,n,r)}};function a4(t){return t instanceof h4}r();var al=function(t){return t.G$t="csai",t.W$t="google-ima",t.Xh="google-dai",t.Z$t="freewheel",t.H$t="mediatailor",t.rg="chromecast",t.kst="theoads",t}({});r();var vr=class extends xa{ma(){return new u4(this.Kst.Yst())}constructor(t){super("X$t",t)}},u4=class extends va{constructor(t){super("updatead",t)}};r();var c4=class extends xa{ma(){return new l4(this.Kst.Yst())}constructor(t){super("q$t",t)}},l4=class extends va{constructor(t){super("adloaded",t)}},d4=class extends G{get $c(){return void 0!==this.K$t}get Fst(){return this.Q$t?[this.Q$t]:[]}get Vst(){var t;return null!=(t=this.K$t)?t:null}get Gst(){return Qr(this.J$t,(t=>{const i=t.Uc;if(t===this.K$t&&void 0!==this.Q$t){const t=i.indexOf(this.Q$t);if(t>=0)return i.slice(t+1)}return t.$$t()?[]:i}))}get Wst(){return this.J$t.filter((t=>t===this.K$t||!t.$$t()))}get ga(){var t;return null!=(t=this.Za)?t:this.Za=Rc(this)}o6(t,i,e){throw new w("Scheduling ads while casting is not supported.")}Ax(){this.hJt.MJt()}rnt(t){var i;null==(i=this.t0t)||i.rnt(t)}Zst(t,i){var e;null==(e=this.t0t)||e.Zst(t,i)}i0t(t){return So(this.J$t,(i=>i.o===t))}e0t(t,i,e,s){const n=this.J$t,r=[];let o=!1;for(const n of t){let t=this.i0t(n.id);void 0===t&&(t=new f4(n),s.push(new Qo(t))),!Rt(t.s0t)&&Rt(e)&&(t.s0t=this.n0t(t.r0t,e));const h=t.Uc;t.Yn(n,i,e,s);const a=t.Uc;for(const t of a)fh(h,t)||(s.push(new Jh(t)),o=!0);r.push(t)}this.J$t=r,o&&s.push(new cl);for(const t of n)fh(r,t)||s.push(new io(t))}o0t(t,i){const e=this.K$t,s=this.Q$t;let n,r;if(t){var o;const{breakId:i,breakClipId:e}=t;n=i?this.i0t(i):void 0,r=e?null==(o=this.K$t)?void 0:o.h0t(e):void 0}if(this.K$t=n,this.Q$t=r,n!==e&&(void 0!==e&&(e.a0t=void 0,i.push(new ir(e))),void 0!==n&&(n.a0t=this.hJt,i.push(new Va(n)))),r!==s){const t=this.ta.nD();void 0!==s&&i.push(new ic(s,t)),void 0!==r&&i.push(new Nc(r,t))}}n0t(t,i){if(!i||!i.breaks)return;const e=So(i.breaks,(i=>i.id===t.id));return e}nnt(t){const i=[];for(const t of this.J$t){let e=t.Uc;if(t===this.K$t&&void 0!==this.Q$t){const t=e.indexOf(this.Q$t);t>=0&&(e=e.slice(t))}else if(t.$$t())continue;for(const t of e){const e=t.u0t();e&&i.push(e)}}for(const e of i)t.o6(e,Pa.Ust,!1)}gn(){return this.Bo(),this.hJt.gJt(this.Yr),void 0!==this.K$t&&(this.K$t.a0t=void 0,this.K$t=void 0),this.Q$t=void 0,Or(this.J$t),Promise.resolve(void 0)}constructor(t,i,e){super(),this.J$t=[],this.K$t=void 0,this.Q$t=void 0,this.Za=void 0,this.Yr=t=>{var i;if(!t)return;const e=this.hJt.aC,{breakStatus:s}=e,{breakClips:n,breaks:r}=e.media,o=null==(i=f1(e))?void 0:i.media,h=[];r&&n&&this.e0t(r,n,o,h),this.o0t(s,h);for(const t of h)this.yo(t)},this.ta=t,this.hJt=i,this.t0t=e,this.hJt.fJt(this.Yr)}},f4=class extends i4{get r0t(){return this.c0t}get o(){return this.c0t.id}get Uc(){return this.Dc}get QKt(){return al.rg}get M$t(){let t=this.c0t.duration;return void 0===t&&this.Dc.length>0&&(t=xr(this.Dc,(t=>t.ct)),j(t)&&(t=void 0)),t}get T$t(){const t=this.M$t;if(void 0!==t&&void 0!==this.a0t){const i=this.a0t.bJt();if(void 0!==i)return x.max(0,t-i)}return t}get UPt(){return this.c0t.position}get JJt(){}$$t(){return this.c0t.isWatched}h0t(t){return So(this.Dc,(i=>i.o===t))}Yn(t,i,e,s){const n=[];for(let r=0;r<t.breakClipIds.length;r++){const o=t.breakClipIds[r],h=So(i,(t=>t.id===o));if(void 0===h)continue;const a=r<this.Dc.length?this.Dc[r]:new g4(h,this);!Rt(a.l0t)&&Rt(e)&&(a.l0t=this.d0t(e,o,r)),a.Yn(h,s),n.push(a)}this.c0t=t,this.Dc=n}d0t(t,i,e){if(!t||!t.breakClips)return;let s=So(t.breakClips,(t=>t.id===i));if(!s){var n;const i=null==(n=this.s0t)?void 0:n.breakClipIds[e];i&&(s=So(t.breakClips,(t=>t.id===i)))}return s}constructor(t){super(),this.s0t=void 0,this.Dc=[],this.a0t=void 0,this.c0t=t}},g4=class{get f0t(){return this.g0t}get o(){return this.g0t.id}get dXt(){return[]}get ct(){var t;return null!=(t=this.g0t.duration)?t:NaN}get oqt(){const t=this.Y$t();return t?[{contentURL:t,delivery:"progressive",type:this.V$t(),width:0,height:0}]:[]}get uqt(){const{whenSkippable:t}=this.g0t;return void 0===t?void 0:t<0?-1:t}get CXt(){return this.g0t.clickThroughUrl}get sXt(){}get YHt(){return[]}get JJt(){}U$t(){return""}V$t(){var t;return null!=(t=this.g0t.contentType)?t:""}Y$t(){var t,i;return null!=(i=null!=(t=this.g0t.contentUrl)?t:this.g0t.contentId)?i:""}Yn(t,i){const e=this.o,s=this.ct,n=this.g0t.contentUrl;this.g0t=t;const r=this.o,o=this.ct,h=this.g0t.contentUrl;e===r&&(s===o||j(s)&&j(o))&&n===h||i.push(new vr(this)),j(s)&&!j(o)&&i.push(new c4(this))}u0t(){let t;return this.l0t&&(t=f2(this.l0t,this.Yl.UPt)),t||(t=f2(this.g0t,this.Yl.UPt)),t}Yst(){var t;return null!=(t=this.Za)?t:this.Za=this.ma()}ma(){const t=this;return{get companions(){return t.dXt},get duration(){return t.ct},get id(){return t.o},get mediaFiles(){return t.oqt},get skipOffset(){return t.uqt},type:"linear",integration:al.rg,get adSystem(){return t.U$t()},width:void 0,height:void 0,get adBreak(){return t.Yl.Yst()},get resourceURI(){return t.Y$t()},get clickThrough(){return t.CXt},get creativeId(){return t.sXt},get customData(){return t.JJt},get isSlate(){return!1},get universalAdIds(){return t.YHt.map((t=>({adIdRegistry:t.rKt,adIdValue:t.hKt})))}}}constructor(t,i){this.Za=void 0,this.g0t=t,this.Yl=i}};r();var _4=class extends Bo{get _0t(){return this.v0t}set _0t(t){this.v0t!==t&&(this.v0t=t,this.Us.href=null!=t?t:"",t?this.oU():this.hU())}oU(){if(this.Le)return;this.Le=!0,this.Us.style.display="",this.w0t||(this.UN.style.cursor="pointer");const t=this.w0t?this.Us:this.UN;me.Ys.Je?(t.addEventListener("touchstart",this.m0t),t.addEventListener("touchend",this.p0t)):(t.addEventListener("mousedown",this.m0t),t.addEventListener("click",this.p0t))}hU(){if(!this.Le)return;this.Le=!1,this.Us.style.display="none",this.w0t||(this.UN.style.cursor="");const t=this.w0t?this.Us:this.UN;me.Ys.Je?(t.removeEventListener("touchstart",this.m0t),t.removeEventListener("touchend",this.p0t)):(t.removeEventListener("mousedown",this.m0t),t.removeEventListener("click",this.p0t))}Mm(){this.Bo(),this.hU(),this.UN.removeChild(this.Us)}constructor(t,i=me.Ys.Je){super(),this.Le=!1,this.m0t=t=>{t.stopPropagation(),this.yo(new Gs("clickstart"))},this.p0t=t=>{t.stopPropagation(),this.yo(new Gs("click"))},this.UN=t,this.w0t=i,this.Us=h.createElement("a"),this.Us.style.position="absolute",this.Us.style.zIndex="11",this.Us.target="Uu",this.w0t?(gu(this.Us,"learn more"),this.Us.className="theoplayer-ad-overlay-component theoplayer-ad-touch-clickthrough",this.Us.setAttribute("rel","noopener")):Tu(this.Us),this.UN.appendChild(this.Us),this.hU()}};r(),r();var v4=[1200,992,768,576],w4={1200:"theo-size-xl",992:"theo-size-l",768:"theo-size-m",576:"theo-size-s"},m4=class{A0t(t){let i=p4(t);i!==this.y0t&&(Dn(this.Us,i),Td(this.Us,this.y0t),this.y0t=i)}gn(){this.Xu.fn(Ah.pn,this.mn)}constructor(t,i){this.Us=t,this.Xu=i,this.mn=t=>{this.A0t(t.width)},this.y0t=p4(i.Su),Dn(this.Us,this.y0t),i.yn(Ah.pn,this.mn)}};function p4(t){for(let i of v4)if(t>i)return w4[i];return"theo-size-xs"}var A4=class extends Bo{get ke(){return this.Us}get gN(){return this.Ho}get dS(){return this.Zl.textContent||""}set dS(t){gu(this.Zl,t)}b0t(t){"countdown"!==this.Ho&&(this.Ho="countdown",this.M0t(),this.ke.classList.remove("theoplayer-ad-skip-button"),this.ke.classList.add("theoplayer-ad-skip-countdown")),this.dS="You can skip in "+x.round(t)+" seconds"}T0t(){"skip"!==this.Ho&&(this.Ho="skip",this.dS="Skip Ad",this.S0t(),this.ke.classList.remove("theoplayer-ad-skip-countdown"),this.ke.classList.add("theoplayer-ad-skip-button"))}S0t(){this.ke.addEventListener("mouseup",this.N0t),this.ke.addEventListener("touchend",this.N0t)}M0t(){this.ke.removeEventListener("mouseup",this.N0t),this.ke.removeEventListener("touchend",this.N0t)}gn(){this.Bo(),this.M0t(),this.Gu.gn(),Xa(this.Us),Xa(this.Zl),this.I0t&&Xa(this.I0t)}constructor(t,i){super(),this.N0t=()=>{this.yo(new Gs("Ax"))},this.Us=h.createElement("div"),this.ke.className="theoplayer-ad-overlay-component theoplayer-ad-skip theoplayer-ad-skip-countdown",this.ke.style.position="absolute",this.Zl=h.createElement("span"),this.ke.appendChild(this.Zl),i&&(this.I0t=h.createElement("div"),this.I0t.className="theoplayer-ad-skip-poster",this.I0t.style.backgroundImage='url("'+dv(i)+'")',this.ke.appendChild(this.I0t)),this.Ho="countdown",this.Gu=new m4(this.ke,t)}},y4=class extends Bo{D0t(){const t=this.hJt.aC.activeTrackIds;if(t){if(this.E0t()){const i=this.aP.FE.map((t=>t.o)),e=this.oP.FE.map((t=>t.o));fh(i.concat(e),"0")&&t.push(0)}N4(t,this.oP),N4(t,this.aP),function(t,i){const e=!1;for(const e of i.FE)e._$t=fh(t,e.dk)?P.Jn:P.Ch}(t,this.Ol)}}k0t(){var t;const i=null==(t=this.hJt.aC.media)?void 0:t.tracks;if(!i)return;const e=i.filter(Y2),s=i.filter(V2),n=i.filter(G2);if(this.E0t()&&0===s.length&&0!==this.WD()){const t=this.L0t();s.push(t)}if(this.E0t()&&0===e.length){const t=this.x0t();e.push(t)}T4(this.oP,e.map((t=>t.trackId))),T4(this.aP,s.map((t=>t.trackId))),T4(this.Ol,n.map((t=>t.trackId))),S4(e,this.oP),S4(s,this.aP),function(t,i){let e=!1;for(const s of t){let t=M4(i,s.trackId);t||(t=new W2(s),i.tt(t),e=!0)}}(n,this.Ol)}C0t(){this.hV||(this.j0t=v(this.ld,250))}O0t(){m(this.j0t)}R0t(){this.O0t(),this.C0t()}P0t(){var t;const i=this.hJt.aC,e=i.media;var s;const n=null!=(s=null==e?void 0:e.duration)?s:NaN,r=(null==e?void 0:e.streamType)===chrome.cast.media.StreamType.LIVE||n<0,o=r?1/0:n;this.$A=o,this.z0t();const h=i.getEstimatedLiveSeekableRange(),a=null==(t=i.customData)?void 0:t.buffers;if(Rt(h)){const{start:t,end:i,isMovingWindow:e=r,isLiveDone:s=!1}=h;this.DBt(t,i,e,s)}else if(Rt(a)){const[t,i]=a.seekable;this.DBt(t,i,r,!1)}else r?this.DBt(void 0,void 0,!0,!1):this.DBt(0,o,!1,!1)}B0t(){const t=this.hJt.aC,i=function(t){return void 0!==t&&t.playerState===chrome.cast.media.PlayerState.PAUSED}(t)||b4(t);this.U0t=i,this.hV!==i&&(this.hV=i,this.hV?this.yo(new Ia(this.nD())):this.yo(new us(this.nD())))}th(){const{playbackRate:t}=this.hJt.aC;this.Q0t!==t&&(this.Q0t=void 0,this.aV!==t&&(this.aV=t,this.yo(new rr(this.nD(),t))))}F0t(){const{playerState:t}=this.hJt.aC;let i;switch(t){case chrome.cast.media.PlayerState.IDLE:i=$i.KR;break;case chrome.cast.media.PlayerState.BUFFERING:i=$i.Xn;break;case chrome.cast.media.PlayerState.PAUSED:case chrome.cast.media.PlayerState.PLAYING:i=$i.$R}this.N3(i),this.Y0t()}DBt(t,i,e,s){Rt(t)&&Rt(i)?this.e3=new MR(t,i,e,e&&!s):this.e3=void 0}V0t(t,i){this.a$t=null!=i?i:this.a$t,this.h$t=null!=t?t:this.h$t,this.yo(new lr)}We(t){this.G0t!==t?(this.rV=!0,this.yo(new ll(this.nD()))):this.G0t=void 0}mY(){if(!this.rV)return;this.rV=!1;const t=this.nD();this.yo(new H(t,this.tD())),this.yo(new ns(t))}Sh(){this.M3=!0,this.aD()&&this.yo(new ce(this.nD()))}z0t(){const t=this.nIt,i=this._d();t===i||j(t)&&j(i)||(this.nIt=i,this.yo(new In(i)))}W0t(){const t=this.nD();this.rV||this.Z0t===t||(this.Z0t=t,this.yo(new H(t,this.tD())))}o$t(){this.hV&&(this.hV=!1,this.yo(new us(this.nD())),this.N3($i.KR))}Tst(){return this.Dc}JI(){return this.TIt.Vp(this.r$t)}nD(){if(this.Dc.$c){const t=this.hJt.yJt();if(void 0!==t)return t}return this.fst()}fst(){return void 0!==this.H0t?this.r$t+this.H0t:this.M3?this._d():this.r$t+this.hJt.AJt()}tD(){if(this.X0t)return new Date(this.fst()+this.X0t)}_d(){if(this.Dc.$c){var t;const i=null==(t=this.Dc.Fst[0])?void 0:t.ct;if(void 0!==i&&!j(i))return i}return this.r$t+this.$A}uD(){return this.FF}aD(){return!this.Dc.$c&&this.M3}SD(){return this.hV}DD(){return this.aV}ED(t){this.aV!==t&&(this.Q0t=this.aV,this.aV=t,this.yo(new rr(this.nD(),t)),this.hJt.ED(t))}RD(){return this.T3}LD(){return this.Dc.$c?ge.uR(0,this.nD()):this.Fo.Vp(this.r$t)}zD(){var t,i;if(this.Dc.$c)return ge.cR();let e=null!=(i=null==(t=this.e3)?void 0:t.g4().Vp(this.r$t))?i:ge.cR();if(e.U>0){const t=e.jn(e.U-1);e=e.WO(ge.uR(t,this.nD()))}return e}UD(){return this.rV}HI(){return this.oP}VD(){return this.aP}QD(){return this.Ol}L0t(){return{customData:{activeQuality:{averageBandwidth:0,bandwidth:0,codecs:"",frameRate:0,height:this.YD(),id:"0",name:"",width:this.WD()},enabled:!0,id:"0",kind:"main",label:"",language:"",qualities:[],uid:0},language:"",name:"",trackContentId:"",trackContentType:"",trackId:0,type:Q2.iN}}x0t(){return{customData:{activeQuality:{averageBandwidth:0,bandwidth:0,codecs:"",id:"0",name:"",audioSamplingRate:0},qualities:[],enabled:!0,id:"0",kind:"main",label:"",language:"",uid:0},language:"",name:"",trackContentId:"",trackContentType:"",trackId:0,type:Q2.tN}}E0t(){var t,i;return!(void 0!==(null==(t=this.UCt.vJt())?void 0:t.version))||(null==(i=this.UCt.vJt())?void 0:i.sdkType)===K2.y$t}pJt(t){this.E0t()&&Ro(t,0),this.hJt.pJt(t)}WD(){return this.h$t}YD(){return this.a$t}sE(){this.hV&&(this.hV=!1,this.U0t=!1,this.yo(new us(this.nD()))),this.hJt.sE()}eE(){this.hV||(this.hV=!0,this.U0t=!0,this.yo(new Ia(this.nD()))),this.hJt.eE()}Gp(t){if(this.Dc.$c)return;let i=x.max(0,t-this.r$t);i=x.round(1e6*i)/1e6;const e=this.H0t;this.H0t=i,this.U0t=this.SD(),this.G0t=i,this.rV=!0,this.yo(new ll(this.nD())),void 0===e&&(this.E0t()?this.q0t(i):this.X9(i))}X9(t){this.hJt.Gp(t,this.U0t).then(this.K0t(t)).catch(this.mJt)}K0t(t){return()=>{void 0!==this.H0t&&(this.H0t===t?this.H0t=void 0:this.X9(this.H0t))}}N3(t){this.T3!==t&&(this.T3=t,this.yo(new hr(this.nD(),t))),void 0===this.H0t&&this.rV&&t>=$i.JR&&this.mY(),this.Y0t()}Y0t(){if(this.hV)return void(this.J0t=!1);const t=this.T3>=$i.$R;this.J0t!==t&&(this.J0t=t,t?this.yo(new fo(this.nD())):this.yo(new Oa(this.nD())))}$0t(){this.t1t||(this.t1t=h.createElement("div"),this.ta.ke.appendChild(this.t1t),this.t1t.className="theoplayer-ad-linear theoplayer-chromecast-ad",this.t1t.style.zIndex="10",Tu(this.t1t)),this.t1t.style.display=this.Dc.$c?"":"none"}i1t(){var t;const i=null==(t=this.Dc.Fst[0])?void 0:t.CXt;i&&!this.e1t?(this.e1t=new _4(this.t1t,!0),this.e1t._0t=i,this.e1t.yn("clickstart",this.s1t)):this.e1t&&(this.e1t._0t=i)}n1t(){var t;const i=null==(t=this.Dc.Fst[0])?void 0:t.uqt;if(void 0===i||i<0)return void(this.r1t&&(this.r1t.gn(),this.r1t=void 0));if(!this.r1t){var e;const t=null==(e=this.ta.Ca)?void 0:e.mi;this.r1t=new A4(this.ta.Ou,t),this.t1t.appendChild(this.r1t.ke),this.r1t.yn("Ax",this.o1t)}const s=this.hJt.yJt();void 0!==s&&(s<i?this.r1t.b0t(i-s):this.r1t.T0t())}u$t(){return this.r$t}c$t(t){this.r$t=t}nnt(t){}nE(){this.hJt.nE()}gn(){this.Bo(),this.Dc.gn(),this.e1t&&(this.e1t.Mm(),this.e1t=void 0),this.r1t&&(this.r1t.gn(),this.r1t=void 0),this.t1t&&(Xa(this.t1t),this.t1t=void 0),this.hJt.dJt(this.T4),this.hJt.cJt(this.h1t),this.hJt.gJt(this.HJt),this.hJt.fn(Ue.rJt,this.a1t),this.hJt.gn()}constructor(t,i,e,s,n){super(),this.TIt=ge.cR(),this.X0t=void 0,this.M3=!1,this.FF=void 0,this.Q0t=void 0,this.T3=$i.KR,this.J0t=!1,this.Fo=ge.cR(),this.e3=void 0,this.rV=!1,this.oP=new $e,this.aP=new $e,this.Ol=new bn,this.nIt=NaN,this.H0t=void 0,this.U0t=!1,this.Z0t=NaN,this.G0t=void 0,this.j0t=0,this.h1t=(t,i)=>{switch(t){case"buffered":this.TIt=new ge(i),this.yo(new mO(this.nD()));break;case"currentProgramDateTime":this.X0t=new Date(i).getTime()-this.nD();break;case"played":this.Fo=new ge(i);break;case"seekable":this.P0t();break;case"videoHeight":this.V0t(void 0,i);break;case"videoWidth":this.V0t(i,void 0)}},this.T4=t=>{switch(t.type){case Qi.bp:this.We(t.currentTime);break;case Qi.yp:this.mY();break;case Qi.pp:this.yo(new MY(t.representation,t.previousRepresentation));break;case Qi.Mp:this.yo(new XF(t.segmentStartTime,t.error,t.trackType,t.track,t.quality,t.retryCount));break;case Qi.$m:this.yo(new eZ(t.currentTime,t.initDataType,t.initData));break;case Qi.Zm:this.yo(new Qs(new ti(Do.CONTENT_PROTECTION_ERROR,t.error,void 0,t.licenseAcquisitionURL,t.status,t.statusText,t.licenseAcquisitionMessage,t.systemCode)));break;case Qi.Hm:this.yo(new xc)}},this.HJt=t=>{this.P0t(),this.B0t(),this.th(),this.F0t(),this.W0t(),this.R0t(),this.k0t(),this.D0t(),this.$0t(),this.i1t(),this.n1t(),t||b4(this.hJt.aC)&&this.Sh()},this.ld=()=>{this.W0t(),this.n1t()},this.a1t=t=>{this.yo(t)},this.q0t=kn((t=>this.X9(t)),50),this.mJt=t=>{this.H0t=void 0,this.yo(new g2(t))},this.s1t=()=>{this.eE()},this.o1t=()=>{this.Dc.Ax()},this.ta=t,this.UCt=e,this.hJt=s,this.Dc=new d4(t,s,i.Uc),this.r$t=n.u$t(),this.$A=n._d()-this.r$t,this.hV=n.SD(),this.aV=n.DD(),this.h$t=n.WD(),this.a$t=n.YD(),this.hJt.lJt(this.T4),this.hJt.aJt(this.h1t),this.hJt.fJt(this.HJt),this.hJt.yn(Ue.rJt,this.a1t),this.hJt._Jt().then((t=>{this.yo(new _2(t.bt,t.wc))}),this.mJt)}};function b4(t){return void 0!==t&&t.playerState===chrome.cast.media.PlayerState.IDLE&&t.idleReason===chrome.cast.media.IdleReason.FINISHED}function M4(t,i){for(const e of t.FE)if(e.dk===i)return e}function T4(t,i){let e=!1;for(let s=0;s<t.U;s++){const n=t.VE(s);-1===i.indexOf(n.dk)&&(t.it(n),s--,e=!0)}return e}function S4(t,i){let e=!1;for(const s of t){let t=M4(i,s.trackId);t||(t=new q2(s),i.tt(t),e=!0)}return e}function N4(t,i){for(const e of i.FE)e.p$t=fh(t,e.dk);return!1}r();var I4=class{Ant(t){return Promise.resolve("all")}iE(){}gn(){}};r();function D4(t,i,e){if(j(t))return e;if(t===1/0){if("live"===e||"dvr"===e)return e;if(i&&i.length>0){if(i.end(i.length-1)-i.start(0)>60)return"dvr"}return"live"}return"vod"}var E4=[Qi.tp,Qi.Km,Qi.mp,Qi.Ap,Qi.vp,Qi.so,Qi.wp,Qi.Dp,Qi.bp,Qi.yp,fa.xO,fa.CO,Qi.pp,Qi.Mp,Qi.$m,Qi.Zm,Qi.Hm],k4=class extends Nu{sV(t){if(!t)return;V(this.XY&&MS(this.XY),t&&MS(t))||(this.XY=t,this.yo(new jI(t)))}u1t(t){if(!t)return;const i=Hh(t,this.ta.md);V(this.kc&&MS(this.kc),i&&MS(i))||(this.Ea.c$t(0),this.kc=i,this.yo(new YU(i)),this.Ea.o$t())}c1t(t){for(const i of this.rt.FE)if(i.dk===t)return i;for(const i of this.ht.FE)if(i.dk===t)return i}get xft(){return this.Ea}set xft(t){const i=this.Ea;i&&(i.fn(Ue.rJt,this.a1t),i.fn(Ue.oJt,this.l1t),i.fn(E4,this.Ds),i.fn(fa.CE,this.OU),t.c$t(i.u$t()),i.nnt(t.Tst())),this.Ea=t,this.oP.WE=t.HI(),this.aP.WE=t.VD(),this.Ol.WE=t.QD(),this.Dc.WE=t.Tst(),i&&i.gn(),t.yn(Ue.rJt,this.a1t),t.yn(Ue.oJt,this.l1t),t.yn(E4,this.Ds),t.yn(fa.CE,this.OU)}get Yh(){return this.Kh}get Uc(){return this.Tst()}Tst(){return this.Dc}Sst(){return this.hst}HI(){return this.oP}JI(){return this.Ea.JI().ws()}get d1t(){return this.f1t||this.kc}set d1t(t){this.f1t=t}async $n(t,i){var e;t&&await this.qJt(t,null!=(e=t.ads)?e:[],t.streamType,NaN,0,null!=i?i:0)}async g1t(t){var i;const e=null!=(i=this.f1t)?i:this.kc;if(!e)return;var s;const n=this.f1t?null!=(s=this.f1t.ads)?s:[]:this.dnt(),r=this.ta._d(),o=this.ta.zD(),h=D4(r,o,e.streamType),a=o.length>0?o.start(0):0,u=null!=t?t:this.fst();await this.qJt(e,n,h,r,a,u)}dnt(){const t=new Lc;return this.Dc.nnt(t),t.dnt()}tD(){return this.Ea.tD()}eD(){return this.XY}get sD(){return this.nD()}set sD(t){this.rD(t)}nD(){return this.Ea.nD()}fst(){return this.Ea.fst()}rD(t,i){this._1t||(this.UCt.XJt()||this._1t||!this.kc?this.Ea.Gp(t):this.$n(this.kc,t))}_d(){return this.Ea._d()}aD(){return this.Ea.aD()}uD(){return this.FF}lD(){return this.YF}fD(){return this.hP}wD(){return this.ta.vD}pD(){return this.oV}yD(t){this.oV=t,this.yo(new B(this.sD,this.ZD)),this.UCt.yD(t)}SD(){return this.Ea.SD()}DD(){return this.Ea.DD()}ED(t){this.Ea.ED(t)}LD(){return this.Ea.LD().ws()}CD(){return Ac.HR}jD(t){}RD(){return this.Ea.RD()}zD(){return this.Ea.zD().ws()}UD(){return this.Ea.UD()}Ya(){return this.kc}async wa(t){this.kc=t,await this.$n(t),this.f1t=void 0,this.Ea.o$t()}QD(){return this.Ol}YD(){return this.Ea.YD()}WD(){return this.Ea.WD()}VD(){return this.aP}HD(){return this.Ay}XD(t){this.Ay=t,this.yo(new B(this.sD,this.ZD)),this.UCt.XD(t)}get JD(){return!1}set JD(t){}tE(){}$D(){return this.Zo}iE(){}sE(){this.UCt.XJt()||this._1t||!this.kc?this.Ea.sE():this.$n(this.kc)}eE(){this.Ea.eE()}ur(){this.Kh=!0}ar(){this.XY=void 0,this.Kh=!1}ge(){}be(){}async qJt(t,i,e,s,n,r){this._1t=!0,this.v1t(),this.Ea.c$t(n);const o="live"===e||"dvr"===e,h=function(t,i,e){return{theoplayer_version:1,streamStart:t,isLive:i,sourceDescription:e}}(n,o,t),a={KJt:t,Uc:i,sD:x.max(0,r-n),ct:s,i0:o?chrome.cast.media.StreamType.LIVE:chrome.cast.media.StreamType.BUFFERED,JJt:h};try{await this.UCt.qJt(a)}catch(t){this.w1t(t)}finally{this._1t=!1}}m1t(){this.p1t(this.oP),this.p1t(this.aP),this.A1t(this.Ol)}p1t(t){for(const i of t.FE)this.y1t(i);t.yn(di.gE,(t=>{this.y1t(t.Lt),this.b1t()}))}A1t(t){for(const i of t.FE)this.M1t(i);t.yn(di.gE,(t=>{this.M1t(t.Lt),this.b1t()}))}y1t(t){t.yn(B2.d$t,this.vmt),t.yn(B2.f$t,this.T1t),t.yn(B2.f$t,this.D0t)}M1t(t){t.yn(B2.l$t,this.S1t),t.yn(B2.l$t,this.D0t)}N1t(){const t=[];for(const i of this.rt.FE)i.Rt&&t.push(i.dk);for(const i of this.ht.FE)i.Rt&&t.push(i.dk);for(const i of this.nt.FE)i.gN===P.Jn&&t.push(i.dk);this.Ea.pJt(t)}I1t(t,i,e){this.D1t=t,this.E1t=i,this.k1t=e}L1t(t){var i,e;if(!t)return!1;return(null!=(e=null==(i=this.UCt.vJt())?void 0:i.version)?e:-1)>=2?t.map((t=>t.o)):[t[0].o]}x1t(t){this.C1t=t}aE(){}uE(){}dE(t){throw new g("Can't add a track while casting.")}async nE(){this.Ea.nE(),this.v1t()}v1t(){this.NU=$i.KR,this.AU=!1,this.MU=!1,this.FF=void 0,this.YF=void 0}async gn(){this.v1t(),this.Bo(),this.xft=this.j1t(),this.UCt.fn(I2.rJt,this.a1t),this.UCt.fn(I2.RJt,this.hOt),this.UCt.fn(I2.Ep,this.O1t),this.UCt.fn(I2.OJt,this.R1t),this.UCt.fn(I2.PJt,this.P1t),this.UCt.gn()}j1t(){return new z2(this,this.Ea.u$t(),this.Ea.nD(),this.Ea._d(),this.Ea.aD(),this.Ea.SD(),this.Ea.DD(),this.Ea.WD(),this.Ea.YD())}constructor(t,i){super(t,!0),this.Kh=!1,this.C1t=ul,this.NU=$i.KR,this.AU=!1,this.MU=!1,this._1t=!1,this.f1t=void 0,this.FF=void 0,this.YF=void 0,this.oP=new Dh,this.aP=new Dh,this.Ol=new ci,this.Zo=new sx,this.hP=new OS,this.hst=new I4,this.D1t=void 0,this.E1t=void 0,this.k1t=void 0,this.O1t=t=>{var i,e;(Rt(t.ZD)&&!Xs(t.ZD,this.Ay,1e-5)||Rt(t.mD)&&t.mD!==this.oV)&&(this.Ay=null!=(i=t.ZD)?i:this.Ay,this.oV=null!=(e=t.mD)?e:this.oV,this.yo(new B(this.sD,this.Ay)))},this.R1t=()=>{const t=this.UCt.XJt();this.xft=t?new y4(this,this.ta,this.UCt,t,this.Ea):this.j1t()},this.l1t=t=>{this.sV(t.bt),this.u1t(t.wc)},this.P1t=t=>{const i=this.c1t(t.dC);if(!i)return void 0;const e={targetQualityIds:t.BJt};i.v$t(e)},this.a1t=t=>{this.w1t(t.lt)},this.w1t=t=>{this.C1t&&this.C1t(t)},this.hOt=t=>{this.FF=t.lt,this.YF=FI(this.FF),this.yo(new As(this.YF))},this.T1t=t=>{if(!t.enabled)return;const i=this.rt.FE.some((i=>i.dk===t.trackId))?this.rt:this.ht;for(const e of i.FE)e.Rt&&e.dk!==t.trackId&&(e.Rt=!1)},this.S1t=t=>{if(t.mode===P.Jn)for(const i of this.nt.FE)i.gN===P.Jn&&i.dk!==t.trackId&&QE(i.zt,t.track.zt)&&(i.gN=P.Ch)},this.D0t=kn((()=>{this.N1t()}),50),this.b1t=()=>{const t=[];var i;const e=null!=(i=So(this.ht.FE,(t=>U4(t,this.D1t))))?i:So(this.ht.FE,(t=>t.Rt));var s;e&&t.push(e.dk);const n=null!=(s=So(this.nt.FE,(t=>U4(t,this.E1t))))?s:So(this.nt.FE,(t=>t.gN===P.Jn));var r;n&&t.push(n.dk);const o=null!=(r=So(this.rt.FE,(t=>U4(t,this.k1t))))?r:So(this.rt.FE,(t=>t.Rt));o&&t.push(o.dk),0!==t.length&&this.Ea.pJt(t)},this.vmt=t=>{const i=this.L1t(t.targetQuality),e=t.track;this.UCt.UJt(e.dk,e.s4,i)},this.OU=t=>{this.yo(t);const i=t.readyState;!this.AU&&this.NU===$i.KR&&i>=$i.Xn&&(this.AU=!0,this.yo(new TI(t.currentTime))),!this.MU&&this.NU<=$i.Xn&&i>=$i.JR&&(this.MU=!0,this.yo(new SI(t.currentTime))),this.NU<=$i.JR&&i>=$i.$R&&this.yo(new or(t.currentTime)),this.NU<=$i.$R&&i===$i.tP&&this.yo(new NI(t.currentTime)),this.NU=i},this.Ay=this.ta.ZD,this.oV=this.ta.mD,this.UCt=i,this.UCt.yn(I2.rJt,this.a1t),this.UCt.yn(I2.RJt,this.hOt),this.UCt.yn(I2.Ep,this.O1t),this.UCt.yn(I2.OJt,this.R1t),this.UCt.yn(I2.PJt,this.P1t),this.Dc=new Qc(this),this.XY=this.ta.bt,this.kc=this.ta.Ya(),this.xft=new z2(this,0,this.ta.fst(),this.ta._d(),this.ta.hD,this.ta.TD,this.ta.ND,this.ta.GD,this.ta.FD),this.m1t()}};r();var L4=class extends ps{ma(){return new x4(this.lt)}constructor(t){super("error"),this.lt=t}},x4=class extends Gs{constructor(t){super("error"),this.error=t}};r();var C4=class extends Gs{constructor(t){super("statechange"),this.state=t}};function j4(t,i){let e;return{get casting(){return t.eK},get error(){return t.lt},get receiverName(){return t.z1t},get state(){return t.xft},start(){t.Cn()},stop(){t.nE()},join(){t.B1t()},leave(){t.U1t()},set connectionCallback(t){null==i||i.Q1t(t)},get connectionCallback(){return null==i?void 0:i.F1t()},get source(){return e||t.wc},set source(i){e=i,t.wc=i},addEventListener(i,e){const s=yu(i,To);t.yn(s,e)},removeEventListener(i,e){const s=yu(i,To);t.fn(s,e)}}}r();var O4=class extends G{get eK(){return this.xft===un.CONNECTING||this.xft===un.CONNECTED}get lt(){return this.FF}get ga(){return this.Za||(this.Za=j4(this,this.Y1t)),this.Za}get z1t(){var t;return null==(t=this.Y1t.V1t())?void 0:t.t$t()}get wc(){return this.ta?this.ta.d1t:this.f1t}set wc(t){this.f1t=t?Hh(t,this.G1t.md):void 0,this.ta&&(this.ta.d1t=this.f1t,this.f1t&&this.ta.$n(this.f1t))}get xft(){return this.Ea}set xft(t){let i=t;this.W1t||i!==un.CONNECTING&&i!==un.CONNECTED||(i=un.AVAILABLE),this.Ea!==i&&(this.Ea=i,this.yo(new C4(this.xft)))}async Z1t(){if(!this.H1t)throw new g("Chromecast must be initialized before starting a session");await this.H1t,this.Y1t.V1t()||await this.Y1t.X1t()}async Cn(){this.W1t=!0;try{if(this.xft=un.CONNECTING,await this.Z1t(),await this.q1t(),this.ta){const t=this.G1t.Ya(),i=this.Y1t.K1t(t);this.ta.d1t=i?Hh(i,this.G1t.md):this.f1t,this.ta.g1t()}this.xft=un.CONNECTED,await this.G1t.nE()}catch(t){this.J1t(!1).catch(ul),this.xft=un.AVAILABLE,F(t)||this.j6(t)}}async B1t(){this.W1t=!0;try{if(this.xft=un.CONNECTING,await this.Z1t(),await this.q1t(),this.ta){const t=this.G1t.Ya(),i=this.Y1t.$1t(t);i&&(this.ta.d1t=Hh(i,this.G1t.md))}this.xft=un.CONNECTED,await this.G1t.nE()}catch(t){await this.J1t(!0).catch(ul),this.xft=un.AVAILABLE,F(t)||this.j6(t)}}async t2t(){this.Y1t.V1t()&&await this.Cn()}async q1t(){null!=this.ta||(this.ta=this.i2t()),this.FF=void 0,this.G1t.eE(),await this.lq.e2t(this.ta)}i2t(){const t=new k4(this.G1t,this.Y1t.V1t());return t.x1t(this.j6),t}s2t(){this.ta&&(this.ta.gn(),this.ta=void 0)}async J1t(t){if(this.W1t=!1,!this.ta)return;const i=this.ta.Yh,e=this.ta.Ya(),s=this.ta.fst();try{if(i){let i;i=t?this.Y1t.n2t(e):this.Y1t.r2t(e),null!=i||(i=e),await this.lq.o2t(i,i===e),this.G1t.rD(s),this.G1t.sE()}}finally{this.s2t()}}U1t(){this.eK&&(this.Y1t.h2t(!1),this.J1t(!0).catch(this.j6))}nE(){this.eK&&(this.Y1t.h2t(!0),this.J1t(!1).catch(this.j6))}gn(){this.gU.Dm(),this.Y1t.fn(R2.n$t,this.a2t),this.Bo(),this.s2t()}constructor(t,i,e,s){super(),this.FF=void 0,this.Za=void 0,this.ta=void 0,this.Ea=un.UNAVAILABLE,this.W1t=!1,this.gU=new Ai,this.u2t=()=>{this.Y1t.yn(R2.n$t,this.a2t),this.xft=this.Y1t.c2t()},this.a2t=t=>{const i=t.xft;this.xft=i,i!==un.UNAVAILABLE&&i!==un.AVAILABLE||this.J1t(!1).catch(this.j6)},this.f1t=void 0,this.j6=t=>{F(t)||t instanceof I&&(this.FF=t,this.yo(new L4(t).ga))},this.lq=t,this.G1t=i,this.Y1t=s,this.gM=e.chromecast,this.H1t=Te(this.Y1t.Aq(this.gM,this.gU.wm),this.gU),this.H1t.then(this.u2t).catch(this.j6)}};r();var R4=class extends G{get eK(){return!1}get lt(){}get z1t(){}get wc(){}set wc(t){}get xft(){return un.UNAVAILABLE}get ga(){return this.Za||(this.Za=j4(this)),this.Za}B1t(){me.lw("Joining a Chromecast session is not possible when JoinStrategy is configured to disabled")}U1t(){me.lw("Leaving a Chromecast session is not possible when JoinStrategy is configured to disabled")}Cn(){me.lw("Starting a Chromecast session is not possible when JoinStrategy is configured to disabled")}nE(){me.lw("Stopping a Chromecast session is not possible when JoinStrategy is configured to disabled")}t2t(){return Promise.resolve()}gn(){}};function P4(t){return{bt:t.bt,sD:t.nD(),ct:t._d(),hD:t.hD,lt:t.uD(),cD:t.lD(),mD:t.mD,TD:t.TD,ND:t.ND,OD:t.OD,BD:t.BD,FD:t.FD,GD:t.GD,ZD:t.ZD}}r(),r();var z4=class extends Nu{Tst(){return this.Dc}HI(){return this.oP}get dD(){return this.fD()}fD(){return this.hP}_a(){return this.rP}QD(){return this.Ol}VD(){return this.aP}uP(t){if(this.ta===t)return;let i;this.KY(),this.Dst&&(i=P4(this));const e=this.eD(),s=this.$D(),n=this.tE();if(this.ta=t,this.oP.WE=t.ht,this.aP.WE=t.rt,this.Ol.WE=t.nt,this.rP.WE=t.aY,this.hP.WE=t.dD,this.Dc.WE=t.Uc,void 0!==i){ph(this,i,P4(this))}const r=this.eD();r!==e&&this.yo(new jI(r)),this.$D()!==s&&this.yo(new ar),this.tE()!==n&&this.yo(new OI),this.qY()}async gn(t){await super.gn(t),this.rP.gn(t),this.oP.gn(t),this.aP.gn(t),this.Ol.gn(t),this.hP.gn(),await this.Dc.gn()}constructor(t,i){super(t,i),this.oP=new Dh,this.aP=new Dh,this.Ol=new ci,this.hP=new ah,this.rP=new Th(t.aY),this.oP.WE=t.ht,this.aP.WE=t.rt,this.Ol.WE=t.nt,this.hP.WE=t.dD,this.Dc=new Qc(this),this.Dc.WE=t.Uc}},B4=class extends z4{Ya(){const t=super.Ya();return!t&&this.l2t.eK&&this.l2t.wc?this.l2t.wc:t}wa(t,i){return this.Go.Wo((i=>(this.d2t=new Ai,this.d2t.Em(i),Te(super.wa(t,this.d2t.wm),this.d2t))),i)}sE(){super.sE(),this.md.cast.strategy!==US.AUTO||this.l2t.eK||this.l2t.t2t()}e2t(t){return this.Go.Wo((i=>this.f2t(t,i)))}o2t(t,i){return void 0===t&&(t=void 0),void 0===i&&(i=!1),this.Go.Wo((e=>this.g2t(t,i,e)))}f2t(t,i){re(i),this._2t.Uc&&this._2t.Uc.nnt(t.Uc),this.v2t(),this.w2t=So(this._2t.ht.FE,(t=>t.Rt)),this.wNt=So(this._2t.nt.FE,(t=>"showing"===t.gN)),this.m2t=So(this._2t.rt.FE,(t=>t.Rt)),this.p2t=t,this.p2t.I1t(this.w2t,this.wNt,this.m2t),this.uP(t),this.p2t.ur()}async g2t(t,i,e){re(e);const s=this.p2t;if(void 0!==s)try{if(t){await this._2t.nE(),re(e);const s=Hh(t,this._2t.md);i&&(s.ads=void 0),this.d2t=new Ai,this.d2t.Em(e),await Te(this._2t.wa(s,this.d2t.wm),this.d2t)}i&&this._2t.Uc&&s.Uc.nnt(this._2t.Uc)}catch(t){bu(t)}finally{s.ar(),this.uP(this._2t),this.w2t=So(this.p2t.ht.FE,(t=>t.Rt)),this.wNt=So(this.p2t.nt.FE,(t=>"showing"===t.gN)),this.m2t=So(this.p2t.rt.FE,(t=>t.Rt)),this._2t.ht.yn(di.gE,this.A2t),this._2t.nt.yn(di.gE,this.y2t),this._2t.rt.yn(di.gE,this.b2t),this._2t.yn(fa.LO,this.v2t),this.p2t===s&&(this.p2t=void 0)}}nE(){var t;return this.w2t=void 0,this.wNt=void 0,this.m2t=void 0,this.v2t(),null==(t=this.d2t)||t.Dm(),this.Go.Wo((()=>super.nE()))}async gn(){var t;null==(t=this.d2t)||t.Dm(),this.l2t.gn(),await this.o2t(),await this.Go.gn(),await super.gn()}constructor(t,i){super(t),this.Go=new Ku,this.w2t=void 0,this.wNt=void 0,this.m2t=void 0,this.A2t=t=>{const i=t.Lt;U4(this.w2t,i)&&(i.Rt=!0)},this.y2t=t=>{const i=t.Lt;U4(this.wNt,i)&&(i.gN=P.Jn)},this.b2t=t=>{const i=t.Lt;U4(this.m2t,i)&&(i.Rt=!0)},this.v2t=()=>{this._2t.ht.fn(di.gE,this.A2t),this._2t.nt.fn(di.gE,this.y2t),this._2t.rt.fn(di.gE,this.b2t)},this._2t=t,this.md.cast.strategy!==US.DISABLED?this.l2t=new O4(this,t,this.md.cast,i):this.l2t=new R4,this.TW.uK(this.l2t)}};function U4(t,i){return void 0!==t&&void 0!==i&&(t.gs===i.gs&&i.wh===t.wh)}r();var Q4=new class extends Bo{Q1t(t){this.M2t=t}F1t(){return this.M2t}V1t(){return this.T2t}c2t(){switch(this.S2t.getCastState()){case cast.framework.CastState.CONNECTED:return un.CONNECTED;case cast.framework.CastState.CONNECTING:return un.CONNECTING;case cast.framework.CastState.NOT_CONNECTED:return un.AVAILABLE;case cast.framework.CastState.NO_DEVICES_AVAILABLE:default:return un.UNAVAILABLE}}async Aq(t,i){await h1(i),this.S2t=cast.framework.CastContext.getInstance(),this.S2t.addEventListener(cast.framework.CastContextEventType.CAST_STATE_CHANGED,this.cK),this.S2t.setOptions({receiverApplicationId:t.appID,autoJoinPolicy:chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED})}async X1t(){try{const t=await this.S2t.requestSession();if(t)throw t}catch(t){throw new I(Ru(t))}}K1t(t){var i;return null==(i=this.M2t)?void 0:i.onStart(t)}r2t(t){var i;return null==(i=this.M2t)?void 0:i.onStop(t)}$1t(t){var i;return null==(i=this.M2t)?void 0:i.onJoin(t)}n2t(t){var i;return null==(i=this.M2t)?void 0:i.onLeave(t)}h2t(t){this.S2t.endCurrentSession(t)}constructor(...t){super(...t),this.T2t=void 0,this.M2t=void 0,this.cK=()=>{const t=this.c2t();this.T2t=t===un.CONNECTED?new j2(this.S2t.getCurrentSession()):void 0,this.yo(new P2(t))}}},F4=new class{get ga(){return this.Za||(this.Za=function(t){return{initialize(i){const e=t.Aq(QS(i));return e.catch(ul),e},startSession(){const i=t.X1t();return i.catch(ul),i},endSession(){t.N2t()}}}(this)),this.Za}async Aq(t){this.H1t||(this.H1t=this.I2t(t)),await this.H1t}async I2t(t){await this.Y1t.Aq(t)}async X1t(){if(!this.H1t)throw new g("Chromecast must be initialized before starting a session");await this.H1t,this.Y1t.V1t()||await this.Y1t.X1t()}D2t(){this.Y1t.h2t(!1)}N2t(){this.Y1t.h2t(!0)}constructor(t){this.H1t=void 0,this.Za=void 0,this.Y1t=t}}(Q4),Y4={get chromecast(){return F4.ga}};ya((t=>new B4(t,Q4)),hh.Lst),r(),r(),r(),r(),r(),r(),r();var V4=class{E2t(t,i,e,s){t.bV.forEach((t=>{if(!this.k2t(t.L2t)){const n=t.x2t(i,e,s);n&&this.C2t(n)}}))}k2t(t){return this.j2t.get(t)}C2t(t){this.j2t.set(t.O2t,t),this.R2t.set(t.O2t,t.P2t),this.z2t.iu(t.B2t)}rnt(t){this.R2t.has(t.O2t)||(this.R2t.set(t.O2t,t),this.z2t.iu(t.B2t))}U2t(t){return this.R2t.forEach(t)}Q2t(t){return this.j2t.forEach(t)}F2t(t){let i=!1;return this.j2t.forEach((e=>{i=e.F2t(t)||i})),i}async gn(){const t=[];this.j2t.forEach((i=>t.push(i.gn()))),this.R2t.forEach((i=>t.push(i.gn()))),await Promise.all(t),this.j2t.clear(),this.R2t.clear()}constructor(t){this.z2t=t,this.j2t=Ge(),this.R2t=Ge()}};r();var bh=class t extends ps{ma(){return new G4(this.tKt,this.Rp,this.oA,this.wc)}static Y2t(i){return new t(Oc.GENERAL,i.Rp,i.eKt)}static V2t(i,e){return new t(i.tKt,i.message,i.eKt,e)}constructor(t,i,e,s){super("$Ct"),this.tKt=t,this.Rp=i,this.oA=e,this.wc=s}},G4=class extends Gs{constructor(t,i,e,s){super("aderror"),this.problemType=t,this.message=i,this.errorCode=e,this.source=s}},W4=class extends gj{get G2t(){return this.W2t}get $c(){let t=!1;return this.Z2t((i=>{t=t||i.H2t})),t}get Fst(){const t=[];return this.Z2t((i=>{const e=i.Fst;e.length&&t.push(...e)})),t}get Vst(){let t=null;return this.Z2t((i=>{null!=t||(t=i.Vst)})),t}get Gst(){const t=[];return this.Z2t((i=>{t.push(...i.Gst)})),t}get Wst(){const t=[];return this.Z2t((i=>{t.push(...i.Wst)})),t}nnt(t){this.Z2t((i=>{i.nnt(t)}))}get ga(){var t;return null!=(t=this.Za)?t:this.Za=Rc(this)}Ax(){this.Z2t((t=>{t.Ax()}))}rnt(t){this.W2t.rnt(t)}Zst(t,i){return this.X2t.Zst(t,i)}q2t(t){this.W2t.Q2t((i=>{i.q2t(t)}))}F2t(t){return this.W2t.F2t(t)}Z2t(t){return this.W2t.U2t(t)}iE(){this.W2t.Q2t((t=>t.iE()))}async tr(){const t=[];this.W2t.Q2t((i=>t.push(i.nE()))),await Promise.all(t)}async gn(){this.Bo(),await this.W2t.gn()}constructor(t){super(),this.Za=void 0,this.X2t=t,this.W2t=new V4(this)}},Z4=class extends W4{o6(t,i,e){try{this.K2t=e;const s=Xu.K_.TV(t);if(s.L2t===al.kst)return;const n=this.W2t.k2t(s.L2t);if(!n)throw new Ji(Oc.ADBLOCK,void 0,"Ads could not be loaded.");i!==Pa.Qst&&this.j9||this.X2t.J2t(n),s.o6(t,i,n,this.K2t)}catch(i){0,this.yo(bh.V2t(i,t.sources))}}async tr(){await super.tr(),this.j9=!1}async gn(){await super.gn(),this.X2t.fn(Qi.so,this.bet),this.fn("$Ct",this.$2t)}constructor(t){super(t),this.K2t=!1,this.j9=!1,this.$2t=t=>{if(!this.K2t)return;const i=new La(sl.ADVERTISEMENT_ERROR,t.Rp),e=new Ui(Do.AD_BLOCKER_DETECTED,t.Rp+" Turn off your AdBlocker and try again.",i);this.X2t.LY(e)},this.bet=()=>{this.j9=!0},this.yn("$Ct",this.$2t),t.yn(Qi.so,this.bet)}};r(),r(),r();var H4=class extends i4{get Uc(){return this.Dc}get M$t(){return this.t4t}set M$t(t){this.t4t=t}get T$t(){return this.i4t}set T$t(t){this.i4t=t}set UPt(t){this.GKt=t}get UPt(){return this.GKt}get JJt(){return this.e4t}s4t(){this.n4t=!0}r4t(t){this.Dc.push(t),this.n4t=!1}o4t(t){Ro(this.Dc,t)}get kD(){return this.n4t}constructor(t){super(),this.GKt=t,this.Dc=[],this.t4t=-1,this.i4t=-1,this.e4t=void 0,this.n4t=!1}},X4=class extends H4{get QKt(){return this.h4t}get Gst(){return this.a4t}Yn(t){void 0!==t.maxDuration&&(this.t4t=t.maxDuration),void 0!==t.customData&&(this.e4t=t.customData)}u4t(t){const i=this.Dc.indexOf(t);return i>=0&&i<this.Dc.length-1}r4t(t){super.r4t(t),this.a4t.push(t)}c4t(t){Ro(this.a4t,t)}o4t(t){super.o4t(t),Ro(this.a4t,t)}constructor(t,i){super(i.timeOffset),this.a4t=[],this.h4t=t,this.Yn(i)}};r(),r();var Hs=function(t){return t.fKt="linear",t.l4t="nonlinear",t.QS="unknown",t}({}),q4=function(t){return t.NONE="none",t.READY="ready",t}({}),no=class extends t4{d4t(t,i,e,s,n,r){this.Nb=t,this.My=i,this.Ty=e,this.$A=s,this.fXt=n,this.cqt=r,this.f4t="ready"}get g4t(){return this.f4t}get dXt(){return this.fXt}get ct(){return this.$A}Yst(){var t;return null!=(t=this.Za)?t:this.Za=this.ma()}get Ti(){return this.Ty}get o(){return this.Nb}get uqt(){return this.cqt}get ji(){return this.My}get _4t(){return this.v4t}get CXt(){return this.jXt}get sXt(){return this.nXt}get YHt(){return this.nqt}get JJt(){return this.e4t}get w4t(){return this.m4t}U$t(){}V$t(){return""}Y$t(){return this.p4t}constructor(t,i){super(),this.v4t=i,this.Nb=void 0,this.cqt=void 0,this.My=void 0,this.Ty=void 0,this.$A=void 0,this.nqt=[],this.fXt=[],this.f4t="none",this.e4t=void 0,this.m4t=!1,this.Yl=t}};function K4(t){return{get adSystem(){return t.U$t()},get readyState(){return t.g4t},get adBreak(){return t.Yl.Yst()},get duration(){return t.ct},get companions(){return t.dXt.map((t=>t.ga))},get resourceURI(){return t.Y$t()},get clickThrough(){return t.CXt},get width(){return t.ji},get type(){return function(t){switch(t){case"linear":case"unknown":return"linear";case"nonlinear":return"nonlinear"}}(t._4t)},get height(){return t.Ti},get id(){return t.o},get skipOffset(){return t.uqt},get integration(){return t.QKt},get creativeId(){return t.sXt},get universalAdIds(){return t.YHt},get customData(){return t.JJt},get isSlate(){return t.w4t}}}r();var J4=class{get TXt(){return this.SXt}get LXt(){return this.xXt}get A4t(){return this.y4t}get CXt(){return this.jXt}get Ti(){return this.Ty}get Fqt(){return this.p4t}get ji(){return this.My}get ga(){var t;return null!=(t=this.Za)?t:this.Za=function(t){return{get adSlotId(){return t.TXt},get altText(){return t.LXt},get contentHTML(){return t.A4t},get clickThrough(){return t.CXt},get height(){return t.Ti},get resourceURI(){return t.Fqt},get width(){return t.ji}}}(this)}b4t(t){if(t.CXt&&t.Fqt)return;const i=function(t){try{return P1(t,"text/html")}catch(t){return}}(t.A4t);i&&(this.jXt=$4(i,"a","href"),this.p4t=$4(i,"img","src"))}constructor(t){var i;this.Za=void 0,this.jXt=void 0,this.p4t=void 0,this.SXt=t.TXt,this.My=t.ji,this.Ty=t.Ti,this.y4t=t.A4t,this.jXt=t.CXt,this.p4t=t.Fqt,this.xXt=null!=(i=t.LXt)?i:"",this.b4t(t)}};function $4(t,i,e){const s=t.querySelector(i);return s&&s.getAttribute(e)||""}var t3=class extends no{get QKt(){return this.h4t}get M4t(){return this.T4t}set M4t(t){this.T4t=t}ma(){return K4(this)}Yn(t){t.id&&(this.Nb=t.id),void 0!==t.skipOffset&&(this.cqt=t.skipOffset),void 0!==t.width&&(this.My=t.width),void 0!==t.height&&(this.Ty=t.height),void 0!==t.duration&&(this.$A=t.duration),void 0!==t.readyState&&(this.f4t=function(t){return"ready"===t?q4.READY:q4.NONE}(t.readyState)),void 0!==t.resourceURI&&(this.p4t=t.resourceURI),void 0!==t.clickThrough&&(this.jXt=t.clickThrough),void 0!==t.companions&&(this.fXt=[...t.companions].map(i3)),void 0!==t.creativeId&&(this.nXt=t.creativeId),void 0!==t.universalAdIds&&(this.nqt=t.universalAdIds),void 0!==t.customData&&(this.e4t=t.customData)}constructor(t,i,e){super(e,function(t){return"linear"===t?Hs.fKt:"nonlinear"===t?Hs.l4t:Hs.QS}(i.type)),this.T4t=0,this.h4t=t,this.Yn(i)}};function i3(t){const i={TXt:t.adSlotId,LXt:t.altText,A4t:t.contentHTML,vS:void 0,CXt:t.clickThrough,Ti:t.height,Fqt:t.resourceURI,ji:t.width};return new J4(i)}r();var e3=class extends xa{ma(){return new s3(this.Kst.Yst(),this.S4t)}get S4t(){return this.N4t}constructor(t,i){super("KCt",t),this.N4t=i}},s3=class extends va{constructor(t,i){super("adskip",t),this.playedPercentage=i}};r();var n3=class extends Hr{ma(){return new r3(this.Yl.Yst())}constructor(t){super("I4t",t)}},r3=class extends Kr{constructor(t){super("updateadbreak",t)}};r();var o3=class extends Hr{ma(){return new h3(this.Yl.Yst())}constructor(t){super("D4t",t)}},h3=class extends Kr{constructor(t){super("adbreakchange",t)}};r();var ro=class extends xa{ma(){return new a3(this.Kst.Yst(),this.currentTime)}constructor(t,i){super("E4t",t),this.currentTime=i}},a3=class extends va{constructor(t,i){super("adfirstquartile",t),this.currentTime=i}};r();var ho=class extends xa{ma(){return new u3(this.Kst.Yst(),this.currentTime)}constructor(t,i){super("k4t",t),this.currentTime=i}},u3=class extends va{constructor(t,i){super("admidpoint",t),this.currentTime=i}};r();var oo=class extends xa{ma(){return new c3(this.Kst.Yst(),this.currentTime)}constructor(t,i){super("L4t",t),this.currentTime=i}},c3=class extends va{constructor(t,i){super("adthirdquartile",t),this.ad=t,this.currentTime=i}},l3=class{get Uc(){return this.Dc}get I$t(){return this.J$t}get ga(){var t;return null!=(t=this.Za)?t:this.Za=function(t){return{get integration(){return t.QKt},get ads(){return t.Uc.map((t=>t.Yst()))},get adBreaks(){return t.I$t.map((t=>t.Yst()))},createAd:(i,e)=>t.x4t(i,e?t.C4t(e):void 0).Yst(),updateAd(i,e){t.j4t(t.O4t(i),e)},updateAdProgress(i,e){const s=rh(Number(e),0,1);t.R4t(t.O4t(i),s)},beginAd(i){t.c4t(t.O4t(i))},endAd(i){t.P4t(t.O4t(i))},skipAd(i){t.MJt(t.O4t(i))},removeAd(i){t.o4t(t.O4t(i))},createAdBreak:i=>t.z4t(i).Yst(),updateAdBreak(i,e){t.B4t(t.C4t(i),e)},removeAdBreak(i){t.U4t(t.C4t(i))},removeAllAds(){t.Q4t()},error(i){t.F4t(i)},fatalError(i,e){const s=e?Number(e):void 0;t.Y4t(i,s)}}}(this)}get mC(){return this.z6}set mC(t){this.z6=t}get H2t(){return this.V4t.some((t=>t._4t===Hs.fKt))}get O2t(){return this.QKt}get Fst(){return this.V4t}get Vst(){var t;return null!=(t=this.K$t)?t:null}get Gst(){return Qr(this.J$t,(t=>t.Gst))}get Wst(){return this.J$t.filter((t=>!t.kD))}Ax(){var t;if(0===this.V4t.length)return;const i=this.V4t[0];(null==(t=this.z6)?void 0:t.skipAd)?this.z6.skipAd(i.Yst()):this.MJt(i)}nnt(t){}x4t(t,i){var e;const s=null!=i?i:this.G4t({timeOffset:null!=(e=t.timeOffset)?e:0}),n=new t3(this.QKt,t,s);return s.r4t(n),this.Dc.push(n),this.B2t.yo(new Jh(n)),n}j4t(t,i){t.Yn(i),this.B2t.yo(new vr(t))}R4t(t,i){if(!fh(this.V4t,t))throw new g("Cannot update ad progress on a non-started ad");const e=t.M4t,s=x.max(e,i);t.M4t=s;const n=this.X2t.nD();e<.25&&s>=.25&&this.B2t.yo(new ro(t,n)),e<.5&&s>=.5&&this.B2t.yo(new ho(t,n)),e<.75&&s>=.75&&this.B2t.yo(new oo(t,n))}c4t(t){fh(this.V4t,t)||(this.V4t.push(t),t.Yl.c4t(t),this.W4t(t.Yl),this.B2t.yo(new Nc(t,this.X2t.nD())))}MJt(t){if(!fh(this.V4t,t))return;const i=t.Yl.u4t(t);this.B2t.yo(new e3(t,t.M4t)),this.Z4t(t,i)}P4t(t){if(!fh(this.V4t,t))return;const i=t.Yl.u4t(t);this.B2t.yo(new ic(t,this.X2t.nD())),this.Z4t(t,i)}o4t(t){if(!fh(this.Dc,t))return;const i=t.Yl.u4t(t);Ro(this.Dc,t),t.Yl.o4t(t),this.B2t.yo(new o3(t.Yl)),this.Z4t(t,i)}z4t(t){const i=new X4(this.QKt,t);return this.J$t.push(i),this.B2t.yo(new Qo(i)),i}B4t(t,i){t.Yn(i),this.B2t.yo(new n3(t))}U4t(t){if(fh(this.J$t,t)){for(const i of t.Uc.slice())this.o4t(i);Ro(this.J$t,t),this.B2t.yo(new io(t))}}Q4t(){for(const t of this.J$t.slice())this.U4t(t)}F4t(t){this.B2t.yo(new bh(Oc.GENERAL,t.message))}Y4t(t,i){const e=new Ui(null!=i?i:Do.AD_ERROR,t.message,t);this.X2t.LY(e)}H4t(t){return So(this.J$t,(i=>i.UPt===t))}G4t(t){var i;return null!=(i=this.H4t(t.timeOffset))?i:this.z4t(t)}Z4t(t,i){Ro(this.V4t,t);const e=t.Yl;0!==this.V4t.length||this.K$t!==e||i||(e.s4t(),this.W4t(void 0))}W4t(t){this.K$t!==t&&(void 0!==this.K$t&&this.B2t.yo(new ir(this.K$t)),this.K$t=t,void 0!==t&&this.B2t.yo(new Va(t)))}O4t(t){const i=So(this.Dc,(i=>i.Yst()===t));if(void 0===i)throw new g('Invalid ad for integration "'+this.QKt+'"');return i}C4t(t){const i=So(this.J$t,(i=>i.Yst()===t));if(void 0===i)throw new g('Invalid ad break for integration "'+this.QKt+'"');return i}async wa(t,i){var e;if(re(i),null==(e=this.z6)?void 0:e.setSource){let i=await Promise.resolve(this.z6.setSource(t));return Vh(i)&&(i=t),Hh(i,this.X2t.md)}return t}async X4t(){var t;(null==(t=this.z6)?void 0:t.resetSource)?await Promise.resolve(this.z6.resetSource()):this.Q4t()}async gn(){var t;(null==(t=this.z6)?void 0:t.destroy)&&await Promise.resolve(this.z6.destroy()).catch(ul),this.Q4t(),this.W4t(void 0),this.z6=void 0,this.B2t.gn()}constructor(t,i){this.B2t=new gj,this.Dc=[],this.J$t=[],this.V4t=[],this.QKt=t,this.X2t=i}};r();var d3=class{destroy(){this.removeAdListeners()}get player(){return this.ta}set player(t){this.ta&&this.removeAdListeners(),this.ta=t,this.addAdListeners()}get inAdBreak(){return this.q4t}addAdListeners(){var t,i;null==(t=this.ta.Uc)||t.yn("tnt",this.xd),null==(i=this.ta.Uc)||i.yn("$st",this.Cd)}removeAdListeners(){var t,i;null==(t=this.ta.Uc)||t.fn("tnt",this.xd),null==(i=this.ta.Uc)||i.fn("$st",this.Cd)}constructor(t){this.D9=void 0,this.q4t=!1,this.xd=t=>{1!==this.ta.ND&&(this.D9=this.ta.ND,this.ta.ND=1),this.q4t=!0},this.Cd=t=>{this.q4t=!1,void 0!==this.D9&&(this.ta.ND=this.D9,this.D9=void 0)},this.ta=t,this.addAdListeners()}},f3=class extends z4{Tst(){return this.K4t}get J4t(){return this.$4t}iE(){this._2t.iE(),this.K4t.iE()}sE(){void 0===this.FF?(void 0!==this.t3t&&this.i3t(this.t3t),super.sE()):this.yo(new As(this.FF))}async wa(t,i){re(i);let e=t;if(e)for(const t of this.e3t)e=await t.wa(e,i);if(await super.wa(e,i),re(i),null==e?void 0:e.ads){const t=Boolean(e.blockContentIfAdError);this.K4t.q2t(e.playAdsAfterTime);for(const i of e.ads)this.K4t.o6(i,Pa.Qst,t)}}async nE(){this.FF=void 0,this.pV=void 0,await this.K4t.tr(),this.o2t(),await super.nE();for(const t of this.e3t)await t.X4t()}i3t(t){this.s3t=this.ta.ND;const i=this.ta.ZD,e=this.ta.mD;t.XD(i),t.yD(e),this.$4t=t,this.t3t=void 0,this.uP(t)}J2t(t){void 0===this.$4t&&(this.t3t=t)}o2t(){this.t3t=void 0,void 0!==this.$4t&&(this._2t.ND=this.s3t,this._2t.ZD=this.ZD,this._2t.mD=this.mD,this.uP(this._2t),this.$4t=void 0)}uD(){var t;return null!=(t=this.pV)?t:super.uD()}lD(){var t;return null!=(t=this.FF)?t:super.lD()}LY(t){void 0===this.lD()&&(this.FF=t,this.pV=be(t),this.yo(new As(t)))}lE(t){return void 0===this.$4t&&this.K4t.F2t(t)}Zst(t,i){try{const e=new l3(t,this);e.mC=i(e.ga),this.K4t.rnt(e),this.e3t.push(e),this.n3t=new d3(this)}catch(i){this.K4t.yo(new bh(Oc.GENERAL,'Error while constructing ad integration "'+t+'": '+i+'"'))}}ED(t){var i;(null==(i=this.n3t)?void 0:i.inAdBreak)||super.ED(t)}async gn(){var t;for(const t of this.e3t)await t.gn().catch(ul);await this.K4t.gn(),this.o2t(),null==(t=this.n3t)||t.destroy(),this.n3t=void 0,await super.gn()}constructor(t,i){super(t),this.e3t=[],this.FF=void 0,this.pV=void 0,this.s3t=1,this._2t=t,this.K4t=new Z4(this),this.K4t.G2t.E2t(i,t,this,t.md)}};ya((t=>new f3(t,Xu.K_)),hh.Est),r(),r(),r();var g3=0!==ui.S_?ui.S_:ui.jg,_3=ui.Ka&&g3<12,Ve=class extends Nu{get sD(){return this.nD()}set sD(t){this.rD(t)}fst(){return this.ta.fst()}get ct(){return this._d()}get dD(){return this.hP}get PD(){return this.zD()}get qD(){return this.HF}get B2t(){return this.r3t}get ht(){return this.oP}get H2t(){return this.X2t.J4t===this}JI(){return ge.cR().ws()}tD(){}iD(t){}DD(){return 1}ED(t){}LD(){return new ge([0,this.sD]).ws()}UD(){return!1}QD(){return this.Ol}VD(){return this.aP}cs(){return this.$D().cs}$D(){return this.Zo}Sa(){}async gn(){this.Bo(),this.oP.gn(),this.aP.gn(),this.Ol.gn(),this.r3t.gn(),this.ta.fn(Qi.Xm,this.Ds)}o3t(){_3&&this.h3t(),this.H2t||this.X2t.i3t(this)}o2t(){this.H2t&&(_3&&this.a3t(),ui.F_&&this.ke.querySelectorAll("video[src]").forEach((t=>{t.src=""})),me.Ys.Cv&&this.ta.uE(),this.X2t.o2t())}h3t(){this.u3t||(oi.addEventListener("blur",this.c3t),oi.addEventListener("focus",this.l3t),this.u3t=!0)}a3t(){oi.removeEventListener("blur",this.c3t),oi.removeEventListener("focus",this.l3t),this.u3t=!1}d3t(){requestAnimationFrame((()=>this.ta.be()))}constructor(t,i){super(t,!0),this.X2t=i,this.u3t=!1,this.aP=new $e,this.oP=new $e,this.Ol=new bn,this.hP=new OS,this.r3t=new gj,this.Zo=new sx,this.HF=new YL,this.c3t=()=>{this.ta.ge()},this.l3t=()=>{this.d3t()},this.ta.yn(Qi.Xm,this.Ds)}};r(),r();var v3=0,w3="theoplayer-wrapper",m3=class t{get f3t(){return this.g3t}get _3t(){return this.v3t}get w3t(){return 1===this.v3t.length&&p2(this.v3t[0].sources.type)}get m3t(){return this.p3t}A3t(t){const i=this.y3t===t.timeOffset;return!this.b3t&&i}get M3t(){return this.T3t}get S3t(){return M2(this.N3t)&&!this.b3t}get y3t(){return this.N3t}get sd(){return this.I3t}D3t(){if(j(this.I3t)){let t=this.y3t;if(void 0===t)return void(this.I3t=0);if("string"==typeof t&&M2(t)){const i=this.ta._d();j(i)||i===1/0||(t=p1(t)*i)}j(t)||(this.I3t=t)}}get E3t(){return this.k3t}set E3t(t){this.k3t=t}get L3t(){return this.x3t}set L3t(t){this.x3t=t,this.C3t=!1}get j3t(){return this.O3t}R3t(t){this.O3t.push(t)}P3t(){if(!this.b3t){let t,i,e=this.g3t===Pa.Qst&&void 0===this.z3t&&1===this.v3t.length;const s=this.v3t[0];if(!e&&1===this.v3t.length){const t=me.Ah(s.sources.src).searchParams.get("output");t&&t.toLowerCase().indexOf("vmap")>-1&&(e=!0,void 0!==this.z3t&&ae("Do not set a timeOffset for VMAP ad sources. VMAP ads have their own offsets included."))}if(p2(s.sources.type)||e)t=s.sources.src;else{if(j(this.ta._d())&&"end"===this.B3t())return;i=this.U3t()}let n=this.ta._d();(j(n)||n===1/0)&&(n=-3),this.b3t={Q3t:this.ta.ke.offsetWidth,F3t:this.ta.ke.offsetHeight,Y3t:this.ta.ke.offsetWidth,V3t:this.ta.ke.offsetHeight,G3t:this.rst,W3t:this.oV,Z3t:t,H3t:i,X3t:s.omidAccessModeRules,q3t:n}}return this.b3t}U3t(){return'<vmap:VMAP xmlns:vmap="http://www.iab.net/videosuite/vmap" version="1.0">'+this.v3t.map(((t,i)=>this.K3t(t.sources,i))).join("\n")+"</vmap:VMAP>"}K3t(t,i){const e=this.B3t(),s=t.src;return'<vmap:AdBreak timeOffset="'+e+'" breakType="linear,nonlinear" breakId="theoplayer-break-'+this.dk+"-"+i+'"><vmap:AdSource allowMultipleAds="true" followRedirects="true"><vmap:VASTAdData><VAST version="3.0"><Ad id="'+w3+"-"+this.dk+"-"+i+'"><Wrapper allowMultipleAds="true" followAdditionalWrappers="true"><VASTAdTagURI><![CDATA['+s+"]]></VASTAdTagURI></Wrapper></Ad></VAST></vmap:VASTAdData></vmap:AdSource></vmap:AdBreak>"}B3t(){if(0===this.y3t)return"start";if(this.y3t===1/0)return"end";const t=this.y3t;if("string"==typeof t&&M2(t)){const i=p1(t)*this.ta._d();return Lh.zKt(i)}return Lh.zKt(this.y3t||0)}J3t(t){this.v3t.push(t)}$3t(t){const i=w3+"-"+this.dk+"-";for(const e of t)if(sa(e,i)){const t=Number(e.slice(i.length));if(!j(t)&&t>=0&&t<this.v3t.length)return t}return-1}static t5t(t){if(void 0!==t)return-1===t?1/0:t}i5t(){this.T3t=!0}get pP(){return this.rst}set pP(t){this.rst=t}get mD(){return this.oV}set mD(t){this.oV=t}constructor(i,e,s,n){this.g3t=e,this.ta=s,this.p3t=n,this.I3t=NaN,this.k3t=!1,this.x3t=!1,this.T3t=!1,this.O3t=[],this.rst=!1,this.oV=!1,this.v3t=[],this.dk=++v3,this.z3t=i.timeOffset,this.N3t=t.t5t(this.z3t),this.D3t(),this.v3t.push(i)}};r();var p3=class{get e5t(){return this.s5t.e5t}get n5t(){return this.s5t.n5t}get Gst(){return this.s5t.Gst}get t(){return this.s5t.t}q2t(t){this.r5t=t}o5t(t){return!(this.e5t&&!this.e5t.M3t&&"nonlinear"!==this.n5t._4t)||this.e5t.sd>t.sd&&this.e5t.sd!==t.sd}h5t(t){if(t.length)return t.sort(((t,i)=>t.sd-i.sd))[0]}a5t(){if(this.Gst.length)return this.h5t(this.u5t(this.t.nD()))}c5t(){if(!(void 0!==this.r5t&&this.r5t>=0))return this.Gst.filter((t=>!t.E3t&&0===t.sd&&t!==this.e5t))[0]}u5t(t){if(!this.l5t&&(this.l5t=!this.Gst.some((t=>j(t.sd))),!this.l5t))return[];const i=this.Gst.filter((i=>!i.E3t&&(i.w3t||!j(i.sd)&&t<=i.sd)));return void 0===this.r5t?i:i.filter((t=>t.w3t||void 0===t.y3t||t.sd>this.r5t))}constructor(t){this.l5t=!1,this.s5t=t,this.r5t=void 0}},A3=function(t){return t[t.d5t=0]="d5t",t[t.f5t=1]="f5t",t[t.g5t=2]="g5t",t}({}),y3=class{iE(){this.do=!0,this._5t&&this.v5t()}w5t(t,i){this.m5t(t,i);const e=So(this.Gst,(i=>i.A3t(t)));if(e)e.J3t(t);else{var s;const e=new m3(t,i,this.ta,null==(s=t.replaceContent)||s);this.a4t.push(e),2===this.p5t&&this.A5t.z4t(e.sd,e,e.y3t),this.y5t(i,e)}}get n5t(){return this.b5t}get Gst(){return this.a4t}get t(){return this.ta}get IGt(){return Boolean(this.lmt)}get p5t(){return this.M5t}T5t(){if(Ro(this.Gst,this.e5t),this.e5t){for(const t of this.e5t.j3t)this.A5t.S5t();this.e5t=void 0}}N5t(){for(const t of this.a4t)for(const i of t.j3t)this.A5t.I5t(i,!0);Or(this.a4t)}async D5t(t){this.T5t(),this.E5t=!0,this.e5t=t,this.k5t=t.sd,this.lmt=this.L5t(t),await this.lmt,this.lmt=void 0}async L5t(t){this.x5t(t);const i=t.P3t();if(!i)return this.E5t=!1,void(this.e5t=void 0);const e=this.b5t.C5t(i);t.E3t=!0;try{await e,t.f3t===Pa.Ust&&this.b5t.j5t()}catch(t){0,this.e5t=void 0,await this.v5t()}}x5t(t){this.do?t.pP=!0:t.pP=this.X2t.pP,t.mD=this.X2t.mD}O5t(){var t;return null!=(t=this.R5t.c5t())?t:this.R5t.a5t()}async v5t(){if(this.e5t&&!this.e5t.M3t)return this.lmt;const t=this.O5t();t&&await this.D5t(t)}get e5t(){return this.P5t}set e5t(t){this.P5t=t}get E5t(){return this.z5t}set E5t(t){this.z5t=t}tr(){this.T5t(),Or(this.a4t),this.k5t=0,this.e5t=void 0,this.lmt=void 0,this.E5t=!1}L3t(){this.E5t=!1,this.e5t&&(this.e5t.L3t=!0)}async y5t(t,i){t===Pa.Ust&&this.do&&this.R5t.o5t(i)&&!this.IGt&&"linear"!==this.b5t._4t&&(!this.e5t||this.e5t&&this.e5t.E3t)&&(await Promise.resolve(),await this.D5t(i))}i5t(){this.e5t&&this.e5t.i5t()}get B5t(){if(this.IGt||this.E5t)return!1;if(this.e5t&&!this.e5t.M3t)return!1;return!!this.a4t.filter((t=>this.e5t!==t)).length&&Boolean(this.O5t())}async U5t(){if(!this.B5t)return void 0;const t=this.O5t();t&&await this.D5t(t)}m5t(t,i){const e=t.sources.type,s=i===Pa.Qst&&void 0===t.timeOffset,n=p2(e)||s?1:2;n!==this.M5t&&(this.M5t=n,this.N5t(),this.b5t.S$t&&!this.IGt&&"linear"!==this.b5t._4t&&(this.b5t.S$t.Mm(),this.e5t=void 0,this.lmt=void 0),this.k5t=0,this._5t=!0)}q2t(t){this.R5t.q2t(t)}gn(){this.ta.fn(Qi.Km,this.ZG)}constructor(t,i,e,s,n){this.M5t=0,this.lmt=void 0,this.z5t=!1,this.ZG=()=>{const t=this.a4t.filter((t=>t.S3t));for(const i of t){i.D3t();const t=i.y3t;this.A5t.Q5t(t,i.sd)}this.do&&this.B5t&&this.v5t()},this.a4t=[],this.b5t=t,this.do=!1,this._5t=!1,this.ta=i,this.X2t=e,this.e5t=void 0,this.k5t=0,this.R5t=new p3(this),this.hst=s,this.A5t=n,this.ta.yn(Qi.Km,this.ZG)}};r(),r();var bo=function(t){return t.F5t="contentResumeRequested",t.Y5t="contentPauseRequested",t.V5t="click",t.Km="durationChange",t.G5t="expandedChanged",t.W5t="start",t.Z5t="impression",t.DV="pause",t.H5t="resume",t.X5t="adProgress",t.q5t="adBuffering",t.K5t="firstQuartile",t.Tqt="midpoint",t.J5t="thirdQuartile",t.Sqt="complete",t.$5t="userClose",t.t6t="linearChanged",t.i6t="loaded",t.e6t="adCanPlay",t.s6t="adMetadata",t.n6t="adBreakReady",t.r6t="interaction",t.o6t="allAdsCompleted",t.h6t="skip",t.a6t="skippableStateChanged",t.u6t="log",t.c6t="viewableImpression",t.l6t="volumeChange",t.d6t="mute",t}({});r();var b3=function(t){return t.f6t="adError",t}({});r();var M3=function(t){return t[t.g6t=-1]="g6t",t[t._6t=-1]="_6t",t[t.v6t=-1]="v6t",t[t.w6t=101]="w6t",t[t.m6t=102]="m6t",t[t.p6t=200]="p6t",t[t.A6t=201]="A6t",t[t.y6t=202]="y6t",t[t.b6t=300]="b6t",t[t.M6t=301]="M6t",t[t.T6t=302]="T6t",t[t.S6t=303]="S6t",t[t.N6t=400]="N6t",t[t.I6t=402]="I6t",t[t.D6t=403]="D6t",t[t.E6t=405]="E6t",t[t.k6t=500]="k6t",t[t.L6t=501]="L6t",t[t.x6t=-1]="x6t",t[t.C6t=503]="C6t",t[t.j6t=602]="j6t",t[t.O6t=900]="O6t",t[t.R6t=901]="R6t",t[t.P6t=1005]="P6t",t[t.z6t=1007]="z6t",t[t.B6t=1009]="B6t",t[t.U6t=1010]="U6t",t[t.Q6t=1011]="Q6t",t[t.F6t=1012]="F6t",t[t.Y6t=1013]="Y6t",t[t.V6t=1020]="V6t",t[t.G6t=1021]="G6t",t[t.W6t=1101]="W6t",t[t.Z6t=1204]="Z6t",t[t.H6t=1205]="H6t",t[t.X6t=1300]="X6t",t[t.q6t=-1]="q6t",t[t.K6t=-1]="K6t",t[t.J6t=-1]="J6t",t[t.$6t=-1]="$6t",t}({}),T3=function(t){return t.t9t="adLoadError",t.i9t="adPlayError",t}({});function S3(t,i){if(t===bo.X5t){const t=i;return{e9t:t.adBreakDuration,s9t:t.adPosition,sD:t.currentTime,ct:t.duration,n9t:t.totalAds}}return i}function N3(t){switch(t){case google.ima.AdError.Type.AD_LOAD:return T3.t9t;case google.ima.AdError.Type.AD_PLAY:return T3.i9t}}function I3(t){return jl(t)&&st(t.getVastErrorCode)}function D3(t){const i=t.getInnerError(),e=i&&I3(i)?D3(i):void 0;return{Rp:t.getMessage(),eKt:t.getErrorCode(),r9t:t.getVastErrorCode(),Hw:N3(t.getType()),o9t:e}}function E3(t){if(Rt(t))return t}r(),r();var k3=class extends Bo{h9t(t){this.b5t.yo(t)}a9t(t){this.N$t=t,this.N$t.yn(b3.f6t,this.u9t),this.N$t.yn(bo.Y5t,this.c9t),this.N$t.yn(bo.F5t,this.l9t),this.N$t.yn(bo.o6t,this.d9t),this.N$t.yn(bo.W5t,this.f9t),this.N$t.yn(bo.Sqt,this.g9t),this.N$t.yn(bo.h6t,this._9t),this.N$t.yn(bo.$5t,this.v9t),this.N$t.yn(bo.V5t,this.w9t),this.N$t.yn(bo.e6t,this.m9t),this.N$t.yn(bo.DV,(()=>{this.b5t.TD||(this.b5t.p9t(!0),this.b5t.yo(new Ia(this.b5t.sD))),this.A9t(!0)})),this.N$t.yn(bo.H5t,(()=>{this.b5t.TD&&(this.b5t.p9t(!1),this.b5t.yo(new us(this.b5t.sD)))})),this.N$t.yn(bo.d6t,(()=>{const i=t.HD();i>=0&&this.y9t(i)})),this.N$t.yn(bo.l6t,(()=>{const i=t.HD();i>=0&&this.y9t(i)})),this.N$t.yn(bo.s6t,(t=>{this.M9t.b9t(t.type)})),this.N$t.yn(bo.Km,(t=>{t.Kst&&this.T9t(t.Kst.ct)})),this.N$t.yn(bo.u6t,(async t=>{const i=t.S9t.adError,e=I3(i)?D3(i):void 0;e&&(this.N9t(e)?await this.I9t(t):this.D9t(e)?await this.E9t(e):this.k9t(e)&&this.L9t(e))})),this.N$t.yn(bo.i6t,(t=>{if(t.Kst&&(this.b5t.L3t(),this.M9t.x9t(t.Kst),this.C9t=0,t.Kst.j9t)){var i;const t=this.b5t.OD,e=$i.KR;this.b5t.S3(e);const s=this.b5t.sD,n=this.b5t.OD;n!==t&&this.h9t(new Zi(s,n)),null==(i=this.N$t)||i.XD(this.b5t.O9t()),this.h9t(new TI(s,e))}})),this.N$t.yn([bo.q5t,bo.Z5t,bo.K5t,bo.Tqt,bo.J5t],(t=>{t.Kst&&this.M9t.R9t(t.Kst,t.type,this.b5t.sD)})),this.N$t.yn(bo.K5t,this.P9t),this.N$t.yn(bo.X5t,this.z9t)}async switchToPlayerIfNoNextAd(){if(this.N$t){const t=this.N$t.B9t();t&&this.U9t(t)||(this.b5t.B5t()?await this.b5t.U5t():(this.b5t.Q9t(),this.ta.TD&&!this.ta.hD&&this.ta.sE()))}else if(this.b5t.B5t())await this.b5t.U5t();else{const t=this.b5t.TD;this.b5t.Q9t(),t||this.ta.sE()}}U9t(t){const i=t.F9t,e=null==i?void 0:i.n9t;return(null==i?void 0:i.s9t)!==e}_w(){this.b5t.Mc&&(m(this.b5t.Mc),this.b5t.Mc=null)}k9t(t){return t.Hw===T3.t9t}D9t(t){return t.Hw===T3.i9t}N9t(t){return t.eKt===M3.B6t}async E9t(t){var i;this.L9t(t);const e=[M3.N6t,M3.R6t,M3.G6t,M3.H6t];var s;this.b5t.unt||fh(e,t.eKt)||fh(e,null==(i=t.o9t)?void 0:i.eKt)||(this.b5t.Y9t.E5t=!1,null==(s=this.b5t.Y9t.e5t)||s.i5t(),await this.switchToPlayerIfNoNextAd())}L9t(t){this.b5t.F4t(t)}async V9t(){this.M9t.S5t(),this.b5t.i5t(),"nonlinear"===this.b5t._4t&&(this.M9t.G9t(-1,!1),this.b5t.W9t(void 0)),"nonlinear"!==this.b5t._4t&&"none"!==this.b5t._4t||this.b5t.B5t()&&await this.b5t.U5t(),this.b5t.Z9t(),this.b5t.H2t?this.b5t.o2t():this.H9t()&&this.ta.yo(new ce(this.ta.nD()))}H9t(){return this.b5t.X9t&&!this.b5t.q9t&&this.ta.hD}setCountdownTimer(){this._w(),this.b5t.Mc=v((()=>this.A9t()),250)}async I9t(t){void 0!==t.Kst&&(this.b5t.Y9t.E5t=!1,this.b5t.i5t(),this.b5t.B5t()?await this.b5t.U5t():this.b5t.p9t(!0))}T9t(t){this.b5t.ct!==t&&t>=0&&(this.b5t.J4(t),this.h9t(new In(this.b5t.ct)))}y9t(t){this.b5t.O9t()!==t&&(0===t?this.b5t.K9t(t,!0,!1):this.b5t.K9t(t,!1,!1))}async J9t(){this.b5t.$9t&&void 0!==this.ta.uD()&&(this.t8t=new Ai,await Te(this.ta.wa(this.ta.Ya(),this.t8t.wm),this.t8t),this.i8t&&this.ta.rD(this.i8t),this.i8t=void 0)}A9t(t){if(this.N$t){const t=this.N$t.e8t();t>this.b5t.ct&&this.T9t(x.round(t))}const i=this.b5t.sD;(t||!this.b5t.TD&&i!==this.b5t.s8t)&&(this.b5t.yo(new H(i,void 0)),this.b5t.s8t=i)}tr(){this.t8t&&(this.t8t.Dm(),this.t8t=void 0),this.n8t=!1,this.C9t=0}gn(){this.tr(),this.Bo()}constructor(t,i,e){super(),this.b5t=t,this.ta=i,this.M9t=e,this.n8t=!1,this.t8t=void 0,this.i8t=void 0,this.C9t=0,this.P9t=t=>{if(!t.Kst||!t.Kst.F9t)return;const i=t.Kst.F9t;this.M9t.B4t(i.UPt,i.n9t,i.M$t)},this.z9t=t=>{var i,e,s;if(this.C9t>=5)return;this.C9t++;const n=t.S9t;if(!function(t){return jl(t)&&void 0!==t.e9t&&void 0!==t.n9t}(n))return;const r=null==(s=this.N$t)||null==(e=s.B9t())||null==(i=e.F9t)?void 0:i.UPt;void 0!==r&&this.M9t.B4t(r,n.n9t,n.e9t)},this.u9t=async t=>{t.S9t.r8t&&await this.E9t(t.S9t.r8t)},this.d9t=async()=>{this.n8t=!0,this.b5t.i5t(),await this.l9t()},this.f9t=t=>{if(!t.Kst)return;const i=t.Kst;this.b5t.W9t(i),this.b5t.ge(),this.b5t.o8t(),this.M9t.h8t(i);const e=i.ct;if(this.T9t(e),i.j9t){const t=this.b5t.sD,i=this.b5t.OD;this.b5t.S3($i.$R),this.h9t(new SI(t,i)),this.h9t(new or(t,i)),this.h9t(new NI(t,i)),this.b5t.TD||this.h9t(new fo(this.b5t.sD)),this.setCountdownTimer(),this.A9t(!0)}else this.b5t.o2t(),this.ta.ge(),this.b5t.TD||this.ta.sE()},this.g9t=t=>{var i;if(!t.Kst)return;const e=t.Kst;if(this._w(),this.M9t.G9t(this.b5t.ct,e.j9t),this.b5t.OD!==$i.KR){const t=$i.KR;this.b5t.S3(t);const i=this.b5t.sD;this.h9t(new Zi(i,t))}this.T9t(NaN),this.b5t.a8t=!1,null==(i=this.N$t)||i.XD(this.b5t.O9t())},this._9t=t=>{t.Kst&&(this.g9t(t),this.M9t._9t(t.Kst,this.b5t.sD,this.b5t.ct))},this.v9t=t=>{t.Kst&&(this.M9t.G9t(-1,t.Kst.j9t),this.b5t.i5t(),!t.Kst.j9t&&this.b5t.B5t()&&this.b5t.U5t())},this.w9t=t=>{t.Kst&&(t.Kst.j9t?this.b5t.eE():this.ta.eE())},this.m9t=()=>{var t;(this.b5t.a8t=!0,this.b5t.u8t)&&(null==(t=this.N$t)||t.eE(),this.b5t.u8t=!1)},this.c9t=t=>{var i;if(!t.Kst)return;this.b5t.$9t&&(this.i8t=this.ta.nD(),this.ta.aE(),this.ta.JD=!0),this.b5t.c8t=!0;const e=t.Kst;this.M9t.xd(e);const s=e.ct;this.b5t.W9t(e),this.T9t(s),this.b5t.p9t(!1),this.b5t.ge(),this.b5t.o3t(),this.b5t.$9t||this.ta.be(),this.ta.eE(),this.b5t.l8t(e);0===(null==(i=e.F9t)?void 0:i.UPt)||this.b5t.yo(new Oa(this.b5t.sD))},this.l9t=async t=>{const i=null==t?void 0:t.Kst;this.b5t.c8t=!1,"linear"===this.b5t._4t&&this.M9t.Cd(),i&&i.ct>=0&&this.T9t(i.ct),this.ta._d()===1/0&&this.b5t.d8t(),this.b5t.a8t=!1,this.n8t&&await this.V9t(),this.b5t.p9t(!0);try{await this.J9t()}catch(t){return void(F(t)||this.yo(new A0(t)))}if(this.b5t.o2t(),this.b5t.be(),this.ta.hD||this.ta.sE(),i&&this.b5t.W9t(i),this.b5t.X9t){if(this.b5t.$9t){var e;const t=this.ta.tE(),i=null==(e=this.ta.bt)?void 0:e.src;t&&i&&(t.src=i)}this.b5t.q9t=!0}this.ta.JD=!1,this.b5t.B5t()&&await this.b5t.U5t()}}};r(),r();var L3=class extends H4{get QKt(){return al.W$t}constructor(t,i,e){super(t),this.f8t=i,this.g8t=e}};r(),r(),r();var x3=class extends no{set _8t(t){this.v8t=t}get _8t(){return this.v8t}get QKt(){return al.Xh}U$t(){var t;return null==(t=this.w8t)?void 0:t.xHt}get m8t(){var t;return null==(t=this.w8t)?void 0:t.bXt}get sXt(){var t;return null==(t=this.w8t)?void 0:t.sXt}get TC(){var t;return null==(t=this.w8t)?void 0:t.TC}get iY(){var t;return null==(t=this.w8t)?void 0:t.iY}get p8t(){var t,i;return null!=(i=null==(t=this.w8t)?void 0:t.p8t)?i:[]}get A8t(){var t,i;return null!=(i=null==(t=this.w8t)?void 0:t.A8t)?i:[]}get y8t(){var t,i;return null!=(i=null==(t=this.w8t)?void 0:t.y8t)?i:[]}ma(){return function(t,i){return Gr(t,{bitrate:0,contentType:void 0,mediaUrl:void 0,traffickingParameters:void 0,traffickingParametersString:void 0,universalAdIds:[],get description(){return i.TC},get apiFramework(){return i.m8t},get creativeId(){return i.sXt},get title(){return i.iY},get wrapperAdIds(){return i.p8t},get wrapperAdSystems(){return i.A8t},get wrapperCreativeIds(){return i.y8t}})}(K4(this),this)}b8t(t){this.w8t=t;const i=C3(t);this.d4t(t.KXt,t.M8t,t.T8t,t.ct,i,-1)}constructor(t,i){super(t,i),this.v8t=0,this.w8t=void 0}};function C3(t){return t.QHt.map((t=>new J4(t)))}var j3=class extends no{ma(){return function(t,i){return Gr(t,{get adSystem(){return i.U$t()},get apiFramework(){return i.m8t},get bitrate(){return i.S8t},get contentType(){return i.vS},get creativeId(){return i.sXt},get description(){return i.TC},get mediaUrl(){return i.N8t},get title(){return i.iY},get traffickingParameters(){return i.I8t},get traffickingParametersString(){return i.D8t},get wrapperAdIds(){return i.p8t},get wrapperAdSystems(){return i.A8t},get wrapperCreativeIds(){return i.y8t},get universalAdIds(){return i.YHt}})}(K4(this),this)}b8t(t){this.w8t=t,this.d4t(t.KXt,t.M8t,t.T8t,t.ct,C3(t),t.E8t),this.v4t=t.j9t?Hs.fKt:Hs.l4t}get QKt(){return al.W$t}U$t(){return this.w8t?O3(this.w8t.xHt):void 0}get m8t(){return this.w8t?O3(this.w8t.bXt):void 0}get S8t(){return this.w8t?this.w8t.k8t:0}get vS(){return this.w8t?O3(this.w8t.vS):void 0}get sXt(){return this.w8t?O3(this.w8t.sXt):void 0}get L8t(){return this.w8t?O3(this.w8t.L8t):void 0}get TC(){var t;return null==(t=this.w8t)?void 0:t.TC}get N8t(){var t;const i=null==(t=this.w8t)?void 0:t.N8t;return Rt(i)?i:this.x8t}set N8t(t){this.x8t=t}get iY(){var t;return null==(t=this.w8t)?void 0:t.iY}get I8t(){return this.w8t?O3(this.w8t.I8t):void 0}get D8t(){return this.w8t?O3(this.w8t.D8t):void 0}get p8t(){var t,i;return null!=(i=null==(t=this.w8t)?void 0:t.p8t)?i:[]}get A8t(){var t,i;return null!=(i=null==(t=this.w8t)?void 0:t.A8t)?i:[]}get y8t(){var t,i;return null!=(i=null==(t=this.w8t)?void 0:t.y8t)?i:[]}get YHt(){var t,i;return null!=(i=null==(t=this.w8t)?void 0:t.YHt.map((t=>({adIdRegistry:t.C8t,adIdValue:t.j8t}))))?i:[]}constructor(t){super(t,Hs.QS),this.w8t=void 0,this.x8t=void 0}};function O3(t){return null===t?void 0:t}r(),r();var R3=class{get B2t(){return this.M9t.B2t}get O2t(){return this.O8t}get H2t(){return this.M9t.H2t}get Vst(){var t;return null!=(t=this.M9t.Vst)?t:null}get Fst(){const t=this.M9t.R8t;return t?[t]:[]}get Gst(){return this.M9t.Gst}get Wst(){return this.M9t.Wst}nnt(t){this.M9t.nnt(t)}Ax(){this.M9t.Ax()}gn(){return Promise.resolve()}constructor(t,i){this.M9t=t,this.O8t=i}},P3=class{get P8t(){return this.z8t}get B2t(){return this.r3t}get H2t(){return this.B8t}get R8t(){return this.Q$t}get Vst(){return this.K$t}get Gst(){return Qr(this.J$t,(t=>{if(t.kD)return[];const i=t.Uc;if(t===this.K$t&&void 0!==this.Q$t){const t=i.indexOf(this.Q$t);if(t>=0)return i.slice(t+1)}return i}))}get Wst(){return this.J$t.filter((t=>!t.kD))}constructor(t,i){this.r3t=t,this.J$t=[],this.B8t=!1,this.z8t=new R3(this,i)}};r();var z3=class extends xa{ma(){return new B3(this.Kst.Yst())}constructor(t){super("U8t",t)}},B3=class extends va{constructor(t){super("adimpression",t)}};r();var U3=class extends ps{ma(){return new Q3(this.Kst.Yst())}constructor(t){super("Q8t"),this.Kst=t}},Q3=class extends Gs{constructor(t){super("adbuffering"),this.ad=t}};r();var F3=class extends ps{ma(){return new Y3}constructor(){super("F8t")}},Y3=class extends Gs{constructor(){super("admetadata")}},V3=class t extends P3{Y8t(t,i){for(let e=0;e<t;e++){const t=new j3(i);i.r4t(t),this.B2t.yo(new Jh(t))}}z4t(t,i,e){let s=t;s===1/0&&(s=-1);const n=new L3(s,e,i);this.J$t.push(n),i.R3t(n),this.B2t.yo(new Qo(n))}Q5t(t,i){for(const e of this.J$t)j(e.UPt)&&e.f8t===t&&(e.UPt=i,this.B2t.yo(new n3(e)))}I5t(t,i){void 0===i&&(i=!1),i&&Ro(this.J$t,t),this.B2t.yo(new io(t))}S5t(){if(this.Vst){this.I5t(this.Vst,!0);const t=Boolean(this.Q$t&&this.Q$t._4t===Hs.fKt);this.V8t(void 0,t)}}j4t(t,i){const e=i.F9t;if(!e)return;const s=e.s9t-1,n=t.Uc[s];return n.b8t(i),this.B2t.yo(new vr(n)),n.Yl.M$t=e.M$t,n}get H2t(){return this.G8t.H2t}W8t(t){if(!fh(this.Z8t,t)){if(t){if(this.Q$t===t)return;this.Q$t=t;for(const i of this.H8t)this.b9t(i,t,this.G8t.sD)}else{if(!this.Q$t)return;const t=new ic(this.Q$t,this.Q$t.Yl.UPt);this.Z8t.push(this.Q$t),this.Q$t=void 0,this.r3t.yo(t)}Or(this.H8t)}}V8t(t,i){if(t){var e;if((null==(e=this.Vst)?void 0:e.UPt)===t.UPt)return;this.K$t=t,i&&this.B2t.yo(new Va(this.K$t))}else{if(!this.K$t)return;const t=new ir(this.K$t);this.K$t=void 0,Or(this.Z8t),i&&this.r3t.yo(t)}}X8t(t){return this.J$t.filter((i=>Xs(i.UPt,t,.01)))[0]}static q8t(t,i){if(i.F9t)return t.Uc[i.F9t.s9t-1]}xd(t){if(!t.F9t)return;const i=t.F9t,e=this.X8t(i.UPt);e&&(Or(this.H8t),this.V8t(e,t.j9t))}Cd(){this.Vst&&this.B2t.yo(new ir(this.Vst)),Or(this.H8t),this.S5t()}h8t(i){if(!this.K$t&&i.F9t){const t=this.X8t(i.F9t.UPt);this.V8t(t,i.j9t)}if(this.K$t){const e=t.q8t(this.K$t,i);if(!e)return;this.j4t(this.K$t,i);const s=i.N8t;Rt(s)&&!Rt(e.N8t)&&(e.N8t=s,this.B2t.yo(new vr(e))),this.W8t(e),this.B2t.yo(new Nc(this.Q$t,e.Yl.UPt))}else 0}G9t(t,i){if(this.W8t(void 0),!i&&this.Vst){const t=this.Vst;this.V8t(void 0,!1),this.I5t(t)}}x9t(t){const i=t.F9t;if(!i)return;const e=this.X8t(i.UPt);if(!e)return;this.B4t(i.UPt,i.n9t,i.M$t);const s=this.j4t(e,t);s&&this.B2t.yo(new c4(s))}B4t(t,i,e){const s=this.X8t(t);if(!s)return;const n=s.Uc.length;if(i>n){const t=i-n;this.Y8t(t,s),s.M$t=e,this.B2t.yo(new n3(s))}}_9t(i,e,s){if(!this.K$t)return;const n=t.q8t(this.K$t,i);if(n){const t=e/s;this.B2t.yo(new e3(n,t))}}R9t(i,e,s){if(!this.K$t)return;let n=this.Q$t;if(!n){const s=t.q8t(this.K$t,i);if(!s||fh(this.Z8t,s))return void this.H8t.push(e);n=s,this.j4t(this.K$t,i),this.W8t(n)}this.b9t(e,n,s)}b9t(t,i,e){t===bo.s6t?this.B2t.yo(new F3):t===bo.Z5t&&i?this.B2t.yo(new z3(i)):t===bo.q5t&&i?this.B2t.yo(new U3(i)):t===bo.K5t&&i&&e?this.B2t.yo(new ro(i,e)):t===bo.Tqt&&i&&e?this.B2t.yo(new ho(i,e)):t===bo.J5t&&i&&e&&this.B2t.yo(new oo(i,e))}Ax(){this.G8t.Ax()}nnt(t){this.G8t.nnt(t)}tr(){const t=Boolean(this.Q$t&&this.Q$t._4t===Hs.fKt);this.W8t(void 0),this.V8t(void 0,t);for(const t of this.J$t)this.I5t(t);Or(this.J$t),Or(this.H8t),Or(this.Z8t)}gn(){this.tr()}constructor(t,i){super(t,al.W$t),this.G8t=i,this.H8t=[],this.Z8t=[]}};function G3(t){const i=s.google.ima.settings;t.ads&&t.ads.vpaidMode&&s.google.ima.settings.setVpaidMode(function(t){const i=s.google.ima.ImaSdkSettings.VpaidMode;switch(t){case ys.ENABLED:return i.ENABLED;case ys.INSECURE:return i.INSECURE;case ys.DISABLED:default:return i.DISABLED}}(t.ads.vpaidMode)),i.setPlayerVersion("8.11.0"),i.setPlayerType("THEOplayer"),i.setAutoPlayAdBreaks(!0),i.setDisableCustomPlaybackForIOS10Plus(!W3(t));const e=function(t){var i,e,s;const n=null==(e=t.ads)||null==(i=e.googleIma)?void 0:i.language;if(void 0!==n)return n;const r=null==(s=t.ui)?void 0:s.language;if(cs(r))return r;return}(t);e&&i.setLocale(e)}function W3(t){return ui.Ka&&t.allowNativeFullscreen}r();var Z3=class t extends Ve{get P2t(){return this.A5t.P8t}get K8t(){return this.A5t}get Y9t(){return this.s5t}get $9t(){return W3(this.AK)}J8t(t,i,e){i===Pa.Qst&&void 0!==e&&(this.K2t=e),this.s5t.w5t(t,i)}static get O2t(){return al.W$t}get O2t(){return t.O2t}get $8t(){return this.AK.ads.preload===rI.MIDROLL_AND_POSTROLL}nnt(t){const i=this.t7t();for(const e of i)Ie(e.sources,e.timeOffset)||t.o6(e,Pa.Ust,!1)}t7t(){const t=[],{Fst:i,Gst:e}=this.P2t,s=[];for(const n of i.concat(e)){const i=n.Yl.g8t;if(fh(s,i.dk))continue;const e=i.$3t(n.p8t);e>=0?t.push(...i._3t.slice(e)):t.push(...i._3t),s.push(i.dk)}for(const i of this.s5t.Gst)i.E3t||t.push(...i._3t);return Cv(t)}set _4t(t){this.v4t=t}get _4t(){return this.v4t}get S$t(){return this.N$t}set S$t(t){this.N$t=t,this.i7t=!1}nD(){if(!this.S$t)return 0;const t=this.S$t.e8t();return j(this.ct)||t<0?0:this.ct-t}rD(t,i){}_d(){return this.$A||NaN}J4(t){this.$A=t}pD(){return this.ta.mD}yD(t){this.K9t(this.ZD,t,!0)}SD(){return this.hV}p9t(t){this.hV=t}get a8t(){return this.e7t}set a8t(t){this.e7t=t}get unt(){return this.K2t}get X9t(){return this.s7t}get u8t(){return this.n7t}set u8t(t){this.n7t=t}get q9t(){return this.r7t}set q9t(t){this.r7t=t}YD(){var t,i,e;return null!=(e=null==(i=this.S$t)||null==(t=i.B9t())?void 0:t.T8t)?e:0}WD(){var t,i,e;return null!=(e=null==(i=this.S$t)||null==(t=i.B9t())?void 0:t.M8t)?e:0}qI(){return[]}q2t(t){this.r5t=t,this.s5t.q2t(t)}j5t(){!this.i7t&&this.S$t&&(this.S$t.Cn(),this.i7t=!0)}W9t(t){this._4t=t?t.j9t?"linear":"nonlinear":"none"}zD(){return ge.cR().ws()}HD(){return this.ta.ZD}XD(t){this.K9t(t,this.mD,!0)}O9t(){return this.ta.mD?0:this.ta.ZD}K9t(t,i,e){const s=this.ta.ZD!==t||this.ta.mD!==i;s&&(this.ta.ZD=t,this.ta.mD=i),this.S$t&&e&&this.S$t.XD(this.O9t()),s&&this.yo(new B(this.sD,this.ZD))}aD(){return!1}uD(){if(this.o7t&&this.K2t)return this.o7t}lD(){if(this.h7t&&this.K2t)return this.h7t}RD(){return this.T3}S3(t){this.T3=t,this.yo(new hr(this.sD,t))}get c8t(){return this.a7t}set c8t(t){this.a7t=t}iE(){this.ta.fn(Qi.so,this.u7t),this.do||(this.do=!0,this.s5t.iE(),this.o8t())}async sE(){if(this.c7t)return;this.l7t.Dm(),this.l7t=new Ai;const t=this.TD;this.p9t(!1),this.yo(new us(this.sD)),this.d7t()||(this.$9t||this.ta.be(),this.yo(new Oa(this.sD))),this.a8t||(this.u8t=!1);const i=Boolean(this.S$t);this.c7t=this.s5t.v5t();try{await this.c7t}finally{this.c7t=void 0}try{re(this.l7t.wm)}catch(t){return}if(this.do||this.u7t(),!this.o7t||!this.K2t)if(this.S$t){if(t)if(i)try{re(this.l7t.wm),this.S$t.f7t(),this.yo(new fo(this.sD))}catch(t){return}else this.j5t()}else this.K2t||(this.o2t(),this.X2t.sE())}eE(){var t;this.TD||(this.p9t(!0),this.yo(new Ia(this.sD))),this.l7t.Dm(),this.a8t?null==(t=this.S$t)||t.eE():this.u8t=!0}Ax(){var t;null==(t=this.S$t)||t.Ax()}Z9t(){this.S$t&&(this._7t.g7t(),this.S$t.nE(),this.S$t.Mm(),this.S$t=void 0,this._4t="none",this.i7t=!1)}async nE(){var t;this.s8t=0,this.s5t.tr(),this.l7t.Dm(),this.p9t(!0),this.s7t=!1,this.r7t=!1,this.a8t=!1,this.A5t.tr(),this.Z9t(),this.Q9t(),null==(t=this.v7t)||t.tr(),this.u8t=!1,this._7t.Mm()}ge(){this.w7t.ge(),this.$9t&&this.ta.ge()}be(){this.w7t.be()}m7t(){return Boolean(this.S$t)&&fh(this.S$t.p7t(),-1)&&!this.s7t}L3t(){this.s5t.L3t()}B5t(){return this.s5t.B5t}i5t(){this.s5t.i5t()}U5t(){return this.s5t.U5t()}F2t(t){if(this.m7t()){if(t.type===Qi.vp&&this.ta.hD)return!0;if(t.type===Qi.tp)return this.s7t=!0,this._7t.g7t(),!0}return!1}d7t(){return Boolean(this.S$t&&this.S$t.B9t())}async C5t(t){try{this.Z9t();const i=this.A7t();this.w7t.Aq(),this.S$t=await this._7t.C5t(t,this.v7t,i),this.y7t(this.S$t)}catch(t){this.b7t.E9t(t)}}y7t(t){if(t.XD(this.O9t()),this.s5t.p5t===A3.f5t){const i=t.p7t();if(i.length)for(const t of i)this.A5t.z4t(t,this.s5t.e5t);else this.A5t.z4t(this.s5t.e5t.sd,this.s5t.e5t)}this.b7t.tr(),this.b7t.a9t(t)}tE(){if(this.N$t&&this.$9t&&this.d7t())return this.ta.tE()}$D(){return this.$9t&&this.H2t?this.ta.ka:super.$D()}A7t(){const t=!!(this.s5t.p5t===A3.f5t)&&this.$8t;let i,e;void 0!==this.AK.ads.googleIma.uiElements?i=this.AK.ads.googleIma.uiElements:this.AK.ads.showCountdown||(i=[]),void 0!==this.AK.ads.allowedMimeTypes&&(e=this.AK.ads.allowedMimeTypes);return{M7t:e,T7t:i,S7t:t,S8t:this.AK.ads.googleIma.bitrate,N7t:void 0,I7t:this.r5t}}o8t(){if(this.N$t){const t=this.A7t();this.N$t.D7t(t)}}F4t(t){this.o7t=new La(sl.ADVERTISEMENT_ERROR,t.Rp),this.h7t=new Ui(Do.AD_ERROR,"There was a problem playing ads.",this.o7t),this.B2t.yo(bh.Y2t(t))}Q9t(){this.H2t&&(this.ta.ge(),this.o2t(),this.be())}d8t(){var t;if(this.ta.nD()===1/0||0===this.ta.zD().length)return;(null==(t=this.s5t.e5t)?void 0:t.m3t)&&-1!==this.E7t&&(this.ta.rD(this.ta.nD()+this.E7t),this.E7t=-1)}l8t(t){var i,e;this.E7t=null!=(e=null==(i=t.F9t)?void 0:i.M$t)?e:-1}o2t(){super.o2t(),this.ta.ge(),this.$9t&&!this.ta.hD&&this.ta.sE()}d3t(){this.$9t||super.d3t()}async gn(){this.b7t.fn(ac.ua,this.k7t),await super.gn(),this.Z9t(),this._7t.fn("L7t",this.x7t),this._7t.Mm(),this.w7t.Mm(),this.s5t.gn(),this.b7t.gn()}constructor(t,i,e,s,n,r,o){super(t,i),this.do=!1,this.K2t=!1,this.o7t=void 0,this.h7t=void 0,this.E7t=-1,this.v4t="none",this.a7t=!1,this.i7t=!1,this.l7t=new Ai,this.e7t=!1,this.n7t=!1,this.x7t=t=>{this.B2t.yo(t)},this.k7t=t=>{this.o7t=new La(sl.ADVERTISEMENT_ERROR,"Error while recovering from failed IMA ad.",t.error.message),this.h7t=FI(this.o7t)},this.s8t=NaN,this.u7t=()=>{this.do||this.iE()},this.AK=e,this.hV=!0,this.$A=NaN,this.T3=$i.KR,this.s7t=!1,this.r7t=!1,this.A5t=new V3(this.B2t,this),this.b7t=new k3(this,this.ta,this.A5t),this.b7t.yn(ac.ua,this.k7t),this.ta.yn(Qi.so,this.u7t),this.s5t=new y3(this,this.ta,this.X2t,s,this.A5t),this.v7t=o,this._7t=r,this.w7t=n,this.be(),this._7t.yn("L7t",this.x7t)}};r();var H3=class{registerWebImaAdPlayerConstructor(t){this.C7t=t}createAdPlayer(t,i,e){return X3()&&this.C7t?this.C7t(t,i,e):void 0}};function X3(){if(Boolean(oi.google&&oi.google.ima)){return!(1===_.keys(oi.google.ima).length&&oi.google.ima.dai)}return!1}H3.K_=new H3;var q3=class{get L2t(){return Z3.O2t}SV(t){return t&&t.integration===Mi.GOOGLE_IMA}x2t(t,i,e){return H3.K_.createAdPlayer(t,i,e)}o6(t,i,e,s){e.J8t(t,i,s)}YW(t){const i=A2(t.sources);if(!i)return;const e={integration:Mi.GOOGLE_IMA,sources:i,omidAccessModeRules:E3(t.omidAccessModeRules)},s=b2(t.timeOffset);return void 0!==s&&(e.timeOffset=s),e}};Xu.K_.NV(new q3),r(),r(),r(),r();var K3=class extends ps{ma(){return new J3}constructor(){super("q$t")}},J3=class extends Gs{constructor(){super("adloaded")}},$3=-1,t5=class{get I$t(){return this.J$t}get j7t(){return this.O7t}get tct(){return this.Kv}get R7t(){return this.N3t}get P7t(){return this.z7t}get sd(){if(j(this.B7t)){const t=Lh.UKt(this.N3t,this.L$t.t._d());void 0===t||j(t)||(this.B7t=t)}return this.B7t}U7t(){return this.Kv<this.J$t.length}Pc(){let t;return this.Kv<this.J$t.length&&(t=this.J$t[this.Kv],this.Kv++),t}Q7t(t){t.vKt=this,this.J$t.push(t)}async F7t(t){let i=!1;for(const e of this.J$t)try{await e.$n(),i=!0}catch(i){0,Ro(this.J$t,e);const s=e.hnt.sources,n="string"==typeof s?s:s.src;t.yo(bh.V2t(i,n))}return this.z7t=!0,i}O$t(){this.j$t=!0}C$t(){return this.j$t}Y7t(){return this.J$t.some((t=>$2(t).some((t=>t.BHt))))}constructor(t,i){this.J$t=[],this.j$t=!1,this.N3t=t,this.Kv=0,this.L$t=i,this.B7t=NaN,this.z7t=!1,this.O7t=new s4(this,this.L$t)}},i5=class t extends G{get V7t(){let t=0;for(const i of this.G7t)i.C$t()||(t+=1);return t}W7t(){this.H7t.Z7t()}Cn(){this.Co(),this.X7t.yn("ent",this.H7t.q7t)}jn(){this.Eo(),this.X7t.fn("ent",this.H7t.q7t),this.Y4=this.GP,this.H7t.tr();for(const t of this.G7t)t.O$t();Or(this.G7t)}Co(){this.K7t||(this.ta.yn(Qi.Dp,this.J7t),this.K7t=!0)}Eo(){this.K7t&&(this.ta.fn(Qi.Dp,this.J7t),this.K7t=!1)}get Gst(){return this.G7t}$7t(){return this.tti(new H($3,void 0))}iti(t){return this.eti(t,0,0).length>0}sti(t,i){let e,s=0;for(const n of this.G7t){if(n.C$t())continue;const r=n.sd;r>=t&&r<=i&&r>=s&&!j(r)&&(e=n,s=e.sd)}return e}nti(t){return this.tti(new H(t,void 0))}rti(){if(!this.oti&&void 0!==this.r5t){this.oti=!this.G7t.some((t=>j(t.sd)));for(const t of this.G7t)t.sd!==$3&&t.sd<=this.r5t&&!t.C$t()&&t.O$t()}}hti(t){for(const i of t)i.O$t();this.$4t.ati(t),0===this.V7t&&this.Eo()}eti(t,i,e){return this.G7t.filter((s=>{if(s.C$t())return!1;const n=s.sd;return this.uti(n,t)||this.cti(n,t,i,e)}))}uti(t,i){switch(i){case 0:return 0===t;case $3:return t===$3;default:return!1}}cti(t,i,e,s){if(t<0)return!1;const n=t-i;return-1!==n&&n<=e&&n>=-s}lti(i){if(i&&i.length>0){for(const e of i){const i=t.t5t(e.UPt);let s=this.Hvt(e);-1===s&&(this.oti=void 0===this.r5t,this.G7t.push(new t5(i,this.dti)),s=this.G7t.length-1);this.G7t[s].Q7t(e)}this.Co()}}static t5t(t){switch(t){case"start":case"00:00:00":case"00:00:00.000":case"0%":case"0":return"0";case"end":case"100%":return"-1";default:return t}}Hvt(i){const e=t.t5t(i.UPt);return en(this.G7t,(i=>e===t.t5t(i.R7t)))}fti(t){Ro(this.G7t,t)}q2t(t){this.r5t=t,this.oti=void 0===t}constructor(t,i,e,s){super(),this.oti=!1,this.J7t=t=>xe(this.tti(t)),this.tti=async t=>{this.rti();const i=t.currentTime,e=t.currentTime!==$3?this.sti(this.Y4,t.currentTime):this.eti(t.currentTime,0,0)[0];let s,n;const r=this.ta._d()-10;if(n=this.iti($3)&&x.ceil(i)===x.ceil(r)?this.eti($3,10,0).filter((t=>!t.P7t)):this.eti(i,10,0).filter((t=>!t.P7t)),n.length){const t=(await Promise.all(n.map((t=>t.F7t(this.X7t))))).some((t=>!0===t));t&&this.yo(new K3),(!t||!this.H7t.gti||n[0].sd<this.H7t.gti.sd)&&(s=n[0])}e&&(e!==this.H7t.gti&&(s=e),this.hti([e])),s&&(this.H7t.q7t(),this.H7t.gti=s,await this.H7t.Z7t()),j(this.ta._d())||(this.Y4=t.currentTime)},this.ta=t,this.$4t=i,this.dti=new e4(this.$4t,this.ta),this.r5t=void 0,this.oti=!1,t._d()!==1/0?this.GP=0:this.GP=t.nD(),this.Y4=this.GP,this.G7t=[],this.X7t=e,this.H7t=s,this.K7t=!1}};r(),r();var e5=class extends G{get _ti(){return this.t1t}get B2t(){return this.r3t}vti(){this.wti(),this.mti(),this.FF=void 0}pti(t){this.Ati=this.Ati.concat(t)}yti(t){this.bti=this.bti.concat(t)}mti(){this.Ati=[]}wti(){this.bti=[]}Mti(t){for(const i of this.Ati)i.UG===t&&Vu(i.eventURL)}ge(){this._ti.style.display=""}be(){this._ti.style.display="none"}gn(){this.Bo(),this.r3t.Bo(),Xa(this.t1t)}constructor(t,i){super(),this.bti=[],this.Ati=[],this.FF=void 0,this.r3t=new G,this.Tti=t=>{t.stopPropagation(),this.Sti()},this.Sti=()=>{for(const t of this.bti)for(const i of t.PXt)Vu(i.uri)},this.t1t=h.createElement("div"),this.t1t.style.display="none",this.Nti=t,this.Iti=i}};function s5(t,i){let e=i;if(!function(t){return"ui"in t}(t))return e;const s=t.ui.language;let n;if(cs(s)){const i=t.ui.languages;if(!i)return e;n=i[s]}else n=s;return n&&n[i]&&(e=n[i]),e}r(),r();var n5={[vt.Dk]:1,[vt.Ek]:2,[vt.Lk]:2};function r5(t,i){const e=i?i.map((t=>t.toLowerCase())):i;return lt(t.filter((t=>{const i=t.type.toLowerCase();return!!Kc(e)&&-1!==e.indexOf(i)&&s2(i)})),((t,i)=>n5[t.type]-n5[i.type])).map(o5)}function o5(t){return RN({src:t.contentURL,type:t.type,isAdvertisement:!0})}function h5(t,i){return RF(a5(t),a5(i))}function a5(t){return{Ti:t.height,ji:t.width}}function u5(t,i,e,s){const n=function(t,i,e,s){let n,r=1/0;const o=t.filter((t=>!s2(t.type))).filter((t=>void 0===s||-1!==s.indexOf(t.type)));if(o.length){for(const t of o){const s=(x.abs(t.width/i-1)+x.abs(t.height/e-1))/2;s<r&&(r=s,n=t)}return o5(n||o.sort(h5)[0])}}(t,i.width,i.height,e),r=r5(t,e);return n&&r.push(n),Hh({sources:r},s)}var c5=class extends e5{get Dti(){return this.Eti}get sD(){return this.kti.sD}get ct(){let t=this.kti.ct;return j(t)&&this.iqt&&(t=this.iqt.ct||0),t}get hD(){return this.kti.hD}get mD(){return this.kti.mD}set mD(t){this.kti.mD=t,t?this.Mti(U1.dqt):this.Mti(U1.fqt)}get TD(){return this.kti.TD}get OD(){return this.kti.OD}get ZD(){return this.kti.ZD}set ZD(t){this.kti.ZD=t}get FD(){return this.kti.FD}get GD(){return this.kti.GD}get Lti(){return this.xti}sE(){this.kti.TD&&(this.kti.sE(),this.yo(new us(this.sD)),this.Eti&&this.Mti(U1.gqt),this.Eti=!0)}eE(){this.kti.TD||(this.kti.eE(),this.yo(new Ia(this.sD)),this.Mti(U1.vp))}async nE(){var t;null==(t=this.bM)||t.Dm(),this.bM=void 0,this.be(),this.Eti=!1,this.Cti=!0,this.jti(),this.Oti(),await this.Rti()}Pti(t){void 0===t&&(t=!0),this.Eti=!1,t&&this.Mti(U1.Sqt),this.be(),this.Iti()}zti(){var t;const i=null==(t=this.$4t.Ca)?void 0:t.mi,e=new A4(this.Xu,i);return this._ti.appendChild(e.ke),e.yn("Ax",this.Bti),e}Uti(){this.iqt&&this.iqt.qXt.CXt&&(this.e1t=new _4(this._ti),this.e1t._0t=this.iqt.qXt.CXt,this.e1t.yn("clickstart",this.Qti),this.e1t.yn("click",this.Sti))}Fti(t,i){for(const e of this.Ati)if(e.UG===U1.wp){const s=H1(e.tc,i);void 0!==s&&this.Y4<s&&s<=t&&Vu(e.eventURL)}}async Yti(){if(!this.iqt||!this.Vti)return;const t=u5(this.iqt.oqt,this.Vti,this.gM.ads.allowedMimeTypes,this.gM);if(!t.sources.length)return await this.kti.tr(),this.Nti(""),void this.iqt.hXt();this.bM=new Ai,this.Cti=!0,await Te(this.kti.wa(t,this.bM.wm),this.bM),this.kti.ge(),this.iqt.hXt(),this.Uti()}async Gti(t,i,e){this.xti=t,this.iqt=t.BHt,this.kti.yn(Qi.Dp,this.Wti),this.kti.yn(Qi.Km,this.Zti),this.kti.yn(Qi.Ep,this.Hti),this.kti.yn(ZN,this.Ds),this.iqt.WHt&&0!==this.iqt.WHt.length&&this.pti(this.iqt.WHt),this.iqt.qXt&&this.yti(this.iqt.qXt),this.FF=i,this.Vti=e,0!==this.iqt.oqt.length&&(this.kti.yn(ac.ua,this.Xti),await this.Yti(),this.kti.yn(Qi.tp,this.qti),this.kti.yn(Qi.Dp,this.Kti),this.kti.yn(fa.CO,this.Jti),this.kti.yn(Qi.Ap,this.Ds))}MJt(){this.Dti&&this.$ti&&this.Bti()}get $ti(){return this.iqt&&-1!==this.iqt.uqt&&this.kti.sD>=this.iqt.uqt}tii(){this.Mti(U1.hTt),this.xti&&this.B2t.yo(new Nc(this.xti,this.sD))}async Rti(){this.kti.fn(ac.ua,this.Xti),this.kti.fn(Qi.tp,this.qti),this.kti.fn(Qi.Dp,this.Kti),this.kti.fn(fa.CO,this.Ds),this.kti.fn(fa.CO,this.Jti),this.kti.fn(Qi.Ap,this.Ds),this.kti.fn(Qi.Dp,this.Wti),this.kti.fn(Qi.Km,this.Zti),this.kti.fn(Qi.Ep,this.Hti),this.kti.fn(ZN,this.Ds),this.xti&&(this.xti.O$t(),this.B2t.yo(new ic(this.xti,this.sD))),this.eii(),this.vti(),this.jti(),this.Oti(),this.xti=void 0,this.iqt=void 0,this.Vti=void 0,await this.kti.tr(),this.kti.be(),this._ti.style.cursor="",this.sii=0,this.Y4=-1,this.nii&&(this.rii.Rti(),this.nii=!1)}eii(){this.e1t&&(this.e1t.Mm(),this.e1t=void 0)}Oti(){this.oii&&(Xa(this.oii),this.oii=void 0)}jti(){this.r1t&&(this.r1t.gn(),this.r1t=void 0)}hii(){this.nii=!0}aii(){var t;this.oii||(this.oii=h.createElement("div"),this.oii.className="theoplayer-ad-overlay-component theo-ad-remaining-container",this._ti.appendChild(this.oii));const i=null==(t=this.xti)?void 0:t.Yl;if(!i)return;const e=i.Uc.filter(a4);let s=s5(this.gM,"The content will play in")+" "+x.round(i.T$t)+" "+s5(this.gM,"seconds");if(e.length>1){const t=e.filter((t=>t.C$t())).length;s+=". "+s5(this.gM,"Ad")+" "+(t+1)+"/"+e.length}gu(this.oii,s)}constructor(t,i,e,s,n,r,o){super(t,i),this.rii=e,this.gM=s,this.$4t=n,this.Xu=r,this.kti=o,this.Eti=!1,this.sii=0,this.Y4=-1,this.bM=new Ai,this.Cti=!0,this.qti=()=>{this.Pti()},this.Jti=()=>{this.bM=void 0,this.Eti||(this.tii(),this.Eti=!0),this.Cti&&(this.Cti=!1,this.$4t.W7t()),this._ti.style.display="block",this.kti.fn(fa.CO,this.Jti),this.Eti=!0},this.Kti=()=>{const t=this.sD,i=this.ct,e=t/i;(0===this.sii&&e>=.25?(this.Mti(U1.bqt),this.sii=1):1===this.sii&&e>=.5?(this.Mti(U1.Tqt),this.sii=2):2===this.sii&&e>=.75&&(this.Mti(U1.Mqt),this.sii=3),this.Fti(t,i),this.aii(),this.Y4=t,this.iqt)&&(-1!==this.iqt.uqt&&this.iqt.uqt<this.iqt.ct&&(null!=this.r1t||(this.r1t=this.zti()),this.sD<this.iqt.uqt?this.r1t.b0t(this.iqt.uqt-this.sD):this.r1t.T0t()))},this.Xti=()=>{var t,i;this.bM=void 0,this.kti.fn(ac.ua,this.Xti),this.Cti=!0,null==(t=this.FF)||t.$qt(t2.Hqt),this.Eti=!1,this.kti.be();const e=(null==(i=this.kti.bt)?void 0:i.src)||"";this.Nti(e)},this.Wti=()=>{this.Ds(new H(this.sD,void 0))},this.Zti=()=>{this.Ds(new In(this.ct))},this.Hti=()=>{this.Ds(new B(this.sD,this.ZD))},this.Qti=()=>{this.$4t.eE()},this.Bti=()=>{this.xti&&(this.Mti(U1.vqt),this.B2t.yo(new e3(this.xti,this.sD/this.ct)),this.Pti(!1))},this._ti.className="theoplayer-ad-linear",this._ti.style.zIndex="10",Tu(this._ti),this.kti.be(),this.nii=!1}};r(),r();var l5=class t extends Bo{get ke(){return this.Us}S0t(){this.ke.addEventListener("mouseup",this.N0t),this.ke.addEventListener("touchend",this.N0t),this.ke.addEventListener("mousedown",this.uii)}M0t(){this.ke.removeEventListener("mouseup",this.N0t),this.ke.removeEventListener("touchend",this.N0t),this.ke.removeEventListener("mousedown",this.uii)}static cr(){const t=h.createElement("div");return t.className="theoplayer-ad-nonlinear-close",t.style.position="absolute",t.style.right="0",t.style.top="0",t.style.cursor="pointer",t.style.fontSize="1.7em",t.style.lineHeight="0.75em",t}gn(){this.M0t(),Xa(this.Us)}constructor(){super(),this.N0t=t=>{this.yo(new Gs("Ax")),this.uii(t)},this.uii=t=>{t.stopPropagation()},this.Us=t.cr(),this.S0t()}},d5=class extends e5{get cii(){return this.lii}get dii(){return this.lu}vti(){super.vti(),this._ti&&qu(this._ti)}async Gti(t,i,e){this.F$t&&this.Rti(),this.lii=t,this.F$t=t.UHt,0!==this.F$t.WHt.length&&this.pti(this.F$t.WHt),this.FF=i,0!==this.F$t.VHt.length&&(this.yti(this.F$t.VHt[0].tXt),this._ti.addEventListener("error",this.fii),this._ti.addEventListener("load",this.gii),await this.Yti(),this._ii())}MJt(){var t;if(void 0!==this.vii)return;const i=null==(t=this.F$t)?void 0:t.VHt[0];i&&i.Yl&&-1!==i.Yl.uqt&&(this.Mti(U1.vqt),this.B2t.yo(new e3(this.lii,0)),this.wii())}tii(){void 0!==this.lii&&this.B2t.yo(new Nc(this.lii,this.$4t.sD))}nE(){this.Rti(),this.lii=void 0,this.F$t=void 0}Rti(){this.mii(),void 0!==this.lii&&(this.lii.O$t(),this.B2t.yo(new ic(this.lii,this.$4t.sD))),this.vti(),this.pii(),void 0!==this.vii&&(c(this.vii),this.vii=void 0)}mii(){this._ti.removeEventListener("load",this.gii),this._ti.removeEventListener("error",this.fii)}async Yti(){const t=h.createElement("div");t.className="theoplayer-ad-nonlinear-content",t.style.position="relative",t.style.display="inline-block";const i=this.F$t.VHt[0],e=h.createElement("a");if(i.tXt.CXt&&(e.href=i.tXt.CXt,e.target="Uu",e.setAttribute("rel","noopener")),i.qHt){const t=i.qHt,s=h.createElement("iframe");s.src=t.Fqt,e.appendChild(s)}else if(i.HHt){const t=i.HHt,s=h.createElement("img");s.src=t.Fqt,e.appendChild(s)}else if(i.JHt){const t=i.JHt,s=h.createElement("iframe");s.src=t.Fqt,e.appendChild(s)}i.hXt(),e.addEventListener("mousedown",this.Tti),e.addEventListener("touchend",this.Tti),this._ti.firstChild&&(qu(this._ti),this.Rti()),t.appendChild(e),this._ti.appendChild(t),this.ge()}_ii(){var t;if(!this.F$t)return;const i=null==(t=this.F$t.VHt[0].Yl)?void 0:t.uqt;void 0!==i&&-1!==i&&(this.vii=oi.setTimeout(this.Aii,1e3*i))}pii(){this.lu&&(this.lu.fn("Ax",this.yii),this.lu.gn()),this.lu=void 0}get bii(){return this.$4t.Mii()}constructor(t,i,e){super(t,i),this.gii=()=>{this.mii(),this.Mti(U1.kqt),this.Iti()},this.fii=t=>{var i,e;this.mii(),null==(i=this.FF)||i.$qt(t2.qqt);const s=null==(e=this.F$t)?void 0:e.VHt[0];var n,r;const o=null!=(r=null!=(n=null==s?void 0:s.qHt)?n:null==s?void 0:s.HHt)?r:null==s?void 0:s.JHt;var h;this.Nti(null!=(h=null==o?void 0:o.Fqt)?h:"")},this.wii=()=>{this.be(),qu(this._ti),this.Iti(),this.lii=void 0,this.F$t=void 0},this.Aii=()=>{this.lu||(this.vii=void 0,this.lu=new l5,this._ti.children[0].appendChild(this.lu.ke),this.lu.yn("Ax",this.yii))},this.yii=()=>{this.Mti(U1.vqt),this.MJt()},this._ti.className="theoplayer-ad-nonlinear",this._ti.style.position="absolute",this._ti.style.width="100%",this._ti.style.bottom="3em",this._ti.style.zIndex="10",this._ti.style.textAlign="center",this.$4t=e}};r();var f5=class{static async Tii(t,i,e){let s=[],n=t.shift();for(;n;){try{const t=await(new a2).uKt(n,i);s=s.concat(t)}catch(t){0;const i=bh.V2t(t,n.sources.src);e.yo(i)}n=t.shift()}return s}};r(),r(),r();var ct=class extends ps{ma(){return new g5}constructor(){super("Mat")}},g5=class extends Gs{constructor(){super("statechange")}};r();var Ni=function(t){return t.IDLE="idle",t.LOADING="loading",t.DONE="done",t.ERROR="error",t.EVICTED="evicted",t}({});r(),r();var _5=class{get Ju(){return this.Qu}get U(){return this.Qu.length}get ga(){return this.Za||(this.Za=this.ma()),this.Za}VE(t){return this.Qu[t]}yP(t){this.Qu.push(t),this.Za&&this.Za.push(t.ga),this.Sii(t)}Nii(t){for(const i of t)this.yP(i)}Iii(t,i){i>=0&&i<=this.Qu.length&&(this.Qu.splice(i,0,t),this.Za&&this.Za.splice(i,0,t.ga),this.Sii(t))}bP(t){return fh(this.Qu,t)}Rb(t){this.Dii(this.Qu.indexOf(t))}Dii(t){if(!(t>=0&&t<this.Qu.length))return;const i=this.Qu[t];zr(this.Qu,t),this.Za&&zr(this.Za,t),this.Eii(i)}iA(){const t=this.Qu.slice();Or(this.Qu),this.Za&&Or(this.Za);for(const i of t)this.Eii(i)}constructor(){this.Qu=[],this.Za=void 0}},Pu=class extends _5{ma(){return function(t){const i=function(t){const i=t.Ju.map((t=>t.ga));return i.item=i=>{const e=0|i,s=t.VE(e);return s&&s.ga||void 0},i}(t),e=new xi(t,i);return i.addEventListener=(t,i)=>{e.yn(t,i)},i.removeEventListener=(t,i)=>{e.fn(t,i)},i}(this)}yn(t,i){this.kii.yn(t,i)}Rm(t){this.kii.Rm(t)}Bo(){this.kii.Bo()}yo(t){this.kii.yo(t)}fn(t,i){this.kii.fn(t,i)}Um(t){this.kii.Um(t)}Qm(t){this.kii.Qm(t)}Fm(t,i){return this.kii.Fm(t,i)}constructor(...t){super(...t),this.kii=new G,this.Ds=t=>{this.yo(t)}}};r();var v5=class extends Gs{constructor(t){super("addtask"),this.task=t}},w5=class extends ps{ma(){return new v5(this.Lii.ga)}constructor(t){super("xii"),this.Lii=t}};r();var m5=class extends Gs{constructor(t){super("removetask"),this.task=t}},p5=class extends ps{ma(){return new m5(this.task.ga)}constructor(t){super("Cii"),this.task=t}},A5=class extends Pu{Sii(t){this.yo(new w5(t))}Eii(t){this.yo(new p5(t))}constructor(){super()}},y5=class extends Bo{async iE(){await this.jii(),this.Cat("initialised")}async jii(){try{await this.Oii()}catch(t){0}}async Oii(){const t=await this.Vd.frt();for(const i of t){const t=this.Pii.Rii(i.id,i.sourceDescription,i.parameters,this.zii);this.Bii(t),this.MM.yP(t),await t.Uii}}get LS(){return this.xat}Cat(t){this.xat=t,this.yo(new ct)}get Qii(){return this.MM}Rii(t,i,e){void 0===e&&(e="persistent");const s=this.Pii.Fii(t,i,e);return this.Yii(s,e),this.MM.yP(s),this.Bii(s),s}async Yii(t,i){try{await this.Vii(t,i)}catch(t){throw g("Unable to persist task - "+t)}}async Vii(t,i){await this.Vd.crt({key:t.o,id:t.o,sourceDescription:t.wc,parameters:t.$b},i)}Bii(t){t.yn("Mat",(()=>{t.LS===Ni.EVICTED&&this.MM.Rb(t)}))}constructor(t,i,e){super(),this.xat="uninitialised",this.MM=new A5,this.Pii=i,this.zii=e,this.Vd=t,this.iE()}};r(),r(),r(),r();var et=class{get hR(){return this.Gii}get Wii(){return this.Zii}get Hii(){return this.Xii.hR}get qii(){let t=0,i=0;return this.AP.forEach((e=>{t+=e.timeRanges.hR,i+=e.totalQualityDurationToCache})),0===i?0:x.min(1,t/i)}get Xii(){return this.Kii}$P(t){return!!V(this.AP,t.AP)&&(!!of(this.Zii,t.Zii)&&(!!of(this.hR,t.hR)&&(!!of(this.Hii,t.Hii)&&this.Xii.tR(t.Xii))))}constructor(t,i,e){if(this.Zii=t,this.AP=i,this.Gii=e,0===this.AP.size)this.Kii=ge.cR();else{let t=new ge([-1/0,1/0]);this.AP.forEach((i=>{t=t.Sn(i.timeRanges)})),this.Kii=t}}};et.QUALITY_TIME_RANGES_NULL_OBJECT=Ge(),et.CACHE_PROGRESSION_NULL_OBJECT=new et(0,et.QUALITY_TIME_RANGES_NULL_OBJECT,NaN),et.Jii=et.CACHE_PROGRESSION_NULL_OBJECT,r(),r(),r(),r();var b5=class extends Gs{constructor(){super("progress")}},M5=class extends ps{ma(){return new b5}constructor(){super("M4t")}};r(),r();var T5=class extends ai{get name(){return"$ii"}constructor(t,i){super(t,i)}};r(),r(),r();var S5=function(t){return t[t.Dk=0]="Dk",t[t.Ek=1]="Ek",t}({});async function N5(t,i,e){const s=[];for(const n of t.Smt)s.push(I5(n,i,e));return{tei:await Promise.all(s)}}async function I5(t,i,e){const s=[];for(const n of t.wht)D5(n)||s.push(L5(n,i,e));return{Z:await Promise.all(s),Hw:t.Hw}}function D5(t){return t.Nht.every(k5)}var E5=1;function k5(t){return t.xpt!==E5&&Boolean(t.xpt)}async function L5(t,i,e){const s=[];for(const i of t.Nht)k5(i)||s.push(x5(i,e));const n=await Promise.all(s),r=t.Qrt[0],o=t.yF,h=o?function(t,i){const e=[],s=function(t){return t?Re(t,"avc")?ba.VIDEO_H264:Re(t,"hev")||Re(t,"hvc")||Re(t,"hvt")||Re(t,"lhv")||Re(t,"lhe")||Re(t,"lht")?ba.VIDEO_H265:Re(t,"mp4")?ba.VIDEO_MP4:Re(t,"mpeg2")?ba.VIDEO_MPEG2:Re(t,"mpeg")?ba.VIDEO_MPEG:ba.VIDEO_UNKNOWN:ba.VIDEO_UNKNOWN}(t);for(const t of i){const i=t.J6.split(":").pop(),n=t.t9;e.push({mimeType:s,uuid:i,data:n})}const n=S5.Dk,r=Ca;return{type:n,schemeType:r,schemeDatas:e}}(r,o):void 0,a=xZ(t,i,!0);return{gk:n,gs:t.Utt,Hw:t.Hw,KF:h,emt:a}}async function x5(t,i){const e={stack:[],error:void 0,hasError:!1};try{const r=lo(e,new Ai,!1),o=await async function(t,i,e){const s=[],n=t.jot;t.Tdt&&s.push({OP:0,ct:0,iei:t.Tdt});const r=n.iyt();let o=r;for(;o;){if(t._lt(o)){const n=await t.wlt(o,i,e);for(let i=0;i<n.U;i++)s.push(C5(n.Alt(i),t))}else s.push(C5(o,t));o=n.blt(o)}const h=n.ryt(),a=h.RP-r.OP;return{ct:a,Mrt:s}}(t,i,r.wm),h={o:j5(t),IO:o,mF:t.mF,Uv:t.Uv,Ti:t.Ti,Hw:t.Hw,ji:t.ji};switch(t.Hw){case Q.KM:break;case Q.iN:var s,n;h.oft=null!=(n=null==(s=t.oft)?void 0:s._z())?n:NaN;break;case Q.tN:h.audioSamplingRate=t.Dpt}return h}catch(t){e.error=t,e.hasError=!0}finally{os(e)}}function C5(t,i){return{OP:t.OP,ct:t.ct,iei:i.Slt(t)}}function j5(t){return t.ult.Cn+"-"+(""+t.o)}function O5(t,i){const e=function(t){const i=function(t){const i=Ge();for(const e of t){let t=i.get(e.qOt);t||(t={Hw:e.Hw,aC:[]},i.set(e.qOt,t)),t.aC.push(e)}return i}(t),e=rn();return i.forEach((t=>{for(const i of t.aC){let s=e.get(t.Hw);s||(s=Ge(),e.set(t.Hw,s));let n=s.get(i.l);n||(n=[],s.set(i.l,n)),n.push(i)}})),e}(t);return function(t,i){const e=rn();return t.forEach(((t,s)=>{const n=Ge();t.forEach(((t,e)=>{const r=[];for(const e of t){const t=R5(e,s,i);r.push(t)}n.set(e,r)})),e.set(s,n)})),e}(e,i)}function R5(t,i,e){const s=t.qOt,n={eRt:t,IRt:[]};for(const t of e)FJ(i,s,t)&&n.IRt.push(t);return n}async function P5(t,i){const e=await i.eTt([t],{});return dJ(e.US,{},e.nTt)}async function z5(t,i){return kK(t)?async function(t,i){const e=O5(t.aC,t.VPt),s=await async function(t,i){const e=[],s=t.entries();for(let t=s.next();!t.done;t=s.next()){const[s,n]=t.value,r=await Q5(n,s,i);e.push(r)}return e}(e,i),n=await async function(t,i){const e=[];for(const h of t){var s,n;const t=await G5(h.xAt,i);var r,o;t.mF=h.mF,t.Uv=h.Qrt?U5(h.Qrt):"",t.Ti=null!=(r=null==(s=h.Wkt)?void 0:s.Ti)?r:0,t.ji=null!=(o=null==(n=h.Wkt)?void 0:n.ji)?o:0,e.push(t)}return{Hw:Q.QS,Z:[{gs:kY,Hw:Q.QS,gk:e}]}}(t.VPt,i);return s.push(n),{ct:B5(s),eei:[t.xAt],Rmt:[{tei:s}]}}(t,i):function(t){const i=W5(t);return{ct:i.ct,eei:[t.xAt],Rmt:[{tei:[{Hw:Q.QS,Z:[{Hw:Q.QS,gs:kY,gk:[{o:t.xAt,IO:i,mF:0,Uv:"",Ti:0,Hw:Q.QS,ji:0}]}]}]}]}}(t)}function B5(t){let i=-1/0;for(const e of t)for(const t of e.Z)i=x.max(i,...t.gk.map((t=>t.IO.ct)));return i}function U5(t){return[t.eLt,t.nLt,t.cPt].filter(Rt).join(",")}async function Q5(t,i,e){const s=[],n=t.entries();for(let t=n.next();!t.done;t=n.next()){const[,i]=t.value,n=await F5(i,e);s.push(n)}return{Hw:Y5(i),Z:s}}async function F5(t,i){const e=[],s=t[0].eRt;for(const s of t){const t=await V5(s,i);e.push(t)}return{gs:s.gs||kY,Hw:Y5(s.Hw),gk:e}}function Y5(t){switch(t){case dt.tN:return Q.tN;case dt.iN:return Q.iN;case dt.KB:case dt.ZRt:return Q.KM;default:return Q.QS}}function V5(t,i){const e=function(t){const i=t.eRt.xAt,e=t.IRt.map((t=>t.xAt));return i||(e.length?e[0]:void 0)}(t);return G5(e,i)}async function G5(t,i){let e={ct:0,Mrt:[]};if(t){const s=await P5(t,i);LK(s)&&(e=W5(s))}return{o:t||"default",sei:t,IO:e,mF:0,Uv:"",Ti:0,Hw:Q.QS,ji:0}}function W5(t){const i=[];let e,s=0;for(const n of t.Mrt){const t=s;!n.HPt||void 0!==e&&jK(n.HPt.xAt,e)||(i.push(Z5(n.HPt,t)),e=n.HPt.xAt),i.push(H5(n,t)),s+=n.ct}return{ct:s,Mrt:i}}function Z5(t,i){return{OP:i,ct:0,iei:X5(t.xAt)}}function H5(t,i){return{OP:i,ct:t.ct,iei:X5(t.xAt)}}function X5(t){return{Hu:t.lI,wut:t.abt?[t.abt.Cn,t.abt.Cn+t.abt.U]:void 0,dN:!1}}r(),r();var q5=class{async nei(t){if(!t.src)throw new g("Invalid typed source");const i=t.type;if(dh(i))return await this.rei(t);if(cI(i))return await this.oei(t);throw new g("Unexpected source type")}async rei(t){try{const i=await P5(t.src,this.sTt);return await z5(i,this.sTt)}catch(t){throw new g("Unable to fetch HLS manifest")}}async oei(t){try{const i=new $W({yk:me.Ah(t.src),RMt:t.liveOffset,QMt:t.timeServer,dN:t.useCredentials},this.hei,vT.mN,this.sTt,t.dash);return await i.W,await async function(t,i,e){const s=[];for(const n of t.Rmt)s.push(N5(n,i,e));const n=await Promise.all(s);return{ct:t.AAt.npt(),eei:[t.IMt],Rmt:n}}(i.Tr.ydt,t.contentProtection,this.Tlt)}catch(t){throw new g("Unable to fetch DASH manifest")}}constructor(t,i,e){this.sTt=t,this.Tlt=i,this.hei=e}};r();var K5=class{aei(){const t=new pa;return this.uei.push(t),this.cei(),t.rA}async lei(t,i){try{await t}finally{this.dei-=1,this.cei(),0===this.uei.length&&0===this.dei&&i.eA(!0)}}cei(){if(this.uei.length>0&&this.dei<this.fei){this.uei.shift().eA(),this.dei+=1}}constructor(t){this.uei=[],this.dei=0,this.fei=t}};var J5=class extends Bo{get Uii(){return this.iE()}async iE(){const t=new q5(this.sTt,this.Tlt,this.hei);this.$kt=await t.nei(this.gei);const i=function(t,i){if(cs(t)){if(Re(t,"%"))return S(t)/100*i;throw new g("Unexpected - Invalid string supplied as amount to cache.")}return i<t?i:t}(this._Tt.$b.amount,this.$kt.ct);let e;this.Gii=i;const s=AQ(this.$kt.eei[0]),n=(await this.brt.Trt._rt(s,"manifestURL")).filter((t=>fh(t.references,this._Tt.o))),r=[],o=this._Tt.$b.bandwidth;for(const t of this.$kt.Rmt)for(const i of t.tei)for(const t of t6(i,this._Tt.$b.preferredTrackSelection))for(const i of e6(t.gk,o))r.push(i);this._ei=x.ceil(r.map((t=>t.mF*function(t,i){let e=0;for(const s of t.IO.Mrt.map((t=>t.ct)))if(e+=s,e>=i)return e;return e}(t,i)/8)).reduce(((t,i)=>t+i),0));const h=Ge();if(n&&0!==n.length){const t=n.reduce(((t,i)=>t+i.byteSize),0);for(const t of n){const i=t.qualityId,e=new ge(t.startsAndEnds);if(h.has(i))h.get(i).timeRanges=h.get(i).timeRanges.WO(e).GO(5e-4);else{const t=So(r,(t=>t.o===i));var a;const s=x.min(this.Gii,null!=(a=null==t?void 0:t.IO.ct)?a:1/0);h.set(i,{timeRanges:e,totalQualityDurationToCache:s})}}e=new et(t,h,this.Gii)}else{for(const t of r)h.set(t.o,{timeRanges:ge.cR(),totalQualityDurationToCache:x.min(t.IO.ct,this.Gii)});e=new et(0,h,this.Gii)}this.vei=e}get wei(){return this._ei}get vei(){return this.mei}set vei(t){this.mei.$P(t)||(this.mei=t,t.$P(et.Jii)||this.yo(new M5))}async pi(t){await this.do,await this.pei(this.$kt,t)}async pei(t,i){if(!t.eei)throw new g("Unexpected - manifest is missing locations");await this.Aei();const e=[];for(const s of t.Rmt)e.push(this.yei(s,t.eei[0],i));return ds(e)}async Aei(){const t=await this.bei.frt();for(const i of t){const t=await this.brt.Srt.Jp(i.key);if(t)await $5(t,this._Tt.o,this.brt.Srt,this.zii);else try{await this.brt.Srt.crt(i,this.zii)}catch(t){throw new T5("Unable to store manifest with url: "+i.locationURL,t)}}await this.bei.wrt()}yei(t,i,e){const s=[];for(const n of t.tei){const t=t6(n,this._Tt.$b.preferredTrackSelection);for(const n of t)s.push(this.Mei(n,i,e))}return ds(s)}async Mei(t,i,e){const s=this._Tt.$b.bandwidth,n=e6(t.gk,s);t.Hw===Q.iN&&t.emt&&t.emt.sQ.widevine&&"persistent"===t.emt.sQ.widevine.licenseType&&(await this.Tei(t.emt),re(e));const r=[];for(const t of n)r.push(this.Sei(t,i,e));return ds(r)}async Sei(t,i,e){re(e);const s=t.IO.Mrt[0].OP+this.Gii,n=[];let r=!1;for(const o of t.IO.Mrt){if(o.OP>=s||this.stopIfFailed(r))break;await this.Nei(e),await this.Iei.aei(),n.push(this.Iei.lei(this.Dei(o,t,i),this.Eei).catch((t=>(r=!0,Promise.reject(t)))))}return ds(n)}async Nei(t){if(null==t?void 0:t.gm)throw await this.Eei.rA,new Rh}async kei(){return await this.do.catch(ul),this.$kt}Tei(t){return Promise.resolve()}Lei(){return me.lw("License renewal unsupported in this SDK."),Promise.resolve()}async Dei(t,i,e){const s=this.brt.Trt,n=Gc(t.iei.Hu,t.iei.wut),r=await s.Jp(n);if(r)await $5(r,this._Tt.o,s,this.zii),this.xei(r,!1);else try{const s=await this.Cei(t.iei),{segmentMetadataEntry:n,segmentEntry:r}=this.jei(t,i,e,s);await this.brt.yrt((async t=>{await t.Trt.crt(n,this.zii),await t.Mrt.crt(r,this.zii)})),this.xei(n,!0)}catch(i){throw new T5("Unable to store segment with url: "+t.iei.Hu,i)}}async Cei(t){const i=await this.Nct.cut(t,{Aut:this.DEFAULT_CACHING_SEGMENT_TIMEOUT,uN:this.DEFAULT_CACHING_SEGMENT_CONNECTION_TIMEOUT});return await this.Ict(i)}async Ict(t){return{buffer:await t.gS()}}jei(t,i,e,s){const n=Gc(t.iei.Hu,t.iei.wut),r=t.OP,o=t.ct,h=this.Oei(s);return{segmentMetadataEntry:{key:n,segmentURLsegmentByteRange:n,manifestURL:AQ(e),qualityId:i.o,byteSize:h,startsAndEnds:new ge([r,r+o]).jO,references:[this._Tt.o]},segmentEntry:{key:n,segmentURLsegmentByteRange:n,manifestURL:AQ(e),data:s,references:[this._Tt.o]}}}Oei(t){return t.buffer.byteLength}xei(t,i){const e=t.qualityId,s=this.mei,n=s.AP;n.get(e).timeRanges=n.get(e).timeRanges.WO(new ge(t.startsAndEnds)).GO(5e-4),this.vei=new et(i?s.Wii+t.byteSize:s.Wii,n,this.Gii)}stopIfFailed(t){return!1}constructor(t,i,e,s,n,r,o,h){super(),this.DEFAULT_CACHING_SEGMENT_TIMEOUT=3e4,this.DEFAULT_CACHING_SEGMENT_CONNECTION_TIMEOUT=0,this.Eei=new pa,this.mei=et.Jii,this._Tt=t,this.brt=i,this.sTt=e,this.bei=s,this.Nct=n,this.Tlt=r,this.hei=h,this.zii=o,this._ei=-1;const a=this._Tt.wc.sources[0];this.gei=a,this.do=this.iE(),this.Iei=new K5(this._Tt.$b.parallelTasksThreshold)}};async function $5(t,i,e,s){fh(t.references,i)||(t.references.push(i),await e.crt(t,s))}function t6(t,i){switch(t.Hw){case Q.tN:return i6(t.Z,i.audioTrackSelection);case Q.KM:return i6(t.Z,i.textTrackSelection);default:return i6(t.Z,[])}}function i6(t,i){if(0===i.length)return t.length?[t[0]]:[];const e=[];for(const s of t)i.indexOf(s.gs)>-1&&e.push(s);return e}function e6(t,i){if(!t.length)return[];const e=[...t].sort(PF),s=e.filter((t=>t.mF<=i));return s.length>0?[s.pop()]:[e.shift()]}var s6=class{async Rei(){await this.brt.yrt((async t=>{await this.Pei(t),await this.zei(t),await this.Bei(t),await this.Uei(t)}))}async Pei(t){const i=t.Nrt,e=this._Tt.o;await i.Rb(e)}async zei(t){const i=t.Trt,e=t.Mrt,s=this._Tt.wc.sources[0];if(!gs(s))return;const n=AQ(s.src),r=(await i._rt(n,"manifestURL")).filter((t=>fh(t.references,this._Tt.o)));for(const t of r)Ro(t.references,this._Tt.o),0===t.references.length?(await i.Rb(t.key),await e.Rb(t.key)):await i.crt(t)}async Bei(t){const i=t.Srt,e=this.Qei(),s=(await i.irt(e)).filter((t=>fh(t.references,this._Tt.o)));for(const t of s)Ro(t.references,this._Tt.o),0===t.references.length?await i.Rb(t.key):await i.crt(t)}Qei(){if(!this.$kt)return[];const t=this._Tt.wc.sources[0];if(!gs(t))return[];const i=AQ(t.src),e=function(t){if(!t)return[];const i=[];for(const e of t.Rmt)for(const t of e.tei)for(const e of t.Z)for(const t of e.gk)t.sei&&i.push(t.sei);return function(t){return t.reduce(((t,i)=>(t.indexOf(i)<0&&t.push(i),t)),[])}(i)}(this.$kt).map((t=>({src:t}))).map((t=>AQ(t.src)));return[i,...e]}async Uei(t){const i=t.Irt,e=(await i.frt()).filter((t=>fh(t.references,this._Tt.o)));for(const t of e)Ro(t.references,this._Tt.o),0===t.references.length?(await i.Rb(t.key),this.Fei(t)):await i.crt(t)}Fei(t){}constructor(t,i,e){this._Tt=t,this.brt=i,this.$kt=e}},n6=new class{uet(t,i,e){return new s6(t,i,e)}};r(),r();var r6=class{get ga(){return this.Za||(this.Za=function(t){return{renew(i){t.Yei(i)}}}(this)),this.Za}Yei(t){this.Vei(t)}async Vei(t){try{await this.Gei.Lei(t)}catch(t){0,this.UN.Cat(Ni.ERROR)}}constructor(t,i){this.UN=t,this.Gei=i}},o6=class extends G{get Uii(){return this.Gei.Uii}get ga(){return this.Za||(this.Za=function(t){let i,e={get id(){return t.o},get status(){return t.LS},get source(){return t.wc},get parameters(){return t.$b},get duration(){return t.ct},get cached(){return t.Wei.ws()},get secondsCached(){return t.Zei},get percentageCached(){return t.Hei},get bytes(){return t.Xei},get bytesCached(){return t.qei},get license(){return t.qZ.ga},start(){t.Cn()},pause(){t.eE()},remove(){t.Rb()},addEventListener(t,e){i.yn(t,e)},removeEventListener(t,e){i.fn(t,e)}};return i=new Ao(t,["M4t","Mat"],e),e}(this)),this.Za}get o(){return this.Nb}get qZ(){return this.Kei}get LS(){return this.xat}Cat(t){this.xat!==t&&(this.xat=t,this.yo(new ct))}get wc(){return this.kc}get $b(){return this.Jei}get ct(){return this.Gei.vei.hR}get Wei(){return this.Gei.vei.Xii}get Zei(){return this.Gei.vei.Hii}get Hei(){return this.Gei.vei.qii}get Xei(){return this.Gei.wei}get qei(){return this.Gei.vei.Wii}Cn(){this.xat===Ni.EVICTED||this.xat===Ni.DONE||this.$ei()}async $ei(){try{this.Cat(Ni.LOADING);const t=new Ai;this.tsi=t,await this.Gei.pi(t.wm),this.Cat(Ni.DONE)}catch(t){F(t)?this.Cat(Ni.IDLE):this.Cat(Ni.ERROR)}finally{this.tsi.Mm()}}eE(){this.tsi.Dm()}Rb(){this.LS===Ni.LOADING?(this.yn("Mat",this.evictOnLoading),this.eE()):this.isi()}async isi(){try{const t=await this.Gei.kei();await n6.uet(this,this.brt,t).Rei(),this.Gei.vei=et.Jii,this.Cat(Ni.EVICTED)}catch(t){0,this.Cat(Ni.ERROR)}}constructor(t,i,e,s,n,r){super(),this.tsi=new Ai,this.evictOnLoading=()=>{this.fn("Mat",this.evictOnLoading),this.isi()},this.Nb=t,this.kc=i,this.Jei=e,this.brt=s,this.Gei=n.uet(this,this.brt,r),this.Kei=new r6(this,this.Gei),this.xat=1===this.Gei.vei.qii?Ni.DONE:Ni.IDLE,this.Gei.yn("M4t",(t=>{this.Ds(t),1===this.Hei&&this.Cat(Ni.DONE)}));const o=new Date,h=this.Jei.expirationDate.getTime()-o.getTime();(function(t){return t<2147483647})(h)&&u((()=>this.isi()),h)}};var h6=class{Fii(t,i,e){const s=Po();return this.Rii(s,t,i,e)}Rii(t,i,e,s){return new o6(t,i,e,this.brt,this.esi,s)}constructor(t,i){this.brt=t,this.esi=i}};r();var a6=30,u6=5;function c6(t){if(!t)throw new g("Unexpected - The cache parameters are undefined");const i=function(t){if(cs(t)&&!Re(t,"%"))return C(t);return t}(t.amount);!function(t){if(function(t){return cs(t)&&Re(t,"%")}(t)){const i=S(t);if(j(i)||i<0||i>100)throw new g("The amount as percentage must be between 0 and 100 percent.")}if(!cs(t)&&j(t))throw new g("The amount must be a number or a string")}(i);const e=function(t){if(!t)return function(){const t=new Date;return t.setMinutes(t.getMinutes()+a6),t}();return t}(t.expirationDate);!function(t){if(t&&!function(t){return!t||pd(t)&&t>new Date}(t))throw new g("Invalid expiration date for the cache parameters")}(e);const s=function(t){if(void 0===t)return 1/0;return t}(t.bandwidth);!function(t){if(j(t)||t<0)throw new g("The bandwidth must be between zero and infinity.")}(s);const n=function(t){if(!t)return u6;if(j(t))throw new g("The amount must be a number");return t}(t.numberOfParallelTasks);return{amount:i,expirationDate:e,bandwidth:s,parallelTasksThreshold:n,preferredTrackSelection:{audioTrackSelection:[],textTrackSelection:[]}}}var l6=class{set gti(t){this.ssi=t,this.nsi=0,this.rsi=0,this.osi=void 0}get gti(){return this.ssi}O5t(){if(!this.ssi)return;const t=this.ssi.I$t;for(;this.nsi<t.length;){const i=t[this.nsi];for(void 0===this.osi&&(this.osi=$2(i),this.rsi=0);this.rsi<this.osi.length;){const t=this.osi[this.rsi];if(this.rsi++,void 0!==t.BHt)return t.BHt}this.nsi++,this.osi=void 0}}tr(){for(this.gti=void 0,this.bM.Dm(),this.bM=new Ai;this.hsi.length;)this.q7t()}asi(t){return new y5(this.brt.Nrt,t,"temporary")}async mGt(t){const i=r5(t.oqt,this.AK.ads.allowedMimeTypes);if(!i.length)return;const e=await fu.K_.ZY(i,Hh({sources:i}));if(!e.t.OY())return;this.Gei||(this.Gei=new this.esi(this.dU));const s=this.brt,n=new h6(s,this.Gei),r=this.asi(n).Rii(Hh({sources:e.wc}),c6({amount:10,bandwidth:fc.K_.hF()||this.dV.bq}),"temporary");this.hsi.push(r);const o=this.Gei.uet(r,s,"temporary");this.bM.Dm(),this.bM=new Ai,Te(o.pi(this.bM.wm),this.bM).then(ul),this.usi(o,t)}constructor(t,i,e,s){this.hsi=[],this.nsi=0,this.rsi=0,this.Z7t=async()=>{const t=this.O5t();t&&await this.mGt(t)},this.q7t=()=>{const t=this.hsi.shift();null==t||t.Rb()},this.usi=async(t,i)=>{let e=!1;for(;!e;)await t.Fm("M4t"),e=1===t.vei.qii;i.ct<5&&this.Z7t()},this.AK=t,this.dU=i,this.bM=new Ai,this.esi=e,this.dV=s,this.brt=new IQ}};r(),r();var d6={key:"",segmentURLsegmentByteRange:"",manifestURL:"",qualityId:"",byteSize:0,startsAndEnds:new ge([0,0]).jO,references:[]},f6={key:"",segmentURLsegmentByteRange:"",manifestURL:"",data:""},g6=class t extends VF{async Qlt(t,i,e,s){try{return await super.Qlt(t,i,e,s)}catch(t){wh(t)}const n=await this.lsi.Qlt(t,i,e,s);return await this.dsi(t,i,n),n}async dsi(i,e,s){if(void 0===this.fsi)return;const n=this.brt.Trt,r=Gc(i,e),o=await n.Jp(r);if(o)await $5(o,this.fsi,n,this.zii);else try{const i={buffer:s},{segmentMetadataEntry:e,segmentEntry:n}=t.jei(r,i,this.fsi);await this.brt.yrt((async t=>{await t.Trt.crt(e,this.zii),await t.Mrt.crt(n,this.zii)}))}catch(t){throw new T5("Unable to store segment with url: "+i,t)}}static jei(t,i,e){return{segmentMetadataEntry:il({},d6,{key:t,segmentURLsegmentByteRange:t,references:[e]}),segmentEntry:il({},f6,{key:t,segmentURLsegmentByteRange:t,data:i,references:[e]})}}constructor(t,i,e,s,n){super(t),this.lsi=new YF(i),this.brt=e,this.fsi=s,this.zii=n}};var _6=class{uet(t,i,e){void 0===e&&(e="persistent");const s=t.wc.sources[0];if(dI(s))throw new g("Caching THEOlive sources is not supported");const n=Boolean(s.useCredentials),r=new JQ(this.dU,Fh.QS),o=new gZ(this.dU,n),h=new yQ(i.Srt,i.Trt,i.Mrt,i.Irt),a=function(t,i,e,s,n){return new g6(i,t,e,s,n)}(this.dU,h,i,t.o,e),u=new NQ,c=new pZ(mZ(o,h),u,t);return this.gsi(t,i,c,u,r,a,e)}constructor(t){this.dU=t}},v6=class extends _6{gsi(t,i,e,s,n,r,o){return new J5(t,i,e,s,n,r,o,kQ())}},w6=v6,m6=class t extends Ve{get P2t(){return this}static get O2t(){return al.G$t}get O2t(){return t.O2t}J8t(t,i,e){i===Pa.Ust&&this.j9?xe(this.C5t([t])):this._si.push(t)}nD(){return this.vsi.Dti?this.vsi.sD:this.fst()}rD(t,i){}_d(){return this.vsi.ct}aD(){return this.vsi.hD}uD(){}lD(){}pD(){return this.vsi.mD}yD(t){this.mD!==t&&(this.vsi.mD=t,this.yo(new B(this.sD,this.ZD)))}SD(){return this.vsi.TD}RD(){return this.vsi.OD}zD(){return ge.cR().ws()}YD(){return this.vsi.FD}WD(){return this.vsi.GD}HD(){return this.vsi.ZD}XD(t){this.ZD!==t&&(this.vsi.ZD=t,this.yo(new B(this.sD,this.ZD)))}async sE(){if(this.wsi)return;this.yo(new us(this.sD)),this.msi(),this._si.length&&(this.wsi=this.C5t(this._si),await this.wsi,this.wsi=void 0),await this.psi.nti(this.ta.nD());const t=this.Asi;4!==t&&1!==t&&5!==t||(!this.K$t&&this.ysi.length?this.bsi():this.K$t?(this.Msi=!0,this.vsi.sE()):(this.o2t(),this.ta.sE()),this.Asi=3)}eE(){3===this.Asi&&(this.vsi.eE(),this.Asi=4)}W7t(){this.psi.W7t()}Cn(){this.Asi=1,this.psi.Cn()}async nE(){this.psi&&(this.psi.jn(),this.Tsi(!1),this.rii.nE(),this.Asi=5,this.K$t&&(this.psi.fti(this.K$t.vKt),this.K$t=void 0)),this.j9=!1,this.Msi=!1,Or(this.ysi),this.H2t&&(this.o2t(),this.ta.ge()),Or(this._si),await this.vsi.nE(),await this.kti.tr()}Ax(){this.vsi.MJt(),this.rii.MJt()}iE(){this.kti.iE(),this.msi()}F2t(t){return!(t.type!==Qi.tp||!this.psi||!this.psi.iti(-1))&&(this.psi.$7t().then(ul),!0)}ge(){void 0!==this.vsi.Lti&&(this.kti.ge(),this.vsi.ge()),void 0!==this.rii.cii&&this.rii.ge()}be(){this.kti.be(),this.vsi.be(),this.rii.be()}async C5t(t){const i=await f5.Tii(t,this.dU,this.B2t);if(!i.length){const t="Ads could not be loaded.";return this.B2t.yo(bh.V2t(new Ji(Oc.ADBLOCK,na.FILE_NOT_FOUND),t)),void(this.j9&&!this.K$t&&0===this.ysi.length&&this.Ssi())}this.psi.lti(i),this.B2t.yo(new cl),this.H2t||this.ta.TD||this.psi.nti(this.ta.nD()),0!==this.Asi&&5!==this.Asi||this.Cn()}ati(t){this.ysi.push(...t);for(const i of t)this.j9&&!this.H2t&&this.bsi()}async bsi(){if(2!==this.Asi&&!this.Nsi){0,this.Nsi=!0,this.Asi=2;const t=this.K$t;this.Isi(),this.K$t?(await this.K$t.vKt.F7t(this.B2t),this.Dsi()||(this.Nsi=!1),this.B2t.yo(new o3(this.Esi(this.K$t))),await this.ksi()):((null==t?void 0:t.vKt.Y7t())&&this.B2t.yo(new ir(this.Esi(t))),this.Nsi=!1,this.Asi=1,this.Ssi())}}Ssi(){this.o2t(),this.ta.ge(),this.ta.hD?this.ta.yo(new ce(this.ta.nD())):this.ta.sE()}Isi(){let t;if(this.K$t&&this.Dsi())t=this.K$t.vKt;else{if(0===this.ysi.length)return;t=this.ysi.shift()}if(!t)return;const i=t.Pc();i?this.K$t=i:(this.K$t&&(this.psi.fti(this.K$t.vKt),this.K$t=void 0),this.K$t=void 0)}async ksi(){const t=this.K$t?function(t){var i,e;const s=null==(e=t.YKt)||null==(i=e.MHt)?void 0:i.THt();return void 0===s?void 0:new J2(s)}(this.K$t):void 0;if(t){if(!this.K$t)return;this.Lsi=t,this.xsi(this.K$t.WHt),this.Csi(U1.Pqt);const i=this.Lsi.Pc();this.K$t.vKt.Y7t()&&(this.rii.Rti(),1===this.K$t.vKt.tct&&this.B2t.yo(new Va(this.Esi(this.K$t)))),await this.Gti(i)}else this.Asi=1,this.Nsi=!1,this.K$t=void 0,this.bsi()}async Gti(t){if(t){var i;let s=Rt(t.BHt),n=Rt(t.FHt);var e;const r=null!=(e=null==(i=t.QHt)?void 0:i.dXt)?e:[],o=r.length>0,h=this.K$t,a=this.Esi(h);if(t.BHt){if(t.BHt.Yl=h,void 0!==h.hnt.skipOffset){const i=Lh.UKt(h.hnt.skipOffset,t.BHt.ct);i&&i<t.BHt.ct&&(t.BHt.uqt=i)}const i=a.D$t(t.BHt,r,t.YHt,h.hnt);this.rii.Rti(),this.o3t(),await this.vsi.Gti(i,t.lt,{width:this.ta.ke.offsetWidth,height:this.ta.ke.offsetHeight}),s=!0}if(t.FHt){const i=t.FHt.VHt[0];if(i.Yl=h,void 0!==h.hnt.skipOffset){const t=Lh.UKt(h.hnt.skipOffset,this.ta._d());t&&(i.Yl.uqt=t)}const e=s?[]:r,o=a.E$t(i,e,t.FHt,t.YHt,h.hnt);s&&this.vsi.hii(),await this.rii.Gti(o,t.lt,{width:this.ta.ke.offsetWidth,height:this.ta.ke.offsetHeight}),n=!0}if(s){this.Asi=3,this.vsi.ge();const t=0===a.UPt;this.Msi=t,this.kti.eE(),this.vsi.sE(),this.ta.eE(),this.ta.be(),this.o3t(),this.vsi.tii()}n&&(this.Asi=3,this.rii.ge(),this.rii.tii()),(s||n||o)&&this.jsi(t.RHt),s||n||await this.Osi(),!s&&n&&(this.Dsi()||this.ysi.length>0?this.bsi():(this.Ssi(),this.K$t=h))}else null===t?await this.Osi():this.Tsi(!0)}Osi(){const t=this.Lsi;return this.Gti(t&&t.Pc())}Tsi(t){this.Csi(U1.zqt),this.Rsi(),this.Asi=1;const i=void 0!==this.K$t&&this.K$t.vKt.U7t();if(this.Nsi=!1,i)t&&(this.Asi=1,this.bsi());else{if(!this.H2t)return;this.ta.ge(),!this.ta.hD&&t&&this.ta.sE(),this.o2t()}}o2t(){this.Psi(),super.o2t()}Psi(){if(this.ta.hD&&(this.Asi=5),this.K$t){const t=this.K$t.vKt;t.Y7t()&&this.B2t.yo(new ir(this.Esi(this.K$t))),this.psi.fti(t),this.K$t=void 0}}xsi(t){this.zsi=this.zsi.concat(t)}Rsi(){this.zsi=[]}Bsi(t){this.ta.ke.appendChild(t)}Csi(t){for(const i of this.zsi)i.UG===t&&Vu(i.eventURL)}jsi(t){this.vsi.Mti(U1.kqt);for(const i of t)Vu(i)}get Vst(){return this.K$t?this.Esi(this.K$t):null}get Fst(){return this.K$t?[this.vsi.Lti,this.rii.cii].filter(Rt):[]}get Gst(){const t=this.ysi.concat(this.psi.Gst.filter((t=>!t.C$t())));return Qr(t,(t=>t.j7t.Uc.filter((t=>!t.C$t()))))}get Wst(){return this.psi.Gst.map((t=>t.j7t))}nnt(t){const i=this.t7t();for(const e of i)Ie(e.sources,e.timeOffset)||t.o6(e,Pa.Ust,!1)}t7t(){const t=[];for(const i of this.Fst.concat(this.Gst))t.push(i.hnt);const i=this.ysi.concat(this.psi.Gst.filter((t=>!t.C$t())));for(const e of i)for(const i of e.I$t)i.W||t.push(i.hnt);return t.push(...this._si),Cv(t)}Dsi(){return!!this.K$t&&$2(this.K$t).some((t=>t.BHt))}Esi(t){return t.vKt.j7t}Mii(){return this.Usi}tE(){return this.kti.tE()}qI(){return this.kti.qI()}q2t(t){this.psi.q2t(t)}async gn(){await super.gn(),this.ta.fn(Qi.so,this.msi),this.B2t.vX(this.vsi.B2t),this.B2t.vX(this.rii.B2t),this.B2t.vX(this.psi),this.vsi.gn(),this.rii.gn(),await this.kti.gn()}constructor(t,i,e,s,n,r){super(t,i),this.ysi=[],this.Asi=0,this.zsi=[],this.Nsi=!1,this.j9=!1,this.Msi=!0,this._si=[],this.Qsi=t=>{t.type===Qi.so&&this.Msi?this.Msi=!1:this.yo(t)},this.msi=()=>{this.j9=!0},this.Fsi=async()=>(this.Asi=1,await this.vsi.Rti(),this.Gti(this.Lsi.Pc())),this.Ysi=async t=>{const i=new Ji(Oc.PLAYBACK,na.GENERAL_LINEAR_ERROR,"There was a problem playing a linear ad.");return this.B2t.yo(bh.V2t(i,t)),await this.vsi.Rti(),this.Gti(this.Lsi.Pc())},this.Vsi=()=>(this.rii.Rti(),this.Gti(this.Lsi.Pc())),this.Gsi=t=>{const i=new Ji(Oc.PLAYBACK,na.GENERAL_NON_LINEAR_ERROR,"There was a problem playing a non linear ad.");return this.B2t.yo(bh.V2t(i,t)),this.rii.Rti(),this.Gti(this.Lsi.Pc())},this.dU=r,this.kti=e,this.rii=new d5(this.Gsi,this.Vsi,this),this.vsi=new c5(this.Ysi,this.Fsi,this.rii,s,this,t.Ou,e),this.Bsi(this.rii._ti),this.Bsi(this.vsi._ti);const o=new l6(s,r,v6,n);this.psi=new i5(this.ta,this,this.B2t,o),this.vsi.Rm(this.Qsi),this.rii.Rm(this.Ds),this.B2t.iu(this.vsi.B2t),this.B2t.iu(this.rii.B2t),this.B2t.iu(this.psi),this.Usi=new e4(this,this.ta),this.Ou.yn(Ah.pn,this.Ds),this.ta.yn(Qi.so,this.msi)}};Xu.K_.NV(new class{get L2t(){return m6.O2t}SV(t){return t&&("string"!=typeof t.integration||t.integration===Mi.DEFAULT||t.integration===Mi.CSAI||t.integration===Mi.THEO)}x2t(t,i,e){const s=new hx(t.ke,e,t.GI,t.nst,t.qD,t.ust,t.zl);return new m6(t,i,s,e,t.nst,t.GI)}o6(t,i,e,s){e.J8t(t,i,s)}YW(t){const i=A2(t.sources);if(!i)return;const e={integration:Mi.CSAI,sources:i};"vast"===e.sources.type&&void 0===t.timeOffset?t.timeOffset=0:"vmap"===e.sources.type&&void 0!==t.timeOffset&&ae("Do not set timeOffset for VMAP ad sources. VMAP ads have their own offsets included.");const s=b2(t.timeOffset);void 0!==s&&(e.timeOffset=s);const n=b2(t.skipOffset);return void 0!==n&&(e.skipOffset=n),e}}),r(),r();var p6=class{Aq(){var t;this.N6||(null==(t=this.w7t)||t.initialize(),this.N6=!0)}get _ti(){return this.t1t}get Wsi(){return this.Zsi.offsetHeight}get Hsi(){return this.Zsi.offsetWidth}get Xsi(){return this.w7t}qsi(t){"linear"===t?this.t1t.style.marginTop="0px":"nonlinear"===t&&(this.t1t.style.marginTop="-45px")}ge(){this.t1t.style.opacity="1",this.t1t.style.pointerEvents=""}be(){this.t1t.style.opacity="0",this.t1t.style.pointerEvents="none"}Mm(){var t;null==(t=this.w7t)||t.destroy(),this.w7t=void 0}constructor(t,i){this.w7t=void 0,this.N6=!1,this.Lit=t;const e=h.createElement("div");e.className="theoplayer-ima-wrapper",Tu(e),e.style.zIndex="10",ui.Qs&&function(t,i){t.addEventListener(i,Nd)}(e,"mousedown"),i.appendChild(e);const s=h.createElement("div");s.className="theoplayer-ima",s.style.height="100%",this.Zsi=s,e.appendChild(s),this.t1t=e,this.w7t=new google.ima.AdDisplayContainer(this.Zsi,this.Lit)}};r(),r(),r();var A6=class{get KXt(){return this.Ksi.getAdId()}get F9t(){const t=this.Ksi.getAdPodInfo();if(void 0!==t)try{return{s9t:t.getAdPosition(),M$t:t.getMaxDuration(),Jsi:t.getPodIndex(),UPt:t.getTimeOffset(),n9t:t.getTotalAds(),$si:t.getIsBumper()}}catch(t){return}}get xHt(){return this.Ksi.getAdSystem()}get tni(){return this.Ksi.getAdvertiserName()}get bXt(){var t;return null!=(t=this.Ksi.getApiFramework())?t:void 0}get QHt(){return this.fXt.map((t=>({TXt:t.getAdSlotId(),vS:t.getContentType(),A4t:t.getContent(),Ti:t.getHeight(),ji:t.getWidth()})))}get vS(){var t;return null!=(t=this.Ksi.getContentType())?t:void 0}get sXt(){return this.Ksi.getCreativeId()}get L8t(){return this.Ksi.getCreativeAdId()}get ini(){return this.Ksi.getDealId()}get TC(){return this.Ksi.getDescription()}get ct(){return this.Ksi.getDuration()}get ji(){return this.Ksi.getWidth()}get Ti(){return this.Ksi.getHeight()}get N8t(){var t;return null!=(t=this.Ksi.getMediaUrl())?t:void 0}get eni(){return this.Ksi.getMinSuggestedDuration()}get E8t(){return this.Ksi.getSkipTimeOffset()}get sni(){return this.Ksi.getSurveyUrl()}get iY(){return this.Ksi.getTitle()}get I8t(){return this.Ksi.getTraffickingParameters()}get D8t(){return this.Ksi.getTraffickingParametersString()}get YHt(){return this.Ksi.getUniversalAdIds().map((t=>({C8t:t.getAdIdRegistry(),j8t:t.getAdIdValue()})))}get T7t(){return this.Ksi.getUiElements()}get k8t(){return this.Ksi.getVastMediaBitrate()}get T8t(){return this.Ksi.getVastMediaHeight()}get M8t(){return this.Ksi.getVastMediaWidth()}get p8t(){return this.Ksi.getWrapperAdIds()}get A8t(){return this.Ksi.getWrapperAdSystems()}get y8t(){return this.Ksi.getWrapperCreativeIds()}get j9t(){return this.Ksi.isLinear()}constructor(t){this.Ksi=t;const i=new google.ima.CompanionAdSelectionSettings;i.resourceType=google.ima.CompanionAdSelectionSettings.ResourceType.ALL,i.creativeType=google.ima.CompanionAdSelectionSettings.CreativeType.ALL,i.sizeCriteria=google.ima.CompanionAdSelectionSettings.SizeCriteria.IGNORE,this.fXt=t.getCompanionAds(0,0,i)}};function y6(){return[google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,google.ima.AdEvent.Type.CLICK,google.ima.AdEvent.Type.DURATION_CHANGE,google.ima.AdEvent.Type.EXPANDED_CHANGED,google.ima.AdEvent.Type.STARTED,google.ima.AdEvent.Type.IMPRESSION,google.ima.AdEvent.Type.PAUSED,google.ima.AdEvent.Type.RESUMED,google.ima.AdEvent.Type.AD_PROGRESS,google.ima.AdEvent.Type.AD_BUFFERING,google.ima.AdEvent.Type.FIRST_QUARTILE,google.ima.AdEvent.Type.MIDPOINT,google.ima.AdEvent.Type.THIRD_QUARTILE,google.ima.AdEvent.Type.COMPLETE,google.ima.AdEvent.Type.USER_CLOSE,google.ima.AdEvent.Type.LINEAR_CHANGED,google.ima.AdEvent.Type.LOADED,google.ima.AdEvent.Type.AD_CAN_PLAY,google.ima.AdEvent.Type.AD_METADATA,google.ima.AdEvent.Type.AD_BREAK_READY,google.ima.AdEvent.Type.INTERACTION,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,google.ima.AdEvent.Type.SKIPPED,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,google.ima.AdEvent.Type.LOG,google.ima.AdEvent.Type.VIEWABLE_IMPRESSION,google.ima.AdEvent.Type.VOLUME_CHANGED,google.ima.AdEvent.Type.VOLUME_MUTED]}var b6=class extends Bo{XD(t){var i;null==(i=this.N$t)||i.setVolume(t)}HD(){return this.N$t.getVolume()}e8t(){return this.N$t.getRemainingTime()}Mm(){Or(this.Dc),this.Xu.fn(Ah.pn,this.nni),this.N$t.removeEventListener(google.ima.AdEvent.Type.LOADED,this.rni),this.N$t.removeEventListener(y6(),this.forwardAdEventListener),this.N$t.removeEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.forwardAdErrorEventListener),this.N$t.destroy()}Cn(){this.N$t.start()}f7t(){this.N$t.resume()}eE(){this.N$t.pause()}Ax(){this.N$t.skip()}nE(){this.N$t.stop()}B9t(){const t=this.N$t.getCurrentAd();if(t)return this.oni(t)}p7t(){return this.N$t.getCuePoints()}oni(t){let i=So(this.Dc,(i=>i.Ksi===t));return i||(i=new A6(t),this.Dc.push(i)),i}D7t(t){this.N$t.updateAdsRenderingSettings(N6(t))}constructor(t,i,e){super(),this.Dc=[],this.rni=t=>{t.getAd().isLinear()?this.w7t.qsi("linear"):this.w7t.qsi("nonlinear")},this.nni=()=>{this.N$t.resize(this.w7t.Hsi,this.w7t.Wsi,google.ima.ViewMode.NORMAL)},this.forwardAdEventListener=t=>{const i=t.getAd(),e=function(t){return{[google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED]:bo.F5t,[google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED]:bo.Y5t,[google.ima.AdEvent.Type.CLICK]:bo.V5t,[google.ima.AdEvent.Type.DURATION_CHANGE]:bo.Km,[google.ima.AdEvent.Type.EXPANDED_CHANGED]:bo.G5t,[google.ima.AdEvent.Type.STARTED]:bo.W5t,[google.ima.AdEvent.Type.IMPRESSION]:bo.Z5t,[google.ima.AdEvent.Type.PAUSED]:bo.DV,[google.ima.AdEvent.Type.RESUMED]:bo.H5t,[google.ima.AdEvent.Type.AD_PROGRESS]:bo.X5t,[google.ima.AdEvent.Type.AD_BUFFERING]:bo.q5t,[google.ima.AdEvent.Type.FIRST_QUARTILE]:bo.K5t,[google.ima.AdEvent.Type.MIDPOINT]:bo.Tqt,[google.ima.AdEvent.Type.THIRD_QUARTILE]:bo.J5t,[google.ima.AdEvent.Type.COMPLETE]:bo.Sqt,[google.ima.AdEvent.Type.USER_CLOSE]:bo.$5t,[google.ima.AdEvent.Type.LINEAR_CHANGED]:bo.t6t,[google.ima.AdEvent.Type.LOADED]:bo.i6t,[google.ima.AdEvent.Type.AD_CAN_PLAY]:bo.e6t,[google.ima.AdEvent.Type.AD_METADATA]:bo.s6t,[google.ima.AdEvent.Type.AD_BREAK_READY]:bo.n6t,[google.ima.AdEvent.Type.INTERACTION]:bo.r6t,[google.ima.AdEvent.Type.ALL_ADS_COMPLETED]:bo.o6t,[google.ima.AdEvent.Type.SKIPPED]:bo.h6t,[google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED]:bo.a6t,[google.ima.AdEvent.Type.LOG]:bo.u6t,[google.ima.AdEvent.Type.VIEWABLE_IMPRESSION]:bo.c6t,[google.ima.AdEvent.Type.VOLUME_CHANGED]:bo.l6t,[google.ima.AdEvent.Type.VOLUME_MUTED]:bo.d6t}[t]}(t.type),s={type:e,date:new Date,Kst:i?this.oni(i):void 0,S9t:S3(e,t.getAdData())};this.yo(s)},this.forwardAdErrorEventListener=t=>{this.yo({date:new Date,Kst:void 0,type:b3.f6t,S9t:{r8t:D3(t.getError())}})},this.N$t=t,this.w7t=i,this.Xu=e,this.Xu.yn(Ah.pn,this.nni),this.N$t.init(this.w7t.Hsi,this.w7t.Wsi,google.ima.ViewMode.NORMAL),this.N$t.addEventListener(google.ima.AdEvent.Type.LOADED,this.rni),this.N$t.addEventListener(y6(),this.forwardAdEventListener),this.N$t.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.forwardAdErrorEventListener)}};r();var M6=class extends ps{get hni(){return this.ani}get _ti(){return this.t1t}ma(){return new T6(this.ani)}constructor(t,i){super("L7t"),this.ani=t,this.t1t=i}},T6=class extends Gs{get adsManager(){return this.ani}constructor(t){super("adsmanagerloaded"),this.ani=t}},S6=class extends Bo{g7t(){var t;null==(t=this._7t)||t.contentComplete()}async C5t(t,i,e){if(this.uni)throw new g("Only one ImaAdsRequest can be made at a time.");if(!this.cni.Xsi)throw new g("AdDisplayContainer is not initialized.");this._7t=new google.ima.AdsLoader(this.cni.Xsi),this._7t.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoadedListener),this._7t.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdsManagerErrorListener),this.uni=new pa,this.lni=i,this.dni=e;const s=new google.ima.AdsRequest;return t.Z3t?s.adTagUrl=t.Z3t:t.H3t&&(s.adsResponse=t.H3t),s.linearAdSlotWidth=t.Q3t,s.linearAdSlotHeight=t.F3t,s.nonLinearAdSlotWidth=t.Y3t,s.nonLinearAdSlotHeight=t.V3t,s.contentDuration=t.q3t,s.setAdWillAutoPlay(t.G3t),s.setAdWillPlayMuted(t.W3t),t.X3t&&(s.omidAccessModeRules=t.X3t),this._7t.requestAds(s),this.uni.rA}Mm(){var t;void 0!==this._7t&&(this._7t.removeEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoadedListener),this._7t.removeEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdsManagerErrorListener),this._7t.destroy(),this._7t=void 0),null==(t=this.uni)||t.sA("AdsLoader destroyed"),this.uni=void 0}constructor(t,i){super(),this.onAdsManagerLoadedListener=t=>{if(this.lni&&this.dni&&this.uni){var i;const e=N6(this.dni),s=this.lni,n=t.getAdsManager({get currentTime(){return s.sD},get duration(){return s.ct}},e),r=new b6(n,this.cni,this.Xu);this.yo(new M6(n,this.cni._ti)),null==(i=this.uni)||i.eA(r),this.uni=void 0}},this.onAdsManagerErrorListener=t=>{var i;const e={Rp:t.getError().getMessage(),r9t:t.getError().getVastErrorCode(),eKt:t.getError().getErrorCode(),Hw:N3(t.getError().getType()),o9t:void 0};null==(i=this.uni)||i.sA(e),this.uni=void 0},this.Xu=i,this.cni=t}};function N6(t){const i=new google.ima.AdsRenderingSettings;return i.enablePreloading=t.S7t,t.T7t&&(i.uiElements=t.T7t),i.mimeTypes=t.M7t,void 0!==t.I7t&&(i.playAdsAfterTime=t.I7t),void 0!==t.N7t&&(i.loadVideoTimeout=t.N7t),void 0!==t.S8t&&(i.bitrate=t.S8t),void 0!==t.I7t&&(i.playAdsAfterTime=t.I7t),i.restoreCustomPlaybackStateOnAdBreakComplete=!0,i}r();var I6=class extends Bo{get sD(){return this.ta.BD?this.fni:this.ta.nD()}get ct(){return this.ta._d()}get mD(){return this.ta.mD}get ZD(){return this.ta.ZD}tr(){this.fni=0}constructor(t){super(),this.ta=t,this.fni=this.ta.nD(),this.ta.yn(Qi.Dp,(()=>{this.ta.BD||(this.fni=this.ta.nD()),this.yo(new H(this.sD,void 0))}))}};H3.K_.registerWebImaAdPlayerConstructor((function(t,i,e){G3(e);const s=W3(e)?t.tE():void 0,n=new p6(s,t.ke),r=new S6(n,t.Ou),o=new I6(t);return new Z3(t,i,e,t.ost,n,r,o)})),r(),r(),r();var fr=class extends Nu{get gni(){return this.ta===this.yst?this.$4t:this.yst}ur(t,i,e,s,n){(n||!s.TD||s.hD)&&this.ta.sE()}rD(t,i){}iD(t){}_ni(t,i){return super.rD(t,i)}vni(t){return super.iD(t)}eD(){return this.yst.bt}Ya(){return this.yst.Ya()}_d(){return this.yst._d()}zD(){if(this.wni())return this.yst.zD();const t=ge.xn(this.yst.zD()),i=ge.xn(this.$4t.zD()).Vp(this.mni);return t.WO(i).Sn(ge.uR(0,this.nD())).ws()}nD(){return this.pni(super.nD())}pni(t){return this.ta===this.$4t?this.mni+t:t}tD(){return this.Ani(super.nD())}Ani(t){return this.ta===this.$4t&&this.yni?new Date(this.yni.getTime()+1e3*t):this.yst.$I}JI(){const t=ge.xn(this.yst.JI()),i=ge.xn(this.$4t.JI()).Vp(this.mni);if(t.jn(t.U-1)<i.Cn(0))return i.ws();if(i.jn(i.U-1)<t.Cn(0))return t.ws();return t.WO(i).ws()}lE(t){if(this.ta===this.$4t)switch(t.type){case Qi.Dp:return this.yo(new H(this.pni(t.currentTime),t.currentProgramDateTime)),!0;case Qi.wp:return this.yo(new mO(this.pni(t.currentTime))),!0;case Qi.so:return this.yo(new us(this.pni(t.currentTime))),!0;case Qi.vp:return this.yo(new Ia(this.pni(t.currentTime))),!0;case Qi.tp:return this.yo(new ce(this.pni(t.currentTime))),!0;case Qi.bp:return this.yo(new ll(this.pni(t.currentTime))),!0;case Qi.yp:return this.yo(new ns(this.pni(t.currentTime))),!0;case Qi.mp:return this.yo(new rr(this.pni(t.currentTime),t.playbackRate)),!0;case Qi.Ep:return this.yo(new B(this.pni(t.currentTime),t.volume)),!0;case Qi.Jm:return this.yo(new Zi(this.pni(t.currentTime),t.readyState)),!0;case fa.DO:return this.yo(new or(this.pni(t.currentTime),t.readyState)),!0;case fa.EO:return this.yo(new NI(this.pni(t.currentTime),t.readyState)),!0;case fa.kO:return this.yo(new SI(this.pni(t.currentTime),t.readyState)),!0;case fa.LO:return this.yo(new TI(this.pni(t.currentTime),t.readyState)),!0;case fa.CE:return this.yo(new hr(this.pni(t.currentTime),t.readyState)),!0;case fa.xO:return this.yo(new Oa(this.pni(t.currentTime))),!0;case fa.CO:return this.yo(new fo(this.pni(t.currentTime))),!0;case Qi.$m:return this.yo(new eZ(this.pni(t.currentTime),t.initDataType,t.initData)),!0}if(this.ta.aY.sP)switch(t.type){case Qi.Xm:case Qi.lp:case fa.kO:case fa.LO:return!0}return super.lE(t)}async gn(){await super.gn(!0)}constructor(t,i,e){super(e),this.yst=t,this.$4t=i,this.mni=t.nD(),this.yni=t.$I}};function D6(t,i){i.mD=t.mD,i.ZD=t.ZD,i.ND=t.ND}r();var E6=class extends fr{ur(t,i,e,s,n){super.ur(t,i,e,s,n),this.gni.eE();this.bni(i,e).style.flex="1"}ar(t,i,e){this.bni(i,e).style.flex="0"}constructor(t,i,e){super(t,i,e)}},k6=class extends E6{wni(){return!0}bni(t,i){return t}Mni(t,i){return i}rD(t,i){return super._ni(t,i)}iD(t){return super.vni(t)}constructor(t,i){super(t,i,t)}},L6=class extends fr{wni(){return!1}ur(t,i,e,s,n){super.ur(t,i,e,s,n),this.ta.ur(),i.style.flex="1"}ar(t,i,e){this.ta.ar(),i.style.flex="0"}_d(){return this.ta._d()}constructor(t,i){super(t,i,i)}},x6=class extends E6{wni(){return!1}bni(t,i){return i}Mni(t,i){return t}ur(t,i,e,s,n){super.ur(t,i,e,s,n),this.yst.be();for(const t of[i,e])t.style.transition=""}ar(t,i,e){super.ar(t,i,e),this.yst.ge()}constructor(t,i){super(t,i,i)}};r();var Uo=function(t){return t.SINGLE="SINGLE",t.DOUBLE="DOUBLE",t.LSHAPE_AD="LSHAPE_AD",t.LSHAPE_CONTENT="LSHAPE_CONTENT",t}({}),C6=function(t){return t[t.Tni=0]="Tni",t[t.Sni=1]="Sni",t}({}),j6=class{get Nni(){var t,i;const e=null!=(i=null!=(t=this.Ini)?t:this.$A)?i:this.Yzt;return void 0!==e?this.OP+e:this.HP?this.HP:void 0}get ct(){const t=this.Nni;return void 0===t?void 0:t-this.OP}get M4t(){var t;return null!=(t=this.T4t)?t:0}Dni(t){if(!this.ct)return;const i=(t-(this.OP+this.Eni))/this.ct;i<this.M4t||(this.T4t=x.min(i,1),1===this.T4t&&(this.kD=!0))}Yn(t){var i,e,s,n;this.$A=null!=(i=t.ct)?i:this.$A,this.HP=null!=(e=t.RP)?e:this.HP,this.Ini=null!=(s=t.kni)?s:this.Ini,this.Eni=null!=(n=t.Lni)?n:this.Eni,this.xni()}xni(){void 0===this.$A&&void 0!==this.HP?this.$A=this.HP-this.OP:void 0===this.HP&&void 0!==this.$A&&(this.HP=this.OP+this.$A)}constructor(t){this.Eni=0,this.kD=!1,this.o=t.o,this.OP=t.OP,this.HP=t.RP,this.Yzt=t.sPt,this.$A=t.ct,this.Ini=t.kni,this.l_t=t.l_t,this.xni()}},O6=class extends j6{get Hw(){return 0}constructor(t){super(t),this.xAt=t.xAt,this.Cni=t.Cni||"SINGLE",this.jni=t.jni}};r(),r();var pu=Promise;r(),r();var R6=class extends H4{Oni(t){this.Dc.push(t)}get kD(){return this.Rni.kD}get QKt(){return al.kst}get M$t(){var t;return null!=(t=this.Rni.ct)?t:-1}get UPt(){return this.Rni.OP}get JJt(){}get Pni(){return this.Rni}constructor(t){var i;super(t.OP),this.Rni=t,this.T$t=null!=(i=this.Rni.ct)?i:-1}},P6=function(t){return t.AD_LOADING="adloading",t.AD_LOADED="adloaded",t.AD_PAUSED="adpaused",t.AD_ERROR="aderror",t}({}),z6=function(t){return t[t.GOOGLE=0]="GOOGLE",t[t.DEFAULT=1]="DEFAULT",t}({}),B6=class extends Bo{get R8t(){return this.Q$t}get Vst(){return this.K$t}get I$t(){return this.J$t}zni(){this.Bni()}Uni(t){if(t.Hw===C6.Tni){const i=new R6(t);this.J$t.push(i)}}Qni(t){const i=this.H4t(t);Ro(this.J$t,i)}H4t(t){return So(this.J$t,(i=>i.Pni===t))}Fni(){this.$4t.yn(Qi.lp,this.Yni),this.$4t.yn(fa.EO,this.Vni),this.$4t.yn(Qi.tp,this.Gni),this.$4t.yn(Qi.Dp,this.d6)}Bni(){this.$4t.fn(Qi.lp,this.Yni),this.$4t.fn(fa.EO,this.Vni),this.$4t.fn(Qi.tp,this.Gni),this.$4t.fn(Qi.Dp,this.d6)}ld(t){var i;null==(i=this.Wni)||i.Dni(this.pni(t.currentTime))}async Zni(t,i,e){const s={stack:[],error:void 0,hasError:!1};try{var n;this.Fni(),null==(n=this.gU)||n.Dm();const r=lo(s,Ai.xm([i]),!1);this.gU=r;const o=r.wm;return re(o),await this.$4t.wa(Hh(t),o),ui.Ka&&ui.M_&&(this.$4t.sE(),this.$4t.eE()),e&&this.$4t.rD(e),await pu.race([this.Fm("aderror",o).then(pu.reject),this.Fm("adloaded",o).then((()=>pu.resolve()))])}catch(t){s.error=t,s.hasError=!0}finally{os(s)}}Cd(t){this.Wni&&(this.Wni.Dni(t),this.Wni.kD=!0,this.Qni(this.Wni),this.Wni=void 0),this.Q$t&&(this.r3t.yo(new ic(this.Q$t,t)),this.Q$t=void 0),this.K$t&&(this.r3t.yo(new ir(this.K$t)),this.K$t=void 0),this.Bni()}pni(t){var i,e;return(null!=(e=null==(i=this.Wni)?void 0:i.OP)?e:0)+t}async tr(){var t;null==(t=this.gU)||t.Dm(),this.gU=void 0,this.Bni(),this.J$t=[],this.Q$t=void 0,this.K$t=void 0,this.Wni=void 0}async gn(){await this.tr(),await this.Hni.gn()}constructor(t,i,e){super(),this.r3t=new gj,this.J$t=[],this.d6=t=>{this.ld(t)},this.Gni=()=>{this.Bni(),this.$4t.nE()},this.Yni=()=>{this.yo(new Gs("adloading"))},this.Vni=()=>{this.yo(new Gs("adloaded"))},this.$4t=t,this.Hni=i,this.J$t=e,this.Hni.Xni(this),this.r3t=i.B2t}};r();var U6=class extends no{U$t(){var t;return null==(t=this.qni)?void 0:t.getAdSystem()}Yst(){var t;return null!=(t=this.Za)?t:this.ma()}Y$t(){return this.eXt.Pni.xAt}ma(){return K4(this)}get o(){var t;return null==(t=this.qni)?void 0:t.getAdId()}get duration(){var t;return null==(t=this.qni)?void 0:t.getDuration()}get CXt(){var t,i;return null==(i=this.qni)||null==(t=i.ad)?void 0:t.clickThroughUrl}get sXt(){var t;return null==(t=this.qni)?void 0:t.getCreativeId()}get uqt(){var t;return null==(t=this.qni)?void 0:t.getSkipTimeOffset()}get QKt(){return al.kst}constructor(t,i){super(i,function(t){return t===Uo.LSHAPE_CONTENT?Hs.l4t:Hs.fKt}(i.Pni.Cni)),this.qni=t,this.m4t=void 0===t,this.eXt=i,this.eXt.Oni(this)}};var Q6="theoads_slot",F6="urn:google:dai:2018",ze=class extends B6{get Kni(){return z6.GOOGLE}hJ(t,i,e){if(void 0===this.Jni){var s,n;if(void 0===(null==(n=oi.google)||null==(s=n.ima)?void 0:s.dai))throw new g("IMA DAI SDK missing for THEOads");this.Jni=new google.ima.dai.api.StreamManager(this.$4t.ke.querySelector("video"),this.$ni)}this.tri=t,this.iri=i,this.eri=e;const r=this.Jni;this.sri(),r.reset();const o=new google.ima.dai.api.PodStreamRequest;return o.networkCode=this.tri,o.customAssetKey=this.iri,o.adTagParameters=this.eri,o.format="hls",this.rri=this.hri([google.ima.dai.api.StreamEvent.Type.STREAM_INITIALIZED,google.ima.dai.api.StreamEvent.Type.ERROR]).then((t=>{if(t.type===google.ima.dai.api.StreamEvent.Type.ERROR)throw new g("DAI stream request failed");this.ari=t.getStreamData(),this.cri()})),this.Jni.requestStream(o),this.rri}hri(t,i){return new pu(((e,s)=>{var n;if(i&&i.gm)return s(new Rh);const r=t=>{h(),e(t)},o=()=>{h(),s(new Rh)},h=()=>{var e;null==(e=this.Jni)||e.removeEventListener(t,r),i&&i._m(o)};null==(n=this.Jni)||n.addEventListener(t,r),i&&i.vm(o)}))}lri(t){var i;null==(i=this.Jni)||i.replaceAdTagParameters(t)}async dri(){var t;if(!this.fri||!(null==(t=this.Wni)?void 0:t.l_t))return;const i=this.fri+"/"+this.tri+"/"+this.iri+"/"+this.Wni.l_t+".json",e=new _e({Hu:i,CS:Me.XM,hN:Ml.GET,aN:500});let s;try{s=await this.$4t.GI.jS(e)}catch(t){throw new Ji(Oc.NETWORK,na.UNKNOWN_AD_RESPONSE,"The ad's PodId could not be loaded.")}if(!Xn(s))throw new Ji(Oc.NETWORK,na.UNKNOWN_ERROR,"Something went wrong while requesting JSON from server.");const n=await s.xS();return n?n.podid:void 0}async gri(t,i,e){this.Wni=t;const s=me.Ah(t.xAt),n=s.searchParams.get("n"),r=s.searchParams.get("k"),o=this.eri;o.cust_params=function(t,i){const e=new Aa(t);return e.set(Q6,function(t){switch(t){case Uo.DOUBLE:return"double";case Uo.SINGLE:return"single";case Uo.LSHAPE_AD:case Uo.LSHAPE_CONTENT:return"l-shape"}}(i)),e.toString()}(o.cust_params,t.Cni),n&&n!==this.tri&&r&&r!==this.iri?(this.tri=n,this.iri=r,await this.hJ(n,r,this.eri),re(e)):this.lri(this.eri),this.rri&&await Ic(this.rri,e);const h=Number(s.searchParams.get("d")),a=x.floor(1e3*x.min(h,t.Nni-i));let u;try{u=await _t((()=>this.dri()),e,3,200,1e3)}catch(t){0}const c=this.ari.getStandalonePodManifestUrl((()=>null!=u?u:x.floor((new Date).getTime()/6e4)),a);return this.Zni({sources:{src:c}},e,void 0)}Fni(){super.Fni(),this.$4t.yn(Qi.tp,this._ri),this.$4t.nt.yn(di.gE,this.Hn)}Bni(){super.Bni(),this.$4t.fn(Qi.tp,this._ri),this.$4t.nt.fn(di.gE,this.Hn)}cri(){var t;null==(t=this.Jni)||t.addEventListener([google.ima.dai.api.StreamEvent.Type.ERROR,google.ima.dai.api.StreamEvent.Type.CLICK,google.ima.dai.api.StreamEvent.Type.STARTED,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,google.ima.dai.api.StreamEvent.Type.MIDPOINT,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,google.ima.dai.api.StreamEvent.Type.COMPLETE,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,google.ima.dai.api.StreamEvent.Type.AD_PERIOD_STARTED,google.ima.dai.api.StreamEvent.Type.AD_PERIOD_ENDED,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,google.ima.dai.api.StreamEvent.Type.PAUSED,google.ima.dai.api.StreamEvent.Type.RESUMED],this.vri)}sri(){var t;null==(t=this.Jni)||t.removeEventListener([google.ima.dai.api.StreamEvent.Type.ERROR,google.ima.dai.api.StreamEvent.Type.CLICK,google.ima.dai.api.StreamEvent.Type.STARTED,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,google.ima.dai.api.StreamEvent.Type.MIDPOINT,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,google.ima.dai.api.StreamEvent.Type.COMPLETE,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,google.ima.dai.api.StreamEvent.Type.AD_PERIOD_STARTED,google.ima.dai.api.StreamEvent.Type.AD_PERIOD_ENDED,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,google.ima.dai.api.StreamEvent.Type.PAUSED,google.ima.dai.api.StreamEvent.Type.RESUMED],this.vri)}Cd(t){super.Cd(t),this.wri=void 0}async tr(){var t;await super.tr(),this.sri(),null==(t=this.Jni)||t.reset()}async gn(){var t;await super.gn(),null==(t=this.pri)||t.gn()}constructor(t,i,e,s,n,r){super(t,i,s),this._ri=()=>{this.Cd(this.pni(this.$4t.nD()))},this.Hn=t=>{const i=t.Lt;if(i.zt===vs.tU&&!(i.Hw!==er.ID3&&i.Hw!==er.EVENT_STREAM||i.Hw===er.EVENT_STREAM&&i.wk!==F6)){if(i.yn(Ct.mE,this.Ari),i.yn(Ct.AE,this.yri),i.L)for(const t of i.L.FE)this.Ari(new gc(t));i.gN=P.vk,this.pri=i}},this.Ari=t=>{t.CP.yn(ko.iP,this.bri)},this.yri=t=>{t.CP.fn(ko.iP,this.bri)},this.bri=t=>{var i,e;if(this.ari)if((null==(i=this.pri)?void 0:i.Hw)===er.ID3){const i=t.CP.O;var s;if(az(i))if(this.wri!==i.text)this.wri=i.text,null==(s=this.Jni)||s.processMetadata("ID3",i.text,t.CP.OP)}else if((null==(e=this.pri)?void 0:e.Hw)===er.EVENT_STREAM){var n;const i=t.CP.O;null==(n=this.Jni)||n.processMetadata(F6,i,t.CP.OP)}},this.vri=t=>{switch(this.K$t&&(this.K$t.T$t=this.$4t._d()-this.$4t.nD()),t.type){case google.ima.dai.api.StreamEvent.Type.PAUSED:this.yo(new Gs(P6.AD_PAUSED));break;case google.ima.dai.api.StreamEvent.Type.ERROR:this.r3t.yo(new bh(Oc.GENERAL));break;case google.ima.dai.api.StreamEvent.Type.AD_PERIOD_STARTED:this.K$t=this.H4t(this.Wni),this.r3t.yo(new Va(this.K$t)),this.Mri=me.ov(this.Tri,250);break;case google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED:me.rv(this.Mri);break;case google.ima.dai.api.StreamEvent.Type.STARTED:{const i=t.getAd();this.Q$t=new U6(i,this.K$t),this.r3t.yo(new Nc(this.Q$t,this.pni(this.$4t.nD())));break}case google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE:this.r3t.yo(new ro(this.Q$t,this.pni(this.$4t.nD())));break;case google.ima.dai.api.StreamEvent.Type.MIDPOINT:this.r3t.yo(new ho(this.Q$t,this.pni(this.$4t.nD())));break;case google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE:this.r3t.yo(new oo(this.Q$t,this.pni(this.$4t.nD())));break;case google.ima.dai.api.StreamEvent.Type.COMPLETE:this.r3t.yo(new ic(this.Q$t,this.pni(this.$4t.nD()))),this.Q$t=void 0;break;case google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED:if(!this.K$t)break;this.K$t.T$t>1&&this.Tri()}},this.Tri=()=>{this.Q$t=new U6(void 0,this.K$t),this.r3t.yo(new Nc(this.Q$t,this.pni(this.$4t.nD())))},this.$ni=e,this.eri=null!=n?n:{},this.fri=r}};r();var Y6=class extends fr{wni(){return!0}ur(t,i,e,s,n){super.ur(t,i,e,s,n),D6(this.ta,this.gni),this.gni.mD=!0,t.style.backgroundImage="url('"+this.Sri+"')",t.style.backgroundSize="contain",t.style.backgroundPosition="center",this.Nri=this.yst.nt.FE.filter((t=>t.gN===P.Jn));for(const t of this.Nri)t.gN=P.Ch;for(const t of[i,e])t.style.flex="1",t.style.borderWidth="20px",t.style.transition=["flex","border-width","transform"].map((t=>t+" 1s ease-in-out")).join(", ")}ar(t,i,e){for(const t of[i,e])t.style.flex="0",t.style.borderWidth="0px";var s;for(const t of null!=(s=this.Nri)?s:[])t.gN=P.Jn;this.Nri=void 0}uD(){return this.yst.uD()||this.$4t.uD()}lD(){return this.yst.lD()||this.$4t.lD()}RD(){return x.min(this.yst.OD,this.$4t.OD)}sE(){this.yst.sE(),this.$4t.sE()}eE(){this.yst.eE(),this.$4t.eE()}constructor(t,i,e){super(t,i,i),this.Nri=void 0,this.Sri=e}};r();var V6=class extends fr{ur(t,i,e,s,n){super.ur(t,i,e,s,n),this.gni.eE(),this.gni.be(),t.style.backgroundImage="url('"+this.Sri+"')",t.style.backgroundSize="contain",t.style.backgroundPosition="center";const r=this.bni(i,e);r.style.flex="1",r.style.transform="\n          translate(-50%, -50%)\n          scale(calc(43/60))\n          translate(calc(50% + 100%/30), calc(50% + 100%/30))\n        ";for(const t of[i,e])t.style.transition=["flex","border-width","transform"].map((t=>t+" 1s ease-in-out")).join(", ")}ar(t,i,e){this.gni.ge();const s=this.bni(i,e);s.style.flex="0",s.style.transform=""}constructor(t,i,e,s){super(t,i,e),this.Sri=s}},G6=class extends V6{wni(){return!0}bni(t,i){return t}Mni(t,i){return i}constructor(t,i,e){super(t,i,t,e)}},W6=class extends V6{wni(){return!1}bni(t,i){return i}Mni(t,i){return t}constructor(t,i,e){super(t,i,i,e)}};r(),r(),r(),r(),r(),r();var Z6=class extends aX{start(t){super.start(t);for(const t of this.prependPackets)this.qEt(t)}constructor(t=[]){super(),this.prependPackets=t}};function H6(t){return t.Hw===Fo.QL}var X6=class extends Z6{transform(t){this.rkt.push(t),t.Hw===Fo.$k?(this.JA=function(t){const i=tn.zx(t.xS.xS)[0];if((null==i?void 0:i.Hw)!==Fo.$k)throw new g("Not able to parse Moov Box");if(0===i.Z.length)throw new g("Tracks not found");return i.Z[0].aC.Lx.eC}(t),this.Iri(this.rkt.splice(0),wX.INITIALIZER)):t.Hw===Fo.HL&&this.Iri(this.rkt.splice(0),wX.FRAMES)}Iri(t,i){const e={eC:this.JA,GZ:this.hH},s=Dt(t.map((t=>se(t.xS.xS)))),n=So(t,H6),r={lN:this.mut,Yp:e,Zut:s,Hw:i,ct:this.Dri(n)/e.eC,l_t:mt(this.Eri(n),e.eC)};this.qEt(r)}Dri(t){if(!t||!this.JA)return 0;const i=tn.zx(t.xS.xS)[0].Z[0];if(!i||0===i.Jj.length)return 0;const e=i.Lx.Fj||0;return i.Jj[0].rO.reduce(((t,i)=>{var s;return t+(null!=(s=i.ct)?s:e)}),0)}Eri(t){var i;if(!t||!this.JA)return Io.UZERO;var e;return null!=(e=null==(i=tn.zx(t.xS.xS)[0].Z[0].$j)?void 0:i.$j)?e:Io.UZERO}kri(t){t.Hw===wX.INITIALIZER&&(this.JA=t.Yp.eC)}constructor(t,i=[],e=!1){super(e?i:[]),this.hH=t,this.rkt=[],this.mut=this.hH.match(/video/)?lU.iN:lU.tN;for(const t of i)this.kri(t)}};r();var q6="audio/x-theoplayer-fake-json-segment",K6="video/x-theoplayer-fake-json-segment";var J6=1e-6;var $6=class{write(t){if(t.Hw===wX.FRAMES){const i=t.Yp.eC,e=hR(Os(t.Zut),void 0,i);if(void 0===e)return;this.cA.Lri(e,t.ct)}else if(t.Hw===wX.INITIALIZER){const i=new Hu(Os(t.Zut),new J),e=Lu.Ex(i,Fo.$k),s=e?tn.Vx(e):[];if(s.length){const t=Dt(s.map((t=>new T(t.vO))));this.cA.yo(new on(Ca,t))}}}constructor(t){this.cA=t}},t9=class t extends Bo{get KI(){return this.TIt}get md(){return this.gM}get s4(){return this.n4}get r4(){return this.SIt}get _q(){return this.Tq}set _q(t){this.Tq=t}get pq(){return this.Iq}set pq(t){this.Iq=t}c2(t,i,e){return this.xri=i.RB,this.Cri((i=>this.jri(t,i)),e)}jri(t,i){switch(this.uM){case"audio/mp4":case"video/mp4":return this.Ori(t,i);case q6:case K6:return this.Rri(t,i);default:return Promise.reject(new w("Unknown content type: "+this.uM))}}async Ori(t,i){re(i);const e=function(t){switch(t.Hw){case z.XK:return HM(t.xS);case z.qM:return t.xS;case z.qK:throw new g("HeadlessMediaBuffer - Cannot convert opaque SegmentData to Stream.")}}(t);await e.pipeThrough(new Iu(new dX)).pipeThrough(new Iu(this.Pri)).pipeTo(new WM(this.zri),{preventClose:!0,preventAbort:!0})}async Rri(t,i){re(i);const e=function(t){return JSON.parse(_r(t))}(await function(t,i){switch(t.Hw){case z.XK:return Promise.resolve(t.xS);case z.qM:return qM(t.xS,i).then((t=>Dt(t)));case z.qK:return Promise.reject(new g("HeadlessMediaBuffer - Cannot convert opaque SegmentData to Uint8Array."))}}(t,i));this.Lri(e.startTime,e.duration)}c4(){return Promise.resolve()}f2(t,i,e){return this.Cri((i=>this.jri(t,i)),e)}yJ(){return this.net}i4(){this.net=!0}G2(){this.net=!1}a4(t,i){this.SIt=this.SIt.WO(new ge([t,i])).GO(J6)}Rb(t,i,e){return this.Cri((e=>{re(e),this.TIt=this.TIt.HO(new ge([t,i])),this.yo(new Gs(W.ZK))}),e)}L2(t,i){return this.Cri((()=>{this.Bri=new ge([t,i])}))}u4(t,i){this.SIt=this.SIt.HO(new ge([t,i]))}Lri(t,i){const e=this.xri+t,s=new ge([e,e+i]).Sn(this.Bri);this.TIt=this.TIt.WO(s).GO(J6),this.yo(new Gs(W.ZK)),this.Uri()}Qri(){return this.Fri}Uri(){const t=this.TIt,i=t.U>0?t.jn(this.TIt.U-1):0;this.Fri!==i&&(this.Fri=i,this.yo(new In(i)))}rJ(i){if(!t.IJ(i))return!1;const e=$r(i.vS);return this.uM===e.Hw}hJ(t){return this.gM=t,this.uM=$r(t.vS).Hw,ss(this.uM)?this.Pri=new X6(t.vS):this.Pri=void 0,Promise.resolve()}async Cri(t,i){if(this.Yri)throw new g("Attempted to start concurrent buffer mutation");const e=new Ai;e.Em(this.H2.wm),i&&e.Em(i);try{this.Yri=Promise.resolve(t(e.wm)),await this.Yri}finally{this.Yri=void 0}}Mm(){this.Bo(),this.H2.Dm()}static IJ(t){switch($r(t.vS).Hw){case"audio/mp4":case"video/mp4":case q6:case K6:return!0;default:return!1}}constructor(t,i){super(),this.Fri=0,this.net=!1,this.TIt=ge.cR(),this.SIt=ge.cR(),this.Iq=30,this.Tq=30,this.xri=0,this.Pri=void 0,this.zri=new $6(this),this.Yri=void 0,this.Bri=new ge([0,1/0]),this.H2=new Ai,this.gM=t,this.uM=$r(t.vS).Hw,ss(this.uM)&&(this.Pri=new X6(t.vS)),this.n4=i}},i9=class t extends Bo{get Z4(){return this.X4}get H4(){return this.q4}get KI(){return IR(this)}get r4(){var t,i,e,s;return(null!=(e=null==(t=this.X4)?void 0:t.r4)?e:ge.cR()).WO(null!=(s=null==(i=this.q4)?void 0:i.r4)?s:ge.cR())}get md(){return this.gM}get ct(){return this.$A}get yJ(){return(!this.X4||this.X4.yJ())&&(!this.q4||this.q4.yJ())}get PD(){return this.e3.g4().Sn(new ge([0,this.ct],[!0,!0]))}get X6(){return this.Vri}Mm(){var t,i;return this.Bo(),null==(t=this.q4)||t.Mm(),null==(i=this.X4)||i.Mm(),this.X4=void 0,this.q4=void 0,this.$A=NaN,Promise.resolve()}J4(t){this.$A!==t&&(this.$A=t,this.yo(new In(t)))}Qri(){let t=0;return this.X4&&(t=x.max(t,this.X4.Qri())),this.q4&&(t=x.max(t,this.q4.Qri())),t}s3(t,i,e,s){this.e3=new MR(t,i,Boolean(e),Boolean(s))}i4(){this.X4&&this.X4.i4(),this.q4&&this.q4.i4(),this.Gri()}G2(){this.X4&&this.X4.G2(),this.q4&&this.q4.G2()}rJ(i){if(!t.IJ(i))return!1;const e=So(i.n3,(t=>sa(t.vS,"audio"))),s=So(i.n3,(t=>sa(t.vS,"video")));return!(this.X4&&e&&!this.X4.rJ(e))&&!(this.q4&&s&&!this.q4.rJ(s))}async hJ(t){this.gM=t;const i=So(t.n3,(t=>sa(t.vS,"audio"))),e=So(t.n3,(t=>sa(t.vS,"video")));this.X4?i?await this.X4.hJ(i):(this.X4.Mm(),this.X4=void 0):i&&(this.X4=new t9(i,Q.tN),this.X4.yn(Qi.Km,this.Gri)),this.q4?e?await this.q4.hJ(e):(this.q4.Mm(),this.q4=void 0):e&&(this.q4=new t9(e,Q.iN),this.q4.yn(Qi.Km,this.Gri));const s=this.Vri;0===t.KF.length?this.Vri=void 0:s&&!t.KF.some((t=>t.Gb===s))&&(this.Vri=t.KF[0].Gb)}uJ(t){}static IJ(t){return t.n3.every((t=>t9.IJ(t)))}constructor(t){var i;super(),this.X4=void 0,this.q4=void 0,this.$A=NaN,this.e3=new MR(0,1/0),this.Vri=void 0,this.Gri=()=>{let t;t=this.yJ?this.Qri():x.max(this.$A||0,this.Qri()),this.J4(t)},this.gM=t;const e=So(t.n3,(t=>sa(t.vS,"audio"))),s=So(t.n3,(t=>sa(t.vS,"video")));e&&(this.X4=new t9(e,Q.tN),this.X4.yn(Qi.Km,this.Gri)),s&&(this.q4=new t9(s,Q.iN),this.q4.yn(Qi.Km,this.Gri)),this.Vri=null==(i=t.KF[0])?void 0:i.Gb}};r();var e9=class{o6(t){return me.ov(t,16)}u6(t){me.rv(t)}},s9=class extends Bo{get KI(){var t,i;return null!=(i=null==(t=this.WF)?void 0:t.KI)?i:ge.cR()}get sD(){return this.p9?this.p9.sD:this.Wri/1e3}get Ou(){return this.Xu}get ct(){var t,i;return this.p9?this.p9.ct:null!=(i=null==(t=this.WF)?void 0:t.ct)?i:NaN}get hD(){return this.p9?this.p9.hD:this.M3}get lt(){}get gD(){return!1}get Zri(){return this.WF}get mD(){return this.p9?this.p9.mD:this.oV}set mD(t){this.p9?this.p9.mD=t:this.oV!==t&&(this.oV=t,this.yo(new B(this.sD,this.Ay)))}get TD(){return this.p9?this.p9.TD:this.hV}get ND(){return this.p9?this.p9.ND:this.aV}set ND(t){this.aV!==t&&(this.Yn(),this.aV=t,this.yo(new rr(this.sD,t)))}get OD(){return this.T3}get PD(){var t;return(null==(t=this.WF)?void 0:t.PD)||ge.cR()}get BD(){return this.p9?this.p9.BD:this.rV}get y3(){return this.p9?this.p9.y3:this.b3}get C3(){return!1}get ZF(){}get ZD(){return this.p9?this.p9.ZD:this.Ay}set ZD(t){this.p9?this.p9.ZD=t:this.Ay!==t&&(this.Ay=t,this.yo(new B(this.sD,t)))}get $I(){}get Ti(){return this.Xu.Tu}get kD(){let t=this.Fo;return!this.p9&&this.J0t&&(t=t.WO(new ge([this.H0t,this.sD]))),t}get L9(){return this.eV}get ji(){return this.Xu.Su}get ka(){return this.Zo}get aY(){return this.Qo}get a7(){return!0}get FR(){return dO}wD(){return{cP:0,lP:0,dP:0,fP:0,gP:0,_P:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}}}IJ(t){for(const i of t)if(i.Hw===vl.mU&&i9.IJ(i))return i}async Mm(){this.Bo(),await this.tr(),this.cU.gn()}$n(t){if(t.Hw===vl.mU){const i=new i9(t);this.Hri(i),this.WF=i,me.ov((()=>{this.WF===i&&(this.yo(new Ti),this.Yn())}),0);const e=new UQ(i);return e.Unt=this,Promise.resolve(e)}return Promise.reject(new g("Unsupported configuration"))}eE(){this.p9?this.p9.eE():this.Xri(),this.Yn()}Xri(){this.hV=!0,void 0!==this.qri&&(me._w(this.qri),this.qri=void 0),this.yo(new Ia(this.sD))}async sE(){const t=this.Fm(fa.CO);this.p9?this.p9.sE():this.Kri(),await t}Kri(){this.hV&&(this.Yn(),this.hV=!1,this.M3&&(this.Wri=0),this.yo(new us(this.sD)),this.Yn(),void 0===this.qri&&(this.qri=me.gw(this.Jri,20)))}async tr(){void 0!==this.qri&&(me._w(this.qri),this.qri=void 0),this.WF&&(await this.WF.Mm(),this.WF=void 0),this.yo(new In(NaN)),this.Wri=0,this.H0t=0,this.$ri=-1/0,this.M3=!1,this.Fo=ge.cR(),this.J0t=!1,this.b3=!1,this.yo(new H(0,void 0)),this.rV&&(this.rV=!1,this.yo(new ns(0))),this.hV||(this.yo(new Ia(0)),this.hV=!0),1!==this.aV&&(this.aV=1,this.yo(new rr(0,1))),this.T3!==$i.KR&&(this.T3=$i.KR,this.yo(new hr(0,$i.KR)))}Gp(t,i,e){if(void 0===i&&(i=!1),void 0===e&&(e=!1),this.p9)return void this.p9.Gp(t,i,e);this.Fo=this.kD;const s=this.WF?this.WF.PD.QO(t):t;this.H0t=s,this.Wri=1e3*s,this.A3=i,e&&!this.rV?(this.b3=!0,this.yo(new za(s))):(this.b3=!1,this.rV=!0,this.yo(new ll(s))),this.Yn()}be(){this.eV=!1}get nt(){return this.cU.nt}get zl(){return this.gV}dE(t,i,e,s,n,r,o,h){return this.cU.dE(t,i,e,s,n,r,o,h)}uY(t){return this.cU.uY(t)}nY(){return!1}oY(){throw new g("Sideloaded native text tracks are not supported")}_U(t){this.cU._U(t)}cY(){this.cU.tr()}UF(){}ge(){this.eV=!0}l7(){}o7(){this.p9||(void 0!==this.qri&&(me._w(this.qri),this.qri=void 0),this.Fo=this.kD,this.p9=PR(this),this.p9.yn(OR,this.Ds))}h7(){if(!this.p9)return;const t=this.p9;this.p9=void 0,zR(this,t),t.Mm(),this.Yn(),this.hV||void 0!==this.qri||(this.qri=me.gw(this.Jri,20))}get FD(){return 0}get GD(){return 0}get gY(){return this.eY}set gY(t){this.eY=t}get X6(){var t;return null==(t=this.WF)?void 0:t.X6}Yn(){var t,i;if(this.p9)return;const e=me.J_(),s=j(this.toi)?0:e-this.toi;this.toi=e;let n=!1;var r;const o=null!=(r=null==(t=this.WF)?void 0:t.KI)?r:ge.cR();var h;const a=null!=(h=null==(i=this.WF)?void 0:i.r4)?h:ge.cR();this.hV||(this.Wri=this.ioi(s,o,a));const u=kl(o,a).UO().oR(this.sD);var c;const l=1e3*x.min(null!=(c=null==u?void 0:u.jn(0))?c:0,this.ct);this.eoi<l&&(this.eoi=l,this.yo(new mO(this.sD)));const d=this.soi(u,l);d!==this.T3&&(this.T3=d,this.yo(new hr(this.sD,this.T3))),n=this.noi(n),this.Y0t(),n=this.Pq(n),!n&&this.J0t&&this.$ri+250<e&&(n=!0,this.yo(new H(this.sD,void 0))),n&&(this.$ri=e)}ioi(t,i,e){let s=this.Wri,n=t*this.aV;const r=1e3*this.ct;for(;;){const t=e.oR(s/1e3);if(void 0!==t&&i.gr(t.jn(0))&&(s=1e3*t.jn(0)),(this.rV||this.b3)&&this.A3){const t=s/1e3,e=ER(i,t,1);if(e!==t){s=1e3*e;break}}if(this.rV||this.b3)break;if(n<=0)break;const o=i.oR(s/1e3);if(void 0===o)break;{const t=x.min(1e3*o.jn(0),r),i=x.min(n,t-s);if(!(i>0))break;s+=i,n-=i}}return s}soi(t,i){return this.WF?t?this.WF&&this.WF.yJ&&i===1e3*this.WF.ct?this.Wri===i?$i.JR:$i.tP:this.Wri===i?$i.JR:$i.$R:$i.Xn:$i.KR}noi(t){let i=t;if(this.T3>=$i.JR){const t=this.rV,e=this.b3;this.rV=!1,this.b3=!1,i||!t&&!e||(i=!0,this.yo(new H(this.sD,void 0))),t?this.yo(new ns(this.sD)):e&&this.yo(new pz(this.sD))}return i}Y0t(){const t=this.J0t,i=this.roi();!t&&i?(this.J0t=!0,this.yo(new fo(this.sD))):t&&!i&&(this.Fo=this.kD,this.J0t=!1)}roi(){return!this.BD&&!(this.TD||this.hD||this.lt||this.x3())}x3(){return this.OD<$i.$R}Pq(t){let i=t;return this.WF&&this.WF.yJ&&this.sD===this.ct?this.M3||(this.M3=!0,i||(i=!0,this.yo(new H(this.sD,void 0))),this.Xri(),this.yo(new ce(this.sD))):this.M3=!1,i}Hri(t){var i,e;null==(i=t.H4)||i.yn(W.ZK,this.ooi),null==(e=t.Z4)||e.yn(W.ZK,this.ooi),t.yn(Qi.Km,this.hoi)}constructor(){super(),this.p9=void 0,this.eY=void 0,this.Wri=0,this.Xu=new WC,this.M3=!1,this.Zo=new sx,this.Qo=new nx,this.eoi=0,this.H0t=0,this.$ri=-1/0,this.toi=NaN,this.WF=void 0,this.oV=!1,this.hV=!0,this.aV=1,this.Fo=ge.cR(),this.J0t=!1,this.T3=$i.KR,this.rV=!1,this.A3=!1,this.b3=!1,this.gV=new jz,this.qri=void 0,this.eV=!0,this.Ay=1,this.Jri=()=>{this.Yn()},this.ooi=()=>{this.Yn()},this.hoi=()=>{this.p9||(this.Yn(),this.yo(new In(this.WF.ct)))},this.cU=new xQ(this,new e9)}},n9=class{async aoi(t){this.zQt&&await this.zQt,this.uoi.NUt||await this.uoi.xUt(t),void 0===this.coi&&this.loi(),await this.uoi.UUt(this.coi,t)}loi(){for(const t of this.uoi.Tr.IRt)0!==t.ERt.length&&(this.coi=t.ERt[0])}get nt(){return this._Gt.nt}gn(){var t;this.yst.fn(Qi.dp,this.doi),null==(t=this.QQt)||t.Dm(),this.uoi.Mm()}constructor(t,i,e,s){this.doi=()=>{this.zQt=this.aoi(this.QQt.wm).catch(this.foi)},this.foi=t=>{0},this.yst=t;const n=new s1,r=new s9;this.uoi=new ZJ(e,n,!1,i,void 0),this._Gt=new JJ(this.uoi,r),this.QQt=new Ai,this.QQt.Em(s),this.yst.yn(Qi.dp,this.doi)}};r();function r9(t){return t&&t.integration===Mi.THEOADS}function o9(t){const i=h.createElement("div"),e=h.createElement("div");return function(t,i){let e;for(;Rt(e=t.firstChild);)i.appendChild(e)}(t,i),Dn(t,"theo-ads-sgai-container"),Dn(i,"theo-ads-sgai-content-player"),Dn(e,"theo-ads-sgai-ad-player"),t.appendChild(i),t.appendChild(e),{contentElement:i,adElement:e}}function h9(t){const i=t.style;i.position="relative",i.backgroundColor="transparent",i.backgroundRepeat="no-repeat",i.backgroundAttachment="scroll",i.border="0 solid transparent",i.borderWidth="0px",i.flex="0"}function a9(t){const i=t.style;i.display="",i.backgroundColor="",i.backgroundRepeat="",i.backgroundAttachment="",i.border="",i.borderWidth="",i.flex="",i.transform="",i.transition="",i.backgroundImage="",i.backgroundSize="",i.backgroundPosition="",i.alignItems="",i.position=""}Xu.K_.NV(new class{get L2t(){return al.kst}SV(t){return r9(t)}x2t(t,i,e){}o6(t,i,e,s){}YW(t){const i={integration:Mi.THEOADS,adTagParameters:jl(t.adTagParameters)?t.adTagParameters:{},useId3:Boolean(t.useId3)};return cs(t.sources)&&(i.sources=To(t.sources)),cs(t.networkCode)&&(i.networkCode=To(t.networkCode)),cs(t.customAssetKey)&&(i.customAssetKey=To(t.customAssetKey)),cs(t.backdropDoubleBox)&&(i.backdropDoubleBox=To(t.backdropDoubleBox)),cs(t.backdropLShape)&&(i.backdropLShape=To(t.backdropLShape)),cs(t.overrideLayout)&&(i.overrideLayout=function(t){switch(t){case"single":case"l-shape":case"double":case"single-if-mobile":return t;default:return}}(t.overrideLayout)),cs(t.overrideAdSrc)&&(i.overrideAdSrc=To(t.overrideAdSrc)),cs(t.retrievePodIdURI)&&(i.retrievePodIdURI=To(t.retrievePodIdURI)),i}}),r(),r(),r();var u9=function(t){return t.image="image",t}({}),c9=function(t){return t.png="png",t.svg="svg",t}({}),l9=class extends j6{get Hw(){return C6.Sni}constructor(t){super(t),this.goi=t.Hw,this.uo=t.uo,this.qp=t.qp,this._oi=t._oi,this.voi=t.voi,this.Fqt=t.Fqt,this.woi=t.woi}},d9="com.theoplayer.theoads.interstitial",f9="com.theoplayer.theoads.overlay",g9=class{get moi(){return this.poi}get Aoi(){return this.yoi}boi(t){if(!fh(this.Moi,t)){this.Moi.push(t);for(const i of t.FE)this.Toi(i);t.yn(di.gE,this.Hn),t.yn(di.vE,this.qn)}}Soi(t){if(fh(this.Moi,t)){Ro(this.Moi,t),t.fn(di.gE,this.Hn),t.fn(di.vE,this.qn);for(const i of t.FE)this.Noi(i)}}Toi(t){!this.Ioi&&function(t){return t.zt===vs.tU&&t.Hw===er.DATE_RANGE}(t)&&this.Doi!==t?this.Eoi(t):this.Ioi&&function(t){return t.zt===vs.tU&&t.Hw===er.ID3}(t)&&this.koi!==t&&this.Loi(t)}Noi(t){this.Doi===t?this.Eoi(void 0):this.koi===t&&this.Loi(void 0)}Eoi(t){const i=this.Doi;if(void 0!==i){if(i.L)for(const t of i.L.FE)this.xoi(t);i.fn(Ct.mE,this.Coi),i.fn(Ct.bE,this.joi),i.fn(Ct.SE,this.Ooi),i.fn(Ct.AE,this.yri),i.gN=P.vk}if(this.Doi=t,void 0!==t){if(t.L)for(const i of t.L.FE)this.Roi(i);t.yn(Ct.mE,this.Coi),t.yn(Ct.bE,this.joi),t.yn(Ct.SE,this.Ooi),t.yn(Ct.AE,this.yri),t.gN=P.vk}}Loi(t){const i=this.koi;if(void 0!==i){if(i.L)for(const t of i.L.FE)this.xoi(t);i.fn(Ct.mE,this.Poi),i.fn(Ct.SE,this.Ooi),i.fn(Ct.AE,this.yri),i.gN=P.vk}if(this.koi=t,void 0!==t){if(t.L)for(const i of t.L.FE)this.zoi(i);t.yn(Ct.mE,this.Poi),t.yn(Ct.SE,this.Ooi),t.yn(Ct.AE,this.yri),t.gN=P.vk}}Roi(t){if((t.iPt===d9||t.iPt===f9)&&t.nPt["X-ASSET-URI"])switch(t.iPt){case f9:try{var i;const e=atob(t.nPt["X-COM-THEOPLAYER-THEOADS-OVERLAY-PROPERTIES"]),s=JSON.parse(e),n=u9[s.type],r=new l9({o:t.o,Hw:n||u9.image,OP:t.OP,RP:isFinite(t.RP)?t.RP:void 0,ct:t.ct,sPt:t.sPt,uo:v9(s.position),qp:w9(s.size),_oi:s.opacity,voi:_9(s.gamProperties),Fqt:null==(i=s.resourceURI)?void 0:i.map((t=>function(t){const i=c9[t.type];let e=t.default;ui.Qs&&t.phone?e=t.phone:ui.C_&&t.tv&&(e=t.tv);return{Hw:i,xAt:e}}(t))),woi:s.clickThroughURI});this.Boi(r,t)}catch(t){me.dw(t)}break;case d9:{const i=t.nPt["X-RESUME-OFFSET"],e=new O6({o:t.o,OP:t.OP,xAt:this.Uoi||t.nPt["X-ASSET-URI"],Cni:this.Qoi||Uo[t.nPt["X-COM-THEOPLAYER-THEOADS-LAYOUT"]]||Uo.SINGLE,jni:t.nPt["X-COM-THEOPLAYER-THEOADS-BACKDROP"],RP:isFinite(t.RP)?t.RP:void 0,ct:t.ct,sPt:t.sPt,kni:void 0!==i?Number(i):void 0});this.Uni(e,t)}}}zoi(t){const i=t.O;if(!function(t){return"GEO"===t.id||"GEOB"===t.id}(i)||!function(t){return"Anvatos"===t.description&&"application/json"===t.mimeType}(i))return;const e=da(new DataView(i.data),new J),s=new Aa(e),n=s.get("type");if("cue"===n){let i=Number(s.get("duration"))/1e3||void 0;const e=new Aa(s.get("payload")),n=Number(e.get("dur"))||void 0,r=Number(e.get("s_bd"))||void 0;if(void 0!==n?i=n:void 0!==r&&(i=r/10),!i)return void 0;const o="theo-ads://dai.break/?d="+i,h=Number(s.get("pts"))||void 0,a=new O6({o:this.Uoi||t.o,OP:t.OP,xAt:o,Cni:this.Qoi||Uo.SINGLE,sPt:i,l_t:h});this.Uni(a,t)}else if("cue_end"===n){const i=this.Foi;i&&i.Yn({ct:t.OP-i.OP})}}Yoi(t){if(this.Voi.get(t.dk))this.EOt.Goi(t.OP);else{this.Woi.get(t.dk)&&this.EOt.Zoi()}}Hoi(t){for(const i of this.poi)if(t.o===i.o&&t.OP===i.OP&&t.Hw===i.Hw&&t.l_t===i.l_t&&t.Nni===i.Nni)return!0;return!1}Uni(t,i){this.Hoi(t)||(this.poi.push(t),this.Voi.set(i.dk,t),this.Foi=t,this.EOt.Uni(t))}Boi(t,i){this.yoi.push(t),this.Woi.set(i.dk,t),this.EOt.Boi(t)}Xoi(t){const i=this.Voi.get(t.dk);if(void 0===i)return;const e=t.nPt["X-RESUME-OFFSET"];i.Yn({ct:t.ct,RP:isFinite(t.RP)?t.RP:void 0,kni:void 0!==e?Number(e):void 0})}xoi(t){this.qoi(t)}qoi(t){void 0!==this.Voi.get(t.dk)&&this.Voi.delete(t.dk)}Qni(t){Ro(this.poi,t)}tr(){this.Foi=void 0,this.Eoi(void 0),this.Loi(void 0);for(const t of this.Moi.slice())this.Soi(t);Or(this.Moi),Or(this.poi),this.Voi.clear(),Or(this.yoi),this.Woi.clear()}gn(){this.tr()}constructor(t){this.Ioi=!1,this.poi=[],this.Voi=rn(),this.yoi=[],this.Woi=rn(),this.Moi=[],this.Hn=t=>{this.Toi(t.Lt)},this.qn=t=>{this.Noi(t.Lt)},this.Coi=t=>{this.Roi(t.CP)},this.Poi=t=>{this.zoi(t.CP)},this.Ooi=t=>{this.Yoi(t.CP)},this.yri=t=>{this.xoi(t.CP)},this.joi=t=>{this.Xoi(t.CP)},this.EOt=t}};function _9(t){if(!t)return;let i=t.sz.default;return ui.Qs&&t.sz.phone?i=t.sz.phone:ui.C_&&t.sz.tv&&(i=t.sz.tv),{Koi:t.iu,Joi:i}}function v9(t){let i,e,s,n;return t.top&&t.top>=0&&t.top<=100?i=t.top:t.bottom&&t.bottom>=0&&t.bottom<=100?e=t.bottom:i=10,t.left&&t.left>=0&&t.left<=100?s=t.left:t.right&&t.right>=0&&t.right<=100?n=t.right:s=10,{M7:i,b7:e,y7:s,A7:n}}function w9(t){let i,e;return i=t.width&&t.width>=0&&t.width<=100?t.width:10,e=t.height&&t.height>=0&&t.height<=100?t.height:10,{ji:i,Ti:e}}r();var m9=class{Xni(t){this.$oi=t}get B2t(){return this.r3t}get H2t(){var t;return void 0!==(null==(t=this.$oi)?void 0:t.Vst)}get O2t(){return al.kst}get Fst(){var t;return(null==(t=this.$oi)?void 0:t.R8t)?[this.$oi.R8t]:[]}get Vst(){var t,i;return null!=(i=null==(t=this.$oi)?void 0:t.Vst)?i:null}get Gst(){return this.$oi?Qr(this.$oi.I$t,(t=>{var i;const e=t.Uc;if(t===(null==(i=this.$oi)?void 0:i.Vst)&&void 0!==this.$oi.R8t){const t=e.indexOf(this.$oi.R8t);if(t>=0)return e.slice(t+1)}return t.kD?[]:e})):[]}get Wst(){return this.$oi?this.$oi.I$t.filter((t=>{var i;return t===(null==(i=this.$oi)?void 0:i.Vst)||!t.kD})):[]}Ax(){}nnt(t){}gn(){return this.$oi=void 0,Promise.resolve(void 0)}constructor(){this.r3t=new gj}};r();var p9=class{thi(t){this.theoAdsPlayer.lri(t)}get ga(){return function(t){return{replaceAdTagParameters(i){t.thi(i)}}}(this)}constructor(t){this.theoAdsPlayer=t}},A9=class extends W4{get Hst(){return this.ihi}o6(t,i,e){var s;null==(s=this.yst.Uc)||s.o6(t,i,e)}constructor(t,i,e){super(e),this.ihi=new p9(t),this.yst=i;for(const t of Xu.K_.bV){const e=i.Uc.G2t.k2t(t.L2t);void 0!==e&&this.G2t.C2t(e)}}};r(),r();var y9=class extends ps{ma(){return new b9}constructor(){super("ehi")}},b9=class extends Gs{constructor(){super("overlaybegin")}},M9=class{get shi(){return this.nhi}get rhi(){return this.eri}set rhi(t){this.eri=t}async showOverlay(t){this.ohi.push(t),this.nhi.style.display="";const i=h.createElement("div");i.className="theoplayer-theoads-overlay",i.style.display="",this.hhi.set(t.o,i);const e=h.createElement("a"),s=await this.ahi(t);if(s.clickThroughURI&&(this.nhi.style.zIndex="11",e.href=s.clickThroughURI,e.target="Uu",e.setAttribute("rel","noopener"),e.addEventListener("mousedown",this.Tti),e.addEventListener("touchend",this.Tti)),t.goi===u9.image&&(e.style.backgroundImage="url("+s.resourceURI+")",e.style.backgroundSize="contain",e.style.backgroundPosition="center",e.style.backgroundRepeat="no-repeat",s.impressionURI)){const t=h.createElement("img");t.src=s.impressionURI,t.style.display="none",e.appendChild(t)}Tu(e),i.appendChild(e),i.style.cssText=this.uhi(t),this.nhi.appendChild(i),this.lhi.B2t.yo(new y9)}removeOverlay(t){const i=this.hhi.get(t.o);i&&(this.nhi.contains(i)&&this.nhi.removeChild(i),this.hhi.delete(t.o),0===this.hhi.size&&(this.nhi.style.display="none"),Ro(this.ohi,t))}dhi(){this.hhi.forEach(((t,i)=>{this.nhi.contains(t)&&this.nhi.removeChild(t)})),this.hhi.clear(),this.ohi=[]}uhi(t){const i=t.uo;let e=0,s=1;if(this.nhi.clientWidth>0&&this.nhi.clientHeight>0){const t=this.ta.GD/this.ta.FD,i=this.shi.clientWidth,n=this.shi.clientHeight,r=i/t,o=(n-r)/2;e=0===n?0:x.floor(o/n*100),s=0===n?1:x.floor(100*(1-(n-r)/n))/100}let n="position:absolute;zIndex:10;";if(i.y7&&(n+="left:"+i.y7+"%;"),i.A7&&(n+="right:"+i.A7+"%;"),i.M7){n+="top:"+(i.M7*s+e)+"%;"}if(i.b7){n+="bottom:"+(i.b7*s+e)+"%;"}const r=t.qp;return r.ji&&(n+="width:"+r.ji+"%;"),r.Ti&&(n+="height:"+r.Ti*s+"%;"),t._oi&&t._oi>0&&t._oi<=100&&(n+="opacity:"+t._oi/100+";"),n}async getGAMMetadata(t){if(!t)return;const i=this.getCustomGAMUrl(t);return i?await this.fhi(i,this.dU):void 0}async ahi(t){const i={resourceURI:""},e=await this.getGAMMetadata(t.voi);if(e)i.resourceURI=e.image,i.impressionURI=e.impression;else if(t.Fqt){const e=So(t.Fqt,(t=>t.Hw===c9.svg));e&&(i.resourceURI=e.xAt);const s=So(t.Fqt,(t=>t.Hw===c9.png));s&&(i.resourceURI=s.xAt)}var s;return i.clickThroughURI=null!=(s=null==e?void 0:e.clickThrough)?s:t.woi,i}getCustomGAMUrl(t){const i=new Aa(this.eri);return i.set("iu",t.Koi),i.set("sz",t.Joi),i.set("c",String(this.ghi)),"https://securepubads.g.doubleclick.net/gampad/adx?"+i.toString()}async fhi(t,i){const e=new _e({Hu:t,CS:Me.XM,hN:Ml.GET});try{const t=await i.jS(e);return await t.xS()}catch(t){throw new Ji(Oc.NETWORK,na.UNKNOWN_AD_RESPONSE,"The ad source could not be loaded.",t)}}tr(){this.dhi(),this.nhi.style.display="none"}constructor(t,i,e){this.ohi=[],this.hhi=Ge(),this.ghi=(new Date).getTime(),this.handleDimensionChange=()=>{this.ohi.forEach((t=>{this.hhi.get(t.o).style.cssText=this.uhi(t)}))},this.Tti=t=>{t.stopPropagation()},this.ta=t,this.ta.yn(Ah.pn,this.handleDimensionChange);const s=h.createElement("div");s.style.display="none",s.className="theoads-image-overlays-container",i.appendChild(s),Tu(s),this.nhi=s,this.lhi=e,this.dU=me.GI}};r();var Xe=class extends B6{get Kni(){return z6.DEFAULT}hJ(t,i,e){return pu.resolve()}lri(t){}gri(t,i,e){let s;if(this.Wni=t,t.OP<i){const e=x.min(t.ct,t.Nni-i);s=t.ct-e,t.Yn({ct:e,Lni:s})}return this.Zni({sources:{src:t.xAt}},e,s)}Fni(){super.Fni(),this.$4t.yn(fa.CO,this._hi),this.$4t.yn(Qi.tp,this.G8),this.$4t.yn(ac.ua,this.SZt)}Bni(){this.$4t.fn(fa.CO,this._hi),this.$4t.fn(Qi.tp,this.G8),this.$4t.fn(ac.ua,this.SZt),super.Bni()}ld(t){var i;const e=this.pni(t.currentTime),s=this.Wni.M4t;this.Wni.Dni(e);const n=this.Wni.M4t;s<.25&&n>=.25?this.r3t.yo(new ro(this.Q$t,e)):s<.5&&n>.5?this.r3t.yo(new ho(this.Q$t,e)):s<.75&&n>=.75?this.r3t.yo(new oo(this.Q$t,e)):(null==(i=this.Wni)?void 0:i.kD)&&this.Cd(e)}Cd(t){super.Cd(t),this.j9=!1}async tr(){await super.tr(),this.j9=!1}constructor(...t){super(...t),this.j9=!1,this.SZt=()=>{this.yo(new bh(Oc.GENERAL))},this._hi=t=>{this.j9||(this.j9=!0,this.K$t=this.H4t(this.Wni),this.Q$t=new U6(void 0,this.K$t),this.r3t.yo(new Va(this.K$t)),this.r3t.yo(new Nc(this.Q$t,this.pni(t.currentTime))))},this.G8=t=>{this.Cd(this.pni(t.currentTime))}}};r(),r(),r();var T9=class extends Nu{},S9=class extends T9{ur(t,i){t.style.flex="1"}ar(t){t.style.flex="0"}constructor(t){super(t)}};r();var N9=class extends T9{ur(t,i){i.style.backgroundImage="url('"+this.Sri+"')",i.style.backgroundSize="contain",i.style.backgroundPosition="center",t.style.flex="1",t.style.transition=["flex","border-width","transform"].map((t=>t+" 1s ease-in-out")).join(", "),t.style.transform="\n          translate(-50%, -50%)\n          scale(calc(43/60))\n          translate(calc(50% + 100%/30), calc(50% + 100%/30))\n        "}ar(t){t.style.flex="0",t.style.transform=""}constructor(t,i){super(t),this.Sri=i}},I9=class extends z4{get Uc(){return this.vhi}get rhi(){var t,i,e;return null!=(e=null!=(i=this.eri)?i:null==(t=this.whi)?void 0:t.adTagParameters)?e:{}}lri(t){var i,e;this.eri=t,this.$oi.lri(null!=(e=null!=t?t:null==(i=this.whi)?void 0:i.adTagParameters)?e:{})}sE(){this.j9||(this.j9=!0,this.mhi=this.ta.pP,this.phi=this.ta.xD,this.ta.pP=!1,this.ta.xD=Ac.HR),super.sE()}async wa(t,i){var e;await super.wa(t,i);if(void 0===(null==(e=this.ta.bt)?void 0:e.src)||void 0===(null==t?void 0:t.ads))return;const s=So(t.ads,r9);if(void 0!==s){if(this.kc=t,this.whi=s,this.Ahi=s.overrideAdSrc,this.yhi=s.backdropLShape,s.networkCode&&s.customAssetKey){const t=this.$oi.I$t;await this.$oi.tr(),this.$oi=new ze(this,this.lhi,this.ke,t,this.rhi),this.$oi.hJ(s.networkCode,s.customAssetKey,this.rhi).then(ul)}this.bhi.Ioi=s.useId3,this.bhi.boi(this.ta.nt),this.Mhi=new S9(this.ta),this.Mhi.ur(this.ta.ke,this.ta.ke.parentElement),this.uP(this.Mhi)}}Uni(t){this.$oi.Uni(t),this.Goi(this.ta.nD())}Goi(t){var i;const e=this.nD();this.bhi.moi.filter((t=>t.kD||t.Nni&&t.Nni<e)).forEach((t=>this.Qni(t)));const s=this.bhi.moi.filter((t=>t.OP<=e&&(!t.Nni||e<t.Nni)));if(this.Thi=s[s.length-1],!this.Thi||void 0!==this.Shi)return;const n=this.Thi;null==(i=this.Nhi)||i.Dm(),this.Nhi=new Ai,this.Shi=this.gri(t,n,this.Nhi.wm)}async gri(t,i,e){var s;const n=this.Ahi||!sa(i.xAt,"theo-ads://dai.break");if(n&&this.$oi.Kni!==z6.DEFAULT){const t=this.$oi.I$t;await this.$oi.tr(),this.$oi=new Xe(this,this.lhi,t)}if(!n&&this.$oi.Kni!==z6.GOOGLE){const t=this.$oi.I$t;await this.$oi.tr(),this.$oi=new ze(this,this.lhi,this.ke,t,this.rhi)}for(;this.nD()<t;)await this.ta.Fm(Qi.Dp,e);this.Qzt=this.ta.$I,null==(s=this.Mhi)||s.ar(this.ta.ke),await this.ta.nE(),await this.$oi.gri(i,t,e),this.Mhi=this.Ihi(i.Cni,this.yhi),this.uP(this.Mhi),this.Mhi.ur(this.ke,this.ta.ke.parentElement),this.ta.sE(),this.lhi.B2t.yn("$st",this.Dhi)}Ihi(t,i){switch(t){case Uo.LSHAPE_AD:return new N9(this.ta,i);case Uo.SINGLE:default:return new S9(this.ta)}}Qni(t){this.bhi.Qni(t),this.$oi.Qni(t)}uD(){var t;return null!=(t=this.pV)?t:super.uD()}lD(){var t;return null!=(t=this.FF)?t:super.lD()}LY(t){void 0===this.lD()&&(this.FF=t,this.pV=be(t),this.yo(new As(t)))}async nE(){var t,i;(this.Thi=void 0,this.Mhi=void 0,this.Ahi=void 0,this.whi=void 0,this.j9)&&(this.ta.pP=null!=(t=this.mhi)&&t,this.ta.xD=null!=(i=this.phi)?i:Ac.HY,this.j9=!1,this.mhi=void 0,this.phi=void 0);this.bhi.tr(),await this.$oi.tr(),await this.ta.nE(),await super.nE()}async gn(){await this.nE().catch(ul),this.Mhi=void 0,this.bhi.gn(),await this.$oi.gn(),await this.ta.gn(),await super.gn()}Boi(t){}Ehi(t){}Zoi(){}constructor(t){super(t),this.FF=void 0,this.pV=void 0,this.j9=!1,this.Dhi=async()=>{var t;const i=this.Thi;this.Thi=void 0,i&&(await this.ta.nE(),await this.ta.wa(this.kc,(new Ai).wm),null==(t=this.Mhi)||t.ar(this.ta.ke),this.Mhi=new S9(this.ta),this.Mhi.ur(this.ta.ke,this.ta.ke.parentElement),this.uP(this.Mhi),this.ta.sE(),this.ta.$I=new Date(Number(this.Qzt)+1e3*i.ct),this.Shi=void 0,this.Thi=void 0,this.Qzt=void 0,this.lhi.B2t.fn("$st",this.Dhi))},this.ta=t,this.lhi=new m9,this.$oi=new Xe(this.ta,this.lhi,[]),this.vhi=new A9(this,t,t),this.vhi.rnt(this.lhi),this.bhi=new g9(this)}};r();var D9=class extends z4{ur(){var t;if(void 0!==this.Shi)return;const i=this.khi;this.khi=void 0,null==(t=this.Lhi)||t.Dm(),this.yst.aY.sP&&(this.xhi=new Ai,this.Shi=Te(this.Chi(i,this.xhi.wm),this.xhi).catch(bu))}ar(){var t;const i=this.Shi;this.Shi=void 0,null==(t=this.xhi)||t.Dm(),this.Lhi=new Ai,this.khi=Te(this.jhi(i,this.Lhi.wm),this.Lhi).catch(bu)}_a(){return this.yst.aY}Ohi(){this.Rhi={source:this.yst.Ya(),duration:this.yst._d(),currentTime:this.yst.nD(),preload:this.yst.xD,autoplay:this.yst.pP}}async Phi(t){this.yst.xD=Ac.HR,this.yst.pP=!1;const i=this.$4t.Ya();await this.yst.wa(i,t),this.yst.rD(this.$4t.nD())}async zhi(t,i){this.Rhi&&(this.yst.xD=this.Rhi.preload,this.yst.pP=this.Rhi.autoplay,await this.yst.wa(this.Rhi.source,i),this.yst.rD(this.Rhi.currentTime+t),this.Rhi=void 0)}async Chi(t,i){await(null==t?void 0:t.catch(ul)),this.Ohi(),await this.yst.nE(),await this.Phi(i),this.uP(this.yst),this.yst.sE()}async jhi(t,i){await(null==t?void 0:t.catch(ul));const e=this.yst._d();await this.yst.nE(),await this.zhi(e,i),this.uP(this.$4t),this.yst.sE()}Ya(){return this.Rhi?this.Rhi.source:super.Ya()}_d(){return this.Rhi?this.Rhi.duration:super._d()}constructor(t,i){super(i),this.yst=t,this.$4t=i}},E9=class extends z4{Bhi(){return this.yst.aY.sP}Uhi(){this.yst.aY.yn(ra.iP,this.Cit)}Qhi(){this.yst.aY.fn(ra.iP,this.Cit)}async wa(t,i){var e;this.Fhi(),re(i),await super.wa(t,i);const s=null==(e=this.yst.bt)?void 0:e.src;if(void 0===s||void 0===t||void 0===t.ads)return;const n=So(t.ads,r9);if(void 0!==n){if(this.Yhi(),this.Vhi(),this.whi=n,this.Ghi=n.backdropDoubleBox,this.Whi=n.backdropLShape,this.bhi.Qoi=function(t){switch(t){case"single":return Uo.SINGLE;case"l-shape":return Uo.LSHAPE_AD;case"double":return Uo.DOUBLE;case"single-if-mobile":return ui.Qs?Uo.SINGLE:void 0;default:return}}(n.overrideLayout),this.bhi.Uoi=n.overrideAdSrc,void 0!==n.networkCode&&void 0!==n.customAssetKey){const t=this.$oi.I$t,i=new ze(this.$4t,this.Hni,this.$ni,t,this.rhi,n.retrievePodIdURI);await this.Zhi(i),this.$oi.hJ(n.networkCode,n.customAssetKey,this.rhi).catch((t=>{0}))}this.Hhi(),this.bhi.Ioi=n.useId3,this.bhi.boi(this.yst.nt),this.Xhi.rhi=n.adTagParameters,void 0!==n.sources&&this.qhi(n.sources+s),this.Khi(new k6(this.yst,this.$4t),!1)}}async Zhi(t){this.$oi.fn(P6.AD_PAUSED,this.Jhi),await this.$oi.tr(),this.$oi=t,this.$oi.yn(P6.AD_PAUSED,this.Jhi)}qhi(t){this.$hi=new Ai,this.tai=new n9(this.yst,t,this.yst.GI,this.$hi.wm),this.bhi.boi(this.tai.nt)}Fhi(){var t;void 0!==this.tai&&(null==(t=this.$hi)||t.Dm(),this.$hi=void 0,this.tai.gn(),this.tai=void 0)}Yhi(){this.iai||(this.iai=!0,Ed(this.eai),Ed(this.nai),h9(this.Us),h9(this.eai),h9(this.nai),function(t){const i=t.style;i.display="flex",i.alignItems="center"}(this.Us))}rai(){this.iai&&(this.iai=!1,a9(this.Us),a9(this.eai),a9(this.nai),Tu(this.eai),Tu(this.nai))}iE(){this.yst.iE(),this.$4t.iE()}Mst(){return this.yst.nst}oD(){return this.Us}get Uc(){return this.vhi}get rhi(){var t,i,e;return null!=(e=null!=(i=this.eri)?i:null==(t=this.whi)?void 0:t.adTagParameters)?e:{}}sE(){super.sE(),this.yo(new us(this.nD())),this.oai=!0,this.hai=!1}eE(){this.hai=!0,super.eE()}lri(t){var i,e;this.eri=t,this.$oi.lri(null!=(e=null!=t?t:null==(i=this.whi)?void 0:i.adTagParameters)?e:{}),this.Xhi.rhi=t}Khi(t,i){var e;void 0!==this.aai&&(this.aai.ar(this.ke,this.eai,this.nai),this.aai.gn());const s=null!=(e=this.aai)?e:this,n=null!=t?t:this.yst;D6(s,n),null==t||t.ur(this.ke,this.eai,this.nai,s,i),this.aai=t,this.uP(n)}Hhi(){this.yst.yn(Qi.Dp,this.uai),this.yst.yn(Qi.bp,this.IG),this.yst.yn(Qi.wp,this.fN)}cai(){this.yst.fn(Qi.Dp,this.uai),this.yst.fn(Qi.bp,this.IG),this.yst.fn(Qi.wp,this.fN)}lai(){this.$4t.yn(Qi.wp,this.fai),this.Hni.B2t.yn("$st",this.gai),this.yst.yn(Qi.dp,this.doi)}_ai(){this.$4t.fn(Qi.wp,this.fai),this.Hni.B2t.fn("$st",this.gai),this.yst.fn(Qi.dp,this.doi)}Goi(t){this.vai(t),this.wai(t),this.mai(t)}Zoi(){const t=this.nD(),i=[];this.pai.forEach(((e,s)=>{t>=e.OP&&(void 0===e.Nni||t<e.Nni)||(this.Xhi.removeOverlay(e),i.push(s))})),i.forEach((t=>this.pai.delete(t)));for(const i of this.bhi.Aoi){const e=i.Nni;if(void 0!==e&&t>=e)continue;const s=i.OP,n=i.OP+i.ct;t>=s&&t<=n&&!this.pai.has(i.o)&&(this.Xhi.showOverlay(i).catch((t=>{me.lw("Failed to load an overlay",t)})),this.pai.set(i.o,i))}}vai(t){let i;const e=[];for(const s of this.bhi.moi){if(s.kD){e.push(s);continue}const n=s.Nni;void 0!==n&&t>=n?(s.kD=!0,e.push(s)):void 0!==i&&i.OP<s.OP||(i=s)}for(const t of e)this.Qni(t);this.Thi!==i&&(this.Thi=i,this.Aai())}Aai(){var t;this.$oi.zni(),null==(t=this.yai)||t.Dm(),this.bai=void 0,this.Mai=void 0}wai(t){if(void 0===this.Thi||void 0!==this.bai||this.Tai)return;let i=!1;const e=ge.xn(this.yst.JI()).oR(t);if(void 0!==e&&(i=e.jn(0)>=this.Thi.OP),this.Thi.Hw===C6.Tni){const e=this.Thi,s=e.Nni,n=t>=e.OP&&(void 0===s||t<s);(i||n)&&(this.yai=new Ai,this.bai=Te(this.gri(e,t,this.yai.wm),this.yai).catch((t=>{0})))}}async gri(t,i,e){const s=!sa(t.xAt,"theo-ads://dai.break");if(s&&this.$oi.Kni!==z6.DEFAULT){const t=this.$oi.I$t,i=new Xe(this.$4t,this.Hni,t);await this.Zhi(i)}if(!s&&this.$oi.Kni!==z6.GOOGLE){var n;const t=this.$oi.I$t,i=new ze(this.$4t,this.Hni,this.$ni,t,this.rhi,null==(n=this.whi)?void 0:n.retrievePodIdURI);await this.Zhi(i)}await this.$oi.gri(t,i,e)}mai(t){if(void 0===this.Thi||void 0!==this.Mai||this.Tai)return;const i=this.Thi.Nni;var e;t>=this.Thi.OP&&(void 0===i||t<i)&&(this.Mai=null==(e=this.bai)?void 0:e.then((()=>this.Sai())))}Sai(){if(void 0===this.Thi||this.Thi.Hw!==C6.Tni)return;const t=this.Thi,i=t.Cni,e=this.Ihi(i,t.jni);this.cai(),ui.M_&&ui.S_>=16&&ui.S_<18&&this.$4t.rD(this.$4t.nD()),this.Khi(e,this.oai),this.lai(),this.Tai=!0,this.Mai=void 0}Ihi(t,i){if(this.Bhi())return new L6(this.yst,this.$4t);switch(t){case Uo.DOUBLE:return new Y6(this.yst,this.$4t,null!=i?i:this.Ghi);case Uo.LSHAPE_AD:return new W6(this.yst,this.$4t,null!=i?i:this.Whi);case Uo.LSHAPE_CONTENT:return new G6(this.yst,this.$4t,null!=i?i:this.Whi);case Uo.SINGLE:default:return new x6(this.yst,this.$4t)}}Nai(){var t,i;const e=null==(t=this.Thi)?void 0:t.Nni;if(void 0===e||(null==(i=this.aai)?void 0:i.wni())||Xs(this.yst.nD(),e,.001))return;const s=ge.xn(this.$4t.JI()),n=this.$4t.zD(),r=x.min(n.end(n.length-1),this.Thi.ct);s.UO().gr(r)&&this.yst.rD(e,{QPt:!0})}o2t(){void 0!==this.Thi&&(this._ai(),this.Khi(new k6(this.yst,this.$4t),!0),this.yst.rD(this.Thi.Nni,{QPt:!0}),this.Hhi(),this.Tai=!1,this.Thi=void 0)}Uni(t){this.$oi.Uni(t),this.vai(this.yst.nD())}Qni(t){this.bhi.Qni(t),this.$oi.Qni(t)}Boi(t){0}Ehi(t){0}uD(){var t;return null!=(t=this.pV)?t:super.uD()}lD(){var t;return null!=(t=this.FF)?t:super.lD()}LY(t){void 0===this.lD()&&(this.FF=t,this.pV=be(t),this.yo(new As(t)))}async nE(){this.FF=void 0,this.pV=void 0,this.Thi=void 0,this.oai=!0,this.hai=!0,this.Tai=!1,this.bhi.tr(),this.cai(),this._ai(),this.Fhi(),this.Khi(void 0,!1),await this.$4t.nE(),this.Aai(),this.$oi.fn(P6.AD_PAUSED,this.Jhi),await this.$oi.tr(),this.rai(),this.Xhi.tr(),this.pai.clear(),await super.nE()}async gn(){await this.nE().catch(ul),this.Qhi(),this.Khi(void 0,!1),this.bhi.gn(),await this.$oi.gn(),await this.$4t.gn(),await super.gn()}lE(t){if(void 0!==this.aai)switch(t.type){case Qi.so:if(!this.Bhi())return!0;break;case Qi.vp:if(!this.hai&&!this.Bhi())return!0;this.hai=!1;break;case fa.CO:if(!this.oai&&!this.Bhi())return!0;this.oai=!1;break;case fa.xO:this.oai=!0}return super.lE(t)}constructor(t){super(t),this.FF=void 0,this.pV=void 0,this.pai=Ge(),this.iai=!1,this.oai=!0,this.hai=!0,this.Tai=!1,this.Cit=()=>{this.Tai&&this.Khi(new L6(this.yst,this.$4t),!1)},this.Jhi=()=>{this.hai=!0},this.Vhi=async()=>{try{await this.gst.wZ([Mh.THEOADS])}catch(t){await this.nE().catch(ul),this.LY(NA(t,Do.LICENSE_INVALID_FEATURE))}},this.uai=t=>{this.Goi(t.currentTime),this.Zoi()},this.IG=t=>{this.Goi(t.currentTime),this.Zoi()},this.fN=t=>{this.wai(t.currentTime)},this.fai=t=>{this.Bhi()||this.Nai()},this.doi=t=>{this.Bhi()||this.Nai()},this.gai=()=>{this.o2t()},this.Us=t.ke;const{contentElement:i,adElement:e}=o9(this.Us);this.eai=i,this.nai=e,Tu(this.eai),Tu(this.nai),this.yst=t;const s=new f3(new CU(this.nai,t.md,new yC),Xu.K_);s.xD=Ac.HR,s.pP=!1,this.$4t=new D9(this.yst,s),this.$ni=function(t){const i=h.createElement("div");return Dn(i,"theo-ads-sgai-ima-container"),function(t){t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%"}(i),t.appendChild(i),i}(e),this.Hni=new m9,this.$oi=new Xe(this.$4t,this.Hni,[]),this.bhi=new g9(this),this.vhi=new A9(this,t,t),this.vhi.rnt(this.Hni),this.Xhi=new M9(this,i,this.Hni),this.Uhi()}},k9=class extends Nu{wa(t,i){var e;return void 0!==So(null!=(e=null==t?void 0:t.ads)?e:[],r9)?Promise.reject(new Ui(Do.CONFIGURATION_ERROR,"THEOads must be enabled in the player configuration.")):super.wa(t,i)}};ya((t=>t.md.ads.theoads?ui.$g||ui.s_?new I9(t):new E9(t):new k9(t)),hh.kst),r(),r(),r(),r(),r();var L9=class extends Bo{get ga(){return this.Za||(this.Za=function(t){return{get casting(){return t.eK},get state(){return t.xft},start(){t.oE()},stop(){t.hE()},addEventListener(i,e){const s=yu(i,To);t.yn(s,e)},removeEventListener(i,e){const s=yu(i,To);t.fn(s,e)}}}(this)),this.Za}constructor(...t){super(...t),this.Za=void 0}},x9=class extends L9{get eK(){return this.xft===un.CONNECTED}get xft(){return this.Ea}Iai(){this.Dai(),this.Gwt.yn(Qi.ro,this.Eai),this.Na(un.AVAILABLE)}Dai(){this.ta&&this.ta.fn(Qi.Ym,this.handleAirplayChangedEvent),this.kai?this.ta=this.lq:this.ta=this.Lai,this.ta.yn(Qi.Ym,this.handleAirplayChangedEvent)}get kai(){return this.lq.rE()}async xai(){if(this.ta){if(this.kai){if(!this.ta.TD){const t=new Promise((t=>u(t,800))),i=this.ta.Fm(Qi.vp,this.Cai.wm);await Promise.race([i,t])}this.ta.sE()}else{this.jai=this.lq.sD,this.Oai=this.lq.$I,this.Lai.yn(Qi.Dp,this.handleAirplayPlayerTimeUpdate),this.Rai=this.lq.WE,this.lq.WE=this.Lai,this.Rai.eE(),this.Rai.be(),this.Lai.ge(),this.Lai.mD=this.Rai.mD,this.Lai.ND=this.Rai.ND,this.Lai.ZD=this.Rai.ZD;const t=this.Lai.Fm(Qi.yp);this.Lai.sD=this.Rai.sD,await t,this.Lai.sE(),this.Lai.mD=this.Rai.mD,this.Lai.ND=this.Rai.ND,this.Lai.ZD=this.Rai.ZD}this.Na(un.CONNECTED)}}Pai(){if(this.Rai){this.Lai.fn(Qi.Dp,this.handleAirplayPlayerTimeUpdate),this.Rai.mD=this.Lai.mD,this.Rai.ND=this.Lai.ND,this.Rai.ZD=this.Lai.ZD;ui.M_&&!ui.Ka&&this.lq.ct===1/0?this.Oai?this.Rai.$I=this.Oai:this.Rai.sD=1/0:this.Rai.sD=this.jai,this.Oai=void 0,this.jai=void 0,this.Rai.ge(),this.Lai.be(),this.Lai.TD||this.Rai.sE(),this.lq.WE=this.Rai,this.Lai.tr(),this.Rai=void 0}else this.ta&&(this.ta.sD=this.ta.sD+1e-4);this.Na(un.AVAILABLE)}preloadPlayer(t){if(re(t),this.ta.OD<$i.Xn){const i=this.ta.Fm(fa.LO,t);return this.ta.xD=Ac.tU,i}return Promise.resolve()}Na(t){t!==this.Ea&&(this.Ea=t,this.yo(new C4(this.Ea)))}oE(){let t;this.Gwt.iE(),this.Cai.Dm(),this.Cai=new Ai,t=this.kai?this.zai(this.Cai.wm):this.Bai(this.Cai.wm),xe(Te(t,this.Cai))}async zai(t){await this.preloadPlayer(t),this.lq.oE()}async Bai(t){try{await this.Lai.tr();const i=this.lq.Ya();if(void 0===i)throw new g("Not possible to start Airplay without a source");await this.Lai.wa(i,t);const e=this.Lai.Fm(fa.CO,t);this.Lai.sE(),await Qv(e,3e3),this.Lai.eE(),re(t),this.Lai.oE()}catch(t){if(F(t))return;0}}hE(){this.ta.hE()}gn(){var t;this.Bo(),this.Gwt.fn(Qi.ro,this.Eai),this.Cai.Dm(),this.lq.mP(this.Lai),null==(t=this.Lai)||t.gn()}constructor(t,i,e){super(),this.Ea=un.UNAVAILABLE,this.Cai=new Ai,this.Eai=()=>{var t;const i=null==(t=this.lq.Ya())?void 0:t.sources.filter(bI);(null==i?void 0:i.some(WL))?this.Na(un.AVAILABLE):this.Na(un.UNAVAILABLE)},this.handleAirplayChangedEvent=()=>{this.ta&&this.ta.gD?this.xai():this.xft===un.CONNECTED&&this.Pai()},this.handleAirplayPlayerTimeUpdate=t=>{this.jai=t.currentTime,this.Oai=this.lq.$I},this.Gwt=t,this.lq=i,this.Lai=e,this.Lai.be(),i.wP(e),this.Iai()}};r();var C9=class extends L9{get eK(){return!1}get xft(){return un.UNAVAILABLE}oE(){}hE(){}};r();var j9=class extends G{uE(){this.Uai.uE()}dE(t){throw new g("Can't add a track while using AirPlay.")}get ht(){return this.Uai.ht}get KI(){return this.Uai.KI}get bt(){return this.XY}get sD(){return this.Uai.sD}set sD(t){this.rD(t)}rD(t,i){this.Uai.rD(t,i)}get $I(){return this.Uai.$I}get ct(){return this.Uai.ct}get ke(){return this.Us}get hD(){return this.Uai.hD}get lt(){return this.Uai.lt}get cD(){return this.Uai.cD}get dD(){return this.Uai.dD}get gD(){return this.Uai.gD}get JD(){return this.Uai.JD}get qD(){return this.Uai.qD}get vD(){return this.Uai.vD}get mD(){return this.Uai.mD}set mD(t){this.Uai.mD=t}get bD(){return this.Uai.bD}get TD(){return this.Uai.TD}get ND(){return this.Uai.ND}set ND(t){this.Uai.ND=t}get kD(){return this.Uai.kD}get xD(){return this.Uai.xD}set xD(t){this.Uai.xD=t}get OD(){return this.Uai.OD}get PD(){return this.Uai.PD}get BD(){return this.Uai.BD}rE(){return this.Uai.rE()}oE(){this.Uai.oE()}hE(){this.Uai.hE()}get nt(){return this.Uai.nt}get FD(){return this.Uai.FD}get GD(){return this.Uai.GD}get rt(){return this.Uai.rt}get ZD(){return this.Uai.ZD}set ZD(t){this.Uai.ZD=t}sE(){xe(this.Uai.sE())}eE(){this.Uai.eE()}async nE(){}Ya(){return this.kc}async wa(t,i){let e;if(re(i),this.kc=t,Ls(t.sources))e=RN({src:""});else{const i=t.sources.filter(bI);for(const t of i)if(WL(t)){e=t;break}}if(!e)throw new g("Unsupported source.");await this.Uai.wa(e,t,i),this.sV(e)}sV(t){this.XY!==t&&(this.XY=t,this.yo(new jI(t)))}tE(){return this.Uai.tE()}qI(){return[]}iE(){this.Qai.cV()}ur(t){xI(this,t)}ar(){}cE(t){return!1}aE(){this.Uai.aE()}async tr(){this.XY=void 0,this.kc=void 0,await this.Uai.tr()}ge(){this.Uai.ge()}be(){this.Uai.be()}$D(){return this.Uai.$D()}_a(){return this.Uai._a()}async gn(){this.Bo(),this.Qai.gn(),await this.Uai.gn(),this.oP.gn(),this.aP.gn(),this.Ol.gn()}constructor(t,i,e,s,n,r,o){super(),this.XY=void 0,this.kc=void 0,this.oP=new Dh,this.aP=new Dh,this.Ol=new ci,this.Us=t,this.Qai=new Cn(r,o,1,[Q.iN]),this.Qai.wV(t),this.Uai=new GL(t,this.Qai,i,e,s,n),this.Uai.Rm(this.Ds),this.oP.WE=this.Uai.ht,this.aP.WE=this.Uai.rt,this.Ol.WE=this.Uai.nt}},O9=class extends Nu{async gn(){this.Fai.gn(),await super.gn()}constructor(t){super(t);const i=new j9(this.xa.ke,this.GI,this.md,this.nst,this.qD,this.ust,this.zl);this.Fai=new x9(this,this.xa,i),this.TW.hK(this.Fai),this.yn(Qi.Xm,(()=>{this.Fai.Dai()}))}};ya((t=>me.Ys.Av?new O9(t):(t.TW.hK(new C9),t)),hh.Lst),r(),r();var R9="VPAID";function P9(t){return"spotx"===t.integration}Xu.K_.NV(new class t{get L2t(){return this.Yai.L2t}SV(t){return P9(t)}x2t(i,e,s){return s.ads||(s.ads=AI({})),s.ads.vpaidMode=s.ads.vpaidMode||t.Vai(),this.Yai.x2t(i,e,s)}o6(i,e,s,n){!function(t){if(!P9(t))throw new g("Unknown ad integration: "+t.integration)}(i);const r=t.Gai(i,s.ke);this.Yai.o6(r,e,s,n)}YW(t){const i=Wa(t);if(!j(i.id))return i.queryParameters||(i.queryParameters={}),i.custom&&(i.queryParameters.custom?ae('"custom" parameter is redefined in queryParameters! Please use "queryParameters.custom" only!'):(i.queryParameters.custom=i.custom,delete i.custom)),i.app&&(i.queryParameters.app?ae('"app" parameter is redefined in queryParameters! Please use "queryParameters.app" only!'):(i.queryParameters.app=i.app,delete i.app)),i.device&&(i.queryParameters.device?ae('"device" parameter is redefined in queryParameters! Please use "queryParameters.device" only!'):(i.queryParameters.device=i.device,delete i.device)),i.user&&(i.queryParameters.user?ae('"user" parameter is redefined in queryParameters! Please use "queryParameters.user" only!'):(i.queryParameters.user=i.user,delete i.user)),i.ipAddress&&(i.queryParameters.ip_addr?ae('"ipAddress" parameter is redefined in queryParameters! Please use "queryParameters.ip_addr" or "ipAddress" only!'):(i.queryParameters.ip_addr=i.ipAddress,delete i.ipAddress)),i.maximumAdDuration&&(i.queryParameters.VMaxd?ae('"maximumAdDuration" parameter is redefined in queryParameters! Please use "queryParameters.VMaxd" or "maximumAdDuration" only!'):(i.queryParameters.VMaxd=i.maximumAdDuration,delete i.maximumAdDuration)),i}static Gai(i,e){return{integration:Mi.SPOTX,sources:{src:t.Wai(i,oi.location.href,e.offsetWidth,e.offsetHeight,ui.F_)}}}static Wai(i,e,s,n,r){if(i.sources)return i.sources;let o=n,h=s;r&&0===h&&(h=320,o=180);const a={custom_skin:1,player_width:h,player_height:o};i.cacheBuster&&(a.cb=x.random()),t.Zai(e)&&(a.content_page_url=e);const u=il({},a,i.queryParameters);return u[R9]||u.VPI||(u[R9]="js"),"https://search.spotxchange.com/vast/2.0/"+i.id+"?"+t.Hai(u)}static Zai(t){return sa(t,"http://")||sa(t,"https://")}static Hai(t){return T2(t)}static Vai(){return ui.l_?ys.ENABLED:ys.INSECURE}constructor(){this.Yai=new q3}}),r(),r(),r(),r();var Je=void 0!==s?s:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},z9=function(){return/Android/i.test(zl.userAgent)||/iPhone|iPad|iPod/i.test(zl.userAgent)},B9=function(t,i){for(var e=0,s=t.length;e<s;e++)i[e]=t[e]},U9=function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e]);return t},Q9=function(){function t(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),_.defineProperty(t,s.key,s)}}return function(i,e,s){return e&&t(i.prototype,e),s&&t(i,s),i}}(),F9=function(t,i){if(Array.isArray(t))return t;if(f in _(t))return function(t,i){var e=[],s=!0,n=!1,r=void 0;try{for(var o,h=t[f]();!(s=(o=h.next()).done)&&(e.push(o.value),!i||e.length!==i);s=!0);}catch(t){n=!0,r=t}finally{try{!s&&h.return&&h.return()}finally{if(n)throw r}}return e}(t,i);throw new w("Invalid attempt to destructure non-iterable instance")},Y9=function(t,i,e){return t+(i-t)*e},wt=function(){var t=/iPad|iPhone|iPod/.test(zl.platform);return function(){return t}}(),V9=function(){var t=-1!==zl.userAgent.indexOf("Version")&&-1!==zl.userAgent.indexOf("Android")&&-1!==zl.userAgent.indexOf("Chrome");return function(){return t}}(),G9=(function(){var t=/^((?!chrome|android).)*safari/i.test(zl.userAgent)}(),function(){var t=-1!==zl.userAgent.indexOf("Firefox")&&-1!==zl.userAgent.indexOf("Android");return function(){return t}}()),W9=function(){var t=zl.userAgent.match(/.*Chrome\/([0-9]+)/),i=t?C(t[1],10):null;return function(){return i}}(),Z9=function(){var t=!1;if(65===W9()){var i=zl.userAgent.match(/.*Chrome\/([0-9\.]*)/);if(i){var e=i[1].split("."),s=F9(e,4),n=(s[0],s[1],s[2]),r=s[3];t=3325===C(n,10)&&C(r,10)<148}}return function(){return t}}(),H9=function(){var t=-1!==zl.userAgent.indexOf("R7 Build");return function(){return t}}(),X9=function(){var t=90==s.orientation||-90==s.orientation;return H9()?!t:t},q9=function(){return x.max(s.screen.width,s.screen.height)*s.devicePixelRatio},K9=function(){return x.min(s.screen.width,s.screen.height)*s.devicePixelRatio},J9=function(){if(h.exitFullscreen)h.exitFullscreen();else if(h.webkitExitFullscreen)h.webkitExitFullscreen();else if(h.mozCancelFullScreen)h.mozCancelFullScreen();else{if(!h.msExitFullscreen)return!1;h.msExitFullscreen()}return!0},$9=function(t,i,e,s){var n=t.createShader(t.VERTEX_SHADER);t.shaderSource(n,i),t.compileShader(n);var r=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(r,e),t.compileShader(r);var o=t.createProgram();for(var h in t.attachShader(o,n),t.attachShader(o,r),s)t.bindAttribLocation(o,s[h],h);return t.linkProgram(o),t.deleteShader(n),t.deleteShader(r),o},t8=function(t,i){for(var e={},s=t.getProgramParameter(i,t.ACTIVE_UNIFORMS),n="",r=0;r<s;r++){e[n=t.getActiveUniform(i,r).name.replace("[0]","")]=t.getUniformLocation(i,n)}return e},i8=function(){var t,i=!1;return t=zl.userAgent||zl.vendor||s.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(i=!0),i},e8=function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e]);return t},s8=[],n8=function(t){if(wt()){r8(t);var i,e,n=t.style.width,r=t.style.height,o=t.offsetWidth+1,h=t.offsetHeight;t.style.width=o+"px",t.style.height=h+"px";var a=function(){s.cancelAnimationFrame(e);for(var o=0;o<s8.length;o++)if(s8[o]===i){t.style.width=n,t.style.height=r,s8.splice(o,1);break}};i={wst:t,Xai:a},s8.push(i),e=s.requestAnimationFrame(a)}},r8=function(t){if(wt())for(var i=0;i<s8.length;i++)if(s8[i].wst===t){s8[i].Xai();break}},o8=function(){var t=x.PI/180,i=.25*x.PI;var e=new Float32Array([0,0,0,1]),s=new Float32Array([0,0,0]);function n(n,r,o,h,a,u){!function(e,s,n,r){var o=x.tan(s?s.upDegrees*t:i),h=x.tan(s?s.downDegrees*t:i),a=x.tan(s?s.leftDegrees*t:i),u=x.tan(s?s.rightDegrees*t:i),c=2/(a+u),l=2/(o+h);e[0]=c,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=l,e[6]=0,e[7]=0,e[8]=-(a-u)*c*.5,e[9]=(o-h)*l*.5,e[10]=r/(n-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*n/(n-r),e[15]=0}(n,h||null,u.depthNear,u.depthFar),function(t,i,e){var s=i[0],n=i[1],r=i[2],o=i[3],h=s+s,a=n+n,u=r+r,c=s*h,l=s*a,d=s*u,f=n*a,g=n*u,_=r*u,v=o*h,w=o*a,m=o*u;t[0]=1-(f+_),t[1]=l+m,t[2]=d-w,t[3]=0,t[4]=l-m,t[5]=1-(c+_),t[6]=g+v,t[7]=0,t[8]=d+w,t[9]=g-v,t[10]=1-(c+f),t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1}(r,o.orientation||e,o.position||s),a&&function(t,i,e){var s,n,r,o,h,a,u,c,l,d,f,g,_=e[0],v=e[1],w=e[2];i===t?(t[12]=i[0]*_+i[4]*v+i[8]*w+i[12],t[13]=i[1]*_+i[5]*v+i[9]*w+i[13],t[14]=i[2]*_+i[6]*v+i[10]*w+i[14],t[15]=i[3]*_+i[7]*v+i[11]*w+i[15]):(s=i[0],n=i[1],r=i[2],o=i[3],h=i[4],a=i[5],u=i[6],c=i[7],l=i[8],d=i[9],f=i[10],g=i[11],t[0]=s,t[1]=n,t[2]=r,t[3]=o,t[4]=h,t[5]=a,t[6]=u,t[7]=c,t[8]=l,t[9]=d,t[10]=f,t[11]=g,t[12]=s*_+h*v+l*w+i[12],t[13]=n*_+a*v+d*w+i[13],t[14]=r*_+u*v+f*w+i[14],t[15]=o*_+c*v+g*w+i[15])}(r,r,a),function(t,i){var e=i[0],s=i[1],n=i[2],r=i[3],o=i[4],h=i[5],a=i[6],u=i[7],c=i[8],l=i[9],d=i[10],f=i[11],g=i[12],_=i[13],v=i[14],w=i[15],m=e*h-s*o,p=e*a-n*o,A=e*u-r*o,y=s*a-n*h,b=s*u-r*h,M=n*u-r*a,T=c*_-l*g,S=c*v-d*g,N=c*w-f*g,I=l*v-d*_,D=l*w-f*_,E=d*w-f*v,k=m*E-p*D+A*I+y*N-b*S+M*T;k&&(k=1/k,t[0]=(h*E-a*D+u*I)*k,t[1]=(n*D-s*E-r*I)*k,t[2]=(_*M-v*b+w*y)*k,t[3]=(d*b-l*M-f*y)*k,t[4]=(a*N-o*E-u*S)*k,t[5]=(e*E-n*N+r*S)*k,t[6]=(v*A-g*M-w*p)*k,t[7]=(c*M-d*A+f*p)*k,t[8]=(o*D-h*N+u*T)*k,t[9]=(s*N-e*D-r*T)*k,t[10]=(g*b-_*A+w*m)*k,t[11]=(l*A-c*b-f*m)*k,t[12]=(h*S-o*I-a*T)*k,t[13]=(e*I-s*S+n*T)*k,t[14]=(_*p-g*y-v*m)*k,t[15]=(c*y-l*p+d*m)*k)}(r,r)}return function(t,i,e){return!(!t||!i)&&(t.pose=i,t.timestamp=i.timestamp,n(t.leftProjectionMatrix,t.leftViewMatrix,i,e.qai("left"),e.Kai("left"),e),n(t.rightProjectionMatrix,t.rightViewMatrix,i,e.qai("right"),e.Kai("right"),e),!0)}}(),h8=function(t){var i,e=t.indexOf("://");i=-1!==e?e+3:0;var s=t.indexOf("/",i);return-1===s&&(s=t.length),t.substring(0,s)},a8=function(){var t={};return function(i,e){void 0===t[i]&&(console.warn("webvr-polyfill: "+e),t[i]=!0)}}(),u8=function(t,i){a8(t,t+" has been deprecated. This may not work on native WebVR displays. "+(i?"Please use "+i+" instead.":""))};var c8=function(t,i,e){if(i){for(var s=[],n=null,r=0;r<i.length;++r){switch(o=i[r]){case t.TEXTURE_BINDING_2D:case t.TEXTURE_BINDING_CUBE_MAP:if((a=i[++r])<t.TEXTURE0||a>t.TEXTURE31){console.error("TEXTURE_BINDING_2D or TEXTURE_BINDING_CUBE_MAP must be followed by a valid texture unit"),s.push(null,null);break}n||(n=t.getParameter(t.ACTIVE_TEXTURE)),t.activeTexture(a),s.push(t.getParameter(o),null);break;case t.ACTIVE_TEXTURE:n=t.getParameter(t.ACTIVE_TEXTURE),s.push(null);break;default:s.push(t.getParameter(o))}}e(t);for(r=0;r<i.length;++r){var o=i[r],h=s[r];switch(o){case t.ACTIVE_TEXTURE:break;case t.ARRAY_BUFFER_BINDING:t.bindBuffer(t.ARRAY_BUFFER,h);break;case t.COLOR_CLEAR_VALUE:t.clearColor(h[0],h[1],h[2],h[3]);break;case t.COLOR_WRITEMASK:t.colorMask(h[0],h[1],h[2],h[3]);break;case t.CURRENT_PROGRAM:t.useProgram(h);break;case t.ELEMENT_ARRAY_BUFFER_BINDING:t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,h);break;case t.FRAMEBUFFER_BINDING:t.bindFramebuffer(t.FRAMEBUFFER,h);break;case t.RENDERBUFFER_BINDING:t.bindRenderbuffer(t.RENDERBUFFER,h);break;case t.TEXTURE_BINDING_2D:if((a=i[++r])<t.TEXTURE0||a>t.TEXTURE31)break;t.activeTexture(a),t.bindTexture(t.TEXTURE_2D,h);break;case t.TEXTURE_BINDING_CUBE_MAP:var a;if((a=i[++r])<t.TEXTURE0||a>t.TEXTURE31)break;t.activeTexture(a),t.bindTexture(t.TEXTURE_CUBE_MAP,h);break;case t.VIEWPORT:t.viewport(h[0],h[1],h[2],h[3]);break;case t.BLEND:case t.CULL_FACE:case t.DEPTH_TEST:case t.SCISSOR_TEST:case t.STENCIL_TEST:h?t.enable(o):t.disable(o);break;default:console.log("No GL restore behavior for 0x"+o.toString(16))}n&&t.activeTexture(n)}}else e(t)},l8=["attribute vec2 position;","attribute vec3 texCoord;","varying vec2 vTexCoord;","uniform vec4 viewportOffsetScale[2];","void main() {","  vec4 viewport = viewportOffsetScale[int(texCoord.z)];","  vTexCoord = (texCoord.xy * viewport.zw) + viewport.xy;","  gl_Position = vec4( position, 1.0, 1.0 );","}"].join("\n"),d8=["precision mediump float;","uniform sampler2D diffuse;","varying vec2 vTexCoord;","void main() {","  gl_FragColor = texture2D(diffuse, vTexCoord);","}"].join("\n");function ku(t,i,e,s){this.gl=t,this.cardboardUI=i,this.bufferScale=e,this.dirtySubmitFrameBindings=s,this.ctxAttribs=t.getContextAttributes(),this.meshWidth=20,this.meshHeight=20,this.bufferWidth=t.drawingBufferWidth,this.bufferHeight=t.drawingBufferHeight,this.realBindFramebuffer=t.bindFramebuffer,this.realEnable=t.enable,this.realDisable=t.disable,this.realColorMask=t.colorMask,this.realClearColor=t.clearColor,this.realViewport=t.viewport,wt()||(this.realCanvasWidth=_.getOwnPropertyDescriptor(t.canvas.__proto__,"width"),this.realCanvasHeight=_.getOwnPropertyDescriptor(t.canvas.__proto__,"height")),this.isPatched=!1,this.lastBoundFramebuffer=null,this.cullFace=!1,this.depthTest=!1,this.blend=!1,this.scissorTest=!1,this.stencilTest=!1,this.viewport=[0,0,0,0],this.colorMask=[!0,!0,!0,!0],this.clearColor=[0,0,0,0],this.attribs={position:0,texCoord:1},this.program=$9(t,l8,d8,this.attribs),this.uniforms=t8(t,this.program),this.viewportOffsetScale=new Float32Array(8),this.setTextureBounds(),this.vertexBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),this.indexCount=0,this.renderTarget=t.createTexture(),this.framebuffer=t.createFramebuffer(),this.depthStencilBuffer=null,this.depthBuffer=null,this.stencilBuffer=null,this.ctxAttribs.depth&&this.ctxAttribs.stencil?this.depthStencilBuffer=t.createRenderbuffer():this.ctxAttribs.depth?this.depthBuffer=t.createRenderbuffer():this.ctxAttribs.stencil&&(this.stencilBuffer=t.createRenderbuffer()),this.patch(),this.onResize()}ku.prototype.destroy=function(){var t=this.gl;this.unpatch(),t.deleteProgram(this.program),t.deleteBuffer(this.vertexBuffer),t.deleteBuffer(this.indexBuffer),t.deleteTexture(this.renderTarget),t.deleteFramebuffer(this.framebuffer),this.depthStencilBuffer&&t.deleteRenderbuffer(this.depthStencilBuffer),this.depthBuffer&&t.deleteRenderbuffer(this.depthBuffer),this.stencilBuffer&&t.deleteRenderbuffer(this.stencilBuffer),this.cardboardUI&&this.cardboardUI.destroy()},ku.prototype.onResize=function(){var t=this.gl,i=this,e=[t.RENDERBUFFER_BINDING,t.TEXTURE_BINDING_2D,t.TEXTURE0];c8(t,e,(function(t){i.realBindFramebuffer.call(t,t.FRAMEBUFFER,null),i.scissorTest&&i.realDisable.call(t,t.SCISSOR_TEST),i.realColorMask.call(t,!0,!0,!0,!0),i.realViewport.call(t,0,0,t.drawingBufferWidth,t.drawingBufferHeight),i.realClearColor.call(t,0,0,0,1),t.clear(t.COLOR_BUFFER_BIT),i.realBindFramebuffer.call(t,t.FRAMEBUFFER,i.framebuffer),t.bindTexture(t.TEXTURE_2D,i.renderTarget),t.texImage2D(t.TEXTURE_2D,0,i.ctxAttribs.alpha?t.RGBA:t.RGB,i.bufferWidth,i.bufferHeight,0,i.ctxAttribs.alpha?t.RGBA:t.RGB,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,i.renderTarget,0),i.ctxAttribs.depth&&i.ctxAttribs.stencil?(t.bindRenderbuffer(t.RENDERBUFFER,i.depthStencilBuffer),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,i.bufferWidth,i.bufferHeight),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,i.depthStencilBuffer)):i.ctxAttribs.depth?(t.bindRenderbuffer(t.RENDERBUFFER,i.depthBuffer),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,i.bufferWidth,i.bufferHeight),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,i.depthBuffer)):i.ctxAttribs.stencil&&(t.bindRenderbuffer(t.RENDERBUFFER,i.stencilBuffer),t.renderbufferStorage(t.RENDERBUFFER,t.STENCIL_INDEX8,i.bufferWidth,i.bufferHeight),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.STENCIL_ATTACHMENT,t.RENDERBUFFER,i.stencilBuffer)),!t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer incomplete!"),i.realBindFramebuffer.call(t,t.FRAMEBUFFER,i.lastBoundFramebuffer),i.scissorTest&&i.realEnable.call(t,t.SCISSOR_TEST),i.realColorMask.apply(t,i.colorMask),i.realViewport.apply(t,i.viewport),i.realClearColor.apply(t,i.clearColor)})),this.cardboardUI&&this.cardboardUI.onResize()},ku.prototype.patch=function(){if(!this.isPatched){var t=this,i=this.gl.canvas,e=this.gl;wt()||(i.width=q9()*this.bufferScale,i.height=K9()*this.bufferScale,_.defineProperty(i,"width",{configurable:!0,enumerable:!0,get:function(){return t.bufferWidth},set:function(e){t.bufferWidth=e,t.realCanvasWidth.set.call(i,e),t.onResize()}}),_.defineProperty(i,"height",{configurable:!0,enumerable:!0,get:function(){return t.bufferHeight},set:function(e){t.bufferHeight=e,t.realCanvasHeight.set.call(i,e),t.onResize()}})),this.lastBoundFramebuffer=e.getParameter(e.FRAMEBUFFER_BINDING),null==this.lastBoundFramebuffer&&(this.lastBoundFramebuffer=this.framebuffer,this.gl.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer)),this.gl.bindFramebuffer=function(i,s){t.lastBoundFramebuffer=s||t.framebuffer,t.realBindFramebuffer.call(e,i,t.lastBoundFramebuffer)},this.cullFace=e.getParameter(e.CULL_FACE),this.depthTest=e.getParameter(e.DEPTH_TEST),this.blend=e.getParameter(e.BLEND),this.scissorTest=e.getParameter(e.SCISSOR_TEST),this.stencilTest=e.getParameter(e.STENCIL_TEST),e.enable=function(i){switch(i){case e.CULL_FACE:t.cullFace=!0;break;case e.DEPTH_TEST:t.depthTest=!0;break;case e.BLEND:t.blend=!0;break;case e.SCISSOR_TEST:t.scissorTest=!0;break;case e.STENCIL_TEST:t.stencilTest=!0}t.realEnable.call(e,i)},e.disable=function(i){switch(i){case e.CULL_FACE:t.cullFace=!1;break;case e.DEPTH_TEST:t.depthTest=!1;break;case e.BLEND:t.blend=!1;break;case e.SCISSOR_TEST:t.scissorTest=!1;break;case e.STENCIL_TEST:t.stencilTest=!1}t.realDisable.call(e,i)},this.colorMask=e.getParameter(e.COLOR_WRITEMASK),e.colorMask=function(i,s,n,r){t.colorMask[0]=i,t.colorMask[1]=s,t.colorMask[2]=n,t.colorMask[3]=r,t.realColorMask.call(e,i,s,n,r)},this.clearColor=e.getParameter(e.COLOR_CLEAR_VALUE),e.clearColor=function(i,s,n,r){t.clearColor[0]=i,t.clearColor[1]=s,t.clearColor[2]=n,t.clearColor[3]=r,t.realClearColor.call(e,i,s,n,r)},this.viewport=e.getParameter(e.VIEWPORT),e.viewport=function(i,s,n,r){t.viewport[0]=i,t.viewport[1]=s,t.viewport[2]=n,t.viewport[3]=r,t.realViewport.call(e,i,s,n,r)},this.isPatched=!0,n8(i)}},ku.prototype.unpatch=function(){if(this.isPatched){var t=this.gl,i=this.gl.canvas;wt()||(_.defineProperty(i,"width",this.realCanvasWidth),_.defineProperty(i,"height",this.realCanvasHeight)),i.width=this.bufferWidth,i.height=this.bufferHeight,t.bindFramebuffer=this.realBindFramebuffer,t.enable=this.realEnable,t.disable=this.realDisable,t.colorMask=this.realColorMask,t.clearColor=this.realClearColor,t.viewport=this.realViewport,this.lastBoundFramebuffer==this.framebuffer&&t.bindFramebuffer(t.FRAMEBUFFER,null),this.isPatched=!1,u((function(){n8(i)}),1)}},ku.prototype.setTextureBounds=function(t,i){t||(t=[0,0,.5,1]),i||(i=[.5,0,.5,1]),this.viewportOffsetScale[0]=t[0],this.viewportOffsetScale[1]=t[1],this.viewportOffsetScale[2]=t[2],this.viewportOffsetScale[3]=t[3],this.viewportOffsetScale[4]=i[0],this.viewportOffsetScale[5]=i[1],this.viewportOffsetScale[6]=i[2],this.viewportOffsetScale[7]=i[3]},ku.prototype.submitFrame=function(){var t=this.gl,i=this,e=[];if(this.dirtySubmitFrameBindings||e.push(t.CURRENT_PROGRAM,t.ARRAY_BUFFER_BINDING,t.ELEMENT_ARRAY_BUFFER_BINDING,t.TEXTURE_BINDING_2D,t.TEXTURE0),c8(t,e,(function(t){i.realBindFramebuffer.call(t,t.FRAMEBUFFER,null),i.cullFace&&i.realDisable.call(t,t.CULL_FACE),i.depthTest&&i.realDisable.call(t,t.DEPTH_TEST),i.blend&&i.realDisable.call(t,t.BLEND),i.scissorTest&&i.realDisable.call(t,t.SCISSOR_TEST),i.stencilTest&&i.realDisable.call(t,t.STENCIL_TEST),i.realColorMask.call(t,!0,!0,!0,!0),i.realViewport.call(t,0,0,t.drawingBufferWidth,t.drawingBufferHeight),(i.ctxAttribs.alpha||wt())&&(i.realClearColor.call(t,0,0,0,1),t.clear(t.COLOR_BUFFER_BIT)),t.useProgram(i.program),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,i.indexBuffer),t.bindBuffer(t.ARRAY_BUFFER,i.vertexBuffer),t.enableVertexAttribArray(i.attribs.position),t.enableVertexAttribArray(i.attribs.texCoord),t.vertexAttribPointer(i.attribs.position,2,t.FLOAT,!1,20,0),t.vertexAttribPointer(i.attribs.texCoord,3,t.FLOAT,!1,20,8),t.activeTexture(t.TEXTURE0),t.uniform1i(i.uniforms.diffuse,0),t.bindTexture(t.TEXTURE_2D,i.renderTarget),t.uniform4fv(i.uniforms.viewportOffsetScale,i.viewportOffsetScale),t.drawElements(t.TRIANGLES,i.indexCount,t.UNSIGNED_SHORT,0),i.cardboardUI&&i.cardboardUI.renderNoState(),i.realBindFramebuffer.call(i.gl,t.FRAMEBUFFER,i.framebuffer),i.ctxAttribs.preserveDrawingBuffer||(i.realClearColor.call(t,0,0,0,0),t.clear(t.COLOR_BUFFER_BIT)),i.dirtySubmitFrameBindings||i.realBindFramebuffer.call(t,t.FRAMEBUFFER,i.lastBoundFramebuffer),i.cullFace&&i.realEnable.call(t,t.CULL_FACE),i.depthTest&&i.realEnable.call(t,t.DEPTH_TEST),i.blend&&i.realEnable.call(t,t.BLEND),i.scissorTest&&i.realEnable.call(t,t.SCISSOR_TEST),i.stencilTest&&i.realEnable.call(t,t.STENCIL_TEST),i.realColorMask.apply(t,i.colorMask),i.realViewport.apply(t,i.viewport),!i.ctxAttribs.alpha&&i.ctxAttribs.preserveDrawingBuffer||i.realClearColor.apply(t,i.clearColor)})),wt()){var s=t.canvas;s.width==i.bufferWidth&&s.height==i.bufferHeight||(i.bufferWidth=s.width,i.bufferHeight=s.height,i.onResize())}},ku.prototype.updateDeviceInfo=function(t){var i=this.gl,e=this,s=[i.ARRAY_BUFFER_BINDING,i.ELEMENT_ARRAY_BUFFER_BINDING];c8(i,s,(function(i){var s=e.Jai(e.meshWidth,e.meshHeight,t);if(i.bindBuffer(i.ARRAY_BUFFER,e.vertexBuffer),i.bufferData(i.ARRAY_BUFFER,s,i.STATIC_DRAW),!e.indexCount){var n=e.$ai(e.meshWidth,e.meshHeight);i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,e.indexBuffer),i.bufferData(i.ELEMENT_ARRAY_BUFFER,n,i.STATIC_DRAW),e.indexCount=n.length}}))},ku.prototype.Jai=function(t,i,e){for(var s=new Float32Array(2*t*i*5),n=e.getLeftEyeVisibleTanAngles(),r=e.getLeftEyeNoLensTanAngles(),o=e.getLeftEyeVisibleScreenRect(r),h=0,a=0;a<2;a++){for(var u=0;u<i;u++)for(var c=0;c<t;c++,h++){var l=c/(t-1),d=u/(i-1),f=l,g=d,_=Y9(n[0],n[2],l),v=Y9(n[3],n[1],d),w=x.sqrt(_*_+v*v),m=e.distortion.distortInverse(w),p=v*m/w;l=(_*m/w-r[0])/(r[2]-r[0]),d=(p-r[3])/(r[1]-r[3]),l=2*(o.x+l*o.width-.5),d=2*(o.y+d*o.height-.5),s[5*h+0]=l,s[5*h+1]=d,s[5*h+2]=f,s[5*h+3]=g,s[5*h+4]=a}var A=n[2]-n[0];n[0]=-(A+n[0]),n[2]=A-n[2],A=r[2]-r[0],r[0]=-(A+r[0]),r[2]=A-r[2],o.x=1-(o.x+o.width)}return s},ku.prototype.$ai=function(t,i){for(var e=new Uint16Array(2*(t-1)*(i-1)*6),s=t/2,n=i/2,r=0,o=0,h=0;h<2;h++)for(var a=0;a<i;a++)for(var u=0;u<t;u++,r++)0!=u&&0!=a&&(u<=s==a<=n?(e[o++]=r,e[o++]=r-t-1,e[o++]=r-t,e[o++]=r-t-1,e[o++]=r,e[o++]=r-1):(e[o++]=r-1,e[o++]=r-t,e[o++]=r,e[o++]=r-t,e[o++]=r-1,e[o++]=r-t-1));return e},ku.prototype.tui=function(t,i){var e=_.getOwnPropertyDescriptor(t,i);return void 0!==e.get&&void 0!==e.set||(e.configurable=!0,e.enumerable=!0,e.get=function(){return this.getAttribute(i)},e.set=function(t){this.setAttribute(i,t)}),e};var f8=["attribute vec2 position;","uniform mat4 projectionMat;","void main() {","  gl_Position = projectionMat * vec4( position, -1.0, 1.0 );","}"].join("\n"),g8=["precision mediump float;","uniform vec4 color;","void main() {","  gl_FragColor = color;","}"].join("\n"),_8=x.PI/180,v8=.3125,w8=28;function m8(t){this.gl=t,this.attribs={position:0},this.program=$9(t,f8,g8,this.attribs),this.uniforms=t8(t,this.program),this.vertexBuffer=t.createBuffer(),this.gearOffset=0,this.gearVertexCount=0,this.arrowOffset=0,this.arrowVertexCount=0,this.projMat=new Float32Array(16),this.listener=null,this.onResize()}function p8(t){this.coefficients=t}m8.prototype.destroy=function(){var t=this.gl;this.listener&&t.canvas.removeEventListener("click",this.listener,!1),t.deleteProgram(this.program),t.deleteBuffer(this.vertexBuffer)},m8.prototype.listen=function(t,i){var e=this.gl.canvas,s="undefined"!=typeof TouchEvent;this.listener=function(n){var r=e.clientWidth/2,o=s&&n instanceof TouchEvent?(n.preventDefault(),n.changedTouches[0]):n;o.clientX>r-42&&o.clientX<r+42&&o.clientY>e.clientHeight-42?(n.preventDefault(),n.stopImmediatePropagation(),t(n)):o.clientX<42&&o.clientY<42&&(n.preventDefault(),n.stopImmediatePropagation(),i(n))},e.addEventListener("click",this.listener,!1),e.addEventListener("touchstart",this.listener,!1)},m8.prototype.onResize=function(){var t=this.gl,i=this,e=[t.ARRAY_BUFFER_BINDING];c8(t,e,(function(t){var e=[],n=t.drawingBufferWidth/2,r=x.max(screen.width,screen.height)*s.devicePixelRatio,o=t.drawingBufferWidth/r*s.devicePixelRatio,h=4*o/2,a=42*o,u=w8*o/2,c=14*o;function l(t,i){var s=(90-t)*_8,r=x.cos(s),o=x.sin(s);e.push(v8*r*u+n,v8*o*u+u),e.push(i*r*u+n,i*o*u+u)}e.push(n-h,a),e.push(n-h,t.drawingBufferHeight),e.push(n+h,a),e.push(n+h,t.drawingBufferHeight),i.gearOffset=e.length/2;for(var d=0;d<=6;d++){var f=60*d;l(f,1),l(f+12,1),l(f+20,.75),l(f+40,.75),l(f+48,1)}function g(i,s){e.push(c+i,t.drawingBufferHeight-c-s)}i.gearVertexCount=e.length/2-i.gearOffset,i.arrowOffset=e.length/2;var _=h/x.sin(45*_8);g(0,u),g(u,0),g(u+_,_),g(_,u+_),g(_,u-_),g(0,u),g(u,2*u),g(u+_,2*u-_),g(_,u-_),g(0,u),g(_,u-h),g(w8*o,u-h),g(_,u+h),g(w8*o,u+h),i.arrowVertexCount=e.length/2-i.arrowOffset,t.bindBuffer(t.ARRAY_BUFFER,i.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array(e),t.STATIC_DRAW)}))},m8.prototype.render=function(){var t=this.gl,i=this,e=[t.CULL_FACE,t.DEPTH_TEST,t.BLEND,t.SCISSOR_TEST,t.STENCIL_TEST,t.COLOR_WRITEMASK,t.VIEWPORT,t.CURRENT_PROGRAM,t.ARRAY_BUFFER_BINDING];c8(t,e,(function(t){t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.BLEND),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.colorMask(!0,!0,!0,!0),t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight),i.renderNoState()}))},m8.prototype.renderNoState=function(){var t=this.gl;t.useProgram(this.program),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.enableVertexAttribArray(this.attribs.position),t.vertexAttribPointer(this.attribs.position,2,t.FLOAT,!1,8,0),t.uniform4f(this.uniforms.color,1,1,1,1),function(t,i,e,s,n,r,o){var h=1/(i-e),a=1/(s-n),u=1/(r-o);t[0]=-2*h,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(i+e)*h,t[13]=(n+s)*a,t[14]=(o+r)*u,t[15]=1}(this.projMat,0,t.drawingBufferWidth,0,t.drawingBufferHeight,.1,1024),t.uniformMatrix4fv(this.uniforms.projectionMat,!1,this.projMat),t.drawArrays(t.TRIANGLE_STRIP,0,4),t.drawArrays(t.TRIANGLE_STRIP,this.gearOffset,this.gearVertexCount),t.drawArrays(t.TRIANGLE_STRIP,this.arrowOffset,this.arrowVertexCount)},p8.prototype.distortInverse=function(t){for(var i=0,e=1,s=t-this.distort(i);x.abs(e-i)>1e-4;){var n=t-this.distort(e),r=e-n*((e-i)/(n-s));i=e,e=r,s=n}return e},p8.prototype.distort=function(t){for(var i=t*t,e=0,s=0;s<this.coefficients.length;s++)e=i*(e+this.coefficients[s]);return(e+1)*t};var A8=x.PI/180,pn=180/x.PI,Ea=function(t,i,e){this.x=t||0,this.y=i||0,this.z=e||0};Ea.prototype={constructor:Ea,set:function(t,i,e){return this.x=t,this.y=i,this.z=e,this},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},length:function(){return x.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){var t=this.length();if(0!==t){var i=1/t;this.multiplyScalar(i)}else this.x=0,this.y=0,this.z=0;return this},multiplyScalar:function(t){this.x*=t,this.y*=t,this.z*=t},applyQuaternion:function(t){var i=this.x,e=this.y,s=this.z,n=t.x,r=t.y,o=t.z,h=t.w,a=h*i+r*s-o*e,u=h*e+o*i-n*s,c=h*s+n*e-r*i,l=-n*i-r*e-o*s;return this.x=a*h+l*-n+u*-o-c*-r,this.y=u*h+l*-r+c*-n-a*-o,this.z=c*h+l*-o+a*-r-u*-n,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},crossVectors:function(t,i){var e=t.x,s=t.y,n=t.z,r=i.x,o=i.y,h=i.z;return this.x=s*h-n*o,this.y=n*r-e*h,this.z=e*o-s*r,this}};var bi=function(t,i,e,s){this.x=t||0,this.y=i||0,this.z=e||0,this.w=void 0!==s?s:1};function y8(t){this.width=t.width||q9(),this.height=t.height||K9(),this.widthMeters=t.widthMeters,this.heightMeters=t.heightMeters,this.bevelMeters=t.bevelMeters}bi.prototype={constructor:bi,set:function(t,i,e,s){return this.x=t,this.y=i,this.z=e,this.w=s,this},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this},setFromEulerXYZ:function(t,i,e){var s=x.cos(t/2),n=x.cos(i/2),r=x.cos(e/2),o=x.sin(t/2),h=x.sin(i/2),a=x.sin(e/2);return this.x=o*n*r+s*h*a,this.y=s*h*r-o*n*a,this.z=s*n*a+o*h*r,this.w=s*n*r-o*h*a,this},setFromEulerYXZ:function(t,i,e){var s=x.cos(t/2),n=x.cos(i/2),r=x.cos(e/2),o=x.sin(t/2),h=x.sin(i/2),a=x.sin(e/2);return this.x=o*n*r+s*h*a,this.y=s*h*r-o*n*a,this.z=s*n*a-o*h*r,this.w=s*n*r+o*h*a,this},setFromAxisAngle:function(t,i){var e=i/2,s=x.sin(e);return this.x=t.x*s,this.y=t.y*s,this.z=t.z*s,this.w=x.cos(e),this},multiply:function(t){return this.multiplyQuaternions(this,t)},multiplyQuaternions:function(t,i){var e=t.x,s=t.y,n=t.z,r=t.w,o=i.x,h=i.y,a=i.z,u=i.w;return this.x=e*u+r*o+s*a-n*h,this.y=s*u+r*h+n*o-e*a,this.z=n*u+r*a+e*h-s*o,this.w=r*u-e*o-s*h-n*a,this},inverse:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this.normalize(),this},normalize:function(){var t=x.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===t?(this.x=0,this.y=0,this.z=0,this.w=1):(t=1/t,this.x=this.x*t,this.y=this.y*t,this.z=this.z*t,this.w=this.w*t),this},slerp:function(t,i){if(0===i)return this;if(1===i)return this.copy(t);var e=this.x,s=this.y,n=this.z,r=this.w,o=r*t.w+e*t.x+s*t.y+n*t.z;if(o<0?(this.w=-t.w,this.x=-t.x,this.y=-t.y,this.z=-t.z,o=-o):this.copy(t),o>=1)return this.w=r,this.x=e,this.y=s,this.z=n,this;var h=x.acos(o),a=x.sqrt(1-o*o);if(x.abs(a)<.001)return this.w=.5*(r+this.w),this.x=.5*(e+this.x),this.y=.5*(s+this.y),this.z=.5*(n+this.z),this;var u=x.sin((1-i)*h)/a,c=x.sin(i*h)/a;return this.w=r*u+this.w*c,this.x=e*u+this.x*c,this.y=s*u+this.y*c,this.z=n*u+this.z*c,this},setFromUnitVectors:function(){var t,i;return function(e,s){return void 0===t&&(t=new Ea),(i=e.dot(s)+1)<1e-6?(i=0,x.abs(e.x)>x.abs(e.z)?t.set(-e.y,e.x,0):t.set(0,-e.z,e.y)):t.crossVectors(e,s),this.x=t.x,this.y=t.y,this.z=t.z,this.w=i,this.normalize(),this}}()};var b8=new y8({widthMeters:.11,heightMeters:.062,bevelMeters:.004}),M8=new y8({widthMeters:.1038,heightMeters:.0584,bevelMeters:.004}),T8={CardboardV1:new S8({id:"CardboardV1",label:"Cardboard I/O 2014",fov:40,interLensDistance:.06,baselineLensDistance:.035,screenLensDistance:.042,distortionCoefficients:[.441,.156],inverseCoefficients:[-.4410035,.42756155,-.4804439,.5460139,-.58821183,.5733938,-.48303202,.33299083,-.17573841,.0651772,-.01488963,.001559834]}),CardboardV2:new S8({id:"CardboardV2",label:"Cardboard I/O 2015",fov:60,interLensDistance:.064,baselineLensDistance:.035,screenLensDistance:.039,distortionCoefficients:[.34,.55],inverseCoefficients:[-.33836704,-.18162185,.862655,-1.2462051,1.0560602,-.58208317,.21609078,-.05444823,.009177956,-.0009904169,6183535e-11,-16981803e-13]})};function bc(t){this.viewer=T8.CardboardV2,this.updateDeviceParams(t),this.distortion=new p8(this.viewer.distortionCoefficients)}function S8(t){this.id=t.id,this.label=t.label,this.fov=t.fov,this.interLensDistance=t.interLensDistance,this.baselineLensDistance=t.baselineLensDistance,this.screenLensDistance=t.screenLensDistance,this.distortionCoefficients=t.distortionCoefficients,this.inverseCoefficients=t.inverseCoefficients}bc.prototype.updateDeviceParams=function(t){this.device=this.iui(t)||this.device},bc.prototype.getDevice=function(){return this.device},bc.prototype.setViewer=function(t){this.viewer=t,this.distortion=new p8(this.viewer.distortionCoefficients)},bc.prototype.iui=function(t){if(!t)return wt()?(console.warn("Using fallback iOS device measurements."),M8):(console.warn("Using fallback Android device measurements."),b8);var i=.0254,e=i/t.xdpi,s=i/t.ydpi;return new y8({widthMeters:e*q9(),heightMeters:s*K9(),bevelMeters:.001*t.bevelMm})},bc.prototype.getDistortedFieldOfViewLeftEye=function(){var t=this.viewer,i=this.device,e=this.distortion,s=t.screenLensDistance,n=(i.widthMeters-t.interLensDistance)/2,r=t.interLensDistance/2,o=t.baselineLensDistance-i.bevelMeters,h=i.heightMeters-o,a=pn*x.atan(e.distort(n/s)),u=pn*x.atan(e.distort(r/s)),c=pn*x.atan(e.distort(o/s)),l=pn*x.atan(e.distort(h/s));return{leftDegrees:x.min(a,t.fov),rightDegrees:x.min(u,t.fov),downDegrees:x.min(c,t.fov),upDegrees:x.min(l,t.fov)}},bc.prototype.getLeftEyeVisibleTanAngles=function(){var t=this.viewer,i=this.device,e=this.distortion,s=x.tan(-A8*t.fov),n=x.tan(A8*t.fov),r=x.tan(A8*t.fov),o=x.tan(-A8*t.fov),h=i.widthMeters/4,a=i.heightMeters/2,u=t.baselineLensDistance-i.bevelMeters-a,c=t.interLensDistance/2-h,l=-u,d=t.screenLensDistance,f=e.distort((c-h)/d),g=e.distort((l+a)/d),_=e.distort((c+h)/d),v=e.distort((l-a)/d),w=new Float32Array(4);return w[0]=x.max(s,f),w[1]=x.min(n,g),w[2]=x.min(r,_),w[3]=x.max(o,v),w},bc.prototype.getLeftEyeNoLensTanAngles=function(){var t=this.viewer,i=this.device,e=this.distortion,s=new Float32Array(4),n=e.distortInverse(x.tan(-A8*t.fov)),r=e.distortInverse(x.tan(A8*t.fov)),o=e.distortInverse(x.tan(A8*t.fov)),h=e.distortInverse(x.tan(-A8*t.fov)),a=i.widthMeters/4,u=i.heightMeters/2,c=t.baselineLensDistance-i.bevelMeters-u,l=t.interLensDistance/2-a,d=-c,f=t.screenLensDistance,g=(l-a)/f,_=(d+u)/f,v=(l+a)/f,w=(d-u)/f;return s[0]=x.max(n,g),s[1]=x.min(r,_),s[2]=x.min(o,v),s[3]=x.max(h,w),s},bc.prototype.getLeftEyeVisibleScreenRect=function(t){var i=this.viewer,e=this.device,s=i.screenLensDistance,n=(e.widthMeters-i.interLensDistance)/2,r=i.baselineLensDistance-e.bevelMeters,o=(t[0]*s+n)/e.widthMeters,h=(t[1]*s+r)/e.heightMeters,a=(t[2]*s+n)/e.widthMeters,u=(t[3]*s+r)/e.heightMeters;return{x:o,y:u,width:a-o,height:h-u}},bc.prototype.getFieldOfViewLeftEye=function(t){return t?this.getUndistortedFieldOfViewLeftEye():this.getDistortedFieldOfViewLeftEye()},bc.prototype.getFieldOfViewRightEye=function(t){var i=this.getFieldOfViewLeftEye(t);return{leftDegrees:i.rightDegrees,rightDegrees:i.leftDegrees,upDegrees:i.upDegrees,downDegrees:i.downDegrees}},bc.prototype.getUndistortedFieldOfViewLeftEye=function(){var t=this.eui();return{leftDegrees:pn*x.atan(t.outerDist),rightDegrees:pn*x.atan(t.innerDist),downDegrees:pn*x.atan(t.bottomDist),upDegrees:pn*x.atan(t.topDist)}},bc.prototype.getUndistortedViewportLeftEye=function(){var t=this.eui(),i=this.viewer,e=this.device,s=i.screenLensDistance,n=e.widthMeters/s,r=e.heightMeters/s,o=e.width/n,h=e.height/r,a=x.round((t.eyePosX-t.outerDist)*o),u=x.round((t.eyePosY-t.bottomDist)*h);return{x:a,y:u,width:x.round((t.eyePosX+t.innerDist)*o)-a,height:x.round((t.eyePosY+t.topDist)*h)-u}},bc.prototype.eui=function(){var t=this.viewer,i=this.device,e=this.distortion,s=t.screenLensDistance,n=t.interLensDistance/2/s,r=i.widthMeters/s,o=i.heightMeters/s,h=r/2-n,a=(t.baselineLensDistance-i.bevelMeters)/s,u=t.fov,c=e.distortInverse(x.tan(A8*u)),l=x.min(h,c),d=x.min(n,c),f=x.min(a,c);return{outerDist:l,innerDist:d,topDist:x.min(o-a,c),bottomDist:f,eyePosX:h,eyePosY:a}},bc.Viewers=T8;var N8={format:1,last_updated:"2018-02-20T22:55:10Z",devices:[{type:"android",rules:[{mdmh:"asus/*/Nexus 7/*"},{ua:"Nexus 7"}],dpi:[320.8,323],bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_Z00AD/*"},{ua:"ASUS_Z00AD"}],dpi:[403,404.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel XL/*"},{ua:"Pixel XL"}],dpi:[537.9,533],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel/*"},{ua:"Pixel"}],dpi:[432.6,436.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC6435LVW/*"},{ua:"HTC6435LVW"}],dpi:[449.7,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC One XL/*"},{ua:"HTC One XL"}],dpi:[315.3,314.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"htc/*/Nexus 9/*"},{ua:"Nexus 9"}],dpi:289,bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One M9/*"},{ua:"HTC One M9"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One_M8/*"},{ua:"HTC One_M8"}],dpi:[449.7,447.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One/*"},{ua:"HTC One"}],dpi:472.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/Nexus 6P/*"},{ua:"Nexus 6P"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LENOVO/*/Lenovo PB2-690Y/*"},{ua:"Lenovo PB2-690Y"}],dpi:[457.2,454.713],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5X/*"},{ua:"Nexus 5X"}],dpi:[422,419.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS345/*"},{ua:"LGMS345"}],dpi:[221.7,219.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D800/*"},{ua:"LG-D800"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D850/*"},{ua:"LG-D850"}],dpi:[537.9,541.9],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/VS985 4G/*"},{ua:"VS985 4G"}],dpi:[537.9,535.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5/*"},{ua:"Nexus 5 B"}],dpi:[442.4,444.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 4/*"},{ua:"Nexus 4"}],dpi:[319.8,318.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LG-P769/*"},{ua:"LG-P769"}],dpi:[240.6,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS323/*"},{ua:"LGMS323"}],dpi:[206.6,204.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGLS996/*"},{ua:"LGLS996"}],dpi:[403.4,401.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/4560MMX/*"},{ua:"4560MMX"}],dpi:[240,219.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/A250/*"},{ua:"Micromax A250"}],dpi:[480,446.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/Micromax AQ4501/*"},{ua:"Micromax AQ4501"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/G5/*"},{ua:"Moto G (5) Plus"}],dpi:[403.4,403],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/DROID RAZR/*"},{ua:"DROID RAZR"}],dpi:[368.1,256.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT830C/*"},{ua:"XT830C"}],dpi:[254,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1021/*"},{ua:"XT1021"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1023/*"},{ua:"XT1023"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1028/*"},{ua:"XT1028"}],dpi:[326.6,327.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1034/*"},{ua:"XT1034"}],dpi:[326.6,328.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1053/*"},{ua:"XT1053"}],dpi:[315.3,316.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1562/*"},{ua:"XT1562"}],dpi:[403.4,402.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/Nexus 6/*"},{ua:"Nexus 6 B"}],dpi:[494.3,489.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1063/*"},{ua:"XT1063"}],dpi:[295,296.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1064/*"},{ua:"XT1064"}],dpi:[295,295.6],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1092/*"},{ua:"XT1092"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1095/*"},{ua:"XT1095"}],dpi:[422,423.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/G4/*"},{ua:"Moto G (4)"}],dpi:401,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/A0001/*"},{ua:"A0001"}],dpi:[403.4,401],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1005/*"},{ua:"ONE E1005"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2005/*"},{ua:"ONE A2005"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A5000/*"},{ua:"ONEPLUS A5000 "}],dpi:[403.411,399.737],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A5010/*"},{ua:"ONEPLUS A5010"}],dpi:[403,400],bw:2,ac:1e3},{type:"android",rules:[{mdmh:"OPPO/*/X909/*"},{ua:"X909"}],dpi:[442.4,444.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9082/*"},{ua:"GT-I9082"}],dpi:[184.7,185.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G360P/*"},{ua:"SM-G360P"}],dpi:[196.7,205.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Nexus S/*"},{ua:"Nexus S"}],dpi:[234.5,229.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[304.8,303.9],bw:5,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-T230NU/*"},{ua:"SM-T230NU"}],dpi:216,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SGH-T399/*"},{ua:"SGH-T399"}],dpi:[217.7,231.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SGH-M919/*"},{ua:"SGH-M919"}],dpi:[440.8,437.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N9005/*"},{ua:"SM-N9005"}],dpi:[386.4,387],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SM-N900A/*"},{ua:"SAMSUNG-SM-N900A"}],dpi:[386.4,387.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9500/*"},{ua:"GT-I9500"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/GT-I9505/*"},{ua:"GT-I9505"}],dpi:439.4,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900F/*"},{ua:"SM-G900F"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900M/*"},{ua:"SM-G900M"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G800F/*"},{ua:"SM-G800F"}],dpi:326.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G906S/*"},{ua:"SM-G906S"}],dpi:[562.7,572.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[306.7,304.8],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-T535/*"},{ua:"SM-T535"}],dpi:[142.6,136.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-N920C/*"},{ua:"SM-N920C"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920P/*"},{ua:"SM-N920P"}],dpi:[386.3655,390.144],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920W8/*"},{ua:"SM-N920W8"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300I/*"},{ua:"GT-I9300I"}],dpi:[304.8,305.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9195/*"},{ua:"GT-I9195"}],dpi:[249.4,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SPH-L520/*"},{ua:"SPH-L520"}],dpi:[249.4,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SGH-I717/*"},{ua:"SAMSUNG-SGH-I717"}],dpi:285.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SPH-D710/*"},{ua:"SPH-D710"}],dpi:[217.7,204.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-N7100/*"},{ua:"GT-N7100"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SCH-I605/*"},{ua:"SCH-I605"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Galaxy Nexus/*"},{ua:"Galaxy Nexus"}],dpi:[315.3,314.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910H/*"},{ua:"SM-N910H"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910C/*"},{ua:"SM-N910C"}],dpi:[515.2,520.2],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G130M/*"},{ua:"SM-G130M"}],dpi:[165.9,164.8],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G928I/*"},{ua:"SM-G928I"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G920F/*"},{ua:"SM-G920F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G920P/*"},{ua:"SM-G920P"}],dpi:[522.5,577],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G925F/*"},{ua:"SM-G925F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G925V/*"},{ua:"SM-G925V"}],dpi:[522.5,576.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G930F/*"},{ua:"SM-G930F"}],dpi:576.6,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G935F/*"},{ua:"SM-G935F"}],dpi:533,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G950F/*"},{ua:"SM-G950F"}],dpi:[562.707,565.293],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G955U/*"},{ua:"SM-G955U"}],dpi:[522.514,525.762],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/C6903/*"},{ua:"C6903"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/D6653/*"},{ua:"D6653"}],dpi:[428.6,427.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6653/*"},{ua:"E6653"}],dpi:[428.6,425.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6853/*"},{ua:"E6853"}],dpi:[403.4,401.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/SGP321/*"},{ua:"SGP321"}],dpi:[224.7,224.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"TCT/*/ALCATEL ONE TOUCH Fierce/*"},{ua:"ALCATEL ONE TOUCH Fierce"}],dpi:[240,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"THL/*/thl 5000/*"},{ua:"thl 5000"}],dpi:[480,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Fly/*/IQ4412/*"},{ua:"IQ4412"}],dpi:307.9,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"ZTE/*/ZTE Blade L2/*"},{ua:"ZTE Blade L2"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"BENEVE/*/VR518/*"},{ua:"VR518"}],dpi:480,bw:3,ac:500},{type:"ios",rules:[{res:[640,960]}],dpi:[325.1,328.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[640,1136]}],dpi:[317.1,320.2],bw:3,ac:1e3},{type:"ios",rules:[{res:[750,1334]}],dpi:326.4,bw:4,ac:1e3},{type:"ios",rules:[{res:[1242,2208]}],dpi:[453.6,458.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2001]}],dpi:[410.9,415.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2436]}],dpi:458,bw:4,ac:1e3}]};function I8(t,i){if(this.dpdb=N8,this.sui(),t){this.onDeviceParamsUpdated=i;var e=new Ul,s=this;e.open("GET",t,!0),e.addEventListener("load",(function(){s.loading=!1,e.status>=200&&e.status<=299?(s.dpdb=JSON.parse(e.response),s.sui()):console.error("Error loading online DPDB!")})),e.send()}}function D8(t){this.xdpi=t.xdpi,this.ydpi=t.ydpi,this.bevelMm=t.bevelMm}function E8(t,i){this.set(t,i)}function k8(t,i){this.kFilter=t,this.isDebug=i,this.currentAccelMeasurement=new E8,this.currentGyroMeasurement=new E8,this.previousGyroMeasurement=new E8,wt()?this.filterQ=new bi(-1,0,0,1):this.filterQ=new bi(1,0,0,1),this.previousFilterQ=new bi,this.previousFilterQ.copy(this.filterQ),this.accelQ=new bi,this.isOrientationInitialized=!1,this.estimatedGravity=new Ea,this.measuredGravity=new Ea,this.gyroIntegralQ=new bi}function L8(t,i){this.predictionTimeS=t,this.isDebug=i,this.previousQ=new bi,this.previousTimestampS=null,this.deltaQ=new bi,this.outQ=new bi}function x8(t,i,e,n){this.yawOnly=e,this.accelerometer=new Ea,this.gyroscope=new Ea,this.filter=new k8(t,n),this.posePredictor=new L8(i,n),this.isFirefoxAndroid=G9(),this.isIOS=wt();var r=W9();this.isDeviceMotionInRadians=!this.isIOS&&r&&r<66,this.isWithoutDeviceMotion=Z9(),this.filterToWorldQ=new bi,wt()?this.filterToWorldQ.setFromAxisAngle(new Ea(1,0,0),x.PI/2):this.filterToWorldQ.setFromAxisAngle(new Ea(1,0,0),-x.PI/2),this.inverseWorldToScreenQ=new bi,this.worldToScreenQ=new bi,this.originalPoseAdjustQ=new bi,this.originalPoseAdjustQ.setFromAxisAngle(new Ea(0,0,1),-s.orientation*x.PI/180),this.nui(),X9()&&this.filterToWorldQ.multiply(this.inverseWorldToScreenQ),this.resetQ=new bi,this.rui=new Float32Array(4),this.start()}I8.prototype.getDeviceParams=function(){return this.deviceParams},I8.prototype.sui=function(){var t=this.oui();t?(this.deviceParams=t,this.onDeviceParamsUpdated&&this.onDeviceParamsUpdated(this.deviceParams)):console.error("Failed to recalculate device parameters.")},I8.prototype.oui=function(){var t=this.dpdb;if(!t)return console.error("DPDB not available."),null;if(1!=t.format)return console.error("DPDB has unexpected format version."),null;if(!t.devices||!t.devices.length)return console.error("DPDB does not have a devices section."),null;var i=zl.userAgent||zl.vendor||s.opera,e=q9(),n=K9();if(!t.devices)return console.error("DPDB has no devices section."),null;for(var r=null,o=1/0,h=0;h<t.devices.length;h++){var a=t.devices[h];if(a.rules)if("ios"==a.type||"android"==a.type){if(wt()==("ios"==a.type)){for(var u=!1,c=0;c<a.rules.length;c++){var l=a.rules[c],d=this.hui(l,i,e,n);if(!0===d){o=d,r=a,u=!0;break}!1!==d&&d<o&&(o=d,r=a)}if(u)break}}else console.warn("Device["+h+"] has invalid type.");else console.warn("Device["+h+"] has no rules section.")}return r?new D8({xdpi:r.dpi[0]||r.dpi,ydpi:r.dpi[1]||r.dpi,bevelMm:r.bw}):(console.warn("No DPDB device match."),null)},I8.prototype.hui=function(t,i,e,s){if(!t.ua&&!t.res)return!1;if(t.ua&&i.indexOf(t.ua)<0)return!1;if(t.res){if(!t.res[0]||!t.res[1])return!1;var n=t.res[0],r=t.res[1],o=x.min(e,s)-x.min(n,r),h=x.max(e,s)-x.max(n,r),a=x.abs(o)+x.abs(h);if(a>0)return a}return!0},E8.prototype.set=function(t,i){this.sample=t,this.timestampS=i},E8.prototype.copy=function(t){this.set(t.sample,t.timestampS)},k8.prototype.addAccelMeasurement=function(t,i){this.currentAccelMeasurement.set(t,i)},k8.prototype.addGyroMeasurement=function(t,i){this.currentGyroMeasurement.set(t,i),function(t){return!(j(t)||t<=.001||t>1)}(i-this.previousGyroMeasurement.timestampS)&&this.aui(),this.previousGyroMeasurement.copy(this.currentGyroMeasurement)},k8.prototype.aui=function(){if(!this.isOrientationInitialized)return this.accelQ=this.uui(this.currentAccelMeasurement.sample),this.previousFilterQ.copy(this.accelQ),void(this.isOrientationInitialized=!0);var t=this.currentGyroMeasurement.timestampS-this.previousGyroMeasurement.timestampS,i=this.cui(this.currentGyroMeasurement.sample,t);this.gyroIntegralQ.multiply(i),this.filterQ.copy(this.previousFilterQ),this.filterQ.multiply(i);var e=new bi;e.copy(this.filterQ),e.inverse(),this.estimatedGravity.set(0,0,-1),this.estimatedGravity.applyQuaternion(e),this.estimatedGravity.normalize(),this.measuredGravity.copy(this.currentAccelMeasurement.sample),this.measuredGravity.normalize();var s=new bi;s.setFromUnitVectors(this.estimatedGravity,this.measuredGravity),s.inverse(),this.isDebug&&console.log("Delta: %d deg, G_est: (%s, %s, %s), G_meas: (%s, %s, %s)",pn*function(t){return t.w>1?(console.warn("getQuaternionAngle: w > 1"),0):2*x.acos(t.w)}(s),this.estimatedGravity.x.toFixed(1),this.estimatedGravity.y.toFixed(1),this.estimatedGravity.z.toFixed(1),this.measuredGravity.x.toFixed(1),this.measuredGravity.y.toFixed(1),this.measuredGravity.z.toFixed(1));var n=new bi;n.copy(this.filterQ),n.multiply(s),this.filterQ.slerp(n,1-this.kFilter),this.previousFilterQ.copy(this.filterQ)},k8.prototype.getOrientation=function(){return this.filterQ},k8.prototype.uui=function(t){var i=new Ea;i.copy(t),i.normalize();var e=new bi;return e.setFromUnitVectors(new Ea(0,0,-1),i),e.inverse(),e},k8.prototype.cui=function(t,i){var e=new bi,s=new Ea;return s.copy(t),s.normalize(),e.setFromAxisAngle(s,t.length()*i),e},L8.prototype.getPrediction=function(t,i,e){if(!this.previousTimestampS)return this.previousQ.copy(t),this.previousTimestampS=e,t;var s=new Ea;s.copy(i),s.normalize();var n=i.length();if(n<20*A8)return this.isDebug&&console.log("Moving slowly, at %s deg/s: no prediction",(pn*n).toFixed(1)),this.outQ.copy(t),this.previousQ.copy(t),this.outQ;var r=n*this.predictionTimeS;return this.deltaQ.setFromAxisAngle(s,r),this.outQ.copy(this.previousQ),this.outQ.multiply(this.deltaQ),this.previousQ.copy(t),this.previousTimestampS=e,this.outQ},x8.prototype.getPosition=function(){return null},x8.prototype.getOrientation=function(){var t=void 0;if(this.isWithoutDeviceMotion&&this.lui)return this.deviceOrientationFixQ=this.deviceOrientationFixQ||(i=(new bi).setFromAxisAngle(new Ea(0,0,-1),0),e=new bi,-90===s.orientation?e.setFromAxisAngle(new Ea(0,1,0),x.PI/-2):e.setFromAxisAngle(new Ea(0,1,0),x.PI/2),i.multiply(e)),this.deviceOrientationFilterToWorldQ=this.deviceOrientationFilterToWorldQ||function(){var t=new bi;return t.setFromAxisAngle(new Ea(1,0,0),-x.PI/2),t}(),t=this.lui,(n=new bi).copy(t),n.multiply(this.deviceOrientationFilterToWorldQ),n.multiply(this.resetQ),n.multiply(this.worldToScreenQ),n.multiplyQuaternions(this.deviceOrientationFixQ,n),this.yawOnly&&(n.x=0,n.z=0,n.normalize()),this.rui[0]=n.x,this.rui[1]=n.y,this.rui[2]=n.z,this.rui[3]=n.w,this.rui;var i,e,n,r=this.filter.getOrientation();return t=this.posePredictor.getPrediction(r,this.gyroscope,this.previousTimestampS),(n=new bi).copy(this.filterToWorldQ),n.multiply(this.resetQ),n.multiply(t),n.multiply(this.worldToScreenQ),this.yawOnly&&(n.x=0,n.z=0,n.normalize()),this.rui[0]=n.x,this.rui[1]=n.y,this.rui[2]=n.z,this.rui[3]=n.w,this.rui},x8.prototype.resetPose=function(){this.resetQ.copy(this.filter.getOrientation()),this.resetQ.x=0,this.resetQ.y=0,this.resetQ.z*=-1,this.resetQ.normalize(),X9()&&this.resetQ.multiply(this.inverseWorldToScreenQ),this.resetQ.multiply(this.originalPoseAdjustQ)},x8.prototype.dui=function(t){this.lui=this.lui||new bi;var i=t.alpha,e=t.beta,s=t.gamma;i=(i||0)*x.PI/180,e=(e||0)*x.PI/180,s=(s||0)*x.PI/180,this.lui.setFromEulerYXZ(e,i,-s)},x8.prototype.fui=function(t){this.gui(t)},x8.prototype.gui=function(t){var i=t.accelerationIncludingGravity,e=t.rotationRate,s=t.timeStamp/1e3,n=s-this.previousTimestampS;return n<0?(a8("fusion-pose-sensor:invalid:non-monotonic","Invalid timestamps detected: non-monotonic timestamp from devicemotion"),void(this.previousTimestampS=s)):n<=.001||n>1?(a8("fusion-pose-sensor:invalid:outside-threshold","Invalid timestamps detected: Timestamp from devicemotion outside expected range."),void(this.previousTimestampS=s)):(this.accelerometer.set(-i.x,-i.y,-i.z),H9()?this.gyroscope.set(-e.beta,e.alpha,e.gamma):this.gyroscope.set(e.alpha,e.beta,e.gamma),this.isDeviceMotionInRadians||this.gyroscope.multiplyScalar(x.PI/180),this.filter.addAccelMeasurement(this.accelerometer,s),this.filter.addGyroMeasurement(this.gyroscope,s),void(this.previousTimestampS=s))},x8.prototype._ui=function(t){this.nui()},x8.prototype.Qb=function(t){var i=t.data;i&&i.type&&("devicemotion"===i.type.toLowerCase()&&this.gui(i.deviceMotionEvent))},x8.prototype.nui=function(){switch(this.worldToScreenQ.set(0,0,0,1),s.orientation){case 0:break;case 90:this.worldToScreenQ.setFromAxisAngle(new Ea(0,0,1),-x.PI/2);break;case-90:this.worldToScreenQ.setFromAxisAngle(new Ea(0,0,1),x.PI/2)}this.inverseWorldToScreenQ.copy(this.worldToScreenQ),this.inverseWorldToScreenQ.inverse()},x8.prototype.start=function(){this.vui=this.fui.bind(this),this.wui=this._ui.bind(this),this.mui=this.Qb.bind(this),this.pui=this.dui.bind(this),wt()&&function(){var t=s.self!==s.top,i=h8(h.referrer),e=h8(s.location.href);return t&&i!==e}()&&s.addEventListener("message",this.mui),s.addEventListener("orientationchange",this.wui),this.isWithoutDeviceMotion?s.addEventListener("deviceorientation",this.pui):s.addEventListener("devicemotion",this.vui)},x8.prototype.stop=function(){s.removeEventListener("devicemotion",this.vui),s.removeEventListener("deviceorientation",this.pui),s.removeEventListener("orientationchange",this.wui),s.removeEventListener("message",this.mui)};var C8=new Ea(1,0,0),j8=new Ea(0,0,1),O8={};screen.orientation?O8=screen.orientation:screen.msOrientation?O8=screen.msOrientation:_.defineProperty(O8,"angle",{get:function(){return s.orientation||0}});var R8=new bi;R8.setFromAxisAngle(C8,-x.PI/2),R8.multiply((new bi).setFromAxisAngle(j8,x.PI/2));var P8=function(){function t(i){!function(t,i){if(!(t instanceof i))throw new w("Cannot call a class as a function")}(this,t),this.config=i,this.sensor=null,this.fusionSensor=null,this.Aui=new Float32Array(4),this.api=null,this.errors=[],this.yui=new bi,this.bui=new bi,this.Mui=new bi,this.Tui=this.Tui.bind(this),this.Sui=this.Sui.bind(this),this.Nui=this.Nui.bind(this),this.Nui(),this.init()}return Q9(t,[{key:"init",value:function(){var t=null;try{(t=new RelativeOrientationSensor({frequency:60})).addEventListener("error",this.Sui)}catch(t){this.errors.push(t),"SecurityError"===t.name?(console.error("Cannot construct sensors due to the Feature Policy"),console.warn('Attempting to fall back using "devicemotion"; however this will fail in the future without correct permissions.'),this.useDeviceMotion()):"ReferenceError"===t.name?this.useDeviceMotion():console.error(t)}t&&(this.api="sensor",this.sensor=t,this.sensor.addEventListener("reading",this.Tui),this.sensor.start()),s.addEventListener("orientationchange",this.Nui)}},{key:"useDeviceMotion",value:function(){this.api="devicemotion",this.fusionSensor=new x8(this.config.K_FILTER,this.config.PREDICTION_TIME_S,this.config.YAW_ONLY,this.config.DEBUG)}},{key:"getOrientation",value:function(){if(this.fusionSensor)return this.fusionSensor.getOrientation();if(!this.sensor||!this.sensor.quaternion)return this.Aui[0]=this.Aui[1]=this.Aui[2]=0,this.Aui[3]=1,this.Aui;var t=this.sensor.quaternion;this.yui.set(t[0],t[1],t[2],t[3]);var i=this.Mui;return i.copy(R8),i.multiply(this.yui),i.multiply(this.bui),this.config.YAW_ONLY&&(i.x=i.z=0,i.normalize()),this.Aui[0]=i.x,this.Aui[1]=i.y,this.Aui[2]=i.z,this.Aui[3]=i.w,this.Aui}},{key:"Sui",value:function(t){this.errors.push(t.error),"NotAllowedError"===t.error.name?console.error("Permission to access sensor was denied"):"NotReadableError"===t.error.name?console.error("Sensor could not be read"):console.error(t.error)}},{key:"Tui",value:function(){}},{key:"Nui",value:function(){var t=-O8.angle*x.PI/180;this.bui.setFromAxisAngle(j8,t)}}]),t}();function z8(){this.Iui();var t=h.createElement("div");(r=t.style).position="fixed",r.top=0,r.right=0,r.bottom=0,r.left=0,r.backgroundColor="gray",r.fontFamily="sans-serif",r.zIndex=1e6;var i=h.createElement("img");i.src=this.icon,(r=i.style).marginLeft="25%",r.marginTop="25%",r.width="50%",t.appendChild(i);var e=h.createElement("div");(r=e.style).textAlign="center",r.fontSize="16px",r.lineHeight="24px",r.margin="24px 25%",r.width="50%",e.innerHTML="Place your phone into your Cardboard viewer.",t.appendChild(e);var s=h.createElement("div");(r=s.style).backgroundColor="#CFD8DC",r.position="fixed",r.bottom=0,r.width="100%",r.height="48px",r.padding="14px 24px",r.boxSizing="border-box",r.color="#656A6B",t.appendChild(s);var n=h.createElement("div");n.style.float="left",n.innerHTML="No Cardboard viewer?";var r,o=h.createElement("a");o.href="https://www.google.com/get/cardboard/get-cardboard/",o.innerHTML="get one",o.target="Uu",(r=o.style).float="right",r.fontWeight=600,r.textTransform="uppercase",r.borderLeft="1px solid gray",r.paddingLeft="24px",r.textDecoration="none",r.color="#656A6B",s.appendChild(n),s.appendChild(o),this.overlay=t,this.text=e,this.hide()}z8.prototype.show=function(t){t||this.overlay.parentElement?t&&(this.overlay.parentElement&&this.overlay.parentElement!=t&&this.overlay.parentElement.removeChild(this.overlay),t.appendChild(this.overlay)):h.body.appendChild(this.overlay),this.overlay.style.display="block";var i=this.overlay.querySelector("img").style;X9()?(i.width="20%",i.marginLeft="40%",i.marginTop="3%"):(i.width="50%",i.marginLeft="25%",i.marginTop="25%")},z8.prototype.hide=function(){this.overlay.style.display="none"},z8.prototype.showTemporarily=function(t,i){this.show(i),this.timer=u(this.hide.bind(this),t)},z8.prototype.disableShowTemporarily=function(){c(this.timer)},z8.prototype.update=function(){this.disableShowTemporarily(),!X9()&&i8()?this.show():this.hide()},z8.prototype.Iui=function(){this.icon=function(t,i){return"data:"+t+";base64,"+i}("image/svg+xml","PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjE5OHB4IiBoZWlnaHQ9IjI0MHB4IiB2aWV3Qm94PSIwIDAgMTk4IDI0MCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4bWxuczpza2V0Y2g9Imh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaC9ucyI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDMuMy4zICgxMjA4MSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+dHJhbnNpdGlvbjwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHNrZXRjaDp0eXBlPSJNU1BhZ2UiPgogICAgICAgIDxnIGlkPSJ0cmFuc2l0aW9uIiBza2V0Y2g6dHlwZT0iTVNBcnRib2FyZEdyb3VwIj4KICAgICAgICAgICAgPGcgaWQ9IkltcG9ydGVkLUxheWVycy1Db3B5LTQtKy1JbXBvcnRlZC1MYXllcnMtQ29weS0rLUltcG9ydGVkLUxheWVycy1Db3B5LTItQ29weSIgc2tldGNoOnR5cGU9Ik1TTGF5ZXJHcm91cCI+CiAgICAgICAgICAgICAgICA8ZyBpZD0iSW1wb3J0ZWQtTGF5ZXJzLUNvcHktNCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIDEwNy4wMDAwMDApIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ5LjYyNSwyLjUyNyBDMTQ5LjYyNSwyLjUyNyAxNTUuODA1LDYuMDk2IDE1Ni4zNjIsNi40MTggTDE1Ni4zNjIsNy4zMDQgQzE1Ni4zNjIsNy40ODEgMTU2LjM3NSw3LjY2NCAxNTYuNCw3Ljg1MyBDMTU2LjQxLDcuOTM0IDE1Ni40Miw4LjAxNSAxNTYuNDI3LDguMDk1IEMxNTYuNTY3LDkuNTEgMTU3LjQwMSwxMS4wOTMgMTU4LjUzMiwxMi4wOTQgTDE2NC4yNTIsMTcuMTU2IEwxNjQuMzMzLDE3LjA2NiBDMTY0LjMzMywxNy4wNjYgMTY4LjcxNSwxNC41MzYgMTY5LjU2OCwxNC4wNDIgQzE3MS4wMjUsMTQuODgzIDE5NS41MzgsMjkuMDM1IDE5NS41MzgsMjkuMDM1IEwxOTUuNTM4LDgzLjAzNiBDMTk1LjUzOCw4My44MDcgMTk1LjE1Miw4NC4yNTMgMTk0LjU5LDg0LjI1MyBDMTk0LjM1Nyw4NC4yNTMgMTk0LjA5NSw4NC4xNzcgMTkzLjgxOCw4NC4wMTcgTDE2OS44NTEsNzAuMTc5IEwxNjkuODM3LDcwLjIwMyBMMTQyLjUxNSw4NS45NzggTDE0MS42NjUsODQuNjU1IEMxMzYuOTM0LDgzLjEyNiAxMzEuOTE3LDgxLjkxNSAxMjYuNzE0LDgxLjA0NSBDMTI2LjcwOSw4MS4wNiAxMjYuNzA3LDgxLjA2OSAxMjYuNzA3LDgxLjA2OSBMMTIxLjY0LDk4LjAzIEwxMTMuNzQ5LDEwMi41ODYgTDExMy43MTIsMTAyLjUyMyBMMTEzLjcxMiwxMzAuMTEzIEMxMTMuNzEyLDEzMC44ODUgMTEzLjMyNiwxMzEuMzMgMTEyLjc2NCwxMzEuMzMgQzExMi41MzIsMTMxLjMzIDExMi4yNjksMTMxLjI1NCAxMTEuOTkyLDEzMS4wOTQgTDY5LjUxOSwxMDYuNTcyIEM2OC41NjksMTA2LjAyMyA2Ny43OTksMTA0LjY5NSA2Ny43OTksMTAzLjYwNSBMNjcuNzk5LDEwMi41NyBMNjcuNzc4LDEwMi42MTcgQzY3LjI3LDEwMi4zOTMgNjYuNjQ4LDEwMi4yNDkgNjUuOTYyLDEwMi4yMTggQzY1Ljg3NSwxMDIuMjE0IDY1Ljc4OCwxMDIuMjEyIDY1LjcwMSwxMDIuMjEyIEM2NS42MDYsMTAyLjIxMiA2NS41MTEsMTAyLjIxNSA2NS40MTYsMTAyLjIxOSBDNjUuMTk1LDEwMi4yMjkgNjQuOTc0LDEwMi4yMzUgNjQuNzU0LDEwMi4yMzUgQzY0LjMzMSwxMDIuMjM1IDYzLjkxMSwxMDIuMjE2IDYzLjQ5OCwxMDIuMTc4IEM2MS44NDMsMTAyLjAyNSA2MC4yOTgsMTAxLjU3OCA1OS4wOTQsMTAwLjg4MiBMMTIuNTE4LDczLjk5MiBMMTIuNTIzLDc0LjAwNCBMMi4yNDUsNTUuMjU0IEMxLjI0NCw1My40MjcgMi4wMDQsNTEuMDM4IDMuOTQzLDQ5LjkxOCBMNTkuOTU0LDE3LjU3MyBDNjAuNjI2LDE3LjE4NSA2MS4zNSwxNy4wMDEgNjIuMDUzLDE3LjAwMSBDNjMuMzc5LDE3LjAwMSA2NC42MjUsMTcuNjYgNjUuMjgsMTguODU0IEw2NS4yODUsMTguODUxIEw2NS41MTIsMTkuMjY0IEw2NS41MDYsMTkuMjY4IEM2NS45MDksMjAuMDAzIDY2LjQwNSwyMC42OCA2Ni45ODMsMjEuMjg2IEw2Ny4yNiwyMS41NTYgQzY5LjE3NCwyMy40MDYgNzEuNzI4LDI0LjM1NyA3NC4zNzMsMjQuMzU3IEM3Ni4zMjIsMjQuMzU3IDc4LjMyMSwyMy44NCA4MC4xNDgsMjIuNzg1IEM4MC4xNjEsMjIuNzg1IDg3LjQ2NywxOC41NjYgODcuNDY3LDE4LjU2NiBDODguMTM5LDE4LjE3OCA4OC44NjMsMTcuOTk0IDg5LjU2NiwxNy45OTQgQzkwLjg5MiwxNy45OTQgOTIuMTM4LDE4LjY1MiA5Mi43OTIsMTkuODQ3IEw5Ni4wNDIsMjUuNzc1IEw5Ni4wNjQsMjUuNzU3IEwxMDIuODQ5LDI5LjY3NCBMMTAyLjc0NCwyOS40OTIgTDE0OS42MjUsMi41MjcgTTE0OS42MjUsMC44OTIgQzE0OS4zNDMsMC44OTIgMTQ5LjA2MiwwLjk2NSAxNDguODEsMS4xMSBMMTAyLjY0MSwyNy42NjYgTDk3LjIzMSwyNC41NDIgTDk0LjIyNiwxOS4wNjEgQzkzLjMxMywxNy4zOTQgOTEuNTI3LDE2LjM1OSA4OS41NjYsMTYuMzU4IEM4OC41NTUsMTYuMzU4IDg3LjU0NiwxNi42MzIgODYuNjQ5LDE3LjE1IEM4My44NzgsMTguNzUgNzkuNjg3LDIxLjE2OSA3OS4zNzQsMjEuMzQ1IEM3OS4zNTksMjEuMzUzIDc5LjM0NSwyMS4zNjEgNzkuMzMsMjEuMzY5IEM3Ny43OTgsMjIuMjU0IDc2LjA4NCwyMi43MjIgNzQuMzczLDIyLjcyMiBDNzIuMDgxLDIyLjcyMiA2OS45NTksMjEuODkgNjguMzk3LDIwLjM4IEw2OC4xNDUsMjAuMTM1IEM2Ny43MDYsMTkuNjcyIDY3LjMyMywxOS4xNTYgNjcuMDA2LDE4LjYwMSBDNjYuOTg4LDE4LjU1OSA2Ni45NjgsMTguNTE5IDY2Ljk0NiwxOC40NzkgTDY2LjcxOSwxOC4wNjUgQzY2LjY5LDE4LjAxMiA2Ni42NTgsMTcuOTYgNjYuNjI0LDE3LjkxMSBDNjUuNjg2LDE2LjMzNyA2My45NTEsMTUuMzY2IDYyLjA1MywxNS4zNjYgQzYxLjA0MiwxNS4zNjYgNjAuMDMzLDE1LjY0IDU5LjEzNiwxNi4xNTggTDMuMTI1LDQ4LjUwMiBDMC40MjYsNTAuMDYxIC0wLjYxMyw1My40NDIgMC44MTEsNTYuMDQgTDExLjA4OSw3NC43OSBDMTEuMjY2LDc1LjExMyAxMS41MzcsNzUuMzUzIDExLjg1LDc1LjQ5NCBMNTguMjc2LDEwMi4yOTggQzU5LjY3OSwxMDMuMTA4IDYxLjQzMywxMDMuNjMgNjMuMzQ4LDEwMy44MDYgQzYzLjgxMiwxMDMuODQ4IDY0LjI4NSwxMDMuODcgNjQuNzU0LDEwMy44NyBDNjUsMTAzLjg3IDY1LjI0OSwxMDMuODY0IDY1LjQ5NCwxMDMuODUyIEM2NS41NjMsMTAzLjg0OSA2NS42MzIsMTAzLjg0NyA2NS43MDEsMTAzLjg0NyBDNjUuNzY0LDEwMy44NDcgNjUuODI4LDEwMy44NDkgNjUuODksMTAzLjg1MiBDNjUuOTg2LDEwMy44NTYgNjYuMDgsMTAzLjg2MyA2Ni4xNzMsMTAzLjg3NCBDNjYuMjgyLDEwNS40NjcgNjcuMzMyLDEwNy4xOTcgNjguNzAyLDEwNy45ODggTDExMS4xNzQsMTMyLjUxIEMxMTEuNjk4LDEzMi44MTIgMTEyLjIzMiwxMzIuOTY1IDExMi43NjQsMTMyLjk2NSBDMTE0LjI2MSwxMzIuOTY1IDExNS4zNDcsMTMxLjc2NSAxMTUuMzQ3LDEzMC4xMTMgTDExNS4zNDcsMTAzLjU1MSBMMTIyLjQ1OCw5OS40NDYgQzEyMi44MTksOTkuMjM3IDEyMy4wODcsOTguODk4IDEyMy4yMDcsOTguNDk4IEwxMjcuODY1LDgyLjkwNSBDMTMyLjI3OSw4My43MDIgMTM2LjU1Nyw4NC43NTMgMTQwLjYwNyw4Ni4wMzMgTDE0MS4xNCw4Ni44NjIgQzE0MS40NTEsODcuMzQ2IDE0MS45NzcsODcuNjEzIDE0Mi41MTYsODcuNjEzIEMxNDIuNzk0LDg3LjYxMyAxNDMuMDc2LDg3LjU0MiAxNDMuMzMzLDg3LjM5MyBMMTY5Ljg2NSw3Mi4wNzYgTDE5Myw4NS40MzMgQzE5My41MjMsODUuNzM1IDE5NC4wNTgsODUuODg4IDE5NC41OSw4NS44ODggQzE5Ni4wODcsODUuODg4IDE5Ny4xNzMsODQuNjg5IDE5Ny4xNzMsODMuMDM2IEwxOTcuMTczLDI5LjAzNSBDMTk3LjE3MywyOC40NTEgMTk2Ljg2MSwyNy45MTEgMTk2LjM1NSwyNy42MTkgQzE5Ni4zNTUsMjcuNjE5IDE3MS44NDMsMTMuNDY3IDE3MC4zODUsMTIuNjI2IEMxNzAuMTMyLDEyLjQ4IDE2OS44NSwxMi40MDcgMTY5LjU2OCwxMi40MDcgQzE2OS4yODUsMTIuNDA3IDE2OS4wMDIsMTIuNDgxIDE2OC43NDksMTIuNjI3IEMxNjguMTQzLDEyLjk3OCAxNjUuNzU2LDE0LjM1NyAxNjQuNDI0LDE1LjEyNSBMMTU5LjYxNSwxMC44NyBDMTU4Ljc5NiwxMC4xNDUgMTU4LjE1NCw4LjkzNyAxNTguMDU0LDcuOTM0IEMxNTguMDQ1LDcuODM3IDE1OC4wMzQsNy43MzkgMTU4LjAyMSw3LjY0IEMxNTguMDA1LDcuNTIzIDE1Ny45OTgsNy40MSAxNTcuOTk4LDcuMzA0IEwxNTcuOTk4LDYuNDE4IEMxNTcuOTk4LDUuODM0IDE1Ny42ODYsNS4yOTUgMTU3LjE4MSw1LjAwMiBDMTU2LjYyNCw0LjY4IDE1MC40NDIsMS4xMTEgMTUwLjQ0MiwxLjExMSBDMTUwLjE4OSwwLjk2NSAxNDkuOTA3LDAuODkyIDE0OS42MjUsMC44OTIiIGlkPSJGaWxsLTEiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTYuMDI3LDI1LjYzNiBMMTQyLjYwMyw1Mi41MjcgQzE0My44MDcsNTMuMjIyIDE0NC41ODIsNTQuMTE0IDE0NC44NDUsNTUuMDY4IEwxNDQuODM1LDU1LjA3NSBMNjMuNDYxLDEwMi4wNTcgTDYzLjQ2LDEwMi4wNTcgQzYxLjgwNiwxMDEuOTA1IDYwLjI2MSwxMDEuNDU3IDU5LjA1NywxMDAuNzYyIEwxMi40ODEsNzMuODcxIEw5Ni4wMjcsMjUuNjM2IiBpZD0iRmlsbC0yIiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTYzLjQ2MSwxMDIuMTc0IEM2My40NTMsMTAyLjE3NCA2My40NDYsMTAyLjE3NCA2My40MzksMTAyLjE3MiBDNjEuNzQ2LDEwMi4wMTYgNjAuMjExLDEwMS41NjMgNTguOTk4LDEwMC44NjMgTDEyLjQyMiw3My45NzMgQzEyLjM4Niw3My45NTIgMTIuMzY0LDczLjkxNCAxMi4zNjQsNzMuODcxIEMxMi4zNjQsNzMuODMgMTIuMzg2LDczLjc5MSAxMi40MjIsNzMuNzcgTDk1Ljk2OCwyNS41MzUgQzk2LjAwNCwyNS41MTQgOTYuMDQ5LDI1LjUxNCA5Ni4wODUsMjUuNTM1IEwxNDIuNjYxLDUyLjQyNiBDMTQzLjg4OCw1My4xMzQgMTQ0LjY4Miw1NC4wMzggMTQ0Ljk1Nyw1NS4wMzcgQzE0NC45Nyw1NS4wODMgMTQ0Ljk1Myw1NS4xMzMgMTQ0LjkxNSw1NS4xNjEgQzE0NC45MTEsNTUuMTY1IDE0NC44OTgsNTUuMTc0IDE0NC44OTQsNTUuMTc3IEw2My41MTksMTAyLjE1OCBDNjMuNTAxLDEwMi4xNjkgNjMuNDgxLDEwMi4xNzQgNjMuNDYxLDEwMi4xNzQgTDYzLjQ2MSwxMDIuMTc0IFogTTEyLjcxNCw3My44NzEgTDU5LjExNSwxMDAuNjYxIEM2MC4yOTMsMTAxLjM0MSA2MS43ODYsMTAxLjc4MiA2My40MzUsMTAxLjkzNyBMMTQ0LjcwNyw1NS4wMTUgQzE0NC40MjgsNTQuMTA4IDE0My42ODIsNTMuMjg1IDE0Mi41NDQsNTIuNjI4IEw5Ni4wMjcsMjUuNzcxIEwxMi43MTQsNzMuODcxIEwxMi43MTQsNzMuODcxIFoiIGlkPSJGaWxsLTMiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ4LjMyNyw1OC40NzEgQzE0OC4xNDUsNTguNDggMTQ3Ljk2Miw1OC40OCAxNDcuNzgxLDU4LjQ3MiBDMTQ1Ljg4Nyw1OC4zODkgMTQ0LjQ3OSw1Ny40MzQgMTQ0LjYzNiw1Ni4zNCBDMTQ0LjY4OSw1NS45NjcgMTQ0LjY2NCw1NS41OTcgMTQ0LjU2NCw1NS4yMzUgTDYzLjQ2MSwxMDIuMDU3IEM2NC4wODksMTAyLjExNSA2NC43MzMsMTAyLjEzIDY1LjM3OSwxMDIuMDk5IEM2NS41NjEsMTAyLjA5IDY1Ljc0MywxMDIuMDkgNjUuOTI1LDEwMi4wOTggQzY3LjgxOSwxMDIuMTgxIDY5LjIyNywxMDMuMTM2IDY5LjA3LDEwNC4yMyBMMTQ4LjMyNyw1OC40NzEiIGlkPSJGaWxsLTQiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNjkuMDcsMTA0LjM0NyBDNjkuMDQ4LDEwNC4zNDcgNjkuMDI1LDEwNC4zNCA2OS4wMDUsMTA0LjMyNyBDNjguOTY4LDEwNC4zMDEgNjguOTQ4LDEwNC4yNTcgNjguOTU1LDEwNC4yMTMgQzY5LDEwMy44OTYgNjguODk4LDEwMy41NzYgNjguNjU4LDEwMy4yODggQzY4LjE1MywxMDIuNjc4IDY3LjEwMywxMDIuMjY2IDY1LjkyLDEwMi4yMTQgQzY1Ljc0MiwxMDIuMjA2IDY1LjU2MywxMDIuMjA3IDY1LjM4NSwxMDIuMjE1IEM2NC43NDIsMTAyLjI0NiA2NC4wODcsMTAyLjIzMiA2My40NSwxMDIuMTc0IEM2My4zOTksMTAyLjE2OSA2My4zNTgsMTAyLjEzMiA2My4zNDcsMTAyLjA4MiBDNjMuMzM2LDEwMi4wMzMgNjMuMzU4LDEwMS45ODEgNjMuNDAyLDEwMS45NTYgTDE0NC41MDYsNTUuMTM0IEMxNDQuNTM3LDU1LjExNiAxNDQuNTc1LDU1LjExMyAxNDQuNjA5LDU1LjEyNyBDMTQ0LjY0Miw1NS4xNDEgMTQ0LjY2OCw1NS4xNyAxNDQuNjc3LDU1LjIwNCBDMTQ0Ljc4MSw1NS41ODUgMTQ0LjgwNiw1NS45NzIgMTQ0Ljc1MSw1Ni4zNTcgQzE0NC43MDYsNTYuNjczIDE0NC44MDgsNTYuOTk0IDE0NS4wNDcsNTcuMjgyIEMxNDUuNTUzLDU3Ljg5MiAxNDYuNjAyLDU4LjMwMyAxNDcuNzg2LDU4LjM1NSBDMTQ3Ljk2NCw1OC4zNjMgMTQ4LjE0Myw1OC4zNjMgMTQ4LjMyMSw1OC4zNTQgQzE0OC4zNzcsNTguMzUyIDE0OC40MjQsNTguMzg3IDE0OC40MzksNTguNDM4IEMxNDguNDU0LDU4LjQ5IDE0OC40MzIsNTguNTQ1IDE0OC4zODUsNTguNTcyIEw2OS4xMjksMTA0LjMzMSBDNjkuMTExLDEwNC4zNDIgNjkuMDksMTA0LjM0NyA2OS4wNywxMDQuMzQ3IEw2OS4wNywxMDQuMzQ3IFogTTY1LjY2NSwxMDEuOTc1IEM2NS43NTQsMTAxLjk3NSA2NS44NDIsMTAxLjk3NyA2NS45MywxMDEuOTgxIEM2Ny4xOTYsMTAyLjAzNyA2OC4yODMsMTAyLjQ2OSA2OC44MzgsMTAzLjEzOSBDNjkuMDY1LDEwMy40MTMgNjkuMTg4LDEwMy43MTQgNjkuMTk4LDEwNC4wMjEgTDE0Ny44ODMsNTguNTkyIEMxNDcuODQ3LDU4LjU5MiAxNDcuODExLDU4LjU5MSAxNDcuNzc2LDU4LjU4OSBDMTQ2LjUwOSw1OC41MzMgMTQ1LjQyMiw1OC4xIDE0NC44NjcsNTcuNDMxIEMxNDQuNTg1LDU3LjA5MSAxNDQuNDY1LDU2LjcwNyAxNDQuNTIsNTYuMzI0IEMxNDQuNTYzLDU2LjAyMSAxNDQuNTUyLDU1LjcxNiAxNDQuNDg4LDU1LjQxNCBMNjMuODQ2LDEwMS45NyBDNjQuMzUzLDEwMi4wMDIgNjQuODY3LDEwMi4wMDYgNjUuMzc0LDEwMS45ODIgQzY1LjQ3MSwxMDEuOTc3IDY1LjU2OCwxMDEuOTc1IDY1LjY2NSwxMDEuOTc1IEw2NS42NjUsMTAxLjk3NSBaIiBpZD0iRmlsbC01IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTIuMjA4LDU1LjEzNCBDMS4yMDcsNTMuMzA3IDEuOTY3LDUwLjkxNyAzLjkwNiw0OS43OTcgTDU5LjkxNywxNy40NTMgQzYxLjg1NiwxNi4zMzMgNjQuMjQxLDE2LjkwNyA2NS4yNDMsMTguNzM0IEw2NS40NzUsMTkuMTQ0IEM2NS44NzIsMTkuODgyIDY2LjM2OCwyMC41NiA2Ni45NDUsMjEuMTY1IEw2Ny4yMjMsMjEuNDM1IEM3MC41NDgsMjQuNjQ5IDc1LjgwNiwyNS4xNTEgODAuMTExLDIyLjY2NSBMODcuNDMsMTguNDQ1IEM4OS4zNywxNy4zMjYgOTEuNzU0LDE3Ljg5OSA5Mi43NTUsMTkuNzI3IEw5Ni4wMDUsMjUuNjU1IEwxMi40ODYsNzMuODg0IEwyLjIwOCw1NS4xMzQgWiIgaWQ9IkZpbGwtNiIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMi40ODYsNzQuMDAxIEMxMi40NzYsNzQuMDAxIDEyLjQ2NSw3My45OTkgMTIuNDU1LDczLjk5NiBDMTIuNDI0LDczLjk4OCAxMi4zOTksNzMuOTY3IDEyLjM4NCw3My45NCBMMi4xMDYsNTUuMTkgQzEuMDc1LDUzLjMxIDEuODU3LDUwLjg0NSAzLjg0OCw0OS42OTYgTDU5Ljg1OCwxNy4zNTIgQzYwLjUyNSwxNi45NjcgNjEuMjcxLDE2Ljc2NCA2Mi4wMTYsMTYuNzY0IEM2My40MzEsMTYuNzY0IDY0LjY2NiwxNy40NjYgNjUuMzI3LDE4LjY0NiBDNjUuMzM3LDE4LjY1NCA2NS4zNDUsMTguNjYzIDY1LjM1MSwxOC42NzQgTDY1LjU3OCwxOS4wODggQzY1LjU4NCwxOS4xIDY1LjU4OSwxOS4xMTIgNjUuNTkxLDE5LjEyNiBDNjUuOTg1LDE5LjgzOCA2Ni40NjksMjAuNDk3IDY3LjAzLDIxLjA4NSBMNjcuMzA1LDIxLjM1MSBDNjkuMTUxLDIzLjEzNyA3MS42NDksMjQuMTIgNzQuMzM2LDI0LjEyIEM3Ni4zMTMsMjQuMTIgNzguMjksMjMuNTgyIDgwLjA1MywyMi41NjMgQzgwLjA2NCwyMi41NTcgODAuMDc2LDIyLjU1MyA4MC4wODgsMjIuNTUgTDg3LjM3MiwxOC4zNDQgQzg4LjAzOCwxNy45NTkgODguNzg0LDE3Ljc1NiA4OS41MjksMTcuNzU2IEM5MC45NTYsMTcuNzU2IDkyLjIwMSwxOC40NzIgOTIuODU4LDE5LjY3IEw5Ni4xMDcsMjUuNTk5IEM5Ni4xMzgsMjUuNjU0IDk2LjExOCwyNS43MjQgOTYuMDYzLDI1Ljc1NiBMMTIuNTQ1LDczLjk4NSBDMTIuNTI2LDczLjk5NiAxMi41MDYsNzQuMDAxIDEyLjQ4Niw3NC4wMDEgTDEyLjQ4Niw3NC4wMDEgWiBNNjIuMDE2LDE2Ljk5NyBDNjEuMzEyLDE2Ljk5NyA2MC42MDYsMTcuMTkgNTkuOTc1LDE3LjU1NCBMMy45NjUsNDkuODk5IEMyLjA4Myw1MC45ODUgMS4zNDEsNTMuMzA4IDIuMzEsNTUuMDc4IEwxMi41MzEsNzMuNzIzIEw5NS44NDgsMjUuNjExIEw5Mi42NTMsMTkuNzgyIEM5Mi4wMzgsMTguNjYgOTAuODcsMTcuOTkgODkuNTI5LDE3Ljk5IEM4OC44MjUsMTcuOTkgODguMTE5LDE4LjE4MiA4Ny40ODksMTguNTQ3IEw4MC4xNzIsMjIuNzcyIEM4MC4xNjEsMjIuNzc4IDgwLjE0OSwyMi43ODIgODAuMTM3LDIyLjc4NSBDNzguMzQ2LDIzLjgxMSA3Ni4zNDEsMjQuMzU0IDc0LjMzNiwyNC4zNTQgQzcxLjU4OCwyNC4zNTQgNjkuMDMzLDIzLjM0NyA2Ny4xNDIsMjEuNTE5IEw2Ni44NjQsMjEuMjQ5IEM2Ni4yNzcsMjAuNjM0IDY1Ljc3NCwxOS45NDcgNjUuMzY3LDE5LjIwMyBDNjUuMzYsMTkuMTkyIDY1LjM1NiwxOS4xNzkgNjUuMzU0LDE5LjE2NiBMNjUuMTYzLDE4LjgxOSBDNjUuMTU0LDE4LjgxMSA2NS4xNDYsMTguODAxIDY1LjE0LDE4Ljc5IEM2NC41MjUsMTcuNjY3IDYzLjM1NywxNi45OTcgNjIuMDE2LDE2Ljk5NyBMNjIuMDE2LDE2Ljk5NyBaIiBpZD0iRmlsbC03IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTQyLjQzNCw0OC44MDggTDQyLjQzNCw0OC44MDggQzM5LjkyNCw0OC44MDcgMzcuNzM3LDQ3LjU1IDM2LjU4Miw0NS40NDMgQzM0Ljc3MSw0Mi4xMzkgMzYuMTQ0LDM3LjgwOSAzOS42NDEsMzUuNzg5IEw1MS45MzIsMjguNjkxIEM1My4xMDMsMjguMDE1IDU0LjQxMywyNy42NTggNTUuNzIxLDI3LjY1OCBDNTguMjMxLDI3LjY1OCA2MC40MTgsMjguOTE2IDYxLjU3MywzMS4wMjMgQzYzLjM4NCwzNC4zMjcgNjIuMDEyLDM4LjY1NyA1OC41MTQsNDAuNjc3IEw0Ni4yMjMsNDcuNzc1IEM0NS4wNTMsNDguNDUgNDMuNzQyLDQ4LjgwOCA0Mi40MzQsNDguODA4IEw0Mi40MzQsNDguODA4IFogTTU1LjcyMSwyOC4xMjUgQzU0LjQ5NSwyOC4xMjUgNTMuMjY1LDI4LjQ2MSA1Mi4xNjYsMjkuMDk2IEwzOS44NzUsMzYuMTk0IEMzNi41OTYsMzguMDg3IDM1LjMwMiw0Mi4xMzYgMzYuOTkyLDQ1LjIxOCBDMzguMDYzLDQ3LjE3MyA0MC4wOTgsNDguMzQgNDIuNDM0LDQ4LjM0IEM0My42NjEsNDguMzQgNDQuODksNDguMDA1IDQ1Ljk5LDQ3LjM3IEw1OC4yODEsNDAuMjcyIEM2MS41NiwzOC4zNzkgNjIuODUzLDM0LjMzIDYxLjE2NCwzMS4yNDggQzYwLjA5MiwyOS4yOTMgNTguMDU4LDI4LjEyNSA1NS43MjEsMjguMTI1IEw1NS43MjEsMjguMTI1IFoiIGlkPSJGaWxsLTgiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ5LjU4OCwyLjQwNyBDMTQ5LjU4OCwyLjQwNyAxNTUuNzY4LDUuOTc1IDE1Ni4zMjUsNi4yOTcgTDE1Ni4zMjUsNy4xODQgQzE1Ni4zMjUsNy4zNiAxNTYuMzM4LDcuNTQ0IDE1Ni4zNjIsNy43MzMgQzE1Ni4zNzMsNy44MTQgMTU2LjM4Miw3Ljg5NCAxNTYuMzksNy45NzUgQzE1Ni41Myw5LjM5IDE1Ny4zNjMsMTAuOTczIDE1OC40OTUsMTEuOTc0IEwxNjUuODkxLDE4LjUxOSBDMTY2LjA2OCwxOC42NzUgMTY2LjI0OSwxOC44MTQgMTY2LjQzMiwxOC45MzQgQzE2OC4wMTEsMTkuOTc0IDE2OS4zODIsMTkuNCAxNjkuNDk0LDE3LjY1MiBDMTY5LjU0MywxNi44NjggMTY5LjU1MSwxNi4wNTcgMTY5LjUxNywxNS4yMjMgTDE2OS41MTQsMTUuMDYzIEwxNjkuNTE0LDEzLjkxMiBDMTcwLjc4LDE0LjY0MiAxOTUuNTAxLDI4LjkxNSAxOTUuNTAxLDI4LjkxNSBMMTk1LjUwMSw4Mi45MTUgQzE5NS41MDEsODQuMDA1IDE5NC43MzEsODQuNDQ1IDE5My43ODEsODMuODk3IEwxNTEuMzA4LDU5LjM3NCBDMTUwLjM1OCw1OC44MjYgMTQ5LjU4OCw1Ny40OTcgMTQ5LjU4OCw1Ni40MDggTDE0OS41ODgsMjIuMzc1IiBpZD0iRmlsbC05IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE5NC41NTMsODQuMjUgQzE5NC4yOTYsODQuMjUgMTk0LjAxMyw4NC4xNjUgMTkzLjcyMiw4My45OTcgTDE1MS4yNSw1OS40NzYgQzE1MC4yNjksNTguOTA5IDE0OS40NzEsNTcuNTMzIDE0OS40NzEsNTYuNDA4IEwxNDkuNDcxLDIyLjM3NSBMMTQ5LjcwNSwyMi4zNzUgTDE0OS43MDUsNTYuNDA4IEMxNDkuNzA1LDU3LjQ1OSAxNTAuNDUsNTguNzQ0IDE1MS4zNjYsNTkuMjc0IEwxOTMuODM5LDgzLjc5NSBDMTk0LjI2Myw4NC4wNCAxOTQuNjU1LDg0LjA4MyAxOTQuOTQyLDgzLjkxNyBDMTk1LjIyNyw4My43NTMgMTk1LjM4NCw4My4zOTcgMTk1LjM4NCw4Mi45MTUgTDE5NS4zODQsMjguOTgyIEMxOTQuMTAyLDI4LjI0MiAxNzIuMTA0LDE1LjU0MiAxNjkuNjMxLDE0LjExNCBMMTY5LjYzNCwxNS4yMiBDMTY5LjY2OCwxNi4wNTIgMTY5LjY2LDE2Ljg3NCAxNjkuNjEsMTcuNjU5IEMxNjkuNTU2LDE4LjUwMyAxNjkuMjE0LDE5LjEyMyAxNjguNjQ3LDE5LjQwNSBDMTY4LjAyOCwxOS43MTQgMTY3LjE5NywxOS41NzggMTY2LjM2NywxOS4wMzIgQzE2Ni4xODEsMTguOTA5IDE2NS45OTUsMTguNzY2IDE2NS44MTQsMTguNjA2IEwxNTguNDE3LDEyLjA2MiBDMTU3LjI1OSwxMS4wMzYgMTU2LjQxOCw5LjQzNyAxNTYuMjc0LDcuOTg2IEMxNTYuMjY2LDcuOTA3IDE1Ni4yNTcsNy44MjcgMTU2LjI0Nyw3Ljc0OCBDMTU2LjIyMSw3LjU1NSAxNTYuMjA5LDcuMzY1IDE1Ni4yMDksNy4xODQgTDE1Ni4yMDksNi4zNjQgQzE1NS4zNzUsNS44ODMgMTQ5LjUyOSwyLjUwOCAxNDkuNTI5LDIuNTA4IEwxNDkuNjQ2LDIuMzA2IEMxNDkuNjQ2LDIuMzA2IDE1NS44MjcsNS44NzQgMTU2LjM4NCw2LjE5NiBMMTU2LjQ0Miw2LjIzIEwxNTYuNDQyLDcuMTg0IEMxNTYuNDQyLDcuMzU1IDE1Ni40NTQsNy41MzUgMTU2LjQ3OCw3LjcxNyBDMTU2LjQ4OSw3LjggMTU2LjQ5OSw3Ljg4MiAxNTYuNTA3LDcuOTYzIEMxNTYuNjQ1LDkuMzU4IDE1Ny40NTUsMTAuODk4IDE1OC41NzIsMTEuODg2IEwxNjUuOTY5LDE4LjQzMSBDMTY2LjE0MiwxOC41ODQgMTY2LjMxOSwxOC43MiAxNjYuNDk2LDE4LjgzNyBDMTY3LjI1NCwxOS4zMzYgMTY4LDE5LjQ2NyAxNjguNTQzLDE5LjE5NiBDMTY5LjAzMywxOC45NTMgMTY5LjMyOSwxOC40MDEgMTY5LjM3NywxNy42NDUgQzE2OS40MjcsMTYuODY3IDE2OS40MzQsMTYuMDU0IDE2OS40MDEsMTUuMjI4IEwxNjkuMzk3LDE1LjA2NSBMMTY5LjM5NywxMy43MSBMMTY5LjU3MiwxMy44MSBDMTcwLjgzOSwxNC41NDEgMTk1LjU1OSwyOC44MTQgMTk1LjU1OSwyOC44MTQgTDE5NS42MTgsMjguODQ3IEwxOTUuNjE4LDgyLjkxNSBDMTk1LjYxOCw4My40ODQgMTk1LjQyLDgzLjkxMSAxOTUuMDU5LDg0LjExOSBDMTk0LjkwOCw4NC4yMDYgMTk0LjczNyw4NC4yNSAxOTQuNTUzLDg0LjI1IiBpZD0iRmlsbC0xMCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNDUuNjg1LDU2LjE2MSBMMTY5LjgsNzAuMDgzIEwxNDMuODIyLDg1LjA4MSBMMTQyLjM2LDg0Ljc3NCBDMTM1LjgyNiw4Mi42MDQgMTI4LjczMiw4MS4wNDYgMTIxLjM0MSw4MC4xNTggQzExNi45NzYsNzkuNjM0IDExMi42NzgsODEuMjU0IDExMS43NDMsODMuNzc4IEMxMTEuNTA2LDg0LjQxNCAxMTEuNTAzLDg1LjA3MSAxMTEuNzMyLDg1LjcwNiBDMTEzLjI3LDg5Ljk3MyAxMTUuOTY4LDk0LjA2OSAxMTkuNzI3LDk3Ljg0MSBMMTIwLjI1OSw5OC42ODYgQzEyMC4yNiw5OC42ODUgOTQuMjgyLDExMy42ODMgOTQuMjgyLDExMy42ODMgTDcwLjE2Nyw5OS43NjEgTDE0NS42ODUsNTYuMTYxIiBpZD0iRmlsbC0xMSIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik05NC4yODIsMTEzLjgxOCBMOTQuMjIzLDExMy43ODUgTDY5LjkzMyw5OS43NjEgTDcwLjEwOCw5OS42NiBMMTQ1LjY4NSw1Ni4wMjYgTDE0NS43NDMsNTYuMDU5IEwxNzAuMDMzLDcwLjA4MyBMMTQzLjg0Miw4NS4yMDUgTDE0My43OTcsODUuMTk1IEMxNDMuNzcyLDg1LjE5IDE0Mi4zMzYsODQuODg4IDE0Mi4zMzYsODQuODg4IEMxMzUuNzg3LDgyLjcxNCAxMjguNzIzLDgxLjE2MyAxMjEuMzI3LDgwLjI3NCBDMTIwLjc4OCw4MC4yMDkgMTIwLjIzNiw4MC4xNzcgMTE5LjY4OSw4MC4xNzcgQzExNS45MzEsODAuMTc3IDExMi42MzUsODEuNzA4IDExMS44NTIsODMuODE5IEMxMTEuNjI0LDg0LjQzMiAxMTEuNjIxLDg1LjA1MyAxMTEuODQyLDg1LjY2NyBDMTEzLjM3Nyw4OS45MjUgMTE2LjA1OCw5My45OTMgMTE5LjgxLDk3Ljc1OCBMMTE5LjgyNiw5Ny43NzkgTDEyMC4zNTIsOTguNjE0IEMxMjAuMzU0LDk4LjYxNyAxMjAuMzU2LDk4LjYyIDEyMC4zNTgsOTguNjI0IEwxMjAuNDIyLDk4LjcyNiBMMTIwLjMxNyw5OC43ODcgQzEyMC4yNjQsOTguODE4IDk0LjU5OSwxMTMuNjM1IDk0LjM0LDExMy43ODUgTDk0LjI4MiwxMTMuODE4IEw5NC4yODIsMTEzLjgxOCBaIE03MC40MDEsOTkuNzYxIEw5NC4yODIsMTEzLjU0OSBMMTE5LjA4NCw5OS4yMjkgQzExOS42Myw5OC45MTQgMTE5LjkzLDk4Ljc0IDEyMC4xMDEsOTguNjU0IEwxMTkuNjM1LDk3LjkxNCBDMTE1Ljg2NCw5NC4xMjcgMTEzLjE2OCw5MC4wMzMgMTExLjYyMiw4NS43NDYgQzExMS4zODIsODUuMDc5IDExMS4zODYsODQuNDA0IDExMS42MzMsODMuNzM4IEMxMTIuNDQ4LDgxLjUzOSAxMTUuODM2LDc5Ljk0MyAxMTkuNjg5LDc5Ljk0MyBDMTIwLjI0Niw3OS45NDMgMTIwLjgwNiw3OS45NzYgMTIxLjM1NSw4MC4wNDIgQzEyOC43NjcsODAuOTMzIDEzNS44NDYsODIuNDg3IDE0Mi4zOTYsODQuNjYzIEMxNDMuMjMyLDg0LjgzOCAxNDMuNjExLDg0LjkxNyAxNDMuNzg2LDg0Ljk2NyBMMTY5LjU2Niw3MC4wODMgTDE0NS42ODUsNTYuMjk1IEw3MC40MDEsOTkuNzYxIEw3MC40MDEsOTkuNzYxIFoiIGlkPSJGaWxsLTEyIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2Ny4yMywxOC45NzkgTDE2Ny4yMyw2OS44NSBMMTM5LjkwOSw4NS42MjMgTDEzMy40NDgsNzEuNDU2IEMxMzIuNTM4LDY5LjQ2IDEzMC4wMiw2OS43MTggMTI3LjgyNCw3Mi4wMyBDMTI2Ljc2OSw3My4xNCAxMjUuOTMxLDc0LjU4NSAxMjUuNDk0LDc2LjA0OCBMMTE5LjAzNCw5Ny42NzYgTDkxLjcxMiwxMTMuNDUgTDkxLjcxMiw2Mi41NzkgTDE2Ny4yMywxOC45NzkiIGlkPSJGaWxsLTEzIiBmaWxsPSIjRkZGRkZGIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTkxLjcxMiwxMTMuNTY3IEM5MS42OTIsMTEzLjU2NyA5MS42NzIsMTEzLjU2MSA5MS42NTMsMTEzLjU1MSBDOTEuNjE4LDExMy41MyA5MS41OTUsMTEzLjQ5MiA5MS41OTUsMTEzLjQ1IEw5MS41OTUsNjIuNTc5IEM5MS41OTUsNjIuNTM3IDkxLjYxOCw2Mi40OTkgOTEuNjUzLDYyLjQ3OCBMMTY3LjE3MiwxOC44NzggQzE2Ny4yMDgsMTguODU3IDE2Ny4yNTIsMTguODU3IDE2Ny4yODgsMTguODc4IEMxNjcuMzI0LDE4Ljg5OSAxNjcuMzQ3LDE4LjkzNyAxNjcuMzQ3LDE4Ljk3OSBMMTY3LjM0Nyw2OS44NSBDMTY3LjM0Nyw2OS44OTEgMTY3LjMyNCw2OS45MyAxNjcuMjg4LDY5Ljk1IEwxMzkuOTY3LDg1LjcyNSBDMTM5LjkzOSw4NS43NDEgMTM5LjkwNSw4NS43NDUgMTM5Ljg3Myw4NS43MzUgQzEzOS44NDIsODUuNzI1IDEzOS44MTYsODUuNzAyIDEzOS44MDIsODUuNjcyIEwxMzMuMzQyLDcxLjUwNCBDMTMyLjk2Nyw3MC42ODIgMTMyLjI4LDcwLjIyOSAxMzEuNDA4LDcwLjIyOSBDMTMwLjMxOSw3MC4yMjkgMTI5LjA0NCw3MC45MTUgMTI3LjkwOCw3Mi4xMSBDMTI2Ljg3NCw3My4yIDEyNi4wMzQsNzQuNjQ3IDEyNS42MDYsNzYuMDgyIEwxMTkuMTQ2LDk3LjcwOSBDMTE5LjEzNyw5Ny43MzggMTE5LjExOCw5Ny43NjIgMTE5LjA5Miw5Ny43NzcgTDkxLjc3LDExMy41NTEgQzkxLjc1MiwxMTMuNTYxIDkxLjczMiwxMTMuNTY3IDkxLjcxMiwxMTMuNTY3IEw5MS43MTIsMTEzLjU2NyBaIE05MS44MjksNjIuNjQ3IEw5MS44MjksMTEzLjI0OCBMMTE4LjkzNSw5Ny41OTggTDEyNS4zODIsNzYuMDE1IEMxMjUuODI3LDc0LjUyNSAxMjYuNjY0LDczLjA4MSAxMjcuNzM5LDcxLjk1IEMxMjguOTE5LDcwLjcwOCAxMzAuMjU2LDY5Ljk5NiAxMzEuNDA4LDY5Ljk5NiBDMTMyLjM3Nyw2OS45OTYgMTMzLjEzOSw3MC40OTcgMTMzLjU1NCw3MS40MDcgTDEzOS45NjEsODUuNDU4IEwxNjcuMTEzLDY5Ljc4MiBMMTY3LjExMywxOS4xODEgTDkxLjgyOSw2Mi42NDcgTDkxLjgyOSw2Mi42NDcgWiIgaWQ9IkZpbGwtMTQiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTY4LjU0MywxOS4yMTMgTDE2OC41NDMsNzAuMDgzIEwxNDEuMjIxLDg1Ljg1NyBMMTM0Ljc2MSw3MS42ODkgQzEzMy44NTEsNjkuNjk0IDEzMS4zMzMsNjkuOTUxIDEyOS4xMzcsNzIuMjYzIEMxMjguMDgyLDczLjM3NCAxMjcuMjQ0LDc0LjgxOSAxMjYuODA3LDc2LjI4MiBMMTIwLjM0Niw5Ny45MDkgTDkzLjAyNSwxMTMuNjgzIEw5My4wMjUsNjIuODEzIEwxNjguNTQzLDE5LjIxMyIgaWQ9IkZpbGwtMTUiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTMuMDI1LDExMy44IEM5My4wMDUsMTEzLjggOTIuOTg0LDExMy43OTUgOTIuOTY2LDExMy43ODUgQzkyLjkzMSwxMTMuNzY0IDkyLjkwOCwxMTMuNzI1IDkyLjkwOCwxMTMuNjg0IEw5Mi45MDgsNjIuODEzIEM5Mi45MDgsNjIuNzcxIDkyLjkzMSw2Mi43MzMgOTIuOTY2LDYyLjcxMiBMMTY4LjQ4NCwxOS4xMTIgQzE2OC41MiwxOS4wOSAxNjguNTY1LDE5LjA5IDE2OC42MDEsMTkuMTEyIEMxNjguNjM3LDE5LjEzMiAxNjguNjYsMTkuMTcxIDE2OC42NiwxOS4yMTIgTDE2OC42Niw3MC4wODMgQzE2OC42Niw3MC4xMjUgMTY4LjYzNyw3MC4xNjQgMTY4LjYwMSw3MC4xODQgTDE0MS4yOCw4NS45NTggQzE0MS4yNTEsODUuOTc1IDE0MS4yMTcsODUuOTc5IDE0MS4xODYsODUuOTY4IEMxNDEuMTU0LDg1Ljk1OCAxNDEuMTI5LDg1LjkzNiAxNDEuMTE1LDg1LjkwNiBMMTM0LjY1NSw3MS43MzggQzEzNC4yOCw3MC45MTUgMTMzLjU5Myw3MC40NjMgMTMyLjcyLDcwLjQ2MyBDMTMxLjYzMiw3MC40NjMgMTMwLjM1Nyw3MS4xNDggMTI5LjIyMSw3Mi4zNDQgQzEyOC4xODYsNzMuNDMzIDEyNy4zNDcsNzQuODgxIDEyNi45MTksNzYuMzE1IEwxMjAuNDU4LDk3Ljk0MyBDMTIwLjQ1LDk3Ljk3MiAxMjAuNDMxLDk3Ljk5NiAxMjAuNDA1LDk4LjAxIEw5My4wODMsMTEzLjc4NSBDOTMuMDY1LDExMy43OTUgOTMuMDQ1LDExMy44IDkzLjAyNSwxMTMuOCBMOTMuMDI1LDExMy44IFogTTkzLjE0Miw2Mi44ODEgTDkzLjE0MiwxMTMuNDgxIEwxMjAuMjQ4LDk3LjgzMiBMMTI2LjY5NSw3Ni4yNDggQzEyNy4xNCw3NC43NTggMTI3Ljk3Nyw3My4zMTUgMTI5LjA1Miw3Mi4xODMgQzEzMC4yMzEsNzAuOTQyIDEzMS41NjgsNzAuMjI5IDEzMi43Miw3MC4yMjkgQzEzMy42ODksNzAuMjI5IDEzNC40NTIsNzAuNzMxIDEzNC44NjcsNzEuNjQxIEwxNDEuMjc0LDg1LjY5MiBMMTY4LjQyNiw3MC4wMTYgTDE2OC40MjYsMTkuNDE1IEw5My4xNDIsNjIuODgxIEw5My4xNDIsNjIuODgxIFoiIGlkPSJGaWxsLTE2IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2OS44LDcwLjA4MyBMMTQyLjQ3OCw4NS44NTcgTDEzNi4wMTgsNzEuNjg5IEMxMzUuMTA4LDY5LjY5NCAxMzIuNTksNjkuOTUxIDEzMC4zOTMsNzIuMjYzIEMxMjkuMzM5LDczLjM3NCAxMjguNSw3NC44MTkgMTI4LjA2NCw3Ni4yODIgTDEyMS42MDMsOTcuOTA5IEw5NC4yODIsMTEzLjY4MyBMOTQuMjgyLDYyLjgxMyBMMTY5LjgsMTkuMjEzIEwxNjkuOCw3MC4wODMgWiIgaWQ9IkZpbGwtMTciIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTQuMjgyLDExMy45MTcgQzk0LjI0MSwxMTMuOTE3IDk0LjIwMSwxMTMuOTA3IDk0LjE2NSwxMTMuODg2IEM5NC4wOTMsMTEzLjg0NSA5NC4wNDgsMTEzLjc2NyA5NC4wNDgsMTEzLjY4NCBMOTQuMDQ4LDYyLjgxMyBDOTQuMDQ4LDYyLjczIDk0LjA5Myw2Mi42NTIgOTQuMTY1LDYyLjYxMSBMMTY5LjY4MywxOS4wMSBDMTY5Ljc1NSwxOC45NjkgMTY5Ljg0NCwxOC45NjkgMTY5LjkxNywxOS4wMSBDMTY5Ljk4OSwxOS4wNTIgMTcwLjAzMywxOS4xMjkgMTcwLjAzMywxOS4yMTIgTDE3MC4wMzMsNzAuMDgzIEMxNzAuMDMzLDcwLjE2NiAxNjkuOTg5LDcwLjI0NCAxNjkuOTE3LDcwLjI4NSBMMTQyLjU5NSw4Ni4wNiBDMTQyLjUzOCw4Ni4wOTIgMTQyLjQ2OSw4Ni4xIDE0Mi40MDcsODYuMDggQzE0Mi4zNDQsODYuMDYgMTQyLjI5Myw4Ni4wMTQgMTQyLjI2Niw4NS45NTQgTDEzNS44MDUsNzEuNzg2IEMxMzUuNDQ1LDcwLjk5NyAxMzQuODEzLDcwLjU4IDEzMy45NzcsNzAuNTggQzEzMi45MjEsNzAuNTggMTMxLjY3Niw3MS4yNTIgMTMwLjU2Miw3Mi40MjQgQzEyOS41NCw3My41MDEgMTI4LjcxMSw3NC45MzEgMTI4LjI4Nyw3Ni4zNDggTDEyMS44MjcsOTcuOTc2IEMxMjEuODEsOTguMDM0IDEyMS43NzEsOTguMDgyIDEyMS43Miw5OC4xMTIgTDk0LjM5OCwxMTMuODg2IEM5NC4zNjIsMTEzLjkwNyA5NC4zMjIsMTEzLjkxNyA5NC4yODIsMTEzLjkxNyBMOTQuMjgyLDExMy45MTcgWiBNOTQuNTE1LDYyLjk0OCBMOTQuNTE1LDExMy4yNzkgTDEyMS40MDYsOTcuNzU0IEwxMjcuODQsNzYuMjE1IEMxMjguMjksNzQuNzA4IDEyOS4xMzcsNzMuMjQ3IDEzMC4yMjQsNzIuMTAzIEMxMzEuNDI1LDcwLjgzOCAxMzIuNzkzLDcwLjExMiAxMzMuOTc3LDcwLjExMiBDMTM0Ljk5NSw3MC4xMTIgMTM1Ljc5NSw3MC42MzggMTM2LjIzLDcxLjU5MiBMMTQyLjU4NCw4NS41MjYgTDE2OS41NjYsNjkuOTQ4IEwxNjkuNTY2LDE5LjYxNyBMOTQuNTE1LDYyLjk0OCBMOTQuNTE1LDYyLjk0OCBaIiBpZD0iRmlsbC0xOCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMDkuODk0LDkyLjk0MyBMMTA5Ljg5NCw5Mi45NDMgQzEwOC4xMiw5Mi45NDMgMTA2LjY1Myw5Mi4yMTggMTA1LjY1LDkwLjgyMyBDMTA1LjU4Myw5MC43MzEgMTA1LjU5Myw5MC42MSAxMDUuNjczLDkwLjUyOSBDMTA1Ljc1Myw5MC40NDggMTA1Ljg4LDkwLjQ0IDEwNS45NzQsOTAuNTA2IEMxMDYuNzU0LDkxLjA1MyAxMDcuNjc5LDkxLjMzMyAxMDguNzI0LDkxLjMzMyBDMTEwLjA0Nyw5MS4zMzMgMTExLjQ3OCw5MC44OTQgMTEyLjk4LDkwLjAyNyBDMTE4LjI5MSw4Ni45NiAxMjIuNjExLDc5LjUwOSAxMjIuNjExLDczLjQxNiBDMTIyLjYxMSw3MS40ODkgMTIyLjE2OSw2OS44NTYgMTIxLjMzMyw2OC42OTIgQzEyMS4yNjYsNjguNiAxMjEuMjc2LDY4LjQ3MyAxMjEuMzU2LDY4LjM5MiBDMTIxLjQzNiw2OC4zMTEgMTIxLjU2Myw2OC4yOTkgMTIxLjY1Niw2OC4zNjUgQzEyMy4zMjcsNjkuNTM3IDEyNC4yNDcsNzEuNzQ2IDEyNC4yNDcsNzQuNTg0IEMxMjQuMjQ3LDgwLjgyNiAxMTkuODIxLDg4LjQ0NyAxMTQuMzgyLDkxLjU4NyBDMTEyLjgwOCw5Mi40OTUgMTExLjI5OCw5Mi45NDMgMTA5Ljg5NCw5Mi45NDMgTDEwOS44OTQsOTIuOTQzIFogTTEwNi45MjUsOTEuNDAxIEMxMDcuNzM4LDkyLjA1MiAxMDguNzQ1LDkyLjI3OCAxMDkuODkzLDkyLjI3OCBMMTA5Ljg5NCw5Mi4yNzggQzExMS4yMTUsOTIuMjc4IDExMi42NDcsOTEuOTUxIDExNC4xNDgsOTEuMDg0IEMxMTkuNDU5LDg4LjAxNyAxMjMuNzgsODAuNjIxIDEyMy43OCw3NC41MjggQzEyMy43OCw3Mi41NDkgMTIzLjMxNyw3MC45MjkgMTIyLjQ1NCw2OS43NjcgQzEyMi44NjUsNzAuODAyIDEyMy4wNzksNzIuMDQyIDEyMy4wNzksNzMuNDAyIEMxMjMuMDc5LDc5LjY0NSAxMTguNjUzLDg3LjI4NSAxMTMuMjE0LDkwLjQyNSBDMTExLjY0LDkxLjMzNCAxMTAuMTMsOTEuNzQyIDEwOC43MjQsOTEuNzQyIEMxMDguMDgzLDkxLjc0MiAxMDcuNDgxLDkxLjU5MyAxMDYuOTI1LDkxLjQwMSBMMTA2LjkyNSw5MS40MDEgWiIgaWQ9IkZpbGwtMTkiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjA5Nyw5MC4yMyBDMTE4LjQ4MSw4Ny4xMjIgMTIyLjg0NSw3OS41OTQgMTIyLjg0NSw3My40MTYgQzEyMi44NDUsNzEuMzY1IDEyMi4zNjIsNjkuNzI0IDEyMS41MjIsNjguNTU2IEMxMTkuNzM4LDY3LjMwNCAxMTcuMTQ4LDY3LjM2MiAxMTQuMjY1LDY5LjAyNiBDMTA4Ljg4MSw3Mi4xMzQgMTA0LjUxNyw3OS42NjIgMTA0LjUxNyw4NS44NCBDMTA0LjUxNyw4Ny44OTEgMTA1LDg5LjUzMiAxMDUuODQsOTAuNyBDMTA3LjYyNCw5MS45NTIgMTEwLjIxNCw5MS44OTQgMTEzLjA5Nyw5MC4yMyIgaWQ9IkZpbGwtMjAiIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTA4LjcyNCw5MS42MTQgTDEwOC43MjQsOTEuNjE0IEMxMDcuNTgyLDkxLjYxNCAxMDYuNTY2LDkxLjQwMSAxMDUuNzA1LDkwLjc5NyBDMTA1LjY4NCw5MC43ODMgMTA1LjY2NSw5MC44MTEgMTA1LjY1LDkwLjc5IEMxMDQuNzU2LDg5LjU0NiAxMDQuMjgzLDg3Ljg0MiAxMDQuMjgzLDg1LjgxNyBDMTA0LjI4Myw3OS41NzUgMTA4LjcwOSw3MS45NTMgMTE0LjE0OCw2OC44MTIgQzExNS43MjIsNjcuOTA0IDExNy4yMzIsNjcuNDQ5IDExOC42MzgsNjcuNDQ5IEMxMTkuNzgsNjcuNDQ5IDEyMC43OTYsNjcuNzU4IDEyMS42NTYsNjguMzYyIEMxMjEuNjc4LDY4LjM3NyAxMjEuNjk3LDY4LjM5NyAxMjEuNzEyLDY4LjQxOCBDMTIyLjYwNiw2OS42NjIgMTIzLjA3OSw3MS4zOSAxMjMuMDc5LDczLjQxNSBDMTIzLjA3OSw3OS42NTggMTE4LjY1Myw4Ny4xOTggMTEzLjIxNCw5MC4zMzggQzExMS42NCw5MS4yNDcgMTEwLjEzLDkxLjYxNCAxMDguNzI0LDkxLjYxNCBMMTA4LjcyNCw5MS42MTQgWiBNMTA2LjAwNiw5MC41MDUgQzEwNi43OCw5MS4wMzcgMTA3LjY5NCw5MS4yODEgMTA4LjcyNCw5MS4yODEgQzExMC4wNDcsOTEuMjgxIDExMS40NzgsOTAuODY4IDExMi45OCw5MC4wMDEgQzExOC4yOTEsODYuOTM1IDEyMi42MTEsNzkuNDk2IDEyMi42MTEsNzMuNDAzIEMxMjIuNjExLDcxLjQ5NCAxMjIuMTc3LDY5Ljg4IDEyMS4zNTYsNjguNzE4IEMxMjAuNTgyLDY4LjE4NSAxMTkuNjY4LDY3LjkxOSAxMTguNjM4LDY3LjkxOSBDMTE3LjMxNSw2Ny45MTkgMTE1Ljg4Myw2OC4zNiAxMTQuMzgyLDY5LjIyNyBDMTA5LjA3MSw3Mi4yOTMgMTA0Ljc1MSw3OS43MzMgMTA0Ljc1MSw4NS44MjYgQzEwNC43NTEsODcuNzM1IDEwNS4xODUsODkuMzQzIDEwNi4wMDYsOTAuNTA1IEwxMDYuMDA2LDkwLjUwNSBaIiBpZD0iRmlsbC0yMSIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNDkuMzE4LDcuMjYyIEwxMzkuMzM0LDE2LjE0IEwxNTUuMjI3LDI3LjE3MSBMMTYwLjgxNiwyMS4wNTkgTDE0OS4zMTgsNy4yNjIiIGlkPSJGaWxsLTIyIiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2OS42NzYsMTMuODQgTDE1OS45MjgsMTkuNDY3IEMxNTYuMjg2LDIxLjU3IDE1MC40LDIxLjU4IDE0Ni43ODEsMTkuNDkxIEMxNDMuMTYxLDE3LjQwMiAxNDMuMTgsMTQuMDAzIDE0Ni44MjIsMTEuOSBMMTU2LjMxNyw2LjI5MiBMMTQ5LjU4OCwyLjQwNyBMNjcuNzUyLDQ5LjQ3OCBMMTEzLjY3NSw3NS45OTIgTDExNi43NTYsNzQuMjEzIEMxMTcuMzg3LDczLjg0OCAxMTcuNjI1LDczLjMxNSAxMTcuMzc0LDcyLjgyMyBDMTE1LjAxNyw2OC4xOTEgMTE0Ljc4MSw2My4yNzcgMTE2LjY5MSw1OC41NjEgQzEyMi4zMjksNDQuNjQxIDE0MS4yLDMzLjc0NiAxNjUuMzA5LDMwLjQ5MSBDMTczLjQ3OCwyOS4zODggMTgxLjk4OSwyOS41MjQgMTkwLjAxMywzMC44ODUgQzE5MC44NjUsMzEuMDMgMTkxLjc4OSwzMC44OTMgMTkyLjQyLDMwLjUyOCBMMTk1LjUwMSwyOC43NSBMMTY5LjY3NiwxMy44NCIgaWQ9IkZpbGwtMjMiIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjY3NSw3Ni40NTkgQzExMy41OTQsNzYuNDU5IDExMy41MTQsNzYuNDM4IDExMy40NDIsNzYuMzk3IEw2Ny41MTgsNDkuODgyIEM2Ny4zNzQsNDkuNzk5IDY3LjI4NCw0OS42NDUgNjcuMjg1LDQ5LjQ3OCBDNjcuMjg1LDQ5LjMxMSA2Ny4zNzQsNDkuMTU3IDY3LjUxOSw0OS4wNzMgTDE0OS4zNTUsMi4wMDIgQzE0OS40OTksMS45MTkgMTQ5LjY3NywxLjkxOSAxNDkuODIxLDIuMDAyIEwxNTYuNTUsNS44ODcgQzE1Ni43NzQsNi4wMTcgMTU2Ljg1LDYuMzAyIDE1Ni43MjIsNi41MjYgQzE1Ni41OTIsNi43NDkgMTU2LjMwNyw2LjgyNiAxNTYuMDgzLDYuNjk2IEwxNDkuNTg3LDIuOTQ2IEw2OC42ODcsNDkuNDc5IEwxMTMuNjc1LDc1LjQ1MiBMMTE2LjUyMyw3My44MDggQzExNi43MTUsNzMuNjk3IDExNy4xNDMsNzMuMzk5IDExNi45NTgsNzMuMDM1IEMxMTQuNTQyLDY4LjI4NyAxMTQuMyw2My4yMjEgMTE2LjI1OCw1OC4zODUgQzExOS4wNjQsNTEuNDU4IDEyNS4xNDMsNDUuMTQzIDEzMy44NCw0MC4xMjIgQzE0Mi40OTcsMzUuMTI0IDE1My4zNTgsMzEuNjMzIDE2NS4yNDcsMzAuMDI4IEMxNzMuNDQ1LDI4LjkyMSAxODIuMDM3LDI5LjA1OCAxOTAuMDkxLDMwLjQyNSBDMTkwLjgzLDMwLjU1IDE5MS42NTIsMzAuNDMyIDE5Mi4xODYsMzAuMTI0IEwxOTQuNTY3LDI4Ljc1IEwxNjkuNDQyLDE0LjI0NCBDMTY5LjIxOSwxNC4xMTUgMTY5LjE0MiwxMy44MjkgMTY5LjI3MSwxMy42MDYgQzE2OS40LDEzLjM4MiAxNjkuNjg1LDEzLjMwNiAxNjkuOTA5LDEzLjQzNSBMMTk1LjczNCwyOC4zNDUgQzE5NS44NzksMjguNDI4IDE5NS45NjgsMjguNTgzIDE5NS45NjgsMjguNzUgQzE5NS45NjgsMjguOTE2IDE5NS44NzksMjkuMDcxIDE5NS43MzQsMjkuMTU0IEwxOTIuNjUzLDMwLjkzMyBDMTkxLjkzMiwzMS4zNSAxOTAuODksMzEuNTA4IDE4OS45MzUsMzEuMzQ2IEMxODEuOTcyLDI5Ljk5NSAxNzMuNDc4LDI5Ljg2IDE2NS4zNzIsMzAuOTU0IEMxNTMuNjAyLDMyLjU0MyAxNDIuODYsMzUuOTkzIDEzNC4zMDcsNDAuOTMxIEMxMjUuNzkzLDQ1Ljg0NyAxMTkuODUxLDUyLjAwNCAxMTcuMTI0LDU4LjczNiBDMTE1LjI3LDYzLjMxNCAxMTUuNTAxLDY4LjExMiAxMTcuNzksNzIuNjExIEMxMTguMTYsNzMuMzM2IDExNy44NDUsNzQuMTI0IDExNi45OSw3NC42MTcgTDExMy45MDksNzYuMzk3IEMxMTMuODM2LDc2LjQzOCAxMTMuNzU2LDc2LjQ1OSAxMTMuNjc1LDc2LjQ1OSIgaWQ9IkZpbGwtMjQiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTUzLjMxNiwyMS4yNzkgQzE1MC45MDMsMjEuMjc5IDE0OC40OTUsMjAuNzUxIDE0Ni42NjQsMTkuNjkzIEMxNDQuODQ2LDE4LjY0NCAxNDMuODQ0LDE3LjIzMiAxNDMuODQ0LDE1LjcxOCBDMTQzLjg0NCwxNC4xOTEgMTQ0Ljg2LDEyLjc2MyAxNDYuNzA1LDExLjY5OCBMMTU2LjE5OCw2LjA5MSBDMTU2LjMwOSw2LjAyNSAxNTYuNDUyLDYuMDYyIDE1Ni41MTgsNi4xNzMgQzE1Ni41ODMsNi4yODQgMTU2LjU0Nyw2LjQyNyAxNTYuNDM2LDYuNDkzIEwxNDYuOTQsMTIuMTAyIEMxNDUuMjQ0LDEzLjA4MSAxNDQuMzEyLDE0LjM2NSAxNDQuMzEyLDE1LjcxOCBDMTQ0LjMxMiwxNy4wNTggMTQ1LjIzLDE4LjMyNiAxNDYuODk3LDE5LjI4OSBDMTUwLjQ0NiwyMS4zMzggMTU2LjI0LDIxLjMyNyAxNTkuODExLDE5LjI2NSBMMTY5LjU1OSwxMy42MzcgQzE2OS42NywxMy41NzMgMTY5LjgxMywxMy42MTEgMTY5Ljg3OCwxMy43MjMgQzE2OS45NDMsMTMuODM0IDE2OS45MDQsMTMuOTc3IDE2OS43OTMsMTQuMDQyIEwxNjAuMDQ1LDE5LjY3IEMxNTguMTg3LDIwLjc0MiAxNTUuNzQ5LDIxLjI3OSAxNTMuMzE2LDIxLjI3OSIgaWQ9IkZpbGwtMjUiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjY3NSw3NS45OTIgTDY3Ljc2Miw0OS40ODQiIGlkPSJGaWxsLTI2IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTExMy42NzUsNzYuMzQyIEMxMTMuNjE1LDc2LjM0MiAxMTMuNTU1LDc2LjMyNyAxMTMuNSw3Ni4yOTUgTDY3LjU4Nyw0OS43ODcgQzY3LjQxOSw0OS42OSA2Ny4zNjIsNDkuNDc2IDY3LjQ1OSw0OS4zMDkgQzY3LjU1Niw0OS4xNDEgNjcuNzcsNDkuMDgzIDY3LjkzNyw0OS4xOCBMMTEzLjg1LDc1LjY4OCBDMTE0LjAxOCw3NS43ODUgMTE0LjA3NSw3NiAxMTMuOTc4LDc2LjE2NyBDMTEzLjkxNCw3Ni4yNzkgMTEzLjc5Niw3Ni4zNDIgMTEzLjY3NSw3Ni4zNDIiIGlkPSJGaWxsLTI3IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTY3Ljc2Miw0OS40ODQgTDY3Ljc2MiwxMDMuNDg1IEM2Ny43NjIsMTA0LjU3NSA2OC41MzIsMTA1LjkwMyA2OS40ODIsMTA2LjQ1MiBMMTExLjk1NSwxMzAuOTczIEMxMTIuOTA1LDEzMS41MjIgMTEzLjY3NSwxMzEuMDgzIDExMy42NzUsMTI5Ljk5MyBMMTEzLjY3NSw3NS45OTIiIGlkPSJGaWxsLTI4IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTExMi43MjcsMTMxLjU2MSBDMTEyLjQzLDEzMS41NjEgMTEyLjEwNywxMzEuNDY2IDExMS43OCwxMzEuMjc2IEw2OS4zMDcsMTA2Ljc1NSBDNjguMjQ0LDEwNi4xNDIgNjcuNDEyLDEwNC43MDUgNjcuNDEyLDEwMy40ODUgTDY3LjQxMiw0OS40ODQgQzY3LjQxMiw0OS4yOSA2Ny41NjksNDkuMTM0IDY3Ljc2Miw0OS4xMzQgQzY3Ljk1Niw0OS4xMzQgNjguMTEzLDQ5LjI5IDY4LjExMyw0OS40ODQgTDY4LjExMywxMDMuNDg1IEM2OC4xMTMsMTA0LjQ0NSA2OC44MiwxMDUuNjY1IDY5LjY1NywxMDYuMTQ4IEwxMTIuMTMsMTMwLjY3IEMxMTIuNDc0LDEzMC44NjggMTEyLjc5MSwxMzAuOTEzIDExMywxMzAuNzkyIEMxMTMuMjA2LDEzMC42NzMgMTEzLjMyNSwxMzAuMzgxIDExMy4zMjUsMTI5Ljk5MyBMMTEzLjMyNSw3NS45OTIgQzExMy4zMjUsNzUuNzk4IDExMy40ODIsNzUuNjQxIDExMy42NzUsNzUuNjQxIEMxMTMuODY5LDc1LjY0MSAxMTQuMDI1LDc1Ljc5OCAxMTQuMDI1LDc1Ljk5MiBMMTE0LjAyNSwxMjkuOTkzIEMxMTQuMDI1LDEzMC42NDggMTEzLjc4NiwxMzEuMTQ3IDExMy4zNSwxMzEuMzk5IEMxMTMuMTYyLDEzMS41MDcgMTEyLjk1MiwxMzEuNTYxIDExMi43MjcsMTMxLjU2MSIgaWQ9IkZpbGwtMjkiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEyLjg2LDQwLjUxMiBDMTEyLjg2LDQwLjUxMiAxMTIuODYsNDAuNTEyIDExMi44NTksNDAuNTEyIEMxMTAuNTQxLDQwLjUxMiAxMDguMzYsMzkuOTkgMTA2LjcxNywzOS4wNDEgQzEwNS4wMTIsMzguMDU3IDEwNC4wNzQsMzYuNzI2IDEwNC4wNzQsMzUuMjkyIEMxMDQuMDc0LDMzLjg0NyAxMDUuMDI2LDMyLjUwMSAxMDYuNzU0LDMxLjUwNCBMMTE4Ljc5NSwyNC41NTEgQzEyMC40NjMsMjMuNTg5IDEyMi42NjksMjMuMDU4IDEyNS4wMDcsMjMuMDU4IEMxMjcuMzI1LDIzLjA1OCAxMjkuNTA2LDIzLjU4MSAxMzEuMTUsMjQuNTMgQzEzMi44NTQsMjUuNTE0IDEzMy43OTMsMjYuODQ1IDEzMy43OTMsMjguMjc4IEMxMzMuNzkzLDI5LjcyNCAxMzIuODQxLDMxLjA2OSAxMzEuMTEzLDMyLjA2NyBMMTE5LjA3MSwzOS4wMTkgQzExNy40MDMsMzkuOTgyIDExNS4xOTcsNDAuNTEyIDExMi44Niw0MC41MTIgTDExMi44Niw0MC41MTIgWiBNMTI1LjAwNywyMy43NTkgQzEyMi43OSwyMy43NTkgMTIwLjcwOSwyNC4yNTYgMTE5LjE0NiwyNS4xNTggTDEwNy4xMDQsMzIuMTEgQzEwNS42MDIsMzIuOTc4IDEwNC43NzQsMzQuMTA4IDEwNC43NzQsMzUuMjkyIEMxMDQuNzc0LDM2LjQ2NSAxMDUuNTg5LDM3LjU4MSAxMDcuMDY3LDM4LjQzNCBDMTA4LjYwNSwzOS4zMjMgMTEwLjY2MywzOS44MTIgMTEyLjg1OSwzOS44MTIgTDExMi44NiwzOS44MTIgQzExNS4wNzYsMzkuODEyIDExNy4xNTgsMzkuMzE1IDExOC43MjEsMzguNDEzIEwxMzAuNzYyLDMxLjQ2IEMxMzIuMjY0LDMwLjU5MyAxMzMuMDkyLDI5LjQ2MyAxMzMuMDkyLDI4LjI3OCBDMTMzLjA5MiwyNy4xMDYgMTMyLjI3OCwyNS45OSAxMzAuOCwyNS4xMzYgQzEyOS4yNjEsMjQuMjQ4IDEyNy4yMDQsMjMuNzU5IDEyNS4wMDcsMjMuNzU5IEwxMjUuMDA3LDIzLjc1OSBaIiBpZD0iRmlsbC0zMCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNjUuNjMsMTYuMjE5IEwxNTkuODk2LDE5LjUzIEMxNTYuNzI5LDIxLjM1OCAxNTEuNjEsMjEuMzY3IDE0OC40NjMsMTkuNTUgQzE0NS4zMTYsMTcuNzMzIDE0NS4zMzIsMTQuNzc4IDE0OC40OTksMTIuOTQ5IEwxNTQuMjMzLDkuNjM5IEwxNjUuNjMsMTYuMjE5IiBpZD0iRmlsbC0zMSIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNTQuMjMzLDEwLjQ0OCBMMTY0LjIyOCwxNi4yMTkgTDE1OS41NDYsMTguOTIzIEMxNTguMTEyLDE5Ljc1IDE1Ni4xOTQsMjAuMjA2IDE1NC4xNDcsMjAuMjA2IEMxNTIuMTE4LDIwLjIwNiAxNTAuMjI0LDE5Ljc1NyAxNDguODE0LDE4Ljk0MyBDMTQ3LjUyNCwxOC4xOTkgMTQ2LjgxNCwxNy4yNDkgMTQ2LjgxNCwxNi4yNjkgQzE0Ni44MTQsMTUuMjc4IDE0Ny41MzcsMTQuMzE0IDE0OC44NSwxMy41NTYgTDE1NC4yMzMsMTAuNDQ4IE0xNTQuMjMzLDkuNjM5IEwxNDguNDk5LDEyLjk0OSBDMTQ1LjMzMiwxNC43NzggMTQ1LjMxNiwxNy43MzMgMTQ4LjQ2MywxOS41NSBDMTUwLjAzMSwyMC40NTUgMTUyLjA4NiwyMC45MDcgMTU0LjE0NywyMC45MDcgQzE1Ni4yMjQsMjAuOTA3IDE1OC4zMDYsMjAuNDQ3IDE1OS44OTYsMTkuNTMgTDE2NS42MywxNi4yMTkgTDE1NC4yMzMsOS42MzkiIGlkPSJGaWxsLTMyIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0NS40NDUsNzIuNjY3IEwxNDUuNDQ1LDcyLjY2NyBDMTQzLjY3Miw3Mi42NjcgMTQyLjIwNCw3MS44MTcgMTQxLjIwMiw3MC40MjIgQzE0MS4xMzUsNzAuMzMgMTQxLjE0NSw3MC4xNDcgMTQxLjIyNSw3MC4wNjYgQzE0MS4zMDUsNjkuOTg1IDE0MS40MzIsNjkuOTQ2IDE0MS41MjUsNzAuMDExIEMxNDIuMzA2LDcwLjU1OSAxNDMuMjMxLDcwLjgyMyAxNDQuMjc2LDcwLjgyMiBDMTQ1LjU5OCw3MC44MjIgMTQ3LjAzLDcwLjM3NiAxNDguNTMyLDY5LjUwOSBDMTUzLjg0Miw2Ni40NDMgMTU4LjE2Myw1OC45ODcgMTU4LjE2Myw1Mi44OTQgQzE1OC4xNjMsNTAuOTY3IDE1Ny43MjEsNDkuMzMyIDE1Ni44ODQsNDguMTY4IEMxNTYuODE4LDQ4LjA3NiAxNTYuODI4LDQ3Ljk0OCAxNTYuOTA4LDQ3Ljg2NyBDMTU2Ljk4OCw0Ny43ODYgMTU3LjExNCw0Ny43NzQgMTU3LjIwOCw0Ny44NCBDMTU4Ljg3OCw0OS4wMTIgMTU5Ljc5OCw1MS4yMiAxNTkuNzk4LDU0LjA1OSBDMTU5Ljc5OCw2MC4zMDEgMTU1LjM3Myw2OC4wNDYgMTQ5LjkzMyw3MS4xODYgQzE0OC4zNiw3Mi4wOTQgMTQ2Ljg1LDcyLjY2NyAxNDUuNDQ1LDcyLjY2NyBMMTQ1LjQ0NSw3Mi42NjcgWiBNMTQyLjQ3Niw3MSBDMTQzLjI5LDcxLjY1MSAxNDQuMjk2LDcyLjAwMiAxNDUuNDQ1LDcyLjAwMiBDMTQ2Ljc2Nyw3Mi4wMDIgMTQ4LjE5OCw3MS41NSAxNDkuNyw3MC42ODIgQzE1NS4wMSw2Ny42MTcgMTU5LjMzMSw2MC4xNTkgMTU5LjMzMSw1NC4wNjUgQzE1OS4zMzEsNTIuMDg1IDE1OC44NjgsNTAuNDM1IDE1OC4wMDYsNDkuMjcyIEMxNTguNDE3LDUwLjMwNyAxNTguNjMsNTEuNTMyIDE1OC42Myw1Mi44OTIgQzE1OC42Myw1OS4xMzQgMTU0LjIwNSw2Ni43NjcgMTQ4Ljc2NSw2OS45MDcgQzE0Ny4xOTIsNzAuODE2IDE0NS42ODEsNzEuMjgzIDE0NC4yNzYsNzEuMjgzIEMxNDMuNjM0LDcxLjI4MyAxNDMuMDMzLDcxLjE5MiAxNDIuNDc2LDcxIEwxNDIuNDc2LDcxIFoiIGlkPSJGaWxsLTMzIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0OC42NDgsNjkuNzA0IEMxNTQuMDMyLDY2LjU5NiAxNTguMzk2LDU5LjA2OCAxNTguMzk2LDUyLjg5MSBDMTU4LjM5Niw1MC44MzkgMTU3LjkxMyw0OS4xOTggMTU3LjA3NCw0OC4wMyBDMTU1LjI4OSw0Ni43NzggMTUyLjY5OSw0Ni44MzYgMTQ5LjgxNiw0OC41MDEgQzE0NC40MzMsNTEuNjA5IDE0MC4wNjgsNTkuMTM3IDE0MC4wNjgsNjUuMzE0IEMxNDAuMDY4LDY3LjM2NSAxNDAuNTUyLDY5LjAwNiAxNDEuMzkxLDcwLjE3NCBDMTQzLjE3Niw3MS40MjcgMTQ1Ljc2NSw3MS4zNjkgMTQ4LjY0OCw2OS43MDQiIGlkPSJGaWxsLTM0IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0NC4yNzYsNzEuMjc2IEwxNDQuMjc2LDcxLjI3NiBDMTQzLjEzMyw3MS4yNzYgMTQyLjExOCw3MC45NjkgMTQxLjI1Nyw3MC4zNjUgQzE0MS4yMzYsNzAuMzUxIDE0MS4yMTcsNzAuMzMyIDE0MS4yMDIsNzAuMzExIEMxNDAuMzA3LDY5LjA2NyAxMzkuODM1LDY3LjMzOSAxMzkuODM1LDY1LjMxNCBDMTM5LjgzNSw1OS4wNzMgMTQ0LjI2LDUxLjQzOSAxNDkuNyw0OC4yOTggQzE1MS4yNzMsNDcuMzkgMTUyLjc4NCw0Ni45MjkgMTU0LjE4OSw0Ni45MjkgQzE1NS4zMzIsNDYuOTI5IDE1Ni4zNDcsNDcuMjM2IDE1Ny4yMDgsNDcuODM5IEMxNTcuMjI5LDQ3Ljg1NCAxNTcuMjQ4LDQ3Ljg3MyAxNTcuMjYzLDQ3Ljg5NCBDMTU4LjE1Nyw0OS4xMzggMTU4LjYzLDUwLjg2NSAxNTguNjMsNTIuODkxIEMxNTguNjMsNTkuMTMyIDE1NC4yMDUsNjYuNzY2IDE0OC43NjUsNjkuOTA3IEMxNDcuMTkyLDcwLjgxNSAxNDUuNjgxLDcxLjI3NiAxNDQuMjc2LDcxLjI3NiBMMTQ0LjI3Niw3MS4yNzYgWiBNMTQxLjU1OCw3MC4xMDQgQzE0Mi4zMzEsNzAuNjM3IDE0My4yNDUsNzEuMDA1IDE0NC4yNzYsNzEuMDA1IEMxNDUuNTk4LDcxLjAwNSAxNDcuMDMsNzAuNDY3IDE0OC41MzIsNjkuNiBDMTUzLjg0Miw2Ni41MzQgMTU4LjE2Myw1OS4wMzMgMTU4LjE2Myw1Mi45MzkgQzE1OC4xNjMsNTEuMDMxIDE1Ny43MjksNDkuMzg1IDE1Ni45MDcsNDguMjIzIEMxNTYuMTMzLDQ3LjY5MSAxNTUuMjE5LDQ3LjQwOSAxNTQuMTg5LDQ3LjQwOSBDMTUyLjg2Nyw0Ny40MDkgMTUxLjQzNSw0Ny44NDIgMTQ5LjkzMyw0OC43MDkgQzE0NC42MjMsNTEuNzc1IDE0MC4zMDIsNTkuMjczIDE0MC4zMDIsNjUuMzY2IEMxNDAuMzAyLDY3LjI3NiAxNDAuNzM2LDY4Ljk0MiAxNDEuNTU4LDcwLjEwNCBMMTQxLjU1OCw3MC4xMDQgWiIgaWQ9IkZpbGwtMzUiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTUwLjcyLDY1LjM2MSBMMTUwLjM1Nyw2NS4wNjYgQzE1MS4xNDcsNjQuMDkyIDE1MS44NjksNjMuMDQgMTUyLjUwNSw2MS45MzggQzE1My4zMTMsNjAuNTM5IDE1My45NzgsNTkuMDY3IDE1NC40ODIsNTcuNTYzIEwxNTQuOTI1LDU3LjcxMiBDMTU0LjQxMiw1OS4yNDUgMTUzLjczMyw2MC43NDUgMTUyLjkxLDYyLjE3MiBDMTUyLjI2Miw2My4yOTUgMTUxLjUyNSw2NC4zNjggMTUwLjcyLDY1LjM2MSIgaWQ9IkZpbGwtMzYiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTE1LjkxNyw4NC41MTQgTDExNS41NTQsODQuMjIgQzExNi4zNDQsODMuMjQ1IDExNy4wNjYsODIuMTk0IDExNy43MDIsODEuMDkyIEMxMTguNTEsNzkuNjkyIDExOS4xNzUsNzguMjIgMTE5LjY3OCw3Ni43MTcgTDEyMC4xMjEsNzYuODY1IEMxMTkuNjA4LDc4LjM5OCAxMTguOTMsNzkuODk5IDExOC4xMDYsODEuMzI2IEMxMTcuNDU4LDgyLjQ0OCAxMTYuNzIyLDgzLjUyMSAxMTUuOTE3LDg0LjUxNCIgaWQ9IkZpbGwtMzciIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTE0LDEzMC40NzYgTDExNCwxMzAuMDA4IEwxMTQsNzYuMDUyIEwxMTQsNzUuNTg0IEwxMTQsNzYuMDUyIEwxMTQsMTMwLjAwOCBMMTE0LDEzMC40NzYiIGlkPSJGaWxsLTM4IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8ZyBpZD0iSW1wb3J0ZWQtTGF5ZXJzLUNvcHkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDYyLjAwMDAwMCwgMC4wMDAwMDApIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTkuODIyLDM3LjQ3NCBDMTkuODM5LDM3LjMzOSAxOS43NDcsMzcuMTk0IDE5LjU1NSwzNy4wODIgQzE5LjIyOCwzNi44OTQgMTguNzI5LDM2Ljg3MiAxOC40NDYsMzcuMDM3IEwxMi40MzQsNDAuNTA4IEMxMi4zMDMsNDAuNTg0IDEyLjI0LDQwLjY4NiAxMi4yNDMsNDAuNzkzIEMxMi4yNDUsNDAuOTI1IDEyLjI0NSw0MS4yNTQgMTIuMjQ1LDQxLjM3MSBMMTIuMjQ1LDQxLjQxNCBMMTIuMjM4LDQxLjU0MiBDOC4xNDgsNDMuODg3IDUuNjQ3LDQ1LjMyMSA1LjY0Nyw0NS4zMjEgQzUuNjQ2LDQ1LjMyMSAzLjU3LDQ2LjM2NyAyLjg2LDUwLjUxMyBDMi44Niw1MC41MTMgMS45NDgsNTcuNDc0IDEuOTYyLDcwLjI1OCBDMS45NzcsODIuODI4IDIuNTY4LDg3LjMyOCAzLjEyOSw5MS42MDkgQzMuMzQ5LDkzLjI5MyA2LjEzLDkzLjczNCA2LjEzLDkzLjczNCBDNi40NjEsOTMuNzc0IDYuODI4LDkzLjcwNyA3LjIxLDkzLjQ4NiBMODIuNDgzLDQ5LjkzNSBDODQuMjkxLDQ4Ljg2NiA4NS4xNSw0Ni4yMTYgODUuNTM5LDQzLjY1MSBDODYuNzUyLDM1LjY2MSA4Ny4yMTQsMTAuNjczIDg1LjI2NCwzLjc3MyBDODUuMDY4LDMuMDggODQuNzU0LDIuNjkgODQuMzk2LDIuNDkxIEw4Mi4zMSwxLjcwMSBDODEuNTgzLDEuNzI5IDgwLjg5NCwyLjE2OCA4MC43NzYsMi4yMzYgQzgwLjYzNiwyLjMxNyA0MS44MDcsMjQuNTg1IDIwLjAzMiwzNy4wNzIgTDE5LjgyMiwzNy40NzQiIGlkPSJGaWxsLTEiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNODIuMzExLDEuNzAxIEw4NC4zOTYsMi40OTEgQzg0Ljc1NCwyLjY5IDg1LjA2OCwzLjA4IDg1LjI2NCwzLjc3MyBDODcuMjEzLDEwLjY3MyA4Ni43NTEsMzUuNjYgODUuNTM5LDQzLjY1MSBDODUuMTQ5LDQ2LjIxNiA4NC4yOSw0OC44NjYgODIuNDgzLDQ5LjkzNSBMNy4yMSw5My40ODYgQzYuODk3LDkzLjY2NyA2LjU5NSw5My43NDQgNi4zMTQsOTMuNzQ0IEw2LjEzMSw5My43MzMgQzYuMTMxLDkzLjczNCAzLjM0OSw5My4yOTMgMy4xMjgsOTEuNjA5IEMyLjU2OCw4Ny4zMjcgMS45NzcsODIuODI4IDEuOTYzLDcwLjI1OCBDMS45NDgsNTcuNDc0IDIuODYsNTAuNTEzIDIuODYsNTAuNTEzIEMzLjU3LDQ2LjM2NyA1LjY0Nyw0NS4zMjEgNS42NDcsNDUuMzIxIEM1LjY0Nyw0NS4zMjEgOC4xNDgsNDMuODg3IDEyLjIzOCw0MS41NDIgTDEyLjI0NSw0MS40MTQgTDEyLjI0NSw0MS4zNzEgQzEyLjI0NSw0MS4yNTQgMTIuMjQ1LDQwLjkyNSAxMi4yNDMsNDAuNzkzIEMxMi4yNCw0MC42ODYgMTIuMzAyLDQwLjU4MyAxMi40MzQsNDAuNTA4IEwxOC40NDYsMzcuMDM2IEMxOC41NzQsMzYuOTYyIDE4Ljc0NiwzNi45MjYgMTguOTI3LDM2LjkyNiBDMTkuMTQ1LDM2LjkyNiAxOS4zNzYsMzYuOTc5IDE5LjU1NCwzNy4wODIgQzE5Ljc0NywzNy4xOTQgMTkuODM5LDM3LjM0IDE5LjgyMiwzNy40NzQgTDIwLjAzMywzNy4wNzIgQzQxLjgwNiwyNC41ODUgODAuNjM2LDIuMzE4IDgwLjc3NywyLjIzNiBDODAuODk0LDIuMTY4IDgxLjU4MywxLjcyOSA4Mi4zMTEsMS43MDEgTTgyLjMxMSwwLjcwNCBMODIuMjcyLDAuNzA1IEM4MS42NTQsMC43MjggODAuOTg5LDAuOTQ5IDgwLjI5OCwxLjM2MSBMODAuMjc3LDEuMzczIEM4MC4xMjksMS40NTggNTkuNzY4LDEzLjEzNSAxOS43NTgsMzYuMDc5IEMxOS41LDM1Ljk4MSAxOS4yMTQsMzUuOTI5IDE4LjkyNywzNS45MjkgQzE4LjU2MiwzNS45MjkgMTguMjIzLDM2LjAxMyAxNy45NDcsMzYuMTczIEwxMS45MzUsMzkuNjQ0IEMxMS40OTMsMzkuODk5IDExLjIzNiw0MC4zMzQgMTEuMjQ2LDQwLjgxIEwxMS4yNDcsNDAuOTYgTDUuMTY3LDQ0LjQ0NyBDNC43OTQsNDQuNjQ2IDIuNjI1LDQ1Ljk3OCAxLjg3Nyw1MC4zNDUgTDEuODcxLDUwLjM4NCBDMS44NjIsNTAuNDU0IDAuOTUxLDU3LjU1NyAwLjk2NSw3MC4yNTkgQzAuOTc5LDgyLjg3OSAxLjU2OCw4Ny4zNzUgMi4xMzcsOTEuNzI0IEwyLjEzOSw5MS43MzkgQzIuNDQ3LDk0LjA5NCA1LjYxNCw5NC42NjIgNS45NzUsOTQuNzE5IEw2LjAwOSw5NC43MjMgQzYuMTEsOTQuNzM2IDYuMjEzLDk0Ljc0MiA2LjMxNCw5NC43NDIgQzYuNzksOTQuNzQyIDcuMjYsOTQuNjEgNy43MSw5NC4zNSBMODIuOTgzLDUwLjc5OCBDODQuNzk0LDQ5LjcyNyA4NS45ODIsNDcuMzc1IDg2LjUyNSw0My44MDEgQzg3LjcxMSwzNS45ODcgODguMjU5LDEwLjcwNSA4Ni4yMjQsMy41MDIgQzg1Ljk3MSwyLjYwOSA4NS41MiwxLjk3NSA4NC44ODEsMS42MiBMODQuNzQ5LDEuNTU4IEw4Mi42NjQsMC43NjkgQzgyLjU1MSwwLjcyNSA4Mi40MzEsMC43MDQgODIuMzExLDAuNzA0IiBpZD0iRmlsbC0yIiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTY2LjI2NywxMS41NjUgTDY3Ljc2MiwxMS45OTkgTDExLjQyMyw0NC4zMjUiIGlkPSJGaWxsLTMiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTIuMjAyLDkwLjU0NSBDMTIuMDI5LDkwLjU0NSAxMS44NjIsOTAuNDU1IDExLjc2OSw5MC4yOTUgQzExLjYzMiw5MC4wNTcgMTEuNzEzLDg5Ljc1MiAxMS45NTIsODkuNjE0IEwzMC4zODksNzguOTY5IEMzMC42MjgsNzguODMxIDMwLjkzMyw3OC45MTMgMzEuMDcxLDc5LjE1MiBDMzEuMjA4LDc5LjM5IDMxLjEyNyw3OS42OTYgMzAuODg4LDc5LjgzMyBMMTIuNDUxLDkwLjQ3OCBMMTIuMjAyLDkwLjU0NSIgaWQ9IkZpbGwtNCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMy43NjQsNDIuNjU0IEwxMy42NTYsNDIuNTkyIEwxMy43MDIsNDIuNDIxIEwxOC44MzcsMzkuNDU3IEwxOS4wMDcsMzkuNTAyIEwxOC45NjIsMzkuNjczIEwxMy44MjcsNDIuNjM3IEwxMy43NjQsNDIuNjU0IiBpZD0iRmlsbC01IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTguNTIsOTAuMzc1IEw4LjUyLDQ2LjQyMSBMOC41ODMsNDYuMzg1IEw3NS44NCw3LjU1NCBMNzUuODQsNTEuNTA4IEw3NS43NzgsNTEuNTQ0IEw4LjUyLDkwLjM3NSBMOC41Miw5MC4zNzUgWiBNOC43Nyw0Ni41NjQgTDguNzcsODkuOTQ0IEw3NS41OTEsNTEuMzY1IEw3NS41OTEsNy45ODUgTDguNzcsNDYuNTY0IEw4Ljc3LDQ2LjU2NCBaIiBpZD0iRmlsbC02IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTI0Ljk4Niw4My4xODIgQzI0Ljc1Niw4My4zMzEgMjQuMzc0LDgzLjU2NiAyNC4xMzcsODMuNzA1IEwxMi42MzIsOTAuNDA2IEMxMi4zOTUsOTAuNTQ1IDEyLjQyNiw5MC42NTggMTIuNyw5MC42NTggTDEzLjI2NSw5MC42NTggQzEzLjU0LDkwLjY1OCAxMy45NTgsOTAuNTQ1IDE0LjE5NSw5MC40MDYgTDI1LjcsODMuNzA1IEMyNS45MzcsODMuNTY2IDI2LjEyOCw4My40NTIgMjYuMTI1LDgzLjQ0OSBDMjYuMTIyLDgzLjQ0NyAyNi4xMTksODMuMjIgMjYuMTE5LDgyLjk0NiBDMjYuMTE5LDgyLjY3MiAyNS45MzEsODIuNTY5IDI1LjcwMSw4Mi43MTkgTDI0Ljk4Niw4My4xODIiIGlkPSJGaWxsLTciIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTMuMjY2LDkwLjc4MiBMMTIuNyw5MC43ODIgQzEyLjUsOTAuNzgyIDEyLjM4NCw5MC43MjYgMTIuMzU0LDkwLjYxNiBDMTIuMzI0LDkwLjUwNiAxMi4zOTcsOTAuMzk5IDEyLjU2OSw5MC4yOTkgTDI0LjA3NCw4My41OTcgQzI0LjMxLDgzLjQ1OSAyNC42ODksODMuMjI2IDI0LjkxOCw4My4wNzggTDI1LjYzMyw4Mi42MTQgQzI1LjcyMyw4Mi41NTUgMjUuODEzLDgyLjUyNSAyNS44OTksODIuNTI1IEMyNi4wNzEsODIuNTI1IDI2LjI0NCw4Mi42NTUgMjYuMjQ0LDgyLjk0NiBDMjYuMjQ0LDgzLjE2IDI2LjI0NSw4My4zMDkgMjYuMjQ3LDgzLjM4MyBMMjYuMjUzLDgzLjM4NyBMMjYuMjQ5LDgzLjQ1NiBDMjYuMjQ2LDgzLjUzMSAyNi4yNDYsODMuNTMxIDI1Ljc2Myw4My44MTIgTDE0LjI1OCw5MC41MTQgQzE0LDkwLjY2NSAxMy41NjQsOTAuNzgyIDEzLjI2Niw5MC43ODIgTDEzLjI2Niw5MC43ODIgWiBNMTIuNjY2LDkwLjUzMiBMMTIuNyw5MC41MzMgTDEzLjI2Niw5MC41MzMgQzEzLjUxOCw5MC41MzMgMTMuOTE1LDkwLjQyNSAxNC4xMzIsOTAuMjk5IEwyNS42MzcsODMuNTk3IEMyNS44MDUsODMuNDk5IDI1LjkzMSw4My40MjQgMjUuOTk4LDgzLjM4MyBDMjUuOTk0LDgzLjI5OSAyNS45OTQsODMuMTY1IDI1Ljk5NCw4Mi45NDYgTDI1Ljg5OSw4Mi43NzUgTDI1Ljc2OCw4Mi44MjQgTDI1LjA1NCw4My4yODcgQzI0LjgyMiw4My40MzcgMjQuNDM4LDgzLjY3MyAyNC4yLDgzLjgxMiBMMTIuNjk1LDkwLjUxNCBMMTIuNjY2LDkwLjUzMiBMMTIuNjY2LDkwLjUzMiBaIiBpZD0iRmlsbC04IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEzLjI2Niw4OS44NzEgTDEyLjcsODkuODcxIEMxMi41LDg5Ljg3MSAxMi4zODQsODkuODE1IDEyLjM1NCw4OS43MDUgQzEyLjMyNCw4OS41OTUgMTIuMzk3LDg5LjQ4OCAxMi41NjksODkuMzg4IEwyNC4wNzQsODIuNjg2IEMyNC4zMzIsODIuNTM1IDI0Ljc2OCw4Mi40MTggMjUuMDY3LDgyLjQxOCBMMjUuNjMyLDgyLjQxOCBDMjUuODMyLDgyLjQxOCAyNS45NDgsODIuNDc0IDI1Ljk3OCw4Mi41ODQgQzI2LjAwOCw4Mi42OTQgMjUuOTM1LDgyLjgwMSAyNS43NjMsODIuOTAxIEwxNC4yNTgsODkuNjAzIEMxNCw4OS43NTQgMTMuNTY0LDg5Ljg3MSAxMy4yNjYsODkuODcxIEwxMy4yNjYsODkuODcxIFogTTEyLjY2Niw4OS42MjEgTDEyLjcsODkuNjIyIEwxMy4yNjYsODkuNjIyIEMxMy41MTgsODkuNjIyIDEzLjkxNSw4OS41MTUgMTQuMTMyLDg5LjM4OCBMMjUuNjM3LDgyLjY4NiBMMjUuNjY3LDgyLjY2OCBMMjUuNjMyLDgyLjY2NyBMMjUuMDY3LDgyLjY2NyBDMjQuODE1LDgyLjY2NyAyNC40MTgsODIuNzc1IDI0LjIsODIuOTAxIEwxMi42OTUsODkuNjAzIEwxMi42NjYsODkuNjIxIEwxMi42NjYsODkuNjIxIFoiIGlkPSJGaWxsLTkiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTIuMzcsOTAuODAxIEwxMi4zNyw4OS41NTQgTDEyLjM3LDkwLjgwMSIgaWQ9IkZpbGwtMTAiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNi4xMyw5My45MDEgQzUuMzc5LDkzLjgwOCA0LjgxNiw5My4xNjQgNC42OTEsOTIuNTI1IEMzLjg2LDg4LjI4NyAzLjU0LDgzLjc0MyAzLjUyNiw3MS4xNzMgQzMuNTExLDU4LjM4OSA0LjQyMyw1MS40MjggNC40MjMsNTEuNDI4IEM1LjEzNCw0Ny4yODIgNy4yMSw0Ni4yMzYgNy4yMSw0Ni4yMzYgQzcuMjEsNDYuMjM2IDgxLjY2NywzLjI1IDgyLjA2OSwzLjAxNyBDODIuMjkyLDIuODg4IDg0LjU1NiwxLjQzMyA4NS4yNjQsMy45NCBDODcuMjE0LDEwLjg0IDg2Ljc1MiwzNS44MjcgODUuNTM5LDQzLjgxOCBDODUuMTUsNDYuMzgzIDg0LjI5MSw0OS4wMzMgODIuNDgzLDUwLjEwMSBMNy4yMSw5My42NTMgQzYuODI4LDkzLjg3NCA2LjQ2MSw5My45NDEgNi4xMyw5My45MDEgQzYuMTMsOTMuOTAxIDMuMzQ5LDkzLjQ2IDMuMTI5LDkxLjc3NiBDMi41NjgsODcuNDk1IDEuOTc3LDgyLjk5NSAxLjk2Miw3MC40MjUgQzEuOTQ4LDU3LjY0MSAyLjg2LDUwLjY4IDIuODYsNTAuNjggQzMuNTcsNDYuNTM0IDUuNjQ3LDQ1LjQ4OSA1LjY0Nyw0NS40ODkgQzUuNjQ2LDQ1LjQ4OSA4LjA2NSw0NC4wOTIgMTIuMjQ1LDQxLjY3OSBMMTMuMTE2LDQxLjU2IEwxOS43MTUsMzcuNzMgTDE5Ljc2MSwzNy4yNjkgTDYuMTMsOTMuOTAxIiBpZD0iRmlsbC0xMSIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02LjMxNyw5NC4xNjEgTDYuMTAyLDk0LjE0OCBMNi4xMDEsOTQuMTQ4IEw1Ljg1Nyw5NC4xMDEgQzUuMTM4LDkzLjk0NSAzLjA4NSw5My4zNjUgMi44ODEsOTEuODA5IEMyLjMxMyw4Ny40NjkgMS43MjcsODIuOTk2IDEuNzEzLDcwLjQyNSBDMS42OTksNTcuNzcxIDIuNjA0LDUwLjcxOCAyLjYxMyw1MC42NDggQzMuMzM4LDQ2LjQxNyA1LjQ0NSw0NS4zMSA1LjUzNSw0NS4yNjYgTDEyLjE2Myw0MS40MzkgTDEzLjAzMyw0MS4zMiBMMTkuNDc5LDM3LjU3OCBMMTkuNTEzLDM3LjI0NCBDMTkuNTI2LDM3LjEwNyAxOS42NDcsMzcuMDA4IDE5Ljc4NiwzNy4wMjEgQzE5LjkyMiwzNy4wMzQgMjAuMDIzLDM3LjE1NiAyMC4wMDksMzcuMjkzIEwxOS45NSwzNy44ODIgTDEzLjE5OCw0MS44MDEgTDEyLjMyOCw0MS45MTkgTDUuNzcyLDQ1LjcwNCBDNS43NDEsNDUuNzIgMy43ODIsNDYuNzcyIDMuMTA2LDUwLjcyMiBDMy4wOTksNTAuNzgyIDIuMTk4LDU3LjgwOCAyLjIxMiw3MC40MjQgQzIuMjI2LDgyLjk2MyAyLjgwOSw4Ny40MiAzLjM3Myw5MS43MjkgQzMuNDY0LDkyLjQyIDQuMDYyLDkyLjg4MyA0LjY4Miw5My4xODEgQzQuNTY2LDkyLjk4NCA0LjQ4Niw5Mi43NzYgNC40NDYsOTIuNTcyIEMzLjY2NSw4OC41ODggMy4yOTEsODQuMzcgMy4yNzYsNzEuMTczIEMzLjI2Miw1OC41MiA0LjE2Nyw1MS40NjYgNC4xNzYsNTEuMzk2IEM0LjkwMSw0Ny4xNjUgNy4wMDgsNDYuMDU5IDcuMDk4LDQ2LjAxNCBDNy4wOTQsNDYuMDE1IDgxLjU0MiwzLjAzNCA4MS45NDQsMi44MDIgTDgxLjk3MiwyLjc4NSBDODIuODc2LDIuMjQ3IDgzLjY5MiwyLjA5NyA4NC4zMzIsMi4zNTIgQzg0Ljg4NywyLjU3MyA4NS4yODEsMy4wODUgODUuNTA0LDMuODcyIEM4Ny41MTgsMTEgODYuOTY0LDM2LjA5MSA4NS43ODUsNDMuODU1IEM4NS4yNzgsNDcuMTk2IDg0LjIxLDQ5LjM3IDgyLjYxLDUwLjMxNyBMNy4zMzUsOTMuODY5IEM2Ljk5OSw5NC4wNjMgNi42NTgsOTQuMTYxIDYuMzE3LDk0LjE2MSBMNi4zMTcsOTQuMTYxIFogTTYuMTcsOTMuNjU0IEM2LjQ2Myw5My42OSA2Ljc3NCw5My42MTcgNy4wODUsOTMuNDM3IEw4Mi4zNTgsNDkuODg2IEM4NC4xODEsNDguODA4IDg0Ljk2LDQ1Ljk3MSA4NS4yOTIsNDMuNzggQzg2LjQ2NiwzNi4wNDkgODcuMDIzLDExLjA4NSA4NS4wMjQsNC4wMDggQzg0Ljg0NiwzLjM3NyA4NC41NTEsMi45NzYgODQuMTQ4LDIuODE2IEM4My42NjQsMi42MjMgODIuOTgyLDIuNzY0IDgyLjIyNywzLjIxMyBMODIuMTkzLDMuMjM0IEM4MS43OTEsMy40NjYgNy4zMzUsNDYuNDUyIDcuMzM1LDQ2LjQ1MiBDNy4zMDQsNDYuNDY5IDUuMzQ2LDQ3LjUyMSA0LjY2OSw1MS40NzEgQzQuNjYyLDUxLjUzIDMuNzYxLDU4LjU1NiAzLjc3NSw3MS4xNzMgQzMuNzksODQuMzI4IDQuMTYxLDg4LjUyNCA0LjkzNiw5Mi40NzYgQzUuMDI2LDkyLjkzNyA1LjQxMiw5My40NTkgNS45NzMsOTMuNjE1IEM2LjA4Nyw5My42NCA2LjE1OCw5My42NTIgNi4xNjksOTMuNjU0IEw2LjE3LDkzLjY1NCBMNi4xNyw5My42NTQgWiIgaWQ9IkZpbGwtMTIiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNy4zMTcsNjguOTgyIEM3LjgwNiw2OC43MDEgOC4yMDIsNjguOTI2IDguMjAyLDY5LjQ4NyBDOC4yMDIsNzAuMDQ3IDcuODA2LDcwLjczIDcuMzE3LDcxLjAxMiBDNi44MjksNzEuMjk0IDYuNDMzLDcxLjA2OSA2LjQzMyw3MC41MDggQzYuNDMzLDY5Ljk0OCA2LjgyOSw2OS4yNjUgNy4zMTcsNjguOTgyIiBpZD0iRmlsbC0xMyIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02LjkyLDcxLjEzMyBDNi42MzEsNzEuMTMzIDYuNDMzLDcwLjkwNSA2LjQzMyw3MC41MDggQzYuNDMzLDY5Ljk0OCA2LjgyOSw2OS4yNjUgNy4zMTcsNjguOTgyIEM3LjQ2LDY4LjkgNy41OTUsNjguODYxIDcuNzE0LDY4Ljg2MSBDOC4wMDMsNjguODYxIDguMjAyLDY5LjA5IDguMjAyLDY5LjQ4NyBDOC4yMDIsNzAuMDQ3IDcuODA2LDcwLjczIDcuMzE3LDcxLjAxMiBDNy4xNzQsNzEuMDk0IDcuMDM5LDcxLjEzMyA2LjkyLDcxLjEzMyBNNy43MTQsNjguNjc0IEM3LjU1Nyw2OC42NzQgNy4zOTIsNjguNzIzIDcuMjI0LDY4LjgyMSBDNi42NzYsNjkuMTM4IDYuMjQ2LDY5Ljg3OSA2LjI0Niw3MC41MDggQzYuMjQ2LDcwLjk5NCA2LjUxNyw3MS4zMiA2LjkyLDcxLjMyIEM3LjA3OCw3MS4zMiA3LjI0Myw3MS4yNzEgNy40MTEsNzEuMTc0IEM3Ljk1OSw3MC44NTcgOC4zODksNzAuMTE3IDguMzg5LDY5LjQ4NyBDOC4zODksNjkuMDAxIDguMTE3LDY4LjY3NCA3LjcxNCw2OC42NzQiIGlkPSJGaWxsLTE0IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTYuOTIsNzAuOTQ3IEM2LjY0OSw3MC45NDcgNi42MjEsNzAuNjQgNi42MjEsNzAuNTA4IEM2LjYyMSw3MC4wMTcgNi45ODIsNjkuMzkyIDcuNDExLDY5LjE0NSBDNy41MjEsNjkuMDgyIDcuNjI1LDY5LjA0OSA3LjcxNCw2OS4wNDkgQzcuOTg2LDY5LjA0OSA4LjAxNSw2OS4zNTUgOC4wMTUsNjkuNDg3IEM4LjAxNSw2OS45NzggNy42NTIsNzAuNjAzIDcuMjI0LDcwLjg1MSBDNy4xMTUsNzAuOTE0IDcuMDEsNzAuOTQ3IDYuOTIsNzAuOTQ3IE03LjcxNCw2OC44NjEgQzcuNTk1LDY4Ljg2MSA3LjQ2LDY4LjkgNy4zMTcsNjguOTgyIEM2LjgyOSw2OS4yNjUgNi40MzMsNjkuOTQ4IDYuNDMzLDcwLjUwOCBDNi40MzMsNzAuOTA1IDYuNjMxLDcxLjEzMyA2LjkyLDcxLjEzMyBDNy4wMzksNzEuMTMzIDcuMTc0LDcxLjA5NCA3LjMxNyw3MS4wMTIgQzcuODA2LDcwLjczIDguMjAyLDcwLjA0NyA4LjIwMiw2OS40ODcgQzguMjAyLDY5LjA5IDguMDAzLDY4Ljg2MSA3LjcxNCw2OC44NjEiIGlkPSJGaWxsLTE1IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTcuNDQ0LDg1LjM1IEM3LjcwOCw4NS4xOTggNy45MjEsODUuMzE5IDcuOTIxLDg1LjYyMiBDNy45MjEsODUuOTI1IDcuNzA4LDg2LjI5MiA3LjQ0NCw4Ni40NDQgQzcuMTgxLDg2LjU5NyA2Ljk2Nyw4Ni40NzUgNi45NjcsODYuMTczIEM2Ljk2Nyw4NS44NzEgNy4xODEsODUuNTAyIDcuNDQ0LDg1LjM1IiBpZD0iRmlsbC0xNiIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik03LjIzLDg2LjUxIEM3LjA3NCw4Ni41MSA2Ljk2Nyw4Ni4zODcgNi45NjcsODYuMTczIEM2Ljk2Nyw4NS44NzEgNy4xODEsODUuNTAyIDcuNDQ0LDg1LjM1IEM3LjUyMSw4NS4zMDUgNy41OTQsODUuMjg0IDcuNjU4LDg1LjI4NCBDNy44MTQsODUuMjg0IDcuOTIxLDg1LjQwOCA3LjkyMSw4NS42MjIgQzcuOTIxLDg1LjkyNSA3LjcwOCw4Ni4yOTIgNy40NDQsODYuNDQ0IEM3LjM2Nyw4Ni40ODkgNy4yOTQsODYuNTEgNy4yMyw4Ni41MSBNNy42NTgsODUuMDk4IEM3LjU1OCw4NS4wOTggNy40NTUsODUuMTI3IDcuMzUxLDg1LjE4OCBDNy4wMzEsODUuMzczIDYuNzgxLDg1LjgwNiA2Ljc4MSw4Ni4xNzMgQzYuNzgxLDg2LjQ4MiA2Ljk2Niw4Ni42OTcgNy4yMyw4Ni42OTcgQzcuMzMsODYuNjk3IDcuNDMzLDg2LjY2NiA3LjUzOCw4Ni42MDcgQzcuODU4LDg2LjQyMiA4LjEwOCw4NS45ODkgOC4xMDgsODUuNjIyIEM4LjEwOCw4NS4zMTMgNy45MjMsODUuMDk4IDcuNjU4LDg1LjA5OCIgaWQ9IkZpbGwtMTciIGZpbGw9IiM4MDk3QTIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNy4yMyw4Ni4zMjIgTDcuMTU0LDg2LjE3MyBDNy4xNTQsODUuOTM4IDcuMzMzLDg1LjYyOSA3LjUzOCw4NS41MTIgTDcuNjU4LDg1LjQ3MSBMNy43MzQsODUuNjIyIEM3LjczNCw4NS44NTYgNy41NTUsODYuMTY0IDcuMzUxLDg2LjI4MiBMNy4yMyw4Ni4zMjIgTTcuNjU4LDg1LjI4NCBDNy41OTQsODUuMjg0IDcuNTIxLDg1LjMwNSA3LjQ0NCw4NS4zNSBDNy4xODEsODUuNTAyIDYuOTY3LDg1Ljg3MSA2Ljk2Nyw4Ni4xNzMgQzYuOTY3LDg2LjM4NyA3LjA3NCw4Ni41MSA3LjIzLDg2LjUxIEM3LjI5NCw4Ni41MSA3LjM2Nyw4Ni40ODkgNy40NDQsODYuNDQ0IEM3LjcwOCw4Ni4yOTIgNy45MjEsODUuOTI1IDcuOTIxLDg1LjYyMiBDNy45MjEsODUuNDA4IDcuODE0LDg1LjI4NCA3LjY1OCw4NS4yODQiIGlkPSJGaWxsLTE4IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTc3LjI3OCw3Ljc2OSBMNzcuMjc4LDUxLjQzNiBMMTAuMjA4LDkwLjE2IEwxMC4yMDgsNDYuNDkzIEw3Ny4yNzgsNy43NjkiIGlkPSJGaWxsLTE5IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEwLjA4Myw5MC4zNzUgTDEwLjA4Myw0Ni40MjEgTDEwLjE0Niw0Ni4zODUgTDc3LjQwMyw3LjU1NCBMNzcuNDAzLDUxLjUwOCBMNzcuMzQxLDUxLjU0NCBMMTAuMDgzLDkwLjM3NSBMMTAuMDgzLDkwLjM3NSBaIE0xMC4zMzMsNDYuNTY0IEwxMC4zMzMsODkuOTQ0IEw3Ny4xNTQsNTEuMzY1IEw3Ny4xNTQsNy45ODUgTDEwLjMzMyw0Ni41NjQgTDEwLjMzMyw0Ni41NjQgWiIgaWQ9IkZpbGwtMjAiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMjUuNzM3LDg4LjY0NyBMMTE4LjA5OCw5MS45ODEgTDExOC4wOTgsODQgTDEwNi42MzksODguNzEzIEwxMDYuNjM5LDk2Ljk4MiBMOTksMTAwLjMxNSBMMTEyLjM2OSwxMDMuOTYxIEwxMjUuNzM3LDg4LjY0NyIgaWQ9IkltcG9ydGVkLUxheWVycy1Db3B5LTIiIGZpbGw9IiM0NTVBNjQiIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+")};var B8="CardboardV1",U8="WEBVR_CARDBOARD_VIEWER";function Q8(){try{this.selectedKey=localStorage.getItem(U8)}catch(t){console.error("Failed to load viewer profile: %s",t)}this.selectedKey||(this.selectedKey=B8),this.dialog=this.Dui(bc.Viewers),this.root=null,this.Eui=[]}Q8.prototype.show=function(t){this.root=t,t.appendChild(this.dialog),this.dialog.querySelector("#"+this.selectedKey).checked=!0,this.dialog.style.display="block"},Q8.prototype.hide=function(){this.root&&this.root.contains(this.dialog)&&this.root.removeChild(this.dialog),this.dialog.style.display="none"},Q8.prototype.getCurrentViewer=function(){return bc.Viewers[this.selectedKey]},Q8.prototype.kui=function(){var t=this.dialog.querySelector("input[name=field]:checked");return t?t.id:null},Q8.prototype.onChange=function(t){this.Eui.push(t)},Q8.prototype.Lui=function(t){for(var i=0;i<this.Eui.length;i++)this.Eui[i](t)},Q8.prototype.xui=function(){if(this.selectedKey=this.kui(),this.selectedKey&&bc.Viewers[this.selectedKey]){this.Lui(bc.Viewers[this.selectedKey]);try{localStorage.setItem(U8,this.selectedKey)}catch(t){console.error("Failed to save viewer profile: %s",t)}this.hide()}else console.error("ViewerSelector.onSave_: this should never happen!")},Q8.prototype.Dui=function(t){var i=h.createElement("div");i.classList.add("webvr-polyfill-viewer-selector"),i.style.display="none";var e=h.createElement("div");(n=e.style).position="fixed",n.left=0,n.top=0,n.width="100%",n.height="100%",n.background="rgba(0, 0, 0, 0.3)",e.addEventListener("click",this.hide.bind(this));var s=h.createElement("div"),n=s.style;for(var r in n.boxSizing="border-box",n.position="fixed",n.top="24px",n.left="50%",n.marginLeft="-140px",n.width="280px",n.padding="24px",n.overflow="hidden",n.background="#fafafa",n.fontFamily="'Roboto', sans-serif",n.boxShadow="0px 5px 20px #666",s.appendChild(this.Cui("Select your viewer")),t)s.appendChild(this.jui(r,t[r].label));return s.appendChild(this.Oui("Save",this.xui.bind(this))),i.appendChild(e),i.appendChild(s),i},Q8.prototype.Cui=function(t){var i=h.createElement("h1"),e=i.style;return e.color="black",e.fontSize="20px",e.fontWeight="bold",e.marginTop=0,e.marginBottom="24px",i.innerHTML=t,i},Q8.prototype.jui=function(t,i){var e=h.createElement("div");e.style.marginTop="8px",e.style.color="black";var s=h.createElement("input");s.style.fontSize="30px",s.setAttribute("id",t),s.setAttribute("type","radio"),s.setAttribute("value",t),s.setAttribute("name","field");var n=h.createElement("label");return n.style.marginLeft="4px",n.setAttribute("for",t),n.innerHTML=i,e.appendChild(s),e.appendChild(n),e},Q8.prototype.Oui=function(t,i){var e=h.createElement("button");e.innerHTML=t;var s=e.style;return s.float="right",s.textTransform="uppercase",s.color="#1094f7",s.fontSize="14px",s.letterSpacing=0,s.border=0,s.background="none",s.marginTop="16px",e.addEventListener("click",i),e};void 0!==s||("undefined"!=typeof global?global:"undefined"!=typeof self&&self);var F8=function(t,i){return t(i={exports:{}},i.exports),i.exports}((function(t,i){var e;e=function(){return function(t){var i={};function e(s){if(i[s])return i[s].exports;var n=i[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,e),n.l=!0,n.exports}return e.m=t,e.c=i,e.d=function(t,i,s){e.o(t,i)||_.defineProperty(t,i,{configurable:!1,enumerable:!0,get:s})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return _.prototype.hasOwnProperty.call(t,i)},e.p="",e(e.s=0)}([function(t,i,e){var n=function(){function t(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),_.defineProperty(t,s.key,s)}}return function(i,e,s){return e&&t(i.prototype,e),s&&t(i,s),i}}(),r=e(1),o=void 0!==zl&&S((""+(/CPU.*OS ([0-9_]{3,4})[0-9_]{0,1}|(CPU like).*AppleWebKit.*Mobile/i.exec(zl.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))<10&&!s.MSStream,a=function(){function t(){!function(t,i){if(!(t instanceof i))throw new w("Cannot call a class as a function")}(this,t),o?this.noSleepTimer=null:(this.noSleepVideo=h.createElement("video"),this.noSleepVideo.setAttribute("playsinline",""),this.noSleepVideo.setAttribute("src",r),this.noSleepVideo.addEventListener("timeupdate",function(t){this.noSleepVideo.currentTime>.5&&(this.noSleepVideo.currentTime=x.random())}.bind(this)))}return n(t,[{key:"enable",value:function(){o?(this.disable(),this.noSleepTimer=s.setInterval((function(){s.location.href="/",s.setTimeout(s.stop,0)}),15e3)):this.noSleepVideo.play()}},{key:"disable",value:function(){o?this.noSleepTimer&&(s.clearInterval(this.noSleepTimer),this.noSleepTimer=null):this.noSleepVideo.pause()}}]),t}();t.exports=a},function(t,i,e){t.exports="data:video/mp4;base64,AAAAIGZ0eXBtcDQyAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAACKBtZGF0AAAC8wYF///v3EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDE0MiByMjQ3OSBkZDc5YTYxIC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxNCAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTEgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MToweDExMSBtZT1oZXggc3VibWU9MiBwc3k9MSBwc3lfcmQ9MS4wMDowLjAwIG1peGVkX3JlZj0wIG1lX3JhbmdlPTE2IGNocm9tYV9tZT0xIHRyZWxsaXM9MCA4eDhkY3Q9MCBjcW09MCBkZWFkem9uZT0yMSwxMSBmYXN0X3Bza2lwPTEgY2hyb21hX3FwX29mZnNldD0wIHRocmVhZHM9NiBsb29rYWhlYWRfdGhyZWFkcz0xIHNsaWNlZF90aHJlYWRzPTAgbnI9MCBkZWNpbWF0ZT0xIGludGVybGFjZWQ9MCBibHVyYXlfY29tcGF0PTAgY29uc3RyYWluZWRfaW50cmE9MCBiZnJhbWVzPTMgYl9weXJhbWlkPTIgYl9hZGFwdD0xIGJfYmlhcz0wIGRpcmVjdD0xIHdlaWdodGI9MSBvcGVuX2dvcD0wIHdlaWdodHA9MSBrZXlpbnQ9MzAwIGtleWludF9taW49MzAgc2NlbmVjdXQ9NDAgaW50cmFfcmVmcmVzaD0wIHJjX2xvb2thaGVhZD0xMCByYz1jcmYgbWJ0cmVlPTEgY3JmPTIwLjAgcWNvbXA9MC42MCBxcG1pbj0wIHFwbWF4PTY5IHFwc3RlcD00IHZidl9tYXhyYXRlPTIwMDAwIHZidl9idWZzaXplPTI1MDAwIGNyZl9tYXg9MC4wIG5hbF9ocmQ9bm9uZSBmaWxsZXI9MCBpcF9yYXRpbz0xLjQwIGFxPTE6MS4wMACAAAAAOWWIhAA3//p+C7v8tDDSTjf97w55i3SbRPO4ZY+hkjD5hbkAkL3zpJ6h/LR1CAABzgB1kqqzUorlhQAAAAxBmiQYhn/+qZYADLgAAAAJQZ5CQhX/AAj5IQADQGgcIQADQGgcAAAACQGeYUQn/wALKCEAA0BoHAAAAAkBnmNEJ/8ACykhAANAaBwhAANAaBwAAAANQZpoNExDP/6plgAMuSEAA0BoHAAAAAtBnoZFESwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBnqVEJ/8ACykhAANAaBwAAAAJAZ6nRCf/AAsoIQADQGgcIQADQGgcAAAADUGarDRMQz/+qZYADLghAANAaBwAAAALQZ7KRRUsK/8ACPkhAANAaBwAAAAJAZ7pRCf/AAsoIQADQGgcIQADQGgcAAAACQGe60Qn/wALKCEAA0BoHAAAAA1BmvA0TEM//qmWAAy5IQADQGgcIQADQGgcAAAAC0GfDkUVLCv/AAj5IQADQGgcAAAACQGfLUQn/wALKSEAA0BoHCEAA0BoHAAAAAkBny9EJ/8ACyghAANAaBwAAAANQZs0NExDP/6plgAMuCEAA0BoHAAAAAtBn1JFFSwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBn3FEJ/8ACyghAANAaBwAAAAJAZ9zRCf/AAsoIQADQGgcIQADQGgcAAAADUGbeDRMQz/+qZYADLkhAANAaBwAAAALQZ+WRRUsK/8ACPghAANAaBwhAANAaBwAAAAJAZ+1RCf/AAspIQADQGgcAAAACQGft0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bm7w0TEM//qmWAAy4IQADQGgcAAAAC0Gf2kUVLCv/AAj5IQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHAAAAAkBn/tEJ/8ACykhAANAaBwAAAANQZvgNExDP/6plgAMuSEAA0BoHCEAA0BoHAAAAAtBnh5FFSwr/wAI+CEAA0BoHAAAAAkBnj1EJ/8ACyghAANAaBwhAANAaBwAAAAJAZ4/RCf/AAspIQADQGgcAAAADUGaJDRMQz/+qZYADLghAANAaBwAAAALQZ5CRRUsK/8ACPkhAANAaBwhAANAaBwAAAAJAZ5hRCf/AAsoIQADQGgcAAAACQGeY0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bmmg0TEM//qmWAAy5IQADQGgcAAAAC0GehkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGepUQn/wALKSEAA0BoHAAAAAkBnqdEJ/8ACyghAANAaBwAAAANQZqsNExDP/6plgAMuCEAA0BoHCEAA0BoHAAAAAtBnspFFSwr/wAI+SEAA0BoHAAAAAkBnulEJ/8ACyghAANAaBwhAANAaBwAAAAJAZ7rRCf/AAsoIQADQGgcAAAADUGa8DRMQz/+qZYADLkhAANAaBwhAANAaBwAAAALQZ8ORRUsK/8ACPkhAANAaBwAAAAJAZ8tRCf/AAspIQADQGgcIQADQGgcAAAACQGfL0Qn/wALKCEAA0BoHAAAAA1BmzQ0TEM//qmWAAy4IQADQGgcAAAAC0GfUkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGfcUQn/wALKCEAA0BoHAAAAAkBn3NEJ/8ACyghAANAaBwhAANAaBwAAAANQZt4NExC//6plgAMuSEAA0BoHAAAAAtBn5ZFFSwr/wAI+CEAA0BoHCEAA0BoHAAAAAkBn7VEJ/8ACykhAANAaBwAAAAJAZ+3RCf/AAspIQADQGgcAAAADUGbuzRMQn/+nhAAYsAhAANAaBwhAANAaBwAAAAJQZ/aQhP/AAspIQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHAAACiFtb292AAAAbG12aGQAAAAA1YCCX9WAgl8AAAPoAAAH/AABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAGGlvZHMAAAAAEICAgAcAT////v7/AAAF+XRyYWsAAABcdGtoZAAAAAPVgIJf1YCCXwAAAAEAAAAAAAAH0AAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAygAAAMoAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAB9AAABdwAAEAAAAABXFtZGlhAAAAIG1kaGQAAAAA1YCCX9WAgl8AAV+QAAK/IFXEAAAAAAAtaGRscgAAAAAAAAAAdmlkZQAAAAAAAAAAAAAAAFZpZGVvSGFuZGxlcgAAAAUcbWluZgAAABR2bWhkAAAAAQAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAAE3HN0YmwAAACYc3RzZAAAAAAAAAABAAAAiGF2YzEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAygDKAEgAAABIAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAY//8AAAAyYXZjQwFNQCj/4QAbZ01AKOyho3ySTUBAQFAAAAMAEAAr8gDxgxlgAQAEaO+G8gAAABhzdHRzAAAAAAAAAAEAAAA8AAALuAAAABRzdHNzAAAAAAAAAAEAAAABAAAB8GN0dHMAAAAAAAAAPAAAAAEAABdwAAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAAC7gAAAAAQAAF3AAAAABAAAAAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAEEc3RzegAAAAAAAAAAAAAAPAAAAzQAAAAQAAAADQAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAANAAAADQAAAQBzdGNvAAAAAAAAADwAAAAwAAADZAAAA3QAAAONAAADoAAAA7kAAAPQAAAD6wAAA/4AAAQXAAAELgAABEMAAARcAAAEbwAABIwAAAShAAAEugAABM0AAATkAAAE/wAABRIAAAUrAAAFQgAABV0AAAVwAAAFiQAABaAAAAW1AAAFzgAABeEAAAX+AAAGEwAABiwAAAY/AAAGVgAABnEAAAaEAAAGnQAABrQAAAbPAAAG4gAABvUAAAcSAAAHJwAAB0AAAAdTAAAHcAAAB4UAAAeeAAAHsQAAB8gAAAfjAAAH9gAACA8AAAgmAAAIQQAACFQAAAhnAAAIhAAACJcAAAMsdHJhawAAAFx0a2hkAAAAA9WAgl/VgIJfAAAAAgAAAAAAAAf8AAAAAAAAAAAAAAABAQAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAACsm1kaWEAAAAgbWRoZAAAAADVgIJf1YCCXwAArEQAAWAAVcQAAAAAACdoZGxyAAAAAAAAAABzb3VuAAAAAAAAAAAAAAAAU3RlcmVvAAAAAmNtaW5mAAAAEHNtaGQAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAidzdGJsAAAAZ3N0c2QAAAAAAAAAAQAAAFdtcDRhAAAAAAAAAAEAAAAAAAAAAAACABAAAAAArEQAAAAAADNlc2RzAAAAAAOAgIAiAAIABICAgBRAFQAAAAADDUAAAAAABYCAgAISEAaAgIABAgAAABhzdHRzAAAAAAAAAAEAAABYAAAEAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAAUc3RzegAAAAAAAAAGAAAAWAAAAXBzdGNvAAAAAAAAAFgAAAOBAAADhwAAA5oAAAOtAAADswAAA8oAAAPfAAAD5QAAA/gAAAQLAAAEEQAABCgAAAQ9AAAEUAAABFYAAARpAAAEgAAABIYAAASbAAAErgAABLQAAATHAAAE3gAABPMAAAT5AAAFDAAABR8AAAUlAAAFPAAABVEAAAVXAAAFagAABX0AAAWDAAAFmgAABa8AAAXCAAAFyAAABdsAAAXyAAAF+AAABg0AAAYgAAAGJgAABjkAAAZQAAAGZQAABmsAAAZ+AAAGkQAABpcAAAauAAAGwwAABskAAAbcAAAG7wAABwYAAAcMAAAHIQAABzQAAAc6AAAHTQAAB2QAAAdqAAAHfwAAB5IAAAeYAAAHqwAAB8IAAAfXAAAH3QAAB/AAAAgDAAAICQAACCAAAAg1AAAIOwAACE4AAAhhAAAIeAAACH4AAAiRAAAIpAAACKoAAAiwAAAItgAACLwAAAjCAAAAFnVkdGEAAAAObmFtZVN0ZXJlbwAAAHB1ZHRhAAAAaG1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAAO2lsc3QAAAAzqXRvbwAAACtkYXRhAAAAAQAAAABIYW5kQnJha2UgMC4xMC4yIDIwMTUwNjExMDA="}])},t.exports=e()})),Y8=function(t){return t&&t.__esModule?t.default:t}(F8),V8=1e3,G8=[0,0,.5,1],W8=[.5,0,.5,1],Z8=s.requestAnimationFrame,H8=s.cancelAnimationFrame;function X8(t){_.defineProperties(this,{hasPosition:{writable:!1,enumerable:!0,value:t.hasPosition},hasExternalDisplay:{writable:!1,enumerable:!0,value:t.hasExternalDisplay},canPresent:{writable:!1,enumerable:!0,value:t.canPresent},maxLayers:{writable:!1,enumerable:!0,value:t.maxLayers},hasOrientation:{enumerable:!0,get:function(){return u8("VRDisplayCapabilities.prototype.hasOrientation","VRDisplay.prototype.getFrameData"),t.hasOrientation}}})}function qh(t){var i=!("wakelock"in(t=t||{}))||t.wakelock;this.isPolyfilled=!0,this.displayId=V8++,this.displayName="",this.depthNear=.01,this.depthFar=1e4,this.isPresenting=!1,_.defineProperty(this,"isConnected",{get:function(){return u8("VRDisplay.prototype.isConnected","VRDisplayCapabilities.prototype.hasExternalDisplay"),!1}}),this.capabilities=new X8({hasPosition:!1,hasOrientation:!1,hasExternalDisplay:!1,canPresent:!1,maxLayers:1}),this.stageParameters=null,this.Rui=!1,this.fC=null,this.Pui=null,this.XH=null,this.zui=null,this.Bui=null,this.Uui=null,this.Qui=null,this.Fui=null,i&&i8()&&(this.Yui=new Y8)}qh.prototype.getFrameData=function(t){return o8(t,this.Vui(),this)},qh.prototype.getPose=function(){return u8("VRDisplay.prototype.getPose","VRDisplay.prototype.getFrameData"),this.Vui()},qh.prototype.resetPose=function(){return u8("VRDisplay.prototype.resetPose"),this.Gui()},qh.prototype.getImmediatePose=function(){return u8("VRDisplay.prototype.getImmediatePose","VRDisplay.prototype.getFrameData"),this.Vui()},qh.prototype.requestAnimationFrame=function(t){return Z8(t)},qh.prototype.cancelAnimationFrame=function(t){return H8(t)},qh.prototype.wrapForFullscreen=function(t){if(wt())return t;if(!this.zui){this.zui=h.createElement("div");var i=["height: "+x.min(screen.height,screen.width)+"px !important","top: 0 !important","left: 0 !important","right: 0 !important","border: 0","margin: 0","padding: 0","z-index: 999999 !important","position: fixed"];this.zui.setAttribute("style",i.join("; ")+";"),this.zui.classList.add("webvr-polyfill-fullscreen-wrapper")}if(this.XH==t)return this.zui;if(this.XH&&(this.Pui?this.Pui.appendChild(this.XH):this.XH.parentElement.removeChild(this.XH)),this.XH=t,this.Pui=t.parentElement,this.Pui||h.body.appendChild(t),!this.zui.parentElement){var e=this.XH.parentElement;e.insertBefore(this.zui,this.XH),e.removeChild(this.XH)}this.zui.insertBefore(this.XH,this.zui.firstChild),this.Bui=this.XH.getAttribute("style");var s=this;return function(){if(s.XH){var t=["position: absolute","top: 0","left: 0","width: "+x.max(screen.width,screen.height)+"px","height: "+x.min(screen.height,screen.width)+"px","border: 0","margin: 0","padding: 0"];s.XH.setAttribute("style",t.join("; ")+";")}}(),this.zui},qh.prototype.removeFullscreenWrapper=function(){if(this.XH){var t=this.XH;this.Bui?t.setAttribute("style",this.Bui):t.removeAttribute("style"),this.XH=null,this.Bui=null;var i=this.zui.parentElement;return this.zui.removeChild(t),this.Pui===i?i.insertBefore(t,this.zui):this.Pui&&this.Pui.appendChild(t),i.removeChild(this.zui),t}},qh.prototype.requestPresent=function(t){var i=this.isPresenting,e=this;return t instanceof Array||(u8("VRDisplay.prototype.requestPresent with non-array argument","an array of VRLayers as the first argument"),t=[t]),new Promise((function(s,n){if(e.capabilities.canPresent)if(0==t.length||t.length>e.capabilities.maxLayers)n(new g("Invalid number of layers."));else{var r=t[0];if(r.source){var o=r.leftBounds||G8,a=r.rightBounds||W8;if(i){var u=e.fC;u.source!==r.source&&(u.source=r.source);for(var c=0;c<4;c++)u.leftBounds[c]=o[c],u.rightBounds[c]=a[c];return e.wrapForFullscreen(e.fC.source),e.Wui(),void s()}if(e.fC={predistorted:r.predistorted,source:r.source,leftBounds:o.slice(0),rightBounds:a.slice(0)},e.Rui=!1,e.fC&&e.fC.source){var l=e.wrapForFullscreen(e.fC.source);e.Zui(l,(function(){var t=h.fullscreenElement||h.webkitFullscreenElement||h.mozFullScreenElement||h.msFullscreenElement;e.isPresenting=l===t,e.isPresenting?(screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape-primary").catch((function(t){console.error("screen.orientation.lock() failed due to",t.message)})),e.Rui=!1,e.Hui(),s()):(screen.orientation&&screen.orientation.unlock&&screen.orientation.unlock(),e.disableWakeLock(),e.Xui(),e.removeFullscreenWrapper(),e.qui()),e.Kui()}),(function(){e.Rui&&(e.removeFullscreenWrapper(),e.qui(),e.disableWakeLock(),e.Rui=!1,e.isPresenting=!1,n(new g("Unable to present.")))})),!function(t){if(h.fullscreenEnabled&&t.requestFullscreen)t.requestFullscreen();else if(h.webkitFullscreenEnabled&&t.webkitRequestFullscreen)t.webkitRequestFullscreen();else if(h.mozFullScreenEnabled&&t.mozRequestFullScreen)t.mozRequestFullScreen();else{if(!h.msFullscreenEnabled||!t.msRequestFullscreen)return!1;t.msRequestFullscreen()}return!0}(l)?(wt()||V9())&&(e.enableWakeLock(),e.isPresenting=!0,e.Hui(),e.Kui(),s()):(e.enableWakeLock(),e.Rui=!0)}e.Rui||wt()||(J9(),n(new g("Unable to present.")))}else s()}else n(new g("VRDisplay is not capable of presenting."))}))},qh.prototype.exitPresent=function(){var t=this.isPresenting,i=this;return this.isPresenting=!1,this.fC=null,this.disableWakeLock(),new Promise((function(e,s){t?(J9(),i.Xui(),i.removeFullscreenWrapper(),i.qui(),i.Kui(),e()):s(new g("Was not presenting to VRDisplay."))}))},qh.prototype.getLayers=function(){return this.fC?[this.fC]:[]},qh.prototype.Kui=function(){var t=new CustomEvent("vrdisplaypresentchange",{detail:{display:this}});s.dispatchEvent(t)},qh.prototype.Jui=function(){var t=new CustomEvent("vrdisplayconnect",{detail:{display:this}});s.dispatchEvent(t)},qh.prototype.Zui=function(t,i,e){this.qui(),this.Uui=t,this.Qui=i,this.Fui=e,i&&(h.fullscreenEnabled?t.addEventListener("fullscreenchange",i,!1):h.webkitFullscreenEnabled?t.addEventListener("webkitfullscreenchange",i,!1):h.mozFullScreenEnabled?h.addEventListener("mozfullscreenchange",i,!1):h.msFullscreenEnabled&&t.addEventListener("msfullscreenchange",i,!1)),e&&(h.fullscreenEnabled?t.addEventListener("fullscreenerror",e,!1):h.webkitFullscreenEnabled?t.addEventListener("webkitfullscreenerror",e,!1):h.mozFullScreenEnabled?h.addEventListener("mozfullscreenerror",e,!1):h.msFullscreenEnabled&&t.addEventListener("msfullscreenerror",e,!1))},qh.prototype.qui=function(){if(this.Uui){var t=this.Uui;if(this.Qui){var i=this.Qui;t.removeEventListener("fullscreenchange",i,!1),t.removeEventListener("webkitfullscreenchange",i,!1),h.removeEventListener("mozfullscreenchange",i,!1),t.removeEventListener("msfullscreenchange",i,!1)}if(this.Fui){var e=this.Fui;t.removeEventListener("fullscreenerror",e,!1),t.removeEventListener("webkitfullscreenerror",e,!1),h.removeEventListener("mozfullscreenerror",e,!1),t.removeEventListener("msfullscreenerror",e,!1)}this.Uui=null,this.Qui=null,this.Fui=null}},qh.prototype.enableWakeLock=function(){this.Yui&&this.Yui.enable()},qh.prototype.disableWakeLock=function(){this.Yui&&this.Yui.disable()},qh.prototype.Hui=function(){},qh.prototype.Xui=function(){},qh.prototype.submitFrame=function(t){},qh.prototype.getEyeParameters=function(t){return null};var q8={MOBILE_WAKE_LOCK:!0,DEBUG:!1,DPDB_URL:"https://dpdb.webvr.rocks/dpdb.json",K_FILTER:.98,PREDICTION_TIME_S:.04,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,ROTATE_INSTRUCTIONS_LANDSCAPE_TIMEOUT:3e3,YAW_ONLY:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1},K8="left",J8="right";function qo(t){var i=e8({},q8);t=e8(i,t||{}),qh.call(this,{wakelock:t.MOBILE_WAKE_LOCK}),this.config=t,this.displayName="Cardboard VRDisplay",this.capabilities=new X8({hasPosition:!1,hasOrientation:!0,hasExternalDisplay:!1,canPresent:!0,maxLayers:1}),this.stageParameters=null,this.$ui=this.config.BUFFER_SCALE,this.tci=new P8(this.config),this.ici=null,this.eci=null,this.wst=null,this.sci=null,this.nci=new I8(this.config.DPDB_URL,this.rci.bind(this)),this.hci=new bc(this.nci.getDeviceParams()),this.aci=new Q8,this.aci.onChange(this.uci.bind(this)),this.hci.setViewer(this.aci.getCurrentViewer()),this.config.ROTATE_INSTRUCTIONS_DISABLED||(this.cci=new z8),wt()&&s.addEventListener("resize",this.OH.bind(this))}qo.prototype=_.create(qh.prototype),qo.prototype.Vui=function(){return{position:null,orientation:this.tci.getOrientation(),linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}},qo.prototype.Gui=function(){this.tci.resetPose&&this.tci.resetPose()},qo.prototype.qai=function(t){var i;if(t==K8)i=this.hci.getFieldOfViewLeftEye();else{if(t!=J8)return console.error("Invalid eye provided: %s",t),null;i=this.hci.getFieldOfViewRightEye()}return i},qo.prototype.Kai=function(t){var i;if(t==K8)i=[.5*-this.hci.viewer.interLensDistance,0,0];else{if(t!=J8)return console.error("Invalid eye provided: %s",t),null;i=[.5*this.hci.viewer.interLensDistance,0,0]}return i},qo.prototype.getEyeParameters=function(t){var i=this.Kai(t),e=this.qai(t),s={offset:i,renderWidth:.5*this.hci.device.width*this.$ui,renderHeight:this.hci.device.height*this.$ui};return _.defineProperty(s,"fieldOfView",{enumerable:!0,get:function(){return u8("VRFieldOfView","VRFrameData's projection matrices"),e}}),s},qo.prototype.rci=function(t){this.config.DEBUG&&console.log("DPDB reported that device params were updated."),this.hci.updateDeviceParams(t),this.ici&&this.ici.updateDeviceInfo(this.hci)},qo.prototype.lci=function(){this.fC&&this.ici&&(this.fC.leftBounds||this.fC.rightBounds)&&this.ici.setTextureBounds(this.fC.leftBounds,this.fC.rightBounds)},qo.prototype.Hui=function(){var t=this.fC.source.getContext("webgl");if(t||(t=this.fC.source.getContext("experimental-webgl")),t||(t=this.fC.source.getContext("webgl2")),t){if(this.wst=t.canvas,this.sci=t.canvas.getAttribute("style"),this.fC.predistorted?this.config.CARDBOARD_UI_DISABLED||(t.canvas.width=q9()*this.$ui,t.canvas.height=K9()*this.$ui,this.eci=new m8(t)):(this.config.CARDBOARD_UI_DISABLED||(this.eci=new m8(t)),this.ici=new ku(t,this.eci,this.config.BUFFER_SCALE,this.config.DIRTY_SUBMIT_FRAME_BINDINGS),this.ici.updateDeviceInfo(this.hci)),this.eci&&this.eci.listen(function(t){this.aci.show(this.fC.source.parentElement),t.stopPropagation(),t.preventDefault()}.bind(this),function(t){this.exitPresent(),t.stopPropagation(),t.preventDefault()}.bind(this)),this.cci){var i=this.config.ROTATE_INSTRUCTIONS_LANDSCAPE_TIMEOUT;X9()&&i8()&&i?this.cci.showTemporarily(i,this.fC.source.parentElement):this.cci.update()}this.orientationHandler=this._ui.bind(this),s.addEventListener("orientationchange",this.orientationHandler),this.vrdisplaypresentchangeHandler=this.lci.bind(this),s.addEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler),this.OH(),this.dci()}},qo.prototype.Xui=function(){this.ici&&(this.ici.destroy(),this.ici=null),this.eci&&(this.eci.destroy(),this.eci=null),this.cci&&this.cci.hide(),this.aci.hide(),this.wst&&(r8(this.wst),this.sci?this.wst.setAttribute("style",this.sci):this.wst.removeAttribute("style"),n8(this.wst),this.wst=null,this.sci=null),s.removeEventListener("orientationchange",this.orientationHandler),s.removeEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler)},qo.prototype.Wui=function(){this.Xui(),this.Hui()},qo.prototype.submitFrame=function(t){if(this.ici)this.lci(),this.ici.submitFrame();else if(this.eci&&this.fC){var i=this.fC.source.getContext("webgl").canvas;i.width==this.lastWidth&&i.height==this.lastHeight||this.eci.onResize(),this.lastWidth=i.width,this.lastHeight=i.height,this.eci.render()}},qo.prototype._ui=function(t){this.aci.hide(),this.cci&&this.cci.update(),this.OH()},qo.prototype.OH=function(t){if(this.fC){var i=this.fC.source.getContext("webgl");r8(i.canvas);i.canvas.setAttribute("style",["position: absolute","top: 0","left: 0","width: 100vw","height: 100vh","border: 0","margin: 0","padding: 0px","box-sizing: content-box"].join("; ")+";"),n8(i.canvas)}},qo.prototype.uci=function(t){this.hci.setViewer(t),this.ici&&this.ici.updateDeviceInfo(this.hci),this.dci()},qo.prototype.dci=function(){var t=new CustomEvent("vrdisplaydeviceparamschange",{detail:{vrdisplay:this,deviceInfo:this.hci}});s.dispatchEvent(t)},qo.VRFrameData=function(){this.leftProjectionMatrix=new Float32Array(16),this.leftViewMatrix=new Float32Array(16),this.rightProjectionMatrix=new Float32Array(16),this.rightViewMatrix=new Float32Array(16),this.pose=null},qo.VRDisplay=qh;var $8={PROVIDE_MOBILE_VRDISPLAY:!0,GET_VR_DISPLAYS_TIMEOUT:1e3,MOBILE_WAKE_LOCK:!0,DEBUG:!1,DPDB_URL:"https://dpdb.webvr.rocks/dpdb.json",K_FILTER:.98,PREDICTION_TIME_S:.04,TOUCH_PANNER_DISABLED:!0,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,ROTATE_INSTRUCTIONS_LANDSCAPE_TIMEOUT:3e3,YAW_ONLY:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1};function cn(t){this.config=U9(U9({},$8),t),this.polyfillDisplays=[],this.enabled=!1,this.hasNative="getVRDisplays"in zl,this.native={},this.native.getVRDisplays=zl.getVRDisplays,this.native.VRFrameData=s.VRFrameData,this.native.VRDisplay=s.VRDisplay,(!this.hasNative||this.config.PROVIDE_MOBILE_VRDISPLAY&&z9())&&(this.enable(),this.getVRDisplays().then((function(t){t&&t[0]&&t[0].Jui&&t[0].Jui()})))}cn.prototype.getPolyfillDisplays=function(){if(this.fci)return this.polyfillDisplays;if(z9()){var t=new qo({MOBILE_WAKE_LOCK:this.config.MOBILE_WAKE_LOCK,DEBUG:this.config.DEBUG,DPDB_URL:this.config.DPDB_URL,CARDBOARD_UI_DISABLED:this.config.CARDBOARD_UI_DISABLED,K_FILTER:this.config.K_FILTER,PREDICTION_TIME_S:this.config.PREDICTION_TIME_S,TOUCH_PANNER_DISABLED:this.config.TOUCH_PANNER_DISABLED,ROTATE_INSTRUCTIONS_DISABLED:this.config.ROTATE_INSTRUCTIONS_DISABLED,ROTATE_INSTRUCTIONS_LANDSCAPE_TIMEOUT:this.config.ROTATE_INSTRUCTIONS_LANDSCAPE_TIMEOUT,YAW_ONLY:this.config.YAW_ONLY,BUFFER_SCALE:this.config.BUFFER_SCALE,DIRTY_SUBMIT_FRAME_BINDINGS:this.config.DIRTY_SUBMIT_FRAME_BINDINGS});this.polyfillDisplays.push(t)}return this.fci=!0,this.polyfillDisplays},cn.prototype.enable=function(){if(this.enabled=!0,this.hasNative&&this.native.VRFrameData){var t=this.native.VRFrameData,i=new this.native.VRFrameData,e=this.native.VRDisplay.prototype.getFrameData;s.VRDisplay.prototype.getFrameData=function(s){s instanceof t?e.call(this,s):(e.call(this,i),s.pose=i.pose,B9(i.leftProjectionMatrix,s.leftProjectionMatrix),B9(i.rightProjectionMatrix,s.rightProjectionMatrix),B9(i.leftViewMatrix,s.leftViewMatrix),B9(i.rightViewMatrix,s.rightViewMatrix))}}zl.getVRDisplays=this.getVRDisplays.bind(this),s.VRDisplay=qo.VRDisplay,s.VRFrameData=qo.VRFrameData},cn.prototype.getVRDisplays=function(){var t,i=this,e=this.config;return this.hasNative?function(t){return Promise.race?Promise.race(t):new Promise((function(i,e){for(var s=0;s<t.length;s++)t[s].then(i,e)}))}([this.native.getVRDisplays.call(zl),new Promise((function(i){t=u((function(){console.warn("Native WebVR implementation detected, but `getVRDisplays()` failed to resolve. Falling back to polyfill."),i([])}),e.GET_VR_DISPLAYS_TIMEOUT)}))]).then((function(e){return c(t),e.length>0?e:i.getPolyfillDisplays()})):Promise.resolve(this.getPolyfillDisplays())},cn.version="0.10.5-opentelly.3",cn.VRFrameData=qo.VRFrameData,cn.VRDisplay=qo.VRDisplay;var t7=_.freeze({default:cn}),i7=t7&&cn||t7;void 0!==Je&&Je.window&&(Je.document||(Je.document=Je.window.document),Je.navigator||(Je.navigator=Je.window.navigator));new i7({TOUCH_PANNER_DISABLED:!0,ROTATE_INSTRUCTIONS_LANDSCAPE_TIMEOUT:0,MOBILE_WAKE_LOCK:!ui.F_&&!ui.Ka,DPDB_URL:void 0});r(),r(),r();var e7=class{gci(t,i){const e=this._ci;let s;switch(i){case e.VERTEX_SHADER:s=e.createShader(i),this.vci=s;break;case e.FRAGMENT_SHADER:s=e.createShader(i),this.wci=s;break;default:return void console.error("Invalid Shader Type:",i)}e.attachShader(this.mci,s),e.shaderSource(s,t),e.compileShader(s)}pci(t){const i=this._ci;if(t){this.Aci={};for(const e in t)i.bindAttribLocation(this.mci,t[e],e),this.Aci[e]=t[e]}}yci(){this._ci.linkProgram(this.mci)}bci(){const t=this._ci;if(this.Mci){if(t.getProgramParameter(this.mci,t.LINK_STATUS)){if(!this.Aci){this.Aci={};const i=t.getProgramParameter(this.mci,t.ACTIVE_ATTRIBUTES);for(let e=0;e<i;e++){const i=t.getActiveAttrib(this.mci,e);this.Aci[i.name]=t.getAttribLocation(this.mci,i.name)}}this.Tci={};const i=t.getProgramParameter(this.mci,t.ACTIVE_UNIFORMS);let e="";for(let s=0;s<i;s++){e=t.getActiveUniform(this.mci,s).name.replace("[0]",""),this.Tci[e]=t.getUniformLocation(this.mci,e)}}else this.vci&&!t.getShaderParameter(this.vci,t.COMPILE_STATUS)?console.error("Vertex shader compile error:",t.getShaderInfoLog(this.vci)):this.wci&&!t.getShaderParameter(this.wci,t.COMPILE_STATUS)?console.error("Fragment shader compile error:",t.getShaderInfoLog(this.wci)):console.error("Program link error:",t.getProgramInfoLog(this.mci)),t.deleteProgram(this.mci),this.mci=null;t.deleteShader(this.vci),t.deleteShader(this.wci),this.Mci=!1}t.useProgram(this.mci)}constructor(t){this.Aci=null,this.Tci=null,this.Mci=!0,this.vci=null,this.wci=null,this._ci=t,this.mci=t.createProgram()}},s7=class{pr(t,i,e){let s=this._ci;this.Sci(t,i,s,e),this.t.TD||this.t.wst.wH(s,s.TEXTURE_2D,0,s.RGBA,s.RGBA,s.UNSIGNED_BYTE),s.drawElements(s.TRIANGLES,this.Nci,s.UNSIGNED_SHORT,0)}Ici(t){this.Dci||(t.bindTexture(t.TEXTURE_2D,this.Eci),this.t.wst.wH(t,t.TEXTURE_2D,0,t.RGB,t.RGB,t.UNSIGNED_BYTE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),this.Dci=!0)}Sci(t,i,e,s){const n=this.mci;n.bci(),this.Ici(e);const r=n.Tci,o=n.Aci;let h;e.uniformMatrix4fv(r.projectionMat,!1,t),e.uniformMatrix4fv(r.modelViewMat,!1,i),h="right"===s?this.kci:this.Lci,e.bindBuffer(e.ARRAY_BUFFER,h),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.xci),e.enableVertexAttribArray(o.position),e.enableVertexAttribArray(o.texCoord),e.vertexAttribPointer(o.position,3,e.FLOAT,!1,20,0),e.vertexAttribPointer(o.texCoord,2,e.FLOAT,!1,20,12),e.activeTexture(e.TEXTURE0),e.uniform1i(r.diffuse,0),e.bindTexture(e.TEXTURE_2D,this.Eci)}constructor(t,i,e){this.Dci=!1,this._ci=t,this.Eci=t.createTexture();let s=["uniform mat4 projectionMat;","uniform mat4 modelViewMat;","attribute vec3 position;","attribute vec2 texCoord;","varying vec2 vTexCoord;","void main() {","  vTexCoord = texCoord;","  gl_Position = projectionMat * modelViewMat * vec4( position, 1.0 );","}"].join("\n"),n=["precision mediump float;","uniform sampler2D diffuse;","varying vec2 vTexCoord;","void main() {","  gl_FragColor = texture2D(diffuse, vTexCoord);","}"].join("\n");this.mci=new e7(t),this.mci.gci(s,t.VERTEX_SHADER),this.mci.gci(n,t.FRAGMENT_SHADER),this.mci.pci({position:0,texCoord:1}),this.mci.yci();const r=[],o=[],h=[],a=40;for(let t=0;t<=40;++t){const i=t*x.PI/40,s=x.sin(i),n=x.cos(i);for(let i=0;i<=a;++i){const h=2*i*x.PI/a-x.PI,u=x.sin(h)*s,c=n,l=-x.cos(h)*s,d=i/a,f=t/40;switch(e){case"horizontal":r.push(2*u,2*c,2*l,d/2,f),o.push(2*u,2*c,2*l,d/2+.5,f);break;case"vertical":r.push(2*u,2*c,2*l,d,f/2),o.push(2*u,2*c,2*l,d,f/2+.5);break;default:r.push(2*u,2*c,2*l,d,f)}}}for(let t=0;t<40;++t){let i=41*t,e=41*(t+1);for(let t=0;t<a;++t){let s=i+t,n=e+t;h.push(s,n,s+1,n,n+1,s+1)}}switch(this.Lci=t.createBuffer(),this.kci=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.Lci),t.bufferData(t.ARRAY_BUFFER,new Float32Array(r),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.kci),e){case"horizontal":case"vertical":t.bufferData(t.ARRAY_BUFFER,new Float32Array(o),t.STATIC_DRAW);break;default:t.bufferData(t.ARRAY_BUFFER,new Float32Array(r),t.STATIC_DRAW)}this.xci=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.xci),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array(h),t.STATIC_DRAW),this.Nci=h.length,this.t=i}};r();var n7=class extends ps{ma(){return new r7}constructor(){super("Cci")}},r7=class extends Gs{constructor(){super("stereochange")}};r();var o7=class extends ps{ma(){return new h7}constructor(){super("jci")}},h7=class extends Gs{constructor(){super("directionchange")}};r(),r();var Eu=x.PI/180,a7=180/x.PI,X=class{$p(t,i){return this.x=t,this.y=i,this}lgt(t){return this.x=t.x,this.y=t.y,this}Oci(t){return this.$p(t[0],t[1])}Rci(){const t=new Float32Array(2);return t[0]=this.x,t[1]=this.y,t}Pci(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this}constructor(t,i){this.x=t||0,this.y=i||0}},xu=class{$p(t,i,e){return this.x=t,this.y=i,this.z=e,this}lgt(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}Oci(t){return this.$p(t[0],t[1],t[2])}Rci(){const t=new Float32Array(3);return t[0]=this.x,t[1]=this.y,t[2]=this.z,t}U(){return x.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}zci(){const t=this.U();if(0!==t){const i=1/t;this.Bci(i)}else this.x=0,this.y=0,this.z=0;return this}Bci(t){this.x*=t,this.y*=t,this.z*=t}Uci(t){const i=this.x,e=this.y,s=this.z,n=t.x,r=t.y,o=t.z,h=t.w,a=h*i+r*s-o*e,u=h*e+o*i-n*s,c=h*s+n*e-r*i,l=-n*i-r*e-o*s;return this.x=a*h+l*-n+u*-o-c*-r,this.y=u*h+l*-r+c*-n-a*-o,this.z=c*h+l*-o+a*-r-u*-n,this}Qci(t){return this.x*t.x+this.y*t.y+this.z*t.z}Fci(t,i){const e=t.x,s=t.y,n=t.z,r=i.x,o=i.y,h=i.z;return this.x=s*h-n*o,this.y=n*r-e*h,this.z=e*o-s*r,this}constructor(t,i,e){this.x=t||0,this.y=i||0,this.z=e||0}},Di=class{$p(t,i,e,s){return this.x=t,this.y=i,this.z=e,this.w=s,this}lgt(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this}Oci(t){return this.$p(t[0],t[1],t[2],t[3])}Rci(){const t=new Float32Array(4);return t[0]=this.x,t[1]=this.y,t[2]=this.z,t[3]=this.w,t}Qci(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}iB(t){return this.Yci(this,t)}Yci(t,i){const e=t.x,s=t.y,n=t.z,r=t.w,o=i.x,h=i.y,a=i.z,u=i.w;return this.x=e*u+r*o+s*a-n*h,this.y=s*u+r*h+n*o-e*a,this.z=n*u+r*a+e*h-s*o,this.w=r*u-e*o-s*h-n*a,this}Vci(){return this.x*=-1,this.y*=-1,this.z*=-1,this.zci(),this}Gci(){const t=this.x,i=this.y,e=this.z,s=this.w,n=t*i+e*s;let r,o,h;if(n>.499)r=2*x.atan2(t,s),o=x.PI/2,h=0;else if(n<-.499)r=-2*x.atan2(t,s),o=-x.PI/2,h=0;else{const a=t*t,u=i*i,c=e*e;r=x.atan2(2*i*s-2*t*e,1-2*u-2*c),o=x.asin(2*n),h=x.atan2(2*t*s-2*i*e,1-2*a-2*c)}return new Hi(r,h,o)}zci(){let t=x.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===t?(this.x=0,this.y=0,this.z=0,this.w=1):(t=1/t,this.x=this.x*t,this.y=this.y*t,this.z=this.z*t,this.w=this.w*t),this}constructor(t,i,e,s){this.x=t||0,this.y=i||0,this.z=e||0,this.w=void 0!==s?s:1}},Hi=class{$p(t,i,e){return this.Wci=t,this.Zci=i,this.Hci=e,this}lgt(t){return this.$p(t.Wci,t.Zci,t.Hci)}yP(t){return this.Wci+=t.Wci,this.Zci+=t.Zci,this.Hci+=t.Hci,this}Xci(){const t=this.Wci,i=this.Hci,e=this.Zci,s=x.cos(t/2),n=x.cos(i/2),r=x.cos(e/2),o=x.sin(t/2),h=x.sin(i/2),a=x.sin(e/2),u=s*n,c=o*h;return new Di(u*a+c*r,o*n*r+s*h*a,s*h*r-o*n*a,u*r-c*a)}constructor(t,i,e){this.Wci=t||0,this.Zci=i||0,this.Hci=e||0}},u7=.15,c7=class{oU(){this.Rt||(this.Rt=!0,this.ke.addEventListener("keydown",this.qci),this.ke.addEventListener("mousedown",this.Kci),this.ke.addEventListener("touchstart",this.Jci),s.addEventListener("mousemove",this.er),s.addEventListener("mouseup",this.$ci),this.tli(s),s.addEventListener("touchmove",this.ili),s.addEventListener("touchend",this.eli))}tli(t){if(xd(t));else if(Cd(t))try{t.parent.addEventListener("mouseup",this.$ci),this.tli(t.parent)}catch(i){t.document.documentElement.addEventListener("mouseleave",this.sli)}}hU(){this.Rt&&(this.Rt=!1,this.nli=!1,this.rli&&(du(this.rli),this.rli=null),this.ke.removeEventListener("keydown",this.qci),this.ke.removeEventListener("mousedown",this.Kci),this.ke.removeEventListener("touchstart",this.Jci),s.removeEventListener("mousemove",this.er),s.removeEventListener("mouseup",this.$ci),this.oli(s),s.removeEventListener("touchmove",this.ili),s.removeEventListener("touchend",this.eli))}oli(t){if(t.document.documentElement.removeEventListener("mouseleave",this.sli),Cd(t))try{t.parent.removeEventListener("mouseup",this.$ci),this.oli(t.parent)}catch(t){}}get hli(){return new Hi(this.ali,this.uli,this.cli)}set hli(t){this.ali=t.Wci,this.uli=t.Zci,this.cli=t.Hci}lli(t){this.dli("ali",t)}fli(t){t=rh(t,-x.PI/2,x.PI/2),this.dli("uli",t)}dli(t,i){this.rli&&du(this.rli);let e=this[t],s=xo(),n=()=>{let r=xo()-s;if(r>=80)return this[t]=i,du(this.rli),void(this.rli=null);this.rli=Qn(n);let o=r/80;this[t]=e+(i-e)*o};this.rli=Qn(n)}gli(){this.uli+=2*x.PI*this._li.y/this.ke.clientHeight*.3,this.ali+=2*x.PI*this._li.x/this.ke.clientWidth*.5,this.uli=rh(this.uli,-x.PI/2,x.PI/2)}vli(){this.nli=!1}wli(){return(h.pointerLockElement||h.mozPointerLockElement||h.webkitPointerLockElement)===this.ke}resetPose(){this.uli=0,this.ali=0}gn(){this.hU()}constructor(t){this.Rt=!1,this.uli=0,this.ali=0,this.cli=0,this.rli=null,this.mli=new X,this.Ali=new X,this._li=new X,this.nli=!1,this.qci=t=>{38===t.keyCode?this.fli(this.uli+u7):39===t.keyCode?this.lli(this.ali-u7):40===t.keyCode?this.fli(this.uli-u7):37===t.keyCode&&this.lli(this.ali+u7)},this.Kci=t=>{this.mli.$p(t.clientX,t.clientY),this.nli=!0,t.preventDefault()},this.Jci=t=>{t.touches&&1===t.touches.length&&(this.mli.$p(t.touches[0].pageX,t.touches[0].pageY),this.nli=!0,t.preventDefault())},this.er=t=>{if(this.nli||this.wli()){if(this.wli()){let i=t.movementX||t.mozMovementX||0,e=t.movementY||t.mozMovementY||0;this.Ali.$p(this.mli.x-i,this.mli.y-e)}else this.Ali.$p(t.clientX,t.clientY);this._li.Pci(this.Ali,this.mli),this.mli.lgt(this.Ali),this.gli()}},this.ili=t=>{this.nli&&(this.Ali.$p(t.touches[0].pageX,t.touches[0].pageY),this._li.Pci(this.Ali,this.mli),this.mli.lgt(this.Ali),this.gli())},this.$ci=t=>{this.vli()},this.eli=t=>{this.vli()},this.sli=t=>{this.vli()},this.ke=t}};r();var _u=Wo(Xl()),l7=Wo(ql()),d7=(Wo(Kl()),Wo(Jl())),f7=(Wo($l()),Wo(td())),g7=Wo(id()),_7=Wo(ed()),v7=Wo(sd()),w7=Wo(nd());r();var m7=["jci","Mat","Cci","error"];function p7(t){let i,e={get stereo(){return t.yli},set stereo(i){t.yli=i},get useDeviceMotionControls(){return t.bli},set useDeviceMotionControls(i){t.bli=i},get direction(){return t.Mli},set direction(i){t.Mli=i},get verticalFOV(){return t.Tli},set verticalFOV(i){t.Tli=i},get canPresentVR(){return t.Sli},get state(){return t.xft},addEventListener(t,e){i.yn(t,e)},removeEventListener(t,e){i.fn(t,e)}};return i=new Ao(t,m7,e),e}r();var A7=function(t){return t.Rs="unavailable",t.Nli="available",t.Ha="presenting",t}({}),y7=new Hi(0*Eu,0,0);function b7(t){return nf(t+180,360)-180}function M7(t,i){let e=t.Qci(i);return 1-e*e<1e-4}var T7=class extends Bo{fo(){zl.getVRDisplays?(this.Ili=new VRFrameData,this.Dli(),s.addEventListener("vrdisplayconnect",this.Dli,!1),s.addEventListener("vrdisplaydisconnect",this.Dli,!1),s.addEventListener("vrdisplayactivate",this.Eli,!1),s.addEventListener("vrdisplaydeactivate",this.kli,!1),s.addEventListener("vrdisplaypresentchange",this.Lli,!1)):zl.getVRDevices?this.eCt("Your browser supports WebVR but not the latest version.",Do.VR_PLATFORM_UNSUPPORTED):this.eCt("Your browser does not support WebVR.",Do.VR_PLATFORM_UNSUPPORTED),this.t.yn(Qi.ro,this.ho),this.ho()}xli(){let t={alpha:!1,antialias:!1,preserveDrawingBuffer:!0};if(!this.Cli){const t=h.createElement("canvas");t.className="theoplayer-vr",Tu(t),t.style.zIndex="2",this.t.ke.appendChild(t),this.Cli=t}this._ci=this.Cli.getContext("webgl",t),this._ci||(this._ci=this.Cli.getContext("experimental-webgl",t),this._ci)?(this._ci.enable(this._ci.DEPTH_TEST),this._ci.enable(this._ci.CULL_FACE)):this.eCt("Your browser does not support WebGL.",Do.VR_PLATFORM_UNSUPPORTED)}jli(){let t=this.Mli;this.Oli||(this.xli(),this.Oli=!0),this._ci&&(this.Rli(new s7(this._ci,this.t,this.Pli)),this.Cli.style.display="",this.gi||(this.gi=new c7(this.Cli)),this.gi.oU(),this.t.ka.yn(El.aa,this.OH),this.t.yn(Ah.pn,this.OH),this.Mli=t,this.OH(),this.zli=Qn(this.Bli))}Uli(){let t=this.Mli;this.Rli(void 0),this.gi&&this.gi.hU(),this.Cli&&(this.Cli.style.display="none"),this.t.ka.fn(El.aa,this.OH),this.t.fn(Ah.pn,this.OH),this.zli&&du(this.zli),this.Mli=t}Qli(){var t;return null==(t=this.t.Ya())?void 0:t.vr}Fli(t){let i=this.xft,e=this.yli;this.Yli&&(this.Vli=void 0,this.kli()),this.Yli=t,this.Yli&&(this.Yli.depthNear=.1,this.Yli.depthFar=1024),this.yli=e,this.xft!==i&&this.yo(new ct),this.yli!==e&&this.yo(new n7)}Gli(t){let i=this.xft;this.Wli=t,this.xft!==i&&this.yo(new ct)}Rli(t){let i=this.xft;this.Zli=t,this.xft!==i&&this.yo(new ct)}Hli(t){let i=this.xft,e=this.yli;this.Xli=t,this.gi&&(t?this.gi.hU():this.gi.oU()),this.xft!==i&&this.yo(new ct),this.yli!==e&&this.yo(new n7)}qli(t){let i=this.yli;this.Kli=t,this.yli!==i&&this.yo(new n7)}Jli(){let t=this.Cli;this.$li===t.width&&this.tdi===t.height||(t.width=this.$li,t.height=this.tdi,this.idi())}edi(t,i){(0,l7.default)(t,i.Rci()),(0,f7.default)(t,t)}useDeviceOrientation(){return!!this.Xli||this.sdi}ndi(){const t=DeviceMotionEvent.requestPermission;"function"==typeof t&&t().catch(ul)}eCt(t,i){Xt(t),this.yo(new As(new Ui(i,t)))}rdi(){this.yo(new o7)}get yli(){return this.Sli?this.Xli:this.Kli}set yli(t){this.Sli?t?this.Eli():this.kli():this.qli(t)}get bli(){return this.sdi}set bli(t){this.yli||(this.sdi=t,t&&ui.Ka&&this.ndi())}get Mli(){let t=this.hli;return{yaw:b7(t.Wci*a7),pitch:t.Zci*a7,roll:x.round(t.Hci*a7)}}set Mli(t){let i=b7(t&&+t.yaw||0),e=b7(t&&+t.pitch||0),s=b7(t&&+t.roll||0);this.hli=new Hi(i*Eu,e*Eu,s*Eu)}get hli(){if(this.xft===A7.Rs)return this.odi.Gci();let t=this.hdi,i=this.adi,e=new Hi;return t&&e.yP(t),i&&e.yP(i),e}set hli(t){const i=this.hli.Xci();if(this.xft===A7.Rs)this.odi=t.Xci();else{let i=this.Yli;i&&i.resetPose&&i.resetPose(),this.gi&&(this.gi.hli=t),this.odi=this.hli.Xci()}M7(i,this.odi)||this.rdi()}get hdi(){let t=this.Vli&&this.Vli.orientation;if(t)return(new Di).Oci(t).Gci()}get adi(){return this.gi&&this.gi.hli}get Tli(){return 180*this.udi}set Tli(t){t&&t>=0&&t<=180&&(this.udi=+t/180)}get Sli(){return!(!this.Yli||!this.Yli.capabilities.canPresent)}get xft(){var t;return this.Wli&&((null==(t=this.Qli())?void 0:t.nativeVR)||this.Zli)?this.Xli?A7.Ha:A7.Nli:A7.Rs}gn(){this.gU.Dm(),this.Bo(),this.Uli(),this.kli(),this.t.fn(Qi.ro,this.ho),s.removeEventListener("vrdisplayconnect",this.Dli,!1),s.removeEventListener("vrdisplaydisconnect",this.Dli,!1),s.removeEventListener("vrdisplayactivate",this.Eli,!1),s.removeEventListener("vrdisplaydeactivate",this.kli,!1),s.removeEventListener("vrdisplaypresentchange",this.Lli,!1),this.t=void 0}constructor(t){super(),this.gU=new Ai,this.odi=new Di,this.udi=.4,this.Kli=!1,this.sdi=!1,this.Wli=!1,this.md=void 0,this.Pli=fe.NONE,this.gi=void 0,this.cdi=[],this.Yli=void 0,this.Xli=!1,this.Oli=!1,this.Cli=void 0,this.Zli=void 0,this._ci=null,this.zli=0,this.Ili=void 0,this.Vli=void 0,this.ldi=(0,_u.default)(),this.ddi=(0,_u.default)(),this.$li=0,this.tdi=0,this.fdi=!0,this.gdi=0,this._di=()=>{this.t.fn(fa.CO,this._di);let t=this.Qli();t&&!t.nativeVR&&this.jli()},this.ho=()=>{this.Uli();let t=this.Qli();this.md=t,t&&t.panoramaMode!==Bx.NONE?(t.panoramaMode===Bx.PM180&&ae("PanoramaMode is set to '180' while the VR API only supports '360', consider using the WebXR API if you need to play 180 degree content."),this.Gli(!0),t.nativeVR?this.yo(new ct):(this.Pli=t.stereoMode,this.t.yn(fa.CO,this._di))):this.Gli(!1)},this.Eli=async()=>{if(this.xft!==A7.Rs&&this.Sli){this.fdi=!1,this.vdi();try{await this.Yli.requestPresent([{source:this.Cli}])}catch(t){this.eCt("Failed to present VR content.",Do.VR_PRESENTATION_ERROR)}finally{this.Lli()}}},this.kli=async()=>{if(this.Yli)try{await this.Yli.exitPresent()}catch(t){}finally{this.Lli()}},this.Dli=async()=>{try{this.cdi=await Ic(zl.getVRDisplays(),this.gU.wm),this.Yli&&fh(this.cdi,this.Yli)||this.Fli(this.cdi[0])}catch(t){this.cdi=[],this.Fli(void 0)}},this.Lli=()=>{this.Hli(!!this.Yli&&this.Yli.isPresenting),this.OH(),this.fdi=!this.Xli,this.fdi?Qn(this.idi):this.vdi()},this.OH=()=>{if(!this.Cli)return;const t=this.t.ke.offsetWidth,i=this.t.ke.offsetHeight;let e=this.Yli;if(e&&this.yli){let t=e.getEyeParameters("left"),i=e.getEyeParameters("right");t&&i&&(this.$li=2*x.max(t.renderWidth,i.renderWidth),this.tdi=x.max(t.renderHeight,i.renderHeight))}else{let e=me.Ys.pv;this.$li=t*e,this.tdi=i*e}},this.idi=()=>{if(!ui.Ka||!this.Cli||!this.fdi)return;this.vdi();let t=this.Cli,i=t.offsetWidth+1,e=t.offsetHeight;t.style.width=i+"px",t.style.height=e+"px",this.gdi=Qn(this.vdi)},this.vdi=()=>{if(!this.gdi)return;let t=this.Cli;t.style.width="100%",t.style.height="100%",du(this.gdi),this.gdi=0},this.Bli=()=>{let t=this.Yli,i=this.udi,e=this.Cli,s=this.Zli,n=this._ci,r=this.Ili,o=this.ldi,h=this.ddi;this.Jli(),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT),t&&this.useDeviceOrientation()&&(t.getFrameData(r),this.Vli=r.pose);let a=this.hli.Xci();this.edi(h,a),t&&t.isPresenting?(this.zli=t.requestAnimationFrame(this.Bli),n.viewport(0,0,.5*e.width,e.height),s.pr(r.leftProjectionMatrix,h,"left"),n.viewport(.5*e.width,0,.5*e.width,e.height),s.pr(r.rightProjectionMatrix,h,"right"),t.submitFrame()):(this.zli=Qn(this.Bli),(0,_7.default)(o,x.PI*i,e.width/e.height,.1,1024),this.yli?(n.viewport(0,0,.5*e.width,e.height),s.pr(o,h,"left"),n.viewport(.5*e.width,0,.5*e.width,e.height),s.pr(o,h,"right")):(n.viewport(0,0,e.width,e.height),s.pr(o,h))),M7(a,this.odi)||(this.odi.lgt(a),this.rdi())},this.t=t,this.hli=y7,this.ga=p7(this),this.fo()}};r(),sc((function(t){return class extends t{ma(){if(null!==this.wdi){const t=this.wdi.ga;return Gr(super.ma(),{vr:t})}return super.ma()}gn(){var t;null==(t=this.wdi)||t.gn(),super.gn()}constructor(t,i){super(t,i),this.wdi=null,i.vr.useWebXR||(this.wdi=new T7(this))}}}),hh.nu),r(),r(),r(),r();var S7=class{oU(){this.Le||(this.Le=!0,this.Us.addEventListener("mousedown",this.Kci),this.Us.addEventListener("touchstart",this.Jci),s.addEventListener("mousemove",this.er),s.addEventListener("touchmove",this.ili),s.addEventListener("mouseup",this.$ci),s.addEventListener("touchend",this.eli),this.tli(s))}hU(){this.Le&&(this.Le=!1,this.Us.removeEventListener("mousedown",this.Kci),this.Us.removeEventListener("touchstart",this.Jci),s.removeEventListener("mousemove",this.er),s.removeEventListener("touchmove",this.ili),s.removeEventListener("mouseup",this.$ci),s.removeEventListener("touchend",this.eli),this.oli(s))}tli(t){if(xd(t));else if(Cd(t))try{t.parent.addEventListener("mouseup",this.$ci),this.tli(t.parent)}catch(i){t.document.documentElement.addEventListener("mouseleave",this.sli)}}oli(t){if(t.document.documentElement.removeEventListener("mouseleave",this.sli),Cd(t))try{t.parent.removeEventListener("mouseup",this.$ci),this.oli(t.parent)}catch(t){}}vli(){this.mdi=!1}gli(){const t=this.Adi.pdi;t.yaw+=2*x.PI*this.ydi.x*.4/this.Us.clientWidth,t.pitch+=2*x.PI*this.ydi.y*.5/this.Us.clientHeight,t.pitch=rh(t.pitch,-x.PI/2,x.PI/2),this.Adi.pdi=t}wli(){return(h.pointerLockElement||h.mozPointerLockElement||h.webkitPointerLockElement)===this.Us}gn(){this.hU()}constructor(t,i){this.Le=!1,this.bdi=new X,this.Mdi=new X,this.ydi=new X,this.mdi=!1,this.Kci=t=>{this.bdi.$p(t.clientX,t.clientY),this.mdi=!0,t.preventDefault(),t.stopPropagation()},this.Jci=t=>{t.touches&&1===t.touches.length&&(this.bdi.$p(t.touches[0].pageX,t.touches[0].pageY),this.mdi=!0,t.preventDefault())},this.er=t=>{if(this.mdi||this.wli()){if(this.wli()){const i=t.movementX||t.mozMovementX||0,e=t.movementY||t.mozMovementY||0;this.Mdi.$p(this.bdi.x-i,this.bdi.y-e)}else this.Mdi.$p(t.clientX,t.clientY);this.ydi.Pci(this.Mdi,this.bdi),this.bdi.lgt(this.Mdi),this.gli()}},this.ili=t=>{this.mdi&&(this.Mdi.$p(t.touches[0].pageX,t.touches[0].pageY),this.ydi.Pci(this.Mdi,this.bdi),this.bdi.lgt(this.Mdi),this.gli())},this.$ci=()=>{this.vli()},this.eli=()=>{this.vli()},this.sli=()=>{this.vli()},this.Adi=t,this.Us=i}};r();var N7=class{Tdi(t){t.clearColor(...this.RK),t.clear(t.COLOR_BUFFER_BIT)}Sdi(t,i){t.clearDepth(1),t.enable(t.DEPTH_TEST),t.depthFunc(t.LEQUAL),t.clear(t.DEPTH_BUFFER_BIT),this.Ndi.forEach((e=>{e.Sdi(t,i)}))}Idi(t){this.Ndi.push(t)}Ddi(){this.Ndi=[]}constructor(){this.RK=[0,0,0,1],this.Ndi=[]}};r(),r(),r();var I7=class{Edi(t,i,e){const s=t.createBuffer();return null===s?(ae("Failed to create buffer."),null):(t.bindBuffer(i,s),t.bufferData(i,e,t.STATIC_DRAW),s)}constructor(t,i,e,s,n){this.kdi=t,this.cA=this.Edi(t,i,e),this.Ldi=s,this.Wv=n,this.xdi=!1,this.Cdi=0,this.ic=0}},D7=class extends I7{oU(t){if(null===this.cA)return void ae("Attempted to enable buffer that failed to initialize.");if(null===t)return void ae("Attempted to enable attribute without location.");const i=this.kdi;i.bindBuffer(i.ARRAY_BUFFER,this.cA),i.vertexAttribPointer(t,this.Ldi,this.Wv,this.xdi,this.Cdi,this.ic),i.enableVertexAttribArray(t)}hU(t){t&&this.kdi.disableVertexAttribArray(t)}constructor(t,i,e){super(t,t.ARRAY_BUFFER,i,e,t.FLOAT)}};var E7=class extends I7{jdi(){const t=this.kdi;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.cA),t.drawElements(t.TRIANGLES,this.Odi,this.Wv,this.ic)}constructor(t,i){super(t,t.ELEMENT_ARRAY_BUFFER,i,1,t.UNSIGNED_SHORT),this.Odi=i.length}};r();var xl=function(t){return t.VertexPos="aVertexPosition",t.VertexUV="aVertexUV",t.VertexColor="aVertexColor",t}({}),k7=function(t){return t.ProjectionMat="uProjectionMatrix",t.ModelViewMat="uModelViewMatrix",t.Texture="uTexture",t}({}),L7=function(t){return t.Normal="vNormal",t.Color="vColor",t.UV="vUV",t}({}),x7=class{Rdi(t,i,e){const s=this.Pdi(t,t.VERTEX_SHADER,i),n=this.Pdi(t,t.FRAGMENT_SHADER,e);if(null===s||null===n)return ae("Failed to create vertex or fragment shader."),null;const r=t.createProgram();return null===r?(ae("Failed to create shader program"),null):(t.attachShader(r,s),t.attachShader(r,n),t.linkProgram(r),t.getProgramParameter(r,t.LINK_STATUS)?r:(ae("Failed to initialize shader program"),null))}Pdi(t,i,e){const s=t.createShader(i);if(null===s)return ae("failed to create shader."),null;if(t.shaderSource(s,e),t.compileShader(s),!t.getShaderParameter(s,t.COMPILE_STATUS)){const i=t.getShaderInfoLog(s);return ae("Failed to compile shader with error: "+i),t.deleteShader(s),null}return s}zdi(){return this.Bdi}Udi(t){const i=this.Bdi;if(null===i)return ae("Attempted to retrieve attribute location when shader program was not initialized"),null;const e=this.kdi.getAttribLocation(i,t);return-1===e?null:e}Qdi(t){const i=this.Bdi;if(null===i)return ae("Attempted to retrieve uniform location when shader program was not initialized"),null;const e=this.kdi.getUniformLocation(i,t);return null===e&&Xt("Attempted to retrieve nonexistent uniform: "+t),e}constructor(t,i,e){this.kdi=t,this.Bdi=this.Rdi(this.kdi,i,e)}},C7=class{Fdi(){const t=this.Ydi.length,i=x.max(...this.Vdi);return i>=t?(Xt("Created geometry where largest index ("+i+") is larger than/equal to attribute array size ("+t+")"),!1):(i<t-1&&ae("Created geometry where largest index ("+i+") is smaller than attribute buffer - 1 ("+(t-1)+") resulting in unused vertices"),!this.Gdi||this.Gdi.length===t||(Xt("Created geometry where position ("+t+") and uv ("+this.Gdi.length+") buffers have different length."),!1))}Wdi(t,i){if(!this.Fdi())throw new g("Failed to validate buffers for WebGLGeometry.");const e=function(t,i){const e=[];return i.forEach((t=>{e.push(t.x,t.y,t.z)})),new D7(t,new Float32Array(e),3)}(t,this.Ydi),s=function(t,i){return new E7(t,new Uint16Array(i))}(t,this.Vdi),n=function(t,i){const e=[];return i.forEach((t=>{e.push(t.x,t.y)})),new D7(t,new Float32Array(e),2)}(t,this.Gdi);return new j7(e,s,n,i)}constructor(t,i,e){this.Ydi=t,this.Vdi=i,this.Gdi=e}},j7=class{Zdi(){this.Ydi.oU(this.Hdi),null!==this.Xdi&&this.Gdi.oU(this.Xdi)}qdi(){this.Ydi.hU(this.Hdi),null!==this.Xdi&&this.Gdi.hU(this.Xdi)}Sdi(){this.Vdi.jdi()}constructor(t,i,e,s){this.Ydi=t;const n=s.Udi(xl.VertexPos);if(null===n)throw new g("Failed to get position attribute location.");this.Hdi=n,this.Gdi=e,this.Xdi=s.Udi(xl.VertexUV),this.Vdi=i}},O7=class extends C7{constructor(t=1,i=32,e=16,s=0,n=2*x.PI,r=0,o=x.PI){let h=0;const a=x.min(r+o,x.PI),u=[],c=[],l=[],d=[];for(let u=0;u<=e;u++){const f=[],g=u/e;let _=0;0===u&&0===r?_=.5/i:u===e&&a===x.PI&&(_=-.5/i);for(let e=0;e<=i;e++){const a=e/i,u=-t*x.cos(s+a*n)*x.sin(r+g*o),d=t*x.cos(r+g*o),v=t*x.sin(s+a*n)*x.sin(r+g*o);c.push(new xu(u,d,v)),l.push(new X(a+_,1-g)),f.push(h++)}d.push(f)}for(let t=0;t<e;t++)for(let s=0;s<i;s++){const i=d[t][s+1],n=d[t][s],o=d[t+1][s],h=d[t+1][s+1];(0!==t||r>0)&&u.push(i,n,h),(t!==e-1||a<x.PI)&&u.push(n,o,h)}super(c,u,l)}};r(),r();var R7=[0,0,0,255,0,0,0,255,0,0,0,255,0,0,0,255],P7=class{Kdi(){const t=this.kdi;t.activeTexture(this.Jdi),t.bindTexture(t.TEXTURE_2D,this.$di)}ur(){const t=this.kdi;t.activeTexture(this.Jdi),t.bindTexture(t.TEXTURE_2D,this.$di),t.uniform1i(this.tfi,0)}ifi(t){const i=this.kdi;i.bindTexture(i.TEXTURE_2D,this.$di),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!0),i.texImage2D(i.TEXTURE_2D,this.j1,this.efi,this.sfi,this.nfi,t),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!1)}rfi(t){const i=this.kdi;i.bindTexture(i.TEXTURE_2D,this.$di),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!0),t.wst.wH(i,i.TEXTURE_2D,this.j1,this.efi,this.sfi,this.nfi),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!1)}constructor(t,i){if(this.kdi=t,this.$di=t.createTexture(),null===this.$di)throw new g("Failed to create texture");const e=i.Qdi(k7.Texture);if(null===e)throw new g("Failed to get texture location.");this.tfi=e,t.bindTexture(t.TEXTURE_2D,this.$di),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),this.Jdi=t.TEXTURE0,this.j1=0,this.efi=t.RGBA,this.sfi=t.RGBA,this.nfi=t.UNSIGNED_BYTE,t.texImage2D(t.TEXTURE_2D,this.j1,this.efi,2,2,0,this.sfi,this.nfi,new T(R7))}},z7="\n    attribute vec4 "+xl.VertexPos+";\n    attribute vec2 "+xl.VertexUV+";\n\n    uniform mat4 "+k7.ModelViewMat+";\n    uniform mat4 "+k7.ProjectionMat+";\n    \n    varying mediump vec2 "+L7.UV+";\n    \n    void main() {\n      gl_Position = "+k7.ProjectionMat+" * "+k7.ModelViewMat+" * "+xl.VertexPos+";\n      "+L7.UV+" = "+xl.VertexUV+";\n    }\n",B7="\n    varying mediump vec2 "+L7.UV+";\n    \n    uniform sampler2D "+k7.Texture+";\n\n    void main() {\n      gl_FragColor = texture2D("+k7.Texture+", "+L7.UV+");\n    }\n",U7=class{zdi(){return this.Bdi}oU(){this.kdi.useProgram(this.Bdi.zdi()),this.$di.ur()}ofi(t){this.$di.ifi(t)}hfi(t){this.$di.rfi(t)}constructor(t){this.kdi=t,this.Bdi=new x7(t,z7,B7),this.$di=new P7(t,this.Bdi)}};r();var Q7=class{Sdi(t,i){if(this.afi(i.ufi)){this.cfi.Zdi(),this.lfi.oU();const e=this.dfi,s=i.ffi,n=(0,g7.default)(s,s,e);t.uniformMatrix4fv(this.gfi,!1,n);const r=i._fi;t.uniformMatrix4fv(this.vfi,!1,r),this.cfi.Sdi(),this.cfi.qdi()}}afi(t){return"none"===this.ufi||"right"!==t&&"left"===this.ufi||"right"===t&&"right"===this.ufi}get dfi(){const t=(0,_u.default)(),i=this.uo;return(0,w7.default)(t,t,i.Rci()),(0,v7.default)(t,t,this.wfi.x,new Float32Array([1,0,0])),(0,v7.default)(t,t,this.wfi.y,new Float32Array([0,1,0])),(0,v7.default)(t,t,this.wfi.z,new Float32Array([0,0,1])),t}constructor(t,i,e,s){this.uo=new xu,this.wfi=new xu,this.ufi="none",this.lfi=e;const n=e.zdi();this.cfi=i.Wdi(t,n),s&&(this.ufi=s);const r=n.Qdi(k7.ModelViewMat);if(null===r)throw new g("Failed to get model view matrix location.");this.gfi=r;const o=n.Qdi(k7.ProjectionMat);if(null===o)throw new g("Failed to get projection matrix location.");this.vfi=o}};r();var F7=class{mfi(){const t=(0,_u.default)();return(0,_7.default)(t,this.pfi,this.Afi,this.yfi,this.bfi)}Mfi(){this.Tfi=this.mfi()}get _fi(){return new Float32Array(this.Tfi)}set _fi(t){this.Tfi=t}Sfi(){const t=(0,_u.default)(),i=(0,d7.default)((0,_u.default)(),this.Nfi.Rci()),e=(0,l7.default)((0,_u.default)(),this.Ifi.Rci());return(0,g7.default)(t,i,e),(0,f7.default)(t,t),t}Dfi(){this.Efi=this.Sfi()}get ffi(){return new Float32Array(this.Efi)}kfi(){this.Dfi(),this.Mfi()}tr(){this.Nfi=new xu,this.wfi=new Di,this.kfi()}Lfi(t){const i=this.Ifi.Gci();i.yP(t),this.wfi=i.Xci()}xfi(t){this.wfi=t.Xci()}get Cfi(){return this.pfi}set Cfi(t){this.pfi=t,this.Mfi()}get jfi(){return this.Afi}set jfi(t){this.Afi=t,this.Mfi()}get uo(){return(new xu).lgt(this.Nfi)}set uo(t){this.Nfi=t,this.Dfi()}get wfi(){return(new Di).lgt(this.Ifi)}set wfi(t){this.Ifi=t,this.Dfi()}constructor(t){this.pfi=72*x.PI/180,this.Afi=1.77,this.yfi=.1,this.bfi=100,this.ufi="none",this.Nfi=new xu,this.Ifi=new Di,this.Tfi=this.mfi(),this.Efi=this.Sfi(),t&&(this.ufi=t)}},Y7=1e-4,V7=class extends Bo{fo(){this.Ofi(),this.kdi?zl.xr?(zl.xr.addEventListener("devicechange",this.Rfi),this.Pfi().then((()=>{this.zfi?(this.Bfi(),this.Ufi(),this.Qfi()):this.eCt("XR: Inline session not available. Panorama functionality will not work.",Do.VR_PRESENTATION_ERROR)}))):this.eCt("Your browser does not support WebXR",Do.VR_PLATFORM_UNSUPPORTED):this.eCt("Your browser does not support webGL",Do.VR_PLATFORM_UNSUPPORTED)}Qfi(){this.ta.ka.yn(El.aa,this.mn),this.ta.yn(Ah.pn,this.mn),this.ta.yn(Qi.ro,this.ho),this.ta.yn(Qi.yp,this.DG)}Ofi(){this.Ffi=h.createElement("canvas"),this.Ffi.className="theoplayer-vr",this.Ffi.style.zIndex="2",this.Ffi.style.background="black",this.Ffi.style.display="none",this.ta.ke.appendChild(this.Ffi),Tu(this.Ffi);let t=this.Ffi.getContext("webgl2");t||(t=this.Ffi.getContext("webgl")),t&&(this.kdi=t,this.Yfi=new S7(this,this.Ffi))}async Pfi(){zl.xr?await Promise.all([zl.xr.isSessionSupported("inline").then((t=>{this.zfi=t})).catch((t=>{this.zfi=!1,this.eCt("exception when calling xr.isSessionSupported for inline session: "+t,Do.VR_PRESENTATION_ERROR)})),zl.xr.isSessionSupported("immersive-vr").then((t=>{this.Vfi=t})).catch((t=>{this.Vfi=!1,this.eCt("exception when calling xr.isSessionSupported for immersive-vr session: "+t,Do.VR_PRESENTATION_ERROR)}))]):(this.zfi=!1,this.Vfi=!1)}Bfi(){const t=this.Qli();this.gM=t,this.Wli=Boolean(t),this.Wli&&(this.Gfi=(null==t?void 0:t.stereoMode)||fe.NONE,this.Wfi=(null==t?void 0:t.panoramaMode)||Bx.NONE,this.Zfi&&(this.Hfi(this.Wfi,this.Gfi),this.jli()))}Hfi(t,i){if(!this.kdi||t===Bx.NONE)return;const e=this.kdi;let s,n;this.Xfi.Ddi(),t===Bx.PM360?(s=2*x.PI,n=-x.PI/2):(s=x.PI,n=-x.PI);const r=new O7(16,60,40,0,s),o=[],h=[];for(let t=0;t<r.Gdi.length;t++){const e=r.Gdi[t];switch(i){case fe.NONE:o.push(e),h.push(e);break;case fe.VERTICAL:o.push(new X(e.x,.5*e.y)),h.push(new X(e.x,.5*e.y+.5));break;case fe.HORIZONTAL:o.push(new X(.5*e.x,e.y)),h.push(new X(.5*e.x+.5,e.y))}}r.Ydi.forEach((t=>{t.x*=-1}));const a=new C7(r.Ydi,r.Vdi,o),u=new C7(r.Ydi,r.Vdi,h);this.qfi=new U7(e);const c=new Q7(e,a,this.qfi,"left");c.wfi.y=n,this.Xfi.Idi(c);const l=new Q7(e,u,this.qfi,"right");l.wfi.y=n,this.Xfi.Idi(l)}jli(){this.Ffi.style.display="block",this.zfi&&this.ta.yn(Qi.so,this.Kfi)}Uli(){this.Jfi(),this.ta.fn(Qi.so,this.Kfi),this.Ffi.style.display="none"}$fi(){this.tgi(),this.igi()}async egi(){if(!this.sgi&&this.zfi)try{const t=await Ic(zl.xr.requestSession("inline"),this.gU.wm);let i;i=ui.Qs?ui.Yg?"viewer":"local":"viewer";const e=await t.requestReferenceSpace(i);t.addEventListener("end",this.tgi),this.ngi=e,this.sgi=t,this.Yfi.oU(),this.rgi(),await t.updateRenderState({baseLayer:new XRWebGLLayer(t,this.kdi),inlineVerticalFieldOfView:this.pfi*Eu})}catch(t){this.tgi(),this.eCt(t,Do.VR_PRESENTATION_ERROR)}}tgi(){this.sgi&&(this.Jfi(),this.Yfi.hU(),this.sgi.removeEventListener("end",this.igi),this.sgi.end(),this.sgi=null,this.Ufi())}async ogi(){if(!this.hgi&&this.Vfi){this.Jfi();try{const t=await Ic(zl.xr.requestSession("immersive-vr"),this.gU.wm),i=await t.requestReferenceSpace("local");t.addEventListener("end",this.igi),this.agi=i,this.hgi=t,await this.ugi(),this.rgi()}catch(t){this.igi(),this.eCt(t,Do.VR_PRESENTATION_ERROR)}}}async ugi(){const t=this.kdi,i=this.hgi;this.Ffi&&t&&i&&!this.cgi&&(this.Ffi.addEventListener("webglcontextlost",(t=>{t.preventDefault()})),this.Ffi.addEventListener("webglcontextrestored",(()=>{this.Hfi(this.Wfi,this.Gfi)})),this.cgi=!0,await t.makeXRCompatible(),await i.updateRenderState({baseLayer:new XRWebGLLayer(i,t)}))}Ufi(){if(!this.hgi&&this.kdi){const t=this.kdi,i=this.Ffi.clientWidth,e=this.Ffi.clientHeight,s=me.Ys.pv;this.Ffi.width=i*s,this.Ffi.height=e*s,t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight)}}rgi(){null===this.lgi&&(this.dgi(),this.fgi?this.lgi=this.fgi.requestAnimationFrame(this.ggi):(this._gi(),ae("XR: Attempted to start animation loop without inline or immersive session.")))}Jfi(){null!==this.lgi&&(this._gi(),this.fgi?this.fgi.cancelAnimationFrame(this.lgi):ae("XR: Attempted to stop animation loop by cancelAnimationFrame even though there is no session running."),this.lgi=null)}dgi(){if(null!==this.vgi)return;const t=this.ta.tE();if(void 0===t||!(t instanceof HTMLVideoElement))return void ae("No video source.");if("function"!=typeof t.requestVideoFrameCallback)return;const i=()=>{this.qfi.hfi(this.ta),this.vgi=t.requestVideoFrameCallback(i)};this.wgi=t,this.vgi=t.requestVideoFrameCallback(i)}_gi(){var t,i;null!==this.vgi&&(null==(i=this.wgi)||null==(t=i.cancelVideoFrameCallback)||t.call(i,this.vgi),this.wgi=null,this.vgi=null)}mgi(){return!!this.pgi||(ui.Ka?this.Agi&&this.ygi:this.Agi)}ndi(){const t=DeviceMotionEvent.requestPermission;"function"==typeof t&&t().then((t=>{this.ygi="granted"===t}))}bgi(){return(!this.TD()||Boolean(this.Mgi))&&this.Tgi()}TD(){return this.ta.TD}Tgi(){return this.ta.OD>=2}get Wli(){return this.Sgi}set Wli(t){const i=this.xft;this.Sgi=t,this.xft!==i&&this.yo(new ct)}get Zfi(){return this.Wfi!==Bx.NONE}get Wfi(){return this.Ngi}set Wfi(t){const i=this.xft;this.Ngi=t,this.xft!==i&&this.yo(new ct)}get Vfi(){return this.Igi}set Vfi(t){const i=this.xft;this.Igi=t,this.xft!==i&&this.yo(new ct)}get Sli(){return this.Vfi}get fgi(){return this.hgi||this.sgi}get hgi(){return this.pgi}set hgi(t){const i=this.xft;this.pgi=t,this.xft!==i&&this.yo(new ct)}get Dgi(){return this.agi||this.ngi}get Mli(){const t=this.Egi.Gci();return{yaw:t.Wci*a7,pitch:t.Zci*a7,roll:t.Hci*a7}}set Mli(t){const i=G7(t&&t.pitch||0)*Eu,e=G7(t&&t.roll||0)*Eu,s=G7(t&&t.yaw||0)*Eu,n=new Hi(s,i,e);this.Egi=n.Xci()}get pdi(){const t=this.kgi.Gci();return{yaw:t.Wci,pitch:t.Zci,roll:t.Hci}}set pdi(t){const i=W7(t&&t.pitch||0),e=W7(t&&t.roll||0),s=W7(t&&t.yaw||0),n=new Hi(s,i,e);this.kgi=n.Xci()}get xft(){return this.Wli?this.hgi?A7.Ha:A7.Nli:A7.Rs}get yli(){return null!==this.hgi}set yli(t){const i=this.yli;t&&this.Vfi?this.ogi():this.igi(),this.yli!==i&&this.yo(new n7)}get bli(){return this.Agi}set bli(t){null===this.pgi&&(this.Agi=t,t&&ui.Ka&&this.ndi())}get Tli(){return this.pfi}set Tli(t){t&&t>=0&&t<=180&&(this.pfi=t,null!==this.sgi&&this.sgi.updateRenderState({inlineVerticalFieldOfView:this.pfi*Eu}))}eCt(t,i){Xt(t),this.yo(new As(new Ui(i,t)))}Qli(){const t=this.ta.Ya();return t&&t.vr}gn(){this.gU.Dm(),this.$fi(),this.Bo(),this.ta=void 0,this.kdi=void 0}constructor(t){super(),this.gU=new Ai,this.zfi=!1,this.Igi=!1,this.Egi=new Di,this.Lgi=new Di,this.kgi=new Di,this.pfi=74,this.Agi=!1,this.gM=void 0,this.Gfi=fe.NONE,this.Sgi=!1,this.Ngi=Bx.NONE,this.Xfi=new N7,this.sgi=null,this.pgi=null,this.ngi=null,this.agi=null,this.cgi=!1,this.lgi=null,this.wgi=null,this.vgi=null,this.Mgi=0,this.ygi=!1,this.Rfi=()=>{this.Pfi()},this.ho=()=>{this.Uli(),this.$fi(),this.Bfi()},this.Kfi=()=>{this.egi()},this.igi=()=>{this.hgi&&(xf("Ending immersive session"),this.Jfi(),this.hgi.removeEventListener("end",this.igi),this.hgi.end(),this.hgi=null,this.agi=null,this.cgi=!1,this.sgi?this.rgi():this.egi())},this.mn=()=>{this.Ufi()},this.ggi=(t,i)=>{if(!this.kdi)return;const e=this.kdi,s=this.fgi;if(null===this.vgi&&this.bgi()&&(this.qfi.hfi(this.ta),this.Mgi>0&&(this.Mgi-=1)),null===s||void 0===i)return void ae("Attempted to run webXR animation loop without session or xrFrame.");this.lgi=s.requestAnimationFrame(this.ggi);const n=s.renderState.baseLayer,r=i.getViewerPose(this.Dgi);if(void 0===n||void 0===r)return void ae("Attempted to run webXR animation loop without glLayer or viewerPose.");e.bindFramebuffer(e.FRAMEBUFFER,n.framebuffer);let o=new Hi,h=0;for(const t of r.views){const i=new F7(t.eye);if(i._fi=t.projectionMatrix,this.mgi()){let e;if(ui.Qs&&ui.Yg&&null===this.pgi){if(e=t.transform.inverse.orientation,0===e.x&&0===e.y&&0===e.z&&1===e.w)return}else e=t.transform.orientation;i.wfi=new Di(e.x,e.y,e.z,e.w)}this.sgi&&i.Lfi(this.kgi.Gci()),o=o.yP(i.wfi.Gci()),h+=1;const s=n.getViewport(t);s&&e.viewport(s.x,s.y,s.width,s.height),this.Xfi.Sdi(e,i)}const a=new Hi(o.Wci/h,o.Zci/h,o.Hci);this.Egi=a.Xci(),function(t,i){const e=t.Qci(i);return 1-e*e<Y7}(this.Egi,this.Lgi)||(this.Lgi.lgt(this.Egi),this.yo(new o7))},this.DG=()=>{this.Mgi=5},this.ta=t,this.ga=p7(this),this.fo()}};function G7(t){return nf(t+180,360)-180}function W7(t){return nf(t+x.PI,2*x.PI)-x.PI}sc((function(t){return class extends t{ma(){return null!==this.Adi?Gr(super.ma(),{vr:this.Adi.ga}):super.ma()}gn(){var t;null==(t=this.Adi)||t.gn(),super.gn()}constructor(t,i){super(t,i),this.Adi=null,i.vr.useWebXR&&(this.Adi=new V7(this))}}}),hh.nu),r(),r();var Z7=class extends G{get ga(){return this.Za||(this.Za=function(t){let i,e={get status(){return t.LS},get tasks(){return t.Qii},get network(){return t.GG.ga},createTask:(i,e)=>t.xgi(i,e),addEventListener(t,e){i.yn(t,e)},removeEventListener(t,e){i.fn(t,e)}};return i=new xi(t,e),e}(this)),this.Za}get LS(){return this.Cgi.LS}get Qii(){return this.Cgi.Qii.ga}get GG(){return this.lst}xgi(t,i,e){let s,n;if(void 0===e&&(e="persistent"),!t)throw new g("Unexpected - The source description is undefined");if(s=Hh(t),n=c6(i),Vh(s))throw new g("Invalid source description");return this.Cgi.Rii(s,n).ga}constructor(t,i){super(),this.Cgi=t,this.lst=i,this.Cgi.yn("Mat",this.Ds)}};var H7=function(){const t=new Ij(me.GI,!1),i=ga.K_,e=new w6(t),s=new h6(i,e),n=new Ej(t),r=new y5(i.Nrt,s,"persistent");return new Z7(r,n)}().ga;function X7(t,i){if("function"==typeof t.getAll){return q7(void 0===i?t.getAll():t.getAll(i))}return function(t){let i=new pa,e=[];return t.onsuccess=()=>{let s=t.result;s&&s.value?(e.push(s.value),s.continue()):i.eA(e),ul()},t.onerror=()=>{i.sA(t.error),ul()},i.rA}(void 0===i?t.openCursor():t.openCursor(i))}function q7(t){return new Promise(((i,e)=>{t.onsuccess=()=>{i(t.result),ul()},t.onerror=()=>{e(t.error),ul()}}))}r(),r(),r(),r(),r(),r();var K7=class{Dm(){if(this.Yh)try{this.yrt.abort(),this.Yh=!1}catch(t){}}constructor(t){this.yrt=t,this.Yh=!0,this.rA=new Promise(((t,i)=>{this.yrt.oncomplete=()=>{this.Yh=!1,t(),ul()},this.yrt.onerror=()=>{this.Yh&&(this.Yh=!1,i(this.yrt.error||new g("Transaction error")),ul())},this.yrt.onabort=()=>{this.Yh=!1,i(new g("Transaction aborted")),ul()}}))}};async function J7(t,i,e){const s=new K7(t);try{const[t]=await Promise.all([i(e),s.rA]);return t}catch(t){if(!s.Yh)throw new T5("IDBTransaction committed prematurely",t);throw t}finally{s.Dm()}}var $7=class{get l(){return this.UN.l}urt(t){return Promise.resolve("persistent"===t)}crt(t,i){if(void 0===i&&(i="persistent"),"persistent"!==i)return Promise.reject(SQ(i));return q7(this.jgi(aa.Ert).put(t))}async lrt(t,i){if(void 0===i&&(i="persistent"),"persistent"!==i)return Promise.reject(SQ(i));for(const e of t)await this.crt(e,i)}async Kp(t){return Boolean(await this.Jp(t))}Jp(t){return q7(this.jgi(aa.Drt).get(t))}drt(t,i){return q7(this.jgi(aa.Drt).index(i).get(t))}async irt(t){const i=[];for(let e of t){const t=await this.Jp(e);t&&i.push(t)}return i}frt(){return X7(this.jgi(aa.Drt))}grt(t){return X7(this.jgi(aa.Drt),t)}_rt(t,i){return X7(this.jgi(aa.Drt).index(i),t)}Rb(t){return q7(this.jgi(aa.Ert).delete(t))}async vrt(t){for(const i of t)await this.Rb(i)}wrt(){return q7(this.jgi(aa.Ert).clear())}jgi(t){if(!this.Ogi)throw new g("Lock was released");if(!function(t,i){return t===aa.Drt&&i===aa.Drt||i===aa.Ert}(t,this.Ogi.mode))throw new g("Incompatible transaction mode: "+this.Ogi.mode+", expected "+t);return this.Ogi.objectStore(this.l)}Rgi(){this.UN.Pgi(this),this.Ogi=void 0}constructor(t,i){this.UN=t,this.Ogi=i}};var mr=class{urt(t){return Promise.resolve("persistent"===t)}crt(t,i){return void 0===i&&(i="persistent"),"persistent"!==i?Promise.reject(SQ(i)):this.yrt(aa.Ert,(i=>i.crt(t)))}lrt(t,i){return void 0===i&&(i="persistent"),"persistent"!==i?Promise.reject(SQ(i)):this.yrt(aa.Ert,(i=>i.lrt(t)))}Kp(t){return this.yrt(aa.Drt,(i=>i.Kp(t)))}Jp(t){return this.yrt(aa.Drt,(i=>i.Jp(t)))}drt(t,i){return this.yrt(aa.Drt,(e=>e.drt(t,i)))}irt(t){return this.yrt(aa.Drt,(i=>i.irt(t)))}frt(){return this.yrt(aa.Drt,(t=>t.frt()))}grt(t){return this.yrt(aa.Drt,(i=>i.grt(t)))}_rt(t,i){return this.yrt(aa.Drt,(e=>e._rt(t,i)))}Rb(t){return this.yrt(aa.Ert,(i=>i.Rb(t)))}vrt(t){return this.yrt(aa.Ert,(i=>i.vrt(t)))}wrt(){return this.yrt(aa.Ert,(t=>t.wrt()))}RIt(t){return this.zgi(),this.MIt=new $7(this,t),this.MIt}zgi(){if(void 0!==this.MIt)throw new g("Already locked")}Pgi(t){if(this.MIt!==t)throw new g("Incorrect lock");this.MIt=void 0}Wo(t){return this.Go.Wo(t)}yrt(t,i){return this.Wo((()=>this.Bgi(t,i)))}async Bgi(t,i){this.zgi();const e=this.Ugi.transaction(this.l,t),s=this.RIt(e);try{return await J7(e,i,s)}finally{s.Rgi()}}Qgi(t){this.zgi();const i=this.Ugi.transaction(this.l,t);return this.RIt(i)}static Fgi(t,i){let e;const s=new Promise((t=>{e=t})),n=t.reduce(((t,i)=>t.then((()=>{let t;const e=new Promise((i=>{t=i}));return i.Wo((()=>(t(),s))).catch(ul),e}))),Promise.resolve());return e(n.then(i)),s}constructor(t,i){this.MIt=void 0,this.Go=new Ku,this.Ugi=t,this.l=i}};r(),r(),r(),r(),r();var ttt={Rx:17,Ygi:async t=>{const{transaction:i,database:e}=t,s=i.objectStoreNames;if(s&&s.length)for(let t=0;t<s.length;t++)e.deleteObjectStore(s[t]);e.createObjectStore(rtt,{keyPath:"id"}),e.createObjectStore(ott,{keyPath:"key"}),e.createObjectStore(htt,{keyPath:"key"});e.createObjectStore(att,{keyPath:"segmentURLsegmentByteRange"}).createIndex("manifestURL","manifestURL");e.createObjectStore(utt,{keyPath:"segmentURLsegmentByteRange"}).createIndex("manifestURL","manifestURL")}},itt=class{async Vgi(t){for(const i of this.Ggi)this.Wgi<i.Rx&&await i.Ygi(t)}constructor(t){this.Wgi=t}},ett=class extends itt{get Ggi(){return[ttt]}},stt=new class{Zgi(t){this.Hgi=t}uet(t){return this.Hgi(t)}constructor(){this.Hgi=t=>new ett(t)}},ntt=18,rtt="cachingTask",ott="licences",htt="manifest",att="segment",utt="segmentMetadata";async function ctt(){!function(){if("undefined"==typeof indexedDB)throw new g("Indexed database unavailable")}();const t=indexedDB.open("theoplayer-cache-database",ntt);return t.addEventListener("upgradeneeded",ltt),await q7(t)}async function ltt(t){const i=t.oldVersion<=ntt?t.oldVersion:-1,e=t.target,s=e.result,n=e.transaction,r=stt.uet(i),o={database:s,transaction:n};await J7(n,(t=>r.Vgi(t)),o)}var dtt=class{static get K_(){return this.Urt||(this.Urt=ctt()),this.Urt}};dtt.Urt=void 0,r();var ftt=class{yrt(t){return t(this)}Rgi(){this.Trt.Rgi(),this.Mrt.Rgi(),this.Srt.Rgi(),this.Nrt.Rgi(),this.Irt.Rgi()}constructor(t,i){this.Trt=t.Trt.RIt(i),this.Mrt=t.Mrt.RIt(i),this.Srt=t.Srt.RIt(i),this.Nrt=t.Nrt.RIt(i),this.Irt=t.Irt.RIt(i)}};ga.ja(class t{static async uet(){const i=await dtt.K_;return new t(i)}yrt(t){const i=this.allCollections;return mr.Fgi(i,(()=>this.Bgi(i,t)))}async Bgi(t,i){const e=t.map((t=>t.l)),s=this.Ugi.transaction(e,aa.Ert),n=new ftt(this,s);try{return await J7(s,i,n)}finally{n.Rgi()}}get allCollections(){return[this.Mrt,this.Trt,this.Srt,this.Nrt,this.Irt]}constructor(t){this.Ugi=t,this.Trt=new mr(t,utt),this.Mrt=new mr(t,att),this.Srt=new mr(t,htt),this.Nrt=new mr(t,rtt),this.Irt=new mr(t,ott)}}.uet),r(),r(),r();var gtt=class{Xgi(t){const i=this.lq.qI(),e=t.createGain();for(const s of i){t.createMediaElementSource(s).connect(e)}return e}get ga(){return this.Za||(this.Za=this.ma()),this.Za}ma(){const t=this;return{createAudioSourceNode:i=>t.Xgi(i)}}constructor(t){this.Za=void 0,this.lq=t}};sc((function(t){return class extends t{ma(){const t=this.qgi.ga;return Gr(super.ma(),{get audio(){return t}})}constructor(t,i){super(t,i),this.qgi=new gtt(this.xa)}}}),hh.nu),r(),r();sc((function(t){return class i extends t{wa(t){const e=i.Kgi(this.md.analytics),s=i.Kgi(t?t.analytics:void 0);e||s?this.Jgi(il({},e,s)):this.$gi&&this.$gi.disable(),super.wa(t)}Jgi(t){if(this.$gi)this.$gi.enable(),this.$gi.setOptions(t);else{const i=s.youbora;if(!i)throw new g("Youbora JavaScript library not loaded.");if(!i.adapters.TheoPlayer2)throw new g("TheoPlayer2 adapter not available on Youbora JavasScript library");const e=new i.Plugin(t);e.setAdapter(new i.adapters.TheoPlayer2(this.ga)),this.Uc&&i.adapters.TheoPlayer2.NativeAdsAdapter&&e.setAdsAdapter(new i.adapters.TheoPlayer2.NativeAdsAdapter(this.ga)),this.$gi=e}}static Kgi(t){if(t){const i=t.filter((t=>"youbora"===t.integration));if(0===i.length)return;if(i.length>1)throw new g("Only one youbora analytics configuration expected");const e=i[0],{integration:s}=e;return rN(e,["integration"])}}gn(){this.$gi&&this.$gi.disable(),super.gn()}constructor(t,i){super(t,i)}}}),hh.xst),r(),r(),r();var _tt=1,vtt=0,wtt=1e3,mtt=class t extends hS{t_i(){const t=this.ct===1/0,i=t?_tt:vtt,e=t?-1:this.ct,s=Qr(this.ta.rt.FE,this.i_i);this.e_i.setPresentationInformation(new this.s_i(i,e,s))}i_i(t){const i=t.gk.FE,e=[];for(let t=0;t<i.length;t++){const s=i[t];s.ji&&s.Ti&&e.push({trackIdx:t,bitrate:s.mF,width:s.ji,height:s.Ti,codecIdentifier:s.Qrt})}return e}n_i(){return this.ta.nD()*wtt}get ct(){return this.ta._d()*wtt}get r_i(){return this.o_i}get h_i(){return this.a_i}set h_i(t){this.a_i=t,t&&this.e_i.reportPlayerState(t)}set u_i(t){this.c_i=t}l_i(){return v((()=>{this.d_i(),this.f_i()}),t.g_i)}sOt(){this.ta.Uc&&(this.ta.Uc.yn("int",this.__i),this.ta.Uc.yn("ent",this.v_i),this.ta.Uc.yn("$Ct",this.w_i),this.ta.Uc.yn("KCt",this.m_i)),this.ta.yn(Qi.tp,this._ri),this.ta.yn(ac.ua,this.j6),this.ta.yn(Qi.vp,this.p_i),this.ta.yn(Qi.so,this.Kfi),this.ta.yn(fa.CO,this.NG),this.ta.yn(Qi.Ap,this.OH),this.ta.yn(Qi.yp,this.DG),this.ta.yn(fa.xO,this.TG),this.ta.yn(Qi.Tp,this.A_i)}nOt(){this.ta.Uc&&(this.ta.Uc.fn("int",this.__i),this.ta.Uc.fn("ent",this.v_i),this.ta.Uc.fn("$Ct",this.w_i),this.ta.Uc.fn("KCt",this.m_i)),this.ta.fn(Qi.tp,this._ri),this.ta.fn(ac.ua,this.j6),this.ta.fn(Qi.vp,this.p_i),this.ta.fn(Qi.so,this.Kfi),this.ta.fn(fa.CO,this.NG),this.ta.fn(Qi.Ap,this.OH),this.ta.fn(Qi.yp,this.DG),this.ta.fn(fa.xO,this.TG),this.ta.fn(Qi.Tp,this.A_i)}gn(){m(this.y_i),this.nOt()}constructor(t,i,e,s=MMPlayerState,n=MMAdState,r=MMPresentationInfo){super(),this.ta=t,this.gM=i,this.e_i=e,this.b_i=s,this.M_i=n,this.s_i=r,this.T_i=!0,this.o_i=!1,this.c_i=void 0,this.a_i=void 0,this.S_i=void 0,this.__i=t=>{const i=t.Kst;i.Y$t();var e;e=i.Yst().duration;const s="linear"===i.Yst().type;i.V$t(),i.U$t();s&&(this.o_i=!0),this.u_i=this.M_i.AD_IMPRESSION,this.u_i=this.M_i.AD_STARTED},this.v_i=t=>{this.o_i=!1,this.u_i=this.M_i.AD_COMPLETED},this.w_i=t=>{t.tKt===Oc.ADBLOCK?this.u_i=this.M_i.AD_BLOCKED:this.u_i=this.M_i.AD_ERROR},this.m_i=()=>{this.u_i=this.M_i.AD_SKIPPED},this.A_i=t=>{var i,e,s,n;t.lN===Q.iN&&(this.S_i&&t.wW!==this.S_i&&this.e_i.reportABRSwitch(this.S_i,t.wW),this.S_i=t.wW,this.e_i.reportChunkRequest(new MMChunkInformation(t.dC,t.wW,t.Hj,t.ict.Hu,void 0,void 0,null!=(s=null==(i=t.ict.wut)?void 0:i[0])?s:0,null!=(n=null==(e=t.ict.wut)?void 0:e[1])?n:-1)))},this._ri=t=>{this.h_i=this.b_i.STOPPED,this.yo(t)},this.j6=t=>{this.h_i=this.b_i.ERROR,this.e_i.reportError(t.error,this.n_i())},this.p_i=()=>{this.r_i?this.u_i=this.M_i.AD_PAUSED:this.h_i=this.b_i.PAUSED},this.Kfi=()=>{this.r_i&&(this.u_i=this.M_i.AD_PLAY)},this.NG=()=>{this.r_i?(this.c_i===this.M_i.AD_PAUSED&&(this.u_i=this.M_i.AD_RESUMED),this.u_i=this.M_i.AD_PLAYING):(this.T_i&&(this.T_i=!1,this.t_i(),this.h_i=this.b_i.STARTED),this.h_i!==this.b_i.PAUSED&&this.h_i!==this.b_i.BUFFERING||(this.h_i=this.b_i.RESUMED))},this.OH=()=>{this.e_i.reportPresentationSize(this.ta.GD,this.ta.FD)},this.DG=t=>{this.r_i||this.h_i!==this.b_i.PAUSED||this.e_i.reportPlayerSeekCompleted(t.currentTime*wtt)},this.TG=()=>{this.r_i||(this.h_i=this.b_i.BUFFERING)},this.f_i=()=>{this.e_i.reportDownloadRate(x.floor(fc.K_.hF()))},this.d_i=()=>{this.r_i||this.e_i.reportPlaybackPosition(this.n_i())},this.h_i=this.b_i.INITIALIZED,this.sOt(),this.y_i=this.l_i()}};mtt.g_i=2e3,sc((function(t){return class extends t{gn(){super.gn(),this.N_i()}constructor(t,i){super(t,i),this.I_i=void 0,this.D_i=void 0,this.E_i=()=>{this.D_i=void 0,this.N_i();const t=super.Ya();t&&(this.D_i=function(t,i){const e=function(t,i){if(t&&t.analytics)for(const i of t.analytics)if("smartsight"===i.integration)return i;if(i&&i.analytics)for(const t of i.analytics)if("smartsight"===t.integration)return t;return}(t,i);if(!e)return;return e}(t,this.md)),this.k_i()},this.k_i=()=>{if(!this.I_i&&this.D_i&&this.bt&&this.bt.src&&!this.TD){const t=MMSmartStreaming.getInstance();!function(t,i,e){t.registerMMSmartStreaming(e.playerName,e.customerID,e.subscriberID,e.domainName),t.reportComponent("THEOSDK"),t.reportPlayerInfo("THEOplayer","THEOplayer","8.11.0"),t.reportDeviceInfo(void 0,void 0,void 0,void 0,void 0,s.innerWidth,s.innerHeight),t.initializeSession("QBRModeDisabled",i,e.metaURL,e.assetID)}(t,this.bt.src,this.D_i),this.I_i=new mtt(this,this.D_i,t),this.I_i.yn("ended",this.N_i)}},this.N_i=()=>{this.I_i&&(this.I_i.gn(),this.I_i=void 0)},this.yn(Qi.ro,this.E_i),this.yn(Qi.Xm,this.k_i),this.yn(Qi.so,this.k_i)}}}),hh.xst),r(),r();var ptt=String.fromCharCode(95);var Att=class t{get ga(){return this.Za||(this.Za=function(t){return{get adsManager(){return t.adsManager},get ids(){return t.ids},get adContainer(){return t.adContainer},get imaSDK(){return t.imaSDK},get sendEvent(){return t.sendEvent},set sendEvent(i){t.sendEvent=i}}}(this)),this.Za}get id(){return this.Nb}get adsManager(){return this.ani}get ids(){return this.Qd}get adContainer(){return this.t1t}get sendEvent(){return this.L_i}set sendEvent(t){for(let t of this.x_i)this.ani.removeEventListener(t.type,t.listener);this.x_i=[],this.L_i=t,this.C_i()}get imaSDK(){return!0}j_i(){for(let t in google.ima.AdEvent.Type){const i=google.ima.AdEvent.Type[t];this.ani.addEventListener(i,this.O_i),this.x_i.push({type:i,listener:this.O_i})}}R_i(){Or(this.x_i);for(let t in google.ima.AdEvent.Type){const i=google.ima.AdEvent.Type[t];this.ani.removeEventListener(i,this.O_i)}}P_i(t){this.Md.push({type:t.type,adVolume:this.adsManager.getVolume()})}C_i(){null==this.L_i||this.L_i.call(this,this.Md),this.Md=[]}static z_i(i){return t.B_i[i]||i}constructor(i,e,s,n){this.O_i=i=>{this.P_i({type:t.z_i(i.type)})},this.Nb=i,this.ani=e,this.Qd=s,this.t1t=n,this.x_i=[],this.Md=[]}};Att.B_i={loaded:"AdLoaded",impression:"AdImpression",start:"AdVideoStart",firstQuartile:"AdVideoFirstQuartile",midpoint:"AdVideoMidpoint",thirdQuartile:"AdVideoThirdQuartile",complete:"AdVideoComplete",pause:"AdPaused",skip:"AdSkipped",volumeChange:"AdVolumeChange"};var ytt=class{U_i(t,i){this.Q_i=h.createElement("script"),this.Q_i.id=t.id,this.Q_i.type="text/javascript",t.adContainer.appendChild(this.Q_i),this.Q_i.src="https://z.moatads.com/"+i+"/moatvideo.js#"+t.id,this.F_i=t.id,s[this.F_i]=t.ga}Y_i(){this.Q_i&&Xa(this.Q_i),this.F_i&&(s[this.F_i]=void 0)}constructor(){this.Q_i=void 0,this.F_i=void 0}};sc((function(t){return class i extends t{wa(t){var e,s,n;this.V_i(),null==(e=this.G_i)||e.removeEventListener(google.ima.AdEvent.Type.COMPLETE,this.W_i),null==(s=this.G_i)||s.removeEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.V_i),null==(n=this.G_i)||n.removeEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.Z_i),this.G_i=void 0,this.t1t=void 0,super.wa(t);const r=t&&t.analytics;this.H_i=i.X_i(r);this.Uc&&this.H_i&&X3()&&this.q_i()}gn(){var t,i,e;this.V_i(),null==(t=this.G_i)||t.removeEventListener(google.ima.AdEvent.Type.COMPLETE,this.W_i),null==(i=this.G_i)||i.removeEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.V_i),null==(e=this.G_i)||e.removeEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.Z_i),this.G_i=void 0,this.t1t=void 0,this.Uc&&this.Uc.fn("L7t",this.x7t),super.gn()}q_i(){this.Uc&&this.Uc.yn("L7t",this.x7t)}K_i(t,i,e){const s=ptt+"moatApi"+x.floor(1e8*x.random());this.J_i=new Att(s,t,i,e),this.J_i.j_i(),this.$_i.U_i(this.J_i,this.H_i.partnerCode)}static X_i(t){if(t){const i=t.filter((t=>"moat"===t.integration));if(0===i.length)return;if(i.length>1)throw new g("Only one Moat analytics configuration expected");return i[0]}}constructor(t,i){super(t,i),this.H_i=void 0,this.J_i=void 0,this.G_i=void 0,this.t1t=void 0,this.Z_i=()=>{this.K_i(this.G_i,{partnerCode:this.H_i.partnerCode,viewMode:google.ima.ViewMode.NORMAL},this.t1t)},this.x7t=t=>{this.G_i=t.hni,this.t1t=t._ti,this.V_i(),this.G_i.addEventListener(google.ima.AdEvent.Type.COMPLETE,this.W_i),this.G_i.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.V_i),this.G_i.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.Z_i)},this.W_i=t=>{const i=t.getAd().getAdPodInfo();i.getAdPosition()<i.getTotalAds()&&(this.V_i(),this.Z_i())},this.V_i=()=>{this.J_i&&(this.J_i.R_i(),this.J_i=void 0),this.$_i.Y_i()},this.$_i=new ytt}}}),hh.xst),r(),r(),r();var fn=class extends Gs{constructor(t,i,e){super(t,new Date),this.tvi=i,this.Kst=e}},Ss=function(t){return t.LOADED="DAILoaded",t.AD_BREAK_STARTED="DAIAdBreakStarted",t.AD_BREAK_ENDED="DAIAdBreakEnded",t.AD_PERIOD_STARTED="DAIAdPeriodStarted",t.AD_PERIOD_ENDED="DAIAdPeriodEnded",t.AD_PROGRESS="DAIAdProgress",t.CUEPOINTS_CHANGED="DAICuePointsChanged",t.CLICK="DAIClick",t.ERROR="DAIError",t.STARTED="DAIStarted",t.FIRST_QUARTILE="DAIFirstQuartile",t.MIDPOINT="DAIMidpoint",t.STREAM_INITIALIZED="DAIStreamInitialized",t.THIRD_QUARTILE="DAIThirdQuartile",t.COMPLETE="DAIComplete",t}({}),btt=class extends fn{constructor(t,i){super("DAILoaded",t,i)}},Mtt=class extends fn{constructor(t,i){super("DAIAdBreakStarted",t,i)}},Ttt=class extends fn{constructor(t,i){super("DAIAdBreakEnded",t,i)}},Stt=class extends fn{constructor(t,i){super("DAIAdProgress",t,i)}},Ntt=class extends fn{constructor(t,i){super("DAICuePointsChanged",t,i)}},Itt=class extends fn{constructor(t,i){super("DAIClick",t,i)}},Dtt=class extends fn{constructor(t,i){super("DAIError",t,i)}},Ett=class extends fn{constructor(t,i){super("DAIStarted",t,i)}},ktt=class extends fn{constructor(t,i){super("DAIFirstQuartile",t,i)}},Ltt=class extends fn{constructor(t,i){super("DAIMidpoint",t,i)}},xtt=class extends fn{constructor(t,i){super("DAIStreamInitialized",t,i)}},Ctt=class extends fn{constructor(t,i){super("DAIThirdQuartile",t,i)}},jtt=class extends fn{constructor(t,i){super("DAIComplete",t,i)}};var Ott=class extends Bo{replaceAdTagParameters(t){return this.Jni.replaceAdTagParameters(null!=t?t:null)}ivi(t){return this.Jni.contentTimeForStreamTime(t)}evi(t){return this.Jni.streamTimeForContentTime(t)}kQt(t,i){const e=function(t){return"vod"===t.availabilityType?new s.google.ima.dai.api.VODStreamRequest(il({},Rtt(t),{contentSourceId:t.contentSourceID,videoId:t.videoID})):new s.google.ima.dai.api.LiveStreamRequest(il({},Rtt(t),{assetKey:t.assetKey}))}(t);this.Jni.requestStream(e)}tr(){this.svi(!1),this.Jni.reset()}gn(){this.Bo();const t=google.ima.dai.api.StreamEvent.Type;this.Jni.removeEventListener(t.AD_BREAK_STARTED,this.nvi),this.Jni.removeEventListener(t.AD_PROGRESS,this.rvi),this.Jni.removeEventListener(t.CLICK,this.N0t),this.Jni.removeEventListener(t.COMPLETE,this.ovi),this.Jni.removeEventListener(t.CUEPOINTS_CHANGED,this.hvi),this.Jni.removeEventListener(t.ERROR,this.Ss),this.Jni.removeEventListener(t.FIRST_QUARTILE,this.avi),this.Jni.removeEventListener(t.LOADED,this.uvi),this.Jni.removeEventListener(t.MIDPOINT,this.cvi),this.Jni.removeEventListener(t.STARTED,this.lvi),this.Jni.removeEventListener(t.STREAM_INITIALIZED,this.dvi),this.Jni.removeEventListener(t.THIRD_QUARTILE,this.fvi),this.Jni.removeEventListener(t.AD_BREAK_ENDED,this.gvi),this.tr(),this._vi&&Xa(this._vi)}vvi(t){this.Jni.onTimedMetadata(t)}wvi(t,i,e){this.Jni.processMetadata(t,i,e)}mvi(t){const i=this.Jni.previousCuePointForStreamTime(t);if(i)return{RP:i.end,OP:i.start,kD:i.played}}pvi(t,i){const e=this.mvi(t);if(!e)return;const s=t>i&&e.RP>i,n=e.RP>t&&e.OP<=t;return e.kD||!s&&!n?void 0:e.OP}svi(t){this.e1t&&(this.e1t.style.display=t?"block":"none")}constructor(t,i,e){super(),this.Jni=t,this.e1t=i,this._vi=e,this.nvi=t=>{this.svi(!0);const i=qe(t),e=Ks(t);this.yo(new Mtt(i,e))},this.gvi=t=>{this.svi(!1);const i=qe(t),e=Ks(t);this.yo(new Ttt(i,e))},this.rvi=t=>{const i=qe(t),e=Ks(t);this.yo(new Stt(i,e))},this.N0t=t=>{const i=qe(t),e=Ks(t);this.yo(new Itt(i,e))},this.ovi=t=>{const i=qe(t),e=Ks(t);this.yo(new jtt(i,e))},this.hvi=t=>{const i=qe(t),e=Ks(t);this.yo(new Ntt(i,e))},this.Ss=t=>{const i=qe(t),e=Ks(t);this.yo(new Dtt(i,e))},this.avi=t=>{const i=qe(t),e=Ks(t);this.yo(new ktt(i,e))},this.uvi=t=>{const i=qe(t),e=Ks(t);this.yo(new btt(i,e))},this.cvi=t=>{const i=qe(t),e=Ks(t);this.yo(new Ltt(i,e))},this.lvi=t=>{const i=qe(t),e=Ks(t);this.yo(new Ett(i,e))},this.dvi=t=>{const i=qe(t),e=Ks(t);this.yo(new xtt(i,e))},this.fvi=t=>{const i=qe(t),e=Ks(t);this.yo(new Ctt(i,e))},this.e1t&&(this.e1t.style.display="none",this.Jni.setClickElement(this.e1t));const s=google.ima.dai.api.StreamEvent.Type;this.Jni.addEventListener(s.AD_BREAK_STARTED,this.nvi),this.Jni.addEventListener(s.AD_PROGRESS,this.rvi),this.Jni.addEventListener(s.CLICK,this.N0t),this.Jni.addEventListener(s.COMPLETE,this.ovi),this.Jni.addEventListener(s.CUEPOINTS_CHANGED,this.hvi),this.Jni.addEventListener(s.ERROR,this.Ss),this.Jni.addEventListener(s.FIRST_QUARTILE,this.avi),this.Jni.addEventListener(s.LOADED,this.uvi),this.Jni.addEventListener(s.MIDPOINT,this.cvi),this.Jni.addEventListener(s.STARTED,this.lvi),this.Jni.addEventListener(s.STREAM_INITIALIZED,this.dvi),this.Jni.addEventListener(s.THIRD_QUARTILE,this.fvi),this.Jni.addEventListener(s.AD_BREAK_ENDED,this.gvi)}};function Rtt(t){const i=google.ima.dai.api.StreamRequest.StreamFormat;var e;return{apiKey:t.apiKey,authToken:t.authToken,format:"dash"===t.format?i.DASH:i.HLS,networkCode:t.networkCode,streamActivityMonitorId:t.streamActivityMonitorID,adTagParameters:t.adTagParameters,omidAccessModeRules:null!=(e=E3(t.omidAccessModeRules))?e:{}}}function qe(t){const i=t.getStreamData(),e=i.adProgressData;let s;e&&(s={e9t:e.adBreakDuration,Avi:e.duration,s9t:e.adPosition,sD:e.currentTime,ct:e.duration,n9t:e.totalAds});return{yvi:s,bvi:(i.cuepoints||[]).map((t=>({OP:t.start,RP:t.end,kD:t.played}))),Mvi:i.errorMessage||void 0,Tvi:i.manifestFormat||void 0,Svi:i.streamId||void 0,Nvi:(i.subtitles||[]).map((t=>({Ivi:t.webvtt,Dvi:t.ttml,gs:t.language}))),Hu:i.url}}function Ptt(t){return{TXt:t.getAdSlotId(),A4t:t.getContent(),vS:t.getContentType(),Ti:t.getHeight(),ji:t.getWidth()}}function Ks(t){const i=t.getAd();if(!i)return;const e=i.getAdPodInfo(),s=i.getCompanionAds().map(Ptt);return{KXt:i.getAdId(),F9t:{s9t:e.getAdPosition(),M$t:e.getMaxDuration(),Jsi:e.getPodIndex(),UPt:e.getTimeOffset(),n9t:e.getTotalAds()},xHt:i.getAdSystem(),tni:i.getAdvertiserName(),bXt:i.getApiFramework(),QHt:s,sXt:i.getCreativeId(),L8t:i.getCreativeAdId(),ini:i.getDealId(),TC:i.getDescription(),ct:i.getDuration(),iY:i.getTitle(),Evi:i.getUniversalAdIdRegistry(),kvi:i.getUniversalAdIdValue(),T8t:i.getVastMediaHeight(),M8t:i.getVastMediaWidth(),p8t:i.getWrapperAdIds(),A8t:i.getWrapperAdSystems(),y8t:i.getWrapperCreativeIds()}}function ztt(){const t=h.body.lastElementChild;if(t instanceof HTMLIFrameElement&&"Advertisement"===t.title)return t}r(),r(),r();var Btt="theo-dai-clickthrough",Utt="urn:google:dai:2018",Qtt=class{get ga(){const t=this,i=this.Lvi;return{contentTimeForStreamTime:i=>t.Jni?t.Jni.ivi(i):i,streamTimeForContentTime:i=>t.Jni?t.Jni.evi(i):i,replaceAdTagParameters(i){t.Jni&&t.Jni.replaceAdTagParameters(i)},get snapback(){return t.xvi},set snapback(i){t.xvi=i},get sourceTransformer(){return i.Cvi},set sourceTransformer(t){i.Cvi=t}}}rD(t){this.Z9.Dm(),this.Z9=new Ai;xe(Te(this._ni(t,this.Z9.wm),this.Z9))}async _ni(t,i){if(re(i),!this.jvi||!this.Jni)return this.ta.Ovi(t);if(this.jvi.Vst)return;const e=this.ta.nD();if(this.xvi){const s=this.Jni.pvi(t,e);if(s){this.ta.Ovi(s),await this.Jni.Fm(Ss.AD_BREAK_ENDED,i);if(this.Jni.mvi(t).RP>t)return}}this.ta.Ovi(t)}zD(){const t=this.jvi&&this.jvi.Vst;if(t){const i=ge.xn(this.ta.Rvi()),e=t.UPt,s=e+t.M$t,n=new ge([e,s]);return i.Sn(n).ws()}return this.ta.Rvi()}async vnt(t,i){if(!t)return this.ta.Pvi(t,i);let e=t;try{this.ta.nt.yn(di.gE,this.zvi),e=await this.Lvi.Bvi(t,i),this.jvi&&this.Jni&&(this.Uvi=!0)}catch(t){if(wh(t),t.code===sl.LICENSE_INVALID)return;const i=new Ui(Do.SOURCE_NOT_SUPPORTED,"Something went wrong while setting up a Google DAI stream.",t);throw this.FF=be(i),this.YF=i,this.ta.yo(new As(i)),i}await this.ta.Pvi(e,i)}tr(){if(this.Uvi){if(this.ta.nt.fn(di.gE,this.zvi),this.pri){this.pri.fn(Ct.mE,this.Qvi);for(const t of this.pri.L.FE)t.fn(ko.iP,this.Fvi);this.pri=void 0}this.FF=void 0,this.YF=void 0,this.Z9.Dm(),this.jvi&&this.jvi.tr(),this.Jni&&this.Jni.tr(),this.Uvi=!1}}get lt(){return this.FF||this.ta.Yvi()}get cD(){return this.YF||this.ta.Vvi()}gn(){this.tr(),this.ta.Gvi(),this.Jni&&this.Jni.gn()}constructor(t,i,e,s){this.pri=void 0,this.FF=void 0,this.YF=void 0,this.Z9=new Ai,this.Uvi=!1,this.xvi=!0,this.zvi=t=>{const i=t.Lt;i.zt===vs.tU&&(i.Hw===er.ID3||i.Hw===er.EVENT_STREAM&&i.wk===Utt)&&(i.gN=P.vk,this.pri=i,i.yn(Ct.mE,this.Qvi))},this.Qvi=t=>{t.CP.yn(ko.iP,this.Fvi)},this.Fvi=t=>{var i,e;if(this.Jni)if((null==(i=this.pri)?void 0:i.Hw)===er.ID3){const i=t.CP.O;"TXXX"===i.id&&this.Jni.vvi({TXXX:i.text})}else if((null==(e=this.pri)?void 0:e.Hw)===er.EVENT_STREAM){const i=t.CP.O;this.Jni.wvi(Utt,i,t.hB)}},this.ta=t,this.Jni=i,this.jvi=e,this.Lvi=s,e&&i&&this.ta.Uc&&this.ta.Uc.rnt(e.P8t)}};r(),r();var Ftt=class extends H4{get Wvi(){return this.Zvi}get QKt(){return al.Xh}constructor(t,i,e,s=!0){super(e),this.Zvi=s,this.t4t=t,this.i4t=i}},Ytt=class extends P3{Hvi(){const t=[Ss.STARTED,Ss.FIRST_QUARTILE,Ss.MIDPOINT,Ss.THIRD_QUARTILE,Ss.COMPLETE];this.Jni.yn(t,this.Xvi),this.Jni.yn(Ss.AD_BREAK_ENDED,this.gvi),this.Jni.yn(Ss.AD_PROGRESS,this.rvi),this.Jni.yn(Ss.CUEPOINTS_CHANGED,this.hvi)}get H2t(){return this.B8t}get B2t(){return this.r3t}qvi(t){let i=t.F9t.UPt,e=this.K$t||this.findAdBreakWithPredicate(i,(t=>!t.kD));if(!e){const s=t.F9t.M$t;i=this.ta.nD(),e=new Ftt(s,s,i,!1),e.s4t(),this.J$t.push(e)}return e}Kvi(t){switch(t){case Ss.STARTED:this.B8t=!0;break;case Ss.AD_BREAK_ENDED:this.B8t=!1}}Jvi(t,i,e){if(i)switch(t){case Ss.STARTED:case Ss.FIRST_QUARTILE:case Ss.MIDPOINT:case Ss.THIRD_QUARTILE:case Ss.COMPLETE:this.B2t.yo(new Va(this.K$t))}if(e)switch(t){case Ss.STARTED:case Ss.FIRST_QUARTILE:case Ss.MIDPOINT:case Ss.THIRD_QUARTILE:case Ss.COMPLETE:this.B2t.yo(new Nc(this.Q$t,this.Q$t._8t))}switch(t){case Ss.COMPLETE:this.B2t.yo(new ic(this.Q$t,this.R8t._8t));break;case Ss.AD_BREAK_ENDED:this.B2t.yo(new ir(this.Vst))}switch(t){case Ss.FIRST_QUARTILE:this.B2t.yo(new ro(this.Q$t,this.R8t._8t));break;case Ss.MIDPOINT:this.B2t.yo(new ho(this.Q$t,this.R8t._8t));break;case Ss.THIRD_QUARTILE:this.B2t.yo(new oo(this.Q$t,this.R8t._8t))}}$vi(t){const i=t.Kst,e=this.qvi(i),s=function(t,i){if(t.Uc.length)return!1;for(let e=0;e<i;e++){const i=new x3(t,Hs.fKt);t.r4t(i)}return!0}(e,i.F9t.n9t),n=function(t,i){const e=i.F9t.s9t-1;return t.Uc[e]}(e,i),r=function(t,i){return t.g4t!==q4.READY&&(t.b8t(i),!0)}(n,i);this.Q$t=n,this.K$t=e,e.s4t(),this.Jvi(t.type,s,r)}iwi(t){for(const i of this.J$t)if(_n(t,i.UPt))return i}findAdBreakWithPredicate(t,i){for(const e of this.J$t)if(_n(e.UPt,t)&&i(e))return e}get ewi(){const t=this.findAdBreakWithPredicate(0,(t=>t.Wvi));let i=0;return t&&(i=t.M$t),i}swi(t,i){let e;for(const s of this.J$t)s.UPt>=t&&s.UPt<=i&&!s.kD&&(!e||s.UPt>=e.UPt)&&(e=s);return e}Ax(){}nnt(t){}tr(){this.Q$t&&(this.B2t.yo(new ic(this.Q$t,this.Q$t._8t)),this.Q$t=void 0),this.K$t&&(this.B2t.yo(new ir(this.K$t)),this.K$t=void 0),this.B8t=!1,Or(this.J$t)}gn(){this.tr(),this.B2t.gn()}constructor(t,i){super(new gj,al.Xh),this.Jni=t,this.ta=i,this.rvi=t=>{const i=this.K$t;if(!i||!this.Q$t)return;const e=t.tvi.yvi;this.Q$t._8t=e.sD,function(t,i){const e=i.s9t,s=i.e9t,n=i.sD,r=xr(t.Uc.slice(0,e-1),(t=>{var i;return null!=(i=t.ct)?i:0}));t.T$t=s-n-r}(i,e)},this.hvi=t=>{const i=t.tvi.bvi;if(i)for(const t of i)if(!this.iwi(t.OP)){const i=t.RP-t.OP,e=new Ftt(i,i,t.OP,!0);this.J$t.push(e)}},this.Xvi=t=>{this.Kvi(t.type),this.$vi(t)},this.gvi=t=>{this.B8t=!1,this.Q$t=void 0;const i=this.Vst;i&&(i.T$t=0,this.Jvi(t.type,!1,!1),this.K$t=void 0)},this.Hvi()}};function Vtt(t){if(t.sources)if(Kc(t.sources)){for(const i of t.sources)if(yh(i))return!0}else if(jl(t.sources))return yh(t.sources);return!1}r();var Gtt=class{async Bvi(t,i){const e=[],s=[];for(const i of t.sources)if(yh(i)){if(!this.Jni)continue;e.push(i)}else s.push(i);if(0===e.length)return t;let n,r;for(;void 0===n&&0!==e.length;){const{wc:o}=await fu.K_.ZY(e,t),h=o;re(i);try{n=await this.nwi(h,i),s.push(n)}catch(t){wh(t),r=t,Ro(e,h)}}if(0!==t.sources.length&&0===s.length)throw new g("Fatal: unable to play DAI streams.");return r&&ae(r.message),il({},t,{sources:s})}async nwi(t,i){if(!this.Jni)throw new g("Could not find Google\u2019s IMA DAI HTML5 SDK, all DAI sources will be ignored.");const e=this.Jni.Fm(Ss.LOADED,i),s=this.Jni.Fm(Ss.ERROR,i),n=t.type===vt.Dk?"dash":"hls";this.Jni.kQt(il({},t.ssai,{format:n}));const r=await Promise.race([e,s]);if(r.type===Ss.LOADED){const i=t.type===vt.Dk?vt.Dk:vt.Lk;return RN(il({},t,{src:this.Cvi?await this.Cvi(r.tvi.Hu||""):r.tvi.Hu,type:i}))}throw g(r.tvi.Mvi)}constructor(t){this.Jni=t,this.Cvi=t=>t}};sc(function(t){return i=>class extends i{ma(){const t=super.ma(),i=t.ads;if(i){const t=this.rwi.ga;Gr(i,{get dai(){return t}})}return t}get Hl(){return this.owi}Ovi(t){super.rD(t)}rD(t,i){this.rwi.rD(t)}Rvi(){return super.zD()}zD(){return this.rwi.zD()}wa(t){return this.rwi.tr(),super.wa(t)}async Pvi(t,i){return super.vnt(t,i)}async vnt(t,i){return this.rwi.vnt(t,i)}Yvi(){return super.uD()}Vvi(){return super.lD()}uD(){return this.rwi.lt}lD(){return this.rwi.cD}Gvi(){super.gn()}gn(){this.rwi.gn(),this.e1t&&(Xa(this.e1t),this.e1t.removeEventListener("keydown",this.hwi),this.e1t.removeEventListener("click",this.hwi),this.e1t=void 0),this.awi&&(Xa(this.awi),this.awi=void 0)}constructor(i,e){super(i,e),this.owi=!1,this.hwi=t=>{13===t.which&&this.e1t.click(),this.eE()};const s=this.tE(),n=e.ads.googleIma.useAdUiElementForSsai;let r,o;try{var a;n?(this.awi=h.createElement("div"),Tu(this.awi),this.awi.className="theo-dai-ad-ui"):(this.e1t=h.createElement("button"),this.e1t.className=Btt),r=t(s,this.e1t,this.awi),o=new Ytt(r,this);const i=null!=(a=this.e1t)?a:this.awi;i&&this.ke.appendChild(i),this.owi=!0}catch(t){this.e1t=void 0,this.awi=void 0}const u=new Gtt(r);this.rwi=new Qtt(this,r,o,u),this.e1t&&(this.e1t.addEventListener("keydown",this.hwi),this.e1t.addEventListener("click",this.hwi))}}}((function(t,i,e){if(!(s.google&&s.google.ima&&jl(s.google.ima.dai)))throw new g("Could not find Google\u2019s IMA DAI HTML5 SDK, all DAI sources will be ignored.");const n=ztt(),r=new google.ima.dai.api.StreamManager(t,e),o=ztt();return new Ott(r,i,o&&o!==n?o:void 0)})),hh.Est),r(),r(),r();var Wtt=class{get uwi(){return void 0===this.cwi?0:(performance.now()-this.cwi)/1e3}lwi(t){this.dwi=t,this.gwi.fwi(t),this.ta.yn(Qi.so,this.Kfi),this.ta.yn(Qi.tp,this._ri),this.ta.yn(Qi.Dp,this.uai),this.ta.yn(ac.ua,this.j6),this.ta.yn(fa.xO,this._wi),this.ta.yn([fa.DO,fa.EO,fa.CO],this.vwi),this.ta.yn(Qi.Km,this.wwi),Ju._H(this.Gjt)}mwi(){this.ta.fn(Qi.so,this.Kfi),this.ta.fn(Qi.tp,this._ri),this.ta.fn(Qi.Dp,this.uai),this.ta.fn(ac.ua,this.j6),this.ta.fn(fa.xO,this._wi),this.ta.fn([fa.DO,fa.EO,fa.CO],this.vwi),this.ta.fn(Qi.Km,this.wwi),Ju.lH(this.Gjt),this.pwi||(this.gwi.Awi(this.ywi),this.gwi.bwi()),this.Mwi&&this.Swi(),this.dwi=void 0,this.Nwi=!1,this.pwi=!1,this.ywi=-1/0,Or(this.Iwi)}Dwi(){this.Nwi&&this.gwi.Ewi(),this.cwi=performance.now(),this.kwi=v(this.Lwi,6e4)}Swi(){this.gwi.xwi(this.uwi),this.Mwi=!1,this.cwi=void 0,this.kwi&&(m(this.kwi),this.kwi=void 0)}Cwi(){if(j(this.ta._d()))return;const t=10*function(t,i){return x.floor(t/i)}(this.ta.nD()/this.ta._d()*100,10);fh(this.Iwi,t)||(this.Iwi.push(t),this.gwi.jwi(t))}constructor(t,i){this.ta=t,this.gwi=i,this.Nwi=!1,this.pwi=!1,this.Iwi=[],this.ywi=-1/0,this.Mwi=!1,this.Kfi=()=>{this.Nwi||(this.gwi.Owi(),this.Mwi&&this.gwi.Ewi(),this.Nwi=!0)},this._ri=()=>{this.gwi.Rwi(),this.pwi=!0},this.uai=()=>{this.ywi<this.ta.nD()&&(this.ywi=this.ta.nD()),this.Cwi()},this._wi=()=>{this.Nwi&&(this.Pwi=performance.now(),this.gwi.zwi(this.ta.nD()))},this.vwi=()=>{this.Pwi&&(this.gwi.Bwi((performance.now()-this.Pwi)/1e3),this.Pwi=void 0)},this.j6=()=>{this.ywi<this.ta.nD()&&(this.ywi=this.ta.nD()),this.gwi.xnt(this.ta.uD().message)},this.wwi=()=>{const t=this.ta._d()===1/0;t&&!this.Mwi&&(this.Mwi=t,this.Dwi())},this.Gjt=()=>{this.gwi.Awi(this.ywi),this.gwi.Uwi()},this.Lwi=()=>{void 0!==this.cwi&&this.gwi.Qwi(this.uwi)}}};r();var Ztt=class{fwi(t){this.Fwi(["setDocumentTitle",t.itemTitle]),this.Fwi(["setCustomUrl","https://content.streamone.net/embed/cust=Xo9oT45EptMG/account="+t.accountID+"/item="+t.itemID]),this.Fwi(["trackPageView"])}Owi(){this.Ywi("item first play","viewing","1")}bwi(){this.Ywi("item skipped","skipped","1")}jwi(t){this.Ywi("item progress","percent",""+t)}Uwi(){this.Ywi("item abandoned","window closed","1")}Awi(t){this.Ywi("item time","watched",""+t)}Rwi(){this.Ywi("item finished","ended","1")}zwi(t){this.Ywi("buffering started","timestamp",""+t)}Bwi(t){this.Ywi("buffering ended","duration",""+t)}xnt(t){this.Ywi("error","message",""+t)}Ewi(){this.Ywi("livestream first play","viewing","1")}Qwi(t){this.Ywi("livestream progress","duration",""+t)}xwi(t){this.Ywi("livestream time","watched",""+t)}Ywi(t,i,e){this.Fwi(["trackEvent","Video",t,i,e])}Fwi(t){const i="undefined"!=typeof _paq?_paq:void 0;i?i.push(t):console.warn("The Piwik library required for the StreamOne pre-integration was not found. Make sure it is loaded before instantiating THEOplayer.")}};r();var Htt=class{get Vwi(){if(!this.Gwi)return;const t=this.ta.nD()/this.Gwi;return x.floor(4*t)+1}get Wwi(){return void 0!==this.Gwi}lwi(){this.Dc.yn("int",this.__i),this.Dc.yn("ent",this.v_i),this.Dc.yn("KCt",this.m_i),this.Dc.yn("$Ct",this.w_i),this.ta.yn(Qi.Dp,this.uai),Ju._H(this.Gjt)}mwi(){this.Dc.fn("int",this.__i),this.Dc.fn("ent",this.v_i),this.Dc.fn("KCt",this.m_i),this.Dc.fn("$Ct",this.w_i),this.ta.fn(Qi.Dp,this.uai),Or(this.Zwi),Ju.lH(this.Gjt),this.Gwi=void 0}constructor(t,i,e){this.ta=t,this.Dc=i,this.gwi=e,this.Zwi=[],this.__i=()=>{this.Gwi=this.ta._d(),this.gwi.Hwi(this.Gwi)},this.v_i=()=>{this.Gwi&&(this.gwi.Xwi(this.Gwi),Or(this.Zwi),this.Gwi=void 0)},this.m_i=t=>{if(!this.Gwi)return;const i=this.Gwi-this.Gwi*t.S4t;this.gwi.qwi(i),this.Gwi=void 0},this.w_i=()=>{this.Gwi=this.ta._d(),this.gwi.Kwi()},this.uai=()=>{const t=this.Vwi;if(this.Wwi&&t&&!fh(this.Zwi,t)){switch(t){case 1:this.gwi.Jwi();break;case 2:this.gwi.$wi();break;case 3:this.gwi.tmi();break;case 4:this.gwi.imi()}this.Zwi.push(t)}},this.Gjt=()=>{this.gwi.emi()}}};r();var Xtt=class{Hwi(t){this.gwi.Ywi("ad start","duration",""+t)}Xwi(t){this.gwi.Ywi("ad finished","duration",""+t)}qwi(t){this.gwi.Ywi("ad skipped","remaining time",""+t)}Kwi(){this.gwi.Ywi("ad blocker","detected","1")}Jwi(){this.gwi.Ywi("ad progress","firstQuartile","")}$wi(){this.gwi.Ywi("ad progress","secondQuartile","")}tmi(){this.gwi.Ywi("ad progress","thirdQuartile","")}imi(){this.gwi.Ywi("ad progress","fourthQuartile","")}emi(){this.gwi.Ywi("ad abandoned","window closed","1")}constructor(t){this.gwi=t}};function qtt(t){return t&&"streamone"===t.integration}sc((function(t){return class extends t{gn(){this.fn(Qi.ro,this.ho),this.smi&&(this.nmi&&this.nmi.mwi(),this.rmi&&this.rmi.mwi(),this.smi=!1),super.gn()}constructor(t,i){super(t,i),this.smi=!1,this.ho=()=>{this.smi&&(this.nmi.mwi(),this.rmi&&this.rmi.mwi());const t=this.Ya();if(this.smi=!1,!t)return;const i=function(t){if(t.analytics)for(let i of t.analytics)if(qtt(i))return i}(t);i&&(this.smi=!0,this.nmi.lwi(i),this.rmi&&this.rmi.lwi())};const e=new Ztt;if(this.nmi=new Wtt(this,e),this.Uc){const t=new Xtt(e);this.rmi=new Htt(this,this.Uc,t)}this.yn(Qi.ro,this.ho)}}}),hh.xst),r(),r(),r(),r(),r(),r();var Ktt=class extends zQ{async f2(t,i,e){const s=await Jtt(t);await super.f2(s,i,e),this.omi(s,i)}async c2(t,i,e){const s=await Jtt(t);await super.c2(s,i,e),this.omi(s,i)}omi(t,i){const e=this.ami.hmi;if(void 0===e)return;const s=i.j1;let n;if(this.umi!==s&&(this.umi=s,e.setLevelSwitching(s),e.setContainerFormat(2)),function(t){return Ho.call(t,"het")}(i)){const t=i.het,r=i.het+i.ct;n=i.RB,e.newPts(t,r,"video",s)}else 0;e.appendBuffer(t.xS,"video",s,n)}async Rb(t,i,e){var s;await super.Rb(t,i,e),null==(s=this.ami.hmi)||s.flushBuffer(t,i)}constructor(t,i){super(t),this.ami=i,this.umi=void 0}};async function Jtt(t){switch(t.Hw){case z.XK:return t;case z.qM:{const i=await xs(t.xS);return{Hw:z.XK,xS:new T(i)}}case z.qK:throw new g("Opaque initialization segments are not supported on web.")}}var $tt=class extends RQ{got(t){return t.s4===Q.iN?new Ktt(t,this.ami):new zQ(t)}constructor(t,i){super(t),this.ami=i,this.lot(t)}},tit=class extends Co{get hmi(){return this.cmi}lmi(){this.cmi=new LCEVCdec.LCEVCdec(this.jR.VF,this.dmi,{})}ge(){super.ge(),this.fmi()}be(){super.be(),this.dmi.style.display="none"}tr(){return this.dmi.style.display="none",void 0!==this.cmi&&(this.cmi.close(),this.lmi()),super.tr()}Mm(){return this.gmi=!0,void 0!==this.cmi&&(this.cmi.close(),this.cmi=void 0),this.wu.removeChild(this.dmi),super.Mm()}LY(t){this.yo(new Wh(new La(sl.ABORTED,t)))}fmi(){this.jR.VF.style.display="none",this.dmi.style.display="block"}get Zrt(){return this.jR}hot(t){return new $tt(t,this)}oot(t){return new Ws(t)}constructor(t,i){super(t),this.gmi=!1,this._mi=t=>{this.gmi||(t||this.LY("LCEVC SDK failed to initialize."),this.lmi())},this.vmi=()=>{this.gmi||this.LY("LCEVC SDK failed to initialize.")},this.wu=i,this.dmi=h.createElement("canvas"),this.dmi.style.width="100%",this.dmi.style.height="100%",this.dmi.style.position="absolute",this.dmi.style.transform="translate(0%, -100%)",this.dmi.style.display="none",this.wu.appendChild(this.dmi),LCEVCdec.ready.then(this._mi,this.vmi)}},iit=class extends CQ{xY(t){if(t===Q.iN)return this.wmi=new tit(super.xY(t),this.wu),this.wmi}async _Y(t){this.wmi=void 0;const i=t;await i.Mm(),await super._Y(i.Zrt)}get mmi(){return this.wmi}constructor(t,i){super(t),this.wu=i}},eit=class extends iH{async gn(){for(const t of this.aP.FE)t.fn(Ct.zE,this.pmi);this.rt.fn(di.gE,this.Ami),this.rt.fn(di.vE,this.ymi),await super.gn(),await this.jR.Mm(),await this.vY._Y(this.jR)}constructor(t,i,e,s,n,r,o,h){const a=new iit(r,h),u=new rt(a);super(t,i,e,s,n,u.xY(o),h),this.Ami=t=>{t.Lt.yn(Ct.zE,this.pmi)},this.ymi=t=>{t.Lt.fn(Ct.zE,this.pmi)},this.pmi=t=>{var i;const e=null==(i=this.bmi.mmi)?void 0:i.hmi,s=t.bat.dk;null==e||e.setCurrentLevel(s)},this.vY=u,this.bmi=a,this.aP.yn(di.gE,this.Ami),this.aP.yn(di.vE,this.ymi)}};ki(new class extends pQ{Gk(t,i,e,s,n,r,o){const h=new yQ(ga.K_.Srt,ga.K_.Trt,ga.K_.Mrt,ga.K_.Irt);let a=i;return Rs.iM()&&(a=new Rs(a)),new eit(e,s,n,r,h,a,Q.iN,t)}async CY(t){if(!t.lcevc)return!1;if(!await super.CY(t))return!1;if(void 0===s.LCEVCdec)throw new Ui(Do.CONFIGURATION_ERROR,"LCEVC SDK is not loaded.");return!0}OY(){return!1}constructor(...t){super(...t),this.RY=bl.uF}}),r();var sit=class extends t1{async gn(){for(const t of this.aP.FE)t.fn(Ct.zE,this.pmi);this.rt.fn(di.gE,this.Ami),this.rt.fn(di.vE,this.ymi),await super.gn(),await this.vY._Y(this.jR)}constructor(t,i,e,s,n,r,o,h,a){const u=new iit(i,t),c=new rt(u);super(c.xY(Q.iN),e,s,n,r,o,h,a),this.Ami=t=>{t.Lt.yn(Ct.zE,this.pmi)},this.ymi=t=>{t.Lt.fn(Ct.zE,this.pmi)},this.pmi=t=>{var i;const e=null==(i=this.bmi.mmi)?void 0:i.hmi,s=t.bat.eRt.dk;null==e||e.setCurrentLevel(s)},this.vY=c,this.bmi=u,this.aP.yn(di.gE,this.Ami),this.aP.yn(di.vE,this.ymi)}};ki(new class extends e1{Gk(t,i,e,s,n,r,o){return new sit(t,i,e,n,r,L0(s.libraryLocation),new $0(s.libraryLocation),new yQ(ga.K_.Srt,ga.K_.Trt,ga.K_.Mrt,ga.K_.Irt),s)}async CY(t,i){if(!t.lcevc)return!1;if(!await super.CY(t,i))return!1;if(void 0===s.LCEVCdec)throw new Ui(Do.CONFIGURATION_ERROR,"LCEVC SDK is not loaded.");return!0}OY(){return!1}constructor(...t){super(...t),this.RY=bl.fF}}),r(),r(),r(),r();var nit=function(t){return t.Mmi="tr",t.Tmi="Smi",t}({}),rit="freewheel-nonlinear-ad",oit=[Qi.Km,Qi.Dp,Qi.Ep,Qi.vp,fa.CO,Qi.so],hit=class t extends Ve{iE(){this.vY.cV()}Nmi(){this.Imi.yn("tnt",this.Dmi),this.Imi.yn(["int","ent"],this.Emi),this.Imi.yn("$st",this.Ssi)}kmi(){this.Imi.fn("tnt",this.Dmi),this.Imi.fn(["int","ent"],this.Emi),this.Imi.fn("$st",this.Ssi)}Lmi(){this.B2t.iu(this.Imi.xmi)}Cmi(){this.Imi.jmi.yn(oit,this.Ds)}Omi(){this.Imi.jmi.fn(oit,this.Ds)}get P2t(){return this}static get O2t(){return al.Z$t}get O2t(){return t.O2t}get Vst(){var t;return null!=(t=this.Imi.xmi.Vst)?t:null}get Fst(){const t=this.Imi.xmi.R8t;return t?[t]:[]}nnt(t){}nD(){return this.Imi.jmi.sD}rD(t,i){}_d(){return this.Imi.jmi.ct}aD(){return this.Imi.jmi.hD}uD(){return this.FF}lD(){return this.YF}YD(){return 0}WD(){return 0}HD(){return this.Imi.jmi.ZD}XD(t){this.Imi.jmi.ZD=t}pD(){return this.Imi.jmi.mD}yD(t){this.Imi.jmi.mD=t}RD(){return this.Imi.jmi.OD}get Gst(){return this.Imi.xmi.Gst}get Wst(){return this.Imi.xmi.Wst}zD(){return this.Imi.jmi.PD}SD(){return this.Imi.jmi.TD}F2t(t){if(this.H2t||this.Imi.F2t(t),this.Imi.Rmi){if(t.type===Qi.vp&&this.ta.hD)return!0;if(t.type===Qi.tp)return this.Imi.zmi.Pmi(),!0}return!1}be(){this.Imi.be()}eE(){this.TD||this.Imi.jmi.eE()}async Bmi(){if(!this.Imi.Umi)try{await this.Imi.C5t()}catch(t){this.Qmi(t,Oc.GENERAL)}}async Fmi(){if(this.Imi.jmi.Ymi)return this.Imi.jmi.sE(),!1;if(this.Imi.Vmi)try{await this.Imi.zmi.Gmi()}catch(t){this.Qmi(t,Oc.PLAYBACK)}return!0}get Wmi(){return Rt(this.uD())}Qmi(t,i){t.name!==nit.Mmi&&this.B2t.yo(new bh(i,"Ads could not be loaded."))}async sE(){if(this.TD&&this.yo(new us(this.sD)),await this.Bmi(),this.Wmi)return;const t=await this.Fmi();!this.Wmi&&t&&this.Ssi()}J8t(t,i,e){i===Pa.Qst&&this.Imi.J8t(t)}ge(){this.Imi.ge()}Ax(){this.Imi.jmi.Ax()}tE(){return this.Lit}qI(){return this.vY._V.map((t=>t.VF))}q2t(t){}async gn(){await this.nE(),this.Imi.gn(),await this.vY._Y(this.jR),this.kmi(),this.Omi(),this.B2t.vX(this.Imi.xmi)}async nE(){this.Imi.tr(),this.H2t&&(this.ta.ge(),this.o2t(),this.be())}constructor(t,i,e,s,n){super(t,i),this.FF=void 0,this.YF=void 0,this.Emi=t=>{const i=t.Kst,e="int"===t.type;if(i._4t===Hs.l4t){const t=this.ta.ke.classList;e?t.add(rit):t.remove(rit)}e?this.ge():this.be()},this.Dmi=()=>{this.o3t(),this.ta.eE(),this.ta.be()},this.Ssi=()=>{this.Imi.Umi&&(this.ta.hD||this.ta.sE(),this.be(),this.ta.ge(),this.o2t())},this.Imi=s,this.vY=e,this.jR=n,this.Lit=n.VF,this.Lit.controls=!1,this.Nmi(),this.Lmi(),this.Cmi()}};r(),r(),r();var ait=class extends H4{get Zmi(){return this.Hmi}get Xmi(){return this.Uc[this.qmi]}set Kmi(t){this.qmi=t}get Kmi(){return this.qmi}get _4t(){return this.v4t}get QKt(){return al.Z$t}constructor(t,i,e,s){super(e),this.Hmi=s,this.qmi=0,this.v4t=cit(s),this.t4t=t,this.i4t=i}};r();var uit=class extends no{get Jmi(){return this.$mi}set Jmi(t){this.$mi!==t&&(this.$mi=t)}get Ti(){return this.Yl.Zmi.getHeight()}get ji(){return this.Yl.Zmi.getWidth()}get CXt(){return this.Jmi.getEventCallbackUrls(tv.freewheel.SDK.EVENT_AD_CLICK,tv.freewheel.SDK.EVENT_TYPE_CLICK)[0]}get QKt(){return al.Z$t}ma(){return K4(this)}constructor(t,i,e){super(t,i),this.$mi=e}};function cit(t){return t.getTimePositionClass()===tv.freewheel.SDK.TIME_POSITION_CLASS_OVERLAY?Hs.l4t:Hs.fKt}var lit=class t extends G{async tpi(t,i){this.ipi=t,this.epi=i,this.spi(t),await i,this.npi()}get rpi(){return this.opi}get hpi(){return this.upi}get cpi(){return this.lpi}get Vst(){return this.K$t}get R8t(){return this.Q$t}get Gst(){const t=[];if(this.K$t){const i=this.K$t.Kmi;i>=0&&t.push(...this.K$t.Uc.slice(i+1))}for(const i of this.fpi)t.push(...i.Uc);return t}get Wst(){return this.fpi}npi(){this.gpi()}spi(t){t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_STARTED,this._pi),t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,this.vpi),t.addEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION,this.wpi),t.addEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION_END,this.mpi),t.addEventListener(tv.freewheel.SDK.EVENT_AD,this.ppi)}Api(){this.ipi&&(this.ipi.removeEventListener(tv.freewheel.SDK.EVENT_SLOT_STARTED,this._pi),this.ipi.removeEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,this.vpi),this.ipi.removeEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION,this.wpi),this.ipi.removeEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION_END,this.mpi),this.ipi.removeEventListener(tv.freewheel.SDK.EVENT_AD,this.ppi))}gpi(){this.opi=this.ypi(this.bpi),this.upi=this.ypi(this.Mpi).concat(this.ypi(this.Tpi)),this.lpi=this.ypi(this.Spi),this.fpi=this.opi.concat(this.upi).concat(this.lpi)}ypi(t){if(!this.ipi)return[];const i=this.ipi.getSlotsByTimePositionClass(t);return this.Npi(i)}Ipi(t){if(!this.K$t)return void 0;const i=t.getSlot().getAdInstances().indexOf(t);-1!==i&&(this.K$t.Kmi=i);const e=this.K$t.Xmi;return e&&(e.Jmi=t),e}Dpi(t){return So(this.fpi,(i=>i.Zmi===t))}Npi(i){return i.map((i=>{const e=i.getTotalDuration(),s=t.Epi(i);return new ait(e,e,s,i)}))}static kpi(t,i){const e=t.getAdInstances(),s=[];for(const t of e){const e=cit(t.getSlot()),n=new uit(i,e,t),r=[];n.d4t(t.getAdId(),t.getSlot().getWidth(),t.getSlot().getHeight(),t.getDuration(),r,0),i.r4t(n),s.push(n)}return s}o1t(){const t=this.R8t;t&&this.yo(new e3(t,this.Lpi()))}xpi(){const t=this.R8t;t&&(this.yo(new ic(t,t.Jmi.getPlayheadTime())),this.Q$t=void 0)}Cpi(t){const i=this.Vst;i&&(i.T$t=function(t,i,e){void 0===e&&(e=0);let s=0;const n=t.Uc.length;for(let r=i;r<n;r++){const n=t.Uc[r],o=n.ct;if(n){let t=o;r===i&&(t=rh(o-e,0,o)),s+=t}}return s}(i,i.Kmi,t))}static Epi(t){return t.getTimePositionClass()===tv.freewheel.SDK.TIME_POSITION_CLASS_POSTROLL?-1:t.getTimePosition()}Lpi(){const t=this.R8t;if(!t)return 0;const i=t.Jmi;return i.getPlayheadTime()/i.getDuration()}jpi(t){Ro(this.fpi,t),Ro(this.opi,t),Ro(this.upi,t),Ro(this.lpi,t)}tr(){this.Api(),this.opi.length=0,this.upi.length=0,this.lpi.length=0,this.fpi.length=0,this.Q$t=void 0,this.K$t=void 0,this.ipi=void 0,this.epi=void 0}gn(){this.tr(),this.Bo()}constructor(i,e){super(),this.Us=i,this.CM=e,this.bpi=tv.freewheel.SDK.TIME_POSITION_CLASS_PREROLL,this.Mpi=tv.freewheel.SDK.TIME_POSITION_CLASS_MIDROLL,this.Spi=tv.freewheel.SDK.TIME_POSITION_CLASS_POSTROLL,this.Tpi=tv.freewheel.SDK.TIME_POSITION_CLASS_OVERLAY,this.opi=[],this.upi=[],this.lpi=[],this.fpi=[],this._pi=i=>{const e=i.slot,s=this.Dpi(e);s&&(t.kpi(e,s),this.K$t=s,s.s4t(),this.jpi(s),s._4t===Hs.fKt&&this.yo(new Va(s)))},this.vpi=()=>{const t=this.Vst;t&&t._4t===Hs.fKt&&(this.yo(new ir(t)),this.CM.src=""),this.K$t=void 0},this.wpi=t=>{const i=this.Ipi(t.adInstance);i&&(this.yo(new Nc(i,i.Jmi.getPlayheadTime())),this.Q$t=i),t.adInstance.getEventCallbackUrls(tv.freewheel.SDK.EVENT_AD_CLICK,tv.freewheel.SDK.EVENT_TYPE_CLICK).length>0&&(this.Us.style.cursor="pointer",this.Us.addEventListener("click",this.Opi))},this.mpi=()=>{this.Us.style.cursor="",this.Us.removeEventListener("click",this.Opi)},this.Opi=()=>{this.R8t&&this.R8t.Jmi.getRendererController().processEvent({name:tv.freewheel.SDK.EVENT_AD_CLICK})},this.ppi=t=>{switch(t.subType){case tv.freewheel.SDK.EVENT_AD_COMPLETE:this.xpi();break;case tv.freewheel.SDK.EVENT_AD_SKIPPED:this.o1t(),this.xpi()}}}};r();var dit=class t extends G{Rpi(){if(this.zwt){this.zwt.setAdVolume(fit(this.mD,this.ZD))}}Ppi(t){this.zwt=t,this.spi(t)}spi(t){t.addEventListener(tv.freewheel.SDK.EVENT_AD,this.zpi),t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_STARTED,this.Bpi),t.addEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION,this.Upi),t.addEventListener(tv.freewheel.SDK.EVENT_AD_COMPLETE,this.Qpi),t.addEventListener(tv.freewheel.SDK.EVENT_CONTENT_VIDEO_PAUSE_REQUEST,this.Fpi),t.addEventListener(tv.freewheel.SDK.EVENT_CONTENT_VIDEO_RESUME_REQUEST,this.Ypi)}Vpi(){const t=this.zwt;t&&(t.removeEventListener(tv.freewheel.SDK.EVENT_AD,this.zpi),t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_STARTED,this.Bpi),t.removeEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION,this.Upi),t.removeEventListener(tv.freewheel.SDK.EVENT_AD_COMPLETE,this.Qpi),t.removeEventListener(tv.freewheel.SDK.EVENT_CONTENT_VIDEO_PAUSE_REQUEST,this.Fpi),t.removeEventListener(tv.freewheel.SDK.EVENT_CONTENT_VIDEO_RESUME_REQUEST,this.Ypi))}sE(){this.PAt.Vst&&(this.PAt.Vst.Zmi.resume(),this.TD=!1)}eE(){this.PAt.Vst&&(this.PAt.Vst.Zmi.pause(),this.TD=!0)}get sD(){const t=this.PAt.R8t;return t&&(this.sD=t.Jmi.getPlayheadTime()),this.nV}set sD(t){this.nV=t}get ct(){return this.$A}get Ymi(){return!!this.PAt&&void 0!==this.PAt.Vst}get TD(){return this.hV}set TD(t){this.hV=t}get ZD(){return this.Ay}set ZD(t){this.zwt&&this.zwt.setAdVolume(t),this.Ay=t}get mD(){return this.zwt&&(this.Gpi=0===this.zwt.getAdVolume()),this.Gpi}set mD(t){this.zwt&&this.zwt.setAdVolume(fit(t,this.ZD)),this.Gpi=t}get PD(){return this.e3}get hD(){return this.M3}set hD(t){this.M3=t}get OD(){return this.T3}static Wpi(t){switch(t){case"pause":return tv.freewheel.SDK.VIDEO_STATE_PAUSED;case"playing":return tv.freewheel.SDK.VIDEO_STATE_PLAYING;case"ended":return tv.freewheel.SDK.VIDEO_STATE_COMPLETED;case"stop":return tv.freewheel.SDK.VIDEO_STATE_STOPPED}}Zpi(i){const e=t.Wpi(i);this.zwt&&e&&this.zwt.setVideoState(e)}Ax(){const t=this.PAt.R8t;t&&t.Jmi.skip()}tr(){if(this.Vpi(),this.zwt){this.Zpi("stop"),this.zwt.setVideoState(tv.freewheel.SDK.VIDEO_STATE_STOPPED);const t=this.zwt.getTemporalSlots();for(const i of t)i.stop();this.zwt.dispose(),this.zwt=void 0}this.$A=NaN,this.hD=!1,this.T3=$i.KR,this.sD=0,this.Hpi=0,this.TD=!0,void 0!==this.Xpi&&(m(this.Xpi),this.Xpi=void 0)}gn(){this.tr(),this.Bo(),this.PAt.fn("tnt",this.xd),this.Xu.fn(Ah.pn,this.Bpi),this.t1t.removeEventListener("click",this.qpi)}constructor(t,i,e,s){super(),this.ta=t,this.Xu=i,this.PAt=e,this.t1t=s,this.e3=ge.cR().ws(),this.hV=!0,this.$A=NaN,this.Gpi=!1,this.M3=!1,this.T3=$i.KR,this.nV=0,this.Hpi=0,this.zpi=t=>{switch(t.subType){case tv.freewheel.SDK.EVENT_AD_PAUSE:(function(t){if(!t)return!0;const i=t.Jmi,e=i.getPlayheadTime(),s=i.getDuration();return e>=s||_n(s,e)})(this.PAt.R8t)||(this.TD=!0,this.yo(new Ia(this.sD)));break;case tv.freewheel.SDK.EVENT_AD_RESUME:this.TD=!1,this.yo(new fo(this.sD));break;case tv.freewheel.SDK.EVENT_AD_VOLUME_CHANGE:if(this.zwt){const t=this.zwt.getAdVolume();0===t?this.Gpi=!0:this.Ay=t,this.yo(new B(this.sD,this.ZD))}}},this.Upi=()=>{this.hD=!1;const t=this.TD;if(this.TD=!1,t&&(this.yo(new us(this.sD)),this.yo(new fo(this.sD))),this.T3=$i.$R,this.sD=0,!this.PAt.R8t)return;const i=this.PAt.R8t.Jmi;this.$A=i.getDuration(),this.yo(new In(this.$A)),this.Xpi=v((()=>{if(!this.Ymi)return void this._w();this.PAt.Cpi(this.sD);const t=i.getPlayheadTime();Xs(t,this.Hpi,.001)||this.yo(new H(t,void 0)),this.Hpi=t}),250),this.zwt&&this.zwt.setAdVolume(fit(this.mD,this.ZD))},this.qpi=()=>{const t=this.PAt.R8t;t&&(t._4t===Hs.l4t?this.ta.eE():this.TD||this.eE())},this._w=()=>{m(this.Xpi),this.Xpi=void 0},this.Qpi=()=>{this._w(),this.hD=!0},this.Fpi=()=>{this.Zpi("pause")},this.Ypi=()=>{this.Zpi("playing")},this.xd=t=>{t.Yl._4t===Hs.fKt&&(this.TD=!1)},this.Bpi=()=>{this.zwt&&this.zwt.resize(this.Xu.Su,this.Xu.Tu)},this.Ay=t.ZD,e.yn("tnt",this.xd),this.Xu.yn(Ah.pn,this.Bpi),this.t1t.addEventListener("click",this.qpi)}};function fit(t,i){return t?0:i}r(),r();var git=class extends ai{get name(){return nit.Tmi}constructor(){super("A FreeWheel Ad Error occurred")}};r();var _it=class extends ai{get name(){return nit.Mmi}constructor(){super("A FreeWheel Reset Error Occurred")}},vit=0;var wit=class{Kpi(t,i,e){t.setNetwork(i.networkId),t.setServer(i.adServerUrl);const s=this.zwt;if(s.setProfile(i.profile),i.assetId&&i.assetDuration&&s.setVideoAsset(i.assetId,i.assetDuration),i.siteSectionId&&s.setSiteSection(i.siteSectionId),s.registerVideoDisplayBase(e),i.cuePoints&&i.cuePoints.length)for(const t of i.cuePoints)s.addTemporalSlot("cue-"+ ++vit,t.adUnit,t.timeOffset);const n=i.customData;if(jl(n)){const t=_.keys(n);for(const i of t){const t=n[i];s.addKeyValue(i,t)}}}async Jpi(){this.zwt.submitRequest(),await this.$pi.rA}tr(){this.zwt.removeEventListener(tv.freewheel.SDK.EVENT_REQUEST_COMPLETE,this.tAi),this.$pi.sA(new _it)}constructor(t,i,e,s){this.zwt=i,this.tAi=t=>{this.zwt.removeEventListener(tv.freewheel.SDK.EVENT_REQUEST_COMPLETE,this.tAi),t.success?this.$pi.eA(void 0):this.$pi.sA(new git)},this.Kpi(t,e,s),i.addEventListener(tv.freewheel.SDK.EVENT_REQUEST_COMPLETE,this.tAi),this.$pi=new pa}};r(),r();var mit=class{iAi(){this.ipi.removeEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,this.vpi),this.ipi.removeEventListener(tv.freewheel.SDK.EVENT_ERROR,this.vpi)}get eAi(){return this.Im.rA}KQt(){this.iAi(),this.Im.sA(new _it)}constructor(t){this.ipi=t,this.vpi=t=>{this.iAi(),this.Im.eA(void 0)},this.E9t=t=>{this.iAi(),this.Im.sA(new git)},this.Im=new pa,t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,this.vpi),t.addEventListener(tv.freewheel.SDK.EVENT_ERROR,this.E9t)}},pit=class{wP(t){this.ipi=t}Gmi(){return this.sAi(this.nAi.rpi)}Pmi(){this.sAi(this.nAi.cpi)}async sAi(t){if(this.ipi)for(;t.length>0;){this.rAi=new mit(this.ipi);const i=this.rAi.eAi,e=this.nAi.Vst;e&&e._4t===Hs.l4t&&e.Zmi.stop();t.shift().Zmi.play();try{await i}finally{this.rAi=void 0}}}tr(){this.rAi&&(this.rAi.KQt(),this.rAi=void 0),this.oAi=0}gn(){this.ta.fn(Qi.Dp,this.hAi)}constructor(t,i){this.ta=t,this.nAi=i,this.oAi=0,this.hAi=()=>{const t=this.ta.nD();for(const i of this.nAi.hpi){const e=new ge([this.oAi,t],[!0,!0]),s=i.Zmi.getTimePosition();if(e.gr(s))switch(i.Zmi.getTimePositionClass()){case tv.freewheel.SDK.TIME_POSITION_CLASS_MIDROLL:this.sAi([i]);break;case tv.freewheel.SDK.TIME_POSITION_CLASS_OVERLAY:i.Zmi.play(),i.Zmi.setVisible(!0)}}this.oAi=t},t.yn(Qi.Dp,this.hAi)}},Ait=0,yit=class t extends gj{static createUniqueDisplayBaseId(){return"theo-freewheel-"+ ++Ait}get Rmi(){return 0!==this.xmi.cpi.length}get Vmi(){return 0!==this.xmi.rpi.length}async C5t(){if(!this.FKt)throw new g("Invalid state");const t=this.aAi,i=t.newContext();i.setParameter(tv.freewheel.SDK.PARAMETER_RENDERER_VIDEO_DISPLAY_CONTROLS_WHEN_PAUSE,!1,tv.freewheel.SDK.PARAMETER_LEVEL_GLOBAL),i.setParameter(tv.freewheel.SDK.PARAMETER_EXTENSION_CONTENT_VIDEO_ENABLED,!1,tv.freewheel.SDK.PARAMETER_LEVEL_GLOBAL);const e=new wit(t,i,this.FKt,this.uAi),s=this.xmi.tpi(i,e.Jpi());this.cAi.wP(i),this.jmi.Ppi(i),this.lAi=e;try{await s}finally{this.jmi.Rpi(),this.dAi=!0}}get jmi(){return this.M9t}get xmi(){return this.fAi}get Umi(){return this.dAi}static gAi(t,i,e){const s=h.createElement("div");return s.id=e,s.className="theo-freewheel",i.classList.add("theo-freewheel-video"),s.appendChild(i),t.appendChild(s),s}get zmi(){return this.cAi}F2t(t){this.jmi.Zpi(t.type)}ge(){this.t1t.style.display="block",this.CM.style.display="block"}be(){this.t1t.style.display="none",this.CM.style.display="none"}J8t(t){this.FKt=t}tr(){this.dAi=!1,this.FKt=void 0,this.xmi.tr(),this.cAi.tr(),this.lAi&&(this.lAi.tr(),this.lAi=void 0),this.jmi.tr(),this.CM.src=""}gn(){this.tr(),this.M9t.gn(),this.cAi.gn(),this.xmi.gn(),this.t1t.remove(),this.ta.ke.removeChild(this.t1t)}constructor(i,e,n){super(),this.ta=i,this.CM=e,this.dAi=!1,this.uAi=t.createUniqueDisplayBaseId(),this.t1t=t.gAi(i.ke,e,this.uAi),this.aAi=new s.tv.freewheel.SDK.AdManager,this.fAi=new lit(this.t1t,this.CM),this.cAi=new pit(this.ta,this.xmi),this.iu(this.xmi),this.M9t=new dit(i,n,this.xmi,this.t1t)}};function bit(t){if(s.tv)switch(t){case"preroll":return tv.freewheel.SDK.ADUNIT_PREROLL;case"midroll":return tv.freewheel.SDK.ADUNIT_MIDROLL;case"postroll":return tv.freewheel.SDK.ADUNIT_POSTROLL;case"overlay":return tv.freewheel.SDK.ADUNIT_OVERLAY}}function Mit(t,i,e){if(void 0!==i&&j(i)||i<0||i===1/0)return NaN;switch(t){case"preroll":return 0;case"postroll":return e}return b2(i)}Xu.K_.NV(new class{get L2t(){return al.Z$t}SV(t){return t.integration===Mi.FREEWHEEL}x2t(t,i,e){if(!Boolean(s.tv&&s.tv.freewheel&&s.tv.freewheel.SDK&&s.tv.freewheel.SDK.AdManager))return;const n=new Cn(t.Ou,t.zl,1,[Q.iN]);n.wV(t.ke);const r=n.xY(Q.iN),o=new yit(t,r.VF,t.Ou);return new hit(t,i,n,o,r)}YW(t){const i=Wa(t);Kc(i.cuePoints)||(i.cuePoints=[]);const e=[],s=t.assetDuration||0;for(const t of i.cuePoints){const i=Mit(t.adUnit,t.timeOffset,s),n=bit(t.adUnit);!j(i)&&cs(n)?(t.adUnit=n,t.timeOffset=i,e.push(t)):me.lw("Invalid adUnit/timeOffset combination. Cue was removed.")}return i.cuePoints=e,i}o6(t,i,e,s){e.J8t(t,i,s)}}),r(),r(),r(),r(),r();var Tit=self.theoplayerDeviceMetadata;function Sit(t){return t.navigator&&t.navigator.userAgent||""}r(),r(),r(),r();var Nit={"Windows 10":/(Windows 10.0|Windows NT 10.0)/i,"Windows 8.1":/(Windows 8.1|Windows NT 6.3)/i,"Windows 8":/(Windows 8|Windows NT 6.2)/i,"Windows 7":/(Windows 7|Windows NT 6.1)/i,"Windows Vista":/Windows NT 6.0/i,"Windows Server 2003":/Windows NT 5.2/i,"Windows XP":/(Windows NT 5.1|Windows XP)/i,"Windows Phone":/Windows Phone/i,Android:/Android/i,Linux:/(Linux(?!.*Ubuntu)|X11)/,Ubuntu:/Ubuntu/i,iOS:/(iPhone|iPad|iPod)/i,"Mac OS X":/Mac OS X/i,"Mac OS":/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/i,"Chrome OS":/CrOS/i};function Yi(t,i){const e=Nit[i];return!!e&&Boolean(Sit(t).match(e))}function Iit(t){return Yi(t,"Android")}function Dit(t){return Yi(t,"Windows Phone")}function Eit(t){return Yi(t,"iOS")&&!Dit(t)}function kit(t){return Yi(t,"Ubuntu")}var Lit=/Windows (NT|Phone) ([0-9.]+)/i,xit=/Mac.*?(OS |OS X )(\d+(([_.])\d+)?(([_.])\d+)?)/i,Cit={"Windows 10":Lit,"Windows 8.1":Lit,"Windows 8":Lit,"Windows 7":Lit,"Windows Vista":Lit,"Windows Server 2003":Lit,"Windows XP":Lit,"Windows Phone":/Windows Phone ([0-9.]+)/i,Android:/Android (\d+(([_.])\d+)?(([_.])\d+)?)/i,Linux:void 0,Ubuntu:void 0,iOS:/(iPad|iPhone|iPod).*?(OS |os |OS_)(\d+(([_.])\d+)?(([_.])\d+)?)/i,"Mac OS X":xit,"Mac OS":xit,"Chrome OS":void 0};function jit(t,i){const e=Cit[i];return e?Sit(t).match(e):null}function Oit(t){return t.split(/[_.]/).map((t=>C(t,10)))}function Rit(t){if(function(t){return Boolean(Sit(t).match(/Windows/i))}(t)){if(function(t){return Yi(t,"Windows 10")}(t))return"Windows 10";if(Dit(t))return"Windows Phone";if(function(t){return Yi(t,"Windows 8.1")}(t))return"Windows 8.1";if(function(t){return Yi(t,"Windows 8")}(t))return"Windows 8";if(function(t){return Yi(t,"Windows 7")}(t))return"Windows 7";if(function(t){return Yi(t,"Windows Vista")}(t))return"Windows Vista";if(function(t){return Yi(t,"Windows Server 2003")}(t))return"Windows Server 2003";if(function(t){return Yi(t,"Windows XP")}(t))return"Windows XP"}else{if(Iit(t))return"Android";if(Eit(t))return"iOS";if(function(t){return Yi(t,"Mac OS X")}(t))return"Mac OS X";if(function(t){return Yi(t,"Mac OS")}(t))return"Mac OS";if(kit(t))return"Ubuntu";if(function(t){return Yi(t,"Chrome OS")}(t))return"Chrome OS";if(function(t){return Yi(t,"Linux")&&!kit(t)}(t))return"Linux"}}function Pit(t,i){const e=function(t){const i=jit(t,"Windows 10");return i&&i.length>2?Oit(i[2]):void 0}(t),s=function(t){const i=jit(t,"Mac OS X");return i&&i.length>2?Oit(i[2]):void 0}(t),n=function(t){const i=jit(t,"Android");return i&&i.length>1?Oit(i[1]):void 0}(t),r=function(t){const i=jit(t,"iOS");return i&&i.length>3?Oit(i[3]):void 0}(t),o=function(t){const i=jit(t,"Chrome OS");return i&&i.length>0?Oit(i[0]):void 0}(t);return e?e.length>i?e[i]:void 0:s?s.length>i?s[i]:void 0:n?n.length>i?n[i]:void 0:r?r.length>i?r[i]:void 0:o&&o.length>i?o[i]:void 0}function zit(t){const i=function(t){return Pit(t,0)}(t),e=function(t){return Pit(t,1)}(t),s=function(t){return Pit(t,2)}(t);if(void 0!==i)return void 0===e?""+i:void 0===s?i+"."+e:i+"."+e+"."+s}var Bit={Chrome:/Chrome/i,"Chrome Mobile":void 0,"Chrome iOS":/CriOS/i,Chromium:/Chromium/i,HeadlessChrome:/HeadlessChrome/i,Firefox:/Firefox/i,Seamonkey:/Seamonkey/i,"Firefox iOS":/FxiOS/i,Safari:/Safari/i,Edge:/Edge\/\d+/i,"Edge Chromium":/Edg\/\d+/i,IE:/Trident/i,Opera:/Opera|OPR/i,Vivaldi:/Vivaldi/i,"Android Browser":void 0};function Qe(t,i){const e=Bit[i];return!!e&&Boolean(Sit(t).match(e))}function Uit(t){return Boolean(Sit(t).match(/Mobi/i))}function Qit(t){return Boolean(t.chrome&&t.navigator&&t.navigator.vendor&&/google/i.test(t.navigator.vendor))||Fit(t)}function Fit(t){return Qe(t,"Chrome iOS")}function Yit(t){return Qe(t,"Firefox")&&!Git(t)}function Vit(t){return Qe(t,"Firefox Mobile")&&!Git(t)&&Uit(t)}function Git(t){return Qe(t,"Seamonkey")}function Wit(t){return Qe(t,"Firefox iOS")&&!Git(t)}function Zit(t){return Qe(t,"Safari")&&!Qe(t,"Chrome")&&!ui.yg}function Hit(t){return Boolean(iet(t))}function Xit(t){return Qe(t,"Edge")}function qit(t){return Qe(t,"Edge Chromium")}function Kit(t){return Qe(t,"IE")}function Jit(t){return Qe(t,"Vivaldi")}var $it=/chrome\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/i,tet={Chrome:$it,"Chrome Mobile":$it,"Chrome iOS":/CriOS\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/i,Chromium:$it,HeadlessChrome:$it,Firefox:/Firefox\/([0-9.]+)/i,"Firefox iOS":/FxiOS\/([0-9.]+)/i,Safari:/(Version)\/((\d+)\.(\d+)(?:\.(\d+))?).*Safari/,"Safari Mobile":void 0,Edge:/Edge\/(\d+)/i,"Edge Chromium":/Edg\/(\d+)/i,"Edge Mobile":void 0,IE:/(MSIE |Trident.*?rv:)(\d+)/i,Opera:/(OPR\/(\d+\.\d+))|(Opera(?=.*Version\/((\d+)\.(\d+))))/i,"Opera Mobile":void 0,Vivaldi:/Vivaldi\/((\d+)\.(\d+)\.(\d+)(?:\.(\d+))?)/i,"Android Browser":void 0};function Cl(t,i){const e=tet[i];return e?Sit(t).match(e):null}function iet(t){return Cl(t,"Opera")}function eet(t){const i=function(t){return Cl(t,"Firefox")}(t);return i?S(i[1]):0}function set(t){const i=function(t){return Cl(t,"Firefox iOS")}(t);return i?S(i[1].split(".")[0]):0}function net(t){const i=function(t){return Cl(t,"Safari")}(t);return i?S(i[2].split(".")[0]):0}function ret(t){const i=function(t){return Cl(t,"Edge")}(t);return i?S(i[1]):0}function oet(t){const i=function(t){return Cl(t,"Edge Chromium")}(t);return i?S(i[1]):0}function het(t){const i=function(t){return Cl(t,"IE")}(t);return i?S(i[2]):0}function aet(t){const i=function(t){return Cl(t,"Vivaldi")}(t);return i?S(i[1]):0}function uet(t){if(Iit(t))return Qit(t)?"Chrome Mobile":Yit(t)||Vit(t)?"Firefox Mobile":Xit(t)?"Edge Mobile":Hit(t)?"Opera Mobile":"Android Browser";if(Eit(t)){if(Qit(t)||Fit(t))return"Chrome iOS";if(Yit(t)||Wit(t))return"Firefox iOS";if(Xit(t))return"Edge Mobile";if(Zit(t)||function(t){return Zit(t)&&Uit(t)}(t))return"Safari Mobile";if(Hit(t))return"Opera Mobile"}return function(t){return Qe(t,"Chromium")}(t)?"Chromium":function(t){return Qe(t,"HeadlessChrome")}(t)?"HeadlessChrome":Qit(t)?"Chrome":Yit(t)?"Firefox":Zit(t)?"Safari":Xit(t)?"Edge":qit(t)?"Edge Chromium":Kit(t)?"IE":Hit(t)?"Opera":Jit(t)?"Vivaldi":void 0}function cet(t){return Jit(t)?aet(t):Fit(t)?Number(function(t){const i=tet["Chrome iOS"];return i&&i.exec(Sit(t))||[]}(t)[1]):Qit(t)?Number(function(t){const i=tet.Chrome;return i&&i.exec(Sit(t))||[]}(t)[1]):Yit(t)||Vit(t)?eet(t):Wit(t)?set(t):Zit(t)?net(t):Xit(t)?ret(t):qit(t)?oet(t):Kit(t)?het(t):Hit(t)?function(t){const i=iet(t);return i&&i[0].indexOf("Opera")>-1?S(i[5]):i?S(i[2].split(".")[0]):0}(t):void 0}var det=function(t){return t._Ai="pc",t.vAi="console",t.wAi="settop",t.mAi="mobile",t.pAi="tablet",t.AAi="smarttv",t.yAi="searchbot",t}({});function fet(t){const i=Sit(t);return i.match(/CrKey|Roku|AFTS|AppleTV|Nexus Player/i)?"settop":i.match(/Xbox|Playstation|Wii|Nintendo/i)?"console":/(iPad|Tablet|(Android(?!.*Mobi))|(Windows(?!.*Phone)(.*Touch))|Kindle|Playbook|Silk|(Puffin(?!.*(IP|AP|WP))))/i.test(i)?"tablet":/Mobi/.test(i)?"mobile":i.match(/GoogleTV|SmartTV|SMART-TV|Internet TV|NetCast|NETTV|boxee|Kylo|DLNADOC|hbbtv|CE-HTML/i)?"smarttv":i.match(/(nuhk|Googlebot|bingbot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/i)?"searchbot":function(t){return Boolean(uet(t))}(t)?"pc":void 0}var get=class{FW(t){this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_ID,t.deviceID||function(){let t=VA.Jp("deviceId");if(t)return t;let i=Ox();return VA.$p("deviceId",i),i}()),this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.PLAYER,"THEOplayer"),this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.PLAYER_VERSION,"8.11.0"),this.bAi(t),this.MAi(),this.TAi(t),this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.EMPCLIENT_INTEGRATION_VERSION,"3.0"),this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.EMPCLIENT_INTEGRATION_BUILDDATE,"2023-04-17 12:00:00"),t.application&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.APPLICATION,t.application),t.applicationVersion&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.APPLICATION_VERSION,t.applicationVersion),t.userAccountID&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.USER_ACCOUNT_ID,t.userAccountID);const i=t.connectionType;i?this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DATA_CONNECTION_TYPE,i):(this.SAi(),zl.connection&&zl.connection.addEventListener&&zl.connection.addEventListener("change",this.SAi))}bAi(t){this.NAi(t);const i=t.deviceManufacturer||Tit&&Tit.manufacturer;i&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_MANUFACTURER,i);const e=t.deviceModel||Tit&&Tit.model;e&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_MODEL,e)}NAi(t){const i=t.deviceType||function(){const t=fet(self);switch(t){case det.vAi:return"game-console";case det.AAi:return"tv";case det.wAi:return"media-streamer";default:return t}}();i&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_TYPE,i)}MAi(){const t=uet(self);t&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_BROWSER,t);const i=cet(self);void 0!==i&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_BROWSER_VERSION,i.toString())}TAi(t){const i=t.deviceOs||Rit(self);i&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_OS,i);const e=t.deviceOsVersion||zit(self);e&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_OS_VERSION,e.toString())}gn(){zl.connection&&zl.connection.removeEventListener&&zl.connection.removeEventListener("change",this.SAi)}constructor(t,i){this.empClient=t,this.agama=i,this.SAi=()=>{const t=me.VI;switch(t){case"wifi":this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DATA_CONNECTION_TYPE,"wlan");break;case"ethernet":this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DATA_CONNECTION_TYPE,t);break;case"cellular":const i=function(t){switch(t){case"3g":return"mobile/3G";case"4g":return"mobile/4G";default:return}}(me.YI);i&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DATA_CONNECTION_TYPE,i)}}}};sc(function(t){return i=>class extends i{rD(t,i){this.IAi&&this.IAi.EG(),super.rD(t)}gn(){this.IAi&&this.IAi.gn(),super.gn()}constructor(i,e){super(i,e),this.mG=new t,this.IAi=new Px(this,this.mG,e)}}}(class extends Nx{iE(t){this.DAi=t,this.EAi&&(this.mG=function(t,i){const e=function(t,i){switch(i){case"info":return t.LogLevel.INFO;case"debug":return t.LogLevel.DEBUG;case"warning":return t.LogLevel.WARNING;case"error":return t.LogLevel.ERROR;default:return t.LogLevel.FATAL}}(i,t.logLevel);i.setLogLevel(e);const s=new i.EMPClient(t.config);return function(t,i){return t.setExternalConfig(i.config),t}(s,t)}(t,this.EAi),this.mG&&(this.kAi=new get(this.mG,this.EAi),this.do=!0))}QW(){return this.EAi||console.warn("Please load the Agama Library (empclient.min.js) in order to use the integration"),!!this.EAi}BW(){return this.do}vW(t,i){if(this.mG&&this.EAi)switch(t){case Go.BV:this.mG.setMeasurement(this.EAi.Measurement.BUFFER_LENGTH,i);break;case Go.QV:this.mG.setMeasurement(this.EAi.Measurement.BYTES_RECEIVED,i);break;case Go.YV:this.mG.setMeasurement(this.EAi.Measurement.SEGMENT_PROFILE_BITRATE,i);break;case Go.VV:this.mG.setMeasurement(this.EAi.Measurement.VIDEO_PROFILE_BITRATE,i);break;case Go.FV:this.mG.setMeasurement(this.EAi.Measurement.SEGMENT_READ_BITRATE,i);break;case Go.jV:this.mG.setMeasurement(this.EAi.Measurement.HTTP_REQUEST_STATUS_CODE_1XX,i);break;case Go.OV:this.mG.setMeasurement(this.EAi.Measurement.HTTP_REQUEST_STATUS_CODE_2XX,i);break;case Go.RV:this.mG.setMeasurement(this.EAi.Measurement.HTTP_REQUEST_STATUS_CODE_3XX,i);break;case Go.PV:this.mG.setMeasurement(this.EAi.Measurement.HTTP_REQUEST_STATUS_CODE_4XX,i);break;case Go.zV:this.mG.setMeasurement(this.EAi.Measurement.HTTP_REQUEST_STATUS_CODE_5XX,i);break;case Go.WV:this.mG.setMeasurement(this.EAi.Measurement.PLAYBACK_POSITION,i);break;case Go.ZV:this.mG.setMeasurement(this.EAi.Measurement.NUMBER_OF_FRAMES_DECODED,i);break;case Go.GV:this.mG.setMeasurement(this.EAi.Measurement.NUMBER_OF_FRAMES_DROPPED,i)}}KG(t,i){if(this.mG&&this.EAi)switch(t){case nl.JV:this.mG.setSessionMetadata(this.EAi.SessionMetadata.ASSET_DURATION,i);break;case nl.KV:this.mG.setSessionMetadata(this.EAi.SessionMetadata.MANIFEST_URI,i);break;case nl.$V:this.mG.setSessionMetadata(this.EAi.SessionMetadata.NUMBER_OF_CONTENT_PROFILES,i);break;case nl.eG:this.mG.setSessionMetadata(this.EAi.SessionMetadata.SERVICE_NAME,i);break;case nl.tG:this.mG.setSessionMetadata(this.EAi.SessionMetadata.CDN,i);break;case nl.iG:this.mG.setSessionMetadata(this.EAi.SessionMetadata.CONTENT_TITLE,i);break;case nl.sG:this.mG.setSessionMetadata(this.EAi.SessionMetadata.CONTENT_TYPE,i);break;case nl.nG:this.mG.setSessionMetadata(this.EAi.SessionMetadata.CONTENT_DESCRIPTION,i)}}FW(){this.kAi&&this.DAi&&this.kAi.FW(this.DAi)}UW(t,i){this.EAi&&this.mG&&(this.bW(),function(t,i,e,s){const n=Rx(t,e,s);i.abrSession(n,t.ViewState.INITIAL_BUFFERING)}(this.EAi,this.mG,t,i),this.LAi=!0)}gn(){this.kAi&&this.kAi.gn(),this.xAi(Mx.rG),this.mG=void 0}OG(t){this.CAi(t)}UG(t,i){this.mG&&this.mG.event(t.code,i)}bW(){this.mG&&this.LAi&&(this.mG.exitSession(),this.LAi=!1)}xAi(t){if(this.mG&&this.EAi&&(this.bW(),t===Mx.rG))this.mG.shutdown(this.EAi.ShutdownType.NORMAL_SHUTDOWN)}zG(t,i,e){this.CAi(t,i,e)}CAi(t,i,e){if(this.mG&&this.EAi)switch(t){case bx.CO:this.jAi(this.EAi.ViewState.PLAYING,i,e);break;case bx.LV:this.jAi(this.EAi.ViewState.FAILED,i,e);break;case bx.xV:this.jAi(this.EAi.ViewState.INITIAL_BUFFERING,i,e);break;case bx.DV:this.jAi(this.EAi.ViewState.PAUSED,i,e);break;case bx.EV:this.jAi(this.EAi.ViewState.SEEK,i,e);break;case bx.kV:this.jAi(this.EAi.ViewState.STALLED,i,e);break;case bx.CV:this.jAi(this.EAi.ViewState.NO_ACCESS,i,e)}}jAi(t,i,e){if(this.mG)if(i){const s=function(t){return t||""}(e);this.mG.viewStateExtended(t,i.code,s)}else this.mG.viewStateChanged(t)}constructor(){super(),this.do=!1,this.LAi=!1,this.EAi=oi.Agama}}),hh.xst),r(),r(),r(),r(),r();var _et=function(t){return t.PLAY_ALL="play-all",t.PLAY_NONE="play-none",t.PLAY_LAST="play-last",t}({});r();var yr=function(t){return t.VOD="vod",t.LIVE="live",t}({}),vet=class{get ga(){return this.OAi.ga}get lt(){return this.FF}get cD(){return this.YF}RAi(t){this.FF=be(t),this.YF=t,this.ta.yo(new As(t))}wa(t){this.PAi.tr(),this.zAi.iA(),this.BAi=!1,this.ta.UAi(t)}async vnt(t,i){if(this.QAi.tr(),this.BAi=!1,!t||!function(t){return t.sources.some((t=>t.integration===eI.VERIZON_MEDIA))}(t))return await this.ta.FAi(t,i);try{this.YAi=await this.VAi.Bvi(t),await this.ta.FAi(this.YAi,i)}catch(t){this.RAi(new Ui(Do.MANIFEST_LOAD_ERROR,t.message,t))}}gn(){this.Z9.Dm(),this.GAi.Dm(),this.ta.fn(Qi.Xm,this.WAi),this.ta.fn(Qi.so,this.Kfi),this.ta.fn(Qi.Dp,this.uai),this.ta.fn(Qi.tp,this._ri),this.ta.fn(fa.kO,this.kd);for(const t of this.PAi.I$t.Ju)t.fn("ZAi",this.HAi),t.fn("tnt",this.XAi),t.fn("$st",this.qAi);this.PAi.I$t.fn("qst",this.KAi),this.PAi.I$t.fn("Xst",this.JAi),this.PAi.gn(),this.e1t&&(this.e1t.Mm(),this.e1t=void 0),this.BAi=!1}async fetchAssetInfo(t){if(t&&t.integrationData)try{const i=await this.$Ai.eTt(t.integrationData.source.prefix,t.integrationData.source.id,this.GAi.wm,t.integrationData.preplayResponse.sid);this.OAi.tyi(i),this.zAi.iyi(i,this.PAi.I$t.Ju)}catch(t){0}}eyi(t){this.PAi.syi(t),this.PAi.Fst.forEach((i=>i.nyi(t))),this.PAi.ryi(this.ta.zD()),this.i1t()}rD(t){if(this.PAi.Vst)return;this.Z9.Dm(),this.Z9=new Ai;xe(Te(this._ni(t,this.Z9.wm),this.Z9))}async _ni(t,i){if(re(i),t<this.ta.nD())return void this.oyi(t);let e=[];switch(this.PAi.hyi){case _et.PLAY_ALL:e=this.PAi.ayi(this.ta.nD(),t),await this.uyi(t,e,i);break;case _et.PLAY_LAST:const s=this.PAi.ayi(this.ta.nD(),t).pop();e=s?[s]:[],await this.uyi(t,e,i);break;case _et.PLAY_NONE:this.cyi(t)}}oyi(t){const i=So(this.PAi.I$t.Ju,(i=>i.wut.gr(t)));i?this.ta.lyi(i.OP):this.ta.lyi(t)}cyi(t){const i=this.PAi.ayi(this.ta.nD(),t).pop();i&&i.wut.gr(t)?this.ta.lyi(i.RP):this.ta.lyi(t)}async uyi(t,i,e){for(const t of i)await this.dyi(t,e);const s=i[i.length-1];s&&s.wut.gr(t)?this.ta.nD()<t&&this.ta.lyi(s.RP):this.ta.lyi(t)}async dyi(t,i){t.fn("ZAi",this.HAi);const e=Promise.race([t.Fm("$st",i),t.Fm("ZAi",i)]);this.eyi(this.ta.nD()),t.Yh||this.ta.lyi(t.OP),await e,t.yn("ZAi",this.HAi)}i1t(){const t=So(this.PAi.Fst,(t=>t.fyi.length>0));if(t){const i=t.fyi[0];this.e1t||(this.e1t=new _4(this.ta.ke),this.e1t.yn("clickstart",this.gyi)),this.e1t._0t=i}else this.e1t&&(this.e1t.Mm(),this.e1t=void 0)}constructor(t,i,e,s,n,r,o){this.ta=t,this.QAi=i,this.VAi=e,this.PAi=s,this.OAi=n,this.$Ai=r,this.zAi=o,this.FF=void 0,this.YF=void 0,this.Z9=new Ai,this.GAi=new Ai,this._yi=void 0,this.BAi=!1,this.e1t=void 0,this.WAi=t=>{const i=t.currentSource;if(!i||!i.integrationData)return;const{preplayResponse:e,source:s}=i.integrationData;this.OAi.vyi(e),e&&e.type===yr.VOD&&e.ads&&this.PAi.iyi(e.ads),this.QAi.wyi=i.integrationData,s.assetInfo&&xe(this.fetchAssetInfo(i))},this.Kfi=()=>{this.BAi=!0},this.uai=()=>{this.BAi&&this.eyi(this.ta.nD())},this._ri=()=>{this.BAi&&(this.eyi(1/0),this.BAi=!1)},this.kd=()=>{xe(this.QAi.Cn())},this.HAi=t=>{this.Z9.Dm(),this.Z9=new Ai;xe(Te(this._ni(t.Yl.RP,this.Z9.wm),this.Z9))},this.XAi=()=>{1!==this.ta.ND&&(this._yi=this.ta.ND,this.ta.ND=1)},this.qAi=()=>{void 0!==this._yi&&(this.ta.ND=this._yi,this._yi=void 0)},this.KAi=t=>{t.Yl.yn("ZAi",this.HAi),t.Yl.yn("tnt",this.XAi),t.Yl.yn("$st",this.qAi)},this.JAi=t=>{t.Yl.fn("ZAi",this.HAi),t.Yl.fn("tnt",this.XAi),t.Yl.fn("$st",this.qAi)},this.gyi=()=>{this.ta.eE()},this.ta.yn(Qi.Xm,this.WAi),this.ta.yn(Qi.so,this.Kfi),this.ta.yn(Qi.Dp,this.uai),this.ta.yn(Qi.tp,this._ri),this.ta.yn(fa.kO,this.kd),this.PAi.I$t.yn("qst",this.KAi),this.PAi.I$t.yn("Xst",this.JAi)}};r(),r();var wet=Dc({breaksIndex:$,adsIndex:$,startTime:$,endTime:$}),met=Dc({index:$,timeOffset:$}),pet=Dc({duration:$,apiFramework:oa(rl,hL),creative:rl,mimeType:rl,width:$,height:$,companions:hc(function(t){return new wL(t)}((()=>pet))),extensions:oa(ru,hc(_h)),fw_parameters:oa(ru,vL(rl)),events:vL(hc(rl))}),Aet=Dc({type:dL(["linear","nonlinear"]),position:dL(["preroll","midroll","postroll","pause","overlay",""]),timeOffset:$,duration:$,ads:hc(pet),events:vL(hc(rl))}),yet=Dc({breaks:hc(Aet),breakOffsets:hc(met),placeholderOffsets:hc(wet)}),bet=Dc({fairplayCertificateURL:oa(ru,rl),widevineLicenseURL:oa(ru,rl),playreadyLicenseURL:oa(ru,rl)}),Met={type:dL(cL(yr)),playURL:rl,prefix:rl,sid:rl,drm:oa(ru,bet)},Tet=Dc(il({},Met,{type:dL([yr.VOD]),ads:yet,interstitialURL:oa(rl,hL,ru)})),Net=oa(Tet,Dc(il({},Met,{type:dL([yr.LIVE])})));r();var Iet=rl,Det=Dc({userId:rl,externalId:oa(rl,hc(rl))}),Eet=class{async eTt(t){try{return this.myi(t)}catch(t){throw t}}async myi(t){const i=await async function(t){const i=t.prefix,e=ket[t.assetType],s=function(t){if(hc(Iet).BQ(t))return 1===t.length?t[0]:t.join(",")+"/multiple";if(Iet.BQ(t))return t;if(Det.BQ(t)&&Kc(t.externalId))return 1===t.externalId.length?"ext/"+t.userId+"/"+t.externalId[0]:"ext/"+t.userId+"/"+t.externalId.join(",")+"/multiple";if(Det.BQ(t))return"ext/"+t.userId+"/"+t.externalId;throw new w("Invalid asset id")}(t.id),n=await async function(t){if(t&&await me.Aw())return{rmt:"fps",manifest:"m3u8"};if(t&&await me.Mw())return{rmt:"wv",manifest:"mpd"};if(t&&await me.yw())return{rmt:"pr",manifest:"mpd"};return{}}(t.contentProtected),r=function(t,i){const e=Let(t,i);return e?{"ad.cping":"1","ad.pingf":String(e)}:{}}(t.assetType,t.ping);let o={};Kc(t.preplayParameters)?t.preplayParameters.forEach((t=>{o[t[0]]=t[1]})):o=t.preplayParameters;const h=i+"/preplay/"+e+s+".json";return qr(h,il({v:"2"},o,n,r,o))}(t),e=this.dU.jS({hN:Ml.GET,Hu:i,CS:Me.XM}),s=await e,n=il({},await s.xS(),{type:t.assetType===Ds.ASSET?yr.VOD:yr.LIVE});return Net.BQ(n)||Net.QQ(n,"PreplayResponse"),n}constructor(t){this.dU=t}},ket={[Ds.ASSET]:"",[Ds.CHANNEL]:"channel/",[Ds.EVENT]:"event/"};function Let(t,i){const e=t!==Ds.ASSET;return(!e&&i.adImpressions?1:0)+(!e&&i.freeWheelVideoViews?2:0)+(e&&i.linearAdData?4:0)}r(),r();var xet=Dc({ad_id:rl,apiFramework:oa(hL,rl),companions:hc(_h),creative:rl,duration:$,mimeType:rl,height:$,width:$,extensions:oa(ru,hc(_h)),fw_parameters:oa(ru,vL(rl))}),Cet=Dc({breakId:rl,ads:hc(xet),type:dL(["linear","nonlinear"]),position:dL(["preroll","midroll","postroll","pause","overlay",""]),timeOffset:$,duration:$,height:oa(ru,$),width:oa(ru,$),events:vL(hc(rl))}),jet=Dc({breaks:hc(Cet)}),Oet=Dc({next_time:$,ads:oa(ru,jet),extensions:oa(ru,hc(_h)),error:oa(ru,rl),currentBreakEnd:oa(ru,$)}),Ret=function(t){return t.hTt="start",t.EV="seek",t}({}),Pet=class{async eTt(t,i){try{return this.myi(t,i)}catch(t){throw t}}async myi(t,i){const e=function(t){const i={v:"3",pt:String(t.currentTime)};(function(t){return void 0!==t.seekTime})(t)&&t.hasFreeWheelVideoViews&&(i.ft=String(t.seekTime));t.event&&(i.ev=t.event);return qr(t.zonePrefix+"/session/ping/"+t.sessionId+".json",il({},i))}(t),s=this.dU.jS({hN:Ml.GET,Hu:e,CS:Me.XM,wm:i}),n=await s,r=await n.xS();return Oet.BQ(r)||Oet.QQ(r,"PingResponse"),r}constructor(t){this.dU=t}};r(),r();var zet=class extends ps{get kN(){return this.LN}ma(){return new Bet(this.LN)}constructor(t){super("pyi"),this.LN=t}},Bet=class extends Gs{constructor(t){super("pingresponse"),this.response=t}};r();var Uet=class extends ps{get lt(){return this.FF}ma(){return new Qet(this.FF)}constructor(t){super("Ayi"),this.FF=t}},Qet=class extends Gs{constructor(t){super("pingerror"),this.error=t}},Fet=class extends Bo{set wyi(t){this.yyi=t}get byi(){return this.Myi}async Cn(){const t=this.yyi;if(!t)return;0!==Let(t.source.assetType,t.source.ping)&&(this.Myi=this.ta.zD().start(0),await this.Tyi(Ret.hTt),this.ta.yn("timeupdate",this.Syi),this.ta.yn("seeking",this.Nyi))}async Tyi(t,i){const e=this.yyi.preplayResponse,s={};if(j(this.Myi))return void 0;if(Rt(this.Iyi)&&_n(this.Iyi,this.ta.nD()-this.Myi))return;void 0!==i&&(s.seekTime=i),void 0!==t&&(s.event=t);let n,r=this.ta.nD()-this.Myi;t===Ret.hTt?r=0:t!==Ret.EV&&this.Dyi&&(r=x.min(r,this.Dyi)),this.Iyi=r;try{var o;const t=await this.Eyi.eTt(il({zonePrefix:e.prefix,sessionId:e.sid,currentTime:r,hasFreeWheelVideoViews:null==(o=this.yyi)?void 0:o.source.ping.freeWheelVideoViews},s),this.bM.wm);this.yo(new zet(t)),this.Dyi=-1!==t.next_time?t.next_time:void 0,n=t.error}catch(t){F(t)||(n=t.message)}finally{n&&this.yo(new Uet(n))}}tr(){this.Dyi=void 0,this.yyi=void 0,this.Myi=NaN,this.kyi=!1,this.Lyi=NaN,this.Iyi=void 0,this.ta.fn("seeking",this.Nyi),this.ta.fn("timeupdate",this.Syi),this.xyi()}xyi(){this.bM.Dm(),this.bM=new Ai}gn(){this.tr()}constructor(t,i){super(),this.Eyi=t,this.ta=i,this.Myi=NaN,this.Dyi=void 0,this.kyi=!1,this.Lyi=NaN,this.bM=new Ai,this.Iyi=void 0,this.Syi=async()=>{const t=this.ta.nD();if(this.Lyi=t,this.kyi||wd(this.Dyi)||j(this.Myi))return;this.Myi+this.Dyi<=t&&(this.kyi=!0,await this.Tyi(),this.kyi=!1)},this.Nyi=()=>{if(this.ta.nD()===this.Myi)return;this.kyi&&this.xyi(),this.Lyi=this.ta.nD();const t=this.Lyi-(this.Myi||0);j(t)?xe(this.Tyi(Ret.EV,0)):xe(this.Tyi(Ret.EV,t))}}};r();var Yet=class{async Bvi(t){const i=[];for(const e of t.sources)if(Vet(e))try{const s=Wet({source:e,preplayResponse:await this.Cyi.eTt(e)},t,this.AK);s.src&&(s.src=qr(s.src,e.playbackUrlParameters)),i.push(s)}catch(t){0}else i.push(e);if(0!==t.sources.length&&0===i.length)throw new g("Fatal: unable to play VerizonMediaSources.");return il({},t,{sources:i})}constructor(t,i){this.Cyi=t,this.AK=i}};function Vet(t){return"verizon-media"===t.integration}function Get(t){if(t.sources)if(Kc(t.sources)){for(const i of t.sources)if(!cs(i)&&"verizon-media"===i.integration)return!0}else if(!cs(t.sources))return"verizon-media"===t.sources.integration;return!1}function Wet(t,i,e){const s=t.preplayResponse;let n;t.source.contentProtected&&s.drm&&(n={integration:"uplynk"},s.drm.fairplayCertificateURL&&(n.fairplay={certificateURL:s.drm.fairplayCertificateURL}),s.drm.widevineLicenseURL&&(n.widevine={licenseAcquisitionURL:s.drm.widevineLicenseURL}),s.drm.playreadyLicenseURL&&(n.playready={licenseAcquisitionURL:s.drm.playreadyLicenseURL}));const r=RN({src:s.playURL,contentProtection:n,useNativePlayback:t.source.useNativePlayback,hls:t.source.hls,dash:t.source.dash,seamlessSwitchStrategy:t.source.seamlessSwitchStrategy},i,e);return r.integrationData=t,r}r(),r(),r();var Zet=class extends ps{ma(){return new Het(this.Yl.ga)}constructor(t,i){super("tnt"),this.Yl=t,this.hB=i}},Het=class extends Gs{constructor(t){super("adbreakbegin"),this.adBreak=t}};r();var Xet=class extends ps{ma(){return new qet(this.Yl.ga)}constructor(t,i){super("$st"),this.Yl=t,this.hB=i}},qet=class extends Gs{constructor(t){super("adbreakend"),this.adBreak=t}};r();var Ket=class extends ps{ma(){return new Jet(this.Yl.ga)}constructor(t){super("ZAi"),this.Yl=t}},Jet=class extends Gs{constructor(t){super("adbreakskip"),this.adBreak=t}};r(),r();var $et=class extends ps{ma(){return new tst(this.Yl.ga)}constructor(t){super("I4t"),this.Yl=t}},tst=class extends Gs{constructor(t){super("updateadbreak"),this.adBreak=t}},ist=class extends G{get ga(){return this.Za||(this.Za=function(t){let i;const e={get startTime(){return t.OP},get endTime(){return t.RP},get duration(){return t.ct},get ads(){return t.Uc.ga},get skipOffset(){return t.uqt},set skipOffset(i){t.uqt=i},addEventListener(t,e){i.yn(t,e)},removeEventListener(t,e){i.fn(t,e)}};return i=new xi(t,e),e}(this)),this.Za}get OP(){return this.GP}get RP(){return this.$A?this.GP+this.$A:void 0}jyi(t){this.$A=t-this.OP;for(const i of this.Uc.Ju)i.OP>t&&this.Uc.Rb(i);this.yo(new $et(this))}get ct(){return this.$A}get wut(){const t=this.RP;return Rt(t)?new ge([this.OP,t]):ge.cR()}get Uc(){return this.Dc}get Oyi(){return this.Ryi}get Yh(){return this.Kh}get uqt(){return this.Mwi?-1:this.cqt}set uqt(t){this.Mwi||(this.cqt=t)}Bct(t){return t>=this.OP&&(wd(this.ct)||t<=this.OP+this.ct)}Pyi(t){return-1!==this.uqt&&(!!Rt(this.RP)&&t-this.OP>=this.uqt)}Ax(){this.Dc.Ju.forEach((t=>t.Ax())),this.yo(new Ket(this))}zyi(t){const i=Rt(this.RP)&&t>=this.RP,e=this.OP<=t&&!i&&!this.Yh,s=this.Yh&&this.RP&&t>=this.RP;e&&(this.Kh=!0,this.yo(new Zet(this,this.OP))),this.Dc.Ju.forEach((i=>i.zyi(t))),s&&(this.Ryi=!0,this.Kh=!1,this.yo(new Xet(this,this.RP)))}constructor(t,i,e,s,n){super(),this.GP=t,this.$A=i,this.Dc=e,this.Mwi=s,this.Kh=!1,this.Ryi=!1,this.cqt=n}};r(),r();var est=class extends ps{ma(){return new sst(this.Kst.ga)}constructor(t,i){super("int"),this.Kst=t,this.hB=i}},sst=class extends Gs{constructor(t){super("adbegin"),this.ad=t}};r();var nst=class extends ps{ma(){return new rst(this.Kst.ga)}constructor(t,i){super("ent"),this.Kst=t,this.hB=i}},rst=class extends Gs{constructor(t){super("adend"),this.ad=t}};r(),r();var ost=class extends ps{ma(){return new hst(this.Kst.ga)}constructor(t){super("Byi"),this.Kst=t}},hst=class extends Gs{constructor(t){super("removead"),this.ad=t}},rc=class extends Pu{Sii(t){}Eii(t){this.yo(new ost(t))}constructor(){super()}};r();var ast=class extends ps{ma(){return new ust(this.Kst.ga)}constructor(t){super("E4t"),this.Kst=t}},ust=class extends Gs{constructor(t){super("adfirstquartile"),this.ad=t}},cst=class extends ps{ma(){return new lst(this.Kst.ga)}constructor(t){super("k4t"),this.Kst=t}},lst=class extends Gs{constructor(t){super("admidpoint"),this.ad=t}},dst=class extends ps{ma(){return new fst(this.Kst.ga)}constructor(t){super("L4t"),this.Kst=t}},fst=class extends Gs{constructor(t){super("adthirdquartile"),this.ad=t}},gst=class extends ps{ma(){return new _st(this.Kst.ga)}constructor(t){super("Uyi"),this.Kst=t}},_st=class extends Gs{constructor(t){super("adcomplete"),this.ad=t}};r();var vst=class t extends G{static Qyi(i,e){return new t(i,e.duration,e.apiFramework||"",e.creative,e.mimeType,e.width,e.height,e.companions.map((e=>t.Qyi(i,e))),e.extensions,e.fw_parameters,e.events,void 0)}static Fyi(i,e){return new t(i,e.duration,e.apiFramework||"",e.creative,e.mimeType,e.width,e.height,e.companions.map((e=>t.Fyi(i,e))),e.extensions,e.fw_parameters,void 0,e.ad_id)}get ga(){return this.Za||(this.Za=function(t){let i;const e={get apiFramework(){return t.bXt},get companions(){return t.dXt.ga},get creative(){return t.Yyi},get duration(){return t.ct},get endTime(){return t.RP},get events(){return t.WZ},get extensions(){return t.Vyi},get freeWheelParameters(){return t.Gyi},get height(){return t.Ti},get mimeType(){return t.GZ},get startTime(){return t.OP},get width(){return t.ji},addEventListener(t,e){i.yn(t,e)},removeEventListener(t,e){i.fn(t,e)}};return i=new xi(t,e),e}(this)),this.Za}get OP(){return this.GP}get RP(){return this.GP+this.$A}get ct(){return this.$A}get bXt(){return this.MXt}get Yyi(){return this.Wyi}get GZ(){return this.hH}get ji(){return this.My}get Ti(){return this.Ty}get WZ(){return this.Md}get dXt(){return this.fXt}get Vyi(){return this.Zyi}get Gyi(){return this.Hyi}get Yh(){return this.Kh}get fyi(){var t;return null!=(t=this.Md.clickthroughs)?t:[]}zyi(t){const i=this.OP<=t&&t<this.RP,e=i&&!this.Yh,s=!i&&this.Yh;e&&(this.Xyi=!1,this.qyi=!1,this.Kyi=!1,this.Jyi=!1,this.Kh=!0,this.yo(new est(this,this.OP))),s&&(this.Kh=!1,this.yo(new nst(this,this.RP)))}nyi(t){const i=(t-this.OP)/this.ct;!this.Xyi&&i>=.25&&(this.Xyi=!0,this.yo(new ast(this))),!this.qyi&&i>=.5&&(this.qyi=!0,this.yo(new cst(this))),!this.Kyi&&i>=.75&&(this.Kyi=!0,this.yo(new dst(this))),!this.Jyi&&i>=.9999&&(this.Jyi=!0,this.yo(new gst(this)))}Ax(){this.Xyi=!0,this.qyi=!0,this.Kyi=!0,this.Jyi=!0}gn(){this.fn("int",this.$yi),this.fn("ent",this.tbi)}constructor(t,i,e,s,n,r,o,h,a=[],u={},c={},l){super(),this.GP=t,this.$A=i,this.MXt=e,this.Wyi=s,this.hH=n,this.My=r,this.Ty=o,this.Zyi=a,this.Hyi=u,this.Md=c,this.JXt=l,this.fXt=new rc,this.Kh=!1,this.Xyi=!1,this.qyi=!1,this.Kyi=!1,this.Jyi=!1,this.$yi=()=>this.nyi(this.GP),this.tbi=()=>this.nyi(this.RP),this.fXt.Nii(h),this.yn("int",this.$yi),this.yn("ent",this.tbi)}};r(),r();var wst=class extends ps{ma(){return new mst(this.Yl.ga)}constructor(t){super("qst"),this.Yl=t}},mst=class extends Gs{constructor(t){super("addadbreak"),this.adBreak=t}};r();var pst=class extends ps{ma(){return new Ast(this.Yl.ga)}constructor(t){super("Xst"),this.Yl=t}},Ast=class extends Gs{constructor(t){super("removeadbreak"),this.adBreak=t}},yst=class extends Pu{Sii(t){this.yo(new wst(t))}Eii(t){this.yo(new pst(t))}constructor(){super()}},bst=class{get ga(){return this.Za||(this.Za=function(t){return{get adBreaks(){return t.I$t.ga},get currentAdBreak(){if(t.Vst)return t.Vst.ga},get currentAds(){return t.Vst?t.Vst.Uc.ga:(new rc).ga},skip(){t.Ax()}}}(this)),this.Za}get I$t(){return this.J$t}get Vst(){return So(this.J$t.Ju,(t=>t.Yh))}get Fst(){return this.Vst?this.Vst.Uc.Ju.filter((t=>t.Yh)):[]}get ibi(){if(0===this.I$t.U||0===this.cxt.zD().length)return;const t=this.cxt.zD().end(this.cxt.zD().length-1);return So(this.I$t.Ju,(i=>i.Bct(t)))}get hyi(){return this.ebi}ryi(t){if(0===t.length)return;const i=ge.xn(t);for(const t of this.J$t.Ju.slice())Rt(t.RP)&&i.Cn(0)>t.RP&&this.J$t.Rb(t)}iyi(t){const i=!function(t){return Rt(t.breakOffsets)}(t),e=i?this.QAi.byi:0;for(const s of t.breaks){if(0===s.ads.length)continue;let t=s.timeOffset+e;const n=new rc;let r=0;for(const e of s.ads){const s=i?vst.Fyi(t,e):vst.Qyi(t,e);n.yP(s),t+=s.ct,r+=s.ct}const o=s.timeOffset+e,h=i?void 0:s.duration,a=new ist(o,h,n,i,this.sbi);i&&this.nbi.push({eXt:a,PDt:o+r}),this.J$t.yP(a)}}rbi(t){const i=this.ibi;i&&i.jyi(t+this.QAi.byi)}syi(t){this.obi=t,this.J$t.Ju.forEach((i=>i.zyi(t)))}Ax(){const t=this.obi,i=this.Vst;t&&i&&i.Pyi(t)&&i.Ax()}ayi(t,i){let e=[];for(const s of this.I$t.Ju)!s.Oyi&&s.OP>=t&&s.OP<i&&e.push(s);return e}gn(){this.cxt.fn("timeupdate",this.hbi),this.QAi.fn("pyi",this.abi)}tr(){for(const t of this.I$t.Ju){for(const i of t.Uc.Ju)i.Bo();t.Bo()}this.I$t.iA(),this.obi=void 0,this.nbi=[]}constructor(t,i,e,s){this.nbi=[],this.abi=t=>{t.kN.ads&&this.iyi(t.kN.ads),t.kN.currentBreakEnd&&this.rbi(t.kN.currentBreakEnd)},this.hbi=t=>{if(0===this.nbi.length||0===this.cxt.zD().length)return;const i=this.cxt.zD().end(this.cxt.zD().length-1);for(const t of this.nbi.slice())Rt(t.eXt.ct)?Ro(this.nbi,t):t.PDt<i&&(t.eXt.jyi(t.PDt),Ro(this.nbi,t))},this.cxt=t,this.QAi=i,this.J$t=new yst,this.sbi=e,this.ebi=s,t.yn("timeupdate",this.hbi),this.QAi.yn("pyi",this.abi)}};r(),r(),r();var Mst=function(t){return t[t.NOT_AVAILABLE=-1]="NOT_AVAILABLE",t[t.NOT_APPLICABLE=0]="NOT_APPLICABLE",t[t.G=1]="G",t[t.PG=2]="PG",t[t.PG_13=3]="PG_13",t[t.R=4]="R",t[t.NC_17=5]="NC_17",t[t.X=6]="X",t[t.NOT_RATED=7]="NOT_RATED",t}({}),Tst=function(t){return t[t.NOT_AVAILABLE=-1]="NOT_AVAILABLE",t[t.NOT_APPLICABLE=0]="NOT_APPLICABLE",t[t.TV_Y=1]="TV_Y",t[t.TV_Y7=2]="TV_Y7",t[t.TV_G=3]="TV_G",t[t.TV_PG=4]="TV_PG",t[t.TV_14=5]="TV_14",t[t.TV_MA=6]="TV_MA",t[t.NOT_RATED=7]="NOT_RATED",t}({}),Sst=class t{static ubi(i,e,s){const n=new lw(i.rating_flags);return new t(e,s,i.duration,Boolean(i.audio_only),i.boundary_details,Boolean(i.error),i.tv_rating,i.max_slice,i.thumb_prefix,i.slice_dur,i.movie_rating,i.owner,i.meta,i.rates,i.thumbs,i.poster_url,i.default_poster_url,i.desc,n.Zp(1),n.Zp(2),n.Zp(4),n.Zp(8),i.external_id,Boolean(i.is_ad),i.asset)}get ga(){return this.Za||(this.Za=function(t){return{startTime:t.OP,endTime:t.RP,duration:t.ct,audioOnly:t.cbi,boundaryDetails:t.lbi,error:t.lt,tvRating:t.dbi,maxSlice:t.fbi,thumbPrefix:t.gbi,sliceDuration:t._bi,movieRating:t.vbi,ownerId:t.wbi,metadata:t.WB,rates:t.mbi,thumbnailResolutions:t.pbi,posterUrl:t.Abi,defaultPosterUrl:t.ybi,description:t.TC,hasAdultLanguage:t.bbi,hasSexualSituations:t.Mbi,hasViolence:t.Tbi,hasDrugSituations:t.Sbi,externalId:t.Nbi,isAd:t.Ibi,assetId:t.Dbi}}(this)),this.Za}constructor(t,i,e,s,n,r,o,h,a,u,c,l,d,f,g,_,v,w,m,p,A,y,b,M,T){this.OP=t,this.RP=i,this.ct=e,this.cbi=s,this.lbi=n,this.lt=r,this.dbi=o,this.fbi=h,this.gbi=a,this._bi=u,this.vbi=c,this.wbi=l,this.WB=d,this.mbi=f,this.pbi=g,this.Abi=_,this.ybi=v,this.TC=w,this.bbi=m,this.Mbi=p,this.Tbi=A,this.Sbi=y,this.Nbi=b,this.Ibi=M,this.Dbi=T}};var Nst=Dc({duration:$,offset:$}),Ist=Dc({c3:Nst}),Dst=Dc({c7:Nst}),Est=Dc({halftime:Nst}),kst=dL(cL(Tst)),Lst=dL(cL(Mst)),xst=Dc({width:oa(ru,$),prefix:rl,bw:$,bh:$,height:oa(ru,$)}),Cst=Dc({audio_only:$,boundary_details:oa(ru,hc(oa(Ist,Dst,Est))),error:$,tv_rating:kst,max_slice:$,thumb_prefix:rl,slice_dur:$,movie_rating:Lst,owner:rl,meta:_h,rates:hc($),thumbs:hc(xst),poster_url:rl,duration:$,default_poster_url:rl,desc:rl,rating_flags:$,external_id:rl,is_ad:$,asset:rl}),jst=class{async eTt(t,i,e,s){const n=function(t,i,e){if(Iet.BQ(i))return[Ost(t,i,e)];if(hc(Iet).BQ(i))return i.map((i=>Ost(t,i,e)));if(Det.BQ(i)){return(Kc(i.externalId)?i.externalId:[i.externalId]).map((s=>Ost(t,"ext/"+i.userId+"/"+s,e)))}throw new w("Invalid asset id")}(t,i,s),r=n.map((t=>_t((()=>this.myi(t)),e)));return(await Promise.all(r)).filter(Rt)}async myi(t){const i=this.dU.jS({hN:Ml.GET,Hu:t,CS:Me.XM}),e=await i,s=await e.xS();return Cst.BQ(s)||Cst.QQ(s,"AssetInfoResponse"),s}constructor(t){this.dU=t}};function Ost(t,i,e){return e?t+"/player/assetinfo/"+i+".json?pbs="+e:t+"/player/assetinfo/"+i+".json"}r(),r();var Rst=class extends ps{ma(){return new Pst(this.rd.ga)}constructor(t){super("Ebi"),this.rd=t}},Pst=class extends Gs{constructor(t){super("removeasset"),this.asset=t}};r();var zst=class extends ps{ma(){return new Bst(this.rd.ga)}constructor(t){super("kbi"),this.rd=t}},Bst=class extends Gs{constructor(t){super("addasset"),this.asset=t}},Ust=class extends Pu{iyi(t,i){let e,s=0;for(const n of t){e=s+n.duration;for(const t of i)s<=t.OP&&t.OP<e&&(e+=t.ct||0);this.yP(Sst.ubi(n,s,e)),s=e}}Sii(t){this.yo(new zst(t))}Eii(t){this.yo(new Rst(t))}constructor(){super()}};r(),r();var Qst=class extends ps{ma(){return new Fst(this.kN)}constructor(t){super("Lbi"),this.kN=t}},Fst=class extends Gs{constructor(t){super("preplayresponse"),this.response=t}};r();var Yst=class extends ps{ma(){return new Vst(this.kN)}constructor(t){super("xbi"),this.kN=t}},Vst=class extends Gs{constructor(t){super("assetinforesponse"),this.response=t}},Gst=class extends G{vyi(t){t&&this.yo(new Qst(Wa(t)))}tyi(t){t.forEach((t=>this.yo(new Yst(t))))}get ga(){return this.Za||(this.Za=this.ma()),this.Za}ma(){let t;const i=this,e={get ads(){return i.PAi.ga},get assets(){return i.zAi.ga},addEventListener(i,e){t.yn(i,e)},removeEventListener(i,e){t.fn(i,e)}};return t=new xi(i,e),e}constructor(t,i,e){super(),this.PAi=t,this.zAi=i,this.QAi=e,e.yn("pyi",this.Ds),e.yn("Ayi",this.Ds)}},Wst=class{Cbi(t,i){const e=new Eet(t.GI),s=new Pet(t.GI),n=function(t){if(t.verizonMedia&&Rt(t.verizonMedia.defaultSkipOffset)){const i=t.verizonMedia.defaultSkipOffset;return Fn(i)?i:-1}return-1}(i),r=function(t){const i=t.verizonMedia?t.verizonMedia.onSeekOverAd:void 0;return function(t){if(!t)return"play-none";switch(t.toLowerCase()){case"play-all":return"play-all";case"play-none":default:return"play-none";case"play-last":return"play-last"}}(i)}(i),o=new Fet(s,t),h=new Yet(e,i),a=new bst(t,o,n,r),u=new jst(t.GI),c=new Ust,l=new Gst(a,c,o);return new vet(t,o,h,a,l,u,c)}};sc((function(t){return class extends t{UAi(t){super.wa(t)}FAi(t,i){return super.vnt(t,i)}lyi(t){super.rD(t)}uD(){var t;return null!=(t=this.jbi.lt)?t:super.uD()}lD(){var t;return null!=(t=this.jbi.cD)?t:super.lD()}rD(t,i){this.jbi.rD(t)}wa(t){this.jbi.wa(t)}vnt(t,i){return this.jbi.vnt(t,i)}ma(){const t=this.jbi.ga;return Gr(super.ma(),{get verizonMedia(){return t}})}gn(){this.jbi.gn(),super.gn()}constructor(t,i){super(t,i),this.jbi=(new Wst).Cbi(this,i)}}}),hh.Est),r(),r(),r(),r();var Zst=function(t){return t.CREATIVE_VIEW="creativeView",t.START="start",t.FIRST_QUARTILE="firstQuartile",t.MID_POINT="midpoint",t.THIRD_QUARTILE="thirdQuartile",t.COMPLETE="complete",t.MUTE="mute",t.UNMUTE="unmute",t.PAUSE="pause",t.REWIND="rewind",t.RESUME="resume",t.FULL_SCREEN="fullscreen",t.EXIT_FULL_SCREEN="exitFullscreen",t.EXPAND="expand",t.COLLAPSE="collapse",t.ACCEPT_INVITATION_LINEAR="acceptInvitationLinear",t.ACCEPT_INVITATION="acceptInvitation",t.CLOSE_LINEAR="closeLinear",t.CLOSE="close",t.SKIP="skip",t.SKIP_SHOWN="skipShown",t.PROGRESS="progress",t.ENGAGED_VIEW="engagedView",t.IMPRESSION="impression",t.ERROR="error",t}({});r();var Hst=class extends no{ma(){return K4(this)}get QKt(){return al.H$t}get OP(){return this.GP}get WHt(){return this.kXt}constructor(t,i,e,s){super(t,i),this.kXt=s,this.GP=e}};r();var Xst=class extends H4{get XPt(){return this.Obi}get QKt(){return al.H$t}constructor(t,i,e){if(super(i),this.t4t=t,this.i4t=t,e){const t=new Date(e);af(t)&&(this.Obi=t)}}},qst=class{qE(){this.ta.yn(fa.CO,this.UR),this.ta.yn(Qi.vp,this.Wjt),this.ta.yn(Qi.so,this.WWt),this.ta.yn(Qi.bp,this.We),this.ta.yn(Qi.tp,this.Sh),this.ta.yn(Qi.Dp,this.ld),this.ta.yn(Qi.Ep,this.O1t),this.ta.yn(lj.MODE_CHANGE,this.Rbi)}HE(){this.ta.fn(fa.CO,this.UR),this.ta.fn(Qi.vp,this.Wjt),this.ta.fn(Qi.so,this.WWt),this.ta.fn(Qi.bp,this.We),this.ta.fn(Qi.tp,this.Sh),this.ta.fn(Qi.Dp,this.ld),this.ta.fn(Qi.Ep,this.O1t),this.ta.fn(lj.MODE_CHANGE,this.Rbi)}get Pbi(){return this.zbi}get Fst(){const t=this.Pbi;if(!t)return[];const i=[],e=this.Bbi();for(const s of t.Uc)e>=s.OP&&this.oAi<=s.OP+s.ct&&i.push(s);return i}Bbi(){return this.ta.nD()-this.Ubi}Qbi(){if(this.Fbi)return;if(this.ta._d()!==1/0)return void(0===this.Ybi.length&&(this.Fbi=this.Vbi()));const t=()=>{var t;null==(t=this.Gbi)||t.Mm(),this.Gbi=void 0,this.Fbi=void 0};this.Gbi=new Ai,this.Fbi=this.Wbi(this.Gbi.wm).catch(this.j6).then(t,t)}async Zbi(){const t=x.min(1e3*2**this.Hbi,3e4);try{var i;await Bn(t,null==(i=this.Gbi)?void 0:i.wm),this.Hbi++}catch(t){if(F(t))return void(this.Hbi=0)}this.Qbi()}async Wbi(t){for(;re(t),!this.ta.TD;){const i=me.J_()-this.Xbi;if(i>1e4)await this.Vbi(t),this.Xbi=me.J_(),this.Hbi=0;else{const e=1e4-i;await Bn(e,t)}}}qbi(t){const i=t.XPt;if(i&&this.ta.$I&&0===this.Ubi&&!this.Kbi&&0!==x.floor(this.ta.zD().start(0))){const e=(this.ta.$I.getTime()-i.getTime())/1e3,s=this.ta.nD()-t.UPt;this.Ubi=s-e}}async Vbi(t){try{const i=await this.ta.GI.jS({Hu:this.Jbi}),e=await i.lS(t);if(0===e.avails.length)return void(0!==this.Ybi.length&&(this.Ybi=[]));if(e.avails.length===this.Ybi.length&&e.avails[0].startTimeInSeconds===this.Ybi[0].UPt)return void this.qbi(this.Ybi[0]);const s=[];for(const t of e.avails){const i=new Xst(t.durationInSeconds,t.startTimeInSeconds,t.availProgramDateTime);for(const e of t.ads){const t=new Hst(i,Hs.fKt,e.startTimeInSeconds,e.trackingEvents);t.d4t(e.adId,e.width,e.height,e.durationInSeconds,[],e.skipoffset),i.r4t(t)}s.push(i),this.qbi(i)}this.Ybi=lt(s,((t,i)=>t.UPt-i.UPt))}catch(t){throw wh(t),new g("Failed to poll MediaTailor tracking events")}}$bi(){var t;null==(t=this.Gbi)||t.Dm(),this.Gbi=void 0,this.Fbi=void 0,this.Xbi=-1/0}tMi(){if(0===this.Ybi.length)return;const t=this.Ybi[this.Ybi.length-1],i=this.Bbi();if(t.UPt+t.M$t<this.oAi){var e;this.zbi&&(null==(e=this.ta.Uc)||e.yo(new ir(this.zbi)),this.zbi=void 0)}else{for(const t of this.Ybi){const e=t.UPt;if(!(e+t.M$t<this.oAi)&&(e<=i&&e+t.M$t>this.oAi)){var s;if(this.Pbi===t)return;return this.zbi=t,void(null==(s=this.ta.Uc)||s.yo(new Va(this.zbi)))}}var n;if(this.zbi)null==(n=this.ta.Uc)||n.yo(new ir(this.zbi)),this.zbi=void 0}}iMi(){const t=this.Fst;if(0===t.length)return;let i=[];for(const e of t){const t=e.WHt.filter((t=>fh(this.eMi,t.eventType)));i=i.concat(t)}for(const t of i)this.sMi(t.startTimeInSeconds)&&(t.eventType===Zst.COMPLETE&&this.nMi(Zst.ENGAGED_VIEW),this.rMi(t))}oMi(t,i){return i.WHt.filter((i=>pr(i.eventType,t)))[0]}nMi(t){const i=this.Fst;if(0===i.length)return;const e=this.oMi(t,i[0]);e&&this.rMi(e)}rMi(t){this.Jvi(t.eventType);for(const i of t.beaconUrls){const t={hN:Ml.GET,Hu:i,wS:"",CS:Me.XM};0,xe(this.hMi(t))}}Jvi(t){let i;const e=this.Fst;switch(t){case Zst.START:i=new Nc(e[e.length-1],this.ta.nD());break;case Zst.COMPLETE:i=new ic(e[0],this.ta.nD());break;case Zst.FIRST_QUARTILE:i=new ro(e[0],this.ta.nD());break;case Zst.MID_POINT:i=new ho(e[0],this.ta.nD());break;case Zst.THIRD_QUARTILE:i=new oo(e[0],this.ta.nD())}var s;void 0!==i&&(null==(s=this.ta.Uc)||s.yo(i))}async hMi(t){const i=await this.ta.GI.jS(t);i.LS}sMi(t){const i=this.Bbi();return t>=this.oAi&&t<i}gn(){this.HE(),this.$bi(),this.oAi=-1}constructor(t,i,e){this.Xbi=-1/0,this.zbi=void 0,this.Ubi=0,this.Ybi=[],this.Gpi=!1,this.sX=!1,this.oAi=-1,this.Gbi=void 0,this.Fbi=void 0,this.Hbi=0,this.UR=()=>{this.Qbi()},this.WWt=()=>{this.nMi(Zst.RESUME)},this.Wjt=()=>{this.$bi(),this.nMi(Zst.PAUSE)},this.We=()=>{this.$bi(),this.oAi=-1},this.Sh=()=>{this.$bi()},this.ld=()=>{-1===this.oAi&&(this.oAi=this.Bbi()),this.tMi(),this.iMi(),this.oAi=this.Bbi()},this.O1t=()=>{if(this.Gpi!==this.ta.mD){this.Gpi=this.ta.mD;const t=this.Gpi?Zst.MUTE:Zst.UNMUTE;this.nMi(t)}},this.Rbi=()=>{if(this.sX!==this.ta.cs()){this.sX=this.ta.cs();const t=this.sX?Zst.FULL_SCREEN:Zst.EXIT_FULL_SCREEN;this.nMi(t)}},this.j6=t=>{F(t)||(this.nMi(Zst.ERROR),xe(this.Zbi()))},this.eMi=[Zst.START,Zst.FIRST_QUARTILE,Zst.MID_POINT,Zst.THIRD_QUARTILE,Zst.COMPLETE,Zst.IMPRESSION,Zst.CREATIVE_VIEW],this.ta=t,this.Jbi=i,this.Kbi=e,this.qE()}};sc((function(t){return class extends t{wa(t){return this.aMi&&(this.aMi.gn(),this.aMi=void 0,this.QNt()),super.wa(t)}async vnt(t,i){if(!t||!function(t){return t.sources.some((t=>t.integration===eI.MEDIATAILOR))}(t))return super.vnt(t,i);try{const e=await this.uMi(t,i);this.cMi=new d3(this),await super.vnt(e,i)}catch(t){this.LY(new Ui(Do.MANIFEST_LOAD_ERROR,t.message,t))}}ED(t){var i;(null==(i=this.cMi)?void 0:i.inAdBreak)||super.ED(t)}rD(t,i){var e;(null==(e=this.aMi)?void 0:e.Pbi)||super.rD(t,i)}uD(){var t;return null!=(t=this.FF)?t:super.uD()}lD(){var t;return null!=(t=this.YF)?t:super.lD()}LY(t){this.FF=be(t),this.YF=t,this.yo(new As(t))}QNt(){this.FF=void 0,this.YF=void 0}async uMi(t,i){let e=[];for(const s of t.sources){if(!fI(s)){e.push(s);continue}const t=s;if(!t.src){e.push(s);continue}const n=await this.lMi(t,i);re(i);const r=il({},t,{integration:void 0,src:n});e.push(r)}const s=Wa(t);return s.sources=e,s}async lMi(t,i){const e=t.src||"",s=e.match(/.+?(?=\/v1\/)/);if(!s)throw new g("Could not find MediaTailor session initialization url");const n=s[0],r=Re(e,"?ads."),o=r?{Hu:e,CS:Me.XM}:{Hu:e,hN:Ml.POST,wS:JSON.stringify({adParams:t.adParams}),CS:Me.XM},h=await _t((()=>this.dMi(o,i)),i);let a;try{if(a=n+h.manifestUrl,!r){const t=n+h.trackingUrl,i=hI(a);this.aMi=new qst(this,t,i)}}catch(t){throw new g("Something went wrong parsing the MediaTailor session initialization response")}return a}async dMi(t,i){try{const e=await this.GI.jS(t);return await e.lS(i)}catch(t){throw wh(t),new g("Failed to initialize MediaTailor session manifest")}}gn(){var t;this.aMi&&(this.aMi.gn(),this.aMi=void 0),this.QNt(),null==(t=this.cMi)||t.destroy(),this.cMi=void 0,super.gn()}constructor(t,i){super(t,i),this.aMi=void 0,this.FF=void 0,this.YF=void 0,this.cMi=void 0}}}),hh.xst),r(),r(),r(),r(),r();var Kst=function(t){return t[t.fMi=0]="fMi",t[t.CO=1]="CO",t[t.DV=2]="DV",t[t.gMi=3]="gMi",t[t._Mi=4]="_Mi",t[t.vMi=5]="vMi",t[t.ua=6]="ua",t}({});r();var Jst=class extends Bo{get lk(){}get Rt(){return this.Le}set Rt(t){this.DP(t)}get ga(){var t;return null!=(t=this.Za)?t:this.Za=Zt(this)}get o(){return String(this.ou.componentTag)||"hbbtvaudiotrack"}get zt(){return this.W3}get wh(){return this.NP}get gs(){return""}get gN(){return this.Rt?"enabled":"disabled"}set gN(t){this.DP("enabled"===t)}get gk(){return this.AP}get _k(){}set _k(t){}get dk(){return this.SP}DP(t){this.Le=t,t?this.EOt.wMi(this.ou):this.EOt.mMi(this.ou)}constructor(t,i,e,s,n=!1){super(),this.SP=Xc(),this.AP=new nc,this.ou=t,this.NP=i,this.W3=e,this.Le=n,this.EOt=s}};r(),r(),r();var $st=function(t){return t.Yw="urn:dvb:casystemid:19219",t.Vw="urn:dvb:casystemid:19156",t}({}),tnt=function(t){return t.Yw="application/vnd.ms-playready.initiator+xml",t.Vw="application/widevine+xml",t}({});function int(t,i,e){switch(t){case"urn:dvb:casystemid:19219":return function(t){return'<?xml version="1.0" encoding="utf-8"?><PlayReadyInitiator xmlns="http://schemas.microsoft.com/DRM/2007/03/protocols/"><LicenseServerUriOverride><LA_URL>'+(null!=t?t:"")+"</LA_URL></LicenseServerUriOverride></PlayReadyInitiator>"}(i);case"urn:dvb:casystemid:19156":if(!e)throw new g("Content URL is needed for Widevine license request");return function(t,i){return'<?xml version="1.0" encoding="utf-8"?><WidevineCredentialsInfo xmlns="http://www.smarttv-alliance.org/DRM/widevine/2012/protocols/"><ContentURL>'+z1(null!=i?i:"")+"</ContentURL><DeviceID></DeviceID><StreamID></StreamID><ClientIP></ClientIP><DRMServerURL>"+z1(null!=t?t:"")+"</DRMServerURL><DRMAckServerURL></DRMAckServerURL><DRMHeartBeatURL></DRMHeartBeatURL><DRMHeartBeatPeriod></DRMHeartBeatPeriod><UserData></UserData><Portal></Portal><StoreFront></StoreFront><BandwidthCheckURL></BandwidthCheckURL><BandwidthCheckInterval></BandwidthCheckInterval></WidevineCredentialsInfo>"}(i,e);default:throw new g("DRM key system is not supported")}}var ent=class extends jc{pMi(t){this.AMi(),this.wu=t}async yMi(t){if(!t.KF.length)return void this.AMi();if(!this.wu)throw new g("The OIPF DRM agent has to be attached to the DOM");let i;this.bMi||(this.bMi=h.createElement("object"),this.bMi.type="application/oipfDrmAgent",this.wu.appendChild(this.bMi),this.bMi.onDRMMessageResult=this.MMi,this.bMi.onDRMRightsError=this.TMi,this.SMi=h.createElement("object"),this.SMi.type="application/oipfCapabilities",this.wu.appendChild(this.SMi));for(const e of t.KF){let s,n,r;if(e.Gb===J_)s=$st.Yw,n=tnt.Yw,r=int($st.Yw,e.NF);else{if(e.Gb!==Oe)continue;s=$st.Vw,n=tnt.Vw,r=int($st.Vw,e.NF,t.yk)}try{return await this.Xit(n,r,s),void this.yo(new xc)}catch(t){i=t}}i&&this.yo(new Qs(i))}Mm(){return this.NMi=void 0,this.wu=void 0,super.Mm()}Xit(t,i,e){var s,n;return this.NMi=new pa,this.IMi=null==(n=this.bMi)||null==(s=n.sendDRMMessage)?void 0:s.call(n,t,i,e),this.IMi||null==this.NMi.sA||this.NMi.sA.call(this.NMi,new ti(Do.CONTENT_PROTECTION_INTERNAL_ERROR,"No DRM message returned by OIPF DRM agent")),this.NMi.rA}DMi(t){switch(t){case 5:return Do.CONTENT_PROTECTION_NOT_SUPPORTED;case 2:case 1:case 3:case 4:case 6:return Do.CONTENT_PROTECTION_INTERNAL_ERROR;default:return Do.CONTENT_PROTECTION_ERROR}}EMi(t){switch(t){case 2:return"The DRM agent was unable to complete the request";case 3:return"The specified MIME type is unknown for the specified DRM system";case 4:return"User consent is needed for that action";case 5:return"The specified DRM System is unknown";case 6:return"The license message has the wrong format";default:return"Unspecified error occurred"}}kMi(t){return 0===t?Do.CONTENT_PROTECTION_LICENSE_ERROR:1===t?Do.CONTENT_PROTECTION_LICENSE_INVALID:Do.CONTENT_PROTECTION_ERROR}LMi(t){switch(t){case 0:return"No license, consumption of the content is blocked";case 1:return"Invalid license, consumption of the content is blocked";case 2:return"Valid license, consumption of the content is unblocked";default:return"Unknown error occurred"}}AMi(){this.bMi&&(Xa(this.bMi),this.bMi=void 0),this.SMi&&(Xa(this.SMi),this.SMi=void 0)}async i9(t,i,e){}constructor(...t){super(...t),this.bMi=void 0,this.SMi=void 0,this.wu=void 0,this.IMi=void 0,this.NMi=void 0,this.MMi=(t,i,e)=>{var s,n,r,o;if(0===e)return void(null==(o=this.NMi)||null==(r=o.eA)||r.call(o,t));const h=this.DMi(e),a=this.EMi(e),u=new ti(h,a);null==(n=this.NMi)||null==(s=n.sA)||s.call(n,u)},this.TMi=(t,i,e,s)=>{const n=this.kMi(t),r=this.LMi(t),o=new ti(n,r);this.yo(new Qs(o))}}};r();var snt=class{get PD(){return ge.uR(0,this.jR.ct)}get xD(){return Ac.HY}set xD(t){}get md(){return this.gM}rJ(t){return!1}hJ(t){return pu.resolve(void 0)}async yMi(t){await this.aJ.yMi(this.gM)}Mm(){return pu.resolve(void 0)}constructor(t,i,e){this.gM=t,this.jR=i,this.aJ=e}},nnt=class extends Bo{get KI(){return ge.cR()}get $I(){}get ZF(){}get Ou(){return this.Xu}get PD(){var t,i;return null!=(i=null==(t=this.WF)?void 0:t.PD)?i:ge.cR()}get BD(){return this.rV}get C3(){return!1}get gD(){return!1}get FR(){return il({},dO)}get lt(){return this.FF}get D3(){return!1}get ka(){return this.Zo}get a7(){return!0}get y3(){return!1}get JD(){return!0}set JD(t){}get zl(){return this.gV}get nt(){return this.u8}get L9(){return this.eV}get aY(){return this.Qo}d7(t){this.aJ.pMi(t),this.Pit.d7(t)}IJ(t){for(const i of t)if(i.Hw===vl.wU)return i}async $n(t){if(this.WF)throw new g("Already loaded a media source");if(t.Hw===vl.wU)return this.WF=new snt(t,this,this.aJ),await this.WF.yMi(t),this.WF;throw new g("Unsupported media source configuration for HbbTV")}async xMi(t){await this.CMi()}async sE(){await this.CMi()}UF(t){}async tr(){this.WF=void 0,this.jMi=void 0}async Mm(){await this.tr(),this.Ol.gn(),this.u8.gn(),this.Pit.gn(),this.zit.gn(),this.aJ.fn(dz,this.Ds),await this.aJ.Mm()}ge(){this.eV=!0,this.Pit.ge()}be(){this.eV=!1,this.Pit.be()}nY(){return!1}oY(t,i,e,s,n){throw new g("Adding native sideloaded text tracks is not supported on HbbTV")}o7(){}h7(){}l7(){}wD(){return{cP:0,lP:0,dP:0}}aE(){}uY(t){throw new g("Adding custom text tracks is not supported on HbbTV")}tE(){}dE(t,i,e,s,n,r,o,h,a){const u=new an(t,i,e,s,n,r,o,a,h);return this.Ol.tt(u),this.c8.tt(u),u}cY(){for(const t of this.Ol.FE.slice())t.gn();this.Ol.tr()}_U(t){this.Ol.it(t),this.c8.it(t)}OMi(){const t=h.getElementsByTagName("object");for(let i=0;i<t.length;i++){const e=t.item(i);if("video/broadcast"===e.type){const t=e;return t.onPlayStateChange=this.RMi,0===t.playState&&(null==t.bindToCurrentChannel||t.bindToCurrentChannel.call(t)),t}}}CMi(){var t,i;if(!this.PMi||3===this.PMi.playState||0===this.PMi.playState)return Promise.resolve("");if(null==(t=this.jMi)?void 0:t.rA)return null==(i=this.jMi)?void 0:i.rA;this.jMi=new pa;try{null==this.PMi.stop||this.PMi.stop.call(this.PMi)}catch(t){me.dw("Unable to stop broadcast for HbbTV",t),this.jMi.sA(new g("Unable to stop broadcast for HbbTV"))}return this.jMi.rA}constructor(t,i){super(),this.Xu=t,this.gV=i,this.Zo=new sx,this.Qo=new nx,this.Ol=new bn,this.WF=void 0,this.rV=!1,this.FF=void 0,this.NU=$i.KR,this.eV=!0,this.jMi=void 0,this.RMi=()=>{var t,i,e,s;(null==(t=this.PMi)?void 0:t.playState)&&((null==(i=this.jMi)?void 0:i.rA)||2!==this.PMi.playState||this.CMi().catch(ul),3===this.PMi.playState&&(null==(s=this.jMi)||null==(e=s.eA)||e.call(s,String(this.PMi.playState)),this.jMi=void 0))},this.aJ=new ent(this),this.aJ.yn(dz,this.Ds),this.u8=new uu([this.Ol]),this.c8=new zh(this),this.Pit=new Rz,this.zit=new nU(this.Pit.ke,this.Ou,this.nt,this.zl,this.ka,this.aY),this.PMi=this.OMi(),this.CMi().catch(ul)}},rnt=class extends nnt{get VF(){}get ht(){return this.oP}get rt(){return this.aP}get ND(){return this.aV}set ND(t){this.aV=t,this.TD||this.zMi.play(t)}get mD(){return this.zMi.muted}set mD(t){this.zMi.muted=t}get ZD(){var t,i;return(null!=(i=null!=(t=this.zMi.volume)?t:null==this.zMi.getVolume?void 0:this.zMi.getVolume.call(this.zMi))?i:100)/100}set ZD(t){null==this.zMi.setVolume||this.zMi.setVolume.call(this.zMi,100*t)}get sD(){return this.zMi.playPosition?this.zMi.playPosition/1e3:0}get ct(){return!this.zMi.playTime||this.zMi.playTime<0?1/0:this.zMi.playTime/1e3}get hD(){return this.zMi.playState===Kst.vMi}get Ti(){return this.zMi.offsetHeight*me.Ys.pv}get ji(){return this.zMi.offsetWidth*me.Ys.pv}get TD(){return this.zMi.playState===Kst.DV}get kD(){return ge.cR()}get OD(){return this.T3}get FD(){return 0}get GD(){return 0}d7(t){super.d7(t),t.appendChild(this.zMi)}async $n(t){if(t.Hw===vl.wU){const i=await super.$n(t);return await this.xMi(t),this.zMi.onPlayStateChange=this.BMi,i}throw new g("Unsupported media source configuration for HbbTV")}async xMi(t){this.zMi.type=aI(t.yk),this.zMi.data=t.yk,await super.xMi(t)}async sE(){await super.sE(),this.zMi.play(this.aV),this.yo(new us(this.sD))}eE(){this.zMi.play(0),this.yo(new Ia(this.sD))}Gp(t,i,e){this.zMi.seek(1e3*t),this.rV=!0,this.yo(new ll(this.sD))}async tr(){void 0!==this.WF&&this.zMi.stop(),this.UMi&&(me._w(this.UMi),this.UMi=void 0),await super.tr(),qu(this.zMi),this.zMi.data&&this.zMi.removeAttribute("data"),this.oP.tr(),this.aP.tr()}async Mm(){await super.Mm(),Xa(this.zMi)}ge(){super.ge(),this.zMi.style.display="block"}be(){super.be(),this.zMi.style.display="none"}wMi(t){const i=this.QMi(t);if(!i)throw new g("Selected track does not exist on HbbTV");null==this.zMi.selectComponent||this.zMi.selectComponent.call(this.zMi,i)}mMi(t){const i=this.QMi(t);if(!i)throw new g("Selected track does not exist on HbbTV");null==this.zMi.unselectComponent||this.zMi.unselectComponent.call(this.zMi,i)}QMi(t){var i;const e=null!=(i=null==this.zMi.getComponents?void 0:this.zMi.getComponents.call(this.zMi,t.type))?i:this.FMi();return this.YMi(e,t)}VMi(t){var i;const e=null!=(i=null==this.zMi.getCurrentActiveComponents?void 0:this.zMi.getCurrentActiveComponents.call(this.zMi,1))?i:this.FMi();this.oP.tr();for(let i=0;i<t.length;i++){const s=t.item(i);this.oP.tt(new Jst(s,s.language,this.oP.U?$u.SLt:$u.NLt,this,this.GMi(e,s)))}}WMi(t){var i;const e=null!=(i=null==this.zMi.getCurrentActiveComponents?void 0:this.zMi.getCurrentActiveComponents.call(this.zMi,0))?i:this.FMi();this.aP.tr();for(let i=0;i<t.length;i++){const s=t.item(i);this.aP.tt(new Jst(s,String(s.aspectRatio),this.aP.U?BX.SLt:BX.NLt,this,this.GMi(e,s)))}}FMi(){return{length:0,item:t=>{}}}GMi(t,i){return void 0!==this.YMi(t,i)}YMi(t,i){for(let e=0;e<t.length;e++){const s=t.item(e);if(this.ZMi(s,i))return s}}ZMi(t,i){return t.pid===i.pid&&t.componentTag===i.componentTag&&t.type===i.type&&t.encoding===i.encoding&&t.encrypted===i.encrypted}HMi(t){switch(t){case 0:return sl.SRC_NOT_SUPPORTED;case 1:case 5:case 6:return sl.NETWORK;default:return sl.DECODE}}constructor(t,i,e){super(i,e),this.zMi=t,this.aV=1,this.oP=new $e,this.aP=new $e,this.T3=$i.KR,this.XMi=void 0,this.UMi=void 0,this.BMi=()=>{if(!this.zMi.playState)return;this.NU=this.T3,this.qMi=this.KMi,this.KMi=this.zMi.playState;const t=this.ct;switch(t!==this.XMi&&(this.yo(new In(t)),this.XMi=t),this.UMi&&this.KMi!==Kst.CO&&(me._w(this.UMi),this.UMi=void 0),this.KMi){case Kst.gMi:this.T3=$i.KR;break;case Kst._Mi:if(this.qMi===Kst.gMi){var i;const t=null!=(i=null==this.zMi.getComponents?void 0:this.zMi.getComponents.call(this.zMi,1))?i:this.FMi();var e;const s=null!=(e=null==this.zMi.getComponents?void 0:this.zMi.getComponents.call(this.zMi,0))?e:this.FMi();if(0===t.length&&0===s.length)break;this.VMi(t),this.WMi(s)}this.T3=$i.Xn;break;case Kst.CO:this.rV&&(this.rV=!1,this.yo(new ns(this.sD))),this.yo(new fo(this.sD)),this.T3=$i.$R,this.UMi=me.gw(this.JMi,250);break;case Kst.ua:this.T3=$i.KR,this.yo(new Wh(new La(this.HMi(this.zMi.error))));break;case Kst.vMi:this.yo(new ce(this.sD));case Kst.DV:case Kst.fMi:}this.T3!==this.NU&&this.yo(new hr(this.sD,this.T3))},this.JMi=()=>{this.yo(new H(this.sD,void 0))}}};r();var ont=class extends nnt{get VF(){return this.CM}get ht(){return this.oP}get rt(){return this.aP}get ND(){return this.CM.playbackRate}set ND(t){this.CM.playbackRate=t}get mD(){return this.CM.muted}set mD(t){this.CM.muted=t}get ZD(){return this.CM.volume}set ZD(t){this.CM.volume=t}get sD(){return this.CM.currentTime}get ct(){return this.CM.duration}get hD(){return this.CM.ended}get Ti(){return this.CM.offsetHeight*me.Ys.pv}get ji(){return this.CM.offsetWidth*me.Ys.pv}get TD(){return this.CM.paused}get kD(){return ge.xn(this.CM.played)}get OD(){return this.S9.OD}get FD(){return this.CM.videoHeight}get GD(){return this.CM.videoWidth}d7(t){super.d7(t),t.appendChild(this.CM)}async $n(t){if(t.Hw===vl.wU){const i=await super.$n(t);return await this.xMi(t),i}throw new g("Unsupported media source configuration for HbbTV")}async xMi(t){switch(t.tY){case Sn.Nk:case Sn.Ik:this.CM.setAttribute("crossorigin",t.tY);break;case Sn.nN:default:this.CM.removeAttribute("crossorigin")}void 0!==t.xD?this.CM.preload=t.xD:this.CM.preload=Ac.wF,void 0!==t.iY?this.CM.title=t.iY:kd(this.CM);const i=this.ND;this.CM.src=t.yk,this.ND=i,await super.xMi(t)}async sE(){await super.sE(),await this.CM.play()}eE(){this.CM.pause()}Gp(t,i,e){i&&this.CM.fastSeek?this.CM.fastSeek(t):this.CM.currentTime=t,this.rV=!0,this.yo(new ll(this.sD))}async tr(){await super.tr(),qu(this.CM),this.CM.src&&this.CM.removeAttribute("src"),this.oP.tr(),this.aP.tr()}async Mm(){await super.Mm(),this.U9.Mm(),this.S9.Mm(),this.O8(),this.fY(),Xa(this.CM)}ge(){super.ge(),this.CM.style.display="block",this.CM.style.height="100%",this.CM.style.width="100%"}be(){super.be(),this.CM.style.display="none"}x8(){this.VF.addEventListener("play",this.CU),this.VF.addEventListener("pause",this.jU),this.VF.addEventListener("timeupdate",this.xc),this.VF.addEventListener("progress",this.$Mi),this.VF.addEventListener("loadstart",this.Ts),this.VF.addEventListener("ended",this.Cc),this.VF.addEventListener("ratechange",this.tTi),this.VF.addEventListener("volumechange",this.XWt),this.VF.addEventListener("durationchange",this.GWt),this.VF.addEventListener("loadedmetadata",this.iTi),this.VF.addEventListener("emptied",this.eTi),this.VF.addEventListener("seeked",this.sTi),this.VF.addEventListener("seeking",this.nTi),this.VF.addEventListener("error",this.rTi),_v()&&this.VF.addEventListener("encrypted",this.u9)}O8(){this.VF.removeEventListener("play",this.CU),this.VF.removeEventListener("pause",this.jU),this.VF.removeEventListener("timeupdate",this.xc),this.VF.removeEventListener("progress",this.$Mi),this.VF.removeEventListener("loadstart",this.Ts),this.VF.removeEventListener("ended",this.Cc),this.VF.removeEventListener("ratechange",this.tTi),this.VF.removeEventListener("volumechange",this.XWt),this.VF.removeEventListener("durationchange",this.GWt),this.VF.removeEventListener("loadedmetadata",this.iTi),this.VF.removeEventListener("emptied",this.eTi),this.VF.removeEventListener("seeked",this.sTi),this.VF.removeEventListener("seeking",this.nTi),this.VF.removeEventListener("error",this.rTi),this.VF.removeEventListener("encrypted",this.u9)}LY(t){this.FF=t,this.yo(new Wh(this.FF))}TY(){const t=this.CM.audioTracks,i=this.CM.videoTracks;t&&(t.addEventListener("addtrack",this.oTi),t.addEventListener("removetrack",this.hTi),t.addEventListener("change",this.aTi)),i&&(i.addEventListener("addtrack",this.uTi),i.addEventListener("removetrack",this.cTi),i.addEventListener("change",this.lTi))}fY(){const t=this.CM.audioTracks,i=this.CM.videoTracks;t&&(t.removeEventListener("addtrack",this.oTi),t.removeEventListener("removetrack",this.hTi),t.removeEventListener("change",this.aTi)),i&&(i.removeEventListener("addtrack",this.uTi),i.removeEventListener("removetrack",this.cTi),i.removeEventListener("change",this.lTi))}nh(t){for(let i=0;i<t.U;i++){t.VE(i).EP()}}constructor(t,i,e){super(i,e),this.CM=t,this.oP=new $e,this.aP=new $e,this.dTi=void 0,this.CU=()=>{this.yo(new us(this.sD))},this.jU=()=>{this.yo(new Ia(this.sD))},this.xc=()=>{const t=this.sD,i=this.BD,e=void 0!==this.dTi,s=e&&this.dTi!==t;(i||!e||s)&&(this.yo(new H(t,void 0)),this.dTi=t)},this.$Mi=()=>{this.yo(new mO(this.sD))},this.Ts=()=>{this.yo(new Ti)},this.Cc=()=>{this.yo(new ce(this.sD))},this.tTi=()=>{this.yo(new rr(this.sD,this.ND))},this.XWt=()=>{this.yo(new B(this.sD,this.ZD))},this.GWt=()=>{this.yo(new In(this.ct))},this.iTi=()=>{},this.eTi=()=>{},this.sTi=()=>{this.rV&&(this.rV=!1),this.yo(new ns(this.sD))},this.nTi=()=>{this.yo(new ll(this.sD))},this.OU=t=>{this.NU!==t.readyState&&(this.NU=t.readyState,this.yo(t))},this.xU=()=>{this.yo(new fo(this.sD))},this.rTi=()=>{if(null!==this.CM.error){const i=this.CM.error;var t;this.LY(new La(null!=(t=i.code)?t:sl.DECODE,i.message||"Error decoding media",void 0,i.msExtendedCode))}},this.u9=t=>{this.yo(new on(t.initDataType,t.initData||new ArrayBuffer(0)))},this.uTi=t=>{const i=this.CM.videoTracks;if(i)for(let t=0;t<i.length;t++){const e=i[t];HL(this.aP,e)||this.aP.tt(new tD(e))}},this.cTi=t=>{const i=[],e=this.CM.videoTracks;if(e){for(const t of this.aP.FE)XL(e,t.IP)||i.push(t);for(const t of i)this.aP.it(t)}},this.lTi=t=>{this.nh(this.aP)},this.oTi=t=>{const i=this.CM.audioTracks;if(i)for(let t=0;t<i.length;t++){const e=i[t];HL(this.oP,e)||this.oP.tt(new JI(e))}},this.hTi=t=>{const i=[],e=this.CM.audioTracks;if(e){for(const t of this.oP.FE)XL(e,t.IP)||i.push(t);for(const t of i)this.oP.it(t)}},this.aTi=t=>{this.nh(this.oP)},this.S9=new Az(this),this.S9.yn(fa.CE,this.OU),this.S9.l9(new to(this)),this.U9=new VR(this),this.U9.yn(fa.CO,this.xU),this.x8(),this.TY()}},hnt=[Qi.so,Qi.vp,fa.CO,Qi.bp,Qi.yp,Qi.tp,Qi.Km,Qi.Hm,Qi.Zm,Qi.Dp,Qi.wp,Qi.lp,Qi.mp,Qi.Ep,Qi.Ap,Qi.np,Qi.ep],ant=class extends Bo{get ht(){return this.jR.ht}get KI(){return this.jR.KI.ws()}get GR(){}get $I(){return this.jR.$I}set $I(t){t&&this.jR.UF(t)}get bt(){return this.kc}get sD(){return this.jR.sD}set sD(t){this.jR.Gp(t)}get XF(){return this.qF}get ct(){return this.jR.ct}get hD(){return this.jR.hD}get cD(){return this.YF}get lt(){return this.FF}get dD(){}get gD(){return!1}get JD(){return this.jR.JD}set JD(t){this.jR.JD=t}get qD(){return this.fV}get vD(){return il({},{cP:0,lP:0,dP:0,fP:0,gP:0,_P:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}},this.jR.wD())}get mD(){return this.jR.mD}set mD(t){this.jR.mD=t}get bD(){return!0}get TD(){return this.jR.TD}get ND(){return this.jR.ND}set ND(t){this.jR.ND=t}get kD(){return this.jR.kD.ws()}get xD(){return this.GF}set xD(t){this.GF=t,this.WF&&(this.WF.xD=t)}get OD(){return this.jR.OD}get PD(){return this.jR.PD.ws()}get BD(){return this.jR.BD}get ZF(){return this.jR.ZF}get nt(){return this.Ol}get FD(){return this.jR.FD}get rt(){return this.jR.rt}get GD(){return this.jR.GD}get ZD(){return this.jR.ZD}set ZD(t){this.jR.ZD=t}dE(t){return this.jR.uY(t)}rE(){return!1}$D(){return this.jR.ka}tE(){}be(){this.jR.be()}aE(){this.jR.aE()}eE(){this.jR.eE()}async sE(){await this.jR.sE()}uE(){throw new g("Recreate media source is not supported on HbbTV")}rD(t,i){this.jR.Gp(t)}async wa(t,i,e){var s;re(e),this.kc=t;const n={Hw:vl.wU,yk:t.src,vS:t.type,KF:this.JF(t),xD:this.GF,tY:t.crossOrigin,iY:null==(s=i.metadata)?void 0:s.title};this.WF=await this.jR.$n(n),i.textTracks&&this.sY(i.textTracks),Zh(this.nt)}ge(){this.jR.ge()}oE(){}hE(){}_a(){return this.jR.aY}async tr(){this.kc=void 0,this.FF=void 0,this.YF=void 0,this.WF=void 0,await this.hY.tr(),this.jR.cY(),await this.jR.tr()}async gn(){await this.tr(),this.lY.gn(),this.jR.fn(hnt,this.Ds),this.jR.fn(ac.ua,this.AY),await this.jR.Mm(),this.vn.gn(),this.Ol.gn(),await this.hY.gn()}LY(t,i){this.FF||(this.FF=i,this.YF=t,this.yo(new As(t)))}sY(t){for(const i of t)void 0!==i.src&&this.hY.uU(i)}JF(t){if(!t.contentProtection)return[];const i=[];return t.contentProtection.widevine&&i.push({Gb:Oe,NF:t.contentProtection.widevine.licenseAcquisitionURL,MY:[]}),t.contentProtection.playready&&i.push({Gb:J_,NF:t.contentProtection.playready.licenseAcquisitionURL,MY:[]}),this.fTi(i,t.contentProtection.preferredKeySystems)}fTi(t,i){if(void 0===i||0===i.length)return t;const e=t=>{const e=i.indexOf(t.Gb.Jw);return e>=0?e:i.length};return lt(t,((t,i)=>e(t)-e(i)))}constructor(t,i,e,s){super(),this.WF=void 0,this.qF=new Nh,this.kc=void 0,this.FF=void 0,this.YF=void 0,this.GF=Ac.HY,this.AY=t=>{const i=t.lt,e=i.code,s=new Ui(YI(e),"Something went wrong during HbbTV playback.",i),n=be(s);this.LY(s,n)},this.vn=new nj(t),this.vn.bn(),this.jR=zd()?new ont(h.createElement(Q.iN),this.vn,s):new rnt(h.createElement("object"),this.vn,s),this.jR.d7(t),this.jR.yn(hnt,this.Ds),this.jR.yn(ac.ua,this.AY),this.lY=new li(this.jR,!0),this.lY.yn(ZN,this.Ds),this.hY=new ch(this.jR,i),this.Ol=new uu([this.jR.nt,this.hY.Z]),this.fV=e}};ki(new class{Gk(t,i,e,s,n,r,o,h){return new ant(t,e,r,o)}CY(t,i){var e;return!(!ui.r_||t.type!==vt.xk&&!cI(t.type)&&!dh(t.type))&&!(zd()&&!(null==(e=t.contentProtection)?void 0:e.useOipfDrmAgent)&&(!t.contentProtection||_v()))}async jY(t){return!!await ON(t,!0)}OY(){return!1}constructor(){this.RY=bl.aF}});export{b as a,f as b,r as c,ui as d,Rt as e,Kc as f,jl as g,cs as h,Xa as i,Ad as j,Md as k,Dn as l,Td as m,Sd as n,Tu as o,kd as p,Ld as q,me as r,ul as s,Gu as t,rh as u,pf as v,Af as w,D_ as x,il as y,Re as z,dv as A,lt as B,R as C,ma as D,So as E,Ro as F,fh as G,Or as H,re as I,xe as J,Bo as K,Gs as L,Qi as M,Do as N,Ee as O,pS as P,Gr as Q,V as R,AS as S,dn as T,yn as U,QI as V,ju as W,Cs as X,P as Y,vs as Z,QE as _,YE as $,$i as aa,Oa as ba,hh as ca,sc as da,zU as ea,ge as fa,gI as ga,Zi as ha,In as ia,pc as ja,kI as ka,CI as la,El as ma,un as na,Yx as oa,Qn as pa,Ah as qa,ZC as ra,tj as sa,nj as ta,rj as ua,Ur as va,hj as wa,lj as xa,dj as ya,fj as za,wj as Aa,Ti as Ba,Wz as Ca,Zz as Da,Hz as Ea,qz as Fa,Kz as Ga,Jz as Ha,SB as Ia,NB as Ja,IB as Ka,DB as La,gu as Ma,kU as Na,LU as Oa,QU as Pa,rQ as Qa,oQ as Ra,hQ as Sa,aQ as Ta,dQ as Ua,fQ as Va,gQ as Wa,_Q as Xa,kY as Ya,LY as Za,al as _a,m4 as $a,D4 as ab,Y4 as bb,A7 as cb,H7 as db,Btt as eb,Vtt as fb,Get as gb};