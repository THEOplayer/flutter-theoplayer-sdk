/*!
 THEOplayer

 Usage of this software is limited by the THEOplayer License.

 It is prohibited to reverse engineer, decompile, translate,
 disassemble, decipher, decrypt, or otherwise attempt to
 discover the source code of this software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 OTHER DEALINGS IN THE SOFTWARE.

 For more information, visit https://www.theoplayer.com or contact
 contact @ theoplayer . com

 This product makes use of Open Source Software: video.js
 (Apache 2.0 - Copyright Brightcove, Inc.), long.js (Apache 2.0),
 nodejs-langs (MIT - Copyright Andrew Lawson), promise-polyfill
 (MIT - Copyright (c) 2014 Taylor Hakes & Forbes Lindesay),
 shaka-player (Apache 2.0 - Copyright 2016 Google LLC)
 The code of these projects has been heavily modified during
 integration.
 More information on the licenses can be found here: Apache 2.0
 (http://www.apache.org/licenses/LICENSE-2.0), MIT
 (https://opensource.org/licenses/MIT)


 THEOplayer is based on patented technology developed by
 THEO Technologies (https://www.theoplayer.com).

 Version: 9.11.0
 Created: 2025-08-27T16:00:11.687Z
 */
var td,f,id,Nt,Mt,sd,ed,nd,y,rd,a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:void 0!==s?s:"undefined"!=typeof global?global:this,s=a.window,h=a.document,hd=a.location,od=a.navigator,u=a.setTimeout,c=a.clearTimeout,v=a.setInterval,p=a.clearInterval,m=a.Error,g=a.TypeError,w=(a.SyntaxError,a.Object),_=a.Math,x=a.parseInt,C=a.parseFloat,S=a.isNaN,j=a.Uint8Array,ad=a.Worker,ud=(a.WorkerGlobalScope,a.XMLHttpRequest),cd=w.create,dd=w.defineProperty,ld=w.getOwnPropertyDescriptor,fd=w.getOwnPropertyNames,vd=w.getPrototypeOf,_d=w.prototype.hasOwnProperty,Qn=(t,i)=>()=>(i||t((i={exports:{}}).exports,i),i.exports),cr=(t,i,s)=>(s=null!=t?cd(vd(t)):{},((t,i,s,e)=>{if(i&&"object"==typeof i||"function"==typeof i)for(let n of fd(i))_d.call(t,n)||n===s||dd(t,n,{get:()=>i[n],enumerable:!(e=ld(i,n))||e.enumerable});return t})(!i&&t&&t.__esModule?s:dd(s,"default",{value:t,enumerable:!0}),t)),r=(y=()=>{"use strict";if("function"==typeof Symbol&&Symbol.iterator)td=Symbol,f=null!=(sd=Symbol.for)?sd:Symbol,id=Symbol.iterator,Nt=null!=(ed=Symbol.dispose)?ed:f("Symbol.dispose"),Mt=null!=(nd=Symbol.asyncDispose)?nd:f("Symbol.asyncDispose");else{let t=0;td=function(i){return"hd"+i+"_"+ ++t},id=(f=function(t){return"hd"+t})("Symbol.iterator"),Nt=f("Symbol.dispose"),Mt=f("Symbol.asyncDispose"),td.for=f,td.iterator=id,td.dispose=Nt,td.asyncDispose=Mt}},()=>(y&&(rd=y(y=0)),rd)),gd=Qn((t,i)=>{r(),function(s,e){"object"==typeof t&&void 0!==i?e(t):"function"==typeof define&&define.amd?define(["exports"],e):e((s=s||self).WebStreamsPolyfill={})}(t,function(t){"use strict";var i="function"==typeof td&&"symbol"==typeof id?td:function(t){return"Symbol("+t+")"};function s(){}var e=Number.isNaN||function(t){return t!=t},n=s;function r(t){return"object"==typeof t&&null!==t||"function"==typeof t}function h(t){return t.slice()}function o(t,i,s,e,n){new j(t).set(new j(s,e,n),i)}function a(t){return!1!==function(t){if("number"!=typeof t)return!1;if(e(t))return!1;if(t<0)return!1;return!0}(t)&&t!==1/0}function u(t,i,s){if("function"!=typeof t)throw new g("Argument is not a function");return Function.prototype.apply.call(t,i,s)}function c(t,i,s,e){var n=t[i];if(void 0!==n){if("function"!=typeof n)throw new g(n+" is not a method");switch(s){case 0:return function(){return l(n,t,e)};case 1:return function(i){var s=[i].concat(e);return l(n,t,s)}}}return function(){return T(void 0)}}function d(t,i,s){var e=t[i];if(void 0!==e)return u(e,t,s)}function l(t,i,s){try{return T(u(t,i,s))}catch(t){return k(t)}}function f(t){if(t=Number(t),e(t)||t<0)throw new RangeError("highWaterMark property of a queuing strategy must be non-negative and non-NaN");return t}function v(t){if(void 0===t)return function(){return 1};if("function"!=typeof t)throw new g("size property of a queuing strategy must be a function");return function(i){return t(i)}}var p=Promise,y=Promise.prototype.then,b=Promise.resolve.bind(p),A=Promise.reject.bind(p);function S(t){return new p(t)}function T(t){return b(t)}function k(t){return A(t)}function E(t,i,s){return y.call(t,i,s)}function R(t,i,s){E(E(t,i,s),void 0,n)}function x(t,i){R(t,i)}function I(t,i){R(t,void 0,i)}function P(t,i,s){return E(t,i,s)}function C(t){E(t,void 0,n)}var N=function(){function t(){this.Rd=0,this.Dd=0,this.Ld={Od:[],Fd:void 0},this.Vd=this.Ld,this.Rd=0,this.Dd=0}return w.defineProperty(t.prototype,"length",{get:function(){return this.Dd},enumerable:!0,configurable:!0}),t.prototype.push=function(t){var i=this.Vd,s=i;16383===i.Od.length&&(s={Od:[],Fd:void 0}),i.Od.push(t),s!==i&&(this.Vd=s,i.Fd=s),++this.Dd},t.prototype.shift=function(){var t=this.Ld,i=t,s=this.Rd,e=s+1,n=t.Od,r=n[s];return 16384===e&&(i=t.Fd,e=0),--this.Dd,this.Rd=e,t!==i&&(this.Ld=i),n[s]=void 0,r},t.prototype.forEach=function(t){for(var i=this.Rd,s=this.Ld,e=s.Od;!(i===e.length&&void 0===s.Fd||i===e.length&&(i=0,0===(e=(s=s.Fd).Od).length));)t(e[i]),++i},t.prototype.peek=function(){var t=this.Ld,i=this.Rd;return t.Od[i]},t}();function D(t,i,s){var e=null;!0===s&&(e=w.prototype);var n=w.create(e);return n.value=t,n.done=i,n}function B(t,i){t.Wd=!0,t.Ud=i,i.Gd=t,"readable"===i.Ra?F(t):"closed"===i.Ra?function(t){F(t),U(t)}(t):V(t,i.Xd)}function M(t,i){return zi(t.Ud,i)}function L(t){"readable"===t.Ud.Ra?W(t,new g("Reader was released and can no longer be used to monitor the stream's closedness")):function(t,i){V(t,i)}(t,new g("Reader was released and can no longer be used to monitor the stream's closedness")),t.Ud.Gd=void 0,t.Ud=void 0}function O(t){return new g("Cannot "+t+" a stream using a released reader")}function F(t){t.Zd=S(function(i,s){t.Hd=i,t.zd=s})}function V(t,i){F(t),W(t,i)}function W(t,i){C(t.Zd),t.zd(i),t.Hd=void 0,t.zd=void 0}function U(t){t.Hd(void 0),t.Hd=void 0,t.zd=void 0}var G=i("[[CancelSteps]]"),X=i("[[PullSteps]]");function Z(t,i){void 0===i&&(i=!1);var s=new J(t);return s.Wd=i,s}function H(t){return S(function(i,s){var e={Yd:i,Kd:s};t.Gd.qd.push(e)})}function z(t,i,s){var e=t.Gd;e.qd.shift().Yd(D(i,s,e.Wd))}function Y(t){return t.Gd.qd.length}function K(t){var i=t.Gd;return void 0!==i&&!!$(i)}var q,Q,J=function(){function t(t){if(!1===Zi(t))throw new g("ReadableStreamDefaultReader can only be constructed with a ReadableStream instance");if(!0===Hi(t))throw new g("This stream has already been locked for exclusive reading by another reader");B(this,t),this.qd=new N}return w.defineProperty(t.prototype,"closed",{get:function(){return $(this)?this.Zd:k(it("closed"))},enumerable:!0,configurable:!0}),t.prototype.cancel=function(t){return $(this)?void 0===this.Ud?k(O("cancel")):M(this,t):k(it("cancel"))},t.prototype.read=function(){return $(this)?void 0===this.Ud?k(O("read from")):tt(this):k(it("read"))},t.prototype.releaseLock=function(){if(!$(this))throw it("releaseLock");if(void 0!==this.Ud){if(this.qd.length>0)throw new g("Tried to release a reader lock when that reader has pending read() calls un-settled");L(this)}},t}();function $(t){return!!r(t)&&!!w.prototype.hasOwnProperty.call(t,"qd")}function tt(t){var i=t.Ud;return i.Qd=!0,"closed"===i.Ra?T(D(void 0,!0,t.Wd)):"errored"===i.Ra?k(i.Xd):i.Jd[X]()}function it(t){return new g("ReadableStreamDefaultReader.prototype."+t+" can only be used on a ReadableStreamDefaultReader")}"symbol"==typeof i.asyncIterator&&((q={})[i.asyncIterator]=function(){return this},Q=q,w.defineProperty(Q,i.asyncIterator,{enumerable:!1}));var st={next:function(){if(!1===et(this))return k(nt("next"));var t=this.$d;return void 0===t.Ud?k(O("iterate")):P(tt(t),function(i){var s=i.done;return s&&L(t),D(i.value,s,!0)})},return:function(t){if(!1===et(this))return k(nt("next"));var i=this.$d;if(void 0===i.Ud)return k(O("finish iterating"));if(i.qd.length>0)return k(new g("Tried to release a reader lock when that reader has pending read() calls un-settled"));if(!1===this.ul){var s=M(i,t);return L(i),P(s,function(){return D(t,!0,!0)})}return L(i),T(D(t,!0,!0))}};function et(t){return!!r(t)&&!!w.prototype.hasOwnProperty.call(t,"$d")}function nt(t){return new g("ReadableStreamAsyncIterator."+t+" can only be used on a ReadableSteamAsyncIterator")}function rt(t){var i=t.tf.shift();return t.if-=i.size,t.if<0&&(t.if=0),i.value}function ht(t,i,s){if(!a(s=Number(s)))throw new RangeError("Size must be a finite, non-NaN, non-negative number.");t.tf.push({value:i,size:s}),t.if+=s}function ot(t){t.tf=new N,t.if=0}void 0!==Q&&w.setPrototypeOf(st,Q),w.defineProperty(st,"next",{enumerable:!1}),w.defineProperty(st,"return",{enumerable:!1});var at=i("[[AbortSteps]]"),ut=i("[[ErrorSteps]]"),ct=function(){function t(t,i){void 0===t&&(t={}),void 0===i&&(i={}),lt(this);var s=i.size,e=i.highWaterMark;if(void 0!==t.type)throw new RangeError("Invalid type is specified");var n=v(s);void 0===e&&(e=1),function(t,i,s,e){var n=w.create(Pt.prototype);function r(){return d(i,"start",[n])}var h=c(i,"write",1,[n]),o=c(i,"close",0,[]),a=c(i,"abort",1,[]);Ct(t,n,r,h,o,a,s,e)}(this,t,e=f(e),n)}return w.defineProperty(t.prototype,"locked",{get:function(){if(!1===ft(this))throw Ft("locked");return vt(this)},enumerable:!0,configurable:!0}),t.prototype.abort=function(t){return!1===ft(this)?k(Ft("abort")):!0===vt(this)?k(new g("Cannot abort a stream that already has a writer")):_t(this,t)},t.prototype.close=function(){return!1===ft(this)?k(Ft("close")):!0===vt(this)?k(new g("Cannot close a stream that already has a writer")):!0===yt(this)?k(new g("Cannot close an already-closing stream")):gt(this)},t.prototype.getWriter=function(){if(!1===ft(this))throw Ft("getWriter");return dt(this)},t}();function dt(t){return new St(t)}function lt(t){t.Ra="writable",t.Xd=void 0,t.ef=void 0,t.nf=void 0,t.rf=new N,t.hf=void 0,t.uf=void 0,t.cf=void 0,t.df=void 0,t.lf=!1}function ft(t){return!!r(t)&&!!w.prototype.hasOwnProperty.call(t,"nf")}function vt(t){return void 0!==t.ef}function _t(t,i){var s=t.Ra;if("closed"===s||"errored"===s)return T(void 0);if(void 0!==t.df)return t.df.vf;var e=!1;"erroring"===s&&(e=!0,i=void 0);var n=S(function(s,n){t.df={vf:void 0,Yd:s,Kd:n,_f:i,gf:e}});return t.df.vf=n,!1===e&&pt(t,i),n}function gt(t){var i=t.Ra;if("closed"===i||"errored"===i)return k(new g("The stream (in "+i+" state) is not in the writable state and cannot be closed"));var s=S(function(i,s){var e={Yd:i,Kd:s};t.uf=e}),e=t.ef;return void 0!==e&&!0===t.lf&&"writable"===i&&qt(e),function(t){ht(t,"close",0),Bt(t)}(t.nf),s}function mt(t,i){"writable"!==t.Ra?wt(t):pt(t,i)}function pt(t,i){var s=t.nf;t.Ra="erroring",t.Xd=i;var e=t.ef;void 0!==e&&Rt(e,i),!1===function(t){if(void 0===t.hf&&void 0===t.cf)return!1;return!0}(t)&&!0===s.mf&&wt(t)}function wt(t){t.Ra="errored",t.nf[ut]();var i=t.Xd;if(t.rf.forEach(function(t){t.Kd(i)}),t.rf=new N,void 0!==t.df){var s=t.df;if(t.df=void 0,!0===s.gf)return s.Kd(i),void bt(t);R(t.nf[at](s._f),function(){s.Yd(),bt(t)},function(i){s.Kd(i),bt(t)})}else bt(t)}function yt(t){return void 0!==t.uf||void 0!==t.cf}function bt(t){void 0!==t.uf&&(t.uf.Kd(t.Xd),t.uf=void 0);var i=t.ef;void 0!==i&&Xt(i,t.Xd)}function At(t,i){var s=t.ef;void 0!==s&&i!==t.lf&&(!0===i?function(t){Ht(t)}(s):qt(s)),t.lf=i}var St=function(){function t(t){if(!1===ft(t))throw new g("WritableStreamDefaultWriter can only be constructed with a WritableStream instance");if(!0===vt(t))throw new g("This stream has already been locked for exclusive writing by another writer");this.pf=t,t.ef=this;var i=t.Ra;if("writable"===i)!1===yt(t)&&!0===t.lf?Ht(this):Yt(this),Ut(this);else if("erroring"===i)zt(this,t.Xd),Ut(this);else if("closed"===i)Yt(this),function(t){Ut(t),Zt(t)}(this);else{var s=t.Xd;zt(this,s),Gt(this,s)}}return w.defineProperty(t.prototype,"closed",{get:function(){return!1===Tt(this)?k(Vt("closed")):this.Zd},enumerable:!0,configurable:!0}),w.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===Tt(this))throw Vt("desiredSize");if(void 0===this.pf)throw Wt("desiredSize");return function(t){var i=t.pf,s=i.Ra;if("errored"===s||"erroring"===s)return null;if("closed"===s)return 0;return Dt(i.nf)}(this)},enumerable:!0,configurable:!0}),w.defineProperty(t.prototype,"ready",{get:function(){return!1===Tt(this)?k(Vt("ready")):this.wf},enumerable:!0,configurable:!0}),t.prototype.abort=function(t){return!1===Tt(this)?k(Vt("abort")):void 0===this.pf?k(Wt("abort")):function(t,i){var s=t.pf;return _t(s,i)}(this,t)},t.prototype.close=function(){if(!1===Tt(this))return k(Vt("close"));var t=this.pf;return void 0===t?k(Wt("close")):!0===yt(t)?k(new g("Cannot close an already-closing stream")):kt(this)},t.prototype.releaseLock=function(){if(!1===Tt(this))throw Vt("releaseLock");void 0!==this.pf&&xt(this)},t.prototype.write=function(t){return!1===Tt(this)?k(Vt("write")):void 0===this.pf?k(Wt("write to")):It(this,t)},t}();function Tt(t){return!!r(t)&&!!w.prototype.hasOwnProperty.call(t,"pf")}function kt(t){return gt(t.pf)}function Et(t,i){"pending"===t.yf?Xt(t,i):function(t,i){Gt(t,i)}(t,i)}function Rt(t,i){"pending"===t.bf?Kt(t,i):function(t,i){zt(t,i)}(t,i)}function xt(t){var i=t.pf,s=new g("Writer was released and can no longer be used to monitor the stream's closedness");Rt(t,s),Et(t,s),i.ef=void 0,t.pf=void 0}function It(t,i){var s=t.pf,e=s.nf,n=function(t,i){try{return t.Af(i)}catch(i){return Mt(t,i),1}}(e,i);if(s!==t.pf)return k(Wt("write to"));var r=s.Ra;if("errored"===r)return k(s.Xd);if(!0===yt(s)||"closed"===r)return k(new g("The stream is closing or closed and cannot be written to"));if("erroring"===r)return k(s.Xd);var h=function(t){return S(function(i,s){var e={Yd:i,Kd:s};t.rf.push(e)})}(s);return function(t,i,s){var e={chunk:i};try{ht(t,e,s)}catch(i){return void Mt(t,i)}var n=t.Sf;if(!1===yt(n)&&"writable"===n.Ra){At(n,Lt(t))}Bt(t)}(e,i,n),h}var Pt=function(){function t(){throw new g("WritableStreamDefaultController cannot be constructed explicitly")}return t.prototype.error=function(t){if(!1===function(t){if(!r(t))return!1;if(!w.prototype.hasOwnProperty.call(t,"Sf"))return!1;return!0}(this))throw new g("WritableStreamDefaultController.prototype.error can only be used on a WritableStreamDefaultController");"writable"===this.Sf.Ra&&Ot(this,t)},t.prototype[at]=function(t){var i=this.Tf(t);return Nt(this),i},t.prototype[ut]=function(){ot(this)},t}();function Ct(t,i,s,e,n,r,h,o){i.Sf=t,t.nf=i,i.tf=void 0,i.if=void 0,ot(i),i.mf=!1,i.Af=o,i.kf=h,i.Ef=e,i.Rf=n,i.Tf=r;var a=Lt(i);At(t,a),R(T(s()),function(){i.mf=!0,Bt(i)},function(s){i.mf=!0,mt(t,s)})}function Nt(t){t.Ef=void 0,t.Rf=void 0,t.Tf=void 0,t.Af=void 0}function Dt(t){return t.kf-t.if}function Bt(t){var i=t.Sf;if(!1!==t.mf&&void 0===i.hf)if("erroring"!==i.Ra){if(0!==t.tf.length){var s=function(t){return t.tf.peek().value}(t);"close"===s?function(t){var i=t.Sf;(function(t){t.cf=t.uf,t.uf=void 0})(i),rt(t);var s=t.Rf();Nt(t),R(s,function(){!function(t){t.cf.Yd(void 0),t.cf=void 0,"erroring"===t.Ra&&(t.Xd=void 0,void 0!==t.df&&(t.df.Yd(),t.df=void 0)),t.Ra="closed";var i=t.ef;void 0!==i&&Zt(i)}(i)},function(t){!function(t,i){t.cf.Kd(i),t.cf=void 0,void 0!==t.df&&(t.df.Kd(i),t.df=void 0),mt(t,i)}(i,t)})}(t):function(t,i){var s=t.Sf;!function(t){t.hf=t.rf.shift()}(s);var e=t.Ef(i);R(e,function(){!function(t){t.hf.Yd(void 0),t.hf=void 0}(s);var i=s.Ra;if(rt(t),!1===yt(s)&&"writable"===i){var e=Lt(t);At(s,e)}Bt(t)},function(i){"writable"===s.Ra&&Nt(t),function(t,i){t.hf.Kd(i),t.hf=void 0,mt(t,i)}(s,i)})}(t,s.chunk)}}else wt(i)}function Mt(t,i){"writable"===t.Sf.Ra&&Ot(t,i)}function Lt(t){return Dt(t)<=0}function Ot(t,i){var s=t.Sf;Nt(t),pt(s,i)}function Ft(t){return new g("WritableStream.prototype."+t+" can only be used on a WritableStream")}function Vt(t){return new g("WritableStreamDefaultWriter.prototype."+t+" can only be used on a WritableStreamDefaultWriter")}function Wt(t){return new g("Cannot "+t+" a stream using a released writer")}function Ut(t){t.Zd=S(function(i,s){t.Hd=i,t.zd=s,t.yf="pending"})}function Gt(t,i){Ut(t),Xt(t,i)}function Xt(t,i){C(t.Zd),t.zd(i),t.Hd=void 0,t.zd=void 0,t.yf="rejected"}function Zt(t){t.Hd(void 0),t.Hd=void 0,t.zd=void 0,t.yf="resolved"}function Ht(t){t.wf=S(function(i,s){t.xf=i,t.If=s}),t.bf="pending"}function zt(t,i){Ht(t),Kt(t,i)}function Yt(t){Ht(t),qt(t)}function Kt(t,i){C(t.wf),t.If(i),t.xf=void 0,t.If=void 0,t.bf="rejected"}function qt(t){t.xf(void 0),t.xf=void 0,t.If=void 0,t.bf="fulfilled"}function jt(t){if("object"!=typeof t||null===t)return!1;try{return"boolean"==typeof t.aborted}catch(t){return!1}}var Qt="undefined"!=typeof DOMException?DOMException:void 0;var Jt,$t=function(t){if("function"!=typeof t&&"object"!=typeof t)return!1;try{return new t,!0}catch(t){return!1}}(Qt)?Qt:((Jt=function(t,i){this.message=t||"",this.name=i||"Error",m.captureStackTrace&&m.captureStackTrace(this,this.constructor)}).prototype=w.create(m.prototype),w.defineProperty(Jt.prototype,"constructor",{value:Jt,writable:!0,configurable:!0}),Jt);function ti(t,i,e,n,r,h){var o=Z(t),a=dt(i);t.Qd=!0;var u=!1,c=T(void 0);return S(function(d,l){var f,v,_,m;if(void 0!==h){if(f=function(){var s=new $t("Aborted","AbortError"),e=[];!1===n&&e.push(function(){return"writable"===i.Ra?_t(i,s):T(void 0)}),!1===r&&e.push(function(){return"readable"===t.Ra?zi(t,s):T(void 0)}),b(function(){return Promise.all(e.map(function(t){return t()}))},!0,s)},!0===h.aborted)return void f();h.addEventListener("abort",f)}if(y(t,o.Zd,function(t){!1===n?b(function(){return _t(i,t)},!0,t):A(!0,t)}),y(i,a.Zd,function(i){!1===r?b(function(){return zi(t,i)},!0,i):A(!0,i)}),v=t,_=o.Zd,m=function(){!1===e?b(function(){return function(t){var i=t.pf,s=i.Ra;return!0===yt(i)||"closed"===s?T(void 0):"errored"===s?k(i.Xd):kt(t)}(a)}):A()},"closed"===v.Ra?m():x(_,m),!0===yt(i)||"closed"===i.Ra){var p=new g("the destination writable stream closed before all data could be piped to it");!1===r?b(function(){return zi(t,p)},!0,p):A(!0,p)}function w(){var t=c;return E(c,function(){return t!==c?w():void 0})}function y(t,i,s){"errored"===t.Ra?s(t.Xd):I(i,s)}function b(t,s,e){function n(){R(t(),function(){return P(s,e)},function(t){return P(!0,t)})}!0!==u&&(u=!0,"writable"===i.Ra&&!1===yt(i)?x(w(),n):n())}function A(t,s){!0!==u&&(u=!0,"writable"===i.Ra&&!1===yt(i)?x(w(),function(){return P(t,s)}):P(t,s))}function P(t,i){xt(a),L(o),void 0!==h&&h.removeEventListener("abort",f),t?l(i):d(void 0)}C(S(function(t,i){!function e(n){n?t():E(!0===u?T(!0):E(a.wf,function(){return E(tt(o),function(t){return!0===t.done||(c=E(It(a,t.value),void 0,s),!1)})}),e,i)}(!1)}))})}var ii=function(){function t(){throw new g}return w.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===si(this))throw li("desiredSize");return ui(this)},enumerable:!0,configurable:!0}),t.prototype.close=function(){if(!1===si(this))throw li("close");if(!1===ci(this))throw new g("The stream is not in a state that permits close");hi(this)},t.prototype.enqueue=function(t){if(!1===si(this))throw li("enqueue");if(!1===ci(this))throw new g("The stream is not in a state that permits enqueue");return oi(this,t)},t.prototype.error=function(t){if(!1===si(this))throw li("error");ai(this,t)},t.prototype[G]=function(t){ot(this);var i=this.Pf(t);return ri(this),i},t.prototype[X]=function(){var t=this.Cf;if(this.tf.length>0){var i=rt(this);return!0===this.Nf&&0===this.tf.length?(ri(this),Yi(t)):ei(this),T(D(i,!1,t.Gd.Wd))}var s=H(t);return ei(this),s},t}();function si(t){return!!r(t)&&!!w.prototype.hasOwnProperty.call(t,"Cf")}function ei(t){!1!==ni(t)&&(!0!==t.Df?(t.Df=!0,R(t.Bf(),function(){t.Df=!1,!0===t.Mf&&(t.Mf=!1,ei(t))},function(i){ai(t,i)})):t.Mf=!0)}function ni(t){var i=t.Cf;return!1!==ci(t)&&(!1!==t.mf&&(!0===Hi(i)&&Y(i)>0||ui(t)>0))}function ri(t){t.Bf=void 0,t.Pf=void 0,t.Af=void 0}function hi(t){var i=t.Cf;t.Nf=!0,0===t.tf.length&&(ri(t),Yi(i))}function oi(t,i){var s=t.Cf;if(!0===Hi(s)&&Y(s)>0)z(s,i,!1);else{var e=void 0;try{e=t.Af(i)}catch(i){throw ai(t,i),i}try{ht(t,i,e)}catch(i){throw ai(t,i),i}}ei(t)}function ai(t,i){var s=t.Cf;"readable"===s.Ra&&(ot(t),ri(t),Ki(s,i))}function ui(t){var i=t.Cf.Ra;return"errored"===i?null:"closed"===i?0:t.kf-t.if}function ci(t){var i=t.Cf.Ra;return!1===t.Nf&&"readable"===i}function di(t,i,s,e,n,r,h){i.Cf=t,i.tf=void 0,i.if=void 0,ot(i),i.mf=!1,i.Nf=!1,i.Mf=!1,i.Df=!1,i.Af=h,i.kf=r,i.Bf=e,i.Pf=n,t.Jd=i,R(T(s()),function(){i.mf=!0,ei(i)},function(t){ai(i,t)})}function li(t){return new g("ReadableStreamDefaultController.prototype."+t+" can only be used on a ReadableStreamDefaultController")}var fi=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&_.floor(t)===t},vi=function(){function t(){throw new g("ReadableStreamBYOBRequest cannot be used directly")}return w.defineProperty(t.prototype,"view",{get:function(){if(!1===mi(this))throw Di("view");return this.Lf},enumerable:!0,configurable:!0}),t.prototype.respond=function(t){if(!1===mi(this))throw Di("respond");if(void 0===this.Of)throw new g("This BYOB request has been invalidated");this.Lf.buffer,function(t,i){if(i=Number(i),!1===a(i))throw new RangeError("bytesWritten must be a finite");Ri(t,i)}(this.Of,t)},t.prototype.respondWithNewView=function(t){if(!1===mi(this))throw Di("respond");if(void 0===this.Of)throw new g("This BYOB request has been invalidated");if(!ArrayBuffer.isView(t))throw new g("You can only respond with array buffer views");t.buffer,function(t,i){var s=t.Ff.peek();if(s.byteOffset+s.bytesFilled!==i.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(s.byteLength!==i.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");s.buffer=i.buffer,Ri(t,i.byteLength)}(this.Of,t)},t}(),_i=function(){function t(){throw new g("ReadableByteStreamController constructor cannot be used directly")}return w.defineProperty(t.prototype,"byobRequest",{get:function(){if(!1===gi(this))throw Bi("byobRequest");if(void 0===this.Vf&&this.Ff.length>0){var t=this.Ff.peek(),i=new j(t.buffer,t.byteOffset+t.bytesFilled,t.byteLength-t.bytesFilled),s=w.create(vi.prototype);!function(t,i,s){t.Of=i,t.Lf=s}(s,this,i),this.Vf=s}return this.Vf},enumerable:!0,configurable:!0}),w.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===gi(this))throw Bi("desiredSize");return Ci(this)},enumerable:!0,configurable:!0}),t.prototype.close=function(){if(!1===gi(this))throw Bi("close");if(!0===this.Nf)throw new g("The stream has already been closed; do not close it again!");var t=this.Wf.Ra;if("readable"!==t)throw new g("The stream (in "+t+" state) is not in the readable state and cannot be closed");!function(t){var i=t.Wf;if(t.if>0)return void(t.Nf=!0);if(t.Ff.length>0){if(t.Ff.peek().bytesFilled>0){var s=new g("Insufficient bytes to fill elements in the given buffer");throw Pi(t,s),s}}Ii(t),Yi(i)}(this)},t.prototype.enqueue=function(t){if(!1===gi(this))throw Bi("enqueue");if(!0===this.Nf)throw new g("stream is closed or draining");var i=this.Wf.Ra;if("readable"!==i)throw new g("The stream (in "+i+" state) is not in the readable state and cannot be enqueued to");if(!ArrayBuffer.isView(t))throw new g("You can only enqueue array buffer views when using a ReadableByteStreamController");t.buffer,function(t,i){var s=t.Wf,e=i.buffer,n=i.byteOffset,r=i.byteLength,h=e;if(!0===K(s)){if(0===Y(s))bi(t,h,n,r);else z(s,new j(h,n,r),!1)}else!0===Oi(s)?(bi(t,h,n,r),Ei(t)):bi(t,h,n,r);pi(t)}(this,t)},t.prototype.error=function(t){if(!1===gi(this))throw Bi("error");Pi(this,t)},t.prototype[G]=function(t){this.Ff.length>0&&(this.Ff.peek().bytesFilled=0);ot(this);var i=this.Pf(t);return Ii(this),i},t.prototype[X]=function(){var t=this.Wf;if(this.if>0){var i=this.tf.shift();this.if-=i.byteLength,Ti(this);var s=void 0;try{s=new j(i.buffer,i.byteOffset,i.byteLength)}catch(t){return k(t)}return T(D(s,!1,t.Gd.Wd))}var e=this.Uf;if(void 0!==e){var n=void 0;try{n=new ArrayBuffer(e)}catch(t){return k(t)}var r={buffer:n,byteOffset:0,byteLength:e,bytesFilled:0,elementSize:1,ctor:j,readerType:"default"};this.Ff.push(r)}var h=H(t);return pi(this),h},t}();function gi(t){return!!r(t)&&!!w.prototype.hasOwnProperty.call(t,"Wf")}function mi(t){return!!r(t)&&!!w.prototype.hasOwnProperty.call(t,"Of")}function pi(t){var i=function(t){var i=t.Wf;if("readable"!==i.Ra)return!1;if(!0===t.Nf)return!1;if(!1===t.mf)return!1;if(!0===K(i)&&Y(i)>0)return!0;if(!0===Oi(i)&&Li(i)>0)return!0;var s=Ci(t);if(s>0)return!0;return!1}(t);!1!==i&&(!0!==t.Df?(t.Df=!0,R(t.Bf(),function(){t.Df=!1,!0===t.Mf&&(t.Mf=!1,pi(t))},function(i){Pi(t,i)})):t.Mf=!0)}function wi(t,i){var s=!1;"closed"===t.Ra&&(s=!0);var e=yi(i);"default"===i.readerType?z(t,e,s):function(t,i,s){var e=t.Gd,n=e.Gf.shift();n.Yd(D(i,s,e.Wd))}(t,e,s)}function yi(t){var i=t.bytesFilled,s=t.elementSize;return new t.ctor(t.buffer,t.byteOffset,i/s)}function bi(t,i,s,e){t.tf.push({buffer:i,byteOffset:s,byteLength:e}),t.if+=e}function Ai(t,i){var s=i.elementSize,e=i.bytesFilled-i.bytesFilled%s,n=_.min(t.if,i.byteLength-i.bytesFilled),r=i.bytesFilled+n,h=r-r%s,a=n,u=!1;h>e&&(a=h-i.bytesFilled,u=!0);for(var c=t.tf;a>0;){var d=c.peek(),l=_.min(a,d.byteLength),f=i.byteOffset+i.bytesFilled;o(i.buffer,f,d.buffer,d.byteOffset,l),d.byteLength===l?c.shift():(d.byteOffset+=l,d.byteLength-=l),t.if-=l,Si(t,l,i),a-=l}return u}function Si(t,i,s){ki(t),s.bytesFilled+=i}function Ti(t){0===t.if&&!0===t.Nf?(Ii(t),Yi(t.Wf)):pi(t)}function ki(t){void 0!==t.Vf&&(t.Vf.Of=void 0,t.Vf.Lf=void 0,t.Vf=void 0)}function Ei(t){for(;t.Ff.length>0;){if(0===t.if)return;var i=t.Ff.peek();!0===Ai(t,i)&&(xi(t),wi(t.Wf,i))}}function Ri(t,i){var s=t.Ff.peek();if("closed"===t.Wf.Ra){if(0!==i)throw new g("bytesWritten must be 0 when calling respond() on a closed stream");!function(t,i){i.buffer=i.buffer;var s=t.Wf;if(!0===Oi(s))for(;Li(s)>0;)wi(s,xi(t))}(t,s)}else!function(t,i,s){if(s.bytesFilled+i>s.byteLength)throw new RangeError("bytesWritten out of range");if(Si(t,i,s),!(s.bytesFilled<s.elementSize)){xi(t);var e=s.bytesFilled%s.elementSize;if(e>0){var n=s.byteOffset+s.bytesFilled,r=s.buffer.slice(n-e,n);bi(t,r,0,r.byteLength)}s.buffer=s.buffer,s.bytesFilled-=e,wi(t.Wf,s),Ei(t)}}(t,i,s);pi(t)}function xi(t){var i=t.Ff.shift();return ki(t),i}function Ii(t){t.Bf=void 0,t.Pf=void 0}function Pi(t,i){var s=t.Wf;"readable"===s.Ra&&(!function(t){ki(t),t.Ff=new N}(t),ot(t),Ii(t),Ki(s,i))}function Ci(t){var i=t.Wf.Ra;return"errored"===i?null:"closed"===i?0:t.kf-t.if}function Ni(t,i,s){var e=w.create(_i.prototype);var n=c(i,"pull",0,[e]),r=c(i,"cancel",1,[]),h=i.autoAllocateChunkSize;if(void 0!==h&&(h=Number(h),!1===fi(h)||h<=0))throw new RangeError("autoAllocateChunkSize must be a positive integer");!function(t,i,s,e,n,r,h){i.Wf=t,i.Mf=!1,i.Df=!1,i.Vf=void 0,i.tf=i.if=void 0,ot(i),i.Nf=!1,i.mf=!1,i.kf=f(r),i.Bf=e,i.Pf=n,i.Uf=h,i.Ff=new N,t.Jd=i,R(T(s()),function(){i.mf=!0,pi(i)},function(t){Pi(i,t)})}(t,e,function(){return d(i,"start",[e])},n,r,s,h)}function Di(t){return new g("ReadableStreamBYOBRequest.prototype."+t+" can only be used on a ReadableStreamBYOBRequest")}function Bi(t){return new g("ReadableByteStreamController.prototype."+t+" can only be used on a ReadableByteStreamController")}function Mi(t){return S(function(i,s){var e={Yd:i,Kd:s};t.Gd.Gf.push(e)})}function Li(t){return t.Gd.Gf.length}function Oi(t){var i=t.Gd;return void 0!==i&&!!Vi(i)}var Fi=function(){function t(t){if(!Zi(t))throw new g("ReadableStreamBYOBReader can only be constructed with a ReadableStream instance given a byte source");if(!1===gi(t.Jd))throw new g("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");if(Hi(t))throw new g("This stream has already been locked for exclusive reading by another reader");B(this,t),this.Gf=new N}return w.defineProperty(t.prototype,"closed",{get:function(){return Vi(this)?this.Zd:k(Wi("closed"))},enumerable:!0,configurable:!0}),t.prototype.cancel=function(t){return Vi(this)?void 0===this.Ud?k(O("cancel")):M(this,t):k(Wi("cancel"))},t.prototype.read=function(t){return Vi(this)?void 0===this.Ud?k(O("read from")):ArrayBuffer.isView(t)?(t.buffer,0===t.byteLength?k(new g("view must have non-zero byteLength")):function(t,i){var s=t.Ud;if(s.Qd=!0,"errored"===s.Ra)return k(s.Xd);return function(t,i){var s=t.Wf,e=1;i.constructor!==DataView&&(e=i.constructor.BYTES_PER_ELEMENT);var n=i.constructor,r={buffer:i.buffer,byteOffset:i.byteOffset,byteLength:i.byteLength,bytesFilled:0,elementSize:e,ctor:n,readerType:"byob"};if(t.Ff.length>0)return t.Ff.push(r),Mi(s);if("closed"===s.Ra)return T(D(new n(r.buffer,r.byteOffset,0),!0,s.Gd.Wd));if(t.if>0){if(!0===Ai(t,r)){var h=yi(r);return Ti(t),T(D(h,!1,s.Gd.Wd))}if(!0===t.Nf){var o=new g("Insufficient bytes to fill elements in the given buffer");return Pi(t,o),k(o)}}t.Ff.push(r);var a=Mi(s);return pi(t),a}(s.Jd,i)}(this,t)):k(new g("view must be an array buffer view")):k(Wi("read"))},t.prototype.releaseLock=function(){if(!Vi(this))throw Wi("releaseLock");if(void 0!==this.Ud){if(this.Gf.length>0)throw new g("Tried to release a reader lock when that reader has pending read() calls un-settled");L(this)}},t}();function Vi(t){return!!r(t)&&!!w.prototype.hasOwnProperty.call(t,"Gf")}function Wi(t){return new g("ReadableStreamBYOBReader.prototype."+t+" can only be used on a ReadableStreamBYOBReader")}var Ui=function(){function t(t,i){void 0===t&&(t={}),void 0===i&&(i={}),Xi(this);var s=i.size,e=i.highWaterMark,n=t.type;if("bytes"===String(n)){if(void 0!==s)throw new RangeError("The strategy for a byte stream cannot have a size function");void 0===e&&(e=0),Ni(this,t,e=f(e))}else{if(void 0!==n)throw new RangeError("Invalid type is specified");var r=v(s);void 0===e&&(e=1),function(t,i,s,e){var n=w.create(ii.prototype),r=c(i,"pull",0,[n]),h=c(i,"cancel",1,[]);di(t,n,function(){return d(i,"start",[n])},r,h,s,e)}(this,t,e=f(e),r)}}return w.defineProperty(t.prototype,"locked",{get:function(){if(!1===Zi(this))throw qi("locked");return Hi(this)},enumerable:!0,configurable:!0}),t.prototype.cancel=function(t){return!1===Zi(this)?k(qi("cancel")):!0===Hi(this)?k(new g("Cannot cancel a stream that already has a reader")):zi(this,t)},t.prototype.getReader=function(t){var i=(void 0===t?{}:t).mode;if(!1===Zi(this))throw qi("getReader");if(void 0===i)return Z(this,!0);if("byob"===(i=String(i)))return function(t,i){void 0===i&&(i=!1);var s=new Fi(t);return s.Wd=i,s}(this,!0);throw new RangeError("Invalid mode is specified")},t.prototype.pipeThrough=function(t,i){var s=t.writable,e=t.readable,n=void 0===i?{}:i,r=n.preventClose,h=n.preventAbort,o=n.preventCancel,a=n.signal;if(!1===Zi(this))throw qi("pipeThrough");if(!1===ft(s))throw new g("writable argument to pipeThrough must be a WritableStream");if(!1===Zi(e))throw new g("readable argument to pipeThrough must be a ReadableStream");if(r=Boolean(r),h=Boolean(h),o=Boolean(o),void 0!==a&&!jt(a))throw new g("ReadableStream.prototype.pipeThrough's signal option must be an AbortSignal");if(!0===Hi(this))throw new g("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(!0===vt(s))throw new g("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");return C(ti(this,s,r,h,o,a)),e},t.prototype.pipeTo=function(t,i){var s=void 0===i?{}:i,e=s.preventClose,n=s.preventAbort,r=s.preventCancel,h=s.signal;return!1===Zi(this)?k(qi("pipeTo")):!1===ft(t)?k(new g("ReadableStream.prototype.pipeTo's first argument must be a WritableStream")):(e=Boolean(e),n=Boolean(n),r=Boolean(r),void 0===h||jt(h)?!0===Hi(this)?k(new g("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):!0===vt(t)?k(new g("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):ti(this,t,e,n,r,h):k(new g("ReadableStream.prototype.pipeTo's signal option must be an AbortSignal")))},t.prototype.tee=function(){if(!1===Zi(this))throw qi("tee");var t=function(t){var i,s,e,n,r,o=Z(t),a=!1,u=!1,c=!1,d=S(function(t){r=t});function l(){return!0===a||(a=!0,C(P(tt(o),function(t){if(a=!1,!0===t.done)return!1===u&&hi(e.Jd),void(!1===c&&hi(n.Jd));var i=t.value,s=i,r=i;!1===u&&oi(e.Jd,s),!1===c&&oi(n.Jd,r)}))),T(void 0)}function f(){}return e=Gi(f,l,function(e){if(u=!0,i=e,!0===c){var n=h([i,s]),o=zi(t,n);r(o)}return d}),n=Gi(f,l,function(e){if(c=!0,s=e,!0===u){var n=h([i,s]),o=zi(t,n);r(o)}return d}),I(o.Zd,function(t){ai(e.Jd,t),ai(n.Jd,t)}),[e,n]}(this);return h(t)},t.prototype.getIterator=function(t){var i=(void 0===t?{}:t).preventCancel,s=void 0!==i&&i;if(!1===Zi(this))throw qi("getIterator");return function(t,i){void 0===i&&(i=!1);var s=Z(t),e=w.create(st);return e.$d=s,e.ul=Boolean(i),e}(this,s)},t}();function Gi(t,i,s,e,n){void 0===e&&(e=1),void 0===n&&(n=function(){return 1});var r=w.create(Ui.prototype);return Xi(r),di(r,w.create(ii.prototype),t,i,s,e,n),r}function Xi(t){t.Ra="readable",t.Gd=void 0,t.Xd=void 0,t.Qd=!1}function Zi(t){return!!r(t)&&!!w.prototype.hasOwnProperty.call(t,"Jd")}function Hi(t){return void 0!==t.Gd}function zi(t,i){return t.Qd=!0,"closed"===t.Ra?T(void 0):"errored"===t.Ra?k(t.Xd):(Yi(t),P(t.Jd[G](i),s))}function Yi(t){t.Ra="closed";var i=t.Gd;void 0!==i&&($(i)&&(i.qd.forEach(function(t){t.Yd(D(void 0,!0,i.Wd))}),i.qd=new N),U(i))}function Ki(t,i){t.Ra="errored",t.Xd=i;var s=t.Gd;void 0!==s&&($(s)?(s.qd.forEach(function(t){t.Kd(i)}),s.qd=new N):(s.Gf.forEach(function(t){t.Kd(i)}),s.Gf=new N),W(s,i))}function qi(t){return new g("ReadableStream.prototype."+t+" can only be used on a ReadableStream")}"symbol"==typeof i.asyncIterator&&w.defineProperty(Ui.prototype,i.asyncIterator,{value:Ui.prototype.getIterator,enumerable:!1,writable:!0,configurable:!0});var ji=function(){function t(t){var i=t.highWaterMark;this.highWaterMark=i}return t.prototype.size=function(t){return t.byteLength},t}(),Qi=function(){function t(t){var i=t.highWaterMark;this.highWaterMark=i}return t.prototype.size=function(){return 1},t}(),Ji=function(){function t(t,i,s){void 0===t&&(t={}),void 0===i&&(i={}),void 0===s&&(s={});var e=i.size,n=i.highWaterMark,r=s.size,h=s.highWaterMark;if(void 0!==t.writableType)throw new RangeError("Invalid writable type specified");var o=v(e);if(void 0===n&&(n=1),n=f(n),void 0!==t.readableType)throw new RangeError("Invalid readable type specified");var a,u=v(r);void 0===h&&(h=0),h=f(h),function(t,i,s,e,n,r){function h(){return i}function o(i){return function(t,i){var s=t.Xf;if(!0===t.lf){return P(t.Zf,function(){var e=t.Hf;if("erroring"===e.Ra)throw e.Xd;return os(s,i)})}return os(s,i)}(t,i)}function a(i){return function(t,i){return ts(t,i),T(void 0)}(t,i)}function u(){return function(t){var i=t.zf,s=t.Xf,e=s.Yf();return rs(s),P(e,function(){if("errored"===i.Ra)throw i.Xd;var t=i.Jd;!0===ci(t)&&hi(t)},function(s){throw ts(t,s),i.Xd})}(t)}function c(){return function(t){return ss(t,!1),t.Zf}(t)}function d(i){return is(t,i),T(void 0)}t.Hf=function(t,i,s,e,n,r){void 0===n&&(n=1),void 0===r&&(r=function(){return 1});var h=w.create(ct.prototype);return lt(h),Ct(h,w.create(Pt.prototype),t,i,s,e,n,r),h}(h,o,u,a,s,e),t.zf=Gi(h,c,d,n,r),t.lf=void 0,t.Zf=void 0,t.Kf=void 0,ss(t,!0),t.Xf=void 0}(this,S(function(t){a=t}),n,o,h,u),function(t,i){var s=w.create(es.prototype),e=function(t){try{return hs(s,t),T(void 0)}catch(t){return k(t)}},n=i.transform;if(void 0!==n){if("function"!=typeof n)throw new g("transform is not a method");e=function(t){return l(n,i,[t,s])}}var r=c(i,"flush",0,[s]);!function(t,i,s,e){i.qf=t,t.Xf=i,i.jf=s,i.Yf=e}(t,s,e,r)}(this,t);var _=d(t,"start",[this.Xf]);a(_)}return w.defineProperty(t.prototype,"readable",{get:function(){if(!1===$i(this))throw us("readable");return this.zf},enumerable:!0,configurable:!0}),w.defineProperty(t.prototype,"writable",{get:function(){if(!1===$i(this))throw us("writable");return this.Hf},enumerable:!0,configurable:!0}),t}();function $i(t){return!!r(t)&&!!w.prototype.hasOwnProperty.call(t,"Xf")}function ts(t,i){ai(t.zf.Jd,i),is(t,i)}function is(t,i){rs(t.Xf),Mt(t.Hf.nf,i),!0===t.lf&&ss(t,!1)}function ss(t,i){void 0!==t.Zf&&t.Kf(),t.Zf=S(function(i){t.Kf=i}),t.lf=i}var es=function(){function t(){throw new g("TransformStreamDefaultController instances cannot be created directly")}return w.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===ns(this))throw as("desiredSize");return ui(this.qf.zf.Jd)},enumerable:!0,configurable:!0}),t.prototype.enqueue=function(t){if(!1===ns(this))throw as("enqueue");hs(this,t)},t.prototype.error=function(t){if(!1===ns(this))throw as("error");!function(t,i){ts(t.qf,i)}(this,t)},t.prototype.terminate=function(){if(!1===ns(this))throw as("terminate");!function(t){var i=t.qf,s=i.zf.Jd;!0===ci(s)&&hi(s);var e=new g("TransformStream terminated");is(i,e)}(this)},t}();function ns(t){return!!r(t)&&!!w.prototype.hasOwnProperty.call(t,"qf")}function rs(t){t.jf=void 0,t.Yf=void 0}function hs(t,i){var s=t.qf,e=s.zf.Jd;if(!1===ci(e))throw new g("Readable side is not in a state that permits enqueue");try{oi(e,i)}catch(t){throw is(s,t),s.zf.Xd}var n=function(t){return!0!==ni(t)}(e);n!==s.lf&&ss(s,!0)}function os(t,i){return P(t.jf(i),void 0,function(i){throw ts(t.qf,i),i})}function as(t){return new g("TransformStreamDefaultController.prototype."+t+" can only be used on a TransformStreamDefaultController")}function us(t){return new g("TransformStream.prototype."+t+" can only be used on a TransformStream")}t.ByteLengthQueuingStrategy=ji,t.CountQueuingStrategy=Qi,t.ReadableStream=Ui,t.TransformStream=Ji,t.WritableStream=ct,w.defineProperty(t,"__esModule",{value:!0})})}),md=Qn(t=>{"use strict";function i(){const t=gd();return i=function(){return t},t}r(),w.defineProperty(t,"__esModule",{value:!0}),function(t,i){for(var s in i)w.defineProperty(t,s,{enumerable:!0,get:w.getOwnPropertyDescriptor(i,s).get})}(t,{get ByteLengthQueuingStrategy(){return i().ByteLengthQueuingStrategy},get CountQueuingStrategy(){return i().CountQueuingStrategy},get ReadableStream(){return i().ReadableStream},get TransformStream(){return i().TransformStream},get WritableStream(){return i().WritableStream}})}),pd=Qn((t,i)=>{r(),function(s,e){"object"==typeof t&&typeof i<"u"?e(t):"function"==typeof define&&define.amd?define(["exports"],e):e((s=typeof globalThis<"u"?globalThis:s||self).millicast={})}(t,function(t){"use strict";var i,e=w.defineProperty,n=w.defineProperties,r=w.getOwnPropertyDescriptors,o=w.getOwnPropertySymbols,a=w.prototype.hasOwnProperty,c=w.prototype.propertyIsEnumerable,d=(t,i,s)=>i in t?e(t,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[i]=s,l=(t,i)=>{for(var s in i||(i={}))a.call(i,s)&&d(t,s,i[s]);if(o)for(var s of o(i))c.call(i,s)&&d(t,s,i[s]);return t},y=(t,i)=>n(t,r(i)),b=(t,i)=>{var s={};for(var e in t)a.call(t,e)&&i.indexOf(e)<0&&(s[e]=t[e]);if(null!=t&&o)for(var e of o(t))i.indexOf(e)<0&&c.call(t,e)&&(s[e]=t[e]);return s},A=typeof globalThis<"u"?globalThis:typeof s<"u"?s:typeof global<"u"?global:typeof self<"u"?self:{};function T(t){return t&&t.__esModule&&w.prototype.hasOwnProperty.call(t,"default")?t.default:t}var k,E={exports:{}};k=E,function(t){var i,s={VERSION:"1.6.1"},e={},n=function(t,i){return function(){return i.apply(t,arguments)}},r=function(){var t,i,s=arguments,e=s[0];for(i=1;i<s.length;i++)for(t in s[i])!(t in e)&&s[i].hasOwnProperty(t)&&(e[t]=s[i][t]);return e},h=function(t,i){return{value:t,name:i}};s.TRACE=h(1,"TRACE"),s.DEBUG=h(2,"DEBUG"),s.INFO=h(3,"INFO"),s.TIME=h(4,"TIME"),s.WARN=h(5,"WARN"),s.ERROR=h(8,"ERROR"),s.OFF=h(99,"OFF");var o=function(t){this.context=t,this.setLevel(t.filterLevel),this.log=this.info};o.prototype={setLevel:function(t){t&&"value"in t&&(this.context.filterLevel=t)},getLevel:function(){return this.context.filterLevel},enabledFor:function(t){var i=this.context.filterLevel;return t.value>=i.value},trace:function(){this.invoke(s.TRACE,arguments)},debug:function(){this.invoke(s.DEBUG,arguments)},info:function(){this.invoke(s.INFO,arguments)},warn:function(){this.invoke(s.WARN,arguments)},error:function(){this.invoke(s.ERROR,arguments)},time:function(t){"string"==typeof t&&t.length>0&&this.invoke(s.TIME,[t,"start"])},timeEnd:function(t){"string"==typeof t&&t.length>0&&this.invoke(s.TIME,[t,"end"])},invoke:function(t,s){i&&this.enabledFor(t)&&i(s,r({level:t},this.context))}};var a,u=new o({filterLevel:s.OFF});(a=s).enabledFor=n(u,u.enabledFor),a.trace=n(u,u.trace),a.debug=n(u,u.debug),a.time=n(u,u.time),a.timeEnd=n(u,u.timeEnd),a.info=n(u,u.info),a.warn=n(u,u.warn),a.error=n(u,u.error),a.log=a.info,s.setHandler=function(t){i=t},s.setLevel=function(t){for(var i in u.setLevel(t),e)e.hasOwnProperty(i)&&e[i].setLevel(t)},s.getLevel=function(){return u.getLevel()},s.get=function(t){return e[t]||(e[t]=new o(r({name:t},u.context)))},s.createDefaultHandler=function(t){(t=t||{}).formatter=t.formatter||function(t,i){i.name&&t.unshift("["+i.name+"]")};var i={},e=function(t,i){Function.prototype.apply.call(t,console,i)};return typeof console>"u"?function(){}:function(n,r){n=Array.prototype.slice.call(n);var h,o=console.log;r.level===s.TIME?(h=(r.name?"["+r.name+"] ":"")+n[0],"start"===n[1]?console.time?console.time(h):i[h]=(new Date).getTime():console.timeEnd?console.timeEnd(h):e(o,[h+": "+((new Date).getTime()-i[h])+"ms"])):(r.level===s.WARN&&console.warn?o=console.warn:r.level===s.ERROR&&console.error?o=console.error:r.level===s.INFO&&console.info?o=console.info:r.level===s.DEBUG&&console.debug?o=console.debug:r.level===s.TRACE&&console.trace&&(o=console.trace),t.formatter(n,r),e(o,n))}},s.useDefaults=function(t){s.setLevel(t&&t.defaultLevel||s.DEBUG),s.setHandler(s.createDefaultHandler(t))},s.setDefaults=s.useDefaults,k.exports?k.exports=s:(s.Qf=t.Logger,s.noConflict=function(){return t.Logger=s.Qf,s},t.Logger=s)}(A);const R=T(E.exports),I="0.5.0",P=(null==(i=null==s?void 0:s.navigator)?void 0:i.userAgent)||"No user agent available";let C="",N="",D="",B="",M="",L="",O="",F=0;const V=[];const W=t=>{C=""===C?t:C},U=t=>{N=""===N?t:N},G=t=>{D=""===D?t:D},X=t=>{B=""===B?t:B},Z=t=>{M=""===M?t:M},H=t=>{F=0===F?t:F},z=t=>{L=t},Y=t=>{O=""===O?t:O},K=t=>{60===V.length&&V.shift(),V.push(t)},q=(t,i)=>{let s;void 0===t&&(t=60),void 0===i&&(i="JSON"),s=!Number.isInteger(t)||t>60||t<=0?60:t;const e={client:"@millicast/millicast-sdk",version:I,timestamp:(new Date).toISOString(),userAgent:P,clusterId:O,accountId:C,streamName:N,subscriberId:D,connection:L,stats:V.slice(-s),connectionDurationMs:(new Date).getTime()-F};return""!==M?e.feedId=M:""!==B&&(e.streamViewId=B),"CMCD"===i?function(t){function i(t,i){return{ts:_.round(i.timestamp)||"",ot:"audio"===t?"a":"v",bl:i.jitterBufferDelay||0,br:_.round(i.bitrateBitsPerSecond||0),pld:i.packetsLostDeltaPerSecond||0,j:i.jitter||0,mtp:i.packetRate||0,mid:i.mid||"",mimeType:i.mimeType||""}}return t.stats=t.stats.reduce((t,s)=>{const e=0!==s.audio.inbounds.length?s.audio.inbounds.map(t=>i("audio",t)):s.audio.outbounds.map(t=>i("audio",t)),n=0!==s.video.inbounds.length?s.video.inbounds.map(t=>i("video",t)):s.video.outbounds.map(t=>i("video",t));return t.concat([...e,...n])},[]),t}(e):e};R.useDefaults({defaultLevel:R.TRACE});const Q=["TRACE","DEBUG","INFO","WARN","ERROR"],J=(t,i)=>{t.unshift("[".concat(i.name||"Global","] ").concat((new Date).toISOString()," - ").concat(i.level.name," -"))},tt=(t,i)=>i?t.value>=rt[i].value:t.value>=nt.value,it=R.createDefaultHandler({formatter:J});R.setHandler((t,i)=>{((t,i)=>{t=(t=Array.prototype.slice.call(t)).map(t=>"object"==typeof t?JSON.stringify(t):t),J(t,i),0!==st?(et.push(t.join(" ")),et.length>=st&&(et=et.slice(-st))):et=[]})(t,i),tt(i.level,i.name)&&it(t,i);for(const{handler:s,level:e}of ht)i.level.value>=e.value&&s(t,i)});let st=1e4,et=[],nt=R.OFF;const rt={},ht=[],ot=y(l({},R),{enabledFor:tt,getHistory:()=>et,getHistoryMaxSize:()=>st,setHistoryMaxSize:t=>{st=t},setLevel:t=>{nt=t;for(const i in rt)rt[i]=t},getLevel:()=>nt,get:t=>{rt[t]||(rt[t]=nt);const i=R.get(t);return i.setLevel=i=>{rt[t]=i},i.getLevel=()=>rt[t],i},setHandler:(t,i)=>{ht.push({handler:t,level:i})},diagnose:t=>{let i;void 0===t&&(t={});const s={statsCount:60,historySize:1e3,minLogLevel:"TRACE",statsFormat:"JSON"};"number"==typeof t?(s.statsCount=t,i=s):i=l(l({},s),t);const{statsCount:e,historySize:n,minLogLevel:r,statsFormat:h}=i,o=q(e,h),a=ot.getHistory();if(!Number.isInteger(n)||n<=0)throw new m("Invalid Argument Exception : historySize must be a positive integer.");if(!Q.includes(r.toUpperCase()))throw new m('Invalid Argument Exception : the minLogLevel parameter only excepts "trace", "debug", "info", "warn", and "error" as arguments.');if(Q.includes(r.toUpperCase())){const t=Q.slice(Q.indexOf(r.toUpperCase())),i=a.filter(i=>t.some(t=>i.includes(t)));o.history=i.slice(-n)}return o},JSON:"JSON",CMCD:"CMCD",VERSION:I});var at,ut={exports:{}},ct="object"==typeof Reflect?Reflect:null,dt=ct&&"function"==typeof ct.apply?ct.apply:function(t,i,s){return Function.prototype.apply.call(t,i,s)};at=ct&&"function"==typeof ct.ownKeys?ct.ownKeys:w.getOwnPropertySymbols?function(t){return w.getOwnPropertyNames(t).concat(w.getOwnPropertySymbols(t))}:function(t){return w.getOwnPropertyNames(t)};var lt=Number.isNaN||function(t){return t!=t};function ft(){ft.init.call(this)}ut.exports=ft,ut.exports.once=function(t,i){return new Promise(function(s,e){function n(s){t.removeListener(i,r),e(s)}function r(){"function"==typeof t.removeListener&&t.removeListener("error",n),s([].slice.call(arguments))}St(t,i,r,{once:!0}),"error"!==i&&function(t,i,s){"function"==typeof t.on&&St(t,"error",i,s)}(t,n,{once:!0})})},ft.EventEmitter=ft,ft.prototype.Jf=void 0,ft.prototype.$f=0,ft.prototype.rv=void 0;var vt=10;function _t(t){if("function"!=typeof t)throw new g('The "listener" argument must be of type Function. Received type '+typeof t)}function gt(t){return void 0===t.rv?ft.defaultMaxListeners:t.rv}function mt(t,i,s,e){var n,r,h;if(_t(s),void 0===(r=t.Jf)?(r=t.Jf=w.create(null),t.$f=0):(void 0!==r.newListener&&(t.emit("newListener",i,s.listener?s.listener:s),r=t.Jf),h=r[i]),void 0===h)h=r[i]=s,++t.$f;else if("function"==typeof h?h=r[i]=e?[s,h]:[h,s]:e?h.unshift(s):h.push(s),(n=gt(t))>0&&h.length>n&&!h.warned){h.warned=!0;var o=new m("Possible EventEmitter memory leak detected. "+h.length+" "+String(i)+" listeners added. Use emitter.setMaxListeners() to increase limit");o.name="MaxListenersExceededWarning",o.emitter=t,o.type=i,o.count=h.length,function(t){console&&console.warn&&console.warn(t)}(o)}return t}function pt(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function wt(t,i,s){var e={fired:!1,wrapFn:void 0,target:t,type:i,listener:s},n=pt.bind(e);return n.listener=s,e.wrapFn=n,n}function yt(t,i,s){var e=t.Jf;if(void 0===e)return[];var n=e[i];return void 0===n?[]:"function"==typeof n?s?[n.listener||n]:[n]:s?function(t){for(var i=new Array(t.length),s=0;s<i.length;++s)i[s]=t[s].listener||t[s];return i}(n):At(n,n.length)}function bt(t){var i=this.Jf;if(void 0!==i){var s=i[t];if("function"==typeof s)return 1;if(void 0!==s)return s.length}return 0}function At(t,i){for(var s=new Array(i),e=0;e<i;++e)s[e]=t[e];return s}function St(t,i,s,e){if("function"==typeof t.on)e.once?t.once(i,s):t.on(i,s);else{if("function"!=typeof t.addEventListener)throw new g('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(i,function n(r){e.once&&t.removeEventListener(i,n),s(r)})}}w.defineProperty(ft,"defaultMaxListeners",{enumerable:!0,get:function(){return vt},set:function(t){if("number"!=typeof t||t<0||lt(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");vt=t}}),ft.init=function(){(void 0===this.Jf||this.Jf===w.getPrototypeOf(this).Jf)&&(this.Jf=w.create(null),this.$f=0),this.rv=this.rv||void 0},ft.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||lt(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this.rv=t,this},ft.prototype.getMaxListeners=function(){return gt(this)},ft.prototype.emit=function(t){for(var i=[],s=1;s<arguments.length;s++)i.push(arguments[s]);var e="error"===t,n=this.Jf;if(void 0!==n)e=e&&void 0===n.error;else if(!e)return!1;if(e){var r;if(i.length>0&&(r=i[0]),r instanceof m)throw r;var h=new m("Unhandled error."+(r?" ("+r.message+")":""));throw h.context=r,h}var o=n[t];if(void 0===o)return!1;if("function"==typeof o)dt(o,this,i);else{var a=o.length,u=At(o,a);for(s=0;s<a;++s)dt(u[s],this,i)}return!0},ft.prototype.addListener=function(t,i){return mt(this,t,i,!1)},ft.prototype.on=ft.prototype.addListener,ft.prototype.prependListener=function(t,i){return mt(this,t,i,!0)},ft.prototype.once=function(t,i){return _t(i),this.on(t,wt(this,t,i)),this},ft.prototype.prependOnceListener=function(t,i){return _t(i),this.prependListener(t,wt(this,t,i)),this},ft.prototype.removeListener=function(t,i){var s,e,n,r,h;if(_t(i),void 0===(e=this.Jf))return this;if(void 0===(s=e[t]))return this;if(s===i||s.listener===i)0===--this.$f?this.Jf=w.create(null):(delete e[t],e.removeListener&&this.emit("removeListener",t,s.listener||i));else if("function"!=typeof s){for(n=-1,r=s.length-1;r>=0;r--)if(s[r]===i||s[r].listener===i){h=s[r].listener,n=r;break}if(n<0)return this;0===n?s.shift():function(t,i){for(;i+1<t.length;i++)t[i]=t[i+1];t.pop()}(s,n),1===s.length&&(e[t]=s[0]),void 0!==e.removeListener&&this.emit("removeListener",t,h||i)}return this},ft.prototype.off=ft.prototype.removeListener,ft.prototype.removeAllListeners=function(t){var i,s,e;if(void 0===(s=this.Jf))return this;if(void 0===s.removeListener)return 0===arguments.length?(this.Jf=w.create(null),this.$f=0):void 0!==s[t]&&(0===--this.$f?this.Jf=w.create(null):delete s[t]),this;if(0===arguments.length){var n,r=w.keys(s);for(e=0;e<r.length;++e)"removeListener"!==(n=r[e])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this.Jf=w.create(null),this.$f=0,this}if("function"==typeof(i=s[t]))this.removeListener(t,i);else if(void 0!==i)for(e=i.length-1;e>=0;e--)this.removeListener(t,i[e]);return this},ft.prototype.listeners=function(t){return yt(this,t,!0)},ft.prototype.rawListeners=function(t){return yt(this,t,!1)},ft.listenerCount=function(t,i){return"function"==typeof t.listenerCount?t.listenerCount(i):bt.call(t,i)},ft.prototype.listenerCount=bt,ft.prototype.eventNames=function(){return this.$f>0?at(this.Jf):[]};var Tt=ut.exports;const kt=T(Tt);var Et={exports:{}};Et.exports=xt,Et.exports.filter=function(t,i){var s=new Rt;return xt(t,s,i),s};var Rt=Tt.EventEmitter;function xt(t,i,s){Array.isArray(s)||(s=[s]);var e=[];return s.forEach(function(s){var n=function(){var t=[].slice.call(arguments);t.unshift(s),i.emit.apply(i,t)};e.push(n),t.on(s,n)}),function(){s.forEach(function(i,s){t.removeListener(i,e[s])})}}const It=T(Et.exports);var Pt={exports:{}};!function(t){var i;self,i=()=>{return t={7:t=>{var i,s="object"==typeof Reflect?Reflect:null,e=s&&"function"==typeof s.apply?s.apply:function(t,i,s){return Function.prototype.apply.call(t,i,s)};i=s&&"function"==typeof s.ownKeys?s.ownKeys:w.getOwnPropertySymbols?function(t){return w.getOwnPropertyNames(t).concat(w.getOwnPropertySymbols(t))}:function(t){return w.getOwnPropertyNames(t)};var n=Number.isNaN||function(t){return t!=t};function r(){r.init.call(this)}t.exports=r,t.exports.once=function(t,i){return new Promise(function(s,e){function n(s){t.removeListener(i,r),e(s)}function r(){"function"==typeof t.removeListener&&t.removeListener("error",n),s([].slice.call(arguments))}var h,o;_(t,i,r,{once:!0}),"error"!==i&&(o=n,"function"==typeof(h=t).on&&_(h,"error",o,{once:!0}))})},r.EventEmitter=r,r.prototype.Jf=void 0,r.prototype.$f=0,r.prototype.rv=void 0;var h=10;function o(t){if("function"!=typeof t)throw new g('The "listener" argument must be of type Function. Received type '+typeof t)}function a(t){return void 0===t.rv?r.defaultMaxListeners:t.rv}function u(t,i,s,e){var n,r,h,u;if(o(s),void 0===(r=t.Jf)?(r=t.Jf=w.create(null),t.$f=0):(void 0!==r.newListener&&(t.emit("newListener",i,s.listener?s.listener:s),r=t.Jf),h=r[i]),void 0===h)h=r[i]=s,++t.$f;else if("function"==typeof h?h=r[i]=e?[s,h]:[h,s]:e?h.unshift(s):h.push(s),(n=a(t))>0&&h.length>n&&!h.warned){h.warned=!0;var c=new m("Possible EventEmitter memory leak detected. "+h.length+" "+String(i)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=t,c.type=i,c.count=h.length,u=c,console&&console.warn&&console.warn(u)}return t}function c(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(t,i,s){var e={fired:!1,wrapFn:void 0,target:t,type:i,listener:s},n=c.bind(e);return n.listener=s,e.wrapFn=n,n}function l(t,i,s){var e=t.Jf;if(void 0===e)return[];var n=e[i];return void 0===n?[]:"function"==typeof n?s?[n.listener||n]:[n]:s?function(t){for(var i=new Array(t.length),s=0;s<i.length;++s)i[s]=t[s].listener||t[s];return i}(n):v(n,n.length)}function f(t){var i=this.Jf;if(void 0!==i){var s=i[t];if("function"==typeof s)return 1;if(void 0!==s)return s.length}return 0}function v(t,i){for(var s=new Array(i),e=0;e<i;++e)s[e]=t[e];return s}function _(t,i,s,e){if("function"==typeof t.on)e.once?t.once(i,s):t.on(i,s);else{if("function"!=typeof t.addEventListener)throw new g('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(i,function n(r){e.once&&t.removeEventListener(i,n),s(r)})}}w.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return h},set:function(t){if("number"!=typeof t||t<0||n(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");h=t}}),r.init=function(){void 0!==this.Jf&&this.Jf!==w.getPrototypeOf(this).Jf||(this.Jf=w.create(null),this.$f=0),this.rv=this.rv||void 0},r.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||n(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this.rv=t,this},r.prototype.getMaxListeners=function(){return a(this)},r.prototype.emit=function(t){for(var i=[],s=1;s<arguments.length;s++)i.push(arguments[s]);var n="error"===t,r=this.Jf;if(void 0!==r)n=n&&void 0===r.error;else if(!n)return!1;if(n){var h;if(i.length>0&&(h=i[0]),h instanceof m)throw h;var o=new m("Unhandled error."+(h?" ("+h.message+")":""));throw o.context=h,o}var a=r[t];if(void 0===a)return!1;if("function"==typeof a)e(a,this,i);else{var u=a.length,c=v(a,u);for(s=0;s<u;++s)e(c[s],this,i)}return!0},r.prototype.addListener=function(t,i){return u(this,t,i,!1)},r.prototype.on=r.prototype.addListener,r.prototype.prependListener=function(t,i){return u(this,t,i,!0)},r.prototype.once=function(t,i){return o(i),this.on(t,d(this,t,i)),this},r.prototype.prependOnceListener=function(t,i){return o(i),this.prependListener(t,d(this,t,i)),this},r.prototype.removeListener=function(t,i){var s,e,n,r,h;if(o(i),void 0===(e=this.Jf))return this;if(void 0===(s=e[t]))return this;if(s===i||s.listener===i)0==--this.$f?this.Jf=w.create(null):(delete e[t],e.removeListener&&this.emit("removeListener",t,s.listener||i));else if("function"!=typeof s){for(n=-1,r=s.length-1;r>=0;r--)if(s[r]===i||s[r].listener===i){h=s[r].listener,n=r;break}if(n<0)return this;0===n?s.shift():function(t,i){for(;i+1<t.length;i++)t[i]=t[i+1];t.pop()}(s,n),1===s.length&&(e[t]=s[0]),void 0!==e.removeListener&&this.emit("removeListener",t,h||i)}return this},r.prototype.off=r.prototype.removeListener,r.prototype.removeAllListeners=function(t){var i,s,e;if(void 0===(s=this.Jf))return this;if(void 0===s.removeListener)return 0===arguments.length?(this.Jf=w.create(null),this.$f=0):void 0!==s[t]&&(0==--this.$f?this.Jf=w.create(null):delete s[t]),this;if(0===arguments.length){var n,r=w.keys(s);for(e=0;e<r.length;++e)"removeListener"!==(n=r[e])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this.Jf=w.create(null),this.$f=0,this}if("function"==typeof(i=s[t]))this.removeListener(t,i);else if(void 0!==i)for(e=i.length-1;e>=0;e--)this.removeListener(t,i[e]);return this},r.prototype.listeners=function(t){return l(this,t,!0)},r.prototype.rawListeners=function(t){return l(this,t,!1)},r.listenerCount=function(t,i){return"function"==typeof t.listenerCount?t.listenerCount(i):f.call(t,i)},r.prototype.listenerCount=f,r.prototype.eventNames=function(){return this.$f>0?i(this.Jf):[]}},156:function(t,i,s){var e=this&&this.hv||(w.create?function(t,i,s,e){void 0===e&&(e=s);var n=w.getOwnPropertyDescriptor(i,s);n&&!("get"in n?!i.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return i[s]}}),w.defineProperty(t,e,n)}:function(t,i,s,e){void 0===e&&(e=s),t[e]=i[s]}),n=this&&this.ov||function(t,i){for(var s in t)"default"===s||w.prototype.hasOwnProperty.call(i,s)||e(i,t,s)},r=this&&this.uv||function(t){return t&&t.__esModule?t:{default:t}};w.defineProperty(i,"__esModule",{value:!0}),i.Logger=void 0;var h=s(586);w.defineProperty(i,"Logger",{enumerable:!0,get:function(){return r(h).default}}),n(s(284),i),n(s(280),i),n(s(738),i),n(s(767),i)},185:(t,i)=>{w.defineProperty(i,"__esModule",{value:!0}),i.calculatePacketsLostRatio=i.calculateRate=i.getMediaKind=void 0,i.getMediaKind=t=>{let i=t.kind||t.mediaType;return["audio","video"].includes(i)||"inbound-rtp"!==t.type||(i=t.id.toLocaleLowerCase().includes("video")?"video":"audio"),i},i.calculateRate=(t,i,s,e)=>s&&e?(i-e)/((t-s)/1e3):0,i.calculatePacketsLostRatio=(t,i,s,e)=>{const n=t-(null!=s?s:0),r=n+(i-(null!=e?e:0));return 0===r?0:n/r}},280:(t,i)=>{w.defineProperty(i,"__esModule",{value:!0})},284:function(t,i,s){var e,n,r,h,o,a,u,c,d,l,f,_,m,y,b,A,S=this&&this.fv||function(t,i,s,e){return new(s||(s=Promise))(function(n,r){function h(t){try{a(e.next(t))}catch(t){r(t)}}function o(t){try{a(e.throw(t))}catch(t){r(t)}}function a(t){var i;t.done?n(t.value):(i=t.value,i instanceof s?i:new s(function(t){t(i)})).then(h,o)}a((e=e.apply(t,i||[])).next())})},T=this&&this.vv||function(t,i,s,e,n){if("m"===e)throw new g("Private method is not writable");if("a"===e&&!n)throw new g("Private accessor was defined without a setter");if("function"==typeof i?t!==i||!n:!i.has(t))throw new g("Cannot write private member to an object whose class did not declare it");return"a"===e?n.call(t,s):n?n.value=s:i.set(t,s),s},k=this&&this._v||function(t,i,s,e){if("a"===s&&!e)throw new g("Private accessor was defined without a getter");if("function"==typeof i?t!==i||!e:!i.has(t))throw new g("Cannot read private member from an object whose class did not declare it");return"m"===s?e:"a"===s?e.call(t):e?e.value:i.get(t)},E=this&&this.uv||function(t){return t&&t.__esModule?t:{default:t}};w.defineProperty(i,"__esModule",{value:!0}),i.WebRTCStats=void 0;const R=s(7),x=E(s(586)),I=s(738),P=s(185);class C extends R.EventEmitter{constructor(t){super(),e.add(this),n.set(this,void 0),r.set(this,void 0),h.set(this,void 0),o.set(this,null),a.set(this,void 0),u.set(this,null),this.start=()=>{k(this,a,"f").info("WebRTC statistics collection is starting..."),T(this,u,null,"f"),T(this,o,v(k(this,c,"f"),k(this,r,"f")),"f")},this.stop=()=>{k(this,o,"f")&&(p(k(this,o,"f")),T(this,o,null,"f"),k(this,a,"f").info("WebRTC statistics collection has stopped."))},c.set(this,()=>S(this,void 0,void 0,function*(){let t,i;try{k(this,a,"f").trace("Requesting WebRTC statistics..."),t=yield k(this,n,"f").call(this),i=(new Date).toISOString()}catch(t){return k(this,a,"f").error("Problem collecting the WebRTC statistics.",t),void this.emit("error","Problem collecting the WebRTC statistics - ".concat(t))}const s=Array.from(t.values()),r={timestamp:i,input:{audio:[],video:[]},output:{audio:[],video:[]}};k(this,h,"f")&&(r.rawStats=t);for(let i=0;i<w.keys(s).length;i++){const n=s[i];switch(n.type){case"outbound-rtp":const i=n,s=(0,P.getMediaKind)(i);"audio"===s?yield k(this,e,"m",f).call(this,t,i,r):"video"===s&&(yield k(this,e,"m",_).call(this,t,i,r));break;case"inbound-rtp":const h=n;let o=(0,P.getMediaKind)(h);"audio"===o?yield k(this,e,"m",y).call(this,t,h,r):"video"===o&&(yield k(this,e,"m",b).call(this,t,h,r));break;case"candidate-pair":const a=n;a.nominated&&k(this,e,"m",A).call(this,a,r)}}T(this,u,r,"f"),this.emit("stats",r)})),T(this,a,x.default.get("WebRTCStats"),"f"),T(this,n,t.getStats,"f"),T(this,r,t.getStatsInterval||1e3,"f"),T(this,h,!!t.includeRawStats,"f")}}i.WebRTCStats=C,n=new WeakMap,r=new WeakMap,h=new WeakMap,o=new WeakMap,a=new WeakMap,u=new WeakMap,c=new WeakMap,e=new WeakSet,d=function(t,i){if(i){const s=t.get(i);if(s)return{mimeType:s.mimeType}}return{}},l=function(t,i,s){return S(this,void 0,void 0,function*(){var n,r,h,o;const a=(0,P.calculateRate)(i.timestamp,i.bytesSent,null==s?void 0:s.timestamp,null==s?void 0:s.totalBytesSent),u=(0,P.calculateRate)(i.timestamp,i.packetsSent,null==s?void 0:s.timestamp,null==s?void 0:s.totalPacketsSent),c=k(this,e,"m",d).call(this,t,i.codecId);return w.assign({id:i.id,timestamp:i.timestamp,mid:i.mid,totalBytesSent:i.bytesSent,bytesSentDelta:i.bytesSent-(null!==(n=null==s?void 0:s.totalBytesSent)&&void 0!==n?n:0),totalPacketsSent:i.packetsSent,packetsSentDelta:i.packetsSent-(null!==(r=null==s?void 0:s.totalPacketsSent)&&void 0!==r?r:0),bitrate:a,packetRate:u,targetBitrate:i.targetBitrate,retransmittedPacketsSent:i.retransmittedPacketsSent,retransmittedPacketsSentDelta:i.retransmittedPacketsSent-(null!==(h=null==s?void 0:s.retransmittedPacketsSent)&&void 0!==h?h:0),retransmittedBytesSent:i.retransmittedBytesSent,retransmittedBytesSentDelta:i.retransmittedBytesSent-(null!==(o=null==s?void 0:s.retransmittedBytesSent)&&void 0!==o?o:0)},c)})},f=function(t,i,s){return S(this,void 0,void 0,function*(){var n;const r=null===(n=k(this,u,"f"))||void 0===n?void 0:n.output.audio.find(t=>t.id===i.id);if(r&&i.timestamp-r.timestamp<=0)return;const h=yield k(this,e,"m",l).call(this,t,i,r),o=w.assign({},h);s.output.audio.push(o)})},_=function(t,i,s){return S(this,void 0,void 0,function*(){var n;const r=null===(n=k(this,u,"f"))||void 0===n?void 0:n.output.video.find(t=>t.id===i.id);if(r&&i.timestamp-r.timestamp<=0)return;const h=yield k(this,e,"m",l).call(this,t,i,r);let o=I.QualityLimitationReason.none;i.qualityLimitationReason&&(o=i.qualityLimitationReason);const a=w.assign(w.assign({},h),{frameWidth:i.frameWidth,frameHeight:i.frameHeight,framesPerSecond:i.framesPerSecond,framesSent:i.framesSent,qualityLimitationReason:o,qualityLimitationDurations:i.qualityLimitationDurations});s.output.video.push(a)})},m=function(t,i,s){return S(this,void 0,void 0,function*(){var n,r;const h=(0,P.calculateRate)(i.timestamp,i.bytesReceived,null==s?void 0:s.timestamp,null==s?void 0:s.totalBytesReceived),o=(0,P.calculateRate)(i.timestamp,i.packetsReceived,null==s?void 0:s.timestamp,null==s?void 0:s.totalPacketsReceived),a=(0,P.calculatePacketsLostRatio)(i.packetsLost,i.packetsReceived,null==s?void 0:s.totalPacketsLost,null==s?void 0:s.totalPacketsReceived),u=(null!==(n=i.packetsLost)&&void 0!==n?n:0)-(null!==(r=null==s?void 0:s.totalPacketsLost)&&void 0!==r?r:0),c=k(this,e,"m",d).call(this,t,i.codecId);return w.assign({id:i.id,timestamp:i.timestamp,mid:i.mid,trackIdentifier:i.trackIdentifier,jitter:i.jitter,jitterBufferDelay:i.jitterBufferDelay,jitterBufferEmittedCount:i.jitterBufferEmittedCount,totalBytesReceived:i.bytesReceived,totalPacketsReceived:i.packetsReceived,totalPacketsLost:i.packetsLost,bitrate:h,packetRate:o,packetLossRatio:a,packetLossDelta:u},c)})},y=function(t,i,s){return S(this,void 0,void 0,function*(){var n;const r=null===(n=k(this,u,"f"))||void 0===n?void 0:n.input.audio.find(t=>t.id===i.id);if(r&&i.timestamp-r.timestamp<=0)return;const h=yield k(this,e,"m",m).call(this,t,i,r);s.input.audio.push(h)})},b=function(t,i,s){return S(this,void 0,void 0,function*(){var n;const r=null===(n=k(this,u,"f"))||void 0===n?void 0:n.input.video.find(t=>t.id===i.id);if(r&&i.timestamp-r.timestamp<=0)return;const h=yield k(this,e,"m",m).call(this,t,i,r),o=w.assign(w.assign({},h),{keyFramesDecoded:i.keyFramesDecoded,frameHeight:i.frameHeight,frameWidth:i.frameWidth,framesDecoded:i.framesDecoded,framesDropped:i.framesDropped,framesPerSecond:i.framesPerSecond,framesReceived:i.framesReceived});s.input.video.push(o)})},A=function(t,i){i.totalRoundTripTime=t.totalRoundTripTime,i.currentRoundTripTime=t.currentRoundTripTime,i.responsesReceived=t.responsesReceived,i.availableOutgoingBitrate=t.availableOutgoingBitrate,i.availableIncomingBitrate=t.availableIncomingBitrate}},586:function(t,i,s){var e,n;!function(){var r,h={VERSION:"1.6.1"},o={},a=function(t,i){return function(){return i.apply(t,arguments)}},u=function(){var t,i,s=arguments,e=s[0];for(i=1;i<s.length;i++)for(t in s[i])!(t in e)&&s[i].hasOwnProperty(t)&&(e[t]=s[i][t]);return e},c=function(t,i){return{value:t,name:i}};h.TRACE=c(1,"TRACE"),h.DEBUG=c(2,"DEBUG"),h.INFO=c(3,"INFO"),h.TIME=c(4,"TIME"),h.WARN=c(5,"WARN"),h.ERROR=c(8,"ERROR"),h.OFF=c(99,"OFF");var d=function(t){this.context=t,this.setLevel(t.filterLevel),this.log=this.info};d.prototype={setLevel:function(t){t&&"value"in t&&(this.context.filterLevel=t)},getLevel:function(){return this.context.filterLevel},enabledFor:function(t){var i=this.context.filterLevel;return t.value>=i.value},trace:function(){this.invoke(h.TRACE,arguments)},debug:function(){this.invoke(h.DEBUG,arguments)},info:function(){this.invoke(h.INFO,arguments)},warn:function(){this.invoke(h.WARN,arguments)},error:function(){this.invoke(h.ERROR,arguments)},time:function(t){"string"==typeof t&&t.length>0&&this.invoke(h.TIME,[t,"start"])},timeEnd:function(t){"string"==typeof t&&t.length>0&&this.invoke(h.TIME,[t,"end"])},invoke:function(t,i){r&&this.enabledFor(t)&&r(i,u({level:t},this.context))}};var l,f=new d({filterLevel:h.OFF});(l=h).enabledFor=a(f,f.enabledFor),l.trace=a(f,f.trace),l.debug=a(f,f.debug),l.time=a(f,f.time),l.timeEnd=a(f,f.timeEnd),l.info=a(f,f.info),l.warn=a(f,f.warn),l.error=a(f,f.error),l.log=l.info,h.setHandler=function(t){r=t},h.setLevel=function(t){for(var i in f.setLevel(t),o)o.hasOwnProperty(i)&&o[i].setLevel(t)},h.getLevel=function(){return f.getLevel()},h.get=function(t){return o[t]||(o[t]=new d(u({name:t},f.context)))},h.createDefaultHandler=function(t){(t=t||{}).formatter=t.formatter||function(t,i){i.name&&t.unshift("["+i.name+"]")};var i={},s=function(t,i){Function.prototype.apply.call(t,console,i)};return typeof console>"u"?function(){}:function(e,n){e=Array.prototype.slice.call(e);var r,o=console.log;n.level===h.TIME?(r=(n.name?"["+n.name+"] ":"")+e[0],"start"===e[1]?console.time?console.time(r):i[r]=(new Date).getTime():console.timeEnd?console.timeEnd(r):s(o,[r+": "+((new Date).getTime()-i[r])+"ms"])):(n.level===h.WARN&&console.warn?o=console.warn:n.level===h.ERROR&&console.error?o=console.error:n.level===h.INFO&&console.info?o=console.info:n.level===h.DEBUG&&console.debug?o=console.debug:n.level===h.TRACE&&console.trace&&(o=console.trace),t.formatter(e,n),s(o,e))}},h.useDefaults=function(t){h.setLevel(t&&t.defaultLevel||h.DEBUG),h.setHandler(h.createDefaultHandler(t))},h.setDefaults=h.useDefaults,void 0===(n="function"==typeof(e=h)?e.call(i,s,i,t):e)||(t.exports=n)}()},738:(t,i)=>{var s,e;w.defineProperty(i,"__esModule",{value:!0}),i.QualityLimitationReason=void 0,(e=s||(i.QualityLimitationReason=s={}))[e.none=0]="none",e[e.cpu=1]="cpu",e[e.bandwidth=2]="bandwidth",e[e.other=3]="other"},767:(t,i)=>{w.defineProperty(i,"__esModule",{value:!0})}},i={},function s(e){var n=i[e];if(void 0!==n)return n.exports;var r=i[e]={exports:{}};return t[e].call(r.exports,r,r.exports,s),r.exports}(156);var t,i},t.exports=i()}(Pt);var Ct=Pt.exports;const Nt=ot.get("PeerConnectionStats"),Dt="stats";class Bt extends kt{init(t){if(this.initialized)return void Nt.warn("PeerConnectionStats.init() has already been called. Automatic initialization occurs when the PeerConnectionStats object is constructed.");Nt.info("Initializing peer connection stats");const i=this.peer;try{this.collection=new Ct.WebRTCStats({getStatsInterval:t,getStats:()=>i.getStats(),includeRawStats:!0}),this.collection.on("stats",t=>{const i=(t=>{const i=t,{input:s,output:e,rawStats:n}=i,r=b(i,["input","output","rawStats"]);return y(l({},r),{audio:{inbounds:t.input.audio.map(t=>{var i=t,{packetLossRatio:s,packetLossDelta:e,bitrate:n}=i,r=b(i,["packetLossRatio","packetLossDelta","bitrate"]);return l({packetsLostRatioPerSecond:s,packetsLostDeltaPerSecond:e,bitrateBitsPerSecond:8*n,bitrate:n},r)}),outbounds:t.output.audio.map(t=>{var i=t,{packetLossRatio:s,packetLossDelta:e,bitrate:n}=i,r=b(i,["packetLossRatio","packetLossDelta","bitrate"]);return l({packetsLostRatioPerSecond:s,packetsLostDeltaPerSecond:e,bitrateBitsPerSecond:8*n,bitrate:n},r)})},video:{inbounds:t.input.video.map(t=>{var i=t,{packetLossRatio:s,packetLossDelta:e,bitrate:n}=i,r=b(i,["packetLossRatio","packetLossDelta","bitrate"]);return l({packetsLostRatioPerSecond:s,packetsLostDeltaPerSecond:e,bitrateBitsPerSecond:8*n,bitrate:n},r)}),outbounds:t.output.video.map(t=>{var i=t,{packetLossRatio:s,packetLossDelta:e,bitrate:n}=i,r=b(i,["packetLossRatio","packetLossDelta","bitrate"]);return l({packetsLostRatioPerSecond:s,packetsLostDeltaPerSecond:e,bitrateBitsPerSecond:8*n,bitrate:n},r)})},raw:t.rawStats})})(t);K(i),this.emit(Dt,i)}),this.collection.start(),this.initialized=!0}catch(t){Nt.error(t)}}parseStats(t){return Nt.warn("The parseStats method is deprecated and will be removed in future releases."),null}stop(){Nt.info("Stopping peer connection stats"),this.collection.stop()}constructor(t,i={statsIntervalMs:1e3,autoInitStats:!0}){super(),this.peer=t,this.collection=null,this.initialized=!1,i.autoInitStats&&this.init(i.statsIntervalMs)}}var Mt={},Lt={},Ot={},Ft={exports:{}},Vt=Ft.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(t){return t.encoding?"rtpmap:%d %s/%s/%s":t.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(t){return null!=t.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(t){return null!=t.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(t){return"extmap:%d"+(t.direction?"/%s":"%v")+(t["encrypt-uri"]?" %s":"%v")+" %s"+(t.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(t){return null!=t.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(t){var i="candidate:%s %d %s %d %s %d typ %s";return i+=null!=t.raddr?" raddr %s rport %d":"%v%v",i+=null!=t.tcptype?" tcptype %s":"%v",null!=t.generation&&(i+=" generation %d"),i+=null!=t["network-id"]?" network-id %d":"%v",i+=null!=t["network-cost"]?" network-cost %d":"%v"}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(t){var i="ssrc:%d";return null!=t.attribute&&(i+=" %s",null!=t.value&&(i+=":%s")),i}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(t){return null!=t.maxMessageSize?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(t){return t.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(t){return"imageattr:%s %s %s"+(t.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(t){return"simulcast:%s %s"+(t.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(t){return"ts-refclk:%s"+(null!=t.clksrcExt?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(t){var i="mediaclk:";return i+=null!=t.id?"id=%s %s":"%v%s",i+=null!=t.mediaClockValue?"=%s":"",i+=null!=t.rateNumerator?" rate=%s":"",i+=null!=t.rateDenominator?"/%s":""}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};w.keys(Vt).forEach(function(t){Vt[t].forEach(function(t){t.reg||(t.reg=/(.*)/),t.format||(t.format="%s")})});var Wt=Ft.exports;!function(t){var i=function(t){return String(Number(t))===t?Number(t):t},s=function(t,s,e){var n=t.name&&t.names;t.push&&!s[t.push]?s[t.push]=[]:n&&!s[t.name]&&(s[t.name]={});var r=t.push?{}:n?s[t.name]:s;(function(t,s,e,n){if(n&&!e)s[n]=i(t[1]);else for(var r=0;r<e.length;r+=1)null!=t[r+1]&&(s[e[r]]=i(t[r+1]))})(e.match(t.reg),r,t.names,t.name),t.push&&s[t.push].push(r)},e=Wt,n=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(t){var i={},r=[],h=i;return t.split(/(\r\n|\r|\n)/).filter(n).forEach(function(t){var i=t[0],n=t.slice(2);"m"===i&&(r.push({rtp:[],fmtp:[]}),h=r[r.length-1]);for(var o=0;o<(e[i]||[]).length;o+=1){var a=e[i][o];if(a.reg.test(n))return s(a,h,n)}}),i.media=r,i};var r=function(t,s){var e=s.split(/=(.+)/,2);return 2===e.length?t[e[0]]=i(e[1]):1===e.length&&s.length>1&&(t[e[0]]=void 0),t};t.parseParams=function(t){return t.split(/;\s?/).reduce(r,{})},t.parseFmtpConfig=t.parseParams,t.parsePayloads=function(t){return t.toString().split(" ").map(Number)},t.parseRemoteCandidates=function(t){for(var s=[],e=t.split(" ").map(i),n=0;n<e.length;n+=3)s.push({component:e[n],ip:e[n+1],port:e[n+2]});return s},t.parseImageAttributes=function(t){return t.split(" ").map(function(t){return t.substring(1,t.length-1).split(",").reduce(r,{})})},t.parseSimulcastStreamList=function(t){return t.split(";").map(function(t){return t.split(",").map(function(t){var s,e=!1;return"~"!==t[0]?s=i(t):(s=i(t.substring(1,t.length)),e=!0),{scid:s,paused:e}})})}}(Ot);var Ut=Wt,Gt=/%[sdv%]/g,Xt=function(t){var i=1,s=arguments,e=s.length;return t.replace(Gt,function(t){if(i>=e)return t;var n=s[i];switch(i+=1,t){case"%%":return"%";case"%s":return String(n);case"%d":return Number(n);case"%v":return""}})},Zt=function(t,i,s){var e=[t+"="+(i.format instanceof Function?i.format(i.push?s:s[i.name]):i.format)];if(i.names)for(var n=0;n<i.names.length;n+=1){var r=i.names[n];i.name?e.push(s[i.name][r]):e.push(s[i.names[n]])}else e.push(s[i.name]);return Xt.apply(null,e)},Ht=["v","o","s","i","u","e","p","c","b","t","r","z","a"],zt=["i","c","b","a"],Yt=Ot,Kt=function(t,i){i=i||{},null==t.version&&(t.version=0),null==t.name&&(t.name=" "),t.media.forEach(function(t){null==t.payloads&&(t.payloads="")});var s=i.outerOrder||Ht,e=i.innerOrder||zt,n=[];return s.forEach(function(i){Ut[i].forEach(function(s){s.name in t&&null!=t[s.name]?n.push(Zt(i,s,t)):s.push in t&&null!=t[s.push]&&t[s.push].forEach(function(t){n.push(Zt(i,s,t))})})}),t.media.forEach(function(t){n.push(Zt("m",Ut.m[0],t)),e.forEach(function(i){Ut[i].forEach(function(s){s.name in t&&null!=t[s.name]?n.push(Zt(i,s,t)):s.push in t&&null!=t[s.push]&&t[s.push].forEach(function(t){n.push(Zt(i,s,t))})})})}),n.join("\r\n")+"\r\n"};Lt.write=Kt,Lt.parse=Yt.parse,Lt.parseParams=Yt.parseParams,Lt.parseFmtpConfig=Yt.parseFmtpConfig,Lt.parsePayloads=Yt.parsePayloads,Lt.parseRemoteCandidates=Yt.parseRemoteCandidates,Lt.parseImageAttributes=Yt.parseImageAttributes,Lt.parseSimulcastStreamList=Yt.parseSimulcastStreamList;let qt=class t{equals(t){return t.foundation===this.foundation&&t.componentId===this.componentId&&t.transport===this.transport&&t.priority===this.priority&&t.address===this.address&&t.port===this.port&&t.type===this.type&&t.relAddr===this.relAddr&&t.relPort===this.relPort}clone(){return new t(this.foundation,this.componentId,this.transport,this.priority,this.address,this.port,this.type,this.relAddr,this.relPort)}plain(){const t={foundation:this.foundation,componentId:this.componentId,transport:this.transport,priority:this.priority,address:this.address,port:this.port,type:this.type};return this.relAddr&&(t.relAddr=this.relAddr),this.relPort&&(t.relPort=this.relPort),t}getFoundation(){return this.foundation}getComponentId(){return this.componentId}getTransport(){return this.transport}getPriority(){return this.priority}getAddress(){return this.address}getPort(){return this.port}getType(){return this.type}getRelAddr(){return this.relAddr}getRelPort(){return this.relPort}constructor(t,i,s,e,n,r,h,o,a){this.foundation=t,this.componentId=i,this.transport=s,this.priority=e,this.address=n,this.port=r,this.type=h,this.relAddr=o,this.relPort=a}};qt.expand=function(t){return"CandidateInfo"===t.constructor.name?t:new qt(t.foundation,t.componentId,t.transport,t.priority,t.address,t.port,t.type,t.relAddr,t.relPort)},qt.clone=function(t){return"CandidateInfo"===t.constructor.name?t.clone():qt.expand(t)};var jt=qt;let Qt=class t{clone(){return new t(this.id,this.params)}plain(){return this.params.length?{id:this.id,params:this.params}:{id:this.id}}getId(){return this.id}getParams(){return this.params}constructor(t,i){this.id=t,this.params=i||[]}};Qt.expand=function(t){return"RTCPFeedbackInfo"===t.constructor.name?t:new Qt(t.id,t.params)},Qt.clone=function(t){return"RTCPFeedbackInfo"===t.constructor.name?t.clone():Qt.expand(t)};var Jt=Qt;const $t=Jt;let ti=class t{clone(){const i=new t(this.codec,this.type,this.params);this.hasRTX()&&i.setRTX(this.getRTX());for(const t of this.rtcpfbs)i.addRTCPFeedback(t.clone());return this.hasChannels()&&i.setChannels(this.getChannels()),i}plain(){const t={codec:this.codec,type:this.type};this.rtx&&(t.rtx=this.rtx),this.channels&&(t.channels=this.channels),w.keys(this.params).length&&(t.params=this.params);for(const i of this.rtcpfbs)t.rtcpfbs||(t.rtcpfbs=[]),t.rtcpfbs.push(i.plain());return t}setRTX(t){this.rtx=t}getType(){return this.type}setType(t){this.type=t}getCodec(){return this.codec}getParams(){return this.params}addParams(t){for(const i in t)this.params[i]=t[i]}addParam(t,i){this.params[t]=i}hasParam(t){return w.hasOwnProperty.call(this.params,t)}getParam(t,i){if(void 0===i&&(i=void 0),this.hasParam(t))return this.params[t];if(void 0===i)throw new m("param ".concat(t," not found and no default value provided"));return""+i}hasRTX(){return this.rtx}getRTX(){return this.rtx}hasChannels(){return this.channels}getChannels(){return this.channels}setChannels(t){this.channels=t}addRTCPFeedback(t){this.rtcpfbs.add(t)}getRTCPFeedbacks(){return this.rtcpfbs}constructor(t,i,s){this.codec=t,this.type=i,this.params={},this.rtcpfbs=new Set,s&&this.addParams(s)}};ti.expand=function(t){if("CodecInfo"===t.constructor.name)return t;const i=new ti(t.codec,t.type,t.params);t.rtx&&i.setRTX(t.rtx),t.channels&&i.setChannels(t.channels);for(const s of t.rtcpfbs||[]){const t=$t.expand(s);i.addRTCPFeedback(t)}return i},ti.clone=function(t){return"CodecInfo"===t.constructor.name?t.clone():ti.expand(t)},ti.MapFromNames=function(t,i,s){var e;const n=new Map;let r=96;for(const h of t){let t;const o=h.split(";"),a=o.shift().toLowerCase().trim();t="pcmu"===a?0:"pcma"===a?8:++r;const u=new ti(a,t);"opus"===a?u.setChannels(2):"multiopus"===a&&u.setChannels(6),i&&"ulpfec"!==a&&"flexfec-03"!==a&&"red"!==a&&u.setRTX(++r);for(const t of s||[])u.addRTCPFeedback(new $t(t.id,t.params));for(const t of o){let i=t.split("=");u.addParam(i[0].trim(),null===(e=i[1])||void 0===e?void 0:e.trim())}n.set(t,u)}return n};var ii=ti;var si=function t(){var i=this;if(!(this instanceof t))return new(Function.prototype.bind.apply(t,[null].concat(Array.prototype.slice.call(arguments))));Array.from(arguments).forEach(function(t){i[t]=f("mv"+t)})};const ei=si("ACTIVE","PASSIVE","ACTPASS","INACTIVE");ei.byValue=function(t){switch(t){case ei.ACTIVE:case ei.PASSIVE:case ei.ACTPASS:case ei.INACTIVE:return t}return ei[t.toUpperCase()]},ei.toString=function(t){switch(t){case ei.ACTIVE:return"active";case ei.PASSIVE:return"passive";case ei.ACTPASS:return"actpass";case ei.INACTIVE:return"inactive"}},ei.reverse=function(t,i){switch(t){case ei.ACTIVE:return ei.PASSIVE;case ei.PASSIVE:return ei.ACTIVE;case ei.ACTPASS:return i?ei.ACTIVE:ei.PASSIVE;case ei.INACTIVE:return ei.INACTIVE}};var ni=ei;const ri=ni;let hi=class t{clone(){return new t(this.setup,this.hash,this.fingerprint)}plain(){return{setup:ri.toString(this.setup),hash:this.hash,fingerprint:this.fingerprint}}getFingerprint(){return this.fingerprint}getHash(){return this.hash}getSetup(){return this.setup}setSetup(t){this.setup=t}constructor(t,i,s){this.setup=t,this.hash=i,this.fingerprint=s}};hi.expand=function(t){return"DTLSInfo"===t.constructor.name?t:new hi(t.setup?ri.byValue(t.setup):ri.ACTPASS,t.hash,t.fingerprint)},hi.clone=function(t){return"DTLSInfo"===t.constructor.name?t.clone():hi.expand(t)};var oi=hi;let ai=class t{clone(){return new t(this.tag,this.suite,this.keyParams,this.sessionParams)}plain(){return{tag:this.tag,suite:this.suite,keyParams:this.keyParams,sessionParams:this.sessionParams}}getSessionParams(){return this.sessionParams}getKeyParams(){return this.keyParams}getSuite(){return this.suite}getTag(){return this.tag}constructor(t,i,s,e){this.tag=t,this.suite=i,this.keyParams=s,this.sessionParams=e}};ai.expand=function(t){return"CryptoInfo"===t.constructor.name?t:new ai(t.tag,t.suite,t.keyParams,t.sessionParams)},ai.clone=function(t){return"CryptoInfo"===t.constructor.name?t.clone():ai.expand(t)};for(var ui=ai,ci={exports:{}},di={exports:{}},li={},fi={byteLength:function(t){var i=wi(t),s=i[0],e=i[1];return 3*(s+e)/4-e},toByteArray:function(t){var i,s,e=wi(t),n=e[0],r=e[1],h=new gi(function(t,i,s){return 3*(i+s)/4-s}(0,n,r)),o=0,a=r>0?n-4:n;for(s=0;s<a;s+=4)i=_i[t.charCodeAt(s)]<<18|_i[t.charCodeAt(s+1)]<<12|_i[t.charCodeAt(s+2)]<<6|_i[t.charCodeAt(s+3)],h[o++]=i>>16&255,h[o++]=i>>8&255,h[o++]=255&i;return 2===r&&(i=_i[t.charCodeAt(s)]<<2|_i[t.charCodeAt(s+1)]>>4,h[o++]=255&i),1===r&&(i=_i[t.charCodeAt(s)]<<10|_i[t.charCodeAt(s+1)]<<4|_i[t.charCodeAt(s+2)]>>2,h[o++]=i>>8&255,h[o++]=255&i),h},fromByteArray:function(t){for(var i,s=t.length,e=s%3,n=[],r=16383,h=0,o=s-e;h<o;h+=r)n.push(bi(t,h,h+r>o?o:h+r));return 1===e?(i=t[s-1],n.push(vi[i>>2]+vi[i<<4&63]+"==")):2===e&&(i=(t[s-2]<<8)+t[s-1],n.push(vi[i>>10]+vi[i>>4&63]+vi[i<<2&63]+"=")),n.join("")}},vi=[],_i=[],gi=typeof j<"u"?j:Array,mi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",pi=0;pi<64;++pi)vi[pi]=mi[pi],_i[mi.charCodeAt(pi)]=pi;function wi(t){var i=t.length;if(i%4>0)throw new m("Invalid string. Length must be a multiple of 4");var s=t.indexOf("=");return-1===s&&(s=i),[s,s===i?0:4-s%4]}function yi(t){return vi[t>>18&63]+vi[t>>12&63]+vi[t>>6&63]+vi[63&t]}function bi(t,i,s){for(var e,n=[],r=i;r<s;r+=3)e=(t[r]<<16&16711680)+(t[r+1]<<8&65280)+(255&t[r+2]),n.push(yi(e));return n.join("")}_i[45]=62,_i[95]=63;var Ai={read:function(t,i,s,e,n){var r,h,o=8*n-e-1,a=(1<<o)-1,u=a>>1,c=-7,d=s?n-1:0,l=s?-1:1,f=t[i+d];for(d+=l,r=f&(1<<-c)-1,f>>=-c,c+=o;c>0;r=256*r+t[i+d],d+=l,c-=8);for(h=r&(1<<-c)-1,r>>=-c,c+=e;c>0;h=256*h+t[i+d],d+=l,c-=8);if(0===r)r=1-u;else{if(r===a)return h?NaN:1/0*(f?-1:1);h+=_.pow(2,e),r-=u}return(f?-1:1)*h*_.pow(2,r-e)},write:function(t,i,s,e,n,r){var h,o,a,u=8*r-n-1,c=(1<<u)-1,d=c>>1,l=23===n?_.pow(2,-24)-_.pow(2,-77):0,f=e?0:r-1,v=e?1:-1,g=i<0||0===i&&1/i<0?1:0;for(i=_.abs(i),S(i)||i===1/0?(o=S(i)?1:0,h=c):(h=_.floor(_.log(i)/_.LN2),i*(a=_.pow(2,-h))<1&&(h--,a*=2),(i+=h+d>=1?l/a:l*_.pow(2,1-d))*a>=2&&(h++,a/=2),h+d>=c?(o=0,h=c):h+d>=1?(o=(i*a-1)*_.pow(2,n),h+=d):(o=i*_.pow(2,d-1)*_.pow(2,n),h=0));n>=8;t[s+f]=255&o,f+=v,o/=256,n-=8);for(h=h<<n|o,u+=n;u>0;t[s+f]=255&h,f+=v,h/=256,u-=8);t[s+f-v]|=128*g}};(function(t){const i=fi,s=Ai,e="function"==typeof td&&"function"==typeof f?f("nodejs.util.inspect.custom"):null;t.Buffer=h,t.SlowBuffer=function(t){return+t!=t&&(t=0),h.alloc(+t)},t.INSPECT_MAX_BYTES=50;const n=2147483647;function r(t){if(t>n)throw new RangeError('The value "'+t+'" is invalid for option "size"');const i=new j(t);return w.setPrototypeOf(i,h.prototype),i}function h(t,i,s){if("number"==typeof t){if("string"==typeof i)throw new g('The "string" argument must be of type string. Received type number');return u(t)}return o(t,i,s)}function o(t,i,s){if("string"==typeof t)return function(t,i){if(("string"!=typeof i||""===i)&&(i="utf8"),!h.isEncoding(i))throw new g("Unknown encoding: "+i);const s=0|v(t,i);let e=r(s);const n=e.write(t,i);return n!==s&&(e=e.slice(0,n)),e}(t,i);if(ArrayBuffer.isView(t))return function(t){if(tt(t,j)){const i=new j(t);return d(i.buffer,i.byteOffset,i.byteLength)}return c(t)}(t);if(null==t)throw new g("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(tt(t,ArrayBuffer)||t&&tt(t.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(tt(t,SharedArrayBuffer)||t&&tt(t.buffer,SharedArrayBuffer)))return d(t,i,s);if("number"==typeof t)throw new g('The "value" argument must not be of type number. Received type number');const e=t.valueOf&&t.valueOf();if(null!=e&&e!==t)return h.from(e,i,s);const n=function(t){if(h.isBuffer(t)){const i=0|l(t.length),s=r(i);return 0===s.length||t.copy(s,0,0,i),s}if(void 0!==t.length)return"number"!=typeof t.length||it(t.length)?r(0):c(t);if("Buffer"===t.type&&Array.isArray(t.data))return c(t.data)}(t);if(n)return n;if(typeof td<"u"&&null!=td.toPrimitive&&"function"==typeof t[td.toPrimitive])return h.from(t[td.toPrimitive]("string"),i,s);throw new g("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function a(t){if("number"!=typeof t)throw new g('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function u(t){return a(t),r(t<0?0:0|l(t))}function c(t){const i=t.length<0?0:0|l(t.length),s=r(i);for(let e=0;e<i;e+=1)s[e]=255&t[e];return s}function d(t,i,s){if(i<0||t.byteLength<i)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<i+(s||0))throw new RangeError('"length" is outside of buffer bounds');let e;return e=void 0===i&&void 0===s?new j(t):void 0===s?new j(t,i):new j(t,i,s),w.setPrototypeOf(e,h.prototype),e}function l(t){if(t>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return 0|t}function v(t,i){if(h.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||tt(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new g('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const s=t.length,e=arguments.length>2&&!0===arguments[2];if(!e&&0===s)return 0;let n=!1;for(;;)switch(i){case"ascii":case"latin1":case"binary":return s;case"utf8":case"utf-8":return Q(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*s;case"hex":return s>>>1;case"base64":return J(t).length;default:if(n)return e?-1:Q(t).length;i=(""+i).toLowerCase(),n=!0}}function p(t,i,s){let e=!1;if((void 0===i||i<0)&&(i=0),i>this.length||((void 0===s||s>this.length)&&(s=this.length),s<=0)||(s>>>=0)<=(i>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return B(this,i,s);case"utf8":case"utf-8":return P(this,i,s);case"ascii":return N(this,i,s);case"latin1":case"binary":return D(this,i,s);case"base64":return I(this,i,s);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,i,s);default:if(e)throw new g("Unknown encoding: "+t);t=(t+"").toLowerCase(),e=!0}}function y(t,i,s){const e=t[i];t[i]=t[s],t[s]=e}function b(t,i,s,e,n){if(0===t.length)return-1;if("string"==typeof s?(e=s,s=0):s>2147483647?s=2147483647:s<-2147483648&&(s=-2147483648),it(s=+s)&&(s=n?0:t.length-1),s<0&&(s=t.length+s),s>=t.length){if(n)return-1;s=t.length-1}else if(s<0){if(!n)return-1;s=0}if("string"==typeof i&&(i=h.from(i,e)),h.isBuffer(i))return 0===i.length?-1:A(t,i,s,e,n);if("number"==typeof i)return i&=255,"function"==typeof j.prototype.indexOf?n?j.prototype.indexOf.call(t,i,s):j.prototype.lastIndexOf.call(t,i,s):A(t,[i],s,e,n);throw new g("val must be string, number or Buffer")}function A(t,i,s,e,n){let r,h=1,o=t.length,a=i.length;if(void 0!==e&&("ucs2"===(e=String(e).toLowerCase())||"ucs-2"===e||"utf16le"===e||"utf-16le"===e)){if(t.length<2||i.length<2)return-1;h=2,o/=2,a/=2,s/=2}function u(t,i){return 1===h?t[i]:t.readUInt16BE(i*h)}if(n){let e=-1;for(r=s;r<o;r++)if(u(t,r)===u(i,-1===e?0:r-e)){if(-1===e&&(e=r),r-e+1===a)return e*h}else-1!==e&&(r-=r-e),e=-1}else for(s+a>o&&(s=o-a),r=s;r>=0;r--){let s=!0;for(let e=0;e<a;e++)if(u(t,r+e)!==u(i,e)){s=!1;break}if(s)return r}return-1}function S(t,i,s,e){s=Number(s)||0;const n=t.length-s;e?(e=Number(e))>n&&(e=n):e=n;const r=i.length;let h;for(e>r/2&&(e=r/2),h=0;h<e;++h){const e=x(i.substr(2*h,2),16);if(it(e))return h;t[s+h]=e}return h}function T(t,i,s,e){return $(Q(i,t.length-s),t,s,e)}function k(t,i,s,e){return $(function(t){const i=[];for(let s=0;s<t.length;++s)i.push(255&t.charCodeAt(s));return i}(i),t,s,e)}function E(t,i,s,e){return $(J(i),t,s,e)}function R(t,i,s,e){return $(function(t,i){let s,e,n;const r=[];for(let h=0;h<t.length&&!((i-=2)<0);++h)s=t.charCodeAt(h),e=s>>8,n=s%256,r.push(n),r.push(e);return r}(i,t.length-s),t,s,e)}function I(t,s,e){return 0===s&&e===t.length?i.fromByteArray(t):i.fromByteArray(t.slice(s,e))}function P(t,i,s){s=_.min(t.length,s);const e=[];let n=i;for(;n<s;){const i=t[n];let r=null,h=i>239?4:i>223?3:i>191?2:1;if(n+h<=s){let s,e,o,a;switch(h){case 1:i<128&&(r=i);break;case 2:s=t[n+1],128==(192&s)&&(a=(31&i)<<6|63&s,a>127&&(r=a));break;case 3:s=t[n+1],e=t[n+2],128==(192&s)&&128==(192&e)&&(a=(15&i)<<12|(63&s)<<6|63&e,a>2047&&(a<55296||a>57343)&&(r=a));break;case 4:s=t[n+1],e=t[n+2],o=t[n+3],128==(192&s)&&128==(192&e)&&128==(192&o)&&(a=(15&i)<<18|(63&s)<<12|(63&e)<<6|63&o,a>65535&&a<1114112&&(r=a))}}null===r?(r=65533,h=1):r>65535&&(r-=65536,e.push(r>>>10&1023|55296),r=56320|1023&r),e.push(r),n+=h}return function(t){const i=t.length;if(i<=C)return String.fromCharCode.apply(String,t);let s="",e=0;for(;e<i;)s+=String.fromCharCode.apply(String,t.slice(e,e+=C));return s}(e)}t.kMaxLength=n,h.TYPED_ARRAY_SUPPORT=function(){try{const t=new j(1),i={foo:function(){return 42}};return w.setPrototypeOf(i,j.prototype),w.setPrototypeOf(t,i),42===t.foo()}catch(t){return!1}}(),!h.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),w.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.buffer}}),w.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.byteOffset}}),h.poolSize=8192,h.from=function(t,i,s){return o(t,i,s)},w.setPrototypeOf(h.prototype,j.prototype),w.setPrototypeOf(h,j),h.alloc=function(t,i,s){return function(t,i,s){return a(t),t<=0?r(t):void 0!==i?"string"==typeof s?r(t).fill(i,s):r(t).fill(i):r(t)}(t,i,s)},h.allocUnsafe=function(t){return u(t)},h.allocUnsafeSlow=function(t){return u(t)},h.isBuffer=function(t){return null!=t&&!0===t.pv&&t!==h.prototype},h.compare=function(t,i){if(tt(t,j)&&(t=h.from(t,t.offset,t.byteLength)),tt(i,j)&&(i=h.from(i,i.offset,i.byteLength)),!h.isBuffer(t)||!h.isBuffer(i))throw new g('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===i)return 0;let s=t.length,e=i.length;for(let n=0,r=_.min(s,e);n<r;++n)if(t[n]!==i[n]){s=t[n],e=i[n];break}return s<e?-1:e<s?1:0},h.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(t,i){if(!Array.isArray(t))throw new g('"list" argument must be an Array of Buffers');if(0===t.length)return h.alloc(0);let s;if(void 0===i)for(i=0,s=0;s<t.length;++s)i+=t[s].length;const e=h.allocUnsafe(i);let n=0;for(s=0;s<t.length;++s){let i=t[s];if(tt(i,j))n+i.length>e.length?(h.isBuffer(i)||(i=h.from(i)),i.copy(e,n)):j.prototype.set.call(e,i,n);else{if(!h.isBuffer(i))throw new g('"list" argument must be an Array of Buffers');i.copy(e,n)}n+=i.length}return e},h.byteLength=v,h.prototype.pv=!0,h.prototype.swap16=function(){const t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let i=0;i<t;i+=2)y(this,i,i+1);return this},h.prototype.swap32=function(){const t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let i=0;i<t;i+=4)y(this,i,i+3),y(this,i+1,i+2);return this},h.prototype.swap64=function(){const t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let i=0;i<t;i+=8)y(this,i,i+7),y(this,i+1,i+6),y(this,i+2,i+5),y(this,i+3,i+4);return this},h.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?P(this,0,t):p.apply(this,arguments)},h.prototype.toLocaleString=h.prototype.toString,h.prototype.equals=function(t){if(!h.isBuffer(t))throw new g("Argument must be a Buffer");return this===t||0===h.compare(this,t)},h.prototype.inspect=function(){let i="";const s=t.INSPECT_MAX_BYTES;return i=this.toString("hex",0,s).replace(/(.{2})/g,"$1 ").trim(),this.length>s&&(i+=" ... "),"<Buffer "+i+">"},e&&(h.prototype[e]=h.prototype.inspect),h.prototype.compare=function(t,i,s,e,n){if(tt(t,j)&&(t=h.from(t,t.offset,t.byteLength)),!h.isBuffer(t))throw new g('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===i&&(i=0),void 0===s&&(s=t?t.length:0),void 0===e&&(e=0),void 0===n&&(n=this.length),i<0||s>t.length||e<0||n>this.length)throw new RangeError("out of range index");if(e>=n&&i>=s)return 0;if(e>=n)return-1;if(i>=s)return 1;if(this===t)return 0;let r=(n>>>=0)-(e>>>=0),o=(s>>>=0)-(i>>>=0);const a=_.min(r,o),u=this.slice(e,n),c=t.slice(i,s);for(let t=0;t<a;++t)if(u[t]!==c[t]){r=u[t],o=c[t];break}return r<o?-1:o<r?1:0},h.prototype.includes=function(t,i,s){return-1!==this.indexOf(t,i,s)},h.prototype.indexOf=function(t,i,s){return b(this,t,i,s,!0)},h.prototype.lastIndexOf=function(t,i,s){return b(this,t,i,s,!1)},h.prototype.write=function(t,i,s,e){if(void 0===i)e="utf8",s=this.length,i=0;else if(void 0===s&&"string"==typeof i)e=i,s=this.length,i=0;else{if(!isFinite(i))throw new m("Buffer.write(string, encoding, offset[, length]) is no longer supported");i>>>=0,isFinite(s)?(s>>>=0,void 0===e&&(e="utf8")):(e=s,s=void 0)}const n=this.length-i;if((void 0===s||s>n)&&(s=n),t.length>0&&(s<0||i<0)||i>this.length)throw new RangeError("Attempt to write outside buffer bounds");e||(e="utf8");let r=!1;for(;;)switch(e){case"hex":return S(this,t,i,s);case"utf8":case"utf-8":return T(this,t,i,s);case"ascii":case"latin1":case"binary":return k(this,t,i,s);case"base64":return E(this,t,i,s);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,t,i,s);default:if(r)throw new g("Unknown encoding: "+e);e=(""+e).toLowerCase(),r=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this.yv||this,0)}};const C=4096;function N(t,i,s){let e="";s=_.min(t.length,s);for(let n=i;n<s;++n)e+=String.fromCharCode(127&t[n]);return e}function D(t,i,s){let e="";s=_.min(t.length,s);for(let n=i;n<s;++n)e+=String.fromCharCode(t[n]);return e}function B(t,i,s){const e=t.length;(!i||i<0)&&(i=0),(!s||s<0||s>e)&&(s=e);let n="";for(let e=i;e<s;++e)n+=st[t[e]];return n}function M(t,i,s){const e=t.slice(i,s);let n="";for(let t=0;t<e.length-1;t+=2)n+=String.fromCharCode(e[t]+256*e[t+1]);return n}function L(t,i,s){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+i>s)throw new RangeError("Trying to access beyond buffer length")}function O(t,i,s,e,n,r){if(!h.isBuffer(t))throw new g('"buffer" argument must be a Buffer instance');if(i>n||i<r)throw new RangeError('"value" argument is out of bounds');if(s+e>t.length)throw new RangeError("Index out of range")}function F(t,i,s,e,n){z(i,e,n,t,s,7);let r=Number(i&BigInt(4294967295));t[s++]=r,r>>=8,t[s++]=r,r>>=8,t[s++]=r,r>>=8,t[s++]=r;let h=Number(i>>BigInt(32)&BigInt(4294967295));return t[s++]=h,h>>=8,t[s++]=h,h>>=8,t[s++]=h,h>>=8,t[s++]=h,s}function V(t,i,s,e,n){z(i,e,n,t,s,7);let r=Number(i&BigInt(4294967295));t[s+7]=r,r>>=8,t[s+6]=r,r>>=8,t[s+5]=r,r>>=8,t[s+4]=r;let h=Number(i>>BigInt(32)&BigInt(4294967295));return t[s+3]=h,h>>=8,t[s+2]=h,h>>=8,t[s+1]=h,h>>=8,t[s]=h,s+8}function W(t,i,s,e,n,r){if(s+e>t.length)throw new RangeError("Index out of range");if(s<0)throw new RangeError("Index out of range")}function U(t,i,e,n,r){return i=+i,e>>>=0,r||W(t,0,e,4),s.write(t,i,e,n,23,4),e+4}function G(t,i,e,n,r){return i=+i,e>>>=0,r||W(t,0,e,8),s.write(t,i,e,n,52,8),e+8}h.prototype.slice=function(t,i){const s=this.length;(t=~~t)<0?(t+=s)<0&&(t=0):t>s&&(t=s),(i=void 0===i?s:~~i)<0?(i+=s)<0&&(i=0):i>s&&(i=s),i<t&&(i=t);const e=this.subarray(t,i);return w.setPrototypeOf(e,h.prototype),e},h.prototype.readUintLE=h.prototype.readUIntLE=function(t,i,s){t>>>=0,i>>>=0,s||L(t,i,this.length);let e=this[t],n=1,r=0;for(;++r<i&&(n*=256);)e+=this[t+r]*n;return e},h.prototype.readUintBE=h.prototype.readUIntBE=function(t,i,s){t>>>=0,i>>>=0,s||L(t,i,this.length);let e=this[t+--i],n=1;for(;i>0&&(n*=256);)e+=this[t+--i]*n;return e},h.prototype.readUint8=h.prototype.readUInt8=function(t,i){return t>>>=0,i||L(t,1,this.length),this[t]},h.prototype.readUint16LE=h.prototype.readUInt16LE=function(t,i){return t>>>=0,i||L(t,2,this.length),this[t]|this[t+1]<<8},h.prototype.readUint16BE=h.prototype.readUInt16BE=function(t,i){return t>>>=0,i||L(t,2,this.length),this[t]<<8|this[t+1]},h.prototype.readUint32LE=h.prototype.readUInt32LE=function(t,i){return t>>>=0,i||L(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},h.prototype.readUint32BE=h.prototype.readUInt32BE=function(t,i){return t>>>=0,i||L(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},h.prototype.readBigUInt64LE=et(function(t){Y(t>>>=0,"offset");const i=this[t],s=this[t+7];(void 0===i||void 0===s)&&K(t,this.length-8);const e=i+256*this[++t]+65536*this[++t]+this[++t]*2**24,n=this[++t]+256*this[++t]+65536*this[++t]+s*2**24;return BigInt(e)+(BigInt(n)<<BigInt(32))}),h.prototype.readBigUInt64BE=et(function(t){Y(t>>>=0,"offset");const i=this[t],s=this[t+7];(void 0===i||void 0===s)&&K(t,this.length-8);const e=i*2**24+65536*this[++t]+256*this[++t]+this[++t],n=this[++t]*2**24+65536*this[++t]+256*this[++t]+s;return(BigInt(e)<<BigInt(32))+BigInt(n)}),h.prototype.readIntLE=function(t,i,s){t>>>=0,i>>>=0,s||L(t,i,this.length);let e=this[t],n=1,r=0;for(;++r<i&&(n*=256);)e+=this[t+r]*n;return n*=128,e>=n&&(e-=_.pow(2,8*i)),e},h.prototype.readIntBE=function(t,i,s){t>>>=0,i>>>=0,s||L(t,i,this.length);let e=i,n=1,r=this[t+--e];for(;e>0&&(n*=256);)r+=this[t+--e]*n;return n*=128,r>=n&&(r-=_.pow(2,8*i)),r},h.prototype.readInt8=function(t,i){return t>>>=0,i||L(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},h.prototype.readInt16LE=function(t,i){t>>>=0,i||L(t,2,this.length);const s=this[t]|this[t+1]<<8;return 32768&s?4294901760|s:s},h.prototype.readInt16BE=function(t,i){t>>>=0,i||L(t,2,this.length);const s=this[t+1]|this[t]<<8;return 32768&s?4294901760|s:s},h.prototype.readInt32LE=function(t,i){return t>>>=0,i||L(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},h.prototype.readInt32BE=function(t,i){return t>>>=0,i||L(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},h.prototype.readBigInt64LE=et(function(t){Y(t>>>=0,"offset");const i=this[t],s=this[t+7];(void 0===i||void 0===s)&&K(t,this.length-8);const e=this[t+4]+256*this[t+5]+65536*this[t+6]+(s<<24);return(BigInt(e)<<BigInt(32))+BigInt(i+256*this[++t]+65536*this[++t]+this[++t]*2**24)}),h.prototype.readBigInt64BE=et(function(t){Y(t>>>=0,"offset");const i=this[t],s=this[t+7];(void 0===i||void 0===s)&&K(t,this.length-8);const e=(i<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(e)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+s)}),h.prototype.readFloatLE=function(t,i){return t>>>=0,i||L(t,4,this.length),s.read(this,t,!0,23,4)},h.prototype.readFloatBE=function(t,i){return t>>>=0,i||L(t,4,this.length),s.read(this,t,!1,23,4)},h.prototype.readDoubleLE=function(t,i){return t>>>=0,i||L(t,8,this.length),s.read(this,t,!0,52,8)},h.prototype.readDoubleBE=function(t,i){return t>>>=0,i||L(t,8,this.length),s.read(this,t,!1,52,8)},h.prototype.writeUintLE=h.prototype.writeUIntLE=function(t,i,s,e){if(t=+t,i>>>=0,s>>>=0,!e){O(this,t,i,s,_.pow(2,8*s)-1,0)}let n=1,r=0;for(this[i]=255&t;++r<s&&(n*=256);)this[i+r]=t/n&255;return i+s},h.prototype.writeUintBE=h.prototype.writeUIntBE=function(t,i,s,e){if(t=+t,i>>>=0,s>>>=0,!e){O(this,t,i,s,_.pow(2,8*s)-1,0)}let n=s-1,r=1;for(this[i+n]=255&t;--n>=0&&(r*=256);)this[i+n]=t/r&255;return i+s},h.prototype.writeUint8=h.prototype.writeUInt8=function(t,i,s){return t=+t,i>>>=0,s||O(this,t,i,1,255,0),this[i]=255&t,i+1},h.prototype.writeUint16LE=h.prototype.writeUInt16LE=function(t,i,s){return t=+t,i>>>=0,s||O(this,t,i,2,65535,0),this[i]=255&t,this[i+1]=t>>>8,i+2},h.prototype.writeUint16BE=h.prototype.writeUInt16BE=function(t,i,s){return t=+t,i>>>=0,s||O(this,t,i,2,65535,0),this[i]=t>>>8,this[i+1]=255&t,i+2},h.prototype.writeUint32LE=h.prototype.writeUInt32LE=function(t,i,s){return t=+t,i>>>=0,s||O(this,t,i,4,4294967295,0),this[i+3]=t>>>24,this[i+2]=t>>>16,this[i+1]=t>>>8,this[i]=255&t,i+4},h.prototype.writeUint32BE=h.prototype.writeUInt32BE=function(t,i,s){return t=+t,i>>>=0,s||O(this,t,i,4,4294967295,0),this[i]=t>>>24,this[i+1]=t>>>16,this[i+2]=t>>>8,this[i+3]=255&t,i+4},h.prototype.writeBigUInt64LE=et(function(t,i){return void 0===i&&(i=0),F(this,t,i,BigInt(0),BigInt("0xffffffffffffffff"))}),h.prototype.writeBigUInt64BE=et(function(t,i){return void 0===i&&(i=0),V(this,t,i,BigInt(0),BigInt("0xffffffffffffffff"))}),h.prototype.writeIntLE=function(t,i,s,e){if(t=+t,i>>>=0,!e){const e=_.pow(2,8*s-1);O(this,t,i,s,e-1,-e)}let n=0,r=1,h=0;for(this[i]=255&t;++n<s&&(r*=256);)t<0&&0===h&&0!==this[i+n-1]&&(h=1),this[i+n]=(t/r|0)-h&255;return i+s},h.prototype.writeIntBE=function(t,i,s,e){if(t=+t,i>>>=0,!e){const e=_.pow(2,8*s-1);O(this,t,i,s,e-1,-e)}let n=s-1,r=1,h=0;for(this[i+n]=255&t;--n>=0&&(r*=256);)t<0&&0===h&&0!==this[i+n+1]&&(h=1),this[i+n]=(t/r|0)-h&255;return i+s},h.prototype.writeInt8=function(t,i,s){return t=+t,i>>>=0,s||O(this,t,i,1,127,-128),t<0&&(t=255+t+1),this[i]=255&t,i+1},h.prototype.writeInt16LE=function(t,i,s){return t=+t,i>>>=0,s||O(this,t,i,2,32767,-32768),this[i]=255&t,this[i+1]=t>>>8,i+2},h.prototype.writeInt16BE=function(t,i,s){return t=+t,i>>>=0,s||O(this,t,i,2,32767,-32768),this[i]=t>>>8,this[i+1]=255&t,i+2},h.prototype.writeInt32LE=function(t,i,s){return t=+t,i>>>=0,s||O(this,t,i,4,2147483647,-2147483648),this[i]=255&t,this[i+1]=t>>>8,this[i+2]=t>>>16,this[i+3]=t>>>24,i+4},h.prototype.writeInt32BE=function(t,i,s){return t=+t,i>>>=0,s||O(this,t,i,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[i]=t>>>24,this[i+1]=t>>>16,this[i+2]=t>>>8,this[i+3]=255&t,i+4},h.prototype.writeBigInt64LE=et(function(t,i){return void 0===i&&(i=0),F(this,t,i,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),h.prototype.writeBigInt64BE=et(function(t,i){return void 0===i&&(i=0),V(this,t,i,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),h.prototype.writeFloatLE=function(t,i,s){return U(this,t,i,!0,s)},h.prototype.writeFloatBE=function(t,i,s){return U(this,t,i,!1,s)},h.prototype.writeDoubleLE=function(t,i,s){return G(this,t,i,!0,s)},h.prototype.writeDoubleBE=function(t,i,s){return G(this,t,i,!1,s)},h.prototype.copy=function(t,i,s,e){if(!h.isBuffer(t))throw new g("argument should be a Buffer");if(s||(s=0),!e&&0!==e&&(e=this.length),i>=t.length&&(i=t.length),i||(i=0),e>0&&e<s&&(e=s),e===s||0===t.length||0===this.length)return 0;if(i<0)throw new RangeError("targetStart out of bounds");if(s<0||s>=this.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("sourceEnd out of bounds");e>this.length&&(e=this.length),t.length-i<e-s&&(e=t.length-i+s);const n=e-s;return this===t&&"function"==typeof j.prototype.copyWithin?this.copyWithin(i,s,e):j.prototype.set.call(t,this.subarray(s,e),i),n},h.prototype.fill=function(t,i,s,e){if("string"==typeof t){if("string"==typeof i?(e=i,i=0,s=this.length):"string"==typeof s&&(e=s,s=this.length),void 0!==e&&"string"!=typeof e)throw new g("encoding must be a string");if("string"==typeof e&&!h.isEncoding(e))throw new g("Unknown encoding: "+e);if(1===t.length){const i=t.charCodeAt(0);("utf8"===e&&i<128||"latin1"===e)&&(t=i)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(i<0||this.length<i||this.length<s)throw new RangeError("Out of range index");if(s<=i)return this;let n;if(i>>>=0,s=void 0===s?this.length:s>>>0,t||(t=0),"number"==typeof t)for(n=i;n<s;++n)this[n]=t;else{const r=h.isBuffer(t)?t:h.from(t,e),o=r.length;if(0===o)throw new g('The value "'+t+'" is invalid for argument "value"');for(n=0;n<s-i;++n)this[n+i]=r[n%o]}return this};const X={};function Z(t,i,s){X[t]=class extends s{get code(){return t}set code(t){w.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return"".concat(this.name," [").concat(t,"]: ").concat(this.message)}constructor(){super(),w.defineProperty(this,"message",{value:i.apply(this,arguments),writable:!0,configurable:!0}),this.name="".concat(this.name," [").concat(t,"]"),this.stack,delete this.name}}}function H(t){let i="",s=t.length;const e="-"===t[0]?1:0;for(;s>=e+4;s-=3)i="_".concat(t.slice(s-3,s)).concat(i);return"".concat(t.slice(0,s)).concat(i)}function z(t,i,s,e,n,r){if(t>s||t<i){const s="bigint"==typeof i?"n":"";let e;throw e=0===i||i===BigInt(0)?">= 0".concat(s," and < 2").concat(s," ** ").concat(8*(r+1)).concat(s):">= -(2".concat(s," ** ").concat(8*(r+1)-1).concat(s,") and < 2 ** ")+"".concat(8*(r+1)-1).concat(s),new X.ERR_OUT_OF_RANGE("value",e,t)}!function(t,i,s){Y(i,"offset"),(void 0===t[i]||void 0===t[i+s])&&K(i,t.length-(s+1))}(e,n,r)}function Y(t,i){if("number"!=typeof t)throw new X.ERR_INVALID_ARG_TYPE(i,"number",t)}function K(t,i,s){throw _.floor(t)!==t?(Y(t,s),new X.ERR_OUT_OF_RANGE("offset","an integer",t)):i<0?new X.ERR_BUFFER_OUT_OF_BOUNDS:new X.ERR_OUT_OF_RANGE("offset",">= 0 and <= ".concat(i),t)}Z("ERR_BUFFER_OUT_OF_BOUNDS",function(t){return t?"".concat(t," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),Z("ERR_INVALID_ARG_TYPE",function(t,i){return'The "'.concat(t,'" argument must be of type number. Received type ').concat(typeof i)},g),Z("ERR_OUT_OF_RANGE",function(t,i,s){let e='The value of "'.concat(t,'" is out of range.'),n=s;return Number.isInteger(s)&&_.abs(s)>2**32?n=H(String(s)):"bigint"==typeof s&&(n=String(s),(s>BigInt(2)**BigInt(32)||s<-(BigInt(2)**BigInt(32)))&&(n=H(n)),n+="n"),e+=" It must be ".concat(i,". Received ").concat(n),e},RangeError);const q=/[^+/0-9A-Za-z-_]/g;function Q(t,i){let s;i=i||1/0;const e=t.length;let n=null;const r=[];for(let h=0;h<e;++h){if(s=t.charCodeAt(h),s>55295&&s<57344){if(!n){if(s>56319){(i-=3)>-1&&r.push(239,191,189);continue}if(h+1===e){(i-=3)>-1&&r.push(239,191,189);continue}n=s;continue}if(s<56320){(i-=3)>-1&&r.push(239,191,189),n=s;continue}s=65536+(n-55296<<10|s-56320)}else n&&(i-=3)>-1&&r.push(239,191,189);if(n=null,s<128){if((i-=1)<0)break;r.push(s)}else if(s<2048){if((i-=2)<0)break;r.push(s>>6|192,63&s|128)}else if(s<65536){if((i-=3)<0)break;r.push(s>>12|224,s>>6&63|128,63&s|128)}else{if(!(s<1114112))throw new m("Invalid code point");if((i-=4)<0)break;r.push(s>>18|240,s>>12&63|128,s>>6&63|128,63&s|128)}}return r}function J(t){return i.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(q,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function $(t,i,s,e){let n;for(n=0;n<e&&!(n+s>=i.length||n>=t.length);++n)i[n+s]=t[n];return n}function tt(t,i){return t instanceof i||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===i.name}function it(t){return t!=t}const st=function(){const t="0123456789abcdef",i=new Array(256);for(let s=0;s<16;++s){const e=16*s;for(let n=0;n<16;++n)i[e+n]=t[s]+t[n]}return i}();function et(t){return typeof BigInt>"u"?nt:t}function nt(){throw new m("BigInt not supported")}})(li),function(t,i){var s=li,e=s.Buffer;function n(t,i){for(var s in t)i[s]=t[s]}function r(t,i,s){return e(t,i,s)}e.from&&e.alloc&&e.allocUnsafe&&e.allocUnsafeSlow?t.exports=s:(n(s,i),i.Buffer=r),r.prototype=w.create(e.prototype),n(e,r),r.from=function(t,i,s){if("number"==typeof t)throw new g("Argument must not be a number");return e(t,i,s)},r.alloc=function(t,i,s){if("number"!=typeof t)throw new g("Argument must be a number");var n=e(t);return void 0!==i?"string"==typeof s?n.fill(i,s):n.fill(i):n.fill(0),n},r.allocUnsafe=function(t){if("number"!=typeof t)throw new g("Argument must be a number");return e(t)},r.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new g("Argument must be a number");return s.SlowBuffer(t)}}(di,di.exports);var Si=65536;var Ti=di.exports.Buffer,ki=A.crypto||A.msCrypto;ki&&ki.getRandomValues?ci.exports=function(t,i){if(t>4294967295)throw new RangeError("requested too many random bytes");var s=Ti.allocUnsafe(t);if(t>0)if(t>Si)for(var e=0;e<t;e+=Si)ki.getRandomValues(s.slice(e,e+Si));else ki.getRandomValues(s);return"function"==typeof i?process.nextTick(function(){i(null,s)}):s}:ci.exports=function(){throw new m("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")};const Ei=ci.exports;let Ri=class t{clone(){const i=new t(this.ufrag,this.pwd);return i.setLite(this.lite),i.setEndOfCandidates(this.endOfCandidates),i}plain(){const t={ufrag:this.ufrag,pwd:this.pwd};return this.lite&&(t.lite=this.lite),this.endOfCandidates&&(t.endOfCandidates=this.endOfCandidates),t}getUfrag(){return this.ufrag}getPwd(){return this.pwd}isLite(){return this.lite}setLite(t){this.lite=t}isEndOfCandidates(){return this.endOfCandidates}setEndOfCandidates(t){this.endOfCandidates=t}constructor(t,i){this.ufrag=t,this.pwd=i,this.lite=!1,this.endOfCandidates=!1}};Ri.generate=function(t){const i=new Ri,s=Ei(8),e=Ei(24);return i.ufrag=s.toString("hex"),i.pwd=e.toString("hex"),i.lite=t,i},Ri.expand=function(t){if("ICEInfo"===t.constructor.name)return t;const i=new Ri(t.ufrag,t.pwd);return i.setLite(t.lite),i.setEndOfCandidates(t.endOfCandidates),i},Ri.clone=function(t){return"ICEInfo"===t.constructor.name?t.clone():Ri.expand(t)};var xi=Ri;const Ii=si("SEND","RECV");Ii.byValue=function(t){return Ii[t.toUpperCase()]},Ii.toString=function(t){switch(t){case Ii.SEND:return"send";case Ii.RECV:return"recv"}},Ii.reverse=function(t){switch(t){case Ii.SEND:return Ii.RECV;case Ii.RECV:return Ii.SEND}};var Pi=Ii;const Ci=Pi;let Ni=class t{clone(){var i=new t(this.id,this.direction);return i.setFormats(this.formats),i.setParams(this.params),i}plain(){var t={id:this.id,direction:Ci.toString(this.direction)};for(var[i,s]of(this.formats&&(t.formats=this.formats),this.params.entries()))t.params||(t.params={}),t.params[i]=s;return t}getId(){return this.id}getDirection(){return this.direction}setDirection(t){this.direction=t}getFormats(){return this.formats}setFormats(t){this.formats=[];for(let i=0;i<t.length;++i)this.formats.push(x(t[i]))}getParams(){return this.params}setParams(t){this.params=new Map(t)}addParam(t,i){this.params.set(t,i)}constructor(t,i){this.id=t,this.direction=i,this.formats=[],this.params=new Map}};Ni.expand=function(t){if("RIDInfo"===t.constructor.name)return t;const i=new Ni(t.id,Ci.byValue(t.direction));for(const[s,e]of w.entries(t.params||{}))i.addParam(s,e);return t.formats&&i.setFormats(t.formats),i},Ni.clone=function(t){return"RIDInfo"===t.constructor.name?t.clone():Ni.expand(t)};var Di=Ni;let Bi=class t{clone(){return new t(this.id,this.paused)}plain(){return{id:this.id,paused:this.paused}}isPaused(){return this.paused}getId(){return this.id}constructor(t,i){this.paused=i,this.id=t}};Bi.expand=function(t){return"SimulcastStreamInfo"===t.constructor.name?t:new Bi(t.id,t.paused)},Bi.clone=function(t){return"SimulcastStreamInfo"===t.constructor.name?t.clone():Bi.expand(t)};var Mi=Bi;const Li=Mi,Oi=Pi;let Fi=class t{clone(){const i=new t;for(const t of this.send)i.addSimulcastAlternativeStreams(Oi.SEND,t.map(t=>t.clone()));for(const t of this.recv)i.addSimulcastAlternativeStreams(Oi.RECV,t.map(t=>t.clone()));return i}plain(){const t={send:[],recv:[]};for(const i of this.send)t.send.push(i.map(t=>t.plain()));for(const i of this.recv)t.recv.push(i.map(t=>t.plain()));return t}addSimulcastAlternativeStreams(t,i){return t===Oi.SEND?this.send.push(i):this.recv.push(i)}addSimulcastStream(t,i){return t===Oi.SEND?this.send.push([i]):this.recv.push([i])}getSimulcastStreams(t){return t===Oi.SEND?this.send:this.recv}constructor(){this.send=[],this.recv=[]}};Fi.expand=function(t){if("SimulcastInfo"===t.constructor.name)return t;const i=new Fi;for(const s of t.send||[])i.addSimulcastAlternativeStreams(Oi.SEND,s.map(Li.expand));for(const s of t.recv||[])i.addSimulcastAlternativeStreams(Oi.RECV,s.map(Li.expand));return i},Fi.clone=function(t){return"SimulcastInfo"===t.constructor.name?t.clone():Fi.expand(t)};var Vi=Fi;const Wi=si("SENDRECV","SENDONLY","RECVONLY","INACTIVE");Wi.byValue=function(t){return Wi[t.toUpperCase()]},Wi.toString=function(t){switch(t){case Wi.SENDRECV:return"sendrecv";case Wi.SENDONLY:return"sendonly";case Wi.RECVONLY:return"recvonly";case Wi.INACTIVE:return"inactive"}},Wi.reverse=function(t){switch(t){case Wi.SENDRECV:return Wi.SENDRECV;case Wi.SENDONLY:return Wi.RECVONLY;case Wi.RECVONLY:return Wi.SENDONLY;case Wi.INACTIVE:return Wi.INACTIVE}};var Ui=Wi;let Gi=class t{clone(){return new t(this.port,this.maxMessageSize)}plain(){return{port:this.port,maxMessageSize:this.maxMessageSize}}getPort(){return this.port}getMaxMessageSize(){return this.maxMessageSize}constructor(t,i){this.port=t,this.maxMessageSize=i}};Gi.expand=function(t){return"DataChannelInfo"===t.constructor.name?t:new Gi(t.port,t.maxMessageSize)},Gi.clone=function(t){return"DataChannelInfo"===t.constructor.name?t.clone():Gi.expand(t)};var Xi=Gi;const Zi=ii,Hi=Di,zi=Vi,Yi=Ui,Ki=Pi,qi=Xi;let ji=class t{clone(){const i=new t(this.id,this.type);i.setDirection(this.direction),i.setBitrate(this.bitrate);for(const t of this.codecs.values())i.addCodec(t.clone());for(const[t,s]of this.extensions.entries())i.addExtension(t,s);for(const t of this.rids.values())i.addRID(t.clone());return this.simulcast&&i.setSimulcast(this.simulcast.clone()),this.control&&i.setControl(this.control),this.dataChannel&&i.setDataChannel(this.dataChannel.clone()),i}plain(){const t={id:this.id,type:this.type,direction:Yi.toString(this.direction),codecs:[]};this.dataChannel&&(t.dataChannel=this.dataChannel.plain()),this.bitrate&&(t.bitrate=this.bitrate);for(const i of this.codecs.values())t.codecs.push(i.plain());for(const[i,s]of this.extensions.entries())t.extensions||(t.extensions={}),t.extensions[i]=s;for(const i of this.rids.values())t.rids||(t.rids=[]),t.rids.push(i.plain());return this.simulcast&&(t.simulcast=this.simulcast.plain()),this.control&&(t.control=this.control),t}getType(){return this.type}getId(){return this.id}setId(t){this.id=t}addExtension(t,i){this.extensions.set(t,i)}addRID(t){this.rids.set(t.getId(),t)}addCodec(t){this.codecs.set(t.getType(),t)}setCodecs(t){this.codecs=t}getCodecForType(t){return this.codecs.get(t)}getCodec(t){for(const i of this.codecs.values())if(i.getCodec().toLowerCase()===t.toLowerCase())return i;return null}hasCodec(t){return null!==this.getCodec(t)}getCodecs(){return this.codecs}hasRTX(){for(const t of this.codecs.values())if(t.hasRTX())return!0;return!1}getExtensions(){return this.extensions}getRIDs(){return this.rids}getRID(t){return this.rids.get(t)}getBitrate(){return this.bitrate}setBitrate(t){this.bitrate=t}getDirection(){return this.direction}setDirection(t){this.direction=t}hasControl(){return!!this.control}getControl(){return this.control}setControl(t){this.control=t}hasDataChannel(){return!!this.dataChannel}getDataChannel(){return this.dataChannel}setDataChannel(t){this.dataChannel=t}answer(i){const s=new t(this.id,this.type);if(i){s.setDirection(Yi.reverse(this.direction));const{codecs:t,dataChannel:e}=i;if(t){let e;e=Array.isArray(t)?Zi.MapFromNames(t,i.rtx,i.rtcpfbs):t;for(let t of this.codecs.values())for(let i of e.values()){if(i.getCodec().toLowerCase()!==t.getCodec().toLowerCase()||"h264"===i.getCodec()&&i.hasParam("packetization-mode")&&i.getParam("packetization-mode")!=t.getParam("packetization-mode","0")||"h264"===i.getCodec()&&i.hasParam("profile-level-id")&&t.hasParam("profile-level-id")&&i.getParam("profile-level-id")!=t.getParam("profile-level-id")||"multiopus"===i.getCodec()&&i.hasParam("num_streams")&&t.hasParam("num_streams")&&i.getParam("num_streams")!=t.getParam("num_streams"))continue;const e=i.clone();e.setType(t.getType()),e.hasRTX()&&e.setRTX(t.getRTX()),t.hasChannels()&&e.setChannels(t.getChannels()),e.addParams(t.getParams()),s.addCodec(e);break}}const n=new Set(i.extensions);for(let[t,i]of this.extensions)n.has(i)&&s.addExtension(t,i);if(i.simulcast&&this.simulcast){const t=new zi,i=this.simulcast.getSimulcastStreams(Ki.SEND);if(i)for(const s of i){const i=s.map(t=>t.clone());t.addSimulcastAlternativeStreams(Ki.RECV,i)}const e=this.simulcast.getSimulcastStreams(Ki.RECV);if(e)for(const i of e){const s=i.map(t=>t.clone());t.addSimulcastAlternativeStreams(Ki.SEND,s)}for(const t of this.rids.values()){const i=t.clone();i.setDirection(Ki.reverse(t.getDirection())),s.addRID(i)}s.setSimulcast(t)}if(e&&this.dataChannel){const t=new qi(this.dataChannel.getPort(),e.maxMessageSize?e.maxMessageSize:this.dataChannel.getMaxMessageSize());s.setDataChannel(t)}}else s.setDirection(Yi.INACTIVE);return s}getSimulcast(){return this.simulcast}setSimulcast(t){this.simulcast=t}constructor(t,i){this.id=t,this.type=i,this.direction=Yi.SENDRECV,this.extensions=new Map,this.codecs=new Map,this.rids=new Map,this.simulcast=null,this.bitrate=0,this.control=null,this.dataChannel=null}};function Qi(t){const i=t.toString();if(!/^\d+$/.test(i))throw new m("invalid integer ".concat(i));return x(i)}ji.create=function(t,i,s){!s&&"string"!=typeof i&&(s=i,i=t);const e=new ji(t,i);if(s){const{codecs:t}=s;t&&(Array.isArray(t)?e.setCodecs(Zi.MapFromNames(t,s.rtx,s.rtcpfbs)):e.setCodecs(t))}else e.setDirection(Yi.INACTIVE);return e},ji.expand=function(t){if("MediaInfo"===t.constructor.name)return t;const i=new ji(t.id,t.type);if(t.direction&&i.setDirection(Yi.byValue(t.direction)),i.setBitrate(t.bitrate),t.dataChannel){const s=qi.expand(t.dataChannel);s&&i.setDataChannel(s)}for(const[s,e]of w.entries(t.extensions))i.addExtension(Qi(s),e);for(const s of t.codecs){const t=Zi.expand(s);t&&i.addCodec(t)}for(const s of t.rids||[]){const t=Hi.expand(s);i.addRID(t)}return t.simulcast&&i.setSimulcast(zi.expand(t.simulcast)),t.control&&i.setControl(t.control),i},ji.clone=function(t){return"MediaInfo"===t.constructor.name?t.clone():ji.expand(t)};var Ji=ji;let $i=class t{clone(){return new t(this.semantics,this.ssrcs)}plain(){const t={semantics:this.semantics,ssrcs:[]};for(let i=0;i<this.ssrcs.length;++i)t.ssrcs.push(this.ssrcs[i]);return t}getSemantics(){return this.semantics}getSSRCs(){return this.ssrcs}constructor(t,i){this.semantics=t,this.ssrcs=[];for(let t=0;t<i.length;++t)this.ssrcs.push(x(i[t]))}};$i.expand=function(t){return"SourceGroupInfo"===t.constructor.name?t:new $i(t.semantics,t.ssrcs)},$i.clone=function(t){return"SourceGroupInfo"===t.constructor.name?t.clone():$i.expand(t)};var ts=$i;let is=class t{clone(){const i=new t(this.ssrc);return i.setCName(this.cname),i.setStreamId(this.streamId),i.setTrackId(this.trackId),i}plain(){const t={ssrc:this.ssrc};return this.cname&&(t.cname=this.cname),this.streamId&&(t.streamId=this.streamId),this.trackId&&(t.trackId=this.trackId),t}getCName(){return this.cname}setCName(t){this.cname=t}getStreamId(){return this.streamId}setStreamId(t){this.streamId=t}getTrackId(){return this.trackId}setTrackId(t){this.trackId=t}getSSRC(){return this.ssrc}constructor(t){this.ssrc=t}};is.expand=function(t){if("SourceInfo"===t.constructor.name)return t;const i=new is(t.ssrc);return i.setCName(t.cname),i.setStreamId(t.streamId),i.setTrackId(t.trackId),i},is.clone=function(t){return"SourceInfo"===t.constructor.name?t.clone():is.expand(t)};var ss=is;const es=ii;let ns=class t{clone(){var i=new t(this.id,this.paused);for(let t of this.codecs.values())i.addCodec(t.clone());return i.setParams(this.params),i}plain(){var t={id:this.id,paused:this.paused,codecs:{},params:{}};for(var[i,s]of this.codecs.entries())t.codecs[i]=s.plain();for(var[i,e]of this.params.entries())t.params[i]=e;return t}getId(){return this.id}getCodecs(){return this.codecs}addCodec(t){this.codecs.set(t.getType(),t)}getParams(){return this.params}setParams(t){this.params=new Map(t)}addParam(t,i){this.params.set(t,i)}isPaused(){return this.paused}constructor(t,i=!1){this.id=t,this.paused=i,this.codecs=new Map,this.params=new Map}};ns.expand=function(t){if("TrackEncodingInfo"===t.constructor.name)return t;const i=new ns(t.id,t.paused);for(const s of w.values(t.codecs||{}))i.addCodec(es.expand(s));for(const[s,e]of w.entries(t.params||{}))i.addParam(s,e);return i},ns.clone=function(t){return"TrackEncodingInfo"===t.constructor.name?t.clone():ns.expand(t)};var rs=ns;const hs=ts,os=rs;let as=class t{clone(){const i=new t(this.media,this.id);this.mediaId&&i.setMediaId(this.mediaId);for(let t=0;t<this.ssrcs.length;++t)i.addSSRC(this.ssrcs[t]);for(let t=0;t<this.groups.length;++t)i.addSourceGroup(this.groups[t].clone());for(let t=0;t<this.encodings.length;++t){const s=[];for(let i=0;i<this.encodings[t].length;++i)s.push(this.encodings[t][i].clone());i.addAlternativeEncodings(s)}return i}plain(){const t={media:this.media,id:this.id,ssrcs:[]};this.mediaId&&(t.mediaId=this.mediaId);for(let i=0;i<this.ssrcs.length;++i)t.ssrcs.push(this.ssrcs[i]);for(let i=0;i<this.groups.length;++i)t.groups||(t.groups=[]),t.groups.push(this.groups[i].plain());for(let i=0;i<this.encodings.length;++i){const s=[];for(let t=0;t<this.encodings[i].length;++t)s.push(this.encodings[i][t].plain());s.length&&(t.encodings||(t.encodings=[]),t.encodings.push(s))}return t}getMedia(){return this.media}setMediaId(t){this.mediaId=t}getMediaId(){return this.mediaId}getId(){return this.id}addSSRC(t){this.ssrcs.push(t)}getSSRCs(){return this.ssrcs}addSourceGroup(t){this.groups.push(t)}getSourceGroup(t){for(const i of this.groups)if(i.getSemantics().toLowerCase()===t.toLowerCase())return i;return null}getSourceGroups(){return this.groups}getSourceGroupsForMediaSSRC(t){return this.groups.filter(i=>i.getSSRCs()[0]===t)}hasSourceGroup(t){for(const i of this.groups)if(i.getSemantics().toLowerCase()===t.toLowerCase())return!0;return!1}getEncodings(){return this.encodings}addEncoding(t){this.encodings.push([t])}addAlternativeEncodings(t){this.encodings.push(t)}setEncodings(t){this.encodings=t}getEncodingSources(){const t=[];if(this.encodings.length)for(const i of this.encodings)for(const s of i){const i={id:s.getId(),rid:s.getId()},e=s.getParams(),n=null==e?void 0:e.get("ssrc");if(void 0!==n){i.media=x(n);for(const t of this.getSourceGroupsForMediaSSRC(i.media))switch(t.getSemantics()){case"FID":i.rtx=t.getSSRCs()[1];break;case"FEC-FR":i.fec=t.getSSRCs()[1]}}t.push(i)}else if(this.hasSourceGroup("SIM")){const i=this.getSourceGroup("SIM").getSSRCs();this.getSourceGroups();for(const s of i){const i={id:String(s),media:s};for(const t of this.getSourceGroupsForMediaSSRC(i.media))switch(t.getSemantics()){case"FID":i.rtx=t.getSSRCs()[1];break;case"FEC-FR":i.fec=t.getSSRCs()[1]}t.push(i)}}else{const i={id:""};if(this.ssrcs.length){i.media=this.ssrcs[0];for(const t of this.getSourceGroupsForMediaSSRC(i.media))switch(t.getSemantics()){case"FID":i.rtx=t.getSSRCs()[1];break;case"FEC-FR":i.fec=t.getSSRCs()[1]}}t.push(i)}return t}constructor(t,i){this.media=t,this.id=i,this.ssrcs=[],this.groups=[],this.encodings=[]}};as.expand=function(t){var i,s;if("TrackInfo"===t.constructor.name)return t;const e=new as(t.media,t.id);if(t.mediaId&&e.setMediaId(t.mediaId),Array.isArray(t.ssrcs))for(const i of t.ssrcs)e.addSSRC(i);else if(void 0!==(null===(i=t.ssrcs)||void 0===i?void 0:i.media)){const i=t.ssrcs.media;if(e.addSSRC(i),void 0!==t.ssrcs.rtx){const s=t.ssrcs.rtx;e.addSSRC(s),e.addSourceGroup(new hs("FID",[i,s]))}if(void 0!==t.ssrcs.fec){const s=t.ssrcs.fec;e.addSSRC(s),e.addSourceGroup(new hs("FEC-FR",[i,s]))}}if(t.rid){const i=new os(t.rid);void 0!==(null===(s=t.ssrcs)||void 0===s?void 0:s.media)&&i.addParam("ssrc",t.ssrcs.media),e.addAlternativeEncodings([i])}for(const i of t.groups||[])e.addSourceGroup(hs.expand(i));for(const i of t.encodings||[]){const t=[];for(const s of i)t.push(os.expand(s));e.addAlternativeEncodings(t)}return e},as.clone=function(t){return"TrackInfo"===t.constructor.name?t.clone():as.expand(t)};var us=as;const cs=us;let ds=class t{clone(){const i=new t(this.id);for(const t of this.tracks.values())i.addTrack(t.clone());return i}plain(){const t={id:this.id,tracks:[]};for(const i of this.tracks.values())t.tracks.push(i.plain());return t}getId(){return this.id}addTrack(t){this.tracks.set(t.getId(),t)}removeTrack(t){return this.tracks.delete(t.getId())}removeTrackById(t){return this.tracks.delete(t)}getFirstTrack(t){for(let i of this.tracks.values())if(i.getMedia().toLowerCase()===t.toLowerCase())return i;return null}getTracks(){return this.tracks}removeAllTracks(){this.tracks.clear()}getTrack(t){return this.tracks.get(t)}constructor(t){this.id=t,this.tracks=new Map}};ds.expand=function(t){if("StreamInfo"===t.constructor.name)return t;const i=new ds(t.id);for(const s of t.tracks||[]){const t=cs.expand(s);t&&i.addTrack(t)}return i},ds.clone=function(t){return"StreamInfo"===t.constructor.name?t.clone():ds.expand(t)};var ls=ds;const fs=Lt,vs=function(t){const i=new Intl.Collator(t,{sensitivity:"base"});return(t,s)=>0==i.compare(t,s)}("en-US"),_s=jt,gs=ii,ms=Jt,ps=oi,ws=ui,ys=xi,bs=Ji,As=ni,Ss=Ui,Ts=Pi,ks=ts,Es=ss,Rs=ls,xs=us,Is=rs,Ps=Vi,Cs=Mi,Ns=Di,Ds=Xi;let Bs=class t{clone(){const i=new t(this.version);for(const t of this.medias)i.addMedia(t.clone());for(const t of this.streams.values())i.addStream(t.clone());for(const t of this.candidates)i.addCandidate(t.clone());return i.setICE(this.ice.clone()),this.dtls&&i.setDTLS(this.dtls.clone()),this.crypto&&i.setCrypto(this.crypto.clone()),i.setExtmapAllowMixed(this.extmapAllowMixed),i}plain(){const t={version:this.version,streams:[],medias:[],candidates:[]};for(const i of this.medias)t.medias.push(i.plain());for(const i of this.streams.values())t.streams.push(i.plain());for(const i of this.candidates)t.candidates.push(i.plain());return this.ice&&(t.ice=this.ice.plain()),this.dtls&&(t.dtls=this.dtls.plain()),this.crypto&&(t.crypto=this.crypto.plain()),this.extmapAllowMixed||(t.extmapAllowMixedNotSupported=!this.extmapAllowMixed),t}unify(){const i=new t(this.version);for(const t of this.medias)i.addMedia(t.clone());const s={audio:i.getMediasByType("audio"),video:i.getMediasByType("video")};for(const t of this.streams.values()){const e=t.clone();for(const t of e.getTracks().values()){let e=s[t.getMedia()].pop();e||(e=this.getMedia(t.getMedia()).clone(),e.setId(t.getId()),i.addMedia(e)),t.setMediaId(e.getId())}i.addStream(e)}for(const t of this.candidates)i.addCandidate(t.clone());return this.ice&&i.setICE(this.ice.clone()),this.dtls&&i.setDTLS(this.dtls.clone()),this.crypto&&i.setCrypto(this.crypto.clone()),i}setVersion(t){this.version=t}addMedia(t){this.medias.push(t)}getMedia(t){for(let i in this.medias){let s=this.medias[i];if(vs(s.getType(),t))return s}return null}getMediasByType(t){let i=[];for(let s in this.medias){let e=this.medias[s];vs(e.getType(),t)&&i.push(e)}return i}getMediaById(t){for(const i of this.medias)if(vs(i.getId(),t))return i;return null}replaceMedia(t){for(let i in this.medias)if(this.medias[i].getId()==t.getId())return this.medias[i]=t,!0;return!1}getMedias(){return this.medias}getVersion(){return this.version}getDTLS(){return this.dtls}setDTLS(t){this.dtls=t}hasCrypto(){return!!this.crypto}getCrypto(){return this.crypto}setCrypto(t){this.crypto=t}hasICE(){return!!this.ice}getICE(){return this.ice}setICE(t){this.ice=t}addCandidate(t){for(const i of this.candidates)if(i.equals(t))return;this.candidates.push(t)}addCandidates(t){for(const i of t)this.addCandidate(i)}getCandidates(){return this.candidates}getStream(t){return this.streams.get(t)}getStreams(){return this.streams}getFirstStream(){for(const t of this.streams.values())return t;return null}addStream(t){this.streams.set(t.getId(),t)}removeStream(t){return this.streams.delete(t.getId())}removeAllStreams(){this.streams.clear()}getTracksByMediaType(t){let i=[];for(const s of this.streams.values())for(const[e,n]of s.getTracks())vs(n.getMedia(),t)&&i.push(n);return i}getTrackByMediaId(t){for(const i of this.streams.values())for(const[s,e]of i.getTracks())if(e.getMediaId()==t)return e;return null}getStreamByMediaId(t){for(const i of this.streams.values())for(const[s,e]of i.getTracks())if(e.getMediaId()==t)return i;return null}getExtmapAllowMixed(){return this.extmapAllowMixed}setExtmapAllowMixed(t){this.extmapAllowMixed=t}answer(i){const s=new t;i.ice&&(i.ice instanceof ys?s.setICE(i.ice.clone()):s.setICE(ys.expand(i.ice))),i.dtls&&(i.dtls instanceof ps?s.setDTLS(i.dtls):s.setDTLS(ps.expand(i.dtls))),i.crypto&&(i.crypto instanceof ws?s.setCrypto(i.crypto):s.setCrypto(ws.expand(i.crypto)));for(let t=0;i.candidates&&t<i.candidates.length;++t)i.candidates[t]instanceof _s?s.addCandidate(i.candidates[t].clone()):s.addCandidate(_s.expand(i.candidates[t]));for(const t of this.medias){const e=i&&i.capabilities&&i.capabilities[t.getType()];s.addMedia(t.answer(e))}return s.setExtmapAllowMixed(this.extmapAllowMixed),s}toString(){let t={version:0,media:[]};t.version=0,t.origin={username:"-",sessionId:(new Date).getTime(),sessionVersion:this.version,netType:"IN",ipVer:4,address:"127.0.0.1"},t.name="semantic-sdp",t.connection={version:4,ip:"0.0.0.0"},t.timing={start:0,stop:0},this.hasICE()&&this.getICE().isLite()&&(t.icelite="ice-lite"),t.msidSemantic={semantic:"WMS",token:"*"},t.groups=[],this.extmapAllowMixed&&(t.extmapAllowMixed="extmap-allow-mixed");const i=[];for(const s of this.medias){let e={type:s.getType(),port:9,protocol:"",fmtp:[],rtp:[],rtcpFb:[],ext:[],bandwidth:[],candidates:[],ssrcGroups:[],ssrcs:[],rids:[]};e.direction=Ss.toString(s.getDirection()),this.extmapAllowMixed&&(e.extmapAllowMixed="extmap-allow-mixed"),e.mid=s.getId(),i.push(s.getId()),s.hasControl()&&(e.control=s.getControl()),s.getBitrate()>0&&(e.bandwidth.push({type:"AS",limit:s.getBitrate()}),e.bandwidth.push({type:"TIAS",limit:1e3*s.getBitrate()}));let n=this.getCandidates();for(const t of n)e.candidates.push({foundation:t.getFoundation(),component:t.getComponentId(),transport:t.getTransport(),priority:t.getPriority(),ip:t.getAddress(),port:t.getPort(),type:t.getType(),raddr:t.getRelAddr(),rport:t.getRelPort()});if(this.getICE()&&(e.iceUfrag=this.getICE().getUfrag(),e.icePwd=this.getICE().getPwd()),vs("audio",s.getType())||vs("video",s.getType())){e.rtcpMux="rtcp-mux",e.rtcpRsize="rtcp-rsize",this.getDTLS()?(e.protocol="UDP/TLS/RTP/SAVPF",e.fingerprint={type:this.getDTLS().getHash(),hash:this.getDTLS().getFingerprint()},e.setup=As.toString(this.getDTLS().getSetup())):this.getCrypto()?(e.protocol="RTP/SAVPF",e.crypto=[{id:this.getCrypto().getTag(),suite:this.getCrypto().getSuite(),config:this.getCrypto().getKeyParams()}]):e.protocol="RTP/AVP";for(const t of s.getCodecs().values()){vs("video",s.getType())?e.rtp.push({payload:t.getType(),codec:t.getCodec().toUpperCase(),rate:9e4}):vs("opus",t.getCodec())||vs("multiopus",t.getCodec())?e.rtp.push({payload:t.getType(),codec:t.getCodec(),rate:48e3,encoding:t.getChannels()}):e.rtp.push({payload:t.getType(),codec:t.getCodec(),rate:8e3});for(const i of t.getRTCPFeedbacks())e.rtcpFb.push({payload:t.getType(),type:i.getId(),subtype:i.getParams().join(" ")});t.hasRTX()&&(e.rtp.push({payload:t.getRTX(),codec:"rtx",rate:9e4}),e.fmtp.push({payload:t.getRTX(),config:"apt="+t.getType()}));const i=t.getParams();if(w.keys(i).length){const s={payload:t.getType(),config:""};for(const t in i)s.config.length&&(s.config+=";"),w.hasOwnProperty.call(i,t)?s.config+=t+"="+i[t]:s.config+=t;e.fmtp.push(s)}}const t=[];for(const i of e.rtp)t.push(i.payload);e.payloads=t.join(" ");for(let[t,i]of s.getExtensions().entries())e.ext.push({value:t,uri:i});for(let t of s.getRIDs().values()){let i={id:t.getId(),direction:Ts.toString(t.getDirection()),params:""};t.getFormats().length&&(i.params="pt="+t.getFormats().join(","));for(let[s,e]of t.getParams().entries())i.params+=(i.params.length?";":"")+s+"="+e;e.rids.push(i)}const i=s.getSimulcast();if(i){let t=1;e.simulcast={};const s=i.getSimulcastStreams(Ts.SEND),n=i.getSimulcastStreams(Ts.RECV);if(s&&s.length){let i="";for(const t of s){let s="";for(const i of t)s+=(s.length?",":"")+(i.isPaused()?"~":"")+i.getId();i+=(i.length?";":"")+s}e.simulcast["dir"+t]="send",e.simulcast["list"+t]=i,t++}if(n&&n.length){let i="";for(const t of n){let s="";for(const i of t)s+=(s.length?",":"")+(i.isPaused()?"~":"")+i.getId();i+=(i.length?";":"")+s}e.simulcast["dir"+t]="recv",e.simulcast["list"+t]=i,t++}}}else if(s.hasDataChannel()){e.protocol="UDP/DTLS/SCTP",e.payloads="webrtc-datachannel";const t=s.getDataChannel();e.sctpPort=t.getPort(),e.maxMessageSize=t.getMaxMessageSize()}t.media.push(e)}for(let i of this.streams.values())for(let s of i.getTracks().values())for(let e in t.media){let n=t.media[e];if(s.getMediaId()){if(s.getMediaId()==n.mid){let t=s.getSourceGroups();for(let i in t){let s=t[i];n.ssrcGroups.push({semantics:s.getSemantics(),ssrcs:s.getSSRCs().join(" ")})}let e=s.getSSRCs();for(let t in e)n.ssrcs.push({id:e[t],attribute:"cname",value:i.getId()}),n.ssrcs.push({id:e[t],attribute:"msid",value:i.getId()+" "+s.getId()});n.msid=i.getId()+" "+s.getId();break}}else if(vs(n.type,s.getMedia())){let t=s.getSourceGroups();for(let i in t){let s=t[i];n.ssrcGroups.push({semantics:s.getSemantics(),ssrcs:s.getSSRCs().join(" ")})}let e=s.getSSRCs();for(let t in e)n.ssrcs.push({id:e[t],attribute:"cname",value:i.getId()}),n.ssrcs.push({id:e[t],attribute:"msid",value:i.getId()+" "+s.getId()});break}}const s={type:"BUNDLE",mids:i.join(" ")};return t.groups.push(s),fs.write(t)}toIceFragmentString(){let t={version:0,media:[],candidates:[]};this.hasICE()&&this.getICE().isLite()&&(t.icelite="ice-lite"),this.getICE()&&(t.iceUfrag=this.getICE().getUfrag(),t.icePwd=this.getICE().getPwd());for(const i of this.getCandidates())t.candidates.push({foundation:i.getFoundation(),component:i.getComponentId(),transport:i.getTransport(),priority:i.getPriority(),ip:i.getAddress(),port:i.getPort(),type:i.getType(),raddr:i.getRelAddr(),rport:i.getRelPort()});return fs.write(t).slice(10)}constructor(t){this.version=t||1,this.streams=new Map,this.medias=new Array,this.candidates=new Array,this.ice=null,this.dtls=null,this.crypto=null,this.extmapAllowMixed=!0}};Bs.create=function(t){var i;const s=new Bs;if(t.streams)for(const i of t.streams)s.addStream(Rs.expand(i));t.ice&&(t.ice instanceof ys?s.setICE(t.ice.clone()):s.setICE(ys.expand(t.ice))),t.dtls&&(t.dtls instanceof ps?s.setDTLS(t.dtls):s.setDTLS(ps.expand(t.dtls))),t.crypto&&(t.crypto instanceof ws?s.setCrypto(t.crypto):s.setCrypto(ws.expand(t.crypto)));for(const i of t.candidates||[])i instanceof _s?s.addCandidate(i.clone()):s.addCandidate(_s.expand(i));let e=96,n=1,r=0;for(const[h,o]of w.entries(t.capabilities||{}))if(t.unified&&null!==(i=t.streams)&&void 0!==i&&i.length)for(const t of s.getTracksByMediaType(h)){const i=bs.create(t.getMediaId(),h,o);for(const[t,s]of i.getCodecs())s.getType()>=96&&s.setType(e++),s.getRTX()&&s.setRTX(e++);if(o.extensions)for(let t of o.extensions)15===n&&n++,i.addExtension(n++,t);s.addMedia(i)}else{const i=bs.create(t.unified?String(r++):h,h,o);for(const[t,s]of i.getCodecs())s.getType()>=96&&s.setType(e++),s.getRTX()&&s.setRTX(e++);if(o.extensions)for(let t of o.extensions)15===n&&n++,i.addExtension(n++,t);s.addMedia(i)}return s},Bs.expand=function(t){if("SDPInfo"===t.constructor.name)return t;const i=new Bs(t.version);for(const s of t.medias||[]){const t=bs.expand(s);t&&i.addMedia(t)}for(const s of t.streams||[]){const t=Rs.expand(s);t&&i.addStream(t)}for(const s of t.candidates||[]){const t=_s.expand(s);t&&i.addCandidate(t)}return t.ice&&i.setICE(ys.expand(t.ice)),t.dtls&&i.setDTLS(ps.expand(t.dtls)),t.crypto&&i.setCrypto(ws.expand(t.crypto)),t.extmapAllowMixedNotSupported&&(this.extmapAllowMixed=!t.extmapAllowMixedNotSupported),i},Bs.clone=function(t){return"SDPInfo"===t.constructor.name?t.clone():Bs.expand(t)},Bs.process=function(t){return Bs.parse(t)},Bs.parse=function(t){const i=fs.parse(t),s=new Bs;if(s.setVersion(i.version),i.iceUfrag&&i.icePwd){const t=String(i.iceUfrag),e=String(i.icePwd),n=new ys(t,e);n.setLite("ice-lite"==i.icelite),n.setEndOfCandidates("end-of-candidates"==i.endOfCandidates),s.setICE(n)}for(let t in i.media){const e=i.media[t],n=e.type,r=e.mid?e.mid.toString():t,h=new bs(r,n);if(e.iceUfrag&&e.icePwd){const t=String(e.iceUfrag),n=String(e.icePwd),r=new ys(t,n);r.setLite("ice-lite"==i.icelite),r.setEndOfCandidates("end-of-candidates"==e.endOfCandidates),s.setICE(r)}for(let t=0;e.candidates&&t<e.candidates.length;++t){const i=e.candidates[t],n=new _s(i.foundation,i.component,i.transport,i.priority,i.ip,i.port,i.type,i.raddr,i.rport);s.addCandidate(n)}const o=e.fingerprint||i.fingerprint;if(o){const t=o.type,i=o.hash;let n=As.ACTPASS;e.setup&&(n=As.byValue(e.setup)),s.setDTLS(new ps(n,t,i))}if(e.crypto){const t=e.crypto[0];s.setCrypto(new ws(t.id,t.suite,t.config,t.sessionConfig))}let a=Ss.SENDRECV;e.direction&&(a=Ss.byValue(e.direction),h.setDirection(a)),e.control&&h.setControl(e.control),s.setExtmapAllowMixed("extmap-allow-mixed"==e.extmapAllowMixed||"extmap-allow-mixed"==i.extmapAllowMixed);const u=new Map;for(let t in e.rtp){const i=e.rtp[t],s=i.payload,n=i.codec;if("RED"===n.toUpperCase()||"ULPFEC"===n.toUpperCase())continue;let r={};for(let t in e.fmtp){const i=e.fmtp[t];if(i.payload===s){const t=i.config.split(";");for(let i in t){const s=t[i].split("="),e=s[0].trim(),n=s.splice(1).join("=").trim();r[e]=n}}}if("RTX"===n.toUpperCase())u.set(x(r.apt),s);else{const t=new gs(n,s,r);i.encoding>1&&t.setChannels(i.encoding),h.addCodec(t)}}for(let t of u.entries()){const i=h.getCodecForType(t[0]);i&&i.setRTX(t[1])}for(let t=0;e.rtcpFb&&t<e.rtcpFb.length;++t){const i=h.getCodecForType(e.rtcpFb[t].payload);if(i){const s=e.rtcpFb[t].type,n=e.rtcpFb[t].subtype?e.rtcpFb[t].subtype.split(" "):null;i.addRTCPFeedback(new ms(s,n))}}const c=e.ext;for(let t in c){const i=c[t];h.addExtension(i.value,i.uri)}const d=e.rids;for(let t in d){const i=d[t],s=new Ns(i.id,Ts.byValue(i.direction));let e=[];const n=new Map;if(i.params){const t=fs.parseParams(i.params);for(let i in t)"pt"===i?e=t[i].split(","):n.set(i,t[i]);s.setFormats(e),s.setParams(n)}h.addRID(s)}const l=[];if(e.simulcast){const t=new Ps;if(e.simulcast.dir1){const i=Ts.byValue(e.simulcast.dir1),s=fs.parseSimulcastStreamList(e.simulcast.list1);for(let e=0;e<s.length;++e){const n=[];for(let t=0;t<s[e].length;++t)n.push(new Cs(s[e][t].scid,s[e][t].paused));t.addSimulcastAlternativeStreams(i,n)}}if(e.simulcast.dir2){const i=Ts.byValue(e.simulcast.dir2),s=fs.parseSimulcastStreamList(e.simulcast.list2);for(let e=0;e<s.length;++e){const n=[];for(let t=0;t<s[e].length;++t)n.push(new Cs(s[e][t].scid,s[e][t].paused));t.addSimulcastAlternativeStreams(i,n)}}for(let i of t.getSimulcastStreams(Ts.SEND)){const t=[];for(let s=0;s<i.length;s++){const e=new Is(i[s].getId(),i[s].isPaused()),n=h.getRID(e.getId());if(n){const i=n.getFormats();for(let t=0;i&&t<i.length;++t){const s=h.getCodecForType(i[t]);s&&e.addCodec(s)}e.setParams(n.getParams()),t.push(e)}}t.length&&l.push(t)}h.setSimulcast(t)}const f=new Map;if(e.ssrcs)for(let t in e.ssrcs){let i=e.ssrcs[t],h=i.id,o=i.attribute,a=i.value,u=f.get(h);if(u||(u=new Es(h),f.set(u.getSSRC(),u)),vs("cname",o))u.setCName(a);else if(vs("msid",o)){let t=a.split(" "),i=t[0],e=t[1];u.setStreamId(i),u.setTrackId(e);let o=s.getStream(i);o||(o=new Rs(i),s.addStream(o));let c=o.getTrack(e);c||(c=new xs(n,e),c.setMediaId(r),c.setEncodings(l),o.addTrack(c)),c.addSSRC(h)}}if(e.msid){let t=e.msid.split(" "),i=t[0],h=t[1],o=s.getStream(i);o||(o=new Rs(i),s.addStream(o));let a=o.getTrack(h);a||(a=new xs(n,h),a.setMediaId(r),a.setEncodings(l),o.addTrack(a));for(let[t,s]of f.entries())s.getStreamId()||(s.setStreamId(i),s.setTrackId(h),a.addSSRC(t))}for(let[t,i]of f.entries())if(!i.getStreamId()){let e=i.getCName(),h=r;i.setStreamId(e),i.setTrackId(h);let o=s.getStream(e);o||(o=new Rs(e),s.addStream(o));let a=o.getTrack(h);a||(a=new xs(n,h),a.setMediaId(r),a.setEncodings(l),o.addTrack(a)),a.addSSRC(t)}if(e.ssrcGroups)for(let t in e.ssrcGroups){let i=e.ssrcGroups[t],n=i.ssrcs.split(" "),r=new ks(i.semantics,n),h=f.get(x(n[0]));h&&s.getStream(h.getStreamId()).getTrack(h.getTrackId()).addSourceGroup(r)}if("application"==e.type&&"webrtc-datachannel"==e.payloads){const t=new Ds(e.sctpPort,e.maxMessageSize);h.setDataChannel(t)}s.addMedia(h)}return s};var Ms=Bs;w.defineProperty(Mt,"__esModule",{value:!0});var Ls=Mt.SDPInfo=Ms;Mt.CandidateInfo=jt,Mt.CodecInfo=ii,Mt.DTLSInfo=oi,Mt.CryptoInfo=ui,Mt.ICEInfo=xi;var Os=Mt.MediaInfo=Ji;Mt.Setup=ni,Mt.SourceGroupInfo=ts,Mt.SourceInfo=ss,Mt.StreamInfo=ls,Mt.TrackInfo=us,Mt.RTCPFeedbackInfo=Jt,Mt.TrackEncodingInfo=rs,Mt.RIDInfo=Di,Mt.SimulcastInfo=Vi,Mt.SimulcastStreamInfo=Mi,Mt.DataChannelInfo=Xi;var Fs=Mt.Direction=Ui,Vs={exports:{}};!function(t,i){!function(s,e){var n="function",r="undefined",h="object",o="string",a="major",u="model",c="name",d="type",l="vendor",f="version",v="architecture",_="console",g="mobile",m="tablet",p="smarttv",w="wearable",y="embedded",b="Amazon",A="Apple",S="ASUS",T="BlackBerry",k="Browser",E="Chrome",R="Firefox",x="Google",I="Huawei",P="LG",C="Microsoft",N="Motorola",D="Opera",B="Samsung",M="Sharp",L="Sony",O="Xiaomi",F="Zebra",V="Facebook",W="Chromium OS",U="Mac OS",G=" Browser",X=function(t){for(var i={},s=0;s<t.length;s++)i[t[s].toUpperCase()]=t[s];return i},Z=function(t,i){return typeof t===o&&-1!==H(i).indexOf(H(t))},H=function(t){return t.toLowerCase()},z=function(t,i){if(typeof t===o)return t=t.replace(/^\s\s*/,""),typeof i===r?t:t.substring(0,500)},Y=function(t,i){for(var s,r,o,a,u,c,d=0;d<i.length&&!u;){var l=i[d],f=i[d+1];for(s=r=0;s<l.length&&!u&&l[s];)if(u=l[s++].exec(t))for(o=0;o<f.length;o++)c=u[++r],typeof(a=f[o])===h&&a.length>0?2===a.length?typeof a[1]==n?this[a[0]]=a[1].call(this,c):this[a[0]]=a[1]:3===a.length?typeof a[1]!==n||a[1].exec&&a[1].test?this[a[0]]=c?c.replace(a[1],a[2]):e:this[a[0]]=c?a[1].call(this,c,a[2]):e:4===a.length&&(this[a[0]]=c?a[3].call(this,c.replace(a[1],a[2])):e):this[a]=c||e;d+=2}},K=function(t,i){for(var s in i)if(typeof i[s]===h&&i[s].length>0){for(var n=0;n<i[s].length;n++)if(Z(i[s][n],t))return"?"===s?e:s}else if(Z(i[s],t))return"?"===s?e:s;return i.hasOwnProperty("*")?i["*"]:t},q={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},j={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[f,[c,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[f,[c,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[c,f],[/opios[\/ ]+([\w\.]+)/i],[f,[c,D+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[f,[c,D+" GX"]],[/\bopr\/([\w\.]+)/i],[f,[c,D]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[f,[c,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[c,f],[/quark(?:pc)?\/([-\w\.]+)/i],[f,[c,"Quark"]],[/\bddg\/([\w\.]+)/i],[f,[c,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[f,[c,"UC"+k]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[f,[c,"WeChat"]],[/konqueror\/([\w\.]+)/i],[f,[c,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[f,[c,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[f,[c,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[f,[c,"Smart Lenovo "+k]],[/(avast|avg)\/([\w\.]+)/i],[[c,/(.+)/,"$1 Secure "+k],f],[/\bfocus\/([\w\.]+)/i],[f,[c,R+" Focus"]],[/\bopt\/([\w\.]+)/i],[f,[c,D+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[f,[c,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[f,[c,"Dolphin"]],[/coast\/([\w\.]+)/i],[f,[c,D+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[f,[c,"MIUI "+k]],[/fxios\/([-\w\.]+)/i],[f,[c,R]],[/\bqihu|(qi?ho?o?|360)browser/i],[[c,"360"+G]],[/\b(qq)\/([\w\.]+)/i],[[c,/(.+)/,"$1Browser"],f],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[c,/(.+)/,"$1"+G],f],[/samsungbrowser\/([\w\.]+)/i],[f,[c,B+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[c,/_/g," "],f],[/metasr[\/ ]?([\d\.]+)/i],[f,[c,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[c,"Sogou Mobile"],f],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[c,f],[/(lbbrowser|rekonq)/i,/\[(linkedin)app\]/i],[c],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[c,V],f],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[c,f],[/\bgsa\/([\w\.]+) .*safari\//i],[f,[c,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[f,[c,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[f,[c,E+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[c,E+" WebView"],f],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[f,[c,"Android "+k]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[c,f],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[f,[c,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[f,c],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[c,[f,K,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[c,f],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[c,"Netscape"],f],[/(wolvic)\/([\w\.]+)/i],[c,f],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[f,[c,R+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[c,[f,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[c,[f,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[v,"amd64"]],[/(ia32(?=;))/i],[[v,H]],[/((?:i[346]|x)86)[;\)]/i],[[v,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[v,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[v,"armhf"]],[/windows (ce|mobile); ppc;/i],[[v,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[v,/ower/,"",H]],[/(sun4\w)[;\)]/i],[[v,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[v,H]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[u,[l,B],[d,m]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr])[-\w]+)/i,/sec-(sgh\w+)/i],[u,[l,B],[d,g]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[u,[l,A],[d,g]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[u,[l,A],[d,m]],[/(macintosh);/i],[u,[l,A]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[u,[l,M],[d,g]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[u,[l,I],[d,m]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[u,[l,I],[d,g]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i],[[u,/_/g," "],[l,O],[d,g]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[u,/_/g," "],[l,O],[d,m]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[u,[l,"OPPO"],[d,g]],[/\b(opd2\d{3}a?) bui/i],[u,[l,"OPPO"],[d,m]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[u,[l,"Vivo"],[d,g]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[u,[l,"Realme"],[d,g]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[u,[l,N],[d,g]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[u,[l,N],[d,m]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[u,[l,P],[d,m]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[u,[l,P],[d,g]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[u,[l,"Lenovo"],[d,m]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[u,/_/g," "],[l,"Nokia"],[d,g]],[/(pixel c)\b/i],[u,[l,x],[d,m]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[u,[l,x],[d,g]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[u,[l,L],[d,g]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[u,"Xperia Tablet"],[l,L],[d,m]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[u,[l,"OnePlus"],[d,g]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[u,[l,b],[d,m]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[u,/(.+)/g,"Fire Phone $1"],[l,b],[d,g]],[/(playbook);[-\w\),; ]+(rim)/i],[u,l,[d,m]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[u,[l,T],[d,g]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[u,[l,S],[d,m]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[u,[l,S],[d,g]],[/(nexus 9)/i],[u,[l,"HTC"],[d,m]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[l,[u,/_/g," "],[d,g]],[/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])\w*(\)| bui)/i],[u,[l,"TCL"],[d,m]],[/(itel) ((\w+))/i],[[l,H],u,[d,K,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[u,[l,"Acer"],[d,m]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[u,[l,"Meizu"],[d,g]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[u,[l,"Ulefone"],[d,g]],[/droid.+; (a(?:015|06[35]|142p?))/i],[u,[l,"Nothing"],[d,g]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[l,u,[d,g]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[l,u,[d,m]],[/(surface duo)/i],[u,[l,C],[d,m]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[u,[l,"Fairphone"],[d,g]],[/(u304aa)/i],[u,[l,"AT&T"],[d,g]],[/\bsie-(\w*)/i],[u,[l,"Siemens"],[d,g]],[/\b(rct\w+) b/i],[u,[l,"RCA"],[d,m]],[/\b(venue[\d ]{2,7}) b/i],[u,[l,"Dell"],[d,m]],[/\b(q(?:mv|ta)\w+) b/i],[u,[l,"Verizon"],[d,m]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[u,[l,"Barnes & Noble"],[d,m]],[/\b(tm\d{3}\w+) b/i],[u,[l,"NuVision"],[d,m]],[/\b(k88) b/i],[u,[l,"ZTE"],[d,m]],[/\b(nx\d{3}j) b/i],[u,[l,"ZTE"],[d,g]],[/\b(gen\d{3}) b.+49h/i],[u,[l,"Swiss"],[d,g]],[/\b(zur\d{3}) b/i],[u,[l,"Swiss"],[d,m]],[/\b((zeki)?tb.*\b) b/i],[u,[l,"Zeki"],[d,m]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[l,"Dragon Touch"],u,[d,m]],[/\b(ns-?\w{0,9}) b/i],[u,[l,"Insignia"],[d,m]],[/\b((nxa|next)-?\w{0,9}) b/i],[u,[l,"NextBook"],[d,m]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[l,"Voice"],u,[d,g]],[/\b(lvtel\-)?(v1[12]) b/i],[[l,"LvTel"],u,[d,g]],[/\b(ph-1) /i],[u,[l,"Essential"],[d,g]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[u,[l,"Envizen"],[d,m]],[/\b(trio[-\w\. ]+) b/i],[u,[l,"MachSpeed"],[d,m]],[/\btu_(1491) b/i],[u,[l,"Rotor"],[d,m]],[/(shield[\w ]+) b/i],[u,[l,"Nvidia"],[d,m]],[/(sprint) (\w+)/i],[l,u,[d,g]],[/(kin\.[onetw]{3})/i],[[u,/\./g," "],[l,C],[d,g]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[u,[l,F],[d,m]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[u,[l,F],[d,g]],[/smart-tv.+(samsung)/i],[l,[d,p]],[/hbbtv.+maple;(\d+)/i],[[u,/^/,"SmartTV"],[l,B],[d,p]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[l,P],[d,p]],[/(apple) ?tv/i],[l,[u,A+" TV"],[d,p]],[/crkey/i],[[u,E+"cast"],[l,x],[d,p]],[/droid.+aft(\w+)( bui|\))/i],[u,[l,b],[d,p]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[u,[l,M],[d,p]],[/(bravia[\w ]+)( bui|\))/i],[u,[l,L],[d,p]],[/(mitv-\w{5}) bui/i],[u,[l,O],[d,p]],[/Hbbtv.*(technisat) (.*);/i],[l,u,[d,p]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[l,z],[u,z],[d,p]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[d,p]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[l,u,[d,_]],[/droid.+; (shield) bui/i],[u,[l,"Nvidia"],[d,_]],[/(playstation [345portablevi]+)/i],[u,[l,L],[d,_]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[u,[l,C],[d,_]],[/\b(sm-[lr]\d\d[05][fnuw]?s?)\b/i],[u,[l,B],[d,w]],[/((pebble))app/i],[l,u,[d,w]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[u,[l,A],[d,w]],[/droid.+; (glass) \d/i],[u,[l,x],[d,w]],[/droid.+; (wt63?0{2,3})\)/i],[u,[l,F],[d,w]],[/(quest( \d| pro)?)/i],[u,[l,V],[d,w]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[l,[d,y]],[/(aeobc)\b/i],[u,[l,b],[d,y]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[u,[d,g]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[u,[d,m]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[d,m]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[d,g]],[/(android[-\w\. ]{0,9});.+buil/i],[u,[l,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[f,[c,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[f,[c,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[c,f],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[f,c]],os:[[/microsoft (windows) (vista|xp)/i],[c,f],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[c,[f,K,q]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[f,K,q],[c,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[f,/_/g,"."],[c,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[c,U],[f,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[f,c],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[c,f],[/\(bb(10);/i],[f,[c,T]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[f,[c,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[f,[c,R+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[f,[c,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[f,[c,"watchOS"]],[/crkey\/([\d\.]+)/i],[f,[c,E+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[c,W],f],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[c,f],[/(sunos) ?([\w\.\d]*)/i],[[c,"Solaris"],f],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[c,f]]},Q=function(t,i){if(typeof t===h&&(i=t,t=e),!(this instanceof Q))return new Q(t,i).getResult();var _=typeof s!==r&&s.navigator?s.navigator:e,p=t||(_&&_.userAgent?_.userAgent:""),w=_&&_.userAgentData?_.userAgentData:e,y=i?function(t,i){var s={};for(var e in t)i[e]&&i[e].length%2==0?s[e]=i[e].concat(t[e]):s[e]=t[e];return s}(j,i):j,b=_&&_.userAgent==p;return this.getBrowser=function(){var t={};return t[c]=e,t[f]=e,Y.call(t,p,y.browser),t[a]=function(t){return typeof t===o?t.replace(/[^\d\.]/g,"").split(".")[0]:e}(t[f]),b&&_&&_.brave&&typeof _.brave.isBrave==n&&(t[c]="Brave"),t},this.getCPU=function(){var t={};return t[v]=e,Y.call(t,p,y.cpu),t},this.getDevice=function(){var t={};return t[l]=e,t[u]=e,t[d]=e,Y.call(t,p,y.device),b&&!t[d]&&w&&w.mobile&&(t[d]=g),b&&"Macintosh"==t[u]&&_&&typeof _.standalone!==r&&_.maxTouchPoints&&_.maxTouchPoints>2&&(t[u]="iPad",t[d]=m),t},this.getEngine=function(){var t={};return t[c]=e,t[f]=e,Y.call(t,p,y.engine),t},this.getOS=function(){var t={};return t[c]=e,t[f]=e,Y.call(t,p,y.os),b&&!t[c]&&w&&w.platform&&"Unknown"!=w.platform&&(t[c]=w.platform.replace(/chrome os/i,W).replace(/macos/i,U)),t},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return p},this.setUA=function(t){return p=typeof t===o&&t.length>500?z(t,500):t,this},this.setUA(p),this};Q.VERSION="0.7.39",Q.BROWSER=X([c,f,a]),Q.CPU=X([v]),Q.DEVICE=X([u,l,d,_,g,p,m,w,y]),Q.ENGINE=Q.OS=X([c,f]),t.exports&&(i=t.exports=Q),i.UAParser=Q;var J=typeof s!==r&&(s.jQuery||s.Zepto);if(J&&!J.ua){var $=new Q;J.ua=$.getResult(),J.ua.get=function(){return $.getUA()},J.ua.set=function(t){$.setUA(t);var i=$.getResult();for(var s in i)J.ua[s]=i[s]}}}("object"==typeof s?s:A)}(Vs,Vs.exports);const Ws=T(Vs.exports),Us=["iOS"];class Gs extends Ws{isChromium(){return this.getUA().match(/Chrome/i)}isChrome(){const t=this.getBrowser();if(!t.name)return!1;const i=this.getOS();let s=!0;return s=!new RegExp(Us.join("|"),"i").test(i.name),t.name.match(/Chrome/i)&&s}isFirefox(){const t=this.getBrowser();return!!t.name&&t.name.match(/Firefox/i)}isOpera(){const t=this.getBrowser();return!!t.name&&t.name.match(/Opera/i)}isSafari(){const t=this.getBrowser();return!!t.name&&t.name.match(/Safari/i)}constructor(){super(s.navigator.userAgent)}}const Xs=ot.get("SdpParser"),Zs=Array.from({length:31},(t,i)=>i+35),Hs=Array.from({length:32},(t,i)=>i+96),zs=Array.from({length:14},(t,i)=>i+1),Ys=Array.from({length:240},(t,i)=>i+16),Ks={setSimulcast(t,i){if(Xs.info("Setting simulcast. Codec: ",i),!(new Gs).isChromium())return Xs.warn("Your browser does not appear to support Simulcast. For a better experience, use a Chromium based browser."),t;if("h264"!==i&&"vp8"!==i)return Xs.warn("Your selected codec ".concat(i," does not appear to support Simulcast.  To broadcast using simulcast, please use H.264 or VP8.")),t;if(!/m=video/.test(t))return Xs.warn("There is no available video for simulcast to be enabled."),t;try{const i=new RegExp("m=video.*?a=ssrc:(\\d*) cname:(.+?)\\r\\n","s"),s=new RegExp("m=video.*?a=ssrc:(\\d*) msid:(.+?)\\r\\n","s"),e=i.exec(t),n=e[1],r=e[2],h=s.exec(t)[2],o=2,a=[n];for(let i=0;i<o;++i){const s=100+2*i,e=s+1;a.push(s),t+="a=ssrc-group:FID "+s+" "+e+"\r\na=ssrc:"+s+" cname:"+r+"\r\na=ssrc:"+s+" msid:"+h+"\r\na=ssrc:"+e+" cname:"+r+"\r\na=ssrc:"+e+" msid:"+h+"\r\n"}return t+="a=ssrc-group:SIM "+a.join(" ")+"\r\n",Xs.info("Simulcast setted"),Xs.debug("Simulcast SDP: ",t),t}catch(t){throw Xs.error("Error setting SDP for simulcast: ",t),t}},setStereo:t=>(Xs.info("Replacing SDP response for support stereo"),t=t.replace(/useinbandfec=1/g,"useinbandfec=1; stereo=1"),Xs.info("Replaced SDP response for support stereo"),Xs.debug("New SDP value: ",t),t),setDTX:t=>(Xs.info("Replacing SDP response for support dtx"),t=t.replace("useinbandfec=1","useinbandfec=1; usedtx=1"),Xs.info("Replaced SDP response for support dtx"),Xs.debug("New SDP value: ",t),t),setAbsoluteCaptureTime(t){const i="a=extmap:"+Ks.getAvailableHeaderExtensionIdRange(t)[0]+" http://www.webrtc.org/experiments/rtp-hdrext/abs-capture-time\r\n";return t=t.replace(/(m=.*\r\n(?:.*\r\n)*?)(a=extmap.*\r\n)/gm,(t,s,e)=>s+i+e),Xs.info("Replaced SDP response for setting absolute capture time"),Xs.debug("New SDP value: ",t),t},setDependencyDescriptor(t){const i="a=extmap:"+Ks.getAvailableHeaderExtensionIdRange(t)[0]+" https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension\r\n";return t=t.replace(/(m=.*\r\n(?:.*\r\n)*?)(a=extmap.*\r\n)/gm,(t,s,e)=>s+i+e),Xs.info("Replaced SDP response for setting depency descriptor"),Xs.debug("New SDP value: ",t),t},setVideoBitrate(t,i){if(i<1)Xs.info("Remove bitrate restrictions"),t=t.replace(/b=AS:.*\r\n/,"").replace(/b=TIAS:.*\r\n/,"");else{const s=Ls.parse(t),e=s.getMedia("video");Xs.info("Setting video bitrate"),e.setBitrate(i),t=s.toString()}return t},removeSdpLine:(t,i)=>(Xs.debug("SDP before trimming: ",t),t=t.split("\n").filter(t=>t.trim()!==i).join("\n"),Xs.debug("SDP trimmed result: ",t),t),adaptCodecName(t,i,s){if(!t)return t;const e=new RegExp("".concat(i),"i");return t.replace(e,s)},setMultiopus(t,i){if(!(new Gs).isFirefox()&&(!i||qs(i)))if(t.includes("multiopus/48000/6"))Xs.info("Multiopus already setted");else{Xs.info("Setting multiopus");const i=/m=audio 9 UDP\/TLS\/RTP\/SAVPF (.*)\r\n/.exec(t)[0],s=Ks.getAvailablePayloadTypeRange(t)[0],e=i.replace("\r\n"," ")+s+"\r\na=rtpmap:"+s+" multiopus/48000/6\r\na=fmtp:"+s+" channel_mapping=0,4,1,2,3,5;coupled_streams=2;minptime=10;num_streams=4;useinbandfec=1\r\n";t=t.replace(i,e),Xs.info("Multiopus offer created"),Xs.debug("SDP parsed for multioups: ",t)}return t},getAvailablePayloadTypeRange(t){const i=t.matchAll(/m=(?:.*) (?:.*) UDP\/TLS\/RTP\/SAVPF (.*)\r\n/gm);let s=Hs.concat(Zs);for(const t of i){const i=t[1].split(" ").map(t=>x(t));s=s.filter(t=>!i.includes(t))}return s},getAvailableHeaderExtensionIdRange(t){const i=t.matchAll(/a=extmap:(\d+)(?:.*)\r\n/gm);let s=zs.concat(Ys);for(const t of i){const i=t[1].split(" ").map(t=>x(t));s=s.filter(t=>!i.includes(t))}return s},renegotiate(t,i){const s=Ls.parse(t),e=Ls.parse(i);for(const t of s.getMedias()){let i=e.getMediaById(t.getId());if(!i){i=new Os(t.getId(),t.getType()),i.setDirection(Fs.reverse(t.getDirection()));const s=e.getMedia(t.getType());if(s){i.setCodecs(s.getCodecs());for(const[t,e]of s.getExtensions())i.addExtension(t,e)}e.addMedia(i)}}return e.toString()},updateMissingVideoExtensions(t,i){var s;const e=Ls.parse(t),n=null==(s=Ls.parse(i).getMediasByType("video")[0])?void 0:s.getExtensions();if(n||n.length){for(const i of e.getMediasByType("video")){const s=i.getExtensions();n.forEach((e,n)=>{if(!s.get(n)){const s=i.getId(),r="a=extmap:"+n+" "+e+"\r\n",h=new RegExp("(a=mid:"+s+"\r\n(?:.*\r\n)*?)","g");t=t.replace(h,(t,i,s)=>i+r)}})}return t}},getCodecPayloadType(t){const i=t.matchAll(/a=rtpmap:(\d+) (\w+)\/\d+/g),s={};for(const t of i)s[t[1]]=t[2];return s}},qs=t=>t.getAudioTracks().some(t=>t.getSettings().channelCount>2),js={VP8:"vp8",VP9:"vp9",H264:"h264",AV1:"av1",H265:"h265"},Qs={OPUS:"opus",MULTIOPUS:"multiopus"},Js=ot.get("PeerConnection"),$s="Publisher",te="Viewer",ie={track:"track",connectionStateChange:"connectionStateChange"},se={stereo:!1,mediaStream:null,codec:"h264",simulcast:!1,scalabilityMode:null,disableAudio:!1,disableVideo:!1,setSDPToPeer:!0};class ee extends kt{async createRTCPeer(t,i){void 0===t&&(t={autoInitStats:!0,statsIntervalMs:1e3}),void 0===i&&(i=te),Js.info("Creating new RTCPeerConnection"),Js.debug("RTC configuration provided by user: ",t),this.peer=he(this,t),this.mode=i,t.autoInitStats&&this.initStats(t)}getRTCPeer(){return Js.info("Getting RTC Peer"),this.peer}async closeRTCPeer(){var t;Js.info("Closing RTCPeerConnection"),null==(t=this.peer)||t.close(),this.peer=null,this.stopStats(),this.emit(ie.connectionStateChange,"closed")}async setRTCRemoteSDP(t){Js.info("Setting RTC Remote SDP");const i={type:"answer",sdp:t};try{await this.peer.setRemoteDescription(i),Js.info("RTC Remote SDP was set successfully."),Js.debug("RTC Remote SDP new value: ",t)}catch(t){throw Js.error("Error while setting RTC Remote SDP: ",t),t}}async getRTCLocalSDP(t){void 0===t&&(t=se),Js.info("Getting RTC Local SDP"),t=l(l({},se),t),Js.debug("Options: ",t);const i=re(t.mediaStream);i?ue(this.peer,i,t):ce(this.peer,t),Js.info("Creating peer offer");const s=await this.peer.createOffer();return Js.info("Peer offer created"),Js.debug("Peer offer response: ",s.sdp),this.sessionDescription=s,t.disableAudio||(t.stereo&&(this.sessionDescription.sdp=Ks.setStereo(this.sessionDescription.sdp)),t.dtx&&(this.sessionDescription.sdp=Ks.setDTX(this.sessionDescription.sdp)),this.sessionDescription.sdp=Ks.setMultiopus(this.sessionDescription.sdp,i)),!t.disableVideo&&t.simulcast&&(this.sessionDescription.sdp=Ks.setSimulcast(this.sessionDescription.sdp,t.codec)),t.absCaptureTime&&(this.sessionDescription.sdp=Ks.setAbsoluteCaptureTime(this.sessionDescription.sdp)),t.dependencyDescriptor&&(this.sessionDescription.sdp=Ks.setDependencyDescriptor(this.sessionDescription.sdp)),t.setSDPToPeer&&(await this.peer.setLocalDescription(this.sessionDescription),Js.info("Peer local description set")),this.sessionDescription.sdp}async addRemoteTrack(t,i){return new Promise((s,e)=>{try{const e=this.peer.addTransceiver(t,{direction:"recvonly",streams:i});this.transceiverMap.set(e,s)}catch(t){e(t)}})}updateBandwidthRestriction(t,i){if(this.mode===te)throw Js.error("Viewer attempting to update bitrate, this is not allowed"),new m("It is not possible for a viewer to update the bitrate.");return Js.info("Updating bandwidth restriction, bitrate value: ",i),Js.debug("SDP value: ",t),Ks.setVideoBitrate(t,i)}async updateBitrate(t){if(void 0===t&&(t=0),this.mode===te)throw Js.error("Viewer attempting to update bitrate, this is not allowed"),new m("It is not possible for a viewer to update the bitrate.");if(!this.peer)throw Js.error("Cannot update bitrate. No peer found."),new m("Cannot update bitrate. No peer found.");Js.info("Updating bitrate to value: ",t),this.sessionDescription=await this.peer.createOffer(),await this.peer.setLocalDescription(this.sessionDescription);const i=this.updateBandwidthRestriction(this.peer.remoteDescription.sdp,t);await this.setRTCRemoteSDP(i),Js.info("Bitrate restrictions updated: ","".concat(t>0?t:"unlimited"," kbps"))}getRTCPeerStatus(){if(Js.info("Getting RTC peer status"),!this.peer)return null;const t=de(this.peer);return Js.info("RTC peer status getted, value: ",t),t}replaceTrack(t){if(!this.peer)return void Js.error("Could not change track if there is not an active connection.");const i=this.peer.getSenders().find(i=>i.track.kind===t.kind);i?i.replaceTrack(t):Js.error("There is no ".concat(t.kind," track in active broadcast."))}static getCapabilities(t){const i=new Gs,s=RTCRtpSender.getCapabilities(t);if(s){const e={};let n=new RegExp("^video/(".concat(w.values(js).join("|"),")x?$"),"i");"audio"===t&&(n=new RegExp("^audio/(".concat(w.values(Qs).join("|"),")$"),"i"),i.isChrome()&&(e.multiopus={mimeType:"audio/multiopus",channels:6}));for(const t of s.codecs){const i=t.mimeType.match(n);if(i){const s=i[1].toLowerCase();if(e[s]=y(l({},e[s]),{mimeType:t.mimeType}),t.scalabilityModes){let i=e[s].scalabilityModes||[];i=[...i,...t.scalabilityModes],e[s].scalabilityModes=[...new Set(i)]}t.channels&&(e[s].channels=t.channels)}}s.codecs=w.keys(e).map(t=>l({codec:t},e[t]))}return s}getTracks(){var t,i;return null==(i=null==(t=this.peer)?void 0:t.getSenders())?void 0:i.map(t=>t.track)}initStats(t){this.peerConnectionStats?Js.warn("PeerConnection.initStats() has already been called. Automatic initialization occurs via View.connect(), Publish.connect() or this.createRTCPeer(). See options"):this.peer?(this.peerConnectionStats=new Bt(this.peer,t),It(this.peerConnectionStats,this,[Dt])):Js.warn("Cannot init peer stats: RTCPeerConnection not initialized")}stopStats(){var t;null==(t=this.peerConnectionStats)||t.stop(),this.peerConnectionStats=null}constructor(){super(),this.mode=null,this.sessionDescription=null,this.peer=null,this.peerConnectionStats=null,this.transceiverMap=new Map}}const ne=t=>(null==t?void 0:t.getAudioTracks().length)<=1&&(null==t?void 0:t.getVideoTracks().length)<=1,re=t=>{if(!t)return null;if(t instanceof MediaStream&&ne(t))return t;if(!(t instanceof MediaStream)){Js.info("Creating MediaStream to add received tracks.");const i=new MediaStream;for(const s of t)i.addTrack(s);if(ne(i))return i}throw Js.error("MediaStream must have 1 audio track and 1 video track, or at least one of them."),new m("MediaStream must have 1 audio track and 1 video track, or at least one of them.")},he=(t,i)=>{const s=new RTCPeerConnection(i);return ae(t,s),s};async function oe(t){return new Promise(i=>u(i,t))}const ae=(t,i)=>{i.ontrack=async i=>{Js.info("New track from peer."),Js.debug("Track event value: ",i);const s=t.transceiverMap.get(i.transceiver);if(s){for(;!i.transceiver.mid;)await oe(100);s(i.transceiver),t.transceiverMap.delete(i.transceiver)}u(()=>{t.emit(ie.track,i)},0)},i.connectionState?i.onconnectionstatechange=s=>{Js.info("Peer connection state change: ",i.connectionState),t.emit(ie.connectionStateChange,i.connectionState)}:i.oniceconnectionstatechange=s=>{Js.info("Peer ICE connection state change: ",i.iceConnectionState),t.emit(ie.connectionStateChange,i.iceConnectionState)},i.onnegotiationneeded=async t=>{if(!i.remoteDescription)return;Js.info("Peer onnegotiationneeded, updating local description");const s=await i.createOffer();Js.info("Peer onnegotiationneeded, got local offer",s.sdp),s.sdp=Ks.updateMissingVideoExtensions(s.sdp,i.remoteDescription.sdp),await i.setLocalDescription(s);const e=Ks.renegotiate(s.sdp,i.remoteDescription.sdp);Js.info("Peer onnegotiationneeded, updating remote description",e),await i.setRemoteDescription({type:"answer",sdp:e}),Js.info("Peer onnegotiationneeded, renegotiation done")}},ue=(t,i,s)=>{Js.info("Adding mediaStream tracks to RTCPeerConnection");for(const e of i.getTracks()){const n={streams:[i]};"audio"===e.kind&&(n.direction=s.disableAudio?"inactive":"sendonly"),"video"===e.kind&&(n.direction=s.disableVideo?"inactive":"sendonly",s.scalabilityMode&&(new Gs).isChrome()?(Js.debug("Video track with scalability mode: ".concat(s.scalabilityMode,".")),n.sendEncodings=[{scalabilityMode:s.scalabilityMode}]):s.scalabilityMode&&Js.warn("SVC is only supported in Google Chrome")),t.addTransceiver(e,n),Js.info("Track '".concat(e.label,"' added: "),"id: ".concat(e.id),"kind: ".concat(e.kind))}},ce=(t,i)=>{const s=new Gs;if(!i.disableVideo){const i=t.addTransceiver("video",{direction:"recvonly"});s.isOpera()&&i.setCodecPreferences(RTCRtpReceiver.getCapabilities("video").codecs.filter(t=>"video/H264"!==t.mimeType||t.sdpFmtpLine.includes("profile-level-id=4")))}i.disableAudio||t.addTransceiver("audio",{direction:"recvonly"});for(let s=0;s<i.multiplexedAudioTracks;s++)t.addTransceiver("audio",{direction:"recvonly"})},de=t=>{var i;const s=null!=(i=t.connectionState)?i:t.iceConnectionState;switch(s){case"checking":return"connecting";case"completed":return"connected";default:return s}};var le={};w.defineProperty(le,"__esModule",{value:!0}),le.TypedEmitter=Tt.EventEmitter;const{TypedEmitter:fe}=le;class ve extends fe{cmd(t,i){return this.tm.cmd(t,i,this.namespace)}event(t,i){return this.tm.event(t,i,this.namespace)}close(){return this.tm.namespaces.delete(this.namespace)}constructor(t,i){super(),this.namespace=t,this.tm=i}}const _e=T(class extends fe{bv(t){this.transport.send(JSON.stringify(t))}cmd(t,i,s){return void 0===s&&(s=void 0),new Promise((e,n)=>{if(!t||0===t.length)throw new m("Bad command name");const r={type:"cmd",transId:this.maxId++,name:t,data:i};s&&(r.namespace=s),this.transactions.set(r.transId,y(l({},r),{resolve:e,reject:n}));try{this.bv(r)}catch(t){throw this.transactions.delete(r.transId),t}})}event(t,i,s){if(void 0===s&&(s=void 0),!t||0===t.length)throw new m("Bad event name");const e={type:"event",name:t,data:i};s&&(e.namespace=s),this.bv(e)}namespace(t){let i=this.namespaces.get(t);return i||(i=new ve(t,this),this.namespaces.set(t,i),i)}close(){for(const t of this.namespaces.values())t.close();this.transport.removeListener?this.transport.removeListener("message",this.listener):this.transport.removeEventListener("message",this.listener)}constructor(t){super(),this.maxId=0,this.namespaces=new Map,this.transactions=new Map,this.transport=t,this.listener=t=>{let i;try{i=JSON.parse(t.utf8Data||t.data||t)}catch(t){return}switch(i.type){case"cmd":const{transId:t}=i,e={name:i.name,data:i.data,namespace:i.namespace,accept:i=>{this.bv({type:"response",transId:t,data:i})},reject:i=>{this.bv({type:"error",transId:t,data:i})}};if(e.namespace){const t=this.namespaces.get(e.namespace);t?t.emit("cmd",e):this.emit("cmd",e)}else this.emit("cmd",e);break;case"response":{const t=this.transactions.get(i.transId);if(!t)return;this.transactions.delete(i.transId),t.resolve(i.data);break}case"error":{const t=this.transactions.get(i.transId);if(!t)return;this.transactions.delete(i.transId),t.reject(i.data);break}case"event":const n={name:i.name,data:i.data,namespace:i.namespace};if(n.namespace){var s=this.namespaces.get(n.namespace);s?s.emit("event",n):this.emit("event",n)}else this.emit("event",n)}},this.transport.addListener?this.transport.addListener("message",this.listener):this.transport.addEventListener("message",this.listener)}}),ge=ot.get("Signaling"),me="wsConnectionSuccess",pe="wsConnectionError",we="wsConnectionClose",ye="broadcastEvent";class be extends kt{async connect(){var t;return ge.info("Connecting to Signaling Server"),this.transactionManager&&(null==(t=this.webSocket)?void 0:t.readyState)===WebSocket.OPEN?(ge.info("Connected to server: ",this.webSocket.url),ge.debug("WebSocket value: ",{url:this.webSocket.url,protocol:this.webSocket.protocol,readyState:this.webSocket.readyState,binaryType:this.webSocket.binaryType,extensions:this.webSocket.extensions}),this.emit(me,{ws:this.webSocket,tm:this.transactionManager}),this.webSocket):new Promise((t,i)=>{this.webSocket=new WebSocket(this.wsUrl),this.transactionManager=new _e(this.webSocket),this.webSocket.onopen=()=>{ge.info("WebSocket opened"),this.transactionManager.on("event",t=>{this.emit(ye,t)}),ge.info("Connected to server: ",this.webSocket.url),ge.debug("WebSocket value: ",{url:this.webSocket.url,protocol:this.webSocket.protocol,readyState:this.webSocket.readyState,binaryType:this.webSocket.binaryType,extensions:this.webSocket.extensions}),this.emit(me,{ws:this.webSocket,tm:this.transactionManager}),t(this.webSocket)},this.webSocket.onerror=()=>{ge.error("WebSocket not connected: ",this.webSocket.url),this.emit(pe,this.webSocket.url),i(this.webSocket.url)},this.webSocket.onclose=()=>{this.webSocket=null,this.transactionManager=null,ge.info("Connection closed with Signaling Server."),this.emit(we)}})}close(){var t;ge.info("Closing connection with Signaling Server."),null==(t=this.webSocket)||t.close()}async subscribe(t,i,s,e){var n,r,h,o;void 0===s&&(s=null),void 0===e&&(e=null),ge.info("Starting subscription to streamName: ",this.streamName),ge.debug("Subcription local description: ",t);const a=Ae(i,s,e);let u={sdp:t=Ks.adaptCodecName(t,"AV1X",js.AV1),streamId:this.streamName,pinnedSourceId:a.pinnedSourceId,excludedSourceIds:a.excludedSourceIds,events:["active","inactive","layers","viewercount","vad","updated","migrate","stopped"]};a.vad&&(u.vad=!0),Array.isArray(a.events)&&(u.events=a.events),a.forcePlayoutDelay&&(u.forcePlayoutDelay=a.forcePlayoutDelay),a.layer&&(u.layer=a.layer),a.forceSmooth&&(u.forceSmooth=i.forceSmooth),a.customKeys&&(u=l(l({},u),a.customKeys));try{if(a.disableVideo&&a.disableAudio)throw new m("Not attempting to connect as video and audio are disabled");await this.connect(),ge.info("Sending view command",u);const t=await this.transactionManager.cmd("view",u),i=null==(o=null==(h=null==(r=null==(n=RTCRtpReceiver.getCapabilities)?void 0:n.call(RTCRtpReceiver,"video"))?void 0:r.codecs)?void 0:h.find)?void 0:o.call(h,t=>"video/AV1X"===t.mimeType);return t.sdp=i?Ks.adaptCodecName(t.sdp,js.AV1,"AV1X"):t.sdp,ge.info("Command sent, subscriberId: ",t.subscriberId),ge.debug("Command result: ",t),this.serverId=t.subscriberId,this.clusterId=t.clusterId,this.streamViewId=t.streamViewId,U(this.streamName),G(this.serverId),X(t.streamViewId),Y(this.clusterId),t.sdp}catch(t){throw ge.error("Error sending view command, error: ",t),t}}async publish(t,i,s,e){var n,r,h,o,a,u,c,d;void 0===s&&(s=null),void 0===e&&(e=null);const l=Se(i,s,e);ge.info("Starting publishing to streamName: ".concat(this.streamName,", codec: ").concat(l.codec)),ge.debug("Publishing local description: ",t);const f=null!=(o=null==(h=null==(r=null==(n=ee.getCapabilities)?void 0:n.call(ee,"video"))?void 0:r.codecs)?void 0:h.map(t=>t.codec))?o:[],v=w.values(js);if(-1===v.indexOf(l.codec))throw ge.error("Invalid codec ".concat(l.codec,". Possible values are: "),v),new m("Invalid codec ".concat(l.codec,". Possible values are: ").concat(v));if(f.length>0&&-1===f.indexOf(l.codec))throw ge.error("Unsupported codec ".concat(l.codec,". Possible values are: "),f),new m("Unsupported codec ".concat(l.codec,". Possible values are: ").concat(f));l.codec===js.AV1&&(t=Ks.adaptCodecName(t,"AV1X",js.AV1));const _={name:this.streamName,sdp:t,codec:l.codec,sourceId:l.sourceId};if(l.priority){if(!(Number.isInteger(l.priority)&&l.priority>=-2147483648&&l.priority<=2147483647))throw new m("Invalid value for priority option. It should be a decimal integer between the range [-2^31, +2^31 - 1]");_.priority=l.priority}null!==l.record&&(_.record=l.record),Array.isArray(l.events)&&(_.events=l.events);try{if(l.disableVideo&&l.disableAudio)throw new m("Not attempting to connect as video and audio are disabled");await this.connect(),ge.info("Sending publish command");const t=await this.transactionManager.cmd("publish",_);if(l.codec===js.AV1){const i=null==(d=null==(c=null==(u=null==(a=RTCRtpSender.getCapabilities)?void 0:a.call(RTCRtpSender,"video"))?void 0:u.codecs)?void 0:c.find)?void 0:d.call(c,t=>"video/AV1X"===t.mimeType);t.sdp=i?Ks.adaptCodecName(t.sdp,js.AV1,"AV1X"):t.sdp}return ge.info("Command sent, publisherId: ",t.publisherId),ge.debug("Command result: ",t),this.serverId=t.publisherId,this.clusterId=t.clusterId,U(this.streamName),G(this.serverId),Z(t.feedId),Y(this.clusterId),t.sdp}catch(t){throw ge.error("Error sending publish command, error: ",t),t}}async cmd(t,i){return ge.info("Sending cmd: ".concat(t)),this.transactionManager.cmd(t,i)}constructor(t={streamName:null,url:"ws://localhost:8080/"}){super(),this.streamName=t.streamName,this.wsUrl=t.url,this.webSocket=null,this.transactionManager=null,this.serverId=null,this.clusterId=null,this.streamViewId=null}}const Ae=(t,i,s)=>{let e="object"==typeof t?t:{};return 0===w.keys(e).length&&(e={vad:t,pinnedSourceId:i,excludedSourceIds:s}),e},Se=(t,i,s)=>{let e="object"==typeof t?t:{};if(0===w.keys(e).length){e={codec:null!=t?t:js.H264,record:i,sourceId:s}}return e};class Te extends m{constructor(t,i){super(t),this.name="FetchError",this.status=i}}const ke=ot.get("Director"),Ee="WebRtc";let Re="",xe="https://director.millicast.com";const Ie={setEndpoint:t=>{xe=t.replace(/\/$/,"")},getEndpoint:()=>xe,setLiveDomain:t=>{Re=t.replace(/\/$/,"")},getLiveDomain:()=>Re,getPublisher:async(t,i,s)=>{void 0===i&&(i=null),void 0===s&&(s=Ee);const e=Pe(t,i,s);ke.info("Getting publisher connection path for stream name: ",e.streamName);const n={streamName:e.streamName,streamType:e.streamType},r={"Content-Type":"application/json",Authorization:"Bearer ".concat(e.token)},h="".concat(Ie.getEndpoint(),"/api/director/publish");try{const t=await fetch(h,{method:"POST",headers:r,body:JSON.stringify(n)});let i=await t.json();if("fail"===i.status)throw new Te(i.data.message,t.status);return i=Ne(i),ke.debug("Getting publisher response: ",i),W(i.data.streamAccountId),i.data}catch(t){throw ke.error("Error while getting publisher connection path. ",t),t}},getSubscriber:async(t,i,s)=>{void 0===i&&(i=null),void 0===s&&(s=null);const e=Ce(t,i,s);W(e.streamAccountId),ke.info("Getting subscriber connection data for stream name: ".concat(e.streamName," and account id: ").concat(e.streamAccountId));const n={streamAccountId:e.streamAccountId,streamName:e.streamName};let r={"Content-Type":"application/json"};e.subscriberToken&&(r=y(l({},r),{Authorization:"Bearer ".concat(e.subscriberToken)}));const h="".concat(Ie.getEndpoint(),"/api/director/subscribe");try{const t=await fetch(h,{method:"POST",headers:r,body:JSON.stringify(n)});let i=await t.json();if("fail"===i.status)throw new Te(i.data.message,t.status);return i=Ne(i),ke.debug("Getting subscriber response: ",i),e.subscriberToken&&(i.data.subscriberToken=e.subscriberToken),i.data}catch(t){throw ke.error("Error while getting subscriber connection path. ",t),t}}},Pe=(t,i,s)=>{let e="object"==typeof t?t:{};return 0===w.keys(e).length&&(e={token:t,streamName:i,streamType:s}),e},Ce=(t,i,s)=>{let e="object"==typeof t?t:{};return 0===w.keys(e).length&&(e={streamName:t,streamAccountId:i,subscriberToken:s}),e},Ne=t=>{if(Ie.getLiveDomain()){const i=/\/\/(.*?)\//,s=t.data.urls.map(t=>{const s=i.exec(t);return t.replace(s[1],Ie.getLiveDomain())});t.data.urls=s}if(t.data.drmObject){const i=t.data.drmObject.playReadyUrl;i&&(t.data.drmObject.playReadyUrl="".concat(Ie.getEndpoint()).concat(i));const s=t.data.drmObject.widevineUrl;s&&(t.data.drmObject.widevineUrl="".concat(Ie.getEndpoint()).concat(s));const e=t.data.drmObject.fairPlayUrl;e&&(t.data.drmObject.fairPlayUrl="".concat(Ie.getEndpoint()).concat(e));const n=t.data.drmObject.fairPlayCertUrl;n&&(t.data.drmObject.fairPlayCertUrl="".concat(Ie.getEndpoint()).concat(n))}return t};function De(t){this.message=t}De.prototype=new m,De.prototype.name="InvalidCharacterError";var Be=typeof s<"u"&&s.atob&&s.atob.bind(s)||function(t){var i=String(t).replace(/=+$/,"");if(i.length%4==1)throw new De("'atob' failed: The string to be decoded is not correctly encoded.");for(var s,e,n=0,r=0,h="";e=i.charAt(r++);~e&&(s=n%4?64*s+e:e,n++%4)?h+=String.fromCharCode(255&s>>(-2*n&6)):0)e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e);return h};function Me(t){this.message=t}function Le(t,i){if("string"!=typeof t)throw new Me("Invalid token specified");var s=!0===(i=i||{}).header?0:1;try{return JSON.parse(function(t){var i=t.replace(/-/g,"+").replace(/_/g,"/");switch(i.length%4){case 0:break;case 2:i+="==";break;case 3:i+="=";break;default:throw"Illegal base64url string!"}try{return decodeURIComponent(Be(i).replace(/(.)/g,function(t,i){var s=i.charCodeAt(0).toString(16).toUpperCase();return s.length<2&&(s="0"+s),"%"+s}))}catch(t){return Be(i)}}(t.split(".")[s]))}catch(t){throw new Me("Invalid token specified: "+t.message)}}Me.prototype=new m,Me.prototype.name="InvalidTokenError";var Oe={exports:{}};!function(t,i){!function(s){if(null!=i&&"number"!=typeof i.nodeType)t.exports=s();else{var e=s(),n=typeof self<"u"?self:$.global;"function"!=typeof n.btoa&&(n.btoa=e.btoa),"function"!=typeof n.atob&&(n.atob=e.atob)}}(function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function i(t){this.message=t}return i.prototype=new m,i.prototype.name="InvalidCharacterError",{btoa:function(s){for(var e,n,r,h,o=String(s),a=0,u="";a<o.length;){if(e=o.charCodeAt(a++),n=o.charCodeAt(a++),r=o.charCodeAt(a++),e>255||n>255||r>255)throw new i("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");u+=t.charAt((h=e<<16|n<<8|r)>>18&63)+t.charAt(h>>12&63)+t.charAt(h>>6&63)+t.charAt(63&h)}switch(o.length%3){case 0:return u;case 1:return u.slice(0,-2)+"==";case 2:return u.slice(0,-1)+"="}},atob:function(s){var e=String(s).replace(/[=]+$/,"");if(e.length%4==1)throw new i("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,r,h=0,o=0,a="";r=e.charAt(o++);~r&&(n=h%4?64*n+r:r,h++%4)?a+=String.fromCharCode(255&n>>(-2*h&6)):0)r=t.indexOf(r);return a}}})}(Oe,Oe.exports);var Fe=Oe.exports;function Ve(t){var i,s,e;return{lang:null!=(i=null==t?void 0:t.lang)?i:void 0,message:null==t?void 0:t.message,abortEarly:null!=(s=null==t?void 0:t.abortEarly)?s:void 0,abortPipeEarly:null!=(e=null==t?void 0:t.abortPipeEarly)?e:void 0}}function We(t){var i,s,e;const n=typeof t;return"string"===n?'"'.concat(t,'"'):"number"===n||"bigint"===n||"boolean"===n?"".concat(t):"object"===n||"function"===n?null!=(e=t&&(null==(s=null==(i=w.getPrototypeOf(t))?void 0:i.constructor)?void 0:s.name))?e:"null":n}function Ue(t,i,s,e,n){var r,h,o,a,u,c,d,l;const f=n&&"input"in n?n.input:s.value,v=null!=(h=null!=(r=null==n?void 0:n.expected)?r:t.expects)?h:null,_=null!=(o=null==n?void 0:n.received)?o:We(f),g={kind:t.kind,type:t.type,input:f,expected:v,received:_,message:"Invalid ".concat(i,": ").concat(v?"Expected ".concat(v," but r"):"R","eceived ").concat(_),requirement:t.requirement,path:null==n?void 0:n.path,issues:null==n?void 0:n.issues,lang:e.lang,abortEarly:e.abortEarly,abortPipeEarly:e.abortPipeEarly},m="schema"===t.kind,p=null!=(l=null!=(d=null!=(c=null!=(u=null!=(a=null==n?void 0:n.message)?a:t.message)?u:function(t,i){var s;return null==(s=void 0)?void 0:s.get(i)}(t.reference,g.lang))?c:m?void g.lang:null)?d:e.message)?l:void g.lang;void 0!==p&&(g.message="function"==typeof p?p(g):p),m&&(s.typed=!1),s.issues?s.issues.push(g):s.issues=[g]}function Ge(t){return{version:1,vendor:"valibot",validate:i=>t["~run"]({value:i},Ve())}}function Xe(t,i){return w.hasOwn(t,i)&&"__proto__"!==i&&"prototype"!==i&&"constructor"!==i}function Ze(t,i){var s;const e=[...new Set(t)];return e.length>1?"(".concat(e.join(" ".concat(i," ")),")"):null!=(s=e[0])?s:"never"}var He=class extends m{constructor(t){super(t[0].message),this.name="ValiError",this.issues=t}};function ze(t,i,s){return"function"==typeof t.fallback?t.fallback(i,s):t.fallback}function Ye(t,i,s){return"function"==typeof t.default?t.default(i,s):t.default}function Ke(t,i){return{kind:"schema",type:"array",reference:Ke,expects:"Array",async:!1,item:t,message:i,get"~standard"(){return Ge(this)},"~run"(t,i){var s;const e=t.value;if(Array.isArray(e)){t.typed=!0,t.value=[];for(let n=0;n<e.length;n++){const r=e[n],h=this.item["~run"]({value:r},i);if(h.issues){const o={type:"array",origin:"value",input:e,key:n,value:r};for(const i of h.issues)i.path?i.path.unshift(o):i.path=[o],null==(s=t.issues)||s.push(i);if(t.issues||(t.issues=h.issues),i.abortEarly){t.typed=!1;break}}h.typed||(t.typed=!1),t.value.push(h.value)}}else Ue(this,"type",t,i);return t}}}function qe(t){return{kind:"schema",type:"boolean",reference:qe,expects:"boolean",async:!1,message:t,get"~standard"(){return Ge(this)},"~run"(t,i){return"boolean"==typeof t.value?t.typed=!0:Ue(this,"type",t,i),t}}}function je(t,i){return{kind:"schema",type:"loose_object",reference:je,expects:"Object",async:!1,entries:t,message:i,get"~standard"(){return Ge(this)},"~run"(t,i){var s;const e=t.value;if(e&&"object"==typeof e){t.typed=!0,t.value={};for(const n in this.entries){const r=this.entries[n];if(n in e||("exact_optional"===r.type||"optional"===r.type||"nullish"===r.type)&&void 0!==r.default){const h=n in e?e[n]:Ye(r),o=r["~run"]({value:h},i);if(o.issues){const r={type:"object",origin:"value",input:e,key:n,value:h};for(const i of o.issues)i.path?i.path.unshift(r):i.path=[r],null==(s=t.issues)||s.push(i);if(t.issues||(t.issues=o.issues),i.abortEarly){t.typed=!1;break}}o.typed||(t.typed=!1),t.value[n]=o.value}else if(void 0!==r.fallback)t.value[n]=ze(r);else if("exact_optional"!==r.type&&"optional"!==r.type&&"nullish"!==r.type&&(Ue(this,"key",t,i,{input:void 0,expected:'"'.concat(n,'"'),path:[{type:"object",origin:"key",input:e,key:n,value:e[n]}]}),i.abortEarly))break}if(!t.issues||!i.abortEarly)for(const i in e)Xe(e,i)&&!(i in this.entries)&&(t.value[i]=e[i])}else Ue(this,"type",t,i);return t}}}function Qe(t,i){return{kind:"schema",type:"nullish",reference:Qe,expects:"(".concat(t.expects," | null | undefined)"),async:!1,wrapped:t,default:i,get"~standard"(){return Ge(this)},"~run"(t,i){return null!==t.value&&void 0!==t.value||(void 0!==this.default&&(t.value=Ye(this,t,i)),null!==t.value&&void 0!==t.value)?this.wrapped["~run"](t,i):(t.typed=!0,t)}}}function Je(t){return{kind:"schema",type:"number",reference:Je,expects:"number",async:!1,message:t,get"~standard"(){return Ge(this)},"~run"(t,i){return"number"!=typeof t.value||S(t.value)?Ue(this,"type",t,i):t.typed=!0,t}}}function $e(t,i){return{kind:"schema",type:"picklist",reference:$e,expects:Ze(t.map(We),"|"),async:!1,options:t,message:i,get"~standard"(){return Ge(this)},"~run"(t,i){return this.options.includes(t.value)?t.typed=!0:Ue(this,"type",t,i),t}}}function tn(t){return{kind:"schema",type:"string",reference:tn,expects:"string",async:!1,message:t,get"~standard"(){return Ge(this)},"~run"(t,i){return"string"==typeof t.value?t.typed=!0:Ue(this,"type",t,i),t}}}function sn(t){let i;if(t)for(const s of t)i?i.push(...s.issues):i=s.issues;return i}function en(t,i){return{kind:"schema",type:"union",reference:en,expects:Ze(t.map(t=>t.expects),"|"),async:!1,options:t,message:i,get"~standard"(){return Ge(this)},"~run"(t,i){let s,e,n;for(const r of this.options){const h=r["~run"]({value:t.value},i);if(h.typed){if(!h.issues){s=h;break}e?e.push(h):e=[h]}else n?n.push(h):n=[h]}if(s)return s;if(e){if(1===e.length)return e[0];Ue(this,"type",t,i,{issues:sn(e)}),t.typed=!0}else{if(1===(null==n?void 0:n.length))return n[0];Ue(this,"type",t,i,{issues:sn(n)})}return t}}}function nn(){return{kind:"schema",type:"unknown",reference:nn,expects:"unknown",async:!1,get"~standard"(){return Ge(this)},"~run":t=>(t.typed=!0,t)}}let rn;class hn extends kt{getRTCPeerConnection(){return this.webRTCPeer?this.webRTCPeer.getRTCPeer():null}stop(){var t;rn.info("Stopping"),this.webRTCPeer.closeRTCPeer(),null==(t=this.signaling)||t.close(),this.signaling=null,this.stopReconnection=!0,this.webRTCPeer=new ee}isActive(){const t=this.webRTCPeer.getRTCPeerStatus();return rn.info("Broadcast status: ",t||"not_established"),"connected"===t}setReconnect(){this.signaling.on("migrate",()=>this.replaceConnection()),this.autoReconnect&&(this.signaling.on(pe,()=>{(this.firstReconnection||!this.alreadyDisconnected)&&(this.firstReconnection=!1,this.reconnect({error:new m("Signaling error: wsConnectionError")}))}),this.webRTCPeer.on(ie.connectionStateChange,t=>{z(t),"connected"===t&&H(new Date),("failed"===t||"disconnected"===t&&this.alreadyDisconnected)&&this.firstReconnection?(this.firstReconnection=!1,this.reconnect({error:new m("Connection state change: RTCPeerConnectionState disconnected")})):"disconnected"===t?(this.alreadyDisconnected=!0,u(()=>this.reconnect({error:new m("Connection state change: RTCPeerConnectionState disconnected")}),1500)):this.alreadyDisconnected=!1}))}async reconnect(t){try{rn.info("Attempting to reconnect..."),!this.isActive()&&!this.stopReconnection&&!this.isReconnecting&&(this.stop(),this.emit("reconnect",{timeout:on(this.reconnectionInterval),error:null!=t&&t.error?null==t?void 0:t.error:new m("Attempting to reconnect")}),this.isReconnecting=!0,await this.connect(this.options),this.alreadyDisconnected=!1,this.reconnectionInterval=1e3,this.firstReconnection=!0,this.isReconnecting=!1)}catch(t){this.isReconnecting=!1,this.reconnectionInterval=on(this.reconnectionInterval),rn.error("Reconnection failed, retrying in ".concat(this.reconnectionInterval,"ms. "),t),u(()=>this.reconnect({error:t}),this.reconnectionInterval)}}constructor(t,i,s,e){if(super(),rn=s,!i)throw rn.error("Token generator is required to construct this module."),new m("Token generator is required to construct this module.");this.webRTCPeer=new ee,this.signaling=null,this.autoReconnect=e,this.reconnectionInterval=1e3,this.alreadyDisconnected=!1,this.firstReconnection=!0,this.stopReconnection=!1,this.isReconnecting=!1,this.tokenGenerator=i,this.options=null}}const on=t=>t<32e3?2*t:t,an=s.RTCRtpSender&&!!RTCRtpSender.prototype.createEncodedStreams&&s.RTCRtpReceiver&&!!RTCRtpReceiver.prototype.createEncodedStreams,un="RTCRtpScriptTransform"in s,cn="KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3ZhciBXPXR5cGVvZiBnbG9iYWxUaGlzPCJ1Ij9nbG9iYWxUaGlzOnR5cGVvZiB3aW5kb3c8InUiP3dpbmRvdzp0eXBlb2YgZ2xvYmFsPCJ1Ij9nbG9iYWw6dHlwZW9mIHNlbGY8InUiP3NlbGY6e307ZnVuY3Rpb24geih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlJiZPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCwiZGVmYXVsdCIpP3QuZGVmYXVsdDp0fXZhciBCPXtleHBvcnRzOnt9fTsvKiEKICoganMtbG9nZ2VyIC0gaHR0cDovL2dpdGh1Yi5jb20vam9ubnlyZWV2ZXMvanMtbG9nZ2VyCiAqIEpvbm55IFJlZXZlcywgaHR0cDovL2pvbm55cmVldmVzLmNvLnVrLwogKiBqcy1sb2dnZXIgbWF5IGJlIGZyZWVseSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuCiAqLyhmdW5jdGlvbih0KXsoZnVuY3Rpb24obil7dmFyIGU9e307ZS5WRVJTSU9OPSIxLjYuMSI7dmFyIGkscj17fSxvPWZ1bmN0aW9uKHMsdSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHUuYXBwbHkocyxhcmd1bWVudHMpfX0sYT1mdW5jdGlvbigpe3ZhciBzPWFyZ3VtZW50cyx1PXNbMF0saCxjO2ZvcihjPTE7YzxzLmxlbmd0aDtjKyspZm9yKGggaW4gc1tjXSkhKGggaW4gdSkmJnNbY10uaGFzT3duUHJvcGVydHkoaCkmJih1W2hdPXNbY11baF0pO3JldHVybiB1fSxkPWZ1bmN0aW9uKHMsdSl7cmV0dXJue3ZhbHVlOnMsbmFtZTp1fX07ZS5UUkFDRT1kKDEsIlRSQUNFIiksZS5ERUJVRz1kKDIsIkRFQlVHIiksZS5JTkZPPWQoMywiSU5GTyIpLGUuVElNRT1kKDQsIlRJTUUiKSxlLldBUk49ZCg1LCJXQVJOIiksZS5FUlJPUj1kKDgsIkVSUk9SIiksZS5PRkY9ZCg5OSwiT0ZGIik7dmFyIGw9ZnVuY3Rpb24ocyl7dGhpcy5jb250ZXh0PXMsdGhpcy5zZXRMZXZlbChzLmZpbHRlckxldmVsKSx0aGlzLmxvZz10aGlzLmluZm99O2wucHJvdG90eXBlPXtzZXRMZXZlbDpmdW5jdGlvbihzKXtzJiYidmFsdWUiaW4gcyYmKHRoaXMuY29udGV4dC5maWx0ZXJMZXZlbD1zKX0sZ2V0TGV2ZWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZXh0LmZpbHRlckxldmVsfSxlbmFibGVkRm9yOmZ1bmN0aW9uKHMpe3ZhciB1PXRoaXMuY29udGV4dC5maWx0ZXJMZXZlbDtyZXR1cm4gcy52YWx1ZT49dS52YWx1ZX0sdHJhY2U6ZnVuY3Rpb24oKXt0aGlzLmludm9rZShlLlRSQUNFLGFyZ3VtZW50cyl9LGRlYnVnOmZ1bmN0aW9uKCl7dGhpcy5pbnZva2UoZS5ERUJVRyxhcmd1bWVudHMpfSxpbmZvOmZ1bmN0aW9uKCl7dGhpcy5pbnZva2UoZS5JTkZPLGFyZ3VtZW50cyl9LHdhcm46ZnVuY3Rpb24oKXt0aGlzLmludm9rZShlLldBUk4sYXJndW1lbnRzKX0sZXJyb3I6ZnVuY3Rpb24oKXt0aGlzLmludm9rZShlLkVSUk9SLGFyZ3VtZW50cyl9LHRpbWU6ZnVuY3Rpb24ocyl7dHlwZW9mIHM9PSJzdHJpbmciJiZzLmxlbmd0aD4wJiZ0aGlzLmludm9rZShlLlRJTUUsW3MsInN0YXJ0Il0pfSx0aW1lRW5kOmZ1bmN0aW9uKHMpe3R5cGVvZiBzPT0ic3RyaW5nIiYmcy5sZW5ndGg+MCYmdGhpcy5pbnZva2UoZS5USU1FLFtzLCJlbmQiXSl9LGludm9rZTpmdW5jdGlvbihzLHUpe2kmJnRoaXMuZW5hYmxlZEZvcihzKSYmaSh1LGEoe2xldmVsOnN9LHRoaXMuY29udGV4dCkpfX07dmFyIGY9bmV3IGwoe2ZpbHRlckxldmVsOmUuT0ZGfSk7KGZ1bmN0aW9uKCl7dmFyIHM9ZTtzLmVuYWJsZWRGb3I9byhmLGYuZW5hYmxlZEZvcikscy50cmFjZT1vKGYsZi50cmFjZSkscy5kZWJ1Zz1vKGYsZi5kZWJ1Zykscy50aW1lPW8oZixmLnRpbWUpLHMudGltZUVuZD1vKGYsZi50aW1lRW5kKSxzLmluZm89byhmLGYuaW5mbykscy53YXJuPW8oZixmLndhcm4pLHMuZXJyb3I9byhmLGYuZXJyb3IpLHMubG9nPXMuaW5mb30pKCksZS5zZXRIYW5kbGVyPWZ1bmN0aW9uKHMpe2k9c30sZS5zZXRMZXZlbD1mdW5jdGlvbihzKXtmLnNldExldmVsKHMpO2Zvcih2YXIgdSBpbiByKXIuaGFzT3duUHJvcGVydHkodSkmJnJbdV0uc2V0TGV2ZWwocyl9LGUuZ2V0TGV2ZWw9ZnVuY3Rpb24oKXtyZXR1cm4gZi5nZXRMZXZlbCgpfSxlLmdldD1mdW5jdGlvbihzKXtyZXR1cm4gcltzXXx8KHJbc109bmV3IGwoYSh7bmFtZTpzfSxmLmNvbnRleHQpKSl9LGUuY3JlYXRlRGVmYXVsdEhhbmRsZXI9ZnVuY3Rpb24ocyl7cz1zfHx7fSxzLmZvcm1hdHRlcj1zLmZvcm1hdHRlcnx8ZnVuY3Rpb24ocCxfKXtfLm5hbWUmJnAudW5zaGlmdCgiWyIrXy5uYW1lKyJdIil9O3ZhciB1PXt9LGg9ZnVuY3Rpb24oYyxwKXtGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHkuY2FsbChjLGNvbnNvbGUscCl9O3JldHVybiB0eXBlb2YgY29uc29sZT4idSI/ZnVuY3Rpb24oKXt9OmZ1bmN0aW9uKGMscCl7Yz1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChjKTt2YXIgXz1jb25zb2xlLmxvZyxnO3AubGV2ZWw9PT1lLlRJTUU/KGc9KHAubmFtZT8iWyIrcC5uYW1lKyJdICI6IiIpK2NbMF0sY1sxXT09PSJzdGFydCI/Y29uc29sZS50aW1lP2NvbnNvbGUudGltZShnKTp1W2ddPW5ldyBEYXRlKCkuZ2V0VGltZSgpOmNvbnNvbGUudGltZUVuZD9jb25zb2xlLnRpbWVFbmQoZyk6aChfLFtnKyI6ICIrKG5ldyBEYXRlKCkuZ2V0VGltZSgpLXVbZ10pKyJtcyJdKSk6KHAubGV2ZWw9PT1lLldBUk4mJmNvbnNvbGUud2Fybj9fPWNvbnNvbGUud2FybjpwLmxldmVsPT09ZS5FUlJPUiYmY29uc29sZS5lcnJvcj9fPWNvbnNvbGUuZXJyb3I6cC5sZXZlbD09PWUuSU5GTyYmY29uc29sZS5pbmZvP189Y29uc29sZS5pbmZvOnAubGV2ZWw9PT1lLkRFQlVHJiZjb25zb2xlLmRlYnVnP189Y29uc29sZS5kZWJ1ZzpwLmxldmVsPT09ZS5UUkFDRSYmY29uc29sZS50cmFjZSYmKF89Y29uc29sZS50cmFjZSkscy5mb3JtYXR0ZXIoYyxwKSxoKF8sYykpfX0sZS51c2VEZWZhdWx0cz1mdW5jdGlvbihzKXtlLnNldExldmVsKHMmJnMuZGVmYXVsdExldmVsfHxlLkRFQlVHKSxlLnNldEhhbmRsZXIoZS5jcmVhdGVEZWZhdWx0SGFuZGxlcihzKSl9LGUuc2V0RGVmYXVsdHM9ZS51c2VEZWZhdWx0cyx0LmV4cG9ydHM/dC5leHBvcnRzPWU6KGUuX3ByZXZMb2dnZXI9bi5Mb2dnZXIsZS5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIG4uTG9nZ2VyPWUuX3ByZXZMb2dnZXIsZX0sbi5Mb2dnZXI9ZSl9KShXKX0pKEIpO3ZhciBWPUIuZXhwb3J0cyxEPXooVik7Y2xhc3Mgd3tjb25zdHJ1Y3RvcihuKXt0aGlzLmRhdGE9bix0aGlzLmJpdE9mZnNldD0wfXJlYWRCaXRzKG4pe2lmKHRoaXMuYml0T2Zmc2V0K24+dGhpcy5kYXRhLmxlbmd0aCo4KXRocm93IG5ldyBFcnJvcigiQXR0ZW1wdGVkIHRvIHJlYWQgcGFzdCB0aGUgZW5kIG9mIHRoZSBiaXRzdHJlYW0iKTtsZXQgZT0wO2ZvcihsZXQgaT0wO2k8bjtpKyspe2NvbnN0IHI9TWF0aC5mbG9vcih0aGlzLmJpdE9mZnNldC84KSxvPTctdGhpcy5iaXRPZmZzZXQlOCxhPXRoaXMuZGF0YVtyXT4+byYxO2V8PWE8PG4tMS1pLHRoaXMuYml0T2Zmc2V0Kyt9cmV0dXJuIGV9c2tpcChuKXt0aGlzLmJpdE9mZnNldCs9bn1yZWFkRXhwR29sb21iVW5zaWduZWQoKXtsZXQgbj0tMTtmb3IobGV0IGU9MDtlPT09MDtuKyspZT10aGlzLnJlYWRCaXRzKDEpO3JldHVybigxPDxuKS0xK3RoaXMucmVhZEJpdHMobil9cmVhZEV4cEdvbG9tYlNpZ25lZCgpe2NvbnN0IG49dGhpcy5yZWFkRXhwR29sb21iVW5zaWduZWQoKTtyZXR1cm4gbiUyPT09MD8tKG4vMik6KG4rMSkvMn19Y29uc3QgbT17U0xJQ0VfTk9OX0lEUjoxLFNMSUNFX1BBUlRJVElPTl9BOjIsU0xJQ0VfSURSOjUsU0VJX0gyNjQ6NixTRUlfSDI2NV9QUkVGSVg6MzksU0VJX0gyNjVfU1VGRklYOjQwLFNQU19IMjY0OjcsU1BTX0gyNjU6MzMsUFBTX0gyNjQ6OCxQUFNfSDI2NTozNH0sUj17UElDX1RJTUlORzoxLFVTRVJfREFUQV9VTlJFR0lTVEVSRUQ6NX0seT17TEVHQUNZOjEsTkVXOjIsVElNRUNPREU6MyxPVEhFUjo0fSxqPSI2ZTljZmQyYS01OTA3LTQ5ZmYtYjM2My04OTc4YTZlODM0MGUiLHE9IjlhMjFmM2JlLTMxZjAtNGI3OC1iMGJlLWM3ZjdkYmI5NzI1MCIsTD0iZDQwZTM4ZWEtZDQxOS00YzYyLTk0ZWQtMjBhYzM3YjRlNGZhIjtjbGFzcyBZe2NvbnN0cnVjdG9yKG49IkgyNjQiKXt0aGlzLnNwcz1uZXcgTWFwLHRoaXMucHBzPW5ldyBNYXAsdGhpcy5hY3RpdmVTUFM9bnVsbCx0aGlzLmNvZGVjPW59Y29sbGVjdFBQUyhuKXt0aGlzLmNvZGVjPT09IkgyNjQiP3RoaXMuY29sbGVjdEgyNjRQUFMobik6dGhpcy5jb2xsZWN0SDI2NVBQUyhuKX1jb2xsZWN0U1BTKG4pe3RoaXMuY29kZWM9PT0iSDI2NCI/dGhpcy5jb2xsZWN0SDI2NFNQUyhuKTp0aGlzLmNvbGxlY3RIMjY1U1BTKG4pfWNvbGxlY3RIMjY0U1BTKG4pe2NvbnN0IGU9bmV3IHcobiksaT1lLnJlYWRCaXRzKDgpLHI9WzEwMCwxMTAsMTIyLDI0NCw0NCw4Myw4NiwxMTgsMTI4LDEzOCwxMzksMTM0LDEzNV07ZS5za2lwKDgpLGUuc2tpcCg4KTtjb25zdCBvPWUucmVhZEV4cEdvbG9tYlVuc2lnbmVkKCk7aWYobz4zMXx8bzwwKXRocm93IG5ldyBFcnJvcigiSW52YWxpZCBzZXFfcGFyYW1ldGVyX3NldF9pZCIpO2lmKHIuaW5jbHVkZXMoaSkpe2NvbnN0IGw9ZS5yZWFkRXhwR29sb21iVW5zaWduZWQoKTtpZihsPT09MyYmZS5za2lwKDEpLGUucmVhZEV4cEdvbG9tYlVuc2lnbmVkKCksZS5yZWFkRXhwR29sb21iVW5zaWduZWQoKSxlLnNraXAoMSksZS5yZWFkQml0cygxKSl7Y29uc3Qgcz1sIT09Mz84OjEyO2ZvcihsZXQgdT0wO3U8czt1KyspaWYoZS5yZWFkQml0cygxKSl7Y29uc3QgaD11PDY/MTY6NjQ7bGV0IGM9OCxwPTg7Zm9yKGxldCBfPTA7XzxoO18rKyl7aWYocCE9PTApe2NvbnN0IGc9ZS5yZWFkRXhwR29sb21iU2lnbmVkKCk7cD0oYytnKzI1NiklMjU2fWM9cD09PTA/YzpwfX19fWUucmVhZEV4cEdvbG9tYlVuc2lnbmVkKCk7Y29uc3QgYT1lLnJlYWRFeHBHb2xvbWJVbnNpZ25lZCgpO2lmKGE9PT0wKWUucmVhZEV4cEdvbG9tYlVuc2lnbmVkKCk7ZWxzZSBpZihhPT09MSl7ZS5za2lwKDEpLGUucmVhZEV4cEdvbG9tYlNpZ25lZCgpLGUucmVhZEV4cEdvbG9tYlNpZ25lZCgpO2NvbnN0IGw9ZS5yZWFkRXhwR29sb21iVW5zaWduZWQoKTtmb3IobGV0IGY9MDtmPGw7ZisrKWUucmVhZEV4cEdvbG9tYlNpZ25lZCgpfWUucmVhZEV4cEdvbG9tYlVuc2lnbmVkKCksZS5za2lwKDEpLGUucmVhZEV4cEdvbG9tYlVuc2lnbmVkKCksZS5yZWFkRXhwR29sb21iVW5zaWduZWQoKSxlLnJlYWRCaXRzKDEpPT09MCYmZS5za2lwKDEpLGUuc2tpcCgxKSxlLnJlYWRCaXRzKDEpJiYoZS5yZWFkRXhwR29sb21iVW5zaWduZWQoKSxlLnJlYWRFeHBHb2xvbWJVbnNpZ25lZCgpLGUucmVhZEV4cEdvbG9tYlVuc2lnbmVkKCksZS5yZWFkRXhwR29sb21iVW5zaWduZWQoKSk7bGV0IGQ7aWYoZS5yZWFkQml0cygxKSl7bGV0IGY9ZnVuY3Rpb24oYyl7Y29uc3QgcD1jLnJlYWRFeHBHb2xvbWJVbnNpZ25lZCgpO2Muc2tpcCg0KSxjLnNraXAoNCk7Zm9yKGxldCB4PTA7eDw9cDt4KyspYy5yZWFkRXhwR29sb21iVW5zaWduZWQoKSxjLnJlYWRFeHBHb2xvbWJVbnNpZ25lZCgpLGMuc2tpcCgxKTtjLnNraXAoNSk7Y29uc3QgXz1jLnJlYWRCaXRzKDUpLGc9Yy5yZWFkQml0cyg1KSxBPWMucmVhZEJpdHMoNSk7cmV0dXJue2NwYl9yZW1vdmFsX2RlbGF5X2xlbmd0aF9taW51czE6XyxkcGJfb3V0cHV0X2RlbGF5X2xlbmd0aF9taW51czE6Zyx0aW1lX29mZnNldF9sZW5ndGg6QX19O2UucmVhZEJpdHMoMSkmJmUucmVhZEJpdHMoOCk9PT0yNTUmJihlLnNraXAoMTYpLGUuc2tpcCgxNikpLGUucmVhZEJpdHMoMSkmJmUuc2tpcCgxKSxlLnJlYWRCaXRzKDEpJiYoZS5za2lwKDMpLGUuc2tpcCgxKSxlLnJlYWRCaXRzKDEpJiZlLnNraXAoMjQpKSxlLnJlYWRCaXRzKDEpJiYoZS5yZWFkRXhwR29sb21iVW5zaWduZWQoKSxlLnJlYWRFeHBHb2xvbWJVbnNpZ25lZCgpKTtjb25zdCBsPWUucmVhZEJpdHMoMSk/e251bV91bml0c19pbl90aWNrOmUucmVhZEJpdHMoMzIpLHRpbWVfc2NhbGU6ZS5yZWFkQml0cygzMiksZml4ZWRfZnJhbWVfcmF0ZV9mbGFnOmUucmVhZEJpdHMoMSl9OnZvaWQgMCxzPWUucmVhZEJpdHMoMSk/ZihlKTp2b2lkIDAsdT1lLnJlYWRCaXRzKDEpP2YoZSk6dm9pZCAwOyhzfHx1KSYmZS5za2lwKDEpO2NvbnN0IGg9ZS5yZWFkQml0cygxKTtkPXt0aW1pbmdfaW5mbzpsLG5hbF9ocmRfcGFyYW1ldGVyczpzLHZjbF9ocmRfcGFyYW1ldGVyczp1LHBpY19zdHJ1Y3RfcHJlc2VudF9mbGFnOmh9fXRoaXMuc3BzLnNldChvLHt2dWlfcGFyYW1ldGVyczpkfSl9Y29sbGVjdEgyNjVTUFMobil7fWNvbGxlY3RIMjY0UFBTKG4pe2NvbnN0IGU9bmV3IHcobiksaT1lLnJlYWRFeHBHb2xvbWJVbnNpZ25lZCgpO2lmKGk+MjU1fHxpPDApdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIHBpY19wYXJhbWV0ZXJfc2V0X2lkIik7Y29uc3Qgcj1lLnJlYWRFeHBHb2xvbWJVbnNpZ25lZCgpO3RoaXMucHBzLnNldChpLHtzZXFfcGFyYW1ldGVyX3NldF9pZDpyfSl9Y29sbGVjdEgyNjVQUFMobil7fWZpbmRBY3RpdmVTUFMobil7Y29uc3QgZT1uZXcgdyhuKTtlLnJlYWRFeHBHb2xvbWJVbnNpZ25lZCgpLGUucmVhZEV4cEdvbG9tYlVuc2lnbmVkKCk7Y29uc3QgaT1lLnJlYWRFeHBHb2xvbWJVbnNpZ25lZCgpLHI9dGhpcy5wcHMuZ2V0KGkpO2lmKHIpe2NvbnN0IG89dGhpcy5zcHMuZ2V0KHIuc2VxX3BhcmFtZXRlcl9zZXRfaWQpO2lmKG8pe3RoaXMuYWN0aXZlU1BTPW87cmV0dXJufX10aHJvdyBuZXcgRXJyb3IoIkNhbm5vdCBmaW5kIHRoZSBhY3RpdmUgU1BTIil9fWNvbnN0IEU9bmV3IFk7ZnVuY3Rpb24gRyh0LG4pe2Zvcig7bjx0LmJ5dGVMZW5ndGgtNDspe2lmKHRbbl09PT0wJiZ0W24rMV09PT0wJiYodFtuKzJdPT09MXx8dFtuKzJdPT09MCYmdFtuKzNdPT09MSkpcmV0dXJuIG47bis9MX1yZXR1cm4tMX1mdW5jdGlvbiBVKHQpe2NvbnN0IG49bmV3IFVpbnQ4QXJyYXkodC5ieXRlTGVuZ3RoKTtsZXQgZT0wLGk9MDtmb3IobGV0IHI9MjtyPHQuYnl0ZUxlbmd0aDtyKyspdFtyXT09PTMmJnRbci0xXT09PTAmJnRbci0yXT09PTAmJihuLnNldCh0LnN1YmFycmF5KGksciksZSksZSs9ci1pLGk9cisxKTtyZXR1cm4gaTx0LmJ5dGVMZW5ndGgmJm4uc2V0KHQuc3ViYXJyYXkoaSksZSksbn1mdW5jdGlvbiBYKHQsbil7bGV0IGU9MDtjb25zdCBpPW49PT0iSDI2NCI/MToyLHI9W107Zm9yKDtlPHQuYnl0ZUxlbmd0aC00Oyl7Y29uc3Qgbz1HKHQsZSk7aWYobz49ZSl7Y29uc3QgYT10W28rMl09PT0xPzM6NCxkPUcodCxvK2EraSk7aWYoZD5vKXIucHVzaCh0LnN1YmFycmF5KG8sZCkpLGU9ZDtlbHNle3IucHVzaCh0LnN1YmFycmF5KG8pKTticmVha319ZWxzZSBicmVha31yZXR1cm4gcn1mdW5jdGlvbiAkKHQsbil7bGV0IGU9ITA7cmV0dXJuIFgodCxuKS5maWx0ZXIoaT0+e2NvbnN0IHI9aVsyXT09PTE/Mzo0LG89bj09PSJIMjY0Ij8xOjIsYT1pW3JdLGQ9bj09PSJIMjY0Ij9hJjMxOmE+PjEmNjM7aWYoZSlzd2l0Y2goZCl7Y2FzZSBtLlBQU19IMjY0OmNhc2UgbS5QUFNfSDI2NTpFLmNvbGxlY3RQUFMoVShpLnN1YmFycmF5KHIrbykpKTticmVhaztjYXNlIG0uU1BTX0gyNjQ6Y2FzZSBtLlNQU19IMjY1OkUuY29sbGVjdFNQUyhVKGkuc3ViYXJyYXkocitvKSkpO2JyZWFrO2Nhc2UgbS5TTElDRV9JRFI6Y2FzZSBtLlNMSUNFX05PTl9JRFI6Y2FzZSBtLlNMSUNFX1BBUlRJVElPTl9BOnRyeXtFLmZpbmRBY3RpdmVTUFMoVShpLnN1YmFycmF5KHIrbykpKSxlPSExfWNhdGNoKGwpe2NvbnNvbGUuaW5mbygiRmFpbGVkIHRvIGZpbmQgYWN0aXZlIFNQUy4gV2lsbCBub3QgYmUgYWJsZSB0byBleHRyYWN0IFBJQyB0aW1pbmcgbWV0YWRhdGEiKX1icmVha31yZXR1cm5bbS5TRUlfSDI2NCxtLlNFSV9IMjY1X1BSRUZJWCxtLlNFSV9IMjY1X1NVRkZJWF0uaW5jbHVkZXMoZCl9KX1mdW5jdGlvbiBKKHQpe2xldCBuPTAsZT0wO2Zvcig7dFtlXT09PTI1NTspbis9MjU1LGUrKztuKz10W2VdLGUrKztsZXQgaT0wO2Zvcig7dFtlXT09PTI1NTspaSs9MjU1LGUrKztyZXR1cm4gaSs9dFtlXSxlKysse3R5cGU6bixjb250ZW50OnQuc3ViYXJyYXkoZSxlK2kpfX1mdW5jdGlvbiBLKHQpe2NvbnN0IG49bmV3IFVpbnQ4QXJyYXkoVChxKSksZT1uZXcgVWludDhBcnJheShUKGopKSxpPW5ldyBVaW50OEFycmF5KFQoTCkpO3JldHVybiBuLmV2ZXJ5KChyLG8pPT5yPT09dFtvXSk/eS5USU1FQ09ERTplLmV2ZXJ5KChyLG8pPT5yPT09dFtvXSk/eS5MRUdBQ1k6aS5ldmVyeSgocixvKT0+cj09PXRbb10pP3kuTkVXOnkuT1RIRVJ9ZnVuY3Rpb24gWih0LG4pe2xldCBlPTA7dC51dWlkPW4uc3ViYXJyYXkoZSxlKzE2KSxlKz0xNjtjb25zdCBpPUsodC51dWlkKSxyPW4uc3ViYXJyYXkoZSk7c3dpdGNoKGkpe2Nhc2UgeS5MRUdBQ1k6Y2FzZSB5Lk9USEVSOnQudW5yZWdpc3RlcmVkPXI7YnJlYWs7Y2FzZSB5LlRJTUVDT0RFOnQudGltZWNvZGU9TyhyKTticmVhaztjYXNlIHkuTkVXOntsZXQgbz0wO2NvbnN0IGE9QyhEYXRlLm5vdygpKS5sZW5ndGgsZD1yLnN1YmFycmF5KG8sYSk7bys9YTtjb25zdCBsPXIuc3ViYXJyYXkobyk7dC50aW1lY29kZT1PKGQpLHQudW5yZWdpc3RlcmVkPWw7YnJlYWt9fX1mdW5jdGlvbiBPKHQpe2NvbnN0IG49dC5yZWR1Y2UoKG8sYSk9PihvPDxCaWdJbnQoOCkpK0JpZ0ludChhKSxCaWdJbnQoMCkpLGU9TnVtYmVyKG4pLGk9bmV3IERhdGUoZSk7cmV0dXJuIG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShpLnRvSVNPU3RyaW5nKCkpfWZ1bmN0aW9uIFEodCxuKXt2YXIgZixzLHUsaCxjO2lmKCFFLmFjdGl2ZVNQUyl7Y29uc29sZS53YXJuKCJDYW5ub3QgZmluZCB0aGUgYWN0aXZlIFNQUyIpO3JldHVybn1jb25zdCBlPShmPUUuYWN0aXZlU1BTLnZ1aV9wYXJhbWV0ZXJzLm5hbF9ocmRfcGFyYW1ldGVycykhPW51bGw/ZjpFLmFjdGl2ZVNQUy52dWlfcGFyYW1ldGVycy52Y2xfaHJkX3BhcmFtZXRlcnMsaT17Y3BiX2RwYl9kZWxheXNfcHJlc2VudF9mbGFnOmU/MTowLGNwYl9yZW1vdmFsX2RlbGF5X2xlbmd0aF9taW51czE6KHM9ZT09bnVsbD92b2lkIDA6ZS5jcGJfcmVtb3ZhbF9kZWxheV9sZW5ndGhfbWludXMxKSE9bnVsbD9zOjIzLGRwYl9vdXRwdXRfZGVsYXlfbGVuZ3RoX21pbnVzMToodT1lPT1udWxsP3ZvaWQgMDplLmRwYl9vdXRwdXRfZGVsYXlfbGVuZ3RoX21pbnVzMSkhPW51bGw/dToyMyx0aW1lX29mZnNldF9sZW5ndGg6ZT8oaD1lLnRpbWVfb2Zmc2V0X2xlbmd0aCkhPW51bGw/aDoyNDp2b2lkIDAscGljX3N0cnVjdF9wcmVzZW50X2ZsYWc6KGM9RS5hY3RpdmVTUFMudnVpX3BhcmFtZXRlcnMucGljX3N0cnVjdF9wcmVzZW50X2ZsYWcpIT1udWxsP2M6MH07aWYoIWkucGljX3N0cnVjdF9wcmVzZW50X2ZsYWcpe2NvbnNvbGUud2FybigicGljX3N0cnVjdF9wcmVzZW50X2ZsYWcgaXMgbm90IHByZXNlbnQiKTtyZXR1cm59Y29uc3Qgcj1uZXcgdyhuKTtpLmNwYl9kcGJfZGVsYXlzX3ByZXNlbnRfZmxhZyYmKHIuc2tpcChpLmNwYl9yZW1vdmFsX2RlbGF5X2xlbmd0aF9taW51czErMSksci5za2lwKGkuZHBiX291dHB1dF9kZWxheV9sZW5ndGhfbWludXMxKzEpKTtjb25zdCBvPVsxLDEsMSwyLDIsMywzLDIsM10sYT1yLnJlYWRCaXRzKDQpO2lmKGE+PW8ubGVuZ3RoKXRocm93IG5ldyBFcnJvcigiSW52YWxpZCBwaWNfc3RydWN0Iik7Y29uc3QgZD1vW2FdLGw9W107Zm9yKGxldCBwPTA7cDxkO3ArKylpZihyLnJlYWRCaXRzKDEpKXtjb25zdCBnPXt9O3Iuc2tpcCgyKSxyLnNraXAoMSksci5za2lwKDUpO2NvbnN0IEE9ci5yZWFkQml0cygxKTtpZihyLnNraXAoMiksZy5uX2ZyYW1lcz1yLnJlYWRCaXRzKDgpLEE/KGcuc2Vjb25kc192YWx1ZT1yLnJlYWRCaXRzKDYpLGcubWludXRlc192YWx1ZT1yLnJlYWRCaXRzKDYpLGcuaG91cnNfdmFsdWU9ci5yZWFkQml0cyg1KSk6ci5yZWFkQml0cygxKSYmKGcuc2Vjb25kc192YWx1ZT1yLnJlYWRCaXRzKDYpLHIucmVhZEJpdHMoMSkmJihnLm1pbnV0ZXNfdmFsdWU9ci5yZWFkQml0cyg2KSxyLnJlYWRCaXRzKDEpJiYoZy5ob3Vyc192YWx1ZT1yLnJlYWRCaXRzKDUpKSkpLGkudGltZV9vZmZzZXRfbGVuZ3RoKXRyeXtnLnRpbWVfb2Zmc2V0PXIucmVhZEJpdHMoaS50aW1lX29mZnNldF9sZW5ndGgpfWNhdGNoKHgpe2NvbnNvbGUuZXJyb3IoIkZhaWxlZCB0byByZWFkIHRpbWVfb2Zmc2V0Iix4KSxnLnRpbWVfb2Zmc2V0PTB9ZWxzZSBnLnRpbWVfb2Zmc2V0PTA7bC5wdXNoKGcpfXQuc2VpUGljVGltaW5nVGltZUNvZGVBcnJheT1sfWZ1bmN0aW9uIGVlKHQsbil7aWYobiE9PSJIMjY0IiYmbiE9PSJIMjY1Iil0aHJvdyBuZXcgRXJyb3IoIlVuc3VwcG9ydGVkIGNvZGVjICIuY29uY2F0KG4pKTtjb25zdCBlPXt9O3JldHVybiBFLmNvZGVjPW4sJChuZXcgVWludDhBcnJheSh0LmRhdGEpLG4pLmZvckVhY2goaT0+e2NvbnN0IHI9aVsyXT09PTE/Mzo0LG89bj09PSJIMjY0Ij8xOjIsYT1VKGkuc3ViYXJyYXkocitvKSksZD1KKGEpO3N3aXRjaChkLnR5cGUpe2Nhc2UgUi5QSUNfVElNSU5HOlEoZSxkLmNvbnRlbnQpO2JyZWFrO2Nhc2UgUi5VU0VSX0RBVEFfVU5SRUdJU1RFUkVEOlooZSxkLmNvbnRlbnQpO2JyZWFrfX0pLGV9ZnVuY3Rpb24gdGUodCl7cmV0dXJuL15bMC05YS1mQS1GXXs4fS1bMC05YS1mQS1GXXs0fS1bMC05YS1mQS1GXXs0fS1bMC05YS1mQS1GXXs0fS1bMC05YS1mQS1GXXsxMn0kLy50ZXN0KHQpfWZ1bmN0aW9uIFQodCl7cmV0dXJuIHQucmVwbGFjZSgvLS9nLCIiKS5tYXRjaCgvLnsxLDJ9L2cpLm1hcChuPT5wYXJzZUludChuLDE2KSl9ZnVuY3Rpb24gbmUodCxuLGUpe2NvbnN0IGk9bmV3IFVpbnQ4QXJyYXkoVCh0KSkscj1DKGUpLG89bmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKEpTT04uc3RyaW5naWZ5KG4pKSxhPW5ldyBVaW50OEFycmF5KGkubGVuZ3RoK3IubGVuZ3RoK28ubGVuZ3RoKTtyZXR1cm4gYS5zZXQoaSksYS5zZXQocixpLmxlbmd0aCksYS5zZXQobyxyLmxlbmd0aCtpLmxlbmd0aCksYX1mdW5jdGlvbiByZSh0KXtjb25zdCBuPVtdLGU9TWF0aC5mbG9vcih0LmJ5dGVMZW5ndGgvMjU1KSxpPXQuYnl0ZUxlbmd0aCUyNTU7Zm9yKGxldCByPTA7cjxlO3IrKyluLnB1c2goMjU1KTtyZXR1cm4gbi5wdXNoKGkpLG5ldyBVaW50OEFycmF5KFs1LC4uLm5dKX1mdW5jdGlvbiBpZSh0KXtjb25zdCBuPVtdO2ZvcihsZXQgZT0wO2U8dC5ieXRlTGVuZ3RoO2UrKyllKzI8dC5ieXRlTGVuZ3RoJiZbMCwxLDIsM10uaW5jbHVkZXModFtlKzJdKSYmdFtlXT09PTAmJnRbZSsxXT09PTA/KG4ucHVzaCh0W2VdKSxuLnB1c2godFtlKzFdKSxlKz0yLG4ucHVzaCgzKSk6bi5wdXNoKHRbZV0pO3JldHVybiBuLnB1c2goMTI4KSxuZXcgVWludDhBcnJheShuKX1mdW5jdGlvbiBDKHQpe2NvbnN0IG49W107aWYoIWlzTmFOKHQpKXtjb25zdCBlPUJpZ0ludCh0KTtmb3IobGV0IGk9MDtpPE1hdGguY2VpbChNYXRoLmZsb29yKE1hdGgubG9nMihuZXcgTnVtYmVyKHQpKSsxKS84KTtpKyspbi51bnNoaWZ0KG5ldyBOdW1iZXIoZT4+QmlnSW50KDgqaSkmQmlnSW50KDI1NSkpKX1yZXR1cm4gbmV3IFVpbnQ4QXJyYXkobil9ZnVuY3Rpb24gc2Uoe3V1aWQ6dCxwYXlsb2FkOm4sdGltZWNvZGU6ZX0pe2NvbnN0IGk9WzAsMCwwLDFdLHI9WzEwMl0sbz1uZSh0LG4sZSksYT1yZShvKSxkPWllKG8pLGw9bmV3IFVpbnQ4QXJyYXkoaS5sZW5ndGgrci5sZW5ndGgrYS5sZW5ndGgrZC5sZW5ndGgpO3JldHVybiBsLnNldChpKSxsLnNldChyLGkubGVuZ3RoKSxsLnNldChhLGkubGVuZ3RoK3IubGVuZ3RoKSxsLnNldChkLGkubGVuZ3RoK3IubGVuZ3RoK2EubGVuZ3RoKSxsfWZ1bmN0aW9uIG9lKHt1dWlkOnQscGF5bG9hZDpuLHRpbWVjb2RlOmV9LGkpe2lmKHQ9PT0iInx8bj09PSIiKXRocm93IG5ldyBFcnJvcigidXVpZCBhbmQgcGF5bG9hZCBjYW5ub3QgYmUgZW1wdHkiKTt0ZSh0KXx8KGNvbnNvbGUud2FybigiSW52YWxpZCBVVUlELiBVc2luZyBkZWZhdWx0IFVVSUQuIiksdD1MLGU9RGF0ZS5ub3coKSk7Y29uc3Qgcj1zZSh7dXVpZDp0LHBheWxvYWQ6bix0aW1lY29kZTplfSksbz1uZXcgRGF0YVZpZXcoaS5kYXRhKSxhPW5ldyBBcnJheUJ1ZmZlcihpLmRhdGEuYnl0ZUxlbmd0aCtyLmJ5dGVMZW5ndGgpLGQ9bmV3IERhdGFWaWV3KGEpO2ZvcihsZXQgbD0wO2w8aS5kYXRhLmJ5dGVMZW5ndGg7bCsrKWQuc2V0VWludDgobCxvLmdldFVpbnQ4KGwpKTtmb3IobGV0IGw9MDtsPHIuYnl0ZUxlbmd0aDtsKyspZC5zZXRVaW50OChpLmRhdGEuYnl0ZUxlbmd0aCtsLHJbbF0pO2kuZGF0YT1hfUQuZ2V0KCJUcmFuc2Zvcm1Xb3JrZXIiKS5zZXRMZXZlbChELkRFQlVHKTtjb25zdCBhZT0yZTMsYj1bXTtsZXQgUz0iIixQPXt9O2NvbnN0IHY9e307bGV0IEk9W107ZnVuY3Rpb24gSCh0KXtyZXR1cm4gbmV3IFRyYW5zZm9ybVN0cmVhbSh7c3RhcnQoKXt9LGZsdXNoKCl7fSxhc3luYyB0cmFuc2Zvcm0obixlKXt2YXIgaSxyO2lmKE0obikpe2NvbnN0IG89KChpPVBbbi5nZXRNZXRhZGF0YSgpLnBheWxvYWRUeXBlXSk9PW51bGw/dm9pZCAwOmkudG9VcHBlckNhc2UoKSl8fChTPT1udWxsP3ZvaWQgMDpTLnRvVXBwZXJDYXNlKCkpO2lmKG89PT0iSDI2NCIpe2NvbnN0IGE9ZWUobixvKTsoYS50aW1lY29kZXx8YS51bnJlZ2lzdGVyZWR8fCgocj1hLnNlaVBpY1RpbWluZ1RpbWVDb2RlQXJyYXkpPT1udWxsP3ZvaWQgMDpyLmxlbmd0aCk+MCkmJnNlbGYucG9zdE1lc3NhZ2Uoe2V2ZW50OiJtZXRhZGF0YSIsbWlkOnQsbWV0YWRhdGE6YX0pfXNlbGYucG9zdE1lc3NhZ2Uoe2V2ZW50OiJjb21wbGV0ZSIsZnJhbWU6e3R5cGU6bi50eXBlLHRpbWVzdGFtcDpuLnRpbWVzdGFtcCxkYXRhOm4uZGF0YX19KX1lLmVucXVldWUobil9fSl9ZnVuY3Rpb24gTSh0KXtpZih0eXBlb2YgUlRDRW5jb2RlZFZpZGVvRnJhbWU8InUiKXRyeXtpZih0IGluc3RhbmNlb2YgUlRDRW5jb2RlZFZpZGVvRnJhbWUpcmV0dXJuITB9Y2F0Y2gobil7fXJldHVybiEhKHQuY29uc3RydWN0b3ImJnQuY29uc3RydWN0b3IubmFtZT09PSJSVENFbmNvZGVkVmlkZW9GcmFtZSJ8fHR5cGVvZiB0LndpZHRoPT0ibnVtYmVyIiYmdHlwZW9mIHQuaGVpZ2h0PT0ibnVtYmVyInx8dC50eXBlPT09InZpZGVvIil9ZnVuY3Rpb24gTigpe09iamVjdC5rZXlzKHYpLnNvcnQoKS5qb2luKCk9PT1JLnNvcnQoKS5qb2luKCkmJihiLnNoaWZ0KCksST1bXSl9ZnVuY3Rpb24gY2UodCl7Y29uc3Qgbj1uZXcgRGF0ZSgpLmdldFRpbWUoKTt2W3RdPW4sT2JqZWN0LmtleXModikuZmlsdGVyKGk9Pm4tdltpXT5hZSkuZm9yRWFjaChpPT57ZGVsZXRlIHZbaV0sZGVsZXRlIElbaV19KSxOKCl9ZnVuY3Rpb24gRigpe3JldHVybiBuZXcgVHJhbnNmb3JtU3RyZWFtKHtzdGFydCgpe30sZmx1c2goKXt9LGFzeW5jIHRyYW5zZm9ybSh0LG4pe2lmKE0odCkpe2NvbnN0IGk9dC5nZXRNZXRhZGF0YSgpLnN5bmNocm9uaXphdGlvblNvdXJjZTtpZihjZShpKSwhSS5pbmNsdWRlcyhpKSYmYi5sZW5ndGgpdHJ5e2lmKCEvKGgyNls0XSkvLnRlc3QoUykpdGhyb3cgbmV3IEVycm9yKCJTZW5kaW5nIG1ldGFkYXRhIGlzIG5vdCBzdXBwb3J0ZWQgd2l0aCBhbnkgb3RoZXIgY29kZWMgb3RoZXIgdGhhbiBILjI2NCIpO2JbMF0udXVpZD09PUwmJihiWzBdLnRpbWVjb2RlPURhdGUubm93KCkpLG9lKGJbMF0sdCksSS5wdXNoKGkpfWNhdGNoKHIpe2NvbnNvbGUuZXJyb3Iocil9ZmluYWxseXtOKCl9fW4uZW5xdWV1ZSh0KX19KX1mdW5jdGlvbiBrKHtyZWFkYWJsZTp0LHdyaXRhYmxlOm59LGUpe3QucGlwZVRocm91Z2goZSkucGlwZVRvKG4pfWFkZEV2ZW50TGlzdGVuZXIoInJ0Y3RyYW5zZm9ybSIsdD0+e2xldCBuO2lmKHQudHJhbnNmb3JtZXIub3B0aW9ucy5uYW1lPT09InNlbmRlclRyYW5zZm9ybSIpUz10LnRyYW5zZm9ybWVyLm9wdGlvbnMuY29kZWMsbj1GKCk7ZWxzZSBpZih0LnRyYW5zZm9ybWVyLm9wdGlvbnMubmFtZT09PSJyZWNlaXZlclRyYW5zZm9ybSIpUD10LnRyYW5zZm9ybWVyLm9wdGlvbnMucGF5bG9hZFR5cGVDb2RlY3x8e30sUz10LnRyYW5zZm9ybWVyLm9wdGlvbnMuY29kZWN8fCIiLG49SCh0LnRyYW5zZm9ybWVyLm9wdGlvbnMubWlkKTtlbHNlIHJldHVybjtrKHQudHJhbnNmb3JtZXIsbil9KSxhZGRFdmVudExpc3RlbmVyKCJtZXNzYWdlIix0PT57Y29uc3R7YWN0aW9uOm59PXQuZGF0YTtzd2l0Y2gobil7Y2FzZSJpbnNlcnRhYmxlLXN0cmVhbXMtc2VuZGVyIjpTPXQuZGF0YS5jb2RlYyxrKHQuZGF0YSxGKCkpO2JyZWFrO2Nhc2UiaW5zZXJ0YWJsZS1zdHJlYW1zLXJlY2VpdmVyIjpQPXQuZGF0YS5wYXlsb2FkVHlwZUNvZGVjfHx7fSxTPXQuZGF0YS5jb2RlY3x8IiIsayh0LmRhdGEsSCh0LmRhdGEubWlkKSk7YnJlYWs7Y2FzZSJtZXRhZGF0YS1zZWktdXNlci1kYXRhLXVucmVnaXN0ZXJlZCI6Yi5wdXNoKHt1dWlkOnQuZGF0YS51dWlkLHBheWxvYWQ6dC5kYXRhLnBheWxvYWR9KTticmVha319KX0pKCk7Cg==",dn=typeof self<"u"&&self.Blob&&new Blob([(t=>j.from(atob(t),t=>t.charCodeAt(0)))(cn)],{type:"text/javascript;charset=utf-8"});function ln(t){let i;try{if(i=dn&&(self.URL||self.webkitURL).createObjectURL(dn),!i)throw"";const s=new ad(i,{name:null==t?void 0:t.name});return s.addEventListener("error",()=>{(self.URL||self.webkitURL).revokeObjectURL(i)}),s}catch(i){return new ad("data:text/javascript;base64,"+cn,{name:null==t?void 0:t.name})}finally{i&&(self.URL||self.webkitURL).revokeObjectURL(i)}}const fn=ot.get("Publish"),vn={mediaStream:null,bandwidth:0,metadata:!1,disableVideo:!1,disableAudio:!1,codec:js.H264,simulcast:!1,scalabilityMode:null,peerConfig:{autoInitStats:!0,statsIntervalMs:1e3}};let _n;const gn=t=>{_n=_n||je({sourceId:Qe(tn()),stereo:Qe(qe()),dtx:Qe(qe()),absCaptureTime:Qe(qe()),dependencyDescriptor:Qe(qe()),mediaStream:Qe(en([Ke(nn()),nn()])),bandwidth:Qe(Je()),metadata:Qe(qe()),disableVideo:Qe(qe()),disableAudio:Qe(qe()),codec:Qe($e(w.values(js))),simulcast:Qe(qe()),scalabilityMode:Qe(tn()),peerConfig:Qe(je({autoInitStats:Qe(qe()),statsIntervalMs:Qe(Je())})),record:Qe(qe()),events:Qe(Ke($e(["active","inactive","viewercount"]))),priority:Qe(Je())});const{success:i,issues:s}=function(t,i,s){const e=t["~run"]({value:i},Ve(s));return{typed:e.typed,success:!e.issues,output:e.value,issues:e.issues}}(_n,t);i||fn.warn(new He(s),t)};function mn(t){if(!t)return new j;const i=t.length,s=new j(i/2);for(let e=0;e<i;e+=2)s[e/2]=x(t.substr(e,2),16);return s}function pn(t,i,s){if(w.prototype.hasOwnProperty.call(t,s)&&w.prototype.hasOwnProperty.call(i,s)){const e=t[s];t[s]=i[s],i[s]=e}else console.error('One or both objects do not have the property "'.concat(s,'"'))}function wn(t,i,s,e){return new(s||(s=Promise))(function(n,r){function h(t){try{a(e.next(t))}catch(t){r(t)}}function o(t){try{a(e.throw(t))}catch(t){r(t)}}function a(t){var i;t.done?n(t.value):(i=t.value,i instanceof s?i:new s(function(t){t(i)})).then(h,o)}a((e=e.apply(t,i||[])).next())})}const yn=An;var bn;function An(t,i){const s=Cn();return(An=function(t,i){return s[t-=440]})(t,i)}!function(){const t=An,i=Cn();for(;;)try{if(-x(t(447))/1+x(t(445))/2+x(t(449))/3*(x(t(454))/4)+x(t(453))/5+-x(t(456))/6+x(t(450))/7+-x(t(441))/8*(-x(t(455))/9)==847340)break;i.push(i.shift())}catch(t){i.push(i.shift())}}();const Sn=od&&od[yn(448)]||"",Tn=od&&od[yn(443)]||"",kn=!(null==s||!s.RTCRtpScriptTransform),En=Sn.includes("Firefox"),Rn=!En&&Tn.includes("Apple"),xn=!En&&!Rn&&Sn[yn(440)](yn(451)),In=!En&&!Rn&&!xn&&Sn[yn(440)](yn(446)),Pn=(null===(bn=null==od?void 0:od[yn(442)])||void 0===bn?void 0:bn[yn(452)])||(null==od?void 0:od[yn(452)])||"";function Cn(){const t=["1583117AOxBcs","userAgent","153Sdjzsk","5371359GvUFPp","Edg","platform","7141470dfeDnP","10068LWEgOs","243621EPkoPw","8310150fEFCnA","includes","328VMcnkw","userAgentData","vendor","Win32","763310RGZQro","Chrome"];return(Cn=function(){return t})()}const Nn={supportsRtpScriptTransform:kn,isFirefox:En,isSafari:Rn,isEdge:xn,isChrome:In,platform:Pn,isWindows:"Windows"===Pn||Pn===yn(444)},Dn=Bn;function Bn(t,i){const s=Vn();return(Bn=function(t,i){return s[t-=300]})(t,i)}!function(){const t=Bn,i=Vn();for(;;)try{if(-x(t(327))/1+x(t(304))/2*(x(t(300))/3)+-x(t(332))/4*(x(t(316))/5)+-x(t(322))/6*(x(t(311))/7)+x(t(308))/8*(-x(t(307))/9)+x(t(314))/10*(x(t(302))/11)+x(t(329))/12==997665)break;i.push(i.shift())}catch(t){i.push(i.shift())}}();class Mn{[Dn(323)](){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];const e=Dn;On[e(319)]>=4&&console[e(323)](this[e(310)],...i)}[Dn(331)](){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];const e=Dn;On[e(319)]>=3&&console[e(331)](this[e(310)],...i)}[Dn(320)](){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];const e=Dn;On[e(319)]>=2&&console[e(320)](this[e(310)],...i)}error(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];On[Dn(319)]>=1&&console.error(this.tag,...i)}constructor(t){this[Bn(310)]=t}}function Ln(t){return new Mn(t)}const On={logLevel:3,mediaDumps:{video:{in:{durationMs:0,delimited:!0},out:{durationMs:0}},audio:{in:{durationMs:0},out:{durationMs:0}}}};function Fn(){return(new Date)[Dn(317)]().slice(11,-1)}function Vn(){const t=["mediaBuffer","click","529321KfbOwo","endTimestampMs","28972188cmcnxe","containerFileExt","info","4ZlZeJQ","9kyfNFe","mediaType","172953TzXwsI","byteLength","1327806tybvjI","href","createObjectURL","1089qysnCz","112088WLFXHK","substring","tag","692993ZcAeLj","set","download","810qiScYX","startTimestampMs","8821555KArxhe","toISOString","application/octet-stream","logLevel","warn","revokeObjectURL","42PDuKrJ","debug","targetDurationMs"];return(Vn=function(){return t})()}class Wn{append(t,i){const s=Dn;if(!this[s(325)])return!1;if(this[s(325)]=function(t,i){const s=Dn,e=new j((0|t[s(303)])+(0|i.byteLength));return e[s(312)](t,0),e[s(312)](i,0|t.byteLength),e}(this[s(325)],t),void 0!==i)if(-1===this[s(315)])this.startTimestampMs=i,this[s(328)]=i+this[s(324)];else if(i>=this[s(328)]){const t=(new Date)[s(317)]()[s(309)](0,19).replace(/:/g,"-"),i=this.mediaType+"-"+t+"."+this.containerFileExt;return function(t,i,s){void 0===s&&(s=Dn(318));const e=Dn,n=h.createElement("a"),r=new Blob([t],{type:s});n.href=URL[e(306)](r),n[e(313)]=i,n[e(326)](),URL[e(321)](n[e(305)])}(this[s(325)],i),this.mediaBuffer=null,!1}return!0}constructor(t,i,s){const e=Dn;this[e(325)]=null,this[e(315)]=-1,this.endTimestampMs=-1,this[e(301)]=t,this[e(330)]=i,this[e(324)]=s,s>0&&(this[e(325)]=new j)}}const Un=Hn;!function(){const t=Hn,i=nr();for(;;)try{if(x(t(160))/1+-x(t(363))/2+-x(t(321))/3*(-x(t(401))/4)+x(t(229))/5+-x(t(276))/6+x(t(400))/7*(-x(t(153))/8)+-x(t(223))/9==858456)break;i.push(i.shift())}catch(t){i.push(i.shift())}}();const Gn=Ln("[MUX]"),Xn=Nn[Un(387)];function Zn(t,i){const s=Un;let e=new j((0|t[s(413)])+(0|i[s(413)]));return e.set(t,0),e[s(251)](i,0|t[s(413)]),e}function Hn(t,i){const s=nr();return(Hn=function(t,i){return s[t-=147]})(t,i)}function zn(t,i,s){return void 0===i&&(i=0),void 0===s&&(s=1/0),((t,i,s,e)=>{const n=Un,r=e[n(425)]||1;i*=r,s*=r;const h=(u=t)instanceof ArrayBuffer?u:u[Un(366)],o=(t[n(188)]||0)+t[n(413)],a=(t[n(188)]||0)+i;var u;let c=_[n(177)](0,_[n(291)](a,o)),d=_[n(291)](c+_[n(177)](s,0),o);return c/=r,d/=r,new e(h,c,d-c)})(t,i,s,j)}function Yn(t){const i=Un,s=Array.from(t)[i(238)](t=>t[i(384)](0));return new j(s)}class Kn{static get[Un(449)](){return 1}static get[Un(427)](){return 5}static get SEI(){return 6}static get[Un(324)](){return 7}static get[Un(379)](){return 8}static get[Un(272)](){return 9}static get[Un(159)](){const t=Un;return{[Kn[t(427)]]:t(427),[Kn[t(273)]]:t(273),[Kn[t(324)]]:t(324),[Kn.PPS]:"PPS",[Kn[t(449)]]:"NDR",[Kn.AUD]:t(272)}}static[Un(234)](t){const i=Un;return t[i(186)]in Kn[i(159)]?Kn[i(159)][t.ntype]:i(344)}[Un(365)](){const t=Un;return Kn[t(234)](this)+": NRI: "+this[t(209)]()}[Un(209)](){return this[Un(402)]}[Un(234)](){return this[Un(186)]}[Un(306)](){return this[Un(186)]===Kn.IDR}[Un(203)](){return this[Un(452)]}[Un(327)](){return this[Un(452)].byteLength}[Un(194)](){return 4+this[Un(327)]()}[Un(341)](){const t=Un,i=new j(this[t(194)]());return new DataView(i[t(366)]).setUint32(0,this[t(194)]()-4),i[t(251)](this.getPayload(),4),i}constructor(t){const i=Un;this[i(452)]=t,this[i(402)]=(96&this[i(452)][0])>>5,this[i(186)]=31&this[i(452)][0],this.isvcl=1==this[i(186)]||5==this[i(186)],this[i(309)]="",this.isfmb=!1}}class qn{[Un(433)](t){const i=Un;this.data=t,this[i(368)]=0,this.bitLength=8*t[i(413)]}get[Un(451)](){return this[Un(157)]-this.index}skipBits(t){const i=Un;if(this[i(451)]<t)return!1;this[i(368)]+=t}[Un(338)](t,i){void 0===i&&(i=!0);const s=Un;return this[s(259)](t,this[s(368)],i)}getBits(t,i,s){void 0===s&&(s=!0);const e=Un;if(this[e(451)]<t)return 0;const n=i%8,r=this.data[i/8|0]&255>>>n,h=8-n;if(h>=t)return s&&(this[e(368)]+=t),r>>h-t;{s&&(this[e(368)]+=h);const n=t-h;return r<<n|this[e(259)](n,i+h,s)}}[Un(444)](){const t=Un;let i;for(i=0;i<this[t(157)]-this[t(368)];++i)if(0!==this[t(259)](1,this[t(368)]+i,!1))return this[t(368)]+=i,i;return i}[Un(334)](){const t=Un;this[t(155)](1+this[t(444)]())}skipEG(){const t=Un;this[t(155)](1+this[t(444)]())}[Un(179)](){const t=Un,i=this.skipLZ();return this[t(338)](i+1)-1}[Un(248)](){const t=this[Un(179)]();return 1&t?1+t>>>1:-1*(t>>>1)}[Un(239)](){return 1===this[Un(338)](1)}[Un(419)](t){return void 0===t&&(t=1),this.readBits(8*t)}[Un(232)](){return this.readBits(16)}readUInt(){return this[Un(338)](32)}constructor(t){const i=Un;this[i(316)]=t,this[i(368)]=0,this[i(157)]=8*t.byteLength}}class jn{static[Un(267)](t,i){const s=Un;let e=[],n=!1,r=!1,h=!1,o=!1,a=0,u=0,c=0,d=[];for(;a<=t.byteLength;){if(a<t.byteLength){const i=t[a++];0!==i?(1===i&&u>1&&(c=u>2?4:3,d.push(a)),u=0):++u}else c=0,d.push(a++);if(d.length>1){const s=d.shift(),l=d[0]-c;if(s<l){let c=!1;const d=31&t[s];if(d===Kn.NDR?r=!0:d===Kn.IDR?n=!0:d===Kn.SPS?(c=h,h=!0):d===Kn.PPS&&(c=o,o=!0),!c)if(!i||d!==Kn.NDR&&d!==Kn.IDR)e.push(t.subarray(s,l));else{const i=new j(l-s);let n=0;for(a=s,u=0;a<l;){let s=t[a++];u>1&&3===s&&(u=0,s=t[a++]),0!==s?u=0:++u,i[n++]=s}e.push(i.subarray(0,n))}}}}let l=!0,f=!1;return r||n?r&&n&&(Gn[s(265)](s(331)),l=!1):(Gn[s(265)]("[H264Parser] No VCL NALUs found"),l=!1),n&&(h&&o?f=!0:Gn.warn(s(158))),{valid:l,idr:f,nalus:e}}static[Un(333)](t,i){let s,e=8,n=8;for(let r=0;r<i;r++)0!==n&&(s=t.readEG(),n=(e+s+256)%256),e=0===n?e:n}static[Un(432)](t){const i=Un;let s,e,n,r,h,o,a=new qn(t),u=0,c=0,d=0,l=0,f=1;if(a.readUByte(),s=a[i(419)](),a.readBits(5),a[i(155)](3),a[i(419)](),a[i(334)](),100===s||110===s||122===s||244===s||44===s||83===s||86===s||118===s||128===s){var v=a.readUEG();if(3===v&&a[i(155)](1),a[i(334)](),a[i(334)](),a[i(155)](1),a[i(239)]()){o=3!==v?8:12;for(let t=0;t<o;++t)a[i(239)]()&&(t<6?jn[i(333)](a,16):jn[i(333)](a,64))}}a[i(334)]();var g=a[i(179)]();if(0===g)a.readUEG();else if(1===g){a.skipBits(1),a[i(221)](),a[i(221)](),e=a[i(179)]();for(let t=0;t<e;++t)a[i(221)]()}if(a[i(334)](),a.skipBits(1),n=a[i(179)](),r=a.readUEG(),h=a[i(338)](1),0===h&&a[i(155)](1),a[i(155)](1),a.readBoolean()&&(u=a[i(179)](),c=a[i(179)](),d=a[i(179)](),l=a[i(179)]()),a[i(239)]()){if(a.readBoolean()){let t;switch(a.readUByte()){case 1:t=[1,1];break;case 2:t=[12,11];break;case 3:t=[10,11];break;case 4:t=[16,11];break;case 5:t=[40,33];break;case 6:t=[24,11];break;case 7:t=[20,11];break;case 8:t=[32,11];break;case 9:t=[80,33];break;case 10:t=[18,11];break;case 11:t=[15,11];break;case 12:t=[64,33];break;case 13:t=[160,99];break;case 14:t=[4,3];break;case 15:t=[3,2];break;case 16:t=[2,1];break;case 255:t=[a[i(419)]()<<8|a[i(419)](),a[i(419)]()<<8|a[i(419)]()]}t&&t[0]>0&&t[1]>0&&(f=t[0]/t[1])}a.readBoolean()&&a[i(155)](1),a[i(239)]()&&(a[i(155)](4),a[i(239)]()&&a[i(155)](24)),a[i(239)]()&&(a[i(334)](),a[i(334)]()),a.readBoolean()&&(a.readUInt(),a[i(187)](),a.readBoolean())}return{width:_[i(440)]((16*(n+1)-2*u-2*c)*f),height:(2-h)*(r+1)*16-(h?2:4)*(d+l)}}static[Un(386)](t){const i=Un;let s=new qn(t[i(203)]());s[i(419)](),t[i(196)]=0===s[i(179)](),t[i(309)]=s[i(179)]()}[Un(256)](t){const i=Un;var s=jn[i(432)](new j(t));this.track[i(237)]=s.width,this[i(233)].height=s.height,this.track[i(382)]=[new j(t)],this.track[i(210)]=i(292);let e=new DataView(t.buffer,t[i(188)]+1,4);for(let t=0;t<3;++t){var n=e[i(313)](t)[i(365)](16);n[i(268)]<2&&(n="0"+n),this.track[i(210)]+=n}}[Un(345)](t){const i=Un;this[i(233)][i(434)]=[new j(t)]}[Un(378)](t){const i=Un;if(!t)return!1;let s=!1;switch(t[i(234)]()){case Kn[i(427)]:case Kn.NDR:s=!0;break;case Kn[i(379)]:!this[i(233)][i(434)]&&(this[i(345)](t.getPayload()),!this[i(175)][i(296)]&&this[i(233)][i(434)]&&this.track[i(382)]&&(this.remuxer[i(296)]=!0)),s=!0;break;case Kn[i(324)]:!this.track.sps&&(this[i(256)](t[i(203)]()),!this[i(175)][i(296)]&&this[i(233)].pps&&this[i(233)][i(382)]&&(this.remuxer[i(296)]=!0)),s=!0;break;case Kn[i(272)]:break;case Kn.SEI:s=!0}return s}constructor(t){const i=Un;this.remuxer=t,this[i(233)]=t.mp4track}}class Qn{on(t,i){const s=Un;return!this[s(270)][t]&&(this.listener[t]=[]),this[s(270)][t].push(i),!0}off(t,i){const s=Un;if(this[s(270)][t]){var e=this[s(270)][t].indexOf(i);return e>-1&&this[s(270)][t][s(369)](e,1),!0}return!1}[Un(219)](){this.listener={}}[Un(225)](t,i){const s=Un;return!!this[s(270)][t]&&(this[s(270)][t].map(t=>{t[s(200)](null,[i])}),!0)}constructor(t){const i=Un;this.listener={},this[i(234)]=""|t}}class Jn{static box(t){for(var i=arguments.length,s=new Array(i>1?i-1:0),e=1;e<i;e++)s[e-1]=arguments[e];const n=Un;let r,h=8,o=s.length,a=o;for(;o--;)s[o]&&(h+=s[o].byteLength);for(r=new j(h),r[0]=h>>>24,r[1]=h>>>16&255,r[2]=h>>>8&255,r[3]=255&h,r[n(251)](t,4),o=0,h=8;o<a;++o)s[o]&&(r[n(251)](s[o],h),h+=s[o][n(413)]);return r}[Un(190)](t){const i=Un;return Jn[i(347)](Jn[i(212)][i(190)],Jn[i(418)][t])}[Un(244)](t){const i=Un;return Jn[i(347)](Jn[i(212)][i(244)],t)}[Un(380)](t,i){const s=Un;return Jn[s(347)](Jn[s(212)][s(380)],new j([0,0,0,0,0,0,0,0,0,0,0,0,t>>>24,t>>>16&255,t>>>8&255,255&t,0,0,0,0,85,196,0,0]))}[Un(215)](t){const i=Un;return Jn[i(347)](Jn[i(212)].mdia,this[i(380)](t[i(274)],t[i(290)]),this[i(190)](t[i(234)]),this[i(230)](t))}[Un(443)](t){const i=Un;return Jn.box(Jn[i(212)][i(443)],new j([0,0,0,0,t>>>24,t>>>16&255,t>>>8&255,255&t]))}[Un(230)](t){const i=Un;return t[i(234)]===i(407)?Jn[i(347)](Jn[i(212)][i(230)],Jn.box(Jn.types[i(255)],Jn.SMHD),Jn[i(147)],this[i(362)](t)):Jn[i(347)](Jn.types[i(230)],Jn[i(147)],this[i(362)](t),Jn[i(347)](Jn[i(212)].vmhd,Jn[i(438)]))}[Un(370)](t,i,s){const e=Un;return Jn[e(347)](Jn.types.moof,this[e(443)](t),this[e(293)](s,i))}[Un(295)](t,i,s){const e=Un;let n=t[e(268)],r=[];for(;n--;)r[n]=this.trak(t[n]);return Jn.box[e(200)](null,[Jn[e(212)][e(295)],this[e(240)](s,i),this[e(447)](t)][e(389)](r)[e(389)](this[e(322)](t)))}[Un(322)](t){const i=Un;let s=t[i(268)],e=[];for(;s--;)e[s]=this[i(305)](t[s]);return Jn[i(347)][i(200)](null,[Jn[i(212)][i(322)]][i(389)](e))}[Un(240)](t,i){const s=Un;let e=new j([0,0,0,0,0,0,0,0,0,0,0,0,t>>>24,t>>>16&255,t>>>8&255,255&t,i>>>24,i>>>16&255,i>>>8&255,255&i,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return Jn[s(347)](Jn.types.mvhd,e)}[Un(420)](t){const i=Un;let s=t[i(428)]||[],e=new j(4+s.length);for(let t=0;t<s[i(268)];t++){const n=s[t][i(375)];e[t+4]=n.dependsOn<<4|n[i(149)]<<2|n[i(422)]}return Jn[i(347)](Jn[i(212)][i(420)],e)}[Un(362)](t){const i=Un;return Jn[i(347)](Jn.types[i(362)],this[i(165)](t),Jn.box(Jn[i(212)][i(329)],Jn[i(421)]),Jn[i(347)](Jn.types[i(227)],Jn[i(377)]),Jn[i(347)](Jn.types[i(235)],Jn[i(218)]),Jn[i(347)](Jn[i(212)].stco,Jn[i(213)]))}[Un(303)](t){const i=Un;let s,e,n,r=[],h=[];for(s=0;s<t[i(382)].length;s++)e=t.sps[s],n=e[i(413)],r.push(n>>>8&255),r.push(255&n),r=r[i(389)](Array.prototype[i(314)][i(395)](e));for(s=0;s<t[i(434)][i(268)];s++)e=t[i(434)][s],n=e[i(413)],h[i(406)](n>>>8&255),h[i(406)](255&n),h=h.concat(Array.prototype[i(314)].call(e));const o=Jn[i(347)](Jn[i(212)][i(408)],new j([1,r[3],r[4],r[5],255,224|t.sps[i(268)]].concat(r)[i(389)]([t[i(434)][i(268)]]).concat(h))),a=t[i(237)],u=t[i(374)],c=Jn[i(347)](Jn.types[i(441)],Jn.box(Jn[i(212)][i(318)],new j([97,118,99,49])),Jn[i(347)](Jn[i(212)][i(349)],new j([0,0,0,0,...Yn(this[i(285)][i(154)][i(415)][i(201)]),0,1,0,0])),Jn.box(Jn.types[i(217)],this[i(298)](i(415))));return Jn[i(347)](Jn[i(212)].encv,new j([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,a>>>8&255,255&a,u>>>8&255,255&u,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,65,86,67,32,67,111,100,105,110,103,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]),o,c)}[Un(372)](t){const i=Un;let s=t[i(154)][i(413)],e=new j(26+s+3);return e[i(251)]([0,0,0,0,3,23+s,0,1,0,4,15+s,64,21,0,0,0,0,0,0,0,0,0,0,0,5,s]),e[i(251)](t[i(154)],26),e.set([6,1,2],26+s),e}[Un(403)](t){const i=Un,s=t[i(354)];return Jn[i(347)](Jn[i(212)][i(403)],new j([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t[i(390)],0,16,0,0,0,0,s>>>8&255,255&s,0,0]),Jn[i(347)](Jn[i(212)][i(372)],this[i(372)](t)))}[Un(266)](t){const i=Un,s=t[i(354)];return new j([0,t[i(390)],1,56,0,0,s>>>8&255,255&s,0,0,0])}[Un(416)](t){const i=Un,s=t.audiosamplerate;return Jn[i(347)](Jn.types[i(416)],new j([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t[i(390)],0,16,0,0,0,0,s>>>8&255,255&s,0,0]),Jn[i(347)](Jn[i(212)][i(266)],this[i(266)](t)))}[Un(394)](t){const i=Un,s=Jn[i(347)](Jn.types[i(266)],this.dOps(t)),e=Jn[i(347)](Jn.types[i(441)],Jn.box(Jn.types.frma,new j([79,112,117,115])),Jn[i(347)](Jn.types.schm,new j([0,0,0,0,...Yn(this[i(285)][i(154)].audio[i(201)]),0,1,0,0])),Jn.box(Jn.types[i(217)],this[i(298)](i(407)))),n=t[i(354)];return Jn[i(347)](Jn[i(212)].enca,new j([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t[i(390)],0,16,0,0,0,0,n>>>8&255,255&n,0,0]),s,e)}[Un(165)](t){const i=Un;return t[i(234)]===i(407)?Jn[i(347)](Jn[i(212)][i(165)],Jn[i(168)],t[i(199)]?this[i(394)](t):this[i(416)](t)):Jn[i(347)](Jn.types[i(165)],Jn[i(168)],this[i(303)](t))}[Un(278)](t){const i=Un,s=t.id,e=t[i(290)],n=t[i(237)],r=t[i(374)],h=t[i(388)];return Jn[i(347)](Jn[i(212)].tkhd,new j([0,0,0,7,0,0,0,0,0,0,0,0,s>>>24,s>>>16&255,s>>>8&255,255&s,0,0,0,0,e>>>24,e>>>16&255,e>>>8&255,255&e,0,0,0,0,0,0,0,0,0,0,0,0,255&h,h%1*10&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,n>>>8&255,255&n,0,0,r>>>8&255,255&r,0,0]))}[Un(293)](t,i){var s;const e=Un,n=t.id,r=t[e(428)][0][e(171)],h=t.samples[0][e(290)],o=t[e(428)][0].flags,a=Jn[e(347)](Jn[e(212)].tfhd,new j([0,2,0,58,n>>>24,n>>>16&255,n>>>8&255,255&n,0,0,0,1,h>>>24,n>>>16&255,h>>>8&255,255&h,r>>>24,r>>>16&255,r>>>8&255,255&r,0,o[e(264)],0,0])),u=Jn[e(347)](Jn[e(212)].tfdt,new j([0,0,0,0,i>>>24,i>>>16&255,i>>>8&255,255&i]));if(t.encrypted){let i,n;if(t[e(234)]===e(415)?(i=!0,n=this[e(350)][e(415)]+(null==(s=t.samples[0][e(191)])?void 0:s.byteLength)):(i=!1,n=this[e(350)].audio),n>0){const s=this[e(242)](n),r=this[e(340)](t[e(428)],i),h=s[e(268)]+20+r[e(268)]+a[e(268)]+u[e(268)]+8+16+8+8,o=this[e(271)](t,h);return Jn[e(347)](Jn[e(212)][e(293)],a,u,o,s,this.saio(h-r[e(268)]+o.length+8),r)}{const i=this[e(340)](null,!1),s=i.length+a[e(268)]+u[e(268)]+8+16+8+8,n=this[e(271)](t,s);return Jn[e(347)](Jn.types[e(293)],a,u,n,i)}}return Jn.box(Jn[e(212)].traf,a,u,this.trun(t,a[e(268)]+u.length+8+16+8+8))}trak(t){const i=Un;return t.duration=t[i(290)]||4294967295,Jn.box(Jn[i(212)].trak,this[i(278)](t),this[i(215)](t))}[Un(305)](t){const i=Un,s=t.id;return Jn[i(347)](Jn.types[i(305)],new j([0,0,0,0,s>>>24,s>>>16&255,s>>>8&255,255&s,0,0,0,1,0,0,0,16,0,0,0,0,0,0,0,0]))}trun(t,i){const s=Un;let e=(t[s(428)]||[])[s(268)],n=new j(12);return i+=20,n.set([0,0,0,1,e>>>24,e>>>16&255,e>>>8&255,255&e,i>>>24,i>>>16&255,i>>>8&255,255&i],0),Jn[s(347)](Jn.types[s(271)],n)}[Un(224)](t,i){const s=Un,e=s(445),n=function(t){const i=function(t){const i=Un;let s="";for(let e=0;e<t[i(268)];e+=16e3){const n=t.subarray(e,e+16e3);s+=String[i(358)].apply(null,n)}return s}(zn(t));return btoa(i)}(function(t){const i=Un,s=[];return s[i(406)](t[3]),s[i(406)](t[2]),s.push(t[1]),s.push(t[0]),s[i(406)](t[5]),s[i(406)](t[4]),s.push(t[7]),s.push(t[6]),(t=zn(t))[i(251)](s,0),t}(t));return zn(function(t){const i=Un,s=new j(2*t[i(268)]),e=new DataView(s[i(366)]);for(let s=0;s<t[i(268)];++s){const n=t.charCodeAt(s);e[i(253)](2*s,n,true)}return s[i(366)]}([s(328)+e+'" version="4.3.0.0">',s(308),"<PROTECTINFO>",s(398),s(353),s(216)+n+'"',">",s(412),s(249),s(391),i?"<LA_URL>"+i+s(423):"",s(351),s(269)].join("")))}pssh(t){const i=Un;if(this[i(285)][i(383)][i(202)](i(178)))return Jn[i(347)](Jn.types[i(447)],new j([0,0,0,0,237,239,139,169,121,214,74,206,163,200,39,220,213,29,33,237,0,0,0,18,18,16,...this[i(285)][i(154)][t[0][i(234)]].keyId]));if(this[i(285)][i(383)]===i(356)){const s=this[i(224)](this[i(285)][i(154)][t[0][i(234)]][i(429)],this.drm[i(371)]),e=s[i(413)];return Jn[i(347)](Jn[i(212)][i(447)],new j([0,0,0,0,154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149,e>>>24,e>>>16&255,e>>>8&255,255&e,...s]))}return this.drm[i(383)]===i(323)?Jn[i(347)](Jn[i(212)][i(447)],new j([1,0,0,0,16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75,0,0,0,1,...this.drm[i(154)][t[0].type].keyId,0,0,0,0])):this.drm[i(383)]===i(397)?null:void Gn[i(189)](i(393)+this[i(285)][i(383)])}[Un(298)](t){const i=Un;let s,e,n=this[i(285)][i(154)][t];return n[i(201)]===i(226)?(s=new j([16,...n.iv]),e=25):(s=new j([]),e=0),Jn[i(347)](Jn[i(212)][i(298)],new j([1,0,0,0,0,e,1,this[i(350)][t],...n[i(429)],...s]))}[Un(242)](t){const i=Un;return Jn[i(347)](Jn[i(212)][i(242)],new j([0,0,0,0,t,0,0,0,1]))}[Un(204)](t){const i=Un;return Jn[i(347)](Jn[i(212)][i(204)],new j([0,0,0,0,0,0,0,1,t>>>24,t>>>16&255,t>>>8&255,255&t]))}[Un(340)](t,i){const s=Un;let e=null;return t&&(1!==t[s(268)]&&Gn[s(189)](s(182)+t[s(268)]+" samples - expected 1"),e=t[0][s(191)]),e&&e[s(413)]?Jn[s(347)](Jn[s(212)].senc,new j([0,0,0,i?2:0,0,0,0,1,...e])):Jn.box(Jn[s(212)][s(340)],new j([0,0,0,0,0,0,0,1]))}[Un(439)](t,i,s){const e=Un,n=this[e(295)](t,i,s);let r=new j(Jn[e(183)].byteLength+n[e(413)]);return r[e(251)](Jn[e(183)]),r[e(251)](n,Jn[e(183)][e(413)]),r}constructor(t){var i,s;const e=Un;this[e(285)]=t,this.saiIvSize={video:"cenc"===(null==(i=t.config[e(415)])?void 0:i[e(201)])?16:0,audio:"cenc"===(null==(s=t[e(154)][e(407)])?void 0:s[e(201)])?16:0},Jn[e(212)]={avc1:[],encv:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],Opus:[],dOps:[],enca:[],mvex:[],mvhd:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[],pssh:[],sinf:[],frma:[],schm:[],schi:[],tenc:[],saiz:[],saio:[],senc:[]};for(let t in Jn[e(212)])Jn.types[t]=[t[e(384)](0),t[e(384)](1),t[e(384)](2),t.charCodeAt(3)];const n=new j([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),r=new j([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);Jn.HDLR_TYPES={video:n,audio:r};const h=new j([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),o=new j([0,0,0,0,0,0,0,0]);Jn.STTS=Jn[e(377)]=Jn[e(213)]=o,Jn.STSZ=new j([0,0,0,0,0,0,0,0,0,0,0,0]),Jn[e(438)]=new j([0,0,0,1,0,0,0,0,0,0,0,0]),Jn[e(307)]=new j([0,0,0,0,0,0,0,0]),Jn[e(168)]=new j([0,0,0,0,0,0,0,1]);const a=new j([105,115,111,109]),u=new j([97,118,99,49]),c=new j([0,0,0,1]);Jn[e(183)]=Jn[e(347)](Jn[e(212)].ftyp,a,c,a,u),Jn[e(147)]=Jn[e(347)](Jn.types.dinf,Jn[e(347)](Jn[e(212)][e(280)],h))}}let $n=1;class tr{static[Un(411)](){return $n++}[Un(246)](){const t=Un;this.mp4track[t(263)]=0,this[t(207)][t(428)]=[]}[Un(211)](){const t=Un;return!(!this[t(296)]||!this[t(428)][t(268)])}constructor(){this.seq=1}}class ir extends tr{resetTrack(){const t=Un;this[t(437)]=1,this[t(222)]=0,this[t(336)]=0}[Un(181)](t,i,s){const e=Un;if(t[e(268)]>0)for(let n=0;n<t.length;n++){let r=t[n],h=r[e(392)],o=h[e(413)];this.samples[e(406)]({units:h,size:o,duration:r.duration,sampleAuxInfo:i,timestamp:s}),this[e(207)][e(263)]+=o}}[Un(161)](){const t=Un;if(!this.samples)return null;let i,s=this[t(207)][t(428)];for(;this[t(428)][t(268)];){let e=this.samples[t(342)](),n=(1e3*e.timestamp|0)-this[t(222)]|0;n<5&&(n=5),this[t(336)]=this[t(222)],this.nextDts+=n,i={size:e[t(171)],duration:n,cts:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1},sampleAuxInfo:e[t(191)]};let r=new j(e[t(171)]);return r[t(251)](e.units,0),s[t(406)](i),new j(r[t(366)],0,e[t(171)])}return null}constructor(t){const i=Un;super(),this[i(296)]=!0,this[i(222)]=0,this.dts=0,this.mp4track={id:tr[i(411)](),type:i(407),channelCount:2,audiosamplerate:48e3,len:0,fragmented:!0,timescale:t,duration:t,samples:[],codec:i(364),encrypted:!0},this[i(428)]=[]}}class sr extends tr{[Un(297)](){const t=Un;this[t(437)]=1,this[t(296)]=!1,this[t(207)][t(382)]="",this.mp4track[t(434)]="",this.nextDts=0,this.dts=0}remux(t,i,s){const e=Un;for(let n of t){let t=[],r=0;for(let i of n[e(392)])this[e(302)].parseNAL(i)&&(t[e(406)](i),r+=i[e(194)]());t[e(268)]>0&&this.readyToDecode&&(this[e(207)][e(263)]+=r,this[e(428)].push({units:t,size:r,keyFrame:n.keyFrame,duration:n[e(290)],sampleAuxInfo:i,timestamp:s}))}}[Un(161)](){const t=Un;if(!this[t(211)]()||!this[t(428)])return null;let i,s=this.mp4track[t(428)],e=this.samples[t(342)](),n=e.units,r=(1e3*e[t(332)]|0)-this[t(222)]|0;r<5&&(r=5),r>5e3&&Gn[t(381)](t(430)+(r/1e3|0)+" s"),this.dts=this[t(222)],this[t(222)]+=r,i={size:e.size,duration:r,cts:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,isNonSync:e[t(148)]?0:1,dependsOn:e[t(148)]?2:1},sampleAuxInfo:e[t(191)]};let h=0;for(const i of n)h+=i[t(194)]();let o=0,a=new j(h);for(const i of n)a[t(251)](i[t(341)](),o),o+=i[t(194)]();return s.push(i),new j(a[t(366)],0,h)}constructor(t,i){const s=Un;super(),this[s(296)]=!1,this[s(222)]=0,this[s(336)]=0,this[s(361)]=i,this[s(207)]={id:tr[s(411)](),type:s(415),len:0,fragmented:!0,sps:"",pps:"",width:0,height:0,timescale:t,duration:t,samples:[],encrypted:!0},this[s(428)]=[],this[s(302)]=new jn(this)}}class er extends Qn{[Un(281)](t){const i=Un;("video"===t||"both"===t)&&(this[i(357)][i(415)]=new sr(this.timescale,this[i(361)]),this[i(335)][i(406)](i(415))),(t===i(407)||t===i(417))&&(this[i(357)][i(407)]=new ir(this.timescale),this.trackTypes[i(406)](i(407)))}[Un(250)](){const t=Un;for(let i of this[t(335)])this.tracks[i].resetTrack();this[t(260)]=!1}[Un(262)](){const t=Un;this.tracks={},this[t(219)]()}[Un(246)](){const t=Un;if(this[t(260)])for(let i of this[t(335)]){let s=this[t(357)][i];for(;;){let e=s[t(161)]();if(!e||!e.byteLength)break;let n={type:i,payload:Zn(this[t(164)][t(370)](s[t(437)]++,s[t(336)],s[t(207)]),this.mp4[t(244)](e)),dts:s[t(336)]};this[t(225)](t(366),n),s[t(246)]()}}else this[t(211)]()&&(this[t(225)]("ready"),this.initSegment(),this[t(260)]=!0,this[t(246)]())}[Un(439)](){const t=Un;for(let i of this[t(335)]){let s=this[t(357)][i],e={type:i,payload:this[t(164)][t(439)]([s[t(207)]],this[t(163)],this.timescale)};this[t(225)]("buffer",e)}}isReady(){const t=Un;for(let i of this[t(335)])if(!this.tracks[i][t(296)]||!this[t(357)][i][t(428)][t(268)])return!1;return!0}[Un(181)](t){const i=Un;for(let s of this[i(335)]){let e=t[s];e.length>0&&this[i(357)][s][i(181)](e,"audio"===s?t.audioSampleAuxInfo:t[i(310)],t[i(332)])}this[i(246)]()}constructor(t,i){const s=Un;super(s(175)),this[s(260)]=!1,this.trackTypes=[],this[s(357)]={},this[s(274)]=1e3,this[s(163)]=0,this[s(361)]=t,this.mp4=i}}function nr(){const t=["stsd","isSupported","src","STSD","endMSE","abort","size","appendBufferError","addSourceBuffer","setupMSE","remuxer","addEventListener","max","com.widevine","readUEG"," - ","remux","Received ","FTYP","readyState","valid","ntype","readUInt","byteOffset","error","hdlr","sampleAuxInfo","webkitsourceopen","Checking codec","getSize","irrecoverableError","isfmb","[MSE] buffer error:","url","encrypted","apply","encryption","startsWith","getPayload","saio","open","[MSE] source buffer error","mp4track","append","getNri","codec","isReady","types","STCO","feed","mdia",'VALUE="',"schi","STSZ","offAll","jmuxer","skipEG","nextDts","1036611gAoRea","generatePlayReadyHeader","dispatch","cbcs","stsc","endOfStream","6576815frVeWy","minf","releaseBuffer","readUShort","track","type","stsz","isvcl","width","map","readBoolean","mvhd","onReady","saiz","reportDiscontinuity","mdat","bufferControllers","flush","patchSampleAuxinfo","readEG","</KIDS>","reset","set","onMSEClose","setUint16","idr","smhd","parseSPS","bind","message","getBits","initialized","sourceBuffer","destroy","len","isNonSync","warn","dOps","extractNALUs","length","</WRMHEADER>","listener","trun","AUD","SEI","timescale","Num frames in chunk: ","7620738FWzrwf","mode","tkhd","dbgMediaDump","dref","addTrack","doAppend","options","[MSE] sourceclose","drm","mediaSource","Failure: Browser doesn't support MSE/MMS",'/mp4; codecs="',"function","duration","min","avc1.","traf","[MSE] sourceopen","moov","readyToDecode","resetTrack","tenc","onMSEOpen","MediaSource","removeSourceBuffer","h264","encv","sourceopen","trex","isKeyframe","SMHD","<DATA>","stype","videoSampleAuxInfo","ended","getElementById","getUint8","slice","audioSampleAuxInfo","data","ready","frma","mseReady","string","4760043VatbTq","mvex","org.w3.clearkey","SPS","buffered","no video element were found to render, provide a valid video element","getPayloadSize",'<WRMHEADER xmlns="',"stts","start","[H264Parser] Both IDR and non-IDR VCL NALUs found in the same frame","timestamp","skipScalingList","skipUEG","trackTypes","dts","queue","readBits","mseEnded","senc","getData","shift","[MSE] error: ","UNKNOWN","parsePPS","appendBuffer","box","initBrowser","schm","saiIvSize","</DATA>","out",'<KID ALGID="AESCTR" ',"audiosamplerate","reduce","com.microsoft.playready.recommendation","tracks","fromCharCode","updating","calculateExpectedSizeFromSai","videoElement","stbl","1159252OkMfWN","opus","toString","buffer","nalus","index","splice","moof","licenseUrl","esds","disableRemotePlayback","height","flags","createBuffer","STSC","parseNAL","PPS","mdhd","debug","sps","keySystem","charCodeAt","mse","parseHeader","isSafari","volume","concat","channelCount","</PROTECTINFO>","units","Unsupported DRM type ","enca","call","POSITIVE_INFINITY","com.apple.fps","<KIDS>","getVideoFrames","646233hEZDuD","4LuRDMh","nri","mp4a","ManagedMediaSource","buffer error","push","audio","avcC","onError","Buffered range ","getTrackID","</KID>","byteLength","No A/V data","video","Opus","both","HDLR_TYPES","readUByte","sdtp","STTS","hasRedundancy","</LA_URL>","revokeObjectURL","BYTES_PER_ELEMENT","webkitsourceclose","IDR","samples","keyId","timestamp gap: ","node","readSPS","setData","pps","onBuffer","remuxController","seq","VMHD","initSegment","ceil","sinf","sourceclose","mfhd","skipLZ","http://schemas.microsoft.com/DRM/2007/03/PlayReadyHeader","Browser does not support codec","pssh","mediasource is not available to end: ","NDR","isReset","bitsAvailable","payload","DINF","keyFrame","isDependedOn","isTypeSupported","assign","waitingForIdr","8hmeyto","config","skipBits","remove","bitLength","[H264Parser] IDR without SPS/PPS, not suitable for recovery","TYPES","13659xNePtU","getFramePayload","onBufferError","mediaDuration","mp4"];return(nr=function(){return t})()}class rr extends Qn{[Un(262)](){const t=Un;this[t(337)]=null,this[t(279)]=null;try{this[t(261)]&&(this.sourceBuffer[t(170)](),this.mse[t(301)](this[t(261)]),this.sourceBuffer=null)}catch(t){}this.offAll()}[Un(282)](){const t=Un;if(this[t(337)][t(268)]&&this[t(261)]&&!this.sourceBuffer.updating){if(this[t(261)].buffered.length>1){for(let i=0;i<this[t(261)][t(325)][t(268)];++i){const s=i<this[t(261)].buffered.length-1;Gn[t(381)](t(410)+i+(s?" (remove)":"")+": "+this[t(261)][t(325)][t(330)](i)+t(180)+this[t(261)][t(325)].end(i)),s&&this[t(261)][t(156)](this[t(261)].buffered[t(330)](i),this[t(261)][t(325)].end(i))}if(this[t(261)][t(359)])return}try{this[t(261)][t(346)](this[t(337)]),this[t(337)]=new j}catch(i){this[t(225)](t(189),{type:this.type,name:t(172),error:i})}}}[Un(214)](t,i){const s=Un;this.dbgMediaDump&&(this[s(279)][s(208)](t,i)||(this[s(279)]=null)),this[s(195)]||(this.queue=Zn(this.queue,t)),this[s(282)]()}constructor(t,i,s){var e;const n=Un;super(n(366)),this[n(234)]=i,this[n(337)]=new j;const r=null==(e=On.mediaDumps[i])?void 0:e[n(352)].durationMs;r>0&&(this[n(279)]=new Wn(i,n(164),r)),this.sourceBuffer=t,this[n(385)]=s,this[n(195)]=!1,this[n(261)].addEventListener(n(189),t=>{const i=n;Gn.warn(i(206),t,this.type),this[i(195)]=!0,this.dispatch("error",{type:this[i(234)],name:i(366),error:i(405)})})}}class hr extends Qn{static isSupported(t){const i=Un;return s[i(404)]?s.ManagedMediaSource[i(150)](t):!!s[i(300)]&&s[i(300)][i(150)](t)}[Un(348)](){const t=Un;typeof this[t(283)][t(431)]===t(320)&&""==this.options[t(431)]&&Gn[t(189)](t(326)),this[t(319)]=!1,this[t(174)]()}[Un(174)](){const t=Un;if(!s.ManagedMediaSource&&!s[t(300)])throw t(287);s.ManagedMediaSource?(this.node[t(373)]=!0,this[t(286)]=new ManagedMediaSource):this[t(286)]=new MediaSource,this[t(198)]=URL.createObjectURL(this[t(286)]),this.node[t(167)]=this[t(198)],this[t(339)]=!1,this[t(286)][t(176)](t(304),this[t(299)][t(257)](this)),this.mediaSource.addEventListener(t(442),this[t(252)][t(257)](this)),this.mediaSource.addEventListener(t(192),this[t(299)][t(257)](this)),this[t(286)][t(176)](t(426),this[t(252)][t(257)](this)),this[t(286)][t(176)](t(189),function(i){const s=t;Gn[s(189)](s(343),i[s(258)])})}[Un(169)](){const t=Un;if(!this.mseEnded)try{this[t(339)]=!0,this[t(286)][t(184)]===t(205)&&this[t(286)][t(228)]()}catch(i){Gn[t(189)](t(448),i)}}[Un(243)](){const t=Un;Gn[t(381)]("Discontinuity!"),this[t(152)]=!0}feed(t){const i=Un;let s={video:[],audio:[]};if(this[i(195)]||this[i(339)]||!t||!this.remuxController)return-1;if(t[i(415)]){s[i(332)]=t.timestamp;const e=this[i(360)](t[i(310)],this[i(164)][i(350)][i(415)]),n=e!=t.video[i(413)];let r=jn[i(267)](t[i(415)],n);if(!r[i(185)]||r[i(367)].length<1)return 0;if(this.waitingForIdr){if(!r[i(254)])return 0;this[i(152)]=!1}if(!Xn&&t[i(310)]){const s=r[i(367)][i(355)]((t,s)=>t+4+s[i(413)],0);s!==e&&this.patchSampleAuxinfo(t[i(310)],this[i(164)][i(350)][i(415)],s-e)}s[i(415)]=this[i(399)](r[i(367)]),s[i(310)]=t[i(310)]}return t[i(407)]&&(s[i(332)]=t.timestamp,s[i(407)]=[{units:t[i(407)]}],s[i(315)]=t[i(315)]),t[i(415)]||t[i(407)]?(this[i(436)][i(181)](s),0):(Gn[i(189)](i(414)),0)}[Un(399)](t){const i=Un;let s=[],e=[],n=!1,r=!1;for(let h of t){let t=new Kn(h);t[i(234)]()!==Kn[i(427)]&&t[i(234)]()!==Kn[i(449)]||jn[i(386)](t),s.length&&r&&(t[i(196)]||!t[i(236)])&&(e[i(406)]({units:s,keyFrame:n}),s=[],n=!1,r=!1),s.push(t),n=n||t.isKeyframe(),r=r||t[i(236)]}if(s[i(268)])if(r)e.push({units:s,keyFrame:n});else{let t=e[i(268)]-1;t>=0&&(e[t][i(392)]=e[t][i(392)].concat(s))}return 1!==e[i(268)]&&Gn.warn(i(275)+e[i(268)]),e}[Un(360)](t,i){if(!t)return 0;const s=(t[0]<<8)+t[1],e=i+2+4;let n=0,r=2;for(;0<s&&r+e<=t.byteLength;){r+=i;const s=(t[r]<<8)+t[r+1],e=(t[r+2]<<24)+(t[r+3]<<16)+(t[r+4]<<8)+t[r+5];r+=6,n+=s+e}return n}[Un(247)](t,i,s){let e=2;if(0<(t[0]<<8)+t[1]&&e+(i+2+4)<=t.byteLength){e+=i;let n=(t[e]<<8)+t[e+1];n+=s,n>=0&&(t[e]=n>>>8&255,t[e+1]=255&n)}return 0}[Un(376)](){const t=Un;if(this[t(319)]&&this[t(436)]&&this[t(436)][t(211)]()&&!this[t(245)]){this[t(245)]={};for(let i in this[t(436)][t(357)]){let s=this.remuxController[t(357)][i];const e=""[t(389)](i,t(288)).concat(s.mp4track[t(210)],'"');if(Gn[t(381)](t(193),e),!hr[t(166)](e))return Gn.error(t(446)),!1;let n=this.mediaSource[t(173)](e);this[t(245)][i]=new rr(n,i,this[t(286)]),this[t(245)][i].on(t(189),this[t(162)][t(257)](this))}}}[Un(231)](){const t=Un;for(let i in this.bufferControllers)this[t(245)][i][t(282)]()}[Un(435)](t){const i=Un;this[i(319)]&&this[i(245)]&&this[i(245)][t[i(234)]]&&this[i(245)][t[i(234)]].feed(t[i(452)],t[i(336)])}onMSEOpen(){const t=Un;Gn[t(381)](t(294)),this[t(286)].readyState!==t(311)&&(this[t(286)][t(290)]=Number[t(396)],this[t(319)]=!0,typeof this[t(283)].onReady===t(289)&&this[t(283)][t(241)][t(395)](null,this.isReset),URL[t(424)](this[t(198)]),this[t(376)]())}[Un(252)](){const t=Un;Gn[t(381)](t(284)),this.mseReady=!1,this[t(169)]()}onBufferError(t){const i=Un;Gn.warn(i(197),t),this[i(195)]=!0,this.endMSE(),typeof this.options[i(409)]===i(289)&&this[i(283)][i(409)][i(395)](null,t)}constructor(t){const i=Un;super(i(220)),this[i(195)]=!1,this[i(152)]=!0,this[i(450)]=!1,this[i(319)]=!1,this.mseEnded=!1;let s={node:"",mode:i(415),debug:!1,onReady:function(){},onError:function(t){}};this.options=w[i(151)]({},s,t),this[i(431)]=typeof this.options[i(431)]===i(320)?h[i(312)](this[i(283)][i(431)]):this[i(283)][i(431)],this[i(285)]=t.drm,this[i(164)]=new Jn(this[i(285)]),this[i(436)]=new er(this.node,this[i(164)]),this[i(436)][i(281)](this[i(283)][i(277)]),this[i(436)].on(i(366),this.onBuffer[i(257)](this)),this[i(436)].on(i(317),this[i(376)][i(257)](this)),this[i(348)]()}}function or(t,i){const s=ar();return(or=function(t,i){return s[t-=182]})(t,i)}function ar(){const t=["1247170HwkwNv","Av","gitVersion","352GaBvIm","toISOString","14XlATBT","2568948xDjIMf","1027225mjPCDe","19691yiLZrh","195999uPnZlk","3038288UlnUQm","2033937CLMUfn"];return(ar=function(){return t})()}!function(){const t=or,i=ar();for(;;)try{if(x(t(182))/1+x(t(192))/2*(x(t(184))/3)+-x(t(185))/4+-x(t(187))/5+x(t(193))/6+-x(t(183))/7*(x(t(190))/8)+-x(t(186))/9==553943)break;i.push(i.shift())}catch(t){i.push(i.shift())}}();const ur=vr;function cr(){const t=["1236858jPUtaw","certificate","11225xsjioT","275391VrsSlK","5816evMpkd","CrsCCAMSEKDc0WAwLAQT1SB2ogyBJEwYv4Tx7gUijgIwggEKAoIBAQC8Xc/GTRwZDtlnBThq8","7299lkgbxa","1470Lkqtku","production","Development","charCodeAt","xUuwokpsqVIHZrJfu62ar+BF8UVUKdK5oYQoiTZd9OzK3kr29kqGGk3lSgM0/p499p/FUL8oH","baseUrl","375060LzZhzk","230861ZKueQt","12pvGCSu","https://lic.drmtoday.com","35fxICRY","pQnNI61gzHO42XZOMuxytMm0F6puNHTTqhyY3Z290YqvSDdOB+UY5QJuXJgjhvOUD9+oaLlvT","Production","development","https://lic.test.drmtoday.com","UrTEfQxfPR4dJTquE+IDLAi5yeVVxzbAgMBAAE6DGNhc3RsYWJzLmNvbUABEoADMmGXpXg/0q","from","RL9KsD0v7ysBQVdUXEbJotcFz71tI5qc3jwr6GjYIPA3VzusD17PN6AGQniMwxJV12z/EgnUo","baigovcoURAZcr1d/G0rpREjLdVLG0Gjqk63Gx688W5gh3TKemsK3R1jV0dOfj3e6uV/kTpsN","pcFB13osydpD2AaDsgWo5RWJcNf+fzCgtUQx/0Au9+xVm5LQBdv8Ja4f2oiHN3dw","V382D1oJAM0F/YgCQtNDLz7vTWJ+QskNGi5Dd2qzO4s48Cnx5BLvL4H0xCRSw2Ed6ekHSdrRU","27eI5MATX39gYtCnn7dDXVxo4/rCYK0A4VemC3HRai2X3pSGcsKY7+6we7h4IycjqtuGtYg8A","HzgsJ7Hajdsyzn0Vs3+VysAgaJAkXZ+k+N6Ka0WBiZlCtcunVJDiHQbz1sF9GvcePUUi2fM/h","Staging","staging","name"];return(cr=function(){return t})()}!function(){const t=vr,i=cr();for(;;)try{if(x(t(326))/1+x(t(325))/2+x(t(315))/3+x(t(327))/4*(-x(t(314))/5)+-x(t(312))/6+x(t(329))/7*(x(t(316))/8)+-x(t(318))/9*(x(t(319))/10)==181728)break;i.push(i.shift())}catch(t){i.push(i.shift())}}();const dr=ur(317)+ur(306)+"wyoYOE+M/t1oIbccwlTQ7o+BpV1X6TB7fxFyx1jsBtRsBWphU65w121zqmSiwzZzJ4xsXVQCJ"+ur(330)+"+vwmV2/NJWxKqHBKdL9JqvOnNiQUF0hDI7Wf8Wb63RYSXKE27Ky31hKgx1wuq7TTWkA+kHnJT"+ur(334)+ur(323)+ur(308)+"7hyskG5ZLAyJMzTvgnV3D8/I5Y6mCFBPb/+/Ri+9bEvquPF3Ff9ip3yEHu9mcQeEYCeGe9zR/"+ur(307)+ur(304)+ur(336)+ur(305),lr=j[ur(335)](s.atob(dr),t=>t[ur(322)](0));class fr{toString(){return this.name}[ur(324)](){const t=ur;switch(this[t(311)]){case"staging":return"https://lic.staging.drmtoday.com";case"development":return t(333);default:return t(328)}}[ur(313)](){return lr}constructor(t){this[ur(311)]=t}}function vr(t,i){const s=cr();return(vr=function(t,i){return s[t-=304]})(t,i)}fr[ur(309)]=new fr(ur(310)),fr[ur(331)]=new fr(ur(320)),fr[ur(321)]=new fr(ur(332));const _r=gr;function gr(t,i){const s=mr();return(gr=function(t,i){return s[t-=252]})(t,i)}function mr(){const t=["SampleAuxInfo corrupted","error","50012RXzLep","3301necisu","[RTC-DRM]","subarray","buffer","64zGPhLV","162pDdDkb","659466dfDPqj","SampleAuxInfo corrupted (postfix not found)","data","4199670WddvRf","95WaGAXy","getUint8","137436hbCkvG","1351035XuhSnW","getUint16","byteLength","184863QcuifQ"];return(mr=function(){return t})()}!function(){const t=gr,i=mr();for(;;)try{if(-x(t(253))/1*(x(t(258))/2)+x(t(259))/3+x(t(252))/4*(-x(t(263))/5)+-x(t(265))/6+-x(t(269))/7*(-x(t(257))/8)+-x(t(266))/9+x(t(262))/10==173102)break;i.push(i.shift())}catch(t){i.push(i.shift())}}();const pr=Ln(_r(254));!function(){const t=yr,i=Sr();for(;;)try{if(x(t(369))/1+x(t(374))/2+x(t(366))/3+-x(t(373))/4+-x(t(365))/5+-x(t(368))/6*(x(t(370))/7)+x(t(367))/8==110661)break;i.push(i.shift())}catch(t){i.push(i.shift())}}();const wr=[];function yr(t,i){const s=Sr();return(yr=function(t,i){return s[t-=365]})(t,i)}let br=null,Ar=0;function Sr(){const t=["799144UpkRWz","356926NfeJZx","set","slice","237700RBIjTO","627444ELwjUL","76968OxbdcX","6xPMWky","172231EpHRtx","1480332fEizHX","push","buffer"];return(Sr=function(){return t})()}const Tr=Ur;!function(){const t=Ur,i=Pr();for(;;)try{if(-x(t(452))/1+-x(t(412))/2+-x(t(478))/3*(x(t(441))/4)+-x(t(485))/5*(-x(t(415))/6)+-x(t(400))/7+x(t(460))/8*(-x(t(486))/9)+-x(t(437))/10*(-x(t(470))/11)==412983)break;i.push(i.shift())}catch(t){i.push(i.shift())}}();const kr=Ln(Tr(424));let Er={licenseUrl:"",onFetch:void 0};const Rr={},xr=(t,i,s)=>(void 0===i&&(i=0),void 0===s&&(s=1/0),((t,i,s)=>{const e=Tr,n=j.BYTES_PER_ELEMENT;i*=n,s*=n;const r=(a=t)instanceof ArrayBuffer?a:a[Tr(484)],h=t[e(483)],o=i;var a;let u=_[e(432)](0,_.min(o,h)),c=_.min(u+_[e(432)](s,0),h);return u/=n,c/=n,new j(r,u,c-u)})(t,i,s));const Ir=t=>{const i=Tr;let s="";for(const e of t){let t=e.toString(16);1==t[i(433)]&&(t="0"+t),s+=t}return s};function Pr(){const t=["360308tFqTFd","usable for decryption (status: ","oct","decode","parse","license","parseFromString","message","8pQccIM","No clear key test key provided!","generateRequest","text/xml","Failed to update the session: ","output-downscaled","target","apply","bind","Failed to update the session","24280927IKsRHd","No PR challenge data!","kids","status","getElementsByTagName","rtcdrmerror","CK license request:","A128KW","3KcCnPp","createSession","License acquisition failed with error ","No media keys for media element!","stringify","byteLength","buffer","82765KyOCry","7206525fRtYVA","error","btoa","9a04f07998404286ab92e65be0885f95","set","[PR] License fetched:","getUint16","onFetch","4630892EspqDe","addEventListener","debug","has","json","Previous lic will be reused","internal-error","subarray","fromCharCode","expired","text","temporary","665922eWbQGg","then","[FPS] License fetched:","174puebov","Content-Type","update","POST","<Challenge","nodeValue","replace","sessionId","initData","[CDM]","[WV] License fetched:","No media element available!","CDM error generating license request: ","Failed to load previous EME session","initDataType","keyStatuses","forEach","max","length","indexOf","New lic will be requested","edef8ba979d64acea3c827dcd51d21ed","10DoxNsv","atob","catch","arrayBuffer","475444JqsldJ","No init data available!","append","warn","licenseUrl","dispatchEvent","floor","Data has an incorrect length, must be even.","EME createSession() failed - no DRM available","keystatuseschange","Failed to reuse previous EME session: "];return(Pr=function(){return t})()}let Cr=null;const Nr=t=>{const i=Tr;return s[i(394)](String[i(408)][i(467)](null,t))[i(421)](/\+/g,"-")[i(421)](/\//g,"_")[i(421)](/=*$/,"")},Dr=(t,i)=>{const s=Tr,e=(t=>{const i=Tr,s=JSON[i(456)]((new TextDecoder)[i(455)](t));if(kr[i(402)](i(476),s),null===Cr)throw new m(i(461));const e=[];for(const t of s[i(472)]){const s={kty:i(454),alg:i(477),kid:t,k:Nr(Cr)};e.push(s)}return(new TextEncoder).encode(JSON[i(482)]({keys:e}))})(i.message);i.target.update(e)[s(439)](function(t){const i=s;kr[i(393)](i(469),t)})},Br=t=>{const i=Tr,e=s[i(438)](t.replace(/-/g,"+")[i(421)](/_/g,"/")),n=new j(e[i(433)]);for(let t=0;t<e.length;++t)n[t]=e.charCodeAt(t);return n},Mr=function(t,i){for(var s=arguments.length,e=new Array(s>2?s-2:0),n=2;n<s;n++)e[n-2]=arguments[n];return wn(void 0,[t,i,...e],void 0,function*(t,i,s){void 0===s&&(s=!1);const e=Tr,n=new Headers(Rr);s&&n[e(443)](e(416),e(463));const r={method:e(418),headers:n,body:i},h=yield Er[e(399)]?Er.onFetch(t,r):fetch(t,r);if(!h.ok)throw new m(e(480)+h[e(473)]);return h})},Lr=(t,i)=>{const s=Tr;Mr(Er[s(445)],i[s(459)])[s(413)](t=>t[s(404)]()).then(t=>{const e=s;kr[e(402)](e(425),t[e(457)]);const n=Br(t[e(457)])[e(484)];i[e(466)][e(417)](n)[e(439)](t=>{const i=e;kr[i(393)](i(469),t)})})[s(439)](i=>{const e=s;t[e(446)](new CustomEvent(e(475),{detail:{message:""+i}})),kr[e(393)](i)})},Or=(t,i)=>{const s=Tr,e=((t,i)=>{const s=Tr,e=new DOMParser;try{const t=function(t,i,s){void 0===s&&(s=!1);const e=Tr;if(!t)return"";let n=t;if(!s&&n[e(483)]%2!=0)throw kr[e(393)](e(448)),new m("Data does not seem to be UTF-16 encoded!");const r=xr(n);let h;if((255===r[0]&&254===r[1]||254===r[0]&&255===r[1])&&(n=r[e(407)](2)),n instanceof ArrayBuffer)h=n;else{const t=new j(n[e(483)]);t[e(396)](xr(n)),h=t[e(484)]}const o=_[e(447)](n[e(483)]/2),a=new Uint16Array(o),u=new DataView(h);for(let t=0;t<o;t++)a[t]=u[e(398)](2*t,i);return function(t){const i=Tr;let s="";for(let e=0;e<t[i(433)];e+=16e3){const n=t.subarray(e,e+16e3);s+=String[i(408)][i(467)](null,n)}return s}(a)}(i,!0);if(t[s(434)](s(419))>-1){const i=e[s(458)](t,s(463))[s(474)]("Challenge")[0].childNodes[0][s(420)];if(null===i)throw new m(s(471));return Br(i)}kr[s(444)]("[PR] Challenge node not found")}catch(i){t[s(446)](new CustomEvent(s(475),{detail:{message:""+i}})),kr[s(393)](i)}return null})(t,i.message);if(null===e)return t[s(446)](new CustomEvent("rtcdrmerror",{detail:{message:s(471)}})),void kr[s(393)](s(471));Mr(Er[s(445)],e[s(484)],!0)[s(413)](t=>t[s(440)]())[s(413)](e=>{const n=s;kr[n(402)](n(397),e),i[n(466)][n(417)](e)[n(439)](function(i){const s=n;t[s(446)](new CustomEvent(s(475),{detail:{message:s(464)+i}})),kr[s(393)]("Failed to update the session",i)})}).catch(i=>{const e=s;t.dispatchEvent(new CustomEvent(e(475),{detail:{message:""+i}})),kr[e(393)](i)})},Fr=(t,i)=>{const s=Tr;Mr(Er.licenseUrl,i[s(459)])[s(413)](t=>{const i=s,e=t[i(410)]();return kr[i(402)](i(414),t,e),e})[s(413)](t=>{const e=s;i.target[e(417)](Br(t))})[s(439)](i=>{const e=s;t[e(446)](new CustomEvent(e(475),{detail:{message:""+i}})),kr.error(i)})},Vr=(t,i)=>{Rr[t]=i},Wr=Nn.isSafari;function Ur(t,i){const s=Pr();return(Ur=function(t,i){return s[t-=393]})(t,i)}let Gr=!Wr;const Xr=new Map;function Zr(t){return wn(this,void 0,void 0,function*(){const i=Ur;if(null===t.initData)throw new m(i(442));const s=t[i(466)];if(null===s)throw new m(i(426));const e=s.mediaKeys;if(null===e)throw new m(i(481));const n=Ir(new j(t[i(423)])),r=n+s.id;let h=null;Xr[i(403)](r)&&(h=Xr.get(r),null!=h&&h.close(),Xr.delete(r)),kr[i(402)](i(h?405:435));let o=null;try{o=e.createSession(Gr?"persistent-license":"temporary")}catch(t){kr[i(402)]("EME createSession(persistent) failed:",t)}if(!o&&Gr){Gr=!1;try{o=e[i(479)](i(411))}catch(t){kr.error("EME createSession(temporary) failed:",t)}}if(o)if(o.addEventListener(i(450),t=>{const e=i;t[e(466)][e(430)][e(431)]((t,i)=>{const n=e;(t===n(409)||"output-restricted"===t||t===n(465)||t===n(406))&&s[n(446)](new CustomEvent(n(475),{detail:{message:"Key "+Ir(new j(i))+" is not "+(n(453)+t)+")",keyId:i}}))})}),Wr?o[i(401)](i(459),Fr.bind(null,s),!1):-1!==n.indexOf(i(436))?o[i(401)](i(459),Lr[i(468)](null,s),!1):-1!==n[i(434)](i(395))?o.addEventListener(i(459),Or[i(468)](null,s),!1):o.addEventListener(i(459),Dr[i(468)](null,s),!1),h)try{(yield o.load(h[i(422)]))?Xr[i(396)](r,o):s[i(446)](new CustomEvent(i(475),{detail:{message:i(428)}}))}catch(t){s[i(446)](new CustomEvent(i(475),{detail:{message:i(451)+t}}))}else o[i(462)](t[i(429)],t[i(423)])[i(413)](()=>{Gr&&Xr[i(396)](r,o)})[i(439)](t=>{const e=i;s.dispatchEvent(new CustomEvent(e(475),{detail:{message:e(427)+t}}))});else s[i(446)](new CustomEvent(i(475),{detail:{message:i(449)}}))})}const Hr=fh;!function(){const t=fh,i=ch();for(;;)try{if(-x(t(462))/1*(-x(t(532))/2)+-x(t(543))/3+x(t(682))/4+-x(t(692))/5*(x(t(588))/6)+-x(t(539))/7+x(t(496))/8+-x(t(549))/9==672532)break;i.push(i.shift())}catch(t){i.push(i.shift())}}();const zr=Ln(Hr(673)),Yr=Nn[Hr(607)],Kr=Nn[Hr(540)],qr=Nn[Hr(647)],jr=Nn[Hr(489)],Qr=Nn[Hr(478)],Jr=Nn.platform,$r=Nn[Hr(620)],th=jr||Qr&&Jr===Hr(578),ih=1e6*(Kr?82:qr?220:120),sh=Kr?5e3:2e3,eh=Kr?1.5:.5;function nh(t){const i=Hr;return typeof t!==i(672)||null===t||t instanceof Element||t instanceof fr?t:(null==(s=t)?void 0:s[Hr(584)])instanceof ArrayBuffer&&null!=s&&s.BYTES_PER_ELEMENT?t[i(550)]():Array[i(636)](t)?t.reduce((t,i,s)=>(t[s]=nh(i),t),[]):t instanceof w?w.keys(t).reduce((i,s)=>(i[s]=nh(t[s]),i),{}):t;var s}class rh{constructor(t){const i=Hr;this[i(547)]="",this[i(471)]="",this.keySystem="",this[i(603)]=[],this[i(479)]=nh(t),this.jmuxer=null,this.keyFrameLogCntr=0,this[i(561)]=Date[i(658)](),this[i(585)]=0,this[i(602)]=0,this[i(490)]=-1,this[i(680)]=0,this[i(596)]=0,this[i(491)]=!0,this.keyFrameNeededPosted=!1,this[i(617)]=sh,this[i(500)]=null,this.dbgMediaDump={video:null,audio:null}}}const hh=new Map,oh=new j([60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60]),ah=new j([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1]),uh=new j([213,251,214,184,46,217,62,78,249,138,228,9,49,238,51,183]);function ch(){const t=["isSafari","ansform=$=>{let e=$.transformer;handleTransform(e.options.operation,e.readable,e.writable)}),onmessage=$=>{keyFra","status","DRM config:","key","Development"," will be used","Staging","const DUMMY_IDR_FRAME_SLICE_HDR0=new Uint8Array([32,0,203]),DUMMY_IDR_FRAME_SLICE_HDR1=new Uint8Array([16,0,50]);","enabled","playback at ","now",".experiment","seq","videoElement","data","btoa","PlayReady might not support '","logLevel","cbcs-1-9","encryption"," to ","offset","x-dt-custom-data","let brokenFrame=null,idrFrames=[];function initializeDummyFrames(){brokenFrame=new Uint8Array([0,0,0,1,65,154,255","object","[RTC-DRM]","not-allowed","durationMs","Default transform mode enabled, ","keySystem","timestamp","DRM config keyId must be an instance of 16-byte long Uint8Array.","lastKeyFrameTime","H264 is the only supported video codec.","2533916KeNZJm","out","Applying pre-configured certificate (","buffered","Widevine","x-dt-auth-token"," ms)","com.microsoft.playready.recommendation","error","currentTime","225RwtgWL","end","requestMediaKeySystemAccess","50705YjLCIv","onmessage","environment","wvLicenseUrl","a1d1f1"," requesting a new key frame (latency ","userId","ClearKey","createEncodedStreams","licenseUrl","PlayReady license acquisition might fail without output protection enabled (sessionId is ","feed","dbgMediaDump","jmuxer","MSE (re)init",",255]).buffer,idrFrames.push(new Uint8Array([0,0,0,1,39,100,0,13,172,87,5,6,100,0,0,0,1,40,238,60,176,0,0,0,1,37,","isChrome","config","forEach","Invalid config argument type, DRM config must be an object.","hwSecurity","audioEncrypted","setMediaKeys","fpsCertificate","Unable to create Worker!","GET","customTransform","isEdge","prevSeqNum","keyFrameNeeded","encrypted","targetLatency not set!","opus","FairPlay","7963992IJNztq","streamType","SampleAuxInfo extraction failed (video)"," seeking from ","worker","]: ","video","kind","audio","jitterBufferDelayHint","size","No target media element!","fpsCertificateUrl","wvCertificate","delimited","3000","pipeThrough","/license-server-fairplay/cert/","string",") not found in [","indexOf","warn","ignoreAudio","append","jitterBufferTarget","prLicenseUrl","sessionTypes","authToken","get","RTCRtpScriptTransform","audioElement","catch","trim","join","waitingForIdr","info","52hXHKkY","enqueue","). It has to be a string containing a JWT.","playbackRate","sai","persistent-license","Blob","2699340CvuQCI","isFirefox","transform",'rame:{type:$.type,timestamp:$.timestamp,data:$.data}}),"key"===$.type&&(keyFrameNeeded=!1),$.data=generateDummyFr',"554109usxuWq"," will not be created, use rtcDrmFeedFrame to push frames manually","bind","streams","serverCertificateUrl","includes","3473577nNrBJc","slice","URL","serverCertificate","length","Invalid authToken type (","addEventListener","', it's safer to use 'cbcs' instead.","srcObject","ClearKey is not supported by Safari.","meNeeded=$.data};","value","nextKeyFrameAllowedTime","Error recovery attempted","rtcdrmerror","184,32,0,203,255,38,29,217,24,192,161,96,0,0,12,229,174,166,6,7,20,3,84,0,247,96,193,181,229,128,0,32,32]).buffer"," bytes","both","debug","No valid DRM config found, call rtcDrmConfigure first.","dispatchEvent","certificate","mediaBufferMs","clear","merchant","src","sessionId","reportDiscontinuity","mediaBufferMs should be an integer.","Android","rtcDrmConfigure did not specify audioElement, audio will be dropped","/license-proxy-widevine/cenc/","arrayBuffer","). Edge only supports PlayReady, Widevine and ClearKey.","). Chrome only supports Widevine and ClearKey.","buffer","videoStartTimestamp",'audio/mp4; codecs="opus"',"set","175800AyhMKK","PlayReady","SampleAuxInfo extraction failed (audio)","cenc","codec","videoCapabilities",".. ","Duplicate/reordered frame, prev seq: ","bytesSinceKey","wvCertificateUrl","/license-proxy-headerauth/drmtoday/RightsManager.asmx","robustness","baseUrl","type","audioStartTimestamp","emeConfig","com.widevine.alpha","SW_SECURE_CRYPTO","fpsLicenseUrl","supportsRtpScriptTransform","Target video element (","?audioTransformFunction:videoTransformFunction});e.pipeThrough(a).pipeTo(x)}self.RTCTransformEvent&&(self.onrtctr","createObjectURL","playoutDelayHint","POSITIVE_INFINITY",'ame(keyFrameNeeded),e.enqueue($)}function handleTransform($,e,x){let a=new TransformStream({transform:"audio"===$',"track",'video/mp4; codecs="avc1.640032"',"cbcs","keyFrameRequestInterval","Frame gap: ","keyFrameNeededPosted","isWindows","HW_SECURE_ALL"," bytes, ","GOP is getting too long, requesting a new key frame","temporary","Safari does not support Opus, audio will not be rendered.","stringify","byteLength","message"," frame","H264","mediaDumps","h264","keyFrameLogCntr","requestMediaKeySystemAccess(","Safari doesn't support 'cenc'/AES-CTR, use 'cbcs' instead if possible.","isArray","Invalid DRM type (","DRM config iv must be an instance of 16-byte long Uint8Array.","keyId","pipeTo"," - ","receiver","isInteger","toString","onFetch","next"];return(ch=function(){return t})()}function dh(t){const i=Hr;let e=!1;if((t[i(479)][i(502)]&&t[i(479)].video[i(667)]!==i(572)&&"HW"===t[i(479)][i(502)][i(599)]||t[i(479)][i(504)]&&t[i(479)][i(504)][i(667)]!==i(572)&&"HW"===t.config[i(504)][i(599)])&&(e=!0),t.hwSecurity=e,function(t,i){const s=Hr;void 0!==i&&(t[s(479)].mediaBufferMs=i),(void 0===t[s(479)][s(571)]||t.config[s(571)]<0)&&(t[s(479)].mediaBufferMs=100,Kr?t[s(479)][s(571)]=350:!qr&&$r&&("PlayReady"===t.config[s(601)]||t[s(482)])&&(t.config[s(571)]=1400))}(t,t[i(479)][i(571)]),void 0===t.config[i(523)]){void 0===t[i(479)][i(468)]&&(t[i(479)][i(468)]="purchase"),void 0===t[i(479)][i(575)]&&(t.config[i(575)]=i(466));const e=s[i(663)](JSON[i(626)]({userId:t[i(479)].userId,sessionId:t.config.sessionId,merchant:t[i(479)].merchant}));Vr(i(670),e)}else Vr(i(687),t[i(479)][i(523)]);for(const s of[t[i(479)][i(504)],t[i(479)][i(502)]])s&&s.encryption!==i(572)&&(s.keyId||(s[i(639)]=ah),s.iv||(s.iv=uh));t[i(552)]=void 0,t[i(547)]="",t[i(471)]="";const n=t[i(479)][i(464)][i(600)]();var r;if(t[i(479)].type===i(469)?(t[i(677)]="org.w3.clearkey",Cr=oh):t[i(479)][i(601)]===i(686)?(t[i(677)]=i(604),$r&&e&&(t[i(677)]+=i(659)),t[i(479)][i(509)]?t[i(552)]=t[i(479)][i(509)]:t[i(479)][i(597)]?t[i(547)]=t.config[i(597)]:t[i(552)]=t.config[i(464)][i(570)](),t[i(479)].wvLicenseUrl?t[i(471)]=t.config[i(465)]:t[i(471)]=n+i(580)):t[i(479)][i(601)]===i(589)?(t.keySystem=i(689),t[i(479)][i(521)]?t[i(471)]=t[i(479)][i(521)]:t[i(471)]=n+i(598)):t.config[i(601)]===i(495)&&(t.keySystem="com.apple.fps",t[i(479)][i(485)]?t[i(552)]=t[i(479)][i(485)]:t[i(479)][i(508)]?t[i(547)]=t.config.fpsCertificateUrl:t[i(547)]=n+i(513)+t[i(479)][i(573)],t[i(479)].fpsLicenseUrl?t[i(471)]=t.config[i(606)]:t[i(471)]=n+"/license-server-fairplay/"),r={licenseUrl:t[i(471)],onFetch:t[i(479)][i(645)]},Er=r,t[i(603)]=[],t[i(479)][i(601)]!==i(495)){t[i(603)].push({initDataTypes:[i(591)],sessionTypes:[i(537),i(624)]});for(const s of[t[i(479)][i(502)],t.config[i(504)]])if(s&&s[i(667)]!==i(572)){const e=s==t.config[i(502)]?i(502):i(504);let n;"Widevine"===t.config[i(601)]?n="HW"===s[i(599)]?i(621):i(605):"PlayReady"===t.config[i(601)]&&(n="HW"===s[i(599)]?i(511):"2000"),"video"===e?t[i(603)][0][i(593)]=[{contentType:i(615),encryptionScheme:s[i(667)]===i(591)?i(591):"cbcs-1-9",robustness:n||void 0}]:t[i(603)][0].audioCapabilities=[{contentType:i(586),encryptionScheme:s[i(667)]===i(591)?i(591):i(666),robustness:n||void 0}]}}else t.emeConfig=[{initDataTypes:["sinf"],videoCapabilities:[{contentType:"video/mp4",robustness:""}],distinctiveIdentifier:i(674),persistentState:"not-allowed",sessionTypes:[i(624)]}];zr[i(567)](i(650),t)}function lh(t){const i=Hr;zr[i(567)](i(476));let s=t[i(479)][i(661)];(!t[i(479)][i(502)]||t[i(479)][i(502)][i(667)]===i(572))&&(s=t.config.audioElement),t[i(475)]=null;const e=!t[i(518)]&&t[i(479)].audio&&t[i(479)][i(504)][i(667)]!==i(572),n=t[i(479)][i(502)]&&t[i(479)].video.encryption!==i(572);t[i(596)]=0,t.keyFrameNeeded=!0,t[i(619)]=!1,t[i(617)]=sh,t[i(585)]=0,t[i(602)]=0,t[i(490)]=-1,t[i(680)]=0,t[i(475)]=new hr({node:s,mode:i(e?n?566:504:502),fps:60,drm:t}),qr&&t[i(479)][i(661)]&&t.config.videoElement.play().then(()=>{})[i(527)](()=>{})}function fh(t,i){const s=ch();return(fh=function(t,i){return s[t-=461]})(t,i)}function vh(t,i,s){const e=Hr;if(t[e(474)][e(502)]){On.mediaDumps[e(502)].in[e(510)]&&t[e(474)][e(502)][e(519)](new j([0,0,0,1,9,80]));const s=i[e(678)]/90;t[e(474)][e(502)][e(519)](new j(i[e(662)]),s)||(t[e(474)][e(502)]=null)}if(t[e(479)][e(502)]&&"clear"===t[e(479)][e(502)][e(667)])return null==s||s[e(533)](i),!1;const n=Date[e(658)]();if(i[e(601)]===e(651)){const s=On.logLevel>=4;++t[e(633)]<(s?Number[e(612)]:5)&&(zr.debug(Fn()+" "+i[e(601)]+", "+i.data.byteLength+e(622)+(e(657)+t.config[e(661)].currentTime)),s&&1===t.keyFrameLogCntr&&function(t,i,s){void 0===i&&(i=64),void 0===s&&(s=64);const e=Hr,n=new j(t[e(662)]);let r="",h=0;for(let t=0;t<i&&t<n[e(553)];++t)r+=(n[t]<16?"0":"")+n[t][e(644)](16)+" ";if(h<n[e(553)])for(h<n[e(553)]-s&&(r+=e(594),h=n[e(553)]-s);h<n[e(553)];h++)r+=(n[h]<16?"0":"")+n[h][e(644)](16)+" ";zr[e(531)]("["+((t[e(601)]||e(504))+e(629))+e(501)+r[e(528)]())}(i,128,8)),t.keyFrameNeeded=!1,t[e(596)]=0,t[e(561)]=n+t[e(617)]}return t[e(596)]+=i[e(662)][e(627)],!t[e(491)]&&t[e(596)]>ih&&(zr.info(e(623)),t[e(491)]=!0),t[e(475)]&&(function(t,i){const s=Hr;0===t.videoStartTimestamp&&(t.videoStartTimestamp=i.timestamp,t[s(617)]=sh,t[s(561)]=Date.now()+2e3);let e=null,n=!1;if(i[s(662)][s(627)]<=4)zr[s(517)]("Discarding corrupted video frame (too small)"),n=!0;else{const r=new j(i[s(662)],0,4);0!=r[0]||0!=r[1]||0!=r[2]||1!=r[3]?(zr.warn("Discarding corrupted video frame (no Annex B startcode)"),n=!0):(e=function(t,i){const s=_r,e=new DataView(t.data),n=t.data[s(268)]-2,r=e[s(267)](n);if(r<n){let t=n-r;if(69!==e[s(264)](n-1))return pr[s(271)](s(260)),null;if(e[s(264)](t++)>>>4!=1)return pr[s(271)]("Unsupported SampleAuxInfo version"),null;const h=new j(r-2);let o=0,a=0;for(;t<n-1;){let i=e[s(264)](t++);a>1&&3===i&&(a=0,i=e.getUint8(t++)),0!==i?a=0:++a,h[o++]=i}const u=new DataView(h[s(256)]),c="cenc"===i?16:0,d=c+2+6*u[s(267)](c);return d+2>o?(pr[s(271)](s(270)),null):{sai:h[s(255)](0,d),offset:n-r,seq:u[s(267)](d)}}return null}(i,t.config[s(502)][s(667)]),!e&&(zr.warn(s(498)),n=!0))}if(e)if(i[s(601)]===s(651))t[s(490)]=e.seq;else{if(-1===t[s(490)])return 0;{let r=e[s(660)]-t[s(490)];if(r<-32767&&(r+=65536),r<=0)return zr.debug(s(595)+t.prevSeqNum+", curr: "+e.seq),0;r>1&&(n=i[s(601)]!==s(651),zr[s(517)](s(618)+t[s(490)]+s(641)+e[s(660)]+", restart required: "+n)),t.prevSeqNum=e[s(660)]}}let r=0;n&&!t[s(475)][s(530)]&&(r=-1,t[s(475)][s(576)]());const h=(i[s(678)]-t[s(585)])/9e4;return e&&t[s(475)][s(473)]({video:new j(i[s(662)],0,e.offset),videoSampleAuxInfo:e[s(536)],timestamp:h})<0&&(r=-1,zr[s(517)](s(562)),lh(t)),r>=0&&i[s(601)]===s(651)&&(t[s(680)]=h),r}(t,i)<0?t[e(491)]=!0:function(t){const i=Hr,s=t[i(479)][i(661)];if(!s||s[i(685)][i(553)]<1||s.paused||s[i(691)]<eh)return;const e=t[i(479)][i(571)];if(void 0===e||e<0)throw new m(i(493));const n=s[i(685)].end(s.buffered[i(553)]-1),r=1e3*(n-s[i(691)])|0;if(!t[i(483)]&&function(t,i,s){const e=Hr;let n;n=i<3*s>>>2?.875:i<=s?1:i<7*s>>>2?1.125:i<9*s>>>2?1.25:i<11*s>>>2?1.375:1.5,n!==t.playbackRate&&(t[e(535)]=n)}(s,r,e),!(r<e+50||r<5*e>>>2))if(t[i(680)]>s[i(691)]+.1){const r=1e3*(n-t.lastKeyFrameTime)|0;r>40&&r>e-100?(zr.debug(Fn()+i(499)+(s[i(691)]+i(668)+t.lastKeyFrameTime+" (")+(t[i(680)]-s[i(691)])+")"),s[i(691)]=t[i(680)]):zr[i(567)](Fn()+" too close to seek, "+r)}else!t.keyFrameNeeded&&Date[i(658)]()>t[i(561)]&&r>e+100&&r>3*e>>>1&&(zr[i(567)](Fn()+i(467)+r+i(688)),t[i(491)]=!0,t[i(617)]<16e3&&(t[i(617)]<<=1))}(t)),s?(!t[e(491)]||!th)&&(i[e(662)]=function(t){return!br&&function(){const t=yr;br=new j([0,0,0,1,65,154,255,255])[t(372)],wr[t(371)](new j([0,0,0,1,39,100,0,13,172,87,5,6,100,0,0,0,1,40,238,60,176,0,0,0,1,37,184,32,0,203,255,38,29,217,24,192,161,96,0,0,12,229,174,166,6,7,20,3,84,0,247,96,193,181,229,128,0,32,32])[t(372)]),wr[t(371)](wr[0][t(376)](0)),new j(wr[1])[t(375)]([16,0,50],27)}(),t?br:(Ar^=1,wr[Ar])}(t[e(491)]),s[e(533)](i)):t[e(491)]!=t.keyFrameNeededPosted&&(t[e(500)]&&t.worker.postMessage(t[e(491)]),t.keyFrameNeededPosted=t[e(491)]),t.keyFrameNeeded}function _h(t,i,s){const e=Hr;if(t.dbgMediaDump.audio){const s=i[e(678)]/48;t[e(474)][e(504)][e(519)](new j(i.data),s)||(t.dbgMediaDump[e(504)]=null)}return t[e(479)].audio&&t[e(479)].audio[e(667)]!==e(572)?i[e(662)][e(627)]>0&&function(t,i){const s=Hr;var e;if(!t[s(475)]||t[s(518)])return 0;0===t[s(602)]&&(t.audioStartTimestamp=i[s(678)]);const n=(i[s(678)]-t[s(602)])/48e3;if((null===(e=t[s(479)][s(504)])||void 0===e?void 0:e[s(667)])===s(616))return t.jmuxer[s(473)]({audio:new j(i[s(662)]),timestamp:n});const r=function(t){const i=_r,s=new DataView(t[i(261)]),e=t.data[i(268)]-2,n=s[i(267)](e);if(n<e){let t=e-n;if(69!==s[i(264)](e-1))return pr.error("SampleAuxInfo corrupted (postfix not found)"),null;if(s[i(264)](t++)>>>4!=1)return pr[i(271)]("Unsupported SampleAuxInfo version"),null;const r=new j(n-2);let h=0;for(;t<e-1;){const e=s[i(264)](t++);if(r[h++]=e,h>=16)break}return{sai:r,offset:e-n}}return null}(i);r?t.jmuxer[s(473)]({audio:new j(i[s(662)],0,r[s(669)]),audioSampleAuxInfo:r[s(536)],timestamp:n}):zr[s(690)](s(590))}(t,i):s&&s[e(533)](i),!1}function gh(t){const i=Hr;var s,e,n,r,h;if(!t||typeof t!==i(672))throw new g(i(481));if(!(t.videoElement instanceof HTMLVideoElement))throw new g("Invalid videoElement, it must be an instance of HTMLVideoElement.");if(t[i(526)]&&!(t[i(526)]instanceof HTMLMediaElement))throw new g("Invalid audioElement, it must be an instance of HTMLMediaElement.");if(void 0!==t[i(571)]&&!Number[i(643)](t[i(571)]))throw new g("DRM config mediaBufferMs should be an integer.");let o=!1,a=!1,u=!1;const c=[i(616),"cenc",i(572)],d=["SW","HW"];for(const s of[t.video,t[i(504)]])if(s){if(!c[i(548)](s[i(667)]))throw new RangeError("DRM config encryption value must be one of: "+c[i(529)](", "));if(qr&&s.encryption===i(591))throw new RangeError(i(635));if("clear"!==s[i(667)]){if(a=!0,s.keyId){if(!(s[i(639)]instanceof j)||16!==s[i(639)][i(553)])throw new g(i(679));u=!0}else if(qr)throw new ReferenceError(i(558));if(s.iv&&(!(s.iv instanceof j)||16!==s.iv[i(553)]))throw new g(i(638));if(s[i(599)]&&!d[i(548)](s[i(599)]))throw new RangeError("DRM config robustness can only be one of: "+d[i(529)](", "));if(s===t.video&&s.codec!==i(630))throw new RangeError(i(681));qr&&s===t.audio&&s[i(592)]===i(494)&&(o=!0,zr.warn(i(625))),t[i(601)]===i(589)&&("cenc"!==s[i(667)]&&zr[i(517)](i(664)+s[i(667)]+i(556)),void 0===t.sessionId||t[i(575)][i(548)]("f1")||zr[i(517)](i(472)+t[i(575)]+", a1d1f1 is recommended)."))}}if(a){const s=[fr[i(652)],fr[i(654)],fr.Production];if(!s[i(548)](t[i(464)]))throw new RangeError("DRM config env value must be one of: "+s.join(", "));if(t[i(523)]&&typeof t.authToken!==i(514))throw new g(i(554)+typeof t[i(523)]+i(534));if(t[i(601)])if(qr){if("FairPlay"!==t.type)throw new RangeError(i(637)+t[i(601)]+"). Safari only supports FairPlay.")}else if(Qr){if(t[i(601)]!==i(686)&&"ClearKey"!==t.type)throw new RangeError(i(637)+t[i(601)]+i(583))}else if(jr&&t[i(601)]!==i(589)&&"Widevine"!==t[i(601)]&&t[i(601)]!==i(469))throw new RangeError(i(637)+t.type+i(582))}if(void 0!==t[i(665)]&&(On[i(665)]=t[i(665)]),void 0!==t.mediaDumps){if(t.mediaDumps[i(502)]){const r=t[i(631)].video,h=On[i(631)][i(502)];!(null===(s=r.in)||void 0===s)&&s.durationMs&&(h.in[i(675)]=r.in.durationMs),!(null===(e=r.in)||void 0===e)&&e.delimited&&(h.in.delimited=r.in[i(510)]),null!==(n=r[i(683)])&&void 0!==n&&n.durationMs&&(h[i(683)][i(675)]=r[i(683)].durationMs)}if(t[i(631)][i(504)]){const s=t[i(631)][i(504)],e=On[i(631)][i(504)];!(null===(r=s.in)||void 0===r)&&r.durationMs&&(e.in.durationMs=s.in.durationMs),null!==(h=s.out)&&void 0!==h&&h[i(675)]&&(e[i(683)][i(675)]=s[i(683)].durationMs)}}let l=hh[i(524)](t[i(661)]);!l&&(l=new rh(t),hh[i(587)](t.videoElement,l)),l[i(656)]=a,l.ignoreAudio=o,l[i(483)]=!o&&l[i(479)][i(504)]&&l[i(479)][i(504)][i(667)]!==i(572),a&&(l[i(479)][i(601)]||(l[i(479)][i(601)]=qr?"FairPlay":i(686)),u||l.config.type===i(469)||(l[i(479)][i(601)]=i(469)),dh(l),function(t){wn(this,void 0,void 0,function*(){const i=fh;var s,e;let n=t.config[i(661)];if((!t.config[i(502)]||t[i(479)].video[i(667)]===i(572))&&(n=t[i(479)][i(526)]),!n)throw new m(i(507));n[i(574)]="",n[i(557)]=null,yield n[i(484)](null);let r=null;try{r=yield od[i(461)](t[i(677)],t[i(603)])}catch(t){}if(!r&&t.emeConfig[0]){const n=null===(s=t.emeConfig[0][i(522)])||void 0===s?void 0:s[i(516)](i(537));if(void 0!==n&&n>=0){null===(e=t[i(603)][0][i(522)])||void 0===e||e.splice(n,1);try{r=yield od[i(461)](t[i(677)],t[i(603)])}catch(t){}}}if(!r){const s=i(634)+t[i(677)]+") failed";return n[i(569)](new CustomEvent(i(563),{detail:{message:s}})),void zr[i(690)](s)}let h=null;try{h=yield r.createMediaKeys()}catch(t){}if(!h){const s="createMediaKeys("+t.keySystem+") failed";return n.dispatchEvent(new CustomEvent(i(563),{detail:{message:s}})),void zr[i(690)](s)}if(t.serverCertificate)zr[i(567)](i(684)+t[i(552)][i(627)]+" bytes)"),yield h.setServerCertificate(t[i(552)]);else if(t[i(547)]){const s={method:i(487)},e=t.serverCertificateUrl;try{const r=yield t.config[i(645)]?t[i(479)][i(645)](e,s):fetch(e,s);if(!r.ok){const t="Server certificate fetch failed with error "+r[i(649)];return void n[i(569)](new CustomEvent(i(563),{detail:{message:t}}))}const o=yield r[i(581)]();zr[i(567)]("Fetched certificate from "+e+", "+o.byteLength+i(565)),yield h.setServerCertificate(o)}catch(t){const s=t.name+": "+t[i(628)];return zr[i(690)](s),void n[i(569)](new CustomEvent("rtcdrmerror",{detail:{message:s}}))}}yield n[i(484)](h),n[i(555)](i(492),Zr),lh(t)})}(l)),l[i(479)][i(661)][i(555)]("play",function(){const t=i;l[t(479)][t(661)][t(691)]>.5&&(l[t(561)]=Date[t(658)]())})}const mh=Hr(655)+Hr(671)+Hr(477)+Hr(564)+'),idrFrames.push(idrFrames[0].slice());let $=new Uint8Array(idrFrames[1]);$.set([16,0,50],27)}let idrPicIdToggle=0;function generateDummyFrame($){return(brokenFrame||initializeDummyFrames(),$)?brokenFrame:idrFrames[idrPicIdToggle^=1]}function audioTransformFunction($,e){postMessage({streamType:"audio",frame:{timestamp:$.timestamp,data:$.data}}),e.enqueue($)}let keyFrameNeeded=!1;function videoTransformFunction($,e){postMessage({streamType:"video",f'+Hr(542)+Hr(613)+Hr(609)+Hr(648)+Hr(559);function ph(t){const i=Hr;if(0===hh[i(506)])throw new g(i(568));let s;if(t&&t[i(661)])s=t.videoElement;else{if(1!==hh[i(506)])throw new g("Several DRM configs detected, rtcDrmOnTrack have to be called with target DRM config.");s=hh.keys()[i(646)]()[i(560)]}const e=hh[i(524)](s);if(!e){let t="";throw hh[i(480)]((i,s)=>{t+=s.id+", "}),t=t[i(550)](0,-2),new g(i(608)+s.id+i(515)+t+"]")}return e}function wh(t,i){const s=Hr;if(t&&t.config[s(661)]){const e=t.config[s(661)];if(e.buffered[s(553)]>0){const t=e.buffered[s(693)](e.buffered[s(553)]-1)-e.currentTime;i[s(611)]=i.jitterBufferDelayHint=i[s(520)]=t}u(wh,1e3,t,i)}}const yh=ot.get("View");yh.setLevel(ot.DEBUG);const bh={metadata:!1,enableDRM:!1,disableVideo:!1,disableAudio:!1,peerConfig:{autoInitStats:!0,statsIntervalMs:1e3}};t.Director=Ie,t.Logger=ot,t.PeerConnection=ee,t.Publish=class extends hn{async connect(t){void 0===t&&(t=vn),gn(t),this.options=y(l(l({},vn),t),{peerConfig:l(l({},vn.peerConfig),t.peerConfig),setSDPToPeer:!1}),this.options.metadata=this.options.metadata&&this.options.codec===js.H264&&!this.options.disableVideo,await this.initConnection({migrate:!1})}async reconnect(t){var i,s;this.options.mediaStream=null!=(s=null==(i=this.webRTCPeer)?void 0:i.getTracks())?s:this.options.mediaStream,super.reconnect(t)}async replaceConnection(){var t,i;fn.info("Migrating current connection"),this.options.mediaStream=null!=(i=null==(t=this.webRTCPeer)?void 0:t.getTracks())?i:this.options.mediaStream,await this.initConnection({migrate:!0})}async record(){var t;this.recordingAvailable?(this.options.record=!0,await(null==(t=this.signaling)?void 0:t.cmd("record")),fn.info("Broadcaster start recording")):fn.error("Record not available")}async unrecord(){var t;this.recordingAvailable?(this.options.record=!1,await(null==(t=this.signaling)?void 0:t.cmd("unrecord")),fn.info("Broadcaster stop recording")):fn.error("Unrecord not available")}stop(){var t;super.stop(),null==(t=this.worker)||t.terminate(),this.worker=null}async initConnection(t){var i,s;let e,n;if(fn.debug("Broadcast option values: ",this.options),this.stopReconnection=!1,!this.options.mediaStream)throw fn.error("Error while broadcasting. MediaStream required"),new m("MediaStream required");if(!t.migrate&&this.isActive())throw fn.warn("Broadcast currently working"),new m("Broadcast currently working");try{n=await this.tokenGenerator(),this.options.peerConfig.iceServers=null==n?void 0:n.iceServers,this.options.peerConfig.encodedInsertableStreams=this.options.metadata}catch(t){throw fn.error("Error generating token."),t instanceof Te&&(401!==t.status&&this.autoReconnect?this.reconnect():this.stopReconnection=!0),t}if(!n)throw fn.error("Error while broadcasting. Publisher data required"),new m("Publisher data required");const r=Le(n.jwt);if(this.streamName=r.millicast.streamName,this.recordingAvailable=r[Fe.atob("bWlsbGljYXN0")].record,this.options.record&&!this.recordingAvailable)throw fn.error("Error while broadcasting. Record option detected but recording is not available"),new m("Record option detected but recording is not available");const h=new be({streamName:this.streamName,url:"".concat(n.urls[0],"?token=").concat(n.jwt)}),o=t.migrate?new ee:this.webRTCPeer;await o.createRTCPeer(this.options.peerConfig,$s),null==(i=this.stopReemitingWebRTCPeerInstanceEvents)||i.call(this),null==(s=this.stopReemitingSignalingInstanceEvents)||s.call(this),this.stopReemitingWebRTCPeerInstanceEvents=It(o,this,[ie.connectionStateChange]),this.stopReemitingSignalingInstanceEvents=It(h,this,[ye]);const a=o.getRTCLocalSDP(this.options),u=h.connect();e=await Promise.all([a,u]);const c=e[0];this.options.metadata&&(this.worker||(this.worker=new ln),this.getRTCPeerConnection().getSenders().forEach(t=>{if(un)t.transform=new RTCRtpScriptTransform(this.worker,{name:"senderTransform",codec:this.options.codec});else if(an){const{readable:i,writable:s}=t.createEncodedStreams();this.worker.postMessage({action:"insertable-streams-sender",codec:this.options.codec,readable:i,writable:s},[i,s])}}));let d=this.signaling;this.signaling=h;const l=this.signaling.publish(c,this.options),f=o.peer.setLocalDescription(o.sessionDescription);e=await Promise.all([l,f]);let v=e[0];!this.options.disableVideo&&this.options.bandwidth>0&&(v=o.updateBandwidthRestriction(v,this.options.bandwidth)),await o.setRTCRemoteSDP(v),fn.info("Broadcasting to streamName: ",this.streamName);let _=this.webRTCPeer;this.webRTCPeer=o,this.setReconnect(),t.migrate&&this.webRTCPeer.on(ie.connectionStateChange,t=>{var i,s;["connected","disconnected","failed","closed"].includes(t)&&(null==(i=null==d?void 0:d.close)||i.call(d),null==(s=null==_?void 0:_.closeRTCPeer)||s.call(_),d=_=null)})}sendMetadata(t,i){var s;if(void 0===i&&(i="d40e38ea-d419-4c62-94ed-20ac37b4e4fa"),null!=(s=this.options)&&s.metadata&&this.worker)this.worker.postMessage({action:"metadata-sei-user-data-unregistered",uuid:i,payload:t});else{let t="Could not send metadata due to:";this.options?this.options.metadata?this.worker||(t+="\n- Stream not being published."):(t+="\n- Metadata option is not enabled.",this.options.codec!==js.H264&&(t+="\n- Incompatible codec. Only H264 available."),this.options.disableVideo&&(t+="\n- Video disabled.")):t+="\n- Stream not being published.",fn.warn(t)}}constructor(t,i,s=!0){t&&fn.warn("The streamName property has been deprecated. In a future release, this will be removed. Please do not rely on this value. Instead, set via token generator"),super(null,i,fn,s)}},t.Signaling=be,t.View=class extends hn{async connect(t){void 0===t&&(t=bh),this.options=y(l(l({},bh),t),{peerConfig:l(l({},bh.peerConfig),t.peerConfig),setSDPToPeer:!1}),this.eventQueue.length=0,await this.initConnection({migrate:!1})}async select(t){void 0===t&&(t={}),yh.debug("Viewer select layer values: ",t),await this.signaling.cmd("select",{layer:t}),yh.info("Connected to streamName: ",this.streamName)}async addRemoteTrack(t,i){yh.info("Viewer adding remote track",t);const s=await this.webRTCPeer.addRemoteTrack(t,i);for(const t of i)t.addTrack(s.receiver.track);return s}async project(t,i){for(const t of i){if(!t.trackId&&!t.media)throw yh.error("Error in projection mapping, trackId or mediaId must be set"),new m("Error in projection mapping, trackId or mediaId must be set");const i=this.webRTCPeer.getRTCPeer();if(t.mediaId&&!i.getTransceivers().find(i=>i.mid===t.mediaId.toString()))throw yh.error("Error in projection mapping, ".concat(t.mediaId," mid not found in local transceivers")),new m("Error in projection mapping, ".concat(t.mediaId," mid not found in local transceivers"))}yh.debug("Viewer project source: layer mappings: ",t,i),await this.signaling.cmd("project",{sourceId:t,mapping:i}),yh.info("Projection done")}async unproject(t){yh.debug("Viewer unproject mediaIds: ",t),await this.signaling.cmd("unproject",{mediaIds:t}),yh.info("Unprojection done")}async replaceConnection(){yh.info("Migrating current connection"),await this.initConnection({migrate:!0})}stop(){var t,i;super.stop(),null==(t=this.drmOptionsMap)||t.clear(),this.DRMProfile=null,null==(i=this.worker)||i.terminate(),this.worker=null,this.payloadTypeCodec={},this.tracksMidValues={},this.eventQueue.length=0}async initConnection(t){var i;let s,e;if(yh.debug("Viewer connect options values: ",this.options),this.stopReconnection=!1,!t.migrate&&this.isActive())throw yh.warn("Viewer currently subscribed"),new m("Viewer currently subscribed");try{e=await this.tokenGenerator(),this.options.peerConfig.iceServers=null==e?void 0:e.iceServers,this.options.peerConfig.encodedInsertableStreams=an&&(this.options.enableDRM||this.options.metadata)}catch(t){throw yh.error("Error generating token."),t instanceof Te&&(401!==t.status&&this.autoReconnect?this.reconnect():this.stopReconnection=!0),t}if(!e)throw yh.error("Error while subscribing. Subscriber data required"),new m("Subscriber data required");const n=Le(e.jwt);this.streamName=n.millicast.streamName;const r=new be({streamName:this.streamName,url:"".concat(e.urls[0],"?token=").concat(e.jwt)});e.subscriberToken&&(this.subscriberToken=e.subscriberToken);const h=t.migrate?new ee:this.webRTCPeer;await h.createRTCPeer(this.options.peerConfig),null==(i=this.stopReemitingWebRTCPeerInstanceEvents)||i.call(this),this.stopReemitingWebRTCPeerInstanceEvents=It(h,this,w.values(ie).filter(t=>t!==ie.track)),this.options.metadata&&(this.worker||(this.worker=new ln),this.worker.onmessage=t=>{if("metadata"===t.data.event){const i=new TextDecoder,s=t.data.metadata;if(s.mid=t.data.mid,s.track=this.tracksMidValues[t.data.mid],s.uuid){const t=s.uuid;s.uuid=t.reduce((t,i)=>t+i.toString(16).padStart(2,"0"),""),s.uuid=s.uuid.replace(/(.{8})(.{4})(.{4})(.{4})(.{12})/,"$1-$2-$3-$4-$5")}if(s.timecode&&(s.timecode=new Date(i.decode(s.timecode))),s.unregistered){const t=i.decode(s.unregistered);try{const i=JSON.parse(t);s.unregistered=i}catch(t){yh.info("The content could not be converted to JSON, returning raw bytes instead")}}this.emit("metadata",s)}}),h.on(ie.track,t=>{this.isMainStreamActive?this.onTrackEvent(t):this.eventQueue.push(t)}),r.on(ye,async t=>{if(this.isMainStreamActive||"active"!==t.name)"inactive"===t.name&&this.isMainStreamActive&&this.mainSourceId===t.data.sourceId&&(this.isMainStreamActive=!1),this.emit(ye,t);else{if(this.mainSourceId=t.data.sourceId,!this.DRMProfile&&t.data.encryption){const t=await this.tokenGenerator();t.drmObject&&(this.DRMProfile=t.drmObject)}for(this.emit(ye,t),this.isMainStreamActive=!0;this.eventQueue.length>0;)this.onTrackEvent(this.eventQueue.shift())}});const o=h.getRTCLocalSDP(y(l({},this.options),{stereo:!0})),a=r.connect();s=await Promise.all([o,a]);const c=s[0];let d=this.signaling;this.signaling=r;const f=this.signaling.subscribe(c,y(l({},this.options),{vad:this.options.multiplexedAudioTracks>0})),v=h.peer.setLocalDescription(h.sessionDescription);s=await Promise.all([f,v]);const _=s[0];this.payloadTypeCodec=Ks.getCodecPayloadType(_),await h.setRTCRemoteSDP(_),yh.info("Connected to streamName: ",this.streamName);let g=this.webRTCPeer;this.webRTCPeer=h,this.setReconnect(),t.migrate&&this.webRTCPeer.on(ie.connectionStateChange,t=>{var i,s;"connected"===t?u(()=>{var t,i;null==(t=null==d?void 0:d.close)||t.call(d),null==(i=null==g?void 0:g.closeRTCPeer)||i.call(g),d=g=null,yh.info("Current connection migrated")},1e3):["disconnected","failed","closed"].includes(t)&&(null==(i=null==d?void 0:d.close)||i.call(d),null==(s=null==g?void 0:g.closeRTCPeer)||s.call(g),d=g=null)})}onTrackEvent(t){var i,e,n;if(this.tracksMidValues[null==(i=t.transceiver)?void 0:i.mid]=t.track,this.isDRMOn){const i=t.transceiver.mid,e=this.getDRMConfiguration(i);try{!function(t,i){const e=Hr;var n,r;const h=t[e(614)][e(503)];h===e(502)&&(t[e(642)][e(611)]=t.receiver[e(505)]=t[e(642)][e(520)]=0);const o=ph(i),a=o[e(479)][e(661)],u=o.config.audioElement;if(o.enabled){const i=""+e(Yr?525:470);if(o[e(479)][e(488)])zr[e(567)](i+e(544));else{if(zr[e(567)](e(676)+i+e(653)),h===e(502)){const t=On[e(631)][e(502)].in[e(675)];t>0&&(o.dbgMediaDump[e(502)]=new Wn(e(502),e(632),t))}else if(h===e(504)){const t=On[e(631)][e(504)].in[e(675)];t>0&&(o[e(474)][e(504)]=new Wn(e(504),e(494),t))}if(Yr){if(o[e(500)]=function(t){const i=Hr,e=s[i(551)]||s.webkitURL,n=s[i(538)],r=s.Worker;if(!(e&&n&&r&&t))return null;const h=new n([t]);return new r(e[i(610)](h))}(mh),null==o[e(500)])throw new m(e(486));o[e(500)][e(463)]=t=>{const i=e;t[i(662)][i(497)]===i(502)?vh(o,t.data.frame,null):_h(o,t.data.frame,null)},t[e(642)][e(541)]=new RTCRtpScriptTransform(o.worker,{operation:h})}else{const i=h===e(502)?vh:_h,s={drm:o,transform:(t,s)=>{i(o,t,s)}},n=t[e(642)][e(470)](),r=new TransformStream({transform:s[e(541)][e(545)](s)}),{readable:a,writable:u}=n;a[e(512)](r)[e(640)](u)}}if("audio"===h&&(null===(n=o.config[e(504)])||void 0===n?void 0:n.encryption)===e(572)){if(!u)return void zr[e(517)](e(579));u[e(557)]!==t[e(546)][0]&&(u[e(557)]=t.streams[0]),o[e(479)][e(661)]&&(t[e(642)].playoutDelayHint=t.receiver.jitterBufferDelayHint=t[e(642)][e(520)]=o[e(479)][e(571)],wh(o,t[e(642)]))}else h===e(502)&&(null===(r=o[e(479)][e(502)])||void 0===r?void 0:r.encryption)===e(572)&&a[e(557)]!==t[e(546)][0]&&(a.srcObject=t[e(546)][0])}else a[e(557)]!==t[e(546)][0]&&(a.srcObject=t[e(546)][0])}(t,e)}catch(t){yh.error("Failed to apply DRM on media Id:",i,"error is: ",t),this.emit("error",new m("Failed to apply DRM on media Id: "+i+" error is: "+t))}this.worker||(this.worker=new ln),this.worker.addEventListener("message",t=>{"complete"===t.data.event&&function(t,i,s){const e=Hr,n=ph(s);t[e(601)]?vh(n,t,i):_h(n,t,i)}(t.data.frame,null,e)})}if(this.options.metadata)if(un)t.receiver.transform=new RTCRtpScriptTransform(this.worker,{name:"receiverTransform",payloadTypeCodec:l({},this.payloadTypeCodec),codec:this.options.metadata&&"h264",mid:null==(e=t.transceiver)?void 0:e.mid});else if(an){const{readable:i,writable:s}=t.receiver.createEncodedStreams();this.worker.postMessage({action:"insertable-streams-receiver",payloadTypeCodec:l({},this.payloadTypeCodec),codec:this.options.metadata&&"h264",mid:null==(n=t.transceiver)?void 0:n.mid,readable:i,writable:s},[i,s])}this.emit(ie.track,t)}getDRMConfiguration(t){return this.drmOptionsMap?this.drmOptionsMap.get(t):null}async onRtcDrmFetch(t,i){return i.headers||(i.headers=new Headers),i.headers.get("x-dt-custom-data")&&i.headers.delete("x-dt-custom-data"),this.subscriberToken?i.headers.append("Authorization","Bearer ".concat(this.subscriberToken)):yh.warn("onRtcDrmFetch: no subscriberToken"),fetch(t,i)}configureDRM(t){if(!t)throw new m("Required DRM options is not provided");this.drmOptionsMap||(this.drmOptionsMap=new Map);const i={merchant:"dolby",environment:fr.Production,customTransform:this.options.metadata,videoElement:t.videoElement,audioElement:t.audioElement,video:{codec:"H264",encryption:"cbcs",keyId:mn(t.videoEncryptionParams.keyId),iv:mn(t.videoEncryptionParams.iv)},audio:{codec:"opus",encryption:"clear"},onFetch:this.onRtcDrmFetch.bind(this)};t.mediaBufferMs&&(i.mediaBufferMs=t.mediaBufferMs),this.DRMProfile&&(this.DRMProfile.playReadyUrl&&(i.prLicenseUrl=this.DRMProfile.playReadyUrl),this.DRMProfile.widevineUrl&&(i.wvLicenseUrl=this.DRMProfile.widevineUrl),this.DRMProfile.fairPlayUrl&&(i.fpsLicenseUrl=this.DRMProfile.fairPlayUrl),this.DRMProfile.fairPlayCertUrl&&(i.fpsCertificateUrl=this.DRMProfile.fairPlayCertUrl));try{gh(i),this.drmOptionsMap.set(t.videoMid,i),t.audioMid&&this.drmOptionsMap.set(t.audioMid,i),i.videoElement.addEventListener("rtcdrmerror",t=>{yh.error("DRM error: ",t.detail.message,"in video element:",i.videoElement.id),this.emit("error",new m(t.detail.message))})}catch(i){yh.error("Failed to configure DRM with options:",t,"error is:",i)}}removeDRMConfiguration(t){var i;null==(i=this.drmOptionsMap)||i.delete(t)}get isDRMOn(){return!!this.drmOptionsMap&&this.drmOptionsMap.size>0}exchangeDRMConfiguration(t,i){const s=this.getDRMConfiguration(t),e=this.getDRMConfiguration(i);if(null===s)throw new m("No DRM configuration found for "+t);if(null===e)throw new m("No DRM configuration found for "+i);pn(s.video,e.video,"keyId"),pn(s.video,e.video,"iv");try{gh(s)}catch(t){yh.error("Failed to configure DRM with options:",s,"error is:",t)}try{gh(e)}catch(t){yh.error("Failed to configure DRM with options:",e,"error is:",t)}}constructor(t,i,s=null,e=!0){t&&yh.warn("The streamName property has been deprecated. In a future release, this will be removed. Please do not rely on this value. Instead, set via token generator"),super(null,i,yh,e),this.payloadTypeCodec={},this.tracksMidValues={},this.drmOptionsMap=null,this.eventQueue=[],this.isMainStreamActive=!1,s&&(this.on(ie.track,t=>{s.srcObject=t.streams[0]}),yh.warn("The mediaElement property has been deprecated. In a future release, this will be removed. Please do not rely on this value. Instead, do this in either the `track` or the `active` broadcast event."))}},w.defineProperty(t,td.toStringTag,{value:"Module"})})}),wd=Qn(t=>{"use strict";function i(){const t=pd();return i=function(){return t},t}r(),w.defineProperty(t,"__esModule",{value:!0}),function(t,i){for(var s in i)w.defineProperty(t,s,{enumerable:!0,get:w.getOwnPropertyDescriptor(i,s).get})}(t,{get Director(){return i().Director},get Logger(){return i().Logger},get View(){return i().View}})}),yd=Qn((t,i)=>{r(),i.exports=function(){var t=new Float32Array(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}}),bd=Qn((t,i)=>{r(),i.exports=function(t,i){var s=i[0],e=i[1],n=i[2],r=i[3],h=s+s,o=e+e,a=n+n,u=s*h,c=e*h,d=e*o,l=n*h,f=n*o,v=n*a,_=r*h,g=r*o,m=r*a;return t[0]=1-d-v,t[1]=c+m,t[2]=l-g,t[3]=0,t[4]=c-m,t[5]=1-u-v,t[6]=f+_,t[7]=0,t[8]=l+g,t[9]=f-_,t[10]=1-u-d,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}}),Ad=Qn((t,i)=>{r(),i.exports=function(t,i,s){var e,n,r,h=s[0],o=s[1],a=s[2],u=_.sqrt(h*h+o*o+a*a);if(_.abs(u)<1e-6)return null;return h*=u=1/u,o*=u,a*=u,e=_.sin(i),n=_.cos(i),r=1-n,t[0]=h*h*r+n,t[1]=o*h*r+a*e,t[2]=a*h*r-o*e,t[3]=0,t[4]=h*o*r-a*e,t[5]=o*o*r+n,t[6]=a*o*r+h*e,t[7]=0,t[8]=h*a*r+o*e,t[9]=o*a*r-h*e,t[10]=a*a*r+n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}}),Sd=Qn((t,i)=>{r(),i.exports=function(t,i){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}}),Td=Qn((t,i)=>{r(),i.exports=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}}),kd=Qn((t,i)=>{r(),i.exports=function(t,i){var s=i[0],e=i[1],n=i[2],r=i[3],h=i[4],o=i[5],a=i[6],u=i[7],c=i[8],d=i[9],l=i[10],f=i[11],v=i[12],_=i[13],g=i[14],m=i[15],p=s*o-e*h,w=s*a-n*h,y=s*u-r*h,b=e*a-n*o,A=e*u-r*o,S=n*u-r*a,T=c*_-d*v,k=c*g-l*v,E=c*m-f*v,R=d*g-l*_,x=d*m-f*_,I=l*m-f*g,P=p*I-w*x+y*R+b*E-A*k+S*T;if(!P)return null;return P=1/P,t[0]=(o*I-a*x+u*R)*P,t[1]=(n*x-e*I-r*R)*P,t[2]=(_*S-g*A+m*b)*P,t[3]=(l*A-d*S-f*b)*P,t[4]=(a*E-h*I-u*k)*P,t[5]=(s*I-n*E+r*k)*P,t[6]=(g*y-v*S-m*w)*P,t[7]=(c*S-l*y+f*w)*P,t[8]=(h*x-o*E+u*T)*P,t[9]=(e*E-s*x-r*T)*P,t[10]=(v*A-_*y+m*p)*P,t[11]=(d*y-c*A-f*p)*P,t[12]=(o*k-h*R-a*T)*P,t[13]=(s*R-e*k+n*T)*P,t[14]=(_*w-v*b-g*p)*P,t[15]=(c*b-d*w+l*p)*P,t}}),Ed=Qn((t,i)=>{r(),i.exports=function(t,i,s){var e=i[0],n=i[1],r=i[2],h=i[3],o=i[4],a=i[5],u=i[6],c=i[7],d=i[8],l=i[9],f=i[10],v=i[11],_=i[12],g=i[13],m=i[14],p=i[15],w=s[0],y=s[1],b=s[2],A=s[3];return t[0]=w*e+y*o+b*d+A*_,t[1]=w*n+y*a+b*l+A*g,t[2]=w*r+y*u+b*f+A*m,t[3]=w*h+y*c+b*v+A*p,w=s[4],y=s[5],b=s[6],A=s[7],t[4]=w*e+y*o+b*d+A*_,t[5]=w*n+y*a+b*l+A*g,t[6]=w*r+y*u+b*f+A*m,t[7]=w*h+y*c+b*v+A*p,w=s[8],y=s[9],b=s[10],A=s[11],t[8]=w*e+y*o+b*d+A*_,t[9]=w*n+y*a+b*l+A*g,t[10]=w*r+y*u+b*f+A*m,t[11]=w*h+y*c+b*v+A*p,w=s[12],y=s[13],b=s[14],A=s[15],t[12]=w*e+y*o+b*d+A*_,t[13]=w*n+y*a+b*l+A*g,t[14]=w*r+y*u+b*f+A*m,t[15]=w*h+y*c+b*v+A*p,t}}),Rd=Qn((t,i)=>{r(),i.exports=function(t,i,s,e,n){var r=1/_.tan(i/2),h=1/(e-n);return t[0]=r/s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(n+e)*h,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*n*e*h,t[15]=0,t}}),xd=Qn((t,i)=>{r(),i.exports=function(t,i,s,e){var n,r,h,o,a,u,c,d,l,f,v,g,m,p,w,y,b,A,S,T,k,E,R,x,I=e[0],P=e[1],C=e[2],N=_.sqrt(I*I+P*P+C*C);if(_.abs(N)<1e-6)return null;I*=N=1/N,P*=N,C*=N,n=_.sin(s),r=_.cos(s),h=1-r,o=i[0],a=i[1],u=i[2],c=i[3],d=i[4],l=i[5],f=i[6],v=i[7],g=i[8],m=i[9],p=i[10],w=i[11],y=I*I*h+r,b=P*I*h+C*n,A=C*I*h-P*n,S=I*P*h-C*n,T=P*P*h+r,k=C*P*h+I*n,E=I*C*h+P*n,R=P*C*h-I*n,x=C*C*h+r,t[0]=o*y+d*b+g*A,t[1]=a*y+l*b+m*A,t[2]=u*y+f*b+p*A,t[3]=c*y+v*b+w*A,t[4]=o*S+d*T+g*k,t[5]=a*S+l*T+m*k,t[6]=u*S+f*T+p*k,t[7]=c*S+v*T+w*k,t[8]=o*E+d*R+g*x,t[9]=a*E+l*R+m*x,t[10]=u*E+f*R+p*x,t[11]=c*E+v*R+w*x,i!==t&&(t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15]);return t}}),Id=Qn((t,i)=>{r(),i.exports=function(t,i,s){var e,n,r,h,o,a,u,c,d,l,f,v,_=s[0],g=s[1],m=s[2];i===t?(t[12]=i[0]*_+i[4]*g+i[8]*m+i[12],t[13]=i[1]*_+i[5]*g+i[9]*m+i[13],t[14]=i[2]*_+i[6]*g+i[10]*m+i[14],t[15]=i[3]*_+i[7]*g+i[11]*m+i[15]):(e=i[0],n=i[1],r=i[2],h=i[3],o=i[4],a=i[5],u=i[6],c=i[7],d=i[8],l=i[9],f=i[10],v=i[11],t[0]=e,t[1]=n,t[2]=r,t[3]=h,t[4]=o,t[5]=a,t[6]=u,t[7]=c,t[8]=d,t[9]=l,t[10]=f,t[11]=v,t[12]=e*_+o*g+d*m+i[12],t[13]=n*_+a*g+l*m+i[13],t[14]=r*_+u*g+f*m+i[14],t[15]=h*_+c*g+v*m+i[15]);return t}});r();var Ne=function(t){return t[t.CONFIGURATION_ERROR=1e3]="CONFIGURATION_ERROR",t[t.LICENSE_ERROR=2e3]="LICENSE_ERROR",t[t.LICENSE_INVALID_DOMAIN=2001]="LICENSE_INVALID_DOMAIN",t[t.LICENSE_INVALID_SOURCE=2002]="LICENSE_INVALID_SOURCE",t[t.LICENSE_EXPIRED=2003]="LICENSE_EXPIRED",t[t.LICENSE_INVALID_FEATURE=2004]="LICENSE_INVALID_FEATURE",t[t.SOURCE_INVALID=3e3]="SOURCE_INVALID",t[t.SOURCE_NOT_SUPPORTED=3001]="SOURCE_NOT_SUPPORTED",t[t.MANIFEST_LOAD_ERROR=4e3]="MANIFEST_LOAD_ERROR",t[t.MANIFEST_CORS_ERROR=4001]="MANIFEST_CORS_ERROR",t[t.MANIFEST_PARSE_ERROR=4002]="MANIFEST_PARSE_ERROR",t[t.MEDIA_NOT_SUPPORTED=5e3]="MEDIA_NOT_SUPPORTED",t[t.MEDIA_LOAD_ERROR=5001]="MEDIA_LOAD_ERROR",t[t.MEDIA_DECODE_ERROR=5002]="MEDIA_DECODE_ERROR",t[t.MEDIA_AVPLAYER_ERROR=5003]="MEDIA_AVPLAYER_ERROR",t[t.MEDIA_ABORTED=5004]="MEDIA_ABORTED",t[t.NETWORK_ERROR=6e3]="NETWORK_ERROR",t[t.NETWORK_TIMEOUT=6001]="NETWORK_TIMEOUT",t[t.CONTENT_PROTECTION_ERROR=7e3]="CONTENT_PROTECTION_ERROR",t[t.CONTENT_PROTECTION_NOT_SUPPORTED=7001]="CONTENT_PROTECTION_NOT_SUPPORTED",t[t.CONTENT_PROTECTION_CONFIGURATION_MISSING=7002]="CONTENT_PROTECTION_CONFIGURATION_MISSING",t[t.CONTENT_PROTECTION_CONFIGURATION_INVALID=7003]="CONTENT_PROTECTION_CONFIGURATION_INVALID",t[t.CONTENT_PROTECTION_INITIALIZATION_INVALID=7004]="CONTENT_PROTECTION_INITIALIZATION_INVALID",t[t.CONTENT_PROTECTION_CERTIFICATE_ERROR=7005]="CONTENT_PROTECTION_CERTIFICATE_ERROR",t[t.CONTENT_PROTECTION_CERTIFICATE_INVALID=7006]="CONTENT_PROTECTION_CERTIFICATE_INVALID",t[t.CONTENT_PROTECTION_LICENSE_ERROR=7007]="CONTENT_PROTECTION_LICENSE_ERROR",t[t.CONTENT_PROTECTION_LICENSE_INVALID=7008]="CONTENT_PROTECTION_LICENSE_INVALID",t[t.CONTENT_PROTECTION_KEY_EXPIRED=7009]="CONTENT_PROTECTION_KEY_EXPIRED",t[t.CONTENT_PROTECTION_KEY_MISSING=7010]="CONTENT_PROTECTION_KEY_MISSING",t[t.CONTENT_PROTECTION_OUTPUT_RESTRICTED=7011]="CONTENT_PROTECTION_OUTPUT_RESTRICTED",t[t.CONTENT_PROTECTION_INTERNAL_ERROR=7012]="CONTENT_PROTECTION_INTERNAL_ERROR",t[t.SUBTITLE_LOAD_ERROR=8e3]="SUBTITLE_LOAD_ERROR",t[t.SUBTITLE_CORS_ERROR=8001]="SUBTITLE_CORS_ERROR",t[t.SUBTITLE_PARSE_ERROR=8002]="SUBTITLE_PARSE_ERROR",t[t.VR_PLATFORM_UNSUPPORTED=9e3]="VR_PLATFORM_UNSUPPORTED",t[t.VR_PRESENTATION_ERROR=9001]="VR_PRESENTATION_ERROR",t[t.AD_ERROR=1e4]="AD_ERROR",t[t.AD_BLOCKER_DETECTED=10001]="AD_BLOCKER_DETECTED",t[t.FULLSCREEN_ERROR=11e3]="FULLSCREEN_ERROR",t[t.PICTURE_IN_PICTURE_ERROR=11001]="PICTURE_IN_PICTURE_ERROR",t[t.CACHE_SOURCE_ERROR=12e3]="CACHE_SOURCE_ERROR",t[t.CACHE_CONTENT_PROTECTION_ERROR=12001]="CACHE_CONTENT_PROTECTION_ERROR",t[t.THEO_LIVE_UNKNOWN_ERROR=13e3]="THEO_LIVE_UNKNOWN_ERROR",t[t.THEO_LIVE_CHANNEL_NOT_FOUND=13001]="THEO_LIVE_CHANNEL_NOT_FOUND",t[t.THEO_LIVE_END_OF_DEMO=13002]="THEO_LIVE_END_OF_DEMO",t[t.THEO_LIVE_ANALYTICS_ERROR=13003]="THEO_LIVE_ANALYTICS_ERROR",t}({}),Je=function(t){return t[t.CONFIGURATION=1]="CONFIGURATION",t[t.LICENSE=2]="LICENSE",t[t.SOURCE=3]="SOURCE",t[t.MANIFEST=4]="MANIFEST",t[t.MEDIA=5]="MEDIA",t[t.NETWORK=6]="NETWORK",t[t.CONTENT_PROTECTION=7]="CONTENT_PROTECTION",t[t.SUBTITLE=8]="SUBTITLE",t[t.VR=9]="VR",t[t.AD=10]="AD",t[t.FULLSCREEN=11]="FULLSCREEN",t[t.CACHE=12]="CACHE",t[t.THEOLIVE=13]="THEOLIVE",t}({});!function(t){t.fromCode=function(i){const s=_.floor(i/1e3);if(s in t)return s;throw new g("Invalid error code: "+i)}}(Je||(Je={})),r(),r(),r(),r(),r(),r(),r(),r();var ei=function(t){return t.Sv="web",t.Tv="android",t.Ev="android-tv",t.Rv="ios",t.xv="tvos",t.Iv="chromecast",t.Pv="theoliveweb",t}({});var Ho=od?od.userAgent:"",Pd=Ho.match(/chrome\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/i),Cd=Ho.match(/Edg\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/i),Nd=Ho.match(/Android ([0-9\.]+)/i),Dd=Ho.match(/Windows NT ([0-9\.]+)/i),Bd=Ho.match(/(Version)\/((\d+)\.(\d+)(?:\.(\d+))?).*Safari/),Md=Ho.match(/Firefox\/([0-9\.]+)/i),Ld=Ho.match(/OPR\/(\d+\.\d+)/i),Od=Ho.match(/Tizen ([0-9\.]+)/i),Fd=Ho.match(/(iPhone OS|iPad OS|iPod OS|Mac OS X) (\d+)_(\d+)_?(\d+)?/),Vd=Ho.match(/HbbTV\/([0-9.]+)/i),Wd=Ho.match(/(AFT.*) Build/i),Ud=class{get Ke(){return this.Cv}get Nv(){return this.Dv}get Bv(){return this.Mv}get Lv(){return this.Ov}get Fv(){return this.Vv}get Wv(){return this.Uv}get Gv(){return this.Xv}get Zv(){return this.Hv}get zv(){return this.Yv}get Kv(){return this.qv}get Qv(){return this.Jv}get ru(){return this.$v}get t_(){return this.i_}get s_(){return this.e_||this.n_}get vd(){return this.r_}get Ks(){return this.h_}get o_(){return this.a_}get u_(){return this.c_}get d_(){var t;return null!=(t=this.l_)?t:this.f_}get v_(){return this.__}get g_(){var t;return(null==(t=s.chrome)?void 0:t.webview)&&this.m_>0}get p_(){return this.m_}get w_(){return this.y_}get b_(){return this.A_}get S_(){return this.T_}get k_(){return this.E_}get R_(){return this.x_}get I_(){return this.P_}get IS_FIRETV_AFTMM(){return"AFTMM"===this.C_}get N_(){return this.D_}get B_(){return this.M_}get L_(){return this.O_}get F_(){return this.V_}get W_(){return this.U_}get G_(){return this.X_}get Z_(){return this.H_}get z_(){return this.Y_}get K_(){return 0===this.q_&&As.ru?this.i_:this.q_}get j_(){return this.Q_}get J_(){return this.eg}get rg(){return this.hg}get og(){return this.ag}get cg(){return!(!this.S_&&!this.w_)&&this.d_<=56}get dg(){return this.fg}get vg(){return this._g}get gg(){return this.pg}get wg(){return this.yg}get Ag(){return this.Sg}get Tg(){return this.Eg}get Rg(){return this.xg}get Ig(){return this.Pg}get Cg(){return this.Ng}get IS_IOS_CHROME(){return this.Dg}constructor(){this.Cv=Boolean("ontouchstart"in self||self.DocumentTouch&&h instanceof self.DocumentTouch||od&&od.msMaxTouchPoints),this.Dv=/(mac\sos\sx)\s?([\w\s\.]+\w)*/i.test(Ho)||/(macintosh|mac(?=_powerpc)\s)/i.test(Ho),this.Mv=/Windows NT/i.test(Ho),this.Ov=Dd?C(Dd[1]):0,this.Vv=/Android/i.test(Ho),this.Uv=Nd?C(Nd[1]):0,this.Xv=/windows phone (8|8\.1)/i.test(Ho),this.Hv=/iPhone/i.test(Ho),this.Yv=/iPad/i.test(Ho),this.qv=this.Dv&&this.Cv&&!this.Yv,this.Jv=/iPod/i.test(Ho),this.r_=/Mobile Safari/i.test(Ho),this.e_=/EOS\d*STB/i.test(Ho),this.n_=/APP\d*STB/i.test(Ho),this.$v=(this.Hv||this.Yv||this.qv||this.Jv)&&!this.Xv,this.i_=Fd?C(Fd[2]):0,this.h_=this.Xv||this.$v||this.Vv||this.r_,this.a_=/CriOS/i.test(Ho),this.c_=Boolean(self.chrome&&/google/i.test(od.vendor))||this.a_,this.__=this.c_&&/Edg\//i.test(od.userAgent),this.m_=Cd?x(Cd[1],10):0,this.Dg=Boolean(/CriOS/i.test(Ho)),this.Ng=Boolean(self.chrome||/Chrome/i.test(Ho)||this.Dg),this.f_=Pd?x(Pd[1],10):0,this.y_=/SMART-TV.*Tizen/i.test(Ho),this.A_=Od?C(Od[1]):0,this.l_=this.A_>0?function(t){return t>=8?108:t>=7?94:t>=6.5?85:t>=6?76:t>=5.5?69:t>=5?63:t>=4?56:t>=3?47:0}(this.A_):void 0,this.T_=/webos|web0s/i.test(Ho),this.E_=/HbbTV/i.test(Ho),this.x_=!!Vd&&function(t){if(!t)return!1;const i=t.split(".").map(Number);return 3===i.length&&1===i[0]&&2===i[1]}(Vd[1]),this.P_=/AFT.* Build/i.test(Ho),this.C_=Wd?Wd[1]:void 0,this.D_=/VIZIO/i.test(Ho),this.M_=/Edge\/\d+/i.test(Ho),this.O_=/Trident/i.test(Ho),this.V_=this.O_&&!self.ActiveXObject&&"ActiveXObject"in self,this.U_=/Vivaldi/i.test(Ho),this.X_=/Firefox/i.test(Ho)&&!/Seamonkey/i.test(Ho),this.H_=Md?C(Md[1]):0,this.Y_=/Safari/i.test(Ho)&&!/Chrome/i.test(Ho)&&!this.Xv&&!this.y_,this.q_=Bd?C(Bd[2]):0,this.Q_=Boolean(Ld),this.eg=Ld?C(Ld[1]):0,this.hg=/CrKey/.test(Ho),this.ag=/\b(tv|smart-tv|smarttv|appletv|crkey|googletv|hbbtv|pov_tv|roku|viera|nettv|philipstv|vizio)\b/i.test(Ho),this.fg=/PlayStation 4/i.test(Ho),this._g=/PlayStation 5/i.test(Ho),this.pg="web"===ei.Ev,this.yg="web"===ei.Tv,this.Sg=this.yg||this.pg,this.Eg="web"===ei.Rv,this.xg="web"===ei.xv,this.Pg="web"===ei.Iv}};Ud.Bg=new Ud;var As=Ud.Bg;r();var za={}.hasOwnProperty,Gd={}.toString;function Y(t){return null!=t}function Xd(t){return void 0===t}var Zd,he=Array.isArray||function(t){return"[object Array]"===Gd.call(t)};function uu(t){return Nc(t)&&za.call(t,"length")&&ih(t.length)}function Nc(t){return"object"==typeof t&&null!==t}function Hd(t){return Nc(t)&&t.constructor&&t.constructor===w}function yo(t){return"string"==typeof t}function sr(t){return"boolean"==typeof t}function zd(t){return Y(t)&&"function"==typeof t.then}function Yd(t){return"[object Date]"===Gd.call(t)}function ih(t){return"number"==typeof t}function Kd(t){return"function"==typeof t}function ri(t){return Kd(t)||Nc(t)}function je(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function Yh(t){let i;for(;Y(i=t.firstChild);)t.removeChild(i)}function qd(t,i){let s;for(;Y(s=t.firstChild);)i.appendChild(s)}function jd(t,i){t.insertBefore(i,t.firstChild)}function Qd(t){return t&&t.nodeName&&t.nodeName.toLowerCase()||""}function Jd(t){const i=t.className;return"string"==typeof i?i:i&&"string"==typeof i.baseVal?i.baseVal:""}function $d(t,i){const s=t.className;"string"==typeof s?t.className=i:s&&"string"==typeof s.baseVal&&(s.baseVal=i)}function El(t,i){return void 0!==t.classList?t.classList.contains(i):void 0!==t.className&&-1!==(" "+Jd(t)+" ").indexOf(" "+i+" ")}function fi(t,i){if(void 0!==t.classList)t.classList.add(i);else if(void 0!==t.className){const s=Jd(t);-1===(" "+s+" ").indexOf(" "+i+" ")&&$d(t,(s+" "+i).trim())}}function Rl(t,i){if(void 0!==t.classList)t.classList.remove(i);else if(void 0!==t.className){let s=" "+Jd(t)+" ";const e=" "+i+" ";for(;-1!==s.indexOf(e);)s=s.replace(e," ");$d(t,s.trim())}}function Il(t,i,s){void 0===s&&(s=!El(t,i)),s?fi(t,i):Rl(t,i)}function Pl(t){t.stopPropagation()}function Nl(t,i){As.w_&&As.b_<3?function(t,i){let s=i;switch(i){case"flex":s="-webkit-flex";break;case"inline-flex":s="-webkit-inline-flex"}t.display=s}(t,i):function(t,i){if(t.display=i,t.display!==i){let s=i;switch(i){case"flex":s="-ms-flexbox";break;case"inline-flex":s="-ms-inline-flexbox"}t.display=s}}(t,i)}function Dl(t,i){const s=i.style;if(s)for(const i of w.keys(t)){const e=t[i];void 0!==e&&(s[i]=e)}}function Bl(t){const i=t.style;i.position="absolute",i.left="0",i.right="0",i.top="0",i.bottom="0",i.width="100%",i.height="100%"}function Ll(t){const i=t.style;i.position="",i.left="",i.right="",i.top="",i.bottom="",i.width="",i.height=""}function Ol(t){t.removeAttribute("title")}function Fl(t){t.addEventListener("mouseover",t=>{Ol(t.target)})}function Vl(t){try{return Boolean(t)&&t.parent!==t}catch(t){return!1}}r(),r();var ol=()=>{},so=t=>t;function Hh(t,i){let s=-1/0;return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];const h=Zd.Mg();h-s>=i&&(t.apply(this,n),s=h)}}function Wl(t,i){let s=0;return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];const h=this;0!==s&&Zd.Lg(s),s=Zd.Og(()=>{s=0,t.apply(h,n)},i)}}function Eu(t){let i;return()=>(void 0!==t&&(i=t(),t=void 0),i)}function Zr(t,i,s){if(null!=i){if("object"!=typeof i&&"function"!=typeof i)throw new g("Object expected.");var e,n;if(s){if(!Mt)throw new g("Symbol.asyncDispose is not defined.");e=i[Mt]}if(void 0===e){if(!Nt)throw new g("Symbol.dispose is not defined.");e=i[Nt],s&&(n=e)}if("function"!=typeof e)throw new g("Object not disposable.");n&&(e=function(){try{n.call(this)}catch(t){return Promise.reject(t)}}),t.stack.push({value:i,dispose:e,async:s})}else s&&t.stack.push({async:!0});return i}r(),r(),r();var Ul="function"==typeof SuppressedError?SuppressedError:function(t,i,s){var e=new m(s);return e.name="SuppressedError",e.error=t,e.suppressed=i,e};function hs(t){function i(i){t.error=t.hasError?new Ul(i,t.error,"An error was suppressed during disposal."):i,t.hasError=!0}var s,e=0;return function n(){for(;s=t.stack.pop();)try{if(!s.async&&1===e)return e=0,t.stack.push(s),Promise.resolve().then(n);if(s.dispose){var r=s.dispose.call(s.value);if(s.async)return e|=2,Promise.resolve(r).then(n,function(t){return i(t),n()})}else e|=1}catch(t){i(t)}if(1===e)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}()}function Xs(t,i){return Xl(t.slice(),i)}function Gl(t,i){const s=Xl(t,i);return s!==t&&Zl(s,void 0,t.length,t),t}function Xl(t,i){let s=t;const e=s.length;if(e<=1)return s;let n=new Array(e);for(let t=1;t<e;t*=2){Zl(s,i,t,n);const e=s;s=n,n=e}return s}function Zl(t,i,s,e){const n=t.length;let r=0;const h=2*s;let o,a,u,c,d;for(a=0;a<n;a+=h)for(u=a+s,o=u+s,u>n&&(u=n),o>n&&(o=n),c=a,d=u;;)if(c<u&&d<o)i&&i(t[c],t[d])<=0?e[r++]=t[c++]:e[r++]=t[d++];else if(c<u)e[r++]=t[c++];else{if(!(d<o))break;e[r++]=t[d++]}}r(),r(),r(),r(),r(),r();var ru=9007199254740991,Hl=2**-52;function ss(t,i,s){return _.min(_.max(t,i),s)}function we(t,i,s){return t===i||_.abs(t-i)<=s}function zl(t,i){if(t===i)return!0;const s=_.abs(t-i);if(s<Hl)return!0;return s<_.max(_.abs(t),_.abs(i))*Hl}function Yl(t,i){return t%i+(t<0?i:0)}function Kl(t){return t!=t}function ql(t,i){return t===i||Kl(t)&&Kl(i)}function Ql(t,i){let s=t,e=i;for(;0!==e;){const t=s%e;s=e,e=t}return s<0?-s:s}function Jl(t,i){return t.reduce((t,s)=>t+i(s),0)}var Ba=function(t){return t[t.rh=0]="rh",t[t.Fg=1]="Fg",t[t.Vg=-1]="Vg",t}({}),vc=(t,i)=>(0|t)-(0|i),Mu=(t,i)=>t===i?0:t<i?-1:t>i?1:S(t)?S(i)?0:1:-1;function $l(t,i,s){return we(t,i,s)?0:Mu(t,i)}var tf=(t,i)=>zl(t,i)?0:Mu(t,i);var sf="function"==typeof Array.prototype.find?(t,i)=>t.find(i):(t,i)=>{const s=li(t,i);return-1===s?void 0:t[s]},me=sf,ef="function"==typeof Array.prototype.findLast?(t,i)=>t.findLast(i):(t,i)=>{const s=nf(t,i);return-1===s?void 0:t[s]},gr=ef,li="function"==typeof Array.prototype.findIndex?(t,i)=>t.findIndex(i):(t,i)=>{for(let s=0;s<t.length;s+=1){if(i(t[s],s,t))return s}return-1},nf="function"==typeof Array.prototype.findLastIndex?(t,i)=>t.findLastIndex(i):(t,i)=>{for(let s=t.length-1;s>=0;s-=1){if(i(t[s],s,t))return s}return-1},rf="function"==typeof Array.prototype.at?(t,i)=>t.at(i):(t,i)=>{const s=t.length,e=i>=0?i:s+i;return e<0||e>=s?void 0:t[e]};function is(t,i){const s=t.indexOf(i);return-1!==s&&(Lh(t,s),!0)}function Lh(t,i){0===i?t.shift():t.splice(i,1)}function hf(t,i){const s=new Array(t.length);let e=0,n=0;for(;n<t.length;){if(t[n]===i){n++,s.length-=1;break}s[e++]=t[n++]}for(;n<t.length;)s[e++]=t[n++];return s}function Ft(t,i){return-1!==t.indexOf(i)}function of(t,i,s){if(t===i)return!0;if(t.length!==i.length)return!1;for(let e=0;e<t.length;e+=1)if(!s(t[e],i[e]))return!1;return!0}function Lr(t){t.length=0}function pc(t,i){if(t.length!==i.length)return!1;for(const s of t)if(!Ft(i,s))return!1;return!0}Array.prototype.flat;var vl="function"==typeof Array.prototype.flatMap?(t,i)=>t.flatMap(i):(t,i)=>{const s=[];for(let e=0;e<t.length;e++)s.push(...i(t[e],e));return s};function ho(t,i){return uf(t,(t,s)=>Mu(i(t),i(s)))}function af(t,i){return cf(t,(t,s)=>Mu(i(t),i(s)))}function uf(t,i){if(0!==t.length)return t.reduce((t,s)=>i(t,s)<=0?t:s)}function cf(t,i){return uf(t,(t,s)=>i(s,t))}function xc(t){return t.filter((i,s)=>t.indexOf(i)===s)}function df(t,i){return Promise.all(t.map(i)).then(i=>t.filter((t,s)=>i[s]))}function lf(t,i,s){if(t.length!==i.length)return!1;for(let e=0;e<t.length;e++)if(!s(t[e],i[e]))return!1;return!0}function ff(t,i){return function(t,i){const s=new Array(t);for(let e=0;e<t;e++)s[e]=i(e);return s}(t,i)}var vf=class{Wg(){if(!this.Ug&&!this.Gg){this.Ug=!0;for(const t of this.Xg.slice())t();this.Zg()}}Zg(){if(!this.Gg){this.Gg=!0;for(const t of this.Hg.slice())t();Lr(this.Xg),Lr(this.Hg)}}zg(t){this.Gg||this.Xg.push(t)}Yg(t){this.Gg||is(this.Xg,t)}Kg(t){this.Gg||this.Hg.push(t)}qg(t){this.Gg||is(this.Hg,t)}constructor(){this.Ug=!1,this.Gg=!1,this.Xg=[],this.Hg=[]}},ui=class t{get jg(){return this.Qg}Jg(){this.Qg.Wg()}Zg(){this.Qg.Zg()}$g(t){const i=this.Qg;if(i.Ug)return;if(t.Ug)return void i.Wg();if(i.Gg||t.Gg)return;const s=()=>{e(),i.Wg()},e=()=>{t.Yg(s),t.qg(e),i.Yg(s),i.qg(e)};t.zg(s),t.Kg(e),i.zg(s),i.Kg(e)}im(){const i=new t,s=new t,e=i.jg,n=s.jg,r=this.Qg,h=()=>{e.Ug&&n.Gg||n.Ug&&e.Gg?r.Wg():e.Gg&&n.Gg&&r.Zg()};e.zg(h),n.zg(h),e.Kg(h),n.Kg(h),i.$g(r),s.$g(r);return r.Kg(()=>{e.Yg(h),n.Yg(h),e.qg(h),n.qg(h)}),[i,s]}static nm(i){const s=new t;for(const t of i)void 0!==t&&s.$g(t);return s}[Nt](){this.Jg()}constructor(){this.Qg=new vf}};r(),r();var _f=function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];m.apply(this,i)};(_f.prototype=w.create(m.prototype)).constructor=_f;var rl=class extends _f{get name(){return"BaseError"}constructor(t,i){super(),this.cause=void 0,this.message=t||"Unknown error",this.cause=i,m.captureStackTrace&&m.captureStackTrace(this,this.constructor)}},us=class extends rl{get name(){return"AbortError"}constructor(t,i){super(t||"Aborted",i)}};function hc(t){return t instanceof m&&"AbortError"===t.name}function Ko(t){if(t&&t.Ug)throw new us}function Ui(t){if(hc(t))throw t}function Na(t){if(!hc(t))throw t}function $s(t,i){return i?new Promise((s,e)=>{if(i.Ug)return t.catch(ol),e(new us);const n=()=>{i.Yg(n),e(new us)};i.zg(n),t.then(t=>{i.Yg(n),s(t)},t=>{i.Yg(n),e(t)})}):t}async function Ce(t,i){const s={stack:[],error:void 0,hasError:!1};try{Zr(s,i,!1);return await t}catch(t){s.error=t,s.hasError=!0}finally{hs(s)}}async function gf(t,i){const s={stack:[],error:void 0,hasError:!1};try{Zr(s,i,!1);return await t(i.jg)}catch(t){s.error=t,s.hasError=!0}finally{hs(s)}}var mf=Promise.resolve(),ht="function"==typeof queueMicrotask?queueMicrotask:t=>{mf.then(t)};function _e(t){t.then(ol,ol)}async function vr(t){try{return await Promise.all(t)}catch(i){throw await Promise.all(t.map(t=>t.catch(ol))),i}}function hi(t,i){return new Promise((s,e)=>{if(void 0!==i&&i.Ug)return void e(new us);const n=Zd.Og(()=>{void 0!==i&&i.Yg(r),s()},t),r=()=>{Zd.Lg(n),e(new us)};void 0!==i&&i.zg(r)})}async function pf(t,i){const s={stack:[],error:void 0,hasError:!1};try{const e=Zr(s,new ui,!1);return await Promise.race([t,hi(i,e.jg).then(()=>{throw new m("Timeout")})])}catch(t){s.error=t,s.hasError=!0}finally{hs(s)}}function wf(t){return"video"===Qd(t)}function yf(t){t.src&&(t.removeAttribute("src"),t.load()),t.srcObject&&(t.srcObject=null,t.load()),t.hasChildNodes()&&(!function(t,i){const s=t.childNodes;for(let e=s.length-1;e>=0;e--){const n=s.item(e);Qd(n)===i&&t.removeChild(n)}}(t,"source"),t.load())}function bf(){return void 0!==h?h.createElement("video"):void 0}var mr=Eu(bf),Af=Eu(()=>"undefined"!=typeof HTMLVideoElement&&mr()instanceof HTMLVideoElement);function Sf(t){const i=h.createElement(t);return wf(i)&&i.addEventListener("contextmenu",Rf),kf(i),i}function Tf(t){kf(t),t.removeEventListener("contextmenu",Rf)}function kf(t){t.removeAttribute("id"),t.removeAttribute("class"),t.removeAttribute("style"),Yh(t),yf(t),t.pause(),t.playbackRate=1,t.disableRemotePlayback=!1,t.preload="auto",t.controls=!1,t.style.display="none",wf(t)&&(t.style.width="100%",t.style.height="100%",t.style.pointerEvents="none",t.playsInline=!0,t.setAttribute("webkit-playsinline",""))}function Ef(t,i){if(i.hm){const i=t.muted;t.muted=!0,t.muted=!1,t.muted=i}else if(t.paused){const i=t.play();zd(i)&&_e(i),t.pause()}}function Rf(t){t.preventDefault()}r(),r(),r();var xf=null;try{xf=new WebAssembly.Instance(new WebAssembly.Module(new j([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(y){}function Js(t,i,s){this.low=0|t,this.high=0|i,this.unsigned=!!s}function oo(t){return!0===(t&&t.um)}function If(t){var i=_.clz32(t&-t);return t?31-i:i}Js.prototype.um,w.defineProperty(Js.prototype,"um",{value:!0}),Js.isLong=oo;var Pf={},Cf={};function Nf(t,i){var s,e,n;return i?(n=0<=(t>>>=0)&&t<256)&&(e=Cf[t])?e:(s=ro(t,0,!0),n&&(Cf[t]=s),s):(n=-128<=(t|=0)&&t<128)&&(e=Pf[t])?e:(s=ro(t,t<0?-1:0,!1),n&&(Pf[t]=s),s)}function Df(t,i){if(S(t))return i?Uf:pu;if(i){if(t<0)return Uf;if(t>=Ff)return zf}else{if(t<=-Vf)return gi;if(t+1>=Vf)return Hf}return t<0?Df(-t,i).neg():ro(t%Of|0,t/Of|0,i)}function ro(t,i,s){return new Js(t,i,s)}Js.fromInt=Nf,Js.fromNumber=Df,Js.fromBits=ro;var Bf=_.pow;function Mf(t,i,s){if(0===t.length)throw m("empty string");if("number"==typeof i?(s=i,i=!1):i=!!i,"NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return i?Uf:pu;if((s=s||10)<2||36<s)throw RangeError("radix");var e;if((e=t.indexOf("-"))>0)throw m("interior hyphen");if(0===e)return Mf(t.substring(1),i,s).neg();for(var n=Df(Bf(s,8)),r=pu,h=0;h<t.length;h+=8){var o=_.min(8,t.length-h),a=x(t.substring(h,h+o),s);if(o<8){var u=Df(Bf(s,o));r=r.mul(u).add(Df(a))}else r=(r=r.mul(n)).add(Df(a))}return r.unsigned=i,r}function Lf(t,i){return"number"==typeof t?Df(t,i):"string"==typeof t?Mf(t,i):ro(t.low,t.high,"boolean"==typeof i?i:t.unsigned)}Js.fromString=Mf,Js.fromValue=Lf;var Of=4294967296,Ff=Of*Of,Vf=Ff/2,Wf=Nf(1<<24),pu=Nf(0);Js.ZERO=pu;var Uf=Nf(0,!0);Js.UZERO=Uf;var Gf=Nf(1);Js.ONE=Gf;var Xf=Nf(1,!0);Js.UONE=Xf;var Zf=Nf(-1);Js.NEG_ONE=Zf;var Hf=ro(-1,2147483647,!1);Js.MAX_VALUE=Hf;var zf=ro(-1,-1,!0);Js.MAX_UNSIGNED_VALUE=zf;var gi=ro(0,-2147483648,!1);Js.MIN_VALUE=gi;var oi=Js.prototype;oi.toInt=function(){return this.unsigned?this.low>>>0:this.low},oi.toNumber=function(){return this.unsigned?(this.high>>>0)*Of+(this.low>>>0):this.high*Of+(this.low>>>0)},oi.toString=function(t){if((t=t||10)<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(gi)){var i=Df(t),s=this.div(i),e=s.mul(i).sub(this);return s.toString(t)+e.toInt().toString(t)}return"-"+this.neg().toString(t)}for(var n=Df(Bf(t,6),this.unsigned),r=this,h="";;){var o=r.div(n),a=(r.sub(o.mul(n)).toInt()>>>0).toString(t);if((r=o).isZero())return a+h;for(;a.length<6;)a="0"+a;h=""+a+h}},oi.getHighBits=function(){return this.high},oi.getHighBitsUnsigned=function(){return this.high>>>0},oi.getLowBits=function(){return this.low},oi.getLowBitsUnsigned=function(){return this.low>>>0},oi.getNumBitsAbs=function(){if(this.isNegative())return this.eq(gi)?64:this.neg().getNumBitsAbs();for(var t=0!=this.high?this.high:this.low,i=31;i>0&&!(t&1<<i);i--);return 0!=this.high?i+33:i+1},oi.isSafeInteger=function(){var t=this.high>>21;return!t||!this.unsigned&&(-1===t&&!(0===this.low&&-2097152===this.high))},oi.isZero=function(){return 0===this.high&&0===this.low},oi.eqz=oi.isZero,oi.isNegative=function(){return!this.unsigned&&this.high<0},oi.isPositive=function(){return this.unsigned||this.high>=0},oi.isOdd=function(){return!(1&~this.low)},oi.isEven=function(){return!(1&this.low)},oi.equals=function(t){return oo(t)||(t=Lf(t)),(this.unsigned===t.unsigned||this.high>>>31!=1||t.high>>>31!=1)&&(this.high===t.high&&this.low===t.low)},oi.eq=oi.equals,oi.notEquals=function(t){return!this.eq(t)},oi.neq=oi.notEquals,oi.ne=oi.notEquals,oi.lessThan=function(t){return this.comp(t)<0},oi.lt=oi.lessThan,oi.lessThanOrEqual=function(t){return this.comp(t)<=0},oi.lte=oi.lessThanOrEqual,oi.le=oi.lessThanOrEqual,oi.greaterThan=function(t){return this.comp(t)>0},oi.gt=oi.greaterThan,oi.greaterThanOrEqual=function(t){return this.comp(t)>=0},oi.gte=oi.greaterThanOrEqual,oi.ge=oi.greaterThanOrEqual,oi.compare=function(t){if(oo(t)||(t=Lf(t)),this.eq(t))return 0;var i=this.isNegative(),s=t.isNegative();return i&&!s?-1:!i&&s?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},oi.comp=oi.compare,oi.negate=function(){return!this.unsigned&&this.eq(gi)?gi:this.not().add(Gf)},oi.neg=oi.negate,oi.add=function(t){oo(t)||(t=Lf(t));var i=this.high>>>16,s=65535&this.high,e=this.low>>>16,n=65535&this.low,r=t.high>>>16,h=65535&t.high,o=t.low>>>16,a=0,u=0,c=0,d=0;return c+=(d+=n+(65535&t.low))>>>16,u+=(c+=e+o)>>>16,a+=(u+=s+h)>>>16,a+=i+r,ro((c&=65535)<<16|(d&=65535),(a&=65535)<<16|(u&=65535),this.unsigned)},oi.subtract=function(t){return oo(t)||(t=Lf(t)),this.add(t.neg())},oi.sub=oi.subtract,oi.multiply=function(t){if(this.isZero())return this;if(oo(t)||(t=Lf(t)),xf)return ro(xf.mul(this.low,this.high,t.low,t.high),xf.get_high(),this.unsigned);if(t.isZero())return this.unsigned?Uf:pu;if(this.eq(gi))return t.isOdd()?gi:pu;if(t.eq(gi))return this.isOdd()?gi:pu;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(Wf)&&t.lt(Wf))return Df(this.toNumber()*t.toNumber(),this.unsigned);var i=this.high>>>16,s=65535&this.high,e=this.low>>>16,n=65535&this.low,r=t.high>>>16,h=65535&t.high,o=t.low>>>16,a=65535&t.low,u=0,c=0,d=0,l=0;return d+=(l+=n*a)>>>16,c+=(d+=e*a)>>>16,d&=65535,c+=(d+=n*o)>>>16,u+=(c+=s*a)>>>16,c&=65535,u+=(c+=e*o)>>>16,c&=65535,u+=(c+=n*h)>>>16,u+=i*a+s*o+e*h+n*r,ro((d&=65535)<<16|(l&=65535),(u&=65535)<<16|(c&=65535),this.unsigned)},oi.mul=oi.multiply,oi.divide=function(t){if(oo(t)||(t=Lf(t)),t.isZero())throw m("division by zero");var i,s,e;if(xf)return this.unsigned||-2147483648!==this.high||-1!==t.low||-1!==t.high?ro((this.unsigned?xf.div_u:xf.div_s)(this.low,this.high,t.low,t.high),xf.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?Uf:pu;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return Uf;if(t.gt(this.shru(1)))return Xf;e=Uf}else{if(this.eq(gi))return t.eq(Gf)||t.eq(Zf)?gi:t.eq(gi)?Gf:(i=this.shr(1).div(t).shl(1)).eq(pu)?t.isNegative()?Gf:Zf:(s=this.sub(t.mul(i)),e=i.add(s.div(t)));if(t.eq(gi))return this.unsigned?Uf:pu;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();e=pu}for(s=this;s.gte(t);){i=_.max(1,_.floor(s.toNumber()/t.toNumber()));for(var n=_.ceil(_.log(i)/_.LN2),r=n<=48?1:Bf(2,n-48),h=Df(i),o=h.mul(t);o.isNegative()||o.gt(s);)o=(h=Df(i-=r,this.unsigned)).mul(t);h.isZero()&&(h=Gf),e=e.add(h),s=s.sub(o)}return e},oi.div=oi.divide,oi.modulo=function(t){return oo(t)||(t=Lf(t)),xf?ro((this.unsigned?xf.rem_u:xf.rem_s)(this.low,this.high,t.low,t.high),xf.get_high(),this.unsigned):this.sub(this.div(t).mul(t))},oi.mod=oi.modulo,oi.rem=oi.modulo,oi.not=function(){return ro(~this.low,~this.high,this.unsigned)},oi.countLeadingZeros=function(){return this.high?_.clz32(this.high):_.clz32(this.low)+32},oi.clz=oi.countLeadingZeros,oi.countTrailingZeros=function(){return this.low?If(this.low):If(this.high)+32},oi.ctz=oi.countTrailingZeros,oi.and=function(t){return oo(t)||(t=Lf(t)),ro(this.low&t.low,this.high&t.high,this.unsigned)},oi.or=function(t){return oo(t)||(t=Lf(t)),ro(this.low|t.low,this.high|t.high,this.unsigned)},oi.xor=function(t){return oo(t)||(t=Lf(t)),ro(this.low^t.low,this.high^t.high,this.unsigned)},oi.shiftLeft=function(t){return oo(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?ro(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):ro(0,this.low<<t-32,this.unsigned)},oi.shl=oi.shiftLeft,oi.shiftRight=function(t){return oo(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?ro(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):ro(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},oi.shr=oi.shiftRight,oi.shiftRightUnsigned=function(t){return oo(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?ro(this.low>>>t|this.high<<32-t,this.high>>>t,this.unsigned):ro(32===t?this.high:this.high>>>t-32,0,this.unsigned)},oi.shru=oi.shiftRightUnsigned,oi.shr_u=oi.shiftRightUnsigned,oi.rotateLeft=function(t){var i;return oo(t)&&(t=t.toInt()),0==(t&=63)?this:32===t?ro(this.high,this.low,this.unsigned):t<32?(i=32-t,ro(this.low<<t|this.high>>>i,this.high<<t|this.low>>>i,this.unsigned)):(i=32-(t-=32),ro(this.high<<t|this.low>>>i,this.low<<t|this.high>>>i,this.unsigned))},oi.rotl=oi.rotateLeft,oi.rotateRight=function(t){var i;return oo(t)&&(t=t.toInt()),0==(t&=63)?this:32===t?ro(this.high,this.low,this.unsigned):t<32?(i=32-t,ro(this.high<<i|this.low>>>t,this.low<<i|this.high>>>t,this.unsigned)):(i=32-(t-=32),ro(this.low<<i|this.high>>>t,this.high<<i|this.low>>>t,this.unsigned))},oi.rotr=oi.rotateRight,oi.toSigned=function(){return this.unsigned?ro(this.low,this.high,!1):this},oi.toUnsigned=function(){return this.unsigned?this:ro(this.low,this.high,!0)},oi.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},oi.toBytesLE=function(){var t=this.high,i=this.low;return[255&i,i>>>8&255,i>>>16&255,i>>>24,255&t,t>>>8&255,t>>>16&255,t>>>24]},oi.toBytesBE=function(){var t=this.high,i=this.low;return[t>>>24,t>>>16&255,t>>>8&255,255&t,i>>>24,i>>>16&255,i>>>8&255,255&i]},Js.fromBytes=function(t,i,s){return s?Js.fromBytesLE(t,i):Js.fromBytesBE(t,i)},Js.fromBytesLE=function(t,i){return new Js(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,i)},Js.fromBytesBE=function(t,i){return new Js(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],i)},"function"==typeof BigInt&&(Js.fromBigInt=function(t,i){return ro(Number(BigInt.asIntN(32,t)),Number(BigInt.asIntN(32,t>>BigInt(32))),i)},Js.fromValue=function(t,i){return"bigint"==typeof t?Js.fromBigInt(t,i):Lf(t,i)},oi.toBigInt=function(){var t=BigInt(this.low>>>0);return BigInt(this.unsigned?this.high>>>0:this.high)<<BigInt(32)|t});var mh=Js;function Yf(t,i){return t.lessThan(i)?t:i}function Kf(t){return!S(t.getTime())}function qf(){return Date.now()||(new Date).getTime()}function jf(t){return t/1e3}function dn(t){return 1e3*t}var $=1/6,Qf=mh.fromNumber(ru);function uh(t,i){if(0===i)return t.isZero()?NaN:t.isNegative()?-1/0:1/0;if(t.lessThanOrEqual(Qf))return t.toNumber()/i;const s=t.divide(i),e=t.subtract(s.multiply(i));return s.toNumber()+e.toNumber()/i}var Jf=Boolean("ontouchstart"in self||self.DocumentTouch&&h instanceof self.DocumentTouch)||Boolean(od&&od.msMaxTouchPoints),$f=mr(),iv=Boolean($f&&$f.webkitShowPlaybackTargetPicker),sv=class{get dm(){return void 0===this.lm&&(this.lm=this.fm()),this.lm}fm(){return 0}get vm(){return As.Fv?"android":As.Nv?"macos":As.ru?"ios":As.Bv?"windows":"other"}get _m(){return As.og?"tv":As.Ks?"mobile":"desktop"}get gm(){return!As.og}get pm(){if(s.screen)return{width:s.screen.width,height:s.screen.height}}get wm(){return s.devicePixelRatio||1}get ym(){return iv}get Am(){return!1}get Sm(){return!0}get Tm(){return!!(As.z_||As.ru||As.g_)||!!As.N_}get Em(){return As.N_}get Rm(){return!As.ru}get xm(){return!0}get Im(){return!0}get Pm(){return!1}get Cm(){}get Nm(){return!0}get Dm(){return!1}get Bm(){return As.N_}get Mm(){return!1}Lm(t,i){return!0}Om(t){return t>=2*$}get Fm(){return!1}get Vm(){return!1}constructor(){this.lm=void 0,this.Wm=!1,this.Ke=Jf,this.Ks=!1,this.hm=!0}},ev=class extends sv{constructor(){super()}};r();var nv=class extends ev{get Cm(){if(As.Nv)return 4096}Lm(t,i){if(t&&t.Um&&i&&i.Um){const s=rv(t.Um,"mp4a.40.2")&&rv(i.Um,"mp4a.40.5"),e=rv(t.Um,"mp4a.40.5")&&rv(i.Um,"mp4a.40.2"),n=rv(t.Um,"mp4a.40.2")&&rv(i.Um,"mp4a.40.34"),r=rv(t.Um,"mp4a.40.34")&&rv(i.Um,"mp4a.40.2"),h=rv(t.Um,"mp4a.40.5")&&rv(i.Um,"mp4a.40.34"),o=rv(t.Um,"mp4a.40.34")&&rv(i.Um,"mp4a.40.5");return!(s||e||n||r||h||o)}return!0}};function rv(t,i){return t.indexOf(i)>-1}r();var hv=class extends ev{Om(t){return t>=2}};r();var ov=class extends ev{get Mm(){return As.K_<17}get Fm(){return!0}constructor(){super(),this.Wm=As.K_>=11,this.hm=As.z_&&!(As.ru&&As.K_<10)}};r();var av,uv=class extends ev{get Nm(){return!As.Bv||(As.v_?92!==As.p_:As.d_>=100)}};r(),r(),r(),r(),r();var cv=function(){const t=bf();if(!t)return!1;const i=t.muted;return t.muted=!i,t.muted!==i}(),dv=function(){if(As.Kv)return!1;const t=bf();if(!t)return!1;const i=t.volume;return t.volume=i/2+.1,i!==t.volume}();var wi=class extends sv{fm(){return this.Gm.dm}get Cm(){return this.Gm.Cm}get Nm(){return this.Gm.Nm}Lm(t,i){return this.Gm.Lm(t,i)}Om(t){return this.Gm.Om(t)}get Mm(){return this.Gm.Mm}constructor(t){super(),this.Gm=void 0,this.Gm=t,this.Wm=this.Gm.Wm,this.Ke=this.Gm.Ke,this.hm=cv&&this.Gm.hm}},lv=class extends wi{get Pm(){return As.ru}constructor(t){super(t),this.Wm=!0,this.Ks=!0}};r();var fv=class{Xm(){return new this.Zm}Hm(t){return this.Zm.isTypeSupported(t)}constructor(t){this.Zm=void 0,this.Zm=Au(t)}};function Au(t){return t&&ri(s.ManagedMediaSource)?s.ManagedMediaSource:ri(s.MediaSource)?s.MediaSource:void 0}var vv=class extends lv{get Pm(){return!0}fm(){return Au(!0)?super.fm():1}};r();var _v=class extends wi{get Am(){return As.b_<3}get Sm(){return As.b_>=3}get pm(){return s.tizen&&!this.zm&&s.tizen.systeminfo.getPropertyValue("DISPLAY",t=>{const i=t.resolutionWidth,s=t.resolutionHeight;1===i&&1===s||(this.zm={width:i,height:s})}),this.zm}get Dm(){return As.b_<3}Lm(t,i){return super.Lm(t,i)}constructor(...t){super(...t),this.zm=void 0}};r();var gv=class extends wi{get pm(){return s.webOS&&!this.zm&&s.webOS.deviceInfo(t=>{this.zm={width:t.screenWidth,height:t.screenHeight}}),this.zm}get xm(){return!1}constructor(...t){super(...t),this.zm=void 0}};r();var mv=class extends wi{get Pm(){return!0}get Fm(){return this.Gm.Fm}};r();var pv=class extends wi{get Vm(){return As.IS_FIRETV_AFTMM}};!function(t){av=t}(function(){const t=function(){if(As.G_)return new nv;if(As.B_||As.L_)return new hv;if(As.z_)return new ov;if(As.u_)return new uv;return new ev}();return As.ru?new vv(t):As.I_?new pv(t):As.Ks?new lv(t):As.w_?new _v(t):As.S_?new gv(t):As.Nv?new mv(t):new wi(t)}()),r(),r(),r();var wv=!(As.L_&&!As.F_),wc=self.console;function yv(t){if(Nc(t))try{return JSON.stringify(t)}catch(t){}return t}function bv(t){return t.map(yv).join(" ")}function Av(t){const i=wc&&wc[t];return i?i.bind&&wv?i.bind(wc):function(){for(var i=arguments.length,s=new Array(i),e=0;e<i;e++)s[e]=arguments[e];wc[t](bv(s))}:void 0}var Sv=Av("log")||ol,Si=Av("warn")||Sv.bind(void 0,"WARNING:"),Tv=Av("error")||Sv.bind(void 0,"ERROR:"),kv=(()=>{const t=wc&&wc.assert;return t?t.bind&&wv?t.bind(wc):function(t){for(var i=arguments.length,s=new Array(i>1?i-1:0),e=1;e<i;e++)s[e-1]=arguments[e];wc.assert(t,bv(s))}:function(t){for(var i=arguments.length,s=new Array(i>1?i-1:0),e=1;e<i;e++)s[e-1]=arguments[e];t||Tv("Assertion failed:",...s)}})();function Ev(t,i){for(var s=0;s<i.length;s++){var e=i[s];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),w.defineProperty(t,e.key,e)}}function Rv(t,i){var s=function(t,i){var s=t.length;if(s<=1)return t;for(var e=new Array(s),n=1;n<s;n*=2){xv(t,i,n,e);var r=t;t=e,e=r}return t}(t,i);return s!==t&&xv(s,null,t.length,t),t}function xv(t,i,s,e){var n,r,h,o,a,u=t.length,c=0,d=2*s;for(n=0;n<u;n+=d)for(h=(r=n+s)+s,r>u&&(r=u),h>u&&(h=u),o=n,a=r;;)if(o<r&&a<h)i(t[o],t[a])<=0?e[c++]=t[o++]:e[c++]=t[a++];else if(o<r)e[c++]=t[o++];else{if(!(a<h))break;e[c++]=t[a++]}}r();var Iv=/[a-zA-Z]/,Pv=/[0-9]/,Cv=/[0-9a-fA-F]/,Nv=/^0x/i,Dv=/^[0-9]+$/,Bv=/^[0-9a-fA-F]+$/,Mv=/^[0-7]+$/,Lv=w.prototype.toString,Ov=Array.isArray||function(t){return"[object Array]"===Lv.call(t)},Fv=void 0!==td&&"symbol"==typeof id;function Vv(t){return Ov(t)?t:Array.from(t)}function Wv(t,i,s){var e=t[i];t[i]=t[s],t[s]=e}function Uv(t){return t>=65&&t<=90}function Gv(t){return Uv(t)||function(t){return t>=97&&t<=122}(t)}function Xv(t){return t>=48&&t<=57}function Zv(t){return Xv(t)||Gv(t)}function Hv(t){return Xv(t)||t>=65&&t<=70||t>=97&&t<=102}function zv(t){return Uv(t)?t+32:t}function Yv(t){return Xv(t)?t-48:t>=65&&t<=70?t-65+10:t>=97&&t<=102?t-97+10:-1}function Kv(t,i){return void 0===i&&(i=!1),0<=t&&t<=9?t+48:10<=t&&t<=15?t+(i?87:55):-1}var qv=_.min,jv=String.fromCharCode;function Qv(t){for(var i=t.length,s=[],e=0;e<i;e+=16384){var n=qv(e+16384,i);s.push(jv.apply(null,t.slice(e,n)))}return s.join("")}var Jv=2147483647,$v=/[^\0-\x7E]/,t_=/[\x2E\u3002\uFF0E\uFF61]/g,i_={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},s_=_.floor,e_=String.fromCharCode;function n_(t){throw new RangeError(i_[t])}function r_(t){for(var i=[],s=0,e=t.length;s<e;){var n=t.charCodeAt(s++);if(n>=55296&&n<=56319&&s<e){var r=t.charCodeAt(s++);56320==(64512&r)?i.push(((1023&n)<<10)+(1023&r)+65536):(i.push(n),s--)}else i.push(n)}return i}var h_,o_,a_,u_=function(t,i){return t+22+75*(t<26)-((0!=i)<<5)},c_=function(t,i,s){var e=0;for(t=s?s_(t/700):t>>1,t+=s_(t/i);t>455;e+=36)t=s_(t/35);return s_(e+36*t/(t+38))},d_=function(t){return function(t,i){var s=t.split("@"),e="";s.length>1&&(e=s[0]+"@",t=s[1]);var n=function(t,i){for(var s=[],e=t.length;e--;)s[e]=i(t[e]);return s}((t=t.replace(t_,".")).split("."),i).join(".");return e+n}(t,function(t){return $v.test(t)?"xn--"+function(t){for(var i=[],s=(t=r_(t)).length,e=128,n=0,r=72,h=0,o=t;h<o.length;h++){var a=o[h];a<128&&i.push(e_(a))}var u=i.length,c=u;for(u&&i.push("-");c<s;){for(var d=Jv,l=0,f=t;l<f.length;l++){var v=f[l];v>=e&&v<d&&(d=v)}var _=c+1;d-e>s_((Jv-n)/_)&&n_("overflow"),n+=(d-e)*_,e=d;for(var g=0,m=t;g<m.length;g++){var p=m[g];if(p<e&&++n>Jv&&n_("overflow"),p==e){for(var w=n,y=36;;y+=36){var b=y<=r?1:y>=r+26?26:y-r;if(w<b)break;var A=w-b,S=36-b;i.push(e_(u_(b+A%S,0))),w=s_(A/S)}i.push(e_(u_(w,0))),r=c_(n,_,c==u),n=0,++c}}++n,++e}return i.join("")}(t):t})};function bn(t){for(var i=[],s=0;s<t.length;s++){var e=t[s];e>65535&&(e-=65536,i.push(e>>>10&1023|55296),e=56320|1023&e),i.push(e)}return Qv(i)}function l_(t){if(t>=55296&&t<=57343)throw new m("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value")}function f_(t,i){return t>>i&63|128}function v_(t,i){4294967168&t?(4294965248&t?4294901760&t?4292870144&t||(i.push(t>>18&7|240),i.push(f_(t,12)),i.push(f_(t,6))):(l_(t),i.push(t>>12&15|224),i.push(f_(t,6))):i.push(t>>6&31|192),i.push(63&t|128)):i.push(t)}function __(t){for(var i=[],s=0;s<t.length;s++){v_(t[s],i)}return i}function g_(){if(a_>=o_)throw new m("Invalid byte index");var t=255&h_[a_];if(a_++,128==(192&t))return 63&t;throw new m("Invalid continuation byte")}function m_(){var t,i;if(a_>o_)throw new m("Invalid byte index");if(a_===o_)return!1;if(t=255&h_[a_],a_++,!(128&t))return t;if(192==(224&t)){if((i=(31&t)<<6|g_())>=128)return i;throw new m("Invalid continuation byte")}if(224==(240&t)){if((i=(15&t)<<12|g_()<<6|g_())>=2048)return l_(i),i;throw new m("Invalid continuation byte")}if(240==(248&t)&&(i=(7&t)<<18|g_()<<12|g_()<<6|g_())>=65536&&i<=1114111)return i;throw new m("Invalid UTF-8 detected")}function p_(t){return[37,Kv(t>>4),Kv(15&t)]}function w_(t){return function(t){return t>=0&&t<=31}(t)||t>126}function y_(t){return w_(t)||32===t||34===t||60===t||62===t||96===t}function b_(t){return y_(t)||35===t||63===t||123===t||125===t}function A_(t){return b_(t)||47===t||58===t||59===t||61===t||64===t||t>=91&&t<=94||124===t}function S_(t){return t<33||t>126||34===t||35===t||60===t||62===t}function T_(t){return S_(t)||39===t}function k_(t,i){if(!i(t))return[t];for(var s=__([t]),e=[],n=0;n<s.length;n++){var r=s[n];e.push.apply(e,p_(r))}return e}function E_(t,i){for(var s=[],e=0,n=r_(t);e<n.length;e++){var r=n[e];s.push.apply(s,k_(r,i))}return bn(s)}function R_(t){return function(t){for(var i=[],s=t.length,e=0;e<s;e++){var n=t[e];if(37===n&&e+2<s&&Hv(t[e+1])&&Hv(t[e+2])){var r=Yv(t[e+1])<<4|Yv(t[e+2]);i.push(r),e+=2}else i.push(n)}return i}(__(t))}function x_(t){return bn(function(t){h_=t.slice(),o_=h_.length,a_=0;for(var i,s=[];!1!==(i=m_());)s.push(i);return s}(R_(r_(t))))}function I_(t){var i=t.length,s=[0,0,0,0,0,0,0,0],e=0,n=null,r=0;if(r<i&&":"===t[r]){if(!(r+1<i&&":"===t[r+1]))throw new g;r+=2,n=e+=1}for(;r<i;){if(8===e)throw new g("Too many groups");if(":"!==t[r]){for(var h=0,o=0;o<4&&r<i&&Cv.test(t[r]);)h=h<<4|x(t[r],16),r+=1,o+=1;if("."===t[r]){if(0===o)throw new g;if(r-=o,e>6)throw new g;for(var a=0;r<i;){var u=null;if(a>0){if(!("."===t[r]&&a<4))throw new g;r+=1}if(!Pv.test(t[r]))throw new g;for(;r<i&&Pv.test(t[r]);){var c=x(t[r],10);if(null===u)u=c;else{if(0===u)throw new g;if((u=10*u+c)>255)throw new g}r+=1}s[e]=s[e]<<8|u,2!==(a+=1)&&4!==a||(e+=1)}if(4!==a)throw new g;break}if(":"===t[r]){if((r+=1)===i)throw new g}else if(r<i)throw new g;s[e]=h,e+=1}else{if(null!==n)throw new g("Too many :: groups");r+=1,n=e+=1}}if(null!==n){var d=e-n;for(e=7;0!==e&&d>0;)Wv(s,e,n+d-1),e-=1,d-=1}else if(8!==e)throw new g;return s}function P_(t){var i=10,s=Dv;return Nv.test(t)?(t=t.slice(2),i=16,s=Bv):t.length>=2&&"0"===t[0]&&(t=t.slice(1),i=8,s=Mv),""===t?0:s.test(t)?x(t,i):void 0}var Cc={Ym:4},C_=/[\0\t\n\r #%/:?@\[\\\]]/,N_=/[\0\t\n\r #/:?@\[\\\]]/;function D_(t,i){if("["===t[0]){if("]"!==t[t.length-1])throw new g("Invalid IPv6 address");return{Ym:2,Km:I_(t.slice(1,-1))}}if(!i)return function(t){if(N_.test(t))throw new g("Invalid code point in opaque host");var i=E_(t,w_);return""===i?Cc:{Ym:3,qm:i}}(t);var s=function(t){var i=function(t){return d_(t.toLowerCase())}(t);return i}(x_(t));if(C_.test(s))throw new g("Invalid code point in host");var e=function(t){var i=t.split(".");if(""===i[i.length-1]&&i.pop(),!(i.length>4)){for(var s=[],e=0;e<i.length;e++){var n=i[e];if(""===n)return;var r=P_(n);if(void 0===r)return;s.push(r)}for(var h=0;h<s.length-1;h++)if(s[h]>255)throw new g;if(s[s.length-1]>=_.pow(256,5-s.length))throw new g;for(var o=s.pop(),a=0;a<s.length;a++)o+=s[a]*_.pow(256,3-a);return o}}(s);return void 0!==e?{Ym:1,Km:e}:""===s?Cc:{Ym:0,jm:s}}function B_(t){switch(t.Ym){case 0:return t.jm;case 1:return function(t){for(var i=[],s=t,e=1;e<=4;e++)i.push(""+(255&s)),4!==e&&i.push("."),s>>>=8;return i.reverse().join("")}(t.Km);case 2:return"["+function(t){for(var i="",s=function(t){for(var i=0,s=0,e=0,n=0,r=0;r<8;r++)0===t[r]?(0===n&&(e=r),n++):(n>s&&(i=e,s=n),n=0);return n>s&&(i=e,s=n),s>1?i:null}(t),e=!1,n=0;n<8;n++){if(e){if(0===t[n])continue;e=!1}s!==n?(i+=t[n].toString(16),7!==n&&(i+=":")):(i+=0===n?"::":":",e=!0)}return i}(t.Km)+"]";case 3:return t.qm;case 4:return""}}var M_=/\+/g;function L_(t){return 42===t||45===t||46===t||95===t||Zv(t)}function O_(t){for(var i=t.split("&"),s=[],e=0;e<i.length;e++){var n=i[e];if(""!==n){var r=n.indexOf("="),h=void 0,o=void 0;-1!==r?(h=n.slice(0,r),o=n.slice(r+1)):(h=n,o=""),h=h.replace(M_," "),o=o.replace(M_," ");var a=x_(h),u=x_(o);s.push([a,u])}}return s}function F_(t){for(var i="",s=0;s<t.length;s++){var e=t[s];s>0&&(i+="&"),i+=V_(__(r_(e[0])))+"="+V_(__(r_(e[1])))}return i}function V_(t){for(var i=[],s=0;s<t.length;s++){var e=t[s];32===e?i.push(43):L_(e)?i.push(e):i.push.apply(i,p_(e))}return Qv(i)}var W_=/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/;function Ti(t){var i=""+t,s=W_.exec(i);return s?function(t,i){for(var s=t.length,e=[],n=i;n<s;n++){var r=t.charCodeAt(n);if(G_(r))if(X_(r)||n===s-1)e.push(U_);else{var h=t.charCodeAt(n+1);X_(h)?(e.push(r,h),n++):e.push(U_)}else e.push(r)}return t.slice(0,i)+Qv(e)}(i,s.index):i}var U_=65533,G_=function(t){return 55296==(63488&t)},X_=function(t){return!!(1024&t)};function Z_(t,i){var s=t[0],e=i[0];return s===e?0:s<e?-1:1}function H_(t){t.Qm.length=0}function z_(t,i){!function(t,i){for(var s=0;s<i.length;s++)t[s]=i[s];t.length=i.length}(t.Qm,O_(i))}function Y_(t){if(t.rc){var i=F_(t.Qm);""===i&&(i=null),t.rc.rc.Jm=i}}var wr=function(){function t(t){if(void 0===t&&(t=void 0),this.rc=null,null==t)this.Qm=[];else if("object"==typeof t||"function"==typeof t)if(function(t){return t instanceof wr&&!!Ov(t.Qm)&&(!Fv||t[id]===K_)}(t))this.Qm=t.Qm.slice();else if(function(t){return null!=t&&(!!Ov(t)||!!Fv&&"function"==typeof t[id])}(t)){this.Qm=[];for(var i=0,s=Vv(t);i<s.length;i++){var e=Vv(s[i]);if(2!==e.length)throw new g("Invalid name-value pair");this.Qm.push([Ti(e[0]),Ti(e[1])])}}else for(var n in this.Qm=[],t)w.prototype.hasOwnProperty.call(t,n)&&this.Qm.push([Ti(n),Ti(t[n])]);else(t=Ti(t)).length>0&&"?"===t[0]&&(t=t.slice(1)),this.Qm=O_(t)}var i=t.prototype;return i.append=function(t,i){t=Ti(t),i=Ti(i),this.Qm.push([t,i]),Y_(this)},i.delete=function(t){t=Ti(t);for(var i=this.Qm,s=0;s<i.length;){i[s][0]===t?i.splice(s,1):s++}Y_(this)},i.get=function(t){t=Ti(t);for(var i=this.Qm,s=0;s<i.length;s++){var e=i[s];if(e[0]===t)return e[1]}return null},i.getAll=function(t){t=Ti(t);for(var i=this.Qm,s=[],e=0;e<i.length;e++){var n=i[e];n[0]===t&&s.push(n[1])}return s},i.has=function(t){t=Ti(t);for(var i=this.Qm,s=0;s<i.length;s++){if(i[s][0]===t)return!0}return!1},i.set=function(t,i){t=Ti(t),i=Ti(i);for(var s=this.Qm,e=!1,n=0;n<s.length;){var r=s[n];r[0]===t?e?s.splice(n,1):(r[1]=i,e=!0,n++):n++}e||s.push([t,i]),Y_(this)},i.sort=function(){Rv(this.Qm,Z_),Y_(this)},i.toString=function(){return F_(this.Qm)},i.entries=function(){return new J_(this.Qm,q_)},i.keys=function(){return new J_(this.Qm,j_)},i.values=function(){return new J_(this.Qm,Q_)},i.forEach=function(t){var i=this;this.Qm.forEach(function(s){return t(s[1],s[0],i)})},t}(),K_=wr.prototype.entries;Fv&&(wr.prototype[id]=K_);var q_=function(t){return[t[0],t[1]]},j_=function(t){return t[0]},Q_=function(t){return t[1]},J_=function(){function t(t,i){this.$m=0,this.Qm=t,this.tp=i}return t.prototype.next=function(){return this.$m<this.Qm.length?{done:!1,value:this.tp(this.Qm[this.$m++])}:{done:!0,value:void 0}},t}(),$_="null";var no=w.create(null);no.ftp=21,no.file=0,no.gopher=70,no.http=80,no.https=443,no.ws=80,no.wss=443;var tg=/^(?:\.|%2e)$/i,ig=/^(?:\.|%2e){2}$/i;function sg(t){return tg.test(t)}function eg(t){return ig.test(t)}function ng(t){return void 0!==no[t]}function ct(t){return ng(t.sp)}function rg(t){return""!==t.ep||""!==t.np}function hg(t){var i=t.length;if(!(i>=2))return!1;if(!ag(t.slice(0,2)))return!1;if(2!==i){var s=t[2];if(47!==s&&92!==s&&63!==s&&35!==s)return!1}return!0}function og(t){return 2===t.length&&Iv.test(t[0])&&(":"===t[1]||"|"===t[1])}function ag(t){return 2===t.length&&og(Qv(t))}function ug(t){return og(t)&&":"===t[1]}function cg(t){var i=t.rp;0!==i.length&&("file"===t.sp&&1===i.length&&ug(i[0])||i.pop())}function dg(t){return null===t.hp||Cc===t.hp||t.op||"file"===t.sp}var lr=-1,lg=/\t|\n|\r/g,fg=/^[\x00-\x1f ]+|[\x00-\x1f ]+$/g;function vg(t,i,s,e){void 0===s&&(s=null),void 0===e&&(e=null),s||(s=new gg,t=t.replace(fg,""));var n=null!==e?e:0;i=i||null;for(var r=[],h=!1,o=!1,a=!1,u=r_(t=t.replace(lg,"")),c=u.length,d=0;d<=c;){var l=d<c?u[d]:lr;switch(n){case 0:if(!Gv(l)){if(null===e){r.length=0,n=2;continue}throw new g("Invalid scheme")}r.push(zv(l)),n=1;break;case 1:if(Zv(l)||43===l||45===l||46===l)r.push(zv(l));else{if(58!==l){if(null===e){r.length=0,n=2,d=0;continue}throw new g("Invalid scheme")}var f=bn(r);if(null!==e){if(ng(s.sp)&&!ng(f))return;if(!ng(s.sp)&&ng(f))return;if((rg(s)||null!==s.ap)&&"file"===f)return;if("file"===s.sp&&(s.hp===Cc||null===s.hp))return}if(s.sp=f,null!==e)return void(ct(s)&&s.ap===no[s.sp]&&(s.ap=null));r.length=0,"file"===s.sp?n=13:ct(s)&&i&&i.sp===s.sp?n=3:ct(s)?n=7:47===u[d+1]?(n=4,d+=1):(s.op=!0,s.rp.push(""),n=18)}break;case 2:if(!i||i.op&&35!==l)throw new g("Invalid scheme");i.op&&35===l?(s.sp=i.sp,s.rp=i.rp.slice(),s.Jm=i.Jm,s.cp="",s.op=!0,n=20):"file"!==i.sp?(n=5,d-=1):(n=13,d-=1);break;case 3:47===l&&47===u[d+1]?n=8:(n=5,d-=1);break;case 4:47===l?n=9:(n=17,d-=1);break;case 5:s.sp=i.sp,lr===l?(s.ep=i.ep,s.np=i.np,s.hp=i.hp,s.ap=i.ap,s.rp=i.rp.slice(),s.Jm=i.Jm):47===l?n=6:63===l?(s.ep=i.ep,s.np=i.np,s.hp=i.hp,s.ap=i.ap,s.rp=i.rp.slice(),s.Jm="",n=19):35===l?(s.ep=i.ep,s.np=i.np,s.hp=i.hp,s.ap=i.ap,s.rp=i.rp.slice(),s.Jm=i.Jm,s.cp="",n=20):92===l&&ct(s)?n=6:(s.ep=i.ep,s.np=i.np,s.hp=i.hp,s.ap=i.ap,s.rp=i.rp.slice(),s.rp.pop(),n=17,d-=1);break;case 6:!ct(s)||47!==l&&92!==l?47===l?n=9:(s.ep=i.ep,s.np=i.np,s.hp=i.hp,s.ap=i.ap,n=17,d-=1):n=8;break;case 7:if(47!==l||47!==u[d+1]){n=8;continue}n=8,d+=1;break;case 8:47!==l&&92!==l&&(n=9,d-=1);break;case 9:if(64===l){h&&r.unshift(37,52,48),h=!0;for(var v=0;v<r.length;v++){var _=r[v];if(58!==_||a){var m=bn(k_(_,A_));a?s.np+=m:s.ep+=m}else a=!0}r.length=0}else if(lr===l||47===l||63===l||35===l||ct(s)&&92===l){if(h&&0===r.length)throw new g("Invalid host");d-=r.length+1,r.length=0,n=10}else r.push(l);break;case 10:case 11:if(null!==e&&"file"===s.sp)d-=1,n=15;else if(58!==l||o)if(lr===l||47===l||63===l||35===l||ct(s)&&92===l){if(d-=1,ct(s)&&0===r.length)throw new g("Invalid host");if(null!==e&&0===r.length&&(rg(s)||null!==s.ap))return;var p=D_(bn(r),ct(s));if(s.hp=p,r.length=0,n=16,null!==e)return}else 91===l?o=!0:93===l&&(o=!1),r.push(l);else{if(0===r.length)throw new g("Invalid host");var w=D_(bn(r),ct(s));if(s.hp=w,r.length=0,n=12,11===e)return}break;case 12:if(Xv(l))r.push(l);else{if(!(lr===l||47===l||63===l||35===l||ct(s)&&92===l||null!==e))throw new g("Invalid port");if(0!==r.length){var y=x(bn(r),10);if(y>65535)throw new g("Invalid port");s.ap=y===no[s.sp]?null:y,r.length=0}if(null!==e)return;n=16,d-=1}break;case 13:s.sp="file",47===l||92===l?n=14:i&&"file"===i.sp?lr===l?(s.hp=i.hp,s.rp=i.rp.slice(),s.Jm=i.Jm):63===l?(s.hp=i.hp,s.rp=i.rp.slice(),s.Jm="",n=19):35===l?(s.hp=i.hp,s.rp=i.rp.slice(),s.Jm=i.Jm,s.cp="",n=20):(hg(u.slice(d))||(s.hp=i.hp,s.rp=i.rp.slice(),cg(s)),n=17,d-=1):(n=17,d-=1);break;case 14:47===l||92===l?n=15:(i&&"file"===i.sp&&!hg(u.slice(d))&&(ug(i.rp[0])?s.rp.push(i.rp[0]):s.hp=i.hp),n=17,d-=1);break;case 15:if(lr===l||47===l||92===l||63===l||35===l)if(d-=1,null===e&&ag(r))n=17;else if(0===r.length){if(s.hp=Cc,null!==e)return;n=16}else{var b=D_(bn(r),ct(s));if(0===b.Ym&&"localhost"===b.jm&&(b=Cc),s.hp=b,null!==e)return;r.length=0,n=16}else r.push(l);break;case 16:ct(s)?(n=17,47!==l&&92!==l&&(d-=1)):null===e&&63===l?(s.Jm="",n=19):null===e&&35===l?(s.cp="",n=20):lr!==l&&(n=17,47!==l&&(d-=1));break;case 17:if(lr===l||47===l||ct(s)&&92===l||null===e&&(63===l||35===l)){var A=bn(r);if(eg(A)?(cg(s),47===l||ct(s)&&92===l||s.rp.push("")):!sg(A)||47===l||ct(s)&&92===l?sg(A)||("file"===s.sp&&0===s.rp.length&&ag(r)&&(Cc!==s.hp&&null!==s.hp&&(s.hp=Cc),r[1]=58,A=bn(r)),s.rp.push(A)):s.rp.push(""),r.length=0,"file"===s.sp&&(lr===l||63===l||35===l))for(;s.rp.length>1&&""===s.rp[0];)s.rp.shift();63===l?(s.Jm="",n=19):35===l&&(s.cp="",n=20)}else r.push.apply(r,k_(l,b_));break;case 18:63===l?(s.Jm="",n=19):35===l?(s.cp="",n=20):lr!==l&&(s.rp[0]+=bn(k_(l,w_)));break;case 19:null===e&&35===l?(s.cp="",n=20):lr!==l&&(s.Jm+=bn(k_(l,ct(s)?T_:S_)));break;case 20:lr===l||0===l||(s.cp+=bn(k_(l,y_)))}d++}return s}function _g(t,i,s,e){try{vg(t,i,s,e)}catch(t){}}var gg=function(){this.sp="",this.ep="",this.np="",this.hp=null,this.ap=null,this.rp=[],this.Jm=null,this.cp=null,this.op=!1};function mg(t){switch(t.sp){case"blob":var i;try{i=vg(t.rp[0],null)}catch(t){return $_}return mg(i);case"ftp":case"gopher":case"http":case"https":case"ws":case"wss":return function(t,i,s){return t+"://"+B_(i)+(null===s?"":":"+s)}(t.sp,t.hp,t.ap);default:return $_}}var pg=function(){function t(t,i){var s,e=null;if(null!=i)if(function(t){return null!=t&&t instanceof pg&&"object"==typeof t.rc}(i))e=i.rc;else try{e=vg(String(i),null)}catch(t){throw new g("Invalid base URL: "+t.message)}try{s=vg(String(t),e)}catch(t){throw new g("Invalid URL: "+t.message)}var n=s.Jm;this.rc=s,this.Jm=function(t){var i=new wr;return null!==t&&z_(i,t),i}(n),this.Jm.rc=this}var i=t.prototype;return i.toString=function(){return this.href},i.toJSON=function(){return this.href},function(t,i,s){i&&Ev(t.prototype,i),s&&Ev(t,s)}(t,[{key:"href",get:function(){return function(t,i){void 0===i&&(i=!1);var s=t.sp+":";if(null!==t.hp?(s+="//",rg(t)&&(s+=t.ep,""!==t.np&&(s+=":"+t.np),s+="@"),s+=B_(t.hp),null!==t.ap&&(s+=":"+t.ap)):null===t.hp&&"file"===t.sp&&(s+="//"),t.op)s+=t.rp[0];else for(var e=0,n=t.rp;e<n.length;e++)s+="/"+n[e];return null!==t.Jm&&(s+="?"+t.Jm),i||null===t.cp||(s+="#"+t.cp),s}(this.rc)},set:function(t){var i;try{i=vg(String(t),null)}catch(t){throw new g("Invalid URL: "+t.message)}this.rc=i,H_(this.Jm);var s=this.rc.Jm;null!==s&&z_(this.Jm,s)}},{key:"origin",get:function(){return mg(this.rc)}},{key:"protocol",get:function(){return this.rc.sp+":"},set:function(t){_g(t+":",null,this.rc,0)}},{key:"username",get:function(){return this.rc.ep},set:function(t){dg(this.rc)||(this.rc.ep=E_(t,A_))}},{key:"password",get:function(){return this.rc.np},set:function(t){dg(this.rc)||(this.rc.np=E_(t,A_))}},{key:"host",get:function(){var t=this.rc,i=t.hp;if(null===i)return"";var s=t.ap,e=B_(i);return null!==s&&(e+=":"+s),e},set:function(t){this.rc.op||_g(t,null,this.rc,10)}},{key:"hostname",get:function(){var t=this.rc.hp;return null===t?"":B_(t)},set:function(t){this.rc.op||_g(t,null,this.rc,11)}},{key:"port",get:function(){var t=this.rc.ap;return null===t?"":""+t},set:function(t){dg(this.rc)||(""===t?this.rc.ap=null:_g(t,null,this.rc,12))}},{key:"pathname",get:function(){var t=this.rc.rp;return this.rc.op?t[0]:0===t.length?"":"/"+t.join("/")},set:function(t){this.rc.op||(this.rc.rp.length=0,_g(t,null,this.rc,16))}},{key:"search",get:function(){var t=this.rc.Jm;return null===t||""===t?"":"?"+t},set:function(t){t=Ti(t);var i=this.rc;if(""===t)return i.Jm=null,void H_(this.Jm);"?"===t[0]&&(t=t.slice(1)),i.Jm="",_g(t,null,i,19),z_(this.Jm,t)}},{key:"searchParams",get:function(){return this.Jm}},{key:"hash",get:function(){var t=this.rc.cp;return null===t||""===t?"":"#"+t},set:function(t){""!==t?("#"===t[0]&&(t=t.slice(1)),this.rc.cp="",_g(t,null,this.rc,20)):this.rc.cp=null}}]),t}();function wg(t){return t.document&&t.document.baseURI||t.location.href||""}function yg(){let t=s,i=t.location.href;for(;t!==s.top;){t=t.parent;try{i=t.location.href}catch(t){}}return i}r();var bg=class{dp(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];Sv(...i)}lp(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];Si(...i)}fp(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];Tv(...i)}vp(t){for(var i=arguments.length,s=new Array(i>1?i-1:0),e=1;e<i;e++)s[e-1]=arguments[e];kv(t,...s)}Og(t,i){return u(t,i)}_p(t,i){return v(t,i)}Lg(t){c(t)}gp(t){p(t)}mp(){return this.pp.mp()}wp(){return this.pp.wp()}yp(){return this.pp.yp()}bp(){return this.pp.bp()}Ap(){return this.pp.Ap()}Sp(t,i){return this.pp.Sp(t,i)}Tp(t){return this.pp.Tp(t)}get kp(){return this.Ep}Dh(t,i){let e;return void 0===i&&(i=wg(s)),e="object"!=typeof i||i instanceof pg?i:i.href,new pg(t,e)}Rp(t,i){if(void 0===i&&(i=wg(s)),this.xp){const s=yo(i)?i:i.toString();return new self.URL(t,s).href}return this.Dh(t,i).href}get Zs(){return this.Ip}get Pp(){return{Cp:od&&od.userAgent.match(/Android /i)?"Android":"other",Np:Boolean(od&&od.userAgent.match(/Android 8.0.0/i))}}get Dp(){return self&&self.location&&"https:"===self.location.protocol}get Bp(){return"languages"in od?od.languages.slice():[od.language]}constructor(){this.Mg=void 0,this.Ep=new Ag,this.Ip=av,this.xp=Sg(),self.performance&&self.performance.now?this.Mg=()=>self.performance.now():this.Mg=qf}},Ag=class{get Mp(){return od.oscpu}get Zs(){return od.platform}get Lp(){return od.vendor}get Op(){return od.vendorSub}};function Sg(){if(self.URL)try{const t=new self.URL("b","http://a");return t.pathname="c d","http://a/c%20d"===t.href}catch(t){}return!1}function Jr(){return Jr=w.assign||function(t){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var e in s)w.prototype.hasOwnProperty.call(s,e)&&(t[e]=s[e])}return t},Jr.apply(this,arguments)}function Tg(){const t=w.create(null);return t.Fp=void 0,delete t.Fp,t}function Se(){return new xg}function Zs(){return new Ig}function kg(t){const i=Se();for(const s in t)za.call(t,s)&&i.set(s,t[s]);return i}function Eg(t){const i=[];return t.forEach(t=>i.push(t)),i}r(),r(),r();var Rg="undefined"!=typeof Map&&"entries"in Map.prototype?Map:void 0,xg=Rg||function(){class t{next(){const t=this.index;return t<this.keys.length?(this.index++,{value:this.selector(this.data,this.keys[t]),done:!1}):{value:void 0,done:!0}}constructor(t,i){this.data=void 0,this.keys=void 0,this.index=0,this.selector=void 0,this.data=t,this.selector=i,this.keys=w.keys(t)}}return class{get(t){return this.data[t]}set(t,i){return this.has(t)||this.size++,this.data[t]=i,this}has(t){return t in this.data}delete(t){return!!this.has(t)&&(this.size--,delete this.data[t],!0)}clear(){this.data=Tg(),this.size=0}keys(){return new t(this.data,(t,i)=>i)}values(){return new t(this.data,(t,i)=>t[i])}entries(){return new t(this.data,(t,i)=>[i,t[i]])}forEach(t){for(const i in this.data)t(this.data[i],i)}constructor(){this.data=Tg(),this.size=0}}}();var Ig=Rg||function(){class t{next(){const t=this.Vp.next();return t.done?t:{value:this.Wp(t.value),done:!1}}constructor(t,i){this.Vp=void 0,this.Wp=void 0,this.Vp=t,this.Wp=i}}return class{get size(){return this.Up.size}get(t){return this.Up.get(""+t)}set(t,i){return this.Up.set(""+t,i),this}has(t){return this.Up.has(""+t)}delete(t){return this.Up.delete(""+t)}clear(){this.Up.clear()}keys(){return new t(this.Up.keys(),t=>Number(t))}values(){return this.Up.values()}entries(){return new t(this.Up.entries(),t=>{let[i,s]=t;return[Number(i),s]})}forEach(t){this.Up.forEach((i,s)=>{t(i,Number(s))})}constructor(){this.Up=Se()}}}();r(),r();var Pg=function(t){return t.Gp="9a04f079-9840-4286-ab92-e65be0885f95",t.Xp="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",t.Zp="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",t.Hp="e2719d58-a985-b3c9-781a-b030af78d30e",t.zp="94ce86fb-07ff-4f43-adb8-93d2fa968ca2",t}({}),Cg="urn:mpeg:dash:mp4protection:2011",_r="cenc",Ng="sinf",Dg="skd",Bg="keyids",Mg="9a04f079-9840-4286-ab92-e65be0885f95",Lg="urn:uuid:"+Mg,Og="com.microsoft.playready",Fg="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",Vg="urn:uuid:"+Fg,Wg="com.widevine.alpha",Ug="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",Gg="urn:uuid:"+Ug,Xg="org.w3.clearkey",Zg="e2719d58-a985-b3c9-781a-b030af78d30e",Hg="urn:uuid:"+Zg,zg="94ce86fb-07ff-4f43-adb8-93d2fa968ca2",Gs="urn:uuid:"+zg,Yg="com.apple.fps.1_0",Kg="identity";r();var R=function(t){return t.Gp="playready",t.Xp="widevine",t.zp="fairplay",t.Zp="clearkey",t.Hp="clearkey_dash_if",t.Yp="aes128",t}({}),qg={Kp:R.Gp,qp:Og,jp:"cenc",Qp:Mg,Jp:Lg,$p:"PlayReady"},xi={Kp:R.Xp,qp:Wg,jp:"cenc",Qp:Fg,Jp:Vg,$p:"Widevine"},jg={Kp:R.zp,qp:Yg,jp:"skd",Qp:zg,Jp:Gs,$p:"FairPlay"},Qg={Kp:R.zp,qp:"com.apple.fps",jp:"sinf",Qp:zg,Jp:Gs,$p:"FairPlay"},Dc={Kp:R.Zp,qp:Xg,jp:"cenc",Qp:Ug,Jp:Gg,$p:"ClearKey"},Jg={Kp:R.Hp,qp:Xg,jp:"keyids",Qp:Zg,Jp:Hg,$p:"ClearKey DASH-IF"},$g=[qg,xi,jg,Dc,Jg],tm=[qg,xi,Qg,Dc,Jg];function im(t){return $g.filter(i=>i.Jp===t.toLowerCase())}r();var to="function"==typeof String.prototype.replaceAll?(t,i,s)=>t.replaceAll(i,s):(t,i,s)=>t.split(i).join(s);function Vh(t,i){return Y(t)&&-1!==t.indexOf(i)}var Qe="function"==typeof String.prototype.startsWith?(t,i)=>Y(t)&&t.startsWith(i):(t,i)=>Y(t)&&t.substr(0,i.length)===i,sm="function"==typeof String.prototype.endsWith?(t,i)=>Y(t)&&t.endsWith(i):(t,i)=>Y(t)&&t.substr(t.length-i.length,i.length)===i;function eo(t,i){return t.length===i.length&&t.toUpperCase()===i.toUpperCase()}var em="function"==typeof String.prototype.repeat?(t,i)=>t.repeat(i):(t,i)=>{let s=0|i;if(0===t.length||0===s)return"";let e=t,n="";for(;1&~s||(n+=e),s>>>=1,0!==s;)e+=e;return n},zo="function"==typeof String.prototype.padStart?(t,i,s)=>(void 0===s&&(s=" "),t.padStart(i,s)):(t,i,s)=>{void 0===s&&(s=" ");let e=s;const n=(0|i)-t.length;return n<=0?t:(n>e.length&&(e+=em(e,n/e.length)),e.slice(0,n)+t)},nm=(String.prototype.padEnd,16384),rm="function"==typeof String.fromCodePoint?t=>t.length<=nm?String.fromCodePoint(...t):om(t,String.fromCodePoint):t=>{const i=[];for(let s of t)s>65535&&(s-=65536,i.push(s>>>10&1023|55296),s=56320|1023&s),i.push(s);return hm(i)};function hm(t){return t.length<=nm?String.fromCharCode(...t):om(t,String.fromCharCode)}function om(t,i){const s=[];for(let e=0;e<t.length;e+=nm)s.push(i(...t.slice(e,e+nm)));return s.join("")}function am(t){return t.replace(/[\\"]/g,t=>"\\"+t)}var um=As.u_&&As.d_>=42||As.G_&&As.Z_>=38||As.B_||As.F_||As.j_&&As.J_>=29;function cm(t,i){return Vh(t,"audio")?{initDataTypes:["cenc"],audioCapabilities:[Jr({contentType:t},i?{robustness:"SW_SECURE_CRYPTO"}:{})]}:{initDataTypes:["cenc"],videoCapabilities:[Jr({contentType:t},i?{robustness:"SW_SECURE_CRYPTO"}:{})]}}function Fc(){return void 0!==od&&"function"==typeof od.requestMediaKeySystemAccess}function dm(){return"undefined"!=typeof HTMLMediaElement&&void 0!==HTMLMediaElement.prototype.webkitGenerateKeyRequest&&void 0!==HTMLMediaElement.prototype.webkitAddKey&&void 0!==HTMLMediaElement.prototype.webkitCancelKeyRequest}var lm=class{Ap(){return this.Tp(xi)}wp(){return this.Tp(Dc)}bp(){return this.Tp(qg)}yp(){return this.Tp(jg)}Tp(t){const i=t.Jp,s=this.iw.get(i);if(s)return s;const e=this.Sp(t,'video/mp4; codecs="avc1.42000a"');return this.iw.set(i,e),e}async Sp(t,i){try{return await this.nw.ew(t.qp,[cm(i,!0)]),!0}catch(s){try{return await this.nw.ew(t.qp,[cm(i,!1)]),!0}catch(t){return!1}}}mp(){return this.hw||(this.hw=this.ow()),this.hw}async ow(){return"https:"!==s.location.protocol&&(!!um&&!await this.wp())}constructor(t){this.nw=void 0,this.iw=Se(),this.hw=void 0,this.nw=t}};function fm(t,i,s){if("function"==typeof s)s.call(t,i);else for(const e of s)e.call(t,i)}r(),r(),r(),r(),r(),r();var fr=class{wn(t,i){if("function"==typeof i)if("string"==typeof t)this.aw(t,i);else for(const s of t)this.aw(s,i)}aw(t,i){const s=this.uw[t];void 0===s?this.uw[t]=i:"function"==typeof s?this.uw[t]=[s,i]:0===this.cw?s.push(i):this.uw[t]=s.concat(i)}dw(t){if("function"!=typeof t)return;const i=this.lw;void 0===i?this.lw=t:"function"==typeof i?this.lw=[i,t]:0===this.cw?i.push(t):this.lw=i.concat(t)}Vo(){this.uw=Tg(),this.lw=void 0}So(t){this.cw++;const i=this.uw[t.type],s=this.lw;void 0!==i&&fm(this.fw,t,i),void 0!==s&&fm(this.fw,t,s),this.cw--}mn(t,i){if("function"==typeof i)if("string"==typeof t)this._w(t,i);else for(const s of t)this._w(s,i)}_w(t,i){const s=this.uw[t];void 0!==s&&("function"==typeof s?s===i&&(this.uw[t]=void 0):0===this.cw?is(s,i):this.uw[t]=hf(s,i))}gw(t){if("string"==typeof t)this.uw[t]=void 0;else for(const i of t)this.uw[i]=void 0}mw(t){const i=this.lw;void 0!==i&&("function"==typeof i?i===t&&(this.lw=void 0):0===this.cw?is(i,t):this.lw=hf(i,t))}pw(t,i){return new Promise((s,e)=>{if(i&&i.Ug)return e(new us);const n=t=>{h(),s(t)},r=()=>{h(),e(new us)},h=()=>{this.mn(t,n),i&&i.Yg(r)};this.wn(t,n),i&&i.zg(r)})}constructor(t){this.uw=Tg(),this.lw=void 0,this.cw=0,this.fw=void 0,this.Rs=t=>{this.So(t)},this.fw=null!=t?t:this}},vm=class extends fr{So(t){ht(()=>{super.So(t)})}},ua=class extends fr{dw(t){super.dw(t)}mw(t){super.mw(t)}};r(),r();var sh=class{constructor(t,i=new Date){this.type=void 0,this.date=void 0,this.type=t,this.date=i}};r();var d=function(t){return t.ww="yw",t.Aw="Sw",t.Tw="contentprotectionerror",t.Ew="contentprotectionsuccess",t.Rw="currentsourcechange",t.xw="destroy",t.Iw="durationchange",t.Pw="emptied",t.Cw="encrypted",t.Nw="ended",t.Dw="Bw",t.Mw="Lw",t.Ow="Fw",t.Vw="Ww",t.Uw="loadstart",t.Gw="manifestupdate",t.Xw="nosupportedrepresentationfound",t.Zw="offline",t.Hw="online",t.zw="pause",t.uo="play",t.Yw="progress",t.Kw="ratechange",t.qw="representationchange",t.jw="resize",t.Qw="seeked",t.Jw="seeking",t.$w="segmentnotfound",t.iy="sy",t.ey="oy",t.uy="ly",t.do="sourcechange",t.vy="timeupdate",t._y="volumechange",t.gy="py",t.wy="yy",t.LICENSE_REQUEST_GENERATED="by",t.Ay="metricschange",t}({}),_m=["cenc"],gm=["cbcs","cbcs-1-9"],mm=class extends sh{constructor(t){super(d.wy),this.Sy=void 0,this.Sy=t}},pm=class extends sh{constructor(t){super(d.LICENSE_REQUEST_GENERATED),this.Ty=void 0,this.Ty=t}},zh=class extends sh{constructor(t,i,s,e){super("Ey"),this.Ry=void 0,this.xy=void 0,this.Ey=void 0,this.Iy=void 0,this.Ry=t,this.xy=i,this.Ey=s,this.Iy=e}},wm=class extends sh{constructor(){super("lt")}},ym=function(t){return t.Cw="Py",t.Cy="Ny",t}({}),bm=class extends sh{constructor(t,i){super("Py"),this.jp=void 0,this.Ty=void 0,this.jp=t,this.Ty=i}},Am=class extends sh{constructor(){super("Ny")}};r(),r(),r();var Sm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),Tm=/[\t\n\f\r ]/g;function dr(t){return 43===t?62:47===t?63:t>=48&&t<=57?t-48+52:t>=65&&t<=90?t-65:t>=97&&t<=122?t-97+26:km()}function km(){throw new m("Invalid base64 input")}function Iu(t){let i=t;Tm.test(i)&&(i=i.replace(Tm,""));let s=i.length;s%4==0&&s>=1&&"="===i[s-1]&&(s>=2&&"="===i[s-2]?s-=2:s-=1,i=i.substr(0,s));const e=s%4;if(1===e)return km();const n=0===e?0:4-e,r=new j(function(t,i){return 3*(t+i)/4-i}(s,n)),h=n>0?s-4:s;let o,a=0,u=0;for(;a<h;a+=4)o=dr(i.charCodeAt(a))<<18|dr(i.charCodeAt(a+1))<<12|dr(i.charCodeAt(a+2))<<6|dr(i.charCodeAt(a+3)),r[u++]=o>>16&255,r[u++]=o>>8&255,r[u++]=255&o;return 2===n?(o=dr(i.charCodeAt(a))<<2|dr(i.charCodeAt(a+1))>>4,r[u++]=255&o):1===n&&(o=dr(i.charCodeAt(a))<<10|dr(i.charCodeAt(a+1))<<4|dr(i.charCodeAt(a+2))>>2,r[u++]=o>>8&255,r[u++]=255&o),r}function Em(t,i,s){return Sm[t>>2]+Sm[(3&t)<<4|i>>4]+Sm[(15&i)<<2|s>>6]+Sm[63&s]}function Rm(t,i,s){const e=[];for(let n=i;n<s;n+=3)e.push(Em(t[n],t[n+1],t[n+2]));return e.join("")}function Ae(t){const i=t.length,s=i%3,e=[],n=i-s;for(let i=0;i<n;i+=16383)e.push(Rm(t,i,_.min(n,i+16383)));if(1===s){const s=t[i-1];e.push(Sm[s>>2]+Sm[(3&s)<<4]+"==")}else if(2===s){const s=t[i-2],n=t[i-1];e.push(Sm[s>>2]+Sm[(3&s)<<4|n>>4]+Sm[(15&n)<<2]+"=")}return e.join("")}function xm(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/[=]/g,"")}function Im(t,i){const s=i.ac,e=t.getUint8(s>>3),n=1<<7-(7&s);return i.Dy(1),(e&n)===n?1:0}function Ni(t,i,s){let e=0;for(let n=0;n<s;n++)e=2*e+Im(t,i);return e}r(),r();var Pm=class t{get ac(){return this.uc}Dy(t){this.uc+=t}By(t){this.uc=t}My(){return new t(this.ac)}constructor(t=0){this.uc=void 0,this.uc=t}};var Cm=_.clz32||function(t){let i=32,s=t>>16;return s&&(i-=16,t=s),s=t>>8,s&&(i-=8,t=s),s=t>>4,s&&(i-=4,t=s),s=t>>2,s&&(i-=2,t=s),s=t>>1,s?i-2:i-t};function Nm(t){if(t>=55296&&t<=57343)throw new m("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value")}function Dm(t,i){return t>>i&63|128}function Bm(t,i){4294967168&t?(4294965248&t?4294901760&t?4292870144&t||(i.push(t>>18&7|240),i.push(Dm(t,12)),i.push(Dm(t,6))):(Nm(t),i.push(t>>12&15|224),i.push(Dm(t,6))):i.push(t>>6&31|192),i.push(63&t|128)):i.push(t)}function Mm(t,i){if(i.ac>=t.length)throw new m("Invalid byte index");const s=255&t[i.ac];if(i.Dy(1),128==(192&s))return 63&s;throw new m("Invalid continuation byte")}function Lm(t,i){const s=i.ac;if(s>t.length)throw new m("Invalid byte index");if(s===t.length)return!1;const e=255&t[s];if(i.Dy(1),!(128&e))return e;if(192==(224&e)){const s=(31&e)<<6|Mm(t,i);if(s>=128)return s;throw new m("Invalid continuation byte")}if(224==(240&e)){const s=(15&e)<<12|Mm(t,i)<<6|Mm(t,i);if(s>=2048)return Nm(s),s;throw new m("Invalid continuation byte")}if(240==(248&e)){const s=(7&e)<<18|Mm(t,i)<<12|Mm(t,i)<<6|Mm(t,i);if(s>=65536&&s<=1114111)return s}throw new m("Invalid UTF-8 detected")}r(),r();var Om=[128,64,32,16,8,4,2,1],Fm=class{Ly(t){return Vm(this.Oy,t)}constructor(t){this.Oy=void 0,this.Oy=t}};function Vm(t,i){return(t&i)===i}function Wm(t,i){return Vm(t,Om[i])}function nh(t,i){const s=t.getUint8(i.ac);return i.Dy(1),s}function Um(t,i,s){t.setUint8(i.ac,s),i.Dy(1)}function Et(t,i,s){const e=uo(re(t),i.ac,i.ac+s);return i.Dy(e.byteLength),e}function Gm(t,i,s){re(t).set(re(s),i.ac),i.Dy(s.byteLength)}function Xm(t,i,s){return i.ac+s<=t.byteLength}function Zm(t,i,s,e){return void 0===e&&(e=!1),e?function(t,i,s){let e=0,n=1;for(let r=0;r<s;r++)e+=nh(t,i)*n,n*=256;return e}(t,i,s):function(t,i,s){let e=0;for(let n=0;n<s;n++)e=256*e+nh(t,i);return e}(t,i,s)}function Hm(t,i){const s=t.getUint8(i.ac);return i.Dy(1),s}function Us(t,i,s){void 0===s&&(s=!1);const e=t.getUint16(i.ac,s);return i.Dy(2),e}function zm(t,i,s,e){void 0===e&&(e=!1),t.setUint16(i.ac,s,e),i.Dy(2)}function ds(t,i,s){void 0===s&&(s=!1);const e=t.getUint32(i.ac,s);return i.Dy(4),e}function Ym(t,i,s,e){void 0===e&&(e=!1),t.setUint32(i.ac,s,e),i.Dy(4)}function et(t,i,s){void 0===s&&(s=!1);const e=ds(t,i,s),n=ds(t,i,s),r=s?n:e,h=s?e:n;return mh.fromBits(h,r,!0)}function Km(t,i,s,e){void 0===e&&(e=!1);const n=s.getHighBitsUnsigned(),r=s.getLowBitsUnsigned(),h=e?n:r;Ym(t,i,e?r:n,e),Ym(t,i,h,e)}function qm(t,i){return E(t,i)}function il(t,i,s){return hm(ap(Et(t,i,s)))}function jm(t,i){const s=nh(t,i);let e;return 128&s?192==(224&s)?e=64*(31&s)+(63&nh(t,i)):224==(240&s)?e=4096*(15&s)+64*(63&nh(t,i))+(63&nh(t,i)):240==(248&s)&&(e=262144*(7&s)+4096*(63&nh(t,i))+64*(63&nh(t,i))+(63&nh(t,i))):e=s,e}function E(t,i){return Qm(t,i,!0)}function Qm(t,i,s){const e=[];for(;i.ac<t.byteLength;){const n=nh(t,i);if(s&&!n)break;e.push(n)}return hm(e)}function Jm(t,i,s){const e=s.length;for(let n=0;n<e;n+=1){Um(t,i,s.charCodeAt(n))}}function $m(t,i){if(!(i.ac+2<=t.byteLength))return;const s=t.getUint8(i.ac),e=t.getUint8(i.ac+1);return(254!==s||255!==e)&&(255===s&&254===e||void 0)}function tp(t,i){const s=$m(t,i);return void 0!==s&&i.Dy(2),al(t,i,!0===s)}function al(t,i,s){return void 0===s&&(s=!1),ip(t,i,s,!0)}function ip(t,i,s,e){const n=[];for(;i.ac+2<=t.byteLength;){const r=Us(t,i,s);if(e&&!r)break;n.push(r)}return hm(n)}function sp(t,i,s,e){void 0===e&&(e=!1);const n=s.length;for(let r=0;r<n;r+=1){zm(t,i,s.charCodeAt(r),e)}}function Jh(t){return Qm(xh(t),new J,!1)}function Xc(t){const i=new j(t.length);return Jm(xh(i),new J,t),i}function ep(t,i){return void 0===i&&(i=!1),ip(xh(t),new J,i,!1)}function np(t,i){void 0===i&&(i=!1);const s=new j(2*t.length);return sp(xh(s),new J,t,i),s}function rp(t,i){return i.ac+3<=t.byteLength&&(239===t.getUint8(i.ac)&&187===t.getUint8(i.ac+1)&&191===t.getUint8(i.ac+2))}function pr(t,i){return function(t,i,s){const e=[],n=rp(t,i);n&&i.Dy(3);for(;i.ac<t.byteLength;){const n=jm(t,i);if(void 0===n)break;if(s&&0===n)break;e.push(n)}return rm(e)}(t,i,!0)}function Vc(t){return function(t){return rm(t)}(function(t,i){const s=[],e=new J;let n;if(!i){if(n=Lm(t,e),!1===n)return s;65279===n||s.push(n)}for(;!1!==(n=Lm(t,e));)s.push(n);return s}(re(t)))}function br(t){return new j(function(t){const i=[];for(const s of t)Bm(s,i);return i}(function(t){const i=[];let s=0;const e=t.length;for(;s<e;){const n=t.charCodeAt(s++);if(n>=55296&&n<=56319&&s<e){const e=t.charCodeAt(s++);56320==(64512&e)?i.push(((1023&n)<<10)+(1023&e)+65536):(i.push(n),s--)}else i.push(n)}return i}(t)))}function hp(t,i){if(rp(t,i))return pr(t,i);if(void 0!==$m(t,i))return tp(t,i);if(i.ac+4<=t.byteLength){if(0===t.getUint8(i.ac)&&0===t.getUint8(i.ac+2))return al(t,i,!1);if(0===t.getUint8(i.ac+1)&&0===t.getUint8(i.ac+3))return al(t,i,!0)}return pr(t,i)}function uo(t,i,s){return void 0===i&&(i=0),void 0===s&&(s=t.byteLength),new j(t.buffer,t.byteOffset+i,s-i)}function wu(t,i,s){return void 0===i&&(i=0),void 0===s&&(s=t.byteLength),new DataView(t.buffer,t.byteOffset+i,s-i)}function xh(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function re(t){return new j(t.buffer,t.byteOffset,t.byteLength)}function op(t){return t instanceof ArrayBuffer||zc(t)}function Rs(t){return t instanceof ArrayBuffer?new j(t):re(t)}function Hc(t,i,s){return void 0===i&&(i=0),void 0===s&&(s=t.byteLength),t.slice?t.slice(i,s):tc(uo(t,i,s))}function tc(t){if(t.slice)return t.slice(0);{const i=new j(t.byteLength);return i.set(t,0),i}}function ap(t){return[].slice.call(t)}var J=class t{get ac(){return this.uc}Dy(t){this.uc+=t}By(t){this.uc=t}My(){return new t(this.ac)}Fy(){return new Pm(this.ac<<3)}constructor(t=0){this.uc=void 0,this.uc=t}};function up(t){let i=t.toLowerCase(),s=0,e=0;Qe(i,"0x")&&(i=i.substring(2));const n=new j(_.ceil(i.length/2));for(1&~i.length||(s=1,n[e++]=x(i[0],16));s<i.length;s+=2)n[e++]=x(i.substr(s,2),16);return n}function cp(t){return.001*t}var dp=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]","[object DataView]"],zc=ArrayBuffer.isView||(t=>t&&Ft(dp,Gd.call(t)));function fu(t,i){if(t===i)return!0;if(t.byteLength!==i.byteLength)return!1;return L(new j(t),new j(i))}function L(t,i){if(t===i)return!0;if(t.byteLength!==i.byteLength)return!1;if(t.buffer===i.buffer&&t.byteOffset===i.byteOffset)return!0;for(let s=0;s<t.length;s+=1)if(t[s]!==i[s])return!1;return!0}function lp(t,i){return t===i||L(Rs(t),Rs(i))}function xu(t){const i=t.reduce((t,i)=>t+i.byteLength,0);return fp(t,i)}function fp(t,i){const s=new j(i);let e=0;for(const i of t)s.set(i,e),e+=i.byteLength;return s}function vp(t,i,s){const e=new j(t.byteLength+i.byteLength),n=uo(t,0,s),r=uo(t,s);return e.set(n),e.set(i,s),e.set(r,s+i.byteLength),e}function _p(t){return Iu(t).buffer}function gp(t){return Ae(new j(t))}function Gc(t){return Ae(Xc(t))}var qc=new j([0]).buffer,mp=class{get Vy(){return this.nc.length}Wy(t){for(const i of this.nc)if(lp(i[0],t))return!0;return!1}Uy(t){for(const i of this.nc)if(lp(i[0],t))return i[1]}Gy(t,i){for(const s of this.nc)if(lp(s[0],t))return void(s[1]=i);this.nc.push([t,i])}Xy(t,i){this.nc.forEach(i=>t(i[1],i[0]),i)}Zy(){Lr(this.nc)}constructor(){this.nc=void 0,this.nc=[]}};r();var gs=class{Hy(t){this.Yd&&(this.Yd(t),this.Zg())}zy(t){this.Kd&&(this.Kd(t),this.Zg())}Jg(){this.Yy.catch(ol),this.zy(new us)}$g(t){t.then(t=>this.Hy(t),t=>this.zy(t))}Zg(){this.Yd=void 0,this.Kd=void 0}constructor(){this.Yy=void 0,this.Yd=void 0,this.Kd=void 0,this.Yy=new Promise((t,i)=>{this.Yd=t,this.Kd=i})}};function pp(){return new j([8,4]).buffer}function wp(t,i){return t===Og?function(t){if(t.byteLength<2*yp.length)return t;const i=new DataView(t,0,2*yp.length),s=ep(i,!0);if(s===yp)return t;return function(t){const i='<PlayReadyKeyMessage type="LicenseAcquisition"><LicenseAcquisition Version="1"><Challenge encoding="base64encoded">',s='</Challenge><HttpHeaders><HttpHeader><name>Content-Type</name><value>text/xml; charset=utf-8</value></HttpHeader><HttpHeader><name>SOAPAction</name><value>"http://schemas.microsoft.com/DRM/2007/03/protocols/AcquireLicense"</value></HttpHeader></HttpHeaders></LicenseAcquisition></PlayReadyKeyMessage>',e=""+i+gp(t)+s;return np(e,!0).buffer}(t)}(i):i}r();var yp="<PlayReady";r(),r();var rn=class extends rl{constructor(t,i,s,e){super(t,e),this.Ky=void 0,this.qy=void 0,this.Ky=i,this.qy=s}};r(),r(),r(),r(),r();var bp=function(t,i){return(bp=w.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var s in i)w.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])})(t,i)};function Ro(t,i){if("function"!=typeof i&&null!==i)throw new g("Class extends value "+String(i)+" is not a constructor or null");function s(){this.constructor=t}bp(t,i),t.prototype=null===i?w.create(i):(s.prototype=i.prototype,new s)}function Ap(t,i,s){return t.indexOf?t.indexOf(i,s):Array.prototype.indexOf.call(t,i,s)}r(),r(),r(),r(),r(),r(),r();!function(){function t(t,i){this.jy=t,this.Qy=i}t.prototype.get=function(t){var i=this.jy.get(t);if(0===this.Qy||void 0===i)return i;var s=this.jy.get(t+1)||0,e=i&(1<<8-this.Qy)-1,n=s>>8-this.Qy;return(e<<this.Qy)+n},t.prototype.getBit=function(t){if(!(t<0)){var i=this.jy.get(_.floor((t+this.Qy)/8));if(void 0!==i)return(i&1<<7-this.Qy-t%8)>0?1:0}},w.defineProperty(t.prototype,"bitLength",{get:function(){return this.jy.bitLength-this.Qy},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"length",{get:function(){return this.jy.length},enumerable:!1,configurable:!0})}();r(),r();_.pow(2,-52);function Sp(t,i,s){return _.min(_.max(t,i),s)}function Tp(t,i){return t>>8-i}function kp(t,i){return t&(1<<i)-1}var W=function(){function t(t){this.Jy=t,this.$y=0,this.ib=0}return w.defineProperty(t.prototype,"totalBitsRead",{get:function(){return 8*this.$y+this.ib},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"done",{get:function(){return this.$y===this.Jy.length&&0===this.ib},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"location",{get:function(){return{byte:this.$y,bit:this.ib}},enumerable:!1,configurable:!0}),t.prototype.copy=function(){var i=new t(this.Jy);return i.seek(this.$y,this.ib),i},t.prototype.canReadBits=function(t){return 8*this.$y+t+this.ib<=8*this.Jy.length},t.prototype.canReadBytes=function(t){return 0===this.ib?this.$y+t<=this.Jy.length:this.$y+t<this.Jy.length},t.prototype.incBit=function(){this.ib++,this.ib>7&&(this.$y++,this.ib=0)},t.prototype.seek=function(t,i){this.$y=t,this.ib=i},t.prototype.peekBit=function(){if(!this.canReadBits(1))throw new m("Cannot read past end of buffer.");return this.Jy.get(this.$y)>>7-this.ib&1},t.prototype.readBit=function(){var t=this.peekBit();return this.incBit(),t},t.prototype.readByte=function(){if(!this.canReadBytes(1))throw new m("Cannot read past end of buffer.");if(0===this.ib)return this.Jy.get(this.$y++);var t=kp(this.Jy.get(this.$y),8-this.ib),i=Tp(this.Jy.get(this.$y+1),this.ib);return this.$y++,t<<this.ib|i},t.prototype.readBits=function(t){if(!this.canReadBits(t))throw new m("Cannot read past end of buffer.");for(var i=[],s=0;s<t;s++)i.push(this.readBit());return i},t.prototype.readUInt=function(t){if(t>32)throw new m("The max bitlength that can be provided is 32.");if(!this.canReadBits(t))throw new m("Cannot read past end of buffer.");var i=0;if(0===this.ib&&t%8==0)for(var s=t-8;s>=0;s-=8)i|=this.readByte()<<s;else for(s=t-1;s>=0;s--)i|=this.readBit()<<s;return i},t.prototype.readInt=function(t){if(t>32)throw new m("The max bitlength that can be provided is 32.");if(!this.canReadBits(t))throw new m("Cannot read past end of buffer.");var i=this.readUInt(t);return 0===(i&1<<t-1)?i:i-_.pow(2,t)},t.prototype.readExponentialGolombCode=function(){for(var t=0;0===this.readBit();)t++;var i=1<<t;return i+=this.readUInt(t)-1},t.prototype.readSignedExponentialGolombCode=function(){var t=this.readExponentialGolombCode();return 1&t?(t+1)/2:-t/2},t.prototype.skipBits=function(t){if(!this.canReadBits(t))throw new m("Skipping over the buffer edge is not allowed.");var i=this.ib+t;this.$y+=i>>3,this.ib=7&i},t.prototype.readBool=function(){return this.readBit()>0},t.prototype.readString=function(t){if(!this.canReadBytes(t))throw new m("Cannot read past end of buffer.");for(var i=[],s=0;s<t;s++)i.push(this.readByte());return String.fromCharCode.apply(String,i)},t}();r(),r(),r();var Ep=function(t,i){return t===i?0:t<i?-1:t>i?1:S(t)?S(i)?0:1:-1},mt=function(){function t(){this.sb=[],this.eb=[],this.hb=0}return t.from=function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];for(var e=new t,n=0,r=i;n<r.length;n++){var h=r[n];e.pushRange(h)}return e},t.prototype.pushRange=function(t,i,s){if(void 0===i&&(i=0),void 0===s&&(s=t.length),s<0)throw new m("The buffer length must be positive.");if(0!==s){if(0===this.eb.length)this.eb.push(0);else{var e=this.eb[this.eb.length-1]+this.sb[this.sb.length-1].length;this.eb.push(e)}this.sb.push(t.subarray(i,i+s)),this.hb+=s}},t.prototype.concat=function(i){var s=new t;return s.pushRange(this.join()),s.pushRange(i.join()),s},t.prototype.copy=function(t,i,s,e){if(void 0===i&&(i=0),void 0===s&&(s=0),void 0===e&&(e=this.length),i<0||s<0||e<0)throw new RangeError;return this.slice(s,e).copyInternal(t,i)},t.prototype.copyInternal=function(t,i){for(var s=0,e=i,n=0,r=this.sb;n<r.length;n++){var h=r[n];t.set(h,e),s+=h.length,e+=h.length}return s},t.prototype.clear=function(){this.sb=[],this.eb=[],this.hb=0},t.prototype.get=function(t){if(!(t<0||t>=this.length)){var i=this.findContainingBufferIndex(t),s=t-this.eb[i];return this.sb[i][s]}},w.defineProperty(t.prototype,"first",{get:function(){return this.get(0)},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){if(this.sb.length<1)return-1;if(this.sb.length>1){var i=this.join();this.clear(),this.pushRange(i)}var s=this.sb[0];return"number"==typeof t?Ap(s,t):"undefined"!=typeof Buffer?Buffer.from(s.buffer,s.byteOffset,s.byteLength).indexOf(t):function(t,i){if(0===i.length)return 0;for(var s=i[0],e=i.length,n=t.length-e,r=0;r<=n&&!((r=Ap(t,s,r))<0||r>n);r++){for(var h=r+1,o=r+e,a=1;h<o&&t[h]===i[a];h++,a++);if(h===o)return r}return-1}(s,t)},t.prototype.findContainingBufferIndex=function(t){return function(t,i,s){if(0!==t.length){var e=0,n=t.length-1;if(1!==s(t[e],i)){if(1===s(i,t[n]))return n;for(;e!==n;){var r=_.ceil((e+n)/2);s(t[r],i)<=0?e=r:n=r-1}return e}}}(this.eb,t,Ep)},t.prototype.join=function(){if(1===this.sb.length)return this.sb[0];var t=new j(this.length);return this.copyInternal(t,0),t},w.defineProperty(t.prototype,"length",{get:function(){return this.hb},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"bitLength",{get:function(){return 8*this.length},enumerable:!1,configurable:!0}),t.prototype.readUIntBE=function(t,i){if(i<=0||i>4)throw new m("Expected byteLength to be between 0 and 4 but was "+i);if(t<0||t>this.length-i)throw new m("Offset must be between 0 and buffer.length - byteLength, but was "+t+" (max allowed "+(this.length-i)+")");if(1===i)return this.get(t);for(var s=0,e=0;e<i;e++)s+=this.get(t+e)*_.pow(2,8*(i-e-1));return s},t.prototype.slice=function(i,s){void 0===s&&(s=this.length);var e=Sp(i,0,this.length),n=Sp(s,0,this.length);if(e>n)return new t;if(e===n)return new t;for(var r=new t,h=this.findContainingBufferIndex(e),o=this.sb[h],a=e,u=a-this.eb[h];a+o.length-u<n;)r.pushRange(o,u,o.length-u),h+=1,u=(a+=o.length-u)-this.eb[h],o=this.sb[h];var c=n-a;return r.pushRange(o,u,c),r},t.prototype.trim=function(){if(0===this.length)return new t;for(var i=this.length-1,s=this.sb.length-1,e=this.sb[s],n=e.length-1;i>=0&&s>=0;){if(0!==e[n])break;if(0===n){if(0===s)return new t;s-=1,n=(e=this.sb[s]).length-1}else n-=1;i-=1}return this.slice(0,i+1)},t}(),Rp=function(){function t(i){this.ob=i||t.BUFFER_CHUNK_SIZE,this.ub=!1,this.fb=new mt,this.Jy=new j(this.ob),this._b=0,this.gb=0,this.ib=7}return t.prototype.closeByte=function(){this.Jy[this._b++]=this.gb,this._b>=this.ob&&this.closeBuffer(),this.gb=0,this.ib=7},t.prototype.closeBuffer=function(t){void 0===t&&(t=!0),0!==this._b&&(this.fb.pushRange(this.Jy,0,this._b),t&&(this.Jy=new j(this.ob)),this._b=0)},w.defineProperty(t.prototype,"isWritingStartBit",{get:function(){return 7===this.ib},enumerable:!1,configurable:!0}),t.prototype.close=function(){if(this.ub)throw new m("Cannot close a closed BitWriter.");return this.isWritingStartBit||this.closeByte(),this.closeBuffer(!1),this.ub=!0,this.fb},t.prototype.writeBit=function(t){if(this.ub)throw new m("Cannot write to a closed BitWriter.");this.gb|=t<<this.ib,0===this.ib?this.closeByte():this.ib--},t.prototype.writeByte=function(t){if(this.ub)throw new m("Cannot write to a closed BitWriter.");this.isWritingStartBit?(this.gb=t,this.closeByte()):this.writeByteUnaligned(t)},t.prototype.writeByteUnaligned=function(t){var i=this.ib;this.gb|=Tp(t,i+1),this.closeByte(),this.gb=kp(t,8-i)<<i+1,this.ib=i},t.prototype.writeBits=function(t){for(var i=0,s=t;i<s.length;i++){var e=s[i];this.writeBit(e)}},t.prototype.writeBytes=function(t){if(this.ub)throw new m("Cannot write to a closed BitWriter.");this.isWritingStartBit?this.writeBytesAligned(t):this.writeBytesUnaligned(t)},t.prototype.writeBytesAligned=function(t){this._b+t.length<=this.ob?(this.Jy.set(t,this._b),this._b+=t.length,this._b===this.ob&&this.closeBuffer()):(this.closeBuffer(),this.fb.pushRange(t))},t.prototype.writeBytesUnaligned=function(t){if(0!==t.length){var i=this.ib;this.gb|=Tp(t[0],i+1),this.closeByte();for(var s=1;s<t.length;s++){var e=kp(t[s-1],8-i),n=Tp(t[s],i+1);this.gb=e<<i+1|n,this.closeByte()}this.gb=kp(t[t.length-1],8-i)<<i+1,this.ib=i}},t.prototype.writeUInt=function(t,i){if(t<0)throw new m("Received a negative number.");if(i>32)throw new m("The max bitlength that can be provided is 32.");if(t>=_.pow(2,i))throw new m("Uint "+t+" cannot be represented in "+i+" bit(s).");if(this.isWritingStartBit&&i%8==0)for(var s=i-8;s>=0;s-=8)this.writeByte(t>>s&255);else for(s=i-1;s>=0;s--)this.writeBool((t&1<<s)>0)},t.prototype.writeInt=function(t,i){if(i>32)throw new m("The max bitlength that can be provided is 32.");if(_.abs(t)>=_.pow(2,i-1))throw new m("Signed integer "+t+" cannot be represented in "+i+" bit(s).");t<0?this.writeUInt(t+_.pow(2,i),i):this.writeUInt(t,i)},t.prototype.writeExponentialGolombCode=function(t){if(t<0)throw new m("Received a negative number.");for(var i=_.floor(_.log2(t+1))+1,s=0;s<i-1;s++)this.writeBit(0);this.writeUInt(t+1,i)},t.prototype.writeSignedExponentialGolombCode=function(t){0===t?this.writeExponentialGolombCode(0):t<0?this.writeExponentialGolombCode(-2*t):this.writeExponentialGolombCode(2*t-1)},t.prototype.padByte=function(t){for(;!this.isWritingStartBit;)this.writeBit(t)},t.prototype.writeBool=function(t){this.writeBit(t?1:0)},t.prototype.writeString=function(t){for(var i=function(t){for(var i=new j(t.length),s=0;s<t.length;s++)i[s]=t.charCodeAt(s);return i}(t),s=0;s<i.length;s++)this.writeByte(i[s])},t.BUFFER_CHUNK_SIZE=1024,t}();r();var xp=function(){function t(t){this.rb=new mt,this.ef=t}return t.prototype.closeWriter=function(){void 0!==this.ef&&(this.rb=this.rb.concat(this.ef.close()),this.ef=void 0)},w.defineProperty(t.prototype,"writer",{get:function(){return void 0===this.ef&&(this.ef=new Rp),this.ef},enumerable:!1,configurable:!0}),t.prototype.concat=function(t){this.closeWriter(),this.rb=this.rb.concat(t)},t.prototype.toRangedBuffer=function(){return this.closeWriter(),this.rb},t}(),Zn=function(){function t(t){if(this.boxType=t,4!==t.length&&16!==t.length)throw new m("The provided box type does not conform to either a 4 character type or a 16 byte uuid.")}return t.prototype.serializeCommonBoxHeader=function(i){var s=this.getSize(),e=s>=t.LARGE_SIZE/8,n=16===this.boxType.length;i.writeUInt(e?1:s,32),i.writeString(n?"uuid":this.boxType),e&&(i.writeUInt(_.floor(s/t.LARGE_SIZE),32),i.writeUInt(s%t.LARGE_SIZE,32)),n&&i.writeString(this.boxType)},t.prototype.getSize=function(){var i=8+(this.boxType.length>4?16:0),s=this.getBoxContentSize()+i;return s>=t.LARGE_SIZE/8&&(s+=8),s},t.prototype.serialize=function(){var t=new xp;return this.serializeCommonBoxHeader(t.writer),this.serializeBoxContent(t),t.toRangedBuffer()},t.LARGE_SIZE=_.pow(2,32),t}();function Zc(t,i){return t instanceof mh?64===i:t<_.pow(2,i)}function Yr(t,i){return _.round(t*_.pow(2,i))}function Cr(t,i){for(var s=0;s<i.length;s++)t.writeByte(i[s])}function yt(t,i){return t/_.pow(2,i)}r();var Cl=function(t){function i(i,s,e){var n=t.call(this,i)||this;if(n.version=s,!Zc(s,8))throw new m("the provided version cannot fit in 8 bits.");return n.flags=e,n}return Ro(i,t),w.defineProperty(i.prototype,"flags",{get:function(){return this.mb},set:function(t){this.mb=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 4},i.prototype.serializeFlags=function(t){if("number"!=typeof this.flags)throw new m("Missing custom serializeFlags method.");t.writer.writeUInt(this.flags,24)},i.prototype.serializeBoxContent=function(t){t.writer.writeByte(this.version),this.serializeFlags(t)},i}(Zn);r(),r();var Ip=function(t){function i(i,s){var e=t.call(this,i)||this;return e.data=s,e}return Ro(i,t),i.prototype.getBoxContentSize=function(){return this.data.length},i.prototype.serializeBoxContent=function(t){t.concat(mt.from(this.data))},i}(Zn);r(),r();var Pp=function(){function t(t){void 0===t&&(t=0),this.offset=t}return t.prototype.shift=function(t){this.offset+=t},t.prototype.seek=function(t){this.offset=t},t.prototype.clone=function(){return new t(this.offset)},t}();r();var Cp=16384;function Np(t){var i=t.length;if(i<=Cp)return String.fromCharCode.apply(String,t);for(var s=[],e=0;e<i;e+=Cp)s.push(String.fromCharCode.apply(String,t.slice(e,e+Cp)));return s.join("")}var Dp=function(){function t(t){this.raw=t}return t.prototype.isSet=function(t){return function(t,i){return(t&i)===i}(this.raw,t)},t}();function xr(t,i){var s=t.getUint8(i.offset);return i.shift(1),s}function Bp(t,i,s){var e=Up(Zp(t),i.offset,i.offset+s);return i.shift(e.byteLength),e}function Mp(t,i,s){return i.offset+s<=t.byteLength}function Lp(t,i,s){void 0===s&&(s=!1);var e=t.getUint32(i.offset,s);return i.shift(4),e}function Op(t,i,s){void 0===s&&(s=!1);var e=Lp(t,i,s),n=Lp(t,i,s),r=s?n:e,h=s?e:n;return mh.fromBits(h,r,!0)}function Fp(t,i,s){return Np(function(t){return[].slice.call(t)}(Bp(t,i,s)))}function Vp(t,i){var s,e=xr(t,i);return 128&e?192==(224&e)?s=64*(31&e)+(63&xr(t,i)):224==(240&e)?s=4096*(15&e)+64*(63&xr(t,i))+(63&xr(t,i)):240==(248&e)&&(s=262144*(7&e)+4096*(63&xr(t,i))+64*(63&xr(t,i))+(63&xr(t,i))):s=e,s}function Wp(t,i){return function(t,i,s){var e=[],n=function(t,i){return i.offset+3<=t.byteLength&&239===t.getUint8(i.offset)&&187===t.getUint8(i.offset+1)&&191===t.getUint8(i.offset+2)}(t,i);n&&i.shift(3);for(;i.offset<t.byteLength;){var r=Vp(t,i);if(void 0===r)break;if(s&&0===r)break;e.push(r)}return function(t){for(var i=[],s=0,e=t;s<e.length;s++){var n=e[s];n>65535&&(n-=65536,i.push(n>>>10&1023|55296),n=56320|1023&n),i.push(n)}return Np(i)}(e)}(t,i,!0)}function Up(t,i,s){return void 0===i&&(i=0),void 0===s&&(s=t.byteLength),new j(t.buffer,t.byteOffset+i,s-i)}function Gp(t,i,s){return void 0===i&&(i=0),void 0===s&&(s=t.byteLength),new DataView(t.buffer,t.byteOffset+i,s-i)}function Xp(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Zp(t){return new j(t.buffer,t.byteOffset,t.byteLength)}var Hp=function(){function t(t){void 0===t&&(t=0),this.offset=t}return t.prototype.shift=function(t){this.offset+=t},t.prototype.seek=function(t){this.offset=t},t.prototype.clone=function(){return new t(this.offset)},t.prototype.toBit=function(){return new Pp(this.offset<<3)},t}();r();var zp=function(){function t(t,i){this.data=t,this.cursor=i}return t.prototype.nextUint8=function(){return xr(this.data,this.cursor)},t.prototype.nextUint16=function(){return function(t,i,s){void 0===s&&(s=!1);var e=t.getUint16(i.offset,s);return i.shift(2),e}(this.data,this.cursor)},t.prototype.nextInt16=function(){return function(t,i,s){void 0===s&&(s=!1);var e=t.getInt16(i.offset,s);return i.shift(2),e}(this.data,this.cursor)},t.prototype.nextUint32=function(){return Lp(this.data,this.cursor)},t.prototype.nextInt32=function(){return function(t,i,s){void 0===s&&(s=!1);var e=t.getInt32(i.offset,s);return i.shift(4),e}(this.data,this.cursor)},t.prototype.nextInt64=function(){return function(t,i,s){void 0===s&&(s=!1);var e=Lp(t,i,s),n=Lp(t,i,s),r=s?n:e,h=s?e:n;return mh.fromBits(h,r,!1)}(this.data,this.cursor)},t.prototype.nextUint64=function(){return Op(this.data,this.cursor)},t.prototype.nextUint8Array=function(t){return Bp(this.data,this.cursor,t)},t.prototype.nextUint32Array=function(t){return function(t,i,s){for(var e=[],n=0;n<s;n++)e.push(Lp(t,i));return e}(this.data,this.cursor,t)},t.prototype.nextChars=function(t){return Fp(this.data,this.cursor,t)},t.prototype.nextUTF8String=function(){return Wp(this.data,this.cursor)},t.prototype.skip=function(t){this.cursor.shift(t)},t.prototype.clone=function(){return new t(this.data,this.cursor.clone())},t}();function Ls(t,i){return t.type===i}function ao(t){var i=function(t,i){var s=[];for(;i.offset<t.byteLength;){var e=Yp(t,i);if(!e.complete)return{complete:!1,boxes:s};s.push(e.box)}return{complete:!0,boxes:s}}(t.data,t.cursor);if(!i.complete)throw new m("Data incomplete");return i.boxes}function Yp(t,i){var s=i.offset,e=function(t,i){var s=i.offset;if(!Mp(t,i,8)){return{complete:!1,neededOffset:r=i.offset+8}}var e=Lp(t,i),n=Fp(t,i,4);if(1===e){if(!Mp(t,i,8)){var r=i.offset+8;return i.seek(s),{complete:!1,neededOffset:r}}e=Op(t,i).toNumber()}if("uuid"===n){if(!Mp(t,i,16)){r=i.offset+16;return i.seek(s),{complete:!1,neededOffset:r}}n=Fp(t,i,16)}var h=i.offset,o={type:n,size:e,headerSize:h-s};return{complete:!0,header:o}}(t,i);if(!e.complete)return e;var n=e.header,r=n.size;0===r&&(r=t.byteLength-s);var h=s+r;if(h>t.byteLength){var o=h;return i.seek(s),{complete:!1,neededOffset:o}}var a={type:n.type,offset:s,data:new zp(Gp(t,s,h),new Hp(n.headerSize))};return i.seek(h),{complete:!0,box:a}}function Kp(t){return{version:t>>24,flags:new Dp(16777215&t)}}function qp(t,i){var s,e,n,r;return 1===i?(s=t.nextUint64(),e=t.nextUint64(),n=t.nextUint32(),r=t.nextUint64()):(s=t.nextUint32(),e=t.nextUint32(),n=t.nextUint32(),r=t.nextUint32()),{creation:s,modification:e,scale:n,duration:r}}function jp(t){return t.skipBits(4),{isLeading:t.readUInt(2),sampleDependsOn:t.readUInt(2),sampleIsDependedOn:t.readUInt(2),sampleHasRedundancy:t.readUInt(2),samplePaddingValue:t.readUInt(3),sampleIsNonSyncSample:Boolean(t.readBit()),sampleDegradationPriority:t.readUInt(16)}}function Qp(t){var i=t.nextUint32Array(9);return{a:yt(i[0],16),b:yt(i[1],16),u:yt(i[2],30),c:yt(i[3],16),d:yt(i[4],16),v:yt(i[5],30),x:yt(i[6],16),y:yt(i[7],16),w:yt(i[8],30)}}function Li(t){return new Ip(t.type,Up(Zp(t.data.data),t.data.cursor.offset))}var Jp=function(t){function i(i,s,e,n){void 0===e&&(e=0),void 0===n&&(n=0);var r=t.call(this,"hdlr",e,n)||this;return r.name=s,r.handlerType=i,r}return Ro(i,t),w.defineProperty(i.prototype,"handlerType",{get:function(){return this.pb},set:function(t){this.pb=t},enumerable:!1,configurable:!0}),i.prototype.serializeReserved=function(t){t.writer.writeUInt(0,32),t.writer.writeUInt(0,32),t.writer.writeUInt(0,32)},i.prototype.getBoxContentSize=function(){var i,s;return t.prototype.getBoxContentSize.call(this)+4+4+12+(null!==(s=null===(i=this.name)||void 0===i?void 0:i.length)&&void 0!==s?s:0)+1},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(0,32),i.writer.writeString(this.handlerType),this.serializeReserved(i),this.name&&i.writer.writeString(this.name),i.writer.writeByte(0)},i}(Cl);function $p(t){var i=t.data,s=Kp(i.nextUint32()),e=s.version,n=s.flags;i.skip(4);var r=i.nextChars(4);i.skip(12);var h=i.nextUTF8String();return new Jp(r,h,e,n.raw)}!function(t){function i(){return t.call(this,"mdir")||this}Ro(i,t),i.prototype.serializeReserved=function(t){t.writer.writeString("appl"),t.writer.writeUInt(0,32),t.writer.writeUInt(0,32)}}(Jp);r(),r(),r();var ll=function(){function t(t,i){void 0===i&&(i=!1),this.fixed28BitMode=i,this.tag=t}return t.prototype.encodeSize=function(t){for(var i=[];t>0;)i.length>0&&(i[i.length-1]+=128),i.push(t%128),t>>=7;if(this.fixed28BitMode)for(;i.length<4;)i.push(128);return i.reverse()},w.defineProperty(t.prototype,"tag",{get:function(){return this.wb},set:function(t){if(!Zc(t,8))throw new m("Provided tag does not fit in 8 bits.");this.wb=t},enumerable:!1,configurable:!0}),t.prototype.getSize=function(){return this.getDescriptorSize()+1+this.encodeSize(this.getDescriptorSize()).length},t.prototype.serialize=function(t){t.writer.writeByte(this.tag);for(var i=0,s=this.encodeSize(this.getDescriptorSize());i<s.length;i++){var e=s[i];t.writer.writeByte(e)}this.serializeDescriptorContent(t)},t}();r();!function(t){function i(i,s,e,n,r,h,o){void 0===o&&(o={});var a=t.call(this,4,o.fixed28BitMode)||this;return a.upStream=e,a.decoderSpecificInfo=h,a.objectTypeIndication=i,a.streamType=s,a.bufferSizeDb=n,a.maxBitrate=r.max,a.avgBitrate=r.avg,a}Ro(i,t),w.defineProperty(i.prototype,"objectTypeIndication",{get:function(){return this.yb},set:function(t){if(!Zc(t,8))throw new m("Provided objectTypeIndication does not fit in 8 bits.");this.yb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"streamType",{get:function(){return this.bb},set:function(t){if(!Zc(t,6))throw new m("Provided streamType does not fit in 6 bits.");this.bb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"bufferSizeDb",{get:function(){return this.Ab},set:function(t){if(!Zc(t,24))throw new m("Provided bufferSizeDb does not fit in 24 bits.");this.Ab=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"maxBitrate",{get:function(){return this.Sb},set:function(t){if(!Zc(t,32))throw new m("Provided maxBitrate does not fit in 32 bits.");this.Sb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"avgBitrate",{get:function(){return this.Tb},set:function(t){if(!Zc(t,32))throw new m("Provided avgBitrate does not fit in 32 bits.");this.Tb=t},enumerable:!1,configurable:!0}),i.prototype.getDescriptorSize=function(){return 13+this.decoderSpecificInfo.reduce(function(t,i){return t+i.getSize()},0)},i.prototype.serializeDescriptorContent=function(t){t.writer.writeByte(this.objectTypeIndication),t.writer.writeUInt(this.streamType,6),t.writer.writeBool(this.upStream),t.writer.writeBit(1),t.writer.writeUInt(this.bufferSizeDb,24),t.writer.writeUInt(this.maxBitrate,32),t.writer.writeUInt(this.avgBitrate,32);for(var i=0,s=this.decoderSpecificInfo;i<s.length;i++){s[i].serialize(t)}}}(ll);r();!function(t){function i(i,s){void 0===s&&(s={});var e=t.call(this,5,s.fixed28BitMode)||this;return e.data=i,e}Ro(i,t),i.prototype.getDescriptorSize=function(){return this.data.length},i.prototype.serializeDescriptorContent=function(t){t.concat(mt.from(this.data))}}(ll);r(),r();var tw=function(t){function i(i){void 0===i&&(i=!1);var s=t.call(this,6,i)||this;return s.predefined=2,s}return Ro(i,t),i.prototype.getDescriptorSize=function(){return 1},i.prototype.serializeDescriptorContent=function(t){t.writer.writeByte(this.predefined)},i}(ll);!function(t){function i(i,s,e,n){void 0===n&&(n={});var r=t.call(this,3,n.fixed28BitMode)||this;return r.decoderConfigDescriptor=e,r.esId=i,r.streamPriority=s,r.dependsOnEsId=null==n?void 0:n.dependsOnEsId,r.urlString=null==n?void 0:n.url,r.ocrEsId=null==n?void 0:n.ocrEsId,r.slConfigDescriptor=new tw(n.fixed28BitMode),r}Ro(i,t),w.defineProperty(i.prototype,"streamDependenceFlag",{get:function(){return void 0!==this.dependsOnEsId},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"urlFlag",{get:function(){return void 0!==this.urlString},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"ocrStreamFlag",{get:function(){return void 0!==this.ocrEsId},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"esId",{get:function(){return this.kb},set:function(t){if(!Zc(t,16))throw new m("Provided esId does not fit in 16 bits.");this.kb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"streamPriority",{get:function(){return this.Eb},set:function(t){if(!Zc(t,5))throw new m("Provided streamPriority does not fit in 5 bits.");this.Eb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"dependsOnEsId",{get:function(){return this.Rb},set:function(t){if(t&&!Zc(t,16))throw new m("Provided dependsOnEsId does not fit in 16 bits.");this.Rb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"ocrEsId",{get:function(){return this.xb},set:function(t){if(t&&!Zc(t,16))throw new m("Provided ocrEsId does not fit in 16 bits.");this.xb=t},enumerable:!1,configurable:!0}),i.prototype.getDescriptorSize=function(){return 3+(this.streamDependenceFlag?2:0)+(this.urlFlag?1+this.urlString.length:0)+(this.ocrStreamFlag?2:0)+this.decoderConfigDescriptor.getSize()+this.slConfigDescriptor.getSize()},i.prototype.serializeDescriptorContent=function(t){t.writer.writeUInt(this.esId,16),t.writer.writeBool(this.streamDependenceFlag),t.writer.writeBool(this.urlFlag),t.writer.writeBool(this.ocrStreamFlag),t.writer.writeUInt(this.streamPriority,5),this.streamDependenceFlag&&t.writer.writeUInt(this.dependsOnEsId,16),this.urlFlag&&(t.writer.writeByte(this.urlString.length),t.writer.writeString(this.urlString)),this.ocrStreamFlag&&t.writer.writeUInt(this.ocrEsId,16),this.decoderConfigDescriptor.serialize(t),this.slConfigDescriptor.serialize(t)}}(ll);r(),r(),r(),r(),r();var iw=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.boxes=[],i}return Ro(i,t),i.prototype.getSize=function(){return t.prototype.getSize.call(this)+this.boxes.reduce(function(t,i){return t+i.getSize()},0)},i.prototype.serialize=function(){for(var i=t.prototype.serialize.call(this),s=0,e=this.boxes;s<e.length;s++){var n=e[s];i=i.concat(n.serialize())}return i},i}(Zn),ga=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return Ro(i,t),i.prototype.serializeBoxContent=function(t){},i.prototype.getBoxContentSize=function(){return 0},i}(iw),sw=function(t){function i(i,s){var e=t.call(this,i)||this;return e.dataReferenceIndex=s,e}return Ro(i,t),w.defineProperty(i.prototype,"dataReferenceIndex",{get:function(){return this.Ib},set:function(t){if(!Zc(t,16))throw new m("Provided dataReferenceIndex does not fit in 16 bits.");this.Ib=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 8},i.prototype.serializeBoxContent=function(t){for(var i=0;i<6;i++)t.writer.writeByte(0);t.writer.writeUInt(this.dataReferenceIndex,16)},i}(ga),ew=function(t){function i(i,s,e,n){var r,h,o=this;return(o=t.call(this,i,s)||this).extra=n,o.channelCount=null!==(r=e.channelCount)&&void 0!==r?r:2,o.sampleSize=null!==(h=e.sampleSize)&&void 0!==h?h:16,o.sampleRate=e.sampleRate,o}return Ro(i,t),w.defineProperty(i.prototype,"channelCount",{get:function(){return this.Pb},set:function(t){if(!Zc(t,16))throw new m("Provided channelCount does not fit in 16 bits.");this.Pb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"sampleSize",{get:function(){return this.Cb},set:function(t){if(!Zc(t,16))throw new m("Provided sampleSize does not fit in 16 bits.");this.Cb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"sampleRate",{get:function(){return this.Nb},set:function(t){if(!Zc(Yr(t,16),32))throw new m("Provided rate does not fit in 32 bits (fixed 16.16).");this.Nb=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){var i,s;return t.prototype.getBoxContentSize.call(this)+8+2+2+2+2+(void 0!==this.sampleRate?4:0)+(null!==(s=null===(i=this.extra)||void 0===i?void 0:i.length)&&void 0!==s?s:0)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(0,32),i.writer.writeUInt(0,32),i.writer.writeUInt(this.channelCount,16),i.writer.writeUInt(this.sampleSize,16),i.writer.writeUInt(0,16),i.writer.writeUInt(0,16),i.writer.writeUInt(Yr(this.sampleRate,16),32),this.extra&&Cr(i.writer,this.extra)},i}(sw);r();!function(t){function i(i){var s=t.call(this,"stco",0,0)||this;return s.entries=i,s}Ro(i,t),w.defineProperty(i.prototype,"entries",{get:function(){return this.Db},set:function(t){if(!Zc(t.length,32))throw new m("Number of allowed entries cannot fit in 32 bits.");if(t.some(function(t){return!Zc(t,32)}))throw new m("Not all entries can be represented in 32 bits.");this.Db=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4*this.entries.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.entries.length,32);for(var s=0,e=this.entries;s<e.length;s++){var n=e[s];i.writer.writeUInt(n,32)}}}(Cl);r();!function(t){function i(i){var s=t.call(this,"clap")||this;return s.cleanApertureWidthN=i.cleanApertureWidthN,s.cleanApertureWidthD=i.cleanApertureWidthD,s.cleanApertureHeightN=i.cleanApertureHeightN,s.cleanApertureHeightD=i.cleanApertureHeightD,s.horizOffN=i.horizOffN,s.horizOffD=i.horizOffD,s.vertOffN=i.vertOffN,s.vertOffD=i.vertOffD,s}Ro(i,t),w.defineProperty(i.prototype,"cleanApertureWidthN",{get:function(){return this.Bb},set:function(t){if(!Zc(t,32))throw new m("Provided cleanApertureWidthN does not fit in 32 bits.");this.Bb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"cleanApertureWidthD",{get:function(){return this.Mb},set:function(t){if(!Zc(t,32))throw new m("Provided cleanApertureWidthD does not fit in 32 bits.");this.Mb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"cleanApertureHeightN",{get:function(){return this.Lb},set:function(t){if(!Zc(t,32))throw new m("Provided cleanApertureHeightN does not fit in 32 bits.");this.Lb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"cleanApertureHeightD",{get:function(){return this.Ob},set:function(t){if(!Zc(t,32))throw new m("Provided cleanApertureHeightD does not fit in 32 bits.");this.Ob=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"horizOffN",{get:function(){return this.Fb},set:function(t){if(!Zc(t,32))throw new m("Provided horizOffN does not fit in 32 bits.");this.Fb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"horizOffD",{get:function(){return this.Vb},set:function(t){if(!Zc(t,32))throw new m("Provided horizOffD does not fit in 32 bits.");this.Vb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"vertOffN",{get:function(){return this.Wb},set:function(t){if(!Zc(t,32))throw new m("Provided vertOffN does not fit in 32 bits.");this.Wb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"vertOffD",{get:function(){return this.Ub},set:function(t){if(!Zc(t,32))throw new m("Provided vertOffD does not fit in 32 bits.");this.Ub=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 32},i.prototype.serializeBoxContent=function(t){t.writer.writeUInt(this.cleanApertureWidthN,32),t.writer.writeUInt(this.cleanApertureWidthD,32),t.writer.writeUInt(this.cleanApertureHeightN,32),t.writer.writeUInt(this.cleanApertureHeightD,32),t.writer.writeUInt(this.horizOffN,32),t.writer.writeUInt(this.horizOffD,32),t.writer.writeUInt(this.vertOffN,32),t.writer.writeUInt(this.vertOffD,32)}}(Zn);r();!function(t){function i(i,s){var e=t.call(this,"ctts",i,0)||this;return e.entries=s,e}Ro(i,t),w.defineProperty(i.prototype,"entries",{get:function(){return this.Db},set:function(t){if(!Zc(t.length,32))throw new m("Number of allowed entries cannot fit in 32 bits.");if(t.some(function(t){return!Zc(t.sampleCount,32)||!Zc(t.sampleOffset,32)}))throw new m("Not all entries can be represented in 64 bits.");this.Db=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+8*this.entries.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.entries.length,32);for(var s=0,e=this.entries;s<e.length;s++){var n=e[s];i.writer.writeUInt(n.sampleCount,32),0===this.version?i.writer.writeUInt(n.sampleOffset,32):1===this.version&&i.writer.writeInt(n.sampleOffset,32)}}}(Cl);r();!function(t){function i(i){var s=t.call(this,"url ",0,void 0===i?1:0)||this;return s.location=i,s}Ro(i,t),w.defineProperty(i.prototype,"location",{get:function(){return this.Gb},set:function(t){this.flags=void 0===t?1:0,this.Gb=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){var i=t.prototype.getBoxContentSize.call(this);return this.location?i+this.location.length+1:i},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.location&&(i.writer.writeString(this.location),i.writer.writeByte(0))}}(Cl);r();!function(t){function i(i,s,e){var n=t.call(this,"urn ",0,e)||this;return n.name=i,n.location=s,n}Ro(i,t),w.defineProperty(i.prototype,"location",{get:function(){return this.Gb},set:function(t){if(1&this.flags)throw new m("The moov containment flag is set, a DataEntryUrlBox should be used instead.");this.Gb=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){var i=t.prototype.getBoxContentSize.call(this)+this.name.length+1;return this.location?i+this.location.length+1:i},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeString(this.name),i.writer.writeByte(0),this.location&&(i.writer.writeString(this.location),i.writer.writeByte(0))}}(Cl);r();!function(t){function i(){return t.call(this,"dinf")||this}Ro(i,t)}(ga);r(),r();var Kc=function(t){function i(i,s,e){var n=t.call(this,i)||this;if(n.version=s,!Zc(s,8))throw new m("the provided version cannot fit in 8 bits.");return n.flags=e,n}return Ro(i,t),w.defineProperty(i.prototype,"flags",{get:function(){return this.mb},set:function(t){this.mb=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 4},i.prototype.serializeFlags=function(t){if("number"!=typeof this.flags)throw new m("Missing custom serializeFlags method.");t.writer.writeUInt(this.flags,24)},i.prototype.serializeBoxContent=function(t){t.writer.writeByte(this.version),this.serializeFlags(t)},i}(iw);!function(t){function i(){return t.call(this,"dref",0,0)||this}Ro(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.boxes.length,32)}}(Kc);r(),r();var nw=function(t){function i(i,s,e){void 0===e&&(e=0);var n=t.call(this,"elst",s,e)||this;return n.entries=i,n}return Ro(i,t),w.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"entries",{get:function(){return this.Db},set:function(t){for(var i=0,s=t;i<s.length;i++){var e=s[i];if(!Zc(e.segmentDuration,this.bitSize))throw new m("SegmentDuration of one of the entries does not fit in ".concat(this.bitSize," bits."));if(!Zc(e.mediaTime,this.bitSize))throw new m("MediaTime of one of the entries does not fit in ".concat(this.bitSize," bits."));if(!Zc(e.mediaRateInteger,16))throw new m("Provided mediaRateInteger does not fit in 16 bits.");if(e.mediaRateFraction&&!Zc(e.mediaRateFraction,16))throw new m("Provided mediaRateFraction does not fit in 16 bits.")}this.Db=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+this.entries.length*(2*this.bitSize/8+2+2)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.entries.length,32),this.serializeElstBoxContent(i)},i}(Cl),rw=function(t){function i(i,s){return void 0===s&&(s=0),t.call(this,i,0,s)||this}return Ro(i,t),i.prototype.serializeElstBoxContent=function(t){for(var i,s=0,e=this.entries;s<e.length;s++){var n=e[s];t.writer.writeUInt(n.segmentDuration,32),t.writer.writeInt(n.mediaTime,32),t.writer.writeUInt(n.mediaRateInteger,16),t.writer.writeUInt(null!==(i=n.mediaRateFraction)&&void 0!==i?i:0,16)}},i}(nw),hw=function(t){function i(i,s){return void 0===s&&(s=0),t.call(this,i,1,s)||this}return Ro(i,t),i.prototype.serializeElstBoxContent=function(t){for(var i,s=0,e=this.entries;s<e.length;s++){var n=e[s];t.writer.writeUInt(n.segmentDuration.getHighBitsUnsigned(),32),t.writer.writeUInt(n.segmentDuration.getLowBitsUnsigned(),32),t.writer.writeInt(n.mediaTime.getHighBits(),32),t.writer.writeInt(n.mediaTime.getLowBits(),32),t.writer.writeUInt(n.mediaRateInteger,16),t.writer.writeUInt(null!==(i=n.mediaRateFraction)&&void 0!==i?i:0,16)}},i}(nw);function ow(t){for(var i=t.data,s=Kp(i.nextUint32()),e=s.version,n=s.flags,r=i.nextUint32(),h=[],o=0;o<r;o++){var a=void 0,u=void 0;0===e?(a=i.nextUint32(),u=i.nextInt32()):(a=i.nextUint64(),u=i.nextInt64());var c=i.nextInt16(),d=i.nextInt16();h.push({segmentDuration:a,mediaTime:u,mediaRateFraction:d,mediaRateInteger:c})}return 0===e?new rw(h,n.raw):new hw(h,n.raw)}var aw=function(t){function i(){return t.call(this,"edts")||this}return Ro(i,t),i}(ga);function uw(t){for(var i=new aw,s=0,e=ao(t.data);s<e.length;s++){var n=e[s];Ls(n,"elst")?i.boxes.push(ow(n)):i.boxes.push(Li(n))}return i}r(),r();var cw=function(t){function i(i,s,e,n){var r=t.call(this,i)||this;return r.majorBrand=s,r.minorVersion=e,r.compatibleBrands=n,r}return Ro(i,t),w.defineProperty(i.prototype,"majorBrand",{get:function(){return this.Xb},set:function(t){if(4!==t.length)throw new m("the provided major brand does not conform to the 4 character requirement");this.Xb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"minorVersion",{get:function(){return this.Zb},set:function(t){if(!Zc(t,32))throw new m("the provided minor version does not fit in 32 bits.");this.Zb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"compatibleBrands",{get:function(){return this.Hb},set:function(t){if(t.some(function(t){return 4!==t.length}))throw new m("Some of the compatible brands do not conform to the 4 character requirement");this.Hb=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 4*(2+this.compatibleBrands.length)},i.prototype.serializeBoxContent=function(t){t.writer.writeString(this.majorBrand),t.writer.writeUInt(this.minorVersion,32);for(var i=0,s=this.compatibleBrands;i<s.length;i++){var e=s[i];t.writer.writeString(e)}},i}(Zn),dw=function(t){function i(i,s,e){return t.call(this,"ftyp",i,s,e)||this}return Ro(i,t),i}(cw);function lw(t){for(var i=t.data,s=i.nextChars(4),e=i.nextUint32(),n=[];i.cursor.offset<i.data.byteLength;)n.push(i.nextChars(4));return new dw(s,e,n)}r();var fw=function(t){function i(i,s){void 0===s&&(s="free");var e=t.call(this,s)||this;return e.data=i,e}return Ro(i,t),i.prototype.getBoxContentSize=function(){var t,i;return null!==(i=null===(t=this.data)||void 0===t?void 0:t.length)&&void 0!==i?i:0},i.prototype.serializeBoxContent=function(t){this.data&&t.concat(mt.from(this.data))},i}(Zn);r(),r();var vw=function(t){function i(i,s,e,n){void 0===n&&(n=0);var r=t.call(this,"mdhd",e,n)||this;return r.creationTime=i.creation,r.modificationTime=i.modification,r.timescale=i.scale,r.duration=i.duration,r.language=s,r}return Ro(i,t),w.defineProperty(i.prototype,"creationTime",{get:function(){return this.zb},set:function(t){if(!Zc(t,this.bitSize))throw new m("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.zb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"modificationTime",{get:function(){return this.Yb},set:function(t){if(!Zc(t,this.bitSize))throw new m("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.Yb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"timescale",{get:function(){return this.Kb},set:function(t){if(!Zc(t,32))throw new m("Provided sequence number does not fit in 32 bits.");this.Kb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"duration",{get:function(){return this.qb},set:function(t){if(!Zc(t,this.bitSize))throw new m("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.qb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"language",{get:function(){return this.jb},set:function(t){if(!pw(t))throw new m("Expected an ISO-639-2/T language code");this.jb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8*3+4+2+2},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.serializeMdiaContent(i),i.writer.writeBit(0);for(var s=0,e=this.language;s<e.length;s++){var n=e[s];i.writer.writeUInt(n.charCodeAt(0)-96,5)}i.writer.writeUInt(0,16)},i}(Cl),_w=function(t){function i(i,s,e){return void 0===e&&(e=0),t.call(this,i,s,0,e)||this}return Ro(i,t),i.prototype.serializeMdiaContent=function(t){t.writer.writeUInt(this.creationTime,32),t.writer.writeUInt(this.modificationTime,32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration,32)},i}(vw),gw=function(t){function i(i,s,e){return void 0===e&&(e=0),t.call(this,i,s,1,e)||this}return Ro(i,t),i.prototype.serializeMdiaContent=function(t){t.writer.writeUInt(this.creationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.creationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration.getHighBitsUnsigned(),32),t.writer.writeUInt(this.duration.getLowBitsUnsigned(),32)},i}(vw);function mw(t){var i=t.data,s=Kp(i.nextUint32()),e=s.version,n=s.flags,r=qp(i,e),h=new W(mt.from(i.nextUint8Array(2)));h.skipBits(1);for(var o=[],a=0;a<3;a++)o.push(h.readUInt(5));var u=o.map(function(t){return String.fromCharCode(t+96)}).join("");return pw(u)||(u="und"),i.skip(2),0===e?new _w(r,u,n.raw):new gw(r,u,n.raw)}function pw(t){return/^[a-z]{3}$/.test(t)}var ww=function(t){function i(){return t.call(this,"mdia")||this}return Ro(i,t),i}(ga);function yw(t){for(var i=new ww,s=0,e=ao(t.data);s<e.length;s++){var n=e[s];Ls(n,"mdhd")?i.boxes.push(mw(n)):Ls(n,"hdlr")?i.boxes.push($p(n)):i.boxes.push(Li(n))}return i}r();var bw=function(t){function i(){var i=t.call(this,"mdat")||this;return i.data=new mt,i}return Ro(i,t),i.prototype.getBoxContentSize=function(){return this.data.length},i.prototype.serializeBoxContent=function(t){t.concat(this.data)},i}(Zn);function Aw(t){var i=t.data,s=i.nextUint8Array(i.data.byteLength-i.cursor.offset),e=new bw;return e.data.pushRange(s),e}r();!function(t){function i(){return t.call(this,"minf")||this}Ro(i,t)}(ga);r();var Sw;!function(t){function i(i){var s=t.call(this,"meta",0,0)||this;return s.handler=i,s}Ro(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.handler.getSize()},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.concat(this.handler.serialize())}}(Kc);r(),r(),function(t){t.VIDEO="vide",t.AUXILIARY_VIDEO="auxv",t.AUDIO="soun",t.METADATA="meta",t.HINT="hint",t.TEXT="text",t.SUBTITLE="subt",t.FONT="fdsm"}(Sw||(Sw={})),r();var Tw,kw,Ew={a:1,b:0,u:0,c:0,d:1,v:0,x:0,y:0,w:1};function Rw(t,i){i.writer.writeUInt(Yr(t.a,16),32),i.writer.writeUInt(Yr(t.b,16),32),i.writer.writeUInt(Yr(0,30),32),i.writer.writeUInt(Yr(t.c,16),32),i.writer.writeUInt(Yr(t.d,16),32),i.writer.writeUInt(Yr(0,30),32),i.writer.writeUInt(Yr(t.x,16),32),i.writer.writeUInt(Yr(t.y,16),32),i.writer.writeUInt(Yr(1,30),32)}function xw(t,i){var s,e,n,r;i.writer.writeUInt(null!==(s=t.isLeading)&&void 0!==s?s:Tw.UNKNOWN,2),i.writer.writeUInt(null!==(e=t.sampleDependsOn)&&void 0!==e?e:kw.UNKNOWN,2),i.writer.writeUInt(null!==(n=t.sampleIsDependedOn)&&void 0!==n?n:kw.UNKNOWN,2),i.writer.writeUInt(null!==(r=t.sampleHasRedundancy)&&void 0!==r?r:kw.UNKNOWN,2)}function Iw(t,i){var s,e,n;i.writer.writeUInt(0,4),xw(t,i),i.writer.writeUInt(null!==(s=t.samplePaddingValue)&&void 0!==s?s:0,3),i.writer.writeBool(null!==(e=t.sampleIsNonSyncSample)&&void 0!==e&&e),i.writer.writeUInt(null!==(n=t.sampleDegradationPriority)&&void 0!==n?n:0,16)}r(),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WITH_DEPENDENCY=1]="WITH_DEPENDENCY",t[t.NO=2]="NO",t[t.WITHOUT_DEPENDENCY=3]="WITHOUT_DEPENDENCY"}(Tw||(Tw={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.YES=1]="YES",t[t.NO=2]="NO",t[t.RESERVED=3]="RESERVED"}(kw||(kw={})),r(),r();var Pw=function(){};r(),r(),r();var Cw=function(t){function i(i,s,e){var n=t.call(this,"pssh",i,0)||this;return n.systemId=s,n.data=e,n}return Ro(i,t),w.defineProperty(i.prototype,"systemId",{get:function(){return this.Qb},set:function(t){if(16!==t.length)throw new m("Provided systemId length is not 16.");this.Qb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"data",{get:function(){return this.qm},set:function(t){if(!Zc(t.length,32))throw new m("Provided data length does not fit in 32 bits.");this.qm=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+16+4+this.data.length},i.prototype.serializeVersionBoxContent=function(t){},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.concat(mt.from(this.systemId)),this.serializeVersionBoxContent(i),i.writer.writeUInt(this.data.length,32),i.concat(mt.from(this.data))},i}(Cl),Nw=function(t){function i(i,s){return t.call(this,0,i,s)||this}return Ro(i,t),i}(Cw),Dw=function(t){function i(i,s,e){var n=t.call(this,1,i,s)||this;return n.kIds=e,n}return Ro(i,t),w.defineProperty(i.prototype,"kIds",{get:function(){return this.Jb},set:function(t){if(!Zc(t.length,32))throw new m("Provided kIds length cannot fit in 32 bits.");if(t.some(function(t){return 16!==t.length}))throw new m("Not all provided key ids are 16 bytes long.");this.Jb=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+16*this.kIds.length},i.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.kIds.length,32);for(var i=0,s=this.kIds;i<s.length;i++){var e=s[i];t.concat(mt.from(e))}},i}(Cw);function Bw(t){var i=t.data.nextUint8();t.data.skip(3);var s=t.data.nextUint8Array(16),e=[];if(1===i)for(var n=t.data.nextUint32(),r=0;r<n;r++)e.push(t.data.nextUint8Array(16));var h=t.data.nextUint32(),o=t.data.nextUint8Array(h);return 1===i?new Dw(s,o,e):new Nw(s,o)}r(),r();var Mw=function(t){function i(i,s,e){void 0===e&&(e=0);var n=t.call(this,"mehd",s,e)||this;return n.fragmentDuration=i,n}return Ro(i,t),w.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"fragmentDuration",{get:function(){return this.$b},set:function(t){if(!Zc(t,this.bitSize))throw new m("The provided fragmentDuration does not fit in ".concat(this.bitSize," bits."));this.$b=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8},i}(Cl),Lw=function(t){function i(i,s){return void 0===s&&(s=0),t.call(this,i,0,s)||this}return Ro(i,t),i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.fragmentDuration,32)},i}(Mw),Ow=function(t){function i(i,s){return void 0===s&&(s=0),t.call(this,i,1,s)||this}return Ro(i,t),i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.fragmentDuration.getHighBitsUnsigned(),32),i.writer.writeUInt(this.fragmentDuration.getLowBitsUnsigned(),32)},i}(Mw);function Fw(t){var i=t.data,s=Kp(i.nextUint32()),e=s.version,n=s.flags;return 0===e?new Lw(i.nextUint32(),n.raw):new Ow(i.nextUint64(),n.raw)}r();var Yc=function(t){function i(i,s,e,n){void 0===s&&(s={}),void 0===e&&(e=0),void 0===n&&(n=0);var r,h,o,a=this;return(a=t.call(this,"trex",e,n)||this).trackId=i,a.defaultSampleDescriptionIndex=null!==(r=null==s?void 0:s.sampleDescriptionIndex)&&void 0!==r?r:0,a.defaultSampleDuration=null!==(h=s.sampleDuration)&&void 0!==h?h:0,a.defaultSampleSize=null!==(o=s.sampleSize)&&void 0!==o?o:0,a.defaultSampleFlags=s.sampleFlags,a}return Ro(i,t),w.defineProperty(i.prototype,"trackId",{get:function(){return this.tA},set:function(t){if(!Zc(t,32))throw new m("Provided track id does not fit in 32 bits.");this.tA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"defaultSampleDescriptionIndex",{get:function(){return this.iA},set:function(t){if(!Zc(t,32))throw new m("Provided default sample description index does not fit in 32 bits.");this.iA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"defaultSampleDuration",{get:function(){return this.sA},set:function(t){if(!Zc(t,32))throw new m("Provided default sample duration does not fit in 32 bits.");this.sA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"defaultSampleSize",{get:function(){return this.eA},set:function(t){if(!Zc(t,32))throw new m("Provided default sample size does not fit in 32 bits.");this.eA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"defaultSampleFlags",{get:function(){return this.nA},set:function(t){if((null==t?void 0:t.samplePaddingValue)&&!Zc(t.samplePaddingValue,3))throw new m("Provided sample padding value does not fit in 3 bits.");if((null==t?void 0:t.sampleDegradationPriority)&&!Zc(t.sampleDegradationPriority,16))throw new m("Provided sample degradation priority does not fit in 16 bits.");this.nA=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+20},i.prototype.serializeBoxContent=function(i){var s;t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.trackId,32),i.writer.writeUInt(this.defaultSampleDescriptionIndex,32),i.writer.writeUInt(this.defaultSampleDuration,32),i.writer.writeUInt(this.defaultSampleSize,32),Iw(null!==(s=this.defaultSampleFlags)&&void 0!==s?s:{},i)},i}(Cl);function Vw(t){var i=t.data,s=Kp(i.nextUint32()),e=s.version,n=s.flags,r=i.nextUint32(),h=i.nextUint32(),o=i.nextUint32(),a=i.nextUint32(),u=jp(new W(mt.from(i.nextUint8Array(4))));return new Yc(r,{sampleDescriptionIndex:h,sampleDuration:o,sampleSize:a,sampleFlags:u},e,n.raw)}var yl=function(t){function i(){return t.call(this,"mvex")||this}return Ro(i,t),i}(ga);function Ww(t){for(var i=new yl,s=0,e=ao(t.data);s<e.length;s++){var n=e[s];Ls(n,"mehd")?i.boxes.push(Fw(n)):Ls(n,"trex")?i.boxes.push(Vw(n)):i.boxes.push(Li(n))}return i}r();var Uw=function(t){function i(s,e,n,r,h){void 0===h&&(h=0);var o,a,u,c=this;return(c=t.call(this,"mvhd",r,h)||this).creationTime=s.creation,c.modificationTime=s.modification,c.timescale=s.scale,c.duration=s.duration,c.rate=null!==(o=n.rate)&&void 0!==o?o:i.DEFAULT_RATE,c.volume=null!==(a=n.volume)&&void 0!==a?a:i.DEFAULT_VOLUME,c.matrix=null!==(u=n.matrix)&&void 0!==u?u:Ew,c.rA=e,c}return Ro(i,t),w.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"creationTime",{get:function(){return this.zb},set:function(t){if(!Zc(t,this.bitSize))throw new m("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.zb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"modificationTime",{get:function(){return this.Yb},set:function(t){if(!Zc(t,this.bitSize))throw new m("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.Yb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"timescale",{get:function(){return this.Kb},set:function(t){if(!Zc(t,32))throw new m("Provided sequence number does not fit in 32 bits.");this.Kb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"duration",{get:function(){return this.qb},set:function(t){if(!Zc(t,this.bitSize))throw new m("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.qb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"rate",{get:function(){return this.hA},set:function(t){if(!Zc(Yr(t,16),32))throw new m("Provided rate does not fit in 32 bits (fixed 16.16).");this.hA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"volume",{get:function(){return this.oA},set:function(t){if(!Zc(Yr(t,8),16))throw new m("Provided volume does not fit in 16 bits (fixed 8.8).");this.oA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"matrix",{get:function(){return this.aA},set:function(t){if(0!==t.u||0!==t.v||1!==t.w)throw new m("(u, v, w) does not match the required (0, 0, 1)");this.aA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"nextTrackId",{get:function(){return this.rA},set:function(t){if(0===t)throw new m("NextTrackId cannot be 0.");if(!Zc(t,32))throw new m("NextTrackId cannot exceed 32 bits.");this.rA=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8*3+4+4+2+2+8+36+24+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.serializeMvhdContent(i),i.writer.writeUInt(Yr(this.rate,16),32),i.writer.writeUInt(Yr(this.volume,8),16),i.writer.writeUInt(0,16),i.writer.writeUInt(0,32),i.writer.writeUInt(0,32),Rw(this.matrix,i);for(var s=0;s<6;s++)i.writer.writeUInt(0,32);i.writer.writeUInt(this.nextTrackId,32)},i.DEFAULT_RATE=1,i.DEFAULT_VOLUME=1,i}(Cl),Gw=function(t){function i(i,s,e,n){return void 0===e&&(e={}),void 0===n&&(n=0),t.call(this,i,s,e,0,n)||this}return Ro(i,t),i.prototype.serializeMvhdContent=function(t){t.writer.writeUInt(this.creationTime,32),t.writer.writeUInt(this.modificationTime,32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration,32)},i}(Uw),Xw=function(t){function i(i,s,e,n){return void 0===e&&(e={}),void 0===n&&(n=0),t.call(this,i,s,e,1,n)||this}return Ro(i,t),i.prototype.serializeMvhdContent=function(t){t.writer.writeUInt(this.creationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.creationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration.getHighBitsUnsigned(),32),t.writer.writeUInt(this.duration.getLowBitsUnsigned(),32)},i}(Uw);function Zw(t){var i=t.data,s=Kp(i.nextUint32()),e=s.version,n=s.flags,r=qp(i,e),h=yt(i.nextUint32(),16),o=yt(i.nextUint16(),8);i.skip(2),i.skip(8);var a=Qp(i);i.skip(24);var u=i.nextUint32();return 0===e?new Gw(r,u,{rate:h,volume:o,matrix:a},n.raw):new Xw(r,u,{rate:h,volume:o,matrix:a},n.raw)}r(),r();var Hw=function(t){function i(i,s,e,n,r,h,o){void 0===o&&(o={});var a,u,c,d=this;return d=t.call(this,"tkhd",i,function(t){var i,s,e,n;return{trackEnabled:null===(i=null==t?void 0:t.trackEnabled)||void 0===i||i,trackInMovie:null===(s=null==t?void 0:t.trackInMovie)||void 0===s||s,trackInPreview:null===(e=null==t?void 0:t.trackInPreview)||void 0===e||e,trackSizeIsAspectRatio:null!==(n=null==t?void 0:t.trackSizeIsAspectRatio)&&void 0!==n&&n}}(o))||this,d.creationTime=s.creation,d.modificationTime=s.modification,d.trackId=e,d.duration=s.duration,d.volume=n,d.width=r,d.height=h,d.layer=null!==(a=o.layer)&&void 0!==a?a:0,d.alternateGroup=null!==(u=o.alternateGroup)&&void 0!==u?u:0,d.matrix=null!==(c=o.matrix)&&void 0!==c?c:Ew,d}return Ro(i,t),w.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"creationTime",{get:function(){return this.zb},set:function(t){if(!Zc(t,this.bitSize))throw new m("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.zb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"modificationTime",{get:function(){return this.Yb},set:function(t){if(!Zc(t,this.bitSize))throw new m("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.Yb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"trackId",{get:function(){return this.tA},set:function(t){if(0===t)throw new m("trackId cannot be 0.");if(!Zc(t,32))throw new m("trackId cannot exceed 32 bits.");this.tA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"duration",{get:function(){return this.qb},set:function(t){if(!Zc(t,this.bitSize))throw new m("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.qb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"volume",{get:function(){return this.oA},set:function(t){if(!Zc(Yr(t,8),16))throw new m("Provided volume does not fit in 16 bits (fixed 8.8).");this.oA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"width",{get:function(){return this.uA},set:function(t){if(!Zc(Yr(t,16),32))throw new m("Provided width does not fit in 32 bits (fixed 16.16).");this.uA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"height",{get:function(){return this.cA},set:function(t){if(!Zc(Yr(t,16),32))throw new m("Provided height does not fit in 32 bits (fixed 16.16).");this.cA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"layer",{get:function(){return this.dA},set:function(t){if(!Zc(t,16))throw new m("Provided layer does not fit in 16 bits.");this.dA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"alternateGroup",{get:function(){return this.lA},set:function(t){if(!Zc(t,16))throw new m("Provided alternateGroup does not fit in 16 bits.");this.lA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"matrix",{get:function(){return this.aA},set:function(t){if(0!==t.u||0!==t.v||1!==t.w)throw new m("(u, v, w) does not match the required (0, 0, 1)");this.aA=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8*3+4+4+8+2+2+2+2+36+4+4},i.prototype.serializeFlags=function(t){t.writer.writeUInt(0,20),t.writer.writeBool(this.flags.trackSizeIsAspectRatio),t.writer.writeBool(this.flags.trackInPreview),t.writer.writeBool(this.flags.trackInMovie),t.writer.writeBool(this.flags.trackEnabled)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.serializeTkhdContent(i),i.writer.writeUInt(0,32),i.writer.writeUInt(0,32),i.writer.writeUInt(this.layer,16),i.writer.writeUInt(this.alternateGroup,16),i.writer.writeUInt(Yr(this.volume,8),16),i.writer.writeUInt(0,16),Rw(this.matrix,i),i.writer.writeUInt(Yr(this.width,16),32),i.writer.writeUInt(Yr(this.height,16),32)},i}(Cl),zw=function(t){function i(i,s,e,n,r,h){return t.call(this,0,i,s,e,n,r,h)||this}return Ro(i,t),i.prototype.serializeTkhdContent=function(t){t.writer.writeUInt(this.creationTime,32),t.writer.writeUInt(this.modificationTime,32),t.writer.writeUInt(this.trackId,32),t.writer.writeUInt(0,32),t.writer.writeUInt(this.duration,32)},i}(Hw),Yw=function(t){function i(i,s,e,n,r,h){return t.call(this,1,i,s,e,n,r,h)||this}return Ro(i,t),i.prototype.serializeTkhdContent=function(t){t.writer.writeUInt(this.creationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.creationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.trackId,32),t.writer.writeUInt(0,32),t.writer.writeUInt(this.duration.getHighBitsUnsigned(),32),t.writer.writeUInt(this.duration.getLowBitsUnsigned(),32)},i}(Hw);function Kw(t){var i,s,e,n,r=t.data,h=Kp(r.nextUint32()),o=h.version,a=h.flags,u=a.isSet(8),c=a.isSet(4),d=a.isSet(2),l=a.isSet(1);0===o?(i=r.nextUint32(),s=r.nextUint32(),e=r.nextUint32(),r.skip(4),n=r.nextUint32()):(i=r.nextUint64(),s=r.nextUint64(),e=r.nextUint32(),r.skip(4),n=r.nextUint64()),r.skip(8);var f=r.nextInt16(),v=r.nextInt16(),_=yt(r.nextInt16(),8);r.skip(2);var g=Qp(r),m=yt(r.nextUint32(),16),p=yt(r.nextUint32(),16);return 0===o?new zw({creation:i,modification:s,duration:n},e,_,m,p,{layer:f,matrix:g,alternateGroup:v,trackSizeIsAspectRatio:u,trackEnabled:l,trackInPreview:c,trackInMovie:d}):new Yw({creation:i,modification:s,duration:n},e,_,m,p,{layer:f,matrix:g,alternateGroup:v,trackSizeIsAspectRatio:u,trackEnabled:l,trackInPreview:c,trackInMovie:d})}var qw=function(t){function i(){return t.call(this,"trak")||this}return Ro(i,t),i}(ga);function jw(t){for(var i=new qw,s=0,e=ao(t.data);s<e.length;s++){var n=e[s];Ls(n,"tkhd")?i.boxes.push(Kw(n)):Ls(n,"mdia")?i.boxes.push(yw(n)):Ls(n,"edts")?i.boxes.push(uw(n)):i.boxes.push(Li(n))}return i}var Qw=function(t){function i(){return t.call(this,"moov")||this}return Ro(i,t),i}(ga);function Jw(t){for(var i=new Qw,s=0,e=ao(t.data);s<e.length;s++){var n=e[s];Ls(n,"mvhd")?i.boxes.push(Zw(n)):Ls(n,"trak")?i.boxes.push(jw(n)):Ls(n,"mvex")?i.boxes.push(Ww(n)):Ls(n,"pssh")?i.boxes.push(Bw(n)):i.boxes.push(Li(n))}return i}r(),r(),r();var $w=function(t){function i(i,s,e){void 0===e&&(e=0);var n=t.call(this,"tfdt",s,e)||this;return n.baseMediaDecodeTime=i,n}return Ro(i,t),w.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"baseMediaDecodeTime",{get:function(){return this.fA},set:function(t){if(!Zc(t,this.bitSize))throw new m("Provided baseMediaDecodeTime does not fit in ".concat(this.bitSize," bits."));this.fA=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8},i}(Cl),ty=function(t){function i(i,s){return void 0===s&&(s=0),t.call(this,i,0,s)||this}return Ro(i,t),i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.baseMediaDecodeTime,32)},i}($w),ml=function(t){function i(i,s){return void 0===s&&(s=0),t.call(this,i,1,s)||this}return Ro(i,t),i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.baseMediaDecodeTime.getHighBitsUnsigned(),32),i.writer.writeUInt(this.baseMediaDecodeTime.getLowBitsUnsigned(),32)},i}($w);function iy(t){var i=t.data,s=Kp(i.nextUint32()),e=s.version,n=s.flags;return 0===e?new ty(i.nextUint32(),n.raw):new ml(i.nextUint64(),n.raw)}r();var sy=function(t){function i(i,s){void 0===s&&(s=0);var e=t.call(this,"tfhd",s,function(t){return{baseDataOffsetPresent:void 0!==t.baseDataOffset,sampleDescriptionIndexPresent:void 0!==t.sampleDescriptionIndex,defaultSampleDurationPresent:void 0!==t.defaultSampleDuration,defaultSampleSizePresent:void 0!==t.defaultSampleSize,defaultSampleFlagsPresent:void 0!==t.defaultSampleFlags,durationIsEmpty:t.durationIsEmpty,defaultBaseIsMoof:t.defaultBaseIsMoof}}(i))||this;return e.trackId=i.trackId,e.baseDataOffset=i.baseDataOffset,e.sampleDescriptionIndex=i.sampleDescriptionIndex,e.defaultSampleDuration=i.defaultSampleDuration,e.defaultSampleSize=i.defaultSampleSize,e.defaultSampleFlags=i.defaultSampleFlags,e}return Ro(i,t),w.defineProperty(i.prototype,"trackId",{get:function(){return this.tA},set:function(t){if(!Zc(t,32))throw new m("Provided track id does not fit in 32 bits.");this.tA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"baseDataOffset",{get:function(){return this.vA},set:function(t){if(void 0===t&&this.flags.baseDataOffsetPresent)throw new m("The base data offset present flag is set.");if(void 0!==t&&!this.flags.baseDataOffsetPresent)throw new m("The base data offset present flag is not set.");if(t&&!Zc(t,64))throw new m("Provided baseDataOffset does not fit in 32 bits.");this.vA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"sampleDescriptionIndex",{get:function(){return this._A},set:function(t){if(void 0===t&&this.flags.sampleDescriptionIndexPresent)throw new m("The sample description index flag is set.");if(void 0!==t&&!this.flags.sampleDescriptionIndexPresent)throw new m("The sample description index flag is not set.");if(t&&!Zc(t,32))throw new m("Provided sampleDescriptionIndex does not fit in 32 bits.");this._A=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"defaultSampleDuration",{get:function(){return this.sA},set:function(t){if(void 0===t&&this.flags.defaultSampleDurationPresent)throw new m("The default sample duration present flag is set.");if(void 0!==t&&!this.flags.defaultSampleDurationPresent)throw new m("The default sample duration present flag is not set.");if(t&&!Zc(t,32))throw new m("Provided defaultSampleDuration does not fit in 32 bits.");this.sA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"defaultSampleSize",{get:function(){return this.eA},set:function(t){if(void 0===t&&this.flags.defaultSampleSizePresent)throw new m("The default sample size present flag is set.");if(void 0!==t&&!this.flags.defaultSampleSizePresent)throw new m("The default sample size present flag is not set.");if(t&&!Zc(t,32))throw new m("Provided defaultSampleSize does not fit in 32 bits.");this.eA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"defaultSampleFlags",{get:function(){return this.nA},set:function(t){if(void 0===t&&this.flags.defaultSampleFlagsPresent)throw new m("The default sample flags present flag is set.");if(void 0!==t&&!this.flags.defaultSampleFlagsPresent)throw new m("The default sample flags present flag is not set.");if((null==t?void 0:t.samplePaddingValue)&&!Zc(t.samplePaddingValue,3))throw new m("Provided sample padding value does not fit in 3 bits.");if((null==t?void 0:t.sampleDegradationPriority)&&!Zc(t.sampleDegradationPriority,16))throw new m("Provided sample degradation priority does not fit in 16 bits.");this.nA=t},enumerable:!1,configurable:!0}),i.prototype.serializeFlags=function(t){t.writer.writeUInt(0,6),t.writer.writeBool(this.flags.defaultBaseIsMoof),t.writer.writeBool(this.flags.durationIsEmpty),t.writer.writeByte(0),t.writer.writeUInt(0,2),t.writer.writeBool(this.flags.defaultSampleFlagsPresent),t.writer.writeBool(this.flags.defaultSampleSizePresent),t.writer.writeBool(this.flags.defaultSampleDurationPresent),t.writer.writeBit(0),t.writer.writeBool(this.flags.sampleDescriptionIndexPresent),t.writer.writeBool(this.flags.baseDataOffsetPresent)},i.prototype.getBoxContentSize=function(){var i=t.prototype.getBoxContentSize.call(this)+4;return this.flags.baseDataOffsetPresent&&(i+=8),this.flags.sampleDescriptionIndexPresent&&(i+=4),this.flags.defaultSampleDurationPresent&&(i+=4),this.flags.defaultSampleSizePresent&&(i+=4),this.flags.defaultSampleFlagsPresent&&(i+=4),i},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.trackId,32),this.flags.baseDataOffsetPresent&&(i.writer.writeUInt(this.baseDataOffset.getHighBitsUnsigned(),32),i.writer.writeUInt(this.baseDataOffset.getLowBitsUnsigned(),32)),this.flags.sampleDescriptionIndexPresent&&i.writer.writeUInt(this.sampleDescriptionIndex,32),this.flags.defaultSampleDurationPresent&&i.writer.writeUInt(this.defaultSampleDuration,32),this.flags.defaultSampleSizePresent&&i.writer.writeUInt(this.defaultSampleSize,32),this.flags.defaultSampleFlagsPresent&&Iw(this.defaultSampleFlags,i)},i}(Cl);function ey(t){var i=t.data,s=i.nextUint8(),e=new W(mt.from(i.nextUint8Array(3)));e.skipBits(6);var n=Boolean(e.readBit()),r=Boolean(e.readBit());e.skipBits(10);var h=Boolean(e.readBit()),o=Boolean(e.readBit()),a=Boolean(e.readBit());e.skipBits(1);var u=Boolean(e.readBit()),c=Boolean(e.readBit()),d=i.nextUint32(),l=c?i.nextUint64():void 0,f=u?i.nextUint32():void 0,v=a?i.nextUint32():void 0,_=o?i.nextUint32():void 0,g=h?jp(new W(mt.from(i.nextUint8Array(4)))):void 0;return new sy({trackId:d,defaultBaseIsMoof:n,durationIsEmpty:r,baseDataOffset:l,sampleDescriptionIndex:f,defaultSampleDuration:v,defaultSampleSize:_,defaultSampleFlags:g},s)}r();var ny=function(t){function i(i,s,e){var n=t.call(this,"trun",i,function(t){var i,s,e,n;return{dataOffsetPresent:void 0!==t.dataOffset,firstSampleFlagsPresent:void 0!==t.firstSampleFlags,sampleDurationPresent:null!==(i=t.sampleDurationPresent)&&void 0!==i&&i,sampleSizePresent:null!==(s=t.sampleSizePresent)&&void 0!==s&&s,sampleFlagsPresent:null!==(e=t.sampleFlagsPresent)&&void 0!==e&&e,sampleCompositionTimeOffsetsPresent:null!==(n=t.sampleCompositionTimeOffsetsPresent)&&void 0!==n&&n}}(s))||this;return n.dataOffset=s.dataOffset,n.samples=e,n.firstSampleFlags=s.firstSampleFlags,n}return Ro(i,t),w.defineProperty(i.prototype,"dataOffset",{get:function(){return this.gA},set:function(t){if(t&&!Zc(t,32))throw new m("Provided data offset does not fit in 32 bits.");this.gA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"firstSampleFlags",{get:function(){return this.mA},set:function(t){if((null==t?void 0:t.samplePaddingValue)&&!Zc(t.samplePaddingValue,3))throw new m("Provided sample padding value does not fit in 3 bits.");if((null==t?void 0:t.sampleDegradationPriority)&&!Zc(t.sampleDegradationPriority,16))throw new m("Provided sample degradation priority does not fit in 16 bits.");this.mA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"samples",{get:function(){return this.pA},set:function(t){var i,s;if(!Zc(t.length,32))throw new m("The sample count cannot be represented in 32 bits.");for(var e=0,n=t;e<n.length;e++){var r=n[e];if(void 0===r.duration&&this.flags.sampleDurationPresent)throw new m("The sample duration present flag is set.");if(void 0!==r.duration&&!this.flags.sampleDurationPresent)throw new m("The sample duration present flag is not set.");if(r.duration&&!Zc(r.duration,32))throw new m("Provided sample duration does not fit in 32 bits.");if(void 0===r.size&&this.flags.sampleSizePresent)throw new m("The sample size present flag is set.");if(void 0!==r.size&&!this.flags.sampleSizePresent)throw new m("The sample size present flag is not set.");if(r.size&&!Zc(r.size,32))throw new m("Provided sample size does not fit in 32 bits.");if(void 0===r.flags&&this.flags.sampleFlagsPresent)throw new m("The sample flags present flag is set.");if(void 0!==r.flags&&!this.flags.sampleFlagsPresent)throw new m("The sample flags present flag is not set.");if((null===(i=r.flags)||void 0===i?void 0:i.samplePaddingValue)&&!Zc(r.flags.samplePaddingValue,3))throw new m("Provided sample padding value does not fit in 3 bits.");if((null===(s=r.flags)||void 0===s?void 0:s.sampleDegradationPriority)&&!Zc(r.flags.sampleDegradationPriority,16))throw new m("Provided sample degradation priority does not fit in 16 bits.");if(void 0===r.compositionTimeOffset&&this.flags.sampleCompositionTimeOffsetsPresent)throw new m("The sample compositionTimeOffset present flag is set.");if(void 0!==r.compositionTimeOffset&&!this.flags.sampleCompositionTimeOffsetsPresent)throw new m("The sample compositionTimeOffset present flag is not set.");if(r.compositionTimeOffset&&!Zc(r.compositionTimeOffset,32))throw new m("Provided sample compositionTimeOffset does not fit in 32 bits.")}this.pA=t},enumerable:!1,configurable:!0}),i.prototype.serializeFlags=function(t){t.writer.writeByte(0),t.writer.writeUInt(0,4),t.writer.writeBool(this.flags.sampleCompositionTimeOffsetsPresent),t.writer.writeBool(this.flags.sampleFlagsPresent),t.writer.writeBool(this.flags.sampleSizePresent),t.writer.writeBool(this.flags.sampleDurationPresent),t.writer.writeUInt(0,5),t.writer.writeBool(this.flags.firstSampleFlagsPresent),t.writer.writeBit(0),t.writer.writeBool(this.flags.dataOffsetPresent)},i.prototype.getBoxContentSize=function(){var i=t.prototype.getBoxContentSize.call(this)+4;return this.flags.dataOffsetPresent&&(i+=4),this.flags.firstSampleFlagsPresent&&(i+=4),this.flags.sampleDurationPresent&&(i+=4*this.samples.length),this.flags.sampleSizePresent&&(i+=4*this.samples.length),this.flags.sampleFlagsPresent&&(i+=4*this.samples.length),this.flags.sampleCompositionTimeOffsetsPresent&&(i+=4*this.samples.length),i},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.samples.length,32),this.flags.dataOffsetPresent&&i.writer.writeUInt(this.dataOffset,32),this.flags.firstSampleFlagsPresent&&Iw(this.firstSampleFlags,i);for(var s=0,e=this.samples;s<e.length;s++){var n=e[s];this.flags.sampleDurationPresent&&i.writer.writeUInt(n.duration,32),this.flags.sampleSizePresent&&i.writer.writeUInt(n.size,32),this.flags.sampleFlagsPresent&&Iw(n.flags,i),this.flags.sampleCompositionTimeOffsetsPresent&&(0===this.version?i.writer.writeUInt(n.compositionTimeOffset,32):i.writer.writeInt(n.compositionTimeOffset,32))}},i}(Cl);function ry(t){var i=t.data,s=i.nextUint8(),e=new W(mt.from(i.nextUint8Array(3)));e.skipBits(12);var n=Boolean(e.readBit()),r=Boolean(e.readBit()),h=Boolean(e.readBit()),o=Boolean(e.readBit());e.skipBits(5);var a=Boolean(e.readBit());e.skipBits(1);var u=Boolean(e.readBit()),c=i.nextUint32(),d={sampleDurationPresent:o,sampleSizePresent:h,sampleFlagsPresent:r,sampleCompositionTimeOffsetsPresent:n};u&&(d.dataOffset=i.nextInt32()),a&&(d.firstSampleFlags=jp(new W(mt.from(i.nextUint8Array(4)))));for(var l=[],f=0;f<c;f++){var v={};o&&(v.duration=i.nextUint32()),h&&(v.size=i.nextUint32()),r&&(v.flags=jp(new W(mt.from(i.nextUint8Array(4))))),n&&(v.compositionTimeOffset=0===s?i.nextUint32():i.nextInt32()),l.push(v)}return new ny(s,d,l)}var hy=function(t){function i(){return t.call(this,"traf")||this}return Ro(i,t),i}(ga);function oy(t){for(var i=new hy,s=0,e=ao(t.data);s<e.length;s++){var n=e[s];Ls(n,"tfhd")?i.boxes.push(ey(n)):Ls(n,"tfdt")?i.boxes.push(iy(n)):Ls(n,"trun")?i.boxes.push(ry(n)):i.boxes.push(Li(n))}return i}var ay=function(t){function i(){return t.call(this,"moof")||this}return Ro(i,t),i}(ga);function uy(t){for(var i=new ay,s=0,e=ao(t.data);s<e.length;s++){var n=e[s];Ls(n,"traf")?i.boxes.push(oy(n)):Ls(n,"pssh")?i.boxes.push(Bw(n)):i.boxes.push(Li(n))}return i}r();!function(t){function i(i){var s=t.call(this,"mfhd",0,0)||this;return s.sequenceNumber=i,s}Ro(i,t),w.defineProperty(i.prototype,"sequenceNumber",{get:function(){return this.wA},set:function(t){if(!Zc(t,32))throw new m("Provided sequence number does not fit in 32 bits.");this.wA=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.sequenceNumber,32)}}(Cl);r();var cy=function(t){function i(i){var s=t.call(this,"frma")||this;return s.codingName=i,s}return Ro(i,t),w.defineProperty(i.prototype,"codingName",{get:function(){return this.yA},set:function(t){if(4!==t.length)throw new m("Provided coding name was not 4 characters long.");this.yA=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 4},i.prototype.serializeBoxContent=function(t){t.writer.writeString(this.codingName)},i}(Zn);r();!function(t){function i(i,s){var e=t.call(this,"pasp")||this;return e.hSpacing=i,e.vSpacing=s,e}Ro(i,t),w.defineProperty(i.prototype,"hSpacing",{get:function(){return this.bA},set:function(t){if(!Zc(t,32))throw new m("Provided hSpacing does not fit in 32 bits.");this.bA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"vSpacing",{get:function(){return this.AA},set:function(t){if(!Zc(t,32))throw new m("Provided vSpacing does not fit in 32 bits.");this.AA=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 8},i.prototype.serializeBoxContent=function(t){t.writer.writeUInt(this.hSpacing,32),t.writer.writeUInt(this.vSpacing,32)}}(Zn);r();!function(t){function i(i,s,e){var n=t.call(this,i)||this;return n.sample=s,n.sinf=e,n}Ro(i,t),i.prototype.getBoxContentSize=function(){return this.sample.getBoxContentSize()+this.sinf.getSize()},i.prototype.serializeBoxContent=function(t){this.sample.serializeBoxContent(t),t.concat(this.sinf.serialize())}}(ga);r();!function(t){function i(i,s,e){var n=t.call(this,"sinf")||this;return n.schm=s,n.schi=e,n.frma=new cy(i),n}Ro(i,t),i.prototype.getBoxContentSize=function(){var t,i,s,e;return this.frma.getSize()+(null!==(i=null===(t=this.schm)||void 0===t?void 0:t.getSize())&&void 0!==i?i:0)+(null!==(e=null===(s=this.schi)||void 0===s?void 0:s.getSize())&&void 0!==e?e:0)},i.prototype.serializeBoxContent=function(t){t.concat(this.frma.serialize()),this.schm&&t.concat(this.schm.serialize()),this.schi&&t.concat(this.schi.serialize())}}(Zn);r();var dy=function(t){function i(i,s,e){var n=t.call(this,"saio",i,void 0===e?0:1)||this;return n.entries=s,n.explicitAuxInfoType=e,n}return Ro(i,t),w.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"entries",{get:function(){return this.Db},set:function(t){var i=this;if(!Zc(t.length,32))throw new m("Number of entries provided does not fit in 32 bits.");if(t.some(function(t){return!Zc(t,i.bitSize)}))throw new m("Not all provided entries fit in ".concat(this.bitSize," bits."));this.Db=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"explicitAuxInfoType",{get:function(){return this.SA},set:function(t){if(void 0===t)this.flags=0;else{if(!Zc(t.auxInfoType,32))throw new m("Provided auxInfoType does not fit in 32 bits.");if(!Zc(t.auxInfoTypeParameter,32))throw new m("Provided auxInfoTypeParameter does not fit in 32 bits.");this.flags=1}this.SA=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+(void 0===this.explicitAuxInfoType?0:8)+4+this.entries.length*this.bitSize/8},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),void 0!==this.explicitAuxInfoType&&(i.writer.writeUInt(this.explicitAuxInfoType.auxInfoType,32),i.writer.writeUInt(this.explicitAuxInfoType.auxInfoTypeParameter,32)),i.writer.writeUInt(this.entries.length,32),this.serializeSaioContent(i)},i}(Cl);(function(t){function i(){return null!==t&&t.apply(this,arguments)||this}Ro(i,t),i.prototype.serializeSaioContent=function(t){for(var i=0,s=this.entries;i<s.length;i++){var e=s[i];t.writer.writeUInt(e,32)}}})(dy),function(t){function i(){return null!==t&&t.apply(this,arguments)||this}Ro(i,t),i.prototype.serializeSaioContent=function(t){for(var i=0,s=this.entries;i<s.length;i++){var e=s[i];t.writer.writeUInt(e.getHighBitsUnsigned(),32),t.writer.writeUInt(e.getLowBitsUnsigned(),32)}}}(dy);r();!function(t){function i(i,s,e){var n=t.call(this,"saiz",0,void 0===e?0:1)||this;return n.defaultSampleInfoSize=i,n.sampleInfoSizes=s,n.explicitAuxInfoType=e,n}Ro(i,t),w.defineProperty(i.prototype,"defaultSampleInfoSize",{get:function(){return this.TA},set:function(t){if(!Zc(t,8))throw new m("Provided defaultSampleInfoSize does not fit in a single byte.");this.TA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"sampleInfoSizes",{get:function(){return this.kA},set:function(t){if(!Zc(t.length,32))throw new m("Number of sampleInfoSizes provided does not fit in 32 bits.");if(t.some(function(t){return!Zc(t,8)}))throw new m("Not all provided sampleInfoSizes fit in a byte.");this.kA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"explicitAuxInfoType",{get:function(){return this.SA},set:function(t){if(void 0===t)this.flags=0;else{if(!Zc(t.auxInfoType,32))throw new m("Provided auxInfoType does not fit in 32 bits.");if(!Zc(t.auxInfoTypeParameter,32))throw new m("Provided auxInfoTypeParameter does not fit in 32 bits.");this.flags=1}this.SA=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+(void 0===this.explicitAuxInfoType?0:8)+1+4+(0!==this.defaultSampleInfoSize?0:this.sampleInfoSizes.length)},i.prototype.serializeBoxContent=function(i){if(0!==this.defaultSampleInfoSize&&this.sampleInfoSizes.length>0)throw new m("Both a default size and specific sizes are provided.  This is prohibited.");t.prototype.serializeBoxContent.call(this,i),void 0!==this.explicitAuxInfoType&&(i.writer.writeUInt(this.explicitAuxInfoType.auxInfoType,32),i.writer.writeUInt(this.explicitAuxInfoType.auxInfoTypeParameter,32)),i.writer.writeByte(this.defaultSampleInfoSize),i.writer.writeUInt(this.sampleInfoSizes.length,32);for(var s=0,e=this.sampleInfoSizes;s<e.length;s++){var n=e[s];i.writer.writeByte(n)}}}(Cl);r();!function(t){function i(i){var s=t.call(this,"sdtp",0,0)||this;return s.samples=i,s}Ro(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.samples.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i);for(var s=0,e=this.samples;s<e.length;s++){xw(e[s],i)}}}(Cl);r();!function(t){function i(i){return t.call(this,"stsd",i,0)||this}Ro(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.boxes.length,32)}}(Kc);r();var ly=function(t){function i(i,s,e){var n=t.call(this,"sgpd",i,0)||this;return n.entries=e,n.groupingType=s,n}return Ro(i,t),w.defineProperty(i.prototype,"groupingType",{get:function(){return this.EA},set:function(t){if(4!==t.length)throw new m("The provided groupingType does not equal 4 characters.");this.EA=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeString(this.groupingType),this.serializeVersionBoxContent(i),i.writer.writeUInt(this.entries.length,32);for(var s=0,e=this.entries;s<e.length;s++){var n=e[s];this.serializeEntryBoxContent(i,n)}},i.prototype.serializeEntryBoxContent=function(t,i){i.serializeBoxContent(t)},i}(Cl);(function(t){function i(i,s){return t.call(this,0,i,s)||this}Ro(i,t),i.prototype.serializeVersionBoxContent=function(t){}})(ly),function(t){function i(i,s,e){var n=t.call(this,1,i,e)||this;return n.defaultLength=s,n}Ro(i,t),w.defineProperty(i.prototype,"defaultLength",{get:function(){return this.RA},set:function(t){if(!Zc(t,32))throw new m("The provided defaultLength does not fit in 32 bits.");this.RA=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+this.entries.length*(this.defaultLength||4)},i.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.defaultLength,32)},i.prototype.serializeEntryBoxContent=function(t,i){0===this.defaultLength&&t.writer.writeUInt(i.getBoxContentSize(),32),i.serializeBoxContent(t)}}(ly),function(t){function i(i,s,e,n){void 0===n&&(n=0);var r=this;if(i<2)throw new m("This constructor is only meant for versions 2 and up.");return(r=t.call(this,i,s,e)||this).defaultSampleDescriptionIndex=n,r}Ro(i,t),w.defineProperty(i.prototype,"defaultSampleDescriptionIndex",{get:function(){return this.iA},set:function(t){if(!Zc(t,32))throw new m("The provided defaultSampleDescriptionIndex does not fit in 32 bits.");this.iA=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},i.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.defaultSampleDescriptionIndex,32)}}(ly);r();(function(t){function i(i){void 0===i&&(i=[]);var s=t.call(this,"stsz",0,0)||this;return s.sampleSizes=i,s}Ro(i,t),w.defineProperty(i.prototype,"sampleSizes",{get:function(){return this.xA},set:function(t){if(!Zc(t.length,32))throw new m("Number of allowed samples cannot fit in 32 bits.");if(t.some(function(t){return!Zc(t,32)}))throw new m("Not all sampleSizes can be represented in 32 bits.");this.xA=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4+4*this.sampleSizes.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(0,32),i.writer.writeUInt(this.sampleSizes.length,32);for(var s=0,e=this.sampleSizes;s<e.length;s++){var n=e[s];i.writer.writeUInt(n,32)}}})(Cl),function(t){function i(i,s){void 0===i&&(i=0),void 0===s&&(s=0);var e=t.call(this,"stsz",0,0)||this;return e.defaultSampleSize=i,e.samples=s,e}Ro(i,t),w.defineProperty(i.prototype,"defaultSampleSize",{get:function(){return this.eA},set:function(t){if(!Zc(t,32))throw new m("Provided defaultSampleSize does not fit in 32 bits.");this.eA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"samples",{get:function(){return this.pA},set:function(t){if(!Zc(t,32))throw new m("Number of allowed samples cannot fit in 32 bits.");this.pA=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.defaultSampleSize,32),i.writer.writeUInt(this.samples,32)}}(Cl);r();!function(t){function i(){return t.call(this,"stbl")||this}Ro(i,t)}(ga);r();!function(t){function i(i){var s=t.call(this,"stsc",0,0)||this;return s.entries=i,s}Ro(i,t),w.defineProperty(i.prototype,"entries",{get:function(){return this.Db},set:function(t){if(!Zc(t.length,32))throw new m("Number of allowed entries cannot fit in 32 bits.");if(t.some(function(t){return!Zc(t.firstChunk,32)||!Zc(t.sampleDescriptionIndex,32)||!Zc(t.samplesPerChunk,32)}))throw new m("Not all entries can be represented in 96 bits.");this.Db=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+12*this.entries.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.entries.length,32);for(var s=0,e=this.entries;s<e.length;s++){var n=e[s];i.writer.writeUInt(n.firstChunk,32),i.writer.writeUInt(n.samplesPerChunk,32),i.writer.writeUInt(n.sampleDescriptionIndex,32)}}}(Cl);r();!function(t){function i(){return t.call(this,"schi")||this}Ro(i,t)}(ga);r();!function(t){function i(i,s,e){var n=t.call(this,"schm",0,void 0===e?0:1)||this;return n.schemeType=i,n.schemeVersion=s,n.schemeUri=e,n}Ro(i,t),w.defineProperty(i.prototype,"schemeType",{get:function(){return this.IA},set:function(t){if(4!==t.length)throw new m("The provided schemeType does not have a length of 4.");this.IA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"schemeVersion",{get:function(){return this.PA},set:function(t){if(!Zc(t,32))throw new m("The provided schemeVersion does not fit in 23 bits.");this.PA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"schemeUri",{get:function(){return this.CA},set:function(t){if(t&&4!==t.length)throw new m("The provided schemeUri does not have a length of 4.");this.flags=void 0===t?0:1,this.CA=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4+(void 0===this.schemeUri?0:this.schemeUri.length+1)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeString(this.schemeType),i.writer.writeUInt(this.schemeVersion,32),this.schemeUri&&(i.writer.writeString(this.schemeUri),i.writer.writeByte(0))}}(Cl);r();var fy=function(t){function i(i,s,e,n,r,h,o){void 0===o&&(o=0);var a=t.call(this,"sidx",i,o)||this;return a.referenceId=s,a.timescale=e,a.earliestPresentationTime=n,a.firstOffset=r,a.references=h,a}return Ro(i,t),w.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"referenceId",{get:function(){return this.NA},set:function(t){if(!Zc(t,32))throw new m("Provided referenceId does not fit in 32 bits.");this.NA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"timescale",{get:function(){return this.Kb},set:function(t){if(!Zc(t,32))throw new m("Provided timescale does not fit in 32 bits.");this.Kb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"earliestPresentationTime",{get:function(){return this.DA},set:function(t){if(!Zc(t,this.bitSize))throw new m("Provided earliestPresentationTime does not fit in ".concat(this.bitSize," bits."));this.DA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"firstOffset",{get:function(){return this.BA},set:function(t){if(!Zc(t,this.bitSize))throw new m("Provided timescale does not fit in ".concat(this.bitSize," bits."));this.BA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"references",{get:function(){return this.MA},set:function(t){if(!Zc(t.length,16))throw new m("The number of provided reference items does not fit in 16 bits.");for(var i=0,s=t;i<s.length;i++){var e=s[i];if(!Zc(e.referencedSize,31))throw new m("Provided referenced size does not fit in 31 bits.");if(!Zc(e.subsegmentDuration,32))throw new m("Provided subsegment duration does not fit in 31 bits.");if(!Zc(e.sapType,3))throw new m("Provided SAP type does not fit in 3 bits.");if(!Zc(e.sapDeltaTime,28))throw new m("Provided SAP delta time does not fit in 28 bits.")}this.MA=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4+this.bitSize/8*2+2+2+12*this.references.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.referenceId,32),i.writer.writeUInt(this.timescale,32),this.serializeSidxBoxContent(i),i.writer.writeUInt(0,16),i.writer.writeUInt(this.references.length,16);for(var s=0,e=this.references;s<e.length;s++){var n=e[s];i.writer.writeBit(n.referenceType),i.writer.writeUInt(n.referencedSize,31),i.writer.writeUInt(n.subsegmentDuration,32),i.writer.writeBool(n.startsWithSap),i.writer.writeUInt(n.sapType,3),i.writer.writeUInt(n.sapDeltaTime,28)}},i}(Cl),vy=function(t){function i(i,s,e,n,r,h){return void 0===h&&(h=0),t.call(this,0,i,s,e,n,r,h)||this}return Ro(i,t),i.prototype.serializeSidxBoxContent=function(t){t.writer.writeUInt(this.earliestPresentationTime,32),t.writer.writeUInt(this.firstOffset,32)},i}(fy),_y=function(t){function i(i,s,e,n,r,h){return void 0===h&&(h=0),t.call(this,1,i,s,e,n,r,h)||this}return Ro(i,t),i.prototype.serializeSidxBoxContent=function(t){t.writer.writeUInt(this.earliestPresentationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.earliestPresentationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.firstOffset.getHighBitsUnsigned(),32),t.writer.writeUInt(this.firstOffset.getLowBitsUnsigned(),32)},i}(fy);r();var gy=function(t){function i(i,s,e){return t.call(this,"styp",i,s,e)||this}return Ro(i,t),i}(cw);function my(t){for(var i=t.data,s=i.nextChars(4),e=i.nextUint32(),n=[];i.cursor.offset<i.data.byteLength;)n.push(i.nextChars(4));return new gy(s,e,n)}r();!function(t){function i(i){void 0===i&&(i=0);var s=t.call(this,"smhd",0,0)||this;return s.balance=i,s}Ro(i,t),w.defineProperty(i.prototype,"balance",{get:function(){return this.LA},set:function(t){if(t<-1||t>1)throw new m("Provided balance does not fit in the allowed range [-1, 1].");if(!Zc(Yr(t,8),16))throw new m("Provided balance does not fit in 16 bits (fixed 8.8).");this.LA=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+2+2},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(Yr(this.balance,8),16),i.writer.writeUInt(0,16)}}(Cl);r();!function(t){function i(i){var s=t.call(this,"stss",0,0)||this;return s.entries=i,s}Ro(i,t),w.defineProperty(i.prototype,"entries",{get:function(){return this.Db},set:function(t){if(!Zc(t.length,32))throw new m("Number of allowed entries cannot fit in 32 bits.");if(t.some(function(t){return!Zc(t,32)}))throw new m("Not all entries can be represented in 32 bits.");this.Db=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4*this.entries.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.entries.length,32);for(var s=0,e=this.entries;s<e.length;s++){var n=e[s];i.writer.writeUInt(n,32)}}}(Cl);r();!function(t){function i(i){var s=t.call(this,"stts",0,0)||this;return s.entries=i,s}Ro(i,t),w.defineProperty(i.prototype,"entries",{get:function(){return this.Db},set:function(t){if(!Zc(t.length,32))throw new m("Number of allowed entries cannot fit in 32 bits.");if(t.some(function(t){return!Zc(t.sampleCount,32)||!Zc(t.sampleDelta,32)}))throw new m("Not all entries can be represented in 64 bits.");this.Db=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+8*this.entries.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.entries.length,32);for(var s=0,e=this.entries;s<e.length;s++){var n=e[s];i.writer.writeUInt(n.sampleCount,32),i.writer.writeUInt(n.sampleDelta,32)}}}(Cl);r();!function(t){function i(i){var s=t.call(this,"trep",0,0)||this;return s.trackId=i,s}Ro(i,t),w.defineProperty(i.prototype,"trackId",{get:function(){return this.tA},set:function(t){if(!Zc(t,32))throw new m("The provided trackId does not fit in 32 bits.");this.tA=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.trackId,32)}}(Kc);r();!function(t){function i(){return t.call(this,"udta")||this}Ro(i,t)}(ga);r();var py={red:0,green:0,blue:0};!function(t){function i(i,s){void 0===i&&(i=0),void 0===s&&(s=py);var e=t.call(this,"vmhd",0,1)||this;return e.graphicsMode=i,e.opColor=s,e}Ro(i,t),w.defineProperty(i.prototype,"opColor",{get:function(){return this.OA},set:function(t){if(!Zc(t.red,16)||!Zc(t.green,16)||!Zc(t.blue,16))throw new m("Not all colors could be represented in 16 bits.");this.OA=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+2+6},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.graphicsMode,16),i.writer.writeUInt(this.opColor.red,16),i.writer.writeUInt(this.opColor.green,16),i.writer.writeUInt(this.opColor.blue,16)}}(Cl);r();var wy=function(t){function i(i,s,e,n,r){void 0===n&&(n={}),void 0===r&&(r=void 0);var h,o,a,u,c,d=this;return(d=t.call(this,i,s)||this).width=e.width,d.height=e.height,d.horizontalResolution=null!==(h=e.horizontal)&&void 0!==h?h:72,d.verticalResolution=null!==(o=e.vertical)&&void 0!==o?o:72,d.compressorName=null!==(a=n.compressorName)&&void 0!==a?a:"",d.frameCount=null!==(u=n.frameCount)&&void 0!==u?u:1,d.depth=null!==(c=n.depth)&&void 0!==c?c:24,d.clap=n.clap,d.pasp=n.pasp,d.extra=r,d}return Ro(i,t),w.defineProperty(i.prototype,"width",{get:function(){return this.uA},set:function(t){if(!Zc(t,16))throw new m("Provided width does not fit in 16 bits.");this.uA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"height",{get:function(){return this.cA},set:function(t){if(!Zc(t,16))throw new m("Provided height does not fit in 16 bits.");this.cA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"horizontalResolution",{get:function(){return this.FA},set:function(t){if(!Zc(Yr(t,16),32))throw new m("Provided horizontalResolution does not fit in 32 bits (fixed 16.16).");this.FA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"verticalResolution",{get:function(){return this.VA},set:function(t){if(!Zc(Yr(t,16),32))throw new m("Provided verticalResolution does not fit in 32 bits (fixed 16.16).");this.VA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"compressorName",{get:function(){return this.WA},set:function(t){if(t.length>31)throw new m("The provided compressorName should at most be 31 characters long.");this.WA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"frameCount",{get:function(){return this.UA},set:function(t){if(!Zc(t,16))throw new m("Provided frameCount does not fit in 16 bits.");this.UA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"depth",{get:function(){return this.GA},set:function(t){if(!Zc(t,16))throw new m("Provided depth does not fit in 16 bits.");this.GA=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){var i,s,e,n,r,h;return t.prototype.getBoxContentSize.call(this)+2+2+12+2+2+4+4+4+2+32+2+2+(null!==(s=null===(i=this.clap)||void 0===i?void 0:i.getSize())&&void 0!==s?s:0)+(null!==(n=null===(e=this.pasp)||void 0===e?void 0:e.getSize())&&void 0!==n?n:0)+(null!==(h=null===(r=this.extra)||void 0===r?void 0:r.length)&&void 0!==h?h:0)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(0,16),i.writer.writeUInt(0,16),i.writer.writeUInt(0,32),i.writer.writeUInt(0,32),i.writer.writeUInt(0,32),i.writer.writeUInt(this.width,16),i.writer.writeUInt(this.height,16),i.writer.writeUInt(Yr(this.horizontalResolution,16),32),i.writer.writeUInt(Yr(this.verticalResolution,16),32),i.writer.writeUInt(0,32),i.writer.writeUInt(this.frameCount,16),i.writer.writeByte(this.compressorName.length),i.writer.writeString(this.compressorName);for(var s=0;s<31-this.compressorName.length;s++)i.writer.writeByte(0);i.writer.writeUInt(this.depth,16),i.writer.writeInt(-1,16),this.clap&&i.concat(this.clap.serialize()),this.pasp&&i.concat(this.pasp.serialize()),this.extra&&Cr(i.writer,this.extra)},i}(sw);r(),r();!function(t){function i(i){var s=t.call(this,"esds",0,0)||this;return s.esDescriptor=i,s}Ro(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+(this.esDescriptor instanceof j?this.esDescriptor.length:this.esDescriptor.getSize())},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.esDescriptor instanceof j?i.concat(mt.from(this.esDescriptor)):this.esDescriptor.serialize(i)}}(Cl);r();!function(t){function i(i,s,e){var n=t.call(this,"mp4a",i,e)||this;return n.esd=s,n}Ro(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.esd.getSize()},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.concat(this.esd.serialize())}}(ew);r();!function(t){function i(i,s,e,n){void 0===n&&(n={});var r=t.call(this,"mp4v",i,s,n)||this;return r.esDescriptor=e,r}Ro(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.esDescriptor.getSize()},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.esDescriptor.serialize(i)}}(wy);r();!function(t){function i(i,s){var e=t.call(this,"mp4s",i)||this;return e.esDescriptor=s,e}Ro(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.esDescriptor.getSize()},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.esDescriptor.serialize(i)}}(sw);r(),r();!function(t){function i(i){var s=t.call(this,"avcC")||this;return s.decoderConfig=i,s}Ro(i,t),i.prototype.getBoxContentSize=function(){return this.decoderConfig.getSize()},i.prototype.serializeBoxContent=function(t){this.decoderConfig.serialize(t)}}(Zn);r();!function(){function t(t,i,s,e,n,r){void 0===r&&(r=1),this.lengthSizeMinusOne=s,this.version=r,this.profileIndication=t.indication,this.profileCompatibility=t.compatibility,this.levelIndication=i,this.spsSets=e,this.ppsSets=n}w.defineProperty(t.prototype,"version",{get:function(){return this.XA},set:function(t){if(!Zc(t,8))throw new m("Provided version does not fit in 8 bits.");this.XA=t},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"profileIndication",{get:function(){return this.ZA},set:function(t){if(!Zc(t,8))throw new m("Provided profileIndication does not fit in 8 bits.");this.ZA=t},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"profileCompatibility",{get:function(){return this.HA},set:function(t){if(!Zc(t,8))throw new m("Provided profileCompatibility does not fit in 8 bits.");this.HA=t},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"levelIndication",{get:function(){return this.zA},set:function(t){if(!Zc(t,8))throw new m("Provided levelIndication does not fit in 8 bits.");this.zA=t},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"spsSets",{get:function(){return this.YA},set:function(t){if(!Zc(t.length,5))throw new m("Provided number of spsSets exceeds the max (32)");this.YA=t},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"ppsSets",{get:function(){return this.KA},set:function(t){if(!Zc(t.length,8))throw new m("Provided number of ppsSets exceeds the max (256)");this.KA=t},enumerable:!1,configurable:!0}),t.prototype.getSize=function(){return 7+2*this.spsSets.length+this.spsSets.reduce(function(t,i){return t+i.length},0)+2*this.ppsSets.length+this.ppsSets.reduce(function(t,i){return t+i.length},0)},t.prototype.serialize=function(t){t.writer.writeByte(this.version),t.writer.writeByte(this.profileIndication),t.writer.writeByte(this.profileCompatibility),t.writer.writeByte(this.levelIndication),t.writer.writeBits([1,1,1,1,1,1]),t.writer.writeUInt(this.lengthSizeMinusOne,2),t.writer.writeBits([1,1,1]),t.writer.writeUInt(this.spsSets.length,5);for(var i=0,s=this.spsSets;i<s.length;i++){var e=s[i];t.writer.writeUInt(e.length,16),t.concat(mt.from(e))}t.writer.writeByte(this.ppsSets.length);for(var n=0,r=this.ppsSets;n<r.length;n++){var h=r[n];t.writer.writeUInt(h.length,16),t.concat(mt.from(h))}}}();r();!function(t){function i(i,s,e,n,r){void 0===n&&(n={}),void 0===r&&(r=void 0);var h=t.call(this,"avc1",i,s,n)||this;return h.configurationBox=e,h.bitrateBox=r,h}Ro(i,t),i.prototype.getBoxContentSize=function(){var i,s;return t.prototype.getBoxContentSize.call(this)+this.configurationBox.getSize()+(null!==(s=null===(i=this.bitrateBox)||void 0===i?void 0:i.getSize())&&void 0!==s?s:0)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.concat(this.configurationBox.serialize()),this.bitrateBox&&i.concat(this.bitrateBox.serialize())}}(wy);r();!function(t){function i(i,s,e){var n=t.call(this,"btrt")||this;return n.bufferSizeDb=i,n.max=s,n.avg=e,n}Ro(i,t),w.defineProperty(i.prototype,"bufferSizeDb",{get:function(){return this.Ab},set:function(t){if(!Zc(t,32))throw new m("Provided bufferSizeDb does not fit in 32 bits.");this.Ab=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"max",{get:function(){return this.qA},set:function(t){if(!Zc(t,32))throw new m("Provided max does not fit in 32 bits.");this.qA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"avg",{get:function(){return this.jA},set:function(t){if(!Zc(t,32))throw new m("Provided avg does not fit in 32 bits.");this.jA=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 12},i.prototype.serializeBoxContent=function(t){t.writer.writeUInt(this.bufferSizeDb,32),t.writer.writeUInt(this.max,32),t.writer.writeUInt(this.avg,32)}}(Zn);r(),r(),r();var yy=function(t){function i(i,s){var e,n,r,h,o=this;if(o=t.call(this,"tenc",i,0)||this,s.perSampleIvSize>0&&(null!==(n=null===(e=s.constantIv)||void 0===e?void 0:e.length)&&void 0!==n?n:0)>0)throw new m("Either perSampleSize should be > 0 or constantIv should be defined. Not both.");return o.kId=s.kId,o.isProtected=null!==(r=s.isProtected)&&void 0!==r?r:1,s.perSampleIvSize>0?o.perSampleIvSize=s.perSampleIvSize:o.constantIv=null!==(h=s.constantIv)&&void 0!==h?h:new j(0),o}return Ro(i,t),w.defineProperty(i.prototype,"isProtected",{get:function(){return this.QA},set:function(t){if(!Zc(t,8))throw new m("Provided isProtected does not fit in 1 byte.");this.QA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"perSampleIvSize",{get:function(){return this.JA},set:function(t){if(![8,16].includes(t))throw new m("Provided perSampleIvSize does not match any allowed value [8, 16].");this.JA=t,this.$A=new j(0)},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"kId",{get:function(){return this.tS},set:function(t){if(16!==t.length)throw new m("Provided kId length is not 16.");this.tS=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"constantIv",{get:function(){return this.$A},set:function(t){if(![8,16].includes(t.length))throw new m("Provided constant IV length does not match any allowed value [8, 16].");this.$A=t,this.JA=0},enumerable:!1,configurable:!0}),i.prototype.getTencHeaderSize=function(){return 20+(this.constantIv.length>0?1+this.constantIv.length:0)},i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.getTencHeaderSize()},i.prototype.serializeVersionBoxContent=function(t){t.writer.writeByte(0)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.serializeOwnContent(i)},i.prototype.serializeOwnContent=function(t){t.writer.writeByte(0),this.serializeVersionBoxContent(t),t.writer.writeByte(this.isProtected),t.writer.writeByte(this.perSampleIvSize),Cr(t.writer,this.kId),0===this.perSampleIvSize&&(t.writer.writeByte(this.constantIv.length),Cr(t.writer,this.constantIv))},i}(Cl),by=(function(t){function i(i){return t.call(this,0,i)||this}Ro(i,t)}(yy),function(t){function i(i){var s=t.call(this,1,i)||this;return s.cryptByteBlocks=i.cryptByteBlock,s.skipByteBlocks=i.skipByteBlock,s}return Ro(i,t),w.defineProperty(i.prototype,"cryptByteBlocks",{get:function(){return this.iS},set:function(t){if(!Zc(t,4))throw new m("Provided cryptByteBlocks does not fit in 4 bits.");this.iS=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"skipByteBlocks",{get:function(){return this.sS},set:function(t){if(!Zc(t,4))throw new m("Provided skipByteBlocks does not fit in 4 bits.");this.sS=t},enumerable:!1,configurable:!0}),i.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.cryptByteBlocks,4),t.writer.writeUInt(this.skipByteBlocks,4)},i}(yy));!function(t){function i(i){var s=t.call(this)||this;return s.tencBox=new by(i),s}Ro(i,t),i.prototype.serializeBoxContent=function(t){this.tencBox.serializeOwnContent(t)},i.prototype.getBoxContentSize=function(){return this.tencBox.getTencHeaderSize()}}(Pw);function Ay(t){return void 0!==t.iv}function Sy(t){return void 0!==t.subsamples}r();!function(t){function i(i){var s=t.call(this,"senc",0,{useSubsampleEncryption:!1})||this;return s.samples=i,s}Ro(i,t),w.defineProperty(i.prototype,"samples",{get:function(){return this.pA},set:function(t){var i;if(!Zc(t.length,32))throw new m("The number of samples provided does not fit in 32 bits.");for(var s=0,e=t;s<e.length;s++){var n=e[s];if(Ay(n)&&![8,16].includes(n.iv.length))throw new m("IV of one of the provided samples did not satisfy the required length constraints. [8, 16]");if(void 0===i&&(i=Sy(n)),!0===i&&!Sy(n)||!1===i&&Sy(n))throw new m("Mix of samples with and without subsamples detected.");if(Sy(n)){if(!Zc(n.subsamples.length,16))throw new m("Subsample length of one of the provided samples does not fit in 16 bits.");for(var r=0,h=n.subsamples;r<h.length;r++){var o=h[r];if(!Zc(o.clearData,16))throw new m("Subsample clearData of one of the provided samples does not fit in 16 bits.");if(!Zc(o.protectedData,23))throw new m("Subsample protectedData of one of the provided samples does not fit in 23 bits.")}}}this.flags.useSubsampleEncryption=null!=i&&i,this.pA=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){for(var i=0,s=0,e=this.samples;s<e.length;s++){var n=e[s];Ay(n)&&(i+=n.iv.length),Sy(n)&&(i+=2+6*n.subsamples.length)}return t.prototype.getBoxContentSize.call(this)+4+i},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.samples.length,32);for(var s=0,e=this.samples;s<e.length;s++){var n=e[s];if(Ay(n)&&Cr(i.writer,n.iv),Sy(n)){i.writer.writeUInt(n.subsamples.length,16);for(var r=0,h=n.subsamples;r<h.length;r++){var o=h[r];i.writer.writeUInt(o.clearData,16),i.writer.writeUInt(o.protectedData,32)}}}},i.prototype.serializeFlags=function(t){t.writer.writeUInt(this.flags.useSubsampleEncryption?2:0,24)}}(Cl);r(),r();!function(t){function i(i,s,e,n,r){var h=t.call(this,"emsg",0,0)||this;return h.schemeIdUri=i,h.value=s,h.data=r,h.id=e,h.timescale=n.timescale,h.presentationTimeDelta=n.presentationTimeDelta,h.eventDuration=n.eventDuration,h}Ro(i,t),w.defineProperty(i.prototype,"timescale",{get:function(){return this.Kb},set:function(t){if(!Zc(t,32))throw new m("The provided timescale does not fit in 32 bits.");this.Kb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"presentationTimeDelta",{get:function(){return this.eS},set:function(t){if(!Zc(t,32))throw new m("The provided presentationTimeDelta does not fit in 32 bits.");this.eS=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"eventDuration",{get:function(){return this.nS},set:function(t){if(!Zc(t,32))throw new m("The provided eventDuration does not fit in 32 bits.");this.nS=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"id",{get:function(){return this.rS},set:function(t){if(!Zc(t,32))throw new m("The provided id does not fit in 32 bits.");this.rS=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.schemeIdUri.length+1+this.value.length+1+16+this.data.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeString(this.schemeIdUri),i.writer.writeByte(0),i.writer.writeString(this.value),i.writer.writeByte(0),i.writer.writeUInt(this.timescale,32),i.writer.writeUInt(this.presentationTimeDelta,32),i.writer.writeUInt(this.eventDuration,32),i.writer.writeUInt(this.id,32),i.concat(mt.from(this.data))}}(Cl);r(),r(),r();var Ty=function(){function t(){this.boxes=[]}return t.prototype.serialize=function(){for(var t=new xp,i=0,s=this.boxes;i<s.length;i++){var e=s[i];t.concat(e.serialize())}return t.toRangedBuffer()},t}();function ky(t,i){return function(s){var e=function(t,i){for(var s=t.data,e=t.cursor;e.offset<s.byteLength;){var n=Yp(s,e);if(!n.complete)return;if(Ls(n.box,i))return n.box}}(new zp(Xp(s),new Hp),t);if(!e)throw new m("".concat(t," box not found"));return i(e)}}var Ey=ky("moov",Jw),Ry=ky("sidx",function(t){var i,s,e=t.data,n=Kp(e.nextUint32()),r=n.version,h=n.flags,o=e.nextUint32(),a=e.nextUint32();0===r?(i=e.nextUint32(),s=e.nextUint32()):(i=e.nextUint64(),s=e.nextUint64()),e.skip(2);for(var u=e.nextUint16(),c=[],d=0;d<u;d++){var l=new W(mt.from(e.nextUint8Array(12))),f=l.readBit(),v=l.readUInt(31),_=l.readUInt(32),g=Boolean(l.readBit()),m=l.readUInt(3),p=l.readUInt(28);c.push({referenceType:f,referencedSize:v,subsegmentDuration:_,startsWithSap:g,sapType:m,sapDeltaTime:p})}return 0===r?new vy(o,a,i,s,c,h.raw):new _y(o,a,i,s,c,h.raw)}),xy=ky("moof",uy),Iy=ky("pssh",Bw);function Py(t){return function(t){for(var i=new Ty,s=0,e=ao(t);s<e.length;s++){var n=e[s];Ls(n,"ftyp")?i.boxes.push(lw(n)):Ls(n,"styp")?i.boxes.push(my(n)):Ls(n,"moov")?i.boxes.push(Jw(n)):Ls(n,"moof")?i.boxes.push(uy(n)):Ls(n,"mdat")?i.boxes.push(Aw(n)):i.boxes.push(Li(n))}return i}(new zp(Xp(t),new Hp))}var Cy=class extends fr{get hS(){return this.Zd}get oS(){return this.aS.expiration}get Sy(){return this.uS}get cS(){return this.aS.sessionId}Xs(){if(this.dS)return this.Zd;const t=[];return t.push(Promise.resolve(this.aS.close())),t.push(hi(1e3)),this.lS.$g(Promise.race(t).catch(Ny)),this.dS=!0,this.Zd}fS(t,i,s){if(As.s_){const t=Iy(Rs(i));if(1===t.version){i=new Nw(t.systemId,t.data).serialize().join()}}return Promise.resolve(this.aS.generateRequest(t,i)).catch(Ny)}Un(t){return Promise.resolve(this.aS.load(t)).catch(Ny)}vS(){return Promise.resolve(this.aS.remove()).catch(Ny)}er(t){return Promise.resolve(this.aS.update(t)).catch(Ny)}_S(){this.uS.Zy(),this.aS.keyStatuses.forEach((t,i)=>{this.gS(i,t)}),this.So(new mm(this.uS))}gS(t,i){if("string"==typeof t){const s=t;t=i,i=s}const s=Rs(t);if(this.mS===Og&&16===s.byteLength&&(As.v_||As.dg)){const t=xh(s),i=t.getUint32(0,!0),e=t.getUint16(4,!0),n=t.getUint16(6,!0);t.setUint32(0,i,!1),t.setUint16(4,e,!1),t.setUint16(6,n,!1)}this.mS===Og&&"status-pending"===i&&(i="usable"),this.uS.Gy(s,i)}constructor(t,i){super(),this.aS=void 0,this.mS=void 0,this.uS=void 0,this.dS=void 0,this.Zd=void 0,this.lS=void 0,this.pS=void 0,this.wS=void 0,this.yS=void 0,this.aS=t,this.mS=i,this.dS=!1,this.pS=()=>{this._S()},this.wS=t=>{this.So(new zh(this,t.messageType,wp(this.mS,t.message)))},this.yS=()=>{this.dS=!0,this.uS.Vy>0&&(this.uS.Zy(),this.So(new mm(this.uS))),this.aS.removeEventListener("keystatuseschange",this.pS),this.aS.removeEventListener("message",this.wS)},this.aS.addEventListener("keystatuseschange",this.pS),this.aS.addEventListener("message",this.wS),this.uS=new mp;const s=[];this.aS.closed&&s.push(Promise.resolve(this.aS.closed)),this.lS=new gs,s.push(this.lS.Yy),this.Zd=Promise.race(s).then(this.yS,this.yS),this._S()}};function Ny(t){let i;if(t.message){const s=t.message.match(/^SystemCode:0x([0-9a-fA-F]+)$/);s&&(i=0|x(s[1],16))}throw new rn(t.message,void 0,i,t)}var Dy=class{async bS(t){return new Cy(this.SS.createSession(t),this.TS)}kS(t){return Promise.resolve(this.SS.setServerCertificate(t))}_n(t){return Promise.resolve(t.setMediaKeys(this.SS))}ES(t){return Promise.resolve(t.setMediaKeys(null))}hr(){return Promise.resolve()}constructor(t,i,s){this.SS=void 0,this.TS=void 0,this.Cd=void 0,this.SS=t,this.TS=i,this.Cd=s}},By=class{get TS(){return this.RS.keySystem}async xS(){const t=await this.RS.createMediaKeys();return new Dy(t,this.mS,this.IS)}PS(){return this.IS}constructor(t,i,s){this.RS=void 0,this.mS=void 0,this.IS=void 0,this.RS=t,this.mS=i,this.IS=s}};r(),r();var My="video/avc",Ly="video/hevc",Oy="video/mp4",Fy="video/mpeg",Vy="video/mpeg2",Wy="video/webm",Uy="video/x-unknown",Gy="audio/mp4",Xy="audio/webm",Zy="image/jpeg",Hy="application/ttml+xml",zy="application/mp4",Yy="text/vtt";function I(t){return Qe(t,"audio/")}function rt(t){return Qe(t,"video/")}function io(t){return Vh(t,zy)||Vh(t,Oy)||Vh(t,Gy)}function Ky(t){return Vh(t,Wy)||Vh(t,Xy)}var qy=class{CS(t){for(const[i,s]of this.NS)if(i.toLowerCase()===t.toLowerCase())return s}constructor(t,i){this.Kp=void 0,this.NS=void 0,this.Kp=t,this.NS=i}};function bl(t){const i=t.trim(),s=i.indexOf(";");if(s<0)return new qy(i,[]);const e=i.substr(0,s).trim(),n=i.substr(s+1).trim(),r=[];let h=0,o=!1;for(let t=0;t<n.length;t++){const i=n[t];if(o||";"!==i)'"'===i&&(o=!o);else{const i=jy(n.substr(h,t));i&&r.push(i),h=t+1}}if(h!==n.length){const t=jy(n.substr(h));t&&r.push(t)}return new qy(e,r)}function jy(t){const i=t.indexOf("=");if(i<0)return;const s=t.substr(0,i).trim();let e=t.substr(i+1).trim();return'"'===e[0]&&(e=e.substring(1,e.length-1)),[s,e]}function Qy(t){const i=t.trim(),s=i.indexOf(";");return s<0?i:i.substr(0,s).trim()}function Jy(t){let i=t;const s=i.match(/^avc1\.(\d+)\.(\d+)$/);if(s){const t=Number(s[1]),e=Number(s[2]);i="avc1."+zo((t<<16|e).toString(16),6,"0")}return i}function $y(t,i,s,e){let n=!1;if(e.persistentState&&"optional"!==e.persistentState)return;if(e.distinctiveIdentifier&&"optional"!==e.distinctiveIdentifier)return;const r={audioCapabilities:[],videoCapabilities:[],persistentState:e.persistentState||"optional",distinctiveIdentifier:e.distinctiveIdentifier||"optional",initDataTypes:e.initDataTypes,sessionTypes:["temporary"],label:e.label,DS:e.DS};let h=!1;if(e.audioCapabilities){const o=e.audioCapabilities.filter(t=>Boolean(t.contentType));o.length&&(r.audioCapabilities=o.filter(e=>tb(t,i,s,e)),h=!0,r.audioCapabilities.length&&(n=!0))}if(e.videoCapabilities){const o=e.videoCapabilities.filter(t=>Boolean(t.contentType));o.length&&(r.videoCapabilities=o.filter(e=>tb(t,i,s,e)),h=!0,r.videoCapabilities.length&&(n=!0))}return h||(n=t(s,"video/mp4")),n?r:void 0}function tb(t,i,s,e){if(!e.contentType)return!1;if(e.encryptionScheme&&!Ft(i,e.encryptionScheme))return!1;if(e.robustness)return!1;return t(s,Qy(e.contentType))}function ib(t){if(t.videoCapabilities)for(const i of t.videoCapabilities)if(i.contentType)return i.contentType;if(t.audioCapabilities)for(const i of t.audioCapabilities)if(i.contentType)return i.contentType}function sb(t){const i=[];for(const s of t)s.encryptionScheme&&i.push({contentType:s.contentType,robustness:s.robustness});return t.concat(i)}function eb(t){return!(!t.audioCapabilities||!t.audioCapabilities.some(nb))||!(!t.videoCapabilities||!t.videoCapabilities.some(nb))}function nb(t){return!t.robustness}function rb(t,i){const s=[];for(const e of t)e.robustness?s.push(e):s.push(Jr({},e,{robustness:i}));return s}var hb=class{async ew(t,i){i=i.filter(t=>!t.DS);for(const t of i)t.audioCapabilities&&(t.audioCapabilities=sb(t.audioCapabilities)),t.videoCapabilities&&(t.videoCapabilities=sb(t.videoCapabilities));if(t===Wg&&i.some(eb)){const s=i.map(t=>function(t,i){return Jr({},t,{videoCapabilities:t.videoCapabilities?rb(t.videoCapabilities,i):void 0,audioCapabilities:t.audioCapabilities?rb(t.audioCapabilities,i):void 0})}(t,"SW_SECURE_CRYPTO"));try{const i=await od.requestMediaKeySystemAccess(t,s),e=i.getConfiguration();return new By(i,t,e)}catch(t){}}const s=await od.requestMediaKeySystemAccess(t,i),e=s.getConfiguration();return new By(s,t,e)}static MS(){return Fc()}};r(),r(),r(),r();var ob=class extends fr{get cS(){return this.LS&&this.LS.sessionId||""}get oS(){return NaN}get hS(){return this.FS.Yy}get Sy(){return this.VS}async fS(t,i,s){this.WS(),this.US=new gs,this.bS(Rs(i),s),await this.US.Yy}bS(t,i){if(!t)throw new g("Expected initData to be defined but was "+t+".");const s=i&&i.playready&&i.playready.GS;let e;return e=i?this.XS.createSession(this.ZS,t,s):this.XS.createSession(this.ZS,t),e.addEventListener("mskeyclose",this.yS),e.addEventListener("mskeymessage",this.HS),e.addEventListener("mskeyerror",this.Ts),e.addEventListener("mskeyadded",this.zS),this.LS=e,this.YS("status-pending"),e}async Un(t){return this.WS(),!0}async er(t){if(this.KS=new gs,this.WS(),!this.LS)return Promise.resolve();const i=Rs(t);if(0===i.byteLength)throw new g("Cannot call update with an empty response.");this.LS.update(i),await this.KS.Yy}Xs(){return!this.dS&&this.LS&&(this.dS=!0,this.LS.close()),this.FS.Yy}async vS(){this.WS()}WS(){if(this.dS)throw new g("Already closing or closed.")}YS(t){this.VS.Zy(),this.VS.Gy(qc,t),this.So(new mm(this.VS))}constructor(t,i){super(),this.XS=void 0,this.ZS=void 0,this.dS=void 0,this.FS=void 0,this.KS=void 0,this.US=void 0,this.VS=void 0,this.LS=void 0,this.yS=void 0,this.HS=void 0,this.Ts=void 0,this.zS=void 0,this.XS=t,this.ZS=i,this.dS=!1,this.KS=void 0,this.US=void 0,this.LS=void 0,this.yS=()=>{this.dS=!0,this.FS.Hy(void 0),this.LS&&(this.LS.removeEventListener("mskeyclose",this.yS),this.LS.removeEventListener("mskeymessage",this.HS),this.LS.removeEventListener("mskeyerror",this.Ts),this.LS.removeEventListener("mskeyadded",this.zS))},this.HS=t=>{this.US&&(this.US.Hy(void 0),this.US=void 0),this.So(new zh(this,"license-request",tc(t.message).buffer,t.destinationURL||void 0))},this.Ts=()=>{const t=this.LS&&this.LS.error;if(!t)return;const i=new rn("Unknown CDM error",t.code,t.systemCode);if(this.US)this.US.zy(i),this.US=void 0;else if(this.KS)this.KS.zy(i),this.KS=void 0;else switch(i.Ky){case MSMediaKeyError.MS_MEDIA_KEYERR_OUTPUT:case MSMediaKeyError.MS_MEDIA_KEYERR_HARDWARECHANGE:this.YS("output-not-allowed");break;default:this.YS("internal-error")}},this.zS=()=>{this.US&&(this.YS("usable"),this.US.Hy(void 0),this.US=void 0),this.KS&&(this.YS("usable"),this.KS.Hy(void 0),this.KS=void 0)},this.FS=new gs,this.VS=new mp}},ab=class{async bS(t){return new ob(this.XS,this.ZS)}kS(t){return Promise.resolve(!1)}_n(t){const i=()=>{t.msSetMediaKeys(this.XS),t.removeEventListener("loadedmetadata",i)};return t.readyState>=1?t.msSetMediaKeys(this.XS):t.addEventListener("loadedmetadata",i),Promise.resolve()}ES(t){return Promise.resolve()}hr(){return Promise.resolve()}constructor(t,i,s){this.XS=void 0,this.TS=void 0,this.Cd=void 0,this.ZS=void 0,this.XS=t,this.TS=i,this.Cd=s;const e=ib(s)||"video/mp4";this.ZS=Qy(e)}},ub=class{get TS(){return this.mS}PS(){return this.qS}xS(){const t=new s.MSMediaKeys(this.mS);return Promise.resolve(new ab(t,this.mS,this.qS))}constructor(t,i){this.mS=void 0,this.qS=void 0,this.mS=t,this.qS=i}},cb=class{ew(t,i){try{return Promise.resolve(function(t,i){if(!db())throw new g("Unsupported key system "+t);for(const s of i){const i=$y(lb,_m,t,s);if(i)return new ub(t,i)}throw new g("Unsupported key system configuration for "+t)}(t,i))}catch(t){return Promise.reject(t)}}static MS(){return db()}};function db(){return void 0!==s.MSMediaKeys&&"function"==typeof s.MSMediaKeys.isTypeSupported}function lb(t,i){return s.MSMediaKeys.isTypeSupported(t,i)}r(),r(),r(),r();var fb=class extends fr{get cS(){return this.jS?this.jS.sessionId:""}get oS(){return NaN}get hS(){return this.FS.Yy}get Sy(){return this.VS}fS(t,i,s){const e=s&&s.fairplay&&s.fairplay.QS;if(!e)throw new g("Expected FairPlay contentId to be defined but was "+e+".");const n=function(t,i,s){const e=Vc(t),n=2*e.length,r=2*i.length,h=new ArrayBuffer(4+n+4+r+4+s.byteLength),o=new DataView(h),a=new J;return Ym(o,a,n,!0),sp(o,a,e,!0),Ym(o,a,r,!0),sp(o,a,i,!0),Ym(o,a,s.byteLength,!0),Gm(o,a,s),new j(h)}(Rs(i),e,this.JS);return this.jS=this.$S.createSession(this.ZS,n),this.jS.addEventListener("webkitkeymessage",this.HS,!1),this.jS.addEventListener("webkitkeyadded",this.zS,!1),this.jS.addEventListener("webkitkeyerror",this.Ts,!1),this.YS("status-pending"),this.tT.Hy(this.jS),this.tT=new gs,Promise.resolve()}Un(t){return Promise.resolve(!0)}async er(t){const i=Rs(t);if(0===i.byteLength)throw new g("Cannot call update with an empty response.");this.iT=new gs;(this.jS||await this.tT.Yy).update(i),await this.iT.Yy}Xs(){var t;const i=this.jS;return i&&(i.removeEventListener("webkitkeymessage",this.HS,!1),i.removeEventListener("webkitkeyadded",this.zS,!1),i.removeEventListener("webkitkeyerror",this.Ts,!1),i.close()),this.tT.Jg(),null==(t=this.iT)||t.Jg(),this.FS.Hy(void 0),this.FS.Yy}vS(){return Promise.resolve(void 0)}YS(t){this.VS.Zy(),this.VS.Gy(qc,t),this.So(new mm(this.VS))}constructor(t,i,s){super(),this.$S=void 0,this.ZS=void 0,this.JS=void 0,this.FS=void 0,this.iT=void 0,this.VS=void 0,this.jS=void 0,this.tT=void 0,this.Ts=void 0,this.HS=void 0,this.zS=void 0,this.$S=t,this.ZS=i,this.JS=s,this.FS=new gs,this.iT=void 0,this.VS=new mp,this.jS=void 0,this.tT=new gs,this.Ts=()=>{const t=this.jS&&this.jS.error;if(!t)return;const i=new rn("Unknown CDM error",t.code,t.systemCode);this.iT?(this.iT.zy(i),this.iT=void 0):i.Ky===WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT?this.YS("output-not-allowed"):this.YS("internal-error"),this.So(new wm)},this.HS=t=>{this.So(new zh(this,"license-request",tc(t.message).buffer,"this is a test string"===t.destinationURL?void 0:t.destinationURL))},this.zS=()=>{this.iT&&(this.iT.Hy(void 0),this.iT=void 0),this.YS("usable")}}};r();var Wt=class extends rl{get name(){return"THEOplayerError"}get category(){return Je.fromCode(this.code)}constructor(t,i,s){super(i,s),this.code=void 0,this.code=t}};function vb(t,i){return t instanceof Wt?t:t instanceof m?new Wt(i,t.message,t):new Wt(i,String(t))}var _b=class{getInternalMediaKeys(){return this.$S}async bS(t){if(!this.JS)throw new Wt(Ne.CONTENT_PROTECTION_CERTIFICATE_ERROR,"No valid certificate was provided.");return new fb(this.$S,this.ZS,this.JS)}kS(t){return this.JS=Rs(t),Promise.resolve(!0)}_n(t){return t.webkitSetMediaKeys(this.$S),Promise.resolve()}ES(t){return t.webkitSetMediaKeys(null),Promise.resolve()}hr(){return Promise.resolve()}constructor(t,i,s){this.$S=void 0,this.TS=void 0,this.Cd=void 0,this.ZS=void 0,this.JS=void 0,this.$S=t,this.TS=i,this.Cd=s,this.JS=void 0;const e=ib(s)||"video/mp4";this.ZS=Qy(e)}},gb=class{get TS(){return this.mS}PS(){return this.qS}xS(){const t=new s.WebKitMediaKeys(this.mS);return Promise.resolve(new _b(t,this.mS,this.qS))}constructor(t,i){this.mS=void 0,this.qS=void 0,this.mS=t,this.qS=i}},mb=class{ew(t,i){try{return Promise.resolve(function(t,i){if(t!==Yg)throw new g(t+" is not supported with webkit-prefixed Encrypted Media Extensions.");if(!pb())throw new g("Unsupported key system "+t);for(const s of i){const i=$y(wb,gm,t,s);if(i)return new gb(t,i)}throw new g("Unsupported key system configuration for "+t)}(t,i))}catch(t){return Promise.reject(t)}}static MS(){return pb()}};function pb(){return void 0!==s.WebKitMediaKeys&&"function"==typeof s.WebKitMediaKeys.isTypeSupported}function wb(t,i){return s.WebKitMediaKeys.isTypeSupported(t,i)}r();var yb=class{async ew(t,i){for(const s of this.sT)try{return await s.ew(t,i)}catch(t){}throw new g("Unsupported key system configuration for "+t)}constructor(t){this.sT=void 0,this.sT=t}};r(),r(),r(),r(),r();var Fu=class{Zo(t,i){return new Promise(s=>{const e=ui.nm([this.eT.jg,i]),n=()=>{e.Zg()};this.nT.push(()=>{const i=bb(t,e.jg);return s(i),i.then(n,n)}),this.rT||(this.rT=this.hT())})}Jg(){return this.oT(!0)}kn(){return this.aT=void 0,this.oT(!1)}oT(t){const i=this.rT;return this.eT.Jg(),t&&(this.eT=new ui),Promise.resolve(i)}constructor(t){this.nT=[],this.rT=void 0,this.eT=new ui,this.aT=void 0,this.hT=()=>{if(0===this.nT.length)return this.aT?bb(this.aT,this.eT.jg).then(this.uT,this.uT):this.uT();return this.nT.shift()().then(this.hT)},this.uT=()=>{if(0!==this.nT.length)return this.hT();this.rT=void 0},this.aT=t}};function bb(t,i){return new Promise(s=>s(t(i)))}var Ab=new Fu,Sb=class extends fr{cT(){this.iT&&(this.YS("usable"),this.iT.Hy(void 0),this.iT=void 0)}dT(t){const i=new rn("Unknown CDM error",t.errorCode,t.systemCode);this.iT?(this.iT.zy(i),this.iT=void 0):this.US?(this.US.zy(i),this.US=void 0):i.Ky===WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT?this.YS("output-restricted"):1===i.qy?this.YS("expired"):this.YS("internal-error")}lT(t){0!==t.message.byteLength?(this.US&&(this.US.Hy(void 0),this.US=void 0),this.So(new zh(this,"license-request",wp(this.mS,tc(t.message).buffer),t.defaultURL||void 0))):this.US&&(this.US.zy("Empty key message"),this.US=void 0)}fT(t){this.vT||(this.vT=t,this._T.Hy(t))}get Sy(){return this.gT}get cS(){return this.mT}set cS(t){this.mT=t}get hS(){return this.FS.Yy}get oS(){return NaN}async Xs(){this.throwIfClosed(),this.iT&&(this.iT.zy(void 0),this.iT=void 0),this.ub=!0,this.FS.Hy(void 0)}async fS(t,i){this.throwIfClosed(),this.US=new gs,this.pT=Rs(i);(this.vT||await this._T.Yy).webkitGenerateKeyRequest(this.mS,this.pT),await this.US.Yy}async Un(t){return this.throwIfClosed(),!1}async vS(){this.throwIfClosed()}async er(t){if(this.throwIfClosed(),this.iT=new gs,As.S_||As.w_)return Ab.Zo(async()=>{await this.doUpdate(t)});await this.doUpdate(t)}async doUpdate(t){if(void 0===this.iT)return;(this.vT||await this._T.Yy).webkitAddKey(this.mS,Rs(t),this.pT,this.cS),await this.iT.Yy,As.w_&&await hi(500)}throwIfClosed(){if(this.ub)throw new g("Already closing or closed.")}YS(t){this.gT.Zy(),this.gT.Gy(qc,t),this.So(new mm(this.gT))}async wT(){const t=this.vT||await this._T.Yy;if(t.webkitCancelKeyRequest)try{t.webkitCancelKeyRequest(this.mS,this.mT)}catch(t){}finally{await hi(500)}}constructor(t){super(),this.mS=void 0,this.US=void 0,this.iT=void 0,this.FS=void 0,this.ub=void 0,this.pT=void 0,this.mT=void 0,this.gT=void 0,this.vT=void 0,this._T=void 0,this.mS=t,this.US=void 0,this.iT=void 0,this.ub=!1,this.pT=void 0,this.vT=void 0,this.FS=new gs,this.mT="",this._T=new gs,this.gT=new mp}},Tb=class{_n(t){return this.vT=t,this.vT.addEventListener("webkitkeyadded",this.zS),this.vT.addEventListener("webkitkeyerror",this.yT),this.vT.addEventListener("webkitkeymessage",this.bT),this.AT.forEach((i,s)=>i.fT(t)),this.ST.forEach(i=>i.fT(t)),Promise.resolve()}ES(t){return t.removeEventListener("webkitkeyadded",this.zS),t.removeEventListener("webkitkeyerror",this.yT),t.removeEventListener("webkitkeymessage",this.bT),this.vT=void 0,Promise.resolve()}async hr(){const t=this.AT.entries();let i=t.next();for(;!i.done;)await i.value[1].wT(),i=t.next();this.AT.clear()}async bS(t,i,s){const e=new Sb(this.TS);return this.vT&&e.fT(this.vT),this.ST.push(e),e}kS(t){return Promise.resolve(!1)}TT(t){if(!t)return;let i=this.AT.get(t);return i||(i=this.ST.shift(),i?(i.cS=t,this.AT.set(t,i),i):void 0)}constructor(t,i){this.TS=void 0,this.Cd=void 0,this.vT=void 0,this.AT=void 0,this.ST=void 0,this.zS=void 0,this.yT=void 0,this.bT=void 0,this.TS=t,this.Cd=i,this.vT=void 0,this.AT=Se(),this.ST=[],this.zS=t=>{const i=this.TT(t.sessionId);i&&i.cT()},this.yT=t=>{const i=this.TT(t.sessionId);i&&i.dT(t)},this.bT=t=>{const i=this.TT(t.sessionId);i&&i.lT(t)}}},kb=class{xS(){return Promise.resolve(new Tb(this.TS,this.kT))}PS(){return this.kT}constructor(t,i){this.TS=void 0,this.kT=void 0,this.TS=t,this.kT=i}},Eb=class{ew(t,i){try{return Promise.resolve(function(t,i){if(!Eb.MS())throw new g("Unsupported key system "+t);for(const s of i){const i=$y(Rb,_m,t,s);if(i)return new kb(t,i)}throw new g("Unsupported key system configuration for "+t)}(t,i))}catch(t){return Promise.reject(t)}}static MS(){return dm()}};function Rb(t,i){const s=mr();return Boolean(s&&s.canPlayType&&""!==s.canPlayType(i,t))}r();var xb,Ib=class{ew(t,i){return t===Wg||t===Og?Promise.resolve(void 0):Promise.reject(new m("DRM configuration not supported"))}};function Pb(){return xb||(xb=function(){const t=[];mb.MS()&&t.push(new mb);hb.MS()&&t.push(new hb);cb.MS()&&t.push(new cb);Eb.MS()&&t.push(new Eb);As.k_&&t.push(new Ib);return new yb(t)}()),xb}r(),r();var Cb=class{Zy(t){this.ET.delete(t)}xT(){this.ET.clear()}Uy(t){return this.ET.get(t)}Gy(t,i){this.ET.set(t,i)}constructor(){this.ET=Se()}},Nb=class t{static IT(){return t.Bg||(t.Bg=Db.MS()?new Db:new Cb),t.Bg}static Zy(i){t.IT().Zy(i)}static xT(){t.IT().xT()}static Uy(i){return t.IT().Uy(i)}static Gy(i,s){t.IT().Gy(i,s)}};Nb.Bg=void 0;var Db=class extends Nb{static MS(){const t="foobar";try{return self.sessionStorage.setItem(t,t),self.sessionStorage.removeItem(t),!0}catch(t){return!1}}Zy(t){self.sessionStorage.removeItem(t)}xT(){self.sessionStorage.clear()}Uy(t){var i;return null!=(i=self.sessionStorage.getItem(t))?i:void 0}Gy(t,i){self.sessionStorage.setItem(t,i)}};r(),r();var Bb=(()=>{const t=self.Blob;if(t)try{new t;return function(t){return(i,s)=>new t(i,s)}(t)}catch(t){}const i=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder;if(i)return function(t){return(i,s)=>{const e=new t;if(i)for(const t of i)e.append(t);return e.getBlob(s&&s.type||"")}}(i)})();function Mb(t,i,s){const e=Bb([i],{type:"application/octet-stream"}),n=URL.createObjectURL(e),r=function(t,i){let s=t;const e=s.indexOf("?");if(e>=0&&(s=s.substr(0,e)),s=s.substr(s.lastIndexOf("/")+1),i){let t=s.indexOf(".");t<0&&(t=s.length),s=s.substr(0,t)+i+s.substr(t)}return s}(t,s),o=h.createElement("a");o.href=n,o.download=r,h.body.appendChild(o),o.click(),h.body.removeChild(o),URL.revokeObjectURL(n)}r();var Lb="default";r(),r(),r(),r();var Bi=function(t){return t.PT="arraybuffer",t.CT="json",t.NT="stream",t.DT="text",t}({});r();var oa=class t{append(t,i){let s=t,e=i;s=Ob(s),e=Fb(e);const n=s.toLowerCase();if(this.Up.hasOwnProperty(n)){const t=this.Up[n],i=t[1];t[1]=i?i+", "+e:e}else this.Up[n]=[s,e]}delete(t){const i=Ob(t).toLowerCase();delete this.Up[i]}get(t){const i=Ob(t).toLowerCase();return this.Up.hasOwnProperty(i)?this.Up[i][1]:null}has(t){const i=Ob(t).toLowerCase();return this.Up.hasOwnProperty(i)}set(t,i){let s=t;s=Ob(s);const e=s.toLowerCase();this.Up[e]=[s,Fb(i)]}forEach(t,i){for(const s in this.Up)this.Up.hasOwnProperty(s)&&t.call(i,this.Up[s][1],s,this)}asList(){const t=[];for(const i in this.Up)if(this.Up.hasOwnProperty(i)){const[s,e]=this.Up[i];t.push([s,e])}return t}BT(){const t={};return this.forEach((i,s)=>{t[s]=i}),t}MT(t){t.forEach((t,i)=>{this.append(i,t)})}LT(t){t.forEach((t,i)=>{this.set(i,t)})}constructor(i){this.Up=void 0,this.Up={},i instanceof t?i.asList().forEach(t=>{let[i,s]=t;this.append(i,s)}):Array.isArray(i)?i.forEach(t=>{let[i,s]=t;this.append(i,s)}):i&&w.getOwnPropertyNames(i).forEach(t=>{this.append(t,i[t])})}};function Ob(t){let i=t;if("string"!=typeof i&&(i=String(i)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(i))throw new g("Invalid character in header field name");return i}function Fb(t){let i=t;return"string"!=typeof i&&(i=String(i)),i}r(),r(),r();var Kh=cr(md());r();var Vb=class extends rl{get name(){return"AggregateError"}constructor(t){super(""+t.join("\n"),t[0]),this.causes=void 0,this.causes=t}},_u=a,Wb=ri(_u.ReadableStream)&&ri(_u.WritableStream)&&ri(_u.TransformStream)&&Kd(_u.ReadableStream.prototype.pipeThrough)&&!av.Mm,jr=Wb?_u.ReadableStream:Kh.ReadableStream,Sa=(Wb?_u.WritableStream:Kh.WritableStream,Wb?_u.TransformStream:Kh.TransformStream),Ub=(Wb&&_u.ByteLengthQueuingStrategy?_u.ByteLengthQueuingStrategy:Kh.ByteLengthQueuingStrategy,Wb&&_u.CountQueuingStrategy?_u.CountQueuingStrategy:Kh.CountQueuingStrategy);function Gb(t){return function(t){return new jr({start(i){for(const s of t)i.enqueue(s);i.close()}})}([t])}function Xb(t){return Gb(function(t){return new j(t)}(t))}function Zb(t,i){return function(t,i){let s=i;const e=t.getReader(),n=new gs,r=()=>{h();const t=new us;e.cancel(t).catch(ol),n.zy(t)},h=()=>{s&&(s.Yg(r),s=void 0)};s&&(s.Ug?r():s.zg(r));const o=[],a=t=>t.done?(h(),Promise.resolve(o)):(o.push(t.value),Promise.resolve(e.read()).then(a));return Promise.resolve(e.read()).then(a).then(t=>{h(),n.Hy(t)},t=>{h(),n.zy(t)}),n.Yy}(t,i).then(t=>xu(t).buffer)}function Hb(t,i){let s=i;const{readable:e,writable:n}=new Sa,r=n.getWriter(),h=()=>{s&&s.Jg()};return r.closed.then(h,h),t.then(t=>(s=void 0,r.releaseLock(),t.pipeTo(n).catch(ol)),t=>(s=void 0,r.releaseLock(),n.abort(t).catch(ol))),e}function zb(t){const{readable:i,writable:s}=new Sa;return t.pipeTo(s,{preventCancel:!0}).catch(i=>{let s;s=he(i)?i[0]===i[1]||hc(i[0])&&hc(i[1])?i[0]:new Vb(i):i,t.cancel(s).catch(ol)}),i.tee()}function Yb(t){return Vc(new j(t))}function Kb(t){return br(t).buffer}r();var qb="text/plain;charset=UTF-8",Vi=class{OT(t){return this.FT(t).then(JSON.parse)}VT(t,i){switch(t){case Bi.PT:return this.WT(i);case Bi.CT:return this.OT(i);case Bi.NT:return this.UT();case Bi.DT:return this.FT(i);default:throw new g}}};function jb(t,i,s){if(t instanceof Vi)return t;if(t instanceof jr)return function(t,i){return new Jb({Kp:0,UT:t,GT:Qb(i)})}(t,s);const e=Qb(s),n=Promise.resolve(t).then(t=>function(t,i){if(t){if("string"==typeof t)return{Kp:Bi.DT,XT:t,GT:i||qb};if(t instanceof ArrayBuffer||zc(t))return{Kp:Bi.PT,XT:rA(t),GT:i};if(Hd(t)||he(t))return{Kp:Bi.CT,XT:t,GT:i};throw new g("Unsupported BodyInit type")}return{Kp:Bi.DT,XT:null,GT:i}}(t,e));return new Jb({Kp:1,Yy:n,ZT:i})}function Qb(t){return(t.get("content-type")||"").toLowerCase()}var Jb=class t extends Vi{get HT(){return this.zT}get YT(){return 0===this.KT.Kp}qT(){return this.jT.Yy}FT(t){return this.QT($b,t)}OT(t){return this.QT(iA,t)}WT(t){return this.QT(eA,t)}UT(){return this.JT(function(t){return 0===t.Kp?t.UT:Hb(t.Yy.then(nA).then(Xb),t.ZT)}(this.KT))}QT(t,i){if(this.zT)return Promise.reject(new g("Already used"));this.zT=!0;const s=t(this.KT,i);return this.jT.$g(s.then(ol)),s}JT(t){if(this.zT)throw new g("Already used");if(t.locked)throw new g("Body stream is locked");this.zT=!0;const i=new Sa,s=Promise.resolve(t.pipeTo(i.writable));return this.jT.$g(s),i.readable}$T(t){this.KT=t,1===t.Kp&&t.Yy.catch(ol)}ek(){if(this.zT)throw new g("Already used");const i=function(t){if(0===t.Kp){const[i,s]=t.UT.tee();return[{Kp:t.Kp,UT:i,GT:t.GT},{Kp:t.Kp,UT:s,GT:t.GT}]}{const[i,s]=t.ZT.im();return[{Kp:t.Kp,Yy:t.Yy,ZT:i},{Kp:t.Kp,Yy:t.Yy,ZT:s}]}}(this.KT),s=i[0],e=i[1];return this.$T(s),new t(e)}constructor(t){super(),this.zT=!1,this.KT=void 0,this.jT=new gs,this.jT.Yy.catch(ol),this.$T(t)}};function $b(t,i){return 0===t.Kp?Zb(t.UT,i).then(Yb):(i&&t.ZT.$g(i),Ce(t.Yy.then(tA),t.ZT))}function tA(t){switch(t.Kp){case Bi.DT:return Promise.resolve(t.XT||"");case Bi.PT:return Promise.resolve(t.XT).then(Yb);case Bi.CT:return Promise.resolve(t.XT).then(JSON.stringify)}}function iA(t,i){return 0===t.Kp?$b(t,i).then(JSON.parse):(i&&t.ZT.$g(i),Ce(t.Yy.then(sA),t.ZT))}function sA(t){return t.Kp===Bi.CT?Promise.resolve(t.XT):tA(t).then(JSON.parse)}function eA(t,i){return 0===t.Kp?Zb(t.UT,i):(i&&t.ZT.$g(i),Ce(t.Yy.then(nA),t.ZT))}function nA(t){switch(t.Kp){case Bi.PT:return Promise.resolve(t.XT);case Bi.DT:case Bi.CT:return tA(t).then(Kb)}}function rA(t){return t instanceof ArrayBuffer?t:tc(re(t)).buffer}var hA=class extends Vi{get HT(){return this.nk.HT}get YT(){return this.nk.YT}qT(){return this.nk.qT()}FT(t){return this.nk.FT(t)}OT(t){return this.nk.OT(t)}WT(t){return this.nk.WT(t)}UT(t){return this.nk.UT(t)}ek(){return this.nk.ek()}constructor(t){super(),this.nk=void 0,this.nk=t}};function Mr(t){return t.rk>=200&&t.rk<=299||304===t.rk}var oA=class t extends hA{hk(t){return this.VT(this.ck,t)}My(){return new t({hk:this.ek(),dk:this.dk},this)}constructor(t,i){let s,e,n,r,h;i?(s=i.lk,e=i.ck,n=i.rk,r=i.fk,h=i.vk):(s=[],e=Bi.DT,n=200,r="OK",h=!1);const o=t.dk,a=new oa(t.lk||s),u=t.ck||e,c=t._k||(i&&i.dk===o?i._k:o.Yu),d=i?i.nk:null;super(jb(void 0!==t.hk?t.hk:d,t.ZT||new ui,a)),this.lk=void 0,this.dk=void 0,this._k=void 0,this.ck=void 0,this.rk=void 0,this.fk=void 0,this.vk=void 0,this.lk=a,this.dk=o,this._k=c,this.ck=u,this.rk=void 0!==t.rk?t.rk:n,this.fk=void 0!==t.fk?String(t.fk):r,this.vk=t.vk||h}};r();var ci=function(t){return t.DELETE="DELETE",t.GET="GET",t.HEAD="HEAD",t.OPTIONS="OPTIONS",t.POST="POST",t.PUT="PUT",t}({}),Ic=function(t){return t.gk="",t.pk="manifest",t.wk="segment",t.yk="preload-hint",t.bk="content-protection",t}({}),vs=function(t){return t.gk="",t.Ak="initialization-segment",t.Sk="fairplay-license",t.Tk="fairplay-certificate",t.Ek="widevine-license",t.Rk="widevine-certificate",t.xk="playready-license",t.Ik="clearkey-license",t.Pk="aes128-key",t}({}),aA=function(t){return t.gk="",t.Ck="audio",t.Nk="video",t.DT="text",t.Dk="image",t}({}),uA=function(t){return t.Bk="same-origin",t.Mk="no-cors",t.Lk="cors",t.Ok="navigate",t}({}),F=class{constructor(t,i){this.XT=void 0,this.lk=void 0,this.Fk=void 0,this.ck=void 0,this.Vk=void 0,this.Wk=void 0,this.jg=void 0,this.Kp=void 0,this.Uk=void 0,this.Gk=void 0,this.Yu=void 0,this.Xk=void 0,this.Zk=void 0,this.Hk=void 0,this.zk=void 0,this.Yk=void 0;const s=t.Yu;let e,n,r,h,o,a,u,c,d,l,f,v,_,g,m;var p,w,y;i?(e=i.XT,n=i.lk,r=i.Fk,h=i.ck,o=i.Vk,a=i.Wk,u=i.jg,c=i.Kp,d=i.Uk,l=i.Gk,f=i.Xk,v=i.Zk,_=i.Hk,g=i.zk,m=i.Yk):(e=null,n={},r="GET",h=Bi.DT,o=0,a=0,c="",d="",l="",f=!1,_=void 0,g=!1,m=void 0),this.Yu=s,this.XT=t.XT||e,this.lk=new oa(t.lk||n),this.Fk=t.Fk||r,this.ck=t.ck||h,this.Vk=void 0!==t.Vk?Number(t.Vk)||0:o,this.Wk=void 0!==t.Wk?Number(t.Wk)||0:a,this.jg=t.jg||u||(new ui).jg,this.Kp=t.Kp||c,this.Uk=t.Uk||d,this.Gk=t.Gk||l,this.Xk=void 0!==t.Xk?Boolean(t.Xk):f,this.Zk=t.Zk||v,this.Hk=null!=(p=t.Hk)?p:_,this.zk=null!=(w=t.zk)?w:g,this.Yk=null!=(y=t.Yk)?y:m}},cA=class{dk(t){const i=function(t){return new oA({hk:null,lk:{},dk:t,_k:t.Yu,ck:t.ck,rk:0,fk:d.Zw})}(new F(t));return Promise.resolve(i)}Kk(t){}kn(){}};var Pr=class t{static get qk(){return t.jk||(t.jk=new t(new cA)),t.jk}dk(t){const i=this.Qk(t);return this.Jk.dk(i)}Kk(t){return this.Jk.Kk(this.$k(t))}Qk(i){let s=new F(i);if(!this.tE){const i=t.iE(s.Yu);s=new F({Yu:i},s)}return s}$k(i){let s=i.Yu;return this.tE||(s=t.iE(s)),{Yu:s,XT:i.XT}}static iE(t){return Zd.Dp&&Qe(t,"http://")?t.replace(":","s:"):t}kn(){this.Jk.kn()}constructor(t,i=!0){this.Jk=void 0,this.tE=void 0,this.Jk=t,this.tE=i}};function dA(t,i){const s=Zd.Dh(t);return lA(s,i),s.toString()}function lA(t,i){for(const s of w.keys(i))t.searchParams.set(s,i[s])}function ie(t,i){let s=Zd.Rp(t);return i&&!sm(s,"/")&&(s+="/"),s}Pr.jk=void 0,r(),r(),r();var fA=/cache:(.+)?(?=&|$)/;function vA(t){if(!Qe(t,"http://webcache.googleusercontent.com/search?q=cache:"))return"";const i=Zd.Dh(t).search.match(fA);return i&&i.length>1?i[1]:""}function _A(t){return Zd.Dh(".",t)}r(),r();var gA=function(t){return t.sE="HttpOpenError",t.eE="HttpResponseError",t.nE="HttpTimeoutError",t}({}),mA=class extends rl{get dk(){return this.rE}constructor(t,i,s){super(i,s),this.rE=void 0,this.rE=t}},pA=class extends mA{get name(){return gA.sE}constructor(t,i){super(t,"Error while opening "+t.Yu+".",i)}};r();var xe=class extends mA{get name(){return gA.eE}get hE(){return this.oE}constructor(t,i,s){super(t.dk,null!=s?s:function(t){return"Error while loading "+t.dk.Yu+", status code "+t.rk}(t),i),this.oE=void 0,this.oE=t}};r();var Qi=class extends mA{get name(){return gA.nE}constructor(t,i){super(t,function(t){return"Request for "+t.Yu+" timed out after "+t.Vk+" seconds."}(t),i)}};r();var wA=self.fetch,yA=self.Request,bA=self.Response,AA=self.Headers,SA=self.ReadableStream,TA=self.AbortSignal,kA=self.AbortController,EA=Eu(()=>{try{return Kd(wA)&&ri(yA)&&ri(bA)&&ri(AA)&&"forEach"in AA.prototype&&Sg()}catch(t){return!1}}),RA=["http:","https:"];var xA=Eu(()=>{try{return EA()&&ri(TA)&&ri(kA)&&"signal"in yA.prototype}catch(t){return!1}}),IA=Eu(()=>{try{return EA()&&ri(SA)&&"body"in bA.prototype&&!As.s_}catch(t){return!1}});function tt(t){return t instanceof mA}function PA(t){return t instanceof xe}function CA(t){return t instanceof Qi}function NA(t,i){const s=t.lk.has("content-length")?Number(t.lk.get("content-length")):void 0;let e;return e=t.YT?function(t,i,s){return t.pipeThrough(new Sa(new DA(i,s)))}(t.UT(),i,s):async function(t,i,s){await Promise.resolve(),i(0,s);const e=await t,n=e.byteLength;return i(n,null!=s?s:n),e}(t.WT(),i,s),new oA({hk:e,dk:t.dk},t)}r(),r();var DA=class{transform(t,i){this.aE+=t.byteLength,this.uE(this.aE,this.cE),i.enqueue(t)}flush(t){var i;this.uE(this.aE,null!=(i=this.cE)?i:this.aE)}constructor(t,i){this.uE=void 0,this.cE=void 0,this.aE=void 0,this.uE=t,this.cE=i,this.aE=0}};var BA=class{async dE(){const t=this.rE;let i,s;t.Vk&&(this.lE=u(()=>{this.fE=!0,this.eT.Jg()},t.Vk),this.eT.jg.Kg(()=>{c(this.lE)}));try{i=wA(t.Yu,{method:t.Fk,headers:t.lk.BT(),body:t.XT,credentials:t.Xk?"include":"same-origin",signal:OA(this.eT.jg),mode:t.Hk,keepalive:t.Yk})}catch(i){throw new pA(t,i)}try{s=await i}catch(t){const i=this.vE(t);throw hc(i)&&this.eT.Jg(),i}const e=s.url||t.Yu,n=0===s.status&&"file:"===function(t){return Zd.Dh(t).protocol}(e)?200:s.status,r=new MA(this,s,this.eT);let h=new oA({hk:r,dk:t,ck:t.ck,lk:FA(s.headers),rk:n,fk:s.statusText,_k:e});if(!Mr(h))throw new xe(h);return t.Zk&&(h=NA(h,t.Zk)),h}vE(t){return tt(t)?t:hc(t)?this.fE?new Qi(this.rE):new us(t.message,t):this.oE?new xe(this.oE,t):new pA(this.rE,t)}constructor(t){this.hE=void 0,this.rE=void 0,this.eT=new ui,this.oE=void 0,this.lE=0,this.fE=!1,this.rE=t,this.eT.$g(t.jg),this.hE=this.dE()}},MA=class t extends Vi{get HT(){return this._E.bodyUsed}get YT(){return Y(this._E.body)}qT(){return this.jT.Yy}FT(t){return this.QT(this._E.text(),t)}WT(t){return this.QT(this._E.arrayBuffer(),t)}UT(){const t=this._E.body;return t?this.JT(t):Hb(this.WT().then(Xb),this.eT)}ek(){const i=this._E.clone(),[s,e]=this.eT.im();return this.eT=s,new t(this.gE,i,e)}QT(t,i){i&&this.eT.$g(i);let s=$s(Promise.resolve(t),this.eT.jg).catch(t=>{throw this.gE.vE(t)});return s=Ce(s,this.eT),this.jT.$g(s.then(ol)),s}JT(t){return new jr(new VA(t,t=>this.gE.vE(t),this.eT,this.jT),{highWaterMark:0})}constructor(t,i,s){super(),this.gE=void 0,this._E=void 0,this.eT=void 0,this.jT=new gs,this.gE=t,this._E=i,this.eT=s,this.jT.Yy.catch(ol)}},LA="abort";function OA(t){if(!xA())return;const i=new kA;if(t.Ug)i.abort();else if(!t.Gg){const s=()=>{e(),i.abort()},e=()=>{i.signal.removeEventListener(LA,s),t.Yg(s),t.qg(e)};i.signal.addEventListener(LA,s),t.zg(s),t.Kg(e)}return i.signal}function FA(t){if(function(t){return Nc(t)&&"function"==typeof t.forEach}(t)){const i=new oa;return t.forEach((t,s)=>{Array.isArray(t)&&2===t.length?i.append(t[0],t[1]):i.append(s,t)}),i}return new oa(t)}var VA=class{start(t){this.Gd=this.mE.getReader()}async pull(t){let i;try{i=await $s(this.Gd.read(),this.eT.jg)}catch(i){const s=this.pE(i);return this.jT.zy(s),this.eT.Jg(),this.Gd.cancel(s).catch(ol),void t.error(s)}i.done?(this.jT.Hy(),this.eT.Jg(),t.close()):t.enqueue(i.value)}cancel(t){return this.eT.Jg(),this.jT.zy(t),this.Gd.cancel(t)}constructor(t,i,s,e){this.mE=void 0,this.pE=void 0,this.eT=void 0,this.jT=void 0,this.Gd=void 0,this.mE=t,this.pE=i,this.eT=s,this.jT=e}};r();var WA=class{get hE(){return this.wE.Yy}dE(){const t=this.yE,i=this.rE;if(i.jg.Ug)return this.bE();t.onreadystatechange=()=>this.AE(),t.onprogress=t=>this.uE(t),t.onload=()=>this.SE(),t.onloadend=()=>this.TE(),t.onerror=()=>this.kE(),t.ontimeout=()=>this.EE(),t.onabort=()=>this.bE(),t.open(i.Fk,i.Yu,!0),t.withCredentials=Boolean(i.Xk),"responseType"in t&&i.ck&&(i.ck===Bi.DT?t.responseType="text":t.responseType="arraybuffer"),i.lk.forEach((i,s)=>{t.setRequestHeader(s,i)}),i.Vk&&(t.timeout=i.Vk),this.eT.jg.zg(this.RE);const s=i.XT;s?t.send(s):t.send()}AE(){const t=this.yE;void 0!==t&&t.readyState>=2&&!this.xE&&(this.xE=!0,this.PE())}PE(){var t;const i=this.yE,s=function(t){const i=new oa,s=t.replace(/\r?\n[\t ]+/g," ");return s.split(/\r?\n/).forEach(t=>{const s=t.split(":"),e=s.shift().trim();if(e){const t=s.join(":").trim();i.append(e,t)}}),i}(i.getAllResponseHeaders()||""),e=this.rE;var n;this.CE=new gs,this.oE=new oA({dk:e,ck:e.ck,hk:this.CE.Yy,rk:i.status,fk:i.statusText,lk:s,_k:null!=(n=i.responseURL)?n:s.get("X-Request-URL")}),null==(t=this.wE)||t.Hy(this.oE)}SE(){var t;const i=this.yE;if(void 0===i)return;let s=i.response;if(!Y(s)){const t=this.rE.ck;s=t===Bi.DT?i.responseText:t===Bi.PT?new ArrayBuffer(0):{}}null==(t=this.CE)||t.Hy(s)}TE(){this.kn()}uE(t){void 0!==this.yE&&(null==this.rE.Zk||this.rE.Zk.call(this.rE,t.loaded,t.lengthComputable?t.total:void 0))}kE(){const t=new m("Network request failed");this.oE?this.Ts(new xe(this.oE,t)):this.Ts(new pA(this.rE,t))}EE(){this.Ts(new Qi(this.rE))}bE(){this.Ts(new us),this.kn()}Ts(t){var i,s;null==(i=null!=(s=this.CE)?s:this.wE)||i.zy(t)}kn(){this.yE=void 0,this.oE=void 0,this.wE=void 0,this.CE=void 0,this.eT.Zg()}constructor(t){this.yE=void 0,this.rE=void 0,this.eT=new ui,this.oE=void 0,this.wE=new gs,this.CE=void 0,this.xE=!1,this.RE=()=>{var t;this.bE(),null==(t=this.yE)||t.abort()},this.rE=t,this.eT.$g(t.jg),this.yE=new ud,this.dE()}};function UA(t,i,s){return new Promise((e,n)=>{if(s&&s.Ug)return n(new us);const r=t=>{o(),e(t)},h=()=>{o(),n(new us)},o=()=>{t.removeEventListener(i,r),s&&s.Yg(h)};t.addEventListener(i,r),s&&s.zg(h)})}r();var GA=class{dk(t){return function(t){if(!EA()||!function(t){try{return RA.indexOf(new self.URL(t,self.location.href).protocol)>=0}catch(t){return!1}}(t.Yu))return!1;if(!IA()&&t.Zk)return!1;if(!t.zk&&t.Fk!==ci.POST){if(As.S_&&As.d_<=68)return!1;if(As.w_)return!1}return!0}(t)?new BA(t).hE:new WA(t).hE}Kk(t){const i=s.navigator;if(i&&i.sendBeacon)i.sendBeacon(t.Yu,Bb([t.XT],{type:t.GT}));else{const i=t.GT?{"Content-type":t.GT}:void 0;this.dk(new F({Fk:ci.POST,Yu:t.Yu,XT:t.XT,lk:i,Hk:uA.Mk})).then(t=>{_e(t.WT())},ol)}}kn(){}};r(),r();var Nu=function(t){return t[t.NE=1]="NE",t[t.DE=2]="DE",t[t.DT=3]="DT",t[t.BE=4]="BE",t[t.LE=9]="LE",t}({});function Qo(t){return 1===t.OE}function XA(t){return 3===t.OE}r();var ZA=class extends rl{constructor(t){super("Invalid XML",t)}},HA=class{FE(t){const i=new DOMParser;let s;try{s=i.parseFromString(t,"text/xml")}catch(t){throw new ZA(t)}if(!s||s.getElementsByTagName("parsererror").length>0)throw new ZA;return new JA(s)}},zA=class t{get OE(){return Nu.DE}get VE(){var t;return null!=(t=this.WE.localName)?t:iS(this.WE.nodeName)}get l(){return this.WE.nodeName}get UE(){var t;return null!=(t=this.WE.namespaceURI)?t:void 0}get GE(){var t;return null!=(t=this.WE.prefix)?t:void 0}get XE(){return this.WE.nodeValue}ZE(t){return this.WE.isEqualNode(t.WE)}HE(i){return new t(this.WE.cloneNode(i))}constructor(t){this.WE=void 0,this.WE=t}},YA=class{get zE(){return void 0===this.YE&&(this.YE=function(t){const i=[];for(let s=0;s<t.length;s++){const e=tS(t.item(s));e&&i.push(e)}return i}(this.KE.childNodes)),this.YE}get m(){return this.zE.filter($A)}qE(t){return this.zE.filter(i=>$A(i)&&i.jE===t)}QE(t,i){return this.zE.filter(s=>$A(s)&&s.VE===i&&s.UE===t)}get JE(){return this.KE}$E(t){this.KE.appendChild(t.JE),this.YE&&this.YE.push(t)}ZE(t){return this.KE.isEqualNode(t.JE)}constructor(t){this.KE=void 0,this.YE=void 0,this.KE=t}},KA=class t extends YA{get OE(){return Nu.NE}get VE(){var t;return null!=(t=this.KE.localName)?t:iS(this.KE.nodeName)}get UE(){var t;return null!=(t=this.KE.namespaceURI)?t:void 0}get GE(){var t;return null!=(t=this.KE.prefix)?t:void 0}get jE(){return this.KE.nodeName}get tR(){return function(t){const i=[];for(let s=0;s<t.length;s++)i.push(new zA(t.item(s)));return i}(this.KE.attributes)}get iR(){return this.KE.textContent}sR(t){if(this.KE.hasAttribute(t))return this.KE.getAttribute(t)}eR(t,i){if(this.KE.hasAttributeNS(t,i))return this.KE.getAttributeNS(t,i)}nR(t){this.KE.removeAttribute(t)}rR(t,i){this.KE.removeAttributeNS(t,i)}hR(t,i){this.KE.setAttribute(t,i)}oR(t,i,s){this.KE.setAttributeNS(t,i,s)}HE(i){return new t(this.KE.cloneNode(i))}constructor(t){super(t)}},qA=class{get hk(){return this.KE.nodeValue}get JE(){return this.KE}ZE(t){return this.hk===t.hk}constructor(t){this.KE=void 0,this.KE=t}},jA=class t extends qA{get OE(){return Nu.DT}HE(i){return new t(this.KE.cloneNode(i))}constructor(t){super(t)}},QA=class t extends qA{get OE(){return Nu.BE}HE(i){return new t(this.KE.cloneNode(i))}constructor(t){super(t)}},JA=class t extends YA{get OE(){return Nu.LE}get aR(){return new KA(this.KE.documentElement)}HE(i){return new t(this.KE.cloneNode(i))}constructor(t){super(t)}};function $A(t){return Qo(t)}function tS(t){switch(t.nodeType){case Nu.NE:return new KA(t);case Nu.DT:return new jA(t);case Nu.BE:return new QA(t)}}function iS(t){const i=t.indexOf(":");return i<0?t:t.substr(i+1)}!function(t){Zd=t}(new class extends bg{get pp(){return this.uR||(this.uR=new lm(Pb())),this.uR}get cR(){return this.dR}get lR(){return this.fR}get vR(){return this._R}get gR(){return!1}get mR(){return Nb.IT()}get pR(){return{wR:Mb}}get yR(){return od.connection&&od.connection.effectiveType||Lb}get bR(){return od.connection&&od.connection.type||"unknown"}get AR(){return this.SR||(this.SR=new Pr(new GA)),this.SR}FE(t){return this.kR.FE(t)}constructor(...t){super(...t),this.uR=void 0,this.dR=IA(),this.fR=As.cg||As.s_,this._R=(As.cg||As.S_&&As.d_<=68||As.s_)&&!(As.w_&&As.b_<3),this.SR=void 0,this.kR=new HA}}),r(),r(),r(),r(),r(),r();var sS=class extends ua{},eS=class extends ua{get ht(){return this.ER()}ER(){return this.RR.ht}xR(){return this.RR.xR()}get IR(){return this.PR()}PR(){return this.RR.IR}get NR(){return this.DR()}set NR(t){this.MR(t)}DR(){return this.RR.NR}MR(t){this.RR.NR=t}get bt(){return this.LR()}LR(){return this.RR.bt}get OR(){return this.FR()}set OR(t){this.WR(t)}FR(){return this.RR.OR}WR(t,i){this.RR.WR(t,i)}get ct(){return this.Nd()}Nd(){return this.RR.ct}get xe(){return this.UR()}UR(){return this.RR.xe}get GR(){return this.XR()}XR(){return this.RR.GR}get lt(){return this.ZR()}get HR(){return this.zR()}ZR(){return this.RR.lt}zR(){return this.RR.HR}get YR(){return this.KR()}get qR(){return this.jR()}KR(){return this.RR.YR}jR(){return this.RR.qR}get QR(){return this.JR()}JR(){return this.RR.QR}get $R(){return this.tx()}tx(){return this.RR.$R}get ix(){return this.sx()}set ix(t){this.nx(t)}sx(){return this.RR.ix}nx(t){this.RR.ix=t}get hx(){return this.ox()}ox(){return this.RR.hx}get ux(){return this.lx()}lx(){return this.RR.ux}get vx(){return this._x()}set vx(t){this.gx(t)}_x(){return this.RR.vx}gx(t){this.RR.vx=t}get mx(){return this.wx()}wx(){return this.RR.mx}get yx(){return this.bx()}set yx(t){this.Ax(t)}bx(){return this.RR.yx}Ax(t){this.RR.yx=t}get Sx(){return this.Tx()}Tx(){return this.RR.Sx}get kx(){return this.Ex()}Ex(){return this.RR.kx}get Rx(){return this.xx()}xx(){return this.RR.Rx}nu(){return this.RR.nu()}Ta(t,i){return this.RR.Ta(t,i)}Ix(t,i,s){return this.RR.Ix(t,i,s)}Px(){return this.RR.Px()}get nt(){return this.Cx()}Cx(){return this.RR.nt}get Nx(){return this.Dx()}Dx(){return this.RR.Nx}get rt(){return this.Bx()}Bx(){return this.RR.rt}get Mx(){return this.Lx()}Lx(){return this.RR.Mx}get Ox(){return this.Fx()}set Ox(t){this.Vx(t)}get Wx(){return this.Ux()}Ux(){return this.RR.Wx}Fx(){return this.RR.Ox}Vx(t){this.RR.Ox=t}get Gx(){return this.RR.Gx}set Gx(t){this.RR.Gx=t}Xx(){return this.RR.Xx()}Aa(){return this.RR.Aa()}Zx(){return this.RR.Zx()}gr(t){this.RR.gr(t)}mr(){this.RR.mr()}we(){this.RR.we()}Hx(){this.RR.Hx()}zx(){this.RR.zx()}Yx(){this.RR.Yx()}be(){this.RR.be()}Kx(){return this.RR.Kx()}qx(){return this.RR.qx()}jx(){this.RR.jx()}Qx(){this.RR.Qx()}hr(){return this.RR.hr()}Jx(){this.RR.Jx()}$x(){this.RR.$x()}tI(t){return this.RR.tI(t)}iI(t){return!1}async kn(){this.Vo(),await this.RR.kn()}sI(t){return this.RR.sI(t)}constructor(t){super(),this.RR=void 0,this.eI=t=>{this.iI(t)||this.So(t)},this.RR=t,t.dw(this.eI)}};r(),r(),r();var Lu=function(t){return t.nI="rI",t.hI="oI",t}({});r(),r(),r(),r();var Kt=class extends sh{get Ca(){return this.hu||(this.hu=this.xa()),this.hu}constructor(t,i){super(t,i),this.hu=void 0}};function nS(t){return Boolean(t&&t.Ca)}var nn=class extends Kt{constructor(t){super(t)}},Hn=class extends sh{constructor(t){super(t)}},rS=class extends nn{xa(){return new hS(this.Ht.Ca)}constructor(t){super(Lu.nI),this.Ht=void 0,this.Ht=t}},hS=class extends Hn{constructor(t){super("addtrack"),this.track=void 0,this.track=t}};r();var oS=class extends nn{xa(){return new aS(this.Ht.Ca)}constructor(t){super(Lu.hI),this.Ht=void 0,this.Ht=t}},aS=class extends Hn{constructor(t){super("removetrack"),this.track=void 0,this.track=t}};r();var M=function(t){return t.aI="uI",t.cI="dI",t.lI="fI",t.vI="_I",t.gI="mI",t.pI="wI",t.pa="yI",t.bI="AI",t.SI="TI",t.kI="er",t.EI="RI",t.xI="II",t.QUALITY_UNAVAILABLE="qualityunavailable",t.NO_QUALITY="noquality",t}({}),To=class extends fr{get CI(){return this.NI}get Ca(){return this.hu||(this.hu=this.xa()),this.hu}get V(){return this.NI.length}DI(t){return this.NI[t]}tt(t){return!(!t||Ft(this.NI,t))&&(this.NI.push(t),this.hu&&this.hu.push(t.Ca),t.wn(M.pa,this.Rs),this.So(new rS(t)),!0)}it(t){if(!t)return!1;const i=this.NI.indexOf(t);return!(i<0)&&(Lh(this.NI,i),this.hu&&Lh(this.hu,i),t.mn(M.pa,this.Rs),this.So(new oS(t)),!0)}BI(t){return Ft(this.NI,t)}hr(){const t=this.NI;for(let i=t.length-1;i>=0;i-=1)this.it(t[i])}kn(){this.hr(),this.Vo()}constructor(){super(),this.NI=[],this.hu=void 0}};r();var Tu=class extends nn{xa(){return new uS(this.Ht.Ca)}constructor(t){super(M.pa),this.Ht=void 0,this.Ht=t}},uS=class extends Hn{constructor(t){super("change"),this.track=void 0,this.track=t}},cS=class extends To{get MI(){return this.LI}set MI(t){const i=this.LI;if(t!==i){if(i){this.OI(i);for(const s of i.CI)t&&t.BI(s)||this.it(s)}if(this.LI=t,t){const i=[];for(const s of t.CI)this.tt(s),this.FI(s)&&i.push(s);this.VI(t);for(const t of i)t.So(new Tu(t))}}}VI(t){t.wn(Lu.nI,this.WI),t.wn(Lu.hI,this.UI)}OI(t){t.mn(Lu.nI,this.WI),t.mn(Lu.hI,this.UI)}kn(t){!t&&this.LI&&this.LI.kn(),super.kn()}constructor(){super(),this.LI=void 0,this.WI=t=>{const i=t.Ht;this.tt(i)},this.UI=t=>{const i=t.Ht;this.it(i)}}};r(),r(),r();var dS=w.freeze||so;function lS(t,i,s){w.defineProperty(t,i,{writable:!1,enumerable:!0,value:s})}function fS(t){return dS(t)}function Qr(t,i){for(const s of w.getOwnPropertyNames(i))w.defineProperty(t,s,w.getOwnPropertyDescriptor(i,s));return t}function Fa(t){if(Hd(t)){const i={};for(const s in t)za.call(t,s)&&(i[s]=Fa(t[s]));return i}if(he(t)){const i=new Array(t.length);for(let s=0;s<i.length;s++)s in t&&(i[s]=Fa(t[s]));return i}return t}function T(t,i){return t===i||!(!t||!i)&&(!(!Nc(t)||!Nc(i))&&(uu(t)?!!uu(i)&&function(t,i){const s=t.length,e=i.length;if(s!==e)return!1;for(let e=0;e<s;e+=1)if(!T(t[e],i[e]))return!1;return!0}(t,i):!uu(i)&&function(t,i){const s=w.keys(t),e=w.keys(i);if(!s||!e||s.length!==e.length)return!1;for(const e of s)if(!za.call(i,e)||!T(t[e],i[e]))return!1;return!0}(t,i)))}function vS(t,i){if(!Nc(t))return!1;for(const s of i)if(!(s in t))return!1;return!0}function _S(t,i){return t.constructor===i.constructor}function gS(t){const i={};for(const s of w.keys(t)){const e=t[s];null!=e&&(i[s]=e)}return i}function mS(t){const i={};for(const s of w.keys(t)){const e=t[s];if(uu(e)){const t=[];for(let i=0;i<e.length;i+=1){const s=e[i];if(null!=s){const i=Nc(s)?mS(s):s;t.push(i)}}i[s]=t}else null!=e&&(i[s]=Nc(e)?mS(e):e)}return i}function Zu(t){let i=t;if("string"==typeof i){if(i=i.toLowerCase(),"true"===i)return!0;if("false"===i)return!1}return Boolean(i)}function _t(t){return Y(t)?Zu(t):void 0}function go(t){return"string"==typeof t?""===t?NaN:Number(t):"boolean"==typeof t||null==t||t instanceof Date||"number"!=typeof Number(t)&&!t?NaN:Number(t)}function pS(t){const i=go(t);if(S(i))throw new m("Expected a valid number.");return i}function _o(t){return"string"==typeof t?t:""}function wS(t,i){if(!uu(t))return[];const s=0|t.length,e=new Array(s);for(let n=0;n<s;n++)e[n]=i(t[n]);return e}function Ta(t,i){let s;return s=uu(t)?wS(t,i):i(t),s}r();var yS=[Lu.nI,Lu.hI,M.pa];function bS(t){let i;const s=t.CI.map(t=>t.Ca);return s.item=i=>{const s=0|i,e=t.DI(s);return e&&e.Ca||void 0},s.addEventListener=(t,s)=>{i.wn(t,s)},s.removeEventListener=(t,s)=>{i.mn(t,s)},i=new vm(s),t.wn(yS,t=>i.So(t.Ca)),s}r();var Qs=function(t){return t[t.GI=0]="GI",t[t.XI=1]="XI",t[t.ZI=2]="ZI",t[t.HI=3]="HI",t[t.zI=4]="zI",t[t.TRANSCRIBES_SPOKEN_DIALOG=5]="TRANSCRIBES_SPOKEN_DIALOG",t[t.DESCRIBES_MUSIC_AND_SOUND=6]="DESCRIBES_MUSIC_AND_SOUND",t[t.YI=7]="YI",t}({});function AS(t){switch(t){case 0:return"caption";case 2:return"sign";case 1:return"description";case 3:return"enhanced audio intelligibility";case 4:return"easy reader";case 5:return"transcribes spoken dialog";case 6:return"describes music and sound";case 7:return"describes video"}}function SS(){}function co(t){const i=[M.kI,M.pa,M.EI,M.xI,M.QUALITY_UNAVAILABLE];let s;const e={get activeQuality(){return t.KI&&t.KI.Ca},get enabled(){return t.Rt},set enabled(i){t.Rt=Zu(i)},get id(){return t.o},get uid(){return t.qI},get kind(){return t.Lt},get label(){return t.Th},set label(i){t.Th=_o(i)},get accessibility(){var i,s;return null!=(s=null==(i=t.jI)?void 0:i.map(AS))?s:[]},get language(){return t.bs},get qualities(){return t.QI.Ca},set targetQuality(i){let s;s=i?function(t,i){const s=[];for(const e of t.QI.CI)for(const t of i)e.Ca===t&&s.push(e);return s}(t,he(i)?i:[i]):[],s.length>0?t.JI=s:t.JI=void 0},get targetQuality(){if(t.JI)return 1===t.JI.length?t.JI[0].Ca:t.JI.map(t=>t.Ca)},addEventListener(t,i){const e=Ta(t,_o);s.wn(e,i)},removeEventListener(t,i){const e=Ta(t,_o);s.mn(e,i)}};return s=new vm(e),t.wn(i,t=>s.So(t.Ca)),w.defineProperty(e,"constructor",{value:SS}),e}function TS(){}function kS(t){const i=bS(t);return w.defineProperty(i,"constructor",{value:TS}),i}var Yu=class extends cS{xa(){return kS(this)}FI(t){return t.Rt}};r(),r(),r();var Z=function(t){return t.Nh="disabled",t.$I="hidden",t.Kn="showing",t}({});function Vu(t){if("string"==typeof t){const i=t.toLowerCase();switch(i){case"disabled":case"hidden":case"showing":return i}}else if("number"==typeof t)switch(t){case 0:return"disabled";case 1:return"hidden";case 2:return"showing"}return"disabled"}r();var sa=function(t){return t.ma="error",t}({});function ES(){}function ya(t){const i=[M.pa,M.kI,M.aI,M.cI,M.vI,M.gI,M.lI,M.pI,M.bI,M.SI],s=[sa.ma];let e;const n={get kind(){return t.Lt},get label(){return t.Th},set label(i){t.Th=_o(i)},get language(){return t.bs},get id(){return t.o},get uid(){return t.qI},get inBandMetadataTrackDispatchType(){return t.tP},get mode(){return t.Hk},set mode(i){i!==Z.Kn&&i!==Z.$I&&i!==Z.Nh||t.iP(i)},get forced(){return Boolean(t.sP)},get accessibility(){var i,s;return null!=(s=null==(i=t.jI)?void 0:i.map(AS))?s:[]},get type(){return t.Kp},get readyState(){return t.Sx},get cues(){return t.Hk===Z.Nh?null:t.L.Ca},get activeCues(){return t.Hk===Z.Nh?null:t.q.Ca},get src(){return t.eP||""},addEventListener(t,i){const s=Ta(t,_o);e.wn(s,i)},removeEventListener(t,i){const s=Ta(t,_o);e.mn(s,i)}};return e=new vm(t),t.wn(i,t=>e.So(t.Ca)),t.wn(s,t=>e.So(t)),w.defineProperty(n,"constructor",{value:ES}),n}function RS(){}function xS(t){const i=bS(t);return w.defineProperty(i,"constructor",{value:RS}),i}var Jc=class extends cS{xa(){return xS(this)}FI(t){return t.Hk===Z.Kn}};r(),r();var IS=class extends fr{get nP(){}get rP(){}get hP(){}get oP(){return!1}get aP(){}get Ca(){var t;return null!=(t=this.hu)?t:this.hu=PS(this)}uP(){}constructor(...t){super(...t),this.hu=void 0}};function PS(t){return{goLive:()=>t.uP(),get isLive(){return t.oP},get latencies(){return t.nP},get videoLatencies(){return t.rP},get audioLatencies(){return t.hP},get manifest(){return t.aP},addEventListener(i,s){t.wn(NS(i),s)},removeEventListener(i,s){t.mn(NS(i),s)}}}var CS=["golive","latencyrecoveryseek"];function NS(t){const i=Ta(t,_o);return(yo(i)?[i]:i).filter(t=>Ft(CS,t))}var Ri=class extends fr{set MI(t){const i=this.LI;t!==i&&(i&&this.OI(i),t&&this.VI(t),this.LI=t)}get MI(){return this.LI}get Ca(){return this.hu||(this.hu=PS(this)),this.hu}VI(t){t.wn(CS,this.Rs)}OI(t){t.mn(CS,this.Rs)}uP(){var t;null==(t=this.LI)||t.uP()}get nP(){var t;return null==(t=this.LI)?void 0:t.nP}get rP(){var t;return null==(t=this.LI)?void 0:t.rP}get hP(){var t;return null==(t=this.LI)?void 0:t.hP}get oP(){return!!this.LI&&this.LI.oP}get aP(){var t;return null==(t=this.LI)?void 0:t.aP}kn(){this.Vo(),this.LI&&this.OI(this.LI),this.LI=void 0}constructor(){super(),this.LI=void 0,this.hu=void 0,this.LI=void 0}};r(),r();var DS=function(t){return t.AUTO="auto",t.MANUAL="manual",t.DISABLED="disabled",t}({});function BS(t){return{appID:t&&t.appID?_o(t.appID):"8E80B9CE"}}r(),r();var Gh=function(t){return t.Mk="",t.cP="anonymous",t.dP="use-credentials",t}({}),We=function(t){return t.lP="application/dash+xml",t.fP="application/vnd.apple.mpegurl",t.vP="application/x-mpegurl",t._P="video/mp4",t.gP="application/vnd.theoplayer.hesp+json",t.mP="application/vnd.theo.hesp+json",t.pP="millicast",t.wP="theolive",t}({});function MS(t){if(null!==t)return t}function LS(t){const i={apiKey:t.apiKey,integration:t.integration,streamActivityMonitorID:MS(t.streamActivityMonitorID),adTagParameters:Nc(t.adTagParameters)?t.adTagParameters:{},authToken:MS(t.authToken),omidAccessModeRules:MS(t.omidAccessModeRules)};if(t.enableNonce&&(i.enableNonce=!0),"vod"===(null==t?void 0:t.availabilityType)||function(t){const i=t;return Boolean(i.videoID&&i.contentSourceID)}(t)){const s=t.videoID,e=t.contentSourceID;return s?e?Jr({},i,{availabilityType:"vod",videoID:s,contentSourceID:e}):void Zd.lp("A VOD DAI configuration was provided without valid contentSourceID which is required."):void Zd.lp("A VOD DAI configuration was provided without valid videoID which is required.")}if("live"===(null==t?void 0:t.availabilityType)||function(t){const i=t;return Boolean(i.assetKey)}(t)){const s=t.assetKey;return s?Jr({},i,{availabilityType:"live",assetKey:s}):void Zd.lp("A Live DAI configuration was provided without valid assetKey which is required.")}Zd.lp("A DAI configuration was provided without a valid availabilityType which is required.")}function OS(t){return"google-dai"===t.integration?LS(t):Jr({},t,{integration:String(t.integration)})}r(),r(),r(),r(),r(),r();var cc,Ar="titanium",FS="conax",VS="ezdrm",WS="irdeto",US="vudrm",GS="verimatrix",XS="keyos",ZS="drmtoday",HS="expressplay",zS="azure",YS="xstream",KS="vimond",qS="axinom",jS="uplynk",QS="comcast",JS="custom";function $S(t,i){if(null==t)return{};var s,e,n={},r=w.keys(t);for(e=0;e<r.length;e++)s=r[e],i.indexOf(s)>=0||(n[s]=t[s]);return n}function tT(t){return Y(t.token&&t.deviceId)}function iT(t){var i;const s=null==(i=t.fairplay)?void 0:i.headers;return void 0!==s&&Y(s.PreAuthorization)}function sT(t){const i=t;return tT(i)&&""!==i.token&&""!==i.deviceId&&!iT(i)}r(),r(),r(),r(),r(),function(t){t.yP=!1,t.bP=!1,t.AP=!1,t.SP=!1,t.LOG_ADS_DETAILS=!1,t.LOG_CHROMECAST_DETAILS=!1,t.LOG_CUSTOM_DRM=!1,t.LOG_BUFFERING_VIDEO_MAIN=!1,t.LOG_BUFFERING_VIDEO_SELECTION=!1,t.LOG_BUFFERING_AUDIO_MAIN=!1,t.LOG_BUFFERING_AUDIO_SELECTION=!1,t.TP=!1,t.kP=!1,t.LOG_LCEVC_DETAILS=!1}(cc||(cc={})),r();var Q=class extends Wt{get name(){return"ContentProtectionError"}constructor(t,i,s,e,n,r,h,o){super(t,i,s),this.url=void 0,this.status=void 0,this.statusText=void 0,this.response=void 0,this.systemCode=void 0,this.url=e,this.status=n,this.statusText=r,this.response=h,this.systemCode=o}};r();var eT=class{get EP(){return this.RP}get TS(){return this.mS}xP(t){return function(t){const i=t.onCertificateRequest;if(void 0!==i&&"function"!=typeof i)throw new g("ContentProtectionIntegration.onCertificateRequest is not a function.");const s=t.onCertificateResponse;if(void 0!==s&&"function"!=typeof s)throw new g("ContentProtectionIntegration.onCertificateResponse is not a function.");const e=t.onLicenseRequest;if(void 0!==e&&"function"!=typeof e)throw new g("ContentProtectionIntegration.onLicenseRequest is not a function.");const n=t.onLicenseResponse;if(void 0!==n&&"function"!=typeof n)throw new g("ContentProtectionIntegration.onLicenseResponse is not a function.");const r=t.extractFairplayContentId;if(void 0!==r&&"function"!=typeof r)throw new g("ContentProtectionIntegration.extractFairplayContentId is not a function.");return t}(this.IP.build(t))}constructor(t,i,s){this.RP=void 0,this.mS=void 0,this.IP=void 0,this.RP=t,this.mS=i,this.IP=s}};r();var Ku=function(t){return t.FAILED="FAILED",t.OVERRIDDEN="OVERRIDDEN",t.SUCCEEDED="SUCCEEDED",t}({}),di=class{registerContentProtectionIntegration(t,i,s){switch(this.PP(t,i,s)){case Ku.FAILED:throw new Q(Ne.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The keySystem should be 'widevine', 'playready' or 'fairplay', but was "+i+".");case Ku.OVERRIDDEN:{const s=xT(i);Zd.lp("Warning: Overwriting an earlier registered integration for "+t+" and "+s+".");break}case Ku.SUCCEEDED:xT(i);0;break}}PP(t,i,s){const e=xT(i);if(!e)return Ku.FAILED;let n=Ku.SUCCEEDED;for(const i of this.CP.slice())i.EP===t&&i.TS===e&&(n=Ku.OVERRIDDEN,is(this.CP,i));return this.CP.push(new eT(t,e,s)),n}NP(t,i){return void 0!==this.DP(t,i)}BP(t,i,s){const e=this.DP(t,i);if(!e)throw m("No ContentProtectionIntegrationInit was found for integration id "+t+" and key system "+i);return e.xP(s)}DP(t,i){for(const s of this.CP)if(s.EP===t&&(!i||s.TS===i))return s}constructor(){this.CP=[]}};di.MP=new di,r(),r();var Ci=function(t){return t.LP="moov",t.OP="mvhd",t.FP="trak",t.VP="tkhd",t.WP="mdia",t.UP="mdhd",t.GP="hdlr",t.ZP="minf",t.HP="stbl",t.zP="stsd",t.YP="stsc",t.KP="mvex",t.qP="trex",t.jP="avc1",t.QP="avcC",t.JP="hev1",t.$P="hvc1",t.tC="hvcC",t.iC="vp09",t.sC="vpcC",t.eC="av01",t.nC="av1C",t.rC="dvcC",t.hC="dvvC",t.oC="dvwC",t.aC="dac3",t.uC="dec3",t.cC="dvav",t.dC="dva1",t.lC="dvhe",t.fC="dvh1",t.vC="ac-3",t._C="ec-3",t.gC="colr",t.mC="pasp",t.pC="mp4a",t.wC="esds",t.yC="fLaC",t.bC="dfLa",t.AC="wvtt",t.SC="vttC",t.TC="vlab",t.kC="enca",t.EC="encv",t.RC="moof",t.xC="mfhd",t.IC="traf",t.NC="tfhd",t.DC="trun",t.BC="tfdt",t.MC="senc",t.LC="mdat",t.OC="pssh",t.FC="emsg",t.VC="sidx",t.WC="styp",t.GC="ftyp",t.XC="sinf",t.ZC="frma",t.HC="schi",t.zC="tenc",t}({}),nT=function(t){return t.ON_SCREEN_COLOURS="nclx",t.RESTRICTED_ICC_PROFILE="rICC",t.UNRESTRICED_ICC_PROFILE="prof",t}({}),rT=function(t){return t[t.BASE_DATA_OFFSET_PRESENT=1]="BASE_DATA_OFFSET_PRESENT",t[t.SAMPLE_DESCRIPTION_INDEX_PRESENT=2]="SAMPLE_DESCRIPTION_INDEX_PRESENT",t[t.DEFAULT_SAMPLE_DURATION_PRESENT=8]="DEFAULT_SAMPLE_DURATION_PRESENT",t[t.DEFAULT_SAMPLE_SIZE_PRESENT=16]="DEFAULT_SAMPLE_SIZE_PRESENT",t[t.DEFAULT_SAMPLE_FLAGS_PRESENT=32]="DEFAULT_SAMPLE_FLAGS_PRESENT",t[t.DURATION_IS_EMPTY=65536]="DURATION_IS_EMPTY",t[t.DEFAULT_BASE_IS_MOOF=131072]="DEFAULT_BASE_IS_MOOF",t}({}),hT=function(t){return t[t.DATA_OFFSET_PRESENT=1]="DATA_OFFSET_PRESENT",t[t.FIRST_SAMPLE_FLAGS_PRESENT=4]="FIRST_SAMPLE_FLAGS_PRESENT",t[t.SAMPLE_DURATION_PRESENT=256]="SAMPLE_DURATION_PRESENT",t[t.SAMPLE_SIZE_PRESENT=512]="SAMPLE_SIZE_PRESENT",t[t.SAMPLE_FLAGS_PRESENT=1024]="SAMPLE_FLAGS_PRESENT",t[t.SAMPLE_COMPOSITION_TIME_OFFSET_PRESENT=2048]="SAMPLE_COMPOSITION_TIME_OFFSET_PRESENT",t}({});r();var oT=class t{YC(){return nh(this.hk,this.KC)}qC(){return Us(this.hk,this.KC)}jC(){return function(t,i,s){void 0===s&&(s=!1);const e=t.getInt16(i.ac,s);return i.Dy(2),e}(this.hk,this.KC)}QC(){return ds(this.hk,this.KC)}JC(){return function(t,i,s){void 0===s&&(s=!1);const e=t.getInt32(i.ac,s);return i.Dy(4),e}(this.hk,this.KC)}$C(){return et(this.hk,this.KC)}tN(t){return Et(this.hk,this.KC,t)}iN(t){return function(t,i,s){const e=[];for(let n=0;n<s;n++)e.push(ds(t,i));return e}(this.hk,this.KC,t)}sN(t){return il(this.hk,this.KC,t)}eN(){return pr(this.hk,this.KC)}nN(t){this.KC.Dy(t)}My(){return new t(this.hk,this.KC.My())}constructor(t,i){this.hk=void 0,this.KC=void 0,this.hk=t,this.KC=i}};r(),r();function aT(t,i){return t.Kp===i}function uT(t,i){for(const s of t)if(aT(s,i))return s}var cT=class extends rl{get name(){return"DataIncompleteError"}constructor(t,i){super(),this.rN=void 0,this.hN=void 0,this.rN=t,this.hN=i}},dh=class t{static oN(i){const s=i.hk,e=i.KC,n=t.aN(s,e,!1);if(!n.uN)throw new cT(e.ac,n.m);return n.m}static aN(i,s,e){const n=[];for(;s.ac<i.byteLength;){const r=t.cN(i,s,e);if(!r.uN)return{uN:!1,m:n};n.push(r.dN)}return{uN:!0,m:n}}static lN(i,s){const e=t.cN(i,s,!1);if(!e.uN)throw new cT(s.ac);return e.dN}static fN(i,s){const e=i.hk,n=i.KC;for(;n.ac<e.byteLength;){const i=t.cN(e,n,!1);if(!i.uN)return;if(i.dN.Kp===s)return i.dN}}static cN(i,s,e){const n=s.ac,r=t.vN(i,s);if(!r.uN)return r;const h=r._N;let o=h.Vy;if(0===o){if(e)return s.By(n),{uN:!1,gN:1/0};o=i.byteLength-n}const a=n+o;if(a>i.byteLength){const t=a;return s.By(n),{uN:!1,gN:t}}const u={Kp:h.Kp,ac:n,hk:new oT(wu(i,n,a),new J(h.mN))};return s.By(a),{uN:!0,dN:u}}static vN(t,i){const s=i.ac;if(!Xm(t,i,8)){return{uN:!1,gN:i.ac+8}}let e=ds(t,i),n=il(t,i,4);if(1===e){if(!Xm(t,i,8)){const t=i.ac+8;return i.By(s),{uN:!1,gN:t}}e=et(t,i).toNumber()}if("uuid"===n){if(!Xm(t,i,16)){const t=i.ac+16;return i.By(s),{uN:!1,gN:t}}n=il(t,i,16)}return{uN:!0,_N:{Kp:n,Vy:e,mN:i.ac-s}}}static pN(t,i,s){const e=t.hk,n=t.KC;let r=uo(re(e),n.ac,e.byteLength);return s&&(r=tc(r)),n.Dy(r.byteLength),{Kp:i,hk:r}}static wN(i,s,e){const n=i.QC(),{version:r,flags:h}=tl(n);return{Kp:s,yN:r,bN:h,hk:t.pN(i,s,e).hk}}};function fc(t,i){const s=fo(t,i);if(!s)throw new m("Missing "+i+" atom");return s}function fo(t,i){for(const s of t)if(s.Kp===i)return s.hk}function dT(t,i){const s=[];for(const e of t)e.Kp===i&&s.push(e.hk);return s}function tl(t){return{version:t>>24,flags:new Fm(16777215&t)}}var Co=class t{static AN(i){const s=[],e=dh.oN(new oT(i,new J));for(const i of e){const e=t.SN(i);e&&s.push(e)}return s}static TN(t){return dh.aN(t,new J,!1).m.some(this.kN)}static EN(i){return dT(dh.oN(new oT(i,new J)),Ci.OC).map(t.RN)}static xN(i){return dT(dh.oN(i.hk),Ci.OC).map(t.RN)}static kN(t){return t.Kp===Ci.GC||t.Kp===Ci.WC||t.Kp===Ci.LP||t.Kp===Ci.RC||t.Kp===Ci.LC||t.Kp===Ci.VC||t.Kp===Ci.FC}static SN(i){switch(i.Kp){case Ci.LP:return t.PN(i.hk);case Ci.RC:return t.CN(i.hk,i.ac);case Ci.LC:return t.NN(i.hk);case Ci.VC:return t.DN(i.hk);case Ci.FC:return t.BN(i.hk)}}static PN(i){const s=dh.oN(i),e=fc(s,Ci.OP),n=dT(s,Ci.FP),r=fo(s,Ci.KP),h=t.MN(e),o=n.map(t.LN),a=r?t.ON(r):void 0;return{Kp:Ci.LP,_N:h,Z:o,FN:a}}static MN(t){const i=t.QC(),{version:s,flags:e}=tl(i),n=1===s?t.$C():t.QC(),r=1===s?t.$C():t.QC(),h=t.QC(),o=1===s?t.$C():t.QC(),a=t.QC(),u=t.qC()>>8;t.nN(2),t.nN(8);const c=t.iN(9);t.nN(24);const d=t.QC();return{Kp:Ci.OP,yN:s,bN:e,VN:n,WN:r,UN:h,ct:o,GN:a,Ox:u,XN:c,ZN:d}}static LN(i){const s=dh.oN(i),e=fc(s,Ci.VP),n=fc(s,Ci.WP),r=t.HN(e),h=t.zN(n);return{Kp:Ci.FP,_N:r,YN:h}}static HN(t){const i=t.QC(),{version:s,flags:e}=tl(i),n=1===s?t.$C():t.QC(),r=1===s?t.$C():t.QC(),h=t.QC();t.nN(4);const o=1===s?t.$C():t.QC();t.nN(8);const a=t.jC(),u=t.jC(),c=t.jC()/256;t.nN(2);const d=t.iN(9),l=t.QC()/65536,f=t.QC()/65536;return{Kp:Ci.VP,KN:e.Ly(1),qN:e.Ly(2),jN:e.Ly(4),VN:n,WN:r,QN:h,ct:o,JN:a,$N:u,Ox:c,XN:d,Ti:l,Mi:f}}static zN(i){const s=dh.oN(i),e=fc(s,Ci.UP),n=fc(s,Ci.GP),r=fc(s,Ci.ZP),h=t.tD(e),o=t.iD(n),a=t.sD(r);return{Kp:Ci.WP,_N:h,eD:o,nD:a}}static tD(t){const i=t.QC(),{version:s,flags:e}=tl(i),n=1===s?t.$C():t.QC(),r=1===s?t.$C():t.QC(),h=t.QC(),o=1===s?t.$C():t.QC();t.qC();return t.nN(2),{Kp:Ci.UP,yN:s,bN:e,VN:n,WN:r,UN:h,ct:o}}static iD(t){const i=t.QC(),{version:s,flags:e}=tl(i);t.nN(4);const n=t.sN(4);t.nN(12);const r=t.eN();return{Kp:Ci.GP,yN:s,bN:e,rD:n,l:r}}static sD(i){const s=fc(dh.oN(i),Ci.HP),e=t.hD(s);return{Kp:Ci.ZP,oD:e}}static hD(i){const s=fc(dh.oN(i),Ci.zP),e=t.aD(s);return{Kp:Ci.HP,uD:e}}static aD(i){const s=i.QC(),{version:e,flags:n}=tl(s),r=(i.QC(),[]),h=dh.oN(i);for(const i of h){const s=t.cD(i.hk,i.Kp);s&&r.push(s)}return{Kp:Ci.zP,yN:e,bN:n,dD:r}}static cD(i,s){let e=t.lD(i,s);return e||(e=t.fD(i,s),e||(s===Ci.AC?t.vD(i):void 0))}static lD(i,s){return s===Ci.pC?t._D(i):s===Ci.yC||s===Ci.yC.toLowerCase()||s===Ci.yC.toUpperCase()?t.gD(i):s===Ci.kC?t.mD(i):s===Ci.vC?t.pD(i):s===Ci._C?t.wD(i):void 0}static fD(i,s){return s===Ci.jP?t.yD(i):s===Ci.JP||s===Ci.$P?t.bD(i,s):s===Ci.iC?t.SD(i,s):s===Ci.eC?t.TD(i,s):s===Ci.EC?t.kD(i):s===Ci.cC||s===Ci.dC||s===Ci.lC||s===Ci.fC?t.ED(i,s):void 0}static RD(t,i){t.nN(6);return{Kp:i,xD:t.qC()}}static PD(i,s){const e=t.RD(i,s);i.nN(8);const n=i.qC(),r=i.qC();i.nN(2),i.nN(2);return Jr({},e,{CD:n,ND:r,DD:i.QC()>>>16})}static BD(i,s){const e=t.RD(i,s);i.nN(2),i.nN(2),i.nN(12);const n=i.qC(),r=i.qC(),h=i.QC(),o=i.QC();i.nN(4);const a=i.qC();i.nN(32);const u=i.qC();return i.nN(2),Jr({},e,{Ti:n,Mi:r,MD:h,LD:o,OD:a,FD:u})}static _D(i){const s=t.PD(i,Ci.pC),e=fc(dh.oN(i),Ci.wC);return Jr({},s,{VD:t.WD(e)})}static gD(i){const s=t.PD(i,Ci.yC),e=fc(dh.oN(i),Ci.bC);return Jr({},s,{UD:t.GD(e)})}static vD(i){const s=t.RD(i,Ci.AC),e=dh.oN(i),n=fc(e,Ci.SC),r=t.XD(n),h=fo(e,Ci.TC);return Jr({},s,{ZD:r,HD:h?t.zD(h):void 0})}static XD(t){return{Kp:Ci.SC,Cd:t.eN()}}static zD(t){return{Kp:Ci.TC,Th:t.eN()}}static WD(t){return dh.wN(t,Ci.wC,!0)}static GD(t){return dh.wN(t,Ci.bC,!0)}static yD(i){const s=t.BD(i,Ci.jP),e=dh.oN(i),n=fc(e,Ci.QP),r=fo(e,Ci.mC);return Jr({},s,{YD:t.KD(n),qD:r?t.jD(r):void 0})}static bD(i,s){const e=t.BD(i,s),n=fc(dh.oN(i),Ci.tC);return Jr({},e,{QD:t.JD(n)})}static SD(i,s){const e=t.BD(i,s),n=fc(dh.oN(i),Ci.sC);return Jr({},e,{$D:t.tB(n)})}static TD(i,s){const e=t.BD(i,s),n=dh.oN(i),r=fc(n,Ci.nC),h=t.iB(r),o=fo(n,Ci.gC);return Jr({},e,{sB:h,eB:o?t.nB(o):void 0})}static kD(i){const s=i.My(),e=t.BD(i,Ci.EC),n=fc(dh.oN(i),Ci.XC),r=t.rB(n);return Jr({},e,{hB:t.fD(s,r.aB.oB),uB:r})}static ED(i,s){const e=t.BD(i,s),n=dh.oN(i);return Jr({},e,{cB:t.dB(n)})}static pD(i){const s=t.PD(i,Ci.vC),e=fc(dh.oN(i),Ci.aC);return Jr({},s,{lB:t.fB(e)})}static wD(i){const s=t.PD(i,Ci._C),e=fc(dh.oN(i),Ci.uC);return Jr({},s,{vB:t._B(e)})}static mD(i){const s=i.My(),e=t.PD(i,Ci.kC),n=fc(dh.oN(i),Ci.XC),r=t.rB(n);return Jr({},e,{hB:t.lD(s,r.aB.oB),uB:r})}static rB(i){const s=dh.oN(i),e=fc(s,Ci.ZC),n=t.gB(e),r=fc(s,Ci.HC),h=t.mB(r);return{Kp:Ci.XC,aB:n,pB:h}}static gB(t){const i=t.sN(4);return{Kp:Ci.ZC,oB:i}}static mB(i){const s=fc(dh.oN(i),Ci.zC),e=t.wB(s);return{Kp:Ci.HC,yB:e}}static wB(t){const i=ds(t.hk,t.KC),{version:s,flags:e}=tl(i),n=t.YC()>0,r=t.YC(),h=t.tN(16);return{Kp:Ci.zC,yN:s,bN:e,bB:n,AB:r,SB:h}}static KD(t){return dh.pN(t,Ci.QP,!0)}static JD(t){return dh.pN(t,Ci.tC,!0)}static dB(t){const i=fo(t,Ci.rC);if(void 0!==i)return dh.pN(i,Ci.rC,!0);const s=fo(t,Ci.hC);if(void 0!==s)return dh.pN(s,Ci.hC,!0);const e=fo(t,Ci.oC);if(void 0!==e)return dh.pN(e,Ci.oC,!0);throw m("Error parsing Dolby Vision configuration box.")}static fB(t){return dh.pN(t,Ci.aC,!0)}static _B(t){return dh.pN(t,Ci.uC,!0)}static tB(t){return dh.pN(t,Ci.sC,!0)}static iB(t){return dh.pN(t,Ci.nC,!0)}static nB(t){const i=t.sN(4);switch(i){case"nclx":return{TB:nT.ON_SCREEN_COLOURS,kB:t.qC(),EB:t.qC(),RB:t.qC(),xB:!!(128&t.YC())};case"rICC":return{TB:nT.RESTRICTED_ICC_PROFILE};case"prof":return{TB:nT.UNRESTRICED_ICC_PROFILE};default:throw m("Could not parse ColourInformationBox: unknown type '"+i+"'.")}}static jD(t){const i=t.QC(),s=t.QC();return{Kp:Ci.mC,IB:i,PB:s}}static ON(i){const s=dT(dh.oN(i),Ci.qP).map(t.CB);return{Kp:Ci.KP,Z:s}}static CB(t){const i=t.QC(),{version:s,flags:e}=tl(i),n=t.QC(),r=t.QC(),h=t.QC(),o=t.QC(),a=t.QC();return{Kp:Ci.qP,yN:s,bN:e,QN:n,NB:r,DB:h,BB:o,MB:a}}static CN(i,s){const e=dh.oN(i),n=fc(e,Ci.xC),r=dT(e,Ci.IC),h=t.LB(n),o=r.map(t.OB);return{Kp:Ci.RC,FB:s,_N:h,Z:o}}static LB(t){const i=t.QC(),{version:s,flags:e}=tl(i),n=t.QC();return{Kp:Ci.xC,yN:s,bN:e,VB:n}}static OB(i){const s=dh.oN(i),e=fc(s,Ci.NC),n=dT(s,Ci.DC),r=fo(s,Ci.BC),h=t.WB(e),o=n.map(i=>t.UB(i,h)),a=r?t.GB(r):void 0;return{Kp:Ci.IC,_N:h,XB:o,ZB:a}}static WB(t){const i=t.QC(),{version:s,flags:e}=tl(i),n=t.QC(),r=e.Ly(rT.BASE_DATA_OFFSET_PRESENT)?t.$C():void 0,h=e.Ly(rT.SAMPLE_DESCRIPTION_INDEX_PRESENT)?t.QC():void 0,o=e.Ly(rT.DEFAULT_SAMPLE_DURATION_PRESENT)?t.QC():void 0,a=e.Ly(rT.DEFAULT_SAMPLE_SIZE_PRESENT)?t.QC():void 0,u=e.Ly(rT.DEFAULT_SAMPLE_FLAGS_PRESENT)?t.QC():void 0;return{Kp:Ci.NC,yN:s,bN:e,QN:n,HB:r,zB:h,DB:o,BB:a,MB:u}}static UB(i,s){const e=i.QC(),{version:n,flags:r}=tl(e),h=i.QC(),o=r.Ly(hT.DATA_OFFSET_PRESENT)?i.JC():void 0,a=r.Ly(hT.FIRST_SAMPLE_FLAGS_PRESENT)?i.QC():void 0,u=[];for(let e=0;e<h;e++){const h=t.YB(i,r,n,s);0===e&&void 0!==a&&(h.bN=a),u.push(h)}return{Kp:Ci.DC,yN:n,bN:r,KB:h,FB:o,qB:a,jB:u}}static YB(t,i,s,e){return{ct:i.Ly(hT.SAMPLE_DURATION_PRESENT)?t.QC():e.DB,Vy:i.Ly(hT.SAMPLE_SIZE_PRESENT)?t.QC():e.BB,bN:i.Ly(hT.SAMPLE_FLAGS_PRESENT)?t.QC():e.MB,QB:i.Ly(hT.SAMPLE_COMPOSITION_TIME_OFFSET_PRESENT)?0===s?t.QC():t.JC():void 0}}static BN(t){const i=t.hk,s=t.KC,e=ds(i,s),{version:n,flags:r}=tl(e);if(1===n){const t=ds(i,s),e=et(i,s),h=ds(i,s),o=ds(i,s),a=qm(i,s),u=qm(i,s),c=Hc(re(i),s.ac,i.byteLength);return s.Dy(c.byteLength),{Kp:Ci.FC,yN:n,bN:r,JB:a,XE:u,UN:t,$B:e,tM:h,o:o,iM:c}}{const t=qm(i,s),e=qm(i,s),h=ds(i,s),o=ds(i,s),a=ds(i,s),u=ds(i,s),c=Hc(re(i),s.ac,i.byteLength);return s.Dy(c.byteLength),{Kp:Ci.FC,bN:r,yN:n,JB:t,XE:e,UN:h,sM:o,tM:a,o:u,iM:c}}}static NN(t){return dh.pN(t,Ci.LC,!1)}static RN(i){const s=i.hk,e=i.KC,n=tc(re(s)).buffer,r=ds(s,e),{version:h,flags:o}=tl(r),a=t.eM(s,e),u=[];if(h>0){const t=ds(s,e);for(let i=0;i<t;i++){const t=Et(s,e,16);u.push(t)}}const c=ds(s,e),d=new j(n,e.ac,c);return e.Dy(s.byteLength),{Kp:Ci.OC,yN:h,bN:o,nM:a,rM:u,hM:c,hk:d,oM:n}}static eM(t,i){let s="";for(let e=0;e<4;e++){const e=nh(t,i).toString(16);s+=1===e.length?"0"+e:e}s+="-";for(let e=0;e<2;e++){const e=nh(t,i).toString(16);s+=1===e.length?"0"+e:e}s+="-";for(let e=0;e<2;e++){const e=nh(t,i).toString(16);s+=1===e.length?"0"+e:e}s+="-";for(let e=0;e<2;e++){const e=nh(t,i).toString(16);s+=1===e.length?"0"+e:e}s+="-";for(let e=0;e<6;e++){const e=nh(t,i).toString(16);s+=1===e.length?"0"+e:e}return s.toLowerCase()}static DN(t){const i=t.hk,s=t.KC,e=ds(i,s),{version:n,flags:r}=tl(e),h=ds(i,s),o=ds(i,s);let a,u;0===n?(a=mh.fromBits(ds(i,s),0,!0),u=mh.fromBits(ds(i,s),0,!0)):(a=et(i,s),u=et(i,s)),s.Dy(2);const c=Us(i,s),d=[];for(let t=0;t<c;t+=1){const t=ds(i,s),e=t>>31&1,n=2147483647&t,r=ds(i,s),h=ds(i,s),o=h>>31&1,a=h>>28&7,u=268435455&h;d.push({aM:e,uM:n,ct:r,cM:o,dM:a,lM:u})}return{Kp:Ci.VC,yN:n,bN:r,fM:h,UN:o,vM:a,_M:u,gM:c,mM:d}}static GB(t){const i=t.hk,s=t.KC,e=ds(i,s),{version:n,flags:r}=tl(e);let h;return h=0===n?mh.fromBits(ds(i,s),0,!0):et(i,s),{Kp:Ci.BC,yN:n,bN:r,ZB:h}}},lT={playready:"https://pr-keyos.licensekeyserver.com/core/rightsmanager.asmx",widevine:"https://wv-keyos.licensekeyserver.com/",fairplay:"https://fp-keyos.licensekeyserver.com/getkey"};function fT(t){if(!t)return!0;const i=t.licenseAcquisitionURL,s=t.certificateURL,e=t.keys,n=t.headers,r=t.useCredentials,h=t.queryParameters;return!(i||s||e||n||r||h)}function vT(t){return t&&void 0!==t.licenseAcquisitionURL}var _T=vT,gT=vT;function mT(t){if(!t)return!0;if(bT(t))return!1;const i=t.fairplay,s=t.playready,e=t.widevine,n=t.clearkey,r=t.aes128;return fT(i)&&fT(s)&&fT(e)&&void 0===n&&fT(r)}function pT(t){const i=sT(t),s=function(t){var i;const s=t;return iT(s)&&""!==(null==(i=s.fairplay)?void 0:i.headers.PreAuthorization)&&!tT(s)}(t);return(!i||!s)&&(i||s)}function wT(t){return t.integration===WS}function yT(t){const i=t;if(!i)return!1;if(mT(i))return!1;const s=i.fairplay,e=i.playready,n=i.widevine,r=i.clearkey;if(bT(t))return!0;if(s&&!function(t){const i=t;return i&&(void 0!==i.certificateURL||void 0!==i.certificate)}(s))return!1;if(e&&!_T(e))return!1;if(n&&!gT(n))return!1;if(r&&!function(t){return void 0!==t}(r))return!1;if(i.integration){if(di.MP.NP(i.integration))return!0;switch(i.integration){case Ar:if(!function(t){const i=t,s=i.integration===Ar;return s&&(AT(t)||ST(t))}(t))return!1;break;case US:if(!TT(t))return!1;break;case GS:if(!function(t){const i=t;return i.integration===GS}(t))return!1;break;case WS:if(!wT(t))return!1;break;case FS:if(!pT(t))return!1;break;case VS:if(!function(t){const i=t;return i.integration===VS}(t))return!1;break;case XS:if(!bT(t))return!1;break;case ZS:if(!function(t){const i=t;return i.integration===ZS&&(void 0!==i.token||function(t){return void 0!==t.merchant&&void 0!==t.sessionId&&void 0!==t.userId}(i))}(t))return!1;break;case HS:if(!function(t){const i=t;return i.integration===HS}(t))return!1;break;case YS:if(!kT(t))return!1;break;case KS:if(!function(t){return t.integration===KS}(t))return!1;break;case qS:if(!ET(t))return!1;break;case zS:if(!function(t){const i=t;return i.integration===zS&&void 0!==i.token}(t))return!1;break;case jS:if(!function(t){const i=t;return i.integration===jS}(t))return!1;break;case QS:if(!function(t){const i=t;return i&&Y(i.releasePid)&&Y(i.accountId)&&Y(i.token)}(t))return!1;break;case JS:return!0;default:return!1}}return!0}function bT(t){return t.integration===XS}function AT(t){return void 0!==t.authToken}function ST(t){const i=t;return void 0!==i.accountName&&void 0!==i.customerName&&void 0!==i.portalId}function TT(t){const i=t;return i.integration===US&&void 0!==i.token}function kT(t){const i=t;return i&&i.integration===YS&&yo(i.ticketAcquisitionURL)&&yo(i.streamId)}function ET(t){const i=t;return i.integration===qS&&void 0!==i.token}function RT(t,i){const s=i[t];var e;const n=null!=(e=null==s?void 0:s.licenseAcquisitionURL)?e:lT[t];var r;const h=null!=(r=null==s?void 0:s.customdata)?r:i.customdata,o=h?{customData:h}:{};var a;const u=Jr({},null!=(a=null==s?void 0:s.headers)?a:{},o),c=null!=s?s:{},{customdata:d}=c;return Jr({},$S(c,["customdata"]),{licenseAcquisitionURL:n,headers:u})}function xT(t){switch(t.toLowerCase()){case"widevine":case Vg:return Vg;case"playready":case Lg:return Lg;case"fairplay":case Gs:return Gs}}function IT(t,i){switch(t){case _r:return function(t){const i={},s=Co.EN(new DataView(t));for(const t of s)i[t.nM]=t.oM;return i}(i);case Ng:case Dg:return function(t){return{[zg]:t}}(i);case Bg:return function(t){return{[Zg]:t}}(i);default:throw new Wt(Ne.CONTENT_PROTECTION_INITIALIZATION_INVALID,"Unsupported initDataType "+t)}}async function PT(t,i){return void 0===i&&(i=!1),!(!t.widevine||!await Zd.Ap())||(!(!t.playready||!await Zd.bp())||(!(!t.clearkey||!await Zd.wp())||!(i||!t.fairplay||!await Zd.yp())))}function CT(t,i,s){const e=function(t,i,s){var e;const{useCredentials:n,crossOrigin:r}=function(t,i){let s=Gh.Mk;return t.useCredentials?s=Gh.dP:t.crossOrigin&&(s=rk(t.crossOrigin)),s===Gh.Mk&&i&&i.vr&&i.vr[360]&&(s=Gh.cP),{useCredentials:s===Gh.dP,crossOrigin:s}}(t,i);let h=t.liveOffset;Y(h)||(h=s&&Y(s.liveOffset)?s.liveOffset:void 0);let o=t.timeServer;Y(o)||(o=i&&Y(i.timeServer)?i.timeServer:void 0);let a=t.hlsDateRange;Y(a)||(a=s&&Y(s.hlsDateRange)?Boolean(s.hlsDateRange):void 0);const u=Boolean(t.experimentalRendering),c=Boolean(t.nativeUiRendering),d=Boolean(t.lowLatency),l=Boolean(t.useNativePlayback),f=Boolean(t.useManagedMediaSource),v=Y(t.dash)?DT(t.dash):void 0,_=Y(t.hls)?BT(t.hls):void 0,g=FT(OT(t.abr),null==s?void 0:s.abr),m=_t(t.lcevc),p=Y(t.ignoreEmbeddedTextTrackTypes)?yk(t.ignoreEmbeddedTextTrackTypes):[];var w;const y=$T(null!=(w=t.seamlessSwitchStrategy)?w:null==(e=t.dash)?void 0:e.useSeamlessPeriodSwitch),b=JT(t.latencyConfiguration);return{crossOrigin:r,useCredentials:n,liveOffset:h,timeServer:o,hlsDateRange:a,experimentalRendering:u,nativeUiRendering:c,lowLatency:d,useNativePlayback:l,useManagedMediaSource:f,dash:v,hls:_,abr:g,lcevc:m,ignoreEmbeddedTextTrackTypes:p,seamlessSwitchStrategy:y,latencyConfiguration:b}}(t,i,s),n=MS(t.src);let r=t.type;r||(r=t.src?nk(t.src):void 0);const h=function(t,i){let s;s=Y(t.contentProtection)?t.contentProtection:Y(t.drm)?t.drm:Y(i)&&Y(i.contentProtection)?i.contentProtection:Y(i)&&Y(i.drm)?i.drm:void 0;return NT(s)}(t,i);return Jr({},e,{src:n,type:r,contentProtection:h,ssai:Y(t.ssai)?OS(t.ssai):void 0,integrationData:void 0,isAdvertisement:Boolean(t.isAdvertisement)})}function NT(t){return yT(t)&&t.integration&&t.integration===XS?function(t){const i=RT(R.Xp,t),s=RT(R.Gp,t),e=t[R.zp]&&RT(R.zp,t);return Jr({integration:"keyos",widevine:i,playready:s},e?{fairplay:e}:{})}(t):t}function DT(t){return{useSeamlessPeriodSwitch:$T(null==t?void 0:t.useSeamlessPeriodSwitch),needsTimescaleShifting:_t(null==t?void 0:t.needsTimescaleShifting),desiredTimescale:void 0!==(null==t?void 0:t.desiredTimescale)?go(null==t?void 0:t.desiredTimescale):void 0,forceSeekToSynchronize:_t(null==t?void 0:t.forceSeekToSynchronize),ignoreAvailabilityWindow:_t(null==t?void 0:t.ignoreAvailabilityWindow),forceHardSwitchWhenSeekingBackwards:_t(null==t?void 0:t.forceHardSwitchWhenSeekingBackwards),segmentRelativeVttTiming:_t(null==t?void 0:t.segmentRelativeVttTiming),forceRecreateMediaSourceOnAudioSwitch:_t(null==t?void 0:t.forceRecreateMediaSourceOnAudioSwitch)}}function BT(t){return{discontinuityAlignment:MT(null==t?void 0:t.discontinuityAlignment),delaySubtitlePreload:Zu(null==t?void 0:t.delaySubtitlePreload)}}function MT(t){if(!t||!yo(t))return"auto";switch(t){case"playlist":return"playlist";case"media":return"media";default:return"auto"}}r(),r(),r(),r();var Mo=function(t){return t.Ck="audio",t.Nk="video",t.DT="text",t.Dk="image",t.gk="unknown",t}({});function LT(t){return"audio"===t||"video"===t}function OT(t){if(!Y(t))return;return VT(wS(null==t?void 0:t.preferredAudioCodecs,_o),wS(null==t?void 0:t.preferredVideoCodecs,_o),_t(null==t?void 0:t.restrictToPlayerSize))}function FT(t,i){if(!Y(t)&&!Y(i))return;var s;return VT(WT(null==t?void 0:t.preferredAudioCodecs,null==i?void 0:i.preferredAudioCodecs),WT(null==t?void 0:t.preferredVideoCodecs,null==i?void 0:i.preferredVideoCodecs),null!=(s=null==t?void 0:t.restrictToPlayerSize)?s:null==i?void 0:i.restrictToPlayerSize)}function VT(t,i,s){if(0!==t.length||0!==i.length||void 0!==s)return{preferredAudioCodecs:0===t.length?void 0:t,preferredVideoCodecs:0===i.length?void 0:i,restrictToPlayerSize:s}}function WT(t,i){return void 0!==t&&(null==t?void 0:t.length)>0?t:null!=i?i:[]}function UT(t,i){if(void 0!==i)switch(t){case Mo.Nk:return i.preferredVideoCodecs;case Mo.Ck:return i.preferredAudioCodecs;default:return}}r(),r(),r();var GT=!1;r();var Vo=function(t){return t.pM="canplay",t.wM="canplaythrough",t.yM="loadeddata",t.bM="loadedmetadata",t.bI="readystatechange",t.AM="waiting",t.SM="playing",t}({}),K=["canplay","canplaythrough","loadeddata","loadedmetadata","readystatechange","waiting","playing"];function XT(t,i,s){return s?t<=i:t<i}r();var ZT=class t{get TM(){return this.kM.slice()}Tn(t){return this.kM[2*t]}An(t){return this.kM[2*t+1]}EM(t){return this.RM[2*t]}xM(t){return this.RM[2*t+1]}_s(){const t=this;return{get length(){return t.V},start(i){const s=0|i;return t.IM(s),t.Tn(s)},end(i){const s=0|i;return t.IM(s),t.An(s)}}}PM(){const i=new Array(2*this.V),s=new Array(2*this.V);for(let t=0;t<this.V;t++)i[2*t]=this.Tn(t),i[2*t+1]=this.An(t),s[2*t]=!0,s[2*t+1]=!0;return new t(i,s)}IM(t){if(t<0)throw new m("The index provided ("+t+") must be non-negative");if(t>=this.V)throw new m("The index provided ("+t+") is greater than the maximum bound ("+this.V+")")}CM(t){if(0===this.V)return 0;if(this.Cr(t))return t;if(t<=this.Tn(0))return this.Tn(0);if(t>=this.An(this.V-1))return this.An(this.V-1);{let i=0,s=1/0;for(let e=0;e<this.V;e++){const n=this.Tn(e),r=_.abs(n-t);r<s&&(i=n,s=r);const h=this.An(e),o=_.abs(h-t);o<s&&(i=h,s=o)}return i}}Mn(i){let s=0,e=0;const n=[],r=[];for(;s<this.V&&e<i.V;){const t=this.Tn(s),h=this.An(s),o=this.EM(s),a=this.xM(s),u=i.Tn(e),c=i.An(e),d=i.EM(e),l=i.xM(e),f=_.max(t,u),v=_.min(h,c);let g,m;g=t===u?o&&d:f===t?o:d,m=h===c?a&&l:v===h?a:l,(f<v||g&&m&&f===v)&&(n.push(f,v),r.push(g,m)),h===c?(s+=1,e+=1):h<c?s+=1:e+=1}return new t(n,r)}NM(){const i=this.DM(),s=i.V;if(0===s)return new t([-1/0,1/0],[!1,!1]);const e=[],n=[],r=i.Tn(0);r!==-1/0&&(e.push(-1/0,r),n.push(!1,!i.EM(0)));for(let t=0;t<s-1;t++)e.push(i.An(t),i.Tn(t+1)),n.push(!i.xM(t),!i.EM(t+1));const h=i.An(s-1);return h!==1/0&&(e.push(h,1/0),n.push(!i.xM(s-1),!1)),new t(e,n)}BM(i){let s=0,e=0;const n=this.V,r=i.V,h=new Array(2*(n+r)),o=new Array(2*(n+r));let a=0;for(;s<n&&e<r;){const t=this.Tn(s),n=this.An(s),r=i.Tn(e),u=i.An(e);t<r||t===r&&n<u?(h[a]=t,h[a+1]=n,o[a]=this.EM(s),o[a+1]=this.xM(s),s++):(h[a]=r,h[a+1]=u,o[a]=i.EM(e),o[a+1]=i.xM(e),e++),a+=2}for(;s<n;)h[a]=this.Tn(s),h[a+1]=this.An(s),o[a]=this.EM(s),o[a+1]=this.xM(s),s++,a+=2;for(;e<r;)h[a]=i.Tn(e),h[a+1]=i.An(e),o[a]=i.EM(e),o[a+1]=i.xM(e),e++,a+=2;return new t(h,o)}MM(i){void 0===i&&(i=0);const s=this.V;if(s<2)return this;const e=[],n=[];let r=this.Tn(0),h=this.An(0),o=this.EM(0),a=this.xM(0);for(let t=1;t<s;t++){const s=this.Tn(t),u=this.An(t);let c=this.EM(t),d=this.xM(t);r<s&&h>u||(r===s&&(c=o||c,o=c),h===u&&(d=a||d,a=d),XT(s,h+i,a||c)?(h=u,a=d):(e.push(r,h),n.push(o,a),r=s,h=u,o=c,a=d))}return e.push(r,h),n.push(o,a),new t(e,n).DM()}DM(){const i=[],s=[];for(let t=0;t<this.V;t++){const e=this.Tn(t),n=this.An(t),r=this.EM(t),h=this.xM(t);e===n?(r||h)&&(i.push(e,n),s.push(!0,!0)):(i.push(e,n),s.push(r,h))}return new t(i,s)}LM(t){if(0===this.V)return t;if(0===t.V)return this;return this.BM(t).MM()}OM(t){const i=this.DM(),s=t.DM(),e=i.NM(),n=s.NM(),r=e.Mn(s),h=n.Mn(i);return r.LM(h)}Dy(i){if(0===this.V||0===i)return this;const s=[],e=[];for(let t=0;t<this.V;t++){const n=this.Tn(t)+i,r=this.An(t)+i;s.push(n,r),e.push(this.EM(t),this.xM(t))}return new t(s,e)}FM(t){return 0===this.V||0===t.V?this:this.DM().Mn(t.DM().NM())}Cr(t,i){return this.VM(t,i)>=0}WM(t,i,s,e,n){return this.UM(t,i,s,e,n)>=0}GM(t,i,s,e,n){return this.XM(t,i,s,e,n)>=0}ZM(t){if(t.V!==this.V)return!1;for(let i=0;i<this.V;i++)if(this.Tn(i)!==t.Tn(i)||this.An(i)!==t.An(i)||this.EM(i)!==t.EM(i)||this.xM(i)!==t.xM(i))return!1;return!0}HM(i){const s=[],e=[];for(let t=0;t<this.V;t++){const n=this.Tn(t),r=this.An(t),h=this.EM(t),o=this.xM(t);i(n,r,h,o)&&(s.push(n,r),e.push(h,o))}return new t(s,e)}XM(t,i,s,e,n){void 0===s&&(s=!0),void 0===e&&(e=!0),void 0===n&&(n=0);const r=t-n,h=i+n;for(let t=0;t<this.V;t+=1)if(XT(this.Tn(t),h,!e||this.EM(t))&&XT(r,this.An(t),!s||this.xM(t)))return t;return-1}UM(t,i,s,e,n){void 0===s&&(s=!0),void 0===e&&(e=!1),void 0===n&&(n=0);const r=t+n,h=i-n;for(let t=0;t<this.V;t+=1)if(XT(this.Tn(t),r,!s||this.EM(t))&&XT(h,this.An(t),!e||this.xM(t)))return t;return-1}VM(t,i){return this.UM(t,t,!0,!0,i)}zM(t,i){void 0===i&&(i=0);const s=t+i;for(let t=this.V-1;t>=0;t-=1)if(XT(this.Tn(t),s,this.EM(t)))return t;return-1}YM(t,i){void 0===i&&(i=0);const s=t-i;for(let t=0;t<this.V;t+=1)if(XT(s,this.An(t),this.xM(t)))return t;return-1}KM(t,i){void 0===i&&(i=0);const s=t+i;for(let t=0;t<this.V;t+=1)if(this.Tn(t)>s)return t;return-1}qM(i){return this.IM(i),new t([this.Tn(i),this.An(i)],[this.EM(i),this.xM(i)])}jM(t,i){const s=this.VM(t,i);return s<0?void 0:this.qM(s)}get QM(){let t=0;for(let i=0;i<this.V;i++){t+=this.An(i)-this.Tn(i)}return t}static jn(i){const s=[];for(let t=0;t<i.length;t++)s.push(i.start(t),i.end(t));return new t(s)}static JM(i){return new t([i,i],[!0,!0])}static $M(i,s){return i<=s?new t([i,s]):t.tL()}static tL(){return HT}static iL(){return zT}constructor(t,i){this.V=void 0,this.kM=void 0,this.RM=void 0,this.V=t.length>>1,this.kM=t,this.RM=i||function(t){const i=new Array(2*t);for(let s=0,e=0;s<t;s+=1,e+=2)i[e]=!0,i[e+1]=!1;return i}(this.V)}},HT=new ZT([]),zT=new ZT([0,1/0]),$t=.92,Ot=1.08,YT=.25,KT=class extends fr{get sL(){return this.We&&this.ho}get eL(){return this.nL}get Rt(){return this.We}set Rt(t){this.We=t,t?this.Tn():this.Kx()}rL(t){this.hL.push(t),this.oL()}aL(t){is(this.hL,t),this.oL()}oL(){this.nL=this.uL(),this.ho&&this.cL()}uL(){const t=this.dL,i=function(t,i){const s=i-t.targetOffset;return{minimumOffset:t.minimumOffset+s,targetOffset:t.targetOffset+s,maximumOffset:t.maximumOffset+s,forceSeekOffset:t.forceSeekOffset+s,minimumPlaybackRate:t.minimumPlaybackRate,maximumPlaybackRate:t.maximumPlaybackRate,leniency:t.leniency}}(this.lL,this.fL),s=[i,...this.hL],e=s.reduce((t,i)=>{var s;return _.max(t,null!=(s=null==i?void 0:i.minimumOffset)?s:0)},t),n=s.reduce((t,i)=>{var s;return _.max(t,null!=(s=null==i?void 0:i.targetOffset)?s:0)},e+YT),r=s.reduce((t,i)=>{var s;return _.max(t,null!=(s=null==i?void 0:i.maximumOffset)?s:0)},n+YT);return{minimumOffset:e,targetOffset:n,maximumOffset:r,forceSeekOffset:s.reduce((t,i)=>{var s;return _.max(t,null!=(s=null==i?void 0:i.forceSeekOffset)?s:0)},r+YT),minimumPlaybackRate:s.reduce((t,i)=>{var s;return _.min(t,null!=(s=i.minimumPlaybackRate)?s:$t)},$t),maximumPlaybackRate:s.reduce((t,i)=>{var s;return _.max(t,null!=(s=i.maximumPlaybackRate)?s:Ot)},Ot)}}vL(){var t;const i=null==(t=ZT.jn(this.oa.IR).jM(this.oa.OR))?void 0:t.An(0),s=void 0!==i?i-this.oa.OR:0;this._L=_.min(this._L,s),this.gL+=1}mL(){if(this.gL<10)return;const t=.25-this._L,i=ss(this.fL+t,this.fL-.1,this.fL+.1);this.fL=ss(i,this.pL,this.wL),this._L=1/0,this.gL=0}yL(){this.bL(),this.lE=Zd.Og(()=>this.cL(),500)}bL(){void 0!==this.lE&&(Zd.Lg(this.lE),this.lE=void 0)}Tn(){this.We&&this.AL&&(this.ho||this.SL.wn(d.vy,this.cL),this.TL=Zd._p(()=>this.vL(),1e3),this.kL=Zd._p(()=>this.mL(),6e4),this.yL(),this.ho=!0)}Kx(){this.ho&&(this.bL(),this.TL&&Zd.gp(this.TL),this.kL&&Zd.gp(this.kL),this.SL.mn(d.vy,this.cL),this.EL(1),this.ho=!1)}Zg(){this.Kx(),this.oa.mn(Vo.AM,this.RL),this.oa.mn(Vo.SM,this.xL),this.Vo()}EL(t){this.SL.PL.IL||this.oa.vx!==t&&(this.oa.vx=t)}get CL(){return this.oa.NL}constructor(t,i,s){var e;super(),this.oa=void 0,this.SL=void 0,this.ho=!1,this.We=!1,this.fL=void 0,this.nL=void 0,this.pL=void 0,this.wL=void 0,this.lL=void 0,this.hL=[],this.AL=!1,this.dL=0,this.lE=void 0,this.gL=0,this._L=1/0,this.TL=void 0,this.kL=void 0,this.RL=()=>{const t=this.SL.IR,i=this.SL.OR,s=t.jM(i);s&&(this.dL=ss(s.An(0)-i,this.dL,.5),this.oL())},this.xL=()=>{this.AL=!0,this.oa.mn(Vo.SM,this.xL),this.We&&this.Tn()},this.cL=()=>{this.bL(),this.yL();const t=this.CL;if(!t)return;const i=this.DL();if(t>this.nL.forceSeekOffset)return this.So(new sh("latencyrecoveryseek")),void this.uP();const{minimumOffset:s,targetOffset:e,maximumOffset:n}=this.nL,r=this.SL.vx;if(!this.BL(i,s,n))if(i>n&&this.ML()){const t=this.nL.maximumPlaybackRate;GT,this.EL(t)}else if(i<s&&!Zd.Zs.Tm){const t=this.nL.minimumPlaybackRate;GT,this.EL(t)}else if(r>1&&i<e){const t=1;GT,this.EL(t)}else if(r<1&&i>e){const t=1;GT,this.EL(t)}},this.oa=t,this.SL=i,this.lL=s,this.pL=s.targetOffset,this.wL=s.targetOffset+(null!=(e=s.leniency)?e:0),this.fL=s.targetOffset,this.nL=this.uL(),this.oa.wn(Vo.AM,this.RL),this.oa.wn(Vo.SM,this.xL)}},qT=.66,jT=1.5,QT=3;function JT(t){if(!Y(t))return;const i=Zd.Zs.Em?10:0,s=t.targetOffset;var e;var n;var r;var h;var o;var a;return{minimumOffset:null!=(e=t.minimumOffset)?e:s*qT,targetOffset:s,maximumOffset:null!=(n=t.maximumOffset)?n:s*jT,forceSeekOffset:_.max(null!=(r=t.forceSeekOffset)?r:s*QT,i),minimumPlaybackRate:null!=(h=t.minimumPlaybackRate)?h:$t,maximumPlaybackRate:null!=(o=t.maximumPlaybackRate)?o:Ot,leniency:null!=(a=t.leniency)?a:void 0}}var Uh=function(t){return t.LL="auto",t.OL="always",t.FL="never",t.CLEAR_ONLY="clear-only",t.SAME_DRM_ONLY="same-drm-only",t}({}),rc=function(t){return t.UPLYNK="uplynk",t.MEDIATAILOR="mediatailor",t}({});function $T(t){if(!t||!yo(t))return"auto";switch(t){case"always":return"always";case"never":return"never";case"clear-only":return"clear-only";case"same-drm-only":return"same-drm-only";default:return"auto"}}r(),r();var tk=function(t){return t.ENABLED="enabled",t.INSECURE="insecure",t.DISABLED="disabled",t}({});r();var ik=!1;r();var sk=function(t){return t.NONE="none",t.MIDROLL_AND_POSTROLL="midroll-and-postroll",t}({});r();var hr=function(t){return t.DEFAULT="",t.SRT="srt",t.TTML="ttml",t.WEBVTT="webvtt",t.EMSG="emsg",t.EVENT_STREAM="eventstream",t.ID3="id3",t.CEA608="cea608",t.DATE_RANGE="daterange",t.MILLICAST="millicast",t}({});function ek(t){switch(t){case"":case"srt":case"ttml":case"webvtt":case"emsg":case"eventstream":case"id3":case"cea608":case"daterange":case"millicast":return!0;default:return!1}}function nk(t){const i=null==t?void 0:t.match(/\b(?:m3u8|mpd)\b/i);if(!i)return We._P;switch(i[0].toLowerCase()){case"mpd":return We.lP;case"m3u8":return We.fP;default:return We._P}}function rk(t){switch(t){case Gh.cP:case Gh.dP:return t;default:return Gh.Mk}}function ue(t){if(!t)return!1;const i=t.toLowerCase();return Qe(i,We.lP)}function hk(t){if(!t)return!1;const i=t.toLowerCase();return Qe(i,We.fP)||Qe(i,We.vP)}function ok(t){return Nc(t)&&Nc(t.ssai)&&"google-dai"===t.ssai.integration}function ak(t){return Nc(t)&&("verizon-media"===t.integration||"uplynk"===t.integration)}function uk(t){return Nc(t)&&("theolive"===t.type||"theolive"===t.integration)}function ck(t){return Nc(t)&&"mediatailor"===t.integration}function dk(t){return Nc(t)&&"millicast"===t.type}function lk(t){if(t.sources)if(he(t.sources)){for(const i of t.sources)if(dk(i))return!0}else if(Nc(t.sources))return dk(t.sources);return!1}function ec(t){if(yo(t))return!t;if(ak(t))return!t.id;if(ok(t)){const i=t.ssai,s="live"===i.availabilityType&&i.assetKey,e="vod"===i.availabilityType&&i.contentSourceID&&i.videoID;return Boolean(s&&e)}return dk(t)?!t.src||!t.streamAccountId:!t.src}function fk(t){return Boolean(Nc(t)&&yo(t.src))}function vk(t){return t.type===We.gP||t.type===We.mP}function Ms(t){return yo(t)||fk(t)||ok(t)||ak(t)||dk(t)}function Ds(t){if(t){if(Ms(t))return ec(t);for(const i of t)if(!ec(i))return!1;return!0}return!0}function _k(){return{crossOrigin:Gh.Mk,useCredentials:!1,liveOffset:void 0,timeServer:void 0,hlsDateRange:void 0,experimentalRendering:!1,nativeUiRendering:!1,lowLatency:!1,useNativePlayback:!1,useManagedMediaSource:!1,dash:void 0,hls:void 0,abr:void 0,lcevc:void 0,ignoreEmbeddedTextTrackTypes:[],seamlessSwitchStrategy:Uh.LL,latencyConfiguration:void 0}}function gk(){return Jr({},_k(),{src:void 0,type:We._P,contentProtection:void 0,ssai:void 0,integrationData:void 0,isAdvertisement:void 0})}function mk(t){const i={allowedMimeTypes:void 0,preload:"midroll-and-postroll",showCountdown:!0,vpaidMode:tk.ENABLED,googleIma:{useNativeIma:!1,useAdUiElementForSsai:!1,bitrate:-1,language:void 0,uiElements:void 0,allowSeekingForGoogleDai:!1},theoads:ik,allowSkipAdBreak:!1};return void 0===t||(void 0!==t.preload&&(i.preload=function(t){return"none"===t?sk.NONE:sk.MIDROLL_AND_POSTROLL}(t.preload)),void 0!==t.showCountdown&&(i.showCountdown=Zu(t.showCountdown)),void 0!==t.vpaidMode&&(i.vpaidMode=function(t){switch(t){case"insecure":return tk.INSECURE;case"disabled":return tk.DISABLED;default:return tk.ENABLED}}(t.vpaidMode)),he(t.allowedMimeTypes)&&(i.allowedMimeTypes=t.allowedMimeTypes.filter(yo)),void 0!==t.googleIma&&(i.googleIma=function(t){return void 0===t?{useNativeIma:!1,useAdUiElementForSsai:!1,bitrate:-1,language:void 0,uiElements:void 0,allowSeekingForGoogleDai:!1}:{useNativeIma:Zu(t.useNativeIma),useAdUiElementForSsai:Zu(t.useAdUiElementForSsai),bitrate:null!=(i=t.bitrate)?i:-1,language:Y(t.language)?_o(t.language):void 0,uiElements:t.uiElements,allowSeekingForGoogleDai:Zu(t.allowSeekingForGoogleDai)};var i}(t.googleIma)),void 0!==t.theoads?i.theoads=Zu(t.theoads):i.theoads=ik,i.allowSkipAdBreak=Zu(t.allowSkipAdBreak)),i}function pk(t){if(!uu(t))return[];const i=[];for(const s of t)Nc(s)&&i.push(s);return i}function wk(t){return yo(t.src)||dk(t)}function yk(t){return he(t)?t.filter(ek):[]}r(),r();var pi=function(t){return t[t.VL=0]="VL",t[t.Qn=1]="Qn",t[t.WL=2]="WL",t[t.UL=3]="UL",t[t.GL=4]="GL",t}({}),Jt=class extends sh{constructor(t,i=pi.VL){super(d.Pw),this.currentTime=void 0,this.readyState=void 0,this.currentTime=t,this.readyState=i}};r();var Pi=class extends sh{constructor(t){super(d.zw),this.currentTime=void 0,this.currentTime=t}};r();var Ts=class extends sh{constructor(t){super(d.uo),this.currentTime=void 0,this.currentTime=t}};r();var ut=class extends sh{constructor(t,i=pi.Qn){super(Vo.bM),this.currentTime=void 0,this.readyState=void 0,this.currentTime=t,this.readyState=i}};r();var ur=class extends sh{constructor(t){super(d.Iw),this.duration=void 0,this.duration=t}};r();var Fs=class extends sh{constructor(t,i){super(d.Kw),this.currentTime=void 0,this.playbackRate=void 0,this.currentTime=t,this.playbackRate=i}};r();var Tc=class extends sh{constructor(t,i){super(d.vy),this.currentTime=void 0,this.currentProgramDateTime=void 0,this.currentTime=t,this.currentProgramDateTime=i}};r();var Be=class extends sh{constructor(t){super(d.Nw),this.currentTime=void 0,this.currentTime=t}};r();var ot=class extends sh{constructor(t,i=pi.WL){super(Vo.yM),this.currentTime=void 0,this.readyState=void 0,this.currentTime=t,this.readyState=i}};r();var ul=class extends sh{constructor(t){super(d.Jw),this.currentTime=void 0,this.currentTime=t}};r();var Wi=class extends sh{constructor(t){super(d.Qw),this.currentTime=void 0,this.currentTime=t}};r();var q=class extends sh{constructor(t,i){super(d._y),this.currentTime=void 0,this.volume=void 0,this.currentTime=t,this.volume=i}};r();var vo=class extends sh{constructor(t,i=pi.UL){super(Vo.pM),this.currentTime=void 0,this.readyState=void 0,this.currentTime=t,this.readyState=i}};r();var lt=class extends sh{constructor(t,i=pi.GL){super(Vo.wM),this.currentTime=void 0,this.readyState=void 0,this.currentTime=t,this.readyState=i}};r();var ca=class extends sh{constructor(t,i){super(Vo.bI),this.currentTime=void 0,this.readyState=void 0,this.currentTime=t,this.readyState=i}};r();var $e=class extends Kt{get error(){return this.errorObject.message}xa(){return this}constructor(t){super(sa.ma),this.errorObject=void 0,this.errorObject=t}};async function lo(t,i,s,e,n){void 0===s&&(s=3),void 0===e&&(e=1e3),void 0===n&&(n=1/0);let r=0;for(;;)try{return await t(i)}catch(t){if(Ui(t),r<s){const t=_.min(e*2**r,n);r++,await hi(t,i);continue}throw t}}r();var bk={maxRetries:void 0,minimumBackoff:200,maximumBackoff:3e4},Ak=Jr({},bk,{maxRetries:1/0});r();var ju=function(t){return t.INLINE="inline",t.FULLSCREEN="fullscreen",t.PICTURE_IN_PICTURE="picture-in-picture",t.NATIVE_PICTURE_IN_PICTURE="native-picture-in-picture",t}({}),Sk=function(t){return t.NONE="none",t.ALL="all",t.CONTENT="content",t}({});function Tk(t){switch(t){case"all":case"content":return t;default:return"none"}}function kk(t){var i;const s=Fa(t||{});return s.libraryLocation&&(s.libraryLocation=ie(s.libraryLocation,!0)),s.isEmbeddable=Boolean(s.isEmbeddable),s.cast=function(t){const i=BS(t?t.chromecast:void 0),s=function(t){switch(t){case"auto":return"auto";case"manual":default:return"manual";case"disabled":return"disabled"}}(t?t.strategy:void 0);return{chromecast:i,strategy:s}}(s.cast),s.ads=mk(s.ads),s.analytics=pk(s.analytics),s.mutedAutoplay=Tk(s.mutedAutoplay),s.allowNativeFullscreen=Boolean(s.allowNativeFullscreen),s.allowMixedContent=Boolean(s.allowMixedContent),s.persistVolume=Boolean(s.persistVolume),s.liveOffset=function(t){return Number(t)||void 0}(s.liveOffset),s.hlsDateRange=function(t){return Boolean(t)}(s.hlsDateRange),s.retainPlaybackRateOnSourceChange=Boolean(s.retainPlaybackRateOnSourceChange),s.license=function(t){return yo(t)?t:void 0}(s.license),s.licenseUrl=function(t){if(!t)return;try{return ie(t)}catch(t){return void Zd.lp("Invalid 'licenseUrl', falling back to default URL")}}(s.licenseUrl),s.abr=OT(s.abr),s.retryConfiguration=function(t){const i=Jr({},bk);return void 0!==t&&(void 0!==t.maxRetries&&(i.maxRetries=Number(t.maxRetries)),void 0!==t.minimumBackoff&&(i.minimumBackoff=Number(t.minimumBackoff)),void 0!==t.maximumBackoff&&(i.maximumBackoff=Number(t.maximumBackoff))),i}(s.retryConfiguration),s.hideDeprecationWarnings=Boolean(s.hideDeprecationWarnings),s.theoLive=function(t){if(!t)return t;return Jr({},t,{externalSessionId:t.externalSessionId?_o(t.externalSessionId):void 0,fallbackEnabled:_t(t.fallbackEnabled)})}(s.theoLive),null!=(i=s).uplynk||(i.uplynk=s.verizonMedia),s.ps5=function(t){var i;return Jr({},t,{playMode:"2K"===(null==t?void 0:t.playMode)?"2K":"4K",passThrough:null==(i=_t(null==t?void 0:t.passThrough))||i})}(s.ps5),s}function Ek(t){return{bt:t.bt,OR:t.OR,ct:t.ct,GR:t.GR,lt:t.lt,HR:t.HR,ix:t.ix,ux:t.ux,vx:t.vx,Sx:t.Sx,Rx:t.Rx,Nx:t.Nx,Mx:t.Mx,Ox:t.Ox}}function Rk(t,i){const s=i.Ox,e=i.ix;t.Ox=s,t.ix=e}function Ns(t,i,s){if(i===s)return;const e=i.bt!==s.bt,n=i.OR,r=i.ct,h=i.ix,o=i.ux,a=i.vx,u=i.Sx,c=i.Rx,d=(i.Mx,i.Nx,i.Ox),l=s.OR,f=s.ct,v=s.GR,_=s.HR,g=s.ix,m=s.ux,p=s.vx,w=s.Sx,y=s.Rx,b=(s.Mx,s.Nx,s.Ox);(e||u>pi.VL&&w===pi.VL)&&t.So(new Jt(l,w)),m&&!o?t.So(new Pi(l)):!m&&o&&t.So(new Ts(l)),w>=pi.Qn&&(e||u<pi.Qn)&&t.So(new ut(l,w)),f===r||S(f)&&S(r)||t.So(new ur(f)),p!==a&&t.So(new Fs(l,p)),l!==n&&t.So(new Tc(l,void 0)),v&&t.So(new Be(l)),w>=pi.WL&&(e||u<pi.WL)&&t.So(new ot(l,w)),y&&!c?t.So(new ul(l)):!y&&c&&t.So(new Wi(l)),b===d&&g===h||t.So(new q(l,b)),w>=pi.UL&&(e||u<pi.UL)&&t.So(new vo(l,w)),w>=pi.GL&&(e||u<pi.GL)&&t.So(new lt(l,w)),w!==u&&t.So(new ca(l,w)),_&&t.So(new $e(_))}function xk(t){switch(t){case ju.INLINE:case ju.FULLSCREEN:case ju.PICTURE_IN_PICTURE:case ju.NATIVE_PICTURE_IN_PICTURE:return t;default:return}}r();var Ik=class extends sh{constructor(t){super(d.Rw),this.currentSource=void 0,this.currentSource=t}};r();var qt=class extends sh{constructor(){super(d.Dw)}};r();var Pk=class extends sh{constructor(){super(d.Mw)}};r(),r(),r();var ar=function(t){return t.XL="enterpictureinpicture",t.ZL="exitpictureinpicture",t.ma="pictureinpictureerror",t}({}),Ck=class extends sh{constructor(){super(ar.XL)}};r();var Nk=class extends sh{constructor(){super(ar.ZL)}},qo=class extends fr{get MI(){return this.LI}set MI(t){if(t===this.LI)return;this.OI(this.LI);const i=this.LI.HL;this.LI=t,this.VI(t),!i&&this.LI.HL?this.So(new Ck):i&&!this.LI.HL&&this.So(new Nk)}VI(t){t.wn(ar.XL,this.Rs),t.wn(ar.ZL,this.Rs),t.wn(ar.ma,this.Rs)}OI(t){t.mn(ar.XL,this.Rs),t.mn(ar.ZL,this.Rs),t.mn(ar.ma,this.Rs)}get zL(){return this.LI.zL}get HL(){return this.LI.HL}yo(){return this.LI.yo()}jo(){return this.LI.jo()}kn(t){this.Vo(),this.OI(this.LI),t||this.LI.kn()}constructor(t){super(),this.LI=void 0,this.LI=t,this.VI(this.LI)}};r(),r();var Dk=class extends fr{get Ca(){var t;return null!=(t=this.hu)?t:this.hu=Bk(this)}YL(t){return{}}constructor(...t){super(...t),this.hu=void 0}};function Bk(t){return{diagnose:i=>t.YL(i),addEventListener(i,s){t.wn(Lk(i),s)},removeEventListener(i,s){t.mn(Lk(i),s)}}}var Mk=["stats"];function Lk(t){const i=Ta(t,_o);return(yo(i)?[i]:i).filter(t=>Ft(Mk,t))}var Ok=class extends fr{set MI(t){const i=this.LI;t!==i&&(i&&this.OI(i),t&&this.VI(t),this.LI=t)}get MI(){return this.LI}get Ca(){return this.hu||(this.hu=Bk(this)),this.hu}VI(t){t.wn(Mk,this.Rs)}OI(t){t.mn(Mk,this.Rs)}YL(t){var i,s;return null!=(s=null==(i=this.LI)?void 0:i.YL(t))?s:{}}kn(){this.Vo(),this.LI&&this.OI(this.LI),this.LI=void 0}constructor(){super(),this.LI=void 0,this.hu=void 0,this.LI=void 0}},Fk=class extends eS{Aa(){return this.KL}ER(){return this.qL}get YR(){return this.KR()}get qR(){var t;return null!=(t=this.jR())?t:this.jL}KR(){return this.QL}jR(){return this.jL}Cx(){return this.Gl}Bx(){return this.JL}$L(t){const i=this.RR;if(i===t)return;i.mw(this.eI);const s=Ek(this),e=this.LR(),n=this.Xx(),r=this.Zx();this.RR=t,this.qL.MI=t.ht,this.JL.MI=t.rt,this.Gl.MI=t.nt,this.KL.MI=t.Aa(),this.QL.MI=t.YR,this.jL.MI=t.qR,void 0!==s&&Ns(this,s,this);const h=this.LR();h!==e&&this.So(new Ik(h)),this.Xx()!==n&&this.So(new qt),this.Zx()!==r&&this.So(new Pk),t.dw(this.eI)}async kn(){await super.kn(),this.KL.kn(),this.qL.kn(),this.JL.kn(),this.Gl.kn(),this.QL.kn(),this.jL.kn()}constructor(t){super(t),this.qL=new Yu,this.JL=new Yu,this.Gl=new Jc,this.KL=void 0,this.QL=new Ri,this.jL=new Ok,this.KL=new qo(t.Aa()),this.qL.MI=t.ht,this.JL.MI=t.rt,this.Gl.MI=t.nt,this.QL.MI=t.YR,this.jL.MI=t.qR}};r();var Vk=class extends Fk{tx(){return function(t){let i=0,s=0,e=0,n=0,r=0,h=0,o=0;for(const a of t)i+=a.tO,s+=a.iO,e+=a.sO,n+=a.eO,r+=a.nO,h+=a.rO.amountOfBufferedAudioSegments,o+=a.rO.amountOfBufferedVideoSegments;return{tO:i,iO:s,sO:e,eO:n,nO:r,rO:{amountOfBufferedAudioSegments:h,amountOfBufferedVideoSegments:o}}}(this.hO.map(t=>t.$R))}Kx(){return vr(this.hO.map(t=>t.Kx())).then(ol)}hr(){return vr(this.hO.map(t=>t.hr())).then(ol)}Hx(){if(!this.ko){for(const t of this.hO)t.Hx();this.ko=!0}}xR(){const t=[];for(const i of this.hO)t.push(...i.xR());return t}tI(t){let i=!1;for(const s of this.hO)i=s.tI(t)||i;return i}So(t){this.tI(t)||super.So(t)}get MI(){return this.RR}set MI(t){this.$L(t)}oO(t){this.hO.push(t)}aO(t){is(this.hO,t)}$L(t){if(t===this.RR)return;const i=this.RR;i.mr(),super.$L(t),t.gr(i)}Jx(){for(const t of this.hO)t.Jx()}async kn(){this.Vo(),this.RR.mr();for(const t of this.hO)this.RR!==t&&await t.kn();await super.kn()}constructor(t){super(t),this.hO=[],this.ko=!1,this.uO=!1,this.oO(t)}};r();var Lt=function(t){return t[t.ABORTED=1]="ABORTED",t[t.NETWORK=2]="NETWORK",t[t.DECODE=3]="DECODE",t[t.SRC_NOT_SUPPORTED=4]="SRC_NOT_SUPPORTED",t[t.ENCRYPTED=5]="ENCRYPTED",t[t.LICENSE_INVALID=6]="LICENSE_INVALID",t[t.ADVERTISEMENT_ERROR=7]="ADVERTISEMENT_ERROR",t}({}),iu=class extends _f{get name(){return"MediaError"}constructor(t,i,s,e){super(i),this.code=void 0,this.message=void 0,this.cause=void 0,this.systemCode=void 0,this.code=t,this.message=null!=i?i:"Unknown error",this.cause=s,this.systemCode=e,m.captureStackTrace&&m.captureStackTrace(this,this.constructor)}};function Wk(t){lS(t,"MEDIA_ERR_ABORTED",1),lS(t,"MEDIA_ERR_NETWORK",2),lS(t,"MEDIA_ERR_DECODE",3),lS(t,"MEDIA_ERR_SRC_NOT_SUPPORTED",4),lS(t,"MEDIA_ERR_ENCRYPTED",5)}function xs(t){var i,s;return function(t){return t.category===Je.CONTENT_PROTECTION}(t)?new iu(5,t.message,null==(i=t.cause)?void 0:i.message,t.systemCode):new iu(Uk(t.code),t.message,null==(s=t.cause)?void 0:s.message)}function Uk(t){if(t===Ne.MEDIA_ABORTED)return 1;if(t===Ne.MANIFEST_LOAD_ERROR||t===Ne.MEDIA_LOAD_ERROR||t===Ne.SUBTITLE_LOAD_ERROR)return 2;if(t===Ne.MEDIA_DECODE_ERROR)return 3;if(t===Ne.MEDIA_NOT_SUPPORTED)return 4;const i=Je.fromCode(t);return i===Je.NETWORK?2:i===Je.SOURCE?4:i===Je.LICENSE?6:i===Je.CONTENT_PROTECTION?5:i===Je.AD?7:3}function Gk(t){return new Wt(Xk(t.code),t.message,t)}function Xk(t){switch(t){case 1:return Ne.MEDIA_ABORTED;case 2:return Ne.NETWORK_ERROR;case 3:return Ne.MEDIA_DECODE_ERROR;case 4:return Ne.SOURCE_NOT_SUPPORTED;case 5:return Ne.CONTENT_PROTECTION_ERROR;case 6:return Ne.LICENSE_ERROR;case 7:return Ne.AD_ERROR}}Wk(iu),Wk(iu.prototype),r(),r(),r(),r(),r();var O=class extends To{tt(t){return super.tt(t)}xa(){return kS(this)}};r(),r(),r(),r();var Wc=class{get CI(){return this.cO}get V(){return this.cO.length}get Ca(){return this.hu||(this.hu=function(t){const i=t.CI.map(t=>t.Ca);return i.item=i=>{const s=0|i,e=t.DI(s);return e&&e.Ca||void 0},i}(this)),this.hu}dO(t){this.cO.push(t),this.hu&&this.hu.push(t.Ca)}vS(t){is(this.cO,t),this.hu&&is(this.hu,t.Ca)}DI(t){return this.cO[t]}lO(t){return he(t)?function(t,i){for(const s of i)if(!Ft(t,s))return!1;return!0}(this.cO,t):Ft(this.cO,t)}hr(){Lr(this.cO),this.hu&&Lr(this.hu)}constructor(){this.cO=[],this.hu=void 0}};r();var nc=class extends nn{xa(){return new Zk(this.Ht.Ca)}constructor(t){super(M.kI),this.Ht=void 0,this.Ht=t}},Zk=class extends Hn{constructor(t){super("update"),this.track=void 0,this.track=t}};r();var Hk=0;function ai(){return Hk++}var zk=0;var Yk=0;function Kk(){return Yk++}var qk=0;function jk(){return qk++}var Qk=0;var Jk=class extends fr{get KI(){}get Rt(){return this.We}set Rt(t){this.We!==t&&(this.We=t,this.fO=t,this.So(new Tu(this)))}get fO(){return this.vO.enabled}set fO(t){this.vO.enabled=t}get Ca(){return this.hu||(this.hu=co(this)),this.hu}get o(){return this.rS}get qI(){return this._O}get Lt(){return this.vO.kind}get Th(){return this.gO}set Th(t){t!==this.gO&&(this.gO=t,this.So(new nc(this)))}get bs(){return this.vO.language}get Hk(){return this.Rt?"enabled":"disabled"}get mO(){return this.vO}get QI(){return this.cO}get JI(){}set JI(t){}pO(t){this.Rt=t}wO(){this.Rt=this.fO}constructor(t){super(),this.Kp=Mo.Ck,this.vO=void 0,this.rS=void 0,this.gO=void 0,this._O=void 0,this.We=!1,this.cO=void 0,this.hu=void 0,this.vO=t,this._O=ai(),this.rS=""+Qk++,this.gO=t.label,this.cO=new Wc,this.wO()}};r();var $k=0;var tE=class extends fr{get KI(){}get Rt(){return this.We}set Rt(t){this.We!==t&&(this.We=t,this.fO=t,this.So(new Tu(this)))}get fO(){return Boolean(this.vO.selected)}set fO(t){this.vO.selected=t}get Ca(){return this.hu||(this.hu=co(this)),this.hu}get o(){return this.rS}get qI(){return this._O}get Lt(){return"main"}get Th(){return this.gO}set Th(t){t!==this.gO&&(this.gO=t,this.So(new nc(this)))}get bs(){return this.vO.language}get Hk(){return this.Rt?"enabled":"disabled"}get mO(){return this.vO}get QI(){return this.cO}get JI(){}set JI(t){}wO(){this.Rt=this.fO}pO(t){this.Rt=t}constructor(t){super(),this.Kp=Mo.Nk,this.vO=void 0,this.rS=void 0,this._O=void 0,this.We=!1,this.cO=void 0,this.gO=void 0,this.hu=void 0,this.vO=t,this._O=ai(),this.rS=""+$k++,this.cO=new Wc,this.gO=t.label,this.wO()}};r();var iE=class extends sh{constructor(t){super(d.ww),this.QR=void 0,this.QR=t}};r(),r();var Ra=function(t){return t[t.NONE=0]="NONE",t[t.LOADING=1]="LOADING",t[t.LOADED=2]="LOADED",t[t.ERROR=3]="ERROR",t}({});r(),r();var sE=function(t){return t.yO="cue",t.bO="region",t.AO="stylesheet",t}({});r(),r();var eE={"line-left":"start",center:"middle","line-right":"end"},nE={start:"line-left",middle:"center",end:"line-right"};function rE(t,i){if("auto"===t)switch(i){case"start":case"left":return"line-left";case"end":case"right":return"line-right";default:return"center"}return t}function hE(t,i){if("auto"===t)switch(i){case"left":return 0;case"right":return 100;default:return 50}return function(t,i){const s="number"==typeof t?t:C(t);return S(s)?i:s}(t,50)}r(),r(),r();var ye=function(t){return t.XL="yo",t.ZL="jo",t.kI="er",t}({}),se=class extends nn{constructor(t,i){super(t),this.SO=void 0,this.SO=i}},Ee=class extends Hn{constructor(t,i){super(t),this.cue=void 0,this.cue=i}};function oE(t){const i=[ye.XL,ye.ZL,ye.kI];let s;const e={get TO(){return t},get track(){return t.Ht.Ca},get id(){return t.o},get uid(){return t.qI},get startTime(){return t.kO},set startTime(i){t.kO=i},get endTime(){return t.EO},set endTime(i){t.EO=i},get content(){return t.U},addEventListener(t,i){const e=Ta(t,_o);s.wn(e,i)},removeEventListener(t,i){const e=Ta(t,_o);s.mn(e,i)}};return s=new vm(e),t.wn(i,t=>s.So(t.Ca)),e}function aE(){}function uE(t){return Qr(oE(t),{get align(){return t.RO},get line(){return t.xO},get lineAlign(){return t.IO},get position(){return t.mo},get positionAlign(){return t.PO},get region(){return t.CO?t.CO.Ca:null},get size(){return t.Vy},get snapToLines(){return t.DO},get text(){return t.U},get vertical(){return t.Pt}})}r(),r();var Ys=class extends se{xa(){return new cE(this.SO.Ca)}constructor(t){super(ye.kI,t)}},cE=class extends Ee{constructor(t){super("update",t)}};r();var dE=class extends nn{xa(){return new lE(this.SO.Ca)}constructor(t){super(M.lI),this.SO=void 0,this.SO=t}},lE=class extends Hn{constructor(t){super("updatecue"),this.cue=void 0,this.cue=t}},fE=.02;function vE(t,i){return we(t.BO,i.BO,fE)&&we(t.MO,i.MO,fE)&&t.o===i.o}var Pc=class extends fr{get kO(){return this.LO}set kO(t){var i,s;this.LO!==t&&(this.LO=t,null==(i=this.OO)||i.FO(this),this.So(new Ys(this)),null==(s=this.OO)||s.So(new dE(this)))}get EO(){return this.VO}set EO(t){var i,s;this.VO!==t&&(this.VO=t,null==(i=this.OO)||i.FO(this),this.So(new Ys(this)),null==(s=this.OO)||s.So(new dE(this)))}get o(){return this.rS}get qI(){return this._O}get Ca(){return this.hu||(this.hu=this.xa()),this.hu}xa(){return oE(this)}get ro(){return this.ho}set ro(t){this.ho=t}get Ht(){return this.OO}set Ht(t){this.OO=t}get U(){return this.WO}set U(t){var i;this.WO!==t&&(this.WO=t,this.So(new Ys(this)),null==(i=this.OO)||i.So(new dE(this)))}get UO(){return this.GO}set UO(t){this.GO=t}XO(t){return this===t||_S(this,t)&&vE(this,t)&&this.ZO(t)}ZO(t){return T(this.U,t.U)}HO(t,i){this.LO=t,this.VO=i,this.BO=t,this.MO=i}kn(){this.Vo()}constructor(t,i,s,e,n){super(),this._O=void 0,this.rS=void 0,this.BO=void 0,this.MO=void 0,this.LO=void 0,this.VO=void 0,this.hu=void 0,this.OO=void 0,this.ho=!1,this.WO=void 0,this.GO=void 0,this.zO=-1,this._O=jk(),this.LO=t,this.VO=i,this.BO=t,this.MO=i,this.WO=s,this.GO=Boolean(e),this.rS=null!=n?n:""}};function _E(t,i){return t.U===i.U&&t.xO===i.xO&&t.IO===i.IO&&t.mo===i.mo&&t.PO===i.PO&&t.CO===i.CO&&t.DO===i.DO&&t.Vy===i.Vy&&t.RO===i.RO&&t.Pt===i.Pt}var Oe=class extends Pc{get Ca(){return this.hu||(this.hu=uE(this)),this.hu}get Kp(){return sE.yO}ZO(t){return _E(this,t)}constructor(t,i,s,e,n){super(t,i,s,e,n),this.xO="auto",this.IO="start",this.mo="auto",this.PO="auto",this.CO=void 0,this.DO=!0,this.Vy=100,this.RO="center",this.Pt=""}};function gE(t){const i=t.xO,s=ih(i);return s&&!t.DO&&(i<0||i>100)?100:s?Number(i):t.DO?-1:100}function mE(t){return hE(t.mo,t.RO)}function pE(t){return rE(t.PO,t.RO)}function wE(t){const i=pE(t),s=mE(t);let e;switch(i){case"line-left":e=100-s;break;case"line-right":e=s;break;case"center":e=s<=50?2*s:2*(100-s)}return _.min(t.Vy,e)}function yE(t){return{get id(){return t.o},get identifier(){return t.o},get lines(){return t.YO},get regionAnchorX(){return t.KO},get regionAnchorY(){return t.qO},get scrollValue(){return t.jO},get viewportAnchorX(){return t.QO},get viewportAnchorY(){return t.JO},get width(){return t.Ti}}}r(),r();var bE=class{get Ca(){return this.hu||(this.hu=yE(this)),this.hu}get Kp(){return sE.bO}constructor(t,i,s,e,n,r,h,o){this.o=void 0,this.Ti=void 0,this.YO=void 0,this.KO=void 0,this.qO=void 0,this.QO=void 0,this.JO=void 0,this.jO=void 0,this.hu=void 0,this.o=t,this.Ti=i,this.YO=s,this.KO=e,this.qO=n,this.QO=r,this.JO=h,this.jO=o}};r(),r();var $r=1e6,AE=class{$O(t){return this.tF()*t}iF(t){return this.sF(t)>0}eF(t){return this.sF(t)>=0}nF(t,i){return this.hF(t).rF(i)}XO(t){return 0===this.sF(t)}oF(t){return this.sF(t)<0}rF(t){return this.sF(t)<=0}aF(){return this.uF()?this.cF():this}dF(t){return this.dO(t.cF())}hF(t){return this.dF(t).aF()}};function SE(t,i){return t.lF()?i.lF()?Ba.rh:Ba.Fg:i.lF()?Ba.Vg:t.fF()?i.fF()&&t.uF()===i.uF()?Ba.rh:t.uF()?Ba.Vg:Ba.Fg:i.uF()?Ba.Fg:Ba.Vg}r(),r();var TE=4294967296,kE=TE*TE,EE=kE*kE,RE=EE/2,jt=class t{static vF(i,s,e){return e?new t(i.toUnsigned(),s.toUnsigned()):new t(i.toSigned(),s.toSigned())}static _F(i){return i.unsigned?new t(i,mh.UZERO):new t(i,i.isNegative()?mh.NEG_ONE:mh.ZERO)}static gF(i,s){if(S(i))return s?t.mF:t.pF;if(s){if(i<0)return t.mF;if(i>=EE)return t.wF}else{if(i<=-RE)return t.yF;if(i+1>=RE)return t.bF}return i<0?t.gF(-i,s).cF():t.vF(mh.fromNumber(i%kE),mh.fromNumber(i/kE),s)}AF(){return this.SF.unsigned}TF(){return this.kF.isZero()&&this.SF.isZero()}uF(){return this.SF.isNegative()}EF(){return this.AF()?t.vF(this.kF,this.SF,!1):this}RF(){return this.AF()?this:t.vF(this.kF,this.SF,!0)}xF(){return this.kF}tF(){return this.uF()?-this.cF().tF():this.SF.toNumber()*kE+this.kF.toUnsigned().toNumber()}IF(){return this.kF.toInt()}XO(t){return(this.AF()===t.AF()||this.SF.getHighBits()>>>31!=1||t.SF.getHighBits()>>>31!=1)&&(this.SF.toUnsigned().eq(t.SF.toUnsigned())&&this.kF.toUnsigned().eq(t.kF.toUnsigned()))}sF(t){if(this.XO(t))return Ba.rh;const i=this.uF(),s=t.uF();if(i&&!s)return Ba.Vg;if(!i&&s)return Ba.Fg;if(!this.AF())return this.dF(t).uF()?Ba.Vg:Ba.Fg;const e=this.RF(),n=t.RF(),r=n.SF.comp(e.SF);return r>0||0===r&&n.kF.gt(e.kF)?Ba.Vg:Ba.Fg}oF(t){return this.sF(t)<0}rF(t){return this.sF(t)<=0}PF(t){return this.sF(t)>0}CF(t){return this.sF(t)>=0}NF(){return new t(this.kF.not(),this.SF.not())}DF(i){return new t(this.kF.and(i.kF),this.SF.and(i.SF))}BF(i){return new t(this.kF.or(i.kF),this.SF.or(i.SF))}MF(i){const s=127&i;return 0===s?this:s<64?t.vF(this.kF.shl(s),this.SF.shl(s).or(this.kF.shru(64-s)),this.AF()):t.vF(mh.ZERO,this.kF.shl(s-64),this.AF())}LF(i){const s=127&i;return 0===s?this:s<64?t.vF(this.kF.shru(s).or(this.SF.shl(64-s)),this.SF.shr(s),this.AF()):t.vF(this.SF.shr(s-64),this.SF.isNegative()?mh.NEG_ONE:mh.ZERO,this.AF())}OF(i){const s=127&i;return 0===s?this:s<64?t.vF(this.kF.shru(s).or(this.SF.shl(64-s)),this.SF.shru(s),this.AF()):64===s?t.vF(this.SF,mh.ZERO,this.AF()):t.vF(this.SF.shru(s-64),mh.ZERO,this.AF())}dO(i){const s=this.SF.high>>>16,e=65535&this.SF.high,n=this.SF.low>>>16,r=65535&this.SF.low,h=this.kF.high>>>16,o=65535&this.kF.high,a=this.kF.low>>>16,u=65535&this.kF.low,c=i.SF.high>>>16,d=65535&i.SF.high,l=i.SF.low>>>16,f=65535&i.SF.low,v=i.kF.high>>>16,_=65535&i.kF.high,g=i.kF.low>>>16;let m=0,p=0,w=0,y=0,b=0,A=0,S=0,T=0;T+=u+(65535&i.kF.low),S+=T>>>16,T&=65535,S+=a+g,A+=S>>>16,S&=65535,A+=o+_,b+=A>>>16,A&=65535,b+=h+v,y+=b>>>16,b&=65535,y+=r+f,w+=y>>>16,y&=65535,w+=n+l,p+=w>>>16,w&=65535,p+=e+d,m+=p>>>16,p&=65535,m+=s+c,m&=65535;const k=this.AF(),E=mh.fromBits(w<<16|y,m<<16|p,k),R=mh.fromBits(S<<16|T,b<<16|A,k);return t.vF(R,E,k)}dF(t){return this.dO(t.cF())}cF(){return this.NF().dO(t.FF)}VF(i){if(this.TF()||i.TF())return this.AF()?t.mF:t.pF;if(this.uF())return i.uF()?this.cF().VF(i.cF()):this.cF().VF(i).cF();if(i.uF())return this.VF(i.cF()).cF();if(this.SF.isZero()&&0===this.kF.high&&i.SF.isZero()&&0===i.kF.high)return t._F(this.kF.multiply(i.kF));const s=mh.fromBits(4294967295,0,!0),e=this.kF.and(s),n=this.kF.shru(32),r=this.SF.and(s),h=this.SF.shru(32),o=i.kF.and(s),a=i.kF.shru(32),u=i.SF.and(s),c=i.SF.shru(32);let d=mh.UZERO,l=mh.UZERO,f=mh.UZERO,v=mh.UZERO;d=d.add(e.mul(o)),l=l.add(d.shru(32)),d=d.and(s),l=l.add(n.mul(o)),f=f.add(l.shru(32)),l=l.and(s),l=l.add(e.mul(a)),f=f.add(l.shru(32)),l=l.and(s),f=f.add(r.mul(o)),v=v.add(f.shru(32)),f=f.and(s),f=f.add(n.mul(a)),v=v.add(f.shru(32)),f=f.and(s),f=f.add(e.mul(u)),v=v.add(f.shru(32)),f=f.and(s),v=v.add(h.mul(o)).add(r.mul(a)).add(n.mul(u)).add(e.mul(c)).and(s);const _=mh.fromBits(d.getLowBitsUnsigned(),l.getLowBitsUnsigned(),!0),g=mh.fromBits(f.getLowBitsUnsigned(),v.getLowBitsUnsigned(),!0);return t.vF(_,g,this.AF())}WF(i){let s,e,n=i;if(n.TF())throw new RangeError("division by zero");if(this.TF())return this.AF()?[t.mF,t.mF]:[t.pF,t.pF];if(this.AF()){if(n.AF()||(n=n.RF()),n.PF(this))return[t.mF,this];if(n.PF(this.OF(1)))return e=t.UF,s=this.dF(n),[e,s];e=t.mF}else{if(this.XO(t.yF)){if(n.XO(t.FF)||n.XO(t.GF))return[t.yF,t.pF];if(n.XO(t.yF))return[t.FF,t.pF];{const i=this.LF(1).XF(n).MF(1);return i.XO(t.pF)?e=n.uF()?t.FF:t.GF:(s=this.dF(n.VF(i)),e=i.dO(s.XF(n))),s=this.dF(n.VF(e)),[e,s]}}if(n.XO(t.yF))return this.AF()?[t.mF,this]:[t.pF,this];if(this.uF())return n.uF()?this.cF().WF(n.cF()):([e,s]=this.cF().WF(n),[e.cF(),s.cF()]);if(n.uF())return[e,s]=this.WF(n.cF()),[e.cF(),s.cF()];e=t.pF}for(s=this;s.CF(n);){let i=_.max(1,_.floor(s.tF()/n.tF()));const r=_.ceil(_.log(i)/_.LN2),h=r<=48?1:2**(r-48);let o=t.gF(i),a=o.VF(n);for(;a.uF()||a.PF(s);)i-=h,o=t.gF(i,this.AF()),a=o.VF(n);o.TF()&&(o=t.FF),e=e.dO(o),s=s.dF(a)}return[e,s]}XF(t){return this.WF(t)[0]}ZF(t){return this.WF(t)[1]}toString(i){const s=i||10;if(s<2||s>36)throw new RangeError("radix");if(this.TF())return"0";if(this.uF()){if(this.XO(t.yF)){const i=t.gF(s),e=this.XF(i),n=e.VF(i).dF(this);return e.toString(s)+n.IF().toString(s)}return"-"+this.cF().toString(s)}const e=t.gF(s**6,this.AF());let n=this,r="";for(;;){const t=n.XF(e);let i=(n.dF(t.VF(e)).IF()>>>0).toString(s);if(n=t,n.TF())return i+r;for(;i.length<6;)i="0"+i;r=String(i)+r}}constructor(t,i){this.kF=void 0,this.SF=void 0,this.kF=t,this.SF=i}};jt.pF=jt._F(mh.ZERO),jt.mF=jt._F(mh.UZERO),jt.FF=jt._F(mh.ONE),jt.UF=jt._F(mh.UONE),jt.GF=jt._F(mh.NEG_ONE),jt.bF=jt.vF(mh.NEG_ONE,mh.MAX_VALUE,!1),jt.wF=jt.vF(mh.MAX_UNSIGNED_VALUE,mh.MAX_UNSIGNED_VALUE,!0),jt.yF=jt.vF(mh.ZERO,mh.MIN_VALUE,!1),r();var xE=class t{get fF(){return!isFinite(this.HF)}get dd(){return this.HF/this.UN}static zF(i){return new t(_.ceil(i.HF),i.UN)}static YF(i){return new t(_.floor(i.HF),i.UN)}static KF(t,i){return t.eF(i)?t:i}static qF(t,i){return t.rF(i)?t:i}dO(i){return this.UN>=i.UN?new t(this.HF+i.jF(this.UN).HF,this.UN):new t(this.jF(i.UN).HF+i.HF,i.UN)}iF(t){return t.oF(this)}eF(t){return t.rF(this)}hF(i){if(this.UN>=i.UN){const s=_.abs(this.HF-i.jF(this.UN).HF),e=this.UN;return new t(s,e)}return i.hF(this)}nF(t,i){return this.hF(t).rF(i)}sF(t){return function(t,i){return t.UN>=i.UN?tf(t.HF,i.jF(t.UN).HF):tf(t.jF(i.UN).HF,i.HF)}(this,t)}XO(t){return 0===this.sF(t)}oF(t){return this.sF(t)<0}rF(t){return this.sF(t)<=0}jF(i){return new t(this.HF*(i/this.UN),i)}dF(i){return this.UN>=i.UN?new t(this.HF-i.jF(this.UN).HF,this.UN):new t(this.jF(i.UN).HF-i.HF,i.UN)}QF(i){return new t(this.HF*i,this.UN)}constructor(t,i=1){this.HF=void 0,this.UN=void 0,this.HF=t,this.UN=i}};xE.fd=new xE(1/6,1),xE.pF=new xE(0),xE.JF=new xE(1/0),xE.tV=1e6;var $i=class t extends AE{static iV(i,s){return void 0===s&&(s=$r),t.gF(i*s,s)}static gF(i,s){return S(i)?t.sV:i===1/0?t.eV:i===-1/0?t.nV:new t(mh.fromNumber(i),s)}static _F(i,s){return new t(i,s)}static rV(i){return t.iV(i.dd,$r)}static hV(i){return new t(mh.fromNumber(i.getTime()),1e3)}static KF(t,i){return t.eF(i)?t:i}static qF(t,i){return t.rF(i)?t:i}static oV(i,s,e){return t.KF(s,t.qF(e,i))}uF(){return this.XE.isNegative()}TF(){return 0!==this.UN&&this.XE.isZero()}fF(){return 0===this.UN&&!this.XE.isZero()}lF(){return 0===this.UN&&this.XE.isZero()}tF(){if(0===this.UN)return this.XE.isZero()?NaN:this.XE.isNegative()?-1/0:1/0;const t=this.XE.divide(this.UN),i=this.XE.subtract(t.multiply(this.UN));return t.toNumber()+i.toNumber()/this.UN}xF(){if(0===this.UN)throw new m("Failed to convert timestamp");return this.XE}aV(){return new Date(0===this.UN?NaN:this.jF(1e3).XE.toNumber())}uV(){return new xE(0===this.UN?this.tF():this.XE.toNumber(),this.UN)}jF(i,s){void 0===s&&(s=Ki.cV);const e=this.UN;if(e===i)return this;if(0===e)return this;const n=Ql(e,i),r=function(t,i,s){const[e,n]=t.WF(i);if(n.TF())return e;if(s===Ki.cV)return n.uF()?e.dF(jt.FF):e;if(s===Ki.dV)return n.uF()?e:e.dO(jt.FF);{const t=n.VF(jt.gF(2));return t.uF()?t.cF().oF(i)?e:e.dF(jt.FF):t.oF(i)?e:e.dO(jt.FF)}}(jt._F(this.XE).VF(jt.gF(i/n)),jt.gF(e/n),s);return new t(r.xF(),i)}sF(t){if(this===t)return Ba.rh;if(0===this.UN||0===t.UN)return SE(this,t);if(this.TF())return t.TF()?Ba.rh:t.uF()?Ba.Fg:Ba.Vg;if(t.TF())return this.uF()?Ba.Vg:Ba.Fg;const i=_.min(this.UN,t.UN),s=this.jF(i,Ki.lV).XE,e=t.jF(i,Ki.lV).XE;return s.compare(e)}cF(){return 0===this.UN?function(t){0;return t.lF()?t:t.uF()?$i.eV:$i.nV}(this):new t(this.XE.negate(),this.UN)}dO(i){if(0===this.UN||0===i.UN)return function(t,i){0;if(t.lF()||i.lF())return $i.sV;if(t.fF()&&i.fF())return t.uF()===i.uF()?t:$i.sV;return t.fF()?t:i}(this,i);if(this.TF())return i;if(i.TF())return this;const s=_.max(this.UN,i.UN),e=this.jF(s,Ki.lV),n=i.jF(s,Ki.lV);return new t(e.XE.add(n.XE),s)}VF(i){if(this.lF()||S(i))return t.sV;if(this.fF()||!isFinite(i)){if(this.TF()||0===i)return t.sV;{const s=this.uF()?t.nV:t.eV;return i<0?s.cF():s}}return this.TF()?this:new t(0===i?mh.ZERO:this.XE.multiply(i),this.UN)}XF(i){if(this.lF()||S(i))return t.sV;if(this.fF())return isFinite(i)?0===i?1/i<0?this.cF():this:i<0?this.cF():this:t.sV;if(!isFinite(i))return new t(mh.ZERO,this.UN);if(this.TF())return 0===i?t.sV:new t(mh.ZERO,this.UN);if(0===i){const s=this.uF()?t.nV:t.eV;return 1/i<0?s.cF():s}return new t(this.XE.divide(i),this.UN)}fV(){return[this.XE.low,this.XE.high,this.UN]}constructor(t,i){super(),this.XE=void 0,this.UN=void 0,this.XE=t.toSigned(),this.UN=i>>>0}};$i.pF=new $i(mh.ZERO,$r),$i.sV=new $i(mh.ZERO,0),$i.eV=new $i(mh.ONE,0),$i.nV=new $i(mh.NEG_ONE,0),r();var IE=class t extends AE{static iV(i,s){return void 0===s&&(s=$r),t.gF(i*s,s)}static gF(i,s){return S(i)?t.sV:i===1/0?t.eV:i===-1/0?t.nV:new t(BigInt(_.floor(i)),s)}static _F(i,s){return new t(BigInt(i.high)<<BigInt(32)|BigInt(i.low>>>0),s)}static rV(i){return t.iV(i.dd,$r)}static hV(i){return t.gF(i.getTime(),1e3)}static get pF(){return t.vV||(t.vV=new t(BigInt(0),$r)),t.vV}static get sV(){return t._V||(t._V=new t(BigInt(0),0)),t._V}static get eV(){return t.gV||(t.gV=new t(BigInt(1),0)),t.gV}static get nV(){return t.mV||(t.mV=new t(BigInt(-1),0)),t.mV}static KF(t,i){return t.eF(i)?t:i}static qF(t,i){return t.rF(i)?t:i}static oV(i,s,e){return t.KF(s,t.qF(e,i))}uF(){return this.XE<BigInt(0)}TF(){return 0!==this.UN&&this.XE===BigInt(0)}fF(){return 0===this.UN&&this.XE!==BigInt(0)}lF(){return 0===this.UN&&this.XE===BigInt(0)}tF(){if(0===this.UN)return this.XE===BigInt(0)?NaN:this.XE<BigInt(0)?-1/0:1/0;const t=this.XE/BigInt(this.UN),i=this.XE-t*BigInt(this.UN);return Number(t)+Number(i)/this.UN}xF(){if(0===this.UN)throw new m("Failed to convert timestamp");return this.pV()}pV(){const t=this.XE&BigInt(4294967295),i=this.XE>>BigInt(32)&BigInt(4294967295);return mh.fromBits(Number(t),Number(i))}aV(){return new Date(0===this.UN?NaN:Number(this.jF(1e3).XE))}uV(){return new xE(0===this.UN?this.tF():Number(this.XE),this.UN)}jF(i,s){void 0===s&&(s=Ki.cV);const e=this.UN;if(e===i)return this;if(0===e)return this;const n=Ql(e,i),r=function(t,i,s){const e=t/i,n=t-e*i;if(n===BigInt(0))return e;if(s===Ki.cV)return n<BigInt(0)?e-BigInt(1):e;if(s===Ki.dV)return n<BigInt(0)?e:e+BigInt(1);{const t=n*BigInt(2);return t<BigInt(0)?-t<i?e:e-BigInt(1):t<i?e:e+BigInt(1)}}(this.XE*BigInt(i/n),BigInt(e/n),s);return new t(r,i)}sF(t){if(this===t)return Ba.rh;if(0===this.UN||0===t.UN)return SE(this,t);if(this.TF())return t.TF()?Ba.rh:t.uF()?Ba.Fg:Ba.Vg;if(t.TF())return this.uF()?Ba.Vg:Ba.Fg;const i=_.min(this.UN,t.UN),s=this.jF(i,Ki.lV).XE,e=t.jF(i,Ki.lV).XE;return s>e?Ba.Fg:s<e?Ba.Vg:Ba.rh}cF(){return 0===this.UN?function(t){0;return t.lF()?t:t.uF()?IE.eV:IE.nV}(this):new t(-this.XE,this.UN)}dO(i){if(0===this.UN||0===i.UN)return function(t,i){0;if(t.lF()||i.lF())return IE.sV;if(t.fF()&&i.fF())return t.uF()===i.uF()?t:IE.sV;return t.fF()?t:i}(this,i);if(this.TF())return i;if(i.TF())return this;const s=_.max(this.UN,i.UN),e=this.jF(s,Ki.lV),n=i.jF(s,Ki.lV);return new t(e.XE+n.XE,s)}VF(i){if(this.lF()||S(i))return t.sV;if(this.fF()||!isFinite(i)){if(this.TF()||0===i)return t.sV;{const s=this.uF()?t.nV:t.eV;return i<0?s.cF():s}}return this.TF()?this:new t(0===i?BigInt(0):this.XE*BigInt(i),this.UN)}XF(i){if(this.lF()||S(i))return t.sV;if(this.fF())return isFinite(i)?0===i?1/i<0?this.cF():this:i<0?this.cF():this:t.sV;if(!isFinite(i))return new t(BigInt(0),this.UN);if(this.TF())return 0===i?t.sV:new t(BigInt(0),this.UN);if(0===i){const s=this.uF()?t.nV:t.eV;return 1/i<0?s.cF():s}return new t(this.XE/BigInt(i),this.UN)}fV(){const t=this.pV();return[t.low,t.high,this.UN]}constructor(t,i){super(),this.XE=void 0,this.UN=void 0,this.XE=BigInt.asIntN(64,t),this.UN=i>>>0}};IE.vV=void 0,IE._V=void 0,IE.gV=void 0,IE.mV=void 0;var Ki=function(t){return t[t.cV=0]="cV",t[t.dV=1]="dV",t[t.lV=2]="lV",t}({}),Xa=function(){try{return"function"==typeof BigInt&&"bigint"==typeof BigInt(0)}catch(t){return!1}}()?IE:$i;function PE(t,i){return t.sF(i)}function oc(t,i){return void 0!==t?void 0!==i?Xa.qF(t,i):t:i}r();var CE=2**33,NE=Eu(()=>Xa.gF(CE,9e4)),DE=Eu(()=>NE().XF(2));r();var BE={wV:0,yV:1/0,bV:0},ME=["WEBVTT","WEBVTT ","WEBVTT\t","WEBVTT\n"],LE=[" ","\t","\n","\f","\r"],OE=/^\d*$/,FE=/.*[0-9]+.*/,VE=/^[\d.-]+$/,WE=/(^\.|\.$)/,UE=/(\D\.|\.\D)/;function GE(t,i,s){void 0===i&&(i=BE),void 0===s&&(s=!0);return XE(hp(xh(t),new J),i,s)}function XE(t,i,s){void 0===i&&(i=BE),void 0===s&&(s=!0);const e={L:[],AV:[],SV:[]},n=ZE(t),r=new J,h=!1;if(sR(n),HE(n,t=>"\n"!==t,r),r.ac>=n.length)return e;if(r.Dy(1),"\n"!==n.charAt(r.ac)){jE(zE(n,r,h,!0,e,i,s),e)}else r.Dy(1);for(HE(n,t=>"\n"===t,r);r.ac<n.length;){jE(zE(n,r,h,!1,e,i,s),e),HE(n,t=>"\n"===t,r)}return e}function ZE(t){const i=to(t,"\0"," "),s=to(i,"\r\n","\n");return to(s,"\r","\n")}function HE(t,i,s){const e=s.ac;for(;s.ac<t.length&&i(t.charAt(s.ac));)s.Dy(1);return t.substring(e,s.ac)}function zE(t,i,s,e,n,r,h){let o,a=0,u=i.ac,c="",d=!1,l=!1,f=null,v=null,_=null;for(;!d;)if(o=HE(t,t=>"\n"!==t,i),a++,i.ac>=t.length?d=!0:i.Dy(1),Vh(o,"--\x3e")){if(e||1!==a&&(2!==a||l)){i.By(u);break}l=!0,u=i.ac,f=new Oe(0,0,"",!1,c);try{QE(o,n.AV,f,r,h),c=""}catch(t){Zd.lp(t),f=null}}else{if(""===o)break;e&&Qe(o,"X-TIMESTAMP-MAP")&&(n.TV=YE(o)),e||2!==a||s||(eo("STYLE",c.replace(/ /g,""))?(v={Kp:sE.AO},c=""):eo("REGION",c.replace(/ /g,""))&&(_=new bE("",100,3,0,100,0,100,""),c="")),c&&(c+="\n"),c+=o,u=i.ac}if(f)return f.U=c,f;if(v);else if(_)return function(t,i){const s=t.split(/\s/),e=":";for(const t of s)if(0!==t.length&&Vh(t,e)&&t.charAt(0)!==e&&t.charAt(t.length-1)!==e){const s=t.indexOf(e),n=t.substring(0,s),r=t.substring(s+1,t.length);switch(n.toUpperCase()){case"ID":vR(r,i);break;case"WIDTH":mR(r,i);break;case"LINES":gR(r,i);break;case"REGIONANCHOR":{const t=fR(r);t&&(i.KO=t[0],i.qO=t[1]);break}case"VIEWPORTANCHOR":{const t=fR(r);t&&(i.QO=t[0],i.JO=t[1]);break}case"SCROLL":_R(r,i)}}}(c,_),_;return null}function YE(t){const i=t.split("=")[1].trim().split(","),s=qE(i[0].trim(),"MPEGTS")?i[0]:i[1],e=qE(i[0].trim(),"LOCAL")?i[0]:i[1];var n;return{kV:KE(Number(s.split(/:(.*)/)[1].trim())||0),bh:Xa.iV(null!=(n=tR(e.split(/:(.*)/)[1].trim(),new J))?n:0)}}function KE(t){return Xa.gF(t,9e4)}function qE(t,i){return Qe(t,i)}function jE(t,i){t&&function(t){return"cue"===t.Kp}(t)?i.L.push(t):t&&function(t){return"region"===t.Kp}(t)?i.AV.push(t):t&&function(t){return"stylesheet"===t.Kp}(t)&&i.SV.push(t)}function QE(t,i,s,e,n){const r=new J;nR(t,r);const h=JE(tR(t,r),e,n);if(nR(t,r),"--\x3e"!==t.substring(r.ac,r.ac+3))throw m("Something went wrong with parsing a WebVTT Cue");r.Dy(3),nR(t,r);const o=JE(tR(t,r),e,n);s.HO(h,o);!function(t,i,s){const e=t.split(/\s/),n=":";for(const t of e)if(0!==t.length&&Vh(t,n)&&t.charAt(0)!==n&&t.charAt(t.length-1)!==n){const e=t.indexOf(n),r=t.substring(0,e),h=t.substring(e+1,t.length);switch(r.toUpperCase()){case"REGION":uR(h,i,s);break;case"VERTICAL":dR(h,i);break;case"D":lR(h,i);break;case"LINE":case"L":oR(h,i);break;case"POSITION":case"T":aR(h,i);break;case"SIZE":case"S":cR(h,i);break;case"ALIGN":case"A":hR(h,i)}}}(t.substring(r.ac,t.length),s,i)}function JE(t,i,s){return s?t+i.wV:t}function $E(t){return/^[0-9]$/.test(t)}function tR(t,i){const s=to(t,",",".");let e,n,r,h=!1;if(i.ac>=s.length||!$E(s.charAt(i.ac)))throw new m("Something went wrong with parsing a WebVTT Cue timestamp");const o=HE(s,$E,i),a=x(o,10);if((o.length>2||a>59)&&(h=!0),i.ac>=s.length||":"!==s.charAt(i.ac))throw new m("Something went wrong with parsing a WebVTT Cue timestamp");i.Dy(1);const u=HE(s,$E,i);if(2!==u.length)throw new m("Something went wrong with parsing a WebVTT Cue timestamp");const c=x(u,10);if(h||i.ac<s.length&&":"===s.charAt(i.ac)){if(i.ac>=s.length||":"!==s.charAt(i.ac))throw new m("Something went wrong with parsing a WebVTT Cue timestamp");i.Dy(1);const t=HE(s,$E,i);if(2!==u.length)throw new m("Something went wrong with parsing a WebVTT Cue timestamp");e=a,n=c,r=x(t,10)}else e=0,n=a,r=c;if(i.ac>=s.length||"."!==s.charAt(i.ac))throw new m("Something went wrong with parsing a WebVTT Cue timestamp");i.Dy(1);const d=HE(s,$E,i),l=x(d,10);if(c>59||r>59)throw new m("Something went wrong with parsing a WebVTT Cue timestamp");return 60*e*60+60*n+r+l/1e3}function iR(t){return sR(ZE(t))}function sR(t){if(t.length<6)return!1;for(const i of ME)if(Qe(t,i))return!0;return!1}function eR(t){return Ft(LE,t)}function nR(t,i){for(;i.ac<t.length&&eR(t.charAt(i.ac));)i.Dy(1)}function rR(t){const i=t.lastIndexOf("%");if(i>-1){const s=C(t.substring(0,i));if(!S(s)&&s>=0&&s<=100)return s}return null}function hR(t,i){const s=t.toLowerCase();switch(s){case"start":case"center":case"end":case"left":case"right":i.RO=s;break;case"middle":i.RO="center"}}function oR(t,i){let s,e;const n=t.indexOf(",");if(n>=0?(s=t.substring(0,n),e=t.substring(n+1,t.length)):(s=t,e=""),!FE.test(s))return;let r,h;if(sm(s,"%")){const t=rR(s);if(null===t)return;r=t,h=!1}else{if(!VE.test(s)||s.lastIndexOf("-")>0)return;const t=s.indexOf(".");if(t>=0&&(t!==s.lastIndexOf(".")||!UE.test(s)||WE.test(s)))return;if(r=C(s),S(r))return;h=!0}switch(i.xO=r,i.DO=h,e=e.toLowerCase(),e){case"start":case"center":case"end":i.IO=e;break;case"middle":i.IO="center"}}function aR(t,i){let s,e;const n=t.indexOf(",");n>=0?(s=t.substring(0,n),e=t.substring(n+1,t.length)):(s=t,e="");const r=rR(s);if(null!==r)switch(i.mo=r,e=e.toLowerCase(),e){case"line-left":case"center":case"line-right":case"auto":i.PO=e;break;case"start":i.PO="line-left";break;case"middle":i.PO="center";break;case"end":i.PO="line-right"}}function uR(t,i,s){const e=gr(s,i=>i.o===t);void 0!==e&&(i.CO=e)}function cR(t,i){const s=rR(t);null!==s&&(i.Vy=s)}function dR(t,i){switch(t.toLowerCase()){case"rl":case"vertical:rl":case"vertical-rl":i.Pt="rl";break;case"lr":case"vertical:lr":case"vertical-lr":i.Pt="lr";break;default:i.Pt=""}}function lR(t,i){"VERTICAL"===t.toUpperCase()?i.Pt="rl":"VERTICAL-LR"===t.toUpperCase()&&(i.Pt="lr")}function fR(t){if(t.indexOf(",")>=0){const i=rR(t.substring(0,t.indexOf(","))),s=rR(t.substring(t.indexOf(",")+1,t.length));return[ss(i||0,0,100),ss(s||100,0,100)]}return null}function vR(t,i){i.o=t}function _R(t,i){"up"===t.toLowerCase()&&(i.jO="up")}function gR(t,i){OE.test(t)&&(i.YO=x(t))}function mR(t,i){const s=rR(t);null!==s&&(i.Ti=s)}function pR(t){return t&&"JE"in t?t.JE:t}r(),r(),r();var wR=class extends Pc{get EV(){return this.RV}get xV(){return this.PV}get AV(){return this.CV}get NV(){return this.DV}get Ca(){return this.hu||(this.hu=function(t){return Qr(oE(t),{get extent(){return t.EV},get styles(){return t.xV},get regions(){return t.AV},get metadata(){return pR(t.NV)},get content(){return pR(t.U)}})}(this)),this.hu}ZO(t){return!!T(this.EV,t.EV)&&(!!T(this.xV,t.xV)&&(!!T(this.AV,t.AV)&&(this.NV&&t.NV?!!this.NV.ZE(t.NV)&&(this.U&&t.U?this.U.ZE(t.U):this.U===t.U):this.NV===t.NV)))}constructor(t,i,s,e,n,r,h,o){super(t,i,s,e),this.RV=void 0,this.PV=void 0,this.CV=void 0,this.DV=void 0,this.RV=n,this.PV=r,this.CV=h,this.DV=o||void 0}};r();var yR=class{get BV(){return this.Lf.HE(!0)}get kO(){return this.MV}get EO(){return this.LV}constructor(t,i,s){this.Lf=void 0,this.MV=void 0,this.LV=void 0,this.MV=t,this.LV=i,Qo(s)?this.Lf=function(t,i,s){for(const t of["begin","end","dur"])s.nR(t);return s}(0,0,s):this.Lf=s}};r();var bR="http://www.w3.org/XML/1998/namespace";function AR(t,i,s,e){let n=t.QE(s,i);return 0===n.length&&(n=t.qE(e+":"+i)),n}function SR(t){const i={};for(const s of t.tR)i[s.VE]=s.XE;return i}var TR=/^(\d\d+):(\d\d):(\d+)((\.(\d+))?|(:(\d\d+)(\.(\d+))?))$/,kR=/^(\d+)(\.(\d+))?(h|m|s|ms|f|t)$/,ER="http://www.w3.org/ns/ttml";function RR(t,i,s,e){void 0===s&&(s=BE),void 0===e&&(e=Hy);let n=[];const r=xh(t);return e===zy?n=function(t,i,s){const e=Co.AN(t),n=uT(e,Ci.LC);if(!n)return[];return PR(xh(n.hk),i,s)}(r,i,s):e===Hy&&(n=PR(r,i,s)),n}function xR(t,i,s){return void 0===s&&(s=BE),CR(t,i,s)}function IR(t,i){const s=FR(i.BV),e={};for(const i of s)e[i]=t[i];return e}function PR(t,i,s){return CR(hp(t,new J),i,s)}function CR(t,i,s){const e=[];let n;try{n=Zd.FE(t)}catch(t){return e}const r=n.aR;if("tt"!==r.VE)return e;const h=r.QE(ER,"head")[0],o=r.QE(ER,"body")[0];if(!o||!h)return e;const a=DR(r.sR("tts:extent")),u=a?{width:a[0],height:a[1]}:void 0,c=function(t){const i={},s=t.QE(ER,"styling")[0],e=s&&s.QE(ER,"style")||[];for(const t of e){i[t.eR(bR,"id")]=SR(t)}return i}(h),d=function(t){const i={},s=t.QE(ER,"layout")[0],e=s&&s.QE(ER,"region")||[];for(const t of e){const s=t.eR(bR,"id");if(!s)continue;i[s]=SR(t);const e=OR(t);for(const t in e)za.call(e,t)&&(i[s][t]=e[t])}return i}(h),l=a?function(t,i){const s=Fa(t);for(const t of w.keys(s)){const e=DR(s[t].extent);if(e){const n=NR(e[0],i[0]),r=NR(e[1],i[1]);s[t].extent=n+" "+r}const n=DR(s[t].origin);if(n){const e=NR(n[0],i[0]),r=NR(n[1],i[1]);s[t].origin=e+" "+r}}return s}(d,a):d,f=h.QE(ER,"metadata")[0],v=BR(o,s.wV,s.yV,s.bV);for(const t of v){const i=IR(l,t);e.push(new wR(t.kO,t.EO,t.BV,!1,u,c,i,f))}return e}function NR(t,i){return t/i*100+"%"}function DR(t){if(!t)return;const i=t.split(" ",2);if(2!==i.length)return;const[s,e]=i;if(!sm(s,"px")||!sm(e,"px"))return;return[Number(s.slice(0,-2)),Number(e.slice(0,-2))]}function BR(t,i,s,e){let n,r=i,h=s,o=[];const a=[];if(Qo(t)){var u,c;r=null!=(u=LR(t.sR("begin"),e))?u:r,n=LR(t.sR("dur"),0),h=null!=(c=LR(t.sR("end"),e))?c:void 0!==n?r+n:h;const i=t.zE;for(let s=0;s<i.length;s++)("body"===t.VE||"div"===t.VE)&&i[s].OE>1||(o=o.concat(BR(i[s],r,h,e)))}const d=function(t,i,s){const e=[];e.push(t,i);for(const t of s)e.push(t.kO,t.EO);e.sort(Mu);let n=e.length;for(let t=0;t<n-1;t++)e[t+1]===e[t]&&(Lh(e,t+1),t--,n=e.length);return e}(r,h,o);for(let i=0;i<d.length-1;i++){const s=MR(d[i],d[i+1],o);if(s.length<=0&&VR(t)){const s=t.HE(!1);a.push(new yR(d[i],d[i+1],s))}else if(s.length>0){const e=t.HE(!1);s.forEach(t=>e.$E(t.BV)),a.push(new yR(d[i],d[i+1],e))}}return a}function MR(t,i,s){const e=[];for(let n=0;n<s.length;n++){const r=s[n].kO,h=s[n].EO;(r>=t&&h<=i||r<i&&h>=i||r<t&&h>t)&&e.push(s[n])}return e}function LR(t,i){if(t){if(TR.test(t)){const s=TR.exec(t);if(!s)return;const e=Number(s[1])||0,n=Number(s[2])||0,r=Number(s[3])||0,h=s[6];return 3600*e+60*n+r+(h?Number(h)*.1**h.length:0)+i}if(kR.test(t)){const s=kR.exec(t);if(!s)return;const e=Number(s[1]);let n;switch(s[4]){case"h":n=3600*e;break;case"m":n=60*e;break;case"s":n=e;break;case"ms":n=.001*e;break;default:n=NaN}return n+i}}}function OR(t){const i={},s=t.qE("style")||[];for(const t of s){const s=SR(t);for(const t in s)za.call(s,t)&&(i[t]=s[t])}return i}function FR(t){let i,s=[];if(Qo(t)){i=t.sR("region"),i&&s.push(i);const e=t.zE;for(let t=0;t<e.length;t++)s=s.concat(FR(e[t]))}return s}function VR(t){if(Qo(t)){const i=t.VE.toUpperCase(),s=Boolean(t.sR("smpte:backgroundImage"));return"BR"===i||s}return t.OE===Nu.DT}function WR(t){const i=function(t){try{return Zd.FE(t).aR}catch(t){}}(t);return"tt"===(null==i?void 0:i.VE)}r(),r();var ou=class extends To{tt(t){return super.tt(t)}it(t){const i=super.it(t);return i&&(t.Hk=Z.Nh),i}xa(){return xS(this)}};r(),r();var D=function(t){return t.OV="subtitles",t.FV="captions",t.VV="descriptions",t.Yn="chapters",t.WV="metadata",t.GV="thumbnails",t}({}),UR=["subtitles","captions","descriptions","chapters","metadata","thumbnails"];function GR(t){return"string"==typeof t&&Ft(UR,t)}function XR(t,i){return!(!GR(t)||!GR(i))&&(t===i||"subtitles"===t&&"captions"===i||"captions"===t&&"subtitles"===i)}r();var ZR=class extends Wt{constructor(t,i,s,e,n){super(t,i,n),this.url=void 0,this.status=void 0,this.url=s,this.status=e}};function HR(t){return t===D.OV||t===D.FV}function zR(t){return t.some(YR)}function YR(t){return Vh(t,"stpp")}function KR(t){return t.some(qR)}function qR(t){return Vh(t,"vtt")||Vh(t,"wvtt")}function jR(t,i){return io(t)&&KR(i)}function QR(t,i){return t===D.GV||t===D.WV&&i===D.GV}function JR(t,i,s,e){for(const n of t.L.CI){if(n.kO>s)break;i<=n.EO&&!Ft(e,n)&&e.push(n)}}function $R(t,i){return vc(t.qI,i.qI)}function tx(t,i,s,e){const n=function(t){switch(t){case hr.WEBVTT:return"WebVTT";case hr.SRT:return"SRT";case hr.TTML:return"TTML";default:return""}}(t);return new ZR(Ne.SUBTITLE_PARSE_ERROR,"Could not parse the "+(n?n+" ":"")+"subtitle file.",i,s,e)}function St(t,i){const s=[];for(const e of t.L.CI)if(e.EO<=i)s.push(e);else if(e.kO>=i)break;for(const i of s)t.XV(i)}function ix(t,i){if(t.V>0){const s=t.Tn(0),e=_.max(0,s-10);for(const t of i)t.ZV(e)}}var ko=class extends fr{get bV(){return this.HV}set bV(t){this.HV=t;for(const i of this.Z.CI)i.bV=t}tt(t){t.wn(M.pa,this.zV),t.bV=this.bV,this.Z.tt(t),this.YV(t)}it(t){t.mn(M.pa,this.zV),t.Hk=Z.Nh,this.Z.it(t)}KV(t){}qV(t){}YV(t){t.Hk!==Z.Nh?this.KV(t):this.qV(t)}jV(){for(const t of this.Z.CI)t.mn(M.pa,this.zV),t.kn()}ZV(t){if(t>0)for(const i of this.Z.CI)St(i,t)}QV(t){const i=this.JV;if(t===i)return;this.JV=t;const s=this.Z.CI.slice();for(const e of s){const s=this.$V(e,i,t);e!==s&&(this.it(e),this.tt(s),e.kn())}}hr(){return this.jV(),this.Z.hr(),Promise.resolve()}async kn(){this.Vo(),await this.hr(),this.Z.kn()}constructor(t){super(),this.JV=void 0,this.Z=new ou,this.HV=0,this.zV=t=>{const i=t.Ht;this.YV(i)},this.JV=t}};function sx(t,i,s){const e=s.sI(t.Lt,t.o,t.Th,t.bs,t.tW,t.Kp,t.sP,t.jI);e.eP=t.eP,e.Sx=t.Sx,e.tP=t.tP,e.bV=t.bV;const n=t.L.CI.slice();for(const i of n)t.XV(i),e.iW(i);return e.Hk=t.Hk,i.sW(t),e}r();var ex=class extends Kt{get error(){return this.errorObject.message}xa(){return this}constructor(t){super(sa.ma),this.errorObject=void 0,this.errorObject=t}},bo=class extends ko{eW(t){if(!t.src)return;const i=t.kind||D.OV,s=this.JV.sI(i,t.id,t.label,t.srclang,t.default);return s.eP=ie(t.src),this.tt(s),s}async nW(t,i){t.Sx=Ra.LOADING;const s=new F({Yu:t.eP,ck:Bi.DT,Fk:ci.GET,jg:i});let e,n;try{const t=await this.rW.dk(s);n=t.rk,e=await t.FT()}catch(i){return Ui(i),t.Sx=Ra.ERROR,void t.So(new ex(function(t,i){let s=i,e=0;if(tt(t)&&t.name===gA.sE)s=t.dk.Yu;else if(PA(t)){const i=t.hE;if(s=i._k,e=i.rk,0===e)return new ZR(Ne.SUBTITLE_CORS_ERROR,"Could not load the subtitle file. Make sure the source is set correctly and that CORS support is enabled.",s,e,t)}return new ZR(Ne.SUBTITLE_LOAD_ERROR,"Could not load the subtitle file.",s,e,t)}(i,t.eP)))}try{const i=function(t){return iR(t)?hr.WEBVTT:WR(t)?hr.TTML:hr.SRT}(e);t.Kp=i;let s=[];if(i===hr.WEBVTT||i===hr.SRT){s=XE(e).L}else i===hr.TTML&&(s=xR(e,t));for(const i of s)t.iW(i)}catch(i){return Ui(i),t.Sx=Ra.ERROR,void t.So(new ex(tx(t.Kp,t.eP,n,i)))}t.Sx=Ra.LOADED}KV(t){Ft(this.Z.CI,t)&&t.Sx===Ra.NONE&&this.nW(t,this.hW.jg).catch(Na)}Un(){}$V(t,i,s){return sx(t,i,s)}async hr(){this.hW.Jg(),this.hW=new ui;for(const t of this.Z.CI)this.JV.sW(t);await super.hr()}constructor(t,i){super(t),this.rW=void 0,this.hW=new ui,this.rW=i}};function nx(t){return"TXXX"===t.id||"TXX"===t.id}r(),r();var rx=class extends ko{oW(){this.aW.wn(Lu.nI,this.uW),this.aW.wn(Lu.hI,this.cW)}dW(){this.aW.mn(Lu.nI,this.uW),this.aW.mn(Lu.hI,this.cW)}lW(t){const i=t.L.CI[0];if(!hx(i))return;const s=function(t){const i=t.match(ox);if(!i)return;return{Ht:i[1],bs:i[2]}}(i.U.description),e=s.Ht,n=s.bs;if(this.fW(e,n))return;const r=this.JV.sI(D.OV,t.o,e,n,!1,hr.TTML);this.tt(r),this.vW.set(t.qI,r);for(const i of t.L.CI)hx(i)&&this._W(i);t.wn(M.aI,this.gW)}fW(t,i){return this.Z.CI.some(s=>s.Th===t&&s.bs===i)}_W(t){if(!t.Ht)return;const i=this.vW.get(t.Ht.qI),s=xR(t.U.text,i,{wV:0,yV:1/0,bV:t.kO});for(const t of s)i.iW(t)}$V(t,i,s){const e=sx(t,i,s);return this.vW.forEach((i,s)=>{i===t&&this.vW.set(s,e)}),e}async hr(){for(const t of this.aW.CI)t.mn(M.SI,this.uW),t.mn(M.aI,this.mW),t.mn(M.aI,this.gW);for(const t of this.Z.CI)this.JV.sW(t);this.vW.clear(),await super.hr()}async kn(){this.dW(),await super.kn()}constructor(t,i){super(t),this.aW=void 0,this.vW=void 0,this.pW=void 0,this.uW=void 0,this.mW=void 0,this.cW=void 0,this.gW=void 0,this.aW=i,this.vW=Zs(),this.pW=t=>{t.mn(M.SI,this.uW),t.Kp?t.Kp===hr.ID3&&(t.mn(M.aI,this.mW),0!==t.L.V?this.lW(t):t.wn(M.aI,this.mW)):t.wn(M.SI,this.uW)},this.uW=t=>{this.pW(t.Ht)},this.mW=t=>{this.pW(t.SO.Ht)},this.cW=t=>{const i=t.Ht;if(i.Kp!==hr.ID3||!this.vW.has(i.qI))return;const s=this.vW.get(i.qI);this.it(s),this.JV.sW(s),i.mn(M.SI,this.uW),i.mn(M.aI,this.mW),i.mn(M.aI,this.gW)},this.gW=t=>{hx(t.SO)&&this._W(t.SO)},this.oW()}};function hx(t){return function(t){return nx(t)&&ox.test(t.description)}(t.U)}var ox=/^Track:(.+),Lang:(.+)$/;function ax(t,i){for(const s of t)if(s.Lt===i&&s.tW)return s}function ux(t,i){cx(ax(t.CI,i))}function cx(t){void 0!==t&&(t.Hk=Z.Kn)}function dx(t,i){const s=ax(t.CI,i)||function(t,i){for(const s of t)if(s.Lt===i)return s}(t.CI,i);cx(s)}function Ue(t){for(const i of UR)i===D.Yn?dx(t,i):ux(t,i)}r(),r();var es=class extends sh{constructor(){super(d.jw)}};r(),r();var xt=function(t){return t[t.wW=0]="wW",t[t.yW=1]="yW",t}({});r(),r();var lx=class extends sh{constructor(t){super(Vo.AM),this.currentTime=void 0,this.currentTime=t}};r();var $n=class extends sh{constructor(t){super(Vo.SM),this.currentTime=void 0,this.currentTime=t}},fx=[Vo.bI,Vo.SM,d.uo,d.zw],ts=class extends fr{bW(t,i){!this.AW&&i>=pi.Qn&&(this.AW=!0,this.So(new ut(t,i)))}TW(t,i){!this.kW&&i>=pi.WL&&(this.kW=!0,this.So(new ot(t,i)))}EW(t,i){this.RW||(i>=pi.UL&&this.xW<pi.UL&&!this.IW.ux||this.PW&&i>=pi.UL)&&this.So(new $n(t))}NW(t,i){!this.DW(i)||this.IW.GR||this.IW.lt||this.So(new lx(t))}BW(t,i){this.xW<=pi.WL&&i>=pi.UL&&this.So(new vo(t,i))}MW(t,i){i===pi.GL&&this.So(new lt(t,i))}DW(t){const i=!this.IW.ux&&t<=pi.WL,s=!this.LW&&this.xW<=pi.WL;return i&&!s}get PW(){return!this.IW.ux&&this.LW}hr(){this.xW=pi.VL,this.LW=!0,this.kW=!1,this.AW=!1}kn(){this.Vo(),this.RW&&this.IW.mn(Vo.SM,this.OW),this.IW.mn(d.uo,this.FW),this.IW.mn(d.zw,this.VW),this.IW.mn(Vo.bI,this.WW)}constructor(t,i=!1){super(),this.IW=void 0,this.RW=void 0,this.xW=void 0,this.LW=void 0,this.kW=void 0,this.AW=void 0,this.WW=void 0,this.FW=void 0,this.VW=void 0,this.OW=void 0,this.IW=t,this.RW=i,this.xW=pi.VL,this.LW=!0,this.kW=!1,this.AW=!1,this.WW=t=>{const i=this.IW.OR,s=this.IW.Sx;s!==this.xW&&this.So(new ca(i,s)),s===pi.VL&&(this.kW=!1,this.AW=!1),this.bW(i,s),this.TW(i,s),this.BW(i,s),this.MW(i,s),this.EW(i,s),this.NW(i,s),this.xW=s},this.FW=()=>{const t=this.IW.OR;this.NW(t,this.xW),this.EW(t,this.xW),this.LW=this.IW.ux},this.VW=()=>{this.LW=this.IW.ux},this.OW=()=>{this.So(new $n(this.IW.OR))},this.IW.wn(Vo.bI,this.WW),this.IW.wn(d.uo,this.FW),this.IW.wn(d.zw,this.VW),this.RW&&this.IW.wn(Vo.SM,this.OW)}};r();var vx=class extends fr{get OR(){return this.oa.OR}get GR(){return this.oa.GR}get lt(){return this.SL.lt}get ux(){return this.SL.ux}get Sx(){return this.oa.Sx}Zg(){this.Vo(),this.SL.mn(fx,this.Rs)}UW(){this.So(new ca(this.OR,this.Sx))}constructor(t,i){super(),this.oa=void 0,this.SL=void 0,this.oa=t,this.SL=i,this.SL.wn(fx,this.Rs)}};r(),r(),r(),r();var Xo=class{GW(){return this.XW}ZW(t){this.XW=t}get AR(){return this.rW}get zW(){return!1}get YW(){const t=this.KW.certificate;if(t)return yo(t)?Iu(t):Rs(t)}qW(){return this.KW.licenseAcquisitionURL||this.GW()}get jW(){return!1}QW(t){return Promise.resolve()}JW(t,i){return Promise.resolve(void 0)}get Xk(){return Boolean(this.KW.useCredentials)}async $W(t,i,s,e){const n=this.tU(t,i,s,e);if(""===n.Yu)throw new Q(Ne.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The license request URL has not been correctly configured.");try{const t=await this.AR.dk(n);return await t.VT(i)}catch(t){return Ui(t),void await this.iU(t,n.Yu,e)}}tU(t,i,s,e){const n=this.sU().BT(),r=this.Xk,h={Yu:this.eU(),ck:i,lk:n,XT:t,Xk:r,Fk:ci.POST,Vk:0,jg:e,Kp:Ic.bk,Uk:s};return new F(h)}nU(t,i){return Promise.resolve(t)}rU(t,i,s,e){return Promise.resolve(t)}sU(){return new oa(this.KW.headers||{})}async iU(t,i,s){throw new Q(Ne.CONTENT_PROTECTION_LICENSE_ERROR,"Error during license server request",t)}eU(t,i){let s=i;const e=this.KW.queryParameters;if(!s){const t=this.qW();if(!t)return"";s=t}if(e||t){const i=Zd.Dh(s);t&&lA(i,t),e&&lA(i,e),s=i.href}return s}hU(t,i){return _x(t)}oU(t){return new j(t)}async aU(t,i,s){const e=await this.hU(t,s),n=await this.$W(e,this.uU,i,s);return this.oU(n)}kn(){}constructor(t,i,s,e,n){this.TS=void 0,this.cU=void 0,this.dU=void 0,this.KW=void 0,this.rW=void 0,this.XW=void 0,this.uU=void 0,this.TS=t,this.cU=i,this.dU=s,this.rW=e,this.uU=n,this.KW=this.lU(i)}};function _x(t){return Promise.resolve(tc(t).buffer)}var mu=class extends Xo{lU(t){return t.widevine||{}}async fU(t,i){return this.YW?this.YW:this.vU(new j(t),i)}vU(t,i){return super.aU(t,vs.Ek,i)}constructor(t,i,s,e){super(xi,t,i,s,e)}};r();var gx=function(t){return t.Xp="Widevine",t._U="PlayreadyV2",t.gU="PlayreadyV3",t.Gp="PlayreadyV2",t.zp="Fairplay",t}({}),mx={Widevine:{DRMProvider:"Google",DRMVersion:"1.4.8.86",DRMType:"Widevine"},PlayreadyV2:{DRMProvider:"Microsoft",DRMVersion:"2.9",DRMType:"Playready"},PlayreadyV3:{DRMProvider:"Microsoft",DRMVersion:"3",DRMType:"Playready"},Fairplay:{DRMProvider:"Apple",DRMType:"FairPlay",DRMVersion:"1.0"}};function px(t,i){var s,e,n,r;const h=mx[i],o=t.accountName;return{CustomerName:t.customerName,AccountName:o,PortalId:t.portalId,FriendlyName:t.friendlyName,DeviceInfo:{FormatVersion:"1",DeviceType:"PC",OSType:null==(s=Zd.kp)?void 0:s.Zs,OSVersion:null==(e=Zd.kp)?void 0:e.Mp,DRMProvider:h.DRMProvider,DRMVersion:h.DRMVersion,DRMType:h.DRMType,DeviceVendor:null==(n=Zd.kp)?void 0:n.Lp,DeviceModel:null==(r=Zd.kp)?void 0:r.Op}}}function wx(t,i){if(!t.accountName)throw new Q(Ne.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium "+i+" DRM configuration, accountName is not set.");if(!t.customerName)throw new Q(Ne.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium "+i+" DRM configuration, customerName is not set.");if(!t.portalId)throw new Q(Ne.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium "+i+" DRM configuration, portalId is not set.");throw new Q(Ne.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium "+i+" DRM configuration.")}function yx(t,i,s){let e;if(AT(t))e={AuthToken:t.authToken,Payload:i};else{if(!ST(t))throw wx(t,s);e={LatensRegistration:px(t,s),Payload:i}}return Gc(JSON.stringify(e))}async function bx(t,i,s){const e=t.hE;if(!e)throw new Q(Ne.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Titanium server request",t,i);const n=e;let r,h;try{r=await n.OT(s),h=function(t){if(t){if(t.WvProxyErr)return t.WvProxyErr.desc;if(t.DrmErr)return t.DrmErr.desc}return}(r)}catch(t){h=""}throw new Q(Ne.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Titanium server request",t,n.dk.Yu,n.rk,n.fk,h)}r();var Ax=class extends mu{static mU(){return Zd.Zs.xm?"required":"optional"}iU(t,i,s){return bx(t,i,s)}QW(t){return this.pU?$s(this.pU.Yy,t):(this.pU=new gs,Promise.resolve())}async hU(t,i){const s=this.cU;if(!s)throw new Q(Ne.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium Widevine DRM configuration.");return yx(s,Ae(t),gx.Xp)}oU(t){let i;if(!t.license)throw new Q(Ne.CONTENT_PROTECTION_LICENSE_INVALID,"Could not process the response from the Titanium Widevine license server");return i=Iu(t.license),i}wU(t){return Promise.resolve(new j(t))}async fU(t,i){this.yU();const s=await this.hU(t,i),e=await this.$W(s,Bi.PT,vs.Rk,i);return await this.wU(e)}async vU(t,i){const s=await super.vU(t,i);return this.yU(),s}yU(){this.pU||(this.pU=new gs),this.pU.Hy()}kn(){this.pU&&this.pU.Jg(),super.kn()}constructor(t,i,s){super(t,i,s,Bi.CT),this.pU=void 0}};r();var Sx=class extends mu{get bU(){if(TT(this.cU))return this.cU.token}async hU(t,i){const s=await _x(t),e=this.dU,n=ap(new j(s)),r=this.bU;if(void 0===r)throw new Q(Ne.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The Widevine vuDRM token has not been correctly configured.");return JSON.stringify({token:r,drm_info:n,kid:e})}constructor(t,i,s){super(t,i,s,Bi.PT),this.ZW("https://widevine-proxy.drm.technology/proxy")}};function Tx(t,i){let s=i||{};return t.ticket&&t.sessionId&&(s=Jr({},s,{SessionId:t.sessionId,Ticket:t.ticket})),Jr({},s,{CrmId:t.crmId,AccountId:t.accountId,ContentId:t.contentId})}r(),r();var kx=class extends mu{eU(t,i){let s=t;return wT(this.cU)&&(s=Tx(this.cU,s)),super.eU(s,i)}constructor(t,i,s){super(t,i,s,Bi.PT),this.ZW("https://emeademo.dev.ott.irdeto.com/Widevine/getlicense")}};r(),r();var Ex="Conax-Custom-Data";function Rx(t,i,s){const e=t&&pT(t)&&t;if(e&&!s.has(Ex)){const t=sT(e)?e.token:void 0,n=sT(e)?e.deviceId:void 0,r=JSON.stringify({Version:"1.0.0",CxAuthenticationDataToken:t,CxClientInfo:{DeviceType:"Browser",DrmClientType:i+"-HTML5",DrmClientVersion:"1.0.0",CxDeviceId:n}});s.set(Ex,r)}return s}var xx=class extends mu{sU(){const t=super.sU();return Rx(this.cU,"Widevine",t)}constructor(t,i,s){super(t,i,s,Bi.PT),this.ZW("https://connect.conax.com:8094/license")}};function Ix(t){const i=Jh(new j(t));return Iu(JSON.parse(i).license)}function Px(t){return"string"==typeof t.token?t.token:Gc(JSON.stringify({userId:t.userId,sessionId:t.sessionId,merchant:t.merchant}))}function Cx(t,i,s){let e;return e=s.token?"x-dt-auth-token":"dt-custom-data",t.set(e,i),t}r(),r();var Nx=class extends mu{get bU(){return Px(this.cU)}oU(t){return Ix(t)}sU(){return Cx(super.sU(),this.bU,this.cU)}constructor(t,i,s){super(t,i,s,Bi.PT),this.ZW("https://lic.drmtoday.com/license-proxy-widevine/cenc/")}};r();var Dx=class extends mu{sU(){const t=super.sU(),i=this.cU.token;return t.set("Authorization","Bearer "+i),t}constructor(t,i,s){super(t,i,s,Bi.PT)}};async function Bx(t,i,s,e){if(!kT(t))throw new Q(Ne.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Xstream DRM Configuration");const n=new oa;n.append("Cache-Control","no-cache"),n.append("Content-Type","application/json");const r=t.sessionId;r&&n.append("XSSESSION",r);const h=t.streamId;let o;o=t.fairplay?"persistent"===t.fairplay.licenseType?"persistent":"non-persistent":t.widevine&&"persistent"===t.widevine.licenseType?"persistent":"non-persistent";const a={drmType:i,licenseType:o,streamId:h},u={Yu:t.ticketAcquisitionURL,ck:Bi.CT,lk:n,Fk:ci.POST,XT:JSON.stringify(a),jg:e},c=await s.dk(u);return await c.OT()}r(),r();var Mx=class extends mu{sU(){const t=super.sU();return t.set("Content-Type","application/json"),t}async hU(t,i){const s=gp(t.buffer),e=this.cU,n=await Bx(e,"widevine_modular",this.AR,i);this.ZW(n.licenseServerUrl);const r=Xc(JSON.stringify({payload:s,ticket:n.ticket}));return super.hU(r,i)}oU(t){return Iu(t.license)}constructor(t,i,s){super(t,i,s,Bi.CT)}};r();var Lx=class extends mu{sU(){if(!ET(this.cU))throw new Q(Ne.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Axinom configuration");const t=super.sU();return t.set("X-AxDRM-Message",this.cU.token),t}constructor(t,i,s){super(t,i,s,Bi.PT)}};function Ox(t){const i=new j(2*t.length);for(let s=0;s<t.length;s+=1)i[2*s]=t.charCodeAt(s),i[2*s+1]=0;return i}r();var Ju=class extends Xo{lU(t){return t.playready||{}}sU(){const t=new oa(this.AU);return t.LT(super.sU()),t}SU(t){return t.length>=1&&t[0].zE.length>0}JW(t){const i=this.cU.playready.customData;if(i){const t=Ox(i),s=Ox('<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">'+Ae(t)+"</CustomData></LicenseAcquisition></PlayReadyCDMData>");return Promise.resolve({playready:{GS:s}})}return super.JW(t)}async hU(t,i){const s=await _x(t);return this.TU(s)}async TU(t){var i,s;let e=null;const n=al(new DataView(t),new J,!0);let r;try{r=Zd.FE(n)}catch(t){return e}const h=null==(i=r.qE("PlayReadyKeyMessage")[0])?void 0:i.qE("LicenseAcquisition")[0];var o;const a=null!=(o=null==h?void 0:h.qE("Challenge"))?o:[];this.SU(a)&&(e=_p(a[0].iR));const u=new oa;var c;const d=null!=(c=null==h||null==(s=h.qE("HttpHeaders")[0])?void 0:s.qE("HttpHeader"))?c:[];for(const t of d){const i=t.qE("name")[0].iR,s=t.qE("value")[0].iR;u.append(i,s)}return this.AU=u,e}fU(t,i){return Promise.resolve(t)}vU(t,i){return super.aU(t,vs.xk,i)}constructor(t,i,s){super(qg,t,i,s,Bi.PT),this.AU=void 0}};r(),r();var Fx=class t{static kU(t){return"3"===t.version?gx.gU:gx._U}EU(){const t={};if(this.XA===gx.gU){const i={LatensRegistration:px(this.RU,gx.gU)};t["X-TITANIUM-DRM-CDATA"]=Gc(JSON.stringify(i))}return t}get xU(){return this.XA}get DS(){return this.XA===gx._U}constructor(i){this.RU=void 0,this.XA=void 0,this.RU=i,this.XA=t.kU(i)}};var Vx=class extends Ju{JW(t){const i=this.cU;if(!this.cU)throw new Q(Ne.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium PlayReady DRM configuration.");if(ST(i)){const t={};return t.playready={GS:Wx(i,this.IU.xU)},Promise.resolve(t)}return Promise.reject(wx(i,gx.Gp))}sU(){const t=new oa(this.IU.EU());return t.LT(super.sU()),t}async iU(t,i,s){const e=t.hE;if(!e)throw new Q(Ne.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Titanium PlayReady license request",t,i);let n,r;try{const t=await e.WT(s),i=Jh(new j(t)),o=Zd.FE(i);if(o){const t=function(t,i){return function(t,i){const s=t.m.slice(),e=[];for(;s.length>0;){const t=s.shift();i(t)?e.push(t):s.push(...t.m)}return e}(t,t=>t.jE===i)}(o,"CustomData");var h;if(t.length>0)n=JSON.parse(t[0].iR),r=null==(h=n.DrmErr)?void 0:h.desc}}catch(t){}throw new Q(Ne.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Titanium PlayReady license request",t,i,e.rk,e.fk,r)}SU(t){if(1!==t.length)throw new Q(Ne.CONTENT_PROTECTION_INITIALIZATION_INVALID,"PlayReady license message incorrectly formatted, Challenge not found.");return!0}constructor(t,i,s){super(t,i,s),this.IU=void 0,this.IU=new Fx(this.cU)}};function Wx(t,i){const s=px(t,i),e=s.DeviceInfo.FormatVersion,n=function(t){return t.replace(/&lt;/g,"<").replace(/&gt;/g,">")}(function(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}("<TitaniumCustomData>"+Gc('<LatensRegistration formatversion="'+e+'"><AccountName>'+s.AccountName+"</AccountName><CustomerName>"+s.CustomerName+"</CustomerName><PortalID>"+s.PortalId+'</PortalID><DeviceInfo formatversion="'+e+'"><DeviceType>'+s.DeviceInfo.DeviceType+"</DeviceType><OSType>"+s.DeviceInfo.OSType+"</OSType><OSVersion>"+s.DeviceInfo.OSVersion+"</OSVersion><DRMProvider>"+s.DeviceInfo.DRMProvider+"</DRMProvider><DRMVersion>"+s.DeviceInfo.DRMVersion+"</DRMVersion><DRMType>"+s.DeviceInfo.DRMType+"</DRMType><DeviceVendor>"+s.DeviceInfo.DeviceVendor+"</DeviceVendor><DeviceModel>"+s.DeviceInfo.DeviceModel+"</DeviceModel></DeviceInfo></LatensRegistration>")+"</TitaniumCustomData>")),r=np(n,!0);return np('<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0"><CustomData encoding="base64encoded">'+Ae(r)+"</CustomData></LicenseAcquisition></PlayReadyCDMData>",!0)}r();var Ux=class extends Ju{get bU(){if(TT(this.cU))return this.cU.token}SU(t){if(1!==t.length)throw new Q(Ne.CONTENT_PROTECTION_INITIALIZATION_INVALID,"Vudrm PlayReady license message incorrectly formatted, Challenge not found.");return!0}eU(t,i){const s=Jr({},t||{},{token:this.bU});return super.eU(s,i)}constructor(t,i,s){super(t,i,s),this.ZW("https://playready-license.drm.technology/rightsmanager.asmx")}};r();var Gx=class extends Ju{eU(t,i){let s=t;return wT(this.cU)&&(s=Tx(this.cU,s)),super.eU(s,i)}constructor(t,i,s){super(t,i,s),this.ZW("https://emeademo.dev.ott.irdeto.com/playready/rightsmanager.asmx")}};r();var Xx=class extends Ju{sU(){const t=super.sU();return Rx(this.cU,"PlayReady",t)}constructor(t,i,s){super(t,i,s),this.ZW("https://connect.conax.com:8010/cxplayready/rightsmanager.asmx")}};r();var Zx=class extends Ju{get bU(){return Px(this.cU)}oU(t){const i=function(t){const i=Jh(new j(t));return Qe(i,"<?xml")?0:1}(t);return 1===i?Ix(t):super.oU(new j(t))}sU(){return Cx(super.sU(),this.bU,this.cU)}constructor(t,i,s){super(t,i,s),this.ZW("https://lic.drmtoday.com/license-proxy-headerauth/drmtoday/RightsManager.asmx")}};r();var Hx=class extends Ju{sU(){const t=super.sU();return this.PU&&t.set("Ticket",this.PU),t.set("Content-Type","text/xml"),t}async hU(t,i){const s=this.cU,e=await Bx(s,"playready",this.AR,i);return this.ZW(e.licenseServerUrl),this.PU=e.ticket,super.hU(t,i)}constructor(t,i,s){super(t,i,s),this.PU=void 0}};r();var zx=class extends Ju{sU(){if(!ET(this.cU))throw new Q(Ne.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Axinom configuration");const t=super.sU();return t.set("X-AxDRM-Message",this.cU.token),t}};r(),r();var du=function(t){return t.CT="application/json",t.CU="application/x-www-form-urlencoded",t.NU="application/octet-stream",t.DT="text/plain;charset=UTF-8",t}({}),Dn=class extends Xo{get jW(){return!0}DU(){return this.KW.certificateURL||this.BU}MU(t){this.BU=t}hU(t){return Promise.resolve(this.LU(t,this.OU))}LU(t,i){return"spc="+encodeURIComponent(Ae(t))+"&assetId="+encodeURIComponent(i)}get FU(){return du.CU}lU(t){return t.fairplay||{}}VU(t){const i=t.indexOf("?");if(i>=0)return Promise.resolve(t.substr(i+1));{const i=t.split("skd://").pop();if(i){if(/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/.test(i))return Promise.resolve(i)}const s=t.split("/");return Promise.resolve(s[s.length-1])}}async JW(t){var i;const s=null!=(i=this.WU)?i:Vc(new j(t)),e=await this.VU(s);this.OU=e;const n={};return n.fairplay={QS:e},n}sU(){const t=super.sU();return t.set("Content-Type",this.FU),t}async fU(t,i){return this.YW?this.YW:await this.UU(i)}vU(t,i){return super.aU(t,vs.Sk,i)}GU(t){const i=this.DU(),s=this.sU(),e={Yu:i,ck:Bi.PT,lk:s,Fk:ci.GET,Xk:!1,XT:null,Vk:0,jg:t,Kp:Ic.bk,Uk:vs.Tk};return new F(e)}async UU(t){const i=this.GU(t),s=await this.AR.dk(i),e=await s.WT();return new j(e)}oU(t){let i;if("string"==typeof t){let s=t.trim();"<ckc>"===s.substr(0,5)&&"</ckc>"===s.substr(-6)&&(s=s.slice(5,-6)),i=Iu(s)}else i=new j(t);return i}eU(t,i){let s=super.eU(t,i);return Qe(s,"skd:")&&(s=s.substr(4)),s}constructor(t,i,s,e,n){super(t.TS,i,s,e,n),this.OU="",this.BU=void 0,this.WU=void 0,this.WU=t.XU}};r();var Yx=class extends Dn{get FU(){return du.NU}VU(t){let i=t.split("://",1);return"skd"!==i[0].slice(-3).toLowerCase()?Promise.resolve(""):(i=t.split(";",2),i.length>1?Promise.resolve(i[1]):Promise.resolve(super.VU(t)))}async hU(t){return t}oU(t){return new j(t)}eU(t,i){const s=t||{};return s.p1=qf(),super.eU(s,i)}constructor(t,i,s,e){super(t,i,s,e,Bi.PT)}};r();var Kx=class extends Dn{get FU(){return du.CT}get bU(){if(!TT(this.cU))throw new Q(Ne.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Token is required for FairPlay VuDrm.");return this.cU.token}LU(t,i){const s={token:this.bU,contentId:i,payload:Ae(t)};return JSON.stringify(s)}oU(t){return new j(t)}sU(){const t=super.sU();return t.set("x-vudrm-token",this.bU),t}constructor(t,i,s,e){super(t,i,s,e,Bi.PT),this.ZW("https://fairplay-license.drm.technology/license"),this.MU("https://fairplay-license.drm.technology/certificate")}};r();var qx="Verimatrix Fairplay license response incorrectly formatted. Invalid json.",jx="Verimatrix Fairplay license response incorrectly formatted. Ckc not found.",Qx=class extends Dn{oU(t){const i=function(t){let i;try{i=JSON.parse(t).ckc}catch(t){throw new Q(Ne.CONTENT_PROTECTION_LICENSE_INVALID,qx)}if(!i)throw new Q(Ne.CONTENT_PROTECTION_LICENSE_ERROR,jx);return i}(Jh(new DataView(t)));return super.oU(i)}constructor(t,i,s,e){super(t,i,s,e,Bi.PT)}};r();var Jx=class extends Dn{get FU(){return du.CT}async hU(t){const i=this.cU;if(!i)throw new Q(Ne.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium Fairplay DRM configuration.");return yx(i,Ae(t),gx.zp)}oU(t){try{let i;if(yo(t)){const s=t.trim();i=JSON.parse(s)}else i=t;if(i.license){const t=_p(i.license);return new j(t)}throw new Q(Ne.CONTENT_PROTECTION_LICENSE_ERROR,"No license received from the Titanium Fairplay license server")}catch(t){throw new Q(Ne.CONTENT_PROTECTION_LICENSE_INVALID,"Could not process the response from the Titanium Fairplay license server")}}iU(t,i,s){return bx(t,i,s)}constructor(t,i,s,e){super(t,i,s,e,Bi.CT)}};r();var $x=class extends Dn{DU(){const t=super.DU();if(!t)return t;const i=Zd.Dh(t),s=this.cU;return wT(s)&&lA(i,{accountId:s.accountId,applicationId:s.applicationId||""}),i.href}VU(t){return wT(this.cU)?Promise.resolve(this.cU.contentId):super.VU(t)}async hU(t){return t}oU(t){return new j(t)}get FU(){return du.NU}eU(t,i){let s=t;return wT(this.cU)&&(s=function(t,i){return Jr({},Tx(t,i),{KeyId:t.keyId})}(this.cU,s)),super.eU(s,i)}constructor(t,i,s,e){super(t,i,s,e,Bi.PT),this.ZW("https://emeademo.dev.ott.irdeto.com/streaming/getckc"),this.MU("https://emeademo.dev.ott.irdeto.com/streaming/getcertificate")}};r();var tI=class extends Dn{sU(){const t=super.sU();return Rx(this.cU,"FairPlay",t)}async UU(t){const i={Yu:this.DU(),ck:Bi.PT,lk:{},Fk:ci.GET,Xk:!1,XT:null,Vk:0,jg:t,Kp:Ic.bk,Uk:vs.Tk},s=await this.AR.dk(i),e=await s.WT();return new j(e)}async hU(t){return t}VU(t){const i=t.indexOf("?");if(0===t.indexOf("skd://")){let s;return s=i>=0?t.substring(6,i):t.substring(6),Promise.resolve(function(t){return Jh(Iu(t))}(s))}return Promise.resolve("unknown")}oU(t){try{const i=JSON.parse(t);return new j(_p(i.CkcMessage))}catch(t){throw new m("CFLRW-66")}}constructor(t,i,s,e){if(super(t,i,s,e,Bi.DT),!pT(i))throw new Q(Ne.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Conax configuration");this.ZW("https://connect.conax.com:8097/license")}};r();var iI=class extends Dn{VU(t){return Qe(t,"skd://")?Promise.resolve(t.substring(6,40)):Promise.reject(new Q(Ne.CONTENT_PROTECTION_INITIALIZATION_INVALID,"Error while determining the KeyOS Content ID."))}LU(t,i){return"spc="+Ae(t)+"&assetId="+i}constructor(t,i,s,e){super(t,i,s,e,Bi.DT),this.ZW(lT[R.zp])}};r();var sI=class extends Dn{get bU(){return Px(this.cU)}LU(t,i){const s="spc="+encodeURIComponent(Ae(t))+"&"+encodeURI(i);return"persistent"===this.KW.licenseType?s+"&offline=true":s}sU(){return Cx(super.sU(),this.bU,this.cU)}constructor(t,i,s,e){super(t,i,s,e,Bi.DT),this.ZW("https://lic.drmtoday.com/license-server-fairplay/")}};r();var eI=class extends Dn{VU(t){let i=t;return Qe(i,"skd:")&&(i="http:"+i.substring(4)),Qe(i,"http:")||Qe(i,"https:")?Promise.resolve(Zd.Dh(i).hostname):Promise.reject(new m("Could not parse ExpressPlay FairPlay content ID."))}async hU(t){return t}oU(t){return new j(t)}get FU(){return du.NU}constructor(t,i,s,e){super(t,i,s,e,Bi.PT)}};r();var nI=class extends Dn{sU(){const t=super.sU(),i=this.cU.token;return t.set("Authorization","Bearer "+i),t}constructor(t,i,s,e){super(t,i,s,e,Bi.DT)}};r();var rI=class extends Dn{async UU(t){const i=this.DU(),s=this.sU(),e={Yu:i,ck:Bi.CT,lk:s,Fk:ci.POST,jg:t,Kp:Ic.bk,Uk:vs.Tk},n=await this.AR.dk(e),r=await n.OT();return new j(Iu(r.certificate))}get FU(){return du.CT}async vU(t,i,s){void 0===s&&(s=Bi.DT);const e=Ae(t),n=this.cU,r=await Bx(n,"fairplay",this.AR,i),h=Xc(JSON.stringify({spc:e,ticket:r.ticket})),o={Yu:this.qW(),ck:Bi.CT,lk:this.sU(),Fk:ci.POST,XT:h,Vk:0,jg:i,Kp:Ic.bk,Uk:vs.Sk},a=await this.AR.dk(o);return Iu((await a.OT()).licence)}constructor(t,i,s,e){if(super(t,i,s,e,Bi.CT),!kT(i))throw new m("Invalid Xstream DRM configuration")}};r();var hI=class extends Dn{LU(t,i){return Ae(t)}oU(t){if(0===t.length)throw new Q(Ne.CONTENT_PROTECTION_LICENSE_ERROR,"Vimond license request error.");return super.oU(t)}sU(){const t=super.sU();return t.set("Content-Type","text/plain"),t}constructor(t,i,s,e){super(t,i,s,e,Bi.DT)}};r();var oI=class extends Dn{get FU(){return du.CT}LU(t,i){return t}oU(t){return new j(t)}sU(){if(!ET(this.cU))throw new Q(Ne.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Axinom configuration");const t=super.sU();return t.set("X-AxDRM-Message",this.cU.token),t}constructor(t,i,s,e){super(t,i,s,e,Bi.PT)}};r();var aI=class extends Dn{get FU(){return du.DT}LU(t,i){const s={spc:Ae(t)};return JSON.stringify(s)}VU(t){const i=Zd.Dh(t);return this.ZU=t,i.searchParams.has("b")?Promise.resolve(i.searchParams.get("b")):Promise.reject(new Q(Ne.CONTENT_PROTECTION_INITIALIZATION_INVALID,"Error during license server request: Could not extract content id"))}eU(t,i){let s=this.qW();return!s&&this.ZU&&(s=this.ZU),s&&(s=s.replace("skd://","https://")),super.eU(t,i||s)}oU(t){try{let i;if(i=yo(t)?JSON.parse(t.trim()):t,i.ckc)return Iu(i.ckc)}catch(t){throw new Q(Ne.CONTENT_PROTECTION_LICENSE_INVALID,"Could not process the response from the Uplynk Fairplay license server")}throw new Q(Ne.CONTENT_PROTECTION_LICENSE_ERROR,"No license received from the Uplynk Fairplay license server")}constructor(t,i,s,e){super(t,i,s,e,Bi.CT),this.ZU=void 0}};r(),r(),r();var Ru=class{HU(t){return this.zU(t)}YU(t,i){throw new g(i+" must be "+this.KU+". (Received: "+t+")")}constructor(t,i){this.zU=void 0,this.KU=void 0,this.zU=t,this.KU=i}},ji=(new Ru(function(t){return!0},"any"),new Ru(ih,"a number")),$c=new Ru(yo,"a string"),uI=new Ru(sr,"a boolean"),_h=(new Ru(Yd,"a date"),new Ru(Xd,"undefined")),cI=new Ru(Nc,"an object"),dI=new Ru(function(t){return null===t},"null");new Ru(function(t){return null==t},"null or undefined");function lI(t,i){throw new g(i+" has an incorrect type")}var fI=class{HU(t){if(!Nc(t))return!1;for(const i of w.keys(this.sp)){if(!this.sp[i].HU(t[i]))return!1}return!0}YU(t,i){if(!Nc(t))throw new g(i+" must be an object.");for(const s of w.keys(this.sp)){const e=this.sp[s];if(!e.HU(t[s]))return e.YU(t[s],i+"."+String(s))}throw new g}constructor(t){this.sp=void 0,this.sp=t}};function _c(t){return new fI(t)}function vI(t){return w.keys(t).map(i=>t[i])}var _I=class{HU(t){return Ft(this.qU,t)}YU(t,i){return lI(0,i)}constructor(t){this.qU=void 0,this.qU=t}};function gI(t){return new _I(t)}var mI=class{HU(t){return this.jU.some(i=>i.HU(t))}YU(t,i){return lI(0,i)}constructor(t){this.jU=void 0,this.jU=t}};function Hs(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new mI(i)}var pI=class{HU(t){return he(t)&&t.every(t=>this.QU.HU(t))}YU(t,i){if(!he(t))throw new g(i+" must be an array.");for(let s=0;s<t.length;s++){const e=t[s];this.QU.HU(e)||this.QU.YU(e,i+"["+s+"]")}return lI(0,i)}constructor(t){this.QU=void 0,this.QU=t}};function dc(t){return new pI(t)}var wI=class{HU(t){return Nc(t)&&w.keys(t).every(i=>this.QU.HU(t[i]))}YU(t,i){if(!Nc(t))throw new g(i+" must be an object.");for(const s of w.keys(t))if(!this.QU.HU(t[s]))return this.QU.YU(t[s],i+"."+s);return lI(0,i)}constructor(t){this.QU=void 0,this.QU=t}};function mc(t){return new wI(t)}var yI=class{HU(t){return this.QU().HU(t)}YU(t,i){return this.QU().YU(t,i)}constructor(t){this.QU=void 0,this.QU=Eu(t)}};var bI=_c({responseCode:ji,isException:uI,description:$c,title:$c,correlationId:$c});async function AI(t,i,s,e,n){const r=function(t,i,s,e){const n={token:i.token,account:i.accountId,form:"json"},r=decodeURIComponent(dA(s,n)),h=new oa({});h.append("Content-Type","application/json");const o=Ae(t),a={getFairplayLicense:{releasePid:i.releasePid,spcMessage:o}};return{Yu:r,ck:Bi.DT,lk:h,Fk:ci.POST,XT:JSON.stringify(a),jg:e,Kp:Ic.bk,Uk:vs.Sk}}(t,i,s,n);return await async function(t,i){const s=await i.dk(t),e=await s.OT();if(bI.HU(e))throw new Q(Ne.CONTENT_PROTECTION_LICENSE_ERROR,e.description,void 0,t.Yu,e.responseCode);return Iu(e.getFairplayLicenseResponse.ckcResponse)}(r,e)}var SI=class extends Dn{VU(t){const i=t.replace("FairPlay",this.JU.releasePid);return super.VU(i)}async vU(t,i){return await AI(t,this.JU,this.qW(),this.AR,i)}constructor(t,i,s,e){super(t,i,s,e,Bi.PT),this.JU=void 0,this.JU=i}};r();var TI=class extends Xo{lU(t){return t.clearkey||{}}async $W(t,i,s,e){const n=this.KW;if(this.qW())return super.$W(t,this.uU,s,e);if(n.keys&&n.keys.length){const t={keys:n.keys.map(t=>({kty:"oct",kid:t.id,k:t.value}))};return br(JSON.stringify(t)).buffer}throw new Q(Ne.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The clearkey license has not been configured correctly.")}fU(t,i){return Promise.resolve(new j(0))}async vU(t,i){const s=await super.aU(t,vs.Ik,i),e=JSON.parse(Vc(s));if(e.keys)for(const t of e.keys)t.k&&(t.k=xm(t.k)),t.kid&&(t.kid=xm(t.kid));return br(JSON.stringify(e))}constructor(t,i,s,e){super(t,i,s,e,Bi.PT)}},kI=class extends TI{constructor(t,i,s){super(Dc,t,i,s)}},EI=class extends TI{constructor(t,i,s){super(Jg,t,i,s)}};r();var RI=class extends mu{};r(),r();var xI={url:"",method:"GET",headers:{},body:null,useCredentials:!1};async function II(t,i,s){const e=LI(i),n=t.onCertificateRequest;if(!n||"function"!=typeof n)return Promise.resolve(i);const r=await $s(Promise.resolve(n.call(t,e)),s);return op(r)?Rs(r):MI(Jr({},xI,r))}async function PI(t,i,s,e,n){const r=t.onCertificateResponse,h=BI(i,s,e);if(!r||"function"!=typeof r)return Promise.resolve(i);return Rs(await $s(Promise.resolve(r.call(t,h)),n))}async function CI(t,i,s,e){const n=await async function(t,i,s,e){const n=null==t?void 0:t.onLicenseRequest,r=DI(i,s);if(!n||"function"!=typeof n)return Promise.resolve(r);0;const h=await $s(Promise.resolve(n.call(t,r)),e);if(op(h))return Rs(h).buffer;return Jr({fairplaySkdUrl:void 0},xI,h)}(t,i,s,e);return n instanceof ArrayBuffer?n:MI(n)}async function NI(t,i,s,e,n,r){const h=DI(s,n),o=await async function(t,i,s,e,n){const r=null==t?void 0:t.onLicenseResponse,h=BI(i,s,e);if(!r||"function"!=typeof r)return Promise.resolve(i);0;const o=await $s(Promise.resolve(r.call(t,h)),n);return Rs(o)}(t,new j(i),h,e,r);return Rs(o)}function DI(t,i){return Jr({},LI(t),{fairplaySkdUrl:i})}function BI(t,i,s){return{url:s._k,status:s.rk,statusText:s.fk,headers:s.lk.BT(),body:t,request:i}}function MI(t){return new F({Yu:t.url,Fk:t.method,lk:t.headers,XT:t.body,Xk:t.useCredentials,Kp:Ic.bk})}function LI(t){var i;return{url:t.Yu,body:null!=(i=OI(t.XT))?i:null,headers:t.lk.BT(),method:t.Fk,useCredentials:t.Xk}}function OI(t){if(t)return"string"==typeof t?br(t):t instanceof ArrayBuffer?new j(t):zc(t)?re(t):void 0}var FI=class extends Ju{fU(t,i){return Promise.resolve(t)}async vU(t,i){const s=await this.TU(tc(t).buffer),e=this.tU(s,Bi.PT,vs.xk,i),n=await CI(this.$U,e,void 0,i);if(n instanceof ArrayBuffer)return new j(n);if(""===n.Yu)throw new Q(Ne.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The license request URL has not been correctly configured.");try{const t=await this.AR.dk(n),s=await t.WT(i);return await NI(this.$U,s,e,t,void 0,i)}catch(t){throw Ui(t),new Q(Ne.CONTENT_PROTECTION_LICENSE_ERROR,"Error during PlayReady license request",t)}}constructor(t,i,s,e){super(t,i,s),this.$U=void 0,this.$U=e}};r();var VI=class extends RI{async fU(t,i){if(this.YW)return this.YW;const s=this.tU(t,Bi.PT,vs.Rk,i),e=await II(this.$U,s,i);if(e instanceof j)return e;if(""===e.Yu)throw new Q(Ne.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The certificate request URL has not been correctly configured.");let n,r;try{n=await this.AR.dk(e),r=await n.WT(i)}catch(t){throw Ui(t),new Q(Ne.CONTENT_PROTECTION_CERTIFICATE_ERROR,"Error during Widevine certificate request",t)}const h=DI(s,void 0);return await PI(this.$U,new j(r),h,n,i)}async vU(t,i){const s=this.tU(t,Bi.PT,vs.Ek,i),e=await CI(this.$U,s,void 0,i);if(e instanceof ArrayBuffer)return new j(e);if(""===e.Yu)throw new Q(Ne.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The license request URL has not been correctly configured.");try{const t=await this.AR.dk(e),n=await t.WT(i);return await NI(this.$U,n,s,t,void 0,i)}catch(t){throw Ui(t),new Q(Ne.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Widevine license request",t)}}constructor(t,i,s,e){super(t,i,s,Bi.PT),this.$U=void 0,this.$U=e}};r();var WI=class extends Dn{async fU(t,i){if(this.YW)return this.YW;const s=this.GU(i),e=await II(this.$U,s,i);if(zc(e))return e;try{const t=await this.AR.dk(e),n=await t.WT(),r=DI(s,void 0);return await PI(this.$U,new j(n),r,t,i)}catch(t){throw Ui(t),new Q(Ne.CONTENT_PROTECTION_CERTIFICATE_ERROR,"Error during FairPlay certificate request",t)}}async vU(t,i){const s=this.tU(t,Bi.PT,vs.Sk,i),e=await CI(this.$U,s,this.tG,i);if(e instanceof ArrayBuffer)return new j(e);if(""===e.Yu)throw new Q(Ne.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The license request URL has not been correctly configured.");try{const t=await this.AR.dk(e),n=await t.WT(i);return await NI(this.$U,n,s,t,this.tG,i)}catch(t){throw Ui(t),new Q(Ne.CONTENT_PROTECTION_LICENSE_ERROR,"Error during FairPlay license request",t)}}VU(t){var i;return this.tG=t,(null==(i=this.$U)?void 0:i.extractFairplayContentId)?Promise.resolve(this.$U.extractFairplayContentId(t)):super.VU(t)}constructor(t,i,s,e,n){super(t,i,s,e,Bi.PT),this.$U=void 0,this.tG=void 0,this.$U=n}},UI=class{iG(t,i,s,e){switch(t.TS.Kp){case R.Xp:return this.sG(i,s,e);case R.Gp:return this.eG(i,s,e);case R.zp:return this.nG(t,i,s,e);case R.Hp:return this.rG(i,s,e);case R.Zp:default:return this.hG(i,s,e)}}sG(t,i,s){const e=function(t){return t.integration===JS&&yo(t.customIntegrationId)}(t)?t.customIntegrationId:t.integration;if(e&&di.MP.NP(e,Vg)){const n=di.MP.BP(e,Vg,t);return new VI(t,i,s,n)}switch(e){case Ar:return new Ax(t,i,s);case US:return new Sx(t,i,s);case WS:return new kx(t,i,s);case FS:return new xx(t,i,s);case ZS:return new Nx(t,i,s);case zS:return new Dx(t,i,s);case YS:return new Mx(t,i,s);case qS:return new Lx(t,i,s);default:return new RI(t,i,s,Bi.PT)}}eG(t,i,s){const e=t.integration;if(e&&di.MP.NP(e,Lg)){const n=di.MP.BP(e,Lg,t);return new FI(t,i,s,n)}switch(e){case Ar:return new Vx(t,i,s);case US:return new Ux(t,i,s);case WS:return new Gx(t,i,s);case FS:return new Xx(t,i,s);case ZS:return new Zx(t,i,s);case YS:return new Hx(t,i,s);case qS:return new zx(t,i,s);default:return new Ju(t,i,s)}}nG(t,i,s,e){const n=i.integration;if(n&&di.MP.NP(n,Gs)){const r=di.MP.BP(n,Gs,i);return new WI(t,i,s,e,r)}switch(n){case VS:return new Yx(t,i,s,e);case US:return new Kx(t,i,s,e);case GS:return new Qx(t,i,s,e);case Ar:return new Jx(t,i,s,e);case WS:return new $x(t,i,s,e);case FS:return new tI(t,i,s,e);case XS:return new iI(t,i,s,e);case ZS:return new sI(t,i,s,e);case HS:return new eI(t,i,s,e);case zS:return new nI(t,i,s,e);case YS:return new rI(t,i,s,e);case KS:return new hI(t,i,s,e);case qS:return new oI(t,i,s,e);case jS:return new aI(t,i,s,e);case QS:return new SI(t,i,s,e);default:return new Dn(t,i,s,e,Bi.DT)}}hG(t,i,s){return new kI(t,i,s)}rG(t,i,s){return new EI(t,i,s)}oG(t){return t.Kp===R.Gp||t.Kp===R.Xp||t.Kp===R.zp||t.Kp===R.Zp||t.Kp===R.Hp}DS(t,i){var s;if(t.Kp!==R.Gp)return!1;if(Y(null==(s=i.playready)?void 0:s.customData))return!0;const e=i.integration;return(!e||!di.MP.NP(e,Gs))&&(e===Ar&&new Fx(i).DS)}mU(t,i){if(t.Kp!==R.Xp)return;const s=i.integration;return s&&di.MP.NP(s,Gs)?void 0:s===Ar?Ax.mU():void 0}};r(),r(),r();var GI="theoplayer-stored-network-info-v2",XI=25e5,bu=class{aG(t){var i;const s=null==(i=Zd.mR)?void 0:i.Uy(t);if(void 0===s)return;const e=JSON.parse(s);if(void 0!==e&&void 0!==e[this.uG]){if(!this.cG(e))return e[this.uG].availableBandwidth;var n;null==(n=Zd.mR)||n.Gy(t,JSON.stringify({}))}}dG(){const t=this.aG(GI);if(void 0!==t)return t;const i=this.aG("theoplayer-stored-network-info");return i?8*i:void 0}cG(t){const i=t[this.uG].storedTimestamp;return!!i&&qf()-i>36e5}lG(t){this.fG=t,this.vG()}_G(){var t;return null!=this.fG||(this.fG=null!=(t=this.dG())?t:XI),this.fG}constructor(){this.uG=Lb,this.fG=void 0,this.vG=Hh(()=>{var t;const i={[this.uG]:{availableBandwidth:this.fG,storedTimestamp:qf()}};null==(t=Zd.mR)||t.Gy(GI,JSON.stringify(i))},1e4)}};bu.Bg=new bu,r();var ki=function(t){return t[t.gG=0]="gG",t[t.mG=1]="mG",t[t.pG=2]="pG",t[t.wG=3]="wG",t[t.yG=4]="yG",t[t.bG=5]="bG",t[t.fP=6]="fP",t[t.AG=7]="AG",t[t.SG=8]="SG",t[t.mP=9]="mP",t[t.TG=10]="TG",t[t.pP=11]="pP",t[t.kG=12]="kG",t}({});r();var tu=class{get EG(){return 0}get xG(){return 0}IG(t){}};r(),r();var ZI=class extends sh{constructor(t){super("contentProtectionsTracked"),this.CG=void 0,this.CG=t}},HI=class extends fr{NG(t){this.RU=t}mU(t){const i=this.RU;if(void 0!==i)return this.DG.mU(t,i)}DS(t){const i=this.RU;return void 0!==i&&this.DG.DS(t,i)}BG(t){const i={TS:t.TS,MG:t.MG||[],OG:t.OG,XU:t.XU,FG:t.FG||[]},s=this.DG.iG(i,this.RU||{},t.dU,this.rW);return i.OG&&s.ZW(i.OG),new zI(s)}VG(t){if(!t)return;me(t,t=>void 0!==t.dU)&&this.So(new ZI(t))}constructor(t,i=new UI){super(),this.rW=void 0,this.DG=void 0,this.RU=void 0,this.rW=t,this.DG=i}},zI=class{QW(t){return this.WG.QW(t)}JW(t,i,s){return this.WG.JW(i,s)}jW(){return this.WG.jW||void 0!==this.WG.YW}fU(t,i){return this.WG.fU(t,i)}vU(t,i,s){return i&&this.WG.ZW(i),this.WG.vU(t,s)}Zg(){this.WG.kn()}constructor(t){this.WG=void 0,this.WG=t}};r();var Ka=class extends To{UG(t){this.GG.push(t);for(const i of t.CI)this.tt(i);this.XG(t)}ZG(t){is(this.GG,t),this.HG(t);for(const i of t.CI)this.zG(i)||this.it(i)}zG(t){for(const i of this.GG)if(i.BI(t))return!0;return!1}XG(t){t.wn(Lu.nI,this.YG),t.wn(Lu.hI,this.cW)}HG(t){t.mn(Lu.nI,this.YG),t.mn(Lu.hI,this.cW)}kn(){for(;this.GG.length>0;)this.ZG(this.GG[0]);super.kn()}xa(){return xS(this)}constructor(t){super(),this.GG=[],this.YG=t=>{this.tt(t.Ht)},this.cW=t=>{const i=t.Ht;this.zG(i)||this.it(i)};for(const i of t)this.UG(i)}};r(),r();var YI,KI={forceSeekOffset:0,maximumOffset:0,maximumPlaybackRate:0,minimumOffset:0,minimumPlaybackRate:0,targetOffset:0},qI=class{get Ca(){return null!=this.hu||(this.hu=function(t){return{get enabled(){return t.Rt},set enabled(i){t.Rt=Zu(i)},get monitoringLivePlayback(){return t.KG},get currentLatency(){return t.NL},get currentConfiguration(){return function(t){if(void 0!==t)return{get minimumOffset(){return t.minimumOffset},get maximumOffset(){return t.maximumOffset},get targetOffset(){return t.targetOffset},get forceSeekOffset(){return t.forceSeekOffset},get minimumPlaybackRate(){return t.minimumPlaybackRate},get maximumPlaybackRate(){return t.maximumPlaybackRate}}}(t.Cd)}}}(this)),this.hu}get Rt(){var t,i;return null!=(i=this.We)?i:Boolean(null==(t=this.qG)?void 0:t.Rt)}set Rt(t){this.We=t,this.qG&&(this.qG.Rt=t)}get KG(){var t,i;return null!=(i=null==(t=this.qG)?void 0:t.sL)&&i}get NL(){var t;return null==(t=this.qG)?void 0:t.CL}get Cd(){return this.qG?this.qG.eL:KI}Ea(t){this.qG=t,void 0!==this.We&&(this.qG.Rt=this.We)}hr(){this.qG=void 0,this.We=void 0}constructor(){this.hu=void 0,this.qG=void 0,this.We=void 0}};var jI=Boolean(s&&s.TextTrack),QI=class extends ua{get NL(){}get jG(){const t=this.SL.IR,i=this.OR;return t.Cr(i,.01)}get ht(){return this.qL}get IR(){return this.SL.IR._s()}get NR(){return this.SL.NR}set NR(t){t&&this.SL.QG(t)}get bt(){return this.Ac}get OR(){return void 0!==this.JG?this.JG:this.SL.OR}set OR(t){this.WR(t)}WR(t,i){this.QR&&(this.JG=t),this.SL.By(t)}get ct(){return this.SL.ct}get GR(){return this.SL.GR}get lt(){return this.$G}get HR(){return this.tX}get YR(){}get qR(){}get QR(){return this.SL.QR}get $R(){return Jr({},{tO:0,iO:0,sO:0,eO:0,nO:0,rO:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}},this.SL.tx())}get ix(){return this.SL.ix}set ix(t){this.SL.ix=t}get hx(){return!0}get ux(){return this.SL.ux}get vx(){return this.SL.vx}set vx(t){this.SL.vx=t}get mx(){return this.SL.iX.played}get yx(){return this.sX}set yx(t){this.sX=t,this.eX&&(this.eX.yx=t)}get Sx(){return this.SL.Sx}get kx(){return this.SL.kx._s()}get Rx(){return this.SL.Rx}get nX(){return this.SL.nX}get nt(){return this.Gl}get rt(){return this.JL}get Nx(){return this.SL.Nx}get Mx(){return this.SL.Mx}get Ox(){return this.SL.Ox}set Ox(t){this.SL.Ox=t}get Wx(){return this.rX}get Gx(){return this.SL.Gx}set Gx(t){this.SL.Gx=t}get hX(){return this.oX}we(){this.SL.we()}be(){this.SL.be()}async Ta(t,i,s){Ko(s),this.Ac=t;const e={Kp:xt.wW,eP:t.src,GT:t.type,aX:this.uX(t),yx:this.sX,cX:t.crossOrigin,dX:i.metadata&&i.metadata.title};this.lX.NG(t.contentProtection),this.eX=await this.SL.Un(e),Ko(s),i.textTracks&&this.fX(i.textTracks),Ue(this.nt)}Ix(t,i,s,e){return Promise.resolve()}Px(){return Promise.resolve()}fX(t){for(const s of t)if(this.SL.vX()&&As.ru&&jI&&!QR(s.kind,s.label)&&this._X(s)){var i;const t=null!=(i=s.kind)?i:D.OV;this.SL.gX(s.src,t,s.label,s.srclang,s.default)}else{if(void 0===s.src)continue;this.mX.eW(s)}}_X(t){return!t.format||"webvtt"===t.format}async Yx(){try{await this.SL.Yx()}catch(t){}for(;!this.jG;)await this.SL.pw(d.Yw)}zx(){this.SL.zx()}qx(){return void 0!==this.SL.iX.webkitShowPlaybackTargetPicker}jx(){this.SL.iX.webkitShowPlaybackTargetPicker&&this.SL.iX.webkitShowPlaybackTargetPicker()}Qx(){this.SL.iX.webkitShowPlaybackTargetPicker&&this.SL.iX.webkitShowPlaybackTargetPicker()}Zx(){return this.SL.iX}Xx(){return this.SL.Ma}Aa(){return this.SL.pX}sI(t){return this.SL.wX(t)}async hr(){this.Ac=void 0,this.$G=void 0,this.tX=void 0,this.eX=void 0,await this.mX.hr(),await this.yX.hr(),this.SL.bX(),await this.SL.hr(),this.AX.hr(),this.yx=this.sX,this.ht.hr(),this.rt.hr(),this.JG=void 0}async kn(){await this.hr(),this.Vo(),this.SX(),this.TX(),this.AX.kn(),this.kX.Zg(),this.SL.EX=void 0,await this.xX.RX(this.SL),this.qL.kn(),this.JL.kn(),this.Gl.kn(),await this.mX.kn(),await this.yX.kn()}IX(){this.SL.wn(d.uo,this.Rs),this.SL.wn(d.zw,this.Rs),this.SL.wn(d.vy,this.Nc),this.SL.wn(d.Yw,this.Rs),this.SL.wn(d.Uw,this.Rs),this.SL.wn(d.Jw,this.Rs),this.SL.wn(d.Qw,this.PX),this.SL.wn(d.Nw,this.Rs),this.SL.wn(d.Kw,this.Rs),this.SL.wn(d._y,this.Rs),this.SL.wn(d.Iw,this.Rs),this.SL.wn(d.jw,this.CX),this.SL.wn(Vo.SM,this.xL),this.SL.wn(sa.ma,this.NX),this.SL.wn(d.Ew,this.Rs),this.SL.wn(d.Tw,this.DX),this.SL.iX.addEventListener("webkitcurrentplaybacktargetiswirelesschanged",this.BX)}SX(){this.SL.mn(d.uo,this.Rs),this.SL.mn(d.zw,this.Rs),this.SL.mn(d.vy,this.Nc),this.SL.mn(d.Yw,this.Rs),this.SL.mn(d.Uw,this.Rs),this.SL.mn(d.Jw,this.Rs),this.SL.mn(d.Qw,this.PX),this.SL.mn(d.Nw,this.Rs),this.SL.mn(d.Kw,this.Rs),this.SL.mn(d._y,this.Rs),this.SL.mn(d.Iw,this.Rs),this.SL.mn(d.jw,this.CX),this.SL.mn(Vo.SM,this.xL),this.SL.mn(sa.ma,this.NX),this.SL.mn(d.Ew,this.Rs),this.SL.mn(d.Tw,this.DX),this.SL.iX.removeEventListener("webkitcurrentplaybacktargetiswirelesschanged",this.BX)}uX(t){if(!t.contentProtection||!t.contentProtection.fairplay)return[];return[{TS:jg,MX:[{initDataTypes:[jg.jp],videoCapabilities:[{contentType:"video/mp4",encryptionScheme:"cbcs"}]}]}]}LX(){const t=this.SL.iX.audioTracks,i=this.SL.iX.videoTracks;t&&(t.addEventListener("addtrack",this.OX),t.addEventListener("removetrack",this.FX),t.addEventListener("change",this.VX)),i&&(i.addEventListener("addtrack",this.WX),i.addEventListener("removetrack",this.UX),i.addEventListener("change",this.GX))}TX(){const t=this.SL.iX.audioTracks,i=this.SL.iX.videoTracks;t&&(t.removeEventListener("addtrack",this.OX),t.removeEventListener("removetrack",this.FX),t.removeEventListener("change",this.VX)),i&&(i.removeEventListener("addtrack",this.WX),i.removeEventListener("removetrack",this.UX),i.removeEventListener("change",this.GX))}dh(t){for(let i=0;i<t.V;i++){t.DI(i).wO()}}Jx(){this.SL.Jx()}$x(){}XX(t,i){this.$G||(this.$G=i,this.tX=t,this.So(new $e(t)))}constructor(t,i,s,e,n,r,h=new UI,o=Pb()){super(),this.xX=void 0,this.SL=void 0,this.eX=void 0,this.qL=void 0,this.JL=void 0,this.Gl=void 0,this.yX=void 0,this.Ac=void 0,this.$G=void 0,this.tX=void 0,this.sX=void 0,this.kX=void 0,this.AX=void 0,this.mX=void 0,this.rW=void 0,this.nw=void 0,this.lX=void 0,this.JG=void 0,this.oX=new tu,this.rX=new qI,this.NX=t=>{const i=t.lt,s=i.code,e=new Wt(Xk(s),"Something went wrong during native playback.",i),n=new iu(s,e.message,i.message);this.XX(e,n)},this.Nc=()=>{this.So(new Tc(this.OR,this.NR))},this.ZX=()=>{!this.Rx&&As.ru&&As.z_&&this.ct===1/0&&this.WR(1/0)},this.PX=t=>{this.ux||(this.JG=void 0),this.So(t)},this.xL=t=>{this.JG=void 0},this.BX=()=>{this.So(new iE(this.QR))},this.CX=()=>{this.Mx>0&&this.Nx>0&&this.So(new es)},this.OX=t=>{const i=this.SL.iX.audioTracks;if(i)for(let t=0;t<i.length;t++){const s=i[t];tP(this.qL,s)||this.qL.tt(new Jk(s))}},this.FX=t=>{const i=[],s=this.SL.iX.audioTracks;if(s){for(const t of this.qL.CI)iP(s,t.mO)||i.push(t);for(const t of i)this.qL.it(t)}},this.VX=()=>{this.dh(this.qL)},this.WX=t=>{const i=this.SL.iX.videoTracks;if(i)for(let t=0;t<i.length;t++){const s=i[t];tP(this.JL,s)||this.JL.tt(new tE(s))}},this.UX=t=>{const i=[],s=this.SL.iX.videoTracks;if(s){for(const t of this.JL.CI)iP(s,t.mO)||i.push(t);for(const t of i)this.JL.it(t)}},this.GX=()=>{this.dh(this.JL)},this.DX=t=>{this.So(t),this.XX(t.errorObject,xs(t.errorObject))},this.xX=i,this.rW=s,this.nw=o,this.SL=this.xX.HX(Mo.Nk),this.sX=this.SL.iX.preload,this.kX=new vx(this,this.SL),this.AX=new ts(this.kX,!0),this.AX.wn(K,this.Rs),this.AX.wn(Vo.bM,this.ZX),this.lX=new HI(s,h),this.SL.EX=this.lX,this.IX(),this.qL=new O,this.JL=new O,this.LX(),this.mX=new bo(this.SL,this.rW),this.yX=new rx(this.SL,this.SL.nt),this.Gl=new Ka([this.SL.nt,this.mX.Z,this.yX.Z]),this.be()}};function JI(t){var i,e;if(!(null==(i=(YI||(YI=s&&s.document&&s.document.createElement("video")),e=YI).canPlayType)?void 0:i.call(e,t.type)))return!1;if(t.useNativePlayback)return!0;const n=As.ru||As.Tg;return!t.useManagedMediaSource||!n}var $I=class{xP(t,i,s,e,n,r,h){return new QI(t,i,s,e,n,r)}zX(t,i){return JI(t)}YX(t){return PT(t)}KX(){return!1}constructor(){this.qX=ki.kG}};function tP(t,i){for(const s of t.CI)if(s.mO===i)return s}function iP(t,i){for(let s=0;s<t.length;s++)if(t[s]===i)return!0;return!1}var uc=class{static jX(){return this.Bg}QX(t){this.JX.push(t)}get qX(){return this.$X.qX}xP(t,i,s,e,n,r,h){let o=this.$X.xP(t,i,s,e,n,r,h);for(const t of this.JX)o=t(o,s,e);return o}zX(t,i){return this.$X.zX(t,i)}YX(t){return this.$X.YX(t)}KX(){return!1}constructor(){this.$X=new $I,this.JX=[]}};function sP(t,i){return vc(t.qX,i.qX)}uc.Bg=new uc,r(),r();var eP=class{tZ(t){this.iZ.push(t),this.iZ.sort(sP)}async sZ(t,i){for(const s of this.iZ){const e=s.zX(t,i);if(zd(e)?await e:Boolean(e))return s}}constructor(){this.iZ=[]}};function cs(t){nP.Bg.tZ(t)}r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r();var nP=class extends eP{eZ(t){this.nZ=t}rZ(){return this.nZ}async hZ(t,i){const s=this.nZ;let e=!1;for(const n of t){const t=await this.sZ(n,i);if(t){if(mT(n.contentProtection)||await t.YX(n.contentProtection))return{Mc:n,t:t};n.contentProtection&&(e=!0)}const r=s.zX(n,i);if(zd(r)?await r:Boolean(r)){if(mT(n.contentProtection)||await s.YX(n.contentProtection))return{Mc:n,t:s};n.contentProtection&&(e=!0)}}if(e)throw await Zd.mp()?new Wt(Ne.CONTENT_PROTECTION_NOT_SUPPORTED,"Encrypted content over an insecure connection is not supported."):new Wt(Ne.CONTENT_PROTECTION_NOT_SUPPORTED,"The DRM configuration is not supported by this platform.");return{Mc:t[0],t:s}}constructor(...t){super(...t),this.nZ=uc.jX()}};nP.Bg=new nP,r();var rP=class{kn(){je(this.Ls)}constructor(t){this.Ls=void 0,this.Ls=s&&s.document&&s.document.createElement("div"),Bl(this.Ls),t.appendChild(this.Ls)}};r(),r();var hl=function(t){return t.kG="",t.oZ="none",t.WV="metadata",t.LL="auto",t}({});var hP=[sa.ma,d.Pw,d.Cw,d.Ay,d.ww,d.Dw,d.Mw,d.Zw,d.Hw,d.ey,d.uy,Vo.pM,Vo.wM,Vo.yM,Vo.bM,Vo.bI,Vo.AM,Vo.SM,d.Tw,d.Ew,d.Iw,d.Nw,d.Uw,d.Gw,d.uo,d.Yw,d.zw,d.Kw,d.jw,d.Jw,d.Qw,d.vy,d._y,d.qw,d.Xw,d.$w,d.iy],oP=class extends ua{get ht(){return this.qL}get IR(){return this.oa.IR}get lt(){return this.oa.lt}get HR(){return this.oa.HR}get NR(){return this.oa.NR}set NR(t){this.oa.NR=t}get bt(){return this.aZ}get OR(){return this.oa.OR}set OR(t){this.oa.OR=t}get ct(){return this.oa.ct}get GR(){return this.oa.GR}get YR(){return this.QL}get qR(){return this.jL}get QR(){return this.oa.QR}get $R(){return this.oa.$R}get ix(){return this.oa.ix}set ix(t){this.oa.ix=t}get hx(){return this.oa.hx}get ux(){return this.oa.ux}get vx(){return this.oa.vx}set vx(t){this.oa.vx=t}get mx(){return this.oa.mx}get yx(){return this.sX}set yx(t){this.sX=t,this.oa&&(this.oa.yx=this.sX)}get Sx(){return this.oa.Sx}get kx(){return this.oa.kx}get Rx(){return this.oa.Rx}get nt(){return this.Gl}get Nx(){return this.oa.Nx}get rt(){return this.JL}get Mx(){return this.oa.Mx}get Ox(){return this.oa.Ox}set Ox(t){this.oa.Ox=t}get Wx(){return this.oa.Wx}get hX(){return this.oa.hX}zx(){this.oa.zx()}Yx(){const t=this.oa.Yx();zd(t)&&_e(t)}Kx(){return this.Ta(void 0)}Hx(){}uZ(){this.KL.MI=this.oa.Aa(),this.qL.MI=this.oa.ht,this.JL.MI=this.oa.rt,this.Gl.MI=this.oa.nt,this.QL.MI=this.oa.YR,this.jL.MI=this.oa.qR,this.oa.wn(hP,this.Rs)}cZ(){this.oa.mn(hP,this.Rs),this.qL.MI=void 0,this.JL.MI=void 0,this.Gl.MI=void 0,this.QL.MI=void 0,this.jL.MI=void 0}nu(){return this.dZ}async Ta(t,i){if(Ko(i),this.dZ=t,!t)return;const s=t.sources.filter(wk);if(Ds(s))return;const e=await this.lZ.hZ(s,t);Ko(i);const n=e.Mc,r=e.t,h=this.Xx(),o=Ek(this);(this.fZ!==r||this.lt)&&(this.cZ(),await this.oa.kn(),Ko(i),this.fZ=r,this.oa=this.vZ(r,n),function(t,i){t.ix!==i.ix&&(t.ix=i.ix);t.Ox!==i.Ox&&(t.Ox=i.Ox);t.vx!==i.vx&&(t.vx=i.vx)}(this.oa,o),Ns(this,o,this),this.uZ()),this.oa.yx=this.yx,this._Z?this.oa.be():this.oa.we(),await this.oa.Ta(n,t,i),Ko(i),this.gZ(n),this.Xx()!==h&&this.So(new qt)}async Ix(t,i,s){Ko(s);const e=t.sources.filter(wk);if(Ds(e))return;const n=await this.lZ.hZ(e,t);Ko(s);const r=n.Mc,h=n.t;this.fZ!==h||this.lt||await this.oa.Ix(r,t,i,s)}Px(){return this.oa.Px()}gZ(t){this.aZ!==t&&(this.aZ=t,this.So(new Ik(t)))}qx(){return this.oa.qx()}jx(){this.oa.jx()}Qx(){this.oa.Qx()}Xx(){return this.oa.Xx()}Aa(){return this.KL}Jx(){this.oa.Jx()}$x(){this.oa.$x()}sI(t){return this.oa.sI(t)}async hr(){this.dZ=void 0,this.gZ(void 0),await this.oa.hr()}async kn(){this.Vo(),await this.hr(),await this.oa.kn(),this.qL.kn(),this.JL.kn(),this.Gl.kn(),this.KL.kn(),this.QL.kn(),this.jL.kn()}be(){this._Z=!0,this.oa.be()}we(){this._Z=!1,this.oa.we()}constructor(t,i){super(),this.lZ=void 0,this.fZ=void 0,this.oa=void 0,this.aZ=void 0,this.sX=hl.oZ,this.dZ=void 0,this._Z=!0,this.qL=new Yu,this.JL=new Yu,this.Gl=new Jc,this.KL=void 0,this.QL=new Ri,this.jL=new Ok,this.lZ=t,this.oa=i,this.oa.yx=this.yx,this.KL=new qo(i.Aa()),this.uZ()}};r(),r(),r(),r();var Ze=function(t){return t.pa="fullscreenchange",t.ka="fullscreensupportchange",t.ma="fullscreenerror",t}({});r();var ac=class extends sh{constructor(){super(Ze.ma)}},bs=(Ze.pa,Ze.ka,Ze.ma,class extends fr{get ds(){return!1}get ca(){return!1}yo(){this.So(new ac)}jo(){}kn(){this.Vo()}});r(),r();var eu=class extends sh{constructor(){super(ar.ma)}},Du=class extends fr{get zL(){return!1}get HL(){return!1}async yo(){this.So(new eu)}async jo(){this.So(new eu)}kn(){this.Vo()}},aP=class extends fr{get NR(){}set NR(t){}get bt(){}get OR(){return this.mZ}set OR(t){this.WR(t)}WR(t,i){this.mZ!==t&&(this.mZ=t,this.pZ=!0,this.So(new ul(this.OR)))}get $R(){return{tO:0,iO:0,sO:0,eO:0,nO:0,rO:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}}}get ix(){return this.wZ}set ix(t){this.wZ!==t&&(this.wZ=t,this.So(new q(this.OR,this.Ox)))}get ux(){return this.yZ}get vx(){return this.bZ}set vx(t){this.bZ!==t&&(this.bZ=t,this.So(new Fs(this.OR,this.vx)))}get Rx(){return this.pZ}get Ox(){return this.oA}set Ox(t){this.oA!==t&&(this.oA=t,this.So(new q(this.OR,this.Ox)))}get Gx(){return!1}set Gx(t){}get hX(){return this.oX}get NL(){}be(){}we(){}Yx(){this.yZ&&(this.yZ=!1,this.So(new Ts(this.OR)),this.So(new lx(this.OR)))}zx(){this.yZ||(this.yZ=!0,this.So(new Tc(this.OR,this.NR)),this.So(new Pi(this.OR)))}Ta(t,i){return Promise.resolve()}Ix(t,i,s,e){return Promise.resolve()}Px(){return Promise.resolve()}qx(){return!1}jx(){}Qx(){}Xx(){return this.ha}Aa(){return this.ea}sI(t){throw new m("Adding a CustomTextTrack is not supported without setting a source.")}Jx(){}$x(){}async hr(){this.mZ=0,this.pZ=!1,this.zx(),this.So(new Jt(this.mZ))}async kn(){this.Vo(),this.ht.kn(),this.nt.kn(),this.rt.kn()}constructor(...t){super(...t),this.mZ=0,this.wZ=!1,this.yZ=!0,this.bZ=1,this.pZ=!1,this.oA=1,this.ht=new O,this.IR=ZT.tL()._s(),this.ct=NaN,this.GR=!1,this.lt=void 0,this.HR=void 0,this.YR=void 0,this.qR=void 0,this.QR=!1,this.hx=!0,this.mx=ZT.tL()._s(),this.yx=hl.oZ,this.Sx=pi.VL,this.kx=ZT.tL()._s(),this.nX=void 0,this.nt=new ou,this.Nx=0,this.rt=new O,this.Mx=0,this.Wx=new qI,this.oX=new tu,this.ha=new bs,this.ea=new Du}},uP=class extends aP{set AZ(t){this.xX=t,this.SL=t.HX(Mo.Nk)}Zx(){var t;return null==(t=this.SL)?void 0:t.iX}async kn(){await super.kn(),this.SL&&(await this.xX.RX(this.SL),this.SL=void 0)}constructor(...t){super(...t),this.xX=void 0,this.SL=void 0}},cP=class extends oP{get xe(){return this.Tu}get Gx(){return this.oa.Gx}set Gx(t){this.oa.Gx=t}Hx(){super.Hx(),this.TZ.SZ()}gr(t){Rk(this,t)}mr(){}tI(t){return!1}async Ta(t,i){const s=this.Xx(),e=this.Zx();await super.Ta(t,i),this.Xx()!==s&&this.So(new qt),this.Zx()!==e&&this.So(new Pk)}WR(t,i){this.oa.WR(t,i)}vZ(t,i){return t.xP(this.Tu,this.TZ,this.rW,this.qS,this.kZ,this.EZ,this.RZ,i)}Zx(){return this.oa.Zx()}xR(){return this.TZ.xZ.map(t=>t.iX)}async kn(){await super.kn(),this.TZ.kn(),this.IZ.kn()}constructor(t,i,s,e,n,r,h){const o=new uP;super(nP.Bg,o),this.qS=void 0,this.TZ=void 0,this.Tu=void 0,this.RZ=void 0,this.rW=void 0,this.kZ=void 0,this.EZ=void 0,this.IZ=void 0,this.Tu=t,this.qS=i,this.rW=s,this.kZ=e,this.EZ=n,this.RZ=h,this.TZ=r,o.AZ=r,this.IZ=new rP(this.Tu)}};r(),r();var dP=class extends ua{get ht(){return this.PZ}get IR(){return ZT.tL()._s()}get NR(){return new Date(NaN)}set NR(t){}get bt(){}get OR(){return 0}set OR(t){}WR(t,i){}get ct(){return 0}get xe(){return this.Tu}get GR(){return!0}get lt(){return this.CZ}get HR(){return this.NZ}get YR(){}get qR(){}get $R(){return{tO:0,iO:0,sO:0,eO:0,nO:0,rO:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}}}get ix(){return!1}set ix(t){}get hx(){return!0}get ux(){return!0}get vx(){return 0}set vx(t){}get mx(){return ZT.tL()._s()}get yx(){return hl.oZ}set yx(t){}get Sx(){return pi.VL}get kx(){return ZT.tL()._s()}get Rx(){return!1}get nt(){return this.DZ}get Nx(){return 0}get rt(){return this.PZ}get Mx(){return 0}get Ox(){return 1}set Ox(t){}get Wx(){return this.rX}get Gx(){return!1}set Gx(t){}tI(t){return!0}we(){}Yx(){throw this.So(new $e(this.NZ)),this.CZ}zx(){}nu(){}async Ta(t,i){throw Ko(i),this.So(new $e(this.NZ)),this.CZ}Ix(t,i,s){return Promise.resolve()}Px(){return Promise.resolve()}be(){}Kx(){return Promise.resolve()}Zx(){}Xx(){return this.ha}Aa(){return this.ea}xR(){return[]}Hx(){}gr(t){}mr(){}get QR(){return!1}qx(){return!1}jx(){}Qx(){}Jx(){}$x(){}sI(t){}hr(){return Promise.resolve()}kn(){return this.Vo(),this.PZ.kn(),this.DZ.kn(),Promise.resolve()}constructor(t,i,s){super(),this.Tu=void 0,this.CZ=void 0,this.NZ=void 0,this.PZ=void 0,this.DZ=void 0,this.ha=new bs,this.ea=new Du,this.rX=new qI,this.Tu=t,this.CZ=i,this.PZ=new O,this.DZ=new ou,this.NZ=s}};function lP(t){if(t&&Nc(t))return Jr({},t,{integration:fP(t.integration),fairplay:wP(t.fairplay),widevine:vP(t.widevine),playready:_P(t.playready),clearkey:yP(t.clearkey),aes128:bP(t.aes128),integrationParameters:AP(t.integrationParameters),preferredKeySystems:SP(t.preferredKeySystems),useOipfDrmAgent:Zu(t.useOipfDrmAgent)})}function fP(t){if(yo(t))return t}function vP(t){if(t&&Nc(t))return{persistentState:gP(t.persistentState),distinctiveIdentifier:gP(t.distinctiveIdentifier),audioRobustness:mP(t.audioRobustness),videoRobustness:mP(t.videoRobustness),licenseAcquisitionURL:yo(t.licenseAcquisitionURL)?t.licenseAcquisitionURL:void 0,licenseType:pP(t.licenseType),headers:t.headers,useCredentials:!!sr(t.useCredentials)&&t.useCredentials,queryParameters:t.queryParameters,certificate:yo(t.certificate)||op(t.certificate)?t.certificate:void 0}}function _P(t){if(!t)return;const i=vP(t);if(!i)return;return Jr({},i,{customData:yo(t.customData)?t.customData:void 0})}function gP(t){switch(null==t?void 0:t.toLowerCase()){case"required":return"required";case"optional":return"optional";case"not-allowed":return"not-allowed"}}function mP(t){switch(t){case"HW_SECURE_ALL":return"HW_SECURE_ALL";case"HW_SECURE_DECODE":return"HW_SECURE_DECODE";case"HW_SECURE_CRYPTO":return"HW_SECURE_CRYPTO";case"SW_SECURE_DECODE":return"SW_SECURE_DECODE";case"SW_SECURE_CRYPTO":return"SW_SECURE_CRYPTO";case"":return""}}function pP(t){switch(null==t?void 0:t.toLowerCase()){case"temporary":return"temporary";case"persistent":return"persistent"}}function wP(t){if(!t)return;const i=vP(t);if(!i)return;return Jr({},i,{certificateURL:yo(t.certificateURL)?t.certificateURL:void 0})}function yP(t){if(!t)return;const i=vP(t);if(!i)return;const s=he(t.keys)?t.keys.map(t=>function(t){if(!t||!Nc(t))return;const i=t.id,s=t.value;if(!yo(i)||!yo(s))return;return{id:i,value:s}}(t)).filter(Y):void 0;return Jr({},i,{keys:s})}function bP(t){if(Nc(t))return{useCredentials:sr(t.useCredentials)?t.useCredentials:void 0}}function AP(t){if(Nc(t))return t}function SP(t){return t&&he(t)?t.map(t=>xT(t)).filter(Y):[Vg,Lg,Gs]}r(),r(),r(),r();var TP={bt:void 0,OR:0,ct:NaN,GR:!1,lt:void 0,HR:void 0,ix:!1,ux:!0,vx:1,Sx:pi.VL,Rx:!1,Nx:0,Mx:0,Ox:1};r();var Za=function(t){return t.DEFAULT="",t.THEO="theo",t.CSAI="csai",t.GOOGLE_IMA="google-ima",t.SPOTX="spotx",t.FREEWHEEL="freewheel",t.MEDIATAILOR="mediatailor",t.THEOADS="theoads",t.UPLYNK="uplynk",t}({}),$h=class{get BZ(){return this.MZ}LZ(t){const i=this.MZ.filter(i=>i.OZ(t));if(i.length>1)0;else if(0===i.length)throw m("Unknown ad integration: "+t.integration);return i[0]||null}FZ(t){this.MZ.push(t)}constructor(){this.MZ=[]}};$h.Bg=new $h,r(),r(),r(),r();var qe=function(t){return t.SM="PLAYING",t.VZ="PAUSED",t.WZ="SEEK",t.UZ="STALLED",t.GZ="FAILED",t.XZ="INITIAL_BUFFERING",t.ZZ="NO_ACCESS",t}({}),Go=function(t){return t.HZ="HTTP_REQUEST_STATUS_CODE_1XX",t.zZ="HTTP_REQUEST_STATUS_CODE_2XX",t.YZ="HTTP_REQUEST_STATUS_CODE_3XX",t.KZ="HTTP_REQUEST_STATUS_CODE_4XX",t.qZ="HTTP_REQUEST_STATUS_CODE_5XX",t.jZ="BUFFER_LENGTH",t.QZ="BYTES_RECEIVED",t.JZ="SEGMENT_READ_BITRATE",t.$Z="SEGMENT_PROFILE_BITRATE",t.tH="VIDEO_PROFILE_BITRATE",t.iH="NUMBER_OF_FRAMES_DROPPED",t.sH="PLAYBACK_POSITION",t.eH="NUMBER_OF_FRAMES_DECODED",t.nH="PLAYBACK_DELTA_TO_ORIGIN",t.rH="STREAM_DELTA_TO_ORIGIN",t.hH="ORIGIN_TIMESTAMP",t}({}),zt=function(t){return t.oH="MANIFEST_URI",t.aH="ASSET_DURATION",t.uH="NUMBER_OF_CONTENT_PROFILES",t.cH="CDN",t.dH="CONTENT_TITLE",t.lH="SERVICE_NAME",t.fH="CONTENT_TYPE",t.vH="CONTENT_DESCRIPTION",t}({}),kP=function(t){return t._H="shutdown_normal_shutdown",t}({}),EP=function(t){return t.gH="session/",t.mH="content/",t.pH="internalError/",t.wH="drmError/",t.yH="caError/",t.bH="networkError/",t}({}),RP=class{get code(){return this.category+this.statusCode}constructor(t,i){this.category=void 0,this.statusCode=void 0,this.category=t,this.statusCode=i}},xP=class extends fr{};r(),r(),r();var IP=function(t){return t.PAUSE="AH",t.RESUME="SH",t}({}),PP=class extends sh{constructor(){super("TH")}},CP=class extends fr{kH(){this.EH=!0}RH(){}kn(){this.EH=!1,this.xH.mn(IP.PAUSE,this.IH),this.xH.mn(IP.RESUME,this.PH)}CH(){return isFinite(this.oa.Nd())}constructor(t,i){super(),this.oa=void 0,this.xH=void 0,this.EH=void 0,this.IH=void 0,this.PH=void 0,this.oa=t,this.xH=i,this.EH=!1,this.IH=()=>{this.RH(),this.EH=!1},this.PH=()=>{this.EH=!0},this.xH.wn(IP.PAUSE,this.IH),this.xH.wn(IP.RESUME,this.PH)}},NP=class extends CP{kH(){super.kH(),this.NH()}kn(){this.DH(),super.kn()}NH(){this.oa.wn(Vo.AM,this.BH),this.oa.wn(d.zw,this.MH),this.oa.wn(Vo.SM,this.LH),this.oa.wn(d.Jw,this.OH),this.oa.wn(d.Qw,this.FH)}DH(){this.oa.mn(Vo.AM,this.BH),this.oa.mn(d.zw,this.MH),this.oa.mn(Vo.SM,this.LH),this.oa.mn(d.Jw,this.OH),this.oa.mn(d.Qw,this.FH)}VH(){this.WH=!0}UH(){const t=this.oa.ZR(),i=new RP(EP.pH,String(t.code));this.GH(qe.GZ,i,t.message)}XH(t){this.EH&&(this.xH.ZH(t),this.So(new PP))}GH(t,i,s){this.xH.HH(t,i,s),this.So(new PP)}zH(t,i){this.xH.YH(t,i)}constructor(...t){super(...t),this.WH=!1,this.KH=!1,this.qH=!1,this.BH=()=>{this.KH&&!this.qH&&this.XH(qe.UZ)},this.LH=()=>{this.oa.ux||(this.KH||this.zH(new RP(EP.mH,"firstFrameDisplayed"),"now"),this.KH=!0,this.XH(qe.SM))},this.MH=()=>{this.oa.ux&&(this.KH=!0,this.XH(qe.VZ))},this.OH=()=>{this.WH&&(this.qH=!0,this.WH=!1,this.XH(qe.WZ))},this.FH=()=>{this.qH=!1,this.oa.ux&&this.XH(qe.VZ)}}};r();var DP=class extends CP{kH(){super.kH(),this.jH(),this.NH()}kn(){this.DH(),super.kn()}NH(){this.oa.rt.wn(M.pa,this.jH),this.oa.JH.QH(this.$H),this.oa.wn(d.Iw,this.tz)}DH(){this.oa.rt.mn(M.pa,this.jH),this.oa.JH.iz(this.$H),this.oa.mn(d.Iw,this.tz)}ez(t){t.serviceName&&this.nz(zt.lH,t.serviceName),t.cdn&&this.nz(zt.cH,t.cdn),t.contentTitle&&this.nz(zt.dH,t.contentTitle),t.contentType&&this.nz(zt.fH,t.contentType),t.contentDescription&&this.nz(zt.vH,t.contentDescription)}nz(t,i){this.EH&&this.xH.rz(t,i)}constructor(...t){super(...t),this.tz=()=>{this.CH()&&this.nz(zt.aH,_.round(this.oa.Nd()))},this.$H=t=>{"manifest"===t.request.type&&this.nz(zt.oH,t.url)},this.jH=()=>{const t=me(this.oa.rt.CI,t=>t.Rt);t&&this.nz(zt.uH,t.QI.V)}}};r();var BP=class extends CP{kH(){super.kH(),this.oz=this.oa.$R.tO,this.cz=this.oa.$R.sO,this.NH(),this.lz.push(v(this.fz,1e3))}RH(){super.RH(),this.vz()}kn(){this.vz(),this.DH(),this.lz.forEach(p),Lr(this.lz),super.kn()}NH(){this.oa.JH.QH(this._z),this.oa.wn(d.uy,this.gz)}DH(){this.oa.JH.iz(this._z),this.oa.mn(d.uy,this.gz)}mz(){this.vz()}pz(t){this.wz+=t,this.yz(Go.QZ,this.wz)}bz(t,i){const s=this.Az.get(i)||0;this.yz(t,s)}Sz(){const t=this.oa.$R.tO-this.oz;this.yz(Go.iH,t)}Tz(){const t=this.oa.$R.sO-this.cz;this.yz(Go.eH,t)}kz(){const t=bu.Bg._G();this.yz(Go.JZ,cp(t))}Ez(t){this.yz(Go.$Z,cp(t)),this.yz(Go.tH,cp(t))}vz(){if(!this.CH())return;const t=_.round(dn(this.oa.FR()));this.yz(Go.sH,t)}Rz(){const t=ZT.jn(this.oa.PR()),i=this.oa.FR(),s=t.jM(i),e=s?dn(s.An(0)-i):0;this.yz(Go.jZ,e)}yz(t,i){this.EH&&this.xH.xz(t,i)}constructor(...t){super(...t),this.Az=Se(),this.wz=0,this.oz=0,this.cz=0,this.lz=[],this.fz=()=>{this.Sz(),this.Tz(),this.Rz()},this.gz=t=>{t.Gk===Mo.Nk&&(this.pz(t.nO),this.kz(),this.Ez(t.Iz),this.vz())},this._z=t=>{const i=t.status.toString()[0],s=this.Az.get(i)||0;this.Az.set(i,s+1),this.bz(Go.HZ,"1"),this.bz(Go.zZ,"2"),this.bz(Go.YZ,"3"),this.bz(Go.KZ,"4"),this.bz(Go.qZ,"5")}}};r();function MP(t){return t&&t.integration===UP}function LP(t){if(!yo(t.asset))throw new g("Agama source configuration: expected 'asset' to be a string");if(!function(t){return!!yo(t)&&("live"===t||"vod"===t)}(t.streamType))throw new g("Agama source configuration: expected 'streamType' to be 'live' or 'vod'");if(void 0!==t.serviceName&&!function(t){return!!yo(t)&&("live"===t||"svod"===t||"nvod"===t||"tvod"===t||"avod"===t||"catchuptv"===t)}(t.serviceName))throw new g("Agama source configuration: expected 'serviceName' to be 'live', 'svod', 'nvod','tvod', 'avod' or 'catchuptv'");if(void 0!==t.cdn&&!yo(t.cdn))throw new g("Agama source configuration: expected 'cdn' to be a string");if(void 0!==t.contentTitle&&!yo(t.contentTitle))throw new g("Agama source configuration: expected 'contentTitle' to be a string");if(void 0!==t.contentType&&!yo(t.contentType))throw new g("Agama source configuration: expected 'contentType' to be a string");if(void 0!==t.contentDescription&&!yo(t.contentDescription))throw new g("Agama source configuration: expected 'contentDescription' to be a string");return t}function OP(t){if(!yo(t.config))throw new g("Agama player configuration: expected 'config' to be a string");if(void 0!==t.logLevel&&!function(t){return!!yo(t)&&("info"===t||"debug"===t||"warning"===t||"error"===t||"fatal"===t)}(t.logLevel))throw new g("Agama player configuration: expected 'logLevel' to be 'info', 'debug', 'warning','error' or 'fatal'");if(void 0!==t.application&&!yo(t.application))throw new g("Agama player configuration: expected 'application' to be a string");if(void 0!==t.applicationVersion&&!yo(t.applicationVersion))throw new g("Agama player configuration: expected 'applicationVersion' to be a string");if(void 0!==t.userAccountID&&!yo(t.userAccountID))throw new g("Agama player configuration: expected 'userAccountID' to be a string");if(void 0!==t.deviceID&&!yo(t.deviceID))throw new g("Agama player configuration: expected 'deviceID' to be a string");return t}function FP(){let t="00000000-0000-0000-0000-000000000000";const i=s.navigator,e=s.screen;let n=""+i.mimeTypes.length;n+=i.userAgent.replace(/\D+/g,""),n+=i.plugins.length,n+=e.height||"",n+=e.width||"",n+=e.pixelDepth||"",n+=_.floor(1e3*_.random());const r=function(t){let i,s,e=0;if(0===t.length)return"0";for(i=0;i<t.length;i++)s=t.charCodeAt(i),e=(e<<5)-e+s,e|=0;return _.abs(e).toString().substring(0,12)}(n);return t=[t.slice(0,t.length-r.length),r].join(""),t}function VP(t,i,s){const e=i,n=function(t,i){return hk(i)?t.DsProtocol.APPLE_HLS:t.DsProtocol.MPEG_DASH}(t,e.type),r=function(t,i){let s=t.DsPlaylistType.VOD;"live"===i&&(s=t.DsPlaylistType.LIVE);return s}(t,s.streamType);return{asset:s.asset,playlistType:r,protocol:n,uri:e.src}}r();var Er=function(t){return t.UNAVAILABLE="unavailable",t.AVAILABLE="available",t.CONNECTING="connecting",t.CONNECTED="connected",t}({}),WP=class{Pz(){this.oa.mn(sa.ma,this.Cz),this.Nz(),this.Dz(),this.xH.Bz()}Mz(){this.oa.Lz.Ca.chromecast&&this.oa.Lz.Ca.chromecast.addEventListener("statechange",this.Oz)}Dz(){this.oa.Lz.Ca.chromecast&&this.oa.Lz.Ca.chromecast.removeEventListener("statechange",this.Oz)}Fz(){return void 0!==this.oa.Lz.Ca.chromecast&&this.oa.Lz.Ca.chromecast.state===Er.CONNECTED}kn(){this.oa.mn(d.do,this.fo),this.oa.mn(d.uo,this.Vz),this.oa.mn(d.Nw,this.Wz),this.Pz(),this.xH.kn()}Uz(){this.Gz||(this.Gz=new NP(this.oa,this.xH)),this.Xz||(this.Xz=new BP(this.oa,this.xH)),this.Zz||(this.Zz=new DP(this.oa,this.xH))}kH(){this.Gz&&(this.Gz.kH(),this.Gz.wn("TH",this.zz)),this.Xz&&this.Xz.kH(),this.Zz&&this.Zz.kH()}Nz(){this.Gz&&(this.Gz.mn("TH",this.zz),this.Gz.kn(),this.Gz=void 0),this.Xz&&(this.Xz.kn(),this.Xz=void 0),this.Zz&&(this.Zz.kn(),this.Zz=void 0)}ez(t){this.Zz&&this.Zz.ez(t)}Yz(){this.Gz&&this.Gz.UH()}VH(){this.Gz&&this.Gz.VH()}constructor(t,i,s){this.oa=void 0,this.xH=void 0,this.Gz=void 0,this.Zz=void 0,this.Xz=void 0,this.Kz=void 0,this.fo=void 0,this.qz=void 0,this.Wz=void 0,this.Vz=void 0,this.Oz=void 0,this.Cz=void 0,this.zz=void 0,this.oa=t,this.xH=i,this.fo=()=>{this.qz(),this.Wz()},this.qz=()=>{const t=this.oa.nu(),i=t&&t.analytics;this.Kz=function(t){void 0===t&&(t=[]);for(const i of t)if(MP(i))return LP(i)}(i)},this.Wz=()=>{this.Pz(),this.oa.mn(d.uo,this.Vz),!this.Fz()&&this.xH.jz()&&this.oa.bt&&this.Kz&&(this.Uz(),this.oa.ux||this.oa.GR?this.oa.wn(d.uo,this.Vz):this.Vz())},this.Vz=()=>{this.oa.bt&&this.Kz&&(this.xH.Qz(this.oa.bt,this.Kz),this.kH(),this.ez(this.Kz),this.Mz(),this.oa.wn(sa.ma,this.Cz),this.oa.mn(d.uo,this.Vz))},this.Oz=()=>{this.Fz()&&this.Pz()},this.Cz=()=>{this.Yz(),this.Pz()},this.zz=()=>{this.Xz&&this.Xz.mz()};const e=function(t){void 0===t&&(t=[]);for(const i of t)if(MP(i))return OP(i)}(s.analytics);e&&this.xH.Jz()&&(this.xH.Hx(e),this.xH.jz()?(this.xH.$z(),this.oa.wn(d.do,this.fo),this.oa.wn(d.Nw,this.Wz)):console.warn("An error occurred while initializing an Agama EMP client. Please check your configuration"))}},UP="agama";r(),r();var Wu=function(t){return t.NONE="",t.HORIZONTAL="horizontal",t.VERTICAL="vertical",t}({});r();var GP=function(t){return t.NONE="",t.PM360="360",t.PM180="180",t}({});function XP(t){switch(t){case"":return Wu.NONE;case"horizontal":return Wu.HORIZONTAL;case"vertical":return Wu.VERTICAL;default:throw new g}}function ZP(t,i){if(i)return GP.PM360;if(null==t)return GP.NONE;switch(t){case"":return GP.NONE;case"360":return GP.PM360;case"180":return GP.PM180;default:throw new g("Provided panoramaMode value is not recognized. Expected '', '360' or '180' but value was "+t)}}r();var HP=function(t){return t.ASSET="asset",t.CHANNEL="channel",t.EVENT="event",t}({});r();var zP="https://content.uplynk.com";function hu(t){if(!t)return!0;const i=!function(t){return Ms(t)||uu(t)&&Ms(t[0])}(t.sources)||Ds(t.sources),s=!t.ads||YP(t.ads),e=""!==t.poster&&!t.poster;return i&&s&&e}function YP(t){return!t||he(t)&&0===t.length}function KP(t){if(t&&t.sources)return qP(t.sources)}function qP(t){return yo(t)?nk(t):fk(t)?t.type||t.src&&nk(t.src):uu(t)&&t.length>0?qP(t[0]):void 0}function jP(t){if(t&&t.sources)return QP(t.sources)}function QP(t){return yo(t)?t:fk(t)?t.src:uu(t)&&t.length>0?QP(t[0]):void 0}function JP(t,i,s){return ak(t)?function(t,i,s){let e=Jr({},_k(),{ping:{adImpressions:!1,freeWheelVideoViews:!1,linearAdData:!1},integration:rc.UPLYNK,id:"",prefix:zP,preplayParameters:{},playbackUrlParameters:{},assetType:HP.ASSET,contentProtected:!1,assetInfo:!0});e.id=function(t){if(yo(t))return t;if(uu(t)&&yo(t[0]))return t;if(function(t){return Nc(t)&&yo(t.userId)&&(uu(t.externalId)||yo(t.externalId))}(t))return t;return""}(t.id),t.preplayParameters&&(e.preplayParameters=t.preplayParameters);t.playbackUrlParameters&&(e.playbackUrlParameters=t.playbackUrlParameters);t.assetType&&(e.assetType=function(t){switch(t){case"channel":return HP.CHANNEL;case"event":return HP.EVENT;default:return HP.ASSET}}(t.assetType));t.contentProtected&&(e.contentProtected=Zu(t.contentProtected));t.assetInfo?e.assetInfo=Zu(t.assetInfo):e.assetInfo="asset"===e.assetType;t.prefix&&(e.prefix=_o(t.prefix)||zP);return e.ping=function(t,i){let s=!1,e=!1,n=!1;i?(s=!!sr(i.adImpressions)&&i.adImpressions,e=!!sr(i.freeWheelVideoViews)&&i.freeWheelVideoViews,n=sr(i.linearAdData)?i.linearAdData:t!==HP.ASSET):t!==HP.ASSET&&(n=!0);return{adImpressions:s,freeWheelVideoViews:e,linearAdData:n}}(e.assetType,t.ping),e=iC(e,t),e=eC(e,i,s),e=sC(e,t,s),e}(t,i,s):ck(t)?function(t,i,s){var e,n;return Jr({},$P(t,i,s),{integration:rc.MEDIATAILOR,adsParams:null!=(n=null!=(e=t.adsParams)?e:t.adParams)?n:{}})}(t,i,s):uk(t)?function(t,i,s){return Jr({},$P(t,i,s),{type:"theolive"})}(t,i,s):dk(t)?function(t,i,s){return Jr({},$P(t,i,s),{type:We.pP,src:t.src,streamAccountId:t.streamAccountId,subscriberToken:t.subscriberToken,connectOptions:hC(t.connectOptions),apiUrl:t.apiUrl,statsIntervalMs:tC(t.statsIntervalMs)})}(t,i,s):$P(t,i,s)}function $P(t,i,s){let e=gk();const n=i&&(i.contentProtection||i.drm);if(yo(t)){if(e.src=t,e.type=nk(t),n){const t=lP(n);e.contentProtection=NT(t)}}else if(fk(t)||ok(t)||dk(t)){e.src=t.src,e.type=t.type||nk(t.src),e.isAdvertisement=t.isAdvertisement;const i=vk(t)?t.hesp:void 0;void 0!==i&&(e.hesp=i);ck(t)&&(e.integration=t.integration);const s=lP(t.contentProtection||t.drm||n);e.contentProtection=NT(s),t.ssai&&(e.ssai=OS(t.ssai)),e=iC(e,t)}return e=eC(e,i,s),e=sC(e,t,s),e}function tC(t){if(ih(t)&&t>0)return t}function iC(t,i){var s,e;i.useCredentials?t.crossOrigin=Gh.dP:i.crossOrigin&&(t.crossOrigin=rk(i.crossOrigin)),yo(i.timeServer)&&(t.timeServer=i.timeServer),i.liveOffset&&(t.liveOffset=i.liveOffset),i.hlsDateRange&&(t.hlsDateRange=i.hlsDateRange),i.lowLatency&&(t.lowLatency=Zu(i.lowLatency)),i.useNativePlayback&&(t.useNativePlayback=Zu(i.useNativePlayback)),i.useManagedMediaSource&&(t.useManagedMediaSource=Zu(i.useManagedMediaSource)),i.dash&&(t.dash=DT(i.dash)),i.hls&&(t.hls=BT(i.hls)),i.lcevc&&(t.lcevc=Zu(i.lcevc)),i.ignoreEmbeddedTextTrackTypes&&(t.ignoreEmbeddedTextTrackTypes=yk(i.ignoreEmbeddedTextTrackTypes)),i.latencyConfiguration&&(t.latencyConfiguration=JT(i.latencyConfiguration)),t.seamlessSwitchStrategy=$T(null!=(e=i.seamlessSwitchStrategy)?e:null==(s=i.dash)?void 0:s.useSeamlessPeriodSwitch);const n=_t(i.experimentalRendering);void 0!==n&&(t.experimentalRendering=n);const r=_t(i.nativeUiRendering);return void 0!==r&&(t.nativeUiRendering=r),t}function sC(t,i,s){return t.abr=FT(yo(i)?void 0:OT(i.abr),null==s?void 0:s.abr),t}function eC(t,i,s){var e;const n=i&&i.timeServer;return s&&s.liveOffset&&!Y(t.liveOffset)&&(t.liveOffset=s.liveOffset),s&&s.hlsDateRange&&!Y(t.hlsDateRange)&&(t.hlsDateRange=s.hlsDateRange),t.crossOrigin===Gh.Mk&&(null==i||null==(e=i.vr)?void 0:e[360])&&(t.crossOrigin=Gh.cP),t.useCredentials=t.crossOrigin===Gh.dP,yo(n)&&!t.timeServer&&(t.timeServer=n),t}function nC(t){const i={src:""};if(t&&t.src){if(i.src=_o(t.src),"default"in t&&(i.default=Zu(t.default)),i.kind=function(t){const i=String(t||"").toLowerCase();return GR(i)?i:i?"metadata":"subtitles"}(t.kind),ek(t.format)&&(i.format=t.format),"srclang"in t){const s=t.srclang;"string"==typeof s&&""!==s&&(i.srclang=s)}if("label"in t){const s=t.label;"string"==typeof s&&""!==s&&(i.label=s)}}return i}function rC(t,i){if(Nc(t))try{return i.LZ(t).tY(t)}catch(t){return}}function hC(t){if(null==t)return t;if(!Nc(t))throw new m("connectOptions must be an object");return t}function bc(t,i,s){if(void 0===s&&(s=$h.Bg),hu(t))return{sources:[gk()]};const e=Fa(t);if(e.sources=function(t,i,s){if(Ms(t))return[JP(t,i,s)];if(uu(t)&&Ms(t[0])){const e=[];for(const n of t)e.push(JP(n,i,s));return e}return[gk()]}(e.sources,e,i),"contentProtection"in e&&delete e.contentProtection,"drm"in e&&delete e.drm,"ads"in e){const t=function(t,i){if(!uu(t))return[];const s=[];for(let e of t)e=rC(e,i),e&&s.push(e);return s}(e.ads,s);0===t.length?delete e.ads:e.ads=t}const n=!Ds(e.sources),r=e.ads&&e.ads.length>0;if(n&&!r?delete e.ads:r&&!n&&(e.sources=[]),"textTracks"in e){const t=function(t){if(!uu(t))return[];const i=[];for(let s of t)s=nC(s),""!==s.src&&i.push(s);return i}(e.textTracks);0===t.length?delete e.textTracks:e.textTracks=t}"poster"in e&&(e.poster=_o(e.poster)),"streamType"in e&&(e.streamType=function(t){switch(t){case"live":case"dvr":case"vod":return t}}(e.streamType)),"vr"in e&&(e.vr=function(t){const i=t||{};return i.stereoMode=function(t){return function(t){switch(t){case"":case"horizontal":case"vertical":return!0;default:return!1}}(t)?t:""}(i.stereoMode),{panoramaMode:ZP(i.panoramaMode,Boolean(i[360])),stereoMode:i.stereoMode?XP(i.stereoMode):Wu.NONE,nativeVR:Boolean(i.nativeVR)}}(e.vr));if("analytics"in e||(null==i?void 0:i.analytics)){const t=pk(e.analytics),s=i&&i.analytics||[];e.analytics=function(t,i){const s=Fa(t);for(const e of i){const i=!t.some(t=>t.integration===e.integration);i&&e.integration!==UP&&s.push(e)}return s}(t,s)}return"mutedAutoplay"in e&&(e.mutedAutoplay=Tk(e.mutedAutoplay)),"timeServer"in e&&delete e.timeServer,"playAdsAfterTime"in e&&(e.playAdsAfterTime=go(e.playAdsAfterTime)),e.blockContentIfAdError=function(t){return void 0!==t&&"boolean"==typeof t&&Boolean(t)}(e.blockContentIfAdError),e}r(),r(),r();var Ir=function(){function t(t){this.iY=t}return t.prototype.sY=function(t){var i,s,e,n,r,h,o,a=[];if(!t)return"";var u=t.length%4;if(u>0)for(;u++<4;)t+=this.iY.charAt(64);for(i=0;i<t.length;i+=4)s=(o=this.iY.indexOf(t.charAt(i))<<18|this.iY.indexOf(t.charAt(i+1))<<12|(r=this.iY.indexOf(t.charAt(i+2)))<<6|(h=this.iY.indexOf(t.charAt(i+3))))>>>16&255,e=o>>>8&255,n=255&o,a[i/4]=String.fromCharCode(s,e,n),64===h&&(a[i/4]=String.fromCharCode(s,e)),64===r&&(a[i/4]=String.fromCharCode(s));return a.join("")},t.prototype.eY=function(t,i){var s,e,n,r,h,o,a,u=[],c="";if((o=t.length%3)>0)for(;o++<3;)c+=this.iY.charAt(64),t+="\0";for(o=0;o<t.length;o+=3)e=(s=t.charCodeAt(o)<<16|t.charCodeAt(o+1)<<8|t.charCodeAt(o+2))>>18&63,n=s>>12&63,r=s>>6&63,h=63&s,u[o/3]=this.iY.charAt(e)+this.iY.charAt(n)+this.iY.charAt(r)+this.iY.charAt(h);return a=(a=u.join("")).slice(0,a.length-c.length),i||(a+=c),a},t.bh=new t(function(){var t,i,s,e,n=[],r=["object","$","undefined","function","Cannot find module '","MODULE_NOT_FOUND","*","com.widevine.alpha","urn:mpeg:dash:mp4protection:2011","^","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed","__proto__","@@iterator","getUTCHours","setUTCFullYear","25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?","SegmentBase","RateChangeEvent","Symbol(","Symbol.",'; codecs="'];for(t=0;t<r.length;t+=1)for(i=r[t],s=0;s<i.length;s+=1)e=i.charAt(s),-1===n.indexOf(e)&&n.push(e);return n.join("")}()),t.nY=new t(function(t){return t.sY("aDtm.Dd_DE.4DuN$CeaD $t?FUa0ac'NlYsgU]dU*|sMCON9NL.i'YU M:.LiEb5TLaTOu18F|'v*:s7C41nOMop")}(t.bh)),t}();function oC(t){return"string"==typeof t}function aC(t){return"number"==typeof t}r(),r(),r();var uC={}.toString;var cC,dC=Array.isArray||function(t){return"[object Array]"===uC.call(t)};function lC(t,i){return dC(t)&&t.every(i)}!function(t){t.HTML5="html5",t.ANDROID="android",t.IOS="ios",t.TVOS="tvos",t.ANDROIDTV="androidtv",t.TIZEN="tizen",t.WEBOS="webos",t.CHROMECAST="chromecast",t.ROKU="roku",t.FIRETV="firetv",t.CHROMECASTCAF="chromecastcaf",t.THEOLIVEWEB="theoliveweb",t.KEPLER="kepler"}(cC||(cC={}));var Ge,fC=w.keys(cC).map(function(t){return cC[t]});function vC(t){return-1!==fC.indexOf(t)}!function(t){t.HESP="hesp",t.MULTIVIEW="multiview",t.THEOADS="theoads",t.MILLICAST="millicast"}(Ge||(Ge={}));var _C,gC=w.keys(Ge).map(function(t){return Ge[t]});function mC(t){return-1!==gC.indexOf(t)}function pC(t){try{var i=Ir.nY.sY(t),s=JSON.parse(i);if(!function(t,i){var s,e=function(t){return"object"==typeof t&&null!==t}(t),n=oC(t.key),r=oC(t.customer_id),h=aC(t.generation_date),o=aC(t.expiration_date),a=lC(t.domains_page,oC),u=lC(t.domains_source,oC),c=lC(t.sdks,i?vC:oC),d=function(t){return"boolean"==typeof t}(t.send_impression);t.features?s=lC(t.features,i?mC:oC):(s=!0,t.features=[]);if(!(e&&n&&r&&h&&o&&a&&u&&c&&d&&s))return!1;return!0}(s,!1))throw new m("The provided license could not be decoded correctly.");return s}catch(t){throw new m("The provided license could not be decoded correctly.")}}function wC(){return _C||(_C={Yu:s.location.href,rY:s.parent&&s.parent!==s,hY:bC()}),_C}var yC=["http:","https:","ftp:","ws:","wss:"];function bC(){var t,i;try{var e;if(null==(e=s)?void 0:e.top)return s.top.location.href}catch(t){}return null==(i=s)||null==(t=i.document)?void 0:t.referrer}var AC=function(t){return t[t.oY=0]="oY",t[t.aY=1]="aY",t[t.uY=2]="uY",t}({}),SC=class{constructor(t,i,s,e,n=[],r="",h=Date.now(),o=[],a=!0){this.cY=void 0,this.dY=void 0,this.lY=void 0,this.fY=void 0,this.vY=void 0,this._Y=void 0,this.gY=void 0,this.mY=void 0,this.pY=void 0,this.cY=t,this.dY=i,this.lY=s,this.fY=e,this.vY=n,this._Y=r,this.gY=h,this.mY=o,this.pY=a}},TC=function(t){return t.aY="expired",t.wY="invaliddomain",t.yY="invalidsource",t.bY="invalidfeature",t.ma="error",t}({}),kC=class t{AY(t,i){let s=[];Ms(t.sources)?s=[t.sources]:uu(t.sources)&&(s=t.sources),this.SY(t,s,i),this.TY(s,i)}SY(t,i,s){if(hu(t)||0===s.lY.length||CC(s.lY))return;if(!i.every(t=>this.kY(t,s))){const t="invalidsource",i=MC.EY(t);throw new Wt(RC(t),i)}}TY(t,i){for(const s of t)fk(s)&&vk(s)&&!s.bypassLicense&&this.RY([Ge.HESP],i)}xY(i){return this.IY(i.mY)&&this.PY(i)?t.CY(i.fY)?0:1:2}RY(t,i){for(const s of t)if(!Ft(i.vY,s)){const t="invalidfeature",i=MC.NY(t,s);throw new Wt(RC(t),i)}}IY(t){return 0===t.length||t.some(t=>this.DY(t))}DY(t){return"web"===function(t){switch(t){case cC.ANDROID:return ei.Tv;case cC.ANDROIDTV:case cC.FIRETV:return ei.Ev;case cC.IOS:return ei.Rv;case cC.TVOS:return ei.xv;case cC.CHROMECAST:case cC.CHROMECASTCAF:return ei.Iv;case cC.THEOLIVEWEB:return ei.Pv;default:return ei.Sv}}(t)}static CY(t){const i=Number(new Date);return!!t&&i<=t}PY(t){return!(this.BY&&0!==t.dY.length&&!CC(t.dY))||!!(this.BY&&this.MY(t.dY)&&this.LY(t.dY))}MY(t){return NC(this.Gb.Yu,t)}LY(t){if(!this.Gb.rY)return!0;if(this.OY)return!0;const i=this.FY();return!!i&&NC(i,t)}FY(){if(!this.Gb.rY)return;const t=hd.ancestorOrigins;return t&&t.length>0?t[t.length-1]:this.Gb.hY?this.Gb.hY:void 0}kY(i,s){return!!t.VY(i,s.lY)}static VY(t,i){return NC(this.WY(t),i)}static WY(t){return yo(t)?t:fk(t)&&t.src||""}constructor(t,i,s){this.OY=void 0,this.UY=void 0,this.Gb=void 0,this.BY=void 0,this.OY=t,this.UY=i,this.Gb=s,this.BY=BC(this.Gb)}},EC=class{xY(t){return 0}AY(t,i){}RY(t,i){}};function RC(t){switch(t){case"invaliddomain":return Ne.LICENSE_INVALID_DOMAIN;case"invalidsource":return Ne.LICENSE_INVALID_SOURCE;case"expired":return Ne.LICENSE_EXPIRED;case"invalidfeature":return Ne.LICENSE_INVALID_FEATURE;case"error":return Ne.LICENSE_ERROR}}var xC="25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?",IC=Eu(()=>{const t="\\.",i="(\\*|"+xC+")";return new RegExp("ip-range\\("+i+t+i+t+i+t+i+"\\)")});function PC(t,i){let s=t,e=i;if(!s)return!1;if(e=e.trim(),"*"===e)return!0;if(s=s.replace(/\.+$/,""),e===s)return!0;if(Qe(e,"ip-range(")){const t="\\.",i=e.match(IC()),n=t=>"*"===t?"("+xC+")":t;if(null!==i&&5===i.length){const e=new RegExp("^"+i[1]+t+n(i[2])+t+n(i[3])+t+n(i[4])+"$");return null!==s.match(e)}}return e="."+e,-1!==s.indexOf(e,s.length-e.length)}function CC(t){return t.some(t=>"*"===t)}function NC(t,i){const s=Zd.Dh(t);if(!DC(s))return!0;for(const e of i){if(PC(s.hostname,e))return!0;if(PC(vA(t),e))return!0}return!1}function DC(t){return-1!==yC.indexOf(t.protocol)}function BC(t){const i=Zd.Dh(t.Yu);return DC(i)&&!function(t){return PC(t.hostname,"localhost")}(i)&&!function(t){return PC(t.hostname,"theoplayer.doubleclick.net")}(i)}var MC=class{static NY(t,i){return"The requested feature '"+i+"' is not available with the license for this player."}static EY(t){return"invaliddomain"===t?this.GY:"invalidsource"===t?this.XY:"expired"===t?this.ZY:"invalidfeature"===t?this.HY:this.zY}};MC.zY="The license for this player is invalid.",MC.ZY="The usage license for this video player has expired.",MC.GY="The current domain is incompatible with the license for this player.",MC.XY="The provided video source is incompatible with the license for this player.",MC.HY="The requested feature is not available with the license for this player.",r(),r();var LC=function(t){return t[t.YY=1]="YY",t[t.KY=4]="KY",t[t.qY=5]="qY",t[t.jY=9]="jY",t}({});function OC(t){const i=[t.VB,t.QY,t.JY];switch(t.QY){case 1:i.push(t.eP);break;case 4:i.push(t.OR),i.push(t.lt);break;case 5:i.push(t.lt);break;case 9:i.push(t.Kp)}return i}r();var G=new Array(256);for(let t=0;t<256;t+=1)G[t]=(t<16?"0":"")+t.toString(16);function FC(){const t=qf(),i=(4294967296*_.random()|0)+t&3029421624,s=(4294967296*_.random()|0)+t&3595553209,e=(4294967296*_.random()|0)+t&1130486254,n=(4294967296*_.random()|0)+t&1284287105;return G[255&i]+G[i>>>8&255]+G[i>>>16&255]+G[i>>>24&255]+"-"+G[255&s]+G[s>>>8&255]+"-"+G[s>>>16&15|64]+G[s>>>24&255]+"-"+G[63&e|128]+G[e>>>8&255]+"-"+G[e>>>16&255]+G[e>>>24&255]+G[255&n]+G[n>>>8&255]+G[n>>>16&255]+G[n>>>24&255]}function Xe(t){return up(t.replace(/-/g,""))}function Ve(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const i=16*_.random()|0;return("x"===t?i:3&i|8).toString(16)})}function VC(){return Zd.Mg()}r(),r(),r();var WC,UC="theoplayer-session-id";function GC(){if(!WC){const t=Nb.Uy(UC);t?WC=t:(WC=FC(),Nb.Gy(UC,WC))}return WC}r(),r();var XC=/[^\x00-\x7E]/g;function ZC(t){return"\\u"+zo(t.charCodeAt(0).toString(16),4,"0")}var HC="https://license.theoplayer.com";function zC(t){const i=function(t){const i=[];return function(t,i,s){return JSON.stringify(t,i,s).replace(XC,ZC)}(t,(t,s)=>{if(Nc(s)){if(-1!==i.indexOf(s))return null;i.push(s)}return s})}(function(t){return[t.$Y,t.cS,t.cY,t.yN,t.tK,t.iK,t.sK.map(OC)]}(t));return Ir.nY.eY(i)}var YC=class{get sK(){return this.Jf}eK(){return Boolean(this.tK)}get tK(){return this.nK}async rK(t){if(!(await this.oK.hK()).pY)return;const i={QY:LC.YY,JY:qf(),eP:t};await this.zH(i)}async aK(t){if(!(await this.oK.hK()).pY)return;const i={QY:LC.jY,JY:qf(),Kp:t};await this.zH(i)}async uK(t,i){const s={QY:LC.KY,JY:qf(),OR:i,lt:t};await this.zH(s)}async cK(t){const i={QY:LC.qY,JY:qf(),lt:t};await this.zH(i)}async zH(t){const i=await this.oK.hK();"a:n[_O*[C4C-N$_@_MYY $D]iOp]N$_-_]th_:c|aen?C:pH"===this.dK.eY(i.cY)&&t.QY!==LC.qY||(t.QY===LC.YY?this.lK():this.eK()||this.lK(),t.VB=this.wA++,this.Jf.push(t),!function(t){return t===LC.YY||t===LC.qY}(t.QY)?this.Jf.length>this.fK&&await this.vK():await this._K())}async _K(t){for(void 0===t&&(t=!1);this.Jf.length>0;)await this.vK(t)}async gK(t){const i=await this.oK.hK();return{$Y:qf(),cS:GC(),cY:this.dK.eY(i.cY)||"dev",yN:this.XA,tK:this.nK,iK:this.mK,sK:t}}async vK(t){void 0===t&&(t=!1);const i=this.Jf.splice(0,this.pK),s=await this.gK(i);t?this.Kk(s):this.wK(s),this.yK=VC()}async wK(t){const i=zC(t),s=new F({Yu:HC,XT:i,Xk:!1,ck:Bi.DT,lk:{"Content-Type":du.CU},Vk:4e3,Fk:ci.POST});try{const t=await this.rW.dk(s);await t.WT()}catch(t){(new Image).src="https://licensing.theoplayer.com/t?"+i}}Kk(t){const i=zC(t);this.rW.Kk({Yu:HC,XT:i,GT:du.CU})}lK(){this.eK()&&this._K(),this.nK=FC(),this.wA=0}kn(){s.removeEventListener("beforeunload",this.bK),p(this.AK),this._K()}constructor(t,i,e,n=Ir.bh,r=0,h=1){this.XA=void 0,this.rW=void 0,this.oK=void 0,this.dK=void 0,this.fK=void 0,this.pK=void 0,this.Jf=void 0,this.nK=void 0,this.yK=void 0,this.mK=void 0,this.wA=void 0,this.AK=void 0,this.SK=void 0,this.bK=void 0,this.XA=t,this.rW=i,this.oK=e,this.dK=n,this.fK=r,this.pK=h,this.Jf=[],this.nK=null,this.yK=0,this.mK="unknown",this.wA=0,this.SK=()=>{VC()-this.yK>6e4&&this._K()},this.bK=()=>{this._K(!0)},s.addEventListener("beforeunload",this.bK),this.AK=v(this.SK,6e4)}};r(),r(),r();var KC=0;var qC=c,ls=self.requestAnimationFrame||self.webkitRequestAnimationFrame||self.mozRequestAnimationFrame,Ii=self.cancelAnimationFrame||self.webkitCancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelRequestAnimationFrame;ls&&Ii||(ls=function(t){const i=VC(),s=_.max(0,16-(i-KC)),e=u(()=>t(i+s),s);return KC=i+s,e},Ii=qC),ls=ls.bind(self),Ii=Ii.bind(self);var jC=As.L_||As.ru&&As.K_<13;function QC(t,i,s){const e=t.getImageData(i,s,1,1).data;return 0===e[0]&&0===e[1]&&0===e[2]&&0===e[3]}var JC=class{get Ca(){var t;return null!=(t=this.hu)?t:this.hu=function(t){return{drawImage(i){for(var s=arguments.length,e=new Array(s>1?s-1:0),n=1;n<s;n++)e[n-1]=arguments[n];return t.TK(i,...e)},texImage2D:(i,s,e,n,r,h)=>t.kK(i,s,e,n,r,h),requestVideoFrameCallback:i=>t.EK(i),cancelVideoFrameCallback:i=>t.RK(i)}}(this)}TK(t){for(var i=arguments.length,s=new Array(i>1?i-1:0),e=1;e<i;e++)s[e-1]=arguments[e];const n=this.xK;return void 0!==n&&(t.drawImage(n,...s),!0)}kK(t,i,s,e,n,r){let h=this.xK;return void 0!==h&&(jC&&(h=this.IK(h)),t.texImage2D(i,s,e,n,r,h),!0)}EK(t){const i=this.PK++,s=this.CK(t,i);return this.NK.set(i,{DK:t,BK:s}),i}RK(t){const i=this.NK.get(t);void 0!==i&&(this.NK.delete(t),i.BK())}CK(t,i){const s=this.xK;if(void 0===s)return ol;if(s instanceof HTMLVideoElement&&s.requestVideoFrameCallback){const e=s.requestVideoFrameCallback((s,e)=>{this.NK.delete(i),t(s,e)});return()=>s.cancelVideoFrameCallback(e)}{let s;const e=n=>{this.MK()?(this.NK.delete(i),this.LK=!1,t(n,void 0)):s=ls(e)};return s=ls(e),()=>Ii(s)}}MK(){return(!this.t.ux||this.LK)&&!this.t.Rx&&this.t.Sx>=pi.WL}IK(t){let i=this.FK;void 0===i&&(i=h.createElement("canvas"),this.FK=i);const s=i.getContext("2d"),e=this.t,n=e.Mx,r=e.Nx,o=i.width,a=i.height;s.clearRect(0,0,i.width,i.height),o===n&&a===r||(i.width=n,i.height=r),s.drawImage(t,0,0,n,r);let u=!1;return n>0&&QC(s,n-1,0)&&(i.width=o,u=!0),r>0&&QC(s,0,r-1)&&(i.height=a,u=!0),u&&s.drawImage(t,0,0,n,r),i}kn(){this.NK.forEach(t=>t.BK()),this.NK.clear(),this.t.mn(d.Mw,this.VK),this.t.mn(d.Qw,this.WK),this.xK=void 0,this.FK=void 0}constructor(t){this.t=void 0,this.xK=void 0,this.hu=void 0,this.FK=void 0,this.NK=Zs(),this.PK=1,this.LK=!0,this.WK=()=>{this.LK=!0},this.VK=()=>{this.xK=this.t.Zx(),this.NK.forEach((t,i)=>{t.BK(),t.BK=this.CK(t.DK,i)})},this.t=t,this.t.wn(d.Mw,this.VK),this.t.wn(d.Qw,this.WK),this.VK()}};r(),r(),r();var Gu=function(t){return t.yn="dimensionchange",t}({}),$C=class extends sh{constructor(t,i){super(Gu.yn),this.width=void 0,this.height=void 0,this.width=t,this.height=i}};r(),r();var tN,iN=class{constructor(t,i){this.xe=void 0,this.DK=void 0,this.xe=t,this.DK=i}},sN=class extends iN{get Iu(){return this.UK}get Eu(){return this.GK}kn(){this.XK.disconnect()}constructor(t,i){super(t,i),this.XK=void 0,this.UK=0,this.GK=0,this.ZK=t=>{if(t.length>0){const i=t[t.length-1].contentRect;this.GK=i.width,this.UK=i.height,this.DK(this.GK,this.UK)}},this.XK=new s.ResizeObserver(this.ZK),this.XK.observe(this.xe)}};r(),r();var eN=["Webkit","Moz","O","ms"],nN=(()=>{let t=!1;try{if(void 0!==s&&"function"==typeof s.addEventListener){const i=w.defineProperty({},"passive",{get(){t=!0}});s.addEventListener("testPassiveEventSupport",ol,i),s.removeEventListener("testPassiveEventSupport",ol,i)}}catch(t){}return t})(),rN=Se();function hN(t){return rN.has(t)||rN.set(t,function(t){const i=(tN||(tN=s&&s.document&&s.document.createElement("span")),tN);if(!i||!i.style)return t;if(void 0!==i.style[t])return t;const e=t.charAt(0).toUpperCase()+t.slice(1);for(const t of eN){const s=t+e;if(void 0!==i.style[s])return s}return t}(t)),rN.get(t)}function oN(t){const i=t.style;i.position="absolute",i.left="0",i.right="0",i.bottom="0",i.top="0",i.overflow="scroll",i.zIndex="-1",i.visibility="hidden"}function aN(t){const i=t.style;i.position="absolute",i.left="0",i.top="0",i[hN("transition")]="0s"}var uN=class extends iN{kn(){Ii(this.HK),this.HK=0,this.zK.removeEventListener("scroll",this.YK),this.KK.removeEventListener("scroll",this.YK),je(this.qK),s&&s.removeEventListener("resize",this.jK)}get Iu(){return this.xe.getBoundingClientRect().height||this.UK||0}get Eu(){return this.xe.getBoundingClientRect().width||this.GK||0}constructor(t,i,e){super(t,i),this.qK=void 0,this.HK=0,this.GK=NaN,this.UK=NaN,this.zK=void 0,this.QK=void 0,this.KK=void 0,this.JK=void 0,this.$K=void 0,this.hr=()=>{const t=1e5;this.QK.style.width=t+"px",this.QK.style.height=t+"px",this.zK.scrollLeft=t,this.zK.scrollTop=t,this.KK.scrollLeft=t,this.KK.scrollTop=t,0===this.KK.scrollTop&&ls(this.hr)},this.tq=()=>{const t=this.Eu,i=this.Iu;this.DK(t,i),this.GK=t,this.UK=i,this.hr(),this.HK=0},this.YK=()=>{if(this.HK)return;const t=this.Eu,i=this.Iu;t===this.GK&&i===this.UK||(this.HK=ls(this.tq))},this.jK=()=>{this.$K||(this.$K=u(this.iq,66))},this.iq=()=>{this.$K=void 0,this.nq()},this.nq=()=>{this.YK()};const n=function(t,i){return s.getComputedStyle(t,void 0).getPropertyValue(i)||t.style[i]}(t,"position");e||"static"!==n||(t.style.position="relative");const r=h.createElement("div");this.qK=r,this.zK=h.createElement("div"),this.QK=h.createElement("div"),this.KK=h.createElement("div"),this.JK=h.createElement("div"),oN(this.zK),oN(this.KK),aN(this.QK),function(t){aN(t),t.style.width="200%",t.style.height="200%"}(this.JK),r.appendChild(this.zK),r.appendChild(this.KK),this.zK.appendChild(this.QK),this.KK.appendChild(this.JK),t.appendChild(r),this.zK.addEventListener("scroll",this.YK),this.KK.addEventListener("scroll",this.YK),s&&s.addEventListener("resize",this.jK),this.YK()}},un=class extends fr{_n(t){this.XK||("function"==typeof s.ResizeObserver?this.XK=new sN(this.xe,this.ZK):this.XK=new uN(this.xe,this.ZK,t))}kn(){this.Vo(),this.XK&&(this.XK.kn(),this.XK=void 0)}get Iu(){return this.XK?this.XK.Iu:0}get Eu(){return this.XK?this.XK.Eu:0}constructor(t){super(),this.xe=void 0,this.XK=void 0,this.ZK=(t,i)=>{this.So(new $C(t,i))},this.xe=t}};r(),r();var cN=class extends sh{constructor(){super(Ze.pa)}};r();var Tt=function(){if(!h)return;const t=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]];for(const i of t)if(i[1]in h)return{rq:i[0],sa:i[1],hq:i[2],oq:i[3],Ze:i[4],aq:i[5]}}();r();var dN=class extends sh{constructor(){super(Ze.ka)}},lN=class t extends fr{static la(t){return Boolean(Tt&&h[Tt.oq]&&Tt.rq in t)}yo(){const t=this.xe[Tt.rq]();t&&t.then?t.then(this.uq,this.cq):(h.removeEventListener(Tt.aq,this.cq),h.addEventListener(Tt.aq,this.cq))}jo(){const t=h[Tt.sa]();t&&t.then?t.then(this.uq,this.cq):(h.removeEventListener(Tt.aq,this.cq),h.addEventListener(Tt.aq,this.cq))}dq(){const t=this.ds,i=this.xe===h[Tt.hq];this.ds=i,t!==i&&this.So(new cN)}lq(){this.So(new ac)}kn(){this.Vo(),h.removeEventListener(Tt.Ze,this.uq),h.removeEventListener(Tt.aq,this.cq)}constructor(i){super(),this.xe=void 0,this.ca=void 0,this.ds=!1,this.uq=()=>this.dq(),this.cq=()=>this.lq(),this.xe=i,this.ca=t.la(i),h.addEventListener(Tt.Ze,this.uq),this.dq()}},fN=class t extends fr{static la(t){return As.ru&&("webkitEnterFullscreen"in t||"webkitSupportsPresentationMode"in t)}yo(){this.xe.webkitSupportsPresentationMode&&this.xe.webkitSupportsPresentationMode("fullscreen")?As.ru?requestAnimationFrame(()=>this.xe.webkitSetPresentationMode("fullscreen")):this.xe.webkitSetPresentationMode("fullscreen"):this.xe.webkitEnterFullscreen()}jo(){this.xe.webkitSupportsPresentationMode&&this.xe.webkitSupportsPresentationMode("inline")?this.xe.webkitSetPresentationMode("inline"):this.xe.webkitExitFullscreen()}dq(){const t=this.ds;let i;i=this.xe.webkitPresentationMode?"fullscreen"===this.xe.webkitPresentationMode:Boolean(this.xe.webkitDisplayingFullscreen),this.ds=i,t!==i&&this.So(new cN)}kn(){this.Vo(),this.xe.removeEventListener("webkitbeginfullscreen",this.uq),this.xe.removeEventListener("webkitendfullscreen",this.uq),this.xe.removeEventListener("webkitpresentationmodechanged",this.uq)}constructor(i){super(),this.xe=void 0,this.ca=void 0,this.ds=!1,this.uq=()=>this.dq(),this.xe=i,this.ca=t.la(i),this.xe.addEventListener("webkitbeginfullscreen",this.uq),this.xe.addEventListener("webkitendfullscreen",this.uq),this.xe.addEventListener("webkitpresentationmodechanged",this.uq),this.dq()}},vN=class extends fr{get ca(){return!!this.fq&&this.fq.ca}get ds(){return this.vq}yo(){this.fq?this.fq.yo():this.So(new ac)}jo(){for(const t of this._q)t.ds&&t.jo()}gq(t){this.fq=t}mq(t){this._q.push(t),t.wn(Ze.pa,this.dq),t.wn(Ze.ma,this.Rs),this.dq()}pq(t){is(this._q,t),t.mn(Ze.pa,this.dq),t.mn(Ze.ma,this.Rs)}wq(){for(const t of this._q)if(t.ds)return!0;return!1}hr(){this.fq=void 0,this.vq=!1;const t=this._q.slice();for(const i of t)this.pq(i),i.kn();this.dq()}kn(){this.Vo(),this.hr()}constructor(...t){super(...t),this._q=[],this.fq=void 0,this.vq=!1,this.dq=()=>{const t=this.vq,i=this.wq();t!==i&&(this.vq=i,this.So(new cN))}}},_N=class extends fr{get ca(){return!!this.yq&&this.bq.ca}get ds(){return this.bq.ds}yo(){this.yq&&this.bq.yo()}jo(){this.bq.jo()}Aq(){this.bq.wn([Ze.pa,Ze.ka],this.dq),this.bq.wn(Ze.ma,this.Rs)}Sq(){this.bq.mn([Ze.pa,Ze.ka],this.dq),this.bq.mn(Ze.ma,this.Rs)}er(){const t=this.bq,i=this.t.Xx();if(t===i)return;this.ga=!0;const s=this.ds,e=this.ca;s&&this.jo(),this.Sq(),this.bq=i,this.Aq(),s&&!this.ds&&this.ca?this.yo():this.jo(),this.ga=!1,e!==this.ca&&this.So(new dN),s!==this.ds&&this.So(new cN)}kn(){this.Vo(),this.Sq(),this.t.mn(d.Dw,this.Tq)}constructor(t,i){super(),this.t=void 0,this.yq=void 0,this.bq=void 0,this.ga=!1,this.Tq=()=>this.er(),this.dq=t=>{this.ga||this.So(t)},this.t=t,this.yq=i,this.bq=new bs,this.Aq(),this.t.wn(d.Dw,this.Tq),this.er()}};r(),r(),r();var gN=function(t){return t.MODE_CHANGE="presentationmodechange",t.ERROR="error",t}({}),mN=class extends sh{constructor(t){super(gN.MODE_CHANGE),this.presentationMode=void 0,this.presentationMode=t}};r(),r();var pN=class extends fr{au(t){for(const i of this.Jf)t.wn(i,this.kq);this.Eq.push(t)}Rq(t){for(const i of this.Jf)t.mn(i,this.kq);this.Eq.push(t)}kn(){this.Vo();for(const t of this.Eq)this.Rq(t);Lr(this.Eq)}constructor(t,i=!1,s){super(s),this.Eq=[],this.Jf=void 0,this.kq=void 0,this.xq=t=>{ht(()=>{this.Rs(t)})},this.Jf=t,this.kq=i?this.xq:this.Rs}},sc=class extends ua{au(t){t.dw(this.Iq),this.Eq.push(t)}Rq(t){t.mw(this.Iq),is(this.Eq,t)}kn(){this.Vo();for(const t of this.Eq)t.mw(this.Iq);Lr(this.Eq)}constructor(t,i=!1){super(t),this.Eq=[],this.Iq=void 0,this.xq=t=>{ht(()=>{this.Rs(t)})},this.Iq=i?this.xq:this.Rs}};r();var wN=class extends Kt{get error(){return this.errorObject.message}xa(){return this}constructor(t){super(gN.ERROR),this.errorObject=void 0,this.errorObject=t}};r();var yN=class extends Wt{constructor(t,i,s){super(t,i,s)}},bN=class extends ua{get Ca(){return this.hu||(this.hu=this.xa()),this.hu}xa(){return function(t){let i;const s={get currentMode(){return t.Wo()},requestMode(i){const s=xk(i);s&&t.Jo(s)},supportsMode(i){const s=xk(i);return!!s&&t.Xo(s)},addEventListener(t,s){i.wn(t,s)},removeEventListener(t,s){i.mn(t,s)}};return i=new sc(s,!0),i.au(t),s}(this)}Jo(t){this.Yo!==t&&(this.Yo=t,this.ra=!0,this.Ko(t))}Wo(){return this.Yo}Xo(t){switch(t){case ju.NATIVE_PICTURE_IN_PICTURE:return this.ea.zL;case ju.FULLSCREEN:return this.ha.ca;case ju.INLINE:return!0}return!1}Ko(t){switch(this.ta.Jg(),t){case ju.FULLSCREEN:_e(this.ta.Zo(t=>this.Pq(t)));break;case ju.NATIVE_PICTURE_IN_PICTURE:_e(this.ta.Zo(t=>this.Cq(t)));break;case ju.INLINE:_e(this.ta.Zo(t=>this.Nq(t)))}}async Pq(t){Ko(t),await this.ea.jo().catch(ol),Ko(t);try{await this.Dq(),this.So(new mN(this.Yo))}catch(i){const s=new yN(Ne.FULLSCREEN_ERROR,"Failed to enter fullscreen.");throw this.So(new wN(s)),Ko(t),this.Jo(ju.INLINE),s}finally{this.ra=!1}}async Cq(t){Ko(t),await this.sa().catch(ol),Ko(t);try{await this.ea.yo(),this.So(new mN(this.Yo))}catch(i){const s=new yN(Ne.PICTURE_IN_PICTURE_ERROR,"Failed to enter native picture-in-picture.");throw this.So(new wN(s)),Ko(t),this.Jo(ju.INLINE),s}finally{this.ra=!1}}async Nq(t){Ko(t),await this.sa().catch(ol),Ko(t),await this.ea.jo().catch(ol),this.So(new mN(this.Yo)),this.ra=!1}async Dq(){if(this.ha.ds)return;const t=this.ha.pw([Ze.pa,Ze.ma]);if(this.ha.yo(),await t,!this.ha.ds)throw new m("Failed to enter fullscreen.")}async sa(){if(!this.ha.ds)return;const t=this.ha.pw([Ze.pa,Ze.ma]);if(this.ha.jo(),await t,this.ha.ds)throw new m("Failed to exit fullscreen.")}_i(){this.ra||(this.Yo!==ju.FULLSCREEN||this.ha.ds?this.Yo!==ju.FULLSCREEN&&this.ha.ds&&this.Jo(ju.FULLSCREEN):this.Jo(ju.INLINE))}kn(){this.ha.mn(Ze.pa,this.dq),this.ha.mn(Ze.ma,this.lq),this.ea.mn(ar.XL,this.Bq),this.ea.mn(ar.ZL,this.Bq),this.ea.mn(ar.ma,this.Mq),this.Vo()}constructor(t,i){super(),this.Yo=ju.INLINE,this.ra=!1,this.ha=void 0,this.ea=void 0,this.ta=new Fu,this.hu=void 0,this.dq=()=>{this._i()},this.lq=()=>{this.ra||(this.So(new $e(new Wt(Ne.FULLSCREEN_ERROR,"Failed to enter fullscreen."))),this._i())},this.Bq=()=>{this.ra||(this.Yo!==ju.NATIVE_PICTURE_IN_PICTURE||this.ea.HL?this.Yo!==ju.NATIVE_PICTURE_IN_PICTURE&&this.ea.HL&&this.Jo(ju.NATIVE_PICTURE_IN_PICTURE):this.Jo(ju.INLINE))},this.Mq=()=>{this.ra||(this.So(new wN(new yN(Ne.PICTURE_IN_PICTURE_ERROR,"Unexpected native picture-in-picture error."))),this.Bq())},this.ha=t,this.ea=i,this.ha.wn(Ze.pa,this.dq),this.ha.wn(Ze.ma,this.lq),this.ea.wn(ar.XL,this.Bq),this.ea.wn(ar.ZL,this.Bq),this.ea.wn(ar.ma,this.Mq)}};r();var AN=class t{Lq(t){return this.Oq.Zo(()=>this.Fq(t))}Hx(){this.TZ.SZ()}async Fq(i){const s=this.TZ.HX(Mo.Nk),e=s.iX,n=await t.Vq(e,i);return await this.TZ.RX(s),n}static async Vq(i,s){return As.S_||As.w_?"all":(i.src||(i.src="data:video/mp4;base64,AAAAHGZ0eXBNNFYgAAACAGlzb21pc28yYXZjMQAAAAhmcmVlAAAGF21kYXTeBAAAbGliZmFhYyAxLjI4AABCAJMgBDIARwAAArEGBf//rdxF6b3m2Ui3lizYINkj7u94MjY0IC0gY29yZSAxNDIgcjIgOTU2YzhkOCAtIEguMjY0L01QRUctNCBBVkMgY29kZWMgLSBDb3B5bGVmdCAyMDAzLTIwMTQgLSBodHRwOi8vd3d3LnZpZGVvbGFuLm9yZy94MjY0Lmh0bWwgLSBvcHRpb25zOiBjYWJhYz0wIHJlZj0zIGRlYmxvY2s9MTowOjAgYW5hbHlzZT0weDE6MHgxMTEgbWU9aGV4IHN1Ym1lPTcgcHN5PTEgcHN5X3JkPTEuMDA6MC4wMCBtaXhlZF9yZWY9MSBtZV9yYW5nZT0xNiBjaHJvbWFfbWU9MSB0cmVsbGlzPTEgOHg4ZGN0PTAgY3FtPTAgZGVhZHpvbmU9MjEsMTEgZmFzdF9wc2tpcD0xIGNocm9tYV9xcF9vZmZzZXQ9LTIgdGhyZWFkcz02IGxvb2thaGVhZF90aHJlYWRzPTEgc2xpY2VkX3RocmVhZHM9MCBucj0wIGRlY2ltYXRlPTEgaW50ZXJsYWNlZD0wIGJsdXJheV9jb21wYXQ9MCBjb25zdHJhaW5lZF9pbnRyYT0wIGJmcmFtZXM9MCB3ZWlnaHRwPTAga2V5aW50PTI1MCBrZXlpbnRfbWluPTI1IHNjZW5lY3V0PTQwIGludHJhX3JlZnJlc2g9MCByY19sb29rYWhlYWQ9NDAgcmM9Y3JmIG1idHJlZT0xIGNyZj0yMy4wIHFjb21wPTAuNjAgcXBtaW49MCBxcG1heD02OSBxcHN0ZXA9NCB2YnZfbWF4cmF0ZT03NjggdmJ2X2J1ZnNpemU9MzAwMCBjcmZfbWF4PTAuMCBuYWxfaHJkPW5vbmUgZmlsbGVyPTAgaXBfcmF0aW89MS40MCBhcT0xOjEuMDAAgAAAAFZliIQL8mKAAKvMnJycnJycnJycnXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXiEASZACGQAjgCEASZACGQAjgAAAAAdBmjgX4GSAIQBJkAIZACOAAAAAB0GaVAX4GSAhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGagC/AySEASZACGQAjgAAAAAZBmqAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZrAL8DJIQBJkAIZACOAAAAABkGa4C/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmwAvwMkhAEmQAhkAI4AAAAAGQZsgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGbQC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm2AvwMkhAEmQAhkAI4AAAAAGQZuAL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGboC/AySEASZACGQAjgAAAAAZBm8AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZvgL8DJIQBJkAIZACOAAAAABkGaAC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmiAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpAL8DJIQBJkAIZACOAAAAABkGaYC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmoAvwMkhAEmQAhkAI4AAAAAGQZqgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGawC/AySEASZACGQAjgAAAAAZBmuAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZsAL8DJIQBJkAIZACOAAAAABkGbIC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm0AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZtgL8DJIQBJkAIZACOAAAAABkGbgCvAySEASZACGQAjgCEASZACGQAjgAAAAAZBm6AnwMkhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AAAAhubW9vdgAAAGxtdmhkAAAAAAAAAAAAAAAAAAAD6AAABDcAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAzB0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAABAAAAAAAAA+kAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAALAAAACQAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAPpAAAAAAABAAAAAAKobWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAB1MAAAdU5VxAAAAAAALWhkbHIAAAAAAAAAAHZpZGUAAAAAAAAAAAAAAABWaWRlb0hhbmRsZXIAAAACU21pbmYAAAAUdm1oZAAAAAEAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAhNzdGJsAAAAr3N0c2QAAAAAAAAAAQAAAJ9hdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAALAAkABIAAAASAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAALWF2Y0MBQsAN/+EAFWdCwA3ZAsTsBEAAAPpAADqYA8UKkgEABWjLg8sgAAAAHHV1aWRraEDyXyRPxbo5pRvPAyPzAAAAAAAAABhzdHRzAAAAAAAAAAEAAAAeAAAD6QAAABRzdHNzAAAAAAAAAAEAAAABAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAABAAAAAQAAAIxzdHN6AAAAAAAAAAAAAAAeAAADDwAAAAsAAAALAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAAiHN0Y28AAAAAAAAAHgAAAEYAAANnAAADewAAA5gAAAO0AAADxwAAA+MAAAP2AAAEEgAABCUAAARBAAAEXQAABHAAAASMAAAEnwAABLsAAATOAAAE6gAABQYAAAUZAAAFNQAABUgAAAVkAAAFdwAABZMAAAWmAAAFwgAABd4AAAXxAAAGDQAABGh0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAACAAAAAAAABDcAAAAAAAAAAAAAAAEBAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAQkAAADcAABAAAAAAPgbWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAC7gAAAykBVxAAAAAAALWhkbHIAAAAAAAAAAHNvdW4AAAAAAAAAAAAAAABTb3VuZEhhbmRsZXIAAAADi21pbmYAAAAQc21oZAAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAADT3N0YmwAAABnc3RzZAAAAAAAAAABAAAAV21wNGEAAAAAAAAAAQAAAAAAAAAAAAIAEAAAAAC7gAAAAAAAM2VzZHMAAAAAA4CAgCIAAgAEgICAFEAVBbjYAAu4AAAADcoFgICAAhGQBoCAgAECAAAAIHN0dHMAAAAAAAAAAgAAADIAAAQAAAAAAQAAAkAAAAFUc3RzYwAAAAAAAAAbAAAAAQAAAAEAAAABAAAAAgAAAAIAAAABAAAAAwAAAAEAAAABAAAABAAAAAIAAAABAAAABgAAAAEAAAABAAAABwAAAAIAAAABAAAACAAAAAEAAAABAAAACQAAAAIAAAABAAAACgAAAAEAAAABAAAACwAAAAIAAAABAAAADQAAAAEAAAABAAAADgAAAAIAAAABAAAADwAAAAEAAAABAAAAEAAAAAIAAAABAAAAEQAAAAEAAAABAAAAEgAAAAIAAAABAAAAFAAAAAEAAAABAAAAFQAAAAIAAAABAAAAFgAAAAEAAAABAAAAFwAAAAIAAAABAAAAGAAAAAEAAAABAAAAGQAAAAIAAAABAAAAGgAAAAEAAAABAAAAGwAAAAIAAAABAAAAHQAAAAEAAAABAAAAHgAAAAIAAAABAAAAHwAAAAQAAAABAAAA4HN0c3oAAAAAAAAAAAAAADMAAAAaAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAACMc3RjbwAAAAAAAAAfAAAALAAAA1UAAANyAAADhgAAA6IAAAO+AAAD0QAAA+0AAAQAAAAEHAAABC8AAARLAAAEZwAABHoAAASWAAAEqQAABMUAAATYAAAE9AAABRAAAAUjAAAFPwAABVIAAAVuAAAFgQAABZ0AAAWwAAAFzAAABegAAAX7AAAGFwAAAGJ1ZHRhAAAAWm1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAALWlsc3QAAAAlqXRvbwAAAB1kYXRhAAAAAQAAAABMYXZmNTUuMzMuMTAw"),await t.Wq(),!s&&await t.Uq(i,!1)?"all":await t.Uq(i,!0)?"muted":"none")}static async Uq(t,i){t.muted=i;const s=t.play();try{if(!zd(s))return!As.Ks;const t=hi(250);return await Promise.race([s,t]),!0}catch(t){return!1}finally{t.pause(),t.muted=!0}}static Wq(){return new Promise(t=>{if("function"==typeof MessageChannel){const i=new MessageChannel;i.port1.onmessage=()=>t(),i.port2.postMessage("")}else u(t,0)})}kn(){this.Oq.kn()}constructor(t){this.TZ=void 0,this.Oq=void 0,this.TZ=t,this.Oq=new Fu}},SN=AN;function TN(t){SN=t}function kN(t){let i;return{get url(){return t.Yu},get method(){return t.Fk},get headers(){return i||(i=t.lk.BT()),i},get body(){return t.XT},get useCredentials(){return t.Xk},get type(){return t.Kp},get subType(){return t.Uk},get mediaType(){return t.Gk},get responseType(){return t.ck}}}function EN(t){switch(t.toLowerCase()){case"arraybuffer":return Bi.PT;case"json":return Bi.CT;case"stream":return Bi.NT;default:return Bi.DT}}function RN(t){switch(t.toUpperCase()){case"POST":return ci.POST;case"PUT":return ci.PUT;case"DELETE":return ci.DELETE;case"HEAD":return ci.HEAD;case"OPTIONS":return ci.OPTIONS;default:return ci.GET}}function xN(t){switch(t.toLowerCase()){case"manifest":return Ic.pk;case"segment":return Ic.wk;case"preload-hint":return Ic.yk;case"content-protection":return Ic.bk;default:return Ic.gk}}function IN(t){switch(t.toLowerCase()){case"initialization-segment":return vs.Ak;case"fairplay-license":return vs.Sk;case"fairplay-certificate":return vs.Tk;case"widevine-license":return vs.Ek;case"widevine-certificate":return vs.Rk;case"playready-license":return vs.xk;case"clearkey-license":return vs.Ik;case"aes128-key":return vs.Pk;default:return vs.gk}}function PN(t){switch(t.toLowerCase()){case"audio":return aA.Ck;case"video":return aA.Nk;case"text":return aA.DT;case"image":return aA.Dk;default:return aA.gk}}r(),r(),r(),r();var CN=class{get Gq(){return this.Xq.Yy}get Ca(){return this.hu||(this.hu=this.Zq()),this.hu}get Hq(){return this.zq}get Yq(){return!this.zq}get Kq(){return this.qq>0}get hE(){return this.oE}uN(){this.zq=!0,this.Xq.Hy(null)}jq(){this.Xq.zy(new Vb(this.Qq))}Jq(t){if(!this.Yq)throw new g("Cannot respond more than once");if(!Nc(t))throw new g("Expected valid response");this.oE=this.$q(t),this.uN()}tj(){try{const t=this.ij(this.Ca);t?this.sj(t):this.Kq||this.Hq||this.uN()}catch(t){this.Qq.push(t),this.jq()}}sj(t){if(this.Hq)throw new m("Request has been redirected or a response already exists");if(zd(t))this.ej(t);else{if("function"!=typeof t)throw new g("Expected promise or function");{const i=new gs,s=t=>{t?i.zy(t):i.Hy(void 0)};try{const e=t(s);zd(e)&&i.$g(e)}catch(t){i.zy(t)}this.ej(i.Yy)}}}async ej(t){try{this.qq++,await t,this.qq--,this.Kq||this.Hq||(this.Qq.length?this.jq():this.uN())}catch(t){this.qq--,this.Qq.push(t),this.Kq||this.Hq||this.jq()}}constructor(t,i){this.nj=void 0,this.ij=void 0,this.Xq=void 0,this.Qq=void 0,this.hu=void 0,this.zq=void 0,this.oE=void 0,this.qq=void 0,this.nj=t,this.ij=i,this.Xq=new gs,this.Qq=[],this.hu=void 0,this.zq=!1,this.oE=void 0,this.qq=0}},NN=class t extends CN{get XT(){return this.rj}get lk(){return this.nj.lk}get dk(){return this.nj.dk}get hE(){return this.oE}get rk(){return this.nj.rk}get fk(){return this.nj.fk}get Yu(){return this.nj._k}static hj(t,i,s){const e=void 0===t.body?s:t.body;return new oA({hk:e,dk:i.dk,ck:i.dk.ck,lk:t.headers,rk:t.status,fk:t.statusText,_k:t.url,vk:!0},i)}Zq(){return function(t){let i;const s=kN(t.dk);return{get closed(){return!t.Yq},get request(){return s},get url(){return t.Yu},get status(){return t.rk},get statusText(){return t.fk},get headers(){return i||(i=t.lk.BT()),i},get body(){return t.XT},respondWith:i=>t.Jq(i),waitUntil:i=>t.sj(i)}}(this)}$q(i){return t.hj(i,this.nj,this.rj)}constructor(t,i,s){super(t,i),this.rj=void 0,this.rj=s,this.tj()}};r();var DN=class extends CN{get XT(){return this.nj.XT}get Yq(){return this.aj&&!this.zq}get lk(){return this.nj.lk}get Fk(){return this.nj.Fk}get uj(){return this.cj}get hE(){return this.oE}get ck(){return this.nj.ck}get Vk(){return this.nj.Vk}get Wk(){return this.nj.Wk}get jg(){return this.nj.jg}get Kp(){return this.nj.Kp}get Uk(){return this.nj.Uk}get Gk(){return this.nj.Gk}get Yu(){return this.nj.Yu}get Xk(){return this.nj.Xk}get zk(){return this.nj.zk}get Zk(){return this.nj.Zk}get Hk(){return this.nj.Hk}get Yk(){return this.nj.Yk}Zq(){return function(t){let i;return{get url(){return t.Yu},get method(){return t.Fk},get headers(){return i||(i=t.lk.BT()),i},get body(){return t.XT},get closed(){return!t.Yq},get useCredentials(){return t.Xk},get type(){return t.Kp},get subType(){return t.Uk},get mediaType(){return t.Gk},get responseType(){return t.ck},redirect:i=>t.dj(i),respondWith:i=>t.Jq(i),waitUntil:i=>t.sj(i)}}(this)}$q(t){const i=this.nj.XT,s=new oA({hk:i,lk:{},dk:this.nj,_k:this.nj.Yu,ck:this.nj.ck,rk:200,fk:"OK"});return NN.hj(t,s,i)}dj(t){if(!this.Yq)throw new g("Cannot redirect, already redirected or has a response");let i;i=yo(t)?{url:t}:t,this.cj=function(t,i){return new F({Yu:void 0===t.url?i.Yu:t.url,Fk:void 0!==t.method?RN(t.method):void 0,lk:t.headers,XT:t.body,Xk:t.useCredentials,Kp:void 0!==t.type?xN(t.type):void 0,Uk:void 0!==t.subType?IN(t.subType):void 0,Gk:void 0!==t.mediaType?PN(t.mediaType):void 0,ck:void 0!==t.responseType?EN(t.responseType):void 0},i)}(i,this.nj),this.uN()}constructor(t,i,s){super(t,i),this.cj=void 0,this.aj=void 0,this.aj=s,this.tj()}};var BN=class extends Pr{lj(t){this.vj.lj(t)}_j(t){this.vj._j(t)}gj(t){this.vj.gj(t)}QH(t){this.vj.QH(t)}iz(t){this.vj.iz(t)}constructor(t,i=!0){const s=new MN(t);super(s,i),this.vj=void 0,this.vj=s}},MN=class{async dk(t){let i;try{i=await this.mj(t,t.jg)}catch(i){if(i instanceof mA)return await this.pj(i,t.jg);throw i}if(i=await this.wj(i,t.jg),Mr(i))return i;throw new xe(i)}Kk(t){return this.Jk.Kk(t)}async mj(t,i){Ko(i);let s,e=t;for(const t of this.yj.slice()){Ko(i);const n=new DN(e,t,!s);if(!n.Hq)try{await n.Gq}catch(t){0;continue}n.uj&&!s?e=n.uj:n.hE&&!s&&(s=n.hE)}return s||this.Jk.dk(e)}async pj(t,i){let s;if(t instanceof xe)s=t.hE;else{const i=t.dk;s=new oA({hk:null,dk:i,ck:i.ck,rk:0,fk:""})}const e=await this.wj(s,i);if(e===s)throw t;if(Mr(e))return e;throw new xe(e)}async wj(t,i){let s=t;for(const t of this.bj.slice()){Ko(i);const e=await Promise.resolve(s.My().hk(i)),n=new NN(s,t,e);if(!n.Hq)try{await n.Gq}catch(t){0;continue}s=n.hE||s}return s}lj(t){this.yj.unshift(t)}_j(t){this.yj.push(t)}gj(t){is(this.yj,t)}QH(t){this.bj.unshift(t)}iz(t){is(this.bj,t)}kn(){this.Jk.kn(),Lr(this.yj),Lr(this.bj)}constructor(t){this.Jk=void 0,this.yj=[],this.bj=[],this.Jk=t}};r();var LN=class{get Ca(){return this.hu||(this.hu=function(t){return{addRequestInterceptor(i){t.lj(i)},removeRequestInterceptor(i){t.gj(i)},addResponseInterceptor(i){t.QH(i)},removeResponseInterceptor(i){t.iz(i)}}}(this)),this.hu}lj(t){this.rW.lj(t)}gj(t){this.rW.gj(t)}QH(t){this.rW.QH(t)}iz(t){this.rW.iz(t)}constructor(t){this.rW=void 0,this.hu=void 0,this.rW=t}},ON=class extends fr{get Ca(){return this.hu||(this.hu=function(t){return{get online(){return t.hx},get estimator(){return function(t){return{get bandwidth(){return t.EG},get roundTripTime(){return t.xG}}}(t.Aj)},setEstimator(i){t.Sj(function(t){if(!t)return;return{get EG(){return pS(t.bandwidth)},get xG(){return pS(t.roundTripTime)},IG:i=>function(t){if(!t)return;return{Tj(i){t.markRequestStart(i)},Ej(i){t.markResponseStart(i)},Rj(i,s){t.markResponseData(i,s)},xj(i){t.markResponseEnd(i)}}}(t.createMeasurer(kN(i)))}}(i))},addRequestInterceptor(i){t.lj(i)},removeRequestInterceptor(i){t.gj(i)},addResponseInterceptor(i){t.QH(i)},removeResponseInterceptor(i){t.iz(i)},addEventListener(i,s){t.wn(i,s)},removeEventListener(i,s){t.mn(i,s)}}}(this)),this.hu}get hx(){return this.Ij.hx}get Aj(){return this.kZ.Aj}Sj(t){this.kZ.Sj(t)}lj(t){this.rW.lj(t)}gj(t){this.rW.gj(t)}QH(t){this.rW.QH(t)}iz(t){this.rW.iz(t)}kn(){this.Vo(),this.Ij.mn(d.Hw,this.Pj),this.Ij.mn(d.Zw,this.Cj)}constructor(t,i,s){super(i),this.Ij=void 0,this.rW=void 0,this.kZ=void 0,this.hu=void 0,this.Pj=void 0,this.Cj=void 0,this.Ij=t,this.rW=i,this.kZ=s,this.Pj=t=>{this.So(t)},this.Cj=t=>{this.So(t)},this.Ij.wn(d.Hw,this.Pj),this.Ij.wn(d.Zw,this.Cj)}};r(),r(),r();var lc=function(t){return t.PERFORMANCE="performance",t.QUALITY="quality",t.BANDWIDTH="bandwidth",t}({});r();function FN(t,i,s,e,n,r){const h=[];let o=t-_.max(r,1),a=t+n;if(i&&s){const t=ss(s,1,5),e=i-t;o=_.min(o,e);const n=i+s+t;a=_.max(a,n)}0!==o&&e.GM(0,o)&&h.push([0,o]);return e.GM(a,1/0)&&h.push([a,1/0]),h}function yc(t){return t instanceof m&&"QuotaExceededError"===t.name}r();var VN={type:lc.BANDWIDTH};function WN(t){const i=Fa(VN);return yo(t)?i.type=UN(t):Nc(t)&&function(t){switch(t){case lc.PERFORMANCE:case lc.QUALITY:case lc.BANDWIDTH:return!0;default:return!1}}(t.type)&&(i.type=UN(t.type)),Nc(t)&&Nc(t.metadata)&&(i.metadata=function(t){const i={},s=go(t.bitrate);return S(s)||(i.bitrate=s),i}(t.metadata)),i}function UN(t){switch(t){case"bandwidth":return lc.BANDWIDTH;case"performance":return lc.PERFORMANCE;case"quality":return lc.QUALITY}}r();var GN=class extends sh{constructor(t){super("Nj"),this.Dj=void 0,this.Dj=t}};r();var XN=class extends sh{constructor(t){super("Bj"),this.Mj=void 0,this.Mj=t}};r();var ZN=class extends sh{constructor(t){super("Lj"),this.Oj=void 0,this.Oj=t}},HN=class extends fr{Fj(t){this.Vj=t}get Wj(){switch(this.Uj.type){case lc.PERFORMANCE:return 0;case lc.QUALITY:return 1/0;case lc.BANDWIDTH:return this.Uj.metadata&&void 0!==this.Uj.metadata.bitrate?this.Uj.metadata.bitrate:bu.Bg._G();default:return bu.Bg._G()}}get Ca(){return this.hu}get Mj(){return this.Uj}set Mj(t){this.Uj=t,this.So(new XN(t))}get Dj(){return this.Gj}set Dj(t){this.Gj=t,this.So(new GN(t))}get Xj(){return _.min(this.Gj,this.Zj)}get Oj(){return this.Hj}set Oj(t){this.Hj=t,this.So(new ZN(t))}get zj(){return this.Zj}get Aj(){var t;return null!=(t=this.Yj)?t:this.Vj.hX}Sj(t){this.Yj=t}Kj(t){let i=_.min(t,.8*this.Zj);if(i=_.max(10,i),this.Zj===i)return!1;const s=this.Xj;this.Zj=i;const e=this.Xj;return e!==s&&this.So(new GN(e)),!0}get qj(){return this.jj}set qj(t){this.jj=t}constructor(...t){super(...t),this.hu=function(t){return{get strategy(){return function(t){return{metadata:t.metadata,type:t.type}}(t.Mj)},set strategy(i){t.Mj=WN(i)},get targetBuffer(){return t.Dj},set targetBuffer(i){const s=go(i);S(s)||(t.Dj=s)},get bufferLookbackWindow(){return t.Oj},set bufferLookbackWindow(i){const s=go(i);S(s)||(t.Oj=s<=0?30:s)},get maxBufferLength(){return t.zj},get clearBufferWhenSettingTargetQuality(){return t.qj},set clearBufferWhenSettingTargetQuality(i){t.qj=Zu(i)}}}(this),this.Uj=VN,this.Gj=20,this.Hj=30,this.Zj=1/0,this.jj=!1,this.Yj=void 0,this.Vj=void 0}};r(),r();var zN=class extends Kt{xa(){return new YN}constructor(){super("yI")}},YN=class extends sh{constructor(){super("change")}};r(),r();var KN=class extends fr{kn(){this.Vo();for(const t of this.Jf)this.Qj.mn(t,this.Jj)}constructor(t,i,s){super(s),this.Qj=void 0,this.Jf=void 0,this.Jj=t=>{nS(t)&&ht(()=>{this.So(t.Ca)})},this.Qj=t,this.Jf=i;for(const t of this.Jf)this.Qj.wn(t,this.Jj)}},Is=class extends ua{kn(){this.Vo(),this.Qj.mw(this.Jj)}constructor(t,i){super(i),this.Qj=void 0,this.Jj=t=>{nS(t)&&ht(()=>{this.So(t.Ca)})},this.Qj=t,this.Qj.dw(this.Jj)}};var qN=class extends ua{get kO(){return this.LO}set kO(t){if(this.EO<=t)throw new m("Start time of a clip should be smaller than the end time.");this.LO!==t&&(this.LO=t,this.So(new zN))}get EO(){return this.VO}set EO(t){if(t<=this.kO)throw new m("End time of a clip should be larger than the start time.");this.VO!==t&&(this.VO=t,this.So(new zN))}get Ca(){return this.hu||(this.hu=function(t){let i;const s={get startTime(){return t.kO},set startTime(i){t.kO=i},get endTime(){return t.EO},set endTime(i){t.EO=i},addEventListener(t,s){i.wn(t,s)},removeEventListener(t,s){i.mn(t,s)}};return i=new Is(t,s),s}(this)),this.hu}hr(){0===this.LO&&this.VO===1/0||(this.LO=0,this.VO=1/0,this.So(new zN))}$j(){return new ZT([this.kO,this.EO],[!0,!0])}constructor(...t){super(...t),this.LO=0,this.VO=1/0,this.hu=void 0}};r();var jN=class t extends eS{WR(t,i){const s=this.tQ.$j().CM(t);super.WR(s,i),this.iQ()}XR(){return super.XR()||this.sQ}get eQ(){return this.Ex().length?this.Ex():this.tQ.$j()._s()}Ex(){return ZT.jn(super.Ex()).Mn(this.tQ.$j())._s()}Yx(){this.XR()?this.WR(this.eQ.start(0)):this.nQ(),super.Yx(),this.iQ()}async Ta(t,i){Ko(i),this.sQ=!1,this.tQ.hr(),await super.Ta(t,i)}kn(){return this.tQ.mn("yI",this.rQ),this.RR.mn(d.vy,this.Nc),this.hQ(),super.kn()}iI(t){switch(t.type){case d.Jw:return this.So(t),this.oQ(),!0;case d.Qw:case d.Pw:return this.So(t),this.aQ(),!0;case d.Nw:if(this.uQ)return!0}return super.iI(t)}get uQ(){return this.tQ.EO<this.ct}hQ(){this.cQ&&(Ii(this.cQ),this.cQ=void 0)}iQ(){const i=this.OR,s=this.uQ&&i>=this.tQ.EO-t.fd;this.sQ&&!s?(this.sQ=!1,this.ux&&this.Yx()):this.sQ||!s||this.Rx||this.dQ||(this.sQ=!0,this.So(new Be(i)),this.zx())}nQ(){if(this.ct===1/0)return;const i=this.eQ,s=ZT.jn(i).CM(this.OR);we(this.OR,s,t.fd)||this.WR(s)}constructor(i,s){super(i),this.tQ=void 0,this.sQ=!1,this.cQ=void 0,this.dQ=!1,this.rQ=()=>{this.nQ(),this.iQ()},this.Nc=()=>{this.hQ(),this.iQ();this.uQ&&this.OR>=this.tQ.EO-t.lQ&&!this.GR&&(this.cQ=ls(this.Nc))},this.oQ=()=>{this.dQ=!0},this.aQ=()=>{this.dQ&&(this.dQ=!1,this.iQ())},this.tQ=s,this.tQ.wn("yI",this.rQ),this.RR.wn(d.vy,this.Nc)}};jN.lQ=1,jN.fd=.001,r();var QN=class{get fQ(){return this.vQ}set fQ(t){this.vQ=t}constructor(){this.vQ=void 0,this.vQ=!1}};r();var JN=class extends eS{XR(){return!this.vQ.fQ&&super.XR()}zx(){this._Q=!0,super.zx()}Yx(){this._Q=!1,super.Yx()}iI(t){if(this.vQ.fQ)switch(t.type){case d.Nw:return this.OR=0,this._Q||(this.Rx?this.gQ=!0:this.Yx()),!0;case d.Qw:this.gQ&&(this.gQ=!1,this.Yx());break;case d.zw:if(this.gQ||super.XR())return!0}return super.iI(t)}constructor(t,i){super(t),this.vQ=void 0,this.gQ=!1,this._Q=!1,this.vQ=i}};r(),r();var $N=class{get Ca(){return this.hu}get iO(){return this.oa.$R.iO}get eO(){return this.oa.$R.eO}get tO(){return this.oa.$R.tO}get mQ(){throw new m("Not implemented")}get pQ(){throw new m("Not implemented")}get nO(){return this.oa.$R.nO}get sO(){return this.oa.$R.sO}get rO(){return this.oa.$R.rO}constructor(t){this.oa=void 0,this.hu=void 0,this.oa=t,this.hu=function(t){return{get currentBandwidthEstimate(){return t.eO},get corruptedVideoFrames(){return t.iO},get droppedVideoFrames(){return t.tO},get totalVideoFrames(){return t.sO},get totalBytesLoaded(){return t.nO},get bufferedSegments(){return t.rO}}}(this)}};function tD(t){if(!t||!wf(t))return{tO:0,iO:0,sO:0,eO:0,nO:0,rO:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}};if("function"==typeof t.getVideoPlaybackQuality){const i=t.getVideoPlaybackQuality();return{tO:i.droppedVideoFrames,iO:i.corruptedVideoFrames||0,sO:i.totalVideoFrames}}return{tO:t.webkitDroppedFrameCount||0,iO:0,sO:t.webkitDecodedFrameCount||0}}r(),r();var iD=class extends Kt{xa(){return new sD}constructor(){super("wQ")}},sD=class extends sh{constructor(){super("castingchange")}};r();var eD=class extends fr{get yQ(){var t,i;return(null==(t=this.bQ)?void 0:t.yQ)||(null==(i=this.AQ)?void 0:i.yQ)||!1}get SQ(){return this.bQ}get TQ(){return this.AQ}kQ(t){this.bQ=t,this.EQ(t)}RQ(t){this.AQ=t,this.EQ(t)}EQ(t){t.wn("statechange",this.xQ)}IQ(t){t.mn("statechange",this.xQ)}get Ca(){return this.hu||(this.hu=function(t){let i;const s={get casting(){return t.yQ},get airplay(){var i;return null==(i=t.SQ)?void 0:i.Ca},get chromecast(){var i;return null==(i=t.TQ)?void 0:i.Ca},addEventListener(t,s){i.wn(t,s)},removeEventListener(t,s){i.mn(t,s)}};return i=new KN(t,["wQ"],s),s}(this)),this.hu}kn(){this.Vo(),this.bQ&&(this.IQ(this.bQ),this.bQ=void 0),this.AQ&&(this.IQ(this.AQ),this.AQ=void 0)}constructor(...t){super(...t),this.bQ=void 0,this.AQ=void 0,this.CQ=!1,this.hu=void 0,this.xQ=()=>{const t=this.CQ,i=this.yQ;t!==i&&(this.CQ=i,this.So(new iD))}}};r(),r();var nD=class{static async NQ(t,i){try{const s=new F({Yu:t,ck:Bi.DT,Fk:ci.GET}),e=await i.dk(s);return(await e.hk()).trim()}catch(t){return void hc(t)}}static DQ(t){try{const i=pC(t);return new SC(i.key,i.domains_page,i.domains_source,i.expiration_date,i.features,i.customer_id,i.generation_date,i.sdks,i.send_impression)}catch(t){throw new Wt(Ne.LICENSE_ERROR,"Invalid license. No valid license was configured.")}}static BQ(t){void 0===t&&(t=Ir.bh),Zd.lp("The baked-in license is used. Please update the configuration with your license.");const i=t.sY("F2b-iL'[FL[S"),s=JSON.parse('["F$(:_L50F|aY"]').map(i=>t.sY(i)),e=JSON.parse('[".$hsF|b9_Ess*rS:F]Y\\""]').map(i=>t.sY(i)),n=Number(new Date(Number(t.sY('COD|aHpHa:p3Ceo3Co""')))),r=JSON.parse("[]").map(i=>t.sY(i));return new SC(i,s,e,n,r)}static convertLicenseToDummyLicense(t){return new SC(t.cY,t.dY,t.lY,864e13,t.vY,t._Y,Date.now(),t.mY,t.pY)}};r();var ta=class t{static IT(){return t.Bg||(t.Bg=rD.MS()?new rD:new Cb),t.Bg}static Zy(i){t.IT().Zy(i)}static xT(){t.IT().xT()}static Uy(i){return t.IT().Uy(i)}static Gy(i,s){t.IT().Gy(i,s)}static MQ(i){const s=t.Uy(i);if(void 0!==s)return C(s)}static LQ(i){return"true"===t.Uy(i)}};ta.Bg=void 0;var rD=class extends ta{static MS(){const t="foobar";try{return self.localStorage.setItem(t,t),self.localStorage.removeItem(t),!0}catch(t){}return!1}Zy(t){self.localStorage.removeItem(t)}xT(){self.localStorage.clear()}Uy(t){var i;return null!=(i=self.localStorage.getItem(t))?i:void 0}Gy(t,i){self.localStorage.setItem(t,i)}},hD="https://validate.theoplayer.com/1/",oD=72e5,aD=_.floor(14399999*_.random()-oD),uD="THEOplayer.license",cD=class{async OQ(){const t=await this.FQ(this.VQ.license,this.VQ.licenseUrl);this.oK.WQ(t)}async FQ(t,i){let s,e=i;t?s=nD.DQ(t):e||(s=nD.BQ()),e||(e=hD+s.cY);const n=this.UQ();let r;if(s&&(r=this.GQ.xY(s),r===AC.oY)){if(this.XQ(s.fY)&&this.XQ(null==n?void 0:n.fY)){const t=await this.ZQ(e);if(t)return t}return s}if(n){if(this.GQ.xY(n)===AC.oY){if(this.XQ(null==n?void 0:n.fY)){const t=await this.ZQ(e);if(t)return t}return n}ta.Zy(uD)}const h=await nD.NQ(e,this.rW);let o;if(h){o=nD.DQ(h);if(this.GQ.xY(o)===AC.oY)return ta.Gy(uD,h),o;ta.Zy(uD)}else if(!this.BY&&s&&r===AC.aY&&e===hD+s.cY)return nD.convertLicenseToDummyLicense(s);if(!s&&!o)throw new Wt(Ne.LICENSE_ERROR,"The given license is invalid!");this.HQ(null!=s?s:o,new Wt(Ne.LICENSE_ERROR,"The given license is invalid!"))}async AY(t){let i=await this.oK.hK();if(this.XQ(i.fY)){var s;const t=null!=(s=this.VQ.licenseUrl)?s:hD+i.cY,e=await this.ZQ(t);e&&(this.oK.WQ(e),i=e)}try{const s=this.GQ.xY(i);if(s===AC.uY){const t=TC.wY;throw new Wt(RC(t),MC.EY(t))}if(s===AC.aY){const t=TC.aY;throw new Wt(RC(t),MC.EY(t))}this.GQ.AY(t,i)}catch(t){this.zQ(t)}}async RY(t){const i=await this.oK.hK();try{this.GQ.RY(t,i)}catch(t){this.zQ(t)}}async ZQ(t){try{const i=await nD.NQ(t,this.rW);if(void 0===i)return;const s=nD.DQ(i);return this.GQ.xY(s)===AC.oY?(ta.Gy(uD,i),s):void 0}catch(t){return}}XQ(t){return!t||Number(new Date)+2592e5+aD>=t}UQ(){const t=ta.Uy(uD);if(t)return nD.DQ(t)}HQ(t,i){this.oK.WQ(t),this.zQ(i)}zQ(t){throw Tv(t.message),this.YQ.cK(t.message),t}constructor(t,i,s,e,n,r){this.rW=void 0,this.GQ=void 0,this.YQ=void 0,this.oK=void 0,this.VQ=void 0,this.Gb=void 0,this.BY=void 0,this.rW=t,this.GQ=i,this.YQ=s,this.oK=e,this.VQ=n,this.Gb=r,this.BY=BC(r)}};r();var dD=class{WQ(t){this.KQ=t,this.qQ.Hy()}get jQ(){return this.KQ}async hK(){return this.KQ?Promise.resolve(this.KQ):(await this.qQ.Yy,this.KQ)}constructor(){this.KQ=void 0,this.qQ=new gs}};r(),r();var lD=class extends Kt{xa(){return new fD}constructor(){super("yI")}},fD=class extends sh{constructor(){super("change")}};function vD(t){let i;const s={get fontFamily(){return t.QQ},set fontFamily(i){t.QQ=i},get fontColor(){return t.JQ},set fontColor(i){t.JQ=i},get fontSize(){return t.$Q},set fontSize(i){t.$Q=i},get backgroundColor(){return t.tJ},set backgroundColor(i){t.tJ=i},get windowColor(){return t.iJ},set windowColor(i){t.iJ=i},get edgeStyle(){return t.sJ},set edgeStyle(i){t.sJ=i},get marginTop(){return t.eJ},set marginTop(i){t.eJ=i},get marginBottom(){return t.nJ},set marginBottom(i){t.nJ=i},get marginLeft(){return t.rJ},set marginLeft(i){t.rJ=i},get marginRight(){return t.hJ},set marginRight(i){t.hJ=i},addEventListener(t,s){const e=Ta(t,_o);i.wn(e,s)},removeEventListener(t,s){const e=Ta(t,_o);i.mn(e,s)}};return i=new vm(s),t.wn(["yI"],t=>i.So(t.Ca)),s}r();var _D={QQ:void 0,JQ:void 0,$Q:void 0,tJ:void 0,iJ:void 0,sJ:void 0,eJ:void 0,nJ:void 0,rJ:void 0,hJ:void 0},gD="THEOplayer.textTrackStyle.",mD=class t extends fr{get oJ(){return this.aJ}get QQ(){return this.aJ.QQ}set QQ(t){this.er({QQ:t})}get JQ(){return this.aJ.JQ}set JQ(t){this.er({JQ:t})}get $Q(){return this.aJ.$Q}set $Q(t){this.er({$Q:t})}get tJ(){return this.aJ.tJ}set tJ(t){this.er({tJ:t})}get iJ(){return this.aJ.iJ}set iJ(t){this.er({iJ:t})}get sJ(){return this.aJ.sJ}set sJ(t){this.er({sJ:t})}get eJ(){return this.aJ.eJ}set eJ(t){this.er({eJ:t})}get nJ(){return this.aJ.nJ}set nJ(t){this.er({nJ:t})}get hJ(){return this.aJ.hJ}set hJ(t){this.er({hJ:t})}get rJ(){return this.aJ.rJ}set rJ(t){this.er({rJ:t})}get Ca(){return this.hu||(this.hu=vD(this)),this.hu}er(i){this.aJ=Jr({},this.aJ,i),t.uJ(this.aJ),this.So(new lD)}static cJ(){const t=Jr({},_D);return t.QQ=ta.Uy(gD+"fontFamily")||t.QQ,t.JQ=ta.Uy(gD+"fontColor")||t.JQ,t.$Q=ta.Uy(gD+"fontSize")||t.$Q,t.tJ=ta.Uy(gD+"backgroundColor")||t.tJ,t.iJ=ta.Uy(gD+"windowColor")||t.iJ,t.sJ=ta.Uy(gD+"edgeStyle")||t.sJ,t}static uJ(t){ta.Gy(gD+"fontFamily",t.QQ||""),ta.Gy(gD+"fontColor",t.JQ||""),ta.Gy(gD+"fontSize",t.$Q||""),ta.Gy(gD+"backgroundColor",t.tJ||""),ta.Gy(gD+"windowColor",t.iJ||""),ta.Gy(gD+"edgeStyle",t.sJ||"")}constructor(){super(),this.aJ=void 0,this.hu=void 0,this.aJ=t.cJ()}};function pD(t,i){var s,e;t.style.marginLeft=(null!=(s=i.rJ)?s:0)+"px",t.style.marginRight=(null!=(e=i.hJ)?e:0)+"px",t.style.width="calc(100% - "+t.style.marginLeft+" - "+t.style.marginRight+")"}r(),r(),r(),r();var wD=[d.uo,d.zw,Vo.SM,d.vy,d.Yw,d.Uw,d.Jw,d.Qw,d.Nw,d.Kw,d._y,d.Iw,Vo.bI,d.jw,sa.ma,ym.Cw,ym.Cy,d.Ew,d.Tw,d.gy,d.wy,d.LICENSE_REQUEST_GENERATED,d.Ow,d.Vw,d.Mw,d.Dw],yD={IL:!1};function bD(t){return void 0!==t.Nx}function AD(t){return t.Cd.Kp===xt.yW}r();var Ws=function(t){return t.dJ="lJ",t}({}),SD=["lJ"],Vt=function(t){return t[t.fJ=0]="fJ",t[t.NT=1]="NT",t[t.vJ=2]="vJ",t}({});r(),r();var TD=["loadstart","encrypted","waitingforkey","webkitneedkey","msneedkey"],kD=function(t){return t._J="gJ",t.mJ="pJ",t.wJ="yJ",t}({}),ED=class extends fr{get Cd(){return this.qS}get iX(){return this.vT}async bJ(t,i){const s=await this.nw.ew(t.qp,i),e=await s.xS();return await this.AJ(e),e}SJ(t){const i=this.SS;return i?0!==t.aX.length&&t.aX.some(t=>t.TS.qp===i.TS):0!==this.qS.aX.length?t.aX.some(t=>this.qS.aX.some(i=>t.TS===i.TS)):0===t.aX.length||!this.TJ}kJ(t){return this.EJ.kJ(t),this.qS=t,Promise.resolve()}RJ(t){this.EJ.RJ(t)}xJ(){if(!As.vg)return"";const t=this.VQ.ps5;return"; pass_through="+t.passThrough+'; playmode="'+t.playMode+'";'}async Zg(){this.Vo(),this.vT.removeEventListener("loadedmetadata",this.IJ);for(const t of TD)this.vT.removeEventListener(t,this.PJ);await this.ta.kn(),this.CJ(),await this.EJ.hr(),await this.NJ(void 0)}DJ(t){t!==this.BJ&&(this.BJ=t,t?this.MJ.Hy(void 0):this.MJ=new gs)}AJ(t){return this.ta.Zo(()=>this.NJ(t))}async NJ(t){if(t&&!this.vT.src&&!this.vT.srcObject)throw new Q(Ne.CONTENT_PROTECTION_ERROR,"Attempted to attach MediaKeys to a sourceless MediaElement");if(!t&&(this.vT.src||this.vT.srcObject))throw new Q(Ne.CONTENT_PROTECTION_ERROR,"Attempted to remove MediaKeys from a non-empty MediaElement");t&&!this.BJ&&await this.MJ.Yy;const i=this.SS;i&&(await i.ES(this.vT),this.SS=void 0),t&&(await t._n(this.vT),this.SS=t)}Ta(t,i){return this.ta.Zo(()=>this.LJ(t,i))}LJ(t,i){this.DJ(!1);const e=this.SL.vx;if(yo(t)&&i){const s=this.OJ(t,i);this.vT.appendChild(s)}else if(yo(t))this.vT.src=t;else if(function(t){if(void 0!==s.ManagedMediaSource&&t instanceof s.ManagedMediaSource)return!0;if("undefined"!=typeof MediaSource&&t instanceof MediaSource)return!0;return!1}(t))if(function(t){return"srcObject"in t&&As.ru&&As.K_>=17}(this.vT))try{this.vT.srcObject=t}catch(i){this.vT.src=URL.createObjectURL(t)}else this.vT.src=URL.createObjectURL(t);else RD(t)&&(this.vT.srcObject=t);this.SL.vx=e}OJ(t,i){const s=h.createElement("source");return s.src=t,s.type=i+this.xJ(),s}FJ(t){return this.ta.Zo(()=>this.VJ(t))}VJ(t){this.LJ(t),this.vT.load()}CJ(){this.DJ(!1),yf(this.vT)}async WJ(){this.SS&&await this.SS.hr()}constructor(t,i,s,e,n){super(),this.qS=void 0,this.SL=void 0,this.vT=void 0,this.BJ=!1,this.MJ=new gs,this.TJ=!1,this.ta=new Fu,this.EJ=void 0,this.nw=void 0,this.VQ=void 0,this.SS=void 0,this.IJ=()=>{this.TJ=!0},this.PJ=()=>{this.DJ(!0)},this.qS=t,this.SL=i,this.vT=i.iX,this.EJ=s,this.nw=e,this.VQ=n,this.vT.addEventListener("loadedmetadata",this.IJ);for(const t of TD)this.vT.addEventListener(t,this.PJ)}};function RD(t){return"undefined"!=typeof MediaStream&&t instanceof MediaStream}var xD=class extends ED{get IR(){return ZT.jn(this.vT.buffered)}get ct(){return this.vT.duration}get UJ(){const t=this.ct;if(!isFinite(t))return!1;const i=this.IR;if(0===i.V)return!1;return t-i.An(i.V-1)<$}get yx(){return this.vT.preload}set yx(t){this.vT.preload=t}get kx(){return ZT.jn(this.vT.seekable)}get GJ(){return this.IR}get XJ(){if(wf(this.vT)&&(this.vT.videoWidth>0||this.vT.videoHeight>0))return this.IR}async Fj(){const t=this.Cd;switch(t.cX){case Gh.cP:case Gh.dP:this.vT.setAttribute("crossorigin",t.cX);break;case Gh.Mk:default:this.vT.removeAttribute("crossorigin")}void 0!==t.yx?this.vT.preload=t.yx:this.vT.preload=hl.kG,void 0!==t.dX?this.vT.title=t.dX:Ol(this.vT),t.ZJ?await this.FJ(t.ZJ):As.vg?await this.Ta(t.eP,t.GT):await this.Ta(t.eP),this.EJ.Un(this,t)}SJ(t){return!1}kJ(t){return Promise.resolve(void 0)}HJ(t){return!1}zJ(){return!RD(this.qS.ZJ)}async Zg(){Ol(this.vT),await super.Zg()}static YJ(t,i){return!!i.canPlayType&&Boolean(i.canPlayType(t.GT))}};r();var Ut=class extends sh{constructor(t){super(d.Yw),this.currentTime=void 0,this.currentTime=t}};r();var Pt=class extends sh{constructor(){super(d.Uw)}};r(),r();var ID=function(t){return t.KJ="qJ",t}({}),PD=class extends sh{constructor(t){super("qJ"),this.jJ=void 0,this.jJ=t}},CD=class extends fr{get QJ(){return this.JJ}$J(t,i){const s=new ZT([t,i]);this.JJ=this.JJ.LM(s),this.So(new PD(s))}t$(t,i){this.JJ=this.JJ.FM(new ZT([t,i]))}hr(){this.JJ=ZT.tL()}kn(){this.Vo()}constructor(...t){super(...t),this.JJ=ZT.tL()}};function ND(t,i){return void 0===i&&(i=new Ub({highWaterMark:1/0})),new jr(new DD(t,i),{highWaterMark:0})}r(),r(),r();var DD=class{start(t){this.qQ=t,this.i$()&&this.s$()}pull(){this.tf.length>0?this.e$():this.n$=!0,this.i$()&&this.s$()}cancel(t){return Lr(this.tf),this.if=0,this.n$=!1,this.Gd.cancel(t)}e$(){if(0===this.tf.length)return;const t=this.tf;this.tf=[],this.if=0,this.n$=!1,this.qQ.enqueue(t)}i$(){if(this.n$)return!0;return this.r$-this.if>0}s$(){if(this.h$)return;const t=this.Gd.read().then(this.o$).catch(this.kE);this.h$=t;const i=()=>{this.h$===t&&(this.h$=void 0)};t.then(i,i)}constructor(t,{size:i=()=>1,highWaterMark:s=1}){this.Gd=void 0,this.a$=void 0,this.r$=void 0,this.tf=[],this.if=0,this.qQ=void 0,this.n$=!1,this.h$=void 0,this.o$=t=>t.done?(this.e$(),void this.qQ.close()):(this.tf.push(t.value),this.if+=this.a$(t.value),this.n$&&this.e$(),this.i$()?this.Gd.read().then(this.o$):void 0),this.kE=t=>{this.e$(),this.qQ.error(t)},this.Gd=t.getReader(),this.a$=i,this.r$=s}};r(),r(),r(),r();var BD=class{u$(t){this.c$.push(t),this.Vy+=t.byteLength}d$(t){if(this.Vy<=t)return this.l$();const i=this.c$;let s=0,e=0;for(;e<i.length&&s+i[e].byteLength<=t;)s+=i[e].byteLength,e++;const n=i.slice(0,e);if(e<i.length&&s<t){const r=t-s;0,n.push(uo(i[e],0,r)),s+=r}return{c$:n,Vy:s}}f$(t){const i=this.d$(t);return 1===i.c$.length?i.c$[0]:fp(i.c$,i.Vy)}l$(){return{c$:this.c$,Vy:this.Vy}}v$(t){if(this.Vy<=t)return this._$();const i=this.c$;let s=0,e=0;for(;e<i.length&&s+i[e].byteLength<=t;)s+=i[e].byteLength,e++;const n=i.splice(0,e);if(i.length>0&&s<t){const e=t-s;0,n.push(uo(i[0],0,e)),i[0]=uo(i[0],e),s+=e}return this.Vy-=s,{c$:n,Vy:s}}g$(t){const i=this.v$(t);return 1===i.c$.length?i.c$[0]:fp(i.c$,i.Vy)}_$(){const t=this.l$();return this.c$=[],this.Vy=0,t}m$(){const t=1===this.c$.length?this.c$[0]:fp(this.c$,this.Vy);return this.c$=[],this.Vy=0,t}constructor(){this.c$=[],this.Vy=0}},Pu=class{p$(t,i){}w$(){}y$(t){this.tf.u$(t),this.b$(!1)}A$(){this.b$(!0)}S$(){return 0!==this.Ra||0!==this.tf.Vy}b$(t){for(;0!==this.tf.Vy;){if(!t&&this.T$>this.tf.Vy)return;switch(this.Ra){case 0:this.k$(t);break;case 1:this.E$(t);break;case 2:this.R$(t)}}}x$(){this.Ra=0,this.T$=8}k$(t){const i=xh(this.tf.f$(this.T$)),s=new J,e=dh.vN(i,s);if(!e.uN)return this.T$=e.gN,void(t&&this.T$>this.tf.Vy&&this.I$(this.tf.Vy));const n=e._N.Kp;let r=e._N.Vy;0===r&&(r=1/0),this.p$(n,r),this.P$(n)?this.C$(r):this.I$(r)}C$(t){this.Ra=1,this.T$=t}E$(t){const i=xh(this.tf.g$(this.T$)),s=new J,e=dh.cN(i,s,!t);if(!e.uN)throw new cT(s.ac);this.w$(),this.N$(e.dN),this.x$()}I$(t){this.Ra=2,this.T$=0,this.D$=t}R$(t){const i=this.tf.v$(this.D$);this.D$-=i.Vy;for(const t of i.c$)this.B$(t);(0===this.D$||t&&this.D$===1/0)&&(this.w$(),this.x$())}constructor(){this.tf=new BD,this.Ra=0,this.T$=0,this.D$=0,this.x$()}};function MD(t){return t instanceof Qw}function LD(t){return t instanceof qw}function OD(t){return t instanceof zw||t instanceof Yw}function FD(t){return t instanceof ww}function VD(t){return t instanceof Jp}function WD(t){return t instanceof yl}function UD(t){return t instanceof Yc}function GD(t){return t instanceof ay}function XD(t){return t instanceof hy}function ZD(t){return t instanceof sy}function HD(t){return t instanceof ny}function zD(t,i){const s=me(t.boxes,ZD);if(s&&s.flags.baseDataOffsetPresent)s.baseDataOffset=s.baseDataOffset.add(i);else for(const s of t.boxes)s instanceof ny&&s.flags.dataOffsetPresent&&(s.dataOffset=s.dataOffset+i)}r();var YD=class extends Pu{start(t){this.qQ=t}transform(t){this.y$(t)}flush(){this.A$()}P$(t){return t===Ci.LP||t===Ci.RC||t===Ci.VC}N$(t){const i=this.M$(t);this.qQ.enqueue(i)}B$(t){this.qQ.enqueue(t)}M$(t){const i=re(t.hk.hk);switch(t.Kp){case"moov":return this.L$(i);case"sidx":return this.O$(i);case"moof":return this.F$(i)}return i}get V$(){if(void 0===this.W$)throw new m("Expected to have found a movie header timescale.");return this.W$}U$(t){const i=this.G$.get(t);if(void 0===i)throw new m("Expected to have found a media header timescale for track ID "+t+".");return i}L$(t){const i=Ey(t);for(let t=0;t<i.boxes.length;t++){const s=i.boxes[t];s instanceof Gw?i.boxes[t]=this.X$(s):s instanceof Xw?i.boxes[t]=this.Z$(s):s instanceof qw&&this.H$(s)}for(const t of i.boxes)t instanceof yl&&this.z$(t);return i.serialize().join()}X$(t){this.W$=t.timescale;const i=Zi(mh.fromNumber(t.duration,!0),this.V$,this.Y$);return 0!==i.getHighBits()?this.Z$(function(t){return new Xw({creation:mh.fromNumber(t.creationTime,!0),modification:mh.fromNumber(t.modificationTime,!0),scale:t.timescale,duration:mh.fromNumber(t.duration,!0)},t.nextTrackId,{rate:t.rate,volume:t.volume,matrix:t.matrix},t.flags)}(t)):(t.timescale=this.Y$,t.duration=i.toInt(),t)}Z$(t){return this.W$=t.timescale,t.timescale=this.Y$,t.duration=Zi(t.duration,this.V$,this.Y$),t}H$(t){let i;for(let s=0;s<t.boxes.length;s++){const e=t.boxes[s];e instanceof zw?(i=e.trackId,t.boxes[s]=this.K$(e)):e instanceof Yw?(i=e.trackId,t.boxes[s]=this.q$(e)):e instanceof ww?this.j$(e,i):e instanceof aw&&this.Q$(e)}}K$(t){const i=Zi(mh.fromNumber(t.duration,!0),this.V$,this.Y$);return 0!==i.getHighBits()?this.q$(function(t){return new Yw({creation:mh.fromNumber(t.creationTime,!0),modification:mh.fromNumber(t.modificationTime,!0),duration:mh.fromNumber(t.duration,!0)},t.trackId,t.volume,t.width,t.height,{layer:t.layer,alternateGroup:t.alternateGroup,matrix:t.matrix})}(t)):(t.duration=i.toInt(),t)}q$(t){return t.duration=Zi(t.duration,this.V$,this.Y$),t}j$(t,i){for(let s=0;s<t.boxes.length;s++){const e=t.boxes[s];e instanceof _w?t.boxes[s]=this.J$(e,i):e instanceof gw&&(t.boxes[s]=this.t0(e,i))}}J$(t,i){this.G$.set(i,t.timescale);const s=Zi(mh.fromNumber(t.duration,!0),t.timescale,this.Y$);return 0!==s.getHighBits()?this.t0(function(t){return new gw({creation:mh.fromNumber(t.creationTime,!0),modification:mh.fromNumber(t.modificationTime,!0),scale:t.timescale,duration:mh.fromNumber(t.duration,!0)},t.language,t.flags)}(t),i):(t.timescale=this.Y$,t.duration=s.toInt(),t)}t0(t,i){return this.G$.set(i,t.timescale),t.timescale=this.Y$,t.duration=Zi(t.duration,t.timescale,this.Y$),t}Q$(t){for(const i of t.boxes)i instanceof rw?this.i0(i):i instanceof hw&&this.s0(i)}i0(t){for(const i of t.entries)i.mediaTime=qD(i.mediaTime,this.V$,this.Y$),i.segmentDuration=qD(i.segmentDuration,this.V$,this.Y$)}s0(t){for(const i of t.entries)i.mediaTime=Zi(i.mediaTime,this.V$,this.Y$),i.segmentDuration=Zi(i.segmentDuration,this.V$,this.Y$)}z$(t){for(let i=0;i<t.boxes.length;i++){const s=t.boxes[i];s instanceof Yc?this.e0(s):s instanceof Lw?t.boxes[i]=this.n0(s):s instanceof Ow&&(t.boxes[i]=this.r0(s))}}e0(t){const i=this.U$(t.trackId);t.defaultSampleDuration=qD(t.defaultSampleDuration,i,this.Y$)}n0(t){const i=Zi(mh.fromNumber(t.fragmentDuration,!0),this.V$,this.Y$);return 0!==i.getHighBits()?this.r0(function(t){return new Ow(mh.fromNumber(t.fragmentDuration,!0),t.flags)}(t)):(t.fragmentDuration=i.toInt(),t)}r0(t){return t.fragmentDuration=Zi(t.fragmentDuration,this.V$,this.Y$),t}O$(t){let i=Ry(t);return i=i instanceof vy?this.h0(i):this.o0(i),i.serialize().join()}h0(t){const i=t.timescale,s=Zi(mh.fromNumber(t.earliestPresentationTime,!0),i,this.Y$);if(0!==s.getHighBits())return this.o0(function(t){return new _y(t.referenceId,t.timescale,mh.fromNumber(t.earliestPresentationTime,!0),mh.fromNumber(t.firstOffset,!0),t.references,t.flags)}(t));t.timescale=this.Y$,t.earliestPresentationTime=s.toInt();for(const s of t.references)s.subsegmentDuration=qD(s.subsegmentDuration,i,this.Y$);return t}o0(t){const i=t.timescale;t.timescale=this.Y$,t.earliestPresentationTime=Zi(t.earliestPresentationTime,i,this.Y$);for(const s of t.references)s.subsegmentDuration=qD(s.subsegmentDuration,i,this.Y$);return t}F$(t){const i=xy(t),s=i.getSize();for(const t of i.boxes)t instanceof hy&&this.a0(t);const e=i.getSize();if(e!==s){const t=e-s;for(const s of i.boxes)s instanceof hy&&zD(s,t)}return i.serialize().join()}a0(t){let i;for(let s=0;s<t.boxes.length;s++){const e=t.boxes[s];e instanceof sy?(i=this.U$(e.trackId),this.u0(e,i)):e instanceof ty?t.boxes[s]=this.c0(e,i):e instanceof ml?t.boxes[s]=this.d0(e,i):e instanceof ny&&this.l0(e,i)}}u0(t,i){void 0!==t.defaultSampleDuration&&(t.defaultSampleDuration=qD(t.defaultSampleDuration,i,this.Y$))}c0(t,i){const s=Zi(mh.fromNumber(t.baseMediaDecodeTime,!0),i,this.Y$);return 0!==s.getHighBits()?this.d0(function(t){return new ml(mh.fromNumber(t.baseMediaDecodeTime,!0),t.flags)}(t),i):(t.baseMediaDecodeTime=s.toInt(),t)}d0(t,i){return t.baseMediaDecodeTime=Zi(t.baseMediaDecodeTime,i,this.Y$),t}l0(t,i){let s=0,e=0;for(const n of t.samples){if(void 0!==n.duration){e+=n.duration;const t=qD(e,i,this.Y$);n.duration=t-s,s=t}void 0!==n.compositionTimeOffset&&(n.compositionTimeOffset=KD(n.compositionTimeOffset,i,this.Y$))}}constructor(t){super(),this.qQ=void 0,this.Y$=void 0,this.W$=void 0,this.G$=Zs(),this.Y$=t}};function KD(t,i,s){return mh.fromInt(t,!1).multiply(s).divide(i).toNumber()}function qD(t,i,s){return mh.fromInt(t,!0).multiply(s).divide(i).toNumber()}function Zi(t,i,s){return jt._F(t).VF(jt.gF(s,!0)).XF(jt.gF(i,!0)).xF()}var jD=class{f0(t){return t.pipeThrough(new Sa(this.v0))}constructor(t){this.v0=void 0,this.v0=new YD(t)}};r(),r();var QD=function(t){return t[t._0=64]="_0",t[t.g0=103]="g0",t[t.m0=107]="m0",t}({});function JD(t,i,s){const e=nh(t,i);if(e!==s)throw new g("Expected descriptor with tag "+s+", but found "+e)}function $D(t,i){JD(t,i,3);const s=tB(t,i),e=i.ac+s,n=Us(t,i),r=nh(t,i),h=!!(64&r),o=!!(32&r),a=31&r;let u,c,d;if(!!(128&r)&&(u=Us(t,i)),h){c=il(t,i,nh(t,i))}o&&(d=il(t,i,2));const l=function(t,i){JD(t,i,4);const s=tB(t,i),e=i.ac+s,n=nh(t,i),r=nh(t,i),h=r>>2,o=!!(2&r),a=Zm(t,i,3),u=ds(t,i),c=ds(t,i);let d;if(i.ac<e){const s=function(t,i){return t.getUint8(i.ac)}(t,i);5===s&&(d=function(t,i){JD(t,i,5);const s=tB(t,i),e=Et(t,i,s);return{p0:5,w0:e}}(t,i))}return i.By(e),{p0:4,y0:n,b0:h,A0:o,S0:a,T0:u,k0:c,E0:d}}(t,i);return i.By(e),{p0:3,o:n,R0:u,Yu:c,x0:a,I0:d,P0:l}}function tB(t,i){let s=0;for(let e=0;e<4;e++){const e=nh(t,i);if(s=s<<7|127&e,!(128&e))break}return s}function iB(t,i){const s=nh(t,i),e=nh(t,i),n=nh(t,i),r=nh(t,i),h=3&nh(t,i),o=31&nh(t,i),a=[];for(let s=0;s<o;s++){const s=Us(t,i);a.push(Et(t,i,s))}const u=nh(t,i),c=[];for(let s=0;s<u;s++){const s=Us(t,i);c.push(Et(t,i,s))}return{C0:s,N0:e,D0:n,B0:r,M0:h,L0:a,O0:c}}function Xu(t,i,s){if(s&&i.byte>=s)return;const e=t.Uy(i.byte);return i.byte+=1,e}function sB(t,i){return function(t,i,s){let e=0,n=s;for(;n>0;)n-=1,e=256*e+Xu(t,i);return e}(t,i,2)}r(),r(),r(),r(),r(),r();var eB=class t{F0(t){this.V0=this.V0.concat(t.V0),this.W0+=t.V}U0(t,i,s){const e=this.W0,n=s-i;n>0&&(this.V0.push({G0:i,X0:s,Z0:n,H0:e,z0:t}),this.W0+=n)}Uy(t){for(const i of this.V0)if(i.H0<=t&&t<i.H0+i.Z0)return i.z0[t+i.G0-i.H0]}Y0(t,i){let s=i;for(const i of this.V0){const e=i.X0;for(let n=i.G0;n<e;n+=1,s+=1)t[s]=i.z0[n]}return s}get V(){return this.W0}set V(t){const i=this.V0;let s=this.W0-t;if(!(t>=this.W0))if(this.W0=t,0!==t)for(let t=i.length-1;t>=0;t-=1){const e=i[t];if(s<=e.Z0)return e.X0-=s,e.Z0-=s,void(i.length!==t+1&&(i.length=t+1));s-=e.Z0}else i.length=0}get hk(){const t=new Array(this.W0);let i=0;for(const s of this.V0){const e=s.X0;for(let n=s.G0;n<e;n+=1,i+=1)t[i]=s.z0[n]}return t}K0(){const t=new j(this.W0);let i=0;for(const s of this.V0){const e=s.X0;for(let n=s.G0;n<e;n+=1,i+=1)t[i]=s.z0[n]}return t}My(i){const s=new t;for(const t of this.V0)s.U0(t.z0,t.G0,t.X0);return s.NV=i||Jr({},this.NV),s}constructor(){this.W0=0,this.V0=[],this.NV={}}};r();var nB=[128,64,32,16,8,4,2,1];function Ua(t,i){const s=_.floor(i.bit/8),e=0===(t.Uy(s)&nB[i.bit%8])?0:1;return i.bit+=1,e}function rB(t,i,s){let e=0,n=s;for(;n>0;)n-=1,e=2*e+Ua(t,i);return e}function V(t,i){let s=0;for(;0===Ua(t,i)&&s<32;)s+=1;return rB(t,i,s)+2**s-1}function hB(t,i){const s=V(t,i);return 1&s?_.floor((s+1)/2):-_.floor(s/2)}function oB(t,i){const s=[],e={byte:1};let n;do{s.push(uB(t,i,e)),n=i.Uy(e.byte)}while(void 0!==n&&128!==n);return s}function aB(t,i){let s,e=0;do{s=Xu(t,i),e+=s}while(255===s);return e}function uB(t,i,s){const e=aB(i,s),n=aB(i,s),r=s.byte,h=r+n;return s.byte=h,{q0:t,j0:e,Q0:n,J0:r,$0:h,t1:i}}var cB=function(t){return t[t.i1=1]="i1",t[t.s1=2]="s1",t[t.e1=3]="e1",t[t.n1=4]="n1",t[t.h1=5]="h1",t[t.o1=6]="o1",t[t.a1=7]="a1",t[t.u1=8]="u1",t[t.c1=9]="c1",t}({}),dB=[void 0,[1,1],[12,11],[10,11],[16,11],[40,33],[24,11],[20,11],[32,11],[80,33],[18,11],[15,11],[64,33],[160,99],[4,3],[3,2],[2,1]];function lB(t,i,s){let e=8,n=8;for(let r=0;r<s;r+=1){if(0!==n){n=(e+hB(t,i)+256)%256}e=0===n?e:n}}var fB=class{d1(){const t=this.l1;let i=_.max(0,this.v1+t.length-2);const s=this._1,e=s.V;let n=0;for(;i<e;i+=1){const e=s.Uy(i);0===e?n+=1:(3===e&&n>=2&&t.push(i),n=0)}this.v1=i-t.length}g1(t){const i=this.l1;let s=t;for(const t of i){if(!(t<=s))return s;s+=1}return s}Uy(t){if(!(t>this._1.V))return t>this.v1&&this.d1(),this._1.Uy(this.g1(t))}constructor(t){this._1=void 0,this.l1=[],this.v1=0,this._1=t}};function vB(t){const i=new fB(t);let s,e,n,r,h,o,a=0,u=0,c=0,d=0;const l=i.Uy(1),f={bit:32};if(V(i,f),100===l||110===l||122===l||144===l){const t=V(i,f);3===t&&(s=Ua(i,f)),V(i,f),V(i,f),Ua(i,f);if(1===Ua(i,f))for(let s=0;s<(3!==t?8:12);s+=1){1===Ua(i,f)&&lB(i,f,s<6?16:64)}}const v=V(i,f),g=V(i,f);if(0===g)V(i,f);else if(1===g){Ua(i,f),hB(i,f),hB(i,f);const t=V(i,f);for(let s=0;s<t;s+=1)hB(i,f)}V(i,f),Ua(i,f);const m=V(i,f),p=V(i,f),w=Ua(i,f);0===w&&Ua(i,f),Ua(i,f);1===Ua(i,f)&&(a=V(i,f),u=V(i,f),c=V(i,f),d=V(i,f));if(1===Ua(i,f)){if(1===Ua(i,f)){const t=rB(i,f,8);if(255===t)e=rB(i,f,16),n=rB(i,f,16);else{const i=dB[t];i&&(e=i[0],n=i[1])}}1===Ua(i,f)&&Ua(i,f);if(1===Ua(i,f)){rB(i,f,3),Ua(i,f);1===Ua(i,f)&&(rB(i,f,8),rB(i,f,8),rB(i,f,8))}1===Ua(i,f)&&(V(i,f),V(i,f)),r=Ua(i,f),1===r&&(h=rB(i,f,32),o=rB(i,f,32),Ua(i,f))}return{width:_.floor(16*(m+1)-2*a-2*u),height:_.floor((2-w)*(p+1)*16-2*c-2*d),IB:e,PB:n,m1:r?o/(2*h):void 0,w1:s,b1:v}}function _B(t){const i=uT(Co.AN(t),Ci.LP);if(!i)return;const s=i._N.UN,e=[];for(const t of i.Z){const i=t._N.QN,s=t.YN._N.UN;let o,a,u;for(const i of t.YN.nD.oD.uD.dD){const t=gB(i);var n,r,h;if(t)o=null!=(n=t.A1)?n:o,a=null!=(r=t.S1)?r:a,u=null!=(h=t.T1)?h:u}e.push({QN:i,UN:s,A1:o,S1:a,T1:u})}return{UN:s,Z:e}}function gB(t){let i,s,e;if(t.Kp===Ci.jP){var n;const s=iB(xh(t.YD.hk),new J);i=function(t){return"avc1."+mB(t.N0,2)+mB(t.D0,2)+mB(t.B0,2)}(s),e=null==(n=function(t){if(0===t.L0.length)return;const i=t.L0[0],s=new eB;return s.U0(i,0,i.byteLength),vB(s)}(s))?void 0:n.m1}else if(t.Kp===Ci.JP||t.Kp===Ci.$P){const s=function(t,i){const s=i.Fy(),e=Ni(t,s,8),n=Ni(t,s,2),r=Ni(t,s,1),h=Ni(t,s,5),o=Ni(t,s,32),a=[];for(let i=0;i<6;i++)a.push(Ni(t,s,8));const u=Ni(t,s,8);s.Dy(4);const c=Ni(t,s,12);s.Dy(6);const d=Ni(t,s,2);s.Dy(6);const l=Ni(t,s,2);s.Dy(5);const f=Ni(t,s,3);s.Dy(5);const v=Ni(t,s,3),_=Ni(t,s,16),g=Ni(t,s,2),m=Ni(t,s,3),p=Ni(t,s,1),w=Ni(t,s,2),y=Ni(t,s,8),b=[];for(let i=0;i<y;i++){const i=Ni(t,s,1);s.Dy(1);const e=Ni(t,s,6),n=Ni(t,s,16),r=[];for(let i=0;i<n;i++){const i=Ni(t,s,16),e=Et(t,new J(s.ac>>3),i);s.Dy(8*i),r.push({E1:i,R1:e})}b.push({I1:i,P1:e,C1:n,N1:r})}return{C0:e,D1:n,B1:r,M1:h,L1:a,O1:u,F1:c,V1:d,W1:o,U1:l,G1:f,X1:v,Z1:_,H1:m,z1:p,Y1:g,M0:w,K1:y,q1:b}}(xh(t.QD.hk),new J);i=function(t,i){let s=t.toString()+".";switch(i.D1){case 0:break;case 1:s+="A";break;case 2:s+="B";break;case 3:s+="C";break;default:return}switch(s+=i.M1.toString()+".",s+=function(t){let i=t;return i=i>>>1&1431655765|(1431655765&i)<<1,i=i>>>2&858993459|(858993459&i)<<2,i=i>>>4&252645135|(252645135&i)<<4,i=i>>>8&16711935|(16711935&i)<<8,i=i>>>16|i<<16,i}(i.W1).toString(16)+".",i.B1){case 0:s+="L";break;case 1:s+="H";break;default:return}s+=i.O1.toString();const e=i.L1.reduce((t,i)=>0===t?i:i+1,0);for(let t=0;t<e;t++)s+="."+i.L1[t].toString(16).toUpperCase();return s}(t.Kp,s)}else if(t.Kp===Ci.cC||t.Kp===Ci.dC||t.Kp===Ci.lC||t.Kp===Ci.fC){const s=function(t,i){const s=i.Fy(),e=Ni(t,s,8),n=Ni(t,s,8),r=Ni(t,s,7),h=Ni(t,s,6),o=Boolean(Ni(t,s,1)),a=Boolean(Ni(t,s,1)),u=Boolean(Ni(t,s,1)),c=Ni(t,s,4);return Ni(t,s,28),Ni(t,s,32),Ni(t,s,32),Ni(t,s,32),Ni(t,s,32),{j1:e,Q1:n,J1:r,t2:h,i2:o,s2:a,e2:u,n2:c}}(xh(t.cB.hk),new J);i=function(t,i){const s=t.toString(),e=zo(i.J1.toString(),2,"0"),n=zo(i.t2.toString(),2,"0");return s+"."+e+"."+n}(t.Kp,s)}else if(t.Kp===Ci.iC){const s=function(t,i){const s=i.Fy(),e=Ni(t,s,8);s.Dy(24);const n=Ni(t,s,8),r=Ni(t,s,8),h=Ni(t,s,4),o=Ni(t,s,3),a=Im(t,s),u=Ni(t,s,8),c=Ni(t,s,8),d=Ni(t,s,8),l=Ni(t,s,16),f=new Array(8);for(let i=0;i<l;i++)f[i]=Ni(t,s,8);return{C0:e,J1:n,t2:r,h2:h,o2:o,a2:a,kB:u,EB:c,RB:d,u2:l,c2:f}}(xh(t.$D.hk),new J);i=function(t,i){let s=t.toString()+".";return s+="0"+i.J1+".",s+=zo(""+i.t2,2,"0")+".",s+=zo(""+i.h2,2,"0")+".",s+=zo(""+i.o2,2,"0")+".",s+=zo(""+i.kB,2,"0")+".",s+=zo(""+i.EB,2,"0")+".",s+=zo(""+i.RB,2,"0")+".",s+="0"+i.a2,s}(t.Kp,s)}else if(t.Kp===Ci.eC){const s=function(t,i){const s=i.Fy();s.Dy(1);const e=Ni(t,s,7),n=Ni(t,s,3),r=Ni(t,s,5),h=Im(t,s),o=Im(t,s),a=Im(t,s),u=Im(t,s),c=Im(t,s),d=Im(t,s),l=Ni(t,s,2);s.Dy(3);const f=Im(t,s);let v;return f?v=Ni(t,s,4):s.Dy(4),{yN:e,d2:n,l2:r,f2:h,_2:o,g2:a,m2:u,w2:c,b2:d,A2:l,S2:f,T2:v}}(xh(t.sB.hk),new J);i=function(t,i,s){let e=t.toString()+".";if(e+=i.d2+".",e+=""+zo(""+i.l2,2,"0"),e+=(0===i.f2?"M":"H")+".",e+=(1===i.g2?12:10)+".",e+=(1===i.d2?0:i.m2)+".",e+=""+i.w2+i.b2+(1===i.w2&&1===i.b2?i.A2:"0"),s&&s.TB===nT.ON_SCREEN_COLOURS){const t=s;e+="."+zo(""+t.kB,2,"0")+"."+zo(""+t.EB,2,"0")+"."+zo(""+t.RB,2,"0")+"."+(t.xB?1:0)}return e}(t.Kp,s,t.eB)}else if(t.Kp===Ci.pC){s=function(t){const i=t.P0;switch(i.y0){case QD._0:return function(t){var i;if(!(null==(i=t.E0)?void 0:i.w0))return"mp4a.40";const s=function(t,i){let s=Ni(t,i,5);31===s&&(s=32+Ni(t,i,6));const e=Ni(t,i,4);let n;return 15===e&&(n=Ni(t,i,24)),{E2:s,R2:e,I2:n,P2:Ni(t,i,4)}}(xh(t.E0.w0),new Pm);return"mp4a.40."+s.E2}(i);case QD.g0:return"mp4a.40.2";case QD.m0:return"mp4a.40.34"}}($D(xh(t.VD.hk),new J))}else if(t.Kp===Ci.yC)s="fLaC";else if(t.Kp===Ci.vC)s="ac-3";else{if(t.Kp!==Ci._C)return(t.Kp===Ci.EC||t.Kp===Ci.kC)&&t.hB?gB(t.hB):void 0;s="ec-3"}return{A1:i,S1:s,T1:e}}function mB(t,i){const s=t.toString(16);return zo(s,i,"0")}function pB(t,i){const s=Co.AN(xh(t)),e=function(t,i){let s;for(const n of t.Z){var e;const t=null==(e=n.ZB)?void 0:e.ZB;if(t){const e=n._N.QN,r=me(i.Z,t=>t.QN===e),h=Xa._F(t,r.UN);s&&!h.oF(s)||(s=h)}}return s}(uT(s,Ci.RC),i),n=uT(s,Ci.LC);return{kO:e.tF(),C2:n.hk}}function wB(t){const i=t.CS("codecs");return i?i.split(",").map(t=>t.trim()):[]}function yB(t,i){return lf(t,i,kB)}function bB(t,i){return!("opus"===t)&&!("opus"===i)||t===i}function AB(t,i){const s=SB(t),e=SB(i);if((s||e)&&Zd.Zs.Fm)return!0;const n=s||TB(t),r=e||TB(i);return!n&&!r||t.split(".")[0]===i.split(".")[0]}function SB(t){return/^(ac-3|dac3|ec-3|dec3|ec\+3|ac-4|dac4)/.test(t)}function TB(t){return/^(dvav|dva1|dvhe|dvh1)/.test(t)}function kB(t,i){if(t===i)return!0;const s=t.split("."),e=i.split("."),n=s[0];if(n!==e[0])return!1;if("mp4a"===n){const[,t,i]=s,[,n,r]=e;if(t!==n)return!1;if(Number(i)!==Number(r))return!1}return!0}r(),r(),r();var EB=class extends rl{get N2(){return this.D2}get B2(){return this.M2}constructor(t,i,s,e){super(s),this.D2=void 0,this.M2=void 0,this.L2=void 0,this.D2=t,this.M2=i,this.L2=s}};var RB=As.z_,xB=class extends fr{get Dj(){return this.Gj}set Dj(t){this.Gj=t}get Oj(){return this.Hj}set Oj(t){this.Hj=t}get ga(){return this.O2||this.F2.updating}W2(t,i,s){switch(t.Kp){case Vt.fJ:case Vt.NT:return this.U2(s=>this.G2(t,i,s),s);case Vt.vJ:throw new m("Opaque segments are not supported on web.")}}X2(t,i){switch(t.Kp){case Vt.fJ:return this.U2(i=>this.Z2(t,i),i);case Vt.NT:throw new m("Streaming initialization segments are not supported on web.");case Vt.vJ:throw new m("Opaque initialization segments are not supported on web.")}}async Z2(t,i){this.H2?this.z2=_B(xh(t.hk)):(await this.Y2(t,void 0,i),RB&&(this.K2=!1,this.q2=t))}async G2(t,i,s){RB&&this.K2&&this.q2&&await this.Z2(this.q2,s);try{if(Ko(s),this.H2&&this.z2){const n=await async function(t,i){switch(t.Kp){case Vt.fJ:return t;case Vt.NT:{const s=await Zb(t.hk,i);return Ko(i),{Kp:Vt.fJ,hk:new j(s)}}case Vt.vJ:throw new m("Cannot convert opaque SegmentData to ArraySegmentData.")}}(t,s),r=pB(n.hk,this.z2);var e;t={Kp:Vt.fJ,hk:r.C2},i=Jr({},i,{bV:r.kO+(null!=(e=i.bV)?e:0)})}await this.Y2(t,i,s),this.So(new sh(Ws.dJ))}finally{t.Kp===Vt.NT&&t.hk.cancel(new us).catch(ol)}}async Y2(t,i,s){switch(Ko(s),i&&await this.j2(i),t.Kp){case Vt.fJ:if(this.Q2){const i=this.Q2.f0(Gb(t.hk));return await this.J2(i,s)}return await this.t3(t.hk);case Vt.NT:if(this.Q2){const i=this.Q2.f0(t.hk);return await this.J2(i,s)}return await this.J2(t.hk,s)}}async J2(t,i){const s=this.i3.IR,e=ND(t).getReader();let n=!1;try{for(;;){const t=await $s(e.read(),i);if(t.done){n=!1;break}Ko(i);const s=xu(t.value);n=!0,await this.t3(s)}}catch(t){if(e.cancel(t).catch(ol),n){await this.s3();const t=this.i3.IR.Mn(s.NM());for(let i=0;i<t.V;i++)await this.e3(t.Tn(i),t.An(i))}throw t}}n3(t,i){return this.U2(()=>this.r3(t,i))}async r3(t,i){this.F2.appendWindowStart===t&&this.F2.appendWindowEnd===i||(await this.s3(),this.F2.appendWindowStart=0,this.F2.appendWindowEnd=i,this.F2.appendWindowStart=t)}async j2(t){if(!we(this.F2.timestampOffset,t.bV,.001))try{this.F2.timestampOffset=t.bV}catch(i){await this.s3(),this.F2.timestampOffset=t.bV}}async t3(t){this.F2.appendBuffer(t),this.h3=!0,await this.o3()}a3(t,i,s){return this.U2(s=>this.e3(t,i,s),s)}async e3(t,i,s){Ko(s),this.F2.remove(t,i),await this.o3()}o3(){const t=this.i3.IR;return new Promise((i,s)=>{let e,n=!1;const r=()=>{n=!0},h=()=>{n=!1,e="error"},o=()=>{n=!1,e="aborted"},a=()=>{n=!1,e="sourceclose",u()},u=()=>{c(),n&&!e?(t.ZM(this.i3.IR)||this.So(new sh(Ws.dJ)),i()):s(new m(e))},c=()=>{this.F2.removeEventListener("update",r),this.F2.removeEventListener("error",h),this.F2.removeEventListener("abort",o),this.F2.removeEventListener("updateend",u),this.u3.mn(kD.mJ,a)};this.F2.addEventListener("update",r),this.F2.addEventListener("error",h),this.F2.addEventListener("abort",o),this.F2.addEventListener("updateend",u),As.w_&&As.b_<3&&this.u3.wn(kD.mJ,a)})}d3(){return this.U2(()=>this.s3())}async s3(){if(this.u3.Sx===XB.sE){RB&&(this.K2=!0),this.F2.updating&&(this.O2=!0);try{this.F2.abort()}catch(t){0,this.O2=!1}this.ga&&await this.o3().catch(ol)}}l3(){return"function"==typeof this.F2.changeType&&!As.g_}kJ(t){if(this.f3(),this.u3.Sx===XB.v3)return;var i;this._3=t;const s=null!=(i=this.u3.g3(t.GT))?i:t.GT;if(this.H2=IB(t.GT,this.m3),this.l3()&&this.w3(s)){this.m3=s;const t=this.u3.xJ();this.F2.changeType(""+s+t)}}w3(t){if(eo(this.m3,t))return!1;const i=bl(this.m3),s=bl(t);if(i.Kp!==s.Kp)return!0;return!yB(wB(i),wB(s))||!(As.Bv&&As.v_)}y3(){this.u3.Sx!==XB.Nw||this.b3||this.ga||(this.F2.timestampOffset=this.F2.timestampOffset,this.u3.A3())}async U2(t,i){this.f3();const s=new ui;s.$g(this.S3.jg),i&&s.$g(i);try{this.b3=t(s.jg),await this.b3,this.u3.A3(),this.ga&&await this.o3()}finally{this.b3=void 0,s.Zg()}}f3(){if(this.b3)throw new m("Internal error")}async Zg(){this.Vo(),this.S3.Jg(),this.b3&&(await this.b3.catch(ol),this.b3=void 0),this.F2.removeEventListener("updateend",this.T3),this.F2.removeEventListener("bufferedchange",this.E3)}constructor(t,i,s,e,n){var r;if(super(),this.u3=void 0,this.i3=void 0,this.F2=void 0,this._3=void 0,this.m3=void 0,this.Gj=20,this.Hj=30,this.O2=!1,this.h3=!1,this.b3=void 0,this.S3=new ui,this.Q2=void 0,this.K2=!1,this.q2=void 0,this.H2=!1,this.z2=void 0,this.T3=()=>{this.O2=!1},this.E3=t=>{t.removedRanges&&this.So(new sh(Ws.dJ))},this.u3=i,this.i3=t,this.F2=s,this.F2.addEventListener("updateend",this.T3),this.F2.addEventListener("bufferedchange",this.E3),this._3=e,this.m3=n,this.H2=IB(e.GT,n),null==(r=i.Cd)?void 0:r.Dm){var h;const t=null!=(h=i.Cd.R3)?h:1e5;this.Q2=new jD(t)}}};function IB(t,i){return Qe(t,"audio/mp4")&&Qe(i,"audio/mpeg")}r();var PB=class{get IR(){if(this.x3.Sx===XB.v3)return ZT.tL();let t=ZT.jn(this.F2.buffered).Mn(ZT.iL());const i=this.I3;return void 0!==i&&t.V>0&&t.An(t.V-1)===i&&(t=t.LM(ZT.JM(i))),t}UJ(){return!!this.I3&&this.IR.PM().Cr(this.I3)}P3(){const t=this.IR;this.I3=t.V>0?t.An(t.V-1):0,this.x3.C3()}y3(){this.I3=void 0}constructor(t,i){this.x3=void 0,this.F2=void 0,this.I3=void 0,this.x3=i,this.F2=t}};function CB(t,i,s,e,n,r,h){const o=new PB(n,t),a=new xB(o,t,n,s,r);return new NB(t,i,s,e,o,a,h)}var NB=class extends fr{get IR(){return this.i3.IR}get Cd(){return this.qS}get GT(){return this.ZS}get N3(){return this.D3}get B3(){return this.M3.QJ}get Dj(){return this.L3.Dj}set Dj(t){this.L3.Dj=t}get Oj(){return this.L3.Oj}set Oj(t){this.L3.Oj=t}get ga(){return this.L3.ga}UJ(){return this.i3.UJ()}P3(){this.i3.P3()}y3(){this.i3.y3(),this.L3.y3()}O3(t,i){this.M3.$J(t,i)}F3(t,i){this.M3.t$(t,i)}V3(){return this.L3.d3()}W2(t,i,s){return this.L3.W2(t,i,s)}X2(t,i,s){return this.L3.X2(t,s)}n3(t,i){return As.w_&&As.b_<3?this.L3.n3(t,1/0):this.L3.n3(t,i)}async vS(t,i,s){this.F3(t,i);const e=this.IR;await this.L3.a3(t,i,s);const n=0!==e.V&&0===this.IR.V;(As.rg||As.S_)&&n&&this.SL.By(this.SL.OR)}SJ(t){const i=t.GT;if(this.ZS===i)return!0;const s=this.W3.get(i);if(void 0!==s)return s;const e=this.U3(t);return this.W3.set(i,e),e}U3(t){const i=this.u3.g3(t.GT);if(void 0===i)return!1;const s=bl(this.ZS),e=bl(i),n=wB(s),r=wB(e);if(this.L3.l3()){if(!function(t,i){return lf(t,i,AB)}(n,r))return!1;if(As.og&&!function(t,i){return lf(t,i,bB)}(n,r))return!1}else{if(s.Kp!==e.Kp)return!1;if(!yB(n,r))return!1}return!0}async kJ(t){const i=t.GT;this.ZS!==i&&(this.W3.clear(),this.L3.kJ(t),this.ZS=i),this.qS=t,this.u3.G3()}async Zg(){this.W3.clear(),this.Vo(),this.M3.kn();try{this.L3.mn(Ws.dJ,this.Rs),await this.L3.Zg()}catch(t){}}constructor(t,i,s,e,n,r,h){super(),this.u3=void 0,this.qS=void 0,this.D3=void 0,this.SL=void 0,this.ZS=void 0,this.M3=void 0,this.i3=void 0,this.L3=void 0,this.W3=Se(),this.u3=t,this.qS=s,this.ZS=s.GT,this.D3=e,this.SL=i,this.i3=n,this.L3=r,this.M3=h,this.L3.wn(Ws.dJ,this.Rs)}};r();var DB=class{X3(){let t=this.Tn,i=this.An;if(this.Z3||this.H3){const s=.001*(Zd.Mg()-this.z3);this.Z3&&(t+=s),this.H3&&(i+=s)}return ZT.$M(t,i)}constructor(t,i,s=!1,e=!1){this.Tn=void 0,this.An=void 0,this.Z3=void 0,this.H3=void 0,this.z3=void 0,this.Tn=t,this.An=i,this.Z3=s,this.H3=e,this.z3=Zd.Mg()}};function BB(t){const i=[];if(t.Y3&&i.push(t.Y3.IR),t.K3&&i.push(t.K3.IR),0===i.length)return ZT.tL();let s=0;for(const t of i)t.V>0&&(s=_.max(s,t.An(t.V-1)));const e=t.UJ;let n=new ZT([0,s],[!0,e]);for(let t of i)e&&t.V>0&&(t=t.LM(new ZT([t.An(t.V-1),s],[!0,!0]))),n=n.Mn(t);return n}function MB(t,i,s){const e=t.IR;let n,r=e.VM(i);if(r>=0){if(!(r+1<e.V))return Promise.resolve();n=e.Tn(r+1)}else{if(r=e.KM(i),!(r>=0))return Promise.resolve();n=e.Tn(r)}return t.vS(n,1/0,s)}function LB(t,i,s){if(!t.Cr(i)){const e=t.VM(i,s);if(e>=0){const s=t.Tn(e);if(i<s)return s}}return i}r(),r(),r(),r();var OB=.5,FB=[d.uo,d.zw,d.Jw,d.Qw,d.Ow,d.Vw,d.Nw,d.Kw,Vo.bI,sa.ma],VB=class{q3(t){this.j3.push(t),t.wn(ID.KJ,this.Q3)}get QJ(){return this.j3.reduce((t,i)=>t.LM(i.QJ),ZT.tL())}kn(){this.J3(),this.t5.mn(Vo.bI,this.i5),this.SL.mn(d.Yw,this.i5),this.SL.mn(FB,this.s5),this.j3.forEach(t=>t.mn(ID.KJ,this.Q3)),this.e5(),this.n5=!0}HJ(t){if(this.SL.GR)return!1;if(0!==this.r5)return!1;const i=this.i3.IR,s=i.VM(t);if(s>=0&&t+OB<i.An(s))return!1;const e=s>=0?s+1:i.KM(t);if(e<0||e>=i.V)return!1;const n=i.Tn(e);if(ZT.$M(t,n).FM(this.QJ).QM>1)return!1;if(0===t&&!this.SL.Rx)return this.h5(t,n,2e3),!0;if(Zd.lR)return this.h5(t,n,250),!0;return!(_.abs(n-t)<=.001)&&(this.o5(n),!0)}h5(t,i,s){this.e5(),this.a5=t,this.SL.wn(d.Jw,this.u5),this.r5=Zd.Og(()=>{this.a5===this.SL.OR&&this.o5(i),this.e5()},s)}e5(){0!==this.r5&&(this.SL.mn(d.Jw,this.u5),Zd.Lg(this.r5),this.r5=0)}o5(t){this.SL.By(t,!1,!0)}c5(){0!==this.d5&&(Zd.Lg(this.d5),this.d5=0),this.SL.mn(d.vy,this.ad)}l5(){this.n5||0===this.f5&&(this.c5(),this.f5=Zd._p(this.v5,250))}J3(){0!==this.f5&&(Zd.gp(this.f5),this.f5=0),this.c5(),this.SL.Rx||(this._5=0)}g5(){return!this.SL.ux&&(!this.SL.Rx||this.m5())&&0!==this.SL.vx&&!this.SL.GR&&!this.SL.lt&&(this.p5()||this.t5.Sx>=pi.UL)}m5(){return!1}p5(){const t=this.SL.OR,i=this.i3.IR,s=i.VM(t);return-1!==s&&i.An(s)>t+OB}w5(t,i){const s=i.VM(t);return s>-1?i.An(s):t}constructor(t,i,s,e){this.i3=void 0,this.t5=void 0,this.SL=void 0,this.n5=void 0,this.j3=void 0,this.r5=void 0,this.d5=void 0,this.y5=void 0,this.a5=void 0,this._5=void 0,this.f5=void 0,this.b5=void 0,this.A5=void 0,this.S5=void 0,this.Q3=void 0,this.i5=void 0,this.ad=void 0,this.u5=void 0,this.s5=void 0,this.v5=void 0,this.i3=t,this.t5=i,this.SL=s,this.n5=!1,this.j3=[],this.r5=0,this.d5=0,this.y5=0,this.a5=0,this._5=0,this.f5=0,this.b5=1,this.Q3=t=>{const i=this.SL.OR,s=t.jJ.Cr(i),e=t.jJ.Cr(i,OB)&&this.SL.Sx<=pi.WL;(s||e)&&this.HJ(i)},this.i5=Wl(t=>{if(this.n5)return;if(this.t5.Sx<=pi.WL){const t=this.SL.OR;this.HJ(t)||this.v5()}else this.e5()},100),this.ad=Wl(t=>{this.l5()},100),this.u5=t=>{t.currentTime!==this.a5&&this.e5()},this.s5=()=>{this.g5()?0===this.f5&&(this.SL.wn(d.vy,this.ad),this.d5=Zd.Og(()=>{this.l5()},3500)):this.J3()},this.v5=()=>{const t=this.y5,i=this._5,s=this.SL.OR,e=Zd.Mg(),n=this.i3.IR;if(t!==s)return this.y5=s,this._5=e,this.b5=1,void(this.A5=Zd.vR?2e3:1e3);if(this.g5()&&0!==n.V&&i>0&&e>i+this.A5){let t;const i=this.QJ.PM().FM(n),e=i.YM(s);if(-1!==e){const n=i.Tn(e);if(n-s<1||this.m5()){const s=i.An(e);0,t=s}}var r;if(!t)t=null==(r=this.S5)?void 0:r.determineStallJumpTarget(),t&&t!==s||(t=s+.01*this.b5,n.Cr(t)||(t=this.w5(s,n)));0,this.y5=t,this.b5++,this.A5=_.min(2*this.A5,1e4),this.o5(t)}},this.t5.wn(Vo.bI,this.i5),this.SL.wn(d.Yw,this.i5),this.SL.wn(FB,this.s5),this.S5=e,this.A5=Zd.vR?2e3:1e3}},WB=class extends VB{m5(){if(!As.S_||!this.SL.Rx)return!1;const t=this.SL.OR,i=this.i3.IR,s=this.QJ.PM().FM(i),e=s.YM(t);if(-1===e)return!1;return s.Tn(e)-t<=3e3}},UB=As.B_||As.L_,GB=As.G_||As.z_||As.ru,XB=function(t){return t.v3="closed",t.sE="open",t.Nw="ended",t}({}),ZB=class extends ED{get Y3(){return this.T5}get K3(){return this.k5}get ct(){if(void 0!==this.E5)return this.E5;if(void 0!==this.R5)return this.R5;const t=this.eX.duration;return t===ru?1/0:t}x5(t){if(t<0)throw new m("Invalid duration");this.I5()?this.P5(t):this.E5=t}P5(t){const i=t===1/0;if(i&&this.eX.setLiveSeekableRange){const t=2**39;this.eX.setLiveSeekableRange(0,t)}S(t)?(this.eX.duration=ru,this.R5=NaN):(this.eX.duration=i?GB?1/0:ru:t,this.R5=void 0),this.E5=void 0}get IR(){return UB?BB(this):function(t,i){let s=i;return s.V>0&&t.UJ&&(s=s.LM(ZT.JM(s.An(s.V-1)))),s}(this,ZT.jn(this.vT.buffered))}get GJ(){var t;return null==(t=this.T5)?void 0:t.IR}get XJ(){var t;return null==(t=this.k5)?void 0:t.IR}get kx(){return this.C5.X3().Mn(new ZT([0,this.ct],[!0,!0]))}N5(t,i,s,e){this.C5=new DB(t,i,Boolean(s),Boolean(e))}get UJ(){return(!this.T5||this.T5.UJ())&&(!this.k5||this.k5.UJ())}get Sx(){return this.eX.readyState}async Fj(){const t=this.qS,i=me(t.D5,t=>I(t.GT)),s=me(t.D5,t=>rt(t.GT));this.vT.disableRemotePlayback=!0,await this.B5();const e=this.xJ();if(i){const t=new CD;var n;this.M5.q3(t);const s=null!=(n=this.g3(i.GT))?n:i.GT;this.L5=this.eX.addSourceBuffer(""+s+e),this.T5=CB(this,this.SL,i,Mo.Ck,this.L5,s,t),this.T5.wn(Ws.dJ,this.E3)}if(s){const t=new CD;var r;this.M5.q3(t);const i=null!=(r=this.g3(s.GT))?r:s.GT;this.O5=this.eX.addSourceBuffer(""+i+e),this.k5=CB(this,this.SL,s,Mo.Nk,this.O5,i,t),this.k5.wn(Ws.dJ,this.E3)}this.EJ.Un(this,t)}async B5(){await super.FJ(this.eX),"open"!==this.Sx&&await UA(this.eX,"sourceopen")}I5(){if("open"!==this.Sx)return!1;const t=this.T5&&this.T5.ga,i=this.k5&&this.k5.ga;return!(t||i)}P3(){this.F5=!0,this.T5&&this.T5.P3(),this.k5&&this.k5.P3(),this.F5=!1,this.V5()}y3(){this.T5&&this.T5.y3(),this.k5&&this.k5.y3()}SJ(t){const i=me(t.D5,t=>I(t.GT)),s=me(t.D5,t=>rt(t.GT));if(this.T5){if(!i)return!1;if(!this.T5.SJ(i))return!1}else if(i)return!1;if(this.k5){if(!s)return!1;if(!this.k5.SJ(s))return!1}else if(s)return!1;return!!super.SJ(t)}async kJ(t){const i=me(t.D5,t=>I(t.GT)),s=me(t.D5,t=>rt(t.GT)),e=[];this.T5&&e.push(this.T5.kJ(i)),this.k5&&e.push(this.k5.kJ(s)),await Promise.all(e),await super.kJ(t)}RJ(t){super.RJ(t)}async Zg(){if(this.eX.removeEventListener("sourceclose",this.W5),As.S_&&await this.WJ(),this.T5){if(await this.T5.Zg(),this.T5=void 0,dm()&&(As.S_||As.w_))try{this.eX.removeSourceBuffer(this.L5)}catch(t){}this.L5=void 0}if(this.k5){if(await this.k5.Zg(),this.k5=void 0,dm()&&(As.S_||As.w_))try{this.eX.removeSourceBuffer(this.O5)}catch(t){}this.O5=void 0}this.vT.src&&URL.revokeObjectURL(this.vT.src),this.vT.disableRemotePlayback=!1,this.SL.mn([d.vy,d.Jw,d.Ow],this.bd),this.M5.kn(),As.w_&&await this.WJ(),await super.Zg()}G3(){const t=this.qS,i=t.D5.map(t=>I(t.GT)&&this.T5?this.T5.Cd:rt(t.GT)&&this.k5?this.k5.Cd:t);this.qS=Jr({},t,{D5:i})}C3(){this.F5||this.V5()}get U5(){if(!this.UJ)return!1;const t=this.IR;return 0!==t.V&&t.Tn(t.V-1)<=this.SL.OR}V5(){this.U5&&this.I5()&&(this.eX.endOfStream(),this.E5=void 0,this.R5=void 0,this.So(new sh(kD._J)),this.SL.E3())}A3(){this.I5()&&(this.UJ?this.V5():void 0!==this.E5&&this.P5(this.E5))}HJ(t){return this.M5.HJ(t)}zJ(){return!0}g3(t){return HB(this.G5,t)}static YJ(t){const i=Au(t.X5);if(void 0===i)return!1;if("function"!=typeof i.isTypeSupported)return!1;const s=new fv(t.X5);for(const i of t.D5)if(void 0===HB(s,i.GT))return!1;return!0}constructor(t,i,s,e,n,r=new fv(t.X5),h,o){super(t,i,e,n,o),this.G5=void 0,this.T5=void 0,this.L5=void 0,this.k5=void 0,this.O5=void 0,this.C5=new DB(0,1/0),this.eX=void 0,this.E5=void 0,this.R5=void 0,this.M5=void 0,this.F5=!1,this.W5=()=>{this.So(new sh(kD.mJ))},this.Z5=()=>{this.So(new sh(kD.wJ))},this.bd=()=>{this.V5()},this.E3=()=>{this.SL.E3()},this.G5=r,this.eX=this.G5.Xm(),this.eX.addEventListener("sourceclose",this.W5),this.eX.addEventListener("sourceopen",this.Z5),this.SL.wn([d.vy,d.Jw,d.Ow],this.bd),this.M5=new WB(this,s,this.SL,h)}};function HB(t,i){const s=bl(i),e=wB(s),n="audio/mp4"===s.Kp,r=n&&1===e.length&&"mp4a.40.34"===e[0];if(t.Hm(i)&&(!r||!As.z_))return i;if(r){const i=['audio/mp4; codecs="mp3"',"audio/mpeg"];for(const s of i)if(t.Hm(s))return s}if(n&&1===e.length&&"flac"===e[0].toLowerCase()){const s=["flac","fLaC","FLAC"];for(const e of s){const s='audio/mp4; codecs="'+e+'"';if(t.Hm(i))return s}}}r(),r();var Br=class extends sh{constructor(t){super(d.Ow),this.currentTime=void 0,this.currentTime=t}},zB=[d._y,d.Kw,d.Jw,d.Ow,d.uo,d.zw],YB=class extends fr{get OR(){return this.mZ}get H5(){return this.z5}get Y5(){return this.K5}get ct(){return this.qb}get GR(){return this.q5}get ux(){return this.yZ}get Sx(){return this.j5}get Rx(){return this.pZ}get ix(){return this.wZ}set ix(t){this.ix!==t&&(this.wZ=t,this.So(new q(this.OR,this.Ox)))}get vx(){return this.bZ}set vx(t){this.vx!==t&&(this.bZ=t,this.So(new Fs(this.OR,this.vx)))}get Ox(){return this.oA}set Ox(t){this.Ox!==t&&(this.oA=t,this.So(new q(this.OR,this.Ox)))}By(t,i,s){this.mZ!==t&&(this.mZ=t,this.z5=i,s&&!this.pZ?(this.K5=!0,this.So(new Br(this.OR))):(this.K5=!1,this.pZ=!0,this.So(new ul(this.OR))))}zx(){this.yZ||(this.yZ=!0,this.So(new Pi(this.OR)))}Yx(){this.yZ&&(this.yZ=!1,this.So(new Ts(this.OR)))}Zg(){this.Vo()}constructor(t,i,s,e,n,r,h,o,a,u,c){super(),this.mZ=void 0,this.qb=void 0,this.q5=void 0,this.yZ=void 0,this.pZ=void 0,this.wZ=void 0,this.bZ=void 0,this.oA=void 0,this.j5=void 0,this.z5=void 0,this.K5=void 0,this.mZ=t,this.qb=i,this.q5=s,this.yZ=e,this.pZ=n,this.wZ=r,this.bZ=h,this.oA=o,this.j5=a,this.z5=u,this.K5=c}};function KB(t){return new YB(t.OR,t.ct,t.GR,t.ux,t.Rx,t.ix,t.vx,t.Ox,t.Sx,!1,t.Y5)}function qB(t,i){i.ct===t.ct||S(i.ct)&&S(t.ct)||t.So(new ur(t.ct)),t.ix=i.ix,t.Ox=i.Ox,t.vx=i.vx,i.ux?t.zx():t.Yx().catch(ol),i.OR!==t.OR||i.Sx>pi.VL&&t.Sx===pi.VL?t.By(i.OR,i.H5,i.Y5):!i.Rx&&t.Rx?t.So(new ul(t.OR)):i.Rx&&!t.Rx&&t.Sx>=pi.WL&&t.So(new Wi(t.OR)),!i.GR&&t.GR&&t.So(new Be(t.OR))}r(),r();var jB=class extends fr{get Sx(){return this.Tx()}Q5(t){this.xW!==t&&(this.xW=t,this.So(new ca(this.SL.OR,t)))}J5(){this.Q5(this.Tx())}hr(){this.Q5(pi.VL)}Zg(){this.Vo()}constructor(t){super(),this.SL=void 0,this.xW=pi.VL,this.t4=()=>{this.J5()},this.SL=t}};r();var QB=["emptied","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","timeupdate","progress","seeking","seeked"],Uu=class extends jB{Tx(){let t=this.SL.iX.readyState;return t>pi.WL&&this.SL.i4?pi.WL:(this.SL.iX.seeking&&t>pi.Qn&&(t=pi.Qn),t)}Zg(){for(const t of QB)this.SL.iX.removeEventListener(t,this.t4);super.Zg()}constructor(t){super(t);for(const t of QB)this.SL.iX.addEventListener(t,this.t4)}};r();var JB=$,$B=class extends jB{Tx(){if(this.SL.iX.readyState===pi.VL)return pi.VL;const t=this.s4(),i=t?t.An-t.Tn:0;if(!t)return pi.Qn;const s=this.SL.vx;return this.e4()||i>=3*s?pi.GL:i>=3?pi.UL:pi.WL}s4(){const t=this.SL.OR,i=this.SL.IR.MM(.04),s=i.VM(t);if(!(s<0))return{Tn:t,An:i.An(s)}}e4(){if(this.SL.GR)return!0;const t=this.SL.ct,i=this.s4();return!!i&&t-i.An<=JB}Zg(){this.SL.mn([d.Jw,d.Ow],this.t4);for(const t of QB)this.SL.iX.removeEventListener(t,this.t4);super.Zg()}constructor(t){super(t),this.SL.wn([d.Jw,d.Ow],this.t4);for(const t of QB)this.SL.iX.addEventListener(t,this.t4)}};r(),r();var tM=[Vo.bI,d.uo,d.zw,d.Jw,d.Qw,d.Ow,d.Vw,d.Nw,sa.ma],iM=class extends fr{n4(){return(!this.IW.Y5||!this.IW.r4)&&this.IW.Sx<pi.UL}h4(){return!this.IW.Rx&&!(this.IW.ux||this.IW.GR||this.IW.lt||this.n4())}er(){const t=this.o4;this.o4=this.h4(),!t&&this.o4&&this.So(new $n(this.IW.OR))}hr(){this.o4=!1}Zg(){this.Vo(),this.IW.mn(tM,this.Tq)}constructor(t){super(),this.IW=void 0,this.o4=!1,this.Tq=()=>{this.er()},this.IW=t,this.IW.wn(tM,this.Tq)}},sM=class extends iM{h4(){return this.a4&&super.h4()}er(){this.a4&&(this.vT.paused||this.vT.ended||this.vT.error)&&(this.a4=!1),super.er()}hr(){super.hr(),this.a4=!1}Zg(){this.vT.removeEventListener(Vo.SM,this.OW),super.Zg()}constructor(t){super(t),this.vT=void 0,this.a4=!1,this.OW=()=>{this.a4=!0,this.er()},this.vT=t.iX,this.vT.addEventListener(Vo.SM,this.OW)}};r();var eM=class extends sh{constructor(t){super(sa.ma),this.lt=void 0,this.lt=t}};function nM(t,i){return t.kO<=i&&t.EO>i}function An(t,i){return function(t,i){return $l(t.kO,i.kO,fE)}(t,i)||function(t,i){return $l(t.EO,i.EO,fE)}(t,i)}function rM(t,i){return function(t,i){return $l(t.BO,i.BO,fE)}(t,i)||function(t,i){return $l(t.MO,i.MO,fE)}(t,i)}function hM(t,i,s){let e=function(t,i,s,e,n,r,h){void 0===n&&(n=!1),void 0===r&&(r=0),void 0===h&&(h=t.length);let o=r,a=h-1;for(;o<=a;){const h=o+(a-o>>1),u=e(s(t[h]),i);if(u<0)o=h+1;else if(u>0)a=h-1;else{if(!(n&&h>r&&0===e(s(t[h-1]),i)))return h;a=h-1}}return~o}(t,i,so,s,!0);if(e<0)return e;for(;e<t.length&&s(i,t[e])===Ba.rh;e++)if(t[e].XO(i))return e;return-(e+1)}function oM(t,i,s){const e=hM(t,i,s);return e>=0?e:-(e+1)}function aM(t){const i=t.Ht;if(!i)return-1;if(t instanceof Pc)return i.u4(t);const s=i.L;if(!s)return-1;const e=hM(s.CI,t,An);return e>=0?e:-1}function uM(t,i){const s=function(t,i,s){const e=t.length,n=i.length;let r=0,h=0;const o=[],a=[];for(;r<e&&h<n;){const e=t[r],n=i[h];e===n?(r++,h++):s(n,e)<=0?(o.push(n),h++):(a.push(e),r++)}for(;r<e;)a.push(t[r]),r++;for(;h<n;)o.push(i[h]),h++;return{c4:o,d4:a}}(t,i,An);return function(t,i){const s=i.length;for(let e=0;e<s;e++)t[e]=i[e];t.length=s}(t,i),s}r(),r(),r(),r();var cM=class{get CI(){return this.l4}get V(){return this.l4.length}get Ca(){if(this.hu){const t=this.l4;this.hu.length=t.length;for(let i=0;i<t.length;i++)this.hu[i]=t[i].Ca}else this.hu=this.xa();return this.hu}xa(){return function(t){const i=[];for(let s=0;s<t.V;s++)i[s]=t.Uy(s).Ca;return i.item=i=>{const s=0|i,e=t.Uy(s);return e&&e.Ca||void 0},w.defineProperty(i,"constructor",{value:aE}),i}(this)}lO(t){const i=this.l4;for(let s=i.length-1;s>=0;s-=1){const e=i[s];if(t.XO(e))return!0}return!1}Uy(t){return this.l4[t]}constructor(t){this.l4=void 0,this.hu=void 0,this.l4=t}};r();var dM=class extends nn{xa(){return new lM(this.Ht.Ca,this.Sx)}constructor(t,i){super(M.bI),this.Ht=void 0,this.Sx=void 0,this.Ht=t,this.Sx=i}},lM=class extends Hn{constructor(t,i){super("readystatechange"),this.track=void 0,this.readyState=void 0,this.track=t,this.readyState=i}};r();var fM=class extends nn{xa(){return new vM(this.Ht.Ca)}constructor(t){super(M.SI),this.Ht=void 0,this.Ht=t}},vM=class extends Hn{constructor(t){super("typechange"),this.track=void 0,this.track=t}};r();var _M=class extends nn{xa(){return new gM(this.SO.Ca)}constructor(t){super(M.aI),this.SO=void 0,this.SO=t}},gM=class extends Hn{constructor(t){super("addcue"),this.cue=void 0,this.cue=t}};r();var mM=class extends nn{xa(){return new pM(this.SO.Ca)}constructor(t){super(M.cI),this.SO=void 0,this.SO=t}},pM=class extends Hn{constructor(t){super("removecue"),this.cue=void 0,this.cue=t}},wM=class extends fr{get q(){return this.f4}get L(){return this.v4}_4(t){return me(this.v4.CI,i=>i.o===t)}get tW(){return this.g4}set tW(t){this.g4=t}get sP(){return this.m4}get Ca(){return this.hu||(this.hu=this.xa()),this.hu}xa(){return ya(this)}get o(){return this.rS}get qI(){return this._O}get tP(){return this.w4}set tP(t){this.w4=t}get Lt(){return this.y4}get Th(){return this.gO}set Th(t){t!==this.gO&&(this.gO=t,this.So(new nc(this)))}get bs(){return this.jb}get jI(){return this.b4}get Hk(){return this.Yo}set Hk(t){this.A4(t)}A4(t){const i=Vu(t);i!==this.Hk&&(this.Yo=i,i===Z.Nh&&(this.S4.forEach(t=>{t.ro=!1}),Lr(this.S4),this.T4=0),this.So(new Tu(this)))}get Sx(){return this.j5}set Sx(t){this.j5!==t&&(this.j5=t,this.So(new dM(this,this.j5)))}get eP(){return this.E4}set eP(t){this.E4=t}get Kp(){return this.Ym}set Kp(t){this.Ym!==t&&(this.Ym=t,this.So(new fM(this)))}get bV(){return this.HV}set bV(t){this.HV=t}iW(t){if(!t||t.Ht)return;const i=hM(this.R4,t,rM);if(i>=0)return;t.Ht=this;const s=-(i+1);this.R4.splice(s,0,t);const e=oM(this.L.CI,t,An);this.x4(t,e),this.So(new _M(t))}x4(t,i){this.l4.splice(i,0,t),this.I4(i),t.zO=i,i<this.T4&&(this.T4=i)}XV(t){if(!t||t.Ht!==this)return;const i=this.u4(t);if(i<0)return;t.ro=!1;const s=this.S4,e=hM(s,t,An);e>=0&&Lh(s,e);const n=hM(this.R4,t,rM);n>=0&&Lh(this.R4,n),t.Ht=void 0,this.P4(t,i),this.So(new mM(t))}P4(t,i){Lh(this.l4,i),this.I4(i),t.zO=-1,this.T4>i&&--this.T4}FO(t){if(!t||t.Ht!==this)return;const i=this.u4(t);if(i<0)return;this.P4(t,i);const s=oM(this.L.CI,t,An);this.x4(t,s);const e=li(this.S4,i=>i===t);if(e>=0){Lh(this.S4,e);const i=oM(this.S4,t,An);this.S4.splice(i,0,t)}}C4(t,i){const s=this.S4,e=this.l4;let n=this.T4,r=!1,h=1/0;i&&(n=0);for(let i=s.length-1;i>=0;i--){const e=s[i];nM(e,t)?e.EO<h&&(h=e.EO):(r=!0,Lh(s,i))}for(;n<e.length&&e[n].kO<=t;){const i=e[n];nM(i,t)&&(Ft(s,i)||(r=!0,s.push(i)),i.EO<h&&(h=i.EO)),n++}return n<e.length&&e[n].kO<h&&(h=e[n].kO),r&&Gl(s,An),this.T4=n,h}u4(t){return(-1===t.zO||t.zO>=this.N4)&&this.D4(),t.zO}D4(){const t=this.l4;for(let i=this.N4;i<t.length;i++)t[i].zO=i;this.N4=t.length}I4(t){t<this.N4&&(this.N4=_.max(t,0))}iP(t){this.sP||(this.Hk=t)}kn(){this.Vo();const t=this.l4.slice();for(const i of t)i.kn();Lr(this.l4),Lr(this.R4),Lr(this.S4)}constructor(t,i,s,e,n,r,h,o,a){super(),this.hu=void 0,this.rS=void 0,this._O=ai(),this.g4=!1,this.w4=void 0,this.y4=void 0,this.gO=void 0,this.jb=void 0,this.Yo=Z.Nh,this.j5=Ra.NONE,this.E4=void 0,this.Ym=void 0,this.m4=void 0,this.b4=void 0,this.HV=0,this.l4=[],this.R4=[],this.S4=[],this.v4=void 0,this.f4=void 0,this.N4=0,this.T4=0,this.rS=i||"",this.w4=o||"",this.y4=t,this.jb=e||"",this.g4=Boolean(n),this.m4=Boolean(h),this.Ym=r||hr.DEFAULT,this.gO=s||"",this.b4=a||[],this.v4=new cM(this.l4),this.f4=new cM(this.S4)}};r(),r(),r();var yM=class extends se{xa(){return new bM(this.SO.Ca)}constructor(t,i){super(ye.XL,t),this.HF=void 0,this.HF=i}},bM=class extends Ee{constructor(t){super("enter",t)}};r();var kc=class extends se{xa(){return new AM(this.SO.Ca)}constructor(t,i){super(ye.ZL,t),this.HF=void 0,this.HF=i}},AM=class extends Ee{constructor(t){super("exit",t)}};r();var SM=class extends nn{xa(){return new TM(this.SO.Ca)}constructor(t){super(M.vI),this.SO=void 0,this.SO=t}},TM=class extends Hn{constructor(t){super("entercue"),this.cue=void 0,this.cue=t}};r();var kM=class extends nn{xa(){return new EM(this.SO.Ca)}constructor(t){super(M.gI),this.SO=void 0,this.SO=t}},EM=class extends Hn{constructor(t){super("exitcue"),this.cue=void 0,this.cue=t}},RM=class extends ua{get qI(){return this._O}get kO(){var t,i;return this.B4.startTime-(null!=(i=null==(t=this.OO)?void 0:t.bV)?i:0)}set kO(t){var i,s;this.B4.startTime=t+(null!=(s=null==(i=this.OO)?void 0:i.bV)?s:0)}get EO(){var t,i;return this.B4.endTime-(null!=(i=null==(t=this.OO)?void 0:t.bV)?i:0)}set EO(t){var i,s;this.B4.endTime=t+(null!=(s=null==(i=this.OO)?void 0:i.bV)?s:0)}get U(){return this.WO}set U(t){this.WO=t}get UO(){return Boolean(this.B4.pauseOnExit)}set UO(t){this.B4.pauseOnExit=Boolean(t)}get Ht(){return this.OO}set Ht(t){this.OO=t,this.M4()}get o(){return this.B4.id||""}get Ca(){return this.hu||(this.hu=this.xa()),this.hu}xa(){return oE(this)}get ro(){return this.ho}set ro(t){this.ro!==t&&(this.ho=t,t?(this.So(new yM(this,this.kO)),this.OO&&this.OO.So(new SM(this))):(this.So(new kc(this,this.EO)),this.OO&&this.OO.So(new kM(this))))}XO(t){return this===t||_S(this,t)&&vE(this,t)&&this.ZO(t)}M4(){var t,i;const s=null!=(i=this.B4.THEOplayerTimestampOffset)?i:0;var e;const n=null!=(e=null==(t=this.OO)?void 0:t.bV)?e:0;if(s===n)return;const r=n-s;this.B4.startTime+=r,this.B4.endTime+=r,this.B4.THEOplayerTimestampOffset=n}ZO(t){return T(this.U,t.U)}kn(){this.Vo(),this.B4.removeEventListener("enter",this.L4),this.B4.removeEventListener("exit",this.O4)}constructor(t){super(),this.B4=void 0,this.WO=void 0,this.BO=void 0,this.MO=void 0,this._O=void 0,this.OO=void 0,this.hu=void 0,this.ho=!1,this.L4=()=>{this.ro=!0},this.O4=()=>{this.ro=!1},this._O=jk(),this.B4=t,this.BO=t.startTime,this.MO=t.endTime,this.B4.addEventListener("enter",this.L4),this.B4.addEventListener("exit",this.O4)}};r();var xM=class extends nn{xa(){return new IM(this.Ht.Ca)}constructor(t){super(M.pI),this.Ht=void 0,this.Ht=t}},IM=class extends Hn{constructor(t){super("cuechange"),this.track=void 0,this.track=t}};function PM(t){if(!t)return;let i=t.THEOplayerVTTRegion;return i||(i=new CM(t),t.THEOplayerVTTRegion=i),i}r(),r();var CM=class{get F4(){return this.V4}get o(){return this.V4.id||""}get Ti(){return Number(this.V4.width)||0}set Ti(t){this.V4.width=t||0}get YO(){return Number(this.V4.lines)||0}set YO(t){this.V4.lines=t||0}get KO(){return Number(this.V4.regionAnchorX)||0}set KO(t){this.V4.regionAnchorX=t||0}get qO(){return Number(this.V4.regionAnchorY)||0}set qO(t){this.V4.regionAnchorY=t||0}get QO(){return Number(this.V4.viewportAnchorX)||0}set QO(t){this.V4.viewportAnchorX=t||0}get JO(){return Number(this.V4.viewportAnchorY)||0}set JO(t){this.V4.viewportAnchorY=t||0}get jO(){return this.V4.scroll||""}get Ca(){return this.hu||(this.hu=yE(this)),this.hu}constructor(t){this.V4=void 0,this.hu=void 0,this.V4=t}};var NM=class extends RM{get U(){return this.B4.text}set U(t){this.B4.text=t}get Pt(){return this.B4.vertical||""}set Pt(t){this.B4.vertical=t||""}get DO(){return this.B4.snapToLines}set DO(t){this.B4.snapToLines=t}get xO(){return this.B4.line}set xO(t){this.B4.line=t}get Vy(){return Number(this.B4.size)}set Vy(t){this.B4.size=ss(t,0,100)}get Ca(){return this.hu||(this.hu=this.xa()),this.hu}xa(){return uE(this)}ZO(t){return _E(this,t)}constructor(t){super(t)}},DM=class extends NM{get CO(){return PM(this.B4.region)}get IO(){return this.B4.lineAlign||"start"}set IO(t){this.B4.lineAlign=t||"start"}get mo(){return this.B4.position}set mo(t){this.B4.position=t}get PO(){return this.B4.positionAlign||"auto"}set PO(t){this.B4.positionAlign=t||"auto"}get RO(){return this.B4.align||"center"}set RO(t){this.B4.align=t||"center"}constructor(t){super(t)}},BM=class extends NM{get CO(){return PM(this.F4)}get F4(){return function(t,i){if(void 0===i)return;const s=t&&t.regions;return s&&s.getRegionById(i)||void 0}(this.B4.track,this.B4.regionId)}get IO(){return function(t){return"middle"===t?"center":t}(this.B4.lineAlign||"start")}set IO(t){this.B4.lineAlign=function(t){return"center"===t?"middle":t}(t||"start")}get mo(){return this.B4.position}set mo(t){this.B4.position=function(t,i){return hE(t,i)}(t,this.RO)}get PO(){return function(t){return nE[t]}(this.B4.positionAlign||"middle")}set PO(t){this.B4.positionAlign=function(t,i){return eE[rE(t,i)]}(t||"center",this.RO)}get RO(){return function(t){return"middle"===t?"center":t}(this.B4.align||"middle")}set RO(t){this.B4.align=function(t){return"center"===t?"middle":t}(t||"center")}constructor(t){super(t)}};function MM(t,i){return t.U===i.U}function LM(t,i){if(0===i.length)return;const s=i.length-1;if(i[s].kO<t.kO)return void OM(i,s,t.kO);const e=i[0];if(e.kO>t.kO)return void(t.EO=e.kO);const n=hM(i,t,An);if(n>=0)return;const r=-(n+1),h=r-1;if(h>=0){i[h].kO<t.kO&&OM(i,h,t.kO)}if(r<i.length){const s=i[r];t.EO=s.kO}}function OM(t,i,s){const e=t[i].kO;for(let n=i;n>=0&&t[n].kO===e;n--)t[n].EO=s}function FM(t){return oE(t)}r(),r(),r(),r();var VM=class extends RM{get U(){return this.W4}get Ca(){return this.hu||(this.hu=this.xa()),this.hu}xa(){return FM(this)}ZO(t){return MM(this,t)}constructor(t,i){super(t),this.W4=void 0,this.W4=i}};function WM(t){switch(t){case 0:case 1:case 2:case 3:return!0}return!1}function UM(t){switch(t){case 0:return E;case 1:return tp;case 2:return al;case 3:return pr}}function GM(t,i){const s=i.ac,e=t.byteLength,n=re(t);return i.Dy(e-s),Hc(n,s,e).buffer}function XM(t,i){return{id:t||"",data:i instanceof ArrayBuffer?i:void 0}}function ZM(t,i,s){const e=nh(t,i);if(!WM(e))return;const n=UM(e);return{id:s,language:il(t,i,3),description:n(t,i),text:n(t,i)}}function HM(t,i,s){const e=nh(t,i);if(!WM(e))return;const n=UM(e);return{id:s,mimeType:E(t,i),fileName:n(t,i),description:n(t,i),data:GM(t,i)}}function zM(t,i,s){const e=nh(t,i);if(!WM(e))return;const n=UM(e),r=[];for(;i.ac<t.byteLength;)r.push({involvement:n(t,i),involvee:n(t,i)});return{id:s,entries:r}}function YM(t,i,s){const e=nh(t,i);if(!WM(e))return;const n=UM(e),r=il(t,i,3),h=nh(t,i),o=nh(t,i),a=n(t,i);let u=!1;const c=[];for(;i.ac<t.byteLength;){let s;if(1===e){let e=$m(t,i);void 0===e?e=u:u=e,s=al(t,i,e)}else s=n(t,i);if(!s||i.ac+4>t.byteLength)break;c.push({text:s,timestamp:ds(t,i)})}return{id:s,language:r,format:h,contentType:o,description:a,entries:c}}function KM(t,i,s){return{id:s,ownerIdentifier:E(t,i),identifier:GM(t,i)}}function qM(t,i,s){const e=nh(t,i);if(!WM(e))return;const n=UM(e);return{id:s,language:il(t,i,3),description:n(t,i),text:n(t,i)}}function jM(t,i,s){const e=nh(t,i);if(!WM(e))return;return{id:s,text:UM(e)(t,i)}}function QM(t,i,s){return{id:s,url:E(t,i)}}function JM(t,i,s){const e=nh(t,i);if(!WM(e))return;const n=UM(e);return{id:s,description:n(t,i),text:n(t,i)}}function $M(t,i,s){const e=nh(t,i);if(!WM(e))return;return{id:s,description:UM(e)(t,i),url:E(t,i)}}function tL(t,i,s){switch(s){case"COM":return ZM(t,i,s);case"GEO":return HM(t,i,s);case"IPL":return zM(t,i,s);case"PIC":return function(t,i,s){const e=nh(t,i);if(!WM(e))return;const n=UM(e),r=il(t,i,3),h=nh(t,i),o=n(t,i);let a,u;return"--\x3e"===r?(a=r,u=E(t,i)):(a="image/"+r.toLowerCase(),u=GM(t,i)),{id:s,mimeType:a,pictureType:h,description:o,data:u}}(t,i,s);case"SLT":return YM(t,i,s);case"TXX":return JM(t,i,s);case"UFI":return KM(t,i,s);case"ULT":return qM(t,i,s);case"WXX":return $M(t,i,s);default:if("T"===s.charAt(0))return jM(t,i,s);if("W"===s.charAt(0))return QM(t,i,s)}}function iL(t,i,s){switch(s){case"APIC":return function(t,i,s){const e=nh(t,i);if(!WM(e))return;const n=UM(e),r=E(t,i),h=nh(t,i),o=n(t,i);let a;return a="--\x3e"===r?E(t,i):GM(t,i),{id:s,mimeType:r,pictureType:h,description:o,data:a}}(t,i,s);case"COMM":return ZM(t,i,s);case"COMR":return function(t,i,s){const e=nh(t,i);if(!WM(e))return;const n=UM(e),r=E(t,i),h=il(t,i,8),o=E(t,i),a=nh(t,i),u=n(t,i),c=n(t,i);let d,l;return i.ac<t.byteLength&&(d=E(t,i)||"image/",l=GM(t,i)),{id:s,price:r,validUntil:h,contactURL:o,receivedAs:a,nameOfSeller:u,description:c,pictureMimeType:d,sellerLogo:l}}(t,i,s);case"GEOB":return HM(t,i,s);case"IPLS":return zM(t,i,s);case"PRIV":return function(t,i,s){return{id:s,ownerIdentifier:E(t,i),data:GM(t,i)}}(t,i,s);case"POSS":return function(t,i,s){return{id:s,format:nh(t,i),position:ds(t,i)}}(t,i,s);case"SYLT":return YM(t,i,s);case"TXXX":return JM(t,i,s);case"UFID":return KM(t,i,s);case"USER":return function(t,i,s){const e=nh(t,i);if(!WM(e))return;const n=UM(e);return{id:s,language:il(t,i,3),text:n(t,i)}}(t,i,s);case"USLT":return qM(t,i,s);case"WXXX":return $M(t,i,s);case"YMID":case"YTYP":case"YSEQ":case"YDUR":case"YCSP":return jM(t,i,s);default:{const e=s.charAt(0);if("T"===e)return jM(t,i,s);if("W"===e)return QM(t,i,s)}}}r(),r();function sL(t,i){return(127&nh(t,i))<<21|(127&nh(t,i))<<14|(127&nh(t,i))<<7|127&nh(t,i)}function eL(t,i){switch(t){case 4:return{U4:Wm(i,0),G4:Wm(i,1),X4:Wm(i,2),Z4:Wm(i,3)};case 3:return{U4:Wm(i,0),G4:Wm(i,1),X4:Wm(i,2)};case 2:return{U4:Wm(i,0),H4:Wm(i,1)}}}function nL(t,i,s){switch(s.yN){case 3:s.bN.G4&&function(t,i){const s=i.ac,e=ds(t,i)+4,n=32768&Us(t,i);i.By(s+e),n&&ds(t,i)}(t,i);break;case 4:s.bN.G4&&function(t,i){const s=i.ac,e=sL(t,i);i.By(s+e)}(t,i)}}function rL(t,i){if(t.byteLength-i.ac<10)return null;if(73!==nh(t,i)||68!==nh(t,i)||51!==nh(t,i))return null;const s=nh(t,i),e=nh(t,i);if(!function(t){switch(t){case 2:case 3:case 4:return!0}return!1}(s))return null;const n=nh(t,i),r=sL(t,i);return{yN:s,z4:e,bN:eL(s,n),Y4:r}}function hL(t,i,s){switch(s){case 2:return function(t,i){if(i.ac+6>t.byteLength)return;return{o:il(t,i,3),Vy:Zm(t,i,3)}}(t,i);case 3:return function(t,i){if(i.ac+10>t.byteLength)return;const s=il(t,i,4),e=ds(t,i);nh(t,i);const n=nh(t,i);return{o:s,Vy:e,bN:{H4:Wm(n,0),K4:Wm(n,1),groupingIdentity:Wm(n,2)}}}(t,i);case 4:return function(t,i){if(i.ac+10>t.byteLength)return;const s=il(t,i,4),e=sL(t,i);nh(t,i);const n=nh(t,i);return{o:s,Vy:e,bN:{groupingIdentity:Wm(n,1),H4:Wm(n,4),K4:Wm(n,5),U4:Wm(n,6),q4:Wm(n,7)}}}(t,i)}}function oL(t){const i=re(t),s=new j(i.byteLength);let e=0;for(let t=0;t<i.byteLength;t++){const n=i[t];255===n&&t++,s[e]=n,e++}return xh(Hc(s,0,e))}function aL(t,i){const s=i||new J,e=rL(t,s);if(!e)return null;const n=function(t,i,s){const e=[],n=i.ac;let r=wu(t,n,n+s.Y4);const h=new J;switch(i.Dy(s.Y4),s.yN){case 2:case 3:s.bN.U4&&(r=oL(r))}nL(t,i,s);for(;h.ac<r.byteLength;){const t=uL(r,h,s);if(void 0===t)break;e.push(t)}return e}(t,s,e);return{_N:e,j4:n}}function uL(t,i,s){const e=hL(t,i,s.yN);if(void 0===e)return;if(0===e.o.charCodeAt(0)||0===e.Vy)return;const n=i.ac;let r,h,o=wu(t,n,n+e.Vy);switch(i.Dy(e.Vy),s.yN){case 2:{const t=e;h=o,r=tL(h,new J,t.o);break}case 3:{const t=e,i=new J;!function(t,i,s){const e=s.bN;let n,r,h;e.H4&&(n=ds(t,i)),e.K4&&(r=nh(t,i)),e.groupingIdentity&&(h=nh(t,i))}(o,i,t);h=wu(o,i.ac,o.byteLength),r=iL(h,new J,t.o);break}case 4:{const t=e,i=new J;t.bN.U4&&(o=oL(o)),function(t,i,s){const e=s.bN;let n,r,h,o;e.groupingIdentity&&(n=nh(t,i)),e.H4&&(r=ds(t,i)),e.K4&&(h=nh(t,i)),e.q4&&(o=sL(t,i))}(o,i,t);h=wu(o,i.ac,o.byteLength),r=iL(h,new J,t.o);break}}if(!r){const t=tc(re(h));r=XM(e.o,t.buffer)}return r}r();function cL(t){return Y(t)&&"org.id3"===t.type&&Y(t.value)}function dL(t){return function(t,i,s){return jM(t,i,s)}(new DataView(t.data),new J,t.key)}function lL(t){switch(t.key){case"APIC":case"PIC":return function(t){return{id:t.key,mimeType:t.type,pictureType:16,description:t.info,data:t.data}}(t);case"GEOB":case"GEO":return function(t){return{id:t.key,mimeType:t.type,fileName:t.name,description:t.info,data:t.data}}(t);case"PRIV":return function(t){return{id:t.key,ownerIdentifier:t.info,data:t.data}}(t);case"TXXX":case"TXX":return function(t){return{id:t.key,description:t.info,text:t.data}}(t);case"WXXX":case"WXX":return function(t){return{id:t.key,description:t.info,url:t.data}}(t);case"YMID":case"YTYP":case"YSEQ":case"YDUR":case"YCSP":return dL(t);default:const i=t.key.charAt(0);if("T"===i)return function(t){return{id:t.key,text:t.data}}(t);if("W"===i)return function(t){return{id:t.key,url:t.data}}(t)}return function(t){return XM(t.key,t.data)}(t)}r(),r();var fL=class extends fr{get q(){return this.f4}get tW(){return this.Q4?this.Q4.default:void 0}get L(){return this.v4}get Ca(){return this.hu||(this.hu=this.xa()),this.hu}xa(){return ya(this)}get o(){return this.rS||this.vO.id||this.Q4&&this.Q4.id||""}get qI(){return this._O}get tP(){return this.vO.inBandMetadataTrackDispatchType||""}get Lt(){return this.vO.kind||D.OV}get Th(){return this.gO}set Th(t){t!==this.gO&&(this.gO=t,void 0!==this.Q4&&(this.Q4.label=t),this.So(new nc(this)))}get bs(){return this.vO.language||""}get Hk(){return this.Yo}set Hk(t){const i=this.Hk;this.Yo=Vu(t),this.J4();const s=this.Hk;i!==s&&this.So(new Tu(this)),s!==Z.Nh&&this.t6(Ra.LOADING)}get i6(){return Vu(this.vO.mode)}set i6(t){this.vO.mode=t}get mO(){return this.vO}get Sx(){return this.j5}get s6(){return this.Q4?Number(this.Q4.readyState)||Ra.NONE:Ra.LOADED}get eP(){return this.E4}get Kp(){return this.Ym}set Kp(t){this.Ym!==t&&(this.Ym=t,this.So(new fM(this)))}get bV(){return this.HV}set bV(t){if(this.HV!==t){this.HV=t;for(const t of this.l4)t.M4()}}get e6(){return this.n6}set e6(t){this.n6=t,t&&(this.r6=!0,u(()=>{this.r6=!1},50)),this.J4()}iW(t){t.Ht!==this&&(t.Ht=this,this.vO.addCue(t.B4),this.h6())}XV(t){t.Ht===this&&(t.Ht=void 0,this.vO.removeCue(t.B4),this.h6())}_4(t){var i;const s=null==(i=this.vO.cues)?void 0:i.getCueById(t);if(!s)return;const e=vL(s);return e&&uu(e)?e[0]:e}ZV(t){this.o6>=t||(this.o6=t,St(this,t))}J4(){const t=this.Hk;this.e6||t!==Z.Kn?this.i6=t:this.i6=Z.$I}a6(){const t=this.Hk,i=this.i6;t!==i&&(this.e6||t!==Z.Kn||i!==Z.$I)&&("metadata"===this.Lt&&i===Z.Nh?this.Hk=t:this.r6&&i===Z.Nh&&t===Z.Kn?this.i6=t:this.Hk=i)}J5(t){this.j5!==t&&(this.j5=t,this.So(new dM(this,t)))}t6(t){const i=_.max(this.j5,this.s6,t);this.J5(i)}u6(t){let i=vL(t);if(i)return i;if(i=this.c6(t),uu(i))for(const t of i)t.Ht=this;else i.Ht=this;return i}c6(t){const i=this.d6(t);return t.THEOplayerTextTrackCue=i,i}d6(t){return t.endTime<this.o6?[]:cL(t)?(this.Kp=hr.ID3,function(t){let i;try{i=lL(t.value)}catch(t){i=XM("")}return new VM(t,i)}(t)):function(t){return t&&t.data instanceof ArrayBuffer}(t)?(this.Kp=hr.ID3,function(t){const i=[];try{const s=aL(new DataView(t.data));if(s)for(const e of s.j4)i.push(new VM(t,e))}catch(t){}return i}(t)):function(t){return"text"in t}(t)?(this.Kp=hr.WEBVTT,function(t){return"regionId"in t}(t)?new BM(t):new DM(t)):new RM(t)}l6(t){const i=[];if(!t)return i;const s=t.length;for(let n=0;n<s;n++){var e;const s=this.u6(null!=(e=t[n])?e:t.item(n));if(uu(s))for(const t of s)i.push(t);else i.push(s)}return i}f6(){const t=this.l6(this.vO.cues),i=uM(this.l4,t);for(const t of i.d4)t.mn(ye.ZL,this.h6),t.mn(ye.XL,this.h6),this.So(new mM(t));for(const t of i.c4)t.wn(ye.XL,this.h6),t.wn(ye.ZL,this.h6),this.So(new _M(t))}C4(){const t=this.l6(this.vO.activeCues),i=uM(this.S4,t);for(const t of i.d4)t.ro=!1;for(const t of i.c4)t.ro=!0;(i.c4.length||i.d4.length)&&this.So(new xM(this))}iP(t){this.Hk=t}kn(){this.Vo();const t=this.l4.slice();for(const i of t)i.kn();Lr(this.l4),Lr(this.S4),this.vO.removeEventListener("cuechange",this.v6),this.vO.removeEventListener("cuechange",this.h6),this.Q4&&(this.Q4.removeEventListener("load",this._6),this.Q4.removeEventListener("error",this.g6),je(this.Q4))}constructor(t,i,s,e=!0){super(),this.vO=void 0,this.Q4=void 0,this.l4=[],this.S4=[],this.v4=void 0,this.f4=void 0,this._O=void 0,this.rS=void 0,this.gO=void 0,this.Yo=Z.Nh,this.j5=Ra.NONE,this.hu=void 0,this.E4=void 0,this.Ym=hr.DEFAULT,this.r6=!1,this.o6=0,this.HV=0,this.n6=void 0,this.v6=()=>{this.J4(),this.vO.removeEventListener("cuechange",this.v6)},this.h6=()=>{this.Hk!==Z.Nh&&(this.f6(),this.C4(),this.l4.length&&this.t6(Ra.LOADING))},this._6=()=>{this.t6(Ra.LOADED)},this.g6=()=>{this.t6(Ra.ERROR)},this.rS=t||FC(),this.vO=i,this.n6=e,this.vO.addEventListener("cuechange",this.v6),this.vO.addEventListener("cuechange",this.h6),this.Q4=s,this.Q4&&(this.E4=ie(this.Q4.src),this.Q4.addEventListener("load",this._6),this.Q4.addEventListener("error",this.g6)),this._O=ai(),this.gO=i.label||"",this.v4=new cM(this.l4),this.f4=new cM(this.S4),this.Hk=this.i6,ht(()=>{this.h6(),this.t6(Ra.NONE)})}};function vL(t){return null==t?void 0:t.THEOplayerTextTrackCue}r(),r();function _L(t,i){return Mu(t.HF,i.HF)||function(t,i){return t.Ht===i.Ht?vc(aM(t),aM(i)):$R(t.Ht,i.Ht)}(t.SO,i.SO)||function(t,i){return t===i?Ba.rh:t===ye.XL?Ba.Vg:Ba.Fg}(t.type,i.type)}var gL=class{hr(){Lr(this.m6);for(const t of this.Gl.slice())this.it(t);this.p6(),this.w6=0,this.En=0,Lr(this.y6),this.b6=!1,this.A6=!1,this.S6=0}tt(t){Ft(this.Gl,t)||(this.Gl.push(t),t.wn(M.pa,this.T6),t.Hk!==Z.Nh&&this.k6())}it(t){is(this.Gl,t)&&(t.mn(M.pa,this.T6),t.Hk!==Z.Nh&&this.k6())}k6(){const t=this.y6,i=this.Gl.filter(t=>t.Hk!==Z.Nh);this.y6=i;for(const s of t)Ft(i,s)||this.E6(s);for(const s of i)Ft(t,s)||this.R6(s);this.S6=0}R6(t){if(t.wn(M.aI,this.x6),t.wn(M.cI,this.I6),t.wn(M.lI,this.P6),t.L.V>0){for(const i of t.L.CI)this.C6.push(i);this.N6()}}E6(t){if(t.mn(M.aI,this.x6),t.mn(M.cI,this.I6),t.mn(M.lI,this.P6),t.L.V>0){for(const i of t.L.CI)is(this.m6,i),is(this.C6,i);this.N6()}}D6(){this.oa.Rx||this.oa.ux?this.p6():this.N6()}N6(){this.b6&&0!==this.y6.length&&(this.S6-this.oa.OR>.25*this.oa.vx||this.w6||(this.w6=this.M6.B6(this.L6)))}p6(){this.w6&&(this.M6.O6(this.w6),this.w6=0)}F6(t){var i,s;if(0===this.S6)return;const e=null!=(s=null==(i=t.Ht)?void 0:i.bV)?s:0,n=t.kO+e,r=t.EO+e,h=this.oa.OR,o=n<=h&&h<r;t.ro!==o?this.S6=0:this.En<n&&n<this.S6?this.S6=n:this.En<r&&r<this.S6&&(this.S6=r)}V6(){if(!this.b6)return;if(0===this.y6.length)return;if(this.oa.Rx)return;const t=this.y6,i=this.En,s=this.oa.OR,e=s-i<-.1;let n=this.A6||e;n&&s>i&&s-i<.1&&(n=!1),this.A6=!1;const r=[];let h=1/0;for(const i of t){const t=s-i.bV,e=i.C4(t,n)+i.bV;e<h&&(h=e);for(const t of i.q.CI)r.push(t)}const o=this.m6.slice();if(n);else for(const e of t){JR(e,i-e.bV-$,s-e.bV,o)}for(let t=o.length-1;t>=0;t--)Ft(r,o[t])&&Lh(o,t);const a=[];if(!n)for(let t=o.length-1;t>=0;t--){const e=o[t],n=e.Ht.bV;e.kO+n>i&&e.EO+n<=s&&(a.push(e),Lh(o,t))}for(const t of this.C6)t.kO!==t.EO&&is(a,t);Lr(this.C6);const u=[],c=[];for(const t of a)t.ro||u.push(new yM(t,t.kO)),u.push(new kc(t,_.max(t.kO,t.EO))),t.ro=!1;for(const t of o)t.ro&&(u.push(new kc(t,_.max(t.kO,t.EO))),t.ro=!1);for(const t of r)t.ro||(u.push(new yM(t,t.kO)),t.ro=!0);u.sort(_L);for(const t of u){const i=t.SO;i.So(t);const s=i.Ht;s&&(t.type===ye.XL?s.So(new SM(i)):s.So(new kM(i)),Ft(c,s)||c.push(s))}c.sort($R);for(const t of c)t.So(new xM(t));this.En=s,this.m6=r,this.S6=h}kn(){this.hr(),this.oa.mn(d.vy,this.W6),this.oa.mn(d.uo,this.U6),this.oa.mn(Vo.SM,this.W6),this.oa.mn(d.zw,this.W6),this.oa.mn(d.Jw,this.G6),this.oa.mn(d.Qw,this.W6)}constructor(t,i){this.oa=void 0,this.M6=void 0,this.Gl=[],this.w6=0,this.En=0,this.m6=[],this.C6=[],this.y6=[],this.b6=!1,this.A6=!1,this.S6=0,this.L6=()=>{this.w6=0,this.V6(),this.D6()},this.W6=()=>{this.V6(),this.D6()},this.U6=()=>{this.b6=!0,this.W6()},this.G6=()=>{this.A6=!0,this.S6=0,this.p6()},this.T6=()=>{this.k6(),this.V6(),this.D6()},this.x6=t=>{const i=t.SO;Ft(this.C6,i)||this.C6.push(i),this.F6(i),this.N6()},this.I6=t=>{const i=t.SO;is(this.m6,i),is(this.C6,i),this.F6(i),this.N6()},this.P6=t=>{const i=t.SO;this.F6(i),this.N6()},this.M6=i,this.oa=t,t.wn(d.vy,this.W6),t.wn(d.uo,this.U6),t.wn(Vo.SM,this.W6),t.wn(d.zw,this.W6),t.wn(d.Jw,this.G6),t.wn(d.Qw,this.W6),this.N6()}};r();var Ec=class{B6(t){return ls(t)}O6(t){Ii(t)}},mL=new Ec,Qa=class extends gL{constructor(t,i=mL){super(t,i)}};r(),r();var pL=class extends Pc{get Ca(){return this.hu||(this.hu=FM(this)),this.hu}ZO(t){return MM(this,t)}constructor(t,i,s){super(t,1/0,i,!1,s)}};r(),r();var wL=class extends wM{constructor(t,i,s=hr.DEFAULT){super(D.WV,"",i||"","",!1,s,!1,t)}},yL=class extends wL{iW(t){LM(t,this.l4),super.iW(t)}xa(){return ya(this)}constructor(t,i){super(t,i),this.Kp=hr.ID3}},bL=class extends yL{get o(){return this.vO.id||""}get tP(){return this.vO.inBandMetadataTrackDispatchType||""}get bs(){return this.vO.language||""}A4(t){super.A4(t),this.i6=this.Hk}get i6(){return Vu(this.vO.mode)}set i6(t){this.vO.mode=t}get mO(){return this.vO}iW(t){super.iW(t),t.B4.track!==this.vO&&this.vO.addCue(t.B4)}XV(t){super.XV(t),t.B4.track===this.vO&&this.vO.removeCue(t.B4)}ZV(t){this.o6>=t||(this.o6=t,St(this,t))}t6(t){this.Sx=_.max(this.Sx,t)}f6(){const t=this.vO.cues;if(!t)return;const i=t.length,s=[],e=[];for(let h=0;h<i;h++){var n;const i=null!=(n=t[h])?n:t.item(h);if(cL(i)&&i.endTime>=this.o6){var r;const t=null!=(r=null==i?void 0:i.THEOplayerTextTrackCue)?r:new AL(i);s.push(t)}else e.push(i)}Gl(s,An);const h=uM(this.L.CI.slice(),s);for(const t of e)this.vO.removeCue(t);for(const t of h.d4)t.kn(),this.XV(t);for(const t of h.c4)this.iW(t)}kn(){this.vO.removeEventListener("cuechange",this.h6),super.kn()}constructor(t){super(t.inBandMetadataTrackDispatchType,t.label),this.vO=void 0,this.o6=0,this.h6=()=>{this.Hk!==Z.Nh&&(this.f6(),this.t6(Ra.LOADED))},this.vO=t,this.vO.addEventListener("cuechange",this.h6),this.Hk=this.i6,ht(()=>{this.h6()})}},AL=class extends pL{kn(){super.kn(),this.B4.THEOplayerTextTrackCue=void 0}constructor(t){super(t.startTime,lL(t.value),t.id),this.B4=void 0,this.B4=t,this.B4.THEOplayerTextTrackCue=this}};r(),r();var Ou=[d.Ew,d.Tw,d.gy,d.wy,d.LICENSE_REQUEST_GENERATED];r();var SL=class extends sh{get error(){return this.errorObject.message}get licenseAcquisitionURL(){return this.errorObject.url}get status(){return this.errorObject.status}get statusText(){return this.errorObject.statusText}get licenseAcquisitionMessage(){return this.errorObject.response}get systemCode(){return this.errorObject.systemCode}constructor(t){super(d.Tw),this.errorObject=void 0,this.errorObject=t}};r(),r(),r();var TL=class extends sh{constructor(t){super(d.Ew),this.X6=void 0,this.X6=t}};r();var kL=class extends sh{constructor(t){super("py"),this.X6=void 0,this.X6=t}},EL=new Fu,RL=class extends sh{constructor(t){super("Xs"),this.session=void 0,this.session=t}},xL=class extends fr{get Z6(){return this.H6}fS(){return this.z6=!0,EL.Zo(t=>this.Y6(t),this.eT.jg)}async Y6(t){try{Ko(t),await this.K6.QW(t);const i=await this.K6.JW(this.q6.jp,this.q6.Ty,t);await this.j6.fS(this.q6.jp,this.q6.Ty,i)}catch(t){Ui(t);const i=t instanceof rn?t.qy:void 0,s=new Q(Ne.CONTENT_PROTECTION_INTERNAL_ERROR,"Error while performing the CDM request",t,void 0,void 0,void 0,void 0,i);throw this.Ts(s),s}}async nU(t,i){let s;try{s=function(t){return fu(t,pp())}(t)?await this.K6.fU(new j(t),this.eT.jg):await this.K6.vU(new j(t),i,this.eT.jg)}catch(t){if(hc(t))return;throw t}if(this.eT.jg.Ug)return;const e=this.Q6,n=new gs;this.Q6=n;try{await this.j6.er(s),await hi(100)}catch(t){const i=t instanceof rn?t.qy:void 0;throw new Q(Ne.CONTENT_PROTECTION_INTERNAL_ERROR,"Error while applying license response",t,void 0,void 0,void 0,void 0,i)}finally{void 0!==e&&await e.Yy,n.Hy(),this.Q6===n&&(this.Q6=void 0)}}Ts(t){const i=t instanceof Q?t:new Q(Ne.CONTENT_PROTECTION_ERROR,t.message,t);this.So(new SL(i)),this.Xs()}J6(){this.j6.mn("Ey",this.wS),this.j6.mn(d.wy,this.t9),this.j6.mn("lt",this.i9),this.s9=!1,this.H6=!1,this.eT.Jg(),this.So(new RL(this))}async Xs(){let t;this.Vo();do{t=this.Q6,void 0!==t&&await t.Yy}while(this.Q6!==t);this.J6(),await this.j6.Xs().catch(ol)}constructor(t,i,s){super(),this.j6=void 0,this.K6=void 0,this.q6=void 0,this.z6=void 0,this.s9=void 0,this.eT=void 0,this.Q6=void 0,this.H6=void 0,this.wS=void 0,this.t9=void 0,this.i9=void 0,this.j6=t,this.K6=i,this.q6=s,this.z6=!1,this.s9=!1,this.eT=new ui,this.H6=!1,this.wS=t=>{if(!this.eT.jg.Ug)switch(t.xy){case"license-request":case"license-renewal":this.nU(t.Ey,t.Iy).catch(t=>this.Ts(t));break;default:this.Ts(new Q(Ne.CONTENT_PROTECTION_NOT_SUPPORTED,"Unsupported CDM message type: "+t.xy))}},this.t9=t=>{this.j6.Sy.Xy((t,i)=>{switch(t){case"usable":Zd.Og(()=>{this.s9=!0,this.So(new TL(i))},100);break;case"expired":case"status-pending":default:break;case"output-restricted":case"internal-error":this.So(new kL(i))}}),this.H6=!0,this.So(t)},this.i9=t=>{this.Ts(new Q(Ne.CONTENT_PROTECTION_INTERNAL_ERROR,"Unknown CDM error"))},t.wn("Ey",this.wS),t.wn(d.wy,this.t9),t.wn("lt",this.i9),t.hS.then(()=>this.J6(),t=>this.Ts(t))}},IL=class extends fr{get TS(){return this.mS}get e9(){return this.n9.every(t=>t.Z6)}jW(){return this.r9.jW()}h9(t){return this.o9||(this.o9=this.a9(t)),this.o9}async a9(t){Ko(t);const i=await this.r9.fU(new j(pp()),t);if(Ko(t),!this.SS)throw new m("Invalid MediaKeys when setting ServerCertificate");await this.SS.kS(i.buffer)}async u9(t){if(!this.SS)throw new m("Invalid MediaKeys when creating KeySession");try{this.c9.push(t);const i=await this.SS.bS("temporary"),s=new xL(i,this.r9,t);return this.n9.push(s),s.wn(Ou,this.d9),s.wn("Xs",this.l9),s}finally{is(this.c9,t)}}f9(t){if(t.v9)return!1;for(const i of this.n9)if(PL(i.q6,t))return!0;for(const i of this.c9)if(PL(i,t))return!0;return!1}async kn(){this.SS=void 0,this.Vo();const t=this.n9.slice();Lr(this.n9),await Promise.all(t.map(t=>t.Xs())),this._9=void 0,this.r9.Zg()}constructor(t,i,s){super(),this.mS=void 0,this.SS=void 0,this.r9=void 0,this.n9=[],this.o9=void 0,this.c9=[],this._9=void 0,this.d9=t=>{if(t.type===d.wy)return null!=this._9||(this._9=new mp),t.Sy.Xy((t,i)=>{this._9.Gy(i,t)}),void(this.e9&&this.So(new mm(this._9)));this.Rs(t)},this.l9=t=>{t.session.mn(Ou,this.Rs),t.session.mn("Xs",this.l9),is(this.n9,t.session),this._9=void 0},this.mS=t,this.SS=i,this.r9=s}};function PL(t,i){if(t.v9)return!1;if(t.jp!==i.jp)return!1;if(fu(t.Ty,i.Ty))return!0;if("sinf"===t.jp&&"sinf"===i.jp){const i=CL(t),s=CL(t);if(i&&s)return fu(i,s)}return!1}function CL(t){try{const i=pr(xh(new j(t.Ty)),new J),s=JSON.parse(i).sinf[0],e=new j(_p(s)),n=new oT(xh(e),new J);return Co.rB(n).pB.yB.SB}catch(t){return}}var NL=class extends fr{get g9(){var t;return null==(t=this.mS)?void 0:t.TS}get EX(){return this.r9}set EX(t){this.r9=t}Un(t,i){this.eX=t,this.kJ(i)}kJ(t){this.qS=t,this.m9(this.eT.jg).catch(Na)}RJ(t){this.p9(t,this.eT.jg).catch(Na)}async p9(t,i){var s,e;Ko(i);var n;if(null==(s=this.qS)?void 0:s.aX)for(const s of null!=(n=null==(e=this.qS)?void 0:e.aX)?n:[]){var r;const e=me(t,t=>t.w9===s.TS.Jp);if(void 0!==(null==e?void 0:e.y9)&&!(null==(r=s.MG)?void 0:r.some(t=>fu(e.y9,t))))try{return void await this.b9(s.TS.jp,e.y9,i)}catch(t){Ui(t)}}}async m9(t){if(!Zd.Zs.Sm||!await this.A9(t))return this.qS&&this.qS.S9?await this.T9(t):void 0}async A9(t){var i,s;if(!(null==(i=this.qS)?void 0:i.aX))return!1;let e=!1;var n;for(const i of null!=(n=null==(s=this.qS)?void 0:s.aX)?n:[]){if(i.FG&&0!==i.FG.length){try{const s={kids:i.FG.map(t=>t.id)},n=br(JSON.stringify(s)).buffer;await this.b9(Bg,n,t),e=!0}catch(t){Ui(t)}if(e)return!0}var r;for(const s of null!=(r=i.MG)?r:[])try{await this.b9(i.TS.jp,s,t),e=!0}catch(t){Ui(t)}if(e)return!0}return!1}k9(t){return t===_r||t===Dg||t===Ng||t===Bg}async b9(t,i,s){if(Ko(s),!i.byteLength)return;if(!this.qS||!this.qS.aX.length)throw new Q(Ne.CONTENT_PROTECTION_CONFIGURATION_MISSING,"Missing configuration for encrypted content");if(!this.k9(t))return void 0;const e=IT(t,i),n=this.qS.aX;let r;const h=[];for(const i of n){Ko(s);const n=e[i.TS.Qp];if(n&&i.TS.jp===t)try{const t=await this.E9(i,s);t.jW()&&await t.h9();const e=this.SL.QR,r={jp:i.TS.jp,Ty:n,v9:e};if(h.push(!0),this.R9(t,r)){const i=await t.u9(r);await i.fS(),this.So(new pm(n))}return}catch(t){Ui(t),r=t}else i.TS.Kp===R.Hp&&h.push(!1)}if(0===h.length||h.some(so))throw await Zd.mp()?new Q(Ne.CONTENT_PROTECTION_NOT_SUPPORTED,"Encrypted content over an insecure connection is not supported",r):new Q(Ne.CONTENT_PROTECTION_NOT_SUPPORTED,"Cannot create content decryption session",r)}async T9(t){var i;const s=null==(i=this.qS)?void 0:i.aX;if(s)for(const i of s){Ko(t);try{const s=await this.E9(i,t);return void(s.jW()&&await s.h9())}catch(t){Ui(t)}}}R9(t,i){return Zd.Zs.Am||this.SL.PL.IL||!t.f9(i)}E9(t,i){return this.ta.Zo(i=>this.x9(t,i),i)}async x9(t,i){if(Ko(i),!this.qS||!this.r9||!this.eX)throw new m("Not initialized");if(this.mS){if(this.mS.TS!==t.TS)throw new m("Internal key system error");return this.mS}const s=this.r9,e=Jr({},t,{MX:t.MX.map(i=>{var e;return Jr({},i,{persistentState:null!=(e=i.persistentState)?e:s.mU(t.TS),DS:i.DS||s.DS(t.TS)})})}),n=await this.eX.bJ(e.TS,e.MX),r=s.BG(e),h=new IL(e.TS,n,r);return h.wn(Ou,this.Rs),this.mS=h,h}Ts(t){if(hc(t))return;const i=t instanceof Q?t:new Q(Ne.CONTENT_PROTECTION_ERROR,t.message,t);this.So(new SL(i))}async hr(){this.eX=void 0,this.qS=void 0,this.eT.Jg(),this.eT=new ui,await this.I9()}async I9(){await this.ta.Jg();const t=this.mS;t&&(t.mn(d.gy,this.Rs),this.mS=void 0,await t.kn())}async Zg(){this.Vo(),this.SL.mn(ym.Cw,this.P9),await this.hr(),await this.ta.kn()}constructor(t){super(),this.SL=void 0,this.eT=new ui,this.ta=new Fu,this.qS=void 0,this.r9=void 0,this.eX=void 0,this.mS=void 0,this.P9=t=>{this.b9(t.jp,t.Ty,this.eT.jg).catch(t=>this.Ts(t))},this.SL=t,this.SL.wn(ym.Cw,this.P9)}};r();var DL=class extends sh{constructor(t){super(d.Vw),this.currentTime=void 0,this.currentTime=t}};r();var BL=class extends fr{get Sx(){return void 0!==this.C9?this.C9.Sx:pi.VL}J5(){var t;null==(t=this.C9)||t.J5()}hr(){var t;null==(t=this.C9)||t.hr()}Zg(){this.Vo(),void 0!==this.C9&&(this.C9.Zg(),this.C9=void 0)}N9(t){if(this.C9===t)return;const i=this.Sx;void 0!==this.C9&&this.C9.Zg(),this.C9=t,void 0!==t&&(t.wn(Vo.bI,this.Rs),t.J5());const s=this.Sx;i!==s&&this.So(new ca(this.D9.OR,s))}constructor(t){super(),this.D9=void 0,this.C9=void 0,this.D9=t}};r();var ML=class extends wM{get Ca(){var t;return null!=(t=this.hu)?t:this.hu=LL(this)}B9(t,i,s){const e=new Oe(t,i,s,!1);return this.iW(e),e}M9(t){this.XV(t)}constructor(t,i,s){super(t,i,"",s,void 0,hr.WEBVTT)}};function LL(t){return Qr(ya(t),{get type(){return t.Kp},addCue:(i,s,e)=>t.B9(i,s,e).Ca,removeCue(i){t.M9(i.TO)}})}r();var OL=class extends fL{get Ca(){var t;return null!=(t=this.hu)?t:this.hu=LL(this)}B9(t,i,e){const n=this.c6(new s.VTTCue(t,i,e));return this.aE?this.iW(n):this.L9.push(n),n}M9(t){is(this.L9,t),this.XV(t)}kn(){var t;super.kn(),null==(t=this.Q4)||t.removeEventListener("load",this.O9),Lr(this.L9)}constructor(t,i,s){var e;super(t,i,s),this.aE=!1,this.L9=[],this.O9=()=>{var t;null==(t=this.Q4)||t.removeEventListener("load",this.O9),this.aE=!0;for(const t of this.L9)this.iW(t);Lr(this.L9)},null==(e=this.Q4)||e.addEventListener("load",this.O9),this.Kp=hr.WEBVTT}};function FL(t,i){if(void 0!==t.Y3!==i.D5.some(t=>I(t.GT)))return!1;return void 0!==t.K3===i.D5.some(t=>rt(t.GT))}r();var VL=As.B_||As.L_,WL=As.Cg,UL=As.z_,GL=As.z_&&As.ru,XL=class extends fr{get i4(){return this.F9}get IR(){return this.eX?this.eX.IR:ZT.tL()}get NR(){const t=this.nX;if(!t||S(t.getTime()))return;const i=1e3*this.OR;return new Date(t.getTime()+i)}get nX(){if(this.iX.getStartDate)return this.pZ&&this.V9||(this.V9=this.iX.getStartDate()),this.V9}get OR(){return this.W9?this.W9.OR:void 0!==this.U9?this.U9:this.vT.currentTime}get Wu(){return this.sc}get ct(){return this.W9?this.W9.ct:this.eX?this.eX.ct:this.vT.duration}get GR(){return this.Rx?this.G9():this.W9?this.W9.GR:this.vT.ended||this.X9}G9(){return void 0!==this.U9&&this.ct===this.U9}get lt(){return this.$G}get iX(){return this.vT}get ux(){return this.Z9?this.H9:this.W9?this.W9.ux:this.vT.paused}get mx(){return this.Ho.LM(ZT.jn(this.vT.played))}get Mi(){return this.vT.offsetHeight*Zd.Zs.wm}get Ti(){return this.vT.offsetWidth*Zd.Zs.wm}get Ma(){return this.ha}get pX(){return this.ea}get Sx(){return this.z9.Sx}get kx(){return this.eX?this.eX.kx:ZT.tL()}get Rx(){return this.W9?this.W9.Rx:this.pZ||this.vT.seeking&&!this.K5}get Y5(){return this.W9?this.W9.Y5:this.K5}get r4(){return 0!==this.Y9}get ix(){return this.W9?this.W9.ix:this.vT.muted}set ix(t){this.W9?this.W9.ix=t:(this.vT.muted=t,this.K9())}get vx(){return this.W9?this.W9.vx:void 0!==this.q9?this.q9:this.vT.playbackRate}set vx(t){this.W9?this.W9.vx=t:this.ux||this.F9?(this.q9=t,this.j9()):(this.q9=void 0,this.vT.playbackRate=t,this.j9())}j9(){const t=this.vx;this.Q9!==t&&(this.Q9=t,this.So(new Fs(this.OR,t)))}get J9(){return this._Z}get Ox(){return this.W9?this.W9.Ox:this.vT.volume}set Ox(t){this.W9?this.W9.Ox=t:(this.vT.volume=t,this.K9())}K9(){const t=this.Ox,i=this.ix;this.t8===t&&this.i8===i||(this.t8=t,this.i8=i,this.So(new q(this.OR,this.Ox)))}tx(){return tD(this.vT)}Yx(){this.s8||(this.s8=!0);const t=this.e8();return this.n8(),t}n8(){this.Z9?this.H9&&(this.H9=!1,this.So(new Ts(this.OR))):this.r8()}r8(){if(this.W9)this.W9.Yx();else{As.z_&&!As.ru&&this.vT.preload===hl.oZ&&(this.vT.preload=hl.WV);const t=this.vx,i=this.vT.play();t!==this.iX.playbackRate&&(this.vx=t),this.X9=!1,zd(i)?i.then(this.h8,this.o8):this.a8.h4()&&this.u8()}}zx(){this.Z9?this.H9||(this.H9=!0,this.So(new Pi(this.OR))):this.c8()}c8(){this.W9?this.W9.zx():(this.vT.pause(),this.a8.er()),this.d8(new us)}e8(){const t=new gs;return this.l8.push(t),t.Yy}f8(){for(const t of this.l8)t.Hy(void 0);Lr(this.l8)}d8(t){for(const i of this.l8)i.zy(t);Lr(this.l8)}u8(){this.Z9||this.W9||this.f8()}v8(t){this.Z9||this.W9||this.d8(t)}By(t,i,s){void 0===i&&(i=!1),void 0===s&&(s=!1),this.W9?this.W9.By(t,i,s):(this._8.Jg(),this._8=new ui,this.g8=Ce(this.m8(t,i,s,this.g8,this._8.jg),this._8).catch(ol))}QG(t){const i=this.nX;if(!i||S(i.getTime()))return;const s=(t.getTime()-i.getTime())/1e3;this.By(s)}async m8(t,i,s,e,n){try{if(this.U9=t,this.p8=t,this.w8=Zd.Mg(),s&&!this.pZ?this.K5=!0:(this.pZ=!0,this.K5=!1),this.X9&&!this.G9()&&(this.X9=!1),this.K5?(this.So(new Br(this.OR)),(As.w_||As.S_)&&(t+=.05)):this.So(new ul(t)),await e.catch(ol),Ko(n),this.eX&&!this.eX.zJ())return void this.y8();for(this.b8&&this.A8(),this.z9.Sx===pi.VL&&await this.z9.pw(Vo.bI,n);0===this.vT.seekable.length||GL&&!this.s8;){const t={stack:[],error:void 0,hasError:!1};try{const i=Zr(t,ui.nm([n]),!1);await Promise.race([UA(this.vT,"timeupdate",i.jg),hi(100,i.jg)]),Ko(n)}catch(i){t.error=i,t.hasError=!0}finally{hs(t)}}let h=LB(this.IR,t,.05),o=this.kx,a=!0,u=!1;for(;;){const t={stack:[],error:void 0,hasError:!1};try{var r;if(o=this.kx,o.V>0&&!o.Cr(h)&&(h=o.CM(h),a=!0),i&&!this.vT.fastSeek){const t=this.IR;if(!t.Cr(h)){const i=LB(t,h,1);i!==h&&(h=i,a=!0)}}if(UL){const t=this.S8();void 0!==t&&h>t&&(h=t,a=!0)}if(!u){const t=this.T8();void 0!==t&&h>t&&(u=!0,await this.k8(t,!1,n),await UA(this.vT,"seeked",n),Ko(n),a=!0)}if(a){a=!1,await this.k8(h,i,n),Ko(n);let t=this.OR;o=this.kx,h=o.CM(h);let s=1;for(;_.abs(h-t)>=$;)o=this.kx,h=HL(h,o,s),await this.k8(h,i,n),Ko(n),t=this.OR,s++}if(!(this.vT.seeking||this.z9.Sx<pi.WL))break;const s=Zr(t,ui.nm([n]),!1);await Promise.race([UA(this.vT,"seeked",s.jg),this.pw([d.Yw,d.Iw],s.jg),this.z9.pw(Vo.bI,s.jg),null==(r=this.eX)?void 0:r.pw(kD._J,s.jg)].filter(Y)),Ko(n)}catch(i){t.error=i,t.hasError=!0}finally{hs(t)}}this.y8()}catch(t){if(hc(t))return;0}}async k8(t,i,s){Ko(s);let e=this.kx;if(t=e.CM(t),this.b8){let i=!0;for(;i||this.z9.Sx<pi.UL;){const n={stack:[],error:void 0,hasError:!1};try{if(e=this.kx,e.Cr(t)||(t=e.CM(t),i=!0),i){i=!1,this.U9=t,this.E8(this.OR);continue}const r=Zr(n,ui.nm([s]),!1);await Promise.race([this.pw(d.Iw,r.jg),this.z9.pw(Vo.bI,r.jg)])}catch(t){n.error=t,n.hasError=!0}finally{hs(n)}}Ko(s)}const n=UA(this.vT,"seeking",s);i&&this.vT.fastSeek?this.vT.fastSeek(t):this.vT.currentTime=t,this.U9=void 0,this.E8(this.OR),this.vT.seeking&&await n}S8(){if(!this.eX||!this.eX.UJ)return;const t=this.eX.GJ,i=this.eX.XJ,s=t&&i?t.Mn(i):t||i;if(!s||0===s.V)return;const e=s.Tn(s.V-1),n=s.An(s.V-1);return _.max(e,n-.001)}T8(){if(!this.eX||!this.eX.UJ)return;const t=this.eX.XJ;if(!t||0===t.V)return;const i=t.Tn(t.V-1);let s=t.An(t.V-1)-.02;return s-=.001,_.max(i,s)}E8(t){this.p8!==t&&(this.p8=t,this.K5?this.So(new Br(t)):this.So(new ul(t)))}y8(){const t=this.K5;this.pZ=!1,this.K5=!1,this.w8=0,this.p8=NaN,this.b8&&this.x8(),t?(this.So(new DL(this.OR)),this.I8()):(this.So(new Wi(this.OR)),this.P8=!0),this.iQ()}A8(){this.Z9||(this.H9=this.ux,this.Z9=!0,this.c8())}x8(){this.Z9&&(this.Z9=!1,this.H9||this.n8())}YJ(t){for(const i of t){if(i.Kp===xt.wW&&xD.YJ(i,this.vT))return i;if(i.Kp===xt.yW&&ZB.YJ(i))return i}}we(){this._Z=!1,wf(this.vT)&&(this.vT.style.display="none")}be(){this._Z=!0,wf(this.vT)&&(this.vT.style.display="block")}get nt(){return this.C8}get Ql(){return this.RZ}sI(t,i,s,e,n,r,h,o,a){const u=new wM(t,i,s,e,n,r,h,a,o);return this.Gl.tt(u),this.N8.tt(u),u}wX(t){const{Lt:i,Th:e,bs:n}=t;if("function"==typeof this.vT.addTextTrack&&"function"==typeof s.VTTCue){const t=this.D8("data:text/vtt,WEBVTT%0A%0A",i,e,n),s=t.track,r=new OL(s.label,s,t);return this.B8.tt(r),this.M8.push(r),r}const r=new ML(i,e,n);return this.Gl.tt(r),this.N8.tt(r),r}vX(){return!0}gX(t,i,s,e,n){const r=this.D8(t,i,s,e,n),h=r.track,o=new fL(h.label,h,r);return this.B8.tt(o),this.M8.push(o),o}D8(t,i,s,e,n){const r=h.createElement("track");return r.src=ie(t),r.kind=i,r.label=null!=s?s:"",e&&(r.srclang=e),r.default=Boolean(n),this.vT.appendChild(r),r}sW(t){this.Gl.it(t),this.N8.it(t)}bX(){for(const t of this.Gl.CI.slice())t.kn();this.Gl.hr();for(const t of this.M8.slice())this.B8.it(t),t.kn();Lr(this.M8)}LX(){const t=this.vT.textTracks;t&&t.addEventListener&&(t.addEventListener("addtrack",this.L8),t.addEventListener("removetrack",this.O8),t.addEventListener("change",this.F8))}TX(){const t=this.vT.textTracks;t&&t.removeEventListener&&(t.removeEventListener("addtrack",this.L8),t.removeEventListener("removetrack",this.O8),t.removeEventListener("change",this.F8))}V8(t){t.mode=Z.$I;const i=new bL(t);this.B8.tt(i),this.N8.tt(i)}W8(t,i){const s=()=>{YL(t)&&(t.removeEventListener("cuechange",s),this.B8.tt(new fL(t.id,t,i)))};t.addEventListener("cuechange",s),t.mode=Z.$I}U8(t){const i=this.vT.getElementsByTagName("track");for(let s=0;s<i.length;s++){const e=i[s]||i.item(s);if(e.track===t)return e}}G8(){if(0===this.B8.V)return;const t=this.kx;if(0===t.V)return;const i=t.Tn(0);if(this.X8!==i){for(const t of this.B8.CI)t.ZV(i);this.X8=i}}Un(t){return this.Z8.Zo(async i=>{if(Ko(i),this.eX)throw new m("Already loaded a media source");let s;if(t.Kp===xt.wW)s=new xD(t,this,this.EJ,this.nw,this.VQ),this.b8=!1,this.z9.N9(this.H8());else{if(t.Kp!==xt.yW)throw new m("Unsupported configuration");{this.b8=VL;const i=this.H8();s=new ZB(t,this,i,this.EJ,this.nw,void 0,this.S5,this.VQ),this.z9.N9(i),WL&&(this.wn(d.vy,this.z8),this.z9.wn(Vo.bI,this.Y8))}}return this.eX=s,await s.Fj(),s})}H8(){return this.b8?new $B(this):new Uu(this)}K8(){if(this.F9)return;const t=this.vx;this.F9=!0,this.vx=t,this.vT.playbackRate=0,this.z9&&this.z9.J5()}q8(){if(!this.F9)return;const t=this.vx;this.F9=!1,this.vx=t,this.j8()}j8(){this.vT.currentTime=this.vT.currentTime,this.z9&&this.z9.J5()}Q8(){this.pZ=!1,this.K5=!1,this.P8=!1,Zd.Lg(this.Y9),this.Y9=0,this.Ho=ZT.tL(),this._8.Jg(),this.U9=void 0,this.p8=NaN,this.V9=void 0,this.b8=!1,this.Z9=!1,this.$G=void 0,this.X9=!1,this.J8=void 0,this.X8=0,this.t7=!1,this.s8=!1,this.i7&&(this.s7(),this.i7=!1),this.d8(new us),this.z9.N9(new Uu(this)),this.a8.hr(),this.B8.hr(),this.q8(),WL&&(Ii(this.e7),this.e7=0,this.mn(d.vy,this.z8))}async hr(){this.Q8(),await this.Z8.Jg(),await this.Z8.Zo(async()=>{this.eX&&(await this.eX.Zg(),this.eX=void 0,As.w_&&As.b_<3&&this.n7())})}async I9(){const t=this.eX;if(void 0===t||!AD(t)||void 0!==this.$G)throw new g("Invalid state");this.Q8(),this.vT.pause(),this.vT.currentTime=0,await this.Z8.Zo(()=>async function(t){t.y3();const i=[t.Y3,t.K3].filter(Y);await Promise.all(i.map(t=>t.n3(0,1/0))),t.x5(NaN)}(t))}n7(){this.r7();const t=this.vT,i=t.parentElement,s=t.tagName.toLowerCase();this.vT=Sf(s),this.retainMediaElementState(t),Tf(t),null==i||i.replaceChild(this.vT,t),this.s7(),this.z9.N9(this.H8()),this.a8.mn(Vo.SM,this.h7),this.a8.Zg(),this.a8=new sM(this),this.a8.wn(Vo.SM,this.h7),this._Z?this.be():this.we(),this.So(new qt),this.So(new Pk)}retainMediaElementState(t){this.iX.muted=t.muted,this.iX.volume=t.volume}async Zg(){this.i7=!1,this.r7(),this.TX(),await this.hr(),await this.Z8.kn(),this.a8.Zg(),this.z9.Zg(),await this.EJ.Zg(),this.bX(),this.Gl.kn(),this.B8.kn(),this.C8.kn(),this.Vo()}s7(){this.iX.addEventListener("play",this.o7),this.iX.addEventListener("pause",this.a7),this.iX.addEventListener("timeupdate",this.u7),this.iX.addEventListener("progress",this.d7),this.iX.addEventListener("loadstart",this.l7),this.iX.addEventListener("ended",this.f7),this.iX.addEventListener("ratechange",this.v7),this.iX.addEventListener("volumechange",this._7),this.iX.addEventListener("durationchange",this.g7),this.iX.addEventListener("resize",this.m7),this.iX.addEventListener("loadedmetadata",this.m7),this.iX.addEventListener("error",this.p7),this.iX.addEventListener("emptied",this.w7),this.iX.addEventListener("seeked",this.y7),this.iX.addEventListener("seeking",this.b7),Fc()?(this.vT.addEventListener("encrypted",this.A7),this.vT.addEventListener("waitingforkey",this.S7)):void 0!==s.WebKitMediaKeys&&"function"==typeof s.WebKitMediaKeys.isTypeSupported?this.vT.addEventListener("webkitneedkey",this.T7):dm()?this.vT.addEventListener("webkitneedkey",this.k7):void 0!==s.MSMediaKeys&&"function"==typeof s.MSMediaKeys.isTypeSupported&&this.vT.addEventListener("msneedkey",this.E7)}r7(){this.iX.removeEventListener("play",this.o7),this.iX.removeEventListener("pause",this.a7),this.iX.removeEventListener("timeupdate",this.u7),this.iX.removeEventListener("progress",this.d7),this.iX.removeEventListener("loadstart",this.l7),this.iX.removeEventListener("ended",this.f7),this.iX.removeEventListener("ratechange",this.v7),this.iX.removeEventListener("volumechange",this._7),this.iX.removeEventListener("durationchange",this.g7),this.iX.removeEventListener("resize",this.m7),this.iX.removeEventListener("loadedmetadata",this.m7),this.iX.removeEventListener("error",this.p7),this.iX.removeEventListener("encrypted",this.A7),this.iX.removeEventListener("waitingforkey",this.S7),this.iX.removeEventListener("webkitneedkey",this.T7),this.iX.removeEventListener("webkitneedkey",this.k7),this.iX.removeEventListener("msneedkey",this.E7),this.iX.removeEventListener("emptied",this.w7),this.iX.removeEventListener("seeked",this.y7),this.iX.removeEventListener("seeking",this.b7)}R7(){this.W9||(this.Ho=this.mx,this.W9=KB(this),this.r7(),this.W9.wn(zB,this.Rs))}x7(){if(!this.W9)return;const t=this.W9;this.W9=void 0,this.z9.J5(),qB(this,t),t.Zg(),this.s7()}I8(){const t=this.OR;this.So(new Tc(t,void 0)),this.J8=t}iQ(){this.X9||!this.GR||this.Rx||(this.X9=!0,this.So(new Be(this.OR)))}XX(t){this.$G=t,this.d8(this.$G),this.So(new eM(this.$G))}get QR(){return Boolean(this.vT.webkitCurrentPlaybackTargetIsWireless)}get I7(){return this.P7}get PL(){return Jr({},yD)}C7(){this.P7||(Ef(this.vT,Zd.Zs),this.P7=!0)}N7(t){t.appendChild(this.vT)}E3(){WL&&this.z8(),this.z9.J5()}get EX(){return this.EJ.EX}set EX(t){this.EJ.EX=t}get D7(){return this.S5}set D7(t){this.S5=t}get g9(){return this.EJ.g9}Jx(){this.EJ.I9().catch(ol),this.B8.hr()}get Gx(){return this.t7}set Gx(t){this.t7=t,this.i7&&!this.t7&&(this.i7=!1,this.s7())}constructor(t,i,s,e,n){super(),this.vT=void 0,this.sc=void 0,this.VQ=void 0,this.$G=void 0,this._Z=!0,this.eX=void 0,this.Z8=new Fu,this.W9=void 0,this.z9=void 0,this.a8=void 0,this.EJ=void 0,this.ha=new bs,this.ea=new Du,this.Gl=void 0,this.RZ=void 0,this.M8=[],this.B8=void 0,this.C8=void 0,this.N8=void 0,this.U9=void 0,this.w8=0,this.p8=NaN,this.V9=void 0,this.P8=!1,this.J8=void 0,this.X8=0,this.pZ=!1,this.K5=!1,this.B7=pi.VL,this.Y9=0,this.g8=Promise.resolve(),this._8=new ui,this.l8=[],this.Ho=ZT.tL(),this.q9=void 0,this.Q9=1,this.i8=!1,this.t8=1,this.X9=!1,this.t7=!1,this.i7=!1,this.b8=!1,this.nw=void 0,this.Z9=!1,this.H9=!1,this.F9=!1,this.P7=!1,this.e7=0,this.S5=void 0,this.s8=!1,this.L8=t=>{const i=t.track,s=this.U8(i);if(!zL(this.B8,i)){if(As.z_){if(i.kind===D.WV)return void this.V8(i);if(i.kind===D.FV&&""===i.label&&""===i.language&&!YL(i))return void this.W8(i,s)}this.B8.tt(new fL(i.id,i,s))}},this.O8=t=>{const i=zL(this.B8,t.track);i&&this.B8.it(i)},this.F8=()=>{for(let t=0;t<this.B8.V;t++){const i=this.B8.DI(t);i instanceof fL&&i.a6()}},this.z8=()=>{if(void 0===this.eX||!AD(this.eX))return;if(this.ux)return;const t=this.eX,i=t.Y3,s=t.K3;if(!i||!s)return;if(t.UJ)return void this.q8();if(t.Sx===XB.v3)return;const e=i.IR,n=s.IR;if(0===e.V&&0===n.V)return void this.q8();const r=this.OR;if(r<e.Tn(0)||r<n.Tn(0))return void this.q8();if(e.Cr(r)!==n.Cr(r)){if(t.HJ(r))return;this.K8()}else if(this.q8(),!this.e7&&this.a8.h4()){e.OM(n).GM(r,r+.5)&&(this.e7=ls(this.M7))}},this.M7=()=>{this.e7=0,this.z8()},this.Y8=()=>{if(this.Rx||this.Y5)return;if(this.z9.Sx>=pi.UL)return;if(void 0===this.eX||!AD(this.eX))return;const t=this.eX,i=t.Y3,s=t.K3;if(!i||!s)return;const e=this.OR,n=i.IR,r=s.IR;if(!n.Cr(e)||!r.Cr(e))return;n.OM(r).GM(e-5,e)&&(this.F9?this.q8():this.j8())},this.o7=()=>{this.So(new Ts(this.OR))},this.a7=()=>{this.v8(new us),this.So(new Pi(this.OR))},this.h7=()=>{this.u8(),this.So(new $n(this.OR))},this.v7=()=>{this.j9()},this.g7=()=>{this.So(new ur(this.ct))},this.d7=()=>{this.So(new Ut(this.OR))},this.l7=()=>{this.So(new Pt)},this.y7=()=>{this.pZ||this.K5||this.P8?this.P8=!1:this.So(new Wi(this.OR))},this.b7=()=>{this.E8(this.OR),this.P8=!1},this.u7=()=>{const t=this.OR,i=this.Rx,s=this.z9.Sx<pi.UL&&!this.GR,e=void 0!==this.J8,n=e&&this.J8!==t;this.G8(),(i||!e||n&&!s)&&this.I8()},this.f7=()=>{this.iQ()},this.p7=()=>{if(null!==this.vT.error){const i=this.vT.error;var t;this.XX(new iu(null!=(t=i.code)?t:Lt.DECODE,i.message||"Error decoding media",void 0,i.msExtendedCode))}},this.w7=()=>{this.t7&&(this.r7(),this.i7=!0)},this.L7=t=>{if(Zd.Lg(this.Y9),this.Y9=0,t.readyState<=pi.WL)if(this.pZ||this.K5){const i=Zd.Mg()-this.w8;if(i<250)return void(this.Y9=Zd.Og(()=>this.L7(t),250-i))}else if(void 0!==this.eX&&this.eX.HJ(this.OR))return void(this.Y9=Zd.Og(()=>this.L7(t),250));this.B7!==t.readyState&&(this.B7=t.readyState,this.So(t))},this._7=()=>{this.K9()},this.m7=()=>{this.Mx>0&&this.Nx>0&&this.So(new es)},this.A7=t=>{this.So(new bm(t.initDataType,t.initData||new ArrayBuffer(0)))},this.S7=()=>{this.So(new Am)},this.E7=t=>{const i=t.initData,s=i?tc(i).buffer:new ArrayBuffer(0);this.So(new bm(_r,s))},this.T7=t=>{if(t.initData){const i=function(t){try{const i=xh(t),s=new J,e=Et(i,s,ds(i,s,!0));return Xc(ep(e,!0))}catch(t){return}}(t.initData);if(!i)return;this.So(new bm(Dg,i))}else this.So(new bm(Dg,new ArrayBuffer(0)))},this.k7=t=>{const i=t.initData,s=i?tc(i).buffer:new ArrayBuffer(0);this.So(new bm(_r,s))},this.h8=()=>{this.u8()},this.o8=t=>{this.v8(t)},this.O7=t=>{this.So(t),t.type===d.Tw&&this.XX(xs(t.errorObject))},this.vT=t,this.nw=i,this.sc=s,this.RZ=e,this.VQ=n,this.z9=new BL(this),this.z9.wn(Vo.bI,this.L7),this.z9.N9(new Uu(this)),this.a8=new sM(this),this.a8.wn(Vo.SM,this.h7),this.EJ=new NL(this),this.EJ.wn(Ou,this.O7),this.Gl=new ou,this.B8=new ou,this.C8=new Ka([this.Gl,this.B8]),this.N8=new Qa(this),this.s7(),this.LX()}};var ZL=.01;function HL(t,i,s){if(void 0===s&&(s=0),!i.V)return 0;let e=i.CM(t);const n=ZL*s;return e===i.Tn(0)?e+=n:e===i.An(i.V-1)&&(e-=n),e}function zL(t,i){for(const s of t.CI)if(s.mO===i)return s}function YL(t){return!!t.cues&&t.cues.length>0}r();var KL={QQ:void 0,JQ:void 0,$Q:void 0,tJ:void 0,iJ:void 0,sJ:void 0,eJ:void 0,nJ:void 0,rJ:void 0,hJ:void 0},qL=class extends fr{get Ca(){return this.hu||(this.hu=vD(this)),this.hu}get QQ(){}get JQ(){}get $Q(){}get tJ(){}get iJ(){}get sJ(){}get F7(){}get eJ(){}get nJ(){}get rJ(){}get hJ(){}constructor(...t){super(...t),this.hu=void 0}},jL=class extends XL{Zx(){}get Nx(){return 0}get Mx(){return 0}constructor(t,i,s,e){super(t,i,s,new qL,e)}};r(),r();var QL=class{get xe(){return this.V7}we(){this.V7.style.display="none"}be(){this.V7.style.display="block"}N7(t){t.appendChild(this.V7)}kn(){je(this.V7)}constructor(t=5){this.V7=void 0;const i=s.document.createElement("div");i.className="theoplayer-texttracks",i.style.position="absolute",i.style.display="none",i.style.overflow="hidden",i.style.pointerEvents="none",i.style.left="0",i.style.right="0",i.style.top="0",i.style.bottom="0",i.style.width="100%",i.style.height="100%",i.style.lineHeight="1.3em",i.style.zIndex=""+t,this.V7=i,this.be()}};function JL(t,i){return Jr({},i,gS(function(t){return{QQ:t.QQ,JQ:t.JQ,$Q:t.$Q,tJ:t.tJ,iJ:t.iJ,sJ:t.sJ,eJ:t.eJ,nJ:t.nJ,rJ:t.rJ,hJ:t.hJ}}(t)))}function $L(t){return t.$Q&&sm(t.$Q,"%")?Number(t.$Q.replace("%",""))/100:t.$Q&&sm(t.$Q,"em")?Number(t.$Q.replace("em","")):1}r(),r(),r(),r(),r();var tO=class t{get W7(){return this.U7+this.Ti}set W7(t){this.U7=t-this.Ti}get G7(){return this.X7+this.Mi}set G7(t){this.X7=t-this.Mi}Z7(t){return this.U7<t.W7&&this.W7>t.U7&&this.X7<t.G7&&this.G7>t.X7}lO(t){return this.U7<=t.U7&&t.W7<=this.W7&&this.X7<=t.X7&&t.G7<=this.G7}My(){return new t(this.U7,this.X7,this.Ti,this.Mi)}H7(i){const s=this.U7+i,e=this.X7+i,n=_.max(0,this.Ti-2*i),r=_.max(0,this.Mi-2*i);return new t(s,e,n,r)}z7(i){const s=_.min(this.U7,i.U7),e=_.max(this.W7,i.W7),n=_.min(this.X7,i.X7),r=_.max(this.G7,i.G7);return new t(s,n,e-s,r-n)}constructor(t,i,s,e){this.U7=void 0,this.X7=void 0,this.Ti=void 0,this.Mi=void 0,this.U7=t,this.X7=i,this.Ti=s,this.Mi=e}},iO=class{Y7(t){const i=this.K7(t);if(!i)return!1;for(const t of i)je(t);return this.q7(t),!0}get Ht(){return this.OO}get iX(){return this.vT}get Wu(){return this.sc}get j7(){return this.Q7}get J7(){return this.ttt}Fj(){this.itt(),this.OO.L.CI.forEach(t=>this.iW(t)),this.Wu.wn(Gu.yn,this.stt),this.oe(this.Wu.Eu,this.Wu.Iu)}ett(t){this.ttt=t,this.Q7=JL(this.ttt,this.ntt),this.Q7.QQ&&(this.iX.style.fontFamily=this.Q7.QQ),this.oe(this.Wu.Eu,this.Wu.Iu),this.htt(!0)}ott(){return this.Q7}att(t){return this.utt.has(t.qI)}itt(){this.OO.wn(M.aI,this.ctt),this.OO.wn(M.cI,this.dtt),this.OO.wn(M.pa,this.ltt)}ftt(){this.OO.mn(M.aI,this.ctt),this.OO.mn(M.cI,this.dtt),this.OO.mn(M.pa,this.ltt)}_tt(t){t.wn(ye.XL,this.gtt),t.wn(ye.ZL,this.mtt),t.wn(ye.kI,this.ptt)}wtt(t){t.mn(ye.XL,this.gtt),t.mn(ye.ZL,this.mtt),t.mn(ye.kI,this.ptt)}iW(t){this._tt(t),t.ro&&this.ytt(t)}XV(t){this.wtt(t),this.btt(t)}Att(){this.OO.Hk===Z.Kn?this.Stt():this.Ttt()}Stt(){if(!this.ktt)return;this.ktt=!1;const t=this.Wu.Eu,i=this.Wu.Iu;this.oe(t,i),this.htt(!1)}Ttt(){this.ktt||(this.ktt=!0,this.htt(!0))}ytt(t){this.ktt||t.ro&&!this.att(t)&&this.htt(!1)}btt(t){this.att(t)&&this.htt(!0)}Ett(t){(t.ro||this.att(t))&&this.htt(!0)}htt(t){const i=this.Rtt,s=this.ktt?[]:this.OO.q.CI.slice();this.xtt(s,i,t),this.Rtt=s}K7(t){return this.utt.get(t.qI)}Itt(t,i){this.utt.set(t.qI,i)}q7(t){this.utt.delete(t.qI)}Ptt(t){const i=[],s=this.Q7;if(void 0!==s.eJ){const e=t.My();e.Mi=s.eJ,i.push(e)}if(void 0!==s.nJ){const e=t.My();e.Mi=s.nJ,e.G7=t.G7,i.push(e)}return i}Ctt(){return this.Rtt.slice()}kn(){je(this.iX),this.utt.clear(),this.ftt(),this.OO.L.CI.forEach(t=>this.wtt(t)),this.Wu.mn(Gu.yn,this.stt)}constructor(t,i,s,e,n){this.utt=Zs(),this.ktt=!0,this.Q7=void 0,this.ttt=Jr({},KL),this.Rtt=[],this.OO=void 0,this.vT=void 0,this.sc=void 0,this.ntt=void 0,this.ctt=t=>this.iW(t.SO),this.dtt=t=>this.XV(t.SO),this.ltt=()=>this.Att(),this.gtt=t=>this.ytt(t.SO),this.mtt=t=>this.btt(t.SO),this.ptt=t=>this.Ett(t.SO),this.stt=t=>this.oe(t.width,t.height),this.OO=t,this.ntt=this.Q7=n,this.vT=this.Ntt(s),this.sc=e,i.appendChild(this.vT)}};function sO(t,i,s,e,n){const r=t.My();let h=r,o=1,a=!1;const u=C(getComputedStyle(i).lineHeight)/4;if(!S(u)&&u>0){for(let i=0;i<s.length&&!a;i++){for(;!rO(t,e,s[i],.01)&&(!e.lO(t)||eO(t,n));)nO(t,s[i],u);if(e.lO(t)){h=t.My(),a=!0;break}const c=hO(t,e);o>c&&(h=t.My(),o=c),t=r.My()}e.lO(t)||(h=r.My())}i.style.left=(h.U7-e.U7)/e.Ti*100+"%",i.style.top=(h.X7-e.X7)/e.Mi*100+"%"}function eO(t,i){return i.some(i=>t.Z7(i))}function $u(t){return new tO(t.left,t.top,t.width,t.height)}var yi=function(t){return t[t.POS_X=0]="POS_X",t[t.NEG_X=1]="NEG_X",t[t.POS_Y=2]="POS_Y",t[t.NEG_Y=3]="NEG_Y",t}({});function nO(t,i,s){switch(i){case 0:t.U7+=s;break;case 1:t.U7-=s;break;case 2:t.X7+=s;break;case 3:t.X7-=s}}function rO(t,i,s,e){switch(s){case 0:return t.W7>i.W7+e;case 1:return t.U7<i.U7-e;case 2:return t.G7>i.G7+e;case 3:return t.X7<i.X7-e}}function hO(t,i){return _.max(0,_.min(t.W7,i.W7)-_.max(t.U7,i.U7))*_.max(0,_.min(t.G7,i.G7)-_.max(t.X7,i.X7))/(t.Ti*t.Mi)}r();var oO=function(t){return t.il='"Courier New", Courier, "Nimbus Mono L", "Cutive Mono", monospace',t.sl='"Times New Roman", Times, Georgia, Cambria, "PT Serif Caption", serif',t.nl='"Deja Vu Sans Mono", "Lucida Console", Monaco, Consolas, "PT Mono", monospace',t.rl='Arial, Helvetica, Verdana, "PT Sans Caption", sans-serif',t}({});function aO(t,i){return t?{Dtt:t.Dtt,Btt:t.Btt,Mtt:t.Mtt,Ul:i}:null}function uO(t){const i=t?t.match(/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i):null;return i?{Dtt:x(i[1],16),Btt:x(i[2],16),Mtt:x(i[3],16)}:null}function cO(t){return("0"+t.toString(16)).slice(-2)}function dO(t){return"#"+cO(t.Dtt)+cO(t.Btt)+cO(t.Mtt)}function lO(t){const i=t?t.match(/^rgba\(([0-9]+),\s*([0-9]+),\s*([0-9]+),\s*([0-9.]+)\)$/i):null;return i?{Dtt:x(i[1],10),Btt:x(i[2],10),Mtt:x(i[3],10),Ul:C(i[4])}:null}function fO(t,i){return function(t){return t?"rgba("+t.Dtt+", "+t.Btt+", "+t.Mtt+", "+t.Ul+")":void 0}(aO(uO(t),i/100))}var el=function(t){return t.BLACK="#000000",t.WHITE="#FFFFFF",t.GREEN="#00ff00",t.BLUE="#0000ff",t.CYAN="#00ffff",t.RED="#ff0000",t.YELLOW="#ffff00",t.MAGENTA="#ff00ff",t.TRANSPARENT="transparent",t}({});function vO(t){return gO[t||"none"]}var _O,gO={none:"",dropshadow:"#222 2px 2px 3px, #222 2px 2px 4px, #222 2px 2px 5px",raised:"#222 1px 1px, #222 2px 2px, #222 3px 3px",depressed:"#ccc 1px 1px, #ccc 0px 1px, #222 -1px -1px, #222 0px -1px",uniform:"#222 -1px -1px 0, #222 1px -1px 0, #222 -1px 1px 0, #222 1px 1px 0"},mO="monospace, sans-serif",pO="Arial, Helvetica, sans-serif",wO='"Times New Roman", Times, serif',yO=kg({monospace:"monospace",sansSerif:pO,serif:wO,monospaceSansSerif:mO,monospaceSerif:"monospace, serif",proportionalSansSerif:pO,proportionalSerif:wO,default:mO}),bO="1.3em",AO=class extends iO{Ntt(t){const i=h.createElement("div");i.className="theoplayer-ttml-texttrack-"+t;const s=i.style;return s.position="absolute",Nl(s,"flex"),s.flexDirection=s.webkitFlexDirection="column",s.overflow="hidden",s.pointerEvents="none",s.top="0",s.left="0",s.width="100%",s.height="100%",s.fontSize="16px",s.lineHeight=bO,i}oe(t,i){const s=16*_.min(t/640,i/360)*$L(this.j7);this.iX.style.fontSize=s+"px"}xtt(t,i,s){for(const t of i)!s&&t.ro||this.Y7(t);const e=[],n=$u(this.iX.getBoundingClientRect());e.push(...this.Ptt(n));for(const i of t){const t=this.Ltt(i,e,n);for(const i of t)e.push(i.H7(.1))}}Ltt(t,i,s){let e=this.K7(t);e||(e=this.Ott(t),this.Itt(t,e));for(const t of e)this.iX.appendChild(t);const n=[],r=[yi.POS_Y,yi.NEG_Y,yi.POS_X,yi.NEG_X];for(const t of e){sO(MO(t),t,r,s,i),n.push(MO(t))}return n}Ott(t){const i=[],s=t.xV,e=t.AV,n=t.NV,r=t.U,o=t.EV,a=o?_.min(640/o.width,360/o.height):1,u=this.j7;if(0===w.keys(e).length){const t=h.createElement("div");DO(t),SO(r,s,n,t,t,a,u),TO(t,"body",u),t.firstChild&&i.push(t)}else for(const t of w.keys(e)){const o=h.createElement("div");o.id=t,DO(o),RO(o,"region",e[t],s,a),SO(r,s,n,o,o,a,u),TO(o,"body",u),o.firstChild&&i.push(o)}return i}ett(t){return pD(this.iX,t),super.ett(t)}constructor(t,i,s,e){super(t,i,s,e,KL)}};function SO(t,i,s,e,n,r,o){if(Qo(t)&&function(t){const i=t.VE.toUpperCase();return"SPAN"===i||"P"===i||"BR"===i||"DIV"===i||"BODY"===i}(t)){const a=kO(t);if(!a||(null==n?void 0:n.id)===a){let a;if("BODY"===t.VE.toUpperCase())a=n;else{if(a=function(t){let i;switch(t.VE.toUpperCase()){case"BR":i=h.createElement("br");break;case"SPAN":i=h.createElement("span"),BO(i),EO(i,t);break;case"P":i=h.createElement("p"),function(t){BO(t);const i=t.style;i.textAlign="inherit",i.padding="0",i.margin="0"}(i),EO(i,t);break;case"DIV":i=h.createElement("div"),EO(i,t)}return i}(t),!a)return;e.appendChild(a)}!function(t,i,s,e,n){const r=i.sR("style");PO(t,i.VE,r,s,e,n),function(t,i,s,e){for(const n of i.tR)CO(t,i.VE,n.VE,n.XE,s,e)}(t,i,e,n)}(a,t,i,n,r),function(t,i,s){let e=null==i?void 0:i.sR("smpte:backgroundImage");if(e){e=e.replace("#","");const n=s&&xO(s,t=>t.tR.some(t=>"id"===t.VE&&t.XE===e));n&&IO(t,n,i,!0)}!function(t,i){const s=i.m[0];if(!s||"metadata"!==s.VE.toLowerCase())return;const e=s.m[0];IO(t,e,i)}(t,i)}(a,t,s),TO(a,t.VE,o);for(const e of t.zE)SO(e,i,s,a,n,r,o)}}else if(XA(t)){const i=h.createTextNode(t.hk);if("SPAN"!==e.nodeName.toUpperCase()){const t=h.createElement("span");BO(t),TO(t,"span",o),t.appendChild(i),e.appendChild(t)}else e.appendChild(i)}}function TO(t,i,s){const e=t.style;switch(s.QQ&&(e.fontFamily=s.QQ),s.JQ&&(e.color=s.JQ),i.toLowerCase()){case"span":s.tJ&&(e.background=s.tJ);break;case"p":case"div":s.iJ&&(e.backgroundColor=s.iJ);break;case"body":s.sJ&&(e.textShadow=vO(s.sJ))}}function kO(t){const i=t.sR("region");if("p"===t.VE.toLowerCase())return i;const s=[];for(const i of t.m)s.push(kO(i));return xc(s),0===s.length?i:1===s.length?null!=(e=s[0])?e:i:void 0;var e}function EO(t,i){const s=i.eR(bR,"id");s&&(t.id=s)}function RO(t,i,s,e,n){PO(t,i,s.style,e,t,n);for(const e of w.keys(s))CO(t,i,e,s[e],t,n)}function xO(t,i){if(i(t))return t;for(const s of t.m){const t=xO(s,i);if(t)return t}return null}function IO(t,i,s,e){void 0===e&&(e=!1),e&&(t.style.width=t.style.height="100%");const n=h.createElement("img");n.src=function(t){const i=t&&t.zE.length>0?t.zE[0]:null;return i&&XA(i)?"data:image/png;base64,"+i.hk:""}(i),n.id=t.id,n.style.height="100%",n.style.maxWidth="100%",function(t,i){const s=t.style;Nl(s,"flex"),s.flexDirection=s.webkitFlexDirection="column";const e=i.sR("smpte:backgroundImageVertical");let n="center";if(e)switch(e.toLowerCase()){case"left":n="flex-start";break;case"center":n="center";break;case"right":n="flex-end";break;case"inherit":n="inherit"}s.justifyContent=s.webkitJustifyContent=n;const r=i.sR("smpte:backgroundImageHorizontal");let h="center";if(r)switch(r.toLowerCase()){case"left":h="flex-start";break;case"center":h="center";break;case"right":h="flex-end";break;case"inherit":h="inherit"}s.alignItems=s.webkitAlignItems=h}(t,s),t.appendChild(n)}function PO(t,i,s,e,n,r){if(s)for(const h of s.split(" "))if(e[h])for(const s of w.keys(e[h]))"style"===s.toLowerCase()?PO(t,i,e[h][s],e,n,r):CO(t,i,s,e[h][s],n,r)}function CO(t,i,s,e,n,r){const h=t.style;switch(s){case"backgroundColor":h.backgroundColor=e;break;case"color":h.color=e;break;case"direction":h.direction=e;break;case"display":"none"===e&&(h.display="none");break;case"fontFamily":var o;h.fontFamily=null!=(o=yO.get(e))?o:e;break;case"fontSize":{let t=e;if(sm(t,"px")){const i=Number(t.slice(0,-2));t=i*r/16+"em"}else sm(t,"c")&&(t=t.replace("c","em"));h.fontSize=t,h.lineHeight&&"inherit"!==h.lineHeight||(h.lineHeight=bO);break}case"fontStyle":h.fontStyle=e;break;case"fontWeight":h.fontWeight=e;break;case"lineHeight":{let t=e;if(sm(t,"px")){const i=Number(t.slice(0,-2));t=i*r+"px"}h.lineHeight=t;break}case"opacity":h.opacity=e;break;case"overflow":h.overflow=e;break;case"padding":h.padding=e;break;case"textAlign":h.textAlign=e;break;case"textDecoration":switch(e){case"lineThrough":h.textDecoration="line-through";break;case"underline":case"overline":h.textDecoration=e;break;case"noUnderline":case"noLineThrough":case"noOverline":h.textDecoration="none"}break;case"unicodeBidi":switch(e){case"bidiOverride":h.unicodeBidi="bidi-override";break;case"normal":case"embed":case"isolate":h.unicodeBidi=e}break;case"visibility":h.visibility=e;break;case"zIndex":h.zIndex=e;break;case"displayAlign":{let t;switch(e.toLowerCase()){case"before":t="flex-start";break;case"center":t="center";break;case"after":t="flex-end";break;case"justify":t="space-between";break;default:return}h.justifyContent=h.webkitJustifyContent=t;break}case"extent":{const s=NO(i.toLowerCase())?n:t;let r,h;const o=e.split(" ",2);2===o.length?(r=o[0],h=o[1]):r=h="100%",s&&(s.style.height=h,s.style.width=r);break}case"origin":{const s=NO(i.toLowerCase())?n:t,[r,h]=e.split(" ",2);s&&(r||h)&&(r&&(s.style.left=r),h&&(s.style.top=h));break}case"showBackground":case"textOutline":break;case"wrapOption":switch(e){case"wrap":h.whiteSpace="normal";break;case"noWrap":h.whiteSpace="nowrap"}break;case"writingMode":{let t,i,s,n;switch(e){case"lrtb":case"lr":t="horizontal-tb";break;case"rltb":t="horizontal-tb",i="rtl",n="bidi-override";break;case"tbrl":case"tb":t="vertical-rl",s="upright";break;case"tblr":t="vertical-lr",s="upright";break;case"rl":t="horizontal-tb",i="rtl";break;default:return}h.writingMode=t,h.setProperty("-webkit-writing-mode",t),i&&(h.direction=i),s&&(h.textOrientation=s,h.setProperty("-webkit-text-orientation",s)),n&&(h.unicodeBidi=n);break}case"linePadding":if(sm(e,"c")){const t=e.replace("c","em");h.paddingLeft=h.paddingRight=t}break;case"multiRowAlign":"auto"===e.toLowerCase()?h.textAlign="":h.textAlign=e}}function NO(t){return"div"===t||"p"===t||"span"===t}function DO(t){const i=t.style;Nl(i,"flex"),i.flexDirection=i.webkitFlexDirection="column",i.top="auto",i.left="5%",i.width="90%",i.height="100%",i.maxHeight="100%",i.maxWidth="100%",i.overflow="visible",i.position="absolute",i.fontFamily=pO,i.color=el.WHITE,i.background=el.TRANSPARENT,i.textShadow=vO("uniform"),i.textAlign="start",i.writingMode="horizontal-tb",i.setProperty("-webkit-writing-mode","horizontal-tb"),i.padding="0",i.margin="0",i.fontSize="inherit",i.lineHeight="inherit"}function BO(t){const i=t.style;i.fontFamily="inherit",i.color="inherit",i.fontSize="inherit",i.lineHeight="inherit",i.textShadow="inherit"}function MO(t){let i=$u(t.getBoundingClientRect());if("visible"===getComputedStyle(t).overflow&&t.scrollHeight>t.clientHeight){const s=t.children;for(let t=0;t<s.length;t++){const e=s[t];i=i.z7($u(e.getBoundingClientRect()))}}return i}function LO(t){return _O||(_O=s.document.createElement("textarea")),_O.innerHTML=t,_O.value}function OO(t,i){let s="Data",e="";const n=[];let r=t.charAt(i.ac),h="";const o={Kp:"starttag",jE:"",Ftt:[]};for(;i.ac<t.length+1;){switch(r=i.ac<t.length?t.charAt(i.ac):"EOF",s){case"Data":switch(r){case"&":const n=t.substring(i.ac).match(/&#?[0-9a-zA-Z]+;/);n?(e+=LO(n[0]),i.Dy(n[0].length-1)):e+="&";break;case"<":if(e)return{Kp:"string",U:e};s="Tag";break;case"EOF":return{Kp:"string",U:e};default:e+=r}break;case"Tag":switch(r){case"\t":case"\n":case"\f":case" ":s="StartTagAnnotation";break;case".":s="StartTagClass";break;case"/":s="EndTag";break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":e=r,s="TimestampTag";break;case">":return i.Dy(1),o;case"EOF":return o;default:e=r,s="StartTag"}break;case"StartTag":switch(r){case"\t":case"\f":case" ":s="StartTagAnnotation";break;case"\n":h=r,s="StartTagAnnotation";break;case".":s="StartTagClass";break;case">":return i.Dy(1),{Kp:"starttag",jE:e,Ftt:[]};case"EOF":return{Kp:"starttag",jE:e,Ftt:[]};default:e+=r}break;case"StartTagClass":switch(r){case"\t":case"\f":case" ":n.push(h),h="",s="StartTagAnnotation";break;case"\n":n.push(h),h=r,s="StartTagAnnotation";break;case".":n.push(h),h="";break;case">":return i.Dy(1),n.push(h),{Kp:"starttag",jE:e,Ftt:n};case"EOF":return n.push(h),{Kp:"starttag",jE:e,Ftt:n};default:h+=r}break;case"StartTagAnnotation":switch(r){case"&":s="CharRefInAnnotation";break;case">":i.Dy(1);let t=h.trim();return t=t.replace(/\s/," "),{Kp:"starttag",jE:e,Ftt:n,Vtt:t};default:h+=r}break;case"CharRefInAnnotation":let a="";for(let s=i.ac;">"===t.charAt(s);s++)a+=t.charAt(s);h+=a||"&",s="StartTagAnnotation";break;case"EndTag":switch(r){case">":return i.Dy(1),{Kp:"endtag",jE:e};case"EOF":return{Kp:"endtag",jE:e};default:e+=r}break;case"TimestampTag":switch(r){case">":return i.Dy(1),{Kp:"timestamp",Wtt:e};case"EOF":return{Kp:"timestamp",Wtt:e};default:e+=r}}i.Dy(1)}return o}r(),r();var FO=function(t){return t.Utt="string",t.Gtt="starttag",t.Xtt="endtag",t.Ztt="timestamp",t}({});function VO(t){let i;if(t.getBoundingClientRect&&t.parentNode&&(i=t.getBoundingClientRect()),!i)return{left:0,top:0};const e=h.documentElement,n=h.body,r=e.clientLeft||n.clientLeft||0,o=s.pageXOffset||n.scrollLeft,a=i.left+o-r,u=e.clientTop||n.clientTop||0,c=s.pageYOffset||n.scrollTop,d=i.top+c-u;return{left:_.round(a),top:_.round(d)}}function WO(t,i,s,e){if(void 0===e&&(e=0),!t||!i)return;t.style.left="0px";const n=t.getClientRects(),r=i.getClientRects();if(0===n.length||0===r.length)return;const h=n[0],o=r[0],a=h.width/2+h.left;UO(t,o.width/2+o.left-a,s,e)}function UO(t,i,s,e){void 0===e&&(e=0),XO(t,i,"left","right",s,e)}function GO(t,i,s,e){void 0===e&&(e=0),XO(t,i,"top","bottom",s,e)}function XO(t,i,s,e,n,r){void 0===r&&(r=0);const h=t.getClientRects();if(n&&h.length>0){const t=h[0];i=ss(i,n[s]+r-t[s],n[e]-r-t[e])}t.style[s]=i+"px"}function qu(t,i){void 0===t.textContent?t.innerText=i:t.textContent=i}r();var ZO={JQ:el.WHITE,QQ:"sans-serif",$Q:"100%",tJ:"rgba(0,0,0,0.8)",iJ:el.TRANSPARENT,sJ:"none",eJ:void 0,nJ:void 0,rJ:void 0,hJ:void 0},HO="theoplayer-webvtt-region-",zO="theoplayer-webvtt-styling-",YO="theoplayer-webvtt-default-style",KO=5.23,qO=class extends iO{Ntt(t){const i=h.createElement("div");i.className="theoplayer-webvtt-texttrack-"+t,Bl(i),i.style.overflow="hidden",i.style.pointerEvents="none";const s=this.j7.QQ;return s&&(i.style.fontFamily=s),i.style.whiteSpace="pre-line",i}Fj(){this.iX.appendChild(this.Htt),super.Fj()}oe(t,i){const s=_.min(t/100,i/100),e=$L(this.j7);this.ztt.forEach(t=>{let{CO:i,Ytt:n}=t;this.Ktt(n,s,e,i)}),this.Ktt(this.Htt,s,e)}ett(t){pD(this.iX,t),super.ett(t)}xtt(t,i,s){const e=this.iX,n=this.Wu.Iu/100,r=[];for(const i of t)void 0!==i.CO&&(Ft(r,i.CO)||r.push(i.CO));this.ztt.forEach((t,i)=>{let{CO:e,Ytt:n}=t;!s&&Ft(r,e)||(je(n),this.ztt.delete(i))});for(const t of i)!s&&t.ro||this.Y7(t);const h=[],o=$u(this.Htt.getBoundingClientRect());h.push(...this.Ptt(o));for(const t of r){let i;this.ztt.has(t.o)?i=this.ztt.get(t.o).Ytt:(i=sF(t,n),e.appendChild(i),this.ztt.set(t.o,{CO:t,Ytt:i})),h.push($u(i.getBoundingClientRect()))}t.sort(hF);for(const i of t){const t=this.Ltt(i,h,o);void 0!==t&&h.push(t.H7(.1))}}Ltt(t,i,s){var e;let n;t.CO?(n=this.ztt.get(t.CO.o).Ytt,"up"===t.CO.jO&&n.children.length>=1&&(n.style.transitionProperty="top",n.style.transitionDuration="0.433s")):n=this.Htt;let r=null==(e=this.K7(t))?void 0:e[0];if(r||(r=this.qtt(t),this.Itt(t,[r])),n.appendChild(r),t.CO||(jO(r,t),t.DO?function(t,i,s,e){const n=eF(t),r=n?s.Mi:s.Ti;let h=C(getComputedStyle(i).lineHeight);if(0===h||S(h))return;const o=$u(i.getBoundingClientRect());let a=_.round(gE(t));"rl"===t.Pt&&(a=-(a+1));let u=h*a;"rl"===t.Pt&&(u=u-o.Ti+h);a<0&&(u+=r,h=-h);n?o.X7+=u:o.U7+=u;const c=o.My();let d=!1;for(;!s.lO(o)||eO(o,e);)if(n)if(h<0&&o.X7<s.X7||h>0&&o.G7>s.G7){if(o.X7=c.X7,d)break;h=-h,d=!0}else o.X7+=h;else if(h<0&&o.U7<s.U7||h>0&&o.W7>s.W7){if(o.U7=c.U7,d)break;h=-h,d=!0}else o.U7+=h;n?i.style.top=(o.X7-s.X7)/s.Mi*100+"%":i.style.left=(o.U7-s.U7)/s.Ti*100+"%"}(t,r,s,i):function(t,i,s,e){const n=$u(i.getBoundingClientRect());if(0===n.Ti||0===n.Mi)return;eF(t)?"center"===t.IO?n.X7-=n.Mi/2:"end"===t.IO&&(n.X7-=n.Mi):"center"===t.IO?n.U7-=n.Ti/2:"end"===t.IO&&(n.U7-=n.Ti);let r;r=""===t.Pt?[yi.POS_Y,yi.NEG_Y,yi.POS_X,yi.NEG_X]:"lr"===t.Pt?[yi.POS_X,yi.NEG_X,yi.POS_Y,yi.NEG_Y]:[yi.NEG_X,yi.POS_X,yi.POS_Y,yi.NEG_Y];sO(n,i,r,s,e)}(t,r,s,i)),!t.CO)return $u(r.getBoundingClientRect())}qtt(t){const i=new J,s=t.U,e=this.jtt(t),n={Qtt:void 0,xe:e};let r=n,o="",a="";const u=[n],c=[],d=[];for(;i.ac<s.length;){const t=OO(s,i);if(t.Kp===FO.Utt){const i=h.createElement("span");qu(i,t.U),QO(i,u),""!==o&&(i.lang=o),this.Jtt(i,a),r.xe.appendChild(i)}else if(t.Kp===FO.Gtt){const i=t.jE.toLowerCase();switch(i){case"i":case"b":case"u":case"ruby":{const s=h.createElement(i);r.xe.appendChild(s),r={Qtt:t,xe:s},u.push(r);break}case"rt":var l;if("ruby"===(null==(l=r.Qtt)?void 0:l.jE.toLowerCase())){const i=h.createElement("rt");r.xe.appendChild(i),r={Qtt:t,xe:i},u.push(r)}break;case"c":case"v":r={Qtt:t,xe:r.xe},u.push(r);break;case"font":{var f;const i=null==(f=t.Vtt)?void 0:f.match(/(?:^| )color=["']([^"']+)/i);i&&(a=i[1],d.push(a),r={Qtt:t,xe:r.xe},u.push(r));break}case"lang":var v;o=null!=(v=t.Vtt)?v:"",c.push(o)}}else if(t.Kp===FO.Xtt){var _;const i=t.jE.toLowerCase(),s=null==(_=r.Qtt)?void 0:_.jE.toLowerCase();s===i?(u.pop(),r=u[u.length-1],"font"===i&&(d.pop(),a=d.length>0?d[d.length-1]:"")):"rt"===s&&"ruby"===i?(u.pop(),u.pop(),r=u[u.length-1]):"lang"===i&&(c.pop(),o=c.length>0?c[c.length-1]:"")}else if(t.Kp===FO.Ztt){const i=t.Wtt,s=new J;try{tR(i,s)}catch(t){Tv("ERROR collecting timestamp",t)}}}return e}Jtt(t,i){const s=this.j7,e=this.J7;s.tJ&&(t.style.background=s.tJ);const n=e.JQ||i||s.JQ;n&&(t.style.color=n)}Ktt(t,i,s,e){if(e){const n=JO(e,i);t.style.height=n*s+"px",t.style.left=$O(e)+"%",t.style.top=tF(e,i)+"px"}t.style.fontSize=KO*i*s+"px"}jtt(t){const i=h.createElement("div");i.style.position="absolute",i.style.margin="0",i.style.padding="0",i.style.unicodeBidi="plaintext",i.style.wordWrap="break-word",i.style.overflowWrap="break-word",i.style.width="auto",i.style.textAlign=t.RO,function(t,i){"rl"===i.Pt?t.style.writingMode="vertical-rl":"lr"===i.Pt?t.style.writingMode="vertical-lr":t.style.writingMode="horizontal-tb"}(i,t),function(t,i){const s=wE(i);eF(i)?(t.style.width=s+"%",t.style.height="auto"):(t.style.height=s+"%",t.style.width="auto")}(i,t),jO(i,t);const s=this.j7.iJ;s&&(i.style.background=s);const e=this.j7.JQ;return e&&(i.style.color=e),i.style.textShadow=vO(this.j7.sJ),i}constructor(t,i,s,e){super(t,i,s,e,ZO),this.ztt=Se(),this.Htt=iF(3),function(t){const i=function(t){const i=null==t.getRootNode?void 0:t.getRootNode.call(t);if(i&&i.host)return i}(t);var s;const e=null!=(s=null!=i?i:t.ownerDocument)?s:h;if(e.getElementById(YO))return;const n=[];for(const[t,i]of nF)n.push("."+zO+t+" { color: "+i+" !important; }"),n.push("."+zO+"bg"+rF+t+" { background-color: "+i+" !important; }"),n.push("video::cue(."+t+") { color: "+i+"; }"),n.push("video::cue(.bg"+rF+t+") { background-color: "+i+"; }");const r=h.createElement("style");r.id=YO,r.innerHTML=n.join("\n"),i?i.appendChild(r):e.body.appendChild(r)}(i)}};function jO(t,i){let s,e;const n=pE(i),r=mE(i),h=wE(i);if(eF(i)){switch(n){case"line-left":s=r;break;case"center":s=r-h/2;break;case"line-right":s=r-h}e=i.DO?0:gE(i)}else{switch(n){case"line-left":e=r;break;case"center":e=r-h/2;break;case"line-right":e=r-h}s=i.DO?0:gE(i)}t.style.left=s+"%",t.style.top=e+"%"}function QO(t,i){for(const s of i)if(s.Qtt){for(const i of s.Qtt.Ftt)fi(t,zO+i);"v"===s.Qtt.jE.toLowerCase()&&s.Qtt.Vtt&&fi(t,"theoplayer-webvtt-voice-"+s.Qtt.Vtt)}}function JO(t,i){return t.YO*(KO*i)*1.14}function $O(t){return t.QO-t.KO*t.Ti/100}function tF(t,i){const s=t.JO,e=t.qO*JO(t,i)/100;return _.max(0,s-e)}function iF(t){const i=h.createElement("div");return i.className=HO+"default",Bl(i),i.style.wordWrap="break-word",i.style.writingMode="horizontal-tb",i.style.pointerEvents="none",i.style.width="auto",i.style.height="auto",i.style.maxHeight="100%",i.style.minHeight="0px",i.style.padding="0",i.style.boxSizing="border-box",i.style.fontSize=KO*t+"px",i.style.lineHeight="1.14em",i}function sF(t,i){const s=iF(i);s.className=HO+t.o;const e=t.Ti,n=JO(t,i);return s.style.width=e+"%",s.style.height=n+"px",s.style.left=$O(t)+"%",s.style.right="",s.style.top=tF(t,i)+"px",s.style.bottom="",s.style.boxSizing="border-box",s}function eF(t){return""===t.Pt}var nF=[["white","#fff"],["lime","#0f0"],["cyan","#0ff"],["red","#f00"],["yellow","#ff0"],["magenta","#f0f"],["blue","#00f"],["black","#000"]],rF=String.fromCharCode(95);function hF(t,i){const s=gE(t),e=gE(i),n=oF(s,t.DO),r=oF(e,i.DO);return n&&r?s-e||An(i,t)||i.qI-t.qI:An(t,i)||t.qI-i.qI}function oF(t,i){return i?t<0?t>-8:t>8:t>50}r(),r(),r();var aF=function(t){return t.FONT_REGULAR="regular",t.FONT_UNDERLINE="underline",t.FONT_ITALICS="italics",t.FONT_UNDERLINE_ITALICS="underline-italics",t}({}),uF={JQ:el.WHITE,QQ:oO.nl,$Q:"100%",tJ:el.BLACK,iJ:"transparent",sJ:"none",$tt:"regular",eJ:void 0,nJ:void 0,rJ:void 0,hJ:void 0},cF=[{tit:el.WHITE,$tt:"regular",iit:0},{tit:el.WHITE,$tt:"underline",iit:0},{tit:el.GREEN,$tt:"regular",iit:0},{tit:el.GREEN,$tt:"underline",iit:0},{tit:el.BLUE,$tt:"regular",iit:0},{tit:el.BLUE,$tt:"underline",iit:0},{tit:el.CYAN,$tt:"regular",iit:0},{tit:el.CYAN,$tt:"underline",iit:0},{tit:el.RED,$tt:"regular",iit:0},{tit:el.RED,$tt:"underline",iit:0},{tit:el.YELLOW,$tt:"regular",iit:0},{tit:el.YELLOW,$tt:"underline",iit:0},{tit:el.MAGENTA,$tt:"regular",iit:0},{tit:el.MAGENTA,$tt:"underline",iit:0},{tit:el.WHITE,$tt:"italics",iit:0},{tit:el.WHITE,$tt:"underline-italics",iit:0},{tit:el.WHITE,$tt:"regular",iit:0},{tit:el.WHITE,$tt:"underline",iit:0},{tit:el.WHITE,$tt:"regular",iit:4},{tit:el.WHITE,$tt:"underline",iit:4},{tit:el.WHITE,$tt:"regular",iit:8},{tit:el.WHITE,$tt:"underline",iit:8},{tit:el.WHITE,$tt:"regular",iit:12},{tit:el.WHITE,$tt:"underline",iit:12},{tit:el.WHITE,$tt:"regular",iit:16},{tit:el.WHITE,$tt:"underline",iit:16},{tit:el.WHITE,$tt:"regular",iit:20},{tit:el.WHITE,$tt:"underline",iit:20},{tit:el.WHITE,$tt:"regular",iit:24},{tit:el.WHITE,$tt:"underline",iit:24},{tit:el.WHITE,$tt:"regular",iit:28},{tit:el.WHITE,$tt:"underline",iit:28}],dF=[11,-1,1,2,3,4,12,13,14,15,5,6,7,8,9,10];function lF(t,i){return PE(t.sit,i.sit)||vc(t.VB,i.VB)}r();var Ht=32,fF=/CC([1-4])=(.*)/;function vF(t){if(!t)return[];const i=[],s=t.trim().split(";");if(s.every(t=>t.match(fF)))for(const t of s){const[,s,e]=t.match(fF);i.push({eit:Number(s),nit:e})}else for(let t=0;t<s.length;t++)i.push({eit:t+1,nit:s[t]});return i}var _F=class t{get rit(){return this.oit.hit}get ait(){return this.oit.uit}get cit(){return this.oit.uit.iit-this.oit.hit.iit+1}get dit(){return this.oit.uit.fit-this.oit.hit.fit+1}wr(){return this.vit=this._it(),this.git(),this.mit(),this.vit}_it(){const t=h.createElement("div");t.style.position="absolute",t.style.margin="0",t.style.padding="0",t.style.whiteSpace="pre",t.style.width=this.cit/Ht*this.wit.pit*100+"%",t.style.height=1.2*this.dit+"em",t.style.lineHeight="1.2em",t.style.letterSpacing=this.wit.yit?"calc(1em - 1ch)":"";const i=this.Q7.QQ;i&&(t.style.fontFamily=i);const s=this.Q7.iJ;return s&&(t.style.backgroundColor=s),t}git(){if(!this.vit)return;const t=this.rit.fit/15*100;let i=this.rit.iit/Ht*100,s=(Ht-this.ait.iit-1)/Ht*100;const e=(15-this.ait.fit-1)/15*100;this.wit.Ait||(i=s=1,this.vit.style.width="98%"),e<t?this.vit.style.bottom=e*this.wit.pit+"%":this.vit.style.top=t*this.wit.pit+"%",s<i?this.vit.style.right=s+"%":this.vit.style.left=i+"%"}mit(){const t=this.oit.Sit.sort(gF);for(let i=0;i<t.length;i++)this.Tit(t[i-1],t[i]),this.kit(t[i]);this.Tit(t[t.length-1],void 0)}kit(i){var s;const e=JL(this.Q7,i.Eit),n=t.Rit(e);qu(n,i.xit),null==(s=this.vit)||s.appendChild(n)}static Rit(t){const i=h.createElement("span");i.style.display="inline-block",t.$tt!==aF.FONT_ITALICS&&t.$tt!==aF.FONT_UNDERLINE_ITALICS||(i.style.fontStyle="italic"),t.$tt!==aF.FONT_UNDERLINE&&t.$tt!==aF.FONT_UNDERLINE_ITALICS||(i.style.textDecoration="underline");const s=t.JQ;s&&(i.style.color=s);const e=t.tJ;return e&&(i.style.backgroundColor=e),i.style.textShadow=vO(t.sJ),i.style.height="1.2em",i}Tit(t,i){const s=t?t.uit.fit:this.oit.hit.fit,e=i?i.hit.fit:this.oit.uit.fit;let n=t?t.uit.iit:this.oit.hit.iit;const r=i?i.hit.iit:this.oit.uit.iit;s<e&&(!i||t&&t.hit.fit!==i.hit.fit?this.Iit():this.Pit(this.oit.uit.iit-n),n=this.oit.hit.iit),n<r&&(i?this.Pit(r-n):this.Iit())}Iit(){var t;const i=h.createElement("br");null==(t=this.vit)||t.appendChild(i)}Pit(t){var i;if(t<=0)return;const s=h.createElement("span");s.style.display="inline-block",qu(s,em(" ",t)),null==(i=this.vit)||i.appendChild(s)}constructor(t,i,s){this.oit=void 0,this.wit=void 0,this.Q7=void 0,this.vit=void 0,this.oit=t,this.wit=i,this.Q7=s}};function gF(t,i){return function(t,i){if(t.fit!==i.fit)return t.fit-i.fit;return t.iit-i.iit}(t.hit,i.hit)}var mF=class extends iO{Ntt(t){const i=h.createElement("div");return i.className="theoplayer-cea608-texttrack-"+t,i.style.position="absolute",i.style.overflow="hidden",i.style.pointerEvents="none",i.style.top="10%",i.style.bottom="10%",this.j7.QQ&&(i.style.fontFamily=this.j7.QQ),i}oe(t,i){this.Ml()}Ml(){const t=$L(this.j7);this.Cit=function(t){return{pit:t/100,yit:t<=100,Ait:t<=150}}(100*t);const i=this.Nit/Ht;this.Dit=i*t,this.iX.style.fontSize=this.Dit+"px"}get Nit(){let t=this.iX.offsetWidth;return this.Cit&&this.Cit.Ait||(t*=.8),t}xtt(t,i,s){for(const t of i)!s&&t.ro||this.Y7(t);for(const i of t)this.Ltt(i)}Ltt(t){this.Cit&&this.Cit.Ait?this.Bit(80):this.Bit(100),this.Ml();let i=this.K7(t);i||(i=this.Ott(t),this.Itt(t,i));for(const t of i)this.iX.appendChild(t)}Ott(t){return t.U.map(t=>new _F(t,this.Cit,this.j7).wr())}Bit(t){const i=(100-t)/2;this.iX.style.left=i+"%",this.iX.style.width=t+"%"}constructor(t,i,s,e){super(t,i,s,e,uF),this.Dit=void 0,this.Cit=void 0}},pF=class t{Mit(t){for(const i of this.Lit)if(i.Ht===t)return i}static Oit(t){switch(t.Kp){case hr.TTML:case hr.SRT:case hr.WEBVTT:case hr.CEA608:return!0}return!1}Fit(t){switch(t.Kp){case hr.TTML:return new AO(t,this.Vit,t.Th,this.sc);case hr.SRT:case hr.WEBVTT:return new qO(t,this.Vit,t.Th,this.sc);case hr.CEA608:return new mF(t,this.Vit,t.Th,this.sc)}}Wit(t){let i=this.Mit(t);i||(i=this.Fit(t),i&&(i.Fj(),i.ett(this.RZ),this.Lit.push(i),t.Hk===Z.Kn&&i.Stt()))}Uit(t){const i=this.Lit;for(let s=i.length-1;s>=0;s-=1){const e=i[s];e.Ht===t&&(e.kn(),Lh(i,s))}}Git(i){HR(i.Lt)&&t.Oit(i)&&(i.Sx===Ra.ERROR?this.Uit(i):this.Wit(i))}get e6(){return this.Xit.ds||this.ea.HL}hr(){for(const t of this.Lit)t.Ht.mn(M.bI,this.Zit),t.Ht.mn(M.SI,this.Zit),t.kn();Lr(this.Lit)}kn(){this.hr();for(const t of this.Lit)t.kn();this.Gl.mn(Lu.nI,this.Hit),this.Gl.mn(Lu.hI,this.zit),this.Gl.mn(M.pa,this.Zit),this.Xit.mn(Ze.pa,this.Yit),this.ea.mn([ar.XL,ar.ZL],this.Yit),this.RZ.mn("yI",this.Kit)}constructor(t,i,s,e,n,r){this.Vit=void 0,this.sc=void 0,this.Gl=void 0,this.Xit=void 0,this.ea=void 0,this.Lit=[],this.RZ=void 0,this.Hit=t=>{const i=t.Ht;i.wn(M.bI,this.Zit),i.wn(M.SI,this.Zit),i instanceof fL&&(i.e6=this.e6),this.Git(i)},this.Zit=t=>{const i=t.Ht;this.Git(i)},this.zit=t=>{const i=t.Ht;i.mn(M.bI,this.Zit),i.mn(M.SI,this.Zit),this.Uit(i)},this.Yit=()=>{const t=this.e6;for(const i of this.Gl.CI)i instanceof fL&&(i.e6=t)},this.Kit=()=>{for(const t of this.Lit)t.ett(this.RZ)},this.Vit=t,this.sc=i,this.Gl=s,this.Xit=n,this.ea=r,this.RZ=e,this.Gl.wn(Lu.nI,this.Hit),this.Gl.wn(Lu.hI,this.zit),this.Gl.wn(M.pa,this.Zit),this.Xit.wn(Ze.pa,this.Yit),this.ea.wn([ar.XL,ar.ZL],this.Yit),this.RZ.wn("yI",this.Kit),this.Yit()}};r();var wF=class extends fr{get zL(){var t;return null!=(t=this.qit.ownerDocument.pictureInPictureEnabled)&&t}get HL(){return this.jit}async yo(){if(this.zL){if(!this.HL){const t=this.pw([ar.XL,ar.ma]);await this.qit.requestPictureInPicture(),await t,this.jit||this.So(new eu)}}else this.So(new eu)}async jo(){if(this.zL){if(this.jit){const t=this.pw([ar.ZL,ar.ma]);await this.qit.ownerDocument.exitPictureInPicture(),await t,this.jit&&this.So(new eu)}}else this.So(new eu)}kn(){this.Vo(),this.qit.removeEventListener("enterpictureinpicture",this.Qit),this.qit.removeEventListener("leavepictureinpicture",this.Jit)}constructor(t){super(),this.qit=void 0,this.jit=!1,this.Qit=()=>{this.jit=!0,this.So(new Ck)},this.Jit=()=>{this.jit=!1,this.So(new Nk)},this.qit=t,this.qit.addEventListener("enterpictureinpicture",this.Qit),this.qit.addEventListener("leavepictureinpicture",this.Jit)}};function yF(t){const i=new vN,s=function(t){const i=[];return lN.la(t)&&i.push(new lN(t)),fN.la(t)&&i.push(new fN(t)),i}(t);if(s.length>0){for(const t of s)i.mq(t);i.gq(s[0])}return i}var bF=class extends XL{get iX(){return this.vT}get Nx(){return this.vT.videoHeight}get Mx(){return this.vT.videoWidth}get Ma(){return this.$it}get pX(){return this.tst}Zx(){return this.vT}async Zg(){this.tst.kn(),this.$it.kn(),this.ist.kn(),this.sst.kn(),await super.Zg()}we(){super.we(),this.ist.we()}be(){super.be(),this.ist.be()}N7(t){super.N7(t),this.ist.N7(t)}constructor(t,i,s,e,n){super(t,i,s,e,n),this.ist=void 0,this.sst=void 0,this.$it=void 0,this.tst=void 0,this.$it=yF(t),this.tst=new wF(t),this.ist=new QL,this.sst=new pF(this.ist.xe,this.Wu,this.nt,this.Ql,this.Ma,this.pX)}};r(),r();r(),r();var AF=function(t){return t.nst="HELLO",t.rst="HI_THERE",t.hst="INITIALIZE",t.ost="APPEND_INIT",t.ast="APPEND_DATA",t.ust="ACK",t.cst="REMOVE",t.dst="DESTROY_SESSION",t}({}),SF=class{lst(t){return this.ta.Zo(async t=>{Ko(t);const i=new MessageChannel,s=i.port1,e=i.port2;od.serviceWorker.controller||await UA(od.serviceWorker,"install",t),"activated"!==od.serviceWorker.controller.state&&await UA(od.serviceWorker.controller,"activate",t);const n={kind:"HELLO",port:e};od.serviceWorker.controller.postMessage(n,[e]),s.start(),this.ap=s;try{const i=await UA(s,"message",t),e=i.data;if("HI_THERE"!==e.kind)throw new m("Could not set up message channel");this.mT=e.sessionId}catch(t){throw hc(t)&&this.fst(),t}},t)}vst(t,i){return this.ap,this.ta.Zo(async()=>{if(!this.ap)throw new m("MessageSession not set up yet or already closed.");i||(i=[]),this.ap.postMessage(t,i);const s=await UA(this.ap,"message");return s.data})}_st(){return this.ta.Zo(()=>this.fst())}fst(){if(!od.serviceWorker.controller)return;if("activated"!==od.serviceWorker.controller.state)return;if(!this.ap)return;const t={kind:"DESTROY_SESSION"};this.ap.postMessage(t),this.ap.close(),this.ap=void 0}constructor(){this.ap=void 0,this.mT=void 0,this.ta=new Fu}};r();var TF=class{get gst(){return this.mst}pst(t,i){const s=t-i;this.mst=s>this.gst?this.mst:s}wst(t){this.mst=t}constructor(){this.mst=1/0}};r(),r(),r();var fn=function(t){return t.Ck="audio",t.Nk="video",t.WV="metadata",t}({}),kF=class extends fr{get IR(){return void 0===this.yst||void 0===this.bst?ZT.tL():new ZT([this.yst,this.bst])}get Cd(){return{GT:this.mK}}get N3(){return I(this.mK)?Mo.Ck:rt(this.mK)?Mo.Nk:Mo.gk}get iK(){return this.mK}get B3(){return ZT.tL()}get Dj(){return 30}set Dj(t){}get Oj(){return 30}set Oj(t){}O3(t,i){}F3(t,i){}UJ(){return this.Ast}get ga(){return this.Sst}get Tst(){return this.yst}get EO(){return this.bst}async V3(){}async n3(t,i){}async W2(t,i,s){if(t.Kp!==Vt.fJ)throw new m("Streaming or opaque segments are not supported yet.");const e=t.hk,n=async()=>{const t=e.buffer,s={kind:AF.ast,mediaType:EF(this.mK),segment:e,startPts:i.kst,totalDuration:i.ct};if(await this.Est.vst(s,[t]),void 0===this.yst){const t=i.kst+i.bV;this.yst=t,this.bst=t}this.bst=this.bst+i.ct,this.So(new sh(Ws.dJ))};return this.ta.Zo(async t=>{Ko(t);try{this.Sst=!0,await n()}finally{this.Sst=!1}},s)}async X2(t,i,s){if(t.Kp!==Vt.fJ)throw new m("Streaming or opaque initialization segments are not supported yet.");const e=t.hk,n=async()=>{const t={kind:AF.ost,mediaType:EF(this.mK),segment:e};await this.Est.vst(t,[])};return this.ta.Zo(async t=>{Ko(t);try{this.Sst=!0,await n()}finally{this.Sst=!1}},s)}P3(){this.Ast=!0}y3(){this.Ast=!1}async vS(t,i,s){const e=async()=>{const t={kind:AF.cst,mediaType:EF(this.mK),endTime:i};await this.Est.vst(t),this.yst=void 0,this.bst=void 0,this.So(new sh(Ws.dJ))};return this.ta.Zo(async t=>{Ko(t);try{this.Sst=!0,await e()}finally{this.Sst=!1}},s)}SJ(t){return this.mK===t.GT}kJ(t){return this.mK=t.GT,Promise.resolve()}async Zg(){this.Vo(),await this.ta.kn()}constructor(t,i){super(),this.mK=void 0,this.Est=void 0,this.yst=void 0,this.bst=void 0,this.ta=void 0,this.Sst=void 0,this.Ast=void 0,this.mK=t,this.Est=i,this.yst=void 0,this.bst=void 0,this.ta=new Fu,this.Sst=!1,this.Ast=!1}};function EF(t){return t.match(/video/)?fn.Nk:fn.Ck}var RF=class t{static Rst(i,s,e,n){const r=[];for(let t=0;t<i.D5.length;t++){const e=i.D5[t].GT;r.push(new kF(e,s))}return new t(i,r,e,n)}xst(){}get Ist(){return[this.T5,this.k5].filter(Y)}get Y3(){return this.T5}get IR(){return BB(this)}get Cd(){return this.qS}get ct(){return 0}get UJ(){var t,i,s;const e=null==(s=null==(t=this.T5)?void 0:t.UJ())||s;var n;const r=null==(n=null==(i=this.k5)?void 0:i.UJ())||n;return e&&r}get kx(){return ZT.iL()}get K3(){return this.k5}async Zg(){await Promise.all([this.T5,this.k5].filter(Y).map(t=>t.Zg()))}x5(t){}N5(t,i,s,e){}P3(){var t,i;null==(t=this.T5)||t.P3(),null==(i=this.k5)||i.P3()}y3(){var t,i;null==(t=this.T5)||t.y3(),null==(i=this.k5)||i.y3()}SJ(t){return!!FL(this,t)}kJ(t){return this.qS=t,Promise.resolve()}RJ(t){}async bJ(t,i){const s=await this.nw.ew(t.qp,i),e=await s.xS();return await this.AJ(e),e}async AJ(t){if(t&&!this.vT.src)throw new Q(Ne.CONTENT_PROTECTION_ERROR,"Attempted to attach MediaKeys to a sourceless MediaElement");if(!t&&this.vT.src)throw new Q(Ne.CONTENT_PROTECTION_ERROR,"Attempted to remove MediaKeys from a non-empty MediaElement");const i=this.SS;i&&(await i.ES(this.vT),this.SS=void 0),t&&(await t._n(this.vT),this.SS=t)}constructor(t,i,s,e){this.qS=void 0,this.nw=void 0,this.vT=void 0,this.T5=void 0,this.k5=void 0,this.SS=void 0,this.qS=t,this.k5=me(i,t=>Boolean(t.iK.match(/video/))),this.T5=me(i,t=>Boolean(t.iK.match(/audio/))),this.nw=s,this.vT=e,this.xst()}},xF=class extends fr{Pst(){this.qit.addEventListener("timeupdate",this.Cst),this.qit.addEventListener("ended",this.Nst),this.qit.addEventListener("timeupdate",this.Dst),this.qit.addEventListener("ratechange",this.Bst),this.qit.addEventListener("volumechange",this.Mst),this.qit.addEventListener("durationchange",this.Lst),this.qit.addEventListener("playing",this.Ost),this.qit.addEventListener("seeking",this.Fst),this.qit.addEventListener("play",this.Vst),this.qit.addEventListener("pause",this.Wst),this.qit.addEventListener("encrypted",this.A7)}Ust(){this.qit.removeEventListener("timeupdate",this.Cst),this.qit.removeEventListener("ended",this.Nst),this.qit.removeEventListener("timeupdate",this.Dst),this.qit.removeEventListener("ratechange",this.Bst),this.qit.removeEventListener("volumechange",this.Mst),this.qit.removeEventListener("durationchange",this.Lst),this.qit.removeEventListener("playing",this.Ost),this.qit.removeEventListener("seeking",this.Fst),this.qit.removeEventListener("play",this.Vst),this.qit.removeEventListener("pause",this.Wst)}Gst(){this.z9.wn(Vo.bI,this.Rs)}Xst(){this.z9.mn(Vo.bI,this.Rs)}get iX(){return this.qit}get i4(){return!1}get OR(){return this.qit.currentTime+this.Zst.gst}get ux(){return this.qit.paused}get Ox(){return this.qit.volume}set Ox(t){this.qit.volume=t}get vx(){return this.qit.playbackRate}set vx(t){this.qit.playbackRate=t}get Hst(){return this.qit.defaultPlaybackRate}get IR(){var t,i;return null!=(i=null==(t=this.eX)?void 0:t.IR)?i:ZT.tL()}get zst(){return ZT.jn(this.qit.buffered)}get mx(){const t=this.Yst;return this.Ho.LM(t.Dy(this.Zst.gst))}get Yst(){return ZT.jn(this.qit.played)}get Rx(){return this.pZ}get Y5(){return!1}get r4(){return!1}get ct(){return this.qit.duration}get ix(){return this.qit.muted}set ix(t){this.qit.muted=t}get Eit(){return this.qit.style}get PL(){return Jr({},yD,{IL:!0})}By(t,i,s){this._8.Jg(),this._8=new ui,this.g8=Ce(this.m8(t,this.g8,this._8.jg),this._8).catch(ol)}async m8(t,i,s){var e;this.Ho=this.mx;const n=null==(e=this.eX)?void 0:e.Ist;if(!n)return;const r=_.max(...n.map(t=>t.Tst?t.Tst:1/0));this.pZ=!0,this.So(new ul(t)),await i.catch(ol),Ko(s);try{for(this.Kst||this.qst(),this.qit.load(),this.jst||(this.Qst=!1,await $s(this.qit.play(),s));this.Sx<pi.WL;)await this.z9.pw(Vo.bI,s);this.Jst.Hy(),this.Kst=!1,this.pZ=!1,this.So(new Wi(this.OR))}catch(t){throw this.Jst.zy(t),t}finally{this.$st(),this.Zst.wst(r)}}zx(){this.jst=!0,this.qit.pause()}async Yx(){this.jst&&(this.qit.src||this.C7(),await this.Jst.Yy,await this.qit.play())}async Zg(){this.Est&&this.Est._st().catch(ol),this._8.Jg(),this.Ust(),this.Xst(),this.z9.Zg(),this.Vo(),this.Gl.kn(),this.ist.kn(),this.sst.kn()}async hr(){this.Est&&this.Est._st().catch(ol),this._8.Jg(),this.qit.removeAttribute("src"),this.qit.removeAttribute("x-webkit-wirelessvideoplaybackdisabled"),this.qit.removeAttribute("x-airplay-deny"),this.qit.disableRemotePlayback=!1,this.qit.load(),this.z9.hr(),this.Ho=ZT.tL()}async I9(){throw new g("Not supported")}C7(){this.I7||(Ef(this.qit,Zd.Zs),this.P7=!0)}get Sx(){return this.z9.Sx}qst(){const t=this.qit.getClientRects();let i;if(!(t.length>0))return;i=t[0];const s=i.width,e=this.qit.videoWidth/this.qit.videoHeight,n=i.height;let r,h;s/n>e?(r=n*e,h=n):(h=s/e,r=s),this.qit.style.width=r+"px",this.qit.style.height=h+"px",this.qit.style.marginLeft=(s-r)/2+"px",this.qit.style.marginTop=(n-h)/2+"px",this.qit.style.backgroundColor="black"}$st(){this.qit.style.width="100%",this.qit.style.height="100%",this.qit.style.marginLeft="",this.qit.style.marginTop="",this.qit.style.backgroundColor=""}get Nx(){return this.qit.videoHeight}get Mx(){return this.qit.videoWidth}get GR(){return this.qit.ended}get Mi(){return this.qit.offsetHeight*Zd.Zs.wm}get Ti(){return this.qit.offsetWidth*Zd.Zs.wm}get QR(){return!1}get I7(){return this.P7}get NR(){}get Wu(){return this.tet}get lt(){}get Ma(){return this.$it}get pX(){return this.ea}get kx(){return this.eX?this.eX.kx:ZT.tL()}get nX(){}get nt(){return this.Gl}get Ql(){return this.RZ}get Gx(){return!1}set Gx(t){}gX(t,i,s,e,n){}sI(t,i,s,e,n,r,h,o,a){const u=new wM(t,i,s,e,n,r,h,a,o);return this.Gl.tt(u),this.N8.tt(u),u}wX(t){throw m("Not supported.")}YJ(t){}tx(){return tD(this.qit)}get J9(){return"block"===this.qit.style.display}be(){this.qit.style.display="block",this.ist.be()}we(){this.qit.style.display="none",this.ist.we()}R7(){}async Un(t){if(t.Kp===xt.wW)throw new m("Not yet implemented");await this.Est.lst();const i=me(t.aX,t=>t.TS.Kp===R.zp),s={kind:AF.hst,mediaBufferConfigs:t.D5.map(t=>t.GT),fairPlaySdkUri:null==i?void 0:i.XU};return await this.Est.vst(s),this.eX=RF.Rst(t,this.Est,this.nw,this.qit),this.EJ.Un(this.eX,t),this.qit.setAttribute("x-webkit-airplay","deny"),this.qit.setAttribute("x-webkit-wirelessvideoplaybackdisabled",""),this.qit.disableRemotePlayback=!0,this.qit.preload="none",this.qit.src="https://theo.proxy/"+this.Est.mT+"/master.m3u8",this.eX}x7(){}sW(t){this.Gl.it(t),this.N8.it(t)}bX(){for(const t of this.Gl.CI.slice())t.kn();this.Gl.hr()}QG(t){}vX(){return!1}N7(t){t.appendChild(this.qit),this.ist.N7(t)}Zx(){return this.qit}get EX(){return this.EJ.EX}set EX(t){this.EJ.EX=t}get D7(){}set D7(t){}get g9(){}Jx(){}constructor(t,i,s,e){super(),this.Kst=!0,this.Est=new SF,this.Zst=new TF,this.eX=void 0,this.z9=void 0,this.jst=!0,this.Jst=new gs,this.pZ=!1,this.g8=Promise.resolve(),this._8=new ui,this.Qst=!0,this.Ho=ZT.tL(),this.$it=void 0,this.ea=void 0,this.qit=void 0,this.P7=!1,this.EJ=void 0,this.nw=void 0,this.Gl=void 0,this.N8=void 0,this.ist=void 0,this.sst=void 0,this.tet=void 0,this.RZ=void 0,this.Cst=()=>{this.ux||this.zst.V<=0||this.IR.V<=0||this.Zst.pst(this.IR.An(this.IR.V-1),this.zst.An(this.zst.V-1))},this.Nst=()=>{this.So(new Be(this.OR))},this.Dst=()=>{this.So(new Tc(this.OR,this.NR))},this.Bst=()=>{this.So(new Fs(this.OR,this.vx))},this.Mst=()=>{this.So(new q(this.OR,this.Ox))},this.Lst=()=>{this.So(new ur(this.ct))},this.Ost=()=>{this.So(new $n(this.OR))},this.Fst=()=>{this.By(this.OR)},this.Vst=async()=>{this.Qst&&this.So(new Ts(this.OR)),this.jst=!1,this.Qst=!0},this.Wst=()=>{this.jst=!0,this.So(new Pi(this.OR))},this.A7=t=>{const i=t.initDataType;var s;const e=null!=(s=t.initData)?s:new ArrayBuffer(0);this.So(new bm(i,e))},this.qit=t,this.z9=new Uu(this),this.tet=s,this.RZ=e,this.qit.playsInline=!0,this.qit.style.width="100%",this.qit.style.height="100%",this.Pst(),this.Gst(),this.$it=yF(this.qit),this.ea=new wF(this.qit),this.EJ=new NL(this),this.nw=i,this.Gl=new ou,this.N8=new Qa(this),this.ist=new QL,this.sst=new pF(this.ist.xe,this.Wu,this.nt,this.Ql,this.Ma,this.pX)}},IF=[Mo.Ck,Mo.Nk],PF=class{get xZ(){const t=[];for(const i of this.iet){const s=this.eet.get(i);if(s){const i=s.map(t=>t.net);t.push(...i)}}return this.ret&&t.push(this.ret),t}het(t){for(const i of this.xZ)i.N7(t)}HX(t){const i=this.eet.get(t);if(!i)return;const s=me(i,t=>t.oet);return s?(s.oet=!1,s.net):void 0}aet(t){if(!this.ret){var i;const t=null==(i=this.eet.get(Mo.Nk))?void 0:i[0].net.iX;if(!t)throw new m("Error creating iOS Safari MediaController");this.ret=new xF(t,this.nw,this.sc,this.RZ),t.parentElement&&this.ret.N7(t.parentElement)}return this.ret}async RX(t){const i=t.iX,s=i.tagName.toLowerCase();await t.hr(),kf(i);const e=me(this.eet.get(s)||[],i=>t===i.net);e&&(e.oet=!0)}SZ(){for(const t of this.xZ)t.C7()}kn(){for(const t of this.xZ){const i=t.iX;t.Zg(),Tf(i),je(i)}this.eet.clear(),this.ret=void 0}uet(){for(const t of this.iet){const i=[];this.eet.set(t,i);for(let s=0;s<this.cet;s++){const s=Sf(t),e=t===Mo.Ck?new jL(s,this.nw,this.sc,this.VQ):new bF(s,this.nw,this.sc,this.RZ,this.VQ);i.push({net:e,oet:!0})}}}constructor(t,i,s,e=2,n=IF,r=Pb()){this.cet=void 0,this.iet=void 0,this.nw=void 0,this.eet=void 0,this.sc=void 0,this.RZ=void 0,this.VQ=void 0,this.ret=void 0,this.cet=e,this.iet=[...n],this.nw=r,this.sc=t,this.RZ=i,this.VQ=s,this.eet=Se(),this.uet()}};r(),r();var CF=class{dk(t){return this.rW.dk(t)}Kk(t){this.rW.Kk(t)}kn(){this.rW.kn()}constructor(t){this.rW=void 0,this.rW=t}},NF=class extends CF{dk(t){const i=new F(t),s=this.kZ.Aj.IG(i);return s?this.det(i,s):this.rW.dk(i)}async det(t,i){i.Tj(Zd.Mg()/1e3);const s=await this.rW.dk(t);let e;i.Ej(Zd.Mg()/1e3),e=s.YT?s.UT().pipeThrough(new Sa(new DF(i))):s.WT().then(t=>{const s=Zd.Mg()/1e3;return i.Rj(s,new j(t)),i.xj(s),t});const n={hk:e,dk:s.dk};return new oA(n,s)}constructor(t,i){super(t),this.kZ=void 0,this.kZ=i}},DF=class{start(t){this.qQ=t}transform(t){this.let.Rj(Zd.Mg()/1e3,t),this.qQ.enqueue(t)}flush(){this.let.xj(Zd.Mg()/1e3)}constructor(t){this.let=void 0,this.qQ=void 0,this.let=t}};function BF(t){return{get ratio(){return t.qo},get thresholds(){return t.fet.slice()}}}function MF(t){const i=[],s=_.floor(1/t);if(S(s))return[];for(let e=0;e<=s;e++){const s=ss(e*t,0,1);i.push(s)}return i}r(),r(),r();var LF=class{get qo(){return this.vet}get fet(){return this._et}met(t){return i=>{const s=i[i.length-1];this.vet=s.intersectionRatio,t(s.intersectionRatio)}}get Ca(){return this.hu||(this.hu=BF(this)),this.hu}Kx(){this.pet.disconnect()}constructor(t,i,e){this.vet=1,this._et=void 0,this.pet=void 0,this.hu=void 0,this._et=MF(i);const n=this.met(e);this.pet=new s.IntersectionObserver(n,{root:null,threshold:this._et}),this.pet.observe(t)}},OF=class{get qo(){return this.vet}get fet(){return this._et}get Ca(){return this.hu||(this.hu=BF(this)),this.hu}wet(t){this.vet=t;const i=this._et;let s=0;if(t>0)for(;s<i.length&&i[s]<=t;)++s;this.yet!==s&&(this.yet=s,this.bet(t))}constructor(t,i){this._et=void 0,this.bet=void 0,this.vet=1,this.yet=-1,this.hu=void 0,this._et=MF(t),this.bet=i}},FF=class extends OF{Aet(){const t=this.bo.getBoundingClientRect();return ss(_.max(0,_.min(s.innerWidth,t.right)-_.max(0,t.left))*_.max(0,_.min(s.innerHeight,t.bottom)-_.max(0,t.top))/(t.width*t.height),0,1)}Kx(){s.removeEventListener("scroll",this.Tet)}constructor(t,i,e){super(i,e),this.bo=void 0,this.Tet=Hh(()=>this.wet(this.Aet()),50),this.bo=t,s.addEventListener("scroll",this.Tet,!!nN&&{passive:!0}),ht(()=>this.wet(this.Aet()))}},VF=.1,WF=class{get ket(){return this.Eet}get Lo(){return this.Ret}set Lo(t){if(S(t)||t<0||t>1)throw new RangeError("The threshold must be a value between 0 and 1");this.Ret=t}get Ca(){return this.hu||(this.hu=function(t){return{get ratio(){return t.ket},get visible(){return t.ket>t.Lo},get visibleThreshold(){return t.Lo},set visibleThreshold(i){i=go(i),t.Lo=i},addObserver:(i,s)=>(i=go(i),t.Do(i,s).Ca),removeObserver(i){const s=t.xet(i);s&&t.Uo(s)}}}(this)),this.hu}Iet(t){return i=>{this.Eet=i,null==t||t(this.Eet)}}Do(t,i){if(S(t))throw new g("step is not of the right type");if(t>1||t<=0)throw new RangeError("The step must be a number greater than 0 and smaller than or equal to 1");let e;return e="function"==typeof s.IntersectionObserver?new LF(this.bo,t,this.Iet(i)):new FF(this.bo,t,this.Iet(i)),this.Pet.push(e),e}Uo(t){t.Kx(),is(this.Pet,t)}xet(t){for(const i of this.Pet)if(i.Ca===t)return i}kn(){for(const t of this.Pet)t.Kx();Lr(this.Pet)}constructor(t){this.bo=void 0,this.Eet=1,this.Ret=0,this.Pet=[],this.hu=void 0,this.bo=t,this.Do(.1,this.Iet())}};r();var UF=class extends sh{constructor(){super(d.xw)}},GF=class extends ua{get Cet(){return this.kZ}get uO(){return this.Net}set uO(t){this.Net=t,this.Pa.uO=t}get Det(){return this.Bet}get ht(){return this.Pa.ht}get Lz(){return this.Met}get Wu(){return this.Let}get YR(){return this.Pa.YR}get qR(){return this.Pa.qR}get $R(){return this.Oet}get JH(){return this.Fet}get nt(){return this.Pa.nt}get Ql(){return this.RZ}get rt(){return this.Pa.rt}get IR(){return this.PR()}PR(){return this.Pa.IR}get Vet(){return this.tQ}get fQ(){return this.vQ}get OR(){return this.FR()}set OR(t){this.WR(t)}FR(){return this.Pa.OR}WR(t,i){this.Pa.WR(t,i)}Wet(){return this.FR()}get NR(){return this.Pa.NR}set NR(t){this.Pa.NR=t}get bt(){return this.Pa.bt}get ct(){return this.Nd()}Nd(){return this.Pa.ct}get xe(){return this.Pa.xe}get GR(){return this.Pa.GR}get lt(){return this.ZR()}ZR(){return this.Pa.lt}get HR(){return this.zR()}zR(){return this.Pa.HR}get Ma(){return this.Pa.Xx()}get pX(){return this.Pa.Aa()}get Gx(){return this.Pa.Gx}set Gx(t){this.Pa.Gx=t}get ix(){return this.Pa.ix}set ix(t){const i=Boolean(t);this.nx(i)}nx(t){this.Pa.ix=t,t||this.ux||this.Hx()}get ux(){return this.Pa.ux}get vx(){return this._x()}set vx(t){this.gx(t)}_x(){return this.Pa.vx}gx(t){this.Pa.vx=t}get mx(){return this.wx()}wx(){return this.Pa.mx}get yx(){return this.Pa.yx}set yx(t){this.Pa.yx=t}get Sx(){return this.Pa.Sx}get kx(){return this.Ex()}Ex(){return this.Pa.kx}get Rx(){return this.Pa.Rx}get qI(){return this._O}get Nx(){return this.Pa.Nx}get Mx(){return this.Pa.Mx}get Ox(){return this.Pa.Ox}set Ox(t){const i=ss(Number(t),0,1)||0;this.Vx(i)}get Wx(){return this.EZ}Vx(t){this.Pa.Ox=t}Ea(){Ns(this,TP,this)}Yx(){this.Pa.Yx()}zx(){this.Pa.zx()}nu(){return this.dZ}async Ta(t,i){if(this.dZ=t,t){this.Uet.AY(t).catch(this.Get);const s=function(t){t.sources;const i=t.sources.filter(t=>Xd(t.integration));0;return t.sources=i,t}(t);await this.Pa.Ta(s,i)}}Ix(t,i,s){return this.Pa.Ix(t,i,s)}Px(){return this.Pa.Px()}Hx(){if(this.ko)return;this.Pa.Hx(),this.Bet.Hx();const t=this.xe.getElementsByTagName("video");for(let i=0;i<t.length;i++){const s=t[i];"Advertisement"===s.title&&Ef(s,Zd.Zs)}this.ko=!0}ds(){return this.Xet.Wo()===ju.FULLSCREEN}be(){this.Pa.be()}we(){this.Pa.we()}Zx(){return this.Pa.Zx()}Jx(){this.Pa.Jx()}$x(){this.Pa.$x()}sI(t){return this.Pa.sI(t)}async Kx(){this.dZ=void 0,await this.Pa.Kx(),await this.Pa.hr()}async kn(){this.So(new UF),this.Vo(),this.Met.kn(),this.AR.kn(),this.Fet.kn(),this.Zet.kn(),this.Het.kn(),this.Xet.kn(),this.Let.kn(),this.zet.kn(),this.Bet.kn(),this.TZ.kn(),await this.Pa.kn()}constructor(t,i,s,e){super(),this.Yet=void 0,this.Cd=void 0,this.Pa=void 0,this.zet=void 0,this.AR=void 0,this.tQ=void 0,this.vQ=void 0,this.Zet=void 0,this.Xet=void 0,this.kZ=void 0,this.EZ=void 0,this.Uet=void 0,this.GQ=void 0,this.Let=void 0,this.Het=void 0,this.RZ=void 0,this.Net=!1,this.ko=!1,this._O=void 0,this.dZ=void 0,this.Ket=!1,this.TZ=void 0,this.Bet=void 0,this.Fet=void 0,this.Met=void 0,this.Jc=void 0,this.Io=void 0,this.Oet=void 0,this.Na=void 0,this.Get=t=>{if(this.Ket)return;this.Ket=!0;const i=this.Yet,s=xs(t);this.Pa.MI=new dP(this.xe,s,t),_e(i.kn())},this.qet=t=>{t.type!==d.Hw&&t.type!==d.Zw&&this.So(t)};const n=go(i.uid);S(n)?this._O=zk++:this._O=n,this.Cd=i;const r=Zd.AR,h=new dD;this.zet=new YC("9.11.0",r,h),this.kZ=new HN,this.EZ=new qI;const o=new NF(r,this.kZ);this.AR=new BN(o,i.allowMixedContent),this.GQ=null!=s?s:new kC(i.isEmbeddable,"9.11.0",wC()),this.Uet=new cD(r,this.GQ,this.zet,h,i,wC()),this.Uet.OQ().catch(this.Get),this.Let=new un(t),this.Let.wn(Gu.yn,this.Rs),this.RZ=new mD;const a=new(null!=e?e:PF)(this.Let,this.RZ,i);a.het(t),this.tQ=new qN,this.vQ=new QN;const u=new cP(t,i,this.AR,this.kZ,this.EZ,a,this.RZ);this.kZ.Fj(u);let c=u;c=new jN(c,this.Vet),c=new JN(c,this.fQ),this.Yet=c,this.Pa=new Vk(this.Yet),this.Pa.dw(this.qet),this.Oet=new $N(this.Pa),this.Fet=new ON(this.Pa,this.AR,this.kZ),this.Zet=new JC(this),this.Het=new _N(this.Pa,i.allowNativeFullscreen),this.Xet=new bN(this.Het,this.Pa.Aa()),this.Let._n(),this.Io=new WF(t),this.TZ=new PF(this.Let,this.RZ,i,1,[Mo.Nk]),this.Bet=new SN(this.TZ),this.Met=new eD}};r(),r();var ic=class extends ua{get Cet(){return this.jet()}jet(){return this.oa.Cet}get Jc(){return this.Qet()}Qet(){return this.oa.Jc}get zet(){return this.oa.zet}get Det(){return this.Jet()}Jet(){return this.oa.Det}get uO(){return this.oa.uO}set uO(t){this.oa.uO=t}get Zet(){return this.oa.Zet}get Lz(){return this.oa.Lz}get Vet(){return this.oa.Vet}get Cd(){return this.oa.Cd}get Wu(){return this.oa.Wu}get Ma(){return this.Xx()}Xx(){return this.oa.Ma}get pX(){return this.Aa()}Aa(){return this.oa.pX}get AR(){return this.oa.AR}get Wx(){return this.oa.Wx}get Uet(){return this.oa.Uet}get fQ(){return this.oa.fQ}get JH(){return this.oa.JH}get Xet(){return this.oa.Xet}get Let(){return this.oa.Let}get Pa(){return this.oa.Pa}get Ql(){return this.oa.Ql}get $et(){return this.tnt()}tnt(){return this.oa.$et}get int(){return this.snt()}snt(){return this.oa.int}get qI(){return this.oa.qI}get Io(){return this.oa.Io}get ht(){return this.ER()}ER(){return this.oa.ht}PR(){return this.oa.PR()}get NR(){return this.DR()}set NR(t){this.MR(t)}DR(){return this.oa.NR}MR(t){this.oa.NR=t}get bt(){return this.LR()}LR(){return this.oa.bt}FR(){return this.oa.FR()}WR(t,i){this.oa.WR(t,i)}Wet(){return this.oa.Wet()}Nd(){return this.oa.Nd()}get xe(){return this.UR()}UR(){return this.oa.xe}get GR(){return this.XR()}XR(){return this.oa.GR}ZR(){return this.oa.ZR()}zR(){return this.oa.zR()}get YR(){return this.KR()}get qR(){return this.jR()}KR(){return this.oa.YR}jR(){return this.oa.qR}get Gx(){return this.oa.Gx}set Gx(t){this.oa.Gx=t}get $R(){return this.tx()}tx(){return this.oa.$R}get ix(){return this.sx()}set ix(t){this.nx(t)}sx(){return this.oa.ix}nx(t){this.oa.nx(t)}get ux(){return this.lx()}lx(){return this.oa.ux}get vx(){return this._x()}set vx(t){this.gx(t)}_x(){return this.oa.vx}gx(t){this.oa.vx=t}wx(){return this.oa.wx()}get yx(){return this.bx()}set yx(t){this.Ax(t)}bx(){return this.oa.yx}Ax(t){this.oa.yx=t}get Sx(){return this.Tx()}Tx(){return this.oa.Sx}get Na(){return this.oa.Na}set Na(t){this.oa.Na=t}Ex(){return this.oa.Ex()}get Rx(){return this.xx()}xx(){return this.oa.Rx}get nt(){return this.Cx()}Cx(){return this.oa.nt}get Nx(){return this.Dx()}Dx(){return this.oa.Nx}get rt(){return this.Bx()}Bx(){return this.oa.rt}get Mx(){return this.Lx()}Lx(){return this.oa.Mx}get Ox(){return this.Fx()}set Ox(t){this.Vx(t)}Fx(){return this.oa.Ox}Vx(t){this.oa.Vx(t)}Hx(){this.oa.Hx()}zx(){this.oa.zx()}Yx(){this.oa.Yx()}be(){this.oa.be()}we(){this.oa.we()}ds(){return this.oa.ds()}Zx(){return this.oa.Zx()}Jx(){this.oa.Jx()}$x(){this.oa.$x()}sI(t){return this.oa.sI(t)}Ea(){this.oa.Ea()}nu(){return this.oa.nu()}Ta(t,i){return this.oa.Ta(t,i)}Ix(t,i,s){return this.oa.Ix(t,i,s)}Px(){return this.oa.Px()}Kx(){return this.oa.Kx()}iI(t){return!1}uZ(){this.ent&&this.oa.dw(this.eI)}cZ(){this.ent&&this.oa.mw(this.eI)}async kn(t){this.Vo(),t||await this.oa.kn(),this.cZ()}constructor(t,i){super(),this.oa=void 0,this.ent=void 0,this.eI=t=>{this.iI(t)||this.So(t)},this.oa=t,this.ent=!i,this.uZ()}},Rh=function(t){return t[t.lu=0]="lu",t[t.nnt=1]="nnt",t[t.rnt=2]="rnt",t}({}),XF=ff(3,()=>[]);function Th(t,i){XF[i].push(t)}var ZF=function(t){return t[t.nnt=0]="nnt",t[t.hnt=1]="hnt",t[t.ont=2]="ont",t[t.wP=3]="wP",t}({}),HF=ff(4,()=>[]);function zF(t,i){HF[i].push(t)}var YF=[];function KF(t){for(const i of YF)i(t)}r();var qF=self.CustomEvent;var jF=function(){try{const t=new qF("cat",{detail:{foo:"bar"}});return"cat"===t.type&&"bar"===t.detail.foo}catch(t){}return!1}()?function(t,i){return new CustomEvent(t,i)}:function(t,i){const s=h.createEvent("CustomEvent");return s.initCustomEvent(t,(null==i?void 0:i.bubbles)||!1,(null==i?void 0:i.cancelable)||!1,null==i?void 0:i.detail),s};r();var QF=new class{get V(){return this.hO.length}get Ca(){var t;return null!=(t=this.hu)?t:this.hu=function(t){const i=[];for(let s=0;s<t.V;s++)i[s]=t.DI(s).Ca;return i.getPlayerByUID=i=>{const s=t.ant(i);return s&&s.Ca},i}(this)}DI(t){return this.hO[t]}u$(t){this.hO.push(t),this.Ca.push(t.Ca)}vS(t){const i=this.hO.indexOf(t);i<0||(Lh(this.hO,i),this.hu&&Lh(this.hu,i))}ant(t){for(const i of this.hO)if(i.qI===t)return i}constructor(){this.hO=[],this.hu=void 0}};function JF(t){let i,s;const e=i=>{s=i;const e=bc(i,t.Cd);t.Ta(e)},n={get abr(){return t.Cet.Ca},get ads(){var i;return null==(i=t.Jc)?void 0:i.Ca},get audioTracks(){return t.ht.Ca},get autoplay(){return t.uO},set autoplay(i){t.uO=Boolean(i)},get buffered(){return t.PR()},get canvas(){return t.Zet.Ca},get cast(){var i;return null==(i=t.Lz)?void 0:i.Ca},get clip(){return t.Vet.Ca},get currentProgramDateTime(){var i;return null!=(i=t.NR)?i:null},set currentProgramDateTime(i){t.NR=null!=i?i:void 0},get currentTime(){return t.FR()},set currentTime(i){t.WR(Number(i))},get duration(){return t.Nd()},get element(){return t.xe},get ended(){return t.GR},get error(){return t.ZR()},get errorObject(){return t.zR()},get loop(){return t.fQ.fQ},set loop(i){t.fQ.fQ=Boolean(i)},get metrics(){return t.$R.Ca},get muted(){return t.ix},set muted(i){t.nx(i)},get network(){return t.JH.Ca},get paused(){return t.ux},get playbackRate(){return t.vx},set playbackRate(i){const s=Number(i);if(s<0)throw new RangeError("playbackRate must be a positive number");t.vx=s},get played(){return t.wx()},get poster(){return t.gi},set poster(i){t.gi=_o(i)},get preload(){return t.yx},set preload(i){t.yx=function(t){switch(t){case"auto":case"":return"auto";case"metadata":return"metadata";default:return"none"}}(i)},get presentation(){return t.Xet.Ca},get readyState(){return t.Sx},get seekable(){return t.Ex()},get seeking(){return t.Rx},get source(){return s},set source(t){e(t)},get src(){return jP(t.nu())},set src(t){e({sources:t})},get textTracks(){return t.nt.Ca},get textTrackStyle(){return t.Ql.Ca},get theoLive(){return t.$et},get uid(){return t.qI},get videoHeight(){return t.Nx},get videoTracks(){return t.rt.Ca},get videoWidth(){return t.Mx},get visibility(){return t.Io.Ca},get volume(){return t.Ox},set volume(i){t.Vx(Number(i))},get latency(){return t.Wx.Ca},get theoads(){return t.int},get millicast(){return t.qR.Ca},destroy(){t.kn(),t=null,s=void 0},play(){t.unt()},pause(){t.zx()},stop(){s=void 0,t.Kx()},prepareWithUserAction(){t.Hx()},addEventListener(t,s){i.wn(t,s)},removeEventListener(t,s){i.mn(t,s)},setSource(t){e(t)},addTextTrack:i=>t.sI(function(t){return{Lt:_o(t.kind),Th:_o(t.label),bs:_o(t.language),Kp:_o(t.type)}}(i)).Ca};return i=new sc(n,!0),i.au(t),i.wn("destroy",()=>{i.kn()}),n}r(),r(),r(),r();var $F=class extends sh{constructor(t){super(d.do),this.source=void 0,this.source=t}};r();var tV=class extends ua{get NR(){}set NR(t){}get OR(){return this.FR()}set OR(t){this.WR(t)}FR(){return this.mZ}Wet(){return this.FR()}WR(t,i){this.pZ&&this.mZ===t||(this.mZ=t,this.pZ=!0,this.So(new ul(this.mZ)))}get ux(){return this.yZ}get vx(){return this.bZ}set vx(t){this.bZ!==t&&(this.bZ=t,this.So(new Fs(this.mZ,this.vx)))}get Sx(){return pi.VL}get Rx(){return this.pZ}Yx(){this.yZ&&(this.yZ=!1,this.So(new Ts(this.mZ)),this.So(new lx(this.mZ)))}zx(){this.yZ||(this.yZ=!0,this.So(new Tc(this.mZ,this.NR)),this.So(new Pi(this.mZ)))}hr(){this.mZ=0,this.pZ=!1,this.bZ=1,this.zx()}kn(){this.Vo()}we(){}be(){}constructor(){super(),this.mZ=void 0,this.yZ=void 0,this.pZ=void 0,this.bZ=void 0,this.mZ=0,this.yZ=!0,this.pZ=!1,this.bZ=1}};r();var iV={zIndex:"1",display:"inline-block",verticalAlign:"middle",backgroundRepeat:"no-repeat",backgroundPosition:"50% 50%",backgroundSize:"contain",cursor:"pointer",margin:"0",padding:"0",position:"absolute",top:"0",right:"0",bottom:"0",left:"0",height:"100%"},sV={visibility:"hidden"},eV={visibility:"visible"},nV=class{get Yu(){return void 0!==this.cnt?this.cnt:void 0!==this.dnt?this.dnt:void 0}set lnt(t){this.dnt=t,this.er()}er(){const t=this.oa.ux,i=this.fnt;this.Yu?this.Ls.style.backgroundImage='url("'+am(this.Yu)+'")':this.Ls.style.backgroundImage="",t&&this.Yu&&!i?this.be():this.we()}be(){Dl(sV,this.oa.xe),Dl(eV,this.Ls)}we(){Dl(sV,this.Ls),Dl(eV,this.oa.xe)}uZ(){this.oa.wn(d.do,this.vnt),this.oa.wn(d.uo,this.FW)}kn(){this.oa.mn(d.do,this.vnt),this.oa.mn(d.uo,this.FW),je(this.Ls)}constructor(t){this.Ls=void 0,this.oa=void 0,this.fnt=!1,this.cnt=void 0,this.dnt=void 0,this.vnt=t=>{var i;this.fnt=!this.oa.ux,this.cnt=null==(i=t.source)?void 0:i.poster,this.er()},this.FW=()=>{this.fnt=!0,this.we()},this.oa=t,this.uZ(),this.Ls=function(){const t=s&&s.document&&s.document.createElement("div");return t.className="theoplayer-poster",Dl(iV,t),t}(),t.xe.appendChild(this.Ls)}};r(),r(),r(),r();var rV=function(t){return t[t._nt=0]="_nt",t[t.gnt=1]="gnt",t}({});function hV(t){let i;const s={get playing(){return t.zc},get currentAds(){return t.mnt.map(t=>t.pnt())},get currentAdBreak(){var i,s;return null!=(s=null==(i=t.wnt)?void 0:i.pnt())?s:null},get scheduledAds(){return t.ynt.map(t=>t.pnt())},get scheduledAdBreaks(){return t.bnt.map(t=>t.pnt())},skip(){t.nN()},skipAdBreak(i){t.Ant(null!=i?i:void 0)},schedule(i){const s=rC(i,$h.Bg);s?t.B6(s,rV._nt,!1):console.error("Invalid ad description")},registerServerSideIntegration(i,s){t.Snt(i,s)},addEventListener(t,s){i.wn(t,s)},removeEventListener(t,s){i.mn(t,s)}};return i=new Is(t,s),s}var oV=class extends ua{get zc(){return!!this.qc&&this.qc.zc}get mnt(){return this.qc?this.qc.mnt:[]}get wnt(){return this.qc?this.qc.wnt:null}get ynt(){return this.qc?this.qc.ynt:[]}get bnt(){return this.qc?this.qc.bnt:[]}B6(t,i,s){var e;null==(e=this.qc)||e.B6(t,i,s)}Tnt(t){var i;null==(i=this.qc)||i.Tnt(t)}nN(){var t;null==(t=this.qc)||t.nN()}Ant(t){var i;null==(i=this.qc)||i.Ant(t)}knt(t){var i;null==(i=this.qc)||i.knt(t)}Snt(t,i){var s;null==(s=this.qc)||s.Snt(t,i)}get Ca(){var t;return null!=(t=this.hu)?t:this.hu=hV(this)}async kn(t){this.Vo(),void 0!==this.qc&&(this.qc.mw(this.Rs),t||await this.qc.kn(),this.qc=void 0)}constructor(t){var i;super(),this.qc=void 0,this.hu=void 0,this.qc=t,null==(i=this.qc)||i.dw(this.Rs)}};r(),r();var Gt=class extends Kt{constructor(t,i){super(t),this.od=void 0,this.od=i}},Re=class extends sh{get ad(){return this.adBreak}constructor(t,i){super(t),this.adBreak=void 0,this.adBreak=i}},Su=class extends Gt{xa(){return new aV(this.od.pnt())}constructor(t){super("Ent",t)}},aV=class extends Re{constructor(t){super("removeadbreak",t)}};r();var uV=class extends Gt{xa(){return new cV(this.od.pnt())}constructor(t){super("Rnt",t)}},cV=class extends Re{constructor(t){super("addadbreak",t)}};r(),r();var Ha=class extends Kt{constructor(t,i){super(t),this.xnt=void 0,this.xnt=i}},Wa=class extends sh{constructor(t,i){super(t),this.ad=void 0,this.ad=i}},dV=class extends Ha{xa(){return new lV(this.xnt.pnt())}constructor(t){super("Int",t)}},lV=class extends Wa{constructor(t){super("addad",t)}};r();var Xh=class extends Gt{xa(){return new fV(this.od.pnt())}constructor(t){super("Pnt",t)}},fV=class extends Re{constructor(t){super("adbreakend",t)}};r();var vV=class extends Gt{xa(){return new _V(this.od.pnt())}constructor(t){super("Cnt",t)}},_V=class extends Re{constructor(t){super("adbreakbegin",t)}};r();var te=class extends Ha{xa(){return new gV(this.xnt.pnt(),this.currentTime)}constructor(t,i){super("Nnt",t),this.currentTime=void 0,this.currentTime=i}},gV=class extends Wa{constructor(t,i){super("adbegin",t),this.currentTime=void 0,this.currentTime=i}};r();var He=class extends Ha{xa(){return new mV(this.xnt.pnt(),this.currentTime)}constructor(t,i){super("Dnt",t),this.currentTime=void 0,this.currentTime=i}},mV=class extends Wa{constructor(t,i){super("adend",t),this.currentTime=void 0,this.currentTime=i}};r();var pV=class extends Kt{xa(){return new wV}constructor(){super("Bnt")}},wV=class extends sh{constructor(){super("adadded")}},yV=class extends oV{get MI(){return this.qc}set MI(t){const i=this.qc;if(i===t)return;const s=this.mnt,e=this.wnt,n=this.ynt,r=this.bnt;null==i||i.mw(this.Rs),this.qc=t,null==t||t.dw(this.Rs);const h=this.mnt,o=this.wnt,a=this.ynt,u=this.bnt,c=[];let d=!1;for(const t of r)Ft(u,t)||c.push(new Su(t));for(const t of u)Ft(r,t)||c.push(new uV(t));for(const t of a)Ft(n,t)||(c.push(new dV(t)),d=!0);d&&c.push(new pV),e!==o&&(e&&c.push(new Xh(e)),o&&c.push(new vV(o)));for(const t of s)Ft(h,t)||c.push(new He(t,this.oa.FR()));for(const t of h)Ft(s,t)||c.push(new te(t,this.oa.FR()));for(const t of c)this.So(t)}constructor(t){super(void 0),this.oa=void 0,this.oa=t}};r(),r();var bV=class extends ua{get Ca(){var t;return null!=(t=this.hu)?t:this.hu=hV(this)}knt(t){}Snt(t,i){}B6(t,i,s){}nN(){}Ant(t){}Tnt(t){}kn(){return this.Vo(),Promise.resolve()}constructor(...t){super(...t),this.zc=!1,this.wnt=null,this.mnt=[],this.bnt=[],this.ynt=[],this.hu=void 0}},AV=class extends bV{B6(t,i,s){this.Mnt.push({Lnt:t,Ont:i,Fnt:s})}nN(){}knt(t){}Snt(t,i){this.Vnt.push({EP:t,Wnt:i})}Tnt(t){const i=this.Vnt.slice(),s=this.Mnt.slice();this.hr();for(const s of i)t.Snt(s.EP,s.Wnt);for(const i of s)t.B6(i.Lnt,i.Ont,i.Fnt)}Unt(){const t=this.Mnt.map(t=>t.Lnt);return this.hr(),t}hr(){Lr(this.Vnt),Lr(this.Mnt)}async kn(){this.hr(),await super.kn()}constructor(...t){super(...t),this.Vnt=[],this.Mnt=[]}};r();var SV=class extends sh{constructor(t){super("tizen2retry"),this.originalErrorEvent=void 0,this.originalErrorEvent=t}};var TV=Eu(()=>{let t=GF;t=function(t){return class extends ic{constructor(i,s){let e=new t(i,s);for(const t of HF)for(const i of t)e=i(e);super(e)}}}(t);let i=function(t){return class extends ua{get zet(){return this.Gnt.zet}get Jc(){return this.qc}get Zet(){return this.Gnt.Zet}get Cd(){return this.Gnt.Cd}get AR(){return this.Gnt.AR}get Ma(){return this.Gnt.Ma}get pX(){return this.Gnt.pX}get Xet(){return this.Gnt.Xet}get Let(){return this.Gnt.Let}get Pa(){return this.Gnt.Pa}get Cet(){return this.Gnt.Cet}get uO(){return this.Gnt.uO}set uO(t){this.Gnt.uO=t,this.Xnt()}get Det(){return this.Gnt.Det}get ht(){return this.Gnt.ht}get Lz(){return this.Gnt.Lz}get Wu(){return this.Gnt.Let}get Ca(){return this.hu||(this.hu=this.xa()),this.hu}get YR(){return this.Gnt.YR}get qR(){return this.Gnt.qR}get Gx(){return this.Gnt.Gx}set Gx(t){this.Gnt.Gx=t}get $R(){return this.Gnt.$R}get JH(){return this.Gnt.JH}get nt(){return this.Gnt.nt}get Ql(){return this.Gnt.Ql}get rt(){return this.Gnt.rt}get Vet(){return this.Gnt.Vet}get fQ(){return this.Gnt.fQ}get NR(){return this.oa.NR}set NR(t){this.oa.NR=t}get bt(){return this.Gnt.bt}get xe(){return this.Gnt.xe}get GR(){return this.Gnt.GR}get ix(){return this.Gnt.ix}set ix(t){this.nx(t)}get ux(){return this.oa.ux}get gi(){return this.Znt.Yu||""}set gi(t){this.Znt.lnt=t}get vx(){return this._x()}set vx(t){this.gx(t)}_x(){return this.Gnt.vx}gx(t){this.oa.vx=t}get yx(){return this.Gnt.yx}set yx(t){this.Gnt.yx=t}get Sx(){return this.oa.Sx}get Na(){return this.Gnt.Na}set Na(t){this.Gnt.Na=t}get Rx(){return this.oa.Rx}get $et(){return this.Gnt.$et}get int(){return this.Gnt.int}get qI(){return this.Gnt.qI}get Nx(){return this.Gnt.Nx}get Mx(){return this.Gnt.Mx}get Ox(){return this.Gnt.Ox}set Ox(t){this.Vx(t)}get Wx(){return this.Gnt.Wx}get Uet(){return this.Gnt.Uet}get Io(){return this.Gnt.Io}async Zo(t,i){return this.ta.Zo(t,i).catch(Na)}async Hnt(t,i){Ko(i),this.Gnt.dw(this.znt);try{await this.Gnt.Ta(t,i)}finally{this.Gnt.mw(this.znt)}}async Xnt(){const t=await this.Ynt();this.Knt(t)}async Ynt(){const t=this.nu();return t&&!hu(t)&&this.uO&&this.ux?this.Det.Lq(this.ix):"none"}Knt(t){var i;const s=(null==(i=this.nu())?void 0:i.mutedAutoplay)||this.Cd.mutedAutoplay;switch(t){case"all":this.unt();break;case"muted":(this.ix||s===Sk.ALL)&&(this.ix=!0,this.Yx())}}Ta(t){hu(this.dZ)||this.So(new Jt(0,pi.VL)),this.hr(),this.dZ=t,_e(this.Zo(async i=>{Ko(i);try{await this.Hnt(t,i)}catch(t){return Ui(t),this.dZ=void 0,void this.XX(vb(t,Ne.SOURCE_NOT_SUPPORTED))}finally{this.qnt(this.Gnt)}const s=await this.Ynt();this.So(new $F(this.nu())),this.Knt(s)}))}WR(t,i){this.oa.WR(t,i)}ZR(){var t;return null!=(t=this.CZ)?t:this.Gnt.ZR()}zR(){var t;return null!=(t=this.$G)?t:this.Gnt.zR()}XX(t){void 0===this.zR()&&(this.$G=t,this.CZ=xs(t),this.So(new $e(t)))}Yx(){this.oa.Yx()}unt(){this.ix||this.Hx(),this.Yx()}Hx(){this.Gnt.Hx()}zx(){this.oa.zx()}Kx(){this.Ta(void 0)}be(){this._Z=!0,this.oa.be()}we(){this._Z=!1,this.oa.we()}Ea(){this.Gnt.Ea()}Vx(t){this.Gnt.Vx(t)}nx(t){this.Gnt.nx(t)}Ba(t){this.jnt=t,t.u$(this)}ds(){return this.Gnt.ds()}nu(){return this.dZ}Zx(){return this.Gnt.Zx()}FR(){return this.oa.FR()}Wet(){return this.oa.Wet()}Nd(){return this.Gnt.Nd()}PR(){return this.Gnt.PR()}wx(){return this.Gnt.wx()}Ex(){return this.Gnt.Ex()}Jx(){this.Gnt.Jx()}$x(){this.Gnt.$x()}sI(t){return this.Gnt.sI(t)}hr(){this.dZ=void 0,this.$G=void 0,this.CZ=void 0,this.Qnt=!0,Lr(this.Jnt),this.$nt.hr(),this.qnt(this.$nt),this.ta.Jg(),_e(this.ta.Zo(async t=>{Ko(t),await this.Gnt.Kx()}))}kn(){this.So(new UF),this.Znt.kn(),this.cZ(),this.hr(),_e(this.Zo(async()=>{await this.Gnt.kn(),this.jnt&&(this.jnt.vS(this),this.jnt=void 0),this.ta.kn()})),this.Vo()}qnt(t){if(this.oa===t)return;const i=this.oa.ux,s=this.oa.FR(),e=this.oa.vx,n=this.oa.Sx,r=this.oa.Rx;this.trt=i,this.B7=n,this.cZ(),t.dw(this.irt),t===this.Gnt?(void 0!==this.qc&&(this.qc.MI=t.Jc,this.ert.Tnt(this.qc)),(r||t.FR()!==s)&&t.WR(s),t.vx!==e&&(t.vx=e),i?t.zx():t.Yx()):(void 0!==this.qc&&(this.qc.MI=this.ert,this.ert.hr()),this.Cd.retainPlaybackRateOnSourceChange?t.vx=e:1!==e&&this.So(new Fs(this.FR(),1))),t.mw(this.irt),this.oa=t,this.uZ();for(const t of this.Jnt)this.So(t);Lr(this.Jnt),this._Z?t.be():t.we()}uZ(){this.oa.dw(this.tI)}cZ(){this.oa.mw(this.tI)}xa(){return JF(this)}constructor(i,s){super(),this.oa=void 0,this.Gnt=void 0,this.$nt=void 0,this.Znt=void 0,this.jnt=void 0,this.ta=void 0,this.Jnt=void 0,this.trt=!0,this.B7=pi.VL,this._Z=void 0,this.Qnt=!1,this.dZ=void 0,this.$G=void 0,this.CZ=void 0,this.qc=void 0,this.ert=void 0,this.hu=void 0,this.znt=t=>{t.type!==d.Kw&&this.Jnt.push(t)},this.irt=t=>{(t.type!==d.uo||this.oa.ux)&&(t.type===d.zw&&this.oa.ux||t.type===d.Jw&&this.oa.Rx&&this.oa.FR()===t.currentTime||t.type===d.Kw&&this.oa.vx===t.playbackRate||this.So(t))},this.tI=t=>{if(this.Qnt){if(t.type===Vo.AM)return;t.type!==Vo.pM&&t.type!==Vo.SM||(this.Qnt=!1)}if(t.type===d.uo){if(!this.trt)return;this.trt=!1}else if(t.type===d.zw){if(this.trt)return;this.trt=!0}else if(t.type===Vo.bI){if(this.B7===t.readyState)return;this.B7=t.readyState}else if(t.type===d.xw)return;this.So(t)},this.Gnt=new t(i,s),this.$nt=new tV,this.oa=this.Gnt,this.Znt=new nV(this),this.Gnt.Jc&&(this.qc=new yV(this),this.qc.MI=this.Gnt.Jc,this.ert=new AV),this.ta=new Fu,this.Jnt=[],this._Z=!0,this.uZ()}}}(t);return As.w_&&As.b_<3&&(i=function(t){return class extends t{Ta(t){this.nrt=0,super.Ta(t)}So(t){if(t.type===sa.ma&&this.nrt<3)return this.nrt++,super.So(new SV(t)),void super.Ta(this.nu());super.So(t)}constructor(...t){super(...t),this.nrt=0}}}(i)),i=function(t){let i=t;for(const t of XF)for(const s of t)i=s(i);return i}(i),i});function kV(t,i){const s=kk(i),e=new(TV())(t,s);e.Na=e;let n=e.Ca;return e.Ea(),e.Ba(QF),w.defineProperty(n,"constructor",{value:kV}),n=fS(n),KF(e),n}ht(()=>{self.dispatchEvent&&self.dispatchEvent(jF("theoplayerready"))}),r();var EV={base64:new class{encode(t){return Ae(t)}decode(t){return Iu(t)}}};r();var RV=JSON.parse('["hbbtv","dash","hesp","millicast","hls","chromecast","ads","theoads","airplay","spotx","vr","cache","webaudio","youbora","mediamelon","moat","google-dai","streamone","lcevc","freewheel","agama","uplynk","mediatailor","ui","relatedcontent","social","upnext","contextmenu","texttrackstyle-ui","activequalitylabel","upcomingadnotification"]');r(),r(),r();var xV=class{get OR(){const t=this.oa.currentTime;return isFinite(t)?t:"now"}get rrt(){return this.oa.src||""}hr(){}constructor(t,i){this.oa=void 0,this.hrt=void 0,this.ort=!1,this.art=t=>{this.hrt.uK(t.error,this.OR)},this.urt=()=>{this.hrt.rK(this.rrt),this.oa.removeEventListener("playing",this.urt),this.ort=!1},this.Ms=()=>{var t,i,s,e;this.ort||(this.oa.addEventListener("playing",this.urt),this.ort=!0),null==(t=this.oa.ads)||t.removeEventListener("adbegin",this.crt),null==(i=this.oa.theoads)||i.removeEventListener("interstitialbegin",this.drt);var n,r;(null==(e=this.oa.source)||null==(s=e.ads)?void 0:s.some(t=>"theoads"===t.integration))&&(null==(n=this.oa.ads)||n.addEventListener("adbegin",this.crt),null==(r=this.oa.theoads)||r.addEventListener("interstitialbegin",this.drt))},this.crt=t=>{"theoads"!==t.ad.integration||t.ad.isSlate||this.hrt.aK("ad")},this.drt=t=>{const i=t.interstitial;(function(t){return"adbreak"===t.type})(i)||this.hrt.aK(function(t){switch(t){case"adbreak":default:return"ad";case"overlay":return"overlay"}}(i.type))},this.hrt=i,this.oa=t,this.oa.addEventListener("error",this.art),this.oa.addEventListener("sourcechange",this.Ms),this.Ms()}};!function(t){YF.push(t)}(function(t){new xV(t.Ca,t.zet)}),r();var IV="theoplayer-stored-volume",PV="theoplayer-stored-mutedstate";Th(function(t){return class extends t{nx(t){this.Cd.persistVolume&&ta.Gy(PV,""+Boolean(t)),super.nx(t)}Vx(t){this.Cd.persistVolume&&ta.Gy(IV,""+Number(t)),super.Vx(t)}constructor(t,i){if(super(t,i),i.persistVolume){let t=ta.MQ(IV);(void 0===t||S(t))&&(t=1);const i=ta.LQ(PV)||!1;this.Ox=t,this.ix=i}}}},Rh.lu);var CV="9.11.0",NV=QF.Ca,DV=di.MP.registerContentProtectionIntegration.bind(di.MP);r(),r();As.k_&&As.R_?TN(class{Lq(t){return Promise.resolve("all")}Hx(){}kn(){}}):TN(AN),r(),r(),r(),r();var BV=class{async zX(t){return ue(t.type)}async YX(t){return!!await PT(t,!0)}},MV=class extends BV{async zX(t){return!!Au(t.useManagedMediaSource)&&super.zX(t)}};function LV(t){return bD(t)}function OV(t){const i=As.S_||As.w_,s=void 0!==t&&void 0!==t.preferredAudioCodecs&&t.preferredAudioCodecs.some(t=>"ac-3"===t||"ec-3"===t),e=i&&!s,n=new fv(!0);return async t=>{const i=t.GT;if(!n.Hm(i)&&!function(t,i){return!!t&&(io(t)?zR(i)||KR(i):Vh(t,Hy)||Vh(t,Yy)||Vh(t,Zy))}(t.iK,t.lrt))return!1;const s=t.lrt.some(t=>"ac-3"===t||"ec-3"===t);if(e&&s)return!1;if(t.CG){const s=t.CG,e=vl(s,t=>im(t.w9)).filter(Y),n=await async function(t,i){for(const s of t)if(await i(s))return!0;return!1}(e,t=>Zd.Sp(t,i));if(!n)return!1}return!0}}r(),r(),r(),r();var FV=class{get Mi(){return this.frt.offsetHeight*Zd.Zs.wm}get Ti(){return this.frt.offsetWidth*Zd.Zs.wm}constructor(t){this.frt=void 0,this.frt=t}};r(),r();var VV=class{HX(t){return this.DG.HX(t)}aet(t){return this.DG.aet(t)}RX(t){return this.DG.RX(t)}constructor(t){this.DG=void 0,this.DG=t}};function WV(t){return class extends t{get iX(){return this.SL.iX}}}r(),r(),r(),r(),r();var UV=class{get Cd(){return this.PS()}PS(){return this.eX.Cd}get kx(){return this.Ex()}Ex(){return this.eX.kx}SJ(t){return this.eX.SJ(t)}kJ(t){return this.eX.kJ(t)}Zg(){return Promise.resolve()}constructor(t){this.eX=void 0,this.eX=t}},Wo=class extends UV{get Y3(){return this.T5}get K3(){return this.k5}get IR(){return this.PR()}PR(){return this.eX.IR}get ct(){return this.Nd()}Nd(){return this.eX.ct}get UJ(){return this.vrt()}vrt(){return this.eX.UJ}x5(t){this.eX.x5(t)}N5(t,i,s,e){this.eX.N5(t,i,s,e)}P3(){this.eX.P3()}y3(){this.eX.y3()}Zg(){return this.T5&&(this.T5.Zg(),this.T5=void 0),this.k5&&(this.k5.Zg(),this.k5=void 0),super.Zg()}_rt(t){this.eX=t,this.T5?t.Y3?this.T5.grt(t.Y3):(this.T5.Zg(),this.T5=void 0):t.Y3&&(this.T5=this.mrt(t.Y3),this.T5.wn(SD,this.prt)),this.k5?t.K3?this.k5.grt(t.K3):(this.k5.Zg(),this.k5=void 0):t.K3&&(this.k5=this.mrt(t.K3),this.k5.wn(SD,this.prt))}RJ(t){this.eX.RJ(t)}wrt(t){}constructor(t){super(t),this.T5=void 0,this.k5=void 0,this.prt=t=>this.wrt(t)}};r(),r(),r();var GV=class extends fr{get Oj(){return this.Hj}set Oj(t){this.Hj=t}get IR(){return ZT.tL()}get Cd(){return this.qS}get N3(){return Mo.gk}get B3(){return ZT.tL()}get yrt(){return!1}get Dj(){return this.Gj}set Dj(t){this.Gj=t}W2(t,i,s){return Promise.reject(new m("Invalid media buffer"))}V3(){return Promise.reject(new m("Invalid media buffer"))}X2(t,i,s){return Promise.reject(new m("Invalid media buffer"))}UJ(){return!1}P3(){}O3(t,i){}F3(t,i){}vS(t,i,s){return Promise.resolve()}n3(t,i){return Promise.reject(new m("Invalid media buffer"))}pO(t,i){return Promise.reject(new m("Invalid media buffer"))}SJ(t){return!1}kJ(t){return Promise.reject(new m("Invalid media buffer"))}Zg(){this.Vo()}constructor(t){super(),this.qS=void 0,this.Gj=0,this.Hj=0,this.qS=t}},XV=class extends fr{get Oj(){return this.brt()}set Oj(t){this.Art(t)}brt(){return this.Srt.Oj}Art(t){this.Srt.Oj=t}get IR(){return this.PR()}PR(){return this.Srt.IR}get Cd(){return this.PS()}PS(){return this.Srt.Cd}get N3(){return this.Srt.N3}get B3(){return this.Trt()}Trt(){return this.Srt.B3}get Dj(){return this.krt()}set Dj(t){this.Ert(t)}krt(){return this.Srt.Dj}Ert(t){this.Srt.Dj=t}W2(t,i,s){return this.Srt.W2(t,i,s)}V3(){return this.Srt.V3()}X2(t,i,s){return this.Srt.X2(t,i,s)}O3(t,i){this.Srt.O3(t,i)}F3(t,i){this.Srt.F3(t,i)}vS(t,i,s){return this.Srt.vS(t,i,s)}n3(t,i){return this.Srt.n3(t,i)}SJ(t){return this.Srt.SJ(t)}kJ(t){return this.Srt.kJ(t)}tI(t){this.So(t)}Zg(){this.Vo(),this.grt(new GV(this.Cd))}grt(t){this.Srt.mn(SD,this.Rrt),this.Srt=t,this.Srt.wn(SD,this.Rrt)}constructor(t){super(),this.Srt=void 0,this.Rrt=t=>this.tI(t),this.Srt=t,this.Srt.wn(SD,this.Rrt)}},ZV=class extends XV{get net(){return this.SL}set net(t){this.SL=t}async W2(t,i,s){return Ko(s),await this.xrt(this.SL.OR,null==i?void 0:i.kst,null==i?void 0:i.ct),Ko(s),t.Kp===Vt.NT?await this.Irt(t,i,s):await this.Prt(t,i,s)}async Irt(t,i,s){let e=t;for(;;){const[t,n]=zb(e.hk);e={Kp:Vt.NT,hk:t};try{return await this.Crt(e,i,s),void n.cancel(new us).catch(ol)}catch(t){if(yc(t)){if(await this.xrt(this.SL.OR,i.kst,i.ct,s)){e={Kp:Vt.NT,hk:n};continue}}throw n.cancel(t).catch(ol),t}}}async Prt(t,i,s){for(;;)try{return Ko(s),await this.Crt(t,i,s)}catch(t){if(yc(t)){if(await this.xrt(this.SL.OR,i.kst,i.ct,s))continue}throw t}}async xrt(t,i,s,e){const n=FN(t,i,s,this.IR,this.Dj,this.Oj);for(const[t,i]of n)await this.Nrt(t,i,e);return n.length>0}Crt(t,i,s){return super.W2(t,i,s)}Nrt(t,i,s){return super.vS(t,i,s)}constructor(t){super(t),this.SL=void 0}},HV=class extends Wo{get net(){return this.SL}set net(t){this.SL=t,this.T5&&(this.T5.net=t),this.k5&&(this.k5.net=t)}mrt(t){const i=new ZV(t);return i.net=this.SL,i}constructor(t){super(t),this.SL=void 0,this._rt(t)}};r();var Jo=class extends UV{get yx(){return this.eX.yx}set yx(t){this.eX.yx=t}};function zV(t){return class extends t{get iX(){return this.SL.iX}get Mx(){return this.SL.Mx}get Nx(){return this.SL.Nx}Zx(){return this.SL.Zx()}}}r(),r(),r();var YV=class extends fr{get Drt(){return this.SL}get IR(){return this.PR()}PR(){return this.SL.IR}get NR(){return this.DR()}DR(){return this.SL.NR}get OR(){return this.FR()}FR(){return this.SL.OR}get Wu(){return this.SL.Wu}get ct(){return this.Nd()}Nd(){return this.SL.ct}get nX(){return this.Brt()}Brt(){return this.SL.nX}get GR(){return this.Mrt()}Mrt(){return this.SL.GR}get lt(){return this.SL.lt}get Mi(){return this.SL.Mi}get Ti(){return this.SL.Ti}get Ma(){return this.Xx()}Xx(){return this.SL.Ma}get pX(){return this.Aa()}Aa(){return this.SL.pX}get ix(){return this.SL.ix}set ix(t){this.SL.ix=t}get ux(){return this.Lrt()}Lrt(){return this.SL.ux}get vx(){return this.SL.vx}set vx(t){this.SL.vx=t}get mx(){return this.wx()}wx(){return this.SL.mx}get Sx(){return this.Tx()}Tx(){return this.SL.Sx}get kx(){return this.Ex()}Ex(){return this.SL.kx}get Rx(){return this.xx()}xx(){return this.SL.Rx}get Y5(){return this.Ort()}Ort(){return this.SL.Y5}get r4(){return this.Frt()}Frt(){return this.SL.r4}get nt(){return this.Cx()}Cx(){return this.Vrt}get Ql(){return this.ott()}ott(){return this.SL.Ql}get J9(){return this.SL.J9}get Ox(){return this.SL.Ox}set Ox(t){this.SL.Ox=t}get I7(){return this.SL.I7}get QR(){return this.SL.QR}get PL(){return this.SL.PL}get EX(){return this.Wrt()}set EX(t){this.Urt(t)}Wrt(){return this.SL.EX}Urt(t){this.SL.EX=t}get D7(){return this.SL.D7}set D7(t){this.Grt(t)}Grt(t){this.SL.D7=t}get g9(){return this.Xrt()}Xrt(){return this.SL.g9}tx(){return this.SL.tx()}Yx(){return this.SL.Yx()}zx(){this.SL.zx()}By(t,i,s){this.SL.By(t,i,s)}QG(t){this.SL.QG(t)}be(){this.SL.be()}we(){this.SL.we()}sI(t,i,s,e,n,r,h,o){return this.SL.sI(t,i,s,e,n,r,h,o)}wX(t){return this.SL.wX(t)}vX(){return this.SL.vX()}gX(t,i,s,e,n){return this.SL.gX(t,i,s,e,n)}sW(t){this.SL.sW(t)}bX(){this.SL.bX()}YJ(t){return this.SL.YJ(t)}async Un(t){const i=await this.SL.Un(t);let s;return s=t.Kp===xt.wW?this.Zrt(i):this.Hrt(i),this.eX=s,s}async hr(){this.eX&&(await this.eX.Zg(),this.eX=void 0),await this.SL.hr()}I9(){return this.SL.I9()}R7(){this.SL.R7()}x7(){this.SL.x7()}async Zg(){this.Vo(),this.SL.mn(wD,this.zrt),this.Vrt.MI=void 0,this.Vrt.kn(),this.eX&&(await this.eX.Zg(),this.eX=void 0)}C7(){this.SL.C7()}Yrt(t){this.SL.mn(wD,this.zrt),this.SL=t,this.Vrt.MI=t.nt,this.SL.wn(wD,this.zrt)}tI(t){this.So(t)}constructor(t){super(),this.SL=void 0,this.eX=void 0,this.Vrt=new Jc,this.zrt=t=>this.tI(t),this.SL=t,this.Vrt.MI=t.nt,this.SL.wn(wD,this.zrt)}},vn=class extends YV{get Drt(){return this.SL}get iX(){return this.SL.iX}get i4(){return this.SL.i4}get Gx(){return this.SL.Gx}set Gx(t){this.SL.Gx=t}N7(t){this.SL.N7(t)}Jx(){this.SL.Jx()}constructor(t){super(t)}},KV=class extends vn{Hrt(t){const i=new HV(t);return i.net=this,i}Zrt(t){return new Jo(t)}},qV=class extends(WV(KV)){constructor(t){super(t)}},jV=class extends(zV(KV)){constructor(t){super(t)}},ws=class extends VV{HX(t){return t===Mo.Nk?new jV(super.HX(t)):t===Mo.Ck?new qV(super.HX(t)):void 0}async RX(t){const i=t;await i.Zg(),await super.RX(i.Drt)}};r();var QV=class{Krt(){this.oa.$x()}kn(){s.removeEventListener("pageshow",this.qrt)}constructor(t){this.oa=void 0,this.qrt=t=>{t.persisted&&this.Krt()},this.oa=t,s.addEventListener("pageshow",this.qrt)}};r(),r(),r(),r(),r();var JV=class{jrt(t,i,s){return Promise.resolve()}Qrt(t,i,s,e){let n=[];if(e){const r={wV:i.kO,yV:i.EO,bV:s.Jrt.bV};e.Kp===hr.TTML?n=RR(t,e,r,s.iK):e.Kp===hr.WEBVTT&&(n=GE(t,r,this.$rt).L)}return n}hr(){}constructor(t){this.$rt=void 0,this.$rt=t}};r(),r(),r();var $V=function(t){return t.SC="vttc",t.tht="vsid",t.iht="iden",t.sht="ctim",t.eht="sttg",t.nht="payl",t.rht="vtte",t.hht="vtta",t}({}),tW=class t{static oht(i){return Boolean(t.aht[i])}static AN(i){const s=[],e=dh.oN(new oT(i,new J));for(const i of e)t.oht(i.Kp)&&s.push(t.aht[i.Kp](i.hk));return s}static uht(i){const s=dh.oN(i),e=fo(s,$V.tht),n=fo(s,$V.iht),r=fo(s,$V.sht),h=fo(s,$V.eht),o=fo(s,$V.nht);return{Kp:$V.SC,cht:e?t.dht(e):void 0,fht:n?t.vht(n):void 0,_ht:r?t.ght(r):void 0,mht:h?t.pht(h):void 0,wht:o?t.yht(o):void 0}}static dht(t){return{Kp:$V.tht,bht:t.JC()}}static vht(t){return{Kp:$V.iht,fht:t.eN()}}static ght(t){return{Kp:$V.sht,Aht:t.eN()}}static pht(t){return{Kp:$V.eht,Sht:t.eN()}}static yht(t){return{Kp:$V.nht,Tht:t.eN()}}static kht(t){return{Kp:$V.rht}}static Eht(t){return{Kp:$V.hht,Rht:t.eN()}}};tW.aht={[$V.SC]:tW.uht,[$V.rht]:tW.kht,[$V.hht]:tW.Eht};var iW=class{jrt(t,i,s){const e=new DataView(t.xht),n=Co.AN(e),r=me(n,t=>t.Kp===Ci.LP);return r&&(this.Iht=r.Z[0].YN._N.UN),Promise.resolve()}Qrt(t,i,s){if(S(this.Iht))return[];const e=xh(t),n=Co.AN(e),r=uT(n,Ci.RC),h=uT(n,Ci.LC);if(!r||0===r.Z.length||!h)return[];const o=function(t,i,s){const e=t.Z[0],n=e.ZB?e.ZB.ZB.toNumber()/s:i.kO,r=[];for(const t of e.XB)r.push(...t.jB);return{Pht:n,jB:r}}(r,i,this.Iht),a=s.Jrt.bV;return function(t,i,s,e){const n=tW.AN(xh(i.hk)),r=t.jB,h=t.Pht+e,o=[];let a=0;for(let t=0;t<r.length;t++){const i=r[t],e=n[t];var u;const c=(null!=(u=i.ct)?u:0)/s;let d;e.Kp===$V.SC&&(d=sW(e,a,c,h)),d&&o.push(d),a+=c}return o}(o,h,this.Iht,a)}hr(){this.Iht=NaN}constructor(){this.Iht=NaN}};function sW(t,i,s,e){if(!t.wht)return void 0;const n=t._ht?function(t){return tR(t.Aht,new J(0))}(t._ht):i,r=e+n,h=r+s,o=t.wht.Tht;return new Oe(r,h,o,!1)}r(),r();var ba=function(t){return t[t.GZ=0]="GZ",t[t.Cht=1]="Cht",t[t.Nht=10]="Nht",t[t.Dht=11]="Dht",t[t.Bht=12]="Bht",t[t.Mht=13]="Mht",t[t.Lht=14]="Lht",t[t.Oht=15]="Oht",t[t.Fht=20]="Fht",t[t.Vht=21]="Vht",t[t.Wht=22]="Wht",t[t.Uht=23]="Uht",t[t.Ght=24]="Ght",t[t.Xht=30]="Xht",t[t.Zht=31]="Zht",t[t.Hht=32]="Hht",t[t.zht=33]="zht",t[t.Yht=34]="Yht",t[t.Kht=35]="Kht",t[t.qht=40]="qht",t[t.jht=41]="jht",t[t.Qht=42]="Qht",t[t.Jht=43]="Jht",t[t.$ht=44]="$ht",t[t.tot=50]="tot",t[t.iot=51]="iot",t[t.eot=52]="eot",t[t.rot=60]="rot",t[t.hot=61]="hot",t[t.oot=62]="oot",t[t.aot=63]="aot",t[t.uot=70]="uot",t[t.cot=71]="cot",t[t.dot=72]="dot",t[t.lot=73]="lot",t[t.fot=74]="fot",t[t.vot=75]="vot",t[t._ot=76]="_ot",t[t.got=77]="got",t[t.mot=90]="mot",t[t.pot=91]="pot",t}({});function eW(t,i){const s=i.HM((i,s)=>t.GM(i,s,!1,!1));return t.LM(s)}function nW(t,i){const s=i.Mn(t.NM()).HM((i,s)=>t.Cr(s));return t.LM(s)}r(),r(),r(),r();var mo=function(t){return t.wot="yot",t.bot="Aot",t}({});r();var cn=class extends rl{constructor(t,i,s){super("Sot"),this.Tn=void 0,this.An=void 0,this.Tot=void 0,this.Tn=t,this.An=i,this.Tot=s}},rW=class extends sh{constructor(){super("kot")}},hW=[d.ey,d.uy,d.$w,d.Aw],oW=class extends fr{get Eot(){var t,i;return(null==(t=this.xot.Rot)?void 0:t.Tot)||(null==(i=this.xot.Iot)?void 0:i.Tot)}get Pot(){return this.Cot}set Not(t){this.xot.Not=t}get Not(){return this.xot.Not}get rk(){return this.Dot}Bot(t){this.Dot!==t&&(this.Dot=t,this.So(new rW))}get Mot(){return this.Cot.Ht.Mot}get lt(){return this.$G}async Tn(t){if(!this.Lot&&!this.Oot)return;const i=this.pw("kot");this.Lot?(this.Fot.Jg(),this.Fot=new ui,Ce(this.Vot(this.Fot.jg),this.Fot)):(this.Wot.Hy(void 0),this.Wot=new gs),await i}get Lot(){return"Uot"===this.Dot}get Oot(){return"Got"===this.Dot}get Xot(){return"Zot"===this.Dot}get Hot(){return"zot"===this.Dot}async Kx(t){if(this.Xot||this.Oot)for(0,this.Fot.Jg();!this.Lot&&!this.Hot;)await this.pw("kot")}async hr(t){this.Hot?(this.$G=void 0,this.Bot("Uot")):await this.Kx(t),this.xot.hr(),this.Cot.hr()}XX(t){this.$G=t,this.Bot("zot"),this.So(new $e(t))}Yot(){this.D9.wn(d.vy,this.bd),this.D9.wn([d.Jw,d.Ow],this.Je),this.xot.wn(hW,this.Rs),this.Kot.wn(mo.wot,this.bd)}qot(){this.D9.mn(d.vy,this.bd),this.D9.mn([d.Jw,d.Ow],this.Je),this.xot.mn(hW,this.Rs),this.Kot.mn(mo.wot,this.bd)}async jot(t){this.qot(),this.Qot.Jg(),await this.Kx(null!=t?t:ba.Jht),this.xot.hr()}async Jot(t){this.Yot(),await this.Tn(null!=t?t:ba.Oht)}$ot(t,i,s){if(this.Lot)for(const e of t.Cot.iat())e.sat<=s&&i<=e.eat&&this.Kot.nat.some(t=>t.o===e.rat)&&this.Cot.oat(e)}async kn(){this.Vo(),this.qot(),this.Qot.Jg(),await this.Kx(ba.$ht),this.xot.kn()}async Vot(t){for(;;)try{Ko(t),this.Bot("Zot"),await this.xot.aat(t),Ko(t),this.Bot("Got"),await $s(this.Wot.Yy,t)}catch(t){if(hc(t))this.Bot("Uot");else{const i=t instanceof Wt?t:new Wt(Ne.MEDIA_LOAD_ERROR,t.message,t);this.XX(i)}break}}async uat(t){Ko(t),await this.Kx(ba.Qht),this.xot.hr(),Ko(t),await this.Tn(ba.Mht)}constructor(t,i,s,e,n){super(),this.dat=void 0,this.Kot=void 0,this.Cot=void 0,this.xot=void 0,this.D9=void 0,this.Dot=void 0,this.$G=void 0,this.Wot=void 0,this.Qot=void 0,this.Fot=void 0,this.Je=void 0,this.bd=void 0,this.dat=t,this.Kot=i,this.Cot=s,this.xot=e,this.D9=n,this.Dot="Uot",this.$G=void 0,this.Wot=new gs,this.Qot=new ui,this.Fot=new ui,this.Je=t=>{if(this.Lot||this.Hot)return;if(!Zd.gR&&this.xot.fat(t.currentTime))return;this.Qot.Jg(),this.Qot=new ui;Ce(this.uat(this.Qot.jg),this.Qot).catch(Na)},this.bd=Hh(()=>{if(this.Oot){try{this.xot.vat();if(this.xot._at())return}catch(t){if(!(t instanceof cn))throw t}this.Tn(ba.Lht)}},250),this.Yot()}};r(),r();var aW=class t{gat(t,i){return this.mat(t,!1,i)}pat(t,i){return this.mat(t,!0,i)}async mat(i,s,e){Ko(e.jg);const n=await this.wat(i,s,e);return n.YT?t.yat(n):this.bat(n)}bat(t){return t}static yat(t){return t}wat(t,i,s){var e;const n=new F({Yu:t.Yu,ck:Bi.PT,lk:t.Aat?{Range:"bytes="+t.Aat[0]+"-"+(null!=(e=t.Aat[1])?e:"")}:void 0,Xk:t.Xk,Fk:ci.GET,Kp:Ic.wk,Uk:i?vs.Ak:vs.gk,Gk:this.Sat,Vk:s.Tat,Wk:s.Wk,jg:s.jg,zk:s.zk});return this.rW.dk(n)}constructor(t,i){this.rW=void 0,this.Sat=void 0,this.rW=t,this.Sat=i}};r(),r();var uW=class{Eat(t,i){const s=this.Rat**t,e=i*(1-s)+s*this.pst;S(e)||(this.pst=e,this.xat+=t)}Iat(){const t=1-this.Rat**this.xat;return this.pst/t}constructor(t){this.Rat=void 0,this.pst=0,this.xat=0,this.Rat=_.exp(_.log(.5)/t)}},cW=class{Eat(t,i){const s=8e3*i/t,e=t/1e3;this.Pat+=i,this.Cat.Eat(e,s),this.Nat.Eat(e,s)}Iat(){return this.Dat()?_.min(this.Cat.Iat(),this.Nat.Iat()):this.Bat}Dat(){return this.Pat>=this.Mat}constructor(t=2,i=5,s=128e3){this.Cat=void 0,this.Nat=void 0,this.Pat=0,this.Mat=void 0,this.Bat=XI,this.Cat=new uW(t),this.Nat=new uW(i),this.Mat=s}},dW=class{get Lat(){return this.Oat.Iat()}get Dat(){return this.Oat.Dat()}Fat(t){const i=t.Vat,s=this.Wat?t.Uat-t.Gat:t.Uat-t.Xat,e=t.Zat;!e&&i<this.Hat||(e?this.Oat.Eat(2*s,i):this.Oat.Eat(s,i))}constructor(t,i){this.Wat=void 0,this.Oat=void 0,this.Hat=void 0,this.Wat=i,i&&LT(t)?t===Mo.Nk?(this.Hat=5e3,this.Oat=new cW(.05,1,0)):(this.Hat=0,this.Oat=new cW(.005,.1,0)):(this.Hat=16e3,this.Oat=new cW)}};r(),r(),r();var lW=class{transform(t,i){this.ef.write(t).catch(ol),i.enqueue(t)}flush(){this.ef.close().catch(ol)}constructor(t){this.ef=void 0,this.ef=t}},fW=class{zat(){return new vW(Xb(this.xht),this.Yat,this.Kat)}constructor(t,i,s){this.xht=void 0,this.Yat=void 0,this.Kat=void 0,this.xht=t,this.Yat=i,this.Kat=s}},vW=class t{get UT(){return this.qat}WT(t){return Zb(this.qat,t)}My(){const[i,s]=zb(this.qat);return this.qat=i,new t(s,this.Yat,this.Kat)}jat(){const[i,s]=function(t){const i=new Sa,s=i.writable.getWriter(),e=new Sa(new lW(s));return t.pipeTo(e.writable).catch(t=>{s.abort(t).catch(ol)}),[e.readable,i.readable]}(this.qat);return this.qat=i,new t(s,this.Yat,this.Kat)}Qat(t){return this.WT(t).then(t=>new fW(t,this.Yat,this.Kat))}constructor(t,i,s){this.qat=void 0,this.Yat=void 0,this.Kat=void 0,this.qat=t,this.Yat=i,this.Kat=s}};r();var _W=class extends rl{constructor(t,i,s){super(i,s),this.Jat=void 0,this.Jat=t}},gW="Cache lookup failed.",mW=class extends fr{async $at(t,i){Ko(i);const s=await this.iut.tut(t.Yu.Yu,t.Yu.Aat);if(Ko(i),!s)throw new _W(t,gW);const e=new fW(s.buffer,s.byteLength,s.reference);return{Jat:t.Jat,sut:{Kp:Vt.fJ,hk:e},Tot:t.Tot,Yu:t.Yu}}async eut(t,i){Ko(i);const s=await this.iut.tut(t.Yu,t.Aat);if(Ko(i),!s)throw new _W(t,gW);const e=new fW(s.buffer,s.byteLength,s.reference);return{Kp:Vt.fJ,hk:e}}kn(){this.Vo()}constructor(t){super(),this.iut=void 0,this.iut=t}};r();var pW=["oy","ly"],wW=class extends fr{async $at(t,i){let s;for(const e of this.nut)try{return await e.$at(t,i)}catch(t){Ui(t),s=t}throw s}async eut(t,i){let s;for(const e of this.nut)try{return await e.eut(t,i)}catch(t){Ui(t),s=t}throw s}kn(){for(const t of this.nut)t.mn(pW,this.Rs),t.kn()}constructor(t){super(),this.nut=void 0,this.nut=t;for(const t of this.nut)t.wn(pW,this.Rs)}};function yW(t){return ih(t.rut)}function bW(t){return yW(t)?t.rut:t.hut}r(),r(),r(),r();var AW=class extends sh{constructor(t,i,s,e,n,r){super(t),this.aut=void 0,this.Iz=void 0,this.VB=void 0,this.QN=void 0,this.Gk=void 0,this.aut=i,this.Iz=s,this.VB=e,this.QN=n,this.Gk=r}},SW=class extends AW{constructor(t,i,s,e,n){super(d.ey,t,i,s,e,n)}};r(),r();var TW=class{constructor(t,i){this.uut=void 0,this.cut=void 0,this.uut=t,this.cut=i}},kW=class extends TW{get Vat(){return this.lut}start(){}transform(t,i){this.lut+=t.byteLength,i.enqueue(t)}flush(){this.fut(!1)}Jg(){this.fut(!0)}fut(t){this.uut(this.cut,Zd.Mg(),this.Vat,t)}constructor(...t){super(...t),this.lut=0}},EW=class extends TW{get Vat(){return this.lut}start(){this.cut=Zd.Mg()}transform(t,i){this.lut+=t.byteLength,this.vut||this._ut(t)&&this.fut(!1),i.enqueue(t)}flush(){}Jg(){this.fut(!0)}_ut(t){const i=this.gut(t),s=this.mut(i);return Boolean(me(s,RW))}gut(t){return this.wut&&void 0!==this.yut?(this.wut=xu([this.wut,t]),new oT(xh(this.wut),new J(this.yut))):(this.wut=t,new oT(xh(t),new J))}mut(t){const i=dh.aN(t.hk,t.KC,!0);return i.uN?(this.wut=void 0,this.yut=void 0):this.yut=t.KC.ac,i.m}fut(t){this.vut||(this.uut(this.cut,Zd.Mg(),this.Vat,t),this.vut=!0)}constructor(...t){super(...t),this.lut=0,this.vut=!1,this.wut=void 0,this.yut=void 0}};function RW(t){return t.Kp===Ci.LC}var xW=class{but(t){const i=t.vk?this.Aut:Zd.Mg(),s=this.Sut(i),e=new Sa(s),n=t.UT().pipeTo(e.writable).then(()=>({$R:{Vat:s.Vat}}),t=>{throw s.Jg(),t});return this.Tut.$g(n),e.readable}kut(t){const i=t.vk?this.Aut:Zd.Mg(),s=t.WT(),e=s.then(t=>{const s=Zd.Mg();return this.Fat(i,s,t.byteLength,!1),{$R:{Vat:t.byteLength}}},t=>{const s=Zd.Mg();throw this.Fat(i,s,0,!0),t});return this.Tut.$g(e),s}get Eut(){return this.Tut.Yy}constructor(t){this.Rut=void 0,this.Tut=void 0,this.Aut=void 0,this.Fat=void 0,this.Rut=t,this.Tut=new gs,this.Fat=(t,i,s,e)=>{const n={Xat:this.Aut,Gat:t,Uat:i,Vat:s,Zat:e};this.Rut.Fat(n),this.Rut.Dat&&bu.Bg.lG(this.Rut.Lat)},this.Tut.Yy.catch(ol),this.Aut=Zd.Mg()}},IW=class extends xW{Sut(t){return new kW(this.Fat,t)}},PW=class extends xW{Sut(t){return new EW(this.Fat,t)}};r();var CW=class extends AW{constructor(t,i,s,e,n,r,h){super(d.uy,t,i,s,e,n),this.xut=void 0,this.nO=void 0,this.xut=r,this.nO=h}};r();var NW=class extends rl{constructor(t,i,s){super("Error downloading segment "+bW(i),t),this.Iut=void 0,this.Put=void 0,this.Cut=void 0,this.Iut=i.kO,this.Put=i.EO,this.Cut=s}},DW=class extends fr{Nut(){return this.Wat?new PW(this.Rut):new IW(this.Rut)}async $at(t,i){Ko(i);const s=t.Tot,e=t.Yu,n=t.Jat,r=bW(n),h=s.Tot?s.Tot.qI:-1,o=function(t){const i=t.Tot;let s;s=i===function(t){return t.nat.reduce((t,i)=>t.EG<i.EG?t:i)}(i.Dut)?dn(5*t.Jat.ct):dn(1.2*t.Jat.ct);return ss(s,1e3,18e3)}(t);this.So(new SW(e,s.EG,r,h,s.Kp));try{const t=this.Nut(),a=await this.But.gat(e,{zk:this.Wat,Tat:o,jg:i}),u=await this.Mut(a,a.YT,i,t);return _e(this.Lut(t.Eut,s,e,r,h,a)),{sut:u,Tot:s,Jat:n,Yu:e}}catch(t){throw Ui(t),new NW(t,n,s)}}async eut(t,i){Ko(i);const s=!1,e=await this.But.pat(t,{zk:s,Tat:1e4,jg:i});return await this.Mut(e,s,i)}async Mut(t,i,s,e){if(i){const i=e?e.but(t):t.UT();return{Kp:Vt.NT,hk:new vW(i)}}{const i=e?await e.kut(t):await t.WT(s);return{Kp:Vt.fJ,hk:new fW(i)}}}async Lut(t,i,s,e,n,r){try{const h=await t;this.So(new CW(s,i.EG,e,n,i.Kp,r.rk,h.$R.Vat))}catch(t){}}kn(){this.Vo()}constructor(t,i,s){super(),this.But=void 0,this.Rut=void 0,this.Wat=void 0,this.But=t,this.Rut=i,this.Wat=s}};r();var BW=.001,MW=class{get IR(){return this.Out.IR}get Fut(){return this.Out.Fut}get QJ(){return this.Out.QJ}get Vut(){if(this.t5.Sx<pi.Qn)return!1;if(this.Out.An<=this.Wut&&this.Out.Uut())return!0;const t=this.Out.jG;if(!t||0===t.V)return!1;const i=ZT.$M(this.D9.OR,1/0);return t.Mn(i).FM(this.Out.QJ).QM>=this.kZ.Xj}get Wut(){const t=this.Out.jG;let i;if(t&&t.V>0)i=t.An(0);else{i=this.D9.OR;const t=this.Out.QJ,s=t.VM(i);s>=0&&(i=t.An(s))}const s=this.Out.kx.Tn(0);if(s>i){if(this.Out.Tn<=i&&this.Out.An>=i&&s>i+BW)throw new cn(i,s);i=s}return i=this.Out.Gut.CM(i),i}constructor(t,i,s,e){this.Out=void 0,this.D9=void 0,this.t5=void 0,this.kZ=void 0,this.Out=t,this.D9=i,this.t5=s,this.kZ=e}};r();var LW=class{get Xut(){if(0===this.Up.size)return this.Zut;let t=ZT.$M(0,1/0);return t=t.Mn(this.Zut),this.Up.forEach(i=>{t=t.Mn(i)}),t}Hut(t){return this.Up.get(t.o)}zut(){let t=this.Zut;return this.Up.forEach(i=>{t=t.LM(i)}),t}Yut(t){if(this.Zut.Cr(t))return!0;let i=!1;return this.Up.forEach(s=>{i=i||s.Cr(t)}),i}Kut(t,i){const s=this.Up.get(i.o);return!!s&&s.Cr(t)}WM(t,i){if(this.Zut.WM(t,i))return!0;let s=!1;return this.Up.forEach(e=>{s=s||e.WM(t,i)}),s}qut(t,i){const s=this.Up.get(i),e=s?s.LM(t):t;this.Up.set(i,e),this.Zut=this.Zut.LM(t)}jut(t){this.Up.forEach((i,s)=>{this.Up.set(s,i.LM(t))}),this.Zut=this.Zut.LM(t)}Qut(t){this.Up.forEach((i,s)=>{this.Up.set(s,i.Mn(t))}),this.Zut=this.Zut.Mn(t)}hr(){this.Up.forEach((t,i)=>{this.Up.set(i,ZT.tL())}),this.Zut=ZT.tL()}constructor(){this.Up=void 0,this.Zut=void 0,this.Up=Se(),this.Zut=ZT.tL()}},OW=class{get Jut(){return this.$ut}get QJ(){return this.JJ}tct(t){for(const i of this.ict){if(i.sat>t)break;if(i.eat>t)return i}}sct(t){for(const i of this.ict){if(i.ect>t)break;if(i.nct>=t)return i}}rct(t,i){const s=[];for(const e of this.ict){if(e.sat>t)break;e.eat>=i&&s.push(e)}return s}iat(){return this.ict}oat(t){const i=ZT.$M(t.ect,t.nct),s=i.NM();this.$ut.Qut(s),this.$ut.qut(i,t.rat),this.hct(s);const e=li(this.ict,i=>t.sat<=i.sat);if(e<0)this.ict.push(t);else{this.ict[e].eat<=t.eat?this.ict.splice(e,1,t):this.ict.splice(e,0,t)}}$J(t,i){this.JJ.qut(t,i)}act(t){this.JJ.jut(t)}Qut(t){this.$ut.Qut(t),this.JJ.Qut(t);const i=this.$ut.zut();this.hct(i)}hct(t){this.ict=this.ict.filter(i=>t.GM(i.ect,i.nct)).map(i=>i.uct&&!t.WM(i.ect,i.nct)?function(t,i){return{rat:t.rat,sat:t.sat,eat:t.eat,ect:t.ect,nct:t.nct,uct:i}}(i,!1):i)}hr(){this.$ut.hr(),this.JJ.hr(),this.ict=[]}kn(){this.hr()}constructor(t){this.Ht=void 0,this.$ut=void 0,this.JJ=void 0,this.ict=[],this.Ht=t,this.$ut=new LW,this.JJ=new LW}};r(),r();var FW=class{get Not(){return this.cct}set Not(t){this.cct=t}get Mot(){return this.Cot.Ht.Mot}async dct(t,i,s){let e;Ko(s);const n=this.Cot.sct(t);e=n&&we(n.nct,t,1e-5)?n.eat:t;const r=this.lct(e),h=function(t){return VW.bind(void 0,t)}(e);let o=await this.tp.fct(h,r,i,s);for(Ko(s);o&&this.vct(o.Jat);){const t=XW(o.Jat),e=o.Tot;o=await this.tp.fct(t,[e],i,s),Ko(s)}if(!o)return void 0;if(!this._ct(o.Jat))return o;const a=this.gct(o.Jat);if(t<a.Tn)return await this.findFirstNonAppendedSegmentBeforeSegment(o,i,s,a);if(t>=a.An)return await this.findFirstNonAppendedSegmentAfterSegment(o,i,s);if(!o.Tot.mct(o.Jat))throw new m("Fatal buffering error")}async findFirstNonAppendedSegmentAfterSegment(t,i,s){let e=t;do{const n=XW(e.Jat),r=t.Tot;e=await this.tp.fct(n,[r],i,s),Ko(s)}while(e&&this._ct(e.Jat));if(e)return e}async findFirstNonAppendedSegmentBeforeSegment(t,i,s,e){let n=t;do{const e=GW(n.Jat),r=t.Tot;n=await this.tp.fct(e,[r],i,s),Ko(s)}while(n&&this._ct(n.Jat));if(!n){0;const i=t.Tot.pct.Tn;throw new cn(i,e.Tn,t.Tot)}return n}wct(t){return this.Cot.Jut.Yut(t)}yct(t){return this.Cot.rct(t.kO,t.EO)}_ct(t){const i=this.yct(t);return i.length>0&&function(t,i){return function(t){let i=ZT.tL();for(const s of t)i=i.LM(ZT.$M(s.sat,s.eat));return i}(t).WM(i.kO,i.EO)}(i,t)&&i.every(ZW)}vct(t){return this.Cot.QJ.WM(t.kO,t.EO)}gct(t){const i=this.yct(t);return{Tn:i[0].ect,An:i[i.length-1].nct}}lct(t){const i=this.bct(t);if(0===i.length){const t=this.cct?this.cct:this.Cot.Ht.nat;return[t[t.length-1]]}const s=i.filter(t=>{var i;return(null==(i=t.Tot)?void 0:i.oet)&&!t.Act});return s.length>0?s:[i[i.length-1]]}bct(t){return(this.cct?this.cct:this.Cot.Ht.nat).filter(i=>!this.Cot.QJ.Kut(t,i))}constructor(t,i,s){this.dat=void 0,this.Cot=void 0,this.tp=void 0,this.cct=void 0,this.dat=t,this.Cot=i,this.tp=s}};async function VW(t,i,s,e){const n=i.Jrt.Sct(t);if(n){if(i.Tct(n)){return(await i.Ect(n,s,e)).kct(t)}return n}}async function WW(t,i,s,e){if(yW(t)){if(0===t.rut)return;const n=i.Jrt.Rct(t);if(!n)return;return(await i.Ect(n,s,e)).xct(t.rut-1)}return i.Jrt.Ict(t)}async function UW(t,i,s,e){if(yW(t)){const n=i.Jrt.Rct(t);if(!n)return;const r=await i.Ect(n,s,e);if(t.rut+1===r.V)return;return r.xct(t.rut+1)}return i.Jrt.Pct(t)}function GW(t){return WW.bind(void 0,t)}function XW(t){return UW.bind(void 0,t)}function ZW(t){return t.uct}r();var HW=class{async fct(t,i,s,e){Ko(e);const n=this.Cct(i,s);if(!n)return;const r=await t(n,this.Nct,e);if(!r)return;const h=n.Dct(r);return{Tot:n,Jat:r,Yu:h}}Cct(t,i){if(0===t.length)return;const s=this.Mct.Bct(t,this.Lct?i:void 0,this.Out,this.kZ.Wj);return this.Lct||(this.Lct=!0),s}constructor(t,i,s,e){this.Mct=void 0,this.Out=void 0,this.kZ=void 0,this.Nct=void 0,this.Lct=void 0,this.Mct=t,this.Out=i,this.kZ=s,this.Nct=e,this.Lct=!1}};r();var zW=class{async fct(t,i,s,e){Ko(e);const n=this.Mct.Oct(i,s,this.Out);if(!n.length)return;let r;for(const i of n)try{Ko(e);const s=await t(i,this.Nct,e);if(s){const t=i.Dct(s);if(await this.iut.Fct(t.Yu,t.Aat))return{Jat:s,Tot:i,Yu:t}}}catch(t){Ui(t),r=t}if(r)throw r}constructor(t,i,s,e){this.Mct=void 0,this.Out=void 0,this.iut=void 0,this.Nct=void 0,this.Mct=t,this.Out=i,this.iut=s,this.Nct=e}};function YW(t){return void 0!==t.vx}function KW(t,i){const s=t.Ti&&i.Ti,e=t.Mi&&i.Mi;if(s||e){if(s&&e)return t.Ti*t.Mi-i.Ti*i.Mi;if(s)return t.Ti-i.Ti;if(e)return t.Mi-i.Mi;return(t.Ti||1)*(t.Mi||1)-(i.Ti||1)*(i.Mi||1)}return 0}function qW(t,i){return KW(t,i)||function(t,i){return t.EG-i.EG}(t,i)}r(),r();var Rr=class t{Bct(i,s,e,n){let r=t.sortByQuality(i);if(void 0!==this.Vct&&void 0===s&&i.length>1){const i=t.Wct(r,this.Vct);i&&(r=i)}const h=this.Oct(r,s,e,n);return h.length?h[h.length-1]:r[0]}Oct(i,s,e,n){var r;const h=t.sortByQuality(i),o={Lat:void 0===n||this.Uct.Dat?this.Uct.Lat:n,vx:YW(e)&&e.vx?e.vx:1,Gct:e.Ti,Xct:e.Mi,Zct:null==(r=this.Hct)?void 0:r.restrictToPlayerSize};let a=h;for(const t of this.zct)a=t(a,s,o,this.Ip,this.Yct);return a}static Kct(i){return t.sortByQuality(i)[0]}static qct(i,s){var e;return s?t.Kct(null!=(e=t.Wct(i,s))?e:i):t.Kct(i)}static Wct(t,i){for(const s of i){const i=t.filter(t=>kB(t.Um,s));if(i.length>0)return i}}static sortByQuality(t){const i=[...t];return i.sort(qW),i}constructor(t,i,s,e,n,r){this.Uct=void 0,this.zct=void 0,this.Ip=void 0,this.Hct=void 0,this.Vct=void 0,this.Yct=void 0,this.zct=t,this.Uct=i,this.Ip=s,this.Hct=e,this.Vct=n,this.Yct=r}};r();var jW=(t,i,s,e,n)=>t.filter(t=>n.SJ(t)&&e.Lm(i,t));r();var QW=(t,i,s,e)=>void 0===i&&e.Vm?[t[t.length-1]]:t.filter(t=>function(t,i,s){const e=s.Lat;if(e<=0)return!1;return.8*e>t.EG*s.vx}(t,0,s));r();var JW=(t,i,s,e,n)=>{const r=s.Zct;if(void 0===r&&!e.Ks)return t;if(!1===r)return t;if(t.length>0&&t[0].Kp!==Mo.Nk)return t;for(let i=t.length-1;i>=0;i--){const e=t[i];if(e.Mi===s.Xct&&e.Ti===s.Gct)return t.slice(0,i+1);if(e.Mi<s.Xct||e.Ti<s.Gct)return t.slice(0,i+2)}return[]};r();var $W=class{async fct(t,i,s,e){let n;for(const r of this.jct)try{const n=await r.fct(t,i,s,e);if(n)return n}catch(t){n=t}if(n)throw n}constructor(t){this.jct=void 0,this.jct=t}};r(),r();var tU=class{async Qct(t,i,s,e){let n;for(const r of this.Jct)try{return await r.Qct(t,i,s,e)}catch(t){Ui(t),n=t}throw n}constructor(t){this.Jct=void 0,this.Jct=t}};r();var iU=class{async Qct(t,i,s,e){var n;const r=await this.rW.dk({Yu:t,ck:Bi.PT,lk:i?{Range:"bytes="+i[0]+"-"+(null!=(n=i[1])?n:"")}:void 0,Xk:s,Fk:ci.GET,Kp:Ic.gk,jg:e});return await r.WT()}constructor(t){this.rW=void 0,this.rW=t}};r();var sU=class{async Qct(t,i,s,e){const n=await this.iut.tut(t,i);if(n)return n.buffer;if(i){const s=await this.iut.tut(t);if(s)return Hc(new j(s.buffer),i[0],i[1])}throw new _W({Yu:t,Aat:i,Xk:!1})}constructor(t){this.iut=void 0,this.iut=t}};r();var eU=1.05,nU=(t,i,s,e)=>{if(!1===s.Zct)return t;if(e.gm)return t;const n=e.pm;var r;const h=(null!=(r=null==n?void 0:n.width)?r:s.Gct)*eU;var o;const a=(null!=(o=null==n?void 0:n.height)?o:s.Xct)*eU;for(let i=t.length-1;i>=0;i--){const s=t[i];if(s.Mi<=a&&s.Ti<=h)return t.slice(0,i+1)}return[]},rU=class{static Rst(t,i,s,e,n,r,h,o,a,u){const c=function(t,i){return new tU([new sU(i),new iU(t)])}(r,h),d=new Rr([jW],n,Zd.Zs,o,a,u),l=new zW(d,i,h,c),f=new Rr([QW,jW,JW,nU],n,Zd.Zs,o,a,u),v=new HW(f,i,e,c),_=new $W([l,v]);return new FW(t,s,_)}};r(),r();var hU=class extends sh{constructor(t,i,s,e,n,r=0){super(d.$w),this.segmentStartTime=void 0,this.error=void 0,this.trackType=void 0,this.track=void 0,this.quality=void 0,this.retryCount=void 0,this.segmentStartTime=t,this.error=i,this.trackType=s,this.track=e,this.quality=n,this.retryCount=r}};r();var oU=class extends sh{constructor(t,i){super(d.Aw),this.track=void 0,this.segments=void 0,this.track=t,this.segments=i}},aU=class extends rl{constructor(t,i){super(i),this.$ct=void 0,this.$ct=t}},uU=[d.ey,d.uy],cU=class extends fr{get Rot(){return this.tdt}get Iot(){return this.idt}set Not(t){this.sdt.Not=t}get Not(){return this.sdt.Not}get Mot(){return this.Cot.Ht.Mot}edt(t){return!this.q2||!t||!fu(this.q2.xht,t.xht)}fat(t){if(!this.tdt)return!1;const i=this.tdt.Jat,s=ZT.$M(i.kO,i.EO),e=this.ndt.Fut,n=e.VM(t);return n<0?s.Cr(t,BW):s.GM(t,e.An(n),!0,!0,BW)}async aat(t){const i=this.Cot.Ht.nat;for(;;){let n;try{var s;Ko(t),this.vat();if(this._at())break;n=this.rdt();const r=await this.fct(n,t);if(void 0===r)break;if(this.tdt=r,!dU(this.tdt)){await this.hdt(this.tdt,t);continue}var e;if(this.idt&&!yB(this.idt.Tot.lrt,this.tdt.Tot.lrt)&&await this.Yct.kJ(this.tdt.Tot),this.tdt.Tot.CG&&(!this.Iot||(null==(s=this.idt)?void 0:s.Tot)!==this.tdt.Tot))null==(e=this.lX)||e.VG(this.tdt.Tot.CG);await this.odt(n,this.tdt.Jat,t),this.q2=await this.adt(this.tdt.Tot,t);const h=await this.$at(this.tdt,t),o=this.ndt.IR,a=this.idt;this.idt=await this.udt(h,t);const u=this.ndt.IR;this.cdt(a,this.tdt,o,u,n),i.forEach(t=>t.Act=!1),this.ddt=0,this.ldt=0}catch(s){if(s instanceof cn){this.O3(s.Tn,s.An,s.Tot);continue}if(s instanceof aU){let e=500;if(i.every(t=>t.Act)){if(2===this.ddt){const t=this.ndt.IR;if(this.fdt(this.tdt),this.cdt(this.idt,this.tdt,t,t,n),i.forEach(t=>t.Act=!1),this.ldt+=1,this.ddt=0,this.ldt===this.vdt.maxRetries)throw new Wt(Ne.MEDIA_LOAD_ERROR,"The segments could not be loaded.",s);continue}this.ddt++;const t=this.vdt.minimumBackoff*2**(this.ddt-1);e=_.min(t,this.vdt.maximumBackoff)}await hi(e,t);continue}throw this._dt=ZT.tL(),s}finally{this.tdt=void 0}}}cdt(t,i,s,e,n){const r=e.FM(s),h=i.Tot,o=h.gdt(i.Jat),a=h.mct(i.Jat);let u=i.Jat.kO,c=i.Jat.EO;o&&(u=_.min(u,_.max(0,h.pct.Tn-.05))),a&&(c=_.max(c,h.pct.An));const d=ZT.$M(u,c).FM(e);if(0===r.V)return void this.mdt(s,d,u,n);if(o||this._dt.V>0){const t=d.Mn(ZT.$M(u,r.Tn(0)));this.pdt(t)}const l=r.NM().Mn(ZT.$M(r.Tn(0),r.An(r.V-1)));if(this.pdt(l),a){const t=d.Mn(ZT.$M(r.An(r.V-1),c));this.pdt(t)}if(this._dt.V>0){const t=this._dt.FM(r);this.pdt(t),this._dt=ZT.tL()}const f=h.Jrt,v=yW(i.Jat)?void 0:f.Ict(i.Jat);var g;const m=null!=(g=null==t?void 0:t.Jat)?g:this.wdt(v)?v:void 0;if(m){const t=this.Cot.rct(m.kO,m.EO);if(t.length>0){const i=ZT.$M(t[t.length-1].nct,r.Tn(0));this.pdt(i)}}const p=yW(i.Jat)?void 0:f.Pct(i.Jat);if(p&&this.wdt(p)){const t=this.Cot.rct(p.kO,p.EO);if(t.length>0){const i=ZT.$M(r.An(r.V-1),t[0].ect);this.pdt(i)}}}mdt(t,i,s,e){let n=i;0===this._dt.V&&(this._dt=ZT.$M(t.An(t.V-1),s)),0===n.V&&void 0!==e&&(n=ZT.JM(e)),this._dt=this._dt.LM(n),this.Cot.act(this._dt)}wdt(t){return!!t&&this.Cot.rct(t.kO,t.EO).length>0}pdt(t){const i=t.FM(this.ndt.IR);for(let t=0;t<i.V;t++)i.Tn(t)!==i.An(t)&&this.ydt.$J(i.Tn(t),i.An(t))}bdt(t,i){throw new aU(t,i)}vat(){if(this._dt.V>0)return;var t;const i=this.ndt.Fut.LM(null!=(t=this.ndt.QJ.PM().jM(this.ndt.Wut))?t:ZT.tL());this.Cot.Qut(i),this.Adt&&!this.Sdt(this.Adt)&&(this.Adt=void 0),this.So(new oU(this.Cot.Ht.Mot,this.Cot.iat()))}_at(){return this.idt&&this.idt.Tot.mct(this.idt.Jat)?(this.ydt.P3(),!0):(this.Adt&&this.Adt.Tot.mct(this.Adt.Jat)&&this.Sdt(this.Adt)&&this.ydt.P3(),!!this.ndt.Vut)}Sdt(t){return this.Cot.Jut.WM(t.Tdt,t.kdt)}Edt(t,i,s){(!this.Adt||this.Adt.Jat.EO<t.Jat.EO)&&(this.Adt=Jr({},t,{Tdt:i,kdt:s}))}rdt(){const t=this.ndt.Wut;return t}async fct(t,i){Ko(i);const s=this.idt?this.idt.Tot:void 0,e=await this.sdt.dct(t,s,i);if(e)return e}async hdt(t,i){const s={stack:[],error:void 0,hasError:!1};try{const e=t.Tot,n=e.Jrt,r=yW(t.Jat)?n.Rct(t.Jat):t.Jat,h=e.xdt.Rdt(),o=n.Idt(r);if(o&&o.getTime()<=h.getTime())return this.bdt(ba.Wht,"Segment is not available.");const a=n.Pdt(r).getTime()-h.getTime();0;const u=Zr(s,ui.nm([i]),!1);await Promise.race([hi(a,u.jg),e.pw(mo.wot,u.jg)])}catch(t){s.error=t,s.hasError=!0}finally{hs(s)}}async adt(t,i,s){void 0===s&&(s=0),Ko(i);const e=t.Cdt;if(!e)return this.q2;try{if(!t.Ndt){const s=await this.Ddt.eut(e,i);t.Ndt=s.hk}}catch(e){if(Ui(e),tt(e)){if(2===s)return t.Act=!0,this.bdt(ba.Kht,"Could not fetch the initializer.");const e=_.min(this.vdt.minimumBackoff*2**s,this.vdt.maximumBackoff);return await hi(e,i),this.adt(t,i,s+1)}throw new Wt(Ne.MEDIA_LOAD_ERROR,e.message,e)}Ko(i);try{this.edt(t.Ndt)&&await this.ydt.jrt(t.Ndt,t,i)}catch(t){if(Ui(t),tt(t))return this.bdt(ba.Kht,"Could not append the initializer.");throw new Wt(Ne.MEDIA_DECODE_ERROR,t.message,t)}return t.Ndt}async $at(t,i){for(let s=0;;s++)try{return Ko(i),await this.Ddt.$at(t,i)}catch(e){if(Ui(e),e instanceof NW){if(CA(e.cause))return this.Bdt(new NW(e,t.Jat,t.Tot),s),this.bdt(ba.Wht,"Timeout while fetching the segment.");if(PA(e.cause)&&s>=2)return t.Tot.Act=!0,this.Bdt(e,s),this.bdt(ba.Wht,"Could not fetch the segment.");const n=_.min(this.vdt.minimumBackoff*2**s,this.vdt.maximumBackoff);await hi(n,i);continue}throw new Wt(Ne.MEDIA_LOAD_ERROR,e.message,e)}}async odt(t,i,s){const e=this.Cot.rct(i.kO,i.EO),n=this.ndt.Fut.jM(t);let r=ZT.tL();for(const t of e){Ko(s);const i=t.ect,e=t.nct,h=n&&n.GM(i,e)?_.max(i,n.An(0)):i,o=e;h<o&&(r=r.LM(ZT.$M(h,o)))}for(let t=0;t<r.V;t++)await this.ydt.Mdt(r.Tn(t),r.An(t),s);this.vat()}async udt(t,i){try{Ko(i);const s=await this.ydt.Ldt(t.sut,t.Jat,t.Tot,i);return this.Odt(t,s.Tdt,s.kdt),this.Edt(t,s.Tdt,s.kdt),t}catch(i){if(Ui(i),tt(i))return this.Bdt(new NW(i,t.Jat,t.Tot),0),this.bdt(ba.Wht,"Could not append the segment.");if(yc(i)&&this.ydt.Kj())return this.bdt(ba.Ght,"Buffer is full. Could not reduce the buffer.");throw new Wt(Ne.MEDIA_DECODE_ERROR,i.message,i)}}Odt(t,i,s){const e=t.Tot,n=t.Jat;this.oat(n,e,i,s)}oat(t,i,s,e){this.Cot.oat({rat:i.o,sat:t.kO,eat:t.EO,ect:s,nct:e,uct:!0}),this.ydt.t$(s,e)}O3(t,i,s){const e=ZT.$M(t,i);s?this.Cot.$J(e,s.o):this.Cot.act(e),this.ydt.$J(t,i)}fdt(t){const i=ZT.$M(t.Jat.kO,t.Jat.EO);t.Tot?this.Cot.$J(i,t.Tot.o):this.Cot.act(i)}Bdt(t,i){const s=t.Iut,e=this.Cot.Ht.Mot,n=this.Cot.Ht.Ca,r=t.Cut.Tot&&t.Cut.Tot.Ca,h=new hU(s,t.message,e,n,r,i);this.So(h)}hr(){this.q2=void 0,this.idt=void 0}kn(){this.hr(),this.Adt=void 0,this.Ddt.mn(uU,this.Rs),this.Ddt.kn()}constructor(t,i,s,e,n,r,h,o,a){super(),this.dat=void 0,this.Cot=void 0,this.ndt=void 0,this.sdt=void 0,this.Ddt=void 0,this.ydt=void 0,this.Yct=void 0,this.vdt=void 0,this.lX=void 0,this.tdt=void 0,this.q2=void 0,this.idt=void 0,this.Adt=void 0,this.ddt=void 0,this.ldt=void 0,this._dt=void 0,this.dat=t,this.Cot=i,this.ndt=s,this.sdt=e,this.Ddt=n,this.ydt=r,this.Yct=h,this.vdt=o,this.lX=a,this.tdt=void 0,this.q2=void 0,this.idt=void 0,this.Adt=void 0,this.ddt=0,this.ldt=0,this._dt=ZT.tL(),this.Ddt.wn(uU,this.Rs)}};function dU(t){const i=t.Tot,s=i.Jrt,e=yW(t.Jat)?s.Rct(t.Jat):t.Jat;return s.Fdt(e,i.xdt.Rdt())}var lU=0,fU=class{Rst(t){const i=lU++,s=this.Out.N3,e=new OW(t),n=this.Vdt&&LT(s),r=new dW(s,n),h=new MW(this.Out,this.D9,this.t5,this.kZ),o=rU.Rst(i,this.Out,e,this.kZ,r,this.rW,this.iut,this.Hct,this.Vct,this.Yct),a=function(t){switch(t){case Mo.Ck:return aA.Ck;case Mo.Nk:return aA.Nk;case Mo.DT:return aA.DT;case Mo.Dk:return aA.Dk;default:return aA.gk}}(s),u=function(t,i,s,e){const n=new mW(e),r=new DW(t,i,s);return new wW([n,r])}(new aW(this.rW,a),r,n,this.iut),c=new cU(i,e,h,o,u,this.Out,this.Yct,this.vdt,this.lX);return new oW(i,t.Dut,e,c,this.D9)}Wdt(t,i){const s={Mot:Mo.DT,Dut:i,nat:i.nat,Ca:t.Ca};return this.Rst(s)}constructor(t,i,s,e,n,r,h,o,a,u,c,d){this.Out=void 0,this.D9=void 0,this.t5=void 0,this.rW=void 0,this.kZ=void 0,this.Vdt=void 0,this.iut=void 0,this.Hct=void 0,this.Vct=void 0,this.Yct=void 0,this.vdt=void 0,this.lX=void 0,this.Out=t,this.D9=i,this.t5=s,this.rW=e,this.kZ=n,this.Vdt=r,this.iut=h,this.Hct=o,this.Vct=a,this.Yct=u,this.vdt=c,this.lX=d}};r();var vU=class{SJ(t){return this.Srt.SJ(t)}kJ(t){return this.Srt.kJ(t)}constructor(t){this.Srt=void 0,this.Srt=t}},_U=class{SJ(t){return!0}kJ(t){return Promise.resolve(void 0)}};r(),r();var Zo=class extends Kt{xa(){return new gU(this.QI.map(t=>t.Ca))}constructor(t,i){super(M.xI),this.QI=void 0,this.Ht=void 0,this.QI=t||[],this.Ht=i}},gU=class extends sh{constructor(t){super("targetqualitychanged"),this.qualities=void 0,this.quality=void 0,this.qualities=t,this.quality=this.qualities.length>0?this.qualities[0]:void 0}};r();var mU=class extends nn{xa(){return new pU(this.quality.Ca)}constructor(t){super(M.QUALITY_UNAVAILABLE),this.quality=void 0,this.quality=t}},pU=class extends Hn{constructor(t){super("qualityunavailable"),this.quality=void 0,this.quality=t}};r();var wU=class extends sh{constructor(){super(M.NO_QUALITY)}};function yU(t){return{EG:t.EG,Um:t.lrt,Mi:bU(t)?t.Mi:0,Kp:bU(t)?Mo.Nk:Mo.Ck,Ti:bU(t)?t.Ti:0}}function bU(t){const i=t;return void 0!==i.Mi&&void 0!==i.Ti}r();var AU=0,SU=class extends fr{get jI(){return this.Kot.Udt.map(TU).filter(Y)}Gdt(t){for(const i of t)i.wn("update",this.Xdt),this.cO.dO(i)}Zdt(t){if(!this.cO.lO(t))return;t.qV();const i=this.Hdt();if(this.zdt&&Ft(this.zdt,t)){const t=this.zdt.filter(t=>t.oet);0===t.length&&i.length>0?this.JI=i:this.JI=t}else this.JI=i;this.So(new mU(t))}Ydt(t){if(!this.cO.lO(t))return;const i=this.Hdt();t.KV(),this.zdt&&!function(t,i){return of(t,i,(t,i)=>t===i)}(this.zdt,i)||(this.JI=this.Hdt())}Hdt(){return this.cO.CI.filter(t=>t.oet)}get KI(){return this.Kdt}qdt(t){this.Kdt=t.Tot,this.So(t)}get Dut(){return this.Kot}get Rt(){return this.We}set Rt(t){this.pO(t)}get Ca(){return this.hu||(this.hu=co(this)),this.hu}get jdt(){return this.Qdt}set jdt(t){this.Qdt=t}get o(){return this.rS}get qI(){return this._O}get Lt(){return this.y4}get bs(){return this.jb}get Th(){return this.gO}set Th(t){t!==this.gO&&(this.gO=t,this.So(new nc(this)))}get Hk(){return this.Rt?"enabled":"disabled"}get JI(){return this.zdt}set JI(t){let i;if(t){const s=this.KI?yU(this.KI):void 0;i=t.filter(t=>t.oet&&Zd.Zs.Lm(s,yU(t)))}else i=this.Hdt();0!==i.length?(this.zdt=t&&this.cO.lO(t)?t:void 0,this.Jdt=this.$dt(this.zdt),this.So(new Zo(t,this))):this.So(new wU)}get tlt(){return this.Jdt}$dt(t){if(!t||0===t.length)return;const i=[];for(const s of this.nat)for(const e of t)e===s.Tot&&e.oet&&i.push(s);return i}get QI(){return this.cO}get nat(){return this.ilt}slt(t){this.elt.push(t),this.ilt.push(...t.nat);const i=t.nat.map(t=>t.Tot);this.Gdt(i)}get Mot(){return this.nlt}get rlt(){return this.elt}get hlt(){return this.nat.every(t=>t.hlt)}pO(t){this.We=t,this.Qdt&&(t?this.Qdt.KV(this):this.Qdt.qV(this))}olt(t){this.We=t,this.ult!==t&&(this.ult=t,this.So(new Tu(this)))}kn(){for(const t of this.cO.CI)t.mn("update",this.Xdt);this.cO.hr()}constructor(t,i,s="alternative"){super(),this.Kdt=void 0,this.Kot=void 0,this.We=!1,this.hu=void 0,this.Qdt=void 0,this.rS="",this._O=void 0,this.y4=void 0,this.gO=void 0,this.jb=void 0,this.ult=!1,this.cO=new Wc,this.ilt=[],this.zdt=void 0,this.Jdt=void 0,this.nlt=void 0,this.Xdt=()=>this.So(new nc(this)),this.elt=[],this.Kot=t,this.rS=String(AU++),this._O=ai(),this.y4=s,this.jb=t.nit,this.gO=t.Th,this.nlt=t.Kp,this.ilt=t.nat.slice(),this.Gdt(i)}};function TU(t){if("urn:mpeg:dash:role:2011"===t.w9)return kU(t);if("urn:tva:metadata:cs:AudioPurposeCS:2007"===t.w9){if("1"===t.XE)return Qs.XI;if("2"===t.XE)return Qs.HI}}function kU(t){if(void 0!==(null==t?void 0:t.XE))switch(t.XE){case"caption":return Qs.GI;case"sign":return Qs.ZI;case"description":return Qs.XI;case"enhanced-audio-intelligibility":return Qs.HI;default:return}}var EU=class t extends ko{get Rt(){for(const t of this.Z.CI)if(t.Hk!==Z.Nh)return!0;return!1}get jG(){const t=this.D9.OR;return this.Fut.jM(t,.01)}get Gut(){return ZT.iL()}get IR(){var t;return null!=(t=this.clt&&this.dlt.get(this.clt.qI))?t:ZT.tL()}get QJ(){return this.llt?this.llt.Pot.QJ.Xut:ZT.tL()}get Fut(){return eW(this.IR,this.QJ).MM(2*this.flt)}get Tn(){return this.vlt?this.vlt.pct.Tn:NaN}get An(){return this.vlt?this.vlt.pct.An:NaN}get GR(){const t=this.An;return!!t&&this.D9.OR>=t}get flt(){var t;const i=this._lt();if(!i)return.04;var s;return 1/(null!=(s=this.clt&&(null==i||null==(t=i.glt)?void 0:t.tF()))?s:25)}get Mi(){return 0}get N3(){return Mo.DT}get vx(){return this.bZ}set vx(t){this.bZ=t}get mx(){var t;return null!=(t=this.clt&&this.plt.get(this.clt.qI))?t:ZT.tL()}get kx(){if(!this.clt)return ZT.JM(0);const t=this.wlt(this.clt),i=null==t?void 0:t.ylt,s=null==t?void 0:t.blt;if(void 0===s||void 0===i)return ZT.JM(0);const e=_.max(i,this.D9.OR);return new ZT([s,e]).PM()}get Ti(){return 0}P3(){}Uut(){return this.Fut.Cr(this.An)}async Ldt(t,i,s,e){const n=t.Kp===Vt.fJ?t.hk.xht:await t.hk.WT(e),r=this.findTrackForRepresentation(s);let h=this.dlt.get(r.qI);const o=i.kO,a=i.EO,u=new ZT([o,a]);h||(h=ZT.tL(),this.dlt.set(r.qI,ZT.tL()),this.plt.set(r.qI,ZT.tL())),this.xrt(e);const c=this.Qrt(new j(n),i,s,r);for(const t of c)r.iW(t);return this.dlt.set(r.qI,h.LM(u)),{Tdt:o,kdt:a}}xrt(t){const i=FN(this.D9.OR,void 0,void 0,this.IR,this.kZ.Xj,this.kZ.Oj);for(const[s,e]of i)_e(this.Mdt(s,e,t))}jrt(t,i,s){return this.Alt.jrt(t,i,s)}Qrt(t,i,s,e){return this.Alt.Qrt(t,i,s,e)}Mdt(t,i,s){const e=t,n=i;let r=new ZT([t,i]);for(const t of this.Z.CI){const i=[];for(const s of t.L.CI)s.kO>=e&&s.EO<=n?i.push(s):r=r.FM(new ZT([s.kO,s.EO]));for(const s of i)t.XV(s);const s=this.dlt.get(t.qI);s&&this.dlt.set(t.qI,s.FM(r))}return Promise.resolve()}$J(t,i){}t$(t,i){}Kj(){return!1}KV(t){if(t&&this.clt!==t){this.clt=t;for(const i of this.Z.CI)i!==t&&(i.Hk=Z.Nh);if(this.Alt.hr(),this.llt&&(this.llt.kn(),this.llt=void 0),this.clt){const t=this.wlt(this.clt);this.llt=new fU(this,this.D9,this.D9,this.rW,this.kZ,!1,this.iut,void 0,void 0,new _U,Ak,void 0).Wdt(this.clt,t),this.llt.wn(sa.ma,this.Slt),this.llt.Tn(ba.Dht)}}}qV(t){this.clt===t&&(t&&this.clt===t&&(this.clt=void 0),this.llt&&(this.llt.kn(),this.llt=void 0))}async Un(t){await this.hr(),this.vlt=t,this.Tlt(t)}klt(t){const i=function(t){const i=t.nat&&t.nat.length>0&&t.nat[0],s=i&&zR(i.lrt),e=zR(t.lrt),n=t.iK===Hy;return s||e||n?hr.TTML:t.iK===Yy||jR(t.iK,t.lrt)?hr.WEBVTT:hr.DEFAULT}(t);if(!i)throw new m("Unknown TextTrack type for Representation");const s=t.Elt.concat(t.Udt);return this.Rlt(function(t){return Ft(t.filter(t=>"urn:mpeg:dash:role:2011"===t.w9).map(t=>t.XE).filter(Y),"caption")?D.FV:D.OV}(s),t.Th,t.nit,!1,i,t,function(t){return t.filter(t=>"urn:mpeg:dash:role:2011"===t.w9).some(t=>function(t){return"forced-subtitle"===t||"forced_subtitle"===t}(t.XE))}(t.Elt),t.Udt.map(kU).filter(Y))}Tlt(t){for(const i of t.xlt){const t=this.klt(i);this.Ilt.set(t.qI,i),t.Sx=Ra.LOADED,this.tt(t)}}it(t){this.Ilt.delete(t.qI),super.it(t)}Rlt(t,i,s,e,n,r,h,o){var a;const u=me(r.nat,t=>""!==t.o);var c,d;const l=null!=(d=null!=(c=null==u?void 0:u.o)?c:null==(a=r.o)?void 0:a.toString())?d:"";return this.JV.sI(t,l,i,s,e,n,h,o)}$V(t,i,s){const e=sx(t,i,s),n=this.Ilt.get(t.qI);void 0!==n&&(this.Ilt.set(e.qI,n),this.Ilt.delete(t.qI));const r=this.dlt.get(t.qI);void 0!==r&&(this.dlt.set(e.qI,r),this.dlt.delete(t.qI));const h=this.plt.get(t.qI);return void 0!==h&&(this.plt.set(e.qI,h),this.plt.delete(t.qI)),e}async hr(){await super.hr(),this.llt&&(await this.llt.hr(ba.iot),this.llt.mn(sa.ma,this.Slt),this.llt=void 0),this.vlt=void 0,this.dlt.clear(),this.plt.clear()}findTrackForRepresentation(i){for(const s of this.Z.CI){const e=this.wlt(s);if(e&&t.Plt(e)===i)return s}}wlt(t){return this.Ilt.get(t.qI)}_lt(){if(!this.clt)return;const i=this.wlt(this.clt);return i?t.Plt(i):void 0}static Plt(t){return t.nat&&t.nat.length>0?t.nat[0]:void 0}kn(){for(const t of this.Z.CI)this.JV.sW(t);return super.kn()}constructor(t,i,s,e,n,r){super(r),this.bZ=1,this.llt=void 0,this.dlt=Zs(),this.plt=Zs(),this.clt=void 0,this.vlt=void 0,this.Ilt=Zs(),this.rW=void 0,this.iut=void 0,this.D9=void 0,this.kZ=void 0,this.Alt=void 0,this.Slt=t=>{0},this.D9=t,this.rW=i,this.kZ=s,this.Alt=e,this.iut=n}},RU=class{get nt(){return this.Gl}async nW(t){if(t.Kp!==Mo.DT)return;const i=function(t,i,s){return zR(i)||t===Hy||t===Yy?new JV(s):jR(t,i)?new iW:void 0}(t.iK,t.lrt,this.$rt);if(i){const s=this.Clt(i);return this.Nlt(s),await s.Un(t),s}}Clt(t){return new EU(this.D9,this.rW,this.kZ,t,this.iut,this.JV)}Nlt(t){this.Dlt.push(t),this.Gl.UG(t.Z)}async hr(){for(const t of this.Dlt.slice())await t.hr();Lr(this.Dlt),this.Gl.hr()}async kn(){for(const t of this.Dlt)await t.kn();Lr(this.Dlt),this.Gl.kn()}constructor(t,i,s,e,n,r){this.Dlt=[],this.Gl=new Ka([]),this.JV=void 0,this.$rt=void 0,this.D9=void 0,this.rW=void 0,this.kZ=void 0,this.iut=void 0,this.D9=t,this.rW=i,this.kZ=s,this.iut=e,this.JV=n,this.$rt=r}};r();var xU=class extends sh{constructor(t){super(d.Xw),this.error=void 0,this.error=t}};r();var Me=function(t){return t.wW="static",t.yW="dynamic",t}({});r(),r();var IU=function(t){return t.Blt="Mlt",t}({}),PU=class extends sh{constructor(){super(IU.Blt)}};r(),r();var CU=class extends sh{constructor(t,i){super(d.qw),this.representation=void 0,this.previousRepresentation=void 0,this.representation=t,this.previousRepresentation=i}};r(),r(),r();var pn=function(t){return t[t.Llt=0]="Llt",t[t.Olt=1]="Olt",t[t.Flt=2]="Flt",t[t.Vlt=3]="Vlt",t[t.Wlt=4]="Wlt",t[t.Ult=5]="Ult",t}({}),Qu=function(t){return t[t.Glt=0]="Glt",t[t.Xlt=1]="Xlt",t[t.Zlt=2]="Zlt",t[t.Hlt=3]="Hlt",t}({});function NU(t,i,s){return s===pn.Llt?s:i!==Qu.Glt&&i!==Qu.Xlt||s!==pn.Olt&&s!==pn.Flt?t?i===Qu.Zlt?pn.Wlt:i===Qu.Hlt?pn.Vlt:pn.Llt:pn.Ult:pn.Flt}function DU(t,i,s,e){const n={byte:s};let r=pn.Olt;const h=[],o=31&Xu(i,n,e);n.byte+=1;for(let s=0;s<o;s+=1){const o=Xu(i,n,e),a=4&o,u=3&o;r=NU(Boolean(a),u,r);const c=Xu(i,n,e),d=Xu(i,n,e);h.push({zlt:t,VB:-1,Ylt:!s,Klt:Boolean(a),Kp:u,qlt:r,jlt:c,Qlt:d})}return h}function BU(t,i,s){const e=Xu(t,i,s);if(!S(e))return String.fromCharCode(e)}function MU(t){const i=t.t1,s={byte:t.J0},e=t.$0,n=Xu(i,s,e);if(255===n&&(s.byte+=1),181!==n)return;const r=sB(i,s);if(47!==r&&49!==r)return;if(49===r){const t=function(t,i,s){let e="",n=s;for(;n>0;)n-=1,e+=BU(t,i);return e}(i,s,4);if("GA94"!==t)return}if(3!==Xu(i,s,e))return;47===r&&(s.byte+=1);const h=t;return h.Jlt=s.byte,h}function LU(t){return 4===t.j0}function OU(t){const i=t.filter(LU).map(MU).filter(Y),s=[];for(const t of i)s.push(...DU(t.q0,t.t1,t.Jlt,t.$0));return s}r();var FU="und";function VU(t){if(t===FU)return;const i=t.toLowerCase();for(const t of WU)if(t[1]===i||t[2]===i||t["2T"]===i||t["2B"]===i||t[3]===i)return t}var WU=[{l:"Abkhaz",bh:"\u0410\u04a7\u0441\u0443\u0430",1:"ab",2:"abk","2T":"abk","2B":"abk",3:"abk"},{l:"Afar",bh:"Afaraf",1:"aa",2:"aar","2T":"aar","2B":"aar",3:"aar"},{l:"Afrikaans",bh:"Afrikaans",1:"af",2:"afr","2T":"afr","2B":"afr",3:"afr"},{l:"Akan",bh:"Akan",1:"ak",2:"aka","2T":"aka","2B":"aka",3:"aka"},{l:"Albanian",bh:"Shqip",1:"sq",2:"sqi","2T":"sqi","2B":"alb",3:"sqi"},{l:"Amharic",bh:"\u12a0\u121b\u122d\u129b",1:"am",2:"amh","2T":"amh","2B":"amh",3:"amh"},{l:"Arabic",bh:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629",1:"ar",2:"ara","2T":"ara","2B":"ara",3:"ara"},{l:"Aragonese",bh:"Aragon\xe9s",1:"an",2:"arg","2T":"arg","2B":"arg",3:"arg"},{l:"Armenian",bh:"\u0540\u0561\u0575\u0565\u0580\u0565\u0576",1:"hy",2:"hye","2T":"hye","2B":"arm",3:"hye"},{l:"Assamese",bh:"\u0985\u09b8\u09ae\u09c0\u09af\u09bc\u09be",1:"as",2:"asm","2T":"asm","2B":"asm",3:"asm"},{l:"Avaric",bh:"\u0410\u0432\u0430\u0440",1:"av",2:"ava","2T":"ava","2B":"ava",3:"ava"},{l:"Avestan",bh:"avesta",1:"ae",2:"ave","2T":"ave","2B":"ave",3:"ave"},{l:"Aymara",bh:"Aymar",1:"ay",2:"aym","2T":"aym","2B":"aym",3:"aym"},{l:"Azerbaijani",bh:"Az\u0259rbaycanca",1:"az",2:"aze","2T":"aze","2B":"aze",3:"aze"},{l:"Bambara",bh:"Bamanankan",1:"bm",2:"bam","2T":"bam","2B":"bam",3:"bam"},{l:"Bashkir",bh:"\u0411\u0430\u0448\u04a1\u043e\u0440\u0442\u0441\u0430",1:"ba",2:"bak","2T":"bak","2B":"bak",3:"bak"},{l:"Basque",bh:"Euskara",1:"eu",2:"eus","2T":"eus","2B":"baq",3:"eus"},{l:"Belarusian",bh:"\u0411\u0435\u043b\u0430\u0440\u0443\u0441\u043a\u0430\u044f",1:"be",2:"bel","2T":"bel","2B":"bel",3:"bel"},{l:"Bengali",bh:"\u09ac\u09be\u0982\u09b2\u09be",1:"bn",2:"ben","2T":"ben","2B":"ben",3:"ben"},{l:"Bihari",bh:"\u092d\u094b\u091c\u092a\u0941\u0930\u0940",1:"bh",2:"bih","2T":"bih","2B":"bih",3:"bih"},{l:"Bislama",bh:"Bislama",1:"bi",2:"bis","2T":"bis","2B":"bis",3:"bis"},{l:"Bosnian",bh:"Bosanski",1:"bs",2:"bos","2T":"bos","2B":"bos",3:"bos"},{l:"Breton",bh:"Brezhoneg",1:"br",2:"bre","2T":"bre","2B":"bre",3:"bre"},{l:"Bulgarian",bh:"\u0411\u044a\u043b\u0433\u0430\u0440\u0441\u043a\u0438",1:"bg",2:"bul","2T":"bul","2B":"bul",3:"bul"},{l:"Burmese",bh:"\u1019\u103c\u1014\u103a\u1019\u102c\u1018\u102c\u101e\u102c",1:"my",2:"mya","2T":"mya","2B":"bur",3:"mya"},{l:"Catalan",bh:"Catal\xe0",1:"ca",2:"cat","2T":"cat","2B":"cat",3:"cat"},{l:"Chamorro",bh:"Chamoru",1:"ch",2:"cha","2T":"cha","2B":"cha",3:"cha"},{l:"Chechen",bh:"\u041d\u043e\u0445\u0447\u0438\u0439\u043d",1:"ce",2:"che","2T":"che","2B":"che",3:"che"},{l:"Chichewa",bh:"Chichewa",1:"ny",2:"nya","2T":"nya","2B":"nya",3:"nya"},{l:"Chinese",bh:"\u4e2d\u6587",1:"zh",2:"zho","2T":"zho","2B":"chi",3:"zho"},{l:"Chuvash",bh:"\u0427\u04d1\u0432\u0430\u0448\u043b\u0430",1:"cv",2:"chv","2T":"chv","2B":"chv",3:"chv"},{l:"Cornish",bh:"Kernewek",1:"kw",2:"cor","2T":"cor","2B":"cor",3:"cor"},{l:"Corsican",bh:"Corsu",1:"co",2:"cos","2T":"cos","2B":"cos",3:"cos"},{l:"Cree",bh:"\u14c0\u1426\u1403\u152d\u140d\u140f\u1423",1:"cr",2:"cre","2T":"cre","2B":"cre",3:"cre"},{l:"Croatian",bh:"Hrvatski",1:"hr",2:"hrv","2T":"hrv","2B":"hrv",3:"hrv"},{l:"Czech",bh:"\u010ce\u0161tina",1:"cs",2:"ces","2T":"ces","2B":"cze",3:"ces"},{l:"Danish",bh:"Dansk",1:"da",2:"dan","2T":"dan","2B":"dan",3:"dan"},{l:"Divehi",bh:"Divehi",1:"dv",2:"div","2T":"div","2B":"div",3:"div"},{l:"Dutch",bh:"Nederlands",1:"nl",2:"nld","2T":"nld","2B":"dut",3:"nld"},{l:"Dzongkha",bh:"\u0f62\u0fab\u0f7c\u0f44\u0f0b\u0f41",1:"dz",2:"dzo","2T":"dzo","2B":"dzo",3:"dzo"},{l:"English",bh:"English",1:"en",2:"eng","2T":"eng","2B":"eng",3:"eng"},{l:"Esperanto",bh:"Esperanto",1:"eo",2:"epo","2T":"epo","2B":"epo",3:"epo"},{l:"Estonian",bh:"Eesti",1:"et",2:"est","2T":"est","2B":"est",3:"est"},{l:"Ewe",bh:"E\u028begbe",1:"ee",2:"ewe","2T":"ewe","2B":"ewe",3:"ewe"},{l:"Faroese",bh:"F\xf8royskt",1:"fo",2:"fao","2T":"fao","2B":"fao",3:"fao"},{l:"Fijian",bh:"Na Vosa Vaka-Viti",1:"fj",2:"fij","2T":"fij","2B":"fij",3:"fij"},{l:"Finnish",bh:"Suomi",1:"fi",2:"fin","2T":"fin","2B":"fin",3:"fin"},{l:"French",bh:"Fran\xe7ais",1:"fr",2:"fra","2T":"fra","2B":"fre",3:"fra"},{l:"Fula",bh:"Fulfulde",1:"ff",2:"ful","2T":"ful","2B":"ful",3:"ful"},{l:"Galician",bh:"Galego",1:"gl",2:"glg","2T":"glg","2B":"glg",3:"glg"},{l:"Georgian",bh:"\u10e5\u10d0\u10e0\u10d7\u10e3\u10da\u10d8",1:"ka",2:"kat","2T":"kat","2B":"geo",3:"kat"},{l:"German",bh:"Deutsch",1:"de",2:"deu","2T":"deu","2B":"ger",3:"deu"},{l:"Greek",bh:"\u0395\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ac",1:"el",2:"ell","2T":"ell","2B":"gre",3:"ell"},{l:"Guaran\xed",bh:"Ava\xf1e'\u1ebd",1:"gn",2:"grn","2T":"grn","2B":"grn",3:"grn"},{l:"Gujarati",bh:"\u0a97\u0ac1\u0a9c\u0ab0\u0abe\u0aa4\u0ac0",1:"gu",2:"guj","2T":"guj","2B":"guj",3:"guj"},{l:"Haitian",bh:"Krey\xf2l Ayisyen",1:"ht",2:"hat","2T":"hat","2B":"hat",3:"hat"},{l:"Hausa",bh:"\u0647\u064e\u0648\u064f\u0633\u064e",1:"ha",2:"hau","2T":"hau","2B":"hau",3:"hau"},{l:"Hebrew",bh:"\u05e2\u05d1\u05e8\u05d9\u05ea",1:"he",2:"heb","2T":"heb","2B":"heb",3:"heb"},{l:"Herero",bh:"Otjiherero",1:"hz",2:"her","2T":"her","2B":"her",3:"her"},{l:"Hindi",bh:"\u0939\u093f\u0928\u094d\u0926\u0940",1:"hi",2:"hin","2T":"hin","2B":"hin",3:"hin"},{l:"Hiri Motu",bh:"Hiri Motu",1:"ho",2:"hmo","2T":"hmo","2B":"hmo",3:"hmo"},{l:"Hungarian",bh:"Magyar",1:"hu",2:"hun","2T":"hun","2B":"hun",3:"hun"},{l:"Interlingua",bh:"Interlingua",1:"ia",2:"ina","2T":"ina","2B":"ina",3:"ina"},{l:"Indonesian",bh:"Bahasa Indonesia",1:"id",2:"ind","2T":"ind","2B":"ind",3:"ind"},{l:"Interlingue",bh:"Interlingue",1:"ie",2:"ile","2T":"ile","2B":"ile",3:"ile"},{l:"Irish",bh:"Gaeilge",1:"ga",2:"gle","2T":"gle","2B":"gle",3:"gle"},{l:"Igbo",bh:"Igbo",1:"ig",2:"ibo","2T":"ibo","2B":"ibo",3:"ibo"},{l:"Inupiaq",bh:"I\xf1upiak",1:"ik",2:"ipk","2T":"ipk","2B":"ipk",3:"ipk"},{l:"Ido",bh:"Ido",1:"io",2:"ido","2T":"ido","2B":"ido",3:"ido"},{l:"Icelandic",bh:"\xcdslenska",1:"is",2:"isl","2T":"isl","2B":"ice",3:"isl"},{l:"Italian",bh:"Italiano",1:"it",2:"ita","2T":"ita","2B":"ita",3:"ita"},{l:"Inuktitut",bh:"\u1403\u14c4\u1483\u144e\u1450\u1466",1:"iu",2:"iku","2T":"iku","2B":"iku",3:"iku"},{l:"Japanese",bh:"\u65e5\u672c\u8a9e",1:"ja",2:"jpn","2T":"jpn","2B":"jpn",3:"jpn"},{l:"Javanese",bh:"Basa Jawa",1:"jv",2:"jav","2T":"jav","2B":"jav",3:"jav"},{l:"Kalaallisut",bh:"Kalaallisut",1:"kl",2:"kal","2T":"kal","2B":"kal",3:"kal"},{l:"Kannada",bh:"\u0c95\u0ca8\u0ccd\u0ca8\u0ca1",1:"kn",2:"kan","2T":"kan","2B":"kan",3:"kan"},{l:"Kanuri",bh:"Kanuri",1:"kr",2:"kau","2T":"kau","2B":"kau",3:"kau"},{l:"Kashmiri",bh:"\u0643\u0634\u0645\u064a\u0631\u064a",1:"ks",2:"kas","2T":"kas","2B":"kas",3:"kas"},{l:"Kazakh",bh:"\u049a\u0430\u0437\u0430\u049b\u0448\u0430",1:"kk",2:"kaz","2T":"kaz","2B":"kaz",3:"kaz"},{l:"Khmer",bh:"\u1797\u17b6\u179f\u17b6\u1781\u17d2\u1798\u17c2\u179a",1:"km",2:"khm","2T":"khm","2B":"khm",3:"khm"},{l:"Kikuyu",bh:"G\u0129k\u0169y\u0169",1:"ki",2:"kik","2T":"kik","2B":"kik",3:"kik"},{l:"Kinyarwanda",bh:"Kinyarwanda",1:"rw",2:"kin","2T":"kin","2B":"kin",3:"kin"},{l:"Kyrgyz",bh:"\u041a\u044b\u0440\u0433\u044b\u0437\u0447\u0430",1:"ky",2:"kir","2T":"kir","2B":"kir",3:"kir"},{l:"Komi",bh:"\u041a\u043e\u043c\u0438",1:"kv",2:"kom","2T":"kom","2B":"kom",3:"kom"},{l:"Kongo",bh:"Kongo",1:"kg",2:"kon","2T":"kon","2B":"kon",3:"kon"},{l:"Korean",bh:"\ud55c\uad6d\uc5b4",1:"ko",2:"kor","2T":"kor","2B":"kor",3:"kor"},{l:"Kurdish",bh:"Kurd\xee",1:"ku",2:"kur","2T":"kur","2B":"kur",3:"kur"},{l:"Kwanyama",bh:"Kuanyama",1:"kj",2:"kua","2T":"kua","2B":"kua",3:"kua"},{l:"Latin",bh:"Latina",1:"la",2:"lat","2T":"lat","2B":"lat",3:"lat"},{l:"Luxembourgish",bh:"L\xebtzebuergesch",1:"lb",2:"ltz","2T":"ltz","2B":"ltz",3:"ltz"},{l:"Ganda",bh:"Luganda",1:"lg",2:"lug","2T":"lug","2B":"lug",3:"lug"},{l:"Limburgish",bh:"Limburgs",1:"li",2:"lim","2T":"lim","2B":"lim",3:"lim"},{l:"Lingala",bh:"Ling\xe1la",1:"ln",2:"lin","2T":"lin","2B":"lin",3:"lin"},{l:"Lao",bh:"\u0e9e\u0eb2\u0eaa\u0eb2\u0ea5\u0eb2\u0ea7",1:"lo",2:"lao","2T":"lao","2B":"lao",3:"lao"},{l:"Lithuanian",bh:"Lietuvi\u0173",1:"lt",2:"lit","2T":"lit","2B":"lit",3:"lit"},{l:"Luba-Katanga",bh:"Tshiluba",1:"lu",2:"lub","2T":"lub","2B":"lub",3:"lub"},{l:"Latvian",bh:"Latvie\u0161u",1:"lv",2:"lav","2T":"lav","2B":"lav",3:"lav"},{l:"Manx",bh:"Gaelg",1:"gv",2:"glv","2T":"glv","2B":"glv",3:"glv"},{l:"Macedonian",bh:"\u041c\u0430\u043a\u0435\u0434\u043e\u043d\u0441\u043a\u0438",1:"mk",2:"mkd","2T":"mkd","2B":"mac",3:"mkd"},{l:"Malagasy",bh:"Malagasy",1:"mg",2:"mlg","2T":"mlg","2B":"mlg",3:"mlg"},{l:"Malay",bh:"Bahasa Melayu",1:"ms",2:"msa","2T":"msa","2B":"may",3:"msa"},{l:"Malayalam",bh:"\u0d2e\u0d32\u0d2f\u0d3e\u0d33\u0d02",1:"ml",2:"mal","2T":"mal","2B":"mal",3:"mal"},{l:"Maltese",bh:"Malti",1:"mt",2:"mlt","2T":"mlt","2B":"mlt",3:"mlt"},{l:"M\u0101ori",bh:"M\u0101ori",1:"mi",2:"mri","2T":"mri","2B":"mao",3:"mri"},{l:"Marathi",bh:"\u092e\u0930\u093e\u0920\u0940",1:"mr",2:"mar","2T":"mar","2B":"mar",3:"mar"},{l:"Marshallese",bh:"Kajin M\u0327aje\u013c",1:"mh",2:"mah","2T":"mah","2B":"mah",3:"mah"},{l:"Mongolian",bh:"\u041c\u043e\u043d\u0433\u043e\u043b",1:"mn",2:"mon","2T":"mon","2B":"mon",3:"mon"},{l:"Nauru",bh:"Dorerin Naoero",1:"na",2:"nau","2T":"nau","2B":"nau",3:"nau"},{l:"Navajo",bh:"Din\xe9 Bizaad",1:"nv",2:"nav","2T":"nav","2B":"nav",3:"nav"},{l:"Northern Ndebele",bh:"isiNdebele",1:"nd",2:"nde","2T":"nde","2B":"nde",3:"nde"},{l:"Nepali",bh:"\u0928\u0947\u092a\u093e\u0932\u0940",1:"ne",2:"nep","2T":"nep","2B":"nep",3:"nep"},{l:"Ndonga",bh:"Owambo",1:"ng",2:"ndo","2T":"ndo","2B":"ndo",3:"ndo"},{l:"Norwegian Bokm\xe5l",bh:"Norsk (Bokm\xe5l)",1:"nb",2:"nob","2T":"nob","2B":"nob",3:"nob"},{l:"Norwegian Nynorsk",bh:"Norsk (Nynorsk)",1:"nn",2:"nno","2T":"nno","2B":"nno",3:"nno"},{l:"Norwegian",bh:"Norsk",1:"no",2:"nor","2T":"nor","2B":"nor",3:"nor"},{l:"Nuosu",bh:"\ua188\ua320\ua4bf Nuosuhxop",1:"ii",2:"iii","2T":"iii","2B":"iii",3:"iii"},{l:"Southern Ndebele",bh:"isiNdebele",1:"nr",2:"nbl","2T":"nbl","2B":"nbl",3:"nbl"},{l:"Occitan",bh:"Occitan",1:"oc",2:"oci","2T":"oci","2B":"oci",3:"oci"},{l:"Ojibwe",bh:"\u140a\u14c2\u1511\u14c8\u142f\u14a7\u140e\u14d0",1:"oj",2:"oji","2T":"oji","2B":"oji",3:"oji"},{l:"Old Church Slavonic",bh:"\u0421\u043b\u043e\u0432\u0463\u0301\u043d\u044c\u0441\u043a\u044a",1:"cu",2:"chu","2T":"chu","2B":"chu",3:"chu"},{l:"Oromo",bh:"Afaan Oromoo",1:"om",2:"orm","2T":"orm","2B":"orm",3:"orm"},{l:"Oriya",bh:"\u0b13\u0b21\u0b3f\u0b3c\u0b06",1:"or",2:"ori","2T":"ori","2B":"ori",3:"ori"},{l:"Ossetian",bh:"\u0418\u0440\u043e\u043d \xe6\u0432\u0437\u0430\u0433",1:"os",2:"oss","2T":"oss","2B":"oss",3:"oss"},{l:"Panjabi",bh:"\u0a2a\u0a70\u0a1c\u0a3e\u0a2c\u0a40",1:"pa",2:"pan","2T":"pan","2B":"pan",3:"pan"},{l:"P\u0101li",bh:"\u092a\u093e\u0934\u093f",1:"pi",2:"pli","2T":"pli","2B":"pli",3:"pli"},{l:"Persian",bh:"\u0641\u0627\u0631\u0633\u06cc",1:"fa",2:"fas","2T":"fas","2B":"per",3:"fas"},{l:"Polish",bh:"Polski",1:"pl",2:"pol","2T":"pol","2B":"pol",3:"pol"},{l:"Pashto",bh:"\u067e\u069a\u062a\u0648",1:"ps",2:"pus","2T":"pus","2B":"pus",3:"pus"},{l:"Portuguese",bh:"Portugu\xeas",1:"pt",2:"por","2T":"por","2B":"por",3:"por"},{l:"Quechua",bh:"Runa Simi",1:"qu",2:"que","2T":"que","2B":"que",3:"que"},{l:"Romansh",bh:"Rumantsch",1:"rm",2:"roh","2T":"roh","2B":"roh",3:"roh"},{l:"Kirundi",bh:"Kirundi",1:"rn",2:"run","2T":"run","2B":"run",3:"run"},{l:"Romanian",bh:"Rom\xe2n\u0103",1:"ro",2:"ron","2T":"ron","2B":"rum",3:"ron"},{l:"Russian",bh:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439",1:"ru",2:"rus","2T":"rus","2B":"rus",3:"rus"},{l:"Sanskrit",bh:"\u0938\u0902\u0938\u094d\u0915\u0943\u0924\u092e\u094d",1:"sa",2:"san","2T":"san","2B":"san",3:"san"},{l:"Sardinian",bh:"Sardu",1:"sc",2:"srd","2T":"srd","2B":"srd",3:"srd"},{l:"Sindhi",bh:"\u0633\u0646\u068c\u064a\u200e",1:"sd",2:"snd","2T":"snd","2B":"snd",3:"snd"},{l:"Northern Sami",bh:"S\xe1megiella",1:"se",2:"sme","2T":"sme","2B":"sme",3:"sme"},{l:"Samoan",bh:"Gagana S\u0101moa",1:"sm",2:"smo","2T":"smo","2B":"smo",3:"smo"},{l:"Sango",bh:"S\xe4ng\xf6",1:"sg",2:"sag","2T":"sag","2B":"sag",3:"sag"},{l:"Serbian",bh:"\u0421\u0440\u043f\u0441\u043a\u0438",1:"sr",2:"srp","2T":"srp","2B":"srp",3:"srp"},{l:"Gaelic",bh:"G\xe0idhlig",1:"gd",2:"gla","2T":"gla","2B":"gla",3:"gla"},{l:"Shona",bh:"ChiShona",1:"sn",2:"sna","2T":"sna","2B":"sna",3:"sna"},{l:"Sinhala",bh:"\u0dc3\u0dd2\u0d82\u0dc4\u0dbd",1:"si",2:"sin","2T":"sin","2B":"sin",3:"sin"},{l:"Slovak",bh:"Sloven\u010dina",1:"sk",2:"slk","2T":"slk","2B":"slo",3:"slk"},{l:"Slovene",bh:"Sloven\u0161\u010dina",1:"sl",2:"slv","2T":"slv","2B":"slv",3:"slv"},{l:"Somali",bh:"Soomaaliga",1:"so",2:"som","2T":"som","2B":"som",3:"som"},{l:"Southern Sotho",bh:"Sesotho",1:"st",2:"sot","2T":"sot","2B":"sot",3:"sot"},{l:"Spanish",bh:"Espa\xf1ol",1:"es",2:"spa","2T":"spa","2B":"spa",3:"spa"},{l:"Sundanese",bh:"Basa Sunda",1:"su",2:"sun","2T":"sun","2B":"sun",3:"sun"},{l:"Swahili",bh:"Kiswahili",1:"sw",2:"swa","2T":"swa","2B":"swa",3:"swa"},{l:"Swati",bh:"SiSwati",1:"ss",2:"ssw","2T":"ssw","2B":"ssw",3:"ssw"},{l:"Swedish",bh:"Svenska",1:"sv",2:"swe","2T":"swe","2B":"swe",3:"swe"},{l:"Tamil",bh:"\u0ba4\u0bae\u0bbf\u0bb4\u0bcd",1:"ta",2:"tam","2T":"tam","2B":"tam",3:"tam"},{l:"Telugu",bh:"\u0c24\u0c46\u0c32\u0c41\u0c17\u0c41",1:"te",2:"tel","2T":"tel","2B":"tel",3:"tel"},{l:"Tajik",bh:"\u0422\u043e\u04b7\u0438\u043a\u04e3",1:"tg",2:"tgk","2T":"tgk","2B":"tgk",3:"tgk"},{l:"Thai",bh:"\u0e20\u0e32\u0e29\u0e32\u0e44\u0e17\u0e22",1:"th",2:"tha","2T":"tha","2B":"tha",3:"tha"},{l:"Tigrinya",bh:"\u1275\u130d\u122d\u129b",1:"ti",2:"tir","2T":"tir","2B":"tir",3:"tir"},{l:"Tibetan Standard",bh:"\u0f56\u0f7c\u0f51\u0f0b\u0f61\u0f72\u0f42",1:"bo",2:"bod","2T":"bod","2B":"tib",3:"bod"},{l:"Turkmen",bh:"T\xfcrkmen\xe7e",1:"tk",2:"tuk","2T":"tuk","2B":"tuk",3:"tuk"},{l:"Tagalog",bh:"Tagalog",1:"tl",2:"tgl","2T":"tgl","2B":"tgl",3:"tgl"},{l:"Tswana",bh:"Setswana",1:"tn",2:"tsn","2T":"tsn","2B":"tsn",3:"tsn"},{l:"Tonga",bh:"faka Tonga",1:"to",2:"ton","2T":"ton","2B":"ton",3:"ton"},{l:"Turkish",bh:"T\xfcrk\xe7e",1:"tr",2:"tur","2T":"tur","2B":"tur",3:"tur"},{l:"Tsonga",bh:"Xitsonga",1:"ts",2:"tso","2T":"tso","2B":"tso",3:"tso"},{l:"Tatar",bh:"\u0422\u0430\u0442\u0430\u0440\u0447\u0430",1:"tt",2:"tat","2T":"tat","2B":"tat",3:"tat"},{l:"Twi",bh:"Twi",1:"tw",2:"twi","2T":"twi","2B":"twi",3:"twi"},{l:"Tahitian",bh:"Reo M\u0101\u2019ohi",1:"ty",2:"tah","2T":"tah","2B":"tah",3:"tah"},{l:"Uyghur",bh:"\u0626\u06c7\u064a\u063a\u06c7\u0631\u0686\u0647",1:"ug",2:"uig","2T":"uig","2B":"uig",3:"uig"},{l:"Ukrainian",bh:"\u0423\u043a\u0440\u0430\u0457\u043d\u0441\u044c\u043a\u0430",1:"uk",2:"ukr","2T":"ukr","2B":"ukr",3:"ukr"},{l:"Urdu",bh:"\u0627\u0631\u062f\u0648",1:"ur",2:"urd","2T":"urd","2B":"urd",3:"urd"},{l:"Uzbek",bh:"O\u2018zbek",1:"uz",2:"uzb","2T":"uzb","2B":"uzb",3:"uzb"},{l:"Venda",bh:"Tshiven\u1e13a",1:"ve",2:"ven","2T":"ven","2B":"ven",3:"ven"},{l:"Vietnamese",bh:"Ti\u1ebfng Vi\u1ec7t",1:"vi",2:"vie","2T":"vie","2B":"vie",3:"vie"},{l:"Volap\xfck",bh:"Volap\xfck",1:"vo",2:"vol","2T":"vol","2B":"vol",3:"vol"},{l:"Walloon",bh:"Walon",1:"wa",2:"wln","2T":"wln","2B":"wln",3:"wln"},{l:"Welsh",bh:"Cymraeg",1:"cy",2:"cym","2T":"cym","2B":"wel",3:"cym"},{l:"Wolof",bh:"Wolof",1:"wo",2:"wol","2T":"wol","2B":"wol",3:"wol"},{l:"Western Frisian",bh:"Frysk",1:"fy",2:"fry","2T":"fry","2B":"fry",3:"fry"},{l:"Xhosa",bh:"isiXhosa",1:"xh",2:"xho","2T":"xho","2B":"xho",3:"xho"},{l:"Yiddish",bh:"\u05d9\u05d9\u05b4\u05d3\u05d9\u05e9",1:"yi",2:"yid","2T":"yid","2B":"yid",3:"yid"},{l:"Yoruba",bh:"Yor\xf9b\xe1",1:"yo",2:"yor","2T":"yor","2B":"yor",3:"yor"},{l:"Zhuang",bh:"Cuengh",1:"za",2:"zha","2T":"zha","2B":"zha",3:"zha"},{l:"Zulu",bh:"isiZulu",1:"zu",2:"zul","2T":"zul","2B":"zul",3:"zul"}];r();function UU(t){var i;const s=null!=(i=function(t){const i=t.L0,s=new eB;return s.U0(i,0,i.byteLength),vB(s).m1}(t))?i:24;return t.$lt/s}function GU(t){return t.Kp===Ci.RC}function XU(t,i,s,e,n){const r=function(t,i,s,e){const n=s.$lt,r=mh.fromNumber(t.QB||0),h=e.dO(Xa._F(r,n));return{tft:e.tF(),ift:e,sft:h,eft:e}}(t,0,s,e),h=Xa.gF(t.ct||0,s.$lt),o=t.bN||0,a=!(65536&o)&&1!==(o>>24&3);let u;const c=xh(n),d=new J;for(;d.ac<c.byteLength;){const t=ds(c,d);if((31&Zm(c,d,1))===cB.o1){const i=new eB;i.U0(n,d.ac-1,d.ac+t-1);const s=new fB(i),e=oB(r.sft,s);u=u||[],u.push(...OU(e))}d.Dy(t-1)}return Jr({},r,{ct:h.tF(),nft:h,rft:r.sft.tF(),hft:r.tft,oft:a,aft:u,uft:!1,cft:!1})}function ZU(t){return{QN:t._N.QN,$lt:t.YN._N.UN}}function HU(t){return t.Kp===Ci.LP}r(),r(),r(),r(),r(),r(),r(),r();var Ac=class{XO(t){return this.fit===t.fit&&this.iit===t.iit}constructor(t,i){this.fit=void 0,this.iit=void 0,this.fit=t,this.iit=i}};r();var zU=class{get xit(){return this.dft}get Sit(){return[this]}get Eit(){return this.aJ}get hit(){return this.lft}get uit(){return new Ac(this.hit.fit,this.hit.iit+this.xit.length-1)}fft(t){this.dft+=t}vft(t){for(const i of t)this.fft(i)}constructor(t,i){this.aJ=void 0,this.lft=void 0,this.dft=void 0,this.aJ=t,this.lft=i,this.dft=""}};function YU(t,i){return t===i||t.xit===i.xit&&t.hit.XO(i.hit)&&T(t.Eit,i.Eit)}function KU(t,i){return t===i||t.hit.XO(i.hit)&&t.uit.XO(i.uit)&&of(t.Sit,i.Sit,YU)}var qU=class extends Pc{ZO(t){return of(this.U,t.U,KU)}constructor(t,i,s){super(t,i,s,!1)}};r();var jU=class{_ft(t){return t.fV(this)}gft(t){return vl(t,(t,i)=>t.fV(this,i))}mft(t,i){return new QU(t,i).pft()}},QU=class{pft(){if(this.wft)return[];for(let t=0;t<this.fit.length;t++)this.yft(t);return this.bft(),this.Aft}Sft(t){this.Tft=new zU(uF,new Ac(this.kft,t))}bft(){this.Tft&&(this.Aft.push(this.Tft),this.Tft=null)}yft(t){const i=this.fit[t];JU(i)?this.Tft&&this.bft():(this.Tft||this.Sft(t),this.Tft.fft(i))}get wft(){return this.fit.every(JU)}constructor(t,i){this.fit=void 0,this.kft=void 0,this.Aft=void 0,this.Tft=void 0,this.fit=t,this.kft=i,this.Aft=[],this.Tft=null}};function JU(t){return null==t}var $U=class{static Eft(t,i,s){if(i>=s)return;const e=vl(t,(t,i)=>new QU(t.map(t=>t?t.Rft():null),i).pft());return 0!==e.length?new qU(i,s,e):void 0}},tG="black",iG="white";r(),r();var sG=[[42,225],[92,233],[94,237],[95,243],[96,250],[123,231],[124,247],[125,209],[126,241],[127,9608],[128,174],[129,176],[130,189],[131,191],[132,8482],[133,162],[134,163],[135,9834],[136,224],[137,32],[138,232],[139,226],[140,234],[141,238],[142,244],[143,251],[144,193],[145,201],[146,211],[147,218],[148,220],[149,252],[150,8216],[151,161],[152,42],[153,8217],[154,9473],[155,169],[156,8480],[157,8226],[158,8220],[159,8221],[160,192],[161,194],[162,199],[163,200],[164,202],[165,203],[166,235],[167,206],[168,207],[169,239],[170,212],[171,217],[172,249],[173,219],[174,171],[175,187],[176,195],[177,227],[178,205],[179,204],[180,236],[181,210],[182,242],[183,213],[184,245],[185,123],[186,125],[187,92],[188,94],[189,95],[190,124],[191,8764],[192,196],[193,228],[194,214],[195,246],[196,223],[197,165],[198,164],[199,9475],[200,197],[201,229],[202,216],[203,248],[204,9487],[205,9491],[206,9495],[207,9499]].reduce((t,i)=>(t[i[0]]=i[1],t),{}),eG=class{xft(t){for(let i=0;i<Ht;i++)t&&(this.Ift[i]=t.Ift[i])}XO(t){for(let i=0;i<Ht;i++)if(this.Ift[i]!==t.Ift[i])return!1;return!0}Pft(){for(let t=0;t<Ht;t++)if(null!==this.Ift[t])return!1;return!0}Cft(t){this.Nft!==t&&(this.Nft=t),this.Nft<0?this.Nft=0:this.Nft>Ht&&(this.Nft=31)}Dft(t){const i=this.Nft+t;this.Cft(i)}Bft(){this.Dft(-1),this.Ift[this.Nft]=null}fft(t){t>=144&&this.Bft();const i=function(t){return sG[t]?String.fromCharCode(sG[t]):String.fromCharCode(t)}(t);this.addParsedChar(i)}addParsedChar(t){this.Nft>=Ht||(32===Number(t)?(this.Ift[this.Nft]=this.Mft?"</i>":"<i>",this.Mft=!this.Mft):this.Ift[this.Nft]=t,this.Dft(1))}Lft(t){for(let i=t;i<Ht;i++)this.Ift[i]=null}Zy(){this.Lft(0),this.Nft=0}Oft(){this.Lft(this.Nft)}Fft(t,i){const s=this.Ift;let e=null;for(let n=0;n<Ht;n++){const r=s[n];null===r?e=null:(e||(e={Gh:n,Xh:t,Ti:0,Mi:1,Ift:[[]]},i.push(e)),e.Ift[0].push(r),e.Ti++)}}fV(t,i){return t.mft(this.Ift,i)}constructor(){this.Ift=[],this.Nft=0,this.Mft=void 0;for(let t=0;t<Ht;t++)this.Ift.push(null);this.Mft=!1}};var nG=class{Vft(t,i){const s="CC"+(this.Wft<<1|this.Uft+1);if(t>=i)return null;const e=(new jU).gft(this.Gft.slice(1));return 0===e.length?null:{SO:new qU(t,i,e),UT:s,Xft:this.Wft<<1|this.Uft+1}}hr(){this.Zft(),this.Hft=1}zft(){return this.Hft}Yft(t){this.Hft=t}Cft(t){this.Gft[this.Hft].Cft(t)}Dft(t){this.Gft[this.Hft].Dft(t)}Kft(){return this.qft}jft(t){this.qft=t}fft(t,i){if(i<32||i>127)return;let s="";switch(t){case 0:s=void 0!==oG[i]?oG[i]:String.fromCharCode(i);break;case 1:s=aG[i];break;case 2:this.Qft(),s=uG[i];break;case 3:this.Qft(),s=cG[i]}s&&this.Gft[this.Hft].addParsedChar(s)}Qft(){this.Gft[this.Hft].Bft()}Jft(t,i,s){if(t>=i)for(let e=s-1;e>=0;e--)this.Gft[t+e]=this.Gft[i+e];else for(let e=0;e<s;e++)this.Gft[t+e]=this.Gft[i+e]}$ft(t,i){for(let s=0;s<=i;s++)this.Gft[t+s]=new eG}Zft(){this.$ft(0,rG)}tvt(){this.Hft=this.qft>0?this.qft:0,this.Zft()}ivt(t){this.svt=t}evt(t){this.nvt=t}rvt(t){this.ovt=t}avt(t){this.uvt=t}constructor(t,i){this.Gft=void 0,this.Hft=void 0,this.qft=void 0,this.Wft=void 0,this.Uft=void 0,this.svt=void 0,this.nvt=void 0,this.ovt=void 0,this.uvt=void 0,this.Gft=new Array(rG+1);for(let t=0;t<=rG;t++)this.Gft[t]=new eG;this.Hft=1,this.qft=0,this.Wft=t,this.Uft=i,this.svt=!1,this.nvt=!1,this.ovt=iG,this.uvt=tG,this.hr()}},rG=15,hG=function(t){return t[t.cvt=0]="cvt",t[t.dvt=1]="dvt",t[t.lvt=2]="lvt",t[t.fvt=3]="fvt",t}({}),oG={39:"\u2019",42:"\xe1",92:"\xe9",94:"\xed",95:"\xf3",96:"\xfa",123:"\xe7",124:"\xf7",125:"\xd1",126:"\xf1",127:"\u2588"},aG={48:"\xae",49:"\xb0",50:"\xbd",51:"\xbf",52:"\u2122",53:"\xa2",54:"\xa3",55:"\u266a",56:"\xe0",57:"\u2800",58:"\xe8",59:"\xe2",60:"\xea",61:"\xee",62:"\xf4",63:"\xfb"},uG={32:"\xc1",33:"\xc9",34:"\xd3",35:"\xda",36:"\xdc",37:"\xfc",38:"\u2018",39:"\xa1",40:"*",41:"'",42:"\u2500",43:"\xa9",44:"\u2120",45:"\xb7",46:"\u201c",47:"\u201d",48:"\xc0",49:"\xc2",50:"\xc7",51:"\xc8",52:"\xca",53:"\xcb",54:"\xeb",55:"\xce",56:"\xcf",57:"\xef",58:"\xd4",59:"\xd9",60:"\xf9",61:"\xdb",62:"\xab",63:"\xbb"},cG={32:"\xc3",33:"\xe3",34:"\xcd",35:"\xcc",36:"\xec",37:"\xd2",38:"\xf2",39:"\xd5",40:"\xf5",41:"{",42:"}",43:"\\",44:"^",45:"_",46:"|",47:"~",48:"\xc4",49:"\xe4",50:"\xd6",51:"\xf6",52:"\xdf",53:"\xa5",54:"\xa4",55:"\u2502",56:"\xc5",57:"\xe5",58:"\xd8",59:"\xf8",60:"\u250c",61:"\u2510",62:"\u2514",63:"\u2518"},Fr=class{hr(){this.vvt=!0,this._vt=0,this.Ym=0,this.gvt=this.mvt,this.pvt=void 0,this.mvt.hr(),this.wvt.hr(),this.yvt.hr()}bvt(t,i){return[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(7&t)<<1|i>>5&1]}Avt(t,i){const s=this.bvt(t,i),e=(30&i)>>1;let n=iG,r=!1;e<7?n=fG[e]:7===e&&(r=!0);const h=!(1&~i);if(4===this.Ym)return;const o=this.gvt;if(3===this.Ym&&s!==o.zft()){const t=1+o.zft()-o.Kft(),i=1+s-o.Kft();o.Jft(i,t,o.Kft()),o.$ft(0,i-1),o.$ft(s+1,rG-s)}o.Yft(s);const a=dF[t<<1&14|i>>5&1]-1;if(a<0)return;const u=function(t,i){const s=i>95?i-96:i-64;return{tit:cF[s].tit,$tt:cF[s].$tt,iit:cF[s].iit,fit:t}}(a,i);o.Cft(u.iit),this.gvt.ivt(h),this.gvt.evt(r),this.gvt.rvt(n),this.gvt.avt(tG)}Svt(t,i){this.gvt.ivt(!1),this.gvt.evt(!1),this.gvt.rvt(iG);const s=this.Tvt(t,hG.cvt," ".charCodeAt(0));let e=iG,n=!1;const r=!(1&~i);return e=fG[(14&i)>>1],"white_italics"===e&&(e="white",n=!0),this.gvt.ivt(r),this.gvt.evt(n),this.gvt.rvt(e),s}Tvt(t,i,s){if(this.gvt.fft(i,s),2===this.Ym||3===this.Ym){const i=this.kvt(this.gvt,this._vt,t);return this._vt=t,i}return null}kvt(t,i,s){return this.vvt?null:2===this.Ym||3===this.Ym?t.Vft(s,s+10):t.Vft(i,s)}Evt(t,i){let s=tG;7&t||(s=lG[(14&i)>>1]),this.gvt.avt(s)}Rvt(t){const i=dG,s=t.xvt,e=t.Ivt;let n=null;switch(s){case i.RCL:this.Pvt();break;case i.BS:this.Cvt();break;case i.AOD:case i.AON:case i.DER:break;case i.RU2:n=this.Nvt(2,e);break;case i.RU3:n=this.Nvt(3,e);break;case i.RU4:n=this.Nvt(4,e);break;case i.FON:n=this.Dvt(e);break;case i.RDC:this.Bvt(e);break;case i.TR:this.Mvt();break;case i.RTD:this.Lvt();break;case i.EDM:n=this.Ovt(e);break;case i.CR:n=this.Fvt(e);break;case i.ENM:this.Vvt();break;case i.EOC:n=this.Wvt(e)}return n}Fvt(t){const i=this.gvt;if(3!==this.Ym)return null;const s=this.kvt(i,this._vt,t),e=i.zft()-i.Kft()+1;return i.Jft(e-1,e,i.Kft()),i.$ft(0,e-1),i.$ft(i.zft(),rG-i.zft()),this._vt=t,s}Nvt(t,i){this.gvt=this.mvt;const s=this.gvt;let e=null;return 3!==this.Ym&&4!==this.Ym&&(e=this.kvt(s,this._vt,i),this.mvt.tvt(),this.wvt.tvt(),this.vvt=!1,s.Yft(rG)),this.Ym=3,s.jft(t),e}Dvt(t){return this.Tvt(t,hG.cvt," ".charCodeAt(0))}Ovt(t){const i=this.mvt;let s=null;return 4!==this.Ym&&(s=this.kvt(i,this._vt,t)),i.Zft(),this.vvt=!1,s}Bvt(t){this.Ym=2,this.gvt=this.mvt,this.gvt.jft(0),this._vt=t}Vvt(){this.wvt.Zft()}Wvt(t){let i=null;4!==this.Ym&&(i=this.kvt(this.mvt,this._vt,t));const s=this.wvt;return this.wvt=this.mvt,this.mvt=s,this.Pvt(),this._vt=t,i}Pvt(){this.Ym=1,this.gvt=this.wvt,this.gvt.jft(0)}Cvt(){this.gvt.Qft()}Mvt(){this.yvt.hr(),this.vvt=!1,this.Lvt()}Lvt(){this.gvt=this.yvt,this.Ym=4}Uvt(t,i,s){return this.gvt.fft(hG.cvt,i),this.Tvt(t,hG.cvt,s)}Gvt(t,i,s){const e=1&i?hG.fvt:hG.lvt;return this.Tvt(t,e,s)}Xvt(t){const i=t.Zvt,s=t.xvt,e=t.Ivt;if(this.pvt===(i<<8|s))return this.pvt=void 0,null;if(this.pvt=i<<8|s,this.Hvt(i,s))this.Avt(i,s);else{if(this.zvt(i,s))return this.Svt(e,s);if(this.Yvt(i,s))this.Evt(i,s);else{if(this.Kvt(i,s))return this.Tvt(e,hG.dvt,s);if(this.qvt(i,s))return this.Gvt(e,i,s);if(this.jvt(i,s))return this.Rvt(t);this.isTabOffset(i)&&this.gvt.Dft(s-32)}}return null}isTabOffset(t){return 23===t||31===t}jvt(t,i){return 20==(246&t)&&32==(240&i)}Hvt(t,i){return 16==(240&t)&&64==(192&i)}zvt(t,i){return 17==(247&t)&&32==(240&i)}Yvt(t,i){return 16==(247&t)&&32==(240&i)||23==(247&t)&&45==(255&i)}Kvt(t,i){return 17==(247&t)&&48==(240&i)}qvt(t,i){return 18==(246&t)&&32==(224&i)}static Qvt(t){return 16==(112&t)}constructor(t,i){this.Ym=void 0,this.yvt=void 0,this.mvt=void 0,this.wvt=void 0,this.gvt=void 0,this._vt=void 0,this.pvt=void 0,this.vvt=void 0,this.Ym=0,this.yvt=new nG(t,i),this.mvt=new nG(t,i),this.wvt=new nG(t,i),this.gvt=this.mvt,this._vt=0,this.pvt=void 0,this.vvt=!1}},dG={RCL:32,BS:33,AOD:34,AON:35,DER:36,RU2:37,RU3:38,RU4:39,FON:40,RDC:41,TR:42,RTD:43,EDM:44,CR:45,ENM:46,EOC:47},lG=["black","green","blue","cyan","red","yellow","magenta","black"],fG=["white","green","blue","cyan","red","yellow","magenta","white_italics"];r(),r(),r();var vG=class{Rft(){return this.Jvt}$vt(){return this.svt}t_t(){return this.nvt}i_t(){return this.uvt}s_t(){return this.ovt}constructor(t,i,s,e,n){this.Jvt=void 0,this.svt=void 0,this.nvt=void 0,this.uvt=void 0,this.ovt=void 0,this.Jvt=t,this.svt=i,this.nvt=s,this.uvt=e,this.ovt=n}},_G=class{e_t(t,i,s,e,n,r,h){this._Z=t,this.n_t=i,this.r_t=s,this.h_t=e,this.o_t=n,this.a_t=r,this.u_t=h}c_t(){this.d_t=[];for(let t=0;t<mG;t++)this.d_t.push(this.l_t())}l_t(){const t=[];for(let i=0;i<gG;i++)t.push(null);return t}f_t(t){this.v_t()&&(this.d_t[this.Hft][this.__t]=new vG(t,this.svt,this.nvt,this.uvt,this.ovt),this.__t++)}g_t(){this.v_t()&&(this.__t<=0&&this.Hft<=0||(this.__t<=0?(this.__t=this.u_t-1,this.Hft--):this.__t--,this.d_t[this.Hft][this.__t]=null))}v_t(){const t=this.Hft<this.a_t&&this.Hft>=0,i=this.__t<this.u_t&&this.__t>=0;return t&&i}Re(){return this._Z}m_t(t){let i=0;for(let s=t;s<mG;s++,i++)this.d_t[i]=this.d_t[s];for(let s=0;s<t;s++,i++)this.d_t[i]=this.l_t()}p_t(){if(this.Hft+1>=this.a_t)return this.m_t(1),void(this.__t=0);this.Hft++,this.__t=0}w_t(){this.d_t[this.Hft]=this.l_t(),this.__t=0}Vft(t,i){if(this.LO>=t)return null;const s=$U.Eft(this.d_t,this.LO,t);return s?(this.y_t(t),{SO:s,UT:"svc"+i,Xft:i}):null}b_t(t,i){this.Hft=t,this.__t=i}A_t(t){this.uvt=t}S_t(t){this.ovt=t}T_t(t){this.svt=t}k_t(t){this.nvt=t}E_t(){this.Hft=0,this.__t=0,this.svt=!1,this.nvt=!1,this.ovt=iG,this.uvt=tG}R_t(t){this.x_t=t}I_t(){this._Z=!0}we(){this._Z=!1}Mh(){this._Z=!this._Z}y_t(t){this.LO=t}constructor(t){this.P_t=void 0,this._Z=void 0,this.o_t=void 0,this.r_t=void 0,this.n_t=void 0,this.h_t=void 0,this.a_t=void 0,this.u_t=void 0,this.x_t=void 0,this.d_t=void 0,this.LO=void 0,this.Hft=void 0,this.__t=void 0,this.nvt=void 0,this.svt=void 0,this.ovt=void 0,this.uvt=void 0,this.P_t=t,this._Z=!1,this.o_t=!1,this.r_t=0,this.n_t=0,this.h_t=0,this.a_t=0,this.u_t=0,this.x_t=2,this.d_t=[],this.LO=0,this.Hft=0,this.__t=0,this.nvt=!1,this.svt=!1,this.ovt=iG,this.uvt=tG,this.c_t()}},gG=42,mG=15,pG=class{C_t(t){const i=t.N_t();let s=i.XE;const e=i.Ivt;if(s===SG){s=s<<16|t.N_t().XE}return s>=0&&s<=31?this.D_t(s,e):s>=128&&s<=159?this.B_t(t,s,e):(s>=4096&&s<=4127?this.M_t(t,255&s):s>=4224&&s<=4255?this.L_t(t,255&s):s>=32&&s<=127?this.O_t(s):s>=160&&s<=255?this.F_t(s):s>=4128&&s<=4223?this.V_t(255&s):s>=4256&&s<=4351&&this.W_t(255&s),null)}O_t(t){this.U_t&&(127!==t?this.U_t.f_t(String.fromCharCode(t)):this.U_t.f_t("\u266a"))}F_t(t){this.U_t&&this.U_t.f_t(String.fromCharCode(t))}V_t(t){if(!this.U_t)return;if(void 0===TG[t])return void this.U_t.f_t("_");const i=TG[t];this.U_t.f_t(i)}W_t(t){this.U_t&&(160===t?this.U_t.f_t("[CC]"):this.U_t.f_t("_"))}D_t(t,i){if(!this.U_t)return null;const s=this.U_t;let e=null;switch(t){case wG:s.g_t();break;case bG:s.Re()&&(e=s.Vft(i,this.G_t)),s.p_t();break;case AG:s.Re()&&(e=s.Vft(i,this.G_t)),s.w_t();break;case yG:s.Re()&&(e=s.Vft(i,this.G_t)),s.c_t(),s.b_t(0,0)}return e}B_t(t,i,s){if(i>=128&&i<=135){const t=7&i;this.X_t(t)}else{if(136===i){const i=t.N_t().XE;return this.Z_t(i,s)}if(137===i){const i=t.N_t().XE;this.H_t(i,s)}else{if(138===i){const i=t.N_t().XE;return this.z_t(i,s)}if(139===i){const i=t.N_t().XE;return this.Y_t(i,s)}if(140===i){const i=t.N_t().XE;return this.K_t(i,s)}if(143===i)return this.hr(s);if(144===i)this.q_t(t);else if(145===i)this.j_t(t);else if(146===i)this.b_t(t);else if(151===i)this.Q_t(t);else if(i>=152&&i<=159){const e=(15&i)-8;this.e_t(t,e,s)}}}return null}M_t(t,i){i>=8&&i<=15?t.nN(1):i>=16&&i<=23?t.nN(2):i>=24&&i<=31&&t.nN(3)}L_t(t,i){i>=128&&i<=135?t.nN(4):i>=136&&i<=143&&t.nN(5)}X_t(t){this.J_t[t]&&(this.U_t=this.J_t[t])}*$_t(t){for(let i=0;i<8;i++){!(1&~t)&&this.J_t[i]&&(yield i),t>>=1}}Z_t(t,i){let s=null;for(const e of this.$_t(t)){const t=this.J_t[e];t.Re()&&(s=t.Vft(i,this.G_t)),t.c_t()}return s}H_t(t,i){for(const s of this.$_t(t)){const t=this.J_t[s];t.Re()||t.y_t(i),t.I_t()}}z_t(t,i){let s=null;for(const e of this.$_t(t)){const t=this.J_t[e];t.Re()&&(s=t.Vft(i,this.G_t)),t.we()}return s}Y_t(t,i){let s=null;for(const e of this.$_t(t)){const t=this.J_t[e];t.Re()?s=t.Vft(i,this.G_t):t.y_t(i),t.Mh()}return s}K_t(t,i){let s=null;for(const e of this.$_t(t)){const t=this.J_t[e];t.Re()&&(s=t.Vft(i,this.G_t)),this.J_t[e]=void 0}return s}hr(t){const i=this.K_t(255,t);return this.Zy(),i}Zy(){this.U_t=void 0,this.J_t=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0]}q_t(t){t.nN(1);const i=t.N_t().XE;if(!this.U_t)return;const s=(128&i)>0,e=(64&i)>0;this.U_t.k_t(s),this.U_t.T_t(e)}j_t(t){const i=t.N_t().XE,s=t.N_t().XE;if(t.nN(1),!this.U_t)return;const e=3&i,n=(12&i)>>2,r=(48&i)>>4,h=3&s,o=(12&s)>>2,a=(48&s)>>4,u=this.tgt(r,n,e),c=this.tgt(a,o,h);this.U_t.S_t(u),this.U_t.A_t(c)}b_t(t){const i=t.N_t().XE,s=t.N_t().XE;if(!this.U_t)return;const e=15&i,n=63&s;this.U_t.b_t(e,n)}Q_t(t){t.nN(1),t.nN(1);const i=t.N_t().XE;if(t.nN(1),!this.U_t)return;const s=3&i;this.U_t.R_t(s)}e_t(t,i,s){const e=void 0!==this.J_t[i];if(!e){const t=new _G(i);t.y_t(s),this.J_t[i]=t}const n=t.N_t().XE,r=t.N_t().XE,h=t.N_t().XE,o=t.N_t().XE,a=t.N_t().XE,u=t.N_t().XE,c=(32&n)>0,d=127&r,l=(128&r)>0,f=h,v=1+(15&o),_=(240&o)>>4,g=1+(63&a);e&&0===(7&u)||this.J_t[i].E_t(),this.J_t[i].e_t(c,d,f,_,l,v,g),this.U_t=this.J_t[i]}tgt(t,i,s){const e={0:0,1:0,2:1,3:1};return kG[e[t]<<2|e[i]<<1|e[s]]}constructor(t){this.G_t=void 0,this.J_t=void 0,this.U_t=void 0,this.G_t=t,this.J_t=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0],this.U_t=void 0}},wG=8,yG=12,bG=13,AG=14,SG=16,TG={32:" ",33:"\xa0",37:"\u2026",42:"\u0160",44:"\u0152",48:"\u2588",49:"\u2018",50:"\u2019",51:"\u201c",52:"\u201d",53:"\u2022",57:"\u2122",58:"\u0161",60:"\u0153",61:"\u2120",63:"\u0178",118:"\u215b",119:"\u215c",120:"\u215d",121:"\u215e",122:"\u2502",123:"\u2510",124:"\u2514",125:"\u2500",126:"\u2518",127:"\u250c"},kG=["black","blue","green","cyan","red","magenta","yellow","white"];r();var EG=class{igt(t){if(t.Kp===Qu.Hlt){const i=63&t.XE;return this.sgt=2*i-1,void(this.egt=[])}if(this.egt&&(this.sgt>0&&(this.egt.push(t),this.sgt--),0===this.sgt)){const t=new RG(this.egt);this.ngt.push(t),this.egt=null,this.sgt=0}}rgt(){return this.ngt}hgt(){this.ngt=[]}Zy(){this.ngt=[],this.egt=[],this.sgt=0}constructor(){this.ngt=void 0,this.egt=void 0,this.sgt=void 0,this.ngt=[],this.egt=null,this.sgt=0}},RG=class{ogt(){return this.agt<this.ugt.length}cgt(){return this.agt}N_t(){if(!this.ogt())throw new Wt(Ne.SUBTITLE_PARSE_ERROR,"Buffer read out of bounds / invalid CEA-708 Data.");return this.ugt[this.agt++]}nN(t){if(this.agt+t>this.ugt.length)throw new Wt(Ne.SUBTITLE_PARSE_ERROR,"Buffer read out of bounds / invalid CEA-708 Data.");this.agt+=t}constructor(t){this.agt=void 0,this.ugt=void 0,this.agt=0,this.ugt=t}},xG=class{Zy(){this.dgt=0,this.lgt=[],this.fgt=[],this.vgt.Zy(),this.hr(),this._gt.forEach(t=>{t.Zy()})}hr(){this.ggt=0,this.mgt=0,this.pgt.forEach(t=>{t.hr()})}wgt(t,i){if(t.Klt){const s=t.jlt,e=t.Qlt,n=t.Kp;n===Qu.Glt||n===Qu.Xlt?this.lgt.push({Ivt:i,Kp:n,Zvt:s,xvt:e,ygt:this.lgt.length}):this.bgt&&(this.fgt.push({Ivt:i,Kp:n,XE:s,ygt:this.fgt.length}),this.fgt.push({Ivt:i,Kp:Qu.Zlt,XE:e,ygt:this.fgt.length}))}}sY(){const t=[];this.lgt.sort((t,i)=>t.Ivt-i.Ivt||t.ygt-i.ygt),this.fgt.sort((t,i)=>t.Ivt-i.Ivt||t.ygt-i.ygt);for(const i of this.lgt){const s=this.Agt(i);s&&t.push(s)}for(const t of this.fgt)this.vgt.igt(t);const i=this.vgt.rgt();for(const s of i){const i=this.Sgt(s);t.push(...i)}return this.vgt.hgt(),this.lgt=[],this.fgt=[],t}Agt(t){const i=t.Kp;if(Fr.Qvt(t.Zvt)){const s=t.Zvt>>3&1;0===i?this.ggt=s:this.mgt=s}const s="CC"+(i<<1|(i?this.mgt:this.ggt)+1),e=this.pgt.get(s);return 255===t.Zvt&&255===t.xvt||!t.Zvt&&!t.xvt||!this.Tgt(t.Zvt)||!this.Tgt(t.xvt)?(++this.dgt>=45&&this.hr(),null):(this.dgt=0,t.Zvt&=127,t.xvt&=127,t.Zvt||t.xvt?Fr.Qvt(t.Zvt)?e.Xvt(t):e.Uvt(t.Ivt,t.Zvt,t.xvt):null)}Sgt(t){const i=[];try{for(;t.ogt();){const s=t.N_t().XE;let e=(224&s)>>5;const n=31&s;if(7===e&&0!==n){e=63&t.N_t().XE}if(0!==e){if(!this._gt.has(e)){const t=new pG(e);this._gt.set(e,t)}const s=this._gt.get(e),r=t.cgt();for(;t.cgt()-r<n;){const e=s.C_t(t);e&&i.push(e)}}}}catch(t){if(!(t instanceof Wt&&t.code===Ne.SUBTITLE_PARSE_ERROR))throw t}return i}Tgt(t){let i=0;for(;t;)i^=1&t,t>>=1;return 1===i}constructor(){this.lgt=void 0,this.fgt=void 0,this.vgt=void 0,this.dgt=void 0,this.pgt=void 0,this.ggt=void 0,this.mgt=void 0,this._gt=void 0,this.bgt=!1,this.lgt=[],this.fgt=[],this.vgt=new EG,this.dgt=0,this.pgt=kg({CC1:new Fr(0,0),CC2:new Fr(0,1),CC3:new Fr(1,0),CC4:new Fr(1,1)}),this.ggt=0,this.mgt=0,this._gt=Zs(),this.hr()}};r();var IG=class extends sh{constructor(t,i){super("kgt"),this.Xft=void 0,this.SO=void 0,this.Xft=t,this.SO=i}},PG=Xa.iV(.1),CG=class extends fr{Egt(t,i){this.Rgt.wgt(t,i)}sY(){const t=this.Rgt.sY();for(const i of t)this.So(new IG(i.Xft,i.SO))}hr(){this.Rgt.Zy()}kn(){this.Vo(),this.Rgt.Zy()}constructor(){super(),this.Rgt=void 0,this.Rgt=new xG}},NG=class extends CG{xgt(t,i,s,e){const n=this.Igt(t,e);this.Pgt(n,i,s),this.sY()}Igt(t,i){const s=t.slice().sort(lF),e=this.Cgt;if(0===e.length)return s;if(0===s.length)return e;let n;const r=e[0].sit,h=e[e.length-1].sit,o=s[0].sit,a=e[0].Tot===s[0].Tot;if(h.dF(o).aF().oF(Xa.iV(2.5*i))&&a)n=e.concat(s).sort(lF);else if(o.eF(r)){let t=0;for(;t<e.length&&e[t].sit.oF(o);)t++;let i=!1,r=!1;for(let n=t,h=0;n<e.length&&h<s.length;n++,h++)DG(e[n],s[h])?i=!0:r=!0;const h=i&&!r,a=i&&r;!i&&r?n=e.concat(s).sort(lF):h?n=e.slice(0,t).concat(s):(n=s,a&&this.hr())}else n=s,this.hr();return n}Pgt(t,i,s){for(let e=0;e<t.length;e++){const n=t[e],r=n.sit.tF();if(!s&&i-r<PG.tF())return void(this.Cgt=t.slice(e));this.Egt(n,r)}this.Cgt=[]}constructor(...t){super(...t),this.Cgt=[]}};function DG(t,i){return t.sit.XO(i.sit)&&t.Kp===i.Kp&&t.jlt===i.jlt&&t.Qlt===i.Qlt}var BG=class extends ko{Ngt(t){return this.Dgt.get(t)}Bgt(t){let i=this.Dgt.get(t.eit);return i||(i=this.Mgt(t),this.Dgt.set(t.eit,i)),i}Mgt(t){const i=[Qs.GI],s=VU(t.nit);let e=s?s.l:"";t.Lgt&&(e="easy "+e,i.push(Qs.zI));const n=t.Th||e||"CC"+t.eit,r=this.Ogt(n,t.nit,i);return this.tt(r),r}jrt(t){const i=Co.AN(xh(t));this.Fgt=function(t){for(const i of t.Z){const t=ZU(i),s=i.YN.nD.oD.uD.dD;let e=me(s,t=>t.Kp===Ci.jP);if(!e){const t=s.filter(t=>t.Kp===Ci.EC),i=me(t,t=>{var i;return(null==(i=t.hB)?void 0:i.Kp)===Ci.jP});i&&(e=i.hB)}if(!e)continue;const n=iB(xh(e.YD.hk),new J),r=e.qD;return Jr({},t,{QN:i._N.QN,YD:ap(e.YD.hk),Ti:e.Ti,Mi:e.Mi,PB:r&&r.PB,IB:r&&r.IB,J1:n.N0,Vgt:n.D0,t2:n.B0,L0:n.L0[0],O0:n.O0[0]})}}(me(i,HU))}Ldt(t,i,s,e,n,r){var h;if(!this.Fgt)return;if(!S(this.Wgt)&&we(this.Wgt,i,1e-5))return;S(this.Ugt)||we(this.Ugt,i,.1)||this.Ggt.hr();const o=function(t,i,s,e,n){const r=[],h=i.filter(GU),o=e(s);for(const i of h){const e=me(i.Z,t=>t._N.QN===s.QN);if(!e)continue;const h=e._N.DB||0,u=e._N.BB||0;let c=e.ZB?e.ZB.ZB:mh.ZERO;var a;const d=i.FB+(null!=(a=e._N.HB)?a:mh.ZERO).toNumber();for(const a of e.XB){let e=d+(a.FB||0);for(const d of a.jB){const a=d.Vy||u,l=new eB;l.U0(t,e,e+a);const f=Xa._F(c,s.$lt);l.NV=n(d,i,s,f,Hc(t,e,e+a)),r.push(l),e+=a,c=c.add(d.ct||h||o)}}}return r}(t,Co.AN(xh(t)),this.Fgt,UU,XU);var a;const u=null!=(a=null==(h=cf(o,t=>t.NV.ct))?void 0:h.NV.ct)?a:0,c=function(t){const i=[];for(const s of t)s.NV.aft&&i.push(...s.NV.aft),delete s.NV.aft;for(let t=0;t<i.length;t+=1)i[t].VB=t;return i}(o),d=Xa.iV(e),l=[];for(const t of c)l.push(Jr({},t,{Tot:n,sit:t.zlt.dO(d)}));this.Ggt.xgt(l,s,r,u),this.Wgt=i,this.Ugt=s}$V(t,i,s){const e=this.Xgt(t,i,s);return this.Dgt.forEach((i,s)=>{i===t&&this.Dgt.set(s,e)}),e}hr(){return this.Ggt.hr(),this.Dgt.forEach(t=>{t.kn(),this.it(t),this.Zgt(t)}),this.Dgt.clear(),this.Fgt=void 0,this.Wgt=NaN,this.Ugt=NaN,super.hr()}kn(){return this.Ggt.mn("kgt",this.Hgt),this.Ggt.kn(),super.kn()}constructor(t){super(t),this.Ggt=void 0,this.Fgt=void 0,this.Wgt=NaN,this.Ugt=NaN,this.Dgt=void 0,this.Hgt=t=>{const i=this.Bgt({eit:t.Xft,nit:""}),s=t.SO;for(const t of i.L.CI)s.kO<t.kO&&s.EO>t.kO?s.EO=t.kO:s.kO>t.kO&&t.EO>s.kO?t.EO=s.kO:s.kO===t.kO&&(s.EO=t.EO);this.zgt(i,s)},this.Dgt=Zs(),this.Ggt=new NG,this.Ggt.wn("kgt",this.Hgt)}},MG=class extends BG{Zgt(t){}zgt(t,i){if(t.Hk===Z.Nh)return;const s=i.U.map(t=>t.xit).join("\n"),e=rf(t.L.CI,-1);e&&e.U===s&&e.kO<=i.kO&&i.kO<=e.EO?e.EO=_.max(e.EO,i.EO):t.B9(i.kO,i.EO,s)}Ogt(t,i,s){return this.JV.wX({Kp:"webvtt",Lt:D.FV,Th:t,bs:i})}Xgt(t,i,s){return t}},LG=class extends BG{Zgt(t){this.JV.sW(t)}zgt(t,i){t.iW(i)}Ogt(t,i,s){return this.JV.sI(D.FV,t,t,i,!1,hr.CEA608,void 0,s)}Xgt(t,i,s){return sx(t,i,s)}};r(),r();var OG=/(.*)=(.*)/,FG=/(.*):(.*)/;function VG(t){if(!t)return[];const i=[],s=t.trim().split(";");for(const t of s){const s=t.match(OG);if(s){const[,t,e]=s;let n="",r=!1;for(const t of e.trim().split(","))if(t.match(FG)){const[,i,s]=t.match(FG);switch(i){case"lang":n=s;break;case"er":r=Boolean(Number(s))}}i.push({eit:Number(t),nit:n,Lgt:r})}}return i}var WG={1:1,2:3,3:2,4:4},UG="urn:scte:dash:cc:cea-608:2015",GG="urn:scte:dash:cc:cea-708:2015";r(),r();var mn=class extends Kt{xa(){return new XG(this.Tot&&this.Tot.Ca)}constructor(t,i,s){super(M.EI),this.Tot=void 0,this.Cut=void 0,this.Ygt=void 0,this.Tot=t,this.Cut=i,this.Ygt=s}},XG=class extends sh{constructor(t){super("activequalitychanged"),this.quality=void 0,this.quality=t}},ZG=[d.uo,Vo.bI,d.vy],HG=class extends fr{Kgt(t){const i=this.llt.Pot;for(const s of i.Ht.nat)if(i.Jut.Kut(t,s))return s}kn(){this.Vo(),this.SL.mn(ZG,this.qgt)}constructor(t,i){super(),this.SL=void 0,this.llt=void 0,this.jgt=void 0,this.qgt=t=>{const i=this.jgt,s=this.Kgt(t.currentTime)||this.llt.Eot;s&&i!==s&&(this.jgt=s,s.Tot&&this.So(new mn(s.Tot,null==s?void 0:s.Ca,null==i?void 0:i.Ca)))},this.SL=t,this.SL.wn(ZG,this.qgt),this.llt=i}};function zG(t,i,s){const e=new oT(xh(t),new J),n=dh.fN(e,Ci.LP);if(!n)return;const r=dh.oN(n.hk),h=me(r,t=>t.Kp===Ci.FP),o=me(r,t=>t.Kp===Ci.OC);if(!h)return;const a=dh.fN(h.hk,Ci.WP);if(!a)return;const u=dh.fN(a.hk,Ci.ZP);if(!u)return;const c=dh.fN(u.hk,Ci.HP);if(!c)return;const d=dh.oN(c.hk),l=me(d,t=>t.Kp===Ci.zP);if(!l)return;const f=dh.wN(l.hk,Ci.zP,!1),v=new oT(xh(f.hk),new J);v.nN(4);const _=dh.oN(v),g=[];for(const t of _){if(t.Kp===Ci.kC||t.Kp===Ci.EC)return;t.Kp===Ci.jP?g.push({Qgt:t,Jgt:Ci.EC}):t.Kp===Ci.pC&&g.push({Qgt:t,Jgt:Ci.kC})}if(!function(t,i){return void 0===t&&void 0!==i&&i.length>0}(o,i)&&0===g.length)return;let m=tc(t);const p=me(r,t=>t.Kp===Ci.KP),w=p?dh.fN(p.hk,Ci.qP):void 0,y=w?function(t){const i=t.hk.My();return i.nN(4),i.nN(4),i.QC()}(w):1,b=me(d,t=>t.Kp===Ci.YP);b&&function(t,i,s){const e=Bc(xh(t),i),n=dh.lN(e,new J),r=n.hk;r.nN(4);const h=r.QC();for(let t=0;t<h;t++){r.nN(4),r.nN(4);const t=r.KC.My(),i=r.QC();Ym(r.hk,t,i+s)}}(m,b,g.length),w&&function(t,i,s){const e=Bc(xh(t),i),n=dh.lN(e,new J),r=n.hk;r.nN(4),r.nN(4),Ym(r.hk,r.KC,s)}(m,w,1),m=function(t,i,s,e){if(s||!e)return t;let n=t;for(const t of e)n=YG(n,i,new j(t));return n}(m,n,o,i);const A=[n,h,a,u,c,l];for(let t=g.length-1;t>=0;t--){const i=g[t];m=KG(m,i.Qgt,l,A,i.Jgt,s)}return{$gt:m,tmt:{imt:g.length,NB:y}}}function YG(t,i,s){const e=vp(t,s,i.hk.hk.byteOffset+i.hk.hk.byteLength);return qG(Bc(xh(e),i),s.byteLength),e}function KG(t,i,s,e,n,r){const h=function(t,i,s){0;const e=t.hk.hk,n=tX(),r=new j(e.byteLength+n.byteLength),h=xh(r);r.set(re(e),0),qG(h,n.byteLength),Jm(h,new J(eX),i),r.set(n,e.byteLength),Jm(h,new J(e.byteLength+iX),t.Kp),s&&Gm(h,new J(e.byteLength+sX),s);return r}(i,n,r),o=vp(t,h,i.hk.hk.byteOffset),a=xh(o);!function(t,i){const s=dh.lN(t,new J),e=dh.wN(s.hk,Ci.zP,!1),n=xh(e.hk),r=n.getUint32(0);n.setUint32(0,r+i)}(Bc(a,s),1);for(const t of e)qG(Bc(a,t),h.byteLength);return o}function Bc(t,i){const s=i.hk.hk.byteOffset;return wu(t,s,s+i.hk.hk.byteLength)}function qG(t,i){const s=new J,e=ds(t,s);if(0===e);else if(1===e){s.Dy(4);const e=et(t,s.My());Km(t,s,e.add(i))}else s.By(0),Ym(t,s,e+i)}r();var jG=class extends Pu{start(t){this.qQ=t}transform(t){this.y$(t),this.smt()}flush(){this.A$(),this.smt()}P$(t){return t===Ci.RC}N$(t){let i=tc(re(t.hk.hk));const s=dh.lN(xh(i),new J);i=QG(i,s,this.emt),this.nmt.push(i)}B$(t){this.nmt.push(t)}smt(){for(const t of function(t){if(t.length<2)return t;const i=[];let{buffer:s,byteOffset:e,byteLength:n}=t[0];for(let r=1;r<t.length;r++){const h=t[r];s===h.buffer&&e+n===h.byteOffset?n+=h.byteLength:(i.push(new j(s,e,n)),({buffer:s,byteOffset:e,byteLength:n}=h))}return i.push(new j(s,e,n)),i}(this.nmt))this.qQ.enqueue(t);Lr(this.nmt)}constructor(t){super(),this.emt=void 0,this.qQ=void 0,this.nmt=[],this.emt=t}};function QG(t,i,s){let e=t;const n=dh.oN(i.hk);for(let t=n.length-1;t>=0;t--){const r=n[t];r.Kp===Ci.IC&&(e=JG(e,r,i,s))}return e}function JG(t,i,s,e){const n=Bc(xh(t),i),r=dh.lN(n,new J),h=dh.oN(r.hk),o=me(h,t=>t.Kp===Ci.NC);if(!o)return t;const a=o.hk,u=a.KC.My(),c=a.QC(),{flags:d}=tl(c);a.nN(4),d.Ly(rT.BASE_DATA_OFFSET_PRESENT)&&a.nN(8);const l=a.KC.My();if(d.Ly(rT.SAMPLE_DESCRIPTION_INDEX_PRESENT)){const i=ds(a.hk,l);return Ym(a.hk,a.KC,i+e.imt),t}{Ym(a.hk,u,c|rT.SAMPLE_DESCRIPTION_INDEX_PRESENT);const n=new j(4);xh(n).setUint32(0,e.NB+e.imt);const r=a.hk.byteOffset+l.ac;for(const t of h.filter(t=>t.Kp===Ci.DC))$G(t,n.byteLength);for(const e of[o,i,s])qG(Bc(xh(t),e),n.byteLength);return vp(t,n,r)}}function $G(t,i){const s=t.hk,e=s.QC(),{flags:n}=tl(e);if(s.nN(4),n.Ly(hT.DATA_OFFSET_PRESENT)){const t=s.My().QC();Ym(s.hk,s.KC,t+i)}}var tX=Eu(()=>new j([0,0,0,80,115,105,110,102,0,0,0,12,102,114,109,97,0,0,0,0,0,0,0,20,115,99,104,109,0,0,0,0,99,101,110,99,0,1,0,0,0,0,0,40,115,99,104,105,0,0,0,32,116,101,110,99,0,0,0,0,0,0,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])),iX=16,sX=64,eX=4,nX=[sa.ma,d.$w,d.ey,d.uy,d.Aw],rX=class extends fr{get hmt(){return this.clt}get o(){return this.rS}get N3(){return this.D3}get nt(){return this.omt}get glt(){return function(t){const i=29.97,s=1024,e=44100;return t===Mo.Ck?e/s:i}(this.D3)}get flt(){return 1/this.glt}get Rt(){return Boolean(this.clt&&this.clt.Rt)}get QJ(){const t=this.llt?this.llt.Pot.QJ.Xut:ZT.tL();return this.amt().LM(t)}get IR(){let t=this.umt();const i=this.cmt;return void 0!==i&&t.PM().Cr(i)&&(t=t.LM(ZT.JM(i))),t}get Fut(){return eW(this.umt(),this.QJ.LM(this.dmt)).MM(2*this.flt)}get dmt(){const t=this.cmt;if(t&&isFinite(t)){const i=this.lmt.An;if(isFinite(i)&&t<i)return new ZT([t,i],[!1,!0])}return ZT.tL()}get kx(){const t=this.clt;if(!t)return ZT.JM(0);const i=t.Dut.ylt,s=t.Dut.blt;if(void 0===s||void 0===i)return ZT.JM(0);const e=s;let n=i>=t.Dut.pct.An?_.max(i,this.An):i;return n=_.max(e,n),ZT.$M(e,n).PM()}get jG(){return this.Fut.jM(this.OR)}get Gut(){return this.lmt.Gut}get OR(){return this.SL.OR}get Tn(){return this.clt?this.clt.Dut.pct.Tn:NaN}get An(){const t=this.fmt(),i=this.cmt;return void 0===t?NaN:void 0!==i?i:t}fmt(){var t;return null==(t=this.clt)?void 0:t.Dut.pct.An}get Mi(){return this.lmt.Mi}get Ti(){return this.lmt.Ti}get vmt(){return this.cmt}Xot(){return void 0!==this.llt&&this.llt.Xot}Uut(){if(void 0===this.cmt)return!1;const t=this.umt().PM(),i=t.VM(this.cmt);return!(i<0)&&t.Tn(i)!==this.cmt}P3(){const t=this.lmt.Gut,i=this.umt().Mn(t);this.cmt=i.V>0?i.An(i.V-1):0;const s=t.An(0);isFinite(s)&&this.cmt<s&&this.$J(this.cmt,s),this._mt()}async Ldt(t,i,s,e){const n=s.Jrt.bV,r=this.gmt(t,i,s,n,e),h=this.mmt(t,i,s,n,e),[o]=await vr([h,r]);return o}async gmt(t,i,s,e,n){if(!io(s.iK))return;let r;if(t.Kp===Vt.NT){const i=t.hk.jat(),s=await i.WT(n);r=new j(s)}else r=new j(t.hk.xht);const h=[];if(void 0!==this.pmt&&(this.pmt.Ldt(r,i.kO,e),h.push(this.pmt)),void 0!==this.wmt){const t=s.mct(i);this.wmt.Ldt(r,i.kO,i.EO,e,s.Tot,t),h.push(this.wmt)}ix(this.IR,h)}async mmt(t,i,s,e,n){var r;let h;if(Ko(n),t.Kp===Vt.NT){let i=t.hk.UT;this.ymt&&(i=function(t,i){return t.pipeThrough(new Sa(new jG(i)))}(i,this.ymt)),h={Kp:Vt.NT,hk:i}}else{let i=new j(t.hk.xht);this.ymt&&(i=function(t,i){let s=tc(t);const e=new oT(xh(s),new J),n=dh.oN(e);for(let t=n.length-1;t>=0;t--){const e=n[t];e.Kp===Ci.RC&&(s=QG(s,e,i))}return s}(i,this.ymt)),h={Kp:Vt.fJ,hk:i}}const o={kst:i.kO,ct:i.ct,bV:e,t2:null==(r=s.Tot)?void 0:r.qI},a=this.Srt.IR;await this.bmt(),await this.Srt.W2(h,o,n);return function(t,i,s,e){let n,r,h=i.FM(t.PM());h=h.FM(s.FM(i)),!1;0===h.V?(n=e.EO,r=n):(n=h.Tn(0),r=h.An(0));return{Tdt:n,kdt:r}}(a,this.Srt.IR,this.Srt.B3,i)}async jrt(t,i,s){var e,n;Ko(s),this.wmt&&this.wmt.jrt(new j(t.xht));let r=new j(t.xht);if(this.Amt(i)){const t=this.lmt.Smt;let i,s=[];t&&(s=vl(t.Tmt,t=>t.MG),i=t.kmt.dU?Xe(t.kmt.dU):void 0);const e=zG(r,s,i);e?(this.ymt=e.tmt,r=e.$gt):this.ymt=void 0}if((null==(e=this.Srt)?void 0:e.Cd)&&this.Srt.Cd.GT!==i.GT){const t={GT:i.GT};this.Srt.SJ(t)&&(await this.Srt.kJ(t),Ko(s))}const h={Kp:Vt.fJ,hk:r};await this.bmt(),await this.Srt.X2(h,{t2:null==(n=i.Tot)?void 0:n.qI},s)}Mdt(t,i,s){return this.Srt.vS(t,i,s)}$J(t,i){this.Srt.O3(t,i)}t$(t,i){this.Srt.F3(t,i)}umt(){return this.Srt?this.Srt.IR:ZT.tL()}amt(){return this.Srt?this.Srt.B3:ZT.tL()}Emt(){return this.Srt?this.Srt.vS(0,1/0):Promise.resolve()}Rmt(){return this.Srt&&(this.Srt.mn(Ws.dJ,this.Rs),this.Srt=void 0),Promise.resolve()}async xmt(t){var i;const s=Rr.qct(null!=(i=t.tlt)?i:t.nat,this.Vct).iK;this.Srt||(this.Srt=this.lmt.Imt(s),this.Srt.wn(Ws.dJ,this.Rs),this.Yct=new vU(this.Srt)),await this.bmt()}Un(t,i){const s=ui.nm([i]);this.hW.Jg(),this.hW=s;const e=this.Pmt(t,this.Cmt,s.jg);return this.Cmt=e,e}Nmt(t){if(Ft(this.Dmt,hr.CEA608))return;const i=t.Dut.Udt;if(function(t){return t.some(t=>t.w9===UG||t.w9===GG)}(i)){this.wmt=new LG(this.JV);const t=function(t){const i=[];for(const s of t)if(s.w9===UG){const t=vF(s.XE);for(const s of t)i.push(s)}else if(s.w9===GG){const t=VG(s.XE);for(const s of t)if(s.eit<=4){const t=WG[s.eit];i.push(Jr({},s,{eit:t}))}}return i}(i);for(const i of t)this.wmt.Bgt(i);this.omt.UG(this.wmt.Z)}}async Pmt(t,i,s){Ko(s),i&&await i.catch(ol),this.clt===t&&this.Bmt||(await this.Mmt(),Ko(s),await this.Emt(),Ko(s),t&&await this.nW(t))}async Mmt(){const t=this.clt;this.clt=void 0,this.Bmt=!1,this.cmt=void 0,t&&(t.mn(M.xI,this.Lmt),t.olt(!1),t.mn(M.NO_QUALITY,this.Rs)),this.Omt&&(this.Omt.kn(),this.Omt=void 0),this.llt&&(await this.llt.kn(),this.llt=void 0),this.wmt&&(this.omt.ZG(this.wmt.Z),await this.wmt.kn())}async nW(t){this.clt=t,this.Nmt(t),t.wn(M.xI,this.Lmt),t.wn(M.NO_QUALITY,this.Rs),await this.xmt(t),this.llt=this.Fmt(t),this.llt.wn(nX,this.Rs),this.llt.wn("kot",this._mt),this.llt.Not=t.tlt,this.Omt=new HG(this.SL,this.llt),this.Omt.wn(M.EI,this.qdt),t.olt(!0),this.Bmt=!0}Fmt(t){return new fU(this,this.SL,this.SL,this.rW,this.kZ,this.Vdt,this.iut,this.Hct,this.Vct,this.Yct,this.vdt,this.lX).Rst(t)}async hr(t){this.hW.Jg(),this.Cmt&&(await this.Cmt.catch(ol),this.Cmt=void 0),await this.Mmt(),t||await this.Emt(),await this.Rmt()}async Vmt(){await this.Mmt()}Ydt(t){var i;null==(i=this.hmt)||i.Ydt(t)}async Zdt(t,i){var s,e;await this.jot(),null==(s=this.hmt)||s.Zdt(i);const n=null==(e=this.llt)?void 0:e.Pot.Jut.Hut(t);if(n&&n.V>0)for(let t=0;t<n.V;t++){var r;await(null==(r=this.Srt)?void 0:r.vS(n.Tn(t),n.An(t)))}await this.Jot()}Wmt(t){const i=t.Ht.tlt;if(void 0===i)return this.Umt(t);if(i.some(t=>this.Yct.SJ(t)))return this.Umt(t);this.So(new sh("Gmt"))}Umt(t){this.llt&&this.clt&&this.clt===t.Ht&&(this.llt.Not=this.clt.tlt)}async jot(t){this.llt&&await this.llt.jot(t)}async Jot(t){this.llt&&await this.llt.Jot(t)}Kj(){const t=this.IR.QM;return this.kZ.Kj(t)}bmt(){const t=this.lmt.Gut,i=_.max(0,t.Tn(0)-.1),s=t.An(0)+.01;return this.Srt.n3(i,s)}Amt(t){if(!io(t.iK))return!1;if(this.lmt.g9)return!0;return void 0!==this.lmt.Smt}$ot(t){if(!LT(this.D3))return;const i=this.llt,s=t.llt;void 0!==i&&void 0!==s&&i.$ot(s,this.Tn,this.An)}async kn(t){this.Vo();try{await this.hr(t),await this.Vmt()}catch(t){}}constructor(t,i,s,e,n,r,h,o,a,u,c,d,l){super(),this.rS=void 0,this.D3=void 0,this.clt=void 0,this.llt=void 0,this.Hct=void 0,this.Vct=void 0,this.Bmt=!1,this.hW=new ui,this.Cmt=void 0,this.Omt=void 0,this.cmt=void 0,this.Srt=void 0,this.Yct=new _U,this.ymt=void 0,this.lmt=void 0,this.SL=void 0,this.rW=void 0,this.kZ=void 0,this.pmt=void 0,this.wmt=void 0,this.omt=new Ka([]),this.JV=void 0,this.iut=void 0,this.vdt=void 0,this.Dmt=void 0,this.Vdt=void 0,this.lX=void 0,this._mt=()=>{!this.Xot()&&this.Uut()&&this.lmt._mt()},this.qdt=t=>{this.clt.qdt(t),this.So(new CU(t.Cut,t.Ygt))},this.Lmt=t=>{this.Wmt(t)},this.rS=function(){const t=hX;return hX+=1,t}(),this.D3=t,this.rW=e,this.kZ=n,this.lmt=i,this.SL=s,this.iut=r,this.JV=h,this.pmt=o,this.Hct=a,this.Vct=a?UT(t,a):void 0,this.vdt=u,this.Dmt=c,this.Vdt=d,this.lX=l}};var hX=0;var oX=class extends fr{Fj(t,i){return this.Xmt(t,i)}async Xmt(t,i){for(const i of t)this.Zmt(i);await this.Un(i);for(const t of this.zmt.Hmt)t.Kp===Mo.DT&&(t.nat&&0!==t.nat.length?await this.Ymt.nW(t):this.So(new xU("No supported representation found in the AdaptationSet with mimetype : "+t.Kp)))}get qI(){return this._O}get ct(){return this.SL.ct}Kmt(t){return new rX(t,this,this.SL,this.rW,this.kZ,this.iut,this.JV,this.pmt,this.qmt,this.vdt,this.Dmt,this.Vdt,this.lX)}Xot(){return this.Dlt.some(t=>t.Xot())}Uut(){return 0!==this.Dlt.length&&this.Dlt.every(t=>t.Uut())}_mt(){this.jmt()&&this.So(new PU)}Imt(t){if(I(t)){if(this.u3.Y3)return this.u3.Y3}else if(rt(t)&&this.u3.K3)return this.u3.K3;throw new m("Cannot allocate source buffer for mime type "+t)}Qmt(t){t.wn([sa.ma,d.qw,d.$w,d.ey,d.uy,d.Aw],this.Rs),t.wn(Ws.dJ,this.Jmt),t.wn("Gmt",this.Rs)}get Rt(){return this.Dlt.some(t=>t.Rt)}async $mt(t){await Promise.all(this.Dlt.map(i=>i.kn(t))),Lr(this.Dlt)}get ht(){return this.qL}get IR(){if(0===this.Dlt.length)return ZT.tL();const t=this.Dlt.map(t=>t.IR);let i=ZT.$M(0,1/0);for(const s of t)i=i.Mn(s);if(0===i.V)return i;if(this.Uut()){const t=i.Mn(this.Gut);if(0===t.V)return i;const s=t.An(t.V-1);let e=0;for(const t of this.Dlt)e=_.max(e,t.vmt);s<=e&&(i=i.LM(new ZT([s,e],[!0,!0])))}return i}get g9(){return this.SL.g9}get OR(){return this.SL.OR}get Smt(){return this.tpt}get An(){if(this.ipt){const t=this.ct;if(!S(t)&&t!==ru)return t}if(!this.Dlt.length)return NaN;let t=0;for(const i of this.Dlt)t=_.max(t,i.An);return t}get ipt(){const t=this.zmt.xdt;if(t.Kp===Me.yW)return!1;const i=t.spt;return 0!==i.length&&this.zmt===i[i.length-1]}get kx(){if(!this.Dlt.length)return ZT.tL();let t=ZT.iL();for(const i of this.Dlt)t=t.Mn(i.kx);if(t.V>0&&this.ipt&&isFinite(this.ct)){const i=this.ct,s=t.An(t.V-1);i>s&&(t=t.LM(ZT.$M(s,i).PM()))}return t}get Mc(){return this.zmt}get nt(){return this.Gl}get rt(){return this.JL}get Ti(){return this.ju.Ti}get Mi(){return this.ju.Mi}get jG(){const t=this.OR,i=this.IR,s=i.VM(t);if(-1!==s)return{Tn:i.Tn(s),An:i.An(s)}}get Gut(){const t=this.zmt.Tn,i=this.ipt?1/0:this.zmt.An;return ZT.$M(t,i)}jmt(){if(this.Xot())return!1;if(!this.Uut())return!1;const t=this.IR;if(0===t.V)return!1;const i=this.OR;if(this.ipt)return t.Tn(t.V-1)<=i;{const s=t.Mn(this.Gut);if(0===s.V)return!0;const e=s.Tn(s.V-1),n=s.An(s.V-1)+.1;return e<=i&&i<=n}}get ept(){return this.npt}async jot(t){this.npt||(this.npt=!0,await Promise.all(this.Dlt.map(i=>i.jot(t))))}async Jot(t){this.npt&&(this.npt=!1,await Promise.all(this.Dlt.map(i=>i.Jot(t))))}async kn(t){this.SL.mn(d.gy,this.rpt),this.SL.mn(d.Ew,this.hpt),this.SL.mn(d.LICENSE_REQUEST_GENERATED,this.opt),this.Vo(),this.zmt.mn(mo.bot,this.Rs),this.upt.Jg(),this.Cmt&&(await this.Cmt.catch(ol),this.Cmt=void 0),await this.$mt(t),await this.Ymt.kn(),this.qL.kn(),this.JL.kn(),this.Gl.kn(),this.cpt()}Zmt(t){this.dpt.push(t),t.wn("lpt",this.fpt);const i=t.Kp===Mo.Ck?this.qL:this.JL;for(const s of t.Z)i.tt(s)}vpt(t){const i=t.Kp===Mo.Ck?this.qL:this.JL;for(const s of t.Z)i.it(s),s.kn();t.kn(),is(this.dpt,t)}cpt(){for(let t=this.dpt.length-1;t>=0;t--)this.vpt(this.dpt[t])}get _pt(){return this.dpt.map(t=>t.hmt).filter(Y)}get gpt(){return this.Dlt.map(t=>t.hmt).filter(Y)}Un(t,i){return this.upt.Jg(),this.upt=ui.nm([i]),this.Cmt=Ce(this.dE(t,this.Cmt,this.upt.jg),this.upt).catch(this.mpt),this.Cmt}async dE(t,i,s){i&&await i.catch(ol),Ko(s);const e=[],n=this.Dlt.slice(),r=t.slice();Lr(this.Dlt);for(const t of n){const i=t.hmt;i&&Ft(r,i)?(this.Dlt.push(t),e.push(t.Un(i,s)),is(r,i)):(this.Gl.ZG(t.nt),await t.kn(),Ko(s))}for(const t of r){const i=this.Kmt(t.Mot);this.Gl.UG(i.nt),this.Dlt.push(i),this.Qmt(i),e.push(i.Un(t,s))}await Promise.all(e)}async kJ(t,i,s){this.u3!==s&&(this.u3=s,await this.$mt(!1)),await this.Un(t),this.tpt=i}async ppt(t){for(const i of this.Dlt){const s=i.hmt;if(void 0!==s)for(const e of s.Dut.nat){(e.CG||[]).some(i=>i.dU&&L(Rs(t),Xe(i.dU)))&&!e.hlt&&(e.hlt=!0,await i.Zdt(e,e.Tot),this.So(new SL(new Q(Ne.CONTENT_PROTECTION_OUTPUT_RESTRICTED,"Content unavailable due to DRM restrictions"))))}}}async wpt(t){for(const i of this.Dlt){const s=i.hmt;if(void 0!==s)for(const e of s.nat){const s=e.CG,n=e.Tot;if(void 0===s||0===s.length||void 0===n)continue;if(!s.some(t=>Ft(e.ypt,t)))continue;const r=this.bpt(s,t.Sy);n.oet!==r&&(r?i.Ydt(n):await i.Zdt(e,n))}}}bpt(t,i){let s=!1;const e=t.reduce((t,i)=>!i.dU||Ft(t,i.dU)?t:[...t,i.dU],[]);return 0===e.length||(i.Xy((n,r)=>{if("usable"!==n)return;(t.some(t=>t.dU&&L(Rs(r),Xe(t.dU)))||lp(r,qc)&&1===e.length&&1===i.Vy)&&(s=!0)}),s)}$ot(t){if(void 0===t)return;const i=t.zmt;if(this.zmt.Apt===i||this.zmt.Spt===i)for(const i of this.Dlt){const s=me(t.Dlt,t=>t.N3===i.N3);void 0!==s&&i.$ot(s)}}get Tpt(){return this.dpt}constructor(t,i,s,e,n,r,h,o,a,u,c,l,f,v){var _,g;super(),this._O=void 0,this.qL=new O,this.JL=new O,this.Gl=void 0,this.JV=void 0,this.Ymt=void 0,this.rW=void 0,this.kZ=void 0,this.iut=void 0,this.SL=void 0,this.zmt=void 0,this.dpt=[],this.upt=new ui,this.npt=!0,this.Dlt=[],this.tpt=void 0,this.lX=void 0,this.Cmt=void 0,this.vdt=void 0,this.Dmt=void 0,this.u3=void 0,this.Vdt=void 0,this.ju=void 0,this.pmt=void 0,this.qmt=void 0,this.Jmt=Hh(()=>{this.So(new Ut(this.OR))},350),this.fpt=t=>{const i=t.kpt.hmt;if(i)for(const t of this.dpt){var s;t.hmt&&t.hmt!==i&&t.Kp===(null==(s=i.jdt)?void 0:s.Kp)&&(t.mn("lpt",this.fpt),t.hmt.Rt=!1,t.wn("lpt",this.fpt))}this.Rs(t)},this.mpt=t=>{hc(t)||this.So(new $e(vb(t,Ne.MEDIA_LOAD_ERROR)))},this.rpt=t=>{const i=t.X6;i&&this.ppt(i).catch(this.mpt)},this.Ept=t=>{this.wpt(t).catch(this.mpt)},this.opt=t=>{for(const i of this.Dlt){const s=i.hmt;if(void 0!==s)for(const i of s.nat){const s=i.CG;if(void 0===s||0===s.length)continue;const e=t.Ty;s.filter(t=>t.y9&&L(new j(e),new j(t.y9))).forEach(t=>{i.Rpt(t)})}}},this.hpt=t=>{const i=t.X6;if(i)for(const t of this.gpt)for(const s of t.Dut.nat){const e=(s.CG||[]).some(t=>t.dU&&L(Rs(i),Xe(t.dU)));s.hlt&&e&&(s.hlt=!1,s.Tot&&t.Ydt(s.Tot))}},this.rW=s,this.kZ=e,this.iut=n,this.SL=t,this._O=ai(),this.dpt=[],this.zmt=h,this.tpt=o,this.lX=v,this.JV=u,this.Ymt=new RU(t,s,e,n,u,null==(g=null==r||null==(_=r.dash)?void 0:_.segmentRelativeVttTiming)||g),this.Gl=new Ka([this.Ymt.nt]),this.vdt=l,this.Dmt=f,this.zmt.wn(mo.bot,this.Rs),this.ju=a,this.u3=i,this.Vdt=r.lowLatency,this.pmt=c,this.qmt=r.abr,this.SL.wn(d.gy,this.rpt),this.SL.wn(d.Ew,this.hpt),this.SL.wn(d.LICENSE_REQUEST_GENERATED,this.opt)}};r(),r(),r();var aX=/^P(?:(\d+)Y)?(?:(\d+)M)?(?:(\d+)D)?(?:T(?:(\d+)H)?(?:(\d+)M)?(?:(\d*\.?\d*)S)?)?$/,uX=class t{static AN(i){const s=i.match(aX);if(!s)throw new m("The given value could not be parsed as a valid DateTimeInterval");const e=Number(s[1])||0,n=Number(s[2])||0,r=Number(s[3])||0,h=Number(s[4])||0,o=Number(s[5])||0,a=Number(s[6])||0;return new t(31536e3*e+2592e3*n+86400*r+3600*h+60*o+a)}get tft(){return Xa.iV(this.xpt,1e3)}Ipt(){return this.xpt}Ppt(){return 1e3*this.xpt}constructor(t){this.xpt=void 0,this.xpt=t}};r();var cX=function(t){return t.Cpt="progressive",t.Npt="interlaced",t.gk="unknown",t}({});r();var dX=class{tF(){return this.Dpt/this.Bpt}constructor(t,i){this.Dpt=void 0,this.Bpt=void 0,this.Dpt=t,this.Bpt=i}};r();var lX=1886614376;function fX(t){const i=Xe(Mg),s=t.byteLength,e=12+i.length+4+s,n=new j(e),r=xh(n),h=new J;return Ym(r,h,e),Ym(r,h,lX),Ym(r,h,0),Gm(r,h,i),Ym(r,h,s),Gm(r,h,new j(t)),n}var vX=/^(?:true|false)$/i,_X=/^(-?)(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(?:Z|([+-])(\d{2}):(\d{2}))?$/;function kn(t){if(void 0!==t)return uX.AN(t)}function gX(t){if(void 0===t)return;const i=t.match(_X);if(!i)throw new m("The given value could not be parsed as a valid Date");const[,s,e,n,r,h,o,a,u,c,d,l]=i,f=("-"===s?-1:1)*Number(e),v=Number(n)-1,g=Number(r),p=Number(h);let w=Number(o);const y=Number(a),b=Number("0."+(u||"")),A=_.round(1e3*b);if(c){w-=("-"===c?-1:1)*(60*Number(d)+Number(l))}const T=new Date(Date.UTC(f,v,g,p,w,y,A));if(S(T.getTime()))throw new m("The given value could not be parsed as a valid Date");return T}function mX(t){if(!t)return;const i=/(\d+)-(\d+)/.exec(t);return i?[os(i[1]),os(i[2])]:void 0}function pX(t){if(void 0!==t){if(!S(Number(t)))try{return mh.fromString(t,!0)}catch(t){}throw new m("The given value could not be parsed as a valid unsigned long")}}function os(t){if(void 0===t)return;const i=Number(t);if(!S(i))return i;throw new m("The given value could not be parsed as a valid Number")}function wX(t){if(void 0===t)return;const i=t.split("/"),s=Number(i[0]),e=Number(i[1]||1);if(!S(s)&&!S(e))return new dX(s,e);throw new m("The given value could not be parsed as a valid frame rate")}function Tn(t){if(void 0!==t){if(vX.test(t))return"true"===t.toLowerCase();if(!S(x(t)))return Boolean(x(t));throw new m("The given value could not be parsed as a valid Boolean.")}}function yX(t){return{Yu:t.iR,Mpt:Tn(t.sR("availabilityTimeComplete")),Lpt:os(t.sR("availabilityTimeOffset"))}}function bX(t){return t.map(yX)}function AX(t){const i=NX(t),s=function(t,i,s,e){let n=t.eR(s,i);return void 0===n&&(n=t.sR(e+":"+i)),n}(t,"default_KID","urn:mpeg:cenc:2013","cenc");let e;const n=AR(t,"pssh","urn:mpeg:cenc:2013","cenc")[0];if(void 0!==n&&(e=_p(n.iR)),!e){const i=AR(t,"pro","urn:microsoft:playready","mspr")[0];void 0!==i&&(e=function(t){const i=_p(t.iR);return fX(i)}(i))}return{dU:s,y9:e,w9:i.w9,XE:i.XE}}function SX(t){return{Opt:t.sR("sourceURL"),Aat:mX(t.sR("range"))}}function TX(t,i){const s=t.sR("d"),e=t.sR("t"),n=os(t.sR("r"));i.push({ct:s,kO:e,Fpt:n})}function kX(t){return{hut:t.sR("index"),Vpt:mX(t.sR("indexRange")),YN:t.sR("media"),Wpt:mX(t.sR("mediaRange"))}}function EX(t){const i=xX(t),s=function(t){const i=t.map(kX);return i.length>0?i:void 0}(t.qE("SegmentURL"));return Jr({},i,{Upt:s,Gpt:t.sR("xlink:href"),Xpt:t.sR("xlink:actuate")})}function RX(t){const i=Tn(t.sR("availabilityTimeComplete")),s=os(t.sR("availabilityTimeOffset")),e=mX(t.sR("indexRange")),n=Tn(t.sR("indexRangeExact")),r=t.qE("Initialization");if(r.length>1)throw new m("The provided MPEG-DASH document's "+t.jE+" element can not have more than one Initialization element.");const h=1===r.length?SX(r[0]):void 0,o=pX(t.sR("presentationTimeOffset")),a=t.qE("RepresentationIndex");if(a.length>1)throw new m("The provided MPEG-DASH document's "+t.jE+" element can not have more than one RepresentationIndex element.");return{Mpt:i,Lpt:s,Vpt:e,Zpt:n,Hpt:h,zpt:o,Ypt:1===a.length?SX(a[0]):void 0,Kpt:kn(t.sR("timeShiftBufferDepth")),UN:os(t.sR("timescale"))}}function xX(t){const i=RX(t),s=t.qE("BitstreamSwitching"),e=s.length>0?SX(s[0]):void 0,n=os(t.sR("duration")),r=t.qE("SegmentTimeline");if(r.length>1)throw new m("The provided MPEG-DASH document's "+t.jE+" element can not have more than one SegmentTimeline element.");const h=1===r.length?function(t){const i=[],s=t.qE("S");for(const t of s)TX(t,i);return i}(r[0]):void 0;return Jr({},i,{qpt:e,ct:n,Jrt:h,jpt:os(t.sR("startNumber")),Qpt:os(t.sR("endNumber"))})}function IX(t){return{Jpt:function(t){if(!t)return;const i=t.split(/\s/);return i.length>1?(i.length=2,i.map(os)):1===i.length?i.map(os)[0]:void 0}(t.sR("audioSamplingRate")),lrt:t.sR("codecs"),$pt:Tn(t.sR("codingDependency")),CG:function(t){if(0!==t.length)return t.map(AX)}(t.qE("ContentProtection")),twt:function(t){return t.map(DX)}(t.qE("EssentialProperty")),iwt:function(t){return t.map(BX)}(t.qE("SupplementalProperty")),glt:wX(t.sR("frameRate")),Mi:os(t.sR("height")),swt:os(t.sR("maxPlayoutRate")),ewt:os(t.sR("maximumSAPPeriod")),iK:t.sR("mimeType"),nwt:t.sR("profiles"),rwt:t.sR("sar"),hwt:function(t){switch(t){case cX.Cpt:case cX.Npt:case cX.gk:return t;default:return}}(t.sR("scanType")),owt:t.sR("segmentProfiles"),awt:os(t.sR("startWithSAP")),Ti:os(t.sR("width"))}}function PX(t){const i=bX(t.qE("BaseURL")),s=t.qE("SegmentBase");if(s.length>1)throw new m("The provided MPEG-DASH document's "+t.VE+" element can not have more than one SegmentBase element.");const e=1===s.length?RX(s[0]):void 0,n=function(t){const i=t.map(EX);return i.length>0?i:void 0}(t.qE("SegmentList")),r=t.qE("SegmentTemplate");if(r.length>1)throw new m("The provided MPEG-DASH document's "+t.VE+" element can not have more than one SegmentTemplate element.");const h=1===r.length?function(t){return Jr({},xX(t),{uwt:t.sR("bitstreamSwitching"),cwt:t.sR("index"),dwt:t.sR("initialization"),lwt:t.sR("media")})}(r[0]):void 0;return{fwt:i,vwt:e,_wt:n,gwt:h}}function CX(t){const i=IX(t),s=PX(t),e=os(t.sR("bandwidth")),n=t.sR("dependencyId"),r=t.sR("id"),h=t.sR("mediaStreamStructureId"),o=os(t.sR("qualityRanking"));if(t.qE("SegmentBase").length>1)throw new m("The provided MPEG-DASH document's Representation element can not have more than one SegmentBase element.");return Jr({},i,s,{EG:e,mwt:n,o:r,pwt:h,wwt:o})}function NX(t){return{w9:t.sR("schemeIdUri"),XE:t.sR("value")}}function DX(t){return NX(t)}function BX(t){return NX(t)}function MX(t){return NX(t)}function LX(t){return NX(t)}function OX(t){var i;const s=IX(t),e=PX(t),n=function(t){return t.map(LX)}(t.qE("Accessibility")),r=Tn(t.sR("bitstreamSwitching")),h=t.sR("contentType"),o=os(t.sR("group")),a=os(t.sR("id")),u=(null==(i=t.qE("Label")[0])?void 0:i.iR)||"",c=t.sR("lang"),d=os(t.sR("maxBandwidth")),l=wX(t.sR("maxFrameRate")),f=os(t.sR("maxHeight")),v=os(t.sR("maxWidth")),_=os(t.sR("minBandwidth")),g=wX(t.sR("minFrameRate")),p=os(t.sR("minHeight")),w=os(t.sR("minWidth")),y=t.sR("par"),b=function(t){return t.map(CX)}(t.qE("Representation"));if(0===b.length)throw new m("The provided MPEG-DASH document has an AdaptationSet with no valid Representation's");const A=function(t){return t.map(MX)}(t.qE("Role")),S=Tn(t.sR("segmentAlignment"))||!1,T=os(t.sR("selectionPriority")),k=T||1,E=Tn(t.sR("subsegmentAlignment"))||!1;let R;try{R=os(t.sR("subsegmentStartsWithSAP"))}catch(t){}return Jr({},s,e,{Udt:n,qpt:r,GT:h,jdt:o,o:a,Th:u,bs:c,ywt:d,bwt:l,Awt:f,Swt:v,Twt:_,kwt:g,Ewt:p,Rwt:w,xwt:y,nat:b,Elt:A,Iwt:S,qX:k,Pwt:E,Cwt:R,Nwt:t.sR("xlink:actuate")||"onRequest",Dwt:t.sR("xlink:href")})}function FX(t){const i=pX(t.sR("presentationTime"))||mh.ZERO,s=pX(t.sR("duration")),e=os(t.sR("id")),n=function(t){const i=t.tR,s={};for(let t=0;t<i.length;t++)s[i[t].l]=i[t].XE;return s}(t),r=t.iR;return{$B:i,ct:s,o:e,tR:n,hk:""!==r.trim()?r:t.sR("messageData")||""}}function VX(t){return{Dwt:t.sR("xlink:href"),Nwt:t.sR("xlink:actuate"),w9:t.sR("schemeIdUri"),XE:t.sR("value"),UN:os(t.sR("timescale")),zpt:pX(t.sR("presentationTimeOffset")),sK:t.qE("Event").map(FX)}}function WX(t){const i=PX(t),s=t.qE("AssetIdentifier");if(s.length>1)throw new m("The provided MPEG-DASH document's Period element can not have more than one AssetIdentifier element.");const e=1===s.length?function(t){return NX(t)}(s[0]):void 0,n=function(t){return t.map(OX)}(t.qE("AdaptationSet")),r=Tn(t.sR("bitstreamSwitching")),h=kn(t.sR("duration")),o=function(t){return t.map(VX)}(t.qE("EventStream")),a=t.sR("id"),u=kn(t.sR("start")),c=(t.qE("Subset"),t.sR("xlink:href"));return Jr({},i,{xlt:n,Bwt:e,qpt:r,ct:h,Mwt:o,o:a,Tn:u,Nwt:t.sR("xlink:actuate"),Dwt:c})}function UX(t){const i=t.sR("schemeIdUri");if(!i)return;return{w9:i,XE:t.sR("value")}}function GX(t,i){const s=gX(t.sR("availabilityEndTime")),e=gX(t.sR("availabilityStartTime")),n=bX(t.qE("BaseURL")),r=t.sR("id"),h=function(t){return t.map(t=>""+t.iR)}(t.qE("Location")),o=kn(t.sR("maxSegmentDuration")),a=kn(t.sR("maxSubsegmentDuration")),u=kn(t.sR("mediaPresentationDuration")),c=(t.qE("Metrics"),kn(t.sR("minBufferTime")));if(!c)throw new m("The provided MPEG-DASH document's MPD element does not have the required 'minimumBufferTime' attribute.");const d=kn(t.sR("minimumUpdatePeriod")),l=function(t){return t.map(t=>WX(t))}(t.qE("Period"));if(!l.length)throw new m("The provided MPEG-DASH document's MPD element does not have the required 'Period' element.");const f=t.sR("profiles");if(!f)throw new m("The provided MPEG-DASH document's MPD element does not have the required 'profiles' attribute.");const v=gX(t.sR("publishTime")),_=kn(t.sR("suggestedPresentationDelay")),g=kn(t.sR("timeShiftBufferDepth")),p=function(t){switch(t){case Me.wW:case Me.yW:return t;default:return}}(t.sR("type")),w=function(t){const i=[];for(const s of t){const t=UX(s);t&&i.push(t)}return i}(t.qE("UTCTiming")),y=function(t){if(0===t.length)return;const i=t[0],s=i.qE("Latency");if(0===s.length)return;const e=function(t){const i=t[0],s=os(i.sR("target"));if(void 0===s)return;const e=os(i.sR("min")),n=os(i.sR("max"));return{Lwt:s,qF:e,KF:n}}(s);if(void 0===e)return;const n=function(t){if(0===t.length)return;const i=t[0],s=os(i.sR("max")),e=os(i.sR("min"));return{qF:e,KF:s}}(i.qE("PlaybackRate"));return{Owt:e,vx:n}}(t.qE("ServiceDescription"));return{Fwt:s,Vwt:e,fwt:n,o:r,Wwt:h,Uwt:i,Gwt:o,Xwt:a,Zwt:u,Hwt:c,zwt:d,spt:l,nwt:f,Ywt:v,Kwt:_,Kpt:g,Kp:p,qwt:w,Qwt:y}}var XX=class{Jwt(t,i){return function(t,i){if(!t)throw new m("The provided MPEG-DASH document does not contain a valid MPD root element.");return GX(t,i)}(Zd.FE(t).aR,i)}};function ZX(t){return{get bandwidth(){return t.EG},get codecs(){return t.lrt},get id(){return t.o},get uid(){return t.qI},get name(){return t.Th},get averageBandwidth(){return t.$wt},get label(){return t.Th},set label(i){t.Th=_o(i)},get available(){return t.oet},get score(){return t.tyt},addEventListener(i,s){t.wn(i,s)},removeEventListener(i,s){t.mn(i,s)}}}function HX(t){return Qr(ZX(t),{get height(){return t.Mi},get width(){return t.Ti},get frameRate(){return t.glt},get firstFrame(){return t.iyt}})}function zX(t){return Qr(ZX(t),{get audioSamplingRate(){return t.Jpt}})}r(),r(),r(),r(),r(),r(),r(),r();var ea=class extends sh{constructor(t){super("update"),this.quality=void 0,this.quality=t}},YX=class extends fr{get Th(){return this.gO}set Th(t){this.gO!==t&&(this.gO=t,this.So(new ea(this.Ca)))}get $wt(){}get oet(){return this.syt}get tyt(){}qV(){this.syt=!1,this.So(new ea(this.Ca))}KV(){this.syt=!0,this.So(new ea(this.Ca))}constructor(t,i,s,e,n){super(),this.o=void 0,this.EG=void 0,this.lrt=void 0,this.eyt=void 0,this.qI=void 0,this.gO=void 0,this.syt=void 0,this.o=t,this.EG=i,this.lrt=s,this.eyt=n,this.qI=Kk(),this.gO=e||"",this.syt=!0}},KX=class extends YX{get Ca(){return this.hu||(this.hu=HX(this)),this.hu}constructor(t,i,s,e,n,r,h,o,a=0){super(t,i,s,e,n),this.glt=void 0,this.Ti=void 0,this.Mi=void 0,this.iyt=void 0,this.hu=void 0,this.glt=r,this.Ti=h,this.Mi=o,this.iyt=a,this.hu=void 0}},qX=class extends YX{get Ca(){return this.hu||(this.hu=zX(this)),this.hu}constructor(t,i,s,e,n,r){super(t,i,s,e,n),this.Jpt=void 0,this.hu=void 0,this.Jpt=r,this.hu=void 0}};r(),r();var jX=class extends fr{get nyt(){const t=this.ryt();return null==t?void 0:t.Tn}get hyt(){const t=this.ryt();return null==t?void 0:t.An}constructor(...t){super(...t),this.oyt=t=>{this.So(t)}}},QX=class extends jX{get Dut(){return this.Kot}get Jpt(){var t;return null!=(t=this.ayt.hk.Jpt)?t:this.Dut.Jpt}get EG(){return this.ayt.hk.EG||0}get lrt(){const t=this.ayt.hk;return t.lrt?[t.lrt]:this.Dut.lrt}get uyt(){const t=this.ayt.hk;return t.lrt?[t.lrt]:[]}get Um(){return this.ayt.hk.lrt||this.Dut.Um}get $pt(){return this.ayt.hk.$pt||this.Dut.$pt}get CG(){return this.ayt.hk.CG||this.Dut.CG}get ypt(){return this.cyt}get GT(){return this.iK+'; codecs="'+this.Um+'"'}get twt(){const t=this.ayt.hk;return t.twt.length?t.twt:this.Dut.twt}get Ca(){return this.hu||(this.hu=function(t){return{get id(){return t.o},get type(){return t.Kp},get bandwidth(){return t.EG},get width(){return t.Ti},get height(){return t.Mi},get frameRate(){var i,s;return null!=(s=null==(i=t.glt)?void 0:i.tF())?s:NaN},get audioSamplingRate(){return t.Jpt}}}(this))}get glt(){var t;return null!=(t=this.ayt.hk.glt)?t:this.Dut.glt}get Mi(){return this.ayt.hk.Mi||this.Dut.Mi}get o(){return this.ayt.hk.o||""}get Ndt(){return this.dyt}set Ndt(t){this.dyt=t}get Cdt(){const t=this.ayt.lyt();if(t)return{Yu:t.Yu,Aat:t.Aat,Xk:this.xdt.Xk}}get swt(){return this.ayt.hk.swt||this.Dut.swt||1}get ewt(){return this.ayt.hk.ewt||this.Dut.ewt}get xdt(){return this.pct.xdt}get iK(){return this.ayt.hk.iK||this.Dut.iK}get pct(){return this.Dut.pct}get nwt(){return this.ayt.hk.nwt||this.Dut.nwt}get Tot(){return this.fyt}get rwt(){return this.ayt.hk.rwt||this.Dut.rwt}get hwt(){return this.ayt.hk.hwt||this.Dut.hwt}get vyt(){return this.ayt.vyt}get owt(){return this.ayt.hk.owt||this.Dut.owt}get Jrt(){return this.ayt.Jrt}get awt(){return this.ayt.hk.awt||this.Dut.awt}get Kp(){const t=this.iK.split("/")[0];return"application"===t||"text"===t||jR(this.iK,this.lrt)?Mo.DT:"video"===t?Mo.Nk:"audio"===t?Mo.Ck:"image"===t?Mo.Dk:Mo.gk}get Ti(){return this.ayt.hk.Ti||this.Dut.Ti}get Act(){return this._yt}set Act(t){this._yt=t}get hlt(){return this.gyt}set hlt(t){this.gyt=t}Dct(t){const i=yW(t)?this.ayt.myt(t):this.ayt.Dct(t);return{Yu:i.Yu,Aat:i.Aat,Xk:this.xdt.Xk}}pyt(){return this.ayt.pyt()}ryt(){return this.ayt.ryt()}wyt(){return this.ayt.wyt()}Tct(t){return this.ayt.Tct(t)}Ect(t,i,s){return this.ayt.Ect(t,this.xdt.Xk,i,s)}gdt(t){return yW(t)?this.Jrt.yyt(t,this.ayt):this.Jrt.gdt(t)}mct(t){return yW(t)?this.Jrt.byt(t,this.ayt):this.Jrt.mct(t)}Rpt(t){Ft(this.cyt,t)||this.cyt.push(t)}kn(){this.ayt.mn(mo.wot,this.oyt),this.cyt=[]}constructor(t,i){if(super(),this.Kot=void 0,this.hu=void 0,this.ayt=void 0,this.fyt=void 0,this.dyt=void 0,this._yt=!1,this.gyt=!1,this.cyt=[],this.Kot=t,this.ayt=i,this.ayt.wn(mo.wot,this.oyt),this.Kp===Mo.Nk){var s,e;const t=null!=(e=null==(s=this.glt)?void 0:s.tF())?e:NaN;this.fyt=new KX(this.o,this.EG,this.Um,"","",t,this.Ti,this.Mi)}else this.Kp===Mo.Ck?this.fyt=new qX(this.o,this.EG,this.Um,"","",this.Jpt):this.fyt=void 0}},JX=class extends jX{get Udt(){return this.ayt.hk.Udt}get Jpt(){var t;return null!=(t=this.ayt.hk.Jpt)?t:-1}get lrt(){if(this.ayt.hk.lrt)return[this.ayt.hk.lrt];{const t=[];for(const i of this.nat)i.uyt.length&&-1===t.indexOf(i.Um)&&t.push(i.Um);return t}}get Um(){return this.lrt.join()}get $pt(){return this.ayt.hk.$pt}get CG(){return this.ayt.hk.CG}get GT(){return this.iK+'; codecs="'+this.Um+'"'}get twt(){return this.ayt.twt}get iwt(){return this.ayt.iwt}get glt(){return this.ayt.hk.glt}get jdt(){return this.ayt.hk.jdt}get Mi(){return this.ayt.hk.Mi||0}get o(){return this.ayt.hk.o}get Th(){return this.ayt.hk.Th||""}get swt(){return this.ayt.hk.swt}get ewt(){return this.ayt.hk.ewt}get xdt(){return this.pct.xdt}get iK(){return this.ayt.hk.iK||this.ilt[0].iK}get pct(){return this.zmt}get nwt(){return this.ayt.hk.nwt}get nat(){return this.ilt}get Elt(){return this.ayt.hk.Elt||[]}get rwt(){return this.ayt.hk.rwt}get hwt(){return this.ayt.hk.hwt}get owt(){return this.ayt.hk.owt}get qX(){return this.ayt.hk.qX}get awt(){return this.ayt.hk.awt}get Kp(){const t=(this.ayt.hk.GT||this.iK).split("/")[0];return"application"===t||"text"===t||"subtitle"===t||jR(this.iK,this.lrt)?Mo.DT:"video"===t?Mo.Nk:"audio"===t?Mo.Ck:"image"===t?Mo.Dk:Mo.gk}get Ti(){return this.ayt.hk.Ti||0}get nit(){return this.ayt.hk.bs||""}get blt(){return this.nyt}get ylt(){const t=this.blt,i=this.hyt;if(void 0===t||void 0===i)return;const s=_.min(i,this.xdt.Ayt);return _.max(t,s)}async er(t,i){if(0===this.ilt.length){const s=this.ayt.nat.map(s=>this.Syt(s,t,i));this.ilt=(await Promise.all(s)).filter(Y)}this.Tyt()}async Syt(t,i,s){const e=new QX(this,t),n=await i(e);if(Ko(s),n)return e}Tyt(){if(!this.ilt.length)throw new m("Detected an AdaptationSet without any supported Representations.")}ryt(){return this.ayt.ryt()}wyt(){return this.ayt.wyt()}kn(){this.ayt.mn(mo.wot,this.oyt);for(const t of this.ilt)t.kn();Lr(this.ilt)}constructor(t,i){super(),this.ayt=void 0,this.zmt=void 0,this.ilt=[],this.zmt=t,this.ayt=i,this.ayt.wn(mo.wot,this.oyt)}};function $X(t,i){const s=[];for(const e of i)for(const i of t)s.push(Zd.Dh(i,e));return s}r(),r(),r(),r(),r(),r(),r();var tZ=class{kyt(t){const i=t-this.zmt.Tn;if(i<0||i>=this.zmt.ct)return;const s=this.Eyt();return void 0!==s&&we(s,i,1e-5)?this.Ryt():this.xyt(i)}Sct(t){const i=t-this.zmt.Tn;if(!(i<0))return this.Iyt(_.min(i,this.zmt.ct))}Ryt(){return this.Pyt(0)}Cyt(){const t=this.zmt.ct;if(isFinite(t))return this.Iyt(t)}get Nyt(){return this.zmt.Byt.Dyt&&void 0!==this.Myt()}pyt(t){if(this.zmt.Byt.Kp===Me.yW){if(this.Nyt){const i=this.Ryt(),s=this.Myt();if(void 0===i||void 0===s)return;return{Lyt:t,Oyt:i,Fyt:s}}const i=this.Vyt(t);if(!i)return;return{Lyt:t,Oyt:this.Wyt(t),Fyt:i}}{0;const i=this.Ryt();if(i)return{Lyt:t,Oyt:i,Fyt:this.Cyt()}}}wyt(t,i){if(i){let t=this.Idt(i.Oyt);const s=this.Pct(i.Fyt);if(s){const i=this.Pdt(s);(!t||i.getTime()<t.getTime())&&(t=i)}return t}{const i=this.Ryt();if(i){const s=this.Pdt(i);if(t.getTime()<s.getTime())return s}const s=this.zmt.Byt.Vwt;return t.getTime()<s.getTime()?s:void 0}}Vyt(t){const i=(t.getTime()-this.zmt.Byt.Vwt.getTime())/1e3-this.zmt.Tn+this.Uyt;let s=this.Iyt(ss(i,0,this.zmt.ct));if(!s)return;if(s=this.Gyt(s,t),!s)return;let e=this.Pct(s);for(;e&&this.Fdt(e,t);)s=e,e=this.Pct(s);return s}Wyt(t){let i;const s=this.Xyt.Kpt;if(s){const e=(t.getTime()-this.zmt.Byt.Vwt.getTime())/1e3-this.zmt.Tn-s.Ipt();i=this.Iyt(ss(e,0,this.zmt.ct)),i||(i=this.Ryt())}else i=this.Ryt();if(!i)return;if(i=this.Gyt(i,t),!i)return;let e=this.Ict(i);for(;e&&this.Fdt(e,t);)i=e,e=this.Ict(i);return i}Gyt(t,i){let s=t;for(;s&&this.Pdt(s).getTime()>i.getTime();)s=this.Ict(s);if(!s)return;const e=this.Idt(s);if(e&&e.getTime()<=i.getTime()){const t=this.Ict(s);for(t&&this.Fdt(t,i)&&(s=t);s;){if(this.Pdt(s).getTime()>i.getTime())return;if(this.Fdt(s,i))break;s=this.Pct(s)}if(!s)return}return s}Fdt(t,i){if(this.Nyt)return!0;if(this.Pdt(t).getTime()>i.getTime())return!1;const s=this.Idt(t);return!(s&&i.getTime()>=s.getTime())}Zyt(t,i){if(this.Nyt)return!0;if(this.Hyt(t).getTime()>i.getTime())return!1;const s=this.Idt(t);return!(s&&i.getTime()>=s.getTime())}zyt(t,i,s){const e=uh(i,this.Kb)+this.zmt.Tn;return{hut:t,Yyt:i,kO:e,ct:s,EO:e+s}}Hyt(t){return this.zmt.Byt.Kp===Me.yW?new Date(this.zmt.Byt.Vwt.getTime()+1e3*(t.kO+t.ct)):this.zmt.Byt.Vwt}Pdt(t){const i=this.Hyt(t);return this.zmt.Byt.Kp===Me.yW?new Date(i.getTime()-1e3*this.Uyt):i}Idt(t){let i=1/0;if(this.zmt.Byt.Kp===Me.yW){const s=this.Xyt.Kpt;s&&(i=this.Hyt(t).getTime()+1e3*t.ct+s.Ppt())}const s=this.zmt.Byt.Fwt;return s&&(i=_.min(i,s.getTime())),i===1/0?void 0:new Date(i)}Kyt(t,i){return t.hut+i}get bV(){return this.zmt.Tn-uh(this.qyt,this.Kb)}get zpt(){return uh(this.qyt,this.Kb)}Tct(t){return!1}Ect(t,i,s,e,n){const r=this.jyt(t);if(!r)return Promise.reject(new m("Invalid segment"));const h=this.Qyt(r.hut,i);return h?Promise.resolve(h):$s(this.Jyt(r.hut,i,s,e),n)}Qyt(t,i){}Jyt(t,i,s,e){return Promise.reject(new m("Not supported"))}Ict(t){const i=this.jyt(t);if(i)return this.Pyt(i.hut-1)}Pct(t){const i=this.jyt(t);if(i)return this.Pyt(i.hut+1)}jyt(t){const i=this.Pyt(t.hut);if(i&&i.kO===t.kO)return i;const s=this.kyt(t.kO);return s&&s.kO===t.kO?s:void 0}$yt(t,i){const s=this.Rct(t);if(!s||!this.Tct(s.hut))return;const e=this.Qyt(s.hut,i);return e?e.$yt(t):void 0}Rct(t){return this.Pyt(t.tbt)}gdt(t){const i=this.jyt(t);return!!i&&0===i.hut}yyt(t,i){const s=this.$yt(t,i);return!!s&&0===s.rut}mct(t){const i=this.jyt(t);if(!i)return!1;const s=this.Cyt();return!!s&&i.hut===s.hut}byt(t,i){const s=this.$yt(t,i);if(!s)return!1;const e=this.Cyt();if(!e||s.tbt!==e.hut)return!1;const n=this.Qyt(s.tbt,i);return s.rut+1===n.V}Zg(){}constructor(t,i){this.zmt=void 0,this.Xyt=void 0,this.Kb=void 0,this.Uyt=void 0,this.qyt=void 0,this.zmt=t,this.Xyt=i,this.Kb=i.UN,this.Uyt=i.Lpt,this.qyt=i.zpt}},iZ=class extends tZ{Pyt(t){if(t<0)return;const i=this.ibt.multiply(t),s=uh(i,this.Kb),e=this.zmt.ct;if(s>=e)return;const n=this.sbt();if(void 0!==n){if(t>n)return;if(t===n&&isFinite(e))return this.zyt(t,i,e-s)}return isFinite(e)&&s+this.ebt>e?this.zyt(t,i,e-s):this.zyt(t,i,this.ebt)}Eyt(){return 0}xyt(t){const i=_.floor(t/this.ebt),s=this.sbt();return void 0!==s&&i>=s?this.Pyt(s):this.Pyt(i)}Iyt(t){if(t>=this.zmt.ct){const t=_.ceil(this.zmt.ct/this.ebt)-1,i=this.sbt();return void 0!==i&&t>=i?this.Pyt(i):this.Pyt(t)}return this.xyt(t)}sbt(){const t=this.Xyt.Qpt;var i;if(void 0!==t)return t-(null!=(i=this.Xyt.jpt)?i:1);const s=this.Xyt.nbt;return void 0!==s&&s>0?s-1:void 0}Myt(){if(isFinite(this.zmt.ct))return this.Cyt()}rbt(t,i){return this.ibt.multiply(t.hut+(i-1))}er(){}constructor(t,i){super(i,t),this.ebt=void 0,this.ibt=void 0;const s=t.hbt,e=t.ct;if(void 0===s||void 0===e)throw new m("MultipleSegmentBase does not have a segment duration specified.");this.ibt=s,this.ebt=e}};function sZ(t,i,s){const e=i.length;if(0===e)return-1;let n=0,r=e-1,h=t.obt(i[n]),o=t.abt(i[r]);for(;n<=r&&t.ubt(h,s)<=0&&t.ubt(s,o)<0;){const a=n+_.floor(t.cbt(s,h,o)*(r-n)),u=i[a],c=t.obt(u),d=a+1<e?t.obt(i[a+1]):t.abt(u);if(t.ubt(d,s)<=0)n=a+1,h=d;else{if(!(t.ubt(s,c)<0))return a;r=a-1,o=c}}return-1}function eZ(t,i){return sZ(nZ.Bg,t,i)}r(),r(),r();var nZ=class t{static get Bg(){return null!=this.dbt||(this.dbt=new t),this.dbt}obt(t){return t.kO}abt(t){return t.EO}ubt(t,i){return t.compare(i)}cbt(t,i,s){return t.subtract(i).toNumber()/s.subtract(i).toNumber()}};nZ.dbt=void 0;var rZ=.01,hZ=class extends tZ{Pyt(t){if(!(t<0))return t<this.lbt.length?this.lbt[t].Jat:this.fbt(t-this.lbt.length)}Eyt(){if(this.lbt.length>0)return uh(this.lbt[0].kO,this.Kb)}xyt(t){if(this.vbt&&uh(this.vbt.kO,this.Kb)<=t){const i=uh(this.vbt.kO,this.Kb),s=uh(this.vbt.ct,this.Kb),e=_.floor((t-i)/s);return this.fbt(e)}if(this.lbt.length>0&&we(t,uh(this.lbt[0].kO,this.Kb),1e-5))return this.lbt[0].Jat;const i=eZ(this.lbt,mh.fromNumber(t*this.Kb));return i<0?void 0:this.lbt[i].Jat}Iyt(t){if(!this.vbt&&this.lbt.length>0){const i=this.lbt[this.lbt.length-1];if(function(t,i,s){return $l(t,i,s)>=0}(t,uh(i.EO,this.Kb),1e-5))return i.Jat}const i=this.Eyt();return i&&t<i?this.lbt[0].Jat:this.xyt(t)}Myt(){return isFinite(this.zmt.ct)?this.Cyt():this.Pyt(this.lbt.length-1)}rbt(t){return this._bt(t)}fbt(t){if(!this.vbt)return;const i=this.vbt.kO,s=this.vbt.ct,e=i.add(s.multiply(t)),n=uh(e,this.Kb),r=this.zmt.ct;if(n>=r)return;const h=this.lbt.length+t,o=_.min(uh(s,this.Kb),n+r);return this.zyt(h,e,o)}_bt(t){return t.Yyt.add(this.qyt)}er(){const t=this.Xyt.hk.Jrt;if(!t)throw new m("MultipleSegmentBaseTO does not have a SegmentTimeline specified.");this.gbt(t)}gbt(t){const i=this.qyt;this.mbt(t,i);const s=this.pbt(t);this.wbt(t,i,s.ybt,s.tbt)}mbt(t,i){const s=this.lbt;if(0===t.length)Lr(s);else{const e=t[0];let n=0;const r=uh(e.kO?mh.fromString(e.kO,!1).subtract(i):mh.ZERO,this.Kb);for(;n<s.length&&uh(s[n].kO,this.Kb)<r-rZ;)n++;n>0&&s.splice(0,n)}}pbt(t){const i=this.lbt,s=this.Wgt;let e=0,n=0;for(;e<t.length&&n<i.length;){const r=t[e].Fpt||0;if(r<0)break;const h=n+r;if(h>=i.length)break;if(i[h].kO.greaterThanOrEqual(s))break;if(i[n].Jat.hut===n)n=h+1;else for(;n<=h;)i[n].Jat.hut=n,n++;0,e++}return{ybt:e,tbt:n}}wbt(t,i,s,e){const n=this.lbt;let r,h=s,o=e;for(;h<t.length;){const s=t[h],e=mh.fromString(s.ct,!1),a=s.Fpt||0;let u;if(s.kO){if(u=mh.fromString(s.kO,!1).subtract(i),o>0){const t=n[o-1];t.EO.greaterThan(u)&&(t.ct=u.subtract(t.kO),t.EO=t.kO.add(t.ct))}}else u=o>0?n[o-1].EO:mh.ZERO;if(a<0){if(h+1===t.length){r={kO:u,ct:e};break}const s=mh.fromString(t[h+1].kO,!1).subtract(i);for(;u.lessThan(s);){const t=u.add(e);this.bbt(n,o,u,e,t),u=t,o++}}else{const t=o+a;for(;o<=t;){const t=u.add(e);this.bbt(n,o,u,e,t),u=t,o++}}h++}o<n.length&&n.splice(o),n.length>0&&(this.Wgt=n[n.length-1].kO),this.vbt=r}bbt(t,i,s,e,n){if(i<t.length){const r=t[i];0,r.ct.equals(e)?r.Jat.hut=i:t[i]={kO:s,ct:e,EO:n,Jat:this.zyt(i,s,uh(e,this.Kb))}}else t.push({kO:s,ct:e,EO:n,Jat:this.zyt(i,s,uh(e,this.Kb))})}constructor(t,i){super(i,t),this.lbt=[],this.vbt=void 0,this.Wgt=mh.ZERO,this.er()}};r();var oZ=class{get hk(){return this.qm}get Lpt(){return this.qm&&void 0!==this.qm.Lpt?this.qm.Lpt:this.Abt?this.Abt.Lpt:0}get zpt(){return this.qm&&void 0!==this.qm.zpt?this.qm.zpt:this.Abt?this.Abt.zpt:mh.ZERO}get Kpt(){return this.qm&&void 0!==this.qm.Kpt?this.qm.Kpt:this.Abt?this.Abt.Kpt:this.pct.Byt.Kpt}get UN(){return this.qm&&void 0!==this.qm.UN?this.qm.UN:this.Abt&&this.Abt.UN?this.Abt.UN:1}get Vpt(){return this.qm&&void 0!==this.qm.Vpt?this.qm.Vpt:this.Abt?this.Abt.Vpt:void 0}get Hpt(){return this.qm&&void 0!==this.qm.Hpt?this.qm.Hpt:this.Abt?this.Abt.Hpt:void 0}get Jrt(){return this.Sbt||(this.Sbt=this.Tbt()),this.Sbt}Tbt(){if(this.kbt=this.Ebt(),this.kbt)return this.kbt;if(this.Abt)return this.Abt.Jrt;throw new m("Missing media segment information.")}lyt(t){const i=this.Hpt;if(i){return{Yu:(void 0!==i.Opt?Zd.Dh(i.Opt,t.fwt[0]):t.fwt[0]).href,Aat:i.Aat}}const s=this.Vpt;if(s)return{Yu:t.fwt[0].href,Aat:[0,s[0]-1]}}er(t){this.qm=t,this.kbt&&this.kbt.er()}Zg(){this.kbt&&(this.kbt.Zg(),this.kbt=void 0)}constructor(t,i,s){this.pct=void 0,this.Abt=void 0,this.qm=void 0,this.Sbt=void 0,this.kbt=void 0,this.pct=t,this.Abt=i,this.qm=s}},aZ=class extends oZ{get ct(){return void 0!==this.qm.ct?this.qm.ct/this.UN:this.Abt&&uZ(this.Abt)?this.Abt.ct:void 0}get hbt(){return void 0!==this.qm.ct?mh.fromNumber(this.qm.ct):this.Abt&&uZ(this.Abt)?this.Abt.hbt:void 0}get jpt(){return void 0!==this.qm.jpt?this.qm.jpt:this.Abt&&uZ(this.Abt)?this.Abt.jpt:void 0}get Qpt(){return void 0!==this.qm.Qpt?this.qm.Qpt:this.Abt&&uZ(this.Abt)?this.Abt.Qpt:void 0}Ebt(){return void 0!==this.qm.Jrt?new hZ(this,this.pct):void 0!==this.qm.ct?new iZ(this,this.pct):void 0}};function uZ(t){return t instanceof aZ}r();var cZ=class{Hy(t){return this.Rbt.replace(/\$\$|\$(RepresentationID|Number|Bandwidth|Time)(?:%0(\d+)([diuxXo]))?\$/g,(i,s,e,n)=>{if("$$"===i)return"$";const r=t[s];if(void 0===r)return i;if(void 0===e)return r.toString();let h=function(t,i){switch(i){case"d":case"i":case"u":return t.toString(10);case"x":return t.toString(16);case"X":return t.toString(16).toUpperCase();case"o":return t.toString(8);default:return}}(r,n);return void 0===h?i:(h=zo(h,Number(e),"0"),h)})}constructor(t){this.Rbt=void 0,this.Rbt=t}};var dZ=class t extends aZ{get dwt(){return this.xbt?this.xbt:this.Abt&&this.Abt instanceof t?this.Abt.dwt:void 0}get lwt(){return this.Ibt?this.Ibt:this.Abt&&this.Abt instanceof t?this.Abt.lwt:void 0}lyt(t){const i=this.dwt;if(!i)return super.lyt(t);const s=i.Hy({Bandwidth:t.hk.EG,RepresentationID:t.hk.o});return{Yu:Zd.Rp(s,t.fwt[0])}}Dct(t,i){var s;const e=null!=(s=i.vyt.jpt)?s:1,n=this.lwt.Hy({Bandwidth:i.hk.EG,Number:i.Jrt.Kyt(t,e),RepresentationID:i.hk.o,Time:i.Jrt.rbt(t,e)});return{Yu:Zd.Rp(n,i.fwt[0])}}myt(t,i){}get nbt(){}constructor(t,i,s){super(t,i,s),this.xbt=void 0,this.Ibt=void 0,this.xbt=s.dwt?new cZ(s.dwt):void 0,this.Ibt=s.lwt?new cZ(s.lwt):void 0}};r();var lZ=class t extends aZ{Dct(t,i){const s=this.Upt[t.hut],e=i.fwt[0];let n;return n=s.YN?Zd.Dh(s.YN,e):e,{Yu:n.href,Aat:s.Wpt}}myt(t,i){}get Upt(){return void 0!==this.qm.Upt?this.qm.Upt:this.Abt&&this.Abt instanceof t?this.Abt.Upt:void 0}get nbt(){var t;return null==(t=this.Upt)?void 0:t.length}};r(),r(),r(),r();var fZ=class{$yt(t){const i=this.xct(t.rut);if(i&&i.kO===t.kO)return i;const s=this.Pbt(t.kO);return s&&s.kO===t.kO?s:void 0}},vZ=class extends fZ{get V(){return this.Cbt.length}xct(t){if(t>=0&&t<this.V)return this.Nbt(this.Cbt[t])}Pbt(t){const i=this.Dbt(t);if(this.Cbt.length>0){const t=this.Cbt[0];if(i<=uh(t.kO,this.UN))return this.Nbt(t)}const s=eZ(this.Cbt,mh.fromNumber(i*this.UN));if(!(s<0))return this.Nbt(this.Cbt[s])}kct(t){const i=this.Dbt(t),s=rf(this.Cbt,-1);return void 0!==s&&i>=uh(s.EO,this.UN)?this.Nbt(s):this.Pbt(t)}Nbt(t){const i=uh(t.kO,this.UN)-this.zpt,s=i+this.Bbt,e=uh(t.ct,this.UN);return{tbt:this.tbt,rut:t.hut,kO:s,Yyt:mh.fromNumber(i*this.UN),ct:e,EO:s+e,Mbt:[t.Lbt,t.Obt]}}Dbt(t){return t-this.Bbt+this.zpt}constructor(t,i,s,e,n){super(),this.tbt=void 0,this.UN=void 0,this.Bbt=void 0,this.zpt=void 0,this.Cbt=void 0,this.tbt=t,this.UN=i,this.Bbt=s,this.zpt=e,this.Cbt=n}};r(),r(),r();var _Z=class t{ogt(){return this.KC.ac<this.hk.byteLength}Fbt(){const i=this.Vbt(),s=this.Wbt(),e=this.KC.ac,n=this.hk.byteLength;let r;r=t.Ubt(s)?n-e:t.Gbt(s);const h=e+r<=n?r:n-e,o=Et(this.hk,this.KC,h);return new mZ(i,xh(o))}Vbt(){const t=this.Wbt();if(t.length>7)throw new RangeError("Invalid EBML ID size");let i=0;for(let s=0;s<t.length;s++)i=256*i+t[s];return i}Wbt(){const t=nh(this.hk,this.KC.My());if(0===t)throw new RangeError("EBML variable sized integer is invalid");const i=8-(31-Cm(t));return Zd.vp(i<=8&&i>=1,"Incorrect log2 value"),Et(this.hk,this.KC,i)}static Gbt(t){if(8===t.length&&224&t[1])throw new g("EBML variable sized integer is too large");let i=0;for(let s=0;s<t.length;s++){const e=t[s];if(0===s){i=e&(1<<8-t.length)-1}else i=256*i+e}return i}static Ubt(t){for(const i of gZ)if(L(t,new j(i)))return!0;return!1}constructor(t){this.hk=void 0,this.KC=void 0,this.hk=t,this.KC=new J}},gZ=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]],mZ=class{Xbt(){return this.Zbt.byteOffset}Hbt(){return new _Z(this.Zbt)}zbt(){const t=this.Zbt.byteLength;if(t>8)throw new RangeError("EMBL integer field size is too large");if(8===t&&224&this.Zbt.getUint8(0))throw new RangeError("EMBL integer field value is too large");let i=0;for(let s=0;s<t;s++){i=256*i+this.Zbt.getUint8(s)}return i}MQ(){if(4===this.Zbt.byteLength)return this.Zbt.getFloat32(0);if(8===this.Zbt.byteLength)return this.Zbt.getFloat64(0);throw new RangeError("Invalid size for EMBL floating-point field")}constructor(t,i){this.id=void 0,this.Zbt=void 0,this.id=t,this.Zbt=i}};function pZ(t,i){const s=function(t){const i=new _Z(xh(t)),s=i.Fbt();if(s.id!==yZ)throw new g("Missing WebM EBML header");const e=i.Fbt();if(e.id!==bZ)throw new g("Missing WebM SegmentElement");const n=e.Xbt(),r=function(t){const i=t.Hbt();let s;for(;i.ogt();){const t=i.Fbt();if(t.id===AZ){s=t;break}}if(!s)throw new g("Missing WebM InfoElement");return function(t){const i=t.Hbt();let s,e=1e6;for(;i.ogt();){const t=i.Fbt();t.id===SZ?e=t.zbt():t.id===TZ&&(s=t.MQ())}if(void 0===s)throw new g("Missing Duration in WebM InfoElement");const n=e/1e9,r=s*n;return{timecodeScale:n,duration:r}}(s)}(e);return{segmentOffset:n,timecodeScale:r.timecodeScale,duration:r.duration}}(i),e=new _Z(xh(t)).Fbt();if(e.id!==kZ)throw new g("Missing WebM CuesElement");const n=function(t,i,s,e){const n=[],r=t.Hbt();let h,o;for(;r.ogt();){const t=r.Fbt();if(t.id!==EZ)continue;const s=wZ(t);if(!s)continue;const e=s.unscaledTime,a=i+s.relativeOffset;void 0!==h&&n.push({hut:n.length,kO:h,ct:e.subtract(h),EO:e,Lbt:o,Obt:a-1}),h=e,o=a}if(void 0!==h){0;const t=mh.fromNumber(e/s);n.push({hut:n.length,kO:h,ct:t.subtract(h),EO:t,Lbt:o,Obt:void 0})}return n}(e,s.segmentOffset,s.timecodeScale,s.duration);return{UN:_.round(1/s.timecodeScale),Ybt:n}}function wZ(t){const i=t.Hbt(),s=i.Fbt();if(s.id!==RZ)throw new g("Missing CueTime in WebM CuePointElement");const e=mh.fromNumber(s.zbt()),n=i.Fbt();if(n.id!==xZ)throw new g("Missing CueTrackPositions in WebM CuePointElement");const r=n.Hbt();let h=0;for(;r.ogt();){const t=r.Fbt();if(t.id===IZ){h=t.zbt();break}}return{unscaledTime:e,relativeOffset:h}}var yZ=440786851,bZ=408125543,AZ=357149030,SZ=2807729,TZ=17545,kZ=475249515,EZ=187,RZ=179,xZ=183,IZ=241,PZ=class extends tZ{Pyt(t){if(0===t)return this.Kbt}Eyt(){return 0}xyt(t){return this.Kbt}Iyt(t){return this.xyt(t)}Myt(){return this.Kbt}rbt(t,i){return mh.ZERO}pyt(t){const i=this.qbt(t);return i&&{Lyt:t,Oyt:i,Fyt:i}}qbt(t){const i=this.Kbt;return this.Fdt(i,t)?i:void 0}Vyt(t){return this.qbt(t)}Wyt(t){return this.qbt(t)}er(){}Tct(t){return 0===t&&void 0!==this.jbt}Qyt(t,i){const s=i.fwt[0].href;return this.Qbt.get(s)}Jyt(t,i,s,e){const n=i.fwt[0].href;let r=this.Jbt.get(n);if(void 0===r){const h=i.iK,o=this.$bt.jg;if(io(h))r=this.tAt(t,n,s,e,o);else{if(!Ky(h))throw new Wt(Ne.MEDIA_NOT_SUPPORTED,"Unsupported MIME type for segment index: "+h);r=this.iAt(t,n,i,s,e,o)}this.Jbt.set(n,r)}return r}async tAt(t,i,s,e,n){const r=this.jbt,h=await e.Qct(i,r,s,n),o=this.sAt(t,h);return this.Qbt.set(i,o),o}sAt(t,i){const s=this.jbt,e=dh.lN(new DataView(i),new J);if(e.Kp!==Ci.VC)throw new m("Invalid segment index");const n=Co.DN(e.hk),r=function(t,i){const s=[];let e=t.vM,n=i+t._M.toNumber(),r=0;for(const i of t.mM){const t=i.uM,h=mh.fromNumber(i.ct),o=e.add(h);0===i.aM&&s.push({hut:r++,kO:e,ct:h,EO:o,Lbt:n,Obt:n+t-1}),n+=t,e=o}return s}(n,s[1]+1);return new vZ(t,n.UN,this.zmt.Tn,uh(this.qyt,this.Kb),r)}async iAt(t,i,s,e,n,r){const h=s.lyt(),o=this.jbt,a=n.Qct(h.Yu,h.Aat,e,r),u=n.Qct(i,o,e,r),[c,d]=await Promise.all([a,u]),l=this.eAt(t,d,c);return this.Qbt.set(i,l),l}eAt(t,i,s){const e=pZ(new j(i),new j(s));return new vZ(t,e.UN,this.zmt.Tn,uh(this.qyt,this.Kb),e.Ybt)}Zg(){super.Zg(),this.$bt.Jg()}constructor(t,i){super(i,t),this.jbt=void 0,this.Kbt=void 0,this.Qbt=Se(),this.Jbt=Se(),this.$bt=new ui,this.jbt=t.Vpt,this.Kbt=this.zyt(0,mh.ZERO,this.zmt.ct)}},CZ=class extends oZ{get jpt(){}Dct(t,i){return{Yu:i.fwt[0].href}}myt(t,i){return{Yu:i.fwt[0].href,Aat:t.Mbt}}Ebt(){return new PZ(this,this.pct)}};r();var NZ=class extends sh{constructor(){super(mo.wot)}};r();var DZ=class extends fr{get hk(){return this.qm}get fwt(){return this.nAt}rAt(){var t,i;return null!=(i=this.Xyt)?i:null==(t=this.gE)?void 0:t.rAt()}hAt(t){const i=this.pct,s=this.gE&&this.gE.rAt();this.qm.gwt?this.Xyt=new dZ(i,s,this.qm.gwt):this.qm._wt?this.Xyt=new lZ(i,s,this.qm._wt[0]):this.qm.vwt?this.Xyt=new CZ(i,s,this.qm.vwt):t&&!s&&(this.Xyt=new CZ(i,s,void 0))}oAt(t,i){this.qm=t,this.nAt=t.fwt&&t.fwt.length>0?$X(t.fwt.map(t=>t.Yu),i):i.slice(),this.Xyt&&(t.gwt?this.Xyt.er(t.gwt):t._wt?this.Xyt.er(t._wt[0]):t.vwt&&this.Xyt.er(t.vwt))}ryt(){var t;return null==(t=this.aAt)?void 0:t.uAt}wyt(){var t;return null==(t=this.aAt)?void 0:t.cAt}dAt(t){const i=this.lAt,s=this.pct.ct,e=this.aAt,n=this.fAt(t);e&&we(s,i,1e-5)&&OZ(e,n)||(this.lAt=s,this.aAt=n,this.So(new NZ))}Zg(){this.Vo(),this.Xyt&&(this.Xyt.Zg(),this.Xyt=void 0)}constructor(t,i,s){super(),this.gE=void 0,this.qm=void 0,this.nAt=void 0,this.Xyt=void 0,this.lAt=1/0,this.aAt=void 0,this.gE=i,this.oAt(t,s)}};function BZ(t){let i,s;for(const s of t){const t=s.ryt();if(t){i=t.Tn;break}}if(void 0!==i){for(let i=t.length-1;i>=0;i--){const e=t[i].ryt();if(e){s=e.An;break}}return void 0!==s?{Tn:i,An:s}:void 0}}function MZ(t){if(0===t.length)return;let i=0,s=1/0;for(const e of t){const t=e.ryt();if(!t)return;if(i=_.max(i,t.Tn),s=_.min(s,t.An),i>=s)return}return{Tn:i,An:s}}function LZ(t){let i;for(const s of t){const t=s.wyt();t&&(!i||t.getTime()<i.getTime())&&(i=t)}return i}function OZ(t,i){return function(t,i){return t&&i?t.getTime()===i.getTime():t===i}(t.cAt,i.cAt)&&function(t,i){return t&&i?we(t.Tn,i.Tn,1e-5)&&we(t.An,i.An,1e-5):t===i}(t.uAt,i.uAt)}var FZ=class extends jX{get xlt(){return this.vAt}get lrt(){return this.xlt.reduce((t,i)=>{for(const s of i.lrt)Ft(t,s)||t.push(s);return t},[])}get Um(){return this.lrt.length>0?this.lrt[0]:""}get Kp(){return this.vAt[0].Kp}get o(){return this.rS}get xdt(){return this.zmt.xdt}get iK(){return this.vAt[0].iK}get pct(){return this.zmt}get nat(){return vl(this.xlt,t=>t.nat)}ryt(){return MZ(this.vAt)}wyt(){let t;for(const i of this.vAt){const s=i.wyt();s&&(!t||s.getTime()<t.getTime())&&(t=s)}return t}kn(){this.Vo();for(const t of this.vAt)t.mn(mo.wot,this.oyt)}constructor(t,i,s){super(),this.zmt=void 0,this.rS=void 0,this.vAt=void 0,this.zmt=t,this.rS=i,this.vAt=s.slice();for(const t of s)t.wn(mo.wot,this.oyt)}};r();var VZ=class extends sh{constructor(){super(mo.bot)}};function WZ(t){const i=[];for(const s of t){let t;const e=s.jdt;void 0===e||(t=me(i,t=>t.o===e)),t||(t={o:e,xlt:[]},i.push(t)),t.xlt.push(s)}return i}r();var UZ=class extends jX{get xlt(){return this.vAt}get Hmt(){return this._At}get Bwt(){return this.ayt.hk.Bwt}get ct(){return this.ayt.ct}get An(){return this.Tn+this.ct}get Mwt(){return this.ayt.hk.Mwt||[]}get o(){return this.ayt.o}get Aot(){return this.gAt}get xdt(){return this.mAt}get Spt(){return this.mAt.pAt(this)}get pct(){return this}get Apt(){return this.mAt.wAt(this)}get yAt(){return this.bAt(1/0,_.min)}get AAt(){return this.bAt(0,_.max)}bAt(t,i){if(0===this._At.length)return;let s=t;for(const t of this._At)if(LT(t.Kp)){const e=t.hyt;if(void 0===e)return;s=i(s,e)}return s}get Tn(){return this.ayt.Tn}get Xk(){return this.xdt.Xk}SAt(){this.gAt||(this.gAt=!0,this.So(new VZ),this.kn())}async er(t,i){0===this.vAt.length?(await this.TAt(this.ayt.xlt,t,i),this.kAt(this.vAt),Ko(i)):await this.EAt(t,i)}async TAt(t,i,s){for(const e of t){const t=new JX(this,e);try{await t.er(i,s),this.vAt.push(t)}catch(t){Ui(t)}}}kAt(t){const i=WZ(t);for(const t of i){const i=new FZ(this,t.o,t.xlt);this._At.push(i)}}async EAt(t,i){for(const s of this.vAt)await s.er(t,i)}ryt(){return this.ayt.ryt()}wyt(){return this.ayt.wyt()}kn(){this.Vo(),this.ayt.mn(mo.wot,this.oyt);for(const t of this._At)t.kn();for(const t of this.vAt)t.kn();Lr(this.vAt),Lr(this._At)}constructor(t,i){super(),this.ayt=void 0,this.vAt=[],this._At=[],this.mAt=void 0,this.gAt=!1,this.mAt=t,this.ayt=i,this.ayt.wn(mo.wot,this.oyt)}};r();var GZ=class extends sh{constructor(){super(d.Gw)}};r(),r();var XZ=function(t){return t.RAt="xAt",t}({}),ZZ=class extends sh{constructor(){super(XZ.RAt)}};r(),r(),r(),r();var HZ=class extends DZ{get Dut(){return this.Kot}get pct(){return this.Kot.pct}get Byt(){return this.Kot.Byt}get iK(){return this.qm.iK||this.Kot.iK}get vyt(){return this.rAt()}get Jrt(){return this.vyt.Jrt}Tct(t){const i=this.iK;return!(!io(i)&&!Ky(i))&&this.Jrt.Tct(t.hut)}Ect(t,i,s,e){return this.Jrt.Ect(t,this,i,s,e)}lyt(){return this.vyt.lyt(this)}Dct(t){return this.vyt.Dct(t,this)}myt(t){return this.vyt.myt(t,this)}pyt(){return this.IAt}fAt(t){const i=this.Jrt,s=i.pyt(t),e=s&&function(t,i){const{Oyt:s,Fyt:e,Lyt:n}=t,r=s.kO;let h;const o=i.Hyt(e);if(o.getTime()<=n.getTime())h=e.EO;else{const t=(o.getTime()-n.getTime())/1e3,i=_.max(e.ct-t,0);h=e.kO+i}return{Tn:r,An:h}}(s,i),n=this.Jrt.wyt(t,s);return this.IAt=s,{Lyt:t,uAt:e,cAt:n}}er(t){this.oAt(t,this.Kot.fwt)}constructor(t,i){super(t,i,i.fwt),this.Kot=void 0,this.IAt=void 0,this.Kot=i,this.hAt(!0)}},zZ=class extends DZ{get nat(){return this.ilt}get pct(){return this.zmt}get Byt(){return this.zmt.Byt}get jdt(){return this.qm.jdt}get iK(){var t;return this.qm.iK||(null==(t=this.ilt[0])?void 0:t.hk.iK)||""}get twt(){return this.hk.twt}get iwt(){return this.hk.iwt}er(t){this.oAt(t,this.zmt.fwt);const i=t.nat||[];if(this.ilt.length!==i.length)throw new m("Expected "+this.ilt.length+' representations in adaptation set "'+t.o+'", found '+i.length);for(let t=0;t<i.length;t++)this.ilt[t].er(i[t])}dAt(t){for(const i of this.ilt)i.dAt(t);super.dAt(t)}fAt(t){return{Lyt:t,uAt:MZ(this.ilt),cAt:LZ(this.ilt)}}Zg(){for(const t of this.ilt)t.Zg();super.Zg()}constructor(t,i){super(t,i,i.fwt),this.zmt=void 0,this.ilt=void 0,this.zmt=i,this.hAt(!1),this.ilt=t.nat.map(t=>new HZ(t,this))}},YZ=class extends DZ{get xlt(){return this.vAt}get Hmt(){return this._At}get pct(){return this}get Byt(){return this.PAt}get o(){return this.qm.o}get Tn(){return this.MV}get ct(){return this.qb}er(t,i){this.oAt(t,this.PAt.fwt),this.qb=i;const s=t.xlt||[];if(this.vAt.length!==s.length)throw new m("Expected "+this.vAt.length+' adaptation sets in period "'+t.o+'", found '+s.length);for(let t=0;t<s.length;t++)this.vAt[t].er(s[t])}dAt(t){for(const i of this.vAt)i.dAt(t);super.dAt(t)}fAt(t){return{Lyt:t,uAt:MZ(this.vAt),cAt:LZ(this.vAt)}}Zg(){for(const t of this.vAt)t.Zg();super.Zg()}constructor(t,i,s,e){super(i,void 0,t.fwt),this.PAt=void 0,this.MV=void 0,this.qb=void 0,this.vAt=void 0,this._At=[],this.PAt=t,this.MV=s,this.qb=e,this.hAt(!1),this.vAt=(i.xlt||[]).map(t=>new zZ(t,this)),this._At=WZ(this.vAt)}};r();var KZ=class{get CAt(){return this.NAt.Owt.qF}get DAt(){return this.NAt.Owt.KF}get BAt(){return this.NAt.Owt.Lwt}get MAt(){var t;return null==(t=this.NAt.vx)?void 0:t.qF}get LAt(){var t;return null==(t=this.NAt.vx)?void 0:t.qF}constructor(t){this.NAt=void 0,this.NAt=t}},qZ=new Date("2000-01-01"),jZ=class extends fr{get hk(){return this.qm}get Kp(){return this.qm.Kp||Me.wW}get Vwt(){return this.OAt||this.qm.Vwt||this.Ywt}get Fwt(){return this.qm.Fwt}get Dyt(){var t,i;return null!=(i=null==(t=this.FAt)?void 0:t.ignoreAvailabilityWindow)&&i}get Zwt(){return this.VAt}get fwt(){return this.nAt}get Wwt(){return this.WAt}get spt(){return this.UAt}get Ywt(){return this.qm.Ywt||this.En}get Kpt(){return this.qm.Kpt}get GAt(){return this.XAt}get ZAt(){return this.En}get Qwt(){return this.NAt}ryt(){var t;return null==(t=this.aAt)?void 0:t.uAt}wyt(){var t;return null==(t=this.aAt)?void 0:t.cAt}er(t,i,s,e){var n;const r=void 0!==this.qm&&this.qm.Kp===Me.yW;this.qm=t,this.XAt=null!=e?e:s,this.En=s;const h=[_A(i)];this.nAt=t.fwt&&t.fwt.length>0?$X(t.fwt.map(t=>t.Yu),h):h,this.WAt=t.Wwt&&t.Wwt.length>0?$X(t.Wwt,this.nAt):[];const o=this.WAt.map(t=>t.href),a=i.href;Ft(o,a)||(this.WAt.push(i),o.push(a));const u=this.HAt.href;Ft(o,u)||(this.WAt.push(this.HAt),o.push(u)),this.VAt=null==(n=t.Zwt)?void 0:n.Ipt(),t.Qwt&&(this.NAt=new KZ(t.Qwt));const c=t.Kp===Me.yW,d=function(t,i,s){const e=[];for(let s=0;s<t.length;s++){const n=t[s];let r;if(n.Tn)r=n.Tn.Ipt();else if(s>0&&t[s-1].ct){r=e[s-1]+t[s-1].ct.Ipt()}else{if(0!==s||i)break;r=0}e.push(r)}const n=[];for(let i=0;i<e.length-1;i++)n.push({hk:t[i],Tn:e[i],ct:e[i+1]-e[i]});if(e.length>0){const r=e.length-1,h=t[r],o=e[r];let a=1/0;i||(a=h.ct?h.ct.Ipt():s-o),n.push({hk:h,Tn:o,ct:a})}return n}(t.spt,c,this.VAt);this.zAt(d,r,c),this.dAt(s)}zAt(t,i,s){const e=this.UAt;if(0===t.length)return void Lr(e);const n=t[0].hk.o;let r=0;for(;r<e.length&&e[r].o!==n;)r++;const h=e.splice(0,r);for(const t of h)t.Zg();if(i&&!s&&e.length>0&&t.length>0){var o;const i=null!=(o=QZ(e[0].hk))?o:Xa.pF;var a;const s=null!=(a=QZ(t[0].hk))?a:Xa.pF;if(s.iF(i)){const n=s.dF(i);void 0!==this.VAt&&(this.VAt+=n.tF());for(let i=0;i<t.length;i++){const s=t[i];if(i<e.length){const t=e[i];s.Tn=t.Tn,sH(s.hk,t.hk)}i===t.length-1&&(s.ct+=n.tF())}}}for(let i=0;i<t.length;i++){const s=t[i];if(i<e.length){const t=e[i];0,t.er(s.hk,s.ct)}else e.push(new YZ(this,s.hk,s.Tn,s.ct))}}dAt(t){for(const i of this.UAt)i.dAt(t);const i=this.aAt,s=this.fAt(t);i&&OZ(i,s)||(this.aAt=s,this.So(new NZ))}fAt(t){return{Lyt:t,uAt:BZ(this.UAt),cAt:LZ(this.UAt)}}Myt(){const t=rf(this.UAt,-1);if(void 0===t)return;if(isFinite(t.ct))return;if(0===t.xlt.length)return;const i=t.xlt[0];if(0===i.nat.length)return;const s=i.nat[0].Jrt,e=s.Myt();return e?{Jat:e,Fwt:s.Idt(e)}:void 0}Zg(){this.Vo();for(const t of this.UAt)t.Zg()}constructor(t,i,s,e,n){if(super(),this.qm=void 0,this.HAt=void 0,this.En=void 0,this.XAt=void 0,this.aAt=void 0,this.nAt=void 0,this.WAt=void 0,this.VAt=void 0,this.OAt=void 0,this.UAt=[],this.FAt=void 0,this.NAt=void 0,this.HAt=i,this.FAt=n,this.er(t,s,e),t.Kp===Me.yW){const t=this.Myt();t&&t.Fwt&&t.Fwt.getTime()<qZ.getTime()&&(this.OAt=new Date(this.Ywt.getTime()-1e3*(t.Jat.kO+t.Jat.ct)),this.dAt(e))}}};function QZ(t){let i=tH(t);var s,e;for(const e of null!=(s=t.xlt)?s:[])i=oc(i,JZ(e));for(const s of null!=(e=t.Mwt)?e:[])i=oc(i,iH(s));return i}function JZ(t){let i=tH(t);for(const s of t.nat)i=oc(i,$Z(s));return i}function $Z(t){return tH(t)}function tH(t){let i;if(void 0!==t.gwt&&(i=oc(i,iH(t.gwt))),void 0!==t.vwt&&(i=oc(i,iH(t.vwt))),void 0!==t._wt)for(const s of t._wt)i=oc(i,iH(s));return i}function iH(t){var i,s;return Xa._F(null!=(i=t.zpt)?i:mh.ZERO,null!=(s=t.UN)?s:1)}function sH(t,i){if(rH(t,i),t.Tn=i.Tn,void 0!==t.xlt&&void 0!==i.xlt&&t.xlt.length===i.xlt.length)for(let s=0;s<t.xlt.length;s++)eH(t.xlt[s],i.xlt[s]);if(void 0!==t.Mwt&&void 0!==i.Mwt&&t.Mwt.length===i.Mwt.length)for(let s=0;s<t.Mwt.length;s++)hH(t.Mwt[s],i.Mwt[s])}function eH(t,i){if(rH(t,i),void 0!==t.nat&&void 0!==i.nat&&t.nat.length===i.nat.length)for(let s=0;s<t.nat.length;s++)nH(t.nat[s],i.nat[s])}function nH(t,i){rH(t,i)}function rH(t,i){if(void 0!==t.gwt&&void 0!==i.gwt&&hH(t.gwt,i.gwt),void 0!==t.vwt&&void 0!==i.vwt&&hH(t.vwt,i.vwt),void 0!==t._wt&&void 0!==i._wt&&t._wt.length===i._wt.length)for(let s=0;s<t._wt.length;s++)hH(t._wt[s],i._wt[s])}function hH(t,i){t.UN=i.UN,t.zpt=i.zpt}r();var oH=class{async Fj(t){await this.YAt(t,this.rW,this.KAt,this.qAt).catch(Na)}Rdt(){return new Date(qf()+this.jAt)}async YAt(t,i,s,e){let n;if(e&&(n=await this.QAt(i,e,s)),void 0===n){Ko(s);for(const e of t)if(n=await this.JAt(i,e,s),void 0!==n)break}this.jAt=void 0===n?0:n-qf()}async JAt(t,i,s){switch(i.w9){case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2012":case"urn:mpeg:dash:utc:http-iso:2014":{const e=i.XE;if(e)return await this.QAt(t,e,s);break}case"urn:mpeg:dash:utc:direct:2012":case"urn:mpeg:dash:utc:direct:2014":{const t=i.XE;if(t){const i=new Date(t).getTime();if(!S(i))return i}break}default:return}}async QAt(t,i,s){try{const e=await t.dk({Yu:i,Fk:ci.GET,ck:Bi.DT,jg:s}),n=await e.FT(),r=new Date(n).getTime();if(!S(r))return r}catch(t){Ui(t)}}constructor(t,i,s){this.rW=void 0,this.KAt=void 0,this.qAt=void 0,this.jAt=void 0,this.rW=t,this.KAt=i,this.qAt=s,this.jAt=0}},aH=class extends fr{get Fwt(){return this.ayt&&this.ayt.Fwt}get Vwt(){return this.ayt&&this.ayt.Vwt}get Dyt(){return this.ayt&&this.ayt.Dyt}get o(){return this.ayt&&this.ayt.hk.o}get GAt(){var t;return null==(t=this.ayt)?void 0:t.GAt}get $At(){var t;return null==(t=this.ayt)?void 0:t.ZAt}get Wwt(){return this.ayt?this.ayt.Wwt.map(t=>t.href):[this.tSt]}get tSt(){return this.iSt.href}get Gwt(){return this.ayt&&this.ayt.hk.Gwt}get Xwt(){return this.ayt&&this.ayt.hk.Xwt}get Zwt(){return this.ayt&&this.ayt.hk.Zwt}get Hwt(){return this.ayt&&this.ayt.hk.Hwt}get zwt(){var t,i;const s=(null==(i=this.ayt)||null==(t=i.hk.zwt)?void 0:t.Ppt())||0;return _.max(s,cH)}get hx(){return this.sSt}eSt(t){const i=this.hx;this.sSt=t,i!==this.hx&&this.So(new ZZ)}get spt(){return this.UAt}get nSt(){return this.Kp===Me.yW?this.Ayt:this.rSt}get hSt(){const t=this.nSt;if(void 0!==t)for(const i of this.spt)if(i.Tn<=t&&i.An>t)return i}get nwt(){return this.ayt&&this.ayt.hk.nwt}get Ywt(){return this.ayt&&this.ayt.Ywt}get yAt(){for(let t=this.UAt.length-1;t>=0;t-=1){const i=this.UAt[t].yAt;if(i)return i}}get Ayt(){const t=this.yAt;if(void 0===t)return;const i=t-this.oSt;return _.max(i,this.rSt)}get rSt(){for(const t of this.UAt){const i=t.nyt;if(void 0!==i)return i}}get Xk(){return Boolean(this.aSt.Xk)}get oSt(){var t,i;if(this.aSt.uSt&&this.Kp===Me.yW)return this.aSt.uSt;const s=null==(i=this.ayt)||null==(t=i.hk.Kwt)?void 0:t.Ipt();return void 0!==s?s:this.Kp===Me.yW?1.5*this.Hwt.Ipt():0}get Kpt(){return this.ayt&&this.ayt.Kpt}get Kp(){return this.ayt?this.ayt.Kp:void 0}get Qwt(){var t;return null==(t=this.ayt)?void 0:t.Qwt}async er(t,i,s){const e=[],n=[],r=t.Uwt?Zd.Dh(t.Uwt,this.iSt):this.iSt;void 0===this.ayt?(await this.cSt.Fj(t.qwt),this.ayt=new jZ(t,this.iSt,r,this.Rdt(),this.FAt),this.ayt.wn(mo.wot,this.Rs)):this.ayt.er(t,r,this.Rdt(),i);const h=this.ayt.spt;let o;if(0===h.length)o=this.UAt.slice(),Lr(this.UAt);else{const t=h[0].o;let i=0;for(;i<this.UAt.length&&this.UAt[i].o!==t;)i++;o=this.UAt.splice(0,i);for(let t=0;t<h.length;t++){const i=h[t];let r;t<this.UAt.length?r=this.UAt[t]:(r=new UZ(this,i),e.push(r)),n.push(r.er(this.dSt,s))}}await Promise.all(n),this.UAt.push(...e);for(const t of o)t.SAt();this.So(new GZ)}Rdt(){return this.cSt.Rdt()}wAt(t){const i=this.UAt.indexOf(t);if(i>0)return this.UAt[i-1]}pAt(t){const i=this.UAt.indexOf(t);if(i>=0&&i+1<this.UAt.length)return this.UAt[i+1]}ryt(){return this.ayt?this.ayt.ryt():void 0}wyt(){return this.ayt&&this.ayt.wyt()}dAt(t){this.ayt&&this.ayt.dAt(t)}kn(){this.Vo(),this.lSt=void 0,this.eSt(!1);for(const t of this.UAt)t.kn();Lr(this.UAt),this.ayt&&this.ayt.Zg()}constructor(t,i,s,e,n){super(),this.fSt=void 0,this.ayt=void 0,this.iSt=void 0,this.sSt=!0,this.UAt=[],this.aSt=void 0,this.dSt=void 0,this.lSt=void 0,this.rW=void 0,this.cSt=void 0,this.FAt=void 0,this.aSt=t,this.iSt=t.eP,this.dSt=i,this.rW=s,this.fSt=e,this.cSt=new oH(this.rW,this.fSt,this.aSt.vSt),this.FAt=n}},uH=class{get xdt(){return this.mAt}constructor(t,i,s,e,n){this.mAt=void 0,this.mAt=new aH(t,i,s,e,n)}},cH=1e3,dH=class{get Br(){return this.ayt}get W(){return this._St||(this._St=this.dE(this.gSt.jg),_e(this._St)),this._St}async dE(t){this.ayt.xdt.So(new Pt);try{await this.mSt(t),this.ayt.xdt.eSt(!0)}catch(t){throw Ui(t),this._St=void 0,this.ayt.xdt.eSt(!1),new m("The provided MPEG-DASH document could not be loaded - "+t.message)}this.pSt=this.wSt(this.gSt.jg)}async wSt(t){try{for(;this.ayt.xdt.Kp===Me.yW;)await $s(this.ySt,t)}catch(t){}}get ySt(){return this.ayt.xdt.$At&&this.ayt.xdt.Kp===Me.yW?this.bSt(this.gSt.jg):this.W}async ASt(t){Ko(t);const i=this.SSt();if(i>0){const s=_.min(i,2147483647);await hi(s,t)}try{await this.mSt(t),this.ayt.xdt.eSt(!0)}catch(t){throw new m("The provided MPEG-DASH manifest could not be loaded - "+t.message)}finally{this.TSt=void 0}}SSt(){const t=this.ayt.xdt.Rdt().getTime()-this.ayt.xdt.GAt.getTime();return this.ayt.xdt.zwt-t}kSt(t){const i=this.ayt.xdt.wyt();if(i){const s=i.getTime()-t.getTime();if(s>0)return s}this.ayt.xdt.dAt(t);const s=this.ayt.xdt.wyt();return s?s.getTime()-t.getTime():NaN}async bSt(t){const i={stack:[],error:void 0,hasError:!1};try{null!=this.TSt||(this.TSt=this.ASt(t));const s=Zr(i,ui.nm([t]),!1),e=[this.TSt,this.ESt(s.jg)].filter(Y);await Promise.race(e).catch(Na)}catch(t){i.error=t,i.hasError=!0}finally{hs(i)}}ESt(t){const i=this.ayt.xdt.Rdt(),s=this.kSt(i);if(!S(s)&&!this.Br.xdt.Dyt)return this.RSt(s,t)}async RSt(t,i){await hi(t,i);const s=this.ayt.xdt.Rdt();this.ayt.xdt.dAt(s)}async xSt(t,i){const s=await this.PSt.ISt(t,{},i);return(new XX).Jwt(s.CSt,s._k)}kn(){return this.gSt.Jg(),this.pSt=void 0,this._St=void 0,this.TSt=void 0,this.ayt.xdt.kn(),Promise.resolve()}constructor(t,i,s,e,n){this.PSt=void 0,this.ayt=void 0,this.pSt=void 0,this._St=void 0,this.TSt=void 0,this.gSt=new ui,this.mSt=async t=>{try{const i=this.ayt.xdt.Rdt(),s=await this.xSt(this.ayt.xdt.Wwt,t);await this.ayt.xdt.er(s,i,t)}catch(t){throw tt(t)&&this.ayt.xdt.eSt(!1),t}},this.PSt=e,this.ayt=new uH(t,i,s,this.gSt.jg,n)}};r(),r();var lH=class extends sh{constructor(t,i){super("lpt"),this.kpt=void 0,this.hmt=void 0,this.kpt=t,this.hmt=i}},fH=class extends fr{get hmt(){return this.clt}get Kp(){return this.Ym}get Z(){return this.NI.slice()}KV(t){t&&this.clt!==t&&this.NSt(t)}qV(t){this.clt===t&&this.NSt(void 0)}NSt(t){this.clt=t,this.So(new lH(this,this.clt))}kn(){this.Vo();for(const t of this.NI)t.jdt=void 0;Lr(this.NI)}constructor(t,i){super(),this.clt=void 0,this.NI=void 0,this.Ym=void 0,this.Ym=t,this.NI=i;for(const t of this.NI)t.jdt=this}};r(),r(),r();var Bn=class extends sh{constructor(t,i,s){super(d.Cw),this.currentTime=void 0,this.initDataType=void 0,this.initData=void 0,this.currentTime=t,this.initDataType=i,this.initData=s}};function vH(t,i,s,e,n){let r=[],h=[];for(const t of i)t.Kp===Mo.Ck?r=r.concat(t.Z):t.Kp===Mo.Nk&&(h=h.concat(t.Z));return[_H(t,r,s,e,null==n?void 0:n.preferredAudioCodecs),gH(t,h,s,e,null==n?void 0:n.preferredVideoCodecs)].filter(Y)}function _H(t,i,s,e,n){const r=me(e||[],t=>t.Mot===Mo.Ck&&t.Rt),h=[pH(r,s,t),wH(r),yH(r),bH(r,n),AH(),t=>{const i=t.filter(t=>"main"===t.Lt);return i.length>0?i:t}];return mH(i,h)}function gH(t,i,s,e,n){const r=me(e||[],t=>t.Mot===Mo.Nk&&t.Rt),h=[pH(r,s,t),bH(r,n),AH(),t=>{const i=t.filter(t=>"main"===t.Lt);return i.length>0?i:t}];return mH(i,h)}function mH(t,i){if(0===t.length)return;let s=t;for(const t of i){if(1===s.length)return s[0];s=t(s)}return s[0]}function pH(t,i,s){return e=>{const n=t?t.Dut.o:void 0;if(!Y(n))return e;const r=null==i?void 0:i.Bwt,h=s.Bwt,o=r&&h&&r.XE===h.XE,a=me(e,t=>t.Dut.o===n);return o&&a?[a]:e}}function wH(t){return i=>{const s=t?t.bs:"",e=i.some(t=>""!==t.bs)?i.filter(t=>""!==t.bs):i;if(""===s)return e;const n=e.filter(t=>t.bs===s);return n.length>0?n:e}}function yH(t){return i=>{const s=t?t.Lt:"";if(""===s)return i;const e=i.filter(t=>t.Lt===s);return e.length>0?e:i}}function bH(t,i){return t=>{if(i&&i.length>0)for(const s of i){const i=t.filter(t=>t.QI.CI.some(t=>kB(t.lrt,s)));if(i.length>0)return i}return t}}function AH(){return t=>{let i=[],s=-1/0;for(const e of t){const t=e.Dut.qX;t>s?(s=t,i=[e]):t===s&&i.push(e)}return i}}r(),r();var jc=function(t){return t.DSt="api",t.BSt="start",t}({});r();var SH={maxRetries:3,minimumBackoff:1e3,maximumBackoff:1/0},TH=class{MSt(t,i,s){const e=this.vdt.maxRetries===1/0?SH:this.vdt;return lo(()=>this.LSt(t,i,s),s,e.maxRetries,e.minimumBackoff,e.maximumBackoff)}async LSt(t,i,s){let e;for(const n of t)try{const t=new F({Yu:n,ck:Bi.DT,lk:i,Xk:this.OSt,Fk:ci.GET,Kp:Ic.pk,Uk:vs.gk,jg:s,Vk:15e3,Wk:5e3}),e=await this.rW.dk(t),r=await e.FT(s);return{CSt:r,FSt:n,_k:e._k}}catch(t){e=t}throw e}constructor(t,i,s=SH){this.rW=void 0,this.OSt=void 0,this.vdt=void 0,this.rW=t,this.OSt=i,this.vdt=s}};function ia(t){return ie(t)}function kH(t,i){const s=ie(t);return i?""+s+i:""+s}r(),r();var EH=class{async ISt(t,i,s){let e;for(const n of this.VSt)try{return await n.ISt(t,i,s)}catch(t){Ui(t),e=t}throw e}constructor(t){this.VSt=void 0,this.VSt=t}},RH=class{async ISt(t,i,s){const e=await this.iut.WSt(t);if(e)return{CSt:e.data,FSt:e.locationURL,_k:e.responseURL};throw new m("Manifest fetch from cache unsuccesful")}constructor(t){this.iut=void 0,this.iut=t}},xH=class{async ISt(t,i,s){return await this.USt.MSt(t,i,s)}constructor(t){this.USt=void 0,this.USt=t}};function IH(t,i){return new EH([new RH(i),new xH(t)])}var PH=class{async ISt(t,i,s){const e=await this.PSt.ISt(t,i,s);return await this.GSt(e),e}async GSt(t){await this.ZSt.XSt({key:ia(t.FSt),locationURL:ie(t.FSt),responseURL:ie(t._k),data:t.CSt,references:[this.HSt.o]})}constructor(t,i,s){this.PSt=void 0,this.ZSt=void 0,this.HSt=void 0,this.PSt=t,this.ZSt=i,this.HSt=s}};r();var CH=class extends sh{constructor(){super(d.Hw)}};r();var NH=class extends sh{constructor(){super(d.Zw)}};r(),r();var DH=class extends ko{zSt(t){return t.Sx=Ra.LOADED,this.tt(t),t}YSt(t){for(const i of this.Z.CI)if(i.tP===t)return i}constructor(t){super(t)}};function BH(t,i){return""===i?t:t+" "+i}r(),r(),r();var MH=class extends Pc{get Ca(){return this.hu||(this.hu=function(t){return Qr(oE(t),{get attributes(){return t.tR},get eventID(){var i;return""+(null!=(i=t.KSt)?i:"")}})}(this)),this.hu}ZO(t){return this.U===t.U}constructor(t,i,s,e,n){super(t,i,s,!1,null==n?void 0:n.toString()),this.tR=void 0,this.KSt=void 0,this.tR=e,this.KSt=n}},LH=class extends DH{qSt(t){const i=this.JV.sI(D.WV,"","","",void 0,hr.EVENT_STREAM);return i.tP=t,this.zSt(i),i}jSt(t,i,s){const e=t.w9;var n;const r=null!=(n=t.XE)?n:"";var h;const o=null!=(h=t.UN)?h:1;var a;const u=null!=(a=t.zpt)?a:mh.ZERO,c=BH(e,r);let d=this.YSt(c);d||(d=this.qSt(c));for(const e of t.sK)if(!OH(e,d)){const t=FH(e,o,u,i);t.EO>s&&d.iW(t)}}async Un(t){await this.hr(),this.PAt=t,this.PAt.wn(d.Gw,this.QSt),this.QSt()}async hr(){this.PAt&&(this.PAt.mn(d.Gw,this.QSt),this.PAt=void 0);for(const t of this.Z.CI)this.JV.sW(t);await super.hr()}$V(t,i,s){return sx(t,i,s)}constructor(t){super(t),this.PAt=void 0,this.QSt=()=>{var t,i;const s=null!=(i=null==(t=this.PAt.ryt())?void 0:t.Tn)?i:0;if(s>0)for(const t of this.Z.CI)St(t,s);for(const t of this.PAt.spt)if(t.An>s)for(const i of t.Mwt)this.jSt(i,t,s)}}};function OH(t,i){const s=t.o;if(void 0!==s){if(me(i.L.CI,i=>i.KSt===s&&i.U===t.hk))return!0}return!1}function FH(t,i,s,e){const n=t.o,r=t.$B.toSigned().subtract(s),h=t.ct,o=t.hk,a=t.tR,u=r.toNumber()/i+e.Tn,c=h?h.toNumber()/i:void 0,d=void 0!==c?u+c:e.AAt;return new MH(u,d,o,a,n)}function VH(t,i,s,e,n){const r=[],h=me(s,t=>t.w9===Cg);if(void 0===h)return;const o=h.XE?function(t){const i=t.split(":",1)[0];switch(i){case"cbcs":case"cenc":return i;default:return}}(h.XE.toLowerCase()):"cenc";if(void 0!==o){for(const i of s)if(i.w9!==Cg)for(const s of im(i.w9)){var a;const e=n&&i.y9?[i.y9]:[];var u;const h=null!=(u=null==(a=t.clearkey)?void 0:a.keys)?u:[];r.push({TS:s,MG:e,OG:void 0,XU:void 0,FG:h})}if(r.length)return{cU:t,kmt:{JSt:o,dU:h.dU},Tmt:r,$St:i===Mo.Ck?e.slice():[],tTt:i===Mo.Nk?e.slice():[],S9:!1}}}function WH(t,i){if(!t)return i;if(!i)return t;const s=[],e=Se();var n;return UH(s,e,t.Tmt),UH(s,e,i.Tmt),{cU:t.cU,kmt:{JSt:t.kmt.JSt,dU:null!=(n=t.kmt.dU)?n:i.kmt.dU},Tmt:s,$St:GH(t.$St,i.$St,Ft),tTt:GH(t.tTt,i.tTt,Ft),S9:t.S9||i.S9||!1}}function UH(t,i,s){for(const e of s){const s=e.TS.Jp;let n;i.has(s)?(n=i.get(s),n.MG=GH(n.MG,e.MG,XH)):(n=Jr({},e),t.push(n),i.set(s,n))}}function GH(t,i,s){const e=t.slice();for(const t of i)s(e,t)||e.push(t);return e}function XH(t,i){for(const s of t)if(fu(s,i))return!0;return!1}function ZH(t,i,s){let e;const n=t.CG;if(n){const r=t.iK,h=[];for(const i of t.lrt)h.push(r+'; codecs="'+i+'"');e=VH(i||{},t.Kp,n,h,s)}for(const n of t.nat)e=WH(e,HH(n,i,s));return e}function HH(t,i,s){return VH(i||{},t.Kp,t.CG||[],[t.GT],s)}function zH(t){return t?t.Tmt.map(i=>{const s=YH(t.cU,i.TS),e=t.kmt.JSt;return{TS:i.TS,MG:i.MG,XU:i.XU,MX:[{initDataTypes:[i.TS.jp],audioCapabilities:KH(t.$St,e,null==s?void 0:s.audioRobustness),videoCapabilities:KH(t.tTt,e,null==s?void 0:s.videoRobustness),persistentState:null==s?void 0:s.persistentState,distinctiveIdentifier:null==s?void 0:s.distinctiveIdentifier}],FG:i.FG}}):[]}function YH(t,i){switch(i.Kp){case R.Xp:return t.widevine;case R.Gp:return t.playready;case R.zp:return t.fairplay;case R.Zp:case R.Hp:return t.clearkey}}function KH(t,i,s){if(0!==t.length)return t.map(t=>({contentType:t,encryptionScheme:i,robustness:s}))}function qH(t,i){const s=t=>{const s=i.indexOf(t.TS.Jp);return s>=0?s:i.length};return Xs(t,(t,i)=>s(t)-s(i))}r(),r();var jH=class extends DH{qSt(t){const i=this.JV.sI(D.WV,t.o,"thumbnails","",!1,hr.DEFAULT);return i.Hk=Z.Kn,this.zSt(i),i}async Un(t){await this.hr(),this.PAt=t,this.PAt.wn(d.Gw,this.er),this.er()}iTt(t){this.sTt(t),this.eTt()}eTt(){const t=[];for(const i of this.Z.CI)this.nTt(i)||t.push(i);for(const i of t)this.it(i)}sTt(t){const i=[];for(const s of this.ilt)-1===t.indexOf(s)&&i.push(s);for(const t of i)is(this.ilt,t)}async hr(){this.PAt&&(this.PAt.mn(d.Gw,this.er),this.PAt=void 0);for(const t of this.ilt)t.mn(mo.wot,this.rTt);this.ilt.length=0;for(const t of this.Z.CI)this.JV.sW(t);await super.hr()}$V(t,i,s){return sx(t,i,s)}kn(){return this.rTt=void 0,super.kn()}hTt(){var t,i;const s=null!=(i=null==(t=this.PAt.ryt())?void 0:t.Tn)?i:0;if(s>0)for(const t of this.Z.CI)St(t,s)}oTt(t){return this.Z.CI.some(i=>i.o===t.o)}aTt(t){return me(this.Z.CI,i=>i.o===t.o)}nTt(t){return this.ilt.some(i=>t.o===i.o)}constructor(t){super(t),this.ilt=[],this.rTt=void 0,this.PAt=void 0,this.er=()=>{const t=[];for(const i of this.PAt.spt)for(const s of i.xlt)if(s.Kp===Mo.Dk&&s.nat.length>0){const i=s.nat[0];t.push(i),this.oTt(i)||this.qSt(i),-1===this.ilt.indexOf(i)&&(this.ilt.push(i),i.wn(mo.wot,this.rTt)),this.uTt(i)}this.iTt(t)},this.uTt=t=>{const i=this.aTt(t);i&&t&&i.Hk!==Z.Nh&&(this.hTt(),function(t,i){const s=t.Jrt,e=t.pyt();if(!e)return;const n=e.Oyt,r=e.Fyt,h=t.Ti,o=t.Mi,[a,u]=function(t){for(const i of t)if(eo(i.w9,JH)||eo(i.w9,$H)){const t=i.XE.match(QH);if(t){const[,i,s]=t;return[Number(i),Number(s)]}}return[1,1]}(t.twt);let c=n;for(;c&&c.hut<=r.hut;){const e=t.vyt.ct||c.ct,n=tz(i,c,t.Dct(c).Yu,h,o,a,u,e);for(const t of n)i.iW(t);c=s.Pct(c)}}(t,i))};const i=this;this.rTt=function(){i.uTt(this)}}},QH=/^(\d+)x(\d+)$/,JH="http://dashif.org/guidelines/thumbnail_tile",$H="http://dashif.org/thumbnail_tile";function tz(t,i,s,e,n,r,h,o){const a=[],u=i.kO,c=r*h,d=e/r,l=n/h,f=_.round(d),v=_.round(l),g=o/c;if(1===c){const i=u+g;return iz(t,u,i,s)?a:[new Pc(u,i,s,!1)]}for(let e=0;e<h;e++)for(let n=0;n<r;n++){const h=u+(e*r+n)*g,o=h+g,c=s+"#xywh="+_.round(n*d)+","+_.round(e*l)+","+f+","+v;if(iz(t,h,o,c)||a.push(new Pc(h,o,c,!1)),o>=i.EO)return a}return a}function iz(t,i,s,e){return t.L.CI.some(t=>t.kO===i&&t.EO===s&&t.U===e)}r(),r(),r(),r();var sz=class extends Pc{get JB(){return this.cTt}get XE(){return this.dTt}get lTt(){return this.fTt}get Ca(){return this.hu||(this.hu=function(t){return Qr(oE(t),{get schemeIDURI(){return t.JB},get value(){return t.XE},get emsgID(){return t.lTt}})}(this)),this.hu}ZO(t){return L(this.U,t.U)}constructor(t,i,s,e,n,r){super(t,i,r,!1),this.cTt=void 0,this.dTt=void 0,this.fTt=void 0,this.cTt=s,this.dTt=e,this.fTt=n}},ez=class t extends DH{Ldt(i,s,e){const n=Co.AN(xh(i));if(!n)return;const r=function(t,i){const s=[];for(const e of t)aT(e,i)&&s.push(e);return s}(n,Ci.FC);if(r.length){const i=t.vTt(n,s,e);this._Tt(r,i,e)}}_Tt(t,i,s){for(const e of t){let t;t=1===e.yN?e.$B.toNumber()/e.UN+s:i+e.sM/e.UN;const n=t+e.tM/e.UN;"https://aomedia.org/emsg/ID3"===e.JB||"https://developer.apple.com/streaming/emsg-id3"===e.JB?this.gTt(e,t):this.mTt(e,t,n)}}mTt(t,i,s){const e=BH(t.JB,t.XE);let n=this.YSt(e);n||(n=this.pTt(e),this.zSt(n)),n.iW(new sz(i,s,t.JB,t.XE,t.o,t.iM))}gTt(t,i){const s=aL(xh(t.iM));if(!s)return;const e=BH(t.JB,t.XE);let n=this.YSt(e);n||(n=this.wTt(e),this.zSt(n));for(const t of s.j4){const s=new pL(i,t);LM(s,n.L.CI),n.iW(s)}}static vTt(t,i,s){const e=uT(t,Ci.VC);return e?uh(e.vM,e.UN)+s:i}pTt(t){const i=this.JV.sI(D.WV,"","","",void 0,hr.EMSG);return i.tP=t,i.Hk=Z.$I,i}wTt(t){const i=this.JV.sI(D.WV,"","","",void 0,hr.ID3);return i.tP=t,i.Hk=Z.$I,i}$V(t,i,s){return sx(t,i,s)}async hr(){for(const t of this.Z.CI)this.JV.sW(t);await super.hr()}constructor(t){super(t)}},nz=class extends ez{async Un(t){await this.hr(),this.PAt=t,this.PAt.wn(d.Gw,this.QSt),this.QSt()}async hr(){this.PAt&&(this.PAt.mn(d.Gw,this.QSt),this.PAt=void 0),await super.hr()}constructor(...t){super(...t),this.PAt=void 0,this.QSt=()=>{var t,i;const s=null!=(i=null==(t=this.PAt.ryt())?void 0:t.Tn)?i:0;this.ZV(s)}}};r(),r();var rz=class{Fct(t,i){return this.yTt?this.iut.Fct(t,i):Promise.resolve(!1)}tut(t,i){return this.yTt?this.iut.tut(t,i):Promise.resolve(void 0)}async WSt(t){const i=await this.iut.WSt(t);return this.yTt=void 0!==i,i}UQ(t){return this.iut.UQ(t)}constructor(t){this.iut=void 0,this.yTt=!1,this.iut=t}};r();var hz=class extends KT{DL(){var t;return null!=(t=this.CL)?t:0}uP(){this.oa.OR=1/0}BL(t,i,s){return!1}ML(){return!0}constructor(t,i,s){super(t,i,s)}},oz=[d.Yw,d.qw,d.$w,d.Xw,d.ey],az=[d.Kw,d._y,d.Mw,d.Dw],uz=class t extends fr{bTt(t){return!!this.eX&&this.eX.SJ(t)}async Xm(t){this.eX=await this.SL.Un(t),this.ATt(),this.STt(),this.eX.x5(this.ct)}TTt(t){return this.eX.kJ(t)}kTt(t){return this.eX.RJ(t)}async ETt(){this.RTt=this.xTt,this.eX&&(await this.SL.hr(),this.eX=void 0)}P3(){this.eX.P3()}y3(){const t=this.ct;this.eX.ct<t&&this.eX.x5(t),this.eX.y3()}async ITt(t){const i=this.eX,s=[];i.Y3&&s.push(MB(i.Y3,t)),i.K3&&s.push(MB(i.K3,t)),await Promise.all(s)}PTt(t,i,s,e,n,r){const h=this.SL,o=this.eX;return new oX(h,o,t,i,s,e,n,r,this.CTt,h,this.pmt,this.vdt,this.Dmt,this.lX)}NTt(t,i,s){return t.kJ(i,s,this.eX)}async DTt(t,i,s,e){const n=this.PTt(this.rW,this.kZ,this.iut,this.Ac,t,e);return n.wn(mo.bot,this.BTt),n.wn(d.Xw,this.Rs),await n.Fj(i,s),n}MTt(t){void 0===t&&(t=!1),this.LTt.Jg(),this._8.Jg(),this.OTt.Jg(),this.OTt=new ui,this.FTt=Ce(this.VTt(this.WTt,this.g8,this.FTt,t,this.OTt.jg),this.OTt).catch(this.mpt)}async VTt(t,i,s,e,n){await Promise.all([t,i,s]),Ko(n),await $s(this.UTt.Yy,n);const r=this.GTt;await r.jot(),this.y3(),Ko(n);const h=r.Mc,o=r.gpt,a=r._pt;let u=this.XTt(h,a,h,o,!1),c=this.ZTt(a,u);!e&&this.bTt(c)?await this.HTt(a,u,c):(u=this.XTt(h,a,h,o,!0),c=this.ZTt(a,u),await this.zTt(a,u,c,n)),Ko(n),this.Rx?this.By(this.OR):this.YTt(),this.KTt()}async HTt(t,i,s){const e=this.GTt;await this.TTt(s),this.qTt=s,await this.NTt(e,t,i),await e.Jot(ba.Dht)}async zTt(t,i,s,e){const n=this.GTt;this.A8(),this.jTt();const r=this.QTt;await this.ETt(),await this.Xm(s),this.qTt=s,await this.NTt(n,t,i);try{const t=this.JTt(r,!1,!0,e);_e(t),await n.Jot(ba.Dht),await t}finally{this.x8(),this.$Tt()}}get ht(){return this.qL}get jG(){const t=this.QTt,i=this.tkt,s=i.VM(t);if(-1!==s)return{Tn:i.Tn(s),An:i.An(s)}}get tkt(){var t,i,s;const e=null!=(s=null==(t=this.GTt)?void 0:t.IR)?s:ZT.tL();var n;const r=null!=(n=null==(i=this.ikt)?void 0:i.IR)?n:ZT.tL();return e.LM(r)}get IR(){return this.tkt._s()}get NR(){var t;const i=null==(t=this.ayt)?void 0:t.xdt,s=null==i?void 0:i.Vwt;if(!i||!s)return;const e=s.getTime(),n=1e3*this.OR;return new Date(n+e)}set NR(t){var i;const s=null==(i=this.ayt)?void 0:i.xdt,e=null==s?void 0:s.Vwt;if(!t||!s||!e)return;const n=e.getTime()/1e3,r=t.getTime()/1e3;this.By(r-n)}get bt(){return this.Ac}get QTt(){return void 0!==this.U9?this.U9:void 0!==this.skt?this.skt:this.SL.OR}get OR(){return this.QTt}set OR(t){this.WR(t)}WR(t,i){this.By(t,t===1/0)}get ct(){let t=NaN;return this.GTt&&this.GTt.ipt?t=this.GTt.An:this.ayt&&void 0!==this.ayt.xdt.Kp&&(t=this.ayt.xdt.Zwt?this.ayt.xdt.Zwt.Ipt():1/0),t}get An(){return this.ct}get GR(){return this.Rx?this.G9():!(!this.GTt||!this.GTt.ipt)&&this.SL.GR}G9(){return!!this.Rx&&(!(!this.GTt||!this.GTt.ipt)&&this.QTt===this.GTt.An)}get lt(){return this.$G}get HR(){return this.tX}get YR(){}get qR(){}ekt(){var t;const i=this.nkt;if(0===i.V)return!0;var s;const e=null!=(s=null==(t=this.jG)?void 0:t.An)?s:this.QTt,n=i.Tn(0);return e>=n||we(e,n,.001)}rkt(){var t;if(!this.ayt)return!1;if(this.ayt.xdt.Kp!==Me.yW)return!1;const i=null==(t=this.GTt)?void 0:t.Mc;if(i&&i.Aot)return!0;const s=[];for(const t of this.ayt.xdt.spt){const i=t.nyt,e=t.AAt;void 0!==i&&void 0!==e&&s.push(i,e)}const e=new ZT(s).MM();return function(t,i,s){if(!i.V||!s.V)return ZT.tL();const e=i.Tn(0),n=i.An(i.V-1),r=t.Mn(s).NM().Mn(t).LM(i);return ZT.$M(r.Tn(0),r.An(r.V-1)).OM(r).HM((t,i)=>t<e&&i<=n&&i-t>$)}(this.tkt,this.nkt,e).V>0}get $R(){return Jr({},this.xTt,{eO:bu.Bg._G(),nO:this.hkt,rO:{amountOfBufferedAudioSegments:this.okt,amountOfBufferedVideoSegments:this.akt}})}get xTt(){return function(t,i){return{tO:t.tO+i.tO,iO:t.iO+i.iO,sO:t.sO+i.sO}}(this.RTt,this.SL.tx())}get ix(){return this.SL.ix}set ix(t){this.SL.ix=t}get ux(){return this.Z9?this.ukt:this.GTt&&this.GTt.ipt?this.ckt:this.ukt}get vx(){return this.SL.vx}set vx(t){this.SL.vx=t}get mx(){let t=this.Ho;return this.GTt&&(t=t.LM(this.dkt)),t.MM(.1)._s()}get dkt(){return this.SL.mx}lkt(t){this.Ho=this.Ho.LM(t)}get yx(){return this.sX}set yx(t){this.sX=t,this.fkt()}get Sx(){let t=this.SL.Sx;return this.vkt&&(t=_.max(pi.Qn,t)),t}get nkt(){return this._kt(!1)}get gkt(){return this._kt(!0)}get kx(){return this.nkt._s()}get Rx(){return this.pZ||this.mkt}get mkt(){return this.SL.Rx}get Y5(){return this.SL.Y5}get nX(){}get pkt(){var t,i;return null!=(i=null==(t=this.ayt)?void 0:t.xdt.Kp)?i:Me.wW}get nt(){return this.Gl}get rt(){return this.JL}get Nx(){var t;return bD(this.SL)&&(this.SL.Nx||(null==(t=this.wkt())?void 0:t.Mi))||0}get Mx(){var t;return bD(this.SL)&&(this.SL.Mx||(null==(t=this.wkt())?void 0:t.Ti))||0}get Ox(){return this.SL.Ox}set Ox(t){this.SL.Ox=ss(t,0,1)}get Wx(){return this.rX}get Gx(){return!1}set Gx(t){}get hX(){return this.oX}ykt(t){t.wn(oz,this.Rs),t.wn(d.uy,this.bkt),t.wn(d.Aw,this.Akt),t.wn(sa.ma,this.Skt),t.wn(d.Tw,this.Tkt),t.wn(d.qw,this.kkt),t.wn("lpt",this.Ekt),t.wn("Gmt",this.Ekt)}Rkt(t){t.mn(oz,this.Rs),t.mn(d.uy,this.bkt),t.mn(d.Aw,this.Akt),t.mn(sa.ma,this.Skt),t.mn(d.Tw,this.Tkt),t.mn(d.qw,this.kkt),t.mn("lpt",this.Ekt),t.mn("Gmt",this.Ekt)}xkt(t){t.wn(d.Yw,this.Rs)}Ikt(t){t.mn(d.Yw,this.Rs)}wkt(){if(!this.GTt)return;const t=me(this.GTt._pt,t=>t.Mot===Mo.Nk);return t?t.KI:void 0}_kt(t){var i;const s=null==(i=this.ayt)?void 0:i.xdt;if(!s)return ZT.tL();const e=s.rSt;let n=t?s.yAt:s.Ayt;if(void 0===e||void 0===n)return ZT.tL();if(!t){const t=this.dkt;t.V>0&&t.An(t.V-1)>n&&(n=_.min(t.An(t.V-1),s.yAt))}const r=this.ct;return isFinite(r)&&r>n&&(n=r),ZT.$M(e,n).PM()}async Un(t,i){let s,e;Ko(i);const n=this.ayt.xdt;try{s=n.hSt,e=n.nSt}catch(t){throw new m("Something went wrong determining the start of the provided MPEG-DASH stream")}if(!s)throw new m("Something went wrong determining the initial Period of the provided MPEG-DASH stream");if(void 0===e)throw new m("Something went wrong determining the start time of the provided MPEG-DASH stream");t.textTracks&&this.Pkt(t.textTracks),this.A8();const r=this.Tlt(s),h=vH(s,r,void 0,void 0,this.qmt),o=this.XTt(s,h,s,h,!0);h.forEach(t=>t.Rt=!0);const a=this.ZTt(h,o);await this.Xm(a),this.qTt=a,Ko(i);const u=await this.DTt(s,r,h,o);Ko(i),this.Ckt(u),this.x8(),Ko(i),await u.Jot(),Ko(i),!this.Nkt&&e>0&&this.By(e,!0,jc.BSt),this.pZ||(this.YTt(),this.Dkt())}YTt(){this.LTt.Jg(),this.LTt=new ui,this.WTt=Ce(this.Bkt(this.WTt,this.FTt,this.LTt.jg),this.LTt).catch(this.mpt)}Mkt(){this.LTt.Jg()}async Bkt(t,i,s){for(await Promise.all([t,i]),Ko(s);;){var e;const t=null==(e=this.GTt)?void 0:e.Mc;if(!t){0;break}if(!await this.Lkt(t,s)){0;break}}}async Lkt(t,i){var s;Ko(i);const e=this.GTt;for(0;this.ayt.xdt.Kp===Me.yW&&void 0===(null==(s=this.pAt(t))?void 0:s.nyt);){try{await $s(this.Okt.ySt,i)}catch(t){if(Ui(t),this.Fkt())return!0;throw t}await this.Vkt()}for(Ko(i),await this.Vkt(),Ko(i);!e.jmt();)await e.pw(IU.Blt,i),await this.Vkt();Ko(i),await this.Vkt(),Ko(i);const n=this.pAt(t);return n?(this.Wkt(n)?await this.Ukt(n,i):await this.Gkt(n,i),!0):(this.P3(),!1)}Fkt(){const t=this.jG;return Y(t)&&t.An>this.OR}Wkt(t){var i,s,e,n,r;const h=null!=(r=null==(i=this.Ac)?void 0:i.seamlessSwitchStrategy)?r:Uh.LL;if(h===Uh.OL)return!0;if(h===Uh.FL)return!1;const o=this.GTt,a=null==o?void 0:o.Mc,u=null==o?void 0:o._pt,c=vH(t,this.Tlt(t),a,u,this.qmt),d=this.XTt(t,c,a,u,!1);if(h===Uh.CLEAR_ONLY&&((null==(s=this.GTt)?void 0:s.Smt)||d)||h===Uh.SAME_DRM_ONLY&&!((null==(e=this.GTt)?void 0:e.Smt)&&d||!(null==(n=this.GTt)?void 0:n.Smt)&&!d))return!1;const l=this.ZTt(c,d);return this.bTt(l)}Xkt(){return!0}Zkt(t){const i=this.Hkt();for(const s of i)s!==t&&(s.Hk=Z.Nh)}KTt(){if(void 0!==this.zkt){if(this.zkt.sP){const t=me(this.ht.CI,t=>t.Rt);void 0!==t&&this.zkt.bs===t.bs||(this.zkt.Hk=Z.Nh)}}else this.Ykt()}Ykt(){if(this.Hkt().length)return;const t=me(this.ht.CI,t=>t.Rt);if(void 0===t)return;const i=this.nt.CI.filter(t=>t.sP);for(const s of i)if(s.bs===t.bs)return s.Hk=Z.Kn,void(this.zkt=s)}Hkt(){return this.nt.CI.filter(t=>t.Hk===Z.Kn&&(t.Lt===D.FV||t.Lt===D.OV))}Kkt(t){if(t&&this.zkt){const i=function(t,i){if(""===t.bs)return;return i.filter(i=>i.bs===t.bs)[0]}(this.zkt,t.nt.CI);i&&(i.Hk=Z.Kn)}}async Ukt(t,i){var s,e;const n=this.GTt;let r=this.ikt;const h=this.qTt;try{Ko(i);const s=n.Mc,e=n._pt,h=this.Tlt(t);lz(n.Tpt,h);const o=vH(t,h,s,e,this.qmt),a=this.XTt(t,o,s,e,!1);o.forEach(t=>t.Rt=!0);const u=this.ZTt(o,a);for(0,await n.jot(),this.y3(),Ko(i),r&&r.Mc===t?(this.bTt(u)&&await this.TTt(u),this.qTt=u):(r&&await r.kn(!0),this.bTt(u)&&await this.TTt(u),this.qTt=u,r=await this.DTt(t,h,o,a),this.ikt=r,this.xkt(r),this.qkt.MI=r.nt,r.$ot(n)),await r.Jot(),Ko(i);this.QTt<t.Tn;)await this.SL.pw(d.vy,i);Ko(i),this.Ckt(r)}catch(t){throw hc(t)&&(r&&await r.jot(),h&&this.qTt!==h&&(this.bTt(h)&&await this.TTt(h),this.qTt=h)),t}(null==(e=this.Ac)||null==(s=e.dash)?void 0:s.forceSeekToSynchronize)&&await this.jkt(t,i)}async jkt(t,i){const s=Date.now()/1e3;if(void 0===this.Qkt)this.Qkt=s;else if(s-this.Qkt>900){this.Qkt=s,this.jTt();const e=_.max(this.QTt,t.Tn);try{await this.JTt(e,!1,!0,i)}finally{this.$Tt()}}}async Gkt(t,i){for(Ko(i),await this.GTt.jot(),this.y3(),await this.ITt(t.Tn),Ko(i),this.P3();!this.SL.GR&&this.QTt<t.Tn;)await this.SL.pw([d.vy,d.Nw],i);Ko(i);const s=this.GTt.Mc,e=this.GTt._pt,n=this.Tlt(t);lz(this.GTt.Tpt,n);const r=vH(t,n,s,e,this.qmt),h=this.XTt(t,r,s,e,!0);r.forEach(t=>t.Rt=!0);const o=this.ZTt(r,h);this.GTt&&(this.Jkt.mn(M.pa,this.$kt),await this.GTt.kn(),this.Jkt.wn(M.pa,this.$kt),this.GTt=void 0),this.ikt&&(await this.ikt.kn(),this.ikt=void 0),this.jTt(),this.A8();const a=_.max(this.QTt,t.Tn);await this.ETt(),await this.Xm(o),this.qTt=o;const u=await this.DTt(t,n,r,h);this.Ckt(u);try{const t={stack:[],error:void 0,hasError:!1};try{const s=this.JTt(a,!1,!0,i);_e(s),await u.Jot();const e=Zr(t,ui.nm([i]),!1);await Promise.race([s,u.pw([IU.Blt],e.jg)])}catch(i){t.error=i,t.hasError=!0}finally{hs(t)}}finally{this.x8(),this.$Tt()}}async Vkt(){const t=this.ikt;t&&t.Mc.Aot&&(await t.kn(!0),this.ikt=void 0)}static tEt(t,i){const s=[],e=[];let n=!i.some(t=>t.Elt.some(t=>"main"===t.XE));for(const t of i){if(-1!==s.indexOf(t))continue;const r=cz(t.Udt.concat(t.Elt),n);n=!1;const h=t.nat.map(t=>t.Tot),o=new SU(t,h,r),a=dz(t,i);for(const t of a)o.slt(t),s.push(t);e.push(o)}return new fH(t,e)}Tlt(i){const s=[],e=[];for(const t of i.Hmt)LT(t.Kp)&&(0===t.nat.length?this.So(new xU("No supported representation found in the AdaptationSet with mimetype : "+t.Kp)):t.Kp===Mo.Ck?s.push(...t.xlt):e.push(...t.xlt));const n=[];return s.length>0&&n.push(t.tEt(Mo.Ck,s)),e.length>0&&n.push(t.tEt(Mo.Nk,e)),n}ZTt(t,i){var s,e,n,r,h,o,a,u;const c=t.map(t=>{var i;return Rr.qct(null!=(i=t.tlt)?i:t.nat,UT(t.Mot,this.qmt))}).map(t=>({GT:t.GT})),d=null==(e=this.Ac)||null==(s=e.dash)?void 0:s.desiredTimescale;var l;const f=(null==(n=this.Ac)?void 0:n.seamlessSwitchStrategy)!==Uh.FL&&(null==(r=this.Ac)?void 0:r.seamlessSwitchStrategy)!==Uh.CLEAR_ONLY&&(null==(h=this.Ac)?void 0:h.seamlessSwitchStrategy)!==Uh.SAME_DRM_ONLY&&(null!=(l=null==(a=this.Ac)||null==(o=a.dash)?void 0:o.needsTimescaleShifting)?l:Zd.Zs.Dm),v=null==(u=this.Ac)?void 0:u.useManagedMediaSource;return{Kp:xt.yW,D5:c,aX:zH(i),S9:null==i?void 0:i.S9,Dm:f,R3:d,X5:v}}static iEt(t,i){if(!t.length)return;let s;for(const e of t){const t=0===e.rlt.length;s=WH(s,ZH(e.Dut,i,t))}return(null==i?void 0:i.preferredKeySystems)&&s&&(s.Tmt=qH(s.Tmt,i.preferredKeySystems)),s}XTt(i,s,e,n,r){var h,o;const a=this.Ac.contentProtection;let u=t.iEt(s,a);if(void 0!==u)return u;var c;const d=null!=(c=null==(h=this.Ac)?void 0:h.seamlessSwitchStrategy)?c:Uh.LL;if(d===Uh.FL||d===Uh.CLEAR_ONLY||d===Uh.SAME_DRM_ONLY)return;const l=null==(o=this.GTt)?void 0:o.Smt;if(!r&&void 0!==l){const t=!l.S9;if(d===Uh.LL&&t&&!this.Xkt())return;return l}const f=!r&&d===Uh.LL;return u=this.sEt(i,a,e,n,f),void 0!==u?(u.S9=!0,u):void 0}sEt(i,s,e,n,r){let h=i,o=!1;for(;;){if(h=o?this.wAt(h):this.pAt(h),void 0===h){if(o)return;o=!0,h=i;continue}const a=vH(h,this.Tlt(h),e,n,this.qmt),u=t.iEt(a,s);if(r){const t=this.ZTt(a,u);if(!this.bTt(t))return}if(void 0!==u)return u}}Pkt(t){for(const i of t)i.src&&this.mX.eW(i);Ue(this.mX.Z)}zx(){var t;const i=this.ux;this.ukt=!0,i||(this.Z9||(this.eEt(new us),this.nEt()),(null==(t=this.qG)?void 0:t.sL)&&this.qG.Kx(),this.rEt())}Yx(){this.hEt||(this.hEt=new gs),this.oEt();const t=this.hEt.Yy;return _e(t),t}oEt(){if(this.ukt=!1,this.s8=!0,this.aEt=!1,this.fkt(),this.GR){const t=this.nkt;t.V>0&&this.By(t.Tn(0))}this.Z9||this.n8().then(this.uEt,this.eEt),this.BTt(),this.rEt()}get ckt(){return this.SL.ux}n8(){return this.SL.Yx()}nEt(){this.SL.zx()}A8(){this.Z9||(this.ukt=this.ux,this.Z9=!0,this.nEt())}x8(){this.Z9&&(this.Z9=!1,this.ukt||this.n8().then(this.uEt,this.eEt),this.BTt(),this.rEt())}rEt(){const t=this.LW,i=this.ux;t!==i&&(this.LW=i,i?this.So(new Pi(this.OR)):this.So(new Ts(this.OR)))}By(t,i,s){return void 0===i&&(i=!1),void 0===s&&(s=jc.DSt),this.Nkt=!0,this.LTt.Jg(),this._8.Jg(),this.pZ=!0,this.U9=t,this.aEt=this.aEt&&this.G9(),this.lkt(this.dkt),this.cEt(new ul(this.OR)),this._8=new ui,this.g8=Ce(this.m8(t,this.WTt,this.g8,this.FTt,this._8.jg,i,s),this._8).catch(this.mpt),this.g8}dEt(){this._8.Jg()}async m8(t,i,s,e,n,r,h,o){var a;void 0===r&&(r=!1),void 0===h&&(h=jc.DSt),void 0===o&&(o=!1),null==(a=this.qG)||a.Kx();try{var u,c;0,await Promise.all([i,s,e]),Ko(n),await $s(this.UTt.Yy,n);const a=this.nkt.CM(t);this.U9=a;const d=o||(null==(c=this.Ac)||null==(u=c.dash)?void 0:u.forceHardSwitchWhenSeekingBackwards)&&a<=this.OR,l=this.lEt(a),f=this.GTt;if(d||!f||!f.kx.Cr(a)&&h!==jc.BSt&&f.Mc!==l){if(l){let t=this.ikt;if(this.A8(),f&&await f.jot(),t&&t.Mc===l&&!d){const i=this.ZTt(t.gpt,t.Smt);this.y3(),this.bTt(i)&&await this.TTt(i),this.qTt=i}else{t&&await t.kn(!0);const i=this.Tlt(l);f&&lz(f.Tpt,i);const s=null==f?void 0:f.Mc,e=null==f?void 0:f._pt,n=vH(l,i,s,e,this.qmt);let r=this.XTt(l,n,s,e,!1);n.forEach(t=>t.Rt=!0);let h=this.ZTt(n,r);this.Wkt(l)&&!d?(this.y3(),this.bTt(h)&&await this.TTt(h)):(r=this.XTt(l,n,s,e,!0),h=this.ZTt(n,r),f&&(this.Jkt.mn(M.pa,this.$kt),await f.kn(),this.Jkt.wn(M.pa,this.$kt),this.GTt=void 0),await this.ETt(),await this.Xm(h)),this.qTt=h,t=await this.DTt(l,i,n,r),this.ikt=t,this.qkt.MI=t.nt,this.xkt(t),t.$ot(this.GTt)}await t.Jot(ba.Mht),this.Ckt(t)}}else{0;const t=this.ikt;if(t&&!t.ept){await t.jot(),this.y3();const i=this.ZTt(f.gpt,f.Smt);this.bTt(i)&&await this.TTt(i),this.qTt=i}}0;const v=this.JTt(a,r,!1,n);_e(v),this.U9=void 0,await this.GTt.Jot(ba.Mht),Ko(n),this.YTt(),await v,Ko(n),this.x8(),this.pZ=!1,this.fEt(new Wi(this.OR)),this.Dkt()}catch(t){if(hc(t))return void 0;0}}Dkt(){if(this.ux||this.Rx||void 0===this.NL)return;const t=this.OR;var i,s;this.OR+this.NL-this.Wx.Cd.maximumOffset<t?null==(i=this.qG)||i.Tn():null==(s=this.qG)||s.Kx()}async JTt(t,i,s,e){let n,r,h=!0,o=t;for(;;){const a={stack:[],error:void 0,hasError:!1};try{const u=this.gkt;if(u.V>0){const i=u.CM(t);o!==i&&(u.Cr(o)&&this.ayt.xdt.Kp===Me.yW||(o=i,h=!0))}if(h)h=!1,null==r||r.Jg(),r=new ui,r.$g(e),n=Ce(this.vEt(o,i,s,r.jg),r),_e(n);else if(!this.mkt&&!this.Y5)break;const c=Zr(a,ui.nm([e]),!1);await Promise.race([n,this.pw([d.$w,d.Iw],c.jg),this.ayt.xdt.pw(mo.wot,c.jg)])}catch(t){a.error=t,a.hasError=!0}finally{hs(a)}}}async vEt(t,i,s,e){for(this.SL.By(t,i,s);this.mkt||this.Y5;)await this.SL.pw([d.Qw,d.Vw],e)}jTt(){void 0===this.skt&&(this.skt=this.QTt,this.SL.mn(d.Jw,this.cEt),this.SL.mn(d.Qw,this.fEt))}$Tt(){if(void 0===this.skt)return;const t=this.QTt;this.skt=void 0,this.SL.wn(d.Jw,this.cEt),this.SL.wn(d.Qw,this.fEt),this.QTt!==t&&this.Nc()}_Et(t){this.Ho=this.Ho.LM(t)}lEt(t){const i=this.ayt.xdt,s=i.spt.filter(t=>t.ct>=.2);if(0===s.length)return;const e=s[0];if(t<=e.Tn)return e;for(const i of s)if(i.An>t)return i;return i.Kp!==Me.yW?s[s.length-1]:void 0}wAt(t){let i=t.Apt;for(;i&&i.ct<.2;)i=i.Apt;return i}pAt(t){let i=t.Spt;for(;i&&i.ct<.2;)i=i.Spt;return i}async Ta(t,i,s){const e={stack:[],error:void 0,hasError:!1};try{var n;if(this.lX.NG(t.contentProtection),this.gEt(),this.Ac&&!ec(this.Ac)&&await this.hr(),!t||ec(t))return;const h=Zr(e,ui.nm([s]),!1);this.hW=ui.nm([h.jg]),this.Ac=t,this.mEt=i,this.qmt=t.abr,this.Dmt=t.ignoreEmbeddedTextTrackTypes;const o=IH(new TH(this.rW,Boolean(this.Ac.useCredentials),this.vdt),this.iut);var r;if(this.eSt(!0),this.Okt=new dH({eP:Zd.Dh(this.Ac.src),uSt:null!=(r=null==(n=this.Ac.latencyConfiguration)?void 0:n.targetOffset)?r:this.Ac.liveOffset,vSt:this.Ac.timeServer,Xk:this.Ac.useCredentials},this.pEt(this.qmt),this.rW,o,this.Ac.dash),this.ayt=this.Okt.Br,this.ayt.xdt.wn(d.Uw,this.wEt),this.ayt.xdt.wn(d.Gw,this.yEt),this.ayt.xdt.wn(XZ.RAt,this.bEt),this.ayt.xdt.wn(mo.wot,this.BTt),await this.AEt.Un(this.ayt.xdt),await this.SEt.Un(this.ayt.xdt),Ft(this.Dmt,hr.EMSG)||(this.pmt=new nz(this.SL),this.Gl.UG(this.pmt.Z),await this.pmt.Un(this.ayt.xdt)),t.latencyConfiguration){const i=t.latencyConfiguration;this.qG=new hz(this,this.SL,i),this.qG.Rt=!0,this.rX.Ea(this.qG)}this.fkt(),h.Zg()}catch(t){e.error=t,e.hasError=!0}finally{hs(e)}}Ix(t,i,s,e){return Promise.resolve()}Px(){return Promise.resolve()}async TEt(){const t=this.ayt.xdt.hx;if(this.eSt(t),t)return this.Ekt(),void this.AX.mn(Vo.AM,this.kEt);this.Fkt()?this.AX.wn(Vo.AM,this.kEt):await this.EEt()}async EEt(){var t,i;throw await Promise.all([null==(t=this.GTt)?void 0:t.jot(ba.jht),null==(i=this.ikt)?void 0:i.jot(ba.jht)].filter(Y)),this.Mkt(),this.dEt(),this.OTt.Jg(),new m("The provided MPEG-DASH manifest could not be loaded")}get hx(){return this.sSt}eSt(t){this.sSt!==t&&(this.sSt=t,this.So(t?new CH:new NH))}fkt(){this.ayt&&(this.REt=this.xEt(this.REt,this.hW.jg).catch(this.mpt))}async xEt(t,i){t&&(await t,Ko(i));try{this.yx===hl.LL||this.s8?await this.IEt(i):this.yx===hl.WV&&await this.PEt(i)}catch(t){throw Ui(t),this.XX(new Wt(Ne.MANIFEST_LOAD_ERROR,t.message,t)),t}}async IEt(t){await this.PEt(t),this.CEt||(this.CEt=!0,this.UTt.$g(this.Un(this.mEt,t)));try{await this.UTt.Yy}catch(t){Ui(t),this.XX(new Wt(Ne.MEDIA_DECODE_ERROR,t.message,t))}}async PEt(t){await $s(this.Okt.W,t);const i=this.ayt.xdt;if(void 0===this.qG&&i.Kp===Me.yW){const t=i.Qwt,s=(null==t?void 0:t.BAt)?(null==t?void 0:t.BAt)/1e3:i.oSt,e={minimumOffset:(null==t?void 0:t.CAt)?(null==t?void 0:t.CAt)/1e3:.5*s,maximumOffset:(null==t?void 0:t.DAt)?(null==t?void 0:t.DAt)/1e3:1.5*s,targetOffset:s,forceSeekOffset:2.5*s,minimumPlaybackRate:$t,maximumPlaybackRate:Ot};this.qG=new hz(this,this.SL,e),this.rX.Ea(this.qG)}}Ckt(i){const s=this.GTt;i!==s&&(this.GTt&&this.Rkt(this.GTt),this.ikt&&this.Ikt(this.ikt),s&&this.lkt(this.dkt),this.GTt=i,this.ikt=s,this.ykt(this.GTt),this.ikt&&this.xkt(this.ikt),this.qL.MI=i.ht,this.JL.MI=i.rt,this.Kkt(i),this.Jkt.mn(M.pa,this.$kt),t.NEt(this.Jkt),this.Jkt.wn(M.pa,this.$kt),this.Jkt.MI=i.nt,this.qkt.MI=void 0,this.Ykt())}static NEt(t){for(const i of t.CI)i.Hk=Z.Nh}be(){this.SL.be()}we(){this.SL.we()}XX(t){this.$G||(_e(this.hr()),this.$G=xs(t),this.tX=t,this.So(new $e(t)))}gEt(){this.$G=void 0,this.tX=void 0}ATt(){const t=this.eX;t&&(t.K3&&(t.K3.Dj=this.kZ.Xj),t.Y3&&(t.Y3.Dj=this.kZ.Xj))}STt(){const t=this.eX;t&&(t.K3&&(t.K3.Oj=this.kZ.Oj),t.Y3&&(t.Y3.Oj=this.kZ.Oj))}determineStallJumpTarget(){if(this.GTt)return this.GTt.jmt()&&this.OR>this.GTt.An-OB&&!this.GTt.ipt?this.GTt.An:void 0}async hr(){if(this.DEt)return this.DEt;try{this.DEt=this.BEt(),await this.DEt}finally{this.DEt=void 0}}async BEt(){this.vx=1,this.hW.Jg(),this.dEt(),this.Mkt(),this.OTt.Jg(),this.UTt.Jg(),this.Nkt=!1,this.zx(),this.s8=!1,this.aEt=!1,this.qL.MI=void 0,this.JL.MI=void 0,this.Jkt.MI=void 0,this.qkt.MI=void 0,this.REt&&(await this.REt.catch(ol),this.REt=void 0),await Promise.all([this.WTt,this.g8,this.FTt,this.UTt.Yy.catch(ol)]),this.GTt&&(await this.GTt.kn(!0),this.GTt=void 0),this.ikt&&(this.Ikt(this.ikt),await this.ikt.kn(!0),this.ikt=void 0),await this.ETt(),this.qTt=void 0,this.zkt=void 0,this.AX.mn(Vo.AM,this.kEt),this.AX.hr(),await this.AEt.hr(),await this.SEt.hr(),void 0!==this.pmt&&(this.Gl.ZG(this.pmt.Z),await this.pmt.kn(),this.pmt=void 0),this.ayt&&(this.ayt.xdt.mn(d.Uw,this.wEt),this.ayt.xdt.mn(d.Gw,this.yEt),this.ayt.xdt.mn(XZ.RAt,this.bEt),await this.Okt.kn(),this.ayt=void 0),this.vkt=!1,this.MEt=NaN,this.LEt=0,this.OEt=0,this.skt=void 0,this.Z9=!1,this.Ho=ZT.tL(),this.LW=!0,this.U9=void 0,this.FEt=!1,this.pZ=!1,this.CEt=!1,this.UTt=new gs,this.hkt=0,this.okt=0,this.akt=0,this.Ac=void 0,this.mEt=void 0,this.Dmt=[],this.Qkt=void 0,this.rX.hr(),this.qG=void 0,this.RTt={tO:0,iO:0,sO:0},await this.mX.hr(),this.SL.bX(),this.VEt.hr()}async kn(){this.Vo(),this.gEt(),await this.hr(),this.Vo(),this.qL.kn(),this.JL.kn(),this.Jkt.kn(),this.qkt.kn(),this.Gl.kn(),this.AX.kn(),this.kX.Zg(),await this.AEt.kn(),await this.SEt.kn(),this.VEt.kn(),this.SL.mn(d.Iw,this.g7),this.SL.mn(ym.Cw,this.P9),this.SL.mn(d.Nw,this.WEt),this.SL.mn(d.Jw,this.cEt),this.SL.mn(d.Qw,this.fEt),this.SL.mn(d.jw,this.kkt),this.SL.mn(d.vy,this.Nc),this.SL.mn([d.uo,d.zw],this.UEt),this.SL.mn(az,this.Rs),await this.mX.kn(),this.Gl.kn(),this.kZ.mn("Nj",this.GEt),this.kZ.mn("Lj",this.XEt),this.SL.mn(sa.ma,this.ZEt),this.SL.mn([d.Ew,d.Tw],this.Rs),this.SL.mn(d.wy,this.Ept),this.SL.mn(d.LICENSE_REQUEST_GENERATED,this.opt),this.SL.EX=void 0,this.lX.mn("contentProtectionsTracked",this.HEt),this.SL.D7=void 0}Xx(){return this.SL.Ma}Aa(){return this.SL.pX}get QR(){return!1}qx(){return!1}jx(){}Qx(){}Jx(){}$x(){this.MTt(!0)}get NL(){var t;const i=null==(t=this.ayt)?void 0:t.xdt;if(i&&i.Kp===Me.yW&&i.Vwt)return i.Rdt().getTime()/1e3-i.Vwt.getTime()/1e3-this.OR}sI(t){const i=this.SL.wX(t);return this.VEt.tt(i),i}constructor(t,i,s,e,n,r,h){var o;super(),this.rW=void 0,this.kZ=void 0,this.vdt=void 0,this.iut=void 0,this.SL=void 0,this.kX=void 0,this.AX=void 0,this.GTt=void 0,this.ikt=void 0,this.s8=!1,this.MEt=NaN,this.$G=void 0,this.tX=void 0,this.Z9=!1,this.skt=void 0,this.U9=void 0,this.FEt=!1,this.LEt=0,this.OEt=0,this.vkt=!1,this.hW=new ui,this.UTt=new gs,this.DEt=void 0,this.CEt=!1,this.ayt=void 0,this.Okt=void 0,this.sSt=!0,this.ukt=!0,this.hEt=void 0,this.Ho=ZT.tL(),this.sX=hl.oZ,this.REt=void 0,this.LW=!0,this.Ac=void 0,this.mEt=void 0,this.qmt=void 0,this.Dmt=[],this.pZ=!1,this.rX=void 0,this.LTt=new ui,this.WTt=Promise.resolve(),this._8=new ui,this.g8=Promise.resolve(),this.Nkt=!1,this.aEt=!1,this.OTt=new ui,this.FTt=Promise.resolve(),this.qTt=void 0,this.zkt=void 0,this.qL=void 0,this.JL=void 0,this.Gl=void 0,this.Jkt=void 0,this.qkt=void 0,this.pmt=void 0,this.AEt=void 0,this.SEt=void 0,this.mX=void 0,this.VEt=void 0,this.hkt=0,this.okt=0,this.akt=0,this.oX=new tu,this.Qkt=void 0,this.RTt={tO:0,iO:0,sO:0},this.eX=void 0,this.CTt=void 0,this.lX=void 0,this.qG=void 0,this.Ekt=t=>{var i,s,e;let n;"lpt"===(null==t?void 0:t.type)&&(n=t.hmt),n&&(null==(i=n.jdt)?void 0:i.Kp)===Mo.Ck&&(null==(e=this.bt)||null==(s=e.dash)?void 0:s.forceRecreateMediaSourceOnAudioSwitch)?this.MTt(!0):this.MTt()},this.Ept=t=>{var i;null==(i=this.GTt)||i.Ept(t)},this.opt=t=>{var i;null==(i=this.GTt)||i.opt(t)},this.Nc=()=>{this.So(new Tc(this.OR,this.NR))},this.P9=t=>{this.So(new Bn(this.OR,t.jp,t.Ty))},this.bkt=t=>{this.hkt+=t.nO,this.So(t)},this.Akt=t=>{const i=t.segments.filter(t=>t.uct);t.track===Mo.Ck?this.okt=i.length:t.track===Mo.Nk&&(this.akt=i.length)},this.g7=()=>{const t=this.ct;S(t)||t===this.MEt||(this.MEt=t,this.So(new ur(this.MEt)))},this.UEt=()=>{this.BTt(),this.rEt()},this.WEt=t=>{this.aEt||!this.GR||this.Rx||(this.aEt=!0,this.So(null!=t?t:new Be(this.OR)))},this.yEt=t=>{this.Rs(t),this.vkt||(this.vkt=!0,this.kX.UW())},this.wEt=()=>{this.ayt.xdt.mn(d.Uw,this.wEt),this.So(new Pt)},this.Tkt=t=>{var i;if(t.errorObject.code===Ne.CONTENT_PROTECTION_OUTPUT_RESTRICTED&&(null==(i=this.GTt)?void 0:i.gpt.every(t=>!t.hlt)))return;this.XX(t.errorObject),this.So(t)},this.Skt=t=>{this.XX(t.errorObject)},this.mpt=t=>{hc(t)||this.XX(new Wt(Ne.MEDIA_DECODE_ERROR,t.message,t))},this.BTt=()=>{if(!this.ux){if(!this.ekt()){const t=this.ayt.xdt.nSt;return void this.By(t,!0)}if(this.rkt()){const t=this.ayt.xdt.nSt;return void this.By(t,!0)}}},this.cEt=t=>{this.FEt=this.Rx,this.So(t)},this.fEt=t=>{const i=this.FEt,s=this.Rx;this.FEt=s,i&&!s&&this.So(t),this.WEt()},this.kkt=()=>{const t=this.Mx,i=this.Nx;this.LEt===t&&this.OEt===i||(this.LEt=t,this.OEt=i,this.So(new es))},this.$kt=t=>{const i=t.Ht;i.Hk===Z.Kn?(this.Zkt(i),this.zkt=i):i===this.zkt&&i.Hk===Z.Nh&&(this.zkt=void 0,this.Ykt())},this.uEt=()=>{this.Z9||this.hEt&&(this.hEt.Hy(),this.hEt=void 0)},this.eEt=t=>{this.Z9||this.hEt&&(this.hEt.zy(t),this.hEt=void 0)},this.bEt=()=>{this.TEt().catch(this.mpt)},this.kEt=()=>{this.EEt().catch(this.mpt),this.AX.mn(Vo.AM,this.kEt)},this.ZEt=t=>{this.XX(Gk(t.lt))},this.GEt=()=>{this.ATt()},this.XEt=()=>{this.STt()},this.HEt=t=>{this.kTt(t.CG)},this.rW=t,this.iut=new rz(n),this.SL=r,this.CTt=h,this.kZ=s,this.kZ.wn("Nj",this.GEt),this.kZ.wn("Lj",this.XEt),this.rX=e,this.vdt=Jr({},i.retryConfiguration,{maxRetries:null!=(o=i.retryConfiguration.maxRetries)?o:1/0}),this.qL=new Yu,this.JL=new Yu,this.lX=new HI(t),this.lX.wn("contentProtectionsTracked",this.HEt),this.SL.wn(d.Iw,this.g7),this.SL.wn(ym.Cw,this.P9),this.SL.wn(d.Nw,this.WEt),this.SL.wn(d.Jw,this.cEt),this.SL.wn(d.Qw,this.fEt),this.SL.wn(d.jw,this.kkt),this.SL.wn(d.vy,this.Nc),this.SL.wn([d.uo,d.zw],this.UEt),this.SL.wn(az,this.Rs),this.SL.wn(sa.ma,this.ZEt),this.SL.EX=this.lX,this.SL.D7=this,this.SL.wn([d.Ew,d.Tw],this.Rs),this.SL.wn(d.wy,this.Ept),this.SL.wn(d.LICENSE_REQUEST_GENERATED,this.opt),this.kX=new vx(this,this.SL),this.AX=new ts(this.kX,!0),this.AX.wn(Vo.AM,this.BTt),this.AX.wn(K,this.Rs),this.Jkt=new Jc,this.Jkt.wn(M.pa,this.$kt),this.qkt=new Jc,this.AEt=new LH(this.SL),this.SEt=new jH(this.SL),this.mX=new bo(this.SL,this.rW),this.VEt=new ou,this.Gl=new Ka([this.Jkt,this.AEt.Z,this.SEt.Z,this.mX.Z,this.VEt])}};function cz(t,i){const s=t.filter(t=>"urn:mpeg:dash:role:2011"===t.w9).map(t=>t.XE).filter(Y);return i||Ft(s,"main")?Ft(s,"caption")?"captions":Ft(s,"subtitle")?"subtitles":Ft(s,"dub")?"translation":"main":Ft(s,"sign")?"sign":Ft(s,"description")?"descriptions":Ft(s,"commentary")?"commentary":"alternative"}function dz(t,i){var s;const e=me([...t.twt,...t.iwt],t=>"urn:mpeg:dash:adaptation-set-switching:2016"===t.w9);var n;const r=null!=(n=null==e||null==(s=e.XE)?void 0:s.split(","))?n:[],h=[];for(const t of r){const s=Number(t),e=me(i,t=>t.o===s);e&&h.push(e)}return h}function lz(t,i){for(const s of t){const t=me(i,t=>t.Kp===s.Kp);if(!t)continue;const e=s.Z,n=t.Z;for(const t of e){const i=t.JI;if(!i)continue;const s=t.nat.map(t=>t.o),e=me(n,t=>{const i=t.nat.map(t=>t.o);return pc(s,i)});if(!e)continue;const r=i.map(t=>t.o);e.JI=e.QI.CI.filter(t=>Ft(r,t.o))}}}r();var fz=class{async WSt(t){return(await this.YEt.zEt(t.map(ia))).shift()}Fct(t,i){const s=kH(t,i);return this.KEt.Wy(s)}async tut(t,i){var s;const e=kH(t,i);return null==(s=await this.qEt.Uy(e))?void 0:s.data}UQ(t){return this.jEt.Uy(t)}constructor(t,i,s,e){this.YEt=void 0,this.KEt=void 0,this.qEt=void 0,this.jEt=void 0,this.YEt=t,this.KEt=i,this.qEt=s,this.jEt=e}};r(),r(),r();var vz=class{QEt(t){return Promise.resolve(!1)}XSt(t){return Promise.reject(_z)}JEt(t){return Promise.reject(_z)}Wy(t){return Promise.resolve(!1)}Uy(t){return Promise.resolve(void 0)}$Et(t,i){return Promise.resolve(void 0)}zEt(t){return Promise.resolve([])}tRt(){return Promise.resolve([])}iRt(t){return Promise.resolve([])}sRt(t,i){return Promise.resolve([])}vS(t){return Promise.reject(_z)}eRt(t){return Promise.reject(_z)}nRt(){return Promise.reject(_z)}},_z="Storage disabled",gz="Storage disabled";r(),r(),r();var mz=class{get rRt(){return this.Qg.Yy}async QEt(t){return(this.hRt||await this.rRt).QEt(t)}async XSt(t,i){return(this.hRt||await this.rRt).XSt(t,i)}async JEt(t,i){return(this.hRt||await this.rRt).JEt(t,i)}async Wy(t){return(this.hRt||await this.rRt).Wy(t)}async Uy(t){return(this.hRt||await this.rRt).Uy(t)}async $Et(t,i){return(this.hRt||await this.rRt).$Et(t,i)}async zEt(t){return(this.hRt||await this.rRt).zEt(t)}async tRt(){return(this.hRt||await this.rRt).tRt()}async iRt(t){return(this.hRt||await this.rRt).iRt(t)}async sRt(t,i){return(this.hRt||await this.rRt).sRt(t,i)}async vS(t){return(this.hRt||await this.rRt).vS(t)}async eRt(t){return(this.hRt||await this.rRt).eRt(t)}async nRt(){return(this.hRt||await this.rRt).nRt()}constructor(t){this.Qg=new gs,this.hRt=void 0,this.Qg.$g(t),this.Qg.Yy.then(t=>{this.hRt=t})}},pz=class{get oRt(){return this.Qg.Yy}async aRt(t){const i=this.uRt||await this.oRt;return await i.aRt(t)}constructor(t){this.Qg=new gs,this.uRt=void 0,this.ict=void 0,this.cRt=void 0,this.dRt=void 0,this.lRt=void 0,this.fRt=void 0,this.Qg.$g(t);const i=this.Qg.Yy;i.then(t=>{this.uRt=t}),this.ict=new mz(i.then(t=>t.ict)),this.cRt=new mz(i.then(t=>t.cRt)),this.dRt=new mz(i.then(t=>t.dRt)),this.lRt=new mz(i.then(t=>t.lRt)),this.fRt=new mz(i.then(t=>t.fRt))}};function Aa(t){return new m("This storage cannot handle persistency type "+t)}r(),r(),r();var wa=function(t){return t.vRt="readonly",t._Rt="readwrite",t}({}),wz=class{QEt(t){return Promise.resolve("temporary"===t)}XSt(t,i){return void 0===i&&(i="temporary"),"temporary"!==i?Promise.reject(Aa(i)):(this.gRt(t.key),this.Db.push(t),Promise.resolve())}JEt(t,i){if(void 0===i&&(i="temporary"),"temporary"!==i)return Promise.reject(Aa(i));for(const i of t)this.gRt(i.key);for(const i of t)this.Db.push(i);return Promise.resolve()}Wy(t){return Promise.resolve(Boolean(this.mRt(t)))}Uy(t){return Promise.resolve(this.mRt(t))}$Et(t,i){return Promise.resolve(this.pRt(t,i))}zEt(t){const i=t?t.map(t=>this.mRt(t)):this.Db;return Promise.resolve(i.filter(Y))}tRt(){return Promise.resolve([...this.Db])}iRt(t){return this.sRt(t,"key")}sRt(t,i){const s=this.Db.filter(s=>s[i]===t);return Promise.resolve(s)}vS(t){return this.gRt(t),Promise.resolve()}eRt(t){for(const i of t)this.gRt(i);return Promise.resolve()}nRt(){return Lr(this.Db),Promise.resolve()}mRt(t){return this.pRt(t,"key")}pRt(t,i){for(const s of this.Db)if(s[i]===t)return s}gRt(t){const i=this.mRt(t);i&&is(this.Db,i)}constructor(){this.Db=[]}},yz=class t{static Rst(){return Promise.resolve(new t)}aRt(t){return t(this)}constructor(){this.cRt=void 0,this.ict=void 0,this.dRt=void 0,this.lRt=void 0,this.fRt=void 0,this.cRt=new wz,this.ict=new wz,this.dRt=new wz,this.lRt=new wz,this.fRt=new wz}};r(),r();var bz=class{async QEt(t){for(const i of this.wRt)if(await i.QEt(t))return!0;return!1}async XSt(t,i){void 0===i&&(i="persistent");for(const s of this.wRt)if(await s.QEt(i))return s.XSt(t);throw Aa(i)}async JEt(t,i){void 0===i&&(i="persistent");for(const s of this.wRt)if(await s.QEt(i))return s.JEt(t);throw Aa(i)}async Wy(t){for(const i of this.wRt)if(await i.Wy(t))return!0;return!1}async Uy(t){for(const i of this.wRt){const s=await i.Uy(t);if(s)return s}}async $Et(t,i){for(const s of this.wRt){const e=await s.$Et(t,i);if(e)return e}}async zEt(t){const i=[];for(const s of this.wRt)i.push(...await s.zEt(t));return i}async tRt(){const t=[];for(const i of this.wRt)t.push(...await i.tRt());return t}async iRt(t){const i=[];for(const s of this.wRt)i.push(...await s.iRt(t));return i}async sRt(t,i){const s=[];for(const e of this.wRt)s.push(...await e.sRt(t,i));return s}async vS(t){for(const i of this.wRt)await i.vS(t)}async eRt(t){for(const i of this.wRt)await i.eRt(t)}async nRt(){for(const t of this.wRt)await t.nRt()}constructor(t){this.wRt=void 0,this.wRt=t}};function Az(t){return async()=>{const i=await Promise.all(t.map(t=>t()));return Sz.Rst(i)}}var Sz=class t{static Rst(i){return Promise.resolve(new t(i))}get lRt(){return this.yRt}get fRt(){return this.bRt}get dRt(){return this.ARt}get cRt(){return this.SRt}get ict(){return this.TRt}aRt(i){if(0===this.kRt.length)return i(this);const s=[];let e=0;const n=r=>(s.push(r),e++,e<this.kRt.length?this.kRt[e].aRt(n):i(new t(s)));return this.kRt[e].aRt(n)}constructor(t){this.kRt=void 0,this.yRt=void 0,this.bRt=void 0,this.ARt=void 0,this.SRt=void 0,this.TRt=void 0,this.kRt=t,this.yRt=new bz(t.map(t=>t.lRt)),this.bRt=new bz(t.map(t=>t.fRt)),this.ARt=new bz(t.map(t=>t.dRt)),this.SRt=new bz(t.map(t=>t.cRt)),this.TRt=new bz(t.map(t=>t.ict))}},gc=class t{static Ba(i){t.DG.Ba(i)}static get Bg(){var i,s;return null!=(s=(i=t).dbt)?s:i.dbt=t.DG.Rst()}};gc.DG=new class{Rst(){return new pz(this.ERt())}async ERt(){this.RRt&&(await Promise.resolve(),this.RRt=!1);for(const t of this.xRt)try{return await Az([yz.Rst,t])()}catch(t){}return await Az([yz.Rst,this.IRt])()}Ba(t){if(!this.RRt)throw new m("Registration overdue");this.xRt.push(t)}constructor(t){this.IRt=void 0,this.xRt=[],this.RRt=!0,this.IRt=t}}(class t{static Rst(){return Promise.resolve(new t)}aRt(t){return Promise.reject(gz)}constructor(){this.cRt=void 0,this.ict=void 0,this.dRt=void 0,this.lRt=void 0,this.fRt=void 0,this.cRt=new vz,this.ict=new vz,this.dRt=new vz,this.lRt=new vz,this.fRt=new vz}}.Rst),gc.dbt=void 0;var Ur=class extends uz{Zx(){if(LV(this.SL))return this.SL.Zx()}async kn(){var t;await super.kn(),null==(t=this.PRt)||t.kn()}Wkt(t){var i,s;return((null!=(s=null==(i=this.Ac)?void 0:i.seamlessSwitchStrategy)?s:Uh.LL)!==Uh.LL||!As.gg)&&super.Wkt(t)}Xkt(){return!(As.w_&&As.b_<3)&&super.Xkt()}pEt(t){return OV(t)}constructor(t,i,s,e,n,r){super(t,i,s,e,new fz(gc.Bg.dRt,gc.Bg.cRt,gc.Bg.ict,gc.Bg.fRt),n,new FV(r)),this.frt=void 0,this.PRt=void 0,this.frt=r,As.z_&&(this.PRt=new QV(this))}},Tz=class extends Ur{async kn(){await super.kn(),await this.xX.RX(this.SL)}constructor(t,i,s,e,n,r,h){const o=new ws(n);super(t,i,s,e,o.HX(r),h),this.xX=void 0,this.xX=o}};r(),r(),r(),r(),r();var kz=class extends XV{get CRt(){return this.gE.CRt}PR(){return super.PR().Dy(this.CRt)}Trt(){return super.Trt().Dy(this.CRt)}W2(t,i,s){const e=this.CRt;return super.W2(t,{kst:i.kst-e,ct:i.ct,bV:i.bV-e},s)}n3(t,i){const s=this.CRt;return super.n3(_.max(0,t-s),_.max(0,i-s))}vS(t,i,s){const e=this.CRt;return super.vS(_.max(0,t-e),_.max(0,i-e),s)}O3(t,i){const s=this.CRt;super.O3(_.max(0,t-s),_.max(0,i-s))}F3(t,i){const s=this.CRt;super.F3(_.max(0,t-s),_.max(0,i-s))}constructor(t,i){super(i),this.gE=void 0,this.gE=t}},Ez=class extends Wo{get CRt(){return this.gE.CRt}Nd(){return super.Nd()+this.CRt}x5(t){super.x5(t-this.CRt)}Ex(){return super.Ex().Dy(this.CRt)}N5(t,i,s,e){const n=this.CRt;super.N5(t-n,i-n,s,e)}mrt(t){return new kz(this,t)}constructor(t,i){super(i),this.gE=void 0,this._rt(i),this.gE=t}};r(),r();var Rz=class{get nt(){return this.Gl}sI(t,i,s,e,n,r,h,o){const a=new wM(t,i,s,e,n,r,h,void 0,o);return this.Gl.tt(a),a}wX(t){const i=new ML(t.Lt,t.Th,t.bs);return this.Gl.tt(i),i}sW(t){this.Gl.it(t)}hr(){this.Gl.hr()}kn(){for(const t of this.Gl.CI.slice())t.kn();this.Gl.kn()}constructor(){this.Gl=new ou}},xz=class extends Rz{sI(t,i,s,e,n,r,h,o){const a=super.sI(t,i,s,e,n,r,h,o);return this.N8.tt(a),a}sW(t){super.sW(t),this.N8.it(t),t.kn()}wX(t){const i=super.wX(t);return this.N8.tt(i),i}hr(){super.hr(),this.N8.hr()}kn(){super.kn(),this.N8.kn()}constructor(t,i){super(),this.N8=void 0,this.N8=new gL(t,i)}},Iz=class extends vn{get CRt(){return this.NRt}set CRt(t){this.NRt=t}PR(){return super.PR().Dy(this.NRt)}DR(){return Nz(super.DR(),this.NRt)}FR(){return super.FR()+this.NRt}Nd(){return super.Nd()+this.NRt}wx(){return super.wx().Dy(this.NRt)}Ex(){return super.Ex().Dy(this.NRt)}By(t,i,s){const e=_.max(0,t-this.NRt);super.By(e,i,s)}QG(t){super.QG(Nz(t,-this.NRt))}Cx(){return this.Gl}sI(t,i,s,e,n,r,h,o){return this.JV.sI(t,i,s,e,n,r,h,o)}wX(t){return this.JV.wX(t)}sW(t){this.JV.sW(t)}bX(){this.JV.hr(),super.bX()}vX(){return!1}gX(t,i,s,e,n){throw new m("Not supported")}Zg(){return this.sst.kn(),this.ist.kn(),this.JV.kn(),this.Gl.kn(),super.Zg()}Hrt(t){return new Ez(this,t)}Zrt(t){return new Jo(t)}tI(t){let i;switch(t.type){case d.uo:i=new Ts(t.currentTime+this.NRt);break;case d.zw:i=new Pi(t.currentTime+this.NRt);break;case Vo.SM:i=new $n(t.currentTime+this.NRt);break;case d.vy:i=new Tc(t.currentTime+this.NRt,Nz(t.currentProgramDateTime,this.NRt));break;case d.Yw:i=new Ut(t.currentTime+this.NRt);break;case d.Jw:i=new ul(t.currentTime+this.NRt);break;case d.Qw:i=new Wi(t.currentTime+this.NRt);break;case d.Ow:i=new Br(t.currentTime+this.NRt);break;case d.Vw:i=new DL(t.currentTime+this.NRt);break;case d.Nw:i=new Be(t.currentTime+this.NRt);break;case d.Kw:i=new Fs(t.currentTime+this.NRt,t.playbackRate);break;case d._y:i=new q(t.currentTime+this.NRt,t.volume);break;case d.Iw:i=new ur(t.duration+this.NRt);break;case Vo.bI:i=new ca(t.currentTime+this.NRt,t.readyState);break;default:i=t}super.tI(i)}we(){super.we(),this.ist.we()}be(){super.be(),this.ist.be()}constructor(t){super(t),this.NRt=0,this.Gl=void 0,this.JV=void 0,this.ist=void 0,this.sst=void 0,this.JV=new xz(this,new Ec),this.Gl=new Ka([this.JV.nt,super.Cx()]),this.ist=new QL,this.ist.N7(this.iX.parentElement),this.sst=new pF(this.ist.xe,this.Wu,this.Gl,this.Ql,this.Ma,this.pX)}},Pz=class extends(WV(Iz)){constructor(t){super(t)}},Cz=class extends(zV(Iz)){constructor(t){super(t)}};function Nz(t,i){return t?new Date(t.getTime()+1e3*i):void 0}var Dz=class extends VV{HX(t){return t===Mo.Nk?new Cz(super.HX(t)):t===Mo.Ck?new Pz(super.HX(t)):void 0}async RX(t){const i=t;await i.Zg(),await super.RX(i.Drt)}},Bz=class extends Ur{async Xm(t){await super.Xm(t),void 0===this.DRt&&(this.DRt=this.BRt(),this.SL.CRt=this.DRt)}BRt(){if(this.ct===1/0){const t=this.nkt;if(t.V>0)return _.max(0,t.Tn(0)-300)}return 0}m8(t,i,s,e,n,r,h,o){return void 0===r&&(r=!1),void 0===h&&(h=jc.DSt),void 0===o&&(o=!1),o||(o=this.ct===1/0&&As.w_&&As.b_<3&&t<=this.OR),super.m8(t,i,s,e,n,r,h,o)}async hr(){await super.hr(),this.DRt=void 0,this.SL.CRt=0}async kn(){await super.kn(),await this.SL.Zg(),await this.xX.RX(this.SL)}static MS(t){var i;return(!t||"google-dai"!==(null==t||null==(i=t.ssai)?void 0:i.integration))&&(As.w_&&As.b_<4)}constructor(t,i,s,e,n,r,h){const o=new Dz(new ws(n));super(t,i,s,e,o.HX(r),h),this.xX=void 0,this.DRt=void 0,this.xX=o,this.DRt=void 0}};r(),r(),r(),r(),r();var Mz=class extends YV{get Drt(){return this.SL}get Nx(){return this.SL.Nx}get Mx(){return this.SL.Mx}constructor(t){super(t)}};r(),r(),r();var Lz=class extends XV{brt(){return this.MRt?this.Hj:super.brt()}Art(t){this.MRt?this.Hj=t:super.Art(t)}PR(){return this.MRt?this.LRt:super.PR()}PS(){return this.MRt?this.qS:super.PS()}Trt(){return this.MRt?this.ORt:super.Trt()}krt(){return this.MRt?this.Gj:super.krt()}Ert(t){this.MRt?this.Gj=t:super.Ert(t)}W2(t,i,s){return this.U2(s=>this.FRt(t,i,s),s)}FRt(t,i,s){return super.W2(t,i,s)}V3(){return this.U2(()=>this.VRt())}VRt(){return super.V3()}X2(t,i,s){return this.U2(s=>this.WRt(t,i,s),s)}WRt(t,i,s){return super.X2(t,i,s)}O3(t,i){this.MRt?(this.ORt=this.ORt.LM(new ZT([t,i])),this.URt.push({Kp:"qut",kO:t,EO:i})):this.GRt(t,i)}GRt(t,i){super.O3(t,i)}n3(t,i){return this.U2(()=>this.XRt(t,i))}XRt(t,i){return super.n3(t,i)}F3(t,i){this.MRt?(this.ORt=this.ORt.FM(new ZT([t,i])),this.URt.push({Kp:"vS",kO:t,EO:i})):this.ZRt(t,i)}ZRt(t,i){super.F3(t,i)}vS(t,i,s){return this.U2(s=>this.HRt(t,i,s),s)}HRt(t,i,s){return super.vS(t,i,s)}kJ(t){return this.U2(()=>this.zRt(t))}zRt(t){return super.kJ(t)}async U2(t,i){for(this.f3();this.MRt;)await $s(this.MRt.Yy,i),this.f3();Ko(i);try{this.b3=t(i),await this.b3}finally{this.b3=void 0}}f3(){if(this.b3)throw new m("Internal error")}async YRt(){if(this.MRt)throw new g("Already locked");this.MRt=new gs,this.KRt(),this.b3&&(await this.b3.catch(ol),this.KRt())}qRt(){const t=this.MRt;void 0!==t&&(t.Hy(),this.MRt=void 0,this.jRt())}KRt(){this.qS=super.PS(),this.Hj=super.brt(),this.Gj=super.krt(),this.LRt=super.PR(),this.ORt=super.Trt(),this.QRt=!1}jRt(){this.f3(),super.Art(this.Hj),super.Ert(this.Gj);const t=this.URt.slice();Lr(this.URt);for(const i of t)"qut"===i.Kp?this.GRt(i.kO,i.EO):this.ZRt(i.kO,i.EO);this.LRt.ZM(super.PR())||this.So(new sh(Ws.dJ))}Zg(){var t;null==(t=this.MRt)||t.Jg(),this.MRt=void 0,super.Zg()}constructor(t){super(t),this.b3=void 0,this.MRt=void 0,this.Hj=0,this.LRt=ZT.tL(),this.qS=void 0,this.ORt=ZT.tL(),this.URt=[],this.QRt=!1,this.Gj=0,this.qS=t.Cd}},Oz=class extends Lz{PR(){var t,i;return super.PR().LM(null!=(i=null==(t=this.JRt)?void 0:t.IR)?i:ZT.tL())}Trt(){var t,i;return super.Trt().LM(null!=(i=null==(t=this.JRt)?void 0:t.B3)?i:ZT.tL())}Art(t){super.Art(t),this.JRt&&(this.JRt.Oj=t)}Ert(t){super.Ert(t),this.JRt&&(this.JRt.Dj=t)}GRt(t,i){super.GRt(t,i),this.JRt&&this.JRt.O3(t,i)}ZRt(t,i){super.ZRt(t,i),this.JRt&&this.JRt.F3(t,i)}async HRt(t,i,s){Ko(s);const e=[];e.push(super.HRt(t,i,s)),this.JRt&&e.push(this.JRt.vS(t,i,s)),await Promise.all(e)}SJ(t){return!!super.SJ(t)||this.gE.$Rt(t)}zRt(t){return super.SJ(t)?super.zRt(t):this.gE.txt(t)}ixt(t){var i,s;null==(i=this.JRt)||i.mn(SD,this.Rrt),this.JRt=t,null==(s=this.JRt)||s.wn(SD,this.Rrt)}constructor(t,i){super(i),this.gE=void 0,this.JRt=void 0,this.gE=t}},Fz=class extends Wo{SJ(t){return!!FL(this,t)&&(!!super.SJ(t)||(!(!this.sxt||!this.sxt.SJ(t))||this.gE.nxt(t)))}async kJ(t){return super.SJ(t)?await super.kJ(t):this.sxt&&this.sxt.SJ(t)?(this.rxt(),await this.kJ(t)):(await this.gE.hxt(t),await this.kJ(t))}$Rt(t){return this.SJ(this.oxt(t))}txt(t){return this.kJ(this.oxt(t))}oxt(t){const i=this.Cd,s=i.D5.map(i=>I(t.GT)&&I(i.GT)||rt(t.GT)&&rt(i.GT)?t:i);return Jr({},i,{D5:s})}N5(t,i,s,e){super.N5(t,i,s,e),this.sxt&&this.sxt.N5(t,i,s,e)}axt(){return!this.uxt&&this.cxt}Nd(){return void 0!==this.dxt?this.dxt:this.axt()?this.qb:super.Nd()}x5(t){this.qb=t,this.dxt=void 0,this.axt()||super.x5(t)}vrt(){return!this.axt()&&super.vrt()}P3(){this.dxt=_.max(Vz(this.eX.Y3),Vz(this.eX.K3)),this.axt()||super.P3()}y3(){this.dxt=void 0,this.axt()||super.y3()}mrt(t){return new Oz(this,t)}lxt(){this.uxt=!this.uxt}rxt(){const t=this.eX,i=this.sxt;i&&(this.uxt=!this.uxt,this._rt(i),this.fxt(t),this.axt()&&this.vxt())}fxt(t){var i,s;this.sxt=t,null==(i=this.T5)||i.ixt(null==t?void 0:t.Y3),null==(s=this.k5)||s.ixt(null==t?void 0:t.K3)}_xt(t){const i=this.eX,s=this.sxt;if(!s)return;const e=this.uxt,n=e?i:s,r=(e?s:i).IR.jM(t);if(!r)return;const h=nW(n.IR,this.Trt()).jM(r.An(0),$);return!h||r.An(0)+$>=h.An(0)?void 0:_.max(r.An(0),h.Tn(0))}gxt(t,i){if(this.cxt)return Promise.resolve();const s=this.uxt?this.sxt:this.eX;return s?(this.cxt=!0,this.mxt(i=>{if(Ko(i),this.cxt)return async function(t,i,s){Ko(s);const e=[];t.Y3&&e.push(MB(t.Y3,i,s));t.K3&&e.push(MB(t.K3,i,s));await Promise.all(e),t.P3()}(s,t,i)},i)):Promise.resolve()}vxt(){if(!this.cxt)return;const t=this.uxt?this.sxt:this.eX;if(!t)return;var i;this.cxt=!1;const s=null!=(i=this.dxt)?i:this.qb;t.ct<s&&t.x5(s),t.y3()}pxt(t){var i;const s=null!=(i=this.dxt)?i:this.qb;t.x5(s),this.uxt?this._rt(t):this.fxt(t)}Trt(){var t,i,s;const e=null!=(s=null==(t=this.T5)?void 0:t.B3)?s:ZT.tL();var n;const r=null!=(n=null==(i=this.k5)?void 0:i.B3)?n:ZT.tL();return e.LM(r)}async mxt(t,i){const s=[];this.T5&&s.push(this.T5.YRt()),this.k5&&s.push(this.k5.YRt());try{await Promise.all(s),await t(i)}finally{this.T5&&this.T5.qRt(),this.k5&&this.k5.qRt()}}wrt(t){t.type===Ws.dJ&&this.gE.E3(),super.wrt(t)}constructor(t,i){super(i),this.gE=void 0,this.sxt=void 0,this.qb=NaN,this.uxt=!1,this.cxt=!1,this.dxt=void 0,this._rt(i),this.gE=t}};function Vz(t){if(!t)return 0;const i=t.IR;return i.V>0?i.An(i.V-1):0}function Wz(t){return t.Cd.Kp===xt.yW}r();var Uz=class extends Mz{get wxt(){return this.yxt}PR(){return super.PR().LM(this.yxt.IR)}Nd(){if(!this.bxt){const t=this.eX;if(t&&Wz(t))return t.ct}return super.Nd()}Mrt(){return!!super.Mrt()&&!(!this.bxt&&!this.UJ())}Lrt(){return!!super.Lrt()&&!(!this.bxt&&super.Mrt()&&!this.UJ())}UJ(){const t=this.eX;return!(!t||!Wz(t))&&t.UJ}wx(){return this.Ho.LM(this.SL.mx)}Ex(){return super.Ex().LM(this.yxt.kx)}Tx(){return super.Tx()}Brt(){var t;return null!=(t=super.Brt())?t:this.yxt.nX}Yx(){return this.yZ=!1,super.Yx()}zx(){this.yZ=!0,super.zx()}R7(){this.bxt=!0,super.R7(),this.yxt.R7()}x7(){this.bxt=!1,super.x7(),this.yxt.R7()}FR(){var t;return null!=(t=this.U9)?t:super.FR()}xx(){return void 0!==this.U9||super.xx()}By(t,i,s){void 0===i&&(i=!1),void 0===s&&(s=!1),this.Axt.Jg(),this._8.Jg(),this._8=new ui,this.Sxt=Ce(this.m8(t,i,s,this.Sxt,this._8.jg),this._8).catch(ol)}async m8(t,i,s,e,n){this.U9=t,this.p8=t,this.So(new ul(t)),e&&await e.catch(ol),Ko(n),this.eX&&Wz(this.eX)&&this.eX.vxt(),this.U9=void 0,super.By(t,i,s),this.yxt.By(t,i,s),this.Txt()}QG(t){const i=this.nX;if(!i||S(i.getTime()))return;const s=(t.getTime()-i.getTime())/1e3;this.By(s)}C7(){super.C7(),this.yxt.C7()}get Nx(){return this.kxt.Nx}get Mx(){return this.kxt.Mx}we(){this._Z&&(this._Z=!1,this.kxt.we())}be(){this._Z||(this._Z=!0,this.kxt.be())}async Ext(){var t;this.U9=void 0,this.p8=NaN,this.Ho=ZT.tL(),null==(t=this.Rxt)||t.Jg(),this.Axt.Jg(),this._8.Jg(),this.Sxt&&(await this.Sxt.catch(ol),this.Sxt=void 0)}Urt(t){super.Urt(t),this.yxt.EX=t}Grt(t){super.Grt(t),this.yxt.D7=t}Cx(){return this.Gl}sI(t,i,s,e,n,r,h,o){return this.JV.sI(t,i,s,e,n,r,h,o)}wX(t){return this.JV.wX(t)}gX(t,i,s,e,n){throw new m("Not implemented yet")}vX(){return!1}sW(t){this.JV.sW(t)}bX(){this.JV.hr(),super.bX()}async Un(t){const i=await super.Un(t);return Wz(i)&&this.Txt(),i}async hr(){await this.Ext(),await super.hr(),await this.yxt.hr()}async I9(){await this.Ext(),await super.I9(),await this.yxt.I9()}async Zg(){await this.Ext(),this.JV.kn(),this.Gl.kn(),await super.Zg()}Hrt(t){return new Fz(this,t)}Zrt(t){return new Jo(t)}Txt(){this.Axt.Jg(),this.Axt=new ui,this.Sxt=Ce(this.xxt(this.Sxt,this.Axt.jg),this.Axt).catch(ol)}async xxt(t,i){if(t&&await t.catch(ol),this.eX&&Wz(this.eX))for(;;){let t;for(Ko(i),this.Ixt()&&this.lxt(),this.eX.vxt(),Ko(i);;){const s={stack:[],error:void 0,hasError:!1};try{if(Ko(i),this.Ixt())break;if(t=this.eX._xt(this.FR()),void 0!==t){0,this.Pxt(),await this.eX.gxt(t,i),Ko(i),this.yxt.By(t);break}const e=Zr(s,ui.nm([i]),!1);await Promise.race([this.pw(d.vy,e.jg),this.Cxt(e.jg)])}catch(t){s.error=t,s.hasError=!0}finally{hs(s)}}for(Ko(i);!this.Ixt();)await this.SL.pw([d.vy,d.Nw,Vo.bI],i)}}Ixt(){const t=this.eX;if(void 0===t||!Wz(t))return!1;const i=this.FR(),s=this.SL.IR;if(!this.SL.GR&&s.Cr(i))return!1;return!!nW(this.yxt.IR,t.Trt()).GM(i,i+$)}lxt(){if(this.Nxt)return;this.Nxt=!0,this.Ho=this.wx();const t=KB(this),i=this.xx(),s=this.Tx(),e=this.SL,n=this.yxt,r=this.eX;r.vxt(),r.lxt(),qB(n,t),this.Yrt(n),this.yxt=e,e.zx(),e.ix=!0,this.Nxt=!1;const h=this.xx();i!==h&&(h?this.So(new ul(this.OR)):this.So(new Wi(this.OR)));const o=this.Tx();s!==o&&this.So(new ca(this.OR,o)),h||this.Pxt()}Pxt(){const t=this.SL,i=this.kxt;if(i===t)return;const s=this.Mx,e=this.Nx;this.kxt=t,this._Z&&(i.we(),t.be());const n=this.Mx,r=this.Nx;n>0&&r>0&&(s!==n||e!==r)&&this.So(new es)}nxt(t){return void 0!==this.yxt.YJ([t])}async hxt(t){this.Pxt();const i=this.eX,s=this.yxt;await s.hr();const e=await s.Un(t);i.pxt(e)}Cxt(t){return this.Rxt=new gs,$s(this.Rxt.Yy,t)}E3(){var t;null==(t=this.Rxt)||t.Hy()}tI(t){t.type===d.Jw&&this.p8===t.currentTime||(t.type===d.Qw&&(this.p8=NaN,this.Pxt()),t.type!==Vo.bI&&t.type!==d.zw&&t.type!==d.Nw||this.Nxt||!this.Ixt()?(t.type!==d.Nw||this.GR)&&super.tI(t):this.Txt())}constructor(t,i,s){super(t),this.yxt=void 0,this.Gl=void 0,this.JV=void 0,this.bxt=!1,this.U9=void 0,this.p8=NaN,this.Ho=ZT.tL(),this.yZ=!0,this.Nxt=!1,this._Z=!0,this.kxt=void 0,this.Rxt=void 0,this.Sxt=void 0,this.Axt=new ui,this._8=new ui,this.yxt=i,this.kxt=t,this.SL.be(),this.yxt.we(),this.JV=new xz(this,s),this.Gl=new Ka([this.JV.nt,super.Cx()])}},Gz=class extends Uz{get Drt(){return this.SL}get wxt(){return this.yxt}we(){super.we(),this.ist.we()}be(){super.be(),this.ist.be()}get iX(){return this.SL.iX}get i4(){return this.SL.i4}get Gx(){return this.SL.Gx}set Gx(t){this.SL.Gx=t}N7(t){this.SL.N7(t),this.yxt.N7(t)}Jx(){this.SL.Jx(),this.yxt.Jx()}Zx(){return this.SL.Zx()}Aa(){return this.KL}Yrt(t){const i=this.Xx(),s=this.Zx();super.Yrt(t),this.KL.MI=t.pX,this.Xx()!==i&&this.So(new qt),this.Zx()!==s&&this.So(new Pk)}Zg(){return this.KL.kn(),this.sst.kn(),this.ist.kn(),super.Zg()}constructor(t,i){super(t,i,new Ec),this.ist=void 0,this.sst=void 0,this.KL=void 0,this.KL=new qo(t.pX),this.ist=new QL,this.ist.N7(t.iX.parentElement),this.sst=new pF(this.ist.xe,this.Wu,this.nt,this.Ql,this.Ma,this.pX)}},Xz=class extends VV{HX(t){if(t===Mo.Nk){const i=super.HX(t),s=super.HX(t);return new Gz(i,s)}return super.HX(t)}async RX(t){t instanceof Gz?(await t.Zg(),await super.RX(t.Drt),await super.RX(t.wxt)):await super.RX(t)}},Zz=class extends Ur{async kn(){await super.kn(),await this.xX.RX(this.SL)}static MS(t){var i;return!As.Ks&&!As.og&&!(t&&"google-dai"===(null==(i=t.ssai)?void 0:i.integration))}constructor(t,i,s,e,n,r,h){const o=new ws(new Xz(n));super(t,i,s,e,o.HX(r),h),this.xX=void 0,this.xX=o}};r(),r(),r();var Hz=class extends Wo{mrt(t){return new Lz(t)}PS(){return this.Dxt?this.qS:super.PS()}PR(){return this.Dxt?this.LRt:super.PR()}Nd(){return this.Dxt?this.qb:super.Nd()}x5(t){this.Dxt?(this.qb=t,this.Bxt=!0):super.x5(t)}Ex(){return this.Dxt?this.Mxt?this.Mxt.X3():this.C5:super.Ex()}N5(t,i,s,e){this.Dxt?this.Mxt=new DB(t,i,s,e):super.N5(t,i,s,e)}vrt(){return this.Dxt?this.Ast&&!1!==this.QRt:super.vrt()}P3(){this.Dxt?this.QRt=!0:super.P3()}y3(){this.Dxt?this.QRt=!1:super.y3()}SJ(t){return!this.Dxt&&super.SJ(t)}kJ(t){return this.Dxt?Promise.reject(new g("Not supported")):super.kJ(t)}async YRt(){if(this.Dxt)throw new g("Already locked");this.Dxt=!0,this.KRt();const t=[];this.T5&&t.push(this.T5.YRt()),this.k5&&t.push(this.k5.YRt()),await Promise.all(t)}qRt(){this.Dxt=!1,this.T5&&this.T5.qRt(),this.k5&&this.k5.qRt(),this.jRt()}KRt(){this.qS=super.PS(),this.LRt=super.PR(),this.qb=super.Nd(),this.C5=super.Ex(),this.Bxt=!1,this.QRt=void 0,this.Mxt=void 0}jRt(){if(this.Bxt&&(super.x5(this.qb),this.Bxt=!1),void 0!==this.Mxt){const t=this.Mxt;super.N5(t.Tn,t.An,t.Z3,t.H3),this.Mxt=void 0}void 0!==this.QRt&&(this.QRt?super.P3():super.y3(),this.QRt=void 0)}constructor(t){super(t),this.Dxt=!1,this.LRt=ZT.tL(),this.qS=void 0,this.qb=0,this.Bxt=!1,this.Ast=!1,this.QRt=void 0,this.C5=ZT.tL(),this.Mxt=void 0,this._rt(t),this.qS=t.Cd}},zz=class extends vn{Yx(){return void 0!==this.eX&&Wz(this.eX)&&this.GR&&this.By(0),super.Yx()}By(t,i,s){void 0!==this.eX&&Wz(this.eX)&&this.GR&&t<this.ct&&this.Lxt(),super.By(t,i,s)}R7(){this.Oxt=!0,super.R7()}x7(){this.Oxt=!1,this.Fxt()||super.x7()}Fxt(){return this.Oxt||this.Vxt}Wxt(){this.Vxt||(this.Vxt=!0,super.R7())}Uxt(){this.Vxt&&(this.Vxt=!1,this.Fxt()||super.x7())}Un(t){this.Gxt.Jg();const i=this.dE(t,this.Xxt);return this.Zxt=i,i}async dE(t,i){return i&&await i.catch(ol),this.Uxt(),await super.Un(t)}Hrt(t){return new Hz(t)}Zrt(t){return new Jo(t)}hr(){this.Gxt.Jg();const t=this.BEt(this.Xxt);return this.Zxt=t,t}async BEt(t){return t&&await t.catch(ol),this.Uxt(),await super.hr()}I9(){this.Gxt.Jg();const t=this.Hxt(this.Xxt);return this.Zxt=t,t}async Hxt(t){return t&&await t.catch(ol),this.Uxt(),await super.I9()}Lxt(){this.Wxt(),this.Gxt.Jg(),this.Gxt=new ui,this.Xxt=Ce(this.zxt(this.Zxt,this.Xxt,this.Gxt.jg),this.Gxt).catch(Na)}async zxt(t,i,s){t&&await t.catch(ol),i&&await i.catch(ol),Ko(s);const e=this.eX;if(!e||!Wz(e))return;const n=e.Cd;await e.YRt(),await this.SL.hr();const r=await this.SL.Un(n);r.x5(e.ct),e._rt(r),e.qRt(),this.Uxt()}async Zg(){this.Gxt.Jg(),this.Xxt&&(await this.Xxt.catch(ol),this.Xxt=void 0),this.Fxt()&&super.x7(),await super.Zg()}constructor(...t){super(...t),this.Oxt=!1,this.Vxt=!1,this.Zxt=void 0,this.Xxt=void 0,this.Gxt=new ui}},Yz=class extends(WV(zz)){constructor(t){super(t)}},Kz=class extends(zV(zz)){constructor(t){super(t)}},qz=class extends VV{HX(t){return t===Mo.Nk?new Kz(super.HX(t)):t===Mo.Ck?new Yz(super.HX(t)):void 0}async RX(t){const i=t;await i.Zg(),await super.RX(i.Drt)}static MS(){return As.cg}};cs(new class extends MV{xP(t,i,s,e,n,r,h,o){let a;a=Bz.MS(o)?Bz:Zz.MS(o)?Zz:Tz;let u=i;return qz.MS()&&(u=new qz(u)),new a(s,e,n,r,u,Mo.Nk,t)}KX(){return!0}constructor(...t){super(...t),this.qX=ki.yG}}),r(),r(),Th(function(t){return class extends t{xa(){const t=this.YR.Ca;return Qr(super.xa(),{get hesp(){return t}})}}},Rh.lu),r(),r(),r(),r(),r();var jz=0;function yr(t,i){if(void 0===i&&(i=!0),!t)return;let s=t;return"/"===s.charAt(0)&&(s=s.substring(1)),i&&"/"!==s.charAt(s.length-1)&&(s+="/"),s}function Qz(t){var i,s,e;return Jr({},t,{baseUrl:yr(t.baseUrl),id:null!=(i=t.id)?i:String(jz++),timeBounds:Jr({},t.timeBounds,{scale:null!=(s=t.timeBounds.timescale)?s:1e3}),currentTime:t.currentTime?{value:t.currentTime.timestamp,scale:null!=(e=t.currentTime.timescale)?e:1e3}:void 0,audio:t.audio.map(eY),video:t.video.map(rY),metadata:t.metadata.map(oY),events:t.events.map(lY)})}var Jz=0;function $z(t){const i=yr(t.initPattern,!1),s=yr(t.contPattern,!1);var e;return Jr({},t,{id:null!=(e=t.id)?e:String(Jz++),continuationPattern:s?to(s,"${segmentId}","{segmentId}"):void 0,initializationPattern:i?to(i,"${initId}","{initId}"):void 0})}function tY(t){var i;const s=yr(t.initPattern,!1),e=yr(t.contPattern,!1);return Jr({},t,{continuationPattern:e?to(e,"${segmentId}","{segmentId}"):void 0,initializationPattern:s?to(s,"${initId}","{initId}"):void 0,segmentDuration:t.segmentDuration?{value:t.segmentDuration.duration,scale:t.segmentDuration.timescale}:void 0,segments:t.segments.map(iY),activeSegment:null==(i=me(t.segments,t=>t.active))?void 0:i.id})}function iY(t){var i;return Jr({},t,{timeBounds:Jr({},t.timeBounds,{endTime:void 0!==t.timeBounds.duration?t.timeBounds.startTime+t.timeBounds.duration:void 0,scale:null!=(i=t.timeBounds.timescale)?i:1e3})})}function sY(t){return t&&"-"===t.charAt(0)}function eY(t){let i;try{var s;i=x(null!=(s=t.channels)?s:"2")}catch(t){i=2}return sY(t.contPattern)||sY(t.initPattern)?function(t,i){const s=t.initPattern,e=t.contPattern;return t.initPattern=void 0,t.contPattern=void 0,Jr({},$z(t),{baseUrl:yr(t.baseUrl),language:"eng",channels:i,sampleRate:t.samplerate,tracks:t.tracks.map(t=>{var i,n;return t.initPattern=null!=(i=t.initPattern)?i:s,t.contPattern=null!=(n=t.contPattern)?n:e,nY(t)})})}(t,i):Jr({},$z(t),{baseUrl:yr(t.baseUrl),language:"eng",channels:i,sampleRate:t.samplerate,tracks:t.tracks.map(nY)})}function nY(t){let i;try{var s;i=x(null!=(s=t.channels)?s:"2")}catch(t){i=2}return sY(t.contPattern)||sY(t.initPattern)?function(t,i){return t.contPattern=t.baseUrl+t.contPattern,t.initPattern=t.baseUrl+t.initPattern,Jr({},tY(t),{baseUrl:"./",channels:i,sampleRate:t.samplerate})}(t,i):Jr({},tY(t),{baseUrl:yr(t.baseUrl),channels:i,sampleRate:t.samplerate})}function rY(t){return sY(t.contPattern)||sY(t.initPattern)?function(t){const i=t.initPattern,s=t.contPattern;return t.initPattern=void 0,t.contPattern=void 0,Jr({},$z(t),{baseUrl:yr(t.baseUrl),frameRate:t.framerate?{value:t.framerate.rate,scale:t.framerate.scale}:void 0,tracks:t.tracks.map(t=>(t.initPattern=i,t.contPattern=s,hY(t)))})}(t):Jr({},$z(t),{baseUrl:yr(t.baseUrl),frameRate:t.framerate?{value:t.framerate.rate,scale:t.framerate.scale}:void 0,tracks:t.tracks.map(hY)})}function hY(t){var i,s;return sY(t.contPattern)||sY(t.initPattern)?function(t){var i,s;return t.contPattern=t.baseUrl+t.contPattern,t.initPattern=t.baseUrl+t.initPattern,Jr({},tY(t),{baseUrl:"./",frameRate:t.framerate?{value:t.framerate.rate,scale:t.framerate.scale}:void 0,resolution:Jr({},t.resolution,{sarWidth:null==(i=t.resolution.sar)?void 0:i.width,sarHeight:null==(s=t.resolution.sar)?void 0:s.height})})}(t):Jr({},tY(t),{baseUrl:yr(t.baseUrl),frameRate:t.framerate?{value:t.framerate.rate,scale:t.framerate.scale}:void 0,resolution:Jr({},t.resolution,{sarWidth:null==(i=t.resolution.sar)?void 0:i.width,sarHeight:null==(s=t.resolution.sar)?void 0:s.height})})}function oY(t){var i;return Jr({},t,{id:null!=(i=t.id)?i:String(Jz++),schemeId:"",tracks:t.tracks.map(aY)})}function aY(t){return Jr({},t,{segments:t.segments.map(cY)})}var uY=0;function cY(t){return{id:uY++,timeBounds:Jr({},t.timeBounds,{scale:t.timeBounds.timescale})}}var dY=0;function lY(t){var i,s;return Jr({},t,{id:null!=(i=t.id)?i:String(dY++),timeBounds:Jr({},t.timestamp,{scale:null!=(s=t.timestamp.timescale)?s:1e3})})}var fY=class{async Yxt(t,i){const s={Yu:t,Kp:Ic.pk,jg:i},e=await this.AR.dk(s);let n=await e.OT(i);return function(t){const i=t;if(yo(i.manifestVersion)&&Vh(i.manifestVersion,"alpha"))return!0;let s,e;for(const t of i.presentations){for(const i of[...t.video,...t.audio])if(i.tracks.length>0){s=i.tracks[0],e=i;break}if(Y(s))break}return(yo(null==e?void 0:e.initPattern)||yo(null==s?void 0:s.initPattern))&&!yo(null==s?void 0:s.initializationPattern)&&!yo(null==e?void 0:e.initializationPattern)}(n)&&(n=function(t){return Jr({},t,{availabilityDuration:{value:t.dvrDuration?t.dvrDuration.duration/t.dvrDuration.timescale:0},manifestVersion:"1.0.0",presentations:t.presentations.map(Qz),contentBaseUrl:t.contentBaseUrl||"./"})}(n)),n}constructor(t){this.AR=void 0,this.AR=t}};r();var vY=class extends fr{get Ca(){return this.hu||(this.hu=PS(this)),this.hu}uP(){return this.Kxt.uP()}get nP(){return this.Kxt.nP}get rP(){return this.Kxt.rP}get hP(){return this.Kxt.hP}get oP(){return this.Kxt.oP}get aP(){return this.Kxt.aP}wn(t,i){this.Kxt.wn(t,i)}mn(t,i){this.Kxt.mn(t,i)}constructor(t){super(),this.hu=void 0,this.Kxt=void 0,this.Kxt=t}};r(),r(),r();var wn=class{get pst(){const t=1-this.qxt**this.jxt;return this.Qxt/t}Eat(t,i){const s=this.qxt**t,e=i*(1-s)+s*this.Qxt;S(e)||(this.Qxt=e,this.jxt+=t)}kJ(t){const i=_.exp(_.log(.5)/t);if(i===this.qxt)return;if(0===this.jxt)return void(this.qxt=i);const s=this.pst,e=1-i**this.jxt;this.Qxt=s*e,this.qxt=i}constructor(t){this.qxt=void 0,this.Qxt=0,this.jxt=0,this.qxt=_.exp(_.log(.5)/t)}},Sn=class t{get pst(){return this.Dat()?_.max(this.Jxt.pst,this.$xt.pst):this.tIt}Eat(t){const i=Zd.Mg(),s=t;this.iIt&&void 0!==this.sIt&&i-this.sIt>=this.eIt&&this.hr(),this.nIt+=1,this.Jxt.Eat(1,s),this.$xt.Eat(1,s),this.rIt.push(s),this.rIt.length>this.hIt&&this.rIt.shift(),this.sIt=i}Dat(){return void 0!==this.sIt&&Zd.Mg()-this.sIt<=this.eIt}hr(){this.Jxt=new wn(this.oIt),this.$xt=new wn(this.aIt),this.nIt=0,this.rIt=[],this.sIt=void 0}constructor(i=t.uIt,s=t.cIt,e=t.Bat,n=!1){this.Jxt=void 0,this.$xt=void 0,this.nIt=0,this.rIt=[],this.sIt=void 0,this.eIt=6e4,this.hIt=10,this.oIt=void 0,this.aIt=void 0,this.tIt=void 0,this.iIt=void 0,this.oIt=i,this.aIt=s,this.tIt=e,this.iIt=n,this.Jxt=new wn(i),this.$xt=new wn(s)}};Sn.uIt=2,Sn.cIt=5,Sn.Bat=.1,r();var _Y=class{Tj(t){for(const i of this.dIt)i.Tj(t)}Ej(t){for(const i of this.dIt)i.Ej(t)}Rj(t,i){for(const s of this.dIt)s.Rj(t,i)}xj(t){for(const i of this.dIt)i.xj(t)}constructor(t){this.dIt=void 0,this.dIt=t}};r();var gY=class{Tj(t){this.lIt=t}Ej(t){this.fIt.Eat(t-this.lIt)}Rj(t){}xj(t){}constructor(t){this.fIt=void 0,this.lIt=0,this.fIt=t}};r();var mY=class{Ej(t){this.vIt=t}Rj(t,i){this.Oat.Eat(t-this.vIt,i.byteLength),this.vIt=t}xj(t){}Tj(t){}constructor(t){this.Oat=void 0,this.vIt=0,this.Oat=t}};r();var pY=class{Tj(t){}Rj(t,i){const s=i.byteLength,e=this._It;this._It=s;const n=t-this.En;this.En=t,this.gIt.y$(i);const r=!this.gIt.mIt(),h=s>=this.pIt;e!==Zd.Zs.Cm&&r&&h&&this.Oat.Eat(n,s)}Ej(t){this.En=t}xj(t){}constructor(t,i=0){this.Oat=void 0,this.pIt=void 0,this.gIt=new wY,this.En=0,this._It=0,this.Oat=t,this.pIt=i}},wY=class extends Pu{mIt(){return this.wIt}y$(t){this.wIt=!1,super.y$(t)}p$(t,i){this.yIt&&this.yIt!==Ci.LC||(this.wIt=!0),super.p$(t,i),this.yIt=t}P$(t){return!1}N$(t){}B$(t){}constructor(...t){super(...t),this.yIt=void 0,this.wIt=!1}};r();var yY=function(t){return t.bIt="sample",t}({}),bY=class extends fr{lG(){if(!this.Dat())return;const t=Zd.Mg();t-this.AIt>1e3&&(this.AIt=t,bu.Bg.lG(this.pst))}constructor(...t){super(...t),this.AIt=0}};r();var AY=class extends bY{get pst(){return this.Dat()?this.Qxt:this.SIt}Dat(){return this.pA.length>=3}Eat(t,i){if(0===t)return;const s={EG:8*i/t,TIt:i};if(this.pA.push(s),this.kIt+=s.TIt,this.pA.length>30){const t=this.pA.shift();this.kIt-=t.TIt}const e=this.pA.slice().sort((t,i)=>t.EG-i.EG);let n=0;for(let t=0;t<e.length;t++){const i=e[t];if(n+=i.TIt/this.kIt,this.Qxt=i.EG,n>=.5)break}this.lG(),this.So(new sh(yY.bIt))}constructor(t){super(),this.SIt=void 0,this.pA=[],this.Qxt=void 0,this.kIt=0,this.SIt=t,this.Qxt=t}};r();var Ss=class t extends bY{Eat(t,i){const s=8*i/t;this.Jxt.Eat(t,s),this.$xt.Eat(t,s),this.EIt+=i,this.lG(),this.So(new sh(yY.bIt))}get pst(){return this.Dat()?_.min(this.Jxt.pst,this.$xt.pst):this.tIt}Dat(){return this.EIt>=this.RIt}constructor(i=t.uIt,s=t.cIt,e=t.xIt,n=t.Bat){super(),this.Jxt=void 0,this.$xt=void 0,this.EIt=0,this.tIt=void 0,this.RIt=void 0,this.RIt=e,this.Jxt=new wn(i),this.$xt=new wn(s),this.tIt=n}};Ss.xIt=128e3,Ss.Bat=XI,Ss.uIt=.5,Ss.cIt=5;var SY=class{IIt(t){var i;null==(i=this.Oat)||i.mn(yY.bIt,this.PIt),this.Oat=new AY(t),this.Oat.wn(yY.bIt,this.PIt)}CIt(t){this.NIt.push(t)}DIt(t){is(this.NIt,t)}get EG(){var t,i;return null!=(i=null==(t=this.Oat)?void 0:t.pst)?i:this.BIt}get xG(){return this.MIt.pst}IG(t){if("segment"!==t.Kp)return;if("video"!==t.Gk)return;const i=[new gY(this.MIt)];return this.Oat&&("stream"===t.ck&&"initialization-segment"!==t.Uk?i.push(new pY(this.Oat,1e3)):i.push(new mY(this.Oat))),new _Y(i)}constructor(t,i){this.Oat=void 0,this.NIt=[],this.MIt=void 0,this.BIt=void 0,this.PIt=()=>{for(const t of this.NIt)t()},this.BIt=t>0?t:Ss.Bat,this.MIt=new Sn(Sn.uIt,Sn.cIt,i>0?i:Sn.Bat),this.IIt(this.BIt)}};r();var TY=class{LIt(t,i){const s=i-t;(!this.OIt||s<this.OIt)&&(this.OIt=s)}FIt(t,i){this.VIt=i-t}WIt(t,i){this.UIt=i-t}GIt(t,i){this.XIt=i-t}get ZIt(){const t=ho([this.UIt,this.XIt].filter(Y),so);return void 0!==t?Zd.Mg()/1e3+t:void 0!==this.VIt?Zd.Mg()/1e3+this.VIt:void 0!==this.OIt?Zd.Mg()/1e3+this.OIt:void 0}HIt(t){const i=this.ZIt;if(void 0!==i)return i-t}hr(){this.OIt=void 0,this.VIt=void 0,this.XIt=void 0,this.UIt=void 0}constructor(){this.OIt=void 0,this.VIt=void 0,this.XIt=void 0,this.UIt=void 0}};r();var kY=.25,EY={minimumOffset:.2,targetOffset:.45,maximumOffset:.7,forceSeekOffset:3,minimumPlaybackRate:$t,maximumPlaybackRate:Ot},RY={minimumOffset:.4,targetOffset:.65,maximumOffset:1,forceSeekOffset:3,minimumPlaybackRate:$t,maximumPlaybackRate:Ot},xY={minimumOffset:.4,targetOffset:.7,maximumOffset:.9,forceSeekOffset:3,minimumPlaybackRate:$t,maximumPlaybackRate:Ot},IY={minimumOffset:.2,targetOffset:.45,maximumOffset:1,forceSeekOffset:3,minimumPlaybackRate:$t,maximumPlaybackRate:Ot},PY={minimumOffset:.5,targetOffset:1.125,maximumOffset:1.75,forceSeekOffset:2.55,minimumPlaybackRate:$t,maximumPlaybackRate:Ot};function CY(t){if(Zd.Pp.Np){const i=(400+250)/1e3,s=_.max(i,t.minimumOffset),e=_.max(s+kY,t.targetOffset),n=_.max(e+kY,t.maximumOffset);return{minimumOffset:s,targetOffset:e,maximumOffset:n,forceSeekOffset:_.max(n+kY,t.forceSeekOffset),minimumPlaybackRate:$t,maximumPlaybackRate:Ot}}return t}function NY(){let t;return t=Zd.Zs.Tm?IY:Zd.Zs.Pm?RY:Zd.Zs.Im?"Android"===Zd.Pp.Cp?xY:EY:PY,Zd.Pp.Np?CY(t):t}r(),r(),r();var DY=class{zIt(t){for(const i of this.LRt)i[1]=i[1].Mn(t)}YIt(t,i){let s=!0;for(const e of this.LRt){let n=e[1];n=n.FM(i),t===e[0]&&(n=n.LM(i),s=!1),e[1]=n.MM(1e-5)}s&&this.LRt.push([t,i])}KIt(t){for(const i of this.LRt)i[1]=i[1].FM(t)}qIt(t){for(let i=0;i<this.LRt.length;i++)if(this.LRt[i][1].Cr(t))return this.LRt[i][0]}constructor(){this.LRt=[]}},BY=class extends fr{get IR(){let t=ZT.tL();for(const[,i]of this.jIt){const s=i.kst+i.bV,e=s+i.ct;t=t.LM(ZT.$M(s,e))}return this.Srt.IR.LM(t)}qIt(t){return this.QIt.qIt(t)}get JIt(){return void 0!==this.$It}get tPt(){return this.$It?this.$It.Yy:Promise.resolve()}async appendStream(t,i,s){if(this.JIt)throw new m("Concurrent appends are not supported.");try{const e={stack:[],error:void 0,hasError:!1};try{const n=Zr(e,ui.nm([s,this.S3.jg]),!1).jg;this.QIt.zIt(this.IR),this.$It=new gs;const r=ND(t).getReader();for(;;){const t=await $s(r.read(),n);if(t.done)break;const s=t.value,e={Kp:Vt.fJ,hk:xu(s.map(t=>t.Jat))},h={ct:Jl(s,t=>t.ct),kst:s[0].Ivt,bV:-i.Tot.iPt};await this.G2(e,h,n);const o=h.kst+h.bV,a=o+h.ct;this.QIt.YIt(i.Tot,ZT.$M(o,a))}}catch(t){e.error=t,e.hasError=!0}finally{hs(e)}}catch(t){throw i.sPt(),t}finally{i.ePt();const t=this.$It;this.$It=void 0,null==t||t.Hy()}}async W2(t,i,s,e){if(this.JIt)throw new m("Concurrent appends are not supported.");try{const n={stack:[],error:void 0,hasError:!1};try{const r=Zr(n,ui.nm([e,this.S3.jg]),!1).jg;this.$It=new gs,await this.G2(t,i,r);const h=i.kst+i.bV,o=h+i.ct;this.QIt.zIt(this.IR),this.QIt.YIt(s,ZT.$M(h,o))}catch(t){n.error=t,n.hasError=!0}finally{hs(n)}}finally{const t=this.$It;this.$It=void 0,null==t||t.Hy()}}async G2(t,i,s){this.Srt.N3===Mo.Nk&&this.nPt.Ldt(t.hk,i.kst,i.kst+i.ct,i.bV,this.fyt,!1);const e=this.SL.PL.IL,n=this.Srt.IR.Cr(this.SL.OR);if(e||n)return await this.rPt(s),await this.Srt.W2(t,i,s);this.jIt.push([t,i]);const r=this.jIt[0][1].kst;return this.jIt[this.jIt.length-1][1].kst-r>=.4?await this.rPt(s):void 0}async X2(t,i){if(this.JIt)throw new m("Concurrent appends are not supported.");try{const s={stack:[],error:void 0,hasError:!1};try{const e=Zr(s,ui.nm([i,this.S3.jg]),!1).jg;this.$It=new gs,await this.rPt(e),await this.Srt.X2(t,{},e),this.Srt.N3===Mo.Nk&&this.nPt.jrt(t.hk)}catch(t){s.error=t,s.hasError=!0}finally{hs(s)}}finally{const t=this.$It;this.$It=void 0,null==t||t.Hy()}}async vS(t,i,s){if(this.JIt)throw new m("Concurrent appends are not supported.");try{const e={stack:[],error:void 0,hasError:!1};try{const n=Zr(e,ui.nm([s,this.S3.jg]),!1).jg;this.$It=new gs,await this.rPt(n),await this.Srt.vS(t,i,n),this.QIt.KIt(ZT.$M(t,i))}catch(t){e.error=t,e.hasError=!0}finally{hs(e)}}finally{const t=this.$It;this.$It=void 0,null==t||t.Hy()}}async _K(t){if(this.JIt)throw new m("Concurrent appends are not supported.");try{const i={stack:[],error:void 0,hasError:!1};try{const s=Zr(i,ui.nm([t,this.S3.jg]),!1).jg;this.$It=new gs,await this.rPt(s)}catch(t){i.error=t,i.hasError=!0}finally{hs(i)}}finally{const t=this.$It;this.$It=void 0,null==t||t.Hy()}}async rPt(t){for(const[i,s]of this.jIt)await this.Srt.W2(i,s,t);Lr(this.jIt)}async Zg(){for(this.S3.Zg();this.JIt;)await this.tPt}constructor(t,i,s,e){super(),this.Srt=void 0,this.QIt=void 0,this.SL=void 0,this.jIt=[],this.fyt=void 0,this.nPt=void 0,this.$It=void 0,this.S3=new ui,this.SL=i,this.Srt=t,this.fyt=s,this.nPt=e,this.QIt=new DY,this.Srt.wn(Ws.dJ,this.Rs)}};r(),r();var MY=class{async hPt(t,i){if(this.oPt>=this.aPt.maxRetries)throw t;const s=this.uPt(this.oPt++);await hi(s,i)}uPt(t){let i=0;return 0!==t&&(i+=_.min(this.aPt.maximumBackoff,this.aPt.minimumBackoff*2**(t-1))),i}constructor(t){this.oPt=0,this.aPt=void 0,this.aPt=t}};r(),r();var LY=function(t){return t.cPt="emsgdata",t}({}),OY=class extends sh{constructor(t,i){super("emsgdata"),this.value=void 0,this.data=void 0,this.value=t,this.data=i}};r();var FY=class{start(t){this.qQ=t}dPt(t){this.qQ.enqueue(t)}constructor(){this.qQ=void 0}};r(),r();var VY=function(t){return t.lPt="initdata",t.MANIFEST_UPDATE="manifestupdate",t.fPt="timestamps:v1",t}({});function WY(t){if("urn:theo:hesp:2020"!==t.JB)return;const i=t.XE;if(i===VY.lPt){return function(t){if(!t||!Nc(t))return;const i=t;return!ih(i.index)||!ih(i.offset)||i.index<0&&i.offset<0?void 0:{Kp:"initdata",index:i.index,offset:i.offset}}(JSON.parse(pr(xh(t.iM),new J)))}if(i===VY.MANIFEST_UPDATE){return function(t){if(!t||!Nc(t))return;const i=t;return!Y(i.url)||yo(i.url)?{Kp:"manifestupdate",url:i.url}:void 0}(JSON.parse(pr(xh(t.iM),new J)))}if(i===VY.fPt){const i=xh(t.iM),s=new J,e=et(i,s).toNumber()/t.UN,n=et(i,s).toNumber()/1e3,r=ds(i,s)/1e3;let h;return s.ac+8<=i.byteLength&&(h={hours:ds(i,s),minutes:Hm(i,s),seconds:Hm(i,s),frames:Us(i,s)}),{Kp:VY.fPt,vPt:e,_Pt:n,gPt:r,mPt:h}}}var UY=class extends FY{transform(t){if(t.Kp===Ci.FC)try{const i=WY(Co.BN(t.hk));i&&this.pPt.So(new OY(i.Kp,i))}catch(t){false}this.dPt(t)}Zg(){this.pPt.Vo()}constructor(...t){super(...t),this.pPt=new fr}};r();var GY=class{start(t){this.wPt=new XY(t)}transform(t){this.wPt.y$(t)}flush(){this.wPt.A$()}constructor(){this.wPt=void 0}},XY=class extends Pu{P$(t){return!0}N$(t){this.qQ.enqueue(t)}B$(t){}constructor(t){super(),this.qQ=void 0,this.qQ=t}};r(),r();var ZY=mh.fromNumber(ru);var HY=class extends fr{async dk(t){for(;;)try{return await this.rW.dk(t)}catch(i){if(hc(i))throw i;await this.yPt.hPt(i,t.jg)}}constructor(t,i){super(),this.rW=void 0,this.yPt=void 0,this.rW=t,this.yPt=i}};function zY(t,i,s,e,n,r,h,o){const a=new oa;return n&&a.LT(function(t,i){return void 0===i&&(i=ZY),new oa({Range:"bytes="+t.toString()+"-"+i.toString()})}(n.start,n.end)),{Yu:t,lk:a,Xk:!1,jg:o,Kp:Ic.wk,Uk:s,Gk:e,Vk:r,Wk:h,ck:i,zk:i===Bi.NT}}r(),r();var YY=function(t){return t[t.INITIALIZER=0]="INITIALIZER",t[t.FRAMES=1]="FRAMES",t}({}),KY=class extends FY{transform(t){this.bPt.push(t),t.Kp===Ci.LC&&this.APt(this.bPt.splice(0),YY.FRAMES)}APt(t,i){const s={UN:this.Kb,iK:this.mK},e=xu(t.map(t=>re(t.hk.hk))),n=me(t,qY),r=Co.AN(n.hk.hk)[0],h={Gk:this.Sat,Ty:s,Jat:e,Kp:i,ct:this.Nd(r)/this.Kb,Ivt:uh(this.SPt(r),this.Kb)};this.dPt(h)}Nd(t){const i=t.Z[0];if(!i||0===i.XB.length)return 0;var s;const e=null!=(s=i._N.DB)?s:0;return Jl(i.XB[0].jB,t=>{var i;return null!=(i=t.ct)?i:e})}SPt(t){var i,s;return null!=(s=null==(i=t.Z[0].ZB)?void 0:i.ZB)?s:mh.UZERO}constructor(t,i){super(),this.mK=void 0,this.Sat=void 0,this.Kb=void 0,this.bPt=[],this.mK=t,this.Sat=this.mK.match(/video/)?fn.Nk:fn.Ck,this.Kb=i}};function qY(t){return t.Kp===Ci.RC}r();var jY=class extends fr{get Tot(){return this.TPt}Pct(t){return t+1}get kPt(){return!1}get EPt(){return this.RPt}get JIt(){return void 0!==this.$It}get tPt(){return this.$It?this.$It.Yy:Promise.resolve()}By(t){this.RPt=t,this.xPt=void 0,this.IPt=void 0}PPt(){return void 0!==this.xPt}async CPt(){if(this.JIt)throw new m("Concurrent downloads are not supported.");try{this.$It=new gs;let t;if("now"===this.RPt)t=Zd.Rp(this.TPt.NPt("now"),this.TPt.DPt);else{const i=this.RPt,s=0===i?1:this.TPt.BPt(i);t=Zd.Rp(this.TPt.NPt(s),this.TPt.DPt)}const i=zY(t,Bi.PT,vs.Ak,this.Sat,void 0,3e3,1e3,this.MPt.jg),s=await this.LPt.dk(i),e=await s.WT(this.MPt.jg),n=new j(e),{OPt:r,YN:h}=function(t){const i=dh.oN(new oT(xh(t),new J)),s=me(i,t=>t.Kp===Ci.WC||t.Kp===Ci.RC);if(void 0===s)return{OPt:t,YN:void 0};const e=uo(t,0,s.ac),n=uo(t,s.ac);return{OPt:e,YN:0===n.byteLength?void 0:n}}(n),o=Co.AN(xh(n));this.Kb=function(t){const i=me(t,t=>t.Kp===Ci.LP);return i.Z[0].YN._N.UN}(o);const a=function(t){const i=t.filter(t=>t.Kp===Ci.FC),s=i.map(t=>WY(t)),e=me(s,t=>(null==t?void 0:t.Kp)===VY.lPt);if(!e)throw new m("No init data in init response");return e}(o);let u;if(this.xPt=a.index,this.IPt=a.offset,h){u=function(t,i,s){var e;const n=me(t,t=>t.Kp===Ci.RC);var r;const h=uh(null!=(r=null==(e=n.Z[0].ZB)?void 0:e.ZB)?r:mh.UZERO,s),o=n.Z[0];var a;const u=null!=(a=o._N.DB)?a:0,c=o.XB[0],d=Jl(c.jB,t=>{var i;return null!=(i=t.ct)?i:u})/s;return{kst:h,ct:d,bV:i}}(Co.AN(xh(n)),-this.Tot.iPt,this.Kb)}return{initialization:r,data:h,metadata:u}}finally{const t=this.$It;this.$It=void 0,null==t||t.Hy()}}FPt(){if(this.JIt)throw new m("Concurrent downloads are not supported.");this.$It=new gs;const t=void 0!==this.IPt?mh.fromNumber(this.IPt):void 0;return Hb(this.VPt(this.xPt,t,this.MPt.jg)).pipeThrough(new Sa(new KY(this.Tot.iK,this.Kb))).pipeThrough(new Sa(new QY(this.MPt.jg)))}async VPt(t,i,s){const e=this.WPt(t,i,s);return(await this.LPt.dk(e)).UT().pipeThrough(new Sa(new GY)).pipeThrough(new Sa(this.UPt))}WPt(t,i,s){const e=this.TPt.GPt(t),n=void 0!==i?{start:i,end:void 0}:void 0;return zY(Zd.Rp(e,this.TPt.DPt),Bi.NT,vs.gk,this.Sat,n,25e3,1e3,s)}sPt(){this.xPt=void 0,this.IPt=void 0}ePt(){void 0!==this.xPt&&(this.xPt=this.Pct(this.xPt)),this.IPt=void 0;const t=this.$It;this.$It=void 0,null==t||t.Hy()}cancelDownload(){var t;this.MPt.Jg(),this.MPt=new ui,this.$It=null!=(t=this.$It)?t:new gs,this.sPt();const i=this.$It;this.$It=void 0,null==i||i.Hy()}async Zg(){this.Vo(),this.UPt.Zg(),this.MPt.Jg(),await this.tPt,this.xPt=void 0,this.IPt=void 0}constructor(t,i,s){super(),this.TPt=void 0,this.LPt=void 0,this.rW=void 0,this.yPt=void 0,this.Sat=void 0,this.UPt=void 0,this.RPt="now",this.xPt=void 0,this.IPt=void 0,this.Kb=void 0,this.MPt=new ui,this.$It=void 0,this.TPt=t,this.yPt=new MY(s),this.UPt=new UY,this.UPt.pPt.wn(LY.cPt,this.Rs),this.rW=i,this.Sat=function(t){switch(t){case fn.Ck:return aA.Ck;case fn.Nk:return aA.Nk;default:return aA.gk}}(t.Kp),this.LPt=new HY(this.rW,this.yPt)}};var QY=class{start(t){this.qQ=t,this.Qg.zg(this.XPt)}flush(){this.Qg.Yg(this.XPt)}constructor(t){this.qQ=void 0,this.Qg=void 0,this.XPt=()=>{this.qQ.error(new us)},this.Qg=t}};function xn(t){var i;return t.value/(null!=(i=t.scale)?i:1)}r(),r(),r(),r(),r();var JY="{initId}",$Y=/{initId(?::0(?:\d+)d)?}/,tK=/{segmentId(?::0(?:\d+)d)?}/,iK=class{get o(){return this.rS}get EG(){return this.fG}get $wt(){return this.ZPt}get ict(){return this.lbt}get HPt(){return this.zPt}get YPt(){return this.KPt}get DPt(){return Zd.Rp(this.qPt,this.jPt.DPt)}get lrt(){return this.QPt}get Th(){return this.gO}get JPt(){return this.$Pt}get tCt(){return this.iCt}get iPt(){return this.sCt}get eCt(){return this.ebt}er(t){this.zPt=t.activeSegment,this.KPt=t.activeSequenceNumber,this.lbt=t.segments}constructor(t,i,s){var e,n,r,h;this.OO=void 0,this.nCt=void 0,this.rS=void 0,this.fG=void 0,this.ZPt=void 0,this.qPt=void 0,this.QPt=void 0,this.$Pt=void 0,this.iCt=void 0,this.gO=void 0,this.sCt=void 0,this.ebt=void 0,this.zPt=void 0,this.KPt=void 0,this.lbt=[],this.OO=t,this.nCt=s,this.rS=t.id,this.fG=t.bandwidth,this.ZPt=t.averageBandwidth,this.qPt=null!=(e=t.baseUrl)?e:"",this.QPt=null!=(n=t.codecs)?n:i.codecs,this.$Pt=null!=(r=t.continuationPattern)?r:i.continuationPattern,this.iCt=null!=(h=t.initializationPattern)?h:i.initializationPattern,this.gO=t.label,this.sCt=t.mediaTimeOffset?xn(t.mediaTimeOffset):0,this.ebt=t.segmentDuration?xn(t.segmentDuration):0,this.er(t)}},sK=class extends iK{get Kp(){return fn.Ck}get jPt(){return this.nCt}get rCt(){return this.hCt}get glt(){return this.oCt}get DD(){return this.Nb}get iK(){return'audio/mp4; codecs="'+this.lrt+'"'}constructor(t,i,s){var e,n,r,h;super(t,i,s),this.hCt=void 0,this.oCt=void 0,this.Nb=void 0,this.hCt=null!=(e=t.channels)?e:1,this.oCt=null!=(r=null!=(n=t.frameRate)?n:i.frameRate)?r:1024,this.Nb=null!=(h=t.sampleRate)?h:i.sampleRate}},eK=class extends iK{get Kp(){return fn.Nk}get jPt(){return this.nCt}get aCt(){return this.zm}get glt(){return this.oCt}get iK(){return'video/mp4; codecs="'+this.lrt+'"'}constructor(t,i,s){var e;super(t,i,s),this.zm=void 0,this.oCt=void 0,this.zm=t.resolution,this.oCt=xn(null!=(e=t.frameRate)?e:i.frameRate)}};function nK(t,i){const s=String(i);if(t===JY||"now"===i)return s;const e=x(t.substring(9,t.lastIndexOf("d")));return zo(s,e,"0")}function rK(t,i){const s=String(i);if(t===JY)return s;const e=x(t.substring(12,t.lastIndexOf("d")));return zo(s,e,"0")}var hK=class{get Xet(){return this.uCt}get o(){return this.rS}get cCt(){return this.dCt}get DPt(){return Zd.Rp(this.qPt,this.Xet.DPt)}get Th(){return this.gO}get iPt(){return this.sCt}get lCt(){return this.fCt}er(t){for(const i of this.NI){const s=me(t.tracks,t=>i.o===t.id);s&&i.er(s)}}constructor(t,i,s){var e;this.nCt=void 0,this.NI=void 0,this.uCt=void 0,this.rS=void 0,this.dCt=void 0,this.qPt=void 0,this.gO=void 0,this.sCt=void 0,this.fCt=void 0,this.nCt=t,this.NI=s,this.uCt=i,this.rS=t.id,this.dCt=t.alignId,this.qPt=null!=(e=t.baseUrl)?e:"",this.gO=t.label,this.sCt=t.mediaTimeOffset?xn(t.mediaTimeOffset):0,this.fCt=t.protection,this.er(t)}},oK=class extends hK{get jPt(){return this.nCt}get Z(){return this.NI}get bs(){return this.jb}get rCt(){return this.hCt}er(t){var i,s;super.er(t),this.jb=t.language,this.hCt=null!=(i=t.channels)?i:1,this.mK=null!=(s=t.mimeType)?s:"audio/mp4"}constructor(t,i){const s=[];super(t,i,s),this.jb=void 0,this.hCt=void 0,this.mK=void 0;for(const i of t.tracks)s.push(new sK(i,t,this))}},aK=class extends hK{get jPt(){return this.nCt}get Z(){return this.NI}get vCt(){return this.nCt.captions}er(t){var i;super.er(t),this.mK=null!=(i=t.mimeType)?i:"video/mp4"}constructor(t,i){const s=[];super(t,i,s),this.mK=void 0;for(const i of t.tracks)s.push(new eK(i,t,this))}},uK=class{get o(){return this.rS}get DPt(){return Zd.Rp(this.qPt,this.gCt._Ct)}get mCt(){return this.pCt}get OR(){return this.mZ}get sK(){return this.Jf}get wCt(){return this.yCt}get bCt(){return this.ACt}er(t){var i;this.pCt=t.timeBounds,this.Jf=null!=(i=t.events)?i:[],this.mZ=t.currentTime?xn(t.currentTime):void 0}constructor(t,i){var s,e,n;this.yCt=[],this.ACt=[],this.gCt=void 0,this.rS=void 0,this.qPt=void 0,this.pCt=void 0,this.mZ=void 0,this.Jf=void 0,this.gCt=t,this.rS=i.id,this.qPt=null!=(s=i.baseUrl)?s:"";for(const t of null!=(e=i.audio)?e:[])this.yCt.push(new oK(t,this));for(const t of null!=(n=i.video)?n:[])this.ACt.push(new aK(t,this));this.er(i)}},cK=class{get aP(){return this.gCt}get SCt(){return this.TCt}get kCt(){return this.ECt}get RCt(){return this.xCt}get ICt(){return this.PCt}get CCt(){return this.NCt}get b0(){return this.bb}get DCt(){return this.BCt}get _Ct(){var t;return Zd.Rp(null!=(t=this.MCt)?t:"",this.LCt)}get OCt(){return this.FCt}er(t){var i;this.TCt=xn(t.availabilityDuration),this.ECt=t.creationDate,this.xCt=t.fallbackPollRate,this.PCt=t.manifestVersion,this.bb=t.streamType,this.BCt=t.activePresentation,this.MCt=t.contentBaseUrl,this.FCt=null==(i=t.timeSource)?void 0:i.url,this.gCt=t;for(const i of t.presentations){const t=me(this.NCt,t=>t.o===i.id);t?t.er(i):this.NCt.push(new uK(this,i))}this.NCt=this.NCt.filter(i=>t.presentations.some(t=>t.id===i.o))}constructor(t,i){this.LCt=void 0,this.gCt=void 0,this.TCt=void 0,this.ECt=void 0,this.xCt=void 0,this.PCt=void 0,this.NCt=[],this.bb=void 0,this.BCt=void 0,this.MCt=void 0,this.FCt=void 0,this.LCt=t,this.gCt=i,this.er(i)}};r(),r();var dK=0,lK=class extends fr{get oet(){return!0}get $wt(){return this.VCt.$wt}get EG(){return this.VCt.EG}get lrt(){return this.VCt.lrt}get o(){return this.VCt.o}get Th(){var t;return null!=(t=this.VCt.Th)?t:""}get qI(){return this._O}get eyt(){return this.VCt.DPt}get tyt(){}get iK(){return this.VCt.iK}get iPt(){return this.VCt.iPt}get DPt(){return this.VCt.DPt}get Kp(){return this.VCt.Kp}BPt(t){const i=(t-this.VCt.jPt.Xet.OR)*this.framesPerSecond();return _.round(this.VCt.YPt+i)}WCt(t){return t+1}NPt(t){var i;let s,e=this.VCt.tCt;for(;s=null==(i=e.match($Y))?void 0:i.pop();)e=e.split(s).join(nK(s,t));return e+("now"===t?"?uuid="+Ve():"")}GPt(t){var i;let s,e=this.VCt.JPt;for(;s=null==(i=e.match(tK))?void 0:i.pop();)e=e.split(s).join(rK(s,t));return e}qV(){}KV(){}constructor(t){super(),this.VCt=void 0,this._O=dK++,this.VCt=t}},fK=class extends lK{get UCt(){return this.VCt}get Jpt(){return this.VCt.DD}get Ht(){return this.OO}framesPerSecond(){return this.VCt.DD/this.VCt.glt}get Ca(){return this.hu||(this.hu=zX(this)),this.hu}constructor(t,i){super(t),this.OO=void 0,this.hu=void 0,this.OO=i}},vK=class extends lK{get UCt(){return this.VCt}get iyt(){return 0}get glt(){return this.VCt.glt}get Mi(){return this.VCt.aCt.height}get Ti(){return this.VCt.aCt.width}get aCt(){return this.VCt.aCt}get Ht(){return this.OO}framesPerSecond(){return this.VCt.glt}get Ca(){return this.hu||(this.hu=HX(this)),this.hu}constructor(t,i){super(t),this.OO=void 0,this.hu=void 0,this.OO=i}};r();var _K=function(t){return t.GCt="alternative",t.XCt="main",t.ZCt="commentary",t.HCt="",t.VV="descriptions",t.zCt="main-desc",t.YCt="translation",t}({}),Ca=function(t){return t.GCt="alternative",t.XCt="main",t.ZCt="commentary",t.HCt="",t.FV="captions",t.ZI="sign",t.OV="subtitles",t}({}),gK=0,mK=class extends fr{get KI(){return this.KCt()}get Rt(){return this.We}set Rt(t){this.Rt!==t&&(this.We=t,t&&this.qCt(),this.QCt.jCt(),this.So(new Tu(this)))}get Ca(){return this.hu||(this.hu=co(this)),this.hu}get jdt(){return this.JCt}get o(){return this.nCt.o}get qI(){return this._O}get Th(){var t;return null!=(t=this.nCt.Th)?t:""}get Hk(){return this.Rt?"enabled":"disabled"}set Hk(t){"enabled"===t?this.Rt=!0:"disabled"===t&&(this.Rt=!1)}get QI(){return this.cO}get JI(){return this.cct}set JI(t){this.cct=t,this.QCt.jCt(),this.So(new Zo(t,this))}pO(t){this.Rt=t}$Ct(t){for(const i of this.cO.CI)i===t&&this.So(new mn(i))}constructor(t,i,s){super(),this.nCt=void 0,this.QCt=void 0,this.cO=new Wc,this.JCt=void 0,this._O=gK++,this.We=!1,this.cct=void 0,this.hu=void 0,this.nCt=i,this.QCt=s,this.JCt=new fH(t,[]);for(const t of i.Z)this.cO.dO(this.createQuality(t))}},pK=class extends mK{get Kp(){return fn.Ck}get Lt(){return _K.XCt}get bs(){return this.nCt.bs}get jPt(){return this.nCt}qCt(){this.QCt.tNt(this)}KCt(){const t=this.QCt.iNt;return(null==t?void 0:t.Ht)===this?t:void 0}createQuality(t){return new fK(t,this)}constructor(t,i){super(Mo.Ck,t,i)}},wK=class extends mK{get Kp(){return fn.Nk}get Lt(){return Ca.XCt}get bs(){return""}get jPt(){return this.nCt}get vCt(){return this.nCt.vCt}qCt(){this.QCt.sNt(this)}KCt(){const t=this.QCt.eNt;return(null==t?void 0:t.Ht)===this?t:void 0}createQuality(t){return new vK(t,this)}constructor(t,i){super(Mo.Nk,t,i)}};function yK(t,i,s,e){if(!t)return;const n=function(t,i,s){const e=[];for(const t of i){var n;const i=null!=(n=t.mimeType)?n:"audio/mp4";var r;const s=null!=(r=t.codecs)?r:t.tracks.map(t=>t.codecs)[0];e.push(i+'; codecs="'+s+'"')}return bK(t,i,e,[],s)}(t,i?[i]:[],!e),r=function(t,i,s){const e=[];for(const t of i){var n;const i=null!=(n=t.mimeType)?n:"video/mp4";var r;const s=null!=(r=t.codecs)?r:t.tracks.map(t=>t.codecs)[0];e.push(i+'; codecs="'+s+'"')}return bK(t,i,[],e,s)}(t,s?[s]:[],!e),h=WH(n,r);return t.preferredKeySystems&&(null==h?void 0:h.Tmt)&&(h.Tmt=qH(h.Tmt,t.preferredKeySystems)),h}function bK(t,i,s,e,n){const r=i.map(t=>t.protection).filter(Y);if(!r.length)return;const h=r[0].type,o=vl(r,t=>t.systems),a=vl(o,t=>function(t,i){void 0===i&&(i=!0);const s=[],e=i?function(t){return tm.filter(i=>i.Qp===t.toLowerCase())}(t.schemeId):function(t){return $g.filter(i=>i.Qp===t.toLowerCase())}(t.schemeId);for(const i of e)s.push({XU:AK(t)?t.uri:void 0,TS:i,OG:void 0,MG:t.pssh?[Iu(t.pssh).buffer]:[],FG:[]});return s}(t,n));return{cU:t,kmt:{JSt:h},Tmt:a,$St:s,tTt:e}}function AK(t){return t.schemeId===Pg.zp&&void 0!==t.keyFormat&&void 0!==t.keyFormatVersions}r(),r(),r();var SK;function TK(t){const i=t.OR,s=t.IR.jM(i);return s?s.An(0)-i:0}SK="Android"===Zd.Pp.Cp?200:300;var kK=Zd.Zs.Pm?1:.5,EK=class{Tn(){1!==this.Ra&&(this.Ra=1,this.nNt=Zd._p(()=>{this.rNt()},SK),this.hNt.CIt(this.oNt),this.SL.ux?this.aNt.wn(Vo.SM,this.uNt):this.uNt())}Kx(){0!==this.Ra&&(this.Ra=0,void 0!==this.nNt&&Zd.gp(this.nNt),this.hNt.DIt(this.oNt),this.aNt.mn(Vo.AM,this.cNt),this.aNt.mn(Vo.SM,this.uNt),this.dNt=void 0,this.aL())}get lNt(){return RK(this.fNt.iNt,this.fNt.eNt)}async rNt(){await this.vNt,this.vNt=this._Nt(),await this.vNt}gNt(t,i){var s,e;const n=this.mNt(t,i),r=this.pNt.Mj;if(r.type===lc.PERFORMANCE)return n[n.length-1];if(r.type===lc.QUALITY)return n[0];const h=(null==(s=r.metadata)?void 0:s.bitrate)?1.3*(null==(e=r.metadata)?void 0:e.bitrate):this.hNt.EG;for(const t of n){if(t.wNt<=h)return t}return n[n.length-1]}async _Nt(){var t,i;const s=null==(t=this.fNt.iNt)?void 0:t.Ht,e=null==(i=this.fNt.eNt)?void 0:i.Ht,n=this.mNt(s,e);if(0===n.length)return void 0;const r=this.maybeSwitchToTargetQuality(n);if(r)return void await this.yNt(r);const h=this.maybeGetUpSwitch(n);h&&await this.yNt(h)}maybeSwitchToTargetQuality(t){const i=this.lNt;if(t.some(t=>xK(t,i)))return;const s=this.hNt.EG;for(const i of t){if(i.wNt<=s)return i}return t[t.length-1]}maybeGetUpSwitch(t){var i,s;const e=this.hNt.EG;var n;var r;const h=1.3*((null!=(n=null==(i=this.fNt.iNt)?void 0:i.EG)?n:0)+(null!=(r=null==(s=this.fNt.eNt)?void 0:s.EG)?r:0));let o;for(const i of t)if(i.wNt<e&&i.wNt>h){o={bNt:i,tft:Zd.Mg()};break}if(!this.dNt||!xK(this.dNt.bNt,null==o?void 0:o.bNt))return void(this.dNt=o);const a=Zd.Mg()-this.dNt.tft,u=this.dNt.bNt.wNt,c=this.ANt.length>=3&&this.ANt.every(t=>t>u);if(a>1e3&&c){if(this.SL.PL.IL||Zd.Zs.Tm){const t=2*this.hNt.xG;if(!(TK(this.SL)>t))return}else{const t=_.max(2*this.hNt.xG+kK,this.qG.eL.minimumOffset);if(!(TK(this.SL)>t))return void(this.SNt&&this.SNt.minimumOffset===t||(this.aL(),this.SNt={minimumOffset:t},this.qG.rL(this.SNt)))}return this.dNt.bNt}}async yNt(t,i){void 0===i&&(i=!1),this.dNt=void 0,this.aL();const s=this.lNt;if(s.TNt===t.TNt&&s.kNt===t.kNt)return;const e=t.TNt,n=t.kNt;s.kNt&&n&&s.kNt.EG>n.EG&&i&&(this.hNt.IIt(t.wNt),this.ANt=[]),await this.fNt.ENt(n,e)}aL(){this.SNt&&(this.qG.aL(this.SNt),this.SNt=void 0)}mNt(t,i){let s=[],e=[];var n;t&&(s=(null==(n=t.JI)?void 0:n.length)?t.JI:t.QI.CI);if(i){var r;const t=(null==(r=i.JI)?void 0:r.length)?i.JI:i.QI.CI,s=t.slice().sort((t,i)=>t.EG-i.EG),n=this.RNt(s);0===n.length&&t.length>0&&n.push(ho(t,t=>t.EG)),e=n}const h=[],o=s.length>0?s:[void 0],a=e.length>0?e:[void 0];for(const t of o)for(const i of a)h.push(RK(t,i));return function(t){return t.sort((t,i)=>i.wNt-t.wNt)}(h)}RNt(t){const i=me(t,t=>t.Mi>=this.SL.Mi&&t.Ti>=this.SL.Ti);return i?t.filter(t=>t.Mi<=i.Mi&&t.Ti<=i.Ti):t.slice()}Zg(){this.dNt=void 0,this.aNt.hr(),this.aL()}constructor(t,i,s,e,n,r){this.SL=void 0,this.qG=void 0,this.fNt=void 0,this.xNt=void 0,this.hNt=void 0,this.pNt=void 0,this.aNt=void 0,this.Ra=void 0,this.vNt=void 0,this.nNt=void 0,this.dNt=void 0,this.ANt=void 0,this.SNt=void 0,this.cNt=void 0,this.uNt=void 0,this.oNt=void 0,this.SL=t,this.qG=i,this.fNt=s,this.xNt=e,this.hNt=n,this.pNt=r,this.Ra=0,this.vNt=Promise.resolve(),this.ANt=[],this.SNt=void 0,this.cNt=()=>{var t,i;if(this.xNt.Rx)return;const s=null==(t=this.fNt.iNt)?void 0:t.Ht,e=null==(i=this.fNt.eNt)?void 0:i.Ht,n=ho(this.mNt(s,e),t=>t.wNt);n&&(_e(this.yNt(n,!0)),this.SL.PL.IL&&this.xNt.uP())},this.uNt=()=>{this.aNt.wn(Vo.AM,this.cNt),this.aNt.mn(Vo.SM,this.uNt)},this.oNt=()=>{if(this.ANt.unshift(this.hNt.EG),this.ANt=this.ANt.slice(0,3),this.dNt){const t=this.dNt.bNt.wNt;this.hNt.EG<t&&(this.dNt=void 0,this.aL())}},this.aNt=new ts(this.SL)}};function RK(t,i){var s;var e;return{TNt:t,kNt:i,wNt:1.3*((null!=(s=null==t?void 0:t.EG)?s:0)+(null!=(e=null==i?void 0:i.EG)?e:0))}}function xK(t,i){var s,e,n,r;return void 0===t||void 0===i?t===i:(null==(s=t.TNt)?void 0:s.o)===(null==(e=i.TNt)?void 0:e.o)&&(null==(n=t.kNt)?void 0:n.o)===(null==(r=i.kNt)?void 0:r.o)&&t.wNt===i.wNt}r();var IK=class t{static async create(i,s,e){const n=await PK(i,s,e);return new t(n,i,s)}get Lyt(){return(this.INt.serverTimeMs+(Zd.Mg()-this.INt.localTimeMs))/1e3}get PNt(){return(this.INt.localTimeMs-this.INt.serverTimeMs)/1e3}async xxt(t,i,s){for(;!s.Ug;){await hi(6e5,s);try{this.INt=await PK(t,i,s)}catch(t){Ui(t)}}}Zg(){this.eT.Jg()}constructor(t,i,s){this.INt=void 0,this.eT=new ui,this.INt=t,this.xxt(i,s,this.eT.jg).catch(ol)}};async function PK(t,i,s){let[e,n,r]=await CK(t,i,s);return n>20&&([e,n,r]=await CK(t,i,s)),{localTimeMs:e,serverTimeMs:r-n/2}}async function CK(t,i,s){const e=Zd.Mg(),n=await i.dk({Fk:ci.GET,Yu:t,jg:s}),r=Zd.Mg()-e,h=await n.FT(s);return[e,r,1e3*Number(h)]}var NK=class extends sh{constructor(){super("seek")}},DK=function(t){return t.WZ="seek",t}({}),BK=[d.uo,Vo.bI,d.vy],MK=class extends fr{get aP(){return this.gCt}get IR(){return this.CNt&&this.NNt?this.CNt.IR.Mn(this.NNt.IR):this.CNt?this.CNt.IR:this.NNt?this.NNt.IR:ZT.tL()}get iNt(){return this.DNt}get eNt(){return this.BNt}get ht(){return this.qL}get rt(){return this.JL}get MNt(){return this.LNt.Yy}get W(){return this.ONt.Yy}get kx(){return this.gCt?function(t,i,s){var e;const n=null==(e=t.CCt[0])?void 0:e.OR,r=t.SCt;if(void 0===n||void 0===r)return s>0&&s<ru?new ZT([0,s],[!0,!0]):ZT.tL();let h=i.ZIt;if(!h){const i=gX(t.kCt).getTime()/1e3;h=n+(Date.now()/1e3-i)}return new ZT([h-r,h],[!0,!0])}(this.gCt,this.FNt,this.SL.ct):ZT.tL()}async VNt(){this.CNt&&await this.CNt.vS(0,1/0),this.NNt&&await this.NNt.vS(0,1/0)}Un(){if(!this.Ac.src)throw new Wt(Ne.SOURCE_INVALID,"No src property found in given source.");this.Cmt||(this.Cmt=this.dE(this.hW.jg).catch(this.i9))}async dE(t){this.So(new Pt);const i=this.Ac.src,s=await this.WNt.Yxt(i,t);this.gCt=new cK(i,s),this.gCt.OCt&&(this.UNt=await IK.create(this.gCt.OCt,this.rW,t)),this.GNt();const e=rf(this.gCt.CCt,-1);this.createTracksForPresentation(e),this.LNt.Hy(),this.jCt()}tNt(t){for(const i of this.qL.CI)i.pO(i===t)}sNt(t){for(const i of this.JL.CI)i.pO(i===t)}jCt(){const t=me(this.qL.CI,t=>t.Rt),i=me(this.JL.CI,t=>t.Rt),s=this.kZ.gNt(t,i);_e(this.ENt(s.kNt,s.TNt))}GNt(){if(!this.gCt||"live"!==this.gCt.b0||!this.UNt)return;const t=this.gCt.CCt.filter(t=>t.o===this.gCt.DCt)[0].OR,i=this.UNt.PNt+new Date(this.gCt.kCt).getTime()/1e3;this.FNt.FIt(i,t)}createTracksForPresentation(t){var i,s,e,n;for(const i of null!=(e=t.wCt)?e:[])this.qL.tt(new pK(i,this));for(const i of null!=(n=t.bCt)?n:[])this.JL.tt(new wK(i,this));null==(i=this.qL.DI(0))||i.pO(!0),null==(s=this.JL.DI(0))||s.pO(!0)}get nP(){return ho([this.XNt,this.ZNt].filter(Y),t=>t.theolive)}get rP(){return this.XNt}get hP(){return this.ZNt}get HNt(){const t=this.FNt.ZIt;if(void 0!==t)return t}Tn(){this.zNt=!0,this.YNt()}Kx(){var t;this.zNt=!1,this.KNt().catch(this.i9),"live"===(null==(t=this.aP)?void 0:t.b0)&&(this.qNt(),this.jNt())}qNt(){this.QNt&&this.QNt.cancelDownload()}jNt(){this.JNt&&this.JNt.cancelDownload()}uP(t){this._8.Jg(),this._8=new ui,this.g8=gf(i=>this.$Nt(t,this.g8,i),this._8).catch(this.i9)}async $Nt(t,i,s){if(i&&await i,await $s(this.W,s),"live"!==this.gCt.b0)throw new m("The current video source does not support Live playback.");if(Ko(s),await this.KNt(),Ko(s),this.QNt&&(this.QNt.PPt()||this.QNt.EPt!==(null!=t?t:"now"))){var e;if(this.qNt(),this.CNt){for(;this.CNt.JIt;)await $s(this.CNt.tPt,s);await this.CNt.vS(0,1/0)}null==(e=this.QNt)||e.By(null!=t?t:"now")}if(this.JNt&&(this.JNt.PPt()||this.JNt.EPt!==(null!=t?t:"now"))){var n;if(this.jNt(),this.NNt){for(;this.NNt.JIt;)await $s(this.NNt.tPt,s);await this.NNt.vS(0,1/0)}null==(n=this.JNt)||n.By(null!=t?t:"now")}this.So(new NK),Ko(s),this.g8=void 0,this.YNt()}By(t){this._8.Jg(),this._8=new ui,this.g8=gf(i=>this.m8(t,this.g8,i),this._8).catch(this.i9)}async m8(t,i,s){var e,n;i&&await i,await $s(this.W,s),Ko(s),await this.KNt(),Ko(s),this.QNt&&(this.QNt.PPt()||this.QNt.EPt!==t)&&this.qNt(),this.JNt&&(this.JNt.PPt()||this.JNt.EPt!==t)&&this.jNt(),this.So(new NK),Ko(s),null==(e=this.QNt)||e.By(t),null==(n=this.JNt)||n.By(t),this.g8=void 0,this.YNt()}ENt(t,i){var s,e;return(null==(s=this.QNt)?void 0:s.Tot)===i&&(null==(e=this.JNt)?void 0:e.Tot)===t?Promise.resolve():(this.tDt.Jg(),this.tDt=new ui,this.iDt=gf(s=>this.sDt(t,i,this.iDt,s),this.tDt).catch(this.i9),this.iDt)}async sDt(t,i,s,e){var n,r;s&&await s,await $s(this.LNt.Yy,e),Ko(e),await this.KNt(),Ko(e),await this.eDt(t,i),await this.nDt(t,i),Ko(e);for(const i of null!=(r=null==t||null==(n=t.Ht)?void 0:n.vCt)?r:[])this.rDt.Bgt({eit:i.channel,nit:i.language,Th:i.label});this.iDt=void 0,this.YNt()}async eDt(t,i){var s,e,n;const r=null!=(n=this.HNt)?n:"now";if((null==(s=this.QNt)?void 0:s.Tot)!==i){var h;const t=this.QNt&&!this.QNt.PPt(),s=null==(h=this.QNt)?void 0:h.EPt;if(this.QNt&&(await this.QNt.Zg(),this.QNt=void 0),this.CNt&&await this.CNt.tPt,i){var o,a;const e=null!=(a=null==(o=this.CNt)?void 0:o.IR)?a:ZT.tL(),n=t?s:e.An(e.V-1);this.QNt=new jY(i,this.rW,this.vdt),this.QNt.wn(LY.cPt,t=>this.hDt(Mo.Ck,t)),this.QNt.By(null!=n?n:r)}}if((null==(e=this.JNt)?void 0:e.Tot)!==t){var u;const i=this.JNt&&!this.JNt.PPt(),s=null==(u=this.JNt)?void 0:u.EPt;if(this.JNt&&(await this.JNt.Zg(),this.JNt=void 0),this.NNt&&await this.NNt.tPt,t){var c,d;const e=null!=(d=null==(c=this.NNt)?void 0:c.IR)?d:ZT.tL(),n=i?s:e.An(e.V-1);this.JNt=new jY(t,this.rW,this.vdt),this.JNt.wn(LY.cPt,t=>this.hDt(Mo.Nk,t)),this.JNt.By(null!=n?n:r)}}}async nDt(t,i){const s=function(t,i,s,e,n){const r=yK(t,null==i?void 0:i.Ht.jPt.jPt,null==s?void 0:s.Ht.jPt.jPt,e),h=zH(r),o=[];i&&o.push({GT:i.iK});s&&o.push({GT:s.iK});return{Kp:xt.yW,D5:o,aX:h,X5:n&&!e}}(this.Ac.contentProtection,i,t,this.SL.PL.IL,this.Ac.useManagedMediaSource);if(this.eX&&this.eX.SJ(s)){var e,n;const t=!(null==(e=this.QNt)?void 0:e.PPt());if(this.CNt&&t){for(;this.CNt.JIt;)await this.CNt.tPt;await this.CNt._K()}const i=!(null==(n=this.JNt)?void 0:n.PPt());if(this.NNt&&i){for(var r,h;null==(r=this.NNt)?void 0:r.JIt;)await this.NNt.tPt;await(null==(h=this.NNt)?void 0:h._K())}await this.eX.kJ(s)}else{this.qNt(),this.jNt(),this.CNt&&(await this.CNt.Zg(),this.CNt=void 0),this.NNt&&(await this.NNt.Zg(),this.NNt=void 0),this.SL.R7();try{await this.SL.hr(),this.eX=await this.SL.Un(s),this.ONt.Hy(),this.eX.Y3&&this.QNt&&(this.eX.Y3.wn(Ws.dJ,this.Rs),this.CNt=new BY(this.eX.Y3,this.SL,i,this.rDt)),this.eX.K3&&this.JNt&&(this.eX.K3.wn(Ws.dJ,this.Rs),this.NNt=new BY(this.eX.K3,this.SL,t,this.rDt)),"live"===this.gCt.b0&&this.eX.x5(1/0)}finally{this.SL.x7()}}}YNt(){!this.zNt||this.g8||this.iDt||this.oDt||this.aDt||(this.kZ.Tn(),this.uDt=new ui,this.JNt&&this.NNt&&(this.oDt=this.cDt(this.JNt,this.NNt,this.uDt.jg).catch(this.i9)),this.QNt&&this.CNt&&(this.aDt=this.cDt(this.QNt,this.CNt,this.uDt.jg).catch(this.i9)))}async KNt(){this.kZ.Kx(),this.uDt&&(this.uDt.Jg(),this.uDt=void 0),this.oDt&&(await this.oDt,this.oDt=void 0),this.aDt&&(await this.aDt,this.aDt=void 0)}async cDt(t,i,s){for(await this.W;t.JIt;)await $s(t.tPt,s);for(;i.JIt;)await $s(i.tPt,s);if(!t.PPt()){const s=Zd.Mg()/1e3,e="now"===t.EPt,{initialization:n,data:r,metadata:h}=await t.CPt(),o={Kp:Vt.fJ,hk:n},a=r?{Kp:Vt.fJ,hk:r}:void 0,u=i.IR;!Zd.Zs.Rm&&!this.SL.PL.IL&&h&&u.An(u.V-1)>h.kst&&await i.vS(h.kst,1/0),await i.X2(o),a&&await i.W2(a,h,t.Tot);const c=i.IR.FM(u);e&&c.V>0&&this.FNt.LIt(s,c.An(c.V-1))}for(;!t.kPt;){Ko(s);const e=t.FPt();await $s(i.appendStream(e,t),s)}}async Zg(){this.hW.Jg(),this.Cmt&&await this.Cmt.catch(ol),this.g8&&(this._8.Jg(),this.qNt(),this.jNt(),await this.g8.catch(ol)),this.iDt&&(this.tDt.Jg(),this.qNt(),this.jNt(),await this.iDt.catch(ol)),await this.KNt(),this.QNt&&await this.QNt.Zg(),this.JNt&&await this.JNt.Zg(),this.QNt=void 0,this.JNt=void 0,this.ONt.Jg(),this.LNt.Jg(),this.eX&&(await this.SL.hr(),this.eX=void 0),this.CNt=void 0,this.NNt=void 0,this.SL.mn(Vo.SM,this.xL),this.SL.mn(BK,this.updateActiveQualities),this.qL.hr(),this.DNt=void 0,this.JL.hr(),this.BNt=void 0,this.gCt=void 0,this.UNt&&(this.UNt.Zg(),this.UNt=void 0),this.zNt=!1}constructor(t,i,s,e,n,r,h,o,a,u,c){super(),this.Ac=void 0,this.rW=void 0,this.WNt=void 0,this.SL=void 0,this.FNt=void 0,this.vdt=void 0,this.rDt=void 0,this.zNt=!1,this.dDt=!1,this.kZ=void 0,this.qL=new O,this.JL=new O,this.lDt=void 0,this.DNt=void 0,this.BNt=void 0,this.gCt=void 0,this.LNt=new gs,this.UNt=void 0,this.ZNt=void 0,this.XNt=void 0,this.qG=void 0,this.eX=void 0,this.Cmt=void 0,this.ONt=new gs,this.hW=new ui,this.iDt=void 0,this.tDt=new ui,this.g8=void 0,this._8=new ui,this.QNt=void 0,this.CNt=void 0,this.aDt=void 0,this.JNt=void 0,this.NNt=void 0,this.oDt=void 0,this.uDt=void 0,this.xL=()=>{this.dDt=!0},this.updateActiveQualities=()=>{var t,i;const s=this.SL.OR,e=null==(t=this.CNt)?void 0:t.qIt(s),n=null==(i=this.NNt)?void 0:i.qIt(s);if(this.DNt!==e&&(this.DNt=e,e))for(const t of this.qL.CI)t.$Ct(e);if(this.BNt!==n&&(this.BNt=n,n))for(const t of this.JL.CI)t.$Ct(n)},this.hDt=(t,i)=>{const s=i.data;if(s.Kp===VY.fPt){const{_Pt:i,gPt:n,vPt:r,mPt:h}=s;if(this.UNt){const s=this.UNt.Lyt,e=this.SL.OR;if(this.dDt&&0!==e){const h={theolive:s-i+r-e,engine:n,distribution:_.max(s-(i+n),0),player:_.min(r-e,this.qG.eL.forceSeekOffset)};t===Mo.Ck?(this.ZNt=h,this.FNt.GIt(this.UNt.PNt+i,r)):(this.XNt=h,this.FNt.WIt(this.UNt.PNt+i,r))}}var e;if(h)null!=this.lDt||(this.lDt=this.SL.sI(D.WV,"timecode","timecode",void 0,!1,hr.DEFAULT,!1,void 0)),this.lDt.iW(new Pc(r,r,h,!1,void 0)),St(this.lDt,null!=(e=this.SL.IR.Tn(0))?e:-1)}this.So(i)},this.i9=t=>{hc(t)||(this.Kx(),this.So(new $e(new Wt(Ne.MEDIA_LOAD_ERROR,t.message))))},this.Ac=t,this.WNt=i,this.SL=s,this.rW=n,this.FNt=r,this.kZ=new EK(s,h,this,a,e,c),this.vdt=o,this.rDt=u,this.qG=h,this.SL.wn(Vo.SM,this.xL),this.SL.wn(BK,this.updateActiveQualities)}};r();var LK=class extends KT{DL(){const t=this.SL.IR;return 0===t.V?0:t.An(t.V-1)-this.SL.OR}uP(){this.oa.uP()}BL(t,i,s){if(t>s+2){const s=t-i;if(s<=this.lastAmountToSeekForward&&!this.oa.Rx)return this.oa.OR+=s,this.lastAmountToSeekForward=0,!0;this.lastAmountToSeekForward=s}else this.lastAmountToSeekForward=0;return!1}uL(){return CY(super.uL())}ML(){return!Zd.Zs.Tm}constructor(t,i,s){super(t,i,s),this.lastAmountToSeekForward=0}},OK=[d.jw,d.Yw,d.vy,d.Nw,d.Kw,d._y,d.Iw,d.Mw,d.Dw,d.Ew,d.Tw],FK=class extends fr{VI(){this.SL.wn(OK,this.Rs),this.SL.wn(Vo.SM,this.LH),this.SL.wn([d.uo,d.zw],this.fDt),this.SL.wn(sa.ma,this.vDt),this.SL.wn(d.vy,this.bd),this.AX.wn(K,this.Rs)}OI(){this.SL.mn(OK,this.Rs),this.SL.mn(Vo.SM,this.LH),this.SL.mn([d.uo,d.zw],this.fDt),this.SL.mn(sa.ma,this.vDt),this.SL.mn(d.vy,this.bd),this.AX.mn(K,this.Rs)}get ht(){return this.qL}get rt(){return this.JL}get aP(){var t,i;return null==(i=this.fNt)||null==(t=i.aP)?void 0:t.aP}get Ox(){return this.SL.Ox}set Ox(t){this.SL.Ox=t}get Gx(){return!1}set Gx(t){}get hX(){return this.oX}qx(){return!1}Xx(){return this.SL.Ma}Aa(){return this.SL.pX}sI(t){return this.SL.wX(t)}we(){this.SL.we()}be(){return this.SL.be()}Jx(){}$x(){}jx(){}Qx(){}get ix(){return this.SL.ix}set ix(t){this.SL.ix=t}get OR(){var t;return null!=(t=this._Dt)?t:this.SL.OR}set OR(t){this.WR(t)}WR(t,i){this._8.Jg(),this._8=new ui,this.g8=gf(i=>this.m8(t,i,this.g8),this._8)}get NR(){const t=this.gDt();if(t)return new Date(t.getTime()+1e3*this.OR)}set NR(t){const i=this.gDt();t&&i&&(this.OR=i.getTime()-t.getTime())}gDt(){const t=this.aP;if(!t)return;const i=new Date(t.creationDate).getTime();let s=NaN;for(const i of t.presentations)i.currentTime&&(s=i.currentTime.value/(i.currentTime.scale||1)*1e3);return S(s)?void 0:new Date(i-s)}get bt(){return this.Ac}get vx(){return this.SL.vx}set vx(t){this.SL.vx=t}get ct(){const t=this.SL.ct;return t===ru?1/0:t}get GR(){return!1}get HR(){return this.tX}get lt(){return this.$G}get YR(){return this.mDt}get qR(){}get QR(){return!1}get $R(){return Jr({},{tO:0,iO:0,sO:0,eO:0,nO:0,rO:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}},this.SL.tx())}get hx(){return!0}get Rx(){return this.pZ}get nX(){}get nt(){return this.Gl}get Nx(){return this.SL.Nx}get Mx(){return this.SL.Mx}get IR(){return this.tkt._s()}get tkt(){return this.fNt?this.fNt.IR:ZT.tL()}get mx(){return this.SL.mx._s()}get kx(){var t,i;return null!=(i=null==(t=this.fNt)?void 0:t.kx._s())?i:ZT.tL()._s()}get ux(){return this.jst}get oP(){return!0}get Wx(){return this.EZ}get HNt(){var t;return null==(t=this.fNt)?void 0:t.HNt}get NL(){if(this.ux)return;if(!this.dDt)return;const t=this.OR,i=this.FNt.HIt(t);if(void 0===i)return;const s=this.tkt;let e=0;if(s.V>0){const i=s.An(s.V-1);e=_.max(i-t,0)}return _.max(i,e)}get nP(){var t;return null==(t=this.fNt)?void 0:t.nP}get rP(){var t;return null==(t=this.fNt)?void 0:t.rP}get hP(){var t;return null==(t=this.fNt)?void 0:t.hP}get Sx(){return this.SL.Sx}get yx(){return this.pDt}set yx(t){this.pDt=t,this.wDt()}async wDt(){this.pDt!==hl.oZ&&this.fNt&&(this.fNt.Un(),this.pDt!==hl.LL&&this.pDt!==hl.kG||(await this.fNt.MNt,"vod"===this.fNt.aP.b0&&this.fNt.Tn()))}async Ta(t,i,s){if(Ko(s),await this.hr(),Ko(s),!vk(t))return this.tX=new Wt(Ne.SOURCE_INVALID,"HESP source incorrectly configured"),this.$G=xs(this.tX),this.yDt(this.tX),Promise.resolve();const e=t;this.Ac=e;const n=new fY(this.rW);this.bDt=this.ADt(t),this.qG=new LK(this,this.SL,this.bDt),this.qG.Rt=!0,this.qG.wn("latencyrecoveryseek",this.Rs),this.Wx.Ea(this.qG),this.fNt=new MK(e,n,this.SL,this.oX,this.rW,this.FNt,this.qG,this.vdt,this,this.rDt,this.kZ),this.fNt.wn(d.Uw,this.Rs),this.fNt.wn(sa.ma,this.SDt),this.qL.MI=this.fNt.ht,this.JL.MI=this.fNt.rt,this.lX.NG(t.contentProtection),_e(this.wDt())}Ix(t,i,s,e){return Promise.resolve()}Px(){return Promise.resolve()}ADt(t){return t.latencyConfiguration?t.latencyConfiguration:NY()}async Yx(){var t;if(!this.fNt)return;this.jst=!1,this.fNt.Un(),await this.fNt.W,this.So(new Ts(this.OR));const i=this.fNt.pw(DK.WZ);this.uP(),await i,this.fNt.Tn(),await this.SL.Yx(),null==(t=this.qG)||t.Tn()}zx(){var t;this.fNt&&(this.jst=!0,this.So(new Pi(this.OR)),this.fNt.Kx(),null==(t=this.qG)||t.Kx(),this.SL.zx())}uP(){if(this.DEt)throw new m("Cannot seek while resetting");this._8.Jg(),this._8=new ui,this.g8=gf(t=>this.$Nt(this.g8,t),this._8)}async m8(t,i,s){if(this.DEt)throw new m("Cannot seek while resetting");let e=t;if(this.TDt(e),this.kx.length>0&&(e=ZT.jn(this.kx).CM(e),this.TDt(e)),this.fNt){s&&(await s.catch(ol),Ko(i));try{const t=this.SL.pw(d.Qw,i);this.SL.By(e),this.fNt.By(e),await t}catch(t){throw Ui(t),this.fNt.Kx(),this.kDt(),t}this.EDt()}}async $Nt(t,i){this.So(new sh("golive"));const s=this.HNt;if(this.TDt(s),this.fNt){t&&(await t.catch(ol),Ko(i));try{let t,e=this.qG.eL.targetOffset;if(await this.fNt.MNt,s&&e>=1){if(!this.qG.ML()){e-=_.min(1,.5*e)}t=s-e}else t=this.HNt?this.HNt-.2:void 0;for(this.fNt.uP(t);this.tkt.V>0;)await this.fNt.pw(Ws.dJ,i);const n=this.tkt;for(;0===this.tkt.FM(n).V;)await this.fNt.pw(Ws.dJ,i);t=this.tkt.Tn(this.tkt.V-1),t=this.RDt(t),this.TDt(t);const r=this.SL.pw(d.Qw,i);this.SL.By(t,!0),await r}catch(t){var e;if(hc(t))throw null==(e=this.qG)||e.Tn(),t;throw this.fNt.Kx(),await this.fNt.VNt(),this.kDt(),t}this.EDt()}}TDt(t){this.pZ=!0,this._Dt=t,this.So(new ul(this.OR))}EDt(){this.pZ&&(this._Dt=void 0,this.pZ=!1,this.So(new Wi(this.OR)))}kDt(){this._Dt=void 0,this.pZ=!1}RDt(t){return t}xDt(){var t;null==(t=this.fNt)||t.Kx()}yDt(t){this.So(new $e(t)),this.xDt()}async BEt(t,i,s){var e;Ko(s),null==(e=this.qG)||e.Kx(),t&&await t.catch(ol),i&&await i.catch(ol),await this.rDt.hr(),this.fNt&&(await this.fNt.Zg(),this.fNt=void 0),Ko(s),await this.SL.hr(),Ko(s),this.SL.bX(),this.JL.hr(),this.qL.hr(),this.kDt(),this.AX.hr(),this.FNt.hr(),this.tX=void 0,this.$G=void 0,this.jst=!0,this.dDt=!1,this.Ac=void 0,this.DEt=void 0,this.bDt=void 0}hr(){return this._8.Jg(),this._8=new ui,this.IDt.Jg(),this.IDt=new ui,this.DEt=this.BEt(this.g8,this.DEt,this.IDt.jg).catch(t=>Na(t)),this.DEt}async kn(){var t,i;this.OI(),this.AX.kn(),this.kX.Zg(),this.Ac&&await this.hr(),this.Vo(),this.SL.EX=void 0,null==(t=this.qG)||t.mn("latencyrecoveryseek",this.Rs),null==(i=this.qG)||i.Zg(),await this.rDt.kn(),this.Gl.kn(),this.qL.kn(),this.JL.kn()}constructor(t,i,s,e,n){var r;super(),this.SL=void 0,this.rW=void 0,this.oX=void 0,this.kX=void 0,this.AX=void 0,this.qG=void 0,this.lX=void 0,this.FNt=void 0,this.EZ=void 0,this.mDt=void 0,this.vdt=void 0,this.kZ=void 0,this.Ac=void 0,this.fNt=void 0,this.pZ=!1,this._Dt=void 0,this._8=new ui,this.g8=void 0,this.DEt=void 0,this.IDt=new ui,this.jst=!0,this.dDt=!1,this.qL=new Yu,this.JL=new Yu,this.Gl=void 0,this.rDt=void 0,this.tX=void 0,this.$G=void 0,this.pDt=hl.oZ,this.bDt=void 0,this.bd=()=>{const t=this.IR;t.length>0&&this.rDt.ZV(t.start(0))},this.fDt=()=>{this.SL.ux!==this.jst&&(this.SL.ux?this.zx():this.Yx().catch(ol))},this.LH=()=>{this.dDt=!0},this.SDt=t=>{this.tX=t.errorObject,this.$G=xs(this.tX),this.yDt(this.tX)},this.vDt=t=>{this.tX=Gk(t.lt),this.$G=t.lt,this.yDt(this.tX)},this.SL=t,this.kX=new vx(this,this.SL),this.AX=new ts(this.kX,!0),this.rW=i,this.kZ=s,this.oX=new SY(s.Wj,s.Aj.xG),this.lX=new HI(i),this.SL.EX=this.lX,n.allowNativeFullscreen?this.rDt=new MG(this.SL):this.rDt=new LG(this.SL),this.Gl=new Ka([this.rDt.Z]),this.FNt=new TY,this.mDt=new vY(this),this.EZ=e,this.vdt=Jr({},n.retryConfiguration,{maxRetries:null!=(r=n.retryConfiguration.maxRetries)?r:3}),this.VI()}},VK=class extends FK{So(t){if(this.PDt){if(t.type===d.Qw)return void this.CDt();if(t.type===Vo.AM||t.type===d.Jw||t.type===Vo.SM)return void this.NDt.push(t)}super.So(t)}CDt(){this.PDt=!1,void 0!==this.DDt&&Zd.Lg(this.DDt);const t=me(this.NDt,t=>t.type===Vo.SM);t&&super.So(t),Lr(this.NDt)}Zx(){if(LV(this.SL))return this.SL.Zx()}async hr(){this.BDt=!1,this.CDt(),await super.hr()}async kn(){h.removeEventListener("visibilitychange",this.MDt),this.CDt(),await super.kn(),await this.SL.Zg(),await this.xX.RX(this.LDt)}RDt(t){return As.z_&&As.K_>=15&&As.Kv?t+.25:t}constructor(t,i,s,e,n,r){super(t,i,s,e,r),this.xX=void 0,this.LDt=void 0,this.BDt=!1,this.PDt=!1,this.NDt=[],this.DDt=void 0,this.MDt=()=>{const t=this.ix||0===this.Ox;"hidden"!==h.visibilityState||this.ux||!t||this.Aa().HL?"visible"===h.visibilityState&&this.BDt&&(this.PDt=!0,this.DDt=Zd.Og(()=>{for(const t of this.NDt)super.So(t);this.DDt=void 0,this.PDt=!1},2e3),_e(this.Yx()),this.BDt=!1):(this.zx(),this.BDt=!0)},this.xX=n,this.LDt=t,As.Cg&&h.addEventListener("visibilitychange",this.MDt)}};r();var WK=class{get qX(){return ki.mP}async zX(t,i){return function(t){if(!t)return!1;const i=t.toLowerCase();return Qe(i,We.gP)||Qe(i,We.mP)}(t.type)}async YX(t){return PT(t)}};cs(new class extends WK{xP(t,i,s,e,n,r,h){const o=new ws(i),a=o.HX(Mo.Nk);return new VK(a,s,n,r,o,e)}zX(t,i){return Zd.cR&&Wb?As.w_||As.S_||As.N_?Promise.resolve(!1):Au(t.useManagedMediaSource)?super.zX(t,i):Promise.resolve(!1):Promise.resolve(!1)}KX(){return!1}}),r(),r();var UK=class extends FK{Zx(){if(LV(this.SL))return this.SL.Zx()}async kn(){await super.kn(),await this.xX.RX(this.SL)}constructor(t,i,s,e,n,r){super(t,i,s,e,r),this.xX=void 0,this.xX=n}};As.z_&&As.ru&&cs(new class extends WK{get qX(){return ki.TG}async zX(t,i){var s,e;if(As.IS_IOS_CHROME)return!1;const n=await super.zX(t,i);var r;if(null==(r=null==(e=mr())||null==(s=e.canPlayType)?void 0:s.call(e,We.fP))||!r||!n||!("serviceWorker"in od))return!1;try{const t=od.serviceWorker.ready;return await pf(t,1e3),!0}catch(t){return!1}}async YX(t){return!!t.fairplay&&await super.YX(t)}xP(t,i,s,e,n,r,h){if(t instanceof HTMLDivElement){const t=i.aet(Mo.Nk);return new UK(t,s,n,r,i,e)}throw new Wt(Ne.CONFIGURATION_ERROR,"Container Div element expected.")}KX(){return!1}}),r(),r(),r(),r();var GK="theo_live_user_id",XK=class{incrementSequenceNumber(){this.wA+=1}get sequenceNumber(){return this.wA}constructor(t){this.externalId=void 0,this.id=void 0,this.userId=void 0,this.wA=void 0,this.externalId=t,this.id=Ve(),this.userId=ZK(),this.wA=0}};function ZK(){try{const t=localStorage.getItem(GK);if(t)return t;const i=Ve();return localStorage.setItem(GK,i),i}catch(t){return Ve()}}function HK(t){var i;return{hespSrc:t.hespSrc,type:"theo.live",hlsSrc:t.hlsSrc,maxMobileBitrate:t.maxMobileBitrate,targetLatency:null==(i=t.metadata.customization)?void 0:i.targetLatency,contentProtection:t.drmConfig?t.drmConfig:void 0}}function zK(t){const{integration:i,widevine:s,playready:e,fairplay:n}=t;return Jr({integration:i},s&&{widevine:{licenseAcquisitionURL:s.licenseUrl}},e&&{playready:{licenseAcquisitionURL:e.licenseUrl}},n&&{fairplay:{licenseAcquisitionURL:n.licenseUrl,certificateURL:n.certificateUrl}})}function YK(t,i){return{id:t.id,name:t.name,deleted:"deleted"===t.status,targetLatency:t.source.targetLatency,maxMobileBitrate:t.source.maxMobileBitrate,endpoints:[{hespSrc:t.source.hespSrc,hlsSrc:t.source.hlsSrc,weight:1,priority:1,contentProtection:t.source.contentProtection},t.fallback&&i?{hespSrc:t.fallback.hespSrc,hlsSrc:t.fallback.hlsSrc,weight:1,priority:2,contentProtection:t.fallback.contentProtection}:void 0].filter(Y)}}function KK(t){return void 0!==t.mode}r(),r(),r(),r();var _n=function(t){return t.STARTING="s",t.PLAYING="p",t.SEEKING="k",t.REBUFFERING="r",t.PAUSED="a",t.ENDED="e",t.QUIT="q",t}({}),In=function(t){return t.MANIFEST="m",t.AUDIO="a",t.VIDEO="v",t.OTHER="o",t}({});function qK(t){return 100*_.round(t/100)}function jK(t){const i=t.FR(),s=t.PR();for(let t=0;t<s.length;t++)if(s.start(t)<=i&&i<=s.end(t))return 1e3*(s.end(t)-i);return 0}function QK(t){return me(t.CI,t=>t.Rt)}function JK(t){return ho(t.QI.CI,t=>t.EG)}function $K(t){return af(t.QI.CI,t=>t.EG)}r(),r();var Yi=class t{static starting(i,s,e){return new t(_n.STARTING,i,s,e)}static playing(i){return new t(_n.PLAYING,i)}static seeking(i,s){return new t(_n.SEEKING,i,s)}static rebuffering(i,s){return new t(_n.REBUFFERING,i,s)}static paused(i){return new t(_n.PAUSED,i)}static ended(i){return new t(_n.ENDED,i)}static quit(i){return new t(_n.QUIT,i)}get ct(){return Date.now()-this.ODt}FDt(){const t=this.oa.JH.Aj.EG,i=this.oa.Wx.NL,s=jK(this.oa);t>0&&void 0!==s&&void 0!==i&&(this.VDt+=1,this.WDt=this.UDt(this.WDt,s),this.GDt=this.UDt(this.GDt,1e3*this.oa.Wx.Cd.targetOffset),this.rX=this.UDt(this.rX,1e3*i),this.XDt=this.UDt(this.XDt,t/1e3))}UDt(t,i){return t+(i-t)/this.VDt}xP(){const t={sta:this.Ym,ts:this.ODt,"theo-vt":this.ZDt,"theo-at":this.HDt,"theo-d":this.ct,"theo-r":this._f};return this.VDt>0?Jr({},t,{bl:qK(this.WDt),tbl:qK(this.GDt),ltc:qK(this.rX),mtp:qK(this.XDt),"theo-w":this.VDt}):t}zDt(){return new t(this.Ym,this.oa,this._f)}constructor(t,i,s,e){var n,r,h,o;this.Ym=void 0,this.ODt=Date.now(),this.WDt=0,this.GDt=0,this.ZDt=void 0,this.HDt=void 0,this.rX=0,this.XDt=0,this.VDt=0,this._f=void 0,this.$G=void 0,this.oa=void 0,this.Ym=t,this.oa=i,this.ZDt=null==(r=QK(this.oa.rt))||null==(n=r.KI)?void 0:n.o,this.HDt=null==(o=QK(this.oa.ht))||null==(h=o.KI)?void 0:h.o,this._f=s,this.$G=e}},tq=class{YDt(){var t;const i=this.oa.Wx.NL,s=jK(this.oa),e=this.oa.JH.Aj.EG;return iq({bl:void 0!==s?qK(s):void 0,tbl:qK(1e3*this.oa.Wx.Cd.targetOffset),ltc:void 0!==i?qK(1e3*i):void 0,mtp:void 0!==e?qK(e/1e3):void 0,sta:null==(t=this.KDt)?void 0:t.Ym,su:!this.dDt||void 0,"theo-sq":this.qDt.sequenceNumber})}jDt(t){var i,s;const e=function(t,i){switch(i){case In.VIDEO:return QK(t.rt);case In.AUDIO:return QK(t.ht)}}(this.oa,t);return iq({br:(null==e||null==(i=e.KI)?void 0:i.EG)?qK((null==e||null==(s=e.KI)?void 0:s.EG)/1e3):void 0,ot:t,tb:e?qK($K(e).EG/1e3):void 0,lb:e?qK(JK(e).EG/1e3):void 0})}QDt(){return iq({"theo-cw":this.oa.xe.clientWidth,"theo-ch":this.oa.xe.clientHeight,"theo-m":this.oa.ix,"theo-vo":_.ceil(100*this.oa.Ox)})}JDt(){var t;return iq({sf:sq(this.oa.bt),sid:this.qDt.id,st:"l",v:2,"theo-eid":null==(t=this.qDt.externalId)?void 0:t.substring(0,128),"theo-cn":this.$Dt.name.substring(0,128),"theo-v":"9.11.0","theo-t":"web","theo-u":this.qDt.userId})}tBt(){const t={"CMCD-States":btoa(JSON.stringify(this.iBt))};return this.iBt=[],t}sBt(t){this.KDt&&this.iBt.push(this.KDt.xP()),this.KDt=t}async eBt(){this.KDt&&(this.iBt.push(this.KDt.xP()),this.KDt=void 0),this.iBt.push(Yi.quit(this.oa).xP());const t=Jr({},this.tBt(),{"CMCD-Session":this.JDt()}),i=await this.oa.AR.dk({Yu:this.nBt,lk:t,Yk:!0});await i.hk()}destroy(){this.rBt(),s.removeEventListener("beforeunload",this.rBt),this.oa.mn(Vo.SM,this.xL),this.oa.mn(Vo.AM,this.RL),this.oa.mn(d.zw,this.hBt),this.oa.YR.mn("latencyrecoveryseek",this.oBt),this.oa.YR.mn("golive",this.aBt),this.oa.rt.mn(Lu.nI,this.YG),this.oa.ht.mn(Lu.nI,this.YG),this.oa.rt.CI.forEach(t=>t.mn(M.EI,this.ih)),this.oa.ht.CI.forEach(t=>t.mn(M.EI,this.ih)),this.oa.$et.removeEventListener("intenttofallback",this.uBt),this.oa.$et.removeEventListener("publicationloadstart",this.cBt),this.oa.$et.removeEventListener("publicationoffline",this.dBt),this.oa.JH.gj(this.lBt),Zd.gp(this.fBt)}constructor(t,i,e){this.oa=void 0,this.$Dt=void 0,this.nBt=void 0,this.fBt=void 0,this.qDt=void 0,this.iBt=[],this.KDt=void 0,this.dDt=!1,this.qH=!1,this.uBt=t=>{var i,s,e;this.sBt(Yi.starting(this.oa,"fallback",null!=(e=null==(i=t.reason)?void 0:i.message)?e:null==(s=this.oa.zR())?void 0:s.message))},this.cBt=()=>{this.sBt(Yi.starting(this.oa,"loadChannel"))},this.dBt=()=>{this.sBt(Yi.ended(this.oa))},this.YG=t=>{t.Ht.wn(M.EI,this.ih)},this.ih=()=>{var t,i,s,e;const n=null==(i=QK(this.oa.rt))||null==(t=i.KI)?void 0:t.o,r=null==(e=QK(this.oa.ht))||null==(s=e.KI)?void 0:s.o;n&&r&&(this.KDt&&this.KDt.Ym===_n.PLAYING&&this.KDt.ZDt===n&&this.KDt.HDt===r||this.sBt(Yi.playing(this.oa)))},this.xL=()=>{this.dDt=!0,this.qH=!1,this.sBt(Yi.playing(this.oa))},this.oBt=()=>{this.dDt&&!this.qH&&(this.qH=!0,this.sBt(Yi.seeking(this.oa,"latencyRecovery")))},this.aBt=()=>{this.dDt&&!this.qH&&(this.qH=!0,this.sBt(Yi.seeking(this.oa,"goLive")))},this.RL=()=>{this.oa.Rx||this.sBt(Yi.rebuffering(this.oa,"visible"===h.visibilityState?void 0:"invisible"))},this.hBt=()=>{this.sBt(Yi.paused(this.oa))},this.lBt=t=>{const i=Zd.Dh(t.url),s=function(t){const{pathname:i}=t;if(sm(i,"manifest.json"))return In.MANIFEST;if(Vh(i,"/video/"))return In.VIDEO;if(Vh(i,"/audio/"))return In.AUDIO;return In.OTHER}(i);if(s===In.OTHER)return;this.qDt.incrementSequenceNumber();let e=Jr({},t.headers,{"CMCD-Request":this.YDt(),"CMCD-Object":this.jDt(s),"CMCD-Status":this.QDt(),"CMCD-Session":this.JDt()});s===In.VIDEO&&!sm(i.pathname,".hspi")&&this.KDt&&(this.sBt(this.KDt.zDt()),e=Jr({},e,this.tBt())),t.redirect(Jr({},t,{headers:e}))},this.rBt=()=>{_e(this.eBt())},this.oa=t,this.$Dt=i,this.qDt=e;const n=i.endpoints[0],r=(null==n?void 0:n.hespSrc)||(null==n?void 0:n.hlsSrc)||"";this.nBt=Zd.Dh("bye",r).href,s.addEventListener("beforeunload",this.rBt),this.oa.wn(Vo.SM,this.xL),this.oa.wn(Vo.AM,this.RL),this.oa.wn(d.zw,this.hBt),this.oa.YR.wn("latencyrecoveryseek",this.oBt),this.oa.YR.wn("golive",this.aBt),this.oa.JH.lj(this.lBt),this.oa.rt.wn(Lu.nI,this.YG),this.oa.ht.wn(Lu.nI,this.YG),this.oa.$et.addEventListener("intenttofallback",this.uBt),this.oa.$et.addEventListener("publicationloadstart",this.cBt),this.oa.$et.addEventListener("publicationoffline",this.dBt),this.KDt=Yi.starting(this.oa,"loadchannel"),this.fBt=Zd._p(()=>{var t;null==(t=this.KDt)||t.FDt()},1e3)}};function iq(t){return w.keys(t).map(i=>function(t,i){switch(typeof i){case"boolean":return i?t:t+"=false";case"number":return t+"="+i;case"string":return t+'="'+i+'"';default:return}}(i,t[i])).filter(Boolean).sort().join(",")}function sq(t){if(t)return t.type===We.fP||t.type===We.vP?"h":t.type===We.mP?"e":void 0}var eq=class extends Wt{constructor(t,i,s){super(t,"Could not load channel with id "+i+": "+s),this.channelId=void 0,this.reason=void 0,this.channelId=i,this.reason=s}},nq=class extends eq{constructor(t){super(Ne.THEO_LIVE_CHANNEL_NOT_FOUND,t,"The channel could not be found")}},rq=class extends eq{constructor(t){super(Ne.THEO_LIVE_CHANNEL_NOT_FOUND,t,"This account has been locked")}},hq=class extends eq{constructor(t){super(Ne.THEO_LIVE_CHANNEL_NOT_FOUND,t,"The channel got deleted")}},oq=class{Ngt(t){const i=this.vBt.get(t);if(i)return i;const s=new aq(t,this.rW,this._Bt);return this.vBt.set(t,s),s}constructor(t,i){this.rW=void 0,this._Bt=void 0,this.vBt=void 0,this.rW=t,this._Bt=i,this.vBt=new Map}},aq=class{get gBt(){return qf()-this.mBt>36e5}er(){this.pBt=!1,this.mBt=qf(),this.wBt=this.ISt(),this.wBt.catch(()=>this.pBt=!0)}async ISt(){for(const i of this._Bt.discoveryUrls){const s=await this.yBt(this.rS,i,this.bBt);if(s){if(KK(s)){const{mode:e,status:n,fallback:r,metadata:h}=s;if("locked"===e)throw new rq(this.rS);if("deleted"===n)throw new hq(this.rS);var t;return YK({id:this.rS,name:h.name,mode:e,status:n,source:HK(s),fallback:r?await this.ABt(r,i,this.bBt):void 0,insights:null==h?void 0:h.insights,enhancedLogging:null==h?void 0:h.enhancedLogging,customization:null==h?void 0:h.customization,sseEndpoint:s.sseEndpoint},null==(t=this._Bt.fallbackEnabled)||t)}return s}}throw new nq(this.rS)}async ABt(t,i,s){if("theo.live"!==t.type)return{hespSrc:t.src,type:t.type};const e=await this.yBt(t.src,i,s);return e?HK(e):void 0}async yBt(t,i,s){try{const e=Zd.Dh(t,i);e.searchParams.set("osName",function(){const t=Zd.Zs.vm;if("ios"===t||"macos"===t)return"apple";return t}()),e.searchParams.set("deviceType",Zd.Zs._m),e.searchParams.set("sdkType","web");const n=await this.rW.dk({Yu:e.toString(),lk:s});return await n.OT()}catch(t){return}}get SBt(){return(this.pBt||this.gBt)&&this.er(),this.wBt}constructor(t,i,s){var e;this.rS=void 0,this.rW=void 0,this._Bt=void 0,this.mBt=void 0,this.wBt=void 0,this.pBt=void 0,this.bBt=void 0,this.rS=t,this.rW=i,this._Bt=s,this.bBt=new oa,this._Bt.discoveryHeader&&this.bBt.append("x-theolive-discovery",this._Bt.discoveryHeader),this.bBt.set("CMCD-Session",iq({sid:this._Bt.sessionId,st:"l",v:2,"theo-eid":null==(e=this._Bt.externalSessionId)?void 0:e.substring(0,128),"theo-v":"9.11.0","theo-t":"web","theo-u":this._Bt.userId})),this.er()}};r();var uq=class extends sh{constructor(t){super("publicationloadstart"),this.publicationId=void 0,this.publicationId=t}},cq=class extends sh{constructor(t){super("distributionloadstart"),this.distributionId=void 0,this.distributionId=t}},dq=class extends sh{constructor(t){super("publicationoffline"),this.publicationId=void 0,this.publicationId=t}},lq=class extends sh{constructor(t){super("distributionoffline"),this.distributionId=void 0,this.distributionId=t}},fq=class extends sh{constructor(t,i){super("publicationloaded"),this.publicationId=void 0,this.channelName=void 0,this.publicationId=t,this.channelName=i}},vq=class extends sh{constructor(t){super("endpointloaded"),this.endpoint=void 0,this.endpoint=t}},_q=class extends sh{constructor(t){super("intenttofallback"),this.reason=void 0,this.reason=t}},gq=class extends sh{constructor(){super("enterbadnetworkmode")}},mq=class extends sh{constructor(){super("exitbadnetworkmode")}},pq=class extends fr{get Ca(){return this.hu||(this.hu=function(t){return{addEventListener(i,s){t.wn(i,s)},removeEventListener(i,s){t.mn(i,s)},get badNetworkMode(){return t.TBt},set badNetworkMode(i){t.TBt=i},get authToken(){return t.kBt},set authToken(i){t.kBt=i},preloadPublications:async i=>(await t.EBt(i)).map(t=>({name:t.name}))}}(this)),this.hu}get TBt(){return this.oa.TBt}set TBt(t){this.oa.TBt=t}get kBt(){return this.oa.kBt}set kBt(t){this.oa.kBt=t}EBt(t){return this.oa.EBt(t)}constructor(t){super(),this.oa=void 0,this.hu=void 0,this.oa=t}};var wq=["https://discovery.theo.live/channels/"],yq=8e5,bq=class extends ic{RBt(){this.oa.YR.wn("latencyrecoveryseek",this.oBt),this.oa.rt.wn(Lu.nI,this.YG)}xBt(){this.oa.YR.mn("latencyrecoveryseek",this.oBt),this.oa.rt.mn(Lu.nI,this.YG)}iI(t){if(!this.zNt||this.$G||this.CZ)return super.iI(t);if(t.type===Vo.SM)return void 0!==this.IBt?(Zd.Lg(this.IBt),this.IBt=void 0,this.dDt||this.So(new $n(this.FR()))):this.So(new $n(this.FR())),this.PBt=0,this.dDt=!0,!0;if(t.type===Vo.AM)return this.IBt||(this.IBt=Zd.Og(()=>{this.So(new lx(this.FR())),this.IBt=void 0},100)),!0;if(t.type===sa.ma){var i;this.PBt++;const s=(null==(i=this.aZ)?void 0:i.src)&&Eq(this.aZ.src),e=this.PBt>5;return s||e?(this.dispatchErrorEvent(t.errorObject),!0):(this.CBt.So(new _q(t.errorObject)),_e(this.NBt()),!0)}if(t.type===d.uo){if(this.DBt=Zd.Mg(),void 0===this.BBt&&(this.BBt=Zd._p(()=>{var t;Zd.Mg()-(null!=(t=this.DBt)?t:0)>15e3&&(this.CBt.So(new _q(new Wt(Ne.THEO_LIVE_UNKNOWN_ERROR,"Indefinite stall detected"))),_e(this.NBt()))},1e3)),this.oa.bt&&(this.MBt=!1),this.MBt)return!0}else if(t.type===d.zw){if(void 0!==this.BBt&&(Zd.gp(this.BBt),this.BBt=void 0),this.oa.bt&&(this.MBt=!0),!this.MBt)return!0}else t.type===d.vy?this.DBt=Zd.Mg():t.type===Vo.bM?this.LBt&&(!function(t,i){const s=me(t.rt.CI,t=>t.o===i.enabledVideoTrackId),e=me(t.rt.CI,t=>t.Rt);if(s){var n;e&&e.o===s.o||(s.Rt=!0),s.JI=null==(n=i.targetVideoQualities)?void 0:n.map(t=>me(s.QI.CI,i=>i.o===t)).filter(Y)}else e&&(e.Rt=!1);const r=me(t.ht.CI,t=>t.o===i.enabledAudioTrackId),h=me(t.ht.CI,t=>t.Rt);r?h&&h.o===r.o||(r.Rt=!0):h&&(h.Rt=!1);for(const s of t.nt.CI){var o;const t=null!=(o=i.textTrackModes.get(s.o))?o:Z.Nh;s.Hk!==t&&(s.Hk=t)}}(this.oa,this.LBt),this.LBt=void 0):t.type===d.iy&&(this.CBt.So(new _q(new Wt(Ne.THEO_LIVE_UNKNOWN_ERROR,"manifest not found"))),_e(this.NBt()));return super.iI(t)}tnt(){return this.CBt.Ca}ZR(){return this.zNt?this.CZ:super.ZR()}zR(){return this.zNt?this.$G:super.zR()}get TBt(){return this.OBt}set TBt(t){this.zNt&&(t?this.FBt():this.VBt())}FBt(){if(this.OBt)return;if(this.OBt=!0,this.CBt.So(new gq),0===this.oa.rt.V)return;const t=this.rt.DI(0),i=uf(t.QI.CI,t=>t.EG);var s;(null!=(s=i.$wt)?s:i.EG)<yq?(t.JI=[i],Promise.resolve().then(()=>t.JI=t.QI.CI.slice())):this.VBt()}VBt(){if(!this.OBt)return;if(this.OBt=!1,this.CBt.So(new mq),0===this.oa.rt.V)return;const t=this.oa.rt.DI(0);var i;const s=Aq(null!=(i=t.JI)?i:t.QI.CI);t.JI=s.length>0?s:Aq(t.QI.CI)}get kBt(){return this.WBt}set kBt(t){this.WBt=t,this.oa.JH.gj(this.UBt),this.WBt&&this.oa.JH.lj(this.UBt)}EBt(t){return Promise.all(t.map(async t=>{const i=this.GBt.Ngt(t);return await $s(i.SBt,this.eT.jg)}))}nu(){var t;return null!=(t=this.Ac)?t:super.nu()}async Ta(t,i){var s;this.zNt=!1;for(const e of null!=(s=null==t?void 0:t.sources)?s:[])if(wk(e)&&e.type===We.wP&&e.src){if(this.zNt=!0,this.Ac=t,this.aZ=e,this.CBt.So(new uq(e.src)),this.CBt.So(new cq(e.src)),this.RBt(),Eq(e.src)){const s=Jr({},t,{sources:[Jr({},e,{type:We.mP,useManagedMediaSource:!0})]});return void await super.Ta(s,i)}this.XBt=this.GBt.Ngt(e.src);try{const t=await this.XBt.SBt;return this.$Dt=t,void(this.ZBt.analyticsEnabled&&(this.HBt=new tq(this,t,this.qDt)))}catch(t){throw Ui(t),this.zBt(),t}}return await super.Ta(t,i)}lx(){return this.zNt?this.MBt:super.lx()}Yx(){this.s8||(this.s8=!0,this.YBt(!1)),this.MBt=!1,super.Yx()}zx(){this.MBt=!0,super.zx()}async NBt(){null!=this.LBt||(this.LBt=function(t){var i,s;const e=me(t.rt.CI,t=>t.Rt),n=null==e?void 0:e.o,r=null==e||null==(i=e.JI)?void 0:i.map(t=>t.o),h=null==(s=me(t.ht.CI,t=>t.Rt))?void 0:s.o,o=Se();return t.nt.CI.forEach(t=>o.set(t.o,t.Hk)),{enabledVideoTrackId:n,targetVideoQualities:r,enabledAudioTrackId:h,textTrackModes:o}}(this.oa)),await this.oa.Kx().catch(ol),this.YBt(!0)}YBt(t){if(!this.XBt)return;if(this.KBt)return;this.zBt();const i=()=>{this.KBt=void 0};this.KBt=this.qBt(this.XBt,t).then(i).catch(i)}async qBt(t,i){i&&t.er();const s=await t.SBt;this.$Dt=s;const e=await this.selectEndpoint(s,this.jBt);if(this.jBt=e,e){const t=this.convertEndpointToSource(s,e);try{await this.oa.Ta(t,(new ui).jg)}catch(t){return this.dispatchErrorEvent(t),void this.zBt()}this.CBt.So(new fq(s.id,s.name)),this.CBt.So(new vq(e)),this.MBt||this.oa.Yx()}else this.CBt.So(new dq(s.id)),this.CBt.So(new lq(s.id)),this.QBt=Zd.Og(()=>this.YBt(!0),15e3)}convertEndpointToSource(t,i){var s,e;const n={sources:[this.getHespSource(t,i),this.getHlsSource(i)].filter(Y),ads:this.dDt?[]:null==(s=this.Ac)?void 0:s.ads,blockContentIfAdError:null==(e=this.Ac)?void 0:e.blockContentIfAdError,streamType:"live"};if(i.adSrc||i.daiAssetKey){var r;const t=null!=(r=n.ads)?r:[],s=t.filter(t=>"theoads"===t.integration);s.length>0?s.forEach(t=>{const s=t;var e,n;s.sseEndpoint=null!=(e=i.adSrc)?e:s.sseEndpoint,s.daiAssetKey=null!=(n=i.daiAssetKey)?n:s.daiAssetKey}):t.push({integration:"theoads",sseEndpoint:i.adSrc,daiAssetKey:i.daiAssetKey}),n.ads=t}const h=bc(n);return h.sources[0].bypassLicense=!0,h}getHespSource(t,i){var s,e;if(i.hespSrc)return{type:"application/vnd.theo.hesp+json",src:i.hespSrc,contentProtection:i.contentProtection?zK(i.contentProtection):void 0,useManagedMediaSource:!0,latencyConfiguration:null!=(e=null==(s=this.aZ)?void 0:s.latencyConfiguration)?e:Sq(t.targetLatency),hesp:{maxMobileBitrate:t.maxMobileBitrate}}}getHlsSource(t){if(t.hlsSrc)return{type:"application/x-mpegurl",src:t.hlsSrc,useNativePlayback:As.w_&&As.b_<4,contentProtection:t.contentProtection?zK(t.contentProtection):void 0}}dispatchErrorEvent(t){const i=t instanceof Wt?t:new Wt(Ne.THEO_LIVE_UNKNOWN_ERROR,t.message,t);this.CZ=xs(i),this.$G=i,this.zBt(),this.So(new $e(i))}zBt(){void 0!==this.IBt&&(Zd.Lg(this.IBt),this.IBt=void 0),void 0!==this.QBt&&(Zd.Lg(this.QBt),this.QBt=void 0),void 0!==this.BBt&&(Zd.gp(this.BBt),this.BBt=void 0)}Kx(){var t;return this.eT.Jg(),this.eT=new ui,this.xBt(),this.zBt(),this.DBt=void 0,this.zNt=!1,this.s8=!1,this.dDt=!1,null==(t=this.HBt)||t.destroy(),this.HBt=void 0,this.Ac=void 0,this.aZ=void 0,this.XBt=void 0,this.$Dt=void 0,this.jBt=void 0,this.$G=void 0,this.CZ=void 0,this.PBt=0,this.JBt=[],this.MBt=!0,this.LBt=void 0,this.OBt&&this.VBt(),super.Kx()}async kn(t){var i;this.eT.Jg(),this.oa.JH.gj(this.UBt),void 0!==this.IBt&&(Zd.Lg(this.IBt),this.IBt=void 0),this.Vo(),this.xBt(),null==(i=this.HBt)||i.destroy(),this.oa.YR.mn("latencyrecoveryseek",this.oBt),await super.kn(t)}async selectEndpoint(t,i){let s=!1;const e=t.endpoints.slice();is(e,i);const n=xc(e.map(t=>t.priority)).sort();for(const t of n){const i=e.filter(i=>i.priority===t);for(;i.length>0;){const t=kq(i),e=await Tq(t,this.oa.AR);if("online"===e)return t;"invalid-security"===e&&(s=!0),is(i,t)}}if(i){const t=await Tq(i,this.oa.AR);if("online"===t)return i;"invalid-security"===t&&(s=!0)}if(s){const t=new Wt(Ne.MEDIA_LOAD_ERROR,"Trying to play a token protected stream without the correct token configured.");throw this.dispatchErrorEvent(t),t}}constructor(t,i){var s;super(t,i),this.CBt=void 0,this.qDt=void 0,this.GBt=void 0,this.ZBt=void 0,this.HBt=void 0,this.Ac=void 0,this.aZ=void 0,this.XBt=void 0,this.$Dt=void 0,this.jBt=void 0,this.zNt=!1,this.CZ=void 0,this.$G=void 0,this.eT=new ui,this.IBt=void 0,this.dDt=!1,this.s8=!1,this.KBt=void 0,this.QBt=void 0,this.BBt=void 0,this.DBt=void 0,this.JBt=[],this.OBt=!1,this.WBt=void 0,this.MBt=!0,this.PBt=0,this.LBt=void 0,this.YG=t=>{var i;const s=t.Ht,e=null==(i=this.$Dt)?void 0:i.maxMobileBitrate;if(void 0!==e&&Zd.Zs.Ks){s.QI.CI.filter(t=>t.EG>e).forEach(t=>s.QI.vS(t))}var n;s.wn(M.EI,this.ih);const r=Aq(null!=(n=s.JI)?n:s.QI.CI);s.JI=r.length>0?r:Aq(s.QI.CI)},this.ih=t=>{const i=t.Tot;var s;(!i||(null!=(s=i.$wt)?s:i.EG)>=yq)&&this.VBt()},this.oBt=()=>{this.FBt(),this.JBt.push(Zd.Mg()),this.JBt=this.JBt.filter(t=>Zd.Mg()-t<=3e5),this.JBt.length>=3&&(this.JBt=[],this.CBt.So(new _q(new Wt(Ne.THEO_LIVE_UNKNOWN_ERROR,"Unstable playback detected."))),_e(this.NBt()))},this.UBt=t=>{this.zNt&&this.WBt&&("manifest"!==t.type&&"segment"!==t.type||(t.headers.Authorization="Bearer "+this.WBt,t.redirect(t)))},this.CBt=new pq(this);const e=t.Cd.theoLive;var n,r,h;this.ZBt={sessionId:null!=(n=null==e?void 0:e.sessionId)?n:Ve(),userId:null!=(r=null==e?void 0:e.userId)?r:ZK(),externalSessionId:null==e?void 0:e.externalSessionId,analyticsEnabled:!1!==(null==e?void 0:e.analyticsEnabled),fallbackEnabled:!1!==(null==e?void 0:e.fallbackEnabled),discoveryUrls:[null==e?void 0:e.discoveryUrl,...null!=(h=null==e?void 0:e.discoveryUrls)?h:[],...wq].filter(Y).map(t=>t.lastIndexOf("/")===t.length-1?t:t+"/")},this.qDt=new XK(null==(s=this.ZBt)?void 0:s.externalSessionId),this.GBt=new oq(t.AR,this.ZBt),this.oa.YR.wn("latencyrecoveryseek",this.oBt)}};function Aq(t){return t.filter(t=>{var i;return(null!=(i=t.$wt)?i:t.EG)>=yq})}function Sq(t){return void 0===t?Jr({},NY(),{forceSeekOffset:20}):{minimumOffset:t-YT,targetOffset:t,maximumOffset:t+YT,forceSeekOffset:20,minimumPlaybackRate:$t,maximumPlaybackRate:Ot}}async function Tq(t,i){try{const s=t.hespSrc||t.hlsSrc,e=await i.dk({Yu:s,Kp:Ic.pk,Vk:3e3});if(e.rk>=200&&e.rk<300)return"online"}catch(t){if(t instanceof xe&&403===t.hE.rk)return"invalid-security"}return"offline"}function kq(t){const i=t.reduce((t,i)=>t+i.weight,0);if(0===i){return t[_.floor(_.random()*t.length)]}const s=_.random()*i;let e=0;for(const i of t)if(e+=i.weight,s<=e)return i;return t[t.length-1]}function Eq(t){try{return sm(Zd.Dh(t).pathname,"manifest.json")}catch(t){return!1}}zF(t=>new bq(t),ZF.wP),r(),r(),r();var Rq=cr(wd());r(),r(),r();var xq=class extends fr{get JN(){return this.$Bt}er(t,i){this.dA=t,this.$Bt=i,this.hu&&this.So(new ea(this.hu))}get Ca(){var t;return null!=(t=this.hu)?t:this.hu=this.xa()}get o(){return this.dA.id}get qI(){return this._O}get EG(){return this.dA.bitrate}get $wt(){}get lrt(){return""}get Th(){return""}get eyt(){return""}get oet(){return!0}get tyt(){}KV(){throw new m("Method not implemented.")}qV(){throw new m("Method not implemented.")}kn(){this.Vo()}constructor(t,i){super(),this._O=Kk(),this.dA=void 0,this.$Bt=void 0,this.hu=void 0,this.dA=t,this.$Bt=i}},Iq=class extends xq{xa(){return HX(this)}get glt(){return 0}get Ti(){return this.dA.width}get Mi(){return this.dA.height}get iyt(){return 0}constructor(t,i){super(t,i)}};r();var Pq=class extends fr{get Rt(){return!0}set Rt(t){}get Ca(){var t;return null!=(t=this.hu)?t:this.hu=co(this)}pO(t){this.Rt=t}get jdt(){}get Lt(){return this.y4}get o(){return this.rS||"millitrack"}get qI(){return this._O}get Th(){return""}get bs(){return""}get Hk(){return this.Rt?"enabled":"disabled"}set Hk(t){this.pO("enabled"===t)}get KI(){}get QI(){return this.cO}get JI(){return this.tMt}set JI(t){if(this.tMt=t,this.Rt){const i=1===(null==t?void 0:t.length)?t[0].JN:void 0;this.iMt(i)}this.So(new Zo(this.cO.CI.slice(),this)),((null==t?void 0:t.length)||this.cO.V)&&this.So(new mn((null==t?void 0:t[0])||this.cO.DI(0)))}get jI(){}kn(){this.Vo();for(const t of this.cO.CI)t.kn();this.cO.hr()}constructor(t,i){super(),this._O=ai(),this.cO=new Wc,this.tMt=void 0,this.rS=void 0,this.y4=void 0,this.hu=void 0,this.rS=t,this.y4=i}},Cq=class extends Pq{er(t){for(const i of t.active){const s=me(t.layers,t=>t.encodingId===i.id),e=me(this.cO.CI,t=>t.o===i.id);e?e.er(i,s):this.cO.dO(new Iq(i,s))}this.So(new nc(this))}get Kp(){return Mo.Nk}iMt(t){var i;null==(i=this.sMt)||i.eMt(t)}kn(){this.sMt=void 0,super.kn()}constructor(t,i,s){super(t,i),this.sMt=void 0,this.sMt=s}};r();var Nq=class{er(t){this.nMt=t}get EG(){var t,i,s,e,n;var r;return(null!=(n=null==(i=this.nMt)||null==(t=i.video.inbounds)?void 0:t.reduce((t,i)=>t+i.bitrateBitsPerSecond,0))?n:0)+(null!=(r=null==(e=this.nMt)||null==(s=e.audio.inbounds)?void 0:s.reduce((t,i)=>t+i.bitrateBitsPerSecond,0))?r:0)}get xG(){var t,i;return null!=(i=null==(t=this.nMt)?void 0:t.currentRoundTripTime)?i:0}IG(t){}constructor(){this.nMt=void 0}};r(),r();var Dq=class extends xq{xa(){return zX(this)}get Jpt(){return this.rMt}constructor(t,i){super(t,i),this.rMt=0}},Bq=class extends Pq{er(t){for(const i of t.active){const s=me(t.layers,t=>t.encodingId===i.id),e=me(this.cO.CI,t=>t.o===i.id);e?e.er(i,s):this.cO.dO(new Dq(i,s))}this.So(new nc(this))}get Kp(){return Mo.Ck}iMt(t){var i;null==(i=this.sMt)||i.hMt(t)}kn(){this.sMt=void 0,super.kn()}constructor(t,i,s){super(t,i),this.sMt=void 0,this.sMt=s}};r();var Mq=class extends Pc{xa(){return function(t){return Qr(oE(t),{get mid(){return t.NV.mid},get uuid(){return t.NV.uuid},get timecode(){return t.NV.timecode},get unregistered(){return t.NV.unregistered}})}(this)}constructor(t,i){super(t,t,void 0,!1),this.NV=void 0,this.NV=i}};r(),r();var Lq=cr(wd()),Oq=class extends fr{get Ca(){return this.hu||(this.hu=Bk(this)),this.hu}YL(t){return Lq.Logger.diagnose(t)}wn(t,i){this.oMt.wn(t,i)}mn(t,i){this.oMt.mn(t,i)}constructor(t){super(),this.hu=void 0,this.oMt=void 0,this.oMt=t}},Fq=[d.uo,d.zw,Vo.SM,d.vy,d.Yw,d.Uw,d.Jw,d.Qw,d.Nw,d.Kw,d._y,d.Iw,d.jw,d.Ew,d.Tw,d.Mw,d.Dw],Vq=["active","inactive","stopped","vad","layers","migrate","viewercount"],Wq=1e3,Uq=class extends sh{get stats(){return this.nMt}constructor(t){super("stats"),this.nMt=void 0,this.nMt=t}},Gq=class extends fr{eMt(t){var i;null==(i=this.Lf)||i.select(t).catch(this.mpt)}hMt(t){var i;null==(i=this.Lf)||i.select(t).catch(this.mpt)}get Gx(){return!1}Zx(){return this.SL.Zx()}get ht(){return this.qL}get IR(){return this.SL.IR._s()}get NR(){return this.SL.NR}set NR(t){}get bt(){return this.Ac}get OR(){return this.SL.OR}set OR(t){this.WR(t)}WR(t,i){}get ct(){return this.SL.ct}get GR(){return this.SL.GR}get lt(){return this.$G}get HR(){return this.tX}get YR(){}get qR(){return this.aMt}get QR(){return this.SL.QR}get $R(){var t,i;const s=this.uMt,e=null==s||null==(t=s.video.inbounds)?void 0:t[0],n=null==s||null==(i=s.audio.inbounds)?void 0:i[0];var r,h,o,a;return{eO:this.kZ.Aj.EG,tO:null!=(r=null==e?void 0:e.framesDropped)?r:0,iO:0,sO:null!=(h=null==e?void 0:e.framesReceived)?h:0,nO:(null!=(o=null==e?void 0:e.totalBytesReceived)?o:0)+(null!=(a=null==n?void 0:n.totalBytesReceived)?a:0),rO:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}}}get ix(){return this.SL.ix}set ix(t){this.SL.ix=t}get hx(){var t,i;return null!=(i=null==(t=this.Lf)?void 0:t.isActive())&&i}get ux(){return this.SL.ux}get vx(){return 1}set vx(t){}get mx(){return this.SL.mx._s()}get yx(){return hl.oZ}set yx(t){}get Sx(){return this.SL.Sx}get kx(){return this.SL.kx._s()}get Rx(){return this.SL.Rx}get nX(){return this.SL.nX}get nt(){return this.SL.nt}get Nx(){return this.SL.Nx}get rt(){return this.JL}get Mx(){return this.SL.Mx}get Ox(){return this.SL.Ox}set Ox(t){this.SL.Ox=t}get Wx(){return this.EZ}get hX(){return this.oX}get NL(){return this.EZ.NL}be(){this.SL.be()}we(){this.SL.we()}async Yx(){this.Un(),await this.SL.Yx()}zx(){this.SL.zx()}async hr(){var t;this.cMt(),this.Ac=void 0,this.eT.Jg(),null==(t=this.Lf)||t.stop(),this.Lf=void 0,this.Cmt&&(await this.Cmt.catch(ol),this.Cmt=void 0),this.dMt=void 0,await this.SL.hr(),this.lMt=void 0,this.fMt=0,this.SL.bX();for(const t of this.JL.CI)t.kn();this.qL.hr(),this.JL.hr()}async kn(){this.cMt(),this.Vo(),await this.hr(),this.qL.kn(),this.JL.kn(),this.AX.kn(),this.kX.Zg(),this.SL.mn(Fq,this.Rs),this.SL.mn(sa.ma,this.Ts),await this.TZ.RX(this.SL)}async Ta(t,i,s){Ko(s),this.gEt(),this.cMt();const e=t;this.Ac=e,this.eT=new ui,e.apiUrl&&Rq.Director.setEndpoint(e.apiUrl);this.Lf=new Rq.View(void 0,()=>Rq.Director.getSubscriber({streamName:e.src,streamAccountId:e.streamAccountId,subscriberToken:e.subscriberToken}),void 0,!0),this.vMt=Jr({},e.connectOptions,{events:Vq}),this._Mt()}Ix(t,i,s,e){return Promise.resolve()}Px(){return Promise.resolve()}Un(){if(void 0!==this.Cmt)return;const t=this.Lf;void 0!==t&&(this.Cmt=this.dE(t,this.vMt,this.eT.jg).catch(this.mpt))}async dE(t,i,s){Ko(s);try{var e,n;await $s(t.connect(i),s),t.webRTCPeer.initStats({autoInitStats:!0,statsIntervalMs:_.min(null!=(n=null==(e=this.Ac)?void 0:e.statsIntervalMs)?n:Wq,Wq)})}catch(i){Ui(i),function(t){return Nc(t)&&"FetchError"===t.name}(i)&&400===i.status&&(Zd.lp("[THEOplayer] Millicast connect error, reconnecting.",i),await $s(t.reconnect(),s)),this.XX(new Wt(Ne.NETWORK_ERROR,i.message,i))}}async gMt(t,i){Ko(i);try{this.SL.R7(),this.dMt=t,await this.SL.hr(),await this.SL.Un({Kp:xt.wW,eP:"",ZJ:t,GT:We.pP,aX:[]})}finally{this.SL.x7()}}_Mt(){var t;const i=this.Lf;i.on("track",t=>this.mMt(t)),i.on("broadcastEvent",t=>this.pMt(t)),i.webRTCPeer.on("stats",t=>{this.uMt=t,this.oX.er(t),this.wMt()}),(null==(t=this.vMt)?void 0:t.metadata)&&i.on("metadata",t=>this.yMt(t))}wMt(){var t,i;void 0===this.bMt&&(this.So(new Uq(this.uMt)),this.bMt=Zd._p(()=>{this.So(new Uq(this.uMt))},null!=(i=null==(t=this.Ac)?void 0:t.statsIntervalMs)?i:Wq))}cMt(){void 0!==this.bMt&&(Zd.gp(this.bMt),this.bMt=void 0)}mMt(t){const i=this.qL.V>0,s=this.JL.V>0,e=i&&!s,n=t.streams[0];if(e){const t=n.getVideoTracks().slice();for(const i of t)n.removeTrack(i)}n!==this.dMt&&this.gMt(n,this.eT.jg).catch(this.mpt)}pMt(t){switch(t.name){case"active":{this.So(new CH);const i=t.data,s=this.vMt;for(const t of i.tracks)if(t.media!==Mo.Nk||s.disableVideo||this.JL.CI.some(i=>i.o===t.trackId)){if(t.media===Mo.Ck&&!s.disableAudio&&!this.qL.CI.some(i=>i.o===t.trackId)){const i=this.qL.V>0?_K.GCt:_K.XCt;this.qL.tt(new Bq(t.trackId,i,this))}}else{const i=this.JL.V>0?Ca.GCt:Ca.XCt;this.JL.tt(new Cq(t.trackId,i,this))}break}case"inactive":this.So(new NH),this.JL.hr(),this.qL.hr();break;case"stopped":this.So(new NH);break;case"viewercount":default:break;case"layers":{const i=t.data;if(0===this.JL.V){const t=new Cq("",Ca.XCt,this);t.er(i.medias[0]),this.JL.tt(t)}else{const t=me(this.JL.CI,t=>t.Lt===Ca.XCt);null==t||t.er(i.medias[0])}break}}}yMt(t){let i=this.lMt;void 0===i&&(i=this.SL.sI(D.WV,void 0,void 0,void 0,void 0,hr.MILLICAST),i.Hk=Z.$I,this.lMt=i);const s=this.OR,e=_.max(0,s-10);this.fMt<e&&(St(i,e),this.fMt=e);const n=new Mq(s+.001,t);i.iW(n)}XX(t){this.$G||(_e(this.hr()),this.$G=xs(t),this.tX=t,this.So(new $e(t)))}gEt(){this.$G=void 0,this.tX=void 0}qx(){return!1}jx(){}Qx(){}Jx(){this.SL.Jx()}$x(){const t=this.dMt;void 0!==t&&this.gMt(t,this.eT.jg).catch(this.mpt)}Xx(){return this.SL.Ma}Aa(){return this.SL.pX}sI(t){return this.SL.wX(t)}constructor(t,i,s){super(),this.TZ=void 0,this.kZ=void 0,this.EZ=void 0,this.SL=void 0,this.Lf=void 0,this.vMt=void 0,this.Ac=void 0,this.eT=void 0,this.Cmt=void 0,this.dMt=void 0,this.JL=void 0,this.qL=void 0,this.lMt=void 0,this.$G=void 0,this.tX=void 0,this.uMt=void 0,this.fMt=void 0,this.oX=void 0,this.kX=void 0,this.AX=void 0,this.aMt=void 0,this.bMt=void 0,this.Ts=void 0,this.mpt=void 0,this.TZ=t,this.kZ=i,this.EZ=s,this.eT=new ui,this.Cmt=void 0,this.dMt=void 0,this.JL=new O,this.qL=new O,this.fMt=0,this.oX=new Nq,this.Ts=t=>{this.XX(Gk(t.lt))},this.mpt=t=>{hc(t)||this.XX(new Wt(Ne.MEDIA_DECODE_ERROR,t.message,t))},this.SL=this.TZ.HX(Mo.Nk),this.kX=new vx(this,this.SL),this.AX=new ts(this.kX,!0),this.SL.wn(Fq,this.Rs),this.SL.wn(sa.ma,this.Ts),this.AX.wn(K,this.Rs),this.aMt=new Oq(this)}};cs(new class{get qX(){return ki.pP}xP(t,i,s,e,n,r,h,o){return new Gq(i,n,r)}zX(t,i){return t.type===We.pP}async YX(t){let i=await PT(t);return i&&(i=Boolean(t.widevine||t.fairplay)),i&&!1}KX(){return!1}}),r(),r(),r(),r();var Xq=function(t){return t.AMt="currentbufferingrenditionchange",t.SMt="TMt",t.kMt="EMt",t}({});r(),r();var Zq=class{constructor(t,i){var s,e;this.qI=void 0,this.RMt=void 0,this.Kp=void 0,this.xMt=void 0,this.IMt=void 0,this.PMt=void 0,this.l=void 0,this.bs=void 0,this.CMt=void 0,this.NMt=void 0,this.DMt=void 0,this.BMt=void 0,this.lrt=void 0,this.qI=Kk(),this.RMt=i,this.Kp=t.Kp,this.xMt=t.xMt,this.IMt=t.IMt,this.PMt=t.PMt,this.l=t.l,this.bs=t.bs,this.CMt=t.CMt,this.NMt=t.NMt,this.DMt=void 0===t.eyt,this.BMt=null!=(e=null==(s=t.BMt)?void 0:s.split(","))?e:[]}};function Lc(t,i){return t.Kp===i.Kp&&(t.l===i.l||!(!t.xMt||!i.xMt))}function Hq(t,i){return void 0!==t&&void 0!==i&&zq(t,i)}function zq(t,i){return t.RMt===i.RMt}function Yq(t,i){return zq(t,i)&&t.CMt===i.CMt}function Kq(t,i){for(const s of t)if(Yq(s,i))return!0;return!1}var qq=class extends fr{get jI(){return this.MMt}get Rt(){const t=this.LMt();if(!t)return!1;for(const i of this.QI.CI)if(i.OMt===t)return!0;return!1}set Rt(t){if(t!==this.Rt)if(t){var i;let t=null==(i=this.QI.DI(0))?void 0:i.OMt;const s=this.VMt.FMt;for(const i of this.QI.CI)if(i.WMt===s){t=i.OMt;break}this.UMt(t)}else this.UMt(void 0)}get KI(){if(!this.Rt)return;const t=this.VMt.GMt;for(const i of this.QI.CI)if(Kq(t,i.OMt))return i}get Ca(){return this.hu||(this.hu=co(this)),this.hu}get o(){return this._O.toString()}get qI(){return this._O}get Th(){return this.gO}set Th(t){t!==this.gO&&(this.gO=t,this.So(new nc(this)))}get bs(){return this.jb}get Hk(){return this.Rt?"enabled":"disabled"}get JI(){return this.cct}set JI(t){let i=[];if(t){i=t.filter(t=>{const i=this.KI?yU(this.KI):void 0;return Zd.Zs.Lm(i,yU(t))}).filter(i=>this.QI.lO(t)&&i.oet)}else i=this.QI.CI.filter(t=>t.oet);if(0!==i.length){if(!(t===this.cct||this.cct&&pc(this.cct,i))){if(this.cct=t?i:void 0,this.VMt.XMt(i.map(t=>t.WMt)),1===i.length){const t=i[0].WMt,s=this.Ym===Mo.Nk,e=this.kZ.qj;_e(this.VMt.ZMt(t,{HMt:!0,zMt:e&&s,YMt:e&&!s}))}this.So(new Zo(i,this))}}else this.So(new wU)}pO(t){this.Rt=t}KMt(t){return me(this.QI.CI,i=>i.OMt===t)}kn(){this.Vo(),this.VMt.mn(Xq.AMt,this.qMt),this.VMt.mn(Xq.SMt,this.jMt);for(const t of this.QI.CI)t.kn();this.QI.hr()}constructor(t,i,s,e,n){var r;super(),this.Ym=void 0,this.VMt=void 0,this.kZ=void 0,this.wh=void 0,this.QI=void 0,this.gO=void 0,this.jb=void 0,this.MMt=void 0,this.cct=void 0,this.QMt=void 0,this.JMt=void 0,this.hu=void 0,this._O=void 0,this.$Mt=void 0,this.qMt=void 0,this.jMt=void 0,this.Ym=t,this.VMt=i,this.kZ=s,this.wh=e,this.QI=n,this.cct=void 0,this.QMt=void 0,this.$Mt=()=>this.So(new nc(this)),this.qMt=()=>{const t=this.KI;t&&this.QMt!==t&&(this.QMt=t,this.So(new mn(t)))},this.jMt=()=>{const t=this.Rt;this.JMt!==t&&(this.JMt=t,this.wh.So(new Tu(this)),this.So(new Tu(this)))},this.QMt=this.KI,this.JMt=this.Rt;const h=n.DI(0);var o,a;this.gO=null!=(o=null==h?void 0:h.OMt.l)?o:"",this.jb=null!=(a=null==h?void 0:h.OMt.bs)?a:"",this.MMt=null==h||null==(r=h.OMt)?void 0:r.BMt.map(ij).filter(Y),this._O=ai(),this.VMt.wn(Xq.AMt,this.qMt),this.VMt.wn(Xq.SMt,this.jMt);for(let t=0;t<this.QI.V;t++){this.QI.DI(t).wn("update",this.$Mt)}}},jq=class extends qq{get Lt(){return _K.XCt}LMt(){return this.VMt.tLt}UMt(t){_e(this.VMt.iLt(t))}constructor(t,i,s,e){super(Mo.Ck,t,i,s,e)}},Qq=class extends qq{get Lt(){return Ca.XCt}LMt(){return this.VMt.sLt}UMt(t){_e(this.VMt.eLt(t))}constructor(t,i,s,e){super(Mo.Nk,t,i,s,e)}},Jq=class extends fr{get o(){return String(this.WMt.o)}get qI(){return this.WMt.o}get EG(){return this.WMt.EG}get $wt(){return this.WMt.$wt}get Th(){var t;return null!=(t=this.gO)?t:this.OMt.l}set Th(t){this.Th!==t&&(this.gO=t,this.So(new ea(this.Ca)))}get eyt(){return this.OMt.RMt.nLt()}get tyt(){return this.WMt.tyt}qV(){}KV(){}kn(){this.Vo()}constructor(t,i){super(),this.WMt=void 0,this.OMt=void 0,this.gO=void 0,this.oet=void 0,this.WMt=t,this.OMt=i,this.gO="",this.oet=!0}},$q=class extends Jq{get Jpt(){return 0}get lrt(){var t;return(null==(t=this.WMt.lrt)?void 0:t.wCt)||""}get Ca(){return this.hu||(this.hu=this.xa()),this.hu}xa(){return zX(this)}constructor(t,i){super(t,i),this.hu=void 0}},tj=class extends Jq{get lrt(){var t;return(null==(t=this.WMt.lrt)?void 0:t.bCt)||""}get iyt(){return this.rLt}set iyt(t){this.rLt!==t&&(this.rLt=t,this.So(new ea(this.Ca)))}get glt(){var t,i;return null!=(i=null!=(t=this.oCt)?t:this.WMt.glt)?i:0}set glt(t){this.glt!==t&&(this.oCt=t,this.So(new ea(this.Ca)))}get Mi(){var t,i;return null!=(i=null==(t=this.WMt.aCt)?void 0:t.Mi)?i:0}get Ti(){var t,i;return null!=(i=null==(t=this.WMt.aCt)?void 0:t.Ti)?i:0}get Ca(){return this.hu||(this.hu=this.xa()),this.hu}xa(){return HX(this)}constructor(t,i){super(t,i),this.hu=void 0,this.rLt=0,this.oCt=void 0}};function ij(t){return"public.accessibility.describes-video"===t?Qs.YI:"public.accessibility.transcribes-spoken-dialog"===t?Qs.TRANSCRIBES_SPOKEN_DIALOG:"public.accessibility.describes-music-and-sound"===t?Qs.DESCRIBES_MUSIC_AND_SOUND:"public.accessibility.easy-to-read"===t?Qs.zI:void 0}r();var Fi=new class{hLt(t){if(!this.Rt())return!1;const i=[];return!(i.length>0)||i.some(i=>i.toLowerCase()===t.toLowerCase())}oLt(t){for(var i=arguments.length,s=new Array(i>1?i-1:0),e=1;e<i;e++)s[e-1]=arguments[e];this.hLt(t)&&Zd.dp("DEBUG "+t+" -",...s)}nD(t){for(var i=arguments.length,s=new Array(i>1?i-1:0),e=1;e<i;e++)s[e-1]=arguments[e];this.hLt(t)&&Zd.dp("INFO "+t+" -",...s)}aLt(t){for(var i=arguments.length,s=new Array(i>1?i-1:0),e=1;e<i;e++)s[e-1]=arguments[e];this.hLt(t)&&Zd.lp("WARNING "+t+" -",...s)}lt(t){for(var i=arguments.length,s=new Array(i>1?i-1:0),e=1;e<i;e++)s[e-1]=arguments[e];this.hLt(t)&&Zd.fp("ERROR "+t+" -",...s)}uLt(t){for(var i=arguments.length,s=new Array(i>1?i-1:0),e=1;e<i;e++)s[e-1]=arguments[e];this.hLt(t)&&Zd.fp("FATAL "+t+" -",...s)}constructor(){this.Rt=()=>!1}},Hi="HLSPlaylistParser",sj="Discontinuity",ej="Buffering";r();var nj=class{get EG(){return this.Oat.pst}get xG(){return this.MIt.pst}IG(t){if("segment"!==t.Kp&&"preload-hint"!==t.Kp)return;const i=[new gY(this.MIt)];return"stream"!==t.ck||!function(t){return"segment"===t.Kp&&"initialization-segment"!==t.Uk}(t)&&"preload-hint"!==t.Kp?i.push(new mY(this.Oat)):i.push(new pY(this.Oat,1e3)),new _Y(i)}IIt(t){this.Oat=new Ss(Ss.uIt,Ss.cIt,1,t)}constructor(t){this.Oat=void 0,this.MIt=void 0;const i=t.EG>0?t.EG:Ss.Bat,s=t.xG>0?t.xG:Sn.Bat;this.Oat=new Ss(Ss.uIt,Ss.cIt,1,i),this.MIt=new Sn(Sn.uIt,Sn.cIt,s)}};r();var rj=class{YJ(t,i){const s={Kp:xt.yW,aX:[],D5:t.map(t=>({GT:t})),X5:i};return Promise.resolve(void 0!==this.net.YJ([s]))}constructor(t){this.net=void 0,this.net=t}};r(),r();var hj=(t,i,s,e,n)=>t.filter(t=>!!Ft(e,t)||1.1*t.EG<=s.EG),oj=(t,i,s,e,n)=>t.filter(t=>{if(Ft(e,t))return!0;let r=1/0;for(const i of t.cLt){var h,o;r=_.min(r,null!=(o=null!=(h=i.RMt.dLt)?h:i.RMt.lLt)?o:1/0)}r===1/0&&(r=1);const a=2*s.xG+t.EG*r/s.EG;return t.EG<=i.EG||n.fLt>a}),aj=(t,i,s,e,n)=>Xs(t,(t,i)=>i.EG-t.EG),uj=(t,i,s,e,n)=>t.every(t=>t.tyt&&!S(t.tyt))?Xs(t,(t,i)=>i.tyt-t.tyt):t,cj=(t,i,s,e,n)=>0===e.length?t:Xs(t,(t,i)=>{const s=Ft(e,t)?1:0;return(Ft(e,i)?1:0)-s}),dj=(t,i,s,e,n,r)=>t.filter(t=>!t.lrt||!i.lrt||!(void 0!==i.lrt.bCt&&void 0!==t.lrt.bCt&&!kB(i.lrt.bCt,t.lrt.bCt)&&!r.vLt({GT:'video/mp4; codecs="'+t.lrt.bCt+'"'}))&&!(void 0!==i.lrt.wCt&&void 0!==t.lrt.wCt&&!kB(i.lrt.wCt,t.lrt.wCt)&&!r._Lt({GT:'audio/mp4; codecs="'+t.lrt.wCt+'"'}))),lj=(t,i,s,e,n)=>{if(!1===n.Zct)return t;if(Zd.Zs.gm)return t;const r=Zd.Zs.pm;var h;const o=(null!=(h=null==r?void 0:r.width)?h:n.Ti)*eU;var a;const u=(null!=(a=null==r?void 0:r.height)?a:n.Mi)*eU;for(let i=0;i<t.length;i++){const s=t[i];if(void 0===s.aCt)return t;const e=s.aCt.Mi,n=s.aCt.Ti;if(e<=u&&n<=o)return t.slice(i,t.length)}return[]},fj=(t,i,s,e,n)=>function(t,i){const s=i.Zct;if(void 0===s&&!Zd.Zs.Ks)return t;if(!1===s)return t;for(let s=0;s<t.length;s++){const e=t[s];if(void 0===e.aCt)return t;const n=e.aCt.Mi,r=e.aCt.Ti;if(n===i.Mi&&r===i.Ti)return t.slice(s,t.length);if(n<i.Mi||r<i.Ti)return t.slice(0===s?s:s-1,t.length)}return[]}(t,n);var vj="AbrEvaluator",_j=class{get gLt(){return this.kZ.Aj}mLt(t){this.zct=t}async pLt(t,i,s,e,n){return(await this.wLt(t,i,s,e,n))[0]}async wLt(t,i,s,e,n){if(0===t.length)throw new m("AbrEvaluator - Unable to select optimal variant stream from an empty list.");Fi.oLt(vj,"Performing optimal variant stream selection.");const r=this.gLt;let h=t;for(const t of this.zct){const o=t(h,i,r,s,e,n);h=he(o)?o:await o}if(0===h.length){Fi.aLt(vj,"No possible variant stream remains after ABR rule evaluation. Selecting the lowest bandwidth variant stream.");return[ho(t,t=>t.EG)]}return h}constructor(t){this.kZ=void 0,this.zct=void 0,this.kZ=t,this.zct=[dj,hj,oj,aj,lj,fj,uj,cj]}};function gj(t,i){return[t,void 0!==i?t+i-1:ru]}function mj(t){return Boolean(t.YN)}function pj(t){return Boolean(t.ict)}r(),r(),r(),r(),r();var Xt=function(t){return t[t.Ck=0]="Ck",t[t.Nk=1]="Nk",t[t.OV=2]="OV",t[t.yLt=3]="yLt",t}({}),kr=function(t){return t[t.bLt=0]="bLt",t[t.ALt=1]="ALt",t}({}),It=function(t){return t[t.oZ=0]="oZ",t[t.SLt=1]="SLt",t[t.TLt=2]="TLt",t}({}),Pn=function(t){return t[t.gk=0]="gk",t[t.kLt=1]="kLt",t[t.ELt=2]="ELt",t}({});function dl(t){return t?t.Mbt?t.XE+"@"+t.Mbt.Tn+"-"+(null!=(i=t.Mbt.V)?i:""):""+t.XE:"";var i}function wj(t,i){if(i===t)return!0;if(i.XE!==t.XE)return!1;if(!t.Mbt)return!0;if(i.Mbt){const s=gj(t.Mbt.Tn,t.Mbt.V),e=gj(i.Mbt.Tn,i.Mbt.V);if(s[0]<=e[0])return void 0===s[1]||void 0!==e[1]&&s[1]>=e[1]}return!1}function yj(t,i){return t===i||t.XE===i.XE&&(t.Mbt&&i.Mbt?t.Mbt.Tn===i.Mbt.Tn&&t.Mbt.V===i.Mbt.V:t.Mbt===i.Mbt)}function bj(t){const i=!!t.RLt||void 0;return{o:t.o,xLt:t.xLt,nX:t.nX,ILt:t.ILt,ct:t.ct,PLt:t.PLt,RLt:i,CLt:t.NLt,DLt:t.BLt,MLt:t.MLt,LLt:t.LLt}}function Aj(t,i){var s,e,n;return{wCt:null!=(s=i.wCt)?s:null==t?void 0:t.wCt,bCt:null!=(e=i.bCt)?e:null==t?void 0:t.bCt,OLt:null!=(n=i.OLt)?n:null==t?void 0:t.OLt}}async function Sj(t,i,s,e,n){const r=i.filter(t=>Vh(t,"audio")),h=i.filter(t=>Vh(t,"video")),o=[],a=s.map(t=>async function(t,i,s){if(!t.eyt)return;if(!t.FLt)return;if(t.Fk!==It.TLt)return;const e=Tj(t.FLt);if(!e)return;if(e.Jp===Gs)return{TS:e,MG:[],OG:void 0,XU:t.eyt,FG:[]};if(e.Jp===Gg&&t.FLt===Kg)return{TS:e,MG:[],OG:t.eyt,XU:void 0,FG:[]};{Fi.nD("HLSDrmUtils","Fetching key uri "+t.eyt+".");const n=await i.dk({Yu:t.eyt,Xk:s});let r=await n.WT();return e.Jp===Lg&&(r=function(t){const i=new DataView(t);return i.byteLength>=8&&i.getUint32(4)===lX?t:fX(t)}(r)),{TS:e,MG:[r],OG:void 0,XU:void 0,FG:[]}}}(t,e,n));var u;const c=function(t,i){if(0===i.length)return t;const s=t=>{const s=i.indexOf(t.TS.Jp);return s>=0?s:i.length};return Xs(t,(t,i)=>s(t)-s(i))}((await Promise.all(a)).filter(Y),null!=(u=null==t?void 0:t.preferredKeySystems)?u:[]);for(const i of c){const s=YH(null!=t?t:{},i.TS),e="cbcs";o.push({TS:i.TS,MG:i.MG,OG:i.OG,XU:i.XU,MX:[{initDataTypes:[i.TS.jp],audioCapabilities:KH(r,e,null==s?void 0:s.audioRobustness),videoCapabilities:KH(h,e,null==s?void 0:s.videoRobustness),persistentState:null==s?void 0:s.persistentState,distinctiveIdentifier:null==s?void 0:s.distinctiveIdentifier}],FG:i.FG})}return o}function Tj(t){return t===Vg?xi:t===Og?qg:"com.apple.streamingkeydelivery"===t?Qg:t===Kg?Dc:void 0}function kj(t){if("#"!==t[0])throw new m("HLSPlaylistParser - Could not extract M3U8 tag or comment: "+t);return t.split(":",1)[0]}function Ej(t){return"#"!==t[0]?t:t.split(":",1)[0]}function Rj(t){const i=t.indexOf(":");if(-1===i||t.length<i+1)throw new m("HLSPlaylistParser - Could not extract M3U8 parameter: "+t);return t.substring(i+1)}function xj(t){const i=vu(Rj(t));if(void 0===i)throw new m("HLSPlaylistParser - Could not extract M3U8 float parameter: "+t);return i}function Ij(t){const i={},s=/[:,] ?([A-Z0-9-]+)=([^",]+|"([^"]*)")/gi;let e=s.exec(t);for(;null!==e;){const n=e[1];let r;r=void 0!==e[3]?e[3]:e[2],null!==n?i[n]=r:Fi.aLt(Hi,"Ignoring unparsable M3U8 attribute name: "+t+"."),e=s.exec(t)}return i}function Pj(t,i){const s=Ij(t);let e,n;try{e=s.URI?Zd.Rp(s.URI,i):void 0,n=function(t){switch(t){case"AUDIO":return Xt.Ck;case"VIDEO":return Xt.Nk;case"SUBTITLES":return Xt.OV;case"CLOSED-CAPTIONS":return Xt.yLt}throw new m("HLSPlaylistParser - Could not parse M3U8 media type: "+t+".")}(s.TYPE)}catch(i){throw new m("HLSPlaylistParser - Could not parse #EXT-X-MEDIA tag: "+t+".")}const r=s["GROUP-ID"],h=s.LANGUAGE,o=s["ASSOC-LANGUAGE"],a=s.NAME,u="YES"===s.DEFAULT;let c="YES"===s.AUTOSELECT;const d="YES"===s.FORCED,l=s["INSTREAM-ID"],f=s.CHARACTERISTICS,v=s.CHANNELS;if(r||Fi.aLt(Hi,"#EXT-X-MEDIA tag has no GROUP-ID attribute: "+t+"."),h||Fi.aLt(Hi,"#EXT-X-MEDIA tag has no LANGUAGE attribute: "+t+"."),a||Fi.aLt(Hi,"#EXT-X-MEDIA tag has no NAME attribute: "+t+"."),n===Xt.yLt?(e&&Fi.aLt(Hi,"#EXT-X-MEDIA tag of type CAPTIONS must not have a URI: "+t+"."),l?/^(CC[0-4])|(SERVICE([1-9]|[1-5][0-9]|6[0-3]))$/.test(l)||Fi.aLt(Hi,"#EXT-X-MEDIA's INSTREAM-ID is invalid: "+t+"."):Fi.aLt(Hi,"#EXT-X-MEDIA tag of type CAPTIONS must have an INSTREAM-ID attribute: "+t+".")):l&&Fi.aLt(Hi,"#EXT-X-MEDIA tag must not have an INSTREAM-ID attribute if the TYPE is not CAPTIONS: "+t+"."),u&&!c&&(c=!0,s.AUTOSELECT&&Fi.aLt(Hi,"#EXT-X-MEDIA tag with DEFAULT=YES attribute must have AUTOSELECT=YES attribute: "+t+".")),s.FORCED&&n!==Xt.OV&&Fi.aLt(Hi,"#EXT-X-MEDIA tag must not have a FORCED attribute if the TYPE is not SUBTITLES: "+t+"."),void 0===r||void 0===a)throw new m("HLSPlaylistParser - Could not parse #EXT-X-MEDIA tag: "+t+".");return{VLt:o,rCt:v,BMt:f,CMt:r,IMt:c,xMt:u,PMt:d,NMt:l,bs:h,l:a,Kp:n,eyt:e}}function Cj(t,i,s){const e=Ij(t);let n,r,h;try{n=Zd.Rp(s,i),h=function(t){if(void 0===t)return;const i=t.split("x"),s=Number(i[0]),e=Number(i[1]);if(S(s)||S(e))throw new m("HLSPlaylistParser - Could not parse RESOLUTION attribute: "+t+".");return{Ti:s,Mi:e}}(e.RESOLUTION),r=function(t){if(!t)return;let i,s,e;const n=t.split(",");for(const t of n){const n=t.trim();Qe(n,"mp4a")?i="mp4a.40.05"===n?"mp4a.40.5":"mp4a.40.02"===n?"mp4a.40.2":n:"ac-3"===n||"ec-3"===n||"flac"===n.toLowerCase()?i=n:Qe(n,"avc")||Qe(n,"hvc1")||Qe(n,"hev1")||Qe(n,"dvh")||Qe(n,"vp09")||Qe(n,"av01")?s=n:e=e?e+","+n:n}return{wCt:i,bCt:s,OLt:e}}(e.CODECS)}catch(i){throw new m("HLSPlaylistParser - Could not parse #EXT-X-STREAM-INF tag: "+t+".")}const o=vu(e.BANDWIDTH),a=vu(e["AVERAGE-BANDWIDTH"]),u=vu(e.SCORE),c=vu(e["FRAME-RATE"]),d=e["HDCP-LEVEL"],l=[];if(void 0!==e["ALLOWED-CPC"]){const t=e["ALLOWED-CPC"].split(",");l.push(...t.map(t=>{const i=t.split(":");return{keysystem:i[0],label:i[1]}}))}const f=e["VIDEO-RANGE"],v=e.AUDIO,_=e.VIDEO,g=e.SUBTITLES,p=e["CLOSED-CAPTIONS"];if(void 0===o?Fi.aLt(Hi,"#EXT-X-STREAM-INF tag has no valid BANDWIDTH attribute: "+t+"."):void 0!==a&&a>o&&Fi.aLt(Hi,"#EXT-X-STREAM-INF tag must have BANDWIDTH attribute higher or equal to AVERAGE-BANDWIDTH attribute: "+t+"."),r||Fi.nD(Hi,"#EXT-X-STREAM-INF tag should have a CODECS attribute: "+t+"."),r&&r.bCt&&void 0===h&&Fi.nD(Hi,"#EXT-X-STREAM-INF tag should have a valid RESOLUTION attribute if it contains video codecs: "+t+"."),void 0===d||Ft(["TYPE-0","TYPE-1","NONE"],d)||Fi.aLt(Hi,"#EXT-X-STREAM-INF tag has an invalid HDCP-LEVEL attribute: "+t+"."),void 0===f||Ft(["SDR","PQ","HLG"],f)||Fi.aLt(Hi,"#EXT-X-STREAM-INF tag has an invalid VIDEO-RANGE attribute: "+t+"."),void 0===o)throw new m("HLSPlaylistParser - Could not parse #EXT-X-STREAM-INF tag: "+t+".");return{WLt:l,ULt:v,$wt:a,EG:o,GLt:p,lrt:r,glt:c,XLt:d,aCt:h,tyt:u,ZLt:g,eyt:n,HLt:_,zLt:f}}function Nj(t,i){const s=Ij(t);if(!s.URI)throw new m("HLSPlaylistParser - Could not parse #EXT-X-I-FRAME-STREAM-INF tag: "+t+".");try{return Cj(t,i,s.URI)}catch(i){throw new m("HLSPlaylistParser - Could not parse #EXT-X-I-FRAME-STREAM-INF tag: "+t+".")}}function vu(t){const i=Number(t);return S(i)?void 0:i}function Dj(t,i){const s=Ij(t);let e,n;try{e=function(t){switch(t){case"NONE":return It.oZ;case"AES-128":return It.SLt;case"SAMPLE-AES":return It.TLt;case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return t}throw new m("LLHLSPlaylistParser - Could not parse M3U8 key method: "+t+".")}(s.METHOD),n=s.URI?Uj(s.URI,i):void 0}catch(i){throw new m("HLSPlaylistParser - Could not parse #EXT-X-KEY tag: "+t+".")}const r=s.KEYFORMAT,h=s.IV,o=s.KEYFORMATVERSIONS;let a,u,c,d,l;if(e!==It.oZ){if(c=r||Kg,"SAMPLE-AES-CENC"===e||"SAMPLE-AES-CTR"===e){if(Tj(c)!==xi)throw new m("HLSPlaylistParser - #EXT-X-KEY tag with METHOD="+e+" is only compatible with Widevine.");a=It.TLt}else a=e;u=n,d=h?up(h):void 0,l=o?o.split("/").map(t=>Number(t)):[1]}else a=It.oZ,(n||r||o||h)&&Fi.aLt(Hi,"#EXT-X-KEY tag with METHOD=NONE must not have additional attributes: "+t+".");return{Fk:a,eyt:u,YLt:d,FLt:c,KLt:l}}function Bj(t){const i=Rj(t);if(!i)return[void 0,""];const[s,e]=i.split(",");return[vu(s),e]}function Mj(t,i){const s=t.split("@"),e=vu(s[0]),n=s.length>1?vu(s[1]):i;if(void 0===e||void 0===n)throw new m("HLSPlaylistParser - Could not parse #EXT-X-BYTERANGE tag: "+t+".");return{Tn:n,V:e}}function Lj(t){if(void 0!==t)return Mj(t,void 0)}function Oj(t,i){return Mj(Rj(t),i)}function Fj(t,i){const s=Ij(t);try{const t=Uj(s.URI,i);return{XE:t,Mbt:Lj(s.BYTERANGE)}}catch(i){throw new m("HLSPlaylistParser - Could not parse #EXT-X-MAP tag: "+t+".")}}function Vj(t){const i=Rj(t);if(!i)throw new m("HLSPlaylistParser - Could not parse #EXT-X-PROGRAM-DATE-TIME tag: "+t+".");const s=new Date(i.trim());if(!Kf(s))throw new m("HLSPlaylistParser - Could not parse #EXT-X-PROGRAM-DATE-TIME tag: "+t+".");return s}function Wj(t){const i=Ij(t),s=i["START-DATE"],e=i["END-DATE"],n=vu(i["PLANNED-DURATION"]);let r,h,o,a=vu(i.DURATION);void 0!==i["SCTE35-CMD"]&&(r=up(i["SCTE35-CMD"]).buffer),i["SCTE35-IN"]&&(h=up(i["SCTE35-IN"]).buffer),i["SCTE35-OUT"]&&(o=up(i["SCTE35-OUT"]).buffer);const u="YES"===i["END-ON-NEXT"],c=function(t){const i={};for(const s of w.keys(t)){const e=t[s];void 0!==e&&Qe(s,"X-")&&(i[s]=e)}return i}(i),d=i.ID,l=i.CLASS;let f,v;if(void 0===s)Fi.aLt(Hi,"Could not parse #EXT-X-DATERANGE tag without START-DATE attribute: "+s+".");else if(f=new Date(s),v=void 0!==e?new Date(e):void 0,Kf(f)||Fi.aLt(Hi,"Could not parse EXT-X-DATERANGE tag with invalid START-DATE attribute: "+f+"."),void 0!==a){const i=new Date(f.getTime()+1e3*a);v?v.getTime()!==i.getTime()&&(Fi.aLt(Hi,"DURATION and END-DATE attributes of #EXT-X-DATERANGE tag are not aligned, updating the END-DATE: "+t+"."),v=i):v=i}else v&&(a=(f.getTime()-v.getTime())/1e3);if(u&&(i.CLASS||Fi.aLt(Hi,"Could not parse #EXT-X-DATERANGE tag with END-ON-NEXT attribute without CLASS attribute: "+t+"."),i.DURATION&&Fi.aLt(Hi,"Could not parse #EXT-X-DATERANGE tag with END-ON-NEXT attribute with DURATION attribute: "+t+"."),v&&Fi.aLt(Hi,"Could not parse #EXT-X-DATERANGE tag with END-ON-NEXT attribute with END-DATE attribute: "+t+".")),void 0===d&&Fi.aLt(Hi,"Could not parse #EXT-X-DATERANGE tag without valid ID attribute: "+t+"."),void 0===d||void 0===f)throw new m("HLSPlaylistParser - Could not parse #EXT-X-DATERANGE tag: "+t+".");return{o:d,xLt:l,nX:f,ILt:v,ct:a,PLt:n,BLt:r,LLt:h,MLt:o,RLt:u,NLt:c}}function Uj(t,i){if(void 0===t)throw new m("HLSPlaylistParser - Unable to parse URL from string: "+t+".");return Zd.Rp(t,i)}function Gj(t,i){const s=Ij(t),e=vu(s.DURATION),n=Uj(s.URI,i),r=Lj(s.BYTERANGE),h="YES"===s.INDEPENDENT,o="YES"===s.GAP;if(void 0===e)throw new m("HLSPlaylistParser - Unable to parse #EXT-X-PART without valid DURATION: "+t);return{ct:e,eyt:{XE:n,Mbt:r},qLt:h,jLt:o}}function Xj(t){const i=Ij(t);return{QLt:"YES"===i["CAN-BLOCK-RELOAD"],JLt:vu(i["CAN-SKIP-UNTIL"]),$Lt:"YES"===i["CAN-SKIP-DATERANGES"],tOt:vu(i["HOLD-BACK"]),iOt:vu(i["PART-HOLD-BACK"])}}function Zj(t,i){const s=Ij(t);if(void 0===s.URI)throw new m("HLSPlaylistParser - Could not parse #EXT-X-RENDITION-REPORT: "+t+".");const e=Uj(s.URI,i),n=vu(s["LAST-MSN"]),r=vu(s["LAST-PART"]);if(void 0===n)throw new m("HLSPlaylistParser - Could not parse #EXT-X-RENDITION-REPORT: "+t+".");return{eyt:e,sOt:n,eOt:r}}function Hj(t,i){var s;const e=Ij(t),n=vu(e["SKIPPED-SEGMENTS"]),r=null==(s=e["RECENTLY-REMOVED-DATERANGES"])?void 0:s.split("\t");if(void 0===n)throw new m("HLSPlaylistParser - Could not parse #EXT-X-SKIP tag without valid SKIPPED-SEGMENTS attribute: "+t+".");return{nOt:n,rOt:r,hOt:i}}function zj(t){const i=vu(Ij(t)["PART-TARGET"]);if(void 0===i)throw new m("HLSPlaylistParser - Could not parse #EXT-X-PART-TARGET-DURATION tag: "+t+".");return i}function Yj(t){switch(Rj(t)){case"VOD":return Pn.kLt;case"EVENT":return Pn.ELt;default:return Fi.aLt(Hi,"Found #EXT-X-PLAYLIST-TYPE tag with invalid value: "+t+"."),Pn.gk}}function Kj(t,i){const s=Ij(t);let e,n;try{e=function(t){if(void 0===t)throw new m("HLSPlaylistParser - Could not parse PRELOAD-HINT type: "+t+".");if("MAP"===t)return kr.bLt;if("PART"===t)return kr.ALt;throw new m("HLSPlaylistParser - Could not parse PRELOAD-HINT type: "+t+".")}(s.TYPE),n=Uj(s.URI,i)}catch(i){throw new m("HLSPlaylistParser - Could not parse #EXT-X-PRELOAD-HINT tag: "+t+".")}const r=vu(s["BYTERANGE-START"]),h=vu(s["BYTERANGE-LENGTH"]);let o;return void 0===r&&void 0===h||(o={Tn:r||0,V:h}),{Kp:e,eyt:{XE:n,Mbt:o}}}r(),r(),r();var qj=class t{oOt(){const t=this.aOt[this.uOt];return this.uOt+=1,t}cOt(){return this.aOt[this.uOt]}My(){const i=new t("");return i.uOt=0,i.aOt=this.aOt.slice(this.uOt),i}static dOt(t){if(!t)return[];return t.split(/[\r\n]+/).map(t=>t.trim()).filter(t=>t)}constructor(i){this.uOt=0,this.aOt=void 0,this.aOt=t.dOt(i)}};function jj(t,i,s){const e=t.eyt;let n=t.yN,r=t.lOt,h=t.Tn;switch(s){case"#EXT-X-VERSION":n=function(t){const i=xj(t);return S(i)?(Fi.aLt(Hi,"Playlist version is NaN: "+t+"."),1):i}(i);break;case"#EXT-X-INDEPENDENT-SEGMENTS":r=!0;break;case"#EXT-X-START":h=function(t){const i=Ij(t),s=vu(i["TIME-OFFSET"]);if(void 0===s)throw new m("HLSPlaylistParser - #EXT-X-START is missing a TIME-OFFSET: "+t+".");return{fOt:s,vOt:"YES"===i.PRECISE}}(i);break;case"#EXT-X-DEFINE":Fi.aLt(Hi,"Ignoring unsupported #EXT-X-DEFINE: "+i+".");break;default:Fi.nD(Hi,"Ignoring unrecognized line or comment: "+i+".")}return{eyt:e,yN:n,lOt:r,Tn:h}}function Qj(t,i){return t.map(t=>t.Fk===It.oZ||t.YLt?t:Jr({},t,{YLt:Jj(i)}))}function Jj(t){const i=new DataView(new ArrayBuffer(16)),s=new J;return s.Dy(8),Km(i,s,mh.fromNumber(t)),new j(i.buffer)}function $j(t,i,s){Fi.nD(Hi,"Parsing M3U8 playlist at "+t+".");const e=new qj(s);if("#EXTM3U"!==e.oOt())throw new m("HLSPlaylistParser - Could not parse M3U8 playlist. Playlist does not start with #EXTM3U.");return function(t){return/^#EXT-X-(MEDIA|STREAM-INF|I-FRAME-STREAM-INF|SESSION-DATA|SESSION-KEY):/m.test(t)}(s)?function(t,i){let s;try{s=Zd.Rp(t)}catch(i){throw Fi.aLt(Hi,"The master playlist has no valid base URI: "+t+"."),new m("HLSPlaylistParser - Could not parse HLS master playlist: "+t)}let e={eyt:s,lOt:void 0,Tn:void 0,yN:void 0};const n=[],r=[],h=[],o=[];for(;;){const t=i.oOt();if(!t)break;try{const a=kj(t);switch(a){case"#EXT-X-MEDIA":{const i=Pj(t,s);n.push(i);break}case"#EXT-X-STREAM-INF":{const e=Cj(t,s,i.oOt());r.push(e);break}case"#EXT-X-I-FRAME-STREAM-INF":{const i=Nj(t,s);h.push(i);break}case"#EXT-X-SESSION-DATA":Fi.aLt(Hi,"Ignoring unsupported #EXT-X-SESSION-DATA: "+t+".");break;case"#EXT-X-SESSION-KEY":{const i=Dj(t,s);o.push(i);break}default:e=jj(e,t,a)}}catch(i){Fi.aLt(Hi,"Ignoring unparsable line: "+t,i)}}let a=e.yN;var u;const c=null!=(u=e.lOt)&&u,d=e.Tn;return void 0===a&&(Fi.aLt(Hi,"The playlist has no #EXT-X-VERSION, assuming version is 2."),a=2),a>=8&&(r.some(t=>void 0!==t.tyt)||h.some(t=>void 0!==t.tyt))&&(r.some(t=>void 0===t.tyt)||h.some(t=>void 0===t.tyt))&&Fi.aLt(Hi,"If one master playlist variant stream has a SCORE, all variants should have it."),{eyt:s,yN:a,lOt:c,Tn:d,_Ot:h,FG:o,YN:n,gOt:r}}(t,e):function(t,i,s){let e={eyt:t,lOt:void 0,Tn:void 0,yN:void 0};const n=[];let r,h,o,a,u=!1,c=!1;const d=[],l=Se();let f,v,_,g,p,w,y,b,A,S=[],T=[],k=!1,E=!1;const R=[],x=[];let I,P,C,N,D,B=0,M=!1,L=Pn.gk,O=!1,F=0;try{D=Zd.Rp(t)}catch(i){throw Fi.aLt(Hi,"The media playlist has no valid base URI: "+t+".",i),new m("HLSPlaylistParser - Could not parse HLS media playlist.")}const V=s.My();for(;void 0===P||void 0===C;){const t=V.oOt();if(!t)break;try{switch(Ej(t)){case"#EXT-X-MEDIA-SEQUENCE":P=xj(t);break;case"#EXT-X-DISCONTINUITY-SEQUENCE":C=xj(t)}}catch(i){Fi.aLt(Hi,"Ignoring unparsable line: "+t,i)}}void 0===P&&(Fi.nD(Hi,"#EXT-X-MEDIA-SEQUENCE tag is missing, assuming first segment media sequence number is 0."),P=0),void 0===C&&(Fi.nD(Hi,"#EXT-X-DISCONTINUITY-SEQUENCE tag is missing, assuming first segment discontinuity sequence number is 0."),C=0);let W=P,U=C;for(;;){const t=s.oOt();if(!t)break;let i=!1;try{const s=Ej(t);switch(s){case"#EXTINF":i=!0,[f,v]=Bj(t);break;case"#EXT-X-BYTERANGE":i=!0,_=Oj(t,B),_&&(B=_.Tn+_.V);break;case"#EXT-X-DISCONTINUITY":i=!0,k=!0,U++;break;case"#EXT-X-KEY":{var G;i=!0;const s=Dj(t,D);if(s.Fk===It.oZ){l.clear(),A=void 0;break}var X;const e=null!=(X=null==(G=s.FLt)?void 0:G.toString())?X:"identity";l.set(e,s),s.Fk===It.SLt&&(A=s);break}case"#EXT-X-MAP":i=!0,p=Fj(t,D),w=A;break;case"#EXT-X-PROGRAM-DATE-TIME":i=!0,y=Vj(t);break;case"#EXT-X-GAP":i=!0,E=!0;break;case"#EXT-X-BITRATE":i=!0,b=xj(t);break;case"#EXT-X-TARGETDURATION":r=xj(t);break;case"#EXT-X-DATERANGE":{const i=Wj(t);n.push(i);break}case"#EXT-X-PART":{i=!0;const s=Gj(t,D);T.push(s);break}case"#EXT-X-PRELOAD-HINT":{const i=Kj(t,D);R.push(i);break}case"#EXT-X-SKIP":{d.length>0&&Fi.aLt(Hi,"#EXT-X-SKIP must appear before any #EXTINF tags."),i=!0;const s=Hj(t,W);F=s.nOt,N=s.rOt,W+=s.nOt;break}case"#EXT-X-SERVER-CONTROL":{const i=Xj(t);u=i.QLt,h=i.JLt,c=i.$Lt,o=i.tOt,a=i.iOt;break}case"#EXT-X-RENDITION-REPORT":{const i=Zj(t,D);x.push(i);break}case"#EXT-X-PART-INF":I=zj(t);break;case"#EXT-X-MEDIA-SEQUENCE":i&&Fi.aLt(Hi,"#EXT-X-MEDIA-SEQUENCE must appear before any media segment tags.");break;case"#EXT-X-DISCONTINUITY-SEQUENCE":i&&Fi.aLt(Hi,"#EXT-X-DISCONTINUITY-SEQUENCE must appear before any media segment tags.");break;case"#EXT-X-ENDLIST":M=!0;break;case"#EXT-X-PLAYLIST-TYPE":L=Yj(t);break;case"#EXT-X-I-FRAMES-ONLY":O=!0;break;default:if(Qe(s,"#"))e=jj(e,t,s);else{g=Zd.Rp(t,D);const i=p?{eyt:p,mOt:w}:void 0,s={FG:Qj(Eg(l),W),NV:S,pOt:T,ct:f,dX:v,wOt:k,eyt:{Mbt:_,XE:g},yOt:i,bOt:y,jLt:E,AOt:b,hOt:W,SOt:U};d.push(s),W++,S=[],T=[],f=void 0,v=void 0,k=!1,_=void 0,g=void 0,y=void 0,E=!1,b=void 0}}}catch(i){Fi.aLt(Hi,"Ignoring unparsable line: "+t,i)}}if(T.length){const t=p?{eyt:p,mOt:A}:void 0,i={FG:Qj(Eg(l),W),NV:S,pOt:T,ct:f,dX:v,wOt:k,eyt:void 0,yOt:t,bOt:y,jLt:E,AOt:b,hOt:W,SOt:U};d.push(i)}let Z=e.yN;var H;const z=null!=(H=e.lOt)&&H,Y=e.Tn;void 0===Z&&(Fi.aLt(Hi,"The media playlist has no #EXT-X-VERSION tag, assuming version is 2."),Z=2),void 0===r&&Fi.aLt(Hi,"Could not parse the HLS media playlist: no #EXT-X-TARGET-DURATION tag was found.");const K=d.length,q=K>0;q||Fi.aLt(Hi,"The HLS media playlist contains no segments.");const j=q&&d[K-1].pOt.length>0;return j&&void 0===I&&Fi.aLt(Hi,"Could not parse the HLS media playlist: no #EXT-X-PART-TARGET-DURATION tag was found, but it is required when some or all segments contain parts."),j&&void 0===a&&Fi.aLt(Hi,"Could not parse the HLS media playlist: The #EXT-X-SERVER-CONTROL tag has no PART-HOLDBACK attribute, but it is required when some or all segments contain parts."),{QLt:u,JLt:h,$Lt:c,TOt:n,SOt:C,kOt:M,lOt:z,tOt:o,EOt:O,hOt:P,nOt:F,iOt:a,dLt:I,ROt:L,xOt:R,rOt:N,IOt:x,POt:r,ict:d,Tn:Y,eyt:D,COt:i,yN:Z}}(t,i,e)}r(),r();var tQ=class{get eyt(){return this.RMt.eyt}get lrt(){return this.QPt}set lrt(t){this.QPt=t?sQ(t):void 0,this.NOt=function(t,i){return!(void 0!==(null==t?void 0:t.wCt)&&void 0===(null==i?void 0:i.wCt)||void 0!==(null==t?void 0:t.bCt)&&void 0===(null==i?void 0:i.bCt))}(this.DOt,this.QPt)}get BOt(){return this.NOt}get cLt(){return this.MOt}get LOt(){return this.MOt.filter(t=>t.Kp===Xt.Ck)}get OOt(){return this.MOt.filter(t=>t.Kp===Xt.Nk)}get FOt(){return this.MOt.filter(t=>t.Kp===Xt.OV)}get VOt(){return this.MOt.filter(t=>t.Kp===Xt.yLt)}WOt(t){for(const i of this.MOt){const s=i.RMt.WOt(t);if(void 0!==s)return s}}UOt(t){for(const i of this.MOt){const s=i.RMt.UOt(t);if(void 0!==s)return s}}GOt(t){is(this.MOt,t)}constructor(t,i,s){var e,n,r,h;this.o=iQ++,this.RMt=void 0,this.EG=void 0,this.tyt=void 0,this.aCt=void 0,this.glt=void 0,this.ULt=void 0,this.HLt=void 0,this.ZLt=void 0,this.GLt=void 0,this.$wt=void 0,this.DOt=void 0,this.QPt=void 0,this.NOt=!1,this.MOt=[],this.RMt=i,this.EG=t.EG,this.$wt=t.$wt,this.tyt=t.tyt,this.DOt=t.lrt?sQ(t.lrt):void 0,this.QPt=this.DOt,this.aCt=t.aCt,this.glt=t.glt,this.ULt=null!=(e=t.ULt)?e:"XOt"+this.o,this.HLt=null!=(n=t.HLt)?n:"ZOt"+this.o,this.ZLt=null!=(r=t.ZLt)?r:"HOt"+this.o,this.GLt=null!=(h=t.GLt)?h:"zOt"+this.o,this.MOt=s}},iQ=0;function sQ(t){return Jr({},t,{bCt:t.bCt?Jy(t.bCt):void 0})}r(),r(),r();var eQ=class{get kO(){var t;return this.LO+(null!=(t=this.YOt)?t:0)}get KOt(){return this.qOt}get jOt(){return this.QOt}get FG(){return this.JOt.FG}$Ot(t,i,s){this.LO=t,this.qOt=i,this.QOt=s}constructor(t,i,s,e,n,r){this.JOt=void 0,this.tFt=void 0,this.ct=void 0,this.eyt=void 0,this.qLt=void 0,this.jLt=void 0,this.qOt=void 0,this.QOt=void 0,this.LO=void 0,this.kst=void 0,this.YOt=void 0,this.JOt=t,this.tFt=i,this.LO=s,this.qOt=e,this.QOt=n,this.ct=r.ct,this.eyt=r.eyt,this.qLt=r.qLt,this.jLt=r.jLt}},nQ=class{get kO(){var t;return this.LO+(null!=(t=this.iFt)?t:0)}get sFt(){return this.LO}get ct(){return this.qb}get eyt(){return this.eFt}get KOt(){return this.qOt}get jOt(){return this.QOt}get pOt(){return this.nFt}get rFt(){return this.hFt}get EO(){var t;return this.kO+(null!=(t=this.qb)?t:this.hFt)}set YOt(t){this.iFt=t;for(const i of this.nFt)i.YOt=t}get YOt(){return this.iFt}oFt(t){return this.nFt[t]}aFt(t){for(let i=0;i<this.nFt.length;i++){const s=this.nFt[i],e=s.kO,n=e+s.ct;if(e<=t&&t<=n)return t===n&&i+1<this.nFt.length?this.nFt[i+1]:s}}uFt(t){for(let i=this.nFt.length-1;i>=0;i--){const s=this.nFt[i];if(s.kO<=t)return s}}cFt(t){let i=this.uFt(t);for(;i&&!i.qLt&&i.tFt>0;)i=this.oFt(i.tFt-1);return i}$Ot(t,i,s){const e=t.pOt.length!==this.nFt.length||s!==this.QOt;this.qOt=i,this.QOt=s,this.qb=t.ct,null!=this.bOt||(this.bOt=t.bOt),void 0===this.eFt&&(this.eFt=t.eyt),e&&this.dFt(t.pOt)}dFt(t){this.nFt.length>t.length&&(this.nFt.length=t.length);let i=0;for(let s=0;s<t.length;s++){const e=t[s],n=this.qOt&&0===s,r=this.QOt&&s===t.length-1,h=this.LO+i;if(s<this.nFt.length)this.nFt[s].$Ot(h,n,r);else{const t=new eQ(this,s,h,n,r,e);t.YOt=this.iFt,this.nFt.push(t)}i+=e.ct}this.hFt=i}lFt(){Lr(this.nFt),this.hFt=0}constructor(t,i,s,e,n){this.qb=void 0,this.bOt=void 0,this.eFt=void 0,this.yOt=void 0,this.jLt=void 0,this.qOt=void 0,this.QOt=void 0,this.hOt=void 0,this.wOt=void 0,this.SOt=void 0,this.FG=void 0,this.LO=void 0,this.kst=void 0,this.nFt=[],this.hFt=0,this.iFt=void 0,this.LO=t,this.yOt=n.yOt,this.qOt=s,this.QOt=e,this.qb=n.ct,this.bOt=n.bOt,this.eFt=n.eyt,this.jLt=n.jLt,this.hOt=n.hOt,this.wOt=n.wOt,this.SOt=i,this.FG=n.FG,this.dFt(n.pOt)}};r();var rQ=function(t){return t.fFt="YES",t.vFt="v2",t}({});r();var hQ=class extends rl{};r(),r(),r();var oQ=class extends Pc{get Ca(){return this.hu||(this.hu=function(t){return Qr(oE(t),{get content(){return t.U},get class(){return t.xLt},get startDate(){return t.nX},get endDate(){return t.ILt},get duration(){return t.ct},get plannedDuration(){return t.PLt},get endOnNext(){return t.RLt},get scte35Cmd(){return t.DLt},get scte35Out(){return t.MLt},get scte35In(){return t.LLt},get customAttributes(){return t.CLt}})}(this)),this.hu}get xLt(){return this._Ft}get nX(){return this.gFt}get ILt(){return this.mFt}get ct(){return this.qb}get PLt(){return this.pFt}get RLt(){return this.wFt}get DLt(){return this.yFt}get MLt(){return this.bFt}get LLt(){return this.AFt}get CLt(){return this.SFt}er(t){let i=!1;var s;(void 0===this._Ft&&void 0!==t.xLt&&(i=!0,this._Ft=t.xLt),void 0===this.mFt&&void 0!==t.ILt&&(i=!0,this.mFt=t.ILt),void 0===this.qb&&void 0!==t.ct&&(i=!0,this.qb=t.ct),void 0===this.pFt&&void 0!==t.PLt&&(i=!0,this.pFt=t.PLt),!this.wFt&&t.RLt&&(i=!0,this.wFt=t.RLt),i=this.updateCustomAttributes(t,i),void 0===this.yFt&&void 0!==t.DLt&&(i=!0,this.yFt=t.DLt),void 0===this.bFt&&void 0!==t.MLt&&(i=!0,this.bFt=t.MLt),void 0===this.AFt&&void 0!==t.LLt&&(i=!0,this.AFt=t.LLt),this.TFt(),this.kFt(),this.EFt(),i)&&(this.So(new Ys(this)),null==(s=this.OO)||s.So(new dE(this)))}updateCustomAttributes(t,i){let s=i;if(t.CLt)for(const i of w.keys(t.CLt))void 0===this.SFt[i]&&(s=!0,this.SFt[i]=t.CLt[i]);return s}TFt(){this.qb&&!this.mFt&&(this.mFt=new Date(this.gFt.getTime()+dn(this.qb)))}kFt(){this.mFt&&!this.qb&&(this.qb=jf(this.mFt.getTime()-this.gFt.getTime()))}EFt(){this.VO===1/0&&(this.mFt||this.qb)&&(this.VO=aQ(this.LO,this.qb,this.gFt,this.mFt))}constructor(t,i){super(i,aQ(i,t.ct,t.nX,t.ILt),void 0,!1,t.o),this._Ft=void 0,this.gFt=void 0,this.mFt=void 0,this.qb=void 0,this.pFt=void 0,this.wFt=void 0,this.SFt=void 0,this.yFt=void 0,this.bFt=void 0,this.AFt=void 0,this._Ft=t.xLt,this.gFt=t.nX,this.mFt=t.ILt,this.qb=t.ct,this.pFt=t.PLt,this.wFt=Boolean(t.RLt),this.SFt=t.CLt||{},this.yFt=t.DLt,this.bFt=t.MLt,this.AFt=t.LLt,this.TFt(),this.kFt()}};function aQ(t,i,s,e){return Y(i)?t+i:e?t+(jf(e.getTime())-jf(s.getTime())):1/0}var uQ=class extends wL{er(t,i){cQ(this,dQ(t),i)}iW(t){lQ(this.L.CI,t),super.iW(t)}constructor(){super(void 0,void 0,hr.DATE_RANGE)}};function cQ(t,i,s){const e=t.L.CI;for(let s=e.length-1;s>=0;s--){const n=e[s],r=me(i,t=>t.o===n.o);r?n.er(r):t.XV(n)}for(const e of i){const i=e.nX;if(void 0!==i&&!t._4(e.o)){const n=s(i),r=new oQ(e,n);lQ(t.L.CI,r),t.iW(r)}}}function dQ(t){const i=Se(),s=[];for(const e of t)if(i.has(e.o)){const t=i.get(e.o),s=Jr({},t,gS(e),{CLt:Jr({},t.CLt,e.CLt)});i.set(e.o,s)}else i.set(e.o,e),s.push(e.o);return s.map(t=>i.get(t))}function lQ(t,i){const s=gr(t,t=>t.xLt===i.xLt);s&&s.RLt&&s.er({o:s.o,ILt:i.nX})}var fQ=String.fromCharCode(95),vQ=fQ+"HLS_msn",_Q=fQ+"HLS_part",gQ=fQ+"HLS_skip",mQ="HLSMediaPlaylist",pQ=class{get kOt(){if(0===this.lbt.length)return!1;return this.lbt[this.lbt.length-1].jOt}get ct(){return this.qb}get kx(){return this.C5}get RFt(){return this.xFt}get lLt(){return this.IFt}get dLt(){return this.PFt}get tOt(){return this.kOt?0:this.CFt?this.CFt:this.IFt?3*this.IFt:void 0}get iOt(){var t;return null!=(t=this.NFt)?t:this.PFt?3*this.PFt:void 0}get QLt(){return this.DFt}get JLt(){return this.BFt}get $Lt(){return this.MFt}get ROt(){return this.LFt}get OFt(){return void 0!==this.dLt}get FFt(){if(this.kOt)return!0;const t=Zd.Mg()/1e3,i=this.VFt,s=this.WFt;return void 0!==i&&t-i<s}get VFt(){return this.UFt}get GFt(){if(this.XFt)return Zd.Mg()/1e3-this.XFt}get YOt(){return this.iFt}get WFt(){var t;return null!=(t=this.IFt)?t:void 0===this.UFt?5:1}get ict(){return this.lbt}get TOt(){return this.ZFt}get HFt(){return this.zFt}set HFt(t){this.zFt=t}get Tn(){return this.MV}get YFt(){return this.KFt}nLt(t){if(!t)return this.eyt;const i=Zd.Dh(this.eyt);return void 0!==t.hOt&&i.searchParams.append(vQ,String(t.hOt)),void 0!==t.qFt&&i.searchParams.append(_Q,String(t.qFt)),void 0!==t.nN&&i.searchParams.append(gQ,t.nN),i.href}mat(t){const i=this.jFt(t);return i<0?void 0:this.lbt[i]}jFt(t){const i=this.lbt;if(0===i.length)return-1;const s=t-i[0].hOt;return s<0||s>=i.length?-1:s}QFt(t){if(0===this.lbt.length)return;const i=sZ(wQ.Bg,this.lbt,t);if(!(i<0)){const s=this.lbt[i];return t===s.EO&&i+1<this.lbt.length?this.lbt[i+1]:s}{const i=this.lbt[this.lbt.length-1];if(t===i.EO)return i}}JFt(t){if(0===this.lbt.length)return;const i=this.lbt[0];if(t<i.EO)return i;const s=this.lbt[this.lbt.length-1];return t>=s.kO?s:this.QFt(t)}WOt(t){const i=this.JFt(t);if(void 0===i)return;for(let s=i.hOt-this.lbt[0].hOt;s>=0;s--){const i=this.lbt[s];if(void 0!==i.bOt)return new Date(i.bOt.getTime()+1e3*(t-i.kO))}}UOt(t){let i;for(const s of this.lbt)if(yQ(s))if(void 0===i)i=s;else{if(!(s.bOt.getTime()<=t.getTime()))break;i=s}if(void 0!==i)return i.kO+(t.getTime()-i.bOt.getTime())/1e3}$Ft(t){switch(t){case kr.bLt:return this.tVt;case kr.ALt:return this.iVt;default:return}}$Ot(t){var i;void 0===this.IFt&&(this.IFt=null!=(i=t.POt)?i:this.sVt(t));void 0===this.CFt&&void 0!==t.tOt&&(this.CFt=t.tOt),void 0===this.PFt&&void 0!==t.dLt&&(this.PFt=t.dLt),void 0===this.NFt&&void 0!==t.iOt&&(this.NFt=t.iOt),this.DFt=t.QLt,this.BFt=t.JLt,this.MFt=t.$Lt,this.LFt=t.ROt,this.gbt(t),this.eVt(t);const s=me(t.xOt,t=>t.Kp===kr.bLt),e=me(t.xOt,t=>t.Kp===kr.ALt);this.tVt=s?{eyt:s.eyt,Kp:s.Kp,SOt:t.SOt}:void 0,this.iVt=e?{eyt:e.eyt,Kp:e.Kp,SOt:t.SOt}:void 0,this.UFt=Zd.Mg()/1e3;const n=this.C5.An(this.C5.V-1);this.nVt();const r=this.C5.An(this.C5.V-1);(!this.XFt||r-n>0)&&(this.XFt=this.UFt),null!=this.MV||(this.MV=t.Tn)}nVt(){this.xFt=this.rVt(),this.C5=this.hVt(this.xFt),this.qb=this.oVt()}rVt(){const t=this.ict;if(0===t.length)return ZT.tL();const i=t[0].kO,s=t[t.length-1].EO;return new ZT([i,s])}hVt(t){if(0===t.V||this.kOt)return t;const i=t.Tn(0),s=t.An(0)-this.uSt;return s<i?ZT.JM(i):new ZT([i,s])}get uSt(){return this.kOt?0:null!=(s=null!=(i=null!=(t=this.aVt)?t:this.iOt)?i:this.tOt)?s:0;var t,i,s}oVt(){return 0===this.lbt.length?0:this.kOt?Jl(this.lbt,t=>{var i;return null!=(i=t.ct)?i:t.rFt}):1/0}sVt(t){let i;for(const s of t.ict)if(void 0!==s.ct){const t=_.max(1,_.round(s.ct));(void 0===i||i<t)&&(i=t)}if(void 0===i)throw new m("HLSModel - Could not determine required segment target duration.");return i}gbt(t){if(0===t.ict.length)return Lr(this.lbt),void this.uVt();const i=this.cVt(t);if(!i)return;let s,e,n;i.dVt>0&&this.lbt.splice(0,i.dVt);const r=t.nOt;if(r>0){if(r>this.lbt.length)throw new hQ("New playlist skips over missing segments.");const i=this.lbt[r-1];if(void 0===i.ct)throw new hQ("New playlist skips over an incomplete segment.");s=i.sFt+i.ct,n=i.SOt-t.SOt,e=r;for(let t=0;t<r;t++)this.lbt[t].lFt()}else s=i.lVt,n=0,e=0;for(let i=0;i<t.ict.length;i++,e++){const r=t.ict[i],h=0===i,o=t.kOt&&i===t.ict.length-1,a=r.ct,u=r.SOt+n;if(e<this.lbt.length){const t=this.lbt[e];0,t.$Ot(r,h,o)}else{let t=r;if(this.lbt.length>0&&void 0===t.yOt){t=Jr({},t,{yOt:this.lbt[this.lbt.length-1].yOt})}const i=new nQ(s,u,h,o,t);i.YOt=this.iFt,this.lbt.push(i)}void 0!==a&&(s+=a)}}cVt(t){if(0===this.lbt.length)return{dVt:0,lVt:0};const i=this.lbt[0].hOt,s=this.lbt[this.lbt.length-1].hOt,e=t.ict[0].hOt-t.nOt,n=t.ict[t.ict.length-1].hOt;let r=0,h=0;if(e<i){const s=this.ict[0].bOt,n=t.ict[0].bOt;if(!(s&&n&&s<n))return void Fi.aLt(mQ,"Ignoring older playlist (first media sequence number is "+e+", but previous playlist already started at "+i+")");r=this.lbt.length,this.uVt()}else{if(n<s)return void Fi.aLt(mQ,"Ignoring older playlist (last media sequence number is "+n+", but previous playlist already ended at "+s+")");if(s<e){var o;h=null!=(o=function(t,i){const s=gr(t,t=>void 0!==t.bOt);if(void 0===s)return;const e=function(t){let i=0;for(const e of t){if(e.wOt)return;if(e.bOt)return[e,i];var s;i+=null!=(s=e.ct)?s:0}return}(i.ict);if(void 0===e)return;const[n,r]=e;if(s.SOt!==n.SOt)return;const h=(n.bOt.getTime()-s.bOt.getTime())/1e3;return s.sFt+h-r}(this.lbt,t))?o:function(t,i,s){const e=t[t.length-1];var n;const r=null!=(n=e.ct)?n:_.max(s,e.rFt),h=s*(i-e.hOt-1);return e.sFt+r+h}(this.lbt,e,this.IFt),Fi.oLt(mQ,"New playlist (starting at "+e+") is entirely after previous playlist (ending at "+s+"), resetting playlist and restarting at "+h+"s"),r=this.lbt.length,this.uVt()}else{0;const t=li(this.lbt,t=>t.hOt===e);0,h=this.lbt[t].sFt,t>0&&(r=t)}}return{dVt:r,lVt:h}}eVt(t){let i=t.TOt.map(bj);if(t.$Lt&&t.COt.nN===rQ.vFt&&(i=this.ZFt.concat(i)),this.ZFt=dQ(i),t.rOt)for(const i of t.rOt){const t=li(this.ZFt,t=>t.o===i);t>=0&&Lh(this.ZFt,t)}}fVt(t,i){if(this.iFt!==t){this.iFt=t;for(const t of this.lbt)t.YOt=this.iFt;this.nVt()}this.KFt=i}uVt(){this.iFt=void 0,this.KFt=void 0}constructor(t,i,s){this.eyt=void 0,this.UFt=void 0,this.XFt=void 0,this.tVt=void 0,this.iVt=void 0,this.IFt=void 0,this.PFt=void 0,this.CFt=void 0,this.NFt=void 0,this.lbt=[],this.ZFt=[],this.iFt=void 0,this.DFt=!1,this.BFt=void 0,this.MFt=!1,this.LFt=Pn.gk,this.C5=ZT.tL(),this.xFt=ZT.tL(),this.qb=void 0,this.zFt=-1/0,this.MV=void 0,this.aVt=void 0,this.KFt=void 0,this.eyt=t,this.MV=i,this.aVt=s}},wQ=class t{static get Bg(){return null!=this.dbt||(this.dbt=new t),this.dbt}obt(t){return t.kO}abt(t){return t.EO}ubt(t,i){return Mu(t,i)}cbt(t,i,s){return(t-i)/(s-i)}};function yQ(t){return void 0!==t.bOt}function Tr(t){return void 0!==t.pOt}function bQ(t){return Tr(t)?t.KOt:0===t.tFt&&t.JOt.KOt}function AQ(t,i){return Tr(t)?Tr(i)?t.hOt+1===i.hOt:0===i.tFt&&AQ(t,i.JOt):t.tFt===t.JOt.pOt.length-1?AQ(t.JOt,i):!Tr(i)&&t.JOt===i.JOt&&t.tFt+1===i.tFt}wQ.dbt=void 0,r(),r(),r();var SQ=class extends rl{get name(){return"DiscontinuityMisalignmentError"}constructor(){super("Tried to wait for multiple discontinuity mappings at the same time")}};var TQ=class{vVt(t){const i=this._Vt.get(t);return void 0!==i&&kQ(i)}gVt(t){if(this.mVt()>t)return Promise.reject(new SQ);const i=[];for(const e of this.pVt){var s;if(e<t)null==(s=this._Vt.get(e))||s.wVt.zy(new SQ),this._Vt.delete(e);else i.push(e)}return this.pVt=i,-1===this.pVt.indexOf(t)&&this.pVt.push(t),this.yVt(t).wVt.Yy}bVt(t){const i=this._Vt.get(t);if(!i||!kQ(i))throw new m("LLHLSPlayer - Missing timestamp mapping for discontinuity #"+t);return i}AVt(t){return this.bVt(t).bV}SVt(t,i){const s=Tr(i)?i:i.JOt,e=this.bVt(s.SOt);let n=t.dO(e.bV);const r=Xa.iV(i.kO).dF(n);if(r.aF().iF(DE())){const t=_.round(r.tF()/NE().tF());n=n.dO(NE().VF(t))}return n}TVt(t,i){return this.SVt(t,i).dF(t)}kVt(t,i,s,e,n,r){this.EVt<t&&(this.EVt=t);const h=this.yVt(t);void 0===h.bV&&(h.RVt.some(t=>t.Mot===i)||(h.RVt.push({Mot:i,xVt:s,IVt:e.jF(s.UN),PVt:n,CVt:r}),this.NVt(h,t)))}NVt(t,i){if(t.bV||!this.DVt(t))return;const s=function(t){return cf(t,EQ)}(t.RVt);t.bV=s.IVt.dF(s.xVt),t.wVt.Hy(),Lr(t.RVt),is(this.pVt,i)}DVt(t){return this.BVt.length>0&&this.BVt.every(i=>t.RVt.some(t=>t.Mot===i))}yVt(t){if(this._Vt.has(t))return this._Vt.get(t);{const i={bV:void 0,wVt:new gs,RVt:[]};return this._Vt.set(t,i),i}}MVt(t){this.BVt=t,this._Vt.forEach((t,i)=>this.NVt(t,i))}LVt(){this.EVt=-1}mVt(){return this.EVt}Zg(){this._Vt.forEach(t=>t.wVt.Jg()),this._Vt.clear()}constructor(){this.BVt=[],this._Vt=Zs(),this.pVt=[],this.EVt=-1}};function kQ(t){return void 0!==t.bV}function EQ(t,i){return-function(t,i){if(t.CVt||i.CVt)return function(t,i){let s=t.dF(i);return t.fF()||i.fF()||(s.eF(DE())?s=s.dF(NE()):s.oF(DE().cF())&&(s=s.dO(NE()))),s}(t.xVt,i.xVt).sF(Xa.pF);return t.xVt.sF(i.xVt)}(t,i)||function(t,i){return t.PVt===i.PVt?Ba.rh:t.PVt?Ba.Fg:Ba.Vg}(t,i)||function(t,i){return t.IVt.sF(i.IVt)}(t,i)}var RQ=class{get OVt(){return this.FVt}get VVt(){return this.WVt}get mM(){return this.UVt}$Ot(t,i){if(pj(t))if(0===this.WVt.length)this.GVt(t);else{if(!i)return void Fi.aLt("HLSModel","No rendition was provided to update the playlist. Ignoring the update.");i.RMt.$Ot(t)}else{if(0!==this.WVt.length)return void Fi.aLt("HLSModel","Master playlist can only be applied once. Ignoring the update.");this.XVt(t)}}GVt(t){const i=this.ZVt(t.eyt);i.$Ot(t);const s=this.HVt(Xt.Ck,i),e=this.HVt(Xt.Nk,i),n=new tQ({eyt:i.eyt,EG:0,$wt:0,tyt:NaN,lrt:void 0,aCt:void 0,glt:0,WLt:[],XLt:void 0,zLt:void 0,ULt:void 0,HLt:void 0,ZLt:void 0,GLt:void 0},i,[s,e]);this.WVt.push(n)}XVt(t){this.FVt.push(...t.FG);const i=this.zVt(t);for(const s of t.gOt){const e=i.filter(t=>IQ(t,s));this.YVt(s,e);const n=new tQ(s,this.ZVt(s.eyt,t.Tn),e);this.WVt.push(n)}}ZVt(t,i){let s=this.KVt.get(t);return void 0===s&&(s=new pQ(t,i,this.aVt),this.KVt.set(t,s)),s}zVt(t){const i=[];for(const s of t.YN)if(void 0===s.eyt){for(const e of t.gOt)if(xQ(s.Kp,s.CMt,e)){const t=new Zq(s,this.ZVt(e.eyt));i.push(t)}}else{const t=new Zq(s,this.ZVt(s.eyt));i.push(t)}return i}HVt(t,i){return new Zq({Kp:t,eyt:void 0,CMt:"",bs:void 0,VLt:void 0,l:"",xMt:!0,IMt:!1,PMt:!1,BMt:void 0,NMt:void 0,rCt:void 0},i)}YVt(t,i){const s=i.filter(t=>t.Kp===Xt.Ck),e=i.filter(t=>t.Kp===Xt.Nk),n=t.lrt&&(t.lrt.bCt||t.lrt.wCt);if((!n||t.lrt.bCt)&&0===e.length){const s=this.HVt(Xt.Nk,this.ZVt(t.eyt));i.push(s)}if((!n||t.lrt.wCt)&&0===s.length){const s=this.HVt(Xt.Ck,this.ZVt(t.eyt));i.push(s)}t.lrt&&t.lrt.OLt}qVt(t){for(const i of this.WVt)for(const s of i.cLt)if(s===t)return s}jVt(t){for(const i of this.WVt)if(i===t)return i}QVt(t){for(const i of this.WVt)if(Ft(i.cLt,t))return i}Zg(){Lr(this.WVt),Lr(this.FVt),this.KVt.clear(),this.UVt.Zg()}constructor(t,i){this.WVt=[],this.FVt=[],this.KVt=Se(),this.UVt=new TQ,this.aVt=void 0,this.JVt=void 0,this.JVt=t,this.aVt=i}};function xQ(t,i,s){switch(t){case Xt.Ck:return s.ULt===i;case Xt.Nk:return s.HLt===i;case Xt.OV:return s.ZLt===i;case Xt.yLt:return s.GLt===i}return!1}function IQ(t,i){return xQ(t.Kp,t.CMt,i)&&(!t.DMt||t.RMt.eyt===i.eyt)}r();var PQ=class extends sh{constructor(t){super(BQ.$Vt),this.OMt=void 0,this.OMt=t}};r();var CQ=class extends sh{constructor(t){super(BQ.tWt),this.OMt=void 0,this.OMt=t}};r();var NQ=class extends sh{constructor(){super(d.iy)}},DQ="HlsModelUpdater",BQ=function(t){return t.$Vt="iWt",t.tWt="sWt",t}({}),MQ=class extends fr{get eWt(){return this.nWt}get rWt(){return this.hWt}get Br(){return this.ayt}get oWt(){return this.aWt}async uWt(t){const i=this.ayt.JVt;if(!i)throw new m("HLSModelUpdater - Could not load HLS playlist: The provided source is empty.");this.So(new Pt);const s=await this.cWt(i,{},2,!0,t),e=s.RMt;if(!mj(e)&&!pj(e))throw new m("HLSModelUpdater - Could not load HLS playlist: The playlist is invalid.");mj(e)||Fi.nD(DQ,"Detected media playlist only HLS stream."),this.dWt(e),s.lWt&&(this.hWt=!0,await this.fWt(t)),this.nWt=!0}async vWt(t,i,s,e){const n=this.ayt.qVt(t);if(!n)throw new m("HLSModelUpdater - Could not load HLS playlist for rendition: the rendition does not exist on the internal model.");const r={hOt:i,qFt:s,nN:VQ(n)},h=dn(_.max(1,3*t.RMt.WFt));try{await this._Wt(n,r,e,h)}catch(t){throw Ui(t),this.gWt(n),t}}mWt(t,i){const s=this.ayt.qVt(t);if(!s)throw new m("HLSModelUpdater - Could not load HLS playlist for rendition: the rendition does not exist on the internal model.");const e={hOt:void 0,qFt:void 0,nN:VQ(s)},n=dn(_.max(1,3*t.RMt.WFt));return this._Wt(s,e,i,n)}pWt(t,i){return this.wWt.has(t.qI)||this.wWt.set(t.qI,new gs),$s(this.wWt.get(t.qI).Yy,i)}gWt(t){this.So(new CQ(t))}async _Wt(t,i,s,e){const n=t.RMt.nLt(i);let r;try{r=(await this.cWt(n,i,0,this.hWt,s,e)).RMt}catch(i){throw Ui(i),t.RMt.HFt=Zd.Mg(),i}if(!pj(r))throw new m("HLSModelUpdater - Could not load HLS playlist for rendition: the playlist is not a media playlist.");if(this.yWt&&t!==this.yWt&&!this.yWt.RMt.FFt)try{await this.mWt(this.yWt,s)}catch(i){Ui(i),this.yWt=t,this.bWt()}try{this.dWt(r,t)}catch(n){if(n instanceof hQ&&void 0!==i.nN){const n=Jr({},i,{nN:void 0});return this._Wt(t,n,s,e)}throw n}this.yWt=t}async cWt(t,i,s,e,n,r){if(Fi.nD(DQ,"Loading HLS playlist at "+t+"."),e){const i=await this.AWt(t,n);if(void 0!==i)return{RMt:i,lWt:!0}}return{RMt:await this.SWt(t,i,s,n,r),lWt:!1}}async AWt(t,i){try{const s=await this.iut.WSt([t]);if(Ko(i),void 0!==s)return $j(s.responseURL,{},s.data)}catch(t){Ui(t)}}async SWt(t,i,s,e,n){const r={Yu:t,ck:Bi.DT,Xk:this.OSt,Fk:ci.GET,Kp:Ic.pk,jg:e,Vk:n},h=await lo(()=>this.TWt(r),e,s);return $j(h._k,i,h.hk)}async TWt(t){try{const i=await this.rW.dk(t);return{hk:await i.FT(),_k:i._k}}catch(t){throw hc(t)||this.So(new NQ),t}}async fWt(t){Ko(t);const i=[];for(const s of this.ayt.VVt)for(const e of s.cLt)i.push(this.kWt(e,t));await Promise.all(i)}async kWt(t,i){try{const s=await this.iut.WSt([t.RMt.eyt]);Ko(i),void 0===s||t.RMt.FFt||await this.mWt(t,i)}catch(t){Ui(t)}}bWt(){for(const t of this.ayt.VVt)for(const i of t.cLt)i!==this.yWt&&void 0!==i.RMt.YOt&&(i.RMt.FFt?this.EWt(i):i.RMt.uVt())}EWt(t){if(0!==t.RMt.ict.length){if(!this.yWt)return this.yWt=t,void this.yWt.RMt.fVt(0,void 0);if(this.RWt(this.yWt),!this.RWt(t)&&void 0===t.RMt.YOt){const i=this.xWt(t,this.yWt);Fi.oLt(DQ,"Assuming global timeline offset of "+i+"s for rendition "+t.RMt.eyt+"."),t.RMt.fVt(i,void 0)}}}xWt(t,i){if(LQ(t)){const s=t.RMt.ict[0],e=i.RMt.ict[0];return Fi.oLt(DQ,"Synchronizing by start of VOD: "+e.kO+" vs "+s.kO),e.kO-s.sFt}const s=function(t,i){let s=t.length-1,e=i.length-1;for(;s>=0&&e>=0;){const n=t[s],r=i[e];if(n.SOt>r.SOt)s--;else if(n.SOt<r.SOt)e--;else if(n.wOt){if(r.wOt)return{segment:n,referenceSegment:r};e--}else s--}return}(t.RMt.ict,i.RMt.ict);if(void 0!==s){const{segment:t,referenceSegment:i}=s;return Fi.oLt(DQ,"Synchronizing by start of discontinuity #"+i.SOt+": "+i.kO+" vs "+t.kO),i.kO-t.sFt}const e=FQ(t.RMt.ict);if(void 0!==e){const t=FQ(i.RMt.ict);if(void 0!==t){Fi.oLt(DQ,"Synchronizing by PDT:",t.bOt.toISOString()+" vs "+e.bOt.getTime());return t.kO-e.sFt-(t.bOt.getTime()-e.bOt.getTime())/1e3}}const n=OQ(i),r=OQ(t);var h;const o=null!=(h=t.RMt.YOt)?h:0;return Fi.oLt(DQ,"Synchronizing by last segment:",n+" vs "+r),n-r+o}RWt(t){const i=this.ayt.qVt(t);if(!i)return!1;if(LQ(i))return!1;const s=function(t,i){return gr(t,t=>void 0!==t.kst&&i.vVt(t.SOt))}(i.RMt.ict,this.ayt.mM);if(void 0===s)return!1;if(i.RMt.YFt===s.SOt)return!0;const e=this.ayt.mM.SVt(s.kst,s).tF()-s.sFt;return Fi.oLt(DQ,"Synchronize by media timestamp: "+e+"s for rendition "+t.RMt.eyt+"."),i.RMt.fVt(e,s.SOt),(void 0===this.yWt||void 0===this.yWt.RMt.YFt||this.yWt.RMt.YFt<s.SOt)&&(this.yWt=i),!0}dWt(t,i){var s;(this.ayt.$Ot(t,i),pj(t)&&i)&&(this.aWt=i,this.EWt(i),this.So(new PQ(i)),null==(s=this.wWt.get(i.qI))||s.Hy(),this.wWt.delete(i.qI));this.So(new GZ)}IWt(t,i){for(const s of this.ayt.VVt){const e=me(s.OOt,t=>t.RMt===i);void 0!==e&&void 0!==t.bCt&&(e.lrt=Aj(e.lrt,t));const n=me(s.LOt,t=>t.RMt===i);void 0!==n&&void 0!==t.wCt&&(n.lrt=Aj(n.lrt,t)),s.BOt||void 0===e&&void 0===n||(s.lrt=Aj(s.lrt,t))}}PWt(t,i){for(const s of this.ayt.VVt){const e=me(s.OOt,t=>t.RMt===i);void 0!==e&&void 0===t.bCt&&s.GOt(e);const n=me(s.LOt,t=>t.RMt===i);void 0!==n&&void 0===t.wCt&&s.GOt(n)}}Zg(){this.Vo(),this.ayt.Zg(),this.wWt.forEach(t=>t.Jg()),this.wWt.clear()}constructor(t,i,s,e,n){super(),this.rW=void 0,this.iut=void 0,this.OSt=void 0,this.ayt=void 0,this.nWt=void 0,this.hWt=void 0,this.yWt=void 0,this.aWt=void 0,this.wWt=void 0,this.rW=t,this.iut=i,this.OSt=s,this.nWt=!1,this.hWt=!1,this.yWt=void 0,this.aWt=void 0,this.wWt=Zs(),this.ayt=new RQ(e,n)}};function LQ(t){return t.RMt.kOt||t.RMt.ROt===Pn.ELt}function OQ(t){const i=t.RMt.ict;return i[i.length-1].EO}function FQ(t){return gr(t,t=>void 0!==t.bOt)}function VQ(t){if(void 0!==t.RMt.JLt&&!t.RMt.kOt&&!(void 0===t.RMt.VFt||Zd.Mg()/1e3-t.RMt.VFt>=t.RMt.JLt/2))return t.RMt.$Lt?rQ.vFt:rQ.fFt}var WQ=class extends ko{eVt(t){if(0===t.RMt.TOt.length)return;this.CWt||(this.CWt=this.JV.sI(D.WV,void 0,void 0,void 0,void 0,hr.DATE_RANGE),this.tt(this.CWt));cQ(this.CWt,t.RMt.TOt,i=>{var s;return null!=(s=t.RMt.UOt(i))?s:NaN})}$V(t,i,s){const e=sx(t,i,s);return this.CWt===t&&(this.CWt=e),e}constructor(t,i){super(i),this.Okt=void 0,this.CWt=void 0,this.NWt=t=>{this.eVt(t.OMt)},this.Okt=t,this.Okt.wn(BQ.$Vt,this.NWt)}};r();var UQ=class extends sh{constructor(){super(Xq.AMt)}};r(),r(),r();var GQ=class{get DWt(){return this.q2}get IR(){return eW(this.Srt.IR,this.Srt.B3)}get ict(){return this.lbt}get vmt(){return this.cmt}BWt(t){var i;return null==(i=this.MWt(t))?void 0:i.OMt}LWt(t){this.q2=t,this.OWt()}Ldt(t,i,s,e,n,r){this.lbt.push({OMt:t,Jat:i,FWt:ZT.$M(n,r),VWt:ZT.$M(s,e)}),this.OWt()}MWt(t){return me(this.lbt,i=>i.VWt.Cr(t))}mat(t){return me(this.lbt,i=>i.Jat===t)}Ict(t,i){return me(this.lbt,s=>s.OMt===t&&AQ(s.Jat,i))}P3(){const t=this.IR;t.V>0&&(this.cmt=t.An(t.V-1))}OWt(){const t=this.Srt.IR;this.lbt=this.lbt.filter(i=>0!==t.Mn(i.VWt).V)}constructor(t){this.Srt=void 0,this.lbt=void 0,this.q2=void 0,this.cmt=void 0,this.Srt=t,this.lbt=[],this.q2=void 0,this.cmt=void 0}};r();var XQ=188,ZQ=function(t){return t[t.gk=0]="gk",t[t._P=1]="_P",t[t.WWt=2]="WWt",t[t.UWt=3]="UWt",t}({});function HQ(t){return zQ(t)?1:function(t){return function(t){if(t.length<376)return-1;const i=t.length<564?2:3,s=_.min(1e3,t.length-i*XQ);for(let e=0;e<=s;e++){let s=!0;for(let n=0;n<i;n++)if(71!==t[e+n*XQ]){s=!1;break}if(s)return e}return-1}(t)>=0}(t)?2:function(t){return null!==rL(xh(t),new J)}(t)?3:0}function zQ(t){const i=uo(t,0,_.min(t.length,16384));return Co.TN(xh(i))}var YQ=class{get Kp(){return this.Ym}get GWt(){return this.Cot}get XWt(){return this.ZWt}get JIt(){return void 0!==this.HWt}get zWt(){return this.YWt}KWt(){if(this.JIt)throw new m("Cannot perform new operation while BufferAppender is still busy")}qWt(t){this.Jy!==t&&(this.KWt(),this.Jy=t,this.Cot=new GQ(t))}jWt(){return this.HWt?this.HWt.Yy:Promise.resolve()}QWt(t){const i=this.Cot.vmt;return void 0!==i&&this.JWt(t,i)}JWt(t,i){var s;const e=_.min(t,i);var n;return null!=(n=null==(s=this.Cot.IR.PM().FM(this.XWt).jM(e))?void 0:s.Cr(i))&&n}$Wt(t){return this.Cot.BWt(t)}Jg(){this.eT.Jg(),this.eT=new ui,this.tUt=!0}X2(t){this.KWt(),this.HWt=new gs;const i=i=>{this.sUt.iUt(t),this.eUt(i)};this.Z2(t,this.eT.jg).then(i,i)}async Z2(t,i){Fi.oLt(ej,"Appending initializer",dl(t.nUt.eyt)),this.Fgt=t,await this.Jy.X2(t,i),void 0!==this.rDt&&this.Ym===Mo.Nk&&zQ(t.hk.hk)&&this.rDt.jrt(t.hk.hk),Fi.oLt(ej,"Appended initializer",dl(t.nUt.eyt)),this.tUt=!1,this.Cot.LWt(t)}udt(t){this.KWt(),this.HWt=new gs;const i=i=>{this.sUt.iUt(t),this.eUt(i)};this.rUt(t,this.eT.jg).then(i,i)}async rUt(t,i){const s=t.OMt;if(void 0===s.RMt.lLt)throw new m("HlsBufferAppender: Cannot append HLSAsset to "+this.Ym+" buffer for a HLSRendition with an undefined targetDuration.");this.tUt&&void 0!==this.Fgt&&await this.Z2(this.Fgt,i);const e=this.Cot.IR.TM,n=this.Jy.IR;Fi.oLt(ej,"Appending",dl(t.nUt.eyt)),await this.Jy.W2(t,i),void 0!==t.hk&&this.hUt(t.hk,t),Fi.oLt(ej,"Appended",dl(t.nUt.eyt),e,this.Cot.IR.TM);const r=t.kO,h=r+t.ct,o=t.nUt,a=o.kO;var u;const c=o.kO+(null!=(u=o.ct)?u:0);this.Cot.Ldt(s,o,r,h,a,c),this.oUt(s,o,r,h,n),t.nUt.jOt&&this.Cot.P3()}oUt(t,i,s,e,n){if(this.Kp!==Mo.Nk)return;const r=this.Jy.IR.FM(n),h=this.Cot.Ict(t,i);if(h)if(this.aUt(h))if(0===r.V){if(void 0===this.Cot.mat(i)){const t=this.Jy.B3.Mn(new ZT([s,e]));this.ZWt=this.ZWt.LM(t)}}else{const t=r.Tn(0),i=new ZT([t,e]);if(this.ZWt=this.ZWt.FM(i),t>s){const i=this.Jy.B3.Mn(new ZT([s,t]));this.ZWt=this.ZWt.LM(i)}}else{const t=r.V>0&&r.Tn(0)<s?r.Tn(0):s;this.ZWt=this.ZWt.FM(new ZT([t,e]))}else if(0===r.V){const t=this.Jy.B3.Mn(new ZT([s,e]));this.ZWt=this.ZWt.LM(t)}else{var o;if(i.KOt)return;const t=r.Tn(0),e=null==(o=n.jM(s))?void 0:o.An(0),h=e&&e>s?e:s;if(t>h){const t=this.Jy.B3.Mn(new ZT([h,r.Tn(0)]));this.ZWt=this.ZWt.LM(t)}}}aUt(t){const i=t.VWt,s=i.Tn(0),e=i.An(i.V-1),n=i.EM(0),r=i.xM(i.V-1);return this.ZWt.WM(s,e,n,r)}hUt(t,i){var s;if(!zQ(t.hk))return;const e=i.kO,n=e+i.ct,r=i.bV;if(null==(s=this.pmt)||s.Ldt(t.hk,e,r),void 0!==this.rDt&&this.Ym===Mo.Nk){const s=i.nUt.jOt;this.rDt.Ldt(t.hk,e,n,r,i.OMt,s)}const h=[];void 0!==this.pmt&&h.push(this.pmt),void 0!==this.rDt&&h.push(this.rDt),ix(this.Jy.IR,h)}uUt(t){this.KWt(),this.HWt=new gs;try{Fi.oLt(ej,"Appending gap from "+t.cUt+" to "+t.dUt,dl(t.Jat.eyt)),this.O3(t.cUt,t.dUt)}finally{this.sUt.iUt(t),this.eUt()}}O3(t,i){this.Jy.O3(t,i)}constructor(t,i,s,e,n,r,h){this.Jy=void 0,this.Cot=void 0,this.sUt=void 0,this.Ym=void 0,this.pmt=void 0,this.rDt=void 0,this.lUt=void 0,this.HWt=void 0,this.eT=new ui,this.ZWt=ZT.tL(),this.fUt=void 0,this.Fgt=void 0,this.tUt=!0,this.YWt=!1,this.eUt=t=>{this.HWt&&(t?yc(t)&&KQ(this)?this.lUt.Kj(this.Jy.IR.QM)?this.HWt.Hy():this.HWt.zy(t):hc(t)?this.HWt.Hy():(this.YWt=!0,this.HWt.zy(t)):this.HWt.Hy(),this.HWt=void 0)},this.Ym=t,this.sUt=s,this.Jy=i,this.Cot=e,this.lUt=n,this.pmt=r,this.rDt=h}};function KQ(t){return LT(t.Kp)}r(),r();var qQ=class{async vUt(t,i,s,e){const n=await this._Ut(i,e);return await this.gUt.vUt(t,n,s)}async _Ut(t,i){var s;if((null==(s=this.mUt)?void 0:s.Yu)!==t){Fi.oLt("HLSDecryptor","Fetching new AES-128 decryption key from "+t+".");const s=await this.rW.dk({Yu:t,ck:Bi.PT,Fk:ci.GET,jg:i,Kp:Ic.bk,Uk:vs.Pk,Xk:this.OSt}),e=await s.WT(),n=new j(e);this.mUt={Yu:t,hk:n}}return this.mUt.hk}constructor(t,i,s){this.gUt=void 0,this.rW=void 0,this.OSt=void 0,this.mUt=void 0,this.gUt=t,this.rW=i,this.OSt=s,this.mUt=void 0}};r();var jQ=class{async dk(t,i,s,e,n){const r=await this.pUt(t,i,s,Bi.PT,e,n),h=await r.WT(n);return{httpStatusCode:r.rk,response:new j(h)}}async wUt(t,i,s,e,n){return(await this.pUt(t,i,s,Bi.NT,e,n)).UT(n)}async pUt(t,i,s,e,n,r){let h;t.Mbt&&(h=gj(t.Mbt.Tn,t.Mbt.V),0===h[0]&&h[1]===ru&&(h=void 0));const o=h?{Range:"bytes="+h[0]+"-"+h[1]}:void 0,a=new F({Yu:t.XE,ck:e,lk:o,Xk:this.OSt,Fk:ci.GET,Kp:i,Uk:s,Gk:this.Sat,zk:e===Bi.NT,Zk:n,jg:r});try{const i=await this.iut.tut(t.XE,h);if(Ko(r),void 0!==i)return null==n||n(i.buffer.byteLength,i.buffer.byteLength),new oA({dk:a,ck:a.ck,hk:i.buffer})}catch(t){Ui(t)}return await lo(()=>$s(this.rW.dk(a),a.jg),r,this.nrt)}constructor(t,i,s,e,n=2){this.rW=void 0,this.iut=void 0,this.Sat=void 0,this.OSt=void 0,this.nrt=void 0,this.rW=t,this.iut=i,this.Sat=s,this.OSt=e,this.nrt=n}};r();var QQ=class{yUt(){return this.bUt.RMt.QLt}async AUt(t,i,s){if(!this.yUt())throw new m("Could not perform blocking playlist update.");const e=this.SUt,n={hOt:t,qFt:i};return void 0!==e&&function(t,i,s){if(t.hOt===i.hOt){if(t.qFt===i.qFt)return!0;if(0===t.qFt&&void 0===i.qFt)return!0}if(t.hOt===i.hOt+1&&0===t.qFt&&void 0!==i.qFt){const t=s.mat(i.hOt);if(t&&t.eyt&&i.qFt>=t.pOt.length)return!0}return!1}(e,n,this.bUt.RMt)||(await this.TUt(),this.kUt(n)),this.Okt.pWt(this.bUt,s)}EUt(t){return this.kUt(),this.Okt.pWt(this.bUt,t)}kUt(t){if(!this.RUt&&!this.xUt){const i=()=>{this.RUt=void 0};this.RUt=this.IUt(t,this.PUt.jg).then(i,i)}}async TUt(){this.RUt&&(this.PUt.Jg(),this.PUt=new ui,await this.RUt.catch(ol),this.RUt=void 0)}async IUt(t,i){let s=t;for(;;){if(Ko(i),this.bUt.RMt.kOt&&this.bUt.RMt.FFt)return;null!=s||(s=this.CUt()),this.SUt=s;try{if(s)await this.Okt.vWt(this.bUt,s.hOt,s.qFt,i);else{const t=Zd.Mg()-this.En,s=1e3*this.bUt.RMt.WFt;t<s&&await hi(s-t,i),await this.Okt.mWt(this.bUt,i)}}catch(t){throw this.SUt=void 0,Ui(t),this.Okt.gWt(this.bUt),t}s=void 0,this.En=Zd.Mg()}}CUt(){const t=this.bUt.RMt;if(!t.QLt||t.kOt||0===t.ict.length)return;const i=t.ict[t.ict.length-1];return i.eyt?{hOt:i.hOt+1,qFt:t.OFt?0:void 0}:{hOt:i.hOt,qFt:i.pOt.length}}Zg(){this.xUt=!0,_e(this.TUt())}constructor(t,i){this.Okt=void 0,this.bUt=void 0,this.RUt=void 0,this.PUt=new ui,this.En=-1/0,this.SUt=void 0,this.xUt=!1,this.Okt=t,this.bUt=i,this.kUt()}};r();var JQ=function(t){return t[t.bLt=0]="bLt",t[t.ALt=1]="ALt",t[t.wk=2]="wk",t[t.yk=3]="yk",t}({});r(),r();var ps="AssetExtractor",$Q=class{NUt(t,i,s){let e=i;for(const i of this.DUt){if(e>=t)return!0;if(e<i.Tn)return!1;if(e<i.An){if(s<=i.An)return!0;e=i.An}}return e>=t}BUt(t,i){const s=[];for(let e=0;e<this.DUt.length;e+=1){const n=this.DUt[e],r=t-n.Tn,h=n.hk.length,o=_.min(h,_.max(r,0)),a=_.max(0,i+r),u=Hc(n.hk,o,a);u.length&&(e=this.MUt(e,n,t,o,a),s.push(u))}return s}LUt(t,i){this.DUt.push({Tn:t,An:t+i.length,hk:i})}MUt(t,i,s,e,n){let r=t;this.DUt.splice(r,1),r-=1,i.Tn<s&&(r+=1,this.DUt.splice(r,0,{Tn:i.Tn,An:s,hk:Hc(i.hk,0,e)}));const h=s+n-e;return h<i.An&&(r+=1,this.DUt.splice(r,0,{Tn:h,An:i.An,hk:Hc(i.hk,n)})),r}constructor(){this.DUt=[]}},tJ=class{get OUt(){return this.FUt}async VUt(){const t=await this.Gd.read();if(t.done)throw this.FUt=1/0,new m("No more data can be read from the given stream.");return this.FUt+=t.value.length,t.value}async WUt(t){await this.Gd.cancel(t)}constructor(t,i){this.FUt=void 0,this.Gd=void 0,this.FUt=i,this.Gd=t.getReader()}},iJ=class{UUt(){this.GUt.Hy(),this.GUt=new gs}XUt(t){const{Lbt:i,Obt:s}=eJ(this.eFt.Mbt),e=this.ZUt.BUt(i,s-i);Fi.oLt(ps,"Collected "+e.length+" chunks.");for(const i of e)t.enqueue(i)}async readAndSliceOutAssetBytes(t){await this.HUt.Yy;const{Lbt:i,Obt:s}=eJ(this.eFt.Mbt);try{for(;;){const e=this.Gd.OUt,n=await this.Gd.VUt(),r=n.length;Fi.oLt(ps,"Read "+r+" at "+e+" for extraction of "+dl(this.eFt));const h=_.min(e+r,i)-e;if(!(h>0)){if(e+r<=s)return Fi.oLt(ps,"Extracting the read data range for extraction of "+dl(this.eFt)),t.enqueue(n),this.UUt(),_e(this.readAndSliceOutAssetBytes(t));{const i=s-e,h=Hc(n,0,i),o=Hc(n,i);return h.length>0&&(Fi.oLt(ps,"Extracting "+h.length+" bytes for extraction of "+dl(this.eFt)),t.enqueue(h)),Fi.oLt(ps,"Of the read "+r+" bytes, the last "+o.length+" will be stored locally for extraction of "+dl(this.eFt)),this.ZUt.LUt(e+i,o),Fi.oLt(ps,"Extraction of "+dl(this.eFt)+" completed as the entire request has been fulfilled."),this.zUt(t),void(this.YUt&&(Fi.oLt(ps,"Aborting stream upstream as no more bytes are needed from "+dl(this.eFt)+"."),await this.Gd.WUt("AssetExtraction - AbortOnEnd")))}}{const i=Hc(n,0,h),s=Hc(n,h);if(Fi.oLt(ps,"Of the read "+r+" bytes, the first "+h+" will be stored locally for extraction of "+dl(this.eFt)),this.ZUt.LUt(e,i),s.length>0)return Fi.oLt(ps,"Extracting "+s.length+" bytes for extraction of "+dl(this.eFt)),t.enqueue(s),this.UUt(),_e(this.readAndSliceOutAssetBytes(t))}}}catch(i){Fi.oLt(ps,"Extraction of "+dl(this.eFt)+" completed as the entire source stream has been read."),this.zUt(t)}}zUt(t){t.close(),this.UUt(),this.KUt.Hy()}start(t){Fi.oLt(ps,"Preparing to push all collected data to controller for extraction of "+dl(this.eFt)),this.XUt(t),Fi.oLt(ps,"Collected data pushed to controller for extraction of "+dl(this.eFt));const{Obt:i}=eJ(this.eFt.Mbt);this.Gd.OUt>=i?(Fi.oLt(ps,"Extraction of "+dl(this.eFt)+" completed as the entire request has been fulfilled."),this.zUt(t)):(Fi.oLt(ps,"Continuing read from original stream for extraction of "+dl(this.eFt)),_e(this.readAndSliceOutAssetBytes(t)))}get qUt(){return this.KUt.Yy}pull(){return this.HUt.Hy(),this.HUt=new gs,this.GUt.Yy}constructor(t,i,s,e){this.eFt=void 0,this.Gd=void 0,this.ZUt=void 0,this.YUt=void 0,this.HUt=void 0,this.GUt=void 0,this.KUt=new gs,this.eFt=t,this.Gd=i,this.ZUt=s,this.YUt=e,this.HUt=new gs,this.GUt=new gs}},sJ=class{lO(t){if(!wj(this.eFt,t))return!1;const{Lbt:i,Obt:s}=eJ(t.Mbt);return this.ZUt.NUt(this.jUt.OUt,i,s)}async wgt(t,i){void 0===i&&(i=!1);const s=this.jUt,e=this.ZUt;if(Fi.nD(ps,"Extracting data from "+dl(t)+" out of "+dl(this.eFt)),this.QUt&&(Fi.oLt(ps,"Awaiting previous extraction before extracting "+dl(t)+" out of "+dl(this.eFt)),await this.QUt),!this.lO(t))throw new m("The extractor does not contain the data requested");const n=new iJ(t,s,e,i);return this.QUt=n.qUt,new jr(n)}constructor(t,i){this.eFt=void 0,this.ZUt=void 0,this.jUt=void 0,this.QUt=void 0,this.eFt=i;const{Lbt:s}=eJ(this.eFt.Mbt);this.jUt=new tJ(t,s),this.ZUt=new $Q}};function eJ(t){if(t){const i=t.Tn;return{Lbt:i,Obt:void 0!==t.V?i+t.V:ru}}return{Lbt:0,Obt:ru}}var nJ=class{async Un(){const t=await this.JUt.wUt(this.eFt,Ic.yk,vs.gk,void 0,this.eT.jg);return new sJ(t,this.eFt)}lO(t){return wj(this.eFt,t)}async wgt(t,i){void 0===i&&(i=!1);const s=await this.Cmt;return await $s(s.wgt(t,i),this.eT.jg)}Jg(){this.Cmt.catch(ol),this.eT.Jg()}constructor(t,i){this.eFt=void 0,this.JUt=void 0,this.eT=void 0,this.Cmt=void 0,this.eFt=t,this.JUt=i,this.eT=new ui,this.Cmt=this.Un()}};r();var rJ=class extends sh{constructor(t){super(lJ.$Ut),this.Gk=void 0,this.Gk=t}};r();var hJ=class extends sh{constructor(t,i,s,e,n,r,h){super(lJ.tGt),this.uri=void 0,this.iGt=void 0,this.Gk=void 0,this.mediaSequenceNumeber=void 0,this.mediaTrackId=void 0,this.sGt=void 0,this.httpStatusCode=void 0,this.uri=t,this.iGt=i,this.Gk=s,this.mediaSequenceNumeber=e,this.mediaTrackId=n,this.sGt=r,this.httpStatusCode=h}};function oJ(t,i,s){const e=Tr(s)?s:s.JOt;if(i.vVt(e.SOt)){if(void 0!==s.kst)return i.SVt(s.kst,s).tF();if(s!==e&&void 0!==e.kst){const t=i.SVt(e.kst,e).tF();return s.kO+(t-e.kO)}}const n=t.RMt.mat(e.hOt-1);if(void 0!==n&&i.vVt(n.SOt)){if(n.pOt.length>0){const t=n.oFt(n.pOt.length-1);if(void 0!==t.kst){const e=i.SVt(t.kst,t).tF();return s.kO+(e-t.kO)}}if(void 0!==n.kst){const t=i.SVt(n.kst,n).tF();return s.kO+(t-n.kO)}}const r=t.RMt.mat(e.hOt+1);if(void 0!==r&&i.vVt(r.SOt)){if(r.pOt.length>0){const t=r.oFt(0);if(void 0!==t.kst){const e=i.SVt(t.kst,t).tF();return s.kO+(e-t.kO)}}if(void 0!==r.kst){const t=i.SVt(r.kst,r).tF();return s.kO+(t-r.kO)}}return s.kO}function aJ(t){return void 0!==t.kst}function uJ(t,i,s,e){for(let n=i;n<t.length;n++){const i=t[n];if(i.SOt!==s)break;if(aJ(i)){if(e(i,n))break}}}function cJ(t,i,s,e){for(let n=i;n>=0;n--){const i=t[n];if(i.SOt!==s)break;if(aJ(i)){if(e(i,n))break}}}r();var dJ="HlsPlaylistDownloader",lJ=function(t){return t.$Ut="eGt",t.tGt="nGt",t}({}),fJ=class extends fr{rGt(t){this.hGt.Zg(),this.hGt=new QQ(this.Okt,t),this.JIt?this.oGt=t:(this.bUt=t,this.aGt=0,this.uGt=void 0,this.cGt=void 0,this.dGt=!1)}get JIt(){return void 0!==this.lGt}get fGt(){return this.dGt}jWt(){return this.lGt?this.lGt.Yy:Promise.resolve()}vGt(){return this.sUt.vGt()}Jg(){var t,i,s;this._Gt.Jg(),this._Gt=new ui,null==(t=this.gGt)||t.Jg(),this.gGt=void 0,null==(i=this.mGt)||i.Jg(),null==(s=this.pGt)||s.Jg(),this.mGt=void 0,this.pGt=void 0,this.aGt=0,this.uGt=void 0,this.cGt=void 0,this.dGt=!1}Zg(){this.hGt.Zg()}get OMt(){var t;return null!=(t=this.oGt)?t:this.bUt}get kPt(){if(!this.bUt.RMt.kOt||void 0===this.uGt)return!1;const t=this.bUt.RMt.mat(this.uGt);if(!t.jOt)return!1;if(void 0!==this.cGt){if(!t.oFt(this.cGt).jOt)return!1}return!0}wGt(t){const i=this.bUt.RMt.QFt(t);if(!i)return!1;if(void 0!==this.uGt){const s=i.hOt===this.uGt;return void 0!==this.cGt?i.aFt(t)===i.oFt(this.cGt)&&s:s}return!1}yGt(t){let i;var s;if(!this.fGt&&(void 0===this.uGt||t<this.aGt-1e-6))i=this.bGt(t);else if(i=this.AGt(null!=(s=this.uGt)?s:0,this.cGt),void 0!==i){const[s,e]=i,n=oJ(this.bUt,this.Okt.Br.mM,null!=e?e:s),r=3*this.bUt.RMt.lLt;_.abs(n-t)>=r&&(i=this.bGt(t))}else if(this.bUt.RMt.kOt&&void 0!==this.uGt){if(this.bUt.RMt.mat(this.uGt).jOt&&(i=this.bGt(t),void 0!==i&&i[0].hOt===this.uGt))return}if(i){this.aGt=t;const[s,e]=i;return 0===(null==e?void 0:e.tFt)&&void 0!==s.ct?[s,void 0]:[s,e]}}bGt(t){let i,s;const e=this.bUt.RMt.ict;if(0===e.length)return;const n=this.Okt.Br.mM,r=Xa.iV(t),h=function(t,i,s){const e=t.RMt.ict;if(0===e.length)return;const n=t.RMt.JFt(s.tF());if(!i.vVt(n.SOt))return;const r=n.hOt-e[0].hOt,h=n.SOt;let o,a,u,c=0;if(cJ(e,r,h,(t,i)=>(o=t,c=i,!0)),void 0===o&&(uJ(e,r+1,h,(t,i)=>(o=t,c=i,!0)),void 0===o))return;return i.SVt(o.kst,o).rF(s)?(a=o,uJ(e,c+1,h,t=>i.SVt(t.kst,t).iF(s)?(u=t,!0):(a=t,!1))):(u=o,cJ(e,c-1,h,t=>i.SVt(t.kst,t).rF(s)?(a=t,!0):(u=t,!1))),void 0!==a&&void 0!==u?[a,u]:void 0}(this.bUt,n,r);let o;if(void 0!==h){const[t,i]=h,s=n.SVt(t.kst,t),e=n.SVt(i.kst,i),a=r.dF(s).tF()/e.dF(s).tF()*(i.kO-t.kO);o=t.kO+a}else o=t;const a=e[e.length-1];return a.EO<=o?(i=a,s=a.cFt(o)):e[0].kO>o?(i=e[0],s=i.oFt(0)):(i=this.bUt.RMt.QFt(o),s=null==i?void 0:i.cFt(o)),i?[i,s]:void 0}AGt(t,i){let s,e;if(s=this.bUt.RMt.mat(t),s&&void 0!==i){if(0===s.pOt.length)return[s,void 0];e=s.oFt(i+1)}return void 0!==s&&void 0!==e||(s=this.bUt.RMt.mat(t+1),e=null==s?void 0:s.oFt(0)),s?[s,e]:void 0}KWt(){if(this.JIt)throw new m("Cannot perform new operation while PlaylistDownloader is still busy")}SGt(t){this.KWt(),this.lGt=new gs,this.TGt(t,this._Gt.jg).then(this.kGt,this.kGt)}EGt(){this.hGt.kUt()}async TGt(t,i){if(this.bUt.RMt.kOt)return;let s=this.yGt(t);for(!s&&this.hGt.yUt()&&void 0!==this.uGt&&(await this.hGt.AUt(void 0===this.cGt?this.uGt+1:this.uGt,void 0!==this.cGt?this.cGt+1:void 0,i),s=this.yGt(t)),!s&&this.hGt.yUt()&&void 0!==this.uGt&&(await this.hGt.AUt(this.uGt+1,0,i),s=this.yGt(t));!s;){Fi.nD(dJ,"No next segment / part available, need to update playlist before continuing."),await this.hGt.EUt(i);const e=this.OMt.RMt.ict;e[0].kO>t&&(this.cGt=void 0,this.uGt=void 0,this.dGt=!1);e[e.length-1].hOt<this.uGt&&(this.cGt=void 0,this.uGt=void 0,this.dGt=!1),s=this.yGt(t)}}RGt(){return this.sUt.xGt()}IGt(){this.KWt();try{const t=this.bUt.RMt.$Ft(kr.bLt);t&&this.PGt(t);const i=this.bUt.RMt.$Ft(kr.ALt);i&&this.CGt(i)}catch(t){throw Ui(t),this.bUt.RMt.HFt=Zd.Mg(),this.Okt.gWt(this.bUt),t}}PGt(t){this.pGt&&!this.pGt.lO(t.eyt)&&(this.pGt.Jg(),this.pGt=void 0),this.pGt||(this.pGt=new nJ(t.eyt,this.JUt))}CGt(t){this.mGt&&!this.mGt.lO(t.eyt)&&(this.mGt.Jg(),this.mGt=void 0),this.mGt||(this.mGt=new nJ(t.eyt,this.JUt))}gat(t,i,s){this.KWt(),Fi.nD(dJ,"Starting download of segment "+dl(t.eyt)+" and part "+(null==i?void 0:i.tFt)),this.lGt=new gs,this.NGt(t,i,s,this._Gt.jg).catch(t=>{throw Ui(t),this.bUt.RMt.HFt=Zd.Mg(),this.Okt.gWt(this.bUt),t}).then(this.kGt,this.kGt)}async NGt(t,i,s,e){let n;if(t.yOt){var r,h;if(!s||!yj(s.nUt.eyt,null==(r=t.yOt)?void 0:r.eyt)||t.SOt!==s.SOt){var o;null==(o=this.gGt)||o.Jg(),this.gGt=new gs;const i=this.DGt(t.yOt,t,e).then(()=>{this.gGt=void 0});this.gGt.$g(i)}n=null==(h=this.gGt)?void 0:h.Yy}t.jLt||i&&i.jLt?await this.BGt(t,i,n,e):await this.MGt(t,i,n,e)}async DGt(t,i,s){const e=await this.LGt(t,i,s),n=e.yOt.hk.hk.byteLength;this.sUt.OGt(e),this.So(new hJ(e.yOt.nUt.eyt,e.Kp,this.Ym,i.hOt,e.OMt.qI,n,e.yOt.xut)),Fi.oLt(ej,"Download initializer complete",dl(t.eyt))}async MGt(t,i,s,e){const n=await this.FGt(t,i,e),r=n.Jat.hk.hk.byteLength;var h;s&&await $s(s,e),this.sUt.OGt(n),this.So(new hJ(n.Jat.nUt.eyt,n.Kp,this.Ym,t.hOt,n.OMt.qI,r,n.Jat.xut)),Fi.oLt(ej,"Download complete",dl(null!=(h=null==i?void 0:i.eyt)?h:t.eyt))}async BGt(t,i,s,e){const n=this.VGt(t,i);var r;s&&await $s(s,e),this.sUt.OGt(n),Fi.oLt(ej,"Download gap complete",dl(null!=(r=null==i?void 0:i.eyt)?r:t.eyt))}async FGt(t,i,s){let e;if(i){if(this.mGt)if(this.mGt.lO(i.eyt)){const t=await this.mGt.wgt(i.eyt),n=await Zb(t,s),r=new j(n);e=_J(i,await this.vUt(r,i.FG,s),200)}else this.mGt.Jg(),this.mGt=void 0;e||(Fi.oLt(ej,"Start download",dl(i.eyt)),e=await this.WGt(i,s))}else Fi.oLt(ej,"Start download",dl(t.eyt)),e=await this.wat(t,s);return this.uGt=t.hOt,this.cGt=null==i?void 0:i.tFt,this.dGt=!1,{Kp:"Jat",Jat:e,OMt:this.bUt,SOt:t.SOt}}async LGt(t,i,s){let e;if(this.pGt){var n;if(this.pGt.lO(t.eyt)){const n=await $s(this.pGt.wgt(t.eyt),s),r=await Zb(n,s),h=new j(r);e=vJ(t,i,await this.vUt(h,t.mOt?[t.mOt]:[],s),200)}Fi.nD(dJ,"MAP is required for segment, downloading MAP data."),null==(n=this.pGt)||n.Jg(),this.pGt=void 0}return e||(Fi.oLt(ej,"Start download",dl(t.eyt)),e=await this.UGt(t,i,s)),{Kp:"yOt",yOt:e,OMt:this.bUt,kO:i.kO,SOt:i.SOt,FG:i.FG}}VGt(t,i){const s=null!=i?i:t;return this.uGt=t.hOt,this.cGt=null==i?void 0:i.tFt,this.dGt=!0,{Kp:"GGt",cUt:s.kO,dUt:s.kO+s.ct,OMt:this.bUt,Jat:s,SOt:t.SOt}}async UGt(t,i,s){const{response:e,httpStatusCode:n}=await this.JUt.dk(t.eyt,Ic.wk,vs.Ak,void 0,s),r=t.mOt?[t.mOt]:[];return vJ(t,i,await this.vUt(e,r,s),n)}async wat(t,i){if(!t.eyt)throw new m("Internal error: attempted to download an incomplete segment");let s,e;try{this.XGt(t);const n=await this.JUt.dk(t.eyt,Ic.wk,vs.gk,this.ZGt,i);s=n.response,e=n.httpStatusCode}finally{this.HGt()}return function(t,i,s){return{hk:{hk:i,Kp:Vt.fJ},Kp:JQ.wk,xut:s,nUt:t,SOt:t.SOt}}(t,await this.vUt(s,t.FG,i),e)}async WGt(t,i){let s,e;try{this.XGt(t);const n=await this.JUt.dk(t.eyt,Ic.wk,vs.gk,this.ZGt,i);s=n.response,e=n.httpStatusCode}finally{this.HGt()}return _J(t,await this.vUt(s,t.FG,i),e)}async vUt(t,i,s){const e=me(i,t=>t.Fk===It.SLt);return e?e.eyt&&e.YLt?await this.zGt.vUt(t,e.eyt,e.YLt,s):(Fi.lt(dJ,"Encountered an AES-128 encrypted segment for which no initialization vector could be determined."),t):t}XGt(t){var i,s,e;this.YGt=t,this.KGt=0,this.qGt=Zd.Mg(),this.jGt=0,this.QGt=null!=(e=null==(s=t.eyt)||null==(i=s.Mbt)?void 0:i.V)?e:0}HGt(){this.YGt=void 0,this.KGt=0,this.qGt=0,this.jGt=0,this.QGt=0}JGt(){if(void 0!==this.YGt)return{Jat:this.YGt,$Gt:this.jGt,tXt:this.QGt,iXt:Zd.Mg()-this.qGt}}sXt(t){return void 0!==this.YGt&&(0!==this.KGt&&(!(this.QGt>0&&this.jGt>=this.QGt)&&!(t-this.KGt<500)))}constructor(t,i,s,e,n,r,h,o){super(),this.Ym=void 0,this.Okt=void 0,this.sUt=void 0,this.JUt=void 0,this.zGt=void 0,this.bUt=void 0,this.hGt=void 0,this.oGt=void 0,this.lGt=void 0,this.YGt=void 0,this.KGt=0,this.qGt=0,this.jGt=0,this.QGt=0,this._Gt=new ui,this.gGt=void 0,this.aGt=0,this.uGt=void 0,this.cGt=void 0,this.dGt=!1,this.pGt=void 0,this.mGt=void 0,this.kGt=t=>{this.oGt&&(this.bUt=this.oGt,this.oGt=void 0,this.aGt=0,this.uGt=void 0,this.cGt=void 0,this.dGt=!1),this.lGt&&(t&&!hc(t)?this.lGt.zy(t):this.lGt.Hy(),this.lGt=void 0)},this.ZGt=(t,i)=>{this.jGt=t,t>0&&0===this.KGt&&(this.KGt=Zd.Mg()),void 0!==i&&(this.QGt=i),this.So(new rJ(this.Ym))},this.Ym=t,this.Okt=s,this.sUt=e,this.bUt=i,this.hGt=new QQ(s,i),this.zGt=new qQ(h,n,o),this.JUt=new jQ(n,r,function(t){switch(t){case Xt.Nk:return aA.Nk;case Xt.Ck:return aA.Ck;case Xt.OV:case Xt.yLt:return aA.DT;default:return aA.gk}}(i.Kp),o)}};function vJ(t,i,s,e){return{hk:{hk:s,Kp:Vt.fJ},Kp:JQ.bLt,xut:e,nUt:t,SOt:i.SOt}}function _J(t,i,s){return{hk:{hk:i,Kp:Vt.fJ},xut:s,Kp:JQ.ALt,nUt:t,SOt:t.JOt.SOt}}r();var gJ=class{get DWt(){return this.eXt}get nXt(){const t=[];for(const s of this.rXt)if("Jat"===s.Kp){const e=s.Jat.nUt,n=oJ(s.OMt,this.UVt,e);var i;t.push({Jat:e,OMt:s.OMt,kO:n,EO:n+(null!=(i=e.ct)?i:0)})}else"GGt"===s.Kp&&t.push({Jat:s.Jat,OMt:s.OMt,kO:s.cUt,EO:s.dUt});return t}get hXt(){const t=[];return this.oXt.forEach(i=>{for(const s of i.aXt)"Jat"===s.Kp?t.push({Jat:s.nUt,OMt:s.OMt,kO:s.kO,EO:s.kO+s.ct}):"GGt"===s.Kp&&t.push({Jat:s.Jat,OMt:s.OMt,kO:s.cUt,EO:s.dUt})}),t}OGt(t){"yOt"===t.Kp&&(this.eXt=t.yOt),this.rXt.push(t),this.uXt&&(this.uXt.Hy(),this.uXt=void 0)}vGt(){return this.rXt[0]}cXt(t){is(this.rXt,t)}xGt(){return null!=this.uXt||(this.uXt=new gs),this.uXt.Yy}dXt(t){this.lXt(t.Mot).dXt(t)}fXt(t){return this.lXt(t).fXt()}iUt(t){this.lXt(t.Mot).iUt(t)}vXt(t){var i;null==(i=this.oXt.get(t))||i.Zg()}_Xt(t){return this.lXt(t)._Xt()}lXt(t){if(this.oXt.has(t))return this.oXt.get(t);{const i=new mJ;return this.oXt.set(t,i),i}}Zy(){this.gXt(),this.mXt()}gXt(){this.eXt=void 0,Lr(this.rXt)}mXt(){this.oXt.forEach(t=>t.Zy())}Zg(){this.oXt.forEach(t=>t.Zg()),this.oXt.clear(),this.Zy(),this.uXt&&(this.uXt.Jg(),this.uXt=void 0)}constructor(t){this.rXt=[],this.oXt=Se(),this.UVt=void 0,this.uXt=void 0,this.eXt=void 0,this.UVt=t}},mJ=class{get aXt(){return this.pXt}dXt(t){this.pXt.push(t),this.wXt&&(this.wXt.Hy(),this.wXt=void 0)}fXt(){return this.pXt[0]}iUt(t){is(this.pXt,t)}_Xt(){return null!=this.wXt||(this.wXt=new gs),this.wXt.Yy}Zy(){Lr(this.pXt)}Zg(){this.Zy(),this.wXt&&(this.wXt.Jg(),this.wXt=void 0)}constructor(){this.pXt=[],this.wXt=void 0}};r(),r(),r();var pJ=class extends sh{constructor(t,i){super(gl.yXt),this.OMt=void 0,this.lrt=void 0,this.OMt=t,this.lrt=i}};r();var wJ=class extends sh{constructor(t){super(gl.bXt),this.OMt=void 0,this.OMt=t}};r();var yJ=class extends sh{constructor(t,i){super(gl.AXt),this.OMt=void 0,this.glt=void 0,this.OMt=t,this.glt=i}};r();var bJ=class extends sh{constructor(t,i){super(gl.SXt),this.OMt=void 0,this.TXt=void 0,this.OMt=t,this.TXt=i}};r();var AJ=class extends sh{constructor(){super(gl.kXt)}},gl=function(t){return t.yXt="EXt",t.AXt="RXt",t.SXt="xXt",t.bXt="IXt",t.kXt="PXt",t}({}),SJ=class extends fr{get CXt(){return this.NXt}DXt(t){for(const i of this.NXt)Ft(t,i)||this.sUt.vXt(i);this.NXt=t}get JIt(){return void 0!==this.BXt}jWt(){var t,i;return null!=(i=null==(t=this.BXt)?void 0:t.Yy)?i:Promise.resolve()}KWt(){if(this.JIt)throw new m("Cannot perform new operation while transmuxer is still busy")}MXt(t,i){}LXt(t){this.KWt(),this.BXt=new gs;const i=i=>{this.OXt(t,i)};this.FXt(t,this.eT.jg).then(i,i)}VXt(t){this.KWt(),this.BXt=new gs;const i=i=>{this.OXt(t,i)};this.WXt(t,this.eT.jg).then(i,i)}UXt(t){this.KWt(),this.BXt=new gs;try{for(const i of this.CXt){const s={Kp:"GGt",Mot:i,cUt:t.cUt,dUt:t.dUt,SOt:t.SOt,OMt:t.OMt,Jat:t.Jat};this.dXt(s)}}finally{this.OXt(t)}}OXt(t,i){this.BXt&&(!i||hc(i)||function(t){return t instanceof SQ}(i)?(hc(i)||this.sUt.cXt(t),this.BXt.Hy(),this.BXt=void 0):this.BXt.zy(i),this.So(new AJ))}GXt(t,i){this.So(new pJ(t,i))}XXt(t,i){this.So(new yJ(t,i))}ZXt(t,i,s){bQ(i)&&this.So(new bJ(t,s))}HXt(t){this.So(new wJ(t))}dXt(t){Ft(this.NXt,t.Mot)&&this.sUt.dXt(t)}zXt(t){return this.sUt.fXt(t)}iUt(t){this.sUt.iUt(t)}YXt(t){return this.sUt._Xt(t)}Jg(){this.eT.Jg(),this.eT=new ui}constructor(t,i,s){super(),this.sUt=void 0,this.UVt=void 0,this.NXt=void 0,this.BXt=void 0,this.eT=new ui,this.sUt=t,this.UVt=i,this.NXt=s}};function TJ(t,i){return bQ(t)?0:_.min(t.kO,i)}function kJ(t,i){var s;return _.max(t.kO,i)+(null!=(s=t.ct)?s:0)}var EJ=class extends SJ{FXt(t,i){Ko(i);const s={Kp:"OPt",hk:t.yOt.hk,Mot:this.CXt[0],SOt:t.SOt,KXt:{lrt:"",FG:t.FG},kO:t.kO,OMt:t.OMt,nUt:t.yOt.nUt};return this.dXt(s),Promise.resolve()}async WXt(t,i){Ko(i);const s=t.Jat.nUt;let e;void 0!==s.kst?(this.UVt.vVt(t.SOt)||await $s(this.UVt.gVt(t.SOt),i),e=this.UVt.SVt(s.kst,s).tF()):e=s.kO;const n=TJ(s,e),r=kJ(s,n);var h;const o={Kp:"Jat",hk:t.Jat.hk,Mot:this.CXt[0],cUt:n,dUt:r,kO:e,ct:null!=(h=s.ct)?h:0,bV:0,SOt:t.SOt,OMt:t.OMt,nUt:t.Jat.nUt};this.dXt(o)}constructor(t,i,s){super(t,i,[s])}};function RJ(t,i){let s=ZT.tL();for(const e of t){let n=e.kO;if(e.OMt.RMt.kOt&&bQ(e.Jat))n=0;else{const s=t=>e.OMt===t.OMt&&AQ(t.Jat,e.Jat),r=me(t,s);if(void 0!==r)n=_.min(n,r.EO);else{const t=me(i,s);void 0!==t&&(n=_.min(n,t.VWt.An(0)))}}s=s.LM(ZT.$M(n,e.EO))}return s}r();var xJ=.001,IJ=class{get qXt(){return this.jXt}get OMt(){return this.QXt.OMt}rGt(t){this.QXt.rGt(t)}get JIt(){return this.QXt.JIt||this.JXt.JIt||this.jXt.some(t=>t.JIt)}$Xt(t){const i=this.jXt.length>0,s=t.slice();for(let t=this.jXt.length-1;t>=0;t--){const i=this.jXt[t];if(!KQ(i))throw new m("Invalid state");const e=li(s,t=>t.Kp===i.Kp);e>=0&&!i.zWt?(i.qWt(s[e]),Lh(s,e)):Lh(this.jXt,t)}for(const t of s){const i=new GQ(t);this.jXt.push(new YQ(t.Kp,t,this.tZt,i,this,this.iZt,this.sZt))}i&&s.length>0&&this.tZt.Zy();const e=t.map(t=>t.Kp);this.JXt.DXt(e)}Kj(t){var i;const s=(null==(i=this.kZ)?void 0:i.Kj(t))||!1;return s&&(this.Jg(),this.tZt.Zy()),s}eZt(t){const i=this.jXt[0];if(void 0!==i){if(i.Kp!==Mo.DT||i.JIt)throw new m("Invalid state");if(!i.zWt)return void i.qWt(t)}const s=new GQ(t),e=new YQ(Mo.DT,t,this.tZt,s,this,void 0,void 0);this.jXt=[e]}get DWt(){const t=this.tZt.DWt;if(t)return t;if(this.jXt.length>0){const t=this.jXt[0].GWt.DWt;if(t&&this.jXt.every(i=>i.GWt.DWt===t))return t}}vat(){for(const t of this.jXt)t.GWt.OWt()}get nZt(){const t=RJ(this.tZt.nXt.concat(this.tZt.hXt),vl(this.jXt,t=>t.GWt.ict)).PM();let i;if(0===this.jXt.length)i=t;else{i=ZT.iL();for(const t of this.jXt)i=i.Mn(t.GWt.IR);for(const t of this.jXt)i=i.FM(t.XWt);i=i.LM(t)}return i.MM(xJ)}get rZt(){const t=RJ(this.tZt.hXt,vl(this.jXt,t=>t.GWt.ict)).PM();let i;if(0===this.jXt.length)i=t;else{i=ZT.iL();for(const t of this.jXt)i=i.Mn(t.GWt.IR);i=i.LM(t)}return i}rdt(t){const i=this.nZt.jM(t,xJ);return i?i.An(i.V-1):t}wGt(t){return!!this.nZt.jM(t,xJ)||this.QXt.wGt(t)}hZt(t){return this.rZt.Cr(t,xJ)}oZt(t,i,s){for(const t of this.jXt){const s=t.GWt,e=s.vmt;if(void 0!==e&&i>=e&&!s.IR.PM().Cr(e))return!0}return i-t<s}Jg(){this.aZt(),this.uZt()}aZt(){this.QXt.Jg()}uZt(){this.JXt.Jg(),this.qXt.forEach(t=>t.Jg())}Zg(){this.Jg(),this.QXt.Zg()}constructor(t,i,s,e,n,r){this.QXt=void 0,this.tZt=void 0,this.JXt=void 0,this.iZt=void 0,this.sZt=void 0,this.kZ=void 0,this.jXt=void 0,this.QXt=t,this.tZt=i,this.JXt=s,this.iZt=e,this.sZt=n,this.kZ=r,this.jXt=[]}};r();var PJ=class extends sh{constructor(){super(Xq.kMt)}};r();var CJ=class extends sh{constructor(){super(Xq.SMt)}};r(),r();var NJ="LazyMediaBuffer",DJ=class extends fr{get GT(){return this.ZS}get N3(){return this.Ym}get Cd(){if(!this.Srt)throw new Wt(Ne.MEDIA_LOAD_ERROR,"Cannot get the configuration of an uninitialized MediaBuffer.");return this.Srt.Cd}get Dj(){return this.Gj}set Dj(t){this.Gj=t,this.Srt&&(this.Srt.Dj=t)}get IR(){return this.Srt?this.Srt.IR:ZT.tL()}get B3(){return this.Srt?this.Srt.B3:this.M3.QJ}get Oj(){return this.Hj}set Oj(t){this.Hj=t,this.Srt&&(this.Srt.Oj=t)}O3(t,i){Fi.oLt(NJ,"Marking gap from "+t+" to "+i+"."),this.M3.$J(t,i),this.Srt&&this.Srt.O3(t,i)}F3(t,i){Fi.oLt(NJ,"Removing gap from "+t+" to "+i+"."),this.M3.t$(t,i),this.Srt&&this.Srt.F3(t,i)}cZt(t){this.Srt=t,this.Srt.Oj=this.Hj,this.Srt.Dj=this.Gj;const i=this.M3.QJ;for(let t=0;t<i.V;t++)this.Srt.O3(i.Tn(t),i.An(t));this.Srt.wn(Ws.dJ,this.Rs),this.dZt.Hy(t)}lZt(t){return $s(this.dZt.Yy,t)}async W2(t,i,s){const e=await this.lZt(s);await e.W2(t,i,s)}async V3(){const t=await this.lZt();await t.V3()}async X2(t,i,s){const e=await this.lZt(s);await e.X2(t,i,s)}async vS(t,i,s){const e=await this.lZt(s);await e.vS(t,i,s)}async n3(t,i){const s=await this.lZt();await s.n3(t,i)}SJ(t){return!!this.Srt&&this.Srt.SJ(t)}async kJ(t){const i=await this.lZt();await i.kJ(t)}kn(){var t;this.Vo(),null==(t=this.Srt)||t.mn(Ws.dJ,this.Rs),this.Srt=void 0}constructor(t,i){super(),this.Ym=void 0,this.fZt=void 0,this.ZS=void 0,this.Srt=void 0,this.dZt=void 0,this.Gj=void 0,this.Hj=void 0,this.M3=void 0,this.Ym=t,this.fZt=i,this.ZS=void 0,this.Srt=void 0,this.dZt=new gs,this.Gj=20,this.Hj=30,this.M3=new CD}},BJ="LazyMediaSource",MJ=class{get Cd(){return{Kp:xt.yW,D5:[],aX:[]}}get Y3(){return this.vZt}get K3(){return this._Zt}get IR(){return this.eX?this.eX.IR:ZT.tL()}get ct(){return this.eX?this.eX.ct:this.qb}get UJ(){return!!this.eX&&this.eX.UJ}get kx(){return this.eX?this.eX.kx:ZT.iL()}x5(t){this.qb=t,this.eX&&this.eX.x5(t)}P3(){this.Ast=!0,this.eX&&this.eX.P3()}y3(){this.Ast=!1,this.eX&&this.eX.y3()}N5(t,i,s,e){this.gZt=t,this.mZt=i,this.pZt=Boolean(s),this.wZt=Boolean(e),this.eX&&this.eX.N5(t,i,s,e)}SJ(t){return this.eX?this.eX.SJ(t):FL(this,t)}async kJ(t){if(!this.SJ(t))throw new m("LazyMediaSource - Unable to reconfigure MediaSource.");if(this.eX)await this.eX.kJ(t);else{var i,s;this.SL.R7();const e=await this.SL.Un(t);S(this.qb)||e.x5(this.qb),this.Ast&&e.P3(),e.N5(this.gZt,this.mZt,this.pZt,this.wZt),Fi.oLt(BJ,"The MediaSource has been loaded."),this.yZt=!0,this.eX=e,null==(i=this.vZt)||i.cZt(this.eX.Y3),null==(s=this._Zt)||s.cZt(this.eX.K3),this.bZt.Hy(e),this.SL.x7()}}RJ(t){this.eX.RJ(t)}async Zg(){var t,i;null==(t=this.vZt)||t.kn(),null==(i=this._Zt)||i.kn(),this.eX&&await this.eX.Zg()}constructor(t,i,s){this.SL=void 0,this.vZt=void 0,this._Zt=void 0,this.bZt=void 0,this.eX=void 0,this.yZt=void 0,this.qb=void 0,this.Ast=void 0,this.gZt=void 0,this.mZt=void 0,this.pZt=void 0,this.wZt=void 0,this.SL=t,this.vZt=void 0,this._Zt=void 0,this.bZt=new gs,this.eX=void 0,this.yZt=!1,this.qb=NaN,this.Ast=!1,this.gZt=0,this.mZt=1/0,this.pZt=!1,this.wZt=!1,i&&(Fi.oLt(BJ,"Created lazy media buffer for audio."),this.vZt=new DJ(Mo.Ck,this)),s&&(Fi.oLt(BJ,"Created lazy media buffer for video."),this._Zt=new DJ(Mo.Nk,this))}};r();var LJ=class{get Kp(){return this.Ym}get IR(){return this.Srt.IR.Dy(-this.HV).Mn(ZT.iL())}get B3(){return this.Srt.B3.Dy(-this.HV).Mn(ZT.iL())}AZt(t,i){return this.Srt===t&&this.HV===i}async X2(t,i){if(this.Srt.Cd.GT!==t.KXt.lrt){const s={GT:t.KXt.lrt};if(!this.Srt.SJ(s))throw new EB(this.Srt.Cd.GT,t.KXt.lrt);await this.Srt.kJ(s),Ko(i)}await this.Srt.X2(t.hk,{t2:t.OMt.qI},i)}async W2(t,i){Ko(i),Fi.nD("HlsMediaBuffer","Got media data, appending to "+this.Ym+" MediaBuffer: "+dl(t.nUt.eyt));const s=t.cUt+this.HV,e=t.dUt+this.HV,n={kst:t.kO+this.HV,ct:t.ct,bV:t.bV+this.HV,t2:t.OMt.qI};void 0!==t.hk&&await this.Srt.W2(t.hk,n,i),this.SZt(s,e)}SZt(t,i){const s=this.Srt.IR,e=new ZT([t,i]).FM(s);for(let t=0;t<e.V;t++)this.Srt.O3(e.Tn(t),e.An(t));for(let t=0;t<s.V;t++)this.Srt.F3(s.Tn(t),s.An(t))}O3(t,i){this.Srt.O3(t+this.HV,i+this.HV)}F3(t,i){this.Srt.F3(t+this.HV,i+this.HV)}constructor(t,i,s){this.Ym=void 0,this.Srt=void 0,this.HV=void 0,this.Ym=t,this.Srt=i,this.HV=s}};r();var OJ=1e-6,FJ=class{get IR(){return this.LRt}get B3(){return this.ORt}AZt(t){return this.TZt===t}async X2(t,i){const s=t.hk.hk;if(this.kZt(s),this.TZt.Kp===hr.TTML){this.UVt.vVt(t.SOt)||await $s(this.UVt.gVt(t.SOt),i);const e=this.EZt(s,t.SOt);for(const t of e)this.TZt.iW(t)}}async W2(t,i){if(void 0===t.hk)return;const s=t.kO,e=s+t.ct;this.LRt=this.LRt.LM(ZT.$M(s,e)).MM(OJ),this.O3(t.cUt,t.dUt),this.F3(s,e),this.UVt.vVt(t.SOt)||await $s(this.UVt.gVt(t.SOt),i),this.G2(t.hk.hk,t.SOt,t.nUt)}G2(t,i,s){let e;this.kZt(t),e=this.TZt.Kp===hr.WEBVTT?this.RZt(t,s):this.EZt(t,i);for(const t of e)this.TZt.iW(t)}RZt(t,i){const s=GE(t),e=s.L;var n;const r=null!=(n=s.TV)?n:{kV:Xa.pF,bh:Xa.pF};for(const t of e){const s=Xa.iV(t.kO).dF(r.bh).dO(r.kV),e=this.UVt.SVt(s,i).tF(),n=e+(t.EO-t.kO);t.HO(e,n)}return e}EZt(t,i){const s=this.UVt.AVt(i).tF();return RR(t,this.TZt,{wV:0,yV:1/0,bV:s},zy)}kZt(t){this.TZt.Kp===hr.DEFAULT&&(this.TZt.Kp=this.xZt(t)?hr.WEBVTT:hr.TTML)}xZt(t){return iR(hp(wu(xh(t),0,_.min(t.byteLength,16)),new J))}O3(t,i){this.ORt=this.ORt.LM(ZT.$M(t,i)).MM(OJ)}F3(t,i){this.ORt=this.ORt.FM(ZT.$M(t,i))}constructor(t,i){this.TZt=void 0,this.UVt=void 0,this.LRt=ZT.tL(),this.ORt=ZT.tL(),this.TZt=t,this.UVt=i}};function VJ(t){if(t.Kp!==Xt.yLt||void 0===t.NMt)return;const i=t.NMt.match(/^CC([1-4])$/);if(i)return Number(i[1]);const s=t.NMt.match(/^SERVICE([\d+])$/);return s?Number(s[1]):void 0}r(),r(),r();var WJ=class{vLt(t){var i,s,e;return null==(e=null==(s=this.eX)||null==(i=s.K3)?void 0:i.SJ(t))||e}_Lt(t){var i,s,e;return null==(e=null==(s=this.eX)||null==(i=s.Y3)?void 0:i.SJ(t))||e}constructor(t){this.eX=void 0,this.eX=t}};r();function UJ(t,i,s,e){void 0===e&&(e=Ak.maximumBackoff);const n=function(t,i){if(void 0===i)return t;const s=i.preferredVideoCodecs,e=i.preferredAudioCodecs;if(void 0!==s){let i;for(const n of s){const s=t.filter(t=>t.lrt&&t.lrt.bCt&&kB(t.lrt.bCt,n));if(0===s.length)continue;if(void 0===e)return s;void 0===i&&(i=s);const r=GJ(s,e);if(void 0!==r)return r}if(void 0!==i)return i}if(void 0!==e){const i=GJ(t,e);if(void 0!==i)return i}return t}(t,i),r=XJ(n,e),h=r.length>0?r:n;switch(s.Mj.type){case lc.BANDWIDTH:{const t=s.Wj,i=h.filter(i=>i.EG<=t);if(i.length>0)return af(i,t=>t.EG)}case lc.PERFORMANCE:return ho(h,t=>t.EG);case lc.QUALITY:return af(h,t=>t.EG)}}function GJ(t,i){for(const s of i){const i=t.filter(t=>t.lrt&&t.lrt.wCt&&kB(t.lrt.wCt,s));if(0!==i.length)return i}}function XJ(t,i){return t.filter(t=>ZJ(t,i))}function ZJ(t,i){const s=i+2e3,e=0===t.OOt.length||t.OOt.some(t=>t.RMt.HFt<Zd.Mg()-s),n=0===t.LOt.length||t.LOt.some(t=>t.RMt.HFt<Zd.Mg()-s);return e&&n}function HJ(t,i){return void 0===i&&(i=!1),function(s,e){void 0===e&&(e="*");let n=YJ(s,"tag");const r=YJ(null==e?"*":e,"range"),h=[];let o,a,u,c=-1;for(;++c<r.length;)if(o=r[c].toLowerCase(),i||"*"!==o){for(a=-1,u=[];++a<n.length;)if(t(n[a].toLowerCase(),o)){if(!i)return n[a];h.push(n[a])}else u.push(n[a]);n=u}return i?h:void 0}}r(),r();HJ((t,i)=>"*"===i||t===i||Vh(t,i+"-"),!0),HJ((t,i)=>{const s=t.split("-"),e=i.split("-");let n=0,r=0;if("*"!==e[r]&&s[n]!==e[r])return!1;for(n++,r++;r<e.length;)if("*"!==e[r]){if(!s[n])return!1;if(s[n]!==e[r]){if(1===s[n].length)return!1;n++}else n++,r++}else r++;return!0},!0);var zJ=HJ((t,i)=>{let s,e=i;for(;;){if("*"===e||t===e)return!0;if(s=e.lastIndexOf("-"),s<0)return!1;"-"===e.charAt(s-2)&&(s-=2),e=e.slice(0,s)}});function YJ(t,i){const s=t&&"string"==typeof t?[t]:t;if(!s||"object"!=typeof s||!("length"in s))throw new m("Invalid "+i+" `"+s+"`, expected non-empty string");return s}function KJ(t){const i=me(t,t=>t.xMt),s=t.filter(t=>t.IMt),e=Zd.Bp,n=s.map(t=>t.bs).filter(Y),r=zJ(n,e);return r?me(s,t=>t.bs===r):i}function qJ(t){var i;return null!=(i=KJ(t))?i:t[0]}r();var jJ=class extends ko{IZt(t){const i=this.JV.sI(D.OV,t.l,t.l,t.bs,t.xMt,void 0,void 0,t.BMt.map(ij).filter(Y));this.PZt.set(t.qI,i),this.tt(i)}GOt(t){const i=this.PZt.get(t.qI);i&&(this.PZt.delete(t.qI),this.JV.sW(i))}KV(t){const i=this.CZt(t);i&&(_e(this.VMt.NZt(i)),this.PZt.forEach(i=>{i!==t&&(i.Hk=Z.Nh)}))}qV(t){const i=this.CZt(t);i&&this.VMt.DZt&&this.VMt.DZt===i&&_e(this.VMt.NZt(void 0))}BZt(t){return this.PZt.get(t.qI)}CZt(t){const i=this.VMt.FMt;if(i)return me(i.FOt,i=>t===this.BZt(i))}$V(t,i,s){const e=sx(t,i,s);return this.PZt.forEach((i,s)=>{i===t&&this.PZt.set(s,e)}),e}async hr(){await super.hr(),this.PZt.clear()}constructor(t,i){super(i),this.VMt=void 0,this.PZt=Zs(),this.VMt=t}},Eh="LLHLSPlayer",QJ=[Vo.wM,Vo.yM,Vo.bM,Vo.bI],JJ=[d.Kw,d.Ew,d.Mw,d.Dw],$J=[d.Uw,d.Gw,d.Zw,d.Hw,d.uy,d.$w,d.iy],t$=class extends fr{get NL(){var t;if(this.ct!==1/0)return;const i=this.NR;if(i){return(Date.now()-i.getTime())/1e3}const s=null==(t=this.VMt)?void 0:t.MZt;return s?s-this.OR:void 0}get LZt(){const t=this.OZt;for(const i of t){if(!i.RMt.kOt)return!1;const t=rf(i.RMt.ict,-1);if(t&&t.SOt!==this.FZt)return!1}return!0}get FMt(){var t;return null==(t=this.VMt)?void 0:t.FMt}get tLt(){var t;return null==(t=this.VMt)?void 0:t.tLt}get sLt(){var t;return null==(t=this.VMt)?void 0:t.sLt}get DZt(){var t;return null==(t=this.VMt)?void 0:t.DZt}get OZt(){return this.VMt?this.VMt.OZt:[]}get ht(){return this.qL}get IR(){let t=this.SL.IR;return void 0!==this.VMt&&(t=t.Dy(-this.VMt.bV).Mn(ZT.iL())),t._s()}get NR(){if(this.FMt){const t=this.OR;return this.FMt.WOt(t)}}set NR(t){if(!t||!this.FMt)return;const i=this.FMt.UOt(t);void 0!==i&&this.WR(i,{VZt:!1,WZt:!0})}get bt(){var t;return null==(t=this.VMt)?void 0:t.Mc}get OR(){var t;return null!=(t=this.UZt)?t:this.GZt(this.VMt)}set OR(t){this.WR(t)}WR(t,i){var s,e,n,r;Fi.nD(Eh,"Seeking to "+t+" s.");const h={VZt:null!=(e=null==i?void 0:i.VZt)?e:t===1/0,WZt:null==(n=null==i?void 0:i.WZt)||n,vOt:null!=(r=null==i?void 0:i.vOt)&&r};this.UZt=t,this.XZt=h,this.ZZt=!0,this.Nkt=!0,null==(s=this.qG)||s.Kx(),this.So(new ul(t)),this._8.Jg(),this.HZt&&(Zd.Lg(this.zZt),h.WZt?this.zZt=Zd.Og(()=>this.YZt(t,h),50):this.YZt(t,h))}YZt(t,i){Zd.Lg(this.zZt);const s=[this.Cmt,this.KZt,this.g8].filter(Y);this._8=new ui,this._8.$g(this.hW.jg),this.g8=Ce(this.m8(s,t,i,this._8.jg),this._8).catch(this.qZt)}get ct(){var t,i;if(void 0===this.jZt&&this.LZt){const t=this.SL.ct;if(!S(t))return this.QZt(this.VMt,t)}return null!=(i=null==(t=this.VMt)?void 0:t.ct)?i:NaN}get GR(){if(!this.LZt)return!1;if(this.Rx&&void 0!==this.VMt&&this.HZt){const t=this.OR,i=this.VMt.JZt;return isFinite(i)&&t>=i}return this.SL.GR||this.$Zt()}get lt(){return this.$G}get HR(){return this.tX}get YR(){}get qR(){}get QR(){return!1}get $R(){var t,i;return Jr({},{tO:0,iO:0,sO:0,eO:0,nO:0,rO:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}},this.SL.tx(),{nO:null!=(i=null==(t=this.VMt)?void 0:t.nO)?i:0,eO:this.kZ.Aj.EG})}get Br(){var t;return null==(t=this.VMt)?void 0:t.Br}get tHt(){var t;return null==(t=this.VMt)?void 0:t.tHt}get ix(){return this.SL.ix}set ix(t){this.SL.ix=t}get hx(){var t,i;return null==(i=null==(t=this.VMt)?void 0:t.hx)||i}get ux(){return this.SL.ux}get vx(){return this.SL.vx}set vx(t){Fi.nD(Eh,"Setting playback rate to "+t+"."),this.SL.vx=t}get mx(){return this.dkt._s()}get dkt(){let t=this.SL.mx;return void 0!==this.VMt&&(t=t.Dy(-this.VMt.bV).Mn(ZT.iL())),t}get yx(){return this.sX}set yx(t){this.sX!==t&&(this.sX=t,this.iHt())}get Sx(){var t;let i=this.SL.Sx;return(null==(t=this.VMt)?void 0:t.sHt)&&(i=_.max(pi.Qn,i)),i}get RFt(){var t,i;return null!=(i=null==(t=this.VMt)?void 0:t.RFt)?i:ZT.tL()}get kx(){return this.nkt._s()}get nkt(){var t,i;let s=null!=(i=null==(t=this.VMt)?void 0:t.kx)?i:ZT.tL();if(0===s.V)return s;if(this.eX&&this.LZt&&this.eX.ct!==1/0&&(s=new ZT([s.Tn(0),this.QZt(this.VMt,this.eX.ct)])),this.VMt&&!this.VMt.kOt){const t=this.dkt,i=s.An(s.V-1);if(t.V>0&&t.An(t.V-1)>i){let e=t.An(t.V-1);const n=this.VMt.RFt;n&&n.V>0&&(e=_.min(e,n.An(n.V-1))),s=s.LM(new ZT([i,e]))}}return s}get Rx(){var t;return null!=(t=this.ZZt)?t:this.SL.Rx}get nX(){}get nt(){return this.Gl}get rt(){return this.JL}get Nx(){var t,i;return this.SL.Nx||(null==(i=this.FMt)||null==(t=i.aCt)?void 0:t.Mi)||0}get Mx(){var t,i;return this.SL.Mx||(null==(i=this.FMt)||null==(t=i.aCt)?void 0:t.Ti)||0}get Ox(){return this.SL.Ox}set Ox(t){Fi.nD(Eh,"Setting volume to "+t+"."),this.SL.Ox=t}get Wx(){return this.EZ}get Gx(){return!1}set Gx(t){}get hX(){return this.oX}qx(){return!1}Xx(){return this.SL.Ma}Aa(){return this.SL.pX}sI(t){var i;const s=this.SL.wX(t);var e;return s.bV=null!=(e=null==(i=this.VMt)?void 0:i.bV)?e:0,this.VEt.tt(s),s}we(){Fi.nD(Eh,"Hiding the player."),this.SL.we()}zx(){var t;Fi.nD(Eh,"Pausing the player."),this.SL.zx(),(null==(t=this.qG)?void 0:t.sL)&&this.qG.Kx()}async Yx(){this.s8=!0;const t=this.SL.Yx();if(this.GR){const t=this.nkt;t.V>0&&this.WR(t.Tn(0),{WZt:!1})}this.HZt||await this.iHt(),this.BTt(),await t,this.Dkt()}BTt(){if(!this.ekt()){var t;const i=null==(t=this.FMt)?void 0:t.RMt;if(null==i?void 0:i.kOt){let t=!0,s=0;const e=i.Tn;if(!this.Nkt&&e&&(t=!e.vOt,s=e.fOt,s<0)){const t=i.RFt;s+=t.An(t.V-1)}this.YZt(s,{VZt:t})}else this.YZt(1/0,{VZt:!0})}this.eHt()&&this.YZt(1/0,{VZt:!0})}ekt(){var t;const i=this.nkt;if(0===i.V)return!0;const s=this.OR,e=null==(t=this.VMt)?void 0:t.nHt,n=null==e?void 0:e.VM(s);return(n&&n>0?e.An(n):s)>=i.Tn(0)}eHt(){const t=this.OR;return s$(t,this.tLt)||s$(t,this.sLt)}gEt(){this.$G=void 0,this.tX=void 0}XX(t){this.$G||(_e(this.hr()),this.$G=xs(t),this.tX=t,this.So(new $e(t)))}be(){Fi.nD(Eh,"Showing the player."),this.SL.be()}jx(){throw new m("Not implemented")}Qx(){throw new m("Not implemented")}Jx(){}$x(){this.HZt&&_e(this.rHt({$x:!0}))}async Ta(t,i,s){const e={stack:[],error:void 0,hasError:!1};try{if(Fi.nD(Eh,"Setting the player source to "+t.src+"."),this.gEt(),this.VMt&&(await this.hr(),Ko(s)),ec(t))return;const r=Zr(e,ui.nm([s]),!1);var n;if(this.lX.NG(t.contentProtection),void 0!==this.jZt&&this.jZt.Mc===t)this.VMt=this.jZt,this.VMt.mn($J,this.hHt),this.hW=this.oHt,this.hW.$g(r.jg),this.oHt=new ui,this.aHt=void 0,null==(n=this.uHt)||n.Jg(),this.uHt=void 0,this.jZt=void 0,this.cHt=!1,this.dHt!==this.VMt&&(this.dHt=void 0),this.VMt.lHt(this.SL);else void 0!==this.jZt&&(await this.Px(),await this.fHt()),this.hW=ui.nm([r.jg]),this.VMt=this.vHt(t,i,void 0,this.SL);this.VMt.wn($J,this.Rs),this.VMt.wn(Xq.kMt,this._Ht),this.qL.MI=this.VMt.ht,this.JL.MI=this.VMt.rt,this.gHt.MI=this.VMt.nt;const h=this.VMt.mHt;h&&(this.qG=new hz(this,this.SL,h),this.qG.Rt=!0,this.EZ.Ea(this.qG)),Ue(this.Gl),this.pHt(),this.kkt(),this.wHt.forEach(this.Rs),this.wHt=[],this.iHt(),r.Zg()}catch(t){e.error=t,e.hasError=!0}finally{hs(e)}}async Ix(t,i,s,e){Ko(e),void 0!==this.jZt&&await this.Px(),Ko(e),this.jZt=this.vHt(t,i,s,void 0),this.jZt.wn($J,this.hHt)}async Px(){var t;void 0!==this.jZt&&(this.oHt.Jg(),null==(t=this.uHt)||t.Jg(),this.uHt=void 0,void 0!==this.aHt&&(await this.aHt.catch(ol),this.aHt=void 0),await this.jZt.Zg(),this.oHt=new ui,this.dHt===this.jZt&&(this.dHt=void 0),this.jZt=void 0,this.cHt=!1,this.wHt=[])}vHt(t,i,s,e){return null!=this.yHt||(this.yHt=this.bHt.Rst()),new i$(this,t,i,this.rW,this.kZ,this.AHt,this.iut,this.SHt,this.gUt,this.yHt,this.vdt,s,e)}iHt(){return this.Cmt=this.THt(this.Cmt,this.hW.jg).catch(this.mpt),this.Cmt}async THt(t,i){if(t&&(await t,Ko(i)),!this.VMt)return;const s=this.sX;s===hl.LL||this.s8?(await this.kHt(i),await this.EHt(i)):s===hl.WV&&await this.kHt(i)}async kHt(t){Ko(t),void 0===this.VMt||this.VMt.sHt||(await this.VMt.kHt(t),this.kX.UW(),this.pHt())}pHt(){var t;if(this.qG)return;const i=null==(t=this.VMt)?void 0:t.mHt;i&&(this.qG=new hz(this,this.SL,i),this.EZ.Ea(this.qG))}get RHt(){return this.HZt}async EHt(t){Ko(t),this.HZt||(this.HZt=!0,await this.VMt.rHt(this.tLt,this.sLt,this.DZt,{xHt:!0}))}IHt(){const t=this.jZt;return void 0===t?Promise.resolve():(0===t.bV&&(t.bV=this.VMt.bV+this.VMt.ct),null!=this.uHt||(this.uHt=new gs),void 0===this.aHt&&(this.aHt=t.kHt(this.oHt.jg),this.uHt.$g(this.aHt)),this.uHt.Yy)}PHt(){var t;return(null!=(t=this.uHt)?t:this.uHt=new gs).Yy}GZt(t){return this.QZt(t,this.SL.OR)}QZt(t,i){let s=i;return t===this.VMt&&void 0!==this.jZt&&this.jZt.bV>0&&(s=_.min(s,this.jZt.bV)),void 0!==t&&(s=_.max(0,s-t.bV)),s}$Zt(){if(void 0===this.jZt||0===this.jZt.bV)return!1;if(!this.cHt)return!1;return this.SL.OR+.25>=this.jZt.bV}get CHt(){return void 0===this.VMt?[]:void 0===this.jZt?this.VMt.NHt:this.VMt.NHt.concat(this.jZt.NHt)}DHt(){var t,i;return{Ti:this.SL.Ti,Mi:this.SL.Mi,fLt:TK(this.SL),Zct:null==(i=this.bt)||null==(t=i.abr)?void 0:t.restrictToPlayerSize}}BHt(){return new WJ(this.eX)}rHt(t){void 0===t&&(t={});const i={HMt:t.HMt||!1,YMt:t.YMt||!1,zMt:t.zMt||!1,$x:t.$x||!1,xHt:t.xHt||!1},s=[this.KZt,this.g8].filter(Y);return this._8.Jg(),this._8=new ui,this._8.$g(this.hW.jg),this.MHt.Jg(),this.MHt=new ui,this.MHt.$g(this.hW.jg),this.KZt=Ce(this.LHt(s,i,this.MHt.jg),this.MHt).catch(this.qZt),this.KZt}async LHt(t,i,s){var e,n,r;if(!this.HZt)return void await this.VMt.OHt(s);await Promise.all(t.map(t=>t.catch(ol))),this.FHt(),await this.VHt(s),await this.WHt(),await this.UHt(i.YMt,i.zMt),Ko(s);const h=await this.VMt.GHt();Ko(s);const o=await this.XHt(h,i.$x,s),a=null==(e=this.eX)?void 0:e.Y3,u=null==(n=this.eX)?void 0:n.K3;if(this.VMt.ZHt(void 0!==a,void 0!==u,i.HMt||o,i.YMt,i.zMt),this.VMt.HHt(i.HMt),void 0!==this.jZt&&(this.jZt.ZHt(void 0!==a,void 0!==u,i.HMt||o,i.YMt,i.zMt),this.jZt.HHt(i.HMt)),this.VMt.$Xt(a,u),void 0!==this.jZt){const t=await this.jZt.GHt();t&&this.eX&&this.eX.SJ(t)?(this.jZt.$Xt(a,u),this.cHt=!0):(this.jZt.$Xt(void 0,void 0),this.cHt=!1)}this.zHt(),Ko(s);try{var c;await Promise.all([this.VMt.YHt(s),null==(c=this.jZt)?void 0:c.YHt(s)].filter(Y))}catch(t){Ui(t)}if(Ko(s),this.P5(),this.VMt.nVt(),null==(r=this.jZt)||r.nVt(),void 0===this.UZt){if(!this.Nkt){const t=this.VMt.KHt;if(t)return void this.YZt(t.HF,{VZt:t.VZt});if(this.VMt.bV>0)return void this.YZt(0,{VZt:!1})}this.CHt.length>0&&this.qHt()}else this.YZt(this.UZt,this.XZt)}async XHt(t,i,s){if(!i&&this.eX){if(!t)return!1;if(this.eX.SJ(t))return await this.VHt(s),await this.eX.kJ(t),!1}for(const t of this.VMt.NHt)t.qXt.forEach(t=>t.Jg());this.SL.R7();try{let i;if(this.eX&&await this.SL.hr(),t)i=await this.SL.Un(t);else{const t=void 0!==this.tLt,s=void 0!==this.sLt;i=new MJ(this.SL,t,s)}this.jHt(i)}finally{this.SL.x7()}return!0}jHt(t){this.eX=t,this.P5(),this.ATt(),this.STt()}P5(){var t,i;const s=this.eX,e=void 0!==this.jZt&&this.cHt?this.jZt:this.VMt;if(s&&void 0!==e&&(e!==this.dHt||S(s.ct))){var n;e!==this.dHt&&s.y3();const t=(null!=(n=e.QHt)?n:NaN)+e.bV;t>0&&s.x5(t),this.dHt=e}null==(t=this.VMt)||t.nVt(),null==(i=this.jZt)||i.nVt()}async UHt(t,i){if(!this.eX)return;const s=[];t&&this.eX.Y3&&s.push(this.eX.Y3.vS(0,1/0)),i&&this.eX.K3&&s.push(this.eX.K3.vS(0,1/0)),await Promise.all(s)}ATt(){const t=this.eX;t&&(t.K3&&(t.K3.Dj=this.kZ.Xj),t.Y3&&(t.Y3.Dj=this.kZ.Xj))}STt(){const t=this.eX;t&&(t.K3&&(t.K3.Oj=this.kZ.Oj),t.Y3&&(t.Y3.Oj=this.kZ.Oj))}zHt(){var t,i,s,e;const n=void 0!==(null==(t=this.eX)?void 0:t.Y3),r=void 0!==(null==(i=this.eX)?void 0:i.K3);null==(s=this.VMt)||s.zHt(n,r),null==(e=this.jZt)||e.zHt(n,r)}async m8(t,i,s,e){await Promise.all(t.map(t=>t.catch(ol))),Ko(e),await this.WHt(),Ko(e),this.UZt=void 0,this.ZZt=void 0,this.Nkt=!0;const n=(s.vOt?this.RFt:this.nkt).CM(i+this.VMt.bV),r=this.SL.pw(d.Qw,e);this.SL.By(n,s.VZt),this.HZt&&this.VMt.NHt.length>0&&(this.Br.mM.LVt(),this.JHt(this.OR),this.qHt()),await r,this.Dkt()}Dkt(){const t=this.qG;if(void 0===t)return;const i=this.NL;if(this.ux||this.Rx||void 0===i)return;i<this.EZ.Cd.maximumOffset?t.Tn():t.Kx()}JHt(t){var i,s;const e=null!=(s=null==(i=this.VMt)?void 0:i.NHt)?s:[];let n=!1;for(const i of e)i.wGt(t)||(i.aZt(),i.tZt.gXt(),n=!0),i.hZt(t)||(i.uZt(),i.tZt.mXt(),n=!0);if(void 0!==this.jZt&&n){const t=this.jZt.NHt;for(const i of t)i.Jg()}}FHt(){for(const t of this.CHt)t.Jg()}WHt(){return Promise.all([this.KNt(),this.$Ht(),this.tzt()])}qHt(){this.YNt(),this.izt(),this.szt()}async ezt(){this.HZt&&this.CHt.length>0&&(this.CHt.forEach(t=>t.aZt()),await this.KNt(),this.YNt(),this.CHt.forEach(t=>t.QXt.EGt()))}YNt(){if(this.nzt)return;const t=()=>{this.nzt=void 0};this.rzt=new ui,this.rzt.$g(this.hW.jg),this.nzt=Ce(this.hzt(this.rzt.jg),this.rzt).catch(this.qZt).then(t,t)}async KNt(){var t;null==(t=this.rzt)||t.Jg();const i=this.nzt;this.nzt=void 0,i&&await i}async hzt(t){Ko(t),await this.ozt(this.VMt,t),Ko(t),void 0!==this.jZt&&(await $s(this.IHt(),t),Ko(t),await this.ozt(this.jZt,t))}async ozt(t,i){Ko(i);const s=t.NHt;for(;;){const e={stack:[],error:void 0,hasError:!1};try{const n=[],r=_.max(0,this.SL.OR-t.bV);for(const t of s){const i=t.QXt,s=t.rdt(r);if(i.JIt)n.push(i.jWt());else if(t.oZt(r,s,this.kZ.Xj)||i.fGt){const e=i.OMt.RMt,r=i.yGt(s);if(void 0===r){if(e.kOt)continue;const t=e.ict;t.length&&t[0].kO>s&&(this.OR=1/0),i.IGt(),i.SGt(s)}else{const[s,e]=r;i.gat(s,e,t.DWt),t.JXt.MXt(s,e)}n.push(i.jWt())}}const h=Zr(e,ui.nm([i]),!1);if(0===n.length){s.every(t=>t.QXt.kPt)||n.push(this.SL.pw(d.vy,h.jg));for(const t of s)void 0!==t.QXt.vGt()&&n.push(t.JXt.pw([gl.bXt,gl.kXt],h.jg));if(0===n.length)break}await $s(Promise.race(n),h.jg)}catch(t){e.error=t,e.hasError=!0}finally{hs(e)}}}izt(){if(this.azt)return;const t=()=>{this.azt=void 0};this.uzt=new ui,this.uzt.$g(this.hW.jg),this.azt=Ce(this.czt(this.uzt.jg),this.uzt).catch(this.qZt).then(t,t)}async $Ht(){var t;null==(t=this.uzt)||t.Jg();const i=this.azt;this.azt=void 0,i&&await i}async czt(t){Ko(t);const i=this.CHt;for(;;){const s=[];for(const t of i){const i=t.QXt,e=t.JXt;if(e.JIt)s.push(e.jWt());else{const t=i.vGt();t?"Jat"===t.Kp?(e.VXt(t),s.push(e.jWt())):"yOt"===t.Kp?(e.LXt(t),s.push(e.jWt())):"GGt"===t.Kp&&(e.UXt(t),s.push(e.jWt())):s.push(i.RGt())}}if(0===s.length)break;await $s(Promise.race(s),t)}}szt(){if(this.dzt)return;this.lzt=new ui,this.lzt.$g(this.hW.jg);const t=()=>{this.dzt=void 0};this.dzt=Ce(this.fzt(this.lzt.jg),this.lzt).catch(this.qZt).then(t,t)}async tzt(){var t;null==(t=this.lzt)||t.Jg();const i=this.dzt;this.dzt=void 0,i&&await i}async fzt(t){Ko(t);let i=await this.vzt(this.VMt,t);void 0!==this.jZt&&this.cHt&&i&&(Ko(t),await $s(this.PHt(),t),Ko(t),this.P5(),i=await this.vzt(this.jZt,t)),i?this.eX.P3():this.eX.y3()}async vzt(t,i){for(;;){const s=t.NHt;s.forEach(t=>t.vat());const e=_.max(0,this.SL.OR-t.bV),n=[],r=[];for(const t of s){const i=t.JXt;for(const s of t.qXt){const t=KQ(s)?n:r;if(s.JIt)t.push(s.jWt());else if(!s.QWt(e)){const e=i.zXt(s.Kp);e?"Jat"===e.Kp&&e.SOt===this.FZt?(s.udt(e),t.push(s.jWt())):"OPt"===e.Kp&&e.SOt===this.FZt?(s.X2(e),t.push(s.jWt())):"GGt"===e.Kp&&(s.uUt(e),t.push(s.jWt())):r.push(i.YXt(s.Kp))}}}if(0===n.length){if(await this._zt(t,s,e,i))continue}if(0===n.length&&0===r.length){return s.every(t=>t.qXt.length>0&&t.qXt.every(t=>t.QWt(e)))}await $s(Promise.race([...n,...r]),i)}}async _zt(t,i,s,e){const n=[],r=[];for(const t of i){const i=t.rdt(s);for(const e of t.qXt){if(!KQ(e))continue;const h=t.JXt.zXt(e.Kp);if(void 0!==h){if(h.SOt===this.FZt)return!1;n.push(h)}else{if(t.JIt||t.oZt(s,i,this.kZ.Xj)||!e.JWt(s,i))return!1;{const t=e.GWt.DWt;void 0!==t&&r.push(t)}}}}if(0===n.length)return!1;const h=af(n,t=>t.SOt).SOt;if(n.every(t=>"OPt"===t.Kp&&t.SOt===h)){const i=ho(n,t=>t.kO).kO+t.bV,s=[...n,...r],h=await this.gzt(s);this.mzt(h)?(Fi.oLt(sj,"Seamless switch from",this.eX.Cd,"to",h),await this.eX.kJ(h),Fi.oLt(sj,"Seamless switch complete.")):await this.pzt(t,i,h,e),this.FZt=n[0].SOt}else for(const t of i)for(const i of t.qXt){let s=t.JXt.zXt(i.Kp);for(;void 0!==s&&("OPt"!==s.Kp||s.SOt!==h);)Fi.oLt(sj,"Removing append for other discontinuity, expecting "+h,s),t.JXt.iUt(s),s=t.JXt.zXt(i.Kp)}return!0}mzt(t){var i,s;switch(null!=(s=null==(i=this.bt)?void 0:i.seamlessSwitchStrategy)?s:Uh.LL){case Uh.OL:return!0;case Uh.FL:return!1;default:return this.eX.SJ(t)}}async gzt(t){const i=t.map(t=>t.KXt.lrt),s=i.map(t=>({GT:t})),e=[...vl(t,t=>t.KXt.FG),...this.Br.OVt],n=this.bt;let r=await Sj(n.contentProtection,i,e,this.rW,n.useCredentials);return 0===r.length&&this.eX&&this.eX.Cd.aX.length>0&&(r=this.eX.Cd.aX),{Kp:xt.yW,D5:s,aX:r,X5:n.useManagedMediaSource}}async pzt(t,i,s,e){var n,r,h;const o=this.eX,a=o.ct,u=this.SL.IR.V>0&&this.SL.OR<i;if(u)try{for(Fi.oLt(sj,"Marking end of stream and waiting for ended to switch discontinuity."),o.P3();!this.SL.GR&&this.SL.OR<i;)await this.SL.pw([d.vy,d.Nw],e)}catch(t){throw o.y3(),o.x5(a),t}Fi.oLt(sj,"Perform hard switch from",null==(n=this.eX)?void 0:n.Cd,"to",s);try{var c,l;this.SL.R7(),this.SL.OR<i&&this.SL.By(i,!0,!0),this.zHt(),await this.SL.hr();const t=await this.SL.Un(s);this.jHt(t),null==(c=t.K3)||c.O3(i-1,i),null==(l=t.Y3)||l.O3(i-1,i),this.zHt()}finally{u&&_e(this.SL.Yx()),this.SL.x7()}t.$Xt(null==(r=this.eX)?void 0:r.Y3,null==(h=this.eX)?void 0:h.K3),Fi.oLt(sj,"Hard switch complete.")}VHt(t){return $s(vr(vl(this.CHt,t=>t.qXt.map(t=>t.jWt()))),t)}kkt(){const t=this.Mx,i=this.Nx;this.LEt===t&&this.OEt===i||(this.LEt=t,this.OEt=i,this.So(new es))}async kn(){Fi.nD(Eh,"Unloading the player."),this.wzt(),this.gEt(),void 0!==this.jZt&&await this.Px(),await this.hr(),this.SL.EX=void 0,this.qL.kn(),this.JL.kn(),this.Gl.kn(),this.VEt.kn(),this.yzt.kn(),this.kX.Zg(),this.gUt.Zg(),this.yHt&&(this.yHt.Zg(),this.yHt=void 0)}async hr(){Fi.nD(Eh,"Resetting the player."),this.FZt=-1,this.hW.Jg(),this._8.Jg(),this._8=new ui,this._8.$g(this.hW.jg),this.MHt.Jg(),this.MHt=new ui,this.MHt.$g(this.hW.jg);const t=[this.Cmt,this.g8,this.KZt].filter(Y);await Promise.all(t.map(t=>t.catch(ol))),this.Cmt=void 0,this.g8=void 0,this.KZt=void 0,this.FHt(),await this.WHt(),this.VMt&&(this.qL.MI=void 0,this.JL.MI=void 0,this.gHt.MI=void 0,await this.VMt.Zg(),this.dHt===this.VMt&&(this.dHt=void 0),this.VMt=void 0),this.qG=void 0,this.EZ.hr(),this.SL.bX(),void 0!==this.jZt&&void 0!==this.eX&&void 0===this.SL.lt?await this.SL.I9():await this.fHt(),this.HZt=!1,this.UZt=void 0,this.MEt=void 0,this.LEt=0,this.OEt=0,this.ZZt=void 0,this.Nkt=!1,this.s8=!1,Zd.Lg(this.zZt),this.bzt=!1,this.yzt.hr(),this.Azt(),this.So(new Jt(this.OR,this.Sx))}async fHt(){this.eX=void 0,await this.SL.hr()}Azt(){for(const t of this.Gl.CI)t.kn();this.gHt.hr(),this.VEt.hr(),this.Gl.hr()}Szt(){this.yzt.wn(QJ,this.Rs),this.yzt.wn(Vo.SM,this.xL),this.yzt.wn(Vo.AM,this.Tzt),this.yzt.wn(Vo.pM,this.kzt),this.kZ.wn("Nj",this.GEt),this.kZ.wn("Lj",this.XEt),this.SL.wn(JJ,this.Rs),this.SL.wn(sa.ma,this.ZEt),this.SL.wn(d.Tw,this.Tkt),this.SL.wn(d.Iw,this.Ezt),this.SL.wn(d.Nw,this.Eh),this.SL.wn(d.zw,this.hBt),this.SL.wn(d.uo,this.Rzt),this.SL.wn(d.Yw,this.xzt),this.SL.wn(Vo.bI,this.WW),this.SL.wn(d.vy,this.W6),this.SL.wn(d.Jw,this.Je),this.SL.wn(d.Qw,this.PX),this.SL.wn(d.jw,this.Izt),this.SL.wn(d._y,this.Pzt)}wzt(){this.yzt.mn(QJ,this.Rs),this.yzt.mn(Vo.SM,this.xL),this.yzt.mn(Vo.AM,this.Tzt),this.yzt.mn(Vo.pM,this.kzt),this.kZ.mn("Nj",this.GEt),this.kZ.mn("Lj",this.XEt),this.SL.mn(JJ,this.Rs),this.SL.mn(sa.ma,this.ZEt),this.SL.mn(d.Tw,this.Tkt),this.SL.mn(d.Iw,this.Ezt),this.SL.mn(d.Nw,this.Eh),this.SL.mn(d.zw,this.hBt),this.SL.mn(d.uo,this.Rzt),this.SL.mn(d.Yw,this.xzt),this.SL.mn(Vo.bI,this.WW),this.SL.mn(d.vy,this.W6),this.SL.mn(d.Jw,this.Je),this.SL.mn(d.Qw,this.PX),this.SL.mn(d.jw,this.Izt),this.SL.mn(d._y,this.Pzt)}constructor(t,i,s,e,n,r,h,o){var a;super(),this.kZ=void 0,this.EZ=void 0,this.gUt=void 0,this.bHt=void 0,this.SL=void 0,this.rW=void 0,this.oX=void 0,this.lX=void 0,this.kX=void 0,this.yzt=void 0,this.SHt=void 0,this.AHt=void 0,this.iut=void 0,this.vdt=void 0,this.qL=void 0,this.JL=void 0,this.gHt=void 0,this.VEt=void 0,this.Gl=void 0,this.HZt=void 0,this.VMt=void 0,this.jZt=void 0,this.cHt=void 0,this.dHt=void 0,this.eX=void 0,this.Cmt=void 0,this.hW=void 0,this.aHt=void 0,this.uHt=void 0,this.oHt=void 0,this.yHt=void 0,this.MHt=void 0,this.KZt=void 0,this._8=void 0,this.g8=void 0,this.FZt=void 0,this.rzt=void 0,this.uzt=void 0,this.lzt=void 0,this.nzt=void 0,this.azt=void 0,this.dzt=void 0,this.sX=void 0,this.$G=void 0,this.tX=void 0,this.UZt=void 0,this.XZt=void 0,this.Nkt=void 0,this.s8=void 0,this.MEt=void 0,this.LEt=void 0,this.OEt=void 0,this.ZZt=void 0,this.zZt=void 0,this.bzt=void 0,this.wHt=void 0,this.Czt=void 0,this.qG=void 0,this.Tkt=void 0,this.ZEt=void 0,this.Ezt=void 0,this.Eh=void 0,this.hBt=void 0,this.Rzt=void 0,this.xL=void 0,this.xzt=void 0,this.WW=void 0,this.W6=void 0,this.Je=void 0,this.PX=void 0,this.Izt=void 0,this.Pzt=void 0,this.Tzt=void 0,this.kzt=void 0,this.qZt=void 0,this.mpt=void 0,this.hHt=void 0,this.GEt=void 0,this.XEt=void 0,this._Ht=void 0,this.kZ=s,this.EZ=e,this.gUt=n,this.bHt=r,this.VEt=new ou,this.HZt=!1,this.VMt=void 0,this.jZt=void 0,this.cHt=!1,this.dHt=void 0,this.eX=void 0,this.Cmt=void 0,this.hW=new ui,this.aHt=void 0,this.uHt=void 0,this.oHt=new ui,this.yHt=void 0,this.MHt=new ui,this.KZt=void 0,this._8=new ui,this.g8=void 0,this.FZt=-1,this.rzt=void 0,this.uzt=void 0,this.lzt=void 0,this.nzt=void 0,this.azt=void 0,this.dzt=void 0,this.sX=hl.oZ,this.$G=void 0,this.tX=void 0,this.UZt=void 0,this.XZt=void 0,this.Nkt=!1,this.s8=!1,this.MEt=void 0,this.LEt=0,this.OEt=0,this.ZZt=void 0,this.zZt=0,this.bzt=!1,this.wHt=[],this.Czt=void 0,this.Tkt=t=>{this.$G=xs(t.errorObject),this.tX=t.errorObject,this.Rs(t)},this.ZEt=t=>{this.XX(Gk(t.lt))},this.Ezt=()=>{var t;null==(t=this.VMt)||t.nVt();const i=this.ct;i!==this.MEt&&(this.MEt=i,this.So(new ur(this.MEt)))},this.Eh=()=>{this.GR&&this.So(new Be(this.OR))},this.hBt=()=>{this.So(new Pi(this.OR))},this.Rzt=()=>{this.BTt(),this.So(new Ts(this.OR))},this.xL=()=>{void 0!==this.Czt&&(Zd.Lg(this.Czt),this.Czt=void 0),this.So(new $n(this.OR))},this.xzt=()=>{this.So(new Ut(this.OR))},this.WW=()=>{this.So(new ca(this.OR,this.Sx))},this.W6=()=>{var t;const i=this.OR,s=this.NR;null==(t=this.VMt)||t.Nzt(i),this.So(new Tc(i,s)),!this.ux&&this.$Zt()&&(this.zx(),this.Eh())},this.Je=()=>{this.So(new ul(this.OR))},this.PX=()=>{this.So(new Wi(this.OR))},this.Izt=()=>{this.kkt()},this.Pzt=()=>{this.So(new q(this.OR,this.Ox))},this.Tzt=()=>{this.SL.Rx?this.So(new lx(this.OR)):(null!=this.Czt||(this.Czt=Zd.Og(()=>{this.VMt&&this.bzt&&_e(this.VMt.Dzt())},2500)),this.BTt(),this.So(new lx(this.OR)))},this.kzt=()=>{this.bzt=!0,this.So(new vo(this.OR,this.Sx))},this.qZt=t=>{hc(t)||tt(t)||PA(t)||(this.FHt(),_e(this.WHt()),!function(t){return t instanceof EB}(t)?this.XX(new Wt(Ne.MEDIA_LOAD_ERROR,t.message,t)):_e(this.rHt({$x:!0})))},this.mpt=t=>{if(hc(t))return;const i=t instanceof Wt?t:new Wt(Ne.MEDIA_DECODE_ERROR,t.message,t);this.XX(i)},this.hHt=t=>{this.wHt.push(t)},this.GEt=()=>{this.ATt()},this.XEt=()=>{this.STt()},this._Ht=()=>{this.kkt()},this.iut=new rz(h),this.SL=t,this.rW=i,this.oX=new nj(this.kZ.Aj),this.SHt=new rj(this.SL),this.AHt=new _j(this.kZ),this.vdt=Jr({},o.retryConfiguration,{maxRetries:null!=(a=o.retryConfiguration.maxRetries)?a:1/0}),this.qL=new Yu,this.JL=new Yu,this.gHt=new Jc,this.Gl=new Ka([this.gHt,this.VEt]),this.lX=new HI(this.rW),this.SL.EX=this.lX,this.kX=new vx(this,this.SL),this.yzt=new ts(this.kX,!0),this.Szt()}},i$=class extends fr{get FMt(){return this.Bzt}get tLt(){return this.Mzt}get sLt(){return this.Lzt}get DZt(){return this.Ozt}get OZt(){return[this.Mzt,this.Lzt].filter(Y)}get ht(){return this.qL}get Br(){return this.Okt.Br}get tHt(){return this.Okt}get RFt(){const t=this.OZt;return 0===t.length?ZT.tL():t.reduce((t,i)=>t.Mn(i.RMt.RFt),ZT.iL())}get GMt(){return this.Fzt}get OR(){return this.oa.GZt(this)}get nHt(){var t,i;const s=null==(t=this.Vzt)?void 0:t.nZt,e=null==(i=this.Wzt)?void 0:i.nZt;return s&&e?e.Mn(s):null!=e?e:s}get kx(){return this.C5}get nt(){return this.Gl}get rt(){return this.JL}get kOt(){var t,i;return(null==(t=this.Mzt)?void 0:t.RMt.kOt)||(null==(i=this.Lzt)?void 0:i.RMt.kOt)||!1}get QHt(){var t,i,s;return null!=(s=null==(t=this.Mzt)?void 0:t.RMt.ct)?s:null==(i=this.Lzt)?void 0:i.RMt.ct}get Uzt(){var t,i;const s=null==(t=this.Mzt)?void 0:t.RMt.ct,e=null==(i=this.Mzt)?void 0:i.RMt.ct;return void 0!==s&&void 0!==e?_.min(s,e):null!=s?s:e}get Gzt(){var t;const i=null==(t=this.Okt.oWt)?void 0:t.RMt.ct;if(void 0!==i)return i;const s=this.OZt;return s.length>0&&s.every(t=>function(t){return t.RMt.ict.length>0&&!t.RMt.kOt}(t))?1/0:NaN}get ct(){var t;return null!=(t=this.QHt)?t:this.Gzt}get JZt(){var t;return null!=(t=this.Uzt)?t:this.Gzt}get MZt(){const t=this.OZt;if(0===t.length||this.ct!==1/0)return;let i;for(const s of t){const t=s.RMt.kx;if(0===t.V)continue;const e=t.An(t.V-1)+s.RMt.uSt,n=s.RMt.GFt,r=e+(null!=n?n:0);(!i||i<r)&&(i=r)}return i}get KHt(){var t,i,s;if(void 0!==(null==(t=this.Xzt)?void 0:t.kO))return{HF:this.Xzt.kO,VZt:!1};if(void 0!==(null==(i=this.Xzt)?void 0:i.Zzt)){var e;const t=null==(e=this.Bzt)?void 0:e.UOt(this.Xzt.Zzt);if(void 0!==t)return{HF:t,VZt:!1}}if(null==(s=this.Bzt)?void 0:s.RMt.Tn){const t=this.Bzt.RMt,i=t.Tn;let s=i.fOt;if(i.fOt<0){const i=t.RFt;s+=i.An(i.V-1)}return{HF:s,VZt:!i.vOt}}return this.kOt?void 0:{HF:1/0,VZt:!0}}nVt(){var t,i;const s=function(t){if(0===t.length)return ZT.tL();let i=ZT.iL(),s=0;for(const e of t){const t=e.RMt.kx;t.V>0&&(i=i.Mn(t),s=_.max(s,t.Tn(0)))}if(i.V>0)return i;return ZT.JM(s)}(this.OZt);0!==s.V&&(this.C5=s,null==(t=this.pmt)||t.ZV(s.Tn(0)),null==(i=this.rDt)||i.ZV(s.Tn(0)))}Nzt(t){const i=[];if(this.Bzt)for(const s of this.NHt)for(const e of s.qXt){const s=e.$Wt(t);s&&!Ft(i,s)&&i.push(s)}pc(this.Fzt,i)||(this.Fzt=i,this.So(new UQ))}get mHt(){if(this.Mc.latencyConfiguration)return this.Mc.latencyConfiguration;const t=this.OZt;if(0===t.length)return;if(this.kOt)return;const i=_.max(...t.map(t=>{var i;return null!=(i=t.RMt.uSt)?i:0}));return{minimumOffset:.66*i,maximumOffset:2*i,targetOffset:1*i,forceSeekOffset:3*i,minimumPlaybackRate:$t,maximumPlaybackRate:Ot}}get sHt(){return this.vkt}get hx(){return this.sSt}set hx(t){this.sSt!==t&&(this.sSt=t,this.So(t?new CH:new NH))}get nO(){return this.hkt}get bV(){return this.HV}set bV(t){this.HV=t;for(const i of this.Hzt)i.bV=t}get Hzt(){return[this.zzt,this.Yzt,this.mX,this.pmt,this.yX,this.rDt].filter(Y)}fX(t){for(const i of t)i.src&&this.mX.eW(i)}Tlt(){const t=this.Br.VVt;if(0===t.length)return void Fi.aLt(Eh,"The HLSModel contains no variant streams.");var i;const s=null!=(i=me(t,t=>0!==t.LOt.length&&0!==t.OOt.length))?i:t[0],e=t.filter(t=>t!==s);for(const t of s.LOt){const i=new Wc,n=[];i.dO(new $q(s,t)),n.push(t);for(const s of e){const e=me(s.LOt,i=>Lc(i,t)&&!Kq(n,i));e&&(i.dO(new $q(s,e)),n.push(e))}this.qL.tt(new jq(this,this.kZ,this.qL,i))}for(const t of s.OOt){const i=new Wc,n=[];i.dO(new tj(s,t)),n.push(t);for(const s of e){const e=me(s.OOt,i=>Lc(i,t)&&!Kq(n,i));e&&(i.dO(new tj(s,e)),n.push(e))}this.JL.tt(new Qq(this,this.kZ,this.JL,i))}}async kHt(t){if(this.vkt)return;if(!this.Okt.eWt){try{await this.Okt.uWt(t)}catch(t){throw Ui(t),this.hx=!1,new Wt(Ne.MANIFEST_LOAD_ERROR,"The provided HLS document could not be loaded - "+t.message,t)}this.Tlt()}const i=await this.Kzt();this.qzt(i),this.jzt(i);const s=this.Qzt(i.LOt),e=this.Jzt(i.OOt),n=this.$zt(i.FOt);n||this.tYt(i.VOt),await this.rHt(s,e,n,{xHt:!0}),this.vkt=!0}jzt(t){const i=this.rDt;if(!i)return;const s=function(t){const i=[];for(const s of t){const t=VJ(s);void 0!==t&&i.push({eit:t,nit:s.bs||"",Th:s.l})}return i}(t.VOt);for(const t of s)i.Bgt(t)}async Kzt(){if(this.iYt=this.Br.VVt,!this.iYt.length)throw new Wt(Ne.MANIFEST_LOAD_ERROR,"LLHLSPlayer - Could not select initial variant stream: the HLS stream contains no variant streams.");let t=await this.sYt(this.iYt);if(0===t.length)throw new Wt(Ne.MANIFEST_LOAD_ERROR,"LLHLSPlayer - Could not select initial variant stream: the HLS stream contains no variant stream with a supported codec.");const i=await this.eYt(t);return i.length>0&&(t=i),Fi.nD(Eh,"Selecting initial active variant stream."),UJ(t,this.Mc.abr,this.kZ,this.vdt.maximumBackoff)}Qzt(t){if(this.nYt){const t=this.rYt(this.nYt);if(t)return t}return qJ(t)}Jzt(t){if(this.hYt){const t=this.rYt(this.hYt);if(t)return t}return qJ(t)}$zt(t){for(const t of this.Gl.CI)t.Hk===Z.Kn&&(this.oYt=this.Yzt.CZt(t));if(this.oYt){const t=this.rYt(this.oYt);if(t)return t}return KJ(t)}tYt(t){const i=this.rDt;if(!i)return;const s=KJ(t);if(void 0!==s){const t=VJ(s);i.Ngt(t).Hk=Z.Kn}}XMt(t){for(const i of t)if(!this.aYt(i))throw new m("LLHLSPlayer - Could not set an allowed variant stream that does not exists in the internal HLS model.");this.iYt=t}aYt(t){const i=this.Br;return!!i&&Ft(i.VVt,t)}rYt(t){if(t&&this.Bzt)return me(this.Bzt.cLt,i=>i===t)}async uYt(){var t;const i=null!=(t=this.iYt)?t:this.Br.VVt;if(0===i.length&&!this.iYt)return Fi.nD(Eh,"The HLS stream does not contain any variant streams, skipping ABR selection."),[];if(1===i.length&&!this.iYt)return Fi.nD(Eh,"The HLS stream contains only a single variant stream, skipping ABR selection."),[];const s=await this.sYt(i);if(0===s.length)return Fi.aLt(Eh,"No variant streams with supported codecs available to perform ABR selection on."),[];const e=XJ(s,this.vdt.maximumBackoff);return 0===e.length?(this.cYt||(Fi.aLt(Eh,"No variant streams with online renditions available to perform ABR selection on."),this.dYt++,await this.lYt(s)),[]):e}async fYt(){const t=await this.pLt();if(void 0===t)return;const i=!!this.Bzt&&t.EG<this.Bzt.EG;await this.ZMt(t,{HMt:i})}async pLt(){const t=await this.uYt();if(0===t.length)return;const i=await this.eYt(t),s=this.oa.DHt(),e=await this.AHt.pLt(t,this.Bzt,i,s,this.oa.BHt());return!!this.Bzt&&e.EG<this.Bzt.EG||this.vYt(e,s.fLt)?e:void 0}vYt(t,i){var s;if(t===this.Bzt)return!1;const e=this.Bzt&&ZJ(this.Bzt,this.vdt.maximumBackoff),n=ZJ(t,this.vdt.maximumBackoff);if(!e&&n)return!0;(!this.dNt||this.dNt.WMt.EG>t.EG)&&(this.dNt={WMt:t,tft:Zd.Mg()});const r=Zd.Mg()-this.dNt.tft;var h;const o=null!=(h=null==(s=this.Lzt)?void 0:s.RMt.lLt)?h:1/0;return i>=_.max(o-1,5)||r>1e3}_Yt(t){return ho(t,t=>t.EG)}async Dzt(){this.dNt=void 0;let t=await this.uYt();if(0===t.length)return;const i=await this.eYt(t);i.length>0&&(t=i);const s=this._Yt(t);void 0!==s&&(await this.ZMt(s,{HMt:!0}),this.oa.hX.IIt(s.EG))}async lYt(t){this.cYt=!0;let i=!1;for(const s of t)try{const t=this.Lzt?me(s.OOt,t=>Lc(t,this.Lzt)):void 0;if(void 0===t)continue;await this.mWt(t),t.RMt.HFt=-1/0,i=!0}catch(t){}if(i)this.dYt=0,await this.oa.ezt();else{if(this.dYt>=this.vdt.maxRetries)return void this.oa.XX(new Wt(Ne.MEDIA_LOAD_ERROR,"The provided video renditions could not be loaded."));const t=_.min(this.vdt.minimumBackoff*2**(this.dYt-1),this.vdt.maximumBackoff);await hi(t)}this.cYt=!1,await this.fYt()}async sYt(t){let i=await df(t,async t=>{var i,s;const e=[(null==(i=t.lrt)?void 0:i.wCt)?'audio/mp4; codecs="'+t.lrt.wCt+'"':void 0,(null==(s=t.lrt)?void 0:s.bCt)?'video/mp4; codecs="'+t.lrt.bCt+'"':void 0].filter(Y);return 0===e.length||await this.SHt.YJ(e,this.Mc.useManagedMediaSource)});return i.some(t=>{var i;return null==(i=t.lrt)?void 0:i.bCt})&&(i=i.filter(t=>!t.lrt||t.lrt.bCt||0!==t.OOt.length)),i.some(t=>{var i;return null==(i=t.lrt)?void 0:i.wCt})&&(i=i.filter(t=>!t.lrt||t.lrt.wCt||0!==t.LOt.length)),i}eYt(t){return this.Okt.rWt?df(t,t=>async function(t,i){for(const s of t)if(!await i(s))return!1;return!0}([qJ(t.LOt),qJ(t.OOt),KJ(t.FOt),KJ(t.VOt)].filter(Y),t=>this.gYt(t))):Promise.resolve([])}async gYt(t){if(0===t.RMt.ict.length)return!1;const i=t.RMt.ict[0];if(!i.eyt)return!1;const s=i.eyt,e=s.Mbt?gj(s.Mbt.Tn,s.Mbt.V):void 0;try{return await this.iut.Fct(s.XE,e)}catch(t){return!1}}async iLt(t){if(!this.Bzt)return void(this.nYt=t);const i=this.rYt(t);if(t&&!i)return void Fi.lt(Eh,"Trying to set an invalid rendition as the active audio rendition.");if(this.Mzt===i)return;const s=Y(i)!==Y(this.Mzt);Fi.nD(Eh,"Switching audio rendition"),await this.rHt(i,this.Lzt,this.Ozt,{YMt:!0,HMt:s})}async eLt(t){if(!this.Bzt)return void(this.hYt=t);const i=this.rYt(t);if(t&&!i)return void Fi.lt(Eh,"Trying to set an invalid rendition as the active video rendition.");if(this.Lzt===i)return;const s=Y(i)!==Y(this.Lzt);Fi.nD(Eh,"Switching video rendition"),await this.rHt(this.Mzt,i,this.Ozt,{zMt:!0,HMt:s})}async NZt(t){if(!this.Bzt)return void(this.oYt=t);const i=this.rYt(t);!t||i?(Fi.nD(Eh,"Switching subtitle rendition"),await this.rHt(this.Mzt,this.Lzt,i)):Fi.lt(Eh,"Trying to set an invalid rendition as the active subtitle rendition.")}async mYt(t,i){if(this.cYt)return;const s=0===this.JL.V;t.Kp===Xt.Nk||t.Kp===Xt.Ck&&s?this.iYt&&this.iYt.length<=1?(t.Kp===Xt.Nk&&this.Lzt!==t?await this.rHt(this.Mzt,t,this.Ozt):t.Kp===Xt.Ck&&s&&this.Mzt!==t&&await this.rHt(t,this.Lzt,this.Ozt),await this.pYt(t,i)):await this.fYt():await this.pYt(t,i)}async mWt(t,i){try{await this.Okt.mWt(t,i)}catch(s){throw Ui(s),(tt(s)||PA(s))&&await this.mYt(t,i),s}}async pYt(t,i){if(!Ft(this.wYt,t)){this.wYt.push(t);try{const s=t.Kp===Xt.OV||t.Kp===Xt.yLt?1/0:this.vdt.maxRetries;await lo(()=>this.retryOfflineRenditionsCallback(t,i),i,s,this.vdt.minimumBackoff,this.vdt.maximumBackoff)}catch(t){this.oa.XX(new Wt(Ne.MEDIA_LOAD_ERROR,t.message,t))}finally{is(this.wYt,t),t.RMt.HFt===-1/0&&await this.oa.ezt()}}}async OHt(t){var i;const s=this.Mzt,e=this.Lzt,n=[];n.push(this.yYt(e,t)),Hq(s,e)||n.push(this.yYt(s,t));const r=this.Ozt;if(null==(i=this.Mc.hls)?void 0:i.delaySubtitlePreload)await Promise.all(n),await this.yYt(r,t);else{const i=this.yYt(r,t);await Promise.all([...n,i])}}async yYt(t,i){if(t)try{await this.Okt.mWt(t,i)}catch(s){Ui(s),(tt(s)||PA(s))&&await this.bYt(t,i)}}async bYt(t,i){if(this.cYt)return;const s=0===this.JL.V;if(t.Kp===Xt.Nk||t.Kp===Xt.Ck&&s)if(this.iYt&&this.iYt.length<=1)await this.pYt(t,i);else{const t=await this.Kzt();this.qzt(t);const i=this.Qzt(t.LOt),s=this.Jzt(t.OOt),e=this.$zt(t.FOt);await this.rHt(i,s,e)}else await this.pYt(t,i)}rHt(t,i,s,e){void 0===e&&(e={});const n={HMt:e.HMt||!1,YMt:e.YMt||!1,zMt:e.zMt||!1,$x:e.$x||!1,xHt:e.xHt||!1};return n.xHt||n.$x||this.Mzt!==t||this.Lzt!==i||this.Ozt!==s?void 0===t&&void 0===i?Promise.reject(new m("Trying to buffer no media renditions.")):(this.Mzt=t,this.Lzt=i,this.Ozt=s,this.nVt(),this.So(new CJ),this.oa.rHt(n)):Promise.resolve()}async ZMt(t,i){if(!this.oa.RHt)return void Fi.lt(Eh,"The LLHLSPlayer is not loaded.");if(!t)return void Fi.lt(Eh,"Cannot explicitly set the active variant stream to undefined.");if(!this.aYt(t))return void Fi.lt(Eh,"Trying to set an active variant stream that does not exists on the internal model.");if(t===this.Bzt)return void Fi.nD(Eh,"Trying to set the already active variant stream, ignoring.");const s=this.Mzt?me(t.LOt,t=>Lc(t,this.Mzt)):void 0,e=this.Lzt?me(t.OOt,t=>Lc(t,this.Lzt)):void 0,n=this.Ozt?me(t.FOt,t=>Lc(t,this.Ozt)):void 0;this.qzt(t),this.dNt=void 0,await this.rHt(s,e,n,i)}qzt(t){var i;if(Fi.nD(Eh,"Setting active variant stream."),this.Bzt===t)return;const s=(null==(i=this.Bzt)?void 0:i.ZLt)!==(null==t?void 0:t.ZLt);if(this.Bzt&&s)for(const t of this.Bzt.FOt)this.Yzt.GOt(t);if(this.Bzt=t,this.So(new PJ),t&&s)for(const i of t.FOt)this.Yzt.IZt(i)}AYt(){this.SYt(this.qL),this.SYt(this.JL)}SYt(t){const i=[];for(const s of t.CI){const t=[];for(const i of s.QI.CI)Ft(i.WMt.cLt,i.OMt)||t.push(i);for(const i of t)s.QI.vS(i),i.kn();0===s.QI.V&&i.push(s)}for(const s of i)t.it(s),s.kn()}async YHt(t){const i={stack:[],error:void 0,hasError:!1};try{const s=Zr(i,ui.nm([t]),!1),e=[this.Lzt,Hq(this.Mzt,this.Lzt)?void 0:this.Lzt,this.Ozt].filter(Y);await Promise.all(e.filter(t=>!t.RMt.FFt).map(t=>this.Okt.pWt(t,s.jg)))}catch(t){i.error=t,i.hasError=!0}finally{hs(i)}}async GHt(){var t,i,s;const e=this.Mzt,n=this.Lzt,r=null==(t=this.Bzt)?void 0:t.lrt,h=[];if(void 0!==e){var o,a;const t=null!=(a=null==(o=e.lrt)?void 0:o.wCt)?a:null==r?void 0:r.wCt;if(!t)return;{const i='audio/mp4; codecs="'+t+'"';Fi.nD(Eh,"Configuring MediaSource for initial audio rendition with codec: "+i+"."),h.push(i)}}if(void 0!==n){var u,c;const t=null!=(c=null==(u=n.lrt)?void 0:u.bCt)?c:null==r?void 0:r.bCt;if(!t)return;{const i='video/mp4; codecs="'+t+'"';Fi.nD(Eh,"Configuring MediaSource for initial video rendition with codec: "+i+"."),h.push(i)}}if(0===h.length)return void Fi.aLt(Eh,"No codecs found on the active variant stream.");var d;const l=null!=(d=null==n||null==(i=n.RMt.ict[0])?void 0:i.FG)?d:[];var f;const v=null!=(f=null==e||null==(s=e.RMt.ict[0])?void 0:s.FG)?f:[],_=this.Mc,g=this.Br,m=await Sj(_.contentProtection,h,[...g.OVt,...v,...l],this.rW,_.useCredentials);return{Kp:xt.yW,D5:h.map(t=>({GT:t})),aX:m,X5:_.useManagedMediaSource}}get NHt(){return[this.Vzt,this.Wzt,this.TYt].filter(Y)}ZHt(t,i,s,e,n){const r=this.Mzt,h=this.Lzt,o=t&&Hq(r,h);var a,u;if(i&&h)if(this.Wzt)(s||n||o&&e)&&(this.Wzt.Jg(),this.Wzt.tZt.Zy()),this.Wzt.OMt!==h&&this.Wzt.rGt(h);else{const t=o?[Mo.Nk,Mo.Ck]:[Mo.Nk];this.Wzt=this.kYt(h,t)}else null==(a=this.Wzt)||a.Zg(),this.Wzt=void 0;t&&r&&!o?this.Vzt?((s||e)&&(this.Vzt.Jg(),this.Vzt.tZt.Zy()),this.Vzt.OMt!==r&&this.Vzt.rGt(r)):this.Vzt=this.EYt(r):(null==(u=this.Vzt)||u.Zg(),this.Vzt=void 0)}HHt(t){const i=this.Ozt;if(this.TYt){this.TYt.OMt===i?t&&(this.TYt.Jg(),this.TYt.tZt.Zy()):(this.TYt.Zg(),this.TYt=void 0)}if(!this.TYt&&i&&(this.TYt=this.RYt(i)),i){const t=this.Yzt.BZt(i);t.Hk=Z.Kn,this.eZt(t)}}kYt(t,i){const s=function(t,i,s,e,n,r,h,o,a,u,c){const d=s.Br.mM,l=new gJ(d),f=new fJ(Mo.Nk,t,s,l,e,n,r,c),v=h.qSt(l,d,i);return new IJ(f,l,v,o,a,u)}(t,i,this.Okt,this.rW,this.iut,this.gUt,this.yHt,this.pmt,this.rDt,this.kZ,this.Mc.useCredentials);return s.QXt.wn(lJ.$Ut,this.xYt),s.QXt.wn(lJ.tGt,this.IYt),s.JXt.wn(gl.yXt,this.PYt),s.JXt.wn(gl.AXt,this.CYt),s.JXt.wn(gl.SXt,this.NYt),s.JXt.wn(gl.bXt,this.DYt),s}EYt(t){const i=function(t,i,s,e,n,r,h,o,a){const u=i.Br.mM,c=new gJ(u),d=new fJ(Mo.Ck,t,i,c,s,e,n,a),l=r.qSt(c,u,[Mo.Ck]);return new IJ(d,c,l,h,void 0,o)}(t,this.Okt,this.rW,this.iut,this.gUt,this.yHt,this.pmt,this.kZ,this.Mc.useCredentials);return i.QXt.wn(lJ.tGt,this.IYt),i.JXt.wn(gl.yXt,this.PYt),i.JXt.wn(gl.bXt,this.DYt),i}RYt(t){return function(t,i,s,e,n,r){const h=i.Br.mM,o=new gJ(h),a=new fJ(Mo.DT,t,i,o,s,e,n,r),u=new EJ(o,h,Mo.DT);return new IJ(a,o,u)}(t,this.Okt,this.rW,this.iut,this.gUt,this.Mc.useCredentials)}$Xt(t,i){if(t?this.T5&&this.T5.AZt(t,this.HV)||(this.T5=new LJ(Mo.Ck,t,this.HV)):this.T5=void 0,i?this.k5&&this.k5.AZt(i,this.HV)||(this.k5=new LJ(Mo.Nk,i,this.HV)):this.k5=void 0,void 0!==this.Wzt){const i=void 0!==t&&void 0===this.Vzt,s=[this.k5,i?this.T5:void 0].filter(Y);this.Wzt.$Xt(s)}if(void 0!==this.Vzt){const t=this.T5?[this.T5]:[];this.Vzt.$Xt(t)}}eZt(t){t?this.BYt&&this.BYt.AZt(t)||(this.BYt=new FJ(t,this.Br.mM)):this.BYt=void 0,void 0!==this.TYt&&void 0!==this.BYt&&this.TYt.eZt(this.BYt)}lHt(t){if(this.JV===t)return;this.JV=t;for(const i of this.Hzt)i.QV(t);const i=this.Ozt;if(void 0!==i){const t=this.Yzt.BZt(i);this.eZt(t)}}zHt(t,i){const s=[];t&&s.push(Mo.Ck),i&&s.push(Mo.Nk),this.Br.mM.MVt(s)}MYt(){if(void 0===this.Wzt)return!1;const t=Zd.Mg();if(!this.Wzt.QXt.sXt(t))return!1;const i=this.Wzt.QXt.JGt();if(void 0===i||void 0===i.Jat.ct)return!1;const s=this.OR,e=this.oa.vx,n=this.Wzt.nZt.jM(s);if((void 0!==n?n.An(0)-s:0)>=2*i.Jat.ct*e)return!1;if(i.$Gt>0&&0===i.tXt)return i.iXt>1e3*i.Jat.ct*.8;return 8*i.tXt/this.kZ.Aj.EG>=1.8*i.Jat.ct}async LYt(){var t;const i=await this.pLt();if(void 0===i)return;const s=null==(t=this.Wzt)?void 0:t.QXt.JGt();if(void 0===s)return;const e=this.Bzt;if(s.tXt>0){if(_.max(0,s.tXt-s.$Gt)<=s.tXt*(i.EG/e.EG))return}const n=i.EG<e.EG;await this.ZMt(i,{HMt:n})}Azt(){for(const t of this.qL.CI)t.kn();for(const t of this.JL.CI)t.kn();for(const t of this.Gl.CI)t.kn();this.qL.hr(),this.JL.hr(),this.Gl.hr()}async Zg(){this.Vo(),this.hW.Jg(),this.Okt.Zg(),this.Vzt&&(this.Vzt.Zg(),this.Vzt=void 0),this.Wzt&&(this.Wzt.Zg(),this.Wzt=void 0),this.TYt&&(this.TYt.Zg(),this.TYt=void 0);for(const t of this.Hzt)await t.kn(),this.Gl.ZG(t.Z);this.Azt(),this.qL.kn(),this.JL.kn(),this.Gl.kn(),this.wYt=[],this.qzt(void 0)}constructor(t,i,s,e,n,r,h,o,a,u,c,l,f){var v,_;super(),this.oa=void 0,this.Mc=void 0,this.rW=void 0,this.AHt=void 0,this.kZ=void 0,this.iut=void 0,this.SHt=void 0,this.gUt=void 0,this.yHt=void 0,this.vdt=void 0,this.Xzt=void 0,this.JV=void 0,this.qL=new O,this.JL=new O,this.Gl=new Ka([]),this.Yzt=void 0,this.mX=void 0,this.pmt=void 0,this.yX=void 0,this.rDt=void 0,this.Okt=void 0,this.zzt=void 0,this.hW=void 0,this.nYt=void 0,this.hYt=void 0,this.oYt=void 0,this.iYt=void 0,this.wYt=[],this.Bzt=void 0,this.Mzt=void 0,this.Lzt=void 0,this.Ozt=void 0,this.T5=void 0,this.k5=void 0,this.BYt=void 0,this.Vzt=void 0,this.Wzt=void 0,this.TYt=void 0,this.sSt=!0,this.dYt=0,this.cYt=!1,this.C5=ZT.tL(),this.vkt=!1,this.hkt=0,this.dNt=void 0,this.Fzt=[],this.HV=0,this.NWt=()=>{this.nVt()},this.OYt=t=>{_e(this.mYt(t.OMt,this.hW.jg))},this.retryOfflineRenditionsCallback=async(t,i)=>{this.Ozt!==t&&this.Mzt!==t&&this.Lzt!==t||(await this.Okt.mWt(t,i),t.RMt.HFt=-1/0)},this.PYt=t=>{const i=this.Bzt,s=null==i?void 0:i.BOt;if(this.Okt.IWt(t.lrt,t.OMt.RMt),!s&&(this.Okt.PWt(t.lrt,t.OMt.RMt),this.AYt(),i)){const t=void 0!==this.Mzt&&!Ft(i.LOt,this.Mzt),s=void 0!==this.Lzt&&!Ft(i.OOt,this.Lzt);(t||s)&&this.rHt(t?void 0:this.Mzt,s?void 0:this.Lzt,this.Ozt).catch(ol)}},this.CYt=t=>{const i=this.FYt(t.OMt);void 0!==i&&(i.glt=t.glt)},this.NYt=t=>{const i=this.FYt(t.OMt);void 0!==i&&(i.iyt=t.TXt.tF())},this.FYt=t=>{for(const i of this.JL.CI){const s=i.KMt(t);if(void 0!==s)return s}},this.DYt=t=>{this.Okt.RWt(t.OMt)},this.xYt=Hh(t=>{t.Gk===Mo.Nk&&this.MYt()&&_e(this.LYt())},200),this.IYt=t=>{var i;this.hkt+=t.sGt;const s=this.JL.V>0?t.Gk===Mo.Nk:t.Gk===Mo.Ck;"Jat"===t.iGt&&s&&_e(this.fYt()),this.So(new CW(function(t){if(t){if(void 0!==t.Mbt){var i,s;const e=t.Mbt.Tn+(null!=(s=t.Mbt.V)?s:0);return{Yu:t.XE,Aat:[null==(i=t.Mbt)?void 0:i.Tn,e],Xk:!0}}return{Yu:t.XE.toString()||"",Xk:!0}}return{Yu:"",Xk:!0}}(t.uri),(null==(i=this.Bzt)?void 0:i.EG)||0,t.mediaSequenceNumeber,t.mediaTrackId,t.Gk,t.httpStatusCode,t.sGt))},this.oa=t,this.Mc=i,this.rW=e,this.kZ=n,this.AHt=r,this.iut=h,this.SHt=o,this.gUt=a,this.yHt=u,this.vdt=c,this.Xzt=l,this.JV=null!=f?f:new Rz,this.hW=new ui;const g=null!=(_=null==(v=i.latencyConfiguration)?void 0:v.targetOffset)?_:i.liveOffset;this.Okt=new MQ(this.rW,this.iut,i.useCredentials,Zd.Rp(i.src),g),this.Okt.wn(BQ.$Vt,this.NWt),this.Okt.wn(BQ.tWt,this.OYt),this.Okt.wn([d.Uw,d.Gw,d.iy],this.Rs),this.Yzt=new jJ(this,this.JV),this.Gl.UG(this.Yzt.Z),i.hlsDateRange&&(this.zzt=new WQ(this.Okt,this.JV),this.Gl.UG(this.zzt.Z)),s.textTracks&&(this.mX=new bo(this.JV,this.rW),this.Gl.UG(this.mX.Z),this.fX(s.textTracks));!Ft(i.ignoreEmbeddedTextTrackTypes,hr.CEA608)&&(this.rDt=new LG(this.JV),this.Gl.UG(this.rDt.Z));!Ft(i.ignoreEmbeddedTextTrackTypes,hr.EMSG)&&(this.pmt=new ez(this.JV),this.yX=new rx(this.JV,this.pmt.Z),this.Gl.UG(this.pmt.Z),this.Gl.UG(this.yX.Z))}};function s$(t,i){if(!i||i.RMt.kOt)return!1;const s=i.RMt.ict;return 0!==s.length&&s[0].kO>t}r();var e$=class{zX(t,i){return!!hk(t.type)&&!t.useNativePlayback}async YX(t){return!!t.aes128||await PT(t,!0)}};r(),r();var n$=class{async vUt(t,i,s){try{const e=await crypto.subtle.importKey("raw",i,{name:"AES-CBC"},!1,["decrypt"]),n=await crypto.subtle.decrypt({name:"AES-CBC",iv:s},e,t);return new j(n)}catch(t){throw new Wt(Ne.CONTENT_PROTECTION_INTERNAL_ERROR,"Error during AES128 decrypt.")}}Zg(){}static MS(){return"undefined"!=typeof crypto&&void 0!==crypto.subtle&&void 0!==crypto.subtle.decrypt}};r(),r(),r(),r();var cl=class extends sh{constructor(t,i){super(t),this.data=void 0,this.data=i}},r$=["message","messageerror","error"];r();var jn=class extends sh{constructor(t){super(sa.ma),this.error=void 0,this.error=t}},h$=class extends fr{get VYt(){return this.WYt.jg.Ug}UYt(t,i){this.VYt||(void 0!==this.GYt?this.GYt.UYt(t,i):this.XYt.push({Ey:t,ZYt:i}))}HYt(){this.VYt||(this.WYt.Jg(),Lr(this.XYt),void 0!==this.GYt&&this.GYt.HYt())}constructor(t){super(),this.GYt=void 0,this.WYt=void 0,this.XYt=[],this.zYt=t=>{if(this.VYt)t.HYt();else{this.GYt=t,this.GYt.wn(r$,this.Rs);for(const i of this.XYt)t.UYt(i.Ey,i.ZYt);Lr(this.XYt)}},this.YYt=t=>{if(this.VYt)return;const i=t instanceof m?t:new m("Could not create Worker.");this.So(new jn(i)),this.HYt()},this.WYt=new ui,t(this.WYt.jg).then(this.zYt,this.YYt)}};r(),r();var o$=class extends fr{UYt(t,i){i?this.GYt.postMessage(t,i):this.GYt.postMessage(t)}HYt(){this.Vo(),this.GYt.removeEventListener("message",this.KYt),this.GYt.removeEventListener("messageerror",this.qYt),this.GYt.removeEventListener("error",this.p7),this.GYt.terminate()}constructor(t,i){super(),this.GYt=void 0,this.KYt=t=>{this.So(new cl("message",t.data))},this.qYt=t=>{this.So(new cl("messageerror",t.data))},this.p7=t=>{null==t.preventDefault||t.preventDefault.call(t);const i=t.error instanceof m?t.error:new m(t.message);this.So(new jn(i)),this.HYt()},this.GYt=new ad(t,i),this.GYt.addEventListener("message",this.KYt),this.GYt.addEventListener("messageerror",this.qYt),this.GYt.addEventListener("error",this.p7)}};r();var a$=0,u$=class extends fr{UYt(t,i){i?this.jYt.contentWindow.postMessage({type:"message",data:t},"*",i):this.jYt.contentWindow.postMessage({type:"message",data:t},"*")}HYt(){var t;this.jYt.removeEventListener("load",this.QYt),self.removeEventListener("message",this.JYt),null==(t=this.jYt.contentWindow)||t.postMessage({type:"terminate"},"*"),je(this.jYt)}constructor(t,i){super(),this.rS=void 0,this.$Yt=void 0,this.jYt=void 0,this.tKt=void 0,this.QYt=()=>{this.jYt.removeEventListener("load",this.QYt),this.jYt.contentWindow.postMessage({type:"initialize",id:this.rS,script:this.$Yt},"*")},this.JYt=t=>{t.origin===this.tKt&&t.data.id===this.rS&&("initialized"===t.data.type||("error"===t.data.type?(this.So(new jn(new m(t.data.data.message))),this.HYt()):this.So(new cl("message",t.data.data))))},this.rS=a$++,this.$Yt=t;const s=Zd.Dh("iframe.html",i);this.jYt=function(t){const i=h.createElement("iframe");return i.width="0",i.height="0",i.style.display="none",i.role="",i.src=t,h.body.appendChild(i),i}(s.href),this.tKt=s.origin,this.jYt.addEventListener("load",this.QYt),self.addEventListener("message",this.JYt)}};function c$(t,i,s){const e=Zd.Rp(t,i);return new h$(t=>async function(t,i,s,e){let n;try{return n=new o$(t,s),await l$(n,e),n}catch(t){null==n||n.HYt(),Ui(t)}if(d$&&Bb){let i;try{const s=await Zd.AR.dk({Yu:t,Fk:ci.GET,ck:Bi.DT,jg:e});i=await s.FT(e)}catch(t){Ui(t)}if(i){let t;try{const r=Bb([i],{type:"application/javascript"});return t=URL.createObjectURL(r),n=new o$(t,s),await l$(n,e),n}catch(t){null==n||n.HYt(),Ui(t),d$=!1}finally{t&&URL.revokeObjectURL(t)}}}try{return n=new u$(t,i),await l$(n,e),n}catch(t){throw null==n||n.HYt(),t}}(e,i,s,t))}var d$=!0;async function l$(t,i){const s=await t.pw(["message","error"],i);if("error"===s.type)throw function(t){return new Wt(Ne.CONFIGURATION_ERROR,"THEOplayer workers could not be loaded. Please check the configuration of the libraryLocation.",t)}(s.error);if(!function(t){return Hd(t)&&"9.11.0"===t.iKt}(s.data))throw new Wt(Ne.CONFIGURATION_ERROR,"THEOplayer workers could not be loaded. Please check that the worker's version matches THEOplayer's version (9.11.0).");return s}r();var f$=function(t){return t.sKt="vUt",t.eKt="WUt",t}({}),v$=function(t){return t.nKt="rKt",t.hKt="oKt",t}({}),_$=class{aKt(){const t=c$(this.uKt,this.cKt,{name:"THEOplayer decrypt worker"});return t.wn("message",this.dKt),t.wn("error",this.lKt),t}vUt(t,i,s){const e=""+ ++this.fKt,n={vKt:f$.sKt,_Kt:e,gKt:t,mKt:i,pKt:s},r=new gs;return this.wKt.set(e,r),null!=this.GYt||(this.GYt=this.aKt()),this.GYt.UYt(n),r.Yy}Zg(t){void 0===t&&(t=new us),this.wKt.forEach(i=>i.zy(t)),this.wKt.clear(),this.GYt&&(this.GYt.HYt(),this.GYt=void 0)}constructor(t){this.cKt=void 0,this.uKt=void 0,this.GYt=void 0,this.fKt=0,this.wKt=Se(),this.dKt=t=>{const i=t.data,s=i.yKt,e=this.wKt.get(s);if(e)if(this.wKt.delete(s),i.bKt===v$.nKt)e.Hy(i.AKt);else if(i.bKt===v$.hKt){const t=i.SKt,s=i.TKt?new m(i.TKt):void 0,n=new Wt(Ne.CONTENT_PROTECTION_INTERNAL_ERROR,"Error during AES128 decrypt. (code: "+t+")",s);e.zy(n)}},this.lKt=t=>{const i=new Wt(Ne.CONTENT_PROTECTION_INTERNAL_ERROR,t.error.message,t.error);this.Zg(i)},this.cKt=t;try{this.uKt=Zd.Rp("theoplayer.d.js",t)}catch(t){throw new Wt(Ne.CONFIGURATION_ERROR,"Invalid player configuration: missing libraryLocation",t)}}};function g$(t){const i=me(t.boxes,FD);if(!i)return;const s=me(i.boxes,VD);return s?s.handlerType:void 0}function m$(t){const i=new Ty;return i.boxes.push(...t.boxes),i}function p$(t){const i=new yl;return i.boxes.push(...t.boxes),i}r(),r(),r(),r();var w$=8;function y$(t,i){const s=function(t){const i=new Qw;return i.boxes.push(...t.boxes),i}(t),e=A$(i);for(let t=0;t<s.boxes.length;t++){const n=s.boxes[t];if(n===i)s.boxes[t]=new fw(new j(i.getSize()-w$));else if(WD(n)){const i=n,r=li(i.boxes,t=>t instanceof Yc&&t.trackId===e);if(r>=0){const e=i.boxes[r],n=p$(i);n.boxes[r]=new fw(new j(e.getSize()-w$)),s.boxes[t]=n}}}return s}function b$(t,i){const s=function(t){const i=new ay;return i.boxes.push(...t.boxes),i}(t);for(let t=0;t<s.boxes.length;t++){const e=s.boxes[t];if(XD(e)){const n=me(e.boxes,ZD);n&&n.trackId===i&&(s.boxes[t]=new fw(new j(e.getSize()-w$)))}}return s}function A$(t){return me(t.boxes,OD).trackId}function S$(t,i,s,e){const n=me(t.boxes,ZD),r=s.jF(i).xF();let h=mh.ZERO;for(const i of t.boxes){if(i instanceof ml){h=Yf(i.baseMediaDecodeTime,r),i.baseMediaDecodeTime=i.baseMediaDecodeTime.subtract(h);break}if(i instanceof ty){h=Yf(mh.fromNumber(i.baseMediaDecodeTime),r),i.baseMediaDecodeTime-=h.toNumber();break}}if(h.isZero())return;const o=me(t.boxes,HD);if(void 0!==o&&o.samples.length>0){const t=o.samples;if(!o.flags.sampleDurationPresent){o.flags.sampleDurationPresent=!0;const i=null!=e?e:n.defaultSampleDuration;for(const s of t)s.duration=i}t[0].duration+=h.toNumber(),o.samples=t}}r();var T$="Mp4Transmuxer",k$=class extends SJ{FXt(t,i){Ko(i);const s=t.OMt,e=_B(xh(t.yOt.hk.hk));if(!e)throw new m("Mp4Transmuxer - Unable to parse "+s.Kp+" MP4 initializer.");this.z2=e;const n=function(t){let i,s;for(const e of t.Z)i||(i=e.S1),s||(s=e.A1);if(i||s)return{wCt:i,bCt:s,OLt:void 0};return}(e);n&&this.GXt(s,n);const r=function(t){for(const i of t.Z)if(void 0!==i.T1)return i.T1;return}(e);void 0!==r&&this.XXt(s,r);const h=function(t){var i;const s=Py(t),e=me(s.boxes,MD),n=e.boxes.filter(LD),r=me(n,t=>g$(t)===Sw.AUDIO),h=me(n,t=>g$(t)===Sw.VIDEO),o={wCt:{QN:r?A$(r):void 0},bCt:{QN:h?A$(h):void 0}},a=null==(i=me(e.boxes,WD))?void 0:i.boxes.filter(UD);var u,c;const d=a?{wCt:null!=(u=me(a,t=>t.trackId===o.wCt.QN))?u:void 0,bCt:null!=(c=me(a,t=>t.trackId===o.bCt.QN))?c:void 0}:void 0;var l,f;if(d&&(o.wCt.DB=null==(l=d.wCt)?void 0:l.defaultSampleDuration,o.bCt.DB=null==(f=d.bCt)?void 0:f.defaultSampleDuration),!r||!h)return{wCt:r?t:void 0,bCt:h?t:void 0,NV:o};const v=m$(s),_=m$(s),g=s.boxes.indexOf(e);v.boxes[g]=y$(e,h),_.boxes[g]=y$(e,r);const m=v.serialize().join(),p=_.serialize().join();return{wCt:m,bCt:p,NV:o}}(t.yOt.hk.hk);if(this.kKt=h.NV,h.bCt){const i=me(e.Z,t=>t.QN===h.NV.bCt.QN),s={Kp:"OPt",hk:{Kp:Vt.fJ,hk:h.bCt},Mot:Mo.Nk,SOt:t.SOt,KXt:{lrt:'video/mp4; codecs="'+i.A1+'"',FG:t.FG},kO:t.kO,OMt:t.OMt,nUt:t.yOt.nUt};this.dXt(s)}if(h.wCt){const i=me(e.Z,t=>t.QN===h.NV.wCt.QN),s={Kp:"OPt",hk:{Kp:Vt.fJ,hk:h.wCt},Mot:Mo.Ck,SOt:t.SOt,KXt:{lrt:'audio/mp4; codecs="'+i.S1+'"',FG:t.FG},kO:t.kO,OMt:t.OMt,nUt:t.yOt.nUt};this.dXt(s)}return Promise.resolve()}async WXt(t,i){Ko(i);const s=t.Jat.nUt;Fi.nD(T$,"Transmuxing fMP4: "+dl(s.eyt));const e=t.Jat.hk,n=E$(e.hk,this.z2),r=uf(n.map(t=>t.Tst),PE);if(void 0!==r&&(s.kst=r,this.HXt(t.OMt)),!this.UVt.vVt(t.SOt)){const e=Xa.iV(s.kO);if(n.length>0){const i=uf(n.map(t=>t.EKt),PE);for(const n of this.CXt)this.UVt.kVt(t.SOt,n,i,e,R$(s),!1);this.HXt(t.OMt)}this.UVt.vVt(t.SOt)||await $s(this.UVt.gVt(t.SOt),i)}const h=this.UVt.AVt(t.SOt),o=s.kst?this.UVt.SVt(s.kst,s).tF():s.kO,a=TJ(s,o);var u;const c={cUt:a,dUt:kJ(s,a),kO:o,ct:null!=(u=s.ct)?u:0,bV:h.tF(),SOt:t.SOt,OMt:t.OMt,nUt:t.Jat.nUt},d=function(t,i){if(void 0===i.wCt.QN)return{wCt:void 0,bCt:t};if(void 0===i.bCt.QN)return{wCt:t,bCt:void 0};const s=Py(t),e=m$(s),n=m$(s);for(let t=0;t<s.boxes.length;t++){const r=s.boxes[t];GD(r)&&(e.boxes[t]=b$(r,i.bCt.QN),n.boxes[t]=b$(r,i.wCt.QN))}const r=e.serialize().join(),h=n.serialize().join();return{wCt:r,bCt:h}}(e.hk,this.kKt);if(d.bCt){var l;const i=this.kKt.bCt.QN,e=me(this.z2.Z,t=>t.QN===i),h=me(n,t=>t.QN===i),o=this.RKt(d.bCt,e,h,null==(l=this.kKt)?void 0:l.bCt.DB,s);this.xKt=e,this.ZXt(t.OMt,s,h.Tst.dF(r));const a=Jr({Kp:"Jat",hk:{Kp:Vt.fJ,hk:o},Mot:Mo.Nk},c);this.dXt(a)}if(d.wCt){const t=Jr({Kp:"Jat",hk:{Kp:Vt.fJ,hk:d.wCt},Mot:Mo.Ck},c);this.dXt(t)}this.IKt=s,this.PKt=n}RKt(t,i,s,e,n){if(!R$(n))return t;if(!this.IKt||!this.xKt||!this.PKt)return t;const r=this.xKt.QN,h=me(this.PKt,t=>t.QN===r),o=this.UVt.SVt(h.CKt,this.IKt),a=this.UVt.SVt(s.Tst,n).dF(o).jF(i.UN);if(a.rF(Xa.pF))return t;if(a.iF(Xa.iV(.5)))return t;const u=Tr(n)?n:n.JOt;return Fi.oLt(T$,"Stretching first video frame of segment #"+u.hOt+" to fill gap of "+a.tF()+"s"),function(t,i,s,e){const n=Py(t),r=me(n.boxes,GD);if(r){const t=r.getSize();for(const t of r.boxes)t instanceof hy&&S$(t,i,s,e);const n=r.getSize();if(n!==t){const i=n-t;for(const t of r.boxes)t instanceof hy&&zD(t,i)}}return n.serialize().join()}(t,i.UN,a,e)}constructor(...t){super(...t),this.z2=void 0,this.kKt=void 0,this.IKt=void 0,this.PKt=void 0,this.xKt=void 0}};function E$(t,i){const s=uT(Co.AN(xh(t)),Ci.RC);if(!s)throw new m("Mp4Transmuxer - Unable to parse segment or part.");return function(t,i){const s=[];for(const n of t.Z){if(!n.ZB||0===n.XB.length||0===n.XB[0].jB.length)continue;const t=n._N.QN,r=me(i.Z,i=>i.QN===t);let h=0,o=1/0,a=0;const u=n._N.DB||0;for(const t of n.XB)for(const i of t.jB){const t=i.QB||0,s=h+t;var e;h+=null!=(e=i.ct)?e:u;const n=h+t;s<o&&(o=s),n>a&&(a=n)}const c=Xa._F(n.ZB.ZB,r.UN);s.push({QN:t,EKt:c,Tst:c.dO(Xa.gF(o,r.UN)),NKt:c.dO(Xa.gF(h,r.UN)),CKt:c.dO(Xa.gF(a,r.UN))})}return s}(s,i)}function R$(t){return Tr(t)?t.wOt:0===t.tFt&&t.JOt.wOt}var x$="MpegtsTransmuxer",I$=class extends k${FXt(t,i){return super.FXt(t,i)}MXt(t,i){if(super.MXt(t,i),this.gE.DKt())return;var s;const e=null!=(s=null==i?void 0:i.eyt)?s:t.eyt;if(!e)return;/\.(ts|aac|mp3)/i.test(e.XE)&&this.gE.BKt()}MKt(t){let i;return t.OMt===this.LKt&&this.OKt.has(t.SOt)?i=this.OKt.get(t.SOt):(i=HQ(t.Jat.hk.hk),this.LKt=t.OMt,this.OKt.set(t.SOt,i)),i}async WXt(t,i){Ko(i);const s=this.MKt(t),e=t.Jat;if(s!==ZQ.WWt&&s!==ZQ.UWt)return super.WXt(t,i);if(e.nUt.FG.some(C$))throw new Wt(Ne.CONTENT_PROTECTION_NOT_SUPPORTED,"SAMPLE-AES encryption is not supported for MPEG-TS or Packed Audio segments");const n=this.gE.BKt();let r;s===ZQ.WWt?(Fi.nD(x$,"Transmuxing MPEG-TS: "+dl(e.nUt.eyt)),r=await n.FKt({data:e.hk.hk,metadata:this.VKt})):(Fi.nD(x$,"Transmuxing raw audio: "+dl(e.nUt.eyt)),r=await n.WKt({data:e.hk.hk,metadata:this.VKt})),Ko(i),this.GXt(t.OMt,{wCt:r.metadata.audio_codec,bCt:r.metadata.video_codec,OLt:void 0}),r.metadata.video_frame_rate&&this.XXt(t.OMt,r.metadata.video_frame_rate);const h=N$(r.metadata.first_decode_timestamp),o=N$(r.metadata.first_presentation_timestamp),a=void 0!==r.metadata.first_video_presentation_timestamp?N$(r.metadata.first_video_presentation_timestamp):void 0;if(e.nUt.kst=o,this.HXt(t.OMt),void 0!==a&&this.ZXt(t.OMt,e.nUt,function(t,i){let s=t.dF(i);return s.oF(Xa.pF)&&(s=s.dO(NE())),s}(a,o)),!this.UVt.vVt(t.SOt)){const s=Xa.iV(e.nUt.kO);for(const i of this.CXt)this.UVt.kVt(t.SOt,i,h,s,R$(e.nUt),!0);this.HXt(t.OMt),this.UVt.vVt(t.SOt)||await $s(this.UVt.gVt(t.SOt),i)}const u=this.UVt.TVt(h,e.nUt);this.VKt=r.metadata;const c=this.UVt.SVt(o,e.nUt).tF(),d=TJ(e.nUt,c);var l;const f={cUt:d,dUt:kJ(e.nUt,d),kO:c,ct:null!=(l=e.nUt.ct)?l:0,bV:u.tF(),SOt:t.SOt,OMt:t.OMt,nUt:e.nUt};if(void 0===r.data.audio_media&&void 0===r.data.video_media){for(const t of this.CXt){const i=Jr({Kp:"Jat",hk:void 0,Mot:t},f);this.dXt(i)}return}const v=[];if(void 0!==r.data.audio_media){if(r.data.audio_init&&(!this.UKt||this.GKt!==t.SOt||!L(this.UKt,r.data.audio_init))){const i=this.UVt.SVt(e.nUt.kst,e.nUt).tF(),s={Kp:"OPt",hk:{Kp:Vt.fJ,hk:r.data.audio_init},Mot:Mo.Ck,SOt:t.SOt,KXt:{lrt:'audio/mp4; codecs="'+r.metadata.audio_codec+'"',FG:e.nUt.FG},kO:i,OMt:t.OMt,nUt:e.nUt};this.UKt=r.data.audio_init,this.GKt=t.SOt,this.dXt(s)}const i=Jr({Kp:"Jat",hk:{Kp:Vt.fJ,hk:r.data.audio_media},Mot:Mo.Ck},f);this.dXt(i)}else if(t.Jat.nUt.jOt&&Ft(this.CXt,Mo.Ck)){const t=Jr({Kp:"Jat",hk:void 0,Mot:Mo.Ck},f);this.dXt(t)}if(void 0!==r.data.video_media){if(r.data.video_init&&(!this.XKt||this.ZKt!==t.SOt||!L(this.XKt,r.data.video_init))){const i=this.UVt.SVt(e.nUt.kst,e.nUt).tF(),s={Kp:"OPt",hk:{Kp:Vt.fJ,hk:r.data.video_init},Mot:Mo.Nk,SOt:t.SOt,KXt:{lrt:'video/mp4; codecs="'+r.metadata.video_codec+'"',FG:e.nUt.FG},kO:i,OMt:t.OMt,nUt:e.nUt};this.XKt=r.data.video_init,this.ZKt=t.SOt,this.HKt=_B(xh(r.data.video_init)),this.dXt(s)}const i=this.HKt.Z[0],s=E$(r.data.video_media,this.HKt)[0],n=this.RKt(r.data.video_media,i,s,void 0,e.nUt);this.xKt=i;const h=Jr({Kp:"Jat",hk:{Kp:Vt.fJ,hk:n},Mot:Mo.Nk},f);this.dXt(h),v.push(s)}else if(t.Jat.nUt.jOt&&Ft(this.CXt,Mo.Nk)){const t=Jr({Kp:"Jat",hk:void 0,Mot:Mo.Nk},f);this.dXt(t)}this.IKt=e.nUt,this.PKt=v}Jg(){this.UKt=void 0,this.XKt=void 0,this.GKt=-1,this.ZKt=-1,super.Jg()}constructor(t,i,s,e){super(i,s,e),this.gE=void 0,this.VKt=void 0,this.UKt=void 0,this.XKt=void 0,this.HKt=void 0,this.GKt=-1,this.ZKt=-1,this.LKt=void 0,this.OKt=Zs(),this.gE=t}},P$=class{qSt(t,i,s){return new I$(this,t,i,s)}};function C$(t){return t.Fk===It.TLt}function N$(t){return Xa._F(mh.fromBits(t.low,t.high),t.base)}r(),r();var D$=function(t){return t[t.MPEGTS_TO_FMP4=0]="MPEGTS_TO_FMP4",t[t.RAW_AUDIO_TO_FMP4=1]="RAW_AUDIO_TO_FMP4",t}({}),B$=()=>{const t=function(){if("undefined"==typeof WebAssembly)return!1;const t=As.d_;if(t>0&&t<=56)return!1;try{return void 0!==new WebAssembly.Module(Iu("AGFzbQEAAAA="))}catch(t){return!1}}();return B$=()=>t,t};var M$=class{FKt(t){return this.zKt(D$.MPEGTS_TO_FMP4,t)}WKt(t){return this.zKt(D$.RAW_AUDIO_TO_FMP4,t)}aKt(){const t=c$(this.uKt,this.cKt,{name:"THEOplayer transmux worker"});return t.wn("message",this.dKt),t.wn("error",this.lKt),t}zKt(t,i){const s=++this.fKt,e={type:t,id:s,input:i},n=new gs;return this.wKt.set(s,n),this.GYt.UYt(e),n.Yy}Zg(t){void 0===t&&(t=new us),this.wKt.forEach(i=>i.zy(t)),this.wKt.clear(),this.GYt.HYt()}constructor(t){this.cKt=void 0,this.uKt=void 0,this.GYt=void 0,this.fKt=0,this.wKt=Zs(),this.dKt=t=>{const i=t.data;if(void 0!==i.requestId){const t=this.wKt.get(i.requestId);if(!t)return;this.wKt.delete(i.requestId),i.success?t.Hy(i.output):t.zy(new Wt(i.errorCode,i.error))}else i.success||this.Zg(new Wt(i.errorCode,i.error))},this.lKt=t=>{const i=new Wt(Ne.MEDIA_DECODE_ERROR,t.error.message,t.error);this.Zg(i)},this.cKt=t;const i=B$()?"THEOplayer.transmux.js":"THEOplayer.transmux.asmjs.js";try{this.uKt=Zd.Rp(i,t)}catch(t){throw new Wt(Ne.CONFIGURATION_ERROR,"Invalid player configuration: missing libraryLocation",t)}this.GYt=this.aKt()}},L$=class extends P${DKt(){return void 0!==this.GYt}BKt(){var t;return null!=(t=this.GYt)?t:this.GYt=new M$(this.YKt)}Zg(){this.GYt&&(this.GYt.Zg(),this.GYt=void 0)}constructor(t){super(),this.YKt=void 0,this.GYt=void 0,this.YKt=t,this.GYt=void 0}},O$=class{Rst(){return new L$(this.YKt)}constructor(t){this.YKt=void 0,this.YKt=t}},F$=class extends t${Zx(){return this.SL.Zx()}get Gx(){return this.SL.Gx}set Gx(t){this.SL.Gx=t}async kn(){var t;await super.kn(),null==(t=this.PRt)||t.kn()}constructor(t,i,s,e,n){const r=function(t){return n$.MS()?new n$:new _$(t)}(n.libraryLocation);super(t,i,s,e,r,new O$(n.libraryLocation),new fz(gc.Bg.dRt,gc.Bg.cRt,gc.Bg.ict,gc.Bg.fRt),n),this.PRt=void 0,As.z_&&(this.PRt=new QV(this))}},V$=class extends F${async kn(){await super.kn(),await this.xX.RX(this.SL)}constructor(t,i,s,e,n){const r=new ws(t);super(r.HX(Mo.Nk),i,s,e,n),this.xX=void 0,this.xX=r}},W$=class extends e${zX(t,i){return!!Au(t.useManagedMediaSource)&&(!(!t.useManagedMediaSource&&(As.ru||As.Tg))&&super.zX(t,i))}async YX(t){return!(t.clearkey&&!t.fairplay&&As.z_)&&super.YX(t)}};cs(new class extends W${xP(t,i,s,e,n,r,h){return new V$(i,s,n,r,e)}KX(){return!0}constructor(...t){super(...t),this.qX=ki.fP}}),Fi.Rt=()=>{var t;return Boolean(null==(t=s)?void 0:t.THEOplayerDebugLogsEnabled)},r(),r(),r(),r();var U$=class{Fct(t,i){return Promise.resolve(!1)}tut(t,i){return Promise.resolve(void 0)}WSt(t){return Promise.resolve(void 0)}UQ(t){return Promise.resolve(void 0)}},G$=class extends fr{KKt(){var t;return null==(t=this.qKt)?void 0:t.RMt}Tn(){_e(lo(()=>this.jKt(this.eT.jg),this.eT.jg))}async jKt(t){await this.Okt.uWt(t),this.QKt&&(this.JKt(this.QKt.Ti,this.QKt.Mi),this.QKt=void 0),this.z6=!0}$Kt(t,i){this.z6?this.JKt(t,i):this.QKt={Ti:t,Mi:i}}JKt(t,i){const s=this.tqt(t,i),e=null==s?void 0:s.OOt[0];e!==this.qKt&&(this.iqt(),void 0!==e&&(this.qKt=e,this.sqt=new QQ(this.Okt,e),this.sqt.kUt()))}iqt(){this.qKt=void 0,this.sqt&&(this.sqt.Zg(),this.sqt=void 0)}tqt(t,i){const s=me(this.Okt.Br.VVt,s=>void 0!==s.aCt&&s.aCt.Ti===t&&s.aCt.Mi===i);return null!=s?s:this.Okt.Br.VVt[0]}kn(){this.Vo(),this.eT.Jg(),this.eT.Zg(),this.iqt(),this.Okt.Zg()}constructor(t,i,s){super(),this.Ac=void 0,this.Okt=void 0,this.qKt=void 0,this.sqt=void 0,this.z6=void 0,this.QKt=void 0,this.eT=new ui,this.Ac=t,this.Okt=new MQ(s,new U$,t.useCredentials,t.src,t.liveOffset),this.Okt.wn(d.Gw,this.Rs),this.z6=!1}};r();var X$=class extends ua{get ht(){return this.C9.ht}get IR(){return this.C9.IR}get NR(){return this.C9.NR}set NR(t){this.C9.NR=t}get bt(){return this.C9.bt}get OR(){return this.C9.OR}set OR(t){this.C9.OR=t}WR(t,i){this.OR=t}get ct(){return this.C9.ct}get GR(){return this.C9.GR}get HR(){return this.C9.HR}get YR(){return this.C9.YR}get qR(){return this.C9.qR}get lt(){return this.C9.lt}get QR(){return this.C9.QR}get $R(){return this.C9.$R}get ix(){return this.C9.ix}set ix(t){this.C9.ix=t}get hx(){return this.C9.hx}get ux(){return this.C9.ux}get vx(){return this.C9.vx}set vx(t){this.C9.vx=t}get mx(){return this.C9.mx}get yx(){return this.C9.yx}set yx(t){this.C9.yx=t}get Sx(){return this.C9.Sx}get kx(){return this.C9.kx}get Rx(){return this.C9.Rx}get nX(){return this.C9.nX}get nt(){return this.C9.nt}get Nx(){return this.C9.Nx}get rt(){return this.C9.rt}get Mx(){return this.C9.Mx}get Ox(){return this.C9.Ox}set Ox(t){this.C9.Ox=t}get Wx(){return this.C9.Wx}get Gx(){return this.C9.Gx}set Gx(t){this.C9.Gx=t}get hX(){return this.C9.hX}get NL(){}qx(){return this.C9.qx()}Xx(){return this.C9.Xx()}Aa(){return this.C9.Aa()}sI(t){return this.C9.sI(t)}Zx(){return this.C9.Zx()}we(){return this.C9.we()}Jx(){return this.C9.Jx()}$x(){return this.C9.$x()}zx(){return this.C9.zx()}Yx(){return this.C9.Yx()}hr(){return this.C9.hr()}Ta(t,i,s){return this.C9.Ta(t,i,s)}Ix(t,i,s,e){return this.C9.Ix(t,i,s,e)}Px(){return this.C9.Px()}be(){return this.C9.be()}jx(){return this.C9.jx()}Qx(){return this.C9.Qx()}kn(){this.Vo();for(const t of hP)this.C9.mn(t,this.Rs);return this.C9.kn()}constructor(t){super(),this.C9=void 0,this.C9=t;for(const t of hP)this.C9.wn(t,this.Rs)}},Z$=class extends X${async Ta(t,i,s){await super.Ta(t,i,s),t.hlsDateRange&&this.Jwt(t,i)}Jwt(t,i){this.eqt=new G$(t,i,this.nqt),this.eqt.wn(d.Gw,this.handleManifestUpdate),this.eqt.Tn()}hr(){return this.CWt&&(this.nt.it(this.CWt),this.N8.it(this.CWt),this.CWt.kn(),this.CWt=void 0,this.rqt=!1),this.eqt&&(this.eqt.kn(),this.eqt=void 0),this.N8.hr(),super.hr()}kn(){return this.mn(d.jw,this.Izt),this.eqt&&(this.eqt.kn(),this.eqt=void 0),this.N8.kn(),super.kn()}constructor(t,i,s){super(t),this.eqt=void 0,this.nqt=void 0,this.rqt=!1,this.CWt=void 0,this.N8=void 0,this.handleManifestUpdate=t=>{this.So(t);const i=this.eqt.KKt();if(i){const t=this.nX;if(t){const s=t.getTime();let e=this.CWt;e||(e=new uQ,this.CWt=e),e.er(i.TOt,t=>(t.getTime()-s)/1e3),!this.rqt&&e.L.V>0&&(this.nt.tt(e),this.N8.tt(e),this.rqt=!0)}}},this.Izt=()=>{this.eqt&&this.eqt.$Kt(this.Mx,this.Nx)},this.nqt=i,this.N8=new Qa(this),this.wn(d.jw,this.Izt)}};!function(t){uc.jX().QX(t)}(function(t,i,s){return new Z$(t,i,s)}),r(),r(),r(),r();var ms=class extends rl{get name(){return"CastError"}constructor(t,i=""){super("An error occurred while casting."),this.errorCode=void 0,this.description=void 0,this.errorCode=t,this.description=i}};async function H$(t){K$()||await async function(t){if(null==t?void 0:t.Ug)return Promise.reject(new us);const{Yy:i,Hy:e,zy:n}=function(){let t,i;return{Yy:new Promise((s,e)=>{t=s,i=e}),Hy:t,zy:i}}(),r=s.__onGCastApiAvailable,h=()=>{s.__onGCastApiAvailable=r,n(new us)};return s.__onGCastApiAvailable=(i,o)=>{i?e():n(new m(o)),null==t||t.Yg(h),s.__onGCastApiAvailable=r,r&&r(i,o)},null==t||t.zg(h),i}(t),Y$()||await hi(100,t),Y$()||(Zd.lp('Detected the Chromecast library was loaded without the CAF framework. It is strongly encouraged to load it with the CAF framework by using this URL: "//www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1"'),await z$())}var z$=Eu(()=>function(t){return new Promise((i,s)=>{const e=h.createElement("script");e.onload=()=>i(),e.onerror=t=>s((null==t?void 0:t.error)||t),e.type="text/javascript",e.src=t,(h.head||h.documentElement).appendChild(e)})}("//www.gstatic.com/cast/sdk/libs/sender/1.0/cast_framework.js").catch(()=>{throw new ms("API_NOT_INITIALIZED","The Chromecast library could not be loaded successfully.")}));function Y$(){return Boolean("undefined"!=typeof cast&&cast.framework)}function K$(){return"undefined"!=typeof chrome&&chrome&&chrome.cast&&chrome.cast.isAvailable}function q$(t,i,s,e){if(Y(i))for(const s of w.keys(i)){if("type"===s||"images"===s)continue;const e=i[s];Y(e)&&(t[s]=e)}!function(t,i,s,e){if(!Y(s)&&!Y(null==i?void 0:i.images))return;t.images=[],s&&t.images.push(new e.Image(s));if(null==i?void 0:i.images)if(yo(i.images))t.images.push(new e.Image(i.images));else if(he(i.images))for(const s of i.images){let i;var n,r;if(yo(s))i=new e.Image(s);else i=new e.Image(s.src),i.height=null!=(n=s.height)?n:null,i.width=null!=(r=s.width)?r:null;t.images.push(i)}}(t,i,s,e)}function j$(t,i,s){return void 0===s&&(s=chrome),function(t,i,s){switch(null==t?void 0:t.type){case"movie":{const e=new s.MovieMediaMetadata;return q$(e,t,i,s),e}case"audio":{const e=new s.MusicTrackMediaMetadata;return q$(e,t,i,s),!Y(e.artist)&&Y(t.artistName)&&(e.artist=t.artistName),e}case"tv-show":{const e=new s.TvShowMediaMetadata;return q$(e,t,i,s),!Y(e.title)&&Y(t.episodeTitle)&&(e.title=t.episodeTitle),!Y(e.season)&&Y(t.seasonNumber)&&(e.season=t.seasonNumber),!Y(e.episode)&&Y(t.episodeNumber)&&(e.episode=t.episodeNumber),e}default:{const e=new s.GenericMediaMetadata;return q$(e,t,i,s),e}}}(t,i,function(t){return{GenericMediaMetadata:t.cast.media.GenericMediaMetadata,MovieMediaMetadata:t.cast.media.MovieMediaMetadata,TvShowMediaMetadata:t.cast.media.TvShowMediaMetadata,MusicTrackMediaMetadata:t.cast.media.MusicTrackMediaMetadata,Image:t.cast.Image}}(s))}function Q$(t){switch(t){case chrome.cast.ErrorCode.CANCEL:return"CANCEL";case chrome.cast.ErrorCode.TIMEOUT:return"TIMEOUT";case chrome.cast.ErrorCode.API_NOT_INITIALIZED:return"API_NOT_INITIALIZED";case chrome.cast.ErrorCode.INVALID_PARAMETER:return"INVALID_PARAMETER";case chrome.cast.ErrorCode.EXTENSION_NOT_COMPATIBLE:return"EXTENSION_NOT_COMPATIBLE";case chrome.cast.ErrorCode.EXTENSION_MISSING:return"EXTENSION_MISSING";case chrome.cast.ErrorCode.RECEIVER_UNAVAILABLE:return"RECEIVER_UNAVAILABLE";case chrome.cast.ErrorCode.SESSION_ERROR:return"SESSION_ERROR";case chrome.cast.ErrorCode.CHANNEL_ERROR:return"CHANNEL_ERROR";case chrome.cast.ErrorCode.LOAD_MEDIA_FAILED:return"LOAD_MEDIA_FAILED";default:return"CANCEL"}}function J$(t){if(t.items&&t.items.length>0&&Y(t.currentItemId)&&t.currentItemId>=0)return me(t.items,i=>i.itemId===t.currentItemId)}r(),r(),r(),r(),r();var Fn="urn:x-cast:com.theoplayer.cast";r(),r();var $$=function(t){return t.hqt="theoplayer_receiver_info",t.oqt="theoplayer_trackpropertychange",t.aqt="theoplayer_propertychange",t}({});r();var t0=function(t){return t.SKIP_AD="SKIP_AD",t}({});r();function Ln(t){h.createElement("img").src=t}r(),r(),r();var i0=new RegExp(/^(\d\d):(\d\d):(\d\d)(?:\.(\d{3}))?$/);function s0(t){if(!yo(t))return;const i=t.match(i0);return i?3600*x(i[1],10)+60*x(i[2],10)+Number(i[3])+(Number(i[4])||0)/1e3:void 0}function e0(t){if(void 0===t)return;const i=t.match(/^([1-9]?\d|100)%$/);return i?x(i[1])/100:void 0}function n0(t,i){return"vmap"===t.type||!Y(t.type)&&!Y(i)}function r0(t,i){return"vast"===t.type||!Y(t.type)&&Y(i)}r(),r(),r();var h0=class{},o0=class extends h0{get uqt(){return this.qc}cqt(){return null!=this.dqt||(this.dqt=vl(this.qc,t=>t.cqt())),this.dqt}constructor(t){super(),this.qc=void 0,this.dqt=void 0,this.qc=t.sort((t,i)=>t.VB-i.VB)}};r(),r();var a0=class extends h0{get o(){return this.lqt}get VB(){return this.fqt}get vqt(){return this._qt}constructor(t,i){super(),this.lqt=void 0,this.fqt=void 0,this._qt=void 0,this.lqt=t,this.fqt=i,this._qt=!1}},u0=class extends a0{get gqt(){return this.mqt}get pqt(){return this.wqt}get yqt(){return this.bqt}get Aqt(){return this.Sqt}get lt(){return this.$G}cqt(){if(void 0===this.Tqt){let t,i,s,e=[];for(const n of this.mqt)n.kqt&&(t=n.kqt),n.Eqt&&(i=n.Eqt),n.Rqt&&(s=n.Rqt),e=e.concat(n.universalAdIds);this.Tqt={Aqt:this.Aqt,kqt:t,xqt:i,Rqt:s,lt:this.lt,Iqt:e}}return[this.Tqt]}constructor(t,i,s,e,n,r,h){super(t,i),this.wqt=void 0,this.bqt=void 0,this.Sqt=void 0,this.mqt=void 0,this.$G=void 0,this.Tqt=void 0,this.wqt=s,this.bqt=e,this.Sqt=n,this.mqt=r,this.$G=h}};r(),r();var c0=class{get Pqt(){return this.Cqt}get Nqt(){return this.Dqt}constructor(t,i){this.Cqt=void 0,this.Dqt=void 0,this.Cqt=t,this.Dqt=i}},d0=class{get Bqt(){return this.Mqt}get Lqt(){return this.Oqt}get Fqt(){return this.Vqt}get Wqt(){return this.Uqt}get od(){return this.Gqt}set od(t){this.Gqt=t}get Xqt(){return this.Zqt}get Hqt(){return this.zqt}Yqt(){this.zqt=!0}get pqt(){return this.wqt}constructor(t,i,s,e,n,r){this.Mqt=void 0,this.Oqt=void 0,this.Vqt=void 0,this.Uqt=void 0,this.zqt=void 0,this.Zqt=void 0,this.Gqt=void 0,this.wqt=void 0,this.Mqt=t,this.Oqt=i,this.Vqt=s,this.Uqt=e,this.zqt=!1,this.Zqt=n,this.wqt=r}};r();var l0=function(t){return t.Kqt="all",t.qqt="any",t.oZ="none",t}({});var f0=class{get jqt(){return this.Qqt}get Jqt(){return this.$qt}constructor(t,i){this.Qqt=void 0,this.$qt=void 0,this.Qqt=t,this.$qt=i}},v0=class{get o(){return this.rS}get Ti(){return this.uA}get Mi(){return this.cA}get tjt(){return this.ijt}get sjt(){return this.ejt}get njt(){return this.rjt}get hjt(){return this.ojt}get ajt(){return this.ujt}get cjt(){return this.djt}get ljt(){return this.fjt}get Bqt(){return this.Mqt}get Lqt(){return this.Oqt}get Fqt(){return this.Vqt}get vjt(){return this._jt}get Nqt(){return this.gjt}get mjt(){return this.pjt}constructor(t,i,s,e,n,r,h,o,a,u,c,d,l,f,v,_){this.uA=void 0,this.cA=void 0,this.rS=void 0,this.ijt=void 0,this.ejt=void 0,this.rjt=void 0,this.ojt=void 0,this.ujt=void 0,this.djt=void 0,this.fjt=void 0,this.Mqt=void 0,this.Oqt=void 0,this.Vqt=void 0,this._jt=void 0,this.gjt=void 0,this.pjt=void 0,this.uA=t,this.cA=i,this.rS=s,this.ijt=e,this.ejt=n,this.rjt=r,this.ojt=h,this.ujt=o,this.djt=a,this.fjt=u,this.Mqt=c,this.Oqt=d,this.Vqt=l,this._jt=f,this.gjt=v,this.pjt=_}};r();var _0=class{get id(){return this.rS}get uri(){return this.eFt}constructor(t,i){this.rS=void 0,this.eFt=void 0,this.rS=t,this.eFt=i}},Wn=class{get wjt(){return this.yjt}get bjt(){return this.Ajt}get Sjt(){return this.Tjt}get kjt(){return this.Ejt}constructor(t,i,s,e){this.yjt=void 0,this.Ajt=void 0,this.Tjt=void 0,this.Ejt=void 0,this.yjt=t,this.Ajt=i,this.Tjt=s,this.Ejt=e}},g0=class extends a0{get Aqt(){return this.Sqt}get Rjt(){return this.xjt}get Ijt(){return this.Pjt}get gqt(){return this.mqt}get Cjt(){return this.Njt}get Djt(){return this.Bjt}get lt(){return this.$G}cqt(){return void 0===this.xjt?[]:(null!=this.dqt||(this.dqt=this.xjt.cqt().map(t=>this.Mjt(t))),this.dqt)}Mjt(t){let i,s,e;for(const t of this.gqt)t.kqt&&(i=t.kqt),t.Eqt&&(s=t.Eqt),t.Rqt&&(e=t.Rqt);const n=t.Aqt.concat(this.Aqt);let r=t.kqt;if(i&&t.kqt){const s=new Wn(t.kqt.Ljt.wjt,t.kqt.Ljt.bjt,t.kqt.Ljt.Sjt.concat(i.Ljt.Sjt),t.kqt.Ljt.kjt.concat(i.Ljt.kjt));r=t.kqt,r.Ljt=s,r.Nqt=r.Nqt.concat(i.Nqt)}let h=t.xqt;if(s&&s.Pqt){var o,a;const e=[];for(const t of s.Pqt)e.concat(t.Wqt.Sjt);const n=[];var u,c;for(const s of null!=(u=null==(o=t.xqt)?void 0:o.Pqt)?u:[]){var d,l,f;const r=new Wn(s.Wqt.wjt,s.Wqt.bjt,s.Wqt.Sjt.concat(e),(null!=(l=null==(d=t.kqt)?void 0:d.Ljt.kjt)?l:[]).concat(null!=(f=null==i?void 0:i.Ljt.kjt)?f:[]));n.push(new d0(s.Bqt,s.Lqt,s.Fqt,r,s.Xqt,s.pqt))}h=new c0(n,(null!=(c=null==(a=t.xqt)?void 0:a.Nqt)?c:[]).concat(s.Nqt))}let v=t.Rqt;if(v){var _;let i=v.jqt;var g,m;e&&e.jqt&&(i=e.jqt),v=new f0(i,(null!=(g=null==(_=t.Rqt)?void 0:_.Jqt)?g:[]).concat(null!=(m=null==e?void 0:e.Jqt)?m:[]))}let p=t.lt;return this.lt&&(p=this.lt),{Aqt:n,kqt:r,xqt:h,Rqt:v,lt:p,Iqt:t.Iqt}}constructor(t,i,s,e,n,r,h,o,a){super(t,i),this.Sqt=void 0,this.xjt=void 0,this.Pjt=void 0,this.Njt=void 0,this.Bjt=void 0,this.mqt=void 0,this.$G=void 0,this.dqt=void 0,this.Sqt=s,this.xjt=e,this.Pjt=n,this.mqt=r,this.Njt=h,this.Bjt=o,this.$G=a}};r();var m0=class{get o(){return this.rS}get Ojt(){return this.Fjt}get Vjt(){return this.Wjt}get ajt(){return this.ujt}get kqt(){return this.Ujt}get Eqt(){return this.Gjt}get Rqt(){return this.Xjt}get universalAdIds(){return this.Zjt}constructor(t,i,s,e,n,r,h,o){this.rS=void 0,this.Fjt=void 0,this.Wjt=void 0,this.ujt=void 0,this.Ujt=void 0,this.Gjt=void 0,this.Xjt=void 0,this.Zjt=void 0,this.rS=t,this.Fjt=i,this.Wjt=s,this.ujt=e,this.Ujt=n,this.Gjt=r,this.Xjt=h,this.Zjt=o}};r();var p0=class{get ct(){return this.Hjt}get zjt(){return this.Yjt}get Nqt(){return this.Dqt}set Nqt(t){this.Dqt=t}set Ljt(t){this.Kjt=t}get Ljt(){return this.Kjt}get qjt(){return this.jjt}set qjt(t){this.jjt=t}get Qjt(){return this.zqt}get od(){return this.Gqt}set od(t){this.Gqt=t}get Xqt(){return this.Zqt}get pqt(){return this.wqt}Yqt(){this.zqt=!0}get Jjt(){return this.$jt}set Jjt(t){this.$jt=t}get tQt(){return this.iQt}get sQt(){return this.eQt}constructor(t,i,s,e,n,r,h,o,a){this.Hjt=void 0,this.Yjt=void 0,this.$jt=void 0,this.Dqt=void 0,this.Kjt=void 0,this.jjt=void 0,this.zqt=void 0,this.Zqt=void 0,this.Gqt=void 0,this.wqt=void 0,this.iQt=void 0,this.eQt=void 0,this.Hjt=t,this.Yjt=i,this.Dqt=s,this.Kjt=e,this.jjt=n,this.zqt=!1,this.Zqt=r,this.wqt=h,this.iQt=o,this.eQt=a}};function Ao(t,i){return y0(t)&&t.getAttribute(i)||void 0}function fl(t,i){return w0(t,i,void 0,!1)}function w0(t,i,s,e){return i===(t.localName?t.localName:t.nodeName)&&(e&&s?s===t.namespaceURI:!s||!t.namespaceURI||s===t.namespaceURI)}function N(t,i){const s=[];for(let e=0;e<t.childNodes.length;e+=1){const n=t.childNodes.item(e);y0(n)&&fl(n,i)&&s.push(n)}return s}function y0(t){return t&&1===t.nodeType}function b0(t,i){const s=(new DOMParser).parseFromString(t,i);if(!s||s.getElementsByTagName("parsererror").length>0)throw new m('Invalid document for MIME type "'+i+'"');return s}function Uc(t){return t.replace(/[<>&'"]/g,t=>{switch(t){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case"'":return"&apos;";case'"':return"&quot;";default:return t}})}function A0(t){return"data:application/xml,"+encodeURIComponent(t)}r(),r();var Sc=function(t){return t.nQt="mute",t.rQt="unmute",t.zw="pause",t.hQt="resume",t.oQt="rewind",t.aQt="skip",t.uQt="playerExpand",t.cQt="playerCollapse",t.dQt="fullscreen",t.lQt="exitFullscreen",t.fQt="expand",t.COLLAPSE="collapse",t.BSt="start",t.vQt="firstQuartile",t._Qt="thirdQuartile",t.gQt="midpoint",t.mQt="complete",t.pQt="acceptInvitationLinear",t.wQt="acceptInvitation",t.yQt="timeSpentViewing",t.bQt="otherAdInteraction",t.Yw="progress",t.AQt="creativeView",t.SQt="adExpand",t.TQt="adCollapse",t.kQt="minimize",t.EQt="close",t.RQt="closeLinear",t.xQt="overlayViewDuration",t.IQt="breakStart",t.PQt="breakEnd",t.ma="error",t}({});function S0(t){switch(t){case"breakStart":case"breakEnd":case"error":return!0;default:return!1}}var T0=["mute","unmute","pause","resume","rewind","skip","closeLinear","close","playerExpand","playerCollapse","fullscreen","exitFullscreen","expand","collapse","creativeView","start","firstQuartile","midpoint","thirdQuartile","complete","acceptInvitationLinear","acceptInvitation","timeSpentViewing","otherAdInteraction","progress"];function k0(t){return void 0!==t&&-1!==T0.indexOf(t)}var E0=["start","firstQuartile","midpoint","thirdQuartile","complete","mute","unmute","pause","resume","rewind","skip","playerExpand","playerCollapse","expand","collapse","fullscreen","exitFullscreen","creativeView","acceptInvitation","adExpand","adCollapse","minimize","close","overlayViewDuration","otherAdInteraction","progress"];function R0(t){return void 0!==t&&-1!==E0.indexOf(t)}var x0=["mute","unmute","pause","resume","rewind","skip","playerExpand","playerCollapse","creativeView"];function I0(t){return void 0!==t&&-1!==x0.indexOf(t)}function P0(t,i){if(void 0===t||""===t||void 0===i)return;let s=t.match(/^(\d+):(\d+):(\d+)$/);return s?C(s[1]||"0")+60*C(s[2]||"0")+C(s[3]||"0"):(s=t.match(/^(100|[1-9]\d|\d)%$/),s?C(s[1]||"0")*i/100:void 0)}var C0=class{get YH(){return this.CQt}get ac(){return this.NQt}get eventURL(){return this.DQt}constructor(t,i,s){this.CQt=void 0,this.NQt=void 0,this.DQt=void 0,this.CQt=t,this.NQt=i,this.DQt=s}};r();var N0=class{get BQt(){return this.MQt}constructor(t){this.MQt=void 0,this.MQt=t}},D0=class extends N0{get wjt(){return this.yjt}get mjt(){return this.pjt}get LQt(){return this.OQt}constructor(t,i,s,e){super(t),this.OQt=void 0,this.pjt=void 0,this.yjt=void 0,this.OQt=i,this.yjt=s,this.pjt=e}},B0=class extends N0{constructor(t){super(t)}},M0=class extends N0{constructor(t){super(t)}};r();var Sr={FQt:{Ky:100,Ey:"XML parsing error."},VQt:{Ky:303,Ey:"Empty or invalid VAST error."},WQt:{Ky:400,Ey:"General linear error"},UQt:{Ky:403,Ey:"Unsupported MIME-type or missing mediafiles error"},GQt:{Ky:500,Ey:"General nonlinear error"},bH:{Ky:900,Ey:"Network error"}},L0=class{get XQt(){return this.ZQt}HQt(t){if(!this.XQt)return;const i=this.XQt.replace(/\[ERRORCODE]/,""+t.Ky);Ln(i)}constructor(t){this.ZQt=void 0,this.ZQt=t}};r();var rs=class extends rl{get zQt(){return this.YQt}get KQt(){var t;return null!=(t=this.qQt)?t:900}constructor(t,i,s,e){super(s||i&&O0[i]||t,e),this.YQt=void 0,this.qQt=void 0,this.L2=void 0,this.YQt=t,this.qQt=i,this.L2=s}},Cu=function(t){return t.ADBLOCK="adblock",t.NETWORK="network",t.PARSING="parsing",t.PLAYBACK="playback",t.GENERAL="general",t}({}),De=function(t){return t[t.VAST_MALFORMED_RESPONSE=100]="VAST_MALFORMED_RESPONSE",t[t.VAST_SCHEMA_VALIDATION_ERROR=101]="VAST_SCHEMA_VALIDATION_ERROR",t[t.VAST_UNSUPPORTED_VERSION=102]="VAST_UNSUPPORTED_VERSION",t[t.VAST_TRAFFICKING_ERROR=200]="VAST_TRAFFICKING_ERROR",t[t.VAST_UNEXPECTED_LINEARITY=201]="VAST_UNEXPECTED_LINEARITY",t[t.VAST_UNEXPECTED_DURATION_ERROR=202]="VAST_UNEXPECTED_DURATION_ERROR",t[t.UNEXPECTED_SIZE=203]="UNEXPECTED_SIZE",t[t.VAST_WRAPPER_ERROR=300]="VAST_WRAPPER_ERROR",t[t.VAST_LOAD_TIMEOUT=301]="VAST_LOAD_TIMEOUT",t[t.VAST_TOO_MANY_REDIRECTS=302]="VAST_TOO_MANY_REDIRECTS",t[t.VAST_NO_ADS_AFTER_WRAPPER=303]="VAST_NO_ADS_AFTER_WRAPPER",t[t.GENERAL_LINEAR_ERROR=400]="GENERAL_LINEAR_ERROR",t[t.FILE_NOT_FOUND=401]="FILE_NOT_FOUND",t[t.VAST_MEDIA_LOAD_TIMEOUT=402]="VAST_MEDIA_LOAD_TIMEOUT",t[t.VAST_LINEAR_ASSET_MISMATCH=403]="VAST_LINEAR_ASSET_MISMATCH",t[t.VAST_PROBLEM_DISPLAYING_MEDIA_FILE=405]="VAST_PROBLEM_DISPLAYING_MEDIA_FILE",t[t.MEZZANINE_FILE_REQUIRES=406]="MEZZANINE_FILE_REQUIRES",t[t.MEZZANINE_FILE_DOWNLOADED_FIRST_TIME=407]="MEZZANINE_FILE_DOWNLOADED_FIRST_TIME",t[t.AD_IN_VAST_REJECTED=408]="AD_IN_VAST_REJECTED",t[t.INTERACTIVE_CREATIVE_NOT_EXECUTED=409]="INTERACTIVE_CREATIVE_NOT_EXECUTED",t[t.VERIFICATION_CODE_NOT_EXECUTED=410]="VERIFICATION_CODE_NOT_EXECUTED",t[t.GENERAL_NON_LINEAR_ERROR=500]="GENERAL_NON_LINEAR_ERROR",t[t.NONLINEAR_DIMENSIONS_ERROR=501]="NONLINEAR_DIMENSIONS_ERROR",t[t.OVERLAY_AD_LOADING_FAILED=502]="OVERLAY_AD_LOADING_FAILED",t[t.VAST_NONLINEAR_ASSET_MISMATCH=503]="VAST_NONLINEAR_ASSET_MISMATCH",t[t.GENERAL_COMPANION_AD_ERROR=600]="GENERAL_COMPANION_AD_ERROR",t[t.INVALID_DIMENSIONS_COMPANION_AD=601]="INVALID_DIMENSIONS_COMPANION_AD",t[t.COMPANION_REQUIRED_ERROR=602]="COMPANION_REQUIRED_ERROR",t[t.COMPANION_AD_LOADING_FAILED=603]="COMPANION_AD_LOADING_FAILED",t[t.UNABLE_TO_FIND_SUPPORTED_COMPANION=604]="UNABLE_TO_FIND_SUPPORTED_COMPANION",t[t.UNKNOWN_ERROR=900]="UNKNOWN_ERROR",t[t.GENERAL_VPAID_ERROR=901]="GENERAL_VPAID_ERROR",t[t.MALFORMED_URI=1005]="MALFORMED_URI",t[t.VAST_ASSET_NOT_FOUND=1007]="VAST_ASSET_NOT_FOUND",t[t.VAST_EMPTY_RESPONSE=1009]="VAST_EMPTY_RESPONSE",t[t.UNKNOWN_AD_RESPONSE=1010]="UNKNOWN_AD_RESPONSE",t[t.UNSUPPORTED_LOCALE=1011]="UNSUPPORTED_LOCALE",t[t.INVALID_ARGUMENTS=1101]="INVALID_ARGUMENTS",t[t.INVALID_ADX_EXTENSION=1105]="INVALID_ADX_EXTENSION",t[t.AUTOPLAY_DISALLOWED=1205]="AUTOPLAY_DISALLOWED",t}({}),O0={100:"XML parsing error.",101:"VAST schema validation error.",102:"VAST version of response not supported.",200:"Trafficking error. The video player received an ad type that it was not expecting and/or cannot display.",201:"Video player expecting different linearity.",202:"Video player expecting different duration.",203:"Video player expecting different size.",300:"General wrapper error.",301:"Timeout of VAST URI provided in wrapper element, or of VAST URI provided in a subsequent wrapper element. This includes request errors such as invalid URI, unreachable or request timeout for URI, and security or other exceptions related to requesting a VAST URI.",302:"Wrapper limit reached, as defined by the video player. Too many wrapper responses have been received with no InLine response. This can be caused by a circular loop of daisy chaining (one network bouncing to another and another).",303:"No ads VAST response after one or more wrappers. This also includes the number of empty VAST responses from fallback.",400:"General linear error. The video player is unable to display the linear ad.",401:"File not found. Unable to find Linear/MediaFile from URI.",402:"Unable to download or timeout of MediaFile URI.",403:"Could not find a media file that is supported by this video player, based on the attributes of the MediaFile element.",405:"Problem displaying a media file.",406:"A mezzanine file was required, but not provided.",407:"The mezzanine file was downloaded for the first time, so the ad did not serve. This can occur when an ad insertion is missed because the creative is being transcoded. It continues to occur until the creative is available for insertion.",408:"The ad returned in the VAST response was rejected.",409:"The interactive creative defined in the InteractiveCreativeFile node was not executed.",410:"The code referenced in the Verification node was not executed.",500:"General NonLinearAds error.",501:"Unable to display non-linear ad because creative dimensions do not align with creative display area (in other words, the creative dimension was too large). This can occur if you use CSS styles to set width and height of the video ,content element. You should instead use the width and height HTML attributes.",502:"Unable to fetch NonLinearAds/NonLinear resource.",503:"Could not find NonLinearResource with supported type. This can occur when a creative size is larger than the player size.",600:"General CompanionAds error.",601:"Unable to display companion because creative dimensions do not fit within the companion display area (in other words, space was not available).",602:"Unable to display required companion.",603:"Unable to fetch CompanionAds/Companion resource.",604:"Could not find Companion resource with supported type.",900:"VAST 2 error. Even if you request VAST 3 or your DFP network default is VAST 3, this can occur if you have a VAST redirect that returns a VAST 2 response.",901:"General VPAID error",1005:"URI malformed."};function F0(t){if(!t)return!1;switch(t.toLocaleLowerCase()){case We.fP:case We.vP:case We.lP:return!0;default:return!1}}function V0(t){const i=mr();return!!(F0(t)||t&&i&&(null==i?void 0:i.canPlayType)&&i.canPlayType(t))||(U0("Invalid or unsupported MediaFile Content delivery type, skipping mediafile"),!1)}function W0(t,i){for(const s of i){new L0(s).HQt(t)}}function U0(t){0}r(),r();var G0=class{get jQt(){return this.QQt}get JQt(){return this.$Qt}constructor(t,i){this.QQt=void 0,this.$Qt=void 0,this.QQt=t,this.$Qt=i}},X0=class t{async tJt(i,s){if(n0(i.sources,i.timeOffset)){const e=await t.iJt(i.sources.src,s),n=e&&e.documentElement;if(!n)throw new rs(Cu.NETWORK,De.VAST_SCHEMA_VALIDATION_ERROR,"Ad source is not a valid XML document.");if(fl(n,"VMAP"))return await this.sJt(n,i,s);if(fl(n,"VAST")){const t=await this.eJt(n,s,!1);if(t){const s=new Y0("",!0,!0,t);return[new H0("start",s,Z0.nJt,"",[],!1,!0,i)]}return[]}throw new rs(Cu.GENERAL,De.VAST_MALFORMED_RESPONSE,"Only VMAP and VAST files are allowed as ad source.")}if(r0(i.sources,i.timeOffset))return[new z0(String(i.timeOffset),i,s)];throw new rs(Cu.GENERAL,De.VAST_MALFORMED_RESPONSE,"Something went wrong parsing the ad source; only VMAP and VAST files are allowed as ad source.")}async rJt(i,s,e,n){let r;void 0===n&&(n=[]);try{r=await t.iJt(i,s)}catch(t){throw W0(t instanceof rs&&t.KQt===De.VAST_MALFORMED_RESPONSE?Sr.VQt:Sr.bH,n),t}const h=r&&r.documentElement;if(h&&fl(h,"VAST"))return await this.eJt(h,s,e,n);h&&fl(h,"VMAP")&&Si("Received VMAP ad when expecting VAST. Please set the type of your ad source in the configuration, or make sure to not set a timeOffset for VMAP ad sources. VMAP ads have their own offsets included.")}async hJt(t,i,s,e){var n;if(!(null==(n=t.sources)?void 0:n.src))throw new rs(Cu.GENERAL,De.MALFORMED_URI,"Property src on adSource is missing.");const r=await this.rJt(t.sources.src,e,!1),h=new Y0("",!0,!0,r),o=new H0(i,h,Z0.nJt,"",[],!1,!0,t);return o.oJt=s,o}static async requestSuccessOnly(t,i){let s;try{s=await i.dk(t)}catch(t){throw new rs(Cu.NETWORK,De.UNKNOWN_ERROR,"Something went wrong while requesting xml from server.",t)}if(!Mr(s))throw new rs(Cu.NETWORK,De.UNKNOWN_ERROR,"Something went wrong while requesting xml from server.");return s}static async iJt(t,i){const s=new F({Yu:t,ck:Bi.DT,Fk:ci.GET}),e=await this.requestSuccessOnly(s,i);try{return function(t){return b0(t,"text/xml")}(await e.hk())}catch(t){throw new rs(Cu.NETWORK,De.VAST_MALFORMED_RESPONSE,"The ad source could not be loaded.")}}async eJt(t,i,s,e){void 0===e&&(e=[]);const n=[],r=[],h=[];if(!t||!fl(t,"VAST")){if(W0(Sr.VQt,e),s)throw new rs(Cu.PARSING,De.VAST_NO_ADS_AFTER_WRAPPER,"No VAST element found after wrapper.");throw new rs(Cu.PARSING,De.VAST_EMPTY_RESPONSE,"The VAST element was empty.")}if(0!==N(t,"Ad").length){for(const s of N(t,"Ad"))try{const t=await this.aJt(s,i,e);0===t.VB?n.push(t):r.push(t)}catch(t){h.push(t)}if(0===n.length&&0===r.length&&h.length>0)throw h[0];if(1===n.length&&0===r.length)return n[0];if(0===n.length&&0!==r.length)return new o0(r);if(n.length>0||r.length>0)return new o0(r.concat(n))}if(0!==N(t,"Error").length)for(const i of N(t,"Error")){U0(Sr.VQt.Ey);const t=i.textContent;t&&e.push(t.trim())}if(W0(Sr.VQt,e),s)throw new rs(Cu.PARSING,De.VAST_NO_ADS_AFTER_WRAPPER,"No VAST element found after wrapper.");throw new rs(Cu.PARSING,De.VAST_EMPTY_RESPONSE,"The VAST element was empty.")}async sJt(t,i,s){const e=[],n=N(t,"AdBreak");if(0===n.length)throw new rs(Cu.PARSING,De.VAST_EMPTY_RESPONSE,"The VMAP element was empty.");for(const t of n)try{const n=await this.uJt(t,i,s);n&&e.push(n)}catch(t){Zd.dp(t)}return e}async aJt(i,s,e){const n=Ao(i,"id")||"";let r=os(Ao(i,"sequence"));r||(r=0);const h=N(i,"InLine"),o=N(i,"Wrapper");if(0!==o.length)return await this.cJt(o[0],n,r,s,e);if(0!==h.length)return t.dJt(h[0],n,r,e);throw new rs(Cu.PARSING,De.VAST_SCHEMA_VALIDATION_ERROR,"An Ad tag without a Wrapper or inline element cannot be parsed")}static dJt(i,s,e,n){const r=N(i,"Error")[0];let h;r&&r.textContent&&(h=r.textContent,n.push(h));const o=t.lJt(N(i,"Extensions")[0]),a=N(i,"AdSystem")[0];let u,c="";a&&(c=a.textContent||c);const d=N(i,"AdTitle")[0];d&&(u=d.textContent||void 0);const l=[];for(const t of N(i,"Impression"))t.textContent&&l.push(t.textContent);const f=t.fJt(N(i,"Creatives")[0],c,o,n);return new u0(s,e,c,u,l,f,new L0(h))}async cJt(i,s,e,n,r){const h=N(i,"Error")[0];let o="";h&&h.textContent&&(o=h.textContent,r.push(o));const a=N(i,"AdSystem")[0];let u="";a&&(u=a.textContent||u);const c=[];for(const t of N(i,"Impression"))t.textContent&&c.push(t.textContent);const d=N(i,"VASTAdTagURI")[0];let l="";d&&d.textContent&&(l=d.textContent);const f=await this.rJt(l,n,!0,r),v=t.lJt(N(i,"Extensions")[0]),_=N(i,"Creatives")[0];let g=[];_&&(g=t.vJt(_,u,v,r));let m=Tn(Ao(i,"followAdditionalWrappers"));m||(m=!0);let p=Tn(Ao(i,"allowMultipleAds"));p||(p=!0);let w=Tn(Ao(i,"fallbackOnNoAd"));return w||(w=!1),new g0(s,e,c,f,m,g,p,w,new L0(o))}static vJt(i,s,e,n){const r=[];for(const h of N(i,"Creative")){let i=Ao(h,"id");i||(i="");let o=os(Ao(h,"sequence"));o||(o=0);let a=Ao(h,"adId");a||(a="");const u=N(h,"Linear")[0];let c;u&&(c=t._Jt(u,"wrapper",i,s,e,n));const d=N(h,"NonLinearAds")[0];let l,f;if(d)try{f=t.gJt(d,i,s),l=f}catch(t){}const v=N(h,"CompanionAds")[0];let _;v&&(_=t.mJt(v)),r.push(new m0(i,a,o,"",c,l,_,[]))}return r}static fJt(i,s,e,n){const r=[];for(const h of N(i,"Creative")){let i=Ao(h,"id");i||(i="");let o=os(Ao(h,"sequence"));o||(o=0);let a=Ao(h,"adId");a||(a="");let u=Ao(h,"apiFramework");u||(u="");const c=N(h,"Linear")[0];let d;if(c)try{d=t._Jt(c,"inline",i,s,e,n)}catch(t){}if(0===(null==d?void 0:d.ct))throw new rs(Cu.PARSING,De.VAST_UNEXPECTED_DURATION_ERROR,"The VAST response had a duration of 0 seconds, so skipping the ad(s).");const l=N(h,"NonLinearAds")[0];let f,v;if(l)try{v=t.gJt(l,i,s),f=v}catch(t){}const _=N(h,"CompanionAds")[0];let g;_&&(g=t.mJt(_));const m=N(h,"UniversalAdId"),p=t.parseUniversalAdIds(m);r.push(new m0(i,a,o,u,d,f,g,p))}return r}static lJt(t){const i=[];if(!t)return i;for(const e of N(t,"Extension")){var s;const t=null!=(s=Ao(e,"type"))?s:"",n=e.outerHTML;i.push({type:t,xml:n})}return i}static _Jt(i,s,e,n,r,h){const o=N(i,"Duration")[0];let a=0;if(o)a=s0(o.textContent)||0;else if(!o&&"inline"===s)throw new rs(Cu.PARSING,De.VAST_SCHEMA_VALIDATION_ERROR,"Missing duration element in inLine linear");const u=Ao(i,"skipoffset");let c=-1;if(u){let t=s0(u);if(void 0===t&&u.indexOf("%")>-1){const i=_.abs(Number(u.replace(/(?![0-9])./g,"")))/100;S(i)||(t=a*i)}void 0!==t&&(c=t)}const d=N(i,"MediaFiles")[0];let l=[],f=[];if(d&&(l=function(t,i){const s=[];for(const e of N(t,"MediaFile")){const t=Ao(e,"delivery"),n=Ao(e,"type");if(!n){U0();continue}if(!i(n))continue;let r=os(Ao(e,"width")),h=os(Ao(e,"height"));r||(U0(),r=0),h||(U0(),h=0);const o={delivery:t,type:n,width:r,height:h,contentURL:""+e.textContent};s.push(o)}return s}(d,V0),f=function(t){const i=N(t,"ClosedCaptionFiles");if(0===i.length)return[];const s=i[0],e=[];for(const t of N(s,"ClosedCaptionFile")){const i=Ao(t,"type");i||U0();const s=Ao(t,"language");s||U0();const n={type:null!=i?i:"",language:null!=s?s:"",contentURL:(""+t.textContent).trim()};e.push(n)}return e}(d)),"inline"===s&&(!d||0===l.length))throw W0(Sr.UQt,h),new rs(Cu.PARSING,De.VAST_LINEAR_ASSET_MISMATCH,"Missing MediaFiles in linear element");const v=N(i,"TrackingEvents")[0];let g=[];v&&(g=t.pJt(v,k0,"linear"));const m=N(i,"VideoClicks")[0],p=t.wJt(m);return new p0(a,l,g,p,c,e,n,f,r)}static wJt(i){if(!i)return new Wn("","",[],[]);const s=N(i,"ClickThrough")[0];let e,n="";s&&(e=s.textContent||void 0,n=Ao(s,"id")||"");const r=t.yJt(N(i,"ClickTracking")),h=t.yJt(N(i,"CustomClick"));return new Wn(e,n,r,h)}static yJt(t){const i=[];for(const s of t){const t=s.textContent;if(!t)continue;const e=Ao(s,"id")||"";i.push(new _0(e,t))}return i}static pJt(t,i,s){const e=[];for(const n of N(t,"Tracking")){const r=Ao(n,"event");if(!i(r)){U0();continue}let h="";"linear"===s&&(h=Ao(t,"offset")||"0");const o=n.textContent;o&&e.push(new C0(r,h,o))}return e}static gJt(i,s,e){const n=[];for(const r of N(i,"NonLinear")){const i=N(r,"NonLinearClickThrough")[0];let h;i&&(h=i.textContent||void 0);const o=t.yJt(N(r,"NonLinearClickTracking")),a=N(r,"StaticResource")[0];let u;if(a&&a.parentNode){const t=Ao(a,"creativeType"),i=a.textContent||"",s=N(a.parentNode,"NonLinearClickThrough")[0];let e="";s&&(e=s.textContent||""),u=new D0(i,t,e,"")}const c=t.bJt(r),d=t.parseHtmlResource(r);if(!u&&!c&&!d){U0();continue}const l=new Wn(h,"",o,[]);n.push(new d0(u,c,d,l,s,e))}if(0===n.length)throw new rs(Cu.PARSING,De.VAST_SCHEMA_VALIDATION_ERROR,"nonLinearAds element found with no nonLinear elements");const r=N(i,"TrackingEvents")[0];let h=[];return r&&(h=t.pJt(r,R0,"nonlinear")),new c0(n,h)}static parseUniversalAdIds(t){const i=[];for(const r of t){var s;const t=null!=(s=Ao(r,"idRegistry"))?s:"";var e,n;const h=null!=(n=null!=(e=Ao(r,"idValue"))?e:r.textContent)?n:"";i.push(new G0(t,h))}return i}static mJt(i){let s=Ao(i,"requiredType");(function(t){switch(t){case"all":case"any":case"none":return!0;default:return!1}})(s)||(s=l0.oZ);const e=[];for(const s of N(i,"Companion")){let i=os(Ao(s,"width")),n=os(Ao(s,"height")),r=Ao(s,"id"),h=os(Ao(s,"assetWidth")),o=os(Ao(s,"assetHeight")),a=os(Ao(s,"expandedWidth")),u=os(Ao(s,"rxpandedHeight")),c=Ao(s,"apiFramework"),d=Ao(s,"adSlotId"),l=os(Ao(s,"pxratio"));const f=N(s,"AltText")[0];let v=f?f.textContent:"";i||(U0(),i=0),n||(U0(),n=0),r||(r=""),h||(h=0),o||(o=0),a||(a=0),u||(u=0),c||(c=""),d||(d=""),l||(l=1),v||(v="");const _=t.AJt(s),g=t.bJt(s),m=t.parseHtmlResource(s),p=N(s,"TrackingEvents")[0];let w=[];p&&(w=t.pJt(p,I0,"companion"));const y=N(s,"CompanionClickThrough")[0];let b;y&&(b=y.textContent||void 0);const A=t.yJt(N(s,"CompanionClickTracking"));(_||g||m)&&e.push(new v0(i,n,r,h,o,a,u,c,d,l,_,g,m,new Wn(b,"",A,[]),w,v))}return new f0(s,e)}static AJt(t){const i=N(t,"StaticResource")[0];let s;if(i&&i.parentNode){let t=Ao(i,"creativeType");t||(t="");const e=i.textContent,n=N(i.parentNode,"AltText")[0],r=N(i.parentNode,"CompanionClickThrough")[0];let h,o="";n&&(o=n.textContent||""),r&&(h=r.textContent||void 0),e&&(s=new D0(e,t,h,o))}return s}static bJt(t){const i=N(t,"IFrameResource")[0];let s;if(i){const t=i.textContent||"";s=new B0(t)}return s}static parseHtmlResource(t){const i=N(t,"HTMLResource")[0];let s;if(i){const t=i.textContent||"";s=new M0(t)}return s}async uJt(i,s,e){const n=Ao(i,"timeOffset")||"0",r=Ao(i,"breakType")||Z0.gk;let h=Ao(i,"breakId"),o=Tn(Ao(i,"repeatAfter"));if(void 0===h&&(h=""),void 0===o&&(o=!1),!(void 0!==Pa.SJt(n)))throw new rs(Cu.PARSING,De.VAST_SCHEMA_VALIDATION_ERROR,"Invalid TimeOffset type");const a=N(i,"AdSource")[0],u=N(i,"TrackingEvents")[0];let c=[];u&&(c=t.pJt(u,S0,"vmap"));let d=Ao(a,"id");d||(d="");let l=Tn(Ao(a,"allowMultipleAds"));void 0===l&&(l=!0);let f=Tn(Ao(a,"followRedirects"));f||(f=!0);const v=N(a,"AdTagURI")[0];let _="";const g=N(a,"VASTAdData")[0];if(!v||!v.textContent){if(g){if(g.firstElementChild&&w0(g.firstElementChild,"VAST")){const t=await this.eJt(g.firstElementChild,e,!1);if(t){const i=new Y0(d,l,f,t);return new H0(n,i,r,h,c,o,!1,s)}return}throw new rs(Cu.PARSING,De.VAST_SCHEMA_VALIDATION_ERROR,"vmap:VASTAdData does not have a VAST-structure as a child element")}throw new rs(Cu.PARSING,De.VAST_SCHEMA_VALIDATION_ERROR,"Invalid AdTagURI source or invalid VASTAdData in Adbreak Element")}try{_=v.textContent;const t=Fa(s);return t.sources.src=_,new z0(n,t,e)}catch(t){return}}},Z0=function(t){return t.gk="",t.nJt="linear",t.TJt="nonlinear",t.kJt="display",t}({}),Pa=class{static EJt(t){switch(t){case"linear":case"nonlinear":case"display":return!0;default:return!1}}static RJt(t){}static xJt(t){if(void 0!==t)return"start"===t?0:"end"===t?-1:void 0}static IJt(t){const i=t.split(":");let s=0;return s+=3600*Number(i[0]),s+=60*Number(i[1]),s+=Number(i[2]),s}static PJt(t){if(t<=0)return"00:00:00.000";const i=_.floor(t),s=t-i;return this.CJt(i/3600,2)+":"+this.CJt(i/60%60,2)+":"+this.CJt(i%60,2)+"."+this.CJt(1e3*s,3)}static CJt(t,i){return("00"+_.floor(t)).slice(-i)}static NJt(t,i){const s=this.SJt(t);if(0===s)switch(t){case"start":return 0;case"end":return-1}else{if(2===s)return e0(t)*i;if(1===s)return s0(t);if(3===s)return this.xJt(t);if(4===s){const i=Number(t);if(!S(i)&&i>=-1)return i}}}static SJt(t){return"start"===t||"end"===t?0:void 0!==s0(t.toString())?1:void 0!==e0(t.toString())?2:void 0!==this.RJt(t.toString())?3:S(Number(t))?void 0:4}},H0=class{get DJt(){return this.BJt.integration}get MJt(){return this.LJt}get fOt(){return this.OJt}get qjt(){return this.jjt}set qjt(t){this.jjt=t}get Nqt(){return this.gjt}get FJt(){return this.VJt}get WJt(){return this.UJt}get Lnt(){return this.BJt}get GJt(){return this.oJt.dd}get W(){return!0}Un(){return Promise.resolve()}get oJt(){return this.XJt}set oJt(t){this.XJt=t}constructor(t,i,s,e,n,r,h,o){this.LJt=void 0,this.gjt=void 0,this.OJt=void 0,this.jjt=-1,this.ZJt=void 0,this.VJt=void 0,this.UJt=void 0,this.HJt=void 0,this.BJt=void 0,this.XJt=void 0,this.LJt=i,this.OJt=t,this.ZJt=s,this.VJt=e,this.UJt=r,this.gjt=n,this.HJt=h,this.BJt=o}},z0=class{get DJt(){return this.Gqt.DJt}get MJt(){return this.Gqt.MJt}get fOt(){return this.Gqt.fOt}get qjt(){return this.Gqt.qjt}set qjt(t){this.Gqt.qjt=t}get Nqt(){return this.Gqt.Nqt}get FJt(){return this.Gqt.FJt}get WJt(){return this.Gqt.WJt}get Lnt(){return this.Gqt.Lnt}get GJt(){return this.Gqt.GJt}get W(){return this.aE}Un(){var t;return null!=(t=this.zJt)?t:this.zJt=this.dE()}async dE(){const t=new X0;this.Gqt=await t.hJt(this.Lnt,this.fOt,this.oJt,this.rW),this.aE=!0}get oJt(){return this.Gqt.oJt}set oJt(t){this.Gqt.oJt=t}constructor(t,i,s){this.Gqt=void 0,this.zJt=void 0,this.aE=!1,this.rW=void 0,this.rW=s,this.Gqt=new H0(t,void 0,"","",[],!1,!1,i)}},Y0=class{get o(){return this.rS}get Cjt(){return this.YJt}get KJt(){return this.qJt}get uqt(){return this.jJt}constructor(t,i,s,e){this.rS=void 0,this.YJt=void 0,this.qJt=void 0,this.jJt=void 0,this.rS=t,this.YJt=i,this.jJt=e,this.qJt=s}};function K0(t,i){let s;if(t.vastAdsRequest&&(s=function(t){if(t.adTagUrl)return t.adTagUrl;if(t.adsResponse)return A0(t.adsResponse);return}(t.vastAdsRequest)),!s){const i=function(t){const i=t.contentUrl||t.contentId;if(!i)return;const s=t.contentType||"video/mp4",e=ue(s)||hk(s)?"streaming":"progressive",n=void 0!==t.duration?"<Duration>"+Pa.PJt(t.duration)+"</Duration>":"",r=void 0!==t.whenSkippable&&t.whenSkippable>=0?' skipoffset="'+Pa.PJt(t.whenSkippable)+'"':"",h='<MediaFile delivery="'+e+'" type="'+s+'">'+Uc(i)+"</MediaFile>",o=t.clickThroughUrl?"<VideoClicks><ClickThrough>"+Uc(t.clickThroughUrl)+"</ClickThrough></VideoClicks>":"",a="<Linear"+r+">"+n+"<MediaFiles>"+h+"</MediaFiles>"+o+"</Linear>",u=t.title?"<AdTitle>"+Uc(t.title)+"</AdTitle>":"";return'<VAST version="3.0"><Ad>'+u+"<InLine><Creatives><Creative>"+a+"</Creative></Creatives></InLine></Ad></VAST>"}(t);i&&(s=A0(i))}const e=t.customData;if(s){const n={integration:null==e?void 0:e.integration,sources:{src:s,type:"vast"},timeOffset:i};return n.integration&&"csai"!==n.integration&&"theo"!==n.integration||(n.skipOffset=t.whenSkippable),n}}var q0=function(t){return t.QJt="error",t.JJt="sourceupdate",t}({}),j0=class extends sh{constructor(t){super("error"),this.lt=void 0,this.lt=t}},Q0=class extends sh{constructor(t,i){super("sourceupdate"),this.bt=void 0,this.Mc=void 0,this.bt=t,this.Mc=i}},J0=class extends fr{get YN(){return this.$Jt}t$t(t){this.i$t.t$t(t)}s$t(t){this.i$t.s$t(t)}e$t(t){this.i$t.e$t(t)}n$t(t){this.i$t.n$t(t)}r$t(t){this.$Jt.addUpdateListener(t)}h$t(t){this.$Jt.removeUpdateListener(t)}o$t(){const t=new gs,i=new chrome.cast.media.GetStatusRequest;return this.$Jt.getStatus(i,()=>{t.Hy({bt:this.LR(),Mc:this.nu()})},i=>t.zy(i)),t.Yy}LR(){var t;return null==(t=this.$Jt.customData)?void 0:t.currentSource}nu(){var t;let i;if(null==(t=this.qDt.a$t())?void 0:t.version){var s;i=null==(s=this.$Jt.customData)?void 0:s.sourceDescription}else{var e;const t=null==(e=J$(this.$Jt))?void 0:e.customData;(function(t){return Nc(t)&&t.theoplayer_version>=1&&Y(t.streamStart)&&Y(t.isLive)&&Y(t.sourceDescription)})(t)&&(i=t.sourceDescription),i||(i=function(t){return{sources:[{src:t.contentId,type:t.contentType}],ads:$0(t)}}(this.$Jt.media))}return i}zx(){const t=new chrome.cast.media.PauseRequest;this.$Jt.pause(t,ol,this.u$t)}Kx(){const t=new chrome.cast.media.StopRequest;this.$Jt.stop(t,ol,this.u$t)}Yx(){const t=new chrome.cast.media.PlayRequest;this.$Jt.play(t,ol,this.u$t)}By(t,i){const s=new chrome.cast.media.SeekRequest;return s.currentTime=t,s.resumeState=i?chrome.cast.media.ResumeState.PLAYBACK_PAUSE:chrome.cast.media.ResumeState.PLAYBACK_START,new Promise((t,i)=>{this.$Jt.seek(s,t,t=>{var s;i(new ms(Q$(t.code),null!=(s=t.description)?s:void 0))})})}gx(t){this.i$t.vst(Fn,function(t){return{type:$$.aqt,properties:{playbackRate:t}}}(t)).catch(this.c$t)}d$t(t){const i=new chrome.cast.media.EditTracksInfoRequest(t);this.$Jt.editTracksInfo(i,ol,this.u$t)}l$t(){return this.$Jt.getEstimatedTime()}f$t(){return this.$Jt.getEstimatedBreakClipTime()}v$t(){return this.$Jt.getEstimatedBreakTime()}_$t(){this.i$t.vst("urn:x-cast:com.google.cast.media",{type:t0.SKIP_AD,requestId:this.g$t++,mediaSessionId:this.$Jt.mediaSessionId}).catch(this.c$t)}kn(){this.Vo()}constructor(t,i,s){super(i),this.qDt=void 0,this.i$t=void 0,this.$Jt=void 0,this.g$t=0,this.c$t=t=>{this.So(new j0(t))},this.u$t=t=>{var i;const s=new ms(Q$(t.code),null!=(i=t.description)?i:void 0);this.c$t(s)},this.qDt=t,this.i$t=i,this.$Jt=s}};function $0(t){return t.vmapAdsRequest&&t.vmapAdsRequest.adTagUrl?[{sources:{src:t.vmapAdsRequest.adTagUrl,type:"vmap"}}]:t.breaks&&t.breakClips?vl(t.breaks,i=>function(t,i){const s=[];if(t.isWatched)return s;for(const e of t.breakClipIds){const n=me(i,t=>t.id===e);if(n){const i=K0(n,t.position);i&&s.push(i)}}return s}(i,t.breakClips)):[]}r();var t1=class{m$t(t,i){this.qDt.addMessageListener(t,i)}p$t(t,i){this.qDt.removeMessageListener(t,i)}vst(t,i){return new Promise((s,e)=>{this.qDt.sendMessage(t,i,s,t=>{var i;e(new ms(Q$(t.code),null!=(i=t.description)?i:void 0))})})}kn(){}constructor(t){this.qDt=void 0,this.qDt=t}};function i1(t){return"vmap"===t||"adrule"===t}function s1(t){if(t)return yo(t)&&""!==t?{src:_o(t),type:void 0}:function(t){return Nc(t)&&Boolean(t.src)}(t)&&""!==t.src?{src:_o(t.src),type:e1(t.type)}:void 0}function e1(t){if(yo(t)){const i=t.toLowerCase();switch(i){case"vast":case"vmap":case"adrule":return i;default:return void Si("The ad source type provided in the configuration could not be recognized: '"+t+"'.")}}else t||Si("For better performance it is highly recommended to add the type to the configuration of your ad sources.")}function pl(t){if(void 0!==t&&""!==t&&("string"==typeof t||"number"==typeof t)){switch(t){case"start":case"00:00:00":case"00:00:00.000":case"0%":case"0":return 0;case"end":case"100%":return-1}if("string"==typeof t){if(function(t){return i0.test(t)}(t))return Pa.IJt(t);if(n1(t))return t}return Number(t)>=0?Number(t):void 0}}function n1(t){return new RegExp(/^\d{1,2}%$/).test(t)}function r1(t){const i=[],s=(t,e)=>{if(he(e))for(let i=0,n=e.length;i<n;i++){const n=Nc(e[i])&&e[i]?String(i):"";s(t+"["+encodeURIComponent(n)+"]",e[i])}else if(Nc(e))for(const i of w.keys(e))s(t+"["+encodeURIComponent(i)+"]",e[i]);else((t,s)=>{i.push(t+"="+encodeURIComponent(null!=s?s:""))})(t,String(e))};for(const i of w.keys(t))s(encodeURIComponent(i),t[i]);return i.join("&")}r(),r(),r();var h1=function(t){return t.hqt="receiver_info",t.ELt="event",t.w$t="propertychange",t.oqt="trackevent",t}({}),o1=class{y$t(t){let i;try{i=JSON.parse(t)}catch(t){0}return i}t$t(t){this.b$t.push(t)}s$t(t){is(this.b$t,t)}e$t(t){this.A$t.push(t)}n$t(t){is(this.A$t,t)}S$t(t){this.T$t=t}vst(t,i){return this.k$t.vst(t,i)}kn(){this.k$t.p$t(Fn,this.E$t),Lr(this.A$t),Lr(this.b$t),this.T$t=void 0}constructor(t){this.k$t=void 0,this.b$t=[],this.A$t=[],this.T$t=void 0,this.E$t=(t,i)=>{const s=this.y$t(i);if(s)if(s.type===h1.w$t)for(const t of this.b$t)for(const i of w.keys(s.properties))t(i,s.properties[i]);else if(s.type===h1.ELt)for(const t of this.A$t)t(s.event);else s.type===h1.oqt&&this.T$t&&s.event.trackState&&this.T$t(s.event.trackId,s.event.trackState.targetQualityIds)},this.k$t=t,this.k$t.m$t(Fn,this.E$t)}};r(),r();var Nr=function(t){return t.R$t="medialoadedchange",t._y="volumechange",t.QJt="casterror",t.x$t="playererror",t.I$t="targetqualitychanged",t.P$t="receiverinfochanged",t}({}),a1=class extends sh{constructor(){super("medialoadedchange")}},u1=class extends sh{constructor(t,i){super("volumechange"),this.Ox=void 0,this.ix=void 0,this.Ox=t,this.ix=i}},c1=class extends sh{constructor(t){super("casterror"),this.lt=void 0,this.lt=t}},d1=class extends sh{constructor(t){super("playererror"),this.lt=void 0,this.lt=t}},l1=class extends sh{constructor(t,i){super("targetqualitychanged"),this.QN=void 0,this.C$t=void 0,this.QN=t,this.C$t=i}},f1=class extends sh{constructor(){super("receiverinfochanged")}},v1=class extends fr{N$t(t,i,s){this.i$t.vst(Fn,function(t,i,s){return{type:$$.oqt,trackID:t,trackType:i,properties:{targetQuality:s}}}(t,i,s)).catch(this.c$t)}D$t(){this.k$t.m$t(Fn,this.B$t),this.i$t.vst(Fn,{type:$$.hqt}).catch(ol)}a$t(){return this.M$t}L$t(){return this.qDt.getSessionObj()}O$t(t){!this.F$t&&t&&t.idleReason!==chrome.cast.media.IdleReason.FINISHED&&(this.F$t=new J0(this,this.i$t,t),this.V$t(),this.So(new a1),this.F$t.r$t(this.W$t))}U$t(){return this.F$t}async G$t(t){const i=function(t){const i=function(t,i,s,e){const[n,r]=function(t){for(const s of t.sources)if(fk(s)){const t=s.src;if(t){var i;const e=null!=(i=s.type)?i:nk(t);if(_1(e))return[t,e]}}var s,e;return[null!=(s=jP(t))?s:"",null!=(e=KP(t))?e:""]}(t),h=new chrome.cast.media.MediaInfo(n,r);return h.metadata=j$(t.metadata,t.poster),h.streamType=e,function(t,i,s){const e=[],n=[];let r,h=0,o=0;for(const t of i){const i=s1(t.sources);if(i)if(n0(i,t.timeOffset))r=new chrome.cast.media.VastAdsRequest,r.adTagUrl=i.src;else if(r0(i,t.timeOffset)){var a;const r=null!=(a=t.timeOffset)?a:0,c=t.skipOffset;var u;const d=null!=(u=Pa.NJt(r,s))?u:0,l=void 0!==c?Pa.NJt(c,s):void 0,f=new chrome.cast.media.BreakClip("bc"+o++);f.vastAdsRequest=new chrome.cast.media.VastAdsRequest,f.vastAdsRequest.adTagUrl=i.src,f.whenSkippable=l,f.customData={integration:t.integration};let v=me(n,t=>t.position===d);void 0===v&&(v=new chrome.cast.media.Break("b"+h++,[],d),n.push(v)),v.breakClipIds.push(f.id),e.push(f)}else 0;else 0}t.breakClips=e,t.breaks=n,t.vmapAdsRequest=r}(h,i,s),h}(t.X$t,t.Jc,t.ct,t.b0),s=new chrome.cast.media.LoadRequest(i);return s.autoplay=!0,s.currentTime=t.OR,s.customData=t.Z$t,s}(t);let s;try{s=await this.qDt.loadMedia(i)}catch(t){s=t}if(s)throw new ms(Q$(s))}nx(t){this.L$t().setReceiverMuted(t,ol,this.H$t)}Vx(t){this.L$t().setReceiverVolumeLevel(t,ol,this.H$t)}z$t(){return this.L$t().receiver.friendlyName}kn(){this.Vo(),this.qDt.removeEventListener(cast.framework.SessionEventType.MEDIA_SESSION,this.Y$t),this.L$t().removeUpdateListener(this.V$t),this.k$t.p$t(Fn,this.B$t),this.i$t.kn(),this.k$t.kn()}constructor(t){super(),this.qDt=void 0,this.k$t=void 0,this.i$t=void 0,this.M$t=void 0,this.F$t=void 0,this.c$t=t=>{this.So(new c1(t))},this.K$t=(t,i)=>{"error"===t&&this.So(new d1(i))},this.q$t=(t,i)=>{this.So(new l1(t,i))},this.B$t=(t,i)=>{const s=JSON.parse(i);s.type===h1.hqt&&(this.M$t=s.info,this.So(new f1))},this.V$t=()=>{const t=this.L$t(),{level:i,muted:s}=t.receiver.volume;this.So(new u1(null!=i?i:void 0,null!=s?s:void 0))},this.Y$t=()=>this.O$t(this.qDt.getMediaSession()),this.W$t=t=>{var i;t||(null==(i=this.F$t)||i.h$t(this.W$t),this.F$t=void 0,this.So(new a1))},this.H$t=t=>{var i;const s=new ms(Q$(t.code),null!=(i=t.description)?i:void 0);this.c$t(s)},this.qDt=t,this.qDt.addEventListener(cast.framework.SessionEventType.MEDIA_SESSION,this.Y$t),this.k$t=new t1(t.getSessionObj()),this.i$t=new o1(this.k$t),this.i$t.t$t(this.K$t),this.i$t.S$t(this.q$t),this.L$t().addUpdateListener(this.V$t),this.V$t(),this.D$t();const i=this.qDt.getMediaSession();i&&this.O$t(i)}};function _1(t){switch(t){case We.fP:case We.lP:case We.vP:case We._P:return!0}return!1}var g1=function(t){return t.j$t="statechange",t}({}),m1=class extends sh{constructor(t){super("statechange"),this.qlt=void 0,this.qlt=t}};r(),r(),r(),r();var p1=class extends fr{Qet(){return this.qc}PR(){return ZT.tL()}FR(){return this.mZ+this.Q$t}Wet(){return this.FR()}DR(){}Nd(){return this.qb}XR(){return this.q5}ZR(){}lx(){return this.yZ}J$t(){}_x(){return this.bZ}gx(t){this.bZ!==t&&(this.bZ=t,this.So(new Fs(this.oa.OR,t)))}Tx(){return pi.VL}wx(){return ZT.tL()}Ex(){return ZT.tL()}xx(){return!1}ER(){return this.qL}Bx(){return this.JL}Cx(){return this.Gl}d$t(t){}Lx(){return this.$$t}Dx(){return this.t0t}Yx(){this.yZ=!1}zx(){this.yZ=!0}By(t){this.mZ=t-this.Q$t}i0t(){return this.Q$t}s0t(t){this.Q$t=t}Tnt(t){this.qc.Tnt(t)}Kx(){}kn(){this.Vo(),this.qL.kn(),this.JL.kn(),this.Gl.kn(),this.qc.kn()}constructor(t,i,s,e,n,r,h,o,a){super(),this.oa=void 0,this.mZ=void 0,this.qb=void 0,this.q5=void 0,this.yZ=void 0,this.bZ=void 0,this.Q$t=void 0,this.$$t=void 0,this.t0t=void 0,this.qL=void 0,this.JL=void 0,this.Gl=void 0,this.qc=void 0,this.oa=t,this.Q$t=0,this.qL=new O,this.JL=new O,this.Gl=new ou,this.qc=new AV,this.Q$t=i,this.mZ=s-i,this.qb=e,this.q5=n,this.yZ=r,this.bZ=h,this.$$t=o,this.t0t=a}};r(),r(),r(),r();var ma=function(t){return t.e0t="ccmodechangerequest",t.n0t="cctargetqualitychangerequest",t.r0t="cctrackchangerequest",t}({}),w1=class extends sh{constructor(t,i,s){super(ma.e0t),this.track=void 0,this.trackId=void 0,this.mode=void 0,this.track=t,this.trackId=i,this.mode=s}};r();var y1=function(t){return t.DT="TEXT",t.Ck="AUDIO",t.Nk="VIDEO",t}({}),b1=function(t){return t.OV="SUBTITLES",t.FV="CAPTIONS",t.VV="DESCRIPTIONS",t.Yn="CHAPTERS",t.WV="METADATA",t}({});function A1(t){return"AUDIO"===t.type}function S1(t){return"VIDEO"===t.type}function T1(t){return"TEXT"===t.type}var k1=class extends fr{get Ca(){return this.hu||(this.hu=ya(this)),this.hu}get Th(){return this.gO}set Th(t){t!==this.gO&&(this.gO=t,this.So(new nc(this)))}get q(){return this.f4}get L(){return this.v4}get Hk(){return this.Yo}set Hk(t){const i=Vu(t);this.Yo!==i&&(this.Yo=i,this.h0t!==i&&this.So(new w1(this,this.qI,i)),this.So(new Tu(this)))}get o0t(){return this.h0t}set o0t(t){const i=Vu(t),s=this.Yo!==i;this.Yo=i,this.h0t=i,s&&this.So(new Tu(this))}_4(t){return me(this.v4.CI,i=>i.o===t)}iP(t){this.Hk=t}a0t(t){}kn(){}hr(){}constructor(t){super(),this.o=void 0,this.qI=void 0,this.tP=void 0,this.Lt=void 0,this.bs=void 0,this.Sx=void 0,this.Kp=void 0,this.gO=void 0,this.l4=void 0,this.S4=void 0,this.v4=void 0,this.f4=void 0,this.Yo=void 0,this.h0t=void 0,this.hu=void 0;const i=t.customData;this.qI=Number(t.trackId)||0,this.o=""+(i&&i.id||this.qI),this.gO=i&&i.label||t.name||"",this.bs=i&&i.language||t.language||"",this.tP=i&&i.inBandMetadataTrackDispatchType||"",this.Lt=i&&i.kind||function(t){switch(t){case b1.OV:return D.OV;case b1.FV:return D.FV;case b1.VV:return D.VV;case b1.Yn:return D.Yn;case b1.WV:return D.WV}return}(t.subtype)||"subtitles",this.Sx=Ra.NONE,this.Kp=i&&void 0!==i.type?function(t){return ek(t)?t:hr.DEFAULT}(i.type):hr.WEBVTT,this.l4=[],this.v4=new cM(this.l4),this.S4=[],this.f4=new cM(this.S4),this.Yo=Vu(i&&i.mode||Z.Nh),this.h0t=this.Yo}};r(),r();var E1=class extends sh{constructor(t,i){super(ma.r0t),this.trackId=void 0,this.enabled=void 0,this.trackId=t,this.enabled=i}};r();var R1=class extends sh{constructor(t,i){super(ma.n0t),this.track=void 0,this.targetQuality=void 0,this.track=t,this.targetQuality=i}};r();var x1=function(t){return t.Ck="audio",t.Nk="video",t.DT="text",t}({}),I1=class extends fr{get KI(){return this.Kdt}get JI(){return this.zdt}set JI(t){this.u0t(t),this.So(new R1(this,t))}get QI(){return this.cO}get Th(){return this.gO}set Th(t){t!==this.gO&&(this.gO=t,this.So(new nc(this)))}get Rt(){return this.We}set Rt(t){this.We!==t&&(this.We=t,this.c0t!==t&&this.So(new E1(this.qI,t)),this.So(new Tu(this)))}get d0t(){return this.c0t}set d0t(t){const i=this.We!==t;this.We=t,this.c0t=t,i&&this.So(new Tu(this))}get Ca(){return this.hu||(this.hu=co(this)),this.hu}get Hk(){return this.Rt?"enabled":"disabled"}pO(t){this.Rt=t}a0t(t){if(t.targetQualityIds){const i=[];for(const s of this.cO.CI)t.targetQualityIds.indexOf(s.o)>-1&&i.push(s);const s=i.length?i:void 0;this.u0t(s)}}u0t(t){(function(t,i){return!t&&i||t&&!i||t&&i&&!pc(t,i)})(this.zdt,t)&&(this.zdt=t&&this.cO.lO(t)?t:void 0,this.So(new Zo(this.zdt,this)))}unload(){for(const t of this.cO.CI)t.mn("update",this.$Mt);this.cO.hr()}constructor(t){super(),this.o=void 0,this.qI=void 0,this.Lt=void 0,this.bs=void 0,this.N3=void 0,this.gO=void 0,this.Kdt=void 0,this.cO=new Wc,this.zdt=void 0,this.We=void 0,this.c0t=void 0,this.hu=void 0,this.$Mt=()=>this.So(new nc(this));const i=t.customData;if(this.qI=Number(t.trackId)||0,this.o=""+(i&&i.id||this.qI),this.gO=i&&i.label||t.name||"",this.bs=i&&i.language||t.language||"",this.Lt=i&&i.kind||"main",this.We=i&&i.enabled,this.c0t=this.We,A1(t)){this.N3=x1.Ck;const i=t.customData&&t.customData.qualities;if(i)for(const t of i){const i=new qX(t.id,t.bandwidth,t.codecs,t.name,"",t.audioSamplingRate);i.wn("update",this.$Mt),this.cO.dO(i)}}else{this.N3=x1.Nk;const i=t.customData&&t.customData.qualities;if(i)for(const t of i){const i=new KX(t.id,t.bandwidth,t.codecs,t.name,"",t.frameRate,t.width,t.height);i.wn("update",this.$Mt),this.cO.dO(i)}}}};r();var P1=function(t){return t.l0t="legacy",t.f0t="caf",t}({});r(),r(),r(),r();var C1=class{Rc(){if(this.v0t>=this.qc.length)return;const t=this.qc[this.v0t];return this.v0t+=1,t}lt(){return this.Rc()}constructor(t){this.qc=void 0,this.v0t=0,this.qc=t}};function qn(t){var i,s,e;return null!=(e=null==(s=t.MJt)||null==(i=s.uqt)?void 0:i.cqt())?e:[]}var N1=class{},D1=class{pnt(){var t;return null!=(t=this.hu)?t:this.hu=function(t){return{get ads(){return t.Jc.map(t=>t.pnt())},get integration(){return t.DJt},get maxDuration(){return t._0t},get maxRemainingDuration(){return t.g0t},get timeOffset(){return t.fOt},get customData(){return t.Z$t}}}(this)}constructor(){this.hu=void 0}},B1=class{get m0t(){return this.p0t}get t(){return this.oa}constructor(t,i){this.p0t=void 0,this.oa=void 0,this.p0t=t,this.oa=i}},M1=class extends D1{get oJt(){return this.XJt}get Jc(){const t=[];for(const e of this.XJt.w0t)for(const n of qn(e)){var i,s;const r=null!=(s=null==(i=n.Rqt)?void 0:i.Jqt)?s:[];if(n.kqt&&t.push(this.y0t(n.kqt,r,n.Iqt,e.Lnt)),n.xqt)for(const i of n.xqt.Pqt)t.push(this.b0t(i,r,n.xqt,n.Iqt,e.Lnt))}return t}y0t(t,i,s,e){const n=me(this.A0t,i=>i.kqt===t);if(void 0!==n)return n;const r=new V1(t,i,this,this.S0t,s,e);return this.A0t.push(r),r}b0t(t,i,s,e,n){const r=me(this.T0t,i=>i.xqt===t);if(void 0!==r)return r;const h=new F1(t,i,s,this,this.S0t,e,n);return this.T0t.push(h),h}get DJt(){return Za.CSAI}get fOt(){const t=this.XJt.dd;return t>=0?t:this.S0t.t.Nd()}get g0t(){let t=0;for(const i of this.XJt.w0t)for(const s of qn(i))s.kqt&&!s.kqt.Qjt&&(t+=s.kqt.ct);return this.S0t&&this.S0t.m0t&&(t+=this.S0t.m0t.ct-this.S0t.m0t.OR),t}get _0t(){let t=0;for(const i of this.XJt.w0t)for(const s of qn(i))s.kqt&&(t+=s.kqt.ct);return t}get Z$t(){}constructor(t,i){super(),this.XJt=void 0,this.S0t=void 0,this.A0t=[],this.T0t=[],this.XJt=t,this.S0t=i}},L1={height:0,width:0,clickThrough:"",contentHTML:"",resourceURI:"",altText:""},O1=class extends N1{get od(){return this.Gqt}get Lnt(){return this.BJt}get Iqt(){return this.Zjt}k0t(){return this.E0t}R0t(){this.E0t=!0}x0t(t){return Jr({},L1,{resourceURI:t.BQt||""})}I0t(t){return Jr({},L1,{contentHTML:t.BQt.trim(),type:"HTMLResource"})}P0t(t){var i,s;return Jr({},L1,{clickThrough:(null==(i=t.wjt)?void 0:i.trim())||"",resourceURI:(null==(s=t.BQt)?void 0:s.trim())||"",altText:t.mjt||"",type:"StaticResource"})}C0t(t,i,s){if(!t||!i)return;const e="<img "+(s?"title='"+s+"' ":"")+"src='"+encodeURI(t)+"'>";return"<a href='"+encodeURI(i)+"' target='_blank' rel='noopener'>"+e+"</a>"}Rqt(t){return t?t.map(t=>{let i;const s={adSlotId:t.cjt||"",height:t.Mi||0,width:t.Ti||0};if(t.Bqt){var e;const s=this.P0t(t.Bqt),n=s.clickThrough||(null==(e=t.vjt)?void 0:e.wjt);i=Jr({},s,{contentHTML:this.C0t(s.resourceURI,n,s.altText)||""})}else if(t.Fqt)i=this.I0t(t.Fqt);else{if(!t.Lqt)return;i=this.x0t(t.Lqt)}return Qr(i,s)}).filter(t=>void 0!==t):[]}N0t(){return this.D0t.pqt}constructor(t,i,s,e,n,r){super(),this.D0t=void 0,this.$qt=void 0,this.Gqt=void 0,this.S0t=void 0,this.Zjt=void 0,this.BJt=void 0,this.E0t=!1,this.D0t=t,this.$qt=i,this.Gqt=s,this.S0t=e,this.Zjt=n,this.BJt=r}},F1=class extends O1{get xqt(){return this.D0t}get Eqt(){return this.B0t}xa(){const t=this.Gqt,i={companions:this.Rqt(this.$qt),type:"nonlinear",id:this.D0t.Xqt,skipOffset:this.qjt,integration:this.BJt.integration,adSystem:this.D0t.pqt,get adBreak(){return t.pnt()},creativeId:this.D0t.Xqt,universalAdIds:this.Zjt.map(t=>({adIdRegistry:t.jQt,adIdValue:t.JQt}))};return this.D0t.Lqt?Qr(this.x0t(this.D0t.Lqt),i):this.D0t.Fqt?Qr(this.I0t(this.D0t.Fqt),i):this.D0t.Bqt?Qr(this.P0t(this.D0t.Bqt),i):i}pnt(){var t;return null!=(t=this.hu)?t:this.hu=this.xa()}M0t(){var t,i;return null!=(i=null==(t=this.D0t.Bqt)?void 0:t.BQt)?i:""}L0t(){var t,i,s;return null!=(s=null==(i=this.D0t)||null==(t=i.Bqt)?void 0:t.LQt)?s:""}get qjt(){const t=this.D0t.od;return t&&t.Lnt&&void 0!==t.Lnt.skipOffset?Pa.NJt(t.Lnt.skipOffset,this.S0t.m0t.ct):(null==(i=this.D0t.od)?void 0:i.qjt)||-1;var i}constructor(t,i,s,e,n,r,h){super(t,i,e,n,r,h),this.B0t=void 0,this.hu=void 0,this.B0t=s}},V1=class extends O1{get kqt(){return this.D0t}xa(){var t;const i=this.Gqt,s=this.D0t;return{companions:this.Rqt(this.$qt),duration:s.ct,id:s.Xqt,mediaFiles:s.zjt,get mediaUrl(){return s.Jjt},skipOffset:this.qjt,type:"linear",integration:this.BJt.integration,adSystem:s.pqt,width:void 0,height:void 0,get adBreak(){return i.pnt()},clickThrough:null==(t=s.Ljt)?void 0:t.wjt,creativeId:s.Xqt,universalAdIds:this.Zjt.map(t=>({adIdRegistry:t.jQt,adIdValue:t.JQt})),closedCaptionFiles:s.tQt,extensions:s.sQt}}pnt(){var t;return null!=(t=this.hu)?t:this.hu=this.xa()}M0t(){return this.D0t.zjt.length>0?this.D0t.zjt[0].contentURL:""}L0t(){return this.D0t.zjt.length>0?this.D0t.zjt[0].type:""}get qjt(){const t=this.D0t.od;return t&&t.Lnt&&void 0!==t.Lnt.skipOffset?Pa.NJt(t.Lnt.skipOffset,this.S0t.m0t.ct):this.D0t.qjt||-1}constructor(t,i,s,e,n,r){super(t,i,s,e,n,r),this.hu=void 0}};function W1(t){return t instanceof V1}r();var Qc=function(t){return t.O0t="csai",t.F0t="google-ima",t.so="google-dai",t.V0t="freewheel",t.W0t="mediatailor",t.Iv="chromecast",t.hnt="theoads",t}({});r();var U1=class extends Ha{xa(){return new G1(this.xnt.pnt())}constructor(t){super("U0t",t)}},G1=class extends Wa{constructor(t){super("updatead",t)}};r();var X1=class extends Ha{xa(){return new Z1(this.xnt.pnt())}constructor(t){super("G0t",t)}},Z1=class extends Wa{constructor(t){super("adloaded",t)}},H1=class extends ua{get zc(){return void 0!==this.X0t}get mnt(){return this.D0t?[this.D0t]:[]}get wnt(){var t;return null!=(t=this.X0t)?t:null}get ynt(){return vl(this.Z0t,t=>{const i=t.Jc;if(t===this.X0t&&void 0!==this.D0t){const t=i.indexOf(this.D0t);if(t>=0)return i.slice(t+1)}return t.H0t()?[]:i})}get bnt(){return this.Z0t.filter(t=>t===this.X0t||!t.H0t())}get Ca(){var t;return null!=(t=this.hu)?t:this.hu=hV(this)}B6(t,i,s){throw new g("Scheduling ads while casting is not supported.")}nN(){this.$Jt._$t()}knt(t){var i;null==(i=this.z0t)||i.knt(t)}Snt(t,i){var s;null==(s=this.z0t)||s.Snt(t,i)}Y0t(t){return me(this.Z0t,i=>i.o===t)}K0t(t,i,s,e){const n=this.Z0t,r=[];let h=!1;for(const n of t){let t=this.Y0t(n.id);void 0===t&&(t=new z1(n),e.push(new uV(t))),!Y(t.q0t)&&Y(s)&&(t.q0t=this.j0t(t.Q0t,s));const o=t.Jc;t.er(n,i,s,e);const a=t.Jc;for(const t of a)Ft(o,t)||(e.push(new dV(t)),h=!0);r.push(t)}this.Z0t=r,h&&e.push(new pV);for(const t of n)Ft(r,t)||e.push(new Su(t))}J0t(t,i){const s=this.X0t,e=this.D0t;let n,r;if(t){var h;const{breakId:i,breakClipId:s}=t;n=i?this.Y0t(i):void 0,r=s?null==(h=this.X0t)?void 0:h.$0t(s):void 0}if(this.X0t=n,this.D0t=r,n!==s&&(void 0!==s&&(s.t1t=void 0,i.push(new Xh(s))),void 0!==n&&(n.t1t=this.$Jt,i.push(new vV(n)))),r!==e){const t=this.oa.FR();void 0!==e&&i.push(new He(e,t)),void 0!==r&&i.push(new te(r,t))}}j0t(t,i){if(!i||!i.breaks)return;const s=me(i.breaks,i=>i.id===t.id);return s}Tnt(t){const i=[];for(const t of this.Z0t){let s=t.Jc;if(t===this.X0t&&void 0!==this.D0t){const t=s.indexOf(this.D0t);t>=0&&(s=s.slice(t))}else if(t.H0t())continue;for(const t of s){const s=t.i1t();s&&i.push(s)}}for(const s of i)t.B6(s,rV._nt,!1)}kn(){return this.Vo(),this.$Jt.h$t(this.eh),void 0!==this.X0t&&(this.X0t.t1t=void 0,this.X0t=void 0),this.D0t=void 0,Lr(this.Z0t),Promise.resolve(void 0)}Ant(t){}constructor(t,i,s){super(),this.oa=void 0,this.$Jt=void 0,this.z0t=void 0,this.Z0t=[],this.X0t=void 0,this.D0t=void 0,this.hu=void 0,this.eh=t=>{var i;if(!t)return;const s=this.$Jt.YN,{breakStatus:e}=s,{breakClips:n,breaks:r}=s.media,h=null==(i=J$(s))?void 0:i.media,o=[];r&&n&&this.K0t(r,n,h,o),this.J0t(e,o);for(const t of o)this.So(t)},this.oa=t,this.$Jt=i,this.z0t=s,this.$Jt.r$t(this.eh)}},z1=class extends D1{get Q0t(){return this.s1t}get o(){return this.s1t.id}get Jc(){return this.qc}get DJt(){return Qc.Iv}get _0t(){let t=this.s1t.duration;return void 0===t&&this.qc.length>0&&(t=Jl(this.qc,t=>t.ct),S(t)&&(t=void 0)),t}get g0t(){const t=this._0t;if(void 0!==t&&void 0!==this.t1t){const i=this.t1t.v$t();if(void 0!==i)return _.max(0,t-i)}return t}get fOt(){return this.s1t.position}get Z$t(){}H0t(){return this.s1t.isWatched}$0t(t){return me(this.qc,i=>i.o===t)}er(t,i,s,e){const n=[];for(let r=0;r<t.breakClipIds.length;r++){const h=t.breakClipIds[r],o=me(i,t=>t.id===h);if(void 0===o)continue;const a=r<this.qc.length?this.qc[r]:new Y1(o,this);!Y(a.e1t)&&Y(s)&&(a.e1t=this.n1t(s,h,r)),a.er(o,e),n.push(a)}this.s1t=t,this.qc=n}n1t(t,i,s){if(!t||!t.breakClips)return;let e=me(t.breakClips,t=>t.id===i);if(!e){var n;const i=null==(n=this.q0t)?void 0:n.breakClipIds[s];i&&(e=me(t.breakClips,t=>t.id===i))}return e}constructor(t){super(),this.s1t=void 0,this.q0t=void 0,this.qc=[],this.t1t=void 0,this.s1t=t}},Y1=class{get r1t(){return this.h1t}get o(){return this.h1t.id}get Jqt(){return[]}get ct(){var t;return null!=(t=this.h1t.duration)?t:NaN}get zjt(){const t=this.M0t();return t?[{contentURL:t,delivery:"progressive",type:this.L0t(),width:0,height:0}]:[]}get Jjt(){return this.M0t()}get qjt(){const{whenSkippable:t}=this.h1t;return void 0===t?void 0:t<0?-1:t}get wjt(){return this.h1t.clickThroughUrl}get Xqt(){}get Iqt(){return[]}get Z$t(){}N0t(){return""}L0t(){var t;return null!=(t=this.h1t.contentType)?t:""}M0t(){var t,i;return null!=(i=null!=(t=this.h1t.contentUrl)?t:this.h1t.contentId)?i:""}er(t,i){const s=this.o,e=this.ct,n=this.h1t.contentUrl;this.h1t=t;const r=this.o,h=this.ct,o=this.h1t.contentUrl;s===r&&(e===h||S(e)&&S(h))&&n===o||i.push(new U1(this)),S(e)&&!S(h)&&i.push(new X1(this))}i1t(){let t;return this.e1t&&(t=K0(this.e1t,this.od.fOt)),t||(t=K0(this.h1t,this.od.fOt)),t}pnt(){var t;return null!=(t=this.hu)?t:this.hu=this.xa()}xa(){const t=this;return{get extensions(){return[]},get companions(){return t.Jqt},get duration(){return t.ct},get id(){return t.o},get mediaFiles(){return t.zjt},get mediaUrl(){return t.Jjt},get closedCaptionFiles(){return[]},get skipOffset(){return t.qjt},type:"linear",integration:Qc.Iv,get adSystem(){return t.N0t()},width:void 0,height:void 0,get adBreak(){return t.od.pnt()},get resourceURI(){return t.M0t()},get clickThrough(){return t.wjt},get creativeId(){return t.Xqt},get customData(){return t.Z$t},get isSlate(){return!1},get universalAdIds(){return t.Iqt.map(t=>({adIdRegistry:t.jQt,adIdValue:t.JQt}))}}}constructor(t,i){this.h1t=void 0,this.e1t=void 0,this.od=void 0,this.hu=void 0,this.h1t=t,this.od=i}};r();var K1=class extends fr{get o1t(){return this.a1t}set o1t(t){this.a1t!==t&&(this.a1t=t,this.Ls.href=null!=t?t:"",t?this.KV():this.qV())}KV(){if(this.We)return;this.We=!0,this.Ls.style.display="",this.u1t||(this.gE.style.cursor="pointer");const t=this.u1t?this.Ls:this.gE;Zd.Zs.Ke?(t.addEventListener("touchstart",this.c1t),t.addEventListener("touchend",this.d1t)):(t.addEventListener("mousedown",this.c1t),t.addEventListener("click",this.d1t))}qV(){if(!this.We)return;this.We=!1,this.Ls.style.display="none",this.u1t||(this.gE.style.cursor="");const t=this.u1t?this.Ls:this.gE;Zd.Zs.Ke?(t.removeEventListener("touchstart",this.c1t),t.removeEventListener("touchend",this.d1t)):(t.removeEventListener("mousedown",this.c1t),t.removeEventListener("click",this.d1t))}Zg(){this.Vo(),this.qV(),this.gE.removeChild(this.Ls)}constructor(t,i=Zd.Zs.Ke){super(),this.gE=void 0,this.Ls=void 0,this.u1t=void 0,this.a1t=void 0,this.We=!1,this.c1t=t=>{t.stopPropagation(),this.So(new sh("clickstart"))},this.d1t=t=>{t.stopPropagation(),this.So(new sh("click"))},this.gE=t,this.u1t=i,this.Ls=h.createElement("a"),this.Ls.style.position="absolute",this.Ls.style.zIndex="11",this.Ls.target="Xu",this.u1t?(qu(this.Ls,"learn more"),this.Ls.className="theoplayer-ad-overlay-component theoplayer-ad-touch-clickthrough",this.Ls.setAttribute("rel","noopener")):Bl(this.Ls),this.gE.appendChild(this.Ls),this.qV()}};r(),r();var q1=[1200,992,768,576],j1={1200:"theo-size-xl",992:"theo-size-l",768:"theo-size-m",576:"theo-size-s"},Q1=class{l1t(t){const i=J1(t);i!==this.f1t&&(fi(this.Ls,i),Rl(this.Ls,this.f1t),this.f1t=i)}kn(){this.sc.mn(Gu.yn,this.bn)}constructor(t,i){this.Ls=void 0,this.sc=void 0,this.f1t=void 0,this.bn=void 0,this.Ls=t,this.sc=i,this.bn=t=>{this.l1t(t.width)},this.f1t=J1(i.Eu),fi(this.Ls,this.f1t),i.wn(Gu.yn,this.bn)}};function J1(t){for(const i of q1)if(t>i)return j1[i];return"theo-size-xs"}var $1=class extends fr{get xe(){return this.Ls}get Hk(){return this.Yo}get FT(){return this.ud.textContent||""}set FT(t){qu(this.ud,t)}v1t(t){"countdown"!==this.Yo&&(this.Yo="countdown",this._1t(),this.xe.classList.remove("theoplayer-ad-skip-button"),this.xe.classList.add("theoplayer-ad-skip-countdown")),this.FT="You can skip in "+_.round(t)+" seconds"}g1t(){"skip"!==this.Yo&&(this.Yo="skip",this.FT="Skip Ad",this.m1t(),this.xe.classList.remove("theoplayer-ad-skip-countdown"),this.xe.classList.add("theoplayer-ad-skip-button"))}m1t(){this.xe.addEventListener("mouseup",this.p1t),this.xe.addEventListener("touchend",this.p1t)}_1t(){this.xe.removeEventListener("mouseup",this.p1t),this.xe.removeEventListener("touchend",this.p1t)}kn(){this.Vo(),this._1t(),this.tc.kn(),je(this.Ls),je(this.ud),this.w1t&&je(this.w1t)}constructor(t,i){super(),this.Ls=void 0,this.w1t=void 0,this.ud=void 0,this.tc=void 0,this.Yo=void 0,this.p1t=()=>{this.So(new sh("nN"))},this.Ls=h.createElement("div"),this.xe.className="theoplayer-ad-overlay-component theoplayer-ad-skip theoplayer-ad-skip-countdown",this.xe.style.position="absolute",this.ud=h.createElement("span"),this.xe.appendChild(this.ud),i&&(this.w1t=h.createElement("div"),this.w1t.className="theoplayer-ad-skip-poster",this.w1t.style.backgroundImage='url("'+am(i)+'")',this.xe.appendChild(this.w1t)),this.Yo="countdown",this.tc=new Q1(this.xe,t)}},t2=class extends fr{y1t(){const t=this.$Jt.YN.activeTrackIds;if(t){if(this.b1t()){const i=this.JL.CI.map(t=>t.o),s=this.qL.CI.map(t=>t.o);Ft(i.concat(s),"0")&&t.push(0)}r2(t,this.qL),r2(t,this.JL),function(t,i){const s=!1;for(const s of i.CI)s.o0t=Ft(t,s.qI)?Z.Kn:Z.Nh}(t,this.Gl)}}A1t(){var t;const i=null==(t=this.$Jt.YN.media)?void 0:t.tracks;if(!i)return;const s=i.filter(A1),e=i.filter(S1),n=i.filter(T1);if(this.b1t()&&0===e.length&&0!==this.Lx()){const t=this.S1t();e.push(t)}if(this.b1t()&&0===s.length){const t=this.T1t();s.push(t)}e2(this.qL,s.map(t=>t.trackId)),e2(this.JL,e.map(t=>t.trackId)),e2(this.Gl,n.map(t=>t.trackId)),n2(s,this.qL),n2(e,this.JL),function(t,i){let s=!1;for(const e of t){let t=s2(i,e.trackId);t||(t=new k1(e),i.tt(t),s=!0)}}(n,this.Gl)}k1t(){this.yZ||(this.E1t=v(this.bd,250))}R1t(){p(this.E1t)}x1t(){this.R1t(),this.k1t()}I1t(){var t;const i=this.$Jt.YN,s=i.media;var e;const n=null!=(e=null==s?void 0:s.duration)?e:NaN,r=(null==s?void 0:s.streamType)===chrome.cast.media.StreamType.LIVE||n<0,h=r?1/0:n;this.qb=h,this.P1t();const o=i.getEstimatedLiveSeekableRange(),a=null==(t=i.customData)?void 0:t.buffers;if(Y(o)){const{start:t,end:i,isMovingWindow:s=r,isLiveDone:e=!1}=o;this.nVt(t,i,s,e)}else if(Y(a)){const[t,i]=a.seekable;this.nVt(t,i,r,!1)}else r?this.nVt(void 0,void 0,!0,!1):this.nVt(0,h,!1,!1)}C1t(){const t=this.$Jt.YN,i=function(t){return void 0!==t&&t.playerState===chrome.cast.media.PlayerState.PAUSED}(t)||i2(t);this.N1t=i,this.yZ!==i&&(this.yZ=i,this.yZ?this.So(new Pi(this.FR())):this.So(new Ts(this.FR())))}hh(){const{playbackRate:t}=this.$Jt.YN;this.D1t!==t&&(this.D1t=void 0,this.bZ!==t&&(this.bZ=t,this.So(new Fs(this.FR(),t))))}B1t(){const{playerState:t}=this.$Jt.YN;let i;switch(t){case chrome.cast.media.PlayerState.IDLE:i=pi.VL;break;case chrome.cast.media.PlayerState.BUFFERING:i=pi.Qn;break;case chrome.cast.media.PlayerState.PAUSED:case chrome.cast.media.PlayerState.PLAYING:i=pi.UL}this.J5(i),this.M1t()}nVt(t,i,s,e){Y(t)&&Y(i)?this.C5=new DB(t,i,s,s&&!e):this.C5=void 0}L1t(t,i){this.t0t=null!=i?i:this.t0t,this.$$t=null!=t?t:this.$$t,this.So(new es)}Je(t){this.O1t!==t?(this.pZ=!0,this.So(new ul(this.FR()))):this.O1t=void 0}PX(){if(!this.pZ)return;this.pZ=!1;const t=this.FR();this.So(new Tc(t,this.DR())),this.So(new Wi(t))}Eh(){this.q5=!0,this.XR()&&this.So(new Be(this.FR()))}P1t(){const t=this.MEt,i=this.Nd();t===i||S(t)&&S(i)||(this.MEt=i,this.So(new ur(i)))}F1t(){const t=this.FR();this.pZ||this.V1t===t||(this.V1t=t,this.So(new Tc(t,this.DR())))}J$t(){this.yZ&&(this.yZ=!1,this.So(new Ts(this.FR())),this.J5(pi.VL))}Qet(){return this.qc}PR(){return this.LRt.Dy(this.Q$t)}FR(){if(this.qc.zc){const t=this.$Jt.f$t();if(void 0!==t)return t}return this.Wet()}Wet(){return void 0!==this.W1t?this.Q$t+this.W1t:this.q5?this.Nd():this.Q$t+this.$Jt.l$t()}DR(){if(this.U1t)return new Date(this.Wet()+this.U1t)}Nd(){if(this.qc.zc){var t;const i=null==(t=this.qc.mnt[0])?void 0:t.ct;if(void 0!==i&&!S(i))return i}return this.Q$t+this.qb}ZR(){return this.$G}XR(){return!this.qc.zc&&this.q5}lx(){return this.yZ}_x(){return this.bZ}gx(t){this.bZ!==t&&(this.D1t=this.bZ,this.bZ=t,this.So(new Fs(this.FR(),t)),this.$Jt.gx(t))}Tx(){return this.j5}wx(){return this.qc.zc?ZT.$M(0,this.FR()):this.Ho.Dy(this.Q$t)}Ex(){var t,i;if(this.qc.zc)return ZT.tL();let s=null!=(i=null==(t=this.C5)?void 0:t.X3().Dy(this.Q$t))?i:ZT.tL();if(s.V>0){const t=s.An(s.V-1);s=s.LM(ZT.$M(t,this.FR()))}return s}xx(){return this.pZ}ER(){return this.qL}Bx(){return this.JL}Cx(){return this.Gl}S1t(){return{customData:{activeQuality:{averageBandwidth:0,bandwidth:0,codecs:"",frameRate:0,height:this.Dx(),id:"0",name:"",width:this.Lx()},enabled:!0,id:"0",kind:"main",label:"",language:"",qualities:[],uid:0},language:"",name:"",trackContentId:"",trackContentType:"",trackId:0,type:y1.Nk}}T1t(){return{customData:{activeQuality:{averageBandwidth:0,bandwidth:0,codecs:"",id:"0",name:"",audioSamplingRate:0},qualities:[],enabled:!0,id:"0",kind:"main",label:"",language:"",uid:0},language:"",name:"",trackContentId:"",trackContentType:"",trackId:0,type:y1.Ck}}b1t(){var t,i;return!(void 0!==(null==(t=this.qDt.a$t())?void 0:t.version))||(null==(i=this.qDt.a$t())?void 0:i.sdkType)===P1.f0t}d$t(t){this.b1t()&&is(t,0),this.$Jt.d$t(t)}Lx(){return this.$$t}Dx(){return this.t0t}Yx(){this.yZ&&(this.yZ=!1,this.N1t=!1,this.So(new Ts(this.FR()))),this.$Jt.Yx()}zx(){this.yZ||(this.yZ=!0,this.N1t=!0,this.So(new Pi(this.FR()))),this.$Jt.zx()}By(t){if(this.qc.zc)return;let i=_.max(0,t-this.Q$t);i=_.round(1e6*i)/1e6;const s=this.W1t;this.W1t=i,this.N1t=this.lx(),this.O1t=i,this.pZ=!0,this.So(new ul(this.FR())),void 0===s&&(this.b1t()?this.G1t(i):this.m8(i))}m8(t){this.$Jt.By(t,this.N1t).then(this.X1t(t)).catch(this.c$t)}X1t(t){return()=>{void 0!==this.W1t&&(this.W1t===t?this.W1t=void 0:this.m8(this.W1t))}}J5(t){this.j5!==t&&(this.j5=t,this.So(new ca(this.FR(),t))),void 0===this.W1t&&this.pZ&&t>=pi.WL&&this.PX(),this.M1t()}M1t(){if(this.yZ)return void(this.Z1t=!1);const t=this.j5>=pi.UL;this.Z1t!==t&&(this.Z1t=t,t?this.So(new $n(this.FR())):this.So(new lx(this.FR())))}H1t(){this.z1t||(this.z1t=h.createElement("div"),this.oa.xe.appendChild(this.z1t),this.z1t.className="theoplayer-ad-linear theoplayer-chromecast-ad",this.z1t.style.zIndex="10",Bl(this.z1t)),this.z1t.style.display=this.qc.zc?"":"none"}Y1t(){var t;const i=null==(t=this.qc.mnt[0])?void 0:t.wjt;i&&!this.K1t?(this.K1t=new K1(this.z1t,!0),this.K1t.o1t=i,this.K1t.wn("clickstart",this.q1t)):this.K1t&&(this.K1t.o1t=i)}j1t(){var t;const i=null==(t=this.qc.mnt[0])?void 0:t.qjt;if(void 0===i||i<0)return void(this.Q1t&&(this.Q1t.kn(),this.Q1t=void 0));if(!this.Q1t){var s;const t=null==(s=this.oa.Na)?void 0:s.gi;this.Q1t=new $1(this.oa.Wu,t),this.z1t.appendChild(this.Q1t.xe),this.Q1t.wn("nN",this.J1t)}const e=this.$Jt.f$t();void 0!==e&&(e<i?this.Q1t.v1t(i-e):this.Q1t.g1t())}i0t(){return this.Q$t}s0t(t){this.Q$t=t}Tnt(t){}Kx(){this.$Jt.Kx()}kn(){this.Vo(),this.qc.kn(),this.K1t&&(this.K1t.Zg(),this.K1t=void 0),this.Q1t&&(this.Q1t.kn(),this.Q1t=void 0),this.z1t&&(je(this.z1t),this.z1t=void 0),this.$Jt.n$t(this.i5),this.$Jt.s$t(this.$1t),this.$Jt.h$t(this.W$t),this.$Jt.mn(q0.QJt,this.t2t),this.$Jt.kn()}constructor(t,i,s,e,n){super(),this.oa=void 0,this.qDt=void 0,this.$Jt=void 0,this.LRt=ZT.tL(),this.U1t=void 0,this.qb=void 0,this.q5=!1,this.$G=void 0,this.yZ=void 0,this.bZ=void 0,this.D1t=void 0,this.j5=pi.VL,this.Z1t=!1,this.Ho=ZT.tL(),this.C5=void 0,this.pZ=!1,this.Q$t=void 0,this.$$t=void 0,this.t0t=void 0,this.qL=new O,this.JL=new O,this.Gl=new ou,this.qc=void 0,this.z1t=void 0,this.K1t=void 0,this.Q1t=void 0,this.MEt=NaN,this.W1t=void 0,this.N1t=!1,this.V1t=NaN,this.O1t=void 0,this.E1t=0,this.$1t=(t,i)=>{switch(t){case"buffered":this.LRt=new ZT(i),this.So(new Ut(this.FR()));break;case"currentProgramDateTime":this.U1t=new Date(i).getTime()-this.FR();break;case"played":this.Ho=new ZT(i);break;case"seekable":this.I1t();break;case"videoHeight":this.L1t(void 0,i);break;case"videoWidth":this.L1t(i,void 0)}},this.i5=t=>{switch(t.type){case d.Jw:this.Je(t.currentTime);break;case d.Qw:this.PX();break;case d.qw:this.So(new CU(t.representation,t.previousRepresentation));break;case d.$w:this.So(new hU(t.segmentStartTime,t.error,t.trackType,t.track,t.quality,t.retryCount));break;case d.Cw:this.So(new Bn(t.currentTime,t.initDataType,t.initData));break;case d.Tw:this.So(new SL(new Q(Ne.CONTENT_PROTECTION_ERROR,t.error,void 0,t.licenseAcquisitionURL,t.status,t.statusText,t.licenseAcquisitionMessage,t.systemCode)));break;case d.Ew:this.So(new TL)}},this.W$t=t=>{this.I1t(),this.C1t(),this.hh(),this.B1t(),this.F1t(),this.x1t(),this.A1t(),this.y1t(),this.H1t(),this.Y1t(),this.j1t(),t||i2(this.$Jt.YN)&&this.Eh()},this.bd=()=>{this.F1t(),this.j1t()},this.t2t=t=>{this.So(t)},this.G1t=Wl(t=>this.m8(t),50),this.c$t=t=>{this.W1t=void 0,this.So(new j0(t))},this.q1t=()=>{this.zx()},this.J1t=()=>{this.qc.nN()},this.oa=t,this.qDt=s,this.$Jt=e,this.qc=new H1(t,e,i.Jc),this.Q$t=n.i0t(),this.qb=n.Nd()-this.Q$t,this.yZ=n.lx(),this.bZ=n._x(),this.$$t=n.Lx(),this.t0t=n.Dx(),this.$Jt.e$t(this.i5),this.$Jt.t$t(this.$1t),this.$Jt.r$t(this.W$t),this.$Jt.wn(q0.QJt,this.t2t),this.$Jt.o$t().then(t=>{this.So(new Q0(t.bt,t.Mc))},this.c$t)}};function i2(t){return void 0!==t&&t.playerState===chrome.cast.media.PlayerState.IDLE&&t.idleReason===chrome.cast.media.IdleReason.FINISHED}function s2(t,i){for(const s of t.CI)if(s.qI===i)return s}function e2(t,i){let s=!1;for(let e=0;e<t.V;e++){const n=t.DI(e);-1===i.indexOf(n.qI)&&(t.it(n),e--,s=!0)}return s}function n2(t,i){let s=!1;for(const e of t){let t=s2(i,e.trackId);t||(t=new I1(e),i.tt(t),s=!0)}return s}function r2(t,i){for(const s of i.CI)s.d0t=Ft(t,s.qI);return!1}r();var h2=class{Lq(t){return Promise.resolve("all")}Hx(){}kn(){}};r();function o2(t,i,s){if(S(t))return s;if(t===1/0){if("live"===s||"dvr"===s)return s;if(i&&i.length>0){if(i.end(i.length-1)-i.start(0)>60)return"dvr"}return"live"}return"vod"}var a2=[d.Nw,d.Iw,d.Kw,d.jw,d.zw,d.uo,d.Yw,d.vy,d.Jw,d.Qw,Vo.AM,Vo.SM,d.qw,d.$w,d.Cw,d.Tw,d.Ew],u2=class extends ic{gZ(t){if(!t)return;T(this.aZ&&mS(this.aZ),t&&mS(t))||(this.aZ=t,this.So(new Ik(t)))}i2t(t){if(!t)return;const i=bc(t,this.oa.Cd);T(this.Ac&&mS(this.Ac),i&&mS(i))||(this.Ra.s0t(0),this.Ac=i,this.So(new $F(i)),this.Ra.J$t())}s2t(t){for(const i of this.rt.CI)if(i.qI===t)return i;for(const i of this.ht.CI)if(i.qI===t)return i}get qlt(){return this.Ra}set qlt(t){const i=this.Ra;i&&(i.mn(q0.QJt,this.t2t),i.mn(q0.JJt,this.e2t),i.mn(a2,this.Rs),i.mn(Vo.bI,this.WW),t.s0t(i.i0t()),i.Tnt(t.Qet())),this.Ra=t,this.qL.MI=t.ER(),this.JL.MI=t.Bx(),this.Gl.MI=t.Cx(),this.qc.MI=t.Qet(),i&&i.kn(),t.wn(q0.QJt,this.t2t),t.wn(q0.JJt,this.e2t),t.wn(a2,this.Rs),t.wn(Vo.bI,this.WW)}get ro(){return this.ho}get Jc(){return this.Qet()}Qet(){return this.qc}Jet(){return this.Bet}ER(){return this.qL}PR(){return this.Ra.PR()._s()}get n2t(){return this.r2t||this.Ac}set n2t(t){this.r2t=t}async Un(t,i){var s;t&&await this.G$t(t,null!=(s=t.ads)?s:[],t.streamType,NaN,0,null!=i?i:0)}async h2t(t){var i;const s=null!=(i=this.r2t)?i:this.Ac;if(!s)return;var e;const n=this.r2t?null!=(e=this.r2t.ads)?e:[]:this.Unt(),r=this.oa.Nd(),h=this.oa.Ex(),o=o2(r,h,s.streamType),a=h.length>0?h.start(0):0,u=null!=t?t:this.Wet();await this.G$t(s,n,o,r,a,u)}Unt(){const t=new AV;return this.qc.Tnt(t),t.Unt()}DR(){return this.Ra.DR()}LR(){return this.aZ}get OR(){return this.FR()}set OR(t){this.WR(t)}FR(){return this.Ra.FR()}Wet(){return this.Ra.Wet()}WR(t,i){this.o2t||(this.qDt.U$t()||this.o2t||!this.Ac?this.Ra.By(t):this.Un(this.Ac,t))}Nd(){return this.Ra.Nd()}XR(){return this.Ra.XR()}ZR(){return this.$G}zR(){return this.tX}KR(){return this.QL}tx(){return this.oa.$R}sx(){return this.wZ}nx(t){this.wZ=t,this.So(new q(this.OR,this.Ox)),this.qDt.nx(t)}lx(){return this.Ra.lx()}_x(){return this.Ra._x()}gx(t){this.Ra.gx(t)}wx(){return this.Ra.wx()._s()}bx(){return hl.LL}Ax(t){}Tx(){return this.Ra.Tx()}Ex(){return this.Ra.Ex()._s()}xx(){return this.Ra.xx()}nu(){return this.Ac}async Ta(t){this.Ac=t,await this.Un(t),this.r2t=void 0,this.Ra.J$t()}Cx(){return this.Gl}Dx(){return this.Ra.Dx()}Lx(){return this.Ra.Lx()}Bx(){return this.JL}Fx(){return this.oA}Vx(t){this.oA=t,this.So(new q(this.OR,this.Ox)),this.qDt.Vx(t)}get Gx(){return!1}set Gx(t){}Zx(){}Xx(){return this.ha}Hx(){}Yx(){this.qDt.U$t()||this.o2t||!this.Ac?this.Ra.Yx():this.Un(this.Ac)}zx(){this.Ra.zx()}gr(){this.ho=!0}mr(){this.aZ=void 0,this.ho=!1}be(){}we(){}async G$t(t,i,s,e,n,r){this.o2t=!0,this.a2t(),this.Ra.s0t(n);const h="live"===s||"dvr"===s,o=function(t,i,s,e){return{theoplayer_version:1,streamStart:t,isLive:i,sourceDescription:s,configuration:e}}(n,h,t,this.Cd),a={X$t:t,Jc:i,OR:_.max(0,r-n),ct:e,b0:h?chrome.cast.media.StreamType.LIVE:chrome.cast.media.StreamType.BUFFERED,Z$t:o};try{await this.qDt.G$t(a)}catch(t){this.u2t(t)}finally{this.o2t=!1}}c2t(){this.d2t(this.qL),this.d2t(this.JL),this.l2t(this.Gl)}d2t(t){for(const i of t.CI)this.f2t(i);t.wn(Lu.nI,t=>{this.f2t(t.Ht),this.v2t()})}l2t(t){for(const i of t.CI)this._2t(i);t.wn(Lu.nI,t=>{this._2t(t.Ht),this.v2t()})}f2t(t){t.wn(ma.n0t,this.Lmt),t.wn(ma.r0t,this.g2t),t.wn(ma.r0t,this.y1t)}_2t(t){t.wn(ma.e0t,this.m2t),t.wn(ma.e0t,this.y1t)}p2t(){const t=[];for(const i of this.rt.CI)i.Rt&&t.push(i.qI);for(const i of this.ht.CI)i.Rt&&t.push(i.qI);for(const i of this.nt.CI)i.Hk===Z.Kn&&t.push(i.qI);this.Ra.d$t(t)}w2t(t,i,s){this.y2t=t,this.b2t=i,this.A2t=s}S2t(t){var i,s;if(!t)return!1;return(null!=(s=null==(i=this.qDt.a$t())?void 0:i.version)?s:-1)>=2?t.map(t=>t.o):[t[0].o]}T2t(t){this.k2t=t}Jx(){}$x(){}sI(t){throw new m("Can't add a track while casting.")}async Kx(){this.Ra.Kx(),this.a2t()}a2t(){this.xW=pi.VL,this.AW=!1,this.kW=!1,this.$G=void 0,this.tX=void 0}async kn(){this.a2t(),this.Vo(),this.qlt=this.E2t(),this.qDt.mn(Nr.QJt,this.t2t),this.qDt.mn(Nr.x$t,this.R2t),this.qDt.mn(Nr._y,this.x2t),this.qDt.mn(Nr.R$t,this.I2t),this.qDt.mn(Nr.I$t,this.P2t),this.qDt.kn()}E2t(){return new p1(this,this.Ra.i0t(),this.Ra.FR(),this.Ra.Nd(),this.Ra.XR(),this.Ra.lx(),this.Ra._x(),this.Ra.Lx(),this.Ra.Dx())}constructor(t,i){super(t,!0),this.ho=!1,this.k2t=ol,this.xW=pi.VL,this.AW=!1,this.kW=!1,this.o2t=!1,this.r2t=void 0,this.qDt=void 0,this.oA=void 0,this.wZ=void 0,this.Ra=void 0,this.aZ=void 0,this.Ac=void 0,this.$G=void 0,this.tX=void 0,this.qL=new Yu,this.JL=new Yu,this.Gl=new Jc,this.qc=void 0,this.ha=new bs,this.QL=new IS,this.Bet=new h2,this.y2t=void 0,this.b2t=void 0,this.A2t=void 0,this.x2t=t=>{var i,s;(Y(t.Ox)&&!we(t.Ox,this.oA,1e-5)||Y(t.ix)&&t.ix!==this.wZ)&&(this.oA=null!=(i=t.Ox)?i:this.oA,this.wZ=null!=(s=t.ix)?s:this.wZ,this.So(new q(this.OR,this.oA)))},this.I2t=()=>{const t=this.qDt.U$t();this.qlt=t?new t2(this,this.oa,this.qDt,t,this.Ra):this.E2t()},this.e2t=t=>{this.gZ(t.bt),this.i2t(t.Mc)},this.P2t=t=>{const i=this.s2t(t.QN);if(!i)return void 0;const s={targetQualityIds:t.C$t};i.a0t(s)},this.t2t=t=>{this.u2t(t.lt)},this.u2t=t=>{this.k2t&&this.k2t(t)},this.R2t=t=>{this.$G=t.lt,this.tX=Gk(this.$G),this.So(new $e(this.tX))},this.g2t=t=>{if(!t.enabled)return;const i=this.rt.CI.some(i=>i.qI===t.trackId)?this.rt:this.ht;for(const s of i.CI)s.Rt&&s.qI!==t.trackId&&(s.Rt=!1)},this.m2t=t=>{if(t.mode===Z.Kn)for(const i of this.nt.CI)i.Hk===Z.Kn&&i.qI!==t.trackId&&XR(i.Lt,t.track.Lt)&&(i.Hk=Z.Nh)},this.y1t=Wl(()=>{this.p2t()},50),this.v2t=()=>{const t=[];var i;const s=null!=(i=me(this.ht.CI,t=>L2(t,this.y2t)))?i:me(this.ht.CI,t=>t.Rt);var e;s&&t.push(s.qI);const n=null!=(e=me(this.nt.CI,t=>L2(t,this.b2t)))?e:me(this.nt.CI,t=>t.Hk===Z.Kn);var r;n&&t.push(n.qI);const h=null!=(r=me(this.rt.CI,t=>L2(t,this.A2t)))?r:me(this.rt.CI,t=>t.Rt);h&&t.push(h.qI),0!==t.length&&this.Ra.d$t(t)},this.Lmt=t=>{const i=this.S2t(t.targetQuality),s=t.track;this.qDt.N$t(s.qI,s.N3,i)},this.WW=t=>{this.So(t);const i=t.readyState;!this.AW&&this.xW===pi.VL&&i>=pi.Qn&&(this.AW=!0,this.So(new ut(t.currentTime))),!this.kW&&this.xW<=pi.Qn&&i>=pi.WL&&(this.kW=!0,this.So(new ot(t.currentTime))),this.xW<=pi.WL&&i>=pi.UL&&this.So(new vo(t.currentTime)),this.xW<=pi.UL&&i===pi.GL&&this.So(new lt(t.currentTime)),this.xW=i},this.oA=this.oa.Ox,this.wZ=this.oa.ix,this.qDt=i,this.qDt.wn(Nr.QJt,this.t2t),this.qDt.wn(Nr.x$t,this.R2t),this.qDt.wn(Nr._y,this.x2t),this.qDt.wn(Nr.R$t,this.I2t),this.qDt.wn(Nr.I$t,this.P2t),this.qc=new yV(this),this.aZ=this.oa.bt,this.Ac=this.oa.nu(),this.qlt=new p1(this,0,this.oa.Wet(),this.oa.Nd(),this.oa.GR,this.oa.ux,this.oa.vx,this.oa.Mx,this.oa.Nx),this.c2t()}};r();var c2=class extends Kt{xa(){return new d2(this.lt)}constructor(t){super("error"),this.lt=void 0,this.lt=t}},d2=class extends sh{constructor(t){super("error"),this.error=void 0,this.error=t}};r();var l2=class extends sh{constructor(t){super("statechange"),this.state=void 0,this.state=t}};function f2(t,i){let s;return{get casting(){return t.yQ},get error(){return t.lt},get receiverName(){return t.C2t},get state(){return t.qlt},start(){t.Tn()},stop(){t.Kx()},join(){t.N2t()},leave(){t.D2t()},set connectionCallback(t){null==i||i.B2t(t)},get connectionCallback(){return null==i?void 0:i.M2t()},get source(){return s||t.Mc},set source(i){s=i,t.Mc=i},addEventListener(i,s){const e=Ta(i,_o);t.wn(e,s)},removeEventListener(i,s){const e=Ta(i,_o);t.mn(e,s)}}}r();var v2=class extends ua{get yQ(){return this.qlt===Er.CONNECTING||this.qlt===Er.CONNECTED}get lt(){return this.$G}get Ca(){return this.hu||(this.hu=f2(this,this.L2t)),this.hu}get C2t(){var t;return null==(t=this.L2t.O2t())?void 0:t.z$t()}get Mc(){return this.oa?this.oa.n2t:this.r2t}set Mc(t){this.r2t=t?bc(t,this.F2t.Cd):void 0,this.oa&&(this.oa.n2t=this.r2t,this.r2t&&this.oa.Un(this.r2t))}get qlt(){return this.Ra}set qlt(t){let i=t;this.V2t||i!==Er.CONNECTING&&i!==Er.CONNECTED||(i=Er.AVAILABLE),this.Ra!==i&&(this.Ra=i,this.So(new l2(this.qlt)))}async W2t(){if(!this.U2t)throw new m("Chromecast must be initialized before starting a session");await this.U2t,this.L2t.O2t()||await this.L2t.G2t()}async Tn(){this.V2t=!0;try{if(this.qlt=Er.CONNECTING,await this.W2t(),await this.X2t(),this.oa){const t=this.F2t.nu(),i=this.L2t.Z2t(t);this.oa.n2t=i?bc(i,this.F2t.Cd):this.r2t,this.oa.h2t()}this.qlt=Er.CONNECTED,await this.F2t.Kx()}catch(t){this.H2t(!1).catch(ol),this.qlt=Er.AVAILABLE,hc(t)||this.i9(t)}}async N2t(){this.V2t=!0;try{if(this.qlt=Er.CONNECTING,await this.W2t(),await this.X2t(),this.oa){const t=this.F2t.nu(),i=this.L2t.z2t(t);i&&(this.oa.n2t=bc(i,this.F2t.Cd))}this.qlt=Er.CONNECTED,await this.F2t.Kx()}catch(t){await this.H2t(!0).catch(ol),this.qlt=Er.AVAILABLE,hc(t)||this.i9(t)}}async Y2t(){this.L2t.O2t()&&await this.Tn()}async X2t(){null!=this.oa||(this.oa=this.K2t()),this.$G=void 0,this.F2t.zx(),await this.Ij.q2t(this.oa)}K2t(){const t=new u2(this.F2t,this.L2t.O2t());return t.T2t(this.i9),t}j2t(){this.oa&&(this.oa.kn(),this.oa=void 0)}async H2t(t){if(this.V2t=!1,!this.oa)return;const i=this.oa.ro,s=this.oa.nu(),e=this.oa.Wet();try{if(i){let i;i=t?this.L2t.Q2t(s):this.L2t.J2t(s),null!=i||(i=s),await this.Ij.$2t(i,i===s),this.F2t.WR(e),this.F2t.Yx()}}finally{this.j2t()}}D2t(){this.yQ&&(this.L2t.t3t(!1),this.H2t(!0).catch(this.i9))}Kx(){this.yQ&&(this.L2t.t3t(!0),this.H2t(!1).catch(this.i9))}kn(){this.hW.Jg(),this.L2t.mn(g1.j$t,this.i3t),this.Vo(),this.j2t()}constructor(t,i,s,e){super(),this.qS=void 0,this.$G=void 0,this.hu=void 0,this.F2t=void 0,this.oa=void 0,this.Ra=Er.UNAVAILABLE,this.U2t=void 0,this.Ij=void 0,this.L2t=void 0,this.V2t=!1,this.hW=new ui,this.s3t=()=>{this.L2t.wn(g1.j$t,this.i3t),this.qlt=this.L2t.e3t()},this.i3t=t=>{const i=t.qlt;this.qlt=i,i!==Er.UNAVAILABLE&&i!==Er.AVAILABLE||this.H2t(!1).catch(this.i9)},this.r2t=void 0,this.i9=t=>{hc(t)||t instanceof ms&&(this.$G=t,this.So(new c2(t).Ca))},this.Ij=t,this.F2t=i,this.L2t=e,this.qS=s.chromecast,this.U2t=Ce(this.L2t.Fj(this.qS,this.hW.jg),this.hW),this.U2t.then(this.s3t).catch(this.i9)}};r();var _2=class extends ua{get yQ(){return!1}get lt(){}get C2t(){}get Mc(){}set Mc(t){}get qlt(){return Er.UNAVAILABLE}get Ca(){return this.hu||(this.hu=f2(this)),this.hu}N2t(){Zd.lp("Joining a Chromecast session is not possible when JoinStrategy is configured to disabled")}D2t(){Zd.lp("Leaving a Chromecast session is not possible when JoinStrategy is configured to disabled")}Tn(){Zd.lp("Starting a Chromecast session is not possible when JoinStrategy is configured to disabled")}Kx(){Zd.lp("Stopping a Chromecast session is not possible when JoinStrategy is configured to disabled")}Y2t(){return Promise.resolve()}kn(){}constructor(...t){super(...t),this.hu=void 0}};function g2(t){return{bt:t.bt,OR:t.FR(),ct:t.Nd(),GR:t.GR,lt:t.ZR(),HR:t.zR(),ix:t.ix,ux:t.ux,vx:t.vx,Sx:t.Sx,Rx:t.Rx,Nx:t.Nx,Mx:t.Mx,Ox:t.Ox}}r(),r();var m2=class extends ic{Qet(){return this.qc}ER(){return this.qL}get YR(){return this.KR()}get qR(){return this.jR()}KR(){return this.QL}jR(){return this.jL}Aa(){return this.KL}Cx(){return this.Gl}Bx(){return this.JL}switchContexts(t){this.oa=t,this.qL.MI=t.ht,this.JL.MI=t.rt,this.Gl.MI=t.nt,this.KL.MI=t.pX,this.QL.MI=t.YR,this.jL.MI=t.qR,this.qc.MI=t.Jc}n3t(t){this.oa!==t&&(this.cZ(),this.switchContexts(t),this.uZ())}$L(t){if(this.oa===t)return;let i;this.cZ(),this.ent&&(i=g2(this));const s=this.LR(),e=this.Xx(),n=this.Zx();if(this.switchContexts(t),void 0!==i){Ns(this,i,g2(this))}const r=this.LR();r!==s&&this.So(new Ik(r)),this.Xx()!==e&&this.So(new qt),this.Zx()!==n&&this.So(new Pk),this.uZ()}async kn(t){await super.kn(t),this.KL.kn(t),this.qL.kn(t),this.JL.kn(t),this.Gl.kn(t),this.QL.kn(),this.jL.kn(),await this.qc.kn(t)}constructor(t,i){super(t,i),this.qL=new Yu,this.JL=new Yu,this.Gl=new Jc,this.KL=void 0,this.QL=new Ri,this.jL=new Ok,this.qc=void 0,this.KL=new qo(t.pX),this.qL.MI=t.ht,this.JL.MI=t.rt,this.Gl.MI=t.nt,this.QL.MI=t.YR,this.jL.MI=t.qR,this.qc=new yV(this),this.qc.MI=t.Jc}};r(),r(),r();var p2=class extends Kt{xa(){return new w2(this.interstitial.pnt())}constructor(t){super("r3t"),this.interstitial=void 0,this.interstitial=t}},w2=class extends sh{constructor(t){super("interstitialupdate"),this.interstitial=void 0,this.interstitial=t}},an=function(t){return t.SINGLE="SINGLE",t.DOUBLE="DOUBLE",t.LSHAPE_AD="LSHAPE_AD",t.LSHAPE_CONTENT="LSHAPE_CONTENT",t}({}),y2=class extends fr{get h3t(){var t,i;const s=null!=(i=null!=(t=this.o3t)?t:this.qb)?i:this.pFt;return void 0!==s?this.kO+s:this.VO?this.VO:void 0}get ct(){const t=this.h3t;return void 0===t?void 0:t-this.kO}get a3t(){var t;return null!=(t=this.u3t)?t:0}c3t(t){if(!this.ct)return;const i=(t-(this.kO+this.d3t))/this.ct;i<this.a3t||(this.u3t=_.min(i,1),1===this.u3t&&(this.mx=!0))}er(t){var i,s,e,n;this.qb=null!=(i=t.ct)?i:this.qb,this.VO=null!=(s=t.EO)?s:this.VO,this.o3t=null!=(e=t.l3t)?e:this.o3t,this.d3t=null!=(n=t.f3t)?n:this.d3t,this.v3t(),this.So(new p2(this))}v3t(){void 0===this.qb&&void 0!==this.VO?this.qb=this.VO-this.kO:void 0===this.VO&&void 0!==this.qb&&(this.VO=this.kO+this.qb)}constructor(t){super(),this.o=void 0,this.kO=void 0,this.Ivt=void 0,this._3t=void 0,this.pFt=void 0,this.VO=void 0,this.qb=void 0,this.o3t=void 0,this.u3t=void 0,this.d3t=0,this.mx=!1,this.o=t.o,this.kO=t.kO,this.VO=t.EO,this.pFt=t.PLt,this.qb=t.ct,this.o3t=t.l3t,this.Ivt=t.Ivt,this._3t=t._3t,this.v3t()}};r(),r(),r();var Le=class extends D1{get Jc(){return this.qc}get _0t(){return this.g3t}set _0t(t){this.g3t=t}get g0t(){return this.m3t}set g0t(t){this.m3t=t}set fOt(t){this.OJt=t}get fOt(){return this.OJt}get Z$t(){return this.p3t}w3t(){this.y3t=!0}b3t(t){this.qc.push(t),this.y3t=!1}A3t(t){is(this.qc,t)}get mx(){return this.y3t}constructor(t){super(),this.OJt=void 0,this.qc=void 0,this.g3t=void 0,this.m3t=void 0,this.p3t=void 0,this.y3t=void 0,this.OJt=t,this.qc=[],this.g3t=-1,this.m3t=-1,this.p3t=void 0,this.y3t=!1}},b2=class extends Le{S3t(t){this.qc.push(t)}get mx(){return this.T3t.mx}get DJt(){return Qc.hnt}get _0t(){var t;return null!=(t=this.T3t.ct)?t:-1}get fOt(){return this.T3t.kO}get Z$t(){}get k3t(){return this.T3t}constructor(t){var i;super(t.kO),this.T3t=void 0,this.T3t=t,this.g0t=null!=(i=this.T3t.ct)?i:-1}};r();var Wh=class t extends Kt{xa(){return new A2(this.zQt,this.Ey,this.Ky,this.Mc)}static E3t(i){return new t(Cu.GENERAL,i.Ey,i.KQt)}static R3t(i,s){return new t(i.zQt,i.message,i.KQt,s)}constructor(t,i,s,e){super("x3t"),this.zQt=void 0,this.Ey=void 0,this.Ky=void 0,this.Mc=void 0,this.zQt=t,this.Ey=i,this.Ky=s,this.Mc=e}},A2=class extends sh{constructor(t,i,s,e){super("aderror"),this.problemType=void 0,this.message=void 0,this.errorCode=void 0,this.source=void 0,this.problemType=t,this.message=i,this.errorCode=s,this.source=e}};r(),r(),r();var Cs=function(t){return t.nJt="linear",t.I3t="nonlinear",t.gk="unknown",t}({}),S2=function(t){return t.NONE="none",t.READY="ready",t}({}),Ps=class extends N1{P3t(t,i,s,e,n,r){this.rS=t,this.uA=i,this.cA=s,this.qb=e,this.$qt=n,this.jjt=r,this.C3t="ready"}get N3t(){return this.C3t}get Jqt(){return this.$qt}get ct(){return this.qb}pnt(){var t;return null!=(t=this.hu)?t:this.hu=this.xa()}get Mi(){return this.cA}get o(){return this.rS}get qjt(){return this.jjt}get Ti(){return this.uA}get D3t(){return this.B3t}get wjt(){return this.yjt}get Xqt(){return this.Zqt}get Iqt(){return this.Zjt}get Z$t(){return this.p3t}get M3t(){return this.L3t}N0t(){}L0t(){return""}M0t(){return this.O3t}constructor(t,i){super(),this.B3t=void 0,this.od=void 0,this.hu=void 0,this.rS=void 0,this.jjt=void 0,this.uA=void 0,this.cA=void 0,this.qb=void 0,this.O3t=void 0,this.yjt=void 0,this.Zqt=void 0,this.Zjt=void 0,this.$qt=void 0,this.C3t=void 0,this.p3t=void 0,this.L3t=void 0,this.B3t=i,this.rS=void 0,this.jjt=void 0,this.uA=void 0,this.cA=void 0,this.qb=void 0,this.Zjt=[],this.$qt=[],this.C3t="none",this.p3t=void 0,this.L3t=!1,this.od=t}};function _a(t){return{get adSystem(){return t.N0t()},get readyState(){return t.N3t},get adBreak(){return t.od.pnt()},get duration(){return t.ct},get companions(){return t.Jqt.map(t=>t.Ca)},get resourceURI(){return t.M0t()},get clickThrough(){return t.wjt},get width(){return t.Ti},get type(){return function(t){switch(t){case"linear":case"unknown":return"linear";case"nonlinear":return"nonlinear"}}(t.D3t)},get height(){return t.Mi},get id(){return t.o},get skipOffset(){return t.qjt},get integration(){return t.DJt},get creativeId(){return t.Xqt},get universalAdIds(){return t.Iqt},get customData(){return t.Z$t},get isSlate(){return t.M3t}}}var T2=class extends Ps{xa(){return _a(this)}get DJt(){return Qc.hnt}constructor(t){super(t,function(t){return t===an.LSHAPE_CONTENT?Cs.I3t:Cs.nJt}(t.k3t.F3t)),t.S3t(this)}};var k2=class extends T2{constructor(t,i){super(t),this.qb=_.min(i,this.od._0t)}},E2=function(t){return t.AD_LOADING="adloading",t.AD_LOADED="adloaded",t.AD_PAUSED="adpaused",t.AD_ERROR="aderror",t.AD_ENDED="adended",t}({}),ae=function(t){return t[t.GOOGLE=0]="GOOGLE",t[t.DEFAULT=1]="DEFAULT",t[t.COMPANION=2]="COMPANION",t}({}),R2=class extends fr{get w0t(){return this.Z0t}get V3t(){return this.W3t}get wnt(){return this.X0t}get U3t(){return this.D0t}G3t(){return Boolean(this.W3t)}X3t(t){}Z3t(t){}H3t(t,i){let s;if(t.kO<i){const e=_.min(t.ct,t.h3t-i);s=t.ct-e,t.er({ct:e,f3t:s})}return s}z3t(t){const i=new b2(t);this.Z0t.push(i)}Y3t(t){const i=this.K3t(t);is(this.Z0t,i)}K3t(t){return me(this.Z0t,i=>i.k3t===t)}q3t(){this.j3t.wn(d.Uw,this.Q3t),this.j3t.wn(Vo.wM,this.J3t),this.j3t.wn(d.vy,this.W6),this.j3t.wn(d.Nw,this.$3t),this.j3t.wn(sa.ma,this.lKt)}t5t(){this.j3t.mn(d.Uw,this.Q3t),this.j3t.mn(Vo.wM,this.J3t),this.j3t.mn(d.vy,this.W6),this.j3t.mn(d.Nw,this.$3t),this.j3t.mn(sa.ma,this.lKt)}bd(t){var i;null==(i=this.W3t)||i.c3t(this.i5t(t.currentTime))}async s5t(t,i,s,e){const n={stack:[],error:void 0,hasError:!1};try{var r;null==(r=this.hW)||r.Jg();const h=Zr(n,ui.nm([i]),!1);this.hW=h;const o=h.jg;return Ko(o),await this.j3t.s5t(bc(t),s,e,o)}catch(t){n.error=t,n.hasError=!0}finally{hs(n)}}e5t(t){void 0!==this.n5t?(this.W3t=this.n5t,this.n5t=void 0,this.X0t=this.K3t(this.W3t),this.D0t=new k2(this.X0t,this.j3t.Nd()),this.W3t.er({ad:this.U3t}),this.r5t.So(new vV(this.X0t)),this.r5t.So(new te(this.D0t,t))):Zd.lp("Expected an ad to start.")}Bd(t){this.W3t&&(this.W3t.c3t(t),this.W3t.mx=!0,this.Y3t(this.W3t),this.W3t=void 0),this.D0t&&(this.r5t.So(new He(this.D0t,t)),this.D0t=void 0),this.X0t?(this.r5t.So(new Xh(this.X0t)),this.X0t=void 0):(Zd.lp("An ad break has ended without realizing we are in an ad break."),this.So(new sh("adended")))}i5t(t){var i,s;return(null!=(s=null==(i=this.W3t)?void 0:i.kO)?s:0)+t}async hr(){var t;null==(t=this.hW)||t.Jg(),this.hW=void 0,this.t5t(),this.Z0t=[],this.D0t=void 0,this.X0t=void 0,this.W3t=void 0,this.n5t=void 0}async kn(){await this.hr(),await this.h5t.kn()}constructor(t,i,s){super(),this.j3t=void 0,this.h5t=void 0,this.r5t=new sc,this.Z0t=[],this.X0t=void 0,this.D0t=void 0,this.W3t=void 0,this.n5t=void 0,this.hW=void 0,this.W6=t=>{this.bd(t)},this.Q3t=()=>{this.So(new sh("adloading"))},this.J3t=()=>{this.So(new sh("adloaded"))},this.$3t=t=>{this.Bd(this.i5t(this.j3t.FR()))},this.lKt=()=>{this.So(new Wh(Cu.GENERAL))},this.j3t=t,this.h5t=i,this.Z0t=s,this.h5t.o5t(this),this.r5t=i.a5t}};function x2(t){const i=h.createElement("div");return fi(i,"theo-ads-sgai-ima-container"),function(t){t.style.boxSizing="border-box",t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%"}(i),t.appendChild(i),i}function I2(t){const i=t.style;i.boxSizing="border-box",i.position="absolute",i.display="none",i.border="0 solid transparent",i.borderWidth="0px",i.width="100%",i.height="100%"}function P2(t){const i=t.style;i.display="",i.backgroundColor="",i.backgroundRepeat="",i.backgroundAttachment="",i.border="",i.borderWidth="",i.flex="",i.transform="",i.transition="",i.backgroundImage="",i.backgroundSize="",i.backgroundPosition="",i.alignItems="",i.position=""}function C2(t,i,s,e,n){const r=i/s;let h=1,o=0,a=0;if(r>=e/n){const t=e/r;o=(n-t)/2,h=t/s}else{const t=n*r;a=(e-t)/2,h=t/i}t.style.left=a/e*100+"%",t.style.top=o/n*100+"%",t.style.width=i*h/e*100+"%",t.style.height=s*h/n*100+"%"}function N2(t){return t.F3t===an.LSHAPE_CONTENT?ae.COMPANION:D2(t.eyt)?ae.GOOGLE:ae.DEFAULT}function D2(t){return Qe(t,"theo-ads://dai.break")}function B2(t){return t&&t.integration===Za.THEOADS}var M2=class extends m2{nu(){const t=super.nu();return!t&&this.u5t.yQ&&this.u5t.Mc?this.u5t.Mc:t}Ta(t,i){return this.ta.Zo(i=>(this.c5t=new ui,this.c5t.$g(i),Ce(super.Ta(t,this.c5t.jg),this.c5t)),i)}Yx(){super.Yx(),this.Cd.cast.strategy!==DS.AUTO||this.u5t.yQ||this.u5t.Y2t()}q2t(t){return this.ta.Zo(i=>this.d5t(t,i))}$2t(t,i){return void 0===t&&(t=void 0),void 0===i&&(i=!1),this.ta.Zo(s=>this.l5t(t,i,s))}d5t(t,i){Ko(i),this.f5t.Jc&&this.f5t.Jc.Tnt(t.Jc),this.v5t(),this._5t=me(this.f5t.ht.CI,t=>t.Rt),this.zkt=me(this.f5t.nt.CI,t=>"showing"===t.Hk),this.g5t=me(this.f5t.rt.CI,t=>t.Rt),this.m5t=t,this.m5t.w2t(this._5t,this.zkt,this.g5t),this.$L(t),this.m5t.gr()}async l5t(t,i,s){Ko(s);const e=this.m5t;if(void 0!==e)try{if(t){await this.f5t.Kx(),Ko(s);const e=bc(t,this.f5t.Cd);var n;if(i)e.ads=null==(n=e.ads)?void 0:n.filter(B2);this.c5t=new ui,this.c5t.$g(s),await Ce(this.f5t.Ta(e,this.c5t.jg),this.c5t)}i&&this.f5t.Jc&&e.Jc.Tnt(this.f5t.Jc)}catch(t){Na(t)}finally{e.mr(),this.$L(this.f5t),this._5t=me(this.m5t.ht.CI,t=>t.Rt),this.zkt=me(this.m5t.nt.CI,t=>"showing"===t.Hk),this.g5t=me(this.m5t.rt.CI,t=>t.Rt),this.f5t.ht.wn(Lu.nI,this.p5t),this.f5t.nt.wn(Lu.nI,this.w5t),this.f5t.rt.wn(Lu.nI,this.y5t),this.f5t.wn(Vo.bM,this.v5t),this.m5t===e&&(this.m5t=void 0)}}Kx(){var t;return this._5t=void 0,this.zkt=void 0,this.g5t=void 0,this.v5t(),null==(t=this.c5t)||t.Jg(),this.ta.Zo(()=>super.Kx())}async kn(){var t;null==(t=this.c5t)||t.Jg(),this.u5t.kn(),await this.$2t(),await this.ta.kn(),await super.kn()}constructor(t,i){super(t),this.u5t=void 0,this.f5t=void 0,this.m5t=void 0,this.ta=new Fu,this.c5t=void 0,this._5t=void 0,this.zkt=void 0,this.g5t=void 0,this.p5t=t=>{const i=t.Ht;L2(this._5t,i)&&(i.Rt=!0)},this.w5t=t=>{const i=t.Ht;L2(this.zkt,i)&&(i.Hk=Z.Kn)},this.y5t=t=>{const i=t.Ht;L2(this.g5t,i)&&(i.Rt=!0)},this.v5t=()=>{this.f5t.ht.mn(Lu.nI,this.p5t),this.f5t.nt.mn(Lu.nI,this.w5t),this.f5t.rt.mn(Lu.nI,this.y5t)},this.f5t=t,this.Cd.cast.strategy!==DS.DISABLED?this.u5t=new v2(this,t,this.Cd.cast,i):this.u5t=new _2,this.Lz.RQ(this.u5t)}};function L2(t,i){return void 0!==t&&void 0!==i&&(t.bs===i.bs&&i.Th===t.Th)}r();var O2=new class extends fr{B2t(t){this.b5t=t}M2t(){return this.b5t}O2t(){return this.A5t}e3t(){switch(this.S5t.getCastState()){case cast.framework.CastState.CONNECTED:return Er.CONNECTED;case cast.framework.CastState.CONNECTING:return Er.CONNECTING;case cast.framework.CastState.NOT_CONNECTED:return Er.AVAILABLE;case cast.framework.CastState.NO_DEVICES_AVAILABLE:default:return Er.UNAVAILABLE}}async Fj(t,i){await H$(i),this.S5t=cast.framework.CastContext.getInstance(),this.S5t.addEventListener(cast.framework.CastContextEventType.CAST_STATE_CHANGED,this.xQ),this.S5t.setOptions({receiverApplicationId:t.appID,autoJoinPolicy:chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED})}async G2t(){try{const t=await this.S5t.requestSession();if(t)throw t}catch(t){throw new ms(Q$(t))}}Z2t(t){var i;return null==(i=this.b5t)?void 0:i.onStart(t)}J2t(t){var i;return null==(i=this.b5t)?void 0:i.onStop(t)}z2t(t){var i;return null==(i=this.b5t)?void 0:i.onJoin(t)}Q2t(t){var i;return null==(i=this.b5t)?void 0:i.onLeave(t)}t3t(t){this.S5t.endCurrentSession(t)}constructor(...t){super(...t),this.S5t=void 0,this.A5t=void 0,this.b5t=void 0,this.xQ=()=>{const t=this.e3t();this.A5t=t===Er.CONNECTED?new v1(this.S5t.getCurrentSession()):void 0,this.So(new m1(t))}}},F2=new class{get Ca(){return this.hu||(this.hu=function(t){return{initialize(i){const s=t.Fj(BS(i));return s.catch(ol),s},startSession(){const i=t.G2t();return i.catch(ol),i},endSession(){t.T5t()}}}(this)),this.hu}async Fj(t){this.U2t||(this.U2t=this.k5t(t)),await this.U2t}async k5t(t){await this.L2t.Fj(t)}async G2t(){if(!this.U2t)throw new m("Chromecast must be initialized before starting a session");await this.U2t,this.L2t.O2t()||await this.L2t.G2t()}E5t(){this.L2t.t3t(!1)}T5t(){this.L2t.t3t(!0)}constructor(t){this.U2t=void 0,this.hu=void 0,this.L2t=void 0,this.L2t=t}}(O2),V2={get chromecast(){return F2.Ca}};zF(t=>new M2(t,O2),ZF.ont),r(),r(),r(),r(),r(),r(),r();var W2=class{R5t(t,i,s,e){t.BZ.forEach(t=>{if(!this.x5t(t.I5t)){const n=t.P5t(i,s,e);n&&this.C5t(n)}})}x5t(t){return this.N5t.get(t)}C5t(t){this.N5t.set(t.D5t,t),this.B5t.set(t.D5t,t.M5t),this.L5t.au(t.a5t)}knt(t){this.B5t.has(t.D5t)||(this.B5t.set(t.D5t,t),this.L5t.au(t.a5t))}O5t(t){return this.B5t.forEach(t)}F5t(t){return this.N5t.forEach(t)}V5t(t){let i=!1;return this.N5t.forEach(s=>{i=s.V5t(t)||i}),i}async kn(){const t=[];this.N5t.forEach(i=>t.push(i.kn())),this.B5t.forEach(i=>t.push(i.kn())),await Promise.all(t),this.N5t.clear(),this.B5t.clear()}constructor(t){this.L5t=void 0,this.N5t=void 0,this.B5t=void 0,this.L5t=t,this.N5t=Se(),this.B5t=Se()}},U2=class extends sc{get W5t(){return this.U5t}get zc(){let t=!1;return this.G5t(i=>{t=t||i.X5t}),t}get mnt(){const t=[];return this.G5t(i=>{const s=i.mnt;s.length&&t.push(...s)}),t}get wnt(){let t=null;return this.G5t(i=>{null!=t||(t=i.wnt)}),t}get ynt(){const t=[];return this.G5t(i=>{t.push(...i.ynt)}),t}get bnt(){const t=[];return this.G5t(i=>{t.push(...i.bnt)}),t}Tnt(t){this.G5t(i=>{i.Tnt(t)})}get Ca(){var t;return null!=(t=this.hu)?t:this.hu=hV(this)}B6(t,i,s){try{this.Z5t=s;const e=$h.Bg.LZ(t);if(e.I5t===Qc.hnt)return;const n=this.U5t.x5t(e.I5t);if(!n)throw new rs(Cu.ADBLOCK,void 0,"Ads could not be loaded.");i!==rV.gnt&&this.s8||this.z5t.H5t(n),e.B6(t,i,n,this.Z5t)}catch(i){0,this.So(Wh.R3t(i,t.sources))}}nN(){this.G5t(t=>{t.nN()})}Ant(t){this.G5t(i=>{i.Ant(t)})}knt(t){this.U5t.knt(t)}Snt(t,i){return this.z5t.Snt(t,i)}Y5t(t){this.U5t.F5t(i=>{i.Y5t(t)})}V5t(t){return this.U5t.V5t(t)}G5t(t){return this.U5t.O5t(t)}Hx(){this.U5t.F5t(t=>t.Hx())}async hr(){this.s8=!1;const t=[];this.U5t.F5t(i=>t.push(i.Kx())),await Promise.all(t)}async kn(){this.Vo(),await this.U5t.kn(),this.z5t.mn(d.uo,this.Vst),this.mn("x3t",this.K5t)}constructor(t){super(),this.z5t=void 0,this.U5t=void 0,this.Z5t=!1,this.s8=!1,this.hu=void 0,this.K5t=t=>{if(!this.Z5t)return;if(t.Ky===De.VAST_NO_ADS_AFTER_WRAPPER||t.Ky===De.VAST_EMPTY_RESPONSE)return;const i=new iu(Lt.ADVERTISEMENT_ERROR,t.Ey),s=new Wt(Ne.AD_BLOCKER_DETECTED,t.Ey+" Turn off your AdBlocker and try again.",i);this.z5t.XX(s)},this.Vst=()=>{this.s8=!0},this.z5t=t,this.U5t=new W2(this),this.wn("x3t",this.K5t),t.wn(d.uo,this.Vst)}};r(),r();var G2=class extends Le{get DJt(){return this.q5t}get ynt(){return this.j5t}er(t){void 0!==t.maxDuration&&(this.g3t=t.maxDuration),void 0!==t.customData&&(this.p3t=t.customData)}Q5t(t){const i=this.qc.indexOf(t);return i>=0&&i<this.qc.length-1}b3t(t){super.b3t(t),this.j5t.push(t)}J5t(t){is(this.j5t,t)}A3t(t){super.A3t(t),is(this.j5t,t)}constructor(t,i){super(i.timeOffset),this.q5t=void 0,this.j5t=[],this.q5t=t,this.er(i)}};r(),r();var X2=class{get cjt(){return this.djt}get mjt(){return this.pjt}get $5t(){return this.t4t}get wjt(){return this.yjt}get Mi(){return this.cA}get BQt(){return this.O3t}get Ti(){return this.uA}get Ca(){var t;return null!=(t=this.hu)?t:this.hu=function(t){return{get adSlotId(){return t.cjt},get altText(){return t.mjt},get contentHTML(){return t.$5t},get clickThrough(){return t.wjt},get height(){return t.Mi},get resourceURI(){return t.BQt},get width(){return t.Ti}}}(this)}i4t(t){if(t.wjt&&t.BQt)return;const i=function(t){try{return b0(t,"text/html")}catch(t){return}}(t.$5t);i&&(this.yjt=Z2(i,"a","href"),this.O3t=Z2(i,"img","src"))}constructor(t){var i;this.hu=void 0,this.uA=void 0,this.cA=void 0,this.t4t=void 0,this.djt=void 0,this.yjt=void 0,this.O3t=void 0,this.pjt=void 0,this.djt=t.cjt,this.uA=t.Ti,this.cA=t.Mi,this.t4t=t.$5t,this.yjt=t.wjt,this.O3t=t.BQt,this.pjt=null!=(i=t.mjt)?i:"",this.i4t(t)}};function Z2(t,i,s){const e=t.querySelector(i);return e&&e.getAttribute(s)||""}var H2=class extends Ps{get DJt(){return this.q5t}get a3t(){return this.u3t}set a3t(t){this.u3t=t}xa(){return _a(this)}er(t){t.id&&(this.rS=t.id),void 0!==t.skipOffset&&(this.jjt=t.skipOffset),void 0!==t.width&&(this.uA=t.width),void 0!==t.height&&(this.cA=t.height),void 0!==t.duration&&(this.qb=t.duration),void 0!==t.readyState&&(this.C3t=function(t){return"ready"===t?S2.READY:S2.NONE}(t.readyState)),void 0!==t.resourceURI&&(this.O3t=t.resourceURI),void 0!==t.clickThrough&&(this.yjt=t.clickThrough),void 0!==t.companions&&(this.$qt=[...t.companions].map(z2)),void 0!==t.creativeId&&(this.Zqt=t.creativeId),void 0!==t.universalAdIds&&(this.Zjt=t.universalAdIds),void 0!==t.customData&&(this.p3t=t.customData)}constructor(t,i,s){super(s,function(t){return"linear"===t?Cs.nJt:"nonlinear"===t?Cs.I3t:Cs.gk}(i.type)),this.q5t=void 0,this.u3t=0,this.q5t=t,this.er(i)}};function z2(t){const i={cjt:t.adSlotId,mjt:t.altText,$5t:t.contentHTML,GT:void 0,wjt:t.clickThrough,Mi:t.height,BQt:t.resourceURI,Ti:t.width};return new X2(i)}r();var da=class extends Ha{xa(){return new Y2(this.xnt.pnt(),this.s4t)}get s4t(){return this.e4t}constructor(t,i){super("n4t",t),this.e4t=void 0,this.e4t=i}},Y2=class extends Wa{constructor(t,i){super("adskip",t),this.playedPercentage=void 0,this.playedPercentage=i}};r();var K2=class extends Gt{xa(){return new q2(this.od.pnt())}constructor(t){super("r4t",t)}},q2=class extends Re{constructor(t){super("updateadbreak",t)}};r();var j2=class extends Gt{xa(){return new Q2(this.od.pnt())}constructor(t){super("h4t",t)}},Q2=class extends Re{constructor(t){super("adbreakchange",t)}};r();var ke=class extends Ha{xa(){return new J2(this.xnt.pnt(),this.currentTime)}constructor(t,i){super("o4t",t),this.currentTime=void 0,this.currentTime=i}},J2=class extends Wa{constructor(t,i){super("adfirstquartile",t),this.currentTime=void 0,this.currentTime=i}};r();var Ks=class extends Ha{xa(){return new $2(this.xnt.pnt(),this.currentTime)}constructor(t,i){super("a4t",t),this.currentTime=void 0,this.currentTime=i}},$2=class extends Wa{constructor(t,i){super("admidpoint",t),this.currentTime=void 0,this.currentTime=i}};r();var Ji=class extends Ha{xa(){return new t3(this.xnt.pnt(),this.currentTime)}constructor(t,i){super("u4t",t),this.currentTime=void 0,this.currentTime=i}},t3=class extends Wa{constructor(t,i){super("adthirdquartile",t),this.ad=void 0,this.currentTime=void 0,this.ad=t,this.currentTime=i}},i3=class{get Jc(){return this.qc}get w0t(){return this.Z0t}get Ca(){var t;return null!=(t=this.hu)?t:this.hu=function(t){return{get integration(){return t.DJt},get ads(){return t.Jc.map(t=>t.pnt())},get adBreaks(){return t.w0t.map(t=>t.pnt())},createAd:(i,s)=>t.c4t(i,s?t.d4t(s):void 0).pnt(),updateAd(i,s){t.l4t(t.f4t(i),s)},updateAdProgress(i,s){const e=ss(Number(s),0,1);t.v4t(t.f4t(i),e)},beginAd(i){t.J5t(t.f4t(i))},endAd(i){t._4t(t.f4t(i))},skipAd(i){t._$t(t.f4t(i))},removeAd(i){t.A3t(t.f4t(i))},createAdBreak:i=>t.g4t(i).pnt(),updateAdBreak(i,s){t.m4t(t.d4t(i),s)},removeAdBreak(i){t.p4t(t.d4t(i))},removeAllAds(){t.w4t()},error(i){t.y4t(i)},fatalError(i,s){const e=s?Number(s):void 0;t.b4t(i,e)}}}(this)}get eD(){return this.r9}set eD(t){this.r9=t}get X5t(){return this.A4t.some(t=>t.D3t===Cs.nJt)}get D5t(){return this.DJt}get mnt(){return this.A4t}get wnt(){var t;return null!=(t=this.X0t)?t:null}get ynt(){return vl(this.Z0t,t=>t.ynt)}get bnt(){return this.Z0t.filter(t=>!t.mx)}nN(){var t;if(0===this.A4t.length)return;const i=this.A4t[0];(null==(t=this.r9)?void 0:t.skipAd)?this.r9.skipAd(i.pnt()):this._$t(i)}Ant(t){}Tnt(t){}c4t(t,i){var s;const e=null!=i?i:this.S4t({timeOffset:null!=(s=t.timeOffset)?s:0}),n=new H2(this.DJt,t,e);return e.b3t(n),this.qc.push(n),this.a5t.So(new dV(n)),n}l4t(t,i){t.er(i),this.a5t.So(new U1(t))}v4t(t,i){if(!Ft(this.A4t,t))throw new m("Cannot update ad progress on a non-started ad");const s=t.a3t,e=_.max(s,i);t.a3t=e;const n=this.z5t.FR();s<.25&&e>=.25&&this.a5t.So(new ke(t,n)),s<.5&&e>=.5&&this.a5t.So(new Ks(t,n)),s<.75&&e>=.75&&this.a5t.So(new Ji(t,n))}J5t(t){Ft(this.A4t,t)||(this.A4t.push(t),t.od.J5t(t),this.T4t(t.od),this.a5t.So(new te(t,this.z5t.FR())))}_$t(t){if(!Ft(this.A4t,t))return;const i=t.od.Q5t(t);this.a5t.So(new da(t,t.a3t)),this.k4t(t,i)}_4t(t){if(!Ft(this.A4t,t))return;const i=t.od.Q5t(t);this.a5t.So(new He(t,this.z5t.FR())),this.k4t(t,i)}A3t(t){if(!Ft(this.qc,t))return;const i=t.od.Q5t(t);is(this.qc,t),t.od.A3t(t),this.a5t.So(new j2(t.od)),this.k4t(t,i)}g4t(t){const i=new G2(this.DJt,t);return this.Z0t.push(i),this.a5t.So(new uV(i)),i}m4t(t,i){t.er(i),this.a5t.So(new K2(t))}p4t(t){if(Ft(this.Z0t,t)){for(const i of t.Jc.slice())this.A3t(i);is(this.Z0t,t),this.a5t.So(new Su(t))}}w4t(){for(const t of this.Z0t.slice())this.p4t(t)}y4t(t){this.a5t.So(new Wh(Cu.GENERAL,t.message))}b4t(t,i){const s=new Wt(null!=i?i:Ne.AD_ERROR,t.message,t);this.z5t.XX(s)}K3t(t){return me(this.Z0t,i=>i.fOt===t)}S4t(t){var i;return null!=(i=this.K3t(t.timeOffset))?i:this.g4t(t)}k4t(t,i){is(this.A4t,t);const s=t.od;0!==this.A4t.length||this.X0t!==s||i||(s.w3t(),this.T4t(void 0))}T4t(t){this.X0t!==t&&(void 0!==this.X0t&&this.a5t.So(new Xh(this.X0t)),this.X0t=t,void 0!==t&&this.a5t.So(new vV(t)))}f4t(t){const i=me(this.qc,i=>i.pnt()===t);if(void 0===i)throw new m('Invalid ad for integration "'+this.DJt+'"');return i}d4t(t){const i=me(this.Z0t,i=>i.pnt()===t);if(void 0===i)throw new m('Invalid ad break for integration "'+this.DJt+'"');return i}async Ta(t,i){var s;if(Ko(i),null==(s=this.r9)?void 0:s.setSource){let i=await Promise.resolve(this.r9.setSource(t));return hu(i)&&(i=t),bc(i,this.z5t.Cd)}return t}async E4t(){var t;(null==(t=this.r9)?void 0:t.resetSource)?await Promise.resolve(this.r9.resetSource()):this.w4t()}async kn(){var t;(null==(t=this.r9)?void 0:t.destroy)&&await Promise.resolve(this.r9.destroy()).catch(ol),this.w4t(),this.T4t(void 0),this.r9=void 0,this.a5t.kn()}constructor(t,i){this.DJt=void 0,this.z5t=void 0,this.r9=void 0,this.a5t=new sc,this.qc=[],this.Z0t=[],this.A4t=[],this.X0t=void 0,this.hu=void 0,this.DJt=t,this.z5t=i}};r();var s3=class{destroy(){this.removeAdListeners()}get player(){return this.oa}set player(t){this.oa&&this.removeAdListeners(),this.oa=t,this.addAdListeners()}get inAdBreak(){return this.R4t}addAdListeners(){var t,i;null==(t=this.oa.Jc)||t.wn("Cnt",this.Ed),null==(i=this.oa.Jc)||i.wn("Pnt",this.Bd)}removeAdListeners(){var t,i;null==(t=this.oa.Jc)||t.mn("Cnt",this.Ed),null==(i=this.oa.Jc)||i.mn("Pnt",this.Bd)}constructor(t){this.oa=void 0,this.q9=void 0,this.R4t=!1,this.Ed=t=>{1!==this.oa.vx&&(this.q9=this.oa.vx,this.oa.vx=1),this.R4t=!0},this.Bd=t=>{this.R4t=!1,void 0!==this.q9&&(this.oa.vx=this.q9,this.q9=void 0)},this.oa=t,this.addAdListeners()}},e3=class extends m2{Qet(){return this.x4t}get I4t(){return this.j3t}Hx(){this.f5t.Hx(),this.x4t.Hx()}Yx(){void 0===this.$G?(void 0!==this.P4t&&this.C4t(this.P4t),super.Yx()):this.So(new $e(this.$G))}async Ta(t,i){Ko(i);let s=t;if(s)for(const t of this.N4t)s=await t.Ta(s,i);if(await super.Ta(s,i),Ko(i),null==s?void 0:s.ads){const t=Boolean(s.blockContentIfAdError);this.x4t.Y5t(s.playAdsAfterTime);for(const i of s.ads)this.x4t.B6(i,rV.gnt,t)}}async Kx(){this.$G=void 0,this.CZ=void 0,await this.x4t.hr(),this.$2t(),await super.Kx();for(const t of this.N4t)await t.E4t()}C4t(t){this.D4t=this.oa.vx;const i=this.oa.Ox,s=this.oa.ix;t.Vx(i),t.nx(s),this.j3t=t,this.P4t=void 0,this.$L(t)}H5t(t){void 0===this.j3t&&(this.P4t=t)}$2t(){this.P4t=void 0,void 0!==this.j3t&&(this.f5t.vx=this.D4t,this.f5t.Ox=this.Ox,this.f5t.ix=this.ix,this.$L(this.f5t),this.j3t=void 0)}ZR(){var t;return null!=(t=this.CZ)?t:super.ZR()}zR(){var t;return null!=(t=this.$G)?t:super.zR()}XX(t){void 0===this.zR()&&(this.$G=t,this.CZ=xs(t),this.So(new $e(t)))}iI(t){return void 0===this.j3t&&this.x4t.V5t(t)}Snt(t,i){try{const s=new i3(t,this);s.eD=i(s.Ca),this.x4t.knt(s),this.N4t.push(s),t!==Za.UPLYNK&&(this.B4t=new s3(this))}catch(i){this.x4t.So(new Wh(Cu.GENERAL,'Error while constructing ad integration "'+t+'": '+i+'"'))}}gx(t){var i;(null==(i=this.B4t)?void 0:i.inAdBreak)||super.gx(t)}async kn(){var t;for(const t of this.N4t)await t.kn().catch(ol);await this.x4t.kn(),this.$2t(),null==(t=this.B4t)||t.destroy(),this.B4t=void 0,await super.kn()}constructor(t,i){super(t),this.x4t=void 0,this.f5t=void 0,this.N4t=[],this.j3t=void 0,this.P4t=void 0,this.$G=void 0,this.CZ=void 0,this.B4t=void 0,this.D4t=1,this.f5t=t,this.x4t=new U2(this),this.x4t.W5t.R5t(i,t,this,t.Cd)}};zF(t=>new e3(t,$h.Bg),ZF.nnt),r(),r(),r();var n3=As.ru&&As.K_<12,r3=class extends ic{get OR(){return this.FR()}set OR(t){this.WR(t)}Wet(){return this.oa.Wet()}get ct(){return this.Nd()}get YR(){return this.QL}get qR(){return this.jL}get kx(){return this.Ex()}get Wx(){return this.rX}get a5t(){return this.r5t}get ht(){return this.qL}get X5t(){return this.z5t.I4t===this}PR(){return ZT.tL()._s()}DR(){}MR(t){}_x(){return 1}gx(t){}wx(){return new ZT([0,this.OR])._s()}xx(){return!1}Cx(){return this.Gl}Bx(){return this.JL}ds(){return this.Xx().ds}Xx(){return this.ha}Ea(){}async kn(){this.Vo(),this.qL.kn(),this.JL.kn(),this.Gl.kn(),this.r5t.kn(),this.oa.mn(d.Rw,this.Rs)}M4t(){n3&&this.L4t(),this.X5t||this.z5t.C4t(this)}$2t(){this.X5t&&(n3&&this.O4t(),As.Tg&&this.xe.querySelectorAll("video[src]").forEach(t=>{t.src=""}),Zd.Zs.Bm&&this.oa.$x(),this.z5t.$2t())}L4t(){this.F4t||(s.addEventListener("blur",this.V4t),s.addEventListener("focus",this.W4t),this.F4t=!0)}O4t(){s.removeEventListener("blur",this.V4t),s.removeEventListener("focus",this.W4t),this.F4t=!1}U4t(){requestAnimationFrame(()=>this.oa.we())}constructor(t,i){super(t,!0),this.z5t=void 0,this.F4t=void 0,this.JL=void 0,this.qL=void 0,this.Gl=void 0,this.QL=void 0,this.jL=void 0,this.r5t=void 0,this.ha=void 0,this.rX=void 0,this.V4t=void 0,this.W4t=void 0,this.z5t=i,this.F4t=!1,this.JL=new O,this.qL=new O,this.Gl=new ou,this.QL=new IS,this.jL=new Dk,this.r5t=new sc,this.ha=new bs,this.rX=new qI,this.V4t=()=>{this.oa.be()},this.W4t=()=>{this.U4t()},this.oa.wn(d.Rw,this.Rs)}};r(),r();var h3=0,o3="theoplayer-wrapper",a3=class t{get G4t(){return this.X4t}get Z4t(){return this.H4t}get z4t(){return 1===this.H4t.length&&i1(this.H4t[0].sources.type)}get Y4t(){return this.K4t}q4t(t){const i=this.j4t===t.timeOffset;return!this.Q4t&&i}get J4t(){return this.$4t}get t6t(){return n1(this.i6t)&&!this.Q4t}get j4t(){return this.i6t}get dd(){return this.s6t}e6t(){if(S(this.s6t)){let t=this.j4t;if(void 0===t)return void(this.s6t=0);if("string"==typeof t&&n1(t)){const i=this.oa.Nd();S(i)||i===1/0||(t=e0(t)*i)}S(t)||(this.s6t=t)}}get n6t(){return this.r6t}set n6t(t){this.r6t=t}get h6t(){return this.o6t}set h6t(t){this.o6t=t,this.a6t=!1}get u6t(){return this.c6t}d6t(t){this.c6t.push(t)}l6t(){if(!this.Q4t){let t,i,s=this.X4t===rV.gnt&&void 0===this.f6t&&1===this.H4t.length;const e=this.H4t[0];if(!s&&1===this.H4t.length){const t=Zd.Dh(e.sources.src).searchParams.get("output");t&&t.toLowerCase().indexOf("vmap")>-1&&(s=!0,void 0!==this.f6t&&Si("Do not set a timeOffset for VMAP ad sources. VMAP ads have their own offsets included."))}if(i1(e.sources.type)||s)t=e.sources.src;else{if(S(this.oa.Nd())&&"end"===this.v6t())return;i=this._6t()}let n=this.oa.Nd();(S(n)||n===1/0)&&(n=-3),this.Q4t={g6t:this.oa.xe.offsetWidth,m6t:this.oa.xe.offsetHeight,p6t:this.oa.xe.offsetWidth,w6t:this.oa.xe.offsetHeight,y6t:this.Net,b6t:this.wZ,A6t:t,S6t:i,T6t:e.omidAccessModeRules,k6t:n}}return this.Q4t}_6t(){return'<vmap:VMAP xmlns:vmap="http://www.iab.net/videosuite/vmap" version="1.0">'+this.H4t.map((t,i)=>this.E6t(t.sources,i)).join("\n")+"</vmap:VMAP>"}E6t(t,i){const s=this.v6t(),e=t.src;return'<vmap:AdBreak timeOffset="'+s+'" breakType="linear,nonlinear" breakId="theoplayer-break-'+this.qI+"-"+i+'"><vmap:AdSource allowMultipleAds="true" followRedirects="true"><vmap:VASTAdData><VAST version="3.0"><Ad id="'+o3+"-"+this.qI+"-"+i+'"><Wrapper allowMultipleAds="true" followAdditionalWrappers="true"><VASTAdTagURI><![CDATA['+e+"]]></VASTAdTagURI></Wrapper></Ad></VAST></vmap:VASTAdData></vmap:AdSource></vmap:AdBreak>"}v6t(){if(0===this.j4t)return"start";if(this.j4t===1/0)return"end";const t=this.j4t;if("string"==typeof t&&n1(t)){const i=e0(t)*this.oa.Nd();return Pa.PJt(i)}return Pa.PJt(this.j4t||0)}R6t(t){this.H4t.push(t)}x6t(t){const i=o3+"-"+this.qI+"-";for(const s of t)if(Qe(s,i)){const t=Number(s.slice(i.length));if(!S(t)&&t>=0&&t<this.H4t.length)return t}return-1}static I6t(t){if(void 0!==t)return-1===t?1/0:t}P6t(){this.$4t=!0}get uO(){return this.Net}set uO(t){this.Net=t}get ix(){return this.wZ}set ix(t){this.wZ=t}constructor(i,s,e,n){this.X4t=void 0,this.oa=void 0,this.K4t=void 0,this.i6t=void 0,this.Q4t=void 0,this.s6t=void 0,this.r6t=void 0,this.o6t=void 0,this.a6t=void 0,this.$4t=void 0,this.c6t=void 0,this.Net=void 0,this.wZ=void 0,this.H4t=void 0,this.f6t=void 0,this.qI=void 0,this.X4t=s,this.oa=e,this.K4t=n,this.s6t=NaN,this.r6t=!1,this.o6t=!1,this.$4t=!1,this.c6t=[],this.Net=!1,this.wZ=!1,this.H4t=[],this.qI=++h3,this.f6t=i.timeOffset,this.i6t=t.I6t(this.f6t),this.e6t(),this.H4t.push(i)}};r();var u3=class{get C6t(){return this.N6t.C6t}get D6t(){return this.N6t.D6t}get ynt(){return this.N6t.ynt}get t(){return this.N6t.t}Y5t(t){this.B6t=t}M6t(t){return!(this.C6t&&!this.C6t.J4t&&"nonlinear"!==this.D6t.D3t)||this.C6t.dd>t.dd&&this.C6t.dd!==t.dd}L6t(t){if(t.length)return t.sort((t,i)=>t.dd-i.dd)[0]}O6t(){if(this.ynt.length)return this.L6t(this.F6t(this.t.FR()))}V6t(){if(!(void 0!==this.B6t&&this.B6t>=0))return this.ynt.filter(t=>!t.n6t&&0===t.dd&&t!==this.C6t)[0]}F6t(t){if(!this.W6t&&(this.W6t=!this.ynt.some(t=>S(t.dd)),!this.W6t))return[];const i=this.ynt.filter(i=>!i.n6t&&(i.z4t||!S(i.dd)&&t<=i.dd));return void 0===this.B6t?i:i.filter(t=>t.z4t||void 0===t.j4t||t.dd>this.B6t)}constructor(t){this.N6t=void 0,this.B6t=void 0,this.W6t=!1,this.N6t=t,this.B6t=void 0}},c3=function(t){return t[t.U6t=0]="U6t",t[t.G6t=1]="G6t",t[t.X6t=2]="X6t",t}({}),d3=class{Hx(){this.ko=!0,this.Z6t&&this.H6t()}z6t(t,i){this.Y6t(t,i);const s=me(this.ynt,i=>i.q4t(t));if(s)s.R6t(t);else{var e;const s=new a3(t,i,this.oa,null==(e=t.replaceContent)||e);this.j5t.push(s),2===this.K6t&&this.q6t.g4t(s.dd,s,s.j4t),this.j6t(i,s)}}get D6t(){return this.Q6t}get ynt(){return this.j5t}get t(){return this.oa}get xHt(){return Boolean(this.Cmt)}get K6t(){return this.J6t}$6t(){if(is(this.ynt,this.C6t),this.C6t){for(const t of this.C6t.u6t)this.q6t.t9t();this.C6t=void 0}}i9t(){for(const t of this.j5t)for(const i of t.u6t)this.q6t.s9t(i,!0);Lr(this.j5t)}async e9t(t){this.$6t(),this.n9t=!0,this.C6t=t,this.r9t=t.dd,this.Cmt=this.h9t(t),await this.Cmt,this.Cmt=void 0}async h9t(t){await this.o9t(t);const i=t.l6t();if(!i)return this.n9t=!1,void(this.C6t=void 0);const s=this.Q6t.a9t(i);t.n6t=!0;try{await s,t.G4t===rV._nt&&this.Q6t.u9t()}catch(t){0,this.C6t=void 0,await this.H6t()}}async o9t(t){if(t.ix=this.z5t.ix,!this.z5t.uO)return void(t.uO=!1);switch(await this.Bet.Lq(this.z5t.ix)){case"all":case"muted":t.uO=!0;break;case"none":t.uO=!1}}c9t(){var t;return null!=(t=this.d9t.V6t())?t:this.d9t.O6t()}async H6t(){if(this.C6t&&!this.C6t.J4t)return this.Cmt;const t=this.c9t();t&&await this.e9t(t)}get C6t(){return this.l9t}set C6t(t){this.l9t=t}get n9t(){return this.f9t}set n9t(t){this.f9t=t}hr(){this.$6t(),Lr(this.j5t),this.r9t=0,this.C6t=void 0,this.Cmt=void 0,this.n9t=!1}h6t(){this.n9t=!1,this.C6t&&(this.C6t.h6t=!0)}async j6t(t,i){t===rV._nt&&this.ko&&this.d9t.M6t(i)&&!this.xHt&&"linear"!==this.Q6t.D3t&&(!this.C6t||this.C6t&&this.C6t.n6t)&&(await Promise.resolve(),await this.e9t(i))}P6t(){this.C6t&&this.C6t.P6t()}get v9t(){if(this.xHt||this.n9t)return!1;if(this.C6t&&!this.C6t.J4t)return!1;return!!this.j5t.filter(t=>this.C6t!==t).length&&Boolean(this.c9t())}async _9t(){if(!this.v9t)return void 0;const t=this.c9t();t&&await this.e9t(t)}Y6t(t,i){const s=t.sources.type,e=i===rV.gnt&&void 0===t.timeOffset,n=i1(s)||e?1:2;n!==this.J6t&&(this.J6t=n,this.i9t(),this.Q6t.m0t&&!this.xHt&&"linear"!==this.Q6t.D3t&&(this.Q6t.m0t.Zg(),this.C6t=void 0,this.Cmt=void 0),this.r9t=0,this.Z6t=!0)}Y5t(t){this.d9t.Y5t(t)}kn(){this.oa.mn(d.Iw,this.tz)}constructor(t,i,s,e,n){this.Q6t=void 0,this.j5t=void 0,this.Z6t=void 0,this.ko=void 0,this.oa=void 0,this.z5t=void 0,this.l9t=void 0,this.r9t=void 0,this.d9t=void 0,this.Bet=void 0,this.J6t=0,this.Cmt=void 0,this.q6t=void 0,this.f9t=!1,this.tz=()=>{const t=this.j5t.filter(t=>t.t6t);for(const i of t){i.e6t();const t=i.j4t;this.q6t.g9t(t,i.dd)}this.ko&&this.v9t&&this.H6t()},this.j5t=[],this.Q6t=t,this.ko=!1,this.Z6t=!1,this.oa=i,this.z5t=s,this.C6t=void 0,this.r9t=0,this.d9t=new u3(this),this.Bet=e,this.q6t=n,this.oa.wn(d.Iw,this.tz)}};r(),r();var jl=function(t){return t.m9t="contentResumeRequested",t.p9t="contentPauseRequested",t.w9t="click",t.Iw="durationChange",t.y9t="expandedChanged",t.b9t="start",t.A9t="impression",t.VZ="pause",t.S9t="resume",t.T9t="adProgress",t.k9t="adBuffering",t.E9t="firstQuartile",t.gQt="midpoint",t.R9t="thirdQuartile",t.mQt="complete",t.x9t="userClose",t.I9t="linearChanged",t.P9t="loaded",t.C9t="adCanPlay",t.N9t="adMetadata",t.D9t="adBreakReady",t.B9t="interaction",t.M9t="allAdsCompleted",t.L9t="skip",t.O9t="skippableStateChanged",t.F9t="log",t.V9t="viewableImpression",t.W9t="volumeChange",t.U9t="mute",t}({});r();var l3=function(t){return t.G9t="adError",t}({});r();var f3=function(t){return t[t.X9t=-1]="X9t",t[t.Z9t=-1]="Z9t",t[t.H9t=-1]="H9t",t[t.z9t=101]="z9t",t[t.Y9t=102]="Y9t",t[t.K9t=200]="K9t",t[t.q9t=201]="q9t",t[t.j9t=202]="j9t",t[t.Q9t=300]="Q9t",t[t.J9t=301]="J9t",t[t.$9t=302]="$9t",t[t.t8t=303]="t8t",t[t.i8t=400]="i8t",t[t.s8t=402]="s8t",t[t.e8t=403]="e8t",t[t.n8t=405]="n8t",t[t.r8t=500]="r8t",t[t.h8t=501]="h8t",t[t.o8t=-1]="o8t",t[t.a8t=503]="a8t",t[t.u8t=602]="u8t",t[t.c8t=900]="c8t",t[t.d8t=901]="d8t",t[t.l8t=1005]="l8t",t[t.f8t=1007]="f8t",t[t.v8t=1009]="v8t",t[t._8t=1010]="_8t",t[t.g8t=1011]="g8t",t[t.m8t=1012]="m8t",t[t.p8t=1013]="p8t",t[t.w8t=1020]="w8t",t[t.y8t=1021]="y8t",t[t.b8t=1101]="b8t",t[t.A8t=1204]="A8t",t[t.S8t=1205]="S8t",t[t.T8t=1300]="T8t",t[t.k8t=-1]="k8t",t[t.E8t=-1]="E8t",t[t.R8t=-1]="R8t",t[t.x8t=-1]="x8t",t}({}),v3=function(t){return t.I8t="adLoadError",t.P8t="adPlayError",t}({});function _3(t,i){if(t===jl.T9t){const t=i;return{C8t:t.adBreakDuration,N8t:t.adPosition,OR:t.currentTime,ct:t.duration,D8t:t.totalAds}}return i}function g3(t){switch(t){case google.ima.AdError.Type.AD_LOAD:return v3.I8t;case google.ima.AdError.Type.AD_PLAY:return v3.P8t}}function m3(t){return Nc(t)&&Kd(t.getVastErrorCode)}function p3(t){const i=t.getInnerError(),s=i&&m3(i)?p3(i):void 0;return{Ey:t.getMessage(),KQt:t.getErrorCode(),B8t:t.getVastErrorCode(),Kp:g3(t.getType()),M8t:s}}function w3(t){if(Y(t))return t}r(),r();var y3=class extends fr{L8t(t){this.Q6t.So(t)}O8t(t){this.p0t=t,this.p0t.wn(l3.G9t,this.F8t),this.p0t.wn(jl.p9t,this.V8t),this.p0t.wn(jl.m9t,this.W8t),this.p0t.wn(jl.M9t,this.U8t),this.p0t.wn(jl.b9t,this.e5t),this.p0t.wn(jl.mQt,this.G8t),this.p0t.wn(jl.L9t,this.X8t),this.p0t.wn(jl.x9t,this.Z8t),this.p0t.wn(jl.w9t,this.H8t),this.p0t.wn(jl.C9t,this.z8t),this.p0t.wn(jl.VZ,()=>{this.Q6t.ux||(this.Q6t.Y8t(!0),this.Q6t.So(new Pi(this.Q6t.OR))),this.K8t(!0)}),this.p0t.wn(jl.S9t,()=>{this.Q6t.ux&&(this.Q6t.Y8t(!1),this.Q6t.So(new Ts(this.Q6t.OR)))}),this.p0t.wn(jl.U9t,()=>{const i=t.Fx();i>=0&&this.q8t(i)}),this.p0t.wn(jl.W9t,()=>{const i=t.Fx();i>=0&&this.q8t(i)}),this.p0t.wn(jl.N9t,t=>{this.Q8t.j8t(t.type)}),this.p0t.wn(jl.Iw,t=>{t.xnt&&this.J8t(t.xnt.ct)}),this.p0t.wn(jl.F9t,async t=>{const i=t.$8t.adError,s=m3(i)?p3(i):void 0;s&&(this.t7t(s)?await this.i7t(t):this.s7t(s)?await this.e7t(s):this.n7t(s)&&this.r7t(s))}),this.p0t.wn(jl.P9t,t=>{if(t.xnt&&(this.Q6t.h6t(),this.Q8t.h7t(t.xnt),this.o7t=0,t.xnt.a7t)){var i;const t=this.Q6t.Sx,s=pi.VL;this.Q6t.Q5(s);const e=this.Q6t.OR,n=this.Q6t.Sx;n!==t&&this.L8t(new Jt(e,n)),null==(i=this.p0t)||i.Vx(this.Q6t.u7t()),this.L8t(new ut(e,s))}}),this.p0t.wn([jl.k9t,jl.A9t,jl.E9t,jl.gQt,jl.R9t],t=>{t.xnt&&this.Q8t.c7t(t.xnt,t.type,this.Q6t.OR)}),this.p0t.wn(jl.E9t,this.d7t),this.p0t.wn(jl.T9t,this.l7t)}async switchToPlayerIfNoNextAd(){if(this.p0t){const t=this.p0t.f7t();t&&this.v7t(t)||(this.Q6t.v9t()?await this.Q6t._9t():(this.Q6t._7t(),this.oa.ux&&!this.oa.GR&&this.oa.Yx()))}else if(this.Q6t.v9t())await this.Q6t._9t();else{const t=this.Q6t.ux;this.Q6t._7t(),t||this.oa.Yx()}}v7t(t){const i=t.g7t,s=null==i?void 0:i.D8t;return(null==i?void 0:i.N8t)!==s}gp(){this.Q6t.Dc&&(p(this.Q6t.Dc),this.Q6t.Dc=null)}n7t(t){return t.Kp===v3.I8t}s7t(t){return t.Kp===v3.P8t}t7t(t){return t.KQt===f3.v8t}async e7t(t){var i;(this.r7t(t),this.m7t(t))&&(this.Q6t.p7t.n9t=!1,null==(i=this.Q6t.p7t.C6t)||i.P6t(),await this.switchToPlayerIfNoNextAd())}m7t(t){var i;if(b3(t))return!0;if(this.Q6t.Fnt)return!1;const s=[f3.i8t,f3.d8t,f3.y8t,f3.S8t];return!(Ft(s,t.KQt)||Ft(s,null==(i=t.M8t)?void 0:i.KQt))}r7t(t){this.Q6t.y4t(t)}async w7t(){this.Q8t.t9t(),this.Q6t.P6t(),"nonlinear"===this.Q6t.D3t&&(this.Q8t.y7t(-1,!1),this.Q6t.b7t(void 0)),"nonlinear"!==this.Q6t.D3t&&"none"!==this.Q6t.D3t||this.Q6t.v9t()&&await this.Q6t._9t(),this.Q6t.A7t(),this.Q6t.X5t?this.Q6t.$2t():this.S7t()&&this.oa.So(new Be(this.oa.FR()))}S7t(){return this.Q6t.T7t&&!this.Q6t.k7t&&this.oa.GR}setCountdownTimer(){this.gp(),this.Q6t.Dc=v(()=>this.K8t(),250)}async i7t(t){void 0!==t.xnt&&(this.Q6t.p7t.n9t=!1,this.Q6t.P6t(),this.Q6t.v9t()?await this.Q6t._9t():this.Q6t.Y8t(!0))}J8t(t){this.Q6t.ct!==t&&t>=0&&(this.Q6t.x5(t),this.L8t(new ur(this.Q6t.ct)))}q8t(t){this.Q6t.u7t()!==t&&(0===t?this.Q6t.E7t(t,!0,!1):this.Q6t.E7t(t,!1,!1))}async R7t(){this.Q6t.x7t&&void 0!==this.oa.ZR()&&(this.I7t=new ui,await Ce(this.oa.Ta(this.oa.nu(),this.I7t.jg),this.I7t),this.P7t&&this.oa.WR(this.P7t),this.P7t=void 0)}K8t(t){if(this.p0t){const t=this.p0t.C7t();t>this.Q6t.ct&&this.J8t(_.round(t))}const i=this.Q6t.OR;(t||!this.Q6t.ux&&i!==this.Q6t.N7t)&&(this.Q6t.So(new Tc(i,void 0)),this.Q6t.N7t=i)}hr(){this.I7t&&(this.I7t.Jg(),this.I7t=void 0),this.D7t=!1,this.o7t=0}kn(){this.hr(),this.Vo()}constructor(t,i,s){super(),this.Q6t=void 0,this.oa=void 0,this.Q8t=void 0,this.D7t=void 0,this.I7t=void 0,this.P7t=void 0,this.p0t=void 0,this.o7t=void 0,this.d7t=void 0,this.l7t=void 0,this.F8t=void 0,this.U8t=void 0,this.e5t=void 0,this.G8t=void 0,this.X8t=void 0,this.Z8t=void 0,this.H8t=void 0,this.z8t=void 0,this.V8t=void 0,this.W8t=void 0,this.Q6t=t,this.oa=i,this.Q8t=s,this.D7t=!1,this.I7t=void 0,this.P7t=void 0,this.o7t=0,this.d7t=t=>{if(!t.xnt||!t.xnt.g7t)return;const i=t.xnt.g7t;this.Q8t.m4t(i.fOt,i.D8t,i._0t)},this.l7t=t=>{var i,s,e;if(this.o7t>=5)return;this.o7t++;const n=t.$8t;if(!function(t){return Nc(t)&&void 0!==t.C8t&&void 0!==t.D8t}(n))return;const r=null==(e=this.p0t)||null==(s=e.f7t())||null==(i=s.g7t)?void 0:i.fOt;void 0!==r&&this.Q8t.m4t(r,n.D8t,n.C8t)},this.F8t=async t=>{t.$8t.B7t&&await this.e7t(t.$8t.B7t)},this.U8t=async()=>{this.D7t=!0,this.Q6t.P6t(),await this.W8t()},this.e5t=t=>{if(!t.xnt)return;const i=t.xnt;this.Q6t.b7t(i),this.Q6t.be(),this.Q6t.M7t(),this.Q6t.L7t=!0,this.Q8t.O7t(i);const s=i.ct;if(this.J8t(s),i.a7t){const t=this.Q6t.OR,i=this.Q6t.Sx;this.Q6t.Q5(pi.UL),this.L8t(new ot(t,i)),this.L8t(new vo(t,i)),this.L8t(new lt(t,i)),this.Q6t.ux||this.L8t(new $n(this.Q6t.OR)),this.setCountdownTimer(),this.K8t(!0)}else this.Q6t.$2t(),this.oa.be(),this.Q6t.ux||this.oa.Yx()},this.G8t=t=>{var i;if(!t.xnt)return;const s=t.xnt;if(this.gp(),this.Q8t.y7t(this.Q6t.ct,s.a7t),this.Q6t.Sx!==pi.VL){const t=pi.VL;this.Q6t.Q5(t);const i=this.Q6t.OR;this.L8t(new Jt(i,t))}this.J8t(NaN),this.Q6t.L7t=!1,null==(i=this.p0t)||i.Vx(this.Q6t.u7t())},this.X8t=t=>{t.xnt&&(this.G8t(t),this.Q8t.X8t(t.xnt,this.Q6t.OR,this.Q6t.ct))},this.Z8t=t=>{t.xnt&&(this.Q8t.y7t(-1,t.xnt.a7t),this.Q6t.P6t(),!t.xnt.a7t&&this.Q6t.v9t()&&this.Q6t._9t())},this.H8t=t=>{t.xnt&&(t.xnt.a7t?this.Q6t.zx():this.oa.zx())},this.z8t=()=>{var t;(this.Q6t.L7t=!0,this.Q6t.F7t)&&(null==(t=this.p0t)||t.zx(),this.Q6t.F7t=!1)},this.V8t=t=>{var i;if(!t.xnt)return;this.Q6t.x7t&&(this.P7t=this.oa.FR(),this.oa.Jx(),this.oa.Gx=!0),this.Q6t.V7t=!0;const s=t.xnt;this.Q8t.Ed(s);const e=s.ct;this.Q6t.b7t(s),this.J8t(e),this.Q6t.Y8t(!1),this.Q6t.be(),this.Q6t.M4t(),this.Q6t.x7t||this.oa.we(),this.oa.zx(),this.Q6t.W7t(s);0===(null==(i=s.g7t)?void 0:i.fOt)||this.Q6t.So(new lx(this.Q6t.OR))},this.W8t=async t=>{const i=null==t?void 0:t.xnt;this.Q6t.V7t=!1,"linear"===this.Q6t.D3t&&this.Q8t.Bd(),i&&i.ct>=0&&this.J8t(i.ct),this.oa.Nd()===1/0&&this.Q6t.U7t(),this.Q6t.L7t=!1,this.D7t&&await this.w7t(),this.Q6t.Y8t(!0);try{await this.R7t()}catch(t){return void(hc(t)||this.So(new jn(t)))}if(this.Q6t.$2t(),this.Q6t.we(),this.oa.GR||this.oa.Yx(),i&&this.Q6t.b7t(i),this.Q6t.T7t){if(this.Q6t.x7t){var s;const t=this.oa.Zx(),i=null==(s=this.oa.bt)?void 0:s.src;t&&i&&(t.src=i)}this.Q6t.k7t=!0}this.oa.Gx=!1,this.Q6t.v9t()&&await this.Q6t._9t()}}};function b3(t){var i,s;return t.B8t===f3.t8t||(null==(i=t.M8t)?void 0:i.B8t)===f3.t8t||t.KQt===f3.v8t||(null==(s=t.M8t)?void 0:s.KQt)===f3.v8t}r(),r();var A3=class extends Le{get DJt(){return Qc.F0t}constructor(t,i,s){super(t),this.G7t=void 0,this.X7t=void 0,this.G7t=i,this.X7t=s}};r(),r(),r();var S3=class extends Ps{set Z7t(t){this.H7t=t}get Z7t(){return this.H7t}get DJt(){return Qc.so}N0t(){var t;return null==(t=this.z7t)?void 0:t.pqt}get Y7t(){var t;return null==(t=this.z7t)?void 0:t.ajt}get Xqt(){var t;return null==(t=this.z7t)?void 0:t.Xqt}get uD(){var t;return null==(t=this.z7t)?void 0:t.uD}get dX(){var t;return null==(t=this.z7t)?void 0:t.dX}get K7t(){var t,i;return null!=(i=null==(t=this.z7t)?void 0:t.K7t)?i:[]}get q7t(){var t,i;return null!=(i=null==(t=this.z7t)?void 0:t.q7t)?i:[]}get j7t(){var t,i;return null!=(i=null==(t=this.z7t)?void 0:t.j7t)?i:[]}xa(){return function(t,i){return Qr(t,{bitrate:0,contentType:void 0,mediaUrl:void 0,traffickingParameters:void 0,traffickingParametersString:void 0,universalAdIds:[],get description(){return i.uD},get apiFramework(){return i.Y7t},get creativeId(){return i.Xqt},get title(){return i.dX},get wrapperAdIds(){return i.K7t},get wrapperAdSystems(){return i.q7t},get wrapperCreativeIds(){return i.j7t}})}(_a(this),this)}Q7t(t){this.z7t=t;const i=T3(t);this.P3t(t.Ojt,t.J7t,t.$7t,t.ct,i,-1)}constructor(t,i){super(t,i),this.H7t=0,this.z7t=void 0}};function T3(t){return t.Rqt.map(t=>new X2(t))}var k3=class extends Ps{xa(){return function(t,i){return Qr(t,{get adSystem(){return i.N0t()},get apiFramework(){return i.Y7t},get bitrate(){return i.tti},get contentType(){return i.GT},get creativeId(){return i.Xqt},get description(){return i.uD},get mediaUrl(){return i.Jjt},get title(){return i.dX},get traffickingParameters(){return i.iti},get traffickingParametersString(){return i.sti},get wrapperAdIds(){return i.K7t},get wrapperAdSystems(){return i.q7t},get wrapperCreativeIds(){return i.j7t},get universalAdIds(){return i.Iqt}})}(_a(this),this)}Q7t(t){this.z7t=t,this.P3t(t.Ojt,t.J7t,t.$7t,t.ct,T3(t),t.eti),this.B3t=t.a7t?Cs.nJt:Cs.I3t}get DJt(){return Qc.F0t}N0t(){return this.z7t?E3(this.z7t.pqt):void 0}get Y7t(){return this.z7t?E3(this.z7t.ajt):void 0}get tti(){return this.z7t?this.z7t.nti:0}get GT(){return this.z7t?E3(this.z7t.GT):void 0}get Xqt(){return this.z7t?E3(this.z7t.Xqt):void 0}get rti(){return this.z7t?E3(this.z7t.rti):void 0}get uD(){var t;return null==(t=this.z7t)?void 0:t.uD}get Jjt(){var t;const i=null==(t=this.z7t)?void 0:t.Jjt;return Y(i)?i:this.$jt}set Jjt(t){this.$jt=t}get dX(){var t;return null==(t=this.z7t)?void 0:t.dX}get iti(){return this.z7t?E3(this.z7t.iti):void 0}get sti(){return this.z7t?E3(this.z7t.sti):void 0}get K7t(){var t,i;return null!=(i=null==(t=this.z7t)?void 0:t.K7t)?i:[]}get q7t(){var t,i;return null!=(i=null==(t=this.z7t)?void 0:t.q7t)?i:[]}get j7t(){var t,i;return null!=(i=null==(t=this.z7t)?void 0:t.j7t)?i:[]}get Iqt(){var t,i;return null!=(i=null==(t=this.z7t)?void 0:t.Iqt.map(t=>({adIdRegistry:t.hti,adIdValue:t.oti})))?i:[]}constructor(t){super(t,Cs.gk),this.z7t=void 0,this.$jt=void 0}};function E3(t){return null===t?void 0:t}r(),r();var R3=class{get a5t(){return this.Q8t.a5t}get D5t(){return this.ati}get X5t(){return this.Q8t.X5t}get wnt(){var t;return null!=(t=this.Q8t.wnt)?t:null}get mnt(){const t=this.Q8t.U3t;return t?[t]:[]}get ynt(){return this.Q8t.ynt}get bnt(){return this.Q8t.bnt}Tnt(t){this.Q8t.Tnt(t)}nN(){this.Q8t.nN()}Ant(t){this.Q8t.Ant(t)}kn(){return Promise.resolve()}constructor(t,i){this.Q8t=void 0,this.ati=void 0,this.Q8t=t,this.ati=i}},x3=class{get uti(){return this.cti}get a5t(){return this.r5t}get X5t(){return this.dti}get U3t(){return this.D0t}get wnt(){return this.X0t}get ynt(){return vl(this.Z0t,t=>{if(t.mx)return[];const i=t.Jc;if(t===this.X0t&&void 0!==this.D0t){const t=i.indexOf(this.D0t);if(t>=0)return i.slice(t+1)}return i})}get bnt(){return this.Z0t.filter(t=>!t.mx)}constructor(t,i){this.r5t=void 0,this.Z0t=void 0,this.D0t=void 0,this.X0t=void 0,this.dti=void 0,this.cti=void 0,this.r5t=t,this.Z0t=[],this.dti=!1,this.cti=new R3(this,i)}};r();var I3=class extends Ha{xa(){return new P3(this.xnt.pnt())}constructor(t){super("lti",t)}},P3=class extends Wa{constructor(t){super("adimpression",t)}};r();var C3=class extends Kt{xa(){return new N3(this.xnt.pnt())}constructor(t){super("fti"),this.xnt=void 0,this.xnt=t}},N3=class extends sh{constructor(t){super("adbuffering"),this.ad=void 0,this.ad=t}};r();var D3=class extends Kt{xa(){return new B3}constructor(){super("vti")}},B3=class extends sh{constructor(){super("admetadata")}},M3=class t extends x3{_ti(t,i){for(let s=0;s<t;s++){const t=new k3(i);i.b3t(t),this.a5t.So(new dV(t))}}g4t(t,i,s){let e=t;e===1/0&&(e=-1);const n=new A3(e,s,i);this.Z0t.push(n),i.d6t(n),this.a5t.So(new uV(n))}g9t(t,i){for(const s of this.Z0t)S(s.fOt)&&s.G7t===t&&(s.fOt=i,this.a5t.So(new K2(s)))}s9t(t,i){void 0===i&&(i=!1),i&&is(this.Z0t,t),this.a5t.So(new Su(t))}t9t(){if(this.wnt){this.s9t(this.wnt,!0);const t=Boolean(this.D0t&&this.D0t.D3t===Cs.nJt);this.gti(void 0,t)}}l4t(t,i){const s=i.g7t;if(!s)return;const e=s.N8t-1,n=t.Jc[e];return n.Q7t(i),this.a5t.So(new U1(n)),n.od._0t=s._0t,n}get X5t(){return this.mti.X5t}pti(t){if(!Ft(this.wti,t)){if(t){if(this.D0t===t)return;this.D0t=t;for(const i of this.yti)this.j8t(i,t,this.mti.OR)}else{if(!this.D0t)return;const t=new He(this.D0t,this.D0t.od.fOt);this.wti.push(this.D0t),this.D0t=void 0,this.r5t.So(t)}Lr(this.yti)}}gti(t,i){if(t){var s;if((null==(s=this.wnt)?void 0:s.fOt)===t.fOt)return;this.X0t=t,i&&this.a5t.So(new vV(this.X0t))}else{if(!this.X0t)return;const t=new Xh(this.X0t);this.X0t=void 0,Lr(this.wti),i&&this.r5t.So(t)}}bti(t){return this.Z0t.filter(i=>we(i.fOt,t,.01))[0]}static Ati(t,i){if(i.g7t)return t.Jc[i.g7t.N8t-1]}Ed(t){if(!t.g7t)return;const i=t.g7t,s=this.bti(i.fOt);s&&(Lr(this.yti),this.gti(s,t.a7t))}Bd(){this.wnt&&this.a5t.So(new Xh(this.wnt)),Lr(this.yti),this.t9t()}O7t(i){if(!this.X0t&&i.g7t){const t=this.bti(i.g7t.fOt);this.gti(t,i.a7t)}if(this.X0t){const s=t.Ati(this.X0t,i);if(!s)return;this.l4t(this.X0t,i);const e=i.Jjt;Y(e)&&!Y(s.Jjt)&&(s.Jjt=e,this.a5t.So(new U1(s))),this.pti(s),this.a5t.So(new te(this.D0t,s.od.fOt))}else 0}y7t(t,i){if(this.pti(void 0),!i&&this.wnt){const t=this.wnt;this.gti(void 0,!1),this.s9t(t)}}h7t(t){const i=t.g7t;if(!i)return;const s=this.bti(i.fOt);if(!s)return;this.m4t(i.fOt,i.D8t,i._0t);const e=this.l4t(s,t);e&&this.a5t.So(new X1(e))}m4t(t,i,s){const e=this.bti(t);if(!e)return;const n=e.Jc.length;if(i>n){const t=i-n;this._ti(t,e),e._0t=s,this.a5t.So(new K2(e))}}X8t(i,s,e){if(!this.X0t)return;const n=t.Ati(this.X0t,i);if(n){const t=s/e;this.a5t.So(new da(n,t))}}c7t(i,s,e){if(!this.X0t)return;let n=this.D0t;if(!n){const e=t.Ati(this.X0t,i);if(!e||Ft(this.wti,e))return void this.yti.push(s);n=e,this.l4t(this.X0t,i),this.pti(n)}this.j8t(s,n,e)}j8t(t,i,s){t===jl.N9t?this.a5t.So(new D3):t===jl.A9t&&i?this.a5t.So(new I3(i)):t===jl.k9t&&i?this.a5t.So(new C3(i)):t===jl.E9t&&i&&s?this.a5t.So(new ke(i,s)):t===jl.gQt&&i&&s?this.a5t.So(new Ks(i,s)):t===jl.R9t&&i&&s&&this.a5t.So(new Ji(i,s))}nN(){this.mti.nN()}Tnt(t){this.mti.Tnt(t)}hr(){const t=Boolean(this.D0t&&this.D0t.D3t===Cs.nJt);this.pti(void 0),this.gti(void 0,t);for(const t of this.Z0t)this.s9t(t);Lr(this.Z0t),Lr(this.yti),Lr(this.wti)}kn(){this.hr()}Ant(t){}constructor(t,i){super(t,Qc.F0t),this.mti=void 0,this.yti=void 0,this.wti=void 0,this.mti=i,this.yti=[],this.wti=[]}};function L3(t){const i=s.google.ima.settings;t.ads&&t.ads.vpaidMode&&s.google.ima.settings.setVpaidMode(function(t){const i=s.google.ima.ImaSdkSettings.VpaidMode;switch(t){case tk.ENABLED:return i.ENABLED;case tk.INSECURE:return i.INSECURE;case tk.DISABLED:default:return i.DISABLED}}(t.ads.vpaidMode)),i.setPlayerVersion("9.11.0"),i.setPlayerType("THEOplayer"),i.setAutoPlayAdBreaks(!0),i.setDisableCustomPlaybackForIOS10Plus(!O3(t));const e=function(t){var i,s,e;const n=null==(s=t.ads)||null==(i=s.googleIma)?void 0:i.language;if(void 0!==n)return n;const r=null==(e=t.ui)?void 0:e.language;if(yo(r))return r;return}(t);e&&i.setLocale(e)}function O3(t){return As.ru&&t.allowNativeFullscreen}r();var F3=class t extends r3{get M5t(){return this.q6t.uti}get Sti(){return this.q6t}get p7t(){return this.N6t}get x7t(){return O3(this.VQ)}Tti(t,i,s){i===rV.gnt&&void 0!==s&&(this.Z5t=s),this.N6t.z6t(t,i)}static get D5t(){return Qc.F0t}get D5t(){return t.D5t}get kti(){return this.VQ.ads.preload===sk.MIDROLL_AND_POSTROLL}Tnt(t){const i=this.Eti();for(const s of i)n0(s.sources,s.timeOffset)||t.B6(s,rV._nt,!1)}Eti(){const t=[],{mnt:i,ynt:s}=this.M5t,e=[];for(const n of i.concat(s)){const i=n.od.X7t;if(Ft(e,i.qI))continue;const s=i.x6t(n.K7t);s>=0?t.push(...i.Z4t.slice(s)):t.push(...i.Z4t),e.push(i.qI)}for(const i of this.N6t.ynt)i.n6t||t.push(...i.Z4t);return xc(t)}set D3t(t){this.B3t=t}get D3t(){return this.B3t}get m0t(){return this.p0t}set m0t(t){this.p0t=t,this.Rti=!1}FR(){if(!this.m0t)return 0;const t=this.m0t.C7t();return S(this.ct)||t<0?0:this.ct-t}WR(t,i){}Nd(){return this.qb||NaN}x5(t){this.qb=t}sx(){return this.oa.ix}nx(t){this.E7t(this.Ox,t,!0)}lx(){return this.yZ}Y8t(t){this.yZ=t}get L7t(){return this.xti}set L7t(t){this.xti=t}get Fnt(){return this.Z5t}get T7t(){return this.Iti}get F7t(){return this.Pti}set F7t(t){this.Pti=t}get k7t(){return this.Cti}set k7t(t){this.Cti=t}Dx(){var t,i,s;return null!=(s=null==(i=this.m0t)||null==(t=i.f7t())?void 0:t.$7t)?s:0}Lx(){var t,i,s;return null!=(s=null==(i=this.m0t)||null==(t=i.f7t())?void 0:t.J7t)?s:0}xR(){return[]}Y5t(t){this.B6t=t,this.N6t.Y5t(t)}u9t(){!this.Rti&&this.m0t&&(this.m0t.Tn(),this.Rti=!0)}b7t(t){this.D3t=t?t.a7t?"linear":"nonlinear":"none"}Ex(){return ZT.tL()._s()}Fx(){return this.oa.Ox}Vx(t){this.E7t(t,this.ix,!0)}u7t(){return this.oa.ix?0:this.oa.Ox}E7t(t,i,s){const e=this.oa.Ox!==t||this.oa.ix!==i;e&&(this.oa.Ox=t,this.oa.ix=i),this.m0t&&s&&this.m0t.Vx(this.u7t()),e&&this.So(new q(this.OR,this.Ox))}XR(){return!1}ZR(){if(this.Nti&&this.Z5t)return this.Nti}zR(){if(this.Dti&&this.Z5t)return this.Dti}Tx(){return this.j5}Q5(t){this.j5=t,this.So(new ca(this.OR,t))}get V7t(){return this.Bti}set V7t(t){this.Bti=t}Hx(){this.oa.mn(d.uo,this.Mti),this.ko||(this.ko=!0,this.N6t.Hx(),this.M7t())}async Yx(){if(this.Lti)return;this.Oti.Jg(),this.Oti=new ui;const t=this.ux;this.Y8t(!1),this.So(new Ts(this.OR)),this.Fti()||(this.x7t||this.oa.we(),this.So(new lx(this.OR))),this.L7t||(this.F7t=!1);const i=Boolean(this.m0t);this.Lti=this.N6t.H6t();try{await this.Lti}finally{this.Lti=void 0}try{Ko(this.Oti.jg)}catch(t){return}if(this.ko||this.Mti(),!this.Nti||!this.Z5t)if(this.m0t){if(t)if(i)try{Ko(this.Oti.jg),this.m0t.Vti(),this.So(new $n(this.OR))}catch(t){return}else this.u9t()}else this.Z5t||(this.$2t(),this.z5t.Yx())}zx(){var t;this.ux||(this.Y8t(!0),this.So(new Pi(this.OR))),this.Oti.Jg(),this.L7t?null==(t=this.m0t)||t.zx():this.F7t=!0}nN(){var t;null==(t=this.m0t)||t.nN()}A7t(){this.m0t&&(this.Uti.Wti(),this.m0t.Kx(),this.m0t.Zg(),this.m0t=void 0,this.D3t="none",this.Rti=!1)}async Kx(){var t;this.N7t=0,this.N6t.hr(),this.Oti.Jg(),this.Y8t(!0),this.Iti=!1,this.Cti=!1,this.L7t=!1,this.q6t.hr(),this.A7t(),this._7t(),null==(t=this.Gti)||t.hr(),this.F7t=!1,this.Uti.Zg()}be(){this.Xti.be(),this.x7t&&this.oa.be()}we(){this.Xti.we()}Zti(){return Boolean(this.m0t)&&Ft(this.m0t.Hti(),-1)&&!this.Iti}h6t(){this.N6t.h6t()}v9t(){return this.N6t.v9t}P6t(){this.N6t.P6t()}_9t(){return this.N6t._9t()}V5t(t){if(this.Zti()){if(t.type===d.zw&&this.oa.GR)return!0;if(t.type===d.Nw)return this.Iti=!0,this.Uti.Wti(),!0}return!1}Fti(){return Boolean(this.m0t&&this.m0t.f7t())}async a9t(t){try{this.A7t();const i=this.zti();this.Xti.Fj(),this.m0t=await this.Uti.a9t(t,this.Gti,i),this.Yti(this.m0t)}catch(t){this.Kti.e7t(t)}}Yti(t){if(t.Vx(this.u7t()),this.N6t.K6t===c3.G6t){const i=t.Hti();if(i.length)for(const t of i)this.q6t.g4t(t,this.N6t.C6t);else this.q6t.g4t(this.N6t.C6t.dd,this.N6t.C6t)}this.Kti.hr(),this.Kti.O8t(t)}Zx(){if(this.p0t&&this.x7t&&this.Fti())return this.oa.Zx()}Xx(){return this.x7t&&this.X5t?this.oa.Ma:super.Xx()}zti(){const t=!!(this.N6t.K6t===c3.G6t)&&this.kti;let i,s;void 0!==this.VQ.ads.googleIma.uiElements?i=this.VQ.ads.googleIma.uiElements:this.VQ.ads.showCountdown||(i=[]),void 0!==this.VQ.ads.allowedMimeTypes&&(s=this.VQ.ads.allowedMimeTypes);return{qti:s,jti:i,Qti:t,tti:this.VQ.ads.googleIma.bitrate,Jti:void 0,$ti:this.B6t}}M7t(){if(this.p0t){const t=this.zti();this.p0t.tii(t)}}y4t(t){b3(t)||(this.Nti=new iu(Lt.ADVERTISEMENT_ERROR,t.Ey),this.Dti=new Wt(Ne.AD_ERROR,"There was a problem playing ads.",this.Nti)),this.a5t.So(Wh.E3t(t))}_7t(){this.X5t&&(this.oa.be(),this.$2t(),this.we())}U7t(){var t;if(this.oa.FR()===1/0||0===this.oa.Ex().length)return;(null==(t=this.N6t.C6t)?void 0:t.Y4t)&&-1!==this.sii&&(this.oa.WR(this.oa.FR()+this.sii),this.sii=-1)}W7t(t){var i,s;this.sii=null!=(s=null==(i=t.g7t)?void 0:i._0t)?s:-1}$2t(){super.$2t(),this.oa.be(),this.x7t&&!this.oa.GR&&this.oa.Yx()}U4t(){this.x7t||super.U4t()}async kn(){this.Kti.mn(sa.ma,this.eii),await super.kn(),this.A7t(),this.Uti.mn("nii",this.rii),this.Uti.Zg(),this.Xti.Zg(),this.N6t.kn(),this.Kti.kn()}constructor(t,i,s,e,n,r,h){super(t,i),this.ko=!1,this.Gti=void 0,this.yZ=void 0,this.j5=void 0,this.p0t=void 0,this.Uti=void 0,this.Xti=void 0,this.Dc=void 0,this.qb=void 0,this.Iti=void 0,this.Cti=void 0,this.Z5t=!1,this.Nti=void 0,this.Dti=void 0,this.N6t=void 0,this.Kti=void 0,this.sii=-1,this.B3t="none",this.VQ=void 0,this.Lti=void 0,this.Bti=!1,this.q6t=void 0,this.Rti=!1,this.Oti=new ui,this.B6t=void 0,this.xti=!1,this.Pti=!1,this.rii=t=>{this.a5t.So(t)},this.eii=t=>{this.Nti=new iu(Lt.ADVERTISEMENT_ERROR,"Error while recovering from failed IMA ad.",t.error.message),this.Dti=Gk(this.Nti)},this.N7t=NaN,this.Mti=()=>{this.ko||this.Hx()},this.VQ=s,this.yZ=!0,this.qb=NaN,this.j5=pi.VL,this.Iti=!1,this.Cti=!1,this.q6t=new M3(this.a5t,this),this.Kti=new y3(this,this.oa,this.q6t),this.Kti.wn(sa.ma,this.eii),this.oa.wn(d.uo,this.Mti),this.N6t=new d3(this,this.oa,this.z5t,e,this.q6t),this.Gti=h,this.Uti=r,this.Xti=n,this.we(),this.Uti.wn("nii",this.rii)}};r();var V3=class{registerWebImaAdPlayerConstructor(t){this.hii=t}createAdPlayer(t,i,s){return W3()&&this.hii?this.hii(t,i,s):void 0}constructor(){this.hii=void 0}};function W3(){if(Boolean(s.google&&s.google.ima)){return!(1===w.keys(s.google.ima).length&&Boolean(s.google.ima.dai))}return!1}V3.Bg=new V3;var U3=class{get I5t(){return F3.D5t}OZ(t){return t&&t.integration===Za.GOOGLE_IMA}P5t(t,i,s){return V3.Bg.createAdPlayer(t,i,s)}B6(t,i,s,e){s.Tti(t,i,e)}tY(t){const i=s1(t.sources);if(!i)return;const s={integration:Za.GOOGLE_IMA,sources:i,omidAccessModeRules:w3(t.omidAccessModeRules)},e=pl(t.timeOffset);return void 0!==e&&(s.timeOffset=e),s}};$h.Bg.FZ(new U3),r(),r(),r(),r();var G3=class extends Kt{xa(){return new X3}constructor(){super("G0t")}},X3=class extends sh{constructor(){super("adloaded")}},Z3=-1,H3=class{get w0t(){return this.Z0t}get oii(){return this.aii}get hut(){return this.$m}get uii(){return this.i6t}get cii(){return this.dii}get dd(){if(S(this.lii)){const t=Pa.NJt(this.i6t,this.S0t.t.Nd());void 0===t||S(t)||(this.lii=t)}return this.lii}fii(){return this.$m<this.Z0t.length}Rc(){let t;return this.$m<this.Z0t.length&&(t=this.Z0t[this.$m],this.$m++),t}vii(t){t.oJt=this,this.Z0t.push(t)}async _ii(t){let i=!1;for(const s of this.Z0t)try{await s.Un(),i=!0}catch(i){0,is(this.Z0t,s);const e=s.Lnt.sources,n="string"==typeof e?e:e.src;t.So(Wh.R3t(i,n))}return this.dii=!0,i}R0t(){this.E0t=!0}k0t(){return this.E0t}gii(){return this.Z0t.some(t=>qn(t).some(t=>t.kqt))}constructor(t,i){this.Z0t=void 0,this.i6t=void 0,this.aii=void 0,this.E0t=void 0,this.$m=void 0,this.S0t=void 0,this.lii=void 0,this.dii=void 0,this.Z0t=[],this.E0t=!1,this.i6t=t,this.$m=0,this.S0t=i,this.lii=NaN,this.dii=!1,this.aii=new M1(this,this.S0t)}},z3=class t extends ua{get mii(){let t=0;for(const i of this.pii)i.k0t()||(t+=1);return t}wii(){this.bii.yii()}Tn(){this.No(),this.Aii.wn("Dnt",this.bii.Sii)}An(){this.Ro(),this.Aii.mn("Dnt",this.bii.Sii),this.y5=this.LO,this.bii.hr();for(const t of this.pii)t.R0t();Lr(this.pii)}No(){this.Tii||(this.oa.wn(d.vy,this.kii),this.Tii=!0)}Ro(){this.Tii&&(this.oa.mn(d.vy,this.kii),this.Tii=!1)}get ynt(){return this.pii}Eii(){return this.Rii(new Tc(Z3,void 0))}xii(t){return this.Iii(t,0,0).length>0}Pii(t,i){let s,e=0;for(const n of this.pii){if(n.k0t())continue;const r=n.dd;r>=t&&r<=i&&r>=e&&!S(r)&&(s=n,e=s.dd)}return s}Cii(t){return this.Rii(new Tc(t,void 0))}Nii(){if(!this.Dii&&void 0!==this.B6t){this.Dii=!this.pii.some(t=>S(t.dd));for(const t of this.pii)t.dd!==Z3&&t.dd<=this.B6t&&!t.k0t()&&t.R0t()}}Bii(t){for(const i of t)i.R0t();this.j3t.Mii(t),0===this.mii&&this.Ro()}Iii(t,i,s){return this.pii.filter(e=>{if(e.k0t())return!1;const n=e.dd;return this.Lii(n,t)||this.Oii(n,t,i,s)})}Lii(t,i){switch(i){case 0:return 0===t;case Z3:return t===Z3;default:return!1}}Oii(t,i,s,e){if(t<0)return!1;const n=t-i;return-1!==n&&n<=s&&n>=-e}Fii(i){if(i&&i.length>0){for(const s of i){const i=t.I6t(s.fOt);let e=this.cgt(s);-1===e&&(this.Dii=void 0===this.B6t,this.pii.push(new H3(i,this.Vii)),e=this.pii.length-1);this.pii[e].vii(s)}this.No()}}static I6t(t){switch(t){case"start":case"00:00:00":case"00:00:00.000":case"0%":case"0":return"0";case"end":case"100%":return"-1";default:return t}}cgt(i){const s=t.I6t(i.fOt);return li(this.pii,i=>s===t.I6t(i.uii))}Wii(t){is(this.pii,t)}Y5t(t){this.B6t=t,this.Dii=void 0===t}constructor(t,i,s,e){super(),this.pii=void 0,this.oa=void 0,this.Vii=void 0,this.LO=void 0,this.Aii=void 0,this.y5=void 0,this.j3t=void 0,this.bii=void 0,this.Tii=void 0,this.B6t=void 0,this.Dii=!1,this.kii=t=>_e(this.Rii(t)),this.Rii=async t=>{this.Nii();const i=t.currentTime,s=t.currentTime!==Z3?this.Pii(this.y5,t.currentTime):this.Iii(t.currentTime,0,0)[0];let e,n;const r=this.oa.Nd()-10;if(n=this.xii(Z3)&&_.ceil(i)===_.ceil(r)?this.Iii(Z3,10,0).filter(t=>!t.cii):this.Iii(i,10,0).filter(t=>!t.cii),n.length){const t=(await Promise.all(n.map(t=>t._ii(this.Aii)))).some(t=>!0===t);t&&this.So(new G3),(!t||!this.bii.Uii||n[0].dd<this.bii.Uii.dd)&&(e=n[0])}s&&(s!==this.bii.Uii&&(e=s),this.Bii([s])),e&&(this.bii.Sii(),this.bii.Uii=e,await this.bii.yii()),S(this.oa.Nd())||(this.y5=t.currentTime)},this.oa=t,this.j3t=i,this.Vii=new B1(this.j3t,this.oa),this.B6t=void 0,this.Dii=!1,t.Nd()!==1/0?this.LO=0:this.LO=t.FR(),this.y5=this.LO,this.pii=[],this.Aii=s,this.bii=e,this.Tii=!1}};r(),r();var Y3=class extends ua{get Gii(){return this.z1t}get a5t(){return this.r5t}Xii(){this.Zii(),this.Hii(),this.$G=void 0}zii(t){this.Yii=this.Yii.concat(t)}Kii(t){this.qii=this.qii.concat(t)}Hii(){this.Yii=[]}Zii(){this.qii=[]}jii(t){for(const i of this.Yii)i.YH===t&&Ln(i.eventURL)}be(){this.Gii.style.display=""}we(){this.Gii.style.display="none"}kn(){this.Vo(),this.r5t.Vo(),je(this.z1t)}constructor(t,i){super(),this.z1t=void 0,this.qii=[],this.Yii=[],this.$G=void 0,this.Qii=void 0,this.Jii=void 0,this.r5t=new ua,this.$ii=t=>{t.stopPropagation(),this.tsi()},this.tsi=()=>{for(const t of this.qii)for(const i of t.Sjt)Ln(i.uri)},this.z1t=h.createElement("div"),this.z1t.style.display="none",this.Qii=t,this.Jii=i}};function K3(t,i){let s=i;if(!function(t){return"ui"in t}(t))return s;const e=t.ui.language;let n;if(yo(e)){const i=t.ui.languages;if(!i)return s;n=i[e]}else n=e;return n&&n[i]&&(s=n[i]),s}r(),r();var q3={[We.lP]:1,[We.fP]:2,[We.vP]:2};function j3(t,i){const s=i?i.map(t=>t.toLowerCase()):i;return Xs(t.filter(t=>{const i=t.type.toLowerCase();return!!he(s)&&-1!==s.indexOf(i)&&F0(i)}),(t,i)=>q3[t.type]-q3[i.type]).map(Q3)}function Q3(t){return CT({src:t.contentURL,type:t.type,isAdvertisement:!0})}function J3(t,i){return KW($3(t),$3(i))}function $3(t){return{Mi:t.height,Ti:t.width}}function t5(t,i,s,e){const n=function(t,i,s,e){let n,r=1/0;const h=t.filter(t=>!F0(t.type)).filter(t=>void 0===e||-1!==e.indexOf(t.type));if(h.length){for(const t of h){const e=(_.abs(t.width/i-1)+_.abs(t.height/s-1))/2;e<r&&(r=e,n=t)}return n||h.sort(J3)[0]}}(t.zjt,i.width,i.height,s),r=j3(t.zjt,s);if(n){const t=Q3(n);t&&r.push(t)}var h;r.length>0&&(t.Jjt=null==(h=r[0].src)?void 0:h.trim());return bc({sources:r},e)}var i5=class extends Y3{get isi(){return this.ssi}get OR(){return this.esi.OR}get ct(){let t=this.esi.ct;return S(t)&&this.Ujt&&(t=this.Ujt.ct||0),t}get GR(){return this.esi.GR}get ix(){return this.esi.ix}set ix(t){this.esi.ix=t,t?this.jii(Sc.nQt):this.jii(Sc.rQt)}get ux(){return this.esi.ux}get Sx(){return this.esi.Sx}get Ox(){return this.esi.Ox}set Ox(t){this.esi.Ox=t}get Nx(){return this.esi.Nx}get Mx(){return this.esi.Mx}get nsi(){return this.rsi}Yx(){this.esi.ux&&(this.esi.Yx(),this.So(new Ts(this.OR)),this.ssi&&this.jii(Sc.hQt),this.ssi=!0)}zx(){this.esi.ux||(this.esi.zx(),this.So(new Pi(this.OR)),this.jii(Sc.zw))}async Kx(){var t;null==(t=this.eT)||t.Jg(),this.eT=void 0,this.we(),this.ssi=!1,this.hsi=!0,this.osi(),this.asi(),await this.usi()}dsi(t){void 0===t&&(t=!0),this.ssi=!1,t&&this.jii(Sc.mQt),this.we(),this.Jii()}lsi(){var t;const i=null==(t=this.j3t.Na)?void 0:t.gi,s=new $1(this.sc,i);return this.Gii.appendChild(s.xe),s.wn("nN",this.fsi),s}vsi(){this.Ujt&&this.Ujt.Ljt.wjt&&(this.K1t=new K1(this.Gii),this.K1t.o1t=this.Ujt.Ljt.wjt,this.K1t.wn("clickstart",this._si),this.K1t.wn("click",this.tsi))}gsi(t,i){for(const s of this.Yii)if(s.YH===Sc.Yw){const e=P0(s.ac,i);void 0!==e&&this.y5<e&&e<=t&&Ln(s.eventURL)}}async msi(){if(!this.Ujt||!this.psi)return;const t=t5(this.Ujt,this.psi,this.qS.ads.allowedMimeTypes,this.qS);if(!t.sources.length)return await this.esi.hr(),this.Qii(""),void this.Ujt.Yqt();this.eT=new ui,this.hsi=!0,await Ce(this.esi.Ta(t,this.eT.jg),this.eT),this.esi.be(),this.Ujt.Yqt(),this.vsi()}async wsi(t,i,s){this.rsi=t,this.Ujt=t.kqt,this.esi.wn(d.vy,this.ysi),this.esi.wn(d.Iw,this.bsi),this.esi.wn(d._y,this.Asi),this.esi.wn(K,this.Rs),this.Ujt.Nqt&&0!==this.Ujt.Nqt.length&&this.zii(this.Ujt.Nqt),this.Ujt.Ljt&&this.Kii(this.Ujt.Ljt),this.$G=i,this.psi=s,0!==this.Ujt.zjt.length&&(this.esi.wn(sa.ma,this.Ssi),await this.msi(),this.esi.wn(d.Nw,this.Tsi),this.esi.wn(d.vy,this.ksi),this.esi.wn(Vo.SM,this.Esi),this.esi.wn(d.jw,this.Rs))}_$t(){this.isi&&this.Rsi&&this.fsi()}get Rsi(){return this.Ujt&&-1!==this.Ujt.qjt&&this.esi.OR>=this.Ujt.qjt}xsi(){this.jii(Sc.BSt),this.rsi&&this.a5t.So(new te(this.rsi,this.OR))}async usi(){this.esi.mn(sa.ma,this.Ssi),this.esi.mn(d.Nw,this.Tsi),this.esi.mn(d.vy,this.ksi),this.esi.mn(Vo.SM,this.Rs),this.esi.mn(Vo.SM,this.Esi),this.esi.mn(d.jw,this.Rs),this.esi.mn(d.vy,this.ysi),this.esi.mn(d.Iw,this.bsi),this.esi.mn(d._y,this.Asi),this.esi.mn(K,this.Rs),this.rsi&&(this.rsi.R0t(),this.a5t.So(new He(this.rsi,this.OR))),this.Isi(),this.Xii(),this.osi(),this.asi(),this.rsi=void 0,this.Ujt=void 0,this.psi=void 0,await this.esi.hr(),this.esi.we(),this.Gii.style.cursor="",this.Psi=0,this.y5=-1,this.Csi&&(this.Nsi.usi(),this.Csi=!1)}Isi(){this.K1t&&(this.K1t.Zg(),this.K1t=void 0)}asi(){this.Dsi&&(je(this.Dsi),this.Dsi=void 0)}osi(){this.Q1t&&(this.Q1t.kn(),this.Q1t=void 0)}Bsi(){this.Csi=!0}Msi(){var t;this.Dsi||(this.Dsi=h.createElement("div"),this.Dsi.className="theoplayer-ad-overlay-component theo-ad-remaining-container",this.Gii.appendChild(this.Dsi));const i=null==(t=this.rsi)?void 0:t.od;if(!i)return;const s=i.Jc.filter(W1);let e=K3(this.qS,"The content will play in")+" "+_.round(i.g0t)+" "+K3(this.qS,"seconds");if(s.length>1){const t=s.filter(t=>t.k0t()).length;e+=". "+K3(this.qS,"Ad")+" "+(t+1)+"/"+s.length}qu(this.Dsi,e)}constructor(t,i,s,e,n,r,h){super(t,i),this.Nsi=void 0,this.qS=void 0,this.j3t=void 0,this.sc=void 0,this.esi=void 0,this.rsi=void 0,this.Ujt=void 0,this.psi=void 0,this.ssi=void 0,this.Psi=void 0,this.y5=void 0,this.Csi=void 0,this.Dsi=void 0,this.Q1t=void 0,this.K1t=void 0,this.eT=void 0,this.hsi=void 0,this.Tsi=void 0,this.Esi=void 0,this.ksi=void 0,this.Ssi=void 0,this.ysi=void 0,this.bsi=void 0,this.Asi=void 0,this._si=void 0,this.fsi=void 0,this.Nsi=s,this.qS=e,this.j3t=n,this.sc=r,this.esi=h,this.ssi=!1,this.Psi=0,this.y5=-1,this.eT=new ui,this.hsi=!0,this.Tsi=()=>{this.dsi()},this.Esi=()=>{this.eT=void 0,this.ssi||(this.xsi(),this.ssi=!0),this.hsi&&(this.hsi=!1,this.j3t.wii()),this.Gii.style.display="block",this.esi.mn(Vo.SM,this.Esi),this.ssi=!0},this.ksi=()=>{const t=this.OR,i=this.ct,s=t/i;(0===this.Psi&&s>=.25?(this.jii(Sc.vQt),this.Psi=1):1===this.Psi&&s>=.5?(this.jii(Sc.gQt),this.Psi=2):2===this.Psi&&s>=.75&&(this.jii(Sc._Qt),this.Psi=3),this.gsi(t,i),this.Msi(),this.y5=t,this.Ujt)&&(-1!==this.Ujt.qjt&&this.Ujt.qjt<this.Ujt.ct&&(null!=this.Q1t||(this.Q1t=this.lsi()),this.OR<this.Ujt.qjt?this.Q1t.v1t(this.Ujt.qjt-this.OR):this.Q1t.g1t()))},this.Ssi=()=>{var t,i;this.eT=void 0,this.esi.mn(sa.ma,this.Ssi),this.hsi=!0,null==(t=this.$G)||t.HQt(Sr.WQt),this.ssi=!1,this.esi.we();const s=(null==(i=this.esi.bt)?void 0:i.src)||"";this.Qii(s)},this.ysi=()=>{this.Rs(new Tc(this.OR,void 0))},this.bsi=()=>{this.Rs(new ur(this.ct))},this.Asi=()=>{this.Rs(new q(this.OR,this.Ox))},this._si=()=>{this.j3t.zx()},this.fsi=()=>{this.rsi&&(this.jii(Sc.aQt),this.a5t.So(new da(this.rsi,this.OR/this.ct)),this.dsi(!1))},this.Gii.className="theoplayer-ad-linear",this.Gii.style.zIndex="10",Bl(this.Gii),this.esi.we(),this.Csi=!1}};r(),r();var s5=class t extends fr{get xe(){return this.Ls}m1t(){this.xe.addEventListener("mouseup",this.p1t),this.xe.addEventListener("touchend",this.p1t),this.xe.addEventListener("mousedown",this.Lsi)}_1t(){this.xe.removeEventListener("mouseup",this.p1t),this.xe.removeEventListener("touchend",this.p1t),this.xe.removeEventListener("mousedown",this.Lsi)}static yr(){const t=h.createElement("div");return t.className="theoplayer-ad-nonlinear-close",t.style.position="absolute",t.style.right="0",t.style.top="0",t.style.cursor="pointer",t.style.fontSize="1.7em",t.style.lineHeight="0.75em",t}kn(){this._1t(),je(this.Ls)}constructor(){super(),this.Ls=void 0,this.p1t=t=>{this.So(new sh("nN")),this.Lsi(t)},this.Lsi=t=>{t.stopPropagation()},this.Ls=t.yr(),this.m1t()}},e5=class extends Y3{get Osi(){return this.Fsi}get Vsi(){return this.yu}Xii(){super.Xii(),this.Gii&&Yh(this.Gii)}async wsi(t,i,s){this.B0t&&this.usi(),this.Fsi=t,this.B0t=t.Eqt,0!==this.B0t.Nqt.length&&this.zii(this.B0t.Nqt),this.$G=i,0!==this.B0t.Pqt.length&&(this.Kii(this.B0t.Pqt[0].Wqt),this.Gii.addEventListener("error",this.Wsi),this.Gii.addEventListener("load",this.Usi),await this.msi(),this.Gsi())}_$t(){var t;if(void 0!==this.Xsi)return;const i=null==(t=this.B0t)?void 0:t.Pqt[0];i&&i.od&&-1!==i.od.qjt&&(this.jii(Sc.aQt),this.a5t.So(new da(this.Fsi,0)),this.Zsi())}xsi(){void 0!==this.Fsi&&this.a5t.So(new te(this.Fsi,this.j3t.OR))}Kx(){this.usi(),this.Fsi=void 0,this.B0t=void 0}usi(){this.Hsi(),void 0!==this.Fsi&&(this.Fsi.R0t(),this.a5t.So(new He(this.Fsi,this.j3t.OR))),this.Xii(),this.zsi(),void 0!==this.Xsi&&(c(this.Xsi),this.Xsi=void 0)}Hsi(){this.Gii.removeEventListener("load",this.Usi),this.Gii.removeEventListener("error",this.Wsi)}async msi(){const t=h.createElement("div");t.className="theoplayer-ad-nonlinear-content",t.style.position="relative",t.style.display="inline-block";const i=this.B0t.Pqt[0],s=h.createElement("a");if(i.Wqt.wjt&&(s.href=i.Wqt.wjt,s.target="Xu",s.setAttribute("rel","noopener")),i.Lqt){const t=i.Lqt,e=h.createElement("iframe");e.src=t.BQt,s.appendChild(e)}else if(i.Bqt){const t=i.Bqt,e=h.createElement("img");e.src=t.BQt,s.appendChild(e)}else if(i.Fqt){const t=i.Fqt,e=h.createElement("iframe");e.src=t.BQt,s.appendChild(e)}i.Yqt(),s.addEventListener("mousedown",this.$ii),s.addEventListener("touchend",this.$ii),this.Gii.firstChild&&(Yh(this.Gii),this.usi()),t.appendChild(s),this.Gii.appendChild(t),this.be()}Gsi(){var t;if(!this.B0t)return;const i=null==(t=this.B0t.Pqt[0].od)?void 0:t.qjt;void 0!==i&&-1!==i&&(this.Xsi=s.setTimeout(this.Ysi,1e3*i))}zsi(){this.yu&&(this.yu.mn("nN",this.Ksi),this.yu.kn()),this.yu=void 0}get qsi(){return this.j3t.jsi()}constructor(t,i,s){super(t,i),this.Fsi=void 0,this.B0t=void 0,this.j3t=void 0,this.yu=void 0,this.Xsi=void 0,this.Usi=()=>{this.Hsi(),this.jii(Sc.AQt),this.Jii()},this.Wsi=t=>{var i,s;this.Hsi(),null==(i=this.$G)||i.HQt(Sr.GQt);const e=null==(s=this.B0t)?void 0:s.Pqt[0];var n,r;const h=null!=(r=null!=(n=null==e?void 0:e.Lqt)?n:null==e?void 0:e.Bqt)?r:null==e?void 0:e.Fqt;var o;this.Qii(null!=(o=null==h?void 0:h.BQt)?o:"")},this.Zsi=()=>{this.we(),Yh(this.Gii),this.Jii(),this.Fsi=void 0,this.B0t=void 0},this.Ysi=()=>{this.yu||(this.Xsi=void 0,this.yu=new s5,this.Gii.children[0].appendChild(this.yu.xe),this.yu.wn("nN",this.Ksi))},this.Ksi=()=>{this.jii(Sc.aQt),this._$t()},this.Gii.className="theoplayer-ad-nonlinear",this.Gii.style.position="absolute",this.Gii.style.width="100%",this.Gii.style.bottom="3em",this.Gii.style.zIndex="10",this.Gii.style.textAlign="center",this.j3t=s}};r();var n5=class{static async Qsi(t,i,s){let e=[],n=t.shift();const r=[];for(;n;){try{const t=await(new X0).tJt(n,i);e=e.concat(t)}catch(t){0;const i=Wh.R3t(t,n.sources.src);s.So(i),r.push(i.Ky)}n=t.shift()}return[e,r]}};r(),r(),r();var Dr=class extends Kt{xa(){return new r5}constructor(){super("kot")}},r5=class extends sh{constructor(){super("statechange")}};r();var Zt=function(t){return t.IDLE="idle",t.LOADING="loading",t.DONE="done",t.ERROR="error",t.EVICTED="evicted",t}({});r(),r();var h5=class{get ec(){return this.nc}get V(){return this.nc.length}get Ca(){return this.hu||(this.hu=this.xa()),this.hu}DI(t){return this.nc[t]}dO(t){this.nc.push(t),this.hu&&this.hu.push(t.Ca),this.Jsi(t)}$si(t){for(const i of t)this.dO(i)}tei(t,i){i>=0&&i<=this.nc.length&&(this.nc.splice(i,0,t),this.hu&&this.hu.splice(i,0,t.Ca),this.Jsi(t))}lO(t){return Ft(this.nc,t)}vS(t){this.iei(this.nc.indexOf(t))}iei(t){if(!(t>=0&&t<this.nc.length))return;const i=this.nc[t];Lh(this.nc,t),this.hu&&Lh(this.hu,t),this.sei(i)}Zy(){const t=this.nc.slice();Lr(this.nc),this.hu&&Lr(this.hu);for(const i of t)this.sei(i)}constructor(){this.nc=[],this.hu=void 0}},Jn=class extends h5{xa(){return function(t){const i=function(t){const i=t.ec.map(t=>t.Ca);return i.item=i=>{const s=0|i,e=t.DI(s);return e&&e.Ca||void 0},i}(t),s=new Is(t,i);return i.addEventListener=(t,i)=>{s.wn(t,i)},i.removeEventListener=(t,i)=>{s.mn(t,i)},i}(this)}wn(t,i){this.eei.wn(t,i)}dw(t){this.eei.dw(t)}Vo(){this.eei.Vo()}So(t){this.eei.So(t)}mn(t,i){this.eei.mn(t,i)}gw(t){this.eei.gw(t)}mw(t){this.eei.mw(t)}pw(t,i){return this.eei.pw(t,i)}constructor(...t){super(...t),this.eei=new ua,this.Rs=t=>{this.So(t)}}};r();var o5=class extends sh{constructor(t){super("addtask"),this.task=void 0,this.task=t}},a5=class extends Kt{xa(){return new o5(this.nei.Ca)}constructor(t){super("rei"),this.nei=void 0,this.nei=t}};r();var u5=class extends sh{constructor(t){super("removetask"),this.task=void 0,this.task=t}},c5=class extends Kt{xa(){return new u5(this.task.Ca)}constructor(t){super("hei"),this.task=void 0,this.task=t}},d5=class extends Jn{Jsi(t){this.So(new a5(t))}sei(t){this.So(new c5(t))}constructor(){super()}},l5=class extends fr{async Hx(){await this.oei(),this.Bot("initialised")}async oei(){try{await this.aei()}catch(t){0}}async aei(){const t=await this.ZSt.tRt();for(const i of t){const t=this.cei.uei(i.id,i.sourceDescription,i.parameters,this.dei);this.lei(t),this.nT.dO(t),await t.fei}}get rk(){return this.Dot}Bot(t){this.Dot=t,this.So(new Dr)}get vei(){return this.nT}uei(t,i,s){void 0===s&&(s="persistent");const e=this.cei._ei(t,i,s);return this.gei(e,s),this.nT.dO(e),this.lei(e),e}async gei(t,i){try{await this.mei(t,i)}catch(t){throw m("Unable to persist task - "+t)}}async mei(t,i){await this.ZSt.XSt({key:t.o,id:t.o,sourceDescription:t.Mc,parameters:t.NS},i)}lei(t){t.wn("kot",()=>{t.rk===Zt.EVICTED&&this.nT.vS(t)})}constructor(t,i,s){super(),this.Dot="uninitialised",this.nT=new d5,this.ZSt=void 0,this.dei=void 0,this.cei=void 0,this.cei=i,this.dei=s,this.ZSt=t,this.Hx()}};r(),r(),r(),r();var Vs=class{get QM(){return this.pei}get wei(){return this.yei}get bei(){return this.Aei.QM}get Sei(){let t=0,i=0;return this.cO.forEach(s=>{t+=s.timeRanges.QM,i+=s.totalQualityDurationToCache}),0===i?0:_.min(1,t/i)}get Aei(){return this.Tei}XO(t){return!!T(this.cO,t.cO)&&(!!ql(this.yei,t.yei)&&(!!ql(this.QM,t.QM)&&(!!ql(this.bei,t.bei)&&this.Aei.ZM(t.Aei))))}constructor(t,i,s){if(this.yei=void 0,this.cO=void 0,this.pei=void 0,this.Tei=void 0,this.yei=t,this.cO=i,this.pei=s,0===this.cO.size)this.Tei=ZT.tL();else{let t=new ZT([-1/0,1/0]);this.cO.forEach(i=>{t=t.Mn(i.timeRanges)}),this.Tei=t}}};Vs.QUALITY_TIME_RANGES_NULL_OBJECT=Se(),Vs.CACHE_PROGRESSION_NULL_OBJECT=new Vs(0,Vs.QUALITY_TIME_RANGES_NULL_OBJECT,NaN),Vs.kei=Vs.CACHE_PROGRESSION_NULL_OBJECT,r(),r(),r(),r();var f5=class extends sh{constructor(){super("progress")}},v5=class extends Kt{xa(){return new f5}constructor(){super("a3t")}};r(),r();var rh=class extends rl{get name(){return"Eei"}constructor(t,i){super(t,i)}};r(),r(),r();var _5=function(t){return t[t.lP=0]="lP",t[t.fP=1]="fP",t}({});async function g5(t,i,s){const e=[];for(const n of t.Hmt)e.push(m5(n,i,s));return{Tpt:await Promise.all(e)}}async function m5(t,i,s){const e=[];for(const n of t.xlt)p5(n)||e.push(b5(n,i,s));return{Z:await Promise.all(e),Kp:t.Kp}}function p5(t){return t.nat.every(y5)}var w5=1;function y5(t){return t.swt!==w5&&Boolean(t.swt)}async function b5(t,i,s){const e=[];for(const i of t.nat)y5(i)||e.push(A5(i,s));const n=await Promise.all(e),r=t.lrt[0],h=t.CG,o=h?function(t,i){const s=[],e=function(t){return t?Vh(t,"avc")?My:Vh(t,"hev")||Vh(t,"hvc")||Vh(t,"hvt")||Vh(t,"lhv")||Vh(t,"lhe")||Vh(t,"lht")?Ly:Vh(t,"mp4")?Oy:Vh(t,"mpeg2")?Vy:Vh(t,"mpeg")?Fy:Uy:Uy}(t);for(const t of i){const i=t.w9.split(":").pop(),n=t.y9;s.push({mimeType:e,uuid:i,data:n})}const n=_5.lP,r=_r;return{type:n,schemeType:r,schemeDatas:s}}(r,h):void 0,a=ZH(t,i,!0);return{QI:n,bs:t.nit,Kp:t.Kp,aX:o,Smt:a}}async function A5(t,i){const s={stack:[],error:void 0,hasError:!1};try{const r=Zr(s,new ui,!1),h=await async function(t,i,s){const e=[],n=t.Jrt;t.Cdt&&e.push({kO:0,ct:0,Rei:t.Cdt});const r=n.Ryt();let h=r;for(;h;){if(t.Tct(h)){const n=await t.Ect(h,i,s);for(let i=0;i<n.V;i++)e.push(S5(n.xct(i),t))}else e.push(S5(h,t));h=n.Pct(h)}const o=n.Cyt(),a=o.EO-r.kO;return{ct:a,ict:e}}(t,i,r.jg),o={o:T5(t),mM:h,EG:t.EG,Um:t.Um,Mi:t.Mi,Kp:t.Kp,Ti:t.Ti};switch(t.Kp){case Mo.DT:break;case Mo.Nk:var e,n;o.glt=null!=(n=null==(e=t.glt)?void 0:e.tF())?n:NaN;break;case Mo.Ck:o.audioSamplingRate=t.Jpt}return o}catch(t){s.error=t,s.hasError=!0}finally{hs(s)}}function S5(t,i){return{kO:t.kO,ct:t.ct,Rei:i.Dct(t)}}function T5(t){return t.pct.Tn+"-"+(""+t.o)}function k5(t,i){const s=function(t){const i=function(t){const i=Se();for(const s of t){let t=i.get(s.CMt);t||(t={Kp:s.Kp,YN:[]},i.set(s.CMt,t)),t.YN.push(s)}return i}(t),s=Zs();return i.forEach(t=>{for(const i of t.YN){let e=s.get(t.Kp);e||(e=Se(),s.set(t.Kp,e));let n=e.get(i.l);n||(n=[],e.set(i.l,n)),n.push(i)}}),s}(t);return function(t,i){const s=Zs();return t.forEach((t,e)=>{const n=Se();t.forEach((t,s)=>{const r=[];for(const s of t){const t=E5(s,e,i);r.push(t)}n.set(s,r)}),s.set(e,n)}),s}(s,i)}function E5(t,i,s){const e=t.CMt,n={OMt:t,VVt:[]};for(const t of s)xQ(i,e,t)&&n.VVt.push(t);return n}async function R5(t,i){const s=await i.ISt([t],{});return $j(s._k,{},s.CSt)}async function x5(t,i){return mj(t)?async function(t,i){const s=k5(t.YN,t.gOt),e=await async function(t,i){const s=[],e=t.entries();for(let t=e.next();!t.done;t=e.next()){const[e,n]=t.value,r=await C5(n,e,i);s.push(r)}return s}(s,i),n=await async function(t,i){const s=[];for(const o of t){var e,n;const t=await M5(o.eyt,i);var r,h;t.EG=o.EG,t.Um=o.lrt?P5(o.lrt):"",t.Mi=null!=(r=null==(e=o.aCt)?void 0:e.Mi)?r:0,t.Ti=null!=(h=null==(n=o.aCt)?void 0:n.Ti)?h:0,s.push(t)}return{Kp:Mo.gk,Z:[{bs:FU,Kp:Mo.gk,QI:s}]}}(t.gOt,i);return e.push(n),{ct:I5(e),xei:[t.eyt],spt:[{Tpt:e}]}}(t,i):function(t){const i=L5(t);return{ct:i.ct,xei:[t.eyt],spt:[{Tpt:[{Kp:Mo.gk,Z:[{Kp:Mo.gk,bs:FU,QI:[{o:t.eyt,mM:i,EG:0,Um:"",Mi:0,Kp:Mo.gk,Ti:0}]}]}]}]}}(t)}function I5(t){let i=-1/0;for(const s of t)for(const t of s.Z)i=_.max(i,...t.QI.map(t=>t.mM.ct));return i}function P5(t){return[t.wCt,t.bCt,t.OLt].filter(Y).join(",")}async function C5(t,i,s){const e=[],n=t.entries();for(let t=n.next();!t.done;t=n.next()){const[,i]=t.value,n=await N5(i,s);e.push(n)}return{Kp:D5(i),Z:e}}async function N5(t,i){const s=[],e=t[0].OMt;for(const e of t){const t=await B5(e,i);s.push(t)}return{bs:e.bs||FU,Kp:D5(e.Kp),QI:s}}function D5(t){switch(t){case Xt.Ck:return Mo.Ck;case Xt.Nk:return Mo.Nk;case Xt.OV:case Xt.yLt:return Mo.DT;default:return Mo.gk}}function B5(t,i){const s=function(t){const i=t.OMt.eyt,s=t.VVt.map(t=>t.eyt);return i||(s.length?s[0]:void 0)}(t);return M5(s,i)}async function M5(t,i){let s={ct:0,ict:[]};if(t){const e=await R5(t,i);pj(e)&&(s=L5(e))}return{o:t||"default",Iei:t,mM:s,EG:0,Um:"",Mi:0,Kp:Mo.gk,Ti:0}}function L5(t){const i=[];let s,e=0;for(const n of t.ict){const t=e;!n.yOt||void 0!==s&&yj(n.yOt.eyt,s)||(i.push(O5(n.yOt,t)),s=n.yOt.eyt),i.push(F5(n,t)),e+=n.ct}return{ct:e,ict:i}}function O5(t,i){return{kO:i,ct:0,Rei:V5(t.eyt)}}function F5(t,i){return{kO:i,ct:t.ct,Rei:V5(t.eyt)}}function V5(t){return{Yu:t.XE,Aat:t.Mbt?[t.Mbt.Tn,t.Mbt.Tn+t.Mbt.V]:void 0,Xk:!1}}r(),r();var W5=class{async Pei(t){if(!t.src)throw new m("Invalid typed source");const i=t.type;if(hk(i))return await this.Cei(t);if(ue(i))return await this.Nei(t);throw new m("Unexpected source type")}async Cei(t){try{const i=await R5(t.src,this.PSt);return await x5(i,this.PSt)}catch(t){throw new m("Unable to fetch HLS manifest")}}async Nei(t){try{const i=new dH({eP:Zd.Dh(t.src),uSt:t.liveOffset,vSt:t.timeServer,Xk:t.useCredentials},this.Dei,Pr.qk,this.PSt,t.dash);return await i.W,await async function(t,i,s){const e=[];for(const n of t.spt)e.push(g5(n,i,s));const n=await Promise.all(e);return{ct:t.Zwt.Ipt(),xei:[t.tSt],spt:n}}(i.Br.xdt,t.contentProtection,this.Nct)}catch(t){throw new m("Unable to fetch DASH manifest")}}constructor(t,i,s){this.PSt=void 0,this.Nct=void 0,this.Dei=void 0,this.PSt=t,this.Nct=i,this.Dei=s}};r();var U5=class{Bei(){const t=new gs;return this.Mei.push(t),this.Lei(),t.Yy}async Oei(t,i){try{await t}finally{this.Fei-=1,this.Lei(),0===this.Mei.length&&0===this.Fei&&i.Hy(!0)}}Lei(){if(this.Mei.length>0&&this.Fei<this.Vei){this.Mei.shift().Hy(),this.Fei+=1}}constructor(t){this.Vei=void 0,this.Mei=[],this.Fei=0,this.Vei=t}};var G5=class extends fr{get fei(){return this.Hx()}async Hx(){const t=new W5(this.PSt,this.Nct,this.Dei);this.gCt=await t.Pei(this.Wei);const i=function(t,i){if(yo(t)){if(Vh(t,"%"))return C(t)/100*i;throw new m("Unexpected - Invalid string supplied as amount to cache.")}return i<t?i:t}(this.HSt.NS.amount,this.gCt.ct);let s;this.pei=i;const e=ia(this.gCt.xei[0]),n=(await this.uRt.cRt.sRt(e,"manifestURL")).filter(t=>Ft(t.references,this.HSt.o)),r=[],h=this.HSt.NS.bandwidth;for(const t of this.gCt.spt)for(const i of t.Tpt)for(const t of Z5(i,this.HSt.NS.preferredTrackSelection))for(const i of z5(t.QI,h))r.push(i);this.Uei=_.ceil(r.map(t=>t.EG*function(t,i){let s=0;for(const e of t.mM.ict.map(t=>t.ct))if(s+=e,s>=i)return s;return s}(t,i)/8).reduce((t,i)=>t+i,0));const o=Se();if(n&&0!==n.length){const t=n.reduce((t,i)=>t+i.byteSize,0);for(const t of n){const i=t.qualityId,s=new ZT(t.startsAndEnds);if(o.has(i))o.get(i).timeRanges=o.get(i).timeRanges.LM(s).MM(5e-4);else{const t=me(r,t=>t.o===i);var a;const e=_.min(this.pei,null!=(a=null==t?void 0:t.mM.ct)?a:1/0);o.set(i,{timeRanges:s,totalQualityDurationToCache:e})}}s=new Vs(t,o,this.pei)}else{for(const t of r)o.set(t.o,{timeRanges:ZT.tL(),totalQualityDurationToCache:_.min(t.mM.ct,this.pei)});s=new Vs(0,o,this.pei)}this.Gei=s}get Xei(){return this.Uei}get Gei(){return this.Zei}set Gei(t){this.Zei.XO(t)||(this.Zei=t,t.XO(Vs.kei)||this.So(new v5))}async mi(t){await this.ko,await this.Hei(this.gCt,t)}async Hei(t,i){if(!t.xei)throw new m("Unexpected - manifest is missing locations");await this.zei();const s=[];for(const e of t.spt)s.push(this.Yei(e,t.xei[0],i));return vr(s)}async zei(){const t=await this.Kei.tRt();for(const i of t){const t=await this.uRt.dRt.Uy(i.key);if(t)await X5(t,this.HSt.o,this.uRt.dRt,this.dei);else try{await this.uRt.dRt.XSt(i,this.dei)}catch(t){throw new rh("Unable to store manifest with url: "+i.locationURL,t)}}await this.Kei.nRt()}Yei(t,i,s){const e=[];for(const n of t.Tpt){const t=Z5(n,this.HSt.NS.preferredTrackSelection);for(const n of t)e.push(this.qei(n,i,s))}return vr(e)}async qei(t,i,s){const e=this.HSt.NS.bandwidth,n=z5(t.QI,e);t.Kp===Mo.Nk&&t.Smt&&t.Smt.cU.widevine&&"persistent"===t.Smt.cU.widevine.licenseType&&(await this.jei(t.Smt),Ko(s));const r=[];for(const t of n)r.push(this.Qei(t,i,s));return vr(r)}async Qei(t,i,s){Ko(s);const e=t.mM.ict[0].kO+this.pei,n=[];let r=!1;for(const h of t.mM.ict){if(h.kO>=e||this.stopIfFailed(r))break;await this.Jei(s),await this.$ei.Bei(),n.push(this.$ei.Oei(this.tni(h,t,i),this.ini).catch(t=>(r=!0,Promise.reject(t))))}return vr(n)}async Jei(t){if(null==t?void 0:t.Ug)throw await this.ini.Yy,new us}async sni(){return await this.ko.catch(ol),this.gCt}jei(t){return Promise.resolve()}eni(){return Zd.lp("License renewal unsupported in this SDK."),Promise.resolve()}async tni(t,i,s){const e=this.uRt.cRt,n=kH(t.Rei.Yu,t.Rei.Aat),r=await e.Uy(n);if(r)await X5(r,this.HSt.o,e,this.dei),this.nni(r,!1);else try{const e=await this.rni(t.Rei),{segmentMetadataEntry:n,segmentEntry:r}=this.hni(t,i,s,e);await this.uRt.aRt(async t=>{await t.cRt.XSt(n,this.dei),await t.ict.XSt(r,this.dei)}),this.nni(n,!0)}catch(i){throw new rh("Unable to store segment with url: "+t.Rei.Yu,i)}}async rni(t){const i=await this.But.gat(t,{Tat:this.DEFAULT_CACHING_SEGMENT_TIMEOUT,Wk:this.DEFAULT_CACHING_SEGMENT_CONNECTION_TIMEOUT});return await this.Mut(i)}async Mut(t){return{buffer:await t.WT()}}hni(t,i,s,e){const n=kH(t.Rei.Yu,t.Rei.Aat),r=t.kO,h=t.ct,o=this.oni(e);return{segmentMetadataEntry:{key:n,segmentURLsegmentByteRange:n,manifestURL:ia(s),qualityId:i.o,byteSize:o,startsAndEnds:new ZT([r,r+h]).TM,references:[this.HSt.o]},segmentEntry:{key:n,segmentURLsegmentByteRange:n,manifestURL:ia(s),data:e,references:[this.HSt.o]}}}oni(t){return t.buffer.byteLength}nni(t,i){const s=t.qualityId,e=this.Zei,n=e.cO;n.get(s).timeRanges=n.get(s).timeRanges.LM(new ZT(t.startsAndEnds)).MM(5e-4),this.Gei=new Vs(i?e.wei+t.byteSize:e.wei,n,this.pei)}stopIfFailed(t){return!1}constructor(t,i,s,e,n,r,h,o){super(),this.DEFAULT_CACHING_SEGMENT_TIMEOUT=3e4,this.DEFAULT_CACHING_SEGMENT_CONNECTION_TIMEOUT=0,this.HSt=void 0,this.uRt=void 0,this.dei=void 0,this.gCt=void 0,this.$ei=void 0,this.ini=new gs,this.Wei=void 0,this.Kei=void 0,this.PSt=void 0,this.But=void 0,this.Nct=void 0,this.Dei=void 0,this.ko=void 0,this.pei=void 0,this.Uei=void 0,this.Zei=Vs.kei,this.HSt=t,this.uRt=i,this.PSt=s,this.Kei=e,this.But=n,this.Nct=r,this.Dei=o,this.dei=h,this.Uei=-1;const a=this.HSt.Mc.sources[0];this.Wei=a,this.ko=this.Hx(),this.$ei=new U5(this.HSt.NS.parallelTasksThreshold)}};async function X5(t,i,s,e){Ft(t.references,i)||(t.references.push(i),await s.XSt(t,e))}function Z5(t,i){switch(t.Kp){case Mo.Ck:return H5(t.Z,i.audioTrackSelection);case Mo.DT:return H5(t.Z,i.textTrackSelection);default:return H5(t.Z,[])}}function H5(t,i){if(0===i.length)return t.length?[t[0]]:[];const s=[];for(const e of t)i.indexOf(e.bs)>-1&&s.push(e);return s}function z5(t,i){if(!t.length)return[];const s=[...t].sort(qW),e=s.filter(t=>t.EG<=i);return e.length>0?[e.pop()]:[s.shift()]}var Y5=class{async ani(){await this.uRt.aRt(async t=>{await this.uni(t),await this.cni(t),await this.dni(t),await this.lni(t)})}async uni(t){const i=t.lRt,s=this.HSt.o;await i.vS(s)}async cni(t){const i=t.cRt,s=t.ict,e=this.HSt.Mc.sources[0];if(!fk(e))return;const n=ia(e.src),r=(await i.sRt(n,"manifestURL")).filter(t=>Ft(t.references,this.HSt.o));for(const t of r)is(t.references,this.HSt.o),0===t.references.length?(await i.vS(t.key),await s.vS(t.key)):await i.XSt(t)}async dni(t){const i=t.dRt,s=this.fni(),e=(await i.zEt(s)).filter(t=>Ft(t.references,this.HSt.o));for(const t of e)is(t.references,this.HSt.o),0===t.references.length?await i.vS(t.key):await i.XSt(t)}fni(){if(!this.gCt)return[];const t=this.HSt.Mc.sources[0];if(!fk(t))return[];const i=ia(t.src),s=function(t){if(!t)return[];const i=[];for(const s of t.spt)for(const t of s.Tpt)for(const s of t.Z)for(const t of s.QI)t.Iei&&i.push(t.Iei);return function(t){return t.reduce((t,i)=>(t.indexOf(i)<0&&t.push(i),t),[])}(i)}(this.gCt).map(t=>({src:t})).map(t=>ia(t.src));return[i,...s]}async lni(t){const i=t.fRt,s=(await i.tRt()).filter(t=>Ft(t.references,this.HSt.o));for(const t of s)is(t.references,this.HSt.o),0===t.references.length?(await i.vS(t.key),this.vni(t)):await i.XSt(t)}vni(t){}constructor(t,i,s){this.HSt=void 0,this.uRt=void 0,this.gCt=void 0,this.HSt=t,this.uRt=i,this.gCt=s}},K5=new class{Rst(t,i,s){return new Y5(t,i,s)}};r(),r();var q5=class{get Ca(){return this.hu||(this.hu=function(t){return{renew(i){t._ni(i)}}}(this)),this.hu}_ni(t){this.gni(t)}async gni(t){try{await this.mni.eni(t)}catch(t){0,this.gE.Bot(Zt.ERROR)}}constructor(t,i){this.gE=void 0,this.mni=void 0,this.hu=void 0,this.gE=t,this.mni=i}},j5=class extends ua{get fei(){return this.mni.fei}get Ca(){return this.hu||(this.hu=function(t){let i;const s={get id(){return t.o},get status(){return t.rk},get source(){return t.Mc},get parameters(){return t.NS},get duration(){return t.ct},get cached(){return t.pni._s()},get secondsCached(){return t.wni},get percentageCached(){return t.yni},get bytes(){return t.bni},get bytesCached(){return t.Ani},get license(){return t.hK.Ca},start(){t.Tn()},pause(){t.zx()},remove(){t.vS()},addEventListener(t,s){i.wn(t,s)},removeEventListener(t,s){i.mn(t,s)}};return i=new KN(t,["a3t","kot"],s),s}(this)),this.hu}get o(){return this.rS}get hK(){return this.Sni}get rk(){return this.Dot}Bot(t){this.Dot!==t&&(this.Dot=t,this.So(new Dr))}get Mc(){return this.Ac}get NS(){return this.Tni}get ct(){return this.mni.Gei.QM}get pni(){return this.mni.Gei.Aei}get wni(){return this.mni.Gei.bei}get yni(){return this.mni.Gei.Sei}get bni(){return this.mni.Xei}get Ani(){return this.mni.Gei.wei}Tn(){this.Dot===Zt.EVICTED||this.Dot===Zt.DONE||this.kni()}async kni(){try{this.Bot(Zt.LOADING);const t=new ui;this.Eni=t,await this.mni.mi(t.jg),this.Bot(Zt.DONE)}catch(t){hc(t)?this.Bot(Zt.IDLE):this.Bot(Zt.ERROR)}finally{this.Eni.Zg()}}zx(){this.Eni.Jg()}vS(){this.rk===Zt.LOADING?(this.wn("kot",this.evictOnLoading),this.zx()):this.Rni()}async Rni(){try{const t=await this.mni.sni();await K5.Rst(this,this.uRt,t).ani(),this.mni.Gei=Vs.kei,this.Bot(Zt.EVICTED)}catch(t){0,this.Bot(Zt.ERROR)}}constructor(t,i,s,e,n,r){super(),this.rS=void 0,this.Dot=void 0,this.hu=void 0,this.Ac=void 0,this.Tni=void 0,this.uRt=void 0,this.mni=void 0,this.Eni=new ui,this.Sni=void 0,this.evictOnLoading=()=>{this.mn("kot",this.evictOnLoading),this.Rni()},this.rS=t,this.Ac=i,this.Tni=s,this.uRt=e,this.mni=n.Rst(this,this.uRt,r),this.Sni=new q5(this,this.mni),this.Dot=1===this.mni.Gei.Sei?Zt.DONE:Zt.IDLE,this.mni.wn("a3t",t=>{this.Rs(t),1===this.yni&&this.Bot(Zt.DONE)});const h=new Date,o=this.Tni.expirationDate.getTime()-h.getTime();(function(t){return t<2147483647})(o)&&u(()=>this.Rni(),o)}};var Q5=class{_ei(t,i,s){const e=FC();return this.uei(e,t,i,s)}uei(t,i,s,e){return new j5(t,i,s,this.uRt,this.xni,e)}constructor(t,i){this.uRt=void 0,this.xni=void 0,this.uRt=t,this.xni=i}};r();function J5(t){if(!t)throw new m("Unexpected - The cache parameters are undefined");const i=function(t){if(yo(t)&&!Vh(t,"%"))return x(t);return t}(t.amount);!function(t){if(function(t){return yo(t)&&Vh(t,"%")}(t)){const i=C(t);if(S(i)||i<0||i>100)throw new m("The amount as percentage must be between 0 and 100 percent.")}if(!yo(t)&&S(t))throw new m("The amount must be a number or a string")}(i);const s=function(t){if(!t)return function(){const t=new Date;return t.setMinutes(t.getMinutes()+30),t}();return t}(t.expirationDate);!function(t){if(t&&!function(t){return!t||Yd(t)&&t>new Date}(t))throw new m("Invalid expiration date for the cache parameters")}(s);const e=function(t){if(void 0===t)return 1/0;return t}(t.bandwidth);!function(t){if(S(t)||t<0)throw new m("The bandwidth must be between zero and infinity.")}(e);const n=function(t){if(!t)return 5;if(S(t))throw new m("The amount must be a number");return t}(t.numberOfParallelTasks);return{amount:i,expirationDate:s,bandwidth:e,parallelTasksThreshold:n,preferredTrackSelection:{audioTrackSelection:[],textTrackSelection:[]}}}var $5=class{set Uii(t){this.Ini=t,this.Pni=0,this.Cni=0,this.Nni=void 0}get Uii(){return this.Ini}c9t(){if(!this.Ini)return;const t=this.Ini.w0t;for(;this.Pni<t.length;){const i=t[this.Pni];for(void 0===this.Nni&&(this.Nni=qn(i),this.Cni=0);this.Cni<this.Nni.length;){const t=this.Nni[this.Cni];if(this.Cni++,void 0!==t.kqt)return t.kqt}this.Pni++,this.Nni=void 0}}hr(){for(this.Uii=void 0,this.eT.Jg(),this.eT=new ui;this.Dni.length;)this.Sii()}Bni(t){return new l5(this.uRt.lRt,t,"temporary")}async THt(t){const i=j3(t.zjt,this.VQ.ads.allowedMimeTypes);if(!i.length)return;const s=await nP.Bg.hZ(i,bc({sources:i}));if(!s.t.KX())return;this.mni||(this.mni=new this.xni(this.rW));const e=this.uRt,n=new Q5(e,this.mni),r=this.Bni(n).uei(bc({sources:s.Mc}),J5({amount:10,bandwidth:bu.Bg._G()||this.kZ.Wj}),"temporary");this.Dni.push(r);const h=this.mni.Rst(r,e,"temporary");this.eT.Jg(),this.eT=new ui,Ce(h.mi(this.eT.jg),this.eT).then(ol),this.Mni(h,t)}constructor(t,i,s,e){this.uRt=void 0,this.mni=void 0,this.Ini=void 0,this.VQ=void 0,this.Dni=[],this.Pni=0,this.Cni=0,this.Nni=void 0,this.eT=void 0,this.rW=void 0,this.xni=void 0,this.kZ=void 0,this.yii=async()=>{const t=this.c9t();t&&await this.THt(t)},this.Sii=()=>{const t=this.Dni.shift();null==t||t.vS()},this.Mni=async(t,i)=>{let s=!1;for(;!s;)await t.pw("a3t"),s=1===t.Gei.Sei;i.ct<5&&this.yii()},this.VQ=t,this.rW=i,this.eT=new ui,this.xni=s,this.kZ=e,this.uRt=new yz}};r(),r();var t4={key:"",segmentURLsegmentByteRange:"",manifestURL:"",qualityId:"",byteSize:0,startsAndEnds:new ZT([0,0]).TM,references:[]},i4={key:"",segmentURLsegmentByteRange:"",manifestURL:"",data:""},s4=class t extends sU{async Qct(t,i,s,e){try{return await super.Qct(t,i,s,e)}catch(t){Ui(t)}const n=await this.Lni.Qct(t,i,s,e);return await this.Oni(t,i,n),n}async Oni(i,s,e){if(void 0===this.Fni)return;const n=this.uRt.cRt,r=kH(i,s),h=await n.Uy(r);if(h)await X5(h,this.Fni,n,this.dei);else try{const i={buffer:e},{segmentMetadataEntry:s,segmentEntry:n}=t.hni(r,i,this.Fni);await this.uRt.aRt(async t=>{await t.cRt.XSt(s,this.dei),await t.ict.XSt(n,this.dei)})}catch(t){throw new rh("Unable to store segment with url: "+i,t)}}static hni(t,i,s){return{segmentMetadataEntry:Jr({},t4,{key:t,segmentURLsegmentByteRange:t,references:[s]}),segmentEntry:Jr({},i4,{key:t,segmentURLsegmentByteRange:t,data:i,references:[s]})}}constructor(t,i,s,e,n){super(t),this.Lni=void 0,this.Fni=void 0,this.uRt=void 0,this.dei=void 0,this.Lni=new iU(i),this.uRt=s,this.Fni=e,this.dei=n}};var e4=class{Rst(t,i,s){void 0===s&&(s="persistent");const e=t.Mc.sources[0];if(uk(e))throw new m("Caching THEOlive sources is not supported");const n=Boolean(e.useCredentials),r=new aW(this.rW,aA.gk),h=new TH(this.rW,n),o=new fz(i.dRt,i.cRt,i.ict,i.fRt),a=function(t,i,s,e,n){return new s4(i,t,s,e,n)}(this.rW,o,i,t.o,s),u=new wz,c=new PH(IH(h,o),u,t);return this.Vni(t,i,c,u,r,a,s)}constructor(t){this.rW=void 0,this.rW=t}},n4=class extends e4{Vni(t,i,s,e,n,r,h){return new G5(t,i,s,e,n,r,h,OV())}},r4=n4,h4=class t extends r3{get M5t(){return this}static get D5t(){return Qc.O0t}get D5t(){return t.D5t}Tti(t,i,s){i===rV._nt&&this.s8?_e(this.a9t([t])):this.Wni.push(t)}FR(){return this.Uni.isi?this.Uni.OR:this.Wet()}WR(t,i){}Nd(){return this.Uni.ct}XR(){return this.Uni.GR}ZR(){}zR(){}sx(){return this.Uni.ix}nx(t){this.ix!==t&&(this.Uni.ix=t,this.So(new q(this.OR,this.Ox)))}lx(){return this.Uni.ux}Tx(){return this.Uni.Sx}Ex(){return ZT.tL()._s()}Dx(){return this.Uni.Nx}Lx(){return this.Uni.Mx}Fx(){return this.Uni.Ox}Vx(t){this.Ox!==t&&(this.Uni.Ox=t,this.So(new q(this.OR,this.Ox)))}async Yx(){if(this.Gni)return;this.So(new Ts(this.OR)),this.Xni(),this.Wni.length&&(this.Gni=this.a9t(this.Wni),await this.Gni,this.Gni=void 0),await this.Zni.Cii(this.oa.FR());const t=this.Hni;4!==t&&1!==t&&5!==t||(!this.X0t&&this.zni.length?this.Yni():this.X0t?(this.Kni=!0,this.Uni.Yx()):(this.$2t(),this.oa.Yx()),this.Hni=3)}zx(){3===this.Hni&&(this.Uni.zx(),this.Hni=4)}wii(){this.Zni.wii()}Tn(){this.Hni=1,this.Zni.Tn()}async Kx(){this.Zni&&(this.Zni.An(),this.qni(!1),this.Nsi.Kx(),this.Hni=5,this.X0t&&(this.Zni.Wii(this.X0t.oJt),this.X0t=void 0)),this.s8=!1,this.Kni=!1,Lr(this.zni),this.X5t&&(this.$2t(),this.oa.be()),Lr(this.Wni),await this.Uni.Kx(),await this.esi.hr()}nN(){this.Uni._$t(),this.Nsi._$t()}Ant(t){this.Cd.ads.allowSkipAdBreak&&(this.jni=!0,this.Qni=t,this.nN())}Hx(){this.esi.Hx(),this.Xni()}V5t(t){return!(t.type!==d.Nw||!this.Zni||!this.Zni.xii(-1))&&(this.Zni.Eii().then(ol),!0)}be(){void 0!==this.Uni.nsi&&(this.esi.be(),this.Uni.be()),void 0!==this.Nsi.Osi&&this.Nsi.be()}we(){this.esi.we(),this.Uni.we(),this.Nsi.we()}async a9t(t){const[i,s]=await n5.Qsi(t,this.rW,this.a5t);if(i.length)this.Zni.Fii(i),this.a5t.So(new pV),this.X5t||this.oa.ux||await this.Zni.Cii(this.oa.FR()),0!==this.Hni&&5!==this.Hni||this.Tn();else{if(0===s.length||s.some(t=>t!==De.VAST_EMPTY_RESPONSE&&t!==De.VAST_NO_ADS_AFTER_WRAPPER)){const t="Ads could not be loaded.";this.a5t.So(Wh.R3t(new rs(Cu.ADBLOCK,De.FILE_NOT_FOUND),t))}this.s8&&!this.X0t&&0===this.zni.length&&this.Jni()}}Mii(t){for(const i of t)Ft(this.zni,i)||this.zni.push(i);for(const i of t)this.s8&&!this.X5t&&this.Yni()}async Yni(){if(2!==this.Hni&&!this.$ni){0,this.$ni=!0,this.Hni=2;const t=this.X0t;this.tri(),this.X0t?(await this.X0t.oJt._ii(this.a5t),this.iri()||(this.$ni=!1),this.a5t.So(new j2(this.sri(this.X0t))),await this.eri()):((null==t?void 0:t.oJt.gii())&&this.a5t.So(new Xh(this.sri(t))),this.$ni=!1,this.Hni=1,this.Jni())}}Jni(){this.$2t(),this.oa.be(),this.oa.GR?this.oa.So(new Be(this.oa.FR())):this.oa.Yx()}tri(){let t;if(this.X0t&&this.iri())t=this.X0t.oJt;else{if(0===this.zni.length)return;t=this.zni.shift()}if(!t)return;const i=t.Rc();i?this.X0t=i:(this.X0t&&(this.Zni.Wii(this.X0t.oJt),this.X0t=void 0),this.X0t=void 0)}async eri(){const t=this.X0t?function(t){var i,s;const e=null==(s=t.MJt)||null==(i=s.uqt)?void 0:i.cqt();return void 0===e?void 0:new C1(e)}(this.X0t):void 0;if(t){if(!this.X0t)return;this.rri=t,this.hri(this.X0t.Nqt),this.ari(Sc.IQt);const i=this.rri.Rc();this.X0t.oJt.gii()&&(this.Nsi.usi(),1===this.X0t.oJt.hut&&this.a5t.So(new vV(this.sri(this.X0t)))),await this.wsi(i)}else this.Hni=1,this.$ni=!1,this.X0t=void 0,this.Yni()}async wsi(t){if(t){var i;let e=Y(t.kqt),n=Y(t.xqt);var s;const r=null!=(s=null==(i=t.Rqt)?void 0:i.Jqt)?s:[],h=r.length>0,o=this.X0t,a=this.sri(o);if(t.kqt){if(t.kqt.od=o,void 0!==o.Lnt.skipOffset){const i=Pa.NJt(o.Lnt.skipOffset,t.kqt.ct);void 0!==i&&i<t.kqt.ct&&(t.kqt.qjt=i)}const i=a.y0t(t.kqt,r,t.Iqt,o.Lnt);this.Nsi.usi(),this.M4t(),await this.Uni.wsi(i,t.lt,{width:this.oa.xe.offsetWidth,height:this.oa.xe.offsetHeight}),e=!0}if(t.xqt){const i=t.xqt.Pqt[0];if(i.od=o,void 0!==o.Lnt.skipOffset){const t=Pa.NJt(o.Lnt.skipOffset,this.oa.Nd());t&&(i.od.qjt=t)}const s=e?[]:r,h=a.b0t(i,s,t.xqt,t.Iqt,o.Lnt);e&&this.Uni.Bsi(),await this.Nsi.wsi(h,t.lt,{width:this.oa.xe.offsetWidth,height:this.oa.xe.offsetHeight}),n=!0}if(e){this.Hni=3,this.Uni.be();const t=0===a.fOt;this.Kni=t,this.esi.zx(),this.Uni.Yx(),this.oa.zx(),this.oa.we(),this.M4t(),this.Uni.xsi()}n&&(this.Hni=3,this.Nsi.be(),this.Nsi.xsi()),(e||n||h)&&this.cri(t.Aqt),e||n||await this.dri(),!e&&n&&(this.iri()||this.zni.length>0?this.Yni():(this.Jni(),this.X0t=o))}else null===t?await this.dri():this.qni(!0)}dri(){const t=this.rri;return this.wsi(t&&t.Rc())}qni(t){this.ari(Sc.PQt),this.lri(),this.Hni=1;const i=void 0!==this.X0t&&this.X0t.oJt.fii();if(this.$ni=!1,!i||this.jni){if(!this.X5t)return;this.oa.be(),!this.oa.GR&&t&&this.oa.Yx(),void 0!==this.Qni&&this.oa.WR(this.Qni),this.$2t(),this.jni=!1,this.Qni=void 0}else t&&(this.Hni=1,this.Yni())}$2t(){this.fri(),super.$2t()}fri(){if(this.oa.GR&&(this.Hni=5),this.X0t){const t=this.X0t.oJt;t.gii()&&this.a5t.So(new Xh(this.sri(this.X0t))),this.Zni.Wii(t),this.X0t=void 0}}hri(t){this.vri=this.vri.concat(t)}lri(){this.vri=[]}_ri(t){this.oa.xe.appendChild(t)}ari(t){for(const i of this.vri)i.YH===t&&Ln(i.eventURL)}cri(t){this.Uni.jii(Sc.AQt);for(const i of t)Ln(i)}get wnt(){return this.X0t?this.sri(this.X0t):null}get mnt(){return this.X0t?[this.Uni.nsi,this.Nsi.Osi].filter(Y):[]}get ynt(){const t=this.zni.concat(this.Zni.ynt.filter(t=>!t.k0t()));return vl(t,t=>t.oii.Jc.filter(t=>!t.k0t()))}get bnt(){return this.Zni.ynt.map(t=>t.oii)}Tnt(t){const i=this.Eti();for(const s of i)n0(s.sources,s.timeOffset)||t.B6(s,rV._nt,!1)}Eti(){const t=[];for(const i of this.mnt.concat(this.ynt))t.push(i.Lnt);const i=this.zni.concat(this.Zni.ynt.filter(t=>!t.k0t()));for(const s of i)for(const i of s.w0t)i.W||t.push(i.Lnt);return t.push(...this.Wni),xc(t)}iri(){return!!this.X0t&&qn(this.X0t).some(t=>t.kqt)}sri(t){return t.oJt.oii}jsi(){return this.gri}Zx(){return this.esi.Zx()}xR(){return this.esi.xR()}Y5t(t){this.Zni.Y5t(t)}async kn(){await super.kn(),this.oa.mn(d.uo,this.Xni),this.a5t.Rq(this.Uni.a5t),this.a5t.Rq(this.Nsi.a5t),this.a5t.Rq(this.Zni),this.Uni.kn(),this.Nsi.kn(),await this.esi.kn()}constructor(t,i,s,e,n,r){super(t,i),this.Gni=void 0,this.Uni=void 0,this.Nsi=void 0,this.Zni=void 0,this.zni=[],this.Hni=0,this.X0t=void 0,this.rri=void 0,this.vri=[],this.gri=void 0,this.$ni=!1,this.s8=!1,this.Kni=!0,this.esi=void 0,this.jni=!1,this.Qni=void 0,this.Wni=[],this.rW=void 0,this.pri=t=>{t.type===d.uo&&this.Kni?this.Kni=!1:this.So(t)},this.Xni=()=>{this.s8=!0},this.wri=async()=>(this.Hni=1,await this.Uni.usi(),this.wsi(this.rri.Rc())),this.yri=async t=>{const i=new rs(Cu.PLAYBACK,De.GENERAL_LINEAR_ERROR,"There was a problem playing a linear ad.");return this.a5t.So(Wh.R3t(i,t)),await this.Uni.usi(),this.wsi(this.rri.Rc())},this.bri=()=>(this.Nsi.usi(),this.wsi(this.rri.Rc())),this.Ari=t=>{const i=new rs(Cu.PLAYBACK,De.GENERAL_NON_LINEAR_ERROR,"There was a problem playing a non linear ad.");return this.a5t.So(Wh.R3t(i,t)),this.Nsi.usi(),this.wsi(this.rri.Rc())},this.rW=r,this.esi=s,this.Nsi=new e5(this.Ari,this.bri,this),this.Uni=new i5(this.yri,this.wri,this.Nsi,e,this,t.Wu,s),this._ri(this.Nsi.Gii),this._ri(this.Uni.Gii);const h=new $5(e,r,n4,n);this.Zni=new z3(this.oa,this,this.a5t,h),this.Uni.dw(this.pri),this.Nsi.dw(this.Rs),this.a5t.au(this.Uni.a5t),this.a5t.au(this.Nsi.a5t),this.a5t.au(this.Zni),this.gri=new B1(this,this.oa),this.Wu.wn(Gu.yn,this.Rs),this.oa.wn(d.uo,this.Xni)}};$h.Bg.FZ(new class{get I5t(){return h4.D5t}OZ(t){return t&&("string"!=typeof t.integration||t.integration===Za.DEFAULT||t.integration===Za.CSAI||t.integration===Za.THEO)}P5t(t,i,s){const e=new PF(t.Let,t.Ql,s);e.het(t.xe);const n=new cP(t.xe,s,t.AR,t.Cet,t.Wx,e,t.Ql);return new h4(t,i,n,s,t.Cet,t.AR)}B6(t,i,s,e){s.Tti(t,i,e)}tY(t){const i=s1(t.sources);if(!i)return;const s={integration:Za.CSAI,sources:i};"vast"===s.sources.type&&void 0===t.timeOffset?t.timeOffset=0:"vmap"===s.sources.type&&void 0!==t.timeOffset&&Si("Do not set timeOffset for VMAP ad sources. VMAP ads have their own offsets included.");const e=pl(t.timeOffset);void 0!==e&&(s.timeOffset=e);const n=pl(t.skipOffset);return void 0!==n&&(s.skipOffset=n),s}}),r(),r();var o4=class{Fj(){var t;this.z6||(null==(t=this.Xti)||t.initialize(),this.z6=!0)}get Gii(){return this.z1t}get Sri(){return this.Tri.offsetHeight}get kri(){return this.Tri.offsetWidth}get Eri(){return this.Xti}Rri(t){"linear"===t?this.z1t.style.marginTop="0px":"nonlinear"===t&&(this.z1t.style.marginTop="-45px")}be(){this.z1t.style.opacity="1",this.z1t.style.pointerEvents=""}we(){this.z1t.style.opacity="0",this.z1t.style.pointerEvents="none"}Zg(){var t;null==(t=this.Xti)||t.destroy(),this.Xti=void 0}constructor(t,i){this.Xti=void 0,this.z1t=void 0,this.qit=void 0,this.Tri=void 0,this.z6=!1,this.qit=t;const s=h.createElement("div");s.className="theoplayer-ima-wrapper",Bl(s),s.style.zIndex="10",As.Ks&&function(t,i){t.addEventListener(i,Pl)}(s,"mousedown"),i.appendChild(s);const e=h.createElement("div");e.className="theoplayer-ima",e.style.height="100%",this.Tri=e,s.appendChild(e),this.z1t=s,this.Xti=new google.ima.AdDisplayContainer(this.Tri,this.qit)}};r(),r(),r();var a4=class{get Ojt(){return this.xri.getAdId()}get g7t(){const t=this.xri.getAdPodInfo();if(void 0!==t)try{return{N8t:t.getAdPosition(),_0t:t.getMaxDuration(),Iri:t.getPodIndex(),fOt:t.getTimeOffset(),D8t:t.getTotalAds(),Pri:t.getIsBumper()}}catch(t){return}}get pqt(){return this.xri.getAdSystem()}get Cri(){return this.xri.getAdvertiserName()}get ajt(){var t;return null!=(t=this.xri.getApiFramework())?t:void 0}get Rqt(){return this.$qt.map(t=>({cjt:t.getAdSlotId(),GT:t.getContentType(),$5t:t.getContent(),Mi:t.getHeight(),Ti:t.getWidth()}))}get GT(){var t;return null!=(t=this.xri.getContentType())?t:void 0}get Xqt(){return this.xri.getCreativeId()}get rti(){return this.xri.getCreativeAdId()}get Nri(){return this.xri.getDealId()}get uD(){return this.xri.getDescription()}get ct(){return this.xri.getDuration()}get Ti(){return this.xri.getWidth()}get Mi(){return this.xri.getHeight()}get Jjt(){var t;return null!=(t=this.xri.getMediaUrl())?t:void 0}get Dri(){return this.xri.getMinSuggestedDuration()}get eti(){return this.xri.getSkipTimeOffset()}get Bri(){return this.xri.getSurveyUrl()}get dX(){return this.xri.getTitle()}get iti(){return this.xri.getTraffickingParameters()}get sti(){return this.xri.getTraffickingParametersString()}get Iqt(){return this.xri.getUniversalAdIds().map(t=>({hti:t.getAdIdRegistry(),oti:t.getAdIdValue()}))}get jti(){return this.xri.getUiElements()}get nti(){return this.xri.getVastMediaBitrate()}get $7t(){return this.xri.getVastMediaHeight()}get J7t(){return this.xri.getVastMediaWidth()}get K7t(){return this.xri.getWrapperAdIds()}get q7t(){return this.xri.getWrapperAdSystems()}get j7t(){return this.xri.getWrapperCreativeIds()}get a7t(){return this.xri.isLinear()}constructor(t){this.xri=void 0,this.$qt=void 0,this.xri=t;const i=new google.ima.CompanionAdSelectionSettings;i.resourceType=google.ima.CompanionAdSelectionSettings.ResourceType.ALL,i.creativeType=google.ima.CompanionAdSelectionSettings.CreativeType.ALL,i.sizeCriteria=google.ima.CompanionAdSelectionSettings.SizeCriteria.IGNORE,this.$qt=t.getCompanionAds(0,0,i)}};function u4(){return[google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,google.ima.AdEvent.Type.CLICK,google.ima.AdEvent.Type.DURATION_CHANGE,google.ima.AdEvent.Type.EXPANDED_CHANGED,google.ima.AdEvent.Type.STARTED,google.ima.AdEvent.Type.IMPRESSION,google.ima.AdEvent.Type.PAUSED,google.ima.AdEvent.Type.RESUMED,google.ima.AdEvent.Type.AD_PROGRESS,google.ima.AdEvent.Type.AD_BUFFERING,google.ima.AdEvent.Type.FIRST_QUARTILE,google.ima.AdEvent.Type.MIDPOINT,google.ima.AdEvent.Type.THIRD_QUARTILE,google.ima.AdEvent.Type.COMPLETE,google.ima.AdEvent.Type.USER_CLOSE,google.ima.AdEvent.Type.LINEAR_CHANGED,google.ima.AdEvent.Type.LOADED,google.ima.AdEvent.Type.AD_CAN_PLAY,google.ima.AdEvent.Type.AD_METADATA,google.ima.AdEvent.Type.AD_BREAK_READY,google.ima.AdEvent.Type.INTERACTION,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,google.ima.AdEvent.Type.SKIPPED,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,google.ima.AdEvent.Type.LOG,google.ima.AdEvent.Type.VIEWABLE_IMPRESSION,google.ima.AdEvent.Type.VOLUME_CHANGED,google.ima.AdEvent.Type.VOLUME_MUTED]}var c4=class extends fr{Vx(t){var i;null==(i=this.p0t)||i.setVolume(t)}Fx(){return this.p0t.getVolume()}C7t(){return this.p0t.getRemainingTime()}Zg(){Lr(this.qc),this.sc.mn(Gu.yn,this.Mri),this.p0t.removeEventListener(google.ima.AdEvent.Type.LOADED,this.Lri),this.p0t.removeEventListener(u4(),this.forwardAdEventListener),this.p0t.removeEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.forwardAdErrorEventListener),this.p0t.destroy()}Tn(){this.p0t.start()}Vti(){this.p0t.resume()}zx(){this.p0t.pause()}nN(){this.p0t.skip()}Kx(){this.p0t.stop()}f7t(){const t=this.p0t.getCurrentAd();if(t)return this.Ori(t)}Hti(){return this.p0t.getCuePoints()}Ori(t){let i=me(this.qc,i=>i.xri===t);return i||(i=new a4(t),this.qc.push(i)),i}tii(t){this.p0t.updateAdsRenderingSettings(v4(t))}constructor(t,i,s){super(),this.p0t=void 0,this.Xti=void 0,this.sc=void 0,this.qc=[],this.Lri=t=>{t.getAd().isLinear()?this.Xti.Rri("linear"):this.Xti.Rri("nonlinear")},this.Mri=()=>{this.p0t.resize(this.Xti.kri,this.Xti.Sri,google.ima.ViewMode.NORMAL)},this.forwardAdEventListener=t=>{const i=t.getAd(),s=function(t){return{[google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED]:jl.m9t,[google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED]:jl.p9t,[google.ima.AdEvent.Type.CLICK]:jl.w9t,[google.ima.AdEvent.Type.DURATION_CHANGE]:jl.Iw,[google.ima.AdEvent.Type.EXPANDED_CHANGED]:jl.y9t,[google.ima.AdEvent.Type.STARTED]:jl.b9t,[google.ima.AdEvent.Type.IMPRESSION]:jl.A9t,[google.ima.AdEvent.Type.PAUSED]:jl.VZ,[google.ima.AdEvent.Type.RESUMED]:jl.S9t,[google.ima.AdEvent.Type.AD_PROGRESS]:jl.T9t,[google.ima.AdEvent.Type.AD_BUFFERING]:jl.k9t,[google.ima.AdEvent.Type.FIRST_QUARTILE]:jl.E9t,[google.ima.AdEvent.Type.MIDPOINT]:jl.gQt,[google.ima.AdEvent.Type.THIRD_QUARTILE]:jl.R9t,[google.ima.AdEvent.Type.COMPLETE]:jl.mQt,[google.ima.AdEvent.Type.USER_CLOSE]:jl.x9t,[google.ima.AdEvent.Type.LINEAR_CHANGED]:jl.I9t,[google.ima.AdEvent.Type.LOADED]:jl.P9t,[google.ima.AdEvent.Type.AD_CAN_PLAY]:jl.C9t,[google.ima.AdEvent.Type.AD_METADATA]:jl.N9t,[google.ima.AdEvent.Type.AD_BREAK_READY]:jl.D9t,[google.ima.AdEvent.Type.INTERACTION]:jl.B9t,[google.ima.AdEvent.Type.ALL_ADS_COMPLETED]:jl.M9t,[google.ima.AdEvent.Type.SKIPPED]:jl.L9t,[google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED]:jl.O9t,[google.ima.AdEvent.Type.LOG]:jl.F9t,[google.ima.AdEvent.Type.VIEWABLE_IMPRESSION]:jl.V9t,[google.ima.AdEvent.Type.VOLUME_CHANGED]:jl.W9t,[google.ima.AdEvent.Type.VOLUME_MUTED]:jl.U9t}[t]}(t.type),e={type:s,date:new Date,xnt:i?this.Ori(i):void 0,$8t:_3(s,t.getAdData())};this.So(e)},this.forwardAdErrorEventListener=t=>{this.So({date:new Date,xnt:void 0,type:l3.G9t,$8t:{B7t:p3(t.getError())}})},this.p0t=t,this.Xti=i,this.sc=s,this.sc.wn(Gu.yn,this.Mri),this.p0t.init(this.Xti.kri,this.Xti.Sri,google.ima.ViewMode.NORMAL),this.p0t.addEventListener(google.ima.AdEvent.Type.LOADED,this.Lri),this.p0t.addEventListener(u4(),this.forwardAdEventListener),this.p0t.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.forwardAdErrorEventListener)}};r();var d4=class extends Kt{get Fri(){return this.Vri}get Gii(){return this.z1t}xa(){return new l4(this.Vri)}constructor(t,i){super("nii"),this.Vri=void 0,this.z1t=void 0,this.Vri=t,this.z1t=i}},l4=class extends sh{get adsManager(){return this.Vri}constructor(t){super("adsmanagerloaded"),this.Vri=void 0,this.Vri=t}},f4=class extends fr{Wti(){var t;null==(t=this.Uti)||t.contentComplete()}async a9t(t,i,s){if(this.Wri)throw new m("Only one ImaAdsRequest can be made at a time.");if(!this.Uri.Eri)throw new m("AdDisplayContainer is not initialized.");this.Uti=new google.ima.AdsLoader(this.Uri.Eri),this.Uti.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoadedListener),this.Uti.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdsManagerErrorListener),this.Wri=new gs,this.Gri=i,this.Xri=s;const e=new google.ima.AdsRequest;return t.A6t?e.adTagUrl=t.A6t:t.S6t&&(e.adsResponse=t.S6t),e.linearAdSlotWidth=t.g6t,e.linearAdSlotHeight=t.m6t,e.nonLinearAdSlotWidth=t.p6t,e.nonLinearAdSlotHeight=t.w6t,e.contentDuration=t.k6t,e.setAdWillAutoPlay(t.y6t),e.setAdWillPlayMuted(t.b6t),t.T6t&&(e.omidAccessModeRules=t.T6t),this.Uti.requestAds(e),this.Wri.Yy}Zg(){var t;void 0!==this.Uti&&(this.Uti.removeEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoadedListener),this.Uti.removeEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdsManagerErrorListener),this.Uti.destroy(),this.Uti=void 0),null==(t=this.Wri)||t.zy("AdsLoader destroyed"),this.Wri=void 0}constructor(t,i){super(),this.Uti=void 0,this.sc=void 0,this.Uri=void 0,this.Wri=void 0,this.Gri=void 0,this.Xri=void 0,this.onAdsManagerLoadedListener=t=>{if(this.Gri&&this.Xri&&this.Wri){var i;const s=v4(this.Xri),e=this.Gri,n=t.getAdsManager({get currentTime(){return e.OR},get duration(){return e.ct}},s),r=new c4(n,this.Uri,this.sc);this.So(new d4(n,this.Uri.Gii)),null==(i=this.Wri)||i.Hy(r),this.Wri=void 0}},this.onAdsManagerErrorListener=t=>{var i;const s={Ey:t.getError().getMessage(),B8t:t.getError().getVastErrorCode(),KQt:t.getError().getErrorCode(),Kp:g3(t.getError().getType()),M8t:void 0};null==(i=this.Wri)||i.zy(s),this.Wri=void 0},this.sc=i,this.Uri=t}};function v4(t){const i=new google.ima.AdsRenderingSettings;return i.enablePreloading=t.Qti,t.jti&&(i.uiElements=t.jti),i.mimeTypes=t.qti,void 0!==t.$ti&&(i.playAdsAfterTime=t.$ti),void 0!==t.Jti&&(i.loadVideoTimeout=t.Jti),void 0!==t.tti&&(i.bitrate=t.tti),void 0!==t.$ti&&(i.playAdsAfterTime=t.$ti),i.restoreCustomPlaybackStateOnAdBreakComplete=!0,i}r();var _4=class extends fr{get OR(){return this.oa.Rx?this.Zri:this.oa.FR()}get ct(){return this.oa.Nd()}get ix(){return this.oa.ix}get Ox(){return this.oa.Ox}hr(){this.Zri=0}constructor(t){super(),this.Zri=void 0,this.oa=void 0,this.oa=t,this.Zri=this.oa.FR(),this.oa.wn(d.vy,()=>{this.oa.Rx||(this.Zri=this.oa.FR()),this.So(new Tc(this.OR,void 0))})}};V3.Bg.registerWebImaAdPlayerConstructor(function(t,i,s){L3(s);const e=O3(s)?t.Zx():void 0,n=new o4(e,t.xe),r=new f4(n,t.Wu),h=new _4(t);return new F3(t,i,s,t.Det,n,r,h)}),r(),r(),r();var Xr=class extends ic{get Hri(){return this.oa===this.Yet?this.j3t:this.Yet}gr(t,i,s,e,n){(n||!e.ux||e.GR)&&this.oa.ux&&this.oa.Yx()}WR(t,i){}MR(t){}zri(t,i){const s=t-this.j3t.Yri;return super.WR(s,i)}Kri(t){return super.MR(t)}LR(){return this.Yet.bt}nu(){return this.Yet.nu()}Nd(){return this.Yet.Nd()}Ex(){const t=ZT.jn(this.Yet.Ex()).Dy(this.j3t.Yri);if(this.qri())return t._s();const i=ZT.jn(this.j3t.Ex());let s=i;return M6(this.Yet)||(s=t.LM(i)),s=s.Mn(ZT.$M(0,this.FR())),s._s()}FR(){return this.i5t(super.FR())}i5t(t){return this.j3t.jri?this.j3t.jri:this.oa===this.j3t?this.j3t.Qri+t:this.j3t.Yri+t}DR(){return this.Jri(super.FR())}Jri(t){return this.j3t.$ri?this.j3t.$ri:this.oa===this.j3t&&this.j3t.thi?new Date(this.j3t.thi.getTime()+1e3*t):this.Yet.NR}PR(){const t=ZT.jn(this.Yet.PR()).Dy(this.j3t.Yri);if(this.qri())return t._s();const i=ZT.jn(this.j3t.PR());if(t.An(t.V-1)<i.Tn(0))return i._s();return t.LM(i)._s()}iI(t){switch(t.type){case d.vy:return this.So(new Tc(this.i5t(t.currentTime),t.currentProgramDateTime)),!0;case d.Yw:return this.So(new Ut(this.i5t(t.currentTime))),!0;case d.uo:return this.So(new Ts(this.i5t(t.currentTime))),!0;case d.zw:return this.So(new Pi(this.i5t(t.currentTime))),!0;case d.Nw:return this.So(new Be(this.i5t(t.currentTime))),!0;case d.Jw:return this.So(new ul(this.i5t(t.currentTime))),!0;case d.Qw:return this.So(new Wi(this.i5t(t.currentTime))),!0;case d.Kw:return this.So(new Fs(this.i5t(t.currentTime),t.playbackRate)),!0;case d._y:return this.ihi?(this.So(new q(this.i5t(t.currentTime),t.volume)),!0):(this.ihi=!0,!0);case d.Pw:return this.So(new Jt(this.i5t(t.currentTime),t.readyState)),!0;case Vo.pM:return this.So(new vo(this.i5t(t.currentTime),t.readyState)),!0;case Vo.wM:return this.So(new lt(this.i5t(t.currentTime),t.readyState)),!0;case Vo.yM:return this.So(new ot(this.i5t(t.currentTime),t.readyState)),!0;case Vo.bM:return this.So(new ut(this.i5t(t.currentTime),t.readyState)),!0;case Vo.bI:return this.So(new ca(this.i5t(t.currentTime),t.readyState)),!0;case Vo.AM:return this.So(new lx(this.i5t(t.currentTime))),!0;case Vo.SM:return this.So(new $n(this.i5t(t.currentTime))),!0;case d.Cw:return this.So(new Bn(this.i5t(t.currentTime),t.initDataType,t.initData)),!0}return super.iI(t)}zx(){this.Yet.zx(),this.j3t.zx()}async kn(){await super.kn(!0)}constructor(t,i,s){super(s),this.Yet=void 0,this.j3t=void 0,this.ihi=!0,this.Yet=t,this.j3t=i}};function g4(t,i){i.ix=t.ix,i.Ox=t.Ox}r();var m4=class extends Xr{gr(t,i,s,e,n){super.gr(t,i,s,e,n),this.Hri.zx();this.shi(i,s).style.display="block"}mr(t,i,s){this.shi(i,s).style.display="none"}constructor(t,i,s){super(t,i,s)}},p4=class extends m4{qri(){return!0}shi(t,i){return t}ehi(t,i){return i}WR(t,i){return super.zri(t,i)}MR(t){return super.Kri(t)}constructor(t,i){super(t,i,t)}},w4=class extends Xr{qri(){return!1}gr(t,i,s,e,n){super.gr(t,i,s,e,n),this.ihi=!1,this.oa.nhi(),i.style.display="block"}mr(t,i,s){this.oa.rhi(),i.style.display="none"}Nd(){return this.oa.Nd()}constructor(t,i){super(t,i,i)}},y4=class extends m4{qri(){return!1}shi(t,i){return i}ehi(t,i){return t}gr(t,i,s,e,n){super.gr(t,i,s,e,n);for(const t of[i,s])t.style.transition=""}mr(t,i,s){super.mr(t,i,s)}Yx(){super.Yx(),As.z_&&(this.Hri.ix=!0,this.Hri.Yx())}constructor(t,i){super(t,i,i)}};function b4(t){return t instanceof w4}r();var A4=class extends Xr{qri(){return!0}gr(t,i,s,e,n){super.gr(t,i,s,e,n),g4(this.oa,this.Hri),this.Hri.ix=!0,this.hhi=this.Yet.nt.CI.filter(t=>t.Hk===Z.Kn);for(const t of this.hhi)t.Hk=Z.Nh;t.style.backgroundImage="url('"+this.ohi+"')",t.style.backgroundSize="contain",t.style.backgroundPosition="center",i.style.display="block",i.style.width="45%",i.style.transform="scale("+100/45+")",i.style.transformOrigin="left center",s.style.right="0",s.style.display="block",s.style.width="45%",s.style.transformOrigin="right center",s.style.transform="scale(0)",s.getBoundingClientRect(),s.style.transition="transform 1s ease-in-out",s.style.transform="scale(1) translateX(-"+2.5/45*100+"%)",i.style.transition="transform 1s ease-in-out",i.style.transform="scale(1) translateX("+2.5/45*100+"%)"}mr(t,i,s){var e;i.style.width="100%",i.style.transform="scale(0.45) translateX("+2.5/45*100+"%)",i.style.transformOrigin="left center",i.style.transition="",i.getBoundingClientRect(),i.style.transform="",i.style.transition="transform 1s ease-in-out",i.addEventListener("transitionend",this.ahi),s.style.transform="scale(0)",s.addEventListener("transitionend",this.uhi);for(const t of null!=(e=this.hhi)?e:[])t.Hk=Z.Kn;this.hhi=void 0}ZR(){return this.Yet.ZR()||this.j3t.ZR()}zR(){return this.Yet.zR()||this.j3t.zR()}Tx(){return _.min(this.Yet.Sx,this.j3t.Sx)}Yx(){this.Yet.Yx(),this.j3t.Yx()}constructor(t,i,s){super(t,i,i),this.ohi=void 0,this.hhi=void 0,this.ahi=t=>{const i=t.target;i.removeEventListener("transitionend",this.ahi),i.style.transform="",i.style.transition="",i.style.transformOrigin=""},this.uhi=t=>{const i=t.target;i.removeEventListener("transitionend",this.uhi),i.style.display="none",i.style.width="100%",i.style.right="",i.style.transition="",i.style.transform="",i.style.transformOrigin=""},this.ohi=s}};r();var S4=class extends Xr{gr(t,i,s,e,n){super.gr(t,i,s,e,n),t.style.backgroundImage="url('"+this.ohi+"')",t.style.backgroundSize="contain",t.style.backgroundPosition="center",this.Hri.zx();const r=this.shi(i,s);r.style.display="block",r.getBoundingClientRect();for(const t of[i,s])t.style.transform="\n                translate(-50%, -50%)\n                scale(calc(43/60))\n                translate(calc(50% + 100%/30), calc(50% + 100%/30))\n            ",t.style.transition="transform 1s ease-in-out"}constructor(t,i,s,e){super(t,i,s),this.ohi=void 0,this.dhi=t=>{const i=t.target;i.removeEventListener("transitionend",this.dhi),i.style.transition=""},this.ohi=e}},T4=class extends S4{qri(){return!0}shi(t,i){return t}ehi(t,i){return i}mr(t,i,s){const e=this.shi(i,s);e.style.display="",e.style.transform="",e.addEventListener("transitionend",this.dhi)}constructor(t,i,s){super(t,i,t,s)}},k4=class extends S4{qri(){return!1}shi(t,i){return i}ehi(t,i){return t}mr(t,i,s){const e=this.shi(i,s);e.style.display="none",e.style.transform="",e.style.transition="";const n=this.ehi(i,s);n.style.display="",n.getBoundingClientRect(),n.style.transform="",n.addEventListener("transitionend",this.dhi)}Yx(){super.Yx(),As.z_&&(this.Hri.ix=!0,this.Hri.Yx())}constructor(t,i,s){super(t,i,i,s)}};r(),r(),r();var E4=class extends ic{gr(t,i){}mr(t){}},R4=class extends E4{WR(t,i){}},x4=class extends E4{WR(t,i){}gr(t,i){i.style.backgroundImage="url('"+this.ohi+"')",i.style.backgroundSize="contain",i.style.backgroundPosition="center",t.style.transition="transform 1s ease-in-out",t.style.transform="\n          translate(-50%, -50%)\n          scale(calc(43/60))\n          translate(calc(50% + 100%/30), calc(50% + 100%/30))\n        "}mr(t){t.style.transform="",t.addEventListener("transitionend",this.dhi)}constructor(t,i){super(t),this.ohi=void 0,this.dhi=t=>{const i=t.target;i.removeEventListener("transitionend",this.dhi),i.style.transition="transform 1s ease-in-out"},this.ohi=i}};r();var I4=class extends Kt{xa(){return new P4(this.interstitial.pnt())}constructor(t){super("lhi"),this.interstitial=void 0,this.interstitial=t}},P4=class extends sh{constructor(t){super("interstitialbegin"),this.interstitial=void 0,this.interstitial=t}};function C4(t){return{get id(){return t.o},get duration(){return t.ct},get startTime(){return t.kO},get type(){return"adbreak"},get layout(){return function(t){switch(t){case an.SINGLE:return"single";case an.DOUBLE:return"double";case an.LSHAPE_CONTENT:case an.LSHAPE_AD:return"l-shape"}}(t.F3t)},get ads(){return t.Jc.map(t=>t.pnt())},get backdropUri(){return t.fhi}}}r(),r(),r(),r();var N4=function(t){return t.image="image",t}({}),D4=function(t){return t.png="png",t.svg="svg",t}({}),B4=class extends y2{get Kp(){return"overlay"}get wjt(){return this.vhi}get _hi(){return this.ghi}er(t){var i,s;this.ghi=null!=(i=t.imageUrl)?i:this.ghi,this.vhi=null!=(s=t.clickThrough)?s:this.vhi,super.er(t)}pnt(){var t;return null!=(t=this.hu)?t:this.hu=function(t){return{get type(){return"overlay"},get id(){return t.o},get duration(){return t.ct},get startTime(){return t.kO},get clickThrough(){return t.wjt},get imageUrl(){return t._hi},get position(){return function(t){return{get top(){return t.X7},get bottom(){return t.G7},get left(){return t.U7},get right(){return t.W7}}}(t.mo)},get size(){return function(t){return{get width(){return t.Ti},get height(){return t.Mi}}}(t.Vy)}}}(this)}constructor(t){super(t),this.hu=void 0,this.mhi=void 0,this.mo=void 0,this.Vy=void 0,this.phi=void 0,this.whi=void 0,this.BQt=void 0,this.vhi=void 0,this.ghi=void 0,this.mhi=t.Kp,this.mo=t.mo,this.Vy=t.Vy,this.phi=t.phi,this.whi=t.whi,this.BQt=t.BQt,this.vhi=t.yhi}};r();var M4=class extends y2{get Kp(){return"adbreak"}get Jc(){return this.qc}er(t){var i;t.ad&&this.qc.push(t.ad),this.fhi=null!=(i=t.backdropUri)?i:this.fhi,super.er(t)}pnt(){var t;return null!=(t=this.hu)?t:this.hu=C4(this)}constructor(t){super(t),this.hu=void 0,this.qc=[],this.eyt=void 0,this.F3t=void 0,this.bhi=void 0,this.Ahi=void 0,this.Shi=void 0,this.fhi=void 0,this.eyt=t.eyt,this.F3t=t.F3t||an.SINGLE,this.bhi=t.bhi,this.Ahi=t.Ahi,this.fhi=t.Thi,this.Shi=t.Shi}},L4="com.theoplayer.theoads.interstitial",O4="com.theoplayer.theoads.overlay",F4=class{get khi(){return this.Ehi}Rhi(t){this.xhi=new EventSource(t),this.xhi.addEventListener("adbreak",this.Ihi),this.xhi.addEventListener("overlay",this.Phi),this.xhi.addEventListener("streaminfo",this.Chi)}Nhi(t){if(!Ft(this.Dhi,t)){this.Dhi.push(t);for(const i of t.CI)this.Bhi(i);t.wn(Lu.nI,this.Wn),t.wn(Lu.hI,this.Gn)}}Mhi(t){if(Ft(this.Dhi,t)){is(this.Dhi,t),t.mn(Lu.nI,this.Wn),t.mn(Lu.hI,this.Gn);for(const i of t.CI)this.Lhi(i)}}Bhi(t){!this.Ohi&&function(t){return t.Lt===D.WV&&t.Kp===hr.DATE_RANGE}(t)&&this.Fhi!==t?this.Vhi(t):this.Ohi&&function(t){return t.Lt===D.WV&&t.Kp===hr.ID3}(t)&&this.Whi!==t&&this.Uhi(t)}Lhi(t){this.Fhi===t?this.Vhi(void 0):this.Whi===t&&this.Uhi(void 0)}Vhi(t){const i=this.Fhi;if(void 0!==i){if(i.L)for(const t of i.L.CI)this.Ghi(t);i.mn(M.aI,this.Xhi),i.mn(M.lI,this.Zhi),i.mn(M.vI,this.Hhi),i.mn(M.cI,this.zhi),i.Hk=Z.$I}if(this.Fhi=t,void 0!==t){if(t.L)for(const i of t.L.CI)this.Yhi(i);t.wn(M.aI,this.Xhi),t.wn(M.lI,this.Zhi),t.wn(M.vI,this.Hhi),t.wn(M.cI,this.zhi),t.Hk=Z.$I}}Uhi(t){const i=this.Whi;if(void 0!==i){if(i.L)for(const t of i.L.CI)this.Ghi(t);i.mn(M.aI,this.Khi),i.mn(M.vI,this.Hhi),i.mn(M.cI,this.zhi),i.Hk=Z.$I}if(this.Whi=t,void 0!==t){if(t.L)for(const i of t.L.CI)this.qhi(i);t.wn(M.aI,this.Khi),t.wn(M.vI,this.Hhi),t.wn(M.cI,this.zhi),t.Hk=Z.$I}}jhi(t){try{var i,s;const e=JSON.parse(t.data),n=e.networkCode,r=null==(i=e.assetKeys)?void 0:i[0];this.Jhi.Qhi(n,r),null==(s=this.xhi)||s.removeEventListener("streaminfo",this.Chi)}catch(t){Zd.fp("Error parsing the Server sent stream info",t)}}$hi(t){const i=this.Jhi.NR;if(void 0!==i)try{const n=JSON.parse(t.data);var s;const r=null!=(s=n.podDuration)?s:n.adBreakDuration;if(void 0===r)return void Zd.fp("Tried to schedule an ad break without knowing the duration");const h=(Date.parse(n.startDate)-i.getTime())/1e3;if(h<=-r)return;const o="theo-ads://dai.break/?d="+r,a=this.Jhi.FR()+h,u=n.networkCode,c=n.assetKey,d=n.podId?x(n.podId):void 0,l=this.toi(an[n.layout]);var e;const f=new M4({o:n.id,kO:a,eyt:null!=(e=n.assetURI)?e:o,F3t:l,bhi:u,Ahi:c,PLt:r,_3t:d,Thi:n.backdropURI,Ivt:n.startPTS,Shi:n.eabnVersion});this.z3t(f,void 0)}catch(t){Zd.fp("Error parsing the Server sent event",t)}else Zd.fp("Tried to schedule an ad break without knowing the Program Date Time of the player")}ioi(t){const i=this.Jhi.NR;if(void 0!==i)try{var s;const e=JSON.parse(t.data),n=e.duration;if(void 0===n)return void Zd.fp("Tried to schedule an overlay without knowing the duration");const r=(Date.parse(e.startDate)-i.getTime())/1e3;if(r<=-n)return;const h=this.Jhi.FR()+r,o=N4[e.type],a=new B4({o:e.id,Kp:o||N4.image,kO:h,PLt:n,mo:U4(e.position),Vy:G4(e.size),phi:e.opacity,whi:V4(e.gamProperties),BQt:null==(s=e.resourceURI)?void 0:s.map(t=>W4(t)),yhi:e.clickThroughURI});this.z3t(a,void 0)}catch(t){Zd.fp(t)}else Zd.fp("Tried to schedule an overlay without knowing the Program Date Time of the player")}Yhi(t){if((t.xLt===L4||t.xLt===O4)&&t.CLt["X-ASSET-URI"])switch(t.xLt){case O4:this.soi(t);break;case L4:this.eoi(t)}}soi(t){try{var i;if(void 0===t.ct&&void 0===t.PLt)return;const s=atob(t.CLt["X-COM-THEOPLAYER-THEOADS-OVERLAY-PROPERTIES"]),e=JSON.parse(s),n=N4[e.type],r=this.Jhi.noi(t.kO),h=isFinite(t.EO)?this.Jhi.noi(t.EO):void 0,o=new B4({o:t.o,Kp:n||N4.image,kO:r,EO:h,ct:t.ct,PLt:t.PLt,mo:U4(e.position),Vy:G4(e.size),phi:e.opacity,whi:V4(e.gamProperties),BQt:null==(i=e.resourceURI)?void 0:i.map(t=>W4(t)),yhi:e.clickThroughURI});this.z3t(o,t)}catch(t){Zd.fp(t)}}eoi(t){const i=t.CLt["X-RESUME-OFFSET"];if(void 0===t.ct&&void 0===t.PLt&&void 0===i)return;const s=this.roi||t.CLt["X-ASSET-URI"],e=Zd.Dh(s);var n;const r=null!=(n=e.searchParams.get("n"))?n:void 0;var h;const o=null!=(h=e.searchParams.get("k"))?h:void 0,a=this.Jhi.noi(t.kO),u=isFinite(t.EO)?this.Jhi.noi(t.EO):void 0,c=this.toi(an[t.CLt["X-COM-THEOPLAYER-THEOADS-LAYOUT"]]);let d;D2(s)&&(d=function(t){const i=t.split("?")[1],s={},e=new URLSearchParams(i);return s.d=Number(e.get("d"))||void 0,s.k=e.get("k")||void 0,s.n=e.get("n")||void 0,s.p=Number(e.get("p"))||void 0,s}(s));const l=new M4({o:t.o,kO:a,eyt:s,F3t:c,bhi:r,Ahi:o,Thi:t.CLt["X-COM-THEOPLAYER-THEOADS-BACKDROP"],EO:u,ct:t.ct,PLt:t.PLt,_3t:null==d?void 0:d.p,l3t:void 0!==i?Number(i):void 0});this.z3t(l,t),this.hoi=l}toi(t){return t===an.LSHAPE_CONTENT?t:this.ooi||t}qhi(t){const i=t.U;if(!function(t){return"GEO"===t.id||"GEOB"===t.id}(i)||!function(t){return"Anvatos"===t.description&&"application/json"===t.mimeType}(i))return;const s=pr(new DataView(i.data),new J),e=new wr(s),n=e.get("type");if("cue"===n){let i=Number(e.get("duration"))/1e3||void 0;const s=new wr(e.get("payload")),n=Number(s.get("dur"))||void 0,r=Number(s.get("s_bd"))||void 0;if(void 0!==n?i=n:void 0!==r&&(i=r/10),!i)return void 0;const h="theo-ads://dai.break/?d="+i,o=Number(e.get("pts"))||void 0,a=this.Jhi.noi(t.kO),u=this.toi(an.SINGLE),c=new M4({o:this.roi||t.o,kO:a,eyt:h,F3t:u,PLt:i,Ivt:o});this.z3t(c,t)}else if("cue_end"===n){const i=this.hoi;i&&i.er({ct:this.Jhi.noi(t.kO)-i.kO})}}aoi(t){const i=this.uoi.get(t.qI);i&&this.Jhi.coi(i.kO)}doi(t){for(const i of this.Ehi)if(t.o===i.o&&t.Kp===i.Kp)return!0;return!1}loi(t){const i=[];if(0===this.Jhi.Ex().length)return Zd.lp("Seekable is undefined."),!1;const s=this.Jhi.Ex().start(0);for(const e of this.foi)if(e.h3t<s)i.push(e);else if(t.o===e.o&&t.Kp===e.Kp)return!0;for(const t of i)is(this.foi,t);return!1}z3t(t,i){var s;const e=t.kO+(null!=(s=t.ct)?s:1/0);this.doi(t)||this.loi(t)||this.Jhi.FR()>=e||(this.Ehi.push(t),i?this.uoi.set(i.qI,t):this.foi.push(t),this.Jhi.z3t(t))}voi(t){const i=this.uoi.get(t.qI);if(void 0===i)return;const s=t.CLt["X-RESUME-OFFSET"],e=isFinite(t.EO)?this.Jhi.noi(t.EO):void 0;i.er({ct:t.ct,EO:e,l3t:void 0!==s?Number(s):void 0})}Ghi(t){this._oi(t)}_oi(t){void 0!==this.uoi.get(t.qI)&&this.uoi.delete(t.qI)}goi(t){t.forEach(t=>this.Y3t(t))}Y3t(t){is(this.Ehi,t)}hr(){var t,i,s,e;this.hoi=void 0,this.Vhi(void 0),this.Uhi(void 0);for(const t of this.Dhi.slice())this.Mhi(t);Lr(this.Dhi),Lr(this.Ehi),Lr(this.foi),this.uoi.clear(),null==(t=this.xhi)||t.removeEventListener("adbreak",this.Ihi),null==(i=this.xhi)||i.removeEventListener("overlay",this.Phi),null==(s=this.xhi)||s.removeEventListener("streaminfo",this.Chi),null==(e=this.xhi)||e.close(),this.xhi=void 0}kn(){this.hr()}constructor(t){this.Jhi=void 0,this.Ohi=!1,this.ooi=void 0,this.roi=void 0,this.Ehi=[],this.foi=[],this.uoi=Zs(),this.hoi=void 0,this.Dhi=[],this.Fhi=void 0,this.Whi=void 0,this.xhi=void 0,this.Wn=t=>{this.Bhi(t.Ht)},this.Gn=t=>{this.Lhi(t.Ht)},this.Xhi=t=>{this.Yhi(t.SO)},this.Khi=t=>{this.qhi(t.SO)},this.Hhi=t=>{this.aoi(t.SO)},this.zhi=t=>{this.Ghi(t.SO)},this.Zhi=t=>{this.voi(t.SO)},this.Ihi=t=>{this.$hi(t)},this.Phi=t=>{this.ioi(t)},this.Chi=t=>{this.jhi(t)},this.Jhi=t}};function V4(t){if(!t)return;let i=t.sz.default;return As.Ks&&t.sz.phone?i=t.sz.phone:As.og&&t.sz.tv&&(i=t.sz.tv),{moi:t.iu,poi:i}}function W4(t){const i=D4[t.type];let s=t.default;return As.Ks&&t.phone?s=t.phone:As.og&&t.tv&&(s=t.tv),{Kp:i,eyt:s}}function U4(t){let i,s,e,n;return t.top&&t.top>=0&&t.top<=100?i=t.top:t.bottom&&t.bottom>=0&&t.bottom<=100?s=t.bottom:i=10,t.left&&t.left>=0&&t.left<=100?e=t.left:t.right&&t.right>=0&&t.right<=100?n=t.right:e=10,{X7:i,G7:s,U7:e,W7:n}}function G4(t){let i,s;return i=t.width&&t.width>=0&&t.width<=100?t.width:10,s=t.height&&t.height>=0&&t.height<=100?t.height:10,{Ti:i,Mi:s}}r();var X4=class extends fr{get woi(){return this.oa.woi.map(t=>t.pnt())}get yoi(){return this.oa.yoi.map(t=>t.pnt())}boi(t){this.oa.boi(t)}get Ca(){var t;return null!=(t=this.hu)?t:this.hu=function(t){return{get currentInterstitials(){return t.woi},get scheduledInterstitials(){return t.yoi},replaceAdTagParameters(i){t.boi(i)},addEventListener(i,s){t.wn(i,s)},removeEventListener(i,s){t.mn(i,s)}}}(this)}constructor(t){super(),this.oa=void 0,this.hu=void 0,this.oa=t}};r();var Z4=class{o5t(t){this.Aoi=t}get a5t(){return this.r5t}get X5t(){var t;return void 0!==(null==(t=this.Aoi)?void 0:t.wnt)}get D5t(){return Qc.hnt}get mnt(){var t;return(null==(t=this.Aoi)?void 0:t.U3t)?[this.Aoi.U3t]:[]}get wnt(){var t,i;return null!=(i=null==(t=this.Aoi)?void 0:t.wnt)?i:null}get ynt(){return this.Aoi?vl(this.Aoi.w0t,t=>{var i;const s=t.Jc;if(t===(null==(i=this.Aoi)?void 0:i.wnt)&&void 0!==this.Aoi.U3t){const t=s.indexOf(this.Aoi.U3t);if(t>=0)return s.slice(t+1)}return t.mx?[]:s}):[]}get bnt(){return this.Aoi?this.Aoi.w0t.filter(t=>{var i;return t===(null==(i=this.Aoi)?void 0:i.wnt)||!t.mx}):[]}nN(){}Ant(t){}Tnt(t){}kn(){return this.Aoi=void 0,Promise.resolve()}constructor(){this.r5t=new sc,this.Aoi=void 0}};r(),r(),r(),r();var Un=class extends sh{constructor(t,i,s){super(t,new Date),this.Soi=void 0,this.xnt=void 0,this.Soi=i,this.xnt=s}},Bs=function(t){return t.LOADED="DAILoaded",t.AD_BREAK_STARTED="DAIAdBreakStarted",t.AD_BREAK_ENDED="DAIAdBreakEnded",t.AD_PERIOD_STARTED="DAIAdPeriodStarted",t.AD_PERIOD_ENDED="DAIAdPeriodEnded",t.AD_PROGRESS="DAIAdProgress",t.CUEPOINTS_CHANGED="DAICuePointsChanged",t.CLICK="DAIClick",t.ERROR="DAIError",t.STARTED="DAIStarted",t.FIRST_QUARTILE="DAIFirstQuartile",t.MIDPOINT="DAIMidpoint",t.STREAM_INITIALIZED="DAIStreamInitialized",t.THIRD_QUARTILE="DAIThirdQuartile",t.COMPLETE="DAIComplete",t}({}),H4=class extends Un{constructor(t,i){super("DAILoaded",t,i)}},z4=class extends Un{constructor(t,i){super("DAIAdBreakStarted",t,i)}},Y4=class extends Un{constructor(t,i){super("DAIAdBreakEnded",t,i)}},K4=class extends Un{constructor(t,i){super("DAIAdProgress",t,i)}},q4=class extends Un{constructor(t,i){super("DAICuePointsChanged",t,i)}},j4=class extends Un{constructor(t,i){super("DAIClick",t,i)}},Q4=class extends Un{constructor(t,i){super("DAIError",t,i)}},J4=class extends Un{constructor(t,i){super("DAIStarted",t,i)}},$4=class extends Un{constructor(t,i){super("DAIFirstQuartile",t,i)}},t6=class extends Un{constructor(t,i){super("DAIMidpoint",t,i)}},i6=class extends Un{constructor(t,i){super("DAIStreamInitialized",t,i)}},s6=class extends Un{constructor(t,i){super("DAIThirdQuartile",t,i)}},e6=class extends Un{constructor(t,i){super("DAIComplete",t,i)}};var n6=class extends fr{replaceAdTagParameters(t){return this.Toi.replaceAdTagParameters(null!=t?t:null)}koi(t){return this.Toi.contentTimeForStreamTime(t)}Eoi(t){return this.Toi.streamTimeForContentTime(t)}wUt(t,i){const e=function(t){return"vod"===t.availabilityType?new s.google.ima.dai.api.VODStreamRequest(Jr({},r6(t),{contentSourceId:t.contentSourceID,videoId:t.videoID})):new s.google.ima.dai.api.LiveStreamRequest(Jr({},r6(t),{assetKey:t.assetKey}))}(t);t.enableNonce&&(e.enableNonce=!0),this.Toi.requestStream(e)}hr(){this.Roi(!1),this.Toi.reset()}kn(){this.Vo();const t=google.ima.dai.api.StreamEvent.Type;this.Toi.removeEventListener(t.AD_BREAK_STARTED,this.xoi),this.Toi.removeEventListener(t.AD_PROGRESS,this.Ioi),this.Toi.removeEventListener(t.CLICK,this.p1t),this.Toi.removeEventListener(t.COMPLETE,this.Poi),this.Toi.removeEventListener(t.CUEPOINTS_CHANGED,this.Coi),this.Toi.removeEventListener(t.ERROR,this.Ts),this.Toi.removeEventListener(t.FIRST_QUARTILE,this.Noi),this.Toi.removeEventListener(t.LOADED,this.Doi),this.Toi.removeEventListener(t.MIDPOINT,this.Boi),this.Toi.removeEventListener(t.STARTED,this.Moi),this.Toi.removeEventListener(t.STREAM_INITIALIZED,this.Loi),this.Toi.removeEventListener(t.THIRD_QUARTILE,this.Ooi),this.Toi.removeEventListener(t.AD_BREAK_ENDED,this.Foi),this.hr(),this.Voi&&je(this.Voi)}Woi(t){this.Toi.onTimedMetadata(t)}Uoi(t,i,s){this.Toi.processMetadata(t,i,s)}Goi(t){const i=this.Toi.previousCuePointForStreamTime(t);if(i)return{EO:i.end,kO:i.start,mx:i.played}}Xoi(t,i){const s=this.Goi(t);if(!s)return;const e=t>i&&s.EO>i,n=s.EO>t&&s.kO<=t;return s.mx||!e&&!n?void 0:s.kO}Roi(t){this.K1t&&(this.K1t.style.display=t?"block":"none")}constructor(t,i,s){super(),this.Toi=void 0,this.K1t=void 0,this.Voi=void 0,this.xoi=void 0,this.Foi=void 0,this.Ioi=void 0,this.p1t=void 0,this.Poi=void 0,this.Coi=void 0,this.Ts=void 0,this.Noi=void 0,this.Doi=void 0,this.Boi=void 0,this.Moi=void 0,this.Loi=void 0,this.Ooi=void 0,this.Toi=t,this.K1t=i,this.Voi=s,this.xoi=t=>{this.Roi(!0);const i=h6(t),s=a6(t);this.So(new z4(i,s))},this.Foi=t=>{this.Roi(!1);const i=h6(t),s=a6(t);this.So(new Y4(i,s))},this.Ioi=t=>{const i=h6(t),s=a6(t);this.So(new K4(i,s))},this.p1t=t=>{const i=h6(t),s=a6(t);this.So(new j4(i,s))},this.Poi=t=>{const i=h6(t),s=a6(t);this.So(new e6(i,s))},this.Coi=t=>{const i=h6(t),s=a6(t);this.So(new q4(i,s))},this.Ts=t=>{const i=h6(t),s=a6(t);this.So(new Q4(i,s))},this.Noi=t=>{const i=h6(t),s=a6(t);this.So(new $4(i,s))},this.Doi=t=>{const i=h6(t),s=a6(t);this.So(new H4(i,s))},this.Boi=t=>{const i=h6(t),s=a6(t);this.So(new t6(i,s))},this.Moi=t=>{const i=h6(t),s=a6(t);this.So(new J4(i,s))},this.Loi=t=>{const i=h6(t),s=a6(t);this.So(new i6(i,s))},this.Ooi=t=>{const i=h6(t),s=a6(t);this.So(new s6(i,s))},this.K1t&&(this.K1t.style.display="none",this.Toi.setClickElement(this.K1t));const e=google.ima.dai.api.StreamEvent.Type;this.Toi.addEventListener(e.AD_BREAK_STARTED,this.xoi),this.Toi.addEventListener(e.AD_PROGRESS,this.Ioi),this.Toi.addEventListener(e.CLICK,this.p1t),this.Toi.addEventListener(e.COMPLETE,this.Poi),this.Toi.addEventListener(e.CUEPOINTS_CHANGED,this.Coi),this.Toi.addEventListener(e.ERROR,this.Ts),this.Toi.addEventListener(e.FIRST_QUARTILE,this.Noi),this.Toi.addEventListener(e.LOADED,this.Doi),this.Toi.addEventListener(e.MIDPOINT,this.Boi),this.Toi.addEventListener(e.STARTED,this.Moi),this.Toi.addEventListener(e.STREAM_INITIALIZED,this.Loi),this.Toi.addEventListener(e.THIRD_QUARTILE,this.Ooi),this.Toi.addEventListener(e.AD_BREAK_ENDED,this.Foi)}};function r6(t){const i=google.ima.dai.api.StreamRequest.StreamFormat;var s;return{apiKey:t.apiKey,authToken:t.authToken,format:"dash"===t.format?i.DASH:i.HLS,networkCode:t.networkCode,streamActivityMonitorId:t.streamActivityMonitorID,adTagParameters:t.adTagParameters,omidAccessModeRules:null!=(s=w3(t.omidAccessModeRules))?s:{}}}function h6(t){const i=t.getStreamData(),s=i.adProgressData;let e;s&&(e={C8t:s.adBreakDuration,Zoi:s.duration,N8t:s.adPosition,OR:s.currentTime,ct:s.duration,D8t:s.totalAds});return{Hoi:e,zoi:(i.cuepoints||[]).map(t=>({kO:t.start,EO:t.end,mx:t.played})),Yoi:i.errorMessage||void 0,Koi:i.manifestFormat||void 0,qoi:i.streamId||void 0,joi:(i.subtitles||[]).map(t=>({Qoi:t.webvtt,Joi:t.ttml,bs:t.language})),Yu:i.url}}function o6(t){return{cjt:t.getAdSlotId(),$5t:t.getContent(),GT:t.getContentType(),Mi:t.getHeight(),Ti:t.getWidth()}}function a6(t){const i=t.getAd();if(!i)return;const s=i.getAdPodInfo(),e=i.getCompanionAds().map(o6);return{Ojt:i.getAdId(),g7t:{N8t:s.getAdPosition(),_0t:s.getMaxDuration(),Iri:s.getPodIndex(),fOt:s.getTimeOffset(),D8t:s.getTotalAds()},pqt:i.getAdSystem(),Cri:i.getAdvertiserName(),ajt:i.getApiFramework(),Rqt:e,Xqt:i.getCreativeId(),rti:i.getCreativeAdId(),Nri:i.getDealId(),uD:i.getDescription(),ct:i.getDuration(),dX:i.getTitle(),$oi:i.getUniversalAdIdRegistry(),tai:i.getUniversalAdIdValue(),$7t:i.getVastMediaHeight(),J7t:i.getVastMediaWidth(),K7t:i.getWrapperAdIds(),q7t:i.getWrapperAdSystems(),j7t:i.getWrapperCreativeIds()}}function u6(){const t=h.body.lastElementChild;if(t instanceof HTMLIFrameElement&&"Advertisement"===t.title)return t}r();var c6=class extends T2{N0t(){return this.iai.getAdSystem()}M0t(){return this.od.k3t.eyt}get o(){return this.iai.getAdId()}get ct(){return this.iai.getDuration()}get wjt(){var t,i;return null==(i=this.iai)||null==(t=i.ad)?void 0:t.clickThroughUrl}get Xqt(){return this.iai.getCreativeId()}get qjt(){return this.iai.getSkipTimeOffset()}constructor(t,i){super(t),this.iai=void 0,this.iai=i}};r();var d6=class extends T2{constructor(t){super(t),this.L3t=!0,this.qb=t.g0t}},eh="ott_placement",l6="urn:google:dai:2018",f6=class extends R2{get eai(){return ae.GOOGLE}X3t(t){if(t){const t=this.Toi;this.Toi=this.nai,this.nai=t;const i=this.rai;this.rai=this.hai,this.hai=i}for(const t of this.j3t.nt.CI)this.oai(t)}async NG(t,i,e){if(!t||!i||t===this.aai&&i===this.uai)return;if(void 0===this.Toi){var n,r;if(void 0===(null==(r=s.google)||null==(n=r.ima)?void 0:n.dai))throw new m("IMA DAI SDK missing for THEOads");this.Toi=new google.ima.dai.api.StreamManager(this.j3t.xe.querySelector("video"),this.cai)}this.aai=t,this.uai=i;const h=this.lai(!1),o=this.lai(!0);this.fai=$s(Promise.all([h,o]),e),await this.fai}lai(t){let i=this.Toi;if(t&&(i=this.nai),!i)return Promise.resolve();this.vai(i),i.reset();const s=new google.ima.dai.api.PodStreamRequest;s.networkCode=this.aai,s.customAssetKey=this.uai,s.adTagParameters=this._ai,this.gai&&(s.streamActivityMonitorId=this.gai),s.format="hls";const e=this.mai(i,[google.ima.dai.api.StreamEvent.Type.STREAM_INITIALIZED,google.ima.dai.api.StreamEvent.Type.ERROR]).then(s=>{if(s.type===google.ima.dai.api.StreamEvent.Type.ERROR)throw new m("DAI stream request failed");t?this.hai=s.getStreamData():this.rai=s.getStreamData(),this.pai(i)});return i.requestStream(s),e}mai(t,i,s){return new Promise((e,n)=>{if(s&&s.Ug)return n(new us);const r=t=>{o(),e(t)},h=()=>{o(),n(new us)},o=()=>{for(const s of i)t.removeEventListener(s,r);s&&s.Yg(h)};for(const s of i)t.addEventListener(s,r);s&&s.zg(h)})}boi(t){var i,s;void 0===t&&(t={}),this._ai=this.wai(t),this.yai=!t[eh],null==(i=this.Toi)||i.replaceAdTagParameters(this._ai),null==(s=this.nai)||s.replaceAdTagParameters(this._ai)}bai(t){var i,s;if(!this.yai)return;const e=this._ai[eh],n=v6(t);e!==n&&(this._ai[eh]=n,null==(i=this.Toi)||i.replaceAdTagParameters(this._ai),null==(s=this.nai)||s.replaceAdTagParameters(this._ai))}wai(t){const i=Fa(t);return t[eh]||(i[eh]=v6(an.SINGLE)),i}async Aai(t){var i,s;return(null==(i=this.n5t)?void 0:i._3t)&&!S(this.n5t._3t)?this.n5t._3t:this.Sai&&(null==(s=this.n5t)?void 0:s.Ivt)?await lo(()=>this.Tai(),t,4,500,5e3):void 0}async Tai(){const t=this.Sai+"/"+this.aai+"/"+this.uai+"/"+this.n5t.Ivt+".json",i=new F({Yu:t,ck:Bi.CT,Fk:ci.GET,Vk:1e3});let s;try{s=await this.j3t.AR.dk(i)}catch(t){throw new rs(Cu.NETWORK,De.UNKNOWN_AD_RESPONSE,"The ad's PodId could not be loaded.")}if(!Mr(s))throw new rs(Cu.NETWORK,De.UNKNOWN_ERROR,"Something went wrong while requesting JSON from server.");const e=await s.hk();if(e)return e.podid}async kai(t,i,s,e){void 0===e&&(e=!1);const n=await this.Eai(t,i,s);return this.s5t({sources:{src:n}},s,void 0,e)}async Eai(t,i,s){var e;this.n5t=t;const n=t.bhi,r=t.Ahi;this.bai(t.F3t),await this.NG(n,r,s);const h=Zd.Dh(t.eyt),o=Number(h.searchParams.get("d")),a=_.floor(1e3*_.min(o,t.h3t-i)),u=await this.Aai(s);if(!u)throw new m("Something went wrong with retrieving the PodID from the server.");(null==(e=this.rai)?void 0:e.streamId)||await this.fai;const c=Zd.Dh("https://dai.google.com/linear/pods/v1/hls/network/"+this.aai+"/custom_asset/"+this.uai);"V2"===t.Shi?c.pathname+="/ad_break_id/"+u+".m3u8":c.pathname+="/pod/"+u+".m3u8";let d=this.rai.streamId;if(this.W3t){const t=this.j3t.Rai();void 0!==t&&void 0===this.nai&&(this.nai=new google.ima.dai.api.StreamManager(t.xe.querySelector("video"),this.cai),await $s(this.lai(!0),s)),this.hai&&(d=this.hai.streamId)}return c.searchParams.set("stream_id",d),c.searchParams.set("pd",String(a)),c.toString()}q3t(){this.j3t.nt.wn(Lu.nI,this.Wn),super.q3t()}t5t(){super.t5t(),this.j3t.nt.mn(Lu.nI,this.Wn)}oai(t){if(t.Lt===D.WV&&!(t.Kp!==hr.ID3&&t.Kp!==hr.EVENT_STREAM||t.Kp===hr.EVENT_STREAM&&t.tP!==l6)){if(t.wn(M.aI,this.xai),t.wn(M.cI,this.zhi),t.L)for(const i of t.L.CI)this.xai(new _M(i));t.Hk=Z.$I,this.Iai=t}}pai(t){t&&(t.addEventListener(google.ima.dai.api.StreamEvent.Type.ERROR,this.Pai),t.addEventListener(google.ima.dai.api.StreamEvent.Type.CLICK,this.Pai),t.addEventListener(google.ima.dai.api.StreamEvent.Type.STARTED,this.Pai),t.addEventListener(google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,this.Pai),t.addEventListener(google.ima.dai.api.StreamEvent.Type.MIDPOINT,this.Pai),t.addEventListener(google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,this.Pai),t.addEventListener(google.ima.dai.api.StreamEvent.Type.COMPLETE,this.Pai),t.addEventListener(google.ima.dai.api.StreamEvent.Type.AD_PERIOD_STARTED,this.Pai),t.addEventListener(google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,this.Pai),t.addEventListener(google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,this.Pai),t.addEventListener(google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,this.Pai),t.addEventListener(google.ima.dai.api.StreamEvent.Type.RESUMED,this.Pai))}vai(t){t&&(t.removeEventListener(google.ima.dai.api.StreamEvent.Type.ERROR,this.Pai),t.removeEventListener(google.ima.dai.api.StreamEvent.Type.CLICK,this.Pai),t.removeEventListener(google.ima.dai.api.StreamEvent.Type.STARTED,this.Pai),t.removeEventListener(google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,this.Pai),t.removeEventListener(google.ima.dai.api.StreamEvent.Type.MIDPOINT,this.Pai),t.removeEventListener(google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,this.Pai),t.removeEventListener(google.ima.dai.api.StreamEvent.Type.COMPLETE,this.Pai),t.removeEventListener(google.ima.dai.api.StreamEvent.Type.AD_PERIOD_STARTED,this.Pai),t.removeEventListener(google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,this.Pai),t.removeEventListener(google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,this.Pai),t.removeEventListener(google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,this.Pai),t.removeEventListener(google.ima.dai.api.StreamEvent.Type.RESUMED,this.Pai))}Bd(t){super.Bd(t),this.Cai=-1,this.Nai=void 0}async hr(){var t,i;await super.hr(),this.vai(this.Toi),this.vai(this.nai),null==(t=this.Toi)||t.reset(),this.Toi=void 0,null==(i=this.nai)||i.reset(),this.nai=void 0,this.rai=void 0,this.hai=void 0,this.fai=void 0,this.gai=void 0,this.uai=void 0,this.aai=void 0,this.yai=!0,this.Cai=-1,this.Nai=void 0;const s=u6();void 0!==s&&je(s)}async kn(){var t;await super.kn(),null==(t=this.Iai)||t.kn()}constructor(t,i,s,e,n={},r,h){super(t,i,e),this.Toi=void 0,this.rai=void 0,this.nai=void 0,this.hai=void 0,this.fai=void 0,this.Iai=void 0,this.aai=void 0,this.uai=void 0,this._ai=void 0,this.yai=!0,this.gai=void 0,this.Sai=void 0,this.cai=void 0,this.Cai=-1,this.Nai=void 0,this.Dai=void 0,this.Wn=t=>{const i=t.Ht;this.oai(i)},this.xai=t=>{t.SO.wn(ye.XL,this.Bai)},this.zhi=t=>{t.SO.mn(ye.XL,this.Bai)},this.Bai=t=>{var i,s;if(this.rai)if((null==(i=this.Iai)?void 0:i.Kp)===hr.ID3){const i=t.SO.U;var e;if(nx(i))if(this.Cai<=t.SO.kO&&this.Nai!==i.text)this.Cai=t.SO.kO,this.Nai=i.text,null==(e=this.Toi)||e.processMetadata("ID3",i.text,t.SO.kO)}else if((null==(s=this.Iai)?void 0:s.Kp)===hr.EVENT_STREAM){var n;const i=t.SO.U;null==(n=this.Toi)||n.processMetadata(l6,i,t.SO.kO)}},this.Pai=t=>{switch(this.X0t&&(this.X0t.g0t=this.j3t.Nd()-this.j3t.FR()),t.type){case google.ima.dai.api.StreamEvent.Type.ERROR:this.r5t.So(new Wh(Cu.GENERAL));break;case google.ima.dai.api.StreamEvent.Type.AD_PERIOD_STARTED:if(this.W3t)break;if(this.W3t=this.n5t,this.n5t=void 0,this.X0t=this.K3t(this.W3t),!this.X0t){Zd.fp("Started an ad break without having a current adbreak to our knowledge");break}this.r5t.So(new vV(this.X0t)),this.Dai=Zd.Og(this.Mai,250);break;case google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED:Zd.Lg(this.Dai);break;case google.ima.dai.api.StreamEvent.Type.STARTED:{var i;const s=t.getAd();this.D0t=new c6(this.X0t,s),null==(i=this.W3t)||i.er({ad:this.D0t}),this.r5t.So(new te(this.D0t,this.i5t(this.j3t.FR())));break}case google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE:this.r5t.So(new ke(this.D0t,this.i5t(this.j3t.FR())));break;case google.ima.dai.api.StreamEvent.Type.MIDPOINT:this.r5t.So(new Ks(this.D0t,this.i5t(this.j3t.FR())));break;case google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE:this.r5t.So(new Ji(this.D0t,this.i5t(this.j3t.FR())));break;case google.ima.dai.api.StreamEvent.Type.COMPLETE:this.r5t.So(new He(this.D0t,this.i5t(this.j3t.FR()))),this.D0t=void 0;break;case google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED:if(!this.X0t)break;this.X0t.g0t>1&&this.Mai()}},this.Mai=()=>{var t;this.D0t=new d6(this.X0t),null==(t=this.W3t)||t.er({ad:this.D0t}),this.r5t.So(new te(this.D0t,this.i5t(this.j3t.FR())))},this.cai=s,this._ai=this.wai(n),this.yai=!n[eh],this.gai=r,this.Sai=h}};function v6(t){switch(t){case an.DOUBLE:return"3";case an.SINGLE:return"0";case an.LSHAPE_AD:case an.LSHAPE_CONTENT:return"4"}}var _6=class{get woi(){return this.Lai}get Oai(){return this.Fai}get Vai(){return this._ai}set Vai(t){this._ai=t}async Wai(t){this.Lai.push(t),this.Fai.style.display="";const i=h.createElement("div");i.className="theoplayer-theoads-overlay",i.style.display="",this.Uai.set(t.o,i);const s=h.createElement("a"),e=await this.Gai(t);if(e.clickThroughURI&&(this.Fai.style.zIndex="11",s.href=e.clickThroughURI,s.target="Xu",s.setAttribute("rel","noopener"),s.addEventListener("mousedown",this.$ii),s.addEventListener("touchend",this.$ii)),t.mhi===N4.image&&(s.style.backgroundImage="url("+e.resourceURI+")",s.style.backgroundSize="contain",s.style.backgroundPosition="center",s.style.backgroundRepeat="no-repeat",e.impressionURI)){const t=h.createElement("img");t.src=e.impressionURI,t.style.display="none",s.appendChild(t)}Bl(s),function(t,i){t.style.position="absolute";const s=i.mo;s.U7&&(t.style.left=s.U7+"%");s.W7&&(t.style.right=s.W7+"%");s.X7&&(t.style.top=s.X7+"%");s.G7&&(t.style.bottom=s.G7+"%");const e=i.Vy;e.Ti&&(t.style.width=e.Ti+"%");e.Mi&&(t.style.height=e.Mi+"%");i.phi&&i.phi>0&&i.phi<=100&&(t.style.opacity=""+i.phi/100)}(i,t),i.appendChild(s),this.Fai.appendChild(i)}Xai(t){const i=this.Uai.get(t.o);i&&(this.Fai.contains(i)&&this.Fai.removeChild(i),this.Uai.delete(t.o),0===this.Uai.size&&(this.Fai.style.display="none"),is(this.Lai,t))}Zai(){this.Uai.forEach((t,i)=>{this.Fai.contains(t)&&this.Fai.removeChild(t)}),this.Uai.clear(),this.Lai=[]}async Hai(t){if(!t)return;const i=this.zai(t);return i?await this.Yai(i,this.rW):void 0}async Gai(t){const i={resourceURI:""},s=await this.Hai(t.whi);if(s)i.resourceURI=s.image,i.impressionURI=s.impression;else if(t.BQt){const s=me(t.BQt,t=>t.Kp===D4.svg);s&&(i.resourceURI=s.eyt);const e=me(t.BQt,t=>t.Kp===D4.png);e&&(i.resourceURI=e.eyt)}var e;return i.clickThroughURI=null!=(e=null==s?void 0:s.clickThrough)?e:t.wjt,t.er({imageUrl:i.resourceURI,clickThrough:i.clickThroughURI}),i}zai(t){const i=new wr(this._ai);return i.set("iu",t.moi),i.set("sz",t.poi),i.set("c",String(this.Kai)),i.get(eh)||i.set(eh,"5"),"https://securepubads.g.doubleclick.net/gampad/adx?"+i.toString()}async Yai(t,i){const s=new F({Yu:t,ck:Bi.CT,Fk:ci.GET});try{const t=await i.dk(s);return await t.hk()}catch(t){throw new rs(Cu.NETWORK,De.UNKNOWN_AD_RESPONSE,"The ad source could not be loaded.",t)}}hr(){this.Zai(),this.Fai.style.display="none"}constructor(t,i){this.oa=void 0,this._ai=void 0,this.Lai=[],this.rW=void 0,this.Fai=void 0,this.Uai=Se(),this.Kai=(new Date).getTime(),this.gn=void 0,this.stt=t=>{C2(this.Fai,this.oa.Mx,this.oa.Nx,t.width,t.height)},this.Izt=()=>{C2(this.Fai,this.oa.Mx,this.oa.Nx,this.gn.Eu,this.gn.Iu)},this.$ii=t=>{t.stopPropagation()},this.oa=t,this.rW=Zd.AR;const s=h.createElement("div");s.style.display="none",s.className="theoads-image-overlays-container",Bl(s),i.appendChild(s),this.Fai=s,this.gn=new un(i),this.gn._n(),this.gn.wn(Gu.yn,this.stt),this.oa.wn(d.jw,this.Izt)}};r();var g6=class extends sh{constructor(t){super("addinterstitial"),this.interstitial=void 0,this.interstitial=t}};r();var m6=class extends Kt{xa(){return new p6(this.interstitial.pnt())}constructor(t){super("qai"),this.interstitial=void 0,this.interstitial=t}},p6=class extends sh{constructor(t){super("interstitialend"),this.interstitial=void 0,this.interstitial=t}};r();var w6=class extends Kt{xa(){return new y6(this.interstitial.pnt(),this.Ey)}constructor(t,i){super("jai"),this.interstitial=void 0,this.Ey=void 0,this.interstitial=t,this.Ey=i}},y6=class extends sh{constructor(t,i){super("interstitialerror"),this.interstitial=void 0,this.message=void 0,this.interstitial=t,this.message=i}};r();var b6=class extends R2{get eai(){return ae.DEFAULT}NG(t,i,s){return Promise.resolve()}boi(t){}kai(t,i,s,e){void 0===e&&(e=!1),this.n5t=t;const n=this.H3t(t,i);return this.s5t({sources:{src:t.eyt}},s,n,e)}async Eai(t,i,s){return this.n5t=t,t.eyt}q3t(){super.q3t(),this.j3t.wn(Vo.SM,this.Qai)}t5t(){this.j3t.mn(Vo.SM,this.Qai),super.t5t()}bd(t){if(!this.W3t)return void Zd.lp("Got timeupdate without a current interstitial");const i=this.i5t(t.currentTime),s=this.W3t.a3t;this.W3t.c3t(i);const e=this.W3t.a3t;s<.25&&e>=.25?this.r5t.So(new ke(this.D0t,i)):s<.5&&e>.5?this.r5t.So(new Ks(this.D0t,i)):s<.75&&e>=.75?this.r5t.So(new Ji(this.D0t,i)):this.W3t.mx&&this.Bd(i)}Bd(t){super.Bd(t),this.s8=!1}async hr(){await super.hr(),this.s8=!1}constructor(...t){super(...t),this.s8=!1,this.Qai=t=>{!this.s8&&this.n5t&&(this.s8=!0,this.e5t(this.i5t(t.currentTime)))},this.$3t=t=>{this.Bd(this.i5t(t.currentTime))}}};r();var A6=class extends m2{Rai(){}async s5t(t,i,s,e){await this.oa.Ta(t,e),this.Jai(this.oa,i,s)}Jai(t,i,s){As.ru&&As.z_&&(t.Yx(),t.zx()),i&&t.WR(i),s&&t.Yx()}$ai(t){}constructor(t){super(t)}};r(),r();var S6=Promise,T6=class extends R2{get eai(){return ae.COMPANION}NG(t,i,s){return S6.resolve()}boi(t){}kai(t,i,s,e){return void 0===e&&(e=!1),this.n5t=t,this.H3t(t,i),S6.resolve()}async s5t(t,i,s,e){return S6.resolve()}async Eai(t,i,s){return this.n5t=t,t.eyt}Z3t(t){this.DRt=t-this.j3t.FR(),this.e5t(t)}bd(t){if(!this.W3t)return void Zd.lp("Got timeupdate without a current interstitial");const i=this.i5t(t.currentTime);this.W3t.c3t(i),this.W3t.mx&&this.Bd(i)}i5t(t){return this.DRt+t}constructor(...t){super(...t),this.DRt=0,this.$3t=t=>{this.Bd(this.i5t(t.currentTime))}}},k6=class extends m2{get woi(){var t;return[null==(t=this.Aoi)?void 0:t.V3t,...this.tui.woi].filter(Y)}get yoi(){return this.iui.khi}Qet(){return this.Yet.Jc}snt(){return this.sui.Ca}get Vai(){var t,i,s;return null!=(s=null!=(i=this._ai)?i:null==(t=this.eui)?void 0:t.adTagParameters)?s:{}}UR(){return this.Ls}jet(){return this.Yet.Cet}ZR(){var t;return null!=(t=this.CZ)?t:super.ZR()}zR(){var t;return null!=(t=this.$G)?t:super.zR()}Hx(){this.Yet.Hx()}noi(t){return t}async Ta(t,i){if(await this.Rmt(),await super.Ta(t,i),void 0===t||void 0===t.ads)return;const s=me(t.ads,B2);void 0!==s&&(this.nui(),this.rui(),this.hui(),this.eui=s,this.oui=s.backdropLShape,this.tui.Vai=s.adTagParameters,this.iui.ooi=function(t){switch(t){case"single":return an.SINGLE;case"l-shape":return an.LSHAPE_AD;case"double":return an.DOUBLE;case"single-if-mobile":return As.Ks?an.SINGLE:void 0;default:return}}(this.eui.overrideLayout),this.iui.roi=this.eui.overrideAdSrc,this.iui.Ohi=this.eui.useId3,this.Yet.wn(Vo.yM,this.Pd),this.Wu.wn(Gu.yn,this.stt),this.wn(d.jw,this.Izt),this.Yet.wn(Vo.SM,this.LH))}async aui(t){this.uui();const i=void 0===t.networkCode||void 0===t.customAssetKey?ae.DEFAULT:ae.GOOGLE;await this.cui(i,t.networkCode,t.customAssetKey),t.sseEndpoint&&this.iui.Rhi(t.sseEndpoint)}rui(){qd(this.Ls,this.dui),Bl(this.lui),Bl(this.dui),this.lui.appendChild(this.dui),this.Ls.appendChild(this.lui)}fui(){qd(this.dui,this.Ls),Ll(this.dui),Ll(this.lui),je(this.dui),je(this.lui)}async cui(t,i,s){var e,n,r;const h=this.x5t(),o=this.cai;if(!h||!o)return;if(t===(null==(e=this.Aoi)?void 0:e.eai))return;var a;const u=null!=(a=null==(n=this.Aoi)?void 0:n.w0t)?a:[];switch(await(null==(r=this.Aoi)?void 0:r.hr()),t){case ae.GOOGLE:var c,d,l;this.Aoi=new f6(h,this.vui,o,u,this.Vai,null==(c=this.eui)?void 0:c.streamActivityMonitorId,null==(d=this.eui)?void 0:d.retrievePodIdURI),await(null==(l=this.Aoi)?void 0:l.NG(i,s));break;case ae.COMPANION:this.Aoi=new T6(this.Yet,this.vui,u);break;case ae.DEFAULT:default:this.Aoi=new b6(h,this.vui,u)}}async Qhi(t,i){var s;this._ui||void 0===t||void 0===i||(null==(s=this.Aoi)?void 0:s.eai)!==ae.GOOGLE&&await this.cui(ae.GOOGLE,t,i)}XX(t){void 0===this.zR()&&(this.$G=t,this.CZ=xs(t),this.So(new $e(t)))}uui(){this.Yet.wn(d.vy,this.gui),this.Yet.wn(d.Jw,this.OH)}mui(){this.Yet.mn(d.vy,this.gui),this.Yet.mn(d.Jw,this.OH)}pui(){var t,i;this.vui.a5t.wn("Pnt",this.wui),null==(t=this.Aoi)||t.wn(E2.AD_ENDED,this.wui),null==(i=this.x5t())||i.wn(sa.ma,this.yui)}bui(){var t,i;this.vui.a5t.mn("Pnt",this.wui),null==(t=this.Aoi)||t.wn(E2.AD_ENDED,this.wui),null==(i=this.x5t())||i.mn(sa.ma,this.yui)}Aui(t){const i=()=>{this.Sui=void 0};this.Sui=t().then(i).catch(i)}Tui(t,i){this.sui.So(new w6(t,i).Ca),t.mx=!0,this.Sui&&(this._ui=void 0)}async kui(){var t;null==(t=this.Aoi)||t.q3t(),this.Eui()}async Rui(){this.Eui()}async $2t(){var t;this.xui(),null==(t=this.Aoi)||t.t5t(),this.Y3t(this.Iui),this.Iui=void 0}Eui(){this.xui(),this.Iui=this._ui,this._ui=void 0,this.Pui=void 0,this.Cui=void 0}xui(){const t=this.oa.Nx,i=this.oa.Mx;t===this.Nui&&i===this.Dui||(this.Nui=t,this.Dui=i,this.So(new es))}z3t(t){var i;E6(t)&&(null==(i=this.Aoi)||i.z3t(t),this.coi(this.FR()));t.wn("r3t",this.Bui),this.sui.So(new g6(t.pnt()))}Y3t(t){if(Ft(this.iui.khi,t)){var i;if(this.iui.Y3t(t),E6(t))null==(i=this.Aoi)||i.Y3t(t);else R6(t)&&(this.tui.Xai(t),this.Mui.delete(t.o));t.mn("r3t",this.Bui),this.sui.So(new m6(t).Ca)}}coi(t){this.Lui(t),this.Oui()}Lui(t){this.Fui(t),this.Vui(t),this.Wui(t)}Fui(t){if(void 0!==this.Sui)return;let i;const s=[];for(const e of this.iui.khi.filter(E6))e.mx?s.push(e):e!==this.Iui&&(t>=e.kO+5||this.Iui&&e.kO+5<this.Iui.h3t?(e.mx=!0,s.push(e)):void 0!==i&&i.kO<e.kO||(i=e));for(const t of s)this.Y3t(t);this._ui!==i&&(this.Uui(),this._ui=i)}Uui(){var t;if(void 0!==this._ui){var i;const t=void 0!==this.Iui;null==(i=this.x5t())||i.$ai(t)}null==(t=this.Gui)||t.Jg(),this.Pui=void 0,this.Cui=void 0}Xui(t,i){let s=!1;const e=ZT.jn(this.PR()).jM(i,5);void 0!==e&&(s=e.An(0)>=t.kO);const n=t.h3t,r=i>=t.kO&&(void 0===n||i<n);return s&&!r}Vui(t){if(void 0===this._ui||void 0!==this.Pui)return;const i=this._ui;E6(i)&&void 0===this.Sui&&this.Xui(i,t)&&(this.Gui=new ui,this.Pui=Ce(this.kai(i,t,this.Gui.jg),this.Gui).catch(t=>{hc(t)||this.Tui(i,"Could not load the ad break: "+t.message)}))}Wui(t){if(void 0===this._ui||void 0!==this.Cui||void 0!==this.Iui)return;const i=this._ui.h3t;var s;t>=this._ui.kO&&(void 0===i||t<i)&&(this.Cui=null==(s=this.Pui)?void 0:s.then(()=>{this.Aui(()=>this.kui())}))}boi(t){var i,s,e;this._ai=t,null==(s=this.Aoi)||s.boi(null!=(e=null!=t?t:null==(i=this.eui)?void 0:i.adTagParameters)?e:{}),this.tui.Vai=t}Oui(){const t=this.FR(),i=[];this.Mui.forEach(s=>{t>=s.kO&&(void 0===s.h3t||t<s.h3t)||i.push(s)}),i.forEach(t=>{this.tui.Xai(t),this.Mui.delete(t.o)});for(const i of this.iui.khi.filter(R6)){const s=i.h3t;if(void 0!==s&&t>=s)continue;const e=i.kO,n=i.kO+i.ct;t>=e&&t<=n&&!this.Mui.has(i.o)&&(this.tui.Wai(i).catch(t=>{this.sui.So(new w6(i,"Could not load the overlay.").Ca)}),this.sui.So(new I4(i).Ca),this.Mui.set(i.o,i))}}Zui(){return void 0!==this.Iui&&void 0!==this._ui&&we(this.Iui.h3t,this._ui.kO,5)}async Rmt(){var t,i;this.$G=void 0,this.CZ=void 0,this.eui=void 0,this.Hui=!1,this.zui=!0,this.Yui=NaN,this.Dui=NaN,this.Nui=NaN,this.Iui=void 0,null==(t=this.Gui)||t.Jg(),this.Pui=void 0,this.Cui=void 0,this._ui=void 0,this.Sui=void 0,await(null==(i=this.Aoi)?void 0:i.hr()),this.Aoi=void 0,this.iui.hr(),this.tui.hr(),this.Mui.clear(),this.Wu.mn(Gu.yn,this.stt),this.oa.mn(d.jw,this.Izt),this.Yet.mn(Vo.yM,this.Pd),this.Yet.mn(Vo.SM,this.LH),this.mui(),this.bui(),this.fui(),this.Kui&&Zd.Lg(this.Kui),this.Kui=void 0}async Kx(){await this.Rmt(),await super.Kx()}async kn(){var t;await this.Kx().catch(ol),this.iui.kn(),await(null==(t=this.Aoi)?void 0:t.kn()),await super.kn()}iI(t){switch(t.type){case d.Uw:case d.Rw:case Vo.bM:return!this.zui;case Vo.yM:return!this.zui||(this.zui=!1,!1);case d.Iw:{const t=this.Nd();return t!==this.Yui&&(this.Yui=t,this.So(new ur(t))),!0}case d.jw:return this.xui(),!0;case sa.ma:return void 0!==this.Iui}return super.iI(t)}constructor(t){var i;super(t),this.Yet=void 0,this.lui=void 0,this.Ls=void 0,this.dui=void 0,this.cai=void 0,this.$G=void 0,this.CZ=void 0,this.eui=void 0,this.oui=void 0,this.sui=void 0,this.Aoi=void 0,this.vui=void 0,this._ai=void 0,this.Iui=void 0,this._ui=void 0,this.Pui=void 0,this.Gui=void 0,this.Cui=void 0,this.Sui=void 0,this.iui=void 0,this.tui=void 0,this.Mui=Se(),this.zui=!0,this.Yui=NaN,this.Dui=NaN,this.Nui=NaN,this.Kui=void 0,this.Hui=!1,this.qui=!0,this.LH=async()=>{this.Yet.mn(Vo.SM,this.LH),this.eui&&(this.eui.initializationDelay?this.Kui=Zd.Og(async()=>{this.eui&&await this.aui(this.eui)},1e3*this.eui.initializationDelay):await this.aui(this.eui))},this.Pd=()=>{this.Yet.mn(Vo.yM,this.Pd),this.iui.Nhi(this.oa.nt)},this.nui=async()=>{try{await this.Uet.RY([Ge.THEOADS])}catch(t){await this.Kx().catch(ol),this.XX(vb(t,Ne.LICENSE_INVALID_FEATURE))}},this.stt=t=>{C2(this.lui,this.oa.Mx,this.oa.Nx,t.width,t.height)},this.Izt=()=>{C2(this.lui,this.oa.Mx,this.oa.Nx,this.Wu.Eu,this.Wu.Iu)},this.gui=()=>{this.Lui(this.FR()),this.Oui()},this.OH=()=>{this.Lui(this.FR()),this.Oui()},this.wui=async()=>{if(this.Zui()){if(this.Cui)return;this.Cui=this.Pui,await this.Cui,this.Aui(()=>this.Rui())}else this.Aui(()=>this.$2t())},this.yui=t=>(this.Tui(this.Iui,"Error playing the current adbreak: "+t.error),this.Aui(()=>this.$2t())),this.Bui=t=>{this.sui.So(t.Ca)},this.Yet=new A6(t),this.Ls=t.xe,this.lui=function(){const t=h.createElement("div");return fi(t,"theo-ads-sgai-container"),t}(),this.dui=function(){const t=h.createElement("div");return fi(t,"theo-ads-sgai-content-player"),t}(),this.sui=new X4(this),this.vui=new Z4,null==(i=this.Yet.Jc)||i.knt(this.vui),this.iui=new F4(this),this.tui=new _6(this.Yet,this.dui)}};function E6(t){return"adbreak"===t.Kp}function R6(t){return"overlay"===t.Kp}var x6=class extends k6{Nd(){var t;return null!=(t=this.qb)?t:super.Nd()}nu(){var t;return null!=(t=this.Ac)?t:super.nu()}FR(){return this.noi(super.FR())}DR(){return this.jui?new Date(this.jui.getTime()+dn(this.Yet.FR())):super.DR()}PR(){const t=super.PR();return ZT.jn(t).Dy(this.Qui)._s()}Ex(){const t=super.Ex();return ZT.jn(t).Dy(this.Qui)._s()}noi(t){return t+this.Qui}async Ta(t,i){await super.Ta(t,i),this.eui&&(this.Ac=t,this.Jui=new E4(this.Yet),this.Jui.gr(this.Yet.xe,this.Yet.xe.parentElement),this.$L(this.Jui))}hui(){}rui(){super.rui(),this.cai=x2(this.lui)}uui(){super.uui(),this.$ui()}mui(){super.mui(),this.tci()}$ui(){this.Yet.wn(d.Iw,this.Ezt),this.Yet.wn(Vo.SM,this.OW)}tci(){this.Yet.mn(d.Iw,this.Ezt),this.Yet.mn(Vo.SM,this.OW)}x5t(){return this.Yet}WR(t,i){this.ici=!0,super.WR(t,i)}Yx(){super.Yx(),this.So(new Ts(this.FR())),this.qui=!0,this.sci=!1}zx(){this.sci=!0,super.zx()}async kai(t,i,s){var e;const n=N2(t);if(await this.cui(n,t.bhi,t.Ahi),this.eci=await(null==(e=this.Aoi)?void 0:e.Eai(t,i,s)),n===ae.COMPANION)return;const r=new Q5(this.uRt,this.nci),h=new l5(this.uRt.lRt,r,"temporary");this.rci=h.uei(bc(bc({sources:{src:this.eci}})),J5({amount:30,bandwidth:bu.Bg._G()||this.Cet.Wj}),"temporary"),this.hci.Jg(),this.hci=new ui;this.nci.Rst(this.rci,this.uRt,"temporary").mi(this.hci.jg).catch(ol)}aci(t,i){switch(t){case an.LSHAPE_CONTENT:case an.LSHAPE_AD:return new x4(this.Yet,i);case an.SINGLE:default:return new R4(this.Yet)}}async uci(t){var i,s,e,n,r;null==(i=this.Gui)||i.Jg(),this.Gui=new ui;const h=N2(t);await this.cui(h,t.bhi,t.Ahi),null==(s=this.Jui)||s.mr(this.Yet.xe),(null==(e=this.Aoi)?void 0:e.eai)!==ae.COMPANION&&(this.Hui=!0,this.Qui=this.FR(),this.jui=this.DR(),this.Yet.wn(Vo.SM,this.OW)),this.sui.So(new I4(t).Ca),await(null==(n=this.Aoi)?void 0:n.s5t({sources:{src:this.eci}},this.Gui.jg,void 0,!0)),this.Jui=this.aci(t.F3t,this.oui),this.n3t(this.Jui),this.Jui.gr(this.xe,this.Yet.xe.parentElement),null==(r=this.Aoi)||r.Z3t(this.FR())}async kui(){var t;if(void 0!==this._ui&&void 0!==this.eci)return this.tci(),this.bZ=this.vx,await this.uci(this._ui),this.pui(),(null==(t=this.Aoi)?void 0:t.eai)!==ae.COMPANION&&(this.cci=!1),super.kui()}async Rui(){return this.Y3t(this.Iui),void 0===this._ui?this.$2t():(await this.uci(this._ui),super.Rui())}async $2t(){var t,i,s,e;if(this.Iui){var n;if(null==(t=this.rci)||t.vS(),this.rci=void 0,this.bui(),(null==(i=this.Aoi)?void 0:i.eai)!==ae.COMPANION&&(this.Hui=!0,this.ihi=!1,this.Qui=this.FR(),this.jui=this.DR(),this.iui.Mhi(this.Yet.nt),this.Yet.wn(Vo.yM,this.dci),this.Yet.wn(Vo.yM,this.Pd),this.Yet.wn(Vo.SM,this.OW),await this.Yet.Ta(this.Ac,(new ui).jg)),null==(s=this.Jui)||s.mr(this.Yet.xe),this.Jui=new E4(this.Yet),this.Jui.gr(this.Yet.xe,this.Yet.xe.parentElement),this.n3t(this.Jui),(null==(e=this.Aoi)?void 0:e.eai)!==ae.COMPANION)this.vx=null!=(n=this.bZ)?n:1,this.Yet.Yx();return this.cci=!0,this.$ui(),super.$2t()}}async Rmt(){var t;this.Jui=void 0,this.qb=void 0,this.Qui=0,this.eci=void 0,this.bZ=void 0,this.jui=void 0,this.cci=!0,this.Hui=!1,this.qui=!0,this.sci=!0,this.hci.Jg(),this.hci=new ui,null==(t=this.rci)||t.vS(),this.rci=void 0,this.Yet.mn(Vo.yM,this.dci),await super.Rmt()}iI(t){if(void 0!==this.Jui)switch(t.type){case d.uo:return!0;case d.zw:return!this.sci||(this.sci=!1,this.So(new Pi(this.noi(t.currentTime))),!0);case Vo.SM:return!this.qui||(this.qui=!1,this.So(new $n(this.noi(t.currentTime))),!0);case Vo.AM:return this.Hui||(this.qui=!0,this.So(new lx(this.noi(t.currentTime)))),!0;case d.Qw:return this.Hui&&!this.ici||(this.ici=!1,this.So(new Wi(this.noi(t.currentTime)))),!0;case d.Jw:return this.Hui&&!this.ici||this.So(new ul(this.noi(t.currentTime))),!0;case d.Nw:return!this.cci||(this.So(new Be(this.noi(t.currentTime))),!0);case d.vy:return this.So(new Tc(this.noi(t.currentTime),t.currentProgramDateTime)),!0;case d.Yw:return this.So(new Ut(this.noi(t.currentTime))),!0;case d.Kw:return this.So(new Fs(this.noi(t.currentTime),t.playbackRate)),!0;case d._y:return this.ihi?(this.So(new q(this.noi(t.currentTime),t.volume)),!0):(this.ihi=!0,!0);case d.Pw:return this.So(new Jt(this.noi(t.currentTime),t.readyState)),!0;case Vo.pM:return this.So(new vo(this.noi(t.currentTime),t.readyState)),!0;case Vo.wM:return this.So(new lt(this.noi(t.currentTime),t.readyState)),!0;case Vo.yM:return this.So(new ot(this.noi(t.currentTime),t.readyState)),!0;case Vo.bM:return this.So(new ut(this.noi(t.currentTime),t.readyState)),!0;case Vo.bI:return this.So(new ca(this.noi(t.currentTime),t.readyState)),!0;case d.Cw:return this.So(new Bn(this.noi(t.currentTime),t.initDataType,t.initData)),!0}return super.iI(t)}constructor(t){super(t),this.Ac=void 0,this.qb=void 0,this.eci=void 0,this.bZ=void 0,this.Jui=void 0,this.Qui=0,this.ici=!1,this.jui=void 0,this.uRt=void 0,this.nci=void 0,this.hci=new ui,this.rci=void 0,this.sci=!0,this.cci=!0,this.ihi=!0,this.Ezt=t=>{this.qb=t.duration},this.OW=()=>{this.Yet.mn(Vo.SM,this.OW),this.Hui=!1},this.dci=()=>{this.Yet.mn(Vo.yM,this.dci),this.jui&&(this.Yet.NR=this.jui,this.jui=void 0),this.Yet.FR()>0&&(this.Qui-=this.Yet.FR())},this.uRt=gc.Bg,this.nci=new n4(Zd.AR)}};r(),r();var I6=class extends A6{Rai(){if(void 0===this.lci){const t=function(){const t=h.createElement("div");return fi(t,"theo-ads-sgai-ad-player-two"),t}();this.lci=P6(this.fci,t,this.oa.Cd)}return this.oa===this.vci?this.lci:this.vci}async s5t(t,i,s,e){let n;n=this.oa.nu()?this.Rai():this.oa,await n.Ta(t,e),this.Jai(n,i,s)}async $ai(t){t?await this.Rai().Kx():await this.oa.Kx()}async _ci(){g4(this.oa,this.Rai()),this.n3t(this.Rai()),this.oa.xe.style.display="",this.Rai().xe.style.display="none",await this.Rai().Kx()}async hr(){await this.oa.Kx(),await this.Rai().Kx()}constructor(t,i){const s=function(){const t=h.createElement("div");return fi(t,"theo-ads-sgai-ad-player-one"),t}(),e=P6(t,s,i);s.style.display="block",super(e),this.fci=void 0,this.vci=void 0,this.lci=void 0,this.fci=t,this.vci=e}};function P6(t,i,s){const e=t.children[t.children.length-1];t.insertBefore(i,e),I2(i);const n=new e3(new GF(i,s,new EC),$h.Bg);return n.yx=hl.LL,n.uO=!1,n}var C6=class extends A6{get Qri(){return this.gci}get thi(){return this.mci}get Yri(){return this.pci}get jri(){return this.UZt}get $ri(){return this.wci}Rai(){return this.j3t.Rai()}s5t(t,i,s,e){return this.j3t.s5t(t,i,s,e)}yci(t,i,s,e){var n,r;this.gci=t,e?this.bci=0:this.bci+=s,this.mci=i,null==(r=this.mci)||r.setSeconds((null==(n=this.mci)?void 0:n.getSeconds())+this.bci)}nhi(){var t;if(void 0!==this.Aci)return;this.UZt=void 0,this.wci=void 0;const i=this.Sci;this.Sci=void 0,null==(t=this.Tci)||t.Jg(),M6(this.Yet)&&(this.kci=new ui,this.Aci=Ce(this.Eci(i,this.kci.jg),this.kci).catch(Na))}rhi(){var t;this.UZt=this.gci+this.oa.FR(),this.thi&&(this.wci=new Date(this.thi.getTime()+1e3*this.oa.FR()));const i=this.Aci;this.Aci=void 0,null==(t=this.kci)||t.Jg(),this.Tci=new ui,this.Sci=Ce(this.Rci(i,this.Tci.jg),this.Tci).catch(Na)}Aa(){return this.Yet.pX}xci(){this.Ici||(this.Ici={source:this.Yet.nu(),duration:this.Yet.Nd(),currentTime:this.Yet.FR(),preload:this.Yet.yx,autoplay:this.Yet.uO,playbackRate:this.Yet.vx})}async Pci(t){this.Yet.yx=hl.LL,this.Yet.uO=!1,this.j3t.ix=!0;const i=this.j3t.nu();await this.Yet.Ta(i,t),this.Yet.WR(this.j3t.FR()),this.Yet.wn(d.uo,this.FW),this.Yet.wn(d.zw,this.VW)}async Cci(t){this.Ici&&(this.Yet.yx=this.Ici.preload,this.Yet.uO=this.Ici.autoplay,this.Yet.vx=this.Ici.playbackRate,await this.Yet.Ta(this.Ici.source,t),this.Ici=void 0)}async Eci(t,i){await(null==t?void 0:t.catch(ol)),this.xci(),await this.Yet.Kx(),await this.Pci(i),this.n3t(this.Yet),this.Yet.Yx()}async Rci(t,i){await(null==t?void 0:t.catch(ol)),this.Nci=this.j3t.FR(),this.pci=this.Nci+this.Qri,await this.Yet.Kx(),this.Yet.mn(d.uo,this.FW),this.Yet.mn(d.zw,this.VW),await this.Cci(i),this.n3t(this.j3t),this.Yet.wn(Vo.bM,this.Dci),this.Yet.Yx()}nu(){return this.Ici?this.Ici.source:super.nu()}Nd(){return this.Ici?this.Ici.duration:super.Nd()}Bci(){return super.Nd()}Ex(){const t=super.Ex();return ZT.jn(t).Dy(this.Qri)._s()}PR(){const t=super.PR();return ZT.jn(t).Dy(this.Qri)._s()}Kx(){return this.j3t.Kx()}async _ci(){await this.j3t._ci(),this.n3t(this.j3t)}async $ai(t){await this.j3t.$ai(t)}async hr(){var t,i;null==(t=this.kci)||t.Jg(),this.kci=void 0,this.Aci=void 0,null==(i=this.Tci)||i.Jg(),this.Tci=void 0,this.Sci=void 0,this.Ici=void 0,this.gci=0,this.mci=void 0,this.pci=0,this.UZt=void 0,this.wci=void 0,this.Nci=0,this.bci=0,this.Yet.mn(Vo.bM,this.Dci),this.Yet.mn(d.uo,this.FW),this.Yet.mn(d.zw,this.VW),await this.j3t.hr()}async kn(){await this.hr(),await super.kn()}constructor(t,i,s){const e=new I6(i,s);super(e),this.Yet=void 0,this.j3t=void 0,this.Aci=void 0,this.kci=void 0,this.Tci=void 0,this.Sci=void 0,this.Ici=void 0,this.gci=0,this.mci=void 0,this.pci=0,this.UZt=void 0,this.wci=void 0,this.Nci=0,this.bci=0,this.Dci=()=>{if(this.Yet.mn(Vo.bM,this.Dci),this.mci){const t=this.mci;t.setSeconds(this.mci.getSeconds()+this.Nci),this.Yet.NR=t,this.mci=void 0}this.pci-=this.Yet.FR(),this.UZt=void 0,this.wci=void 0},this.FW=()=>{this.j3t.Yx()},this.VW=()=>{this.j3t.zx()},this.Yet=t,this.j3t=e}};r();var N6=class extends ic{Ta(t,i){var s;return void 0!==me(null!=(s=null==t?void 0:t.ads)?s:[],B2)?Promise.reject(new Wt(Ne.CONFIGURATION_ERROR,"THEOads must be enabled in the player configuration.")):super.Ta(t,i)}},D6=1/60,B6=class extends k6{Mci(){this.Yet.Xet.wn("presentationmodechange",this.Lci)}Oci(){this.Yet.Xet.mn("presentationmodechange",this.Lci)}Fci(){if(this.Vci&&!b4(this.Vci)&&this.j3t&&this.Iui)return function(t){return t instanceof T4}(this.Vci)?(this.Tui(this.Iui,"Cannot play L-shape content ad breaks in this representation"),void this.Aui(()=>this.$2t())):void this.Wci(new w4(this.Yet,this.j3t),!1,!1)}nx(t){t||this.ux||this.Hx(),super.nx(t)}get Xet(){return this.Yet.Xet}async Ta(t,i){await super.Ta(t,i),this.eui&&(this.Uci=this.eui.backdropDoubleBox,this.Wci(new p4(this.Yet,this.j3t),!1,!0))}hui(){this.j3t=new C6(this.Yet,this.fci,this.oa.Cd)}rui(){super.rui(),this.fci=function(){const t=h.createElement("div");return fi(t,"theo-ads-sgai-ad-player"),t}(),this.lui.appendChild(this.fci),this.cai=x2(this.fci),this.Gci()}Gci(){Ll(this.dui),function(t){const i=t.style;i.boxSizing="border-box",i.position="relative",i.alignItems="center",i.border="0 solid transparent",i.borderWidth="0px",i.backgroundColor="transparent",i.backgroundRepeat="no-repeat",i.backgroundAttachment="scroll"}(this.lui),I2(this.dui),I2(this.fci)}fui(){this.Xci(),super.fui(),this.fci&&(je(this.fci),this.fci=void 0)}Xci(){P2(this.Ls),P2(this.dui)}Wci(t,i,s){var e;const n=null!=(e=this.Vci)?e:this,r=null!=t?t:this.Yet;g4(n,r),void 0!==this.Vci&&(this.Vci.mr(this.lui,this.dui,this.fci),this.Vci.kn()),null==t||t.gr(this.lui,this.dui,this.fci,n,i),this.Vci=t,s?this.$L(r):this.n3t(r)}x5t(){return this.j3t}Hx(){var t;super.Hx(),null==(t=this.j3t)||t.Hx()}WR(t,i){this.Zci=!0,super.WR(t,i)}noi(t){var i,s;return t+(null!=(s=null==(i=this.j3t)?void 0:i.Yri)?s:0)}pui(){var t;super.pui(),null==(t=this.j3t)||t.wn(d.vy,this.Hci),this.Yet.wn(d.Gw,this.zci)}bui(){var t;super.bui(),null==(t=this.j3t)||t.mn(d.vy,this.Hci),this.Yet.mn(d.Gw,this.zci)}Yci(){this.Lui(this.FR()),this.Kci()}Kci(){var t;if(this.Zui()||b4(this.Vci)||(null==(t=this.Vci)?void 0:t.qri()))return;const i=_.min(this.j3t.Nd(),this.Iui.ct)-this.j3t.FR(),s=this.qci(i);if(void 0===s)return;if(this.Yet.FR()>s-.75)return;const e=ZT.jn(this.j3t.PR()),n=this.j3t.Ex();if(0===n.length)return;const r=_.min(n.end(n.length-1),this.Iui.h3t);e.PM().Cr(r)&&!this.Yet.Rx&&(this.Yet.ux&&(this.Yet.Yx(),this.Yet.ix=!0),this.Yet.WR(s,{vOt:!0}))}qci(t){var i;const s=this.Yet.Ex(),e=null==(i=this.Iui)?void 0:i.h3t;if(0===s.length||void 0===e)return;const n=s.start(0),r=s.end(s.length-1);let h=e-t;return(h<n||r<h)&&(h=r),we(h,this.Yet.FR(),D6)?void 0:h}async kai(t,i,s){var e;const n=N2(t);await this.cui(n,t.bhi,t.Ahi),await(null==(e=this.Aoi)?void 0:e.kai(t,i,s))}aci(t,i){if(M6(this.Yet))return new w4(this.Yet,this.j3t);switch(t){case an.DOUBLE:return i.fhi||i.er({backdropUri:this.Uci}),new A4(this.Yet,this.j3t,i.fhi);case an.LSHAPE_AD:return i.fhi||i.er({backdropUri:this.oui}),new k4(this.Yet,this.j3t,i.fhi);case an.LSHAPE_CONTENT:return i.fhi||i.er({backdropUri:this.oui}),new T4(this.Yet,this.j3t,i.fhi);case an.SINGLE:default:return new y4(this.Yet,this.j3t)}}Jai(t){var i,s,e,n;const r=t.F3t,h=this.aci(r,t);var o;As.z_&&As.K_>=16&&As.K_<18&&(null==(i=this.Aoi)?void 0:i.eai)!==ae.COMPANION&&(null==(o=this.j3t)||o.WR(this.j3t.FR()));this.Wci(h,this.qui,!1),As.Zv&&!h.qri()&&(null==(s=this.Aoi)?void 0:s.eai)!==ae.COMPANION&&(P2(this.dui),Bl(this.dui)),this.sui.So(new I4(t).Ca),this.jci=(null==(e=this.Aoi)?void 0:e.eai)===ae.COMPANION,null==(n=this.Aoi)||n.Z3t(this.FR())}Xui(t,i){let s=!1;if(this.Zui()){var e,n;if(!(null==(e=this.Aoi)?void 0:e.G3t()))return!1;const t=null==(n=this.j3t)?void 0:n.PR();if(t&&t.length>0){let i=t.end(t.length-1);i-=this.j3t.Qri;s=_.min(this.j3t.Nd(),this.Iui.ct)-5<i}}return s||super.Xui(t,i)}Qci(){var t;M6(this.oa)&&(null==(t=this.Aoi)?void 0:t.eai)!==ae.COMPANION&&(this.Hui=!0,this.oa.wn(Vo.SM,this.Jci))}async kui(){var t,i,s,e;const n=this._ui;if(void 0!==n){var r,h,o;if(null==(t=this.j3t)?void 0:t.zR())return this.sui.So(new w6(n,"Could not load the ad break: "+(null==(h=this.j3t)||null==(r=h.zR())?void 0:r.message)).Ca),n.mx=!0,this._ui=void 0,this.$ci();if(this.mui(),this.Qci(),(null==(i=this.Aoi)?void 0:i.eai)!==ae.COMPANION)this.tdi=this.Yet.NR,null==(o=this.j3t)||o.yci(this.FR(),this.tdi,0,!0);return null==(s=this.Aoi)||s.X3t(!1),this.oa.Rx&&this.So(new Wi(this.FR())),this.Jai(n),!As.z_||this.oa.ux||(null==(e=this.Vci)?void 0:e.qri())||(this.Yet.ix=!0,this.Yet.Yx()),this.pui(),super.kui()}}async Rui(){var t,i,s,e;this.Y3t(this.Iui);const n=this._ui;var r,h,o,a;if((null==(t=this.j3t)?void 0:t.Rai().zR())&&(null==(i=this.Aoi)?void 0:i.eai)!==ae.COMPANION)return this.Tui(n,"Could not load the next ad break: "+(null==(h=this.j3t)||null==(r=h.Rai().zR())?void 0:r.message)),this.$2t();(this.Qci(),(null==(s=this.Aoi)?void 0:s.eai)!==ae.COMPANION)&&(null==(a=this.j3t)||a.yci(this.FR(),this.tdi,null==(o=this.j3t)?void 0:o.Bci(),!1),await this._ci());return this.Jai(n),(null==(e=this.Aoi)?void 0:e.eai)!==ae.COMPANION&&this.oa.Yx(),super.Rui()}async $2t(){var t;if(void 0===this.Iui)return;this.bui(),function(t){return t instanceof w4}(this.Vci)&&(this.iui.Mhi(this.Yet.nt),this.Yet.wn(Vo.yM,this.Pd));const i=null==(t=this.Vci)?void 0:t.qri();if(this.Wci(new p4(this.Yet,this.j3t),!0,!1),!i){this.Zci=!1;const t=this.qci(0);t&&this.Yet.FR()<t+.75&&this.Yet.WR(t,{vOt:!0})}return M6(this.oa)&&(this.Hui=!0,this.oa.wn(Vo.SM,this.Jci)),await this.$ci(),this.uui(),super.$2t()}async $ci(){var t;await(null==(t=this.j3t)?void 0:t.Kx()),this._ui&&this.Pui&&this._ci()}async _ci(){var t;this.j3t&&(await this.j3t._ci(),null==(t=this.Aoi)||t.X3t(!0))}async Rmt(){var t;this.qui=!0,this.Zci=!0,this.jci=!0,this.Wci(void 0,!1,!0),await(null==(t=this.j3t)?void 0:t.kn()),this.tdi=void 0,this.j3t=void 0,this.cai=void 0,this.oa.mn(Vo.SM,this.Jci),await super.Rmt()}async kn(){var t;this.Oci(),await(null==(t=this.j3t)?void 0:t.kn()),await super.kn()}iI(t){if(void 0!==this.Vci)switch(t.type){case d.uo:if(!this.jci)return this.jci=!0,!0;this.qui=!0;break;case d.zw:if(this.GR&&void 0!==this.Iui)return!0;break;case Vo.SM:if(!this.qui||this.Hui)return!0;this.qui=!1;break;case Vo.AM:if(this.Hui)return!0;this.qui=!0;break;case d.Jw:if(!this.Zci||this.Hui)return!0;break;case d.Qw:if(!this.Zci||this.Hui)return this.Zci=!0,!0;break;case d.Nw:if(void 0!==this.Iui)return!0}return super.iI(t)}constructor(t){super(t),this.fci=void 0,this.j3t=void 0,this.Vci=void 0,this.Uci=void 0,this.jci=!0,this.Zci=!0,this.tdi=void 0,this.Lci=t=>{switch(t.presentationMode){case"native-picture-in-picture":this.Fci();break;case"fullscreen":O3(this.Cd)&&this.Fci();break}},this.Hci=t=>{this.Yci()},this.zci=t=>{this.Yci()},this.idi=()=>{const t=this.Iui;void 0!==t?(!t.h3t||this.FR()>=t.h3t)&&(this.Yet.mn(d.vy,this.idi),this.Aui(()=>this.$2t())):this.Yet.mn(d.vy,this.idi)},this.Jci=()=>{this.oa.mn(Vo.SM,this.Jci),this.Hui=!1,this.qui=!1},this.Mci()}};function M6(t){const i=t.Xet.Wo()===ju.FULLSCREEN&&O3(t.Cd);return t.pX.HL||i}zF(t=>t.Cd.ads.theoads?As.w_||As.S_||As.N_?new x6(t):new B6(t):new N6(t),ZF.hnt),r();$h.Bg.FZ(new class{get I5t(){return Qc.hnt}OZ(t){return B2(t)}P5t(t,i,s){}B6(t,i,s,e){}tY(t){const i={integration:Za.THEOADS,adTagParameters:Nc(t.adTagParameters)?t.adTagParameters:{},useId3:Boolean(t.useId3)};return yo(t.networkCode)&&(i.networkCode=_o(t.networkCode)),yo(t.customAssetKey)&&(i.customAssetKey=_o(t.customAssetKey)),yo(t.backdropDoubleBox)&&(i.backdropDoubleBox=_o(t.backdropDoubleBox)),yo(t.backdropLShape)&&(i.backdropLShape=_o(t.backdropLShape)),yo(t.overrideLayout)&&(i.overrideLayout=function(t){switch(t){case"single":case"l-shape":case"double":case"single-if-mobile":return t;default:return}}(t.overrideLayout)),yo(t.overrideAdSrc)&&(i.overrideAdSrc=_o(t.overrideAdSrc)),yo(t.retrievePodIdURI)&&(i.retrievePodIdURI=_o(t.retrievePodIdURI)),yo(t.sseEndpoint)&&(i.sseEndpoint=_o(t.sseEndpoint)),yo(t.streamActivityMonitorId)&&(i.streamActivityMonitorId=_o(t.streamActivityMonitorId)),ih(t.initializationDelay)&&(i.initializationDelay=go(t.initializationDelay)),yo(t.daiAssetKey)&&(i.daiAssetKey=_o(t.daiAssetKey)),i}}),r(),r(),r(),r(),r();var L6=class extends fr{get Ca(){return this.hu||(this.hu=function(t){return{get casting(){return t.yQ},get state(){return t.qlt},start(){t.jx()},stop(){t.Qx()},addEventListener(i,s){const e=Ta(i,_o);t.wn(e,s)},removeEventListener(i,s){const e=Ta(i,_o);t.mn(e,s)}}}(this)),this.hu}constructor(...t){super(...t),this.hu=void 0}},O6=class extends L6{get yQ(){return this.qlt===Er.CONNECTED}get qlt(){return this.Ra}sdi(){this.edi(),this.lmt.wn(d.do,this.ndi),this.Ua(Er.AVAILABLE)}edi(){this.oa&&this.oa.mn(d.ww,this.handleAirplayChangedEvent),this.rdi?this.oa=this.Ij:this.oa=this.hdi,this.oa.wn(d.ww,this.handleAirplayChangedEvent)}get rdi(){return this.Ij.qx()}async odi(){if(this.oa){if(this.rdi){if(!this.oa.ux){const t=hi(800,this.adi.jg),i=this.oa.pw(d.zw,this.adi.jg);await Promise.race([i,t]).catch(ol)}this.oa.Yx()}else{this.udi=this.Ij.OR,this.cdi=this.Ij.NR,this.hdi.wn(d.vy,this.handleAirplayPlayerTimeUpdate),this.ddi=this.Ij.MI,this.Ij.MI=this.hdi,this.ddi.zx(),this.ddi.we(),this.hdi.be(),this.hdi.ix=this.ddi.ix,this.hdi.vx=this.ddi.vx,this.hdi.Ox=this.ddi.Ox;const t=this.hdi.pw(d.Qw);this.hdi.OR=this.ddi.OR,await t,this.hdi.Yx(),this.hdi.ix=this.ddi.ix,this.hdi.vx=this.ddi.vx,this.hdi.Ox=this.ddi.Ox}this.Ua(Er.CONNECTED)}}ldi(){if(this.ddi){this.hdi.mn(d.vy,this.handleAirplayPlayerTimeUpdate),this.ddi.ix=this.hdi.ix,this.ddi.vx=this.hdi.vx,this.ddi.Ox=this.hdi.Ox;As.z_&&!As.ru&&this.Ij.ct===1/0?this.cdi?this.ddi.NR=this.cdi:this.ddi.OR=1/0:this.ddi.OR=this.udi,this.cdi=void 0,this.udi=void 0,this.ddi.be(),this.hdi.we(),this.hdi.ux||this.ddi.Yx(),this.Ij.MI=this.ddi,this.hdi.hr(),this.ddi=void 0}else this.oa&&(this.oa.OR=this.oa.OR+1e-4);this.Ua(Er.AVAILABLE)}preloadPlayer(t){if(Ko(t),this.oa.Sx<pi.Qn){const i=this.oa.pw(Vo.bM,t);return this.oa.yx=hl.WV,i}return Promise.resolve()}Ua(t){t!==this.Ra&&(this.Ra=t,this.So(new l2(this.Ra)))}jx(){let t;this.lmt.Hx(),this.adi.Jg(),this.adi=new ui,t=this.rdi?this.fdi(this.adi.jg):this.vdi(this.adi.jg),_e(Ce(t,this.adi))}async fdi(t){await this.preloadPlayer(t),this.Ij.jx()}async vdi(t){try{await this.hdi.hr();const i=this.Ij.nu();if(void 0===i)throw new m("Not possible to start Airplay without a source");await this.hdi.Ta(i,t);const s=this.hdi.pw(Vo.SM,t);this.hdi.Yx(),await pf(s,3e3),this.hdi.zx(),Ko(t),this.hdi.jx()}catch(t){if(hc(t))return;0}}Qx(){this.oa.Qx()}kn(){var t;this.Vo(),this.lmt.mn(d.do,this.ndi),this.adi.Jg(),this.Ij.aO(this.hdi),null==(t=this.hdi)||t.kn()}constructor(t,i,s){super(),this.lmt=void 0,this.oa=void 0,this.Ij=void 0,this.Ra=Er.UNAVAILABLE,this.adi=new ui,this.hdi=void 0,this.udi=void 0,this.cdi=void 0,this.ddi=void 0,this.ndi=()=>{var t;const i=null==(t=this.Ij.nu())?void 0:t.sources.filter(wk);(null==i?void 0:i.some(JI))?this.Ua(Er.AVAILABLE):this.Ua(Er.UNAVAILABLE)},this.handleAirplayChangedEvent=()=>{this.oa&&this.oa.QR?this.odi():this.qlt===Er.CONNECTED&&this.ldi()},this.handleAirplayPlayerTimeUpdate=t=>{this.udi=t.currentTime,this.cdi=this.Ij.NR},this.lmt=t,this.Ij=i,this.hdi=s,this.hdi.we(),i.oO(s),this.sdi()}};r();var F6=class extends L6{get yQ(){return!1}get qlt(){return Er.UNAVAILABLE}jx(){}Qx(){}};r();var V6=class extends ua{$x(){this._di.$x()}sI(t){throw new m("Can't add a track while using AirPlay.")}get ht(){return this._di.ht}get IR(){return this._di.IR}get bt(){return this.aZ}get OR(){return this._di.OR}set OR(t){this.WR(t)}WR(t,i){this._di.WR(t,i)}get NR(){return this._di.NR}get ct(){return this._di.ct}get xe(){return this.Ls}get GR(){return this._di.GR}get lt(){return this._di.lt}get HR(){return this._di.HR}get YR(){return this._di.YR}get qR(){return this._di.qR}get QR(){return this._di.QR}get Gx(){return this._di.Gx}get Wx(){return this._di.Wx}get $R(){return this._di.$R}get ix(){return this._di.ix}set ix(t){this._di.ix=t}get hx(){return this._di.hx}get ux(){return this._di.ux}get vx(){return this._di.vx}set vx(t){this._di.vx=t}get mx(){return this._di.mx}get yx(){return this._di.yx}set yx(t){this._di.yx=t}get Sx(){return this._di.Sx}get kx(){return this._di.kx}get Rx(){return this._di.Rx}qx(){return this._di.qx()}jx(){this._di.jx()}Qx(){this._di.Qx()}get nt(){return this._di.nt}get Nx(){return this._di.Nx}get Mx(){return this._di.Mx}get rt(){return this._di.rt}get Ox(){return this._di.Ox}set Ox(t){this._di.Ox=t}Yx(){_e(this._di.Yx())}zx(){this._di.zx()}async Kx(){}nu(){return this.Ac}async Ta(t,i){let s;if(Ko(i),this.Ac=t,Ds(t.sources))s=CT({src:""});else{const i=t.sources.filter(wk);for(const t of i)if(JI(t)){s=t;break}}if(!s)throw new m("Unsupported source.");await this._di.Ta(s,t,i),this.gZ(s)}Ix(t,i,s){return Promise.resolve()}Px(){return Promise.resolve()}gZ(t){this.aZ!==t&&(this.aZ=t,this.So(new Ik(t)))}Zx(){return this._di.Zx()}xR(){return[]}Hx(){this.gdi.SZ()}gr(t){Rk(this,t)}mr(){}tI(t){return!1}Jx(){this._di.Jx()}async hr(){this.aZ=void 0,this.Ac=void 0,await this._di.hr()}be(){this._di.be()}we(){this._di.we()}Xx(){return this._di.Xx()}Aa(){return this._di.Aa()}async kn(){this.Vo(),this.gdi.kn(),await this._di.kn(),this.qL.kn(),this.JL.kn(),this.Gl.kn()}constructor(t,i,s,e,n,r,h){super(),this.Ls=void 0,this.gdi=void 0,this._di=void 0,this.aZ=void 0,this.Ac=void 0,this.qL=new Yu,this.JL=new Yu,this.Gl=new Jc,this.Ls=t,this.gdi=new PF(r,h,s,1,[Mo.Nk]),this.gdi.het(t),this._di=new QI(t,this.gdi,i,s,e,n),this._di.dw(this.Rs),this.qL.MI=this._di.ht,this.JL.MI=this._di.rt,this.Gl.MI=this._di.nt}},W6=class extends ic{async kn(){this.mdi.kn(),await super.kn()}constructor(t){super(t),this.mdi=void 0;const i=new V6(this.Pa.xe,this.AR,this.Cd,this.Cet,this.Wx,this.Let,this.Ql);this.mdi=new O6(this,this.Pa,i),this.Lz.kQ(this.mdi),this.wn(d.Rw,()=>{this.mdi.edi()})}};zF(t=>Zd.Zs.ym?new W6(t):(t.Lz.kQ(new F6),t),ZF.ont),r(),r();var U6="VPAID";function G6(t){return"spotx"===t.integration}$h.Bg.FZ(new class t{get I5t(){return this.pdi.I5t}OZ(t){return G6(t)}P5t(i,s,e){return e.ads||(e.ads=mk({})),e.ads.vpaidMode=e.ads.vpaidMode||t.wdi(),this.pdi.P5t(i,s,e)}B6(i,s,e,n){!function(t){if(!G6(t))throw new m("Unknown ad integration: "+t.integration)}(i);const r=t.ydi(i,e.xe);this.pdi.B6(r,s,e,n)}tY(t){const i=Fa(t);if(!S(i.id))return i.queryParameters||(i.queryParameters={}),i.custom&&(i.queryParameters.custom?Si('"custom" parameter is redefined in queryParameters! Please use "queryParameters.custom" only!'):(i.queryParameters.custom=i.custom,delete i.custom)),i.app&&(i.queryParameters.app?Si('"app" parameter is redefined in queryParameters! Please use "queryParameters.app" only!'):(i.queryParameters.app=i.app,delete i.app)),i.device&&(i.queryParameters.device?Si('"device" parameter is redefined in queryParameters! Please use "queryParameters.device" only!'):(i.queryParameters.device=i.device,delete i.device)),i.user&&(i.queryParameters.user?Si('"user" parameter is redefined in queryParameters! Please use "queryParameters.user" only!'):(i.queryParameters.user=i.user,delete i.user)),i.ipAddress&&(i.queryParameters.ip_addr?Si('"ipAddress" parameter is redefined in queryParameters! Please use "queryParameters.ip_addr" or "ipAddress" only!'):(i.queryParameters.ip_addr=i.ipAddress,delete i.ipAddress)),i.maximumAdDuration&&(i.queryParameters.VMaxd?Si('"maximumAdDuration" parameter is redefined in queryParameters! Please use "queryParameters.VMaxd" or "maximumAdDuration" only!'):(i.queryParameters.VMaxd=i.maximumAdDuration,delete i.maximumAdDuration)),i}static ydi(i,e){return{integration:Za.SPOTX,sources:{src:t.bdi(i,s.location.href,e.offsetWidth,e.offsetHeight,As.Tg)}}}static bdi(i,s,e,n,r){if(i.sources)return i.sources;let h=n,o=e;r&&0===o&&(o=320,h=180);const a={custom_skin:1,player_width:o,player_height:h};i.cacheBuster&&(a.cb=_.random()),t.Adi(s)&&(a.content_page_url=s);const u=Jr({},a,i.queryParameters);return u[U6]||u.VPI||(u[U6]="js"),"https://search.spotxchange.com/vast/2.0/"+i.id+"?"+t.Sdi(u)}static Adi(t){return Qe(t,"http://")||Qe(t,"https://")}static Sdi(t){return r1(t)}static wdi(){return As.B_?tk.ENABLED:tk.INSECURE}constructor(){this.pdi=new U3}}),r(),r(),r(),r();var X6=_.PI/180,Z6=180/_.PI,H6=class{Gy(t,i){return this.x=t,this.y=i,this}xft(t){return this.x=t.x,this.y=t.y,this}Tdi(t){return this.Gy(t[0],t[1])}kdi(){const t=new Float32Array(2);return t[0]=this.x,t[1]=this.y,t}Edi(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this}constructor(t,i){this.x=void 0,this.y=void 0,this.x=t||0,this.y=i||0}},Vr=class{Gy(t,i,s){return this.x=t,this.y=i,this.z=s,this}xft(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}Tdi(t){return this.Gy(t[0],t[1],t[2])}kdi(){const t=new Float32Array(3);return t[0]=this.x,t[1]=this.y,t[2]=this.z,t}V(){return _.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}Rdi(){const t=this.V();if(0!==t){const i=1/t;this.xdi(i)}else this.x=0,this.y=0,this.z=0;return this}xdi(t){this.x*=t,this.y*=t,this.z*=t}Idi(t){const i=this.x,s=this.y,e=this.z,n=t.x,r=t.y,h=t.z,o=t.w,a=o*i+r*e-h*s,u=o*s+h*i-n*e,c=o*e+n*s-r*i,d=-n*i-r*s-h*e;return this.x=a*o+d*-n+u*-h-c*-r,this.y=u*o+d*-r+c*-n-a*-h,this.z=c*o+d*-h+a*-r-u*-n,this}Pdi(t){return this.x*t.x+this.y*t.y+this.z*t.z}Cdi(t,i){const s=t.x,e=t.y,n=t.z,r=i.x,h=i.y,o=i.z;return this.x=e*o-n*h,this.y=n*r-s*o,this.z=s*h-e*r,this}constructor(t,i,s){this.x=void 0,this.y=void 0,this.z=void 0,this.x=t||0,this.y=i||0,this.z=s||0}},Ea=class{Gy(t,i,s,e){return this.x=t,this.y=i,this.z=s,this.w=e,this}xft(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this}Tdi(t){return this.Gy(t[0],t[1],t[2],t[3])}kdi(){const t=new Float32Array(4);return t[0]=this.x,t[1]=this.y,t[2]=this.z,t[3]=this.w,t}Pdi(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}VF(t){return this.Ndi(this,t)}Ndi(t,i){const s=t.x,e=t.y,n=t.z,r=t.w,h=i.x,o=i.y,a=i.z,u=i.w;return this.x=s*u+r*h+e*a-n*o,this.y=e*u+r*o+n*h-s*a,this.z=n*u+r*a+s*o-e*h,this.w=r*u-s*h-e*o-n*a,this}Ddi(){return this.x*=-1,this.y*=-1,this.z*=-1,this.Rdi(),this}Bdi(){const t=this.x,i=this.y,s=this.z,e=this.w,n=t*i+s*e;let r,h,o;if(n>.499)r=2*_.atan2(t,e),h=_.PI/2,o=0;else if(n<-.499)r=-2*_.atan2(t,e),h=-_.PI/2,o=0;else{const a=t*t,u=i*i,c=s*s;r=_.atan2(2*i*e-2*t*s,1-2*u-2*c),h=_.asin(2*n),o=_.atan2(2*t*e-2*i*s,1-2*a-2*c)}return new z6(r,o,h)}Rdi(){let t=_.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===t?(this.x=0,this.y=0,this.z=0,this.w=1):(t=1/t,this.x=this.x*t,this.y=this.y*t,this.z=this.z*t,this.w=this.w*t),this}constructor(t,i,s,e){this.x=void 0,this.y=void 0,this.z=void 0,this.w=void 0,this.x=t||0,this.y=i||0,this.z=s||0,this.w=void 0!==e?e:1}},z6=class{Gy(t,i,s){return this.Mdi=t,this.Ldi=i,this.Odi=s,this}xft(t){return this.Gy(t.Mdi,t.Ldi,t.Odi)}dO(t){return this.Mdi+=t.Mdi,this.Ldi+=t.Ldi,this.Odi+=t.Odi,this}dF(t){return this.Mdi-=t.Mdi,this.Ldi-=t.Ldi,this.Odi-=t.Odi,this}Fdi(){const t=this.Mdi,i=this.Odi,s=this.Ldi,e=_.cos(t/2),n=_.cos(i/2),r=_.cos(s/2),h=_.sin(t/2),o=_.sin(i/2),a=_.sin(s/2),u=e*n,c=h*o;return new Ea(u*a+c*r,h*n*r+e*o*a,e*o*r-h*n*a,u*r-c*a)}constructor(t,i,s){this.Mdi=void 0,this.Ldi=void 0,this.Odi=void 0,this.Mdi=t||0,this.Ldi=i||0,this.Odi=s||0}};r();var Y6=["Vdi","kot","Wdi","error"];r();var K6=function(t){return t.Os="unavailable",t.Udi="available",t.Ya="presenting",t}({});r();var q6=class{KV(){this.We||(this.We=!0,this.Ls.addEventListener("mousedown",this.Gdi),this.Ls.addEventListener("touchstart",this.Xdi),s.addEventListener("mousemove",this.cr),s.addEventListener("touchmove",this.Zdi),s.addEventListener("mouseup",this.Hdi),s.addEventListener("touchend",this.zdi),this.Ydi(s))}qV(){this.We&&(this.We=!1,this.Ls.removeEventListener("mousedown",this.Gdi),this.Ls.removeEventListener("touchstart",this.Xdi),s.removeEventListener("mousemove",this.cr),s.removeEventListener("touchmove",this.Zdi),s.removeEventListener("mouseup",this.Hdi),s.removeEventListener("touchend",this.zdi),this.Kdi(s))}Ydi(t){if(function(t){try{return Boolean(t)&&t===t.top}catch(t){return!1}}(t));else if(Vl(t))try{t.parent.addEventListener("mouseup",this.Hdi),this.Ydi(t.parent)}catch(i){t.document.documentElement.addEventListener("mouseleave",this.qdi)}}Kdi(t){if(t.document.documentElement.removeEventListener("mouseleave",this.qdi),Vl(t))try{t.parent.removeEventListener("mouseup",this.Hdi),this.Kdi(t.parent)}catch(t){}}jdi(){this.Qdi=!1}Jdi(){const t=this.tli.$di;t.yaw+=2*_.PI*this.ili.x*.4/this.Ls.clientWidth,t.pitch+=2*_.PI*this.ili.y*.5/this.Ls.clientHeight,t.pitch=ss(t.pitch,-_.PI/2,_.PI/2),this.tli.$di=t}sli(){return(h.pointerLockElement||h.mozPointerLockElement||h.webkitPointerLockElement)===this.Ls}kn(){this.qV()}constructor(t,i){this.tli=void 0,this.Ls=void 0,this.We=!1,this.eli=new H6,this.nli=new H6,this.ili=new H6,this.Qdi=!1,this.Gdi=t=>{this.eli.Gy(t.clientX,t.clientY),this.Qdi=!0,t.preventDefault(),t.stopPropagation()},this.Xdi=t=>{t.touches&&1===t.touches.length&&(this.eli.Gy(t.touches[0].pageX,t.touches[0].pageY),this.Qdi=!0,t.preventDefault())},this.cr=t=>{if(this.Qdi||this.sli()){if(this.sli()){const i=t.movementX||t.mozMovementX||0,s=t.movementY||t.mozMovementY||0;this.nli.Gy(this.eli.x-i,this.eli.y-s)}else this.nli.Gy(t.clientX,t.clientY);this.ili.Edi(this.nli,this.eli),this.eli.xft(this.nli),this.Jdi()}},this.Zdi=t=>{this.Qdi&&(this.nli.Gy(t.touches[0].pageX,t.touches[0].pageY),this.ili.Edi(this.nli,this.eli),this.eli.xft(this.nli),this.Jdi())},this.Hdi=()=>{this.jdi()},this.zdi=()=>{this.jdi()},this.qdi=()=>{this.jdi()},this.tli=t,this.Ls=i}};r();var j6=class extends Kt{xa(){return new Q6}constructor(){super("Wdi")}},Q6=class extends sh{constructor(){super("stereochange")}};r();var J6=class{rli(t){t.clearColor(...this.tJ),t.clear(t.COLOR_BUFFER_BIT)}hli(t,i){t.clearDepth(1),t.enable(t.DEPTH_TEST),t.depthFunc(t.LEQUAL),t.clear(t.DEPTH_BUFFER_BIT),this.oli.forEach(s=>{s.hli(t,i)})}ali(t){this.oli.push(t)}uli(){this.oli=[]}constructor(){this.tJ=[0,0,0,1],this.oli=[]}};r(),r(),r();var $6=class{cli(t,i,s){const e=t.createBuffer();return null===e?(Si("Failed to create buffer."),null):(t.bindBuffer(i,e),t.bufferData(i,s,t.STATIC_DRAW),e)}constructor(t,i,s,e,n){this.dli=void 0,this.Jy=void 0,this.lli=void 0,this.Ym=void 0,this.fli=void 0,this.vli=void 0,this.uc=void 0,this.dli=t,this.Jy=this.cli(t,i,s),this.lli=e,this.Ym=n,this.fli=!1,this.vli=0,this.uc=0}},t9=class extends $6{KV(t){if(null===this.Jy)return void Si("Attempted to enable buffer that failed to initialize.");if(null===t)return void Si("Attempted to enable attribute without location.");const i=this.dli;i.bindBuffer(i.ARRAY_BUFFER,this.Jy),i.vertexAttribPointer(t,this.lli,this.Ym,this.fli,this.vli,this.uc),i.enableVertexAttribArray(t)}qV(t){t&&this.dli.disableVertexAttribArray(t)}constructor(t,i,s){super(t,t.ARRAY_BUFFER,i,s,t.FLOAT)}};var i9=class extends $6{_li(){const t=this.dli;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.Jy),t.drawElements(t.TRIANGLES,this.gli,this.Ym,this.uc)}constructor(t,i){super(t,t.ELEMENT_ARRAY_BUFFER,i,1,t.UNSIGNED_SHORT),this.gli=void 0,this.gli=i.length}};r();var s9=function(t){return t.VertexPos="aVertexPosition",t.VertexUV="aVertexUV",t.VertexColor="aVertexColor",t}({}),Ma=function(t){return t.ProjectionMat="uProjectionMatrix",t.ModelViewMat="uModelViewMatrix",t.Texture="uTexture",t}({}),e9=function(t){return t.Normal="vNormal",t.Color="vColor",t.UV="vUV",t}({}),n9=class{mli(t,i,s){const e=this.wli(t,t.VERTEX_SHADER,i),n=this.wli(t,t.FRAGMENT_SHADER,s);if(null===e||null===n)return Si("Failed to create vertex or fragment shader."),null;const r=t.createProgram();return null===r?(Si("Failed to create shader program"),null):(t.attachShader(r,e),t.attachShader(r,n),t.linkProgram(r),t.getProgramParameter(r,t.LINK_STATUS)?r:(Si("Failed to initialize shader program"),null))}wli(t,i,s){const e=t.createShader(i);if(null===e)return Si("failed to create shader."),null;if(t.shaderSource(e,s),t.compileShader(e),!t.getShaderParameter(e,t.COMPILE_STATUS)){const i=t.getShaderInfoLog(e);return Si("Failed to compile shader with error: "+i),t.deleteShader(e),null}return e}yli(){return this.bli}Ali(t){const i=this.bli;if(null===i)return Si("Attempted to retrieve attribute location when shader program was not initialized"),null;const s=this.dli.getAttribLocation(i,t);return-1===s?null:s}Sli(t){const i=this.bli;if(null===i)return Si("Attempted to retrieve uniform location when shader program was not initialized"),null;const s=this.dli.getUniformLocation(i,t);return null===s&&Tv("Attempted to retrieve nonexistent uniform: "+t),s}constructor(t,i,s){this.bli=void 0,this.dli=void 0,this.dli=t,this.bli=this.mli(this.dli,i,s)}},r9=class{Tli(){const t=this.kli.length,i=_.max(...this.Eli);return i>=t?(Tv("Created geometry where largest index ("+i+") is larger than/equal to attribute array size ("+t+")"),!1):(i<t-1&&Si("Created geometry where largest index ("+i+") is smaller than attribute buffer - 1 ("+(t-1)+") resulting in unused vertices"),!this.Rli||this.Rli.length===t||(Tv("Created geometry where position ("+t+") and uv ("+this.Rli.length+") buffers have different length."),!1))}xli(t,i){if(!this.Tli())throw new m("Failed to validate buffers for WebGLGeometry.");const s=function(t,i){const s=[];return i.forEach(t=>{s.push(t.x,t.y,t.z)}),new t9(t,new Float32Array(s),3)}(t,this.kli),e=function(t,i){return new i9(t,new Uint16Array(i))}(t,this.Eli),n=function(t,i){const s=[];return i.forEach(t=>{s.push(t.x,t.y)}),new t9(t,new Float32Array(s),2)}(t,this.Rli);return new h9(s,e,n,i)}constructor(t,i,s){this.kli=void 0,this.Eli=void 0,this.Rli=void 0,this.kli=t,this.Eli=i,this.Rli=s}},h9=class{Ili(){this.kli.KV(this.Pli),null!==this.Cli&&this.Rli.KV(this.Cli)}Nli(){this.kli.qV(this.Pli),null!==this.Cli&&this.Rli.qV(this.Cli)}hli(){this.Eli._li()}constructor(t,i,s,e){this.kli=void 0,this.Pli=void 0,this.Rli=void 0,this.Cli=void 0,this.Eli=void 0,this.kli=t;const n=e.Ali(s9.VertexPos);if(null===n)throw new m("Failed to get position attribute location.");this.Pli=n,this.Rli=s,this.Cli=e.Ali(s9.VertexUV),this.Eli=i}},o9=class extends r9{constructor(t=1,i=32,s=16,e=0,n=2*_.PI,r=0,h=_.PI){let o=0;const a=_.min(r+h,_.PI),u=[],c=[],d=[],l=[];for(let u=0;u<=s;u++){const f=[],v=u/s;let g=0;0===u&&0===r?g=.5/i:u===s&&a===_.PI&&(g=-.5/i);for(let s=0;s<=i;s++){const a=s/i,u=-t*_.cos(e+a*n)*_.sin(r+v*h),l=t*_.cos(r+v*h),m=t*_.sin(e+a*n)*_.sin(r+v*h);c.push(new Vr(u,l,m)),d.push(new H6(a+g,1-v)),f.push(o++)}l.push(f)}for(let t=0;t<s;t++)for(let e=0;e<i;e++){const i=l[t][e+1],n=l[t][e],h=l[t+1][e],o=l[t+1][e+1];(0!==t||r>0)&&u.push(i,n,o),(t!==s-1||a<_.PI)&&u.push(n,h,o)}super(c,u,d)}};r(),r();var a9=[0,0,0,255,0,0,0,255,0,0,0,255,0,0,0,255],u9=class{Dli(){const t=this.dli;t.activeTexture(this.Bli),t.bindTexture(t.TEXTURE_2D,this.Mli)}gr(){const t=this.dli;t.activeTexture(this.Bli),t.bindTexture(t.TEXTURE_2D,this.Mli),t.uniform1i(this.Lli,0)}Oli(t){const i=this.dli;i.bindTexture(i.TEXTURE_2D,this.Mli),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!0),i.texImage2D(i.TEXTURE_2D,this.t2,this.Fli,this.Vli,this.Wli,t),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!1)}Uli(t){const i=this.dli;i.bindTexture(i.TEXTURE_2D,this.Mli),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!0),t.Zet.kK(i,i.TEXTURE_2D,this.t2,this.Fli,this.Vli,this.Wli),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!1)}constructor(t,i){if(this.dli=void 0,this.Mli=void 0,this.Lli=void 0,this.t2=void 0,this.Fli=void 0,this.Vli=void 0,this.Wli=void 0,this.Bli=void 0,this.dli=t,this.Mli=t.createTexture(),null===this.Mli)throw new m("Failed to create texture");const s=i.Sli(Ma.Texture);if(null===s)throw new m("Failed to get texture location.");this.Lli=s,t.bindTexture(t.TEXTURE_2D,this.Mli),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),this.Bli=t.TEXTURE0,this.t2=0,this.Fli=t.RGBA,this.Vli=t.RGBA,this.Wli=t.UNSIGNED_BYTE,t.texImage2D(t.TEXTURE_2D,this.t2,this.Fli,2,2,0,this.Vli,this.Wli,new j(a9))}},c9="\n    attribute vec4 "+s9.VertexPos+";\n    attribute vec2 "+s9.VertexUV+";\n\n    uniform mat4 "+Ma.ModelViewMat+";\n    uniform mat4 "+Ma.ProjectionMat+";\n    \n    varying mediump vec2 "+e9.UV+";\n    \n    void main() {\n      gl_Position = "+Ma.ProjectionMat+" * "+Ma.ModelViewMat+" * "+s9.VertexPos+";\n      "+e9.UV+" = "+s9.VertexUV+";\n    }\n",d9="\n    varying mediump vec2 "+e9.UV+";\n    \n    uniform sampler2D "+Ma.Texture+";\n\n    void main() {\n      gl_FragColor = texture2D("+Ma.Texture+", "+e9.UV+");\n    }\n",l9=class{yli(){return this.bli}KV(){this.dli.useProgram(this.bli.yli()),this.Mli.gr()}Gli(t){this.Mli.Oli(t)}Xli(t){this.Mli.Uli(t)}constructor(t){this.dli=void 0,this.bli=void 0,this.Mli=void 0,this.dli=t,this.bli=new n9(t,c9,d9),this.Mli=new u9(t,this.bli)}};r(),r();var f9=cr(yd()),v9=cr(bd()),_9=(cr(Ad()),cr(Sd())),g9=(cr(Td()),cr(kd())),m9=cr(Ed()),p9=cr(Rd()),w9=cr(xd()),y9=cr(Id()),b9=class{hli(t,i){if(this.Zli(i.Hli)){this.zli.Ili(),this.Yli.KV();const s=this.Kli,e=i.qli,n=(0,m9.default)(e,e,s);t.uniformMatrix4fv(this.jli,!1,n);const r=i.Qli;t.uniformMatrix4fv(this.Jli,!1,r),this.zli.hli(),this.zli.Nli()}}Zli(t){return"none"===this.Hli||"right"!==t&&"left"===this.Hli||"right"===t&&"right"===this.Hli}get Kli(){const t=(0,f9.default)(),i=this.mo;return(0,y9.default)(t,t,i.kdi()),(0,w9.default)(t,t,this.$li.x,new Float32Array([1,0,0])),(0,w9.default)(t,t,this.$li.y,new Float32Array([0,1,0])),(0,w9.default)(t,t,this.$li.z,new Float32Array([0,0,1])),t}constructor(t,i,s,e){this.zli=void 0,this.Yli=void 0,this.jli=void 0,this.Jli=void 0,this.mo=new Vr,this.$li=new Vr,this.Hli="none",this.Yli=s;const n=s.yli();this.zli=i.xli(t,n),e&&(this.Hli=e);const r=n.Sli(Ma.ModelViewMat);if(null===r)throw new m("Failed to get model view matrix location.");this.jli=r;const h=n.Sli(Ma.ProjectionMat);if(null===h)throw new m("Failed to get projection matrix location.");this.Jli=h}};r();var A9=class{tfi(){const t=(0,f9.default)();return(0,p9.default)(t,this.ifi,this.sfi,this.efi,this.nfi)}rfi(){this.hfi=this.tfi()}get Qli(){return new Float32Array(this.hfi)}set Qli(t){this.hfi=t}ofi(){const t=(0,f9.default)(),i=(0,_9.default)((0,f9.default)(),this.afi.kdi()),s=(0,v9.default)((0,f9.default)(),this.ufi.kdi());return(0,m9.default)(t,i,s),(0,g9.default)(t,t),t}cfi(){this.dfi=this.ofi()}get qli(){return new Float32Array(this.dfi)}lfi(){this.cfi(),this.rfi()}hr(){this.afi=new Vr,this.$li=new Ea,this.lfi()}ffi(t){const i=this.ufi.Bdi();i.dO(t),this.$li=i.Fdi()}vfi(t){this.$li=t.Fdi()}get _fi(){return this.ifi}set _fi(t){this.ifi=t,this.rfi()}get gfi(){return this.sfi}set gfi(t){this.sfi=t,this.rfi()}get mo(){return(new Vr).xft(this.afi)}set mo(t){this.afi=t,this.cfi()}get $li(){return(new Ea).xft(this.ufi)}set $li(t){this.ufi=t,this.cfi()}constructor(t){this.ifi=72*_.PI/180,this.sfi=1.77,this.efi=.1,this.nfi=100,this.Hli="none",this.afi=void 0,this.ufi=void 0,this.hfi=void 0,this.dfi=void 0,this.afi=new Vr,this.ufi=new Ea,this.hfi=this.tfi(),this.dfi=this.ofi(),t&&(this.Hli=t)}};r();var S9=class extends Kt{xa(){return new T9}constructor(){super("Vdi")}},T9=class extends sh{constructor(){super("directionchange")}},k9=1e-4,E9=class extends fr{mfi(){od.xr?(od.xr.addEventListener("devicechange",this.pfi),this.pfi()):this.yDt("Your browser does not support WebXR",Ne.VR_PLATFORM_UNSUPPORTED)}wfi(){this.oa.Ma.wn(Ze.pa,this.bn),this.oa.wn(Gu.yn,this.bn),this.oa.wn(d.do,this.fo),this.oa.wn(d.Qw,this.FH)}yfi(){var t;this.bfi||(this.bfi=h.createElement("canvas"),this.bfi.className="theoplayer-vr",this.bfi.style.zIndex="2",this.bfi.style.background="black",this.bfi.style.display="none",this.oa.xe.appendChild(this.bfi),Bl(this.bfi));const i=null!=(t=this.bfi.getContext("webgl2"))?t:this.bfi.getContext("webgl");i?(this.dli=i,this.Afi=new q6(this,this.bfi)):this.yDt("Your browser does not support WebGL",Ne.VR_PLATFORM_UNSUPPORTED)}async Sfi(){if(!od.xr)return this.Tfi=!1,void(this.kfi=!1);await Promise.all([od.xr.isSessionSupported("inline").then(t=>{this.Tfi=t}).catch(t=>{this.Tfi=!1,this.yDt("exception when calling xr.isSessionSupported for inline session: "+t,Ne.VR_PRESENTATION_ERROR)}),od.xr.isSessionSupported("immersive-vr").then(t=>{this.kfi=t}).catch(t=>{this.kfi=!1,this.yDt("exception when calling xr.isSessionSupported for immersive-vr session: "+t,Ne.VR_PRESENTATION_ERROR)})])}Efi(){this.Rfi&&(this.xfi(this.Ifi,this.Pfi),this.Cfi())}xfi(t,i){const s=this.dli;if(!s||t===GP.NONE)return;let e,n;this.Nfi.uli(),t===GP.PM360?(e=2*_.PI,n=-_.PI/2):(e=_.PI,n=-_.PI);const r=new o9(16,60,40,0,e),h=[],o=[];for(let t=0;t<r.Rli.length;t++){const s=r.Rli[t];switch(i){case Wu.NONE:h.push(s),o.push(s);break;case Wu.VERTICAL:h.push(new H6(s.x,.5*s.y)),o.push(new H6(s.x,.5*s.y+.5));break;case Wu.HORIZONTAL:h.push(new H6(.5*s.x,s.y)),o.push(new H6(.5*s.x+.5,s.y))}}r.kli.forEach(t=>{t.x*=-1});const a=new r9(r.kli,r.Eli,h),u=new r9(r.kli,r.Eli,o);this.Dfi=new l9(s);const c=new b9(s,a,this.Dfi,"left");c.$li.y=n,this.Nfi.ali(c);const d=new b9(s,u,this.Dfi,"right");d.$li.y=n,this.Nfi.ali(d)}Cfi(){this.dli&&(this.bfi.style.display="block",this.Bfi(),this.oa.mn(d.uo,this.Mfi),this.Tfi&&(this.oa.ux?this.oa.wn(d.uo,this.Mfi):this.Mfi()))}Lfi(){this.Ofi(),this.oa.mn(d.uo,this.Mfi),this.bfi&&(this.bfi.style.display="none")}Ffi(){this.Vfi(),this.Wfi()}async Ufi(){if(!this.Gfi&&this.Tfi)try{const t=await $s(od.xr.requestSession("inline"),this.hW.jg);let i;i=As.Ks?As.u_?"viewer":"local":"viewer";const s=await t.requestReferenceSpace(i);t.addEventListener("end",this.Vfi),this.Xfi=s,this.Gfi=t,this.Afi.KV(),this.Zfi(),await t.updateRenderState({baseLayer:new XRWebGLLayer(t,this.dli),inlineVerticalFieldOfView:this.ifi*X6})}catch(t){this.Vfi(),this.yDt(t,Ne.VR_PRESENTATION_ERROR)}}Vfi(){this.Gfi&&(this.Ofi(),this.Afi.qV(),this.Gfi.removeEventListener("end",this.Vfi),this.Gfi.end().catch(ol),this.Gfi=null,this.Bfi())}async Hfi(){if(!this.zfi&&this.kfi){this.Ofi();try{const t=await $s(od.xr.requestSession("immersive-vr"),this.hW.jg),i=await t.requestReferenceSpace("local");t.addEventListener("end",this.Wfi),this.Yfi=i,this.zfi=t,await this.Kfi(),this.Zfi()}catch(t){this.Wfi(),this.yDt(t,Ne.VR_PRESENTATION_ERROR)}}}async Kfi(){const t=this.dli,i=this.zfi;this.bfi&&t&&i&&!this.qfi&&(this.bfi.addEventListener("webglcontextlost",t=>{t.preventDefault()}),this.bfi.addEventListener("webglcontextrestored",()=>{this.xfi(this.Ifi,this.Pfi)}),this.qfi=!0,await t.makeXRCompatible(),await i.updateRenderState({baseLayer:new XRWebGLLayer(i,t)}))}Bfi(){if(!this.zfi&&this.dli){const t=this.dli,i=this.bfi.clientWidth,s=this.bfi.clientHeight;if(0===i||0===s)return;const e=Zd.Zs.wm;this.bfi.width=i*e,this.bfi.height=s*e,t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight)}}Zfi(){null===this.jfi&&(this.Qfi(),this.Jfi?this.jfi=this.Jfi.requestAnimationFrame(this.$fi):this.tvi())}Ofi(){null!==this.jfi&&(this.tvi(),this.Jfi&&this.Jfi.cancelAnimationFrame(this.jfi),this.jfi=null)}Qfi(){if(null!==this.ivi)return;const t=this.oa.Zx();if(void 0===t||!(t instanceof HTMLVideoElement))return void 0;if("function"!=typeof t.requestVideoFrameCallback)return;const i=()=>{this.Dfi.Xli(this.oa),this.ivi=t.requestVideoFrameCallback(i)};this.evi=t,this.ivi=t.requestVideoFrameCallback(i)}tvi(){var t,i;null!==this.ivi&&(null==(i=this.evi)||null==(t=i.cancelVideoFrameCallback)||t.call(i,this.ivi),this.evi=null,this.ivi=null)}nvi(){return!!this.rvi||(As.ru?this.hvi&&this.ovi:this.hvi)}avi(){const t=DeviceMotionEvent.requestPermission;"function"==typeof t&&t().then(t=>{this.ovi="granted"===t})}uvi(){return(!this.ux()||Boolean(this.cvi))&&this.fvi()}ux(){return this.oa.ux}fvi(){return this.oa.Sx>=2}get vvi(){return this._vi}set vvi(t){const i=this.qlt;this._vi=t,this.qlt!==i&&this.So(new Dr)}get Rfi(){return this.Ifi!==GP.NONE}get Ifi(){return this.gvi}set Ifi(t){const i=this.qlt;this.gvi=t,this.qlt!==i&&this.So(new Dr)}get kfi(){return this.mvi}set kfi(t){const i=this.mvi;this.mvi=t,this.mvi!==i&&this.So(new Dr)}get pvi(){return this.kfi}get Jfi(){return this.zfi||this.Gfi}get zfi(){return this.rvi}set zfi(t){const i=this.qlt;this.rvi=t,this.qlt!==i&&this.So(new Dr)}get wvi(){return this.Yfi||this.Xfi}get yvi(){const t=this.bvi.Bdi();return{yaw:t.Mdi*Z6,pitch:t.Ldi*Z6,roll:t.Odi*Z6}}set yvi(t){const i=R9(t&&t.pitch||0)*X6,s=R9(t&&t.roll||0)*X6,e=R9(t&&t.yaw||0)*X6,n=new z6(e,i,s),r=this.bvi.Bdi(),h=this.Avi.Bdi();this.bvi=n.Fdi(),this.Avi=n.dF(r).dO(h).Fdi()}get $di(){const t=this.Avi.Bdi();return{yaw:t.Mdi,pitch:t.Ldi,roll:t.Odi}}set $di(t){const i=x9(t&&t.pitch||0),s=x9(t&&t.roll||0),e=x9(t&&t.yaw||0),n=new z6(e,i,s);this.Avi=n.Fdi()}get qlt(){return this.vvi?this.zfi?K6.Ya:K6.Udi:K6.Os}get Svi(){return null!==this.zfi}set Svi(t){const i=this.Svi;t&&this.kfi?this.Hfi():this.Wfi(),this.Svi!==i&&this.So(new j6)}get Tvi(){return this.hvi}set Tvi(t){null===this.rvi&&(this.hvi=t,t&&As.ru&&this.avi())}get kvi(){return this.ifi}set kvi(t){t&&t>=0&&t<=180&&(this.ifi=t,null!==this.Gfi&&this.Gfi.updateRenderState({inlineVerticalFieldOfView:this.ifi*X6}))}yDt(t,i){this.So(new $e(new Wt(i,t)))}Evi(){const t=this.oa.nu();return t&&t.vr}kn(){this.hW.Jg(),this.Ffi(),this.Vo(),this.bfi&&(je(this.bfi),this.bfi=void 0),this.dli=void 0,this.Afi&&(this.Afi.kn(),this.Afi=void 0),this.oa=void 0}constructor(t){super(),this.oa=void 0,this.Ca=void 0,this.hW=new ui,this.Tfi=!1,this.mvi=!1,this.bvi=new Ea,this.Rvi=new Ea,this.Avi=new Ea,this.ifi=74,this.hvi=!1,this.qS=void 0,this.Pfi=Wu.NONE,this._vi=!1,this.gvi=GP.NONE,this.bfi=void 0,this.Dfi=void 0,this.dli=void 0,this.Nfi=new J6,this.Afi=void 0,this.Gfi=null,this.rvi=null,this.Xfi=null,this.Yfi=null,this.qfi=!1,this.jfi=null,this.evi=null,this.ivi=null,this.cvi=0,this.ovi=!1,this.pfi=()=>{const t=this.Tfi;this.Sfi().then(()=>{this.Tfi?t||this.Gfi||this.rvi||this.Efi():this.yDt("Inline session not available. Panorama functionality will not work.",Ne.VR_PRESENTATION_ERROR)})},this.fo=()=>{var t;this.Lfi(),this.Ffi(),null==(t=od.xr)||t.removeEventListener("devicechange",this.pfi);const i=this.Evi();this.qS=i,this.vvi=Y(i),this.Pfi=(null==i?void 0:i.stereoMode)||Wu.NONE,this.Ifi=(null==i?void 0:i.panoramaMode)||GP.NONE,i&&(this.yfi(),this.Efi(),this.mfi())},this.Mfi=()=>{this.Ufi()},this.Wfi=()=>{this.zfi&&(this.Ofi(),this.zfi.removeEventListener("end",this.Wfi),this.zfi.end().catch(ol),this.zfi=null,this.Yfi=null,this.qfi=!1,this.Gfi?this.Zfi():this.Ufi())},this.bn=()=>{this.Bfi()},this.$fi=(t,i)=>{if(!this.dli)return;const s=this.dli,e=this.Jfi;if(null===this.ivi&&this.uvi()&&(this.Dfi.Xli(this.oa),this.cvi>0&&(this.cvi-=1)),null===e||void 0===i)return void 0;this.jfi=e.requestAnimationFrame(this.$fi);const n=e.renderState.baseLayer,r=i.getViewerPose(this.wvi);if(void 0===n||void 0===r)return void 0;s.bindFramebuffer(s.FRAMEBUFFER,n.framebuffer);let h=new z6,o=0;for(const t of r.views){const i=new A9(t.eye);if(i.Qli=t.projectionMatrix,this.nvi()){let s;if(As.Ks&&As.u_&&null===this.rvi){if(s=t.transform.inverse.orientation,0===s.x&&0===s.y&&0===s.z&&1===s.w)return}else s=t.transform.orientation;i.$li=new Ea(s.x,s.y,s.z,s.w)}this.Gfi&&i.ffi(this.Avi.Bdi()),h=h.dO(i.$li.Bdi()),o+=1;const e=n.getViewport(t);e&&s.viewport(e.x,e.y,e.width,e.height),this.Nfi.hli(s,i)}const a=new z6(h.Mdi/o,h.Ldi/o,h.Odi);this.bvi=a.Fdi(),function(t,i){const s=t.Pdi(i);return 1-s*s<k9}(this.bvi,this.Rvi)||(this.Rvi.xft(this.bvi),this.So(new S9))},this.FH=()=>{this.cvi=5},this.oa=t,this.Ca=function(t){let i;const s={get stereo(){return t.Svi},set stereo(i){t.Svi=i},get useDeviceMotionControls(){return t.Tvi},set useDeviceMotionControls(i){t.Tvi=i},get direction(){return t.yvi},set direction(i){t.yvi=i},get verticalFOV(){return t.kvi},set verticalFOV(i){t.kvi=i},get canPresentVR(){return t.pvi},get state(){return t.qlt},addEventListener(t,s){i.wn(t,s)},removeEventListener(t,s){i.mn(t,s)}};return i=new KN(t,Y6,s),s}(this),this.wfi()}};function R9(t){return Yl(t+180,360)-180}function x9(t){return Yl(t+_.PI,2*_.PI)-_.PI}Th(function(t){return class extends t{xa(){return Qr(super.xa(),{vr:this.tli.Ca})}kn(){this.tli.kn(),super.kn()}constructor(t,i){super(t,i),this.tli=void 0,this.tli=new E9(this)}}},Rh.lu),r(),r();var I9=class extends ua{get Ca(){return this.hu||(this.hu=function(t){let i;const s={get status(){return t.rk},get tasks(){return t.vei},get network(){return t.JH.Ca},createTask:(i,s)=>t.xvi(i,s),addEventListener(t,s){i.wn(t,s)},removeEventListener(t,s){i.mn(t,s)}};return i=new Is(t,s),s}(this)),this.hu}get rk(){return this.Ivi.rk}get vei(){return this.Ivi.vei.Ca}get JH(){return this.Fet}xvi(t,i,s){let e,n;if(void 0===s&&(s="persistent"),!t)throw new m("Unexpected - The source description is undefined");if(e=bc(t),n=J5(i),hu(e))throw new m("Invalid source description");return this.Ivi.uei(e,n).Ca}constructor(t,i){super(),this.Ivi=void 0,this.Fet=void 0,this.hu=void 0,this.Ivi=t,this.Fet=i,this.Ivi.wn("kot",this.Rs)}};var P9=function(){const t=new BN(Zd.AR,!1),i=gc.Bg,s=new r4(t),e=new Q5(i,s),n=new LN(t),r=new l5(i.lRt,e,"persistent");return new I9(r,n)}().Ca;function C9(t,i){if("function"==typeof t.getAll){return N9(void 0===i?t.getAll():t.getAll(i))}return function(t){const i=new gs,s=[];return t.onsuccess=()=>{const e=t.result;e&&e.value?(s.push(e.value),e.continue()):i.Hy(s)},t.onerror=()=>{i.zy(t.error)},i.Yy}(void 0===i?t.openCursor():t.openCursor(i))}function N9(t){return new Promise((i,s)=>{t.onsuccess=()=>{i(t.result)},t.onerror=()=>{s(t.error)}})}r(),r(),r(),r(),r(),r();var D9=class{Jg(){if(this.ro)try{this.aRt.abort(),this.ro=!1}catch(t){}}constructor(t){this.aRt=void 0,this.Yy=void 0,this.ro=void 0,this.aRt=t,this.ro=!0,this.Yy=new Promise((t,i)=>{this.aRt.oncomplete=()=>{this.ro=!1,t()},this.aRt.onerror=()=>{this.ro&&(this.ro=!1,i(this.aRt.error||new m("Transaction error")))},this.aRt.onabort=()=>{this.ro=!1,i(new m("Transaction aborted"))}})}};async function B9(t,i,s){const e=new D9(t);try{const[t]=await Promise.all([i(s),e.Yy]);return t}catch(t){if(!e.ro)throw new rh("IDBTransaction committed prematurely",t);throw t}finally{e.Jg()}}var M9=class{get l(){return this.gE.l}QEt(t){return Promise.resolve("persistent"===t)}XSt(t,i){if(void 0===i&&(i="persistent"),"persistent"!==i)return Promise.reject(Aa(i));return N9(this.Pvi(wa._Rt).put(t))}async JEt(t,i){if(void 0===i&&(i="persistent"),"persistent"!==i)return Promise.reject(Aa(i));for(const s of t)await this.XSt(s,i)}async Wy(t){return Boolean(await this.Uy(t))}Uy(t){return N9(this.Pvi(wa.vRt).get(t))}$Et(t,i){return N9(this.Pvi(wa.vRt).index(i).get(t))}async zEt(t){const i=[];for(const s of t){const t=await this.Uy(s);t&&i.push(t)}return i}tRt(){return C9(this.Pvi(wa.vRt))}iRt(t){return C9(this.Pvi(wa.vRt),t)}sRt(t,i){return C9(this.Pvi(wa.vRt).index(i),t)}vS(t){return N9(this.Pvi(wa._Rt).delete(t))}async eRt(t){for(const i of t)await this.vS(i)}nRt(){return N9(this.Pvi(wa._Rt).clear())}Pvi(t){if(!this.Cvi)throw new m("Lock was released");if(!function(t,i){return t===wa.vRt&&i===wa.vRt||i===wa._Rt}(t,this.Cvi.mode))throw new m("Incompatible transaction mode: "+this.Cvi.mode+", expected "+t);return this.Cvi.objectStore(this.l)}Nvi(){this.gE.Dvi(this),this.Cvi=void 0}constructor(t,i){this.gE=void 0,this.Cvi=void 0,this.gE=t,this.Cvi=i}};var L9=class{QEt(t){return Promise.resolve("persistent"===t)}XSt(t,i){return void 0===i&&(i="persistent"),"persistent"!==i?Promise.reject(Aa(i)):this.aRt(wa._Rt,i=>i.XSt(t))}JEt(t,i){return void 0===i&&(i="persistent"),"persistent"!==i?Promise.reject(Aa(i)):this.aRt(wa._Rt,i=>i.JEt(t))}Wy(t){return this.aRt(wa.vRt,i=>i.Wy(t))}Uy(t){return this.aRt(wa.vRt,i=>i.Uy(t))}$Et(t,i){return this.aRt(wa.vRt,s=>s.$Et(t,i))}zEt(t){return this.aRt(wa.vRt,i=>i.zEt(t))}tRt(){return this.aRt(wa.vRt,t=>t.tRt())}iRt(t){return this.aRt(wa.vRt,i=>i.iRt(t))}sRt(t,i){return this.aRt(wa.vRt,s=>s.sRt(t,i))}vS(t){return this.aRt(wa._Rt,i=>i.vS(t))}eRt(t){return this.aRt(wa._Rt,i=>i.eRt(t))}nRt(){return this.aRt(wa._Rt,t=>t.nRt())}YRt(t){return this.Bvi(),this.MRt=new M9(this,t),this.MRt}Bvi(){if(void 0!==this.MRt)throw new m("Already locked")}Dvi(t){if(this.MRt!==t)throw new m("Incorrect lock");this.MRt=void 0}Zo(t){return this.ta.Zo(t)}aRt(t,i){return this.Zo(()=>this.Mvi(t,i))}async Mvi(t,i){this.Bvi();const s=this.Lvi.transaction(this.l,t),e=this.YRt(s);try{return await B9(s,i,e)}finally{e.Nvi()}}Ovi(t){this.Bvi();const i=this.Lvi.transaction(this.l,t);return this.YRt(i)}static Fvi(t,i){let s;const e=new Promise(t=>{s=t}),n=t.reduce((t,i)=>t.then(()=>{let t;const s=new Promise(i=>{t=i});return i.Zo(()=>(t(),e)).catch(ol),s}),Promise.resolve());return s(n.then(i)),e}constructor(t,i){this.Lvi=void 0,this.l=void 0,this.MRt=void 0,this.ta=new Fu,this.Lvi=t,this.l=i}};r(),r(),r(),r(),r();var O9={yN:17,Vvi:async t=>{const{transaction:i,database:s}=t,e=i.objectStoreNames;if(e&&e.length)for(let t=0;t<e.length;t++)s.deleteObjectStore(e[t]);s.createObjectStore(U9,{keyPath:"id"}),s.createObjectStore(G9,{keyPath:"key"}),s.createObjectStore(X9,{keyPath:"key"});s.createObjectStore(Z9,{keyPath:"segmentURLsegmentByteRange"}).createIndex("manifestURL","manifestURL");s.createObjectStore(H9,{keyPath:"segmentURLsegmentByteRange"}).createIndex("manifestURL","manifestURL")}},F9=class{async Wvi(t){for(const i of this.Uvi)this.Gvi<i.yN&&await i.Vvi(t)}constructor(t){this.Gvi=void 0,this.Gvi=t}},V9=class extends F9{get Uvi(){return[O9]}},W9=new class{Xvi(t){this.Zvi=t}Rst(t){return this.Zvi(t)}constructor(){this.Zvi=t=>new V9(t)}},U9="cachingTask",G9="licences",X9="manifest",Z9="segment",H9="segmentMetadata";async function z9(){!function(){if("undefined"==typeof indexedDB)throw new m("Indexed database unavailable")}();const t=indexedDB.open("theoplayer-cache-database",18);return t.addEventListener("upgradeneeded",Y9),await N9(t)}async function Y9(t){const i=t.oldVersion<=18?t.oldVersion:-1,s=t.target,e=s.result,n=s.transaction,r=W9.Rst(i),h={database:e,transaction:n};await B9(n,t=>r.Wvi(t),h)}var K9=class{static get Bg(){return this.dbt||(this.dbt=z9()),this.dbt}};K9.dbt=void 0,r();var q9=class{aRt(t){return t(this)}Nvi(){this.cRt.Nvi(),this.ict.Nvi(),this.dRt.Nvi(),this.lRt.Nvi(),this.fRt.Nvi()}constructor(t,i){this.cRt=void 0,this.ict=void 0,this.dRt=void 0,this.lRt=void 0,this.fRt=void 0,this.cRt=t.cRt.YRt(i),this.ict=t.ict.YRt(i),this.dRt=t.dRt.YRt(i),this.lRt=t.lRt.YRt(i),this.fRt=t.fRt.YRt(i)}};gc.Ba(class t{static async Rst(){const i=await K9.Bg;return new t(i)}aRt(t){const i=this.allCollections;return L9.Fvi(i,()=>this.Mvi(i,t))}async Mvi(t,i){const s=t.map(t=>t.l),e=this.Lvi.transaction(s,wa._Rt),n=new q9(this,e);try{return await B9(e,i,n)}finally{n.Nvi()}}get allCollections(){return[this.ict,this.cRt,this.dRt,this.lRt,this.fRt]}constructor(t){this.Lvi=void 0,this.cRt=void 0,this.ict=void 0,this.dRt=void 0,this.lRt=void 0,this.fRt=void 0,this.Lvi=t,this.cRt=new L9(t,H9),this.ict=new L9(t,Z9),this.dRt=new L9(t,X9),this.lRt=new L9(t,U9),this.fRt=new L9(t,G9)}}.Rst),r(),r(),r();var j9=class{Hvi(t){const i=this.Ij.xR(),s=t.createGain();for(const e of i){t.createMediaElementSource(e).connect(s)}return s}get Ca(){return this.hu||(this.hu=this.xa()),this.hu}xa(){const t=this;return{createAudioSourceNode:i=>t.Hvi(i)}}constructor(t){this.Ij=void 0,this.hu=void 0,this.Ij=t}};Th(function(t){return class extends t{xa(){const t=this.zvi.Ca;return Qr(super.xa(),{get audio(){return t}})}constructor(t,i){super(t,i),this.zvi=void 0,this.zvi=new j9(this.Pa)}}},Rh.lu),r(),r();Th(function(t){return class i extends t{Ta(t){const s=i.Yvi(this.Cd.analytics),e=i.Yvi(t?t.analytics:void 0);s||e?this.Kvi(Jr({},s,e)):this.qvi&&this.qvi.disable(),super.Ta(t)}Kvi(t){if(this.qvi)this.qvi.enable(),this.qvi.setOptions(t);else{const i=s.youbora;if(!i)throw new m("Youbora JavaScript library not loaded.");if(!i.adapters.TheoPlayer2)throw new m("TheoPlayer2 adapter not available on Youbora JavasScript library");const e=new i.Plugin(t);e.setAdapter(new i.adapters.TheoPlayer2(this.Ca)),this.Jc&&i.adapters.TheoPlayer2.NativeAdsAdapter&&e.setAdsAdapter(new i.adapters.TheoPlayer2.NativeAdsAdapter(this.Ca)),this.qvi=e}}static Yvi(t){if(t){const i=t.filter(t=>"youbora"===t.integration);if(0===i.length)return;if(i.length>1)throw new m("Only one youbora analytics configuration expected");const s=i[0],{integration:e}=s;return $S(s,["integration"])}}kn(){this.qvi&&this.qvi.disable(),super.kn()}constructor(t,i){super(t,i),this.qvi=void 0}}},Rh.rnt),r(),r(),r();var Q9=1,J9=0,$9=1e3,t8=class t extends sS{jvi(){const t=this.ct===1/0,i=t?Q9:J9,s=t?-1:this.ct,e=vl(this.oa.rt.CI,this.Qvi);this.Jvi.setPresentationInformation(new this.$vi(i,s,e))}Qvi(t){const i=t.QI.CI,s=[];for(let t=0;t<i.length;t++){const e=i[t];e.Ti&&e.Mi&&s.push({trackIdx:t,bitrate:e.EG,width:e.Ti,height:e.Mi,codecIdentifier:e.lrt})}return s}t_i(){return this.oa.FR()*$9}get ct(){return this.oa.Nd()*$9}get i_i(){return this.s_i}get e_i(){return this.n_i}set e_i(t){this.n_i=t,t&&this.Jvi.reportPlayerState(t)}set r_i(t){this.h_i=t}o_i(){return v(()=>{this.a_i(),this.u_i()},t.c_i)}RBt(){this.oa.Jc&&(this.oa.Jc.wn("Nnt",this.d_i),this.oa.Jc.wn("Dnt",this.l_i),this.oa.Jc.wn("x3t",this.yui),this.oa.Jc.wn("n4t",this.f_i)),this.oa.wn(d.Nw,this.v_i),this.oa.wn(sa.ma,this.i9),this.oa.wn(d.zw,this.__i),this.oa.wn(d.uo,this.Mfi),this.oa.wn(Vo.SM,this.LH),this.oa.wn(d.jw,this.ZK),this.oa.wn(d.Qw,this.FH),this.oa.wn(Vo.AM,this.BH),this.oa.wn(d.ey,this.g_i)}xBt(){this.oa.Jc&&(this.oa.Jc.mn("Nnt",this.d_i),this.oa.Jc.mn("Dnt",this.l_i),this.oa.Jc.mn("x3t",this.yui),this.oa.Jc.mn("n4t",this.f_i)),this.oa.mn(d.Nw,this.v_i),this.oa.mn(sa.ma,this.i9),this.oa.mn(d.zw,this.__i),this.oa.mn(d.uo,this.Mfi),this.oa.mn(Vo.SM,this.LH),this.oa.mn(d.jw,this.ZK),this.oa.mn(d.Qw,this.FH),this.oa.mn(Vo.AM,this.BH),this.oa.mn(d.ey,this.g_i)}kn(){p(this.m_i),this.xBt()}constructor(t,i,s,e=MMPlayerState,n=MMAdState,r=MMPresentationInfo){super(),this.oa=void 0,this.qS=void 0,this.Jvi=void 0,this.p_i=void 0,this.w_i=void 0,this.$vi=void 0,this.y_i=void 0,this.s_i=void 0,this.h_i=void 0,this.n_i=void 0,this.b_i=void 0,this.m_i=void 0,this.d_i=void 0,this.l_i=void 0,this.yui=void 0,this.f_i=void 0,this.g_i=void 0,this.v_i=void 0,this.i9=void 0,this.__i=void 0,this.Mfi=void 0,this.LH=void 0,this.ZK=void 0,this.FH=void 0,this.BH=void 0,this.u_i=void 0,this.a_i=void 0,this.oa=t,this.qS=i,this.Jvi=s,this.p_i=e,this.w_i=n,this.$vi=r,this.y_i=!0,this.s_i=!1,this.h_i=void 0,this.n_i=void 0,this.b_i=void 0,this.d_i=t=>{const i=t.xnt;i.M0t();var s;s=i.pnt().duration;const e="linear"===i.pnt().type;i.L0t(),i.N0t();e&&(this.s_i=!0),this.r_i=this.w_i.AD_IMPRESSION,this.r_i=this.w_i.AD_STARTED},this.l_i=t=>{this.s_i=!1,this.r_i=this.w_i.AD_COMPLETED},this.yui=t=>{t.zQt===Cu.ADBLOCK?this.r_i=this.w_i.AD_BLOCKED:this.r_i=this.w_i.AD_ERROR},this.f_i=()=>{this.r_i=this.w_i.AD_SKIPPED},this.g_i=t=>{var i,s,e,n;t.Gk===Mo.Nk&&(this.b_i&&t.Iz!==this.b_i&&this.Jvi.reportABRSwitch(this.b_i,t.Iz),this.b_i=t.Iz,this.Jvi.reportChunkRequest(new MMChunkInformation(t.QN,t.Iz,t.VB,t.aut.Yu,void 0,void 0,null!=(e=null==(i=t.aut.Aat)?void 0:i[0])?e:0,null!=(n=null==(s=t.aut.Aat)?void 0:s[1])?n:-1)))},this.v_i=t=>{this.e_i=this.p_i.STOPPED,this.So(t)},this.i9=t=>{this.e_i=this.p_i.ERROR,this.Jvi.reportError(t.error,this.t_i())},this.__i=()=>{this.i_i?this.r_i=this.w_i.AD_PAUSED:this.e_i=this.p_i.PAUSED},this.Mfi=()=>{this.i_i&&(this.r_i=this.w_i.AD_PLAY)},this.LH=()=>{this.i_i?(this.h_i===this.w_i.AD_PAUSED&&(this.r_i=this.w_i.AD_RESUMED),this.r_i=this.w_i.AD_PLAYING):(this.y_i&&(this.y_i=!1,this.jvi(),this.e_i=this.p_i.STARTED),this.e_i!==this.p_i.PAUSED&&this.e_i!==this.p_i.BUFFERING||(this.e_i=this.p_i.RESUMED))},this.ZK=()=>{this.Jvi.reportPresentationSize(this.oa.Mx,this.oa.Nx)},this.FH=t=>{this.i_i||this.e_i!==this.p_i.PAUSED||this.Jvi.reportPlayerSeekCompleted(t.currentTime*$9)},this.BH=()=>{this.i_i||(this.e_i=this.p_i.BUFFERING)},this.u_i=()=>{this.Jvi.reportDownloadRate(_.floor(bu.Bg._G()))},this.a_i=()=>{this.i_i||this.Jvi.reportPlaybackPosition(this.t_i())},this.e_i=this.p_i.INITIALIZED,this.RBt(),this.m_i=this.o_i()}};t8.c_i=2e3,Th(function(t){return class extends t{kn(){super.kn(),this.A_i()}constructor(t,i){super(t,i),this.S_i=void 0,this.T_i=void 0,this.k_i=()=>{this.T_i=void 0,this.A_i();const t=super.nu();t&&(this.T_i=function(t,i){const s=function(t,i){if(t&&t.analytics)for(const i of t.analytics)if("smartsight"===i.integration)return i;if(i&&i.analytics)for(const t of i.analytics)if("smartsight"===t.integration)return t;return}(t,i);if(!s)return;return s}(t,this.Cd)),this.E_i()},this.E_i=()=>{if(!this.S_i&&this.T_i&&this.bt&&this.bt.src&&!this.ux){const t=MMSmartStreaming.getInstance();!function(t,i,e){t.registerMMSmartStreaming(e.playerName,e.customerID,e.subscriberID,e.domainName),t.reportComponent("THEOSDK"),t.reportPlayerInfo("THEOplayer","THEOplayer","9.11.0"),t.reportDeviceInfo(void 0,void 0,void 0,void 0,void 0,s.innerWidth,s.innerHeight),t.initializeSession("QBRModeDisabled",i,e.metaURL,e.assetID)}(t,this.bt.src,this.T_i),this.S_i=new t8(this,this.T_i,t),this.S_i.wn("ended",this.A_i)}},this.A_i=()=>{this.S_i&&(this.S_i.kn(),this.S_i=void 0)},this.wn(d.do,this.k_i),this.wn(d.Rw,this.E_i),this.wn(d.uo,this.E_i)}}},Rh.rnt),r(),r();var i8=String.fromCharCode(95);var s8=class t{get Ca(){return this.hu||(this.hu=function(t){return{get adsManager(){return t.adsManager},get ids(){return t.ids},get adContainer(){return t.adContainer},get imaSDK(){return t.imaSDK},get sendEvent(){return t.sendEvent},set sendEvent(i){t.sendEvent=i}}}(this)),this.hu}get id(){return this.rS}get adsManager(){return this.Vri}get ids(){return this.R_i}get adContainer(){return this.z1t}get sendEvent(){return this.x_i}set sendEvent(t){for(const t of this.I_i)this.Vri.removeEventListener(t.type,t.listener);this.I_i=[],this.x_i=t,this.P_i()}get imaSDK(){return!0}C_i(){for(const t in google.ima.AdEvent.Type){const i=google.ima.AdEvent.Type[t];this.Vri.addEventListener(i,this.N_i),this.I_i.push({type:i,listener:this.N_i})}}D_i(){Lr(this.I_i);for(const t in google.ima.AdEvent.Type){const i=google.ima.AdEvent.Type[t];this.Vri.removeEventListener(i,this.N_i)}}B_i(t){this.Jf.push({type:t.type,adVolume:this.adsManager.getVolume()})}P_i(){null==this.x_i||this.x_i.call(this,this.Jf),this.Jf=[]}static M_i(i){return t.L_i[i]||i}constructor(i,s,e,n){this.hu=void 0,this.rS=void 0,this.Vri=void 0,this.R_i=void 0,this.z1t=void 0,this.I_i=void 0,this.x_i=void 0,this.Jf=void 0,this.N_i=i=>{this.B_i({type:t.M_i(i.type)})},this.rS=i,this.Vri=s,this.R_i=e,this.z1t=n,this.I_i=[],this.Jf=[]}};s8.L_i={loaded:"AdLoaded",impression:"AdImpression",start:"AdVideoStart",firstQuartile:"AdVideoFirstQuartile",midpoint:"AdVideoMidpoint",thirdQuartile:"AdVideoThirdQuartile",complete:"AdVideoComplete",pause:"AdPaused",skip:"AdSkipped",volumeChange:"AdVolumeChange"};var e8=class{O_i(t,i){this.F_i=h.createElement("script"),this.F_i.id=t.id,this.F_i.type="text/javascript",t.adContainer.appendChild(this.F_i),this.F_i.src="https://z.moatads.com/"+i+"/moatvideo.js#"+t.id,this.V_i=t.id,s[this.V_i]=t.Ca}W_i(){this.F_i&&je(this.F_i),this.V_i&&(s[this.V_i]=void 0)}constructor(){this.F_i=void 0,this.V_i=void 0}};Th(function(t){return class i extends t{Ta(t){var s,e,n;this.U_i(),null==(s=this.G_i)||s.removeEventListener(google.ima.AdEvent.Type.COMPLETE,this.X_i),null==(e=this.G_i)||e.removeEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.U_i),null==(n=this.G_i)||n.removeEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.Z_i),this.G_i=void 0,this.z1t=void 0,super.Ta(t);const r=t&&t.analytics;this.H_i=i.z_i(r);this.Jc&&this.H_i&&W3()&&this.Y_i()}kn(){var t,i,s;this.U_i(),null==(t=this.G_i)||t.removeEventListener(google.ima.AdEvent.Type.COMPLETE,this.X_i),null==(i=this.G_i)||i.removeEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.U_i),null==(s=this.G_i)||s.removeEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.Z_i),this.G_i=void 0,this.z1t=void 0,this.Jc&&this.Jc.mn("nii",this.rii),super.kn()}Y_i(){this.Jc&&this.Jc.wn("nii",this.rii)}K_i(t,i,s){const e=i8+"moatApi"+_.floor(1e8*_.random());this.q_i=new s8(e,t,i,s),this.q_i.C_i(),this.j_i.O_i(this.q_i,this.H_i.partnerCode)}static z_i(t){if(t){const i=t.filter(t=>"moat"===t.integration);if(0===i.length)return;if(i.length>1)throw new m("Only one Moat analytics configuration expected");return i[0]}}constructor(t,i){super(t,i),this.j_i=void 0,this.H_i=void 0,this.q_i=void 0,this.G_i=void 0,this.z1t=void 0,this.Z_i=()=>{this.K_i(this.G_i,{partnerCode:this.H_i.partnerCode,viewMode:google.ima.ViewMode.NORMAL},this.z1t)},this.rii=t=>{this.G_i=t.Fri,this.z1t=t.Gii,this.U_i(),this.G_i.addEventListener(google.ima.AdEvent.Type.COMPLETE,this.X_i),this.G_i.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.U_i),this.G_i.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.Z_i)},this.X_i=t=>{const i=t.getAd().getAdPodInfo();i.getAdPosition()<i.getTotalAds()&&(this.U_i(),this.Z_i())},this.U_i=()=>{this.q_i&&(this.q_i.D_i(),this.q_i=void 0),this.j_i.W_i()},this.j_i=new e8}}},Rh.rnt),r(),r(),r(),r();var n8="theo-dai-clickthrough",r8="urn:google:dai:2018",h8=class{get Ca(){const t=this,i=this.Q_i;return{contentTimeForStreamTime:i=>t.Toi?t.Toi.koi(i):i,streamTimeForContentTime:i=>t.Toi?t.Toi.Eoi(i):i,replaceAdTagParameters(i){t.Toi&&t.Toi.replaceAdTagParameters(i)},get snapback(){return t.J_i},set snapback(i){t.J_i=i},get sourceTransformer(){return i.$_i},set sourceTransformer(t){i.$_i=t}}}WR(t){this._8.Jg(),this._8=new ui;_e(Ce(this.zri(t,this._8.jg),this._8))}async zri(t,i){if(Ko(i),!this.tgi||!this.Toi)return this.oa.igi(t);if(this.tgi.wnt&&!this.sgi)return;const s=this.oa.FR();if(this.J_i){const e=this.Toi.Xoi(t,s);if(e){this.oa.igi(e),await this.Toi.pw(Bs.AD_BREAK_ENDED,i);if(this.Toi.Goi(t).EO>t)return}}this.oa.igi(t)}Ex(){const t=this.tgi&&this.tgi.wnt;if(t){const i=ZT.jn(this.oa.egi()),s=t.fOt,e=s+t._0t,n=new ZT([s,e]);return i.Mn(n)._s()}return this.oa.egi()}async Hnt(t,i){if(!t)return this.oa.ngi(t,i);let s=t;try{this.oa.nt.wn(Lu.nI,this.rgi),s=await this.Q_i.hgi(t,i),this.tgi&&this.Toi&&(this.ogi=!0)}catch(t){if(Ui(t),t.code===Lt.LICENSE_INVALID)return;const i=new Wt(Ne.SOURCE_NOT_SUPPORTED,"Something went wrong while setting up a Google DAI stream.",t);throw this.$G=xs(i),this.tX=i,this.oa.So(new $e(i)),i}await this.oa.ngi(s,i)}hr(){if(this.ogi){if(this.oa.nt.mn(Lu.nI,this.rgi),this.Iai){this.Iai.mn(M.aI,this.agi);for(const t of this.Iai.L.CI)t.mn(ye.XL,this.ugi);this.Iai=void 0}this.$G=void 0,this.tX=void 0,this._8.Jg(),this.tgi&&this.tgi.hr(),this.Toi&&this.Toi.hr(),this.ogi=!1}}get lt(){return this.$G||this.oa.cgi()}get HR(){return this.tX||this.oa.dgi()}kn(){this.hr(),this.oa.lgi(),this.Toi&&this.Toi.kn()}constructor(t,i,s,e,n){this.oa=void 0,this.Q_i=void 0,this.Toi=void 0,this.tgi=void 0,this.sgi=void 0,this.Iai=void 0,this.$G=void 0,this.tX=void 0,this._8=new ui,this.ogi=!1,this.J_i=!0,this.rgi=t=>{const i=t.Ht;i.Lt===D.WV&&(i.Kp===hr.ID3||i.Kp===hr.EVENT_STREAM&&i.tP===r8)&&(i.Hk=Z.$I,this.Iai=i,i.wn(M.aI,this.agi))},this.agi=t=>{t.SO.wn(ye.XL,this.ugi)},this.ugi=t=>{var i,s;if(this.Toi)if((null==(i=this.Iai)?void 0:i.Kp)===hr.ID3){const i=t.SO.U;"TXXX"===i.id&&this.Toi.Woi({TXXX:i.text})}else if((null==(s=this.Iai)?void 0:s.Kp)===hr.EVENT_STREAM){const i=t.SO.U;this.Toi.Uoi(r8,i,t.HF)}},this.oa=t,this.Toi=i,this.tgi=s,this.Q_i=e,this.sgi=n,s&&i&&this.oa.Jc&&this.oa.Jc.knt(s.uti)}};r(),r();var o8=class extends Le{get fgi(){return this.vgi}get DJt(){return Qc.so}constructor(t,i,s,e=!0){super(s),this.vgi=void 0,this.vgi=e,this.g3t=t,this.m3t=i}},a8=class extends x3{_gi(){const t=[Bs.STARTED,Bs.FIRST_QUARTILE,Bs.MIDPOINT,Bs.THIRD_QUARTILE,Bs.COMPLETE];this.Toi.wn(t,this.ggi),this.Toi.wn(Bs.AD_BREAK_ENDED,this.Foi),this.Toi.wn(Bs.AD_PROGRESS,this.Ioi),this.Toi.wn(Bs.CUEPOINTS_CHANGED,this.Coi)}get X5t(){return this.dti}get a5t(){return this.r5t}mgi(t){let i=t.g7t.fOt,s=this.X0t||this.findAdBreakWithPredicate(i,t=>!t.mx);if(!s){const e=t.g7t._0t;i=this.oa.FR(),s=new o8(e,e,i,!1),s.w3t(),this.Z0t.push(s)}return s}pgi(t){switch(t){case Bs.STARTED:this.dti=!0;break;case Bs.AD_BREAK_ENDED:this.dti=!1}}wgi(t,i,s){if(i)switch(t){case Bs.STARTED:case Bs.FIRST_QUARTILE:case Bs.MIDPOINT:case Bs.THIRD_QUARTILE:case Bs.COMPLETE:this.a5t.So(new vV(this.X0t))}if(s)switch(t){case Bs.STARTED:case Bs.FIRST_QUARTILE:case Bs.MIDPOINT:case Bs.THIRD_QUARTILE:case Bs.COMPLETE:this.a5t.So(new te(this.D0t,this.D0t.Z7t))}switch(t){case Bs.COMPLETE:this.a5t.So(new He(this.D0t,this.U3t.Z7t));break;case Bs.AD_BREAK_ENDED:this.a5t.So(new Xh(this.wnt))}switch(t){case Bs.FIRST_QUARTILE:this.a5t.So(new ke(this.D0t,this.U3t.Z7t));break;case Bs.MIDPOINT:this.a5t.So(new Ks(this.D0t,this.U3t.Z7t));break;case Bs.THIRD_QUARTILE:this.a5t.So(new Ji(this.D0t,this.U3t.Z7t))}}ygi(t){const i=t.xnt,s=this.mgi(i),e=function(t,i){if(t.Jc.length)return!1;for(let s=0;s<i;s++){const i=new S3(t,Cs.nJt);t.b3t(i)}return!0}(s,i.g7t.D8t),n=function(t,i){const s=i.g7t.N8t-1;return t.Jc[s]}(s,i),r=function(t,i){return t.N3t!==S2.READY&&(t.Q7t(i),!0)}(n,i);this.D0t=n,this.X0t=s,s.w3t(),this.wgi(t.type,e,r)}bgi(t){for(const i of this.Z0t)if(zl(t,i.fOt))return i}findAdBreakWithPredicate(t,i){for(const s of this.Z0t)if(zl(s.fOt,t)&&i(s))return s}get Agi(){const t=this.findAdBreakWithPredicate(0,t=>t.fgi);let i=0;return t&&(i=t._0t),i}Sgi(t,i){let s;for(const e of this.Z0t)e.fOt>=t&&e.fOt<=i&&!e.mx&&(!s||e.fOt>=s.fOt)&&(s=e);return s}nN(){}Tnt(t){}hr(){this.D0t&&(this.a5t.So(new He(this.D0t,this.D0t.Z7t)),this.D0t=void 0),this.X0t&&(this.a5t.So(new Xh(this.X0t)),this.X0t=void 0),this.dti=!1,Lr(this.Z0t)}kn(){this.hr(),this.a5t.kn()}Ant(t){}constructor(t,i){super(new sc,Qc.so),this.Toi=void 0,this.oa=void 0,this.Ioi=void 0,this.Coi=void 0,this.ggi=void 0,this.Foi=void 0,this.Toi=t,this.oa=i,this.Ioi=t=>{const i=this.X0t;if(!i||!this.D0t)return;const s=t.Soi.Hoi;this.D0t.Z7t=s.OR,function(t,i){const s=i.N8t,e=i.C8t,n=i.OR,r=Jl(t.Jc.slice(0,s-1),t=>{var i;return null!=(i=t.ct)?i:0});t.g0t=e-n-r}(i,s)},this.Coi=t=>{const i=t.Soi.zoi;if(i)for(const t of i)if(!this.bgi(t.kO)){const i=t.EO-t.kO,s=new o8(i,i,t.kO,!0);this.Z0t.push(s)}},this.ggi=t=>{this.pgi(t.type),this.ygi(t)},this.Foi=t=>{this.dti=!1,this.D0t=void 0;const i=this.wnt;i&&(i.g0t=0,this.wgi(t.type,!1,!1),this.X0t=void 0)},this._gi()}};function u8(t){if(t.sources)if(he(t.sources)){for(const i of t.sources)if(ok(i))return!0}else if(Nc(t.sources))return ok(t.sources);return!1}r();var c8=class{async hgi(t,i){const s=[],e=[];for(const i of t.sources)if(ok(i)){if(!this.Toi)continue;s.push(i)}else e.push(i);if(0===s.length)return t;let n,r;for(;void 0===n&&0!==s.length;){const{Mc:h}=await nP.Bg.hZ(s,t),o=h;Ko(i);try{n=await this.Tgi(o,i),e.push(n)}catch(t){Ui(t),r=t,is(s,o)}}if(0!==t.sources.length&&0===e.length)throw new m("Fatal: unable to play DAI streams.");return r&&Si(r.message),Jr({},t,{sources:e})}async Tgi(t,i){if(!this.Toi)throw new m("Could not find Google\u2019s IMA DAI HTML5 SDK, all DAI sources will be ignored.");const s=this.Toi.pw(Bs.LOADED,i),e=this.Toi.pw(Bs.ERROR,i),n=t.type===We.lP?"dash":"hls";this.Toi.wUt(Jr({},t.ssai,{format:n}));const r=await Promise.race([s,e]);if(r.type===Bs.LOADED){const i=t.type===We.lP?We.lP:We.vP;return CT(Jr({},t,{src:this.$_i?await this.$_i(r.Soi.Yu||""):r.Soi.Yu,type:i}))}throw m(r.Soi.Yoi)}constructor(t){this.Toi=void 0,this.$_i=void 0,this.Toi=t,this.$_i=t=>t}};Th(function(t){return i=>class extends i{xa(){const t=super.xa(),i=t.ads;if(i){const t=this.kgi.Ca;Qr(i,{get dai(){return t}})}return t}get Kl(){return this.Egi}igi(t){super.WR(t)}WR(t,i){this.kgi.WR(t)}egi(){return super.Ex()}Ex(){return this.kgi.Ex()}Ta(t){return this.kgi.hr(),super.Ta(t)}async ngi(t,i){return super.Hnt(t,i)}async Hnt(t,i){return this.kgi.Hnt(t,i)}cgi(){return super.ZR()}dgi(){return super.zR()}ZR(){return this.kgi.lt}zR(){return this.kgi.HR}lgi(){super.kn()}kn(){this.kgi.kn(),this.K1t&&(je(this.K1t),this.K1t.removeEventListener("keydown",this.Rgi),this.K1t.removeEventListener("click",this.Rgi),this.K1t=void 0),this.xgi&&(je(this.xgi),this.xgi=void 0)}constructor(i,s){super(i,s),this.kgi=void 0,this.Egi=!1,this.K1t=void 0,this.xgi=void 0,this.Rgi=t=>{13===t.which&&this.K1t.click(),this.zx()};const e=this.Zx(),n=s.ads.googleIma.useAdUiElementForSsai;var r;const o=null!=(r=s.ads.googleIma.allowSeekingForGoogleDai)&&r;let a,u;try{var c;n?(this.xgi=h.createElement("div"),Bl(this.xgi),this.xgi.className="theo-dai-ad-ui"):(this.K1t=h.createElement("button"),this.K1t.className=n8),a=t(e,this.K1t,this.xgi),u=new a8(a,this);const i=null!=(c=this.K1t)?c:this.xgi;i&&this.xe.appendChild(i),this.Egi=!0}catch(t){this.K1t=void 0,this.xgi=void 0}const d=new c8(a);this.kgi=new h8(this,a,u,d,o),this.K1t&&(this.K1t.addEventListener("keydown",this.Rgi),this.K1t.addEventListener("click",this.Rgi))}}}(function(t,i,e){if(!(s.google&&s.google.ima&&Nc(s.google.ima.dai)))throw new m("Could not find Google\u2019s IMA DAI HTML5 SDK, all DAI sources will be ignored.");const n=u6(),r=new google.ima.dai.api.StreamManager(t,e),h=u6();return new n6(r,i,h&&h!==n?h:void 0)}),Rh.nnt),r(),r(),r();var d8=class{get Igi(){return void 0===this.Pgi?0:(performance.now()-this.Pgi)/1e3}Cgi(t){this.Ngi=t,this.Bgi.Dgi(t),this.oa.wn(d.uo,this.Mfi),this.oa.wn(d.Nw,this.v_i),this.oa.wn(d.vy,this.gui),this.oa.wn(sa.ma,this.i9),this.oa.wn(Vo.AM,this.Mgi),this.oa.wn([Vo.pM,Vo.wM,Vo.SM],this.Lgi),this.oa.wn(d.Iw,this.Ogi),s.addEventListener("beforeunload",this.rBt)}Fgi(){this.oa.mn(d.uo,this.Mfi),this.oa.mn(d.Nw,this.v_i),this.oa.mn(d.vy,this.gui),this.oa.mn(sa.ma,this.i9),this.oa.mn(Vo.AM,this.Mgi),this.oa.mn([Vo.pM,Vo.wM,Vo.SM],this.Lgi),this.oa.mn(d.Iw,this.Ogi),s.removeEventListener("beforeunload",this.rBt),this.Vgi||(this.Bgi.Wgi(this.Ugi),this.Bgi.Ggi()),this.Xgi&&this.Zgi(),this.Ngi=void 0,this.Hgi=!1,this.Vgi=!1,this.Ugi=-1/0,Lr(this.zgi)}Ygi(){this.Hgi&&this.Bgi.Kgi(),this.Pgi=performance.now(),this.qgi=v(this.jgi,6e4)}Zgi(){this.Bgi.Qgi(this.Igi),this.Xgi=!1,this.Pgi=void 0,this.qgi&&(p(this.qgi),this.qgi=void 0)}Jgi(){if(S(this.oa.Nd()))return;const t=10*function(t,i){return _.floor(t/i)}(this.oa.FR()/this.oa.Nd()*100,10);Ft(this.zgi,t)||(this.zgi.push(t),this.Bgi.$gi(t))}constructor(t,i){this.oa=void 0,this.Bgi=void 0,this.Ngi=void 0,this.Hgi=void 0,this.Vgi=void 0,this.zgi=void 0,this.Ugi=void 0,this.tmi=void 0,this.Xgi=void 0,this.qgi=void 0,this.Pgi=void 0,this.Mfi=void 0,this.v_i=void 0,this.gui=void 0,this.Mgi=void 0,this.Lgi=void 0,this.i9=void 0,this.Ogi=void 0,this.rBt=void 0,this.jgi=void 0,this.oa=t,this.Bgi=i,this.Hgi=!1,this.Vgi=!1,this.zgi=[],this.Ugi=-1/0,this.Xgi=!1,this.Mfi=()=>{this.Hgi||(this.Bgi.imi(),this.Xgi&&this.Bgi.Kgi(),this.Hgi=!0)},this.v_i=()=>{this.Bgi.smi(),this.Vgi=!0},this.gui=()=>{this.Ugi<this.oa.FR()&&(this.Ugi=this.oa.FR()),this.Jgi()},this.Mgi=()=>{this.Hgi&&(this.tmi=performance.now(),this.Bgi.emi(this.oa.FR()))},this.Lgi=()=>{this.tmi&&(this.Bgi.nmi((performance.now()-this.tmi)/1e3),this.tmi=void 0)},this.i9=()=>{this.Ugi<this.oa.FR()&&(this.Ugi=this.oa.FR()),this.Bgi.art(this.oa.ZR().message)},this.Ogi=()=>{const t=this.oa.Nd()===1/0;t&&!this.Xgi&&(this.Xgi=t,this.Ygi())},this.rBt=()=>{this.Bgi.Wgi(this.Ugi),this.Bgi.rmi()},this.jgi=()=>{void 0!==this.Pgi&&this.Bgi.hmi(this.Igi)}}};r();var l8=class{Dgi(t){this.omi(["setDocumentTitle",t.itemTitle]),this.omi(["setCustomUrl","https://content.streamone.net/embed/cust=Xo9oT45EptMG/account="+t.accountID+"/item="+t.itemID]),this.omi(["trackPageView"])}imi(){this.ami("item first play","viewing","1")}Ggi(){this.ami("item skipped","skipped","1")}$gi(t){this.ami("item progress","percent",""+t)}rmi(){this.ami("item abandoned","window closed","1")}Wgi(t){this.ami("item time","watched",""+t)}smi(){this.ami("item finished","ended","1")}emi(t){this.ami("buffering started","timestamp",""+t)}nmi(t){this.ami("buffering ended","duration",""+t)}art(t){this.ami("error","message",""+t)}Kgi(){this.ami("livestream first play","viewing","1")}hmi(t){this.ami("livestream progress","duration",""+t)}Qgi(t){this.ami("livestream time","watched",""+t)}ami(t,i,s){this.omi(["trackEvent","Video",t,i,s])}omi(t){const i="undefined"!=typeof _paq?_paq:void 0;i?i.push(t):console.warn("The Piwik library required for the StreamOne pre-integration was not found. Make sure it is loaded before instantiating THEOplayer.")}};r();var f8=class{get umi(){if(!this.cmi)return;const t=this.oa.FR()/this.cmi;return _.floor(4*t)+1}get dmi(){return void 0!==this.cmi}Cgi(){this.qc.wn("Nnt",this.d_i),this.qc.wn("Dnt",this.l_i),this.qc.wn("n4t",this.f_i),this.qc.wn("x3t",this.yui),this.oa.wn(d.vy,this.gui),s.addEventListener("beforeunload",this.rBt)}Fgi(){this.qc.mn("Nnt",this.d_i),this.qc.mn("Dnt",this.l_i),this.qc.mn("n4t",this.f_i),this.qc.mn("x3t",this.yui),this.oa.mn(d.vy,this.gui),Lr(this.lmi),s.removeEventListener("beforeunload",this.rBt),this.cmi=void 0}constructor(t,i,s){this.oa=void 0,this.qc=void 0,this.Bgi=void 0,this.cmi=void 0,this.lmi=void 0,this.d_i=void 0,this.l_i=void 0,this.f_i=void 0,this.yui=void 0,this.gui=void 0,this.rBt=void 0,this.oa=t,this.qc=i,this.Bgi=s,this.lmi=[],this.d_i=()=>{this.cmi=this.oa.Nd(),this.Bgi.fmi(this.cmi)},this.l_i=()=>{this.cmi&&(this.Bgi.vmi(this.cmi),Lr(this.lmi),this.cmi=void 0)},this.f_i=t=>{if(!this.cmi)return;const i=this.cmi-this.cmi*t.s4t;this.Bgi._mi(i),this.cmi=void 0},this.yui=()=>{this.cmi=this.oa.Nd(),this.Bgi.gmi()},this.gui=()=>{const t=this.umi;if(this.dmi&&t&&!Ft(this.lmi,t)){switch(t){case 1:this.Bgi.mmi();break;case 2:this.Bgi.pmi();break;case 3:this.Bgi.wmi();break;case 4:this.Bgi.ymi()}this.lmi.push(t)}},this.rBt=()=>{this.Bgi.bmi()}}};r();var v8=class{fmi(t){this.Bgi.ami("ad start","duration",""+t)}vmi(t){this.Bgi.ami("ad finished","duration",""+t)}_mi(t){this.Bgi.ami("ad skipped","remaining time",""+t)}gmi(){this.Bgi.ami("ad blocker","detected","1")}mmi(){this.Bgi.ami("ad progress","firstQuartile","")}pmi(){this.Bgi.ami("ad progress","secondQuartile","")}wmi(){this.Bgi.ami("ad progress","thirdQuartile","")}ymi(){this.Bgi.ami("ad progress","fourthQuartile","")}bmi(){this.Bgi.ami("ad abandoned","window closed","1")}constructor(t){this.Bgi=void 0,this.Bgi=t}};function _8(t){return t&&"streamone"===t.integration}Th(function(t){return class extends t{kn(){this.mn(d.do,this.fo),this.Ami&&(this.Smi&&this.Smi.Fgi(),this.Tmi&&this.Tmi.Fgi(),this.Ami=!1),super.kn()}constructor(t,i){super(t,i),this.Smi=void 0,this.Tmi=void 0,this.Ami=!1,this.fo=()=>{this.Ami&&(this.Smi.Fgi(),this.Tmi&&this.Tmi.Fgi());const t=this.nu();if(this.Ami=!1,!t)return;const i=function(t){if(t.analytics)for(const i of t.analytics)if(_8(i))return i}(t);i&&(this.Ami=!0,this.Smi.Cgi(i),this.Tmi&&this.Tmi.Cgi())};const s=new l8;if(this.Smi=new d8(this,s),this.Jc){const t=new v8(s);this.Tmi=new f8(this,this.Jc,t)}this.wn(d.do,this.fo)}}},Rh.rnt),r(),r(),r(),r(),r(),r();var g8=class extends XV{async X2(t,i,s){const e=await m8(t);await super.X2(e,i,s),this.kmi(e,i)}async W2(t,i,s){const e=await m8(t);await super.W2(e,i,s),this.kmi(e,i)}kmi(t,i){const s=this.Rmi.Emi;if(void 0===s)return;const e=i.t2;let n;if(this.xmi!==e&&(this.xmi=e,s.setLevelSwitching(e),s.setContainerFormat(2)),function(t){return za.call(t,"kst")}(i)){const t=i.kst,r=i.kst+i.ct;n=i.bV,s.newPts(t,r,"video",e)}else 0;s.appendBuffer(t.hk,"video",e,n)}async vS(t,i,s){var e;await super.vS(t,i,s),null==(e=this.Rmi.Emi)||e.flushBuffer(t,i)}constructor(t,i){super(t),this.Rmi=void 0,this.xmi=void 0,this.Rmi=i,this.xmi=void 0}};async function m8(t){switch(t.Kp){case Vt.fJ:return t;case Vt.NT:{const i=await Zb(t.hk);return{Kp:Vt.fJ,hk:new j(i)}}case Vt.vJ:throw new m("Opaque initialization segments are not supported on web.")}}var p8=class extends Wo{mrt(t){return t.N3===Mo.Nk?new g8(t,this.Rmi):new XV(t)}constructor(t,i){super(t),this.Rmi=void 0,this.Rmi=i,this._rt(t)}},w8=class extends(zV(vn)){get Emi(){return this.Imi}Pmi(){this.Imi=new LCEVCdec.LCEVCdec(this.iX,this.Cmi,{})}be(){super.be(),this.Nmi()}we(){super.we(),this.Cmi.style.display="none"}hr(){return this.Cmi.style.display="none",void 0!==this.Imi&&(this.Imi.close(),this.Pmi()),super.hr()}Zg(){return this.Dmi=!0,void 0!==this.Imi&&(this.Imi.close(),this.Imi=void 0),je(this.Cmi),super.Zg()}XX(t){this.So(new eM(new iu(Lt.ABORTED,t)))}Nmi(){this.SL.iX.style.display="none",this.Cmi.style.display="block"}Hrt(t){return new p8(t,this)}Zrt(t){return new Jo(t)}constructor(t){super(t),this.Cmi=void 0,this.Imi=void 0,this.Dmi=!1,this.Bmi=t=>{this.Dmi||(t||this.XX("LCEVC SDK failed to initialize."),this.Pmi())},this.Mmi=()=>{this.Dmi||this.XX("LCEVC SDK failed to initialize.")},this.Cmi=h.createElement("canvas"),Bl(this.Cmi),this.Cmi.style.display="none";const i=t.iX;var s;i.parentElement.insertBefore(this.Cmi,null!=(s=i.nextSibling)?s:null),LCEVCdec.ready.then(this.Bmi,this.Mmi)}},y8=class extends VV{HX(t){return t===Mo.Nk?(this.Lmi=new w8(super.HX(t)),this.Lmi):super.HX(t)}async RX(t){if(t instanceof w8){this.Lmi=void 0;const i=t;await i.Zg(),await super.RX(i.Drt)}else await super.RX(t)}get Omi(){return this.Lmi}constructor(...t){super(...t),this.Lmi=void 0}},b8=class extends Ur{async kn(){for(const t of this.JL.CI)t.mn(M.EI,this.Fmi);this.rt.mn(Lu.nI,this.Vmi),this.rt.mn(Lu.hI,this.Wmi),await super.kn(),await this.SL.Zg(),await this.xX.RX(this.SL)}constructor(t,i,s,e,n,r,h){const o=new y8(n),a=new ws(o);super(t,i,s,e,a.HX(r),h),this.xX=void 0,this.Umi=void 0,this.Vmi=t=>{t.Ht.wn(M.EI,this.Fmi)},this.Wmi=t=>{t.Ht.mn(M.EI,this.Fmi)},this.Fmi=t=>{var i;const s=null==(i=this.Umi.Omi)?void 0:i.Emi,e=t.Tot.qI;null==s||s.setCurrentLevel(e)},this.xX=a,this.Umi=o,this.JL.wn(Lu.nI,this.Vmi),this.JL.wn(Lu.hI,this.Wmi)}};cs(new class extends MV{xP(t,i,s,e,n,r,h){let o=i;return qz.MS()&&(o=new qz(o)),new b8(s,e,n,r,o,Mo.Nk,t)}async zX(t){if(!t.lcevc)return!1;if(!await super.zX(t))return!1;if(void 0===s.LCEVCdec)throw new Wt(Ne.CONFIGURATION_ERROR,"LCEVC SDK is not loaded.");return!0}KX(){return!1}constructor(...t){super(...t),this.qX=ki.mG}}),r();var A8=class extends F${async kn(){const t=this.rt;for(const i of t.CI)i.mn(M.EI,this.Fmi);t.mn(Lu.nI,this.Vmi),t.mn(Lu.hI,this.Wmi),await super.kn(),await this.xX.RX(this.SL)}constructor(t,i,s,e,n){const r=new y8(t),h=new ws(r);super(h.HX(Mo.Nk),i,s,e,n),this.xX=void 0,this.Umi=void 0,this.Vmi=t=>{t.Ht.wn(M.EI,this.Fmi)},this.Wmi=t=>{t.Ht.mn(M.EI,this.Fmi)},this.Fmi=t=>{var i;const s=null==(i=this.Umi.Omi)?void 0:i.Emi,e=t.Tot.OMt.qI;null==s||s.setCurrentLevel(e)},this.xX=h,this.Umi=r;const o=this.rt;o.wn(Lu.nI,this.Vmi),o.wn(Lu.hI,this.Wmi)}};cs(new class extends W${xP(t,i,s,e,n,r,h){return new A8(i,s,n,r,e)}zX(t,i){if(!t.lcevc)return!1;if(!super.zX(t,i))return!1;if(void 0===s.LCEVCdec)throw new Wt(Ne.CONFIGURATION_ERROR,"LCEVC SDK is not loaded.");return!0}KX(){return!1}constructor(...t){super(...t),this.qX=ki.bG}}),r(),r(),r(),r();var S8=function(t){return t.Gmi="hr",t.Xmi="Zmi",t}({}),T8="freewheel-nonlinear-ad",k8=[d.Iw,d.vy,d._y,d.zw,Vo.SM,d.uo],E8=class t extends r3{Hx(){this.xX.SZ()}Hmi(){this.zmi.wn("Cnt",this.Ymi),this.zmi.wn(["Nnt","Dnt"],this.Kmi),this.zmi.wn("Pnt",this.Jni)}qmi(){this.zmi.mn("Cnt",this.Ymi),this.zmi.mn(["Nnt","Dnt"],this.Kmi),this.zmi.mn("Pnt",this.Jni)}jmi(){this.a5t.au(this.zmi.Qmi)}Jmi(){this.zmi.$mi.wn(k8,this.Rs)}tpi(){this.zmi.$mi.mn(k8,this.Rs)}get M5t(){return this}static get D5t(){return Qc.V0t}get D5t(){return t.D5t}get wnt(){var t;return null!=(t=this.zmi.Qmi.wnt)?t:null}get mnt(){const t=this.zmi.Qmi.U3t;return t?[t]:[]}Tnt(t){}FR(){return this.zmi.$mi.OR}WR(t,i){}Nd(){return this.zmi.$mi.ct}XR(){return this.zmi.$mi.GR}ZR(){return this.$G}zR(){return this.tX}Dx(){return 0}Lx(){return 0}Fx(){return this.zmi.$mi.Ox}Vx(t){this.zmi.$mi.Ox=t}sx(){return this.zmi.$mi.ix}nx(t){this.zmi.$mi.ix=t}Tx(){return this.zmi.$mi.Sx}get ynt(){return this.zmi.Qmi.ynt}get bnt(){return this.zmi.Qmi.bnt}Ex(){return this.zmi.$mi.kx}lx(){return this.zmi.$mi.ux}V5t(t){if(this.X5t||this.zmi.V5t(t),this.zmi.ipi){if(t.type===d.zw&&this.oa.GR)return!0;if(t.type===d.Nw)return this.zmi.epi.spi(),!0}return!1}we(){this.zmi.we()}zx(){this.ux||this.zmi.$mi.zx()}async npi(){if(!this.zmi.rpi)try{await this.zmi.a9t()}catch(t){this.hpi(t,Cu.GENERAL)}}async opi(){if(this.zmi.$mi.G3t)return this.zmi.$mi.Yx(),!1;if(this.zmi.upi)try{await this.zmi.epi.cpi()}catch(t){this.hpi(t,Cu.PLAYBACK)}return!0}get lpi(){return Y(this.ZR())}hpi(t,i){t.name!==S8.Gmi&&this.a5t.So(new Wh(i,"Ads could not be loaded."))}async Yx(){if(this.ux&&this.So(new Ts(this.OR)),await this.npi(),this.lpi)return;const t=await this.opi();!this.lpi&&t&&this.Jni()}Tti(t,i,s){i===rV.gnt&&this.zmi.Tti(t)}be(){this.zmi.be()}nN(){this.zmi.$mi.nN()}Ant(t){}Zx(){return this.qit}xR(){return this.xX.xZ.map(t=>t.iX)}Y5t(t){}async kn(){await this.Kx(),this.zmi.kn(),await this.xX.RX(this.SL),this.qmi(),this.tpi(),this.a5t.Rq(this.zmi.Qmi)}async Kx(){this.zmi.hr(),this.X5t&&(this.oa.be(),this.$2t(),this.we())}constructor(t,i,s,e,n){super(t,i),this.zmi=void 0,this.$G=void 0,this.tX=void 0,this.qit=void 0,this.xX=void 0,this.SL=void 0,this.Kmi=t=>{const i=t.xnt,s="Nnt"===t.type;if(i.D3t===Cs.I3t){const t=this.oa.xe.classList;s?t.add(T8):t.remove(T8)}s?this.be():this.we()},this.Ymi=()=>{this.M4t(),this.oa.zx(),this.oa.we()},this.Jni=()=>{this.zmi.rpi&&(this.oa.GR||this.oa.Yx(),this.we(),this.oa.be(),this.$2t())},this.zmi=e,this.xX=s,this.SL=n,this.qit=n.iX,this.qit.controls=!1,this.Hmi(),this.jmi(),this.Jmi()}};r(),r(),r();var R8=class extends Le{get fpi(){return this.vpi}get _pi(){return this.Jc[this.gpi]}set mpi(t){this.gpi=t}get mpi(){return this.gpi}get D3t(){return this.B3t}get DJt(){return Qc.V0t}constructor(t,i,s,e){super(s),this.vpi=void 0,this.gpi=void 0,this.B3t=void 0,this.vpi=e,this.gpi=0,this.B3t=I8(e),this.g3t=t,this.m3t=i}};r();var x8=class extends Ps{get ppi(){return this.wpi}set ppi(t){this.wpi!==t&&(this.wpi=t)}get Mi(){return this.od.fpi.getHeight()}get Ti(){return this.od.fpi.getWidth()}get wjt(){return this.ppi.getEventCallbackUrls(tv.freewheel.SDK.EVENT_AD_CLICK,tv.freewheel.SDK.EVENT_TYPE_CLICK)[0]}get DJt(){return Qc.V0t}xa(){return _a(this)}constructor(t,i,s){super(t,i),this.wpi=void 0,this.wpi=s}};function I8(t){return t.getTimePositionClass()===tv.freewheel.SDK.TIME_POSITION_CLASS_OVERLAY?Cs.I3t:Cs.nJt}var P8=class t extends ua{async ypi(t,i){this.bpi=t,this.Api=i,this.Spi(t),await i,this.Tpi()}get kpi(){return this.Epi}get Rpi(){return this.xpi}get Ipi(){return this.Ppi}get wnt(){return this.X0t}get U3t(){return this.D0t}get ynt(){const t=[];if(this.X0t){const i=this.X0t.mpi;i>=0&&t.push(...this.X0t.Jc.slice(i+1))}for(const i of this.Cpi)t.push(...i.Jc);return t}get bnt(){return this.Cpi}Tpi(){this.Npi()}Spi(t){t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_STARTED,this.Dpi),t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,this.Bpi),t.addEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION,this.Mpi),t.addEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION_END,this.Lpi),t.addEventListener(tv.freewheel.SDK.EVENT_AD,this.Opi)}Fpi(){this.bpi&&(this.bpi.removeEventListener(tv.freewheel.SDK.EVENT_SLOT_STARTED,this.Dpi),this.bpi.removeEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,this.Bpi),this.bpi.removeEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION,this.Mpi),this.bpi.removeEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION_END,this.Lpi),this.bpi.removeEventListener(tv.freewheel.SDK.EVENT_AD,this.Opi))}Npi(){this.Epi=this.Vpi(this.Wpi),this.xpi=this.Vpi(this.Upi).concat(this.Vpi(this.Gpi)),this.Ppi=this.Vpi(this.Xpi),this.Cpi=this.Epi.concat(this.xpi).concat(this.Ppi)}Vpi(t){if(!this.bpi)return[];const i=this.bpi.getSlotsByTimePositionClass(t);return this.Zpi(i)}Hpi(t){if(!this.X0t)return void 0;const i=t.getSlot().getAdInstances().indexOf(t);-1!==i&&(this.X0t.mpi=i);const s=this.X0t._pi;return s&&(s.ppi=t),s}zpi(t){return me(this.Cpi,i=>i.fpi===t)}Zpi(i){return i.map(i=>{const s=i.getTotalDuration(),e=t.Ypi(i);return new R8(s,s,e,i)})}static Kpi(t,i){const s=t.getAdInstances(),e=[];for(const t of s){const s=I8(t.getSlot()),n=new x8(i,s,t),r=[];n.P3t(t.getAdId(),t.getSlot().getWidth(),t.getSlot().getHeight(),t.getDuration(),r,0),i.b3t(n),e.push(n)}return e}J1t(){const t=this.U3t;t&&this.So(new da(t,this.qpi()))}jpi(){const t=this.U3t;t&&(this.So(new He(t,t.ppi.getPlayheadTime())),this.D0t=void 0)}Qpi(t){const i=this.wnt;i&&(i.g0t=function(t,i,s){void 0===s&&(s=0);let e=0;const n=t.Jc.length;for(let r=i;r<n;r++){const n=t.Jc[r],h=n.ct;if(n){let t=h;r===i&&(t=ss(h-s,0,h)),e+=t}}return e}(i,i.mpi,t))}static Ypi(t){return t.getTimePositionClass()===tv.freewheel.SDK.TIME_POSITION_CLASS_POSTROLL?-1:t.getTimePosition()}qpi(){const t=this.U3t;if(!t)return 0;const i=t.ppi;return i.getPlayheadTime()/i.getDuration()}Jpi(t){is(this.Cpi,t),is(this.Epi,t),is(this.xpi,t),is(this.Ppi,t)}hr(){this.Fpi(),this.Epi.length=0,this.xpi.length=0,this.Ppi.length=0,this.Cpi.length=0,this.D0t=void 0,this.X0t=void 0,this.bpi=void 0,this.Api=void 0}kn(){this.hr(),this.Vo()}constructor(i,s){super(),this.Ls=void 0,this.vT=void 0,this.Wpi=void 0,this.Upi=void 0,this.Xpi=void 0,this.Gpi=void 0,this.Epi=void 0,this.xpi=void 0,this.Ppi=void 0,this.Cpi=void 0,this.X0t=void 0,this.D0t=void 0,this.bpi=void 0,this.Api=void 0,this.Dpi=void 0,this.Bpi=void 0,this.Mpi=void 0,this.Lpi=void 0,this.$pi=void 0,this.Opi=void 0,this.Ls=i,this.vT=s,this.Wpi=tv.freewheel.SDK.TIME_POSITION_CLASS_PREROLL,this.Upi=tv.freewheel.SDK.TIME_POSITION_CLASS_MIDROLL,this.Xpi=tv.freewheel.SDK.TIME_POSITION_CLASS_POSTROLL,this.Gpi=tv.freewheel.SDK.TIME_POSITION_CLASS_OVERLAY,this.Epi=[],this.xpi=[],this.Ppi=[],this.Cpi=[],this.Dpi=i=>{const s=i.slot,e=this.zpi(s);e&&(t.Kpi(s,e),this.X0t=e,e.w3t(),this.Jpi(e),e.D3t===Cs.nJt&&this.So(new vV(e)))},this.Bpi=()=>{const t=this.wnt;t&&t.D3t===Cs.nJt&&(this.So(new Xh(t)),this.vT.src=""),this.X0t=void 0},this.Mpi=t=>{const i=this.Hpi(t.adInstance);i&&(this.So(new te(i,i.ppi.getPlayheadTime())),this.D0t=i),t.adInstance.getEventCallbackUrls(tv.freewheel.SDK.EVENT_AD_CLICK,tv.freewheel.SDK.EVENT_TYPE_CLICK).length>0&&(this.Ls.style.cursor="pointer",this.Ls.addEventListener("click",this.$pi))},this.Lpi=()=>{this.Ls.style.cursor="",this.Ls.removeEventListener("click",this.$pi)},this.$pi=()=>{this.U3t&&this.U3t.ppi.getRendererController().processEvent({name:tv.freewheel.SDK.EVENT_AD_CLICK})},this.Opi=t=>{switch(t.subType){case tv.freewheel.SDK.EVENT_AD_COMPLETE:this.jpi();break;case tv.freewheel.SDK.EVENT_AD_SKIPPED:this.J1t(),this.jpi()}}}};r();var C8=class t extends ua{iwi(){if(this.emt){this.emt.setAdVolume(N8(this.ix,this.Ox))}}swi(t){this.emt=t,this.Spi(t)}Spi(t){t.addEventListener(tv.freewheel.SDK.EVENT_AD,this.ewi),t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_STARTED,this.nwi),t.addEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION,this.rwi),t.addEventListener(tv.freewheel.SDK.EVENT_AD_COMPLETE,this.hwi),t.addEventListener(tv.freewheel.SDK.EVENT_CONTENT_VIDEO_PAUSE_REQUEST,this.owi),t.addEventListener(tv.freewheel.SDK.EVENT_CONTENT_VIDEO_RESUME_REQUEST,this.awi)}uwi(){const t=this.emt;t&&(t.removeEventListener(tv.freewheel.SDK.EVENT_AD,this.ewi),t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_STARTED,this.nwi),t.removeEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION,this.rwi),t.removeEventListener(tv.freewheel.SDK.EVENT_AD_COMPLETE,this.hwi),t.removeEventListener(tv.freewheel.SDK.EVENT_CONTENT_VIDEO_PAUSE_REQUEST,this.owi),t.removeEventListener(tv.freewheel.SDK.EVENT_CONTENT_VIDEO_RESUME_REQUEST,this.awi))}Yx(){this.ayt.wnt&&(this.ayt.wnt.fpi.resume(),this.ux=!1)}zx(){this.ayt.wnt&&(this.ayt.wnt.fpi.pause(),this.ux=!0)}get OR(){const t=this.ayt.U3t;return t&&(this.OR=t.ppi.getPlayheadTime()),this.mZ}set OR(t){this.mZ=t}get ct(){return this.qb}get G3t(){return!!this.ayt&&void 0!==this.ayt.wnt}get ux(){return this.yZ}set ux(t){this.yZ=t}get Ox(){return this.oA}set Ox(t){this.emt&&this.emt.setAdVolume(t),this.oA=t}get ix(){return this.emt&&(this.cwi=0===this.emt.getAdVolume()),this.cwi}set ix(t){this.emt&&this.emt.setAdVolume(N8(t,this.Ox)),this.cwi=t}get kx(){return this.C5}get GR(){return this.q5}set GR(t){this.q5=t}get Sx(){return this.j5}static dwi(t){switch(t){case"pause":return tv.freewheel.SDK.VIDEO_STATE_PAUSED;case"playing":return tv.freewheel.SDK.VIDEO_STATE_PLAYING;case"ended":return tv.freewheel.SDK.VIDEO_STATE_COMPLETED;case"stop":return tv.freewheel.SDK.VIDEO_STATE_STOPPED}}lwi(i){const s=t.dwi(i);this.emt&&s&&this.emt.setVideoState(s)}nN(){const t=this.ayt.U3t;t&&t.ppi.skip()}hr(){if(this.uwi(),this.emt){this.lwi("stop"),this.emt.setVideoState(tv.freewheel.SDK.VIDEO_STATE_STOPPED);const t=this.emt.getTemporalSlots();for(const i of t)i.stop();this.emt.dispose(),this.emt=void 0}this.qb=NaN,this.GR=!1,this.j5=pi.VL,this.OR=0,this.fwi=0,this.ux=!0,void 0!==this.vwi&&(p(this.vwi),this.vwi=void 0)}kn(){this.hr(),this.Vo(),this.ayt.mn("Cnt",this.Ed),this.sc.mn(Gu.yn,this.nwi),this.z1t.removeEventListener("click",this._wi)}constructor(t,i,s,e){super(),this.oa=void 0,this.sc=void 0,this.ayt=void 0,this.z1t=void 0,this.C5=void 0,this.emt=void 0,this.yZ=void 0,this.oA=void 0,this.qb=void 0,this.cwi=void 0,this.q5=void 0,this.j5=void 0,this.mZ=void 0,this.vwi=void 0,this.fwi=void 0,this.ewi=void 0,this.rwi=void 0,this._wi=void 0,this.gp=void 0,this.hwi=void 0,this.owi=void 0,this.awi=void 0,this.Ed=void 0,this.nwi=void 0,this.oa=t,this.sc=i,this.ayt=s,this.z1t=e,this.C5=ZT.tL()._s(),this.yZ=!0,this.qb=NaN,this.cwi=!1,this.q5=!1,this.j5=pi.VL,this.mZ=0,this.fwi=0,this.ewi=t=>{switch(t.subType){case tv.freewheel.SDK.EVENT_AD_PAUSE:(function(t){if(!t)return!0;const i=t.ppi,s=i.getPlayheadTime(),e=i.getDuration();return s>=e||zl(e,s)})(this.ayt.U3t)||(this.ux=!0,this.So(new Pi(this.OR)));break;case tv.freewheel.SDK.EVENT_AD_RESUME:this.ux=!1,this.So(new $n(this.OR));break;case tv.freewheel.SDK.EVENT_AD_VOLUME_CHANGE:if(this.emt){const t=this.emt.getAdVolume();0===t?this.cwi=!0:this.oA=t,this.So(new q(this.OR,this.Ox))}}},this.rwi=()=>{this.GR=!1;const t=this.ux;if(this.ux=!1,t&&(this.So(new Ts(this.OR)),this.So(new $n(this.OR))),this.j5=pi.UL,this.OR=0,!this.ayt.U3t)return;const i=this.ayt.U3t.ppi;this.qb=i.getDuration(),this.So(new ur(this.qb)),this.vwi=v(()=>{if(!this.G3t)return void this.gp();this.ayt.Qpi(this.OR);const t=i.getPlayheadTime();we(t,this.fwi,.001)||this.So(new Tc(t,void 0)),this.fwi=t},250),this.emt&&this.emt.setAdVolume(N8(this.ix,this.Ox))},this._wi=()=>{const t=this.ayt.U3t;t&&(t.D3t===Cs.I3t?this.oa.zx():this.ux||this.zx())},this.gp=()=>{p(this.vwi),this.vwi=void 0},this.hwi=()=>{this.gp(),this.GR=!0},this.owi=()=>{this.lwi("pause")},this.awi=()=>{this.lwi("playing")},this.Ed=t=>{t.od.D3t===Cs.nJt&&(this.ux=!1)},this.nwi=()=>{this.emt&&this.emt.resize(this.sc.Eu,this.sc.Iu)},this.oA=t.Ox,s.wn("Cnt",this.Ed),this.sc.wn(Gu.yn,this.nwi),this.z1t.addEventListener("click",this._wi)}};function N8(t,i){return t?0:i}r(),r();var D8=class extends rl{get name(){return S8.Xmi}constructor(){super("A FreeWheel Ad Error occurred")}};r();var B8=class extends rl{get name(){return S8.Gmi}constructor(){super("A FreeWheel Reset Error Occurred")}},M8=0;function L8(){return"cue-"+ ++M8}var O8=class{gwi(t,i,s){t.setNetwork(i.networkId),t.setServer(i.adServerUrl);const e=this.emt;if(e.setProfile(i.profile),i.assetId&&i.assetDuration&&e.setVideoAsset(i.assetId,i.assetDuration),i.siteSectionId&&e.setSiteSection(i.siteSectionId),e.registerVideoDisplayBase(s),i.cuePoints&&i.cuePoints.length)for(const t of i.cuePoints)e.addTemporalSlot(L8(),t.adUnit,t.timeOffset);const n=i.customData;if(Nc(n)){const t=w.keys(n);for(const i of t){const t=n[i];e.addKeyValue(i,t)}}}async mwi(){this.emt.submitRequest(),await this.pwi.Yy}hr(){this.emt.removeEventListener(tv.freewheel.SDK.EVENT_REQUEST_COMPLETE,this.wwi),this.pwi.zy(new B8)}constructor(t,i,s,e){this.emt=void 0,this.pwi=void 0,this.wwi=void 0,this.emt=i,this.wwi=t=>{this.emt.removeEventListener(tv.freewheel.SDK.EVENT_REQUEST_COMPLETE,this.wwi),t.success?this.pwi.Hy(void 0):this.pwi.zy(new D8)},this.gwi(t,s,e),i.addEventListener(tv.freewheel.SDK.EVENT_REQUEST_COMPLETE,this.wwi),this.pwi=new gs}};r(),r();var F8=class{ywi(){this.bpi.removeEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,this.Bpi),this.bpi.removeEventListener(tv.freewheel.SDK.EVENT_ERROR,this.Bpi)}get bwi(){return this.Qg.Yy}WUt(){this.ywi(),this.Qg.zy(new B8)}constructor(t){this.bpi=void 0,this.Qg=void 0,this.Bpi=void 0,this.e7t=void 0,this.bpi=t,this.Bpi=t=>{this.ywi(),this.Qg.Hy(void 0)},this.e7t=t=>{this.ywi(),this.Qg.zy(new D8)},this.Qg=new gs,t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,this.Bpi),t.addEventListener(tv.freewheel.SDK.EVENT_ERROR,this.e7t)}},V8=class{oO(t){this.bpi=t}cpi(){return this.Awi(this.Swi.kpi)}spi(){this.Awi(this.Swi.Ipi)}async Awi(t){if(this.bpi)for(;t.length>0;){this.kwi=new F8(this.bpi);const i=this.kwi.bwi,s=this.Swi.wnt;s&&s.D3t===Cs.I3t&&s.fpi.stop();t.shift().fpi.play();try{await i}finally{this.kwi=void 0}}}hr(){this.kwi&&(this.kwi.WUt(),this.kwi=void 0),this.DBt=0}kn(){this.oa.mn(d.vy,this.Ewi)}constructor(t,i){this.oa=void 0,this.Swi=void 0,this.DBt=void 0,this.kwi=void 0,this.bpi=void 0,this.Ewi=void 0,this.oa=t,this.Swi=i,this.DBt=0,this.Ewi=()=>{const t=this.oa.FR();for(const i of this.Swi.Rpi){const s=new ZT([this.DBt,t],[!0,!0]),e=i.fpi.getTimePosition();if(s.Cr(e))switch(i.fpi.getTimePositionClass()){case tv.freewheel.SDK.TIME_POSITION_CLASS_MIDROLL:this.Awi([i]);break;case tv.freewheel.SDK.TIME_POSITION_CLASS_OVERLAY:i.fpi.play(),i.fpi.setVisible(!0)}}this.DBt=t},t.wn(d.vy,this.Ewi)}},W8=0,U8=class t extends sc{static createUniqueDisplayBaseId(){return"theo-freewheel-"+ ++W8}get ipi(){return 0!==this.Qmi.Ipi.length}get upi(){return 0!==this.Qmi.kpi.length}async a9t(){if(!this.BJt)throw new m("Invalid state");const t=this.Rwi,i=t.newContext();i.setParameter(tv.freewheel.SDK.PARAMETER_RENDERER_VIDEO_DISPLAY_CONTROLS_WHEN_PAUSE,!1,tv.freewheel.SDK.PARAMETER_LEVEL_GLOBAL),i.setParameter(tv.freewheel.SDK.PARAMETER_EXTENSION_CONTENT_VIDEO_ENABLED,!1,tv.freewheel.SDK.PARAMETER_LEVEL_GLOBAL);const s=new O8(t,i,this.BJt,this.xwi),e=this.Qmi.ypi(i,s.mwi());this.Iwi.oO(i),this.$mi.swi(i),this.Pwi=s;try{await e}finally{this.$mi.iwi(),this.Cwi=!0}}get $mi(){return this.Q8t}get Qmi(){return this.Nwi}get rpi(){return this.Cwi}static Dwi(t,i,s){const e=h.createElement("div");return e.id=s,e.className="theo-freewheel",i.classList.add("theo-freewheel-video"),e.appendChild(i),t.appendChild(e),e}get epi(){return this.Iwi}V5t(t){this.$mi.lwi(t.type)}be(){this.z1t.style.display="block",this.vT.style.display="block"}we(){this.z1t.style.display="none",this.vT.style.display="none"}Tti(t){this.BJt=t}hr(){this.Cwi=!1,this.BJt=void 0,this.Qmi.hr(),this.Iwi.hr(),this.Pwi&&(this.Pwi.hr(),this.Pwi=void 0),this.$mi.hr(),this.vT.src=""}kn(){this.hr(),this.Q8t.kn(),this.Iwi.kn(),this.Qmi.kn(),this.z1t.remove(),je(this.z1t)}constructor(i,e,n){super(),this.oa=void 0,this.vT=void 0,this.Rwi=void 0,this.xwi=void 0,this.Nwi=void 0,this.z1t=void 0,this.Q8t=void 0,this.Pwi=void 0,this.Iwi=void 0,this.BJt=void 0,this.Cwi=void 0,this.oa=i,this.vT=e,this.Cwi=!1,this.xwi=t.createUniqueDisplayBaseId(),this.z1t=t.Dwi(i.xe,e,this.xwi),this.Rwi=new s.tv.freewheel.SDK.AdManager,this.Nwi=new P8(this.z1t,this.vT),this.Iwi=new V8(this.oa,this.Qmi),this.au(this.Qmi),this.Q8t=new C8(i,n,this.Qmi,this.z1t)}};function G8(t){if(s.tv)switch(t){case"preroll":return tv.freewheel.SDK.ADUNIT_PREROLL;case"midroll":return tv.freewheel.SDK.ADUNIT_MIDROLL;case"postroll":return tv.freewheel.SDK.ADUNIT_POSTROLL;case"overlay":return tv.freewheel.SDK.ADUNIT_OVERLAY}}function X8(t,i,s){if(void 0!==i&&S(i)||i<0||i===1/0)return NaN;switch(t){case"preroll":return 0;case"postroll":return s}return pl(i)}$h.Bg.FZ(new class{get I5t(){return Qc.V0t}OZ(t){return t.integration===Za.FREEWHEEL}P5t(t,i,e){if(!Boolean(s.tv&&s.tv.freewheel&&s.tv.freewheel.SDK&&s.tv.freewheel.SDK.AdManager))return;const n=new PF(t.Wu,t.Ql,e,1,[Mo.Nk]);n.het(t.xe);const r=n.HX(Mo.Nk),h=new U8(t,r.iX,t.Wu);return new E8(t,i,n,h,r)}tY(t){const i=Fa(t);he(i.cuePoints)||(i.cuePoints=[]);const s=[],e=t.assetDuration||0;for(const t of i.cuePoints){const i=X8(t.adUnit,t.timeOffset,e),n=G8(t.adUnit);!S(i)&&yo(n)?(t.adUnit=n,t.timeOffset=i,s.push(t)):Zd.lp("Invalid adUnit/timeOffset combination. Cue was removed.")}return i.cuePoints=s,i}B6(t,i,s,e){s.Tti(t,i,e)}}),r(),r(),r(),r(),r();var Z8=self.theoplayerDeviceMetadata;function ja(t){return t.navigator&&t.navigator.userAgent||""}r(),r(),r(),r();var H8={"Windows 10":/(Windows 10.0|Windows NT 10.0)/i,"Windows 8.1":/(Windows 8.1|Windows NT 6.3)/i,"Windows 8":/(Windows 8|Windows NT 6.2)/i,"Windows 7":/(Windows 7|Windows NT 6.1)/i,"Windows Vista":/Windows NT 6.0/i,"Windows Server 2003":/Windows NT 5.2/i,"Windows XP":/(Windows NT 5.1|Windows XP)/i,"Windows Phone":/Windows Phone/i,Android:/Android/i,Linux:/(Linux(?!.*Ubuntu)|X11)/,Ubuntu:/Ubuntu/i,iOS:/(iPhone|iPad|iPod)/i,"Mac OS X":/Mac OS X/i,"Mac OS":/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/i,"Chrome OS":/CrOS/i};function On(t,i){const s=H8[i];return!!s&&Boolean(ja(t).match(s))}function z8(t){return On(t,"Android")}function Y8(t){return On(t,"Windows Phone")}function K8(t){return On(t,"iOS")&&!Y8(t)}function q8(t){return On(t,"Ubuntu")}var j8=/Windows (NT|Phone) ([0-9.]+)/i,Q8=/Mac.*?(OS |OS X )(\d+(([_.])\d+)?(([_.])\d+)?)/i,J8={"Windows 10":j8,"Windows 8.1":j8,"Windows 8":j8,"Windows 7":j8,"Windows Vista":j8,"Windows Server 2003":j8,"Windows XP":j8,"Windows Phone":/Windows Phone ([0-9.]+)/i,Android:/Android (\d+(([_.])\d+)?(([_.])\d+)?)/i,Linux:void 0,Ubuntu:void 0,iOS:/(iPad|iPhone|iPod).*?(OS |os |OS_)(\d+(([_.])\d+)?(([_.])\d+)?)/i,"Mac OS X":Q8,"Mac OS":Q8,"Chrome OS":void 0};function $8(t,i){const s=J8[i];return s?ja(t).match(s):null}function t7(t){return t.split(/[_.]/).map(t=>x(t,10))}function i7(t){if(function(t){return Boolean(ja(t).match(/Windows/i))}(t)){if(function(t){return On(t,"Windows 10")}(t))return"Windows 10";if(Y8(t))return"Windows Phone";if(function(t){return On(t,"Windows 8.1")}(t))return"Windows 8.1";if(function(t){return On(t,"Windows 8")}(t))return"Windows 8";if(function(t){return On(t,"Windows 7")}(t))return"Windows 7";if(function(t){return On(t,"Windows Vista")}(t))return"Windows Vista";if(function(t){return On(t,"Windows Server 2003")}(t))return"Windows Server 2003";if(function(t){return On(t,"Windows XP")}(t))return"Windows XP"}else{if(z8(t))return"Android";if(K8(t))return"iOS";if(function(t){return On(t,"Mac OS X")}(t))return"Mac OS X";if(function(t){return On(t,"Mac OS")}(t))return"Mac OS";if(q8(t))return"Ubuntu";if(function(t){return On(t,"Chrome OS")}(t))return"Chrome OS";if(function(t){return On(t,"Linux")&&!q8(t)}(t))return"Linux"}}function s7(t,i){const s=function(t){const i=$8(t,"Windows 10");return i&&i.length>2?t7(i[2]):void 0}(t),e=function(t){const i=$8(t,"Mac OS X");return i&&i.length>2?t7(i[2]):void 0}(t),n=function(t){const i=$8(t,"Android");return i&&i.length>1?t7(i[1]):void 0}(t),r=function(t){const i=$8(t,"iOS");return i&&i.length>3?t7(i[3]):void 0}(t),h=function(t){const i=$8(t,"Chrome OS");return i&&i.length>0?t7(i[0]):void 0}(t);return s?s.length>i?s[i]:void 0:e?e.length>i?e[i]:void 0:n?n.length>i?n[i]:void 0:r?r.length>i?r[i]:void 0:h&&h.length>i?h[i]:void 0}function e7(t){const i=function(t){return s7(t,0)}(t),s=function(t){return s7(t,1)}(t),e=function(t){return s7(t,2)}(t);if(void 0!==i)return void 0===s?""+i:void 0===e?i+"."+s:i+"."+s+"."+e}var n7={Chrome:/Chrome/i,"Chrome Mobile":void 0,"Chrome iOS":/CriOS/i,Chromium:/Chromium/i,HeadlessChrome:/HeadlessChrome/i,Firefox:/Firefox/i,Seamonkey:/Seamonkey/i,"Firefox iOS":/FxiOS/i,Safari:/Safari/i,Edge:/Edge\/\d+/i,"Edge Chromium":/Edg\/\d+/i,IE:/Trident/i,Opera:/Opera|OPR/i,Vivaldi:/Vivaldi/i,"Android Browser":void 0};function r7(t,i){const s=n7[i];return!!s&&Boolean(ja(t).match(s))}function h7(t){return Boolean(ja(t).match(/Mobi/i))}function o7(t){return Boolean(t.chrome&&t.navigator&&t.navigator.vendor&&/google/i.test(t.navigator.vendor))||a7(t)}function a7(t){return r7(t,"Chrome iOS")}function u7(t){return r7(t,"Firefox")&&!d7(t)}function c7(t){return r7(t,"Firefox Mobile")&&!d7(t)&&h7(t)}function d7(t){return r7(t,"Seamonkey")}function l7(t){return r7(t,"Firefox iOS")&&!d7(t)}function f7(t){return r7(t,"Safari")&&!r7(t,"Chrome")&&!As.Gv}function v7(t){return Boolean(b7(t))}function _7(t){return r7(t,"Edge")}function g7(t){return r7(t,"Edge Chromium")}function m7(t){return r7(t,"IE")}function p7(t){return r7(t,"Vivaldi")}var w7=/chrome\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/i,y7={Chrome:w7,"Chrome Mobile":w7,"Chrome iOS":/CriOS\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/i,Chromium:w7,HeadlessChrome:w7,Firefox:/Firefox\/([0-9.]+)/i,"Firefox iOS":/FxiOS\/([0-9.]+)/i,Safari:/(Version)\/((\d+)\.(\d+)(?:\.(\d+))?).*Safari/,"Safari Mobile":void 0,Edge:/Edge\/(\d+)/i,"Edge Chromium":/Edg\/(\d+)/i,"Edge Mobile":void 0,IE:/(MSIE |Trident.*?rv:)(\d+)/i,Opera:/(OPR\/(\d+\.\d+))|(Opera(?=.*Version\/((\d+)\.(\d+))))/i,"Opera Mobile":void 0,Vivaldi:/Vivaldi\/((\d+)\.(\d+)\.(\d+)(?:\.(\d+))?)/i,"Android Browser":void 0};function wl(t,i){const s=y7[i];return s?ja(t).match(s):null}function b7(t){return wl(t,"Opera")}function A7(t){const i=function(t){return wl(t,"Firefox")}(t);return i?C(i[1]):0}function S7(t){const i=function(t){return wl(t,"Firefox iOS")}(t);return i?C(i[1].split(".")[0]):0}function T7(t){const i=function(t){return wl(t,"Safari")}(t);return i?C(i[2].split(".")[0]):0}function k7(t){const i=function(t){return wl(t,"Edge")}(t);return i?C(i[1]):0}function E7(t){const i=function(t){return wl(t,"Edge Chromium")}(t);return i?C(i[1]):0}function R7(t){const i=function(t){return wl(t,"IE")}(t);return i?C(i[2]):0}function x7(t){const i=function(t){return wl(t,"Vivaldi")}(t);return i?C(i[1]):0}function I7(t){if(z8(t))return o7(t)?"Chrome Mobile":u7(t)||c7(t)?"Firefox Mobile":_7(t)?"Edge Mobile":v7(t)?"Opera Mobile":"Android Browser";if(K8(t)){if(o7(t)||a7(t))return"Chrome iOS";if(u7(t)||l7(t))return"Firefox iOS";if(_7(t))return"Edge Mobile";if(f7(t)||function(t){return f7(t)&&h7(t)}(t))return"Safari Mobile";if(v7(t))return"Opera Mobile"}return function(t){return r7(t,"Chromium")}(t)?"Chromium":function(t){return r7(t,"HeadlessChrome")}(t)?"HeadlessChrome":o7(t)?"Chrome":u7(t)?"Firefox":f7(t)?"Safari":_7(t)?"Edge":g7(t)?"Edge Chromium":m7(t)?"IE":v7(t)?"Opera":p7(t)?"Vivaldi":void 0}function P7(t){return p7(t)?x7(t):a7(t)?Number(function(t){const i=y7["Chrome iOS"];return i&&i.exec(ja(t))||[]}(t)[1]):o7(t)?Number(function(t){const i=y7.Chrome;return i&&i.exec(ja(t))||[]}(t)[1]):u7(t)||c7(t)?A7(t):l7(t)?S7(t):f7(t)?T7(t):_7(t)?k7(t):g7(t)?E7(t):m7(t)?R7(t):v7(t)?function(t){const i=b7(t);return i&&i[0].indexOf("Opera")>-1?C(i[5]):i?C(i[2].split(".")[0]):0}(t):void 0}var C7=function(t){return t.Bwi="pc",t.Mwi="console",t.Lwi="settop",t.Owi="mobile",t.Fwi="tablet",t.Vwi="smarttv",t.Wwi="searchbot",t}({});function N7(t){const i=ja(t);return i.match(/CrKey|Roku|AFTS|AppleTV|Nexus Player/i)?"settop":i.match(/Xbox|Playstation|Wii|Nintendo/i)?"console":/(iPad|Tablet|(Android(?!.*Mobi))|(Windows(?!.*Phone)(.*Touch))|Kindle|Playbook|Silk|(Puffin(?!.*(IP|AP|WP))))/i.test(i)?"tablet":/Mobi/.test(i)?"mobile":i.match(/GoogleTV|SmartTV|SMART-TV|Internet TV|NetCast|NETTV|boxee|Kylo|DLNADOC|hbbtv|CE-HTML/i)?"smarttv":i.match(/(nuhk|Googlebot|bingbot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/i)?"searchbot":function(t){return Boolean(I7(t))}(t)?"pc":void 0}var D7=class{$z(t){this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_ID,t.deviceID||function(){const t=Nb.Uy("deviceId");if(t)return t;const i=FP();return Nb.Gy("deviceId",i),i}()),this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.PLAYER,"THEOplayer"),this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.PLAYER_VERSION,"9.11.0"),this.Uwi(t),this.Gwi(),this.Xwi(t),this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.EMPCLIENT_INTEGRATION_VERSION,"3.0"),this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.EMPCLIENT_INTEGRATION_BUILDDATE,"2023-04-17 12:00:00"),t.application&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.APPLICATION,t.application),t.applicationVersion&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.APPLICATION_VERSION,t.applicationVersion),t.userAccountID&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.USER_ACCOUNT_ID,t.userAccountID);const i=t.connectionType;i?this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DATA_CONNECTION_TYPE,i):(this.Zwi(),od.connection&&od.connection.addEventListener&&od.connection.addEventListener("change",this.Zwi))}Uwi(t){this.Hwi(t);const i=t.deviceManufacturer||Z8&&Z8.manufacturer;i&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_MANUFACTURER,i);const s=t.deviceModel||Z8&&Z8.model;s&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_MODEL,s)}Hwi(t){const i=t.deviceType||function(){const t=N7(self);switch(t){case C7.Mwi:return"game-console";case C7.Vwi:return"tv";case C7.Lwi:return"media-streamer";default:return t}}();i&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_TYPE,i)}Gwi(){const t=I7(self);t&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_BROWSER,t);const i=P7(self);void 0!==i&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_BROWSER_VERSION,i.toString())}Xwi(t){const i=t.deviceOs||i7(self);i&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_OS,i);const s=t.deviceOsVersion||e7(self);s&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_OS_VERSION,s.toString())}kn(){od.connection&&od.connection.removeEventListener&&od.connection.removeEventListener("change",this.Zwi)}constructor(t,i){this.empClient=void 0,this.agama=void 0,this.Zwi=void 0,this.empClient=t,this.agama=i,this.Zwi=()=>{const t=Zd.bR;switch(t){case"wifi":this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DATA_CONNECTION_TYPE,"wlan");break;case"ethernet":this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DATA_CONNECTION_TYPE,t);break;case"cellular":const i=function(t){switch(t){case"3g":return"mobile/3G";case"4g":return"mobile/4G";default:return}}(Zd.yR);i&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DATA_CONNECTION_TYPE,i)}}}};Th(function(t){return i=>class extends i{WR(t,i){this.zwi&&this.zwi.VH(),super.WR(t)}kn(){this.zwi&&this.zwi.kn(),super.kn()}constructor(i,s){super(i,s),this.xH=new t,this.zwi=void 0,this.zwi=new WP(this,this.xH,s)}}}(class extends xP{Hx(t){this.Ywi=t,this.Kwi&&(this.xH=function(t,i){const s=function(t,i){switch(i){case"info":return t.LogLevel.INFO;case"debug":return t.LogLevel.DEBUG;case"warning":return t.LogLevel.WARNING;case"error":return t.LogLevel.ERROR;default:return t.LogLevel.FATAL}}(i,t.logLevel);i.setLogLevel(s);const e=new i.EMPClient(t.config);return function(t,i){return t.setExternalConfig(i.config),t}(e,t)}(t,this.Kwi),this.xH&&(this.qwi=new D7(this.xH,this.Kwi),this.ko=!0))}Jz(){return this.Kwi||console.warn("Please load the Agama Library (empclient.min.js) in order to use the integration"),Boolean(this.Kwi)}jz(){return this.ko}xz(t,i){if(this.xH&&this.Kwi)switch(t){case Go.jZ:this.xH.setMeasurement(this.Kwi.Measurement.BUFFER_LENGTH,i);break;case Go.QZ:this.xH.setMeasurement(this.Kwi.Measurement.BYTES_RECEIVED,i);break;case Go.$Z:this.xH.setMeasurement(this.Kwi.Measurement.SEGMENT_PROFILE_BITRATE,i);break;case Go.tH:this.xH.setMeasurement(this.Kwi.Measurement.VIDEO_PROFILE_BITRATE,i);break;case Go.JZ:this.xH.setMeasurement(this.Kwi.Measurement.SEGMENT_READ_BITRATE,i);break;case Go.HZ:this.xH.setMeasurement(this.Kwi.Measurement.HTTP_REQUEST_STATUS_CODE_1XX,i);break;case Go.zZ:this.xH.setMeasurement(this.Kwi.Measurement.HTTP_REQUEST_STATUS_CODE_2XX,i);break;case Go.YZ:this.xH.setMeasurement(this.Kwi.Measurement.HTTP_REQUEST_STATUS_CODE_3XX,i);break;case Go.KZ:this.xH.setMeasurement(this.Kwi.Measurement.HTTP_REQUEST_STATUS_CODE_4XX,i);break;case Go.qZ:this.xH.setMeasurement(this.Kwi.Measurement.HTTP_REQUEST_STATUS_CODE_5XX,i);break;case Go.sH:this.xH.setMeasurement(this.Kwi.Measurement.PLAYBACK_POSITION,i);break;case Go.eH:this.xH.setMeasurement(this.Kwi.Measurement.NUMBER_OF_FRAMES_DECODED,i);break;case Go.iH:this.xH.setMeasurement(this.Kwi.Measurement.NUMBER_OF_FRAMES_DROPPED,i)}}rz(t,i){if(this.xH&&this.Kwi)switch(t){case zt.aH:this.xH.setSessionMetadata(this.Kwi.SessionMetadata.ASSET_DURATION,i);break;case zt.oH:this.xH.setSessionMetadata(this.Kwi.SessionMetadata.MANIFEST_URI,i);break;case zt.uH:this.xH.setSessionMetadata(this.Kwi.SessionMetadata.NUMBER_OF_CONTENT_PROFILES,i);break;case zt.lH:this.xH.setSessionMetadata(this.Kwi.SessionMetadata.SERVICE_NAME,i);break;case zt.cH:this.xH.setSessionMetadata(this.Kwi.SessionMetadata.CDN,i);break;case zt.dH:this.xH.setSessionMetadata(this.Kwi.SessionMetadata.CONTENT_TITLE,i);break;case zt.fH:this.xH.setSessionMetadata(this.Kwi.SessionMetadata.CONTENT_TYPE,i);break;case zt.vH:this.xH.setSessionMetadata(this.Kwi.SessionMetadata.CONTENT_DESCRIPTION,i)}}$z(){this.qwi&&this.Ywi&&this.qwi.$z(this.Ywi)}Qz(t,i){this.Kwi&&this.xH&&(this.Bz(),function(t,i,s,e){const n=VP(t,s,e);i.abrSession(n,t.ViewState.INITIAL_BUFFERING)}(this.Kwi,this.xH,t,i),this.jwi=!0)}kn(){this.qwi&&this.qwi.kn(),this.Qwi(kP._H),this.xH=void 0}ZH(t){this.Jwi(t)}YH(t,i){this.xH&&this.xH.event(t.code,i)}Bz(){this.xH&&this.jwi&&(this.xH.exitSession(),this.jwi=!1)}Qwi(t){if(this.xH&&this.Kwi&&(this.Bz(),t===kP._H))this.xH.shutdown(this.Kwi.ShutdownType.NORMAL_SHUTDOWN)}HH(t,i,s){this.Jwi(t,i,s)}Jwi(t,i,s){if(this.xH&&this.Kwi)switch(t){case qe.SM:this.$wi(this.Kwi.ViewState.PLAYING,i,s);break;case qe.GZ:this.$wi(this.Kwi.ViewState.FAILED,i,s);break;case qe.XZ:this.$wi(this.Kwi.ViewState.INITIAL_BUFFERING,i,s);break;case qe.VZ:this.$wi(this.Kwi.ViewState.PAUSED,i,s);break;case qe.WZ:this.$wi(this.Kwi.ViewState.SEEK,i,s);break;case qe.UZ:this.$wi(this.Kwi.ViewState.STALLED,i,s);break;case qe.ZZ:this.$wi(this.Kwi.ViewState.NO_ACCESS,i,s)}}$wi(t,i,s){if(this.xH)if(i){const e=function(t){return t||""}(s);this.xH.viewStateExtended(t,i.code,e)}else this.xH.viewStateChanged(t)}constructor(){super(),this.Kwi=void 0,this.xH=void 0,this.ko=!1,this.jwi=!1,this.Ywi=void 0,this.qwi=void 0,this.Kwi=s.Agama}}),Rh.rnt),r(),r(),r(),r(),r();var B7=function(t){return t.PLAY_ALL="play-all",t.PLAY_NONE="play-none",t.PLAY_LAST="play-last",t}({});r();var lh=function(t){return t.VOD="vod",t.LIVE="live",t}({}),M7=class{get Ca(){return this.tyi.Ca}get lt(){return this.$G}get HR(){return this.tX}iyi(t){this.$G=xs(t),this.tX=t,this.oa.So(new $e(t))}Ta(t){this.syi.resetSource(),this.eyi.Zy(),this.nyi=!1,this.oa.ryi(t)}async Hnt(t,i){if(this.hyi.hr(),this.nyi=!1,!t||!function(t){return t.sources.some(t=>t.integration===rc.UPLYNK)}(t))return await this.oa.oyi(t,i);try{this.ayi=await this.uyi.hgi(t),await this.oa.oyi(this.ayi,i)}catch(t){this.iyi(new Wt(Ne.MANIFEST_LOAD_ERROR,t.message,t))}}kn(){this._8.Jg(),this.cyi.Jg(),this.oa.mn(d.Rw,this.dyi),this.oa.mn(d.uo,this.Mfi),this.oa.mn(d.vy,this.gui),this.oa.mn(d.Nw,this.v_i),this.oa.mn(Vo.yM,this.Pd);for(const t of this.syi.w0t.ec)t.mn("lyi",this.fyi),t.mn("Cnt",this.vyi),t.mn("Pnt",this._yi);this.syi.w0t.mn("Rnt",this.gyi),this.syi.w0t.mn("Ent",this.myi),this.syi.destroy(),this.K1t&&(this.K1t.Zg(),this.K1t=void 0),this.nyi=!1}async fetchAssetInfo(t){if(t&&t.integrationData)try{const i=await this.pyi.ISt(t.integrationData.source.prefix,t.integrationData.source.id,this.cyi.jg,t.integrationData.preplayResponse.sid);this.tyi.wyi(i),this.eyi.yyi(i,this.syi.w0t.ec)}catch(t){0}}byi(t){this.syi.Ayi(t),this.syi.mnt.forEach(i=>i.Syi(t)),this.syi.Tyi(this.oa.Ex()),this.Y1t()}WR(t){if(this.syi.wnt)return;this._8.Jg(),this._8=new ui;_e(Ce(this.zri(t,this._8.jg),this._8))}async zri(t,i){if(Ko(i),t<this.oa.FR())return void this.kyi(t);let s=[];switch(this.syi.Eyi){case B7.PLAY_ALL:s=this.syi.Ryi(this.oa.FR(),t),await this.xyi(t,s,i);break;case B7.PLAY_LAST:const e=this.syi.Ryi(this.oa.FR(),t).pop();s=e?[e]:[],await this.xyi(t,s,i);break;case B7.PLAY_NONE:this.Iyi(t)}}kyi(t){const i=me(this.syi.w0t.ec,i=>i.Aat.Cr(t));i?this.oa.Pyi(i.kO):this.oa.Pyi(t)}Iyi(t){const i=this.syi.Ryi(this.oa.FR(),t).pop();i&&i.Aat.Cr(t)?this.oa.Pyi(i.EO):this.oa.Pyi(t)}async xyi(t,i,s){for(const t of i)await this.Cyi(t,s);const e=rf(i,-1);e&&e.Aat.Cr(t)?this.oa.FR()<t&&this.oa.Pyi(e.EO):this.oa.Pyi(t)}async Cyi(t,i){t.mn("lyi",this.fyi);const s=Promise.race([t.pw("Pnt",i),t.pw("lyi",i)]);this.byi(this.oa.FR()),t.ro||this.oa.Pyi(t.kO),await s,t.wn("lyi",this.fyi)}Y1t(){const t=me(this.syi.mnt,t=>t.Nyi.length>0);if(t){const i=t.Nyi[0];this.K1t||(this.K1t=new K1(this.oa.xe),this.K1t.wn("clickstart",this.Dyi)),this.K1t.o1t=i}else this.K1t&&(this.K1t.Zg(),this.K1t=void 0)}constructor(t,i,s,e,n,r,h){this.oa=void 0,this.hyi=void 0,this.uyi=void 0,this.syi=void 0,this.tyi=void 0,this.pyi=void 0,this.eyi=void 0,this.ayi=void 0,this.$G=void 0,this.tX=void 0,this._8=void 0,this.cyi=void 0,this.Byi=void 0,this.nyi=void 0,this.K1t=void 0,this.dyi=void 0,this.Mfi=void 0,this.gui=void 0,this.v_i=void 0,this.Pd=void 0,this.fyi=void 0,this.vyi=void 0,this._yi=void 0,this.gyi=void 0,this.myi=void 0,this.Dyi=void 0,this.oa=t,this.hyi=i,this.uyi=s,this.syi=e,this.tyi=n,this.pyi=r,this.eyi=h,this.$G=void 0,this.tX=void 0,this._8=new ui,this.cyi=new ui,this.Byi=void 0,this.nyi=!1,this.K1t=void 0,this.dyi=t=>{const i=t.currentSource;if(!i||!i.integrationData)return;const{preplayResponse:s,source:e}=i.integrationData;this.tyi.Myi(s),s&&s.type===lh.VOD&&s.ads&&this.syi.yyi(s.ads),this.hyi.Lyi=i.integrationData,e.assetInfo&&_e(this.fetchAssetInfo(i))},this.Mfi=()=>{this.nyi=!0},this.gui=()=>{this.nyi&&this.byi(this.oa.FR())},this.v_i=()=>{this.nyi&&(this.byi(1/0),this.nyi=!1)},this.Pd=()=>{_e(this.hyi.Tn())},this.fyi=t=>{this._8.Jg(),this._8=new ui;_e(Ce(this.zri(t.od.EO,this._8.jg),this._8))},this.vyi=()=>{1!==this.oa.vx&&(this.Byi=this.oa.vx,this.oa.vx=1)},this._yi=()=>{void 0!==this.Byi&&(this.oa.vx=this.Byi,this.Byi=void 0)},this.gyi=t=>{t.od.wn("lyi",this.fyi),t.od.wn("Cnt",this.vyi),t.od.wn("Pnt",this._yi)},this.myi=t=>{t.od.mn("lyi",this.fyi),t.od.mn("Cnt",this.vyi),t.od.mn("Pnt",this._yi)},this.Dyi=()=>{this.oa.zx()},this.oa.wn(d.Rw,this.dyi),this.oa.wn(d.uo,this.Mfi),this.oa.wn(d.vy,this.gui),this.oa.wn(d.Nw,this.v_i),this.oa.wn(Vo.yM,this.Pd),this.syi.w0t.wn("Rnt",this.gyi),this.syi.w0t.wn("Ent",this.myi)}};r(),r();var L7=_c({breaksIndex:ji,adsIndex:ji,startTime:ji,endTime:ji}),O7=_c({index:ji,timeOffset:ji}),F7=_c({duration:ji,apiFramework:Hs($c,dI),creative:$c,mimeType:$c,width:ji,height:ji,companions:dc(function(t){return new yI(t)}(()=>F7)),extensions:Hs(_h,dc(cI)),fw_parameters:Hs(_h,mc($c)),events:mc(dc($c))}),V7=_c({type:gI(["linear","nonlinear"]),position:gI(["preroll","midroll","postroll","pause","overlay",""]),timeOffset:ji,duration:ji,ads:dc(F7),events:mc(dc($c))}),W7=_c({breaks:dc(V7),breakOffsets:Hs(_h,dc(O7)),placeholderOffsets:Hs(_h,dc(L7))}),U7=_c({required:Hs(_h,uI),fairplayCertificateURL:Hs(_h,$c),widevineLicenseURL:Hs(_h,$c),playreadyLicenseURL:Hs(_h,$c)}),G7={type:gI(vI(lh)),playURL:$c,prefix:$c,sid:$c,drm:Hs(_h,U7)},X7=_c(Jr({},G7,{type:gI([lh.VOD]),ads:W7,interstitialURL:Hs($c,dI,_h)})),Z7=Hs(X7,_c(Jr({},G7,{type:gI([lh.LIVE])})));r();var H7=$c,z7=_c({userId:$c,externalId:Hs($c,dc($c))}),Y7=class{async ISt(t){try{return this.Oyi(t)}catch(t){throw t}}async Oyi(t){const i=await async function(t){const i=t.prefix,s=K7[t.assetType],e=function(t){if(dc(H7).HU(t))return 1===t.length?t[0]:t.join(",")+"/multiple";if(H7.HU(t))return t;if(z7.HU(t)&&he(t.externalId))return 1===t.externalId.length?"ext/"+t.userId+"/"+t.externalId[0]:"ext/"+t.userId+"/"+t.externalId.join(",")+"/multiple";if(z7.HU(t))return"ext/"+t.userId+"/"+t.externalId;throw new g("Invalid asset id")}(t.id),n=await async function(t){if(t&&await Zd.yp())return{rmt:"fps",manifest:"m3u8"};if(t&&await Zd.Ap())return{rmt:"wv",manifest:"mpd"};if(t&&await Zd.bp())return{rmt:"pr",manifest:"mpd"};return{}}(t.contentProtected),r=function(t,i){const s=q7(t,i);return s?{"ad.cping":"1","ad.pingf":String(s)}:{}}(t.assetType,t.ping);let h={};he(t.preplayParameters)?t.preplayParameters.forEach(t=>{h[t[0]]=t[1]}):h=t.preplayParameters;const o=i+"/preplay/"+s+e+".json";return dA(o,Jr({v:"2"},h,n,r,h))}(t),s=this.rW.dk({Fk:ci.GET,Yu:i,ck:Bi.CT}),e=await s,n=Jr({},await e.hk(),{type:t.assetType===HP.ASSET?lh.VOD:lh.LIVE});return Z7.HU(n)||Z7.YU(n,"PreplayResponse"),n}constructor(t){this.rW=void 0,this.rW=t}},K7={[HP.ASSET]:"",[HP.CHANNEL]:"channel/",[HP.EVENT]:"event/"};function q7(t,i){const s=t!==HP.ASSET;return(!s&&i.adImpressions?1:0)+(!s&&i.freeWheelVideoViews?2:0)+(s&&i.linearAdData?4:0)}r(),r();var j7=_c({ad_id:$c,apiFramework:Hs(dI,$c),companions:dc(cI),creative:$c,duration:ji,mimeType:$c,height:ji,width:ji,extensions:Hs(_h,dc(cI)),fw_parameters:Hs(_h,mc($c))}),Q7=_c({breakId:$c,ads:dc(j7),type:gI(["linear","nonlinear"]),position:gI(["preroll","midroll","postroll","pause","overlay",""]),timeOffset:ji,duration:ji,height:Hs(_h,ji),width:Hs(_h,ji),events:mc(dc($c))}),J7=_c({breaks:dc(Q7)}),$7=_c({next_time:ji,ads:Hs(_h,J7),extensions:Hs(_h,dc(cI)),error:Hs(_h,$c),currentBreakEnd:Hs(_h,ji)}),ttt=function(t){return t.BSt="start",t.WZ="seek",t}({}),itt=class{async ISt(t,i){try{return this.Oyi(t,i)}catch(t){throw t}}async Oyi(t,i){const s=function(t){const i={v:"3",pt:String(t.currentTime)};(function(t){return void 0!==t.seekTime})(t)&&t.hasFreeWheelVideoViews&&(i.ft=String(t.seekTime));t.event&&(i.ev=t.event);return dA(t.zonePrefix+"/session/ping/"+t.sessionId+".json",Jr({},i))}(t),e=this.rW.dk({Fk:ci.GET,Yu:s,ck:Bi.CT,jg:i}),n=await e,r=await n.hk();return $7.HU(r)||$7.YU(r,"PingResponse"),r}constructor(t){this.rW=void 0,this.rW=t}};r(),r();var stt=class extends Kt{get hE(){return this.oE}xa(){return new ett(this.oE)}constructor(t){super("Fyi"),this.oE=void 0,this.oE=t}},ett=class extends sh{constructor(t){super("pingresponse"),this.response=void 0,this.response=t}};r();var ntt=class extends Kt{get lt(){return this.$G}xa(){return new rtt(this.$G)}constructor(t){super("Vyi"),this.$G=void 0,this.$G=t}},rtt=class extends sh{constructor(t){super("pingerror"),this.error=void 0,this.error=t}},htt=class extends fr{set Lyi(t){this.Wyi=t}get Uyi(){return this.Gyi}async Tn(){const t=this.Wyi;if(!t)return;0!==q7(t.source.assetType,t.source.ping)&&(this.Gyi=this.oa.Ex().start(0),await this.Xyi(ttt.BSt),this.oa.wn("timeupdate",this.Zyi),this.oa.wn("seeking",this.Hyi))}async Xyi(t,i){const s=this.Wyi.preplayResponse,e={};if(S(this.Gyi))return void 0;if(Y(this.zyi)&&zl(this.zyi,this.oa.FR()-this.Gyi))return;void 0!==i&&(e.seekTime=i),void 0!==t&&(e.event=t);let n,r=this.oa.FR()-this.Gyi;t===ttt.BSt?r=0:t!==ttt.WZ&&this.Yyi&&(r=_.min(r,this.Yyi)),this.zyi=r;try{var h;const t=await this.Kyi.ISt(Jr({zonePrefix:s.prefix,sessionId:s.sid,currentTime:r,hasFreeWheelVideoViews:null==(h=this.Wyi)?void 0:h.source.ping.freeWheelVideoViews},e),this.eT.jg);this.So(new stt(t)),this.Yyi=-1!==t.next_time?t.next_time:void 0,n=t.error}catch(t){hc(t)||(n=t.message)}finally{n&&this.So(new ntt(n))}}hr(){this.Yyi=void 0,this.Wyi=void 0,this.Gyi=NaN,this.qyi=!1,this.jyi=NaN,this.zyi=void 0,this.oa.mn("seeking",this.Hyi),this.oa.mn("timeupdate",this.Zyi),this.Qyi()}Qyi(){this.eT.Jg(),this.eT=new ui}kn(){this.hr()}constructor(t,i){super(),this.Kyi=void 0,this.oa=void 0,this.Wyi=void 0,this.Gyi=void 0,this.Yyi=void 0,this.qyi=void 0,this.jyi=void 0,this.eT=void 0,this.zyi=void 0,this.Zyi=void 0,this.Hyi=void 0,this.Kyi=t,this.oa=i,this.Gyi=NaN,this.Yyi=void 0,this.qyi=!1,this.jyi=NaN,this.eT=new ui,this.zyi=void 0,this.Zyi=async()=>{const t=this.oa.FR();if(this.jyi=t,this.qyi||Xd(this.Yyi)||S(this.Gyi))return;this.Gyi+this.Yyi<=t&&(this.qyi=!0,await this.Xyi(),this.qyi=!1)},this.Hyi=()=>{if(this.oa.FR()===this.Gyi)return;this.qyi&&this.Qyi(),this.jyi=this.oa.FR();const t=this.jyi-(this.Gyi||0);S(t)?_e(this.Xyi(ttt.WZ,0)):_e(this.Xyi(ttt.WZ,t))}}};r();var ott=class{async hgi(t){const i=[];for(const s of t.sources)if(ak(s))try{const e=utt({source:s,preplayResponse:await this.Jyi.ISt(s)},t,this.VQ);e.src&&(e.src=dA(e.src,s.playbackUrlParameters)),i.push(e)}catch(t){0}else i.push(s);if(0!==t.sources.length&&0===i.length)throw new m("Fatal: unable to play UplynkSources.");return Jr({},t,{sources:i})}constructor(t,i){this.Jyi=void 0,this.VQ=void 0,this.Jyi=t,this.VQ=i}};function att(t){return!!t.sources&&(he(t.sources)?t.sources.some(ak):ak(t.sources))}function utt(t,i,s){const e=t.preplayResponse;let n;t.source.contentProtected&&e.drm&&(n={integration:"uplynk"},e.drm.fairplayCertificateURL&&(n.fairplay={certificateURL:e.drm.fairplayCertificateURL}),e.drm.widevineLicenseURL&&(n.widevine={licenseAcquisitionURL:e.drm.widevineLicenseURL}),e.drm.playreadyLicenseURL&&(n.playready={licenseAcquisitionURL:e.drm.playreadyLicenseURL}));const r=CT({src:e.playURL,contentProtection:n,useNativePlayback:t.source.useNativePlayback,hls:t.source.hls,dash:t.source.dash,seamlessSwitchStrategy:t.source.seamlessSwitchStrategy},i,s);return r.integrationData=t,r}r(),r(),r();var ctt=class extends Kt{xa(){return new dtt(this.od.Ca)}constructor(t,i){super("Cnt"),this.od=void 0,this.HF=void 0,this.od=t,this.HF=i}},dtt=class extends sh{constructor(t){super("adbreakbegin"),this.adBreak=void 0,this.adBreak=t}};r();var ltt=class extends Kt{xa(){return new ftt(this.od.Ca)}constructor(t,i){super("Pnt"),this.od=void 0,this.HF=void 0,this.od=t,this.HF=i}},ftt=class extends sh{constructor(t){super("adbreakend"),this.adBreak=void 0,this.adBreak=t}};r();var vtt=class extends Kt{xa(){return new _tt(this.od.Ca)}constructor(t){super("lyi"),this.od=void 0,this.od=t}},_tt=class extends sh{constructor(t){super("adbreakskip"),this.adBreak=void 0,this.adBreak=t}};r(),r();var gtt=class extends Kt{xa(){return new mtt(this.od.Ca)}constructor(t){super("r4t"),this.od=void 0,this.od=t}},mtt=class extends sh{constructor(t){super("updateadbreak"),this.adBreak=void 0,this.adBreak=t}},ptt=class extends ua{get Ca(){return this.hu||(this.hu=function(t){let i;const s={get startTime(){return t.kO},get endTime(){return t.EO},get duration(){return t.ct},get ads(){return t.Jc.Ca},get skipOffset(){return t.qjt},set skipOffset(i){t.qjt=i},addEventListener(t,s){i.wn(t,s)},removeEventListener(t,s){i.mn(t,s)}};return i=new Is(t,s),s}(this)),this.hu}get kO(){return this.LO}get EO(){return this.qb?this.LO+this.qb:void 0}$yi(t){this.qb=t-this.kO;for(const i of this.Jc.ec)i.kO>t&&this.Jc.vS(i);this.So(new gtt(this))}get ct(){return this.qb}get Aat(){const t=this.EO;return Y(t)?new ZT([this.kO,t]):ZT.tL()}get Jc(){return this.qc}get tbi(){return this.ibi}get ro(){return this.ho}get qjt(){return this.Xgi?-1:this.jjt}set qjt(t){this.Xgi||(this.jjt=t)}Yut(t){return t>=this.kO&&(Xd(this.ct)||t<=this.kO+this.ct)}sbi(t){return-1!==this.qjt&&(!!Y(this.EO)&&t-this.kO>=this.qjt)}nN(){this.qc.ec.forEach(t=>t.nN()),this.So(new vtt(this))}ebi(t){const i=Y(this.EO)&&t>=this.EO,s=this.kO<=t&&!i&&!this.ro,e=this.ro&&this.EO&&t>=this.EO;s&&(this.ho=!0,this.So(new ctt(this,this.kO))),this.qc.ec.forEach(i=>i.ebi(t)),e&&(this.ibi=!0,this.ho=!1,this.So(new ltt(this,this.EO)))}constructor(t,i,s,e,n){super(),this.LO=void 0,this.qb=void 0,this.qc=void 0,this.Xgi=void 0,this.hu=void 0,this.ho=void 0,this.jjt=void 0,this.ibi=void 0,this.LO=t,this.qb=i,this.qc=s,this.Xgi=e,this.ho=!1,this.ibi=!1,this.jjt=n}};r(),r();var wtt=class extends Kt{xa(){return new ytt(this.xnt.Ca)}constructor(t,i){super("Nnt"),this.xnt=void 0,this.HF=void 0,this.xnt=t,this.HF=i}},ytt=class extends sh{constructor(t){super("adbegin"),this.ad=void 0,this.ad=t}};r();var btt=class extends Kt{xa(){return new Att(this.xnt.Ca)}constructor(t,i){super("Dnt"),this.xnt=void 0,this.HF=void 0,this.xnt=t,this.HF=i}},Att=class extends sh{constructor(t){super("adend"),this.ad=void 0,this.ad=t}};r(),r();var Stt=class extends Kt{xa(){return new Ttt(this.xnt.Ca)}constructor(t){super("nbi"),this.xnt=void 0,this.xnt=t}},Ttt=class extends sh{constructor(t){super("removead"),this.ad=void 0,this.ad=t}},ktt=class extends Jn{Jsi(t){}sei(t){this.So(new Stt(t))}constructor(){super()}};r();var Ett=class extends Kt{xa(){return new Rtt(this.xnt.Ca)}constructor(t){super("o4t"),this.xnt=void 0,this.xnt=t}},Rtt=class extends sh{constructor(t){super("adfirstquartile"),this.ad=void 0,this.ad=t}},xtt=class extends Kt{xa(){return new Itt(this.xnt.Ca)}constructor(t){super("a4t"),this.xnt=void 0,this.xnt=t}},Itt=class extends sh{constructor(t){super("admidpoint"),this.ad=void 0,this.ad=t}},Ptt=class extends Kt{xa(){return new Ctt(this.xnt.Ca)}constructor(t){super("u4t"),this.xnt=void 0,this.xnt=t}},Ctt=class extends sh{constructor(t){super("adthirdquartile"),this.ad=void 0,this.ad=t}},Ntt=class extends Kt{xa(){return new Dtt(this.xnt.Ca)}constructor(t){super("rbi"),this.xnt=void 0,this.xnt=t}},Dtt=class extends sh{constructor(t){super("adcomplete"),this.ad=void 0,this.ad=t}};r();var Btt=class t extends ua{static hbi(i,s){return new t(i,s.duration,s.apiFramework||"",s.creative,s.mimeType,s.width,s.height,s.companions.map(s=>t.hbi(i,s)),s.extensions,s.fw_parameters,s.events,void 0)}static obi(i,s){return new t(i,s.duration,s.apiFramework||"",s.creative,s.mimeType,s.width,s.height,s.companions.map(s=>t.obi(i,s)),s.extensions,s.fw_parameters,void 0,s.ad_id)}get Ca(){return this.hu||(this.hu=function(t){let i;const s={get apiFramework(){return t.ajt},get companions(){return t.Jqt.Ca},get creative(){return t.abi},get duration(){return t.ct},get endTime(){return t.EO},get events(){return t.sK},get extensions(){return t.sQt},get freeWheelParameters(){return t.ubi},get height(){return t.Mi},get mimeType(){return t.iK},get startTime(){return t.kO},get width(){return t.Ti},addEventListener(t,s){i.wn(t,s)},removeEventListener(t,s){i.mn(t,s)}};return i=new Is(t,s),s}(this)),this.hu}get kO(){return this.LO}get EO(){return this.LO+this.qb}get ct(){return this.qb}get ajt(){return this.ujt}get abi(){return this.cbi}get iK(){return this.mK}get Ti(){return this.uA}get Mi(){return this.cA}get sK(){return this.Jf}get Jqt(){return this.$qt}get sQt(){return this.eQt}get ubi(){return this.dbi}get ro(){return this.ho}get Nyi(){var t;return null!=(t=this.Jf.clickthroughs)?t:[]}ebi(t){const i=this.kO<=t&&t<this.EO,s=i&&!this.ro,e=!i&&this.ro;s&&(this.lbi=!1,this.fbi=!1,this.vbi=!1,this._bi=!1,this.ho=!0,this.So(new wtt(this,this.kO))),e&&(this.ho=!1,this.So(new btt(this,this.EO)))}Syi(t){const i=(t-this.kO)/this.ct;!this.lbi&&i>=.25&&(this.lbi=!0,this.So(new Ett(this))),!this.fbi&&i>=.5&&(this.fbi=!0,this.So(new xtt(this))),!this.vbi&&i>=.75&&(this.vbi=!0,this.So(new Ptt(this))),!this._bi&&i>=.9999&&(this._bi=!0,this.So(new Ntt(this)))}nN(){this.lbi=!0,this.fbi=!0,this.vbi=!0,this._bi=!0}kn(){this.mn("Nnt",this.gbi),this.mn("Dnt",this.mbi)}constructor(t,i,s,e,n,r,h,o,a=[],u={},c={},d){super(),this.LO=void 0,this.qb=void 0,this.ujt=void 0,this.cbi=void 0,this.mK=void 0,this.uA=void 0,this.cA=void 0,this.eQt=void 0,this.dbi=void 0,this.Jf=void 0,this.Fjt=void 0,this.$qt=void 0,this.hu=void 0,this.ho=void 0,this.lbi=void 0,this.fbi=void 0,this.vbi=void 0,this._bi=void 0,this.gbi=void 0,this.mbi=void 0,this.LO=t,this.qb=i,this.ujt=s,this.cbi=e,this.mK=n,this.uA=r,this.cA=h,this.eQt=a,this.dbi=u,this.Jf=c,this.Fjt=d,this.$qt=new ktt,this.ho=!1,this.lbi=!1,this.fbi=!1,this.vbi=!1,this._bi=!1,this.gbi=()=>this.Syi(this.LO),this.mbi=()=>this.Syi(this.EO),this.$qt.$si(o),this.wn("Nnt",this.gbi),this.wn("Dnt",this.mbi)}};r(),r();var Mtt=class extends Kt{xa(){return new Ltt(this.od.Ca)}constructor(t){super("Rnt"),this.od=void 0,this.od=t}},Ltt=class extends sh{constructor(t){super("addadbreak"),this.adBreak=void 0,this.adBreak=t}};r();var Ott=class extends Kt{xa(){return new Ftt(this.od.Ca)}constructor(t){super("Ent"),this.od=void 0,this.od=t}},Ftt=class extends sh{constructor(t){super("removeadbreak"),this.adBreak=void 0,this.adBreak=t}},Vtt=class extends Jn{Jsi(t){this.So(new Mtt(t))}sei(t){this.So(new Ott(t))}constructor(){super()}},Wtt=class{get Ca(){return this.hu||(this.hu=function(t){return{get adBreaks(){return t.w0t.Ca},get currentAdBreak(){if(t.wnt)return t.wnt.Ca},get currentAds(){return t.wnt?t.wnt.Jc.Ca:(new ktt).Ca},skip(){t.nN()}}}(this)),this.hu}get w0t(){return this.Z0t}get wnt(){return me(this.Z0t.ec,t=>t.ro)}get mnt(){return this.wnt?this.wnt.Jc.ec.filter(t=>t.ro):[]}get pbi(){if(0===this.w0t.V||0===this.oa.Ex().length)return;const t=this.oa.Ex().end(this.oa.Ex().length-1);return me(this.w0t.ec,i=>i.Yut(t))}get Eyi(){return this.wbi}Tyi(t){if(0===t.length)return;const i=ZT.jn(t);for(const t of this.Z0t.ec.slice())Y(t.EO)&&i.Tn(0)>t.EO&&this.Z0t.vS(t)}yyi(t){const i=!function(t){return Y(t.breakOffsets)}(t),s=i?this.hyi.Uyi:0;for(const e of t.breaks){if(0===e.ads.length)continue;let t=e.timeOffset+s;const n=new ktt;let r=0;for(const s of e.ads){const e=i?Btt.obi(t,s):Btt.hbi(t,s);n.dO(e),t+=e.ct,r+=e.ct}const h=e.timeOffset+s,o=i?void 0:e.duration,a=new ptt(h,o,n,i,this.ybi);i&&this.bbi.push({Gqt:a,Qxt:h+r}),this.Z0t.dO(a)}}Abi(t){const i=this.pbi;i&&i.$yi(t+this.hyi.Uyi)}Ayi(t){this.Sbi=t,this.Z0t.ec.forEach(i=>i.ebi(t))}nN(){const t=this.Sbi,i=this.wnt;t&&i&&i.sbi(t)&&i.nN()}skipAd(t){this.nN()}Ryi(t,i){const s=[];for(const e of this.w0t.ec)!e.tbi&&e.kO>=t&&e.kO<i&&s.push(e);return s}destroy(){this.oa.mn("timeupdate",this.Tbi),this.hyi.mn("Fyi",this.kbi)}resetSource(){var t;for(const t of this.w0t.ec){for(const i of t.Jc.ec)i.Vo();t.Vo()}this.w0t.Zy(),null==(t=this.Ebi)||t.removeAllAds(),this.Sbi=void 0,this.bbi=[]}Rbi(t){return me(this.Ebi.ads,i=>i.creativeId===t.abi)}constructor(t,i,s,e){var n;this.oa=void 0,this.hyi=void 0,this.Z0t=void 0,this.ybi=void 0,this.wbi=void 0,this.hu=void 0,this.Sbi=void 0,this.bbi=[],this.Ebi=void 0,this.xbi=t=>(this.Ebi=t,this),this.kbi=t=>{t.hE.ads&&this.yyi(t.hE.ads),t.hE.currentBreakEnd&&this.Abi(t.hE.currentBreakEnd)},this.Tbi=t=>{if(0===this.bbi.length||0===this.oa.Ex().length)return;const i=this.oa.Ex().end(this.oa.Ex().length-1);for(const t of this.bbi.slice())Y(t.Gqt.ct)?is(this.bbi,t):t.Qxt<i&&(t.Gqt.$yi(t.Qxt),is(this.bbi,t))},this.jd=t=>{var i;const s=null==(i=this.Ebi)?void 0:i.createAdBreak({timeOffset:t.od.kO,maxDuration:t.od.ct,customData:t.od});t.od.wn("lyi",this.Ibi);for(const i of t.od.Jc.ec){var e,n;const r={type:"linear",timeOffset:i.kO,duration:i.ct,creativeId:i.abi,skipOffset:t.od.qjt,clickThrough:null==(e=i.Nyi)?void 0:e[0],customData:i};null==(n=this.Ebi)||n.createAd(r,s),i.wn("Nnt",this.O7t),i.wn("Dnt",this.Pbi),i.wn("o4t",this.Cbi),i.wn("a4t",this.Nbi),i.wn("u4t",this.Dbi),i.wn("rbi",this.jpi)}},this.Ibi=t=>{for(const e of t.od.Jc.ec){const t=this.Rbi(e);var i,s;if(t)null==(i=this.Ebi)||i.beginAd(t),null==(s=this.Ebi)||s.skipAd(t)}},this.Td=t=>{for(const i of t.od.Jc.ec)i.Vo();t.od.Vo()},this.O7t=t=>{const i=this.Rbi(t.xnt);var s;i&&(null==(s=this.Ebi)||s.beginAd(i))},this.Pbi=t=>{const i=this.Rbi(t.xnt);var s;i&&(null==(s=this.Ebi)||s.endAd(i))},this.Cbi=t=>{const i=this.Rbi(t.xnt);var s;i&&(null==(s=this.Ebi)||s.updateAdProgress(i,.25))},this.Nbi=t=>{const i=this.Rbi(t.xnt);var s;i&&(null==(s=this.Ebi)||s.updateAdProgress(i,.5))},this.Dbi=t=>{const i=this.Rbi(t.xnt);var s;i&&(null==(s=this.Ebi)||s.updateAdProgress(i,.75))},this.jpi=t=>{const i=this.Rbi(t.xnt);var s;i&&(null==(s=this.Ebi)||s.updateAdProgress(i,1))},this.oa=t,this.hyi=i,this.Z0t=new Vtt,this.Z0t.wn("Rnt",this.jd),this.Z0t.wn("Ent",this.Td),this.ybi=s,this.wbi=e,t.wn("timeupdate",this.Tbi),this.hyi.wn("Fyi",this.kbi),null==(n=this.oa.Jc)||n.Snt(Za.UPLYNK,this.xbi)}};r(),r(),r();var Utt=function(t){return t[t.NOT_AVAILABLE=-1]="NOT_AVAILABLE",t[t.NOT_APPLICABLE=0]="NOT_APPLICABLE",t[t.G=1]="G",t[t.PG=2]="PG",t[t.PG_13=3]="PG_13",t[t.R=4]="R",t[t.NC_17=5]="NC_17",t[t.X=6]="X",t[t.NOT_RATED=7]="NOT_RATED",t}({}),Gtt=function(t){return t[t.NOT_AVAILABLE=-1]="NOT_AVAILABLE",t[t.NOT_APPLICABLE=0]="NOT_APPLICABLE",t[t.TV_Y=1]="TV_Y",t[t.TV_Y7=2]="TV_Y7",t[t.TV_G=3]="TV_G",t[t.TV_PG=4]="TV_PG",t[t.TV_14=5]="TV_14",t[t.TV_MA=6]="TV_MA",t[t.NOT_RATED=7]="NOT_RATED",t}({}),Xtt=class t{static Bbi(i,s,e){const n=new Fm(i.rating_flags);return new t(s,e,i.duration,Boolean(i.audio_only),i.boundary_details,Boolean(i.error),i.tv_rating,i.max_slice,i.thumb_prefix,i.slice_dur,i.movie_rating,i.owner,i.meta,i.rates,i.thumbs,i.poster_url,i.default_poster_url,i.desc,n.Ly(1),n.Ly(2),n.Ly(4),n.Ly(8),i.external_id,Boolean(i.is_ad),i.asset)}get Ca(){return this.hu||(this.hu=function(t){return{startTime:t.kO,endTime:t.EO,duration:t.ct,audioOnly:t.Mbi,boundaryDetails:t.Lbi,error:t.lt,tvRating:t.Obi,maxSlice:t.Fbi,thumbPrefix:t.Vbi,sliceDuration:t.Wbi,movieRating:t.Ubi,ownerId:t.Gbi,metadata:t.NV,rates:t.Xbi,thumbnailResolutions:t.Zbi,posterUrl:t.Hbi,defaultPosterUrl:t.zbi,description:t.uD,hasAdultLanguage:t.Ybi,hasSexualSituations:t.Kbi,hasViolence:t.qbi,hasDrugSituations:t.jbi,externalId:t.Qbi,isAd:t.Jbi,assetId:t.$bi}}(this)),this.hu}constructor(t,i,s,e,n,r,h,o,a,u,c,d,l,f,v,_,g,m,p,w,y,b,A,S,T){this.kO=void 0,this.EO=void 0,this.ct=void 0,this.Mbi=void 0,this.Lbi=void 0,this.lt=void 0,this.Obi=void 0,this.Fbi=void 0,this.Vbi=void 0,this.Wbi=void 0,this.Ubi=void 0,this.Gbi=void 0,this.NV=void 0,this.Xbi=void 0,this.Zbi=void 0,this.Hbi=void 0,this.zbi=void 0,this.uD=void 0,this.Ybi=void 0,this.Kbi=void 0,this.qbi=void 0,this.jbi=void 0,this.Qbi=void 0,this.Jbi=void 0,this.$bi=void 0,this.hu=void 0,this.kO=t,this.EO=i,this.ct=s,this.Mbi=e,this.Lbi=n,this.lt=r,this.Obi=h,this.Fbi=o,this.Vbi=a,this.Wbi=u,this.Ubi=c,this.Gbi=d,this.NV=l,this.Xbi=f,this.Zbi=v,this.Hbi=_,this.zbi=g,this.uD=m,this.Ybi=p,this.Kbi=w,this.qbi=y,this.jbi=b,this.Qbi=A,this.Jbi=S,this.$bi=T}};var Ztt=_c({duration:ji,offset:ji}),Htt=_c({c3:Ztt}),ztt=_c({c7:Ztt}),Ytt=_c({halftime:Ztt}),Ktt=gI(vI(Gtt)),qtt=gI(vI(Utt)),jtt=_c({width:Hs(_h,ji),prefix:$c,bw:ji,bh:ji,height:Hs(_h,ji)}),Qtt=_c({audio_only:ji,boundary_details:Hs(_h,dc(Hs(Htt,ztt,Ytt))),error:ji,tv_rating:Ktt,max_slice:ji,thumb_prefix:$c,slice_dur:ji,movie_rating:qtt,owner:$c,meta:cI,rates:dc(ji),thumbs:dc(jtt),poster_url:$c,duration:ji,default_poster_url:$c,desc:$c,rating_flags:ji,external_id:$c,is_ad:ji,asset:$c}),Jtt=class{async ISt(t,i,s,e){const n=function(t,i,s){if(H7.HU(i))return[$tt(t,i,s)];if(dc(H7).HU(i))return i.map(i=>$tt(t,i,s));if(z7.HU(i)){return(he(i.externalId)?i.externalId:[i.externalId]).map(e=>$tt(t,"ext/"+i.userId+"/"+e,s))}throw new g("Invalid asset id")}(t,i,e),r=n.map(t=>lo(()=>this.Oyi(t),s));return(await Promise.all(r)).filter(Y)}async Oyi(t){const i=this.rW.dk({Fk:ci.GET,Yu:t,ck:Bi.CT}),s=await i,e=await s.hk();return Qtt.HU(e)||Qtt.YU(e,"AssetInfoResponse"),e}constructor(t){this.rW=void 0,this.rW=t}};function $tt(t,i,s){return s?t+"/player/assetinfo/"+i+".json?pbs="+s:t+"/player/assetinfo/"+i+".json"}r(),r();var tit=class extends Kt{xa(){return new iit(this.pd.Ca)}constructor(t){super("tAi"),this.pd=void 0,this.pd=t}},iit=class extends sh{constructor(t){super("removeasset"),this.asset=void 0,this.asset=t}};r();var sit=class extends Kt{xa(){return new eit(this.pd.Ca)}constructor(t){super("iAi"),this.pd=void 0,this.pd=t}},eit=class extends sh{constructor(t){super("addasset"),this.asset=void 0,this.asset=t}},nit=class extends Jn{yyi(t,i){let s,e=0;for(const n of t){s=e+n.duration;for(const t of i)e<=t.kO&&t.kO<s&&(s+=t.ct||0);this.dO(Xtt.Bbi(n,e,s)),e=s}}Jsi(t){this.So(new sit(t))}sei(t){this.So(new tit(t))}constructor(){super()}};r(),r();var rit=class extends Kt{xa(){return new hit(this.hE)}constructor(t){super("sAi"),this.hE=void 0,this.hE=t}},hit=class extends sh{constructor(t){super("preplayresponse"),this.response=void 0,this.response=t}};r();var oit=class extends Kt{xa(){return new ait(this.hE)}constructor(t){super("eAi"),this.hE=void 0,this.hE=t}},ait=class extends sh{constructor(t){super("assetinforesponse"),this.response=void 0,this.response=t}},uit=class extends ua{Myi(t){t&&this.So(new rit(Fa(t)))}wyi(t){t.forEach(t=>this.So(new oit(t)))}get Ca(){return this.hu||(this.hu=this.xa()),this.hu}xa(){let t;const i=this,s={get ads(){return i.syi.Ca},get assets(){return i.eyi.Ca},addEventListener(i,s){t.wn(i,s)},removeEventListener(i,s){t.mn(i,s)}};return t=new Is(i,s),s}constructor(t,i,s){super(),this.hu=void 0,this.syi=void 0,this.eyi=void 0,this.hyi=void 0,this.syi=t,this.eyi=i,this.hyi=s,s.wn("Fyi",this.Rs),s.wn("Vyi",this.Rs)}},cit=class{nAi(t,i){const s=new Y7(t.AR),e=new itt(t.AR),n=function(t){if(t.uplynk&&Y(t.uplynk.defaultSkipOffset))return function(t){return ih(t)?t:-1}(t.uplynk.defaultSkipOffset);return-1}(i),r=function(t){var i,s;const e=null!=(s=null==(i=t.uplynk)?void 0:i.onSeekOverAd)?s:void 0;return function(t){if(!t)return"play-none";switch(t.toLowerCase()){case"play-all":return"play-all";case"play-none":default:return"play-none";case"play-last":return"play-last"}}(e)}(i),h=new htt(e,t),o=new ott(s,i),a=new Wtt(t,h,n,r),u=new Jtt(t.AR),c=new nit,d=new uit(a,c,h);return new M7(t,h,o,a,d,u,c)}};Th(function(t){return class extends t{ryi(t){super.Ta(t)}oyi(t,i){return super.Hnt(t,i)}Pyi(t){super.WR(t)}ZR(){var t;return null!=(t=this.rAi.lt)?t:super.ZR()}zR(){var t;return null!=(t=this.rAi.HR)?t:super.zR()}WR(t,i){this.rAi.WR(t)}Ta(t){this.rAi.Ta(t)}Hnt(t,i){return this.rAi.Hnt(t,i)}xa(){const t=this.rAi.Ca;return Qr(super.xa(),{get uplynk(){return t}})}kn(){this.rAi.kn(),super.kn()}constructor(t,i){super(t,i),this.rAi=void 0,this.rAi=(new cit).nAi(this,i)}}},Rh.nnt),r(),r(),r(),r();var $a=function(t){return t.CREATIVE_VIEW="creativeView",t.START="start",t.FIRST_QUARTILE="firstQuartile",t.MID_POINT="midpoint",t.THIRD_QUARTILE="thirdQuartile",t.COMPLETE="complete",t.MUTE="mute",t.UNMUTE="unmute",t.PAUSE="pause",t.REWIND="rewind",t.RESUME="resume",t.FULL_SCREEN="fullscreen",t.EXIT_FULL_SCREEN="exitFullscreen",t.EXPAND="expand",t.COLLAPSE="collapse",t.ACCEPT_INVITATION_LINEAR="acceptInvitationLinear",t.ACCEPT_INVITATION="acceptInvitation",t.CLOSE_LINEAR="closeLinear",t.CLOSE="close",t.SKIP="skip",t.SKIP_SHOWN="skipShown",t.PROGRESS="progress",t.ENGAGED_VIEW="engagedView",t.IMPRESSION="impression",t.ERROR="error",t}({});r();var dit=class extends Ps{xa(){return _a(this)}get DJt(){return Qc.W0t}get kO(){return this.LO}get Nqt(){return this.gjt}constructor(t,i,s,e){super(t,i),this.gjt=void 0,this.LO=void 0,this.gjt=e,this.LO=s}};r();var lit=class extends Le{get bOt(){return this.hAi}get DJt(){return Qc.W0t}constructor(t,i,s){if(super(i),this.hAi=void 0,this.g3t=t,this.m3t=t,s){const t=new Date(s);Kf(t)&&(this.hAi=t)}}},fit=class{VI(){this.oa.wn(Vo.SM,this.xL),this.oa.wn(d.zw,this.hBt),this.oa.wn(d.uo,this.Rzt),this.oa.wn(d.Jw,this.Je),this.oa.wn(d.Nw,this.Eh),this.oa.wn(d.vy,this.bd),this.oa.wn(d._y,this.x2t),this.oa.wn(gN.MODE_CHANGE,this.oAi)}OI(){this.oa.mn(Vo.SM,this.xL),this.oa.mn(d.zw,this.hBt),this.oa.mn(d.uo,this.Rzt),this.oa.mn(d.Jw,this.Je),this.oa.mn(d.Nw,this.Eh),this.oa.mn(d.vy,this.bd),this.oa.mn(d._y,this.x2t),this.oa.mn(gN.MODE_CHANGE,this.oAi)}get aAi(){return this.uAi}get mnt(){const t=this.aAi;if(!t)return[];const i=[],s=this.cAi();for(const e of t.Jc)s>=e.kO&&this.DBt<=e.kO+e.ct&&i.push(e);return i}cAi(){return this.oa.FR()-this.dAi}lAi(){if(this.fAi)return;if(this.oa.Nd()!==1/0)return void(0===this.vAi.length&&(this.fAi=this._Ai()));const t=()=>{var t;null==(t=this.gAi)||t.Zg(),this.gAi=void 0,this.fAi=void 0};this.gAi=new ui,this.fAi=this.mAi(this.gAi.jg).catch(this.i9).then(t,t)}async pAi(){const t=_.min(1e3*2**this.wAi,3e4);try{var i;await hi(t,null==(i=this.gAi)?void 0:i.jg),this.wAi++}catch(t){if(hc(t))return void(this.wAi=0)}this.lAi()}async mAi(t){for(;Ko(t),!this.oa.ux;){const i=Zd.Mg()-this.yAi;if(i>1e4)await this._Ai(t),this.yAi=Zd.Mg(),this.wAi=0;else{const s=1e4-i;await hi(s,t)}}}bAi(t){const i=t.bOt;if(i&&this.oa.NR&&0===this.dAi&&!this.AAi&&0!==_.floor(this.oa.Ex().start(0))){const s=(this.oa.NR.getTime()-i.getTime())/1e3,e=this.oa.FR()-t.fOt;this.dAi=e-s}}async _Ai(t){try{const i=await this.oa.AR.dk({Yu:this.SAi}),s=await i.OT(t);if(0===s.avails.length)return void(0!==this.vAi.length&&(this.vAi=[]));if(s.avails.length===this.vAi.length&&s.avails[0].startTimeInSeconds===this.vAi[0].fOt)return void this.bAi(this.vAi[0]);const e=[];for(const t of s.avails){const i=new lit(t.durationInSeconds,t.startTimeInSeconds,t.availProgramDateTime);for(const s of t.ads){const t=new dit(i,Cs.nJt,s.startTimeInSeconds,s.trackingEvents);t.P3t(s.adId,s.width,s.height,s.durationInSeconds,[],s.skipoffset),i.b3t(t)}e.push(i),this.bAi(i)}this.vAi=Xs(e,(t,i)=>t.fOt-i.fOt)}catch(t){throw Ui(t),new m("Failed to poll MediaTailor tracking events")}}TAi(){var t;null==(t=this.gAi)||t.Jg(),this.gAi=void 0,this.fAi=void 0,this.yAi=-1/0}kAi(){if(0===this.vAi.length)return;const t=this.vAi[this.vAi.length-1],i=this.cAi();if(t.fOt+t._0t<this.DBt){var s;this.uAi&&(null==(s=this.oa.Jc)||s.So(new Xh(this.uAi)),this.uAi=void 0)}else{for(const t of this.vAi){const s=t.fOt;if(!(s+t._0t<this.DBt)&&(s<=i&&s+t._0t>this.DBt)){var e;if(this.aAi===t)return;return this.uAi=t,void(null==(e=this.oa.Jc)||e.So(new vV(this.uAi)))}}var n;if(this.uAi)null==(n=this.oa.Jc)||n.So(new Xh(this.uAi)),this.uAi=void 0}}EAi(){const t=this.mnt;if(0===t.length)return;let i=[];for(const s of t){const t=s.Nqt.filter(t=>Ft(this.RAi,t.eventType));i=i.concat(t)}for(const t of i)this.xAi(t.startTimeInSeconds)&&(t.eventType===$a.COMPLETE&&this.IAi($a.ENGAGED_VIEW),this.PAi(t))}CAi(t,i){return i.Nqt.filter(i=>eo(i.eventType,t))[0]}IAi(t){const i=this.mnt;if(0===i.length)return;const s=this.CAi(t,i[0]);s&&this.PAi(s)}PAi(t){this.wgi(t.eventType);for(const i of t.beaconUrls){const t={Fk:ci.GET,Yu:i,XT:"",ck:Bi.CT};0,_e(this.NAi(t))}}wgi(t){let i;const s=this.mnt;switch(t){case $a.START:i=new te(s[s.length-1],this.oa.FR());break;case $a.COMPLETE:i=new He(s[0],this.oa.FR());break;case $a.FIRST_QUARTILE:i=new ke(s[0],this.oa.FR());break;case $a.MID_POINT:i=new Ks(s[0],this.oa.FR());break;case $a.THIRD_QUARTILE:i=new Ji(s[0],this.oa.FR())}var e;void 0!==i&&(null==(e=this.oa.Jc)||e.So(i))}async NAi(t){const i=await this.oa.AR.dk(t);i.rk}xAi(t){const i=this.cAi();return t>=this.DBt&&t<i}kn(){this.OI(),this.TAi(),this.DBt=-1}constructor(t,i,s){this.oa=void 0,this.SAi=void 0,this.yAi=-1/0,this.uAi=void 0,this.dAi=0,this.vAi=[],this.AAi=void 0,this.cwi=!1,this.vq=!1,this.DBt=-1,this.gAi=void 0,this.fAi=void 0,this.wAi=0,this.xL=()=>{this.lAi()},this.Rzt=()=>{this.IAi($a.RESUME)},this.hBt=()=>{this.TAi(),this.IAi($a.PAUSE)},this.Je=()=>{this.TAi(),this.DBt=-1},this.Eh=()=>{this.TAi()},this.bd=()=>{-1===this.DBt&&(this.DBt=this.cAi()),this.kAi(),this.EAi(),this.DBt=this.cAi()},this.x2t=()=>{if(this.cwi!==this.oa.ix){this.cwi=this.oa.ix;const t=this.cwi?$a.MUTE:$a.UNMUTE;this.IAi(t)}},this.oAi=()=>{if(this.vq!==this.oa.ds()){this.vq=this.oa.ds();const t=this.vq?$a.FULL_SCREEN:$a.EXIT_FULL_SCREEN;this.IAi(t)}},this.i9=t=>{hc(t)||(this.IAi($a.ERROR),_e(this.pAi()))},this.RAi=[$a.START,$a.FIRST_QUARTILE,$a.MID_POINT,$a.THIRD_QUARTILE,$a.COMPLETE,$a.IMPRESSION,$a.CREATIVE_VIEW],this.oa=t,this.SAi=i,this.AAi=s,this.VI()}};Th(function(t){return class extends t{Ta(t){return this.DAi&&(this.DAi.kn(),this.DAi=void 0,this.gEt()),super.Ta(t)}async Hnt(t,i){if(!t||!function(t){return t.sources.some(t=>t.integration===rc.MEDIATAILOR)}(t))return super.Hnt(t,i);try{const s=await this.BAi(t,i);this.MAi=new s3(this),await super.Hnt(s,i)}catch(t){this.XX(new Wt(Ne.MANIFEST_LOAD_ERROR,t.message,t))}}gx(t){var i;(null==(i=this.MAi)?void 0:i.inAdBreak)||super.gx(t)}WR(t,i){var s;(null==(s=this.DAi)?void 0:s.aAi)||super.WR(t,i)}ZR(){var t;return null!=(t=this.$G)?t:super.ZR()}zR(){var t;return null!=(t=this.tX)?t:super.zR()}XX(t){this.$G=xs(t),this.tX=t,this.So(new $e(t))}gEt(){this.$G=void 0,this.tX=void 0}async BAi(t,i){const s=[];for(const e of t.sources){if(!ck(e)){s.push(e);continue}const t=e;if(!t.src){s.push(e);continue}const n=await this.LAi(t,i);Ko(i);const r=Jr({},t,{integration:void 0,src:n});s.push(r)}const e=Fa(t);return e.sources=s,e}async LAi(t,i){const s=t.src||"",e=s.match(/.+?(?=\/v1\/)/);if(!e)throw new m("Could not find MediaTailor session initialization url");const n=e[0],r=Vh(s,"?ads."),h=r?{Yu:s,ck:Bi.CT}:{Yu:s,Fk:ci.POST,XT:JSON.stringify({adsParams:t.adsParams}),ck:Bi.CT},o=await lo(()=>this.OAi(h,i),i);let a;try{if(a=n+o.manifestUrl,!r){const t=n+o.trackingUrl,i=function(t){return!!t&&/\bmpd\b/i.test(t)}(a);this.DAi=new fit(this,t,i)}}catch(t){throw new m("Something went wrong parsing the MediaTailor session initialization response")}return a}async OAi(t,i){try{const s=await this.AR.dk(t);return await s.OT(i)}catch(t){throw Ui(t),new m("Failed to initialize MediaTailor session manifest")}}kn(){var t;this.DAi&&(this.DAi.kn(),this.DAi=void 0),this.gEt(),null==(t=this.MAi)||t.destroy(),this.MAi=void 0,super.kn()}constructor(t,i){super(t,i),this.DAi=void 0,this.$G=void 0,this.tX=void 0,this.MAi=void 0}}},Rh.rnt),r(),r(),r(),r(),r();var Da=function(t){return t[t.FAi=0]="FAi",t[t.SM=1]="SM",t[t.VZ=2]="VZ",t[t.VAi=3]="VAi",t[t.WAi=4]="WAi",t[t.UAi=5]="UAi",t[t.ma=6]="ma",t}({});r();var vit=class extends fr{get KI(){}get Rt(){return this.We}set Rt(t){this.pO(t)}get Ca(){var t;return null!=(t=this.hu)?t:this.hu=co(this)}get o(){return String(this.vu.componentTag)||"hbbtvaudiotrack"}get Lt(){return this.y4}get Th(){return this.gO}get bs(){return""}get Hk(){return this.Rt?"enabled":"disabled"}set Hk(t){this.pO("enabled"===t)}get QI(){return this.cO}get JI(){}set JI(t){}get qI(){return this._O}pO(t){this.We=t,t?this.sMt.GAi(this.vu):this.sMt.XAi(this.vu)}constructor(t,i,s,e,n=!1){super(),this._O=ai(),this.cO=new Wc,this.vu=void 0,this.gO=void 0,this.y4=void 0,this.hu=void 0,this.sMt=void 0,this.We=void 0,this.vu=t,this.gO=i,this.y4=s,this.We=n,this.sMt=e}};r(),r(),r();var _it=function(t){return t.Gp="urn:dvb:casystemid:19219",t.Xp="urn:dvb:casystemid:19156",t}({}),git=function(t){return t.Gp="application/vnd.ms-playready.initiator+xml",t.Xp="application/widevine+xml",t}({});function mit(t,i,s){switch(t){case"urn:dvb:casystemid:19219":return function(t){return'<?xml version="1.0" encoding="utf-8"?><PlayReadyInitiator xmlns="http://schemas.microsoft.com/DRM/2007/03/protocols/"><LicenseServerUriOverride><LA_URL>'+(null!=t?t:"")+"</LA_URL></LicenseServerUriOverride></PlayReadyInitiator>"}(i);case"urn:dvb:casystemid:19156":if(!s)throw new m("Content URL is needed for Widevine license request");return function(t,i){return'<?xml version="1.0" encoding="utf-8"?><WidevineCredentialsInfo xmlns="http://www.smarttv-alliance.org/DRM/widevine/2012/protocols/"><ContentURL>'+Uc(null!=i?i:"")+"</ContentURL><DeviceID></DeviceID><StreamID></StreamID><ClientIP></ClientIP><DRMServerURL>"+Uc(null!=t?t:"")+"</DRMServerURL><DRMAckServerURL></DRMAckServerURL><DRMHeartBeatURL></DRMHeartBeatURL><DRMHeartBeatPeriod></DRMHeartBeatPeriod><UserData></UserData><Portal></Portal><StoreFront></StoreFront><BandwidthCheckURL></BandwidthCheckURL><BandwidthCheckInterval></BandwidthCheckInterval></WidevineCredentialsInfo>"}(i,s);default:throw new m("DRM key system is not supported")}}var pit=class extends NL{ZAi(t){this.HAi(),this.Tu=t}async zAi(t){if(!t.aX.length)return void this.HAi();if(!this.Tu)throw new m("The OIPF DRM agent has to be attached to the DOM");let i;this.YAi||(this.YAi=h.createElement("object"),this.YAi.type="application/oipfDrmAgent",this.Tu.appendChild(this.YAi),this.YAi.onDRMMessageResult=this.KAi,this.YAi.onDRMRightsError=this.qAi,this.jAi=h.createElement("object"),this.jAi.type="application/oipfCapabilities",this.Tu.appendChild(this.jAi));for(const s of t.aX){let e,n,r;if(s.TS===qg)e=_it.Gp,n=git.Gp,r=mit(_it.Gp,s.OG);else{if(s.TS!==xi)continue;e=_it.Xp,n=git.Xp,r=mit(_it.Xp,s.OG,t.eP)}try{return await this.vst(n,r,e),void this.So(new TL)}catch(t){i=t}}i&&this.So(new SL(i))}Zg(){return this.QAi=void 0,this.Tu=void 0,super.Zg()}vst(t,i,s){var e,n;return this.QAi=new gs,this.JAi=null==(n=this.YAi)||null==(e=n.sendDRMMessage)?void 0:e.call(n,t,i,s),this.JAi||null==this.QAi.zy||this.QAi.zy.call(this.QAi,new Q(Ne.CONTENT_PROTECTION_INTERNAL_ERROR,"No DRM message returned by OIPF DRM agent")),this.QAi.Yy}$Ai(t){switch(t){case 5:return Ne.CONTENT_PROTECTION_NOT_SUPPORTED;case 2:case 1:case 3:case 4:case 6:return Ne.CONTENT_PROTECTION_INTERNAL_ERROR;default:return Ne.CONTENT_PROTECTION_ERROR}}tSi(t){switch(t){case 2:return"The DRM agent was unable to complete the request";case 3:return"The specified MIME type is unknown for the specified DRM system";case 4:return"User consent is needed for that action";case 5:return"The specified DRM System is unknown";case 6:return"The license message has the wrong format";default:return"Unspecified error occurred"}}iSi(t){return 0===t?Ne.CONTENT_PROTECTION_LICENSE_ERROR:1===t?Ne.CONTENT_PROTECTION_LICENSE_INVALID:Ne.CONTENT_PROTECTION_ERROR}sSi(t){switch(t){case 0:return"No license, consumption of the content is blocked";case 1:return"Invalid license, consumption of the content is blocked";case 2:return"Valid license, consumption of the content is unblocked";default:return"Unknown error occurred"}}HAi(){this.YAi&&(je(this.YAi),this.YAi=void 0),this.jAi&&(je(this.jAi),this.jAi=void 0)}async b9(t,i,s){}constructor(...t){super(...t),this.YAi=void 0,this.jAi=void 0,this.Tu=void 0,this.JAi=void 0,this.QAi=void 0,this.KAi=(t,i,s)=>{var e,n,r,h;if(0===s)return void(null==(h=this.QAi)||null==(r=h.Hy)||r.call(h,t));const o=this.$Ai(s),a=this.tSi(s),u=new Q(o,a);null==(n=this.QAi)||null==(e=n.zy)||e.call(n,u)},this.qAi=(t,i,s,e)=>{const n=this.iSi(t),r=this.sSi(t),h=new Q(n,r);this.So(new SL(h))}}};r();var wit=class{get kx(){return ZT.$M(0,this.SL.ct)}get yx(){return hl.oZ}set yx(t){}get Cd(){return this.qS}SJ(t){return!1}kJ(t){return S6.resolve(void 0)}async zAi(t){await this.EJ.zAi(this.qS)}Zg(){return S6.resolve(void 0)}constructor(t,i,s){this.qS=void 0,this.SL=void 0,this.EJ=void 0,this.qS=t,this.SL=i,this.EJ=s}},yit=class extends fr{get IR(){return ZT.tL()}get NR(){}get nX(){}get Wu(){return this.sc}get kx(){var t,i;return null!=(i=null==(t=this.eX)?void 0:t.kx)?i:ZT.tL()}get Rx(){return this.pZ}get r4(){return!1}get QR(){return!1}get PL(){return Jr({},yD)}get lt(){return this.$G}get i4(){return!1}get Ma(){return this.ha}get I7(){return!0}get Y5(){return!1}get Gx(){return!0}set Gx(t){}get Ql(){return this.RZ}get nt(){return this.C8}get J9(){return this._Z}get pX(){return this.ea}N7(t){this.EJ.ZAi(t),this.ist.N7(t)}YJ(t){for(const i of t)if(i.Kp===xt.wW)return i}async Un(t){if(this.eX)throw new m("Already loaded a media source");if(t.Kp===xt.wW)return this.eX=new wit(t,this,this.EJ),await this.eX.zAi(t),this.eX;throw new m("Unsupported media source configuration for HbbTV")}async eSi(t){await this.nSi()}async Yx(){await this.nSi()}QG(t){}async hr(){this.eX=void 0,this.rSi=void 0}async I9(){throw new g("Not supported")}async Zg(){await this.hr(),this.Gl.kn(),this.C8.kn(),this.ist.kn(),this.sst.kn(),this.EJ.mn(Ou,this.Rs),await this.EJ.Zg()}be(){this._Z=!0,this.ist.be()}we(){this._Z=!1,this.ist.we()}vX(){return!1}gX(t,i,s,e,n){throw new m("Adding native sideloaded text tracks is not supported on HbbTV")}R7(){}x7(){}C7(){}tx(){return{tO:0,iO:0,sO:0}}Jx(){}wX(t){throw new m("Adding custom text tracks is not supported on HbbTV")}Zx(){}sI(t,i,s,e,n,r,h,o,a){const u=new wM(t,i,s,e,n,r,h,a,o);return this.Gl.tt(u),this.N8.tt(u),u}bX(){for(const t of this.Gl.CI.slice())t.kn();this.Gl.hr()}sW(t){this.Gl.it(t),this.N8.it(t)}hSi(){const t=h.getElementsByTagName("object");for(let i=0;i<t.length;i++){const s=t.item(i);if("video/broadcast"===s.type){const t=s;return t.onPlayStateChange=this.oSi,0===t.playState&&(null==t.bindToCurrentChannel||t.bindToCurrentChannel.call(t)),t}}}nSi(){var t,i;if(!this.aSi||3===this.aSi.playState||0===this.aSi.playState)return Promise.resolve("");if(null==(t=this.rSi)?void 0:t.Yy)return null==(i=this.rSi)?void 0:i.Yy;this.rSi=new gs;try{null==this.aSi.stop||this.aSi.stop.call(this.aSi)}catch(t){Zd.fp("Unable to stop broadcast for HbbTV",t),this.rSi.zy(new m("Unable to stop broadcast for HbbTV"))}return this.rSi.Yy}constructor(t,i){super(),this.sc=void 0,this.RZ=void 0,this.EJ=void 0,this.ha=void 0,this.ea=void 0,this.aSi=void 0,this.Gl=void 0,this.C8=void 0,this.N8=void 0,this.ist=void 0,this.sst=void 0,this.eX=void 0,this.pZ=void 0,this.$G=void 0,this.xW=void 0,this._Z=void 0,this.rSi=void 0,this.oSi=void 0,this.sc=t,this.RZ=i,this.ha=new bs,this.ea=new Du,this.Gl=new ou,this.eX=void 0,this.pZ=!1,this.$G=void 0,this.xW=pi.VL,this._Z=!0,this.rSi=void 0,this.oSi=()=>{var t,i,s,e;(null==(t=this.aSi)?void 0:t.playState)&&((null==(i=this.rSi)?void 0:i.Yy)||2!==this.aSi.playState||this.nSi().catch(ol),3===this.aSi.playState&&(null==(e=this.rSi)||null==(s=e.Hy)||s.call(e,String(this.aSi.playState)),this.rSi=void 0))},this.EJ=new pit(this),this.EJ.wn(Ou,this.Rs),this.C8=new Ka([this.Gl]),this.N8=new Qa(this),this.ist=new QL,this.sst=new pF(this.ist.xe,this.Wu,this.nt,this.Ql,this.Ma,this.pX),this.aSi=this.hSi(),this.nSi().catch(ol)}},bit=class extends yit{get iX(){}get ht(){return this.qL}get rt(){return this.JL}get vx(){return this.bZ}set vx(t){this.bZ=t,this.ux||this.uSi.play(t)}get ix(){return this.uSi.muted}set ix(t){this.uSi.muted=t}get Ox(){var t,i;return(null!=(i=null!=(t=this.uSi.volume)?t:null==this.uSi.getVolume?void 0:this.uSi.getVolume.call(this.uSi))?i:100)/100}set Ox(t){null==this.uSi.setVolume||this.uSi.setVolume.call(this.uSi,100*t)}get OR(){return this.uSi.playPosition?this.uSi.playPosition/1e3:0}get ct(){return!this.uSi.playTime||this.uSi.playTime<0?1/0:this.uSi.playTime/1e3}get GR(){return this.uSi.playState===Da.UAi}get Mi(){return this.uSi.offsetHeight*Zd.Zs.wm}get Ti(){return this.uSi.offsetWidth*Zd.Zs.wm}get ux(){return this.uSi.playState===Da.VZ}get mx(){return ZT.tL()}get Sx(){return this.j5}get Nx(){return 0}get Mx(){return 0}N7(t){super.N7(t),t.appendChild(this.uSi)}async Un(t){if(t.Kp===xt.wW){const i=await super.Un(t);return await this.eSi(t),this.uSi.onPlayStateChange=this.cSi,i}throw new m("Unsupported media source configuration for HbbTV")}async eSi(t){this.uSi.type=nk(t.eP),this.uSi.data=t.eP,await super.eSi(t)}async Yx(){await super.Yx(),this.uSi.play(this.bZ),this.So(new Ts(this.OR))}zx(){this.uSi.play(0),this.So(new Pi(this.OR))}By(t,i,s){this.uSi.seek(1e3*t),this.pZ=!0,this.So(new ul(this.OR))}async hr(){void 0!==this.eX&&this.uSi.stop(),this.dSi&&(Zd.gp(this.dSi),this.dSi=void 0),await super.hr(),Yh(this.uSi),this.uSi.data&&this.uSi.removeAttribute("data"),this.qL.hr(),this.JL.hr()}async Zg(){await super.Zg(),je(this.uSi)}be(){super.be(),this.uSi.style.display="block"}we(){super.we(),this.uSi.style.display="none"}GAi(t){const i=this.lSi(t);if(!i)throw new m("Selected track does not exist on HbbTV");null==this.uSi.selectComponent||this.uSi.selectComponent.call(this.uSi,i)}XAi(t){const i=this.lSi(t);if(!i)throw new m("Selected track does not exist on HbbTV");null==this.uSi.unselectComponent||this.uSi.unselectComponent.call(this.uSi,i)}lSi(t){var i;const s=null!=(i=null==this.uSi.getComponents?void 0:this.uSi.getComponents.call(this.uSi,t.type))?i:this.fSi();return this.vSi(s,t)}_Si(t){var i;const s=null!=(i=null==this.uSi.getCurrentActiveComponents?void 0:this.uSi.getCurrentActiveComponents.call(this.uSi,1))?i:this.fSi();this.qL.hr();for(let i=0;i<t.length;i++){const e=t.item(i);this.qL.tt(new vit(e,e.language,this.qL.V?_K.GCt:_K.XCt,this,this.gSi(s,e)))}}mSi(t){var i;const s=null!=(i=null==this.uSi.getCurrentActiveComponents?void 0:this.uSi.getCurrentActiveComponents.call(this.uSi,0))?i:this.fSi();this.JL.hr();for(let i=0;i<t.length;i++){const e=t.item(i);this.JL.tt(new vit(e,String(e.aspectRatio),this.JL.V?Ca.GCt:Ca.XCt,this,this.gSi(s,e)))}}fSi(){return{length:0,item:t=>{}}}gSi(t,i){return void 0!==this.vSi(t,i)}vSi(t,i){for(let s=0;s<t.length;s++){const e=t.item(s);if(this.pSi(e,i))return e}}pSi(t,i){return t.pid===i.pid&&t.componentTag===i.componentTag&&t.type===i.type&&t.encoding===i.encoding&&t.encrypted===i.encrypted}wSi(t){switch(t){case 0:return Lt.SRC_NOT_SUPPORTED;case 1:case 5:case 6:return Lt.NETWORK;default:return Lt.DECODE}}constructor(t,i,s){super(i,s),this.uSi=void 0,this.bZ=void 0,this.ySi=void 0,this.bSi=void 0,this.qL=void 0,this.JL=void 0,this.j5=void 0,this.ASi=void 0,this.dSi=void 0,this.cSi=void 0,this.SSi=void 0,this.uSi=t,this.bZ=1,this.qL=new O,this.JL=new O,this.j5=pi.VL,this.ASi=void 0,this.dSi=void 0,this.cSi=()=>{if(!this.uSi.playState)return;this.xW=this.j5,this.ySi=this.bSi,this.bSi=this.uSi.playState;const t=this.ct;switch(t!==this.ASi&&(this.So(new ur(t)),this.ASi=t),this.dSi&&this.bSi!==Da.SM&&(Zd.gp(this.dSi),this.dSi=void 0),this.bSi){case Da.VAi:this.j5=pi.VL;break;case Da.WAi:if(this.ySi===Da.VAi){var i;const t=null!=(i=null==this.uSi.getComponents?void 0:this.uSi.getComponents.call(this.uSi,1))?i:this.fSi();var s;const e=null!=(s=null==this.uSi.getComponents?void 0:this.uSi.getComponents.call(this.uSi,0))?s:this.fSi();if(0===t.length&&0===e.length)break;this._Si(t),this.mSi(e)}this.j5=pi.Qn;break;case Da.SM:this.pZ&&(this.pZ=!1,this.So(new Wi(this.OR))),this.So(new $n(this.OR)),this.j5=pi.UL,this.dSi=Zd._p(this.SSi,250);break;case Da.ma:this.j5=pi.VL,this.So(new eM(new iu(this.wSi(this.uSi.error))));break;case Da.UAi:this.So(new Be(this.OR));case Da.VZ:case Da.FAi:}this.j5!==this.xW&&this.So(new ca(this.OR,this.j5))},this.SSi=()=>{this.So(new Tc(this.OR,void 0))}}};r();var Ait=class extends yit{get iX(){return this.vT}get ht(){return this.qL}get rt(){return this.JL}get vx(){return this.vT.playbackRate}set vx(t){this.vT.playbackRate=t}get ix(){return this.vT.muted}set ix(t){this.vT.muted=t}get Ox(){return this.vT.volume}set Ox(t){this.vT.volume=t}get OR(){return this.vT.currentTime}get ct(){return this.vT.duration}get GR(){return this.vT.ended}get Mi(){return this.vT.offsetHeight*Zd.Zs.wm}get Ti(){return this.vT.offsetWidth*Zd.Zs.wm}get ux(){return this.vT.paused}get mx(){return ZT.jn(this.vT.played)}get Sx(){return this.z9.Sx}get Nx(){return this.vT.videoHeight}get Mx(){return this.vT.videoWidth}N7(t){super.N7(t),t.appendChild(this.vT)}async Un(t){if(t.Kp===xt.wW){const i=await super.Un(t);return await this.eSi(t),i}throw new m("Unsupported media source configuration for HbbTV")}async eSi(t){switch(t.cX){case Gh.cP:case Gh.dP:this.vT.setAttribute("crossorigin",t.cX);break;case Gh.Mk:default:this.vT.removeAttribute("crossorigin")}void 0!==t.yx?this.vT.preload=t.yx:this.vT.preload=hl.kG,void 0!==t.dX?this.vT.title=t.dX:Ol(this.vT);const i=this.vx;this.vT.src=t.eP,this.vx=i,await super.eSi(t)}async Yx(){await super.Yx(),await this.vT.play()}zx(){this.vT.pause()}By(t,i,s){i&&this.vT.fastSeek?this.vT.fastSeek(t):this.vT.currentTime=t,this.pZ=!0,this.So(new ul(this.OR))}async hr(){await super.hr(),Yh(this.vT),this.vT.src&&this.vT.removeAttribute("src"),this.qL.hr(),this.JL.hr()}async Zg(){await super.Zg(),this.a8.Zg(),this.z9.Zg(),this.r7(),this.TX(),je(this.vT)}be(){super.be(),this.vT.style.display="block",this.vT.style.height="100%",this.vT.style.width="100%"}we(){super.we(),this.vT.style.display="none"}s7(){this.iX.addEventListener("play",this.FW),this.iX.addEventListener("pause",this.VW),this.iX.addEventListener("timeupdate",this.Nc),this.iX.addEventListener("progress",this.TSi),this.iX.addEventListener("loadstart",this.As),this.iX.addEventListener("ended",this.Ec),this.iX.addEventListener("ratechange",this.kSi),this.iX.addEventListener("volumechange",this.Pzt),this.iX.addEventListener("durationchange",this.Ezt),this.iX.addEventListener("loadedmetadata",this.ESi),this.iX.addEventListener("emptied",this.RSi),this.iX.addEventListener("seeked",this.xSi),this.iX.addEventListener("seeking",this.ISi),this.iX.addEventListener("error",this.PSi),Fc()&&this.iX.addEventListener("encrypted",this.P9)}r7(){this.iX.removeEventListener("play",this.FW),this.iX.removeEventListener("pause",this.VW),this.iX.removeEventListener("timeupdate",this.Nc),this.iX.removeEventListener("progress",this.TSi),this.iX.removeEventListener("loadstart",this.As),this.iX.removeEventListener("ended",this.Ec),this.iX.removeEventListener("ratechange",this.kSi),this.iX.removeEventListener("volumechange",this.Pzt),this.iX.removeEventListener("durationchange",this.Ezt),this.iX.removeEventListener("loadedmetadata",this.ESi),this.iX.removeEventListener("emptied",this.RSi),this.iX.removeEventListener("seeked",this.xSi),this.iX.removeEventListener("seeking",this.ISi),this.iX.removeEventListener("error",this.PSi),this.iX.removeEventListener("encrypted",this.P9)}XX(t){this.$G=t,this.So(new eM(this.$G))}LX(){const t=this.vT.audioTracks,i=this.vT.videoTracks;t&&(t.addEventListener("addtrack",this.CSi),t.addEventListener("removetrack",this.NSi),t.addEventListener("change",this.DSi)),i&&(i.addEventListener("addtrack",this.BSi),i.addEventListener("removetrack",this.MSi),i.addEventListener("change",this.LSi))}TX(){const t=this.vT.audioTracks,i=this.vT.videoTracks;t&&(t.removeEventListener("addtrack",this.CSi),t.removeEventListener("removetrack",this.NSi),t.removeEventListener("change",this.DSi)),i&&(i.removeEventListener("addtrack",this.BSi),i.removeEventListener("removetrack",this.MSi),i.removeEventListener("change",this.LSi))}dh(t){for(let i=0;i<t.V;i++){t.DI(i).wO()}}constructor(t,i,s){super(i,s),this.vT=void 0,this.qL=void 0,this.JL=void 0,this.z9=void 0,this.a8=void 0,this.OSi=void 0,this.FW=void 0,this.VW=void 0,this.Nc=void 0,this.TSi=void 0,this.As=void 0,this.Ec=void 0,this.kSi=void 0,this.Pzt=void 0,this.Ezt=void 0,this.ESi=void 0,this.RSi=void 0,this.xSi=void 0,this.ISi=void 0,this.WW=void 0,this.OW=void 0,this.PSi=void 0,this.P9=void 0,this.BSi=void 0,this.MSi=void 0,this.LSi=void 0,this.CSi=void 0,this.NSi=void 0,this.DSi=void 0,this.vT=t,this.qL=new O,this.JL=new O,this.OSi=void 0,this.FW=()=>{this.So(new Ts(this.OR))},this.VW=()=>{this.So(new Pi(this.OR))},this.Nc=()=>{const t=this.OR,i=this.Rx,s=void 0!==this.OSi,e=s&&this.OSi!==t;(i||!s||e)&&(this.So(new Tc(t,void 0)),this.OSi=t)},this.TSi=()=>{this.So(new Ut(this.OR))},this.As=()=>{this.So(new Pt)},this.Ec=()=>{this.So(new Be(this.OR))},this.kSi=()=>{this.So(new Fs(this.OR,this.vx))},this.Pzt=()=>{this.So(new q(this.OR,this.Ox))},this.Ezt=()=>{this.So(new ur(this.ct))},this.ESi=()=>{},this.RSi=()=>{},this.xSi=()=>{this.pZ&&(this.pZ=!1),this.So(new Wi(this.OR))},this.ISi=()=>{this.So(new ul(this.OR))},this.WW=t=>{this.xW!==t.readyState&&(this.xW=t.readyState,this.So(t))},this.OW=()=>{this.So(new $n(this.OR))},this.PSi=()=>{if(null!==this.vT.error){const i=this.vT.error;var t;this.XX(new iu(null!=(t=i.code)?t:Lt.DECODE,i.message||"Error decoding media",void 0,i.msExtendedCode))}},this.P9=t=>{this.So(new bm(t.initDataType,t.initData||new ArrayBuffer(0)))},this.BSi=t=>{const i=this.vT.videoTracks;if(i)for(let t=0;t<i.length;t++){const s=i[t];tP(this.JL,s)||this.JL.tt(new tE(s))}},this.MSi=t=>{const i=[],s=this.vT.videoTracks;if(s){for(const t of this.JL.CI)iP(s,t.mO)||i.push(t);for(const t of i)this.JL.it(t)}},this.LSi=t=>{this.dh(this.JL)},this.CSi=t=>{const i=this.vT.audioTracks;if(i)for(let t=0;t<i.length;t++){const s=i[t];tP(this.qL,s)||this.qL.tt(new Jk(s))}},this.NSi=t=>{const i=[],s=this.vT.audioTracks;if(s){for(const t of this.qL.CI)iP(s,t.mO)||i.push(t);for(const t of i)this.qL.it(t)}},this.DSi=t=>{this.dh(this.qL)},this.z9=new BL(this),this.z9.wn(Vo.bI,this.WW),this.z9.N9(new Uu(this)),this.a8=new sM(this),this.a8.wn(Vo.SM,this.OW),this.s7(),this.LX()}},Sit=[d.uo,d.zw,Vo.SM,d.Jw,d.Qw,d.Nw,d.Iw,d.Ew,d.Tw,d.vy,d.Yw,d.Uw,d.Kw,d._y,d.jw,d.Mw,d.Dw],Tit=class extends fr{get ht(){return this.SL.ht}get IR(){return this.SL.IR._s()}get NL(){}get NR(){return this.SL.NR}set NR(t){t&&this.SL.QG(t)}get bt(){return this.Ac}get OR(){return this.SL.OR}set OR(t){this.SL.By(t)}get hX(){return this.oX}get ct(){return this.SL.ct}get GR(){return this.SL.GR}get HR(){return this.tX}get lt(){return this.$G}get YR(){}get qR(){}get QR(){return!1}get Gx(){return this.SL.Gx}set Gx(t){this.SL.Gx=t}get Wx(){return this.EZ}get $R(){return Jr({},{tO:0,iO:0,sO:0,eO:0,nO:0,rO:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}},this.SL.tx())}get ix(){return this.SL.ix}set ix(t){this.SL.ix=t}get hx(){return!0}get ux(){return this.SL.ux}get vx(){return this.SL.vx}set vx(t){this.SL.vx=t}get mx(){return this.SL.mx._s()}get yx(){return this.sX}set yx(t){this.sX=t,this.eX&&(this.eX.yx=t)}get Sx(){return this.SL.Sx}get kx(){return this.SL.kx._s()}get Rx(){return this.SL.Rx}get nX(){return this.SL.nX}get nt(){return this.Gl}get Nx(){return this.SL.Nx}get rt(){return this.SL.rt}get Mx(){return this.SL.Mx}get Ox(){return this.SL.Ox}set Ox(t){this.SL.Ox=t}sI(t){return this.SL.wX(t)}qx(){return!1}Xx(){return this.SL.Ma}Zx(){}we(){this.SL.we()}Jx(){this.SL.Jx()}zx(){this.SL.zx()}async Yx(){await this.SL.Yx()}$x(){throw new m("Recreate media source is not supported on HbbTV")}WR(t,i){this.SL.By(t)}async Ta(t,i,s){var e;Ko(s),this.Ac=t;const n={Kp:xt.wW,eP:t.src,GT:t.type,aX:this.uX(t),yx:this.sX,cX:t.crossOrigin,dX:null==(e=i.metadata)?void 0:e.title};this.eX=await this.SL.Un(n),i.textTracks&&this.fX(i.textTracks),Ue(this.nt)}Ix(t,i,s,e){return Promise.resolve()}Px(){return Promise.resolve()}be(){this.SL.be()}jx(){}Qx(){}Aa(){return this.SL.pX}async hr(){this.Ac=void 0,this.$G=void 0,this.tX=void 0,this.eX=void 0,await this.mX.hr(),this.SL.bX(),await this.SL.hr()}async kn(){await this.hr(),this.AX.kn(),this.kX.Zg(),this.SL.mn(Sit,this.Rs),this.SL.mn(sa.ma,this.NX),await this.SL.Zg(),this.gn.kn(),this.Gl.kn(),await this.mX.kn()}XX(t,i){this.$G||(this.$G=i,this.tX=t,this.So(new $e(t)))}fX(t){for(const i of t)void 0!==i.src&&this.mX.eW(i)}uX(t){if(!t.contentProtection)return[];const i=[];return t.contentProtection.widevine&&i.push({TS:xi,OG:t.contentProtection.widevine.licenseAcquisitionURL,MX:[]}),t.contentProtection.playready&&i.push({TS:qg,OG:t.contentProtection.playready.licenseAcquisitionURL,MX:[]}),this.FSi(i,t.contentProtection.preferredKeySystems)}FSi(t,i){if(void 0===i||0===i.length)return t;const s=t=>{const s=i.indexOf(t.TS.Jp);return s>=0?s:i.length};return Xs(t,(t,i)=>s(t)-s(i))}constructor(t,i,s,e){super(),this.gn=void 0,this.SL=void 0,this.eX=void 0,this.Gl=void 0,this.oX=new tu,this.EZ=void 0,this.kX=void 0,this.AX=void 0,this.mX=void 0,this.Ac=void 0,this.$G=void 0,this.tX=void 0,this.sX=hl.oZ,this.NX=t=>{const i=t.lt,s=i.code,e=new Wt(Xk(s),"Something went wrong during HbbTV playback.",i),n=xs(e);this.XX(e,n)},this.gn=new un(t),this.gn._n(),this.SL=Af()?new Ait(h.createElement(Mo.Nk),this.gn,e):new bit(h.createElement("object"),this.gn,e),this.SL.N7(t),this.SL.wn(Sit,this.Rs),this.SL.wn(sa.ma,this.NX),this.kX=new vx(this,this.SL),this.AX=new ts(this.kX,!0),this.AX.wn(K,this.Rs),this.mX=new bo(this.SL,i),this.Gl=new Ka([this.SL.nt,this.mX.Z]),this.EZ=s}};cs(new class{xP(t,i,s,e,n,r,h,o){return new Tit(t,s,r,h)}zX(t,i){var s;return!(!As.k_||t.type!==We._P&&!ue(t.type)&&!hk(t.type))&&!(Af()&&!(null==(s=t.contentProtection)?void 0:s.useOipfDrmAgent)&&(!t.contentProtection||Fc()))}async YX(t){return!!await PT(t,!0)}KX(){return!1}constructor(){this.qX=ki.gG}});export{td as a,id as b,r as c,As as d,Y as e,he as f,Nc as g,yo as h,je as i,jd as j,El as k,fi as l,Rl as m,Il as n,Bl as o,Ol as p,Fl as q,Zd as r,ol as s,Hh as t,Eu as u,Xs as v,ss as w,Ba as x,Mu as y,me as z,is as A,Ft as B,Lr as C,Ko as D,_e as E,cv as F,dv as G,yg as H,Jr as I,Vh as J,am as K,fr as L,sh as M,d as N,Ne as O,Je as P,fS as Q,Qr as R,T as S,vS as T,Zu as U,go as V,Uk as W,Ra as X,xE as Y,Z,D as _,XR as $,HR as aa,pi as ba,lx as ca,Rh as da,Th as ea,KF as fa,ZT as ga,lk as ha,Jt as ia,ur as ja,ju as ka,kk as la,xk as ma,Ze as na,Er as oa,YP as pa,ls as qa,Gu as ra,$C as sa,hN as ta,un as ua,cN as va,Tt as wa,lN as xa,gN as ya,mN as za,pN as Aa,bN as Ba,Pt as Ca,oO as Da,aO as Ea,uO as Fa,dO as Ga,lO as Ha,fO as Ia,VO as Ja,WO as Ka,UO as La,GO as Ma,qu as Na,VF as Oa,WF as Pa,QF as Qa,TV as Ra,kV as Sa,EV as Ta,RV as Ua,CV as Va,NV as Wa,DV as Xa,FU as Ya,VU as Za,Qc as _a,Q1 as $a,o2 as ab,V2 as bb,K6 as cb,P9 as db,n8 as eb,u8 as fb,att as gb};
//# sourceMappingURL=THEOplayer.common.esm.js.map