/*!
 THEOplayer

 Usage of this software is limited by the THEOplayer License.

 It is prohibited to reverse engineer, decompile, translate,
 disassemble, decipher, decrypt, or otherwise attempt to
 discover the source code of this software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 OTHER DEALINGS IN THE SOFTWARE.

 For more information, visit https://www.theoplayer.com or contact
 contact @ theoplayer . com

 This product makes use of Open Source Software: video.js
 (Apache 2.0 - Copyright Brightcove, Inc.), long.js (Apache 2.0),
 nodejs-langs (MIT - Copyright Andrew Lawson), promise-polyfill
 (MIT - Copyright (c) 2014 Taylor Hakes & Forbes Lindesay),
 shaka-player (Apache 2.0 - Copyright 2016 Google LLC)
 The code of these projects has been heavily modified during
 integration.
 More information on the licenses can be found here: Apache 2.0
 (http://www.apache.org/licenses/LICENSE-2.0), MIT
 (https://opensource.org/licenses/MIT)


 THEOplayer is based on patented technology developed by
 THEO Technologies (https://www.theoplayer.com).

 Version: 8.13.1
 Created: 2025-03-14T13:33:27.744Z
 */
var Bo,It,f,Dl,Pt,Ll,Ol,Rl,rn,Ys,zl,Ul,Ql,Fl,Yl,Vl,Gl,Wl,Zl,Hl,Xl,Ro,a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:void 0!==s?s:"undefined"!=typeof global?global:this,s=a.window,h=a.document,ql=a.location,Kl=a.navigator,u=a.setTimeout,c=a.clearTimeout,v=a.setInterval,m=a.clearInterval,b=a.Error,k=a.TypeError,_=(a.SyntaxError,a.Object),x=a.Math,C=a.parseInt,S=a.parseFloat,j=a.isNaN,T=a.Uint8Array,Jl=a.Worker,$l=(a.WorkerGlobalScope,a.XMLHttpRequest),td=_.create,id=_.defineProperty,ed=_.getOwnPropertyDescriptor,sd=_.getOwnPropertyNames,nd=_.getPrototypeOf,rd=_.prototype.hasOwnProperty,od=(t,i)=>()=>(t&&(i=t(t=0)),i),Ui=(t,i)=>()=>(i||t((i={exports:{}}).exports,i),i.exports),hd=(t,i)=>{for(var e in i)id(t,e,{get:i[e],enumerable:!0})},ad=(t,i,e,s)=>{if(i&&"object"==typeof i||"function"==typeof i)for(let n of sd(i))rd.call(t,n)||n===e||id(t,n,{get:()=>i[n],enumerable:!(s=ed(i,n))||s.enumerable});return t},ud=(t,i,e)=>(e=null!=t?td(nd(t)):{},ad(!i&&t&&t.__esModule?e:id(e,"default",{value:t,enumerable:!0}),t)),cd=t=>ad(id({},"__esModule",{value:!0}),t),r=od((()=>{"use strict";if("function"==typeof Symbol&&Symbol.iterator)Bo=Symbol,It=null!=(Ll=Symbol.for)?Ll:Symbol,f=Symbol.iterator,Dl=null!=(Ol=Symbol.dispose)?Ol:It("Symbol.dispose"),Pt=null!=(Rl=Symbol.asyncDispose)?Rl:It("Symbol.asyncDispose");else{let t=0;Bo=function(i){return"ul"+i+"_"+ ++t},f=(It=function(t){return"ul"+t})("Symbol.iterator"),Dl=It("Symbol.dispose"),Pt=It("Symbol.asyncDispose"),Bo.for=It,Bo.iterator=f,Bo.dispose=Dl,Bo.asyncDispose=Pt}})),ld=od((()=>{"use strict";var t;r(),(t={}).hd="web",t.Md="android",t.Td="android-tv",t.Nd="ios",t.Id="tvos",t.Dd="chromecast",t.Ed="theoliveweb",rn=t})),dd={};hd(dd,{browserDetection:()=>Ro});var Fe,il=od((()=>{"use strict";r(),ld(),Ys=Kl?Kl.userAgent:"",zl=Ys.match(/chrome\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/i),Ul=Ys.match(/Edg\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/i),Ql=Ys.match(/Android ([0-9\.]+)/i),Fl=Ys.match(/Windows NT ([0-9\.]+)/i),Yl=Ys.match(/(Version)\/((\d+)\.(\d+)(?:\.(\d+))?).*Safari/),Vl=Ys.match(/Firefox\/([0-9\.]+)/i),Gl=Ys.match(/OPR\/(\d+\.\d+)/i),Wl=Ys.match(/Tizen ([0-9\.]+)/i),Zl=Ys.match(/(iPhone OS|iPad OS|iPod OS|Mac OS X) (\d+)_(\d+)_?(\d+)?/),Hl=Ys.match(/HbbTV\/([0-9.]+)/i),(Xl=class{get Je(){return this.jd}get Od(){return this.Rd}get Pd(){return this.zd}get Bd(){return this.Ud}get Qd(){return this.Fd}get Yd(){return this.Vd}get Gd(){return this.Wd}get Zd(){return this.Hd}get Xd(){return this.qd}get Kd(){return this.Jd}get $d(){return this.tf}get Ka(){return this.ef}get nf(){return this.rf}get hf(){return this.uf||this.cf}get nd(){return this.lf}get Qs(){return this.df}get gf(){return this._f}get vf(){return this.wf}get mf(){var t;return null!=(t=this.pf)?t:this.Af}get yf(){return this.bf}get Mf(){var t;return(null==(t=s.chrome)?void 0:t.webview)&&this.Tf>0}get Sf(){return this.Tf}get Nf(){return this.If}get Df(){return this.Ef}get kf(){return this.xf}get Lf(){return this.Cf}get jf(){return this.Of}get Rf(){return this.Pf}get zf(){return this.Bf}get Uf(){return this.Qf}get Ff(){return this.Yf}get Vf(){return this.Gf}get Wf(){return this.Zf}get Hf(){return this.Xf}get qf(){return this.Kf}get Jf(){return this.$f}get eg(){return this.rg}get og(){return this.hg}get ag(){return this.cg}get dg(){return this.fg}get gg(){return!(!this.kf&&!this.Nf)&&this.mf<=56}get _g(){return this.vg}get wg(){return this.pg}get Ag(){return this.yg}get Mg(){return this.Tg}get Sg(){return this.Ng}get Ig(){return this.Dg}get Eg(){return this.xg}get Lg(){return this.Cg}get IS_IOS_CHROME(){return this.jg}constructor(){var t;this.jd=Boolean("ontouchstart"in self||self.DocumentTouch&&h instanceof self.DocumentTouch||Kl&&Kl.msMaxTouchPoints),this.Rd=/(mac\sos\sx)\s?([\w\s\.]+\w)*/i.test(Ys)||/(macintosh|mac(?=_powerpc)\s)/i.test(Ys),this.zd=/Windows NT/i.test(Ys),this.Ud=Fl?S(Fl[1]):0,this.Fd=/Android/i.test(Ys),this.Vd=Ql?S(Ql[1]):0,this.Wd=/windows phone (8|8\.1)/i.test(Ys),this.Hd=/iPhone/i.test(Ys),this.qd=/iPad/i.test(Ys),this.Jd=this.Rd&&this.jd&&!this.qd,this.tf=/iPod/i.test(Ys),this.lf=/Mobile Safari/i.test(Ys),this.uf=/EOS\d*STB/i.test(Ys),this.cf=/APP\d*STB/i.test(Ys),this.ef=(this.Hd||this.qd||this.Jd||this.tf)&&!this.Wd,this.rf=Zl?S(Zl[2]):0,this.df=this.Wd||this.ef||this.Fd||this.lf,this._f=/CriOS/i.test(Ys),this.wf=Boolean(self.chrome&&/google/i.test(Kl.vendor))||this._f,this.bf=this.wf&&/Edg\//i.test(Kl.userAgent),this.Tf=Ul?C(Ul[1],10):0,this.jg=Boolean(/CriOS/i.test(Ys)),this.Cg=Boolean(self.chrome||/Chrome/i.test(Ys)||this.jg),this.Af=zl?C(zl[1],10):0,this.If=/SMART-TV.*Tizen/i.test(Ys),this.Ef=Wl?S(Wl[1]):0,this.pf=this.Ef>0?(t=this.Ef)>=8?108:t>=7?94:t>=6.5?85:t>=6?76:t>=5.5?69:t>=5?63:t>=4?56:t>=3?47:0:void 0,this.xf=/webos|web0s/i.test(Ys),this.Cf=/HbbTV/i.test(Ys),this.Of=!!Hl&&function(t){if(!t)return!1;let i=t.split(".").map(Number);return 3===i.length&&1===i[0]&&2===i[1]}(Hl[1]),this.Pf=/VIZIO/i.test(Ys),this.Bf=/Edge\/\d+/i.test(Ys),this.Qf=/Trident/i.test(Ys),this.Yf=this.Qf&&!self.ActiveXObject&&"ActiveXObject"in self,this.Gf=/Vivaldi/i.test(Ys),this.Zf=/Firefox/i.test(Ys)&&!/Seamonkey/i.test(Ys),this.Xf=Vl?S(Vl[1]):0,this.Kf=/Safari/i.test(Ys)&&!/Chrome/i.test(Ys)&&!this.Wd&&!this.If,this.$f=Yl?S(Yl[2]):0,this.rg=Boolean(Gl),this.hg=Gl?S(Gl[1]):0,this.cg=/CrKey/.test(Ys),this.fg=/\b(tv|smart-tv|smarttv|appletv|crkey|googletv|hbbtv|pov_tv|roku|viera|nettv|philipstv|vizio)\b/i.test(Ys),this.vg=/PlayStation 4/i.test(Ys),this.pg="web"===rn.Td,this.yg="web"===rn.Md,this.Tg=this.yg||this.pg,this.Ng="web"===rn.Nd,this.Dg="web"===rn.Id,this.xg="web"===rn.Dd}}).Ld=new Xl,Ro=Xl.Ld}));var ya,vc,Qi=od((()=>{"use strict";r()})),fd={};function Yh(t,i){let e=-1/0;return function(){for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];const o=Fe.Og();o-e>=i&&(t.apply(this,n),e=o)}}function Gn(t,i){let e=0;return function(){for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];const o=this;0!==e&&Fe.Rg(e),e=Fe.Pg((()=>{e=0,t.apply(o,n)}),i)}}function di(t){let i;return()=>(void 0!==t&&(i=t(),t=void 0),i)}hd(fd,{debounce:()=>Gn,identity:()=>vc,lazyConstant:()=>di,noOp:()=>ya,throttle:()=>Yh});var ds=od((()=>{"use strict";r(),Qi(),ya=()=>{},vc=t=>t})),gd=Ui(((t,i)=>{var e,s;r(),e=t,s=function(t){"use strict";var i="function"==typeof Bo&&"symbol"==typeof f?Bo:function(t){return"Symbol("+t+")"};function e(){}var s=Number.isNaN||function(t){return t!=t},n=e;function r(t){return"object"==typeof t&&null!==t||"function"==typeof t}function o(t){return t.slice()}function h(t,i,e,s,n){new T(t).set(new T(e,s,n),i)}function a(t){return!1!==function(t){return"number"==typeof t&&(!s(t)&&!(t<0))}(t)&&t!==1/0}function u(t,i,e){if("function"!=typeof t)throw new k("Argument is not a function");return Function.prototype.apply.call(t,i,e)}function c(t,i,e,s){var n=t[i];if(void 0!==n){if("function"!=typeof n)throw new k(n+" is not a method");switch(e){case 0:return function(){return d(n,t,s)};case 1:return function(i){var e=[i].concat(s);return d(n,t,e)}}}return function(){return M(void 0)}}function l(t,i,e){var s=t[i];if(void 0!==s)return u(s,t,e)}function d(t,i,e){try{return M(u(t,i,e))}catch(t){return S(t)}}function g(t){if(t=Number(t),s(t)||t<0)throw new RangeError("highWaterMark property of a queuing strategy must be non-negative and non-NaN");return t}function v(t){if(void 0===t)return function(){return 1};if("function"!=typeof t)throw new k("size property of a queuing strategy must be a function");return function(i){return t(i)}}var w=Promise,m=Promise.prototype.then,p=Promise.resolve.bind(w),A=Promise.reject.bind(w);function y(t){return new w(t)}function M(t){return p(t)}function S(t){return A(t)}function N(t,i,e){return m.call(t,i,e)}function I(t,i,e){N(N(t,i,e),void 0,n)}function D(t,i){I(t,i)}function E(t,i){I(t,void 0,i)}function L(t,i,e){return N(t,i,e)}function C(t){N(t,void 0,n)}var j=function(){function t(){this.zg=0,this.Bg=0,this.Ug={Qg:[],Fg:void 0},this.Yg=this.Ug,this.zg=0,this.Bg=0}return _.defineProperty(t.prototype,"length",{get:function(){return this.Bg},enumerable:!0,configurable:!0}),t.prototype.push=function(t){var i=this.Yg,e=i;16383===i.Qg.length&&(e={Qg:[],Fg:void 0}),i.Qg.push(t),e!==i&&(this.Yg=e,i.Fg=e),++this.Bg},t.prototype.shift=function(){var t=this.Ug,i=t,e=this.zg,s=e+1,n=t.Qg,r=n[e];return 16384===s&&(i=t.Fg,s=0),--this.Bg,this.zg=s,t!==i&&(this.Ug=i),n[e]=void 0,r},t.prototype.forEach=function(t){for(var i=this.zg,e=this.Ug,s=e.Qg;!(i===s.length&&void 0===e.Fg||i===s.length&&(i=0,0===(s=(e=e.Fg).Qg).length));)t(s[i]),++i},t.prototype.peek=function(){var t=this.Ug,i=this.zg;return t.Qg[i]},t}();function O(t,i,e){var s=null;!0===e&&(s=_.prototype);var n=_.create(s);return n.value=t,n.done=i,n}function R(t,i){t.Vg=!0,t.Gg=i,i.Wg=t,"readable"===i.Ea?U(t):"closed"===i.Ea?function(t){U(t),Y(t)}(t):Q(t,i.Zg)}function P(t,i){return Zi(t.Gg,i)}function z(t){"readable"===t.Gg.Ea?F(t,new k("Reader was released and can no longer be used to monitor the stream's closedness")):function(t,i){Q(t,i)}(t,new k("Reader was released and can no longer be used to monitor the stream's closedness")),t.Gg.Wg=void 0,t.Gg=void 0}function B(t){return new k("Cannot "+t+" a stream using a released reader")}function U(t){t.Hg=y((function(i,e){t.Xg=i,t.qg=e}))}function Q(t,i){U(t),F(t,i)}function F(t,i){C(t.Hg),t.qg(i),t.Xg=void 0,t.qg=void 0}function Y(t){t.Xg(void 0),t.Xg=void 0,t.qg=void 0}var V=i("[[CancelSteps]]"),G=i("[[PullSteps]]");function W(t,i){void 0===i&&(i=!1);var e=new $(t);return e.Vg=i,e}function Z(t){return y((function(i,e){var s={Kg:i,Jg:e};t.Wg.$g.push(s)}))}function H(t,i,e){var s=t.Wg;s.$g.shift().Kg(O(i,e,s.Vg))}function X(t){return t.Wg.$g.length}function q(t){var i=t.Wg;return void 0!==i&&!!tt(i)}var K,J,$=function(){function t(t){if(!1===Gi(t))throw new k("ReadableStreamDefaultReader can only be constructed with a ReadableStream instance");if(!0===Wi(t))throw new k("This stream has already been locked for exclusive reading by another reader");R(this,t),this.$g=new j}return _.defineProperty(t.prototype,"closed",{get:function(){return tt(this)?this.Hg:S(et("closed"))},enumerable:!0,configurable:!0}),t.prototype.cancel=function(t){return tt(this)?void 0===this.Gg?S(B("cancel")):P(this,t):S(et("cancel"))},t.prototype.read=function(){return tt(this)?void 0===this.Gg?S(B("read from")):it(this):S(et("read"))},t.prototype.releaseLock=function(){if(!tt(this))throw et("releaseLock");if(void 0!==this.Gg){if(this.$g.length>0)throw new k("Tried to release a reader lock when that reader has pending read() calls un-settled");z(this)}},t}();function tt(t){return!!r(t)&&!!_.prototype.hasOwnProperty.call(t,"$g")}function it(t){var i=t.Gg;return i.t_=!0,"closed"===i.Ea?M(O(void 0,!0,t.Vg)):"errored"===i.Ea?S(i.Zg):i.i_[G]()}function et(t){return new k("ReadableStreamDefaultReader.prototype."+t+" can only be used on a ReadableStreamDefaultReader")}"symbol"==typeof i.asyncIterator&&((K={})[i.asyncIterator]=function(){return this},J=K,_.defineProperty(J,i.asyncIterator,{enumerable:!1}));var st={next:function(){if(!1===nt(this))return S(rt("next"));var t=this.e_;return void 0===t.Gg?S(B("iterate")):L(it(t),(function(i){var e=i.done;return e&&z(t),O(i.value,e,!0)}))},return:function(t){if(!1===nt(this))return S(rt("next"));var i=this.e_;if(void 0===i.Gg)return S(B("finish iterating"));if(i.$g.length>0)return S(new k("Tried to release a reader lock when that reader has pending read() calls un-settled"));if(!1===this.s_){var e=P(i,t);return z(i),L(e,(function(){return O(t,!0,!0)}))}return z(i),M(O(t,!0,!0))}};function nt(t){return!!r(t)&&!!_.prototype.hasOwnProperty.call(t,"e_")}function rt(t){return new k("ReadableStreamAsyncIterator."+t+" can only be used on a ReadableSteamAsyncIterator")}function ot(t){var i=t.n_.shift();return t.r_-=i.size,t.r_<0&&(t.r_=0),i.value}function ht(t,i,e){if(!a(e=Number(e)))throw new RangeError("Size must be a finite, non-NaN, non-negative number.");t.n_.push({value:i,size:e}),t.r_+=e}function at(t){t.n_=new j,t.r_=0}void 0!==J&&_.setPrototypeOf(st,J),_.defineProperty(st,"next",{enumerable:!1}),_.defineProperty(st,"return",{enumerable:!1});var ut=i("[[AbortSteps]]"),ct=i("[[ErrorSteps]]"),lt=function(){function t(t,i){void 0===t&&(t={}),void 0===i&&(i={}),ft(this);var e=i.size,s=i.highWaterMark;if(void 0!==t.type)throw new RangeError("Invalid type is specified");var n=v(e);void 0===s&&(s=1),function(t,i,e,s){var n=_.create(xt.prototype);function r(){return l(i,"start",[n])}var o=c(i,"write",1,[n]),h=c(i,"close",0,[]),a=c(i,"abort",1,[]);Lt(t,n,r,o,h,a,e,s)}(this,t,s=g(s),n)}return _.defineProperty(t.prototype,"locked",{get:function(){if(!1===gt(this))throw Bt("locked");return _t(this)},enumerable:!0,configurable:!0}),t.prototype.abort=function(t){return!1===gt(this)?S(Bt("abort")):!0===_t(this)?S(new k("Cannot abort a stream that already has a writer")):vt(this,t)},t.prototype.close=function(){return!1===gt(this)?S(Bt("close")):!0===_t(this)?S(new k("Cannot close a stream that already has a writer")):!0===yt(this)?S(new k("Cannot close an already-closing stream")):wt(this)},t.prototype.getWriter=function(){if(!1===gt(this))throw Bt("getWriter");return dt(this)},t}();function dt(t){return new Tt(t)}function ft(t){t.Ea="writable",t.Zg=void 0,t.o_=void 0,t.h_=void 0,t.a_=new j,t.u_=void 0,t.c_=void 0,t.l_=void 0,t.d_=void 0,t.f_=!1}function gt(t){return!!r(t)&&!!_.prototype.hasOwnProperty.call(t,"h_")}function _t(t){return void 0!==t.o_}function vt(t,i){var e=t.Ea;if("closed"===e||"errored"===e)return M(void 0);if(void 0!==t.d_)return t.d_.g_;var s=!1;"erroring"===e&&(s=!0,i=void 0);var n=y((function(e,n){t.d_={g_:void 0,Kg:e,Jg:n,__:i,v_:s}}));return t.d_.g_=n,!1===s&&pt(t,i),n}function wt(t){var i=t.Ea;if("closed"===i||"errored"===i)return S(new k("The stream (in "+i+" state) is not in the writable state and cannot be closed"));var e=y((function(i,e){var s={Kg:i,Jg:e};t.c_=s})),s=t.o_;return void 0!==s&&!0===t.f_&&"writable"===i&&qt(s),function(t){ht(t,"close",0),Ot(t)}(t.h_),e}function mt(t,i){"writable"!==t.Ea?At(t):pt(t,i)}function pt(t,i){var e=t.h_;t.Ea="erroring",t.Zg=i;var s=t.o_;void 0!==s&&Dt(s,i),!1===function(t){return void 0!==t.u_||void 0!==t.l_}(t)&&!0===e.w_&&At(t)}function At(t){t.Ea="errored",t.h_[ct]();var i=t.Zg;if(t.a_.forEach((function(t){t.Jg(i)})),t.a_=new j,void 0!==t.d_){var e=t.d_;if(t.d_=void 0,!0===e.v_)return e.Jg(i),void bt(t);I(t.h_[ut](e.__),(function(){e.Kg(),bt(t)}),(function(i){e.Jg(i),bt(t)}))}else bt(t)}function yt(t){return void 0!==t.c_||void 0!==t.l_}function bt(t){void 0!==t.c_&&(t.c_.Jg(t.Zg),t.c_=void 0);var i=t.o_;void 0!==i&&Vt(i,t.Zg)}function Mt(t,i){var e=t.o_;void 0!==e&&i!==t.f_&&(!0===i?function(t){Wt(t)}(e):qt(e)),t.f_=i}var Tt=function(){function t(t){if(!1===gt(t))throw new k("WritableStreamDefaultWriter can only be constructed with a WritableStream instance");if(!0===_t(t))throw new k("This stream has already been locked for exclusive writing by another writer");this.m_=t,t.o_=this;var i=t.Ea;if("writable"===i)!1===yt(t)&&!0===t.f_?Wt(this):Ht(this),Ft(this);else if("erroring"===i)Zt(this,t.Zg),Ft(this);else if("closed"===i)Ht(this),function(t){Ft(t),Gt(t)}(this);else{var e=t.Zg;Zt(this,e),Yt(this,e)}}return _.defineProperty(t.prototype,"closed",{get:function(){return!1===St(this)?S(Ut("closed")):this.Hg},enumerable:!0,configurable:!0}),_.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===St(this))throw Ut("desiredSize");if(void 0===this.m_)throw Qt("desiredSize");return function(t){var i=t.m_,e=i.Ea;return"errored"===e||"erroring"===e?null:"closed"===e?0:jt(i.h_)}(this)},enumerable:!0,configurable:!0}),_.defineProperty(t.prototype,"ready",{get:function(){return!1===St(this)?S(Ut("ready")):this.p_},enumerable:!0,configurable:!0}),t.prototype.abort=function(t){return!1===St(this)?S(Ut("abort")):void 0===this.m_?S(Qt("abort")):function(t,i){var e=t.m_;return vt(e,i)}(this,t)},t.prototype.close=function(){if(!1===St(this))return S(Ut("close"));var t=this.m_;return void 0===t?S(Qt("close")):!0===yt(t)?S(new k("Cannot close an already-closing stream")):Nt(this)},t.prototype.releaseLock=function(){if(!1===St(this))throw Ut("releaseLock");void 0!==this.m_&&Et(this)},t.prototype.write=function(t){return!1===St(this)?S(Ut("write")):void 0===this.m_?S(Qt("write to")):kt(this,t)},t}();function St(t){return!!r(t)&&!!_.prototype.hasOwnProperty.call(t,"m_")}function Nt(t){return wt(t.m_)}function It(t,i){"pending"===t.A_?Vt(t,i):function(t,i){Yt(t,i)}(t,i)}function Dt(t,i){"pending"===t.y_?Xt(t,i):function(t,i){Zt(t,i)}(t,i)}function Et(t){var i=t.m_,e=new k("Writer was released and can no longer be used to monitor the stream's closedness");Dt(t,e),It(t,e),i.o_=void 0,t.m_=void 0}function kt(t,i){var e=t.m_,s=e.h_,n=function(t,i){try{return t.b_(i)}catch(i){return Rt(t,i),1}}(s,i);if(e!==t.m_)return S(Qt("write to"));var r=e.Ea;if("errored"===r)return S(e.Zg);if(!0===yt(e)||"closed"===r)return S(new k("The stream is closing or closed and cannot be written to"));if("erroring"===r)return S(e.Zg);var o=function(t){return y((function(i,e){var s={Kg:i,Jg:e};t.a_.push(s)}))}(e);return function(t,i,e){var s={chunk:i};try{ht(t,s,e)}catch(i){return void Rt(t,i)}var n=t.M_;!1===yt(n)&&"writable"===n.Ea&&Mt(n,Pt(t)),Ot(t)}(s,i,n),o}var xt=function(){function t(){throw new k("WritableStreamDefaultController cannot be constructed explicitly")}return t.prototype.error=function(t){if(!1===function(t){return!!r(t)&&!!_.prototype.hasOwnProperty.call(t,"M_")}(this))throw new k("WritableStreamDefaultController.prototype.error can only be used on a WritableStreamDefaultController");"writable"===this.M_.Ea&&zt(this,t)},t.prototype[ut]=function(t){var i=this.T_(t);return Ct(this),i},t.prototype[ct]=function(){at(this)},t}();function Lt(t,i,e,s,n,r,o,h){i.M_=t,t.h_=i,i.n_=void 0,i.r_=void 0,at(i),i.w_=!1,i.b_=h,i.S_=o,i.N_=s,i.I_=n,i.T_=r;var a=Pt(i);Mt(t,a),I(M(e()),(function(){i.w_=!0,Ot(i)}),(function(e){i.w_=!0,mt(t,e)}))}function Ct(t){t.N_=void 0,t.I_=void 0,t.T_=void 0,t.b_=void 0}function jt(t){return t.S_-t.r_}function Ot(t){var i=t.M_;if(!1!==t.w_&&void 0===i.u_)if("erroring"!==i.Ea){if(0!==t.n_.length){var e=function(t){return t.n_.peek().value}(t);"close"===e?function(t){var i=t.M_;(function(t){t.l_=t.c_,t.c_=void 0})(i),ot(t);var e=t.I_();Ct(t),I(e,(function(){!function(t){t.l_.Kg(void 0),t.l_=void 0,"erroring"===t.Ea&&(t.Zg=void 0,void 0!==t.d_&&(t.d_.Kg(),t.d_=void 0)),t.Ea="closed";var i=t.o_;void 0!==i&&Gt(i)}(i)}),(function(t){!function(t,i){t.l_.Jg(i),t.l_=void 0,void 0!==t.d_&&(t.d_.Jg(i),t.d_=void 0),mt(t,i)}(i,t)}))}(t):function(t,i){var e=t.M_;!function(t){t.u_=t.a_.shift()}(e);var s=t.N_(i);I(s,(function(){!function(t){t.u_.Kg(void 0),t.u_=void 0}(e);var i=e.Ea;if(ot(t),!1===yt(e)&&"writable"===i){var s=Pt(t);Mt(e,s)}Ot(t)}),(function(i){"writable"===e.Ea&&Ct(t),function(t,i){t.u_.Jg(i),t.u_=void 0,mt(t,i)}(e,i)}))}(t,e.chunk)}}else At(i)}function Rt(t,i){"writable"===t.M_.Ea&&zt(t,i)}function Pt(t){return jt(t)<=0}function zt(t,i){var e=t.M_;Ct(t),pt(e,i)}function Bt(t){return new k("WritableStream.prototype."+t+" can only be used on a WritableStream")}function Ut(t){return new k("WritableStreamDefaultWriter.prototype."+t+" can only be used on a WritableStreamDefaultWriter")}function Qt(t){return new k("Cannot "+t+" a stream using a released writer")}function Ft(t){t.Hg=y((function(i,e){t.Xg=i,t.qg=e,t.A_="pending"}))}function Yt(t,i){Ft(t),Vt(t,i)}function Vt(t,i){C(t.Hg),t.qg(i),t.Xg=void 0,t.qg=void 0,t.A_="rejected"}function Gt(t){t.Xg(void 0),t.Xg=void 0,t.qg=void 0,t.A_="resolved"}function Wt(t){t.p_=y((function(i,e){t.D_=i,t.E_=e})),t.y_="pending"}function Zt(t,i){Wt(t),Xt(t,i)}function Ht(t){Wt(t),qt(t)}function Xt(t,i){C(t.p_),t.E_(i),t.D_=void 0,t.E_=void 0,t.y_="rejected"}function qt(t){t.D_(void 0),t.D_=void 0,t.E_=void 0,t.y_="fulfilled"}function Kt(t){if("object"!=typeof t||null===t)return!1;try{return"boolean"==typeof t.aborted}catch(t){return!1}}var Jt,$t="undefined"!=typeof DOMException?DOMException:void 0,ti=function(t){if("function"!=typeof t&&"object"!=typeof t)return!1;try{return new t,!0}catch(t){return!1}}($t)?$t:((Jt=function(t,i){this.message=t||"",this.name=i||"Error",b.captureStackTrace&&b.captureStackTrace(this,this.constructor)}).prototype=_.create(b.prototype),_.defineProperty(Jt.prototype,"constructor",{value:Jt,writable:!0,configurable:!0}),Jt);function ii(t,i,s,n,r,o){var h=W(t),a=dt(i);t.t_=!0;var u=!1,c=M(void 0);return y((function(l,d){var f,g,_,v;if(void 0!==o){if(f=function(){var e=new ti("Aborted","AbortError"),s=[];!1===n&&s.push((function(){return"writable"===i.Ea?vt(i,e):M(void 0)})),!1===r&&s.push((function(){return"readable"===t.Ea?Zi(t,e):M(void 0)})),A((function(){return Promise.all(s.map((function(t){return t()})))}),!0,e)},!0===o.aborted)return void f();o.addEventListener("abort",f)}if(p(t,h.Hg,(function(t){!1===n?A((function(){return vt(i,t)}),!0,t):b(!0,t)})),p(i,a.Hg,(function(i){!1===r?A((function(){return Zi(t,i)}),!0,i):b(!0,i)})),g=t,_=h.Hg,v=function(){!1===s?A((function(){return function(t){var i=t.m_,e=i.Ea;return!0===yt(i)||"closed"===e?M(void 0):"errored"===e?S(i.Zg):Nt(t)}(a)})):b()},"closed"===g.Ea?v():D(_,v),!0===yt(i)||"closed"===i.Ea){var w=new k("the destination writable stream closed before all data could be piped to it");!1===r?A((function(){return Zi(t,w)}),!0,w):b(!0,w)}function m(){var t=c;return N(c,(function(){return t!==c?m():void 0}))}function p(t,i,e){"errored"===t.Ea?e(t.Zg):E(i,e)}function A(t,e,s){function n(){I(t(),(function(){return T(e,s)}),(function(t){return T(!0,t)}))}!0!==u&&(u=!0,"writable"===i.Ea&&!1===yt(i)?D(m(),n):n())}function b(t,e){!0!==u&&(u=!0,"writable"===i.Ea&&!1===yt(i)?D(m(),(function(){return T(t,e)})):T(t,e))}function T(t,i){Et(a),z(h),void 0!==o&&o.removeEventListener("abort",f),t?d(i):l(void 0)}C(y((function(t,i){!function s(n){n?t():N(!0===u?M(!0):N(a.p_,(function(){return N(it(h),(function(t){return!0===t.done||(c=N(kt(a,t.value),void 0,e),!1)}))})),s,i)}(!1)})))}))}var ei=function(){function t(){throw new k}return _.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===si(this))throw fi("desiredSize");return ci(this)},enumerable:!0,configurable:!0}),t.prototype.close=function(){if(!1===si(this))throw fi("close");if(!1===li(this))throw new k("The stream is not in a state that permits close");hi(this)},t.prototype.enqueue=function(t){if(!1===si(this))throw fi("enqueue");if(!1===li(this))throw new k("The stream is not in a state that permits enqueue");return ai(this,t)},t.prototype.error=function(t){if(!1===si(this))throw fi("error");ui(this,t)},t.prototype[V]=function(t){at(this);var i=this.k_(t);return oi(this),i},t.prototype[G]=function(){var t=this.x_;if(this.n_.length>0){var i=ot(this);return!0===this.L_&&0===this.n_.length?(oi(this),Hi(t)):ni(this),M(O(i,!1,t.Wg.Vg))}var e=Z(t);return ni(this),e},t}();function si(t){return!!r(t)&&!!_.prototype.hasOwnProperty.call(t,"x_")}function ni(t){!1!==ri(t)&&(!0!==t.C_?(t.C_=!0,I(t.j_(),(function(){t.C_=!1,!0===t.O_&&(t.O_=!1,ni(t))}),(function(i){ui(t,i)}))):t.O_=!0)}function ri(t){var i=t.x_;return!1!==li(t)&&!1!==t.w_&&(!0===Wi(i)&&X(i)>0||ci(t)>0)}function oi(t){t.j_=void 0,t.k_=void 0,t.b_=void 0}function hi(t){var i=t.x_;t.L_=!0,0===t.n_.length&&(oi(t),Hi(i))}function ai(t,i){var e=t.x_;if(!0===Wi(e)&&X(e)>0)H(e,i,!1);else{var s=void 0;try{s=t.b_(i)}catch(i){throw ui(t,i),i}try{ht(t,i,s)}catch(i){throw ui(t,i),i}}ni(t)}function ui(t,i){var e=t.x_;"readable"===e.Ea&&(at(t),oi(t),Xi(e,i))}function ci(t){var i=t.x_.Ea;return"errored"===i?null:"closed"===i?0:t.S_-t.r_}function li(t){var i=t.x_.Ea;return!1===t.L_&&"readable"===i}function di(t,i,e,s,n,r,o){i.x_=t,i.n_=void 0,i.r_=void 0,at(i),i.w_=!1,i.L_=!1,i.O_=!1,i.C_=!1,i.b_=o,i.S_=r,i.j_=s,i.k_=n,t.i_=i,I(M(e()),(function(){i.w_=!0,ni(i)}),(function(t){ui(i,t)}))}function fi(t){return new k("ReadableStreamDefaultController.prototype."+t+" can only be used on a ReadableStreamDefaultController")}var gi=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&x.floor(t)===t},_i=function(){function t(){throw new k("ReadableStreamBYOBRequest cannot be used directly")}return _.defineProperty(t.prototype,"view",{get:function(){if(!1===mi(this))throw ji("view");return this.R_},enumerable:!0,configurable:!0}),t.prototype.respond=function(t){if(!1===mi(this))throw ji("respond");if(void 0===this.P_)throw new k("This BYOB request has been invalidated");this.R_.buffer,function(t,i){if(!1===a(i=Number(i)))throw new RangeError("bytesWritten must be a finite");Di(t,i)}(this.P_,t)},t.prototype.respondWithNewView=function(t){if(!1===mi(this))throw ji("respond");if(void 0===this.P_)throw new k("This BYOB request has been invalidated");if(!ArrayBuffer.isView(t))throw new k("You can only respond with array buffer views");t.buffer,function(t,i){var e=t.z_.peek();if(e.byteOffset+e.bytesFilled!==i.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(e.byteLength!==i.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");e.buffer=i.buffer,Di(t,i.byteLength)}(this.P_,t)},t}(),vi=function(){function t(){throw new k("ReadableByteStreamController constructor cannot be used directly")}return _.defineProperty(t.prototype,"byobRequest",{get:function(){if(!1===wi(this))throw Oi("byobRequest");if(void 0===this.B_&&this.z_.length>0){var t=this.z_.peek(),i=new T(t.buffer,t.byteOffset+t.bytesFilled,t.byteLength-t.bytesFilled),e=_.create(_i.prototype);!function(t,i,e){t.P_=i,t.R_=e}(e,this,i),this.B_=e}return this.B_},enumerable:!0,configurable:!0}),_.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===wi(this))throw Oi("desiredSize");return Li(this)},enumerable:!0,configurable:!0}),t.prototype.close=function(){if(!1===wi(this))throw Oi("close");if(!0===this.L_)throw new k("The stream has already been closed; do not close it again!");var t=this.U_.Ea;if("readable"!==t)throw new k("The stream (in "+t+" state) is not in the readable state and cannot be closed");!function(t){var i=t.U_;if(t.r_>0)t.L_=!0;else{if(t.z_.length>0&&t.z_.peek().bytesFilled>0){var e=new k("Insufficient bytes to fill elements in the given buffer");throw xi(t,e),e}ki(t),Hi(i)}}(this)},t.prototype.enqueue=function(t){if(!1===wi(this))throw Oi("enqueue");if(!0===this.L_)throw new k("stream is closed or draining");var i=this.U_.Ea;if("readable"!==i)throw new k("The stream (in "+i+" state) is not in the readable state and cannot be enqueued to");if(!ArrayBuffer.isView(t))throw new k("You can only enqueue array buffer views when using a ReadableByteStreamController");t.buffer,function(t,i){var e=t.U_,s=i.buffer,n=i.byteOffset,r=i.byteLength,o=s;!0===q(e)?0===X(e)?bi(t,o,n,r):H(e,new T(o,n,r),!1):!0===zi(e)?(bi(t,o,n,r),Ii(t)):bi(t,o,n,r),pi(t)}(this,t)},t.prototype.error=function(t){if(!1===wi(this))throw Oi("error");xi(this,t)},t.prototype[V]=function(t){this.z_.length>0&&(this.z_.peek().bytesFilled=0),at(this);var i=this.k_(t);return ki(this),i},t.prototype[G]=function(){var t=this.U_;if(this.r_>0){var i=this.n_.shift();this.r_-=i.byteLength,Si(this);var e=void 0;try{e=new T(i.buffer,i.byteOffset,i.byteLength)}catch(t){return S(t)}return M(O(e,!1,t.Wg.Vg))}var s=this.Q_;if(void 0!==s){var n=void 0;try{n=new ArrayBuffer(s)}catch(t){return S(t)}var r={buffer:n,byteOffset:0,byteLength:s,bytesFilled:0,elementSize:1,ctor:T,readerType:"default"};this.z_.push(r)}var o=Z(t);return pi(this),o},t}();function wi(t){return!!r(t)&&!!_.prototype.hasOwnProperty.call(t,"U_")}function mi(t){return!!r(t)&&!!_.prototype.hasOwnProperty.call(t,"P_")}function pi(t){var i=function(t){var i=t.U_;if("readable"!==i.Ea)return!1;if(!0===t.L_)return!1;if(!1===t.w_)return!1;if(!0===q(i)&&X(i)>0)return!0;if(!0===zi(i)&&Pi(i)>0)return!0;var e=Li(t);return e>0}(t);!1!==i&&(!0!==t.C_?(t.C_=!0,I(t.j_(),(function(){t.C_=!1,!0===t.O_&&(t.O_=!1,pi(t))}),(function(i){xi(t,i)}))):t.O_=!0)}function Ai(t,i){var e=!1;"closed"===t.Ea&&(e=!0);var s=yi(i);"default"===i.readerType?H(t,s,e):function(t,i,e){var s=t.Wg,n=s.F_.shift();n.Kg(O(i,e,s.Vg))}(t,s,e)}function yi(t){var i=t.bytesFilled,e=t.elementSize;return new t.ctor(t.buffer,t.byteOffset,i/e)}function bi(t,i,e,s){t.n_.push({buffer:i,byteOffset:e,byteLength:s}),t.r_+=s}function Mi(t,i){var e=i.elementSize,s=i.bytesFilled-i.bytesFilled%e,n=x.min(t.r_,i.byteLength-i.bytesFilled),r=i.bytesFilled+n,o=r-r%e,a=n,u=!1;o>s&&(a=o-i.bytesFilled,u=!0);for(var c=t.n_;a>0;){var l=c.peek(),d=x.min(a,l.byteLength),f=i.byteOffset+i.bytesFilled;h(i.buffer,f,l.buffer,l.byteOffset,d),l.byteLength===d?c.shift():(l.byteOffset+=d,l.byteLength-=d),t.r_-=d,Ti(t,d,i),a-=d}return u}function Ti(t,i,e){Ni(t),e.bytesFilled+=i}function Si(t){0===t.r_&&!0===t.L_?(ki(t),Hi(t.U_)):pi(t)}function Ni(t){void 0!==t.B_&&(t.B_.P_=void 0,t.B_.R_=void 0,t.B_=void 0)}function Ii(t){for(;t.z_.length>0;){if(0===t.r_)return;var i=t.z_.peek();!0===Mi(t,i)&&(Ei(t),Ai(t.U_,i))}}function Di(t,i){var e=t.z_.peek();if("closed"===t.U_.Ea){if(0!==i)throw new k("bytesWritten must be 0 when calling respond() on a closed stream");!function(t,i){i.buffer=i.buffer;var e=t.U_;if(!0===zi(e))for(;Pi(e)>0;)Ai(e,Ei(t))}(t,e)}else!function(t,i,e){if(e.bytesFilled+i>e.byteLength)throw new RangeError("bytesWritten out of range");if(Ti(t,i,e),!(e.bytesFilled<e.elementSize)){Ei(t);var s=e.bytesFilled%e.elementSize;if(s>0){var n=e.byteOffset+e.bytesFilled,r=e.buffer.slice(n-s,n);bi(t,r,0,r.byteLength)}e.buffer=e.buffer,e.bytesFilled-=s,Ai(t.U_,e),Ii(t)}}(t,i,e);pi(t)}function Ei(t){var i=t.z_.shift();return Ni(t),i}function ki(t){t.j_=void 0,t.k_=void 0}function xi(t,i){var e=t.U_;"readable"===e.Ea&&(function(t){Ni(t),t.z_=new j}(t),at(t),ki(t),Xi(e,i))}function Li(t){var i=t.U_.Ea;return"errored"===i?null:"closed"===i?0:t.S_-t.r_}function Ci(t,i,e){var s=_.create(vi.prototype),n=c(i,"pull",0,[s]),r=c(i,"cancel",1,[]),o=i.autoAllocateChunkSize;if(void 0!==o&&(o=Number(o),!1===gi(o)||o<=0))throw new RangeError("autoAllocateChunkSize must be a positive integer");!function(t,i,e,s,n,r,o){i.U_=t,i.O_=!1,i.C_=!1,i.B_=void 0,i.n_=i.r_=void 0,at(i),i.L_=!1,i.w_=!1,i.S_=g(r),i.j_=s,i.k_=n,i.Q_=o,i.z_=new j,t.i_=i,I(M(e()),(function(){i.w_=!0,pi(i)}),(function(t){xi(i,t)}))}(t,s,(function(){return l(i,"start",[s])}),n,r,e,o)}function ji(t){return new k("ReadableStreamBYOBRequest.prototype."+t+" can only be used on a ReadableStreamBYOBRequest")}function Oi(t){return new k("ReadableByteStreamController.prototype."+t+" can only be used on a ReadableByteStreamController")}function Ri(t){return y((function(i,e){var s={Kg:i,Jg:e};t.Wg.F_.push(s)}))}function Pi(t){return t.Wg.F_.length}function zi(t){var i=t.Wg;return void 0!==i&&!!Ui(i)}var Bi=function(){function t(t){if(!Gi(t))throw new k("ReadableStreamBYOBReader can only be constructed with a ReadableStream instance given a byte source");if(!1===wi(t.i_))throw new k("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");if(Wi(t))throw new k("This stream has already been locked for exclusive reading by another reader");R(this,t),this.F_=new j}return _.defineProperty(t.prototype,"closed",{get:function(){return Ui(this)?this.Hg:S(Qi("closed"))},enumerable:!0,configurable:!0}),t.prototype.cancel=function(t){return Ui(this)?void 0===this.Gg?S(B("cancel")):P(this,t):S(Qi("cancel"))},t.prototype.read=function(t){return Ui(this)?void 0===this.Gg?S(B("read from")):ArrayBuffer.isView(t)?(t.buffer,0===t.byteLength?S(new k("view must have non-zero byteLength")):function(t,i){var e=t.Gg;return e.t_=!0,"errored"===e.Ea?S(e.Zg):function(t,i){var e=t.U_,s=1;i.constructor!==DataView&&(s=i.constructor.BYTES_PER_ELEMENT);var n=i.constructor,r={buffer:i.buffer,byteOffset:i.byteOffset,byteLength:i.byteLength,bytesFilled:0,elementSize:s,ctor:n,readerType:"byob"};if(t.z_.length>0)return t.z_.push(r),Ri(e);if("closed"===e.Ea)return M(O(new n(r.buffer,r.byteOffset,0),!0,e.Wg.Vg));if(t.r_>0){if(!0===Mi(t,r)){var o=yi(r);return Si(t),M(O(o,!1,e.Wg.Vg))}if(!0===t.L_){var h=new k("Insufficient bytes to fill elements in the given buffer");return xi(t,h),S(h)}}t.z_.push(r);var a=Ri(e);return pi(t),a}(e.i_,i)}(this,t)):S(new k("view must be an array buffer view")):S(Qi("read"))},t.prototype.releaseLock=function(){if(!Ui(this))throw Qi("releaseLock");if(void 0!==this.Gg){if(this.F_.length>0)throw new k("Tried to release a reader lock when that reader has pending read() calls un-settled");z(this)}},t}();function Ui(t){return!!r(t)&&!!_.prototype.hasOwnProperty.call(t,"F_")}function Qi(t){return new k("ReadableStreamBYOBReader.prototype."+t+" can only be used on a ReadableStreamBYOBReader")}var Fi=function(){function t(t,i){void 0===t&&(t={}),void 0===i&&(i={}),Vi(this);var e=i.size,s=i.highWaterMark,n=t.type;if("bytes"===String(n)){if(void 0!==e)throw new RangeError("The strategy for a byte stream cannot have a size function");void 0===s&&(s=0),Ci(this,t,s=g(s))}else{if(void 0!==n)throw new RangeError("Invalid type is specified");var r=v(e);void 0===s&&(s=1),function(t,i,e,s){var n=_.create(ei.prototype),r=c(i,"pull",0,[n]),o=c(i,"cancel",1,[]);di(t,n,(function(){return l(i,"start",[n])}),r,o,e,s)}(this,t,s=g(s),r)}}return _.defineProperty(t.prototype,"locked",{get:function(){if(!1===Gi(this))throw qi("locked");return Wi(this)},enumerable:!0,configurable:!0}),t.prototype.cancel=function(t){return!1===Gi(this)?S(qi("cancel")):!0===Wi(this)?S(new k("Cannot cancel a stream that already has a reader")):Zi(this,t)},t.prototype.getReader=function(t){var i=(void 0===t?{}:t).mode;if(!1===Gi(this))throw qi("getReader");if(void 0===i)return W(this,!0);if("byob"===(i=String(i)))return function(t,i){void 0===i&&(i=!1);var e=new Bi(t);return e.Vg=i,e}(this,!0);throw new RangeError("Invalid mode is specified")},t.prototype.pipeThrough=function(t,i){var e=t.writable,s=t.readable,n=void 0===i?{}:i,r=n.preventClose,o=n.preventAbort,h=n.preventCancel,a=n.signal;if(!1===Gi(this))throw qi("pipeThrough");if(!1===gt(e))throw new k("writable argument to pipeThrough must be a WritableStream");if(!1===Gi(s))throw new k("readable argument to pipeThrough must be a ReadableStream");if(r=Boolean(r),o=Boolean(o),h=Boolean(h),void 0!==a&&!Kt(a))throw new k("ReadableStream.prototype.pipeThrough's signal option must be an AbortSignal");if(!0===Wi(this))throw new k("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(!0===_t(e))throw new k("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");return C(ii(this,e,r,o,h,a)),s},t.prototype.pipeTo=function(t,i){var e=void 0===i?{}:i,s=e.preventClose,n=e.preventAbort,r=e.preventCancel,o=e.signal;return!1===Gi(this)?S(qi("pipeTo")):!1===gt(t)?S(new k("ReadableStream.prototype.pipeTo's first argument must be a WritableStream")):(s=Boolean(s),n=Boolean(n),r=Boolean(r),void 0===o||Kt(o)?!0===Wi(this)?S(new k("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):!0===_t(t)?S(new k("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):ii(this,t,s,n,r,o):S(new k("ReadableStream.prototype.pipeTo's signal option must be an AbortSignal")))},t.prototype.tee=function(){if(!1===Gi(this))throw qi("tee");var t=function(t,i){var e,s,n,r,h,a=W(t),u=!1,c=!1,l=!1,d=y((function(t){h=t}));function f(){return!0===u||(u=!0,C(L(it(a),(function(t){if(u=!1,!0===t.done)return!1===c&&hi(n.i_),void(!1===l&&hi(r.i_));var i=t.value,e=i,s=i;!1===c&&ai(n.i_,e),!1===l&&ai(r.i_,s)})))),M(void 0)}function g(){}return n=Yi(g,f,(function(i){if(c=!0,e=i,!0===l){var n=o([e,s]),r=Zi(t,n);h(r)}return d})),r=Yi(g,f,(function(i){if(l=!0,s=i,!0===c){var n=o([e,s]),r=Zi(t,n);h(r)}return d})),E(a.Hg,(function(t){ui(n.i_,t),ui(r.i_,t)})),[n,r]}(this);return o(t)},t.prototype.getIterator=function(t){var i=(void 0===t?{}:t).preventCancel,e=void 0!==i&&i;if(!1===Gi(this))throw qi("getIterator");return function(t,i){void 0===i&&(i=!1);var e=W(t),s=_.create(st);return s.e_=e,s.s_=Boolean(i),s}(this,e)},t}();function Yi(t,i,e,s,n){void 0===s&&(s=1),void 0===n&&(n=function(){return 1});var r=_.create(Fi.prototype);return Vi(r),di(r,_.create(ei.prototype),t,i,e,s,n),r}function Vi(t){t.Ea="readable",t.Wg=void 0,t.Zg=void 0,t.t_=!1}function Gi(t){return!!r(t)&&!!_.prototype.hasOwnProperty.call(t,"i_")}function Wi(t){return void 0!==t.Wg}function Zi(t,i){return t.t_=!0,"closed"===t.Ea?M(void 0):"errored"===t.Ea?S(t.Zg):(Hi(t),L(t.i_[V](i),e))}function Hi(t){t.Ea="closed";var i=t.Wg;void 0!==i&&(tt(i)&&(i.$g.forEach((function(t){t.Kg(O(void 0,!0,i.Vg))})),i.$g=new j),Y(i))}function Xi(t,i){t.Ea="errored",t.Zg=i;var e=t.Wg;void 0!==e&&(tt(e)?(e.$g.forEach((function(t){t.Jg(i)})),e.$g=new j):(e.F_.forEach((function(t){t.Jg(i)})),e.F_=new j),F(e,i))}function qi(t){return new k("ReadableStream.prototype."+t+" can only be used on a ReadableStream")}"symbol"==typeof i.asyncIterator&&_.defineProperty(Fi.prototype,i.asyncIterator,{value:Fi.prototype.getIterator,enumerable:!1,writable:!0,configurable:!0});var Ki=function(){function t(t){var i=t.highWaterMark;this.highWaterMark=i}return t.prototype.size=function(t){return t.byteLength},t}(),Ji=function(){function t(t){var i=t.highWaterMark;this.highWaterMark=i}return t.prototype.size=function(){return 1},t}(),$i=function(){function t(t,i,e){void 0===t&&(t={}),void 0===i&&(i={}),void 0===e&&(e={});var s=i.size,n=i.highWaterMark,r=e.size,o=e.highWaterMark;if(void 0!==t.writableType)throw new RangeError("Invalid writable type specified");var h=v(s);if(void 0===n&&(n=1),n=g(n),void 0!==t.readableType)throw new RangeError("Invalid readable type specified");var a,u=v(r);void 0===o&&(o=0),o=g(o),function(t,i,e,s,n,r){function o(){return i}function h(i){return function(t,i){var e=t.Y_;return!0===t.f_?L(t.V_,(function(){var s=t.G_;if("erroring"===s.Ea)throw s.Zg;return ae(e,i)})):ae(e,i)}(t,i)}function a(i){return function(t,i){return ie(t,i),M(void 0)}(t,i)}function u(){return function(t){var i=t.W_,e=t.Y_,s=e.Z_();return oe(e),L(s,(function(){if("errored"===i.Ea)throw i.Zg;var t=i.i_;!0===li(t)&&hi(t)}),(function(e){throw ie(t,e),i.Zg}))}(t)}function c(){return function(t){return se(t,!1),t.V_}(t)}function l(i){return ee(t,i),M(void 0)}t.G_=function(t,i,e,s,n,r){void 0===n&&(n=1),void 0===r&&(r=function(){return 1});var o=_.create(lt.prototype);return ft(o),Lt(o,_.create(xt.prototype),t,i,e,s,n,r),o}(o,h,u,a,e,s),t.W_=Yi(o,c,l,n,r),t.f_=void 0,t.V_=void 0,t.H_=void 0,se(t,!0),t.Y_=void 0}(this,y((function(t){a=t})),n,h,o,u),function(t,i){var e=_.create(ne.prototype),s=function(t){try{return he(e,t),M(void 0)}catch(t){return S(t)}},n=i.transform;if(void 0!==n){if("function"!=typeof n)throw new k("transform is not a method");s=function(t){return d(n,i,[t,e])}}var r=c(i,"flush",0,[e]);!function(t,i,e,s){i.X_=t,t.Y_=i,i.q_=e,i.Z_=s}(t,e,s,r)}(this,t);var f=l(t,"start",[this.Y_]);a(f)}return _.defineProperty(t.prototype,"readable",{get:function(){if(!1===te(this))throw ce("readable");return this.W_},enumerable:!0,configurable:!0}),_.defineProperty(t.prototype,"writable",{get:function(){if(!1===te(this))throw ce("writable");return this.G_},enumerable:!0,configurable:!0}),t}();function te(t){return!!r(t)&&!!_.prototype.hasOwnProperty.call(t,"Y_")}function ie(t,i){ui(t.W_.i_,i),ee(t,i)}function ee(t,i){oe(t.Y_),Rt(t.G_.h_,i),!0===t.f_&&se(t,!1)}function se(t,i){void 0!==t.V_&&t.H_(),t.V_=y((function(i){t.H_=i})),t.f_=i}var ne=function(){function t(){throw new k("TransformStreamDefaultController instances cannot be created directly")}return _.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===re(this))throw ue("desiredSize");return ci(this.X_.W_.i_)},enumerable:!0,configurable:!0}),t.prototype.enqueue=function(t){if(!1===re(this))throw ue("enqueue");he(this,t)},t.prototype.error=function(t){if(!1===re(this))throw ue("error");!function(t,i){ie(t.X_,i)}(this,t)},t.prototype.terminate=function(){if(!1===re(this))throw ue("terminate");!function(t){var i=t.X_,e=i.W_.i_;!0===li(e)&&hi(e);var s=new k("TransformStream terminated");ee(i,s)}(this)},t}();function re(t){return!!r(t)&&!!_.prototype.hasOwnProperty.call(t,"X_")}function oe(t){t.q_=void 0,t.Z_=void 0}function he(t,i){var e=t.X_,s=e.W_.i_;if(!1===li(s))throw new k("Readable side is not in a state that permits enqueue");try{ai(s,i)}catch(t){throw ee(e,t),e.W_.Zg}var n=function(t){return!0!==ri(t)}(s);n!==e.f_&&se(e,!0)}function ae(t,i){return L(t.q_(i),void 0,(function(i){throw ie(t.X_,i),i}))}function ue(t){return new k("TransformStreamDefaultController.prototype."+t+" can only be used on a TransformStreamDefaultController")}function ce(t){return new k("TransformStream.prototype."+t+" can only be used on a TransformStream")}t.ByteLengthQueuingStrategy=Ki,t.CountQueuingStrategy=Ji,t.ReadableStream=Fi,t.TransformStream=$i,t.WritableStream=lt,_.defineProperty(t,"__esModule",{value:!0})},"object"==typeof t&&void 0!==i?s(t):"function"==typeof define&&define.amd?define(["exports"],s):s((e=e||self).WebStreamsPolyfill={})})),_d=Ui((t=>{"use strict";function i(){const t=gd();return i=function(){return t},t}r(),_.defineProperty(t,"__esModule",{value:!0}),function(t,i){for(var e in i)_.defineProperty(t,e,{enumerable:!0,get:i[e]})}(t,{ByteLengthQueuingStrategy:function(){return i().ByteLengthQueuingStrategy},CountQueuingStrategy:function(){return i().CountQueuingStrategy},ReadableStream:function(){return i().ReadableStream},TransformStream:function(){return i().TransformStream},WritableStream:function(){return i().WritableStream}})})),vd=Ui(((t,i)=>{var e,n;r(),e=t,n=function(t){"use strict";var i,e=_.defineProperty,n=_.defineProperties,r=_.getOwnPropertyDescriptors,o=_.getOwnPropertySymbols,a=_.prototype.hasOwnProperty,c=_.prototype.propertyIsEnumerable,l=(t,i,s)=>i in t?e(t,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[i]=s,d=(t,i)=>{for(var e in i||(i={}))a.call(i,e)&&l(t,e,i[e]);if(o)for(var e of o(i))c.call(i,e)&&l(t,e,i[e]);return t},g=(t,i)=>n(t,r(i)),w=(t,i)=>{var e={};for(var s in t)a.call(t,s)&&i.indexOf(s)<0&&(e[s]=t[s]);if(null!=t&&o)for(var s of o(t))i.indexOf(s)<0&&c.call(t,s)&&(e[s]=t[s]);return e},p=typeof globalThis<"u"?globalThis:typeof s<"u"?s:typeof global<"u"?global:typeof self<"u"?self:{};function A(t){return t&&t.__esModule&&_.prototype.hasOwnProperty.call(t,"default")?t.default:t}var y,M={exports:{}};y=M,function(t){var i,e={VERSION:"1.6.1"},s={},n=function(t,i){return function(){return i.apply(t,arguments)}},r=function(){var t,i,e=arguments,s=e[0];for(i=1;i<e.length;i++)for(t in e[i])!(t in s)&&e[i].hasOwnProperty(t)&&(s[t]=e[i][t]);return s},o=function(t,i){return{value:t,name:i}};e.TRACE=o(1,"TRACE"),e.DEBUG=o(2,"DEBUG"),e.INFO=o(3,"INFO"),e.TIME=o(4,"TIME"),e.WARN=o(5,"WARN"),e.ERROR=o(8,"ERROR"),e.OFF=o(99,"OFF");var h=function(t){this.context=t,this.setLevel(t.filterLevel),this.log=this.info};h.prototype={setLevel:function(t){t&&"value"in t&&(this.context.filterLevel=t)},getLevel:function(){return this.context.filterLevel},enabledFor:function(t){var i=this.context.filterLevel;return t.value>=i.value},trace:function(){this.invoke(e.TRACE,arguments)},debug:function(){this.invoke(e.DEBUG,arguments)},info:function(){this.invoke(e.INFO,arguments)},warn:function(){this.invoke(e.WARN,arguments)},error:function(){this.invoke(e.ERROR,arguments)},time:function(t){"string"==typeof t&&t.length>0&&this.invoke(e.TIME,[t,"start"])},timeEnd:function(t){"string"==typeof t&&t.length>0&&this.invoke(e.TIME,[t,"end"])},invoke:function(t,e){i&&this.enabledFor(t)&&i(e,r({level:t},this.context))}};var a,u=new h({filterLevel:e.OFF});(a=e).enabledFor=n(u,u.enabledFor),a.trace=n(u,u.trace),a.debug=n(u,u.debug),a.time=n(u,u.time),a.timeEnd=n(u,u.timeEnd),a.info=n(u,u.info),a.warn=n(u,u.warn),a.error=n(u,u.error),a.log=a.info,e.setHandler=function(t){i=t},e.setLevel=function(t){for(var i in u.setLevel(t),s)s.hasOwnProperty(i)&&s[i].setLevel(t)},e.getLevel=function(){return u.getLevel()},e.get=function(t){return s[t]||(s[t]=new h(r({name:t},u.context)))},e.createDefaultHandler=function(t){(t=t||{}).formatter=t.formatter||function(t,i){i.name&&t.unshift("["+i.name+"]")};var i={},s=function(t,i){Function.prototype.apply.call(t,console,i)};return typeof console>"u"?function(){}:function(n,r){n=Array.prototype.slice.call(n);var o,h=console.log;r.level===e.TIME?(o=(r.name?"["+r.name+"] ":"")+n[0],"start"===n[1]?console.time?console.time(o):i[o]=(new Date).getTime():console.timeEnd?console.timeEnd(o):s(h,[o+": "+((new Date).getTime()-i[o])+"ms"])):(r.level===e.WARN&&console.warn?h=console.warn:r.level===e.ERROR&&console.error?h=console.error:r.level===e.INFO&&console.info?h=console.info:r.level===e.DEBUG&&console.debug?h=console.debug:r.level===e.TRACE&&console.trace&&(h=console.trace),t.formatter(n,r),s(h,n))}},e.useDefaults=function(t){e.setLevel(t&&t.defaultLevel||e.DEBUG),e.setHandler(e.createDefaultHandler(t))},e.setDefaults=e.useDefaults,y.exports?y.exports=e:(e.K_=t.Logger,e.noConflict=function(){return t.Logger=e.K_,e},t.Logger=e)}(p);const N=A(M.exports),I="0.3.2",D=(null==(i=null==s?void 0:s.navigator)?void 0:i.userAgent)||"No user agent available";let E="",L="",O="",R="",P="",z="",B="",U=0;const Q=[],F=t=>{E=""===E?t:E},Y=t=>{L=""===L?t:L},V=t=>{O=""===O?t:O},G=t=>{R=""===R?t:R},W=t=>{P=""===P?t:P},Z=t=>{U=0===U?t:U},H=t=>{z=t},X=t=>{B=""===B?t:B},q=t=>{60===Q.length&&Q.shift(),Q.push(t)},K=(t,i)=>{let e;void 0===t&&(t=60),void 0===i&&(i="JSON"),e=!Number.isInteger(t)||t>60||t<=0?60:t;const s={client:"@millicast/millicast-sdk",version:I,timestamp:(new Date).toISOString(),userAgent:D,clusterId:B,accountId:E,streamName:L,subscriberId:O,connection:z,stats:Q.slice(-e),connectionDurationMs:(new Date).getTime()-U};return""!==P?s.feedId=P:""!==R&&(s.streamViewId=R),"CMCD"===i?function(t){function i(t,i){return{ts:x.round(i.timestamp)||"",ot:"audio"===t?"a":"v",bl:i.jitterBufferDelay||0,br:x.round(i.bitrateBitsPerSecond||0),pld:i.packetsLostDeltaPerSecond||0,j:i.jitter||0,mtp:i.packetRate||0,mid:i.mid||"",mimeType:i.mimeType||""}}return t.stats=t.stats.reduce(((t,e)=>{const s=0!==e.audio.inbounds.length?e.audio.inbounds.map((t=>i("audio",t))):e.audio.outbounds.map((t=>i("audio",t))),n=0!==e.video.inbounds.length?e.video.inbounds.map((t=>i("video",t))):e.video.outbounds.map((t=>i("video",t)));return t.concat([...s,...n])}),[]),t}(s):s};N.useDefaults({defaultLevel:N.TRACE});const J=["TRACE","DEBUG","INFO","WARN","ERROR"],tt=(t,i)=>{t.unshift("[".concat(i.name||"Global","] ").concat((new Date).toISOString()," - ").concat(i.level.name," -"))},it=(t,i)=>i?t.value>=ot[i].value:t.value>=rt.value,et=N.createDefaultHandler({formatter:tt});N.setHandler(((t,i)=>{((t,i)=>{t=(t=Array.prototype.slice.call(t)).map((t=>"object"==typeof t?JSON.stringify(t):t)),tt(t,i),0!==st?(nt.push(t.join(" ")),nt.length>=st&&(nt=nt.slice(-st))):nt=[]})(t,i),it(i.level,i.name)&&et(t,i);for(const{handler:e,level:s}of ht)i.level.value>=s.value&&e(t,i)}));let st=1e4,nt=[],rt=N.OFF;const ot={},ht=[],at=g(d({},N),{enabledFor:it,getHistory:()=>nt,getHistoryMaxSize:()=>st,setHistoryMaxSize:t=>{st=t},setLevel:t=>{rt=t;for(const i in ot)ot[i]=t},getLevel:()=>rt,get:t=>{ot[t]||(ot[t]=rt);const i=N.get(t);return i.setLevel=i=>{ot[t]=i},i.getLevel=()=>ot[t],i},setHandler:(t,i)=>{ht.push({handler:t,level:i})},diagnose:t=>{let i;void 0===t&&(t={});const e={statsCount:60,historySize:1e3,minLogLevel:"TRACE",statsFormat:"JSON"};"number"==typeof t?(e.statsCount=t,i=e):i=d(d({},e),t);const{statsCount:s,historySize:n,minLogLevel:r,statsFormat:o}=i,h=K(s,o),a=at.getHistory();if(!Number.isInteger(n)||n<=0)throw new b("Invalid Argument Exception : historySize must be a positive integer.");if(!J.includes(r.toUpperCase()))throw new b('Invalid Argument Exception : the minLogLevel parameter only excepts "trace", "debug", "info", "warn", and "error" as arguments.');if(J.includes(r.toUpperCase())){const t=J.slice(J.indexOf(r.toUpperCase())),i=a.filter((i=>t.some((t=>i.includes(t)))));h.history=i.slice(-n)}return h},JSON:"JSON",CMCD:"CMCD",VERSION:I});var ut,ct={exports:{}},lt="object"==typeof Reflect?Reflect:null,dt=lt&&"function"==typeof lt.apply?lt.apply:function(t,i,e){return Function.prototype.apply.call(t,i,e)};ut=lt&&"function"==typeof lt.ownKeys?lt.ownKeys:_.getOwnPropertySymbols?function(t){return _.getOwnPropertyNames(t).concat(_.getOwnPropertySymbols(t))}:function(t){return _.getOwnPropertyNames(t)};var ft=Number.isNaN||function(t){return t!=t};function gt(){gt.init.call(this)}ct.exports=gt,ct.exports.once=function(t,i){return new Promise((function(e,s){function n(e){t.removeListener(i,r),s(e)}function r(){"function"==typeof t.removeListener&&t.removeListener("error",n),e([].slice.call(arguments))}Tt(t,i,r,{once:!0}),"error"!==i&&function(t,i,e){"function"==typeof t.on&&Tt(t,"error",i,e)}(t,n,{once:!0})}))},gt.EventEmitter=gt,gt.prototype.J_=void 0,gt.prototype.rv=0,gt.prototype.ov=void 0;var _t=10;function vt(t){if("function"!=typeof t)throw new k('The "listener" argument must be of type Function. Received type '+typeof t)}function wt(t){return void 0===t.ov?gt.defaultMaxListeners:t.ov}function mt(t,i,e,s){var n,r,o;if(vt(e),void 0===(r=t.J_)?(r=t.J_=_.create(null),t.rv=0):(void 0!==r.newListener&&(t.emit("newListener",i,e.listener?e.listener:e),r=t.J_),o=r[i]),void 0===o)o=r[i]=e,++t.rv;else if("function"==typeof o?o=r[i]=s?[e,o]:[o,e]:s?o.unshift(e):o.push(e),(n=wt(t))>0&&o.length>n&&!o.warned){o.warned=!0;var h=new b("Possible EventEmitter memory leak detected. "+o.length+" "+String(i)+" listeners added. Use emitter.setMaxListeners() to increase limit");h.name="MaxListenersExceededWarning",h.emitter=t,h.type=i,h.count=o.length,function(t){console&&console.warn&&console.warn(t)}(h)}return t}function pt(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function At(t,i,e){var s={fired:!1,wrapFn:void 0,target:t,type:i,listener:e},n=pt.bind(s);return n.listener=e,s.wrapFn=n,n}function yt(t,i,e){var s=t.J_;if(void 0===s)return[];var n=s[i];return void 0===n?[]:"function"==typeof n?e?[n.listener||n]:[n]:e?function(t){for(var i=new Array(t.length),e=0;e<i.length;++e)i[e]=t[e].listener||t[e];return i}(n):Mt(n,n.length)}function bt(t){var i=this.J_;if(void 0!==i){var e=i[t];if("function"==typeof e)return 1;if(void 0!==e)return e.length}return 0}function Mt(t,i){for(var e=new Array(i),s=0;s<i;++s)e[s]=t[s];return e}function Tt(t,i,e,s){if("function"==typeof t.on)s.once?t.once(i,e):t.on(i,e);else{if("function"!=typeof t.addEventListener)throw new k('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(i,(function n(r){s.once&&t.removeEventListener(i,n),e(r)}))}}_.defineProperty(gt,"defaultMaxListeners",{enumerable:!0,get:function(){return _t},set:function(t){if("number"!=typeof t||t<0||ft(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");_t=t}}),gt.init=function(){(void 0===this.J_||this.J_===_.getPrototypeOf(this).J_)&&(this.J_=_.create(null),this.rv=0),this.ov=this.ov||void 0},gt.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||ft(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this.ov=t,this},gt.prototype.getMaxListeners=function(){return wt(this)},gt.prototype.emit=function(t){for(var i=[],e=1;e<arguments.length;e++)i.push(arguments[e]);var s="error"===t,n=this.J_;if(void 0!==n)s=s&&void 0===n.error;else if(!s)return!1;if(s){var r;if(i.length>0&&(r=i[0]),r instanceof b)throw r;var o=new b("Unhandled error."+(r?" ("+r.message+")":""));throw o.context=r,o}var h=n[t];if(void 0===h)return!1;if("function"==typeof h)dt(h,this,i);else{var a=h.length,u=Mt(h,a);for(e=0;e<a;++e)dt(u[e],this,i)}return!0},gt.prototype.addListener=function(t,i){return mt(this,t,i,!1)},gt.prototype.on=gt.prototype.addListener,gt.prototype.prependListener=function(t,i){return mt(this,t,i,!0)},gt.prototype.once=function(t,i){return vt(i),this.on(t,At(this,t,i)),this},gt.prototype.prependOnceListener=function(t,i){return vt(i),this.prependListener(t,At(this,t,i)),this},gt.prototype.removeListener=function(t,i){var e,s,n,r,o;if(vt(i),void 0===(s=this.J_))return this;if(void 0===(e=s[t]))return this;if(e===i||e.listener===i)0==--this.rv?this.J_=_.create(null):(delete s[t],s.removeListener&&this.emit("removeListener",t,e.listener||i));else if("function"!=typeof e){for(n=-1,r=e.length-1;r>=0;r--)if(e[r]===i||e[r].listener===i){o=e[r].listener,n=r;break}if(n<0)return this;0===n?e.shift():function(t,i){for(;i+1<t.length;i++)t[i]=t[i+1];t.pop()}(e,n),1===e.length&&(s[t]=e[0]),void 0!==s.removeListener&&this.emit("removeListener",t,o||i)}return this},gt.prototype.off=gt.prototype.removeListener,gt.prototype.removeAllListeners=function(t){var i,e,s;if(void 0===(e=this.J_))return this;if(void 0===e.removeListener)return 0===arguments.length?(this.J_=_.create(null),this.rv=0):void 0!==e[t]&&(0==--this.rv?this.J_=_.create(null):delete e[t]),this;if(0===arguments.length){var n,r=_.keys(e);for(s=0;s<r.length;++s)"removeListener"!==(n=r[s])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this.J_=_.create(null),this.rv=0,this}if("function"==typeof(i=e[t]))this.removeListener(t,i);else if(void 0!==i)for(s=i.length-1;s>=0;s--)this.removeListener(t,i[s]);return this},gt.prototype.listeners=function(t){return yt(this,t,!0)},gt.prototype.rawListeners=function(t){return yt(this,t,!1)},gt.listenerCount=function(t,i){return"function"==typeof t.listenerCount?t.listenerCount(i):bt.call(t,i)},gt.prototype.listenerCount=bt,gt.prototype.eventNames=function(){return this.rv>0?ut(this.J_):[]};var St=ct.exports;const Nt=A(St);var Dt={exports:{}};Dt.exports=kt,Dt.exports.filter=function(t,i){var e=new Et;return kt(t,e,i),e};var Et=St.EventEmitter;function kt(t,i,e){Array.isArray(e)||(e=[e]);var s=[];return e.forEach((function(e){var n=function(){var t=[].slice.call(arguments);t.unshift(e),i.emit.apply(i,t)};s.push(n),t.on(e,n)})),function(){e.forEach((function(i,e){t.removeListener(i,s[e])}))}}const xt=A(Dt.exports);var Lt={exports:{}};!function(t,i){var e;self,e=()=>{return t={7:t=>{var i,e="object"==typeof Reflect?Reflect:null,s=e&&"function"==typeof e.apply?e.apply:function(t,i,e){return Function.prototype.apply.call(t,i,e)};i=e&&"function"==typeof e.ownKeys?e.ownKeys:_.getOwnPropertySymbols?function(t){return _.getOwnPropertyNames(t).concat(_.getOwnPropertySymbols(t))}:function(t){return _.getOwnPropertyNames(t)};var n=Number.isNaN||function(t){return t!=t};function r(){r.init.call(this)}t.exports=r,t.exports.once=function(t,i){return new Promise((function(e,s){function n(e){t.removeListener(i,r),s(e)}function r(){"function"==typeof t.removeListener&&t.removeListener("error",n),e([].slice.call(arguments))}var o,h;v(t,i,r,{once:!0}),"error"!==i&&(h=n,"function"==typeof(o=t).on&&v(o,"error",h,{once:!0}))}))},r.EventEmitter=r,r.prototype.J_=void 0,r.prototype.rv=0,r.prototype.ov=void 0;var o=10;function h(t){if("function"!=typeof t)throw new k('The "listener" argument must be of type Function. Received type '+typeof t)}function a(t){return void 0===t.ov?r.defaultMaxListeners:t.ov}function u(t,i,e,s){var n,r,o,u;if(h(e),void 0===(r=t.J_)?(r=t.J_=_.create(null),t.rv=0):(void 0!==r.newListener&&(t.emit("newListener",i,e.listener?e.listener:e),r=t.J_),o=r[i]),void 0===o)o=r[i]=e,++t.rv;else if("function"==typeof o?o=r[i]=s?[e,o]:[o,e]:s?o.unshift(e):o.push(e),(n=a(t))>0&&o.length>n&&!o.warned){o.warned=!0;var c=new b("Possible EventEmitter memory leak detected. "+o.length+" "+String(i)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=t,c.type=i,c.count=o.length,u=c,console&&console.warn&&console.warn(u)}return t}function c(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function l(t,i,e){var s={fired:!1,wrapFn:void 0,target:t,type:i,listener:e},n=c.bind(s);return n.listener=e,s.wrapFn=n,n}function d(t,i,e){var s=t.J_;if(void 0===s)return[];var n=s[i];return void 0===n?[]:"function"==typeof n?e?[n.listener||n]:[n]:e?function(t){for(var i=new Array(t.length),e=0;e<i.length;++e)i[e]=t[e].listener||t[e];return i}(n):g(n,n.length)}function f(t){var i=this.J_;if(void 0!==i){var e=i[t];if("function"==typeof e)return 1;if(void 0!==e)return e.length}return 0}function g(t,i){for(var e=new Array(i),s=0;s<i;++s)e[s]=t[s];return e}function v(t,i,e,s){if("function"==typeof t.on)s.once?t.once(i,e):t.on(i,e);else{if("function"!=typeof t.addEventListener)throw new k('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(i,(function n(r){s.once&&t.removeEventListener(i,n),e(r)}))}}_.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(t){if("number"!=typeof t||t<0||n(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");o=t}}),r.init=function(){void 0!==this.J_&&this.J_!==_.getPrototypeOf(this).J_||(this.J_=_.create(null),this.rv=0),this.ov=this.ov||void 0},r.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||n(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this.ov=t,this},r.prototype.getMaxListeners=function(){return a(this)},r.prototype.emit=function(t){for(var i=[],e=1;e<arguments.length;e++)i.push(arguments[e]);var n="error"===t,r=this.J_;if(void 0!==r)n=n&&void 0===r.error;else if(!n)return!1;if(n){var o;if(i.length>0&&(o=i[0]),o instanceof b)throw o;var h=new b("Unhandled error."+(o?" ("+o.message+")":""));throw h.context=o,h}var a=r[t];if(void 0===a)return!1;if("function"==typeof a)s(a,this,i);else{var u=a.length,c=g(a,u);for(e=0;e<u;++e)s(c[e],this,i)}return!0},r.prototype.addListener=function(t,i){return u(this,t,i,!1)},r.prototype.on=r.prototype.addListener,r.prototype.prependListener=function(t,i){return u(this,t,i,!0)},r.prototype.once=function(t,i){return h(i),this.on(t,l(this,t,i)),this},r.prototype.prependOnceListener=function(t,i){return h(i),this.prependListener(t,l(this,t,i)),this},r.prototype.removeListener=function(t,i){var e,s,n,r,o;if(h(i),void 0===(s=this.J_))return this;if(void 0===(e=s[t]))return this;if(e===i||e.listener===i)0==--this.rv?this.J_=_.create(null):(delete s[t],s.removeListener&&this.emit("removeListener",t,e.listener||i));else if("function"!=typeof e){for(n=-1,r=e.length-1;r>=0;r--)if(e[r]===i||e[r].listener===i){o=e[r].listener,n=r;break}if(n<0)return this;0===n?e.shift():function(t,i){for(;i+1<t.length;i++)t[i]=t[i+1];t.pop()}(e,n),1===e.length&&(s[t]=e[0]),void 0!==s.removeListener&&this.emit("removeListener",t,o||i)}return this},r.prototype.off=r.prototype.removeListener,r.prototype.removeAllListeners=function(t){var i,e,s;if(void 0===(e=this.J_))return this;if(void 0===e.removeListener)return 0===arguments.length?(this.J_=_.create(null),this.rv=0):void 0!==e[t]&&(0==--this.rv?this.J_=_.create(null):delete e[t]),this;if(0===arguments.length){var n,r=_.keys(e);for(s=0;s<r.length;++s)"removeListener"!==(n=r[s])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this.J_=_.create(null),this.rv=0,this}if("function"==typeof(i=e[t]))this.removeListener(t,i);else if(void 0!==i)for(s=i.length-1;s>=0;s--)this.removeListener(t,i[s]);return this},r.prototype.listeners=function(t){return d(this,t,!0)},r.prototype.rawListeners=function(t){return d(this,t,!1)},r.listenerCount=function(t,i){return"function"==typeof t.listenerCount?t.listenerCount(i):f.call(t,i)},r.prototype.listenerCount=f,r.prototype.eventNames=function(){return this.rv>0?i(this.J_):[]}},586:function(t,i,e){var s,n;!function(r){var o,h={VERSION:"1.6.1"},a={},u=function(t,i){return function(){return i.apply(t,arguments)}},c=function(){var t,i,e=arguments,s=e[0];for(i=1;i<e.length;i++)for(t in e[i])!(t in s)&&e[i].hasOwnProperty(t)&&(s[t]=e[i][t]);return s},l=function(t,i){return{value:t,name:i}};h.TRACE=l(1,"TRACE"),h.DEBUG=l(2,"DEBUG"),h.INFO=l(3,"INFO"),h.TIME=l(4,"TIME"),h.WARN=l(5,"WARN"),h.ERROR=l(8,"ERROR"),h.OFF=l(99,"OFF");var d=function(t){this.context=t,this.setLevel(t.filterLevel),this.log=this.info};d.prototype={setLevel:function(t){t&&"value"in t&&(this.context.filterLevel=t)},getLevel:function(){return this.context.filterLevel},enabledFor:function(t){var i=this.context.filterLevel;return t.value>=i.value},trace:function(){this.invoke(h.TRACE,arguments)},debug:function(){this.invoke(h.DEBUG,arguments)},info:function(){this.invoke(h.INFO,arguments)},warn:function(){this.invoke(h.WARN,arguments)},error:function(){this.invoke(h.ERROR,arguments)},time:function(t){"string"==typeof t&&t.length>0&&this.invoke(h.TIME,[t,"start"])},timeEnd:function(t){"string"==typeof t&&t.length>0&&this.invoke(h.TIME,[t,"end"])},invoke:function(t,i){o&&this.enabledFor(t)&&o(i,c({level:t},this.context))}};var f,g=new d({filterLevel:h.OFF});(f=h).enabledFor=u(g,g.enabledFor),f.trace=u(g,g.trace),f.debug=u(g,g.debug),f.time=u(g,g.time),f.timeEnd=u(g,g.timeEnd),f.info=u(g,g.info),f.warn=u(g,g.warn),f.error=u(g,g.error),f.log=f.info,h.setHandler=function(t){o=t},h.setLevel=function(t){for(var i in g.setLevel(t),a)a.hasOwnProperty(i)&&a[i].setLevel(t)},h.getLevel=function(){return g.getLevel()},h.get=function(t){return a[t]||(a[t]=new d(c({name:t},g.context)))},h.createDefaultHandler=function(t){(t=t||{}).formatter=t.formatter||function(t,i){i.name&&t.unshift("["+i.name+"]")};var i={},e=function(t,i){Function.prototype.apply.call(t,console,i)};return typeof console>"u"?function(){}:function(s,n){s=Array.prototype.slice.call(s);var r,o=console.log;n.level===h.TIME?(r=(n.name?"["+n.name+"] ":"")+s[0],"start"===s[1]?console.time?console.time(r):i[r]=(new Date).getTime():console.timeEnd?console.timeEnd(r):e(o,[r+": "+((new Date).getTime()-i[r])+"ms"])):(n.level===h.WARN&&console.warn?o=console.warn:n.level===h.ERROR&&console.error?o=console.error:n.level===h.INFO&&console.info?o=console.info:n.level===h.DEBUG&&console.debug?o=console.debug:n.level===h.TRACE&&console.trace&&(o=console.trace),t.formatter(s,n),e(o,s))}},h.useDefaults=function(t){h.setLevel(t&&t.defaultLevel||h.DEBUG),h.setHandler(h.createDefaultHandler(t))},h.setDefaults=h.useDefaults,void 0===(n="function"==typeof(s=h)?s.call(i,e,i,t):s)||(t.exports=n)}()},156:function(t,i,e){var s=this&&this.hv||(_.create?function(t,i,e,s){void 0===s&&(s=e);var n=_.getOwnPropertyDescriptor(i,e);n&&!("get"in n?!i.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return i[e]}}),_.defineProperty(t,s,n)}:function(t,i,e,s){void 0===s&&(s=e),t[s]=i[e]}),n=this&&this.uv||function(t,i){for(var e in t)"default"===e||_.prototype.hasOwnProperty.call(i,e)||s(i,t,e)},r=this&&this.fv||function(t){return t&&t.__esModule?t:{default:t}};_.defineProperty(i,"__esModule",{value:!0}),i.Logger=void 0;var o=e(586);_.defineProperty(i,"Logger",{enumerable:!0,get:function(){return r(o).default}}),n(e(284),i),n(e(280),i),n(e(738),i),n(e(767),i)},738:(t,i)=>{var e,s;_.defineProperty(i,"__esModule",{value:!0}),i.QualityLimitationReason=void 0,(s=e||(i.QualityLimitationReason=e={}))[s.none=0]="none",s[s.cpu=1]="cpu",s[s.bandwidth=2]="bandwidth",s[s.other=3]="other"},280:(t,i)=>{_.defineProperty(i,"__esModule",{value:!0})},767:(t,i)=>{_.defineProperty(i,"__esModule",{value:!0})},185:(t,i)=>{_.defineProperty(i,"__esModule",{value:!0}),i.calculatePacketsLostRatio=i.calculateRate=i.getMediaKind=void 0,i.getMediaKind=t=>{let i=t.kind||t.mediaType;return["audio","video"].includes(i)||"inbound-rtp"!==t.type||(i=t.id.toLocaleLowerCase().includes("video")?"video":"audio"),i},i.calculateRate=(t,i,e,s)=>e&&s?(i-s)/((t-e)/1e3):0,i.calculatePacketsLostRatio=(t,i,e,s)=>0==i?0:(t-(null!=e?e:0))/(i-(null!=s?s:0))},284:function(t,i,e){var s,n,r,o,h,a,u,c,l,d,f,g,w,p,A,y,b=this&&this._v||function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,h)}a((s=s.apply(t,i||[])).next())}))},M=this&&this.vv||function(t,i,e,s,n){if("m"===s)throw new k("Private method is not writable");if("a"===s&&!n)throw new k("Private accessor was defined without a setter");if("function"==typeof i?t!==i||!n:!i.has(t))throw new k("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(t,e):n?n.value=e:i.set(t,e),e},T=this&&this.mv||function(t,i,e,s){if("a"===e&&!s)throw new k("Private accessor was defined without a getter");if("function"==typeof i?t!==i||!s:!i.has(t))throw new k("Cannot read private member from an object whose class did not declare it");return"m"===e?s:"a"===e?s.call(t):s?s.value:i.get(t)},S=this&&this.fv||function(t){return t&&t.__esModule?t:{default:t}};_.defineProperty(i,"__esModule",{value:!0}),i.WebRTCStats=void 0;const N=e(7),I=S(e(586)),D=e(738),E=e(185);class x extends N.EventEmitter{constructor(t){super(),s.add(this),n.set(this,void 0),r.set(this,void 0),o.set(this,void 0),h.set(this,null),a.set(this,void 0),u.set(this,null),this.start=()=>{T(this,a,"f").info("WebRTC statistics collection is starting..."),M(this,u,null,"f"),M(this,h,v(T(this,c,"f"),T(this,r,"f")),"f")},this.stop=()=>{T(this,h,"f")&&(m(T(this,h,"f")),M(this,h,null,"f"),T(this,a,"f").info("WebRTC statistics collection has stopped."))},c.set(this,(()=>b(this,void 0,void 0,(function*(){let t,i;try{T(this,a,"f").trace("Requesting WebRTC statistics..."),t=yield T(this,n,"f").call(this),i=(new Date).toISOString()}catch(t){return T(this,a,"f").error("Problem collecting the WebRTC statistics.",t),void this.emit("error","Problem collecting the WebRTC statistics - ".concat(t))}const e=Array.from(t.values()),r={timestamp:i,input:{audio:[],video:[]},output:{audio:[],video:[]}};T(this,o,"f")&&(r.rawStats=t);for(let i=0;i<_.keys(e).length;i++){const n=e[i];switch(n.type){case"outbound-rtp":const i=n,e=(0,E.getMediaKind)(i);"audio"===e?yield T(this,s,"m",f).call(this,t,i,r):"video"===e&&(yield T(this,s,"m",g).call(this,t,i,r));break;case"inbound-rtp":const o=n;let h=(0,E.getMediaKind)(o);"audio"===h?yield T(this,s,"m",p).call(this,t,o,r):"video"===h&&(yield T(this,s,"m",A).call(this,t,o,r));break;case"candidate-pair":const a=n;a.nominated&&T(this,s,"m",y).call(this,a,r)}}M(this,u,r,"f"),this.emit("stats",r)})))),M(this,a,I.default.get("WebRTCStats"),"f"),M(this,n,t.getStats,"f"),M(this,r,t.getStatsInterval||1e3,"f"),M(this,o,!!t.includeRawStats,"f")}}i.WebRTCStats=x,n=new WeakMap,r=new WeakMap,o=new WeakMap,h=new WeakMap,a=new WeakMap,u=new WeakMap,c=new WeakMap,s=new WeakSet,l=function(t,i){if(i){const e=t.get(i);if(e)return{mimeType:e.mimeType}}return{}},d=function(t,i,e){return b(this,void 0,void 0,(function*(){var n,r,o,h;const a=(0,E.calculateRate)(i.timestamp,i.bytesSent,null==e?void 0:e.timestamp,null==e?void 0:e.totalBytesSent),u=(0,E.calculateRate)(i.timestamp,i.packetsSent,null==e?void 0:e.timestamp,null==e?void 0:e.totalPacketsSent),c=T(this,s,"m",l).call(this,t,i.codecId);return _.assign({id:i.id,timestamp:i.timestamp,mid:i.mid,totalBytesSent:i.bytesSent,bytesSentDelta:i.bytesSent-(null!==(n=null==e?void 0:e.totalBytesSent)&&void 0!==n?n:0),totalPacketsSent:i.packetsSent,packetsSentDelta:i.packetsSent-(null!==(r=null==e?void 0:e.totalPacketsSent)&&void 0!==r?r:0),bitrate:a,packetRate:u,targetBitrate:i.targetBitrate,retransmittedPacketsSent:i.retransmittedPacketsSent,retransmittedPacketsSentDelta:i.retransmittedPacketsSent-(null!==(o=null==e?void 0:e.retransmittedPacketsSent)&&void 0!==o?o:0),retransmittedBytesSent:i.retransmittedBytesSent,retransmittedBytesSentDelta:i.retransmittedBytesSent-(null!==(h=null==e?void 0:e.retransmittedBytesSent)&&void 0!==h?h:0)},c)}))},f=function(t,i,e){return b(this,void 0,void 0,(function*(){var n;const r=null===(n=T(this,u,"f"))||void 0===n?void 0:n.output.audio.find((t=>t.id===i.id));if(r&&i.timestamp-r.timestamp<=0)return;const o=yield T(this,s,"m",d).call(this,t,i,r),h=_.assign({},o);e.output.audio.push(h)}))},g=function(t,i,e){return b(this,void 0,void 0,(function*(){var n;const r=null===(n=T(this,u,"f"))||void 0===n?void 0:n.output.video.find((t=>t.id===i.id));if(r&&i.timestamp-r.timestamp<=0)return;const o=yield T(this,s,"m",d).call(this,t,i,r);let h=D.QualityLimitationReason.none;i.qualityLimitationReason&&(h=i.qualityLimitationReason);const a=_.assign(_.assign({},o),{frameWidth:i.frameWidth,frameHeight:i.frameHeight,framesPerSecond:i.framesPerSecond,framesSent:i.framesSent,qualityLimitationReason:h,qualityLimitationDurations:i.qualityLimitationDurations});e.output.video.push(a)}))},w=function(t,i,e){return b(this,void 0,void 0,(function*(){var n,r;const o=(0,E.calculateRate)(i.timestamp,i.bytesReceived,null==e?void 0:e.timestamp,null==e?void 0:e.totalBytesReceived),h=(0,E.calculateRate)(i.timestamp,i.packetsReceived,null==e?void 0:e.timestamp,null==e?void 0:e.totalPacketsReceived),a=(0,E.calculatePacketsLostRatio)(i.packetsReceived,i.packetsLost,null==e?void 0:e.totalPacketsReceived,null==e?void 0:e.totalPacketsLost),u=(null!==(n=i.packetsLost)&&void 0!==n?n:0)-(null!==(r=null==e?void 0:e.totalPacketsLost)&&void 0!==r?r:0),c=T(this,s,"m",l).call(this,t,i.codecId);return _.assign({id:i.id,timestamp:i.timestamp,mid:i.mid,trackIdentifier:i.trackIdentifier,jitter:i.jitter,jitterBufferDelay:i.jitterBufferDelay,jitterBufferEmittedCount:i.jitterBufferEmittedCount,totalBytesReceived:i.bytesReceived,totalPacketsReceived:i.packetsReceived,totalPacketsLost:i.packetsLost,bitrate:o,packetRate:h,packetLossRatio:a,packetLossDelta:u},c)}))},p=function(t,i,e){return b(this,void 0,void 0,(function*(){var n;const r=null===(n=T(this,u,"f"))||void 0===n?void 0:n.input.audio.find((t=>t.id===i.id));if(r&&i.timestamp-r.timestamp<=0)return;const o=yield T(this,s,"m",w).call(this,t,i,r);e.input.audio.push(o)}))},A=function(t,i,e){return b(this,void 0,void 0,(function*(){var n;const r=null===(n=T(this,u,"f"))||void 0===n?void 0:n.input.video.find((t=>t.id===i.id));if(r&&i.timestamp-r.timestamp<=0)return;const o=yield T(this,s,"m",w).call(this,t,i,r),h=_.assign(_.assign({},o),{keyFramesDecoded:i.keyFramesDecoded,frameHeight:i.frameHeight,frameWidth:i.frameWidth,framesDecoded:i.framesDecoded,framesDropped:i.framesDropped,framesPerSecond:i.framesPerSecond,framesReceived:i.framesReceived});e.input.video.push(h)}))},y=function(t,i){i.totalRoundTripTime=t.totalRoundTripTime,i.currentRoundTripTime=t.currentRoundTripTime,i.responsesReceived=t.responsesReceived,i.availableOutgoingBitrate=t.availableOutgoingBitrate,i.availableIncomingBitrate=t.availableIncomingBitrate}}},i={},function e(s){var n=i[s];if(void 0!==n)return n.exports;var r=i[s]={exports:{}};return t[s].call(r.exports,r,r.exports,e),r.exports}(156);var t,i},t.exports=e()}(Lt);var Ct=Lt.exports;const jt=at.get("PeerConnectionStats"),Ot="stats";class Rt extends Nt{init(t){if(this.initialized)return void jt.warn("PeerConnectionStats.init() has already been called. Automatic initialization occurs when the PeerConnectionStats object is constructed.");jt.info("Initializing peer connection stats");const i=this.peer;try{this.collection=new Ct.WebRTCStats({getStatsInterval:t,getStats:()=>i.getStats(),includeRawStats:!0}),this.collection.on("stats",(t=>{const i=(t=>{const i=t,{input:e,output:s,rawStats:n}=i,r=w(i,["input","output","rawStats"]);return g(d({},r),{audio:{inbounds:t.input.audio.map((t=>{var i=t,{packetLossRatio:e,packetLossDelta:s,bitrate:n}=i,r=w(i,["packetLossRatio","packetLossDelta","bitrate"]);return d({packetsLostRatioPerSecond:e,packetsLostDeltaPerSecond:s,bitrateBitsPerSecond:8*n,bitrate:n},r)})),outbounds:t.output.audio.map((t=>{var i=t,{packetLossRatio:e,packetLossDelta:s,bitrate:n}=i,r=w(i,["packetLossRatio","packetLossDelta","bitrate"]);return d({packetsLostRatioPerSecond:e,packetsLostDeltaPerSecond:s,bitrateBitsPerSecond:8*n,bitrate:n},r)}))},video:{inbounds:t.input.video.map((t=>{var i=t,{packetLossRatio:e,packetLossDelta:s,bitrate:n}=i,r=w(i,["packetLossRatio","packetLossDelta","bitrate"]);return d({packetsLostRatioPerSecond:e,packetsLostDeltaPerSecond:s,bitrateBitsPerSecond:8*n,bitrate:n},r)})),outbounds:t.output.video.map((t=>{var i=t,{packetLossRatio:e,packetLossDelta:s,bitrate:n}=i,r=w(i,["packetLossRatio","packetLossDelta","bitrate"]);return d({packetsLostRatioPerSecond:e,packetsLostDeltaPerSecond:s,bitrateBitsPerSecond:8*n,bitrate:n},r)}))},raw:t.rawStats})})(t);q(i),this.emit(Ot,i)})),this.collection.start(),this.initialized=!0}catch(t){jt.error(t)}}parseStats(t){return jt.warn("The parseStats method is deprecated and will be removed in future releases."),null}stop(){jt.info("Stopping peer connection stats"),this.collection.stop()}constructor(t,i={statsIntervalMs:1e3,autoInitStats:!0}){super(),this.peer=t,this.collection=null,this.initialized=!1,i.autoInitStats&&this.init(i.statsIntervalMs)}}var Pt={},zt={},Bt={},Ut={exports:{}},Qt=Ut.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(t){return t.encoding?"rtpmap:%d %s/%s/%s":t.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(t){return null!=t.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(t){return null!=t.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(t){return"extmap:%d"+(t.direction?"/%s":"%v")+(t["encrypt-uri"]?" %s":"%v")+" %s"+(t.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(t){return null!=t.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(t){var i="candidate:%s %d %s %d %s %d typ %s";return i+=null!=t.raddr?" raddr %s rport %d":"%v%v",i+=null!=t.tcptype?" tcptype %s":"%v",null!=t.generation&&(i+=" generation %d"),i+=null!=t["network-id"]?" network-id %d":"%v",i+=null!=t["network-cost"]?" network-cost %d":"%v"}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(t){var i="ssrc:%d";return null!=t.attribute&&(i+=" %s",null!=t.value&&(i+=":%s")),i}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(t){return null!=t.maxMessageSize?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(t){return t.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(t){return"imageattr:%s %s %s"+(t.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(t){return"simulcast:%s %s"+(t.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(t){return"ts-refclk:%s"+(null!=t.clksrcExt?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(t){var i="mediaclk:";return i+=null!=t.id?"id=%s %s":"%v%s",i+=null!=t.mediaClockValue?"=%s":"",i+=null!=t.rateNumerator?" rate=%s":"",i+=null!=t.rateDenominator?"/%s":""}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};_.keys(Qt).forEach((function(t){Qt[t].forEach((function(t){t.reg||(t.reg=/(.*)/),t.format||(t.format="%s")}))}));var Ft=Ut.exports;!function(t){var i=function(t){return String(Number(t))===t?Number(t):t},e=function(t,e,s){var n=t.name&&t.names;t.push&&!e[t.push]?e[t.push]=[]:n&&!e[t.name]&&(e[t.name]={});var r=t.push?{}:n?e[t.name]:e;(function(t,e,s,n){if(n&&!s)e[n]=i(t[1]);else for(var r=0;r<s.length;r+=1)null!=t[r+1]&&(e[s[r]]=i(t[r+1]))})(s.match(t.reg),r,t.names,t.name),t.push&&e[t.push].push(r)},s=Ft,n=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(t){var i={},r=[],o=i;return t.split(/(\r\n|\r|\n)/).filter(n).forEach((function(t){var i=t[0],n=t.slice(2);"m"===i&&(r.push({rtp:[],fmtp:[]}),o=r[r.length-1]);for(var h=0;h<(s[i]||[]).length;h+=1){var a=s[i][h];if(a.reg.test(n))return e(a,o,n)}})),i.media=r,i};var r=function(t,e){var s=e.split(/=(.+)/,2);return 2===s.length?t[s[0]]=i(s[1]):1===s.length&&e.length>1&&(t[s[0]]=void 0),t};t.parseParams=function(t){return t.split(/;\s?/).reduce(r,{})},t.parseFmtpConfig=t.parseParams,t.parsePayloads=function(t){return t.toString().split(" ").map(Number)},t.parseRemoteCandidates=function(t){for(var e=[],s=t.split(" ").map(i),n=0;n<s.length;n+=3)e.push({component:s[n],ip:s[n+1],port:s[n+2]});return e},t.parseImageAttributes=function(t){return t.split(" ").map((function(t){return t.substring(1,t.length-1).split(",").reduce(r,{})}))},t.parseSimulcastStreamList=function(t){return t.split(";").map((function(t){return t.split(",").map((function(t){var e,s=!1;return"~"!==t[0]?e=i(t):(e=i(t.substring(1,t.length)),s=!0),{scid:e,paused:s}}))}))}}(Bt);var Yt=Ft,Vt=/%[sdv%]/g,Gt=function(t){var i=1,e=arguments,s=e.length;return t.replace(Vt,(function(t){if(i>=s)return t;var n=e[i];switch(i+=1,t){case"%%":return"%";case"%s":return String(n);case"%d":return Number(n);case"%v":return""}}))},Wt=function(t,i,e){var s=[t+"="+(i.format instanceof Function?i.format(i.push?e:e[i.name]):i.format)];if(i.names)for(var n=0;n<i.names.length;n+=1){var r=i.names[n];i.name?s.push(e[i.name][r]):s.push(e[i.names[n]])}else s.push(e[i.name]);return Gt.apply(null,s)},Zt=["v","o","s","i","u","e","p","c","b","t","r","z","a"],Ht=["i","c","b","a"],Xt=Bt,qt=function(t,i){i=i||{},null==t.version&&(t.version=0),null==t.name&&(t.name=" "),t.media.forEach((function(t){null==t.payloads&&(t.payloads="")}));var e=i.outerOrder||Zt,s=i.innerOrder||Ht,n=[];return e.forEach((function(i){Yt[i].forEach((function(e){e.name in t&&null!=t[e.name]?n.push(Wt(i,e,t)):e.push in t&&null!=t[e.push]&&t[e.push].forEach((function(t){n.push(Wt(i,e,t))}))}))})),t.media.forEach((function(t){n.push(Wt("m",Yt.m[0],t)),s.forEach((function(i){Yt[i].forEach((function(e){e.name in t&&null!=t[e.name]?n.push(Wt(i,e,t)):e.push in t&&null!=t[e.push]&&t[e.push].forEach((function(t){n.push(Wt(i,e,t))}))}))}))})),n.join("\r\n")+"\r\n"};zt.write=qt,zt.parse=Xt.parse,zt.parseParams=Xt.parseParams,zt.parseFmtpConfig=Xt.parseFmtpConfig,zt.parsePayloads=Xt.parsePayloads,zt.parseRemoteCandidates=Xt.parseRemoteCandidates,zt.parseImageAttributes=Xt.parseImageAttributes,zt.parseSimulcastStreamList=Xt.parseSimulcastStreamList;let Kt=class t{equals(t){return t.foundation===this.foundation&&t.componentId===this.componentId&&t.transport===this.transport&&t.priority===this.priority&&t.address===this.address&&t.port===this.port&&t.type===this.type&&t.relAddr===this.relAddr&&t.relPort===this.relPort}clone(){return new t(this.foundation,this.componentId,this.transport,this.priority,this.address,this.port,this.type,this.relAddr,this.relPort)}plain(){const t={foundation:this.foundation,componentId:this.componentId,transport:this.transport,priority:this.priority,address:this.address,port:this.port,type:this.type};return this.relAddr&&(t.relAddr=this.relAddr),this.relPort&&(t.relPort=this.relPort),t}getFoundation(){return this.foundation}getComponentId(){return this.componentId}getTransport(){return this.transport}getPriority(){return this.priority}getAddress(){return this.address}getPort(){return this.port}getType(){return this.type}getRelAddr(){return this.relAddr}getRelPort(){return this.relPort}constructor(t,i,e,s,n,r,o,h,a){this.foundation=t,this.componentId=i,this.transport=e,this.priority=s,this.address=n,this.port=r,this.type=o,this.relAddr=h,this.relPort=a}};Kt.expand=function(t){return"CandidateInfo"===t.constructor.name?t:new Kt(t.foundation,t.componentId,t.transport,t.priority,t.address,t.port,t.type,t.relAddr,t.relPort)},Kt.clone=function(t){return"CandidateInfo"===t.constructor.name?t.clone():Kt.expand(t)};var Jt=Kt;let $t=class t{clone(){return new t(this.id,this.params)}plain(){return this.params.length?{id:this.id,params:this.params}:{id:this.id}}getId(){return this.id}getParams(){return this.params}constructor(t,i){this.id=t,this.params=i||[]}};$t.expand=function(t){return"RTCPFeedbackInfo"===t.constructor.name?t:new $t(t.id,t.params)},$t.clone=function(t){return"RTCPFeedbackInfo"===t.constructor.name?t.clone():$t.expand(t)};var ti=$t;const ii=ti;let ei=class t{clone(){const i=new t(this.codec,this.type,this.params);this.hasRTX()&&i.setRTX(this.getRTX());for(const t of this.rtcpfbs)i.addRTCPFeedback(t.clone());return this.hasChannels()&&i.setChannels(this.getChannels()),i}plain(){const t={codec:this.codec,type:this.type};this.rtx&&(t.rtx=this.rtx),this.channels&&(t.channels=this.channels),_.keys(this.params).length&&(t.params=this.params);for(const i of this.rtcpfbs)t.rtcpfbs||(t.rtcpfbs=[]),t.rtcpfbs.push(i.plain());return t}setRTX(t){this.rtx=t}getType(){return this.type}setType(t){this.type=t}getCodec(){return this.codec}getParams(){return this.params}addParams(t){for(const i in t)this.params[i]=t[i]}addParam(t,i){this.params[t]=i}hasParam(t){return _.hasOwnProperty.call(this.params,t)}getParam(t,i){if(void 0===i&&(i=void 0),this.hasParam(t))return this.params[t];if(void 0===i)throw new b("param ".concat(t," not found and no default value provided"));return""+i}hasRTX(){return this.rtx}getRTX(){return this.rtx}hasChannels(){return this.channels}getChannels(){return this.channels}setChannels(t){this.channels=t}addRTCPFeedback(t){this.rtcpfbs.add(t)}getRTCPFeedbacks(){return this.rtcpfbs}constructor(t,i,e){this.codec=t,this.type=i,this.params={},this.rtcpfbs=new Set,e&&this.addParams(e)}};ei.expand=function(t){if("CodecInfo"===t.constructor.name)return t;const i=new ei(t.codec,t.type,t.params);t.rtx&&i.setRTX(t.rtx),t.channels&&i.setChannels(t.channels);for(const e of t.rtcpfbs||[]){const t=ii.expand(e);i.addRTCPFeedback(t)}return i},ei.clone=function(t){return"CodecInfo"===t.constructor.name?t.clone():ei.expand(t)},ei.MapFromNames=function(t,i,e){var s;const n=new Map;let r=96;for(const o of t){let t;const h=o.split(";"),a=h.shift().toLowerCase().trim();t="pcmu"===a?0:"pcma"===a?8:++r;const u=new ei(a,t);"opus"===a?u.setChannels(2):"multiopus"===a&&u.setChannels(6),i&&"ulpfec"!==a&&"flexfec-03"!==a&&"red"!==a&&u.setRTX(++r);for(const t of e||[])u.addRTCPFeedback(new ii(t.id,t.params));for(const t of h){let i=t.split("=");u.addParam(i[0].trim(),null===(s=i[1])||void 0===s?void 0:s.trim())}n.set(t,u)}return n};var si=ei,ni=function t(){var i=this;if(!(this instanceof t))return new(Function.prototype.bind.apply(t,[null].concat(Array.prototype.slice.call(arguments))));Array.from(arguments).forEach((function(t){i[t]=It("pv"+t)}))};const ri=ni("ACTIVE","PASSIVE","ACTPASS","INACTIVE");ri.byValue=function(t){switch(t){case ri.ACTIVE:case ri.PASSIVE:case ri.ACTPASS:case ri.INACTIVE:return t}return ri[t.toUpperCase()]},ri.toString=function(t){switch(t){case ri.ACTIVE:return"active";case ri.PASSIVE:return"passive";case ri.ACTPASS:return"actpass";case ri.INACTIVE:return"inactive"}},ri.reverse=function(t,i){switch(t){case ri.ACTIVE:return ri.PASSIVE;case ri.PASSIVE:return ri.ACTIVE;case ri.ACTPASS:return i?ri.ACTIVE:ri.PASSIVE;case ri.INACTIVE:return ri.INACTIVE}};var oi=ri;const hi=oi;let ai=class t{clone(){return new t(this.setup,this.hash,this.fingerprint)}plain(){return{setup:hi.toString(this.setup),hash:this.hash,fingerprint:this.fingerprint}}getFingerprint(){return this.fingerprint}getHash(){return this.hash}getSetup(){return this.setup}setSetup(t){this.setup=t}constructor(t,i,e){this.setup=t,this.hash=i,this.fingerprint=e}};ai.expand=function(t){return"DTLSInfo"===t.constructor.name?t:new ai(t.setup?hi.byValue(t.setup):hi.ACTPASS,t.hash,t.fingerprint)},ai.clone=function(t){return"DTLSInfo"===t.constructor.name?t.clone():ai.expand(t)};var ui=ai;let ci=class t{clone(){return new t(this.tag,this.suite,this.keyParams,this.sessionParams)}plain(){return{tag:this.tag,suite:this.suite,keyParams:this.keyParams,sessionParams:this.sessionParams}}getSessionParams(){return this.sessionParams}getKeyParams(){return this.keyParams}getSuite(){return this.suite}getTag(){return this.tag}constructor(t,i,e,s){this.tag=t,this.suite=i,this.keyParams=e,this.sessionParams=s}};ci.expand=function(t){return"CryptoInfo"===t.constructor.name?t:new ci(t.tag,t.suite,t.keyParams,t.sessionParams)},ci.clone=function(t){return"CryptoInfo"===t.constructor.name?t.clone():ci.expand(t)};for(var li=ci,di={exports:{}},fi={exports:{}},gi={},_i={byteLength:function(t){var i=yi(t),e=i[0],s=i[1];return 3*(e+s)/4-s},toByteArray:function(t){var i,e,s=yi(t),n=s[0],r=s[1],o=new mi(function(t,i,e){return 3*(i+e)/4-e}(0,n,r)),h=0,a=r>0?n-4:n;for(e=0;e<a;e+=4)i=wi[t.charCodeAt(e)]<<18|wi[t.charCodeAt(e+1)]<<12|wi[t.charCodeAt(e+2)]<<6|wi[t.charCodeAt(e+3)],o[h++]=i>>16&255,o[h++]=i>>8&255,o[h++]=255&i;return 2===r&&(i=wi[t.charCodeAt(e)]<<2|wi[t.charCodeAt(e+1)]>>4,o[h++]=255&i),1===r&&(i=wi[t.charCodeAt(e)]<<10|wi[t.charCodeAt(e+1)]<<4|wi[t.charCodeAt(e+2)]>>2,o[h++]=i>>8&255,o[h++]=255&i),o},fromByteArray:function(t){for(var i,e=t.length,s=e%3,n=[],r=16383,o=0,h=e-s;o<h;o+=r)n.push(Mi(t,o,o+r>h?h:o+r));return 1===s?(i=t[e-1],n.push(vi[i>>2]+vi[i<<4&63]+"==")):2===s&&(i=(t[e-2]<<8)+t[e-1],n.push(vi[i>>10]+vi[i>>4&63]+vi[i<<2&63]+"=")),n.join("")}},vi=[],wi=[],mi=typeof T<"u"?T:Array,pi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ai=0;Ai<64;++Ai)vi[Ai]=pi[Ai],wi[pi.charCodeAt(Ai)]=Ai;function yi(t){var i=t.length;if(i%4>0)throw new b("Invalid string. Length must be a multiple of 4");var e=t.indexOf("=");return-1===e&&(e=i),[e,e===i?0:4-e%4]}function bi(t){return vi[t>>18&63]+vi[t>>12&63]+vi[t>>6&63]+vi[63&t]}function Mi(t,i,e){for(var s,n=[],r=i;r<e;r+=3)s=(t[r]<<16&16711680)+(t[r+1]<<8&65280)+(255&t[r+2]),n.push(bi(s));return n.join("")}wi[45]=62,wi[95]=63;var Ti={read:function(t,i,e,s,n){var r,o,h=8*n-s-1,a=(1<<h)-1,u=a>>1,c=-7,l=e?n-1:0,d=e?-1:1,f=t[i+l];for(l+=d,r=f&(1<<-c)-1,f>>=-c,c+=h;c>0;r=256*r+t[i+l],l+=d,c-=8);for(o=r&(1<<-c)-1,r>>=-c,c+=s;c>0;o=256*o+t[i+l],l+=d,c-=8);if(0===r)r=1-u;else{if(r===a)return o?NaN:1/0*(f?-1:1);o+=x.pow(2,s),r-=u}return(f?-1:1)*o*x.pow(2,r-s)},write:function(t,i,e,s,n,r){var o,h,a,u=8*r-n-1,c=(1<<u)-1,l=c>>1,d=23===n?x.pow(2,-24)-x.pow(2,-77):0,f=s?0:r-1,g=s?1:-1,_=i<0||0===i&&1/i<0?1:0;for(i=x.abs(i),j(i)||i===1/0?(h=j(i)?1:0,o=c):(o=x.floor(x.log(i)/x.LN2),i*(a=x.pow(2,-o))<1&&(o--,a*=2),(i+=o+l>=1?d/a:d*x.pow(2,1-l))*a>=2&&(o++,a/=2),o+l>=c?(h=0,o=c):o+l>=1?(h=(i*a-1)*x.pow(2,n),o+=l):(h=i*x.pow(2,l-1)*x.pow(2,n),o=0));n>=8;t[e+f]=255&h,f+=g,h/=256,n-=8);for(o=o<<n|h,u+=n;u>0;t[e+f]=255&o,f+=g,o/=256,u-=8);t[e+f-g]|=128*_}};(function(t){const i=_i,e=Ti,s="function"==typeof Bo&&"function"==typeof It?It("nodejs.util.inspect.custom"):null;t.Buffer=o,t.SlowBuffer=function(t){return+t!=t&&(t=0),o.alloc(+t)},t.INSPECT_MAX_BYTES=50;const n=2147483647;function r(t){if(t>n)throw new RangeError('The value "'+t+'" is invalid for option "size"');const i=new T(t);return _.setPrototypeOf(i,o.prototype),i}function o(t,i,e){if("number"==typeof t){if("string"==typeof i)throw new k('The "string" argument must be of type string. Received type number');return u(t)}return h(t,i,e)}function h(t,i,e){if("string"==typeof t)return function(t,i){if(("string"!=typeof i||""===i)&&(i="utf8"),!o.isEncoding(i))throw new k("Unknown encoding: "+i);const e=0|f(t,i);let s=r(e);const n=s.write(t,i);return n!==e&&(s=s.slice(0,n)),s}(t,i);if(ArrayBuffer.isView(t))return function(t){if($(t,T)){const i=new T(t);return l(i.buffer,i.byteOffset,i.byteLength)}return c(t)}(t);if(null==t)throw new k("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if($(t,ArrayBuffer)||t&&$(t.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&($(t,SharedArrayBuffer)||t&&$(t.buffer,SharedArrayBuffer)))return l(t,i,e);if("number"==typeof t)throw new k('The "value" argument must not be of type number. Received type number');const s=t.valueOf&&t.valueOf();if(null!=s&&s!==t)return o.from(s,i,e);const n=function(t){if(o.isBuffer(t)){const i=0|d(t.length),e=r(i);return 0===e.length||t.copy(e,0,0,i),e}return void 0!==t.length?"number"!=typeof t.length||tt(t.length)?r(0):c(t):"Buffer"===t.type&&Array.isArray(t.data)?c(t.data):void 0}(t);if(n)return n;if(typeof Bo<"u"&&null!=Bo.toPrimitive&&"function"==typeof t[Bo.toPrimitive])return o.from(t[Bo.toPrimitive]("string"),i,e);throw new k("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function a(t){if("number"!=typeof t)throw new k('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function u(t){return a(t),r(t<0?0:0|d(t))}function c(t){const i=t.length<0?0:0|d(t.length),e=r(i);for(let s=0;s<i;s+=1)e[s]=255&t[s];return e}function l(t,i,e){if(i<0||t.byteLength<i)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<i+(e||0))throw new RangeError('"length" is outside of buffer bounds');let s;return s=void 0===i&&void 0===e?new T(t):void 0===e?new T(t,i):new T(t,i,e),_.setPrototypeOf(s,o.prototype),s}function d(t){if(t>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return 0|t}function f(t,i){if(o.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||$(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new k('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const e=t.length,s=arguments.length>2&&!0===arguments[2];if(!s&&0===e)return 0;let n=!1;for(;;)switch(i){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":return q(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*e;case"hex":return e>>>1;case"base64":return K(t).length;default:if(n)return s?-1:q(t).length;i=(""+i).toLowerCase(),n=!0}}function g(t,i,e){let s=!1;if((void 0===i||i<0)&&(i=0),i>this.length||((void 0===e||e>this.length)&&(e=this.length),e<=0)||(e>>>=0)<=(i>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return j(this,i,e);case"utf8":case"utf-8":return I(this,i,e);case"ascii":return E(this,i,e);case"latin1":case"binary":return L(this,i,e);case"base64":return N(this,i,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,i,e);default:if(s)throw new k("Unknown encoding: "+t);t=(t+"").toLowerCase(),s=!0}}function v(t,i,e){const s=t[i];t[i]=t[e],t[e]=s}function w(t,i,e,s,n){if(0===t.length)return-1;if("string"==typeof e?(s=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),tt(e=+e)&&(e=n?0:t.length-1),e<0&&(e=t.length+e),e>=t.length){if(n)return-1;e=t.length-1}else if(e<0){if(!n)return-1;e=0}if("string"==typeof i&&(i=o.from(i,s)),o.isBuffer(i))return 0===i.length?-1:m(t,i,e,s,n);if("number"==typeof i)return i&=255,"function"==typeof T.prototype.indexOf?n?T.prototype.indexOf.call(t,i,e):T.prototype.lastIndexOf.call(t,i,e):m(t,[i],e,s,n);throw new k("val must be string, number or Buffer")}function m(t,i,e,s,n){let r,o=1,h=t.length,a=i.length;if(void 0!==s&&("ucs2"===(s=String(s).toLowerCase())||"ucs-2"===s||"utf16le"===s||"utf-16le"===s)){if(t.length<2||i.length<2)return-1;o=2,h/=2,a/=2,e/=2}function u(t,i){return 1===o?t[i]:t.readUInt16BE(i*o)}if(n){let s=-1;for(r=e;r<h;r++)if(u(t,r)===u(i,-1===s?0:r-s)){if(-1===s&&(s=r),r-s+1===a)return s*o}else-1!==s&&(r-=r-s),s=-1}else for(e+a>h&&(e=h-a),r=e;r>=0;r--){let e=!0;for(let s=0;s<a;s++)if(u(t,r+s)!==u(i,s)){e=!1;break}if(e)return r}return-1}function p(t,i,e,s){e=Number(e)||0;const n=t.length-e;s?(s=Number(s))>n&&(s=n):s=n;const r=i.length;let o;for(s>r/2&&(s=r/2),o=0;o<s;++o){const s=C(i.substr(2*o,2),16);if(tt(s))return o;t[e+o]=s}return o}function A(t,i,e,s){return J(q(i,t.length-e),t,e,s)}function y(t,i,e,s){return J(function(t){const i=[];for(let e=0;e<t.length;++e)i.push(255&t.charCodeAt(e));return i}(i),t,e,s)}function M(t,i,e,s){return J(K(i),t,e,s)}function S(t,i,e,s){return J(function(t,i){let e,s,n;const r=[];for(let o=0;o<t.length&&!((i-=2)<0);++o)e=t.charCodeAt(o),s=e>>8,n=e%256,r.push(n),r.push(s);return r}(i,t.length-e),t,e,s)}function N(t,e,s){return 0===e&&s===t.length?i.fromByteArray(t):i.fromByteArray(t.slice(e,s))}function I(t,i,e){e=x.min(t.length,e);const s=[];let n=i;for(;n<e;){const i=t[n];let r=null,o=i>239?4:i>223?3:i>191?2:1;if(n+o<=e){let e,s,h,a;switch(o){case 1:i<128&&(r=i);break;case 2:e=t[n+1],128==(192&e)&&(a=(31&i)<<6|63&e,a>127&&(r=a));break;case 3:e=t[n+1],s=t[n+2],128==(192&e)&&128==(192&s)&&(a=(15&i)<<12|(63&e)<<6|63&s,a>2047&&(a<55296||a>57343)&&(r=a));break;case 4:e=t[n+1],s=t[n+2],h=t[n+3],128==(192&e)&&128==(192&s)&&128==(192&h)&&(a=(15&i)<<18|(63&e)<<12|(63&s)<<6|63&h,a>65535&&a<1114112&&(r=a))}}null===r?(r=65533,o=1):r>65535&&(r-=65536,s.push(r>>>10&1023|55296),r=56320|1023&r),s.push(r),n+=o}return function(t){const i=t.length;if(i<=D)return String.fromCharCode.apply(String,t);let e="",s=0;for(;s<i;)e+=String.fromCharCode.apply(String,t.slice(s,s+=D));return e}(s)}t.kMaxLength=n,o.TYPED_ARRAY_SUPPORT=function(){try{const t=new T(1),i={foo:function(){return 42}};return _.setPrototypeOf(i,T.prototype),_.setPrototypeOf(t,i),42===t.foo()}catch(t){return!1}}(),!o.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),_.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),_.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}}),o.poolSize=8192,o.from=function(t,i,e){return h(t,i,e)},_.setPrototypeOf(o.prototype,T.prototype),_.setPrototypeOf(o,T),o.alloc=function(t,i,e){return function(t,i,e){return a(t),t<=0?r(t):void 0!==i?"string"==typeof e?r(t).fill(i,e):r(t).fill(i):r(t)}(t,i,e)},o.allocUnsafe=function(t){return u(t)},o.allocUnsafeSlow=function(t){return u(t)},o.isBuffer=function(t){return null!=t&&!0===t.Av&&t!==o.prototype},o.compare=function(t,i){if($(t,T)&&(t=o.from(t,t.offset,t.byteLength)),$(i,T)&&(i=o.from(i,i.offset,i.byteLength)),!o.isBuffer(t)||!o.isBuffer(i))throw new k('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===i)return 0;let e=t.length,s=i.length;for(let n=0,r=x.min(e,s);n<r;++n)if(t[n]!==i[n]){e=t[n],s=i[n];break}return e<s?-1:s<e?1:0},o.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(t,i){if(!Array.isArray(t))throw new k('"list" argument must be an Array of Buffers');if(0===t.length)return o.alloc(0);let e;if(void 0===i)for(i=0,e=0;e<t.length;++e)i+=t[e].length;const s=o.allocUnsafe(i);let n=0;for(e=0;e<t.length;++e){let i=t[e];if($(i,T))n+i.length>s.length?(o.isBuffer(i)||(i=o.from(i)),i.copy(s,n)):T.prototype.set.call(s,i,n);else{if(!o.isBuffer(i))throw new k('"list" argument must be an Array of Buffers');i.copy(s,n)}n+=i.length}return s},o.byteLength=f,o.prototype.Av=!0,o.prototype.swap16=function(){const t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let i=0;i<t;i+=2)v(this,i,i+1);return this},o.prototype.swap32=function(){const t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let i=0;i<t;i+=4)v(this,i,i+3),v(this,i+1,i+2);return this},o.prototype.swap64=function(){const t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let i=0;i<t;i+=8)v(this,i,i+7),v(this,i+1,i+6),v(this,i+2,i+5),v(this,i+3,i+4);return this},o.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?I(this,0,t):g.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(t){if(!o.isBuffer(t))throw new k("Argument must be a Buffer");return this===t||0===o.compare(this,t)},o.prototype.inspect=function(){let i="";const e=t.INSPECT_MAX_BYTES;return i=this.toString("hex",0,e).replace(/(.{2})/g,"$1 ").trim(),this.length>e&&(i+=" ... "),"<Buffer "+i+">"},s&&(o.prototype[s]=o.prototype.inspect),o.prototype.compare=function(t,i,e,s,n){if($(t,T)&&(t=o.from(t,t.offset,t.byteLength)),!o.isBuffer(t))throw new k('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===i&&(i=0),void 0===e&&(e=t?t.length:0),void 0===s&&(s=0),void 0===n&&(n=this.length),i<0||e>t.length||s<0||n>this.length)throw new RangeError("out of range index");if(s>=n&&i>=e)return 0;if(s>=n)return-1;if(i>=e)return 1;if(this===t)return 0;let r=(n>>>=0)-(s>>>=0),h=(e>>>=0)-(i>>>=0);const a=x.min(r,h),u=this.slice(s,n),c=t.slice(i,e);for(let t=0;t<a;++t)if(u[t]!==c[t]){r=u[t],h=c[t];break}return r<h?-1:h<r?1:0},o.prototype.includes=function(t,i,e){return-1!==this.indexOf(t,i,e)},o.prototype.indexOf=function(t,i,e){return w(this,t,i,e,!0)},o.prototype.lastIndexOf=function(t,i,e){return w(this,t,i,e,!1)},o.prototype.write=function(t,i,e,s){if(void 0===i)s="utf8",e=this.length,i=0;else if(void 0===e&&"string"==typeof i)s=i,e=this.length,i=0;else{if(!isFinite(i))throw new b("Buffer.write(string, encoding, offset[, length]) is no longer supported");i>>>=0,isFinite(e)?(e>>>=0,void 0===s&&(s="utf8")):(s=e,e=void 0)}const n=this.length-i;if((void 0===e||e>n)&&(e=n),t.length>0&&(e<0||i<0)||i>this.length)throw new RangeError("Attempt to write outside buffer bounds");s||(s="utf8");let r=!1;for(;;)switch(s){case"hex":return p(this,t,i,e);case"utf8":case"utf-8":return A(this,t,i,e);case"ascii":case"latin1":case"binary":return y(this,t,i,e);case"base64":return M(this,t,i,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,t,i,e);default:if(r)throw new k("Unknown encoding: "+s);s=(""+s).toLowerCase(),r=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this.yv||this,0)}};const D=4096;function E(t,i,e){let s="";e=x.min(t.length,e);for(let n=i;n<e;++n)s+=String.fromCharCode(127&t[n]);return s}function L(t,i,e){let s="";e=x.min(t.length,e);for(let n=i;n<e;++n)s+=String.fromCharCode(t[n]);return s}function j(t,i,e){const s=t.length;(!i||i<0)&&(i=0),(!e||e<0||e>s)&&(e=s);let n="";for(let s=i;s<e;++s)n+=it[t[s]];return n}function O(t,i,e){const s=t.slice(i,e);let n="";for(let t=0;t<s.length-1;t+=2)n+=String.fromCharCode(s[t]+256*s[t+1]);return n}function R(t,i,e){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+i>e)throw new RangeError("Trying to access beyond buffer length")}function P(t,i,e,s,n,r){if(!o.isBuffer(t))throw new k('"buffer" argument must be a Buffer instance');if(i>n||i<r)throw new RangeError('"value" argument is out of bounds');if(e+s>t.length)throw new RangeError("Index out of range")}function z(t,i,e,s,n){W(i,s,n,t,e,7);let r=Number(i&BigInt(4294967295));t[e++]=r,r>>=8,t[e++]=r,r>>=8,t[e++]=r,r>>=8,t[e++]=r;let o=Number(i>>BigInt(32)&BigInt(4294967295));return t[e++]=o,o>>=8,t[e++]=o,o>>=8,t[e++]=o,o>>=8,t[e++]=o,e}function B(t,i,e,s,n){W(i,s,n,t,e,7);let r=Number(i&BigInt(4294967295));t[e+7]=r,r>>=8,t[e+6]=r,r>>=8,t[e+5]=r,r>>=8,t[e+4]=r;let o=Number(i>>BigInt(32)&BigInt(4294967295));return t[e+3]=o,o>>=8,t[e+2]=o,o>>=8,t[e+1]=o,o>>=8,t[e]=o,e+8}function U(t,i,e,s,n,r){if(e+s>t.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function Q(t,i,s,n,r){return i=+i,s>>>=0,r||U(t,0,s,4),e.write(t,i,s,n,23,4),s+4}function F(t,i,s,n,r){return i=+i,s>>>=0,r||U(t,0,s,8),e.write(t,i,s,n,52,8),s+8}o.prototype.slice=function(t,i){const e=this.length;(t=~~t)<0?(t+=e)<0&&(t=0):t>e&&(t=e),(i=void 0===i?e:~~i)<0?(i+=e)<0&&(i=0):i>e&&(i=e),i<t&&(i=t);const s=this.subarray(t,i);return _.setPrototypeOf(s,o.prototype),s},o.prototype.readUintLE=o.prototype.readUIntLE=function(t,i,e){t>>>=0,i>>>=0,e||R(t,i,this.length);let s=this[t],n=1,r=0;for(;++r<i&&(n*=256);)s+=this[t+r]*n;return s},o.prototype.readUintBE=o.prototype.readUIntBE=function(t,i,e){t>>>=0,i>>>=0,e||R(t,i,this.length);let s=this[t+--i],n=1;for(;i>0&&(n*=256);)s+=this[t+--i]*n;return s},o.prototype.readUint8=o.prototype.readUInt8=function(t,i){return t>>>=0,i||R(t,1,this.length),this[t]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(t,i){return t>>>=0,i||R(t,2,this.length),this[t]|this[t+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(t,i){return t>>>=0,i||R(t,2,this.length),this[t]<<8|this[t+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(t,i){return t>>>=0,i||R(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(t,i){return t>>>=0,i||R(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},o.prototype.readBigUInt64LE=et((function(t){Z(t>>>=0,"offset");const i=this[t],e=this[t+7];(void 0===i||void 0===e)&&H(t,this.length-8);const s=i+256*this[++t]+65536*this[++t]+this[++t]*2**24,n=this[++t]+256*this[++t]+65536*this[++t]+e*2**24;return BigInt(s)+(BigInt(n)<<BigInt(32))})),o.prototype.readBigUInt64BE=et((function(t){Z(t>>>=0,"offset");const i=this[t],e=this[t+7];(void 0===i||void 0===e)&&H(t,this.length-8);const s=i*2**24+65536*this[++t]+256*this[++t]+this[++t],n=this[++t]*2**24+65536*this[++t]+256*this[++t]+e;return(BigInt(s)<<BigInt(32))+BigInt(n)})),o.prototype.readIntLE=function(t,i,e){t>>>=0,i>>>=0,e||R(t,i,this.length);let s=this[t],n=1,r=0;for(;++r<i&&(n*=256);)s+=this[t+r]*n;return n*=128,s>=n&&(s-=x.pow(2,8*i)),s},o.prototype.readIntBE=function(t,i,e){t>>>=0,i>>>=0,e||R(t,i,this.length);let s=i,n=1,r=this[t+--s];for(;s>0&&(n*=256);)r+=this[t+--s]*n;return n*=128,r>=n&&(r-=x.pow(2,8*i)),r},o.prototype.readInt8=function(t,i){return t>>>=0,i||R(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},o.prototype.readInt16LE=function(t,i){t>>>=0,i||R(t,2,this.length);const e=this[t]|this[t+1]<<8;return 32768&e?4294901760|e:e},o.prototype.readInt16BE=function(t,i){t>>>=0,i||R(t,2,this.length);const e=this[t+1]|this[t]<<8;return 32768&e?4294901760|e:e},o.prototype.readInt32LE=function(t,i){return t>>>=0,i||R(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},o.prototype.readInt32BE=function(t,i){return t>>>=0,i||R(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},o.prototype.readBigInt64LE=et((function(t){Z(t>>>=0,"offset");const i=this[t],e=this[t+7];(void 0===i||void 0===e)&&H(t,this.length-8);const s=this[t+4]+256*this[t+5]+65536*this[t+6]+(e<<24);return(BigInt(s)<<BigInt(32))+BigInt(i+256*this[++t]+65536*this[++t]+this[++t]*2**24)})),o.prototype.readBigInt64BE=et((function(t){Z(t>>>=0,"offset");const i=this[t],e=this[t+7];(void 0===i||void 0===e)&&H(t,this.length-8);const s=(i<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(s)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+e)})),o.prototype.readFloatLE=function(t,i){return t>>>=0,i||R(t,4,this.length),e.read(this,t,!0,23,4)},o.prototype.readFloatBE=function(t,i){return t>>>=0,i||R(t,4,this.length),e.read(this,t,!1,23,4)},o.prototype.readDoubleLE=function(t,i){return t>>>=0,i||R(t,8,this.length),e.read(this,t,!0,52,8)},o.prototype.readDoubleBE=function(t,i){return t>>>=0,i||R(t,8,this.length),e.read(this,t,!1,52,8)},o.prototype.writeUintLE=o.prototype.writeUIntLE=function(t,i,e,s){t=+t,i>>>=0,e>>>=0,s||P(this,t,i,e,x.pow(2,8*e)-1,0);let n=1,r=0;for(this[i]=255&t;++r<e&&(n*=256);)this[i+r]=t/n&255;return i+e},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(t,i,e,s){t=+t,i>>>=0,e>>>=0,s||P(this,t,i,e,x.pow(2,8*e)-1,0);let n=e-1,r=1;for(this[i+n]=255&t;--n>=0&&(r*=256);)this[i+n]=t/r&255;return i+e},o.prototype.writeUint8=o.prototype.writeUInt8=function(t,i,e){return t=+t,i>>>=0,e||P(this,t,i,1,255,0),this[i]=255&t,i+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(t,i,e){return t=+t,i>>>=0,e||P(this,t,i,2,65535,0),this[i]=255&t,this[i+1]=t>>>8,i+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(t,i,e){return t=+t,i>>>=0,e||P(this,t,i,2,65535,0),this[i]=t>>>8,this[i+1]=255&t,i+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(t,i,e){return t=+t,i>>>=0,e||P(this,t,i,4,4294967295,0),this[i+3]=t>>>24,this[i+2]=t>>>16,this[i+1]=t>>>8,this[i]=255&t,i+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(t,i,e){return t=+t,i>>>=0,e||P(this,t,i,4,4294967295,0),this[i]=t>>>24,this[i+1]=t>>>16,this[i+2]=t>>>8,this[i+3]=255&t,i+4},o.prototype.writeBigUInt64LE=et((function(t,i){return void 0===i&&(i=0),z(this,t,i,BigInt(0),BigInt("0xffffffffffffffff"))})),o.prototype.writeBigUInt64BE=et((function(t,i){return void 0===i&&(i=0),B(this,t,i,BigInt(0),BigInt("0xffffffffffffffff"))})),o.prototype.writeIntLE=function(t,i,e,s){if(t=+t,i>>>=0,!s){const s=x.pow(2,8*e-1);P(this,t,i,e,s-1,-s)}let n=0,r=1,o=0;for(this[i]=255&t;++n<e&&(r*=256);)t<0&&0===o&&0!==this[i+n-1]&&(o=1),this[i+n]=(t/r>>0)-o&255;return i+e},o.prototype.writeIntBE=function(t,i,e,s){if(t=+t,i>>>=0,!s){const s=x.pow(2,8*e-1);P(this,t,i,e,s-1,-s)}let n=e-1,r=1,o=0;for(this[i+n]=255&t;--n>=0&&(r*=256);)t<0&&0===o&&0!==this[i+n+1]&&(o=1),this[i+n]=(t/r>>0)-o&255;return i+e},o.prototype.writeInt8=function(t,i,e){return t=+t,i>>>=0,e||P(this,t,i,1,127,-128),t<0&&(t=255+t+1),this[i]=255&t,i+1},o.prototype.writeInt16LE=function(t,i,e){return t=+t,i>>>=0,e||P(this,t,i,2,32767,-32768),this[i]=255&t,this[i+1]=t>>>8,i+2},o.prototype.writeInt16BE=function(t,i,e){return t=+t,i>>>=0,e||P(this,t,i,2,32767,-32768),this[i]=t>>>8,this[i+1]=255&t,i+2},o.prototype.writeInt32LE=function(t,i,e){return t=+t,i>>>=0,e||P(this,t,i,4,2147483647,-2147483648),this[i]=255&t,this[i+1]=t>>>8,this[i+2]=t>>>16,this[i+3]=t>>>24,i+4},o.prototype.writeInt32BE=function(t,i,e){return t=+t,i>>>=0,e||P(this,t,i,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[i]=t>>>24,this[i+1]=t>>>16,this[i+2]=t>>>8,this[i+3]=255&t,i+4},o.prototype.writeBigInt64LE=et((function(t,i){return void 0===i&&(i=0),z(this,t,i,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),o.prototype.writeBigInt64BE=et((function(t,i){return void 0===i&&(i=0),B(this,t,i,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),o.prototype.writeFloatLE=function(t,i,e){return Q(this,t,i,!0,e)},o.prototype.writeFloatBE=function(t,i,e){return Q(this,t,i,!1,e)},o.prototype.writeDoubleLE=function(t,i,e){return F(this,t,i,!0,e)},o.prototype.writeDoubleBE=function(t,i,e){return F(this,t,i,!1,e)},o.prototype.copy=function(t,i,e,s){if(!o.isBuffer(t))throw new k("argument should be a Buffer");if(e||(e=0),!s&&0!==s&&(s=this.length),i>=t.length&&(i=t.length),i||(i=0),s>0&&s<e&&(s=e),s===e||0===t.length||0===this.length)return 0;if(i<0)throw new RangeError("targetStart out of bounds");if(e<0||e>=this.length)throw new RangeError("Index out of range");if(s<0)throw new RangeError("sourceEnd out of bounds");s>this.length&&(s=this.length),t.length-i<s-e&&(s=t.length-i+e);const n=s-e;return this===t&&"function"==typeof T.prototype.copyWithin?this.copyWithin(i,e,s):T.prototype.set.call(t,this.subarray(e,s),i),n},o.prototype.fill=function(t,i,e,s){if("string"==typeof t){if("string"==typeof i?(s=i,i=0,e=this.length):"string"==typeof e&&(s=e,e=this.length),void 0!==s&&"string"!=typeof s)throw new k("encoding must be a string");if("string"==typeof s&&!o.isEncoding(s))throw new k("Unknown encoding: "+s);if(1===t.length){const i=t.charCodeAt(0);("utf8"===s&&i<128||"latin1"===s)&&(t=i)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(i<0||this.length<i||this.length<e)throw new RangeError("Out of range index");if(e<=i)return this;let n;if(i>>>=0,e=void 0===e?this.length:e>>>0,t||(t=0),"number"==typeof t)for(n=i;n<e;++n)this[n]=t;else{const r=o.isBuffer(t)?t:o.from(t,s),h=r.length;if(0===h)throw new k('The value "'+t+'" is invalid for argument "value"');for(n=0;n<e-i;++n)this[n+i]=r[n%h]}return this};const Y={};function V(t,i,e){Y[t]=class extends e{get code(){return t}set code(t){_.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return"".concat(this.name," [").concat(t,"]: ").concat(this.message)}constructor(){super(),_.defineProperty(this,"message",{value:i.apply(this,arguments),writable:!0,configurable:!0}),this.name="".concat(this.name," [").concat(t,"]"),this.stack,delete this.name}}}function G(t){let i="",e=t.length;const s="-"===t[0]?1:0;for(;e>=s+4;e-=3)i="_".concat(t.slice(e-3,e)).concat(i);return"".concat(t.slice(0,e)).concat(i)}function W(t,i,e,s,n,r){if(t>e||t<i){const e="bigint"==typeof i?"n":"";let s;throw s=0===i||i===BigInt(0)?">= 0".concat(e," and < 2").concat(e," ** ").concat(8*(r+1)).concat(e):">= -(2".concat(e," ** ").concat(8*(r+1)-1).concat(e,") and < 2 ** ")+"".concat(8*(r+1)-1).concat(e),new Y.ERR_OUT_OF_RANGE("value",s,t)}!function(t,i,e){Z(i,"offset"),(void 0===t[i]||void 0===t[i+e])&&H(i,t.length-(e+1))}(s,n,r)}function Z(t,i){if("number"!=typeof t)throw new Y.ERR_INVALID_ARG_TYPE(i,"number",t)}function H(t,i,e){throw x.floor(t)!==t?(Z(t,e),new Y.ERR_OUT_OF_RANGE("offset","an integer",t)):i<0?new Y.ERR_BUFFER_OUT_OF_BOUNDS:new Y.ERR_OUT_OF_RANGE("offset",">= 0 and <= ".concat(i),t)}V("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?"".concat(t," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"}),RangeError),V("ERR_INVALID_ARG_TYPE",(function(t,i){return'The "'.concat(t,'" argument must be of type number. Received type ').concat(typeof i)}),k),V("ERR_OUT_OF_RANGE",(function(t,i,e){let s='The value of "'.concat(t,'" is out of range.'),n=e;return Number.isInteger(e)&&x.abs(e)>2**32?n=G(String(e)):"bigint"==typeof e&&(n=String(e),(e>BigInt(2)**BigInt(32)||e<-(BigInt(2)**BigInt(32)))&&(n=G(n)),n+="n"),s+=" It must be ".concat(i,". Received ").concat(n),s}),RangeError);const X=/[^+/0-9A-Za-z-_]/g;function q(t,i){let e;i=i||1/0;const s=t.length;let n=null;const r=[];for(let o=0;o<s;++o){if(e=t.charCodeAt(o),e>55295&&e<57344){if(!n){if(e>56319){(i-=3)>-1&&r.push(239,191,189);continue}if(o+1===s){(i-=3)>-1&&r.push(239,191,189);continue}n=e;continue}if(e<56320){(i-=3)>-1&&r.push(239,191,189),n=e;continue}e=65536+(n-55296<<10|e-56320)}else n&&(i-=3)>-1&&r.push(239,191,189);if(n=null,e<128){if((i-=1)<0)break;r.push(e)}else if(e<2048){if((i-=2)<0)break;r.push(e>>6|192,63&e|128)}else if(e<65536){if((i-=3)<0)break;r.push(e>>12|224,e>>6&63|128,63&e|128)}else{if(!(e<1114112))throw new b("Invalid code point");if((i-=4)<0)break;r.push(e>>18|240,e>>12&63|128,e>>6&63|128,63&e|128)}}return r}function K(t){return i.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(X,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function J(t,i,e,s){let n;for(n=0;n<s&&!(n+e>=i.length||n>=t.length);++n)i[n+e]=t[n];return n}function $(t,i){return t instanceof i||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===i.name}function tt(t){return t!=t}const it=function(){const t="0123456789abcdef",i=new Array(256);for(let e=0;e<16;++e){const s=16*e;for(let n=0;n<16;++n)i[s+n]=t[e]+t[n]}return i}();function et(t){return typeof BigInt>"u"?st:t}function st(){throw new b("BigInt not supported")}})(gi),function(t,i){var e=gi,s=e.Buffer;function n(t,i){for(var e in t)i[e]=t[e]}function r(t,i,e){return s(t,i,e)}s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?t.exports=e:(n(e,i),i.Buffer=r),r.prototype=_.create(s.prototype),n(s,r),r.from=function(t,i,e){if("number"==typeof t)throw new k("Argument must not be a number");return s(t,i,e)},r.alloc=function(t,i,e){if("number"!=typeof t)throw new k("Argument must be a number");var n=s(t);return void 0!==i?"string"==typeof e?n.fill(i,e):n.fill(i):n.fill(0),n},r.allocUnsafe=function(t){if("number"!=typeof t)throw new k("Argument must be a number");return s(t)},r.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new k("Argument must be a number");return e.SlowBuffer(t)}}(fi,fi.exports);var Si=65536,Ni=fi.exports.Buffer,Ii=p.crypto||p.msCrypto;Ii&&Ii.getRandomValues?di.exports=function(t,i){if(t>4294967295)throw new RangeError("requested too many random bytes");var e=Ni.allocUnsafe(t);if(t>0)if(t>Si)for(var s=0;s<t;s+=Si)Ii.getRandomValues(e.slice(s,s+Si));else Ii.getRandomValues(e);return"function"==typeof i?process.nextTick((function(){i(null,e)})):e}:di.exports=function(){throw new b("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")};const Di=di.exports;let Ei=class t{clone(){const i=new t(this.ufrag,this.pwd);return i.setLite(this.lite),i.setEndOfCandidates(this.endOfCandidates),i}plain(){const t={ufrag:this.ufrag,pwd:this.pwd};return this.lite&&(t.lite=this.lite),this.endOfCandidates&&(t.endOfCandidates=this.endOfCandidates),t}getUfrag(){return this.ufrag}getPwd(){return this.pwd}isLite(){return this.lite}setLite(t){this.lite=t}isEndOfCandidates(){return this.endOfCandidates}setEndOfCandidates(t){this.endOfCandidates=t}constructor(t,i){this.ufrag=t,this.pwd=i,this.lite=!1,this.endOfCandidates=!1}};Ei.generate=function(t){const i=new Ei,e=Di(8),s=Di(24);return i.ufrag=e.toString("hex"),i.pwd=s.toString("hex"),i.lite=t,i},Ei.expand=function(t){if("ICEInfo"===t.constructor.name)return t;const i=new Ei(t.ufrag,t.pwd);return i.setLite(t.lite),i.setEndOfCandidates(t.endOfCandidates),i},Ei.clone=function(t){return"ICEInfo"===t.constructor.name?t.clone():Ei.expand(t)};var ki=Ei;const xi=ni("SEND","RECV");xi.byValue=function(t){return xi[t.toUpperCase()]},xi.toString=function(t){switch(t){case xi.SEND:return"send";case xi.RECV:return"recv"}},xi.reverse=function(t){switch(t){case xi.SEND:return xi.RECV;case xi.RECV:return xi.SEND}};var Li=xi;const Ci=Li;let ji=class t{clone(){var i=new t(this.id,this.direction);return i.setFormats(this.formats),i.setParams(this.params),i}plain(){var t={id:this.id,direction:Ci.toString(this.direction)};for(var[i,e]of(this.formats&&(t.formats=this.formats),this.params.entries()))t.params||(t.params={}),t.params[i]=e;return t}getId(){return this.id}getDirection(){return this.direction}setDirection(t){this.direction=t}getFormats(){return this.formats}setFormats(t){this.formats=[];for(let i=0;i<t.length;++i)this.formats.push(C(t[i]))}getParams(){return this.params}setParams(t){this.params=new Map(t)}addParam(t,i){this.params.set(t,i)}constructor(t,i){this.id=t,this.direction=i,this.formats=[],this.params=new Map}};ji.expand=function(t){if("RIDInfo"===t.constructor.name)return t;const i=new ji(t.id,Ci.byValue(t.direction));for(const[e,s]of _.entries(t.params||{}))i.addParam(e,s);return t.formats&&i.setFormats(t.formats),i},ji.clone=function(t){return"RIDInfo"===t.constructor.name?t.clone():ji.expand(t)};var Oi=ji;let Ri=class t{clone(){return new t(this.id,this.paused)}plain(){return{id:this.id,paused:this.paused}}isPaused(){return this.paused}getId(){return this.id}constructor(t,i){this.paused=i,this.id=t}};Ri.expand=function(t){return"SimulcastStreamInfo"===t.constructor.name?t:new Ri(t.id,t.paused)},Ri.clone=function(t){return"SimulcastStreamInfo"===t.constructor.name?t.clone():Ri.expand(t)};var Pi=Ri;const zi=Pi,Bi=Li;let Ui=class t{clone(){const i=new t;for(const t of this.send)i.addSimulcastAlternativeStreams(Bi.SEND,t.map((t=>t.clone())));for(const t of this.recv)i.addSimulcastAlternativeStreams(Bi.RECV,t.map((t=>t.clone())));return i}plain(){const t={send:[],recv:[]};for(const i of this.send)t.send.push(i.map((t=>t.plain())));for(const i of this.recv)t.recv.push(i.map((t=>t.plain())));return t}addSimulcastAlternativeStreams(t,i){return t===Bi.SEND?this.send.push(i):this.recv.push(i)}addSimulcastStream(t,i){return t===Bi.SEND?this.send.push([i]):this.recv.push([i])}getSimulcastStreams(t){return t===Bi.SEND?this.send:this.recv}constructor(){this.send=[],this.recv=[]}};Ui.expand=function(t){if("SimulcastInfo"===t.constructor.name)return t;const i=new Ui;for(const e of t.send||[])i.addSimulcastAlternativeStreams(Bi.SEND,e.map(zi.expand));for(const e of t.recv||[])i.addSimulcastAlternativeStreams(Bi.RECV,e.map(zi.expand));return i},Ui.clone=function(t){return"SimulcastInfo"===t.constructor.name?t.clone():Ui.expand(t)};var Qi=Ui;const Fi=ni("SENDRECV","SENDONLY","RECVONLY","INACTIVE");Fi.byValue=function(t){return Fi[t.toUpperCase()]},Fi.toString=function(t){switch(t){case Fi.SENDRECV:return"sendrecv";case Fi.SENDONLY:return"sendonly";case Fi.RECVONLY:return"recvonly";case Fi.INACTIVE:return"inactive"}},Fi.reverse=function(t){switch(t){case Fi.SENDRECV:return Fi.SENDRECV;case Fi.SENDONLY:return Fi.RECVONLY;case Fi.RECVONLY:return Fi.SENDONLY;case Fi.INACTIVE:return Fi.INACTIVE}};var Yi=Fi;let Vi=class t{clone(){return new t(this.port,this.maxMessageSize)}plain(){return{port:this.port,maxMessageSize:this.maxMessageSize}}getPort(){return this.port}getMaxMessageSize(){return this.maxMessageSize}constructor(t,i){this.port=t,this.maxMessageSize=i}};Vi.expand=function(t){return"DataChannelInfo"===t.constructor.name?t:new Vi(t.port,t.maxMessageSize)},Vi.clone=function(t){return"DataChannelInfo"===t.constructor.name?t.clone():Vi.expand(t)};var Gi=Vi;const Wi=si,Zi=Oi,Hi=Qi,Xi=Yi,qi=Li,Ki=Gi;let Ji=class t{clone(){const i=new t(this.id,this.type);i.setDirection(this.direction),i.setBitrate(this.bitrate);for(const t of this.codecs.values())i.addCodec(t.clone());for(const[t,e]of this.extensions.entries())i.addExtension(t,e);for(const t of this.rids.values())i.addRID(t.clone());return this.simulcast&&i.setSimulcast(this.simulcast.clone()),this.control&&i.setControl(this.control),this.dataChannel&&i.setDataChannel(this.dataChannel.clone()),i}plain(){const t={id:this.id,type:this.type,direction:Xi.toString(this.direction),codecs:[]};this.dataChannel&&(t.dataChannel=this.dataChannel.plain()),this.bitrate&&(t.bitrate=this.bitrate);for(const i of this.codecs.values())t.codecs.push(i.plain());for(const[i,e]of this.extensions.entries())t.extensions||(t.extensions={}),t.extensions[i]=e;for(const i of this.rids.values())t.rids||(t.rids=[]),t.rids.push(i.plain());return this.simulcast&&(t.simulcast=this.simulcast.plain()),this.control&&(t.control=this.control),t}getType(){return this.type}getId(){return this.id}setId(t){this.id=t}addExtension(t,i){this.extensions.set(t,i)}addRID(t){this.rids.set(t.getId(),t)}addCodec(t){this.codecs.set(t.getType(),t)}setCodecs(t){this.codecs=t}getCodecForType(t){return this.codecs.get(t)}getCodec(t){for(const i of this.codecs.values())if(i.getCodec().toLowerCase()===t.toLowerCase())return i;return null}hasCodec(t){return null!==this.getCodec(t)}getCodecs(){return this.codecs}hasRTX(){for(const t of this.codecs.values())if(t.hasRTX())return!0;return!1}getExtensions(){return this.extensions}getRIDs(){return this.rids}getRID(t){return this.rids.get(t)}getBitrate(){return this.bitrate}setBitrate(t){this.bitrate=t}getDirection(){return this.direction}setDirection(t){this.direction=t}hasControl(){return!!this.control}getControl(){return this.control}setControl(t){this.control=t}hasDataChannel(){return!!this.dataChannel}getDataChannel(){return this.dataChannel}setDataChannel(t){this.dataChannel=t}answer(i){const e=new t(this.id,this.type);if(i){e.setDirection(Xi.reverse(this.direction));const{codecs:t,dataChannel:s}=i;if(t){let s;s=Array.isArray(t)?Wi.MapFromNames(t,i.rtx,i.rtcpfbs):t;for(let t of this.codecs.values())for(let i of s.values()){if(i.getCodec().toLowerCase()!==t.getCodec().toLowerCase()||"h264"===i.getCodec()&&i.hasParam("packetization-mode")&&i.getParam("packetization-mode")!=t.getParam("packetization-mode","0")||"h264"===i.getCodec()&&i.hasParam("profile-level-id")&&t.hasParam("profile-level-id")&&i.getParam("profile-level-id")!=t.getParam("profile-level-id")||"multiopus"===i.getCodec()&&i.hasParam("num_streams")&&t.hasParam("num_streams")&&i.getParam("num_streams")!=t.getParam("num_streams"))continue;const s=i.clone();s.setType(t.getType()),s.hasRTX()&&s.setRTX(t.getRTX()),t.hasChannels()&&s.setChannels(t.getChannels()),s.addParams(t.getParams()),e.addCodec(s);break}}const n=new Set(i.extensions);for(let[t,i]of this.extensions)n.has(i)&&e.addExtension(t,i);if(i.simulcast&&this.simulcast){const t=new Hi,i=this.simulcast.getSimulcastStreams(qi.SEND);if(i)for(const e of i){const i=e.map((t=>t.clone()));t.addSimulcastAlternativeStreams(qi.RECV,i)}const s=this.simulcast.getSimulcastStreams(qi.RECV);if(s)for(const i of s){const e=i.map((t=>t.clone()));t.addSimulcastAlternativeStreams(qi.SEND,e)}for(const t of this.rids.values()){const i=t.clone();i.setDirection(qi.reverse(t.getDirection())),e.addRID(i)}e.setSimulcast(t)}if(s&&this.dataChannel){const t=new Ki(this.dataChannel.getPort(),s.maxMessageSize?s.maxMessageSize:this.dataChannel.getMaxMessageSize());e.setDataChannel(t)}}else e.setDirection(Xi.INACTIVE);return e}getSimulcast(){return this.simulcast}setSimulcast(t){this.simulcast=t}constructor(t,i){this.id=t,this.type=i,this.direction=Xi.SENDRECV,this.extensions=new Map,this.codecs=new Map,this.rids=new Map,this.simulcast=null,this.bitrate=0,this.control=null,this.dataChannel=null}};function $i(t){const i=t.toString();if(!/^\d+$/.test(i))throw new b("invalid integer ".concat(i));return C(i)}Ji.create=function(t,i,e){!e&&"string"!=typeof i&&(e=i,i=t);const s=new Ji(t,i);if(e){const{codecs:t}=e;t&&(Array.isArray(t)?s.setCodecs(Wi.MapFromNames(t,e.rtx,e.rtcpfbs)):s.setCodecs(t))}else s.setDirection(Xi.INACTIVE);return s},Ji.expand=function(t){if("MediaInfo"===t.constructor.name)return t;const i=new Ji(t.id,t.type);if(t.direction&&i.setDirection(Xi.byValue(t.direction)),i.setBitrate(t.bitrate),t.dataChannel){const e=Ki.expand(t.dataChannel);e&&i.setDataChannel(e)}for(const[e,s]of _.entries(t.extensions))i.addExtension($i(e),s);for(const e of t.codecs){const t=Wi.expand(e);t&&i.addCodec(t)}for(const e of t.rids||[]){const t=Zi.expand(e);i.addRID(t)}return t.simulcast&&i.setSimulcast(Hi.expand(t.simulcast)),t.control&&i.setControl(t.control),i},Ji.clone=function(t){return"MediaInfo"===t.constructor.name?t.clone():Ji.expand(t)};var te=Ji;let ie=class t{clone(){return new t(this.semantics,this.ssrcs)}plain(){const t={semantics:this.semantics,ssrcs:[]};for(let i=0;i<this.ssrcs.length;++i)t.ssrcs.push(this.ssrcs[i]);return t}getSemantics(){return this.semantics}getSSRCs(){return this.ssrcs}constructor(t,i){this.semantics=t,this.ssrcs=[];for(let t=0;t<i.length;++t)this.ssrcs.push(C(i[t]))}};ie.expand=function(t){return"SourceGroupInfo"===t.constructor.name?t:new ie(t.semantics,t.ssrcs)},ie.clone=function(t){return"SourceGroupInfo"===t.constructor.name?t.clone():ie.expand(t)};var ee=ie;let se=class t{clone(){const i=new t(this.ssrc);return i.setCName(this.cname),i.setStreamId(this.streamId),i.setTrackId(this.trackId),i}plain(){const t={ssrc:this.ssrc};return this.cname&&(t.cname=this.cname),this.streamId&&(t.streamId=this.streamId),this.trackId&&(t.trackId=this.trackId),t}getCName(){return this.cname}setCName(t){this.cname=t}getStreamId(){return this.streamId}setStreamId(t){this.streamId=t}getTrackId(){return this.trackId}setTrackId(t){this.trackId=t}getSSRC(){return this.ssrc}constructor(t){this.ssrc=t}};se.expand=function(t){if("SourceInfo"===t.constructor.name)return t;const i=new se(t.ssrc);return i.setCName(t.cname),i.setStreamId(t.streamId),i.setTrackId(t.trackId),i},se.clone=function(t){return"SourceInfo"===t.constructor.name?t.clone():se.expand(t)};var ne=se;const re=si;let oe=class t{clone(){var i=new t(this.id,this.paused);for(let t of this.codecs.values())i.addCodec(t.clone());return i.setParams(this.params),i}plain(){var t={id:this.id,paused:this.paused,codecs:{},params:{}};for(var[i,e]of this.codecs.entries())t.codecs[i]=e.plain();for(var[i,s]of this.params.entries())t.params[i]=s;return t}getId(){return this.id}getCodecs(){return this.codecs}addCodec(t){this.codecs.set(t.getType(),t)}getParams(){return this.params}setParams(t){this.params=new Map(t)}addParam(t,i){this.params.set(t,i)}isPaused(){return this.paused}constructor(t,i=!1){this.id=t,this.paused=i,this.codecs=new Map,this.params=new Map}};oe.expand=function(t){if("TrackEncodingInfo"===t.constructor.name)return t;const i=new oe(t.id,t.paused);for(const e of _.values(t.codecs||{}))i.addCodec(re.expand(e));for(const[e,s]of _.entries(t.params||{}))i.addParam(e,s);return i},oe.clone=function(t){return"TrackEncodingInfo"===t.constructor.name?t.clone():oe.expand(t)};var he=oe;const ae=ee,ue=he;let ce=class t{clone(){const i=new t(this.media,this.id);this.mediaId&&i.setMediaId(this.mediaId);for(let t=0;t<this.ssrcs.length;++t)i.addSSRC(this.ssrcs[t]);for(let t=0;t<this.groups.length;++t)i.addSourceGroup(this.groups[t].clone());for(let t=0;t<this.encodings.length;++t){const e=[];for(let i=0;i<this.encodings[t].length;++i)e.push(this.encodings[t][i].clone());i.addAlternativeEncodings(e)}return i}plain(){const t={media:this.media,id:this.id,ssrcs:[]};this.mediaId&&(t.mediaId=this.mediaId);for(let i=0;i<this.ssrcs.length;++i)t.ssrcs.push(this.ssrcs[i]);for(let i=0;i<this.groups.length;++i)t.groups||(t.groups=[]),t.groups.push(this.groups[i].plain());for(let i=0;i<this.encodings.length;++i){const e=[];for(let t=0;t<this.encodings[i].length;++t)e.push(this.encodings[i][t].plain());e.length&&(t.encodings||(t.encodings=[]),t.encodings.push(e))}return t}getMedia(){return this.media}setMediaId(t){this.mediaId=t}getMediaId(){return this.mediaId}getId(){return this.id}addSSRC(t){this.ssrcs.push(t)}getSSRCs(){return this.ssrcs}addSourceGroup(t){this.groups.push(t)}getSourceGroup(t){for(const i of this.groups)if(i.getSemantics().toLowerCase()===t.toLowerCase())return i;return null}getSourceGroups(){return this.groups}getSourceGroupsForMediaSSRC(t){return this.groups.filter((i=>i.getSSRCs()[0]===t))}hasSourceGroup(t){for(const i of this.groups)if(i.getSemantics().toLowerCase()===t.toLowerCase())return!0;return!1}getEncodings(){return this.encodings}addEncoding(t){this.encodings.push([t])}addAlternativeEncodings(t){this.encodings.push(t)}setEncodings(t){this.encodings=t}getEncodingSources(){const t=[];if(this.encodings.length)for(const i of this.encodings)for(const e of i){const i={id:e.getId(),rid:e.getId()},s=e.getParams(),n=null==s?void 0:s.get("ssrc");if(void 0!==n){i.media=C(n);for(const t of this.getSourceGroupsForMediaSSRC(i.media))switch(t.getSemantics()){case"FID":i.rtx=t.getSSRCs()[1];break;case"FEC-FR":i.fec=t.getSSRCs()[1]}}t.push(i)}else if(this.hasSourceGroup("SIM")){const i=this.getSourceGroup("SIM").getSSRCs();this.getSourceGroups();for(const e of i){const i={id:String(e),media:e};for(const t of this.getSourceGroupsForMediaSSRC(i.media))switch(t.getSemantics()){case"FID":i.rtx=t.getSSRCs()[1];break;case"FEC-FR":i.fec=t.getSSRCs()[1]}t.push(i)}}else{const i={id:""};if(this.ssrcs.length){i.media=this.ssrcs[0];for(const t of this.getSourceGroupsForMediaSSRC(i.media))switch(t.getSemantics()){case"FID":i.rtx=t.getSSRCs()[1];break;case"FEC-FR":i.fec=t.getSSRCs()[1]}}t.push(i)}return t}constructor(t,i){this.media=t,this.id=i,this.ssrcs=[],this.groups=[],this.encodings=[]}};ce.expand=function(t){var i,e;if("TrackInfo"===t.constructor.name)return t;const s=new ce(t.media,t.id);if(t.mediaId&&s.setMediaId(t.mediaId),Array.isArray(t.ssrcs))for(const i of t.ssrcs)s.addSSRC(i);else if(void 0!==(null===(i=t.ssrcs)||void 0===i?void 0:i.media)){const i=t.ssrcs.media;if(s.addSSRC(i),void 0!==t.ssrcs.rtx){const e=t.ssrcs.rtx;s.addSSRC(e),s.addSourceGroup(new ae("FID",[i,e]))}if(void 0!==t.ssrcs.fec){const e=t.ssrcs.fec;s.addSSRC(e),s.addSourceGroup(new ae("FEC-FR",[i,e]))}}if(t.rid){const i=new ue(t.rid);void 0!==(null===(e=t.ssrcs)||void 0===e?void 0:e.media)&&i.addParam("ssrc",t.ssrcs.media),s.addAlternativeEncodings([i])}for(const i of t.groups||[])s.addSourceGroup(ae.expand(i));for(const i of t.encodings||[]){const t=[];for(const e of i)t.push(ue.expand(e));s.addAlternativeEncodings(t)}return s},ce.clone=function(t){return"TrackInfo"===t.constructor.name?t.clone():ce.expand(t)};var le=ce;const de=le;let fe=class t{clone(){const i=new t(this.id);for(const t of this.tracks.values())i.addTrack(t.clone());return i}plain(){const t={id:this.id,tracks:[]};for(const i of this.tracks.values())t.tracks.push(i.plain());return t}getId(){return this.id}addTrack(t){this.tracks.set(t.getId(),t)}removeTrack(t){return this.tracks.delete(t.getId())}removeTrackById(t){return this.tracks.delete(t)}getFirstTrack(t){for(let i of this.tracks.values())if(i.getMedia().toLowerCase()===t.toLowerCase())return i;return null}getTracks(){return this.tracks}removeAllTracks(){this.tracks.clear()}getTrack(t){return this.tracks.get(t)}constructor(t){this.id=t,this.tracks=new Map}};fe.expand=function(t){if("StreamInfo"===t.constructor.name)return t;const i=new fe(t.id);for(const e of t.tracks||[]){const t=de.expand(e);t&&i.addTrack(t)}return i},fe.clone=function(t){return"StreamInfo"===t.constructor.name?t.clone():fe.expand(t)};var ge=fe;const _e=zt,ve=function(t){const i=new Intl.Collator(t,{sensitivity:"base"});return(t,e)=>0==i.compare(t,e)}("en-US"),we=Jt,me=si,pe=ti,Ae=ui,ye=li,be=ki,Me=te,Te=oi,Se=Yi,Ne=Li,Ie=ee,De=ne,Ee=ge,ke=le,xe=he,Le=Qi,Ce=Pi,je=Oi,Oe=Gi;let Re=class t{clone(){const i=new t(this.version);for(const t of this.medias)i.addMedia(t.clone());for(const t of this.streams.values())i.addStream(t.clone());for(const t of this.candidates)i.addCandidate(t.clone());return i.setICE(this.ice.clone()),this.dtls&&i.setDTLS(this.dtls.clone()),this.crypto&&i.setCrypto(this.crypto.clone()),i.setExtmapAllowMixed(this.extmapAllowMixed),i}plain(){const t={version:this.version,streams:[],medias:[],candidates:[]};for(const i of this.medias)t.medias.push(i.plain());for(const i of this.streams.values())t.streams.push(i.plain());for(const i of this.candidates)t.candidates.push(i.plain());return this.ice&&(t.ice=this.ice.plain()),this.dtls&&(t.dtls=this.dtls.plain()),this.crypto&&(t.crypto=this.crypto.plain()),this.extmapAllowMixed||(t.extmapAllowMixedNotSupported=!this.extmapAllowMixed),t}unify(){const i=new t(this.version);for(const t of this.medias)i.addMedia(t.clone());const e={audio:i.getMediasByType("audio"),video:i.getMediasByType("video")};for(const t of this.streams.values()){const s=t.clone();for(const t of s.getTracks().values()){let s=e[t.getMedia()].pop();s||(s=this.getMedia(t.getMedia()).clone(),s.setId(t.getId()),i.addMedia(s)),t.setMediaId(s.getId())}i.addStream(s)}for(const t of this.candidates)i.addCandidate(t.clone());return this.ice&&i.setICE(this.ice.clone()),this.dtls&&i.setDTLS(this.dtls.clone()),this.crypto&&i.setCrypto(this.crypto.clone()),i}setVersion(t){this.version=t}addMedia(t){this.medias.push(t)}getMedia(t){for(let i in this.medias){let e=this.medias[i];if(ve(e.getType(),t))return e}return null}getMediasByType(t){let i=[];for(let e in this.medias){let s=this.medias[e];ve(s.getType(),t)&&i.push(s)}return i}getMediaById(t){for(const i of this.medias)if(ve(i.getId(),t))return i;return null}replaceMedia(t){for(let i in this.medias)if(this.medias[i].getId()==t.getId())return this.medias[i]=t,!0;return!1}getMedias(){return this.medias}getVersion(){return this.version}getDTLS(){return this.dtls}setDTLS(t){this.dtls=t}hasCrypto(){return!!this.crypto}getCrypto(){return this.crypto}setCrypto(t){this.crypto=t}hasICE(){return!!this.ice}getICE(){return this.ice}setICE(t){this.ice=t}addCandidate(t){for(const i of this.candidates)if(i.equals(t))return;this.candidates.push(t)}addCandidates(t){for(const i of t)this.addCandidate(i)}getCandidates(){return this.candidates}getStream(t){return this.streams.get(t)}getStreams(){return this.streams}getFirstStream(){for(const t of this.streams.values())return t;return null}addStream(t){this.streams.set(t.getId(),t)}removeStream(t){return this.streams.delete(t.getId())}removeAllStreams(){this.streams.clear()}getTracksByMediaType(t){let i=[];for(const e of this.streams.values())for(const[s,n]of e.getTracks())ve(n.getMedia(),t)&&i.push(n);return i}getTrackByMediaId(t){for(const i of this.streams.values())for(const[e,s]of i.getTracks())if(s.getMediaId()==t)return s;return null}getStreamByMediaId(t){for(const i of this.streams.values())for(const[e,s]of i.getTracks())if(s.getMediaId()==t)return i;return null}getExtmapAllowMixed(){return this.extmapAllowMixed}setExtmapAllowMixed(t){this.extmapAllowMixed=t}answer(i){const e=new t;i.ice&&(i.ice instanceof be?e.setICE(i.ice.clone()):e.setICE(be.expand(i.ice))),i.dtls&&(i.dtls instanceof Ae?e.setDTLS(i.dtls):e.setDTLS(Ae.expand(i.dtls))),i.crypto&&(i.crypto instanceof ye?e.setCrypto(i.crypto):e.setCrypto(ye.expand(i.crypto)));for(let t=0;i.candidates&&t<i.candidates.length;++t)i.candidates[t]instanceof we?e.addCandidate(i.candidates[t].clone()):e.addCandidate(we.expand(i.candidates[t]));for(const t of this.medias){const s=i&&i.capabilities&&i.capabilities[t.getType()];e.addMedia(t.answer(s))}return e.setExtmapAllowMixed(this.extmapAllowMixed),e}toString(){let t={version:0,media:[]};t.version=0,t.origin={username:"-",sessionId:(new Date).getTime(),sessionVersion:this.version,netType:"IN",ipVer:4,address:"127.0.0.1"},t.name="semantic-sdp",t.connection={version:4,ip:"0.0.0.0"},t.timing={start:0,stop:0},this.hasICE()&&this.getICE().isLite()&&(t.icelite="ice-lite"),t.msidSemantic={semantic:"WMS",token:"*"},t.groups=[],this.extmapAllowMixed&&(t.extmapAllowMixed="extmap-allow-mixed");const i=[];for(const e of this.medias){let s={type:e.getType(),port:9,protocol:"",fmtp:[],rtp:[],rtcpFb:[],ext:[],bandwidth:[],candidates:[],ssrcGroups:[],ssrcs:[],rids:[]};s.direction=Se.toString(e.getDirection()),this.extmapAllowMixed&&(s.extmapAllowMixed="extmap-allow-mixed"),s.mid=e.getId(),i.push(e.getId()),e.hasControl()&&(s.control=e.getControl()),e.getBitrate()>0&&(s.bandwidth.push({type:"AS",limit:e.getBitrate()}),s.bandwidth.push({type:"TIAS",limit:1e3*e.getBitrate()}));let n=this.getCandidates();for(const t of n)s.candidates.push({foundation:t.getFoundation(),component:t.getComponentId(),transport:t.getTransport(),priority:t.getPriority(),ip:t.getAddress(),port:t.getPort(),type:t.getType(),raddr:t.getRelAddr(),rport:t.getRelPort()});if(this.getICE()&&(s.iceUfrag=this.getICE().getUfrag(),s.icePwd=this.getICE().getPwd()),ve("audio",e.getType())||ve("video",e.getType())){s.rtcpMux="rtcp-mux",s.rtcpRsize="rtcp-rsize",this.getDTLS()?(s.protocol="UDP/TLS/RTP/SAVPF",s.fingerprint={type:this.getDTLS().getHash(),hash:this.getDTLS().getFingerprint()},s.setup=Te.toString(this.getDTLS().getSetup())):this.getCrypto()?(s.protocol="RTP/SAVPF",s.crypto=[{id:this.getCrypto().getTag(),suite:this.getCrypto().getSuite(),config:this.getCrypto().getKeyParams()}]):s.protocol="RTP/AVP";for(const t of e.getCodecs().values()){ve("video",e.getType())?s.rtp.push({payload:t.getType(),codec:t.getCodec().toUpperCase(),rate:9e4}):ve("opus",t.getCodec())||ve("multiopus",t.getCodec())?s.rtp.push({payload:t.getType(),codec:t.getCodec(),rate:48e3,encoding:t.getChannels()}):s.rtp.push({payload:t.getType(),codec:t.getCodec(),rate:8e3});for(const i of t.getRTCPFeedbacks())s.rtcpFb.push({payload:t.getType(),type:i.getId(),subtype:i.getParams().join(" ")});t.hasRTX()&&(s.rtp.push({payload:t.getRTX(),codec:"rtx",rate:9e4}),s.fmtp.push({payload:t.getRTX(),config:"apt="+t.getType()}));const i=t.getParams();if(_.keys(i).length){const e={payload:t.getType(),config:""};for(const t in i)e.config.length&&(e.config+=";"),_.hasOwnProperty.call(i,t)?e.config+=t+"="+i[t]:e.config+=t;s.fmtp.push(e)}}const t=[];for(const i of s.rtp)t.push(i.payload);s.payloads=t.join(" ");for(let[t,i]of e.getExtensions().entries())s.ext.push({value:t,uri:i});for(let t of e.getRIDs().values()){let i={id:t.getId(),direction:Ne.toString(t.getDirection()),params:""};t.getFormats().length&&(i.params="pt="+t.getFormats().join(","));for(let[e,s]of t.getParams().entries())i.params+=(i.params.length?";":"")+e+"="+s;s.rids.push(i)}const i=e.getSimulcast();if(i){let t=1;s.simulcast={};const e=i.getSimulcastStreams(Ne.SEND),n=i.getSimulcastStreams(Ne.RECV);if(e&&e.length){let i="";for(const t of e){let e="";for(const i of t)e+=(e.length?",":"")+(i.isPaused()?"~":"")+i.getId();i+=(i.length?";":"")+e}s.simulcast["dir"+t]="send",s.simulcast["list"+t]=i,t++}if(n&&n.length){let i="";for(const t of n){let e="";for(const i of t)e+=(e.length?",":"")+(i.isPaused()?"~":"")+i.getId();i+=(i.length?";":"")+e}s.simulcast["dir"+t]="recv",s.simulcast["list"+t]=i,t++}}}else if(e.hasDataChannel()){s.protocol="UDP/DTLS/SCTP",s.payloads="webrtc-datachannel";const t=e.getDataChannel();s.sctpPort=t.getPort(),s.maxMessageSize=t.getMaxMessageSize()}t.media.push(s)}for(let i of this.streams.values())for(let e of i.getTracks().values())for(let s in t.media){let n=t.media[s];if(e.getMediaId()){if(e.getMediaId()==n.mid){let t=e.getSourceGroups();for(let i in t){let e=t[i];n.ssrcGroups.push({semantics:e.getSemantics(),ssrcs:e.getSSRCs().join(" ")})}let s=e.getSSRCs();for(let t in s)n.ssrcs.push({id:s[t],attribute:"cname",value:i.getId()}),n.ssrcs.push({id:s[t],attribute:"msid",value:i.getId()+" "+e.getId()});n.msid=i.getId()+" "+e.getId();break}}else if(ve(n.type,e.getMedia())){let t=e.getSourceGroups();for(let i in t){let e=t[i];n.ssrcGroups.push({semantics:e.getSemantics(),ssrcs:e.getSSRCs().join(" ")})}let s=e.getSSRCs();for(let t in s)n.ssrcs.push({id:s[t],attribute:"cname",value:i.getId()}),n.ssrcs.push({id:s[t],attribute:"msid",value:i.getId()+" "+e.getId()});break}}const e={type:"BUNDLE",mids:i.join(" ")};return t.groups.push(e),_e.write(t)}toIceFragmentString(){let t={version:0,media:[],candidates:[]};this.hasICE()&&this.getICE().isLite()&&(t.icelite="ice-lite"),this.getICE()&&(t.iceUfrag=this.getICE().getUfrag(),t.icePwd=this.getICE().getPwd());for(const i of this.getCandidates())t.candidates.push({foundation:i.getFoundation(),component:i.getComponentId(),transport:i.getTransport(),priority:i.getPriority(),ip:i.getAddress(),port:i.getPort(),type:i.getType(),raddr:i.getRelAddr(),rport:i.getRelPort()});return _e.write(t).slice(10)}constructor(t){this.version=t||1,this.streams=new Map,this.medias=new Array,this.candidates=new Array,this.ice=null,this.dtls=null,this.crypto=null,this.extmapAllowMixed=!0}};Re.create=function(t){var i;const e=new Re;if(t.streams)for(const i of t.streams)e.addStream(Ee.expand(i));t.ice&&(t.ice instanceof be?e.setICE(t.ice.clone()):e.setICE(be.expand(t.ice))),t.dtls&&(t.dtls instanceof Ae?e.setDTLS(t.dtls):e.setDTLS(Ae.expand(t.dtls))),t.crypto&&(t.crypto instanceof ye?e.setCrypto(t.crypto):e.setCrypto(ye.expand(t.crypto)));for(const i of t.candidates||[])i instanceof we?e.addCandidate(i.clone()):e.addCandidate(we.expand(i));let s=96,n=1,r=0;for(const[o,h]of _.entries(t.capabilities||{}))if(t.unified&&null!==(i=t.streams)&&void 0!==i&&i.length)for(const t of e.getTracksByMediaType(o)){const i=Me.create(t.getMediaId(),o,h);for(const[t,e]of i.getCodecs())e.getType()>=96&&e.setType(s++),e.getRTX()&&e.setRTX(s++);if(h.extensions)for(let t of h.extensions)15===n&&n++,i.addExtension(n++,t);e.addMedia(i)}else{const i=Me.create(t.unified?String(r++):o,o,h);for(const[t,e]of i.getCodecs())e.getType()>=96&&e.setType(s++),e.getRTX()&&e.setRTX(s++);if(h.extensions)for(let t of h.extensions)15===n&&n++,i.addExtension(n++,t);e.addMedia(i)}return e},Re.expand=function(t){if("SDPInfo"===t.constructor.name)return t;const i=new Re(t.version);for(const e of t.medias||[]){const t=Me.expand(e);t&&i.addMedia(t)}for(const e of t.streams||[]){const t=Ee.expand(e);t&&i.addStream(t)}for(const e of t.candidates||[]){const t=we.expand(e);t&&i.addCandidate(t)}return t.ice&&i.setICE(be.expand(t.ice)),t.dtls&&i.setDTLS(Ae.expand(t.dtls)),t.crypto&&i.setCrypto(ye.expand(t.crypto)),t.extmapAllowMixedNotSupported&&(this.extmapAllowMixed=!t.extmapAllowMixedNotSupported),i},Re.clone=function(t){return"SDPInfo"===t.constructor.name?t.clone():Re.expand(t)},Re.process=function(t){return Re.parse(t)},Re.parse=function(t){const i=_e.parse(t),e=new Re;if(e.setVersion(i.version),i.iceUfrag&&i.icePwd){const t=String(i.iceUfrag),s=String(i.icePwd),n=new be(t,s);n.setLite("ice-lite"==i.icelite),n.setEndOfCandidates("end-of-candidates"==i.endOfCandidates),e.setICE(n)}for(let t in i.media){const s=i.media[t],n=s.type,r=s.mid?s.mid.toString():t,o=new Me(r,n);if(s.iceUfrag&&s.icePwd){const t=String(s.iceUfrag),n=String(s.icePwd),r=new be(t,n);r.setLite("ice-lite"==i.icelite),r.setEndOfCandidates("end-of-candidates"==s.endOfCandidates),e.setICE(r)}for(let t=0;s.candidates&&t<s.candidates.length;++t){const i=s.candidates[t],n=new we(i.foundation,i.component,i.transport,i.priority,i.ip,i.port,i.type,i.raddr,i.rport);e.addCandidate(n)}const h=s.fingerprint||i.fingerprint;if(h){const t=h.type,i=h.hash;let n=Te.ACTPASS;s.setup&&(n=Te.byValue(s.setup)),e.setDTLS(new Ae(n,t,i))}if(s.crypto){const t=s.crypto[0];e.setCrypto(new ye(t.id,t.suite,t.config,t.sessionConfig))}let a=Se.SENDRECV;s.direction&&(a=Se.byValue(s.direction),o.setDirection(a)),s.control&&o.setControl(s.control),e.setExtmapAllowMixed("extmap-allow-mixed"==s.extmapAllowMixed||"extmap-allow-mixed"==i.extmapAllowMixed);const u=new Map;for(let t in s.rtp){const i=s.rtp[t],e=i.payload,n=i.codec;if("RED"===n.toUpperCase()||"ULPFEC"===n.toUpperCase())continue;let r={};for(let t in s.fmtp){const i=s.fmtp[t];if(i.payload===e){const t=i.config.split(";");for(let i in t){const e=t[i].split("="),s=e[0].trim(),n=e.splice(1).join("=").trim();r[s]=n}}}if("RTX"===n.toUpperCase())u.set(C(r.apt),e);else{const t=new me(n,e,r);i.encoding>1&&t.setChannels(i.encoding),o.addCodec(t)}}for(let t of u.entries()){const i=o.getCodecForType(t[0]);i&&i.setRTX(t[1])}for(let t=0;s.rtcpFb&&t<s.rtcpFb.length;++t){const i=o.getCodecForType(s.rtcpFb[t].payload);if(i){const e=s.rtcpFb[t].type,n=s.rtcpFb[t].subtype?s.rtcpFb[t].subtype.split(" "):null;i.addRTCPFeedback(new pe(e,n))}}const c=s.ext;for(let t in c){const i=c[t];o.addExtension(i.value,i.uri)}const l=s.rids;for(let t in l){const i=l[t],e=new je(i.id,Ne.byValue(i.direction));let s=[];const n=new Map;if(i.params){const t=_e.parseParams(i.params);for(let i in t)"pt"===i?s=t[i].split(","):n.set(i,t[i]);e.setFormats(s),e.setParams(n)}o.addRID(e)}const d=[];if(s.simulcast){const t=new Le;if(s.simulcast.dir1){const i=Ne.byValue(s.simulcast.dir1),e=_e.parseSimulcastStreamList(s.simulcast.list1);for(let s=0;s<e.length;++s){const n=[];for(let t=0;t<e[s].length;++t)n.push(new Ce(e[s][t].scid,e[s][t].paused));t.addSimulcastAlternativeStreams(i,n)}}if(s.simulcast.dir2){const i=Ne.byValue(s.simulcast.dir2),e=_e.parseSimulcastStreamList(s.simulcast.list2);for(let s=0;s<e.length;++s){const n=[];for(let t=0;t<e[s].length;++t)n.push(new Ce(e[s][t].scid,e[s][t].paused));t.addSimulcastAlternativeStreams(i,n)}}for(let i of t.getSimulcastStreams(Ne.SEND)){const t=[];for(let e=0;e<i.length;e++){const s=new xe(i[e].getId(),i[e].isPaused()),n=o.getRID(s.getId());if(n){const i=n.getFormats();for(let t=0;i&&t<i.length;++t){const e=o.getCodecForType(i[t]);e&&s.addCodec(e)}s.setParams(n.getParams()),t.push(s)}}t.length&&d.push(t)}o.setSimulcast(t)}const f=new Map;if(s.ssrcs)for(let t in s.ssrcs){let i=s.ssrcs[t],o=i.id,h=i.attribute,a=i.value,u=f.get(o);if(u||(u=new De(o),f.set(u.getSSRC(),u)),ve("cname",h))u.setCName(a);else if(ve("msid",h)){let t=a.split(" "),i=t[0],s=t[1];u.setStreamId(i),u.setTrackId(s);let h=e.getStream(i);h||(h=new Ee(i),e.addStream(h));let c=h.getTrack(s);c||(c=new ke(n,s),c.setMediaId(r),c.setEncodings(d),h.addTrack(c)),c.addSSRC(o)}}if(s.msid){let t=s.msid.split(" "),i=t[0],o=t[1],h=e.getStream(i);h||(h=new Ee(i),e.addStream(h));let a=h.getTrack(o);a||(a=new ke(n,o),a.setMediaId(r),a.setEncodings(d),h.addTrack(a));for(let[t,e]of f.entries())e.getStreamId()||(e.setStreamId(i),e.setTrackId(o),a.addSSRC(t))}for(let[t,i]of f.entries())if(!i.getStreamId()){let s=i.getCName(),o=r;i.setStreamId(s),i.setTrackId(o);let h=e.getStream(s);h||(h=new Ee(s),e.addStream(h));let a=h.getTrack(o);a||(a=new ke(n,o),a.setMediaId(r),a.setEncodings(d),h.addTrack(a)),a.addSSRC(t)}if(s.ssrcGroups)for(let t in s.ssrcGroups){let i=s.ssrcGroups[t],n=i.ssrcs.split(" "),r=new Ie(i.semantics,n),o=f.get(C(n[0]));o&&e.getStream(o.getStreamId()).getTrack(o.getTrackId()).addSourceGroup(r)}if("application"==s.type&&"webrtc-datachannel"==s.payloads){const t=new Oe(s.sctpPort,s.maxMessageSize);o.setDataChannel(t)}e.addMedia(o)}return e};var Pe=Re;_.defineProperty(Pt,"__esModule",{value:!0});var ze=Pt.SDPInfo=Pe;Pt.CandidateInfo=Jt,Pt.CodecInfo=si,Pt.DTLSInfo=ui,Pt.CryptoInfo=li,Pt.ICEInfo=ki;var Be=Pt.MediaInfo=te;Pt.Setup=oi,Pt.SourceGroupInfo=ee,Pt.SourceInfo=ne,Pt.StreamInfo=ge,Pt.TrackInfo=le,Pt.RTCPFeedbackInfo=ti,Pt.TrackEncodingInfo=he,Pt.RIDInfo=Oi,Pt.SimulcastInfo=Qi,Pt.SimulcastStreamInfo=Pi,Pt.DataChannelInfo=Gi;var Ue=Pt.Direction=Yi,Qe={exports:{}};!function(t,i){!function(e,s){var n="function",r="undefined",o="object",h="string",a="major",u="model",c="name",l="type",d="vendor",f="version",g="architecture",_="console",v="mobile",w="tablet",m="smarttv",p="wearable",A="embedded",y="Amazon",b="Apple",M="ASUS",T="BlackBerry",S="Browser",N="Chrome",I="Firefox",D="Google",E="Huawei",k="LG",x="Microsoft",L="Motorola",C="Opera",j="Samsung",O="Sharp",R="Sony",P="Xiaomi",z="Zebra",B="Facebook",U="Chromium OS",Q="Mac OS",F=" Browser",Y=function(t){for(var i={},e=0;e<t.length;e++)i[t[e].toUpperCase()]=t[e];return i},V=function(t,i){return typeof t===h&&-1!==G(i).indexOf(G(t))},G=function(t){return t.toLowerCase()},W=function(t,i){if(typeof t===h)return t=t.replace(/^\s\s*/,""),typeof i===r?t:t.substring(0,500)},Z=function(t,i){for(var e,r,h,a,u,c,l=0;l<i.length&&!u;){var d=i[l],f=i[l+1];for(e=r=0;e<d.length&&!u&&d[e];)if(u=d[e++].exec(t))for(h=0;h<f.length;h++)c=u[++r],typeof(a=f[h])===o&&a.length>0?2===a.length?typeof a[1]==n?this[a[0]]=a[1].call(this,c):this[a[0]]=a[1]:3===a.length?typeof a[1]!==n||a[1].exec&&a[1].test?this[a[0]]=c?c.replace(a[1],a[2]):s:this[a[0]]=c?a[1].call(this,c,a[2]):s:4===a.length&&(this[a[0]]=c?a[3].call(this,c.replace(a[1],a[2])):s):this[a]=c||s;l+=2}},H=function(t,i){for(var e in i)if(typeof i[e]===o&&i[e].length>0){for(var n=0;n<i[e].length;n++)if(V(i[e][n],t))return"?"===e?s:e}else if(V(i[e],t))return"?"===e?s:e;return i.hasOwnProperty("*")?i["*"]:t},X={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},q={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[f,[c,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[f,[c,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[c,f],[/opios[\/ ]+([\w\.]+)/i],[f,[c,C+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[f,[c,C+" GX"]],[/\bopr\/([\w\.]+)/i],[f,[c,C]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[f,[c,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[c,f],[/quark(?:pc)?\/([-\w\.]+)/i],[f,[c,"Quark"]],[/\bddg\/([\w\.]+)/i],[f,[c,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[f,[c,"UC"+S]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[f,[c,"WeChat"]],[/konqueror\/([\w\.]+)/i],[f,[c,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[f,[c,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[f,[c,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[f,[c,"Smart Lenovo "+S]],[/(avast|avg)\/([\w\.]+)/i],[[c,/(.+)/,"$1 Secure "+S],f],[/\bfocus\/([\w\.]+)/i],[f,[c,I+" Focus"]],[/\bopt\/([\w\.]+)/i],[f,[c,C+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[f,[c,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[f,[c,"Dolphin"]],[/coast\/([\w\.]+)/i],[f,[c,C+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[f,[c,"MIUI "+S]],[/fxios\/([-\w\.]+)/i],[f,[c,I]],[/\bqihu|(qi?ho?o?|360)browser/i],[[c,"360"+F]],[/\b(qq)\/([\w\.]+)/i],[[c,/(.+)/,"$1Browser"],f],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[c,/(.+)/,"$1"+F],f],[/samsungbrowser\/([\w\.]+)/i],[f,[c,j+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[c,/_/g," "],f],[/metasr[\/ ]?([\d\.]+)/i],[f,[c,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[c,"Sogou Mobile"],f],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[c,f],[/(lbbrowser|rekonq)/i,/\[(linkedin)app\]/i],[c],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[c,B],f],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[c,f],[/\bgsa\/([\w\.]+) .*safari\//i],[f,[c,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[f,[c,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[f,[c,N+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[c,N+" WebView"],f],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[f,[c,"Android "+S]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[c,f],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[f,[c,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[f,c],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[c,[f,H,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[c,f],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[c,"Netscape"],f],[/(wolvic)\/([\w\.]+)/i],[c,f],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[f,[c,I+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[c,[f,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[c,[f,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[g,"amd64"]],[/(ia32(?=;))/i],[[g,G]],[/((?:i[346]|x)86)[;\)]/i],[[g,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[g,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[g,"armhf"]],[/windows (ce|mobile); ppc;/i],[[g,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[g,/ower/,"",G]],[/(sun4\w)[;\)]/i],[[g,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[g,G]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[u,[d,j],[l,w]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr])[-\w]+)/i,/sec-(sgh\w+)/i],[u,[d,j],[l,v]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[u,[d,b],[l,v]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[u,[d,b],[l,w]],[/(macintosh);/i],[u,[d,b]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[u,[d,O],[l,v]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[u,[d,E],[l,w]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[u,[d,E],[l,v]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i],[[u,/_/g," "],[d,P],[l,v]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[u,/_/g," "],[d,P],[l,w]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[u,[d,"OPPO"],[l,v]],[/\b(opd2\d{3}a?) bui/i],[u,[d,"OPPO"],[l,w]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[u,[d,"Vivo"],[l,v]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[u,[d,"Realme"],[l,v]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[u,[d,L],[l,v]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[u,[d,L],[l,w]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[u,[d,k],[l,w]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[u,[d,k],[l,v]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[u,[d,"Lenovo"],[l,w]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[u,/_/g," "],[d,"Nokia"],[l,v]],[/(pixel c)\b/i],[u,[d,D],[l,w]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[u,[d,D],[l,v]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[u,[d,R],[l,v]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[u,"Xperia Tablet"],[d,R],[l,w]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[u,[d,"OnePlus"],[l,v]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[u,[d,y],[l,w]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[u,/(.+)/g,"Fire Phone $1"],[d,y],[l,v]],[/(playbook);[-\w\),; ]+(rim)/i],[u,d,[l,w]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[u,[d,T],[l,v]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[u,[d,M],[l,w]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[u,[d,M],[l,v]],[/(nexus 9)/i],[u,[d,"HTC"],[l,w]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[d,[u,/_/g," "],[l,v]],[/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])\w*(\)| bui)/i],[u,[d,"TCL"],[l,w]],[/(itel) ((\w+))/i],[[d,G],u,[l,H,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[u,[d,"Acer"],[l,w]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[u,[d,"Meizu"],[l,v]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[u,[d,"Ulefone"],[l,v]],[/droid.+; (a(?:015|06[35]|142p?))/i],[u,[d,"Nothing"],[l,v]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[d,u,[l,v]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[d,u,[l,w]],[/(surface duo)/i],[u,[d,x],[l,w]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[u,[d,"Fairphone"],[l,v]],[/(u304aa)/i],[u,[d,"AT&T"],[l,v]],[/\bsie-(\w*)/i],[u,[d,"Siemens"],[l,v]],[/\b(rct\w+) b/i],[u,[d,"RCA"],[l,w]],[/\b(venue[\d ]{2,7}) b/i],[u,[d,"Dell"],[l,w]],[/\b(q(?:mv|ta)\w+) b/i],[u,[d,"Verizon"],[l,w]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[u,[d,"Barnes & Noble"],[l,w]],[/\b(tm\d{3}\w+) b/i],[u,[d,"NuVision"],[l,w]],[/\b(k88) b/i],[u,[d,"ZTE"],[l,w]],[/\b(nx\d{3}j) b/i],[u,[d,"ZTE"],[l,v]],[/\b(gen\d{3}) b.+49h/i],[u,[d,"Swiss"],[l,v]],[/\b(zur\d{3}) b/i],[u,[d,"Swiss"],[l,w]],[/\b((zeki)?tb.*\b) b/i],[u,[d,"Zeki"],[l,w]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[d,"Dragon Touch"],u,[l,w]],[/\b(ns-?\w{0,9}) b/i],[u,[d,"Insignia"],[l,w]],[/\b((nxa|next)-?\w{0,9}) b/i],[u,[d,"NextBook"],[l,w]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[d,"Voice"],u,[l,v]],[/\b(lvtel\-)?(v1[12]) b/i],[[d,"LvTel"],u,[l,v]],[/\b(ph-1) /i],[u,[d,"Essential"],[l,v]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[u,[d,"Envizen"],[l,w]],[/\b(trio[-\w\. ]+) b/i],[u,[d,"MachSpeed"],[l,w]],[/\btu_(1491) b/i],[u,[d,"Rotor"],[l,w]],[/(shield[\w ]+) b/i],[u,[d,"Nvidia"],[l,w]],[/(sprint) (\w+)/i],[d,u,[l,v]],[/(kin\.[onetw]{3})/i],[[u,/\./g," "],[d,x],[l,v]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[u,[d,z],[l,w]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[u,[d,z],[l,v]],[/smart-tv.+(samsung)/i],[d,[l,m]],[/hbbtv.+maple;(\d+)/i],[[u,/^/,"SmartTV"],[d,j],[l,m]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[d,k],[l,m]],[/(apple) ?tv/i],[d,[u,b+" TV"],[l,m]],[/crkey/i],[[u,N+"cast"],[d,D],[l,m]],[/droid.+aft(\w+)( bui|\))/i],[u,[d,y],[l,m]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[u,[d,O],[l,m]],[/(bravia[\w ]+)( bui|\))/i],[u,[d,R],[l,m]],[/(mitv-\w{5}) bui/i],[u,[d,P],[l,m]],[/Hbbtv.*(technisat) (.*);/i],[d,u,[l,m]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[d,W],[u,W],[l,m]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[l,m]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[d,u,[l,_]],[/droid.+; (shield) bui/i],[u,[d,"Nvidia"],[l,_]],[/(playstation [345portablevi]+)/i],[u,[d,R],[l,_]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[u,[d,x],[l,_]],[/\b(sm-[lr]\d\d[05][fnuw]?s?)\b/i],[u,[d,j],[l,p]],[/((pebble))app/i],[d,u,[l,p]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[u,[d,b],[l,p]],[/droid.+; (glass) \d/i],[u,[d,D],[l,p]],[/droid.+; (wt63?0{2,3})\)/i],[u,[d,z],[l,p]],[/(quest( \d| pro)?)/i],[u,[d,B],[l,p]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[d,[l,A]],[/(aeobc)\b/i],[u,[d,y],[l,A]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[u,[l,v]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[u,[l,w]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[l,w]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[l,v]],[/(android[-\w\. ]{0,9});.+buil/i],[u,[d,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[f,[c,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[f,[c,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[c,f],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[f,c]],os:[[/microsoft (windows) (vista|xp)/i],[c,f],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[c,[f,H,X]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[f,H,X],[c,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[f,/_/g,"."],[c,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[c,Q],[f,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[f,c],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[c,f],[/\(bb(10);/i],[f,[c,T]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[f,[c,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[f,[c,I+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[f,[c,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[f,[c,"watchOS"]],[/crkey\/([\d\.]+)/i],[f,[c,N+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[c,U],f],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[c,f],[/(sunos) ?([\w\.\d]*)/i],[[c,"Solaris"],f],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[c,f]]},K=function(t,i){if(typeof t===o&&(i=t,t=s),!(this instanceof K))return new K(t,i).getResult();var _=typeof e!==r&&e.navigator?e.navigator:s,m=t||(_&&_.userAgent?_.userAgent:""),p=_&&_.userAgentData?_.userAgentData:s,A=i?function(t,i){var e={};for(var s in t)i[s]&&i[s].length%2==0?e[s]=i[s].concat(t[s]):e[s]=t[s];return e}(q,i):q,y=_&&_.userAgent==m;return this.getBrowser=function(){var t={};return t[c]=s,t[f]=s,Z.call(t,m,A.browser),t[a]=function(t){return typeof t===h?t.replace(/[^\d\.]/g,"").split(".")[0]:s}(t[f]),y&&_&&_.brave&&typeof _.brave.isBrave==n&&(t[c]="Brave"),t},this.getCPU=function(){var t={};return t[g]=s,Z.call(t,m,A.cpu),t},this.getDevice=function(){var t={};return t[d]=s,t[u]=s,t[l]=s,Z.call(t,m,A.device),y&&!t[l]&&p&&p.mobile&&(t[l]=v),y&&"Macintosh"==t[u]&&_&&typeof _.standalone!==r&&_.maxTouchPoints&&_.maxTouchPoints>2&&(t[u]="iPad",t[l]=w),t},this.getEngine=function(){var t={};return t[c]=s,t[f]=s,Z.call(t,m,A.engine),t},this.getOS=function(){var t={};return t[c]=s,t[f]=s,Z.call(t,m,A.os),y&&!t[c]&&p&&p.platform&&"Unknown"!=p.platform&&(t[c]=p.platform.replace(/chrome os/i,U).replace(/macos/i,Q)),t},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return m},this.setUA=function(t){return m=typeof t===h&&t.length>500?W(t,500):t,this},this.setUA(m),this};K.VERSION="0.7.39",K.BROWSER=Y([c,f,a]),K.CPU=Y([g]),K.DEVICE=Y([u,d,l,_,v,m,w,p,A]),K.ENGINE=K.OS=Y([c,f]),t.exports&&(i=t.exports=K),i.UAParser=K;var J=typeof e!==r&&(e.jQuery||e.Zepto);if(J&&!J.ua){var $=new K;J.ua=$.getResult(),J.ua.get=function(){return $.getUA()},J.ua.set=function(t){$.setUA(t);var i=$.getResult();for(var e in i)J.ua[e]=i[e]}}}("object"==typeof s?s:p)}(Qe,Qe.exports);const Fe=A(Qe.exports),Ye=["iOS"];class Ve extends Fe{isChromium(){return this.getUA().match(/Chrome/i)}isChrome(){const t=this.getBrowser();if(!t.name)return!1;const i=this.getOS();let e=!0;return e=!new RegExp(Ye.join("|"),"i").test(i.name),t.name.match(/Chrome/i)&&e}isFirefox(){const t=this.getBrowser();return!!t.name&&t.name.match(/Firefox/i)}isOpera(){const t=this.getBrowser();return!!t.name&&t.name.match(/Opera/i)}isSafari(){const t=this.getBrowser();return!!t.name&&t.name.match(/Safari/i)}constructor(){super(s.navigator.userAgent)}}const Ge=at.get("SdpParser"),We=Array.from({length:31},((t,i)=>i+35)),Ze=Array.from({length:32},((t,i)=>i+96)),He=Array.from({length:14},((t,i)=>i+1)),Xe=Array.from({length:240},((t,i)=>i+16)),qe={setSimulcast(t,i){if(Ge.info("Setting simulcast. Codec: ",i),!(new Ve).isChromium())return Ge.warn("Your browser does not appear to support Simulcast. For a better experience, use a Chromium based browser."),t;if("h264"!==i&&"vp8"!==i)return Ge.warn("Your selected codec ".concat(i," does not appear to support Simulcast.  To broadcast using simulcast, please use H.264 or VP8.")),t;if(!/m=video/.test(t))return Ge.warn("There is no available video for simulcast to be enabled."),t;try{const i=new RegExp("m=video.*?a=ssrc:(\\d*) cname:(.+?)\\r\\n","s"),e=new RegExp("m=video.*?a=ssrc:(\\d*) msid:(.+?)\\r\\n","s"),s=i.exec(t),n=s[1],r=s[2],o=e.exec(t)[2],h=2,a=[n];for(let i=0;i<h;++i){const e=100+2*i,s=e+1;a.push(e),t+="a=ssrc-group:FID "+e+" "+s+"\r\na=ssrc:"+e+" cname:"+r+"\r\na=ssrc:"+e+" msid:"+o+"\r\na=ssrc:"+s+" cname:"+r+"\r\na=ssrc:"+s+" msid:"+o+"\r\n"}return t+="a=ssrc-group:SIM "+a.join(" ")+"\r\n",Ge.info("Simulcast setted"),Ge.debug("Simulcast SDP: ",t),t}catch(t){throw Ge.error("Error setting SDP for simulcast: ",t),t}},setStereo:t=>(Ge.info("Replacing SDP response for support stereo"),t=t.replace(/useinbandfec=1/g,"useinbandfec=1; stereo=1"),Ge.info("Replaced SDP response for support stereo"),Ge.debug("New SDP value: ",t),t),setDTX:t=>(Ge.info("Replacing SDP response for support dtx"),t=t.replace("useinbandfec=1","useinbandfec=1; usedtx=1"),Ge.info("Replaced SDP response for support dtx"),Ge.debug("New SDP value: ",t),t),setAbsoluteCaptureTime(t){const i="a=extmap:"+qe.getAvailableHeaderExtensionIdRange(t)[0]+" http://www.webrtc.org/experiments/rtp-hdrext/abs-capture-time\r\n";return t=t.replace(/(m=.*\r\n(?:.*\r\n)*?)(a=extmap.*\r\n)/gm,((t,e,s)=>e+i+s)),Ge.info("Replaced SDP response for setting absolute capture time"),Ge.debug("New SDP value: ",t),t},setDependencyDescriptor(t){const i="a=extmap:"+qe.getAvailableHeaderExtensionIdRange(t)[0]+" https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension\r\n";return t=t.replace(/(m=.*\r\n(?:.*\r\n)*?)(a=extmap.*\r\n)/gm,((t,e,s)=>e+i+s)),Ge.info("Replaced SDP response for setting depency descriptor"),Ge.debug("New SDP value: ",t),t},setVideoBitrate(t,i){if(i<1)Ge.info("Remove bitrate restrictions"),t=t.replace(/b=AS:.*\r\n/,"").replace(/b=TIAS:.*\r\n/,"");else{const e=ze.parse(t),s=e.getMedia("video");Ge.info("Setting video bitrate"),s.setBitrate(i),t=e.toString()}return t},removeSdpLine:(t,i)=>(Ge.debug("SDP before trimming: ",t),t=t.split("\n").filter((t=>t.trim()!==i)).join("\n"),Ge.debug("SDP trimmed result: ",t),t),adaptCodecName(t,i,e){if(!t)return t;const s=new RegExp("".concat(i),"i");return t.replace(s,e)},setMultiopus(t,i){if(!(new Ve).isFirefox()&&(!i||Ke(i)))if(t.includes("multiopus/48000/6"))Ge.info("Multiopus already setted");else{Ge.info("Setting multiopus");const i=/m=audio 9 UDP\/TLS\/RTP\/SAVPF (.*)\r\n/.exec(t)[0],e=qe.getAvailablePayloadTypeRange(t)[0],s=i.replace("\r\n"," ")+e+"\r\na=rtpmap:"+e+" multiopus/48000/6\r\na=fmtp:"+e+" channel_mapping=0,4,1,2,3,5;coupled_streams=2;minptime=10;num_streams=4;useinbandfec=1\r\n";t=t.replace(i,s),Ge.info("Multiopus offer created"),Ge.debug("SDP parsed for multioups: ",t)}return t},getAvailablePayloadTypeRange(t){const i=t.matchAll(/m=(?:.*) (?:.*) UDP\/TLS\/RTP\/SAVPF (.*)\r\n/gm);let e=Ze.concat(We);for(const t of i){const i=t[1].split(" ").map((t=>C(t)));e=e.filter((t=>!i.includes(t)))}return e},getAvailableHeaderExtensionIdRange(t){const i=t.matchAll(/a=extmap:(\d+)(?:.*)\r\n/gm);let e=He.concat(Xe);for(const t of i){const i=t[1].split(" ").map((t=>C(t)));e=e.filter((t=>!i.includes(t)))}return e},renegotiate(t,i){const e=ze.parse(t),s=ze.parse(i);for(const t of e.getMedias()){let i=s.getMediaById(t.getId());if(!i){i=new Be(t.getId(),t.getType()),i.setDirection(Ue.reverse(t.getDirection()));const e=s.getMedia(t.getType());if(e){i.setCodecs(e.getCodecs());for(const[t,s]of e.getExtensions())i.addExtension(t,s)}s.addMedia(i)}}return s.toString()},updateMissingVideoExtensions(t,i){var e;const s=ze.parse(t),n=null==(e=ze.parse(i).getMediasByType("video")[0])?void 0:e.getExtensions();if(n||n.length){for(const i of s.getMediasByType("video")){const e=i.getExtensions();n.forEach(((s,n)=>{if(!e.get(n)){const e=i.getId(),r="a=extmap:"+n+" "+s+"\r\n",o=new RegExp("(a=mid:"+e+"\r\n(?:.*\r\n)*?)","g");t=t.replace(o,((t,i,e)=>i+r))}}))}return t}},getCodecPayloadType(t){const i=t.matchAll(/a=rtpmap:(\d+) (\w+)\/\d+/g),e={};for(const t of i)e[t[1]]=t[2];return e}},Ke=t=>t.getAudioTracks().some((t=>t.getSettings().channelCount>2)),Je={VP8:"vp8",VP9:"vp9",H264:"h264",AV1:"av1",H265:"h265"},$e={OPUS:"opus",MULTIOPUS:"multiopus"},ts=at.get("PeerConnection"),is="Publisher",es="Viewer",ss={track:"track",connectionStateChange:"connectionStateChange"},ns={stereo:!1,mediaStream:null,codec:"h264",simulcast:!1,scalabilityMode:null,disableAudio:!1,disableVideo:!1,setSDPToPeer:!0};class rs extends Nt{async createRTCPeer(t,i){void 0===t&&(t={autoInitStats:!0,statsIntervalMs:1e3}),void 0===i&&(i=es),ts.info("Creating new RTCPeerConnection"),ts.debug("RTC configuration provided by user: ",t),this.peer=as(this,t),this.mode=i,t.autoInitStats&&this.initStats(t)}getRTCPeer(){return ts.info("Getting RTC Peer"),this.peer}async closeRTCPeer(){var t;ts.info("Closing RTCPeerConnection"),null==(t=this.peer)||t.close(),this.peer=null,this.stopStats(),this.emit(ss.connectionStateChange,"closed")}async setRTCRemoteSDP(t){ts.info("Setting RTC Remote SDP");const i={type:"answer",sdp:t};try{await this.peer.setRemoteDescription(i),ts.info("RTC Remote SDP was set successfully."),ts.debug("RTC Remote SDP new value: ",t)}catch(t){throw ts.error("Error while setting RTC Remote SDP: ",t),t}}async getRTCLocalSDP(t){void 0===t&&(t=ns),ts.info("Getting RTC Local SDP"),t=d(d({},ns),t),ts.debug("Options: ",t);const i=hs(t.mediaStream);i?ls(this.peer,i,t):ds(this.peer,t),ts.info("Creating peer offer");const e=await this.peer.createOffer();return ts.info("Peer offer created"),ts.debug("Peer offer response: ",e.sdp),this.sessionDescription=e,t.disableAudio||(t.stereo&&(this.sessionDescription.sdp=qe.setStereo(this.sessionDescription.sdp)),t.dtx&&(this.sessionDescription.sdp=qe.setDTX(this.sessionDescription.sdp)),this.sessionDescription.sdp=qe.setMultiopus(this.sessionDescription.sdp,i)),!t.disableVideo&&t.simulcast&&(this.sessionDescription.sdp=qe.setSimulcast(this.sessionDescription.sdp,t.codec)),t.absCaptureTime&&(this.sessionDescription.sdp=qe.setAbsoluteCaptureTime(this.sessionDescription.sdp)),t.dependencyDescriptor&&(this.sessionDescription.sdp=qe.setDependencyDescriptor(this.sessionDescription.sdp)),t.setSDPToPeer&&(await this.peer.setLocalDescription(this.sessionDescription),ts.info("Peer local description set")),this.sessionDescription.sdp}async addRemoteTrack(t,i){return new Promise(((e,s)=>{try{const s=this.peer.addTransceiver(t,{direction:"recvonly",streams:i});this.transceiverMap.set(s,e)}catch(t){s(t)}}))}updateBandwidthRestriction(t,i){if(this.mode===es)throw ts.error("Viewer attempting to update bitrate, this is not allowed"),new b("It is not possible for a viewer to update the bitrate.");return ts.info("Updating bandwidth restriction, bitrate value: ",i),ts.debug("SDP value: ",t),qe.setVideoBitrate(t,i)}async updateBitrate(t){if(void 0===t&&(t=0),this.mode===es)throw ts.error("Viewer attempting to update bitrate, this is not allowed"),new b("It is not possible for a viewer to update the bitrate.");if(!this.peer)throw ts.error("Cannot update bitrate. No peer found."),new b("Cannot update bitrate. No peer found.");ts.info("Updating bitrate to value: ",t),this.sessionDescription=await this.peer.createOffer(),await this.peer.setLocalDescription(this.sessionDescription);const i=this.updateBandwidthRestriction(this.peer.remoteDescription.sdp,t);await this.setRTCRemoteSDP(i),ts.info("Bitrate restrictions updated: ","".concat(t>0?t:"unlimited"," kbps"))}getRTCPeerStatus(){if(ts.info("Getting RTC peer status"),!this.peer)return null;const t=fs(this.peer);return ts.info("RTC peer status getted, value: ",t),t}replaceTrack(t){if(!this.peer)return void ts.error("Could not change track if there is not an active connection.");const i=this.peer.getSenders().find((i=>i.track.kind===t.kind));i?i.replaceTrack(t):ts.error("There is no ".concat(t.kind," track in active broadcast."))}static getCapabilities(t){const i=new Ve,e=RTCRtpSender.getCapabilities(t);if(e){const s={};let n=new RegExp("^video/(".concat(_.values(Je).join("|"),")x?$"),"i");"audio"===t&&(n=new RegExp("^audio/(".concat(_.values($e).join("|"),")$"),"i"),i.isChrome()&&(s.multiopus={mimeType:"audio/multiopus",channels:6}));for(const t of e.codecs){const i=t.mimeType.match(n);if(i){const e=i[1].toLowerCase();if(s[e]=g(d({},s[e]),{mimeType:t.mimeType}),t.scalabilityModes){let i=s[e].scalabilityModes||[];i=[...i,...t.scalabilityModes],s[e].scalabilityModes=[...new Set(i)]}t.channels&&(s[e].channels=t.channels)}}e.codecs=_.keys(s).map((t=>d({codec:t},s[t])))}return e}getTracks(){var t,i;return null==(i=null==(t=this.peer)?void 0:t.getSenders())?void 0:i.map((t=>t.track))}initStats(t){this.peerConnectionStats?ts.warn("PeerConnection.initStats() has already been called. Automatic initialization occurs via View.connect(), Publish.connect() or this.createRTCPeer(). See options"):this.peer?(this.peerConnectionStats=new Rt(this.peer,t),xt(this.peerConnectionStats,this,[Ot])):ts.warn("Cannot init peer stats: RTCPeerConnection not initialized")}stopStats(){var t;null==(t=this.peerConnectionStats)||t.stop(),this.peerConnectionStats=null}constructor(){super(),this.mode=null,this.sessionDescription=null,this.peer=null,this.peerConnectionStats=null,this.transceiverMap=new Map}}const os=t=>(null==t?void 0:t.getAudioTracks().length)<=1&&(null==t?void 0:t.getVideoTracks().length)<=1,hs=t=>{if(!t)return null;if(t instanceof MediaStream&&os(t))return t;if(!(t instanceof MediaStream)){ts.info("Creating MediaStream to add received tracks.");const i=new MediaStream;for(const e of t)i.addTrack(e);if(os(i))return i}throw ts.error("MediaStream must have 1 audio track and 1 video track, or at least one of them."),new b("MediaStream must have 1 audio track and 1 video track, or at least one of them.")},as=(t,i)=>{const e=new RTCPeerConnection(i);return cs(t,e),e};async function us(t){return new Promise((i=>u(i,t)))}const cs=(t,i)=>{i.ontrack=async i=>{ts.info("New track from peer."),ts.debug("Track event value: ",i);const e=t.transceiverMap.get(i.transceiver);if(e){for(;!i.transceiver.mid;)await us(100);e(i.transceiver),t.transceiverMap.delete(i.transceiver)}u((()=>{t.emit(ss.track,i)}),0)},i.connectionState?i.onconnectionstatechange=e=>{ts.info("Peer connection state change: ",i.connectionState),t.emit(ss.connectionStateChange,i.connectionState)}:i.oniceconnectionstatechange=e=>{ts.info("Peer ICE connection state change: ",i.iceConnectionState),t.emit(ss.connectionStateChange,i.iceConnectionState)},i.onnegotiationneeded=async t=>{if(!i.remoteDescription)return;ts.info("Peer onnegotiationneeded, updating local description");const e=await i.createOffer();ts.info("Peer onnegotiationneeded, got local offer",e.sdp),e.sdp=qe.updateMissingVideoExtensions(e.sdp,i.remoteDescription.sdp),await i.setLocalDescription(e);const s=qe.renegotiate(e.sdp,i.remoteDescription.sdp);ts.info("Peer onnegotiationneeded, updating remote description",s),await i.setRemoteDescription({type:"answer",sdp:s}),ts.info("Peer onnegotiationneeded, renegotiation done")}},ls=(t,i,e)=>{ts.info("Adding mediaStream tracks to RTCPeerConnection");for(const s of i.getTracks()){const n={streams:[i]};"audio"===s.kind&&(n.direction=e.disableAudio?"inactive":"sendonly"),"video"===s.kind&&(n.direction=e.disableVideo?"inactive":"sendonly",e.scalabilityMode&&(new Ve).isChrome()?(ts.debug("Video track with scalability mode: ".concat(e.scalabilityMode,".")),n.sendEncodings=[{scalabilityMode:e.scalabilityMode}]):e.scalabilityMode&&ts.warn("SVC is only supported in Google Chrome")),t.addTransceiver(s,n),ts.info("Track '".concat(s.label,"' added: "),"id: ".concat(s.id),"kind: ".concat(s.kind))}},ds=(t,i)=>{const e=new Ve;if(!i.disableVideo){const i=t.addTransceiver("video",{direction:"recvonly"});e.isOpera()&&i.setCodecPreferences(RTCRtpReceiver.getCapabilities("video").codecs.filter((t=>"video/H264"!==t.mimeType||t.sdpFmtpLine.includes("profile-level-id=4"))))}i.disableAudio||t.addTransceiver("audio",{direction:"recvonly"});for(let e=0;e<i.multiplexedAudioTracks;e++)t.addTransceiver("audio",{direction:"recvonly"})},fs=t=>{var i;const e=null!=(i=t.connectionState)?i:t.iceConnectionState;switch(e){case"checking":return"connecting";case"completed":return"connected";default:return e}};var gs={};_.defineProperty(gs,"__esModule",{value:!0}),gs.TypedEmitter=St.EventEmitter;const{TypedEmitter:_s}=gs;class vs extends _s{cmd(t,i){return this.tm.cmd(t,i,this.namespace)}event(t,i){return this.tm.event(t,i,this.namespace)}close(){return this.tm.namespaces.delete(this.namespace)}constructor(t,i){super(),this.namespace=t,this.tm=i}}const ws=A(class extends _s{bv(t){this.transport.send(JSON.stringify(t))}cmd(t,i,e){return void 0===e&&(e=void 0),new Promise(((s,n)=>{if(!t||0===t.length)throw new b("Bad command name");const r={type:"cmd",transId:this.maxId++,name:t,data:i};e&&(r.namespace=e),this.transactions.set(r.transId,g(d({},r),{resolve:s,reject:n}));try{this.bv(r)}catch(t){throw this.transactions.delete(r.transId),t}}))}event(t,i,e){if(void 0===e&&(e=void 0),!t||0===t.length)throw new b("Bad event name");const s={type:"event",name:t,data:i};e&&(s.namespace=e),this.bv(s)}namespace(t){let i=this.namespaces.get(t);return i||(i=new vs(t,this),this.namespaces.set(t,i),i)}close(){for(const t of this.namespaces.values())t.close();this.transport.removeListener?this.transport.removeListener("message",this.listener):this.transport.removeEventListener("message",this.listener)}constructor(t){super(),this.maxId=0,this.namespaces=new Map,this.transactions=new Map,this.transport=t,this.listener=t=>{let i;try{i=JSON.parse(t.utf8Data||t.data||t)}catch(t){return}switch(i.type){case"cmd":const{transId:t}=i,s={name:i.name,data:i.data,namespace:i.namespace,accept:i=>{this.bv({type:"response",transId:t,data:i})},reject:i=>{this.bv({type:"error",transId:t,data:i})}};if(s.namespace){const t=this.namespaces.get(s.namespace);t?t.emit("cmd",s):this.emit("cmd",s)}else this.emit("cmd",s);break;case"response":{const t=this.transactions.get(i.transId);if(!t)return;this.transactions.delete(i.transId),t.resolve(i.data);break}case"error":{const t=this.transactions.get(i.transId);if(!t)return;this.transactions.delete(i.transId),t.reject(i.data);break}case"event":const n={name:i.name,data:i.data,namespace:i.namespace};if(n.namespace){var e=this.namespaces.get(n.namespace);e?e.emit("event",n):this.emit("event",n)}else this.emit("event",n)}},this.transport.addListener?this.transport.addListener("message",this.listener):this.transport.addEventListener("message",this.listener)}}),ms=at.get("Signaling"),ps="wsConnectionSuccess",As="wsConnectionError",ys="wsConnectionClose",bs="broadcastEvent";class Ms extends Nt{async connect(){var t;return ms.info("Connecting to Signaling Server"),this.transactionManager&&(null==(t=this.webSocket)?void 0:t.readyState)===WebSocket.OPEN?(ms.info("Connected to server: ",this.webSocket.url),ms.debug("WebSocket value: ",{url:this.webSocket.url,protocol:this.webSocket.protocol,readyState:this.webSocket.readyState,binaryType:this.webSocket.binaryType,extensions:this.webSocket.extensions}),this.emit(ps,{ws:this.webSocket,tm:this.transactionManager}),this.webSocket):new Promise(((t,i)=>{this.webSocket=new WebSocket(this.wsUrl),this.transactionManager=new ws(this.webSocket),this.webSocket.onopen=()=>{ms.info("WebSocket opened"),this.transactionManager.on("event",(t=>{this.emit(bs,t)})),ms.info("Connected to server: ",this.webSocket.url),ms.debug("WebSocket value: ",{url:this.webSocket.url,protocol:this.webSocket.protocol,readyState:this.webSocket.readyState,binaryType:this.webSocket.binaryType,extensions:this.webSocket.extensions}),this.emit(ps,{ws:this.webSocket,tm:this.transactionManager}),t(this.webSocket)},this.webSocket.onerror=()=>{ms.error("WebSocket not connected: ",this.webSocket.url),this.emit(As,this.webSocket.url),i(this.webSocket.url)},this.webSocket.onclose=()=>{this.webSocket=null,this.transactionManager=null,ms.info("Connection closed with Signaling Server."),this.emit(ys)}}))}close(){var t;ms.info("Closing connection with Signaling Server."),null==(t=this.webSocket)||t.close()}async subscribe(t,i,e,s){var n,r,o,h;void 0===e&&(e=null),void 0===s&&(s=null),ms.info("Starting subscription to streamName: ",this.streamName),ms.debug("Subcription local description: ",t);const a=Ts(i,e,s),u={sdp:t=qe.adaptCodecName(t,"AV1X",Je.AV1),streamId:this.streamName,pinnedSourceId:a.pinnedSourceId,excludedSourceIds:a.excludedSourceIds,events:["active","inactive","layers","viewercount","vad","updated","migrate","stopped"]};a.vad&&(u.vad=!0),Array.isArray(a.events)&&(u.events=a.events),a.forcePlayoutDelay&&(u.forcePlayoutDelay=a.forcePlayoutDelay),a.layer&&(u.layer=a.layer);try{if(a.disableVideo&&a.disableAudio)throw new b("Not attempting to connect as video and audio are disabled");await this.connect(),ms.info("Sending view command");const t=await this.transactionManager.cmd("view",u),i=null==(h=null==(o=null==(r=null==(n=RTCRtpReceiver.getCapabilities)?void 0:n.call(RTCRtpReceiver,"video"))?void 0:r.codecs)?void 0:o.find)?void 0:h.call(o,(t=>"video/AV1X"===t.mimeType));return t.sdp=i?qe.adaptCodecName(t.sdp,Je.AV1,"AV1X"):t.sdp,ms.info("Command sent, subscriberId: ",t.subscriberId),ms.debug("Command result: ",t),this.serverId=t.subscriberId,this.clusterId=t.clusterId,this.streamViewId=t.streamViewId,Y(this.streamName),V(this.serverId),G(t.streamViewId),X(this.clusterId),t.sdp}catch(t){throw ms.error("Error sending view command, error: ",t),t}}async publish(t,i,e,s){var n,r,o,h,a,u,c,l;void 0===e&&(e=null),void 0===s&&(s=null);const d=Ss(i,e,s);ms.info("Starting publishing to streamName: ".concat(this.streamName,", codec: ").concat(d.codec)),ms.debug("Publishing local description: ",t);const f=null!=(h=null==(o=null==(r=null==(n=rs.getCapabilities)?void 0:n.call(rs,"video"))?void 0:r.codecs)?void 0:o.map((t=>t.codec)))?h:[],g=_.values(Je);if(-1===g.indexOf(d.codec))throw ms.error("Invalid codec ".concat(d.codec,". Possible values are: "),g),new b("Invalid codec ".concat(d.codec,". Possible values are: ").concat(g));if(f.length>0&&-1===f.indexOf(d.codec))throw ms.error("Unsupported codec ".concat(d.codec,". Possible values are: "),f),new b("Unsupported codec ".concat(d.codec,". Possible values are: ").concat(f));d.codec===Je.AV1&&(t=qe.adaptCodecName(t,"AV1X",Je.AV1));const v={name:this.streamName,sdp:t,codec:d.codec,sourceId:d.sourceId};if(d.priority){if(!(Number.isInteger(d.priority)&&d.priority>=-2147483648&&d.priority<=2147483647))throw new b("Invalid value for priority option. It should be a decimal integer between the range [-2^31, +2^31 - 1]");v.priority=d.priority}null!==d.record&&(v.record=d.record),Array.isArray(d.events)&&(v.events=d.events);try{if(d.disableVideo&&d.disableAudio)throw new b("Not attempting to connect as video and audio are disabled");await this.connect(),ms.info("Sending publish command");const t=await this.transactionManager.cmd("publish",v);if(d.codec===Je.AV1){const i=null==(l=null==(c=null==(u=null==(a=RTCRtpSender.getCapabilities)?void 0:a.call(RTCRtpSender,"video"))?void 0:u.codecs)?void 0:c.find)?void 0:l.call(c,(t=>"video/AV1X"===t.mimeType));t.sdp=i?qe.adaptCodecName(t.sdp,Je.AV1,"AV1X"):t.sdp}return ms.info("Command sent, publisherId: ",t.publisherId),ms.debug("Command result: ",t),this.serverId=t.publisherId,this.clusterId=t.clusterId,Y(this.streamName),V(this.serverId),W(t.feedId),X(this.clusterId),t.sdp}catch(t){throw ms.error("Error sending publish command, error: ",t),t}}async cmd(t,i){return ms.info("Sending cmd: ".concat(t)),this.transactionManager.cmd(t,i)}constructor(t={streamName:null,url:"ws://localhost:8080/"}){super(),this.streamName=t.streamName,this.wsUrl=t.url,this.webSocket=null,this.transactionManager=null,this.serverId=null,this.clusterId=null,this.streamViewId=null}}const Ts=(t,i,e)=>{let s="object"==typeof t?t:{};return 0===_.keys(s).length&&(s={vad:t,pinnedSourceId:i,excludedSourceIds:e}),s},Ss=(t,i,e)=>{let s="object"==typeof t?t:{};return 0===_.keys(s).length&&(s={codec:null!=t?t:Je.H264,record:i,sourceId:e}),s};class Ns extends b{constructor(t,i){super(t),this.name="FetchError",this.status=i}}const Is=at.get("Director"),Ds="WebRtc";let Es="",ks="https://director.millicast.com";const xs={setEndpoint:t=>{ks=t.replace(/\/$/,"")},getEndpoint:()=>ks,setLiveDomain:t=>{Es=t.replace(/\/$/,"")},getLiveDomain:()=>Es,getPublisher:async(t,i,e)=>{void 0===i&&(i=null),void 0===e&&(e=Ds);const s=Ls(t,i,e);Is.info("Getting publisher connection path for stream name: ",s.streamName);const n={streamName:s.streamName,streamType:s.streamType},r={"Content-Type":"application/json",Authorization:"Bearer ".concat(s.token)},o="".concat(xs.getEndpoint(),"/api/director/publish");try{const t=await fetch(o,{method:"POST",headers:r,body:JSON.stringify(n)});let i=await t.json();if("fail"===i.status)throw new Ns(i.data.message,t.status);return i=js(i),Is.debug("Getting publisher response: ",i),F(i.data.streamAccountId),i.data}catch(t){throw Is.error("Error while getting publisher connection path. ",t),t}},getSubscriber:async(t,i,e)=>{void 0===i&&(i=null),void 0===e&&(e=null);const s=Cs(t,i,e);F(s.streamAccountId),Is.info("Getting subscriber connection data for stream name: ".concat(s.streamName," and account id: ").concat(s.streamAccountId));const n={streamAccountId:s.streamAccountId,streamName:s.streamName};let r={"Content-Type":"application/json"};s.subscriberToken&&(r=g(d({},r),{Authorization:"Bearer ".concat(s.subscriberToken)}));const o="".concat(xs.getEndpoint(),"/api/director/subscribe");try{const t=await fetch(o,{method:"POST",headers:r,body:JSON.stringify(n)});let i=await t.json();if("fail"===i.status)throw new Ns(i.data.message,t.status);return i=js(i),Is.debug("Getting subscriber response: ",i),s.subscriberToken&&(i.data.subscriberToken=s.subscriberToken),i.data}catch(t){throw Is.error("Error while getting subscriber connection path. ",t),t}}},Ls=(t,i,e)=>{let s="object"==typeof t?t:{};return 0===_.keys(s).length&&(s={token:t,streamName:i,streamType:e}),s},Cs=(t,i,e)=>{let s="object"==typeof t?t:{};return 0===_.keys(s).length&&(s={streamName:t,streamAccountId:i,subscriberToken:e}),s},js=t=>{if(xs.getLiveDomain()){const i=/\/\/(.*?)\//,e=t.data.urls.map((t=>{const e=i.exec(t);return t.replace(e[1],xs.getLiveDomain())}));t.data.urls=e}if(t.data.drmObject){const i=t.data.drmObject.playReadyUrl;i&&(t.data.drmObject.playReadyUrl="".concat(xs.getEndpoint()).concat(i));const e=t.data.drmObject.widevineUrl;e&&(t.data.drmObject.widevineUrl="".concat(xs.getEndpoint()).concat(e));const s=t.data.drmObject.fairPlayUrl;s&&(t.data.drmObject.fairPlayUrl="".concat(xs.getEndpoint()).concat(s));const n=t.data.drmObject.fairPlayCertUrl;n&&(t.data.drmObject.fairPlayCertUrl="".concat(xs.getEndpoint()).concat(n))}return t};function Os(t){this.message=t}Os.prototype=new b,Os.prototype.name="InvalidCharacterError";var Rs=typeof s<"u"&&s.atob&&s.atob.bind(s)||function(t){var i=String(t).replace(/=+$/,"");if(i.length%4==1)throw new Os("'atob' failed: The string to be decoded is not correctly encoded.");for(var e,s,n=0,r=0,o="";s=i.charAt(r++);~s&&(e=n%4?64*e+s:s,n++%4)?o+=String.fromCharCode(255&e>>(-2*n&6)):0)s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(s);return o};function Ps(t){this.message=t}function zs(t,i){if("string"!=typeof t)throw new Ps("Invalid token specified");var e=!0===(i=i||{}).header?0:1;try{return JSON.parse(function(t){var i=t.replace(/-/g,"+").replace(/_/g,"/");switch(i.length%4){case 0:break;case 2:i+="==";break;case 3:i+="=";break;default:throw"Illegal base64url string!"}try{return decodeURIComponent(Rs(i).replace(/(.)/g,(function(t,i){var e=i.charCodeAt(0).toString(16).toUpperCase();return e.length<2&&(e="0"+e),"%"+e})))}catch(t){return Rs(i)}}(t.split(".")[e]))}catch(t){throw new Ps("Invalid token specified: "+t.message)}}Ps.prototype=new b,Ps.prototype.name="InvalidTokenError";var Bs={exports:{}};!function(t,i){!function(e){if(null!=i&&"number"!=typeof i.nodeType)t.exports=e();else{var s=e(),n=typeof self<"u"?self:$.global;"function"!=typeof n.btoa&&(n.btoa=s.btoa),"function"!=typeof n.atob&&(n.atob=s.atob)}}((function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function i(t){this.message=t}return i.prototype=new b,i.prototype.name="InvalidCharacterError",{btoa:function(e){for(var s,n,r,o,h=String(e),a=0,u="";a<h.length;){if(s=h.charCodeAt(a++),n=h.charCodeAt(a++),r=h.charCodeAt(a++),s>255||n>255||r>255)throw new i("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");u+=t.charAt((o=s<<16|n<<8|r)>>18&63)+t.charAt(o>>12&63)+t.charAt(o>>6&63)+t.charAt(63&o)}switch(h.length%3){case 0:return u;case 1:return u.slice(0,-2)+"==";case 2:return u.slice(0,-1)+"="}},atob:function(e){var s=String(e).replace(/[=]+$/,"");if(s.length%4==1)throw new i("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,r,o=0,h=0,a="";r=s.charAt(h++);~r&&(n=o%4?64*n+r:r,o++%4)?a+=String.fromCharCode(255&n>>(-2*o&6)):0)r=t.indexOf(r);return a}}}))}(Bs,Bs.exports);var Us=Bs.exports,Qs={exports:{}};!function(t,i){var e;self,e=()=>{return t={7629:(t,i,e)=>{const s=e(375),n=e(8571),r=e(9474),o=e(1687),h=e(8652),a=e(8160),u=e(3292),c=e(6354),l=e(8901),d=e(9708),f=e(6914),g=e(2294),v=e(6133),w=e(1152),m=e(8863),p=e(2036),A={Base:class{Mv(){this.Tv=new g.Ids,this.Sv=null,this.Nv=new v.Manager,this.Iv=null,this.Dv=null,this.Ev=null,this.xv={},this.Lv=[],this.Cv=new Map,this.$_terms={},this.$_temp={ruleset:null,whens:{}}}describe(){return s("function"==typeof d.describe,"Manifest functionality disabled"),d.describe(this)}allow(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];return a.verifyFlat(i,"allow"),this.Ov(i,"Dv")}alter(t){s(t&&"object"==typeof t&&!Array.isArray(t),"Invalid targets argument"),s(!this.Rv(),"Cannot set alterations inside a ruleset");const i=this.clone();i.$_terms.alterations=i.$_terms.alterations||[];for(const e in t){const n=t[e];s("function"==typeof n,"Alteration adjuster for",e,"must be a function"),i.$_terms.alterations.push({target:e,adjuster:n})}return i.$_temp.ruleset=!1,i}artifact(t){return s(void 0!==t,"Artifact cannot be undefined"),s(!this.Iv,"Cannot set an artifact with a rule cache"),this.$_setFlag("artifact",t)}cast(t){return s(!1===t||"string"==typeof t,"Invalid to value"),s(!1===t||this.Pv.cast[t],"Type",this.type,"does not support casting to",t),this.$_setFlag("cast",!1===t?void 0:t)}default(t,i){return this.zv("default",t,i)}description(t){return s(t&&"string"==typeof t,"Description must be a non-empty string"),this.$_setFlag("description",t)}empty(t){const i=this.clone();return void 0!==t&&(t=i.$_compile(t,{override:!1})),i.$_setFlag("empty",t,{clone:!1})}error(t){return s(t,"Missing error"),s(t instanceof b||"function"==typeof t,"Must provide a valid Error object or a function"),this.$_setFlag("error",t)}example(t,i){return void 0===i&&(i={}),s(void 0!==t,"Missing example"),a.assertOptions(i,["override"]),this.Bv("examples",t,{single:!0,override:i.override})}external(t,i){return"object"==typeof t&&(s(!i,"Cannot combine options with description"),i=t.description,t=t.method),s("function"==typeof t,"Method must be a function"),s(void 0===i||i&&"string"==typeof i,"Description must be a non-empty string"),this.Bv("externals",{method:t,description:i},{single:!0})}failover(t,i){return this.zv("failover",t,i)}forbidden(){return this.presence("forbidden")}id(t){return t?(s("string"==typeof t,"id must be a non-empty string"),s(/^[^\.]+$/.test(t),"id cannot contain period character"),this.$_setFlag("id",t)):this.$_setFlag("id",void 0)}invalid(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];return this.Ov(i,"Ev")}label(t){return s(t&&"string"==typeof t,"Label name must be a non-empty string"),this.$_setFlag("label",t)}meta(t){return s(void 0!==t,"Meta cannot be undefined"),this.Bv("metas",t,{single:!0})}note(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];s(i.length,"Missing notes");for(const t of i)s(t&&"string"==typeof t,"Notes must be non-empty strings");return this.Bv("notes",i)}only(t){return void 0===t&&(t=!0),s("boolean"==typeof t,"Invalid mode:",t),this.$_setFlag("only",t)}optional(){return this.presence("optional")}prefs(t){s(t,"Missing preferences"),s(void 0===t.context,"Cannot override context"),s(void 0===t.externals,"Cannot override externals"),s(void 0===t.warnings,"Cannot override warnings"),s(void 0===t.debug,"Cannot override debug"),a.checkPreferences(t);const i=this.clone();return i.Sv=a.preferences(i.Sv,t),i}presence(t){return s(["optional","required","forbidden"].includes(t),"Unknown presence mode",t),this.$_setFlag("presence",t)}raw(t){return void 0===t&&(t=!0),this.$_setFlag("result",t?"raw":void 0)}result(t){return s(["raw","strip"].includes(t),"Unknown result mode",t),this.$_setFlag("result",t)}required(){return this.presence("required")}strict(t){const i=this.clone(),e=void 0!==t&&!t;return i.Sv=a.preferences(i.Sv,{convert:e}),i}strip(t){return void 0===t&&(t=!0),this.$_setFlag("result",t?"strip":void 0)}tag(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];s(i.length,"Missing tags");for(const t of i)s(t&&"string"==typeof t,"Tags must be non-empty strings");return this.Bv("tags",i)}unit(t){return s(t&&"string"==typeof t,"Unit name must be a non-empty string"),this.$_setFlag("unit",t)}valid(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];a.verifyFlat(i,"valid");const s=this.allow(...i);return s.$_setFlag("only",!!s.Dv,{clone:!1}),s}when(t,i){const e=this.clone();e.$_terms.whens||(e.$_terms.whens=[]);const n=u.when(e,t,i);if(!["any","link"].includes(e.type)){const t=n.is?[n]:n.switch;for(const i of t)s(!i.then||"any"===i.then.type||i.then.type===e.type,"Cannot combine",e.type,"with",i.then&&i.then.type),s(!i.otherwise||"any"===i.otherwise.type||i.otherwise.type===e.type,"Cannot combine",e.type,"with",i.otherwise&&i.otherwise.type)}return e.$_terms.whens.push(n),e.$_mutateRebuild()}cache(t){s(!this.Rv(),"Cannot set caching inside a ruleset"),s(!this.Iv,"Cannot override schema cache"),s(void 0===this.xv.artifact,"Cannot cache a rule with an artifact");const i=this.clone();return i.Iv=t||h.provider.provision(),i.$_temp.ruleset=!1,i}clone(){const t=_.create(_.getPrototypeOf(this));return this.Uv(t)}concat(t){s(a.isSchema(t),"Invalid schema object"),s("any"===this.type||"any"===t.type||t.type===this.type,"Cannot merge type",this.type,"with another type:",t.type),s(!this.Rv(),"Cannot concatenate onto a schema with open ruleset"),s(!t.Rv(),"Cannot concatenate a schema with open ruleset");let i=this.clone();if("any"===this.type&&"any"!==t.type){const e=t.clone();for(const t of _.keys(i))"type"!==t&&(e[t]=i[t]);i=e}i.Tv.concat(t.Tv),i.Nv.register(t,v.toSibling),i.Sv=i.Sv?a.preferences(i.Sv,t.Sv):t.Sv,i.Dv=p.merge(i.Dv,t.Dv,t.Ev),i.Ev=p.merge(i.Ev,t.Ev,t.Dv);for(const e of t.Cv.keys())i.Cv.has(e)&&(i.Lv=i.Lv.filter((t=>t.keep||t.name!==e)),i.Cv.delete(e));for(const e of t.Lv)t.Pv.rules[e.method].multi||i.Cv.set(e.name,e),i.Lv.push(e);if(i.xv.empty&&t.xv.empty){i.xv.empty=i.xv.empty.concat(t.xv.empty);const e=_.assign({},t.xv);delete e.empty,o(i.xv,e)}else if(t.xv.empty){i.xv.empty=t.xv.empty;const e=_.assign({},t.xv);delete e.empty,o(i.xv,e)}else o(i.xv,t.xv);for(const e in t.$_terms){const s=t.$_terms[e];s?i.$_terms[e]?i.$_terms[e]=i.$_terms[e].concat(s):i.$_terms[e]=s.slice():i.$_terms[e]||(i.$_terms[e]=s)}return this.$_root.Qv&&this.$_root.Qv.Fv(i,[this,t]),i.$_mutateRebuild()}extend(t){return s(!t.base,"Cannot extend type with another base"),l.type(this,t)}extract(t){return t=Array.isArray(t)?t:t.split("."),this.Tv.reach(t)}fork(t,i){s(!this.Rv(),"Cannot fork inside a ruleset");let e=this;for(let s of[].concat(t))s=Array.isArray(s)?s:s.split("."),e=e.Tv.fork(s,i,e);return e.$_temp.ruleset=!1,e}rule(t){const i=this.Pv;a.assertOptions(t,_.keys(i.modifiers)),s(!1!==this.$_temp.ruleset,"Cannot apply rules to empty ruleset or the last rule added does not support rule properties");const e=null===this.$_temp.ruleset?this.Lv.length-1:this.$_temp.ruleset;s(e>=0&&e<this.Lv.length,"Cannot apply rules to empty ruleset");const r=this.clone();for(let o=e;o<r.Lv.length;++o){const e=r.Lv[o],h=n(e);for(const n in t)i.modifiers[n](h,t[n]),s(h.name===e.name,"Cannot change rule name");r.Lv[o]=h,r.Cv.get(h.name)===e&&r.Cv.set(h.name,h)}return r.$_temp.ruleset=!1,r.$_mutateRebuild()}get ruleset(){s(!this.Rv(),"Cannot start a new ruleset without closing the previous one");const t=this.clone();return t.$_temp.ruleset=t.Lv.length,t}get $(){return this.ruleset}tailor(t){t=[].concat(t),s(!this.Rv(),"Cannot tailor inside a ruleset");let i=this;if(this.$_terms.alterations)for(const{target:e,adjuster:n}of this.$_terms.alterations)t.includes(e)&&(i=n(i),s(a.isSchema(i),"Alteration adjuster for",e,"failed to return a schema object"));return i=i.$_modify({each:i=>i.tailor(t),ref:!1}),i.$_temp.ruleset=!1,i.$_mutateRebuild()}tracer(){return w.location?w.location(this):this}validate(t,i){return m.entry(t,this,i)}validateAsync(t,i){return m.entryAsync(t,this,i)}$_addRule(t){"string"==typeof t&&(t={name:t}),s(t&&"object"==typeof t,"Invalid options"),s(t.name&&"string"==typeof t.name,"Invalid rule name");for(const i in t)s("_"!==i[0],"Cannot set private rule properties");const i=_.assign({},t);i.Kg=[],i.method=i.method||i.name;const e=this.Pv.rules[i.method],n=i.args;s(e,"Unknown rule",i.method);const r=this.clone();if(n){s(1===_.keys(n).length||_.keys(n).length===this.Pv.rules[i.name].args.length,"Invalid rule definition for",this.type,i.name);for(const t in n){let o=n[t];if(e.argsByName){const h=e.argsByName.get(t);if(h.ref&&a.isResolvable(o))i.Kg.push(t),r.$_mutateRegister(o);else if(h.normalize&&(o=h.normalize(o),n[t]=o),h.assert){const i=a.validateArg(o,t,h);s(!i,i,"or reference")}}void 0!==o?n[t]=o:delete n[t]}}return e.multi||(r.Yv(i.name,{clone:!1}),r.Cv.set(i.name,i)),!1===r.$_temp.ruleset&&(r.$_temp.ruleset=null),e.priority?r.Lv.unshift(i):r.Lv.push(i),r}$_compile(t,i){return u.schema(this.$_root,t,i)}$_createError(t,i,e,s,n,r){void 0===r&&(r={});const o=!1!==r.flags?this.xv:{},h=r.messages?f.merge(this.Pv.messages,r.messages):this.Pv.messages;return new c.Report(t,i,e,o,h,s,n)}$_getFlag(t){return this.xv[t]}$_getRule(t){return this.Cv.get(t)}$_mapLabels(t){return t=Array.isArray(t)?t:t.split("."),this.Tv.labels(t)}$_match(t,i,e,s){(e=_.assign({},e)).abortEarly=!0,e.Vv=!1,i.snapshot();const n=!m.validate(t,this,i,e,s).errors;return i.restore(),n}$_modify(t){return a.assertOptions(t,["each","once","ref","schema"]),g.schema(this,t)||this}$_mutateRebuild(){return s(!this.Rv(),"Cannot add this rule inside a ruleset"),this.Nv.reset(),this.Tv.reset(),this.$_modify({each:(t,i)=>{let{source:e,name:s,path:n,key:r}=i;const o=this.Pv[e][s]&&this.Pv[e][s].register;!1!==o&&this.$_mutateRegister(t,{family:o,key:r})}}),this.Pv.rebuild&&this.Pv.rebuild(this),this.$_temp.ruleset=!1,this}$_mutateRegister(t,i){let{family:e,key:s}=void 0===i?{}:i;this.Nv.register(t,e),this.Tv.register(t,{key:s})}$_property(t){return this.Pv.properties[t]}$_reach(t){return this.Tv.reach(t)}$_rootReferences(){return this.Nv.roots()}$_setFlag(t,i,e){void 0===e&&(e={}),s("_"===t[0]||!this.Rv(),"Cannot set flag inside a ruleset");const n=this.Pv.flags[t]||{};if(r(i,n.default)&&(i=void 0),r(i,this.xv[t]))return this;const o=!1!==e.clone?this.clone():this;return void 0!==i?(o.xv[t]=i,o.$_mutateRegister(i)):delete o.xv[t],"_"!==t[0]&&(o.$_temp.ruleset=!1),o}$_parent(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];return this[t][a.symbols.parent].call(this,...e)}$_validate(t,i,e){return m.validate(t,this,i,e)}Uv(t){t.type=this.type,t.$_root=this.$_root,t.$_temp=_.assign({},this.$_temp),t.$_temp.whens={},t.Tv=this.Tv.clone(),t.Sv=this.Sv,t.Dv=this.Dv&&this.Dv.clone(),t.Ev=this.Ev&&this.Ev.clone(),t.Lv=this.Lv.slice(),t.Cv=n(this.Cv,{shallow:!0}),t.Nv=this.Nv.clone(),t.xv=_.assign({},this.xv),t.Iv=null,t.$_terms={};for(const i in this.$_terms)t.$_terms[i]=this.$_terms[i]?this.$_terms[i].slice():null;t.$_super={};for(const i in this.$_super)t.$_super[i]=this.Gv[i].bind(t);return t}Wv(){const t=this.clone();t.Mv();const i=t.Pv.terms;for(const e in i){const s=i[e];t.$_terms[e]=s.init}return t.$_mutateRebuild()}zv(t,i,e){return void 0===e&&(e={}),a.assertOptions(e,"literal"),s(void 0!==i,"Missing",t,"value"),s("function"==typeof i||!e.literal,"Only function value supports literal option"),"function"==typeof i&&e.literal&&(i={[a.symbols.literal]:!0,literal:i}),this.$_setFlag(t,i)}Zv(t,i,e){if(!this.$_terms.whens)return{schema:this};const s=[],n=[];for(let r=0;r<this.$_terms.whens.length;++r){const o=this.$_terms.whens[r];if(o.concat){s.push(o.concat),n.push("".concat(r,".concat"));continue}const h=o.ref?o.ref.resolve(t,i,e):t,a=o.is?[o]:o.switch,u=n.length;for(let u=0;u<a.length;++u){const{is:c,then:l,otherwise:d}=a[u],f="".concat(r).concat(o.switch?"."+u:"");if(c.$_match(h,i.nest(c,"".concat(f,".is")),e)){if(l){const r=i.localize([...i.path,"".concat(f,".then")],i.ancestors,i.schemas),{schema:o,id:h}=l.Zv(t,r,e);s.push(o),n.push("".concat(f,".then").concat(h?"(".concat(h,")"):""));break}}else if(d){const r=i.localize([...i.path,"".concat(f,".otherwise")],i.ancestors,i.schemas),{schema:o,id:h}=d.Zv(t,r,e);s.push(o),n.push("".concat(f,".otherwise").concat(h?"(".concat(h,")"):""));break}}if(o.break&&n.length>u)break}const r=n.join(", ");if(i.mainstay.tracer.debug(i,"rule","when",r),!r)return{schema:this};if(!i.mainstay.tracer.active&&this.$_temp.whens[r])return{schema:this.$_temp.whens[r],id:r};let o=this;this.Pv.generate&&(o=this.Pv.generate(this,t,i,e));for(const t of s)o=o.concat(t);return this.$_root.Qv&&this.$_root.Qv.Fv(o,[this,...s]),this.$_temp.whens[r]=o,{schema:o,id:r}}Bv(t,i,e){void 0===e&&(e={}),s(!this.Rv(),"Cannot set ".concat(t," inside a ruleset"));const n=this.clone();return n.$_terms[t]&&!e.override||(n.$_terms[t]=[]),e.single?n.$_terms[t].push(i):n.$_terms[t].push(...i),n.$_temp.ruleset=!1,n}Rv(){return null!==this.$_temp.ruleset&&!1!==this.$_temp.ruleset}Yv(t,i){if(void 0===i&&(i={}),!this.Cv.has(t))return this;const e=!1!==i.clone?this.clone():this;e.Cv.delete(t);const s=[];for(let i=0;i<e.Lv.length;++i){const n=e.Lv[i];n.name!==t||n.keep?s.push(n):e.Rv()&&i<e.$_temp.ruleset&&--e.$_temp.ruleset}return e.Lv=s,e}Ov(t,i){a.verifyFlat(t,i.slice(1,-1));const e=this.clone(),n=t[0]===a.symbols.override;if(n&&(t=t.slice(1)),!e[i]&&t.length?e[i]=new p:n&&(e[i]=t.length?new p:null,e.$_mutateRebuild()),!e[i])return e;n&&e[i].override();for(const n of t){s(void 0!==n,"Cannot call allow/valid/invalid with undefined"),s(n!==a.symbols.override,"Override must be the first value");const t="Ev"===i?"Dv":"Ev";e[t]&&(e[t].remove(n),e[t].length||(s("Dv"===i||!e.xv.only,"Setting invalid value",n,"leaves schema rejecting all values due to previous valid rule"),e[t]=null)),e[i].add(n,e.Nv)}return e}constructor(t){this.type=t,this.$_root=null,this.Pv={},this.Mv()}}};A.Base.prototype[a.symbols.any]={version:a.version,compile:u.compile,root:"$_root"},A.Base.prototype.isImmutable=!0,A.Base.prototype.deny=A.Base.prototype.invalid,A.Base.prototype.disallow=A.Base.prototype.invalid,A.Base.prototype.equal=A.Base.prototype.valid,A.Base.prototype.exist=A.Base.prototype.required,A.Base.prototype.not=A.Base.prototype.invalid,A.Base.prototype.options=A.Base.prototype.prefs,A.Base.prototype.preferences=A.Base.prototype.prefs,t.exports=new A.Base},8652:(t,i,e)=>{const s=e(375),n=e(8571),r=e(8160),o={max:1e3,supported:new Set(["undefined","boolean","number","string"])};i.provider={provision:t=>new o.Cache(t)},o.Cache=class{get length(){return this.Hv.size}set(t,i){if(null!==t&&!o.supported.has(typeof t))return;let e=this.Hv.get(t);if(e)return e.value=i,void this.Xv.first(e);e=this.Xv.unshift({key:t,value:i}),this.Hv.set(t,e),this.qv()}get(t){const i=this.Hv.get(t);if(i)return this.Xv.first(i),n(i.value)}qv(){if(this.Hv.size>this.Kv){const t=this.Xv.pop();this.Hv.delete(t.key)}}constructor(t={}){r.assertOptions(t,["max"]),s(void 0===t.max||t.max&&t.max>0&&isFinite(t.max),"Invalid max cache size"),this.Kv=t.max||o.max,this.Hv=new Map,this.Xv=new o.List}},o.List=class{unshift(t){return t.next=null,t.prev=this.head,this.head&&(this.head.next=t),this.head=t,this.tail||(this.tail=t),t}first(t){t!==this.head&&(this.Jv(t),this.unshift(t))}pop(){return this.Jv(this.tail)}Jv(t){const{next:i,prev:e}=t;return i.prev=e,e&&(e.next=i),t===this.tail&&(this.tail=i),t.prev=null,t.next=null,t}constructor(){this.tail=null,this.head=null}}},8160:(t,i,e)=>{const s=e(375),n=e(7916),r=e(5934);let o,h;const a={isoDate:/^(?:[-+]\d{2})?(?:\d{4}(?!\d{2}\b))(?:(-?)(?:(?:0[1-9]|1[0-2])(?:\1(?:[12]\d|0[1-9]|3[01]))?|W(?:[0-4]\d|5[0-2])(?:-?[1-7])?|(?:00[1-9]|0[1-9]\d|[12]\d{2}|3(?:[0-5]\d|6[1-6])))(?![T]$|[T][\d]+Z$)(?:[T\s](?:(?:(?:[01]\d|2[0-3])(?:(:?)[0-5]\d)?|24\:?00)(?:[.,]\d+(?!:))?)(?:\2[0-5]\d(?:[.,]\d+)?)?(?:[Z]|(?:[+-])(?:[01]\d|2[0-3])(?::?[0-5]\d)?)?)?)?$/};i.version=r.version,i.defaults={abortEarly:!0,allowUnknown:!1,artifacts:!1,cache:!0,context:null,convert:!0,dateFormat:"iso",errors:{escapeHtml:!1,label:"path",language:null,render:!0,stack:!1,wrap:{label:'"',array:"[]"}},externals:!0,messages:{},nonEnumerables:!1,noDefaults:!1,presence:"optional",skipFunctions:!1,stripUnknown:!1,warnings:!1},i.symbols={any:It("@hapi/joi/schema"),arraySingle:Bo("arraySingle"),deepDefault:Bo("deepDefault"),errors:Bo("errors"),literal:Bo("literal"),override:Bo("override"),parent:Bo("parent"),prefs:Bo("prefs"),ref:Bo("ref"),template:Bo("template"),values:Bo("values")},i.assertOptions=function(t,i,e){void 0===e&&(e="Options"),s(t&&"object"==typeof t&&!Array.isArray(t),"Options must be of type object");const n=_.keys(t).filter((t=>!i.includes(t)));s(0===n.length,"".concat(e," contain unknown keys: ").concat(n))},i.checkPreferences=function(t){h=h||e(3378);const i=h.preferences.validate(t);if(i.error)throw new n([i.error.details[0].message])},i.compare=function(t,i,e){switch(e){case"=":return t===i;case">":return t>i;case"<":return t<i;case">=":return t>=i;case"<=":return t<=i}},i.default=function(t,i){return void 0===t?i:t},i.isIsoDate=function(t){return a.isoDate.test(t)},i.isNumber=function(t){return"number"==typeof t&&!j(t)},i.isResolvable=function(t){return!!t&&(t[i.symbols.ref]||t[i.symbols.template])},i.isSchema=function(t,e){void 0===e&&(e={});const n=t&&t[i.symbols.any];return!!n&&(s(e.legacy||n.version===i.version,"Cannot mix different versions of joi schemas"),!0)},i.isValues=function(t){return t[i.symbols.values]},i.limit=function(t){return Number.isSafeInteger(t)&&t>=0},i.preferences=function(t,s){o=o||e(6914),t=t||{},s=s||{};const n=_.assign({},t,s);return s.errors&&t.errors&&(n.errors=_.assign({},t.errors,s.errors),n.errors.wrap=_.assign({},t.errors.wrap,s.errors.wrap)),s.messages&&(n.messages=o.compile(s.messages,t.messages)),delete n[i.symbols.prefs],n},i.tryWithPath=function(t,i,e){void 0===e&&(e={});try{return t()}catch(t){throw void 0!==t.path?t.path=i+"."+t.path:t.path=i,e.append&&(t.message="".concat(t.message," (").concat(t.path,")")),t}},i.validateArg=function(t,e,s){let{assert:n,message:r}=s;if(i.isSchema(n)){const i=n.validate(t);return i.error?i.error.message:void 0}if(!n(t))return e?"".concat(e," ").concat(r):r},i.verifyFlat=function(t,i){for(const e of t)s(!Array.isArray(e),"Method no longer accepts array arguments:",i)}},3292:(t,i,e)=>{const s=e(375),n=e(8160),r=e(6133),o={};i.schema=function(t,i,e){void 0===e&&(e={}),n.assertOptions(e,["appendPath","override"]);try{return o.schema(t,i,e)}catch(t){throw e.appendPath&&void 0!==t.path&&(t.message="".concat(t.message," (").concat(t.path,")")),t}},o.schema=function(t,i,e){s(void 0!==i,"Invalid undefined schema"),Array.isArray(i)&&(s(i.length,"Invalid empty array schema"),1===i.length&&(i=i[0]));const r=function(i){for(var s=arguments.length,n=new Array(s>1?s-1:0),r=1;r<s;r++)n[r-1]=arguments[r];return!1!==e.override?i.valid(t.override,...n):i.valid(...n)};if(o.simple(i))return r(t,i);if("function"==typeof i)return t.custom(i);if(s("object"==typeof i,"Invalid schema content:",typeof i),n.isResolvable(i))return r(t,i);if(n.isSchema(i))return i;if(Array.isArray(i)){for(const e of i)if(!o.simple(e))return t.alternatives().try(...i);return r(t,...i)}return i instanceof RegExp?t.string().regex(i):i instanceof Date?r(t.date(),i):(s(_.getPrototypeOf(i)===_.getPrototypeOf({}),"Schema can only contain plain objects"),t.object().keys(i))},i.ref=function(t,i){return r.isRef(t)?t:r.create(t,i)},i.compile=function(t,e,r){void 0===r&&(r={}),n.assertOptions(r,["legacy"]);const h=e&&e[n.symbols.any];if(h)return s(r.legacy||h.version===n.version,"Cannot mix different versions of joi schemas:",h.version,n.version),e;if("object"!=typeof e||!r.legacy)return i.schema(t,e,{appendPath:!0});const a=o.walk(e);return a?a.compile(a.root,e):i.schema(t,e,{appendPath:!0})},o.walk=function(t){if("object"!=typeof t)return null;if(Array.isArray(t)){for(const i of t){const t=o.walk(i);if(t)return t}return null}const i=t[n.symbols.any];if(i)return{root:t[i.root],compile:i.compile};s(_.getPrototypeOf(t)===_.getPrototypeOf({}),"Schema can only contain plain objects");for(const i in t){const e=o.walk(t[i]);if(e)return e}return null},o.simple=function(t){return null===t||["boolean","string","number"].includes(typeof t)},i.when=function(t,e,h){if(void 0===h&&(s(e&&"object"==typeof e,"Missing options"),h=e,e=r.create(".")),Array.isArray(h)&&(h={switch:h}),n.assertOptions(h,["is","not","then","otherwise","switch","break"]),n.isSchema(e))return s(void 0===h.is,'"is" can not be used with a schema condition'),s(void 0===h.not,'"not" can not be used with a schema condition'),s(void 0===h.switch,'"switch" can not be used with a schema condition'),o.condition(t,{is:e,then:h.then,otherwise:h.otherwise,break:h.break});if(s(r.isRef(e)||"string"==typeof e,"Invalid condition:",e),s(void 0===h.not||void 0===h.is,'Cannot combine "is" with "not"'),void 0===h.switch){let a=h;void 0!==h.not&&(a={is:h.not,then:h.otherwise,otherwise:h.then,break:h.break});let u=void 0!==a.is?t.$_compile(a.is):t.$_root.invalid(null,!1,0,"").required();return s(void 0!==a.then||void 0!==a.otherwise,'options must have at least one of "then", "otherwise", or "switch"'),s(void 0===a.break||void 0===a.then||void 0===a.otherwise,"Cannot specify then, otherwise, and break all together"),void 0===h.is||r.isRef(h.is)||n.isSchema(h.is)||(u=u.required()),o.condition(t,{ref:i.ref(e),is:u,then:a.then,otherwise:a.otherwise,break:a.break})}s(Array.isArray(h.switch),'"switch" must be an array'),s(void 0===h.is,'Cannot combine "switch" with "is"'),s(void 0===h.not,'Cannot combine "switch" with "not"'),s(void 0===h.then,'Cannot combine "switch" with "then"');const a={ref:i.ref(e),switch:[],break:h.break};for(let i=0;i<h.switch.length;++i){const e=h.switch[i],o=i===h.switch.length-1;n.assertOptions(e,o?["is","then","otherwise"]:["is","then"]),s(void 0!==e.is,'Switch statement missing "is"'),s(void 0!==e.then,'Switch statement missing "then"');const u={is:t.$_compile(e.is),then:t.$_compile(e.then)};if(r.isRef(e.is)||n.isSchema(e.is)||(u.is=u.is.required()),o){s(void 0===h.otherwise||void 0===e.otherwise,'Cannot specify "otherwise" inside and outside a "switch"');const i=void 0!==h.otherwise?h.otherwise:e.otherwise;void 0!==i&&(s(void 0===a.break,"Cannot specify both otherwise and break"),u.otherwise=t.$_compile(i))}a.switch.push(u)}return a},o.condition=function(t,i){for(const e of["then","otherwise"])void 0===i[e]?delete i[e]:i[e]=t.$_compile(i[e]);return i}},6354:(t,i,e)=>{const s=e(5688),n=e(8160),r=e(3328);i.Report=class{$v(t){if(this.template=t,!this.flags.label&&0===this.path.length){const t=this.iw(this.template,"root");t&&(this.local.label=t)}}toString(){if(this.message)return this.message;const t=this.code;if(!this.prefs.errors.render)return this.code;const i=this.iw(this.template)||this.iw(this.prefs.messages)||this.iw(this.messages);return void 0===i?'Error code "'.concat(t,'" is not defined, your custom type is missing the correct messages definition'):(this.message=i.render(this.value,this.state,this.prefs,this.local,{errors:this.prefs.errors,messages:[this.prefs.messages,this.messages]}),this.prefs.errors.label||(this.message=this.message.replace(/^"" /,"").trim()),this.message)}iw(t,e){return i.template(this.value,t,e||this.code,this.state,this.prefs)}constructor(t,e,s,n,r,o,h){if(this.code=t,this.flags=n,this.messages=r,this.path=o.path,this.prefs=h,this.state=o,this.value=e,this.message=null,this.template=null,this.local=s||{},this.local.label=i.label(this.flags,this.state,this.prefs,this.messages),void 0===this.value||this.local.hasOwnProperty("value")||(this.local.value=this.value),this.path.length){const t=this.path[this.path.length-1];"object"!=typeof t&&(this.local.key=t)}}},i.path=function(t){let i="";for(const e of t)"object"!=typeof e&&("string"==typeof e?(i&&(i+="."),i+=e):i+="[".concat(e,"]"));return i},i.template=function(t,i,e,s,o){if(!i)return;if(r.isTemplate(i))return"root"!==e?i:null;let h=o.errors.language;if(n.isResolvable(h)&&(h=h.resolve(t,s,o)),h&&i[h]){if(void 0!==i[h][e])return i[h][e];if(void 0!==i[h]["*"])return i[h]["*"]}return i[e]?i[e]:i["*"]},i.label=function(t,e,s,n){if(!s.errors.label)return"";if(t.label)return t.label;let r=e.path;return"key"===s.errors.label&&e.path.length>1&&(r=e.path.slice(-1)),i.path(r)||i.template(null,s.messages,"root",e,s)||n&&i.template(null,n,"root",e,s)||"value"},i.process=function(t,e,s){if(!t)return null;const{override:n,message:r,details:o}=i.details(t);if(n)return n;if(s.errors.stack)return new i.ValidationError(r,o,e);const h=b.stackTraceLimit;b.stackTraceLimit=0;const a=new i.ValidationError(r,o,e);return b.stackTraceLimit=h,a},i.details=function(t,i){void 0===i&&(i={});let e=[];const s=[];for(const n of t){if(n instanceof b){if(!1!==i.override)return{override:n};const t=n.toString();e.push(t),s.push({message:t,type:"override",context:{error:n}});continue}const t=n.toString();e.push(t),s.push({message:t,path:n.path.filter((t=>"object"!=typeof t)),type:n.code,context:n.local})}return e.length>1&&(e=[...new Set(e)]),{message:e.join(". "),details:s}},i.ValidationError=class extends b{static isError(t){return t instanceof i.ValidationError}constructor(t,i,e){super(t),this.ew=e,this.details=i}},i.ValidationError.prototype.isJoi=!0,i.ValidationError.prototype.name="ValidationError",i.ValidationError.prototype.annotate=s.error},8901:(t,i,e)=>{const s=e(375),n=e(8571),r=e(8160),o=e(6914),h={};i.type=function(t,i){const e=_.getPrototypeOf(t),a=n(e),u=t.Uv(_.create(a)),c=_.assign({},i);delete c.base,a.Pv=c;const l=e.Pv||{};c.messages=o.merge(l.messages,c.messages),c.properties=_.assign({},l.properties,c.properties),u.type=c.type,c.flags=_.assign({},l.flags,c.flags);const d=_.assign({},l.terms);if(c.terms)for(const t in c.terms){const i=c.terms[t];s(void 0===u.$_terms[t],"Invalid term override for",c.type,t),u.$_terms[t]=i.init,d[t]=i}c.terms=d,c.args||(c.args=l.args),c.prepare=h.prepare(c.prepare,l.prepare),c.coerce&&("function"==typeof c.coerce&&(c.coerce={method:c.coerce}),c.coerce.from&&!Array.isArray(c.coerce.from)&&(c.coerce={method:c.coerce.method,from:[].concat(c.coerce.from)})),c.coerce=h.coerce(c.coerce,l.coerce),c.validate=h.validate(c.validate,l.validate);const f=_.assign({},l.rules);if(c.rules)for(const t in c.rules){const i=c.rules[t];s("object"==typeof i,"Invalid rule definition for",c.type,t);let e=i.method;if(void 0===e&&(e=function(){return this.$_addRule(t)}),e&&(s(!a[t],"Rule conflict in",c.type,t),a[t]=e),s(!f[t],"Rule conflict in",c.type,t),f[t]=i,i.alias){const t=[].concat(i.alias);for(const e of t)a[e]=i.method}i.args&&(i.argsByName=new Map,i.args=i.args.map((t=>("string"==typeof t&&(t={name:t}),s(!i.argsByName.has(t.name),"Duplicated argument name",t.name),r.isSchema(t.assert)&&(t.assert=t.assert.strict().label(t.name)),i.argsByName.set(t.name,t),t))))}c.rules=f;const g=_.assign({},l.modifiers);if(c.modifiers)for(const t in c.modifiers){s(!a[t],"Rule conflict in",c.type,t);const i=c.modifiers[t];s("function"==typeof i,"Invalid modifier definition for",c.type,t);const e=function(i){return this.rule({[t]:i})};a[t]=e,g[t]=i}if(c.modifiers=g,c.overrides){a.Gv=e,u.$_super={};for(const t in c.overrides)s(e[t],"Cannot override missing",t),c.overrides[t][r.symbols.parent]=e[t],u.$_super[t]=e[t].bind(u);_.assign(a,c.overrides)}c.cast=_.assign({},l.cast,c.cast);const v=_.assign({},l.manifest,c.manifest);return v.build=h.build(c.manifest&&c.manifest.build,l.manifest&&l.manifest.build),c.manifest=v,c.rebuild=h.rebuild(c.rebuild,l.rebuild),u},h.build=function(t,i){return t&&i?function(e,s){return i(t(e,s),s)}:t||i},h.coerce=function(t,i){return t&&i?{from:t.from&&i.from?[...new Set([...t.from,...i.from])]:null,method(e,s){let n;if((!i.from||i.from.includes(typeof e))&&(n=i.method(e,s),n)){if(n.errors||void 0===n.value)return n;e=n.value}if(!t.from||t.from.includes(typeof e)){const i=t.method(e,s);if(i)return i}return n}}:t||i},h.prepare=function(t,i){return t&&i?function(e,s){const n=t(e,s);if(n){if(n.errors||void 0===n.value)return n;e=n.value}return i(e,s)||n}:t||i},h.rebuild=function(t,i){return t&&i?function(e){i(e),t(e)}:t||i},h.validate=function(t,i){return t&&i?function(e,s){const n=i(e,s);if(n){if(n.errors&&(!Array.isArray(n.errors)||n.errors.length))return n;e=n.value}return t(e,s)||n}:t||i}},5107:(t,i,e)=>{const s=e(375),n=e(8571),r=e(8652),o=e(8160),h=e(3292),a=e(6354),u=e(8901),c=e(9708),l=e(6133),d=e(3328),f=e(1152);let g;const v={types:{alternatives:e(4946),any:e(8068),array:e(546),boolean:e(4937),date:e(7500),function:e(390),link:e(8785),number:e(3832),object:e(8966),string:e(7417),symbol:e(8826)},aliases:{alt:"alternatives",bool:"boolean",func:"function"},root:function(){const t={nw:new Set(_.keys(v.types))};for(const i of t.nw)t[i]=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return s(!e.length||["alternatives","link","object"].includes(i),"The",i,"type does not allow arguments"),v.generate(this,v.types[i],e)};for(const i of["allow","custom","disallow","equal","exist","forbidden","invalid","not","only","optional","options","prefs","preferences","required","strip","valid","when"])t[i]=function(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];return this.any()[i](...e)};_.assign(t,v.methods);for(const i in v.aliases){const e=v.aliases[i];t[i]=t[e]}return t.x=t.expression,f.setup&&f.setup(t),t}};v.methods={ValidationError:a.ValidationError,version:o.version,cache:r.provider,assert(t,i){for(var e=arguments.length,s=new Array(e>2?e-2:0),n=2;n<e;n++)s[n-2]=arguments[n];v.assert(t,i,!0,s)},attempt:function(t,i){for(var e=arguments.length,s=new Array(e>2?e-2:0),n=2;n<e;n++)s[n-2]=arguments[n];return v.assert(t,i,!1,s)},build(t){return s("function"==typeof c.build,"Manifest functionality disabled"),c.build(this,t)},checkPreferences(t){o.checkPreferences(t)},compile(t,i){return h.compile(this,t,i)},defaults(t){s("function"==typeof t,"modifier must be a function");const i=_.assign({},this);for(const e of i.nw){const n=t(i[e]());s(o.isSchema(n),"modifier must return a valid schema object"),i[e]=function(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];return v.generate(this,n,i)}}return i},expression:function(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];return new d(...i)},extend(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];o.verifyFlat(i,"extend"),g=g||e(3378),s(i.length,"You need to provide at least one extension"),this.assert(i,g.extensions);const r=_.assign({},this);r.nw=new Set(r.nw);for(let t of i){"function"==typeof t&&(t=t(r)),this.assert(t,g.extension);const i=v.expandExtension(t,r);for(const t of i){s(void 0===r[t.type]||r.nw.has(t.type),"Cannot override name",t.type);const i=t.base||this.any(),e=u.type(i,t);r.nw.add(t.type),r[t.type]=function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return v.generate(this,e,i)}}}return r},isError:a.ValidationError.isError,isExpression:d.isTemplate,isRef:l.isRef,isSchema:o.isSchema,in:function(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];return l.in(...i)},override:o.symbols.override,ref:function(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];return l.create(...i)},types(){const t={};for(const i of this.nw)t[i]=this[i]();for(const i in v.aliases)t[i]=this[i]();return t}},v.assert=function(t,i,e,s){const r=s[0]instanceof b||"string"==typeof s[0]?s[0]:null,h=null!==r?s[1]:s[0],u=i.validate(t,o.preferences({errors:{stack:!0}},h||{}));let c=u.error;if(!c)return u.value;if(r instanceof b)throw r;const l=e&&"function"==typeof c.annotate?c.annotate():c.message;throw c instanceof a.ValidationError==0&&(c=n(c)),c.message=r?"".concat(r," ").concat(l):l,c},v.generate=function(t,i,e){return s(t,"Must be invoked on a Joi instance."),i.$_root=t,i.Pv.args&&e.length?i.Pv.args(i,...e):i},v.expandExtension=function(t,i){if("string"==typeof t.type)return[t];const e=[];for(const s of i.nw)if(t.type.test(s)){const n=_.assign({},t);n.type=s,n.base=i[s](),e.push(n)}return e},t.exports=v.root()},6914:(t,i,e)=>{const s=e(375),n=e(8571),r=e(3328);i.compile=function(t,i){if("string"==typeof t)return s(!i,"Cannot set single message string"),new r(t);if(r.isTemplate(t))return s(!i,"Cannot set single message template"),t;s("object"==typeof t&&!Array.isArray(t),"Invalid message options"),i=i?n(i):{};for(let e in t){const n=t[e];if("root"===e||r.isTemplate(n)){i[e]=n;continue}if("string"==typeof n){i[e]=new r(n);continue}s("object"==typeof n&&!Array.isArray(n),"Invalid message for",e);const o=e;for(e in i[o]=i[o]||{},n){const t=n[e];"root"===e||r.isTemplate(t)?i[o][e]=t:(s("string"==typeof t,"Invalid message for",e,"in",o),i[o][e]=new r(t))}}return i},i.decompile=function(t){const i={};for(let e in t){const s=t[e];if("root"===e){i.root=s;continue}if(r.isTemplate(s)){i[e]=s.describe({compact:!0});continue}const n=e;for(e in i[n]={},s){const t=s[e];"root"!==e?i[n][e]=t.describe({compact:!0}):i[n].root=t}}return i},i.merge=function(t,e){if(!t)return i.compile(e);if(!e)return t;if("string"==typeof e)return new r(e);if(r.isTemplate(e))return e;const o=n(t);for(let t in e){const i=e[t];if("root"===t||r.isTemplate(i)){o[t]=i;continue}if("string"==typeof i){o[t]=new r(i);continue}s("object"==typeof i&&!Array.isArray(i),"Invalid message for",t);const n=t;for(t in o[n]=o[n]||{},i){const e=i[t];"root"===t||r.isTemplate(e)?o[n][t]=e:(s("string"==typeof e,"Invalid message for",t,"in",n),o[n][t]=new r(e))}}return o}},2294:(t,i,e)=>{const s=e(375),n=e(8160),r=e(6133),o={};i.Ids=o.Ids=class{clone(){const t=new o.Ids;return t.ow=new Map(this.ow),t.hw=new Map(this.hw),t.aw=this.aw,t}concat(t){t.aw&&(this.aw=!0);for(const[i,e]of t.ow.entries())s(!this.hw.has(i),"Schema id conflicts with existing key:",i),this.ow.set(i,e);for(const[i,e]of t.hw.entries())s(!this.ow.has(i),"Schema key conflicts with existing id:",i),this.hw.set(i,e)}fork(t,i,e){const r=this.uw(t);r.push({schema:e});const h=r.shift();let a={id:h.id,schema:i(h.schema)};s(n.isSchema(a.schema),"adjuster function failed to return a joi schema type");for(const t of r)a={id:t.id,schema:o.fork(t.schema,a.id,a.schema)};return a.schema}labels(t,i){void 0===i&&(i=[]);const e=t[0],s=this.cw(e);if(!s)return[...i,...t].join(".");const n=t.slice(1);return i=[...i,s.schema.xv.label||e],n.length?s.schema.Tv.labels(n,i):i.join(".")}reach(t,i){void 0===i&&(i=[]);const e=t[0],n=this.cw(e);s(n,"Schema does not contain path",[...i,...t].join("."));const r=t.slice(1);return r.length?n.schema.Tv.reach(r,[...i,e]):n.schema}register(t,i){let{key:e}=void 0===i?{}:i;if(!t||!n.isSchema(t))return;(t.$_property("schemaChain")||t.Tv.aw)&&(this.aw=!0);const r=t.xv.id;if(r){const i=this.ow.get(r);s(!i||i.schema===t,"Cannot add different schemas with the same id:",r),s(!this.hw.has(r),"Schema id conflicts with existing key:",r),this.ow.set(r,{schema:t,id:r})}e&&(s(!this.hw.has(e),"Schema already contains key:",e),s(!this.ow.has(e),"Schema key conflicts with existing id:",e),this.hw.set(e,{schema:t,id:e}))}reset(){this.ow=new Map,this.hw=new Map,this.aw=!1}uw(t,i,e){void 0===i&&(i=[]),void 0===e&&(e=[]);const n=t[0],r=this.cw(n);s(r,"Schema does not contain path",[...i,...t].join(".")),e=[r,...e];const o=t.slice(1);return o.length?r.schema.Tv.uw(o,[...i,n],e):e}cw(t){return this.ow.get(t)||this.hw.get(t)}constructor(){this.ow=new Map,this.hw=new Map,this.aw=!1}},o.fork=function(t,e,s){const n=i.schema(t,{each:(t,i)=>{let{key:n}=i;if(e===(t.xv.id||n))return s},ref:!1});return n?n.$_mutateRebuild():t},i.schema=function(t,i){let e;for(const s in t.xv){if("_"===s[0])continue;const n=o.scan(t.xv[s],{source:"flags",name:s},i);void 0!==n&&(e=e||t.clone(),e.xv[s]=n)}for(let s=0;s<t.Lv.length;++s){const n=t.Lv[s],r=o.scan(n.args,{source:"rules",name:n.name},i);if(void 0!==r){e=e||t.clone();const i=_.assign({},n);i.args=r,e.Lv[s]=i,e.Cv.get(n.name)===n&&e.Cv.set(n.name,i)}}for(const s in t.$_terms){if("_"===s[0])continue;const n=o.scan(t.$_terms[s],{source:"terms",name:s},i);void 0!==n&&(e=e||t.clone(),e.$_terms[s]=n)}return e},o.scan=function(t,i,e,s,h){const a=s||[];if(null===t||"object"!=typeof t)return;let u;if(Array.isArray(t)){for(let s=0;s<t.length;++s){const n="terms"===i.source&&"keys"===i.name&&t[s].key,r=o.scan(t[s],i,e,[s,...a],n);void 0!==r&&(u=u||t.slice(),u[s]=r)}return u}if(!1!==e.schema&&n.isSchema(t)||!1!==e.ref&&r.isRef(t)){const s=e.each(t,g(d({},i),{path:a,key:h}));return s===t?void 0:s}for(const s in t){if("_"===s[0])continue;const n=o.scan(t[s],i,e,[s,...a],h);void 0!==n&&(u=u||_.assign({},t),u[s]=n)}return u}},6133:(t,i,e)=>{const s=e(375),n=e(8571),r=e(9621),o=e(8160);let h;const a={symbol:Bo("ref"),defaults:{adjust:null,in:!1,iterables:null,map:null,separator:".",type:"value"}};i.create=function(t,i){void 0===i&&(i={}),s("string"==typeof t,"Invalid reference key:",t),o.assertOptions(i,["adjust","ancestor","in","iterables","map","prefix","render","separator"]),s(!i.prefix||"object"==typeof i.prefix,"options.prefix must be of type object");const e=_.assign({},a.defaults,i);delete e.prefix;const n=e.separator,r=a.context(t,n,i.prefix);if(e.type=r.type,t=r.key,"value"===e.type)if(r.root&&(s(!n||t[0]!==n,"Cannot specify relative path with root prefix"),e.ancestor="root",t||(t=null)),n&&n===t)t=null,e.ancestor=0;else if(void 0!==e.ancestor)s(!n||!t||t[0]!==n,"Cannot combine prefix with ancestor option");else{const[i,s]=a.ancestor(t,n);s&&""===(t=t.slice(s))&&(t=null),e.ancestor=i}return e.path=n?null===t?[]:t.split(n):[t],new a.Ref(e)},i.in=function(t,e){return void 0===e&&(e={}),i.create(t,g(d({},e),{in:!0}))},i.isRef=function(t){return!!t&&!!t[o.symbols.ref]},a.Ref=class{resolve(t,i,e,n,r){return void 0===r&&(r={}),s(!this.in||r.in,"Invalid in() reference usage"),"global"===this.type?this.Kg(e.context,i,r):"local"===this.type?this.Kg(n,i,r):this.ancestor?"root"===this.ancestor?this.Kg(i.ancestors[i.ancestors.length-1],i,r):(s(this.ancestor<=i.ancestors.length,"Invalid reference exceeds the schema root:",this.display),this.Kg(i.ancestors[this.ancestor-1],i,r)):this.Kg(t,i,r)}Kg(t,i,e){let s;if("value"===this.type&&i.mainstay.shadow&&!1!==e.shadow&&(s=i.mainstay.shadow.get(this.absolute(i))),void 0===s&&(s=r(t,this.path,{iterables:this.iterables,functions:!0})),this.adjust&&(s=this.adjust(s)),this.map){const t=this.map.get(s);void 0!==t&&(s=t)}return i.mainstay&&i.mainstay.tracer.resolve(i,this,s),s}toString(){return this.display}absolute(t){return[...t.path.slice(0,-this.ancestor),...this.path]}clone(){return new a.Ref(this)}describe(){const t={path:this.path};"value"!==this.type&&(t.type=this.type),"."!==this.separator&&(t.separator=this.separator),"value"===this.type&&1!==this.ancestor&&(t.ancestor=this.ancestor),this.map&&(t.map=[...this.map]);for(const i of["adjust","iterables","render"])null!==this[i]&&void 0!==this[i]&&(t[i]=this[i]);return!1!==this.in&&(t.in=!0),{ref:t}}updateDisplay(){const t=null!==this.key?this.key:"";if("value"!==this.type)return void(this.display="ref:".concat(this.type,":").concat(t));if(!this.separator)return void(this.display="ref:".concat(t));if(!this.ancestor)return void(this.display="ref:".concat(this.separator).concat(t));if("root"===this.ancestor)return void(this.display="ref:root:".concat(t));if(1===this.ancestor)return void(this.display="ref:".concat(t||".."));const i=new Array(this.ancestor+1).fill(this.separator).join("");this.display="ref:".concat(i).concat(t||"")}constructor(t){s("object"==typeof t,"Invalid reference construction"),o.assertOptions(t,["adjust","ancestor","in","iterables","map","path","render","separator","type","depth","key","root","display"]),s([!1,void 0].includes(t.separator)||"string"==typeof t.separator&&1===t.separator.length,"Invalid separator"),s(!t.adjust||"function"==typeof t.adjust,"options.adjust must be a function"),s(!t.map||Array.isArray(t.map),"options.map must be an array"),s(!t.map||!t.adjust,"Cannot set both map and adjust options"),_.assign(this,a.defaults,t),s("value"===this.type||void 0===this.ancestor,"Non-value references cannot reference ancestors"),Array.isArray(this.map)&&(this.map=new Map(this.map)),this.depth=this.path.length,this.key=this.path.length?this.path.join(this.separator):null,this.root=this.path[0],this.updateDisplay()}},a.Ref.prototype[o.symbols.ref]=!0,i.build=function(t){return"value"===(t=_.assign({},a.defaults,t)).type&&void 0===t.ancestor&&(t.ancestor=1),new a.Ref(t)},a.context=function(t,i,e){if(void 0===e&&(e={}),t=t.trim(),e){const s=void 0===e.global?"$":e.global;if(s!==i&&t.startsWith(s))return{key:t.slice(s.length),type:"global"};const n=void 0===e.local?"#":e.local;if(n!==i&&t.startsWith(n))return{key:t.slice(n.length),type:"local"};const r=void 0===e.root?"/":e.root;if(r!==i&&t.startsWith(r))return{key:t.slice(r.length),type:"value",root:!0}}return{key:t,type:"value"}},a.ancestor=function(t,i){if(!i)return[1,0];if(t[0]!==i)return[1,0];if(t[1]!==i)return[0,1];let e=2;for(;t[e]===i;)++e;return[e-1,e]},i.toSibling=0,i.toParent=1,i.Manager=class{register(t,s){if(t)if(s=void 0===s?i.toParent:s,Array.isArray(t))for(const i of t)this.register(i,s);else if(o.isSchema(t))for(const i of t.Nv.refs)i.ancestor-s>=0&&this.refs.push({ancestor:i.ancestor-s,root:i.root});else i.isRef(t)&&"value"===t.type&&t.ancestor-s>=0&&this.refs.push({ancestor:t.ancestor-s,root:t.root}),h=h||e(3328),h.isTemplate(t)&&this.register(t.refs(),s)}get length(){return this.refs.length}clone(){const t=new i.Manager;return t.refs=n(this.refs),t}reset(){this.refs=[]}roots(){return this.refs.filter((t=>!t.ancestor)).map((t=>t.root))}constructor(){this.refs=[]}}},3378:(t,i,e)=>{const s=e(5107),n={};n.wrap=s.string().min(1).max(2).allow(!1),i.preferences=s.object({allowUnknown:s.boolean(),abortEarly:s.boolean(),artifacts:s.boolean(),cache:s.boolean(),context:s.object(),convert:s.boolean(),dateFormat:s.valid("date","iso","string","time","utc"),debug:s.boolean(),errors:{escapeHtml:s.boolean(),label:s.valid("path","key",!1),language:[s.string(),s.object().ref()],render:s.boolean(),stack:s.boolean(),wrap:{label:n.wrap,array:n.wrap,string:n.wrap}},externals:s.boolean(),messages:s.object(),noDefaults:s.boolean(),nonEnumerables:s.boolean(),presence:s.valid("required","optional","forbidden"),skipFunctions:s.boolean(),stripUnknown:s.object({arrays:s.boolean(),objects:s.boolean()}).or("arrays","objects").allow(!0,!1),warnings:s.boolean()}).strict(),n.nameRx=/^[a-zA-Z0-9]\w*$/,n.rule=s.object({alias:s.array().items(s.string().pattern(n.nameRx)).single(),args:s.array().items(s.string(),s.object({name:s.string().pattern(n.nameRx).required(),ref:s.boolean(),assert:s.alternatives([s.function(),s.object().schema()]).conditional("ref",{is:!0,then:s.required()}),normalize:s.function(),message:s.string().when("assert",{is:s.function(),then:s.required()})})),convert:s.boolean(),manifest:s.boolean(),method:s.function().allow(!1),multi:s.boolean(),validate:s.function()}),i.extension=s.object({type:s.alternatives([s.string(),s.object().regex()]).required(),args:s.function(),cast:s.object().pattern(n.nameRx,s.object({from:s.function().maxArity(1).required(),to:s.function().minArity(1).maxArity(2).required()})),base:s.object().schema().when("type",{is:s.object().regex(),then:s.forbidden()}),coerce:[s.function().maxArity(3),s.object({method:s.function().maxArity(3).required(),from:s.array().items(s.string()).single()})],flags:s.object().pattern(n.nameRx,s.object({setter:s.string(),default:s.any()})),manifest:{build:s.function().arity(2)},messages:[s.object(),s.string()],modifiers:s.object().pattern(n.nameRx,s.function().minArity(1).maxArity(2)),overrides:s.object().pattern(n.nameRx,s.function()),prepare:s.function().maxArity(3),rebuild:s.function().arity(1),rules:s.object().pattern(n.nameRx,n.rule),terms:s.object().pattern(n.nameRx,s.object({init:s.array().allow(null).required(),manifest:s.object().pattern(/.+/,[s.valid("schema","single"),s.object({mapped:s.object({from:s.string().required(),to:s.string().required()}).required()})])})),validate:s.function().maxArity(3)}).strict(),i.extensions=s.array().items(s.object(),s.function().arity(1)).strict(),n.desc={buffer:s.object({buffer:s.string()}),func:s.object({function:s.function().required(),options:{literal:!0}}),override:s.object({override:!0}),ref:s.object({ref:s.object({type:s.valid("value","global","local"),path:s.array().required(),separator:s.string().length(1).allow(!1),ancestor:s.number().min(0).integer().allow("root"),map:s.array().items(s.array().length(2)).min(1),adjust:s.function(),iterables:s.boolean(),in:s.boolean(),render:s.boolean()}).required()}),regex:s.object({regex:s.string().min(3)}),special:s.object({special:s.valid("deep").required()}),template:s.object({template:s.string().required(),options:s.object()}),value:s.object({value:s.alternatives([s.object(),s.array()]).required()})},n.desc.entity=s.alternatives([s.array().items(s.link("...")),s.boolean(),s.function(),s.number(),s.string(),n.desc.buffer,n.desc.func,n.desc.ref,n.desc.regex,n.desc.special,n.desc.template,n.desc.value,s.link("/")]),n.desc.values=s.array().items(null,s.boolean(),s.function(),s.number().allow(1/0,-1/0),s.string().allow(""),s.symbol(),n.desc.buffer,n.desc.func,n.desc.override,n.desc.ref,n.desc.regex,n.desc.template,n.desc.value),n.desc.messages=s.object().pattern(/.+/,[s.string(),n.desc.template,s.object().pattern(/.+/,[s.string(),n.desc.template])]),i.description=s.object({type:s.string().required(),flags:s.object({cast:s.string(),default:s.any(),description:s.string(),empty:s.link("/"),failover:n.desc.entity,id:s.string(),label:s.string(),only:!0,presence:["optional","required","forbidden"],result:["raw","strip"],strip:s.boolean(),unit:s.string()}).unknown(),preferences:{allowUnknown:s.boolean(),abortEarly:s.boolean(),artifacts:s.boolean(),cache:s.boolean(),convert:s.boolean(),dateFormat:["date","iso","string","time","utc"],errors:{escapeHtml:s.boolean(),label:["path","key"],language:[s.string(),n.desc.ref],wrap:{label:n.wrap,array:n.wrap}},externals:s.boolean(),messages:n.desc.messages,noDefaults:s.boolean(),nonEnumerables:s.boolean(),presence:["required","optional","forbidden"],skipFunctions:s.boolean(),stripUnknown:s.object({arrays:s.boolean(),objects:s.boolean()}).or("arrays","objects").allow(!0,!1),warnings:s.boolean()},allow:n.desc.values,invalid:n.desc.values,rules:s.array().min(1).items({name:s.string().required(),args:s.object().min(1),keep:s.boolean(),message:[s.string(),n.desc.messages],warn:s.boolean()}),keys:s.object().pattern(/.*/,s.link("/")),link:n.desc.ref}).pattern(/^[a-z]\w*$/,s.any())},493:(t,i,e)=>{const s=e(8571),n=e(9621),r=e(8160),o={value:Bo("value")};t.exports=o.State=class{localize(t,i,e){void 0===i&&(i=null),void 0===e&&(e=null);const s=new o.State(t,i,this);return e&&s.schemas&&(s.schemas=[o.schemas(e),...s.schemas]),s}nest(t,i){const e=new o.State(this.path,this.ancestors,this);return e.schemas=e.schemas&&[o.schemas(t),...e.schemas],e.debug=i,e}shadow(t,i){this.mainstay.shadow=this.mainstay.shadow||new o.Shadow,this.mainstay.shadow.set(this.path,t,i)}snapshot(){this.mainstay.shadow&&(this.lw=s(this.mainstay.shadow.node(this.path))),this.mainstay.snapshot()}restore(){this.mainstay.shadow&&(this.mainstay.shadow.override(this.path,this.lw),this.lw=void 0),this.mainstay.restore()}commit(){this.mainstay.shadow&&(this.mainstay.shadow.override(this.path,this.lw),this.lw=void 0),this.mainstay.commit()}constructor(t,i,e){this.path=t,this.ancestors=i,this.mainstay=e.mainstay,this.schemas=e.schemas,this.debug=null}},o.schemas=function(t){return r.isSchema(t)?{schema:t}:t},o.Shadow=class{set(t,i,e){if(!t.length||"strip"===e&&"number"==typeof t[t.length-1])return;this.Ov=this.Ov||new Map;let s=this.Ov;for(let i=0;i<t.length;++i){const e=t[i];let n=s.get(e);n||(n=new Map,s.set(e,n)),s=n}s[o.value]=i}get(t){const i=this.node(t);if(i)return i[o.value]}node(t){if(this.Ov)return n(this.Ov,t,{iterables:!0})}override(t,i){if(!this.Ov)return;const e=t.slice(0,-1),s=t[t.length-1],r=n(this.Ov,e,{iterables:!0});i?r.set(s,i):r&&r.delete(s)}constructor(){this.Ov=null}}},3328:(t,i,e)=>{const s=e(375),n=e(8571),r=e(5277),o=e(1447),h=e(8160),a=e(6354),u=e(6133),c={symbol:Bo("template"),opens:new Array(1e3).join("\0"),closes:new Array(1e3).join("\x01"),dateFormat:{date:Date.prototype.toDateString,iso:Date.prototype.toISOString,string:Date.prototype.toString,time:Date.prototype.toTimeString,utc:Date.prototype.toUTCString}};t.exports=c.Template=class{dw(){if(!this.source.includes("{"))return;const t=c.encode(this.source),i=c.split(t);let e=!1;const s=[],n=i.shift();n&&s.push(n);for(const t of i){const i="{"!==t[0],n=i?"}":"}}",r=t.indexOf(n);if(-1===r||"{"===t[1]){s.push("{".concat(c.decode(t)));continue}let o=t.slice(i?0:1,r);const h=":"===o[0];h&&(o=o.slice(1));const a=this.fw(c.decode(o),{raw:i,wrapped:h});s.push(a),"string"!=typeof a&&(e=!0);const u=t.slice(r+n.length);u&&s.push(c.decode(u))}e?this.iw=s:this.rendered=s.join("")}static date(t,i){return c.dateFormat[i.dateFormat].call(t)}describe(t){if(void 0===t&&(t={}),!this.gw&&t.compact)return this.source;const i={template:this.source};return this.gw&&(i.options=this.gw),this._w&&(i.functions=this._w),i}static build(t){return new c.Template(t.template,t.options||t.functions?g(d({},t.options),{functions:t.functions}):void 0)}isDynamic(){return!!this.iw}static isTemplate(t){return!!t&&!!t[h.symbols.template]}refs(){if(!this.iw)return;const t=[];for(const i of this.iw)"string"!=typeof i&&t.push(...i.refs);return t}resolve(t,i,e,s){return this.iw&&1===this.iw.length?this.ww(this.iw[0],t,i,e,s,{}):this.render(t,i,e,s)}ww(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];return t.ref?t.ref.resolve(...e):t.formula.evaluate(e)}render(t,i,e,s,n){if(void 0===n&&(n={}),!this.isDynamic())return this.rendered;const o=[];for(const h of this.iw)if("string"==typeof h)o.push(h);else{const a=this.ww(h,t,i,e,s,n),u=c.stringify(a,t,i,e,s,n);if(void 0!==u){const t=h.raw||!1===(n.errors&&n.errors.escapeHtml)?u:r(u);o.push(c.wrap(t,h.wrapped&&e.errors.wrap.label))}}return o.join("")}fw(t,i){let{raw:e,wrapped:s}=i;const n=[],r=t=>{const i=u.create(t,this.gw);return n.push(i),t=>{const e=i.resolve(...t);return void 0!==e?e:null}};try{const i=this._w?d(d({},c.functions),this._w):c.functions;var h=new o.Parser(t,{reference:r,functions:i,constants:c.constants})}catch(i){throw i.message='Invalid template variable "'.concat(t,'" fails due to: ').concat(i.message),i}if(h.single){if("reference"===h.single.type){const t=n[0];return{ref:t,raw:e,refs:n,wrapped:s||"local"===t.type&&"label"===t.key}}return c.stringify(h.single.value)}return{formula:h,raw:e,refs:n}}toString(){return this.source}constructor(t,i){if(s("string"==typeof t,"Template source must be a string"),s(!t.includes("\0")&&!t.includes("\x01"),"Template source cannot contain reserved control characters"),this.source=t,this.rendered=t,this.iw=null,i){const t=i,{functions:e}=t,r=w(t,["functions"]);this.gw=_.keys(r).length?n(r):void 0,this._w=e,this._w&&(s(_.keys(this._w).every((t=>"string"==typeof t)),"Functions keys must be strings"),s(_.values(this._w).every((t=>"function"==typeof t)),"Functions values must be functions"))}else this.gw=void 0,this._w=void 0;this.dw()}},c.Template.prototype[h.symbols.template]=!0,c.Template.prototype.isImmutable=!0,c.encode=function(t){return t.replace(/\\(\{+)/g,((t,i)=>c.opens.slice(0,i.length))).replace(/\\(\}+)/g,((t,i)=>c.closes.slice(0,i.length)))},c.decode=function(t){return t.replace(/\u0000/g,"{").replace(/\u0001/g,"}")},c.split=function(t){const i=[];let e="";for(let s=0;s<t.length;++s){const n=t[s];if("{"===n){let n="";for(;s+1<t.length&&"{"===t[s+1];)n+="{",++s;i.push(e),e=n}else e+=n}return i.push(e),i},c.wrap=function(t,i){return i?1===i.length?"".concat(i).concat(t).concat(i):"".concat(i[0]).concat(t).concat(i[1]):t},c.stringify=function(t,i,e,s,n,r){void 0===r&&(r={});const o=typeof t,h=s&&s.errors&&s.errors.wrap||{};let a=!1;if(u.isRef(t)&&t.render&&(a=t.in,t=t.resolve(i,e,s,n,d({in:t.in},r))),null===t)return"null";if("string"===o)return c.wrap(t,r.arrayItems&&h.string);if("number"===o||"function"===o||"symbol"===o)return t.toString();if("object"!==o)return JSON.stringify(t);if(t instanceof Date)return c.Template.date(t,s);if(t instanceof Map){const i=[];for(const[e,s]of t.entries())i.push("".concat(e.toString()," -> ").concat(s.toString()));t=i}if(!Array.isArray(t))return t.toString();const l=[];for(const o of t)l.push(c.stringify(o,i,e,s,n,d({arrayItems:!0},r)));return c.wrap(l.join(", "),!a&&h.array)},c.constants={true:!0,false:!1,null:null,second:1e3,minute:6e4,hour:36e5,day:864e5},c.functions={if:(t,i,e)=>t?i:e,length:t=>"string"==typeof t?t.length:t&&"object"==typeof t?Array.isArray(t)?t.length:_.keys(t).length:null,msg(t){const[i,e,s,n,r]=this,o=r.messages;if(!o)return"";const h=a.template(i,o[0],t,e,s)||a.template(i,o[1],t,e,s);return h?h.render(i,e,s,n,r):""},number:t=>"number"==typeof t?t:"string"==typeof t?S(t):"boolean"==typeof t?t?1:0:t instanceof Date?t.getTime():null}},4946:(t,i,e)=>{const s=e(375),n=e(1687),r=e(8068),o=e(8160),h=e(3292),a=e(6354),u=e(6133),c={};t.exports=r.extend({type:"alternatives",flags:{match:{default:"any"}},terms:{matches:{init:[],register:u.toSibling}},args:function(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];return 1===e.length&&Array.isArray(e[0])?t.try(...e[0]):t.try(...e)},validate(t,i){const{schema:e,error:s,state:r,prefs:o}=i;if(e.xv.match){const i=[],h=[];for(let s=0;s<e.$_terms.matches.length;++s){const n=e.$_terms.matches[s],a=r.nest(n.schema,"match.".concat(s));a.snapshot();const u=n.schema.$_validate(t,a,o);u.errors?(h.push(u.errors),a.restore()):(i.push(u.value),a.commit())}if(0===i.length)return{errors:s("alternatives.any",{details:h.map((t=>a.details(t,{override:!1})))})};if("one"===e.xv.match)return 1===i.length?{value:i[0]}:{errors:s("alternatives.one")};if(i.length!==e.$_terms.matches.length)return{errors:s("alternatives.all",{details:h.map((t=>a.details(t,{override:!1})))})};const u=t=>t.$_terms.matches.some((t=>"object"===t.schema.type||"alternatives"===t.schema.type&&u(t.schema)));return u(e)?{value:i.reduce(((t,i)=>n(t,i,{mergeArrays:!1})))}:{value:i[i.length-1]}}const h=[];for(let i=0;i<e.$_terms.matches.length;++i){const s=e.$_terms.matches[i];if(s.schema){const e=r.nest(s.schema,"match.".concat(i));e.snapshot();const n=s.schema.$_validate(t,e,o);if(!n.errors)return e.commit(),n;e.restore(),h.push({schema:s.schema,reports:n.errors});continue}const n=s.ref?s.ref.resolve(t,r,o):t,a=s.is?[s]:s.switch;for(let e=0;e<a.length;++e){const h=a[e],{is:u,then:c,otherwise:l}=h,d="match.".concat(i).concat(s.switch?"."+e:"");if(u.$_match(n,r.nest(u,"".concat(d,".is")),o)){if(c)return c.$_validate(t,r.nest(c,"".concat(d,".then")),o)}else if(l)return l.$_validate(t,r.nest(l,"".concat(d,".otherwise")),o)}}return c.errors(h,i)},rules:{conditional:{method(t,i){s(!this.xv.mw,"Unreachable condition"),s(!this.xv.match,"Cannot combine match mode",this.xv.match,"with conditional rule"),s(void 0===i.break,"Cannot use break option with alternatives conditional");const e=this.clone(),n=h.when(e,t,i),r=n.is?[n]:n.switch;for(const t of r)if(t.then&&t.otherwise){e.$_setFlag("mw",!0,{clone:!1});break}return e.$_terms.matches.push(n),e.$_mutateRebuild()}},match:{method(t){if(s(["any","one","all"].includes(t),"Invalid alternatives match mode",t),"any"!==t)for(const i of this.$_terms.matches)s(i.schema,"Cannot combine match mode",t,"with conditional rules");return this.$_setFlag("match",t)}},try:{method(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];s(i.length,"Missing alternative schemas"),o.verifyFlat(i,"try"),s(!this.xv.mw,"Unreachable condition");const n=this.clone();for(const t of i)n.$_terms.matches.push({schema:n.$_compile(t)});return n.$_mutateRebuild()}}},overrides:{label(t){return this.$_parent("label",t).$_modify({each:(i,e)=>"is"!==e.path[0]&&"string"!=typeof i.xv.label?i.label(t):void 0,ref:!1})}},rebuild(t){t.$_modify({each:i=>{o.isSchema(i)&&"array"===i.type&&t.$_setFlag("pw",!0,{clone:!1})}})},manifest:{build(t,i){if(i.matches)for(const e of i.matches){const{schema:i,ref:s,is:n,not:r,then:o,otherwise:h}=e;t=i?t.try(i):s?t.conditional(s,{is:n,then:o,not:r,otherwise:h,switch:e.switch}):t.conditional(n,{then:o,otherwise:h})}return t}},messages:{"alternatives.all":"{{#label}} does not match all of the required types","alternatives.any":"{{#label}} does not match any of the allowed types","alternatives.match":"{{#label}} does not match any of the allowed types","alternatives.one":"{{#label}} matches more than one allowed type","alternatives.types":"{{#label}} must be one of {{#types}}"}}),c.errors=function(t,i){let{error:e,state:s}=i;if(!t.length)return{errors:e("alternatives.any")};if(1===t.length)return{errors:t[0].reports};const n=new Set,r=[];for(const{reports:i,schema:o}of t){if(i.length>1)return c.unmatched(t,e);const h=i[0];if(h instanceof a.Report==0)return c.unmatched(t,e);if(h.state.path.length!==s.path.length){r.push({type:o.type,report:h});continue}if("any.only"===h.code){for(const t of h.local.valids)n.add(t);continue}const[u,l]=h.code.split(".");"base"!==l?r.push({type:o.type,report:h}):"object.base"===h.code?n.add(h.local.type):n.add(u)}return r.length?1===r.length?{errors:r[0].report}:c.unmatched(t,e):{errors:e("alternatives.types",{types:[...n]})}},c.unmatched=function(t,i){const e=[];for(const i of t)e.push(...i.reports);return{errors:i("alternatives.match",a.details(e,{override:!1}))}}},8068:(t,i,e)=>{const s=e(375),n=e(7629),r=e(8160),o=e(6914);t.exports=n.extend({type:"any",flags:{only:{default:!1}},terms:{alterations:{init:null},examples:{init:null},externals:{init:null},metas:{init:[]},notes:{init:[]},shared:{init:null},tags:{init:[]},whens:{init:null}},rules:{custom:{method(t,i){return s("function"==typeof t,"Method must be a function"),s(void 0===i||i&&"string"==typeof i,"Description must be a non-empty string"),this.$_addRule({name:"custom",args:{method:t,description:i}})},validate(t,i,e){let{method:s}=e;try{return s(t,i)}catch(t){return i.error("any.custom",{error:t})}},args:["method","description"],multi:!0},messages:{method(t){return this.prefs({messages:t})}},shared:{method(t){s(r.isSchema(t)&&t.xv.id,"Schema must be a schema with an id");const i=this.clone();return i.$_terms.shared=i.$_terms.shared||[],i.$_terms.shared.push(t),i.$_mutateRegister(t),i}},warning:{method(t,i){return s(t&&"string"==typeof t,"Invalid warning code"),this.$_addRule({name:"warning",args:{code:t,local:i},warn:!0})},validate:(t,i,e)=>{let{code:s,local:n}=e;return i.error(s,n)},args:["code","local"],multi:!0}},modifiers:{keep(t,i){void 0===i&&(i=!0),t.keep=i},message(t,i){t.message=o.compile(i)},warn(t,i){void 0===i&&(i=!0),t.warn=i}},manifest:{build(t,i){for(const e in i){const s=i[e];if(["examples","externals","metas","notes","tags"].includes(e))for(const i of s)t=t[e.slice(0,-1)](i);else if("alterations"!==e)if("whens"!==e){if("shared"===e)for(const i of s)t=t.shared(i)}else for(const i of s){const{ref:e,is:s,not:n,then:r,otherwise:o,concat:h}=i;t=h?t.concat(h):e?t.when(e,{is:s,not:n,then:r,otherwise:o,switch:i.switch,break:i.break}):t.when(s,{then:r,otherwise:o,break:i.break})}else{const i={};for(const{target:t,adjuster:e}of s)i[t]=e;t=t.alter(i)}}return t}},messages:{"any.custom":"{{#label}} failed custom validation because {{#error.message}}","any.default":"{{#label}} threw an error when running default method","any.failover":"{{#label}} threw an error when running failover method","any.invalid":"{{#label}} contains an invalid value","any.only":'{{#label}} must be {if(#valids.length == 1, "", "one of ")}{{#valids}}',"any.ref":"{{#label}} {{#arg}} references {{:#ref}} which {{#reason}}","any.required":"{{#label}} is required","any.unknown":"{{#label}} is not allowed"}})},546:(t,i,e)=>{const s=e(375),n=e(9474),r=e(9621),o=e(8068),h=e(8160),a=e(3292),u={};t.exports=o.extend({type:"array",flags:{single:{default:!1},sparse:{default:!1}},terms:{items:{init:[],manifest:"schema"},ordered:{init:[],manifest:"schema"},Aw:{init:[]},yw:{init:[]},Mw:{init:[]}},coerce:{from:"object",method(t,i){let{schema:e,state:s,prefs:n}=i;if(!Array.isArray(t))return;const r=e.$_getRule("sort");return r?u.sort(e,t,r.args.options,s,n):void 0}},validate(t,i){let{schema:e,error:s}=i;if(!Array.isArray(t)){if(e.xv.single){const i=[t];return i[h.symbols.arraySingle]=!0,{value:i}}return{errors:s("array.base")}}if(e.$_getRule("items")||e.$_terms.externals)return{value:t.slice()}},rules:{has:{method(t){t=this.$_compile(t,{appendPath:!0});const i=this.$_addRule({name:"has",args:{schema:t}});return i.$_mutateRegister(t),i},validate(t,i,e){let{state:s,prefs:n,error:r}=i,{schema:o}=e;const h=[t,...s.ancestors];for(let i=0;i<t.length;++i){const e=s.localize([...s.path,i],h,o);if(o.$_match(t[i],e,n))return t}const a=o.xv.label;return a?r("array.hasKnown",{patternLabel:a}):r("array.hasUnknown",null)},multi:!0},items:{method(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];h.verifyFlat(i,"items");const s=this.$_addRule("items");for(let t=0;t<i.length;++t){const e=h.tryWithPath((()=>this.$_compile(i[t])),t,{append:!0});s.$_terms.items.push(e)}return s.$_mutateRebuild()},validate(t,i){let{schema:e,error:s,state:n,prefs:r,errorsArray:o}=i;const a=e.$_terms.Mw.slice(),c=e.$_terms.ordered.slice(),l=[...e.$_terms.yw,...a],d=!t[h.symbols.arraySingle];delete t[h.symbols.arraySingle];const f=o();let g=t.length;for(let i=0;i<g;++i){const o=t[i];let h=!1,_=!1;const v=d?i:new Number(i),w=[...n.path,v];if(!e.xv.sparse&&void 0===o){if(f.push(s("array.sparse",{key:v,path:w,pos:i,value:void 0},n.localize(w))),r.abortEarly)return f;c.shift();continue}const m=[t,...n.ancestors];for(const t of e.$_terms.Aw)if(t.$_match(o,n.localize(w,m,t),r,{presence:"ignore"})){if(f.push(s("array.excludes",{pos:i,value:o},n.localize(w))),r.abortEarly)return f;h=!0,c.shift();break}if(h)continue;if(e.$_terms.ordered.length){if(c.length){const h=c.shift(),a=h.$_validate(o,n.localize(w,m,h),r);if(a.errors){if(f.push(...a.errors),r.abortEarly)return f}else if("strip"===h.xv.result)u.fastSplice(t,i),--i,--g;else{if(!e.xv.sparse&&void 0===a.value){if(f.push(s("array.sparse",{key:v,path:w,pos:i,value:void 0},n.localize(w))),r.abortEarly)return f;continue}t[i]=a.value}continue}if(!e.$_terms.items.length){if(f.push(s("array.orderedLength",{pos:i,limit:e.$_terms.ordered.length})),r.abortEarly)return f;break}}const p=[];let A=a.length;for(let h=0;h<A;++h){const c=n.localize(w,m,a[h]);c.snapshot();const l=a[h].$_validate(o,c,r);if(p[h]=l,!l.errors){if(c.commit(),t[i]=l.value,_=!0,u.fastSplice(a,h),--h,--A,!e.xv.sparse&&void 0===l.value&&(f.push(s("array.sparse",{key:v,path:w,pos:i,value:void 0},n.localize(w))),r.abortEarly))return f;break}c.restore()}if(_)continue;const y=r.stripUnknown&&!!r.stripUnknown.arrays||!1;A=l.length;for(const c of l){let l;const d=a.indexOf(c);if(-1!==d)l=p[d];else{const a=n.localize(w,m,c);if(a.snapshot(),l=c.$_validate(o,a,r),!l.errors){a.commit(),"strip"===c.xv.result?(u.fastSplice(t,i),--i,--g):e.xv.sparse||void 0!==l.value?t[i]=l.value:(f.push(s("array.sparse",{key:v,path:w,pos:i,value:void 0},n.localize(w))),h=!0),_=!0;break}a.restore()}if(1===A){if(y){u.fastSplice(t,i),--i,--g,_=!0;break}if(f.push(...l.errors),r.abortEarly)return f;h=!0;break}}if(!h&&(e.$_terms.yw.length||e.$_terms.Mw.length)&&!_){if(y){u.fastSplice(t,i),--i,--g;continue}if(f.push(s("array.includes",{pos:i,value:o},n.localize(w))),r.abortEarly)return f}}return a.length&&u.fillMissedErrors(e,f,a,t,n,r),c.length&&(u.fillOrderedErrors(e,f,c,t,n,r),f.length||u.fillDefault(c,t,n,r)),f.length?f:t},priority:!0,manifest:!1},length:{method(t){return this.$_addRule({name:"length",args:{limit:t},operator:"="})},validate:(t,i,e,s)=>{let{limit:n}=e,{name:r,operator:o,args:a}=s;return h.compare(t.length,n,o)?t:i.error("array."+r,{limit:a.limit,value:t})},args:[{name:"limit",ref:!0,assert:h.limit,message:"must be a positive integer"}]},max:{method(t){return this.$_addRule({name:"max",method:"length",args:{limit:t},operator:"<="})}},min:{method(t){return this.$_addRule({name:"min",method:"length",args:{limit:t},operator:">="})}},ordered:{method(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];h.verifyFlat(i,"ordered");const s=this.$_addRule("items");for(let t=0;t<i.length;++t){const e=h.tryWithPath((()=>this.$_compile(i[t])),t,{append:!0});u.validateSingle(e,s),s.$_mutateRegister(e),s.$_terms.ordered.push(e)}return s.$_mutateRebuild()}},single:{method(t){const i=void 0===t||!!t;return s(!i||!this.xv.pw,"Cannot specify single rule when array has array items"),this.$_setFlag("single",i)}},sort:{method(t){void 0===t&&(t={}),h.assertOptions(t,["by","order"]);const i={order:t.order||"ascending"};return t.by&&(i.by=a.ref(t.by,{ancestor:0}),s(!i.by.ancestor,"Cannot sort by ancestor")),this.$_addRule({name:"sort",args:{options:i}})},validate(t,i,e){let{error:s,state:n,prefs:r,schema:o}=i,{options:h}=e;const{value:a,errors:c}=u.sort(o,t,h,n,r);if(c)return c;for(let i=0;i<t.length;++i)if(t[i]!==a[i])return s("array.sort",{order:h.order,by:h.by?h.by.key:"value"});return t},convert:!0},sparse:{method(t){const i=void 0===t||!!t;return this.xv.sparse===i?this:(i?this.clone():this.$_addRule("items")).$_setFlag("sparse",i,{clone:!1})}},unique:{method(t,i){void 0===i&&(i={}),s(!t||"function"==typeof t||"string"==typeof t,"comparator must be a function or a string"),h.assertOptions(i,["ignoreUndefined","separator"]);const e={name:"unique",args:{options:i,comparator:t}};if(t)if("string"==typeof t){const s=h.default(i.separator,".");e.path=s?t.split(s):[t]}else e.comparator=t;return this.$_addRule(e)},validate(t,i,e,o){let{state:h,error:a,schema:u}=i,{comparator:c,options:l}=e,{comparator:d,path:f}=o;const g={string:_.create(null),number:_.create(null),undefined:_.create(null),boolean:_.create(null),bigint:_.create(null),object:new Map,function:new Map,custom:new Map},v=d||n,w=l.ignoreUndefined;for(let i=0;i<t.length;++i){const e=f?r(t[i],f):t[i],n=d?g.custom:g[typeof e];if(s(n,"Failed to find unique map container for type",typeof e),n instanceof Map){const s=n.entries();let r;for(;!(r=s.next()).done;)if(v(r.value[0],e)){const e=h.localize([...h.path,i],[t,...h.ancestors]),s={pos:i,value:t[i],dupePos:r.value[1],dupeValue:t[r.value[1]]};return f&&(s.path=c),a("array.unique",s,e)}n.set(e,i)}else{if((!w||void 0!==e)&&void 0!==n[e]){const s={pos:i,value:t[i],dupePos:n[e],dupeValue:t[n[e]]};return f&&(s.path=c),a("array.unique",s,h.localize([...h.path,i],[t,...h.ancestors]))}n[e]=i}}return t},args:["comparator","options"],multi:!0}},cast:{set:{from:Array.isArray,to:(t,i)=>new Set(t)}},rebuild(t){t.$_terms.yw=[],t.$_terms.Aw=[],t.$_terms.Mw=[];for(const i of t.$_terms.items)u.validateSingle(i,t),"required"===i.xv.presence?t.$_terms.Mw.push(i):"forbidden"===i.xv.presence?t.$_terms.Aw.push(i):t.$_terms.yw.push(i);for(const i of t.$_terms.ordered)u.validateSingle(i,t)},manifest:{build:(t,i)=>(i.items&&(t=t.items(...i.items)),i.ordered&&(t=t.ordered(...i.ordered)),t)},messages:{"array.base":"{{#label}} must be an array","array.excludes":"{{#label}} contains an excluded value","array.hasKnown":"{{#label}} does not contain at least one required match for type {:#patternLabel}","array.hasUnknown":"{{#label}} does not contain at least one required match","array.includes":"{{#label}} does not match any of the allowed types","array.includesRequiredBoth":"{{#label}} does not contain {{#knownMisses}} and {{#unknownMisses}} other required value(s)","array.includesRequiredKnowns":"{{#label}} does not contain {{#knownMisses}}","array.includesRequiredUnknowns":"{{#label}} does not contain {{#unknownMisses}} required value(s)","array.length":"{{#label}} must contain {{#limit}} items","array.max":"{{#label}} must contain less than or equal to {{#limit}} items","array.min":"{{#label}} must contain at least {{#limit}} items","array.orderedLength":"{{#label}} must contain at most {{#limit}} items","array.sort":"{{#label}} must be sorted in {#order} order by {{#by}}","array.sort.mismatching":"{{#label}} cannot be sorted due to mismatching types","array.sort.unsupported":"{{#label}} cannot be sorted due to unsupported type {#type}","array.sparse":"{{#label}} must not be a sparse array item","array.unique":"{{#label}} contains a duplicate value"}}),u.fillMissedErrors=function(t,i,e,s,n,r){const o=[];let h=0;for(const t of e){const i=t.xv.label;i?o.push(i):++h}o.length?h?i.push(t.$_createError("array.includesRequiredBoth",s,{knownMisses:o,unknownMisses:h},n,r)):i.push(t.$_createError("array.includesRequiredKnowns",s,{knownMisses:o},n,r)):i.push(t.$_createError("array.includesRequiredUnknowns",s,{unknownMisses:h},n,r))},u.fillOrderedErrors=function(t,i,e,s,n,r){const o=[];for(const t of e)"required"===t.xv.presence&&o.push(t);o.length&&u.fillMissedErrors(t,i,o,s,n,r)},u.fillDefault=function(t,i,e,s){const n=[];let r=!0;for(let o=t.length-1;o>=0;--o){const h=t[o],a=[i,...e.ancestors],u=h.$_validate(void 0,e.localize(e.path,a,h),s).value;if(r){if(void 0===u)continue;r=!1}n.unshift(u)}n.length&&i.push(...n)},u.fastSplice=function(t,i){let e=i;for(;e<t.length;)t[e++]=t[e];--t.length},u.validateSingle=function(t,i){("array"===t.type||t.xv.pw)&&(s(!i.xv.single,"Cannot specify array item with single rule enabled"),i.$_setFlag("pw",!0,{clone:!1}))},u.sort=function(t,i,e,s,n){const r="ascending"===e.order?1:-1,o=-1*r,h=r,a=(a,c)=>{let l=u.compare(a,c,o,h);if(null!==l||(e.by&&(a=e.by.resolve(a,s,n),c=e.by.resolve(c,s,n)),l=u.compare(a,c,o,h),null!==l))return l;const d=typeof a;if(d!==typeof c)throw t.$_createError("array.sort.mismatching",i,null,s,n);if("number"!==d&&"string"!==d)throw t.$_createError("array.sort.unsupported",i,{type:d},s,n);return"number"===d?(a-c)*r:a<c?o:h};try{return{value:i.slice().sort(a)}}catch(t){return{errors:t}}},u.compare=function(t,i,e,s){return t===i?0:void 0===t?1:void 0===i?-1:null===t?s:null===i?e:null}},4937:(t,i,e)=>{const s=e(375),n=e(8068),r=e(8160),o=e(2036),h={isBool:function(t){return"boolean"==typeof t}};t.exports=n.extend({type:"boolean",flags:{sensitive:{default:!1}},terms:{falsy:{init:null,manifest:"values"},truthy:{init:null,manifest:"values"}},coerce(t,i){let{schema:e}=i;if("boolean"!=typeof t){if("string"==typeof t){const i=e.xv.sensitive?t:t.toLowerCase();t="true"===i||"false"!==i&&t}return"boolean"!=typeof t&&(t=e.$_terms.truthy&&e.$_terms.truthy.has(t,null,null,!e.xv.sensitive)||(!e.$_terms.falsy||!e.$_terms.falsy.has(t,null,null,!e.xv.sensitive))&&t),{value:t}}},validate(t,i){let{error:e}=i;if("boolean"!=typeof t)return{value:t,errors:e("boolean.base")}},rules:{truthy:{method(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];r.verifyFlat(i,"truthy");const n=this.clone();n.$_terms.truthy=n.$_terms.truthy||new o;for(let t=0;t<i.length;++t){const e=i[t];s(void 0!==e,"Cannot call truthy with undefined"),n.$_terms.truthy.add(e)}return n}},falsy:{method(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];r.verifyFlat(i,"falsy");const n=this.clone();n.$_terms.falsy=n.$_terms.falsy||new o;for(let t=0;t<i.length;++t){const e=i[t];s(void 0!==e,"Cannot call falsy with undefined"),n.$_terms.falsy.add(e)}return n}},sensitive:{method(t){return void 0===t&&(t=!0),this.$_setFlag("sensitive",t)}}},cast:{number:{from:h.isBool,to:(t,i)=>t?1:0},string:{from:h.isBool,to:(t,i)=>t?"true":"false"}},manifest:{build:(t,i)=>(i.truthy&&(t=t.truthy(...i.truthy)),i.falsy&&(t=t.falsy(...i.falsy)),t)},messages:{"boolean.base":"{{#label}} must be a boolean"}})},7500:(t,i,e)=>{const s=e(375),n=e(8068),r=e(8160),o=e(3328),h={isDate:function(t){return t instanceof Date}};t.exports=n.extend({type:"date",coerce:{from:["number","string"],method:(t,i)=>{let{schema:e}=i;return{value:h.parse(t,e.xv.format)||t}}},validate(t,i){let{schema:e,error:s,prefs:n}=i;if(t instanceof Date&&!j(t.getTime()))return;const r=e.xv.format;return n.convert&&r&&"string"==typeof t?{value:t,errors:s("date.format",{format:r})}:{value:t,errors:s("date.base")}},rules:{compare:{method:!1,validate(t,i,e,s){let{date:n}=e,{name:o,operator:h,args:a}=s;const u="now"===n?Date.now():n.getTime();return r.compare(t.getTime(),u,h)?t:i.error("date."+o,{limit:a.date,value:t})},args:[{name:"date",ref:!0,normalize:t=>"now"===t?t:h.parse(t),assert:t=>null!==t,message:"must have a valid date format"}]},format:{method(t){return s(["iso","javascript","unix"].includes(t),"Unknown date format",t),this.$_setFlag("format",t)}},greater:{method(t){return this.$_addRule({name:"greater",method:"compare",args:{date:t},operator:">"})}},iso:{method(){return this.format("iso")}},less:{method(t){return this.$_addRule({name:"less",method:"compare",args:{date:t},operator:"<"})}},max:{method(t){return this.$_addRule({name:"max",method:"compare",args:{date:t},operator:"<="})}},min:{method(t){return this.$_addRule({name:"min",method:"compare",args:{date:t},operator:">="})}},timestamp:{method(t){return void 0===t&&(t="javascript"),s(["javascript","unix"].includes(t),'"type" must be one of "javascript, unix"'),this.format(t)}}},cast:{number:{from:h.isDate,to:(t,i)=>t.getTime()},string:{from:h.isDate,to:(t,i)=>{let{prefs:e}=i;return o.date(t,e)}}},messages:{"date.base":"{{#label}} must be a valid date","date.format":'{{#label}} must be in {msg("date.format." + #format) || #format} format',"date.greater":"{{#label}} must be greater than {{:#limit}}","date.less":"{{#label}} must be less than {{:#limit}}","date.max":"{{#label}} must be less than or equal to {{:#limit}}","date.min":"{{#label}} must be greater than or equal to {{:#limit}}","date.format.iso":"ISO 8601 date","date.format.javascript":"timestamp or number of milliseconds","date.format.unix":"timestamp or number of seconds"}}),h.parse=function(t,i){if(t instanceof Date)return t;if("string"!=typeof t&&(j(t)||!isFinite(t))||/^\s*$/.test(t))return null;if("iso"===i)return r.isIsoDate(t)?h.date(t.toString()):null;const e=t;if("string"==typeof t&&/^[+-]?\d+(\.\d+)?$/.test(t)&&(t=S(t)),i){if("javascript"===i)return h.date(1*t);if("unix"===i)return h.date(1e3*t);if("string"==typeof e)return null}return h.date(t)},h.date=function(t){const i=new Date(t);return j(i.getTime())?null:i}},390:(t,i,e)=>{const s=e(375),n=e(7824);t.exports=n.extend({type:"function",properties:{typeof:"function"},rules:{arity:{method(t){return s(Number.isSafeInteger(t)&&t>=0,"n must be a positive integer"),this.$_addRule({name:"arity",args:{n:t}})},validate:(t,i,e)=>{let{n:s}=e;return t.length===s?t:i.error("function.arity",{n:s})}},class:{method(){return this.$_addRule("class")},validate:(t,i)=>/^\s*class\s/.test(t.toString())?t:i.error("function.class",{value:t})},minArity:{method(t){return s(Number.isSafeInteger(t)&&t>0,"n must be a strict positive integer"),this.$_addRule({name:"minArity",args:{n:t}})},validate:(t,i,e)=>{let{n:s}=e;return t.length>=s?t:i.error("function.minArity",{n:s})}},maxArity:{method(t){return s(Number.isSafeInteger(t)&&t>=0,"n must be a positive integer"),this.$_addRule({name:"maxArity",args:{n:t}})},validate:(t,i,e)=>{let{n:s}=e;return t.length<=s?t:i.error("function.maxArity",{n:s})}}},messages:{"function.arity":"{{#label}} must have an arity of {{#n}}","function.class":"{{#label}} must be a class","function.maxArity":"{{#label}} must have an arity lesser or equal to {{#n}}","function.minArity":"{{#label}} must have an arity greater or equal to {{#n}}"}})},7824:(t,i,e)=>{const s=e(978),n=e(375),r=e(8571),o=e(3652),h=e(8068),a=e(8160),u=e(3292),c=e(6354),l=e(6133),f=e(3328),v={renameDefaults:{alias:!1,multiple:!1,override:!1}};t.exports=h.extend({type:"Tw",properties:{typeof:"object"},flags:{unknown:{default:void 0}},terms:{dependencies:{init:null},keys:{init:null,manifest:{mapped:{from:"schema",to:"key"}}},patterns:{init:null},renames:{init:null}},args:(t,i)=>t.keys(i),validate(t,i){let{schema:e,error:s,state:n,prefs:r}=i;if(!t||typeof t!==e.$_property("typeof")||Array.isArray(t))return{value:t,errors:s("object.base",{type:e.$_property("typeof")})};if(!(e.$_terms.renames||e.$_terms.dependencies||e.$_terms.keys||e.$_terms.patterns||e.$_terms.externals))return;t=v.clone(t,r);const o=[];if(e.$_terms.renames&&!v.rename(e,t,n,r,o))return{value:t,errors:o};if(!e.$_terms.keys&&!e.$_terms.patterns&&!e.$_terms.dependencies)return{value:t,errors:o};const h=new Set(_.keys(t));if(e.$_terms.keys){const i=[t,...n.ancestors];for(const s of e.$_terms.keys){const e=s.key,a=t[e];h.delete(e);const u=n.localize([...n.path,e],i,s),c=s.schema.$_validate(a,u,r);if(c.errors){if(r.abortEarly)return{value:t,errors:c.errors};void 0!==c.value&&(t[e]=c.value),o.push(...c.errors)}else"strip"===s.schema.xv.result||void 0===c.value&&void 0!==a?delete t[e]:void 0!==c.value&&(t[e]=c.value)}}if(h.size||e.xv.Sw){const i=v.unknown(e,t,h,o,n,r);if(i)return i}if(e.$_terms.dependencies)for(const i of e.$_terms.dependencies){if(null!==i.key&&!1===v.isPresent(i.options)(i.key.resolve(t,n,r,null,{shadow:!1})))continue;const s=v.dependencies[i.rel](e,i,t,n,r);if(s){const i=e.$_createError(s.code,t,s.context,n,r);if(r.abortEarly)return{value:t,errors:i};o.push(i)}}return{value:t,errors:o}},rules:{and:{method(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];return a.verifyFlat(i,"and"),v.dependency(this,"and",null,i)}},append:{method(t){return null==t||0===_.keys(t).length?this:this.keys(t)}},assert:{method(t,i,e){f.isTemplate(t)||(t=u.ref(t)),n(void 0===e||"string"==typeof e,"Message must be a string"),i=this.$_compile(i,{appendPath:!0});const s=this.$_addRule({name:"assert",args:{subject:t,schema:i,message:e}});return s.$_mutateRegister(t),s.$_mutateRegister(i),s},validate(t,i,e){let{error:s,prefs:n,state:r}=i,{subject:o,schema:h,message:a}=e;const u=o.resolve(t,r,n),c=l.isRef(o)?o.absolute(r):[];return h.$_match(u,r.localize(c,[t,...r.ancestors],h),n)?t:s("object.assert",{subject:o,message:a})},args:["subject","schema","message"],multi:!0},instance:{method(t,i){return n("function"==typeof t,"constructor must be a function"),i=i||t.name,this.$_addRule({name:"instance",args:{constructor:t,name:i}})},validate:(t,i,e)=>{let{constructor:s,name:n}=e;return t instanceof s?t:i.error("object.instance",{type:n,value:t})},args:["constructor","name"]},keys:{method(t){n(void 0===t||"object"==typeof t,"Object schema must be a valid object"),n(!a.isSchema(t),"Object schema cannot be a joi schema");const i=this.clone();if(t)if(_.keys(t).length){i.$_terms.keys=i.$_terms.keys?i.$_terms.keys.filter((i=>!t.hasOwnProperty(i.key))):new v.Keys;for(const e in t)a.tryWithPath((()=>i.$_terms.keys.push({key:e,schema:this.$_compile(t[e])})),e)}else i.$_terms.keys=new v.Keys;else i.$_terms.keys=null;return i.$_mutateRebuild()}},length:{method(t){return this.$_addRule({name:"length",args:{limit:t},operator:"="})},validate:(t,i,e,s)=>{let{limit:n}=e,{name:r,operator:o,args:h}=s;return a.compare(_.keys(t).length,n,o)?t:i.error("object."+r,{limit:h.limit,value:t})},args:[{name:"limit",ref:!0,assert:a.limit,message:"must be a positive integer"}]},max:{method(t){return this.$_addRule({name:"max",method:"length",args:{limit:t},operator:"<="})}},min:{method(t){return this.$_addRule({name:"min",method:"length",args:{limit:t},operator:">="})}},nand:{method(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];return a.verifyFlat(i,"nand"),v.dependency(this,"nand",null,i)}},or:{method(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];return a.verifyFlat(i,"or"),v.dependency(this,"or",null,i)}},oxor:{method(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];return v.dependency(this,"oxor",null,i)}},pattern:{method(t,i,e){void 0===e&&(e={});const s=t instanceof RegExp;s||(t=this.$_compile(t,{appendPath:!0})),n(void 0!==i,"Invalid rule"),a.assertOptions(e,["fallthrough","matches"]),s&&n(!t.flags.includes("g")&&!t.flags.includes("y"),"pattern should not use global or sticky mode"),i=this.$_compile(i,{appendPath:!0});const r=this.clone();r.$_terms.patterns=r.$_terms.patterns||[];const o={[s?"regex":"schema"]:t,rule:i};return e.matches&&(o.matches=this.$_compile(e.matches),"array"!==o.matches.type&&(o.matches=o.matches.$_root.array().items(o.matches)),r.$_mutateRegister(o.matches),r.$_setFlag("Sw",!0,{clone:!1})),e.fallthrough&&(o.fallthrough=!0),r.$_terms.patterns.push(o),r.$_mutateRegister(i),r}},ref:{method(){return this.$_addRule("ref")},validate:(t,i)=>l.isRef(t)?t:i.error("object.refType",{value:t})},regex:{method(){return this.$_addRule("regex")},validate:(t,i)=>t instanceof RegExp?t:i.error("object.regex",{value:t})},rename:{method(t,i,e){void 0===e&&(e={}),n("string"==typeof t||t instanceof RegExp,"Rename missing the from argument"),n("string"==typeof i||i instanceof f,"Invalid rename to argument"),n(i!==t,"Cannot rename key to same name:",t),a.assertOptions(e,["alias","ignoreUndefined","override","multiple"]);const r=this.clone();r.$_terms.renames=r.$_terms.renames||[];for(const i of r.$_terms.renames)n(i.from!==t,"Cannot rename the same key multiple times");return i instanceof f&&r.$_mutateRegister(i),r.$_terms.renames.push({from:t,to:i,options:s(v.renameDefaults,e)}),r}},schema:{method(t){return void 0===t&&(t="any"),this.$_addRule({name:"schema",args:{type:t}})},validate:(t,i,e)=>{let{type:s}=e;return!a.isSchema(t)||"any"!==s&&t.type!==s?i.error("object.schema",{type:s}):t}},unknown:{method(t){return this.$_setFlag("unknown",!1!==t)}},with:{method(t,i,e){return void 0===e&&(e={}),v.dependency(this,"with",t,i,e)}},without:{method(t,i,e){return void 0===e&&(e={}),v.dependency(this,"without",t,i,e)}},xor:{method(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];return a.verifyFlat(i,"xor"),v.dependency(this,"xor",null,i)}}},overrides:{default(t,i){return void 0===t&&(t=a.symbols.deepDefault),this.$_parent("default",t,i)}},rebuild(t){if(t.$_terms.keys){const i=new o.Sorter;for(const e of t.$_terms.keys)a.tryWithPath((()=>i.add(e,{after:e.schema.$_rootReferences(),group:e.key})),e.key);t.$_terms.keys=new v.Keys(...i.nodes)}},manifest:{build(t,i){if(i.keys&&(t=t.keys(i.keys)),i.dependencies)for(const{rel:e,key:s=null,peers:n,options:r}of i.dependencies)t=v.dependency(t,e,s,n,r);if(i.patterns)for(const{regex:e,schema:s,rule:n,fallthrough:r,matches:o}of i.patterns)t=t.pattern(e||s,n,{fallthrough:r,matches:o});if(i.renames)for(const{from:e,to:s,options:n}of i.renames)t=t.rename(e,s,n);return t}},messages:{"object.and":"{{#label}} contains {{#presentWithLabels}} without its required peers {{#missingWithLabels}}","object.assert":'{{#label}} is invalid because {if(#subject.key, `"` + #subject.key + `" failed to ` + (#message || "pass the assertion test"), #message || "the assertion failed")}',"object.base":"{{#label}} must be of type {{#type}}","object.instance":"{{#label}} must be an instance of {{:#type}}","object.length":'{{#label}} must have {{#limit}} key{if(#limit == 1, "", "s")}',"object.max":'{{#label}} must have less than or equal to {{#limit}} key{if(#limit == 1, "", "s")}',"object.min":'{{#label}} must have at least {{#limit}} key{if(#limit == 1, "", "s")}',"object.missing":"{{#label}} must contain at least one of {{#peersWithLabels}}","object.nand":"{{:#mainWithLabel}} must not exist simultaneously with {{#peersWithLabels}}","object.oxor":"{{#label}} contains a conflict between optional exclusive peers {{#peersWithLabels}}","object.pattern.match":"{{#label}} keys failed to match pattern requirements","object.refType":"{{#label}} must be a Joi reference","object.regex":"{{#label}} must be a RegExp object","object.rename.multiple":"{{#label}} cannot rename {{:#from}} because multiple renames are disabled and another key was already renamed to {{:#to}}","object.rename.override":"{{#label}} cannot rename {{:#from}} because override is disabled and target {{:#to}} exists","object.schema":"{{#label}} must be a Joi schema of {{#type}} type","object.unknown":"{{#label}} is not allowed","object.with":"{{:#mainWithLabel}} missing required peer {{:#peerWithLabel}}","object.without":"{{:#mainWithLabel}} conflict with forbidden peer {{:#peerWithLabel}}","object.xor":"{{#label}} contains a conflict between exclusive peers {{#peersWithLabels}}"}}),v.clone=function(t,i){if("object"==typeof t){if(i.nonEnumerables)return r(t,{shallow:!0});const e=_.create(_.getPrototypeOf(t));return _.assign(e,t),e}const e=function(){for(var i=arguments.length,e=new Array(i),s=0;s<i;s++)e[s]=arguments[s];return t.apply(this,e)};return e.prototype=r(t.prototype),_.defineProperty(e,"name",{value:t.name,writable:!1}),_.defineProperty(e,"length",{value:t.length,writable:!1}),_.assign(e,t),e},v.dependency=function(t,i,e,s,r){n(null===e||"string"==typeof e,i,"key must be a strings"),r||(r=s.length>1&&"object"==typeof s[s.length-1]?s.pop():{}),a.assertOptions(r,["separator","isPresent"]),s=[].concat(s);const o=a.default(r.separator,"."),h=[];for(const t of s)n("string"==typeof t,i,"peers must be strings"),h.push(u.ref(t,{separator:o,ancestor:0,prefix:!1}));null!==e&&(e=u.ref(e,{separator:o,ancestor:0,prefix:!1}));const c=t.clone();return c.$_terms.dependencies=c.$_terms.dependencies||[],c.$_terms.dependencies.push(new v.Dependency(i,e,h,s,r)),c},v.dependencies={and(t,i,e,s,n){const r=[],o=[],h=i.peers.length,a=v.isPresent(i.options);for(const t of i.peers)!1===a(t.resolve(e,s,n,null,{shadow:!1}))?r.push(t.key):o.push(t.key);if(r.length!==h&&o.length!==h)return{code:"object.and",context:{present:o,presentWithLabels:v.keysToLabels(t,o),missing:r,missingWithLabels:v.keysToLabels(t,r)}}},nand(t,i,e,s,n){const r=[],o=v.isPresent(i.options);for(const t of i.peers)o(t.resolve(e,s,n,null,{shadow:!1}))&&r.push(t.key);if(r.length!==i.peers.length)return;const h=i.paths[0],a=i.paths.slice(1);return{code:"object.nand",context:{main:h,mainWithLabel:v.keysToLabels(t,h),peers:a,peersWithLabels:v.keysToLabels(t,a)}}},or(t,i,e,s,n){const r=v.isPresent(i.options);for(const t of i.peers)if(r(t.resolve(e,s,n,null,{shadow:!1})))return;return{code:"object.missing",context:{peers:i.paths,peersWithLabels:v.keysToLabels(t,i.paths)}}},oxor(t,i,e,s,n){const r=[],o=v.isPresent(i.options);for(const t of i.peers)o(t.resolve(e,s,n,null,{shadow:!1}))&&r.push(t.key);if(!r.length||1===r.length)return;const h={peers:i.paths,peersWithLabels:v.keysToLabels(t,i.paths)};return h.present=r,h.presentWithLabels=v.keysToLabels(t,r),{code:"object.oxor",context:h}},with(t,i,e,s,n){const r=v.isPresent(i.options);for(const o of i.peers)if(!1===r(o.resolve(e,s,n,null,{shadow:!1})))return{code:"object.with",context:{main:i.key.key,mainWithLabel:v.keysToLabels(t,i.key.key),peer:o.key,peerWithLabel:v.keysToLabels(t,o.key)}}},without(t,i,e,s,n){const r=v.isPresent(i.options);for(const o of i.peers)if(r(o.resolve(e,s,n,null,{shadow:!1})))return{code:"object.without",context:{main:i.key.key,mainWithLabel:v.keysToLabels(t,i.key.key),peer:o.key,peerWithLabel:v.keysToLabels(t,o.key)}}},xor(t,i,e,s,n){const r=[],o=v.isPresent(i.options);for(const t of i.peers)o(t.resolve(e,s,n,null,{shadow:!1}))&&r.push(t.key);if(1===r.length)return;const h={peers:i.paths,peersWithLabels:v.keysToLabels(t,i.paths)};return 0===r.length?{code:"object.missing",context:h}:(h.present=r,h.presentWithLabels=v.keysToLabels(t,r),{code:"object.xor",context:h})}},v.keysToLabels=function(t,i){return Array.isArray(i)?i.map((i=>t.$_mapLabels(i))):t.$_mapLabels(i)},v.isPresent=function(t){return"function"==typeof t.isPresent?t.isPresent:t=>void 0!==t},v.rename=function(t,i,e,s,n){const r={};for(const o of t.$_terms.renames){const h=[],a="string"!=typeof o.from;if(a)for(const t in i){if(void 0===i[t]&&o.options.ignoreUndefined||t===o.to)continue;const e=o.from.exec(t);e&&h.push({from:t,to:o.to,match:e})}else!_.prototype.hasOwnProperty.call(i,o.from)||void 0===i[o.from]&&o.options.ignoreUndefined||h.push(o);for(const u of h){const h=u.from;let c=u.to;if(c instanceof f&&(c=c.render(i,e,s,u.match)),h!==c){if(!o.options.multiple&&r[c]&&(n.push(t.$_createError("object.rename.multiple",i,{from:h,to:c,pattern:a},e,s)),s.abortEarly)||_.prototype.hasOwnProperty.call(i,c)&&!o.options.override&&!r[c]&&(n.push(t.$_createError("object.rename.override",i,{from:h,to:c,pattern:a},e,s)),s.abortEarly))return!1;void 0===i[h]?delete i[c]:i[c]=i[h],r[c]=!0,o.options.alias||delete i[h]}}}return!0},v.unknown=function(t,i,e,s,n,r){if(t.$_terms.patterns){let o=!1;const h=t.$_terms.patterns.map((t=>{if(t.matches)return o=!0,[]})),a=[i,...n.ancestors];for(const o of e){const u=i[o],c=[...n.path,o];for(let l=0;l<t.$_terms.patterns.length;++l){const d=t.$_terms.patterns[l];if(d.regex){const t=d.regex.test(o);if(n.mainstay.tracer.debug(n,"rule","pattern.".concat(l),t?"pass":"error"),!t)continue}else if(!d.schema.$_match(o,n.nest(d.schema,"pattern.".concat(l)),r))continue;e.delete(o);const f=n.localize(c,a,{schema:d.rule,key:o}),g=d.rule.$_validate(u,f,r);if(g.errors){if(r.abortEarly)return{value:i,errors:g.errors};s.push(...g.errors)}if(d.matches&&h[l].push(o),i[o]=g.value,!d.fallthrough)break}}if(o)for(let e=0;e<h.length;++e){const o=h[e];if(!o)continue;const u=t.$_terms.patterns[e].matches,l=n.localize(n.path,a,u),d=u.$_validate(o,l,r);if(d.errors){const e=c.details(d.errors,{override:!1});e.matches=o;const h=t.$_createError("object.pattern.match",i,e,n,r);if(r.abortEarly)return{value:i,errors:h};s.push(h)}}}if(e.size&&(t.$_terms.keys||t.$_terms.patterns)){if(r.stripUnknown&&void 0===t.xv.unknown||r.skipFunctions){const t=!(!r.stripUnknown||!0!==r.stripUnknown&&!r.stripUnknown.objects);for(const s of e)t?(delete i[s],e.delete(s)):"function"==typeof i[s]&&e.delete(s)}if(!a.default(t.xv.unknown,r.allowUnknown))for(const o of e){const e=n.localize([...n.path,o],[]),h=t.$_createError("object.unknown",i[o],{child:o},e,r,{flags:!1});if(r.abortEarly)return{value:i,errors:h};s.push(h)}}},v.Dependency=class{describe(){const t={rel:this.rel,peers:this.paths};return null!==this.key&&(t.key=this.key.key),"."!==this.peers[0].separator&&(t.options=g(d({},t.options),{separator:this.peers[0].separator})),this.options.isPresent&&(t.options=g(d({},t.options),{isPresent:this.options.isPresent})),t}constructor(t,i,e,s,n){this.rel=t,this.key=i,this.peers=e,this.paths=s,this.options=n}},v.Keys=class extends Array{concat(t){const i=this.slice(),e=new Map;for(let t=0;t<i.length;++t)e.set(i[t].key,t);for(const s of t){const t=s.key,n=e.get(t);void 0!==n?i[n]={key:t,schema:i[n].schema.concat(s.schema)}:i.push(s)}return i}}},8785:(t,i,e)=>{const s=e(375),n=e(8068),r=e(8160),o=e(3292),h=e(6354),a={};t.exports=n.extend({type:"link",properties:{schemaChain:!0},terms:{link:{init:null,manifest:"single",register:!1}},args:(t,i)=>t.ref(i),validate(t,i){let{schema:e,state:n,prefs:r}=i;s(e.$_terms.link,"Uninitialized link schema");const o=a.generate(e,t,n,r),h=e.$_terms.link[0].ref;return o.$_validate(t,n.nest(o,"link:".concat(h.display,":").concat(o.type)),r)},generate:(t,i,e,s)=>a.generate(t,i,e,s),rules:{ref:{method(t){s(!this.$_terms.link,"Cannot reinitialize schema"),t=o.ref(t),s("value"===t.type||"local"===t.type,"Invalid reference type:",t.type),s("local"===t.type||"root"===t.ancestor||t.ancestor>0,"Link cannot reference itself");const i=this.clone();return i.$_terms.link=[{ref:t}],i}},relative:{method(t){return void 0===t&&(t=!0),this.$_setFlag("relative",t)}}},overrides:{concat(t){s(this.$_terms.link,"Uninitialized link schema"),s(r.isSchema(t),"Invalid schema object"),s("link"!==t.type,"Cannot merge type link with another link");const i=this.clone();return i.$_terms.whens||(i.$_terms.whens=[]),i.$_terms.whens.push({concat:t}),i.$_mutateRebuild()}},manifest:{build:(t,i)=>(s(i.link,"Invalid link description missing link"),t.ref(i.link))}}),a.generate=function(t,i,e,s){let n=e.mainstay.links.get(t);if(n)return n.Zv(i,e,s).schema;const r=t.$_terms.link[0].ref,{perspective:o,path:h}=a.perspective(r,e);a.assert(o,"which is outside of schema boundaries",r,t,e,s);try{n=h.length?o.$_reach(h):o}catch(i){a.assert(!1,"to non-existing schema",r,t,e,s)}return a.assert("link"!==n.type,"which is another link",r,t,e,s),t.xv.relative||e.mainstay.links.set(t,n),n.Zv(i,e,s).schema},a.perspective=function(t,i){if("local"===t.type){for(const{schema:e,key:s}of i.schemas){if((e.xv.id||s)===t.path[0])return{perspective:e,path:t.path.slice(1)};if(e.$_terms.shared)for(const i of e.$_terms.shared)if(i.xv.id===t.path[0])return{perspective:i,path:t.path.slice(1)}}return{perspective:null,path:null}}return"root"===t.ancestor?{perspective:i.schemas[i.schemas.length-1].schema,path:t.path}:{perspective:i.schemas[t.ancestor]&&i.schemas[t.ancestor].schema,path:t.path}},a.assert=function(t,i,e,n,r,o){t||s(!1,'"'.concat(h.label(n.xv,r,o),'" contains link reference "').concat(e.display,'" ').concat(i))}},3832:(t,i,e)=>{const s=e(375),n=e(8068),r=e(8160),o={numberRx:/^\s*[+-]?(?:(?:\d+(?:\.\d*)?)|(?:\.\d+))(?:e([+-]?\d+))?\s*$/i,precisionRx:/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/,exponentialPartRegex:/[eE][+-]?\d+$/,leadingSignAndZerosRegex:/^[+-]?(0*)?/,dotRegex:/\./,trailingZerosRegex:/0+$/,decimalPlaces(t){const i=t.toString(),e=i.indexOf("."),s=i.indexOf("e");return(e<0?0:(s<0?i.length:s)-e-1)+(s<0?0:x.max(0,-C(i.slice(s+1))))}};t.exports=n.extend({type:"number",flags:{unsafe:{default:!1}},coerce:{from:"string",method(t,i){let{schema:e,error:s}=i;if(!t.match(o.numberRx))return;t=t.trim();const n={value:S(t)};if(0===n.value&&(n.value=0),!e.xv.unsafe)if(t.match(/e/i)){if(o.extractSignificantDigits(t)!==o.extractSignificantDigits(String(n.value)))return n.errors=s("number.unsafe"),n}else{const i=n.value.toString();if(i.match(/e/i))return n;if(i!==o.normalizeDecimal(t))return n.errors=s("number.unsafe"),n}return n}},validate(t,i){let{schema:e,error:s,prefs:n}=i;if(t===1/0||t===-1/0)return{value:t,errors:s("number.infinity")};if(!r.isNumber(t))return{value:t,errors:s("number.base")};const o={value:t};if(n.convert){const t=e.$_getRule("precision");if(t){const i=x.pow(10,t.args.limit);o.value=x.round(o.value*i)/i}}return 0===o.value&&(o.value=0),!e.xv.unsafe&&(t>Number.MAX_SAFE_INTEGER||t<Number.MIN_SAFE_INTEGER)&&(o.errors=s("number.unsafe")),o},rules:{compare:{method:!1,validate:(t,i,e,s)=>{let{limit:n}=e,{name:o,operator:h,args:a}=s;return r.compare(t,n,h)?t:i.error("number."+o,{limit:a.limit,value:t})},args:[{name:"limit",ref:!0,assert:r.isNumber,message:"must be a number"}]},greater:{method(t){return this.$_addRule({name:"greater",method:"compare",args:{limit:t},operator:">"})}},integer:{method(){return this.$_addRule("integer")},validate:(t,i)=>x.trunc(t)-t==0?t:i.error("number.integer")},less:{method(t){return this.$_addRule({name:"less",method:"compare",args:{limit:t},operator:"<"})}},max:{method(t){return this.$_addRule({name:"max",method:"compare",args:{limit:t},operator:"<="})}},min:{method(t){return this.$_addRule({name:"min",method:"compare",args:{limit:t},operator:">="})}},multiple:{method(t){const i="number"==typeof t?o.decimalPlaces(t):null,e=x.pow(10,i);return this.$_addRule({name:"multiple",args:{base:t,baseDecimalPlace:i,pfactor:e}})},validate:(t,i,e,s)=>{let{base:n,baseDecimalPlace:r,pfactor:h}=e;return o.decimalPlaces(t)>r?i.error("number.multiple",{multiple:s.args.base,value:t}):x.round(h*t)%x.round(h*n)==0?t:i.error("number.multiple",{multiple:s.args.base,value:t})},args:[{name:"base",ref:!0,assert:t=>"number"==typeof t&&isFinite(t)&&t>0,message:"must be a positive number"},"baseDecimalPlace","pfactor"],multi:!0},negative:{method(){return this.sign("negative")}},port:{method(){return this.$_addRule("port")},validate:(t,i)=>Number.isSafeInteger(t)&&t>=0&&t<=65535?t:i.error("number.port")},positive:{method(){return this.sign("positive")}},precision:{method(t){return s(Number.isSafeInteger(t),"limit must be an integer"),this.$_addRule({name:"precision",args:{limit:t}})},validate(t,i,e){let{limit:s}=e;const n=t.toString().match(o.precisionRx);return x.max((n[1]?n[1].length:0)-(n[2]?C(n[2],10):0),0)<=s?t:i.error("number.precision",{limit:s,value:t})},convert:!0},sign:{method(t){return s(["negative","positive"].includes(t),"Invalid sign",t),this.$_addRule({name:"sign",args:{sign:t}})},validate:(t,i,e)=>{let{sign:s}=e;return"negative"===s&&t<0||"positive"===s&&t>0?t:i.error("number.".concat(s))}},unsafe:{method(t){return void 0===t&&(t=!0),s("boolean"==typeof t,"enabled must be a boolean"),this.$_setFlag("unsafe",t)}}},cast:{string:{from:t=>"number"==typeof t,to:(t,i)=>t.toString()}},messages:{"number.base":"{{#label}} must be a number","number.greater":"{{#label}} must be greater than {{#limit}}","number.infinity":"{{#label}} cannot be infinity","number.integer":"{{#label}} must be an integer","number.less":"{{#label}} must be less than {{#limit}}","number.max":"{{#label}} must be less than or equal to {{#limit}}","number.min":"{{#label}} must be greater than or equal to {{#limit}}","number.multiple":"{{#label}} must be a multiple of {{#multiple}}","number.negative":"{{#label}} must be a negative number","number.port":"{{#label}} must be a valid port","number.positive":"{{#label}} must be a positive number","number.precision":"{{#label}} must have no more than {{#limit}} decimal places","number.unsafe":"{{#label}} must be a safe number"}}),o.extractSignificantDigits=function(t){return t.replace(o.exponentialPartRegex,"").replace(o.dotRegex,"").replace(o.trailingZerosRegex,"").replace(o.leadingSignAndZerosRegex,"")},o.normalizeDecimal=function(t){return(t=t.replace(/^\+/,"").replace(/\.0*$/,"").replace(/^(-?)\.([^\.]*)$/,"$10.$2").replace(/^(-?)0+([0-9])/,"$1$2")).includes(".")&&t.endsWith("0")&&(t=t.replace(/0+$/,"")),"-0"===t?"0":t}},8966:(t,i,e)=>{const s=e(7824);t.exports=s.extend({type:"object",cast:{map:{from:t=>t&&"object"==typeof t,to:(t,i)=>new Map(_.entries(t))}}})},7417:(t,i,e)=>{const s=e(375),n=e(5380),r=e(1745),o=e(9959),h=e(6064),a=e(9926),u=e(5752),c=e(8068),l=e(8160),f={tlds:a instanceof Set&&{tlds:{allow:a,deny:null}},base64Regex:{true:{true:/^(?:[\w\-]{2}[\w\-]{2})*(?:[\w\-]{2}==|[\w\-]{3}=)?$/,false:/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/},false:{true:/^(?:[\w\-]{2}[\w\-]{2})*(?:[\w\-]{2}(==)?|[\w\-]{3}=?)?$/,false:/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}(==)?|[A-Za-z0-9+\/]{3}=?)?$/}},dataUriRegex:/^data:[\w+.-]+\/[\w+.-]+;((charset=[\w-]+|base64),)?(.*)$/,hexRegex:{withPrefix:/^0x[0-9a-f]+$/i,withOptionalPrefix:/^(?:0x)?[0-9a-f]+$/i,withoutPrefix:/^[0-9a-f]+$/i},ipRegex:o.regex({cidr:"forbidden"}).regex,isoDurationRegex:/^P(?!$)(\d+Y)?(\d+M)?(\d+W)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?$/,guidBrackets:{"{":"}","[":"]","(":")","":""},guidVersions:{uuidv1:"1",uuidv2:"2",uuidv3:"3",uuidv4:"4",uuidv5:"5",uuidv6:"6",uuidv7:"7",uuidv8:"8"},guidSeparators:new Set([void 0,!0,!1,"-",":"]),normalizationForms:["NFC","NFD","NFKC","NFKD"]};t.exports=c.extend({type:"string",flags:{insensitive:{default:!1},truncate:{default:!1}},terms:{replacements:{init:null}},coerce:{from:"string",method(t,i){let{schema:e,state:s,prefs:n}=i;const r=e.$_getRule("normalize");r&&(t=t.normalize(r.args.form));const o=e.$_getRule("case");o&&(t="upper"===o.args.direction?t.toLocaleUpperCase():t.toLocaleLowerCase());const h=e.$_getRule("trim");if(h&&h.args.enabled&&(t=t.trim()),e.$_terms.replacements)for(const i of e.$_terms.replacements)t=t.replace(i.pattern,i.replacement);const a=e.$_getRule("hex");if(a&&a.args.options.byteAligned&&t.length%2!=0&&(t="0".concat(t)),e.$_getRule("isoDate")){const i=f.isoDate(t);i&&(t=i)}if(e.xv.truncate){const i=e.$_getRule("max");if(i){let r=i.args.limit;if(l.isResolvable(r)&&(r=r.resolve(t,s,n),!l.limit(r)))return{value:t,errors:e.$_createError("any.ref",r,{ref:i.args.limit,arg:"limit",reason:"must be a positive integer"},s,n)};t=t.slice(0,r)}}return{value:t}}},validate(t,i){let{schema:e,error:s}=i;if("string"!=typeof t)return{value:t,errors:s("string.base")};if(""===t){const i=e.$_getRule("min");return i&&0===i.args.limit?void 0:{value:t,errors:s("string.empty")}}},rules:{alphanum:{method(){return this.$_addRule("alphanum")},validate:(t,i)=>/^[a-zA-Z0-9]+$/.test(t)?t:i.error("string.alphanum")},base64:{method(t){return void 0===t&&(t={}),l.assertOptions(t,["paddingRequired","urlSafe"]),t=d({urlSafe:!1,paddingRequired:!0},t),s("boolean"==typeof t.paddingRequired,"paddingRequired must be boolean"),s("boolean"==typeof t.urlSafe,"urlSafe must be boolean"),this.$_addRule({name:"base64",args:{options:t}})},validate:(t,i,e)=>{let{options:s}=e;return f.base64Regex[s.paddingRequired][s.urlSafe].test(t)?t:i.error("string.base64")}},case:{method(t){return s(["lower","upper"].includes(t),"Invalid case:",t),this.$_addRule({name:"case",args:{direction:t}})},validate:(t,i,e)=>{let{direction:s}=e;return"lower"===s&&t===t.toLocaleLowerCase()||"upper"===s&&t===t.toLocaleUpperCase()?t:i.error("string.".concat(s,"case"))},convert:!0},creditCard:{method(){return this.$_addRule("creditCard")},validate(t,i){let e=t.length,s=0,n=1;for(;e--;){const i=t.charAt(e)*n;s+=i-9*(i>9),n^=3}return s>0&&s%10==0?t:i.error("string.creditCard")}},dataUri:{method(t){return void 0===t&&(t={}),l.assertOptions(t,["paddingRequired"]),t=d({paddingRequired:!0},t),s("boolean"==typeof t.paddingRequired,"paddingRequired must be boolean"),this.$_addRule({name:"dataUri",args:{options:t}})},validate(t,i,e){let{options:s}=e;const n=t.match(f.dataUriRegex);return!n||n[2]&&"base64"===n[2]&&!f.base64Regex[s.paddingRequired].false.test(n[3])?i.error("string.dataUri"):t}},domain:{method(t){t&&l.assertOptions(t,["allowFullyQualified","allowUnicode","maxDomainSegments","minDomainSegments","tlds"]);const i=f.addressOptions(t);return this.$_addRule({name:"domain",args:{options:t},address:i})},validate:(t,i,e,s)=>{let{address:r}=s;return n.isValid(t,r)?t:i.error("string.domain")}},email:{method(t){void 0===t&&(t={}),l.assertOptions(t,["allowFullyQualified","allowUnicode","ignoreLength","maxDomainSegments","minDomainSegments","multiple","separator","tlds"]),s(void 0===t.multiple||"boolean"==typeof t.multiple,"multiple option must be an boolean");const i=f.addressOptions(t),e=new RegExp("\\s*[".concat(t.separator?h(t.separator):",","]\\s*"));return this.$_addRule({name:"email",args:{options:t},regex:e,address:i})},validate(t,i,e,s){let{options:n}=e,{regex:o,address:h}=s;const a=n.multiple?t.split(o):[t],u=[];for(const t of a)r.isValid(t,h)||u.push(t);return u.length?i.error("string.email",{value:t,invalids:u}):t}},guid:{alias:"uuid",method(t){void 0===t&&(t={}),l.assertOptions(t,["version","separator"]);let i="";if(t.version){const e=[].concat(t.version);s(e.length>=1,"version must have at least 1 valid version specified");const n=new Set;for(let t=0;t<e.length;++t){const r=e[t];s("string"==typeof r,"version at position "+t+" must be a string");const o=f.guidVersions[r.toLowerCase()];s(o,"version at position "+t+" must be one of "+_.keys(f.guidVersions).join(", ")),s(!n.has(o),"version at position "+t+" must not be a duplicate"),i+=o,n.add(o)}}s(f.guidSeparators.has(t.separator),'separator must be one of true, false, "-", or ":"');const e=void 0===t.separator?"[:-]?":!0===t.separator?"[:-]":!1===t.separator?"[]?":"\\".concat(t.separator),n=new RegExp("^([\\[{\\(]?)[0-9A-F]{8}(".concat(e,")[0-9A-F]{4}\\2?[").concat(i||"0-9A-F","][0-9A-F]{3}\\2?[").concat(i?"89AB":"0-9A-F","][0-9A-F]{3}\\2?[0-9A-F]{12}([\\]}\\)]?)$"),"i");return this.$_addRule({name:"guid",args:{options:t},regex:n})},validate(t,i,e,s){let{regex:n}=s;const r=n.exec(t);return r?f.guidBrackets[r[1]]!==r[r.length-1]?i.error("string.guid"):t:i.error("string.guid")}},hex:{method(t){return void 0===t&&(t={}),l.assertOptions(t,["byteAligned","prefix"]),t=d({byteAligned:!1,prefix:!1},t),s("boolean"==typeof t.byteAligned,"byteAligned must be boolean"),s("boolean"==typeof t.prefix||"optional"===t.prefix,'prefix must be boolean or "optional"'),this.$_addRule({name:"hex",args:{options:t}})},validate:(t,i,e)=>{let{options:s}=e;return("optional"===s.prefix?f.hexRegex.withOptionalPrefix:!0===s.prefix?f.hexRegex.withPrefix:f.hexRegex.withoutPrefix).test(t)?s.byteAligned&&t.length%2!=0?i.error("string.hexAlign"):t:i.error("string.hex")}},hostname:{method(){return this.$_addRule("hostname")},validate:(t,i)=>n.isValid(t,{minDomainSegments:1})||f.ipRegex.test(t)?t:i.error("string.hostname")},insensitive:{method(){return this.$_setFlag("insensitive",!0)}},ip:{method(t){void 0===t&&(t={}),l.assertOptions(t,["cidr","version"]);const{cidr:i,versions:e,regex:s}=o.regex(t),n=t.version?e:void 0;return this.$_addRule({name:"ip",args:{options:{cidr:i,version:n}},regex:s})},validate:(t,i,e,s)=>{let{options:n}=e,{regex:r}=s;return r.test(t)?t:n.version?i.error("string.ipVersion",{value:t,cidr:n.cidr,version:n.version}):i.error("string.ip",{value:t,cidr:n.cidr})}},isoDate:{method(){return this.$_addRule("isoDate")},validate:(t,i)=>{let{error:e}=i;return f.isoDate(t)?t:e("string.isoDate")}},isoDuration:{method(){return this.$_addRule("isoDuration")},validate:(t,i)=>f.isoDurationRegex.test(t)?t:i.error("string.isoDuration")},length:{method(t,i){return f.length(this,"length",t,"=",i)},validate(t,i,e,s){let{limit:n,encoding:r}=e,{name:o,operator:h,args:a}=s;const u=!r&&t.length;return l.compare(u,n,h)?t:i.error("string."+o,{limit:a.limit,value:t,encoding:r})},args:[{name:"limit",ref:!0,assert:l.limit,message:"must be a positive integer"},"encoding"]},lowercase:{method(){return this.case("lower")}},max:{method(t,i){return f.length(this,"max",t,"<=",i)},args:["limit","encoding"]},min:{method(t,i){return f.length(this,"min",t,">=",i)},args:["limit","encoding"]},normalize:{method(t){return void 0===t&&(t="NFC"),s(f.normalizationForms.includes(t),"normalization form must be one of "+f.normalizationForms.join(", ")),this.$_addRule({name:"normalize",args:{form:t}})},validate:(t,i,e)=>{let{error:s}=i,{form:n}=e;return t===t.normalize(n)?t:s("string.normalize",{value:t,form:n})},convert:!0},pattern:{alias:"regex",method(t,i){void 0===i&&(i={}),s(t instanceof RegExp,"regex must be a RegExp"),s(!t.flags.includes("g")&&!t.flags.includes("y"),"regex should not use global or sticky mode"),"string"==typeof i&&(i={name:i}),l.assertOptions(i,["invert","name"]);const e=["string.pattern",i.invert?".invert":"",i.name?".name":".base"].join("");return this.$_addRule({name:"pattern",args:{regex:t,options:i},errorCode:e})},validate:(t,i,e,s)=>{let{regex:n,options:r}=e,{errorCode:o}=s;return n.test(t)^r.invert?t:i.error(o,{name:r.name,regex:n,value:t})},args:["regex","options"],multi:!0},replace:{method(t,i){"string"==typeof t&&(t=new RegExp(h(t),"g")),s(t instanceof RegExp,"pattern must be a RegExp"),s("string"==typeof i,"replacement must be a String");const e=this.clone();return e.$_terms.replacements||(e.$_terms.replacements=[]),e.$_terms.replacements.push({pattern:t,replacement:i}),e}},token:{method(){return this.$_addRule("token")},validate:(t,i)=>/^\w+$/.test(t)?t:i.error("string.token")},trim:{method(t){return void 0===t&&(t=!0),s("boolean"==typeof t,"enabled must be a boolean"),this.$_addRule({name:"trim",args:{enabled:t}})},validate:(t,i,e)=>{let{enabled:s}=e;return s&&t!==t.trim()?i.error("string.trim"):t},convert:!0},truncate:{method(t){return void 0===t&&(t=!0),s("boolean"==typeof t,"enabled must be a boolean"),this.$_setFlag("truncate",t)}},uppercase:{method(){return this.case("upper")}},uri:{method(t){void 0===t&&(t={}),l.assertOptions(t,["allowRelative","allowQuerySquareBrackets","domain","relativeOnly","scheme","encodeUri"]),t.domain&&l.assertOptions(t.domain,["allowFullyQualified","allowUnicode","maxDomainSegments","minDomainSegments","tlds"]);const{regex:i,scheme:e}=u.regex(t),s=t.domain?f.addressOptions(t.domain):null;return this.$_addRule({name:"uri",args:{options:t},regex:i,domain:s,scheme:e})},validate(t,i,e,s){let{options:r}=e,{regex:o,domain:h,scheme:a}=s;if(["http:/","https:/"].includes(t))return i.error("string.uri");let u=o.exec(t);if(!u&&i.prefs.convert&&r.encodeUri){const i=encodeURI(t);u=o.exec(i),u&&(t=i)}if(u){const e=u[1]||u[2];return!h||r.allowRelative&&!e||n.isValid(e,h)?t:i.error("string.domain",{value:e})}return r.relativeOnly?i.error("string.uriRelativeOnly"):r.scheme?i.error("string.uriCustomScheme",{scheme:a,value:t}):i.error("string.uri")}}},manifest:{build(t,i){if(i.replacements)for(const{pattern:e,replacement:s}of i.replacements)t=t.replace(e,s);return t}},messages:{"string.alphanum":"{{#label}} must only contain alpha-numeric characters","string.base":"{{#label}} must be a string","string.base64":"{{#label}} must be a valid base64 string","string.creditCard":"{{#label}} must be a credit card","string.dataUri":"{{#label}} must be a valid dataUri string","string.domain":"{{#label}} must contain a valid domain name","string.email":"{{#label}} must be a valid email","string.empty":"{{#label}} is not allowed to be empty","string.guid":"{{#label}} must be a valid GUID","string.hex":"{{#label}} must only contain hexadecimal characters","string.hexAlign":"{{#label}} hex decoded representation must be byte aligned","string.hostname":"{{#label}} must be a valid hostname","string.ip":"{{#label}} must be a valid ip address with a {{#cidr}} CIDR","string.ipVersion":"{{#label}} must be a valid ip address of one of the following versions {{#version}} with a {{#cidr}} CIDR","string.isoDate":"{{#label}} must be in iso format","string.isoDuration":"{{#label}} must be a valid ISO 8601 duration","string.length":"{{#label}} length must be {{#limit}} characters long","string.lowercase":"{{#label}} must only contain lowercase characters","string.max":"{{#label}} length must be less than or equal to {{#limit}} characters long","string.min":"{{#label}} length must be at least {{#limit}} characters long","string.normalize":"{{#label}} must be unicode normalized in the {{#form}} form","string.token":"{{#label}} must only contain alpha-numeric and underscore characters","string.pattern.base":"{{#label}} with value {:[.]} fails to match the required pattern: {{#regex}}","string.pattern.name":"{{#label}} with value {:[.]} fails to match the {{#name}} pattern","string.pattern.invert.base":"{{#label}} with value {:[.]} matches the inverted pattern: {{#regex}}","string.pattern.invert.name":"{{#label}} with value {:[.]} matches the inverted {{#name}} pattern","string.trim":"{{#label}} must not have leading or trailing whitespace","string.uri":"{{#label}} must be a valid uri","string.uriCustomScheme":"{{#label}} must be a valid uri with a scheme matching the {{#scheme}} pattern","string.uriRelativeOnly":"{{#label}} must be a valid relative uri","string.uppercase":"{{#label}} must only contain uppercase characters"}}),f.addressOptions=function(t){if(!t)return f.tlds||t;if(s(void 0===t.minDomainSegments||Number.isSafeInteger(t.minDomainSegments)&&t.minDomainSegments>0,"minDomainSegments must be a positive integer"),s(void 0===t.maxDomainSegments||Number.isSafeInteger(t.maxDomainSegments)&&t.maxDomainSegments>0,"maxDomainSegments must be a positive integer"),!1===t.tlds)return t;if(!0===t.tlds||void 0===t.tlds)return s(f.tlds,"Built-in TLD list disabled"),_.assign({},t,f.tlds);s("object"==typeof t.tlds,"tlds must be true, false, or an object");const i=t.tlds.deny;if(i)return Array.isArray(i)&&(t=_.assign({},t,{tlds:{deny:new Set(i)}})),s(t.tlds.deny instanceof Set,"tlds.deny must be an array, Set, or boolean"),s(!t.tlds.allow,"Cannot specify both tlds.allow and tlds.deny lists"),f.validateTlds(t.tlds.deny,"tlds.deny"),t;const e=t.tlds.allow;return e?!0===e?(s(f.tlds,"Built-in TLD list disabled"),_.assign({},t,f.tlds)):(Array.isArray(e)&&(t=_.assign({},t,{tlds:{allow:new Set(e)}})),s(t.tlds.allow instanceof Set,"tlds.allow must be an array, Set, or boolean"),f.validateTlds(t.tlds.allow,"tlds.allow"),t):t},f.validateTlds=function(t,i){for(const e of t)s(n.isValid(e,{minDomainSegments:1,maxDomainSegments:1}),"".concat(i," must contain valid top level domain names"))},f.isoDate=function(t){if(!l.isIsoDate(t))return null;/.*T.*[+-]\d\d$/.test(t)&&(t+="00");const i=new Date(t);return j(i.getTime())?null:i.toISOString()},f.length=function(t,i,e,n,r){return s(!r||!1,"Invalid encoding:",r),t.$_addRule({name:i,method:"length",args:{limit:e,encoding:r},operator:n})}},8826:(t,i,e)=>{const s=e(375),n=e(8068),r={};r.Map=class extends Map{slice(){return new r.Map(this)}},t.exports=n.extend({type:"symbol",terms:{map:{init:new r.Map}},coerce:{method(t,i){let{schema:e,error:s}=i;const n=e.$_terms.map.get(t);return n&&(t=n),e.xv.only&&"symbol"!=typeof t?{value:t,errors:s("symbol.map",{map:e.$_terms.map})}:{value:t}}},validate(t,i){let{error:e}=i;if("symbol"!=typeof t)return{value:t,errors:e("symbol.base")}},rules:{map:{method(t){t&&!t[f]&&"object"==typeof t&&(t=_.entries(t)),s(t&&t[f],"Iterable must be an iterable or object");const i=this.clone(),e=[];for(const n of t){s(n&&n[f],"Entry must be an iterable");const[t,r]=n;s("object"!=typeof t&&"function"!=typeof t&&"symbol"!=typeof t,"Key must not be of type object, function, or Symbol"),s("symbol"==typeof r,"Value must be a Symbol"),i.$_terms.map.set(t,r),e.push(r)}return i.valid(...e)}}},manifest:{build:(t,i)=>(i.map&&(t=t.map(i.map)),t)},messages:{"symbol.base":"{{#label}} must be a symbol","symbol.map":"{{#label}} must be one of {{#map}}"}})},8863:(t,i,e)=>{const s=e(375),n=e(8571),r=e(738),o=e(9621),h=e(8160),a=e(6354),u=e(493),c={result:Bo("result")};i.entry=function(t,i,e){let n=h.defaults;e&&(s(void 0===e.warnings,"Cannot override warnings preference in synchronous validation"),s(void 0===e.artifacts,"Cannot override artifacts preference in synchronous validation"),n=h.preferences(h.defaults,e));const r=c.entry(t,i,n);s(!r.mainstay.externals.length,"Schema with external rules must use validateAsync()");const o={value:r.value};return r.error&&(o.error=r.error),r.mainstay.warnings.length&&(o.warning=a.details(r.mainstay.warnings)),r.mainstay.debug&&(o.debug=r.mainstay.debug),r.mainstay.artifacts&&(o.artifacts=r.mainstay.artifacts),o},i.entryAsync=async function(t,i,e){let s=h.defaults;e&&(s=h.preferences(h.defaults,e));const n=c.entry(t,i,s),r=n.mainstay;if(n.error)throw r.debug&&(n.error.debug=r.debug),n.error;if(r.externals.length){let i=n.value;const u=[];for(const n of r.externals){const l=n.state.path,d="link"===n.schema.type?r.links.get(n.schema):null;let f,g,_=i;const v=l.length?[i]:[],w=l.length?o(t,l):t;if(l.length){f=l[l.length-1];let t=i;for(const i of l.slice(0,-1))t=t[i],v.unshift(t);g=v[0],_=g[f]}try{const t=(t,i)=>(d||n.schema).$_createError(t,_,i,n.state,s),o=await n.method(_,{schema:n.schema,linked:d,state:n.state,prefs:e,original:w,error:t,errorsArray:c.errorsArray,warn:(t,i)=>r.warnings.push((d||n.schema).$_createError(t,_,i,n.state,s)),message:(t,i)=>(d||n.schema).$_createError("external",_,i,n.state,s,{messages:t})});if(void 0===o||o===_)continue;if(o instanceof a.Report){if(r.tracer.log(n.schema,n.state,"rule","external","error"),u.push(o),s.abortEarly)break;continue}if(Array.isArray(o)&&o[h.symbols.errors]){if(r.tracer.log(n.schema,n.state,"rule","external","error"),u.push(...o),s.abortEarly)break;continue}g?(r.tracer.value(n.state,"rule",_,o,"external"),g[f]=o):(r.tracer.value(n.state,"rule",i,o,"external"),i=o)}catch(t){throw s.errors.label&&(t.message+=" (".concat(n.label,")")),t}}if(n.value=i,u.length)throw n.error=a.process(u,t,s),r.debug&&(n.error.debug=r.debug),n.error}if(!s.warnings&&!s.debug&&!s.artifacts)return n.value;const u={value:n.value};return r.warnings.length&&(u.warning=a.details(r.warnings)),r.debug&&(u.debug=r.debug),r.artifacts&&(u.artifacts=r.artifacts),u},c.Mainstay=class{snapshot(){this.Nw.push({externals:this.externals.slice(),warnings:this.warnings.slice()})}restore(){const t=this.Nw.pop();this.externals=t.externals,this.warnings=t.warnings}commit(){this.Nw.pop()}constructor(t,i,e){this.externals=[],this.warnings=[],this.tracer=t,this.debug=i,this.links=e,this.shadow=null,this.artifacts=null,this.Nw=[]}},c.entry=function(t,e,s){const{tracer:n,cleanup:r}=c.tracer(e,s),o=s.debug?[]:null,h=e.Tv.aw?new Map:null,l=new c.Mainstay(n,o,h),d=e.Tv.aw?[{schema:e}]:null,f=new u([],[],{mainstay:l,schemas:d}),g=i.validate(t,e,f,s);r&&e.$_root.untrace();const _=a.process(g.errors,t,s);return{value:g.value,error:_,mainstay:l}},c.tracer=function(t,i){return t.$_root.Qv?{tracer:t.$_root.Qv.Iw(t)}:i.debug?(s(t.$_root.trace,"Debug mode not supported"),{tracer:t.$_root.trace().Iw(t),cleanup:!0}):{tracer:c.ignore}},i.validate=function(t,i,e,s,n){if(void 0===n&&(n={}),i.$_terms.whens&&(i=i.Zv(t,e,s).schema),i.Sv&&(s=c.prefs(i,s)),i.Iv&&s.cache){const s=i.Iv.get(t);if(e.mainstay.tracer.debug(e,"validate","cached",!!s),s)return s}const r=(n,r,o)=>i.$_createError(n,t,r,o||e,s),o={original:t,prefs:s,schema:i,state:e,error:r,errorsArray:c.errorsArray,warn:(t,i,s)=>e.mainstay.warnings.push(r(t,i,s)),message:(n,r)=>i.$_createError("custom",t,r,e,s,{messages:n})};e.mainstay.tracer.entry(i,e);const a=i.Pv;if(a.prepare&&void 0!==t&&s.convert){const i=a.prepare(t,o);if(i){if(e.mainstay.tracer.value(e,"prepare",t,i.value),i.errors)return c.finalize(i.value,[].concat(i.errors),o);t=i.value}}if(a.coerce&&void 0!==t&&s.convert&&(!a.coerce.from||a.coerce.from.includes(typeof t))){const i=a.coerce.method(t,o);if(i){if(e.mainstay.tracer.value(e,"coerced",t,i.value),i.errors)return c.finalize(i.value,[].concat(i.errors),o);t=i.value}}const u=i.xv.empty;u&&u.$_match(c.trim(t,i),e.nest(u),h.defaults)&&(e.mainstay.tracer.value(e,"empty",t,void 0),t=void 0);const l=n.presence||i.xv.presence||(i.xv.mw?null:s.presence);if(void 0===t){if("forbidden"===l)return c.finalize(t,null,o);if("required"===l)return c.finalize(t,[i.$_createError("any.required",t,null,e,s)],o);if("optional"===l){if(i.xv.default!==h.symbols.deepDefault)return c.finalize(t,null,o);e.mainstay.tracer.value(e,"default",t,{}),t={}}}else if("forbidden"===l)return c.finalize(t,[i.$_createError("any.unknown",t,null,e,s)],o);const d=[];if(i.Dv){const n=i.Dv.get(t,e,s,i.xv.insensitive);if(n)return s.convert&&(e.mainstay.tracer.value(e,"valids",t,n.value),t=n.value),e.mainstay.tracer.filter(i,e,"valid",n),c.finalize(t,null,o);if(i.xv.only){const n=i.$_createError("any.only",t,{valids:i.Dv.values({display:!0})},e,s);if(s.abortEarly)return c.finalize(t,[n],o);d.push(n)}}if(i.Ev){const n=i.Ev.get(t,e,s,i.xv.insensitive);if(n){e.mainstay.tracer.filter(i,e,"invalid",n);const r=i.$_createError("any.invalid",t,{invalids:i.Ev.values({display:!0})},e,s);if(s.abortEarly)return c.finalize(t,[r],o);d.push(r)}}if(a.validate){const i=a.validate(t,o);if(i&&(e.mainstay.tracer.value(e,"base",t,i.value),t=i.value,i.errors)){if(!Array.isArray(i.errors))return d.push(i.errors),c.finalize(t,d,o);if(i.errors.length)return d.push(...i.errors),c.finalize(t,d,o)}}return i.Lv.length?c.rules(t,d,o):c.finalize(t,d,o)},c.rules=function(t,i,e){const{schema:s,state:n,prefs:r}=e;for(const o of s.Lv){const a=s.Pv.rules[o.method];if(a.convert&&r.convert){n.mainstay.tracer.log(s,n,"rule",o.name,"full");continue}let u,l=o.args;if(o.Kg.length){l=_.assign({},l);for(const i of o.Kg){const e=a.argsByName.get(i),o=l[i].resolve(t,n,r),c=e.normalize?e.normalize(o):o,d=h.validateArg(c,null,e);if(d){u=s.$_createError("any.ref",o,{arg:i,ref:l[i],reason:d},n,r);break}l[i]=c}}u=u||a.validate(t,e,l,o);const d=c.rule(u,o);if(d.errors){if(n.mainstay.tracer.log(s,n,"rule",o.name,"error"),o.warn){n.mainstay.warnings.push(...d.errors);continue}if(r.abortEarly)return c.finalize(t,d.errors,e);i.push(...d.errors)}else n.mainstay.tracer.log(s,n,"rule",o.name,"pass"),n.mainstay.tracer.value(n,"rule",t,d.value,o.name),t=d.value}return c.finalize(t,i,e)},c.rule=function(t,i){return t instanceof a.Report?(c.error(t,i),{errors:[t],value:null}):Array.isArray(t)&&t[h.symbols.errors]?(t.forEach((t=>c.error(t,i))),{errors:t,value:null}):{errors:null,value:t}},c.error=function(t,i){return i.message&&t.$v(i.message),t},c.finalize=function(t,i,e){i=i||[];const{schema:n,state:r,prefs:o}=e;if(i.length){const s=c.default("failover",void 0,i,e);void 0!==s&&(r.mainstay.tracer.value(r,"failover",t,s),t=s,i=[])}if(i.length&&n.xv.error)if("function"==typeof n.xv.error){i=n.xv.error(i),Array.isArray(i)||(i=[i]);for(const t of i)s(t instanceof b||t instanceof a.Report,"error() must return an Error object")}else i=[n.xv.error];if(void 0===t){const s=c.default("default",t,i,e);r.mainstay.tracer.value(r,"default",t,s),t=s}if(n.xv.cast&&void 0!==t){const i=n.Pv.cast[n.xv.cast];if(i.from(t)){const s=i.to(t,e);r.mainstay.tracer.value(r,"cast",t,s,n.xv.cast),t=s}}if(n.$_terms.externals&&o.externals&&!1!==o.Vv)for(const{method:t}of n.$_terms.externals)r.mainstay.externals.push({method:t,schema:n,state:r,label:a.label(n.xv,r,o)});const h={value:t,errors:i.length?i:null};return n.xv.result&&(h.value="strip"===n.xv.result?void 0:e.original,r.mainstay.tracer.value(r,n.xv.result,t,h.value),r.shadow(t,n.xv.result)),n.Iv&&!1!==o.cache&&!n.Nv.length&&n.Iv.set(e.original,h),void 0===t||h.errors||void 0===n.xv.artifact||(r.mainstay.artifacts=r.mainstay.artifacts||new Map,r.mainstay.artifacts.has(n.xv.artifact)||r.mainstay.artifacts.set(n.xv.artifact,[]),r.mainstay.artifacts.get(n.xv.artifact).push(r.path)),h},c.prefs=function(t,i){const e=i===h.defaults;return e&&t.Sv[h.symbols.prefs]?t.Sv[h.symbols.prefs]:(i=h.preferences(i,t.Sv),e&&(t.Sv[h.symbols.prefs]=i),i)},c.default=function(t,i,e,s){const{schema:r,state:o,prefs:a}=s,u=r.xv[t];if(a.noDefaults||void 0===u)return i;if(o.mainstay.tracer.log(r,o,"rule",t,"full"),!u)return u;if("function"==typeof u){const i=u.length?[n(o.ancestors[0]),s]:[];try{return u(...i)}catch(i){return void e.push(r.$_createError("any.".concat(t),null,{error:i},o,a))}}return"object"!=typeof u?u:u[h.symbols.literal]?u.literal:h.isResolvable(u)?u.resolve(i,o,a):n(u)},c.trim=function(t,i){if("string"!=typeof t)return t;const e=i.$_getRule("trim");return e&&e.args.enabled?t.trim():t},c.ignore={active:!1,debug:r,entry:r,filter:r,log:r,resolve:r,value:r},c.errorsArray=function(){const t=[];return t[h.symbols.errors]=!0,t}},2036:(t,i,e)=>{const s=e(375),n=e(9474),r=e(8160),o={};t.exports=o.Values=class{get length(){return this.Ov.size+this.Nv.size}add(t,i){r.isResolvable(t)?this.Nv.has(t)||(this.Nv.add(t),i&&i.register(t)):this.has(t,null,null,!1)||(this.Ov.add(t),"string"==typeof t&&this.Dw.set(t.toLowerCase(),t))}static merge(t,i,e){if(t=t||new o.Values,i){if(i.Ew)return i.clone();for(const e of[...i.Ov,...i.Nv])t.add(e)}if(e)for(const i of[...e.Ov,...e.Nv])t.remove(i);return t.length?t:null}remove(t){r.isResolvable(t)?this.Nv.delete(t):(this.Ov.delete(t),"string"==typeof t&&this.Dw.delete(t.toLowerCase()))}has(t,i,e,s){return!!this.get(t,i,e,s)}get(t,i,e,s){if(!this.length)return!1;if(this.Ov.has(t))return{value:t};if("string"==typeof t&&t&&s){const i=this.Dw.get(t.toLowerCase());if(i)return{value:i}}if(!this.Nv.size&&"object"!=typeof t)return!1;if("object"==typeof t)for(const i of this.Ov)if(n(i,t))return{value:i};if(i)for(const r of this.Nv){const o=r.resolve(t,i,e,null,{in:!0});if(void 0===o)continue;const h=r.in&&"object"==typeof o?Array.isArray(o)?o:_.keys(o):[o];for(const i of h)if(typeof i==typeof t)if(s&&t&&"string"==typeof t){if(i.toLowerCase()===t.toLowerCase())return{value:i,ref:r}}else if(n(i,t))return{value:i,ref:r}}return!1}override(){this.Ew=!0}values(t){if(t&&t.display){const t=[];for(const i of[...this.Ov,...this.Nv])void 0!==i&&t.push(i);return t}return Array.from([...this.Ov,...this.Nv])}clone(){const t=new o.Values(this.Ov,this.Nv);return t.Ew=this.Ew,t}concat(t){s(!t.Ew,"Cannot concat override set of values");const i=new o.Values([...this.Ov,...t.Ov],[...this.Nv,...t.Nv]);return i.Ew=this.Ew,i}describe(){const t=[];this.Ew&&t.push({override:!0});for(const i of this.Ov.values())t.push(i&&"object"==typeof i?{value:i}:i);for(const i of this.Nv.values())t.push(i.describe());return t}constructor(t,i){this.Ov=new Set(t),this.Nv=new Set(i),this.Dw=o.lowercases(t),this.Ew=!1}},o.Values.prototype[r.symbols.values]=!0,o.Values.prototype.slice=o.Values.prototype.clone,o.lowercases=function(t){const i=new Map;if(t)for(const e of t)"string"==typeof e&&i.set(e.toLowerCase(),e);return i}},978:(t,i,e)=>{const s=e(375),n=e(8571),r=e(1687),o=e(9621),h={};t.exports=function(t,i,e){if(void 0===e&&(e={}),s(t&&"object"==typeof t,"Invalid defaults value: must be an object"),s(!i||!0===i||"object"==typeof i,"Invalid source value: must be true, falsy or an object"),s("object"==typeof e,"Invalid options: must be an object"),!i)return null;if(e.shallow)return h.applyToDefaultsWithShallow(t,i,e);const o=n(t);if(!0===i)return o;const a=void 0!==e.nullOverride&&e.nullOverride;return r(o,i,{nullOverride:a,mergeArrays:!1})},h.applyToDefaultsWithShallow=function(t,i,e){const a=e.shallow;s(Array.isArray(a),"Invalid keys");const u=new Map,c=!0===i?null:new Set;for(let e of a){e=Array.isArray(e)?e:e.split(".");const s=o(t,e);s&&"object"==typeof s?u.set(s,c&&o(i,e)||s):c&&c.add(e)}const l=n(t,{},u);if(!c)return l;for(const t of c)h.reachCopy(l,i,t);const d=void 0!==e.nullOverride&&e.nullOverride;return r(l,i,{nullOverride:d,mergeArrays:!1})},h.reachCopy=function(t,i,e){for(const t of e){if(!(t in i))return;const e=i[t];if("object"!=typeof e||null===e)return;i=e}const s=i;let n=t;for(let t=0;t<e.length-1;++t){const i=e[t];"object"!=typeof n[i]&&(n[i]={}),n=n[i]}n[e[e.length-1]]=s}},375:(t,i,e)=>{const s=e(7916);t.exports=function(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),n=1;n<i;n++)e[n-1]=arguments[n];if(!t)throw 1===e.length&&e[0]instanceof b?e[0]:new s(e)}},8571:(t,i,e)=>{const s=e(9621),n=e(4277),r=e(7043),o={needsProtoHack:new Set([n.set,n.map,n.weakSet,n.weakMap])};t.exports=o.clone=function(t,i,e){if(void 0===i&&(i={}),void 0===e&&(e=null),"object"!=typeof t||null===t)return t;let s=o.clone,h=e;if(i.shallow){if(!0!==i.shallow)return o.cloneWithShallow(t,i);s=t=>t}else if(h){const i=h.get(t);if(i)return i}else h=new Map;const a=n.getInternalProto(t);if(a===n.buffer)return!1;if(a===n.date)return new Date(t.getTime());if(a===n.regex)return new RegExp(t);const u=o.base(t,a,i);if(u===t)return t;if(h&&h.set(t,u),a===n.set)for(const e of t)u.add(s(e,i,h));else if(a===n.map)for(const[e,n]of t)u.set(e,s(n,i,h));const c=r.keys(t,i);for(const e of c){if("__proto__"===e)continue;if(a===n.array&&"length"===e){u.length=t.length;continue}const r=_.getOwnPropertyDescriptor(t,e);r?r.get||r.set?_.defineProperty(u,e,r):r.enumerable?u[e]=s(t[e],i,h):_.defineProperty(u,e,{enumerable:!1,writable:!0,configurable:!0,value:s(t[e],i,h)}):_.defineProperty(u,e,{enumerable:!0,writable:!0,configurable:!0,value:s(t[e],i,h)})}return u},o.cloneWithShallow=function(t,i){const e=i.shallow;(i=_.assign({},i)).shallow=!1;const n=new Map;for(const i of e){const e=s(t,i);"object"!=typeof e&&"function"!=typeof e||n.set(e,e)}return o.clone(t,i,n)},o.base=function(t,i,e){if(!1===e.prototype)return o.needsProtoHack.has(i)?new i.constructor:i===n.array?[]:{};const s=_.getPrototypeOf(t);if(s&&s.isImmutable)return t;if(i===n.array){const t=[];return s!==i&&_.setPrototypeOf(t,s),t}if(o.needsProtoHack.has(i)){const t=new s.constructor;return s!==i&&_.setPrototypeOf(t,s),t}return _.create(s)}},9474:(t,i,e)=>{const s=e(4277),n={mismatched:null};t.exports=function(t,i,e){return e=_.assign({prototype:!0},e),!!n.isDeepEqual(t,i,e,[])},n.isDeepEqual=function(t,i,e,r){if(t===i)return 0!==t||1/t==1/i;const o=typeof t;if(o!==typeof i||null===t||null===i)return!1;if("function"===o){if(!e.deepFunction||t.toString()!==i.toString())return!1}else if("object"!==o)return t!=t&&i!=i;const h=n.getSharedType(t,i,!!e.prototype);switch(h){case s.buffer:return!1;case s.promise:return t===i;case s.regex:return t.toString()===i.toString();case n.mismatched:return!1}for(let e=r.length-1;e>=0;--e)if(r[e].isSame(t,i))return!0;r.push(new n.SeenEntry(t,i));try{return!!n.isDeepEqualObj(h,t,i,e,r)}finally{r.pop()}},n.getSharedType=function(t,i,e){if(e)return _.getPrototypeOf(t)!==_.getPrototypeOf(i)?n.mismatched:s.getInternalProto(t);const r=s.getInternalProto(t);return r!==s.getInternalProto(i)?n.mismatched:r},n.valueOf=function(t){const i=t.valueOf;if(void 0===i)return t;try{return i.call(t)}catch(t){return t}},n.hasOwnEnumerableProperty=function(t,i){return _.prototype.propertyIsEnumerable.call(t,i)},n.isSetSimpleEqual=function(t,i){for(const e of Set.prototype.values.call(t))if(!Set.prototype.has.call(i,e))return!1;return!0},n.isDeepEqualObj=function(t,i,e,r,o){const{isDeepEqual:h,valueOf:a,hasOwnEnumerableProperty:u}=n,{keys:c,getOwnPropertySymbols:l}=_;if(t===s.array){if(!r.part){if(i.length!==e.length)return!1;for(let t=0;t<i.length;++t)if(!h(i[t],e[t],r,o))return!1;return!0}for(const t of i)for(const i of e)if(h(t,i,r,o))return!0}else if(t===s.set){if(i.size!==e.size)return!1;if(!n.isSetSimpleEqual(i,e)){const t=new Set(Set.prototype.values.call(e));for(const e of Set.prototype.values.call(i)){if(t.delete(e))continue;let i=!1;for(const s of t)if(h(e,s,r,o)){t.delete(s),i=!0;break}if(!i)return!1}}}else if(t===s.map){if(i.size!==e.size)return!1;for(const[t,s]of Map.prototype.entries.call(i))if(void 0===s&&!Map.prototype.has.call(e,t)||!h(s,Map.prototype.get.call(e,t),r,o))return!1}else if(t===s.error&&(i.name!==e.name||i.message!==e.message))return!1;const d=a(i),f=a(e);if((i!==d||e!==f)&&!h(d,f,r,o))return!1;const g=c(i);if(!r.part&&g.length!==c(e).length&&!r.skip)return!1;let v=0;for(const t of g)if(r.skip&&r.skip.includes(t))void 0===e[t]&&++v;else if(!u(e,t)||!h(i[t],e[t],r,o))return!1;if(!r.part&&g.length-v!==c(e).length)return!1;if(!1!==r.symbols){const t=l(i),s=new Set(l(e));for(const n of t){if(!r.skip||!r.skip.includes(n))if(u(i,n)){if(!u(e,n)||!h(i[n],e[n],r,o))return!1}else if(u(e,n))return!1;s.delete(n)}for(const t of s)if(u(e,t))return!1}return!0},n.SeenEntry=class{isSame(t,i){return this.obj===t&&this.ref===i}constructor(t,i){this.obj=t,this.ref=i}}},7916:(t,i,e)=>{const s=e(8761);t.exports=class extends b{constructor(t){super(t.filter((t=>""!==t)).map((t=>"string"==typeof t?t:t instanceof b?t.message:s(t))).join(" ")||"Unknown error"),"function"==typeof b.captureStackTrace&&b.captureStackTrace(this,i.assert)}}},5277:t=>{const i={};t.exports=function(t){if(!t)return"";let e="";for(let s=0;s<t.length;++s){const n=t.charCodeAt(s);i.isSafe(n)?e+=t[s]:e+=i.escapeHtmlChar(n)}return e},i.escapeHtmlChar=function(t){return i.namedHtml.get(t)||(t>=256?"&#"+t+";":"&#x".concat(t.toString(16).padStart(2,"0"),";"))},i.isSafe=function(t){return i.safeCharCodes.has(t)},i.namedHtml=new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[34,"&quot;"],[160,"&nbsp;"],[162,"&cent;"],[163,"&pound;"],[164,"&curren;"],[169,"&copy;"],[174,"&reg;"]]),i.safeCharCodes=function(){const t=new Set;for(let i=32;i<123;++i)(i>=97||i>=65&&i<=90||i>=48&&i<=57||32===i||46===i||44===i||45===i||58===i||95===i)&&t.add(i);return t}()},6064:t=>{t.exports=function(t){return t.replace(/[\^\$\.\*\+\-\?\=\!\:\|\\\/\(\)\[\]\{\}\,]/g,"\\$&")}},738:t=>{t.exports=function(){}},1687:(t,i,e)=>{const s=e(375),n=e(8571),r=e(7043),o={};t.exports=o.merge=function(t,i,e){if(s(t&&"object"==typeof t,"Invalid target value: must be an object"),s(null==i||"object"==typeof i,"Invalid source value: must be null, undefined, or an object"),!i)return t;if(e=_.assign({nullOverride:!0,mergeArrays:!0},e),Array.isArray(i)){s(Array.isArray(t),"Cannot merge array onto an object"),e.mergeArrays||(t.length=0);for(let s=0;s<i.length;++s)t.push(n(i[s],{symbols:e.symbols}));return t}const h=r.keys(i,e);for(let s=0;s<h.length;++s){const r=h[s];if("__proto__"===r||!_.prototype.propertyIsEnumerable.call(i,r))continue;const a=i[r];if(a&&"object"==typeof a){if(t[r]===a)continue;!t[r]||"object"!=typeof t[r]||Array.isArray(t[r])!==Array.isArray(a)||a instanceof Date||a instanceof RegExp?t[r]=n(a,{symbols:e.symbols}):o.merge(t[r],a,e)}else(null!=a||e.nullOverride)&&(t[r]=a)}return t}},9621:(t,i,e)=>{const s=e(375),n={};t.exports=function(t,i,e){if(!1===i||null==i)return t;"string"==typeof(e=e||{})&&(e={separator:e});const r=Array.isArray(i);s(!r||!e.separator,"Separator option is not valid for array-based chain");const o=r?i:i.split(e.separator||".");let h=t;for(let t=0;t<o.length;++t){let r=o[t];const a=e.iterables&&n.iterables(h);if(Array.isArray(h)||"set"===a){const t=Number(r);Number.isInteger(t)&&(r=t<0?h.length+t:t)}if(!h||"function"==typeof h&&!1===e.functions||!a&&void 0===h[r]){s(!e.strict||t+1===o.length,"Missing segment",r,"in reach path ",i),s("object"==typeof h||!0===e.functions||"function"!=typeof h,"Invalid segment",r,"in reach path ",i),h=e.default;break}h=a?"set"===a?[...h][r]:h.get(r):h[r]}return h},n.iterables=function(t){return t instanceof Set?"set":t instanceof Map?"map":void 0}},8761:t=>{t.exports=function(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];try{return JSON.stringify(...i)}catch(t){return"[Cannot display object: "+t.message+"]"}}},4277:(t,i)=>{const e={};i=t.exports={array:Array.prototype,buffer:!1,date:Date.prototype,error:b.prototype,generic:_.prototype,map:Map.prototype,promise:Promise.prototype,regex:RegExp.prototype,set:Set.prototype,weakMap:WeakMap.prototype,weakSet:WeakSet.prototype},e.typeMap=new Map([["[object Error]",i.error],["[object Map]",i.map],["[object Promise]",i.promise],["[object Set]",i.set],["[object WeakMap]",i.weakMap],["[object WeakSet]",i.weakSet]]),i.getInternalProto=function(t){if(Array.isArray(t))return i.array;if(t instanceof Date)return i.date;if(t instanceof RegExp)return i.regex;if(t instanceof b)return i.error;const s=_.prototype.toString.call(t);return e.typeMap.get(s)||i.generic}},7043:(t,i)=>{i.keys=function(t,i){return void 0===i&&(i={}),!1!==i.symbols?Reflect.ownKeys(t):_.getOwnPropertyNames(t)}},3652:(t,i,e)=>{const s=e(375),n={};i.Sorter=class{add(t,i){const e=[].concat((i=i||{}).before||[]),n=[].concat(i.after||[]),r=i.group||"?",o=i.sort||0;s(!e.includes(r),"Item cannot come before itself: ".concat(r)),s(!e.includes("?"),"Item cannot come before unassociated items"),s(!n.includes(r),"Item cannot come after itself: ".concat(r)),s(!n.includes("?"),"Item cannot come after unassociated items"),Array.isArray(t)||(t=[t]);for(const i of t){const t={seq:this.Qu.length,sort:o,before:e,after:n,group:r,node:i};this.Qu.push(t)}if(!i.manual){const t=this.xw();s(t,"item","?"!==r?"added into group ".concat(r):"","created a dependencies error")}return this.nodes}merge(t){Array.isArray(t)||(t=[t]);for(const i of t)if(i)for(const t of i.Qu)this.Qu.push(_.assign({},t));this.Qu.sort(n.mergeSort);for(let t=0;t<this.Qu.length;++t)this.Qu[t].seq=t;const i=this.xw();return s(i,"merge created a dependencies error"),this.nodes}sort(){const t=this.xw();return s(t,"sort created a dependencies error"),this.nodes}xw(){const t={},i=_.create(null),e=_.create(null);for(const s of this.Qu){const n=s.seq,r=s.group;e[r]=e[r]||[],e[r].push(n),t[n]=s.before;for(const t of s.after)i[t]=i[t]||[],i[t].push(n)}for(const i in t){const s=[];for(const n in t[i]){const r=t[i][n];e[r]=e[r]||[],s.push(...e[r])}t[i]=s}for(const s in i)if(e[s])for(const n of e[s])t[n].push(...i[s]);const s={};for(const i in t){const e=t[i];for(const t of e)s[t]=s[t]||[],s[t].push(i)}const n={},r=[];for(let t=0;t<this.Qu.length;++t){let i=t;if(s[t]){i=null;for(let t=0;t<this.Qu.length;++t){if(!0===n[t])continue;s[t]||(s[t]=[]);const e=s[t].length;let r=0;for(let i=0;i<e;++i)n[s[t][i]]&&++r;if(r===e){i=t;break}}}null!==i&&(n[i]=!0,r.push(i))}if(r.length!==this.Qu.length)return!1;const o={};for(const t of this.Qu)o[t.seq]=t;this.Qu=[],this.nodes=[];for(const t of r){const i=o[t];this.nodes.push(i.node),this.Qu.push(i)}return!0}constructor(){this.Qu=[],this.nodes=[]}},n.mergeSort=(t,i)=>t.sort===i.sort?0:t.sort<i.sort?-1:1},5380:(t,i,e)=>{const s=e(443),n=e(2178),r={minDomainSegments:2,nonAsciiRx:/[^\x00-\x7f]/,domainControlRx:/[\x00-\x20@\:\/\\#!\$&\'\(\)\*\+,;=\?]/,tldSegmentRx:/^[a-zA-Z](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?$/,domainSegmentRx:/^[a-zA-Z0-9](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?$/,URL:s.URL||URL};i.analyze=function(t,i){if(void 0===i&&(i={}),!t)return n.code("DOMAIN_NON_EMPTY_STRING");if("string"!=typeof t)throw new b("Invalid input: domain must be a string");if(t.length>256)return n.code("DOMAIN_TOO_LONG");if(r.nonAsciiRx.test(t)){if(!1===i.allowUnicode)return n.code("DOMAIN_INVALID_UNICODE_CHARS");t=t.normalize("NFC")}if(r.domainControlRx.test(t))return n.code("DOMAIN_INVALID_CHARS");t=r.punycode(t),i.allowFullyQualified&&"."===t[t.length-1]&&(t=t.slice(0,-1));const e=i.minDomainSegments||r.minDomainSegments,s=t.split(".");if(s.length<e)return n.code("DOMAIN_SEGMENTS_COUNT");if(i.maxDomainSegments&&s.length>i.maxDomainSegments)return n.code("DOMAIN_SEGMENTS_COUNT_MAX");const o=i.tlds;if(o){const t=s[s.length-1].toLowerCase();if(o.deny&&o.deny.has(t)||o.allow&&!o.allow.has(t))return n.code("DOMAIN_FORBIDDEN_TLDS")}for(let t=0;t<s.length;++t){const i=s[t];if(!i.length)return n.code("DOMAIN_EMPTY_SEGMENT");if(i.length>63)return n.code("DOMAIN_LONG_SEGMENT");if(t<s.length-1){if(!r.domainSegmentRx.test(i))return n.code("DOMAIN_INVALID_CHARS")}else if(!r.tldSegmentRx.test(i))return n.code("DOMAIN_INVALID_TLDS_CHARS")}return null},i.isValid=function(t,e){return!i.analyze(t,e)},r.punycode=function(t){t.includes("%")&&(t=t.replace(/%/g,"%25"));try{return new r.URL("http://".concat(t)).host}catch(i){return t}}},1745:(t,i,e)=>{const s=e(9848),n=e(5380),r=e(2178),o={nonAsciiRx:/[^\x00-\x7f]/,encoder:new(s.TextEncoder||TextEncoder)};i.analyze=function(t,i){return o.email(t,i)},i.isValid=function(t,i){return!o.email(t,i)},o.email=function(t,i){if(void 0===i&&(i={}),"string"!=typeof t)throw new b("Invalid input: email must be a string");if(!t)return r.code("EMPTY_STRING");const e=!o.nonAsciiRx.test(t);if(!e){if(!1===i.allowUnicode)return r.code("FORBIDDEN_UNICODE");t=t.normalize("NFC")}const s=t.split("@");if(2!==s.length)return s.length>2?r.code("MULTIPLE_AT_CHAR"):r.code("MISSING_AT_CHAR");const[h,a]=s;if(!h)return r.code("EMPTY_LOCAL");if(!i.ignoreLength){if(t.length>254)return r.code("ADDRESS_TOO_LONG");if(o.encoder.encode(h).length>64)return r.code("LOCAL_TOO_LONG")}return o.local(h,e)||n.analyze(a,i)},o.local=function(t,i){const e=t.split(".");for(const t of e){if(!t.length)return r.code("EMPTY_LOCAL_SEGMENT");if(i){if(!o.atextRx.test(t))return r.code("INVALID_LOCAL_CHARS")}else for(const i of t){if(o.atextRx.test(i))continue;const t=o.binary(i);if(!o.atomRx.test(t))return r.code("INVALID_LOCAL_CHARS")}}},o.binary=function(t){return Array.from(o.encoder.encode(t)).map((t=>String.fromCharCode(t))).join("")},o.atextRx=/^[\w!#\$%&'\*\+\-/=\?\^`\{\|\}~]+$/,o.atomRx=new RegExp(["(?:[\\xc2-\\xdf][\\x80-\\xbf])","(?:\\xe0[\\xa0-\\xbf][\\x80-\\xbf])|(?:[\\xe1-\\xec][\\x80-\\xbf]{2})|(?:\\xed[\\x80-\\x9f][\\x80-\\xbf])|(?:[\\xee-\\xef][\\x80-\\xbf]{2})","(?:\\xf0[\\x90-\\xbf][\\x80-\\xbf]{2})|(?:[\\xf1-\\xf3][\\x80-\\xbf]{3})|(?:\\xf4[\\x80-\\x8f][\\x80-\\xbf]{2})"].join("|"))},2178:(t,i)=>{i.codes={EMPTY_STRING:"Address must be a non-empty string",FORBIDDEN_UNICODE:"Address contains forbidden Unicode characters",MULTIPLE_AT_CHAR:"Address cannot contain more than one @ character",MISSING_AT_CHAR:"Address must contain one @ character",EMPTY_LOCAL:"Address local part cannot be empty",ADDRESS_TOO_LONG:"Address too long",LOCAL_TOO_LONG:"Address local part too long",EMPTY_LOCAL_SEGMENT:"Address local part contains empty dot-separated segment",INVALID_LOCAL_CHARS:"Address local part contains invalid character",DOMAIN_NON_EMPTY_STRING:"Domain must be a non-empty string",DOMAIN_TOO_LONG:"Domain too long",DOMAIN_INVALID_UNICODE_CHARS:"Domain contains forbidden Unicode characters",DOMAIN_INVALID_CHARS:"Domain contains invalid character",DOMAIN_INVALID_TLDS_CHARS:"Domain contains invalid tld character",DOMAIN_SEGMENTS_COUNT:"Domain lacks the minimum required number of segments",DOMAIN_SEGMENTS_COUNT_MAX:"Domain contains too many segments",DOMAIN_FORBIDDEN_TLDS:"Domain uses forbidden TLD",DOMAIN_EMPTY_SEGMENT:"Domain contains empty dot-separated segment",DOMAIN_LONG_SEGMENT:"Domain contains dot-separated segment that is too long"},i.code=function(t){return{code:t,error:i.codes[t]}}},9959:(t,i,e)=>{const s=e(375),n=e(5752);i.regex=function(t){void 0===t&&(t={}),s(void 0===t.cidr||"string"==typeof t.cidr,"options.cidr must be a string");const i=t.cidr?t.cidr.toLowerCase():"optional";s(["required","optional","forbidden"].includes(i),"options.cidr must be one of required, optional, forbidden"),s(void 0===t.version||"string"==typeof t.version||Array.isArray(t.version),"options.version must be a string or an array of string");let e=t.version||["ipv4","ipv6","ipvfuture"];Array.isArray(e)||(e=[e]),s(e.length>=1,"options.version must have at least 1 version specified");for(let t=0;t<e.length;++t)s("string"==typeof e[t],"options.version must only contain strings"),e[t]=e[t].toLowerCase(),s(["ipv4","ipv6","ipvfuture"].includes(e[t]),"options.version contains unknown version "+e[t]+" - must be one of ipv4, ipv6, ipvfuture");e=Array.from(new Set(e));const r="(?:".concat(e.map((t=>{if("forbidden"===i)return n.ip[t];const e="\\/".concat("ipv4"===t?n.ip.v4Cidr:n.ip.v6Cidr);return"required"===i?"".concat(n.ip[t]).concat(e):"".concat(n.ip[t],"(?:").concat(e,")?")})).join("|"),")"),o=new RegExp("^".concat(r,"$"));return{cidr:i,versions:e,regex:o,raw:r}}},5752:(t,i,e)=>{const s=e(375),n=e(6064),r={generate:function(){const t={},i="\\dA-Fa-f",e="["+i+"]",s="\\w-\\.~",n="!\\$&'\\(\\)\\*\\+,;=",r="%"+i,o=s+r+n+":@",h="["+o+"]",a="(?:0{0,2}\\d|0?[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])";t.ipv4address="(?:"+a+"\\.){3}"+a;const u=e+"{1,4}",c="(?:"+u+":"+u+"|"+t.ipv4address+")",l="(?:"+u+":){6}"+c,d="::(?:"+u+":){5}"+c,f="(?:"+u+")?::(?:"+u+":){4}"+c,g="(?:(?:"+u+":){0,1}"+u+")?::(?:"+u+":){3}"+c,_="(?:(?:"+u+":){0,2}"+u+")?::(?:"+u+":){2}"+c,v="(?:(?:"+u+":){0,3}"+u+")?::"+u+":"+c,w="(?:(?:"+u+":){0,4}"+u+")?::"+c,m="(?:(?:"+u+":){0,5}"+u+")?::"+u,p="(?:(?:"+u+":){0,6}"+u+")?::";t.ipv4Cidr="(?:\\d|[1-2]\\d|3[0-2])",t.ipv6Cidr="(?:0{0,2}\\d|0?[1-9]\\d|1[01]\\d|12[0-8])",t.ipv6address="(?:"+l+"|"+d+"|"+f+"|"+g+"|"+_+"|"+v+"|"+w+"|"+m+"|"+p+")",t.ipvFuture="v"+e+"+\\.["+s+n+":]+",t.scheme="[a-zA-Z][a-zA-Z\\d+-\\.]*",t.schemeRegex=new RegExp(t.scheme);const A="["+s+r+n+":]*",y="["+s+r+n+"]{1,255}",b="(?:\\[(?:"+t.ipv6address+"|"+t.ipvFuture+")\\]|"+t.ipv4address+"|"+y+")",M="(?:"+A+"@)?"+b+"(?::\\d*)?",T="(?:"+A+"@)?("+b+")(?::\\d*)?",S=h+"*",N=h+"+",I="(?:\\/"+S+")*",D="\\/(?:"+N+I+")?",E=N+I,k="["+s+r+n+"@]+"+I,x="(?:\\/\\/\\/"+S+I+")";return t.hierPart="(?:(?:\\/\\/"+M+I+")|"+D+"|"+E+"|"+x+")",t.hierPartCapture="(?:(?:\\/\\/"+T+I+")|"+D+"|"+E+")",t.relativeRef="(?:(?:\\/\\/"+M+I+")|"+D+"|"+k+"|)",t.relativeRefCapture="(?:(?:\\/\\/"+T+I+")|"+D+"|"+k+"|)",t.query="["+o+"\\/\\?]*(?=#|$)",t.queryWithSquareBrackets="["+o+"\\[\\]\\/\\?]*(?=#|$)",t.fragment="["+o+"\\/\\?]*",t}};r.rfc3986=r.generate(),i.ip={v4Cidr:r.rfc3986.ipv4Cidr,v6Cidr:r.rfc3986.ipv6Cidr,ipv4:r.rfc3986.ipv4address,ipv6:r.rfc3986.ipv6address,ipvfuture:r.rfc3986.ipvFuture},r.createRegex=function(t){const i=r.rfc3986,e="(?:\\?"+(t.allowQuerySquareBrackets?i.queryWithSquareBrackets:i.query)+")?(?:#"+i.fragment+")?",o=t.domain?i.relativeRefCapture:i.relativeRef;if(t.relativeOnly)return r.wrap(o+e);let h="";if(t.scheme){s(t.scheme instanceof RegExp||"string"==typeof t.scheme||Array.isArray(t.scheme),"scheme must be a RegExp, String, or Array");const e=[].concat(t.scheme);s(e.length>=1,"scheme must have at least 1 scheme specified");const r=[];for(let t=0;t<e.length;++t){const o=e[t];s(o instanceof RegExp||"string"==typeof o,"scheme at position "+t+" must be a RegExp or String"),o instanceof RegExp?r.push(o.source.toString()):(s(i.schemeRegex.test(o),"scheme at position "+t+" must be a valid scheme"),r.push(n(o)))}h=r.join("|")}const a="(?:"+(h?"(?:"+h+")":i.scheme)+":"+(t.domain?i.hierPartCapture:i.hierPart)+")",u=t.allowRelative?"(?:"+a+"|"+o+")":a;return r.wrap(u+e,h)},r.wrap=function(t,i){return{raw:t="(?=.)(?!https?:/(?:$|[^/]))(?!https?:///)(?!https?:[^/])".concat(t),regex:new RegExp("^".concat(t,"$")),scheme:i}},r.uriRegex=r.createRegex({}),i.regex=function(t){return void 0===t&&(t={}),t.scheme||t.allowRelative||t.relativeOnly||t.allowQuerySquareBrackets||t.domain?r.createRegex(t):r.uriRegex}},1447:(t,i)=>{const e={operators:["!","^","*","/","%","+","-","<","<=",">",">=","==","!=","&&","||","??"],operatorCharacters:["!","^","*","/","%","+","-","<","=",">","&","|","?"],operatorsOrder:[["^"],["*","/","%"],["+","-"],["<","<=",">",">="],["==","!="],["&&"],["||","??"]],operatorsPrefix:["!","n"],literals:{'"':'"',"`":"`","'":"'","[":"]"},numberRx:/^(?:[0-9]*(\.[0-9]*)?){1}$/,tokenRx:/^[\w\$\#\.\@\:\{\}]+$/,symbol:Bo("formula"),settings:Bo("settings")};i.Parser=class{dw(t){let s=[],n="",r=0,o=!1;const h=t=>{if(r)throw new b("Formula missing closing parenthesis");const h=s.length?s[s.length-1]:null;if(o||n||t){if(h&&"reference"===h.type&&")"===t)return h.type="function",h.value=this.Lw(n,h.value),void(n="");if(")"===t){const t=new i.Parser(n,this.settings);s.push({type:"segment",value:t})}else if(o){if("]"===o)return s.push({type:"reference",value:n}),void(n="");s.push({type:"literal",value:n})}else if(e.operatorCharacters.includes(n))h&&"operator"===h.type&&e.operators.includes(h.value+n)?h.value+=n:s.push({type:"operator",value:n});else if(n.match(e.numberRx))s.push({type:"constant",value:S(n)});else if(void 0!==this.settings.constants[n])s.push({type:"constant",value:this.settings.constants[n]});else{if(!n.match(e.tokenRx))throw new b("Formula contains invalid token: ".concat(n));s.push({type:"reference",value:n})}n=""}};for(const i of t)o?i===o?(h(),o=!1):n+=i:r?"("===i?(n+=i,++r):")"===i?(--r,r?n+=i:h(i)):n+=i:i in e.literals?o=e.literals[i]:"("===i?(h(),++r):e.operatorCharacters.includes(i)?(h(),n=i,h()):" "!==i?n+=i:h();h(),s=s.map(((t,i)=>"operator"!==t.type||"-"!==t.value||i&&"operator"!==s[i-1].type?t:{type:"operator",value:"n"}));let a=!1;for(const t of s){if("operator"===t.type){if(e.operatorsPrefix.includes(t.value))continue;if(!a)throw new b("Formula contains an operator in invalid position");if(!e.operators.includes(t.value))throw new b("Formula contains an unknown operator ".concat(t.value))}else if(a)throw new b("Formula missing expected operator");a=!a}if(!a)throw new b("Formula contains invalid trailing operator");1===s.length&&["reference","literal","constant"].includes(s[0].type)&&(this.single={type:"reference"===s[0].type?"reference":"value",value:s[0].value}),this.Cw=s.map((t=>{if("operator"===t.type)return e.operatorsPrefix.includes(t.value)?t:t.value;if("reference"!==t.type)return t.value;if(this.settings.tokenRx&&!this.settings.tokenRx.test(t.value))throw new b("Formula contains invalid reference ".concat(t.value));return this.settings.reference?this.settings.reference(t.value):e.reference(t.value)}))}Lw(t,s){const n=this.settings.functions[s];if("function"!=typeof n)throw new b("Formula contains unknown function ".concat(s));let r=[];if(t){let i="",n=0,o=!1;const h=()=>{if(!i)throw new b("Formula contains function ".concat(s," with invalid arguments ").concat(t));r.push(i),i=""};for(let s=0;s<t.length;++s){const r=t[s];o?(i+=r,r===o&&(o=!1)):r in e.literals&&!n?(i+=r,o=e.literals[r]):","!==r||n?(i+=r,"("===r?++n:")"===r&&--n):h()}h()}return r=r.map((t=>new i.Parser(t,this.settings))),function(t){const i=[];for(const e of r)i.push(e.evaluate(t));return n.call(t,...i)}}evaluate(t){const i=this.Cw.slice();for(let s=i.length-2;s>=0;--s){const n=i[s];if(n&&"operator"===n.type){const r=i[s+1];i.splice(s+1,1);const o=e.evaluate(r,t);i[s]=e.single(n.value,o)}}return e.operatorsOrder.forEach((s=>{for(let n=1;n<i.length-1;)if(s.includes(i[n])){const s=i[n],r=e.evaluate(i[n-1],t),o=e.evaluate(i[n+1],t);i.splice(n,2);const h=e.calculate(s,r,o);i[n-1]=0===h?0:h}else n+=2})),e.evaluate(i[0],t)}constructor(t,i={}){if(!i[e.settings]&&i.constants)for(const t in i.constants){const e=i.constants[t];if(null!==e&&!["boolean","number","string"].includes(typeof e))throw new b("Formula constant ".concat(t," contains invalid ").concat(typeof e," value type"))}this.settings=i[e.settings]?i:_.assign({[e.settings]:!0,constants:{},functions:{}},i),this.single=null,this.Cw=null,this.dw(t)}},i.Parser.prototype[e.symbol]=!0,e.reference=function(t){return function(i){return i&&void 0!==i[t]?i[t]:null}},e.evaluate=function(t,i){return null===t?null:"function"==typeof t?t(i):t[e.symbol]?t.evaluate(i):t},e.single=function(t,i){if("!"===t)return!i;const e=-i;return 0===e?0:e},e.calculate=function(t,i,s){if("??"===t)return e.exists(i)?i:s;if("string"==typeof i||"string"==typeof s){if("+"===t)return(i=e.exists(i)?i:"")+(e.exists(s)?s:"")}else switch(t){case"^":return x.pow(i,s);case"*":return i*s;case"/":return i/s;case"%":return i%s;case"+":return i+s;case"-":return i-s}switch(t){case"<":return i<s;case"<=":return i<=s;case">":return i>s;case">=":return i>=s;case"==":return i===s;case"!=":return i!==s;case"&&":return i&&s;case"||":return i||s}return null},e.exists=function(t){return null!=t}},9926:()=>{},5688:()=>{},9708:()=>{},1152:()=>{},443:()=>{},9848:()=>{},5934:t=>{t.exports=JSON.parse('{"version":"17.13.3"}')}},i={},function e(s){var n=i[s];if(void 0!==n)return n.exports;var r=i[s]={exports:{}};return t[s](r,r.exports,e),r.exports}(5107);var t,i},t.exports=e()}(Qs);const Fs=A(Qs.exports);let Ys;class Vs extends Nt{getRTCPeerConnection(){return this.webRTCPeer?this.webRTCPeer.getRTCPeer():null}stop(){var t;Ys.info("Stopping"),this.webRTCPeer.closeRTCPeer(),null==(t=this.signaling)||t.close(),this.signaling=null,this.stopReconnection=!0,this.webRTCPeer=new rs}isActive(){const t=this.webRTCPeer.getRTCPeerStatus();return Ys.info("Broadcast status: ",t||"not_established"),"connected"===t}setReconnect(){this.signaling.on("migrate",(()=>this.replaceConnection())),this.autoReconnect&&(this.signaling.on(As,(()=>{(this.firstReconnection||!this.alreadyDisconnected)&&(this.firstReconnection=!1,this.reconnect({error:new b("Signaling error: wsConnectionError")}))})),this.webRTCPeer.on(ss.connectionStateChange,(t=>{H(t),"connected"===t&&Z(new Date),("failed"===t||"disconnected"===t&&this.alreadyDisconnected)&&this.firstReconnection?(this.firstReconnection=!1,this.reconnect({error:new b("Connection state change: RTCPeerConnectionState disconnected")})):"disconnected"===t?(this.alreadyDisconnected=!0,u((()=>this.reconnect({error:new b("Connection state change: RTCPeerConnectionState disconnected")})),1500)):this.alreadyDisconnected=!1})))}async reconnect(t){try{Ys.info("Attempting to reconnect..."),!this.isActive()&&!this.stopReconnection&&!this.isReconnecting&&(this.stop(),this.emit("reconnect",{timeout:Gs(this.reconnectionInterval),error:null!=t&&t.error?null==t?void 0:t.error:new b("Attempting to reconnect")}),this.isReconnecting=!0,await this.connect(this.options),this.alreadyDisconnected=!1,this.reconnectionInterval=1e3,this.firstReconnection=!0,this.isReconnecting=!1)}catch(t){this.isReconnecting=!1,this.reconnectionInterval=Gs(this.reconnectionInterval),Ys.error("Reconnection failed, retrying in ".concat(this.reconnectionInterval,"ms. "),t),u((()=>this.reconnect({error:t})),this.reconnectionInterval)}}constructor(t,i,e,s){if(super(),Ys=e,!i)throw Ys.error("Token generator is required to construct this module."),new b("Token generator is required to construct this module.");this.webRTCPeer=new rs,this.signaling=null,this.autoReconnect=s,this.reconnectionInterval=1e3,this.alreadyDisconnected=!1,this.firstReconnection=!0,this.stopReconnection=!1,this.isReconnecting=!1,this.tokenGenerator=i,this.options=null}}const Gs=t=>t<32e3?2*t:t,Ws=s.RTCRtpSender&&!!RTCRtpSender.prototype.createEncodedStreams&&s.RTCRtpReceiver&&!!RTCRtpReceiver.prototype.createEncodedStreams,Zs="RTCRtpScriptTransform"in s,Hs="KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3ZhciBGPXR5cGVvZiBnbG9iYWxUaGlzPCJ1Ij9nbG9iYWxUaGlzOnR5cGVvZiB3aW5kb3c8InUiP3dpbmRvdzp0eXBlb2YgZ2xvYmFsPCJ1Ij9nbG9iYWw6dHlwZW9mIHNlbGY8InUiP3NlbGY6e307ZnVuY3Rpb24gVyhuKXtyZXR1cm4gbiYmbi5fX2VzTW9kdWxlJiZPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobiwiZGVmYXVsdCIpP24uZGVmYXVsdDpufXZhciBCPXtleHBvcnRzOnt9fTsvKiEKICoganMtbG9nZ2VyIC0gaHR0cDovL2dpdGh1Yi5jb20vam9ubnlyZWV2ZXMvanMtbG9nZ2VyCiAqIEpvbm55IFJlZXZlcywgaHR0cDovL2pvbm55cmVldmVzLmNvLnVrLwogKiBqcy1sb2dnZXIgbWF5IGJlIGZyZWVseSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuCiAqLyhmdW5jdGlvbihuKXsoZnVuY3Rpb24odCl7dmFyIGU9e307ZS5WRVJTSU9OPSIxLjYuMSI7dmFyIHMscj17fSxvPWZ1bmN0aW9uKGksdSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHUuYXBwbHkoaSxhcmd1bWVudHMpfX0sYT1mdW5jdGlvbigpe3ZhciBpPWFyZ3VtZW50cyx1PWlbMF0saCxjO2ZvcihjPTE7YzxpLmxlbmd0aDtjKyspZm9yKGggaW4gaVtjXSkhKGggaW4gdSkmJmlbY10uaGFzT3duUHJvcGVydHkoaCkmJih1W2hdPWlbY11baF0pO3JldHVybiB1fSxkPWZ1bmN0aW9uKGksdSl7cmV0dXJue3ZhbHVlOmksbmFtZTp1fX07ZS5UUkFDRT1kKDEsIlRSQUNFIiksZS5ERUJVRz1kKDIsIkRFQlVHIiksZS5JTkZPPWQoMywiSU5GTyIpLGUuVElNRT1kKDQsIlRJTUUiKSxlLldBUk49ZCg1LCJXQVJOIiksZS5FUlJPUj1kKDgsIkVSUk9SIiksZS5PRkY9ZCg5OSwiT0ZGIik7dmFyIGw9ZnVuY3Rpb24oaSl7dGhpcy5jb250ZXh0PWksdGhpcy5zZXRMZXZlbChpLmZpbHRlckxldmVsKSx0aGlzLmxvZz10aGlzLmluZm99O2wucHJvdG90eXBlPXtzZXRMZXZlbDpmdW5jdGlvbihpKXtpJiYidmFsdWUiaW4gaSYmKHRoaXMuY29udGV4dC5maWx0ZXJMZXZlbD1pKX0sZ2V0TGV2ZWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZXh0LmZpbHRlckxldmVsfSxlbmFibGVkRm9yOmZ1bmN0aW9uKGkpe3ZhciB1PXRoaXMuY29udGV4dC5maWx0ZXJMZXZlbDtyZXR1cm4gaS52YWx1ZT49dS52YWx1ZX0sdHJhY2U6ZnVuY3Rpb24oKXt0aGlzLmludm9rZShlLlRSQUNFLGFyZ3VtZW50cyl9LGRlYnVnOmZ1bmN0aW9uKCl7dGhpcy5pbnZva2UoZS5ERUJVRyxhcmd1bWVudHMpfSxpbmZvOmZ1bmN0aW9uKCl7dGhpcy5pbnZva2UoZS5JTkZPLGFyZ3VtZW50cyl9LHdhcm46ZnVuY3Rpb24oKXt0aGlzLmludm9rZShlLldBUk4sYXJndW1lbnRzKX0sZXJyb3I6ZnVuY3Rpb24oKXt0aGlzLmludm9rZShlLkVSUk9SLGFyZ3VtZW50cyl9LHRpbWU6ZnVuY3Rpb24oaSl7dHlwZW9mIGk9PSJzdHJpbmciJiZpLmxlbmd0aD4wJiZ0aGlzLmludm9rZShlLlRJTUUsW2ksInN0YXJ0Il0pfSx0aW1lRW5kOmZ1bmN0aW9uKGkpe3R5cGVvZiBpPT0ic3RyaW5nIiYmaS5sZW5ndGg+MCYmdGhpcy5pbnZva2UoZS5USU1FLFtpLCJlbmQiXSl9LGludm9rZTpmdW5jdGlvbihpLHUpe3MmJnRoaXMuZW5hYmxlZEZvcihpKSYmcyh1LGEoe2xldmVsOml9LHRoaXMuY29udGV4dCkpfX07dmFyIGY9bmV3IGwoe2ZpbHRlckxldmVsOmUuT0ZGfSk7KGZ1bmN0aW9uKCl7dmFyIGk9ZTtpLmVuYWJsZWRGb3I9byhmLGYuZW5hYmxlZEZvciksaS50cmFjZT1vKGYsZi50cmFjZSksaS5kZWJ1Zz1vKGYsZi5kZWJ1ZyksaS50aW1lPW8oZixmLnRpbWUpLGkudGltZUVuZD1vKGYsZi50aW1lRW5kKSxpLmluZm89byhmLGYuaW5mbyksaS53YXJuPW8oZixmLndhcm4pLGkuZXJyb3I9byhmLGYuZXJyb3IpLGkubG9nPWkuaW5mb30pKCksZS5zZXRIYW5kbGVyPWZ1bmN0aW9uKGkpe3M9aX0sZS5zZXRMZXZlbD1mdW5jdGlvbihpKXtmLnNldExldmVsKGkpO2Zvcih2YXIgdSBpbiByKXIuaGFzT3duUHJvcGVydHkodSkmJnJbdV0uc2V0TGV2ZWwoaSl9LGUuZ2V0TGV2ZWw9ZnVuY3Rpb24oKXtyZXR1cm4gZi5nZXRMZXZlbCgpfSxlLmdldD1mdW5jdGlvbihpKXtyZXR1cm4gcltpXXx8KHJbaV09bmV3IGwoYSh7bmFtZTppfSxmLmNvbnRleHQpKSl9LGUuY3JlYXRlRGVmYXVsdEhhbmRsZXI9ZnVuY3Rpb24oaSl7aT1pfHx7fSxpLmZvcm1hdHRlcj1pLmZvcm1hdHRlcnx8ZnVuY3Rpb24ocCxfKXtfLm5hbWUmJnAudW5zaGlmdCgiWyIrXy5uYW1lKyJdIil9O3ZhciB1PXt9LGg9ZnVuY3Rpb24oYyxwKXtGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHkuY2FsbChjLGNvbnNvbGUscCl9O3JldHVybiB0eXBlb2YgY29uc29sZT4idSI/ZnVuY3Rpb24oKXt9OmZ1bmN0aW9uKGMscCl7Yz1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChjKTt2YXIgXz1jb25zb2xlLmxvZyxnO3AubGV2ZWw9PT1lLlRJTUU/KGc9KHAubmFtZT8iWyIrcC5uYW1lKyJdICI6IiIpK2NbMF0sY1sxXT09PSJzdGFydCI/Y29uc29sZS50aW1lP2NvbnNvbGUudGltZShnKTp1W2ddPW5ldyBEYXRlKCkuZ2V0VGltZSgpOmNvbnNvbGUudGltZUVuZD9jb25zb2xlLnRpbWVFbmQoZyk6aChfLFtnKyI6ICIrKG5ldyBEYXRlKCkuZ2V0VGltZSgpLXVbZ10pKyJtcyJdKSk6KHAubGV2ZWw9PT1lLldBUk4mJmNvbnNvbGUud2Fybj9fPWNvbnNvbGUud2FybjpwLmxldmVsPT09ZS5FUlJPUiYmY29uc29sZS5lcnJvcj9fPWNvbnNvbGUuZXJyb3I6cC5sZXZlbD09PWUuSU5GTyYmY29uc29sZS5pbmZvP189Y29uc29sZS5pbmZvOnAubGV2ZWw9PT1lLkRFQlVHJiZjb25zb2xlLmRlYnVnP189Y29uc29sZS5kZWJ1ZzpwLmxldmVsPT09ZS5UUkFDRSYmY29uc29sZS50cmFjZSYmKF89Y29uc29sZS50cmFjZSksaS5mb3JtYXR0ZXIoYyxwKSxoKF8sYykpfX0sZS51c2VEZWZhdWx0cz1mdW5jdGlvbihpKXtlLnNldExldmVsKGkmJmkuZGVmYXVsdExldmVsfHxlLkRFQlVHKSxlLnNldEhhbmRsZXIoZS5jcmVhdGVEZWZhdWx0SGFuZGxlcihpKSl9LGUuc2V0RGVmYXVsdHM9ZS51c2VEZWZhdWx0cyxuLmV4cG9ydHM/bi5leHBvcnRzPWU6KGUuX3ByZXZMb2dnZXI9dC5Mb2dnZXIsZS5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIHQuTG9nZ2VyPWUuX3ByZXZMb2dnZXIsZX0sdC5Mb2dnZXI9ZSl9KShGKX0pKEIpO3ZhciB6PUIuZXhwb3J0cyxEPVcoeik7Y2xhc3Mgd3tjb25zdHJ1Y3Rvcih0KXt0aGlzLmRhdGE9dCx0aGlzLmJpdE9mZnNldD0wfXJlYWRCaXRzKHQpe2lmKHRoaXMuYml0T2Zmc2V0K3Q+dGhpcy5kYXRhLmxlbmd0aCo4KXRocm93IG5ldyBFcnJvcigiQXR0ZW1wdGVkIHRvIHJlYWQgcGFzdCB0aGUgZW5kIG9mIHRoZSBiaXRzdHJlYW0iKTtsZXQgZT0wO2ZvcihsZXQgcz0wO3M8dDtzKyspe2NvbnN0IHI9TWF0aC5mbG9vcih0aGlzLmJpdE9mZnNldC84KSxvPTctdGhpcy5iaXRPZmZzZXQlOCxhPXRoaXMuZGF0YVtyXT4+byYxO2V8PWE8PHQtMS1zLHRoaXMuYml0T2Zmc2V0Kyt9cmV0dXJuIGV9c2tpcCh0KXt0aGlzLmJpdE9mZnNldCs9dH1yZWFkRXhwR29sb21iVW5zaWduZWQoKXtsZXQgdD0tMTtmb3IobGV0IGU9MDtlPT09MDt0KyspZT10aGlzLnJlYWRCaXRzKDEpO3JldHVybigxPDx0KS0xK3RoaXMucmVhZEJpdHModCl9cmVhZEV4cEdvbG9tYlNpZ25lZCgpe2NvbnN0IHQ9dGhpcy5yZWFkRXhwR29sb21iVW5zaWduZWQoKTtyZXR1cm4gdCUyPT09MD8tKHQvMik6KHQrMSkvMn19Y29uc3QgbT17U0xJQ0VfTk9OX0lEUjoxLFNMSUNFX1BBUlRJVElPTl9BOjIsU0xJQ0VfSURSOjUsU0VJX0gyNjQ6NixTRUlfSDI2NV9QUkVGSVg6MzksU0VJX0gyNjVfU1VGRklYOjQwLFNQU19IMjY0OjcsU1BTX0gyNjU6MzMsUFBTX0gyNjQ6OCxQUFNfSDI2NTozNH0sUj17UElDX1RJTUlORzoxLFVTRVJfREFUQV9VTlJFR0lTVEVSRUQ6NX0sRT17TEVHQUNZOjEsTkVXOjIsVElNRUNPREU6MyxPVEhFUjo0fSxqPSI2ZTljZmQyYS01OTA3LTQ5ZmYtYjM2My04OTc4YTZlODM0MGUiLHE9IjlhMjFmM2JlLTMxZjAtNGI3OC1iMGJlLWM3ZjdkYmI5NzI1MCIsTD0iZDQwZTM4ZWEtZDQxOS00YzYyLTk0ZWQtMjBhYzM3YjRlNGZhIjtjbGFzcyBWe2NvbnN0cnVjdG9yKHQ9IkgyNjQiKXt0aGlzLnNwcz1uZXcgTWFwLHRoaXMucHBzPW5ldyBNYXAsdGhpcy5hY3RpdmVTUFM9bnVsbCx0aGlzLmNvZGVjPXR9Y29sbGVjdFBQUyh0KXt0aGlzLmNvZGVjPT09IkgyNjQiP3RoaXMuY29sbGVjdEgyNjRQUFModCk6dGhpcy5jb2xsZWN0SDI2NVBQUyh0KX1jb2xsZWN0U1BTKHQpe3RoaXMuY29kZWM9PT0iSDI2NCI/dGhpcy5jb2xsZWN0SDI2NFNQUyh0KTp0aGlzLmNvbGxlY3RIMjY1U1BTKHQpfWNvbGxlY3RIMjY0U1BTKHQpe2NvbnN0IGU9bmV3IHcodCkscz1lLnJlYWRCaXRzKDgpLHI9WzEwMCwxMTAsMTIyLDI0NCw0NCw4Myw4NiwxMTgsMTI4LDEzOCwxMzksMTM0LDEzNV07ZS5za2lwKDgpLGUuc2tpcCg4KTtjb25zdCBvPWUucmVhZEV4cEdvbG9tYlVuc2lnbmVkKCk7aWYobz4zMXx8bzwwKXRocm93IG5ldyBFcnJvcigiSW52YWxpZCBzZXFfcGFyYW1ldGVyX3NldF9pZCIpO2lmKHIuaW5jbHVkZXMocykpe2NvbnN0IGw9ZS5yZWFkRXhwR29sb21iVW5zaWduZWQoKTtpZihsPT09MyYmZS5za2lwKDEpLGUucmVhZEV4cEdvbG9tYlVuc2lnbmVkKCksZS5yZWFkRXhwR29sb21iVW5zaWduZWQoKSxlLnNraXAoMSksZS5yZWFkQml0cygxKSl7Y29uc3QgaT1sIT09Mz84OjEyO2ZvcihsZXQgdT0wO3U8aTt1KyspaWYoZS5yZWFkQml0cygxKSl7Y29uc3QgaD11PDY/MTY6NjQ7bGV0IGM9OCxwPTg7Zm9yKGxldCBfPTA7XzxoO18rKyl7aWYocCE9PTApe2NvbnN0IGc9ZS5yZWFkRXhwR29sb21iU2lnbmVkKCk7cD0oYytnKzI1NiklMjU2fWM9cD09PTA/YzpwfX19fWUucmVhZEV4cEdvbG9tYlVuc2lnbmVkKCk7Y29uc3QgYT1lLnJlYWRFeHBHb2xvbWJVbnNpZ25lZCgpO2lmKGE9PT0wKWUucmVhZEV4cEdvbG9tYlVuc2lnbmVkKCk7ZWxzZSBpZihhPT09MSl7ZS5za2lwKDEpLGUucmVhZEV4cEdvbG9tYlNpZ25lZCgpLGUucmVhZEV4cEdvbG9tYlNpZ25lZCgpO2NvbnN0IGw9ZS5yZWFkRXhwR29sb21iVW5zaWduZWQoKTtmb3IobGV0IGY9MDtmPGw7ZisrKWUucmVhZEV4cEdvbG9tYlNpZ25lZCgpfWUucmVhZEV4cEdvbG9tYlVuc2lnbmVkKCksZS5za2lwKDEpLGUucmVhZEV4cEdvbG9tYlVuc2lnbmVkKCksZS5yZWFkRXhwR29sb21iVW5zaWduZWQoKSxlLnJlYWRCaXRzKDEpPT09MCYmZS5za2lwKDEpLGUuc2tpcCgxKSxlLnJlYWRCaXRzKDEpJiYoZS5yZWFkRXhwR29sb21iVW5zaWduZWQoKSxlLnJlYWRFeHBHb2xvbWJVbnNpZ25lZCgpLGUucmVhZEV4cEdvbG9tYlVuc2lnbmVkKCksZS5yZWFkRXhwR29sb21iVW5zaWduZWQoKSk7bGV0IGQ7aWYoZS5yZWFkQml0cygxKSl7bGV0IGY9ZnVuY3Rpb24oYyl7Y29uc3QgcD1jLnJlYWRFeHBHb2xvbWJVbnNpZ25lZCgpO2Muc2tpcCg0KSxjLnNraXAoNCk7Zm9yKGxldCB4PTA7eDw9cDt4KyspYy5yZWFkRXhwR29sb21iVW5zaWduZWQoKSxjLnJlYWRFeHBHb2xvbWJVbnNpZ25lZCgpLGMuc2tpcCgxKTtjLnNraXAoNSk7Y29uc3QgXz1jLnJlYWRCaXRzKDUpLGc9Yy5yZWFkQml0cyg1KSxBPWMucmVhZEJpdHMoNSk7cmV0dXJue2NwYl9yZW1vdmFsX2RlbGF5X2xlbmd0aF9taW51czE6XyxkcGJfb3V0cHV0X2RlbGF5X2xlbmd0aF9taW51czE6Zyx0aW1lX29mZnNldF9sZW5ndGg6QX19O2UucmVhZEJpdHMoMSkmJmUucmVhZEJpdHMoOCk9PT0yNTUmJihlLnNraXAoMTYpLGUuc2tpcCgxNikpLGUucmVhZEJpdHMoMSkmJmUuc2tpcCgxKSxlLnJlYWRCaXRzKDEpJiYoZS5za2lwKDMpLGUuc2tpcCgxKSxlLnJlYWRCaXRzKDEpJiZlLnNraXAoMjQpKSxlLnJlYWRCaXRzKDEpJiYoZS5yZWFkRXhwR29sb21iVW5zaWduZWQoKSxlLnJlYWRFeHBHb2xvbWJVbnNpZ25lZCgpKTtjb25zdCBsPWUucmVhZEJpdHMoMSk/e251bV91bml0c19pbl90aWNrOmUucmVhZEJpdHMoMzIpLHRpbWVfc2NhbGU6ZS5yZWFkQml0cygzMiksZml4ZWRfZnJhbWVfcmF0ZV9mbGFnOmUucmVhZEJpdHMoMSl9OnZvaWQgMCxpPWUucmVhZEJpdHMoMSk/ZihlKTp2b2lkIDAsdT1lLnJlYWRCaXRzKDEpP2YoZSk6dm9pZCAwOyhpfHx1KSYmZS5za2lwKDEpO2NvbnN0IGg9ZS5yZWFkQml0cygxKTtkPXt0aW1pbmdfaW5mbzpsLG5hbF9ocmRfcGFyYW1ldGVyczppLHZjbF9ocmRfcGFyYW1ldGVyczp1LHBpY19zdHJ1Y3RfcHJlc2VudF9mbGFnOmh9fXRoaXMuc3BzLnNldChvLHt2dWlfcGFyYW1ldGVyczpkfSl9Y29sbGVjdEgyNjVTUFModCl7fWNvbGxlY3RIMjY0UFBTKHQpe2NvbnN0IGU9bmV3IHcodCkscz1lLnJlYWRFeHBHb2xvbWJVbnNpZ25lZCgpO2lmKHM+MjU1fHxzPDApdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIHBpY19wYXJhbWV0ZXJfc2V0X2lkIik7Y29uc3Qgcj1lLnJlYWRFeHBHb2xvbWJVbnNpZ25lZCgpO3RoaXMucHBzLnNldChzLHtzZXFfcGFyYW1ldGVyX3NldF9pZDpyfSl9Y29sbGVjdEgyNjVQUFModCl7fWZpbmRBY3RpdmVTUFModCl7Y29uc3QgZT1uZXcgdyh0KTtlLnJlYWRFeHBHb2xvbWJVbnNpZ25lZCgpLGUucmVhZEV4cEdvbG9tYlVuc2lnbmVkKCk7Y29uc3Qgcz1lLnJlYWRFeHBHb2xvbWJVbnNpZ25lZCgpLHI9dGhpcy5wcHMuZ2V0KHMpO2lmKHIpe2NvbnN0IG89dGhpcy5zcHMuZ2V0KHIuc2VxX3BhcmFtZXRlcl9zZXRfaWQpO2lmKG8pe3RoaXMuYWN0aXZlU1BTPW87cmV0dXJufX10aHJvdyBuZXcgRXJyb3IoIkNhbm5vdCBmaW5kIHRoZSBhY3RpdmUgU1BTIil9fWNvbnN0IFM9bmV3IFY7ZnVuY3Rpb24gRyhuLHQpe2Zvcig7dDxuLmJ5dGVMZW5ndGgtNDspe2lmKG5bdF09PT0wJiZuW3QrMV09PT0wJiYoblt0KzJdPT09MXx8blt0KzJdPT09MCYmblt0KzNdPT09MSkpcmV0dXJuIHQ7dCs9MX1yZXR1cm4tMX1mdW5jdGlvbiBVKG4pe2NvbnN0IHQ9bmV3IFVpbnQ4QXJyYXkobi5ieXRlTGVuZ3RoKTtsZXQgZT0wLHM9MDtmb3IobGV0IHI9MjtyPG4uYnl0ZUxlbmd0aDtyKyspbltyXT09PTMmJm5bci0xXT09PTAmJm5bci0yXT09PTAmJih0LnNldChuLnN1YmFycmF5KHMsciksZSksZSs9ci1zLHM9cisxKTtyZXR1cm4gczxuLmJ5dGVMZW5ndGgmJnQuc2V0KG4uc3ViYXJyYXkocyksZSksdH1mdW5jdGlvbiBZKG4sdCl7bGV0IGU9MDtjb25zdCBzPXQ9PT0iSDI2NCI/MToyLHI9W107Zm9yKDtlPG4uYnl0ZUxlbmd0aC00Oyl7Y29uc3Qgbz1HKG4sZSk7aWYobz49ZSl7Y29uc3QgYT1uW28rMl09PT0xPzM6NCxkPUcobixvK2Ercyk7aWYoZD5vKXIucHVzaChuLnN1YmFycmF5KG8sZCkpLGU9ZDtlbHNle3IucHVzaChuLnN1YmFycmF5KG8pKTticmVha319ZWxzZSBicmVha31yZXR1cm4gcn1mdW5jdGlvbiBYKG4sdCl7bGV0IGU9ITA7cmV0dXJuIFkobix0KS5maWx0ZXIocz0+e2NvbnN0IHI9c1syXT09PTE/Mzo0LG89dD09PSJIMjY0Ij8xOjIsYT1zW3JdLGQ9dD09PSJIMjY0Ij9hJjMxOmE+PjEmNjM7aWYoZSlzd2l0Y2goZCl7Y2FzZSBtLlBQU19IMjY0OmNhc2UgbS5QUFNfSDI2NTpTLmNvbGxlY3RQUFMoVShzLnN1YmFycmF5KHIrbykpKTticmVhaztjYXNlIG0uU1BTX0gyNjQ6Y2FzZSBtLlNQU19IMjY1OlMuY29sbGVjdFNQUyhVKHMuc3ViYXJyYXkocitvKSkpO2JyZWFrO2Nhc2UgbS5TTElDRV9JRFI6Y2FzZSBtLlNMSUNFX05PTl9JRFI6Y2FzZSBtLlNMSUNFX1BBUlRJVElPTl9BOnRyeXtTLmZpbmRBY3RpdmVTUFMoVShzLnN1YmFycmF5KHIrbykpKSxlPSExfWNhdGNoKGwpe2NvbnNvbGUuaW5mbygiRmFpbGVkIHRvIGZpbmQgYWN0aXZlIFNQUy4gV2lsbCBub3QgYmUgYWJsZSB0byBleHRyYWN0IFBJQyB0aW1pbmcgbWV0YWRhdGEiKX1icmVha31yZXR1cm5bbS5TRUlfSDI2NCxtLlNFSV9IMjY1X1BSRUZJWCxtLlNFSV9IMjY1X1NVRkZJWF0uaW5jbHVkZXMoZCl9KX1mdW5jdGlvbiAkKG4pe2xldCB0PTAsZT0wO2Zvcig7bltlXT09PTI1NTspdCs9MjU1LGUrKzt0Kz1uW2VdLGUrKztsZXQgcz0wO2Zvcig7bltlXT09PTI1NTspcys9MjU1LGUrKztyZXR1cm4gcys9bltlXSxlKysse3R5cGU6dCxjb250ZW50Om4uc3ViYXJyYXkoZSxlK3MpfX1mdW5jdGlvbiBKKG4pe2NvbnN0IHQ9bmV3IFVpbnQ4QXJyYXkoVChxKSksZT1uZXcgVWludDhBcnJheShUKGopKSxzPW5ldyBVaW50OEFycmF5KFQoTCkpO3JldHVybiB0LmV2ZXJ5KChyLG8pPT5yPT09bltvXSk/RS5USU1FQ09ERTplLmV2ZXJ5KChyLG8pPT5yPT09bltvXSk/RS5MRUdBQ1k6cy5ldmVyeSgocixvKT0+cj09PW5bb10pP0UuTkVXOkUuT1RIRVJ9ZnVuY3Rpb24gSyhuLHQpe2xldCBlPTA7bi51dWlkPXQuc3ViYXJyYXkoZSxlKzE2KSxlKz0xNjtjb25zdCBzPUoobi51dWlkKSxyPXQuc3ViYXJyYXkoZSk7c3dpdGNoKHMpe2Nhc2UgRS5MRUdBQ1k6Y2FzZSBFLk9USEVSOm4udW5yZWdpc3RlcmVkPXI7YnJlYWs7Y2FzZSBFLlRJTUVDT0RFOm4udGltZWNvZGU9TyhyKTticmVhaztjYXNlIEUuTkVXOntsZXQgbz0wO2NvbnN0IGE9QyhEYXRlLm5vdygpKS5sZW5ndGgsZD1yLnN1YmFycmF5KG8sYSk7bys9YTtjb25zdCBsPXIuc3ViYXJyYXkobyk7bi50aW1lY29kZT1PKGQpLG4udW5yZWdpc3RlcmVkPWw7YnJlYWt9fX1mdW5jdGlvbiBPKG4pe2NvbnN0IHQ9bi5yZWR1Y2UoKG8sYSk9PihvPDxCaWdJbnQoOCkpK0JpZ0ludChhKSxCaWdJbnQoMCkpLGU9TnVtYmVyKHQpLHM9bmV3IERhdGUoZSk7cmV0dXJuIG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShzLnRvSVNPU3RyaW5nKCkpfWZ1bmN0aW9uIFoobix0KXt2YXIgZixpLHUsaCxjO2lmKCFTLmFjdGl2ZVNQUyl7Y29uc29sZS53YXJuKCJDYW5ub3QgZmluZCB0aGUgYWN0aXZlIFNQUyIpO3JldHVybn1jb25zdCBlPShmPVMuYWN0aXZlU1BTLnZ1aV9wYXJhbWV0ZXJzLm5hbF9ocmRfcGFyYW1ldGVycykhPW51bGw/ZjpTLmFjdGl2ZVNQUy52dWlfcGFyYW1ldGVycy52Y2xfaHJkX3BhcmFtZXRlcnMscz17Y3BiX2RwYl9kZWxheXNfcHJlc2VudF9mbGFnOmU/MTowLGNwYl9yZW1vdmFsX2RlbGF5X2xlbmd0aF9taW51czE6KGk9ZT09bnVsbD92b2lkIDA6ZS5jcGJfcmVtb3ZhbF9kZWxheV9sZW5ndGhfbWludXMxKSE9bnVsbD9pOjIzLGRwYl9vdXRwdXRfZGVsYXlfbGVuZ3RoX21pbnVzMToodT1lPT1udWxsP3ZvaWQgMDplLmRwYl9vdXRwdXRfZGVsYXlfbGVuZ3RoX21pbnVzMSkhPW51bGw/dToyMyx0aW1lX29mZnNldF9sZW5ndGg6ZT8oaD1lLnRpbWVfb2Zmc2V0X2xlbmd0aCkhPW51bGw/aDoyNDp2b2lkIDAscGljX3N0cnVjdF9wcmVzZW50X2ZsYWc6KGM9Uy5hY3RpdmVTUFMudnVpX3BhcmFtZXRlcnMucGljX3N0cnVjdF9wcmVzZW50X2ZsYWcpIT1udWxsP2M6MH07aWYoIXMucGljX3N0cnVjdF9wcmVzZW50X2ZsYWcpe2NvbnNvbGUud2FybigicGljX3N0cnVjdF9wcmVzZW50X2ZsYWcgaXMgbm90IHByZXNlbnQiKTtyZXR1cm59Y29uc3Qgcj1uZXcgdyh0KTtzLmNwYl9kcGJfZGVsYXlzX3ByZXNlbnRfZmxhZyYmKHIuc2tpcChzLmNwYl9yZW1vdmFsX2RlbGF5X2xlbmd0aF9taW51czErMSksci5za2lwKHMuZHBiX291dHB1dF9kZWxheV9sZW5ndGhfbWludXMxKzEpKTtjb25zdCBvPVsxLDEsMSwyLDIsMywzLDIsM10sYT1yLnJlYWRCaXRzKDQpO2lmKGE+PW8ubGVuZ3RoKXRocm93IG5ldyBFcnJvcigiSW52YWxpZCBwaWNfc3RydWN0Iik7Y29uc3QgZD1vW2FdLGw9W107Zm9yKGxldCBwPTA7cDxkO3ArKylpZihyLnJlYWRCaXRzKDEpKXtjb25zdCBnPXt9O3Iuc2tpcCgyKSxyLnNraXAoMSksci5za2lwKDUpO2NvbnN0IEE9ci5yZWFkQml0cygxKTtpZihyLnNraXAoMiksZy5uX2ZyYW1lcz1yLnJlYWRCaXRzKDgpLEE/KGcuc2Vjb25kc192YWx1ZT1yLnJlYWRCaXRzKDYpLGcubWludXRlc192YWx1ZT1yLnJlYWRCaXRzKDYpLGcuaG91cnNfdmFsdWU9ci5yZWFkQml0cyg1KSk6ci5yZWFkQml0cygxKSYmKGcuc2Vjb25kc192YWx1ZT1yLnJlYWRCaXRzKDYpLHIucmVhZEJpdHMoMSkmJihnLm1pbnV0ZXNfdmFsdWU9ci5yZWFkQml0cyg2KSxyLnJlYWRCaXRzKDEpJiYoZy5ob3Vyc192YWx1ZT1yLnJlYWRCaXRzKDUpKSkpLHMudGltZV9vZmZzZXRfbGVuZ3RoKXRyeXtnLnRpbWVfb2Zmc2V0PXIucmVhZEJpdHMocy50aW1lX29mZnNldF9sZW5ndGgpfWNhdGNoKHgpe2NvbnNvbGUuZXJyb3IoIkZhaWxlZCB0byByZWFkIHRpbWVfb2Zmc2V0Iix4KSxnLnRpbWVfb2Zmc2V0PTB9ZWxzZSBnLnRpbWVfb2Zmc2V0PTA7bC5wdXNoKGcpfW4uc2VpUGljVGltaW5nVGltZUNvZGVBcnJheT1sfWZ1bmN0aW9uIFEobix0KXtpZih0IT09IkgyNjQiJiZ0IT09IkgyNjUiKXRocm93IG5ldyBFcnJvcigiVW5zdXBwb3J0ZWQgY29kZWMgIi5jb25jYXQodCkpO2NvbnN0IGU9e307cmV0dXJuIFMuY29kZWM9dCxYKG5ldyBVaW50OEFycmF5KG4uZGF0YSksdCkuZm9yRWFjaChzPT57Y29uc3Qgcj1zWzJdPT09MT8zOjQsbz10PT09IkgyNjQiPzE6MixhPVUocy5zdWJhcnJheShyK28pKSxkPSQoYSk7c3dpdGNoKGQudHlwZSl7Y2FzZSBSLlBJQ19USU1JTkc6WihlLGQuY29udGVudCk7YnJlYWs7Y2FzZSBSLlVTRVJfREFUQV9VTlJFR0lTVEVSRUQ6SyhlLGQuY29udGVudCk7YnJlYWt9fSksZX1mdW5jdGlvbiBlZShuKXtyZXR1cm4vXlswLTlhLWZBLUZdezh9LVswLTlhLWZBLUZdezR9LVswLTlhLWZBLUZdezR9LVswLTlhLWZBLUZdezR9LVswLTlhLWZBLUZdezEyfSQvLnRlc3Qobil9ZnVuY3Rpb24gVChuKXtyZXR1cm4gbi5yZXBsYWNlKC8tL2csIiIpLm1hdGNoKC8uezEsMn0vZykubWFwKHQ9PnBhcnNlSW50KHQsMTYpKX1mdW5jdGlvbiB0ZShuLHQsZSl7Y29uc3Qgcz1uZXcgVWludDhBcnJheShUKG4pKSxyPUMoZSksbz1uZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUoSlNPTi5zdHJpbmdpZnkodCkpLGE9bmV3IFVpbnQ4QXJyYXkocy5sZW5ndGgrci5sZW5ndGgrby5sZW5ndGgpO3JldHVybiBhLnNldChzKSxhLnNldChyLHMubGVuZ3RoKSxhLnNldChvLHIubGVuZ3RoK3MubGVuZ3RoKSxhfWZ1bmN0aW9uIG5lKG4pe2NvbnN0IHQ9W10sZT1NYXRoLmZsb29yKG4uYnl0ZUxlbmd0aC8yNTUpLHM9bi5ieXRlTGVuZ3RoJTI1NTtmb3IobGV0IHI9MDtyPGU7cisrKXQucHVzaCgyNTUpO3JldHVybiB0LnB1c2gocyksbmV3IFVpbnQ4QXJyYXkoWzUsLi4udF0pfWZ1bmN0aW9uIHJlKG4pe2NvbnN0IHQ9W107Zm9yKGxldCBlPTA7ZTxuLmJ5dGVMZW5ndGg7ZSsrKWUrMjxuLmJ5dGVMZW5ndGgmJlswLDEsMiwzXS5pbmNsdWRlcyhuW2UrMl0pJiZuW2VdPT09MCYmbltlKzFdPT09MD8odC5wdXNoKG5bZV0pLHQucHVzaChuW2UrMV0pLGUrPTIsdC5wdXNoKDMpKTp0LnB1c2gobltlXSk7cmV0dXJuIHQucHVzaCgxMjgpLG5ldyBVaW50OEFycmF5KHQpfWZ1bmN0aW9uIEMobil7Y29uc3QgdD1bXTtpZighaXNOYU4obikpe2NvbnN0IGU9QmlnSW50KG4pO2ZvcihsZXQgcz0wO3M8TWF0aC5jZWlsKE1hdGguZmxvb3IoTWF0aC5sb2cyKG5ldyBOdW1iZXIobikpKzEpLzgpO3MrKyl0LnVuc2hpZnQobmV3IE51bWJlcihlPj5CaWdJbnQoOCpzKSZCaWdJbnQoMjU1KSkpfXJldHVybiBuZXcgVWludDhBcnJheSh0KX1mdW5jdGlvbiBzZSh7dXVpZDpuLHBheWxvYWQ6dCx0aW1lY29kZTplfSl7Y29uc3Qgcz1bMCwwLDAsMV0scj1bMTAyXSxvPXRlKG4sdCxlKSxhPW5lKG8pLGQ9cmUobyksbD1uZXcgVWludDhBcnJheShzLmxlbmd0aCtyLmxlbmd0aCthLmxlbmd0aCtkLmxlbmd0aCk7cmV0dXJuIGwuc2V0KHMpLGwuc2V0KHIscy5sZW5ndGgpLGwuc2V0KGEscy5sZW5ndGgrci5sZW5ndGgpLGwuc2V0KGQscy5sZW5ndGgrci5sZW5ndGgrYS5sZW5ndGgpLGx9ZnVuY3Rpb24gaWUoe3V1aWQ6bixwYXlsb2FkOnQsdGltZWNvZGU6ZX0scyl7aWYobj09PSIifHx0PT09IiIpdGhyb3cgbmV3IEVycm9yKCJ1dWlkIGFuZCBwYXlsb2FkIGNhbm5vdCBiZSBlbXB0eSIpO2VlKG4pfHwoY29uc29sZS53YXJuKCJJbnZhbGlkIFVVSUQuIFVzaW5nIGRlZmF1bHQgVVVJRC4iKSxuPUwsZT1EYXRlLm5vdygpKTtjb25zdCByPXNlKHt1dWlkOm4scGF5bG9hZDp0LHRpbWVjb2RlOmV9KSxvPW5ldyBEYXRhVmlldyhzLmRhdGEpLGE9bmV3IEFycmF5QnVmZmVyKHMuZGF0YS5ieXRlTGVuZ3RoK3IuYnl0ZUxlbmd0aCksZD1uZXcgRGF0YVZpZXcoYSk7Zm9yKGxldCBsPTA7bDxzLmRhdGEuYnl0ZUxlbmd0aDtsKyspZC5zZXRVaW50OChsLG8uZ2V0VWludDgobCkpO2ZvcihsZXQgbD0wO2w8ci5ieXRlTGVuZ3RoO2wrKylkLnNldFVpbnQ4KHMuZGF0YS5ieXRlTGVuZ3RoK2wscltsXSk7cy5kYXRhPWF9RC5nZXQoIlRyYW5zZm9ybVdvcmtlciIpLnNldExldmVsKEQuREVCVUcpO2NvbnN0IG9lPTJlMyxiPVtdO2xldCB5PSIiLFA9e307Y29uc3Qgdj17fTtsZXQgST1bXTtmdW5jdGlvbiBIKG4pe3JldHVybiBuZXcgVHJhbnNmb3JtU3RyZWFtKHtzdGFydCgpe30sZmx1c2goKXt9LGFzeW5jIHRyYW5zZm9ybSh0LGUpe3ZhciBzLHI7aWYodCBpbnN0YW5jZW9mIFJUQ0VuY29kZWRWaWRlb0ZyYW1lKXtjb25zdCBvPSgocz1QW3QuZ2V0TWV0YWRhdGEoKS5wYXlsb2FkVHlwZV0pPT1udWxsP3ZvaWQgMDpzLnRvVXBwZXJDYXNlKCkpfHwoeT09bnVsbD92b2lkIDA6eS50b1VwcGVyQ2FzZSgpKTtpZihvPT09IkgyNjQiKXtjb25zdCBhPVEodCxvKTsoYS50aW1lY29kZXx8YS51bnJlZ2lzdGVyZWR8fCgocj1hLnNlaVBpY1RpbWluZ1RpbWVDb2RlQXJyYXkpPT1udWxsP3ZvaWQgMDpyLmxlbmd0aCk+MCkmJnNlbGYucG9zdE1lc3NhZ2Uoe2V2ZW50OiJtZXRhZGF0YSIsbWlkOm4sbWV0YWRhdGE6YX0pfXNlbGYucG9zdE1lc3NhZ2Uoe2V2ZW50OiJjb21wbGV0ZSIsZnJhbWU6e3R5cGU6dC50eXBlLHRpbWVzdGFtcDp0LnRpbWVzdGFtcCxkYXRhOnQuZGF0YX19KX1lLmVucXVldWUodCl9fSl9ZnVuY3Rpb24gTSgpe09iamVjdC5rZXlzKHYpLnNvcnQoKS5qb2luKCk9PT1JLnNvcnQoKS5qb2luKCkmJihiLnNoaWZ0KCksST1bXSl9ZnVuY3Rpb24gYWUobil7Y29uc3QgdD1uZXcgRGF0ZSgpLmdldFRpbWUoKTt2W25dPXQsT2JqZWN0LmtleXModikuZmlsdGVyKHM9PnQtdltzXT5vZSkuZm9yRWFjaChzPT57ZGVsZXRlIHZbc10sZGVsZXRlIElbc119KSxNKCl9ZnVuY3Rpb24gTigpe3JldHVybiBuZXcgVHJhbnNmb3JtU3RyZWFtKHtzdGFydCgpe30sZmx1c2goKXt9LGFzeW5jIHRyYW5zZm9ybShuLHQpe2lmKG4gaW5zdGFuY2VvZiBSVENFbmNvZGVkVmlkZW9GcmFtZSl7Y29uc3Qgcz1uLmdldE1ldGFkYXRhKCkuc3luY2hyb25pemF0aW9uU291cmNlO2lmKGFlKHMpLCFJLmluY2x1ZGVzKHMpJiZiLmxlbmd0aCl0cnl7aWYoIS8oaDI2WzRdKS8udGVzdCh5KSl0aHJvdyBuZXcgRXJyb3IoIlNlbmRpbmcgbWV0YWRhdGEgaXMgbm90IHN1cHBvcnRlZCB3aXRoIGFueSBvdGhlciBjb2RlYyBvdGhlciB0aGFuIEguMjY0Iik7YlswXS51dWlkPT09TCYmKGJbMF0udGltZWNvZGU9RGF0ZS5ub3coKSksaWUoYlswXSxuKSxJLnB1c2gocyl9Y2F0Y2gocil7Y29uc29sZS5lcnJvcihyKX1maW5hbGx5e00oKX19dC5lbnF1ZXVlKG4pfX0pfWZ1bmN0aW9uIGsoe3JlYWRhYmxlOm4sd3JpdGFibGU6dH0sZSl7bi5waXBlVGhyb3VnaChlKS5waXBlVG8odCl9YWRkRXZlbnRMaXN0ZW5lcigicnRjdHJhbnNmb3JtIixuPT57bGV0IHQ7aWYobi50cmFuc2Zvcm1lci5vcHRpb25zLm5hbWU9PT0ic2VuZGVyVHJhbnNmb3JtIil5PW4udHJhbnNmb3JtZXIub3B0aW9ucy5jb2RlYyx0PU4oKTtlbHNlIGlmKG4udHJhbnNmb3JtZXIub3B0aW9ucy5uYW1lPT09InJlY2VpdmVyVHJhbnNmb3JtIilQPW4udHJhbnNmb3JtZXIub3B0aW9ucy5wYXlsb2FkVHlwZUNvZGVjfHx7fSx5PW4udHJhbnNmb3JtZXIub3B0aW9ucy5jb2RlY3x8IiIsdD1IKG4udHJhbnNmb3JtZXIub3B0aW9ucy5taWQpO2Vsc2UgcmV0dXJuO2sobi50cmFuc2Zvcm1lcix0KX0pLGFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLG49Pntjb25zdHthY3Rpb246dH09bi5kYXRhO3N3aXRjaCh0KXtjYXNlImluc2VydGFibGUtc3RyZWFtcy1zZW5kZXIiOnk9bi5kYXRhLmNvZGVjLGsobi5kYXRhLE4oKSk7YnJlYWs7Y2FzZSJpbnNlcnRhYmxlLXN0cmVhbXMtcmVjZWl2ZXIiOlA9bi5kYXRhLnBheWxvYWRUeXBlQ29kZWN8fHt9LHk9bi5kYXRhLmNvZGVjfHwiIixrKG4uZGF0YSxIKG4uZGF0YS5taWQpKTticmVhaztjYXNlIm1ldGFkYXRhLXNlaS11c2VyLWRhdGEtdW5yZWdpc3RlcmVkIjpiLnB1c2goe3V1aWQ6bi5kYXRhLnV1aWQscGF5bG9hZDpuLmRhdGEucGF5bG9hZH0pO2JyZWFrfX0pfSkoKTsK",Xs=typeof self<"u"&&self.Blob&&new Blob([(t=>T.from(atob(t),(t=>t.charCodeAt(0))))(Hs)],{type:"text/javascript;charset=utf-8"});function qs(t){let i;try{if(i=Xs&&(self.URL||self.webkitURL).createObjectURL(Xs),!i)throw"";const e=new Jl(i,{name:null==t?void 0:t.name});return e.addEventListener("error",(()=>{(self.URL||self.webkitURL).revokeObjectURL(i)})),e}catch(i){return new Jl("data:text/javascript;base64,"+Hs,{name:null==t?void 0:t.name})}finally{i&&(self.URL||self.webkitURL).revokeObjectURL(i)}}const Ks=at.get("Publish"),Js={mediaStream:null,bandwidth:0,metadata:!1,disableVideo:!1,disableAudio:!1,codec:Je.H264,simulcast:!1,scalabilityMode:null,peerConfig:{autoInitStats:!0,statsIntervalMs:1e3}};function $s(t){if(!t)return new T;const i=t.length,e=new T(i/2);for(let s=0;s<i;s+=2)e[s/2]=C(t.substr(s,2),16);return e}function tn(t,i,e){if(_.prototype.hasOwnProperty.call(t,e)&&_.prototype.hasOwnProperty.call(i,e)){const s=t[e];t[e]=i[e],i[e]=s}else console.error('One or both objects do not have the property "'.concat(e,'"'))}function en(t,i,e,s){return new(e||(e=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,h)}a((s=s.apply(t,i||[])).next())}))}const sn=nn;function nn(t,i){const e=gn();return(nn=function(t,i){return e[t-=257]})(t,i)}var rn;!function(){const t=nn,i=gn();for(;;)try{if(C(t(266))/1*(-C(t(261))/2)+C(t(258))/3*(-C(t(264))/4)+-C(t(267))/5*(C(t(274))/6)+C(t(260))/7*(C(t(268))/8)+C(t(270))/9+-C(t(277))/10+C(t(263))/11==303379)break;i.push(i.shift())}catch(t){i.push(i.shift())}}();const on=Kl&&Kl[sn(276)]||"",hn=Kl&&Kl.vendor||"",an=!(null==s||!s[sn(273)]),un=on[sn(278)](sn(257)),cn=!un&&hn[sn(278)](sn(259)),ln=!un&&!cn&&on.includes(sn(272)),dn=!un&&!cn&&!ln&&on[sn(278)](sn(275)),fn=(null===(rn=null==Kl?void 0:Kl[sn(262)])||void 0===rn?void 0:rn[sn(271)])||(null==Kl?void 0:Kl[sn(271)])||"";function gn(){const t=["2403660vsbxKa","includes","Firefox","653511krAkNS","Apple","63eEorAu","2iQvmqu","userAgentData","13393182jRLBxS","4fTXBZP","Win32","74923SyWRbn","1345hVdNEb","21688LwGppn","Windows","132498ZoOcLo","platform","Edg","RTCRtpScriptTransform","9372dNMWWf","Chrome","userAgent"];return(gn=function(){return t})()}const _n={supportsRtpScriptTransform:an,isFirefox:un,isSafari:cn,isEdge:ln,isChrome:dn,platform:fn,isWindows:fn===sn(269)||fn===sn(265)},vn=wn;function wn(t,i){const e=yn();return(wn=function(t,i){return e[t-=185]})(t,i)}!function(){const t=wn,i=yn();for(;;)try{if(-C(t(380))/1+-C(t(354))/2+-C(t(464))/3*(C(t(486))/4)+-C(t(253))/5+C(t(377))/6+C(t(321))/7*(-C(t(285))/8)+-C(t(444))/9*(-C(t(279))/10)==657542)break;i.push(i.shift())}catch(t){i.push(i.shift())}}();const mn=_n[vn(496)];function pn(t,i){const e=vn;let s=new T((0|t.byteLength)+(0|i[e(442)]));return s[e(311)](t,0),s[e(311)](i,0|t.byteLength),s}const An=(t,i,e,s)=>{const n=vn,r=s[n(203)]||1;i*=r,e*=r;const o=(u=t)instanceof ArrayBuffer?u:u[vn(492)],h=(t[n(447)]||0)+t[n(442)],a=(t[n(447)]||0)+i;var u;let c=x[n(389)](0,x[n(487)](a,h)),l=x[n(487)](c+x[n(389)](e,0),h);return c/=r,l/=r,new s(o,c,l-c)};function yn(){const t=["[MSE] source buffer error","ManagedMediaSource","BYTES_PER_ELEMENT","types","ready","valid","Num frames in chunk: ","readBits","getTrackID","mvhd","parsePPS","encrypted","dependsOn","payload","len","moov","VMHD","mse","volume","h264","setUint16","tfdt","nextDts","avc1.","audioSampleAuxInfo","message","endMSE","width","hdlr","warn","traf","readBoolean","shift","mseReady","revokeObjectURL","smhd","dts","indexOf","<PROTECTINFO>","webkitsourceclose","onMSEClose","[H264Parser] IDR without SPS/PPS, not suitable for recovery",'VALUE="',"createObjectURL","</KID>","mdhd","SMHD","getFramePayload","tkhd","flush","clRtcDrmDebugLog","getBits","2598770DahMdb","dbgQueue","dispatch","DINF","http://schemas.microsoft.com/DRM/2007/03/PlayReadyHeader","isReady","sps","nalus","endOfStream","toString","UNKNOWN","Opus","minf","onError","stco","STSC","buffered","</KIDS>","initSegment","dinf","org.w3.clearkey","mp4track","keyFrame","units","mseEnded","videoSampleAuxInfo","41695210Plpuuo","splice","ended","bitLength","seq","url","8YyaFaO","com.apple.fps","[MSE] error: ","bitsAvailable","</WRMHEADER>","trex","setData","buffer error","slice","length","readUByte","mp4a","Unsupported DRM type ","mdia","fromCharCode",'<WRMHEADER xmlns="',"index","string","both","NDR","dOps","cenc","getPayload","bind","PPS","sourceBuffer","set","Checking codec","releaseBuffer","tenc","trak","flags",'/mp4; codecs="',"[H264Parser] Both IDR and non-IDR VCL NALUs found in the same frame","clRtcDrmCreateMediaDump","STSD","6352549TgZLxu","initBrowser","IDR","trun"," - ","start","mediaSource","startsWith","stype","readSPS","addEventListener","schi","encv","createElement","getVideoFrames","onReady","href","sourceopen","setUint32","vmhd","FTYP","schm","getData","toISOString","remuxer","track","skipScalingList","STSZ","getSize","addSourceBuffer","[MSE] buffer error:","appendBufferError","off","2392886zJoPkf","destroy","sdtp","audiosamplerate",": NRI: ","reportDiscontinuity","extractNALUs","No A/V data","pps","senc","saio","concat","config","ftyp","parseNAL","esds","error","feed","Browser does not support codec","4.3.0.0","skipUEG","mp4","end","2232924PKvVOf","updating","options","227868XbMqAn","prototype","createBuffer","info","MediaSource","timestamp","mvex","isfmb","opus","max","stsz","POSITIVE_INFINITY","saiz","timescale","call","encryption","height","jmuxer","bufferControllers","open","patchSampleAuxinfo","queue","stsd","onBufferError","frameCounter","ntype","remux","getPayloadSize","isSupported","</LA_URL>","waitingForIdr","box","idr"," samples - expected 1","tracks","stbl","getNri",'<KID ALGID="AESCTR" ',"download","readUInt","join","com.microsoft.playready.recommendation",'" version="',"remuxController","Received ","frma","resetTrack","disableRemotePlayback","</DATA>","mfhd","pssh","charCodeAt","drm","mediaDuration","video","readyToDecode","from","SPS","skipLZ","data","keySystem","[MSE] sourceclose","byteLength","STTS","9mESMVl","Buffered range ","samples","byteOffset","parseHeader","codec","node","audio","Failure: Browser doesn't support MSE/MMS","subarray","replaceAll","downloadToFile","onBuffer","skipBits","mdat","isKeyframe","moof","mode","push","STCO","9ffcUcC","listener","isReset","map","enca","type","<LA_URL>","parseSPS","getElementById","no video element were found to render, provide a valid video element","sinf","doAppend","HDLR_TYPES","videoElement","stts","keyId","trackTypes","TYPES","remove","size","AUD","src","1376748eVkTXq","min","tfhd","initialized","offAll","appendBuffer","buffer","nri","skipEG","isvcl","isSafari","isTypeSupported","readyState","abort","apply","reduce","assign","calculateExpectedSizeFromSai","duration","generatePlayReadyHeader","readUEG","onMSEOpen","sampleAuxInfo","SEI","irrecoverableError","channelCount","saiIvSize","stsc"];return(yn=function(){return t})()}function bn(t,i,e){return void 0===i&&(i=0),void 0===e&&(e=1/0),An(t,i,e,T)}function Mn(t){const i=vn,e=Array[i(436)](t)[i(467)]((t=>t[i(431)](0)));return new T(e)}s[vn(455)]=(t,i,e)=>{void 0===e&&(e="application/octet-stream");const s=vn,n=h[s(334)]("a"),r=new Blob([t],{type:e});n[s(337)]=URL[s(244)](r),n[s(418)]=i,n.click(),URL[s(235)](n[s(337)])};class Tn{static get[vn(304)](){return 1}static get[vn(323)](){return 5}static get[vn(196)](){return 6}static get SPS(){return 7}static get PPS(){return 8}static get[vn(484)](){return 9}static get[vn(481)](){const t=vn;return{[Tn[t(323)]]:t(323),[Tn.SEI]:t(196),[Tn.SPS]:t(437),[Tn[t(309)]]:t(309),[Tn[t(304)]]:t(304),[Tn[t(484)]]:t(484)}}static type(t){const i=vn;return t[i(405)]in Tn[i(481)]?Tn[i(481)][t[i(405)]]:i(263)}toString(){const t=vn;return Tn[t(469)](this)+t(358)+this[t(416)]()}getNri(){return this[vn(493)]}[vn(469)](){return this[vn(405)]}[vn(459)](){const t=vn;return this[t(405)]===Tn[t(323)]}[vn(307)](){return this[vn(214)]}[vn(407)](){const t=vn;return this[t(214)][t(442)]}getSize(){return 4+this[vn(407)]()}[vn(343)](){const t=vn,i=new T(this.getSize());return new DataView(i.buffer)[t(339)](0,this.getSize()-4),i[t(311)](this[t(307)](),4),i}constructor(t){const i=vn;this.payload=t,this[i(493)]=(96&this.payload[0])>>5,this[i(405)]=31&this[i(214)][0],this[i(495)]=1==this.ntype||5==this[i(405)],this[i(329)]="",this[i(387)]=!1}}class Sn{[vn(291)](t){const i=vn;this.data=t,this[i(301)]=0,this[i(282)]=8*t[i(442)]}get[vn(288)](){const t=vn;return this[t(282)]-this[t(301)]}skipBits(t){if(this[vn(288)]<t)return!1;this.index+=t}[vn(208)](t,i){return void 0===i&&(i=!0),this.getBits(t,this.index,i)}[vn(252)](t,i,e){void 0===e&&(e=!0);const s=vn;if(this.bitsAvailable<t)return 0;const n=i%8,r=this[s(439)][i/8|0]&255>>>n,o=8-n;if(o>=t)return e&&(this.index+=t),r>>o-t;{e&&(this.index+=o);const n=t-o;return r<<n|this[s(252)](n,i+o,e)}}[vn(438)](){const t=vn;let i;for(i=0;i<this.bitLength-this[t(301)];++i)if(0!==this.getBits(1,this[t(301)]+i,!1))return this.index+=i,i;return i}[vn(374)](){const t=vn;this[t(457)](1+this[t(438)]())}[vn(494)](){const t=vn;this[t(457)](1+this[t(438)]())}readUEG(){const t=vn,i=this[t(438)]();return this[t(208)](i+1)-1}readEG(){const t=this[vn(193)]();return 1&t?1+t>>>1:-1*(t>>>1)}readBoolean(){return 1===this[vn(208)](1)}[vn(295)](t){return void 0===t&&(t=1),this[vn(208)](8*t)}readUShort(){return this[vn(208)](16)}[vn(419)](){return this[vn(208)](32)}constructor(t){const i=vn;this[i(439)]=t,this[i(301)]=0,this.bitLength=8*t[i(442)]}}class Nn{static[vn(360)](t,i){const e=vn;let s=[],n=!1,r=!1,o=!1,h=!1,a=0,u=0,c=0,l=[];for(;a<=t.byteLength;){if(a<t.byteLength){const i=t[a++];0!==i?(1===i&&u>1&&(c=u>2?4:3,l.push(a)),u=0):++u}else c=0,l.push(a++);if(l.length>1){const e=l.shift(),d=l[0]-c;if(e<d){let c=!1;const l=31&t[e];if(l===Tn.NDR?r=!0:l===Tn.IDR?n=!0:l===Tn.SPS?(c=o,o=!0):l===Tn.PPS&&(c=h,h=!0),!c)if(!i||l!==Tn.NDR&&l!==Tn.IDR)s.push(t.subarray(e,d));else{const i=new T(d-e);let n=0;for(a=e,u=0;a<d;){let e=t[a++];u>1&&3===e&&(u=0,e=t[a++]),0!==e?u=0:++u,i[n++]=e}s.push(i.subarray(0,n))}}}}let d=!0,f=!1;return r||n?r&&n&&(console[e(230)](e(318)),d=!1):(console[e(230)]("[H264Parser] No VCL NALUs found"),d=!1),n&&(o&&h?f=!0:console[e(230)](e(242))),{valid:d,idr:f,nalus:s}}static skipScalingList(t,i){let e,s=8,n=8;for(let r=0;r<i;r++)0!==n&&(e=t.readEG(),n=(s+e+256)%256),s=0===n?s:n}static[vn(330)](t){const i=vn;let e,s,n,r,o,h,a=new Sn(t),u=0,c=0,l=0,d=0,f=1;if(a[i(295)](),e=a.readUByte(),a[i(208)](5),a[i(457)](3),a.readUByte(),a[i(374)](),100===e||110===e||122===e||244===e||44===e||83===e||86===e||118===e||128===e){var g=a[i(193)]();if(3===g&&a[i(457)](1),a.skipUEG(),a[i(374)](),a[i(457)](1),a[i(232)]()){h=3!==g?8:12;for(let t=0;t<h;++t)a[i(232)]()&&(t<6?Nn[i(347)](a,16):Nn[i(347)](a,64))}}a[i(374)]();var _=a.readUEG();if(0===_)a[i(193)]();else if(1===_){a.skipBits(1),a[i(494)](),a[i(494)](),s=a[i(193)]();for(let t=0;t<s;++t)a.skipEG()}if(a.skipUEG(),a[i(457)](1),n=a[i(193)](),r=a.readUEG(),o=a[i(208)](1),0===o&&a[i(457)](1),a[i(457)](1),a[i(232)]()&&(u=a[i(193)](),c=a[i(193)](),l=a[i(193)](),d=a.readUEG()),a.readBoolean()){if(a[i(232)]()){let t;switch(a[i(295)]()){case 1:t=[1,1];break;case 2:t=[12,11];break;case 3:t=[10,11];break;case 4:t=[16,11];break;case 5:t=[40,33];break;case 6:t=[24,11];break;case 7:t=[20,11];break;case 8:t=[32,11];break;case 9:t=[80,33];break;case 10:t=[18,11];break;case 11:t=[15,11];break;case 12:t=[64,33];break;case 13:t=[160,99];break;case 14:t=[4,3];break;case 15:t=[3,2];break;case 16:t=[2,1];break;case 255:t=[a[i(295)]()<<8|a.readUByte(),a[i(295)]()<<8|a[i(295)]()]}t&&t[0]>0&&t[1]>0&&(f=t[0]/t[1])}a.readBoolean()&&a[i(457)](1),a[i(232)]()&&(a.skipBits(4),a[i(232)]()&&a[i(457)](24)),a.readBoolean()&&(a.skipUEG(),a[i(374)]()),a.readBoolean()&&(a[i(419)](),a[i(419)](),a.readBoolean())}return{width:x.ceil((16*(n+1)-2*u-2*c)*f),height:(2-o)*(r+1)*16-(o?2:4)*(l+d)}}static[vn(448)](t){const i=vn;let e=new Sn(t[i(307)]());e.readUByte(),t.isfmb=0===e[i(193)](),t.stype=e[i(193)]()}[vn(471)](t){const i=vn;var e=Nn[i(330)](new T(t));this[i(346)][i(228)]=e[i(228)],this[i(346)][i(396)]=e[i(396)],this[i(346)].sps=[new T(t)],this[i(346)][i(449)]=i(224);let s=new DataView(t.buffer,t[i(447)]+1,4);for(let t=0;t<3;++t){var n=s.getUint8(t)[i(262)](16);n.length<2&&(n="0"+n),this.track[i(449)]+=n}}[vn(211)](t){this[vn(346)].pps=[new T(t)]}[vn(368)](t){const i=vn;if(!t)return!1;let e=!1;switch(t.type()){case Tn[i(323)]:case Tn[i(304)]:e=!0;break;case Tn[i(309)]:!this[i(346)][i(362)]&&(this.parsePPS(t[i(307)]()),!this[i(345)][i(435)]&&this[i(346)][i(362)]&&this[i(346)][i(259)]&&(this[i(345)][i(435)]=!0)),e=!0;break;case Tn[i(437)]:!this[i(346)][i(259)]&&(this[i(471)](t[i(307)]()),!this[i(345)][i(435)]&&this[i(346)][i(362)]&&this.track.sps&&(this[i(345)][i(435)]=!0)),e=!0;break;case Tn[i(484)]:break;case Tn[i(196)]:e=!0}return e}constructor(t){const i=vn;this.remuxer=t,this[i(346)]=t[i(274)]}}class In{on(t,i){const e=vn;return!this[e(465)][t]&&(this[e(465)][t]=[]),this[e(465)][t][e(462)](i),!0}[vn(353)](t,i){const e=vn;if(this[e(465)][t]){var s=this.listener[t][e(238)](i);return s>-1&&this[e(465)][t][e(280)](s,1),!0}return!1}[vn(490)](){this[vn(465)]={}}[vn(255)](t,i){const e=vn;return!!this.listener[t]&&(this[e(465)][t][e(467)]((t=>{t[e(187)](null,[i])})),!0)}constructor(t){const i=vn;this[i(465)]={},this[i(469)]=""|t}}class Dn{static[vn(411)](t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];const n=vn;let r,o=8,h=e.length,a=h;for(;h--;)e[h]&&(o+=e[h].byteLength);for(r=new T(o),r[0]=o>>>24,r[1]=o>>>16&255,r[2]=o>>>8&255,r[3]=255&o,r[n(311)](t,4),h=0,o=8;h<a;++h)e[h]&&(r[n(311)](e[h],o),o+=e[h][n(442)]);return r}hdlr(t){const i=vn;return Dn[i(411)](Dn[i(204)][i(229)],Dn[i(476)][t])}mdat(t){const i=vn;return Dn.box(Dn.types[i(458)],t)}[vn(246)](t,i){const e=vn;return Dn.box(Dn[e(204)][e(246)],new T([0,0,0,0,0,0,0,0,0,0,0,0,t>>>24,t>>>16&255,t>>>8&255,255&t,0,0,0,0,85,196,0,0]))}[vn(298)](t){const i=vn;return Dn[i(411)](Dn[i(204)][i(298)],this[i(246)](t[i(393)],t.duration),this[i(229)](t[i(469)]),this[i(265)](t))}[vn(429)](t){const i=vn;return Dn[i(411)](Dn.types[i(429)],new T([0,0,0,0,t>>>24,t>>>16&255,t>>>8&255,255&t]))}[vn(265)](t){const i=vn;return t[i(469)]===i(451)?Dn[i(411)](Dn[i(204)][i(265)],Dn.box(Dn[i(204)][i(236)],Dn[i(247)]),Dn.DINF,this[i(415)](t)):Dn[i(411)](Dn[i(204)][i(265)],Dn[i(256)],this[i(415)](t),Dn[i(411)](Dn[i(204)][i(340)],Dn[i(217)]))}[vn(460)](t,i,e){const s=vn;return Dn[s(411)](Dn[s(204)][s(460)],this[s(429)](t),this.traf(e,i))}moov(t,i,e){const s=vn;let n=t[s(294)],r=[];for(;n--;)r[n]=this[s(315)](t[n]);return Dn[s(411)][s(187)](null,[Dn[s(204)].moov,this[s(210)](e,i),this[s(430)](t)].concat(r)[s(365)](this[s(386)](t)))}mvex(t){const i=vn;let e=t[i(294)],s=[];for(;e--;)s[e]=this[i(290)](t[e]);return Dn.box[i(187)](null,[Dn[i(204)].mvex].concat(s))}[vn(210)](t,i){const e=vn;let s=new T([0,0,0,0,0,0,0,0,0,0,0,0,t>>>24,t>>>16&255,t>>>8&255,255&t,i>>>24,i>>>16&255,i>>>8&255,255&i,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return Dn[e(411)](Dn[e(204)].mvhd,s)}[vn(356)](t){const i=vn;let e=t[i(446)]||[],s=new T(4+e.length);for(let t=0;t<e.length;t++){const n=e[t][i(316)];s[t+4]=n[i(213)]<<4|n.isDependedOn<<2|n.hasRedundancy}return Dn.box(Dn.types.sdtp,s)}[vn(415)](t){const i=vn;return Dn[i(411)](Dn.types[i(415)],this[i(402)](t),Dn.box(Dn.types[i(478)],Dn[i(443)]),Dn.box(Dn.types[i(200)],Dn[i(268)]),Dn[i(411)](Dn[i(204)][i(390)],Dn[i(348)]),Dn[i(411)](Dn[i(204)][i(267)],Dn[i(463)]))}[vn(333)](t){const i=vn;let e,s,n,r=[],o=[];for(e=0;e<t[i(259)][i(294)];e++)s=t[i(259)][e],n=s[i(442)],r.push(n>>>8&255),r[i(462)](255&n),r=r[i(365)](Array[i(381)].slice.call(s));for(e=0;e<t.pps.length;e++)s=t.pps[e],n=s[i(442)],o.push(n>>>8&255),o[i(462)](255&n),o=o[i(365)](Array[i(381)][i(293)][i(394)](s));const h=Dn[i(411)](Dn[i(204)].avcC,new T([1,r[3],r[4],r[5],255,224|t[i(259)][i(294)]][i(365)](r)[i(365)]([t[i(362)].length]).concat(o))),a=t[i(228)],u=t[i(396)],c=Dn[i(411)](Dn[i(204)][i(474)],Dn[i(411)](Dn.types[i(425)],new T([97,118,99,49])),Dn[i(411)](Dn[i(204)][i(342)],new T([0,0,0,0,...Mn(this[i(432)][i(366)].video[i(395)]),0,1,0,0])),Dn[i(411)](Dn[i(204)].schi,this[i(314)]("video")));return Dn[i(411)](Dn[i(204)][i(333)],new T([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,a>>>8&255,255&a,u>>>8&255,255&u,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,65,86,67,32,67,111,100,105,110,103,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]),h,c)}[vn(369)](t){const i=vn;let e=t.config[i(442)],s=new T(26+e+3);return s[i(311)]([0,0,0,0,3,23+e,0,1,0,4,15+e,64,21,0,0,0,0,0,0,0,0,0,0,0,5,e]),s[i(311)](t[i(366)],26),s[i(311)]([6,1,2],26+e),s}[vn(296)](t){const i=vn,e=t.audiosamplerate;return Dn[i(411)](Dn[i(204)][i(296)],new T([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t[i(198)],0,16,0,0,0,0,e>>>8&255,255&e,0,0]),Dn[i(411)](Dn[i(204)][i(369)],this.esds(t)))}dOps(t){const i=vn,e=t[i(357)];return new T([0,t[i(198)],1,56,0,0,e>>>8&255,255&e,0,0,0])}[vn(264)](t){const i=vn,e=t[i(357)];return Dn[i(411)](Dn[i(204)].Opus,new T([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t[i(198)],0,16,0,0,0,0,e>>>8&255,255&e,0,0]),Dn[i(411)](Dn.types[i(305)],this[i(305)](t)))}[vn(468)](t){const i=vn,e=Dn[i(411)](Dn[i(204)].dOps,this[i(305)](t)),s=Dn[i(411)](Dn[i(204)].sinf,Dn[i(411)](Dn[i(204)].frma,new T([79,112,117,115])),Dn[i(411)](Dn[i(204)][i(342)],new T([0,0,0,0,...Mn(this.drm[i(366)].audio[i(395)]),0,1,0,0])),Dn[i(411)](Dn[i(204)][i(332)],this[i(314)](i(451)))),n=t[i(357)];return Dn[i(411)](Dn[i(204)][i(468)],new T([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t[i(198)],0,16,0,0,0,0,n>>>8&255,255&n,0,0]),e,s)}[vn(402)](t){const i=vn;return t[i(469)]===i(451)?Dn.box(Dn[i(204)][i(402)],Dn[i(320)],t[i(212)]?this[i(468)](t):this[i(264)](t)):Dn.box(Dn[i(204)][i(402)],Dn[i(320)],this.encv(t))}[vn(249)](t){const i=vn,e=t.id,s=t[i(191)],n=t.width,r=t[i(396)],o=t[i(219)];return Dn[i(411)](Dn[i(204)][i(249)],new T([0,0,0,7,0,0,0,0,0,0,0,0,e>>>24,e>>>16&255,e>>>8&255,255&e,0,0,0,0,s>>>24,s>>>16&255,s>>>8&255,255&s,0,0,0,0,0,0,0,0,0,0,0,0,255&o,o%1*10&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,n>>>8&255,255&n,0,0,r>>>8&255,255&r,0,0]))}[vn(231)](t,i){var e;const s=vn,n=t.id,r=t[s(446)][0][s(483)],o=t[s(446)][0][s(191)],h=t[s(446)][0].flags,a=Dn[s(411)](Dn[s(204)][s(488)],new T([0,2,0,58,n>>>24,n>>>16&255,n>>>8&255,255&n,0,0,0,1,o>>>24,n>>>16&255,o>>>8&255,255&o,r>>>24,r>>>16&255,r>>>8&255,255&r,0,h.isNonSync,0,0])),u=Dn[s(411)](Dn[s(204)][s(222)],new T([0,0,0,0,i>>>24,i>>>16&255,i>>>8&255,255&i]));if(t[s(212)]){let i,n;if(t[s(469)]===s(434)?(i=!0,n=this[s(199)][s(434)]+(null==(e=t[s(446)][0].sampleAuxInfo)?void 0:e.byteLength)):(i=!1,n=this[s(199)][s(451)]),n>0){const e=this[s(392)](n),r=this[s(363)](t[s(446)],i),o=e.length+20+r.length+a[s(294)]+u[s(294)]+8+16+8+8,h=this[s(324)](t,o);return Dn[s(411)](Dn[s(204)][s(231)],a,u,h,e,this[s(364)](o-r[s(294)]+h[s(294)]+8),r)}{const i=this[s(363)](null,!1),e=i[s(294)]+a[s(294)]+u.length+8+16+8+8,n=this[s(324)](t,e);return Dn[s(411)](Dn[s(204)][s(231)],a,u,n,i)}}return Dn.box(Dn.types.traf,a,u,this[s(324)](t,a[s(294)]+u[s(294)]+8+16+8+8))}[vn(315)](t){const i=vn;return t[i(191)]=t[i(191)]||4294967295,Dn.box(Dn[i(204)][i(315)],this[i(249)](t),this[i(298)](t))}trex(t){const i=vn,e=t.id;return Dn[i(411)](Dn[i(204)][i(290)],new T([0,0,0,0,e>>>24,e>>>16&255,e>>>8&255,255&e,0,0,0,1,0,0,0,16,0,0,0,0,0,0,0,0]))}trun(t,i){const e=vn;let s=(t.samples||[]).length,n=new T(12);return i+=20,n[e(311)]([0,0,0,1,s>>>24,s>>>16&255,s>>>8&255,255&s,i>>>24,i>>>16&255,i>>>8&255,255&i],0),Dn.box(Dn.types[e(324)],n)}[vn(192)](t,i){const e=vn,s=e(373),n=e(257),r=function(t){const i=function(t){const i=vn;let e="";for(let s=0;s<t.length;s+=16e3){const n=t[i(453)](s,s+16e3);e+=String[i(299)][i(187)](null,n)}return e}(bn(t));return btoa(i)}(function(t){const i=vn,e=[];return e[i(462)](t[3]),e[i(462)](t[2]),e[i(462)](t[1]),e[i(462)](t[0]),e.push(t[5]),e.push(t[4]),e.push(t[7]),e.push(t[6]),(t=bn(t))[i(311)](e,0),t}(t));return bn(function(t,i){const e=vn,s=new T(2*t.length),n=new DataView(s[e(492)]);for(let i=0;i<t[e(294)];++i){const s=t[e(431)](i);n[e(221)](2*i,s,!0)}return s[e(492)]}([e(300)+n+e(422)+s+'">',"<DATA>",e(239),"<KIDS>",e(417),e(243)+r+'"',">",e(245),e(270),"</PROTECTINFO>",i?e(470)+i+e(409):"",e(428),e(289)][e(420)]("")))}[vn(430)](t){const i=vn;if(this[i(432)][i(440)][i(328)]("com.widevine"))return Dn[i(411)](Dn[i(204)][i(430)],new T([0,0,0,0,237,239,139,169,121,214,74,206,163,200,39,220,213,29,33,237,0,0,0,18,18,16,...this[i(432)][i(366)][t[0][i(469)]][i(479)]]));if(this[i(432)].keySystem===i(421)){const e=this[i(192)](this[i(432)][i(366)][t[0].type][i(479)],this.drm.licenseUrl),s=e[i(442)];return Dn[i(411)](Dn[i(204)][i(430)],new T([0,0,0,0,154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149,s>>>24,s>>>16&255,s>>>8&255,255&s,...e]))}return this[i(432)][i(440)]===i(273)?Dn[i(411)](Dn[i(204)][i(430)],new T([1,0,0,0,16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75,0,0,0,1,...this.drm.config[t[0][i(469)]][i(479)],0,0,0,0])):this[i(432)][i(440)]===i(286)?null:void console[i(370)](i(297)+this[i(432)].keySystem)}[vn(314)](t){const i=vn;let e,s,n=this[i(432)][i(366)][t];return"cbcs"===n.encryption?(e=new T([16,...n.iv]),s=25):(e=new T([]),s=0),Dn[i(411)](Dn[i(204)].tenc,new T([1,0,0,0,0,s,1,this[i(199)][t],...n[i(479)],...e]))}[vn(392)](t){return Dn[vn(411)](Dn.types.saiz,new T([0,0,0,0,t,0,0,0,1]))}[vn(364)](t){const i=vn;return Dn[i(411)](Dn[i(204)][i(364)],new T([0,0,0,0,0,0,0,1,t>>>24,t>>>16&255,t>>>8&255,255&t]))}[vn(363)](t,i){const e=vn;let s=null;return t&&(1!==t[e(294)]&&console[e(370)](e(424)+t[e(294)]+e(413)),s=t[0][e(195)]),s&&s[e(442)]?Dn[e(411)](Dn[e(204)][e(363)],new T([0,0,0,i?2:0,0,0,0,1,...s])):Dn[e(411)](Dn[e(204)][e(363)],new T([0,0,0,0,0,0,0,1]))}[vn(271)](t,i,e){const s=vn,n=this[s(216)](t,i,e);let r=new T(Dn[s(341)][s(442)]+n.byteLength);return r.set(Dn[s(341)]),r[s(311)](n,Dn[s(341)].byteLength),r}constructor(t){var i,e;const s=vn;this[s(432)]=t,this[s(199)]={video:(null==(i=t[s(366)][s(434)])?void 0:i.encryption)===s(306)?16:0,audio:(null==(e=t[s(366)][s(451)])?void 0:e.encryption)===s(306)?16:0},Dn.types={avc1:[],encv:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],Opus:[],dOps:[],enca:[],mvex:[],mvhd:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[],pssh:[],sinf:[],frma:[],schm:[],schi:[],tenc:[],saiz:[],saio:[],senc:[]};for(let t in Dn[s(204)])Dn[s(204)][t]=[t[s(431)](0),t[s(431)](1),t.charCodeAt(2),t[s(431)](3)];const n=new T([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),r=new T([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);Dn[s(476)]={video:n,audio:r};const o=new T([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),h=new T([0,0,0,0,0,0,0,0]);Dn[s(443)]=Dn[s(268)]=Dn[s(463)]=h,Dn[s(348)]=new T([0,0,0,0,0,0,0,0,0,0,0,0]),Dn[s(217)]=new T([0,0,0,1,0,0,0,0,0,0,0,0]),Dn.SMHD=new T([0,0,0,0,0,0,0,0]),Dn[s(320)]=new T([0,0,0,0,0,0,0,1]);const a=new T([105,115,111,109]),u=new T([97,118,99,49]),c=new T([0,0,0,1]);Dn[s(341)]=Dn[s(411)](Dn[s(204)][s(367)],a,c,a,u),Dn.DINF=Dn[s(411)](Dn[s(204)][s(272)],Dn[s(411)](Dn[s(204)].dref,o))}}let En=1;class kn{static[vn(209)](){return En++}[vn(250)](){const t=vn;this[t(274)][t(215)]=0,this.mp4track[t(446)]=[]}[vn(258)](){const t=vn;return!(!this.readyToDecode||!this[t(446)][t(294)])}constructor(){this[vn(283)]=1}}class xn extends kn{resetTrack(){const t=vn;this[t(283)]=1,this[t(223)]=0,this[t(237)]=0}[vn(406)](t,i,e){const s=vn;if(t.length>0)for(let n=0;n<t[s(294)];n++){let r=t[n],o=r[s(276)],h=o[s(442)];this.samples.push({units:o,size:h,duration:r.duration,sampleAuxInfo:i,timestamp:e}),this[s(274)][s(215)]+=h}}[vn(248)](){const t=vn;if(!this[t(446)])return null;let i,e=this[t(274)][t(446)];for(;this.samples[t(294)];){let s=this[t(446)][t(233)](),n=(1e3*s[t(385)]|0)-this.nextDts|0;n<5&&(n=5),this.dts=this.nextDts,this[t(223)]+=n,i={size:s.size,duration:n,cts:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1},sampleAuxInfo:s[t(195)]};let r=new T(s.size);return r[t(311)](s.units,0),e.push(i),new T(r.buffer,0,s[t(483)])}return null}constructor(t){const i=vn;super(),this[i(435)]=!0,this[i(223)]=0,this[i(237)]=0,this[i(274)]={id:kn[i(209)](),type:"audio",channelCount:2,audiosamplerate:48e3,len:0,fragmented:!0,timescale:t,duration:t,samples:[],codec:i(388),encrypted:!0},this[i(446)]=[]}}class Ln extends kn{[vn(426)](){const t=vn;this[t(283)]=1,this.readyToDecode=!1,this[t(274)].sps="",this[t(274)][t(362)]="",this[t(223)]=0,this[t(237)]=0}[vn(406)](t,i,e){const s=vn;for(let n of t){let t=[],r=0;for(let i of n[s(276)])this.h264[s(368)](i)&&(t[s(462)](i),r+=i.getSize());t[s(294)]>0&&this[s(435)]&&(this[s(274)][s(215)]+=r,this[s(446)][s(462)]({units:t,size:r,keyFrame:n.keyFrame,duration:n[s(191)],sampleAuxInfo:i,timestamp:e}))}}[vn(248)](){const t=vn;if(!this[t(258)]()||!this.samples)return null;let i,e=this[t(274)][t(446)],n=this.samples[t(233)](),r=n[t(276)],o=(1e3*n.timestamp|0)-this[t(223)]|0;o<5&&(o=5),s[t(251)]&&o>5e3&&console[t(383)]("timestamp gap: "+(o/1e3|0)+" s"),this[t(237)]=this[t(223)],this.nextDts+=o,i={size:n[t(483)],duration:o,cts:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,isNonSync:n[t(275)]?0:1,dependsOn:n.keyFrame?2:1},sampleAuxInfo:n[t(195)]};let h=0;for(const i of r)h+=i[t(349)]();let a=0,u=new T(h);for(const i of r)u[t(311)](i[t(343)](),a),a+=i[t(349)]();return e[t(462)](i),new T(u[t(492)],0,h)}constructor(t,i){const e=vn;super(),this[e(435)]=!1,this.nextDts=0,this[e(237)]=0,this[e(477)]=i,this.mp4track={id:kn[e(209)](),type:e(434),len:0,fragmented:!0,sps:"",pps:"",width:0,height:0,timescale:t,duration:t,samples:[],encrypted:!0},this[e(446)]=[],this[e(220)]=new Nn(this)}}class Cn extends In{addTrack(t){const i=vn;(t===i(434)||"both"===t)&&(this[i(414)][i(434)]=new Ln(this[i(393)],this.videoElement),this[i(480)][i(462)](i(434))),(t===i(451)||t===i(303))&&(this[i(414)][i(451)]=new xn(this.timescale),this[i(480)][i(462)](i(451)))}reset(){const t=vn;for(let i of this[t(480)])this[t(414)][i][t(426)]();this[t(489)]=!1}[vn(355)](){const t=vn;this[t(414)]={},this[t(490)]()}[vn(250)](){const t=vn;if(this[t(489)])for(let i of this[t(480)]){let e=this[t(414)][i];for(;;){let s=e.getFramePayload();if(!s||!s[t(442)])break;let n={type:i,payload:pn(this[t(375)][t(460)](e[t(283)]++,e[t(237)],e[t(274)]),this[t(375)][t(458)](s)),dts:e[t(237)]};this[t(255)](t(492),n),e[t(250)]()}}else this[t(258)]()&&(this[t(255)](t(205)),this[t(271)](),this[t(489)]=!0,this[t(250)]())}initSegment(){const t=vn;for(let i of this[t(480)]){let e=this[t(414)][i],s={type:i,payload:this[t(375)][t(271)]([e[t(274)]],this[t(433)],this[t(393)])};this.dispatch(t(492),s)}}isReady(){const t=vn;for(let i of this.trackTypes)if(!this[t(414)][i][t(435)]||!this[t(414)][i].samples[t(294)])return!1;return!0}[vn(406)](t){const i=vn;for(let e of this[i(480)]){let s=t[e];s.length>0&&this[i(414)][e][i(406)](s,e===i(451)?t[i(225)]:t.videoSampleAuxInfo,t[i(385)])}this.flush()}constructor(t,i){const e=vn;super(e(345)),this.initialized=!1,this.trackTypes=[],this[e(414)]={},this[e(393)]=1e3,this.mediaDuration=0,this[e(477)]=t,this[e(375)]=i}}class jn extends In{[vn(355)](){const t=vn;this[t(401)]=null,this[t(254)]=null;try{this.sourceBuffer&&(this[t(310)][t(186)](),this[t(218)].removeSourceBuffer(this[t(310)]),this[t(310)]=null)}catch(t){}this.offAll()}[vn(475)](){const t=vn;if(this.queue[t(294)]&&this[t(310)]&&!this[t(310)].updating){if(this[t(310)].buffered[t(294)]>1){for(let i=0;i<this[t(310)].buffered[t(294)];++i){const e=i<this[t(310)].buffered[t(294)]-1;s[t(251)]&&console[t(383)](t(445)+i+(e?" (remove)":"")+": "+this[t(310)][t(269)][t(326)](i)+t(325)+this[t(310)][t(269)][t(376)](i)),e&&this.sourceBuffer[t(482)](this[t(310)][t(269)].start(i),this[t(310)].buffered[t(376)](i))}if(this.sourceBuffer[t(378)])return}try{this[t(310)][t(491)](this[t(401)]),this.queue=new T}catch(i){this[t(255)](t(370),{type:this[t(469)],name:t(352),error:i})}}}[vn(371)](t){const i=vn;if(this[i(254)]&&(this.dbgQueue=pn(this[i(254)],t),100==++this[i(404)])){const t=(new Date)[i(344)]().substring(0,19)[i(454)](":","-"),e=this.type+"-"+t+".mp4";s.downloadToFile(this[i(254)],e),this[i(254)]=null}this[i(197)]||(this[i(401)]=pn(this[i(401)],t)),this.doAppend()}constructor(t,i,e){const n=vn;super(n(492)),this[n(469)]=i,this.queue=new T,s[n(319)]&&(this[n(254)]=new T,this[n(404)]=0),this.sourceBuffer=t,this[n(218)]=e,this[n(197)]=!1,this[n(310)].addEventListener(n(370),(t=>{const i=n;console.warn(i(201),t,this.type),this[i(197)]=!0,this[i(255)](i(370),{type:this[i(469)],name:"buffer",error:i(292)})}))}}class On extends In{static isSupported(t){const i=vn;return s[i(202)]?s.ManagedMediaSource[i(497)](t):!!s[i(384)]&&s.MediaSource[i(497)](t)}[vn(322)](){const t=vn;typeof this.options.node===t(302)&&""==this.options[t(450)]&&console[t(370)](t(473)),this[t(234)]=!1,this.setupMSE()}setupMSE(){const t=vn;if(!s[t(202)]&&!s[t(384)])throw t(452);s.ManagedMediaSource?(this.node[t(427)]=!0,this[t(327)]=new ManagedMediaSource):this[t(327)]=new MediaSource,this[t(284)]=URL[t(244)](this[t(327)]),this.node[t(485)]=this[t(284)],this[t(277)]=!1,this[t(327)][t(331)](t(338),this.onMSEOpen[t(308)](this)),this.mediaSource.addEventListener("sourceclose",this[t(241)][t(308)](this)),this[t(327)][t(331)]("webkitsourceopen",this[t(194)][t(308)](this)),this.mediaSource[t(331)](t(240),this[t(241)].bind(this)),this[t(327)][t(331)]("error",(function(i){const e=t;console[e(370)](e(287),i[e(226)])}))}[vn(227)](){const t=vn;if(!this[t(277)])try{this.mseEnded=!0,this[t(327)][t(185)]===t(399)&&this[t(327)][t(261)]()}catch(i){console[t(370)]("mediasource is not available to end: ",i)}}[vn(359)](){this[vn(410)]=!0}[vn(371)](t){const i=vn;let e={video:[],audio:[]};if(this[i(197)]||this[i(277)]||!t||!this[i(423)])return-1;if(t[i(434)]){e.timestamp=t.timestamp;const s=this[i(190)](t.videoSampleAuxInfo,this.mp4[i(199)][i(434)]),n=s!=t[i(434)][i(442)];let r=Nn[i(360)](t[i(434)],n);if(!r[i(206)]||r[i(260)].length<1)return 0;if(this.waitingForIdr){if(!r[i(412)])return 0;this[i(410)]=!1}if(!mn&&t[i(278)]){const e=r[i(260)][i(188)](((t,e)=>t+4+e[i(442)]),0);e!==s&&this[i(400)](t[i(278)],this.mp4[i(199)][i(434)],e-s)}e[i(434)]=this[i(335)](r[i(260)]),e[i(278)]=t[i(278)]}return t[i(451)]&&(e[i(385)]=t[i(385)],e[i(451)]=[{units:t.audio}],e.audioSampleAuxInfo=t[i(225)]),t[i(434)]||t[i(451)]?(this[i(423)][i(406)](e),0):(console.error(i(361)),0)}[vn(335)](t){const i=vn;let e=[],s=[],n=!1,r=!1;for(let o of t){let t=new Tn(o);t.type()!==Tn.IDR&&t[i(469)]()!==Tn.NDR||Nn[i(448)](t),e[i(294)]&&r&&(t[i(387)]||!t[i(495)])&&(s[i(462)]({units:e,keyFrame:n}),e=[],n=!1,r=!1),e[i(462)](t),n=n||t[i(459)](),r=r||t[i(495)]}if(e[i(294)])if(r)s[i(462)]({units:e,keyFrame:n});else{let t=s[i(294)]-1;t>=0&&(s[t].units=s[t][i(276)].concat(e))}return 1!==s[i(294)]&&console[i(230)](i(207)+s[i(294)]),s}[vn(190)](t,i){const e=vn;if(!t)return 0;const s=(t[0]<<8)+t[1],n=i+2+4;let r=0,o=2;for(;0<s&&o+n<=t[e(442)];){o+=i;const e=(t[o]<<8)+t[o+1],s=(t[o+2]<<24)+(t[o+3]<<16)+(t[o+4]<<8)+t[o+5];o+=6,r+=e+s}return r}patchSampleAuxinfo(t,i,e){const s=vn;let n=2;if(0<(t[0]<<8)+t[1]&&n+(i+2+4)<=t[s(442)]){n+=i;let s=(t[n]<<8)+t[n+1];s+=e,s>=0&&(t[n]=s>>>8&255,t[n+1]=255&s)}return 0}[vn(382)](){const t=vn;if(this[t(234)]&&this[t(423)]&&this[t(423)].isReady()&&!this.bufferControllers){this.bufferControllers={};for(let i in this[t(423)][t(414)]){let e=this[t(423)][t(414)][i];const n="".concat(i,t(317))[t(365)](e[t(274)][t(449)],'"');if(s.clRtcDrmDebugLog&&console[t(383)](t(312),n),!On[t(408)](n))return console[t(370)](t(372)),!1;let r=this[t(327)][t(350)](n);this[t(398)][i]=new jn(r,i,this[t(327)]),this.bufferControllers[i].on(t(370),this[t(403)][t(308)](this))}}}[vn(313)](){const t=vn;for(let i in this[t(398)])this[t(398)][i].doAppend()}onBuffer(t){const i=vn;this[i(234)]&&this[i(398)]&&this[i(398)][t.type]&&this[i(398)][t[i(469)]][i(371)](t[i(214)])}[vn(194)](){const t=vn;s[t(251)]&&console.info("[MSE] sourceopen"),this[t(327)][t(185)]!==t(281)&&(this.mediaSource.duration=Number[t(391)],this[t(234)]=!0,"function"==typeof this[t(379)][t(336)]&&this[t(379)].onReady[t(394)](null,this[t(466)]),URL[t(235)](this.url),this[t(382)]())}[vn(241)](){const t=vn;s.clRtcDrmDebugLog&&console[t(383)](t(441)),this.mseReady=!1,this[t(227)]()}[vn(403)](t){const i=vn;console.warn(i(351),t),this.irrecoverableError=!0,this[i(227)](),"function"==typeof this[i(379)][i(266)]&&this[i(379)][i(266)][i(394)](null,t)}constructor(t){const i=vn;super(i(397)),this[i(197)]=!1,this[i(410)]=!0,this[i(466)]=!1,this[i(234)]=!1,this.mseEnded=!1,this[i(379)]=_[i(189)]({},{node:"",mode:"video",debug:!1,onReady:function(){},onError:function(t){}},t),this[i(450)]=typeof this.options[i(450)]===i(302)?h[i(472)](this.options.node):this[i(379)].node,this[i(432)]=t.drm,this.mp4=new Dn(this.drm),this[i(423)]=new Cn(this.node,this[i(375)]),this[i(423)].addTrack(this[i(379)][i(461)]),this[i(423)].on(i(492),this[i(456)].bind(this)),this[i(423)].on(i(205),this[i(382)][i(308)](this)),this.initBrowser()}}function Rn(t,i){const e=Pn();return(Rn=function(t,i){return e[t-=222]})(t,i)}function Pn(){const t=["jw","1634635aeNfVS","4rWkceo","1051qHPzyB","314juHkBI","7752096GfpyFE","1023208nKrJjX","2137269uUqtNM","303058KNxeBb","1097196nHglzA"];return(Pn=function(){return t})()}!function(){const t=Rn,i=Pn();for(;;)try{if(C(t(228))/1*(-C(t(229))/2)+-C(t(222))/3*(C(t(227))/4)+C(t(226))/5+C(t(224))/6+C(t(223))/7+-C(t(231))/8+C(t(230))/9==409100)break;i.push(i.shift())}catch(t){i.push(i.shift())}}();const zn=Bn;function Bn(t,i){const e=Yn();return(Bn=function(t,i){return e[t-=460]})(t,i)}!function(){const t=Bn,i=Yn();for(;;)try{if(-C(t(471))/1*(-C(t(474))/2)+C(t(479))/3+C(t(473))/4*(C(t(461))/5)+C(t(487))/6+-C(t(467))/7+-C(t(482))/8+-C(t(464))/9==139726)break;i.push(i.shift())}catch(t){i.push(i.shift())}}();const Un="CrsCCAMSEKDc0WAwLAQT1SB2ogyBJEwYv4Tx7gUijgIwggEKAoIBAQC8Xc/GTRwZDtlnBThq8"+zn(462)+"wyoYOE+M/t1oIbccwlTQ7o+BpV1X6TB7fxFyx1jsBtRsBWphU65w121zqmSiwzZzJ4xsXVQCJ"+zn(460)+zn(476)+zn(480)+zn(484)+zn(485)+"7hyskG5ZLAyJMzTvgnV3D8/I5Y6mCFBPb/+/Ri+9bEvquPF3Ff9ip3yEHu9mcQeEYCeGe9zR/27eI5MATX39gYtCnn7dDXVxo4/rCYK0A4VemC3HRai2X3pSGcsKY7+6we7h4IycjqtuGtYg8A"+zn(475)+"RL9KsD0v7ysBQVdUXEbJotcFz71tI5qc3jwr6GjYIPA3VzusD17PN6AGQniMwxJV12z/EgnUo"+zn(477),Qn=T[zn(478)](s[zn(470)](Un),(t=>t.charCodeAt(0)));class Fn{[zn(469)](){return this[zn(488)]}[zn(483)](){const t=zn;switch(this[t(488)]){case t(489):return"https://lic.staging.drmtoday.com";case t(465):return t(481);default:return t(466)}}certificate(){return Qn}constructor(t){this[zn(488)]=t}}function Yn(){const t=["development","https://lic.drmtoday.com","462553oMrSQp","Staging","toString","atob","20047HjYCpd","Development","52chMPdC","6mbMcSk","baigovcoURAZcr1d/G0rpREjLdVLG0Gjqk63Gx688W5gh3TKemsK3R1jV0dOfj3e6uV/kTpsN","+vwmV2/NJWxKqHBKdL9JqvOnNiQUF0hDI7Wf8Wb63RYSXKE27Ky31hKgx1wuq7TTWkA+kHnJT","pcFB13osydpD2AaDsgWo5RWJcNf+fzCgtUQx/0Au9+xVm5LQBdv8Ja4f2oiHN3dw","from","146355HhTpSB","UrTEfQxfPR4dJTquE+IDLAi5yeVVxzbAgMBAAE6DGNhc3RsYWJzLmNvbUABEoADMmGXpXg/0q","https://lic.test.drmtoday.com","501688OkVRMl","baseUrl","xUuwokpsqVIHZrJfu62ar+BF8UVUKdK5oYQoiTZd9OzK3kr29kqGGk3lSgM0/p499p/FUL8oH","HzgsJ7Hajdsyzn0Vs3+VysAgaJAkXZ+k+N6Ka0WBiZlCtcunVJDiHQbz1sF9GvcePUUi2fM/h","Production","1063410zFUyaf","name","staging","pQnNI61gzHO42XZOMuxytMm0F6puNHTTqhyY3Z290YqvSDdOB+UY5QJuXJgjhvOUD9+oaLlvT","93365ZJpndd","V382D1oJAM0F/YgCQtNDLz7vTWJ+QskNGi5Dd2qzO4s48Cnx5BLvL4H0xCRSw2Ed6ekHSdrRU","production","2343546YgIYCY"];return(Yn=function(){return t})()}function Vn(t,i){const e=Gn();return(Vn=function(t,i){return e[t-=325]})(t,i)}function Gn(){const t=["1052499bnJBHn","cenc","4222tSxFth","Unsupported SampleAuxInfo version","12980Tusgux","3160ZwXFcU","40030ewyARR","16lkTHRT","1199124lbwxEr","data","105TSrukA","getUint8","12bBEpge","SampleAuxInfo corrupted (postfix not found)","getUint16","error","85265ZYYyUv","buffer","3616548TKdsLX","subarray","byteLength","SampleAuxInfo corrupted"];return(Gn=function(){return t})()}function Wn(t,i){const e=qn();return(Wn=function(t,i){return e[t-=295]})(t,i)}Fn[zn(468)]=new Fn(zn(489)),Fn[zn(486)]=new Fn(zn(463)),Fn[zn(472)]=new Fn(zn(465)),function(){const t=Vn,i=Gn();for(;;)try{if(C(t(328))/1+-C(t(332))/2*(-C(t(336))/3)+-C(t(338))/4*(-C(t(342))/5)+-C(t(344))/6+-C(t(326))/7*(C(t(333))/8)+C(t(334))/9+C(t(331))/10*(C(t(330))/11)==358550)break;i.push(i.shift())}catch(t){i.push(i.shift())}}(),function(){const t=Wn,i=qn();for(;;)try{if(C(t(305))/1*(-C(t(297))/2)+-C(t(295))/3+C(t(310))/4*(C(t(309))/5)+-C(t(304))/6*(C(t(296))/7)+C(t(307))/8*(-C(t(298))/9)+-C(t(301))/10*(C(t(302))/11)+-C(t(300))/12*(-C(t(308))/13)==178039)break;i.push(i.shift())}catch(t){i.push(i.shift())}}();const Zn=[];let Hn=null,Xn=0;function qn(){const t=["31476hbBsvr","850RxzAPl","4180KczaCN","push","156MUFuvQ","96571jvhWaB","buffer","26232BkewNd","4303YGAqiP","5yhGpFn","1137036pzCnTd","1035942NcoZLh","94073eTaQjy","2bXtEms","414snfiTE","slice"];return(qn=function(){return t})()}const Kn=er;function Jn(){const t=["Data does not seem to be UTF-16 encoded!","No init data available!","getElementsByTagName","min","14BFNrBA","keystatuseschange","catch","childNodes","internal-error","Failed to reuse previous EME session: ","output-downscaled","expired","bind","5576688EKOFOG","has","length","License acquisition failed with error ","arrayBuffer","apply","CDM error generating license request: ","<Challenge","No PR challenge data!","then","license","createSession","warn","[PR] License fetched:","text/xml","clRtcDrmDebugLog","push","encode","max","json"," is not ","replace","target","rtcdrmerror","update","fromCharCode","subarray","2993694njpqat","4002692oINhTV","Content-Type","1347492MkzfDC","Data has an incorrect length, must be even.","addEventListener","buffer","onFetch","generateRequest","initData","dispatchEvent","atob","No clear key test key provided!","Challenge","New lic will be requested","oct","BYTES_PER_ELEMENT","sessionId","usable for decryption (status: ","[WV] License fetched:","Key ","5MtuOVr","byteLength","744563CKOUzg","load","floor","error","decode","indexOf","info","isSafari","edef8ba979d64acea3c827dcd51d21ed","mediaKeys","Previous lic will be reused","charCodeAt","licenseUrl","status","Failed to update the session: ","log","keyStatuses","temporary","9a04f07998404286ab92e65be0885f95","output-restricted","nodeValue","btoa","message","EME createSession() failed - no DRM available","5977680uUTwUr","getUint16","[PR] Challenge node not found","A128KW","3974463jrELhf","Failed to update the session","stringify","[EME]","delete","No media keys for media element!","set","2nMQfRz"];return(Jn=function(){return t})()}!function(){const t=er,i=Jn();for(;;)try{if(-C(t(419))/1*(C(t(454))/2)+C(t(495))/3+C(t(496))/4*(-C(t(417))/5)+-C(t(498))/6*(-C(t(459))/7)+C(t(468))/8+-C(t(447))/9+C(t(443))/10==555073)break;i.push(i.shift())}catch(t){i.push(i.shift())}}();let $n={licenseUrl:"",onFetch:void 0};const tr={},ir=(t,i,e)=>(void 0===i&&(i=0),void 0===e&&(e=1/0),((t,i,e)=>{const s=er,n=T[s(511)];i*=n,e*=n;const r=(a=t)instanceof ArrayBuffer?a:a[er(501)],o=t[s(418)],h=i;var a;let u=x[s(486)](0,x[s(458)](h,o)),c=x[s(458)](u+x[s(486)](e,0),o);return u/=n,c/=n,new T(r,u,c-u)})(t,i,e));function er(t,i){const e=Jn();return(er=function(t,i){return e[t-=417]})(t,i)}const sr=t=>{const i=er;let e="";for(const s of t){let t=s.toString(16);1==t[i(470)]&&(t="0"+t),e+=t}return e};let nr=null;const rr=t=>{const i=er;return s[i(440)](String[i(493)][i(473)](null,t))[i(489)](/\+/g,"-")[i(489)](/\//g,"_")[i(489)](/=*$/,"")},or=(t,i)=>{const e=er,s=(t=>{const i=er,e=JSON.parse((new TextDecoder)[i(423)](t));if(console[i(434)]("CK license request:",e),null===nr)throw new b(i(507));const s=[];for(const t of e.kids){const e={kty:i(510),alg:i(446),kid:t,k:rr(nr)};s[i(484)](e)}return(new TextEncoder)[i(485)](JSON[i(449)]({keys:s}))})(i.message);i[e(490)][e(492)](s)[e(461)]((function(t){const i=e;console[i(422)](i(448),t)}))},hr=t=>{const i=er,e=s[i(506)](t[i(489)](/-/g,"+")[i(489)](/_/g,"/")),n=new T(e[i(470)]);for(let t=0;t<e.length;++t)n[t]=e[i(430)](t);return n},ar=function(t,i){for(var e=arguments.length,s=new Array(e>2?e-2:0),n=2;n<e;n++)s[n-2]=arguments[n];return en(void 0,[t,i,...s],void 0,(function*(t,i,e){void 0===e&&(e=!1);const s=er,n=new Headers(tr);e&&n.append(s(497),s(482));const r={method:"POST",headers:n,body:i},o=yield $n[s(502)]?$n[s(502)](t,r):fetch(t,r);if(!o.ok)throw new b(s(471)+o[s(432)]);return o}))},ur=(t,i)=>{const e=er;ar($n[e(431)],i[e(441)])[e(477)]((t=>t[e(487)]()))[e(477)]((t=>{const n=e;s[n(483)]&&console.info(n(514),t.license);const r=hr(t[n(478)])[n(501)];i[n(490)][n(492)](r)[n(461)]((t=>{console[n(422)]("Failed to update the session",t)}))}))[e(461)]((i=>{const s=e;t.dispatchEvent(new CustomEvent(s(491),{detail:{message:""+i}})),console[s(422)](i)}))},cr=(t,i)=>{const e=er,n=((t,i)=>{const e=er,s=new DOMParser;try{const t=function(t,i,e){void 0===e&&(e=!1);const s=er;if(!t)return"";let n=t;if(!e&&n.byteLength%2!=0)throw console[s(422)](s(499)),new b(s(455));const r=ir(n);let o;if((255===r[0]&&254===r[1]||254===r[0]&&255===r[1])&&(n=r[s(494)](2)),n instanceof ArrayBuffer)o=n;else{const t=new T(n[s(418)]);t[s(453)](ir(n)),o=t[s(501)]}const h=x[s(421)](n.byteLength/2),a=new Uint16Array(h),u=new DataView(o);for(let t=0;t<h;t++)a[t]=u[s(444)](2*t,i);return function(t){const i=er;let e="";for(let s=0;s<t[i(470)];s+=16e3){const n=t[i(494)](s,s+16e3);e+=String[i(493)].apply(null,n)}return e}(a)}(i,!0);if(t[e(424)](e(475))>-1){const i=s.parseFromString(t,e(482))[e(457)](e(508))[0][e(462)][0][e(439)];if(null===i)throw new b("No PR challenge data!");return hr(i)}console[e(480)](e(445))}catch(i){t.dispatchEvent(new CustomEvent(e(491),{detail:{message:""+i}})),console.error(i)}return null})(t,i.message);if(null===n)return t[e(505)](new CustomEvent("rtcdrmerror",{detail:{message:"No PR challenge data!"}})),void console.error(e(476));ar($n[e(431)],n[e(501)],!0)[e(477)]((t=>t[e(472)]()))[e(477)]((n=>{const r=e;s[r(483)]&&console[r(425)](r(481),n),i[r(490)].update(n)[r(461)]((function(i){const e=r;t[e(505)](new CustomEvent(e(491),{detail:{message:e(433)+i}})),console[e(422)](e(448),i)}))}))[e(461)]((i=>{const s=e;t.dispatchEvent(new CustomEvent("rtcdrmerror",{detail:{message:""+i}})),console[s(422)](i)}))},lr=(t,i)=>{const e=er;ar($n[e(431)],i[e(441)])[e(477)]((t=>{const i=e,n=t.text();return s[i(483)]&&console.info("[FPS] License fetched:",t,n),n}))[e(477)]((t=>{const s=e;i[s(490)][s(492)](hr(t))}))[e(461)]((i=>{const s=e;t.dispatchEvent(new CustomEvent(s(491),{detail:{message:""+i}})),console[s(422)](i)}))},dr=(t,i)=>{tr[t]=i},fr=_n[Kn(426)];let gr=!fr;const _r=new Map;function vr(t){return en(this,void 0,void 0,(function*(){const i=er;if(null===t[i(504)])throw new b(i(456));const e=t[i(490)];if(null===e)throw new b("No media element available!");const n=e[i(428)];if(null===n)throw new b(i(452));const r=sr(new T(t[i(504)])),o=r+e.id;let h=null;_r[i(469)](o)&&(h=_r.get(o),null!=h&&h.close(),_r[i(451)](o)),s[i(483)]&&console[i(425)](i(450),i(h?429:509));let a=null;try{a=n[i(479)](gr?"persistent-license":"temporary")}catch(t){console[i(434)]("EME createSession(persistent) failed:",t)}if(!a&&gr){gr=!1;try{a=n[i(479)](i(436))}catch(t){console[i(422)]("EME createSession(temporary) failed:",t)}}if(a)if(a[i(500)](i(460),(t=>{const s=i;t[s(490)][s(435)].forEach(((t,i)=>{const n=s;(t===n(466)||t===n(438)||t===n(465)||t===n(463))&&e[n(505)](new CustomEvent(n(491),{detail:{message:n(515)+sr(new T(i))+n(488)+(n(513)+t+")"),keyId:i}}))}))})),fr?a.addEventListener(i(441),lr[i(467)](null,e),!1):-1!==r[i(424)](i(427))?a.addEventListener(i(441),ur[i(467)](null,e),!1):-1!==r[i(424)](i(437))?a[i(500)](i(441),cr[i(467)](null,e),!1):a.addEventListener("message",or[i(467)](null,e),!1),h)try{(yield a[i(420)](h[i(512)]))?_r[i(453)](o,a):e.dispatchEvent(new CustomEvent(i(491),{detail:{message:"Failed to load previous EME session"}}))}catch(t){e[i(505)](new CustomEvent(i(491),{detail:{message:i(464)+t}}))}else a[i(503)](t.initDataType,t[i(504)]).then((()=>{gr&&_r[i(453)](o,a)}))[i(461)]((t=>{const s=i;e[s(505)](new CustomEvent(s(491),{detail:{message:s(474)+t}}))}));else e[i(505)](new CustomEvent(i(491),{detail:{message:i(442)}}))}))}const wr=Br;function mr(){const t=[" too close to seek, ","fpsCertificateUrl","9880640TWxZrg","H264","ignoreAudio","Unable to create Worker!","createMediaKeys(",", restart required: ","/license-proxy-headerauth/drmtoday/RightsManager.asmx","6236Nwzlef","worker","serverCertificateUrl","serverCertificate","seq",",255]).buffer,idrFrames.push(new Uint8Array([0,0,0,1,39,100,0,13,172,87,5,6,100,0,0,0,1,40,238,60,176,0,0,0,1,37,","ClearKey","No valid DRM config found, call rtcDrmConfigure first.","sessionId","toISOString","indexOf","robustness","isInteger","info","includes","Development","slice","16niaptx"," frame","video/mp4","isArray","Android","end","PlayReady","streamType","1772WtcYWF","]: ","Frame gap: ","nextKeyFrameAllowedTime","use rtcDrmFeedFrame to push frames manually","Error recovery attempted","merchant","FairPlay","requestMediaKeySystemAccess(","pipeThrough","/license-server-fairplay/","isChrome","type","MSE (re)init","const DUMMY_IDR_FRAME_SLICE_HDR0=new Uint8Array([32,0,203]),DUMMY_IDR_FRAME_SLICE_HDR1=new Uint8Array([16,0,50]);","DRM config env value must be one of: ","length","GOP is getting too long, requesting a new key frame","Worker","let brokenFrame=null,idrFrames=[];function initializeDummyFrames(){brokenFrame=new Uint8Array([0,0,0,1,65,154,255","srcObject","RTCRtpScriptTransform","),idrFrames.push(idrFrames[0].slice());let $=new Uint8Array(idrFrames[1]);$.set([16,0,50],27)}let idrPicIdToggle=","now"," to ","join","setServerCertificate","audioCapabilities","lastKeyFrameTime","prevSeqNum"," seeking from ",".experiment","clRtcDrmDebugLog","Server certificate fetch failed with error ","isFirefox","org.w3.clearkey","x-dt-custom-data","jitterBufferTarget","playbackRate","enabled","keyFrameNeeded","createEncodedStreams","wvCertificateUrl","key","sai","Discarding corrupted video frame (too small)",'gle^=1]}function audioTransformFunction($,e){postMessage({streamType:"audio",frame:{timestamp:$.timestamp,data:$.',"H264 is the only supported video codec.","com.microsoft.playready.recommendation"," will be used","DRM config iv must be an instance of 16-byte long Uint8Array.","encryption","0;function generateDummyFrame($){return(brokenFrame||initializeDummyFrames(),$)?brokenFrame:idrFrames[idrPicIdTog","toString","message","status","bytesSinceKey","currentTime","supportsRtpScriptTransform","1585647fRskxG","audioElement","track","sinf","createObjectURL","enqueue","Invalid videoElement, it must be an instance of HTMLVideoElement.","7302558TqFWae","pipeTo","SampleAuxInfo extraction failed (video)","isEdge","keys","not-allowed","rtcdrmerror","btoa","?audioTransformFunction:videoTransformFunction});e.pipeThrough(a).pipeTo(x)}self.RTCTransformEvent&&(self.onrtctr",", a1d1f1 is recommended).","reportDiscontinuity","onFetch","keyId","sessionTypes","). Edge only supports PlayReady, Widevine and ClearKey.","audioEncrypted","audioStartTimestamp","frame","videoStartTimestamp","184,32,0,203,255,38,29,217,24,192,161,96,0,0,12,229,174,166,6,7,20,3,84,0,247,96,193,181,229,128,0,32,32]).buffer","Duplicate/reordered frame, prev seq: ","ClearKey is not supported by Safari.","bind",") not found in [","DRM config robustness can only be one of: ","persistent-license","postMessage","receiver","get","both","jmuxer","Production","Blob","timestamp","cenc","emeConfig","clear","cbcs-1-9","5iKPdqC","isWindows","PlayReady license acquisition might fail without output protection enabled (sessionId is ","). Chrome only supports Widevine and ClearKey.","mediaBufferMs should be an integer.","size","certificate","prLicenseUrl","fpsLicenseUrl","/license-proxy-widevine/cenc/","4572770OAoUlm","BYTES_PER_ELEMENT","then","SW_SECURE_CRYPTO","ansform=$=>{let e=$.transformer;handleTransform(e.options.operation,e.readable,e.writable)}),onmessage=$=>{keyFra","splice","Safari doesn't support 'cenc'/AES-CTR, use 'cbcs' instead if possible.","videoElement","rtcDrmConfigure did not specify audioElement, audio will be dropped",'audio/mp4; codecs="opus"',"object","Invalid audioElement, it must be an instance of HTMLMediaElement.","keyFrameNeededPosted","debugCreateMediaDump","next","play","6591266VeIbXo","userId","jitterBufferDelayHint",'ame(keyFrameNeeded),e.enqueue($)}function handleTransform($,e,x){let a=new TransformStream({transform:"audio"===$',"dispatchEvent","reduce"," bytes, playback at ","offset","arrayBuffer","waitingForIdr","Widevine","DRM config mediaBufferMs should be an integer.","hwSecurity","authToken","audio"," bytes)","push","licenseUrl","Default transform mode enabled, ","RTCRtpScriptTransform/TransformStream will not be created, ","GET","baseUrl","video","trim","7377TdQrIK","3000","playoutDelayHint","catch","fpsCertificate","POSITIVE_INFINITY","/license-server-fairplay/cert/","DRM config:","streams","mediaBufferMs","log","codec","onmessage","Target video element (","Applying pre-configured certificate (","webkitURL","Discarding corrupted video frame (no Annex B startcode)"," requesting a new key frame (latency ","PlayReady might not support '","No target media element!","URL","set","warn","data","config","isSafari","forEach","setMediaKeys","buffered"," - ","keySystem",'data}}),e.enqueue($)}let keyFrameNeeded=!1;function videoTransformFunction($,e){postMessage({streamType:"video",f',"paused","wvCertificate","a1d1f1","2000","keyFrameRequestInterval","Several DRM configs detected, rtcDrmOnTrack have to be called with target DRM config.","error","238HZxcdH","HW_SECURE_ALL","Invalid DRM type (","buffer","x-dt-auth-token","clRtcDrmCreateMediaDump",'rame:{type:$.type,timestamp:$.timestamp,data:$.data}}),"key"===$.type&&(keyFrameNeeded=!1),$.data=generateDummyFr',"addEventListener",") failed","keyFrameLogCntr","feed","byteLength","kind","purchase","environment","videoCapabilities","requestMediaKeySystemAccess","temporary","). It has to be a string containing a JWT.","value",".. ","string"];return(mr=function(){return t})()}!function(){const t=Br,i=mr();for(;;)try{if(C(t(543))/1*(C(t(512))/2)+C(t(473))/3*(C(t(568))/4)+-C(t(672))/5*(-C(t(634))/6)+-C(t(536))/7+C(t(560))/8*(C(t(627))/9)+-C(t(682))/10+-C(t(449))/11==932877)break;i.push(i.shift())}catch(t){i.push(i.shift())}}();const pr=_n[wr(626)],Ar=_n[wr(602)],yr=_n[wr(498)],br=_n[wr(637)],Mr=_n[wr(579)],Tr=_n.platform,Sr=_n[wr(673)],Nr=br||Mr&&Tr===wr(564),Ir=1e6*(Ar?82:yr?220:120),Dr=Ar?5e3:2e3,Er=Ar?1.5:.5;function kr(t){const i=wr;return typeof t!==i(692)||null===t||t instanceof Element||t instanceof Fn?t:function(t){const i=wr;return!!((null==t?void 0:t[i(515)])instanceof ArrayBuffer&&null!=t&&t[i(683)])}(t)?t[i(559)]():Array[i(563)](t)?t[i(454)](((t,i,e)=>(t[e]=kr(i),t)),[]):t instanceof _?_[i(638)](t)[i(454)](((i,e)=>(i[e]=kr(t[e]),i)),{}):t}class xr{constructor(t){const i=wr;this[i(545)]="",this.licenseUrl="",this[i(503)]="",this[i(669)]=[],this[i(497)]=kr(t),this[i(664)]=null,this[i(521)]=0,this[i(571)]=Date.now(),this.videoStartTimestamp=0,this.audioStartTimestamp=0,this.prevSeqNum=-1,this[i(596)]=0,this[i(624)]=0,this.keyFrameNeeded=!0,this.keyFrameNeededPosted=!1,this.keyFrameRequestInterval=Dr,this.worker=null}}const Lr=new Map,Cr=new T([60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60]),jr=new T([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1]),Or=new T([213,251,214,184,46,217,62,78,249,138,228,9,49,238,51,183]);function Rr(t){const i=wr;let e=!1;if((t[i(497)].video&&"clear"!==t[i(497)].video[i(619)]&&"HW"===t.config[i(471)][i(554)]||t[i(497)][i(463)]&&t[i(497)][i(463)].encryption!==i(670)&&"HW"===t[i(497)][i(463)][i(554)])&&(e=!0),t.hwSecurity=e,function(t,i){const e=wr;void 0!==i&&(t[e(497)][e(482)]=i),(void 0===t[e(497)][e(482)]||t[e(497)].mediaBufferMs<0)&&(t.config[e(482)]=100,Ar?t[e(497)][e(482)]=350:!yr&&Sr&&(t[e(497)][e(580)]===e(566)||t[e(461)])&&(t[e(497)][e(482)]=1400))}(t,t[i(497)][i(482)]),void 0===t.config.authToken){void 0===t.config[i(450)]&&(t[i(497)][i(450)]=i(525)),void 0===t[i(497)][i(551)]&&(t.config[i(551)]=i(507));const e=s[i(641)](JSON.stringify({userId:t.config[i(450)],sessionId:t[i(497)][i(551)],merchant:t.config[i(574)]}));dr(i(604),e)}else dr(i(516),t.config[i(462)]);for(const e of[t[i(497)].audio,t[i(497)][i(471)]])e&&e[i(619)]!==i(670)&&(e[i(646)]||(e[i(646)]=jr),e.iv||(e.iv=Or));t[i(546)]=void 0,t[i(545)]="",t[i(466)]="";const n=t.config[i(526)][i(470)]();var r;if(t[i(497)][i(580)]===i(549)?(t.keySystem=i(603),nr=Cr):t.config.type===i(459)?(t[i(503)]="com.widevine.alpha",Sr&&e&&(t[i(503)]+=i(599)),t.config.wvCertificate?t[i(546)]=t[i(497)][i(506)]:t[i(497)][i(610)]?t[i(545)]=t[i(497)][i(610)]:t[i(546)]=t.config[i(526)][i(678)](),t.config.wvLicenseUrl?t[i(466)]=t[i(497)].wvLicenseUrl:t[i(466)]=n+i(681)):t[i(497)][i(580)]===i(566)?(t[i(503)]=i(616),t[i(497)][i(679)]?t.licenseUrl=t[i(497)][i(679)]:t[i(466)]=n+i(542)):t[i(497)].type===i(575)&&(t.keySystem="com.apple.fps",t.config[i(477)]?t[i(546)]=t[i(497)][i(477)]:t[i(497)][i(535)]?t.serverCertificateUrl=t.config[i(535)]:t[i(545)]=n+i(479)+t[i(497)].merchant,t[i(497)][i(680)]?t[i(466)]=t.config.fpsLicenseUrl:t.licenseUrl=n+i(578)),r={licenseUrl:t[i(466)],onFetch:t.config[i(645)]},$n=r,t[i(669)]=[],t.config[i(580)]!==i(575)){t[i(669)][i(465)]({initDataTypes:[i(668)],sessionTypes:["persistent-license",i(529)]});for(const e of[t[i(497)][i(471)],t[i(497)][i(463)]])if(e&&e.encryption!==i(670)){const s=e==t[i(497)][i(471)]?i(471):i(463);let n;t[i(497)][i(580)]===i(459)?n="HW"===e[i(554)]?i(513):i(685):"PlayReady"===t[i(497)][i(580)]&&(n="HW"===e.robustness?i(474):i(508)),s===i(471)?t[i(669)][0][i(527)]=[{contentType:'video/mp4; codecs="avc1.640032"',encryptionScheme:"cenc"===e[i(619)]?i(668):"cbcs-1-9",robustness:n||void 0}]:t[i(669)][0][i(595)]=[{contentType:i(691),encryptionScheme:e[i(619)]===i(668)?"cenc":i(671),robustness:n||void 0}]}}else t[i(669)]=[{initDataTypes:[i(630)],videoCapabilities:[{contentType:i(562),robustness:""}],distinctiveIdentifier:"not-allowed",persistentState:i(639),sessionTypes:["temporary"]}];s[i(600)]&&console.info(i(480),t)}function Pr(t){const i=wr;s[i(600)]&&console[i(556)](i(581));let e=t[i(497)].videoElement;(!t[i(497)][i(471)]||t.config[i(471)][i(619)]===i(670))&&(e=t.config.audioElement),t[i(664)]=null;const n=!t.ignoreAudio&&t[i(497)][i(463)]&&"clear"!==t[i(497)].audio[i(619)],r=t[i(497)][i(471)]&&t.config.video[i(619)]!==i(670);t[i(624)]=0,t[i(608)]=!0,t.keyFrameNeededPosted=!1,t[i(509)]=Dr,t[i(652)]=0,t[i(650)]=0,t[i(597)]=-1,t[i(596)]=0,t.jmuxer=new On({node:e,mode:n?i(r?663:463):"video",fps:60,drm:t}),yr&&t[i(497)].videoElement&&t[i(497)][i(689)][i(448)]()[i(684)]((()=>{}))[i(476)]((()=>{}))}function zr(t,i,e){const n=wr;if(t[n(497)][n(471)]&&"clear"===t.config[n(471)][n(619)])return null==e||e[n(632)](i),!1;const r=Date[n(591)]();if(i.type===n(611)){const e=s[n(600)];++t[n(521)]<(e?Number[n(478)]:5)&&(console[n(556)]((new Date)[n(552)]().slice(11,-1)+" "+i[n(580)]+", "+(i[n(496)].byteLength+n(455)+t[n(497)][n(689)][n(625)])),e&&1===t[n(521)]&&function(t,i,e){void 0===i&&(i=64),void 0===e&&(e=64);const s=wr,n=new T(t[s(496)]);let r="",o=0;for(let t=0;t<i&&t<n[s(584)];++t)r+=(n[t]<16?"0":"")+n[t].toString(16)+" ";if(o<n[s(584)])for(o<n[s(584)]-e&&(r+=s(532),o=n[s(584)]-e);o<n[s(584)];o++)r+=(n[o]<16?"0":"")+n[o][s(621)](16)+" ";console.info("["+((t[s(580)]||s(463))+s(561))+s(569)+r[s(472)]())}(i,128,8)),t[n(608)]=!1,t[n(624)]=0,t[n(571)]=r+t[n(509)]}return t[n(624)]+=i.data[n(523)],!t[n(608)]&&t[n(624)]>Ir&&(console[n(556)](n(585)),t[n(608)]=!0),t.jmuxer&&(function(t,i){const e=wr;0===t[e(652)]&&(t[e(652)]=i[e(667)],t[e(509)]=Dr,t[e(571)]=Date[e(591)]()+2e3);let n=null,r=!1;if(i.data[e(523)]<=4)console[e(495)](e(613)),r=!0;else{const s=new T(i[e(496)],0,4);0!=s[0]||0!=s[1]||0!=s[2]||1!=s[3]?(console[e(495)](e(489)),r=!0):(n=function(t,i){const e=Vn,s=new DataView(t[e(335)]),n=t.data[e(346)]-2,r=s[e(340)](n);if(r<n){let t=n-r;if(69!==s[e(337)](n-1))return console[e(341)](e(339)),null;if(s.getUint8(t++)>>>4!=1)return console[e(341)](e(329)),null;const o=new T(r-2);let h=0,a=0;for(;t<n-1;){let i=s.getUint8(t++);a>1&&3===i&&(a=0,i=s.getUint8(t++)),0!==i?a=0:++a,o[h++]=i}const u=new DataView(o[e(343)]),c=i===e(327)?16:0,l=c+2+6*u.getUint16(c);return l+2>h?(console.error(e(325)),null):{sai:o[e(345)](0,l),offset:n-r,seq:u.getUint16(l)}}return null}(i,t[e(497)][e(471)][e(619)]),!n&&(console.warn(e(636)),r=!0))}if(n)if(-1===t[e(597)]){if(i[e(580)]!==e(611))return 0;t[e(597)]=n[e(547)]}else{let o=n.seq-t[e(597)];if(o<-32767&&(o+=65536),o<=0)return s[e(600)]&&console[e(495)](e(654)+t[e(597)]+", curr: "+n[e(547)]),0;o>1&&(r=i[e(580)]!==e(611),console[e(495)](e(570)+t[e(597)]+e(502)+n[e(547)]+e(541)+r)),t.prevSeqNum=n[e(547)]}let o=0;r&&!t[e(664)][e(458)]&&(o=-1,t[e(664)][e(644)]());const h=(i[e(667)]-t[e(652)])/9e4;return n&&t[e(664)][e(522)]({video:new T(i.data,0,n[e(456)]),videoSampleAuxInfo:n[e(612)],timestamp:h})<0&&(o=-1,console[e(495)](e(573)),Pr(t)),o>=0&&"key"===i[e(580)]&&(t[e(596)]=h,console[e(483)]((new Date)[e(552)]()[e(559)](11,-1)+" kf at "+h+", playback at "+t[e(497)].videoElement[e(625)])),o}(t,i)<0?t[n(608)]=!0:function(t){const i=wr,e=t.config[i(689)];if(!e||e[i(501)][i(584)]<1||e[i(505)]||e[i(625)]<Er)return;const n=t[i(497)].mediaBufferMs;if(void 0===n||n<0)throw new b("targetLatency not set!");const r=e[i(501)][i(565)](e[i(501)][i(584)]-1),o=1e3*(r-e[i(625)])|0;if(!t[i(649)]&&function(t,i,e){const s=wr;let n;n=i<3*e>>>2?.875:i<=e?1:i<7*e>>>2?1.125:i<9*e>>>2?1.25:i<11*e>>>2?1.375:1.5,n!==t.playbackRate&&(t[s(606)]=n)}(e,o,n),!(o<n+50||o<5*n>>>2))if(t.lastKeyFrameTime>e[i(625)]+.1){const o=1e3*(r-t[i(596)])|0;o>40&&o>n-100?(s[i(600)]&&console.info((new Date).toISOString().slice(11,-1)+i(598)+(e[i(625)]+i(592)+t[i(596)]+" (")+(t.lastKeyFrameTime-e[i(625)])+")"),e[i(625)]=t[i(596)]):console[i(483)]((new Date)[i(552)]().slice(11,-1)+i(534)+o)}else!t[i(608)]&&Date[i(591)]()>t[i(571)]&&o>n+100&&o>3*n>>>1&&(s[i(600)]&&console[i(556)]((new Date).toISOString()[i(559)](11,-1)+i(490)+o+" ms)"),t[i(608)]=!0,t[i(509)]<16e3&&(t[i(509)]<<=1))}(t)),e?(!t[n(608)]||!Nr)&&(i[n(496)]=function(t){return!Hn&&function(){const t=Wn;Hn=new T([0,0,0,1,65,154,255,255]).buffer,Zn[t(303)](new T([0,0,0,1,39,100,0,13,172,87,5,6,100,0,0,0,1,40,238,60,176,0,0,0,1,37,184,32,0,203,255,38,29,217,24,192,161,96,0,0,12,229,174,166,6,7,20,3,84,0,247,96,193,181,229,128,0,32,32])[t(306)]),Zn[t(303)](Zn[0][t(299)](0)),new T(Zn[1]).set([16,0,50],27)}(),t?Hn:(Xn^=1,Zn[Xn])}(t[n(608)]),e[n(632)](i)):t[n(608)]!=t[n(445)]&&(t.worker&&t[n(544)][n(660)](t[n(608)]),t[n(445)]=t[n(608)]),t[n(608)]}function Br(t,i){const e=mr();return(Br=function(t,i){return e[t-=445]})(t,i)}function Ur(t,i,e){const s=wr;return t[s(497)][s(463)]&&t[s(497)].audio[s(619)]!==s(670)?i[s(496)][s(523)]>0&&function(t,i){const e=wr;var s;if(!t.jmuxer||t[e(538)])return 0;0===t[e(650)]&&(t[e(650)]=i[e(667)]);const n=(i[e(667)]-t.audioStartTimestamp)/48e3;if("cbcs"===(null===(s=t.config[e(463)])||void 0===s?void 0:s[e(619)]))return t[e(664)][e(522)]({audio:new T(i[e(496)]),timestamp:n});const r=function(t){const i=Vn,e=new DataView(t.data),s=t.data[i(346)]-2,n=e.getUint16(s);if(n<s){let t=s-n;if(69!==e[i(337)](s-1))return console[i(341)](i(339)),null;if(e[i(337)](t++)>>>4!=1)return console[i(341)](i(329)),null;const r=new T(n-2);let o=0;for(;t<s-1;){const s=e[i(337)](t++);if(r[o++]=s,o>=16)break}return{sai:r,offset:s-n}}return null}(i);r?t[e(664)][e(522)]({audio:new T(i[e(496)],0,r[e(456)]),audioSampleAuxInfo:r[e(612)],timestamp:n}):console[e(511)]("SampleAuxInfo extraction failed (audio)")}(t,i):e&&e[s(632)](i),!1}function Qr(t){const i=wr;if(!t||typeof t!==i(692))throw new k("Invalid config argument type, DRM config must be an object.");if(!(t[i(689)]instanceof HTMLVideoElement))throw new k(i(633));if(t[i(628)]&&!(t.audioElement instanceof HTMLMediaElement))throw new k(i(693));if(void 0!==t[i(482)]&&!Number[i(555)](t[i(482)]))throw new k(i(460));let e=!1,n=!1,r=!1;const o=["cbcs",i(668),i(670)],h=["SW","HW"];for(const s of[t[i(471)],t[i(463)]])if(s){if(!o[i(557)](s[i(619)]))throw new RangeError("DRM config encryption value must be one of: "+o[i(593)](", "));if(yr&&"cenc"===s.encryption)throw new RangeError(i(688));if(s[i(619)]!==i(670)){if(n=!0,s.keyId){if(!(s[i(646)]instanceof T)||16!==s.keyId[i(584)])throw new k("DRM config keyId must be an instance of 16-byte long Uint8Array.");r=!0}else if(yr)throw new ReferenceError(i(655));if(s.iv&&(!(s.iv instanceof T)||16!==s.iv.length))throw new k(i(618));if(s[i(554)]&&!h[i(557)](s.robustness))throw new RangeError(i(658)+h[i(593)](", "));if(s===t[i(471)]&&s[i(484)]!==i(537))throw new RangeError(i(615));yr&&s===t.audio&&"opus"===s.codec&&(e=!0,console.warn("Safari does not support Opus, audio will not be rendered.")),"PlayReady"===t[i(580)]&&(s[i(619)]!==i(668)&&console[i(495)](i(491)+s[i(619)]+"', it's safer to use 'cbcs' instead."),void 0===t.sessionId||t.sessionId[i(557)]("f1")||console.warn(i(674)+t.sessionId+i(643)))}}if(n){const e=[Fn[i(558)],Fn.Staging,Fn[i(665)]];if(!e.includes(t[i(526)]))throw new RangeError(i(583)+e.join(", "));if(t[i(462)]&&typeof t[i(462)]!==i(533))throw new k("Invalid authToken type ("+typeof t[i(462)]+i(530));if(t.type)if(yr){if(t[i(580)]!==i(575))throw new RangeError(i(514)+t[i(580)]+"). Safari only supports FairPlay.")}else if(Mr){if(t.type!==i(459)&&"ClearKey"!==t[i(580)])throw new RangeError("Invalid DRM type ("+t.type+i(675))}else if(br&&t[i(580)]!==i(566)&&"Widevine"!==t[i(580)]&&"ClearKey"!==t[i(580)])throw new RangeError(i(514)+t.type+i(648))}void 0!==t.debugLog&&(s[i(600)]=t.debugLog),void 0!==t[i(446)]&&(s[i(517)]=t[i(446)]);let a=Lr.get(t[i(689)]);!a&&(a=new xr(t),Lr[i(494)](t[i(689)],a)),a.enabled=n,a[i(538)]=e,a[i(649)]=!e&&a[i(497)][i(463)]&&a[i(497)].audio.encryption!==i(670),n&&(a[i(497)].type||(a[i(497)][i(580)]=i(yr?575:459)),r||a[i(497)][i(580)]===i(549)||(a[i(497)][i(580)]=i(549)),Rr(a),function(t){en(this,void 0,void 0,(function*(){const i=Br;var e,n;let r=t[i(497)][i(689)];if((!t[i(497)][i(471)]||t[i(497)][i(471)].encryption===i(670))&&(r=t[i(497)][i(628)]),!r)throw new b(i(492));r.src="",r[i(588)]=null,yield r.setMediaKeys(null);let o=null;try{o=yield Kl[i(528)](t[i(503)],t.emeConfig)}catch(t){}if(!o&&t[i(669)][0]){const s=null===(e=t[i(669)][0][i(647)])||void 0===e?void 0:e[i(553)](i(659));if(void 0!==s&&s>=0){null===(n=t.emeConfig[0].sessionTypes)||void 0===n||n[i(687)](s,1);try{o=yield Kl[i(528)](t[i(503)],t[i(669)])}catch(t){}}}if(!o){const e=i(576)+t[i(503)]+i(520);return r.dispatchEvent(new CustomEvent(i(640),{detail:{message:e}})),void console[i(511)](e)}let h=null;try{h=yield o.createMediaKeys()}catch(t){}if(!h){const e=i(540)+t[i(503)]+i(520);return r[i(453)](new CustomEvent("rtcdrmerror",{detail:{message:e}})),void console[i(511)](e)}if(t.serverCertificate)s.clRtcDrmDebugLog&&console[i(556)](i(487)+t[i(546)][i(523)]+i(464)),yield h[i(594)](t[i(546)]);else if(t.serverCertificateUrl){const e={method:i(469)},n=t.serverCertificateUrl;try{const o=yield t[i(497)].onFetch?t.config[i(645)](n,e):fetch(n,e);if(!o.ok){const t=i(601)+o[i(623)];return void r[i(453)](new CustomEvent(i(640),{detail:{message:t}}))}const a=yield o[i(457)]();s.clRtcDrmDebugLog&&console[i(556)]("Fetched certificate from "+n+", "+a[i(523)]+" bytes"),yield h[i(594)](a)}catch(t){const e=t.name+": "+t[i(622)];return console.error(e),void r[i(453)](new CustomEvent(i(640),{detail:{message:e}}))}}yield r[i(500)](h),r[i(519)]("encrypted",vr),Pr(t)}))}(a)),a[i(497)][i(689)][i(519)](i(448),(function(){const t=i;a[t(497)][t(689)][t(625)]>.5&&(a[t(571)]=Date.now())}))}const Fr=wr(582)+wr(587)+wr(548)+wr(653)+wr(590)+wr(620)+wr(614)+wr(504)+wr(518)+wr(452)+wr(642)+wr(686)+"meNeeded=$.data};";function Yr(t){const i=wr;if(0===Lr[i(677)])throw new k(i(550));let e;if(t&&t[i(689)])e=t[i(689)];else{if(1!==Lr.size)throw new k(i(510));e=Lr[i(638)]()[i(447)]()[i(531)]}const s=Lr[i(662)](e);if(!s){let t="";throw Lr[i(499)](((i,e)=>{t+=e.id+", "})),t=t.slice(0,-2),new k(i(486)+e.id+i(657)+t+"]")}return s}function Vr(t,i){const e=wr;if(t&&t[e(497)][e(689)]){const s=t[e(497)][e(689)];if(s[e(501)].length>0){const t=s.buffered[e(565)](s[e(501)][e(584)]-1)-s[e(625)];i.playoutDelayHint=i.jitterBufferDelayHint=i.jitterBufferTarget=t}u(Vr,1e3,t,i)}}const Gr=at.get("View");Gr.setLevel(at.DEBUG);const Wr={metadata:!1,enableDRM:!1,disableVideo:!1,disableAudio:!1,peerConfig:{autoInitStats:!0,statsIntervalMs:1e3}};t.Director=xs,t.Logger=at,t.PeerConnection=rs,t.Publish=class extends Vs{async connect(t){void 0===t&&(t=Js);const i=Fs.object({sourceId:Fs.string(),stereo:Fs.boolean(),dtx:Fs.boolean(),absCaptureTime:Fs.boolean(),dependencyDescriptor:Fs.boolean(),mediaStream:Fs.alternatives().try(Fs.array().items(Fs.object()),Fs.object()),bandwidth:Fs.number(),metadata:Fs.boolean(),disableVideo:Fs.boolean(),disableAudio:Fs.boolean(),codec:Fs.string().valid(..._.values(Je)),simulcast:Fs.boolean(),scalabilityMode:Fs.string(),peerConfig:Fs.object(),record:Fs.boolean(),events:Fs.array().items(Fs.string().valid("active","inactive","viewercount")),priority:Fs.number()}),{error:e,value:s}=i.validate(t);e&&Ks.warn(e,s),this.options=g(d(d({},Js),t),{peerConfig:d(d({},Js.peerConfig),t.peerConfig),setSDPToPeer:!1}),this.options.metadata=this.options.metadata&&this.options.codec===Je.H264&&!this.options.disableVideo,await this.initConnection({migrate:!1})}async reconnect(t){var i,e;this.options.mediaStream=null!=(e=null==(i=this.webRTCPeer)?void 0:i.getTracks())?e:this.options.mediaStream,super.reconnect(t)}async replaceConnection(){var t,i;Ks.info("Migrating current connection"),this.options.mediaStream=null!=(i=null==(t=this.webRTCPeer)?void 0:t.getTracks())?i:this.options.mediaStream,await this.initConnection({migrate:!0})}async record(){var t;this.recordingAvailable?(this.options.record=!0,await(null==(t=this.signaling)?void 0:t.cmd("record")),Ks.info("Broadcaster start recording")):Ks.error("Record not available")}async unrecord(){var t;this.recordingAvailable?(this.options.record=!1,await(null==(t=this.signaling)?void 0:t.cmd("unrecord")),Ks.info("Broadcaster stop recording")):Ks.error("Unrecord not available")}stop(){var t;super.stop(),null==(t=this.worker)||t.terminate(),this.worker=null}async initConnection(t){var i,e;let s,n;if(Ks.debug("Broadcast option values: ",this.options),this.stopReconnection=!1,!this.options.mediaStream)throw Ks.error("Error while broadcasting. MediaStream required"),new b("MediaStream required");if(!t.migrate&&this.isActive())throw Ks.warn("Broadcast currently working"),new b("Broadcast currently working");try{n=await this.tokenGenerator(),this.options.peerConfig.iceServers=null==n?void 0:n.iceServers,this.options.peerConfig.encodedInsertableStreams=this.options.metadata}catch(t){throw Ks.error("Error generating token."),t instanceof Ns&&(401!==t.status&&this.autoReconnect?this.reconnect():this.stopReconnection=!0),t}if(!n)throw Ks.error("Error while broadcasting. Publisher data required"),new b("Publisher data required");const r=zs(n.jwt);if(this.streamName=r.millicast.streamName,this.recordingAvailable=r[Us.atob("bWlsbGljYXN0")].record,this.options.record&&!this.recordingAvailable)throw Ks.error("Error while broadcasting. Record option detected but recording is not available"),new b("Record option detected but recording is not available");const o=new Ms({streamName:this.streamName,url:"".concat(n.urls[0],"?token=").concat(n.jwt)}),h=t.migrate?new rs:this.webRTCPeer;await h.createRTCPeer(this.options.peerConfig,is),null==(i=this.stopReemitingWebRTCPeerInstanceEvents)||i.call(this),null==(e=this.stopReemitingSignalingInstanceEvents)||e.call(this),this.stopReemitingWebRTCPeerInstanceEvents=xt(h,this,[ss.connectionStateChange]),this.stopReemitingSignalingInstanceEvents=xt(o,this,[bs]);const a=h.getRTCLocalSDP(this.options),u=o.connect();s=await Promise.all([a,u]);const c=s[0];this.options.metadata&&(this.worker||(this.worker=new qs),this.getRTCPeerConnection().getSenders().forEach((t=>{if(Zs)t.transform=new RTCRtpScriptTransform(this.worker,{name:"senderTransform",codec:this.options.codec});else if(Ws){const{readable:i,writable:e}=t.createEncodedStreams();this.worker.postMessage({action:"insertable-streams-sender",codec:this.options.codec,readable:i,writable:e},[i,e])}})));let l=this.signaling;this.signaling=o;const d=this.signaling.publish(c,this.options),f=h.peer.setLocalDescription(h.sessionDescription);s=await Promise.all([d,f]);let g=s[0];!this.options.disableVideo&&this.options.bandwidth>0&&(g=h.updateBandwidthRestriction(g,this.options.bandwidth)),await h.setRTCRemoteSDP(g),Ks.info("Broadcasting to streamName: ",this.streamName);let _=this.webRTCPeer;this.webRTCPeer=h,this.setReconnect(),t.migrate&&this.webRTCPeer.on(ss.connectionStateChange,(t=>{var i,e;["connected","disconnected","failed","closed"].includes(t)&&(null==(i=null==l?void 0:l.close)||i.call(l),null==(e=null==_?void 0:_.closeRTCPeer)||e.call(_),l=_=null)}))}sendMetadata(t,i){var e;if(void 0===i&&(i="d40e38ea-d419-4c62-94ed-20ac37b4e4fa"),null!=(e=this.options)&&e.metadata&&this.worker)this.worker.postMessage({action:"metadata-sei-user-data-unregistered",uuid:i,payload:t});else{let t="Could not send metadata due to:";this.options?this.options.metadata?this.worker||(t+="\n- Stream not being published."):(t+="\n- Metadata option is not enabled.",this.options.codec!==Je.H264&&(t+="\n- Incompatible codec. Only H264 available."),this.options.disableVideo&&(t+="\n- Video disabled.")):t+="\n- Stream not being published.",Ks.warn(t)}}constructor(t,i,e=!0){t&&Ks.warn("The streamName property has been deprecated. In a future release, this will be removed. Please do not rely on this value. Instead, set via token generator"),super(null,i,Ks,e)}},t.Signaling=Ms,t.View=class extends Vs{async connect(t){void 0===t&&(t=Wr),this.options=g(d(d({},Wr),t),{peerConfig:d(d({},Wr.peerConfig),t.peerConfig),setSDPToPeer:!1}),this.eventQueue.length=0,await this.initConnection({migrate:!1})}async select(t){void 0===t&&(t={}),Gr.debug("Viewer select layer values: ",t),await this.signaling.cmd("select",{layer:t}),Gr.info("Connected to streamName: ",this.streamName)}async addRemoteTrack(t,i){Gr.info("Viewer adding remote track",t);const e=await this.webRTCPeer.addRemoteTrack(t,i);for(const t of i)t.addTrack(e.receiver.track);return e}async project(t,i){for(const t of i){if(!t.trackId&&!t.media)throw Gr.error("Error in projection mapping, trackId or mediaId must be set"),new b("Error in projection mapping, trackId or mediaId must be set");const i=this.webRTCPeer.getRTCPeer();if(t.mediaId&&!i.getTransceivers().find((i=>i.mid===t.mediaId.toString())))throw Gr.error("Error in projection mapping, ".concat(t.mediaId," mid not found in local transceivers")),new b("Error in projection mapping, ".concat(t.mediaId," mid not found in local transceivers"))}Gr.debug("Viewer project source: layer mappings: ",t,i),await this.signaling.cmd("project",{sourceId:t,mapping:i}),Gr.info("Projection done")}async unproject(t){Gr.debug("Viewer unproject mediaIds: ",t),await this.signaling.cmd("unproject",{mediaIds:t}),Gr.info("Unprojection done")}async replaceConnection(){Gr.info("Migrating current connection"),await this.initConnection({migrate:!0})}stop(){var t,i;super.stop(),null==(t=this.drmOptionsMap)||t.clear(),this.DRMProfile=null,null==(i=this.worker)||i.terminate(),this.worker=null,this.payloadTypeCodec={},this.tracksMidValues={},this.eventQueue.length=0}async initConnection(t){var i;let e,s;if(Gr.debug("Viewer connect options values: ",this.options),this.stopReconnection=!1,!t.migrate&&this.isActive())throw Gr.warn("Viewer currently subscribed"),new b("Viewer currently subscribed");try{s=await this.tokenGenerator(),this.options.peerConfig.iceServers=null==s?void 0:s.iceServers,this.options.peerConfig.encodedInsertableStreams=Ws&&(this.options.enableDRM||this.options.metadata)}catch(t){throw Gr.error("Error generating token."),t instanceof Ns&&(401!==t.status&&this.autoReconnect?this.reconnect():this.stopReconnection=!0),t}if(!s)throw Gr.error("Error while subscribing. Subscriber data required"),new b("Subscriber data required");const n=zs(s.jwt);this.streamName=n.millicast.streamName;const r=new Ms({streamName:this.streamName,url:"".concat(s.urls[0],"?token=").concat(s.jwt)});s.subscriberToken&&(this.subscriberToken=s.subscriberToken);const o=t.migrate?new rs:this.webRTCPeer;await o.createRTCPeer(this.options.peerConfig),null==(i=this.stopReemitingWebRTCPeerInstanceEvents)||i.call(this),this.stopReemitingWebRTCPeerInstanceEvents=xt(o,this,_.values(ss).filter((t=>t!==ss.track))),this.options.metadata&&(this.worker||(this.worker=new qs),this.worker.onmessage=t=>{if("metadata"===t.data.event){const i=new TextDecoder,e=t.data.metadata;if(e.mid=t.data.mid,e.track=this.tracksMidValues[t.data.mid],e.uuid){const t=e.uuid;e.uuid=t.reduce(((t,i)=>t+i.toString(16).padStart(2,"0")),""),e.uuid=e.uuid.replace(/(.{8})(.{4})(.{4})(.{4})(.{12})/,"$1-$2-$3-$4-$5")}if(e.timecode&&(e.timecode=new Date(i.decode(e.timecode))),e.unregistered){const t=i.decode(e.unregistered);try{const i=JSON.parse(t);e.unregistered=i}catch(t){Gr.info("The content could not be converted to JSON, returning raw bytes instead")}}this.emit("metadata",e),this.emit("onMetadata",e)}}),o.on(ss.track,(t=>{this.isMainStreamActive?this.onTrackEvent(t):this.eventQueue.push(t)})),r.on(bs,(async t=>{if(this.isMainStreamActive||"active"!==t.name)"inactive"===t.name&&this.isMainStreamActive&&this.mainSourceId===t.data.sourceId&&(this.isMainStreamActive=!1),this.emit(bs,t);else{if(this.mainSourceId=t.data.sourceId,!this.DRMProfile&&t.data.encryption){const t=await this.tokenGenerator();t.drmObject&&(this.DRMProfile=t.drmObject)}for(this.emit(bs,t),this.isMainStreamActive=!0;this.eventQueue.length>0;)this.onTrackEvent(this.eventQueue.shift())}}));const h=o.getRTCLocalSDP(g(d({},this.options),{stereo:!0})),a=r.connect();e=await Promise.all([h,a]);const c=e[0];let l=this.signaling;this.signaling=r;const f=this.signaling.subscribe(c,g(d({},this.options),{vad:this.options.multiplexedAudioTracks>0})),v=o.peer.setLocalDescription(o.sessionDescription);e=await Promise.all([f,v]);const w=e[0];this.payloadTypeCodec=qe.getCodecPayloadType(w),await o.setRTCRemoteSDP(w),Gr.info("Connected to streamName: ",this.streamName);let m=this.webRTCPeer;this.webRTCPeer=o,this.setReconnect(),t.migrate&&this.webRTCPeer.on(ss.connectionStateChange,(t=>{var i,e;"connected"===t?u((()=>{var t,i;null==(t=null==l?void 0:l.close)||t.call(l),null==(i=null==m?void 0:m.closeRTCPeer)||i.call(m),l=m=null,Gr.info("Current connection migrated")}),1e3):["disconnected","failed","closed"].includes(t)&&(null==(i=null==l?void 0:l.close)||i.call(l),null==(e=null==m?void 0:m.closeRTCPeer)||e.call(m),l=m=null)}))}onTrackEvent(t){var i,e,n;if(this.tracksMidValues[null==(i=t.transceiver)?void 0:i.mid]=t.track,this.isDRMOn){const i=t.transceiver.mid,e=this.getDRMConfiguration(i);try{!function(t,i){const e=wr;var n,r;const o=t[e(629)][e(524)];"video"===o&&(t[e(661)][e(475)]=t[e(661)][e(451)]=t[e(661)][e(605)]=0);const h=Yr(i),a=h[e(497)].videoElement,u=h[e(497)][e(628)];if(h[e(607)]){if(h[e(497)].customTransform)s.clRtcDrmDebugLog&&console[e(556)](e(468)+e(572));else if(s[e(600)]&&console[e(556)](e(467)+(e(pr?589:609)+e(617))),pr){if(h[e(544)]=function(t){const i=wr,e=s[i(493)]||s[i(488)],n=s[i(666)],r=s[i(586)];if(!(e&&n&&r&&t))return null;const o=new n([t]);return new r(e[i(631)](o))}(Fr),null==h[e(544)])throw new b(e(539));h[e(544)][e(485)]=t=>{const i=e;t[i(496)][i(567)]===i(471)?zr(h,t[i(496)].frame,null):Ur(h,t[i(496)][i(651)],null)},t[e(661)].transform=new RTCRtpScriptTransform(h.worker,{operation:o})}else{const i=o===e(471)?zr:Ur,s={drm:h,transform:(t,e)=>{i(h,t,e)}},n=t.receiver.createEncodedStreams(),r=new TransformStream({transform:s.transform[e(656)](s)}),{readable:a,writable:u}=n;a[e(577)](r)[e(635)](u)}if("audio"===o&&(null===(n=h[e(497)][e(463)])||void 0===n?void 0:n.encryption)===e(670)){if(!u)return void console.warn(e(690));u[e(588)]!==t[e(481)][0]&&(u[e(588)]=t[e(481)][0]),h[e(497)].videoElement&&(t[e(661)][e(475)]=t[e(661)].jitterBufferDelayHint=t[e(661)][e(605)]=h[e(497)][e(482)],Vr(h,t[e(661)]))}else"video"===o&&"clear"===(null===(r=h.config[e(471)])||void 0===r?void 0:r[e(619)])&&a[e(588)]!==t[e(481)][0]&&(a.srcObject=t.streams[0])}else a[e(588)]!==t[e(481)][0]&&(a.srcObject=t[e(481)][0])}(t,e)}catch(t){Gr.error("Failed to apply DRM on media Id:",i,"error is: ",t),this.emit("error",new b("Failed to apply DRM on media Id: "+i+" error is: "+t))}this.worker||(this.worker=new qs),this.worker.addEventListener("message",(t=>{"complete"===t.data.event&&function(t,i,e){const s=wr,n=Yr(e);t[s(580)]?zr(n,t,i):Ur(n,t,i)}(t.data.frame,null,e)}))}if(this.options.metadata)if(Zs)t.receiver.transform=new RTCRtpScriptTransform(this.worker,{name:"receiverTransform",payloadTypeCodec:d({},this.payloadTypeCodec),codec:this.options.metadata&&"h264",mid:null==(e=t.transceiver)?void 0:e.mid});else if(Ws){const{readable:i,writable:e}=t.receiver.createEncodedStreams();this.worker.postMessage({action:"insertable-streams-receiver",payloadTypeCodec:d({},this.payloadTypeCodec),codec:this.options.metadata&&"h264",mid:null==(n=t.transceiver)?void 0:n.mid,readable:i,writable:e},[i,e])}this.emit(ss.track,t)}getDRMConfiguration(t){return this.drmOptionsMap?this.drmOptionsMap.get(t):null}async onRtcDrmFetch(t,i){return i.headers||(i.headers=new Headers),i.headers.get("x-dt-custom-data")&&i.headers.delete("x-dt-custom-data"),this.subscriberToken?i.headers.append("Authorization","Bearer ".concat(this.subscriberToken)):Gr.warn("onRtcDrmFetch: no subscriberToken"),fetch(t,i)}configureDRM(t){if(!t)throw new b("Required DRM options is not provided");this.drmOptionsMap||(this.drmOptionsMap=new Map);const i={merchant:"dolby",environment:Fn.Production,customTransform:this.options.metadata,videoElement:t.videoElement,audioElement:t.audioElement,video:{codec:"H264",encryption:"cbcs",keyId:$s(t.videoEncryptionParams.keyId),iv:$s(t.videoEncryptionParams.iv)},audio:{codec:"opus",encryption:"clear"},onFetch:this.onRtcDrmFetch.bind(this)};t.mediaBufferMs&&(i.mediaBufferMs=t.mediaBufferMs),this.DRMProfile&&(this.DRMProfile.playReadyUrl&&(i.prLicenseUrl=this.DRMProfile.playReadyUrl),this.DRMProfile.widevineUrl&&(i.wvLicenseUrl=this.DRMProfile.widevineUrl),this.DRMProfile.fairPlayUrl&&(i.fpsLicenseUrl=this.DRMProfile.fairPlayUrl),this.DRMProfile.fairPlayCertUrl&&(i.fpsCertificateUrl=this.DRMProfile.fairPlayCertUrl));try{Qr(i),this.drmOptionsMap.set(t.videoMid,i),t.audioMid&&this.drmOptionsMap.set(t.audioMid,i),i.videoElement.addEventListener("rtcdrmerror",(t=>{Gr.error("DRM error: ",t.detail.message,"in video element:",i.videoElement.id),this.emit("error",new b(t.detail.message))}))}catch(i){Gr.error("Failed to configure DRM with options:",t,"error is:",i)}}removeDRMConfiguration(t){var i;null==(i=this.drmOptionsMap)||i.delete(t)}get isDRMOn(){return!!this.drmOptionsMap&&this.drmOptionsMap.size>0}exchangeDRMConfiguration(t,i){const e=this.getDRMConfiguration(t),s=this.getDRMConfiguration(i);if(null===e)throw new b("No DRM configuration found for "+t);if(null===s)throw new b("No DRM configuration found for "+i);tn(e.video,s.video,"keyId"),tn(e.video,s.video,"iv");try{Qr(e)}catch(t){Gr.error("Failed to configure DRM with options:",e,"error is:",t)}try{Qr(s)}catch(t){Gr.error("Failed to configure DRM with options:",s,"error is:",t)}}constructor(t,i,e=null,s=!0){t&&Gr.warn("The streamName property has been deprecated. In a future release, this will be removed. Please do not rely on this value. Instead, set via token generator"),super(null,i,Gr,s),this.payloadTypeCodec={},this.tracksMidValues={},this.drmOptionsMap=null,this.eventQueue=[],this.isMainStreamActive=!1,e&&(this.on(ss.track,(t=>{e.srcObject=t.streams[0]})),Gr.warn("The mediaElement property has been deprecated. In a future release, this will be removed. Please do not rely on this value. Instead, do this in either the `track` or the `active` broadcast event."))}},_.defineProperty(t,Bo.toStringTag,{value:"Module"})},"object"==typeof t&&typeof i<"u"?n(t):"function"==typeof define&&define.amd?define(["exports"],n):n((e=typeof globalThis<"u"?globalThis:e||self).millicast={})})),wd=Ui((t=>{"use strict";function i(){const t=vd();return i=function(){return t},t}r(),_.defineProperty(t,"__esModule",{value:!0}),function(t,i){for(var e in i)_.defineProperty(t,e,{enumerable:!0,get:i[e]})}(t,{Director:function(){return i().Director},View:function(){return i().View}})})),md=Ui(((t,i)=>{r(),i.exports=function(){var t=new Float32Array(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}})),pd=Ui(((t,i)=>{r(),i.exports=function(t,i){var e=i[0],s=i[1],n=i[2],r=i[3],o=e+e,h=s+s,a=n+n,u=e*o,c=s*o,l=s*h,d=n*o,f=n*h,g=n*a,_=r*o,v=r*h,w=r*a;return t[0]=1-l-g,t[1]=c+w,t[2]=d-v,t[3]=0,t[4]=c-w,t[5]=1-u-g,t[6]=f+_,t[7]=0,t[8]=d+v,t[9]=f-_,t[10]=1-u-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}})),Ad=Ui(((t,i)=>{r(),i.exports=function(t,i,e){var s,n,r,o=e[0],h=e[1],a=e[2],u=x.sqrt(o*o+h*h+a*a);if(x.abs(u)<1e-6)return null;return o*=u=1/u,h*=u,a*=u,s=x.sin(i),n=x.cos(i),r=1-n,t[0]=o*o*r+n,t[1]=h*o*r+a*s,t[2]=a*o*r-h*s,t[3]=0,t[4]=o*h*r-a*s,t[5]=h*h*r+n,t[6]=a*h*r+o*s,t[7]=0,t[8]=o*a*r+h*s,t[9]=h*a*r-o*s,t[10]=a*a*r+n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}})),yd=Ui(((t,i)=>{r(),i.exports=function(t,i){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}})),bd=Ui(((t,i)=>{r(),i.exports=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}})),Md=Ui(((t,i)=>{r(),i.exports=function(t,i){var e=i[0],s=i[1],n=i[2],r=i[3],o=i[4],h=i[5],a=i[6],u=i[7],c=i[8],l=i[9],d=i[10],f=i[11],g=i[12],_=i[13],v=i[14],w=i[15],m=e*h-s*o,p=e*a-n*o,A=e*u-r*o,y=s*a-n*h,b=s*u-r*h,M=n*u-r*a,T=c*_-l*g,S=c*v-d*g,N=c*w-f*g,I=l*v-d*_,D=l*w-f*_,E=d*w-f*v,k=m*E-p*D+A*I+y*N-b*S+M*T;if(!k)return null;return k=1/k,t[0]=(h*E-a*D+u*I)*k,t[1]=(n*D-s*E-r*I)*k,t[2]=(_*M-v*b+w*y)*k,t[3]=(d*b-l*M-f*y)*k,t[4]=(a*N-o*E-u*S)*k,t[5]=(e*E-n*N+r*S)*k,t[6]=(v*A-g*M-w*p)*k,t[7]=(c*M-d*A+f*p)*k,t[8]=(o*D-h*N+u*T)*k,t[9]=(s*N-e*D-r*T)*k,t[10]=(g*b-_*A+w*m)*k,t[11]=(l*A-c*b-f*m)*k,t[12]=(h*S-o*I-a*T)*k,t[13]=(e*I-s*S+n*T)*k,t[14]=(_*p-g*y-v*m)*k,t[15]=(c*y-l*p+d*m)*k,t}})),Td=Ui(((t,i)=>{r(),i.exports=function(t,i,e){var s=i[0],n=i[1],r=i[2],o=i[3],h=i[4],a=i[5],u=i[6],c=i[7],l=i[8],d=i[9],f=i[10],g=i[11],_=i[12],v=i[13],w=i[14],m=i[15],p=e[0],A=e[1],y=e[2],b=e[3];return t[0]=p*s+A*h+y*l+b*_,t[1]=p*n+A*a+y*d+b*v,t[2]=p*r+A*u+y*f+b*w,t[3]=p*o+A*c+y*g+b*m,p=e[4],A=e[5],y=e[6],b=e[7],t[4]=p*s+A*h+y*l+b*_,t[5]=p*n+A*a+y*d+b*v,t[6]=p*r+A*u+y*f+b*w,t[7]=p*o+A*c+y*g+b*m,p=e[8],A=e[9],y=e[10],b=e[11],t[8]=p*s+A*h+y*l+b*_,t[9]=p*n+A*a+y*d+b*v,t[10]=p*r+A*u+y*f+b*w,t[11]=p*o+A*c+y*g+b*m,p=e[12],A=e[13],y=e[14],b=e[15],t[12]=p*s+A*h+y*l+b*_,t[13]=p*n+A*a+y*d+b*v,t[14]=p*r+A*u+y*f+b*w,t[15]=p*o+A*c+y*g+b*m,t}})),Sd=Ui(((t,i)=>{r(),i.exports=function(t,i,e,s,n){var r=1/x.tan(i/2),o=1/(s-n);return t[0]=r/e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(n+s)*o,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*n*s*o,t[15]=0,t}})),Nd=Ui(((t,i)=>{r(),i.exports=function(t,i,e,s){var n,r,o,h,a,u,c,l,d,f,g,_,v,w,m,p,A,y,b,M,T,S,N,I,D=s[0],E=s[1],k=s[2],L=x.sqrt(D*D+E*E+k*k);if(x.abs(L)<1e-6)return null;D*=L=1/L,E*=L,k*=L,n=x.sin(e),r=x.cos(e),o=1-r,h=i[0],a=i[1],u=i[2],c=i[3],l=i[4],d=i[5],f=i[6],g=i[7],_=i[8],v=i[9],w=i[10],m=i[11],p=D*D*o+r,A=E*D*o+k*n,y=k*D*o-E*n,b=D*E*o-k*n,M=E*E*o+r,T=k*E*o+D*n,S=D*k*o+E*n,N=E*k*o-D*n,I=k*k*o+r,t[0]=h*p+l*A+_*y,t[1]=a*p+d*A+v*y,t[2]=u*p+f*A+w*y,t[3]=c*p+g*A+m*y,t[4]=h*b+l*M+_*T,t[5]=a*b+d*M+v*T,t[6]=u*b+f*M+w*T,t[7]=c*b+g*M+m*T,t[8]=h*S+l*N+_*I,t[9]=a*S+d*N+v*I,t[10]=u*S+f*N+w*I,t[11]=c*S+g*N+m*I,i!==t&&(t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15]);return t}})),Id=Ui(((t,i)=>{r(),i.exports=function(t,i,e){var s,n,r,o,h,a,u,c,l,d,f,g,_=e[0],v=e[1],w=e[2];i===t?(t[12]=i[0]*_+i[4]*v+i[8]*w+i[12],t[13]=i[1]*_+i[5]*v+i[9]*w+i[13],t[14]=i[2]*_+i[6]*v+i[10]*w+i[14],t[15]=i[3]*_+i[7]*v+i[11]*w+i[15]):(s=i[0],n=i[1],r=i[2],o=i[3],h=i[4],a=i[5],u=i[6],c=i[7],l=i[8],d=i[9],f=i[10],g=i[11],t[0]=s,t[1]=n,t[2]=r,t[3]=o,t[4]=h,t[5]=a,t[6]=u,t[7]=c,t[8]=l,t[9]=d,t[10]=f,t[11]=g,t[12]=s*_+h*v+l*w+i[12],t[13]=n*_+a*v+d*w+i[13],t[14]=r*_+u*v+f*w+i[14],t[15]=o*_+c*v+g*w+i[15]);return t}})),Dd=Ui((t=>{"use strict";r(),t._=function(t){return t&&t.__esModule?t:{default:t}}})),Ed=Ui(((t,i)=>{var e,n;r(),e=t,n=function(){"use strict";var t,i=void 0!==s?s:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},e=function(){return/Android/i.test(Kl.userAgent)||/iPhone|iPad|iPod/i.test(Kl.userAgent)},n=function(t,i){for(var e=0,s=t.length;e<s;e++)i[e]=t[e]},r=function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e]);return t},o=function(){function t(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),_.defineProperty(t,s.key,s)}}return function(i,e,s){return e&&t(i.prototype,e),s&&t(i,s),i}}(),a=function(t,i){if(Array.isArray(t))return t;if(f in _(t))return function(t,i){var e=[],s=!0,n=!1,r=void 0;try{for(var o,h=t[f]();!(s=(o=h.next()).done)&&(e.push(o.value),!i||e.length!==i);s=!0);}catch(t){n=!0,r=t}finally{try{!s&&h.return&&h.return()}finally{if(n)throw r}}return e}(t,i);throw new k("Invalid attempt to destructure non-iterable instance")},l=function(t,i,e){return t+(i-t)*e},d=(t=/iPad|iPhone|iPod/.test(Kl.platform),function(){return t}),g=function(){var t=-1!==Kl.userAgent.indexOf("Version")&&-1!==Kl.userAgent.indexOf("Android")&&-1!==Kl.userAgent.indexOf("Chrome");return function(){return t}}(),v=(/^((?!chrome|android).)*safari/i.test(Kl.userAgent),function(){var t=-1!==Kl.userAgent.indexOf("Firefox")&&-1!==Kl.userAgent.indexOf("Android");return function(){return t}}()),w=function(){var t=Kl.userAgent.match(/.*Chrome\/([0-9]+)/),i=t?C(t[1],10):null;return function(){return i}}(),m=function(){var t=!1;if(65===w()){var i=Kl.userAgent.match(/.*Chrome\/([0-9\.]*)/);if(i){var e=i[1].split("."),s=a(e,4),n=(s[0],s[1],s[2]),r=s[3];t=3325===C(n,10)&&C(r,10)<148}}return function(){return t}}(),p=function(){var t=-1!==Kl.userAgent.indexOf("R7 Build");return function(){return t}}(),A=function(){var t=90==s.orientation||-90==s.orientation;return p()?!t:t},y=function(){return x.max(s.screen.width,s.screen.height)*s.devicePixelRatio},M=function(){return x.min(s.screen.width,s.screen.height)*s.devicePixelRatio},T=function(){if(h.exitFullscreen)h.exitFullscreen();else if(h.webkitExitFullscreen)h.webkitExitFullscreen();else if(h.mozCancelFullScreen)h.mozCancelFullScreen();else{if(!h.msExitFullscreen)return!1;h.msExitFullscreen()}return!0},N=function(t,i,e,s){var n=t.createShader(t.VERTEX_SHADER);t.shaderSource(n,i),t.compileShader(n);var r=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(r,e),t.compileShader(r);var o=t.createProgram();for(var h in t.attachShader(o,n),t.attachShader(o,r),s)t.bindAttribLocation(o,s[h],h);return t.linkProgram(o),t.deleteShader(n),t.deleteShader(r),o},I=function(t,i){for(var e={},s=t.getProgramParameter(i,t.ACTIVE_UNIFORMS),n="",r=0;r<s;r++)e[n=t.getActiveUniform(i,r).name.replace("[0]","")]=t.getUniformLocation(i,n);return e},D=function(){var t,i=!1;return t=Kl.userAgent||Kl.vendor||s.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(i=!0),i},E=function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e]);return t},L=[],O=function(t){if(d()){R(t);var i,e,n=t.style.width,r=t.style.height,o=t.offsetWidth+1,h=t.offsetHeight;t.style.width=o+"px",t.style.height=h+"px";var a=function(){s.cancelAnimationFrame(e);for(var o=0;o<L.length;o++)if(L[o]===i){t.style.width=n,t.style.height=r,L.splice(o,1);break}};i={Ow:t,Rw:a},L.push(i),e=s.requestAnimationFrame(a)}},R=function(t){if(d())for(var i=0;i<L.length;i++)if(L[i].Ow===t){L[i].Rw();break}},P=function(){var t=x.PI/180,i=.25*x.PI,e=new Float32Array([0,0,0,1]),s=new Float32Array([0,0,0]);function n(n,r,o,h,a,u){!function(e,s,n,r){var o=x.tan(s?s.upDegrees*t:i),h=x.tan(s?s.downDegrees*t:i),a=x.tan(s?s.leftDegrees*t:i),u=x.tan(s?s.rightDegrees*t:i),c=2/(a+u),l=2/(o+h);e[0]=c,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=l,e[6]=0,e[7]=0,e[8]=-(a-u)*c*.5,e[9]=(o-h)*l*.5,e[10]=r/(n-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*n/(n-r),e[15]=0}(n,h||null,u.depthNear,u.depthFar),function(t,i,e){var s=i[0],n=i[1],r=i[2],o=i[3],h=s+s,a=n+n,u=r+r,c=s*h,l=s*a,d=s*u,f=n*a,g=n*u,_=r*u,v=o*h,w=o*a,m=o*u;t[0]=1-(f+_),t[1]=l+m,t[2]=d-w,t[3]=0,t[4]=l-m,t[5]=1-(c+_),t[6]=g+v,t[7]=0,t[8]=d+w,t[9]=g-v,t[10]=1-(c+f),t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1}(r,o.orientation||e,o.position||s),a&&function(t,i,e){var s,n,r,o,h,a,u,c,l,d,f,g,_=e[0],v=e[1],w=e[2];i===t?(t[12]=i[0]*_+i[4]*v+i[8]*w+i[12],t[13]=i[1]*_+i[5]*v+i[9]*w+i[13],t[14]=i[2]*_+i[6]*v+i[10]*w+i[14],t[15]=i[3]*_+i[7]*v+i[11]*w+i[15]):(s=i[0],n=i[1],r=i[2],o=i[3],h=i[4],a=i[5],u=i[6],c=i[7],l=i[8],d=i[9],f=i[10],g=i[11],t[0]=s,t[1]=n,t[2]=r,t[3]=o,t[4]=h,t[5]=a,t[6]=u,t[7]=c,t[8]=l,t[9]=d,t[10]=f,t[11]=g,t[12]=s*_+h*v+l*w+i[12],t[13]=n*_+a*v+d*w+i[13],t[14]=r*_+u*v+f*w+i[14],t[15]=o*_+c*v+g*w+i[15])}(r,r,a),function(t,i){var e=i[0],s=i[1],n=i[2],r=i[3],o=i[4],h=i[5],a=i[6],u=i[7],c=i[8],l=i[9],d=i[10],f=i[11],g=i[12],_=i[13],v=i[14],w=i[15],m=e*h-s*o,p=e*a-n*o,A=e*u-r*o,y=s*a-n*h,b=s*u-r*h,M=n*u-r*a,T=c*_-l*g,S=c*v-d*g,N=c*w-f*g,I=l*v-d*_,D=l*w-f*_,E=d*w-f*v,k=m*E-p*D+A*I+y*N-b*S+M*T;k&&(k=1/k,t[0]=(h*E-a*D+u*I)*k,t[1]=(n*D-s*E-r*I)*k,t[2]=(_*M-v*b+w*y)*k,t[3]=(d*b-l*M-f*y)*k,t[4]=(a*N-o*E-u*S)*k,t[5]=(e*E-n*N+r*S)*k,t[6]=(v*A-g*M-w*p)*k,t[7]=(c*M-d*A+f*p)*k,t[8]=(o*D-h*N+u*T)*k,t[9]=(s*N-e*D-r*T)*k,t[10]=(g*b-_*A+w*m)*k,t[11]=(l*A-c*b-f*m)*k,t[12]=(h*S-o*I-a*T)*k,t[13]=(e*I-s*S+n*T)*k,t[14]=(_*p-g*y-v*m)*k,t[15]=(c*y-l*p+d*m)*k)}(r,r)}return function(t,i,e){return!(!t||!i||(t.pose=i,t.timestamp=i.timestamp,n(t.leftProjectionMatrix,t.leftViewMatrix,i,e.Pw("left"),e.zw("left"),e),n(t.rightProjectionMatrix,t.rightViewMatrix,i,e.Pw("right"),e.zw("right"),e),0))}}(),z=function(t){var i,e=t.indexOf("://");i=-1!==e?e+3:0;var s=t.indexOf("/",i);return-1===s&&(s=t.length),t.substring(0,s)},B=function(){var t={};return function(i,e){void 0===t[i]&&(console.warn("webvr-polyfill: "+e),t[i]=!0)}}(),U=function(t,i){B(t,t+" has been deprecated. This may not work on native WebVR displays. "+(i?"Please use "+i+" instead.":""))},Q=function(t,i,e){if(i){for(var s=[],n=null,r=0;r<i.length;++r)switch(o=i[r]){case t.TEXTURE_BINDING_2D:case t.TEXTURE_BINDING_CUBE_MAP:if((a=i[++r])<t.TEXTURE0||a>t.TEXTURE31){console.error("TEXTURE_BINDING_2D or TEXTURE_BINDING_CUBE_MAP must be followed by a valid texture unit"),s.push(null,null);break}n||(n=t.getParameter(t.ACTIVE_TEXTURE)),t.activeTexture(a),s.push(t.getParameter(o),null);break;case t.ACTIVE_TEXTURE:n=t.getParameter(t.ACTIVE_TEXTURE),s.push(null);break;default:s.push(t.getParameter(o))}for(e(t),r=0;r<i.length;++r){var o=i[r],h=s[r];switch(o){case t.ACTIVE_TEXTURE:break;case t.ARRAY_BUFFER_BINDING:t.bindBuffer(t.ARRAY_BUFFER,h);break;case t.COLOR_CLEAR_VALUE:t.clearColor(h[0],h[1],h[2],h[3]);break;case t.COLOR_WRITEMASK:t.colorMask(h[0],h[1],h[2],h[3]);break;case t.CURRENT_PROGRAM:t.useProgram(h);break;case t.ELEMENT_ARRAY_BUFFER_BINDING:t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,h);break;case t.FRAMEBUFFER_BINDING:t.bindFramebuffer(t.FRAMEBUFFER,h);break;case t.RENDERBUFFER_BINDING:t.bindRenderbuffer(t.RENDERBUFFER,h);break;case t.TEXTURE_BINDING_2D:if((a=i[++r])<t.TEXTURE0||a>t.TEXTURE31)break;t.activeTexture(a),t.bindTexture(t.TEXTURE_2D,h);break;case t.TEXTURE_BINDING_CUBE_MAP:var a;if((a=i[++r])<t.TEXTURE0||a>t.TEXTURE31)break;t.activeTexture(a),t.bindTexture(t.TEXTURE_CUBE_MAP,h);break;case t.VIEWPORT:t.viewport(h[0],h[1],h[2],h[3]);break;case t.BLEND:case t.CULL_FACE:case t.DEPTH_TEST:case t.SCISSOR_TEST:case t.STENCIL_TEST:h?t.enable(o):t.disable(o);break;default:console.log("No GL restore behavior for 0x"+o.toString(16))}n&&t.activeTexture(n)}}else e(t)},F=["attribute vec2 position;","attribute vec3 texCoord;","varying vec2 vTexCoord;","uniform vec4 viewportOffsetScale[2];","void main() {","  vec4 viewport = viewportOffsetScale[int(texCoord.z)];","  vTexCoord = (texCoord.xy * viewport.zw) + viewport.xy;","  gl_Position = vec4( position, 1.0, 1.0 );","}"].join("\n"),Y=["precision mediump float;","uniform sampler2D diffuse;","varying vec2 vTexCoord;","void main() {","  gl_FragColor = texture2D(diffuse, vTexCoord);","}"].join("\n");function V(t,i,e,s){this.gl=t,this.cardboardUI=i,this.bufferScale=e,this.dirtySubmitFrameBindings=s,this.ctxAttribs=t.getContextAttributes(),this.meshWidth=20,this.meshHeight=20,this.bufferWidth=t.drawingBufferWidth,this.bufferHeight=t.drawingBufferHeight,this.realBindFramebuffer=t.bindFramebuffer,this.realEnable=t.enable,this.realDisable=t.disable,this.realColorMask=t.colorMask,this.realClearColor=t.clearColor,this.realViewport=t.viewport,d()||(this.realCanvasWidth=_.getOwnPropertyDescriptor(t.canvas.__proto__,"width"),this.realCanvasHeight=_.getOwnPropertyDescriptor(t.canvas.__proto__,"height")),this.isPatched=!1,this.lastBoundFramebuffer=null,this.cullFace=!1,this.depthTest=!1,this.blend=!1,this.scissorTest=!1,this.stencilTest=!1,this.viewport=[0,0,0,0],this.colorMask=[!0,!0,!0,!0],this.clearColor=[0,0,0,0],this.attribs={position:0,texCoord:1},this.program=N(t,F,Y,this.attribs),this.uniforms=I(t,this.program),this.viewportOffsetScale=new Float32Array(8),this.setTextureBounds(),this.vertexBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),this.indexCount=0,this.renderTarget=t.createTexture(),this.framebuffer=t.createFramebuffer(),this.depthStencilBuffer=null,this.depthBuffer=null,this.stencilBuffer=null,this.ctxAttribs.depth&&this.ctxAttribs.stencil?this.depthStencilBuffer=t.createRenderbuffer():this.ctxAttribs.depth?this.depthBuffer=t.createRenderbuffer():this.ctxAttribs.stencil&&(this.stencilBuffer=t.createRenderbuffer()),this.patch(),this.onResize()}V.prototype.destroy=function(){var t=this.gl;this.unpatch(),t.deleteProgram(this.program),t.deleteBuffer(this.vertexBuffer),t.deleteBuffer(this.indexBuffer),t.deleteTexture(this.renderTarget),t.deleteFramebuffer(this.framebuffer),this.depthStencilBuffer&&t.deleteRenderbuffer(this.depthStencilBuffer),this.depthBuffer&&t.deleteRenderbuffer(this.depthBuffer),this.stencilBuffer&&t.deleteRenderbuffer(this.stencilBuffer),this.cardboardUI&&this.cardboardUI.destroy()},V.prototype.onResize=function(){var t=this.gl,i=this,e=[t.RENDERBUFFER_BINDING,t.TEXTURE_BINDING_2D,t.TEXTURE0];Q(t,e,(function(t){i.realBindFramebuffer.call(t,t.FRAMEBUFFER,null),i.scissorTest&&i.realDisable.call(t,t.SCISSOR_TEST),i.realColorMask.call(t,!0,!0,!0,!0),i.realViewport.call(t,0,0,t.drawingBufferWidth,t.drawingBufferHeight),i.realClearColor.call(t,0,0,0,1),t.clear(t.COLOR_BUFFER_BIT),i.realBindFramebuffer.call(t,t.FRAMEBUFFER,i.framebuffer),t.bindTexture(t.TEXTURE_2D,i.renderTarget),t.texImage2D(t.TEXTURE_2D,0,i.ctxAttribs.alpha?t.RGBA:t.RGB,i.bufferWidth,i.bufferHeight,0,i.ctxAttribs.alpha?t.RGBA:t.RGB,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,i.renderTarget,0),i.ctxAttribs.depth&&i.ctxAttribs.stencil?(t.bindRenderbuffer(t.RENDERBUFFER,i.depthStencilBuffer),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,i.bufferWidth,i.bufferHeight),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,i.depthStencilBuffer)):i.ctxAttribs.depth?(t.bindRenderbuffer(t.RENDERBUFFER,i.depthBuffer),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,i.bufferWidth,i.bufferHeight),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,i.depthBuffer)):i.ctxAttribs.stencil&&(t.bindRenderbuffer(t.RENDERBUFFER,i.stencilBuffer),t.renderbufferStorage(t.RENDERBUFFER,t.STENCIL_INDEX8,i.bufferWidth,i.bufferHeight),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.STENCIL_ATTACHMENT,t.RENDERBUFFER,i.stencilBuffer)),!t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer incomplete!"),i.realBindFramebuffer.call(t,t.FRAMEBUFFER,i.lastBoundFramebuffer),i.scissorTest&&i.realEnable.call(t,t.SCISSOR_TEST),i.realColorMask.apply(t,i.colorMask),i.realViewport.apply(t,i.viewport),i.realClearColor.apply(t,i.clearColor)})),this.cardboardUI&&this.cardboardUI.onResize()},V.prototype.patch=function(){if(!this.isPatched){var t=this,i=this.gl.canvas,e=this.gl;d()||(i.width=y()*this.bufferScale,i.height=M()*this.bufferScale,_.defineProperty(i,"width",{configurable:!0,enumerable:!0,get:function(){return t.bufferWidth},set:function(e){t.bufferWidth=e,t.realCanvasWidth.set.call(i,e),t.onResize()}}),_.defineProperty(i,"height",{configurable:!0,enumerable:!0,get:function(){return t.bufferHeight},set:function(e){t.bufferHeight=e,t.realCanvasHeight.set.call(i,e),t.onResize()}})),this.lastBoundFramebuffer=e.getParameter(e.FRAMEBUFFER_BINDING),null==this.lastBoundFramebuffer&&(this.lastBoundFramebuffer=this.framebuffer,this.gl.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer)),this.gl.bindFramebuffer=function(i,s){t.lastBoundFramebuffer=s||t.framebuffer,t.realBindFramebuffer.call(e,i,t.lastBoundFramebuffer)},this.cullFace=e.getParameter(e.CULL_FACE),this.depthTest=e.getParameter(e.DEPTH_TEST),this.blend=e.getParameter(e.BLEND),this.scissorTest=e.getParameter(e.SCISSOR_TEST),this.stencilTest=e.getParameter(e.STENCIL_TEST),e.enable=function(i){switch(i){case e.CULL_FACE:t.cullFace=!0;break;case e.DEPTH_TEST:t.depthTest=!0;break;case e.BLEND:t.blend=!0;break;case e.SCISSOR_TEST:t.scissorTest=!0;break;case e.STENCIL_TEST:t.stencilTest=!0}t.realEnable.call(e,i)},e.disable=function(i){switch(i){case e.CULL_FACE:t.cullFace=!1;break;case e.DEPTH_TEST:t.depthTest=!1;break;case e.BLEND:t.blend=!1;break;case e.SCISSOR_TEST:t.scissorTest=!1;break;case e.STENCIL_TEST:t.stencilTest=!1}t.realDisable.call(e,i)},this.colorMask=e.getParameter(e.COLOR_WRITEMASK),e.colorMask=function(i,s,n,r){t.colorMask[0]=i,t.colorMask[1]=s,t.colorMask[2]=n,t.colorMask[3]=r,t.realColorMask.call(e,i,s,n,r)},this.clearColor=e.getParameter(e.COLOR_CLEAR_VALUE),e.clearColor=function(i,s,n,r){t.clearColor[0]=i,t.clearColor[1]=s,t.clearColor[2]=n,t.clearColor[3]=r,t.realClearColor.call(e,i,s,n,r)},this.viewport=e.getParameter(e.VIEWPORT),e.viewport=function(i,s,n,r){t.viewport[0]=i,t.viewport[1]=s,t.viewport[2]=n,t.viewport[3]=r,t.realViewport.call(e,i,s,n,r)},this.isPatched=!0,O(i)}},V.prototype.unpatch=function(){if(this.isPatched){var t=this.gl,i=this.gl.canvas;d()||(_.defineProperty(i,"width",this.realCanvasWidth),_.defineProperty(i,"height",this.realCanvasHeight)),i.width=this.bufferWidth,i.height=this.bufferHeight,t.bindFramebuffer=this.realBindFramebuffer,t.enable=this.realEnable,t.disable=this.realDisable,t.colorMask=this.realColorMask,t.clearColor=this.realClearColor,t.viewport=this.realViewport,this.lastBoundFramebuffer==this.framebuffer&&t.bindFramebuffer(t.FRAMEBUFFER,null),this.isPatched=!1,u((function(){O(i)}),1)}},V.prototype.setTextureBounds=function(t,i){t||(t=[0,0,.5,1]),i||(i=[.5,0,.5,1]),this.viewportOffsetScale[0]=t[0],this.viewportOffsetScale[1]=t[1],this.viewportOffsetScale[2]=t[2],this.viewportOffsetScale[3]=t[3],this.viewportOffsetScale[4]=i[0],this.viewportOffsetScale[5]=i[1],this.viewportOffsetScale[6]=i[2],this.viewportOffsetScale[7]=i[3]},V.prototype.submitFrame=function(){var t=this.gl,i=this,e=[];if(this.dirtySubmitFrameBindings||e.push(t.CURRENT_PROGRAM,t.ARRAY_BUFFER_BINDING,t.ELEMENT_ARRAY_BUFFER_BINDING,t.TEXTURE_BINDING_2D,t.TEXTURE0),Q(t,e,(function(t){i.realBindFramebuffer.call(t,t.FRAMEBUFFER,null),i.cullFace&&i.realDisable.call(t,t.CULL_FACE),i.depthTest&&i.realDisable.call(t,t.DEPTH_TEST),i.blend&&i.realDisable.call(t,t.BLEND),i.scissorTest&&i.realDisable.call(t,t.SCISSOR_TEST),i.stencilTest&&i.realDisable.call(t,t.STENCIL_TEST),i.realColorMask.call(t,!0,!0,!0,!0),i.realViewport.call(t,0,0,t.drawingBufferWidth,t.drawingBufferHeight),(i.ctxAttribs.alpha||d())&&(i.realClearColor.call(t,0,0,0,1),t.clear(t.COLOR_BUFFER_BIT)),t.useProgram(i.program),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,i.indexBuffer),t.bindBuffer(t.ARRAY_BUFFER,i.vertexBuffer),t.enableVertexAttribArray(i.attribs.position),t.enableVertexAttribArray(i.attribs.texCoord),t.vertexAttribPointer(i.attribs.position,2,t.FLOAT,!1,20,0),t.vertexAttribPointer(i.attribs.texCoord,3,t.FLOAT,!1,20,8),t.activeTexture(t.TEXTURE0),t.uniform1i(i.uniforms.diffuse,0),t.bindTexture(t.TEXTURE_2D,i.renderTarget),t.uniform4fv(i.uniforms.viewportOffsetScale,i.viewportOffsetScale),t.drawElements(t.TRIANGLES,i.indexCount,t.UNSIGNED_SHORT,0),i.cardboardUI&&i.cardboardUI.renderNoState(),i.realBindFramebuffer.call(i.gl,t.FRAMEBUFFER,i.framebuffer),i.ctxAttribs.preserveDrawingBuffer||(i.realClearColor.call(t,0,0,0,0),t.clear(t.COLOR_BUFFER_BIT)),i.dirtySubmitFrameBindings||i.realBindFramebuffer.call(t,t.FRAMEBUFFER,i.lastBoundFramebuffer),i.cullFace&&i.realEnable.call(t,t.CULL_FACE),i.depthTest&&i.realEnable.call(t,t.DEPTH_TEST),i.blend&&i.realEnable.call(t,t.BLEND),i.scissorTest&&i.realEnable.call(t,t.SCISSOR_TEST),i.stencilTest&&i.realEnable.call(t,t.STENCIL_TEST),i.realColorMask.apply(t,i.colorMask),i.realViewport.apply(t,i.viewport),!i.ctxAttribs.alpha&&i.ctxAttribs.preserveDrawingBuffer||i.realClearColor.apply(t,i.clearColor)})),d()){var s=t.canvas;s.width==i.bufferWidth&&s.height==i.bufferHeight||(i.bufferWidth=s.width,i.bufferHeight=s.height,i.onResize())}},V.prototype.updateDeviceInfo=function(t){var i=this.gl,e=this,s=[i.ARRAY_BUFFER_BINDING,i.ELEMENT_ARRAY_BUFFER_BINDING];Q(i,s,(function(i){var s=e.Bw(e.meshWidth,e.meshHeight,t);if(i.bindBuffer(i.ARRAY_BUFFER,e.vertexBuffer),i.bufferData(i.ARRAY_BUFFER,s,i.STATIC_DRAW),!e.indexCount){var n=e.Uw(e.meshWidth,e.meshHeight);i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,e.indexBuffer),i.bufferData(i.ELEMENT_ARRAY_BUFFER,n,i.STATIC_DRAW),e.indexCount=n.length}}))},V.prototype.Bw=function(t,i,e){for(var s=new Float32Array(2*t*i*5),n=e.getLeftEyeVisibleTanAngles(),r=e.getLeftEyeNoLensTanAngles(),o=e.getLeftEyeVisibleScreenRect(r),h=0,a=0;a<2;a++){for(var u=0;u<i;u++)for(var c=0;c<t;c++,h++){var d=c/(t-1),f=u/(i-1),g=d,_=f,v=l(n[0],n[2],d),w=l(n[3],n[1],f),m=x.sqrt(v*v+w*w),p=e.distortion.distortInverse(m),A=w*p/m;d=(v*p/m-r[0])/(r[2]-r[0]),f=(A-r[3])/(r[1]-r[3]),d=2*(o.x+d*o.width-.5),f=2*(o.y+f*o.height-.5),s[5*h+0]=d,s[5*h+1]=f,s[5*h+2]=g,s[5*h+3]=_,s[5*h+4]=a}var y=n[2]-n[0];n[0]=-(y+n[0]),n[2]=y-n[2],y=r[2]-r[0],r[0]=-(y+r[0]),r[2]=y-r[2],o.x=1-(o.x+o.width)}return s},V.prototype.Uw=function(t,i){for(var e=new Uint16Array(2*(t-1)*(i-1)*6),s=t/2,n=i/2,r=0,o=0,h=0;h<2;h++)for(var a=0;a<i;a++)for(var u=0;u<t;u++,r++)0!=u&&0!=a&&(u<=s==a<=n?(e[o++]=r,e[o++]=r-t-1,e[o++]=r-t,e[o++]=r-t-1,e[o++]=r,e[o++]=r-1):(e[o++]=r-1,e[o++]=r-t,e[o++]=r,e[o++]=r-t,e[o++]=r-1,e[o++]=r-t-1));return e},V.prototype.Qw=function(t,i){var e=_.getOwnPropertyDescriptor(t,i);return void 0!==e.get&&void 0!==e.set||(e.configurable=!0,e.enumerable=!0,e.get=function(){return this.getAttribute(i)},e.set=function(t){this.setAttribute(i,t)}),e};var G=["attribute vec2 position;","uniform mat4 projectionMat;","void main() {","  gl_Position = projectionMat * vec4( position, -1.0, 1.0 );","}"].join("\n"),W=["precision mediump float;","uniform vec4 color;","void main() {","  gl_FragColor = color;","}"].join("\n"),Z=x.PI/180,H=.3125,X=28;function q(t){this.gl=t,this.attribs={position:0},this.program=N(t,G,W,this.attribs),this.uniforms=I(t,this.program),this.vertexBuffer=t.createBuffer(),this.gearOffset=0,this.gearVertexCount=0,this.arrowOffset=0,this.arrowVertexCount=0,this.projMat=new Float32Array(16),this.listener=null,this.onResize()}function K(t){this.coefficients=t}q.prototype.destroy=function(){var t=this.gl;this.listener&&t.canvas.removeEventListener("click",this.listener,!1),t.deleteProgram(this.program),t.deleteBuffer(this.vertexBuffer)},q.prototype.listen=function(t,i){var e=this.gl.canvas,s="undefined"!=typeof TouchEvent;this.listener=function(n){var r=e.clientWidth/2,o=s&&n instanceof TouchEvent?(n.preventDefault(),n.changedTouches[0]):n;o.clientX>r-42&&o.clientX<r+42&&o.clientY>e.clientHeight-42?(n.preventDefault(),n.stopImmediatePropagation(),t(n)):o.clientX<42&&o.clientY<42&&(n.preventDefault(),n.stopImmediatePropagation(),i(n))},e.addEventListener("click",this.listener,!1),e.addEventListener("touchstart",this.listener,!1)},q.prototype.onResize=function(){var t=this.gl,i=this,e=[t.ARRAY_BUFFER_BINDING];Q(t,e,(function(t){var e=[],n=t.drawingBufferWidth/2,r=x.max(screen.width,screen.height)*s.devicePixelRatio,o=t.drawingBufferWidth/r*s.devicePixelRatio,h=4*o/2,a=42*o,u=X*o/2,c=14*o;function l(t,i){var s=(90-t)*Z,r=x.cos(s),o=x.sin(s);e.push(H*r*u+n,H*o*u+u),e.push(i*r*u+n,i*o*u+u)}e.push(n-h,a),e.push(n-h,t.drawingBufferHeight),e.push(n+h,a),e.push(n+h,t.drawingBufferHeight),i.gearOffset=e.length/2;for(var d=0;d<=6;d++){var f=60*d;l(f,1),l(f+12,1),l(f+20,.75),l(f+40,.75),l(f+48,1)}function g(i,s){e.push(c+i,t.drawingBufferHeight-c-s)}i.gearVertexCount=e.length/2-i.gearOffset,i.arrowOffset=e.length/2;var _=h/x.sin(45*Z);g(0,u),g(u,0),g(u+_,_),g(_,u+_),g(_,u-_),g(0,u),g(u,2*u),g(u+_,2*u-_),g(_,u-_),g(0,u),g(_,u-h),g(X*o,u-h),g(_,u+h),g(X*o,u+h),i.arrowVertexCount=e.length/2-i.arrowOffset,t.bindBuffer(t.ARRAY_BUFFER,i.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array(e),t.STATIC_DRAW)}))},q.prototype.render=function(){var t=this.gl,i=this,e=[t.CULL_FACE,t.DEPTH_TEST,t.BLEND,t.SCISSOR_TEST,t.STENCIL_TEST,t.COLOR_WRITEMASK,t.VIEWPORT,t.CURRENT_PROGRAM,t.ARRAY_BUFFER_BINDING];Q(t,e,(function(t){t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.BLEND),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.colorMask(!0,!0,!0,!0),t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight),i.renderNoState()}))},q.prototype.renderNoState=function(){var t,i,e,s,n,r,o,h,a,u,c=this.gl;c.useProgram(this.program),c.bindBuffer(c.ARRAY_BUFFER,this.vertexBuffer),c.enableVertexAttribArray(this.attribs.position),c.vertexAttribPointer(this.attribs.position,2,c.FLOAT,!1,8,0),c.uniform4f(this.uniforms.color,1,1,1,1),t=this.projMat,i=0,e=c.drawingBufferWidth,s=0,n=c.drawingBufferHeight,h=1/(i-e),a=1/(s-n),u=1/((r=.1)-(o=1024)),t[0]=-2*h,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(i+e)*h,t[13]=(n+s)*a,t[14]=(o+r)*u,t[15]=1,c.uniformMatrix4fv(this.uniforms.projectionMat,!1,this.projMat),c.drawArrays(c.TRIANGLE_STRIP,0,4),c.drawArrays(c.TRIANGLE_STRIP,this.gearOffset,this.gearVertexCount),c.drawArrays(c.TRIANGLE_STRIP,this.arrowOffset,this.arrowVertexCount)},K.prototype.distortInverse=function(t){for(var i=0,e=1,s=t-this.distort(i);x.abs(e-i)>1e-4;){var n=t-this.distort(e),r=e-n*((e-i)/(n-s));i=e,e=r,s=n}return e},K.prototype.distort=function(t){for(var i=t*t,e=0,s=0;s<this.coefficients.length;s++)e=i*(e+this.coefficients[s]);return(e+1)*t};var J=x.PI/180,$=180/x.PI,tt=function(t,i,e){this.x=t||0,this.y=i||0,this.z=e||0};tt.prototype={constructor:tt,set:function(t,i,e){return this.x=t,this.y=i,this.z=e,this},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},length:function(){return x.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){var t=this.length();if(0!==t){var i=1/t;this.multiplyScalar(i)}else this.x=0,this.y=0,this.z=0;return this},multiplyScalar:function(t){this.x*=t,this.y*=t,this.z*=t},applyQuaternion:function(t){var i=this.x,e=this.y,s=this.z,n=t.x,r=t.y,o=t.z,h=t.w,a=h*i+r*s-o*e,u=h*e+o*i-n*s,c=h*s+n*e-r*i,l=-n*i-r*e-o*s;return this.x=a*h+l*-n+u*-o-c*-r,this.y=u*h+l*-r+c*-n-a*-o,this.z=c*h+l*-o+a*-r-u*-n,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},crossVectors:function(t,i){var e=t.x,s=t.y,n=t.z,r=i.x,o=i.y,h=i.z;return this.x=s*h-n*o,this.y=n*r-e*h,this.z=e*o-s*r,this}};var it=function(t,i,e,s){this.x=t||0,this.y=i||0,this.z=e||0,this.w=void 0!==s?s:1};function et(t){this.width=t.width||y(),this.height=t.height||M(),this.widthMeters=t.widthMeters,this.heightMeters=t.heightMeters,this.bevelMeters=t.bevelMeters}it.prototype={constructor:it,set:function(t,i,e,s){return this.x=t,this.y=i,this.z=e,this.w=s,this},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this},setFromEulerXYZ:function(t,i,e){var s=x.cos(t/2),n=x.cos(i/2),r=x.cos(e/2),o=x.sin(t/2),h=x.sin(i/2),a=x.sin(e/2);return this.x=o*n*r+s*h*a,this.y=s*h*r-o*n*a,this.z=s*n*a+o*h*r,this.w=s*n*r-o*h*a,this},setFromEulerYXZ:function(t,i,e){var s=x.cos(t/2),n=x.cos(i/2),r=x.cos(e/2),o=x.sin(t/2),h=x.sin(i/2),a=x.sin(e/2);return this.x=o*n*r+s*h*a,this.y=s*h*r-o*n*a,this.z=s*n*a-o*h*r,this.w=s*n*r+o*h*a,this},setFromAxisAngle:function(t,i){var e=i/2,s=x.sin(e);return this.x=t.x*s,this.y=t.y*s,this.z=t.z*s,this.w=x.cos(e),this},multiply:function(t){return this.multiplyQuaternions(this,t)},multiplyQuaternions:function(t,i){var e=t.x,s=t.y,n=t.z,r=t.w,o=i.x,h=i.y,a=i.z,u=i.w;return this.x=e*u+r*o+s*a-n*h,this.y=s*u+r*h+n*o-e*a,this.z=n*u+r*a+e*h-s*o,this.w=r*u-e*o-s*h-n*a,this},inverse:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this.normalize(),this},normalize:function(){var t=x.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===t?(this.x=0,this.y=0,this.z=0,this.w=1):(t=1/t,this.x=this.x*t,this.y=this.y*t,this.z=this.z*t,this.w=this.w*t),this},slerp:function(t,i){if(0===i)return this;if(1===i)return this.copy(t);var e=this.x,s=this.y,n=this.z,r=this.w,o=r*t.w+e*t.x+s*t.y+n*t.z;if(o<0?(this.w=-t.w,this.x=-t.x,this.y=-t.y,this.z=-t.z,o=-o):this.copy(t),o>=1)return this.w=r,this.x=e,this.y=s,this.z=n,this;var h=x.acos(o),a=x.sqrt(1-o*o);if(x.abs(a)<.001)return this.w=.5*(r+this.w),this.x=.5*(e+this.x),this.y=.5*(s+this.y),this.z=.5*(n+this.z),this;var u=x.sin((1-i)*h)/a,c=x.sin(i*h)/a;return this.w=r*u+this.w*c,this.x=e*u+this.x*c,this.y=s*u+this.y*c,this.z=n*u+this.z*c,this},setFromUnitVectors:function(){var t,i;return function(e,s){return void 0===t&&(t=new tt),(i=e.dot(s)+1)<1e-6?(i=0,x.abs(e.x)>x.abs(e.z)?t.set(-e.y,e.x,0):t.set(0,-e.z,e.y)):t.crossVectors(e,s),this.x=t.x,this.y=t.y,this.z=t.z,this.w=i,this.normalize(),this}}()};var st=new et({widthMeters:.11,heightMeters:.062,bevelMeters:.004}),nt=new et({widthMeters:.1038,heightMeters:.0584,bevelMeters:.004}),rt={CardboardV1:new ht({id:"CardboardV1",label:"Cardboard I/O 2014",fov:40,interLensDistance:.06,baselineLensDistance:.035,screenLensDistance:.042,distortionCoefficients:[.441,.156],inverseCoefficients:[-.4410035,.42756155,-.4804439,.5460139,-.58821183,.5733938,-.48303202,.33299083,-.17573841,.0651772,-.01488963,.001559834]}),CardboardV2:new ht({id:"CardboardV2",label:"Cardboard I/O 2015",fov:60,interLensDistance:.064,baselineLensDistance:.035,screenLensDistance:.039,distortionCoefficients:[.34,.55],inverseCoefficients:[-.33836704,-.18162185,.862655,-1.2462051,1.0560602,-.58208317,.21609078,-.05444823,.009177956,-.0009904169,6183535e-11,-16981803e-13]})};function ot(t){this.viewer=rt.CardboardV2,this.updateDeviceParams(t),this.distortion=new K(this.viewer.distortionCoefficients)}function ht(t){this.id=t.id,this.label=t.label,this.fov=t.fov,this.interLensDistance=t.interLensDistance,this.baselineLensDistance=t.baselineLensDistance,this.screenLensDistance=t.screenLensDistance,this.distortionCoefficients=t.distortionCoefficients,this.inverseCoefficients=t.inverseCoefficients}ot.prototype.updateDeviceParams=function(t){this.device=this.Fw(t)||this.device},ot.prototype.getDevice=function(){return this.device},ot.prototype.setViewer=function(t){this.viewer=t,this.distortion=new K(this.viewer.distortionCoefficients)},ot.prototype.Fw=function(t){if(!t)return d()?(console.warn("Using fallback iOS device measurements."),nt):(console.warn("Using fallback Android device measurements."),st);var i=.0254,e=i/t.xdpi,s=i/t.ydpi;return new et({widthMeters:e*y(),heightMeters:s*M(),bevelMeters:.001*t.bevelMm})},ot.prototype.getDistortedFieldOfViewLeftEye=function(){var t=this.viewer,i=this.device,e=this.distortion,s=t.screenLensDistance,n=(i.widthMeters-t.interLensDistance)/2,r=t.interLensDistance/2,o=t.baselineLensDistance-i.bevelMeters,h=i.heightMeters-o,a=$*x.atan(e.distort(n/s)),u=$*x.atan(e.distort(r/s)),c=$*x.atan(e.distort(o/s)),l=$*x.atan(e.distort(h/s));return{leftDegrees:x.min(a,t.fov),rightDegrees:x.min(u,t.fov),downDegrees:x.min(c,t.fov),upDegrees:x.min(l,t.fov)}},ot.prototype.getLeftEyeVisibleTanAngles=function(){var t=this.viewer,i=this.device,e=this.distortion,s=x.tan(-J*t.fov),n=x.tan(J*t.fov),r=x.tan(J*t.fov),o=x.tan(-J*t.fov),h=i.widthMeters/4,a=i.heightMeters/2,u=t.baselineLensDistance-i.bevelMeters-a,c=t.interLensDistance/2-h,l=-u,d=t.screenLensDistance,f=e.distort((c-h)/d),g=e.distort((l+a)/d),_=e.distort((c+h)/d),v=e.distort((l-a)/d),w=new Float32Array(4);return w[0]=x.max(s,f),w[1]=x.min(n,g),w[2]=x.min(r,_),w[3]=x.max(o,v),w},ot.prototype.getLeftEyeNoLensTanAngles=function(){var t=this.viewer,i=this.device,e=this.distortion,s=new Float32Array(4),n=e.distortInverse(x.tan(-J*t.fov)),r=e.distortInverse(x.tan(J*t.fov)),o=e.distortInverse(x.tan(J*t.fov)),h=e.distortInverse(x.tan(-J*t.fov)),a=i.widthMeters/4,u=i.heightMeters/2,c=t.baselineLensDistance-i.bevelMeters-u,l=t.interLensDistance/2-a,d=-c,f=t.screenLensDistance,g=(l-a)/f,_=(d+u)/f,v=(l+a)/f,w=(d-u)/f;return s[0]=x.max(n,g),s[1]=x.min(r,_),s[2]=x.min(o,v),s[3]=x.max(h,w),s},ot.prototype.getLeftEyeVisibleScreenRect=function(t){var i=this.viewer,e=this.device,s=i.screenLensDistance,n=(e.widthMeters-i.interLensDistance)/2,r=i.baselineLensDistance-e.bevelMeters,o=(t[0]*s+n)/e.widthMeters,h=(t[1]*s+r)/e.heightMeters,a=(t[2]*s+n)/e.widthMeters,u=(t[3]*s+r)/e.heightMeters;return{x:o,y:u,width:a-o,height:h-u}},ot.prototype.getFieldOfViewLeftEye=function(t){return t?this.getUndistortedFieldOfViewLeftEye():this.getDistortedFieldOfViewLeftEye()},ot.prototype.getFieldOfViewRightEye=function(t){var i=this.getFieldOfViewLeftEye(t);return{leftDegrees:i.rightDegrees,rightDegrees:i.leftDegrees,upDegrees:i.upDegrees,downDegrees:i.downDegrees}},ot.prototype.getUndistortedFieldOfViewLeftEye=function(){var t=this.Yw();return{leftDegrees:$*x.atan(t.outerDist),rightDegrees:$*x.atan(t.innerDist),downDegrees:$*x.atan(t.bottomDist),upDegrees:$*x.atan(t.topDist)}},ot.prototype.getUndistortedViewportLeftEye=function(){var t=this.Yw(),i=this.viewer,e=this.device,s=i.screenLensDistance,n=e.widthMeters/s,r=e.heightMeters/s,o=e.width/n,h=e.height/r,a=x.round((t.eyePosX-t.outerDist)*o),u=x.round((t.eyePosY-t.bottomDist)*h);return{x:a,y:u,width:x.round((t.eyePosX+t.innerDist)*o)-a,height:x.round((t.eyePosY+t.topDist)*h)-u}},ot.prototype.Yw=function(){var t=this.viewer,i=this.device,e=this.distortion,s=t.screenLensDistance,n=t.interLensDistance/2/s,r=i.widthMeters/s,o=i.heightMeters/s,h=r/2-n,a=(t.baselineLensDistance-i.bevelMeters)/s,u=t.fov,c=e.distortInverse(x.tan(J*u)),l=x.min(h,c),d=x.min(n,c),f=x.min(a,c);return{outerDist:l,innerDist:d,topDist:x.min(o-a,c),bottomDist:f,eyePosX:h,eyePosY:a}},ot.Viewers=rt;var at={format:1,last_updated:"2018-02-20T22:55:10Z",devices:[{type:"android",rules:[{mdmh:"asus/*/Nexus 7/*"},{ua:"Nexus 7"}],dpi:[320.8,323],bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_Z00AD/*"},{ua:"ASUS_Z00AD"}],dpi:[403,404.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel XL/*"},{ua:"Pixel XL"}],dpi:[537.9,533],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel/*"},{ua:"Pixel"}],dpi:[432.6,436.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC6435LVW/*"},{ua:"HTC6435LVW"}],dpi:[449.7,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC One XL/*"},{ua:"HTC One XL"}],dpi:[315.3,314.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"htc/*/Nexus 9/*"},{ua:"Nexus 9"}],dpi:289,bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One M9/*"},{ua:"HTC One M9"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One_M8/*"},{ua:"HTC One_M8"}],dpi:[449.7,447.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One/*"},{ua:"HTC One"}],dpi:472.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/Nexus 6P/*"},{ua:"Nexus 6P"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LENOVO/*/Lenovo PB2-690Y/*"},{ua:"Lenovo PB2-690Y"}],dpi:[457.2,454.713],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5X/*"},{ua:"Nexus 5X"}],dpi:[422,419.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS345/*"},{ua:"LGMS345"}],dpi:[221.7,219.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D800/*"},{ua:"LG-D800"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D850/*"},{ua:"LG-D850"}],dpi:[537.9,541.9],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/VS985 4G/*"},{ua:"VS985 4G"}],dpi:[537.9,535.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5/*"},{ua:"Nexus 5 B"}],dpi:[442.4,444.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 4/*"},{ua:"Nexus 4"}],dpi:[319.8,318.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LG-P769/*"},{ua:"LG-P769"}],dpi:[240.6,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS323/*"},{ua:"LGMS323"}],dpi:[206.6,204.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGLS996/*"},{ua:"LGLS996"}],dpi:[403.4,401.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/4560MMX/*"},{ua:"4560MMX"}],dpi:[240,219.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/A250/*"},{ua:"Micromax A250"}],dpi:[480,446.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/Micromax AQ4501/*"},{ua:"Micromax AQ4501"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/G5/*"},{ua:"Moto G (5) Plus"}],dpi:[403.4,403],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/DROID RAZR/*"},{ua:"DROID RAZR"}],dpi:[368.1,256.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT830C/*"},{ua:"XT830C"}],dpi:[254,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1021/*"},{ua:"XT1021"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1023/*"},{ua:"XT1023"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1028/*"},{ua:"XT1028"}],dpi:[326.6,327.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1034/*"},{ua:"XT1034"}],dpi:[326.6,328.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1053/*"},{ua:"XT1053"}],dpi:[315.3,316.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1562/*"},{ua:"XT1562"}],dpi:[403.4,402.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/Nexus 6/*"},{ua:"Nexus 6 B"}],dpi:[494.3,489.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1063/*"},{ua:"XT1063"}],dpi:[295,296.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1064/*"},{ua:"XT1064"}],dpi:[295,295.6],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1092/*"},{ua:"XT1092"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1095/*"},{ua:"XT1095"}],dpi:[422,423.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/G4/*"},{ua:"Moto G (4)"}],dpi:401,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/A0001/*"},{ua:"A0001"}],dpi:[403.4,401],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1005/*"},{ua:"ONE E1005"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2005/*"},{ua:"ONE A2005"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A5000/*"},{ua:"ONEPLUS A5000 "}],dpi:[403.411,399.737],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A5010/*"},{ua:"ONEPLUS A5010"}],dpi:[403,400],bw:2,ac:1e3},{type:"android",rules:[{mdmh:"OPPO/*/X909/*"},{ua:"X909"}],dpi:[442.4,444.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9082/*"},{ua:"GT-I9082"}],dpi:[184.7,185.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G360P/*"},{ua:"SM-G360P"}],dpi:[196.7,205.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Nexus S/*"},{ua:"Nexus S"}],dpi:[234.5,229.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[304.8,303.9],bw:5,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-T230NU/*"},{ua:"SM-T230NU"}],dpi:216,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SGH-T399/*"},{ua:"SGH-T399"}],dpi:[217.7,231.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SGH-M919/*"},{ua:"SGH-M919"}],dpi:[440.8,437.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N9005/*"},{ua:"SM-N9005"}],dpi:[386.4,387],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SM-N900A/*"},{ua:"SAMSUNG-SM-N900A"}],dpi:[386.4,387.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9500/*"},{ua:"GT-I9500"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/GT-I9505/*"},{ua:"GT-I9505"}],dpi:439.4,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900F/*"},{ua:"SM-G900F"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900M/*"},{ua:"SM-G900M"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G800F/*"},{ua:"SM-G800F"}],dpi:326.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G906S/*"},{ua:"SM-G906S"}],dpi:[562.7,572.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[306.7,304.8],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-T535/*"},{ua:"SM-T535"}],dpi:[142.6,136.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-N920C/*"},{ua:"SM-N920C"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920P/*"},{ua:"SM-N920P"}],dpi:[386.3655,390.144],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920W8/*"},{ua:"SM-N920W8"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300I/*"},{ua:"GT-I9300I"}],dpi:[304.8,305.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9195/*"},{ua:"GT-I9195"}],dpi:[249.4,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SPH-L520/*"},{ua:"SPH-L520"}],dpi:[249.4,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SGH-I717/*"},{ua:"SAMSUNG-SGH-I717"}],dpi:285.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SPH-D710/*"},{ua:"SPH-D710"}],dpi:[217.7,204.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-N7100/*"},{ua:"GT-N7100"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SCH-I605/*"},{ua:"SCH-I605"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Galaxy Nexus/*"},{ua:"Galaxy Nexus"}],dpi:[315.3,314.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910H/*"},{ua:"SM-N910H"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910C/*"},{ua:"SM-N910C"}],dpi:[515.2,520.2],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G130M/*"},{ua:"SM-G130M"}],dpi:[165.9,164.8],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G928I/*"},{ua:"SM-G928I"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G920F/*"},{ua:"SM-G920F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G920P/*"},{ua:"SM-G920P"}],dpi:[522.5,577],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G925F/*"},{ua:"SM-G925F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G925V/*"},{ua:"SM-G925V"}],dpi:[522.5,576.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G930F/*"},{ua:"SM-G930F"}],dpi:576.6,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G935F/*"},{ua:"SM-G935F"}],dpi:533,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G950F/*"},{ua:"SM-G950F"}],dpi:[562.707,565.293],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G955U/*"},{ua:"SM-G955U"}],dpi:[522.514,525.762],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/C6903/*"},{ua:"C6903"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/D6653/*"},{ua:"D6653"}],dpi:[428.6,427.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6653/*"},{ua:"E6653"}],dpi:[428.6,425.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6853/*"},{ua:"E6853"}],dpi:[403.4,401.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/SGP321/*"},{ua:"SGP321"}],dpi:[224.7,224.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"TCT/*/ALCATEL ONE TOUCH Fierce/*"},{ua:"ALCATEL ONE TOUCH Fierce"}],dpi:[240,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"THL/*/thl 5000/*"},{ua:"thl 5000"}],dpi:[480,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Fly/*/IQ4412/*"},{ua:"IQ4412"}],dpi:307.9,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"ZTE/*/ZTE Blade L2/*"},{ua:"ZTE Blade L2"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"BENEVE/*/VR518/*"},{ua:"VR518"}],dpi:480,bw:3,ac:500},{type:"ios",rules:[{res:[640,960]}],dpi:[325.1,328.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[640,1136]}],dpi:[317.1,320.2],bw:3,ac:1e3},{type:"ios",rules:[{res:[750,1334]}],dpi:326.4,bw:4,ac:1e3},{type:"ios",rules:[{res:[1242,2208]}],dpi:[453.6,458.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2001]}],dpi:[410.9,415.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2436]}],dpi:458,bw:4,ac:1e3}]};function ut(t,i){if(this.dpdb=at,this.Vw(),t){this.onDeviceParamsUpdated=i;var e=new $l,s=this;e.open("GET",t,!0),e.addEventListener("load",(function(){s.loading=!1,e.status>=200&&e.status<=299?(s.dpdb=JSON.parse(e.response),s.Vw()):console.error("Error loading online DPDB!")})),e.send()}}function ct(t){this.xdpi=t.xdpi,this.ydpi=t.ydpi,this.bevelMm=t.bevelMm}function lt(t,i){this.set(t,i)}function dt(t,i){this.kFilter=t,this.isDebug=i,this.currentAccelMeasurement=new lt,this.currentGyroMeasurement=new lt,this.previousGyroMeasurement=new lt,d()?this.filterQ=new it(-1,0,0,1):this.filterQ=new it(1,0,0,1),this.previousFilterQ=new it,this.previousFilterQ.copy(this.filterQ),this.accelQ=new it,this.isOrientationInitialized=!1,this.estimatedGravity=new tt,this.measuredGravity=new tt,this.gyroIntegralQ=new it}function ft(t,i){this.predictionTimeS=t,this.isDebug=i,this.previousQ=new it,this.previousTimestampS=null,this.deltaQ=new it,this.outQ=new it}function gt(t,i,e,n){this.yawOnly=e,this.accelerometer=new tt,this.gyroscope=new tt,this.filter=new dt(t,n),this.posePredictor=new ft(i,n),this.isFirefoxAndroid=v(),this.isIOS=d();var r=w();this.isDeviceMotionInRadians=!this.isIOS&&r&&r<66,this.isWithoutDeviceMotion=m(),this.filterToWorldQ=new it,d()?this.filterToWorldQ.setFromAxisAngle(new tt(1,0,0),x.PI/2):this.filterToWorldQ.setFromAxisAngle(new tt(1,0,0),-x.PI/2),this.inverseWorldToScreenQ=new it,this.worldToScreenQ=new it,this.originalPoseAdjustQ=new it,this.originalPoseAdjustQ.setFromAxisAngle(new tt(0,0,1),-s.orientation*x.PI/180),this.Gw(),A()&&this.filterToWorldQ.multiply(this.inverseWorldToScreenQ),this.resetQ=new it,this.Ww=new Float32Array(4),this.start()}ut.prototype.getDeviceParams=function(){return this.deviceParams},ut.prototype.Vw=function(){var t=this.Zw();t?(this.deviceParams=t,this.onDeviceParamsUpdated&&this.onDeviceParamsUpdated(this.deviceParams)):console.error("Failed to recalculate device parameters.")},ut.prototype.Zw=function(){var t=this.dpdb;if(!t)return console.error("DPDB not available."),null;if(1!=t.format)return console.error("DPDB has unexpected format version."),null;if(!t.devices||!t.devices.length)return console.error("DPDB does not have a devices section."),null;var i=Kl.userAgent||Kl.vendor||s.opera,e=y(),n=M();if(!t.devices)return console.error("DPDB has no devices section."),null;for(var r=null,o=1/0,h=0;h<t.devices.length;h++){var a=t.devices[h];if(a.rules)if("ios"==a.type||"android"==a.type){if(d()==("ios"==a.type)){for(var u=!1,c=0;c<a.rules.length;c++){var l=a.rules[c],f=this.Hw(l,i,e,n);if(!0===f){o=f,r=a,u=!0;break}!1!==f&&f<o&&(o=f,r=a)}if(u)break}}else console.warn("Device["+h+"] has invalid type.");else console.warn("Device["+h+"] has no rules section.")}return r?new ct({xdpi:r.dpi[0]||r.dpi,ydpi:r.dpi[1]||r.dpi,bevelMm:r.bw}):(console.warn("No DPDB device match."),null)},ut.prototype.Hw=function(t,i,e,s){if(!t.ua&&!t.res)return!1;if(t.ua&&i.indexOf(t.ua)<0)return!1;if(t.res){if(!t.res[0]||!t.res[1])return!1;var n=t.res[0],r=t.res[1],o=x.min(e,s)-x.min(n,r),h=x.max(e,s)-x.max(n,r),a=x.abs(o)+x.abs(h);if(a>0)return a}return!0},lt.prototype.set=function(t,i){this.sample=t,this.timestampS=i},lt.prototype.copy=function(t){this.set(t.sample,t.timestampS)},dt.prototype.addAccelMeasurement=function(t,i){this.currentAccelMeasurement.set(t,i)},dt.prototype.addGyroMeasurement=function(t,i){this.currentGyroMeasurement.set(t,i),function(t){return!(j(t)||t<=.001||t>1)}(i-this.previousGyroMeasurement.timestampS)&&this.Xw(),this.previousGyroMeasurement.copy(this.currentGyroMeasurement)},dt.prototype.Xw=function(){if(!this.isOrientationInitialized)return this.accelQ=this.qw(this.currentAccelMeasurement.sample),this.previousFilterQ.copy(this.accelQ),void(this.isOrientationInitialized=!0);var t=this.currentGyroMeasurement.timestampS-this.previousGyroMeasurement.timestampS,i=this.Kw(this.currentGyroMeasurement.sample,t);this.gyroIntegralQ.multiply(i),this.filterQ.copy(this.previousFilterQ),this.filterQ.multiply(i);var e=new it;e.copy(this.filterQ),e.inverse(),this.estimatedGravity.set(0,0,-1),this.estimatedGravity.applyQuaternion(e),this.estimatedGravity.normalize(),this.measuredGravity.copy(this.currentAccelMeasurement.sample),this.measuredGravity.normalize();var s=new it;s.setFromUnitVectors(this.estimatedGravity,this.measuredGravity),s.inverse(),this.isDebug&&console.log("Delta: %d deg, G_est: (%s, %s, %s), G_meas: (%s, %s, %s)",$*function(t){return t.w>1?(console.warn("getQuaternionAngle: w > 1"),0):2*x.acos(t.w)}(s),this.estimatedGravity.x.toFixed(1),this.estimatedGravity.y.toFixed(1),this.estimatedGravity.z.toFixed(1),this.measuredGravity.x.toFixed(1),this.measuredGravity.y.toFixed(1),this.measuredGravity.z.toFixed(1));var n=new it;n.copy(this.filterQ),n.multiply(s),this.filterQ.slerp(n,1-this.kFilter),this.previousFilterQ.copy(this.filterQ)},dt.prototype.getOrientation=function(){return this.filterQ},dt.prototype.qw=function(t){var i=new tt;i.copy(t),i.normalize();var e=new it;return e.setFromUnitVectors(new tt(0,0,-1),i),e.inverse(),e},dt.prototype.Kw=function(t,i){var e=new it,s=new tt;return s.copy(t),s.normalize(),e.setFromAxisAngle(s,t.length()*i),e},ft.prototype.getPrediction=function(t,i,e){if(!this.previousTimestampS)return this.previousQ.copy(t),this.previousTimestampS=e,t;var s=new tt;s.copy(i),s.normalize();var n=i.length();if(n<20*J)return this.isDebug&&console.log("Moving slowly, at %s deg/s: no prediction",($*n).toFixed(1)),this.outQ.copy(t),this.previousQ.copy(t),this.outQ;var r=n*this.predictionTimeS;return this.deltaQ.setFromAxisAngle(s,r),this.outQ.copy(this.previousQ),this.outQ.multiply(this.deltaQ),this.previousQ.copy(t),this.previousTimestampS=e,this.outQ},gt.prototype.getPosition=function(){return null},gt.prototype.getOrientation=function(){var t=void 0;if(this.isWithoutDeviceMotion&&this.Jw)return this.deviceOrientationFixQ=this.deviceOrientationFixQ||(i=(new it).setFromAxisAngle(new tt(0,0,-1),0),e=new it,-90===s.orientation?e.setFromAxisAngle(new tt(0,1,0),x.PI/-2):e.setFromAxisAngle(new tt(0,1,0),x.PI/2),i.multiply(e)),this.deviceOrientationFilterToWorldQ=this.deviceOrientationFilterToWorldQ||function(){var t=new it;return t.setFromAxisAngle(new tt(1,0,0),-x.PI/2),t}(),t=this.Jw,(n=new it).copy(t),n.multiply(this.deviceOrientationFilterToWorldQ),n.multiply(this.resetQ),n.multiply(this.worldToScreenQ),n.multiplyQuaternions(this.deviceOrientationFixQ,n),this.yawOnly&&(n.x=0,n.z=0,n.normalize()),this.Ww[0]=n.x,this.Ww[1]=n.y,this.Ww[2]=n.z,this.Ww[3]=n.w,this.Ww;var i,e,n,r=this.filter.getOrientation();return t=this.posePredictor.getPrediction(r,this.gyroscope,this.previousTimestampS),(n=new it).copy(this.filterToWorldQ),n.multiply(this.resetQ),n.multiply(t),n.multiply(this.worldToScreenQ),this.yawOnly&&(n.x=0,n.z=0,n.normalize()),this.Ww[0]=n.x,this.Ww[1]=n.y,this.Ww[2]=n.z,this.Ww[3]=n.w,this.Ww},gt.prototype.resetPose=function(){this.resetQ.copy(this.filter.getOrientation()),this.resetQ.x=0,this.resetQ.y=0,this.resetQ.z*=-1,this.resetQ.normalize(),A()&&this.resetQ.multiply(this.inverseWorldToScreenQ),this.resetQ.multiply(this.originalPoseAdjustQ)},gt.prototype.$w=function(t){this.Jw=this.Jw||new it;var i=t.alpha,e=t.beta,s=t.gamma;i=(i||0)*x.PI/180,e=(e||0)*x.PI/180,s=(s||0)*x.PI/180,this.Jw.setFromEulerYXZ(e,i,-s)},gt.prototype.im=function(t){this.nm(t)},gt.prototype.nm=function(t){var i=t.accelerationIncludingGravity,e=t.rotationRate,s=t.timeStamp/1e3,n=s-this.previousTimestampS;return n<0?(B("fusion-pose-sensor:invalid:non-monotonic","Invalid timestamps detected: non-monotonic timestamp from devicemotion"),void(this.previousTimestampS=s)):n<=.001||n>1?(B("fusion-pose-sensor:invalid:outside-threshold","Invalid timestamps detected: Timestamp from devicemotion outside expected range."),void(this.previousTimestampS=s)):(this.accelerometer.set(-i.x,-i.y,-i.z),p()?this.gyroscope.set(-e.beta,e.alpha,e.gamma):this.gyroscope.set(e.alpha,e.beta,e.gamma),this.isDeviceMotionInRadians||this.gyroscope.multiplyScalar(x.PI/180),this.filter.addAccelMeasurement(this.accelerometer,s),this.filter.addGyroMeasurement(this.gyroscope,s),void(this.previousTimestampS=s))},gt.prototype.hm=function(t){this.Gw()},gt.prototype.um=function(t){var i=t.data;i&&i.type&&"devicemotion"===i.type.toLowerCase()&&this.nm(i.deviceMotionEvent)},gt.prototype.Gw=function(){switch(this.worldToScreenQ.set(0,0,0,1),s.orientation){case 0:break;case 90:this.worldToScreenQ.setFromAxisAngle(new tt(0,0,1),-x.PI/2);break;case-90:this.worldToScreenQ.setFromAxisAngle(new tt(0,0,1),x.PI/2)}this.inverseWorldToScreenQ.copy(this.worldToScreenQ),this.inverseWorldToScreenQ.inverse()},gt.prototype.start=function(){var t,i,e;this.lm=this.im.bind(this),this.dm=this.hm.bind(this),this.fm=this.um.bind(this),this.gm=this.$w.bind(this),d()&&(t=s.self!==s.top,i=z(h.referrer),e=z(s.location.href),t&&i!==e)&&s.addEventListener("message",this.fm),s.addEventListener("orientationchange",this.dm),this.isWithoutDeviceMotion?s.addEventListener("deviceorientation",this.gm):s.addEventListener("devicemotion",this.lm)},gt.prototype.stop=function(){s.removeEventListener("devicemotion",this.lm),s.removeEventListener("deviceorientation",this.gm),s.removeEventListener("orientationchange",this.dm),s.removeEventListener("message",this.fm)};var _t=new tt(1,0,0),vt=new tt(0,0,1),wt={};screen.orientation?wt=screen.orientation:screen.msOrientation?wt=screen.msOrientation:_.defineProperty(wt,"angle",{get:function(){return s.orientation||0}});var mt=new it;mt.setFromAxisAngle(_t,-x.PI/2),mt.multiply((new it).setFromAxisAngle(vt,x.PI/2));var pt=function(){function t(i){!function(t,i){if(!(t instanceof i))throw new k("Cannot call a class as a function")}(this,t),this.config=i,this.sensor=null,this.fusionSensor=null,this._m=new Float32Array(4),this.api=null,this.errors=[],this.vm=new it,this.wm=new it,this.pm=new it,this.Am=this.Am.bind(this),this.ym=this.ym.bind(this),this.Mm=this.Mm.bind(this),this.Mm(),this.init()}return o(t,[{key:"init",value:function(){var t=null;try{(t=new RelativeOrientationSensor({frequency:60})).addEventListener("error",this.ym)}catch(t){this.errors.push(t),"SecurityError"===t.name?(console.error("Cannot construct sensors due to the Feature Policy"),console.warn('Attempting to fall back using "devicemotion"; however this will fail in the future without correct permissions.'),this.useDeviceMotion()):"ReferenceError"===t.name?this.useDeviceMotion():console.error(t)}t&&(this.api="sensor",this.sensor=t,this.sensor.addEventListener("reading",this.Am),this.sensor.start()),s.addEventListener("orientationchange",this.Mm)}},{key:"useDeviceMotion",value:function(){this.api="devicemotion",this.fusionSensor=new gt(this.config.K_FILTER,this.config.PREDICTION_TIME_S,this.config.YAW_ONLY,this.config.DEBUG)}},{key:"getOrientation",value:function(){if(this.fusionSensor)return this.fusionSensor.getOrientation();if(!this.sensor||!this.sensor.quaternion)return this._m[0]=this._m[1]=this._m[2]=0,this._m[3]=1,this._m;var t=this.sensor.quaternion;this.vm.set(t[0],t[1],t[2],t[3]);var i=this.pm;return i.copy(mt),i.multiply(this.vm),i.multiply(this.wm),this.config.YAW_ONLY&&(i.x=i.z=0,i.normalize()),this._m[0]=i.x,this._m[1]=i.y,this._m[2]=i.z,this._m[3]=i.w,this._m}},{key:"ym",value:function(t){this.errors.push(t.error),"NotAllowedError"===t.error.name?console.error("Permission to access sensor was denied"):"NotReadableError"===t.error.name?console.error("Sensor could not be read"):console.error(t.error)}},{key:"Am",value:function(){}},{key:"Mm",value:function(){var t=-wt.angle*x.PI/180;this.wm.setFromAxisAngle(vt,t)}}]),t}();function At(){this.Tm();var t=h.createElement("div");(r=t.style).position="fixed",r.top=0,r.right=0,r.bottom=0,r.left=0,r.backgroundColor="gray",r.fontFamily="sans-serif",r.zIndex=1e6;var i=h.createElement("img");i.src=this.icon,(r=i.style).marginLeft="25%",r.marginTop="25%",r.width="50%",t.appendChild(i);var e=h.createElement("div");(r=e.style).textAlign="center",r.fontSize="16px",r.lineHeight="24px",r.margin="24px 25%",r.width="50%",e.innerHTML="Place your phone into your Cardboard viewer.",t.appendChild(e);var s=h.createElement("div");(r=s.style).backgroundColor="#CFD8DC",r.position="fixed",r.bottom=0,r.width="100%",r.height="48px",r.padding="14px 24px",r.boxSizing="border-box",r.color="#656A6B",t.appendChild(s);var n=h.createElement("div");n.style.float="left",n.innerHTML="No Cardboard viewer?";var r,o=h.createElement("a");o.href="https://www.google.com/get/cardboard/get-cardboard/",o.innerHTML="get one",o.target="Vu",(r=o.style).float="right",r.fontWeight=600,r.textTransform="uppercase",r.borderLeft="1px solid gray",r.paddingLeft="24px",r.textDecoration="none",r.color="#656A6B",s.appendChild(n),s.appendChild(o),this.overlay=t,this.text=e,this.hide()}At.prototype.show=function(t){t||this.overlay.parentElement?t&&(this.overlay.parentElement&&this.overlay.parentElement!=t&&this.overlay.parentElement.removeChild(this.overlay),t.appendChild(this.overlay)):h.body.appendChild(this.overlay),this.overlay.style.display="block";var i=this.overlay.querySelector("img").style;A()?(i.width="20%",i.marginLeft="40%",i.marginTop="3%"):(i.width="50%",i.marginLeft="25%",i.marginTop="25%")},At.prototype.hide=function(){this.overlay.style.display="none"},At.prototype.showTemporarily=function(t,i){this.show(i),this.timer=u(this.hide.bind(this),t)},At.prototype.disableShowTemporarily=function(){c(this.timer)},At.prototype.update=function(){this.disableShowTemporarily(),!A()&&D()?this.show():this.hide()},At.prototype.Tm=function(){this.icon="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjE5OHB4IiBoZWlnaHQ9IjI0MHB4IiB2aWV3Qm94PSIwIDAgMTk4IDI0MCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4bWxuczpza2V0Y2g9Imh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaC9ucyI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDMuMy4zICgxMjA4MSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+dHJhbnNpdGlvbjwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHNrZXRjaDp0eXBlPSJNU1BhZ2UiPgogICAgICAgIDxnIGlkPSJ0cmFuc2l0aW9uIiBza2V0Y2g6dHlwZT0iTVNBcnRib2FyZEdyb3VwIj4KICAgICAgICAgICAgPGcgaWQ9IkltcG9ydGVkLUxheWVycy1Db3B5LTQtKy1JbXBvcnRlZC1MYXllcnMtQ29weS0rLUltcG9ydGVkLUxheWVycy1Db3B5LTItQ29weSIgc2tldGNoOnR5cGU9Ik1TTGF5ZXJHcm91cCI+CiAgICAgICAgICAgICAgICA8ZyBpZD0iSW1wb3J0ZWQtTGF5ZXJzLUNvcHktNCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIDEwNy4wMDAwMDApIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ5LjYyNSwyLjUyNyBDMTQ5LjYyNSwyLjUyNyAxNTUuODA1LDYuMDk2IDE1Ni4zNjIsNi40MTggTDE1Ni4zNjIsNy4zMDQgQzE1Ni4zNjIsNy40ODEgMTU2LjM3NSw3LjY2NCAxNTYuNCw3Ljg1MyBDMTU2LjQxLDcuOTM0IDE1Ni40Miw4LjAxNSAxNTYuNDI3LDguMDk1IEMxNTYuNTY3LDkuNTEgMTU3LjQwMSwxMS4wOTMgMTU4LjUzMiwxMi4wOTQgTDE2NC4yNTIsMTcuMTU2IEwxNjQuMzMzLDE3LjA2NiBDMTY0LjMzMywxNy4wNjYgMTY4LjcxNSwxNC41MzYgMTY5LjU2OCwxNC4wNDIgQzE3MS4wMjUsMTQuODgzIDE5NS41MzgsMjkuMDM1IDE5NS41MzgsMjkuMDM1IEwxOTUuNTM4LDgzLjAzNiBDMTk1LjUzOCw4My44MDcgMTk1LjE1Miw4NC4yNTMgMTk0LjU5LDg0LjI1MyBDMTk0LjM1Nyw4NC4yNTMgMTk0LjA5NSw4NC4xNzcgMTkzLjgxOCw4NC4wMTcgTDE2OS44NTEsNzAuMTc5IEwxNjkuODM3LDcwLjIwMyBMMTQyLjUxNSw4NS45NzggTDE0MS42NjUsODQuNjU1IEMxMzYuOTM0LDgzLjEyNiAxMzEuOTE3LDgxLjkxNSAxMjYuNzE0LDgxLjA0NSBDMTI2LjcwOSw4MS4wNiAxMjYuNzA3LDgxLjA2OSAxMjYuNzA3LDgxLjA2OSBMMTIxLjY0LDk4LjAzIEwxMTMuNzQ5LDEwMi41ODYgTDExMy43MTIsMTAyLjUyMyBMMTEzLjcxMiwxMzAuMTEzIEMxMTMuNzEyLDEzMC44ODUgMTEzLjMyNiwxMzEuMzMgMTEyLjc2NCwxMzEuMzMgQzExMi41MzIsMTMxLjMzIDExMi4yNjksMTMxLjI1NCAxMTEuOTkyLDEzMS4wOTQgTDY5LjUxOSwxMDYuNTcyIEM2OC41NjksMTA2LjAyMyA2Ny43OTksMTA0LjY5NSA2Ny43OTksMTAzLjYwNSBMNjcuNzk5LDEwMi41NyBMNjcuNzc4LDEwMi42MTcgQzY3LjI3LDEwMi4zOTMgNjYuNjQ4LDEwMi4yNDkgNjUuOTYyLDEwMi4yMTggQzY1Ljg3NSwxMDIuMjE0IDY1Ljc4OCwxMDIuMjEyIDY1LjcwMSwxMDIuMjEyIEM2NS42MDYsMTAyLjIxMiA2NS41MTEsMTAyLjIxNSA2NS40MTYsMTAyLjIxOSBDNjUuMTk1LDEwMi4yMjkgNjQuOTc0LDEwMi4yMzUgNjQuNzU0LDEwMi4yMzUgQzY0LjMzMSwxMDIuMjM1IDYzLjkxMSwxMDIuMjE2IDYzLjQ5OCwxMDIuMTc4IEM2MS44NDMsMTAyLjAyNSA2MC4yOTgsMTAxLjU3OCA1OS4wOTQsMTAwLjg4MiBMMTIuNTE4LDczLjk5MiBMMTIuNTIzLDc0LjAwNCBMMi4yNDUsNTUuMjU0IEMxLjI0NCw1My40MjcgMi4wMDQsNTEuMDM4IDMuOTQzLDQ5LjkxOCBMNTkuOTU0LDE3LjU3MyBDNjAuNjI2LDE3LjE4NSA2MS4zNSwxNy4wMDEgNjIuMDUzLDE3LjAwMSBDNjMuMzc5LDE3LjAwMSA2NC42MjUsMTcuNjYgNjUuMjgsMTguODU0IEw2NS4yODUsMTguODUxIEw2NS41MTIsMTkuMjY0IEw2NS41MDYsMTkuMjY4IEM2NS45MDksMjAuMDAzIDY2LjQwNSwyMC42OCA2Ni45ODMsMjEuMjg2IEw2Ny4yNiwyMS41NTYgQzY5LjE3NCwyMy40MDYgNzEuNzI4LDI0LjM1NyA3NC4zNzMsMjQuMzU3IEM3Ni4zMjIsMjQuMzU3IDc4LjMyMSwyMy44NCA4MC4xNDgsMjIuNzg1IEM4MC4xNjEsMjIuNzg1IDg3LjQ2NywxOC41NjYgODcuNDY3LDE4LjU2NiBDODguMTM5LDE4LjE3OCA4OC44NjMsMTcuOTk0IDg5LjU2NiwxNy45OTQgQzkwLjg5MiwxNy45OTQgOTIuMTM4LDE4LjY1MiA5Mi43OTIsMTkuODQ3IEw5Ni4wNDIsMjUuNzc1IEw5Ni4wNjQsMjUuNzU3IEwxMDIuODQ5LDI5LjY3NCBMMTAyLjc0NCwyOS40OTIgTDE0OS42MjUsMi41MjcgTTE0OS42MjUsMC44OTIgQzE0OS4zNDMsMC44OTIgMTQ5LjA2MiwwLjk2NSAxNDguODEsMS4xMSBMMTAyLjY0MSwyNy42NjYgTDk3LjIzMSwyNC41NDIgTDk0LjIyNiwxOS4wNjEgQzkzLjMxMywxNy4zOTQgOTEuNTI3LDE2LjM1OSA4OS41NjYsMTYuMzU4IEM4OC41NTUsMTYuMzU4IDg3LjU0NiwxNi42MzIgODYuNjQ5LDE3LjE1IEM4My44NzgsMTguNzUgNzkuNjg3LDIxLjE2OSA3OS4zNzQsMjEuMzQ1IEM3OS4zNTksMjEuMzUzIDc5LjM0NSwyMS4zNjEgNzkuMzMsMjEuMzY5IEM3Ny43OTgsMjIuMjU0IDc2LjA4NCwyMi43MjIgNzQuMzczLDIyLjcyMiBDNzIuMDgxLDIyLjcyMiA2OS45NTksMjEuODkgNjguMzk3LDIwLjM4IEw2OC4xNDUsMjAuMTM1IEM2Ny43MDYsMTkuNjcyIDY3LjMyMywxOS4xNTYgNjcuMDA2LDE4LjYwMSBDNjYuOTg4LDE4LjU1OSA2Ni45NjgsMTguNTE5IDY2Ljk0NiwxOC40NzkgTDY2LjcxOSwxOC4wNjUgQzY2LjY5LDE4LjAxMiA2Ni42NTgsMTcuOTYgNjYuNjI0LDE3LjkxMSBDNjUuNjg2LDE2LjMzNyA2My45NTEsMTUuMzY2IDYyLjA1MywxNS4zNjYgQzYxLjA0MiwxNS4zNjYgNjAuMDMzLDE1LjY0IDU5LjEzNiwxNi4xNTggTDMuMTI1LDQ4LjUwMiBDMC40MjYsNTAuMDYxIC0wLjYxMyw1My40NDIgMC44MTEsNTYuMDQgTDExLjA4OSw3NC43OSBDMTEuMjY2LDc1LjExMyAxMS41MzcsNzUuMzUzIDExLjg1LDc1LjQ5NCBMNTguMjc2LDEwMi4yOTggQzU5LjY3OSwxMDMuMTA4IDYxLjQzMywxMDMuNjMgNjMuMzQ4LDEwMy44MDYgQzYzLjgxMiwxMDMuODQ4IDY0LjI4NSwxMDMuODcgNjQuNzU0LDEwMy44NyBDNjUsMTAzLjg3IDY1LjI0OSwxMDMuODY0IDY1LjQ5NCwxMDMuODUyIEM2NS41NjMsMTAzLjg0OSA2NS42MzIsMTAzLjg0NyA2NS43MDEsMTAzLjg0NyBDNjUuNzY0LDEwMy44NDcgNjUuODI4LDEwMy44NDkgNjUuODksMTAzLjg1MiBDNjUuOTg2LDEwMy44NTYgNjYuMDgsMTAzLjg2MyA2Ni4xNzMsMTAzLjg3NCBDNjYuMjgyLDEwNS40NjcgNjcuMzMyLDEwNy4xOTcgNjguNzAyLDEwNy45ODggTDExMS4xNzQsMTMyLjUxIEMxMTEuNjk4LDEzMi44MTIgMTEyLjIzMiwxMzIuOTY1IDExMi43NjQsMTMyLjk2NSBDMTE0LjI2MSwxMzIuOTY1IDExNS4zNDcsMTMxLjc2NSAxMTUuMzQ3LDEzMC4xMTMgTDExNS4zNDcsMTAzLjU1MSBMMTIyLjQ1OCw5OS40NDYgQzEyMi44MTksOTkuMjM3IDEyMy4wODcsOTguODk4IDEyMy4yMDcsOTguNDk4IEwxMjcuODY1LDgyLjkwNSBDMTMyLjI3OSw4My43MDIgMTM2LjU1Nyw4NC43NTMgMTQwLjYwNyw4Ni4wMzMgTDE0MS4xNCw4Ni44NjIgQzE0MS40NTEsODcuMzQ2IDE0MS45NzcsODcuNjEzIDE0Mi41MTYsODcuNjEzIEMxNDIuNzk0LDg3LjYxMyAxNDMuMDc2LDg3LjU0MiAxNDMuMzMzLDg3LjM5MyBMMTY5Ljg2NSw3Mi4wNzYgTDE5Myw4NS40MzMgQzE5My41MjMsODUuNzM1IDE5NC4wNTgsODUuODg4IDE5NC41OSw4NS44ODggQzE5Ni4wODcsODUuODg4IDE5Ny4xNzMsODQuNjg5IDE5Ny4xNzMsODMuMDM2IEwxOTcuMTczLDI5LjAzNSBDMTk3LjE3MywyOC40NTEgMTk2Ljg2MSwyNy45MTEgMTk2LjM1NSwyNy42MTkgQzE5Ni4zNTUsMjcuNjE5IDE3MS44NDMsMTMuNDY3IDE3MC4zODUsMTIuNjI2IEMxNzAuMTMyLDEyLjQ4IDE2OS44NSwxMi40MDcgMTY5LjU2OCwxMi40MDcgQzE2OS4yODUsMTIuNDA3IDE2OS4wMDIsMTIuNDgxIDE2OC43NDksMTIuNjI3IEMxNjguMTQzLDEyLjk3OCAxNjUuNzU2LDE0LjM1NyAxNjQuNDI0LDE1LjEyNSBMMTU5LjYxNSwxMC44NyBDMTU4Ljc5NiwxMC4xNDUgMTU4LjE1NCw4LjkzNyAxNTguMDU0LDcuOTM0IEMxNTguMDQ1LDcuODM3IDE1OC4wMzQsNy43MzkgMTU4LjAyMSw3LjY0IEMxNTguMDA1LDcuNTIzIDE1Ny45OTgsNy40MSAxNTcuOTk4LDcuMzA0IEwxNTcuOTk4LDYuNDE4IEMxNTcuOTk4LDUuODM0IDE1Ny42ODYsNS4yOTUgMTU3LjE4MSw1LjAwMiBDMTU2LjYyNCw0LjY4IDE1MC40NDIsMS4xMTEgMTUwLjQ0MiwxLjExMSBDMTUwLjE4OSwwLjk2NSAxNDkuOTA3LDAuODkyIDE0OS42MjUsMC44OTIiIGlkPSJGaWxsLTEiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTYuMDI3LDI1LjYzNiBMMTQyLjYwMyw1Mi41MjcgQzE0My44MDcsNTMuMjIyIDE0NC41ODIsNTQuMTE0IDE0NC44NDUsNTUuMDY4IEwxNDQuODM1LDU1LjA3NSBMNjMuNDYxLDEwMi4wNTcgTDYzLjQ2LDEwMi4wNTcgQzYxLjgwNiwxMDEuOTA1IDYwLjI2MSwxMDEuNDU3IDU5LjA1NywxMDAuNzYyIEwxMi40ODEsNzMuODcxIEw5Ni4wMjcsMjUuNjM2IiBpZD0iRmlsbC0yIiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTYzLjQ2MSwxMDIuMTc0IEM2My40NTMsMTAyLjE3NCA2My40NDYsMTAyLjE3NCA2My40MzksMTAyLjE3MiBDNjEuNzQ2LDEwMi4wMTYgNjAuMjExLDEwMS41NjMgNTguOTk4LDEwMC44NjMgTDEyLjQyMiw3My45NzMgQzEyLjM4Niw3My45NTIgMTIuMzY0LDczLjkxNCAxMi4zNjQsNzMuODcxIEMxMi4zNjQsNzMuODMgMTIuMzg2LDczLjc5MSAxMi40MjIsNzMuNzcgTDk1Ljk2OCwyNS41MzUgQzk2LjAwNCwyNS41MTQgOTYuMDQ5LDI1LjUxNCA5Ni4wODUsMjUuNTM1IEwxNDIuNjYxLDUyLjQyNiBDMTQzLjg4OCw1My4xMzQgMTQ0LjY4Miw1NC4wMzggMTQ0Ljk1Nyw1NS4wMzcgQzE0NC45Nyw1NS4wODMgMTQ0Ljk1Myw1NS4xMzMgMTQ0LjkxNSw1NS4xNjEgQzE0NC45MTEsNTUuMTY1IDE0NC44OTgsNTUuMTc0IDE0NC44OTQsNTUuMTc3IEw2My41MTksMTAyLjE1OCBDNjMuNTAxLDEwMi4xNjkgNjMuNDgxLDEwMi4xNzQgNjMuNDYxLDEwMi4xNzQgTDYzLjQ2MSwxMDIuMTc0IFogTTEyLjcxNCw3My44NzEgTDU5LjExNSwxMDAuNjYxIEM2MC4yOTMsMTAxLjM0MSA2MS43ODYsMTAxLjc4MiA2My40MzUsMTAxLjkzNyBMMTQ0LjcwNyw1NS4wMTUgQzE0NC40MjgsNTQuMTA4IDE0My42ODIsNTMuMjg1IDE0Mi41NDQsNTIuNjI4IEw5Ni4wMjcsMjUuNzcxIEwxMi43MTQsNzMuODcxIEwxMi43MTQsNzMuODcxIFoiIGlkPSJGaWxsLTMiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ4LjMyNyw1OC40NzEgQzE0OC4xNDUsNTguNDggMTQ3Ljk2Miw1OC40OCAxNDcuNzgxLDU4LjQ3MiBDMTQ1Ljg4Nyw1OC4zODkgMTQ0LjQ3OSw1Ny40MzQgMTQ0LjYzNiw1Ni4zNCBDMTQ0LjY4OSw1NS45NjcgMTQ0LjY2NCw1NS41OTcgMTQ0LjU2NCw1NS4yMzUgTDYzLjQ2MSwxMDIuMDU3IEM2NC4wODksMTAyLjExNSA2NC43MzMsMTAyLjEzIDY1LjM3OSwxMDIuMDk5IEM2NS41NjEsMTAyLjA5IDY1Ljc0MywxMDIuMDkgNjUuOTI1LDEwMi4wOTggQzY3LjgxOSwxMDIuMTgxIDY5LjIyNywxMDMuMTM2IDY5LjA3LDEwNC4yMyBMMTQ4LjMyNyw1OC40NzEiIGlkPSJGaWxsLTQiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNjkuMDcsMTA0LjM0NyBDNjkuMDQ4LDEwNC4zNDcgNjkuMDI1LDEwNC4zNCA2OS4wMDUsMTA0LjMyNyBDNjguOTY4LDEwNC4zMDEgNjguOTQ4LDEwNC4yNTcgNjguOTU1LDEwNC4yMTMgQzY5LDEwMy44OTYgNjguODk4LDEwMy41NzYgNjguNjU4LDEwMy4yODggQzY4LjE1MywxMDIuNjc4IDY3LjEwMywxMDIuMjY2IDY1LjkyLDEwMi4yMTQgQzY1Ljc0MiwxMDIuMjA2IDY1LjU2MywxMDIuMjA3IDY1LjM4NSwxMDIuMjE1IEM2NC43NDIsMTAyLjI0NiA2NC4wODcsMTAyLjIzMiA2My40NSwxMDIuMTc0IEM2My4zOTksMTAyLjE2OSA2My4zNTgsMTAyLjEzMiA2My4zNDcsMTAyLjA4MiBDNjMuMzM2LDEwMi4wMzMgNjMuMzU4LDEwMS45ODEgNjMuNDAyLDEwMS45NTYgTDE0NC41MDYsNTUuMTM0IEMxNDQuNTM3LDU1LjExNiAxNDQuNTc1LDU1LjExMyAxNDQuNjA5LDU1LjEyNyBDMTQ0LjY0Miw1NS4xNDEgMTQ0LjY2OCw1NS4xNyAxNDQuNjc3LDU1LjIwNCBDMTQ0Ljc4MSw1NS41ODUgMTQ0LjgwNiw1NS45NzIgMTQ0Ljc1MSw1Ni4zNTcgQzE0NC43MDYsNTYuNjczIDE0NC44MDgsNTYuOTk0IDE0NS4wNDcsNTcuMjgyIEMxNDUuNTUzLDU3Ljg5MiAxNDYuNjAyLDU4LjMwMyAxNDcuNzg2LDU4LjM1NSBDMTQ3Ljk2NCw1OC4zNjMgMTQ4LjE0Myw1OC4zNjMgMTQ4LjMyMSw1OC4zNTQgQzE0OC4zNzcsNTguMzUyIDE0OC40MjQsNTguMzg3IDE0OC40MzksNTguNDM4IEMxNDguNDU0LDU4LjQ5IDE0OC40MzIsNTguNTQ1IDE0OC4zODUsNTguNTcyIEw2OS4xMjksMTA0LjMzMSBDNjkuMTExLDEwNC4zNDIgNjkuMDksMTA0LjM0NyA2OS4wNywxMDQuMzQ3IEw2OS4wNywxMDQuMzQ3IFogTTY1LjY2NSwxMDEuOTc1IEM2NS43NTQsMTAxLjk3NSA2NS44NDIsMTAxLjk3NyA2NS45MywxMDEuOTgxIEM2Ny4xOTYsMTAyLjAzNyA2OC4yODMsMTAyLjQ2OSA2OC44MzgsMTAzLjEzOSBDNjkuMDY1LDEwMy40MTMgNjkuMTg4LDEwMy43MTQgNjkuMTk4LDEwNC4wMjEgTDE0Ny44ODMsNTguNTkyIEMxNDcuODQ3LDU4LjU5MiAxNDcuODExLDU4LjU5MSAxNDcuNzc2LDU4LjU4OSBDMTQ2LjUwOSw1OC41MzMgMTQ1LjQyMiw1OC4xIDE0NC44NjcsNTcuNDMxIEMxNDQuNTg1LDU3LjA5MSAxNDQuNDY1LDU2LjcwNyAxNDQuNTIsNTYuMzI0IEMxNDQuNTYzLDU2LjAyMSAxNDQuNTUyLDU1LjcxNiAxNDQuNDg4LDU1LjQxNCBMNjMuODQ2LDEwMS45NyBDNjQuMzUzLDEwMi4wMDIgNjQuODY3LDEwMi4wMDYgNjUuMzc0LDEwMS45ODIgQzY1LjQ3MSwxMDEuOTc3IDY1LjU2OCwxMDEuOTc1IDY1LjY2NSwxMDEuOTc1IEw2NS42NjUsMTAxLjk3NSBaIiBpZD0iRmlsbC01IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTIuMjA4LDU1LjEzNCBDMS4yMDcsNTMuMzA3IDEuOTY3LDUwLjkxNyAzLjkwNiw0OS43OTcgTDU5LjkxNywxNy40NTMgQzYxLjg1NiwxNi4zMzMgNjQuMjQxLDE2LjkwNyA2NS4yNDMsMTguNzM0IEw2NS40NzUsMTkuMTQ0IEM2NS44NzIsMTkuODgyIDY2LjM2OCwyMC41NiA2Ni45NDUsMjEuMTY1IEw2Ny4yMjMsMjEuNDM1IEM3MC41NDgsMjQuNjQ5IDc1LjgwNiwyNS4xNTEgODAuMTExLDIyLjY2NSBMODcuNDMsMTguNDQ1IEM4OS4zNywxNy4zMjYgOTEuNzU0LDE3Ljg5OSA5Mi43NTUsMTkuNzI3IEw5Ni4wMDUsMjUuNjU1IEwxMi40ODYsNzMuODg0IEwyLjIwOCw1NS4xMzQgWiIgaWQ9IkZpbGwtNiIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMi40ODYsNzQuMDAxIEMxMi40NzYsNzQuMDAxIDEyLjQ2NSw3My45OTkgMTIuNDU1LDczLjk5NiBDMTIuNDI0LDczLjk4OCAxMi4zOTksNzMuOTY3IDEyLjM4NCw3My45NCBMMi4xMDYsNTUuMTkgQzEuMDc1LDUzLjMxIDEuODU3LDUwLjg0NSAzLjg0OCw0OS42OTYgTDU5Ljg1OCwxNy4zNTIgQzYwLjUyNSwxNi45NjcgNjEuMjcxLDE2Ljc2NCA2Mi4wMTYsMTYuNzY0IEM2My40MzEsMTYuNzY0IDY0LjY2NiwxNy40NjYgNjUuMzI3LDE4LjY0NiBDNjUuMzM3LDE4LjY1NCA2NS4zNDUsMTguNjYzIDY1LjM1MSwxOC42NzQgTDY1LjU3OCwxOS4wODggQzY1LjU4NCwxOS4xIDY1LjU4OSwxOS4xMTIgNjUuNTkxLDE5LjEyNiBDNjUuOTg1LDE5LjgzOCA2Ni40NjksMjAuNDk3IDY3LjAzLDIxLjA4NSBMNjcuMzA1LDIxLjM1MSBDNjkuMTUxLDIzLjEzNyA3MS42NDksMjQuMTIgNzQuMzM2LDI0LjEyIEM3Ni4zMTMsMjQuMTIgNzguMjksMjMuNTgyIDgwLjA1MywyMi41NjMgQzgwLjA2NCwyMi41NTcgODAuMDc2LDIyLjU1MyA4MC4wODgsMjIuNTUgTDg3LjM3MiwxOC4zNDQgQzg4LjAzOCwxNy45NTkgODguNzg0LDE3Ljc1NiA4OS41MjksMTcuNzU2IEM5MC45NTYsMTcuNzU2IDkyLjIwMSwxOC40NzIgOTIuODU4LDE5LjY3IEw5Ni4xMDcsMjUuNTk5IEM5Ni4xMzgsMjUuNjU0IDk2LjExOCwyNS43MjQgOTYuMDYzLDI1Ljc1NiBMMTIuNTQ1LDczLjk4NSBDMTIuNTI2LDczLjk5NiAxMi41MDYsNzQuMDAxIDEyLjQ4Niw3NC4wMDEgTDEyLjQ4Niw3NC4wMDEgWiBNNjIuMDE2LDE2Ljk5NyBDNjEuMzEyLDE2Ljk5NyA2MC42MDYsMTcuMTkgNTkuOTc1LDE3LjU1NCBMMy45NjUsNDkuODk5IEMyLjA4Myw1MC45ODUgMS4zNDEsNTMuMzA4IDIuMzEsNTUuMDc4IEwxMi41MzEsNzMuNzIzIEw5NS44NDgsMjUuNjExIEw5Mi42NTMsMTkuNzgyIEM5Mi4wMzgsMTguNjYgOTAuODcsMTcuOTkgODkuNTI5LDE3Ljk5IEM4OC44MjUsMTcuOTkgODguMTE5LDE4LjE4MiA4Ny40ODksMTguNTQ3IEw4MC4xNzIsMjIuNzcyIEM4MC4xNjEsMjIuNzc4IDgwLjE0OSwyMi43ODIgODAuMTM3LDIyLjc4NSBDNzguMzQ2LDIzLjgxMSA3Ni4zNDEsMjQuMzU0IDc0LjMzNiwyNC4zNTQgQzcxLjU4OCwyNC4zNTQgNjkuMDMzLDIzLjM0NyA2Ny4xNDIsMjEuNTE5IEw2Ni44NjQsMjEuMjQ5IEM2Ni4yNzcsMjAuNjM0IDY1Ljc3NCwxOS45NDcgNjUuMzY3LDE5LjIwMyBDNjUuMzYsMTkuMTkyIDY1LjM1NiwxOS4xNzkgNjUuMzU0LDE5LjE2NiBMNjUuMTYzLDE4LjgxOSBDNjUuMTU0LDE4LjgxMSA2NS4xNDYsMTguODAxIDY1LjE0LDE4Ljc5IEM2NC41MjUsMTcuNjY3IDYzLjM1NywxNi45OTcgNjIuMDE2LDE2Ljk5NyBMNjIuMDE2LDE2Ljk5NyBaIiBpZD0iRmlsbC03IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTQyLjQzNCw0OC44MDggTDQyLjQzNCw0OC44MDggQzM5LjkyNCw0OC44MDcgMzcuNzM3LDQ3LjU1IDM2LjU4Miw0NS40NDMgQzM0Ljc3MSw0Mi4xMzkgMzYuMTQ0LDM3LjgwOSAzOS42NDEsMzUuNzg5IEw1MS45MzIsMjguNjkxIEM1My4xMDMsMjguMDE1IDU0LjQxMywyNy42NTggNTUuNzIxLDI3LjY1OCBDNTguMjMxLDI3LjY1OCA2MC40MTgsMjguOTE2IDYxLjU3MywzMS4wMjMgQzYzLjM4NCwzNC4zMjcgNjIuMDEyLDM4LjY1NyA1OC41MTQsNDAuNjc3IEw0Ni4yMjMsNDcuNzc1IEM0NS4wNTMsNDguNDUgNDMuNzQyLDQ4LjgwOCA0Mi40MzQsNDguODA4IEw0Mi40MzQsNDguODA4IFogTTU1LjcyMSwyOC4xMjUgQzU0LjQ5NSwyOC4xMjUgNTMuMjY1LDI4LjQ2MSA1Mi4xNjYsMjkuMDk2IEwzOS44NzUsMzYuMTk0IEMzNi41OTYsMzguMDg3IDM1LjMwMiw0Mi4xMzYgMzYuOTkyLDQ1LjIxOCBDMzguMDYzLDQ3LjE3MyA0MC4wOTgsNDguMzQgNDIuNDM0LDQ4LjM0IEM0My42NjEsNDguMzQgNDQuODksNDguMDA1IDQ1Ljk5LDQ3LjM3IEw1OC4yODEsNDAuMjcyIEM2MS41NiwzOC4zNzkgNjIuODUzLDM0LjMzIDYxLjE2NCwzMS4yNDggQzYwLjA5MiwyOS4yOTMgNTguMDU4LDI4LjEyNSA1NS43MjEsMjguMTI1IEw1NS43MjEsMjguMTI1IFoiIGlkPSJGaWxsLTgiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ5LjU4OCwyLjQwNyBDMTQ5LjU4OCwyLjQwNyAxNTUuNzY4LDUuOTc1IDE1Ni4zMjUsNi4yOTcgTDE1Ni4zMjUsNy4xODQgQzE1Ni4zMjUsNy4zNiAxNTYuMzM4LDcuNTQ0IDE1Ni4zNjIsNy43MzMgQzE1Ni4zNzMsNy44MTQgMTU2LjM4Miw3Ljg5NCAxNTYuMzksNy45NzUgQzE1Ni41Myw5LjM5IDE1Ny4zNjMsMTAuOTczIDE1OC40OTUsMTEuOTc0IEwxNjUuODkxLDE4LjUxOSBDMTY2LjA2OCwxOC42NzUgMTY2LjI0OSwxOC44MTQgMTY2LjQzMiwxOC45MzQgQzE2OC4wMTEsMTkuOTc0IDE2OS4zODIsMTkuNCAxNjkuNDk0LDE3LjY1MiBDMTY5LjU0MywxNi44NjggMTY5LjU1MSwxNi4wNTcgMTY5LjUxNywxNS4yMjMgTDE2OS41MTQsMTUuMDYzIEwxNjkuNTE0LDEzLjkxMiBDMTcwLjc4LDE0LjY0MiAxOTUuNTAxLDI4LjkxNSAxOTUuNTAxLDI4LjkxNSBMMTk1LjUwMSw4Mi45MTUgQzE5NS41MDEsODQuMDA1IDE5NC43MzEsODQuNDQ1IDE5My43ODEsODMuODk3IEwxNTEuMzA4LDU5LjM3NCBDMTUwLjM1OCw1OC44MjYgMTQ5LjU4OCw1Ny40OTcgMTQ5LjU4OCw1Ni40MDggTDE0OS41ODgsMjIuMzc1IiBpZD0iRmlsbC05IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE5NC41NTMsODQuMjUgQzE5NC4yOTYsODQuMjUgMTk0LjAxMyw4NC4xNjUgMTkzLjcyMiw4My45OTcgTDE1MS4yNSw1OS40NzYgQzE1MC4yNjksNTguOTA5IDE0OS40NzEsNTcuNTMzIDE0OS40NzEsNTYuNDA4IEwxNDkuNDcxLDIyLjM3NSBMMTQ5LjcwNSwyMi4zNzUgTDE0OS43MDUsNTYuNDA4IEMxNDkuNzA1LDU3LjQ1OSAxNTAuNDUsNTguNzQ0IDE1MS4zNjYsNTkuMjc0IEwxOTMuODM5LDgzLjc5NSBDMTk0LjI2Myw4NC4wNCAxOTQuNjU1LDg0LjA4MyAxOTQuOTQyLDgzLjkxNyBDMTk1LjIyNyw4My43NTMgMTk1LjM4NCw4My4zOTcgMTk1LjM4NCw4Mi45MTUgTDE5NS4zODQsMjguOTgyIEMxOTQuMTAyLDI4LjI0MiAxNzIuMTA0LDE1LjU0MiAxNjkuNjMxLDE0LjExNCBMMTY5LjYzNCwxNS4yMiBDMTY5LjY2OCwxNi4wNTIgMTY5LjY2LDE2Ljg3NCAxNjkuNjEsMTcuNjU5IEMxNjkuNTU2LDE4LjUwMyAxNjkuMjE0LDE5LjEyMyAxNjguNjQ3LDE5LjQwNSBDMTY4LjAyOCwxOS43MTQgMTY3LjE5NywxOS41NzggMTY2LjM2NywxOS4wMzIgQzE2Ni4xODEsMTguOTA5IDE2NS45OTUsMTguNzY2IDE2NS44MTQsMTguNjA2IEwxNTguNDE3LDEyLjA2MiBDMTU3LjI1OSwxMS4wMzYgMTU2LjQxOCw5LjQzNyAxNTYuMjc0LDcuOTg2IEMxNTYuMjY2LDcuOTA3IDE1Ni4yNTcsNy44MjcgMTU2LjI0Nyw3Ljc0OCBDMTU2LjIyMSw3LjU1NSAxNTYuMjA5LDcuMzY1IDE1Ni4yMDksNy4xODQgTDE1Ni4yMDksNi4zNjQgQzE1NS4zNzUsNS44ODMgMTQ5LjUyOSwyLjUwOCAxNDkuNTI5LDIuNTA4IEwxNDkuNjQ2LDIuMzA2IEMxNDkuNjQ2LDIuMzA2IDE1NS44MjcsNS44NzQgMTU2LjM4NCw2LjE5NiBMMTU2LjQ0Miw2LjIzIEwxNTYuNDQyLDcuMTg0IEMxNTYuNDQyLDcuMzU1IDE1Ni40NTQsNy41MzUgMTU2LjQ3OCw3LjcxNyBDMTU2LjQ4OSw3LjggMTU2LjQ5OSw3Ljg4MiAxNTYuNTA3LDcuOTYzIEMxNTYuNjQ1LDkuMzU4IDE1Ny40NTUsMTAuODk4IDE1OC41NzIsMTEuODg2IEwxNjUuOTY5LDE4LjQzMSBDMTY2LjE0MiwxOC41ODQgMTY2LjMxOSwxOC43MiAxNjYuNDk2LDE4LjgzNyBDMTY3LjI1NCwxOS4zMzYgMTY4LDE5LjQ2NyAxNjguNTQzLDE5LjE5NiBDMTY5LjAzMywxOC45NTMgMTY5LjMyOSwxOC40MDEgMTY5LjM3NywxNy42NDUgQzE2OS40MjcsMTYuODY3IDE2OS40MzQsMTYuMDU0IDE2OS40MDEsMTUuMjI4IEwxNjkuMzk3LDE1LjA2NSBMMTY5LjM5NywxMy43MSBMMTY5LjU3MiwxMy44MSBDMTcwLjgzOSwxNC41NDEgMTk1LjU1OSwyOC44MTQgMTk1LjU1OSwyOC44MTQgTDE5NS42MTgsMjguODQ3IEwxOTUuNjE4LDgyLjkxNSBDMTk1LjYxOCw4My40ODQgMTk1LjQyLDgzLjkxMSAxOTUuMDU5LDg0LjExOSBDMTk0LjkwOCw4NC4yMDYgMTk0LjczNyw4NC4yNSAxOTQuNTUzLDg0LjI1IiBpZD0iRmlsbC0xMCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNDUuNjg1LDU2LjE2MSBMMTY5LjgsNzAuMDgzIEwxNDMuODIyLDg1LjA4MSBMMTQyLjM2LDg0Ljc3NCBDMTM1LjgyNiw4Mi42MDQgMTI4LjczMiw4MS4wNDYgMTIxLjM0MSw4MC4xNTggQzExNi45NzYsNzkuNjM0IDExMi42NzgsODEuMjU0IDExMS43NDMsODMuNzc4IEMxMTEuNTA2LDg0LjQxNCAxMTEuNTAzLDg1LjA3MSAxMTEuNzMyLDg1LjcwNiBDMTEzLjI3LDg5Ljk3MyAxMTUuOTY4LDk0LjA2OSAxMTkuNzI3LDk3Ljg0MSBMMTIwLjI1OSw5OC42ODYgQzEyMC4yNiw5OC42ODUgOTQuMjgyLDExMy42ODMgOTQuMjgyLDExMy42ODMgTDcwLjE2Nyw5OS43NjEgTDE0NS42ODUsNTYuMTYxIiBpZD0iRmlsbC0xMSIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik05NC4yODIsMTEzLjgxOCBMOTQuMjIzLDExMy43ODUgTDY5LjkzMyw5OS43NjEgTDcwLjEwOCw5OS42NiBMMTQ1LjY4NSw1Ni4wMjYgTDE0NS43NDMsNTYuMDU5IEwxNzAuMDMzLDcwLjA4MyBMMTQzLjg0Miw4NS4yMDUgTDE0My43OTcsODUuMTk1IEMxNDMuNzcyLDg1LjE5IDE0Mi4zMzYsODQuODg4IDE0Mi4zMzYsODQuODg4IEMxMzUuNzg3LDgyLjcxNCAxMjguNzIzLDgxLjE2MyAxMjEuMzI3LDgwLjI3NCBDMTIwLjc4OCw4MC4yMDkgMTIwLjIzNiw4MC4xNzcgMTE5LjY4OSw4MC4xNzcgQzExNS45MzEsODAuMTc3IDExMi42MzUsODEuNzA4IDExMS44NTIsODMuODE5IEMxMTEuNjI0LDg0LjQzMiAxMTEuNjIxLDg1LjA1MyAxMTEuODQyLDg1LjY2NyBDMTEzLjM3Nyw4OS45MjUgMTE2LjA1OCw5My45OTMgMTE5LjgxLDk3Ljc1OCBMMTE5LjgyNiw5Ny43NzkgTDEyMC4zNTIsOTguNjE0IEMxMjAuMzU0LDk4LjYxNyAxMjAuMzU2LDk4LjYyIDEyMC4zNTgsOTguNjI0IEwxMjAuNDIyLDk4LjcyNiBMMTIwLjMxNyw5OC43ODcgQzEyMC4yNjQsOTguODE4IDk0LjU5OSwxMTMuNjM1IDk0LjM0LDExMy43ODUgTDk0LjI4MiwxMTMuODE4IEw5NC4yODIsMTEzLjgxOCBaIE03MC40MDEsOTkuNzYxIEw5NC4yODIsMTEzLjU0OSBMMTE5LjA4NCw5OS4yMjkgQzExOS42Myw5OC45MTQgMTE5LjkzLDk4Ljc0IDEyMC4xMDEsOTguNjU0IEwxMTkuNjM1LDk3LjkxNCBDMTE1Ljg2NCw5NC4xMjcgMTEzLjE2OCw5MC4wMzMgMTExLjYyMiw4NS43NDYgQzExMS4zODIsODUuMDc5IDExMS4zODYsODQuNDA0IDExMS42MzMsODMuNzM4IEMxMTIuNDQ4LDgxLjUzOSAxMTUuODM2LDc5Ljk0MyAxMTkuNjg5LDc5Ljk0MyBDMTIwLjI0Niw3OS45NDMgMTIwLjgwNiw3OS45NzYgMTIxLjM1NSw4MC4wNDIgQzEyOC43NjcsODAuOTMzIDEzNS44NDYsODIuNDg3IDE0Mi4zOTYsODQuNjYzIEMxNDMuMjMyLDg0LjgzOCAxNDMuNjExLDg0LjkxNyAxNDMuNzg2LDg0Ljk2NyBMMTY5LjU2Niw3MC4wODMgTDE0NS42ODUsNTYuMjk1IEw3MC40MDEsOTkuNzYxIEw3MC40MDEsOTkuNzYxIFoiIGlkPSJGaWxsLTEyIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2Ny4yMywxOC45NzkgTDE2Ny4yMyw2OS44NSBMMTM5LjkwOSw4NS42MjMgTDEzMy40NDgsNzEuNDU2IEMxMzIuNTM4LDY5LjQ2IDEzMC4wMiw2OS43MTggMTI3LjgyNCw3Mi4wMyBDMTI2Ljc2OSw3My4xNCAxMjUuOTMxLDc0LjU4NSAxMjUuNDk0LDc2LjA0OCBMMTE5LjAzNCw5Ny42NzYgTDkxLjcxMiwxMTMuNDUgTDkxLjcxMiw2Mi41NzkgTDE2Ny4yMywxOC45NzkiIGlkPSJGaWxsLTEzIiBmaWxsPSIjRkZGRkZGIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTkxLjcxMiwxMTMuNTY3IEM5MS42OTIsMTEzLjU2NyA5MS42NzIsMTEzLjU2MSA5MS42NTMsMTEzLjU1MSBDOTEuNjE4LDExMy41MyA5MS41OTUsMTEzLjQ5MiA5MS41OTUsMTEzLjQ1IEw5MS41OTUsNjIuNTc5IEM5MS41OTUsNjIuNTM3IDkxLjYxOCw2Mi40OTkgOTEuNjUzLDYyLjQ3OCBMMTY3LjE3MiwxOC44NzggQzE2Ny4yMDgsMTguODU3IDE2Ny4yNTIsMTguODU3IDE2Ny4yODgsMTguODc4IEMxNjcuMzI0LDE4Ljg5OSAxNjcuMzQ3LDE4LjkzNyAxNjcuMzQ3LDE4Ljk3OSBMMTY3LjM0Nyw2OS44NSBDMTY3LjM0Nyw2OS44OTEgMTY3LjMyNCw2OS45MyAxNjcuMjg4LDY5Ljk1IEwxMzkuOTY3LDg1LjcyNSBDMTM5LjkzOSw4NS43NDEgMTM5LjkwNSw4NS43NDUgMTM5Ljg3Myw4NS43MzUgQzEzOS44NDIsODUuNzI1IDEzOS44MTYsODUuNzAyIDEzOS44MDIsODUuNjcyIEwxMzMuMzQyLDcxLjUwNCBDMTMyLjk2Nyw3MC42ODIgMTMyLjI4LDcwLjIyOSAxMzEuNDA4LDcwLjIyOSBDMTMwLjMxOSw3MC4yMjkgMTI5LjA0NCw3MC45MTUgMTI3LjkwOCw3Mi4xMSBDMTI2Ljg3NCw3My4yIDEyNi4wMzQsNzQuNjQ3IDEyNS42MDYsNzYuMDgyIEwxMTkuMTQ2LDk3LjcwOSBDMTE5LjEzNyw5Ny43MzggMTE5LjExOCw5Ny43NjIgMTE5LjA5Miw5Ny43NzcgTDkxLjc3LDExMy41NTEgQzkxLjc1MiwxMTMuNTYxIDkxLjczMiwxMTMuNTY3IDkxLjcxMiwxMTMuNTY3IEw5MS43MTIsMTEzLjU2NyBaIE05MS44MjksNjIuNjQ3IEw5MS44MjksMTEzLjI0OCBMMTE4LjkzNSw5Ny41OTggTDEyNS4zODIsNzYuMDE1IEMxMjUuODI3LDc0LjUyNSAxMjYuNjY0LDczLjA4MSAxMjcuNzM5LDcxLjk1IEMxMjguOTE5LDcwLjcwOCAxMzAuMjU2LDY5Ljk5NiAxMzEuNDA4LDY5Ljk5NiBDMTMyLjM3Nyw2OS45OTYgMTMzLjEzOSw3MC40OTcgMTMzLjU1NCw3MS40MDcgTDEzOS45NjEsODUuNDU4IEwxNjcuMTEzLDY5Ljc4MiBMMTY3LjExMywxOS4xODEgTDkxLjgyOSw2Mi42NDcgTDkxLjgyOSw2Mi42NDcgWiIgaWQ9IkZpbGwtMTQiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTY4LjU0MywxOS4yMTMgTDE2OC41NDMsNzAuMDgzIEwxNDEuMjIxLDg1Ljg1NyBMMTM0Ljc2MSw3MS42ODkgQzEzMy44NTEsNjkuNjk0IDEzMS4zMzMsNjkuOTUxIDEyOS4xMzcsNzIuMjYzIEMxMjguMDgyLDczLjM3NCAxMjcuMjQ0LDc0LjgxOSAxMjYuODA3LDc2LjI4MiBMMTIwLjM0Niw5Ny45MDkgTDkzLjAyNSwxMTMuNjgzIEw5My4wMjUsNjIuODEzIEwxNjguNTQzLDE5LjIxMyIgaWQ9IkZpbGwtMTUiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTMuMDI1LDExMy44IEM5My4wMDUsMTEzLjggOTIuOTg0LDExMy43OTUgOTIuOTY2LDExMy43ODUgQzkyLjkzMSwxMTMuNzY0IDkyLjkwOCwxMTMuNzI1IDkyLjkwOCwxMTMuNjg0IEw5Mi45MDgsNjIuODEzIEM5Mi45MDgsNjIuNzcxIDkyLjkzMSw2Mi43MzMgOTIuOTY2LDYyLjcxMiBMMTY4LjQ4NCwxOS4xMTIgQzE2OC41MiwxOS4wOSAxNjguNTY1LDE5LjA5IDE2OC42MDEsMTkuMTEyIEMxNjguNjM3LDE5LjEzMiAxNjguNjYsMTkuMTcxIDE2OC42NiwxOS4yMTIgTDE2OC42Niw3MC4wODMgQzE2OC42Niw3MC4xMjUgMTY4LjYzNyw3MC4xNjQgMTY4LjYwMSw3MC4xODQgTDE0MS4yOCw4NS45NTggQzE0MS4yNTEsODUuOTc1IDE0MS4yMTcsODUuOTc5IDE0MS4xODYsODUuOTY4IEMxNDEuMTU0LDg1Ljk1OCAxNDEuMTI5LDg1LjkzNiAxNDEuMTE1LDg1LjkwNiBMMTM0LjY1NSw3MS43MzggQzEzNC4yOCw3MC45MTUgMTMzLjU5Myw3MC40NjMgMTMyLjcyLDcwLjQ2MyBDMTMxLjYzMiw3MC40NjMgMTMwLjM1Nyw3MS4xNDggMTI5LjIyMSw3Mi4zNDQgQzEyOC4xODYsNzMuNDMzIDEyNy4zNDcsNzQuODgxIDEyNi45MTksNzYuMzE1IEwxMjAuNDU4LDk3Ljk0MyBDMTIwLjQ1LDk3Ljk3MiAxMjAuNDMxLDk3Ljk5NiAxMjAuNDA1LDk4LjAxIEw5My4wODMsMTEzLjc4NSBDOTMuMDY1LDExMy43OTUgOTMuMDQ1LDExMy44IDkzLjAyNSwxMTMuOCBMOTMuMDI1LDExMy44IFogTTkzLjE0Miw2Mi44ODEgTDkzLjE0MiwxMTMuNDgxIEwxMjAuMjQ4LDk3LjgzMiBMMTI2LjY5NSw3Ni4yNDggQzEyNy4xNCw3NC43NTggMTI3Ljk3Nyw3My4zMTUgMTI5LjA1Miw3Mi4xODMgQzEzMC4yMzEsNzAuOTQyIDEzMS41NjgsNzAuMjI5IDEzMi43Miw3MC4yMjkgQzEzMy42ODksNzAuMjI5IDEzNC40NTIsNzAuNzMxIDEzNC44NjcsNzEuNjQxIEwxNDEuMjc0LDg1LjY5MiBMMTY4LjQyNiw3MC4wMTYgTDE2OC40MjYsMTkuNDE1IEw5My4xNDIsNjIuODgxIEw5My4xNDIsNjIuODgxIFoiIGlkPSJGaWxsLTE2IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2OS44LDcwLjA4MyBMMTQyLjQ3OCw4NS44NTcgTDEzNi4wMTgsNzEuNjg5IEMxMzUuMTA4LDY5LjY5NCAxMzIuNTksNjkuOTUxIDEzMC4zOTMsNzIuMjYzIEMxMjkuMzM5LDczLjM3NCAxMjguNSw3NC44MTkgMTI4LjA2NCw3Ni4yODIgTDEyMS42MDMsOTcuOTA5IEw5NC4yODIsMTEzLjY4MyBMOTQuMjgyLDYyLjgxMyBMMTY5LjgsMTkuMjEzIEwxNjkuOCw3MC4wODMgWiIgaWQ9IkZpbGwtMTciIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTQuMjgyLDExMy45MTcgQzk0LjI0MSwxMTMuOTE3IDk0LjIwMSwxMTMuOTA3IDk0LjE2NSwxMTMuODg2IEM5NC4wOTMsMTEzLjg0NSA5NC4wNDgsMTEzLjc2NyA5NC4wNDgsMTEzLjY4NCBMOTQuMDQ4LDYyLjgxMyBDOTQuMDQ4LDYyLjczIDk0LjA5Myw2Mi42NTIgOTQuMTY1LDYyLjYxMSBMMTY5LjY4MywxOS4wMSBDMTY5Ljc1NSwxOC45NjkgMTY5Ljg0NCwxOC45NjkgMTY5LjkxNywxOS4wMSBDMTY5Ljk4OSwxOS4wNTIgMTcwLjAzMywxOS4xMjkgMTcwLjAzMywxOS4yMTIgTDE3MC4wMzMsNzAuMDgzIEMxNzAuMDMzLDcwLjE2NiAxNjkuOTg5LDcwLjI0NCAxNjkuOTE3LDcwLjI4NSBMMTQyLjU5NSw4Ni4wNiBDMTQyLjUzOCw4Ni4wOTIgMTQyLjQ2OSw4Ni4xIDE0Mi40MDcsODYuMDggQzE0Mi4zNDQsODYuMDYgMTQyLjI5Myw4Ni4wMTQgMTQyLjI2Niw4NS45NTQgTDEzNS44MDUsNzEuNzg2IEMxMzUuNDQ1LDcwLjk5NyAxMzQuODEzLDcwLjU4IDEzMy45NzcsNzAuNTggQzEzMi45MjEsNzAuNTggMTMxLjY3Niw3MS4yNTIgMTMwLjU2Miw3Mi40MjQgQzEyOS41NCw3My41MDEgMTI4LjcxMSw3NC45MzEgMTI4LjI4Nyw3Ni4zNDggTDEyMS44MjcsOTcuOTc2IEMxMjEuODEsOTguMDM0IDEyMS43NzEsOTguMDgyIDEyMS43Miw5OC4xMTIgTDk0LjM5OCwxMTMuODg2IEM5NC4zNjIsMTEzLjkwNyA5NC4zMjIsMTEzLjkxNyA5NC4yODIsMTEzLjkxNyBMOTQuMjgyLDExMy45MTcgWiBNOTQuNTE1LDYyLjk0OCBMOTQuNTE1LDExMy4yNzkgTDEyMS40MDYsOTcuNzU0IEwxMjcuODQsNzYuMjE1IEMxMjguMjksNzQuNzA4IDEyOS4xMzcsNzMuMjQ3IDEzMC4yMjQsNzIuMTAzIEMxMzEuNDI1LDcwLjgzOCAxMzIuNzkzLDcwLjExMiAxMzMuOTc3LDcwLjExMiBDMTM0Ljk5NSw3MC4xMTIgMTM1Ljc5NSw3MC42MzggMTM2LjIzLDcxLjU5MiBMMTQyLjU4NCw4NS41MjYgTDE2OS41NjYsNjkuOTQ4IEwxNjkuNTY2LDE5LjYxNyBMOTQuNTE1LDYyLjk0OCBMOTQuNTE1LDYyLjk0OCBaIiBpZD0iRmlsbC0xOCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMDkuODk0LDkyLjk0MyBMMTA5Ljg5NCw5Mi45NDMgQzEwOC4xMiw5Mi45NDMgMTA2LjY1Myw5Mi4yMTggMTA1LjY1LDkwLjgyMyBDMTA1LjU4Myw5MC43MzEgMTA1LjU5Myw5MC42MSAxMDUuNjczLDkwLjUyOSBDMTA1Ljc1Myw5MC40NDggMTA1Ljg4LDkwLjQ0IDEwNS45NzQsOTAuNTA2IEMxMDYuNzU0LDkxLjA1MyAxMDcuNjc5LDkxLjMzMyAxMDguNzI0LDkxLjMzMyBDMTEwLjA0Nyw5MS4zMzMgMTExLjQ3OCw5MC44OTQgMTEyLjk4LDkwLjAyNyBDMTE4LjI5MSw4Ni45NiAxMjIuNjExLDc5LjUwOSAxMjIuNjExLDczLjQxNiBDMTIyLjYxMSw3MS40ODkgMTIyLjE2OSw2OS44NTYgMTIxLjMzMyw2OC42OTIgQzEyMS4yNjYsNjguNiAxMjEuMjc2LDY4LjQ3MyAxMjEuMzU2LDY4LjM5MiBDMTIxLjQzNiw2OC4zMTEgMTIxLjU2Myw2OC4yOTkgMTIxLjY1Niw2OC4zNjUgQzEyMy4zMjcsNjkuNTM3IDEyNC4yNDcsNzEuNzQ2IDEyNC4yNDcsNzQuNTg0IEMxMjQuMjQ3LDgwLjgyNiAxMTkuODIxLDg4LjQ0NyAxMTQuMzgyLDkxLjU4NyBDMTEyLjgwOCw5Mi40OTUgMTExLjI5OCw5Mi45NDMgMTA5Ljg5NCw5Mi45NDMgTDEwOS44OTQsOTIuOTQzIFogTTEwNi45MjUsOTEuNDAxIEMxMDcuNzM4LDkyLjA1MiAxMDguNzQ1LDkyLjI3OCAxMDkuODkzLDkyLjI3OCBMMTA5Ljg5NCw5Mi4yNzggQzExMS4yMTUsOTIuMjc4IDExMi42NDcsOTEuOTUxIDExNC4xNDgsOTEuMDg0IEMxMTkuNDU5LDg4LjAxNyAxMjMuNzgsODAuNjIxIDEyMy43OCw3NC41MjggQzEyMy43OCw3Mi41NDkgMTIzLjMxNyw3MC45MjkgMTIyLjQ1NCw2OS43NjcgQzEyMi44NjUsNzAuODAyIDEyMy4wNzksNzIuMDQyIDEyMy4wNzksNzMuNDAyIEMxMjMuMDc5LDc5LjY0NSAxMTguNjUzLDg3LjI4NSAxMTMuMjE0LDkwLjQyNSBDMTExLjY0LDkxLjMzNCAxMTAuMTMsOTEuNzQyIDEwOC43MjQsOTEuNzQyIEMxMDguMDgzLDkxLjc0MiAxMDcuNDgxLDkxLjU5MyAxMDYuOTI1LDkxLjQwMSBMMTA2LjkyNSw5MS40MDEgWiIgaWQ9IkZpbGwtMTkiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjA5Nyw5MC4yMyBDMTE4LjQ4MSw4Ny4xMjIgMTIyLjg0NSw3OS41OTQgMTIyLjg0NSw3My40MTYgQzEyMi44NDUsNzEuMzY1IDEyMi4zNjIsNjkuNzI0IDEyMS41MjIsNjguNTU2IEMxMTkuNzM4LDY3LjMwNCAxMTcuMTQ4LDY3LjM2MiAxMTQuMjY1LDY5LjAyNiBDMTA4Ljg4MSw3Mi4xMzQgMTA0LjUxNyw3OS42NjIgMTA0LjUxNyw4NS44NCBDMTA0LjUxNyw4Ny44OTEgMTA1LDg5LjUzMiAxMDUuODQsOTAuNyBDMTA3LjYyNCw5MS45NTIgMTEwLjIxNCw5MS44OTQgMTEzLjA5Nyw5MC4yMyIgaWQ9IkZpbGwtMjAiIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTA4LjcyNCw5MS42MTQgTDEwOC43MjQsOTEuNjE0IEMxMDcuNTgyLDkxLjYxNCAxMDYuNTY2LDkxLjQwMSAxMDUuNzA1LDkwLjc5NyBDMTA1LjY4NCw5MC43ODMgMTA1LjY2NSw5MC44MTEgMTA1LjY1LDkwLjc5IEMxMDQuNzU2LDg5LjU0NiAxMDQuMjgzLDg3Ljg0MiAxMDQuMjgzLDg1LjgxNyBDMTA0LjI4Myw3OS41NzUgMTA4LjcwOSw3MS45NTMgMTE0LjE0OCw2OC44MTIgQzExNS43MjIsNjcuOTA0IDExNy4yMzIsNjcuNDQ5IDExOC42MzgsNjcuNDQ5IEMxMTkuNzgsNjcuNDQ5IDEyMC43OTYsNjcuNzU4IDEyMS42NTYsNjguMzYyIEMxMjEuNjc4LDY4LjM3NyAxMjEuNjk3LDY4LjM5NyAxMjEuNzEyLDY4LjQxOCBDMTIyLjYwNiw2OS42NjIgMTIzLjA3OSw3MS4zOSAxMjMuMDc5LDczLjQxNSBDMTIzLjA3OSw3OS42NTggMTE4LjY1Myw4Ny4xOTggMTEzLjIxNCw5MC4zMzggQzExMS42NCw5MS4yNDcgMTEwLjEzLDkxLjYxNCAxMDguNzI0LDkxLjYxNCBMMTA4LjcyNCw5MS42MTQgWiBNMTA2LjAwNiw5MC41MDUgQzEwNi43OCw5MS4wMzcgMTA3LjY5NCw5MS4yODEgMTA4LjcyNCw5MS4yODEgQzExMC4wNDcsOTEuMjgxIDExMS40NzgsOTAuODY4IDExMi45OCw5MC4wMDEgQzExOC4yOTEsODYuOTM1IDEyMi42MTEsNzkuNDk2IDEyMi42MTEsNzMuNDAzIEMxMjIuNjExLDcxLjQ5NCAxMjIuMTc3LDY5Ljg4IDEyMS4zNTYsNjguNzE4IEMxMjAuNTgyLDY4LjE4NSAxMTkuNjY4LDY3LjkxOSAxMTguNjM4LDY3LjkxOSBDMTE3LjMxNSw2Ny45MTkgMTE1Ljg4Myw2OC4zNiAxMTQuMzgyLDY5LjIyNyBDMTA5LjA3MSw3Mi4yOTMgMTA0Ljc1MSw3OS43MzMgMTA0Ljc1MSw4NS44MjYgQzEwNC43NTEsODcuNzM1IDEwNS4xODUsODkuMzQzIDEwNi4wMDYsOTAuNTA1IEwxMDYuMDA2LDkwLjUwNSBaIiBpZD0iRmlsbC0yMSIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNDkuMzE4LDcuMjYyIEwxMzkuMzM0LDE2LjE0IEwxNTUuMjI3LDI3LjE3MSBMMTYwLjgxNiwyMS4wNTkgTDE0OS4zMTgsNy4yNjIiIGlkPSJGaWxsLTIyIiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2OS42NzYsMTMuODQgTDE1OS45MjgsMTkuNDY3IEMxNTYuMjg2LDIxLjU3IDE1MC40LDIxLjU4IDE0Ni43ODEsMTkuNDkxIEMxNDMuMTYxLDE3LjQwMiAxNDMuMTgsMTQuMDAzIDE0Ni44MjIsMTEuOSBMMTU2LjMxNyw2LjI5MiBMMTQ5LjU4OCwyLjQwNyBMNjcuNzUyLDQ5LjQ3OCBMMTEzLjY3NSw3NS45OTIgTDExNi43NTYsNzQuMjEzIEMxMTcuMzg3LDczLjg0OCAxMTcuNjI1LDczLjMxNSAxMTcuMzc0LDcyLjgyMyBDMTE1LjAxNyw2OC4xOTEgMTE0Ljc4MSw2My4yNzcgMTE2LjY5MSw1OC41NjEgQzEyMi4zMjksNDQuNjQxIDE0MS4yLDMzLjc0NiAxNjUuMzA5LDMwLjQ5MSBDMTczLjQ3OCwyOS4zODggMTgxLjk4OSwyOS41MjQgMTkwLjAxMywzMC44ODUgQzE5MC44NjUsMzEuMDMgMTkxLjc4OSwzMC44OTMgMTkyLjQyLDMwLjUyOCBMMTk1LjUwMSwyOC43NSBMMTY5LjY3NiwxMy44NCIgaWQ9IkZpbGwtMjMiIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjY3NSw3Ni40NTkgQzExMy41OTQsNzYuNDU5IDExMy41MTQsNzYuNDM4IDExMy40NDIsNzYuMzk3IEw2Ny41MTgsNDkuODgyIEM2Ny4zNzQsNDkuNzk5IDY3LjI4NCw0OS42NDUgNjcuMjg1LDQ5LjQ3OCBDNjcuMjg1LDQ5LjMxMSA2Ny4zNzQsNDkuMTU3IDY3LjUxOSw0OS4wNzMgTDE0OS4zNTUsMi4wMDIgQzE0OS40OTksMS45MTkgMTQ5LjY3NywxLjkxOSAxNDkuODIxLDIuMDAyIEwxNTYuNTUsNS44ODcgQzE1Ni43NzQsNi4wMTcgMTU2Ljg1LDYuMzAyIDE1Ni43MjIsNi41MjYgQzE1Ni41OTIsNi43NDkgMTU2LjMwNyw2LjgyNiAxNTYuMDgzLDYuNjk2IEwxNDkuNTg3LDIuOTQ2IEw2OC42ODcsNDkuNDc5IEwxMTMuNjc1LDc1LjQ1MiBMMTE2LjUyMyw3My44MDggQzExNi43MTUsNzMuNjk3IDExNy4xNDMsNzMuMzk5IDExNi45NTgsNzMuMDM1IEMxMTQuNTQyLDY4LjI4NyAxMTQuMyw2My4yMjEgMTE2LjI1OCw1OC4zODUgQzExOS4wNjQsNTEuNDU4IDEyNS4xNDMsNDUuMTQzIDEzMy44NCw0MC4xMjIgQzE0Mi40OTcsMzUuMTI0IDE1My4zNTgsMzEuNjMzIDE2NS4yNDcsMzAuMDI4IEMxNzMuNDQ1LDI4LjkyMSAxODIuMDM3LDI5LjA1OCAxOTAuMDkxLDMwLjQyNSBDMTkwLjgzLDMwLjU1IDE5MS42NTIsMzAuNDMyIDE5Mi4xODYsMzAuMTI0IEwxOTQuNTY3LDI4Ljc1IEwxNjkuNDQyLDE0LjI0NCBDMTY5LjIxOSwxNC4xMTUgMTY5LjE0MiwxMy44MjkgMTY5LjI3MSwxMy42MDYgQzE2OS40LDEzLjM4MiAxNjkuNjg1LDEzLjMwNiAxNjkuOTA5LDEzLjQzNSBMMTk1LjczNCwyOC4zNDUgQzE5NS44NzksMjguNDI4IDE5NS45NjgsMjguNTgzIDE5NS45NjgsMjguNzUgQzE5NS45NjgsMjguOTE2IDE5NS44NzksMjkuMDcxIDE5NS43MzQsMjkuMTU0IEwxOTIuNjUzLDMwLjkzMyBDMTkxLjkzMiwzMS4zNSAxOTAuODksMzEuNTA4IDE4OS45MzUsMzEuMzQ2IEMxODEuOTcyLDI5Ljk5NSAxNzMuNDc4LDI5Ljg2IDE2NS4zNzIsMzAuOTU0IEMxNTMuNjAyLDMyLjU0MyAxNDIuODYsMzUuOTkzIDEzNC4zMDcsNDAuOTMxIEMxMjUuNzkzLDQ1Ljg0NyAxMTkuODUxLDUyLjAwNCAxMTcuMTI0LDU4LjczNiBDMTE1LjI3LDYzLjMxNCAxMTUuNTAxLDY4LjExMiAxMTcuNzksNzIuNjExIEMxMTguMTYsNzMuMzM2IDExNy44NDUsNzQuMTI0IDExNi45OSw3NC42MTcgTDExMy45MDksNzYuMzk3IEMxMTMuODM2LDc2LjQzOCAxMTMuNzU2LDc2LjQ1OSAxMTMuNjc1LDc2LjQ1OSIgaWQ9IkZpbGwtMjQiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTUzLjMxNiwyMS4yNzkgQzE1MC45MDMsMjEuMjc5IDE0OC40OTUsMjAuNzUxIDE0Ni42NjQsMTkuNjkzIEMxNDQuODQ2LDE4LjY0NCAxNDMuODQ0LDE3LjIzMiAxNDMuODQ0LDE1LjcxOCBDMTQzLjg0NCwxNC4xOTEgMTQ0Ljg2LDEyLjc2MyAxNDYuNzA1LDExLjY5OCBMMTU2LjE5OCw2LjA5MSBDMTU2LjMwOSw2LjAyNSAxNTYuNDUyLDYuMDYyIDE1Ni41MTgsNi4xNzMgQzE1Ni41ODMsNi4yODQgMTU2LjU0Nyw2LjQyNyAxNTYuNDM2LDYuNDkzIEwxNDYuOTQsMTIuMTAyIEMxNDUuMjQ0LDEzLjA4MSAxNDQuMzEyLDE0LjM2NSAxNDQuMzEyLDE1LjcxOCBDMTQ0LjMxMiwxNy4wNTggMTQ1LjIzLDE4LjMyNiAxNDYuODk3LDE5LjI4OSBDMTUwLjQ0NiwyMS4zMzggMTU2LjI0LDIxLjMyNyAxNTkuODExLDE5LjI2NSBMMTY5LjU1OSwxMy42MzcgQzE2OS42NywxMy41NzMgMTY5LjgxMywxMy42MTEgMTY5Ljg3OCwxMy43MjMgQzE2OS45NDMsMTMuODM0IDE2OS45MDQsMTMuOTc3IDE2OS43OTMsMTQuMDQyIEwxNjAuMDQ1LDE5LjY3IEMxNTguMTg3LDIwLjc0MiAxNTUuNzQ5LDIxLjI3OSAxNTMuMzE2LDIxLjI3OSIgaWQ9IkZpbGwtMjUiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjY3NSw3NS45OTIgTDY3Ljc2Miw0OS40ODQiIGlkPSJGaWxsLTI2IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTExMy42NzUsNzYuMzQyIEMxMTMuNjE1LDc2LjM0MiAxMTMuNTU1LDc2LjMyNyAxMTMuNSw3Ni4yOTUgTDY3LjU4Nyw0OS43ODcgQzY3LjQxOSw0OS42OSA2Ny4zNjIsNDkuNDc2IDY3LjQ1OSw0OS4zMDkgQzY3LjU1Niw0OS4xNDEgNjcuNzcsNDkuMDgzIDY3LjkzNyw0OS4xOCBMMTEzLjg1LDc1LjY4OCBDMTE0LjAxOCw3NS43ODUgMTE0LjA3NSw3NiAxMTMuOTc4LDc2LjE2NyBDMTEzLjkxNCw3Ni4yNzkgMTEzLjc5Niw3Ni4zNDIgMTEzLjY3NSw3Ni4zNDIiIGlkPSJGaWxsLTI3IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTY3Ljc2Miw0OS40ODQgTDY3Ljc2MiwxMDMuNDg1IEM2Ny43NjIsMTA0LjU3NSA2OC41MzIsMTA1LjkwMyA2OS40ODIsMTA2LjQ1MiBMMTExLjk1NSwxMzAuOTczIEMxMTIuOTA1LDEzMS41MjIgMTEzLjY3NSwxMzEuMDgzIDExMy42NzUsMTI5Ljk5MyBMMTEzLjY3NSw3NS45OTIiIGlkPSJGaWxsLTI4IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTExMi43MjcsMTMxLjU2MSBDMTEyLjQzLDEzMS41NjEgMTEyLjEwNywxMzEuNDY2IDExMS43OCwxMzEuMjc2IEw2OS4zMDcsMTA2Ljc1NSBDNjguMjQ0LDEwNi4xNDIgNjcuNDEyLDEwNC43MDUgNjcuNDEyLDEwMy40ODUgTDY3LjQxMiw0OS40ODQgQzY3LjQxMiw0OS4yOSA2Ny41NjksNDkuMTM0IDY3Ljc2Miw0OS4xMzQgQzY3Ljk1Niw0OS4xMzQgNjguMTEzLDQ5LjI5IDY4LjExMyw0OS40ODQgTDY4LjExMywxMDMuNDg1IEM2OC4xMTMsMTA0LjQ0NSA2OC44MiwxMDUuNjY1IDY5LjY1NywxMDYuMTQ4IEwxMTIuMTMsMTMwLjY3IEMxMTIuNDc0LDEzMC44NjggMTEyLjc5MSwxMzAuOTEzIDExMywxMzAuNzkyIEMxMTMuMjA2LDEzMC42NzMgMTEzLjMyNSwxMzAuMzgxIDExMy4zMjUsMTI5Ljk5MyBMMTEzLjMyNSw3NS45OTIgQzExMy4zMjUsNzUuNzk4IDExMy40ODIsNzUuNjQxIDExMy42NzUsNzUuNjQxIEMxMTMuODY5LDc1LjY0MSAxMTQuMDI1LDc1Ljc5OCAxMTQuMDI1LDc1Ljk5MiBMMTE0LjAyNSwxMjkuOTkzIEMxMTQuMDI1LDEzMC42NDggMTEzLjc4NiwxMzEuMTQ3IDExMy4zNSwxMzEuMzk5IEMxMTMuMTYyLDEzMS41MDcgMTEyLjk1MiwxMzEuNTYxIDExMi43MjcsMTMxLjU2MSIgaWQ9IkZpbGwtMjkiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEyLjg2LDQwLjUxMiBDMTEyLjg2LDQwLjUxMiAxMTIuODYsNDAuNTEyIDExMi44NTksNDAuNTEyIEMxMTAuNTQxLDQwLjUxMiAxMDguMzYsMzkuOTkgMTA2LjcxNywzOS4wNDEgQzEwNS4wMTIsMzguMDU3IDEwNC4wNzQsMzYuNzI2IDEwNC4wNzQsMzUuMjkyIEMxMDQuMDc0LDMzLjg0NyAxMDUuMDI2LDMyLjUwMSAxMDYuNzU0LDMxLjUwNCBMMTE4Ljc5NSwyNC41NTEgQzEyMC40NjMsMjMuNTg5IDEyMi42NjksMjMuMDU4IDEyNS4wMDcsMjMuMDU4IEMxMjcuMzI1LDIzLjA1OCAxMjkuNTA2LDIzLjU4MSAxMzEuMTUsMjQuNTMgQzEzMi44NTQsMjUuNTE0IDEzMy43OTMsMjYuODQ1IDEzMy43OTMsMjguMjc4IEMxMzMuNzkzLDI5LjcyNCAxMzIuODQxLDMxLjA2OSAxMzEuMTEzLDMyLjA2NyBMMTE5LjA3MSwzOS4wMTkgQzExNy40MDMsMzkuOTgyIDExNS4xOTcsNDAuNTEyIDExMi44Niw0MC41MTIgTDExMi44Niw0MC41MTIgWiBNMTI1LjAwNywyMy43NTkgQzEyMi43OSwyMy43NTkgMTIwLjcwOSwyNC4yNTYgMTE5LjE0NiwyNS4xNTggTDEwNy4xMDQsMzIuMTEgQzEwNS42MDIsMzIuOTc4IDEwNC43NzQsMzQuMTA4IDEwNC43NzQsMzUuMjkyIEMxMDQuNzc0LDM2LjQ2NSAxMDUuNTg5LDM3LjU4MSAxMDcuMDY3LDM4LjQzNCBDMTA4LjYwNSwzOS4zMjMgMTEwLjY2MywzOS44MTIgMTEyLjg1OSwzOS44MTIgTDExMi44NiwzOS44MTIgQzExNS4wNzYsMzkuODEyIDExNy4xNTgsMzkuMzE1IDExOC43MjEsMzguNDEzIEwxMzAuNzYyLDMxLjQ2IEMxMzIuMjY0LDMwLjU5MyAxMzMuMDkyLDI5LjQ2MyAxMzMuMDkyLDI4LjI3OCBDMTMzLjA5MiwyNy4xMDYgMTMyLjI3OCwyNS45OSAxMzAuOCwyNS4xMzYgQzEyOS4yNjEsMjQuMjQ4IDEyNy4yMDQsMjMuNzU5IDEyNS4wMDcsMjMuNzU5IEwxMjUuMDA3LDIzLjc1OSBaIiBpZD0iRmlsbC0zMCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNjUuNjMsMTYuMjE5IEwxNTkuODk2LDE5LjUzIEMxNTYuNzI5LDIxLjM1OCAxNTEuNjEsMjEuMzY3IDE0OC40NjMsMTkuNTUgQzE0NS4zMTYsMTcuNzMzIDE0NS4zMzIsMTQuNzc4IDE0OC40OTksMTIuOTQ5IEwxNTQuMjMzLDkuNjM5IEwxNjUuNjMsMTYuMjE5IiBpZD0iRmlsbC0zMSIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNTQuMjMzLDEwLjQ0OCBMMTY0LjIyOCwxNi4yMTkgTDE1OS41NDYsMTguOTIzIEMxNTguMTEyLDE5Ljc1IDE1Ni4xOTQsMjAuMjA2IDE1NC4xNDcsMjAuMjA2IEMxNTIuMTE4LDIwLjIwNiAxNTAuMjI0LDE5Ljc1NyAxNDguODE0LDE4Ljk0MyBDMTQ3LjUyNCwxOC4xOTkgMTQ2LjgxNCwxNy4yNDkgMTQ2LjgxNCwxNi4yNjkgQzE0Ni44MTQsMTUuMjc4IDE0Ny41MzcsMTQuMzE0IDE0OC44NSwxMy41NTYgTDE1NC4yMzMsMTAuNDQ4IE0xNTQuMjMzLDkuNjM5IEwxNDguNDk5LDEyLjk0OSBDMTQ1LjMzMiwxNC43NzggMTQ1LjMxNiwxNy43MzMgMTQ4LjQ2MywxOS41NSBDMTUwLjAzMSwyMC40NTUgMTUyLjA4NiwyMC45MDcgMTU0LjE0NywyMC45MDcgQzE1Ni4yMjQsMjAuOTA3IDE1OC4zMDYsMjAuNDQ3IDE1OS44OTYsMTkuNTMgTDE2NS42MywxNi4yMTkgTDE1NC4yMzMsOS42MzkiIGlkPSJGaWxsLTMyIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0NS40NDUsNzIuNjY3IEwxNDUuNDQ1LDcyLjY2NyBDMTQzLjY3Miw3Mi42NjcgMTQyLjIwNCw3MS44MTcgMTQxLjIwMiw3MC40MjIgQzE0MS4xMzUsNzAuMzMgMTQxLjE0NSw3MC4xNDcgMTQxLjIyNSw3MC4wNjYgQzE0MS4zMDUsNjkuOTg1IDE0MS40MzIsNjkuOTQ2IDE0MS41MjUsNzAuMDExIEMxNDIuMzA2LDcwLjU1OSAxNDMuMjMxLDcwLjgyMyAxNDQuMjc2LDcwLjgyMiBDMTQ1LjU5OCw3MC44MjIgMTQ3LjAzLDcwLjM3NiAxNDguNTMyLDY5LjUwOSBDMTUzLjg0Miw2Ni40NDMgMTU4LjE2Myw1OC45ODcgMTU4LjE2Myw1Mi44OTQgQzE1OC4xNjMsNTAuOTY3IDE1Ny43MjEsNDkuMzMyIDE1Ni44ODQsNDguMTY4IEMxNTYuODE4LDQ4LjA3NiAxNTYuODI4LDQ3Ljk0OCAxNTYuOTA4LDQ3Ljg2NyBDMTU2Ljk4OCw0Ny43ODYgMTU3LjExNCw0Ny43NzQgMTU3LjIwOCw0Ny44NCBDMTU4Ljg3OCw0OS4wMTIgMTU5Ljc5OCw1MS4yMiAxNTkuNzk4LDU0LjA1OSBDMTU5Ljc5OCw2MC4zMDEgMTU1LjM3Myw2OC4wNDYgMTQ5LjkzMyw3MS4xODYgQzE0OC4zNiw3Mi4wOTQgMTQ2Ljg1LDcyLjY2NyAxNDUuNDQ1LDcyLjY2NyBMMTQ1LjQ0NSw3Mi42NjcgWiBNMTQyLjQ3Niw3MSBDMTQzLjI5LDcxLjY1MSAxNDQuMjk2LDcyLjAwMiAxNDUuNDQ1LDcyLjAwMiBDMTQ2Ljc2Nyw3Mi4wMDIgMTQ4LjE5OCw3MS41NSAxNDkuNyw3MC42ODIgQzE1NS4wMSw2Ny42MTcgMTU5LjMzMSw2MC4xNTkgMTU5LjMzMSw1NC4wNjUgQzE1OS4zMzEsNTIuMDg1IDE1OC44NjgsNTAuNDM1IDE1OC4wMDYsNDkuMjcyIEMxNTguNDE3LDUwLjMwNyAxNTguNjMsNTEuNTMyIDE1OC42Myw1Mi44OTIgQzE1OC42Myw1OS4xMzQgMTU0LjIwNSw2Ni43NjcgMTQ4Ljc2NSw2OS45MDcgQzE0Ny4xOTIsNzAuODE2IDE0NS42ODEsNzEuMjgzIDE0NC4yNzYsNzEuMjgzIEMxNDMuNjM0LDcxLjI4MyAxNDMuMDMzLDcxLjE5MiAxNDIuNDc2LDcxIEwxNDIuNDc2LDcxIFoiIGlkPSJGaWxsLTMzIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0OC42NDgsNjkuNzA0IEMxNTQuMDMyLDY2LjU5NiAxNTguMzk2LDU5LjA2OCAxNTguMzk2LDUyLjg5MSBDMTU4LjM5Niw1MC44MzkgMTU3LjkxMyw0OS4xOTggMTU3LjA3NCw0OC4wMyBDMTU1LjI4OSw0Ni43NzggMTUyLjY5OSw0Ni44MzYgMTQ5LjgxNiw0OC41MDEgQzE0NC40MzMsNTEuNjA5IDE0MC4wNjgsNTkuMTM3IDE0MC4wNjgsNjUuMzE0IEMxNDAuMDY4LDY3LjM2NSAxNDAuNTUyLDY5LjAwNiAxNDEuMzkxLDcwLjE3NCBDMTQzLjE3Niw3MS40MjcgMTQ1Ljc2NSw3MS4zNjkgMTQ4LjY0OCw2OS43MDQiIGlkPSJGaWxsLTM0IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0NC4yNzYsNzEuMjc2IEwxNDQuMjc2LDcxLjI3NiBDMTQzLjEzMyw3MS4yNzYgMTQyLjExOCw3MC45NjkgMTQxLjI1Nyw3MC4zNjUgQzE0MS4yMzYsNzAuMzUxIDE0MS4yMTcsNzAuMzMyIDE0MS4yMDIsNzAuMzExIEMxNDAuMzA3LDY5LjA2NyAxMzkuODM1LDY3LjMzOSAxMzkuODM1LDY1LjMxNCBDMTM5LjgzNSw1OS4wNzMgMTQ0LjI2LDUxLjQzOSAxNDkuNyw0OC4yOTggQzE1MS4yNzMsNDcuMzkgMTUyLjc4NCw0Ni45MjkgMTU0LjE4OSw0Ni45MjkgQzE1NS4zMzIsNDYuOTI5IDE1Ni4zNDcsNDcuMjM2IDE1Ny4yMDgsNDcuODM5IEMxNTcuMjI5LDQ3Ljg1NCAxNTcuMjQ4LDQ3Ljg3MyAxNTcuMjYzLDQ3Ljg5NCBDMTU4LjE1Nyw0OS4xMzggMTU4LjYzLDUwLjg2NSAxNTguNjMsNTIuODkxIEMxNTguNjMsNTkuMTMyIDE1NC4yMDUsNjYuNzY2IDE0OC43NjUsNjkuOTA3IEMxNDcuMTkyLDcwLjgxNSAxNDUuNjgxLDcxLjI3NiAxNDQuMjc2LDcxLjI3NiBMMTQ0LjI3Niw3MS4yNzYgWiBNMTQxLjU1OCw3MC4xMDQgQzE0Mi4zMzEsNzAuNjM3IDE0My4yNDUsNzEuMDA1IDE0NC4yNzYsNzEuMDA1IEMxNDUuNTk4LDcxLjAwNSAxNDcuMDMsNzAuNDY3IDE0OC41MzIsNjkuNiBDMTUzLjg0Miw2Ni41MzQgMTU4LjE2Myw1OS4wMzMgMTU4LjE2Myw1Mi45MzkgQzE1OC4xNjMsNTEuMDMxIDE1Ny43MjksNDkuMzg1IDE1Ni45MDcsNDguMjIzIEMxNTYuMTMzLDQ3LjY5MSAxNTUuMjE5LDQ3LjQwOSAxNTQuMTg5LDQ3LjQwOSBDMTUyLjg2Nyw0Ny40MDkgMTUxLjQzNSw0Ny44NDIgMTQ5LjkzMyw0OC43MDkgQzE0NC42MjMsNTEuNzc1IDE0MC4zMDIsNTkuMjczIDE0MC4zMDIsNjUuMzY2IEMxNDAuMzAyLDY3LjI3NiAxNDAuNzM2LDY4Ljk0MiAxNDEuNTU4LDcwLjEwNCBMMTQxLjU1OCw3MC4xMDQgWiIgaWQ9IkZpbGwtMzUiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTUwLjcyLDY1LjM2MSBMMTUwLjM1Nyw2NS4wNjYgQzE1MS4xNDcsNjQuMDkyIDE1MS44NjksNjMuMDQgMTUyLjUwNSw2MS45MzggQzE1My4zMTMsNjAuNTM5IDE1My45NzgsNTkuMDY3IDE1NC40ODIsNTcuNTYzIEwxNTQuOTI1LDU3LjcxMiBDMTU0LjQxMiw1OS4yNDUgMTUzLjczMyw2MC43NDUgMTUyLjkxLDYyLjE3MiBDMTUyLjI2Miw2My4yOTUgMTUxLjUyNSw2NC4zNjggMTUwLjcyLDY1LjM2MSIgaWQ9IkZpbGwtMzYiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTE1LjkxNyw4NC41MTQgTDExNS41NTQsODQuMjIgQzExNi4zNDQsODMuMjQ1IDExNy4wNjYsODIuMTk0IDExNy43MDIsODEuMDkyIEMxMTguNTEsNzkuNjkyIDExOS4xNzUsNzguMjIgMTE5LjY3OCw3Ni43MTcgTDEyMC4xMjEsNzYuODY1IEMxMTkuNjA4LDc4LjM5OCAxMTguOTMsNzkuODk5IDExOC4xMDYsODEuMzI2IEMxMTcuNDU4LDgyLjQ0OCAxMTYuNzIyLDgzLjUyMSAxMTUuOTE3LDg0LjUxNCIgaWQ9IkZpbGwtMzciIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTE0LDEzMC40NzYgTDExNCwxMzAuMDA4IEwxMTQsNzYuMDUyIEwxMTQsNzUuNTg0IEwxMTQsNzYuMDUyIEwxMTQsMTMwLjAwOCBMMTE0LDEzMC40NzYiIGlkPSJGaWxsLTM4IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8ZyBpZD0iSW1wb3J0ZWQtTGF5ZXJzLUNvcHkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDYyLjAwMDAwMCwgMC4wMDAwMDApIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTkuODIyLDM3LjQ3NCBDMTkuODM5LDM3LjMzOSAxOS43NDcsMzcuMTk0IDE5LjU1NSwzNy4wODIgQzE5LjIyOCwzNi44OTQgMTguNzI5LDM2Ljg3MiAxOC40NDYsMzcuMDM3IEwxMi40MzQsNDAuNTA4IEMxMi4zMDMsNDAuNTg0IDEyLjI0LDQwLjY4NiAxMi4yNDMsNDAuNzkzIEMxMi4yNDUsNDAuOTI1IDEyLjI0NSw0MS4yNTQgMTIuMjQ1LDQxLjM3MSBMMTIuMjQ1LDQxLjQxNCBMMTIuMjM4LDQxLjU0MiBDOC4xNDgsNDMuODg3IDUuNjQ3LDQ1LjMyMSA1LjY0Nyw0NS4zMjEgQzUuNjQ2LDQ1LjMyMSAzLjU3LDQ2LjM2NyAyLjg2LDUwLjUxMyBDMi44Niw1MC41MTMgMS45NDgsNTcuNDc0IDEuOTYyLDcwLjI1OCBDMS45NzcsODIuODI4IDIuNTY4LDg3LjMyOCAzLjEyOSw5MS42MDkgQzMuMzQ5LDkzLjI5MyA2LjEzLDkzLjczNCA2LjEzLDkzLjczNCBDNi40NjEsOTMuNzc0IDYuODI4LDkzLjcwNyA3LjIxLDkzLjQ4NiBMODIuNDgzLDQ5LjkzNSBDODQuMjkxLDQ4Ljg2NiA4NS4xNSw0Ni4yMTYgODUuNTM5LDQzLjY1MSBDODYuNzUyLDM1LjY2MSA4Ny4yMTQsMTAuNjczIDg1LjI2NCwzLjc3MyBDODUuMDY4LDMuMDggODQuNzU0LDIuNjkgODQuMzk2LDIuNDkxIEw4Mi4zMSwxLjcwMSBDODEuNTgzLDEuNzI5IDgwLjg5NCwyLjE2OCA4MC43NzYsMi4yMzYgQzgwLjYzNiwyLjMxNyA0MS44MDcsMjQuNTg1IDIwLjAzMiwzNy4wNzIgTDE5LjgyMiwzNy40NzQiIGlkPSJGaWxsLTEiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNODIuMzExLDEuNzAxIEw4NC4zOTYsMi40OTEgQzg0Ljc1NCwyLjY5IDg1LjA2OCwzLjA4IDg1LjI2NCwzLjc3MyBDODcuMjEzLDEwLjY3MyA4Ni43NTEsMzUuNjYgODUuNTM5LDQzLjY1MSBDODUuMTQ5LDQ2LjIxNiA4NC4yOSw0OC44NjYgODIuNDgzLDQ5LjkzNSBMNy4yMSw5My40ODYgQzYuODk3LDkzLjY2NyA2LjU5NSw5My43NDQgNi4zMTQsOTMuNzQ0IEw2LjEzMSw5My43MzMgQzYuMTMxLDkzLjczNCAzLjM0OSw5My4yOTMgMy4xMjgsOTEuNjA5IEMyLjU2OCw4Ny4zMjcgMS45NzcsODIuODI4IDEuOTYzLDcwLjI1OCBDMS45NDgsNTcuNDc0IDIuODYsNTAuNTEzIDIuODYsNTAuNTEzIEMzLjU3LDQ2LjM2NyA1LjY0Nyw0NS4zMjEgNS42NDcsNDUuMzIxIEM1LjY0Nyw0NS4zMjEgOC4xNDgsNDMuODg3IDEyLjIzOCw0MS41NDIgTDEyLjI0NSw0MS40MTQgTDEyLjI0NSw0MS4zNzEgQzEyLjI0NSw0MS4yNTQgMTIuMjQ1LDQwLjkyNSAxMi4yNDMsNDAuNzkzIEMxMi4yNCw0MC42ODYgMTIuMzAyLDQwLjU4MyAxMi40MzQsNDAuNTA4IEwxOC40NDYsMzcuMDM2IEMxOC41NzQsMzYuOTYyIDE4Ljc0NiwzNi45MjYgMTguOTI3LDM2LjkyNiBDMTkuMTQ1LDM2LjkyNiAxOS4zNzYsMzYuOTc5IDE5LjU1NCwzNy4wODIgQzE5Ljc0NywzNy4xOTQgMTkuODM5LDM3LjM0IDE5LjgyMiwzNy40NzQgTDIwLjAzMywzNy4wNzIgQzQxLjgwNiwyNC41ODUgODAuNjM2LDIuMzE4IDgwLjc3NywyLjIzNiBDODAuODk0LDIuMTY4IDgxLjU4MywxLjcyOSA4Mi4zMTEsMS43MDEgTTgyLjMxMSwwLjcwNCBMODIuMjcyLDAuNzA1IEM4MS42NTQsMC43MjggODAuOTg5LDAuOTQ5IDgwLjI5OCwxLjM2MSBMODAuMjc3LDEuMzczIEM4MC4xMjksMS40NTggNTkuNzY4LDEzLjEzNSAxOS43NTgsMzYuMDc5IEMxOS41LDM1Ljk4MSAxOS4yMTQsMzUuOTI5IDE4LjkyNywzNS45MjkgQzE4LjU2MiwzNS45MjkgMTguMjIzLDM2LjAxMyAxNy45NDcsMzYuMTczIEwxMS45MzUsMzkuNjQ0IEMxMS40OTMsMzkuODk5IDExLjIzNiw0MC4zMzQgMTEuMjQ2LDQwLjgxIEwxMS4yNDcsNDAuOTYgTDUuMTY3LDQ0LjQ0NyBDNC43OTQsNDQuNjQ2IDIuNjI1LDQ1Ljk3OCAxLjg3Nyw1MC4zNDUgTDEuODcxLDUwLjM4NCBDMS44NjIsNTAuNDU0IDAuOTUxLDU3LjU1NyAwLjk2NSw3MC4yNTkgQzAuOTc5LDgyLjg3OSAxLjU2OCw4Ny4zNzUgMi4xMzcsOTEuNzI0IEwyLjEzOSw5MS43MzkgQzIuNDQ3LDk0LjA5NCA1LjYxNCw5NC42NjIgNS45NzUsOTQuNzE5IEw2LjAwOSw5NC43MjMgQzYuMTEsOTQuNzM2IDYuMjEzLDk0Ljc0MiA2LjMxNCw5NC43NDIgQzYuNzksOTQuNzQyIDcuMjYsOTQuNjEgNy43MSw5NC4zNSBMODIuOTgzLDUwLjc5OCBDODQuNzk0LDQ5LjcyNyA4NS45ODIsNDcuMzc1IDg2LjUyNSw0My44MDEgQzg3LjcxMSwzNS45ODcgODguMjU5LDEwLjcwNSA4Ni4yMjQsMy41MDIgQzg1Ljk3MSwyLjYwOSA4NS41MiwxLjk3NSA4NC44ODEsMS42MiBMODQuNzQ5LDEuNTU4IEw4Mi42NjQsMC43NjkgQzgyLjU1MSwwLjcyNSA4Mi40MzEsMC43MDQgODIuMzExLDAuNzA0IiBpZD0iRmlsbC0yIiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTY2LjI2NywxMS41NjUgTDY3Ljc2MiwxMS45OTkgTDExLjQyMyw0NC4zMjUiIGlkPSJGaWxsLTMiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTIuMjAyLDkwLjU0NSBDMTIuMDI5LDkwLjU0NSAxMS44NjIsOTAuNDU1IDExLjc2OSw5MC4yOTUgQzExLjYzMiw5MC4wNTcgMTEuNzEzLDg5Ljc1MiAxMS45NTIsODkuNjE0IEwzMC4zODksNzguOTY5IEMzMC42MjgsNzguODMxIDMwLjkzMyw3OC45MTMgMzEuMDcxLDc5LjE1MiBDMzEuMjA4LDc5LjM5IDMxLjEyNyw3OS42OTYgMzAuODg4LDc5LjgzMyBMMTIuNDUxLDkwLjQ3OCBMMTIuMjAyLDkwLjU0NSIgaWQ9IkZpbGwtNCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMy43NjQsNDIuNjU0IEwxMy42NTYsNDIuNTkyIEwxMy43MDIsNDIuNDIxIEwxOC44MzcsMzkuNDU3IEwxOS4wMDcsMzkuNTAyIEwxOC45NjIsMzkuNjczIEwxMy44MjcsNDIuNjM3IEwxMy43NjQsNDIuNjU0IiBpZD0iRmlsbC01IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTguNTIsOTAuMzc1IEw4LjUyLDQ2LjQyMSBMOC41ODMsNDYuMzg1IEw3NS44NCw3LjU1NCBMNzUuODQsNTEuNTA4IEw3NS43NzgsNTEuNTQ0IEw4LjUyLDkwLjM3NSBMOC41Miw5MC4zNzUgWiBNOC43Nyw0Ni41NjQgTDguNzcsODkuOTQ0IEw3NS41OTEsNTEuMzY1IEw3NS41OTEsNy45ODUgTDguNzcsNDYuNTY0IEw4Ljc3LDQ2LjU2NCBaIiBpZD0iRmlsbC02IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTI0Ljk4Niw4My4xODIgQzI0Ljc1Niw4My4zMzEgMjQuMzc0LDgzLjU2NiAyNC4xMzcsODMuNzA1IEwxMi42MzIsOTAuNDA2IEMxMi4zOTUsOTAuNTQ1IDEyLjQyNiw5MC42NTggMTIuNyw5MC42NTggTDEzLjI2NSw5MC42NTggQzEzLjU0LDkwLjY1OCAxMy45NTgsOTAuNTQ1IDE0LjE5NSw5MC40MDYgTDI1LjcsODMuNzA1IEMyNS45MzcsODMuNTY2IDI2LjEyOCw4My40NTIgMjYuMTI1LDgzLjQ0OSBDMjYuMTIyLDgzLjQ0NyAyNi4xMTksODMuMjIgMjYuMTE5LDgyLjk0NiBDMjYuMTE5LDgyLjY3MiAyNS45MzEsODIuNTY5IDI1LjcwMSw4Mi43MTkgTDI0Ljk4Niw4My4xODIiIGlkPSJGaWxsLTciIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTMuMjY2LDkwLjc4MiBMMTIuNyw5MC43ODIgQzEyLjUsOTAuNzgyIDEyLjM4NCw5MC43MjYgMTIuMzU0LDkwLjYxNiBDMTIuMzI0LDkwLjUwNiAxMi4zOTcsOTAuMzk5IDEyLjU2OSw5MC4yOTkgTDI0LjA3NCw4My41OTcgQzI0LjMxLDgzLjQ1OSAyNC42ODksODMuMjI2IDI0LjkxOCw4My4wNzggTDI1LjYzMyw4Mi42MTQgQzI1LjcyMyw4Mi41NTUgMjUuODEzLDgyLjUyNSAyNS44OTksODIuNTI1IEMyNi4wNzEsODIuNTI1IDI2LjI0NCw4Mi42NTUgMjYuMjQ0LDgyLjk0NiBDMjYuMjQ0LDgzLjE2IDI2LjI0NSw4My4zMDkgMjYuMjQ3LDgzLjM4MyBMMjYuMjUzLDgzLjM4NyBMMjYuMjQ5LDgzLjQ1NiBDMjYuMjQ2LDgzLjUzMSAyNi4yNDYsODMuNTMxIDI1Ljc2Myw4My44MTIgTDE0LjI1OCw5MC41MTQgQzE0LDkwLjY2NSAxMy41NjQsOTAuNzgyIDEzLjI2Niw5MC43ODIgTDEzLjI2Niw5MC43ODIgWiBNMTIuNjY2LDkwLjUzMiBMMTIuNyw5MC41MzMgTDEzLjI2Niw5MC41MzMgQzEzLjUxOCw5MC41MzMgMTMuOTE1LDkwLjQyNSAxNC4xMzIsOTAuMjk5IEwyNS42MzcsODMuNTk3IEMyNS44MDUsODMuNDk5IDI1LjkzMSw4My40MjQgMjUuOTk4LDgzLjM4MyBDMjUuOTk0LDgzLjI5OSAyNS45OTQsODMuMTY1IDI1Ljk5NCw4Mi45NDYgTDI1Ljg5OSw4Mi43NzUgTDI1Ljc2OCw4Mi44MjQgTDI1LjA1NCw4My4yODcgQzI0LjgyMiw4My40MzcgMjQuNDM4LDgzLjY3MyAyNC4yLDgzLjgxMiBMMTIuNjk1LDkwLjUxNCBMMTIuNjY2LDkwLjUzMiBMMTIuNjY2LDkwLjUzMiBaIiBpZD0iRmlsbC04IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEzLjI2Niw4OS44NzEgTDEyLjcsODkuODcxIEMxMi41LDg5Ljg3MSAxMi4zODQsODkuODE1IDEyLjM1NCw4OS43MDUgQzEyLjMyNCw4OS41OTUgMTIuMzk3LDg5LjQ4OCAxMi41NjksODkuMzg4IEwyNC4wNzQsODIuNjg2IEMyNC4zMzIsODIuNTM1IDI0Ljc2OCw4Mi40MTggMjUuMDY3LDgyLjQxOCBMMjUuNjMyLDgyLjQxOCBDMjUuODMyLDgyLjQxOCAyNS45NDgsODIuNDc0IDI1Ljk3OCw4Mi41ODQgQzI2LjAwOCw4Mi42OTQgMjUuOTM1LDgyLjgwMSAyNS43NjMsODIuOTAxIEwxNC4yNTgsODkuNjAzIEMxNCw4OS43NTQgMTMuNTY0LDg5Ljg3MSAxMy4yNjYsODkuODcxIEwxMy4yNjYsODkuODcxIFogTTEyLjY2Niw4OS42MjEgTDEyLjcsODkuNjIyIEwxMy4yNjYsODkuNjIyIEMxMy41MTgsODkuNjIyIDEzLjkxNSw4OS41MTUgMTQuMTMyLDg5LjM4OCBMMjUuNjM3LDgyLjY4NiBMMjUuNjY3LDgyLjY2OCBMMjUuNjMyLDgyLjY2NyBMMjUuMDY3LDgyLjY2NyBDMjQuODE1LDgyLjY2NyAyNC40MTgsODIuNzc1IDI0LjIsODIuOTAxIEwxMi42OTUsODkuNjAzIEwxMi42NjYsODkuNjIxIEwxMi42NjYsODkuNjIxIFoiIGlkPSJGaWxsLTkiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTIuMzcsOTAuODAxIEwxMi4zNyw4OS41NTQgTDEyLjM3LDkwLjgwMSIgaWQ9IkZpbGwtMTAiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNi4xMyw5My45MDEgQzUuMzc5LDkzLjgwOCA0LjgxNiw5My4xNjQgNC42OTEsOTIuNTI1IEMzLjg2LDg4LjI4NyAzLjU0LDgzLjc0MyAzLjUyNiw3MS4xNzMgQzMuNTExLDU4LjM4OSA0LjQyMyw1MS40MjggNC40MjMsNTEuNDI4IEM1LjEzNCw0Ny4yODIgNy4yMSw0Ni4yMzYgNy4yMSw0Ni4yMzYgQzcuMjEsNDYuMjM2IDgxLjY2NywzLjI1IDgyLjA2OSwzLjAxNyBDODIuMjkyLDIuODg4IDg0LjU1NiwxLjQzMyA4NS4yNjQsMy45NCBDODcuMjE0LDEwLjg0IDg2Ljc1MiwzNS44MjcgODUuNTM5LDQzLjgxOCBDODUuMTUsNDYuMzgzIDg0LjI5MSw0OS4wMzMgODIuNDgzLDUwLjEwMSBMNy4yMSw5My42NTMgQzYuODI4LDkzLjg3NCA2LjQ2MSw5My45NDEgNi4xMyw5My45MDEgQzYuMTMsOTMuOTAxIDMuMzQ5LDkzLjQ2IDMuMTI5LDkxLjc3NiBDMi41NjgsODcuNDk1IDEuOTc3LDgyLjk5NSAxLjk2Miw3MC40MjUgQzEuOTQ4LDU3LjY0MSAyLjg2LDUwLjY4IDIuODYsNTAuNjggQzMuNTcsNDYuNTM0IDUuNjQ3LDQ1LjQ4OSA1LjY0Nyw0NS40ODkgQzUuNjQ2LDQ1LjQ4OSA4LjA2NSw0NC4wOTIgMTIuMjQ1LDQxLjY3OSBMMTMuMTE2LDQxLjU2IEwxOS43MTUsMzcuNzMgTDE5Ljc2MSwzNy4yNjkgTDYuMTMsOTMuOTAxIiBpZD0iRmlsbC0xMSIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02LjMxNyw5NC4xNjEgTDYuMTAyLDk0LjE0OCBMNi4xMDEsOTQuMTQ4IEw1Ljg1Nyw5NC4xMDEgQzUuMTM4LDkzLjk0NSAzLjA4NSw5My4zNjUgMi44ODEsOTEuODA5IEMyLjMxMyw4Ny40NjkgMS43MjcsODIuOTk2IDEuNzEzLDcwLjQyNSBDMS42OTksNTcuNzcxIDIuNjA0LDUwLjcxOCAyLjYxMyw1MC42NDggQzMuMzM4LDQ2LjQxNyA1LjQ0NSw0NS4zMSA1LjUzNSw0NS4yNjYgTDEyLjE2Myw0MS40MzkgTDEzLjAzMyw0MS4zMiBMMTkuNDc5LDM3LjU3OCBMMTkuNTEzLDM3LjI0NCBDMTkuNTI2LDM3LjEwNyAxOS42NDcsMzcuMDA4IDE5Ljc4NiwzNy4wMjEgQzE5LjkyMiwzNy4wMzQgMjAuMDIzLDM3LjE1NiAyMC4wMDksMzcuMjkzIEwxOS45NSwzNy44ODIgTDEzLjE5OCw0MS44MDEgTDEyLjMyOCw0MS45MTkgTDUuNzcyLDQ1LjcwNCBDNS43NDEsNDUuNzIgMy43ODIsNDYuNzcyIDMuMTA2LDUwLjcyMiBDMy4wOTksNTAuNzgyIDIuMTk4LDU3LjgwOCAyLjIxMiw3MC40MjQgQzIuMjI2LDgyLjk2MyAyLjgwOSw4Ny40MiAzLjM3Myw5MS43MjkgQzMuNDY0LDkyLjQyIDQuMDYyLDkyLjg4MyA0LjY4Miw5My4xODEgQzQuNTY2LDkyLjk4NCA0LjQ4Niw5Mi43NzYgNC40NDYsOTIuNTcyIEMzLjY2NSw4OC41ODggMy4yOTEsODQuMzcgMy4yNzYsNzEuMTczIEMzLjI2Miw1OC41MiA0LjE2Nyw1MS40NjYgNC4xNzYsNTEuMzk2IEM0LjkwMSw0Ny4xNjUgNy4wMDgsNDYuMDU5IDcuMDk4LDQ2LjAxNCBDNy4wOTQsNDYuMDE1IDgxLjU0MiwzLjAzNCA4MS45NDQsMi44MDIgTDgxLjk3MiwyLjc4NSBDODIuODc2LDIuMjQ3IDgzLjY5MiwyLjA5NyA4NC4zMzIsMi4zNTIgQzg0Ljg4NywyLjU3MyA4NS4yODEsMy4wODUgODUuNTA0LDMuODcyIEM4Ny41MTgsMTEgODYuOTY0LDM2LjA5MSA4NS43ODUsNDMuODU1IEM4NS4yNzgsNDcuMTk2IDg0LjIxLDQ5LjM3IDgyLjYxLDUwLjMxNyBMNy4zMzUsOTMuODY5IEM2Ljk5OSw5NC4wNjMgNi42NTgsOTQuMTYxIDYuMzE3LDk0LjE2MSBMNi4zMTcsOTQuMTYxIFogTTYuMTcsOTMuNjU0IEM2LjQ2Myw5My42OSA2Ljc3NCw5My42MTcgNy4wODUsOTMuNDM3IEw4Mi4zNTgsNDkuODg2IEM4NC4xODEsNDguODA4IDg0Ljk2LDQ1Ljk3MSA4NS4yOTIsNDMuNzggQzg2LjQ2NiwzNi4wNDkgODcuMDIzLDExLjA4NSA4NS4wMjQsNC4wMDggQzg0Ljg0NiwzLjM3NyA4NC41NTEsMi45NzYgODQuMTQ4LDIuODE2IEM4My42NjQsMi42MjMgODIuOTgyLDIuNzY0IDgyLjIyNywzLjIxMyBMODIuMTkzLDMuMjM0IEM4MS43OTEsMy40NjYgNy4zMzUsNDYuNDUyIDcuMzM1LDQ2LjQ1MiBDNy4zMDQsNDYuNDY5IDUuMzQ2LDQ3LjUyMSA0LjY2OSw1MS40NzEgQzQuNjYyLDUxLjUzIDMuNzYxLDU4LjU1NiAzLjc3NSw3MS4xNzMgQzMuNzksODQuMzI4IDQuMTYxLDg4LjUyNCA0LjkzNiw5Mi40NzYgQzUuMDI2LDkyLjkzNyA1LjQxMiw5My40NTkgNS45NzMsOTMuNjE1IEM2LjA4Nyw5My42NCA2LjE1OCw5My42NTIgNi4xNjksOTMuNjU0IEw2LjE3LDkzLjY1NCBMNi4xNyw5My42NTQgWiIgaWQ9IkZpbGwtMTIiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNy4zMTcsNjguOTgyIEM3LjgwNiw2OC43MDEgOC4yMDIsNjguOTI2IDguMjAyLDY5LjQ4NyBDOC4yMDIsNzAuMDQ3IDcuODA2LDcwLjczIDcuMzE3LDcxLjAxMiBDNi44MjksNzEuMjk0IDYuNDMzLDcxLjA2OSA2LjQzMyw3MC41MDggQzYuNDMzLDY5Ljk0OCA2LjgyOSw2OS4yNjUgNy4zMTcsNjguOTgyIiBpZD0iRmlsbC0xMyIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02LjkyLDcxLjEzMyBDNi42MzEsNzEuMTMzIDYuNDMzLDcwLjkwNSA2LjQzMyw3MC41MDggQzYuNDMzLDY5Ljk0OCA2LjgyOSw2OS4yNjUgNy4zMTcsNjguOTgyIEM3LjQ2LDY4LjkgNy41OTUsNjguODYxIDcuNzE0LDY4Ljg2MSBDOC4wMDMsNjguODYxIDguMjAyLDY5LjA5IDguMjAyLDY5LjQ4NyBDOC4yMDIsNzAuMDQ3IDcuODA2LDcwLjczIDcuMzE3LDcxLjAxMiBDNy4xNzQsNzEuMDk0IDcuMDM5LDcxLjEzMyA2LjkyLDcxLjEzMyBNNy43MTQsNjguNjc0IEM3LjU1Nyw2OC42NzQgNy4zOTIsNjguNzIzIDcuMjI0LDY4LjgyMSBDNi42NzYsNjkuMTM4IDYuMjQ2LDY5Ljg3OSA2LjI0Niw3MC41MDggQzYuMjQ2LDcwLjk5NCA2LjUxNyw3MS4zMiA2LjkyLDcxLjMyIEM3LjA3OCw3MS4zMiA3LjI0Myw3MS4yNzEgNy40MTEsNzEuMTc0IEM3Ljk1OSw3MC44NTcgOC4zODksNzAuMTE3IDguMzg5LDY5LjQ4NyBDOC4zODksNjkuMDAxIDguMTE3LDY4LjY3NCA3LjcxNCw2OC42NzQiIGlkPSJGaWxsLTE0IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTYuOTIsNzAuOTQ3IEM2LjY0OSw3MC45NDcgNi42MjEsNzAuNjQgNi42MjEsNzAuNTA4IEM2LjYyMSw3MC4wMTcgNi45ODIsNjkuMzkyIDcuNDExLDY5LjE0NSBDNy41MjEsNjkuMDgyIDcuNjI1LDY5LjA0OSA3LjcxNCw2OS4wNDkgQzcuOTg2LDY5LjA0OSA4LjAxNSw2OS4zNTUgOC4wMTUsNjkuNDg3IEM4LjAxNSw2OS45NzggNy42NTIsNzAuNjAzIDcuMjI0LDcwLjg1MSBDNy4xMTUsNzAuOTE0IDcuMDEsNzAuOTQ3IDYuOTIsNzAuOTQ3IE03LjcxNCw2OC44NjEgQzcuNTk1LDY4Ljg2MSA3LjQ2LDY4LjkgNy4zMTcsNjguOTgyIEM2LjgyOSw2OS4yNjUgNi40MzMsNjkuOTQ4IDYuNDMzLDcwLjUwOCBDNi40MzMsNzAuOTA1IDYuNjMxLDcxLjEzMyA2LjkyLDcxLjEzMyBDNy4wMzksNzEuMTMzIDcuMTc0LDcxLjA5NCA3LjMxNyw3MS4wMTIgQzcuODA2LDcwLjczIDguMjAyLDcwLjA0NyA4LjIwMiw2OS40ODcgQzguMjAyLDY5LjA5IDguMDAzLDY4Ljg2MSA3LjcxNCw2OC44NjEiIGlkPSJGaWxsLTE1IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTcuNDQ0LDg1LjM1IEM3LjcwOCw4NS4xOTggNy45MjEsODUuMzE5IDcuOTIxLDg1LjYyMiBDNy45MjEsODUuOTI1IDcuNzA4LDg2LjI5MiA3LjQ0NCw4Ni40NDQgQzcuMTgxLDg2LjU5NyA2Ljk2Nyw4Ni40NzUgNi45NjcsODYuMTczIEM2Ljk2Nyw4NS44NzEgNy4xODEsODUuNTAyIDcuNDQ0LDg1LjM1IiBpZD0iRmlsbC0xNiIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik03LjIzLDg2LjUxIEM3LjA3NCw4Ni41MSA2Ljk2Nyw4Ni4zODcgNi45NjcsODYuMTczIEM2Ljk2Nyw4NS44NzEgNy4xODEsODUuNTAyIDcuNDQ0LDg1LjM1IEM3LjUyMSw4NS4zMDUgNy41OTQsODUuMjg0IDcuNjU4LDg1LjI4NCBDNy44MTQsODUuMjg0IDcuOTIxLDg1LjQwOCA3LjkyMSw4NS42MjIgQzcuOTIxLDg1LjkyNSA3LjcwOCw4Ni4yOTIgNy40NDQsODYuNDQ0IEM3LjM2Nyw4Ni40ODkgNy4yOTQsODYuNTEgNy4yMyw4Ni41MSBNNy42NTgsODUuMDk4IEM3LjU1OCw4NS4wOTggNy40NTUsODUuMTI3IDcuMzUxLDg1LjE4OCBDNy4wMzEsODUuMzczIDYuNzgxLDg1LjgwNiA2Ljc4MSw4Ni4xNzMgQzYuNzgxLDg2LjQ4MiA2Ljk2Niw4Ni42OTcgNy4yMyw4Ni42OTcgQzcuMzMsODYuNjk3IDcuNDMzLDg2LjY2NiA3LjUzOCw4Ni42MDcgQzcuODU4LDg2LjQyMiA4LjEwOCw4NS45ODkgOC4xMDgsODUuNjIyIEM4LjEwOCw4NS4zMTMgNy45MjMsODUuMDk4IDcuNjU4LDg1LjA5OCIgaWQ9IkZpbGwtMTciIGZpbGw9IiM4MDk3QTIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNy4yMyw4Ni4zMjIgTDcuMTU0LDg2LjE3MyBDNy4xNTQsODUuOTM4IDcuMzMzLDg1LjYyOSA3LjUzOCw4NS41MTIgTDcuNjU4LDg1LjQ3MSBMNy43MzQsODUuNjIyIEM3LjczNCw4NS44NTYgNy41NTUsODYuMTY0IDcuMzUxLDg2LjI4MiBMNy4yMyw4Ni4zMjIgTTcuNjU4LDg1LjI4NCBDNy41OTQsODUuMjg0IDcuNTIxLDg1LjMwNSA3LjQ0NCw4NS4zNSBDNy4xODEsODUuNTAyIDYuOTY3LDg1Ljg3MSA2Ljk2Nyw4Ni4xNzMgQzYuOTY3LDg2LjM4NyA3LjA3NCw4Ni41MSA3LjIzLDg2LjUxIEM3LjI5NCw4Ni41MSA3LjM2Nyw4Ni40ODkgNy40NDQsODYuNDQ0IEM3LjcwOCw4Ni4yOTIgNy45MjEsODUuOTI1IDcuOTIxLDg1LjYyMiBDNy45MjEsODUuNDA4IDcuODE0LDg1LjI4NCA3LjY1OCw4NS4yODQiIGlkPSJGaWxsLTE4IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTc3LjI3OCw3Ljc2OSBMNzcuMjc4LDUxLjQzNiBMMTAuMjA4LDkwLjE2IEwxMC4yMDgsNDYuNDkzIEw3Ny4yNzgsNy43NjkiIGlkPSJGaWxsLTE5IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEwLjA4Myw5MC4zNzUgTDEwLjA4Myw0Ni40MjEgTDEwLjE0Niw0Ni4zODUgTDc3LjQwMyw3LjU1NCBMNzcuNDAzLDUxLjUwOCBMNzcuMzQxLDUxLjU0NCBMMTAuMDgzLDkwLjM3NSBMMTAuMDgzLDkwLjM3NSBaIE0xMC4zMzMsNDYuNTY0IEwxMC4zMzMsODkuOTQ0IEw3Ny4xNTQsNTEuMzY1IEw3Ny4xNTQsNy45ODUgTDEwLjMzMyw0Ni41NjQgTDEwLjMzMyw0Ni41NjQgWiIgaWQ9IkZpbGwtMjAiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMjUuNzM3LDg4LjY0NyBMMTE4LjA5OCw5MS45ODEgTDExOC4wOTgsODQgTDEwNi42MzksODguNzEzIEwxMDYuNjM5LDk2Ljk4MiBMOTksMTAwLjMxNSBMMTEyLjM2OSwxMDMuOTYxIEwxMjUuNzM3LDg4LjY0NyIgaWQ9IkltcG9ydGVkLUxheWVycy1Db3B5LTIiIGZpbGw9IiM0NTVBNjQiIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"};var yt="CardboardV1",bt="WEBVR_CARDBOARD_VIEWER";function Mt(){try{this.selectedKey=localStorage.getItem(bt)}catch(t){console.error("Failed to load viewer profile: %s",t)}this.selectedKey||(this.selectedKey=yt),this.dialog=this.Sm(ot.Viewers),this.root=null,this.Nm=[]}Mt.prototype.show=function(t){this.root=t,t.appendChild(this.dialog),this.dialog.querySelector("#"+this.selectedKey).checked=!0,this.dialog.style.display="block"},Mt.prototype.hide=function(){this.root&&this.root.contains(this.dialog)&&this.root.removeChild(this.dialog),this.dialog.style.display="none"},Mt.prototype.getCurrentViewer=function(){return ot.Viewers[this.selectedKey]},Mt.prototype.Im=function(){var t=this.dialog.querySelector("input[name=field]:checked");return t?t.id:null},Mt.prototype.onChange=function(t){this.Nm.push(t)},Mt.prototype.Dm=function(t){for(var i=0;i<this.Nm.length;i++)this.Nm[i](t)},Mt.prototype.Em=function(){if(this.selectedKey=this.Im(),this.selectedKey&&ot.Viewers[this.selectedKey]){this.Dm(ot.Viewers[this.selectedKey]);try{localStorage.setItem(bt,this.selectedKey)}catch(t){console.error("Failed to save viewer profile: %s",t)}this.hide()}else console.error("ViewerSelector.onSave_: this should never happen!")},Mt.prototype.Sm=function(t){var i=h.createElement("div");i.classList.add("webvr-polyfill-viewer-selector"),i.style.display="none";var e=h.createElement("div");(n=e.style).position="fixed",n.left=0,n.top=0,n.width="100%",n.height="100%",n.background="rgba(0, 0, 0, 0.3)",e.addEventListener("click",this.hide.bind(this));var s=h.createElement("div"),n=s.style;for(var r in n.boxSizing="border-box",n.position="fixed",n.top="24px",n.left="50%",n.marginLeft="-140px",n.width="280px",n.padding="24px",n.overflow="hidden",n.background="#fafafa",n.fontFamily="'Roboto', sans-serif",n.boxShadow="0px 5px 20px #666",s.appendChild(this.xm("Select your viewer")),t)s.appendChild(this.Lm(r,t[r].label));return s.appendChild(this.Cm("Save",this.Em.bind(this))),i.appendChild(e),i.appendChild(s),i},Mt.prototype.xm=function(t){var i=h.createElement("h1"),e=i.style;return e.color="black",e.fontSize="20px",e.fontWeight="bold",e.marginTop=0,e.marginBottom="24px",i.innerHTML=t,i},Mt.prototype.Lm=function(t,i){var e=h.createElement("div");e.style.marginTop="8px",e.style.color="black";var s=h.createElement("input");s.style.fontSize="30px",s.setAttribute("id",t),s.setAttribute("type","radio"),s.setAttribute("value",t),s.setAttribute("name","field");var n=h.createElement("label");return n.style.marginLeft="4px",n.setAttribute("for",t),n.innerHTML=i,e.appendChild(s),e.appendChild(n),e},Mt.prototype.Cm=function(t,i){var e=h.createElement("button");e.innerHTML=t;var s=e.style;return s.float="right",s.textTransform="uppercase",s.color="#1094f7",s.fontSize="14px",s.letterSpacing=0,s.border=0,s.background="none",s.marginTop="16px",e.addEventListener("click",i),e},void 0!==s||("undefined"!=typeof global?global:"undefined"!=typeof self&&self);var Tt=function(t,i){return t(i={exports:{}},i.exports),i.exports}((function(t,i){var e;e=function(){return function(t){var i={};function e(s){if(i[s])return i[s].exports;var n=i[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,e),n.l=!0,n.exports}return e.m=t,e.c=i,e.d=function(t,i,s){e.o(t,i)||_.defineProperty(t,i,{configurable:!1,enumerable:!0,get:s})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return _.prototype.hasOwnProperty.call(t,i)},e.p="",e(e.s=0)}([function(t,i,e){var n=function(){function t(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),_.defineProperty(t,s.key,s)}}return function(i,e,s){return e&&t(i.prototype,e),s&&t(i,s),i}}(),r=e(1),o=void 0!==Kl&&S((""+(/CPU.*OS ([0-9_]{3,4})[0-9_]{0,1}|(CPU like).*AppleWebKit.*Mobile/i.exec(Kl.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))<10&&!s.MSStream,a=function(){function t(){!function(t,i){if(!(t instanceof i))throw new k("Cannot call a class as a function")}(this,t),o?this.noSleepTimer=null:(this.noSleepVideo=h.createElement("video"),this.noSleepVideo.setAttribute("playsinline",""),this.noSleepVideo.setAttribute("src",r),this.noSleepVideo.addEventListener("timeupdate",function(t){this.noSleepVideo.currentTime>.5&&(this.noSleepVideo.currentTime=x.random())}.bind(this)))}return n(t,[{key:"enable",value:function(){o?(this.disable(),this.noSleepTimer=s.setInterval((function(){s.location.href="/",s.setTimeout(s.stop,0)}),15e3)):this.noSleepVideo.play()}},{key:"disable",value:function(){o?this.noSleepTimer&&(s.clearInterval(this.noSleepTimer),this.noSleepTimer=null):this.noSleepVideo.pause()}}]),t}();t.exports=a},function(t,i,e){t.exports="data:video/mp4;base64,AAAAIGZ0eXBtcDQyAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAACKBtZGF0AAAC8wYF///v3EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDE0MiByMjQ3OSBkZDc5YTYxIC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxNCAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTEgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MToweDExMSBtZT1oZXggc3VibWU9MiBwc3k9MSBwc3lfcmQ9MS4wMDowLjAwIG1peGVkX3JlZj0wIG1lX3JhbmdlPTE2IGNocm9tYV9tZT0xIHRyZWxsaXM9MCA4eDhkY3Q9MCBjcW09MCBkZWFkem9uZT0yMSwxMSBmYXN0X3Bza2lwPTEgY2hyb21hX3FwX29mZnNldD0wIHRocmVhZHM9NiBsb29rYWhlYWRfdGhyZWFkcz0xIHNsaWNlZF90aHJlYWRzPTAgbnI9MCBkZWNpbWF0ZT0xIGludGVybGFjZWQ9MCBibHVyYXlfY29tcGF0PTAgY29uc3RyYWluZWRfaW50cmE9MCBiZnJhbWVzPTMgYl9weXJhbWlkPTIgYl9hZGFwdD0xIGJfYmlhcz0wIGRpcmVjdD0xIHdlaWdodGI9MSBvcGVuX2dvcD0wIHdlaWdodHA9MSBrZXlpbnQ9MzAwIGtleWludF9taW49MzAgc2NlbmVjdXQ9NDAgaW50cmFfcmVmcmVzaD0wIHJjX2xvb2thaGVhZD0xMCByYz1jcmYgbWJ0cmVlPTEgY3JmPTIwLjAgcWNvbXA9MC42MCBxcG1pbj0wIHFwbWF4PTY5IHFwc3RlcD00IHZidl9tYXhyYXRlPTIwMDAwIHZidl9idWZzaXplPTI1MDAwIGNyZl9tYXg9MC4wIG5hbF9ocmQ9bm9uZSBmaWxsZXI9MCBpcF9yYXRpbz0xLjQwIGFxPTE6MS4wMACAAAAAOWWIhAA3//p+C7v8tDDSTjf97w55i3SbRPO4ZY+hkjD5hbkAkL3zpJ6h/LR1CAABzgB1kqqzUorlhQAAAAxBmiQYhn/+qZYADLgAAAAJQZ5CQhX/AAj5IQADQGgcIQADQGgcAAAACQGeYUQn/wALKCEAA0BoHAAAAAkBnmNEJ/8ACykhAANAaBwhAANAaBwAAAANQZpoNExDP/6plgAMuSEAA0BoHAAAAAtBnoZFESwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBnqVEJ/8ACykhAANAaBwAAAAJAZ6nRCf/AAsoIQADQGgcIQADQGgcAAAADUGarDRMQz/+qZYADLghAANAaBwAAAALQZ7KRRUsK/8ACPkhAANAaBwAAAAJAZ7pRCf/AAsoIQADQGgcIQADQGgcAAAACQGe60Qn/wALKCEAA0BoHAAAAA1BmvA0TEM//qmWAAy5IQADQGgcIQADQGgcAAAAC0GfDkUVLCv/AAj5IQADQGgcAAAACQGfLUQn/wALKSEAA0BoHCEAA0BoHAAAAAkBny9EJ/8ACyghAANAaBwAAAANQZs0NExDP/6plgAMuCEAA0BoHAAAAAtBn1JFFSwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBn3FEJ/8ACyghAANAaBwAAAAJAZ9zRCf/AAsoIQADQGgcIQADQGgcAAAADUGbeDRMQz/+qZYADLkhAANAaBwAAAALQZ+WRRUsK/8ACPghAANAaBwhAANAaBwAAAAJAZ+1RCf/AAspIQADQGgcAAAACQGft0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bm7w0TEM//qmWAAy4IQADQGgcAAAAC0Gf2kUVLCv/AAj5IQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHAAAAAkBn/tEJ/8ACykhAANAaBwAAAANQZvgNExDP/6plgAMuSEAA0BoHCEAA0BoHAAAAAtBnh5FFSwr/wAI+CEAA0BoHAAAAAkBnj1EJ/8ACyghAANAaBwhAANAaBwAAAAJAZ4/RCf/AAspIQADQGgcAAAADUGaJDRMQz/+qZYADLghAANAaBwAAAALQZ5CRRUsK/8ACPkhAANAaBwhAANAaBwAAAAJAZ5hRCf/AAsoIQADQGgcAAAACQGeY0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bmmg0TEM//qmWAAy5IQADQGgcAAAAC0GehkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGepUQn/wALKSEAA0BoHAAAAAkBnqdEJ/8ACyghAANAaBwAAAANQZqsNExDP/6plgAMuCEAA0BoHCEAA0BoHAAAAAtBnspFFSwr/wAI+SEAA0BoHAAAAAkBnulEJ/8ACyghAANAaBwhAANAaBwAAAAJAZ7rRCf/AAsoIQADQGgcAAAADUGa8DRMQz/+qZYADLkhAANAaBwhAANAaBwAAAALQZ8ORRUsK/8ACPkhAANAaBwAAAAJAZ8tRCf/AAspIQADQGgcIQADQGgcAAAACQGfL0Qn/wALKCEAA0BoHAAAAA1BmzQ0TEM//qmWAAy4IQADQGgcAAAAC0GfUkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGfcUQn/wALKCEAA0BoHAAAAAkBn3NEJ/8ACyghAANAaBwhAANAaBwAAAANQZt4NExC//6plgAMuSEAA0BoHAAAAAtBn5ZFFSwr/wAI+CEAA0BoHCEAA0BoHAAAAAkBn7VEJ/8ACykhAANAaBwAAAAJAZ+3RCf/AAspIQADQGgcAAAADUGbuzRMQn/+nhAAYsAhAANAaBwhAANAaBwAAAAJQZ/aQhP/AAspIQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHAAACiFtb292AAAAbG12aGQAAAAA1YCCX9WAgl8AAAPoAAAH/AABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAGGlvZHMAAAAAEICAgAcAT////v7/AAAF+XRyYWsAAABcdGtoZAAAAAPVgIJf1YCCXwAAAAEAAAAAAAAH0AAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAygAAAMoAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAB9AAABdwAAEAAAAABXFtZGlhAAAAIG1kaGQAAAAA1YCCX9WAgl8AAV+QAAK/IFXEAAAAAAAtaGRscgAAAAAAAAAAdmlkZQAAAAAAAAAAAAAAAFZpZGVvSGFuZGxlcgAAAAUcbWluZgAAABR2bWhkAAAAAQAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAAE3HN0YmwAAACYc3RzZAAAAAAAAAABAAAAiGF2YzEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAygDKAEgAAABIAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAY//8AAAAyYXZjQwFNQCj/4QAbZ01AKOyho3ySTUBAQFAAAAMAEAAr8gDxgxlgAQAEaO+G8gAAABhzdHRzAAAAAAAAAAEAAAA8AAALuAAAABRzdHNzAAAAAAAAAAEAAAABAAAB8GN0dHMAAAAAAAAAPAAAAAEAABdwAAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAAC7gAAAAAQAAF3AAAAABAAAAAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAEEc3RzegAAAAAAAAAAAAAAPAAAAzQAAAAQAAAADQAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAANAAAADQAAAQBzdGNvAAAAAAAAADwAAAAwAAADZAAAA3QAAAONAAADoAAAA7kAAAPQAAAD6wAAA/4AAAQXAAAELgAABEMAAARcAAAEbwAABIwAAAShAAAEugAABM0AAATkAAAE/wAABRIAAAUrAAAFQgAABV0AAAVwAAAFiQAABaAAAAW1AAAFzgAABeEAAAX+AAAGEwAABiwAAAY/AAAGVgAABnEAAAaEAAAGnQAABrQAAAbPAAAG4gAABvUAAAcSAAAHJwAAB0AAAAdTAAAHcAAAB4UAAAeeAAAHsQAAB8gAAAfjAAAH9gAACA8AAAgmAAAIQQAACFQAAAhnAAAIhAAACJcAAAMsdHJhawAAAFx0a2hkAAAAA9WAgl/VgIJfAAAAAgAAAAAAAAf8AAAAAAAAAAAAAAABAQAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAACsm1kaWEAAAAgbWRoZAAAAADVgIJf1YCCXwAArEQAAWAAVcQAAAAAACdoZGxyAAAAAAAAAABzb3VuAAAAAAAAAAAAAAAAU3RlcmVvAAAAAmNtaW5mAAAAEHNtaGQAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAidzdGJsAAAAZ3N0c2QAAAAAAAAAAQAAAFdtcDRhAAAAAAAAAAEAAAAAAAAAAAACABAAAAAArEQAAAAAADNlc2RzAAAAAAOAgIAiAAIABICAgBRAFQAAAAADDUAAAAAABYCAgAISEAaAgIABAgAAABhzdHRzAAAAAAAAAAEAAABYAAAEAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAAUc3RzegAAAAAAAAAGAAAAWAAAAXBzdGNvAAAAAAAAAFgAAAOBAAADhwAAA5oAAAOtAAADswAAA8oAAAPfAAAD5QAAA/gAAAQLAAAEEQAABCgAAAQ9AAAEUAAABFYAAARpAAAEgAAABIYAAASbAAAErgAABLQAAATHAAAE3gAABPMAAAT5AAAFDAAABR8AAAUlAAAFPAAABVEAAAVXAAAFagAABX0AAAWDAAAFmgAABa8AAAXCAAAFyAAABdsAAAXyAAAF+AAABg0AAAYgAAAGJgAABjkAAAZQAAAGZQAABmsAAAZ+AAAGkQAABpcAAAauAAAGwwAABskAAAbcAAAG7wAABwYAAAcMAAAHIQAABzQAAAc6AAAHTQAAB2QAAAdqAAAHfwAAB5IAAAeYAAAHqwAAB8IAAAfXAAAH3QAAB/AAAAgDAAAICQAACCAAAAg1AAAIOwAACE4AAAhhAAAIeAAACH4AAAiRAAAIpAAACKoAAAiwAAAItgAACLwAAAjCAAAAFnVkdGEAAAAObmFtZVN0ZXJlbwAAAHB1ZHRhAAAAaG1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAAO2lsc3QAAAAzqXRvbwAAACtkYXRhAAAAAQAAAABIYW5kQnJha2UgMC4xMC4yIDIwMTUwNjExMDA="}])},t.exports=e()})),St=function(t){return t&&t.__esModule?t.default:t}(Tt),Nt=1e3,It=[0,0,.5,1],Dt=[.5,0,.5,1],Et=s.requestAnimationFrame,kt=s.cancelAnimationFrame;function xt(t){_.defineProperties(this,{hasPosition:{writable:!1,enumerable:!0,value:t.hasPosition},hasExternalDisplay:{writable:!1,enumerable:!0,value:t.hasExternalDisplay},canPresent:{writable:!1,enumerable:!0,value:t.canPresent},maxLayers:{writable:!1,enumerable:!0,value:t.maxLayers},hasOrientation:{enumerable:!0,get:function(){return U("VRDisplayCapabilities.prototype.hasOrientation","VRDisplay.prototype.getFrameData"),t.hasOrientation}}})}function Lt(t){var i=!("wakelock"in(t=t||{}))||t.wakelock;this.isPolyfilled=!0,this.displayId=Nt++,this.displayName="",this.depthNear=.01,this.depthFar=1e4,this.isPresenting=!1,_.defineProperty(this,"isConnected",{get:function(){return U("VRDisplay.prototype.isConnected","VRDisplayCapabilities.prototype.hasExternalDisplay"),!1}}),this.capabilities=new xt({hasPosition:!1,hasOrientation:!1,hasExternalDisplay:!1,canPresent:!1,maxLayers:1}),this.stageParameters=null,this.jm=!1,this.Om=null,this.Rm=null,this.Pm=null,this.zm=null,this.Bm=null,this.Um=null,this.Qm=null,this.Fm=null,i&&D()&&(this.Ym=new St)}Lt.prototype.getFrameData=function(t){return P(t,this.Vm(),this)},Lt.prototype.getPose=function(){return U("VRDisplay.prototype.getPose","VRDisplay.prototype.getFrameData"),this.Vm()},Lt.prototype.resetPose=function(){return U("VRDisplay.prototype.resetPose"),this.Gm()},Lt.prototype.getImmediatePose=function(){return U("VRDisplay.prototype.getImmediatePose","VRDisplay.prototype.getFrameData"),this.Vm()},Lt.prototype.requestAnimationFrame=function(t){return Et(t)},Lt.prototype.cancelAnimationFrame=function(t){return kt(t)},Lt.prototype.wrapForFullscreen=function(t){if(d())return t;if(!this.zm){this.zm=h.createElement("div");var i=["height: "+x.min(screen.height,screen.width)+"px !important","top: 0 !important","left: 0 !important","right: 0 !important","border: 0","margin: 0","padding: 0","z-index: 999999 !important","position: fixed"];this.zm.setAttribute("style",i.join("; ")+";"),this.zm.classList.add("webvr-polyfill-fullscreen-wrapper")}if(this.Pm==t)return this.zm;if(this.Pm&&(this.Rm?this.Rm.appendChild(this.Pm):this.Pm.parentElement.removeChild(this.Pm)),this.Pm=t,this.Rm=t.parentElement,this.Rm||h.body.appendChild(t),!this.zm.parentElement){var e=this.Pm.parentElement;e.insertBefore(this.zm,this.Pm),e.removeChild(this.Pm)}this.zm.insertBefore(this.Pm,this.zm.firstChild),this.Bm=this.Pm.getAttribute("style");var s=this;return function(){if(s.Pm){var t=["position: absolute","top: 0","left: 0","width: "+x.max(screen.width,screen.height)+"px","height: "+x.min(screen.height,screen.width)+"px","border: 0","margin: 0","padding: 0"];s.Pm.setAttribute("style",t.join("; ")+";")}}(),this.zm},Lt.prototype.removeFullscreenWrapper=function(){if(this.Pm){var t=this.Pm;this.Bm?t.setAttribute("style",this.Bm):t.removeAttribute("style"),this.Pm=null,this.Bm=null;var i=this.zm.parentElement;return this.zm.removeChild(t),this.Rm===i?i.insertBefore(t,this.zm):this.Rm&&this.Rm.appendChild(t),i.removeChild(this.zm),t}},Lt.prototype.requestPresent=function(t){var i=this.isPresenting,e=this;return t instanceof Array||(U("VRDisplay.prototype.requestPresent with non-array argument","an array of VRLayers as the first argument"),t=[t]),new Promise((function(s,n){if(e.capabilities.canPresent)if(0==t.length||t.length>e.capabilities.maxLayers)n(new b("Invalid number of layers."));else{var r=t[0];if(r.source){var o=r.leftBounds||It,a=r.rightBounds||Dt;if(i){var u=e.Om;u.source!==r.source&&(u.source=r.source);for(var c=0;c<4;c++)u.leftBounds[c]=o[c],u.rightBounds[c]=a[c];return e.wrapForFullscreen(e.Om.source),e.Wm(),void s()}if(e.Om={predistorted:r.predistorted,source:r.source,leftBounds:o.slice(0),rightBounds:a.slice(0)},e.jm=!1,e.Om&&e.Om.source){var l=e.wrapForFullscreen(e.Om.source);e.Zm(l,(function(){var t=h.fullscreenElement||h.webkitFullscreenElement||h.mozFullScreenElement||h.msFullscreenElement;e.isPresenting=l===t,e.isPresenting?(screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape-primary").catch((function(t){console.error("screen.orientation.lock() failed due to",t.message)})),e.jm=!1,e.Hm(),s()):(screen.orientation&&screen.orientation.unlock&&screen.orientation.unlock(),e.disableWakeLock(),e.Xm(),e.removeFullscreenWrapper(),e.qm()),e.Km()}),(function(){e.jm&&(e.removeFullscreenWrapper(),e.qm(),e.disableWakeLock(),e.jm=!1,e.isPresenting=!1,n(new b("Unable to present.")))})),function(t){if(h.fullscreenEnabled&&t.requestFullscreen)t.requestFullscreen();else if(h.webkitFullscreenEnabled&&t.webkitRequestFullscreen)t.webkitRequestFullscreen();else if(h.mozFullScreenEnabled&&t.mozRequestFullScreen)t.mozRequestFullScreen();else{if(!h.msFullscreenEnabled||!t.msRequestFullscreen)return!1;t.msRequestFullscreen()}return!0}(l)?(e.enableWakeLock(),e.jm=!0):(d()||g())&&(e.enableWakeLock(),e.isPresenting=!0,e.Hm(),e.Km(),s())}e.jm||d()||(T(),n(new b("Unable to present.")))}else s()}else n(new b("VRDisplay is not capable of presenting."))}))},Lt.prototype.exitPresent=function(){var t=this.isPresenting,i=this;return this.isPresenting=!1,this.Om=null,this.disableWakeLock(),new Promise((function(e,s){t?(T(),i.Xm(),i.removeFullscreenWrapper(),i.qm(),i.Km(),e()):s(new b("Was not presenting to VRDisplay."))}))},Lt.prototype.getLayers=function(){return this.Om?[this.Om]:[]},Lt.prototype.Km=function(){var t=new CustomEvent("vrdisplaypresentchange",{detail:{display:this}});s.dispatchEvent(t)},Lt.prototype.Jm=function(){var t=new CustomEvent("vrdisplayconnect",{detail:{display:this}});s.dispatchEvent(t)},Lt.prototype.Zm=function(t,i,e){this.qm(),this.Um=t,this.Qm=i,this.Fm=e,i&&(h.fullscreenEnabled?t.addEventListener("fullscreenchange",i,!1):h.webkitFullscreenEnabled?t.addEventListener("webkitfullscreenchange",i,!1):h.mozFullScreenEnabled?h.addEventListener("mozfullscreenchange",i,!1):h.msFullscreenEnabled&&t.addEventListener("msfullscreenchange",i,!1)),e&&(h.fullscreenEnabled?t.addEventListener("fullscreenerror",e,!1):h.webkitFullscreenEnabled?t.addEventListener("webkitfullscreenerror",e,!1):h.mozFullScreenEnabled?h.addEventListener("mozfullscreenerror",e,!1):h.msFullscreenEnabled&&t.addEventListener("msfullscreenerror",e,!1))},Lt.prototype.qm=function(){if(this.Um){var t=this.Um;if(this.Qm){var i=this.Qm;t.removeEventListener("fullscreenchange",i,!1),t.removeEventListener("webkitfullscreenchange",i,!1),h.removeEventListener("mozfullscreenchange",i,!1),t.removeEventListener("msfullscreenchange",i,!1)}if(this.Fm){var e=this.Fm;t.removeEventListener("fullscreenerror",e,!1),t.removeEventListener("webkitfullscreenerror",e,!1),h.removeEventListener("mozfullscreenerror",e,!1),t.removeEventListener("msfullscreenerror",e,!1)}this.Um=null,this.Qm=null,this.Fm=null}},Lt.prototype.enableWakeLock=function(){this.Ym&&this.Ym.enable()},Lt.prototype.disableWakeLock=function(){this.Ym&&this.Ym.disable()},Lt.prototype.Hm=function(){},Lt.prototype.Xm=function(){},Lt.prototype.submitFrame=function(t){},Lt.prototype.getEyeParameters=function(t){return null};var Ct={MOBILE_WAKE_LOCK:!0,DEBUG:!1,DPDB_URL:"https://dpdb.webvr.rocks/dpdb.json",K_FILTER:.98,PREDICTION_TIME_S:.04,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,ROTATE_INSTRUCTIONS_LANDSCAPE_TIMEOUT:3e3,YAW_ONLY:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1},jt="left",Ot="right";function Rt(t){var i=E({},Ct);t=E(i,t||{}),Lt.call(this,{wakelock:t.MOBILE_WAKE_LOCK}),this.config=t,this.displayName="Cardboard VRDisplay",this.capabilities=new xt({hasPosition:!1,hasOrientation:!0,hasExternalDisplay:!1,canPresent:!0,maxLayers:1}),this.stageParameters=null,this.$m=this.config.BUFFER_SCALE,this.tp=new pt(this.config),this.ep=null,this.sp=null,this.Ow=null,this.np=null,this.rp=new ut(this.config.DPDB_URL,this.op.bind(this)),this.hp=new ot(this.rp.getDeviceParams()),this.ap=new Mt,this.ap.onChange(this.cp.bind(this)),this.hp.setViewer(this.ap.getCurrentViewer()),this.config.ROTATE_INSTRUCTIONS_DISABLED||(this.lp=new At),d()&&s.addEventListener("resize",this.dp.bind(this))}Rt.prototype=_.create(Lt.prototype),Rt.prototype.Vm=function(){return{position:null,orientation:this.tp.getOrientation(),linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}},Rt.prototype.Gm=function(){this.tp.resetPose&&this.tp.resetPose()},Rt.prototype.Pw=function(t){var i;if(t==jt)i=this.hp.getFieldOfViewLeftEye();else{if(t!=Ot)return console.error("Invalid eye provided: %s",t),null;i=this.hp.getFieldOfViewRightEye()}return i},Rt.prototype.zw=function(t){var i;if(t==jt)i=[.5*-this.hp.viewer.interLensDistance,0,0];else{if(t!=Ot)return console.error("Invalid eye provided: %s",t),null;i=[.5*this.hp.viewer.interLensDistance,0,0]}return i},Rt.prototype.getEyeParameters=function(t){var i=this.zw(t),e=this.Pw(t),s={offset:i,renderWidth:.5*this.hp.device.width*this.$m,renderHeight:this.hp.device.height*this.$m};return _.defineProperty(s,"fieldOfView",{enumerable:!0,get:function(){return U("VRFieldOfView","VRFrameData's projection matrices"),e}}),s},Rt.prototype.op=function(t){this.config.DEBUG&&console.log("DPDB reported that device params were updated."),this.hp.updateDeviceParams(t),this.ep&&this.ep.updateDeviceInfo(this.hp)},Rt.prototype.fp=function(){this.Om&&this.ep&&(this.Om.leftBounds||this.Om.rightBounds)&&this.ep.setTextureBounds(this.Om.leftBounds,this.Om.rightBounds)},Rt.prototype.Hm=function(){var t=this.Om.source.getContext("webgl");if(t||(t=this.Om.source.getContext("experimental-webgl")),t||(t=this.Om.source.getContext("webgl2")),t){if(this.Ow=t.canvas,this.np=t.canvas.getAttribute("style"),this.Om.predistorted?this.config.CARDBOARD_UI_DISABLED||(t.canvas.width=y()*this.$m,t.canvas.height=M()*this.$m,this.sp=new q(t)):(this.config.CARDBOARD_UI_DISABLED||(this.sp=new q(t)),this.ep=new V(t,this.sp,this.config.BUFFER_SCALE,this.config.DIRTY_SUBMIT_FRAME_BINDINGS),this.ep.updateDeviceInfo(this.hp)),this.sp&&this.sp.listen(function(t){this.ap.show(this.Om.source.parentElement),t.stopPropagation(),t.preventDefault()}.bind(this),function(t){this.exitPresent(),t.stopPropagation(),t.preventDefault()}.bind(this)),this.lp){var i=this.config.ROTATE_INSTRUCTIONS_LANDSCAPE_TIMEOUT;A()&&D()&&i?this.lp.showTemporarily(i,this.Om.source.parentElement):this.lp.update()}this.orientationHandler=this.hm.bind(this),s.addEventListener("orientationchange",this.orientationHandler),this.vrdisplaypresentchangeHandler=this.fp.bind(this),s.addEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler),this.dp(),this.gp()}},Rt.prototype.Xm=function(){this.ep&&(this.ep.destroy(),this.ep=null),this.sp&&(this.sp.destroy(),this.sp=null),this.lp&&this.lp.hide(),this.ap.hide(),this.Ow&&(R(this.Ow),this.np?this.Ow.setAttribute("style",this.np):this.Ow.removeAttribute("style"),O(this.Ow),this.Ow=null,this.np=null),s.removeEventListener("orientationchange",this.orientationHandler),s.removeEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler)},Rt.prototype.Wm=function(){this.Xm(),this.Hm()},Rt.prototype.submitFrame=function(t){if(this.ep)this.fp(),this.ep.submitFrame();else if(this.sp&&this.Om){var i=this.Om.source.getContext("webgl").canvas;i.width==this.lastWidth&&i.height==this.lastHeight||this.sp.onResize(),this.lastWidth=i.width,this.lastHeight=i.height,this.sp.render()}},Rt.prototype.hm=function(t){this.ap.hide(),this.lp&&this.lp.update(),this.dp()},Rt.prototype.dp=function(t){if(this.Om){var i=this.Om.source.getContext("webgl");R(i.canvas),i.canvas.setAttribute("style",["position: absolute","top: 0","left: 0","width: 100vw","height: 100vh","border: 0","margin: 0","padding: 0px","box-sizing: content-box"].join("; ")+";"),O(i.canvas)}},Rt.prototype.cp=function(t){this.hp.setViewer(t),this.ep&&this.ep.updateDeviceInfo(this.hp),this.gp()},Rt.prototype.gp=function(){var t=new CustomEvent("vrdisplaydeviceparamschange",{detail:{vrdisplay:this,deviceInfo:this.hp}});s.dispatchEvent(t)},Rt.VRFrameData=function(){this.leftProjectionMatrix=new Float32Array(16),this.leftViewMatrix=new Float32Array(16),this.rightProjectionMatrix=new Float32Array(16),this.rightViewMatrix=new Float32Array(16),this.pose=null},Rt.VRDisplay=Lt;var Pt={PROVIDE_MOBILE_VRDISPLAY:!0,GET_VR_DISPLAYS_TIMEOUT:1e3,MOBILE_WAKE_LOCK:!0,DEBUG:!1,DPDB_URL:"https://dpdb.webvr.rocks/dpdb.json",K_FILTER:.98,PREDICTION_TIME_S:.04,TOUCH_PANNER_DISABLED:!0,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,ROTATE_INSTRUCTIONS_LANDSCAPE_TIMEOUT:3e3,YAW_ONLY:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1};function zt(t){this.config=r(r({},Pt),t),this.polyfillDisplays=[],this.enabled=!1,this.hasNative="getVRDisplays"in Kl,this.native={},this.native.getVRDisplays=Kl.getVRDisplays,this.native.VRFrameData=s.VRFrameData,this.native.VRDisplay=s.VRDisplay,(!this.hasNative||this.config.PROVIDE_MOBILE_VRDISPLAY&&e())&&(this.enable(),this.getVRDisplays().then((function(t){t&&t[0]&&t[0].Jm&&t[0].Jm()})))}zt.prototype.getPolyfillDisplays=function(){if(this._p)return this.polyfillDisplays;if(e()){var t=new Rt({MOBILE_WAKE_LOCK:this.config.MOBILE_WAKE_LOCK,DEBUG:this.config.DEBUG,DPDB_URL:this.config.DPDB_URL,CARDBOARD_UI_DISABLED:this.config.CARDBOARD_UI_DISABLED,K_FILTER:this.config.K_FILTER,PREDICTION_TIME_S:this.config.PREDICTION_TIME_S,TOUCH_PANNER_DISABLED:this.config.TOUCH_PANNER_DISABLED,ROTATE_INSTRUCTIONS_DISABLED:this.config.ROTATE_INSTRUCTIONS_DISABLED,ROTATE_INSTRUCTIONS_LANDSCAPE_TIMEOUT:this.config.ROTATE_INSTRUCTIONS_LANDSCAPE_TIMEOUT,YAW_ONLY:this.config.YAW_ONLY,BUFFER_SCALE:this.config.BUFFER_SCALE,DIRTY_SUBMIT_FRAME_BINDINGS:this.config.DIRTY_SUBMIT_FRAME_BINDINGS});this.polyfillDisplays.push(t)}return this._p=!0,this.polyfillDisplays},zt.prototype.enable=function(){if(this.enabled=!0,this.hasNative&&this.native.VRFrameData){var t=this.native.VRFrameData,i=new this.native.VRFrameData,e=this.native.VRDisplay.prototype.getFrameData;s.VRDisplay.prototype.getFrameData=function(s){s instanceof t?e.call(this,s):(e.call(this,i),s.pose=i.pose,n(i.leftProjectionMatrix,s.leftProjectionMatrix),n(i.rightProjectionMatrix,s.rightProjectionMatrix),n(i.leftViewMatrix,s.leftViewMatrix),n(i.rightViewMatrix,s.rightViewMatrix))}}Kl.getVRDisplays=this.getVRDisplays.bind(this),s.VRDisplay=Rt.VRDisplay,s.VRFrameData=Rt.VRFrameData},zt.prototype.getVRDisplays=function(){var t,i=this,e=this.config;return this.hasNative?function(t){return Promise.race?Promise.race(t):new Promise((function(i,e){for(var s=0;s<t.length;s++)t[s].then(i,e)}))}([this.native.getVRDisplays.call(Kl),new Promise((function(i){t=u((function(){console.warn("Native WebVR implementation detected, but `getVRDisplays()` failed to resolve. Falling back to polyfill."),i([])}),e.GET_VR_DISPLAYS_TIMEOUT)}))]).then((function(e){return c(t),e.length>0?e:i.getPolyfillDisplays()})):Promise.resolve(this.getPolyfillDisplays())},zt.version="0.10.5-opentelly.3",zt.VRFrameData=Rt.VRFrameData,zt.VRDisplay=Rt.VRDisplay;var Bt=_.freeze({default:zt}),Ut=Bt&&zt||Bt;return void 0!==i&&i.window&&(i.document||(i.document=i.window.document),i.navigator||(i.navigator=i.window.navigator)),Ut},"object"==typeof t&&void 0!==i?i.exports=n():"function"==typeof define&&define.amd?define(n):e.WebVRPolyfill=n()})),kd=Ui((t=>{"use strict";function i(){const t=Dd();return i=function(){return t},t}function e(){const t=i()._(Ed());return e=function(){return t},t}r(),_.defineProperty(t,"__esModule",{value:!0}),_.defineProperty(t,"installWebVRPolyfill",{enumerable:!0,get:function(){return h}});var s=(il(),cd(dd)),n=(ds(),cd(fd)),o={TOUCH_PANNER_DISABLED:!0,ROTATE_INSTRUCTIONS_LANDSCAPE_TIMEOUT:0,MOBILE_WAKE_LOCK:!s.browserDetection.Sg&&!s.browserDetection.Ka,DPDB_URL:void 0},h=(0,n.lazyConstant)((()=>{new(e().default)(o)}))}));r();var d,vt=((d={})[d.CONFIGURATION_ERROR=1e3]="CONFIGURATION_ERROR",d[d.LICENSE_ERROR=2e3]="LICENSE_ERROR",d[d.LICENSE_INVALID_DOMAIN=2001]="LICENSE_INVALID_DOMAIN",d[d.LICENSE_INVALID_SOURCE=2002]="LICENSE_INVALID_SOURCE",d[d.LICENSE_EXPIRED=2003]="LICENSE_EXPIRED",d[d.LICENSE_INVALID_FEATURE=2004]="LICENSE_INVALID_FEATURE",d[d.SOURCE_INVALID=3e3]="SOURCE_INVALID",d[d.SOURCE_NOT_SUPPORTED=3001]="SOURCE_NOT_SUPPORTED",d[d.MANIFEST_LOAD_ERROR=4e3]="MANIFEST_LOAD_ERROR",d[d.MANIFEST_CORS_ERROR=4001]="MANIFEST_CORS_ERROR",d[d.MANIFEST_PARSE_ERROR=4002]="MANIFEST_PARSE_ERROR",d[d.MEDIA_NOT_SUPPORTED=5e3]="MEDIA_NOT_SUPPORTED",d[d.MEDIA_LOAD_ERROR=5001]="MEDIA_LOAD_ERROR",d[d.MEDIA_DECODE_ERROR=5002]="MEDIA_DECODE_ERROR",d[d.MEDIA_AVPLAYER_ERROR=5003]="MEDIA_AVPLAYER_ERROR",d[d.MEDIA_ABORTED=5004]="MEDIA_ABORTED",d[d.NETWORK_ERROR=6e3]="NETWORK_ERROR",d[d.NETWORK_TIMEOUT=6001]="NETWORK_TIMEOUT",d[d.CONTENT_PROTECTION_ERROR=7e3]="CONTENT_PROTECTION_ERROR",d[d.CONTENT_PROTECTION_NOT_SUPPORTED=7001]="CONTENT_PROTECTION_NOT_SUPPORTED",d[d.CONTENT_PROTECTION_CONFIGURATION_MISSING=7002]="CONTENT_PROTECTION_CONFIGURATION_MISSING",d[d.CONTENT_PROTECTION_CONFIGURATION_INVALID=7003]="CONTENT_PROTECTION_CONFIGURATION_INVALID",d[d.CONTENT_PROTECTION_INITIALIZATION_INVALID=7004]="CONTENT_PROTECTION_INITIALIZATION_INVALID",d[d.CONTENT_PROTECTION_CERTIFICATE_ERROR=7005]="CONTENT_PROTECTION_CERTIFICATE_ERROR",d[d.CONTENT_PROTECTION_CERTIFICATE_INVALID=7006]="CONTENT_PROTECTION_CERTIFICATE_INVALID",d[d.CONTENT_PROTECTION_LICENSE_ERROR=7007]="CONTENT_PROTECTION_LICENSE_ERROR",d[d.CONTENT_PROTECTION_LICENSE_INVALID=7008]="CONTENT_PROTECTION_LICENSE_INVALID",d[d.CONTENT_PROTECTION_KEY_EXPIRED=7009]="CONTENT_PROTECTION_KEY_EXPIRED",d[d.CONTENT_PROTECTION_KEY_MISSING=7010]="CONTENT_PROTECTION_KEY_MISSING",d[d.CONTENT_PROTECTION_OUTPUT_RESTRICTED=7011]="CONTENT_PROTECTION_OUTPUT_RESTRICTED",d[d.CONTENT_PROTECTION_INTERNAL_ERROR=7012]="CONTENT_PROTECTION_INTERNAL_ERROR",d[d.SUBTITLE_LOAD_ERROR=8e3]="SUBTITLE_LOAD_ERROR",d[d.SUBTITLE_CORS_ERROR=8001]="SUBTITLE_CORS_ERROR",d[d.SUBTITLE_PARSE_ERROR=8002]="SUBTITLE_PARSE_ERROR",d[d.VR_PLATFORM_UNSUPPORTED=9e3]="VR_PLATFORM_UNSUPPORTED",d[d.VR_PRESENTATION_ERROR=9001]="VR_PRESENTATION_ERROR",d[d.AD_ERROR=1e4]="AD_ERROR",d[d.AD_BLOCKER_DETECTED=10001]="AD_BLOCKER_DETECTED",d[d.FULLSCREEN_ERROR=11e3]="FULLSCREEN_ERROR",d[d.PICTURE_IN_PICTURE_ERROR=11001]="PICTURE_IN_PICTURE_ERROR",d[d.CACHE_SOURCE_ERROR=12e3]="CACHE_SOURCE_ERROR",d[d.CACHE_CONTENT_PROTECTION_ERROR=12001]="CACHE_CONTENT_PROTECTION_ERROR",d[d.THEO_LIVE_UNKNOWN_ERROR=13e3]="THEO_LIVE_UNKNOWN_ERROR",d[d.THEO_LIVE_CHANNEL_NOT_FOUND=13001]="THEO_LIVE_CHANNEL_NOT_FOUND",d[d.THEO_LIVE_END_OF_DEMO=13002]="THEO_LIVE_END_OF_DEMO",d[d.THEO_LIVE_ANALYTICS_ERROR=13003]="THEO_LIVE_ANALYTICS_ERROR",d),xd=function(t){return t[t.CONFIGURATION=1]="CONFIGURATION",t[t.LICENSE=2]="LICENSE",t[t.SOURCE=3]="SOURCE",t[t.MANIFEST=4]="MANIFEST",t[t.MEDIA=5]="MEDIA",t[t.NETWORK=6]="NETWORK",t[t.CONTENT_PROTECTION=7]="CONTENT_PROTECTION",t[t.SUBTITLE=8]="SUBTITLE",t[t.VR=9]="VR",t[t.AD=10]="AD",t[t.FULLSCREEN=11]="FULLSCREEN",t[t.CACHE=12]="CACHE",t[t.THEOLIVE=13]="THEOLIVE",t}({});!function(t){t.fromCode=function(i){const e=x.floor(i/1e3);if(e in t)return e;throw new k("Invalid error code: "+i)}}(xd||(xd={})),r(),r(),r(),r(),r(),r(),il(),r();var no={}.hasOwnProperty,Ld={}.toString;function $t(t){return null!=t}function qe(t){return void 0===t}var Dn=Array.isArray||function(t){return"[object Array]"===Ld.call(t)};function Ia(t){return _o(t)&&no.call(t,"length")&&$a(t.length)}function _o(t){return"object"==typeof t&&null!==t}function Cd(t){return _o(t)&&t.constructor&&t.constructor===_}function Ic(t){return"string"==typeof t}function jo(t){return"boolean"==typeof t}function pr(t){return $t(t)&&"function"==typeof t.then}function jd(t){return"[object Date]"===Ld.call(t)}function $a(t){return"number"==typeof t}function dc(t){return"function"==typeof t}function Od(t){return dc(t)||_o(t)}function dn(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function qn(t){let i;for(;$t(i=t.firstChild);)t.removeChild(i)}function Rd(t,i){t.insertBefore(i,t.firstChild)}function Pd(t){const i=t.className;return"string"==typeof i?i:i&&"string"==typeof i.baseVal?i.baseVal:""}function zd(t,i){const e=t.className;"string"==typeof e?t.className=i:e&&"string"==typeof e.baseVal&&(e.baseVal=i)}function Bd(t,i){return void 0!==t.classList?t.classList.contains(i):void 0!==t.className&&-1!==(" "+Pd(t)+" ").indexOf(" "+i+" ")}function Ea(t,i){if(void 0!==t.classList)t.classList.add(i);else if(void 0!==t.className){const e=Pd(t);-1===(" "+e+" ").indexOf(" "+i+" ")&&zd(t,(e+" "+i).trim())}}function Ud(t,i){if(void 0!==t.classList)t.classList.remove(i);else if(void 0!==t.className){let e=" "+Pd(t)+" ";const s=" "+i+" ";for(;-1!==e.indexOf(s);)e=e.replace(s," ");zd(t,e.trim())}}function Qd(t,i,e){void 0===e&&(e=!Bd(t,i)),e?Ea(t,i):Ud(t,i)}function Fd(t){t.stopPropagation()}function Yd(t,i){Ro.Nf&&Ro.Df<3?function(t,i){let e=i;switch(i){case"flex":e="-webkit-flex";break;case"inline-flex":e="-webkit-inline-flex"}t.display=e}(t,i):function(t,i){if(t.display=i,t.display!==i){let e=i;switch(i){case"flex":e="-ms-flexbox";break;case"inline-flex":e="-ms-inline-flexbox"}t.display=e}}(t,i)}function Vd(t,i){const e=i.style;if(e)for(const i of _.keys(t)){const s=t[i];void 0!==s&&(e[i]=s)}}function pn(t){const i=t.style;i.position="absolute",i.left="0",i.right="0",i.top="0",i.bottom="0",i.width="100%",i.height="100%"}function Gd(t){const i=t.style;i.position="",i.left="",i.right="",i.top="",i.bottom="",i.width="",i.height=""}function Wd(t){t.removeAttribute("title")}function Zd(t){t.addEventListener("mouseover",(t=>{Wd(t.target)}))}function Hd(t){try{return Boolean(t)&&t===t.top}catch(t){return!1}}function Xd(t){try{return Boolean(t)&&t.parent!==t}catch(t){return!1}}function Ln(t){return"video"===function(t){return t&&t.nodeName&&t.nodeName.toLowerCase()||""}(t)}function qd(t){t.src&&(t.removeAttribute("src"),t.load()),t.srcObject&&(t.srcObject=null,t.load())}function Kd(){return void 0!==h?h.createElement("video"):void 0}ds();var Jd=di(Kd),$d=di((()=>"undefined"!=typeof HTMLVideoElement&&Jd()instanceof HTMLVideoElement));il(),r(),r(),r();var Ka=null;try{Ka=new WebAssembly.Instance(new WebAssembly.Module(new T([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(d){}function nu(t,i,e){this.low=0|t,this.high=0|i,this.unsigned=!!e}function tf(t){return!0===(t&&t.vp)}function ef(t){var i=x.clz32(t&-t);return t?31-i:i}nu.prototype.vp,_.defineProperty(nu.prototype,"vp",{value:!0}),nu.isLong=tf;var sf={},nf={};function rf(t,i){var e,s,n;return i?(n=0<=(t>>>=0)&&t<256)&&(s=nf[t])?s:(e=Dh(t,0,!0),n&&(nf[t]=e),e):(n=-128<=(t|=0)&&t<128)&&(s=sf[t])?s:(e=Dh(t,t<0?-1:0,!1),n&&(sf[t]=e),e)}function qa(t,i){if(j(t))return i?ff:df;if(i){if(t<0)return ff;if(t>=uf)return mf}else{if(t<=-cf)return pf;if(t+1>=cf)return wf}return t<0?qa(-t,i).neg():Dh(t%af|0,t/af|0,i)}function Dh(t,i,e){return new nu(t,i,e)}nu.fromInt=rf,nu.fromNumber=qa,nu.fromBits=Dh;var of=x.pow;function hf(t,i,e){if(0===t.length)throw b("empty string");if("number"==typeof i?(e=i,i=!1):i=!!i,"NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return i?ff:df;if((e=e||10)<2||36<e)throw RangeError("radix");var s;if((s=t.indexOf("-"))>0)throw b("interior hyphen");if(0===s)return hf(t.substring(1),i,e).neg();for(var n=qa(of(e,8)),r=df,o=0;o<t.length;o+=8){var h=x.min(8,t.length-o),a=C(t.substring(o,o+h),e);if(h<8){var u=qa(of(e,h));r=r.mul(u).add(qa(a))}else r=(r=r.mul(n)).add(qa(a))}return r.unsigned=i,r}function io(t,i){return"number"==typeof t?qa(t,i):"string"==typeof t?hf(t,i):Dh(t.low,t.high,"boolean"==typeof i?i:t.unsigned)}nu.fromString=hf,nu.fromValue=io;var af=4294967296,uf=af*af,cf=uf/2,lf=rf(1<<24),df=rf(0);nu.ZERO=df;var ff=rf(0,!0);nu.UZERO=ff;var gf=rf(1);nu.ONE=gf;var _f=rf(1,!0);nu.UONE=_f;var vf=rf(-1);nu.NEG_ONE=vf;var wf=Dh(-1,2147483647,!1);nu.MAX_VALUE=wf;var mf=Dh(-1,-1,!0);nu.MAX_UNSIGNED_VALUE=mf;var pf=Dh(0,-2147483648,!1);nu.MIN_VALUE=pf;var Ju=nu.prototype;Ju.toInt=function(){return this.unsigned?this.low>>>0:this.low},Ju.toNumber=function(){return this.unsigned?(this.high>>>0)*af+(this.low>>>0):this.high*af+(this.low>>>0)},Ju.toString=function(t){if((t=t||10)<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(pf)){var i=qa(t),e=this.div(i),s=e.mul(i).sub(this);return e.toString(t)+s.toInt().toString(t)}return"-"+this.neg().toString(t)}for(var n=qa(of(t,6),this.unsigned),r=this,o="";;){var h=r.div(n),a=(r.sub(h.mul(n)).toInt()>>>0).toString(t);if((r=h).isZero())return a+o;for(;a.length<6;)a="0"+a;o=""+a+o}},Ju.getHighBits=function(){return this.high},Ju.getHighBitsUnsigned=function(){return this.high>>>0},Ju.getLowBits=function(){return this.low},Ju.getLowBitsUnsigned=function(){return this.low>>>0},Ju.getNumBitsAbs=function(){if(this.isNegative())return this.eq(pf)?64:this.neg().getNumBitsAbs();for(var t=0!=this.high?this.high:this.low,i=31;i>0&&0==(t&1<<i);i--);return 0!=this.high?i+33:i+1},Ju.isZero=function(){return 0===this.high&&0===this.low},Ju.eqz=Ju.isZero,Ju.isNegative=function(){return!this.unsigned&&this.high<0},Ju.isPositive=function(){return this.unsigned||this.high>=0},Ju.isOdd=function(){return 1==(1&this.low)},Ju.isEven=function(){return 0==(1&this.low)},Ju.equals=function(t){return tf(t)||(t=io(t)),(this.unsigned===t.unsigned||this.high>>>31!=1||t.high>>>31!=1)&&(this.high===t.high&&this.low===t.low)},Ju.eq=Ju.equals,Ju.notEquals=function(t){return!this.eq(t)},Ju.neq=Ju.notEquals,Ju.ne=Ju.notEquals,Ju.lessThan=function(t){return this.comp(t)<0},Ju.lt=Ju.lessThan,Ju.lessThanOrEqual=function(t){return this.comp(t)<=0},Ju.lte=Ju.lessThanOrEqual,Ju.le=Ju.lessThanOrEqual,Ju.greaterThan=function(t){return this.comp(t)>0},Ju.gt=Ju.greaterThan,Ju.greaterThanOrEqual=function(t){return this.comp(t)>=0},Ju.gte=Ju.greaterThanOrEqual,Ju.ge=Ju.greaterThanOrEqual,Ju.compare=function(t){if(tf(t)||(t=io(t)),this.eq(t))return 0;var i=this.isNegative(),e=t.isNegative();return i&&!e?-1:!i&&e?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},Ju.comp=Ju.compare,Ju.negate=function(){return!this.unsigned&&this.eq(pf)?pf:this.not().add(gf)},Ju.neg=Ju.negate,Ju.add=function(t){tf(t)||(t=io(t));var i=this.high>>>16,e=65535&this.high,s=this.low>>>16,n=65535&this.low,r=t.high>>>16,o=65535&t.high,h=t.low>>>16,a=0,u=0,c=0,l=0;return c+=(l+=n+(65535&t.low))>>>16,u+=(c+=s+h)>>>16,a+=(u+=e+o)>>>16,a+=i+r,Dh((c&=65535)<<16|(l&=65535),(a&=65535)<<16|(u&=65535),this.unsigned)},Ju.subtract=function(t){return tf(t)||(t=io(t)),this.add(t.neg())},Ju.sub=Ju.subtract,Ju.multiply=function(t){if(this.isZero())return this;if(tf(t)||(t=io(t)),Ka)return Dh(Ka.mul(this.low,this.high,t.low,t.high),Ka.get_high(),this.unsigned);if(t.isZero())return this.unsigned?ff:df;if(this.eq(pf))return t.isOdd()?pf:df;if(t.eq(pf))return this.isOdd()?pf:df;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(lf)&&t.lt(lf))return qa(this.toNumber()*t.toNumber(),this.unsigned);var i=this.high>>>16,e=65535&this.high,s=this.low>>>16,n=65535&this.low,r=t.high>>>16,o=65535&t.high,h=t.low>>>16,a=65535&t.low,u=0,c=0,l=0,d=0;return l+=(d+=n*a)>>>16,c+=(l+=s*a)>>>16,l&=65535,c+=(l+=n*h)>>>16,u+=(c+=e*a)>>>16,c&=65535,u+=(c+=s*h)>>>16,c&=65535,u+=(c+=n*o)>>>16,u+=i*a+e*h+s*o+n*r,Dh((l&=65535)<<16|(d&=65535),(u&=65535)<<16|(c&=65535),this.unsigned)},Ju.mul=Ju.multiply,Ju.divide=function(t){if(tf(t)||(t=io(t)),t.isZero())throw b("division by zero");var i,e,s;if(Ka)return this.unsigned||-2147483648!==this.high||-1!==t.low||-1!==t.high?Dh((this.unsigned?Ka.div_u:Ka.div_s)(this.low,this.high,t.low,t.high),Ka.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?ff:df;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return ff;if(t.gt(this.shru(1)))return _f;s=ff}else{if(this.eq(pf))return t.eq(gf)||t.eq(vf)?pf:t.eq(pf)?gf:(i=this.shr(1).div(t).shl(1)).eq(df)?t.isNegative()?gf:vf:(e=this.sub(t.mul(i)),s=i.add(e.div(t)));if(t.eq(pf))return this.unsigned?ff:df;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();s=df}for(e=this;e.gte(t);){i=x.max(1,x.floor(e.toNumber()/t.toNumber()));for(var n=x.ceil(x.log(i)/x.LN2),r=n<=48?1:of(2,n-48),o=qa(i),h=o.mul(t);h.isNegative()||h.gt(e);)h=(o=qa(i-=r,this.unsigned)).mul(t);o.isZero()&&(o=gf),s=s.add(o),e=e.sub(h)}return s},Ju.div=Ju.divide,Ju.modulo=function(t){return tf(t)||(t=io(t)),Ka?Dh((this.unsigned?Ka.rem_u:Ka.rem_s)(this.low,this.high,t.low,t.high),Ka.get_high(),this.unsigned):this.sub(this.div(t).mul(t))},Ju.mod=Ju.modulo,Ju.rem=Ju.modulo,Ju.not=function(){return Dh(~this.low,~this.high,this.unsigned)},Ju.countLeadingZeros=function(){return this.high?x.clz32(this.high):x.clz32(this.low)+32},Ju.clz=Ju.countLeadingZeros,Ju.countTrailingZeros=function(){return this.low?ef(this.low):ef(this.high)+32},Ju.ctz=Ju.countTrailingZeros,Ju.and=function(t){return tf(t)||(t=io(t)),Dh(this.low&t.low,this.high&t.high,this.unsigned)},Ju.or=function(t){return tf(t)||(t=io(t)),Dh(this.low|t.low,this.high|t.high,this.unsigned)},Ju.xor=function(t){return tf(t)||(t=io(t)),Dh(this.low^t.low,this.high^t.high,this.unsigned)},Ju.shiftLeft=function(t){return tf(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?Dh(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):Dh(0,this.low<<t-32,this.unsigned)},Ju.shl=Ju.shiftLeft,Ju.shiftRight=function(t){return tf(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?Dh(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):Dh(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},Ju.shr=Ju.shiftRight,Ju.shiftRightUnsigned=function(t){return tf(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?Dh(this.low>>>t|this.high<<32-t,this.high>>>t,this.unsigned):Dh(32===t?this.high:this.high>>>t-32,0,this.unsigned)},Ju.shru=Ju.shiftRightUnsigned,Ju.shr_u=Ju.shiftRightUnsigned,Ju.rotateLeft=function(t){var i;return tf(t)&&(t=t.toInt()),0==(t&=63)?this:32===t?Dh(this.high,this.low,this.unsigned):t<32?(i=32-t,Dh(this.low<<t|this.high>>>i,this.high<<t|this.low>>>i,this.unsigned)):(i=32-(t-=32),Dh(this.high<<t|this.low>>>i,this.low<<t|this.high>>>i,this.unsigned))},Ju.rotl=Ju.rotateLeft,Ju.rotateRight=function(t){var i;return tf(t)&&(t=t.toInt()),0==(t&=63)?this:32===t?Dh(this.high,this.low,this.unsigned):t<32?(i=32-t,Dh(this.high<<i|this.low>>>t,this.low<<i|this.high>>>t,this.unsigned)):(i=32-(t-=32),Dh(this.low<<i|this.high>>>t,this.high<<i|this.low>>>t,this.unsigned))},Ju.rotr=Ju.rotateRight,Ju.toSigned=function(){return this.unsigned?Dh(this.low,this.high,!1):this},Ju.toUnsigned=function(){return this.unsigned?this:Dh(this.low,this.high,!0)},Ju.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},Ju.toBytesLE=function(){var t=this.high,i=this.low;return[255&i,i>>>8&255,i>>>16&255,i>>>24,255&t,t>>>8&255,t>>>16&255,t>>>24]},Ju.toBytesBE=function(){var t=this.high,i=this.low;return[t>>>24,t>>>16&255,t>>>8&255,255&t,i>>>24,i>>>16&255,i>>>8&255,255&i]},nu.fromBytes=function(t,i,e){return e?nu.fromBytesLE(t,i):nu.fromBytesBE(t,i)},nu.fromBytesLE=function(t,i){return new nu(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,i)},nu.fromBytesBE=function(t,i){return new nu(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],i)};var D=nu;function Af(t,i){return t.lessThan(i)?t:i}r();var tt=9007199254740991,yf=2**-52;function ur(t,i,e){return x.min(x.max(t,i),e)}function ce(t,i,e){return t===i||x.abs(t-i)<=e}function wo(t,i){if(t===i)return!0;const e=x.abs(t-i);if(e<yf)return!0;return e<x.max(x.abs(t),x.abs(i))*yf}function bf(t,i){return t%i+(t<0?i:0)}function Mf(t){return t!=t}function Tf(t,i){return t===i||Mf(t)&&Mf(i)}function Sf(t,i){let e=t,s=i;for(;0!==s;){const t=e%s;e=s,s=t}return e<0?-e:e}function Ke(t,i){return t.reduce(((t,e)=>t+i(e)),0)}function Nf(t){return!j(t.getTime())}function ja(){return Date.now()||(new Date).getTime()}function If(t){return t/1e3}function Df(t){return 1e3*t}var Be=1/6,Ef=D.fromNumber(tt);function os(t,i){if(0===i)return t.isZero()?NaN:t.isNegative()?-1/0:1/0;if(t.lessThanOrEqual(Ef))return t.toNumber()/i;const e=t.divide(i),s=t.subtract(e.multiply(i));return e.toNumber()+s.toNumber()/i}var kf=!!("ontouchstart"in self||self.DocumentTouch&&h instanceof self.DocumentTouch)||!(!Kl||!Kl.msMaxTouchPoints),xf=Jd(),Lf=!(!xf||!xf.webkitShowPlaybackTargetPicker),Cf=class{get wp(){return void 0===this.mp&&(this.mp=this.pp()),this.mp}pp(){return 0}get Ap(){return!Ro.dg}get yp(){if(s.screen)return{width:s.screen.width,height:s.screen.height}}get bp(){return s.devicePixelRatio||1}get Mp(){return Lf}get Tp(){return!1}get Sp(){return!0}get Np(){return!(!Ro.qf&&!Ro.Ka)||!!Ro.Rf}get Ip(){return Ro.Rf}get Dp(){return!Ro.Ka}get Ep(){return!0}get kp(){return!0}get xp(){return!1}get Lp(){}get Cp(){return!0}get jp(){return!1}get Op(){return Ro.Rf}get Rp(){return!1}Pp(t,i){return!0}zp(t){return t>=2*Be}constructor(){this.mp=void 0,this.Bp=!1,this.Je=kf,this.Qs=!1,this.Up=!0}},Xa=class extends Cf{constructor(){super()}};il(),r(),il();var jf=class extends Xa{get Lp(){if(Ro.Od)return 4096}Pp(t,i){if(t&&t.Qp&&i&&i.Qp){let e=za(t.Qp,"mp4a.40.2")&&za(i.Qp,"mp4a.40.5"),s=za(t.Qp,"mp4a.40.5")&&za(i.Qp,"mp4a.40.2"),n=za(t.Qp,"mp4a.40.2")&&za(i.Qp,"mp4a.40.34"),r=za(t.Qp,"mp4a.40.34")&&za(i.Qp,"mp4a.40.2"),o=za(t.Qp,"mp4a.40.5")&&za(i.Qp,"mp4a.40.34"),h=za(t.Qp,"mp4a.40.34")&&za(i.Qp,"mp4a.40.5");return!(e||s||n||r||o||h)}return!0}};function za(t,i){return t.indexOf(i)>-1}r();var Of=class extends Xa{zp(t){return t>=2}};r(),il();var Rf=class extends Xa{get Rp(){return Ro.Jf<17}constructor(){super(),this.Bp=Ro.Jf>=11,this.Up=Ro.qf&&!(Ro.Ka&&Ro.Jf<10)}};r(),il();var Pf,zf=class extends Xa{get Cp(){return!Ro.Pd||(Ro.yf?92!==Ro.Sf:Ro.mf>=100)}};r(),r(),r(),r(),r(),il();var Bf=function(){const t=Kd();if(!t)return!1;const i=t.muted;return t.muted=!i,t.muted!==i}(),Uf=function(){if(Ro.Kd)return!1;const t=Kd();if(!t)return!1;const i=t.volume;return t.volume=i/2+.1,i!==t.volume}();var Ua=class extends Cf{pp(){return this.Fp.wp}get Lp(){return this.Fp.Lp}get Cp(){return this.Fp.Cp}Pp(t,i){return this.Fp.Pp(t,i)}zp(t){return this.Fp.zp(t)}get Rp(){return this.Fp.Rp}constructor(t){super(),this.Fp=t,this.Bp=this.Fp.Bp,this.Je=this.Fp.Je,this.Up=Bf&&this.Fp.Up}};il();var So,Qf,Ff,gi,Yf,Vf,Gf=class extends Ua{get xp(){return Ro.Ka}constructor(t){super(t),this.Bp=!0,this.Qs=!0}};r(),r();var wc=class{Yp(){return new this.Vp}Gp(t){return this.Vp.isTypeSupported(t)}constructor(t){this.Vp=qh(t)}};function qh(t){return t&&Od(gi.ManagedMediaSource)?gi.ManagedMediaSource:Od(gi.MediaSource)?gi.MediaSource:void 0}var Wf=class extends Gf{get xp(){return!0}pp(){return qh(!0)?super.pp():1}};r(),il();var Zf=class extends Ua{get Tp(){return Ro.Df<3}get Sp(){return Ro.Df>=3}get yp(){return s.tizen&&!this.Wp&&s.tizen.systeminfo.getPropertyValue("DISPLAY",(t=>{const i=t.resolutionWidth,e=t.resolutionHeight;1===i&&1===e||(this.Wp={width:i,height:e})})),this.Wp}get jp(){return Ro.Df<3}Pp(t,i){return super.Pp(t,i)}};r();var Hf=class extends Ua{get yp(){return s.webOS&&!this.Wp&&s.webOS.deviceInfo((t=>{this.Wp={width:t.screenWidth,height:t.screenHeight}})),this.Wp}get Ep(){return!1}};r();var Xf=class extends Ua{get xp(){return!0}};!function(t){Pf=t}(function(){const t=function(){if(Ro.Wf)return new jf;if(Ro.zf||Ro.Uf)return new Of;if(Ro.qf)return new Rf;if(Ro.vf)return new zf;return new Xa}();return Ro.Ka?new Wf(t):Ro.Qs?new Gf(t):Ro.Nf?new Zf(t):Ro.kf?new Hf(t):Ro.Od?new Xf(t):new Ua(t)}()),r(),Qi(),r(),r(),il(),ds();var qf=!(Ro.Uf&&!Ro.Ff),Ye=self.console;function Kf(t){if(_o(t))try{return JSON.stringify(t)}catch(t){}return t}function Jf(t){return t.map(Kf).join(" ")}function $f(t){const i=Ye&&Ye[t];return i?i.bind&&qf?i.bind(Ye):function(){for(var i=arguments.length,e=new Array(i),s=0;s<i;s++)e[s]=arguments[s];Ye[t](Jf(e))}:void 0}var tg=$f("log")||ya,Bi=$f("warn")||tg.bind(void 0,"WARNING:"),Gr=$f("error")||tg.bind(void 0,"ERROR:"),ig=(()=>{const t=Ye&&Ye.assert;return t?t.bind&&qf?t.bind(Ye):function(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];Ye.assert(t,Jf(e))}:function(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];t||Gr("Assertion failed:",...e)}})();function eg(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),_.defineProperty(t,s.key,s)}}function sg(t,i){var e=function(t,i){var e=t.length;if(e<=1)return t;for(var s=new Array(e),n=1;n<e;n*=2){ng(t,i,n,s);var r=t;t=s,s=r}return t}(t,i);return e!==t&&ng(e,null,t.length,t),t}function ng(t,i,e,s){var n,r,o,h,a,u=t.length,c=0,l=2*e;for(n=0;n<u;n+=l)for(o=(r=n+e)+e,r>u&&(r=u),o>u&&(o=u),h=n,a=r;;)if(h<r&&a<o)i(t[h],t[a])<=0?s[c++]=t[h++]:s[c++]=t[a++];else if(h<r)s[c++]=t[h++];else{if(!(a<o))break;s[c++]=t[a++]}}r();var rg=/[a-zA-Z]/,og=/[0-9]/,hg=/[0-9a-fA-F]/,ag=/^0x/i,ug=/^[0-9]+$/,cg=/^[0-9a-fA-F]+$/,lg=/^[0-7]+$/,dg=_.prototype.toString,fg=Array.isArray||function(t){return"[object Array]"===dg.call(t)},gg=void 0!==Bo&&"symbol"==typeof f;function _g(t){return fg(t)?t:Array.from(t)}function vg(t,i,e){var s=t[i];t[i]=t[e],t[e]=s}function wg(t){return t>=65&&t<=90}function mg(t){return wg(t)||function(t){return t>=97&&t<=122}(t)}function pg(t){return t>=48&&t<=57}function Ag(t){return pg(t)||mg(t)}function yg(t){return pg(t)||t>=65&&t<=70||t>=97&&t<=102}function bg(t){return wg(t)?t+32:t}function Mg(t){return pg(t)?t-48:t>=65&&t<=70?t-65+10:t>=97&&t<=102?t-97+10:-1}function Tg(t,i){return void 0===i&&(i=!1),0<=t&&t<=9?t+48:10<=t&&t<=15?t+(i?87:55):-1}var Sg=x.min,Ng=String.fromCharCode,Ig=16384;function Dg(t){for(var i=t.length,e=[],s=0;s<i;s+=Ig){var n=Sg(s+Ig,i);e.push(Ng.apply(null,t.slice(s,n)))}return e.join("")}var Eg=2147483647,kg=/[^\0-\x7E]/,xg=/[\x2E\u3002\uFF0E\uFF61]/g,Lg={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Cg=x.floor,jg=String.fromCharCode;function Og(t){throw new RangeError(Lg[t])}function Rg(t){for(var i=[],e=0,s=t.length;e<s;){var n=t.charCodeAt(e++);if(n>=55296&&n<=56319&&e<s){var r=t.charCodeAt(e++);56320==(64512&r)?i.push(((1023&n)<<10)+(1023&r)+65536):(i.push(n),e--)}else i.push(n)}return i}var Pg,zg,Bg,Ug=function(t,i){return t+22+75*(t<26)-((0!=i)<<5)},Qg=function(t,i,e){var s=0;for(t=e?Cg(t/700):t>>1,t+=Cg(t/i);t>455;s+=36)t=Cg(t/35);return Cg(s+36*t/(t+38))},Fg=function(t){return function(t,i){var e=t.split("@"),s="";e.length>1&&(s=e[0]+"@",t=e[1]);var n=function(t,i){for(var e=[],s=t.length;s--;)e[s]=i(t[s]);return e}((t=t.replace(xg,".")).split("."),i).join(".");return s+n}(t,(function(t){return kg.test(t)?"xn--"+function(t){for(var i=[],e=(t=Rg(t)).length,s=128,n=0,r=72,o=0,h=t;o<h.length;o++){var a=h[o];a<128&&i.push(jg(a))}var u=i.length,c=u;for(u&&i.push("-");c<e;){for(var l=Eg,d=0,f=t;d<f.length;d++){var g=f[d];g>=s&&g<l&&(l=g)}var _=c+1;l-s>Cg((Eg-n)/_)&&Og("overflow"),n+=(l-s)*_,s=l;for(var v=0,w=t;v<w.length;v++){var m=w[v];if(m<s&&++n>Eg&&Og("overflow"),m==s){for(var p=n,A=36;;A+=36){var y=A<=r?1:A>=r+26?26:A-r;if(p<y)break;var b=p-y,M=36-y;i.push(jg(Ug(y+b%M,0))),p=Cg(b/M)}i.push(jg(Ug(p,0))),r=Qg(n,_,c==u),n=0,++c}}++n,++s}return i.join("")}(t):t}))};function Yg(t){for(var i=[],e=0;e<t.length;e++){var s=t[e];s>65535&&(s-=65536,i.push(s>>>10&1023|55296),s=56320|1023&s),i.push(s)}return Dg(i)}function Vg(t){if(t>=55296&&t<=57343)throw new b("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value")}function Gg(t,i){return t>>i&63|128}function Wg(t,i){0!=(4294967168&t)?(0==(4294965248&t)?i.push(t>>6&31|192):0==(4294901760&t)?(Vg(t),i.push(t>>12&15|224),i.push(Gg(t,6))):0==(4292870144&t)&&(i.push(t>>18&7|240),i.push(Gg(t,12)),i.push(Gg(t,6))),i.push(63&t|128)):i.push(t)}function Zg(t){for(var i=[],e=0;e<t.length;e++){Wg(t[e],i)}return i}function Hg(){if(Bg>=zg)throw new b("Invalid byte index");var t=255&Pg[Bg];if(Bg++,128==(192&t))return 63&t;throw new b("Invalid continuation byte")}function Xg(){var t,i;if(Bg>zg)throw new b("Invalid byte index");if(Bg===zg)return!1;if(t=255&Pg[Bg],Bg++,0==(128&t))return t;if(192==(224&t)){if((i=(31&t)<<6|Hg())>=128)return i;throw new b("Invalid continuation byte")}if(224==(240&t)){if((i=(15&t)<<12|Hg()<<6|Hg())>=2048)return Vg(i),i;throw new b("Invalid continuation byte")}if(240==(248&t)&&(i=(7&t)<<18|Hg()<<12|Hg()<<6|Hg())>=65536&&i<=1114111)return i;throw new b("Invalid UTF-8 detected")}function qg(t){return[37,Tg(t>>4),Tg(15&t)]}function Kg(t){return function(t){return t>=0&&t<=31}(t)||t>126}function Jg(t){return Kg(t)||32===t||34===t||60===t||62===t||96===t}function $g(t){return Jg(t)||35===t||63===t||123===t||125===t}function t_(t){return $g(t)||47===t||58===t||59===t||61===t||64===t||t>=91&&t<=94||124===t}function i_(t){return t<33||t>126||34===t||35===t||60===t||62===t}function e_(t){return i_(t)||39===t}function s_(t,i){if(!i(t))return[t];for(var e=Zg([t]),s=[],n=0;n<e.length;n++){var r=e[n];s.push.apply(s,qg(r))}return s}function n_(t,i){for(var e=[],s=0,n=Rg(t);s<n.length;s++){var r=n[s];e.push.apply(e,s_(r,i))}return Yg(e)}function r_(t){return function(t){for(var i=[],e=t.length,s=0;s<e;s++){var n=t[s];if(37===n&&s+2<e&&yg(t[s+1])&&yg(t[s+2])){var r=Mg(t[s+1])<<4|Mg(t[s+2]);i.push(r),s+=2}else i.push(n)}return i}(Zg(t))}function o_(t){return Yg(function(t){Pg=t.slice(),zg=Pg.length,Bg=0;for(var i,e=[];!1!==(i=Xg());)e.push(i);return e}(r_(Rg(t))))}function h_(t){var i=t.length,e=[0,0,0,0,0,0,0,0],s=0,n=null,r=0;if(r<i&&":"===t[r]){if(!(r+1<i&&":"===t[r+1]))throw new k;r+=2,n=s+=1}for(;r<i;){if(8===s)throw new k("Too many groups");if(":"!==t[r]){for(var o=0,h=0;h<4&&r<i&&hg.test(t[r]);)o=o<<4|C(t[r],16),r+=1,h+=1;if("."===t[r]){if(0===h)throw new k;if(r-=h,s>6)throw new k;for(var a=0;r<i;){var u=null;if(a>0){if(!("."===t[r]&&a<4))throw new k;r+=1}if(!og.test(t[r]))throw new k;for(;r<i&&og.test(t[r]);){var c=C(t[r],10);if(null===u)u=c;else{if(0===u)throw new k;if((u=10*u+c)>255)throw new k}r+=1}e[s]=e[s]<<8|u,2!==(a+=1)&&4!==a||(s+=1)}if(4!==a)throw new k;break}if(":"===t[r]){if((r+=1)===i)throw new k}else if(r<i)throw new k;e[s]=o,s+=1}else{if(null!==n)throw new k("Too many :: groups");r+=1,n=s+=1}}if(null!==n){var l=s-n;for(s=7;0!==s&&l>0;)vg(e,s,n+l-1),s-=1,l-=1}else if(8!==s)throw new k;return e}function a_(t){var i=10,e=ug;return ag.test(t)?(t=t.slice(2),i=16,e=cg):t.length>=2&&"0"===t[0]&&(t=t.slice(1),i=8,e=lg),""===t?0:e.test(t)?C(t,i):void 0}var De={Zp:4},u_=/[\0\t\n\r #%/:?@\[\\\]]/,c_=/[\0\t\n\r #/:?@\[\\\]]/;function l_(t,i){if("["===t[0]){if("]"!==t[t.length-1])throw new k("Invalid IPv6 address");return{Zp:2,Hp:h_(t.slice(1,-1))}}if(!i)return function(t){if(c_.test(t))throw new k("Invalid code point in opaque host");var i=n_(t,Kg);return""===i?De:{Zp:3,Xp:i}}(t);var e=function(t){var i=function(t){return Fg(t.toLowerCase())}(t);return i}(o_(t));if(u_.test(e))throw new k("Invalid code point in host");var s=function(t){var i=t.split(".");if(""===i[i.length-1]&&i.pop(),!(i.length>4)){for(var e=[],s=0;s<i.length;s++){var n=i[s];if(""===n)return;var r=a_(n);if(void 0===r)return;e.push(r)}for(var o=0;o<e.length-1;o++)if(e[o]>255)throw new k;if(e[e.length-1]>=x.pow(256,5-e.length))throw new k;for(var h=e.pop(),a=0;a<e.length;a++)h+=e[a]*x.pow(256,3-a);return h}}(e);return void 0!==s?{Zp:1,Hp:s}:""===e?De:{Zp:0,qp:e}}function d_(t){switch(t.Zp){case 0:return t.qp;case 1:return function(t){for(var i=[],e=t,s=1;s<=4;s++)i.push(""+(255&e)),4!==s&&i.push("."),e>>>=8;return i.reverse().join("")}(t.Hp);case 2:return"["+function(t){for(var i="",e=function(t){for(var i=0,e=0,s=0,n=0,r=0;r<8;r++)0===t[r]?(0===n&&(s=r),n++):(n>e&&(i=s,e=n),n=0);return n>e&&(i=s,e=n),e>1?i:null}(t),s=!1,n=0;n<8;n++){if(s){if(0===t[n])continue;s=!1}e!==n?(i+=t[n].toString(16),7!==n&&(i+=":")):(i+=0===n?"::":":",s=!0)}return i}(t.Hp)+"]";case 3:return t.Xp;case 4:return""}}var f_=/\+/g;function g_(t){return 42===t||45===t||46===t||95===t||Ag(t)}function __(t){for(var i=t.split("&"),e=[],s=0;s<i.length;s++){var n=i[s];if(""!==n){var r=n.indexOf("="),o=void 0,h=void 0;-1!==r?(o=n.slice(0,r),h=n.slice(r+1)):(o=n,h=""),o=o.replace(f_," "),h=h.replace(f_," ");var a=o_(o),u=o_(h);e.push([a,u])}}return e}function v_(t){for(var i="",e=0;e<t.length;e++){var s=t[e];e>0&&(i+="&"),i+=w_(Zg(Rg(s[0])))+"="+w_(Zg(Rg(s[1])))}return i}function w_(t){for(var i=[],e=0;e<t.length;e++){var s=t[e];32===s?i.push(43):g_(s)?i.push(s):i.push.apply(i,qg(s))}return Dg(i)}var m_=/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/;function p_(t){var i=""+t,e=m_.exec(i);return e?function(t,i){for(var e=t.length,s=[],n=i;n<e;n++){var r=t.charCodeAt(n);if(y_(r))if(b_(r)||n===e-1)s.push(A_);else{var o=t.charCodeAt(n+1);b_(o)?(s.push(r,o),n++):s.push(A_)}else s.push(r)}return t.slice(0,i)+Dg(s)}(i,e.index):i}var A_=65533,y_=function(t){return 55296==(63488&t)},b_=function(t){return 0!=(1024&t)};function M_(t,i){var e=t[0],s=i[0];return e===s?0:e<s?-1:1}function T_(t){t.Xv.length=0}function S_(t,i){!function(t,i){for(var e=0;e<i.length;e++)t[e]=i[e];t.length=i.length}(t.Xv,__(i))}function N_(t){if(t.Yu){var i=v_(t.Xv);""===i&&(i=null),t.Yu.Yu.Kp=i}}var I_=function(){function t(t){if(void 0===t&&(t=void 0),this.Yu=null,null==t)this.Xv=[];else if("object"==typeof t||"function"==typeof t)if(function(t){return t instanceof I_&&!!fg(t.Xv)&&(!gg||t[f]===D_)}(t))this.Xv=t.Xv.slice();else if(function(t){return null!=t&&(!!fg(t)||!!gg&&"function"==typeof t[f])}(t)){this.Xv=[];for(var i=0,e=_g(t);i<e.length;i++){var s=_g(e[i]);if(2!==s.length)throw new k("Invalid name-value pair");this.Xv.push([p_(s[0]),p_(s[1])])}}else for(var n in this.Xv=[],t)_.prototype.hasOwnProperty.call(t,n)&&this.Xv.push([p_(n),p_(t[n])]);else(t=p_(t)).length>0&&"?"===t[0]&&(t=t.slice(1)),this.Xv=__(t)}var i=t.prototype;return i.append=function(t,i){t=p_(t),i=p_(i),this.Xv.push([t,i]),N_(this)},i.delete=function(t){t=p_(t);for(var i=this.Xv,e=0;e<i.length;){i[e][0]===t?i.splice(e,1):e++}N_(this)},i.get=function(t){t=p_(t);for(var i=this.Xv,e=0;e<i.length;e++){var s=i[e];if(s[0]===t)return s[1]}return null},i.getAll=function(t){t=p_(t);for(var i=this.Xv,e=[],s=0;s<i.length;s++){var n=i[s];n[0]===t&&e.push(n[1])}return e},i.has=function(t){t=p_(t);for(var i=this.Xv,e=0;e<i.length;e++){if(i[e][0]===t)return!0}return!1},i.set=function(t,i){t=p_(t),i=p_(i);for(var e=this.Xv,s=!1,n=0;n<e.length;){var r=e[n];r[0]===t?s?e.splice(n,1):(r[1]=i,s=!0,n++):n++}s||e.push([t,i]),N_(this)},i.sort=function(){sg(this.Xv,M_),N_(this)},i.toString=function(){return v_(this.Xv)},i.entries=function(){return new L_(this.Xv,E_)},i.keys=function(){return new L_(this.Xv,k_)},i.values=function(){return new L_(this.Xv,x_)},i.forEach=function(t){var i=this;this.Xv.forEach((function(e){return t(e[1],e[0],i)}))},t}(),D_=I_.prototype.entries;gg&&(I_.prototype[f]=D_);var E_=function(t){return[t[0],t[1]]},k_=function(t){return t[0]},x_=function(t){return t[1]},L_=function(){function t(t,i){this.Jp=0,this.Xv=t,this.$p=i}return t.prototype.next=function(){return this.Jp<this.Xv.length?{done:!1,value:this.$p(this.Xv[this.Jp++])}:{done:!0,value:void 0}},t}(),C_="null";var j_=_.create(null);j_.ftp=21,j_.file=0,j_.gopher=70,j_.http=80,j_.https=443,j_.ws=80,j_.wss=443;var O_=/^(?:\.|%2e)$/i,R_=/^(?:\.|%2e){2}$/i;function P_(t){return O_.test(t)}function z_(t){return R_.test(t)}function B_(t){return void 0!==j_[t]}function Ot(t){return B_(t.tA)}function U_(t){return""!==t.iA||""!==t.eA}function Q_(t){var i=t.length;if(!(i>=2))return!1;if(!Y_(t.slice(0,2)))return!1;if(2!==i){var e=t[2];if(47!==e&&92!==e&&63!==e&&35!==e)return!1}return!0}function F_(t){return 2===t.length&&rg.test(t[0])&&(":"===t[1]||"|"===t[1])}function Y_(t){return 2===t.length&&F_(Dg(t))}function V_(t){return F_(t)&&":"===t[1]}function G_(t){var i=t.sA;0!==i.length&&("file"===t.tA&&1===i.length&&V_(i[0])||i.pop())}function W_(t){return null===t.nA||De===t.nA||t.rA||"file"===t.tA}var Z_=-1,H_=/\t|\n|\r/g,X_=/^[\x00-\x1f ]+|[\x00-\x1f ]+$/g;function q_(t,i,e,s){void 0===e&&(e=null),void 0===s&&(s=null),e||(e=new J_,t=t.replace(X_,""));var n=null!==s?s:0;i=i||null;for(var r=[],o=!1,h=!1,a=!1,u=Rg(t=t.replace(H_,"")),c=u.length,l=0;l<=c;){var d=l<c?u[l]:Z_;switch(n){case 0:if(!mg(d)){if(null===s){r.length=0,n=2;continue}throw new k("Invalid scheme")}r.push(bg(d)),n=1;break;case 1:if(Ag(d)||43===d||45===d||46===d)r.push(bg(d));else{if(58!==d){if(null===s){r.length=0,n=2,l=0;continue}throw new k("Invalid scheme")}var f=Yg(r);if(null!==s){if(B_(e.tA)&&!B_(f))return;if(!B_(e.tA)&&B_(f))return;if((U_(e)||null!==e.oA)&&"file"===f)return;if("file"===e.tA&&(e.nA===De||null===e.nA))return}if(e.tA=f,null!==s)return void(Ot(e)&&e.oA===j_[e.tA]&&(e.oA=null));r.length=0,"file"===e.tA?n=13:Ot(e)&&i&&i.tA===e.tA?n=3:Ot(e)?n=7:47===u[l+1]?(n=4,l+=1):(e.rA=!0,e.sA.push(""),n=18)}break;case 2:if(!i||i.rA&&35!==d)throw new k("Invalid scheme");i.rA&&35===d?(e.tA=i.tA,e.sA=i.sA.slice(),e.Kp=i.Kp,e.hA="",e.rA=!0,n=20):"file"!==i.tA?(n=5,l-=1):(n=13,l-=1);break;case 3:47===d&&47===u[l+1]?n=8:(n=5,l-=1);break;case 4:47===d?n=9:(n=17,l-=1);break;case 5:e.tA=i.tA,Z_===d?(e.iA=i.iA,e.eA=i.eA,e.nA=i.nA,e.oA=i.oA,e.sA=i.sA.slice(),e.Kp=i.Kp):47===d?n=6:63===d?(e.iA=i.iA,e.eA=i.eA,e.nA=i.nA,e.oA=i.oA,e.sA=i.sA.slice(),e.Kp="",n=19):35===d?(e.iA=i.iA,e.eA=i.eA,e.nA=i.nA,e.oA=i.oA,e.sA=i.sA.slice(),e.Kp=i.Kp,e.hA="",n=20):92===d&&Ot(e)?n=6:(e.iA=i.iA,e.eA=i.eA,e.nA=i.nA,e.oA=i.oA,e.sA=i.sA.slice(),e.sA.pop(),n=17,l-=1);break;case 6:!Ot(e)||47!==d&&92!==d?47===d?n=9:(e.iA=i.iA,e.eA=i.eA,e.nA=i.nA,e.oA=i.oA,n=17,l-=1):n=8;break;case 7:if(47!==d||47!==u[l+1]){n=8;continue}n=8,l+=1;break;case 8:47!==d&&92!==d&&(n=9,l-=1);break;case 9:if(64===d){o&&r.unshift(37,52,48),o=!0;for(var g=0;g<r.length;g++){var _=r[g];if(58!==_||a){var v=Yg(s_(_,t_));a?e.eA+=v:e.iA+=v}else a=!0}r.length=0}else if(Z_===d||47===d||63===d||35===d||Ot(e)&&92===d){if(o&&0===r.length)throw new k("Invalid host");l-=r.length+1,r.length=0,n=10}else r.push(d);break;case 10:case 11:if(null!==s&&"file"===e.tA)l-=1,n=15;else if(58!==d||h)if(Z_===d||47===d||63===d||35===d||Ot(e)&&92===d){if(l-=1,Ot(e)&&0===r.length)throw new k("Invalid host");if(null!==s&&0===r.length&&(U_(e)||null!==e.oA))return;var w=l_(Yg(r),Ot(e));if(e.nA=w,r.length=0,n=16,null!==s)return}else 91===d?h=!0:93===d&&(h=!1),r.push(d);else{if(0===r.length)throw new k("Invalid host");var m=l_(Yg(r),Ot(e));if(e.nA=m,r.length=0,n=12,11===s)return}break;case 12:if(pg(d))r.push(d);else{if(!(Z_===d||47===d||63===d||35===d||Ot(e)&&92===d||null!==s))throw new k("Invalid port");if(0!==r.length){var p=C(Yg(r),10);if(p>65535)throw new k("Invalid port");e.oA=p===j_[e.tA]?null:p,r.length=0}if(null!==s)return;n=16,l-=1}break;case 13:e.tA="file",47===d||92===d?n=14:i&&"file"===i.tA?Z_===d?(e.nA=i.nA,e.sA=i.sA.slice(),e.Kp=i.Kp):63===d?(e.nA=i.nA,e.sA=i.sA.slice(),e.Kp="",n=19):35===d?(e.nA=i.nA,e.sA=i.sA.slice(),e.Kp=i.Kp,e.hA="",n=20):(Q_(u.slice(l))||(e.nA=i.nA,e.sA=i.sA.slice(),G_(e)),n=17,l-=1):(n=17,l-=1);break;case 14:47===d||92===d?n=15:(i&&"file"===i.tA&&!Q_(u.slice(l))&&(V_(i.sA[0])?e.sA.push(i.sA[0]):e.nA=i.nA),n=17,l-=1);break;case 15:if(Z_===d||47===d||92===d||63===d||35===d)if(l-=1,null===s&&Y_(r))n=17;else if(0===r.length){if(e.nA=De,null!==s)return;n=16}else{var A=l_(Yg(r),Ot(e));if(0===A.Zp&&"localhost"===A.qp&&(A=De),e.nA=A,null!==s)return;r.length=0,n=16}else r.push(d);break;case 16:Ot(e)?(n=17,47!==d&&92!==d&&(l-=1)):null===s&&63===d?(e.Kp="",n=19):null===s&&35===d?(e.hA="",n=20):Z_!==d&&(n=17,47!==d&&(l-=1));break;case 17:if(Z_===d||47===d||Ot(e)&&92===d||null===s&&(63===d||35===d)){var y=Yg(r);if(z_(y)?(G_(e),47===d||Ot(e)&&92===d||e.sA.push("")):!P_(y)||47===d||Ot(e)&&92===d?P_(y)||("file"===e.tA&&0===e.sA.length&&Y_(r)&&(De!==e.nA&&null!==e.nA&&(e.nA=De),r[1]=58,y=Yg(r)),e.sA.push(y)):e.sA.push(""),r.length=0,"file"===e.tA&&(Z_===d||63===d||35===d))for(;e.sA.length>1&&""===e.sA[0];)e.sA.shift();63===d?(e.Kp="",n=19):35===d&&(e.hA="",n=20)}else r.push.apply(r,s_(d,$g));break;case 18:63===d?(e.Kp="",n=19):35===d?(e.hA="",n=20):Z_!==d&&(e.sA[0]+=Yg(s_(d,Kg)));break;case 19:null===s&&35===d?(e.hA="",n=20):Z_!==d&&(e.Kp+=Yg(s_(d,Ot(e)?e_:i_)));break;case 20:Z_===d||0===d||(e.hA+=Yg(s_(d,Jg)))}l++}return e}function K_(t,i,e,s){try{q_(t,i,e,s)}catch(t){}}var J_=function(){this.tA="",this.iA="",this.eA="",this.nA=null,this.oA=null,this.sA=[],this.Kp=null,this.hA=null,this.rA=!1};function $_(t){switch(t.tA){case"blob":var i;try{i=q_(t.sA[0],null)}catch(t){return C_}return $_(i);case"ftp":case"gopher":case"http":case"https":case"ws":case"wss":return function(t,i,e){return t+"://"+d_(i)+(null===e?"":":"+e)}(t.tA,t.nA,t.oA);default:return C_}}var iv=function(){function t(t,i){var e,s=null;if(null!=i)if(function(t){return null!=t&&t instanceof iv&&"object"==typeof t.Yu}(i))s=i.Yu;else try{s=q_(String(i),null)}catch(t){throw new k("Invalid base URL: "+t.message)}try{e=q_(String(t),s)}catch(t){throw new k("Invalid URL: "+t.message)}var n=e.Kp;this.Yu=e,this.Kp=function(t){var i=new I_;return null!==t&&S_(i,t),i}(n),this.Kp.Yu=this}var i=t.prototype;return i.toString=function(){return this.href},i.toJSON=function(){return this.href},function(t,i,e){i&&eg(t.prototype,i),e&&eg(t,e)}(t,[{key:"href",get:function(){return function(t,i){void 0===i&&(i=!1);var e=t.tA+":";if(null!==t.nA?(e+="//",U_(t)&&(e+=t.iA,""!==t.eA&&(e+=":"+t.eA),e+="@"),e+=d_(t.nA),null!==t.oA&&(e+=":"+t.oA)):null===t.nA&&"file"===t.tA&&(e+="//"),t.rA)e+=t.sA[0];else for(var s=0,n=t.sA;s<n.length;s++)e+="/"+n[s];return null!==t.Kp&&(e+="?"+t.Kp),i||null===t.hA||(e+="#"+t.hA),e}(this.Yu)},set:function(t){var i;try{i=q_(String(t),null)}catch(t){throw new k("Invalid URL: "+t.message)}this.Yu=i,T_(this.Kp);var e=this.Yu.Kp;null!==e&&S_(this.Kp,e)}},{key:"origin",get:function(){return $_(this.Yu)}},{key:"protocol",get:function(){return this.Yu.tA+":"},set:function(t){K_(t+":",null,this.Yu,0)}},{key:"username",get:function(){return this.Yu.iA},set:function(t){W_(this.Yu)||(this.Yu.iA=n_(t,t_))}},{key:"password",get:function(){return this.Yu.eA},set:function(t){W_(this.Yu)||(this.Yu.eA=n_(t,t_))}},{key:"host",get:function(){var t=this.Yu,i=t.nA;if(null===i)return"";var e=t.oA,s=d_(i);return null!==e&&(s+=":"+e),s},set:function(t){this.Yu.rA||K_(t,null,this.Yu,10)}},{key:"hostname",get:function(){var t=this.Yu.nA;return null===t?"":d_(t)},set:function(t){this.Yu.rA||K_(t,null,this.Yu,11)}},{key:"port",get:function(){var t=this.Yu.oA;return null===t?"":""+t},set:function(t){W_(this.Yu)||(""===t?this.Yu.oA=null:K_(t,null,this.Yu,12))}},{key:"pathname",get:function(){var t=this.Yu.sA;return this.Yu.rA?t[0]:0===t.length?"":"/"+t.join("/")},set:function(t){this.Yu.rA||(this.Yu.sA.length=0,K_(t,null,this.Yu,16))}},{key:"search",get:function(){var t=this.Yu.Kp;return null===t||""===t?"":"?"+t},set:function(t){t=p_(t);var i=this.Yu;if(""===t)return i.Kp=null,void T_(this.Kp);"?"===t[0]&&(t=t.slice(1)),i.Kp="",K_(t,null,i,19),S_(this.Kp,t)}},{key:"searchParams",get:function(){return this.Kp}},{key:"hash",get:function(){var t=this.Yu.hA;return null===t||""===t?"":"#"+t},set:function(t){""!==t?("#"===t[0]&&(t=t.slice(1)),this.Yu.hA="",K_(t,null,this.Yu,20)):this.Yu.hA=null}}]),t}();function ev(t){return t.document&&t.document.baseURI||t.location.href||""}function sv(){let t=gi,i=t.location.href;for(;t!==s.top;){t=t.parent;try{i=t.location.href}catch(t){}}return i}r();var nv=class{aA(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];tg(...i)}uA(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];Bi(...i)}cA(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];Gr(...i)}lA(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];ig(t,...e)}Pg(t,i){return u(t,i)}dA(t,i){return v(t,i)}Rg(t){c(t)}fA(t){m(t)}gA(){return this._A.gA()}vA(){return this._A.vA()}wA(){return this._A.wA()}mA(){return this._A.mA()}pA(){return this._A.pA()}AA(t,i){return this._A.AA(t,i)}yA(t){return this._A.yA(t)}get bA(){return this.MA}Ah(t,i){let e;return void 0===i&&(i=ev(gi)),e="object"!=typeof i||i instanceof iv?i:i.href,new iv(t,e)}TA(t,i){if(void 0===i&&(i=ev(gi)),this.SA){const e=Ic(i)?i:i.toString();return new self.URL(t,e).href}return this.Ah(t,i).href}get Ys(){return this.NA}get IA(){return{DA:Kl&&Kl.userAgent.match(/Android /i)?"Android":"other",EA:Boolean(Kl&&Kl.userAgent.match(/Android 8.0.0/i))}}get kA(){return self&&self.location&&"https:"===self.location.protocol}get xA(){return"languages"in Kl?Kl.languages.slice():[Kl.language]}constructor(){this.MA=new rv,this.NA=Pf,this.SA=ov(),self.performance&&self.performance.now?this.Og=()=>self.performance.now():this.Og=ja}},rv=class{get LA(){return Kl.oscpu}get Ys(){return Kl.platform}get CA(){return Kl.vendor}get jA(){return Kl.vendorSub}};function ov(){if(self.URL)try{const t=new self.URL("b","http://a");return t.pathname="c d","http://a/c%20d"===t.href}catch(t){}return!1}function Ei(){return Ei=_.assign||function(t){for(var i=1;i<arguments.length;i++){var e=arguments[i];for(var s in e)_.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},Ei.apply(this,arguments)}function hv(){const t=_.create(null);return t.OA=void 0,delete t.OA,t}function ll(){return new lv}function pc(){return new dv}function av(t){const i=ll();for(const e in t)no.call(t,e)&&i.set(e,t[e]);return i}function uv(t){const i=[];return t.forEach((t=>i.push(t))),i}r(),r(),r();var cv="undefined"!=typeof Map&&"entries"in Map.prototype?Map:void 0,lv=cv||function(){class t{next(){const t=this.index;return t<this.keys.length?(this.index++,{value:this.selector(this.data,this.keys[t]),done:!1}):{value:void 0,done:!0}}constructor(t,i){this.index=0,this.data=t,this.selector=i,this.keys=_.keys(t)}}return class{get(t){return this.data[t]}set(t,i){return this.has(t)||this.size++,this.data[t]=i,this}has(t){return t in this.data}delete(t){return!!this.has(t)&&(this.size--,delete this.data[t],!0)}clear(){this.data=hv(),this.size=0}keys(){return new t(this.data,((t,i)=>i))}values(){return new t(this.data,((t,i)=>t[i]))}entries(){return new t(this.data,((t,i)=>[i,t[i]]))}forEach(t){for(const i in this.data)t(this.data[i],i)}constructor(){this.data=hv(),this.size=0}}}();var dv=cv||function(){class t{next(){const t=this.RA.next();return t.done?t:{value:this.PA(t.value),done:!1}}constructor(t,i){this.RA=t,this.PA=i}}return class{get size(){return this.Hv.size}get(t){return this.Hv.get(""+t)}set(t,i){return this.Hv.set(""+t,i),this}has(t){return this.Hv.has(""+t)}delete(t){return this.Hv.delete(""+t)}clear(){this.Hv.clear()}keys(){return new t(this.Hv.keys(),(t=>Number(t)))}values(){return this.Hv.values()}entries(){return new t(this.Hv.entries(),(t=>{let[i,e]=t;return[Number(i),e]}))}forEach(t){this.Hv.forEach(((i,e)=>{t(i,Number(e))}))}constructor(){this.Hv=ll()}}}();il(),r(),r();var fv=function(t){return t.zA="9a04f079-9840-4286-ab92-e65be0885f95",t.BA="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",t.UA="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",t.QA="94ce86fb-07ff-4f43-adb8-93d2fa968ca2",t}({}),gv="urn:mpeg:dash:mp4protection:2011",bo="cenc",_v="sinf",vv="skd",wv="9a04f079-9840-4286-ab92-e65be0885f95",Wn="urn:uuid:"+wv,eo="com.microsoft.playready",mv="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",vu="urn:uuid:"+mv,pv="com.widevine.alpha",Av="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",yv="urn:uuid:"+Av,bv="94ce86fb-07ff-4f43-adb8-93d2fa968ca2",Ws="urn:uuid:"+bv,Mv="com.apple.fps.1_0",Tv="com.apple.streamingkeydelivery",Sv="identity";r();var Nv=function(t){return t.zA="playready",t.BA="widevine",t.QA="fairplay",t.UA="clearkey",t.FA="aes128",t}({}),Ga={YA:Nv.zA,VA:eo,GA:"cenc",WA:wv,ZA:Wn,HA:"PlayReady"},Iv={YA:Nv.BA,VA:pv,GA:"cenc",WA:mv,ZA:vu,HA:"Widevine"},Dv={YA:Nv.QA,VA:Mv,GA:"skd",WA:bv,ZA:Ws,HA:"FairPlay"},Ev={YA:Nv.QA,VA:"com.apple.fps",GA:"sinf",WA:bv,ZA:Ws,HA:"FairPlay"},kl={YA:Nv.UA,VA:"org.w3.clearkey",GA:"cenc",WA:Av,ZA:yv,HA:"ClearKey"},kv=[Ga,Iv,Dv,kl],xv=[Ga,Iv,Ev,kl];function Lv(t){return kv.filter((i=>i.ZA===t.toLowerCase()))}r();var sr="function"==typeof String.prototype.replaceAll?(t,i,e)=>t.replaceAll(i,e):(t,i,e)=>t.split(i).join(e);function _t(t,i){return $t(t)&&-1!==t.indexOf(i)}var Et="function"==typeof String.prototype.startsWith?(t,i)=>$t(t)&&t.startsWith(i):(t,i)=>$t(t)&&t.substr(0,i.length)===i,rl="function"==typeof String.prototype.endsWith?(t,i)=>$t(t)&&t.endsWith(i):(t,i)=>$t(t)&&t.substr(t.length-i.length,i.length)===i;function Cv(t,i){return t.length===i.length&&t.toUpperCase()===i.toUpperCase()}var jv="function"==typeof String.prototype.repeat?(t,i)=>t.repeat(i):(t,i)=>{let e=0|i;if(0===t.length||0===e)return"";let s=t,n="";for(;1==(1&e)&&(n+=s),e>>>=1,0!==e;)s+=s;return n},Pc="function"==typeof String.prototype.padStart?(t,i,e)=>(void 0===e&&(e=" "),t.padStart(i,e)):(t,i,e)=>{void 0===e&&(e=" ");let s=e;const n=(0|i)-t.length;return n<=0?t:(n>s.length&&(s+=jv(s,n/s.length)),s.slice(0,n)+t)},Ov=(String.prototype.padEnd,16384),Rv="function"==typeof String.fromCodePoint?t=>t.length<=Ov?String.fromCodePoint(...t):zv(t,String.fromCodePoint):t=>{const i=[];for(let e of t)e>65535&&(e-=65536,i.push(e>>>10&1023|55296),e=56320|1023&e),i.push(e);return Pv(i)};function Pv(t){return t.length<=Ov?String.fromCharCode(...t):zv(t,String.fromCharCode)}function zv(t,i){const e=[];for(let s=0;s<t.length;s+=Ov)e.push(i(...t.slice(s,s+Ov)));return e.join("")}function Bv(t){return t.replace(/[\\"]/g,(t=>"\\"+t))}var Uv=Ro.vf&&Ro.mf>=42||Ro.Wf&&Ro.Hf>=38||Ro.zf||Ro.Ff||Ro.eg&&Ro.og>=29;function Qv(t,i){return _t(t,"audio")?{initDataTypes:["cenc"],audioCapabilities:[Ei({contentType:t},i?{robustness:"SW_SECURE_CRYPTO"}:{})]}:{initDataTypes:["cenc"],videoCapabilities:[Ei({contentType:t},i?{robustness:"SW_SECURE_CRYPTO"}:{})]}}function Fv(){return void 0!==Kl&&"function"==typeof Kl.requestMediaKeySystemAccess}function Yv(){return"undefined"!=typeof HTMLMediaElement&&void 0!==HTMLMediaElement.prototype.webkitGenerateKeyRequest&&void 0!==HTMLMediaElement.prototype.webkitAddKey&&void 0!==HTMLMediaElement.prototype.webkitCancelKeyRequest}var Vv=class{pA(){return this.yA(Iv)}vA(){return this.yA(kl)}mA(){return this.yA(Ga)}wA(){return this.yA(Dv)}yA(t){const i=t.ZA,e=this.XA.get(i);if(e)return e;const s=this.AA(t,'video/mp4; codecs="avc1.42000a"');return this.XA.set(i,s),s}async AA(t,i){try{return await this.KA.qA(t.VA,[Qv(i,!0)]),!0}catch(e){try{return await this.KA.qA(t.VA,[Qv(i,!1)]),!0}catch(t){return!1}}}gA(){return this.JA||(this.JA=this.$A()),this.JA}async $A(){return"https:"!==Yf.protocol&&(!!Uv&&!await this.vA())}constructor(t){this.XA=ll(),this.JA=void 0,this.KA=t}};function zs(t,i){return Wv(t.slice(),i)}function Gv(t,i){const e=Wv(t,i);return e!==t&&Zv(e,void 0,t.length,t),t}function Wv(t,i){let e=t;const s=e.length;if(s<=1)return e;let n=new Array(s);for(let t=1;t<s;t*=2){Zv(e,i,t,n);const s=e;e=n,n=s}return e}function Zv(t,i,e,s){const n=t.length;let r=0;const o=2*e;let h,a,u,c,l;for(a=0;a<n;a+=o)for(u=a+e,h=u+e,u>n&&(u=n),h>n&&(h=n),c=a,l=u;;)if(c<u&&l<h)i&&i(t[c],t[l])<=0?s[r++]=t[c++]:s[r++]=t[l++];else if(c<u)s[r++]=t[c++];else{if(!(l<h))break;s[r++]=t[l++]}}r(),r(),r(),r(),r(),r(),r(),r(),r();var $n=function(t){return t[t.Zr=0]="Zr",t[t.iy=1]="iy",t[t.ey=-1]="ey",t}({}),jl=(t,i)=>(0|t)-(0|i),To=(t,i)=>t===i?0:t<i?-1:t>i?1:j(t)?j(i)?0:1:-1;function Hv(t,i,e){return ce(t,i,e)?0:To(t,i)}var Xv=(t,i)=>wo(t,i)?0:To(t,i);var qv="function"==typeof Array.prototype.find?(t,i)=>t.find(i):(t,i)=>{const e=Jv(t,i);return-1===e?void 0:t[e]},dl=qv,Kv="function"==typeof Array.prototype.findLast?(t,i)=>t.findLast(i):(t,i)=>{const e=$v(t,i);return-1===e?void 0:t[e]},No=Kv,Jv="function"==typeof Array.prototype.findIndex?(t,i)=>t.findIndex(i):(t,i)=>{for(let e=0;e<t.length;e+=1){if(i(t[e],e,t))return e}return-1},$v="function"==typeof Array.prototype.findLastIndex?(t,i)=>t.findLastIndex(i):(t,i)=>{for(let e=t.length-1;e>=0;e-=1){if(i(t[e],e,t))return e}return-1};function ra(t,i){const e=t.indexOf(i);return-1!==e&&(Mn(t,e),!0)}function Mn(t,i){0===i?t.shift():t.splice(i,1)}function tw(t,i){const e=new Array(t.length);let s=0,n=0;for(;n<t.length;){if(t[n]===i){n++,e.length-=1;break}e[s++]=t[n++]}for(;n<t.length;)e[s++]=t[n++];return e}function Qa(t,i){return-1!==t.indexOf(i)}function iw(t,i,e){if(t===i)return!0;if(t.length!==i.length)return!1;for(let s=0;s<t.length;s+=1)if(!e(t[s],i[s]))return!1;return!0}function nt(t){t.length=0}function ew(t,i){if(t.length!==i.length)return!1;for(const e of t)if(!Qa(i,e))return!1;return!0}Array.prototype.flat;var Ms="function"==typeof Array.prototype.flatMap?(t,i)=>t.flatMap(i):(t,i)=>{const e=[];for(let s=0;s<t.length;s++)e.push(...i(t[s],s));return e};function sw(t,i){return rw(t,((t,e)=>To(i(t),i(e))))}function nw(t,i){return ow(t,((t,e)=>To(i(t),i(e))))}function rw(t,i){if(0!==t.length)return t.reduce(((t,e)=>i(t,e)<=0?t:e))}function ow(t,i){return rw(t,((t,e)=>i(e,t)))}function hw(t){return t.filter(((i,e)=>t.indexOf(i)===e))}function aw(t,i){return Promise.all(t.map(i)).then((i=>t.filter(((t,e)=>i[e]))))}function uw(t,i,e){if(t.length!==i.length)return!1;for(let s=0;s<t.length;s++)if(!e(t[s],i[s]))return!1;return!0}function Ne(t,i,e){if(null!=i){if("object"!=typeof i&&"function"!=typeof i)throw new k("Object expected.");var s,n;if(e){if(!Pt)throw new k("Symbol.asyncDispose is not defined.");s=i[Pt]}if(void 0===s){if(!Dl)throw new k("Symbol.dispose is not defined.");s=i[Dl],e&&(n=s)}if("function"!=typeof s)throw new k("Object not disposable.");n&&(s=function(){try{n.call(this)}catch(t){return Promise.reject(t)}}),t.stack.push({value:i,dispose:s,async:e})}else e&&t.stack.push({async:!0});return i}r(),r(),r();var cw="function"==typeof SuppressedError?SuppressedError:function(t,i,e){var s=new b(e);return s.name="SuppressedError",s.error=t,s.suppressed=i,s};function qr(t){function i(i){t.error=t.hasError?new cw(i,t.error,"An error was suppressed during disposal."):i,t.hasError=!0}var e,s=0;return function n(){for(;e=t.stack.pop();)try{if(!e.async&&1===s)return s=0,t.stack.push(e),Promise.resolve().then(n);if(e.dispose){var r=e.dispose.call(e.value);if(e.async)return s|=2,Promise.resolve(r).then(n,(function(t){return i(t),n()}))}else s|=1}catch(t){i(t)}if(1===s)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}()}r(),r();var lw=function(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];b.apply(this,i)};(lw.prototype=_.create(b.prototype)).constructor=lw;var Co=class extends lw{get name(){return"BaseError"}constructor(t,i){super(),this.message=t||"Unknown error",this.cause=i,b.captureStackTrace&&b.captureStackTrace(this,this.constructor)}};ds();var J=class extends Co{get name(){return"AbortError"}constructor(t,i){super(t||"Aborted",i)}};function Tu(t){return t instanceof b&&"AbortError"===t.name}function yi(t){if(t&&t.sy)throw new J}function X(t){if(Tu(t))throw t}function Ct(t){if(!Tu(t))throw t}function Ao(t,i){return i?new Promise(((e,s)=>{if(i.sy)return t.catch(ya),s(new J);const n=()=>{i.oy(n),s(new J)};i.uy(n),t.then((t=>{i.oy(n),e(t)}),(t=>{i.oy(n),s(t)}))})):t}async function Vh(t,i){const e={stack:[],error:void 0,hasError:!1};try{Ne(e,i,!1);return await t}catch(t){e.error=t,e.hasError=!0}finally{qr(e)}}async function dw(t,i){const e={stack:[],error:void 0,hasError:!1};try{Ne(e,i,!1);return await t(i.ly)}catch(t){e.error=t,e.hasError=!0}finally{qr(e)}}r(),r();var fw=class{gy(){if(!this.sy&&!this._y){this.sy=!0;for(const t of this.vy.slice())t();this.wy()}}wy(){if(!this._y){this._y=!0;for(const t of this.py.slice())t();nt(this.vy),nt(this.py)}}uy(t){this._y||this.vy.push(t)}oy(t){this._y||ra(this.vy,t)}Ay(t){this._y||this.py.push(t)}yy(t){this._y||ra(this.py,t)}constructor(){this.sy=!1,this._y=!1,this.vy=[],this.py=[]}},Wt=class t{get ly(){return this.My}Ty(){this.My.gy()}wy(){this.My.wy()}Sy(t){const i=this.My;if(i.sy)return;if(t.sy)return void i.gy();if(i._y||t._y)return;const e=()=>{s(),i.gy()},s=()=>{t.oy(e),t.yy(s),i.oy(e),i.yy(s)};t.uy(e),t.Ay(s),i.uy(e),i.Ay(s)}Ny(){const i=new t,e=new t,s=i.ly,n=e.ly,r=this.My,o=()=>{s.sy&&n._y||n.sy&&s._y?r.gy():s._y&&n._y&&r.wy()};s.uy(o),n.uy(o),s.Ay(o),n.Ay(o),i.Sy(r),e.Sy(r);return r.Ay((()=>{s.oy(o),n.oy(o),s.yy(o),n.yy(o)})),[i,e]}static Iy(i){const e=new t;for(const t of i)void 0!==t&&e.Sy(t);return e}[Dl](){this.Ty()}constructor(){this.My=new fw}};ds(),Qi();var gw=Promise.resolve(),Fs="function"==typeof queueMicrotask?queueMicrotask:t=>{gw.then(t)};function V(t){t.then(ya,ya)}async function _w(t){try{return await Promise.all(t)}catch(i){throw await Promise.all(t.map((t=>t.catch(ya)))),i}}function kt(t,i){return new Promise(((e,s)=>{if(void 0!==i&&i.sy)return void s(new J);const n=Fe.Pg((()=>{void 0!==i&&i.oy(r),e()}),t),r=()=>{Fe.Rg(n),s(new J)};void 0!==i&&i.uy(r)}))}async function vw(t,i){const e={stack:[],error:void 0,hasError:!1};try{const s=Ne(e,new Wt,!1);return await Promise.race([t,kt(i,s.ly).then((()=>{throw new b("Timeout")}))])}catch(t){e.error=t,e.hasError=!0}finally{qr(e)}}function ww(t,i,e){if("function"==typeof e)e.call(t,i);else for(const s of e)s.call(t,i)}var tu=class{yn(t,i){if("function"==typeof i)if("string"==typeof t)this.Dy(t,i);else for(const e of t)this.Dy(e,i)}Dy(t,i){const e=this.Ey[t];void 0===e?this.Ey[t]=i:"function"==typeof e?this.Ey[t]=[e,i]:0===this.xy?e.push(i):this.Ey[t]=e.concat(i)}Ly(t){if("function"!=typeof t)return;const i=this.Cy;void 0===i?this.Cy=t:"function"==typeof i?this.Cy=[i,t]:0===this.xy?i.push(t):this.Cy=i.concat(t)}Bo(){this.Ey=hv(),this.Cy=void 0}yo(t){this.xy++;const i=this.Ey[t.type],e=this.Cy;void 0!==i&&ww(this.jy,t,i),void 0!==e&&ww(this.jy,t,e),this.xy--}fn(t,i){if("function"==typeof i)if("string"==typeof t)this.Oy(t,i);else for(const e of t)this.Oy(e,i)}Oy(t,i){const e=this.Ey[t];void 0!==e&&("function"==typeof e?e===i&&(this.Ey[t]=void 0):0===this.xy?ra(e,i):this.Ey[t]=tw(e,i))}Ry(t){if("string"==typeof t)this.Ey[t]=void 0;else for(const i of t)this.Ey[i]=void 0}Py(t){const i=this.Cy;void 0!==i&&("function"==typeof i?i===t&&(this.Cy=void 0):0===this.xy?ra(i,t):this.Cy=tw(i,t))}zy(t,i){return new Promise(((e,s)=>{if(i&&i.sy)return s(new J);const n=t=>{o(),e(t)},r=()=>{o(),s(new J)},o=()=>{this.fn(t,n),i&&i.oy(r)};this.yn(t,n),i&&i.uy(r)}))}constructor(t){this.Ey=hv(),this.Cy=void 0,this.xy=0,this.Ds=t=>{this.yo(t)},this.jy=null!=t?t:this}},Su=class extends tu{yo(t){Fs((()=>{super.yo(t)}))}},gs=class extends tu{Ly(t){super.Ly(t)}Py(t){super.Py(t)}};r(),r();var Jr=class{constructor(t,i=new Date){this.type=t,this.date=i}};r();var Zi=function(t){return t.By="Uy",t.Qy="Fy",t.Yy="contentprotectionerror",t.Vy="contentprotectionsuccess",t.Gy="currentsourcechange",t.Wy="destroy",t.Zy="durationchange",t.Hy="emptied",t.Xy="encrypted",t.qy="ended",t.Ky="Jy",t.$y="ib",t.eb="sb",t.ob="hb",t.ub="loadstart",t.fb="manifestupdate",t.gb="nosupportedrepresentationfound",t._b="offline",t.vb="online",t.wb="pause",t.so="play",t.mb="progress",t.pb="ratechange",t.Ab="representationchange",t.yb="resize",t.bb="seeked",t.Mb="seeking",t.Tb="segmentnotfound",t.Sb="Nb",t.Ib="Db",t.ro="sourcechange",t.Eb="timeupdate",t.kb="volumechange",t.xb="Lb",t.Cb="jb",t.Ob="metricschange",t}({}),mw=["cenc"],pw=["cbcs","cbcs-1-9"],Aw=class extends Jr{constructor(t){super(Zi.Cb),this.Rb=t}},tr=class extends Jr{constructor(t,i,e,s){super("Pb"),this.zb=t,this.Bb=i,this.Pb=e,this.Ub=s}},yw=class extends Jr{constructor(){super("lt")}},bw=function(t){return t.Xy="Qb",t.Fb="Yb",t}({}),Mw=class extends Jr{constructor(t,i){super("Qb"),this.GA=t,this.Vb=i}},Tw=class extends Jr{constructor(){super("Yb")}};r(),r(),r();var Sw="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),Nw=16383,Iw=/[\t\n\f\r ]/g;function jh(t){return 43===t?62:47===t?63:t>=48&&t<=57?t-48+52:t>=65&&t<=90?t-65:t>=97&&t<=122?t-97+26:Dw()}function Dw(){throw new b("Invalid base64 input")}function Zn(t){let i=t;Iw.test(i)&&(i=i.replace(Iw,""));let e=i.length;e%4==0&&e>=1&&"="===i[e-1]&&(e>=2&&"="===i[e-2]?e-=2:e-=1,i=i.substr(0,e));const s=e%4;if(1===s)return Dw();const n=0===s?0:4-s,r=new T(function(t,i){return 3*(t+i)/4-i}(e,n)),o=n>0?e-4:e;let h,a=0,u=0;for(;a<o;a+=4)h=jh(i.charCodeAt(a))<<18|jh(i.charCodeAt(a+1))<<12|jh(i.charCodeAt(a+2))<<6|jh(i.charCodeAt(a+3)),r[u++]=h>>16&255,r[u++]=h>>8&255,r[u++]=255&h;return 2===n?(h=jh(i.charCodeAt(a))<<2|jh(i.charCodeAt(a+1))>>4,r[u++]=255&h):1===n&&(h=jh(i.charCodeAt(a))<<10|jh(i.charCodeAt(a+1))<<4|jh(i.charCodeAt(a+2))>>2,r[u++]=h>>8&255,r[u++]=255&h),r}function Ew(t,i,e){return Sw[t>>2]+Sw[(3&t)<<4|i>>4]+Sw[(15&i)<<2|e>>6]+Sw[63&e]}function kw(t,i,e){const s=[];for(let n=i;n<e;n+=3)s.push(Ew(t[n],t[n+1],t[n+2]));return s.join("")}function gc(t){const i=t.length,e=i%3,s=[],n=i-e;for(let i=0;i<n;i+=Nw)s.push(kw(t,i,x.min(n,i+Nw)));if(1===e){const e=t[i-1];s.push(Sw[e>>2]+Sw[(3&e)<<4]+"==")}else if(2===e){const e=t[i-2],n=t[i-1];s.push(Sw[e>>2]+Sw[(3&e)<<4|n>>4]+Sw[(15&n)<<2]+"=")}return s.join("")}function xw(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/[=]/g,"")}function qo(t,i){const e=i.tc,s=t.getUint8(e>>3),n=1<<7-(7&e);return i.Gb(1),(s&n)===n?1:0}function Ru(t,i,e){let s=0;for(let n=0;n<e;n++)s=2*s+qo(t,i);return s}r(),r();var Lw=class t{get tc(){return this.ic}Gb(t){this.ic+=t}Wb(t){this.ic=t}Zb(){return new t(this.tc)}constructor(t=0){this.ic=t}};var Cw=x.clz32||function(t){let i=32,e=t>>16;return e&&(i-=16,t=e),e=t>>8,e&&(i-=8,t=e),e=t>>4,e&&(i-=4,t=e),e=t>>2,e&&(i-=2,t=e),e=t>>1,e?i-2:i-t};function jw(t){if(t>=55296&&t<=57343)throw new b("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value")}function Ow(t,i){return t>>i&63|128}function Rw(t,i){0!=(4294967168&t)?(0==(4294965248&t)?i.push(t>>6&31|192):0==(4294901760&t)?(jw(t),i.push(t>>12&15|224),i.push(Ow(t,6))):0==(4292870144&t)&&(i.push(t>>18&7|240),i.push(Ow(t,12)),i.push(Ow(t,6))),i.push(63&t|128)):i.push(t)}function Pw(t,i){if(i.tc>=t.length)throw new b("Invalid byte index");const e=255&t[i.tc];if(i.Gb(1),128==(192&e))return 63&e;throw new b("Invalid continuation byte")}function zw(t,i){const e=i.tc;if(e>t.length)throw new b("Invalid byte index");if(e===t.length)return!1;const s=255&t[e];if(i.Gb(1),0==(128&s))return s;if(192==(224&s)){const e=(31&s)<<6|Pw(t,i);if(e>=128)return e;throw new b("Invalid continuation byte")}if(224==(240&s)){const e=(15&s)<<12|Pw(t,i)<<6|Pw(t,i);if(e>=2048)return jw(e),e;throw new b("Invalid continuation byte")}if(240==(248&s)){const e=(7&s)<<18|Pw(t,i)<<12|Pw(t,i)<<6|Pw(t,i);if(e>=65536&&e<=1114111)return e}throw new b("Invalid UTF-8 detected")}r(),r();var Bw=65279;var Uw=[128,64,32,16,8,4,2,1],Qw=class{Hb(t){return Fw(this.Xb,t)}constructor(t){this.Xb=t}};function Fw(t,i){return(t&i)===i}function Ni(t,i){return Fw(t,Uw[i])}function on(t,i){const e=t.getUint8(i.tc);return i.Gb(1),e}function Yw(t,i,e){t.setUint8(i.tc,e),i.Gb(1)}function ss(t,i,e){const s=zr(ka(t),i.tc,i.tc+e);return i.Gb(s.byteLength),s}function Vw(t,i,e){ka(t).set(ka(e),i.tc),i.Gb(e.byteLength)}function Gw(t,i,e){return i.tc+e<=t.byteLength}function Ww(t,i,e,s){return void 0===s&&(s=!1),s?function(t,i,e){let s=0,n=1;for(let r=0;r<e;r++)s+=on(t,i)*n,n*=256;return s}(t,i,e):function(t,i,e){let s=0;for(let n=0;n<e;n++)s=256*s+on(t,i);return s}(t,i,e)}function Zw(t,i){const e=t.getUint8(i.tc);return i.Gb(1),e}function Ps(t,i,e){void 0===e&&(e=!1);const s=t.getUint16(i.tc,e);return i.Gb(2),s}function Hw(t,i,e,s){void 0===s&&(s=!1),t.setUint16(i.tc,e,s),i.Gb(2)}function ul(t,i,e){void 0===e&&(e=!1);const s=t.getUint32(i.tc,e);return i.Gb(4),s}function $(t,i,e,s){void 0===s&&(s=!1),t.setUint32(i.tc,e,s),i.Gb(4)}function Xw(t,i,e){void 0===e&&(e=!1);const s=ul(t,i,e),n=ul(t,i,e),r=e?n:s,o=e?s:n;return D.fromBits(o,r,!0)}function qw(t,i,e,s){void 0===s&&(s=!1);const n=e.getHighBitsUnsigned(),r=e.getLowBitsUnsigned(),o=s?n:r;$(t,i,s?r:n,s),$(t,i,o,s)}function Kw(t,i){return $w(t,i)}function ai(t,i,e){return Pv(gm(ss(t,i,e)))}function Jw(t,i){const e=on(t,i);let s;return 0==(128&e)?s=e:192==(224&e)?s=64*(31&e)+(63&on(t,i)):224==(240&e)?s=4096*(15&e)+64*(63&on(t,i))+(63&on(t,i)):240==(248&e)&&(s=262144*(7&e)+4096*(63&on(t,i))+64*(63&on(t,i))+(63&on(t,i))),s}function $w(t,i){return tm(t,i,!0)}function tm(t,i,e){const s=[];for(;i.tc<t.byteLength;){const n=on(t,i);if(e&&!n)break;s.push(n)}return Pv(s)}function im(t,i,e){const s=e.length;for(let n=0;n<s;n+=1){Yw(t,i,e.charCodeAt(n))}}function em(t,i){if(!(i.tc+2<=t.byteLength))return;const e=t.getUint8(i.tc),s=t.getUint8(i.tc+1);return(254!==e||255!==s)&&(255===e&&254===s||void 0)}function sm(t,i){const e=em(t,i);return void 0!==e&&i.Gb(2),Tl(t,i,!0===e)}function Tl(t,i,e){return void 0===e&&(e=!1),nm(t,i,e,!0)}function nm(t,i,e,s){const n=[];for(;i.tc+2<=t.byteLength;){const r=Ps(t,i,e);if(s&&!r)break;n.push(r)}return Pv(n)}function rm(t,i,e,s){void 0===s&&(s=!1);const n=e.length;for(let r=0;r<n;r+=1){Hw(t,i,e.charCodeAt(r),s)}}function om(t){return tm(Al(t),new da,!1)}function Ml(t){const i=new T(t.length);return im(Al(i),new da,t),i}function hm(t,i){return void 0===i&&(i=!1),nm(Al(t),new da,i,!1)}function am(t,i){void 0===i&&(i=!1);const e=new T(2*t.length);return rm(Al(e),new da,t,i),e}function um(t,i){return i.tc+3<=t.byteLength&&(239===t.getUint8(i.tc)&&187===t.getUint8(i.tc+1)&&191===t.getUint8(i.tc+2))}function Zo(t,i){return function(t,i,e){const s=[],n=um(t,i);n&&i.Gb(3);for(;i.tc<t.byteLength;){const n=Jw(t,i);if(void 0===n)break;if(e&&0===n)break;s.push(n)}return Rv(s)}(t,i,!0)}function cm(t){return function(t){return Rv(t)}(function(t,i){const e=[],s=new da;let n;if(!i){if(n=zw(t,s),!1===n)return e;n===Bw||e.push(n)}for(;!1!==(n=zw(t,s));)e.push(n);return e}(ka(t)))}function Pl(t){return new T(function(t){const i=[];for(const e of t)Rw(e,i);return i}(function(t){const i=[];let e=0;const s=t.length;for(;e<s;){const n=t.charCodeAt(e++);if(n>=55296&&n<=56319&&e<s){const s=t.charCodeAt(e++);56320==(64512&s)?i.push(((1023&n)<<10)+(1023&s)+65536):(i.push(n),e--)}else i.push(n)}return i}(t)))}function lm(t,i){if(um(t,i))return Zo(t,i);if(void 0!==em(t,i))return sm(t,i);if(i.tc+4<=t.byteLength){if(0===t.getUint8(i.tc)&&0===t.getUint8(i.tc+2))return Tl(t,i,!1);if(0===t.getUint8(i.tc+1)&&0===t.getUint8(i.tc+3))return Tl(t,i,!0)}return Zo(t,i)}function zr(t,i,e){return void 0===i&&(i=0),void 0===e&&(e=t.byteLength),new T(t.buffer,t.byteOffset+i,e-i)}function dm(t,i,e){return void 0===i&&(i=0),void 0===e&&(e=t.byteLength),new DataView(t.buffer,t.byteOffset+i,e-i)}function Al(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function ka(t){return new T(t.buffer,t.byteOffset,t.byteLength)}function fm(t){return t instanceof ArrayBuffer||mm(t)}function Tc(t){return t instanceof ArrayBuffer?new T(t):ka(t)}function vi(t,i,e){return void 0===i&&(i=0),void 0===e&&(e=t.byteLength),t.slice?t.slice(i,e):Wa(zr(t,i,e))}function Wa(t){if(t.slice)return t.slice(0);{const i=new T(t.byteLength);return i.set(t,0),i}}function gm(t){return[].slice.call(t)}var da=class t{get tc(){return this.ic}Gb(t){this.ic+=t}Wb(t){this.ic=t}Zb(){return new t(this.tc)}qb(){return new Lw(this.tc<<3)}constructor(t=0){this.ic=t}};function _m(t){let i=t.toLowerCase(),e=0,s=0;Et(i,"0x")&&(i=i.substring(2));const n=new T(x.ceil(i.length/2));for(1==(1&i.length)&&(e=1,n[s++]=C(i[0],16));e<i.length;e+=2)n[s++]=C(i.substr(e,2),16);return n}function vm(t){return.001*t}var wm=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]","[object DataView]"],mm=ArrayBuffer.isView||(t=>t&&Qa(wm,Ld.call(t)));function Yn(t,i){if(t===i)return!0;if(t.byteLength!==i.byteLength)return!1;return pm(new T(t),new T(i))}function pm(t,i){if(t===i)return!0;if(t.byteLength!==i.byteLength)return!1;if(t.buffer===i.buffer&&t.byteOffset===i.byteOffset)return!0;for(let e=0;e<t.length;e+=1)if(t[e]!==i[e])return!1;return!0}function Am(t,i){return t===i||pm(Tc(t),Tc(i))}function ih(t){const i=t.reduce(((t,i)=>t+i.byteLength),0);return ym(t,i)}function ym(t,i){const e=new T(i);let s=0;for(const i of t)e.set(i,s),s+=i.byteLength;return e}function bm(t,i,e){const s=new T(t.byteLength+i.byteLength),n=zr(t,0,e),r=zr(t,e);return s.set(n),s.set(i,e),s.set(r,e+i.byteLength),s}function Mm(t){return Zn(t).buffer}function Tm(t){return gc(new T(t))}function Nl(t){return gc(Ml(t))}var Sm=new T([0]).buffer,ru=class{get Kb(){return this.Qu.length}Jb(t){for(const i of this.Qu)if(Am(i[0],t))return!0;return!1}$b(t){for(const i of this.Qu)if(Am(i[0],t))return i[1]}tM(t,i){for(const e of this.Qu)if(Am(e[0],t))return void(e[1]=i);this.Qu.push([t,i])}iM(t,i){this.Qu.forEach((i=>t(i[1],i[0])),i)}eM(){nt(this.Qu)}constructor(){this.Qu=[]}};r(),ds();var xh=class{sM(t){this.Kg&&(this.Kg(t),this.wy())}nM(t){this.Jg&&(this.Jg(t),this.wy())}Ty(){this.rM.catch(ya),this.nM(new J)}Sy(t){t.then((t=>this.sM(t)),(t=>this.nM(t)))}wy(){this.Kg=void 0,this.Jg=void 0}constructor(){this.rM=new Promise(((t,i)=>{this.Kg=t,this.Jg=i}))}};function Nm(){return new T([8,4]).buffer}function Im(t,i){return t===eo?function(t){if(t.byteLength<2*Dm.length)return t;const i=new DataView(t,0,2*Dm.length),e=hm(i,!0);if(e===Dm)return t;return function(t){const i='<PlayReadyKeyMessage type="LicenseAcquisition"><LicenseAcquisition Version="1"><Challenge encoding="base64encoded">',e='</Challenge><HttpHeaders><HttpHeader><name>Content-Type</name><value>text/xml; charset=utf-8</value></HttpHeader><HttpHeader><name>SOAPAction</name><value>"http://schemas.microsoft.com/DRM/2007/03/protocols/AcquireLicense"</value></HttpHeader></HttpHeaders></LicenseAcquisition></PlayReadyKeyMessage>',s=""+i+Tm(t)+e;return am(s,!0).buffer}(t)}(i):i}r();var Dm="<PlayReady";r(),r();var Em=class extends Co{constructor(t,i,e,s){super(t,s),this.oM=i,this.hM=e}};il(),r(),r(),r(),r(),r();var km=function(t,i){return(km=_.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)_.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])})(t,i)};function Do(t,i){if("function"!=typeof i&&null!==i)throw new k("Class extends value "+String(i)+" is not a constructor or null");function e(){this.constructor=t}km(t,i),t.prototype=null===i?_.create(i):(e.prototype=i.prototype,new e)}function xm(t,i,e){return t.indexOf?t.indexOf(i,e):Array.prototype.indexOf.call(t,i,e)}r(),r(),r(),r(),r(),r(),r();!function(){function t(t,i){this.aM=t,this.uM=i}t.prototype.get=function(t){var i=this.aM.get(t);if(0===this.uM||void 0===i)return i;var e=this.aM.get(t+1)||0,s=i&(1<<8-this.uM)-1,n=e>>8-this.uM;return(s<<this.uM)+n},t.prototype.getBit=function(t){if(!(t<0)){var i=this.aM.get(x.floor((t+this.uM)/8));if(void 0!==i)return(i&1<<7-this.uM-t%8)>0?1:0}},_.defineProperty(t.prototype,"bitLength",{get:function(){return this.aM.bitLength-this.uM},enumerable:!1,configurable:!0}),_.defineProperty(t.prototype,"length",{get:function(){return this.aM.length},enumerable:!1,configurable:!0})}();r(),r();x.pow(2,-52);function Lm(t,i,e){return x.min(x.max(t,i),e)}function Cm(t,i){return t>>8-i}function jm(t,i){return t&(1<<i)-1}var Om=function(){function t(t){this.cM=t,this.lM=0,this.dM=0}return _.defineProperty(t.prototype,"totalBitsRead",{get:function(){return 8*this.lM+this.dM},enumerable:!1,configurable:!0}),_.defineProperty(t.prototype,"done",{get:function(){return this.lM===this.cM.length&&0===this.dM},enumerable:!1,configurable:!0}),_.defineProperty(t.prototype,"location",{get:function(){return{byte:this.lM,bit:this.dM}},enumerable:!1,configurable:!0}),t.prototype.copy=function(){var i=new t(this.cM);return i.seek(this.lM,this.dM),i},t.prototype.canReadBits=function(t){return 8*this.lM+t+this.dM<=8*this.cM.length},t.prototype.canReadBytes=function(t){return 0===this.dM?this.lM+t<=this.cM.length:this.lM+t<this.cM.length},t.prototype.incBit=function(){this.dM++,this.dM>7&&(this.lM++,this.dM=0)},t.prototype.seek=function(t,i){this.lM=t,this.dM=i},t.prototype.peekBit=function(){if(!this.canReadBits(1))throw new b("Cannot read past end of buffer.");return this.cM.get(this.lM)>>7-this.dM&1},t.prototype.readBit=function(){var t=this.peekBit();return this.incBit(),t},t.prototype.readByte=function(){if(!this.canReadBytes(1))throw new b("Cannot read past end of buffer.");if(0===this.dM)return this.cM.get(this.lM++);var t=jm(this.cM.get(this.lM),8-this.dM),i=Cm(this.cM.get(this.lM+1),this.dM);return this.lM++,t<<this.dM|i},t.prototype.readBits=function(t){if(!this.canReadBits(t))throw new b("Cannot read past end of buffer.");for(var i=[],e=0;e<t;e++)i.push(this.readBit());return i},t.prototype.readUInt=function(t){if(t>32)throw new b("The max bitlength that can be provided is 32.");if(!this.canReadBits(t))throw new b("Cannot read past end of buffer.");var i=0;if(0===this.dM&&t%8==0)for(var e=t-8;e>=0;e-=8)i|=this.readByte()<<e;else for(e=t-1;e>=0;e--)i|=this.readBit()<<e;return i},t.prototype.readInt=function(t){if(t>32)throw new b("The max bitlength that can be provided is 32.");if(!this.canReadBits(t))throw new b("Cannot read past end of buffer.");var i=this.readUInt(t);return 0===(i&1<<t-1)?i:i-x.pow(2,t)},t.prototype.readExponentialGolombCode=function(){for(var t=0;0===this.readBit();)t++;var i=1<<t;return i+=this.readUInt(t)-1},t.prototype.readSignedExponentialGolombCode=function(){var t=this.readExponentialGolombCode();return 1&t?(t+1)/2:-t/2},t.prototype.skipBits=function(t){if(!this.canReadBits(t))throw new b("Skipping over the buffer edge is not allowed.");var i=this.dM+t;this.lM+=i>>3,this.dM=7&i},t.prototype.readBool=function(){return this.readBit()>0},t.prototype.readString=function(t){if(!this.canReadBytes(t))throw new b("Cannot read past end of buffer.");for(var i=[],e=0;e<t;e++)i.push(this.readByte());return String.fromCharCode.apply(String,i)},t}();r(),r(),r();var Rm=function(t,i){return t===i?0:t<i?-1:t>i?1:j(t)?j(i)?0:1:-1},As=function(){function t(){this.fM=[],this.gM=[],this._M=0}return t.from=function(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];for(var s=new t,n=0,r=i;n<r.length;n++){var o=r[n];s.pushRange(o)}return s},t.prototype.pushRange=function(t,i,e){if(void 0===i&&(i=0),void 0===e&&(e=t.length),e<0)throw new b("The buffer length must be positive.");if(0!==e){if(0===this.gM.length)this.gM.push(0);else{var s=this.gM[this.gM.length-1]+this.fM[this.fM.length-1].length;this.gM.push(s)}this.fM.push(t.subarray(i,i+e)),this._M+=e}},t.prototype.concat=function(i){var e=new t;return e.pushRange(this.join()),e.pushRange(i.join()),e},t.prototype.copy=function(t,i,e,s){if(void 0===i&&(i=0),void 0===e&&(e=0),void 0===s&&(s=this.length),i<0||e<0||s<0)throw new RangeError;return this.slice(e,s).copyInternal(t,i)},t.prototype.copyInternal=function(t,i){for(var e=0,s=i,n=0,r=this.fM;n<r.length;n++){var o=r[n];t.set(o,s),e+=o.length,s+=o.length}return e},t.prototype.clear=function(){this.fM=[],this.gM=[],this._M=0},t.prototype.get=function(t){if(!(t<0||t>=this.length)){var i=this.findContainingBufferIndex(t),e=t-this.gM[i];return this.fM[i][e]}},_.defineProperty(t.prototype,"first",{get:function(){return this.get(0)},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){if(this.fM.length<1)return-1;if(this.fM.length>1){var i=this.join();this.clear(),this.pushRange(i)}var e=this.fM[0];return"number"==typeof t?xm(e,t):"undefined"!=typeof Buffer?Buffer.from(e.buffer,e.byteOffset,e.byteLength).indexOf(t):function(t,i){if(0===i.length)return 0;for(var e=i[0],s=i.length,n=t.length-s,r=0;r<=n&&!((r=xm(t,e,r))<0||r>n);r++){for(var o=r+1,h=r+s,a=1;o<h&&t[o]===i[a];o++,a++);if(o===h)return r}return-1}(e,t)},t.prototype.findContainingBufferIndex=function(t){return function(t,i,e){if(0!==t.length){var s=0,n=t.length-1;if(1!==e(t[s],i)){if(1===e(i,t[n]))return n;for(;s!==n;){var r=x.ceil((s+n)/2);e(t[r],i)<=0?s=r:n=r-1}return s}}}(this.gM,t,Rm)},t.prototype.join=function(){if(1===this.fM.length)return this.fM[0];var t=new T(this.length);return this.copyInternal(t,0),t},_.defineProperty(t.prototype,"length",{get:function(){return this._M},enumerable:!1,configurable:!0}),_.defineProperty(t.prototype,"bitLength",{get:function(){return 8*this.length},enumerable:!1,configurable:!0}),t.prototype.readUIntBE=function(t,i){if(i<=0||i>4)throw new b("Expected byteLength to be between 0 and 4 but was "+i);if(t<0||t>this.length-i)throw new b("Offset must be between 0 and buffer.length - byteLength, but was "+t+" (max allowed "+(this.length-i)+")");if(1===i)return this.get(t);for(var e=0,s=0;s<i;s++)e+=this.get(t+s)*x.pow(2,8*(i-s-1));return e},t.prototype.slice=function(i,e){void 0===e&&(e=this.length);var s=Lm(i,0,this.length),n=Lm(e,0,this.length);if(s>n)return new t;if(s===n)return new t;for(var r=new t,o=this.findContainingBufferIndex(s),h=this.fM[o],a=s,u=a-this.gM[o];a+h.length-u<n;)r.pushRange(h,u,h.length-u),o+=1,u=(a+=h.length-u)-this.gM[o],h=this.fM[o];var c=n-a;return r.pushRange(h,u,c),r},t.prototype.trim=function(){if(0===this.length)return new t;for(var i=this.length-1,e=this.fM.length-1,s=this.fM[e],n=s.length-1;i>=0&&e>=0;){if(0!==s[n])break;if(0===n){if(0===e)return new t;e-=1,n=(s=this.fM[e]).length-1}else n-=1;i-=1}return this.slice(0,i+1)},t}(),Pm=function(){function t(i){this.vM=i||t.BUFFER_CHUNK_SIZE,this.wM=!1,this.mM=new As,this.cM=new T(this.vM),this.pM=0,this.AM=0,this.dM=7}return t.prototype.closeByte=function(){this.cM[this.pM++]=this.AM,this.pM>=this.vM&&this.closeBuffer(),this.AM=0,this.dM=7},t.prototype.closeBuffer=function(t){void 0===t&&(t=!0),0!==this.pM&&(this.mM.pushRange(this.cM,0,this.pM),t&&(this.cM=new T(this.vM)),this.pM=0)},_.defineProperty(t.prototype,"isWritingStartBit",{get:function(){return 7===this.dM},enumerable:!1,configurable:!0}),t.prototype.close=function(){if(this.wM)throw new b("Cannot close a closed BitWriter.");return this.isWritingStartBit||this.closeByte(),this.closeBuffer(!1),this.wM=!0,this.mM},t.prototype.writeBit=function(t){if(this.wM)throw new b("Cannot write to a closed BitWriter.");this.AM|=t<<this.dM,0===this.dM?this.closeByte():this.dM--},t.prototype.writeByte=function(t){if(this.wM)throw new b("Cannot write to a closed BitWriter.");this.isWritingStartBit?(this.AM=t,this.closeByte()):this.writeByteUnaligned(t)},t.prototype.writeByteUnaligned=function(t){var i=this.dM;this.AM|=Cm(t,i+1),this.closeByte(),this.AM=jm(t,8-i)<<i+1,this.dM=i},t.prototype.writeBits=function(t){for(var i=0,e=t;i<e.length;i++){var s=e[i];this.writeBit(s)}},t.prototype.writeBytes=function(t){if(this.wM)throw new b("Cannot write to a closed BitWriter.");this.isWritingStartBit?this.writeBytesAligned(t):this.writeBytesUnaligned(t)},t.prototype.writeBytesAligned=function(t){this.pM+t.length<=this.vM?(this.cM.set(t,this.pM),this.pM+=t.length,this.pM===this.vM&&this.closeBuffer()):(this.closeBuffer(),this.mM.pushRange(t))},t.prototype.writeBytesUnaligned=function(t){if(0!==t.length){var i=this.dM;this.AM|=Cm(t[0],i+1),this.closeByte();for(var e=1;e<t.length;e++){var s=jm(t[e-1],8-i),n=Cm(t[e],i+1);this.AM=s<<i+1|n,this.closeByte()}this.AM=jm(t[t.length-1],8-i)<<i+1,this.dM=i}},t.prototype.writeUInt=function(t,i){if(t<0)throw new b("Received a negative number.");if(i>32)throw new b("The max bitlength that can be provided is 32.");if(t>=x.pow(2,i))throw new b("Uint "+t+" cannot be represented in "+i+" bit(s).");if(this.isWritingStartBit&&i%8==0)for(var e=i-8;e>=0;e-=8)this.writeByte(t>>e&255);else for(e=i-1;e>=0;e--)this.writeBool((t&1<<e)>0)},t.prototype.writeInt=function(t,i){if(i>32)throw new b("The max bitlength that can be provided is 32.");if(x.abs(t)>=x.pow(2,i-1))throw new b("Signed integer "+t+" cannot be represented in "+i+" bit(s).");t<0?this.writeUInt(t+x.pow(2,i),i):this.writeUInt(t,i)},t.prototype.writeExponentialGolombCode=function(t){if(t<0)throw new b("Received a negative number.");for(var i=x.floor(x.log2(t+1))+1,e=0;e<i-1;e++)this.writeBit(0);this.writeUInt(t+1,i)},t.prototype.writeSignedExponentialGolombCode=function(t){0===t?this.writeExponentialGolombCode(0):t<0?this.writeExponentialGolombCode(-2*t):this.writeExponentialGolombCode(2*t-1)},t.prototype.padByte=function(t){for(;!this.isWritingStartBit;)this.writeBit(t)},t.prototype.writeBool=function(t){this.writeBit(t?1:0)},t.prototype.writeString=function(t){for(var i=function(t){for(var i=new T(t.length),e=0;e<t.length;e++)i[e]=t.charCodeAt(e);return i}(t),e=0;e<i.length;e++)this.writeByte(i[e])},t.BUFFER_CHUNK_SIZE=1024,t}();r();var zm=function(){function t(t){this.rb=new As,this.o_=t}return t.prototype.closeWriter=function(){void 0!==this.o_&&(this.rb=this.rb.concat(this.o_.close()),this.o_=void 0)},_.defineProperty(t.prototype,"writer",{get:function(){return void 0===this.o_&&(this.o_=new Pm),this.o_},enumerable:!1,configurable:!0}),t.prototype.concat=function(t){this.closeWriter(),this.rb=this.rb.concat(t)},t.prototype.toRangedBuffer=function(){return this.closeWriter(),this.rb},t}(),Fu=function(){function t(t){if(this.boxType=t,4!==t.length&&16!==t.length)throw new b("The provided box type does not conform to either a 4 character type or a 16 byte uuid.")}return t.prototype.serializeCommonBoxHeader=function(i){var e=this.getSize(),s=e>=t.LARGE_SIZE/8,n=16===this.boxType.length;i.writeUInt(s?1:e,32),i.writeString(n?"uuid":this.boxType),s&&(i.writeUInt(x.floor(e/t.LARGE_SIZE),32),i.writeUInt(e%t.LARGE_SIZE,32)),n&&i.writeString(this.boxType)},t.prototype.getSize=function(){var i=8+(this.boxType.length>4?16:0),e=this.getBoxContentSize()+i;return e>=t.LARGE_SIZE/8&&(e+=8),e},t.prototype.serialize=function(){var t=new zm;return this.serializeCommonBoxHeader(t.writer),this.serializeBoxContent(t),t.toRangedBuffer()},t.LARGE_SIZE=x.pow(2,32),t}();function ti(t,i){return t instanceof D?64===i:t<x.pow(2,i)}function Nh(t,i){return x.round(t*x.pow(2,i))}function Bm(t,i){for(var e=0;e<i.length;e++)t.writeByte(i[e])}function Um(t,i){return t/x.pow(2,i)}r();var le=function(t){function i(i,e,s){var n=t.call(this,i)||this;if(n.version=e,!ti(e,8))throw new b("the provided version cannot fit in 8 bits.");return n.flags=s,n}return Do(i,t),_.defineProperty(i.prototype,"flags",{get:function(){return this.xv},set:function(t){this.xv=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 4},i.prototype.serializeFlags=function(t){if("number"!=typeof this.flags)throw new b("Missing custom serializeFlags method.");t.writer.writeUInt(this.flags,24)},i.prototype.serializeBoxContent=function(t){t.writer.writeByte(this.version),this.serializeFlags(t)},i}(Fu);r(),r();var Qm=function(t){function i(i,e){var s=t.call(this,i)||this;return s.data=e,s}return Do(i,t),i.prototype.getBoxContentSize=function(){return this.data.length},i.prototype.serializeBoxContent=function(t){t.concat(As.from(this.data))},i}(Fu);r(),r();var Fm=function(){function t(t){void 0===t&&(t=0),this.offset=t}return t.prototype.shift=function(t){this.offset+=t},t.prototype.seek=function(t){this.offset=t},t.prototype.clone=function(){return new t(this.offset)},t}();r();var Ym=16384;function Vm(t){var i=t.length;if(i<=Ym)return String.fromCharCode.apply(String,t);for(var e=[],s=0;s<i;s+=Ym)e.push(String.fromCharCode.apply(String,t.slice(s,s+Ym)));return e.join("")}var Gm=function(){function t(t){this.raw=t}return t.prototype.isSet=function(t){return function(t,i){return(t&i)===i}(this.raw,t)},t}();function bc(t,i){var e=t.getUint8(i.offset);return i.shift(1),e}function Wm(t,i,e){var s=$m(ep(t),i.offset,i.offset+e);return i.shift(s.byteLength),s}function Zm(t,i,e){return i.offset+e<=t.byteLength}function Hm(t,i,e){void 0===e&&(e=!1);var s=t.getUint32(i.offset,e);return i.shift(4),s}function Xm(t,i,e){void 0===e&&(e=!1);var s=Hm(t,i,e),n=Hm(t,i,e),r=e?n:s,o=e?s:n;return D.fromBits(o,r,!0)}function qm(t,i,e){return Vm(function(t){return[].slice.call(t)}(Wm(t,i,e)))}function Km(t,i){var e,s=bc(t,i);return 0==(128&s)?e=s:192==(224&s)?e=64*(31&s)+(63&bc(t,i)):224==(240&s)?e=4096*(15&s)+64*(63&bc(t,i))+(63&bc(t,i)):240==(248&s)&&(e=262144*(7&s)+4096*(63&bc(t,i))+64*(63&bc(t,i))+(63&bc(t,i))),e}function Jm(t,i){return function(t,i,e){var s=[],n=function(t,i){return i.offset+3<=t.byteLength&&239===t.getUint8(i.offset)&&187===t.getUint8(i.offset+1)&&191===t.getUint8(i.offset+2)}(t,i);n&&i.shift(3);for(;i.offset<t.byteLength;){var r=Km(t,i);if(void 0===r)break;if(e&&0===r)break;s.push(r)}return function(t){for(var i=[],e=0,s=t;e<s.length;e++){var n=s[e];n>65535&&(n-=65536,i.push(n>>>10&1023|55296),n=56320|1023&n),i.push(n)}return Vm(i)}(s)}(t,i,!0)}function $m(t,i,e){return void 0===i&&(i=0),void 0===e&&(e=t.byteLength),new T(t.buffer,t.byteOffset+i,e-i)}function tp(t,i,e){return void 0===i&&(i=0),void 0===e&&(e=t.byteLength),new DataView(t.buffer,t.byteOffset+i,e-i)}function ip(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function ep(t){return new T(t.buffer,t.byteOffset,t.byteLength)}var sp=function(){function t(t){void 0===t&&(t=0),this.offset=t}return t.prototype.shift=function(t){this.offset+=t},t.prototype.seek=function(t){this.offset=t},t.prototype.clone=function(){return new t(this.offset)},t.prototype.toBit=function(){return new Fm(this.offset<<3)},t}();r();var np=function(){function t(t,i){this.data=t,this.cursor=i}return t.prototype.nextUint8=function(){return bc(this.data,this.cursor)},t.prototype.nextUint16=function(){return function(t,i,e){void 0===e&&(e=!1);var s=t.getUint16(i.offset,e);return i.shift(2),s}(this.data,this.cursor)},t.prototype.nextInt16=function(){return function(t,i,e){void 0===e&&(e=!1);var s=t.getInt16(i.offset,e);return i.shift(2),s}(this.data,this.cursor)},t.prototype.nextUint32=function(){return Hm(this.data,this.cursor)},t.prototype.nextInt32=function(){return function(t,i,e){void 0===e&&(e=!1);var s=t.getInt32(i.offset,e);return i.shift(4),s}(this.data,this.cursor)},t.prototype.nextInt64=function(){return function(t,i,e){void 0===e&&(e=!1);var s=Hm(t,i,e),n=Hm(t,i,e),r=e?n:s,o=e?s:n;return D.fromBits(o,r,!1)}(this.data,this.cursor)},t.prototype.nextUint64=function(){return Xm(this.data,this.cursor)},t.prototype.nextUint8Array=function(t){return Wm(this.data,this.cursor,t)},t.prototype.nextUint32Array=function(t){return function(t,i,e){for(var s=[],n=0;n<e;n++)s.push(Hm(t,i));return s}(this.data,this.cursor,t)},t.prototype.nextChars=function(t){return qm(this.data,this.cursor,t)},t.prototype.nextUTF8String=function(){return Jm(this.data,this.cursor)},t.prototype.skip=function(t){this.cursor.shift(t)},t.prototype.clone=function(){return new t(this.data,this.cursor.clone())},t}();function fu(t,i){return t.type===i}var rp=8;function op(t){var i=function(t,i){var e=[];for(;i.offset<t.byteLength;){var s=hp(t,i);if(!s.complete)return{complete:!1,boxes:e};e.push(s.box)}return{complete:!0,boxes:e}}(t.data,t.cursor);if(!i.complete)throw new b("Data incomplete");return i.boxes}function hp(t,i){var e=i.offset,s=function(t,i){var e=i.offset;if(!Zm(t,i,rp)){return{complete:!1,neededOffset:r=i.offset+rp}}var s=Hm(t,i),n=qm(t,i,4);if(1===s){if(!Zm(t,i,8)){var r=i.offset+8;return i.seek(e),{complete:!1,neededOffset:r}}s=Xm(t,i).toNumber()}if("uuid"===n){if(!Zm(t,i,16)){r=i.offset+16;return i.seek(e),{complete:!1,neededOffset:r}}n=qm(t,i,16)}var o=i.offset,h={type:n,size:s,headerSize:o-e};return{complete:!0,header:h}}(t,i);if(!s.complete)return s;var n=s.header,r=n.size;0===r&&(r=t.byteLength-e);var o=e+r;if(o>t.byteLength){var h=o;return i.seek(e),{complete:!1,neededOffset:h}}var a={type:n.type,offset:e,data:new np(tp(t,e,o),new sp(n.headerSize))};return i.seek(o),{complete:!0,box:a}}function Y(t){return{version:t>>24,flags:new Gm(16777215&t)}}function ap(t,i){var e,s,n,r;return 1===i?(e=t.nextUint64(),s=t.nextUint64(),n=t.nextUint32(),r=t.nextUint64()):(e=t.nextUint32(),s=t.nextUint32(),n=t.nextUint32(),r=t.nextUint32()),{creation:e,modification:s,scale:n,duration:r}}function xc(t){return t.skipBits(4),{isLeading:t.readUInt(2),sampleDependsOn:t.readUInt(2),sampleIsDependedOn:t.readUInt(2),sampleHasRedundancy:t.readUInt(2),samplePaddingValue:t.readUInt(3),sampleIsNonSyncSample:Boolean(t.readBit()),sampleDegradationPriority:t.readUInt(16)}}function up(t){var i=t.nextUint32Array(9);return{a:Um(i[0],16),b:Um(i[1],16),u:Um(i[2],30),c:Um(i[3],16),d:Um(i[4],16),v:Um(i[5],30),x:Um(i[6],16),y:Um(i[7],16),w:Um(i[8],30)}}function ho(t){return new Qm(t.type,$m(ep(t.data.data),t.data.cursor.offset))}var cp=function(t){function i(i,e,s,n){void 0===s&&(s=0),void 0===n&&(n=0);var r=t.call(this,"hdlr",s,n)||this;return r.name=e,r.handlerType=i,r}return Do(i,t),_.defineProperty(i.prototype,"handlerType",{get:function(){return this.yM},set:function(t){this.yM=t},enumerable:!1,configurable:!0}),i.prototype.serializeReserved=function(t){t.writer.writeUInt(0,32),t.writer.writeUInt(0,32),t.writer.writeUInt(0,32)},i.prototype.getBoxContentSize=function(){var i,e;return t.prototype.getBoxContentSize.call(this)+4+4+12+(null!==(e=null===(i=this.name)||void 0===i?void 0:i.length)&&void 0!==e?e:0)+1},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(0,32),i.writer.writeString(this.handlerType),this.serializeReserved(i),this.name&&i.writer.writeString(this.name),i.writer.writeByte(0)},i}(le);function lp(t){var i=t.data,e=Y(i.nextUint32()),s=e.version,n=e.flags;i.skip(4);var r=i.nextChars(4);i.skip(12);var o=i.nextUTF8String();return new cp(r,o,s,n.raw)}!function(t){function i(){return t.call(this,"mdir")||this}Do(i,t),i.prototype.serializeReserved=function(t){t.writer.writeString("appl"),t.writer.writeUInt(0,32),t.writer.writeUInt(0,32)}}(cp);r(),r(),r();var dp=function(){function t(t,i){void 0===i&&(i=!1),this.fixed28BitMode=i,this.tag=t}return t.prototype.encodeSize=function(t){for(var i=[];t>0;)i.length>0&&(i[i.length-1]+=128),i.push(t%128),t>>=7;if(this.fixed28BitMode)for(;i.length<4;)i.push(128);return i.reverse()},_.defineProperty(t.prototype,"tag",{get:function(){return this.bM},set:function(t){if(!ti(t,8))throw new b("Provided tag does not fit in 8 bits.");this.bM=t},enumerable:!1,configurable:!0}),t.prototype.getSize=function(){return this.getDescriptorSize()+1+this.encodeSize(this.getDescriptorSize()).length},t.prototype.serialize=function(t){t.writer.writeByte(this.tag);for(var i=0,e=this.encodeSize(this.getDescriptorSize());i<e.length;i++){var s=e[i];t.writer.writeByte(s)}this.serializeDescriptorContent(t)},t}();r();!function(t){function i(i,e,s,n,r,o,h){void 0===h&&(h={});var a=t.call(this,4,h.fixed28BitMode)||this;return a.upStream=s,a.decoderSpecificInfo=o,a.objectTypeIndication=i,a.streamType=e,a.bufferSizeDb=n,a.maxBitrate=r.max,a.avgBitrate=r.avg,a}Do(i,t),_.defineProperty(i.prototype,"objectTypeIndication",{get:function(){return this.MM},set:function(t){if(!ti(t,8))throw new b("Provided objectTypeIndication does not fit in 8 bits.");this.MM=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"streamType",{get:function(){return this.TM},set:function(t){if(!ti(t,6))throw new b("Provided streamType does not fit in 6 bits.");this.TM=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"bufferSizeDb",{get:function(){return this.SM},set:function(t){if(!ti(t,24))throw new b("Provided bufferSizeDb does not fit in 24 bits.");this.SM=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"maxBitrate",{get:function(){return this.NM},set:function(t){if(!ti(t,32))throw new b("Provided maxBitrate does not fit in 32 bits.");this.NM=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"avgBitrate",{get:function(){return this.IM},set:function(t){if(!ti(t,32))throw new b("Provided avgBitrate does not fit in 32 bits.");this.IM=t},enumerable:!1,configurable:!0}),i.prototype.getDescriptorSize=function(){return 13+this.decoderSpecificInfo.reduce((function(t,i){return t+i.getSize()}),0)},i.prototype.serializeDescriptorContent=function(t){t.writer.writeByte(this.objectTypeIndication),t.writer.writeUInt(this.streamType,6),t.writer.writeBool(this.upStream),t.writer.writeBit(1),t.writer.writeUInt(this.bufferSizeDb,24),t.writer.writeUInt(this.maxBitrate,32),t.writer.writeUInt(this.avgBitrate,32);for(var i=0,e=this.decoderSpecificInfo;i<e.length;i++){e[i].serialize(t)}}}(dp);r();!function(t){function i(i,e){void 0===e&&(e={});var s=t.call(this,5,e.fixed28BitMode)||this;return s.data=i,s}Do(i,t),i.prototype.getDescriptorSize=function(){return this.data.length},i.prototype.serializeDescriptorContent=function(t){t.concat(As.from(this.data))}}(dp);r(),r();var fp=function(t){function i(i){void 0===i&&(i=!1);var e=t.call(this,6,i)||this;return e.predefined=2,e}return Do(i,t),i.prototype.getDescriptorSize=function(){return 1},i.prototype.serializeDescriptorContent=function(t){t.writer.writeByte(this.predefined)},i}(dp);!function(t){function i(i,e,s,n){void 0===n&&(n={});var r=t.call(this,3,n.fixed28BitMode)||this;return r.decoderConfigDescriptor=s,r.esId=i,r.streamPriority=e,r.dependsOnEsId=null==n?void 0:n.dependsOnEsId,r.urlString=null==n?void 0:n.url,r.ocrEsId=null==n?void 0:n.ocrEsId,r.slConfigDescriptor=new fp(n.fixed28BitMode),r}Do(i,t),_.defineProperty(i.prototype,"streamDependenceFlag",{get:function(){return void 0!==this.dependsOnEsId},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"urlFlag",{get:function(){return void 0!==this.urlString},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"ocrStreamFlag",{get:function(){return void 0!==this.ocrEsId},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"esId",{get:function(){return this.DM},set:function(t){if(!ti(t,16))throw new b("Provided esId does not fit in 16 bits.");this.DM=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"streamPriority",{get:function(){return this.EM},set:function(t){if(!ti(t,5))throw new b("Provided streamPriority does not fit in 5 bits.");this.EM=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"dependsOnEsId",{get:function(){return this.kM},set:function(t){if(t&&!ti(t,16))throw new b("Provided dependsOnEsId does not fit in 16 bits.");this.kM=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"ocrEsId",{get:function(){return this.xM},set:function(t){if(t&&!ti(t,16))throw new b("Provided ocrEsId does not fit in 16 bits.");this.xM=t},enumerable:!1,configurable:!0}),i.prototype.getDescriptorSize=function(){return 3+(this.streamDependenceFlag?2:0)+(this.urlFlag?1+this.urlString.length:0)+(this.ocrStreamFlag?2:0)+this.decoderConfigDescriptor.getSize()+this.slConfigDescriptor.getSize()},i.prototype.serializeDescriptorContent=function(t){t.writer.writeUInt(this.esId,16),t.writer.writeBool(this.streamDependenceFlag),t.writer.writeBool(this.urlFlag),t.writer.writeBool(this.ocrStreamFlag),t.writer.writeUInt(this.streamPriority,5),this.streamDependenceFlag&&t.writer.writeUInt(this.dependsOnEsId,16),this.urlFlag&&(t.writer.writeByte(this.urlString.length),t.writer.writeString(this.urlString)),this.ocrStreamFlag&&t.writer.writeUInt(this.ocrEsId,16),this.decoderConfigDescriptor.serialize(t),this.slConfigDescriptor.serialize(t)}}(dp);r(),r(),r(),r(),r();var gp=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.boxes=[],i}return Do(i,t),i.prototype.getSize=function(){return t.prototype.getSize.call(this)+this.boxes.reduce((function(t,i){return t+i.getSize()}),0)},i.prototype.serialize=function(){for(var i=t.prototype.serialize.call(this),e=0,s=this.boxes;e<s.length;e++){var n=s[e];i=i.concat(n.serialize())}return i},i}(Fu),Wh=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return Do(i,t),i.prototype.serializeBoxContent=function(t){},i.prototype.getBoxContentSize=function(){return 0},i}(gp),_p=function(t){function i(i,e){var s=t.call(this,i)||this;return s.dataReferenceIndex=e,s}return Do(i,t),_.defineProperty(i.prototype,"dataReferenceIndex",{get:function(){return this.LM},set:function(t){if(!ti(t,16))throw new b("Provided dataReferenceIndex does not fit in 16 bits.");this.LM=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 8},i.prototype.serializeBoxContent=function(t){for(var i=0;i<6;i++)t.writer.writeByte(0);t.writer.writeUInt(this.dataReferenceIndex,16)},i}(Wh),vp=function(t){function i(i,e,s,n){var r,o,h=this;return(h=t.call(this,i,e)||this).extra=n,h.channelCount=null!==(r=s.channelCount)&&void 0!==r?r:2,h.sampleSize=null!==(o=s.sampleSize)&&void 0!==o?o:16,h.sampleRate=s.sampleRate,h}return Do(i,t),_.defineProperty(i.prototype,"channelCount",{get:function(){return this.CM},set:function(t){if(!ti(t,16))throw new b("Provided channelCount does not fit in 16 bits.");this.CM=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"sampleSize",{get:function(){return this.jM},set:function(t){if(!ti(t,16))throw new b("Provided sampleSize does not fit in 16 bits.");this.jM=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"sampleRate",{get:function(){return this.OM},set:function(t){if(!ti(Nh(t,16),32))throw new b("Provided rate does not fit in 32 bits (fixed 16.16).");this.OM=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){var i,e;return t.prototype.getBoxContentSize.call(this)+8+2+2+2+2+(void 0!==this.sampleRate?4:0)+(null!==(e=null===(i=this.extra)||void 0===i?void 0:i.length)&&void 0!==e?e:0)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(0,32),i.writer.writeUInt(0,32),i.writer.writeUInt(this.channelCount,16),i.writer.writeUInt(this.sampleSize,16),i.writer.writeUInt(0,16),i.writer.writeUInt(0,16),i.writer.writeUInt(Nh(this.sampleRate,16),32),this.extra&&Bm(i.writer,this.extra)},i}(_p);r();!function(t){function i(i){var e=t.call(this,"stco",0,0)||this;return e.entries=i,e}Do(i,t),_.defineProperty(i.prototype,"entries",{get:function(){return this.RM},set:function(t){if(!ti(t.length,32))throw new b("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!ti(t,32)})))throw new b("Not all entries can be represented in 32 bits.");this.RM=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4*this.entries.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.entries.length,32);for(var e=0,s=this.entries;e<s.length;e++){var n=s[e];i.writer.writeUInt(n,32)}}}(le);r();!function(t){function i(i){var e=t.call(this,"clap")||this;return e.cleanApertureWidthN=i.cleanApertureWidthN,e.cleanApertureWidthD=i.cleanApertureWidthD,e.cleanApertureHeightN=i.cleanApertureHeightN,e.cleanApertureHeightD=i.cleanApertureHeightD,e.horizOffN=i.horizOffN,e.horizOffD=i.horizOffD,e.vertOffN=i.vertOffN,e.vertOffD=i.vertOffD,e}Do(i,t),_.defineProperty(i.prototype,"cleanApertureWidthN",{get:function(){return this.PM},set:function(t){if(!ti(t,32))throw new b("Provided cleanApertureWidthN does not fit in 32 bits.");this.PM=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"cleanApertureWidthD",{get:function(){return this.zM},set:function(t){if(!ti(t,32))throw new b("Provided cleanApertureWidthD does not fit in 32 bits.");this.zM=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"cleanApertureHeightN",{get:function(){return this.BM},set:function(t){if(!ti(t,32))throw new b("Provided cleanApertureHeightN does not fit in 32 bits.");this.BM=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"cleanApertureHeightD",{get:function(){return this.UM},set:function(t){if(!ti(t,32))throw new b("Provided cleanApertureHeightD does not fit in 32 bits.");this.UM=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"horizOffN",{get:function(){return this.QM},set:function(t){if(!ti(t,32))throw new b("Provided horizOffN does not fit in 32 bits.");this.QM=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"horizOffD",{get:function(){return this.FM},set:function(t){if(!ti(t,32))throw new b("Provided horizOffD does not fit in 32 bits.");this.FM=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"vertOffN",{get:function(){return this.YM},set:function(t){if(!ti(t,32))throw new b("Provided vertOffN does not fit in 32 bits.");this.YM=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"vertOffD",{get:function(){return this.VM},set:function(t){if(!ti(t,32))throw new b("Provided vertOffD does not fit in 32 bits.");this.VM=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 32},i.prototype.serializeBoxContent=function(t){t.writer.writeUInt(this.cleanApertureWidthN,32),t.writer.writeUInt(this.cleanApertureWidthD,32),t.writer.writeUInt(this.cleanApertureHeightN,32),t.writer.writeUInt(this.cleanApertureHeightD,32),t.writer.writeUInt(this.horizOffN,32),t.writer.writeUInt(this.horizOffD,32),t.writer.writeUInt(this.vertOffN,32),t.writer.writeUInt(this.vertOffD,32)}}(Fu);r();!function(t){function i(i,e){var s=t.call(this,"ctts",i,0)||this;return s.entries=e,s}Do(i,t),_.defineProperty(i.prototype,"entries",{get:function(){return this.RM},set:function(t){if(!ti(t.length,32))throw new b("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!ti(t.sampleCount,32)||!ti(t.sampleOffset,32)})))throw new b("Not all entries can be represented in 64 bits.");this.RM=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+8*this.entries.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.entries.length,32);for(var e=0,s=this.entries;e<s.length;e++){var n=s[e];i.writer.writeUInt(n.sampleCount,32),0===this.version?i.writer.writeUInt(n.sampleOffset,32):1===this.version&&i.writer.writeInt(n.sampleOffset,32)}}}(le);r();!function(t){function i(i){var e=t.call(this,"url ",0,void 0===i?1:0)||this;return e.location=i,e}Do(i,t),_.defineProperty(i.prototype,"location",{get:function(){return this.GM},set:function(t){this.flags=void 0===t?1:0,this.GM=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){var i=t.prototype.getBoxContentSize.call(this);return this.location?i+this.location.length+1:i},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.location&&(i.writer.writeString(this.location),i.writer.writeByte(0))}}(le);r();!function(t){function i(i,e,s){var n=t.call(this,"urn ",0,s)||this;return n.name=i,n.location=e,n}Do(i,t),_.defineProperty(i.prototype,"location",{get:function(){return this.GM},set:function(t){if(1&this.flags)throw new b("The moov containment flag is set, a DataEntryUrlBox should be used instead.");this.GM=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){var i=t.prototype.getBoxContentSize.call(this)+this.name.length+1;return this.location?i+this.location.length+1:i},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeString(this.name),i.writer.writeByte(0),this.location&&(i.writer.writeString(this.location),i.writer.writeByte(0))}}(le);r();!function(t){function i(){return t.call(this,"dinf")||this}Do(i,t)}(Wh);r(),r();var wp=function(t){function i(i,e,s){var n=t.call(this,i)||this;if(n.version=e,!ti(e,8))throw new b("the provided version cannot fit in 8 bits.");return n.flags=s,n}return Do(i,t),_.defineProperty(i.prototype,"flags",{get:function(){return this.xv},set:function(t){this.xv=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 4},i.prototype.serializeFlags=function(t){if("number"!=typeof this.flags)throw new b("Missing custom serializeFlags method.");t.writer.writeUInt(this.flags,24)},i.prototype.serializeBoxContent=function(t){t.writer.writeByte(this.version),this.serializeFlags(t)},i}(gp);!function(t){function i(){return t.call(this,"dref",0,0)||this}Do(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.boxes.length,32)}}(wp);r(),r();var mp=function(t){function i(i,e,s){void 0===s&&(s=0);var n=t.call(this,"elst",e,s)||this;return n.entries=i,n}return Do(i,t),_.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"entries",{get:function(){return this.RM},set:function(t){for(var i=0,e=t;i<e.length;i++){var s=e[i];if(!ti(s.segmentDuration,this.bitSize))throw new b("SegmentDuration of one of the entries does not fit in ".concat(this.bitSize," bits."));if(!ti(s.mediaTime,this.bitSize))throw new b("MediaTime of one of the entries does not fit in ".concat(this.bitSize," bits."));if(!ti(s.mediaRateInteger,16))throw new b("Provided mediaRateInteger does not fit in 16 bits.");if(s.mediaRateFraction&&!ti(s.mediaRateFraction,16))throw new b("Provided mediaRateFraction does not fit in 16 bits.")}this.RM=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+this.entries.length*(2*this.bitSize/8+2+2)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.entries.length,32),this.serializeElstBoxContent(i)},i}(le),pp=function(t){function i(i,e){return void 0===e&&(e=0),t.call(this,i,0,e)||this}return Do(i,t),i.prototype.serializeElstBoxContent=function(t){for(var i,e=0,s=this.entries;e<s.length;e++){var n=s[e];t.writer.writeUInt(n.segmentDuration,32),t.writer.writeInt(n.mediaTime,32),t.writer.writeUInt(n.mediaRateInteger,16),t.writer.writeUInt(null!==(i=n.mediaRateFraction)&&void 0!==i?i:0,16)}},i}(mp),Ap=function(t){function i(i,e){return void 0===e&&(e=0),t.call(this,i,1,e)||this}return Do(i,t),i.prototype.serializeElstBoxContent=function(t){for(var i,e=0,s=this.entries;e<s.length;e++){var n=s[e];t.writer.writeUInt(n.segmentDuration.getHighBitsUnsigned(),32),t.writer.writeUInt(n.segmentDuration.getLowBitsUnsigned(),32),t.writer.writeInt(n.mediaTime.getHighBits(),32),t.writer.writeInt(n.mediaTime.getLowBits(),32),t.writer.writeUInt(n.mediaRateInteger,16),t.writer.writeUInt(null!==(i=n.mediaRateFraction)&&void 0!==i?i:0,16)}},i}(mp);function yp(t){for(var i=t.data,e=Y(i.nextUint32()),s=e.version,n=e.flags,r=i.nextUint32(),o=[],h=0;h<r;h++){var a=void 0,u=void 0;0===s?(a=i.nextUint32(),u=i.nextInt32()):(a=i.nextUint64(),u=i.nextInt64());var c=i.nextInt16(),l=i.nextInt16();o.push({segmentDuration:a,mediaTime:u,mediaRateFraction:l,mediaRateInteger:c})}return 0===s?new pp(o,n.raw):new Ap(o,n.raw)}var bp=function(t){function i(){return t.call(this,"edts")||this}return Do(i,t),i}(Wh);function Mp(t){for(var i=new bp,e=0,s=op(t.data);e<s.length;e++){var n=s[e];fu(n,"elst")?i.boxes.push(yp(n)):i.boxes.push(ho(n))}return i}r(),r();var Tp=function(t){function i(i,e,s,n){var r=t.call(this,i)||this;return r.majorBrand=e,r.minorVersion=s,r.compatibleBrands=n,r}return Do(i,t),_.defineProperty(i.prototype,"majorBrand",{get:function(){return this.WM},set:function(t){if(4!==t.length)throw new b("the provided major brand does not conform to the 4 character requirement");this.WM=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"minorVersion",{get:function(){return this.ZM},set:function(t){if(!ti(t,32))throw new b("the provided minor version does not fit in 32 bits.");this.ZM=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"compatibleBrands",{get:function(){return this.HM},set:function(t){if(t.some((function(t){return 4!==t.length})))throw new b("Some of the compatible brands do not conform to the 4 character requirement");this.HM=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 4*(2+this.compatibleBrands.length)},i.prototype.serializeBoxContent=function(t){t.writer.writeString(this.majorBrand),t.writer.writeUInt(this.minorVersion,32);for(var i=0,e=this.compatibleBrands;i<e.length;i++){var s=e[i];t.writer.writeString(s)}},i}(Fu),Sp=function(t){function i(i,e,s){return t.call(this,"ftyp",i,e,s)||this}return Do(i,t),i}(Tp);function Np(t){for(var i=t.data,e=i.nextChars(4),s=i.nextUint32(),n=[];i.cursor.offset<i.data.byteLength;)n.push(i.nextChars(4));return new Sp(e,s,n)}r();var Ip=function(t){function i(i,e){void 0===e&&(e="free");var s=t.call(this,e)||this;return s.data=i,s}return Do(i,t),i.prototype.getBoxContentSize=function(){var t,i;return null!==(i=null===(t=this.data)||void 0===t?void 0:t.length)&&void 0!==i?i:0},i.prototype.serializeBoxContent=function(t){this.data&&t.concat(As.from(this.data))},i}(Fu);r(),r();var Dp=function(t){function i(i,e,s,n){void 0===n&&(n=0);var r=t.call(this,"mdhd",s,n)||this;return r.creationTime=i.creation,r.modificationTime=i.modification,r.timescale=i.scale,r.duration=i.duration,r.language=e,r}return Do(i,t),_.defineProperty(i.prototype,"creationTime",{get:function(){return this.XM},set:function(t){if(!ti(t,this.bitSize))throw new b("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.XM=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"modificationTime",{get:function(){return this.qM},set:function(t){if(!ti(t,this.bitSize))throw new b("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.qM=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"timescale",{get:function(){return this.KM},set:function(t){if(!ti(t,32))throw new b("Provided sequence number does not fit in 32 bits.");this.KM=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"duration",{get:function(){return this.JM},set:function(t){if(!ti(t,this.bitSize))throw new b("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.JM=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"language",{get:function(){return this.$M},set:function(t){if(!Lp(t))throw new b("Expected an ISO-639-2/T language code");this.$M=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8*3+4+2+2},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.serializeMdiaContent(i),i.writer.writeBit(0);for(var e=0,s=this.language;e<s.length;e++){var n=s[e];i.writer.writeUInt(n.charCodeAt(0)-96,5)}i.writer.writeUInt(0,16)},i}(le),Ep=function(t){function i(i,e,s){return void 0===s&&(s=0),t.call(this,i,e,0,s)||this}return Do(i,t),i.prototype.serializeMdiaContent=function(t){t.writer.writeUInt(this.creationTime,32),t.writer.writeUInt(this.modificationTime,32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration,32)},i}(Dp),kp=function(t){function i(i,e,s){return void 0===s&&(s=0),t.call(this,i,e,1,s)||this}return Do(i,t),i.prototype.serializeMdiaContent=function(t){t.writer.writeUInt(this.creationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.creationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration.getHighBitsUnsigned(),32),t.writer.writeUInt(this.duration.getLowBitsUnsigned(),32)},i}(Dp);function xp(t){var i=t.data,e=Y(i.nextUint32()),s=e.version,n=e.flags,r=ap(i,s),o=new Om(As.from(i.nextUint8Array(2)));o.skipBits(1);for(var h=[],a=0;a<3;a++)h.push(o.readUInt(5));var u=h.map((function(t){return String.fromCharCode(t+96)})).join("");return Lp(u)||(u="und"),i.skip(2),0===s?new Ep(r,u,n.raw):new kp(r,u,n.raw)}function Lp(t){return/^[a-z]{3}$/.test(t)}var Cp=function(t){function i(){return t.call(this,"mdia")||this}return Do(i,t),i}(Wh);function jp(t){for(var i=new Cp,e=0,s=op(t.data);e<s.length;e++){var n=s[e];fu(n,"mdhd")?i.boxes.push(xp(n)):fu(n,"hdlr")?i.boxes.push(lp(n)):i.boxes.push(ho(n))}return i}r();var Op=function(t){function i(){var i=t.call(this,"mdat")||this;return i.data=new As,i}return Do(i,t),i.prototype.getBoxContentSize=function(){return this.data.length},i.prototype.serializeBoxContent=function(t){t.concat(this.data)},i}(Fu);function Rp(t){var i=t.data,e=i.nextUint8Array(i.data.byteLength-i.cursor.offset),s=new Op;return s.data.pushRange(e),s}r();!function(t){function i(){return t.call(this,"minf")||this}Do(i,t)}(Wh);r();var Pp;!function(t){function i(i){var e=t.call(this,"meta",0,0)||this;return e.handler=i,e}Do(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.handler.getSize()},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.concat(this.handler.serialize())}}(wp);r(),r(),function(t){t.VIDEO="vide",t.AUXILIARY_VIDEO="auxv",t.AUDIO="soun",t.METADATA="meta",t.HINT="hint",t.TEXT="text",t.SUBTITLE="subt",t.FONT="fdsm"}(Pp||(Pp={})),r();var zp,Bp,Up={a:1,b:0,u:0,c:0,d:1,v:0,x:0,y:0,w:1};function Qp(t,i){i.writer.writeUInt(Nh(t.a,16),32),i.writer.writeUInt(Nh(t.b,16),32),i.writer.writeUInt(Nh(0,30),32),i.writer.writeUInt(Nh(t.c,16),32),i.writer.writeUInt(Nh(t.d,16),32),i.writer.writeUInt(Nh(0,30),32),i.writer.writeUInt(Nh(t.x,16),32),i.writer.writeUInt(Nh(t.y,16),32),i.writer.writeUInt(Nh(1,30),32)}function Fp(t,i){var e,s,n,r;i.writer.writeUInt(null!==(e=t.isLeading)&&void 0!==e?e:zp.UNKNOWN,2),i.writer.writeUInt(null!==(s=t.sampleDependsOn)&&void 0!==s?s:Bp.UNKNOWN,2),i.writer.writeUInt(null!==(n=t.sampleIsDependedOn)&&void 0!==n?n:Bp.UNKNOWN,2),i.writer.writeUInt(null!==(r=t.sampleHasRedundancy)&&void 0!==r?r:Bp.UNKNOWN,2)}function Yp(t,i){var e,s,n;i.writer.writeUInt(0,4),Fp(t,i),i.writer.writeUInt(null!==(e=t.samplePaddingValue)&&void 0!==e?e:0,3),i.writer.writeBool(null!==(s=t.sampleIsNonSyncSample)&&void 0!==s&&s),i.writer.writeUInt(null!==(n=t.sampleDegradationPriority)&&void 0!==n?n:0,16)}r(),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WITH_DEPENDENCY=1]="WITH_DEPENDENCY",t[t.NO=2]="NO",t[t.WITHOUT_DEPENDENCY=3]="WITHOUT_DEPENDENCY"}(zp||(zp={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.YES=1]="YES",t[t.NO=2]="NO",t[t.RESERVED=3]="RESERVED"}(Bp||(Bp={})),r(),r();var Vp=function(){};r(),r(),r();var Gp=function(t){function i(i,e,s){var n=t.call(this,"pssh",i,0)||this;return n.systemId=e,n.data=s,n}return Do(i,t),_.defineProperty(i.prototype,"systemId",{get:function(){return this.tT},set:function(t){if(16!==t.length)throw new b("Provided systemId length is not 16.");this.tT=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"data",{get:function(){return this.Xp},set:function(t){if(!ti(t.length,32))throw new b("Provided data length does not fit in 32 bits.");this.Xp=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+16+4+this.data.length},i.prototype.serializeVersionBoxContent=function(t){},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.concat(As.from(this.systemId)),this.serializeVersionBoxContent(i),i.writer.writeUInt(this.data.length,32),i.concat(As.from(this.data))},i}(le),Wp=function(t){function i(i,e){return t.call(this,0,i,e)||this}return Do(i,t),i}(Gp),Zp=function(t){function i(i,e,s){var n=t.call(this,1,i,e)||this;return n.kIds=s,n}return Do(i,t),_.defineProperty(i.prototype,"kIds",{get:function(){return this.iT},set:function(t){if(!ti(t.length,32))throw new b("Provided kIds length cannot fit in 32 bits.");if(t.some((function(t){return 16!==t.length})))throw new b("Not all provided key ids are 16 bytes long.");this.iT=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+16*this.kIds.length},i.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.kIds.length,32);for(var i=0,e=this.kIds;i<e.length;i++){var s=e[i];t.concat(As.from(s))}},i}(Gp);function Hp(t){var i=t.data.nextUint8();t.data.skip(3);var e=t.data.nextUint8Array(16),s=[];if(1===i)for(var n=t.data.nextUint32(),r=0;r<n;r++)s.push(t.data.nextUint8Array(16));var o=t.data.nextUint32(),h=t.data.nextUint8Array(o);return 1===i?new Zp(e,h,s):new Wp(e,h)}r(),r();var Xp=function(t){function i(i,e,s){void 0===s&&(s=0);var n=t.call(this,"mehd",e,s)||this;return n.fragmentDuration=i,n}return Do(i,t),_.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"fragmentDuration",{get:function(){return this.eT},set:function(t){if(!ti(t,this.bitSize))throw new b("The provided fragmentDuration does not fit in ".concat(this.bitSize," bits."));this.eT=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8},i}(le),qp=function(t){function i(i,e){return void 0===e&&(e=0),t.call(this,i,0,e)||this}return Do(i,t),i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.fragmentDuration,32)},i}(Xp),Kp=function(t){function i(i,e){return void 0===e&&(e=0),t.call(this,i,1,e)||this}return Do(i,t),i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.fragmentDuration.getHighBitsUnsigned(),32),i.writer.writeUInt(this.fragmentDuration.getLowBitsUnsigned(),32)},i}(Xp);function Jp(t){var i=t.data,e=Y(i.nextUint32()),s=e.version,n=e.flags;return 0===s?new qp(i.nextUint32(),n.raw):new Kp(i.nextUint64(),n.raw)}r();var Il=function(t){function i(i,e,s,n){void 0===e&&(e={}),void 0===s&&(s=0),void 0===n&&(n=0);var r,o,h,a=this;return(a=t.call(this,"trex",s,n)||this).trackId=i,a.defaultSampleDescriptionIndex=null!==(r=null==e?void 0:e.sampleDescriptionIndex)&&void 0!==r?r:0,a.defaultSampleDuration=null!==(o=e.sampleDuration)&&void 0!==o?o:0,a.defaultSampleSize=null!==(h=e.sampleSize)&&void 0!==h?h:0,a.defaultSampleFlags=e.sampleFlags,a}return Do(i,t),_.defineProperty(i.prototype,"trackId",{get:function(){return this.sT},set:function(t){if(!ti(t,32))throw new b("Provided track id does not fit in 32 bits.");this.sT=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"defaultSampleDescriptionIndex",{get:function(){return this.nT},set:function(t){if(!ti(t,32))throw new b("Provided default sample description index does not fit in 32 bits.");this.nT=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"defaultSampleDuration",{get:function(){return this.rT},set:function(t){if(!ti(t,32))throw new b("Provided default sample duration does not fit in 32 bits.");this.rT=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"defaultSampleSize",{get:function(){return this.oT},set:function(t){if(!ti(t,32))throw new b("Provided default sample size does not fit in 32 bits.");this.oT=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"defaultSampleFlags",{get:function(){return this.hT},set:function(t){if((null==t?void 0:t.samplePaddingValue)&&!ti(t.samplePaddingValue,3))throw new b("Provided sample padding value does not fit in 3 bits.");if((null==t?void 0:t.sampleDegradationPriority)&&!ti(t.sampleDegradationPriority,16))throw new b("Provided sample degradation priority does not fit in 16 bits.");this.hT=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+20},i.prototype.serializeBoxContent=function(i){var e;t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.trackId,32),i.writer.writeUInt(this.defaultSampleDescriptionIndex,32),i.writer.writeUInt(this.defaultSampleDuration,32),i.writer.writeUInt(this.defaultSampleSize,32),Yp(null!==(e=this.defaultSampleFlags)&&void 0!==e?e:{},i)},i}(le);function $p(t){var i=t.data,e=Y(i.nextUint32()),s=e.version,n=e.flags,r=i.nextUint32(),o=i.nextUint32(),h=i.nextUint32(),a=i.nextUint32(),u=xc(new Om(As.from(i.nextUint8Array(4))));return new Il(r,{sampleDescriptionIndex:o,sampleDuration:h,sampleSize:a,sampleFlags:u},s,n.raw)}var tA=function(t){function i(){return t.call(this,"mvex")||this}return Do(i,t),i}(Wh);function iA(t){for(var i=new tA,e=0,s=op(t.data);e<s.length;e++){var n=s[e];fu(n,"mehd")?i.boxes.push(Jp(n)):fu(n,"trex")?i.boxes.push($p(n)):i.boxes.push(ho(n))}return i}r();var eA=function(t){function i(e,s,n,r,o){void 0===o&&(o=0);var h,a,u,c=this;return(c=t.call(this,"mvhd",r,o)||this).creationTime=e.creation,c.modificationTime=e.modification,c.timescale=e.scale,c.duration=e.duration,c.rate=null!==(h=n.rate)&&void 0!==h?h:i.DEFAULT_RATE,c.volume=null!==(a=n.volume)&&void 0!==a?a:i.DEFAULT_VOLUME,c.matrix=null!==(u=n.matrix)&&void 0!==u?u:Up,c.aT=s,c}return Do(i,t),_.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"creationTime",{get:function(){return this.XM},set:function(t){if(!ti(t,this.bitSize))throw new b("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.XM=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"modificationTime",{get:function(){return this.qM},set:function(t){if(!ti(t,this.bitSize))throw new b("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.qM=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"timescale",{get:function(){return this.KM},set:function(t){if(!ti(t,32))throw new b("Provided sequence number does not fit in 32 bits.");this.KM=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"duration",{get:function(){return this.JM},set:function(t){if(!ti(t,this.bitSize))throw new b("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.JM=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"rate",{get:function(){return this.uT},set:function(t){if(!ti(Nh(t,16),32))throw new b("Provided rate does not fit in 32 bits (fixed 16.16).");this.uT=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"volume",{get:function(){return this.cT},set:function(t){if(!ti(Nh(t,8),16))throw new b("Provided volume does not fit in 16 bits (fixed 8.8).");this.cT=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"matrix",{get:function(){return this.lT},set:function(t){if(0!==t.u||0!==t.v||1!==t.w)throw new b("(u, v, w) does not match the required (0, 0, 1)");this.lT=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"nextTrackId",{get:function(){return this.aT},set:function(t){if(0===t)throw new b("NextTrackId cannot be 0.");if(!ti(t,32))throw new b("NextTrackId cannot exceed 32 bits.");this.aT=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8*3+4+4+2+2+8+36+24+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.serializeMvhdContent(i),i.writer.writeUInt(Nh(this.rate,16),32),i.writer.writeUInt(Nh(this.volume,8),16),i.writer.writeUInt(0,16),i.writer.writeUInt(0,32),i.writer.writeUInt(0,32),Qp(this.matrix,i);for(var e=0;e<6;e++)i.writer.writeUInt(0,32);i.writer.writeUInt(this.nextTrackId,32)},i.DEFAULT_RATE=1,i.DEFAULT_VOLUME=1,i}(le),sA=function(t){function i(i,e,s,n){return void 0===s&&(s={}),void 0===n&&(n=0),t.call(this,i,e,s,0,n)||this}return Do(i,t),i.prototype.serializeMvhdContent=function(t){t.writer.writeUInt(this.creationTime,32),t.writer.writeUInt(this.modificationTime,32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration,32)},i}(eA),nA=function(t){function i(i,e,s,n){return void 0===s&&(s={}),void 0===n&&(n=0),t.call(this,i,e,s,1,n)||this}return Do(i,t),i.prototype.serializeMvhdContent=function(t){t.writer.writeUInt(this.creationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.creationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration.getHighBitsUnsigned(),32),t.writer.writeUInt(this.duration.getLowBitsUnsigned(),32)},i}(eA);function rA(t){var i=t.data,e=Y(i.nextUint32()),s=e.version,n=e.flags,r=ap(i,s),o=Um(i.nextUint32(),16),h=Um(i.nextUint16(),8);i.skip(2),i.skip(8);var a=up(i);i.skip(24);var u=i.nextUint32();return 0===s?new sA(r,u,{rate:o,volume:h,matrix:a},n.raw):new nA(r,u,{rate:o,volume:h,matrix:a},n.raw)}r(),r();var oA=function(t){function i(i,e,s,n,r,o,h){void 0===h&&(h={});var a,u,c,l=this;return l=t.call(this,"tkhd",i,function(t){var i,e,s,n;return{trackEnabled:null===(i=null==t?void 0:t.trackEnabled)||void 0===i||i,trackInMovie:null===(e=null==t?void 0:t.trackInMovie)||void 0===e||e,trackInPreview:null===(s=null==t?void 0:t.trackInPreview)||void 0===s||s,trackSizeIsAspectRatio:null!==(n=null==t?void 0:t.trackSizeIsAspectRatio)&&void 0!==n&&n}}(h))||this,l.creationTime=e.creation,l.modificationTime=e.modification,l.trackId=s,l.duration=e.duration,l.volume=n,l.width=r,l.height=o,l.layer=null!==(a=h.layer)&&void 0!==a?a:0,l.alternateGroup=null!==(u=h.alternateGroup)&&void 0!==u?u:0,l.matrix=null!==(c=h.matrix)&&void 0!==c?c:Up,l}return Do(i,t),_.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"creationTime",{get:function(){return this.XM},set:function(t){if(!ti(t,this.bitSize))throw new b("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.XM=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"modificationTime",{get:function(){return this.qM},set:function(t){if(!ti(t,this.bitSize))throw new b("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.qM=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"trackId",{get:function(){return this.sT},set:function(t){if(0===t)throw new b("trackId cannot be 0.");if(!ti(t,32))throw new b("trackId cannot exceed 32 bits.");this.sT=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"duration",{get:function(){return this.JM},set:function(t){if(!ti(t,this.bitSize))throw new b("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.JM=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"volume",{get:function(){return this.cT},set:function(t){if(!ti(Nh(t,8),16))throw new b("Provided volume does not fit in 16 bits (fixed 8.8).");this.cT=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"width",{get:function(){return this.dT},set:function(t){if(!ti(Nh(t,16),32))throw new b("Provided width does not fit in 32 bits (fixed 16.16).");this.dT=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"height",{get:function(){return this.fT},set:function(t){if(!ti(Nh(t,16),32))throw new b("Provided height does not fit in 32 bits (fixed 16.16).");this.fT=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"layer",{get:function(){return this.gT},set:function(t){if(!ti(t,16))throw new b("Provided layer does not fit in 16 bits.");this.gT=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"alternateGroup",{get:function(){return this._T},set:function(t){if(!ti(t,16))throw new b("Provided alternateGroup does not fit in 16 bits.");this._T=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"matrix",{get:function(){return this.lT},set:function(t){if(0!==t.u||0!==t.v||1!==t.w)throw new b("(u, v, w) does not match the required (0, 0, 1)");this.lT=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8*3+4+4+8+2+2+2+2+36+4+4},i.prototype.serializeFlags=function(t){t.writer.writeUInt(0,20),t.writer.writeBool(this.flags.trackSizeIsAspectRatio),t.writer.writeBool(this.flags.trackInPreview),t.writer.writeBool(this.flags.trackInMovie),t.writer.writeBool(this.flags.trackEnabled)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.serializeTkhdContent(i),i.writer.writeUInt(0,32),i.writer.writeUInt(0,32),i.writer.writeUInt(this.layer,16),i.writer.writeUInt(this.alternateGroup,16),i.writer.writeUInt(Nh(this.volume,8),16),i.writer.writeUInt(0,16),Qp(this.matrix,i),i.writer.writeUInt(Nh(this.width,16),32),i.writer.writeUInt(Nh(this.height,16),32)},i}(le),hA=function(t){function i(i,e,s,n,r,o){return t.call(this,0,i,e,s,n,r,o)||this}return Do(i,t),i.prototype.serializeTkhdContent=function(t){t.writer.writeUInt(this.creationTime,32),t.writer.writeUInt(this.modificationTime,32),t.writer.writeUInt(this.trackId,32),t.writer.writeUInt(0,32),t.writer.writeUInt(this.duration,32)},i}(oA),Ec=function(t){function i(i,e,s,n,r,o){return t.call(this,1,i,e,s,n,r,o)||this}return Do(i,t),i.prototype.serializeTkhdContent=function(t){t.writer.writeUInt(this.creationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.creationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.trackId,32),t.writer.writeUInt(0,32),t.writer.writeUInt(this.duration.getHighBitsUnsigned(),32),t.writer.writeUInt(this.duration.getLowBitsUnsigned(),32)},i}(oA);function aA(t){var i,e,s,n,r=t.data,o=Y(r.nextUint32()),h=o.version,a=o.flags,u=a.isSet(8),c=a.isSet(4),l=a.isSet(2),d=a.isSet(1);0===h?(i=r.nextUint32(),e=r.nextUint32(),s=r.nextUint32(),r.skip(4),n=r.nextUint32()):(i=r.nextUint64(),e=r.nextUint64(),s=r.nextUint32(),r.skip(4),n=r.nextUint64()),r.skip(8);var f=r.nextInt16(),g=r.nextInt16(),_=Um(r.nextInt16(),8);r.skip(2);var v=up(r),w=Um(r.nextUint32(),16),m=Um(r.nextUint32(),16);return 0===h?new hA({creation:i,modification:e,duration:n},s,_,w,m,{layer:f,matrix:v,alternateGroup:g,trackSizeIsAspectRatio:u,trackEnabled:d,trackInPreview:c,trackInMovie:l}):new Ec({creation:i,modification:e,duration:n},s,_,w,m,{layer:f,matrix:v,alternateGroup:g,trackSizeIsAspectRatio:u,trackEnabled:d,trackInPreview:c,trackInMovie:l})}var uA=function(t){function i(){return t.call(this,"trak")||this}return Do(i,t),i}(Wh);function cA(t){for(var i=new uA,e=0,s=op(t.data);e<s.length;e++){var n=s[e];fu(n,"tkhd")?i.boxes.push(aA(n)):fu(n,"mdia")?i.boxes.push(jp(n)):fu(n,"edts")?i.boxes.push(Mp(n)):i.boxes.push(ho(n))}return i}var lA=function(t){function i(){return t.call(this,"moov")||this}return Do(i,t),i}(Wh);function dA(t){for(var i=new lA,e=0,s=op(t.data);e<s.length;e++){var n=s[e];fu(n,"mvhd")?i.boxes.push(rA(n)):fu(n,"trak")?i.boxes.push(cA(n)):fu(n,"mvex")?i.boxes.push(iA(n)):fu(n,"pssh")?i.boxes.push(Hp(n)):i.boxes.push(ho(n))}return i}r(),r(),r();var fA=function(t){function i(i,e,s){void 0===s&&(s=0);var n=t.call(this,"tfdt",e,s)||this;return n.baseMediaDecodeTime=i,n}return Do(i,t),_.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"baseMediaDecodeTime",{get:function(){return this.vT},set:function(t){if(!ti(t,this.bitSize))throw new b("Provided baseMediaDecodeTime does not fit in ".concat(this.bitSize," bits."));this.vT=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8},i}(le),gA=function(t){function i(i,e){return void 0===e&&(e=0),t.call(this,i,0,e)||this}return Do(i,t),i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.baseMediaDecodeTime,32)},i}(fA),at=function(t){function i(i,e){return void 0===e&&(e=0),t.call(this,i,1,e)||this}return Do(i,t),i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.baseMediaDecodeTime.getHighBitsUnsigned(),32),i.writer.writeUInt(this.baseMediaDecodeTime.getLowBitsUnsigned(),32)},i}(fA);function _A(t){var i=t.data,e=Y(i.nextUint32()),s=e.version,n=e.flags;return 0===s?new gA(i.nextUint32(),n.raw):new at(i.nextUint64(),n.raw)}r();var vA=function(t){function i(i,e){void 0===e&&(e=0);var s=t.call(this,"tfhd",e,function(t){return{baseDataOffsetPresent:void 0!==t.baseDataOffset,sampleDescriptionIndexPresent:void 0!==t.sampleDescriptionIndex,defaultSampleDurationPresent:void 0!==t.defaultSampleDuration,defaultSampleSizePresent:void 0!==t.defaultSampleSize,defaultSampleFlagsPresent:void 0!==t.defaultSampleFlags,durationIsEmpty:t.durationIsEmpty,defaultBaseIsMoof:t.defaultBaseIsMoof}}(i))||this;return s.trackId=i.trackId,s.baseDataOffset=i.baseDataOffset,s.sampleDescriptionIndex=i.sampleDescriptionIndex,s.defaultSampleDuration=i.defaultSampleDuration,s.defaultSampleSize=i.defaultSampleSize,s.defaultSampleFlags=i.defaultSampleFlags,s}return Do(i,t),_.defineProperty(i.prototype,"trackId",{get:function(){return this.sT},set:function(t){if(!ti(t,32))throw new b("Provided track id does not fit in 32 bits.");this.sT=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"baseDataOffset",{get:function(){return this.wT},set:function(t){if(void 0===t&&this.flags.baseDataOffsetPresent)throw new b("The base data offset present flag is set.");if(void 0!==t&&!this.flags.baseDataOffsetPresent)throw new b("The base data offset present flag is not set.");if(t&&!ti(t,64))throw new b("Provided baseDataOffset does not fit in 32 bits.");this.wT=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"sampleDescriptionIndex",{get:function(){return this.mT},set:function(t){if(void 0===t&&this.flags.sampleDescriptionIndexPresent)throw new b("The sample description index flag is set.");if(void 0!==t&&!this.flags.sampleDescriptionIndexPresent)throw new b("The sample description index flag is not set.");if(t&&!ti(t,32))throw new b("Provided sampleDescriptionIndex does not fit in 32 bits.");this.mT=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"defaultSampleDuration",{get:function(){return this.rT},set:function(t){if(void 0===t&&this.flags.defaultSampleDurationPresent)throw new b("The default sample duration present flag is set.");if(void 0!==t&&!this.flags.defaultSampleDurationPresent)throw new b("The default sample duration present flag is not set.");if(t&&!ti(t,32))throw new b("Provided defaultSampleDuration does not fit in 32 bits.");this.rT=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"defaultSampleSize",{get:function(){return this.oT},set:function(t){if(void 0===t&&this.flags.defaultSampleSizePresent)throw new b("The default sample size present flag is set.");if(void 0!==t&&!this.flags.defaultSampleSizePresent)throw new b("The default sample size present flag is not set.");if(t&&!ti(t,32))throw new b("Provided defaultSampleSize does not fit in 32 bits.");this.oT=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"defaultSampleFlags",{get:function(){return this.hT},set:function(t){if(void 0===t&&this.flags.defaultSampleFlagsPresent)throw new b("The default sample flags present flag is set.");if(void 0!==t&&!this.flags.defaultSampleFlagsPresent)throw new b("The default sample flags present flag is not set.");if((null==t?void 0:t.samplePaddingValue)&&!ti(t.samplePaddingValue,3))throw new b("Provided sample padding value does not fit in 3 bits.");if((null==t?void 0:t.sampleDegradationPriority)&&!ti(t.sampleDegradationPriority,16))throw new b("Provided sample degradation priority does not fit in 16 bits.");this.hT=t},enumerable:!1,configurable:!0}),i.prototype.serializeFlags=function(t){t.writer.writeUInt(0,6),t.writer.writeBool(this.flags.defaultBaseIsMoof),t.writer.writeBool(this.flags.durationIsEmpty),t.writer.writeByte(0),t.writer.writeUInt(0,2),t.writer.writeBool(this.flags.defaultSampleFlagsPresent),t.writer.writeBool(this.flags.defaultSampleSizePresent),t.writer.writeBool(this.flags.defaultSampleDurationPresent),t.writer.writeBit(0),t.writer.writeBool(this.flags.sampleDescriptionIndexPresent),t.writer.writeBool(this.flags.baseDataOffsetPresent)},i.prototype.getBoxContentSize=function(){var i=t.prototype.getBoxContentSize.call(this)+4;return this.flags.baseDataOffsetPresent&&(i+=8),this.flags.sampleDescriptionIndexPresent&&(i+=4),this.flags.defaultSampleDurationPresent&&(i+=4),this.flags.defaultSampleSizePresent&&(i+=4),this.flags.defaultSampleFlagsPresent&&(i+=4),i},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.trackId,32),this.flags.baseDataOffsetPresent&&(i.writer.writeUInt(this.baseDataOffset.getHighBitsUnsigned(),32),i.writer.writeUInt(this.baseDataOffset.getLowBitsUnsigned(),32)),this.flags.sampleDescriptionIndexPresent&&i.writer.writeUInt(this.sampleDescriptionIndex,32),this.flags.defaultSampleDurationPresent&&i.writer.writeUInt(this.defaultSampleDuration,32),this.flags.defaultSampleSizePresent&&i.writer.writeUInt(this.defaultSampleSize,32),this.flags.defaultSampleFlagsPresent&&Yp(this.defaultSampleFlags,i)},i}(le);function wA(t){var i=t.data,e=i.nextUint8(),s=new Om(As.from(i.nextUint8Array(3)));s.skipBits(6);var n=Boolean(s.readBit()),r=Boolean(s.readBit());s.skipBits(10);var o=Boolean(s.readBit()),h=Boolean(s.readBit()),a=Boolean(s.readBit());s.skipBits(1);var u=Boolean(s.readBit()),c=Boolean(s.readBit()),l=i.nextUint32(),d=c?i.nextUint64():void 0,f=u?i.nextUint32():void 0,g=a?i.nextUint32():void 0,_=h?i.nextUint32():void 0,v=o?xc(new Om(As.from(i.nextUint8Array(4)))):void 0;return new vA({trackId:l,defaultBaseIsMoof:n,durationIsEmpty:r,baseDataOffset:d,sampleDescriptionIndex:f,defaultSampleDuration:g,defaultSampleSize:_,defaultSampleFlags:v},e)}r();var mA=function(t){function i(i,e,s){var n=t.call(this,"trun",i,function(t){var i,e,s,n;return{dataOffsetPresent:void 0!==t.dataOffset,firstSampleFlagsPresent:void 0!==t.firstSampleFlags,sampleDurationPresent:null!==(i=t.sampleDurationPresent)&&void 0!==i&&i,sampleSizePresent:null!==(e=t.sampleSizePresent)&&void 0!==e&&e,sampleFlagsPresent:null!==(s=t.sampleFlagsPresent)&&void 0!==s&&s,sampleCompositionTimeOffsetsPresent:null!==(n=t.sampleCompositionTimeOffsetsPresent)&&void 0!==n&&n}}(e))||this;return n.dataOffset=e.dataOffset,n.samples=s,n.firstSampleFlags=e.firstSampleFlags,n}return Do(i,t),_.defineProperty(i.prototype,"dataOffset",{get:function(){return this.pT},set:function(t){if(t&&!ti(t,32))throw new b("Provided data offset does not fit in 32 bits.");this.pT=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"firstSampleFlags",{get:function(){return this.AT},set:function(t){if((null==t?void 0:t.samplePaddingValue)&&!ti(t.samplePaddingValue,3))throw new b("Provided sample padding value does not fit in 3 bits.");if((null==t?void 0:t.sampleDegradationPriority)&&!ti(t.sampleDegradationPriority,16))throw new b("Provided sample degradation priority does not fit in 16 bits.");this.AT=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"samples",{get:function(){return this.yT},set:function(t){var i,e;if(!ti(t.length,32))throw new b("The sample count cannot be represented in 32 bits.");for(var s=0,n=t;s<n.length;s++){var r=n[s];if(void 0===r.duration&&this.flags.sampleDurationPresent)throw new b("The sample duration present flag is set.");if(void 0!==r.duration&&!this.flags.sampleDurationPresent)throw new b("The sample duration present flag is not set.");if(r.duration&&!ti(r.duration,32))throw new b("Provided sample duration does not fit in 32 bits.");if(void 0===r.size&&this.flags.sampleSizePresent)throw new b("The sample size present flag is set.");if(void 0!==r.size&&!this.flags.sampleSizePresent)throw new b("The sample size present flag is not set.");if(r.size&&!ti(r.size,32))throw new b("Provided sample size does not fit in 32 bits.");if(void 0===r.flags&&this.flags.sampleFlagsPresent)throw new b("The sample flags present flag is set.");if(void 0!==r.flags&&!this.flags.sampleFlagsPresent)throw new b("The sample flags present flag is not set.");if((null===(i=r.flags)||void 0===i?void 0:i.samplePaddingValue)&&!ti(r.flags.samplePaddingValue,3))throw new b("Provided sample padding value does not fit in 3 bits.");if((null===(e=r.flags)||void 0===e?void 0:e.sampleDegradationPriority)&&!ti(r.flags.sampleDegradationPriority,16))throw new b("Provided sample degradation priority does not fit in 16 bits.");if(void 0===r.compositionTimeOffset&&this.flags.sampleCompositionTimeOffsetsPresent)throw new b("The sample compositionTimeOffset present flag is set.");if(void 0!==r.compositionTimeOffset&&!this.flags.sampleCompositionTimeOffsetsPresent)throw new b("The sample compositionTimeOffset present flag is not set.");if(r.compositionTimeOffset&&!ti(r.compositionTimeOffset,32))throw new b("Provided sample compositionTimeOffset does not fit in 32 bits.")}this.yT=t},enumerable:!1,configurable:!0}),i.prototype.serializeFlags=function(t){t.writer.writeByte(0),t.writer.writeUInt(0,4),t.writer.writeBool(this.flags.sampleCompositionTimeOffsetsPresent),t.writer.writeBool(this.flags.sampleFlagsPresent),t.writer.writeBool(this.flags.sampleSizePresent),t.writer.writeBool(this.flags.sampleDurationPresent),t.writer.writeUInt(0,5),t.writer.writeBool(this.flags.firstSampleFlagsPresent),t.writer.writeBit(0),t.writer.writeBool(this.flags.dataOffsetPresent)},i.prototype.getBoxContentSize=function(){var i=t.prototype.getBoxContentSize.call(this)+4;return this.flags.dataOffsetPresent&&(i+=4),this.flags.firstSampleFlagsPresent&&(i+=4),this.flags.sampleDurationPresent&&(i+=4*this.samples.length),this.flags.sampleSizePresent&&(i+=4*this.samples.length),this.flags.sampleFlagsPresent&&(i+=4*this.samples.length),this.flags.sampleCompositionTimeOffsetsPresent&&(i+=4*this.samples.length),i},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.samples.length,32),this.flags.dataOffsetPresent&&i.writer.writeUInt(this.dataOffset,32),this.flags.firstSampleFlagsPresent&&Yp(this.firstSampleFlags,i);for(var e=0,s=this.samples;e<s.length;e++){var n=s[e];this.flags.sampleDurationPresent&&i.writer.writeUInt(n.duration,32),this.flags.sampleSizePresent&&i.writer.writeUInt(n.size,32),this.flags.sampleFlagsPresent&&Yp(n.flags,i),this.flags.sampleCompositionTimeOffsetsPresent&&(0===this.version?i.writer.writeUInt(n.compositionTimeOffset,32):i.writer.writeInt(n.compositionTimeOffset,32))}},i}(le);function pA(t){var i=t.data,e=i.nextUint8(),s=new Om(As.from(i.nextUint8Array(3)));s.skipBits(12);var n=Boolean(s.readBit()),r=Boolean(s.readBit()),o=Boolean(s.readBit()),h=Boolean(s.readBit());s.skipBits(5);var a=Boolean(s.readBit());s.skipBits(1);var u=Boolean(s.readBit()),c=i.nextUint32(),l={sampleDurationPresent:h,sampleSizePresent:o,sampleFlagsPresent:r,sampleCompositionTimeOffsetsPresent:n};u&&(l.dataOffset=i.nextInt32()),a&&(l.firstSampleFlags=xc(new Om(As.from(i.nextUint8Array(4)))));for(var d=[],f=0;f<c;f++){var g={};h&&(g.duration=i.nextUint32()),o&&(g.size=i.nextUint32()),r&&(g.flags=xc(new Om(As.from(i.nextUint8Array(4))))),n&&(g.compositionTimeOffset=0===e?i.nextUint32():i.nextInt32()),d.push(g)}return new mA(e,l,d)}var Jn=function(t){function i(){return t.call(this,"traf")||this}return Do(i,t),i}(Wh);function AA(t){for(var i=new Jn,e=0,s=op(t.data);e<s.length;e++){var n=s[e];fu(n,"tfhd")?i.boxes.push(wA(n)):fu(n,"tfdt")?i.boxes.push(_A(n)):fu(n,"trun")?i.boxes.push(pA(n)):i.boxes.push(ho(n))}return i}var yA=function(t){function i(){return t.call(this,"moof")||this}return Do(i,t),i}(Wh);function bA(t){for(var i=new yA,e=0,s=op(t.data);e<s.length;e++){var n=s[e];fu(n,"traf")?i.boxes.push(AA(n)):fu(n,"pssh")?i.boxes.push(Hp(n)):i.boxes.push(ho(n))}return i}r();!function(t){function i(i){var e=t.call(this,"mfhd",0,0)||this;return e.sequenceNumber=i,e}Do(i,t),_.defineProperty(i.prototype,"sequenceNumber",{get:function(){return this.bT},set:function(t){if(!ti(t,32))throw new b("Provided sequence number does not fit in 32 bits.");this.bT=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.sequenceNumber,32)}}(le);r();var MA=function(t){function i(i){var e=t.call(this,"frma")||this;return e.codingName=i,e}return Do(i,t),_.defineProperty(i.prototype,"codingName",{get:function(){return this.MT},set:function(t){if(4!==t.length)throw new b("Provided coding name was not 4 characters long.");this.MT=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 4},i.prototype.serializeBoxContent=function(t){t.writer.writeString(this.codingName)},i}(Fu);r();!function(t){function i(i,e){var s=t.call(this,"pasp")||this;return s.hSpacing=i,s.vSpacing=e,s}Do(i,t),_.defineProperty(i.prototype,"hSpacing",{get:function(){return this.TT},set:function(t){if(!ti(t,32))throw new b("Provided hSpacing does not fit in 32 bits.");this.TT=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"vSpacing",{get:function(){return this.ST},set:function(t){if(!ti(t,32))throw new b("Provided vSpacing does not fit in 32 bits.");this.ST=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 8},i.prototype.serializeBoxContent=function(t){t.writer.writeUInt(this.hSpacing,32),t.writer.writeUInt(this.vSpacing,32)}}(Fu);r();!function(t){function i(i,e,s){var n=t.call(this,i)||this;return n.sample=e,n.sinf=s,n}Do(i,t),i.prototype.getBoxContentSize=function(){return this.sample.getBoxContentSize()+this.sinf.getSize()},i.prototype.serializeBoxContent=function(t){this.sample.serializeBoxContent(t),t.concat(this.sinf.serialize())}}(Wh);r();!function(t){function i(i,e,s){var n=t.call(this,"sinf")||this;return n.schm=e,n.schi=s,n.frma=new MA(i),n}Do(i,t),i.prototype.getBoxContentSize=function(){var t,i,e,s;return this.frma.getSize()+(null!==(i=null===(t=this.schm)||void 0===t?void 0:t.getSize())&&void 0!==i?i:0)+(null!==(s=null===(e=this.schi)||void 0===e?void 0:e.getSize())&&void 0!==s?s:0)},i.prototype.serializeBoxContent=function(t){t.concat(this.frma.serialize()),this.schm&&t.concat(this.schm.serialize()),this.schi&&t.concat(this.schi.serialize())}}(Fu);r();var TA=function(t){function i(i,e,s){var n=t.call(this,"saio",i,void 0===s?0:1)||this;return n.entries=e,n.explicitAuxInfoType=s,n}return Do(i,t),_.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"entries",{get:function(){return this.RM},set:function(t){var i=this;if(!ti(t.length,32))throw new b("Number of entries provided does not fit in 32 bits.");if(t.some((function(t){return!ti(t,i.bitSize)})))throw new b("Not all provided entries fit in ".concat(this.bitSize," bits."));this.RM=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"explicitAuxInfoType",{get:function(){return this.NT},set:function(t){if(void 0===t)this.flags=0;else{if(!ti(t.auxInfoType,32))throw new b("Provided auxInfoType does not fit in 32 bits.");if(!ti(t.auxInfoTypeParameter,32))throw new b("Provided auxInfoTypeParameter does not fit in 32 bits.");this.flags=1}this.NT=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+(void 0===this.explicitAuxInfoType?0:8)+4+this.entries.length*this.bitSize/8},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),void 0!==this.explicitAuxInfoType&&(i.writer.writeUInt(this.explicitAuxInfoType.auxInfoType,32),i.writer.writeUInt(this.explicitAuxInfoType.auxInfoTypeParameter,32)),i.writer.writeUInt(this.entries.length,32),this.serializeSaioContent(i)},i}(le);(function(t){function i(){return null!==t&&t.apply(this,arguments)||this}Do(i,t),i.prototype.serializeSaioContent=function(t){for(var i=0,e=this.entries;i<e.length;i++){var s=e[i];t.writer.writeUInt(s,32)}}})(TA),function(t){function i(){return null!==t&&t.apply(this,arguments)||this}Do(i,t),i.prototype.serializeSaioContent=function(t){for(var i=0,e=this.entries;i<e.length;i++){var s=e[i];t.writer.writeUInt(s.getHighBitsUnsigned(),32),t.writer.writeUInt(s.getLowBitsUnsigned(),32)}}}(TA);r();!function(t){function i(i,e,s){var n=t.call(this,"saiz",0,void 0===s?0:1)||this;return n.defaultSampleInfoSize=i,n.sampleInfoSizes=e,n.explicitAuxInfoType=s,n}Do(i,t),_.defineProperty(i.prototype,"defaultSampleInfoSize",{get:function(){return this.IT},set:function(t){if(!ti(t,8))throw new b("Provided defaultSampleInfoSize does not fit in a single byte.");this.IT=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"sampleInfoSizes",{get:function(){return this.DT},set:function(t){if(!ti(t.length,32))throw new b("Number of sampleInfoSizes provided does not fit in 32 bits.");if(t.some((function(t){return!ti(t,8)})))throw new b("Not all provided sampleInfoSizes fit in a byte.");this.DT=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"explicitAuxInfoType",{get:function(){return this.NT},set:function(t){if(void 0===t)this.flags=0;else{if(!ti(t.auxInfoType,32))throw new b("Provided auxInfoType does not fit in 32 bits.");if(!ti(t.auxInfoTypeParameter,32))throw new b("Provided auxInfoTypeParameter does not fit in 32 bits.");this.flags=1}this.NT=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+(void 0===this.explicitAuxInfoType?0:8)+1+4+(0!==this.defaultSampleInfoSize?0:this.sampleInfoSizes.length)},i.prototype.serializeBoxContent=function(i){if(0!==this.defaultSampleInfoSize&&this.sampleInfoSizes.length>0)throw new b("Both a default size and specific sizes are provided.  This is prohibited.");t.prototype.serializeBoxContent.call(this,i),void 0!==this.explicitAuxInfoType&&(i.writer.writeUInt(this.explicitAuxInfoType.auxInfoType,32),i.writer.writeUInt(this.explicitAuxInfoType.auxInfoTypeParameter,32)),i.writer.writeByte(this.defaultSampleInfoSize),i.writer.writeUInt(this.sampleInfoSizes.length,32);for(var e=0,s=this.sampleInfoSizes;e<s.length;e++){var n=s[e];i.writer.writeByte(n)}}}(le);r();!function(t){function i(i){var e=t.call(this,"sdtp",0,0)||this;return e.samples=i,e}Do(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.samples.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i);for(var e=0,s=this.samples;e<s.length;e++){Fp(s[e],i)}}}(le);r();!function(t){function i(i){return t.call(this,"stsd",i,0)||this}Do(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.boxes.length,32)}}(wp);r();var SA=function(t){function i(i,e,s){var n=t.call(this,"sgpd",i,0)||this;return n.entries=s,n.groupingType=e,n}return Do(i,t),_.defineProperty(i.prototype,"groupingType",{get:function(){return this.ET},set:function(t){if(4!==t.length)throw new b("The provided groupingType does not equal 4 characters.");this.ET=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeString(this.groupingType),this.serializeVersionBoxContent(i),i.writer.writeUInt(this.entries.length,32);for(var e=0,s=this.entries;e<s.length;e++){var n=s[e];this.serializeEntryBoxContent(i,n)}},i.prototype.serializeEntryBoxContent=function(t,i){i.serializeBoxContent(t)},i}(le);(function(t){function i(i,e){return t.call(this,0,i,e)||this}Do(i,t),i.prototype.serializeVersionBoxContent=function(t){}})(SA),function(t){function i(i,e,s){var n=t.call(this,1,i,s)||this;return n.defaultLength=e,n}Do(i,t),_.defineProperty(i.prototype,"defaultLength",{get:function(){return this.kT},set:function(t){if(!ti(t,32))throw new b("The provided defaultLength does not fit in 32 bits.");this.kT=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+this.entries.length*(this.defaultLength||4)},i.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.defaultLength,32)},i.prototype.serializeEntryBoxContent=function(t,i){0===this.defaultLength&&t.writer.writeUInt(i.getBoxContentSize(),32),i.serializeBoxContent(t)}}(SA),function(t){function i(i,e,s,n){void 0===n&&(n=0);var r=this;if(i<2)throw new b("This constructor is only meant for versions 2 and up.");return(r=t.call(this,i,e,s)||this).defaultSampleDescriptionIndex=n,r}Do(i,t),_.defineProperty(i.prototype,"defaultSampleDescriptionIndex",{get:function(){return this.nT},set:function(t){if(!ti(t,32))throw new b("The provided defaultSampleDescriptionIndex does not fit in 32 bits.");this.nT=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},i.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.defaultSampleDescriptionIndex,32)}}(SA);r();(function(t){function i(i){void 0===i&&(i=[]);var e=t.call(this,"stsz",0,0)||this;return e.sampleSizes=i,e}Do(i,t),_.defineProperty(i.prototype,"sampleSizes",{get:function(){return this.xT},set:function(t){if(!ti(t.length,32))throw new b("Number of allowed samples cannot fit in 32 bits.");if(t.some((function(t){return!ti(t,32)})))throw new b("Not all sampleSizes can be represented in 32 bits.");this.xT=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4+4*this.sampleSizes.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(0,32),i.writer.writeUInt(this.sampleSizes.length,32);for(var e=0,s=this.sampleSizes;e<s.length;e++){var n=s[e];i.writer.writeUInt(n,32)}}})(le),function(t){function i(i,e){void 0===i&&(i=0),void 0===e&&(e=0);var s=t.call(this,"stsz",0,0)||this;return s.defaultSampleSize=i,s.samples=e,s}Do(i,t),_.defineProperty(i.prototype,"defaultSampleSize",{get:function(){return this.oT},set:function(t){if(!ti(t,32))throw new b("Provided defaultSampleSize does not fit in 32 bits.");this.oT=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"samples",{get:function(){return this.yT},set:function(t){if(!ti(t,32))throw new b("Number of allowed samples cannot fit in 32 bits.");this.yT=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.defaultSampleSize,32),i.writer.writeUInt(this.samples,32)}}(le);r();!function(t){function i(){return t.call(this,"stbl")||this}Do(i,t)}(Wh);r();!function(t){function i(i){var e=t.call(this,"stsc",0,0)||this;return e.entries=i,e}Do(i,t),_.defineProperty(i.prototype,"entries",{get:function(){return this.RM},set:function(t){if(!ti(t.length,32))throw new b("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!ti(t.firstChunk,32)||!ti(t.sampleDescriptionIndex,32)||!ti(t.samplesPerChunk,32)})))throw new b("Not all entries can be represented in 96 bits.");this.RM=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+12*this.entries.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.entries.length,32);for(var e=0,s=this.entries;e<s.length;e++){var n=s[e];i.writer.writeUInt(n.firstChunk,32),i.writer.writeUInt(n.samplesPerChunk,32),i.writer.writeUInt(n.sampleDescriptionIndex,32)}}}(le);r();!function(t){function i(){return t.call(this,"schi")||this}Do(i,t)}(Wh);r();!function(t){function i(i,e,s){var n=t.call(this,"schm",0,void 0===s?0:1)||this;return n.schemeType=i,n.schemeVersion=e,n.schemeUri=s,n}Do(i,t),_.defineProperty(i.prototype,"schemeType",{get:function(){return this.LT},set:function(t){if(4!==t.length)throw new b("The provided schemeType does not have a length of 4.");this.LT=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"schemeVersion",{get:function(){return this.CT},set:function(t){if(!ti(t,32))throw new b("The provided schemeVersion does not fit in 23 bits.");this.CT=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"schemeUri",{get:function(){return this.jT},set:function(t){if(t&&4!==t.length)throw new b("The provided schemeUri does not have a length of 4.");this.flags=void 0===t?0:1,this.jT=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4+(void 0===this.schemeUri?0:this.schemeUri.length+1)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeString(this.schemeType),i.writer.writeUInt(this.schemeVersion,32),this.schemeUri&&(i.writer.writeString(this.schemeUri),i.writer.writeByte(0))}}(le);r();var NA=function(t){function i(i,e,s,n,r,o,h){void 0===h&&(h=0);var a=t.call(this,"sidx",i,h)||this;return a.referenceId=e,a.timescale=s,a.earliestPresentationTime=n,a.firstOffset=r,a.references=o,a}return Do(i,t),_.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"referenceId",{get:function(){return this.OT},set:function(t){if(!ti(t,32))throw new b("Provided referenceId does not fit in 32 bits.");this.OT=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"timescale",{get:function(){return this.KM},set:function(t){if(!ti(t,32))throw new b("Provided timescale does not fit in 32 bits.");this.KM=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"earliestPresentationTime",{get:function(){return this.PT},set:function(t){if(!ti(t,this.bitSize))throw new b("Provided earliestPresentationTime does not fit in ".concat(this.bitSize," bits."));this.PT=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"firstOffset",{get:function(){return this.zT},set:function(t){if(!ti(t,this.bitSize))throw new b("Provided timescale does not fit in ".concat(this.bitSize," bits."));this.zT=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"references",{get:function(){return this.BT},set:function(t){if(!ti(t.length,16))throw new b("The number of provided reference items does not fit in 16 bits.");for(var i=0,e=t;i<e.length;i++){var s=e[i];if(!ti(s.referencedSize,31))throw new b("Provided referenced size does not fit in 31 bits.");if(!ti(s.subsegmentDuration,32))throw new b("Provided subsegment duration does not fit in 31 bits.");if(!ti(s.sapType,3))throw new b("Provided SAP type does not fit in 3 bits.");if(!ti(s.sapDeltaTime,28))throw new b("Provided SAP delta time does not fit in 28 bits.")}this.BT=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4+this.bitSize/8*2+2+2+12*this.references.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.referenceId,32),i.writer.writeUInt(this.timescale,32),this.serializeSidxBoxContent(i),i.writer.writeUInt(0,16),i.writer.writeUInt(this.references.length,16);for(var e=0,s=this.references;e<s.length;e++){var n=s[e];i.writer.writeBit(n.referenceType),i.writer.writeUInt(n.referencedSize,31),i.writer.writeUInt(n.subsegmentDuration,32),i.writer.writeBool(n.startsWithSap),i.writer.writeUInt(n.sapType,3),i.writer.writeUInt(n.sapDeltaTime,28)}},i}(le),IA=function(t){function i(i,e,s,n,r,o){return void 0===o&&(o=0),t.call(this,0,i,e,s,n,r,o)||this}return Do(i,t),i.prototype.serializeSidxBoxContent=function(t){t.writer.writeUInt(this.earliestPresentationTime,32),t.writer.writeUInt(this.firstOffset,32)},i}(NA),DA=function(t){function i(i,e,s,n,r,o){return void 0===o&&(o=0),t.call(this,1,i,e,s,n,r,o)||this}return Do(i,t),i.prototype.serializeSidxBoxContent=function(t){t.writer.writeUInt(this.earliestPresentationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.earliestPresentationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.firstOffset.getHighBitsUnsigned(),32),t.writer.writeUInt(this.firstOffset.getLowBitsUnsigned(),32)},i}(NA);r();var EA=function(t){function i(i,e,s){return t.call(this,"styp",i,e,s)||this}return Do(i,t),i}(Tp);function kA(t){for(var i=t.data,e=i.nextChars(4),s=i.nextUint32(),n=[];i.cursor.offset<i.data.byteLength;)n.push(i.nextChars(4));return new EA(e,s,n)}r();!function(t){function i(i){void 0===i&&(i=0);var e=t.call(this,"smhd",0,0)||this;return e.balance=i,e}Do(i,t),_.defineProperty(i.prototype,"balance",{get:function(){return this.UT},set:function(t){if(t<-1||t>1)throw new b("Provided balance does not fit in the allowed range [-1, 1].");if(!ti(Nh(t,8),16))throw new b("Provided balance does not fit in 16 bits (fixed 8.8).");this.UT=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+2+2},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(Nh(this.balance,8),16),i.writer.writeUInt(0,16)}}(le);r();!function(t){function i(i){var e=t.call(this,"stss",0,0)||this;return e.entries=i,e}Do(i,t),_.defineProperty(i.prototype,"entries",{get:function(){return this.RM},set:function(t){if(!ti(t.length,32))throw new b("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!ti(t,32)})))throw new b("Not all entries can be represented in 32 bits.");this.RM=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4*this.entries.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.entries.length,32);for(var e=0,s=this.entries;e<s.length;e++){var n=s[e];i.writer.writeUInt(n,32)}}}(le);r();!function(t){function i(i){var e=t.call(this,"stts",0,0)||this;return e.entries=i,e}Do(i,t),_.defineProperty(i.prototype,"entries",{get:function(){return this.RM},set:function(t){if(!ti(t.length,32))throw new b("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!ti(t.sampleCount,32)||!ti(t.sampleDelta,32)})))throw new b("Not all entries can be represented in 64 bits.");this.RM=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+8*this.entries.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.entries.length,32);for(var e=0,s=this.entries;e<s.length;e++){var n=s[e];i.writer.writeUInt(n.sampleCount,32),i.writer.writeUInt(n.sampleDelta,32)}}}(le);r();!function(t){function i(i){var e=t.call(this,"trep",0,0)||this;return e.trackId=i,e}Do(i,t),_.defineProperty(i.prototype,"trackId",{get:function(){return this.sT},set:function(t){if(!ti(t,32))throw new b("The provided trackId does not fit in 32 bits.");this.sT=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.trackId,32)}}(wp);r();!function(t){function i(){return t.call(this,"udta")||this}Do(i,t)}(Wh);r();var xA={red:0,green:0,blue:0};!function(t){function i(i,e){void 0===i&&(i=0),void 0===e&&(e=xA);var s=t.call(this,"vmhd",0,1)||this;return s.graphicsMode=i,s.opColor=e,s}Do(i,t),_.defineProperty(i.prototype,"opColor",{get:function(){return this.QT},set:function(t){if(!ti(t.red,16)||!ti(t.green,16)||!ti(t.blue,16))throw new b("Not all colors could be represented in 16 bits.");this.QT=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+2+6},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.graphicsMode,16),i.writer.writeUInt(this.opColor.red,16),i.writer.writeUInt(this.opColor.green,16),i.writer.writeUInt(this.opColor.blue,16)}}(le);r();var LA=function(t){function i(i,e,s,n,r){void 0===n&&(n={}),void 0===r&&(r=void 0);var o,h,a,u,c,l=this;return(l=t.call(this,i,e)||this).width=s.width,l.height=s.height,l.horizontalResolution=null!==(o=s.horizontal)&&void 0!==o?o:72,l.verticalResolution=null!==(h=s.vertical)&&void 0!==h?h:72,l.compressorName=null!==(a=n.compressorName)&&void 0!==a?a:"",l.frameCount=null!==(u=n.frameCount)&&void 0!==u?u:1,l.depth=null!==(c=n.depth)&&void 0!==c?c:24,l.clap=n.clap,l.pasp=n.pasp,l.extra=r,l}return Do(i,t),_.defineProperty(i.prototype,"width",{get:function(){return this.dT},set:function(t){if(!ti(t,16))throw new b("Provided width does not fit in 16 bits.");this.dT=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"height",{get:function(){return this.fT},set:function(t){if(!ti(t,16))throw new b("Provided height does not fit in 16 bits.");this.fT=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"horizontalResolution",{get:function(){return this.FT},set:function(t){if(!ti(Nh(t,16),32))throw new b("Provided horizontalResolution does not fit in 32 bits (fixed 16.16).");this.FT=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"verticalResolution",{get:function(){return this.YT},set:function(t){if(!ti(Nh(t,16),32))throw new b("Provided verticalResolution does not fit in 32 bits (fixed 16.16).");this.YT=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"compressorName",{get:function(){return this.VT},set:function(t){if(t.length>31)throw new b("The provided compressorName should at most be 31 characters long.");this.VT=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"frameCount",{get:function(){return this.GT},set:function(t){if(!ti(t,16))throw new b("Provided frameCount does not fit in 16 bits.");this.GT=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"depth",{get:function(){return this.WT},set:function(t){if(!ti(t,16))throw new b("Provided depth does not fit in 16 bits.");this.WT=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){var i,e,s,n,r,o;return t.prototype.getBoxContentSize.call(this)+2+2+12+2+2+4+4+4+2+32+2+2+(null!==(e=null===(i=this.clap)||void 0===i?void 0:i.getSize())&&void 0!==e?e:0)+(null!==(n=null===(s=this.pasp)||void 0===s?void 0:s.getSize())&&void 0!==n?n:0)+(null!==(o=null===(r=this.extra)||void 0===r?void 0:r.length)&&void 0!==o?o:0)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(0,16),i.writer.writeUInt(0,16),i.writer.writeUInt(0,32),i.writer.writeUInt(0,32),i.writer.writeUInt(0,32),i.writer.writeUInt(this.width,16),i.writer.writeUInt(this.height,16),i.writer.writeUInt(Nh(this.horizontalResolution,16),32),i.writer.writeUInt(Nh(this.verticalResolution,16),32),i.writer.writeUInt(0,32),i.writer.writeUInt(this.frameCount,16),i.writer.writeByte(this.compressorName.length),i.writer.writeString(this.compressorName);for(var e=0;e<31-this.compressorName.length;e++)i.writer.writeByte(0);i.writer.writeUInt(this.depth,16),i.writer.writeInt(-1,16),this.clap&&i.concat(this.clap.serialize()),this.pasp&&i.concat(this.pasp.serialize()),this.extra&&Bm(i.writer,this.extra)},i}(_p);r(),r();!function(t){function i(i){var e=t.call(this,"esds",0,0)||this;return e.esDescriptor=i,e}Do(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+(this.esDescriptor instanceof T?this.esDescriptor.length:this.esDescriptor.getSize())},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.esDescriptor instanceof T?i.concat(As.from(this.esDescriptor)):this.esDescriptor.serialize(i)}}(le);r();!function(t){function i(i,e,s){var n=t.call(this,"mp4a",i,s)||this;return n.esd=e,n}Do(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.esd.getSize()},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.concat(this.esd.serialize())}}(vp);r();!function(t){function i(i,e,s,n){void 0===n&&(n={});var r=t.call(this,"mp4v",i,e,n)||this;return r.esDescriptor=s,r}Do(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.esDescriptor.getSize()},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.esDescriptor.serialize(i)}}(LA);r();!function(t){function i(i,e){var s=t.call(this,"mp4s",i)||this;return s.esDescriptor=e,s}Do(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.esDescriptor.getSize()},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.esDescriptor.serialize(i)}}(_p);r(),r();!function(t){function i(i){var e=t.call(this,"avcC")||this;return e.decoderConfig=i,e}Do(i,t),i.prototype.getBoxContentSize=function(){return this.decoderConfig.getSize()},i.prototype.serializeBoxContent=function(t){this.decoderConfig.serialize(t)}}(Fu);r();!function(){function t(t,i,e,s,n,r){void 0===r&&(r=1),this.lengthSizeMinusOne=e,this.version=r,this.profileIndication=t.indication,this.profileCompatibility=t.compatibility,this.levelIndication=i,this.spsSets=s,this.ppsSets=n}_.defineProperty(t.prototype,"version",{get:function(){return this.ZT},set:function(t){if(!ti(t,8))throw new b("Provided version does not fit in 8 bits.");this.ZT=t},enumerable:!1,configurable:!0}),_.defineProperty(t.prototype,"profileIndication",{get:function(){return this.HT},set:function(t){if(!ti(t,8))throw new b("Provided profileIndication does not fit in 8 bits.");this.HT=t},enumerable:!1,configurable:!0}),_.defineProperty(t.prototype,"profileCompatibility",{get:function(){return this.XT},set:function(t){if(!ti(t,8))throw new b("Provided profileCompatibility does not fit in 8 bits.");this.XT=t},enumerable:!1,configurable:!0}),_.defineProperty(t.prototype,"levelIndication",{get:function(){return this.qT},set:function(t){if(!ti(t,8))throw new b("Provided levelIndication does not fit in 8 bits.");this.qT=t},enumerable:!1,configurable:!0}),_.defineProperty(t.prototype,"spsSets",{get:function(){return this.KT},set:function(t){if(!ti(t.length,5))throw new b("Provided number of spsSets exceeds the max (32)");this.KT=t},enumerable:!1,configurable:!0}),_.defineProperty(t.prototype,"ppsSets",{get:function(){return this.JT},set:function(t){if(!ti(t.length,8))throw new b("Provided number of ppsSets exceeds the max (256)");this.JT=t},enumerable:!1,configurable:!0}),t.prototype.getSize=function(){return 7+2*this.spsSets.length+this.spsSets.reduce((function(t,i){return t+i.length}),0)+2*this.ppsSets.length+this.ppsSets.reduce((function(t,i){return t+i.length}),0)},t.prototype.serialize=function(t){t.writer.writeByte(this.version),t.writer.writeByte(this.profileIndication),t.writer.writeByte(this.profileCompatibility),t.writer.writeByte(this.levelIndication),t.writer.writeBits([1,1,1,1,1,1]),t.writer.writeUInt(this.lengthSizeMinusOne,2),t.writer.writeBits([1,1,1]),t.writer.writeUInt(this.spsSets.length,5);for(var i=0,e=this.spsSets;i<e.length;i++){var s=e[i];t.writer.writeUInt(s.length,16),t.concat(As.from(s))}t.writer.writeByte(this.ppsSets.length);for(var n=0,r=this.ppsSets;n<r.length;n++){var o=r[n];t.writer.writeUInt(o.length,16),t.concat(As.from(o))}}}();r();!function(t){function i(i,e,s,n,r){void 0===n&&(n={}),void 0===r&&(r=void 0);var o=t.call(this,"avc1",i,e,n)||this;return o.configurationBox=s,o.bitrateBox=r,o}Do(i,t),i.prototype.getBoxContentSize=function(){var i,e;return t.prototype.getBoxContentSize.call(this)+this.configurationBox.getSize()+(null!==(e=null===(i=this.bitrateBox)||void 0===i?void 0:i.getSize())&&void 0!==e?e:0)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.concat(this.configurationBox.serialize()),this.bitrateBox&&i.concat(this.bitrateBox.serialize())}}(LA);r();!function(t){function i(i,e,s){var n=t.call(this,"btrt")||this;return n.bufferSizeDb=i,n.max=e,n.avg=s,n}Do(i,t),_.defineProperty(i.prototype,"bufferSizeDb",{get:function(){return this.SM},set:function(t){if(!ti(t,32))throw new b("Provided bufferSizeDb does not fit in 32 bits.");this.SM=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"max",{get:function(){return this.Kv},set:function(t){if(!ti(t,32))throw new b("Provided max does not fit in 32 bits.");this.Kv=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"avg",{get:function(){return this.$T},set:function(t){if(!ti(t,32))throw new b("Provided avg does not fit in 32 bits.");this.$T=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 12},i.prototype.serializeBoxContent=function(t){t.writer.writeUInt(this.bufferSizeDb,32),t.writer.writeUInt(this.max,32),t.writer.writeUInt(this.avg,32)}}(Fu);r(),r(),r();var CA=function(t){function i(i,e){var s,n,r,o,h=this;if(h=t.call(this,"tenc",i,0)||this,e.perSampleIvSize>0&&(null!==(n=null===(s=e.constantIv)||void 0===s?void 0:s.length)&&void 0!==n?n:0)>0)throw new b("Either perSampleSize should be > 0 or constantIv should be defined. Not both.");return h.kId=e.kId,h.isProtected=null!==(r=e.isProtected)&&void 0!==r?r:1,e.perSampleIvSize>0?h.perSampleIvSize=e.perSampleIvSize:h.constantIv=null!==(o=e.constantIv)&&void 0!==o?o:new T(0),h}return Do(i,t),_.defineProperty(i.prototype,"isProtected",{get:function(){return this.tS},set:function(t){if(!ti(t,8))throw new b("Provided isProtected does not fit in 1 byte.");this.tS=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"perSampleIvSize",{get:function(){return this.iS},set:function(t){if(![8,16].includes(t))throw new b("Provided perSampleIvSize does not match any allowed value [8, 16].");this.iS=t,this.eS=new T(0)},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"kId",{get:function(){return this.sS},set:function(t){if(16!==t.length)throw new b("Provided kId length is not 16.");this.sS=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"constantIv",{get:function(){return this.eS},set:function(t){if(![8,16].includes(t.length))throw new b("Provided constant IV length does not match any allowed value [8, 16].");this.eS=t,this.iS=0},enumerable:!1,configurable:!0}),i.prototype.getTencHeaderSize=function(){return 20+(this.constantIv.length>0?1+this.constantIv.length:0)},i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.getTencHeaderSize()},i.prototype.serializeVersionBoxContent=function(t){t.writer.writeByte(0)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.serializeOwnContent(i)},i.prototype.serializeOwnContent=function(t){t.writer.writeByte(0),this.serializeVersionBoxContent(t),t.writer.writeByte(this.isProtected),t.writer.writeByte(this.perSampleIvSize),Bm(t.writer,this.kId),0===this.perSampleIvSize&&(t.writer.writeByte(this.constantIv.length),Bm(t.writer,this.constantIv))},i}(le),jA=(function(t){function i(i){return t.call(this,0,i)||this}Do(i,t)}(CA),function(t){function i(i){var e=t.call(this,1,i)||this;return e.cryptByteBlocks=i.cryptByteBlock,e.skipByteBlocks=i.skipByteBlock,e}return Do(i,t),_.defineProperty(i.prototype,"cryptByteBlocks",{get:function(){return this.nS},set:function(t){if(!ti(t,4))throw new b("Provided cryptByteBlocks does not fit in 4 bits.");this.nS=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"skipByteBlocks",{get:function(){return this.rS},set:function(t){if(!ti(t,4))throw new b("Provided skipByteBlocks does not fit in 4 bits.");this.rS=t},enumerable:!1,configurable:!0}),i.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.cryptByteBlocks,4),t.writer.writeUInt(this.skipByteBlocks,4)},i}(CA));!function(t){function i(i){var e=t.call(this)||this;return e.tencBox=new jA(i),e}Do(i,t),i.prototype.serializeBoxContent=function(t){this.tencBox.serializeOwnContent(t)},i.prototype.getBoxContentSize=function(){return this.tencBox.getTencHeaderSize()}}(Vp);function OA(t){return void 0!==t.iv}function RA(t){return void 0!==t.subsamples}r();!function(t){function i(i){var e=t.call(this,"senc",0,{useSubsampleEncryption:!1})||this;return e.samples=i,e}Do(i,t),_.defineProperty(i.prototype,"samples",{get:function(){return this.yT},set:function(t){var i;if(!ti(t.length,32))throw new b("The number of samples provided does not fit in 32 bits.");for(var e=0,s=t;e<s.length;e++){var n=s[e];if(OA(n)&&![8,16].includes(n.iv.length))throw new b("IV of one of the provided samples did not satisfy the required length constraints. [8, 16]");if(void 0===i&&(i=RA(n)),!0===i&&!RA(n)||!1===i&&RA(n))throw new b("Mix of samples with and without subsamples detected.");if(RA(n)){if(!ti(n.subsamples.length,16))throw new b("Subsample length of one of the provided samples does not fit in 16 bits.");for(var r=0,o=n.subsamples;r<o.length;r++){var h=o[r];if(!ti(h.clearData,16))throw new b("Subsample clearData of one of the provided samples does not fit in 16 bits.");if(!ti(h.protectedData,23))throw new b("Subsample protectedData of one of the provided samples does not fit in 23 bits.")}}}this.flags.useSubsampleEncryption=null!=i&&i,this.yT=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){for(var i=0,e=0,s=this.samples;e<s.length;e++){var n=s[e];OA(n)&&(i+=n.iv.length),RA(n)&&(i+=2+6*n.subsamples.length)}return t.prototype.getBoxContentSize.call(this)+4+i},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.samples.length,32);for(var e=0,s=this.samples;e<s.length;e++){var n=s[e];if(OA(n)&&Bm(i.writer,n.iv),RA(n)){i.writer.writeUInt(n.subsamples.length,16);for(var r=0,o=n.subsamples;r<o.length;r++){var h=o[r];i.writer.writeUInt(h.clearData,16),i.writer.writeUInt(h.protectedData,32)}}}},i.prototype.serializeFlags=function(t){t.writer.writeUInt(this.flags.useSubsampleEncryption?2:0,24)}}(le);r(),r();!function(t){function i(i,e,s,n,r){var o=t.call(this,"emsg",0,0)||this;return o.schemeIdUri=i,o.value=e,o.data=r,o.id=s,o.timescale=n.timescale,o.presentationTimeDelta=n.presentationTimeDelta,o.eventDuration=n.eventDuration,o}Do(i,t),_.defineProperty(i.prototype,"timescale",{get:function(){return this.KM},set:function(t){if(!ti(t,32))throw new b("The provided timescale does not fit in 32 bits.");this.KM=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"presentationTimeDelta",{get:function(){return this.oS},set:function(t){if(!ti(t,32))throw new b("The provided presentationTimeDelta does not fit in 32 bits.");this.oS=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"eventDuration",{get:function(){return this.hS},set:function(t){if(!ti(t,32))throw new b("The provided eventDuration does not fit in 32 bits.");this.hS=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"id",{get:function(){return this.aS},set:function(t){if(!ti(t,32))throw new b("The provided id does not fit in 32 bits.");this.aS=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.schemeIdUri.length+1+this.value.length+1+16+this.data.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeString(this.schemeIdUri),i.writer.writeByte(0),i.writer.writeString(this.value),i.writer.writeByte(0),i.writer.writeUInt(this.timescale,32),i.writer.writeUInt(this.presentationTimeDelta,32),i.writer.writeUInt(this.eventDuration,32),i.writer.writeUInt(this.id,32),i.concat(As.from(this.data))}}(le);r(),r(),r();var PA=function(){function t(){this.boxes=[]}return t.prototype.serialize=function(){for(var t=new zm,i=0,e=this.boxes;i<e.length;i++){var s=e[i];t.concat(s.serialize())}return t.toRangedBuffer()},t}();function zA(t,i){return function(e){var s=function(t,i){for(var e=t.data,s=t.cursor;s.offset<e.byteLength;){var n=hp(e,s);if(!n.complete)return;if(fu(n.box,i))return n.box}}(new np(ip(e),new sp),t);if(!s)throw new b("".concat(t," box not found"));return i(s)}}var BA=zA("moov",dA),UA=zA("sidx",(function(t){var i,e,s=t.data,n=Y(s.nextUint32()),r=n.version,o=n.flags,h=s.nextUint32(),a=s.nextUint32();0===r?(i=s.nextUint32(),e=s.nextUint32()):(i=s.nextUint64(),e=s.nextUint64()),s.skip(2);for(var u=s.nextUint16(),c=[],l=0;l<u;l++){var d=new Om(As.from(s.nextUint8Array(12))),f=d.readBit(),g=d.readUInt(31),_=d.readUInt(32),v=Boolean(d.readBit()),w=d.readUInt(3),m=d.readUInt(28);c.push({referenceType:f,referencedSize:g,subsegmentDuration:_,startsWithSap:v,sapType:w,sapDeltaTime:m})}return 0===r?new IA(h,a,i,e,c,o.raw):new DA(h,a,i,e,c,o.raw)})),QA=zA("moof",bA),FA=zA("pssh",Hp);function YA(t){return function(t){for(var i=new PA,e=0,s=op(t);e<s.length;e++){var n=s[e];fu(n,"ftyp")?i.boxes.push(Np(n)):fu(n,"styp")?i.boxes.push(kA(n)):fu(n,"moov")?i.boxes.push(dA(n)):fu(n,"moof")?i.boxes.push(bA(n)):fu(n,"mdat")?i.boxes.push(Rp(n)):i.boxes.push(ho(n))}return i}(new np(ip(t),new sp))}var VA=class extends tu{get uS(){return this.Hg}get cS(){return this.lS.expiration}get Rb(){return this.dS}get fS(){return this.lS.sessionId}Ws(){if(this.gS)return this.Hg;const t=[];return t.push(Promise.resolve(this.lS.close())),t.push(kt(1e3)),this._S.Sy(Promise.race(t).catch(GA)),this.gS=!0,this.Hg}vS(t,i,e){if(Ro.hf){const t=FA(Tc(i));if(1===t.version){i=new Wp(t.systemId,t.data).serialize().join()}}return Promise.resolve(this.lS.generateRequest(t,i)).catch(GA)}$n(t){return Promise.resolve(this.lS.load(t)).catch(GA)}wS(){return Promise.resolve(this.lS.remove()).catch(GA)}Yn(t){return Promise.resolve(this.lS.update(t)).catch(GA)}mS(){this.dS.eM(),this.lS.keyStatuses.forEach(((t,i)=>{this.pS(i,t)})),this.yo(new Aw(this.dS))}pS(t,i){if("string"==typeof t){const e=t;t=i,i=e}const e=Tc(t);if(this.yS===eo&&16===e.byteLength&&(Ro.yf||Ro._g)){let t=Al(e),i=t.getUint32(0,!0),s=t.getUint16(4,!0),n=t.getUint16(6,!0);t.setUint32(0,i,!1),t.setUint16(4,s,!1),t.setUint16(6,n,!1)}this.yS===eo&&"status-pending"===i&&(i="usable"),this.dS.tM(e,i)}constructor(t,i){super(),this.lS=t,this.yS=i,this.gS=!1,this.bS=()=>{this.mS()},this.um=t=>{this.yo(new tr(this,t.messageType,Im(this.yS,t.message)))},this.MS=()=>{this.gS=!0,this.dS.Kb>0&&(this.dS.eM(),this.yo(new Aw(this.dS))),this.lS.removeEventListener("keystatuseschange",this.bS),this.lS.removeEventListener("message",this.um)},this.lS.addEventListener("keystatuseschange",this.bS),this.lS.addEventListener("message",this.um),this.dS=new ru;const e=[];this.lS.closed&&e.push(Promise.resolve(this.lS.closed)),this._S=new xh,e.push(this._S.rM),this.Hg=Promise.race(e).then(this.MS,this.MS),this.mS()}};function GA(t){let i;if(t.message){const e=t.message.match(/^SystemCode:0x([0-9a-fA-F]+)$/);e&&(i=0|C(e[1],16))}throw new Em(t.message,void 0,i,t)}var WA=class{async TS(t){return new VA(this.SS.createSession(t),this.NS)}IS(t){return Promise.resolve(this.SS.setServerCertificate(t))}bn(t){return Promise.resolve(t.setMediaKeys(this.SS))}DS(t){return Promise.resolve(t.setMediaKeys(null))}tr(){return Promise.resolve()}constructor(t,i,e){this.SS=t,this.NS=i,this.md=e}},ZA=class{get NS(){return this.ES.keySystem}async kS(){const t=await this.ES.createMediaKeys();return new WA(t,this.yS,this.xS)}LS(){return this.xS}constructor(t,i,e){this.ES=t,this.yS=i,this.xS=e}};r(),r();var Xh={VIDEO_H264:"video/avc",VIDEO_H265:"video/hevc",VIDEO_MP4:"video/mp4",VIDEO_MPEG:"video/mpeg",VIDEO_MPEG2:"video/mpeg2",VIDEO_WEBM:"video/webm",VIDEO_UNKNOWN:"video/x-unknown",AUDIO_AAC:"audio/mp4a-latm",AUDIO_MP4:"audio/mp4",AUDIO_WEBM:"audio/webm",AUDIO_UNKOWN:"audio/x-unknown",IMAGE_JPEG:"image/jpeg",APPLICATION_TTML_XML:"application/ttml+xml",APPLICATION_MP4:"application/mp4",TEXT_VTT:"text/vtt"};function HA(t){return _t(t,Xh.APPLICATION_MP4)||_t(t,Xh.VIDEO_MP4)||_t(t,Xh.AUDIO_MP4)}function XA(t){return _t(t,Xh.VIDEO_WEBM)||_t(t,Xh.AUDIO_WEBM)}var qA=class{CS(t){for(const[i,e]of this.jS)if(i.toLowerCase()===t.toLowerCase())return e}constructor(t,i){this.YA=t,this.jS=i}};function KA(t){const i=t.trim(),e=i.indexOf(";");if(e<0)return new qA(i,[]);const s=i.substr(0,e).trim(),n=i.substr(e+1).trim(),r=[];let o=0,h=!1;for(let t=0;t<n.length;t++){const i=n[t];if(h||";"!==i)'"'===i&&(h=!h);else{const i=JA(n.substr(o,t));i&&r.push(i),o=t+1}}if(o!==n.length){const t=JA(n.substr(o));t&&r.push(t)}return new qA(s,r)}function JA(t){const i=t.indexOf("=");if(i<0)return;const e=t.substr(0,i).trim();let s=t.substr(i+1).trim();return'"'===s[0]&&(s=s.substring(1,s.length-1)),[e,s]}function $A(t){const i=t.trim(),e=i.indexOf(";");return e<0?i:i.substr(0,e).trim()}function ty(t){let i=t;const e=i.match(/^avc1\.(\d+)\.(\d+)$/);if(e){const t=Number(e[1]),s=Number(e[2]);i="avc1."+Pc((t<<16|s).toString(16),6,"0")}return i}function iy(t,i,e,s){let n=!1;if(s.persistentState&&"optional"!==s.persistentState)return;if(s.distinctiveIdentifier&&"optional"!==s.distinctiveIdentifier)return;const r={audioCapabilities:[],videoCapabilities:[],persistentState:s.persistentState||"optional",distinctiveIdentifier:s.distinctiveIdentifier||"optional",initDataTypes:s.initDataTypes,sessionTypes:["temporary"],label:s.label,RS:s.RS};let o=!1;if(s.audioCapabilities){const h=s.audioCapabilities.filter((t=>Boolean(t.contentType)));h.length&&(r.audioCapabilities=h.filter((s=>ey(t,i,e,s))),o=!0,r.audioCapabilities.length&&(n=!0))}if(s.videoCapabilities){const h=s.videoCapabilities.filter((t=>Boolean(t.contentType)));h.length&&(r.videoCapabilities=h.filter((s=>ey(t,i,e,s))),o=!0,r.videoCapabilities.length&&(n=!0))}return o||(n=t(e,"video/mp4")),n?r:void 0}function ey(t,i,e,s){if(!s.contentType)return!1;if(s.encryptionScheme&&!Qa(i,s.encryptionScheme))return!1;if(s.robustness)return!1;return t(e,$A(s.contentType))}function sy(t){if(t.videoCapabilities)for(const i of t.videoCapabilities)if(i.contentType)return i.contentType;if(t.audioCapabilities)for(const i of t.audioCapabilities)if(i.contentType)return i.contentType}function ny(t){const i=[];for(const e of t)e.encryptionScheme&&i.push({contentType:e.contentType,robustness:e.robustness});return t.concat(i)}function ry(t){return!(!t.audioCapabilities||!t.audioCapabilities.some(oy))||!(!t.videoCapabilities||!t.videoCapabilities.some(oy))}function oy(t){return!t.robustness}function hy(t,i){const e=[];for(const s of t)s.robustness?e.push(s):e.push(Ei({},s,{robustness:i}));return e}var ay=class{async qA(t,i){i=i.filter((t=>!t.RS));for(const t of i)t.audioCapabilities&&(t.audioCapabilities=ny(t.audioCapabilities)),t.videoCapabilities&&(t.videoCapabilities=ny(t.videoCapabilities));if(t===pv&&i.some(ry)){const e=i.map((t=>function(t,i){return Ei({},t,{videoCapabilities:t.videoCapabilities?hy(t.videoCapabilities,i):void 0,audioCapabilities:t.audioCapabilities?hy(t.audioCapabilities,i):void 0})}(t,"SW_SECURE_CRYPTO")));try{const i=await Kl.requestMediaKeySystemAccess(t,e),s=i.getConfiguration();return new ZA(i,t,s)}catch(t){}}const e=await Kl.requestMediaKeySystemAccess(t,i),s=e.getConfiguration();return new ZA(e,t,s)}static PS(){return Fv()}};r(),r(),r(),r();var uy=class extends tu{get fS(){return this.zS&&this.zS.sessionId||""}get cS(){return NaN}get uS(){return this.US.rM}get Rb(){return this.QS}async vS(t,i,e){this.FS(),this.YS=new xh,this.TS(Tc(i),e),await this.YS.rM}TS(t,i){if(!t)throw new k("Expected initData to be defined but was "+t+".");const e=i&&i.playready&&i.playready.VS;let s;return s=i?this.GS.createSession(this.WS,t,e):this.GS.createSession(this.WS,t),s.addEventListener("mskeyclose",this.MS),s.addEventListener("mskeymessage",this.ZS),s.addEventListener("mskeyerror",this.Ss),s.addEventListener("mskeyadded",this.HS),this.zS=s,this.XS("status-pending"),s}async $n(t){return this.FS(),!0}async Yn(t){if(this.qS=new xh,this.FS(),!this.zS)return Promise.resolve();const i=Tc(t);if(0===i.byteLength)throw new k("Cannot call update with an empty response.");this.zS.update(i),await this.qS.rM}Ws(){return!this.gS&&this.zS&&(this.gS=!0,this.zS.close()),this.US.rM}async wS(){this.FS()}FS(){if(this.gS)throw new k("Already closing or closed.")}XS(t){this.QS.eM(),this.QS.tM(Sm,t),this.yo(new Aw(this.QS))}constructor(t,i){super(),this.GS=t,this.WS=i,this.gS=!1,this.qS=void 0,this.YS=void 0,this.zS=void 0,this.MS=()=>{this.gS=!0,this.US.sM(void 0),this.zS&&(this.zS.removeEventListener("mskeyclose",this.MS),this.zS.removeEventListener("mskeymessage",this.ZS),this.zS.removeEventListener("mskeyerror",this.Ss),this.zS.removeEventListener("mskeyadded",this.HS))},this.ZS=t=>{this.YS&&(this.YS.sM(void 0),this.YS=void 0),this.yo(new tr(this,"license-request",Wa(t.message).buffer,t.destinationURL||void 0))},this.Ss=()=>{const t=this.zS&&this.zS.error;if(!t)return;const i=new Em("Unknown CDM error",t.code,t.systemCode);if(this.YS)this.YS.nM(i),this.YS=void 0;else if(this.qS)this.qS.nM(i),this.qS=void 0;else switch(i.oM){case MSMediaKeyError.MS_MEDIA_KEYERR_OUTPUT:case MSMediaKeyError.MS_MEDIA_KEYERR_HARDWARECHANGE:this.XS("output-not-allowed");break;default:this.XS("internal-error")}},this.HS=()=>{this.YS&&(this.XS("usable"),this.YS.sM(void 0),this.YS=void 0),this.qS&&(this.XS("usable"),this.qS.sM(void 0),this.qS=void 0)},this.US=new xh,this.QS=new ru}},cy=class{async TS(t){return new uy(this.GS,this.WS)}IS(t){return Promise.resolve(!1)}bn(t){const i=()=>{t.msSetMediaKeys(this.GS),t.removeEventListener("loadedmetadata",i)};return t.readyState>=1?t.msSetMediaKeys(this.GS):t.addEventListener("loadedmetadata",i),Promise.resolve()}DS(t){return Promise.resolve()}tr(){return Promise.resolve()}constructor(t,i,e){this.GS=t,this.NS=i,this.md=e;const s=sy(e)||"video/mp4";this.WS=$A(s)}},ly=class{get NS(){return this.yS}LS(){return this.KS}kS(){const t=new gi.MSMediaKeys(this.yS);return Promise.resolve(new cy(t,this.yS,this.KS))}constructor(t,i){this.yS=t,this.KS=i}},dy=class{qA(t,i){try{return Promise.resolve(function(t,i){if(!fy())throw new k("Unsupported key system "+t);for(let e of i){let i=iy(gy,mw,t,e);if(i)return new ly(t,i)}throw new k("Unsupported key system configuration for "+t)}(t,i))}catch(t){return Promise.reject(t)}}static PS(){return fy()}};function fy(){return void 0!==gi.MSMediaKeys&&"function"==typeof gi.MSMediaKeys.isTypeSupported}function gy(t,i){return gi.MSMediaKeys.isTypeSupported(t,i)}r(),r(),r(),r();var _y=class extends tu{get fS(){return this.JS?this.JS.sessionId:""}get cS(){return NaN}get uS(){return this.US.rM}get Rb(){return this.QS}vS(t,i,e){const s=e&&e.fairplay&&e.fairplay.$S;if(!s)throw new k("Expected FairPlay contentId to be defined but was "+s+".");const n=function(t,i,e){const s=cm(t),n=2*s.length,r=2*i.length;let o=new ArrayBuffer(4+n+4+r+4+e.byteLength),h=new DataView(o),a=new da;return $(h,a,n,!0),rm(h,a,s,!0),$(h,a,r,!0),rm(h,a,i,!0),$(h,a,e.byteLength,!0),Vw(h,a,e),new T(o)}(Tc(i),s,this.tN);return this.JS=this.iN.createSession(this.WS,n),this.JS.addEventListener("webkitkeymessage",this.ZS,!1),this.JS.addEventListener("webkitkeyadded",this.HS,!1),this.JS.addEventListener("webkitkeyerror",this.Ss,!1),this.XS("status-pending"),this.eN.sM(this.JS),this.eN=new xh,Promise.resolve()}$n(t){return Promise.resolve(!0)}async Yn(t){const i=Tc(t);if(0===i.byteLength)throw new k("Cannot call update with an empty response.");this.sN=new xh;(this.JS||await this.eN.rM).update(i),await this.sN.rM}Ws(){var t;const i=this.JS;return i&&(i.removeEventListener("webkitkeymessage",this.ZS,!1),i.removeEventListener("webkitkeyadded",this.HS,!1),i.removeEventListener("webkitkeyerror",this.Ss,!1),i.close()),this.eN.Ty(),null==(t=this.sN)||t.Ty(),this.US.sM(void 0),this.US.rM}wS(){return Promise.resolve(void 0)}XS(t){this.QS.eM(),this.QS.tM(Sm,t),this.yo(new Aw(this.QS))}constructor(t,i,e){super(),this.iN=t,this.WS=i,this.tN=e,this.US=new xh,this.sN=void 0,this.QS=new ru,this.JS=void 0,this.eN=new xh,this.Ss=()=>{const t=this.JS&&this.JS.error;if(!t)return;const i=new Em("Unknown CDM error",t.code,t.systemCode);this.sN?(this.sN.nM(i),this.sN=void 0):i.oM===WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT?this.XS("output-not-allowed"):this.XS("internal-error"),this.yo(new yw)},this.ZS=t=>{this.yo(new tr(this,"license-request",Wa(t.message).buffer,"this is a test string"===t.destinationURL?void 0:t.destinationURL))},this.HS=()=>{this.sN&&(this.sN.sM(void 0),this.sN=void 0),this.XS("usable")}}};r();var qi=class extends Co{get name(){return"THEOplayerError"}get category(){return xd.fromCode(this.code)}constructor(t,i,e){super(i,e),this.code=t}};function vy(t,i){return t instanceof qi?t:t instanceof b?new qi(i,t.message,t):new qi(i,String(t))}var wy=class{getInternalMediaKeys(){return this.iN}async TS(t){if(!this.tN)throw new qi(vt.CONTENT_PROTECTION_CERTIFICATE_ERROR,"No valid certificate was provided.");return new _y(this.iN,this.WS,this.tN)}IS(t){return this.tN=Tc(t),Promise.resolve(!0)}bn(t){return t.webkitSetMediaKeys(this.iN),Promise.resolve()}DS(t){return t.webkitSetMediaKeys(null),Promise.resolve()}tr(){return Promise.resolve()}constructor(t,i,e){this.iN=t,this.NS=i,this.md=e,this.tN=void 0;const s=sy(e)||"video/mp4";this.WS=$A(s)}},my=class{get NS(){return this.yS}LS(){return this.KS}kS(){const t=new gi.WebKitMediaKeys(this.yS);return Promise.resolve(new wy(t,this.yS,this.KS))}constructor(t,i){this.yS=t,this.KS=i}},py=class{qA(t,i){try{return Promise.resolve(function(t,i){if(t!==Mv)throw new k(t+" is not supported with webkit-prefixed Encrypted Media Extensions.");if(!Ay())throw new k("Unsupported key system "+t);for(let e of i){let i=iy(yy,pw,t,e);if(i)return new my(t,i)}throw new k("Unsupported key system configuration for "+t)}(t,i))}catch(t){return Promise.reject(t)}}static PS(){return Ay()}};function Ay(){return void 0!==gi.WebKitMediaKeys&&"function"==typeof gi.WebKitMediaKeys.isTypeSupported}function yy(t,i){return gi.WebKitMediaKeys.isTypeSupported(t,i)}r();var by=class{async qA(t,i){for(let e of this.nN)try{return await e.qA(t,i)}catch(t){}throw new k("Unsupported key system configuration for "+t)}constructor(t){this.nN=t}};r(),r(),r(),r(),il(),r();var La=class{Wo(t,i){return new Promise((e=>{const s=Wt.Iy([this.rN.ly,i]),n=()=>{s.wy()};this.oN.push((()=>{const i=My(t,s.ly);return e(i),i.then(n,n)})),this.hN||(this.hN=this.aN())}))}Ty(){return this.uN(!0)}gn(){return this.cN=void 0,this.uN(!1)}uN(t){const i=this.hN;return this.rN.Ty(),t&&(this.rN=new Wt),Promise.resolve(i)}constructor(t){this.oN=[],this.hN=void 0,this.rN=new Wt,this.aN=()=>{if(0===this.oN.length)return this.cN?My(this.cN,this.rN.ly).then(this.lN,this.lN):this.lN();return this.oN.shift()().then(this.aN)},this.lN=()=>{if(0!==this.oN.length)return this.aN();this.hN=void 0},this.cN=t}};function My(t,i){return new Promise((e=>e(t(i))))}var Ty=new La,Sy=class extends tu{dN(){this.sN&&(this.XS("usable"),this.sN.sM(void 0),this.sN=void 0)}fN(t){const i=new Em("Unknown CDM error",t.errorCode,t.systemCode);this.sN?(this.sN.nM(i),this.sN=void 0):this.YS?(this.YS.nM(i),this.YS=void 0):i.oM===WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT?this.XS("output-restricted"):1===i.hM?this.XS("expired"):this.XS("internal-error")}gN(t){0!==t.message.byteLength?(this.YS&&(this.YS.sM(void 0),this.YS=void 0),this.yo(new tr(this,"license-request",Im(this.yS,Wa(t.message).buffer),t.defaultURL||void 0))):this.YS&&(this.YS.nM("Empty key message"),this.YS=void 0)}_N(t){this.vN||(this.vN=t,this.wN.sM(t))}get Rb(){return this.mN}get fS(){return this.pN}set fS(t){this.pN=t}get uS(){return this.US.rM}get cS(){return NaN}async Ws(){this.throwIfClosed(),this.sN&&(this.sN.nM(void 0),this.sN=void 0),this.wM=!0,this.US.sM(void 0)}async vS(t,i){this.throwIfClosed(),this.YS=new xh,this.AN=Tc(i);(this.vN||await this.wN.rM).webkitGenerateKeyRequest(this.yS,this.AN),await this.YS.rM}async $n(t){return this.throwIfClosed(),!1}async wS(){this.throwIfClosed()}async Yn(t){if(this.throwIfClosed(),this.sN=new xh,Ro.kf||Ro.Nf)return Ty.Wo((async()=>{await this.doUpdate(t)}));await this.doUpdate(t)}async doUpdate(t){if(void 0===this.sN)return;(this.vN||await this.wN.rM).webkitAddKey(this.yS,Tc(t),this.AN,this.fS),await this.sN.rM,Ro.Nf&&await kt(500)}throwIfClosed(){if(this.wM)throw new k("Already closing or closed.")}XS(t){this.mN.eM(),this.mN.tM(Sm,t),this.yo(new Aw(this.mN))}async yN(){const t=this.vN||await this.wN.rM;if(t.webkitCancelKeyRequest)try{t.webkitCancelKeyRequest(this.yS,this.pN)}catch(t){}finally{await kt(500)}}constructor(t){super(),this.yS=t,this.YS=void 0,this.sN=void 0,this.wM=!1,this.AN=void 0,this.vN=void 0,this.US=new xh,this.pN="",this.wN=new xh,this.mN=new ru}},Ny=class{bn(t){return this.vN=t,this.vN.addEventListener("webkitkeyadded",this.HS),this.vN.addEventListener("webkitkeyerror",this.bN),this.vN.addEventListener("webkitkeymessage",this.MN),this.TN.forEach(((i,e)=>i._N(t))),this.SN.forEach((i=>i._N(t))),Promise.resolve()}DS(t){return t.removeEventListener("webkitkeyadded",this.HS),t.removeEventListener("webkitkeyerror",this.bN),t.removeEventListener("webkitkeymessage",this.MN),this.vN=void 0,Promise.resolve()}async tr(){let t=this.TN.entries(),i=t.next();for(;!i.done;)await i.value[1].yN(),i=t.next();this.TN.clear()}async TS(t,i,e){const s=new Sy(this.NS);return this.vN&&s._N(this.vN),this.SN.push(s),s}IS(t){return Promise.resolve(!1)}NN(t){if(!t)return;let i=this.TN.get(t);return i||(i=this.SN.shift(),i?(i.fS=t,this.TN.set(t,i),i):void 0)}constructor(t,i){this.NS=t,this.md=i,this.vN=void 0,this.TN=ll(),this.SN=[],this.HS=t=>{const i=this.NN(t.sessionId);i&&i.dN()},this.bN=t=>{const i=this.NN(t.sessionId);i&&i.fN(t)},this.MN=t=>{const i=this.NN(t.sessionId);i&&i.gN(t)}}},Iy=class{kS(){return Promise.resolve(new Ny(this.NS,this.DN))}LS(){return this.DN}constructor(t,i){this.NS=t,this.DN=i}},Dy=class{qA(t,i){try{return Promise.resolve(function(t,i){if(!Dy.PS())throw new k("Unsupported key system "+t);for(let e of i){let i=iy(Ey,mw,t,e);if(i)return new Iy(t,i)}throw new k("Unsupported key system configuration for "+t)}(t,i))}catch(t){return Promise.reject(t)}}static PS(){return Yv()}};function Ey(t,i){const e=Jd();return!(!e||!e.canPlayType||""===e.canPlayType(i,t))}il(),r();var ky,xy=class{qA(t,i){return t===pv||t===eo?Promise.resolve(void 0):Promise.reject(new b("DRM configuration not supported"))}};function Ly(){return ky||(ky=function(){const t=[];py.PS()&&t.push(new py);ay.PS()&&t.push(new ay);dy.PS()&&t.push(new dy);Dy.PS()&&t.push(new Dy);Ro.Lf&&t.push(new xy);return new by(t)}()),ky}il(),r(),r();var Cy=class{eM(t){this.EN.delete(t)}kN(){this.EN.clear()}$b(t){return this.EN.get(t)}tM(t,i){this.EN.set(t,i)}constructor(){this.EN=ll()}},jy=class t{static xN(){return t.Ld||(t.Ld=Oy.PS()?new Oy:new Cy),t.Ld}static eM(i){t.xN().eM(i)}static kN(){t.xN().kN()}static $b(i){return t.xN().$b(i)}static tM(i,e){t.xN().tM(i,e)}};jy.Ld=void 0;var Oy=class extends jy{static PS(){const t="foobar";try{return self.sessionStorage.setItem(t,t),self.sessionStorage.removeItem(t),!0}catch(t){return!1}}eM(t){self.sessionStorage.removeItem(t)}kN(){self.sessionStorage.clear()}$b(t){var i;return null!=(i=self.sessionStorage.getItem(t))?i:void 0}tM(t,i){self.sessionStorage.setItem(t,i)}};r(),r();var Ry=(()=>{const t=self.Blob;if(t)try{new t;return function(t){return(i,e)=>new t(i,e)}(t)}catch(t){}const i=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder;if(i)return function(t){return(i,e)=>{const s=new t;if(i)for(const t of i)s.append(t);return s.getBlob(e&&e.type||"")}}(i)})();function Py(t,i,e){const s=Ry([i],{type:"application/octet-stream"}),n=URL.createObjectURL(s),r=function(t,i){let e=t;const s=e.indexOf("?");if(s>=0&&(e=e.substr(0,s)),e=e.substr(e.lastIndexOf("/")+1),i){let t=e.indexOf(".");t<0&&(t=e.length),e=e.substr(0,t)+i+e.substr(t)}return e}(t,e),o=h.createElement("a");o.href=n,o.download=r,h.body.appendChild(o),o.click(),h.body.removeChild(o),URL.revokeObjectURL(n)}r();var zy="default";r(),r(),r(),r();var Ee=function(t){return t.LN="arraybuffer",t.CN="json",t.jN="stream",t.ON="text",t}({});r();var Rh=class t{append(t,i){let e=t,s=i;e=By(e),s=Uy(s);const n=e.toLowerCase();if(this.Hv.hasOwnProperty(n)){const t=this.Hv[n],i=t[1];t[1]=i?i+", "+s:s}else this.Hv[n]=[e,s]}delete(t){const i=By(t).toLowerCase();delete this.Hv[i]}get(t){const i=By(t).toLowerCase();return this.Hv.hasOwnProperty(i)?this.Hv[i][1]:null}has(t){const i=By(t).toLowerCase();return this.Hv.hasOwnProperty(i)}set(t,i){let e=t;e=By(e);const s=e.toLowerCase();this.Hv[s]=[e,Uy(i)]}forEach(t,i){for(const e in this.Hv)this.Hv.hasOwnProperty(e)&&t.call(i,this.Hv[e][1],e,this)}asList(){const t=[];for(const i in this.Hv)if(this.Hv.hasOwnProperty(i)){const[e,s]=this.Hv[i];t.push([e,s])}return t}RN(){const t={};return this.forEach(((i,e)=>{t[e]=i})),t}PN(t){t.forEach(((t,i)=>{this.append(i,t)}))}zN(t){t.forEach(((t,i)=>{this.set(i,t)}))}constructor(i){this.Hv={},i instanceof t?i.asList().forEach((t=>{let[i,e]=t;this.append(i,e)})):Array.isArray(i)?i.forEach((t=>{let[i,e]=t;this.append(i,e)})):i&&_.getOwnPropertyNames(i).forEach((t=>{this.append(t,i[t])}))}};function By(t){let i=t;if("string"!=typeof i&&(i=String(i)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(i))throw new k("Invalid character in header field name");return i}function Uy(t){let i=t;return"string"!=typeof i&&(i=String(i)),i}r(),r(),r();var Qy=ud(_d());r();var Fy=class extends Co{get name(){return"AggregateError"}constructor(t){super(""+t.join("\n"),t[0]),this.causes=t}};ds();var hu=a,Yy=Od(hu.ReadableStream)&&Od(hu.WritableStream)&&Od(hu.TransformStream)&&dc(hu.ReadableStream.prototype.pipeThrough)&&!Pf.Rp,kc=Yy?hu.ReadableStream:Qy.ReadableStream,Vy=Yy?hu.WritableStream:Qy.WritableStream,Ra=Yy?hu.TransformStream:Qy.TransformStream,Gy=(Yy&&hu.ByteLengthQueuingStrategy?hu.ByteLengthQueuingStrategy:Qy.ByteLengthQueuingStrategy,Yy&&hu.CountQueuingStrategy?hu.CountQueuingStrategy:Qy.CountQueuingStrategy);function Wy(t){return function(t){return new kc({start(i){for(const e of t)i.enqueue(e);i.close()}})}([t])}function Zy(t){return Wy(function(t){return new T(t)}(t))}function Hy(t,i){let e=i;const s=t.getReader(),n=new xh,r=()=>{o();const t=new J;s.cancel(t).catch(ya),n.nM(t)},o=()=>{e&&(e.oy(r),e=void 0)};e&&(e.sy?r():e.uy(r));const h=[],a=t=>t.done?(o(),Promise.resolve(h)):(h.push(t.value),Promise.resolve(s.read()).then(a));return Promise.resolve(s.read()).then(a).then((t=>{o(),n.sM(t)}),(t=>{o(),n.nM(t)})),n.rM}function Xy(t,i){return Hy(t,i).then((t=>ih(t).buffer))}function qy(t,i){let e=i;const{readable:s,writable:n}=new Ra,r=n.getWriter(),o=()=>{e&&e.Ty()};return r.closed.then(o,o),t.then((t=>(e=void 0,r.releaseLock(),t.pipeTo(n).catch(ya))),(t=>(e=void 0,r.releaseLock(),n.abort(t).catch(ya)))),s}function Ky(t){const{readable:i,writable:e}=new Ra;return t.pipeTo(e,{preventCancel:!0}).catch((i=>{let e;e=Dn(i)?i[0]===i[1]||Tu(i[0])&&Tu(i[1])?i[0]:new Fy(i):i,t.cancel(e).catch(ya)})),i.tee()}function Jy(t){return cm(new T(t))}function $y(t){return Pl(t).buffer}r(),ds();var tb="content-type",ib="text/plain;charset=UTF-8",eb=class{BN(t){return this.UN(t).then(JSON.parse)}QN(t,i){switch(t){case Ee.LN:return this.FN(i);case Ee.CN:return this.BN(i);case Ee.jN:return this.YN();case Ee.ON:return this.UN(i);default:throw new k}}};function sb(t,i,e){if(t instanceof eb)return t;if(t instanceof kc)return function(t,i){return new rb({YA:0,YN:t,VN:nb(i)})}(t,e);const s=nb(e),n=Promise.resolve(t).then((t=>function(t,i){if(t){if("string"==typeof t)return{YA:Ee.ON,GN:t,VN:i||ib};if(t instanceof ArrayBuffer||mm(t))return{YA:Ee.LN,GN:db(t),VN:i};if(Cd(t)||Dn(t))return{YA:Ee.CN,GN:t,VN:i};throw new k("Unsupported BodyInit type")}return{YA:Ee.ON,GN:null,VN:i}}(t,s)));return new rb({YA:1,rM:n,WN:i})}function nb(t){return(t.get(tb)||"").toLowerCase()}var rb=class t extends eb{get ZN(){return this.HN}get XN(){return 0===this.qN.YA}KN(){return this.JN.rM}UN(t){return this.$N(ob,t)}BN(t){return this.$N(ab,t)}FN(t){return this.$N(cb,t)}YN(){return this.tI(function(t){return 0===t.YA?t.YN:qy(t.rM.then(lb).then(Zy),t.WN)}(this.qN))}$N(t,i){if(this.HN)return Promise.reject(new k("Already used"));this.HN=!0;const e=t(this.qN,i);return this.JN.Sy(e.then(ya)),e}tI(t){if(this.HN)throw new k("Already used");if(t.locked)throw new k("Body stream is locked");this.HN=!0;const i=new Ra,e=Promise.resolve(t.pipeTo(i.writable));return this.JN.Sy(e),i.readable}iI(t){this.qN=t,1===t.YA&&t.rM.catch(ya)}eI(){if(this.HN)throw new k("Already used");const i=function(t){if(0===t.YA){const[i,e]=t.YN.tee();return[{YA:t.YA,YN:i,VN:t.VN},{YA:t.YA,YN:e,VN:t.VN}]}{const[i,e]=t.WN.Ny();return[{YA:t.YA,rM:t.rM,WN:i},{YA:t.YA,rM:t.rM,WN:e}]}}(this.qN),e=i[0],s=i[1];return this.iI(e),new t(s)}constructor(t){super(),this.HN=!1,this.JN=new xh,this.JN.rM.catch(ya),this.iI(t)}};function ob(t,i){return 0===t.YA?Xy(t.YN,i).then(Jy):(i&&t.WN.Sy(i),Vh(t.rM.then(hb),t.WN))}function hb(t){switch(t.YA){case Ee.ON:return Promise.resolve(t.GN||"");case Ee.LN:return Promise.resolve(t.GN).then(Jy);case Ee.CN:return Promise.resolve(t.GN).then(JSON.stringify)}}function ab(t,i){return 0===t.YA?ob(t,i).then(JSON.parse):(i&&t.WN.Sy(i),Vh(t.rM.then(ub),t.WN))}function ub(t){return t.YA===Ee.CN?Promise.resolve(t.GN):hb(t).then(JSON.parse)}function cb(t,i){return 0===t.YA?Xy(t.YN,i):(i&&t.WN.Sy(i),Vh(t.rM.then(lb),t.WN))}function lb(t){switch(t.YA){case Ee.LN:return Promise.resolve(t.GN);case Ee.ON:case Ee.CN:return hb(t).then($y)}}function db(t){return t instanceof ArrayBuffer?t:Wa(ka(t)).buffer}var fb=class extends eb{get ZN(){return this.sI.ZN}get XN(){return this.sI.XN}KN(){return this.sI.KN()}UN(t){return this.sI.UN(t)}BN(t){return this.sI.BN(t)}FN(t){return this.sI.FN(t)}YN(t){return this.sI.YN(t)}eI(){return this.sI.eI()}constructor(t){super(),this.sI=t}};function jc(t){return t.nI>=200&&t.nI<=299||304===t.nI}var qt=class t extends fb{rI(t){return this.QN(this.oI,t)}Zb(){return new t({rI:this.eI(),hI:this.hI},this)}constructor(t,i){let e,s,n,r,o;i?(e=i.aI,s=i.oI,n=i.nI,r=i.uI,o=i.cI):(e=[],s=Ee.ON,n=200,r="OK",o=!1);const h=t.hI,a=new Rh(t.aI||e),u=t.oI||s,c=t.lI||(i&&i.hI===h?i.lI:h.zu),l=i?i.sI:null;super(sb(void 0!==t.rI?t.rI:l,t.WN||new Wt,a)),this.aI=a,this.hI=h,this.lI=c,this.oI=u,this.nI=void 0!==t.nI?t.nI:n,this.uI=void 0!==t.uI?String(t.uI):r,this.cI=t.cI||o}};r();var Ve=function(t){return t.DELETE="DELETE",t.GET="GET",t.HEAD="HEAD",t.OPTIONS="OPTIONS",t.POST="POST",t.PUT="PUT",t}({}),ar=function(t){return t.dI="",t.fI="manifest",t.gI="segment",t._I="preload-hint",t.vI="content-protection",t}({}),cl=function(t){return t.dI="",t.wI="initialization-segment",t.mI="fairplay-license",t.pI="fairplay-certificate",t.AI="widevine-license",t.yI="widevine-certificate",t.bI="playready-license",t.MI="clearkey-license",t.TI="aes128-key",t}({}),ol=function(t){return t.dI="",t.SI="audio",t.NI="video",t.ON="text",t.II="image",t}({}),gb=function(t){return t.DI="same-origin",t.EI="no-cors",t.kI="cors",t.xI="navigate",t}({}),Gs=class{constructor(t,i){const e=t.zu;let s,n,r,o,h,a,u,c,l,d,f,g,_,v,w;var m,p,A;i?(s=i.GN,n=i.aI,r=i.LI,o=i.oI,h=i.CI,a=i.jI,u=i.ly,c=i.YA,l=i.OI,d=i.RI,f=i.zI,g=i.BI,_=i.UI,v=i.QI,w=i.FI):(s=null,n={},r="GET",o=Ee.ON,h=0,a=0,c="",l="",d="",f=!1,_=void 0,v=!1,w=void 0),this.zu=e,this.GN=t.GN||s,this.aI=new Rh(t.aI||n),this.LI=t.LI||r,this.oI=t.oI||o,this.CI=void 0!==t.CI?Number(t.CI)||0:h,this.jI=void 0!==t.jI?Number(t.jI)||0:a,this.ly=t.ly||u||(new Wt).ly,this.YA=t.YA||c,this.OI=t.OI||l,this.RI=t.RI||d,this.zI=void 0!==t.zI?Boolean(t.zI):f,this.BI=t.BI||g,this.UI=null!=(m=t.UI)?m:_,this.QI=null!=(p=t.QI)?p:v,this.FI=null!=(A=t.FI)?A:w}},_b=class{hI(t){const i=function(t){return new qt({rI:null,aI:{},hI:t,lI:t.zu,oI:t.oI,nI:0,uI:Zi._b})}(new Gs(t));return Promise.resolve(i)}YI(t){}gn(){}};Qi();var Mc=class t{static get VI(){return t.GI||(t.GI=new t(new _b)),t.GI}hI(t){const i=this.WI(t);return this.ZI.hI(i)}YI(t){return this.ZI.YI(this.HI(t))}WI(i){let e=new Gs(i);if(!this.XI){const i=t.qI(e.zu);e=new Gs({zu:i},e)}return e}HI(i){let e=i.zu;return this.XI||(e=t.qI(e)),{zu:e,GN:i.GN}}static qI(t){return Fe.kA&&Et(t,"http://")?t.replace(":","s:"):t}gn(){this.ZI.gn()}constructor(t,i=!0){this.ZI=t,this.XI=i}};function bt(t,i){const e=Fe.Ah(t);return vb(e,i),e.toString()}function vb(t,i){for(const e of _.keys(i))t.searchParams.set(e,i[e])}function qs(t,i){let e=Fe.TA(t);return i&&!rl(e,"/")&&(e+="/"),e}Mc.GI=void 0,r(),r(),r(),Qi();var wb=/cache:(.+)?(?=&|$)/,mb="http://webcache.googleusercontent.com/search?q=cache:";function pb(t){if(!Et(t,mb))return"";const i=Fe.Ah(t).search.match(wb);return i&&i.length>1?i[1]:""}function Ab(t){return Fe.Ah(".",t)}r(),r();var wt=function(t){return t.KI="HttpOpenError",t.JI="HttpResponseError",t.$I="HttpTimeoutError",t}({}),yb=class extends Co{get hI(){return this.tD}constructor(t,i,e){super(i,e),this.tD=t}};var Sc=class extends yb{get name(){return wt.KI}constructor(t,i){super(t,function(t){return"Error while opening "+t+". Invalid URL."}(t.zu),i)}};r();var bb=class extends yb{get name(){return wt.JI}get iD(){return this.eD}constructor(t,i,e){super(t.hI,null!=e?e:function(t){return"Error while loading "+t.hI.zu+", status code "+t.nI}(t),i),this.eD=t}};r();var At=class extends yb{get name(){return wt.$I}constructor(t,i){super(t,function(t){return"Request for "+t.zu+" timed out after "+t.CI+" seconds."}(t),i)}};r(),ds(),il();var Mb=self.fetch,Tb=self.Request,Sb=self.Response,Nb=self.Headers,Ib=self.ReadableStream,Db=self.AbortSignal,Eb=self.AbortController,kb=di((()=>{try{return dc(Mb)&&Od(Tb)&&Od(Sb)&&Od(Nb)&&"forEach"in Nb.prototype&&ov()}catch(t){return!1}})),xb=["http:","https:"];var Lb=di((()=>{try{return kb()&&Od(Db)&&Od(Eb)&&"signal"in Tb.prototype}catch(t){return!1}})),Cb=di((()=>{try{return kb()&&Od(Ib)&&"body"in Sb.prototype&&!Ro.hf}catch(t){return!1}}));function jb(t){return t instanceof yb}function Ob(t){return t instanceof bb}function Rb(t,i){const e=t.aI.has("content-length")?Number(t.aI.get("content-length")):void 0;let s;return s=t.XN?function(t,i,e){return t.pipeThrough(new Ra(new Pb(i,e)))}(t.YN(),i,e):async function(t,i,e){await Promise.resolve(),i(0,e);const s=await t,n=s.byteLength;return i(n,null!=e?e:n),s}(t.FN(),i,e),new qt({rI:s,hI:t.hI},t)}ds(),r(),r();var Pb=class{transform(t,i){this.sD+=t.byteLength,this.nD(this.sD,this.rD),i.enqueue(t)}flush(t){var i;this.nD(this.sD,null!=(i=this.rD)?i:this.sD)}constructor(t,i){this.nD=t,this.rD=i,this.sD=0}};var zb=class{async oD(){const t=this.tD;let i,e;t.CI&&(this.hD=u((()=>{this.aD=!0,this.rN.Ty()}),t.CI),this.rN.ly.Ay((()=>{c(this.hD)})));try{i=Mb(t.zu,{method:t.LI,headers:t.aI.RN(),body:t.GN,credentials:t.zI?"include":"same-origin",signal:Qb(this.rN.ly),mode:t.UI,keepalive:t.FI})}catch(i){throw new Sc(t,i)}try{e=await i}catch(t){const i=this.uD(t);throw Tu(i)&&this.rN.Ty(),i}const s=e.url||t.zu,n=0===e.status&&"file:"===function(t){return Fe.Ah(t).protocol}(s)?200:e.status,r=new Bb(this,e,this.rN);let o=new qt({rI:r,hI:t,oI:t.oI,aI:Fb(e.headers),nI:n,uI:e.statusText,lI:s});if(!jc(o))throw new bb(o);return t.BI&&(o=Rb(o,t.BI)),o}uD(t){return jb(t)?t:Tu(t)?this.aD?new At(this.tD):new J(t.message,t):this.eD?new bb(this.eD,t):new Sc(this.tD,t)}constructor(t){this.rN=new Wt,this.eD=void 0,this.hD=0,this.aD=!1,this.tD=t,this.rN.Sy(t.ly),this.iD=this.oD()}},Bb=class t extends eb{get ZN(){return this.cD.bodyUsed}get XN(){return $t(this.cD.body)}KN(){return this.JN.rM}UN(t){return this.$N(this.cD.text(),t)}FN(t){return this.$N(this.cD.arrayBuffer(),t)}YN(){const t=this.cD.body;return t?this.tI(t):qy(this.FN().then(Zy),this.rN)}eI(){const i=this.cD.clone(),[e,s]=this.rN.Ny();return this.rN=e,new t(this.lD,i,s)}$N(t,i){i&&this.rN.Sy(i);let e=Ao(Promise.resolve(t),this.rN.ly).catch((t=>{throw this.lD.uD(t)}));return e=Vh(e,this.rN),this.JN.Sy(e.then(ya)),e}tI(t){return new kc(new Yb(t,(t=>this.lD.uD(t)),this.rN,this.JN),{highWaterMark:0})}constructor(t,i,e){super(),this.JN=new xh,this.lD=t,this.cD=i,this.rN=e,this.JN.rM.catch(ya)}},Ub="abort";function Qb(t){if(!Lb())return;const i=new Eb;if(t.sy)i.abort();else if(!t._y){const e=()=>{s(),i.abort()},s=()=>{i.signal.removeEventListener(Ub,e),t.oy(e),t.yy(s)};i.signal.addEventListener(Ub,e),t.uy(e),t.Ay(s)}return i.signal}function Fb(t){if(function(t){return _o(t)&&"function"==typeof t.forEach}(t)){const i=new Rh;return t.forEach(((t,e)=>{Array.isArray(t)&&2===t.length?i.append(t[0],t[1]):i.append(e,t)})),i}return new Rh(t)}var Yb=class{start(t){this.Wg=this.dD.getReader()}async pull(t){let i;try{i=await Ao(this.Wg.read(),this.rN.ly)}catch(i){const e=this.fD(i);return this.JN.nM(e),this.rN.Ty(),this.Wg.cancel(e).catch(ya),void t.error(e)}i.done?(this.JN.sM(),this.rN.Ty(),t.close()):t.enqueue(i.value)}cancel(t){return this.rN.Ty(),this.JN.nM(t),this.Wg.cancel(t)}constructor(t,i,e,s){this.dD=t,this.fD=i,this.rN=e,this.JN=s}};r();var Vb=class{get iD(){return this.gD.rM}oD(){const t=this._D,i=this.tD;if(i.ly.sy)return this.vD();t.onreadystatechange=()=>this.wD(),t.onprogress=t=>this.nD(t),t.onload=()=>this.mD(),t.onloadend=()=>this.pD(),t.onerror=()=>this.yD(),t.ontimeout=()=>this.bD(),t.onabort=()=>this.vD(),t.open(i.LI,i.zu,!0),t.withCredentials=Boolean(i.zI),"responseType"in t&&i.oI&&(i.oI===Ee.ON?t.responseType="text":t.responseType="arraybuffer"),i.aI.forEach(((i,e)=>{t.setRequestHeader(e,i)})),i.CI&&(t.timeout=i.CI),this.rN.ly.uy(this.MD);const e=i.GN;e?t.send(e):t.send()}wD(){const t=this._D;void 0!==t&&t.readyState>=2&&!this.TD&&(this.TD=!0,this.SD())}SD(){var t;const i=this._D,e=function(t){const i=new Rh,e=t.replace(/\r?\n[\t ]+/g," ");return e.split(/\r?\n/).forEach((t=>{const e=t.split(":"),s=e.shift().trim();if(s){const t=e.join(":").trim();i.append(s,t)}})),i}(i.getAllResponseHeaders()||""),s=this.tD;var n;this.ND=new xh,this.eD=new qt({hI:s,oI:s.oI,rI:this.ND.rM,nI:i.status,uI:i.statusText,aI:e,lI:null!=(n=i.responseURL)?n:e.get("X-Request-URL")}),null==(t=this.gD)||t.sM(this.eD)}mD(){var t;const i=this._D;if(void 0===i)return;let e=i.response;if(!$t(e)){const t=this.tD.oI;e=t===Ee.ON?i.responseText:t===Ee.LN?new ArrayBuffer(0):{}}null==(t=this.ND)||t.sM(e)}pD(){this.gn()}nD(t){void 0!==this._D&&(null==this.tD.BI||this.tD.BI.call(this.tD,t.loaded,t.lengthComputable?t.total:void 0))}yD(){const t=new b("Network request failed");this.eD?this.Ss(new bb(this.eD,t)):this.Ss(new Sc(this.tD,t))}bD(){this.Ss(new At(this.tD))}vD(){this.Ss(new J),this.gn()}Ss(t){var i,e;null==(i=null!=(e=this.ND)?e:this.gD)||i.nM(t)}gn(){this._D=void 0,this.eD=void 0,this.gD=void 0,this.ND=void 0,this.rN.wy()}constructor(t){this.rN=new Wt,this.eD=void 0,this.gD=new xh,this.TD=!1,this.MD=()=>{var t;this.vD(),null==(t=this._D)||t.abort()},this.tD=t,this.rN.Sy(t.ly),this._D=new $l,this.oD()}};function ku(t,i,e){return new Promise(((s,n)=>{if(e&&e.sy)return n(new J);const r=t=>{h(),s(t)},o=()=>{h(),n(new J)},h=()=>{t.removeEventListener(i,r),e&&e.oy(o)};t.addEventListener(i,r),e&&e.uy(o)}))}r(),ds(),il();var Gb=class{hI(t){return function(t){if(!kb()||!function(t){try{return xb.indexOf(new self.URL(t,self.location.href).protocol)>=0}catch(t){return!1}}(t.zu))return!1;if(!Cb()&&t.BI)return!1;if(!t.QI){if(Ro.kf&&Ro.mf<=68)return!1;if(Ro.Nf)return!1}return!0}(t)?new zb(t).iD:new Vb(t).iD}YI(t){if(Vf&&Vf.sendBeacon)Vf.sendBeacon(t.zu,Ry([t.GN],{type:t.VN}));else{const i=t.VN?{"Content-type":t.VN}:void 0;this.hI(new Gs({LI:Ve.POST,zu:t.zu,GN:t.GN,aI:i,UI:gb.EI})).then((t=>{V(t.FN())}),ya)}}gn(){}};r(),r();var Yo=function(t){return t[t.DD=1]="DD",t[t.ED=2]="ED",t[t.ON=3]="ON",t[t.kD=4]="kD",t[t.xD=9]="xD",t}({});function rr(t){return 1===t.LD}function Wb(t){return 3===t.LD}r();var Zb=class extends Co{constructor(t){super("Invalid XML",t)}},Hb=class{CD(t){const i=new DOMParser;let e;try{e=i.parseFromString(t,"text/xml")}catch(t){throw new Zb(t)}if(!e||e.getElementsByTagName("parsererror").length>0)throw new Zb;return new iM(e)}},Xb=class t{get LD(){return Yo.ED}get jD(){var t;return null!=(t=this.OD.localName)?t:nM(this.OD.nodeName)}get l(){return this.OD.nodeName}get RD(){var t;return null!=(t=this.OD.namespaceURI)?t:void 0}get PD(){var t;return null!=(t=this.OD.prefix)?t:void 0}get zD(){return this.OD.nodeValue}BD(t){return this.OD.isEqualNode(t.OD)}UD(i){return new t(this.OD.cloneNode(i))}constructor(t){this.OD=t}},qb=class{get QD(){return void 0===this.FD&&(this.FD=function(t){const i=[];for(let e=0;e<t.length;e++){const s=sM(t.item(e));s&&i.push(s)}return i}(this.YD.childNodes)),this.FD}get m(){return this.QD.filter(eM)}VD(t){return this.QD.filter((i=>eM(i)&&i.GD===t))}WD(t,i){return this.QD.filter((e=>eM(e)&&e.jD===i&&e.RD===t))}get ZD(){return this.YD}HD(t){this.YD.appendChild(t.ZD),this.FD&&this.FD.push(t)}BD(t){return this.YD.isEqualNode(t.ZD)}constructor(t){this.FD=void 0,this.YD=t}},Kb=class t extends qb{get LD(){return Yo.DD}get jD(){var t;return null!=(t=this.YD.localName)?t:nM(this.YD.nodeName)}get RD(){var t;return null!=(t=this.YD.namespaceURI)?t:void 0}get PD(){var t;return null!=(t=this.YD.prefix)?t:void 0}get GD(){return this.YD.nodeName}get XD(){return function(t){const i=[];for(let e=0;e<t.length;e++)i.push(new Xb(t.item(e)));return i}(this.YD.attributes)}get qD(){return this.YD.textContent}KD(t){if(this.YD.hasAttribute(t))return this.YD.getAttribute(t)}JD(t,i){if(this.YD.hasAttributeNS(t,i))return this.YD.getAttributeNS(t,i)}$D(t){this.YD.removeAttribute(t)}tE(t,i){this.YD.removeAttributeNS(t,i)}iE(t,i){this.YD.setAttribute(t,i)}eE(t,i,e){this.YD.setAttributeNS(t,i,e)}UD(i){return new t(this.YD.cloneNode(i))}constructor(t){super(t)}},Jb=class{get rI(){return this.YD.nodeValue}get ZD(){return this.YD}BD(t){return this.rI===t.rI}constructor(t){this.YD=t}},$b=class t extends Jb{get LD(){return Yo.ON}UD(i){return new t(this.YD.cloneNode(i))}constructor(t){super(t)}},tM=class t extends Jb{get LD(){return Yo.kD}UD(i){return new t(this.YD.cloneNode(i))}constructor(t){super(t)}},iM=class t extends qb{get LD(){return Yo.xD}get sE(){return new Kb(this.YD.documentElement)}UD(i){return new t(this.YD.cloneNode(i))}constructor(t){super(t)}};function eM(t){return rr(t)}function sM(t){switch(t.nodeType){case Yo.DD:return new Kb(t);case Yo.ON:return new $b(t);case Yo.kD:return new tM(t)}}function nM(t){const i=t.indexOf(":");return i<0?t:t.substr(i+1)}!function(t){Fe=t}(new class extends nv{get _A(){return this.nE||(this.nE=new Vv(Ly())),this.nE}get rE(){return this.oE}get hE(){return this.aE}get uE(){return this.cE}get lE(){return!1}get dE(){return jy.xN()}get fE(){return{gE:Py}}get _E(){return Kl.connection&&Kl.connection.effectiveType||zy}get vE(){return Kl.connection&&Kl.connection.type||"unknown"}get wE(){return this.mE||(this.mE=new Mc(new Gb)),this.mE}CD(t){return this.pE.CD(t)}constructor(...t){super(...t),this.nE=void 0,this.oE=Cb(),this.aE=Ro.gg||Ro.hf,this.cE=(Ro.gg||Ro.kf&&Ro.mf<=68||Ro.hf)&&!(Ro.Nf&&Ro.Df<3),this.mE=void 0,this.pE=new Hb}}),r(),r(),r(),r(),r(),r();var rM=class extends gs{},xt=class extends gs{get ht(){return this.AE()}AE(){return this.yE.ht}bE(){return this.yE.bE()}get TE(){return this.SE()}SE(){return this.yE.TE}get NE(){return this.DE()}set NE(t){this.EE(t)}DE(){return this.yE.NE}EE(t){this.yE.NE=t}get bt(){return this.kE()}kE(){return this.yE.bt}get xE(){return this.LE()}set xE(t){this.CE(t)}LE(){return this.yE.xE}CE(t,i){this.yE.CE(t,i)}get ct(){return this._d()}_d(){return this.yE.ct}get we(){return this.jE()}jE(){return this.yE.we}get OE(){return this.RE()}RE(){return this.yE.OE}get lt(){return this.PE()}get zE(){return this.BE()}PE(){return this.yE.lt}BE(){return this.yE.zE}get UE(){return this.QE()}QE(){return this.yE.UE}get FE(){return this.YE()}YE(){return this.yE.FE}get VE(){return this.GE()}GE(){return this.yE.VE}get WE(){return this.ZE()}set WE(t){this.HE(t)}ZE(){return this.yE.WE}HE(t){this.yE.WE=t}get XE(){return this.qE()}qE(){return this.yE.XE}get KE(){return this.JE()}JE(){return this.yE.KE}get $E(){return this.ek()}set $E(t){this.nk(t)}ek(){return this.yE.$E}nk(t){this.yE.$E=t}get rk(){return this.hk()}hk(){return this.yE.rk}get ck(){return this.lk()}set ck(t){this.dk(t)}lk(){return this.yE.ck}dk(t){this.yE.ck=t}get fk(){return this.gk()}gk(){return this.yE.fk}get _k(){return this.vk()}vk(){return this.yE._k}get wk(){return this.pk()}pk(){return this.yE.wk}Ya(){return this.yE.Ya()}ka(t,i){return this.yE.ka(t,i)}get nt(){return this.Ak()}Ak(){return this.yE.nt}get yk(){return this.bk()}bk(){return this.yE.yk}get rt(){return this.Mk()}Mk(){return this.yE.rt}get Tk(){return this.Sk()}Sk(){return this.yE.Tk}get Nk(){return this.Ik()}set Nk(t){this.Dk(t)}get Ek(){return this.xk()}xk(){return this.yE.Ek}Ik(){return this.yE.Nk}Dk(t){this.yE.Nk=t}get Lk(){return this.yE.Lk}set Lk(t){this.yE.Lk=t}Ck(){return this.yE.Ck()}_a(){return this.yE._a()}jk(){return this.yE.jk()}ur(t){this.yE.ur(t)}ar(){this.yE.ar()}be(){this.yE.be()}Ok(){this.yE.Ok()}Rk(){this.yE.Rk()}Pk(){this.yE.Pk()}ge(){this.yE.ge()}zk(){return this.yE.zk()}Bk(){return this.yE.Bk()}Uk(){this.yE.Uk()}Qk(){this.yE.Qk()}tr(){return this.yE.tr()}Fk(){this.yE.Fk()}Yk(){this.yE.Yk()}Vk(t){return this.yE.Vk(t)}Gk(t){return!1}async gn(){this.Bo(),await this.yE.gn()}Wk(t){return this.yE.Wk(t)}constructor(t){super(),this.Zk=t=>{this.Gk(t)||this.yo(t)},this.yE=t,t.Ly(this.Zk)}};r(),r(),r();var bs=function(t){return t.Hk="Xk",t.qk="Kk",t}({});r(),r(),r(),r();var ua=class extends Jr{get ga(){return this.Za||(this.Za=this.ma()),this.Za}constructor(t,i){super(t,i),this.Za=void 0}};function oM(t){return Boolean(t&&t.ga)}var du=class extends ua{constructor(t){super(t)}},Pu=class extends Jr{constructor(t){super(t)}},hM=class extends du{ma(){return new aM(this.Ht.ga)}constructor(t){super(bs.Hk),this.Ht=t}},aM=class extends Pu{constructor(t){super("addtrack"),this.track=t}};r();var uM=class extends du{ma(){return new cM(this.Ht.ga)}constructor(t){super(bs.qk),this.Ht=t}},cM=class extends Pu{constructor(t){super("removetrack"),this.track=t}};r();var yo=function(t){return t.Jk="$k",t.tx="ix",t.sx="nx",t.ox="hx",t.ux="lx",t.gx="_x",t.aa="vx",t.wx="mx",t.Ax="yx",t.bx="Yn",t.Mx="Tx",t.Sx="Nx",t.QUALITY_UNAVAILABLE="qualityunavailable",t.NO_QUALITY="noquality",t}({}),Kn=class extends tu{get Ix(){return this.Dx}get ga(){return this.Za||(this.Za=this.ma()),this.Za}get V(){return this.Dx.length}Ex(t){return this.Dx[t]}tt(t){return!(!t||Qa(this.Dx,t))&&(this.Dx.push(t),this.Za&&this.Za.push(t.ga),t.yn(yo.aa,this.Ds),this.yo(new hM(t)),!0)}it(t){if(!t)return!1;const i=this.Dx.indexOf(t);return!(i<0)&&(Mn(this.Dx,i),this.Za&&Mn(this.Za,i),t.fn(yo.aa,this.Ds),this.yo(new uM(t)),!0)}kx(t){return Qa(this.Dx,t)}tr(){const t=this.Dx;for(let i=t.length-1;i>=0;i-=1)this.it(t[i])}gn(){this.tr(),this.Bo()}constructor(){super(),this.Dx=[],this.Za=void 0}};r();var su=class extends du{ma(){return new lM(this.Ht.ga)}constructor(t){super(yo.aa),this.Ht=t}},lM=class extends Pu{constructor(t){super("change"),this.track=t}},dM=class extends Kn{get xx(){return this.Lx}set xx(t){const i=this.Lx;if(t!==i){if(i){this.Cx(i);for(const e of i.Ix)t&&t.kx(e)||this.it(e)}if(this.Lx=t,t){const i=[];for(const e of t.Ix)this.tt(e),this.jx(e)&&i.push(e);this.Ox(t);for(const t of i)t.yo(new su(t))}}}Ox(t){t.yn(bs.Hk,this.Rx),t.yn(bs.qk,this.Px)}Cx(t){t.fn(bs.Hk,this.Rx),t.fn(bs.qk,this.Px)}gn(t){!t&&this.Lx&&this.Lx.gn(),super.gn()}constructor(){super(),this.Lx=void 0,this.Rx=t=>{const i=t.Ht;this.tt(i)},this.Px=t=>{const i=t.Ht;this.it(i)}}};r(),r(),r(),ds();var fM=_.freeze||vc;function gM(t,i,e){_.defineProperty(t,i,{writable:!1,enumerable:!0,value:e})}function _M(t){return fM(t)}function fe(t,i){for(const e of _.getOwnPropertyNames(i))_.defineProperty(t,e,_.getOwnPropertyDescriptor(i,e));return t}function P(t){if(Cd(t)){const i={};for(const e in t)no.call(t,e)&&(i[e]=P(t[e]));return i}if(Dn(t)){const i=new Array(t.length);for(let e=0;e<i.length;e++)e in t&&(i[e]=P(t[e]));return i}return t}function ns(t,i){return t===i||!(!t||!i)&&(!(!_o(t)||!_o(i))&&(Ia(t)?!!Ia(i)&&function(t,i){const e=t.length,s=i.length;if(e!==s)return!1;for(let s=0;s<e;s+=1)if(!ns(t[s],i[s]))return!1;return!0}(t,i):!Ia(i)&&function(t,i){const e=_.keys(t),s=_.keys(i);if(!e||!s||e.length!==s.length)return!1;for(const s of e)if(!no.call(i,s)||!ns(t[s],i[s]))return!1;return!0}(t,i)))}function vM(t,i){if(!_o(t))return!1;for(const e of i)if(!(e in t))return!1;return!0}function wM(t,i){return t.constructor===i.constructor}function mM(t){const i={};for(const e of _.keys(t)){const s=t[e];null!=s&&(i[e]=s)}return i}function Rc(t){const i={};for(const e of _.keys(t)){const s=t[e];if(Ia(s)){const t=[];for(let i=0;i<s.length;i+=1){const e=s[i];if(null!=e){const i=_o(e)?Rc(e):e;t.push(i)}}i[e]=t}else null!=s&&(i[e]=_o(s)?Rc(s):s)}return i}function pu(t){let i=t;if("string"==typeof i){if(i=i.toLowerCase(),"true"===i)return!0;if("false"===i)return!1}return Boolean(i)}function Ks(t){return $t(t)?pu(t):void 0}function pM(t){return"string"==typeof t?""===t?NaN:Number(t):"boolean"==typeof t||null==t||t instanceof Date||"number"!=typeof Number(t)&&!t?NaN:Number(t)}function AM(t){const i=pM(t);if(j(i))throw new b("Expected a valid number.");return i}function Q(t){return"string"==typeof t?t:""}function yM(t,i){if(!Ia(t))return[];const e=0|t.length,s=new Array(e);for(let n=0;n<e;n++)s[n]=i(t[n]);return s}function Mt(t,i){let e;return e=Ia(t)?yM(t,i):i(t),e}r();var bM=[bs.Hk,bs.qk,yo.aa];function MM(t){let i;const e=t.Ix.map((t=>t.ga));return e.item=i=>{const e=0|i,s=t.Ex(e);return s&&s.ga||void 0},e.addEventListener=(t,e)=>{i.yn(t,e)},e.removeEventListener=(t,e)=>{i.fn(t,e)},i=new Su(e),t.yn(bM,(t=>i.yo(t.ga))),e}r();var de=function(t){return t[t.zx=0]="zx",t[t.Bx=1]="Bx",t[t.Ux=2]="Ux",t[t.Qx=3]="Qx",t[t.Fx=4]="Fx",t[t.TRANSCRIBES_SPOKEN_DIALOG=5]="TRANSCRIBES_SPOKEN_DIALOG",t[t.DESCRIBES_MUSIC_AND_SOUND=6]="DESCRIBES_MUSIC_AND_SOUND",t[t.Yx=7]="Yx",t}({});function TM(t){switch(t){case 0:return"caption";case 2:return"sign";case 1:return"description";case 3:return"enhanced audio intelligibility";case 4:return"easy reader";case 5:return"transcribes spoken dialog";case 6:return"describes music and sound";case 7:return"describes video"}}function SM(){}function oo(t){const i=[yo.bx,yo.aa,yo.Mx,yo.Sx,yo.QUALITY_UNAVAILABLE];let e;const s={get activeQuality(){return t.Vx&&t.Vx.ga},get enabled(){return t.Rt},set enabled(i){t.Rt=pu(i)},get id(){return t.o},get uid(){return t.Gx},get kind(){return t.Lt},get label(){return t.kh},set label(i){t.kh=Q(i)},get accessibility(){var i,e;return null!=(e=null==(i=t.Wx)?void 0:i.map(TM))?e:[]},get language(){return t.gs},get qualities(){return t.Zx.ga},set targetQuality(i){let e;e=i?function(t,i){const e=[];for(const s of t.Zx.Ix)for(const t of i)s.ga===t&&e.push(s);return e}(t,Dn(i)?i:[i]):[],e.length>0?t.Hx=e:t.Hx=void 0},get targetQuality(){if(t.Hx)return 1===t.Hx.length?t.Hx[0].ga:t.Hx.map((t=>t.ga))},addEventListener(t,i){const s=Mt(t,Q);e.yn(s,i)},removeEventListener(t,i){const s=Mt(t,Q);e.fn(s,i)}};return e=new Su(s),t.yn(i,(t=>e.yo(t.ga))),_.defineProperty(s,"constructor",{value:SM}),s}function NM(){}function IM(t){const i=MM(t);return _.defineProperty(i,"constructor",{value:NM}),i}var tl=class extends dM{ma(){return IM(this)}jx(t){return t.Rt}};r(),r(),r();var lc=function(t){return t.Ch="disabled",t.Xx="hidden",t.Jn="showing",t}({});function wa(t){if("string"==typeof t){const i=t.toLowerCase();switch(i){case"disabled":case"hidden":case"showing":return i}}else if("number"==typeof t)switch(t){case 0:return"disabled";case 1:return"hidden";case 2:return"showing"}return"disabled"}r();var Me=function(t){return t.ua="error",t}({});function DM(){}function EM(t){const i=[yo.aa,yo.bx,yo.Jk,yo.tx,yo.ox,yo.ux,yo.sx,yo.gx,yo.wx,yo.Ax],e=[Me.ua];let s;const n={get kind(){return t.Lt},get label(){return t.kh},set label(i){t.kh=Q(i)},get language(){return t.gs},get id(){return t.o},get uid(){return t.Gx},get inBandMetadataTrackDispatchType(){return t.qx},get mode(){return t.UI},set mode(i){i!==lc.Jn&&i!==lc.Xx&&i!==lc.Ch||t.Kx(i)},get forced(){return Boolean(t.Jx)},get accessibility(){var i,e;return null!=(e=null==(i=t.Wx)?void 0:i.map(TM))?e:[]},get type(){return t.YA},get readyState(){return t.fk},get cues(){return t.UI===lc.Ch?null:t.L.ga},get activeCues(){return t.UI===lc.Ch?null:t.q.ga},get src(){return t.$x||""},addEventListener(t,i){const e=Mt(t,Q);s.yn(e,i)},removeEventListener(t,i){const e=Mt(t,Q);s.fn(e,i)}};return s=new Su(t),t.yn(i,(t=>s.yo(t.ga))),t.yn(e,(t=>s.yo(t))),_.defineProperty(n,"constructor",{value:DM}),n}function kM(){}function xM(t){const i=MM(t);return _.defineProperty(i,"constructor",{value:kM}),i}var Ce=class extends dM{ma(){return xM(this)}jx(t){return t.UI===lc.Jn}};r(),r();var LM=class extends tu{get tL(){}get iL(){return!1}get eL(){}get ga(){var t;return null!=(t=this.Za)?t:this.Za=CM(this)}sL(){}};function CM(t){return{goLive:()=>t.sL(),get isLive(){return t.iL},get latencies(){return t.tL},get manifest(){return t.eL},addEventListener(i,e){t.yn(OM(i),e)},removeEventListener(i,e){t.fn(OM(i),e)}}}var jM=["golive","latencyrecoveryseek"];function OM(t){const i=Mt(t,Q);return(Ic(i)?[i]:i).filter((t=>Qa(jM,t)))}var ct=class extends tu{set xx(t){const i=this.Lx;t!==i&&(i&&this.Cx(i),t&&this.Ox(t),this.Lx=t)}get xx(){return this.Lx}get ga(){return this.Za||(this.Za=CM(this)),this.Za}Ox(t){t.yn(jM,this.Ds)}Cx(t){t.fn(jM,this.Ds)}sL(){var t;null==(t=this.Lx)||t.sL()}get tL(){var t;return null==(t=this.Lx)?void 0:t.tL}get iL(){return!!this.Lx&&this.Lx.iL}get eL(){var t;return null==(t=this.Lx)?void 0:t.eL}gn(){this.Bo(),this.Lx&&this.Cx(this.Lx),this.Lx=void 0}constructor(){super(),this.Lx=void 0,this.Za=void 0,this.Lx=void 0}};r(),Qi(),r();var RM="8E80B9CE",PM=function(t){return t.AUTO="auto",t.MANUAL="manual",t.DISABLED="disabled",t}({});function zM(t){return{appID:t&&t.appID?Q(t.appID):RM}}r(),r();var BM=function(t){return t.EI="",t.nL="anonymous",t.rL="use-credentials",t}({}),Oe=function(t){return t.oL="application/dash+xml",t.hL="application/vnd.apple.mpegurl",t.aL="application/x-mpegurl",t.uL="video/mp4",t.cL="application/vnd.theoplayer.hesp+json",t.lL="application/vnd.theo.hesp+json",t.dL="millicast",t.fL="theolive",t}({});function UM(t){if(null!==t)return t}function QM(t){const i={apiKey:t.apiKey,integration:t.integration,streamActivityMonitorID:UM(t.streamActivityMonitorID),adTagParameters:_o(t.adTagParameters)?t.adTagParameters:{},authToken:UM(t.authToken),omidAccessModeRules:UM(t.omidAccessModeRules)};if("vod"===(null==t?void 0:t.availabilityType)||function(t){const i=t;return Boolean(i.videoID&&i.contentSourceID)}(t)){const e=t.videoID,s=t.contentSourceID;return e?s?Ei({},i,{availabilityType:"vod",videoID:e,contentSourceID:s}):void Fe.uA("A VOD DAI configuration was provided without valid contentSourceID which is required."):void Fe.uA("A VOD DAI configuration was provided without valid videoID which is required.")}if("live"===(null==t?void 0:t.availabilityType)||function(t){const i=t;return Boolean(i.assetKey)}(t)){const e=t.assetKey;return e?Ei({},i,{availabilityType:"live",assetKey:e}):void Fe.uA("A Live DAI configuration was provided without valid assetKey which is required.")}Fe.uA("A DAI configuration was provided without a valid availabilityType which is required.")}function FM(t){switch(t.integration){case"google-dai":return QM(t);case"imagine":return function(t){return{integration:t.integration}}(t);default:return Ei({},t,{integration:String(t.integration)})}}r(),r(),r(),r(),r(),Qi(),r(),r();var Ha,Ac="titanium",YM="conax",VM="ezdrm",Bc="irdeto",GM="vudrm",WM="verimatrix",Zc="keyos",$c="drmtoday",ZM="expressplay",HM="azure",XM="xstream",qM="vimond",KM="axinom",JM="uplynk",$M="comcast",tT="custom";function iT(t,i){if(null==t)return{};var e,s,n={},r=_.keys(t);for(s=0;s<r.length;s++)e=r[s],i.indexOf(e)>=0||(n[e]=t[e]);return n}function eT(t){return $t(t.token&&t.deviceId)}function sT(t){var i;const e=null==(i=t.fairplay)?void 0:i.headers;return void 0!==e&&$t(e.PreAuthorization)}function nT(t){const i=t;return eT(i)&&""!==i.token&&""!==i.deviceId&&!sT(i)}r(),r(),r(),r(),r(),function(t){t.gL=!1,t._L=!1,t.vL=!1,t.wL=!1,t.LOG_ADS_DETAILS=!1,t.LOG_CHROMECAST_DETAILS=!1,t.LOG_CUSTOM_DRM=!1,t.LOG_BUFFERING_VIDEO_MAIN=!1,t.LOG_BUFFERING_VIDEO_SELECTION=!1,t.LOG_BUFFERING_AUDIO_MAIN=!1,t.LOG_BUFFERING_AUDIO_SELECTION=!1,t.mL=!1,t.pL=!1,t.LOG_LCEVC_DETAILS=!1}(Ha||(Ha={})),Qi(),r();var lu=class extends qi{get name(){return"ContentProtectionError"}constructor(t,i,e,s,n,r,o,h){super(t,i,e),this.url=s,this.status=n,this.statusText=r,this.response=o,this.systemCode=h}};r();var rT=class{get AL(){return this.yL}get NS(){return this.yS}bL(t){return function(t){const i=t.onCertificateRequest;if(void 0!==i&&"function"!=typeof i)throw new k("ContentProtectionIntegration.onCertificateRequest is not a function.");const e=t.onCertificateResponse;if(void 0!==e&&"function"!=typeof e)throw new k("ContentProtectionIntegration.onCertificateResponse is not a function.");const s=t.onLicenseRequest;if(void 0!==s&&"function"!=typeof s)throw new k("ContentProtectionIntegration.onLicenseRequest is not a function.");const n=t.onLicenseResponse;if(void 0!==n&&"function"!=typeof n)throw new k("ContentProtectionIntegration.onLicenseResponse is not a function.");const r=t.extractFairplayContentId;if(void 0!==r&&"function"!=typeof r)throw new k("ContentProtectionIntegration.extractFairplayContentId is not a function.");return t}(this.ML.build(t))}constructor(t,i,e){this.yL=t,this.yS=i,this.ML=e}};r();var oT=function(t){return t.FAILED="FAILED",t.OVERRIDDEN="OVERRIDDEN",t.SUCCEEDED="SUCCEEDED",t}({}),rt=class{registerContentProtectionIntegration(t,i,e){switch(this.TL(t,i,e)){case oT.FAILED:throw new lu(vt.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The keySystem should be 'widevine', 'playready' or 'fairplay', but was "+i+".");case oT.OVERRIDDEN:{const e=ET(i);Fe.uA("Warning: Overwriting an earlier registered integration for "+t+" and "+e+".");break}case oT.SUCCEEDED:ET(i);0;break}}TL(t,i,e){const s=ET(i);if(!s)return oT.FAILED;let n=oT.SUCCEEDED;for(const i of this.SL.slice())i.AL===t&&i.NS===s&&(n=oT.OVERRIDDEN,ra(this.SL,i));return this.SL.push(new rT(t,s,e)),n}NL(t,i){return void 0!==this.IL(t,i)}DL(t,i,e){const s=this.IL(t,i);if(!s)throw b("No ContentProtectionIntegrationInit was found for integration id "+t+" and key system "+i);return s.bL(e)}IL(t,i){for(const e of this.SL)if(e.AL===t&&(!i||e.NS===i))return e}constructor(){this.SL=[]}};rt.EL=new rt,r(),r();var Rt=function(t){return t.kL="moov",t.xL="mvhd",t.LL="trak",t.CL="tkhd",t.jL="mdia",t.OL="mdhd",t.RL="hdlr",t.PL="minf",t.zL="stbl",t.BL="stsd",t.UL="stsc",t.QL="mvex",t.FL="trex",t.YL="avc1",t.VL="avcC",t.GL="hev1",t.WL="hvc1",t.ZL="hvcC",t.HL="vp09",t.XL="vpcC",t.qL="av01",t.KL="av1C",t.JL="dvcC",t.$L="dvvC",t.tC="dvwC",t.iC="dec3",t.eC="dvav",t.sC="dva1",t.nC="dvhe",t.rC="dvh1",t.oC="ec-3",t.hC="colr",t.aC="pasp",t.uC="mp4a",t.cC="esds",t.lC="fLaC",t.dC="dfLa",t.fC="wvtt",t.gC="vttC",t._C="vlab",t.vC="enca",t.wC="encv",t.mC="moof",t.pC="mfhd",t.AC="traf",t.yC="tfhd",t.bC="trun",t.MC="tfdt",t.TC="senc",t.SC="mdat",t.NC="pssh",t.IC="emsg",t.DC="sidx",t.EC="styp",t.kC="ftyp",t.xC="sinf",t.LC="frma",t}({}),hT=function(t){return t.ON_SCREEN_COLOURS="nclx",t.RESTRICTED_ICC_PROFILE="rICC",t.UNRESTRICED_ICC_PROFILE="prof",t}({}),aT=function(t){return t[t.BASE_DATA_OFFSET_PRESENT=1]="BASE_DATA_OFFSET_PRESENT",t[t.SAMPLE_DESCRIPTION_INDEX_PRESENT=2]="SAMPLE_DESCRIPTION_INDEX_PRESENT",t[t.DEFAULT_SAMPLE_DURATION_PRESENT=8]="DEFAULT_SAMPLE_DURATION_PRESENT",t[t.DEFAULT_SAMPLE_SIZE_PRESENT=16]="DEFAULT_SAMPLE_SIZE_PRESENT",t[t.DEFAULT_SAMPLE_FLAGS_PRESENT=32]="DEFAULT_SAMPLE_FLAGS_PRESENT",t[t.DURATION_IS_EMPTY=65536]="DURATION_IS_EMPTY",t[t.DEFAULT_BASE_IS_MOOF=131072]="DEFAULT_BASE_IS_MOOF",t}({}),Jc=function(t){return t[t.DATA_OFFSET_PRESENT=1]="DATA_OFFSET_PRESENT",t[t.FIRST_SAMPLE_FLAGS_PRESENT=4]="FIRST_SAMPLE_FLAGS_PRESENT",t[t.SAMPLE_DURATION_PRESENT=256]="SAMPLE_DURATION_PRESENT",t[t.SAMPLE_SIZE_PRESENT=512]="SAMPLE_SIZE_PRESENT",t[t.SAMPLE_FLAGS_PRESENT=1024]="SAMPLE_FLAGS_PRESENT",t[t.SAMPLE_COMPOSITION_TIME_OFFSET_PRESENT=2048]="SAMPLE_COMPOSITION_TIME_OFFSET_PRESENT",t}({});r();var Bt=class t{jC(){return on(this.rI,this.OC)}RC(){return Ps(this.rI,this.OC)}zC(){return function(t,i,e){void 0===e&&(e=!1);const s=t.getInt16(i.tc,e);return i.Gb(2),s}(this.rI,this.OC)}BC(){return ul(this.rI,this.OC)}QC(){return function(t,i,e){void 0===e&&(e=!1);const s=t.getInt32(i.tc,e);return i.Gb(4),s}(this.rI,this.OC)}FC(){return Xw(this.rI,this.OC)}YC(t){return ss(this.rI,this.OC,t)}VC(t){return function(t,i,e){const s=[];for(let n=0;n<e;n++)s.push(ul(t,i));return s}(this.rI,this.OC,t)}GC(t){return ai(this.rI,this.OC,t)}WC(){return Zo(this.rI,this.OC)}ZC(t){this.OC.Gb(t)}Zb(){return new t(this.rI,this.OC.Zb())}constructor(t,i){this.rI=t,this.OC=i}};r(),r();function uT(t,i){return t.YA===i}function cT(t,i){for(const e of t)if(uT(e,i))return e}var lT=class extends Co{get name(){return"DataIncompleteError"}constructor(t,i){super(),this.HC=t,this.XC=i}},Z=class t{static qC(i){const e=i.rI,s=i.OC,n=t.KC(e,s,!1);if(!n.JC)throw new lT(s.tc,n.m);return n.m}static KC(i,e,s){const n=[];for(;e.tc<i.byteLength;){const r=t.$C(i,e,s);if(!r.JC)return{JC:!1,m:n};n.push(r.tj)}return{JC:!0,m:n}}static ij(i,e){const s=t.$C(i,e,!1);if(!s.JC)throw new lT(e.tc);return s.tj}static ej(i,e){const s=i.rI,n=i.OC;for(;n.tc<s.byteLength;){const i=t.$C(s,n,!1);if(!i.JC)return;if(i.tj.YA===e)return i.tj}}static $C(i,e,s){const n=e.tc,r=t.sj(i,e);if(!r.JC)return r;const o=r.nj;let h=o.Kb;if(0===h){if(s)return e.Wb(n),{JC:!1,rj:1/0};h=i.byteLength-n}const a=n+h;if(a>i.byteLength){const t=a;return e.Wb(n),{JC:!1,rj:t}}const u={YA:o.YA,tc:n,rI:new Bt(dm(i,n,a),new da(o.hj))};return e.Wb(a),{JC:!0,tj:u}}static sj(t,i){const e=i.tc;if(!Gw(t,i,8)){return{JC:!1,rj:i.tc+8}}let s=ul(t,i),n=ai(t,i,4);if(1===s){if(!Gw(t,i,8)){const t=i.tc+8;return i.Wb(e),{JC:!1,rj:t}}s=Xw(t,i).toNumber()}if("uuid"===n){if(!Gw(t,i,16)){const t=i.tc+16;return i.Wb(e),{JC:!1,rj:t}}n=ai(t,i,16)}return{JC:!0,nj:{YA:n,Kb:s,hj:i.tc-e}}}static aj(t,i,e){const s=t.rI,n=t.OC;let r=zr(ka(s),n.tc,s.byteLength);return e&&(r=Wa(r)),n.Gb(r.byteLength),{YA:i,rI:r}}static uj(i,e,s){const n=i.BC(),{version:r,flags:o}=G(n);return{YA:e,cj:r,lj:o,rI:t.aj(i,e,s).rI}}};function dT(t,i){const e=go(t,i);if(!e)throw new b("Missing "+i+" atom");return e}function go(t,i){for(const e of t)if(e.YA===i)return e.rI}function fT(t,i){const e=[];for(const s of t)s.YA===i&&e.push(s.rI);return e}function G(t){return{version:t>>24,flags:new Qw(16777215&t)}}var Rs=class t{static dj(i){const e=[],s=Z.qC(new Bt(i,new da));for(const i of s){const s=t.gj(i);s&&e.push(s)}return e}static _j(t){return Z.KC(t,new da,!1).m.some(this.vj)}static wj(i){return fT(Z.qC(new Bt(i,new da)),Rt.NC).map(t.mj)}static pj(i){return fT(Z.qC(i.rI),Rt.NC).map(t.mj)}static vj(t){return t.YA===Rt.kC||t.YA===Rt.EC||t.YA===Rt.kL||t.YA===Rt.mC||t.YA===Rt.SC||t.YA===Rt.DC||t.YA===Rt.IC}static gj(i){switch(i.YA){case Rt.kL:return t.Aj(i.rI);case Rt.mC:return t.yj(i.rI,i.tc);case Rt.SC:return t.bj(i.rI);case Rt.DC:return t.Mj(i.rI);case Rt.IC:return t.Tj(i.rI)}}static Aj(i){const e=Z.qC(i),s=dT(e,Rt.xL),n=fT(e,Rt.LL),r=go(e,Rt.QL),o=t.Sj(s),h=n.map(t.Nj),a=r?t.Ij(r):void 0;return{YA:Rt.kL,nj:o,Z:h,Dj:a}}static Sj(t){const i=t.BC(),{version:e,flags:s}=G(i),n=1===e?t.FC():t.BC(),r=1===e?t.FC():t.BC(),o=t.BC(),h=1===e?t.FC():t.BC(),a=t.BC(),u=t.RC()>>8;t.ZC(2),t.ZC(8);const c=t.VC(9);t.ZC(24);const l=t.BC();return{YA:Rt.xL,cj:e,lj:s,Ej:n,xj:r,Lj:o,ct:h,Cj:a,Nk:u,jj:c,Oj:l}}static Nj(i){const e=Z.qC(i),s=dT(e,Rt.CL),n=dT(e,Rt.jL),r=t.Rj(s),o=t.Pj(n);return{YA:Rt.LL,nj:r,zj:o}}static Rj(t){const i=t.BC(),{version:e,flags:s}=G(i),n=1===e?t.FC():t.BC(),r=1===e?t.FC():t.BC(),o=t.BC();t.ZC(4);const h=1===e?t.FC():t.BC();t.ZC(8);const a=t.zC(),u=t.zC(),c=t.zC()/256;t.ZC(2);const l=t.VC(9),d=t.BC()/65536,f=t.BC()/65536;return{YA:Rt.CL,Bj:s.Hb(1),Uj:s.Hb(2),Qj:s.Hb(4),Ej:n,xj:r,Fj:o,ct:h,Om:a,Yj:u,Nk:c,jj:l,ji:d,Ti:f}}static Pj(i){const e=Z.qC(i),s=dT(e,Rt.OL),n=dT(e,Rt.RL),r=dT(e,Rt.PL),o=t.Vj(s),h=t.Gj(n),a=t.Wj(r);return{YA:Rt.jL,nj:o,Zj:h,Hj:a}}static Vj(t){const i=t.BC(),{version:e,flags:s}=G(i),n=1===e?t.FC():t.BC(),r=1===e?t.FC():t.BC(),o=t.BC(),h=1===e?t.FC():t.BC();t.RC();return t.ZC(2),{YA:Rt.OL,cj:e,lj:s,Ej:n,xj:r,Lj:o,ct:h}}static Gj(t){const i=t.BC(),{version:e,flags:s}=G(i);t.ZC(4);const n=t.GC(4);t.ZC(12);const r=t.WC();return{YA:Rt.RL,cj:e,lj:s,Xj:n,l:r}}static Wj(i){const e=dT(Z.qC(i),Rt.zL),s=t.qj(e);return{YA:Rt.PL,Kj:s}}static qj(i){const e=dT(Z.qC(i),Rt.BL),s=t.Jj(e);return{YA:Rt.zL,$j:s}}static Jj(i){const e=i.BC(),{version:s,flags:n}=G(e),r=(i.BC(),[]),o=Z.qC(i);for(const i of o){const e=t.tO(i.rI,i.YA);e&&r.push(e)}return{YA:Rt.BL,cj:s,lj:n,iO:r}}static tO(i,e){let s=t.eO(i,e);return s||(s=t.sO(i,e),s||(e===Rt.fC?t.nO(i):void 0))}static eO(i,e){return e===Rt.uC?t.rO(i):e===Rt.lC||e===Rt.lC.toLowerCase()||e===Rt.lC.toUpperCase()?t.oO(i):e===Rt.vC?t.hO(i):e===Rt.oC?t.aO(i):void 0}static sO(i,e){return e===Rt.YL?t.uO(i):e===Rt.GL||e===Rt.WL?t.cO(i,e):e===Rt.HL?t.lO(i,e):e===Rt.qL?t.dO(i,e):e===Rt.wC?t.fO(i):e===Rt.eC||e===Rt.sC||e===Rt.nC||e===Rt.rC?t.gO(i,e):void 0}static _O(t,i){t.ZC(6);return{YA:i,vO:t.RC()}}static wO(i,e){const s=t._O(i,e);i.ZC(8);const n=i.RC(),r=i.RC();i.ZC(2),i.ZC(2);return Ei({},s,{mO:n,pO:r,AO:i.BC()>>>16})}static yO(i,e){const s=t._O(i,e);i.ZC(2),i.ZC(2),i.ZC(12);const n=i.RC(),r=i.RC(),o=i.BC(),h=i.BC();i.ZC(4);const a=i.RC();i.ZC(32);const u=i.RC();return i.ZC(2),Ei({},s,{ji:n,Ti:r,bO:o,MO:h,TO:a,SO:u})}static rO(i){const e=t.wO(i,Rt.uC),s=dT(Z.qC(i),Rt.cC);return Ei({},e,{IO:t.DO(s)})}static oO(i){const e=t.wO(i,Rt.lC),s=dT(Z.qC(i),Rt.dC);return Ei({},e,{EO:t.kO(s)})}static nO(i){const e=t._O(i,Rt.fC),s=Z.qC(i),n=dT(s,Rt.gC),r=t.xO(n),o=go(s,Rt._C);return Ei({},e,{LO:r,CO:o?t.jO(o):void 0})}static xO(t){return{YA:Rt.gC,md:t.WC()}}static jO(t){return{YA:Rt._C,kh:t.WC()}}static DO(t){return Z.uj(t,Rt.cC,!0)}static kO(t){return Z.uj(t,Rt.dC,!0)}static uO(i){const e=t.yO(i,Rt.YL),s=Z.qC(i),n=dT(s,Rt.VL),r=go(s,Rt.aC);return Ei({},e,{OO:t.RO(n),PO:r?t.zO(r):void 0})}static cO(i,e){const s=t.yO(i,e),n=dT(Z.qC(i),Rt.ZL);return Ei({},s,{BO:t.UO(n)})}static lO(i,e){const s=t.yO(i,e),n=dT(Z.qC(i),Rt.XL);return Ei({},s,{QO:t.FO(n)})}static dO(i,e){const s=t.yO(i,e),n=Z.qC(i),r=dT(n,Rt.KL),o=t.YO(r),h=go(n,Rt.hC);return Ei({},s,{VO:o,GO:h?t.WO(h):void 0})}static fO(i){const e=i.Zb(),s=t.yO(i,Rt.wC),n=dT(Z.qC(i),Rt.xC),r=t.ZO(n);return Ei({},s,{HO:t.sO(e,r.qO.XO),KO:r})}static gO(i,e){const s=t.yO(i,e),n=Z.qC(i);return Ei({},s,{JO:t.$O(n)})}static aO(i){const e=t.wO(i,Rt.oC),s=dT(Z.qC(i),Rt.iC);return Ei({},e,{tR:t.iR(s)})}static hO(i){const e=i.Zb(),s=t.wO(i,Rt.vC),n=dT(Z.qC(i),Rt.xC),r=t.ZO(n);return Ei({},s,{HO:t.eO(e,r.qO.XO),KO:r})}static ZO(i){const e=dT(Z.qC(i),Rt.LC),s=t.eR(e);return{YA:Rt.xC,qO:s}}static eR(t){const i=t.GC(4);return{YA:Rt.LC,XO:i}}static RO(t){return Z.aj(t,Rt.VL,!0)}static UO(t){return Z.aj(t,Rt.ZL,!0)}static $O(t){const i=go(t,Rt.JL);if(void 0!==i)return Z.aj(i,Rt.JL,!0);const e=go(t,Rt.$L);if(void 0!==e)return Z.aj(e,Rt.$L,!0);const s=go(t,Rt.tC);if(void 0!==s)return Z.aj(s,Rt.tC,!0);throw b("Error parsing Dolby Vision configuration box.")}static iR(t){return Z.aj(t,Rt.iC,!0)}static FO(t){return Z.aj(t,Rt.XL,!0)}static YO(t){return Z.aj(t,Rt.KL,!0)}static WO(t){const i=t.GC(4);switch(i){case"nclx":return{sR:hT.ON_SCREEN_COLOURS,nR:t.RC(),rR:t.RC(),oR:t.RC(),hR:0!=(128&t.jC())};case"rICC":return{sR:hT.RESTRICTED_ICC_PROFILE};case"prof":return{sR:hT.UNRESTRICED_ICC_PROFILE};default:throw b("Could not parse ColourInformationBox: unknown type '"+i+"'.")}}static zO(t){const i=t.BC(),e=t.BC();return{YA:Rt.aC,aR:i,uR:e}}static Ij(i){const e=fT(Z.qC(i),Rt.FL).map(t.cR);return{YA:Rt.QL,Z:e}}static cR(t){const i=t.BC(),{version:e,flags:s}=G(i),n=t.BC(),r=t.BC(),o=t.BC(),h=t.BC(),a=t.BC();return{YA:Rt.FL,cj:e,lj:s,Fj:n,lR:r,dR:o,fR:h,gR:a}}static yj(i,e){const s=Z.qC(i),n=dT(s,Rt.pC),r=fT(s,Rt.AC),o=t._R(n),h=r.map(t.vR);return{YA:Rt.mC,wR:e,nj:o,Z:h}}static _R(t){const i=t.BC(),{version:e,flags:s}=G(i),n=t.BC();return{YA:Rt.pC,cj:e,lj:s,mR:n}}static vR(i){const e=Z.qC(i),s=dT(e,Rt.yC),n=fT(e,Rt.bC),r=go(e,Rt.MC),o=t.pR(s),h=n.map((i=>t.AR(i,o))),a=r?t.yR(r):void 0;return{YA:Rt.AC,nj:o,bR:h,MR:a}}static pR(t){const i=t.BC(),{version:e,flags:s}=G(i),n=t.BC(),r=s.Hb(aT.BASE_DATA_OFFSET_PRESENT)?t.FC():void 0,o=s.Hb(aT.SAMPLE_DESCRIPTION_INDEX_PRESENT)?t.BC():void 0,h=s.Hb(aT.DEFAULT_SAMPLE_DURATION_PRESENT)?t.BC():void 0,a=s.Hb(aT.DEFAULT_SAMPLE_SIZE_PRESENT)?t.BC():void 0,u=s.Hb(aT.DEFAULT_SAMPLE_FLAGS_PRESENT)?t.BC():void 0;return{YA:Rt.yC,cj:e,lj:s,Fj:n,SR:r,NR:o,dR:h,fR:a,gR:u}}static AR(i,e){const s=i.BC(),{version:n,flags:r}=G(s),o=i.BC(),h=r.Hb(Jc.DATA_OFFSET_PRESENT)?i.QC():void 0,a=r.Hb(Jc.FIRST_SAMPLE_FLAGS_PRESENT)?i.BC():void 0,u=[];for(let s=0;s<o;s++){const o=t.IR(i,r,n,e);0===s&&void 0!==a&&(o.lj=a),u.push(o)}return{YA:Rt.bC,cj:n,lj:r,DR:o,wR:h,ER:a,kR:u}}static IR(t,i,e,s){return{ct:i.Hb(Jc.SAMPLE_DURATION_PRESENT)?t.BC():s.dR,Kb:i.Hb(Jc.SAMPLE_SIZE_PRESENT)?t.BC():s.fR,lj:i.Hb(Jc.SAMPLE_FLAGS_PRESENT)?t.BC():s.gR,xR:i.Hb(Jc.SAMPLE_COMPOSITION_TIME_OFFSET_PRESENT)?0===e?t.BC():t.QC():void 0}}static Tj(t){const i=t.rI,e=t.OC,s=ul(i,e),{version:n,flags:r}=G(s);if(1===n){const t=ul(i,e),s=Xw(i,e),o=ul(i,e),h=ul(i,e),a=Kw(i,e),u=Kw(i,e),c=vi(ka(i),e.tc,i.byteLength);return e.Gb(c.byteLength),{YA:Rt.IC,cj:n,lj:r,LR:a,zD:u,Lj:t,jR:s,OR:o,o:h,RR:c}}{const t=Kw(i,e),s=Kw(i,e),o=ul(i,e),h=ul(i,e),a=ul(i,e),u=ul(i,e),c=vi(ka(i),e.tc,i.byteLength);return e.Gb(c.byteLength),{YA:Rt.IC,lj:r,cj:n,LR:t,zD:s,Lj:o,PR:h,OR:a,o:u,RR:c}}}static bj(t){return Z.aj(t,Rt.SC,!1)}static mj(i){const e=i.rI,s=i.OC,n=Wa(ka(e)).buffer,r=ul(e,s),{version:o,flags:h}=G(r),a=t.zR(e,s),u=[];if(o>0){const t=ul(e,s);for(let i=0;i<t;i++){const t=ss(e,s,16);u.push(t)}}const c=ul(e,s),l=new T(n,s.tc,c);return s.Gb(e.byteLength),{YA:Rt.NC,cj:o,lj:h,UR:a,QR:u,FR:c,rI:l,YR:n}}static zR(t,i){let e="";for(let s=0;s<4;s++){const s=on(t,i).toString(16);e+=1===s.length?"0"+s:s}e+="-";for(let s=0;s<2;s++){const s=on(t,i).toString(16);e+=1===s.length?"0"+s:s}e+="-";for(let s=0;s<2;s++){const s=on(t,i).toString(16);e+=1===s.length?"0"+s:s}e+="-";for(let s=0;s<2;s++){const s=on(t,i).toString(16);e+=1===s.length?"0"+s:s}e+="-";for(let s=0;s<6;s++){const s=on(t,i).toString(16);e+=1===s.length?"0"+s:s}return e.toLowerCase()}static Mj(t){const i=t.rI,e=t.OC,s=ul(i,e),{version:n,flags:r}=G(s),o=ul(i,e),h=ul(i,e);let a,u;0===n?(a=D.fromBits(ul(i,e),0,!0),u=D.fromBits(ul(i,e),0,!0)):(a=Xw(i,e),u=Xw(i,e)),e.Gb(2);const c=Ps(i,e),l=[];for(let t=0;t<c;t+=1){const t=ul(i,e),s=t>>31&1,n=2147483647&t,r=ul(i,e),o=ul(i,e),h=o>>31&1,a=o>>28&7,u=268435455&o;l.push({GR:s,WR:n,ct:r,ZR:h,HR:a,XR:u})}return{YA:Rt.DC,cj:n,lj:r,qR:o,Lj:h,KR:a,JR:u,$R:c,tP:l}}static yR(t){const i=t.rI,e=t.OC,s=ul(i,e),{version:n,flags:r}=G(s);let o;return o=0===n?D.fromBits(ul(i,e),0,!0):Xw(i,e),{YA:Rt.MC,cj:n,lj:r,MR:o}}};Qi();var gT={playready:"https://pr-keyos.licensekeyserver.com/core/rightsmanager.asmx",widevine:"https://wv-keyos.licensekeyserver.com/",fairplay:"https://fp-keyos.licensekeyserver.com/getkey"};function _T(t){if(!t)return!0;const i=t.licenseAcquisitionURL,e=t.certificateURL,s=t.keys,n=t.headers,r=t.useCredentials,o=t.queryParameters;return!(i||e||s||n||r||o)}function vT(t){return t&&void 0!==t.licenseAcquisitionURL}var wT=vT,mT=vT;function pT(t){if(!t)return!0;if(MT(t))return!1;const i=t.fairplay,e=t.playready,s=t.widevine,n=t.clearkey,r=t.aes128;return _T(i)&&_T(e)&&_T(s)&&void 0===n&&_T(r)}function AT(t){const i=nT(t),e=function(t){var i;const e=t;return sT(e)&&""!==(null==(i=e.fairplay)?void 0:i.headers.PreAuthorization)&&!eT(e)}(t);return(!i||!e)&&(i||e)}function yT(t){return t.integration===Bc}function bT(t){const i=t;if(!i)return!1;if(pT(i))return!1;const e=i.fairplay,s=i.playready,n=i.widevine,r=i.clearkey;if(MT(t))return!0;if(e&&!function(t){const i=t;return i&&(void 0!==i.certificateURL||void 0!==i.certificate)}(e))return!1;if(s&&!wT(s))return!1;if(n&&!mT(n))return!1;if(r&&!function(t){return void 0!==t}(r))return!1;if(i.integration){if(rt.EL.NL(i.integration))return!0;switch(i.integration){case Ac:if(!function(t){const i=t,e=i.integration===Ac;return e&&(TT(t)||ST(t))}(t))return!1;break;case GM:if(!NT(t))return!1;break;case WM:if(!function(t){const i=t;return i.integration===WM}(t))return!1;break;case Bc:if(!yT(t))return!1;break;case YM:if(!AT(t))return!1;break;case VM:if(!function(t){const i=t;return i.integration===VM}(t))return!1;break;case Zc:if(!MT(t))return!1;break;case $c:if(!function(t){const i=t;return i.integration===$c&&(void 0!==i.token||function(t){return void 0!==t.merchant&&void 0!==t.sessionId&&void 0!==t.userId}(i))}(t))return!1;break;case ZM:if(!function(t){const i=t;return i.integration===ZM}(t))return!1;break;case XM:if(!IT(t))return!1;break;case qM:if(!function(t){return t.integration===qM}(t))return!1;break;case KM:if(!zc(t))return!1;break;case HM:if(!function(t){const i=t;return i.integration===HM&&void 0!==i.token}(t))return!1;break;case JM:if(!function(t){const i=t;return i.integration===JM}(t))return!1;break;case $M:if(!function(t){const i=t;return i&&$t(i.releasePid)&&$t(i.accountId)&&$t(i.token)}(t))return!1;break;case tT:return!0;default:return!1}}return!0}function MT(t){return t.integration===Zc}function TT(t){return void 0!==t.authToken}function ST(t){const i=t;return void 0!==i.accountName&&void 0!==i.customerName&&void 0!==i.portalId}function NT(t){const i=t;return i.integration===GM&&void 0!==i.token}function IT(t){const i=t;return i&&i.integration===XM&&Ic(i.ticketAcquisitionURL)&&Ic(i.streamId)}function zc(t){const i=t;return i.integration===KM&&void 0!==i.token}function DT(t,i){const e=i[t];var s;const n=null!=(s=null==e?void 0:e.licenseAcquisitionURL)?s:gT[t];var r;const o=null!=(r=null==e?void 0:e.customdata)?r:i.customdata,h=o?{customData:o}:{};var a;const u=Ei({},null!=(a=null==e?void 0:e.headers)?a:{},h),c=null!=e?e:{},{customdata:l}=c;return Ei({},iT(c,["customdata"]),{licenseAcquisitionURL:n,headers:u})}function ET(t){switch(t.toLowerCase()){case"widevine":case vu:return vu;case"playready":case Wn:return Wn;case"fairplay":case Ws:return Ws}}function kT(t,i){switch(t){case bo:return function(t){const i={},e=Rs.wj(new DataView(t));for(const t of e)i[t.UR]=t.YR;return i}(i);case _v:case vv:return function(t){return{[bv]:t}}(i);default:throw new qi(vt.CONTENT_PROTECTION_INITIALIZATION_INVALID,"Unsupported initDataType "+t)}}async function mu(t,i){return void 0===i&&(i=!1),!(!t.widevine||!await Fe.pA())||(!(!t.playready||!await Fe.mA())||(!(!t.clearkey||!await Fe.vA())||!(i||!t.fairplay||!await Fe.wA())))}function xT(t,i,e){const s=function(t,i,e){var s;const{useCredentials:n,crossOrigin:r}=function(t,i){let e=BM.EI;return t.useCredentials?e=BM.rL:t.crossOrigin&&(e=nS(t.crossOrigin)),e===BM.EI&&i&&i.vr&&i.vr[360]&&(e=BM.nL),{useCredentials:e===BM.rL,crossOrigin:e}}(t,i);let o=t.liveOffset;$t(o)||(o=e&&$t(e.liveOffset)?e.liveOffset:void 0);let h=t.timeServer;$t(h)||(h=i&&$t(i.timeServer)?i.timeServer:void 0);let a=t.hlsDateRange;$t(a)||(a=e&&$t(e.hlsDateRange)?Boolean(e.hlsDateRange):void 0);const u=Boolean(t.experimentalRendering),c=Boolean(t.nativeUiRendering),l=Boolean(t.lowLatency),d=Boolean(t.useNativePlayback),f=Boolean(t.useManagedMediaSource),g=$t(t.dash)?CT(t.dash):void 0,_=$t(t.hls)?jT(t.hls):void 0,v=PT(RT(t.abr),null==e?void 0:e.abr),w=Ks(t.lcevc),m=$t(t.ignoreEmbeddedTextTrackTypes)?pS(t.ignoreEmbeddedTextTrackTypes):[];var p;const A=JT(null!=(p=t.seamlessSwitchStrategy)?p:null==(s=t.dash)?void 0:s.useSeamlessPeriodSwitch),y=XT(t.latencyConfiguration);return{crossOrigin:r,useCredentials:n,liveOffset:o,timeServer:h,hlsDateRange:a,experimentalRendering:u,nativeUiRendering:c,lowLatency:l,useNativePlayback:d,useManagedMediaSource:f,dash:g,hls:_,abr:v,lcevc:w,ignoreEmbeddedTextTrackTypes:m,seamlessSwitchStrategy:A,latencyConfiguration:y}}(t,i,e),n=UM(t.src);let r=t.type;r||(r=t.src?Mu(t.src):void 0);const o=function(t,i){let e;e=$t(t.contentProtection)?t.contentProtection:$t(t.drm)?t.drm:$t(i)&&$t(i.contentProtection)?i.contentProtection:$t(i)&&$t(i.drm)?i.drm:void 0;return LT(e)}(t,i);return Ei({},s,{src:n,type:r,contentProtection:o,ssai:$t(t.ssai)?FM(t.ssai):void 0,integrationData:void 0,isAdvertisement:Boolean(t.isAdvertisement)})}function LT(t){return bT(t)&&t.integration&&t.integration===Zc?function(t){const i=DT(Nv.BA,t),e=DT(Nv.zA,t),s=t[Nv.QA]&&DT(Nv.QA,t);return Ei({integration:"keyos",widevine:i,playready:e},s?{fairplay:s}:{})}(t):t}function CT(t){return{useSeamlessPeriodSwitch:JT(null==t?void 0:t.useSeamlessPeriodSwitch),needsTimescaleShifting:Ks(null==t?void 0:t.needsTimescaleShifting),desiredTimescale:void 0!==(null==t?void 0:t.desiredTimescale)?pM(null==t?void 0:t.desiredTimescale):void 0,forceSeekToSynchronize:Ks(null==t?void 0:t.forceSeekToSynchronize),ignoreAvailabilityWindow:Ks(null==t?void 0:t.ignoreAvailabilityWindow),forceHardSwitchWhenSeekingBackwards:Ks(null==t?void 0:t.forceHardSwitchWhenSeekingBackwards),segmentRelativeVttTiming:Ks(null==t?void 0:t.segmentRelativeVttTiming)}}function jT(t){return{discontinuityAlignment:OT(null==t?void 0:t.discontinuityAlignment),delaySubtitlePreload:pu(null==t?void 0:t.delaySubtitlePreload)}}function OT(t){if(!t||!Ic(t))return"auto";switch(t){case"playlist":return"playlist";case"media":return"media";default:return"auto"}}r(),r(),r(),r();var Ri=function(t){return t.SI="audio",t.NI="video",t.ON="text",t.II="image",t.dI="unknown",t}({});function ou(t){return"audio"===t||"video"===t}function RT(t){if(!$t(t))return;return zT(yM(null==t?void 0:t.preferredAudioCodecs,Q),yM(null==t?void 0:t.preferredVideoCodecs,Q),Ks(null==t?void 0:t.restrictToPlayerSize))}function PT(t,i){if(!$t(t)&&!$t(i))return;var e;return zT(BT(null==t?void 0:t.preferredAudioCodecs,null==i?void 0:i.preferredAudioCodecs),BT(null==t?void 0:t.preferredVideoCodecs,null==i?void 0:i.preferredVideoCodecs),null!=(e=null==t?void 0:t.restrictToPlayerSize)?e:null==i?void 0:i.restrictToPlayerSize)}function zT(t,i,e){if(0!==t.length||0!==i.length||void 0!==e)return{preferredAudioCodecs:0===t.length?void 0:t,preferredVideoCodecs:0===i.length?void 0:i,restrictToPlayerSize:e}}function BT(t,i){return void 0!==t&&(null==t?void 0:t.length)>0?t:null!=i?i:[]}function UT(t,i){if(void 0!==i)switch(t){case Ri.NI:return i.preferredVideoCodecs;case Ri.SI:return i.preferredAudioCodecs;default:return}}r(),r(),Qi(),r();var Jt=!1;r();var E=function(t){return t.iP="canplay",t.eP="canplaythrough",t.sP="loadeddata",t.nP="loadedmetadata",t.wx="readystatechange",t.rP="waiting",t.oP="playing",t}({}),QT=["canplay","canplaythrough","loadeddata","loadedmetadata","readystatechange","waiting","playing"];function FT(t,i,e){return e?t<=i:t<i}r();var Mo=class t{get hP(){return this.aP.slice()}Cn(t){return this.aP[2*t]}jn(t){return this.aP[2*t+1]}uP(t){return this.cP[2*t]}lP(t){return this.cP[2*t+1]}ks(){const t=this;return{get length(){return t.V},start(i){const e=0|i;return t.dP(e),t.Cn(e)},end(i){const e=0|i;return t.dP(e),t.jn(e)}}}fP(){const i=new Array(2*this.V),e=new Array(2*this.V);for(let t=0;t<this.V;t++)i[2*t]=this.Cn(t),i[2*t+1]=this.jn(t),e[2*t]=!0,e[2*t+1]=!0;return new t(i,e)}dP(t){if(t<0)throw new b("The index provided ("+t+") must be non-negative");if(t>=this.V)throw new b("The index provided ("+t+") is greater than the maximum bound ("+this.V+")")}gP(t){if(0===this.V)return 0;if(this.gr(t))return t;if(t<=this.Cn(0))return this.Cn(0);if(t>=this.jn(this.V-1))return this.jn(this.V-1);{let i=0,e=1/0;for(let s=0;s<this.V;s++){const n=this.Cn(s),r=x.abs(n-t);r<e&&(i=n,e=r);const o=this.jn(s),h=x.abs(o-t);h<e&&(i=o,e=h)}return i}}Sn(i){let e=0,s=0;const n=[],r=[];for(;e<this.V&&s<i.V;){const t=this.Cn(e),o=this.jn(e),h=this.uP(e),a=this.lP(e),u=i.Cn(s),c=i.jn(s),l=i.uP(s),d=i.lP(s),f=x.max(t,u),g=x.min(o,c);let _,v;_=t===u?h&&l:f===t?h:l,v=o===c?a&&d:g===o?a:d,(f<g||_&&v&&f===g)&&(n.push(f,g),r.push(_,v)),o===c?(e+=1,s+=1):o<c?e+=1:s+=1}return new t(n,r)}_P(){const i=this.vP(),e=i.V;if(0===e)return new t([-1/0,1/0],[!1,!1]);const s=[],n=[],r=i.Cn(0);r!==-1/0&&(s.push(-1/0,r),n.push(!1,!i.uP(0)));for(let t=0;t<e-1;t++)s.push(i.jn(t),i.Cn(t+1)),n.push(!i.lP(t),!i.uP(t+1));const o=i.jn(e-1);return o!==1/0&&(s.push(o,1/0),n.push(!i.lP(e-1),!1)),new t(s,n)}wP(i){let e=0,s=0;const n=this.V,r=i.V,o=new Array(2*(n+r)),h=new Array(2*(n+r));let a=0;for(;e<n&&s<r;){const t=this.Cn(e),n=this.jn(e),r=i.Cn(s),u=i.jn(s);t<r||t===r&&n<u?(o[a]=t,o[a+1]=n,h[a]=this.uP(e),h[a+1]=this.lP(e),e++):(o[a]=r,o[a+1]=u,h[a]=i.uP(s),h[a+1]=i.lP(s),s++),a+=2}for(;e<n;)o[a]=this.Cn(e),o[a+1]=this.jn(e),h[a]=this.uP(e),h[a+1]=this.lP(e),e++,a+=2;for(;s<r;)o[a]=i.Cn(s),o[a+1]=i.jn(s),h[a]=i.uP(s),h[a+1]=i.lP(s),s++,a+=2;return new t(o,h)}mP(i){void 0===i&&(i=0);const e=this.V;if(e<2)return this;const s=[],n=[];let r=this.Cn(0),o=this.jn(0),h=this.uP(0),a=this.lP(0);for(let t=1;t<e;t++){const e=this.Cn(t),u=this.jn(t);let c=this.uP(t),l=this.lP(t);r<e&&o>u||(r===e&&(c=h||c,h=c),o===u&&(l=a||l,a=l),FT(e,o+i,a||c)?(o=u,a=l):(s.push(r,o),n.push(h,a),r=e,o=u,h=c,a=l))}return s.push(r,o),n.push(h,a),new t(s,n).vP()}vP(){const i=[],e=[];for(let t=0;t<this.V;t++){const s=this.Cn(t),n=this.jn(t),r=this.uP(t),o=this.lP(t);s===n?(r||o)&&(i.push(s,n),e.push(!0,!0)):(i.push(s,n),e.push(r,o))}return new t(i,e)}pP(t){if(0===this.V)return t;if(0===t.V)return this;return this.wP(t).mP()}AP(t){const i=this.vP(),e=t.vP(),s=i._P(),n=e._P(),r=s.Sn(e),o=n.Sn(i);return r.pP(o)}Gb(i){if(0===this.V||0===i)return this;const e=[],s=[];for(let t=0;t<this.V;t++){const n=this.Cn(t)+i,r=this.jn(t)+i;e.push(n,r),s.push(this.uP(t),this.lP(t))}return new t(e,s)}yP(t){return 0===this.V||0===t.V?this:this.vP().Sn(t.vP()._P())}gr(t,i){return this.bP(t,i)>=0}MP(t,i,e,s,n){return this.TP(t,i,e,s,n)>=0}SP(t,i,e,s,n){return this.NP(t,i,e,s,n)>=0}IP(t){if(t.V!==this.V)return!1;for(let i=0;i<this.V;i++)if(this.Cn(i)!==t.Cn(i)||this.jn(i)!==t.jn(i)||this.uP(i)!==t.uP(i)||this.lP(i)!==t.lP(i))return!1;return!0}DP(i){const e=[],s=[];for(let t=0;t<this.V;t++){const n=this.Cn(t),r=this.jn(t),o=this.uP(t),h=this.lP(t);i(n,r,o,h)&&(e.push(n,r),s.push(o,h))}return new t(e,s)}NP(t,i,e,s,n){void 0===e&&(e=!0),void 0===s&&(s=!0),void 0===n&&(n=0);const r=t-n,o=i+n;for(let t=0;t<this.V;t+=1)if(FT(this.Cn(t),o,!s||this.uP(t))&&FT(r,this.jn(t),!e||this.lP(t)))return t;return-1}TP(t,i,e,s,n){void 0===e&&(e=!0),void 0===s&&(s=!1),void 0===n&&(n=0);const r=t+n,o=i-n;for(let t=0;t<this.V;t+=1)if(FT(this.Cn(t),r,!e||this.uP(t))&&FT(o,this.jn(t),!s||this.lP(t)))return t;return-1}bP(t,i){return this.TP(t,t,!0,!0,i)}EP(t,i){void 0===i&&(i=0);const e=t+i;for(let t=this.V-1;t>=0;t-=1)if(FT(this.Cn(t),e,this.uP(t)))return t;return-1}kP(t,i){void 0===i&&(i=0);const e=t-i;for(let t=0;t<this.V;t+=1)if(FT(e,this.jn(t),this.lP(t)))return t;return-1}xP(t,i){void 0===i&&(i=0);const e=t+i;for(let t=0;t<this.V;t+=1)if(this.Cn(t)>e)return t;return-1}LP(i){return this.dP(i),new t([this.Cn(i),this.jn(i)],[this.uP(i),this.lP(i)])}CP(t,i){const e=this.bP(t,i);return e<0?void 0:this.LP(e)}get jP(){let t=0;for(let i=0;i<this.V;i++){t+=this.jn(i)-this.Cn(i)}return t}static xn(i){const e=[];for(let t=0;t<i.length;t++)e.push(i.start(t),i.end(t));return new t(e)}static OP(i){return new t([i,i],[!0,!0])}static RP(i,e){return i<=e?new t([i,e]):t.PP()}static PP(){return YT}constructor(t,i){this.V=t.length>>1,this.aP=t,this.cP=i||function(t){const i=new Array(2*t);for(let e=0,s=0;e<t;e+=1,s+=2)i[s]=!0,i[s+1]=!1;return i}(this.V)}},YT=new Mo([]),We=.92,ee=1.08,VT=.25,GT=class extends tu{get zP(){return this.He&&this.Kh}get BP(){return this.UP}get Rt(){return this.He}set Rt(t){this.He=t,t?this.Cn():this.zk()}QP(t){this.FP.push(t),this.YP()}VP(t){ra(this.FP,t),this.YP()}YP(){this.UP=this.GP(),this.Kh&&this.WP()}GP(){const t=this.ZP,i=function(t,i){const e=i-t.targetOffset;return{minimumOffset:t.minimumOffset+e,targetOffset:t.targetOffset+e,maximumOffset:t.maximumOffset+e,forceSeekOffset:t.forceSeekOffset+e,minimumPlaybackRate:t.minimumPlaybackRate,maximumPlaybackRate:t.maximumPlaybackRate,leniency:t.leniency}}(this.HP,this.qP),e=[i,...this.FP],s=e.reduce(((t,i)=>{var e;return x.max(t,null!=(e=null==i?void 0:i.minimumOffset)?e:0)}),t),n=e.reduce(((t,i)=>{var e;return x.max(t,null!=(e=null==i?void 0:i.targetOffset)?e:0)}),s+VT),r=e.reduce(((t,i)=>{var e;return x.max(t,null!=(e=null==i?void 0:i.maximumOffset)?e:0)}),n+VT);return{minimumOffset:s,targetOffset:n,maximumOffset:r,forceSeekOffset:e.reduce(((t,i)=>{var e;return x.max(t,null!=(e=null==i?void 0:i.forceSeekOffset)?e:0)}),r+VT),minimumPlaybackRate:e.reduce(((t,i)=>{var e;return x.min(t,null!=(e=i.minimumPlaybackRate)?e:We)}),We),maximumPlaybackRate:e.reduce(((t,i)=>{var e;return x.max(t,null!=(e=i.maximumPlaybackRate)?e:ee)}),ee)}}KP(){var t;const i=null==(t=Mo.xn(this.ta.TE).CP(this.ta.xE))?void 0:t.jn(0),e=void 0!==i?i-this.ta.xE:0;this.JP=x.min(this.JP,e),this.$P+=1}tz(){if(this.$P<10)return;const t=.25-this.JP,i=ur(this.qP+t,this.qP-.1,this.qP+.1);this.qP=ur(i,this.iz,this.ez),this.JP=1/0,this.$P=0}nz(){this.rz(),this.hD=Fe.Pg((()=>this.WP()),500)}rz(){void 0!==this.hD&&(Fe.Rg(this.hD),this.hD=void 0)}Cn(){this.He&&this.oz&&(this.Kh||this.cz.yn(Zi.Eb,this.WP),this.lz=Fe.dA((()=>this.KP()),1e3),this.fz=Fe.dA((()=>this.tz()),6e4),this.nz(),this.Kh=!0)}zk(){this.Kh&&(this.rz(),this.lz&&Fe.fA(this.lz),this.fz&&Fe.fA(this.fz),this.cz.fn(Zi.Eb,this.WP),this.gz(1),this.Kh=!1)}wy(){this.zk(),this.ta.fn(E.rP,this._z),this.ta.fn(E.oP,this.vz),this.Bo()}gz(t){this.cz.mz.wz||this.ta.$E!==t&&(this.ta.$E=t)}get pz(){return this.ta.Az}constructor(t,i,e){var s;super(),this.Kh=!1,this.He=!1,this.FP=[],this.oz=!1,this.ZP=0,this.hD=void 0,this.$P=0,this.JP=1/0,this._z=()=>{const t=this.cz.TE,i=this.cz.xE,e=t.CP(i);e&&(this.ZP=ur(e.jn(0)-i,this.ZP,.5),this.YP())},this.vz=()=>{this.oz=!0,this.ta.fn(E.oP,this.vz),this.He&&this.Cn()},this.WP=()=>{this.rz(),this.nz();const t=this.pz;if(!t)return;const i=this.yz();if(t>this.UP.forceSeekOffset)return this.yo(new Jr("latencyrecoveryseek")),void this.sL();const{minimumOffset:e,targetOffset:s,maximumOffset:n}=this.UP,r=this.cz.$E;if(i>n&&this.bz()){const t=this.UP.maximumPlaybackRate;Jt,this.gz(t)}else if(i<e&&!Fe.Ys.Np){const t=this.UP.minimumPlaybackRate;Jt,this.gz(t)}else if(r>1&&i<s){const t=1;Jt,this.gz(t)}else if(r<1&&i>s){const t=1;Jt,this.gz(t)}},this.ta=t,this.cz=i,this.HP=e,this.iz=e.targetOffset,this.ez=e.targetOffset+(null!=(s=e.leniency)?s:0),this.qP=e.targetOffset,this.UP=this.GP(),this.ta.yn(E.rP,this._z),this.ta.yn(E.oP,this.vz)}};Qi();var WT=.66,ZT=1.5,HT=3;function XT(t){if(!$t(t))return;const i=Fe.Ys.Ip?10:0,e=t.targetOffset;var s;var n;var r;var o;var h;var a;return{minimumOffset:null!=(s=t.minimumOffset)?s:e*WT,targetOffset:e,maximumOffset:null!=(n=t.maximumOffset)?n:e*ZT,forceSeekOffset:x.max(null!=(r=t.forceSeekOffset)?r:e*HT,i),minimumPlaybackRate:null!=(o=t.minimumPlaybackRate)?o:We,maximumPlaybackRate:null!=(h=t.maximumPlaybackRate)?h:ee,leniency:null!=(a=t.leniency)?a:void 0}}var qT=function(t){return t.Mz="auto",t.Tz="always",t.Sz="never",t.CLEAR_ONLY="clear-only",t.SAME_DRM_ONLY="same-drm-only",t}({}),KT=function(t){return t.UPLYNK="uplynk",t.MEDIATAILOR="mediatailor",t}({});function JT(t){if(!t||!Ic(t))return"auto";switch(t){case"always":return"always";case"never":return"never";case"clear-only":return"clear-only";case"same-drm-only":return"same-drm-only";default:return"auto"}}r(),r();var $T=function(t){return t.ENABLED="enabled",t.INSECURE="insecure",t.DISABLED="disabled",t}({});r();var tS=!1;r();var iS=function(t){return t.NONE="none",t.MIDROLL_AND_POSTROLL="midroll-and-postroll",t}({});r();var El=function(t){return t.DEFAULT="",t.SRT="srt",t.TTML="ttml",t.WEBVTT="webvtt",t.EMSG="emsg",t.EVENT_STREAM="eventstream",t.ID3="id3",t.CEA608="cea608",t.DATE_RANGE="daterange",t.MILLICAST="millicast",t}({});function eS(t){switch(t){case"":case"srt":case"ttml":case"webvtt":case"emsg":case"eventstream":case"id3":case"cea608":case"daterange":case"millicast":return!0;default:return!1}}function sS(t){return!!t&&_t(t,"mpd")}function Mu(t){let i=Oe.uL;return sS(t)&&(i=Oe.oL),function(t){return!!t&&_t(t,"m3u8")}(t)&&(i=Oe.hL),i}function nS(t){switch(t){case BM.nL:case BM.rL:return t;default:return BM.EI}}function rS(t){if(!t)return!1;const i=t.toLowerCase();return Et(i,Oe.oL)}function or(t){if(!t)return!1;const i=t.toLowerCase();return Et(i,Oe.hL)||Et(i,Oe.aL)}function Tt(t){return _o(t)&&_o(t.ssai)&&"google-dai"===t.ssai.integration}function oS(t){return _o(t)&&("verizon-media"===t.integration||"uplynk"===t.integration)}function hS(t){return _o(t)&&("theolive"===t.type||"theolive"===t.integration)}function aS(t){return _o(t)&&"mediatailor"===t.integration}function uS(t){return _o(t)&&"millicast"===t.type}function cS(t){if(t.sources)if(Dn(t.sources)){for(const i of t.sources)if(uS(i))return!0}else if(_o(t.sources))return uS(t.sources);return!1}function lS(t){if(Ic(t))return!t;if(oS(t))return!t.id;if(Tt(t)){const i=t.ssai,e="live"===i.availabilityType&&i.assetKey,s="vod"===i.availabilityType&&i.contentSourceID&&i.videoID;return Boolean(e&&s)}return uS(t)?!t.src&&!t.streamName||!t.streamAccountId:!t.src}function dS(t){return Boolean(_o(t)&&Ic(t.src))}function fS(t){return t.type===Oe.cL||t.type===Oe.lL}function St(t){return Ic(t)||dS(t)||Tt(t)||oS(t)||uS(t)}function gS(t){if(t){if(St(t))return lS(t);for(const i of t)if(!lS(i))return!1;return!0}return!0}function _S(){return{crossOrigin:BM.EI,useCredentials:!1,liveOffset:void 0,timeServer:void 0,hlsDateRange:void 0,experimentalRendering:!1,nativeUiRendering:!1,lowLatency:!1,useNativePlayback:!1,useManagedMediaSource:!1,dash:void 0,hls:void 0,abr:void 0,lcevc:void 0,ignoreEmbeddedTextTrackTypes:[],seamlessSwitchStrategy:qT.Mz,latencyConfiguration:void 0}}function vS(){return Ei({},_S(),{src:void 0,type:Oe.uL,contentProtection:void 0,ssai:void 0,integrationData:void 0,isAdvertisement:void 0})}function wS(t){const i={allowedMimeTypes:void 0,preload:"midroll-and-postroll",showCountdown:!0,vpaidMode:$T.ENABLED,googleIma:{useNativeIma:!1,useAdUiElementForSsai:!1,bitrate:-1,language:void 0,uiElements:void 0},theoads:tS};return void 0===t||(void 0!==t.preload&&(i.preload=function(t){return"none"===t?iS.NONE:iS.MIDROLL_AND_POSTROLL}(t.preload)),void 0!==t.showCountdown&&(i.showCountdown=pu(t.showCountdown)),void 0!==t.vpaidMode&&(i.vpaidMode=function(t){switch(t){case"insecure":return $T.INSECURE;case"disabled":return $T.DISABLED;default:return $T.ENABLED}}(t.vpaidMode)),Dn(t.allowedMimeTypes)&&(i.allowedMimeTypes=t.allowedMimeTypes.filter(Ic)),void 0!==t.googleIma&&(i.googleIma=function(t){return void 0===t?{useNativeIma:!1,useAdUiElementForSsai:!1,bitrate:-1,language:void 0,uiElements:void 0}:{useNativeIma:pu(t.useNativeIma),useAdUiElementForSsai:pu(t.useAdUiElementForSsai),bitrate:null!=(i=t.bitrate)?i:-1,language:$t(t.language)?Q(t.language):void 0,uiElements:t.uiElements};var i}(t.googleIma)),void 0!==t.theoads?i.theoads=pu(t.theoads):i.theoads=tS),i}function mS(t){if(!Ia(t))return[];const i=[];for(const e of t)_o(e)&&i.push(e);return i}function Vc(t){return Ic(t.src)||uS(t)}function pS(t){return Dn(t)?t.filter(eS):[]}r(),r();var Fn=function(t){return t[t.Nz=0]="Nz",t[t.Xn=1]="Xn",t[t.Iz=2]="Iz",t[t.Dz=3]="Dz",t[t.Ez=4]="Ez",t}({}),Js=class extends Jr{constructor(t,i=Fn.Nz){super(Zi.Hy),this.currentTime=t,this.readyState=i}};r();var Zr=class extends Jr{constructor(t){super(Zi.wb),this.currentTime=t}};r();var fi=class extends Jr{constructor(t){super(Zi.so),this.currentTime=t}};r();var yu=class extends Jr{constructor(t,i=Fn.Xn){super(E.nP),this.currentTime=t,this.readyState=i}};r();var Hs=class extends Jr{constructor(t){super(Zi.Zy),this.duration=t}};r();var cu=class extends Jr{constructor(t,i){super(Zi.pb),this.currentTime=t,this.playbackRate=i}};r();var A=class extends Jr{constructor(t,i){super(Zi.Eb),this.currentTime=t,this.currentProgramDateTime=i}};r();var fa=class extends Jr{constructor(t){super(Zi.qy),this.currentTime=t}};r();var Cu=class extends Jr{constructor(t,i=Fn.Iz){super(E.sP),this.currentTime=t,this.readyState=i}};r();var Yr=class extends Jr{constructor(t){super(Zi.Mb),this.currentTime=t}};r();var aa=class extends Jr{constructor(t){super(Zi.bb),this.currentTime=t}};r();var $e=class extends Jr{constructor(t,i){super(Zi.kb),this.currentTime=t,this.volume=i}};r();var AS=class extends Jr{constructor(t,i=Fn.Dz){super(E.iP),this.currentTime=t,this.readyState=i}};r();var Eu=class extends Jr{constructor(t,i=Fn.Ez){super(E.eP),this.currentTime=t,this.readyState=i}};r();var Yu=class extends Jr{constructor(t,i){super(E.wx),this.currentTime=t,this.readyState=i}};r();var Uc=class extends ua{get error(){return this.errorObject.message}ma(){return this}constructor(t){super(Me.ua),this.errorObject=t}};async function ao(t,i,e,s,n){void 0===e&&(e=3),void 0===s&&(s=1e3),void 0===n&&(n=1/0);let r=0;for(;;)try{return await t(i)}catch(t){if(X(t),r<e){const t=x.min(s*2**r,n);r++,await kt(t,i);continue}throw t}}r();var yS={maxRetries:1/0,minimumBackoff:200,maximumBackoff:3e4};r();var Ba=function(t){return t.INLINE="inline",t.FULLSCREEN="fullscreen",t.PICTURE_IN_PICTURE="picture-in-picture",t.NATIVE_PICTURE_IN_PICTURE="native-picture-in-picture",t}({}),bS=function(t){return t.NONE="none",t.ALL="all",t.CONTENT="content",t}({});function MS(t){switch(t){case"all":case"content":return t;default:return"none"}}function TS(t){const i=P(t||{});return i.libraryLocation&&(i.libraryLocation=qs(i.libraryLocation,!0)),i.isEmbeddable=Boolean(i.isEmbeddable),i.cast=function(t){const i=zM(t?t.chromecast:void 0),e=function(t){switch(t){case"auto":return"auto";case"manual":default:return"manual";case"disabled":return"disabled"}}(t?t.strategy:void 0);return{chromecast:i,strategy:e}}(i.cast),i.ads=wS(i.ads),i.analytics=mS(i.analytics),i.mutedAutoplay=MS(i.mutedAutoplay),i.allowNativeFullscreen=Boolean(i.allowNativeFullscreen),i.allowMixedContent=Boolean(i.allowMixedContent),i.persistVolume=Boolean(i.persistVolume),i.liveOffset=function(t){return Number(t)||void 0}(i.liveOffset),i.hlsDateRange=function(t){return Boolean(t)}(i.hlsDateRange),i.retainPlaybackRateOnSourceChange=Boolean(i.retainPlaybackRateOnSourceChange),i.license=function(t){return Ic(t)?t:void 0}(i.license),i.licenseUrl=function(t){if(!t)return;try{return qs(t)}catch(t){return void Fe.uA("Invalid 'licenseUrl', falling back to default URL")}}(i.licenseUrl),i.vr=function(t){return{useWebXR:Boolean(t&&t.useWebXR)}}(i.vr),i.abr=RT(i.abr),i.retryConfiguration=function(t){const i=Ei({},yS);return void 0!==t&&(void 0!==t.maxRetries&&(i.maxRetries=Number(t.maxRetries)),void 0!==t.minimumBackoff&&(i.minimumBackoff=Number(t.minimumBackoff)),void 0!==t.maximumBackoff&&(i.maximumBackoff=Number(t.maximumBackoff))),i}(i.retryConfiguration),i.hideDeprecationWarnings=Boolean(i.hideDeprecationWarnings),i.theoLive=function(t){if(!t)return t;return Ei({},t,{externalSessionId:t.externalSessionId?Q(t.externalSessionId):void 0,fallbackEnabled:Ks(t.fallbackEnabled)})}(i.theoLive),i}function SS(t){return{bt:t.bt,xE:t.xE,ct:t.ct,OE:t.OE,lt:t.lt,zE:t.zE,WE:t.WE,KE:t.KE,$E:t.$E,fk:t.fk,wk:t.wk,yk:t.yk,Tk:t.Tk,Nk:t.Nk}}function NS(t,i){const e=i.Nk,s=i.WE;t.Nk=e,t.WE=s}function IS(t,i,e){if(i===e)return;const s=i.bt!==e.bt,n=i.xE,r=i.ct,o=i.WE,h=i.KE,a=i.$E,u=i.fk,c=i.wk,l=(i.Tk,i.yk,i.Nk),d=e.xE,f=e.ct,g=e.OE,_=e.zE,v=e.WE,w=e.KE,m=e.$E,p=e.fk,y=e.wk,b=(e.Tk,e.yk,e.Nk);(s||u>Fn.Nz&&p===Fn.Nz)&&t.yo(new Js(d,p)),w&&!h?t.yo(new Zr(d)):!w&&h&&t.yo(new fi(d)),p>=Fn.Xn&&(s||u<Fn.Xn)&&t.yo(new yu(d,p)),f===r||j(f)&&j(r)||t.yo(new Hs(f)),m!==a&&t.yo(new cu(d,m)),d!==n&&t.yo(new A(d,void 0)),g&&t.yo(new fa(d)),p>=Fn.Iz&&(s||u<Fn.Iz)&&t.yo(new Cu(d,p)),y&&!c?t.yo(new Yr(d)):!y&&c&&t.yo(new aa(d)),b===l&&v===o||t.yo(new $e(d,b)),p>=Fn.Dz&&(s||u<Fn.Dz)&&t.yo(new AS(d,p)),p>=Fn.Ez&&(s||u<Fn.Ez)&&t.yo(new Eu(d,p)),p!==u&&t.yo(new Yu(d,p)),_&&t.yo(new Uc(_))}function DS(t){switch(t){case Ba.INLINE:case Ba.FULLSCREEN:case Ba.PICTURE_IN_PICTURE:case Ba.NATIVE_PICTURE_IN_PICTURE:return t;default:return}}r();var ES=class extends Jr{constructor(t){super(Zi.Gy),this.currentSource=t}};r();var kS=class extends Jr{constructor(){super(Zi.Ky)}};r();var Bu=class extends Jr{constructor(){super(Zi.$y)}};r(),r(),r();var Au=function(t){return t.kz="enterpictureinpicture",t.xz="exitpictureinpicture",t.ua="pictureinpictureerror",t}({}),xS=class extends Jr{constructor(){super(Au.kz)}};r();var LS=class extends Jr{constructor(){super(Au.xz)}},CS=class extends tu{get xx(){return this.Lx}set xx(t){if(t===this.Lx)return;this.Cx(this.Lx);const i=this.Lx.Lz;this.Lx=t,this.Ox(t),!i&&this.Lx.Lz?this.yo(new xS):i&&!this.Lx.Lz&&this.yo(new LS)}Ox(t){t.yn(Au.kz,this.Ds),t.yn(Au.xz,this.Ds),t.yn(Au.ua,this.Ds)}Cx(t){t.fn(Au.kz,this.Ds),t.fn(Au.xz,this.Ds),t.fn(Au.ua,this.Ds)}get Cz(){return this.Lx.Cz}get Lz(){return this.Lx.Lz}co(){return this.Lx.co()}bo(){return this.Lx.bo()}gn(t){this.Bo(),this.Cx(this.Lx),t||this.Lx.gn()}constructor(t){super(),this.Lx=t,this.Ox(this.Lx)}},jS=class extends xt{_a(){return this.jz}AE(){return this.Oz}get UE(){return this.QE()}QE(){return this.Rz}Ak(){return this.Ul}Mk(){return this.Pz}zz(t){const i=this.yE;if(i===t)return;i.Py(this.Zk);const e=SS(this),s=this.kE(),n=this.Ck(),r=this.jk();this.yE=t,this.Oz.xx=t.ht,this.Pz.xx=t.rt,this.Ul.xx=t.nt,this.jz.xx=t._a(),this.Rz.xx=t.UE,void 0!==e&&IS(this,e,this);const o=this.kE();o!==s&&this.yo(new ES(o)),this.Ck()!==n&&this.yo(new kS),this.jk()!==r&&this.yo(new Bu),t.Ly(this.Zk)}async gn(){await super.gn(),this.jz.gn(),this.Oz.gn(),this.Pz.gn(),this.Ul.gn(),this.Rz.gn()}constructor(t){super(t),this.Oz=new tl,this.Pz=new tl,this.Ul=new Ce,this.Rz=new ct,this.jz=new CS(t._a()),this.Oz.xx=t.ht,this.Pz.xx=t.rt,this.Ul.xx=t.nt,this.Rz.xx=t.UE}};r(),ds();var OS=class extends jS{GE(){return function(t){let i=0,e=0,s=0,n=0,r=0,o=0,h=0;for(const a of t)i+=a.Bz,e+=a.Uz,s+=a.Qz,n+=a.Fz,r+=a.Yz,o+=a.Vz.amountOfBufferedAudioSegments,h+=a.Vz.amountOfBufferedVideoSegments;return{Bz:i,Uz:e,Qz:s,Fz:n,Yz:r,Vz:{amountOfBufferedAudioSegments:o,amountOfBufferedVideoSegments:h}}}(this.Gz.map((t=>t.VE)))}zk(){return _w(this.Gz.map((t=>t.zk()))).then(ya)}tr(){return _w(this.Gz.map((t=>t.tr()))).then(ya)}Ok(){if(!this.do){for(const t of this.Gz)t.Ok();this.do=!0}}bE(){const t=[];for(const i of this.Gz)t.push(...i.bE());return t}Vk(t){let i=!1;for(const e of this.Gz)i=e.Vk(t)||i;return i}yo(t){this.Vk(t)||super.yo(t)}get xx(){return this.yE}set xx(t){this.zz(t)}Wz(t){this.Gz.push(t)}Zz(t){ra(this.Gz,t)}zz(t){if(t===this.yE)return;const i=this.yE;i.ar(),super.zz(t),t.ur(i)}Fk(){for(const t of this.Gz)t.Fk()}async gn(){this.Bo(),this.yE.ar();for(const t of this.Gz)this.yE!==t&&await t.gn();await super.gn()}constructor(t){super(t),this.Gz=[],this.do=!1,this.Xz=!1,this.Wz(t)}};r();var lt=function(t){return t[t.ABORTED=1]="ABORTED",t[t.NETWORK=2]="NETWORK",t[t.DECODE=3]="DECODE",t[t.SRC_NOT_SUPPORTED=4]="SRC_NOT_SUPPORTED",t[t.ENCRYPTED=5]="ENCRYPTED",t[t.LICENSE_INVALID=6]="LICENSE_INVALID",t[t.ADVERTISEMENT_ERROR=7]="ADVERTISEMENT_ERROR",t}({}),RS=class extends lw{get name(){return"MediaError"}constructor(t,i,e,s){super(i),this.code=t,this.message=null!=i?i:"Unknown error",this.cause=e,this.systemCode=s,b.captureStackTrace&&b.captureStackTrace(this,this.constructor)}};function PS(t){gM(t,"MEDIA_ERR_ABORTED",1),gM(t,"MEDIA_ERR_NETWORK",2),gM(t,"MEDIA_ERR_DECODE",3),gM(t,"MEDIA_ERR_SRC_NOT_SUPPORTED",4),gM(t,"MEDIA_ERR_ENCRYPTED",5)}function la(t){var i,e;return function(t){return t.category===xd.CONTENT_PROTECTION}(t)?new RS(5,t.message,null==(i=t.cause)?void 0:i.message,t.systemCode):new RS(zS(t.code),t.message,null==(e=t.cause)?void 0:e.message)}function zS(t){if(t===vt.MEDIA_ABORTED)return 1;if(t===vt.MANIFEST_LOAD_ERROR||t===vt.MEDIA_LOAD_ERROR||t===vt.SUBTITLE_LOAD_ERROR)return 2;if(t===vt.MEDIA_DECODE_ERROR)return 3;if(t===vt.MEDIA_NOT_SUPPORTED)return 4;const i=xd.fromCode(t);return i===xd.NETWORK?2:i===xd.SOURCE?4:i===xd.LICENSE?6:i===xd.CONTENT_PROTECTION?5:i===xd.AD?7:3}function ju(t){return new qi(BS(t.code),t.message,t)}function BS(t){switch(t){case 1:return vt.MEDIA_ABORTED;case 2:return vt.NETWORK_ERROR;case 3:return vt.MEDIA_DECODE_ERROR;case 4:return vt.SOURCE_NOT_SUPPORTED;case 5:return vt.CONTENT_PROTECTION_ERROR;case 6:return vt.LICENSE_ERROR;case 7:return vt.AD_ERROR}}PS(RS),PS(RS.prototype),r(),r(),r(),r(),r();var pe=class extends Kn{tt(t){return super.tt(t)}ma(){return IM(this)}};r(),r(),r(),r();var ki=class{get Ix(){return this.qz}get V(){return this.qz.length}get ga(){return this.Za||(this.Za=function(t){const i=t.Ix.map((t=>t.ga));return i.item=i=>{const e=0|i,s=t.Ex(e);return s&&s.ga||void 0},i}(this)),this.Za}Kz(t){this.qz.push(t),this.Za&&this.Za.push(t.ga)}wS(t){ra(this.qz,t),this.Za&&ra(this.Za,t.ga)}Ex(t){return this.qz[t]}Jz(t){return Dn(t)?function(t,i){for(const e of i)if(!Qa(t,e))return!1;return!0}(this.qz,t):Qa(this.qz,t)}tr(){nt(this.qz),this.Za&&nt(this.Za)}constructor(){this.qz=[],this.Za=void 0}};r();var xu=class extends du{ma(){return new US(this.Ht.ga)}constructor(t){super(yo.bx),this.Ht=t}},US=class extends Pu{constructor(t){super("update"),this.track=t}};r();var QS=0;function ft(){return QS++}var FS=0;var YS=0;function VS(){return YS++}var GS=0;function WS(){return GS++}var ZS=0;var HS=class extends tu{get Vx(){}get Rt(){return this.He}set Rt(t){this.He!==t&&(this.He=t,this.$z=t,this.yo(new su(this)))}get $z(){return this.tB.enabled}set $z(t){this.tB.enabled=t}get ga(){return this.Za||(this.Za=oo(this)),this.Za}get o(){return this.aS}get Gx(){return this.iB}get Lt(){return this.tB.kind}get kh(){return this.eB}set kh(t){t!==this.eB&&(this.eB=t,this.yo(new xu(this)))}get gs(){return this.tB.language}get UI(){return this.Rt?"enabled":"disabled"}get sB(){return this.tB}get Zx(){return this.qz}get Hx(){}set Hx(t){}nB(t){this.Rt=t}rB(){this.Rt=this.$z}constructor(t){super(),this.YA=Ri.SI,this.He=!1,this.Za=void 0,this.tB=t,this.iB=ft(),this.aS=ZS+++"",this.eB=t.label,this.qz=new ki,this.rB()}};r();var XS=0;var qS=class extends tu{get Vx(){}get Rt(){return this.He}set Rt(t){this.He!==t&&(this.He=t,this.$z=t,this.yo(new su(this)))}get $z(){return!!this.tB.selected}set $z(t){this.tB.selected=t}get ga(){return this.Za||(this.Za=oo(this)),this.Za}get o(){return this.aS}get Gx(){return this.iB}get Lt(){return"main"}get kh(){return this.eB}set kh(t){t!==this.eB&&(this.eB=t,this.yo(new xu(this)))}get gs(){return this.tB.language}get UI(){return this.Rt?"enabled":"disabled"}get sB(){return this.tB}get Zx(){return this.qz}get Hx(){}set Hx(t){}rB(){this.Rt=this.$z}nB(t){this.Rt=t}constructor(t){super(),this.YA=Ri.NI,this.He=!1,this.Za=void 0,this.tB=t,this.iB=ft(),this.aS=XS+++"",this.qz=new ki,this.eB=t.label,this.rB()}};r();var KS=class extends Jr{constructor(t){super(Zi.By),this.FE=t}};r(),r();var Ma=function(t){return t[t.NONE=0]="NONE",t[t.LOADING=1]="LOADING",t[t.LOADED=2]="LOADED",t[t.ERROR=3]="ERROR",t}({});r(),r();var JS=function(t){return t.oB="cue",t.hB="region",t.aB="stylesheet",t}({});r(),r();var $S={"line-left":"start",center:"middle","line-right":"end"},tN={start:"line-left",middle:"center",end:"line-right"};function iN(t,i){if("auto"===t)switch(i){case"start":case"left":return"line-left";case"end":case"right":return"line-right";default:return"center"}return t}function eN(t,i){if("auto"===t)switch(i){case"left":return 0;case"right":return 100;default:return 50}return function(t,i){const e="number"==typeof t?t:S(t);return j(e)?i:e}(t,50)}r(),r(),r();var oa=function(t){return t.kz="co",t.xz="bo",t.bx="Yn",t}({}),sN=class extends du{constructor(t,i){super(t),this.uB=i}},nN=class extends Pu{constructor(t,i){super(t),this.cue=i}};function Ft(t){const i=[oa.kz,oa.xz,oa.bx];let e;const s={get cB(){return t},get track(){return t.Ht.ga},get id(){return t.o},get uid(){return t.Gx},get startTime(){return t.lB},set startTime(i){t.lB=i},get endTime(){return t.dB},set endTime(i){t.dB=i},get content(){return t.U},addEventListener(t,i){const s=Mt(t,Q);e.yn(s,i)},removeEventListener(t,i){const s=Mt(t,Q);e.fn(s,i)}};return e=new Su(s),t.yn(i,(t=>e.yo(t.ga))),s}function rN(){}function oN(t){return fe(Ft(t),{get align(){return t.fB},get line(){return t.gB},get lineAlign(){return t._B},get position(){return t.uo},get positionAlign(){return t.vB},get region(){return t.wB?t.wB.ga:null},get size(){return t.Kb},get snapToLines(){return t.mB},get text(){return t.U},get vertical(){return t.Pt}})}r(),r();var hN=class extends sN{ma(){return new aN(this.uB.ga)}constructor(t){super(oa.bx,t)}},aN=class extends nN{constructor(t){super("update",t)}};r();var uN=class extends du{ma(){return new cN(this.uB.ga)}constructor(t){super(yo.sx),this.uB=t}},cN=class extends Pu{constructor(t){super("updatecue"),this.cue=t}},pl=.02;function lN(t,i){return ce(t.pB,i.pB,pl)&&ce(t.AB,i.AB,pl)&&t.o===i.o}var dN=class extends tu{get lB(){return this.yB}set lB(t){var i,e;this.yB!==t&&(this.yB=t,null==(i=this.bB)||i.MB(this),this.yo(new hN(this)),null==(e=this.bB)||e.yo(new uN(this)))}get dB(){return this.TB}set dB(t){var i,e;this.TB!==t&&(this.TB=t,null==(i=this.bB)||i.MB(this),this.yo(new hN(this)),null==(e=this.bB)||e.yo(new uN(this)))}get o(){return this.aS}get Gx(){return this.iB}get ga(){return this.Za||(this.Za=this.ma()),this.Za}ma(){return Ft(this)}get Yh(){return this.Kh}set Yh(t){this.Kh=t}get Ht(){return this.bB}set Ht(t){this.bB=t}get U(){return this.SB}set U(t){var i;this.SB!==t&&(this.SB=t,this.yo(new hN(this)),null==(i=this.bB)||i.yo(new uN(this)))}get NB(){return this.IB}set NB(t){this.IB=t}DB(t){return this===t||wM(this,t)&&lN(this,t)&&this.EB(t)}EB(t){return ns(this.U,t.U)}kB(t,i){this.yB=t,this.TB=i,this.pB=t,this.AB=i}gn(){this.Bo()}constructor(t,i,e,s,n){super(),this.Za=void 0,this.bB=void 0,this.Kh=!1,this.xB=-1,this.iB=WS(),this.yB=t,this.TB=i,this.pB=t,this.AB=i,this.SB=e,this.IB=Boolean(s),this.aS=null!=n?n:""}};function fN(t,i){return t.U===i.U&&t.gB===i.gB&&t._B===i._B&&t.uo===i.uo&&t.vB===i.vB&&t.wB===i.wB&&t.mB===i.mB&&t.Kb===i.Kb&&t.fB===i.fB&&t.Pt===i.Pt}var Ht=class extends dN{get ga(){return this.Za||(this.Za=oN(this)),this.Za}get YA(){return JS.oB}EB(t){return fN(this,t)}constructor(t,i,e,s,n){super(t,i,e,s,n),this.gB="auto",this._B="start",this.uo="auto",this.vB="auto",this.wB=void 0,this.mB=!0,this.Kb=100,this.fB="center",this.Pt=""}};function gN(t){const i=t.gB,e=$a(i);return e&&!t.mB&&(i<0||i>100)?100:e?Number(i):t.mB?-1:100}function _N(t){return eN(t.uo,t.fB)}function vN(t){return iN(t.vB,t.fB)}function wN(t){const i=vN(t),e=_N(t);let s;switch(i){case"line-left":s=100-e;break;case"line-right":s=e;break;case"center":s=e<=50?2*e:2*(100-e)}return x.min(t.Kb,s)}function mN(t){return{get id(){return t.o},get identifier(){return t.o},get lines(){return t.LB},get regionAnchorX(){return t.CB},get regionAnchorY(){return t.jB},get scrollValue(){return t.OB},get viewportAnchorX(){return t.RB},get viewportAnchorY(){return t.PB},get width(){return t.ji}}}r(),r();var pN=class{get ga(){return this.Za||(this.Za=mN(this)),this.Za}get YA(){return JS.hB}constructor(t,i,e,s,n,r,o,h){this.o=t,this.ji=i,this.LB=e,this.CB=s,this.jB=n,this.RB=r,this.PB=o,this.OB=h}};r(),r(),Qi();var Wc=1e6,AN=class{zB(t){return this.BB()*t}UB(t){return this.QB(t)>0}FB(t){return this.QB(t)>=0}YB(t,i){return this.GB(t).VB(i)}DB(t){return 0===this.QB(t)}WB(t){return this.QB(t)<0}VB(t){return this.QB(t)<=0}ZB(){return this.HB()?this.XB():this}qB(t){return this.Kz(t.XB())}GB(t){return this.qB(t).ZB()}};function yN(t,i){return t.KB()?i.KB()?$n.Zr:$n.iy:i.KB()?$n.ey:t.JB()?i.JB()&&t.HB()===i.HB()?$n.Zr:t.HB()?$n.ey:$n.iy:i.HB()?$n.iy:$n.ey}r(),r();var bN=4294967296,MN=bN*bN,TN=MN*MN,SN=TN/2,iu=class t{static $B(i,e,s){return s?new t(i.toUnsigned(),e.toUnsigned()):new t(i.toSigned(),e.toSigned())}static tU(i){return i.unsigned?new t(i,D.UZERO):new t(i,i.isNegative()?D.NEG_ONE:D.ZERO)}static iU(i,e){if(j(i))return e?t.eU:t.sU;if(e){if(i<0)return t.eU;if(i>=TN)return t.nU}else{if(i<=-SN)return t.rU;if(i+1>=SN)return t.oU}return i<0?t.iU(-i,e).XB():t.$B(D.fromNumber(i%MN),D.fromNumber(i/MN),e)}hU(){return this.aU.unsigned}uU(){return this.cU.isZero()&&this.aU.isZero()}HB(){return this.aU.isNegative()}lU(){return this.hU()?t.$B(this.cU,this.aU,!1):this}dU(){return this.hU()?this:t.$B(this.cU,this.aU,!0)}fU(){return this.cU}BB(){return this.HB()?-this.XB().BB():this.aU.toNumber()*MN+this.cU.toUnsigned().toNumber()}gU(){return this.cU.toInt()}DB(t){return(this.hU()===t.hU()||this.aU.getHighBits()>>>31!=1||t.aU.getHighBits()>>>31!=1)&&(this.aU.toUnsigned().eq(t.aU.toUnsigned())&&this.cU.toUnsigned().eq(t.cU.toUnsigned()))}QB(t){if(this.DB(t))return $n.Zr;const i=this.HB(),e=t.HB();if(i&&!e)return $n.ey;if(!i&&e)return $n.iy;if(!this.hU())return this.qB(t).HB()?$n.ey:$n.iy;const s=this.dU(),n=t.dU(),r=n.aU.comp(s.aU);return r>0||0===r&&n.cU.gt(s.cU)?$n.ey:$n.iy}WB(t){return this.QB(t)<0}VB(t){return this.QB(t)<=0}_U(t){return this.QB(t)>0}vU(t){return this.QB(t)>=0}wU(){return new t(this.cU.not(),this.aU.not())}mU(i){return new t(this.cU.and(i.cU),this.aU.and(i.aU))}pU(i){return new t(this.cU.or(i.cU),this.aU.or(i.aU))}AU(i){const e=127&i;return 0===e?this:e<64?t.$B(this.cU.shl(e),this.aU.shl(e).or(this.cU.shru(64-e)),this.hU()):t.$B(D.ZERO,this.cU.shl(e-64),this.hU())}yU(i){const e=127&i;return 0===e?this:e<64?t.$B(this.cU.shru(e).or(this.aU.shl(64-e)),this.aU.shr(e),this.hU()):t.$B(this.aU.shr(e-64),this.aU.isNegative()?D.NEG_ONE:D.ZERO,this.hU())}bU(i){const e=127&i;return 0===e?this:e<64?t.$B(this.cU.shru(e).or(this.aU.shl(64-e)),this.aU.shru(e),this.hU()):64===e?t.$B(this.aU,D.ZERO,this.hU()):t.$B(this.aU.shru(e-64),D.ZERO,this.hU())}Kz(i){const e=this.aU.high>>>16,s=65535&this.aU.high,n=this.aU.low>>>16,r=65535&this.aU.low,o=this.cU.high>>>16,h=65535&this.cU.high,a=this.cU.low>>>16,u=65535&this.cU.low,c=i.aU.high>>>16,l=65535&i.aU.high,d=i.aU.low>>>16,f=65535&i.aU.low,g=i.cU.high>>>16,_=65535&i.cU.high,v=i.cU.low>>>16;let w=0,m=0,p=0,A=0,y=0,b=0,M=0,T=0;T+=u+(65535&i.cU.low),M+=T>>>16,T&=65535,M+=a+v,b+=M>>>16,M&=65535,b+=h+_,y+=b>>>16,b&=65535,y+=o+g,A+=y>>>16,y&=65535,A+=r+f,p+=A>>>16,A&=65535,p+=n+d,m+=p>>>16,p&=65535,m+=s+l,w+=m>>>16,m&=65535,w+=e+c,w&=65535;const S=this.hU(),N=D.fromBits(p<<16|A,w<<16|m,S),I=D.fromBits(M<<16|T,y<<16|b,S);return t.$B(I,N,S)}qB(t){return this.Kz(t.XB())}XB(){return this.wU().Kz(t.MU)}TU(i){if(this.uU()||i.uU())return this.hU()?t.eU:t.sU;if(this.HB())return i.HB()?this.XB().TU(i.XB()):this.XB().TU(i).XB();if(i.HB())return this.TU(i.XB()).XB();if(this.aU.isZero()&&0===this.cU.high&&i.aU.isZero()&&0===i.cU.high)return t.tU(this.cU.multiply(i.cU));const e=D.fromBits(4294967295,0,!0),s=this.cU.and(e),n=this.cU.shru(32),r=this.aU.and(e),o=this.aU.shru(32),h=i.cU.and(e),a=i.cU.shru(32),u=i.aU.and(e),c=i.aU.shru(32);let l=D.UZERO,d=D.UZERO,f=D.UZERO,g=D.UZERO;l=l.add(s.mul(h)),d=d.add(l.shru(32)),l=l.and(e),d=d.add(n.mul(h)),f=f.add(d.shru(32)),d=d.and(e),d=d.add(s.mul(a)),f=f.add(d.shru(32)),d=d.and(e),f=f.add(r.mul(h)),g=g.add(f.shru(32)),f=f.and(e),f=f.add(n.mul(a)),g=g.add(f.shru(32)),f=f.and(e),f=f.add(s.mul(u)),g=g.add(f.shru(32)),f=f.and(e),g=g.add(o.mul(h)).add(r.mul(a)).add(n.mul(u)).add(s.mul(c)).and(e);const _=D.fromBits(l.getLowBitsUnsigned(),d.getLowBitsUnsigned(),!0),v=D.fromBits(f.getLowBitsUnsigned(),g.getLowBitsUnsigned(),!0);return t.$B(_,v,this.hU())}SU(i){let e,s,n=i;if(n.uU())throw new RangeError("division by zero");if(this.uU())return this.hU()?[t.eU,t.eU]:[t.sU,t.sU];if(this.hU()){if(n.hU()||(n=n.dU()),n._U(this))return[t.eU,this];if(n._U(this.bU(1)))return s=t.NU,e=this.qB(n),[s,e];s=t.eU}else{if(this.DB(t.rU)){if(n.DB(t.MU)||n.DB(t.IU))return[t.rU,t.sU];if(n.DB(t.rU))return[t.MU,t.sU];{const i=this.yU(1).DU(n).AU(1);return i.DB(t.sU)?s=n.HB()?t.MU:t.IU:(e=this.qB(n.TU(i)),s=i.Kz(e.DU(n))),e=this.qB(n.TU(s)),[s,e]}}if(n.DB(t.rU))return this.hU()?[t.eU,this]:[t.sU,this];if(this.HB())return n.HB()?this.XB().SU(n.XB()):([s,e]=this.XB().SU(n),[s.XB(),e.XB()]);if(n.HB())return[s,e]=this.SU(n.XB()),[s.XB(),e.XB()];s=t.sU}for(e=this;e.vU(n);){let i=x.max(1,x.floor(e.BB()/n.BB()));const r=x.ceil(x.log(i)/x.LN2),o=r<=48?1:2**(r-48);let h=t.iU(i),a=h.TU(n);for(;a.HB()||a._U(e);)i-=o,h=t.iU(i,this.hU()),a=h.TU(n);h.uU()&&(h=t.MU),s=s.Kz(h),e=e.qB(a)}return[s,e]}DU(t){return this.SU(t)[0]}EU(t){return this.SU(t)[1]}toString(i){const e=i||10;if(e<2||e>36)throw new RangeError("radix");if(this.uU())return"0";if(this.HB()){if(this.DB(t.rU)){const i=t.iU(e),s=this.DU(i),n=s.TU(i).qB(this);return s.toString(e)+n.gU().toString(e)}return"-"+this.XB().toString(e)}const s=t.iU(e**6,this.hU());let n=this,r="";for(;;){const t=n.DU(s);let i=(n.qB(t.TU(s)).gU()>>>0).toString(e);if(n=t,n.uU())return i+r;for(;i.length<6;)i="0"+i;r=String(i)+r}}constructor(t,i){this.cU=t,this.aU=i}};iu.sU=iu.tU(D.ZERO),iu.eU=iu.tU(D.UZERO),iu.MU=iu.tU(D.ONE),iu.NU=iu.tU(D.UONE),iu.IU=iu.tU(D.NEG_ONE),iu.oU=iu.$B(D.NEG_ONE,D.MAX_VALUE,!1),iu.nU=iu.$B(D.MAX_UNSIGNED_VALUE,D.MAX_UNSIGNED_VALUE,!0),iu.rU=iu.$B(D.ZERO,D.MIN_VALUE,!1),Qi(),r();var Io=class t{get JB(){return!isFinite(this.kU)}get sd(){return this.kU/this.Lj}static xU(i){return new t(x.ceil(i.kU),i.Lj)}static LU(i){return new t(x.floor(i.kU),i.Lj)}static CU(t,i){return t.FB(i)?t:i}static jU(t,i){return t.VB(i)?t:i}Kz(i){return this.Lj>=i.Lj?new t(this.kU+i.OU(this.Lj).kU,this.Lj):new t(this.OU(i.Lj).kU+i.kU,i.Lj)}UB(t){return t.WB(this)}FB(t){return t.VB(this)}GB(i){if(this.Lj>=i.Lj){const e=x.abs(this.kU-i.OU(this.Lj).kU),s=this.Lj;return new t(e,s)}return i.GB(this)}YB(t,i){return this.GB(t).VB(i)}QB(t){return function(t,i){return t.Lj>=i.Lj?Xv(t.kU,i.OU(t.Lj).kU):Xv(t.OU(i.Lj).kU,i.kU)}(this,t)}DB(t){return 0===this.QB(t)}WB(t){return this.QB(t)<0}VB(t){return this.QB(t)<=0}OU(i){return new t(this.kU*(i/this.Lj),i)}qB(i){return this.Lj>=i.Lj?new t(this.kU-i.OU(this.Lj).kU,this.Lj):new t(this.OU(i.Lj).kU-i.kU,i.Lj)}RU(i){return new t(this.kU*i,this.Lj)}constructor(t,i=1){this.kU=t,this.Lj=i}};Io.ed=new Io(1/6,1),Io.sU=new Io(0),Io.PU=new Io(1/0),Io.zU=1e6;var lo=class t extends AN{static BU(i,e){return void 0===e&&(e=Wc),t.iU(i*e,e)}static iU(i,e){return j(i)?t.UU:i===1/0?t.QU:i===-1/0?t.FU:new t(D.fromNumber(i),e)}static tU(i,e){return new t(i,e)}static YU(i){return t.BU(i.sd,Wc)}static VU(i){return new t(D.fromNumber(i.getTime()),1e3)}static CU(t,i){return t.FB(i)?t:i}static jU(t,i){return t.VB(i)?t:i}static GU(i,e,s){return t.CU(e,t.jU(s,i))}HB(){return this.zD.isNegative()}uU(){return 0!==this.Lj&&this.zD.isZero()}JB(){return 0===this.Lj&&!this.zD.isZero()}KB(){return 0===this.Lj&&this.zD.isZero()}BB(){if(0===this.Lj)return this.zD.isZero()?NaN:this.zD.isNegative()?-1/0:1/0;const t=this.zD.divide(this.Lj),i=this.zD.subtract(t.multiply(this.Lj));return t.toNumber()+i.toNumber()/this.Lj}fU(){if(0===this.Lj)throw new b("Failed to convert timestamp");return this.zD}WU(){return new Date(0===this.Lj?NaN:this.OU(1e3).zD.toNumber())}ZU(){return new Io(0===this.Lj?this.BB():this.zD.toNumber(),this.Lj)}OU(i,e){void 0===e&&(e=co.HU);const s=this.Lj;if(s===i)return this;if(0===s)return this;const n=Sf(s,i),r=function(t,i,e){const[s,n]=t.SU(i);if(n.uU())return s;if(e===co.HU)return n.HB()?s.qB(iu.MU):s;if(e===co.XU)return n.HB()?s:s.Kz(iu.MU);{const t=n.TU(iu.iU(2));return t.HB()?t.XB().WB(i)?s:s.qB(iu.MU):t.WB(i)?s:s.Kz(iu.MU)}}(iu.tU(this.zD).TU(iu.iU(i/n)),iu.iU(s/n),e);return new t(r.fU(),i)}QB(t){if(this===t)return $n.Zr;if(0===this.Lj||0===t.Lj)return yN(this,t);if(this.uU())return t.uU()?$n.Zr:t.HB()?$n.iy:$n.ey;if(t.uU())return this.HB()?$n.ey:$n.iy;const i=x.min(this.Lj,t.Lj),e=this.OU(i,co.qU).zD,s=t.OU(i,co.qU).zD;return e.compare(s)}XB(){return 0===this.Lj?function(t){0;return t.KB()?t:t.HB()?lo.QU:lo.FU}(this):new t(this.zD.negate(),this.Lj)}Kz(i){if(0===this.Lj||0===i.Lj)return function(t,i){0;if(t.KB()||i.KB())return lo.UU;if(t.JB()&&i.JB())return t.HB()===i.HB()?t:lo.UU;return t.JB()?t:i}(this,i);if(this.uU())return i;if(i.uU())return this;const e=x.max(this.Lj,i.Lj),s=this.OU(e,co.qU),n=i.OU(e,co.qU);return new t(s.zD.add(n.zD),e)}TU(i){if(this.KB()||j(i))return t.UU;if(this.JB()||!isFinite(i)){if(this.uU()||0===i)return t.UU;{const e=this.HB()?t.FU:t.QU;return i<0?e.XB():e}}return this.uU()?this:new t(0===i?D.ZERO:this.zD.multiply(i),this.Lj)}DU(i){if(this.KB()||j(i))return t.UU;if(this.JB())return isFinite(i)?0===i?1/i<0?this.XB():this:i<0?this.XB():this:t.UU;if(!isFinite(i))return new t(D.ZERO,this.Lj);if(this.uU())return 0===i?t.UU:new t(D.ZERO,this.Lj);if(0===i){const e=this.HB()?t.FU:t.QU;return 1/i<0?e.XB():e}return new t(this.zD.divide(i),this.Lj)}KU(){return[this.zD.low,this.zD.high,this.Lj]}constructor(t,i){super(),this.zD=t.toSigned(),this.Lj=i>>>0}};lo.sU=new lo(D.ZERO,Wc),lo.UU=new lo(D.ZERO,0),lo.QU=new lo(D.ONE,0),lo.FU=new lo(D.NEG_ONE,0),r(),Qi();var Nu=class t extends AN{static BU(i,e){return void 0===e&&(e=Wc),t.iU(i*e,e)}static iU(i,e){return j(i)?t.UU:i===1/0?t.QU:i===-1/0?t.FU:new t(BigInt(x.floor(i)),e)}static tU(i,e){return new t(BigInt(i.high)<<BigInt(32)|BigInt(i.low>>>0),e)}static YU(i){return t.BU(i.sd,Wc)}static VU(i){return t.iU(i.getTime(),1e3)}static get sU(){return t.JU||(t.JU=new t(BigInt(0),Wc)),t.JU}static get UU(){return t.$U||(t.$U=new t(BigInt(0),0)),t.$U}static get QU(){return t.tQ||(t.tQ=new t(BigInt(1),0)),t.tQ}static get FU(){return t.iQ||(t.iQ=new t(BigInt(-1),0)),t.iQ}static CU(t,i){return t.FB(i)?t:i}static jU(t,i){return t.VB(i)?t:i}static GU(i,e,s){return t.CU(e,t.jU(s,i))}HB(){return this.zD<BigInt(0)}uU(){return 0!==this.Lj&&this.zD===BigInt(0)}JB(){return 0===this.Lj&&this.zD!==BigInt(0)}KB(){return 0===this.Lj&&this.zD===BigInt(0)}BB(){if(0===this.Lj)return this.zD===BigInt(0)?NaN:this.zD<BigInt(0)?-1/0:1/0;const t=this.zD/BigInt(this.Lj),i=this.zD-t*BigInt(this.Lj);return Number(t)+Number(i)/this.Lj}fU(){if(0===this.Lj)throw new b("Failed to convert timestamp");return this.eQ()}eQ(){const t=this.zD&BigInt(4294967295),i=this.zD>>BigInt(32)&BigInt(4294967295);return D.fromBits(Number(t),Number(i))}WU(){return new Date(0===this.Lj?NaN:Number(this.OU(1e3).zD))}ZU(){return new Io(0===this.Lj?this.BB():Number(this.zD),this.Lj)}OU(i,e){void 0===e&&(e=co.HU);const s=this.Lj;if(s===i)return this;if(0===s)return this;const n=Sf(s,i),r=function(t,i,e){const s=t/i,n=t-s*i;if(n===BigInt(0))return s;if(e===co.HU)return n<BigInt(0)?s-BigInt(1):s;if(e===co.XU)return n<BigInt(0)?s:s+BigInt(1);{const t=n*BigInt(2);return t<BigInt(0)?-t<i?s:s-BigInt(1):t<i?s:s+BigInt(1)}}(this.zD*BigInt(i/n),BigInt(s/n),e);return new t(r,i)}QB(t){if(this===t)return $n.Zr;if(0===this.Lj||0===t.Lj)return yN(this,t);if(this.uU())return t.uU()?$n.Zr:t.HB()?$n.iy:$n.ey;if(t.uU())return this.HB()?$n.ey:$n.iy;const i=x.min(this.Lj,t.Lj),e=this.OU(i,co.qU).zD,s=t.OU(i,co.qU).zD;return e>s?$n.iy:e<s?$n.ey:$n.Zr}XB(){return 0===this.Lj?function(t){0;return t.KB()?t:t.HB()?Nu.QU:Nu.FU}(this):new t(-this.zD,this.Lj)}Kz(i){if(0===this.Lj||0===i.Lj)return function(t,i){0;if(t.KB()||i.KB())return Nu.UU;if(t.JB()&&i.JB())return t.HB()===i.HB()?t:Nu.UU;return t.JB()?t:i}(this,i);if(this.uU())return i;if(i.uU())return this;const e=x.max(this.Lj,i.Lj),s=this.OU(e,co.qU),n=i.OU(e,co.qU);return new t(s.zD+n.zD,e)}TU(i){if(this.KB()||j(i))return t.UU;if(this.JB()||!isFinite(i)){if(this.uU()||0===i)return t.UU;{const e=this.HB()?t.FU:t.QU;return i<0?e.XB():e}}return this.uU()?this:new t(0===i?BigInt(0):this.zD*BigInt(i),this.Lj)}DU(i){if(this.KB()||j(i))return t.UU;if(this.JB())return isFinite(i)?0===i?1/i<0?this.XB():this:i<0?this.XB():this:t.UU;if(!isFinite(i))return new t(BigInt(0),this.Lj);if(this.uU())return 0===i?t.UU:new t(BigInt(0),this.Lj);if(0===i){const e=this.HB()?t.FU:t.QU;return 1/i<0?e.XB():e}return new t(this.zD/BigInt(i),this.Lj)}KU(){const t=this.eQ();return[t.low,t.high,this.Lj]}constructor(t,i){super(),this.zD=BigInt.asIntN(64,t),this.Lj=i>>>0}};Nu.JU=void 0,Nu.$U=void 0,Nu.tQ=void 0,Nu.iQ=void 0;var co=function(t){return t[t.HU=0]="HU",t[t.XU=1]="XU",t[t.qU=2]="qU",t}({}),H=function(){try{return"function"==typeof BigInt&&"bigint"==typeof BigInt(0)}catch(t){return!1}}()?Nu:lo;function NN(t,i){return t.QB(i)}function IN(t,i){return void 0!==t?void 0!==i?H.jU(t,i):t:i}r(),ds();var DN=9e4,EN=di((()=>H.iU(8589934592,DN))),kN=di((()=>EN().DU(2)));r();var xN={sQ:0,nQ:1/0,rQ:0};Qi();var LN=6,CN=["WEBVTT","WEBVTT ","WEBVTT\t","WEBVTT\n"],jN=[" ","\t","\n","\f","\r"],ON=/^\d*$/,RN=/.*[0-9]+.*/,PN=/^[\d.-]+$/,zN=/(^\.|\.$)/,BN=/(\D\.|\.\D)/;function UN(t,i,e){void 0===i&&(i=xN),void 0===e&&(e=!0);return QN(lm(Al(t),new da),i,e)}function QN(t,i,e){void 0===i&&(i=xN),void 0===e&&(e=!0);const s={L:[],oQ:[],hQ:[]},n=FN(t),r=new da;if(tI(n),YN(n,(t=>"\n"!==t),r),r.tc>=n.length)return s;if(r.Gb(1),"\n"!==n.charAt(r.tc)){HN(VN(n,r,false,!0,s,i,e),s)}else r.Gb(1);for(YN(n,(t=>"\n"===t),r);r.tc<n.length;){HN(VN(n,r,false,!1,s,i,e),s),YN(n,(t=>"\n"===t),r)}return s}function FN(t){const i=sr(t,"\0"," "),e=sr(i,"\r\n","\n");return sr(e,"\r","\n")}function YN(t,i,e){const s=e.tc;for(;e.tc<t.length&&i(t.charAt(e.tc));)e.Gb(1);return t.substring(s,e.tc)}function VN(t,i,e,s,n,r,o){let h,a=0,u=i.tc,c="",l=!1,d=!1,f=null,g=null,_=null;for(;!l;)if(h=YN(t,(t=>"\n"!==t),i),a++,i.tc>=t.length?l=!0:i.Gb(1),_t(h,"--\x3e")){if(s||1!==a&&(2!==a||d)){i.Wb(u);break}d=!0,u=i.tc,f=new Ht(0,0,"",!1,c);try{XN(h,n.oQ,f,r,o),c=""}catch(t){Fe.uA(t),f=null}}else{if(""===h)break;s&&Et(h,"X-TIMESTAMP-MAP")&&(n.aQ=GN(h)),s||2!==a||e||(Cv("STYLE",c.replace(/ /g,""))?(g={YA:JS.aB},c=""):Cv("REGION",c.replace(/ /g,""))&&(_=new pN("",100,3,0,100,0,100,""),c="")),c&&(c+="\n"),c+=h,u=i.tc}if(f)return f.U=c,f;if(g);else if(_)return function(t,i){const e=t.split(/\s/),s=":";for(const t of e)if(0!==t.length&&_t(t,s)&&t.charAt(0)!==s&&t.charAt(t.length-1)!==s){const e=t.indexOf(s),n=t.substring(0,e),r=t.substring(e+1,t.length);switch(n.toUpperCase()){case"ID":dI(r,i);break;case"WIDTH":_I(r,i);break;case"LINES":gI(r,i);break;case"REGIONANCHOR":{const t=lI(r);t&&(i.CB=t[0],i.jB=t[1]);break}case"VIEWPORTANCHOR":{const t=lI(r);t&&(i.RB=t[0],i.PB=t[1]);break}case"SCROLL":fI(r,i)}}}(c,_),_;return null}function GN(t){const i=t.split("=")[1].trim().split(","),e=ZN(i[0].trim(),"MPEGTS")?i[0]:i[1],s=ZN(i[0].trim(),"LOCAL")?i[0]:i[1];var n;return{uQ:WN(Number(e.split(/:(.*)/)[1].trim())||0),lh:H.BU(null!=(n=JN(s.split(/:(.*)/)[1].trim(),new da))?n:0)}}function WN(t){return H.iU(t,DN)}function ZN(t,i){return Et(t,i)}function HN(t,i){t&&function(t){return"cue"===t.YA}(t)?i.L.push(t):t&&function(t){return"region"===t.YA}(t)?i.oQ.push(t):t&&function(t){return"stylesheet"===t.YA}(t)&&i.hQ.push(t)}function XN(t,i,e,s,n){const r=new da;eI(t,r);const o=qN(JN(t,r),s,n);if(eI(t,r),"--\x3e"!==t.substring(r.tc,r.tc+3))throw b("Something went wrong with parsing a WebVTT Cue");r.Gb(3),eI(t,r);const h=qN(JN(t,r),s,n);e.kB(o,h);!function(t,i,e){const s=t.split(/\s/),n=":";for(const t of s)if(0!==t.length&&_t(t,n)&&t.charAt(0)!==n&&t.charAt(t.length-1)!==n){const s=t.indexOf(n),r=t.substring(0,s),o=t.substring(s+1,t.length);switch(r.toUpperCase()){case"REGION":hI(o,i,e);break;case"VERTICAL":uI(o,i);break;case"D":cI(o,i);break;case"LINE":case"L":rI(o,i);break;case"POSITION":case"T":oI(o,i);break;case"SIZE":case"S":aI(o,i);break;case"ALIGN":case"A":nI(o,i)}}}(t.substring(r.tc,t.length),e,i)}function qN(t,i,e){return e?t+i.sQ:t}function KN(t){return/^[0-9]$/.test(t)}function JN(t,i){const e=sr(t,",",".");let s,n,r,o=!1;if(i.tc>=e.length||!KN(e.charAt(i.tc)))throw new b("Something went wrong with parsing a WebVTT Cue timestamp");const h=YN(e,KN,i),a=C(h,10);if((h.length>2||a>59)&&(o=!0),i.tc>=e.length||":"!==e.charAt(i.tc))throw new b("Something went wrong with parsing a WebVTT Cue timestamp");i.Gb(1);const u=YN(e,KN,i);if(2!==u.length)throw new b("Something went wrong with parsing a WebVTT Cue timestamp");const c=C(u,10);if(o||i.tc<e.length&&":"===e.charAt(i.tc)){if(i.tc>=e.length||":"!==e.charAt(i.tc))throw new b("Something went wrong with parsing a WebVTT Cue timestamp");i.Gb(1);const t=YN(e,KN,i);if(2!==u.length)throw new b("Something went wrong with parsing a WebVTT Cue timestamp");s=a,n=c,r=C(t,10)}else s=0,n=a,r=c;if(i.tc>=e.length||"."!==e.charAt(i.tc))throw new b("Something went wrong with parsing a WebVTT Cue timestamp");i.Gb(1);const l=YN(e,KN,i),d=C(l,10);if(c>59||r>59)throw new b("Something went wrong with parsing a WebVTT Cue timestamp");return 60*s*60+60*n+r+d/1e3}function $N(t){return tI(FN(t))}function tI(t){if(t.length<LN)return!1;for(const i of CN)if(Et(t,i))return!0;return!1}function iI(t){return Qa(jN,t)}function eI(t,i){for(;i.tc<t.length&&iI(t.charAt(i.tc));)i.Gb(1)}function sI(t){const i=t.lastIndexOf("%");if(i>-1){const e=S(t.substring(0,i));if(!j(e)&&e>=0&&e<=100)return e}return null}function nI(t,i){const e=t.toLowerCase();switch(e){case"start":case"center":case"end":case"left":case"right":i.fB=e;break;case"middle":i.fB="center"}}function rI(t,i){let e,s;const n=t.indexOf(",");if(n>=0?(e=t.substring(0,n),s=t.substring(n+1,t.length)):(e=t,s=""),!RN.test(e))return;let r,o;if(rl(e,"%")){const t=sI(e);if(null===t)return;r=t,o=!1}else{if(!PN.test(e)||e.lastIndexOf("-")>0)return;const t=e.indexOf(".");if(t>=0&&(t!==e.lastIndexOf(".")||!BN.test(e)||zN.test(e)))return;if(r=S(e),j(r))return;o=!0}switch(i.gB=r,i.mB=o,s=s.toLowerCase(),s){case"start":case"center":case"end":i._B=s;break;case"middle":i._B="center"}}function oI(t,i){let e,s;const n=t.indexOf(",");n>=0?(e=t.substring(0,n),s=t.substring(n+1,t.length)):(e=t,s="");const r=sI(e);if(null!==r)switch(i.uo=r,s=s.toLowerCase(),s){case"line-left":case"center":case"line-right":case"auto":i.vB=s;break;case"start":i.vB="line-left";break;case"middle":i.vB="center";break;case"end":i.vB="line-right"}}function hI(t,i,e){const s=No(e,(i=>i.o===t));void 0!==s&&(i.wB=s)}function aI(t,i){const e=sI(t);null!==e&&(i.Kb=e)}function uI(t,i){switch(t.toLowerCase()){case"rl":case"vertical:rl":case"vertical-rl":i.Pt="rl";break;case"lr":case"vertical:lr":case"vertical-lr":i.Pt="lr";break;default:i.Pt=""}}function cI(t,i){"VERTICAL"===t.toUpperCase()?i.Pt="rl":"VERTICAL-LR"===t.toUpperCase()&&(i.Pt="lr")}function lI(t){if(t.indexOf(",")>=0){const i=sI(t.substring(0,t.indexOf(","))),e=sI(t.substring(t.indexOf(",")+1,t.length));return[ur(i||0,0,100),ur(e||100,0,100)]}return null}function dI(t,i){i.o=t}function fI(t,i){"up"===t.toLowerCase()&&(i.OB="up")}function gI(t,i){ON.test(t)&&(i.LB=C(t))}function _I(t,i){const e=sI(t);null!==e&&(i.ji=e)}function vI(t){return t&&"ZD"in t?t.ZD:t}r(),r(),r();var wI=class extends dN{get cQ(){return this.lQ}get dQ(){return this.fQ}get oQ(){return this.gQ}get _Q(){return this.vQ}get ga(){return this.Za||(this.Za=function(t){return fe(Ft(t),{get extent(){return t.cQ},get styles(){return t.dQ},get regions(){return t.oQ},get metadata(){return vI(t._Q)},get content(){return vI(t.U)}})}(this)),this.Za}EB(t){return!!ns(this.cQ,t.cQ)&&(!!ns(this.dQ,t.dQ)&&(!!ns(this.oQ,t.oQ)&&(this._Q&&t._Q?!!this._Q.BD(t._Q)&&(this.U&&t.U?this.U.BD(t.U):this.U===t.U):this._Q===t._Q)))}constructor(t,i,e,s,n,r,o,h){super(t,i,e,s),this.lQ=n,this.fQ=r,this.gQ=o,this.vQ=h||void 0}};r();var mI=class{get wQ(){return this.R_.UD(!0)}get lB(){return this.mQ}get dB(){return this.pQ}constructor(t,i,e){this.mQ=t,this.pQ=i,rr(e)?this.R_=function(t,i,e){for(const t of["begin","end","dur"])e.$D(t);return e}(0,0,e):this.R_=e}};Qi(),r();var pI="http://www.w3.org/XML/1998/namespace";function AI(t,i,e,s){let n=t.WD(e,i);return 0===n.length&&(n=t.VD(s+":"+i)),n}function yI(t){const i={};for(const e of t.XD)i[e.jD]=e.zD;return i}var bI=/^(\d\d+):(\d\d):(\d+)((\.(\d+))?|(:(\d\d+)(\.(\d+))?))$/,MI=/^(\d+)(\.(\d+))?(h|m|s|ms|f|t)$/,TI="http://www.w3.org/ns/ttml";function SI(t,i,e,s){void 0===e&&(e=xN),void 0===s&&(s=Xh.APPLICATION_TTML_XML);let n=[];const r=Al(t);return s===Xh.APPLICATION_MP4?n=function(t,i,e){const s=Rs.dj(t),n=cT(s,Rt.SC);if(!n)return[];return DI(Al(n.rI),i,e)}(r,i,e):s===Xh.APPLICATION_TTML_XML&&(n=DI(r,i,e)),n}function NI(t,i,e){return void 0===e&&(e=xN),EI(t,i,e)}function II(t,i){const e=RI(i.wQ),s={};for(const i of e)s[i]=t[i];return s}function DI(t,i,e){return EI(lm(t,new da),i,e)}function EI(t,i,e){const s=[];let n;try{n=Fe.CD(t)}catch(t){return s}const r=n.sE;if("tt"!==r.jD)return s;const o=r.WD(TI,"head")[0],h=r.WD(TI,"body")[0];if(!h||!o)return s;const a=xI(r.KD("tts:extent")),u=a?{width:a[0],height:a[1]}:void 0,c=function(t){const i={},e=t.WD(TI,"styling")[0],s=e&&e.WD(TI,"style")||[];for(const t of s){i[t.JD(pI,"id")]=yI(t)}return i}(o),l=function(t){const i={},e=t.WD(TI,"layout")[0],s=e&&e.WD(TI,"region")||[];for(const t of s){const e=t.JD(pI,"id");if(!e)continue;i[e]=yI(t);const s=OI(t);for(const t in s)no.call(s,t)&&(i[e][t]=s[t])}return i}(o),d=a?function(t,i){const e=P(t);for(const t of _.keys(e)){const s=xI(e[t].extent);if(s){const n=kI(s[0],i[0]),r=kI(s[1],i[1]);e[t].extent=n+" "+r}const n=xI(e[t].origin);if(n){const s=kI(n[0],i[0]),r=kI(n[1],i[1]);e[t].origin=s+" "+r}}return e}(l,a):l,f=o.WD(TI,"metadata")[0],g=LI(h,e.sQ,e.nQ,e.rQ);for(const t of g){const i=II(d,t);s.push(new wI(t.lB,t.dB,t.wQ,!1,u,c,i,f))}return s}function kI(t,i){return t/i*100+"%"}function xI(t){if(!t)return;const i=t.split(" ",2);if(2!==i.length)return;const[e,s]=i;if(!rl(e,"px")||!rl(s,"px"))return;return[Number(e.slice(0,-2)),Number(s.slice(0,-2))]}function LI(t,i,e,s){let n,r=i,o=e,h=[];const a=[];if(rr(t)){var u,c;r=null!=(u=jI(t.KD("begin"),s))?u:r,n=jI(t.KD("dur"),0),o=null!=(c=jI(t.KD("end"),s))?c:void 0!==n?r+n:o;const i=t.QD;for(let e=0;e<i.length;e++)("body"===t.jD||"div"===t.jD)&&i[e].LD>1||(h=h.concat(LI(i[e],r,o,s)))}const l=function(t,i,e){const s=[];s.push(t,i);for(const t of e)s.push(t.lB,t.dB);s.sort(To);let n=s.length;for(let t=0;t<n-1;t++)s[t+1]===s[t]&&(Mn(s,t+1),t--,n=s.length);return s}(r,o,h);for(let i=0;i<l.length-1;i++){const e=CI(l[i],l[i+1],h);if(e.length<=0&&PI(t)){const e=t.UD(!1);a.push(new mI(l[i],l[i+1],e))}else if(e.length>0){const s=t.UD(!1);e.forEach((t=>s.HD(t.wQ))),a.push(new mI(l[i],l[i+1],s))}}return a}function CI(t,i,e){const s=[];for(let n=0;n<e.length;n++){const r=e[n].lB,o=e[n].dB;(r>=t&&o<=i||r<i&&o>=i||r<t&&o>t)&&s.push(e[n])}return s}function jI(t,i){if(t){if(bI.test(t)){const e=bI.exec(t);if(!e)return;const s=Number(e[1])||0,n=Number(e[2])||0,r=Number(e[3])||0,o=e[6];return 3600*s+60*n+r+(o?Number(o)*.1**o.length:0)+i}if(MI.test(t)){const e=MI.exec(t);if(!e)return;const s=Number(e[1]);let n;switch(e[4]){case"h":n=3600*s;break;case"m":n=60*s;break;case"s":n=s;break;case"ms":n=.001*s;break;default:n=NaN}return n+i}}}function OI(t){const i={},e=t.VD("style")||[];for(const t of e){const e=yI(t);for(const t in e)no.call(e,t)&&(i[t]=e[t])}return i}function RI(t){let i,e=[];if(rr(t)){i=t.KD("region"),i&&e.push(i);const s=t.QD;for(let t=0;t<s.length;t++)e=e.concat(RI(s[t]))}return e}function PI(t){if(rr(t)){const i=t.jD.toUpperCase(),e=Boolean(t.KD("smpte:backgroundImage"));return"BR"===i||e}return t.LD===Yo.ON}function zI(t){const i=function(t){try{return Fe.CD(t).sE}catch(t){}}(t);return"tt"===(null==i?void 0:i.jD)}r(),r();var Cc=class extends Kn{tt(t){return super.tt(t)}it(t){const i=super.it(t);return i&&(t.UI=lc.Ch),i}ma(){return xM(this)}};r(),r();var z=function(t){return t.AQ="subtitles",t.yQ="captions",t.bQ="descriptions",t.Fn="chapters",t.MQ="metadata",t.TQ="thumbnails",t}({}),BI=["subtitles","captions","descriptions","chapters","metadata","thumbnails"];function UI(t){return"string"==typeof t&&Qa(BI,t)}function QI(t,i){return!(!UI(t)||!UI(i))&&(t===i||"subtitles"===t&&"captions"===i||"captions"===t&&"subtitles"===i)}r();var FI=class extends qi{constructor(t,i,e,s,n){super(t,i,n),this.url=e,this.status=s}};function YI(t){return t===z.AQ||t===z.yQ}function VI(t){return t.some(GI)}function GI(t){return _t(t,"stpp")}function WI(t){return t.some(ZI)}function ZI(t){return _t(t,"vtt")||_t(t,"wvtt")}function yl(t,i){return HA(t)&&WI(i)}function HI(t,i){return t===z.TQ||t===z.MQ&&i===z.TQ}function XI(t,i,e,s){for(const n of t.L.Ix){if(n.lB>e)break;i<=n.dB&&!Qa(s,n)&&s.push(n)}}function qI(t,i){return jl(t.Gx,i.Gx)}function KI(t,i,e,s){const n=function(t){switch(t){case El.WEBVTT:return"WebVTT";case El.SRT:return"SRT";case El.TTML:return"TTML";default:return""}}(t);return new FI(vt.SUBTITLE_PARSE_ERROR,"Could not parse the "+(n?n+" ":"")+"subtitle file.",i,e,s)}function JI(t,i){const e=[];for(const s of t.L.Ix)if(s.dB<=i)e.push(s);else if(s.lB>=i)break;for(const i of e)t.SQ(i)}function $I(t,i){if(t.V>0){const e=t.Cn(0),s=x.max(0,e-10);for(const t of i)t.NQ(s)}}var tD=class extends tu{tt(t){t.yn(yo.aa,this.IQ),this.Z.tt(t),this.DQ(t)}it(t){t.fn(yo.aa,this.IQ),t.UI=lc.Ch,this.Z.it(t)}EQ(t){}kQ(t){}DQ(t){t.UI!==lc.Ch?this.EQ(t):this.kQ(t)}xQ(){for(const t of this.Z.Ix)t.fn(yo.aa,this.IQ),t.gn()}NQ(t){if(t>0)for(const i of this.Z.Ix)JI(i,t)}tr(){return this.xQ(),this.Z.tr(),Promise.resolve()}async gn(){this.Bo(),await this.tr(),this.Z.gn()}constructor(...t){super(...t),this.Z=new Cc,this.IQ=t=>{const i=t.Ht;this.DQ(i)}}};r();var iD=class extends ua{get error(){return this.errorObject.message}ma(){return this}constructor(t){super(Me.ua),this.errorObject=t}},dr=class extends tD{LQ(t){if(!t.src)return;const i=t.kind||z.AQ,e=this.CQ.Wk(i,t.id,t.label,t.srclang,t.default);return e.$x=qs(t.src),this.tt(e),e}async jQ(t,i){t.fk=Ma.LOADING;const e=new Gs({zu:t.$x,oI:Ee.ON,LI:Ve.GET,ly:i});let s,n;try{const t=await this.OQ.hI(e);n=t.nI,s=await t.UN()}catch(i){return X(i),t.fk=Ma.ERROR,void t.yo(new iD(function(t,i){let e=i,s=0;if(jb(t)&&t.name===wt.KI)e=t.hI.zu;else if(Ob(t)){const i=t.iD;if(e=i.lI,s=i.nI,0===s)return new FI(vt.SUBTITLE_CORS_ERROR,"Could not load the subtitle file. Make sure the source is set correctly and that CORS support is enabled.",e,s,t)}return new FI(vt.SUBTITLE_LOAD_ERROR,"Could not load the subtitle file.",e,s,t)}(i,t.$x)))}try{const i=function(t){return $N(t)?El.WEBVTT:zI(t)?El.TTML:El.SRT}(s);t.YA=i;let e=[];if(i===El.WEBVTT||i===El.SRT){e=QN(s).L}else i===El.TTML&&(e=NI(s,t));for(const i of e)t.RQ(i)}catch(i){return X(i),t.fk=Ma.ERROR,void t.yo(new iD(KI(t.YA,t.$x,n,i)))}t.fk=Ma.LOADED}EQ(t){Qa(this.Z.Ix,t)&&t.fk===Ma.NONE&&this.jQ(t,this.zQ.ly).catch(Ct)}$n(){}async tr(){this.zQ.Ty(),this.zQ=new Wt;for(const t of this.Z.Ix)this.CQ.BQ(t);await super.tr()}constructor(t,i){super(),this.zQ=new Wt,this.CQ=t,this.OQ=i}};function eD(t,i){for(const e of t)if(e.Lt===i&&e.UQ)return e}function sD(t,i){nD(eD(t.Ix,i))}function nD(t){void 0!==t&&(t.UI=lc.Jn)}function rD(t,i){const e=eD(t.Ix,i)||function(t,i){for(const e of t)if(e.Lt===i)return e}(t.Ix,i);nD(e)}function oD(t){for(const i of BI)i===z.Fn?rD(t,i):sD(t,i)}r(),il(),r();var hD=class extends Jr{constructor(){super(Zi.yb)}};r(),r();var uh=function(t){return t[t.QQ=0]="QQ",t[t.FQ=1]="FQ",t}({});r(),r();var Ai=class extends Jr{constructor(t){super(E.rP),this.currentTime=t}};r();var te=class extends Jr{constructor(t){super(E.oP),this.currentTime=t}},aD=[E.wx,E.oP,Zi.so,Zi.wb],uo=class extends tu{YQ(t){!this.VQ&&t>=Fn.Xn&&(this.VQ=!0,this.yo(new yu(this.GQ.xE,t)))}WQ(t){!this.ZQ&&t>=Fn.Iz&&(this.ZQ=!0,this.yo(new Cu(this.GQ.xE,t)))}HQ(t){this.XQ||(t>=Fn.Dz&&this.qQ<Fn.Dz&&!this.GQ.KE||this.KQ&&t>=Fn.Dz)&&this.yo(new te(this.GQ.xE))}JQ(t){!this.$Q(t)||this.GQ.OE||this.GQ.lt||this.yo(new Ai(this.GQ.xE))}tF(t){this.qQ<=Fn.Iz&&t>=Fn.Dz&&this.yo(new AS(this.GQ.xE,t))}maybeDispatchCanPlayThroughEvent(t){t===Fn.Ez&&this.yo(new Eu(this.GQ.xE,t))}$Q(t){const i=!this.GQ.KE&&t<=Fn.Iz,e=!this.iF&&this.qQ<=Fn.Iz;return i&&!e}get KQ(){return!this.GQ.KE&&this.iF}tr(){this.qQ=Fn.Nz,this.iF=!0,this.ZQ=!1,this.VQ=!1}gn(){this.Bo(),this.XQ&&this.GQ.fn(E.oP,this.eF),this.GQ.fn(Zi.so,this.sF),this.GQ.fn(Zi.wb,this.nF),this.GQ.fn(E.wx,this.rF)}constructor(t,i=!1){super(),this.GQ=t,this.XQ=i,this.qQ=Fn.Nz,this.iF=!0,this.ZQ=!1,this.VQ=!1,this.rF=t=>{const i=this.GQ.fk;i!==this.qQ&&this.yo(new Yu(t.currentTime,i)),i===Fn.Nz&&(this.ZQ=!1,this.VQ=!1),this.YQ(i),this.WQ(i),this.tF(i),this.maybeDispatchCanPlayThroughEvent(i),this.HQ(i),this.JQ(i),this.qQ=i},this.sF=()=>{this.JQ(this.qQ),this.HQ(this.qQ),this.iF=this.GQ.KE},this.nF=()=>{this.iF=this.GQ.KE},this.eF=t=>{this.yo(new te(t.currentTime))},this.GQ.yn(E.wx,this.rF),this.GQ.yn(Zi.so,this.sF),this.GQ.yn(Zi.wb,this.nF),this.XQ&&this.GQ.yn(E.oP,this.eF)}},uD=class extends tu{get xE(){return this.GQ.xE}get OE(){return this.GQ.OE}get lt(){return this.GQ.lt}get KE(){return this.GQ.KE}get fk(){return this.GQ.fk}wy(){this.Bo(),this.GQ.fn(aD,this.Ds)}constructor(t){super(),this.GQ=t,this.GQ.yn(aD,this.Ds)}};r(),r(),r(),r(),Qi();var cD=class{oF(){return this.hF}aF(t){this.hF=t}get wE(){return this.OQ}get uF(){return!1}get cF(){const t=this.lF.certificate;if(t)return Ic(t)?Zn(t):Tc(t)}dF(){return this.lF.licenseAcquisitionURL||this.oF()}get fF(){return!1}gF(t){return Promise.resolve()}_F(t,i){return Promise.resolve(void 0)}get zI(){return Boolean(this.lF.useCredentials)}async vF(t,i,e,s){const n=this.wF(t,i,e,s);if(""===n.zu)throw new lu(vt.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The license request URL has not been correctly configured.");try{const t=await this.wE.hI(n);return await t.QN(i)}catch(t){return X(t),void await this.mF(t,n.zu,s)}}wF(t,i,e,s){const n=this.pF().RN(),r=this.zI,o={zu:this.AF(),oI:i,aI:n,GN:t,zI:r,LI:Ve.POST,CI:0,ly:s,YA:ar.vI,OI:e};return new Gs(o)}yF(t,i){return Promise.resolve(t)}bF(t,i,e,s){return Promise.resolve(t)}pF(){return new Rh(this.lF.headers||{})}async mF(t,i,e){throw new lu(vt.CONTENT_PROTECTION_LICENSE_ERROR,"Error during license server request",t)}AF(t,i){let e=i;const s=this.lF.queryParameters;if(!e){const t=this.dF();if(!t)return"";e=t}if(s||t){const i=Fe.Ah(e);t&&vb(i,t),s&&vb(i,s),e=i.href}return e}MF(t,i){return lD(t)}TF(t){return new T(t)}async SF(t,i,e){const s=await this.MF(t,e),n=await this.vF(s,this.NF,i,e);return this.TF(n)}gn(){}constructor(t,i,e,s,n){this.hF=void 0,this.NS=t,this.IF=i,this.DF=e,this.OQ=s,this.NF=n,this.lF=this.EF(i)}};function lD(t){return Promise.resolve(Wa(t).buffer)}var Ut=class extends cD{EF(t){return t.widevine||{}}async kF(t,i){return this.cF?this.cF:this.xF(new T(t),i)}xF(t,i){return super.SF(t,cl.AI,i)}constructor(t,i,e,s){super(Iv,t,i,e,s)}};r(),Qi();var dD=function(t){return t.BA="Widevine",t.LF="PlayreadyV2",t.CF="PlayreadyV3",t.zA="PlayreadyV2",t.QA="Fairplay",t}({}),fD={Widevine:{DRMProvider:"Google",DRMVersion:"1.4.8.86",DRMType:"Widevine"},PlayreadyV2:{DRMProvider:"Microsoft",DRMVersion:"2.9",DRMType:"Playready"},PlayreadyV3:{DRMProvider:"Microsoft",DRMVersion:"3",DRMType:"Playready"},Fairplay:{DRMProvider:"Apple",DRMType:"FairPlay",DRMVersion:"1.0"}};function gD(t,i){var e,s,n,r;const o=fD[i],h=t.accountName;return{CustomerName:t.customerName,AccountName:h,PortalId:t.portalId,FriendlyName:t.friendlyName,DeviceInfo:{FormatVersion:"1",DeviceType:"PC",OSType:null==(e=Fe.bA)?void 0:e.Ys,OSVersion:null==(s=Fe.bA)?void 0:s.LA,DRMProvider:o.DRMProvider,DRMVersion:o.DRMVersion,DRMType:o.DRMType,DeviceVendor:null==(n=Fe.bA)?void 0:n.CA,DeviceModel:null==(r=Fe.bA)?void 0:r.jA}}}function _D(t,i){if(!t.accountName)throw new lu(vt.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium "+i+" DRM configuration, accountName is not set.");if(!t.customerName)throw new lu(vt.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium "+i+" DRM configuration, customerName is not set.");if(!t.portalId)throw new lu(vt.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium "+i+" DRM configuration, portalId is not set.");throw new lu(vt.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium "+i+" DRM configuration.")}function vD(t,i,e){let s;if(TT(t))s={AuthToken:t.authToken,Payload:i};else{if(!ST(t))throw _D(t,e);s={LatensRegistration:gD(t,e),Payload:i}}return Nl(JSON.stringify(s))}async function wD(t,i,e){const s=t.iD;if(!s)throw new lu(vt.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Titanium server request",t,i);const n=s;let r,o;try{r=await n.BN(e),o=function(t){if(t){if(t.WvProxyErr)return t.WvProxyErr.desc;if(t.DrmErr)return t.DrmErr.desc}return}(r)}catch(t){o=""}throw new lu(vt.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Titanium server request",t,n.hI.zu,n.nI,n.uI,o)}r(),Qi();var mD=class extends Ut{static jF(){return Fe.Ys.Ep?"required":"optional"}mF(t,i,e){return wD(t,i,e)}gF(t){return this.OF?Ao(this.OF.rM,t):(this.OF=new xh,Promise.resolve())}async MF(t,i){const e=this.IF;if(!e)throw new lu(vt.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium Widevine DRM configuration.");return vD(e,gc(t),dD.BA)}TF(t){let i;if(!t.license)throw new lu(vt.CONTENT_PROTECTION_LICENSE_INVALID,"Could not process the response from the Titanium Widevine license server");return i=Zn(t.license),i}RF(t){return Promise.resolve(new T(t))}async kF(t,i){this.PF();const e=await this.MF(t,i),s=await this.vF(e,Ee.LN,cl.yI,i);return await this.RF(s)}async xF(t,i){const e=await super.xF(t,i);return this.PF(),e}PF(){this.OF||(this.OF=new xh),this.OF.sM()}gn(){this.OF&&this.OF.Ty(),super.gn()}constructor(t,i,e){super(t,i,e,Ee.CN),this.OF=void 0}};r();var pD=class extends Ut{get zF(){if(NT(this.IF))return this.IF.token}async MF(t,i){const e=await lD(t),s=this.DF,n=gm(new T(e)),r=this.zF;if(void 0===r)throw new lu(vt.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The Widevine vuDRM token has not been correctly configured.");return JSON.stringify({token:r,drm_info:n,kid:s})}constructor(t,i,e){super(t,i,e,Ee.LN),this.aF("https://widevine-proxy.drm.technology/proxy")}};function AD(t,i){let e=i||{};return t.ticket&&t.sessionId&&(e=Ei({},e,{SessionId:t.sessionId,Ticket:t.ticket})),Ei({},e,{CrmId:t.crmId,AccountId:t.accountId,ContentId:t.contentId})}r(),r();var yD=class extends Ut{AF(t,i){let e=t;return yT(this.IF)&&(e=AD(this.IF,e)),super.AF(e,i)}constructor(t,i,e){super(t,i,e,Ee.LN),this.aF("https://emeademo.dev.ott.irdeto.com/Widevine/getlicense")}};r(),r();var bD="Conax-Custom-Data";function MD(t,i,e){const s=t&&AT(t)&&t;if(s&&!e.has(bD)){const t=nT(s)?s.token:void 0,n=nT(s)?s.deviceId:void 0,r=JSON.stringify({Version:"1.0.0",CxAuthenticationDataToken:t,CxClientInfo:{DeviceType:"Browser",DrmClientType:i+"-HTML5",DrmClientVersion:"1.0.0",CxDeviceId:n}});e.set(bD,r)}return e}var TD=class extends Ut{pF(){const t=super.pF();return MD(this.IF,"Widevine",t)}constructor(t,i,e){super(t,i,e,Ee.LN),this.aF("https://connect.conax.com:8094/license")}};function SD(t){const i=om(new T(t));return Zn(JSON.parse(i).license)}function ND(t){return"string"==typeof t.token?t.token:Nl(JSON.stringify({userId:t.userId,sessionId:t.sessionId,merchant:t.merchant}))}function ID(t,i,e){let s;return s=e.token?"x-dt-auth-token":"dt-custom-data",t.set(s,i),t}r(),r();var DD=class extends Ut{get zF(){return ND(this.IF)}TF(t){return SD(t)}pF(){return ID(super.pF(),this.zF,this.IF)}constructor(t,i,e){super(t,i,e,Ee.LN),this.aF("https://lic.drmtoday.com/license-proxy-widevine/cenc/")}};r();var ED=class extends Ut{pF(){const t=super.pF(),i=this.IF.token;return t.set("Authorization","Bearer "+i),t}constructor(t,i,e){super(t,i,e,Ee.LN)}};async function kD(t,i,e,s){if(!IT(t))throw new lu(vt.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Xstream DRM Configuration");const n=new Rh;n.append("Cache-Control","no-cache"),n.append("Content-Type","application/json");const r=t.sessionId;r&&n.append("XSSESSION",r);const o=t.streamId;let h;h=t.fairplay?"persistent"===t.fairplay.licenseType?"persistent":"non-persistent":t.widevine&&"persistent"===t.widevine.licenseType?"persistent":"non-persistent";const a={drmType:i,licenseType:h,streamId:o},u={zu:t.ticketAcquisitionURL,oI:Ee.CN,aI:n,LI:Ve.POST,GN:JSON.stringify(a),ly:s},c=await e.hI(u);return await c.BN()}r(),r();var xD=class extends Ut{pF(){const t=super.pF();return t.set("Content-Type","application/json"),t}async MF(t,i){const e=Tm(t.buffer),s=this.IF,n=await kD(s,"widevine_modular",this.wE,i);this.aF(n.licenseServerUrl);const r=Ml(JSON.stringify({payload:e,ticket:n.ticket}));return super.MF(r,i)}TF(t){return Zn(t.license)}constructor(t,i,e){super(t,i,e,Ee.CN)}};r();var LD=class extends Ut{pF(){if(!zc(this.IF))throw new lu(vt.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Axinom configuration");const t=super.pF();return t.set("X-AxDRM-Message",this.IF.token),t}constructor(t,i,e){super(t,i,e,Ee.LN)}};function CD(t){const i=new T(2*t.length);for(let e=0;e<t.length;e+=1)i[2*e]=t.charCodeAt(e),i[2*e+1]=0;return i}r(),Qi();var Lt=class extends cD{EF(t){return t.playready||{}}pF(){const t=new Rh(this.BF);return t.zN(super.pF()),t}UF(t){return t.length>=1&&t[0].QD.length>0}_F(t){const i=this.IF.playready.customData;if(i){const t=CD(i),e=CD('<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">'+gc(t)+"</CustomData></LicenseAcquisition></PlayReadyCDMData>");return Promise.resolve({playready:{VS:e}})}return super._F(t)}async MF(t,i){const e=await lD(t);return this.QF(e)}async QF(t){var i,e;let s=null;const n=Tl(new DataView(t),new da,!0);let r;try{r=Fe.CD(n)}catch(t){return s}const o=null==(i=r.VD("PlayReadyKeyMessage")[0])?void 0:i.VD("LicenseAcquisition")[0];var h;const a=null!=(h=null==o?void 0:o.VD("Challenge"))?h:[];this.UF(a)&&(s=Mm(a[0].qD));const u=new Rh;var c;const l=null!=(c=null==o||null==(e=o.VD("HttpHeaders")[0])?void 0:e.VD("HttpHeader"))?c:[];for(const t of l){const i=t.VD("name")[0].qD,e=t.VD("value")[0].qD;u.append(i,e)}return this.BF=u,s}kF(t,i){return Promise.resolve(t)}xF(t,i){return super.SF(t,cl.bI,i)}constructor(t,i,e){super(Ga,t,i,e,Ee.LN),this.BF=void 0}};r(),Qi(),r();var jD=class t{static FF(t){return"3"===t.version?dD.CF:dD.LF}YF(){const t={};if(this.ZT===dD.CF){const i={LatensRegistration:gD(this.VF,dD.CF)};t["X-TITANIUM-DRM-CDATA"]=Nl(JSON.stringify(i))}return t}get GF(){return this.ZT}get RS(){return this.ZT===dD.LF}constructor(i){this.VF=i,this.ZT=t.FF(i)}};var OD=class extends Lt{_F(t){const i=this.IF;if(!this.IF)throw new lu(vt.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium PlayReady DRM configuration.");if(ST(i)){const t={};return t.playready={VS:RD(i,this.WF.GF)},Promise.resolve(t)}return Promise.reject(_D(i,dD.zA))}pF(){const t=new Rh(this.WF.YF());return t.zN(super.pF()),t}async mF(t,i,e){const s=t.iD;if(!s)throw new lu(vt.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Titanium PlayReady license request",t,i);let n,r;try{const t=await s.FN(e),i=om(new T(t)),h=Fe.CD(i);if(h){const t=function(t,i){return function(t,i){const e=t.m.slice(),s=[];for(;e.length>0;){const t=e.shift();i(t)?s.push(t):e.push(...t.m)}return s}(t,(t=>t.GD===i))}(h,"CustomData");var o;if(t.length>0)n=JSON.parse(t[0].qD),r=null==(o=n.DrmErr)?void 0:o.desc}}catch(t){}throw new lu(vt.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Titanium PlayReady license request",t,i,s.nI,s.uI,r)}UF(t){if(1!==t.length)throw new lu(vt.CONTENT_PROTECTION_INITIALIZATION_INVALID,"PlayReady license message incorrectly formatted, Challenge not found.");return!0}constructor(t,i,e){super(t,i,e),this.WF=new jD(this.IF)}};function RD(t,i){const e=gD(t,i),s=e.DeviceInfo.FormatVersion,n=function(t){return t.replace(/&lt;/g,"<").replace(/&gt;/g,">")}(function(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}("<TitaniumCustomData>"+Nl('<LatensRegistration formatversion="'+s+'"><AccountName>'+e.AccountName+"</AccountName><CustomerName>"+e.CustomerName+"</CustomerName><PortalID>"+e.PortalId+'</PortalID><DeviceInfo formatversion="'+s+'"><DeviceType>'+e.DeviceInfo.DeviceType+"</DeviceType><OSType>"+e.DeviceInfo.OSType+"</OSType><OSVersion>"+e.DeviceInfo.OSVersion+"</OSVersion><DRMProvider>"+e.DeviceInfo.DRMProvider+"</DRMProvider><DRMVersion>"+e.DeviceInfo.DRMVersion+"</DRMVersion><DRMType>"+e.DeviceInfo.DRMType+"</DRMType><DeviceVendor>"+e.DeviceInfo.DeviceVendor+"</DeviceVendor><DeviceModel>"+e.DeviceInfo.DeviceModel+"</DeviceModel></DeviceInfo></LatensRegistration>")+"</TitaniumCustomData>")),r=am(n,!0);return am('<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0"><CustomData encoding="base64encoded">'+gc(r)+"</CustomData></LicenseAcquisition></PlayReadyCDMData>",!0)}r();var PD=class extends Lt{get zF(){if(NT(this.IF))return this.IF.token}UF(t){if(1!==t.length)throw new lu(vt.CONTENT_PROTECTION_INITIALIZATION_INVALID,"Vudrm PlayReady license message incorrectly formatted, Challenge not found.");return!0}AF(t,i){const e=Ei({},t||{},{token:this.zF});return super.AF(e,i)}constructor(t,i,e){super(t,i,e),this.aF("https://playready-license.drm.technology/rightsmanager.asmx")}};r();var zD=class extends Lt{AF(t,i){let e=t;return yT(this.IF)&&(e=AD(this.IF,e)),super.AF(e,i)}constructor(t,i,e){super(t,i,e),this.aF("https://emeademo.dev.ott.irdeto.com/playready/rightsmanager.asmx")}};r();var BD=class extends Lt{pF(){const t=super.pF();return MD(this.IF,"PlayReady",t)}constructor(t,i,e){super(t,i,e),this.aF("https://connect.conax.com:8010/cxplayready/rightsmanager.asmx")}};r();var UD=class extends Lt{get zF(){return ND(this.IF)}TF(t){const i=function(t){const i=om(new T(t));return Et(i,"<?xml")?0:1}(t);return 1===i?SD(t):super.TF(new T(t))}pF(){return ID(super.pF(),this.zF,this.IF)}constructor(t,i,e){super(t,i,e),this.aF("https://lic.drmtoday.com/license-proxy-headerauth/drmtoday/RightsManager.asmx")}};r();var QD=class extends Lt{pF(){const t=super.pF();return this.ZF&&t.set("Ticket",this.ZF),t.set("Content-Type","text/xml"),t}async MF(t,i){const e=this.IF,s=await kD(e,"playready",this.wE,i);return this.aF(s.licenseServerUrl),this.ZF=s.ticket,super.MF(t,i)}constructor(t,i,e){super(t,i,e)}};r();var FD=class extends Lt{pF(){if(!zc(this.IF))throw new lu(vt.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Axinom configuration");const t=super.pF();return t.set("X-AxDRM-Message",this.IF.token),t}};r(),r();var Si=function(t){return t.CN="application/json",t.HF="application/x-www-form-urlencoded",t.XF="application/octet-stream",t.ON="text/plain;charset=UTF-8",t}({}),Mi=class extends cD{get fF(){return!0}qF(){return this.lF.certificateURL||this.KF}JF(t){this.KF=t}MF(t){return Promise.resolve(this.tY(t,this.iY))}tY(t,i){return"spc="+encodeURIComponent(gc(t))+"&assetId="+encodeURIComponent(i)}get eY(){return Si.HF}EF(t){return t.fairplay||{}}sY(t){const i=t.indexOf("?");if(i>=0)return Promise.resolve(t.substr(i+1));{const i=t.split("skd://").pop();if(i){if(/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/.test(i))return Promise.resolve(i)}const e=t.split("/");return Promise.resolve(e[e.length-1])}}async _F(t){var i;const e=null!=(i=this.nY)?i:cm(new T(t)),s=await this.sY(e);this.iY=s;const n={};return n.fairplay={$S:s},n}pF(){const t=super.pF();return t.set("Content-Type",this.eY),t}async kF(t,i){return this.cF?this.cF:await this.rY(i)}xF(t,i){return super.SF(t,cl.mI,i)}oY(t){const i=this.qF(),e=this.pF(),s={zu:i,oI:Ee.LN,aI:e,LI:Ve.GET,zI:!1,GN:null,CI:0,ly:t,YA:ar.vI,OI:cl.pI};return new Gs(s)}async rY(t){const i=this.oY(t),e=await this.wE.hI(i),s=await e.FN();return new T(s)}TF(t){let i;if("string"==typeof t){let e=t.trim();"<ckc>"===e.substr(0,5)&&"</ckc>"===e.substr(-6)&&(e=e.slice(5,-6)),i=Zn(e)}else i=new T(t);return i}AF(t,i){let e=super.AF(t,i);return Et(e,"skd:")&&(e=e.substr(4)),e}constructor(t,i,e,s,n){super(t.NS,i,e,s,n),this.iY="",this.KF=void 0,this.nY=t.hY}};r();var YD=class extends Mi{get eY(){return Si.XF}sY(t){let i=t.split("://",1);return"skd"!==i[0].slice(-3).toLowerCase()?Promise.resolve(""):(i=t.split(";",2),i.length>1?Promise.resolve(i[1]):Promise.resolve(super.sY(t)))}async MF(t){return t}TF(t){return new T(t)}AF(t,i){const e=t||{};return e.p1=ja(),super.AF(e,i)}constructor(t,i,e,s){super(t,i,e,s,Ee.LN)}};r();var VD=class extends Mi{get eY(){return Si.CN}get zF(){if(!NT(this.IF))throw new lu(vt.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Token is required for FairPlay VuDrm.");return this.IF.token}tY(t,i){const e={token:this.zF,contentId:i,payload:gc(t)};return JSON.stringify(e)}TF(t){return new T(t)}pF(){const t=super.pF();return t.set("x-vudrm-token",this.zF),t}constructor(t,i,e,s){super(t,i,e,s,Ee.LN),this.aF("https://fairplay-license.drm.technology/license"),this.JF("https://fairplay-license.drm.technology/certificate")}};r();var GD="Verimatrix Fairplay license response incorrectly formatted. Invalid json.",WD="Verimatrix Fairplay license response incorrectly formatted. Ckc not found.",ZD=class extends Mi{TF(t){const i=function(t){let i;try{i=JSON.parse(t).ckc}catch(t){throw new lu(vt.CONTENT_PROTECTION_LICENSE_INVALID,GD)}if(!i)throw new lu(vt.CONTENT_PROTECTION_LICENSE_ERROR,WD);return i}(om(new DataView(t)));return super.TF(i)}constructor(t,i,e,s){super(t,i,e,s,Ee.LN)}};r();var HD=class extends Mi{get eY(){return Si.CN}async MF(t){const i=this.IF;if(!i)throw new lu(vt.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium Fairplay DRM configuration.");return vD(i,gc(t),dD.QA)}TF(t){try{let i;if(Ic(t)){const e=t.trim();i=JSON.parse(e)}else i=t;if(i.license){const t=Mm(i.license);return new T(t)}throw new lu(vt.CONTENT_PROTECTION_LICENSE_ERROR,"No license received from the Titanium Fairplay license server")}catch(t){throw new lu(vt.CONTENT_PROTECTION_LICENSE_INVALID,"Could not process the response from the Titanium Fairplay license server")}}mF(t,i,e){return wD(t,i,e)}constructor(t,i,e,s){super(t,i,e,s,Ee.CN)}};r(),Qi();var XD=class extends Mi{qF(){const t=super.qF();if(!t)return t;const i=Fe.Ah(t),e=this.IF;return yT(e)&&vb(i,{accountId:e.accountId,applicationId:e.applicationId||""}),i.href}sY(t){return yT(this.IF)?Promise.resolve(this.IF.contentId):super.sY(t)}async MF(t){return t}TF(t){return new T(t)}get eY(){return Si.XF}AF(t,i){let e=t;return yT(this.IF)&&(e=function(t,i){return Ei({},AD(t,i),{KeyId:t.keyId})}(this.IF,e)),super.AF(e,i)}constructor(t,i,e,s){super(t,i,e,s,Ee.LN),this.aF("https://emeademo.dev.ott.irdeto.com/streaming/getckc"),this.JF("https://emeademo.dev.ott.irdeto.com/streaming/getcertificate")}};r();var qD=class extends Mi{pF(){const t=super.pF();return MD(this.IF,"FairPlay",t)}async rY(t){const i={zu:this.qF(),oI:Ee.LN,aI:{},LI:Ve.GET,zI:!1,GN:null,CI:0,ly:t,YA:ar.vI,OI:cl.pI},e=await this.wE.hI(i),s=await e.FN();return new T(s)}async MF(t){return t}sY(t){const i=t.indexOf("?");if(0===t.indexOf("skd://")){let e;return e=i>=0?t.substring(6,i):t.substring(6),Promise.resolve(function(t){return om(Zn(t))}(e))}return Promise.resolve("unknown")}TF(t){try{const i=JSON.parse(t);return new T(Mm(i.CkcMessage))}catch(t){throw new b("CFLRW-66")}}constructor(t,i,e,s){if(super(t,i,e,s,Ee.ON),!AT(i))throw new lu(vt.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Conax configuration");this.aF("https://connect.conax.com:8097/license")}};r();var KD=class extends Mi{sY(t){return Et(t,"skd://")?Promise.resolve(t.substring(6,40)):Promise.reject(new lu(vt.CONTENT_PROTECTION_INITIALIZATION_INVALID,"Error while determining the KeyOS Content ID."))}tY(t,i){return"spc="+gc(t)+"&assetId="+i}constructor(t,i,e,s){super(t,i,e,s,Ee.ON),this.aF(gT[Nv.QA])}};r();var JD=class extends Mi{get zF(){return ND(this.IF)}tY(t,i){const e="spc="+encodeURIComponent(gc(t))+"&"+encodeURI(i);return"persistent"===this.lF.licenseType?e+"&offline=true":e}pF(){return ID(super.pF(),this.zF,this.IF)}constructor(t,i,e,s){super(t,i,e,s,Ee.ON),this.aF("https://lic.drmtoday.com/license-server-fairplay/")}};r(),Qi();var $D=class extends Mi{sY(t){let i=t;return Et(i,"skd:")&&(i="http:"+i.substring(4)),Et(i,"http:")||Et(i,"https:")?Promise.resolve(Fe.Ah(i).hostname):Promise.reject(new b("Could not parse ExpressPlay FairPlay content ID."))}async MF(t){return t}TF(t){return new T(t)}get eY(){return Si.XF}constructor(t,i,e,s){super(t,i,e,s,Ee.LN)}};r();var tE=class extends Mi{pF(){const t=super.pF(),i=this.IF.token;return t.set("Authorization","Bearer "+i),t}constructor(t,i,e,s){super(t,i,e,s,Ee.ON)}};r();var iE=class extends Mi{async rY(t){const i=this.qF(),e=this.pF(),s={zu:i,oI:Ee.CN,aI:e,LI:Ve.POST,ly:t,YA:ar.vI,OI:cl.pI},n=await this.wE.hI(s),r=await n.BN();return new T(Zn(r.certificate))}get eY(){return Si.CN}async xF(t,i,e){void 0===e&&(e=Ee.ON);const s=gc(t),n=this.IF,r=await kD(n,"fairplay",this.wE,i),o=Ml(JSON.stringify({spc:s,ticket:r.ticket})),h={zu:this.dF(),oI:Ee.CN,aI:this.pF(),LI:Ve.POST,GN:o,CI:0,ly:i,YA:ar.vI,OI:cl.mI},a=await this.wE.hI(h);return Zn((await a.BN()).licence)}constructor(t,i,e,s){if(super(t,i,e,s,Ee.CN),!IT(i))throw new b("Invalid Xstream DRM configuration")}};r();var eE=class extends Mi{tY(t,i){return gc(t)}TF(t){if(0===t.length)throw new lu(vt.CONTENT_PROTECTION_LICENSE_ERROR,"Vimond license request error.");return super.TF(t)}pF(){const t=super.pF();return t.set("Content-Type","text/plain"),t}constructor(t,i,e,s){super(t,i,e,s,Ee.ON)}};r();var sE=class extends Mi{get eY(){return Si.CN}tY(t,i){return t}TF(t){return new T(t)}pF(){if(!zc(this.IF))throw new lu(vt.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Axinom configuration");const t=super.pF();return t.set("X-AxDRM-Message",this.IF.token),t}constructor(t,i,e,s){super(t,i,e,s,Ee.LN)}};r(),Qi();var nE=class extends Mi{get eY(){return Si.ON}tY(t,i){const e={spc:gc(t)};return JSON.stringify(e)}sY(t){const i=Fe.Ah(t);return this.aY=t,i.searchParams.has("b")?Promise.resolve(i.searchParams.get("b")):Promise.reject(new lu(vt.CONTENT_PROTECTION_INITIALIZATION_INVALID,"Error during license server request: Could not extract content id"))}AF(t,i){let e=this.dF();return!e&&this.aY&&(e=this.aY),e&&(e=e.replace("skd://","https://")),super.AF(t,i||e)}TF(t){try{let i;if(i=Ic(t)?JSON.parse(t.trim()):t,i.ckc)return Zn(i.ckc)}catch(t){throw new lu(vt.CONTENT_PROTECTION_LICENSE_INVALID,"Could not process the response from the Uplynk Fairplay license server")}throw new lu(vt.CONTENT_PROTECTION_LICENSE_ERROR,"No license received from the Uplynk Fairplay license server")}constructor(t,i,e,s){super(t,i,e,s,Ee.CN),this.aY=void 0}};r(),r(),r(),ds();var Za=class{uY(t){return this.cY(t)}lY(t,i){throw new k(i+" must be "+this.dY+". (Received: "+t+")")}constructor(t,i){this.cY=t,this.dY=i}},xs=(new Za((function(t){return!0}),"any"),new Za($a,"a number")),sn=new Za(Ic,"a string"),rE=new Za(jo,"a boolean"),oE=(new Za(jd,"a date"),new Za(qe,"undefined")),hE=new Za(_o,"an object"),aE=new Za((function(t){return null===t}),"null");new Za((function(t){return null==t}),"null or undefined");function uE(t,i){throw new k(i+" has an incorrect type")}var cE=class{uY(t){if(!_o(t))return!1;for(const i of _.keys(this.tA)){if(!this.tA[i].uY(t[i]))return!1}return!0}lY(t,i){if(!_o(t))throw new k(i+" must be an object.");for(const e of _.keys(this.tA)){const s=this.tA[e];if(!s.uY(t[e]))return s.lY(t[e],i+"."+String(e))}throw new k}constructor(t){this.tA=t}};function bu(t){return new cE(t)}function lE(t){return _.keys(t).map((i=>t[i]))}var dE=class{uY(t){return Qa(this.Ov,t)}lY(t,i){return uE(0,i)}constructor(t){this.Ov=t}};function fE(t){return new dE(t)}var gE=class{uY(t){return this.fY.some((i=>i.uY(t)))}lY(t,i){return uE(0,i)}constructor(t){this.fY=t}};function Du(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];return new gE(i)}var _E=class{uY(t){return Dn(t)&&t.every((t=>this.gY.uY(t)))}lY(t,i){if(!Dn(t))throw new k(i+" must be an array.");for(let e=0;e<t.length;e++){const s=t[e];this.gY.uY(s)||this.gY.lY(s,i+"["+e+"]")}return uE(0,i)}constructor(t){this.gY=t}};function Ja(t){return new _E(t)}var vE=class{uY(t){return _o(t)&&_.keys(t).every((i=>this.gY.uY(t[i])))}lY(t,i){if(!_o(t))throw new k(i+" must be an object.");for(const e of _.keys(t))if(!this.gY.uY(t[e]))return this.gY.lY(t[e],i+"."+e);return uE(0,i)}constructor(t){this.gY=t}};function wE(t){return new vE(t)}var mE=class{uY(t){return this.gY().uY(t)}lY(t,i){return this.gY().lY(t,i)}constructor(t){this.gY=di(t)}};var pE=bu({responseCode:xs,isException:rE,description:sn,title:sn,correlationId:sn});async function AE(t,i,e,s,n){const r=function(t,i,e,s){const n={token:i.token,account:i.accountId,form:"json"},r=decodeURIComponent(bt(e,n)),o=new Rh({});o.append("Content-Type","application/json");const h=gc(t),a={getFairplayLicense:{releasePid:i.releasePid,spcMessage:h}};return{zu:r,oI:Ee.ON,aI:o,LI:Ve.POST,GN:JSON.stringify(a),ly:s,YA:ar.vI,OI:cl.mI}}(t,i,e,n);return await async function(t,i){const e=await i.hI(t),s=await e.BN();if(pE.uY(s))throw new lu(vt.CONTENT_PROTECTION_LICENSE_ERROR,s.description,void 0,t.zu,s.responseCode);return Zn(s.getFairplayLicenseResponse.ckcResponse)}(r,s)}var yE=class extends Mi{sY(t){const i=t.replace("FairPlay",this._Y.releasePid);return super.sY(i)}async xF(t,i){return await AE(t,this._Y,this.dF(),this.wE,i)}constructor(t,i,e,s){super(t,i,e,s,Ee.LN),this._Y=i}};r();var bE=class extends cD{EF(t){return t.clearkey||{}}async vF(t,i,e,s){const n=this.lF;if(this.dF())return super.vF(t,this.NF,e,s);if(n.keys&&n.keys.length){const t={keys:n.keys.map((t=>{let i=t;return i||(i={}),{kty:"oct",kid:i.id,k:i.value}}))};return Pl(JSON.stringify(t)).buffer}throw new lu(vt.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The clearkey license has not been configured correctly.")}kF(t,i){return Promise.resolve(new T(0))}async xF(t,i){const e=await super.SF(t,cl.MI,i),s=JSON.parse(cm(e));if(s.keys)for(const t of s.keys)t.k&&(t.k=xw(t.k)),t.kid&&(t.kid=xw(t.kid));return Pl(JSON.stringify(s))}constructor(t,i,e){super(kl,t,i,e,Ee.LN)}};r();var ME=class extends Ut{};r(),r(),Qi();var TE={url:"",method:"GET",headers:{},body:null,useCredentials:!1};async function SE(t,i,e){const s=LE(i),n=t.onCertificateRequest;if(!n||"function"!=typeof n)return Promise.resolve(i);const r=await Ao(Promise.resolve(n.call(t,s)),e);return fm(r)?Tc(r):xE(Ei({},TE,r))}async function NE(t,i,e,s,n){const r=t.onCertificateResponse,o=kE(i,e,s);if(!r||"function"!=typeof r)return Promise.resolve(i);return Tc(await Ao(Promise.resolve(r.call(t,o)),n))}async function IE(t,i,e,s){const n=await async function(t,i,e,s){const n=null==t?void 0:t.onLicenseRequest,r=EE(i,e);if(!n||"function"!=typeof n)return Promise.resolve(r);0;const o=await Ao(Promise.resolve(n.call(t,r)),s);if(fm(o))return Tc(o).buffer;return Ei({fairplaySkdUrl:void 0},TE,o)}(t,i,e,s);return n instanceof ArrayBuffer?n:xE(n)}async function DE(t,i,e,s,n,r){const o=EE(e,n),h=await async function(t,i,e,s,n){const r=null==t?void 0:t.onLicenseResponse,o=kE(i,e,s);if(!r||"function"!=typeof r)return Promise.resolve(i);0;const h=await Ao(Promise.resolve(r.call(t,o)),n);return Tc(h)}(t,new T(i),o,s,r);return Tc(h)}function EE(t,i){return Ei({},LE(t),{fairplaySkdUrl:i})}function kE(t,i,e){return{url:e.lI,status:e.nI,statusText:e.uI,headers:e.aI.RN(),body:t,request:i}}function xE(t){return new Gs({zu:t.url,LI:t.method,aI:t.headers,GN:t.body,zI:t.useCredentials})}function LE(t){var i;return{url:t.zu,body:null!=(i=CE(t.GN))?i:null,headers:t.aI.RN(),method:t.LI,useCredentials:t.zI}}function CE(t){if(t)return"string"==typeof t?Pl(t):t instanceof ArrayBuffer?new T(t):mm(t)?ka(t):void 0}Qi();var jE=class extends Lt{kF(t,i){return Promise.resolve(t)}async xF(t,i){const e=await this.QF(Wa(t).buffer),s=this.wF(e,Ee.LN,cl.bI,i),n=await IE(this.vY,s,void 0,i);if(n instanceof ArrayBuffer)return new T(n);if(""===n.zu)throw new lu(vt.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The license request URL has not been correctly configured.");try{const t=await this.wE.hI(n),e=await t.FN(i);return await DE(this.vY,e,s,t,void 0,i)}catch(t){throw X(t),new lu(vt.CONTENT_PROTECTION_LICENSE_ERROR,"Error during PlayReady license request",t)}}constructor(t,i,e,s){super(t,i,e),this.vY=s}};r(),Qi();var OE=class extends ME{async kF(t,i){if(this.cF)return this.cF;const e=this.wF(t,Ee.LN,cl.yI,i),s=await SE(this.vY,e,i);if(s instanceof T)return s;if(""===s.zu)throw new lu(vt.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The certificate request URL has not been correctly configured.");let n,r;try{n=await this.wE.hI(s),r=await n.FN(i)}catch(t){throw X(t),new lu(vt.CONTENT_PROTECTION_CERTIFICATE_ERROR,"Error during Widevine certificate request",t)}const o=EE(e,void 0);return await NE(this.vY,new T(r),o,n,i)}async xF(t,i){const e=this.wF(t,Ee.LN,cl.AI,i),s=await IE(this.vY,e,void 0,i);if(s instanceof ArrayBuffer)return new T(s);if(""===s.zu)throw new lu(vt.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The license request URL has not been correctly configured.");try{const t=await this.wE.hI(s),n=await t.FN(i);return await DE(this.vY,n,e,t,void 0,i)}catch(t){throw X(t),new lu(vt.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Widevine license request",t)}}constructor(t,i,e,s){super(t,i,e,Ee.LN),this.vY=s}};r(),Qi();var RE=class extends Mi{async kF(t,i){if(this.cF)return this.cF;const e=this.oY(i),s=await SE(this.vY,e,i);if(mm(s))return s;try{const t=await this.wE.hI(s),n=await t.FN(),r=EE(e,void 0);return await NE(this.vY,new T(n),r,t,i)}catch(t){throw X(t),new lu(vt.CONTENT_PROTECTION_CERTIFICATE_ERROR,"Error during FairPlay certificate request",t)}}async xF(t,i){const e=this.wF(t,Ee.LN,cl.mI,i),s=await IE(this.vY,e,this.wY,i);if(s instanceof ArrayBuffer)return new T(s);if(""===s.zu)throw new lu(vt.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The license request URL has not been correctly configured.");try{const t=await this.wE.hI(s),n=await t.FN(i);return await DE(this.vY,n,e,t,this.wY,i)}catch(t){throw X(t),new lu(vt.CONTENT_PROTECTION_LICENSE_ERROR,"Error during FairPlay license request",t)}}sY(t){var i;return this.wY=t,(null==(i=this.vY)?void 0:i.extractFairplayContentId)?Promise.resolve(this.vY.extractFairplayContentId(t)):super.sY(t)}constructor(t,i,e,s,n){super(t,i,e,s,Ee.LN),this.vY=n}},PE=class{mY(t,i,e,s){switch(t.NS.YA){case Nv.BA:return this.pY(i,e,s);case Nv.zA:return this.AY(i,e,s);case Nv.QA:return this.yY(t,i,e,s);case Nv.UA:default:return this.bY(i,e,s)}}pY(t,i,e){const s=function(t){return t.integration===tT&&Ic(t.customIntegrationId)}(t)?t.customIntegrationId:t.integration;if(s&&rt.EL.NL(s,vu)){const n=rt.EL.DL(s,vu,t);return new OE(t,i,e,n)}switch(s){case Ac:return new mD(t,i,e);case GM:return new pD(t,i,e);case Bc:return new yD(t,i,e);case YM:return new TD(t,i,e);case $c:return new DD(t,i,e);case HM:return new ED(t,i,e);case XM:return new xD(t,i,e);case KM:return new LD(t,i,e);default:return new ME(t,i,e,Ee.LN)}}AY(t,i,e){const s=t.integration;if(s&&rt.EL.NL(s,Wn)){const n=rt.EL.DL(s,Wn,t);return new jE(t,i,e,n)}switch(s){case Ac:return new OD(t,i,e);case GM:return new PD(t,i,e);case Bc:return new zD(t,i,e);case YM:return new BD(t,i,e);case $c:return new UD(t,i,e);case XM:return new QD(t,i,e);case KM:return new FD(t,i,e);default:return new Lt(t,i,e)}}yY(t,i,e,s){const n=i.integration;if(n&&rt.EL.NL(n,Ws)){const r=rt.EL.DL(n,Ws,i);return new RE(t,i,e,s,r)}switch(n){case VM:return new YD(t,i,e,s);case GM:return new VD(t,i,e,s);case WM:return new ZD(t,i,e,s);case Ac:return new HD(t,i,e,s);case Bc:return new XD(t,i,e,s);case YM:return new qD(t,i,e,s);case Zc:return new KD(t,i,e,s);case $c:return new JD(t,i,e,s);case ZM:return new $D(t,i,e,s);case HM:return new tE(t,i,e,s);case XM:return new iE(t,i,e,s);case qM:return new eE(t,i,e,s);case KM:return new sE(t,i,e,s);case JM:return new nE(t,i,e,s);case $M:return new yE(t,i,e,s);default:return new Mi(t,i,e,s,Ee.ON)}}bY(t,i,e){return new bE(t,i,e)}MY(t){return t.YA===Nv.zA||t.YA===Nv.BA||t.YA===Nv.QA||t.YA===Nv.UA}RS(t,i){var e;if(t.YA!==Nv.zA)return!1;if($t(null==(e=i.playready)?void 0:e.customData))return!0;const s=i.integration;return(!s||!rt.EL.NL(s,Ws))&&(s===Ac&&new jD(i).RS)}jF(t,i){if(t.YA!==Nv.BA)return;const e=i.integration;return e&&rt.EL.NL(e,Ws)?void 0:e===Ac?mD.jF():void 0}};r(),r(),r(),Qi(),ds();var zE="theoplayer-stored-network-info-v2",BE=25e5,_i=class{TY(t){var i;const e=null==(i=Fe.dE)?void 0:i.$b(t);if(void 0===e)return;const s=JSON.parse(e);if(void 0!==s&&void 0!==s[this.SY]){if(!this.NY(s))return s[this.SY].availableBandwidth;var n;null==(n=Fe.dE)||n.tM(t,JSON.stringify({}))}}IY(){const t=this.TY(zE);if(void 0!==t)return t;const i=this.TY("theoplayer-stored-network-info");return i?8*i:void 0}NY(t){const i=t[this.SY].storedTimestamp;return!!i&&ja()-i>36e5}DY(t){this.EY=t,this.kY()}xY(){var t;return null!=this.EY||(this.EY=null!=(t=this.IY())?t:BE),this.EY}constructor(){this.SY=zy,this.EY=void 0,this.kY=Yh((()=>{var t;const i={[this.SY]:{availableBandwidth:this.EY,storedTimestamp:ja()}};null==(t=Fe.dE)||t.tM(zE,JSON.stringify(i))}),1e4)}};_i.Ld=new _i,r();var pt=function(t){return t[t.LY=0]="LY",t[t.CY=1]="CY",t[t.jY=2]="jY",t[t.OY=3]="OY",t[t.RY=4]="RY",t[t.PY=5]="PY",t[t.hL=6]="hL",t[t.zY=7]="zY",t[t.BY=8]="BY",t[t.lL=9]="lL",t[t.UY=10]="UY",t[t.dL=11]="dL",t[t.QY=12]="QY",t}({});r();var wr=class{get FY(){return 0}get YY(){return 0}VY(t){}};r(),r();var UE=class extends Jr{constructor(t){super("contentProtectionsTracked"),this.GY=t}},QE=class extends tu{WY(t){this.VF=t}jF(t){const i=this.VF;if(void 0!==i)return this.ZY.jF(t,i)}RS(t){const i=this.VF;return void 0!==i&&this.ZY.RS(t,i)}HY(t){const i={NS:t.NS,XY:t.XY||[],qY:t.qY,hY:t.hY},e=this.ZY.mY(i,this.VF||{},t.DF,this.OQ);return i.qY&&e.aF(i.qY),new FE(e)}KY(t){if(!t)return;dl(t,(t=>void 0!==t.DF))&&this.yo(new UE(t))}constructor(t,i=new PE){super(),this.VF=void 0,this.OQ=t,this.ZY=i}},FE=class{gF(t){return this.JY.gF(t)}_F(t,i,e){return this.JY._F(i,e)}fF(){return this.JY.fF||void 0!==this.JY.cF}kF(t,i){return this.JY.kF(t,i)}xF(t,i,e){return i&&this.JY.aF(i),this.JY.xF(t,e)}wy(){this.JY.gn()}constructor(t){this.JY=t}};r();var YE=class extends Kn{$Y(t){this.tV.push(t);for(const i of t.Ix)this.tt(i);this.iV(t)}eV(t){ra(this.tV,t),this.sV(t);for(const i of t.Ix)this.nV(i)||this.it(i)}nV(t){for(const i of this.tV)if(i.kx(t))return!0;return!1}iV(t){t.yn(bs.Hk,this.rV),t.yn(bs.qk,this.oV)}sV(t){t.fn(bs.Hk,this.rV),t.fn(bs.qk,this.oV)}gn(){for(;this.tV.length>0;)this.eV(this.tV[0]);super.gn()}ma(){return xM(this)}constructor(t){super(),this.tV=[],this.rV=t=>{this.tt(t.Ht)},this.oV=t=>{const i=t.Ht;this.nV(i)||this.it(i)};for(const i of t)this.$Y(i)}};r(),r();var VE,GE={forceSeekOffset:0,maximumOffset:0,maximumPlaybackRate:0,minimumOffset:0,minimumPlaybackRate:0,targetOffset:0},Qu=class{get ga(){return null!=this.Za||(this.Za=function(t){return{get enabled(){return t.Rt},set enabled(i){t.Rt=pu(i)},get monitoringLivePlayback(){return t.hV},get currentLatency(){return t.Az},get currentConfiguration(){return function(t){if(void 0!==t)return{get minimumOffset(){return t.minimumOffset},get maximumOffset(){return t.maximumOffset},get targetOffset(){return t.targetOffset},get forceSeekOffset(){return t.forceSeekOffset},get minimumPlaybackRate(){return t.minimumPlaybackRate},get maximumPlaybackRate(){return t.maximumPlaybackRate}}}(t.md)}}}(this)),this.Za}get Rt(){var t,i;return null!=(i=this.He)?i:Boolean(null==(t=this.aV)?void 0:t.Rt)}set Rt(t){this.He=t,this.aV&&(this.aV.Rt=t)}get hV(){var t,i;return null!=(i=null==(t=this.aV)?void 0:t.zP)&&i}get Az(){var t;return null==(t=this.aV)?void 0:t.pz}get md(){return this.aV?this.aV.BP:GE}Sa(t){this.aV=t,void 0!==this.He&&(this.aV.Rt=this.He)}tr(){this.aV=void 0,this.He=void 0}};var WE=!(!gi||!gi.TextTrack),ZE=class extends gs{get Az(){}get uV(){const t=this.cz.TE,i=this.xE;return t.gr(i,.01)}get ht(){return this.Oz}get TE(){return this.cz.TE.ks()}get NE(){return this.cz.NE}set NE(t){t&&this.cz.cV(t)}get bt(){return this.wc}get xE(){return void 0!==this.lV?this.lV:this.cz.xE}set xE(t){this.CE(t)}CE(t,i){this.FE&&(this.lV=t),this.cz.Wb(t)}get ct(){return this.cz.ct}get OE(){return this.cz.OE}get lt(){return this.dV}get zE(){return this.fV}get UE(){}get FE(){return this.cz.FE}get VE(){return Ei({},{Bz:0,Uz:0,Qz:0,Fz:0,Yz:0,Vz:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}},this.cz.GE())}get WE(){return this.cz.WE}set WE(t){this.cz.WE=t}get XE(){return!0}get KE(){return this.cz.KE}get $E(){return this.cz.$E}set $E(t){this.cz.$E=t}get rk(){return this.cz.gV.played}get ck(){return this._V}set ck(t){this._V=t,this.vV&&(this.vV.ck=t)}get fk(){return this.cz.fk}get _k(){return this.cz._k.ks()}get wk(){return this.cz.wk}get wV(){return this.cz.wV}get nt(){return this.Ul}get rt(){return this.Pz}get yk(){return this.cz.yk}get Tk(){return this.cz.Tk}get Nk(){return this.cz.Nk}set Nk(t){this.cz.Nk=t}get Ek(){return this.mV}get Lk(){return this.cz.Lk}set Lk(t){this.cz.Lk=t}get pV(){return this.AV}be(){this.cz.be()}ge(){this.cz.ge()}async ka(t,i,e){yi(e),this.wc=t;const s={YA:uh.QQ,$x:t.src,VN:t.type,yV:this.bV(t),ck:this._V,MV:t.crossOrigin,TV:i.metadata&&i.metadata.title};this.SV.WY(t.contentProtection),this.vV=await this.cz.$n(s),yi(e),i.textTracks&&this.NV(i.textTracks),oD(this.nt)}NV(t){for(const e of t)if(this.cz.DV()&&Ro.Ka&&WE&&!HI(e.kind,e.label)&&this.EV(e)){var i;const t=null!=(i=e.kind)?i:z.AQ;this.cz.kV(e.src,t,e.label,e.srclang,e.default)}else{if(void 0===e.src)continue;this.xV.LQ(e)}}EV(t){return!t.format||"webvtt"===t.format}async Pk(){try{await this.cz.Pk()}catch(t){}for(;!this.uV;)await this.cz.zy(Zi.mb)}Rk(){this.cz.Rk()}Bk(){return void 0!==this.cz.gV.webkitShowPlaybackTargetPicker}Uk(){this.cz.gV.webkitShowPlaybackTargetPicker&&this.cz.gV.webkitShowPlaybackTargetPicker()}Qk(){this.cz.gV.webkitShowPlaybackTargetPicker&&this.cz.gV.webkitShowPlaybackTargetPicker()}jk(){return this.cz.gV}Ck(){return this.cz.wa}_a(){return this.cz.LV}Wk(t){return this.cz.CV(t)}async tr(){this.wc=void 0,this.dV=void 0,this.fV=void 0,this.vV=void 0,await this.xV.tr(),this.cz.jV(),await this.cz.tr(),this.OV.tr(),this.ck=this._V,this.ht.tr(),this.rt.tr(),this.lV=void 0}async gn(){await this.tr(),this.Bo(),this.RV(),this.PV(),this.OV.gn(),this.cz.zV=void 0,await this.QV.BV(this.cz),this.Oz.gn(),this.Pz.gn(),this.Ul.gn(),await this.xV.gn()}FV(){this.cz.yn(Zi.so,this.Ds),this.cz.yn(Zi.wb,this.Ds),this.cz.yn(Zi.Eb,this.xc),this.cz.yn(Zi.mb,this.Ds),this.cz.yn(Zi.ub,this.Ds),this.cz.yn(Zi.Mb,this.Ds),this.cz.yn(Zi.bb,this.YV),this.cz.yn(Zi.qy,this.Ds),this.cz.yn(Zi.pb,this.Ds),this.cz.yn(Zi.kb,this.Ds),this.cz.yn(Zi.Zy,this.Ds),this.cz.yn(Zi.yb,this.VV),this.cz.yn(E.oP,this.vz),this.cz.yn(Me.ua,this.GV),this.cz.yn(Zi.Vy,this.Ds),this.cz.yn(Zi.Yy,this.WV),this.cz.gV.addEventListener("webkitcurrentplaybacktargetiswirelesschanged",this.ZV)}RV(){this.cz.fn(Zi.so,this.Ds),this.cz.fn(Zi.wb,this.Ds),this.cz.fn(Zi.Eb,this.xc),this.cz.fn(Zi.mb,this.Ds),this.cz.fn(Zi.ub,this.Ds),this.cz.fn(Zi.Mb,this.Ds),this.cz.fn(Zi.bb,this.YV),this.cz.fn(Zi.qy,this.Ds),this.cz.fn(Zi.pb,this.Ds),this.cz.fn(Zi.kb,this.Ds),this.cz.fn(Zi.Zy,this.Ds),this.cz.fn(Zi.yb,this.VV),this.cz.fn(E.oP,this.vz),this.cz.fn(Me.ua,this.GV),this.cz.fn(Zi.Vy,this.Ds),this.cz.fn(Zi.Yy,this.WV),this.cz.gV.removeEventListener("webkitcurrentplaybacktargetiswirelesschanged",this.ZV)}bV(t){if(!t.contentProtection||!t.contentProtection.fairplay)return[];return[{NS:Dv,HV:[{initDataTypes:[Dv.GA],videoCapabilities:[{contentType:"video/mp4",encryptionScheme:"cbcs"}]}]}]}XV(){const t=this.cz.gV.audioTracks,i=this.cz.gV.videoTracks;t&&(t.addEventListener("addtrack",this.qV),t.addEventListener("removetrack",this.KV),t.addEventListener("change",this.JV)),i&&(i.addEventListener("addtrack",this.$V),i.addEventListener("removetrack",this.tG),i.addEventListener("change",this.iG))}PV(){const t=this.cz.gV.audioTracks,i=this.cz.gV.videoTracks;t&&(t.removeEventListener("addtrack",this.qV),t.removeEventListener("removetrack",this.KV),t.removeEventListener("change",this.JV)),i&&(i.removeEventListener("addtrack",this.$V),i.removeEventListener("removetrack",this.tG),i.removeEventListener("change",this.iG))}nh(t){for(let i=0;i<t.V;i++){t.Ex(i).rB()}}Fk(){this.cz.Fk()}Yk(){}eG(t,i){this.dV||(this.dV=i,this.fV=t,this.yo(new Uc(t)))}constructor(t,i,e,s,n,r,o=new PE,h=Ly()){super(),this.vV=void 0,this.wc=void 0,this.dV=void 0,this.fV=void 0,this.AV=new wr,this.mV=new Qu,this.GV=t=>{const i=t.lt,e=i.code,s=new qi(BS(e),"Something went wrong during native playback.",i),n=new RS(e,s.message,i.message);this.eG(s,n)},this.xc=()=>{this.yo(new A(this.xE,this.NE))},this.YV=t=>{this.KE||(this.lV=void 0),this.yo(t)},this.vz=t=>{this.lV=void 0},this.ZV=()=>{this.yo(new KS(this.FE))},this.VV=()=>{this.Tk>0&&this.yk>0&&this.yo(new hD)},this.qV=t=>{const i=this.cz.gV.audioTracks;if(i)for(let t=0;t<i.length;t++){const e=i[t];qE(this.Oz,e)||this.Oz.tt(new HS(e))}},this.KV=t=>{const i=[],e=this.cz.gV.audioTracks;if(e){for(const t of this.Oz.Ix)KE(e,t.sB)||i.push(t);for(const t of i)this.Oz.it(t)}},this.JV=()=>{this.nh(this.Oz)},this.$V=t=>{const i=this.cz.gV.videoTracks;if(i)for(let t=0;t<i.length;t++){const e=i[t];qE(this.Pz,e)||this.Pz.tt(new qS(e))}},this.tG=t=>{const i=[],e=this.cz.gV.videoTracks;if(e){for(const t of this.Pz.Ix)KE(e,t.sB)||i.push(t);for(const t of i)this.Pz.it(t)}},this.iG=()=>{this.nh(this.Pz)},this.WV=t=>{this.yo(t),this.eG(t.errorObject,la(t.errorObject))},this.QV=i,this.OQ=e,this.KA=h,this.cz=this.QV.sG(Ri.NI),this._V=this.cz.gV.preload,this.OV=new uo(this.cz,!0),this.OV.yn(QT,this.Ds),this.SV=new QE(e,o),this.cz.zV=this.SV,this.FV(),this.Oz=new pe,this.Pz=new pe,this.XV(),this.xV=new dr(this.cz,this.OQ),this.Ul=new YE([this.cz.nt]),this.ge()}};function HE(t){var i,e;if(!(null==(i=(VE||(VE=gi&&gi.document&&gi.document.createElement("video")),e=VE).canPlayType)?void 0:i.call(e,t.type)))return!1;if(t.useNativePlayback)return!0;const s=Ro.Ka||Ro.Sg;return!t.useManagedMediaSource||!s}var XE=class{bL(t,i,e,s,n,r,o){return new ZE(t,i,e,s,n,r)}nG(t,i){return HE(t)}rG(t){return mu(t)}oG(){return!1}constructor(){this.hG=pt.QY}};function qE(t,i){for(const e of t.Ix)if(e.sB===i)return e}function KE(t,i){for(let e=0;e<t.length;e++)if(t[e]===i)return!0;return!1}var Gc=class{static aG(){return this.Ld}uG(t){this.cG.push(t)}get hG(){return this.lG.hG}bL(t,i,e,s,n,r,o){let h=this.lG.bL(t,i,e,s,n,r,o);for(const t of this.cG)h=t(h,e,s);return h}nG(t,i){return this.lG.nG(t,i)}rG(t){return this.lG.rG(t)}oG(){return!1}constructor(){this.lG=new XE,this.cG=[]}};function JE(t,i){return jl(t.hG,i.hG)}Gc.Ld=new Gc,r(),r();var $E=class{dG(t){this.fG.push(t),this.fG.sort(JE)}async gG(t,i){for(const e of this.fG){const s=e.nG(t,i);if(pr(s)?await s:Boolean(s))return e}}constructor(){this.fG=[]}};function ko(t){uu.Ld.dG(t)}Qi(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r();var uu=class extends $E{_G(t){this.vG=t}wG(){return this.vG}async mG(t,i){const e=this.vG;let s=!1;for(const n of t){const t=await this.gG(n,i);if(t){if(pT(n.contentProtection)||await t.rG(n.contentProtection))return{kc:n,t:t};n.contentProtection&&(s=!0)}const r=e.nG(n,i);if(pr(r)?await r:Boolean(r)){if(pT(n.contentProtection)||await e.rG(n.contentProtection))return{kc:n,t:e};n.contentProtection&&(s=!0)}}if(s)throw await Fe.gA()?new qi(vt.CONTENT_PROTECTION_NOT_SUPPORTED,"Encrypted content over an insecure connection is not supported."):new qi(vt.CONTENT_PROTECTION_NOT_SUPPORTED,"The DRM configuration is not supported by this platform.");return{kc:t[0],t:e}}constructor(...t){super(...t),this.vG=Gc.aG()}};uu.Ld=new uu,r();var tk=class{gn(){dn(this.Vs)}constructor(t){this.Vs=gi&&gi.document&&gi.document.createElement("div"),pn(this.Vs),t.appendChild(this.Vs)}};r(),r();var Nr=function(t){return t.QY="",t.pG="none",t.MQ="metadata",t.Mz="auto",t}({});var ik=[Me.ua,Zi.Hy,Zi.Xy,Zi.Ob,Zi.By,Zi.Ky,Zi.$y,Zi._b,Zi.vb,Zi.Sb,Zi.Ib,E.iP,E.eP,E.sP,E.nP,E.wx,E.rP,E.oP,Zi.Yy,Zi.Vy,Zi.Zy,Zi.qy,Zi.ub,Zi.fb,Zi.so,Zi.mb,Zi.wb,Zi.pb,Zi.yb,Zi.Mb,Zi.bb,Zi.Eb,Zi.kb,Zi.Ab,Zi.gb,Zi.Tb],ek=class extends gs{get ht(){return this.Oz}get TE(){return this.ta.TE}get lt(){return this.ta.lt}get zE(){return this.ta.zE}get NE(){return this.ta.NE}set NE(t){this.ta.NE=t}get bt(){return this.AG}get xE(){return this.ta.xE}set xE(t){this.ta.xE=t}get ct(){return this.ta.ct}get OE(){return this.ta.OE}get UE(){return this.Rz}get FE(){return this.ta.FE}get VE(){return this.ta.VE}get WE(){return this.ta.WE}set WE(t){this.ta.WE=t}get XE(){return this.ta.XE}get KE(){return this.ta.KE}get $E(){return this.ta.$E}set $E(t){this.ta.$E=t}get rk(){return this.ta.rk}get ck(){return this._V}set ck(t){this._V=t,this.ta&&(this.ta.ck=this._V)}get fk(){return this.ta.fk}get _k(){return this.ta._k}get wk(){return this.ta.wk}get nt(){return this.Ul}get yk(){return this.ta.yk}get rt(){return this.Pz}get Tk(){return this.ta.Tk}get Nk(){return this.ta.Nk}set Nk(t){this.ta.Nk=t}get Ek(){return this.ta.Ek}get pV(){return this.ta.pV}Rk(){this.ta.Rk()}Pk(){const t=this.ta.Pk();pr(t)&&V(t)}zk(){return this.ka(void 0)}Ok(){}yG(){this.jz.xx=this.ta._a(),this.Oz.xx=this.ta.ht,this.Pz.xx=this.ta.rt,this.Ul.xx=this.ta.nt,this.Rz.xx=this.ta.UE,this.ta.yn(ik,this.Ds)}bG(){this.ta.fn(ik,this.Ds),this.Oz.xx=void 0,this.Pz.xx=void 0,this.Ul.xx=void 0,this.Rz.xx=void 0}Ya(){return this.MG}async ka(t,i){if(yi(i),this.MG=t,!t)return;const e=t.sources.filter(Vc);if(gS(e))return;const s=await this.TG.mG(e,t);yi(i);const n=s.kc,r=s.t,o=this.Ck(),h=SS(this);(this.SG!==r||this.lt)&&(this.bG(),await this.ta.gn(),yi(i),this.SG=r,this.ta=this.NG(r,n),function(t,i){t.WE!==i.WE&&(t.WE=i.WE);t.Nk!==i.Nk&&(t.Nk=i.Nk);t.$E!==i.$E&&(t.$E=i.$E)}(this.ta,h),IS(this,h,this),this.yG()),this.ta.ck=this.ck,this.IG?this.ta.ge():this.ta.be(),await this.ta.ka(n,t,i),yi(i),this.DG(n),this.Ck()!==o&&this.yo(new kS)}DG(t){this.AG!==t&&(this.AG=t,this.yo(new ES(t)))}Bk(){return this.ta.Bk()}Uk(){this.ta.Uk()}Qk(){this.ta.Qk()}Ck(){return this.ta.Ck()}_a(){return this.jz}Fk(){this.ta.Fk()}Yk(){this.ta.Yk()}Wk(t){return this.ta.Wk(t)}async tr(){this.MG=void 0,this.DG(void 0),await this.ta.tr()}async gn(){this.Bo(),await this.tr(),await this.ta.gn(),this.Oz.gn(),this.Pz.gn(),this.Ul.gn(),this.jz.gn(),this.Rz.gn()}ge(){this.IG=!0,this.ta.ge()}be(){this.IG=!1,this.ta.be()}constructor(t,i){super(),this.SG=void 0,this.AG=void 0,this._V=Nr.pG,this.MG=void 0,this.IG=!0,this.Oz=new tl,this.Pz=new tl,this.Ul=new Ce,this.Rz=new ct,this.TG=t,this.ta=i,this.ta.ck=this.ck,this.jz=new CS(i._a()),this.yG()}};r(),r(),r(),r();var $s=function(t){return t.aa="fullscreenchange",t.fa="fullscreensupportchange",t.ua="fullscreenerror",t}({});r();var sk=class extends Jr{constructor(){super($s.ua)}},ut=($s.aa,$s.fa,$s.ua,class extends tu{get cs(){return!1}get ea(){return!1}co(){this.yo(new sk)}bo(){}gn(){this.Bo()}});r(),r();var mr=class extends Jr{constructor(){super(Au.ua)}},nk=class extends tu{get Cz(){return!1}get Lz(){return!1}async co(){this.yo(new mr)}async bo(){this.yo(new mr)}gn(){this.Bo()}},rk=class extends tu{get NE(){}set NE(t){}get bt(){}get xE(){return this.EG}set xE(t){this.CE(t)}CE(t,i){this.EG!==t&&(this.EG=t,this.kG=!0,this.yo(new Yr(this.xE)))}get VE(){return{Bz:0,Uz:0,Qz:0,Fz:0,Yz:0,Vz:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}}}get WE(){return this.xG}set WE(t){this.xG!==t&&(this.xG=t,this.yo(new $e(this.xE,this.Nk)))}get KE(){return this.CG}get $E(){return this.jG}set $E(t){this.jG!==t&&(this.jG=t,this.yo(new cu(this.xE,this.$E)))}get wk(){return this.kG}get Nk(){return this.cT}set Nk(t){this.cT!==t&&(this.cT=t,this.yo(new $e(this.xE,this.Nk)))}get Lk(){return!1}set Lk(t){}get pV(){return this.AV}get Az(){}ge(){}be(){}Pk(){this.CG&&(this.CG=!1,this.yo(new fi(this.xE)),this.yo(new Ai(this.xE)))}Rk(){this.CG||(this.CG=!0,this.yo(new A(this.xE,this.NE)),this.yo(new Zr(this.xE)))}ka(t,i){return Promise.resolve()}Bk(){return!1}Uk(){}Qk(){}Ck(){return this.Zo}_a(){return this.Qo}Wk(t){throw new b("Adding a CustomTextTrack is not supported without setting a source.")}Fk(){}Yk(){}async tr(){this.EG=0,this.kG=!1,this.Rk(),this.yo(new Js(this.EG))}async gn(){this.Bo(),this.ht.gn(),this.nt.gn(),this.rt.gn()}constructor(...t){super(...t),this.EG=0,this.xG=!1,this.CG=!0,this.jG=1,this.kG=!1,this.cT=1,this.ht=new pe,this.TE=Mo.PP().ks(),this.ct=NaN,this.OE=!1,this.lt=void 0,this.zE=void 0,this.UE=void 0,this.FE=!1,this.XE=!0,this.rk=Mo.PP().ks(),this.ck=Nr.pG,this.fk=Fn.Nz,this._k=Mo.PP().ks(),this.wV=void 0,this.nt=new Cc,this.yk=0,this.rt=new pe,this.Tk=0,this.Ek=new Qu,this.AV=new wr,this.Zo=new ut,this.Qo=new nk}},ok=class extends rk{set OG(t){this.QV=t,this.cz=t.sG(Ri.NI)}jk(){var t;return null==(t=this.cz)?void 0:t.gV}async gn(){await super.gn(),this.cz&&(await this.QV.BV(this.cz),this.cz=void 0)}constructor(...t){super(...t),this.QV=void 0,this.cz=void 0}},hk=class extends ek{get we(){return this.ku}get Lk(){return this.ta.Lk}set Lk(t){this.ta.Lk=t}Ok(){super.Ok(),this.BG.zG()}ur(t){NS(this,t)}ar(){}Vk(t){return!1}async ka(t,i){const e=this.Ck(),s=this.jk();await super.ka(t,i),this.Ck()!==e&&this.yo(new kS),this.jk()!==s&&this.yo(new Bu)}CE(t,i){this.ta.CE(t,i)}NG(t,i){return t.bL(this.ku,this.BG,this.OQ,this.KS,this.UG,this.QG,this.FG,i)}jk(){return this.ta.jk()}bE(){return this.BG.YG.map((t=>t.gV))}async gn(){await super.gn(),this.BG.gn(),this.VG.gn()}constructor(t,i,e,s,n,r,o){const h=new ok;super(uu.Ld,h),this.ku=t,this.KS=i,this.OQ=e,this.UG=s,this.QG=n,this.FG=o,this.BG=new So(r,this.FG),this.BG.GG(this.ku),h.OG=this.BG,this.VG=new tk(this.ku)}};r(),r();var ak=class extends gs{get ht(){return this.WG}get TE(){return Mo.PP().ks()}get NE(){return new Date(NaN)}set NE(t){}get bt(){}get xE(){return 0}set xE(t){}CE(t,i){}get ct(){return 0}get we(){return this.ku}get OE(){return!0}get lt(){return this.ZG}get zE(){return this.HG}get UE(){}get VE(){return{Bz:0,Uz:0,Qz:0,Fz:0,Yz:0,Vz:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}}}get WE(){return!1}set WE(t){}get XE(){return!0}get KE(){return!0}get $E(){return 0}set $E(t){}get rk(){return Mo.PP().ks()}get ck(){return Nr.pG}set ck(t){}get fk(){return Fn.Nz}get _k(){return Mo.PP().ks()}get wk(){return!1}get nt(){return this.XG}get yk(){return 0}get rt(){return this.WG}get Tk(){return 0}get Nk(){return 1}set Nk(t){}get Ek(){return this.mV}get Lk(){return!1}set Lk(t){}Vk(t){return!0}be(){}Pk(){throw this.yo(new Uc(this.HG)),this.ZG}Rk(){}Ya(){}async ka(t,i){throw yi(i),this.yo(new Uc(this.HG)),this.ZG}ge(){}zk(){return Promise.resolve()}jk(){}Ck(){return this.Zo}_a(){return this.Qo}bE(){return[]}Ok(){}ur(t){}ar(){}get FE(){return!1}Bk(){return!1}Uk(){}Qk(){}Fk(){}Yk(){}Wk(t){}tr(){return Promise.resolve()}gn(){return this.Bo(),this.WG.gn(),this.XG.gn(),Promise.resolve()}constructor(t,i,e){super(),this.Zo=new ut,this.Qo=new nk,this.mV=new Qu,this.ku=t,this.ZG=i,this.WG=new pe,this.XG=new Cc,this.HG=e}};function uk(t){if(t&&_o(t))return Ei({},t,{integration:ck(t.integration),fairplay:vk(t.fairplay),widevine:lk(t.widevine),playready:dk(t.playready),clearkey:wk(t.clearkey),aes128:mk(t.aes128),integrationParameters:pk(t.integrationParameters),preferredKeySystems:Ak(t.preferredKeySystems),useOipfDrmAgent:pu(t.useOipfDrmAgent)})}function ck(t){if(Ic(t))return t}function lk(t){if(t&&_o(t))return{persistentState:fk(t.persistentState),distinctiveIdentifier:fk(t.distinctiveIdentifier),audioRobustness:gk(t.audioRobustness),videoRobustness:gk(t.videoRobustness),licenseAcquisitionURL:Ic(t.licenseAcquisitionURL)?t.licenseAcquisitionURL:void 0,licenseType:_k(t.licenseType),headers:t.headers,useCredentials:!!jo(t.useCredentials)&&t.useCredentials,queryParameters:t.queryParameters,certificate:Ic(t.certificate)||fm(t.certificate)?t.certificate:void 0}}function dk(t){if(!t)return;const i=lk(t);if(!i)return;return Ei({},i,{customData:Ic(t.customData)?t.customData:void 0})}function fk(t){switch(null==t?void 0:t.toLowerCase()){case"required":return"required";case"optional":return"optional";case"not-allowed":return"not-allowed"}}function gk(t){switch(t){case"HW_SECURE_ALL":return"HW_SECURE_ALL";case"HW_SECURE_DECODE":return"HW_SECURE_DECODE";case"HW_SECURE_CRYPTO":return"HW_SECURE_CRYPTO";case"SW_SECURE_DECODE":return"SW_SECURE_DECODE";case"SW_SECURE_CRYPTO":return"SW_SECURE_CRYPTO";case"":return""}}function _k(t){switch(null==t?void 0:t.toLowerCase()){case"temporary":return"temporary";case"persistent":return"persistent"}}function vk(t){if(!t)return;const i=lk(t);if(!i)return;return Ei({},i,{certificateURL:Ic(t.certificateURL)?t.certificateURL:void 0})}function wk(t){if(!t)return;const i=lk(t);if(!i)return;const e=Dn(t.keys)?t.keys.map((t=>function(t){if(!t||!_o(t))return;const i=t.id,e=t.value;if(!Ic(i)||!Ic(e))return;return{id:i,value:e}}(t))).filter($t):void 0;return Ei({},i,{keys:e})}function mk(t){if(_o(t))return{useCredentials:jo(t.useCredentials)?t.useCredentials:void 0}}function pk(t){if(_o(t))return t}function Ak(t){return t&&Dn(t)?t.map((t=>ET(t))).filter($t):[vu,Wn,Ws]}r(),r(),r(),r();var yk={bt:void 0,xE:0,ct:NaN,OE:!1,lt:void 0,zE:void 0,WE:!1,KE:!0,$E:1,fk:Fn.Nz,wk:!1,yk:0,Tk:0,Nk:1};r(),Qi();var pi=function(t){return t.DEFAULT="",t.THEO="theo",t.CSAI="csai",t.GOOGLE_IMA="google-ima",t.SPOTX="spotx",t.FREEWHEEL="freewheel",t.MEDIATAILOR="mediatailor",t.THEOADS="theoads",t.UPLYNK="uplynk",t}({}),oc=class{get qG(){return this.KG}JG(t){const i=this.KG.filter((i=>i.$G(t)));if(i.length>1)0;else if(0===i.length)throw b("Unknown ad integration: "+t.integration);return i[0]||null}tW(t){this.KG.push(t)}constructor(){this.KG=[]}};oc.Ld=new oc,r(),r(),r(),r();var Xe=function(t){return t.oP="PLAYING",t.iW="PAUSED",t.eW="SEEK",t.sW="STALLED",t.nW="FAILED",t.rW="INITIAL_BUFFERING",t.oW="NO_ACCESS",t}({}),nr=function(t){return t.hW="HTTP_REQUEST_STATUS_CODE_1XX",t.aW="HTTP_REQUEST_STATUS_CODE_2XX",t.uW="HTTP_REQUEST_STATUS_CODE_3XX",t.cW="HTTP_REQUEST_STATUS_CODE_4XX",t.lW="HTTP_REQUEST_STATUS_CODE_5XX",t.dW="BUFFER_LENGTH",t.fW="BYTES_RECEIVED",t.gW="SEGMENT_READ_BITRATE",t._W="SEGMENT_PROFILE_BITRATE",t.vW="VIDEO_PROFILE_BITRATE",t.wW="NUMBER_OF_FRAMES_DROPPED",t.mW="PLAYBACK_POSITION",t.pW="NUMBER_OF_FRAMES_DECODED",t.AW="PLAYBACK_DELTA_TO_ORIGIN",t.yW="STREAM_DELTA_TO_ORIGIN",t.bW="ORIGIN_TIMESTAMP",t}({}),bk=function(t){return t.MW="MANIFEST_URI",t.TW="ASSET_DURATION",t.NW="NUMBER_OF_CONTENT_PROFILES",t.IW="CDN",t.DW="CONTENT_TITLE",t.EW="SERVICE_NAME",t.kW="CONTENT_TYPE",t.xW="CONTENT_DESCRIPTION",t}({}),Mk=function(t){return t.LW="shutdown_normal_shutdown",t}({}),Tk=function(t){return t.jW="session/",t.OW="content/",t.RW="internalError/",t.PW="drmError/",t.zW="caError/",t.BW="networkError/",t}({}),Sk=class{get code(){return this.category+this.statusCode}constructor(t,i){this.category=t,this.statusCode=i}},Nk=class extends tu{};r(),r(),r();var Ik=function(t){return t.PAUSE="UW",t.RESUME="QW",t}({}),Dk=class extends Jr{constructor(){super("FW")}},Ek=class extends tu{YW(){this.VW=!0}GW(){}gn(){this.VW=!1,this.WW.fn(Ik.PAUSE,this.ZW),this.WW.fn(Ik.RESUME,this.XW)}qW(){return isFinite(this.ta._d())}constructor(t,i){super(),this.ta=t,this.WW=i,this.VW=!1,this.ZW=()=>{this.GW(),this.VW=!1},this.XW=()=>{this.VW=!0},this.WW.yn(Ik.PAUSE,this.ZW),this.WW.yn(Ik.RESUME,this.XW)}},kk=class extends Ek{YW(){super.YW(),this.KW()}gn(){this.JW(),super.gn()}KW(){this.ta.yn(E.rP,this.$W),this.ta.yn(Zi.wb,this.tZ),this.ta.yn(E.oP,this.iZ),this.ta.yn(Zi.Mb,this.eZ),this.ta.yn(Zi.bb,this.sZ)}JW(){this.ta.fn(E.rP,this.$W),this.ta.fn(Zi.wb,this.tZ),this.ta.fn(E.oP,this.iZ),this.ta.fn(Zi.Mb,this.eZ),this.ta.fn(Zi.bb,this.sZ)}nZ(){this.rZ=!0}oZ(){const t=this.ta.PE(),i=new Sk(Tk.RW,String(t.code));this.hZ(Xe.nW,i,t.message)}aZ(t){this.VW&&(this.WW.uZ(t),this.yo(new Dk))}hZ(t,i,e){this.WW.cZ(t,i,e),this.yo(new Dk)}lZ(t,i){this.WW.dZ(t,i)}constructor(...t){super(...t),this.rZ=!1,this.fZ=!1,this.gZ=!1,this.$W=()=>{this.fZ&&!this.gZ&&this.aZ(Xe.sW)},this.iZ=()=>{this.ta.KE||(this.fZ||this.lZ(new Sk(Tk.OW,"firstFrameDisplayed"),"now"),this.fZ=!0,this.aZ(Xe.oP))},this.tZ=()=>{this.ta.KE&&(this.fZ=!0,this.aZ(Xe.iW))},this.eZ=()=>{this.rZ&&(this.gZ=!0,this.rZ=!1,this.aZ(Xe.eW))},this.sZ=()=>{this.gZ=!1,this.ta.KE&&this.aZ(Xe.iW)}}};r();var xk=class extends Ek{YW(){super.YW(),this._Z(),this.KW()}gn(){this.JW(),super.gn()}KW(){this.ta.rt.yn(yo.aa,this._Z),this.ta.wZ.vZ(this.mZ),this.ta.yn(Zi.Zy,this.pZ)}JW(){this.ta.rt.fn(yo.aa,this._Z),this.ta.wZ.AZ(this.mZ),this.ta.fn(Zi.Zy,this.pZ)}yZ(t){t.serviceName&&this.bZ(bk.EW,t.serviceName),t.cdn&&this.bZ(bk.IW,t.cdn),t.contentTitle&&this.bZ(bk.DW,t.contentTitle),t.contentType&&this.bZ(bk.kW,t.contentType),t.contentDescription&&this.bZ(bk.xW,t.contentDescription)}bZ(t,i){this.VW&&this.WW.MZ(t,i)}constructor(...t){super(...t),this.pZ=()=>{this.qW()&&this.bZ(bk.TW,x.round(this.ta._d()))},this.mZ=t=>{"manifest"===t.request.type&&this.bZ(bk.MW,t.url)},this._Z=()=>{const t=dl(this.ta.rt.Ix,(t=>t.Rt));t&&this.bZ(bk.NW,t.Zx.V)}}};r();var Lk=class extends Ek{YW(){super.YW(),this.TZ=this.ta.VE.Bz,this.SZ=this.ta.VE.Qz,this.KW(),this.NZ.push(v(this.IZ,1e3))}GW(){super.GW(),this.DZ()}gn(){this.DZ(),this.JW(),this.NZ.forEach(m),nt(this.NZ),super.gn()}KW(){this.ta.wZ.vZ(this.EZ),this.ta.yn(Zi.Ib,this.kZ)}JW(){this.ta.wZ.AZ(this.EZ),this.ta.fn(Zi.Ib,this.kZ)}xZ(){this.DZ()}LZ(t){this.CZ+=t,this.jZ(nr.fW,this.CZ)}OZ(t,i){const e=this.RZ.get(i)||0;this.jZ(t,e)}PZ(){const t=this.ta.VE.Bz-this.TZ;this.jZ(nr.wW,t)}zZ(){const t=this.ta.VE.Qz-this.SZ;this.jZ(nr.pW,t)}BZ(){const t=_i.Ld.xY();this.jZ(nr.gW,vm(t))}UZ(t){this.jZ(nr._W,vm(t)),this.jZ(nr.vW,vm(t))}DZ(){if(!this.qW())return;const t=x.round(Df(this.ta.LE()));this.jZ(nr.mW,t)}QZ(){const t=Mo.xn(this.ta.SE()),i=this.ta.LE(),e=t.CP(i),s=e?Df(e.jn(0)-i):0;this.jZ(nr.dW,s)}jZ(t,i){this.VW&&this.WW.FZ(t,i)}constructor(...t){super(...t),this.RZ=ll(),this.CZ=0,this.TZ=0,this.SZ=0,this.NZ=[],this.IZ=()=>{this.PZ(),this.zZ(),this.QZ()},this.kZ=t=>{t.RI===Ri.NI&&(this.LZ(t.Yz),this.BZ(),this.UZ(t.YZ),this.DZ())},this.EZ=t=>{const i=t.status.toString()[0],e=this.RZ.get(i)||0;this.RZ.set(i,e+1),this.OZ(nr.hW,"1"),this.OZ(nr.aW,"2"),this.OZ(nr.uW,"3"),this.OZ(nr.cW,"4"),this.OZ(nr.lW,"5")}}};r();function Ck(t){return t&&t.integration===Bk}function jk(t){if(!Ic(t.asset))throw new k("Agama source configuration: expected 'asset' to be a string");if(!function(t){return!!Ic(t)&&("live"===t||"vod"===t)}(t.streamType))throw new k("Agama source configuration: expected 'streamType' to be 'live' or 'vod'");if(void 0!==t.serviceName&&!function(t){return!!Ic(t)&&("live"===t||"svod"===t||"nvod"===t||"tvod"===t||"avod"===t||"catchuptv"===t)}(t.serviceName))throw new k("Agama source configuration: expected 'serviceName' to be 'live', 'svod', 'nvod','tvod', 'avod' or 'catchuptv'");if(void 0!==t.cdn&&!Ic(t.cdn))throw new k("Agama source configuration: expected 'cdn' to be a string");if(void 0!==t.contentTitle&&!Ic(t.contentTitle))throw new k("Agama source configuration: expected 'contentTitle' to be a string");if(void 0!==t.contentType&&!Ic(t.contentType))throw new k("Agama source configuration: expected 'contentType' to be a string");if(void 0!==t.contentDescription&&!Ic(t.contentDescription))throw new k("Agama source configuration: expected 'contentDescription' to be a string");return t}function Ok(t){if(!Ic(t.config))throw new k("Agama player configuration: expected 'config' to be a string");if(void 0!==t.logLevel&&!function(t){return!!Ic(t)&&("info"===t||"debug"===t||"warning"===t||"error"===t||"fatal"===t)}(t.logLevel))throw new k("Agama player configuration: expected 'logLevel' to be 'info', 'debug', 'warning','error' or 'fatal'");if(void 0!==t.application&&!Ic(t.application))throw new k("Agama player configuration: expected 'application' to be a string");if(void 0!==t.applicationVersion&&!Ic(t.applicationVersion))throw new k("Agama player configuration: expected 'applicationVersion' to be a string");if(void 0!==t.userAccountID&&!Ic(t.userAccountID))throw new k("Agama player configuration: expected 'userAccountID' to be a string");if(void 0!==t.deviceID&&!Ic(t.deviceID))throw new k("Agama player configuration: expected 'deviceID' to be a string");return t}function Rk(){let t="00000000-0000-0000-0000-000000000000",i=s.navigator,e=s.screen,n=""+i.mimeTypes.length;n+=i.userAgent.replace(/\D+/g,""),n+=i.plugins.length,n+=e.height||"",n+=e.width||"",n+=e.pixelDepth||"",n+=x.floor(1e3*x.random());let r=function(t){let i,e,s=0;if(0===t.length)return"0";for(i=0;i<t.length;i++)e=t.charCodeAt(i),s=(s<<5)-s+e,s|=0;return x.abs(s).toString().substring(0,12)}(n);return t=[t.slice(0,t.length-r.length),r].join(""),t}function Pk(t,i,e){const s=i,n=function(t,i){return or(i)?t.DsProtocol.APPLE_HLS:t.DsProtocol.MPEG_DASH}(t,s.type),r=function(t,i){let e=t.DsPlaylistType.VOD;"live"===i&&(e=t.DsPlaylistType.LIVE);return e}(t,e.streamType);return{asset:e.asset,playlistType:r,protocol:n,uri:s.src}}r();var Dt=function(t){return t.UNAVAILABLE="unavailable",t.AVAILABLE="available",t.CONNECTING="connecting",t.CONNECTED="connected",t}({}),zk=class{VZ(){this.ta.fn(Me.ua,this.GZ),this.WZ(),this.ZZ(),this.WW.HZ()}XZ(){this.ta.qZ.ga.chromecast&&this.ta.qZ.ga.chromecast.addEventListener("statechange",this.KZ)}ZZ(){this.ta.qZ.ga.chromecast&&this.ta.qZ.ga.chromecast.removeEventListener("statechange",this.KZ)}JZ(){return void 0!==this.ta.qZ.ga.chromecast&&this.ta.qZ.ga.chromecast.state===Dt.CONNECTED}gn(){this.ta.fn(Zi.ro,this.ho),this.ta.fn(Zi.so,this.$Z),this.ta.fn(Zi.qy,this.tH),this.VZ(),this.WW.gn()}iH(){this.eH||(this.eH=new kk(this.ta,this.WW)),this.sH||(this.sH=new Lk(this.ta,this.WW)),this.nH||(this.nH=new xk(this.ta,this.WW))}YW(){this.eH&&(this.eH.YW(),this.eH.yn("FW",this.rH)),this.sH&&this.sH.YW(),this.nH&&this.nH.YW()}WZ(){this.eH&&(this.eH.fn("FW",this.rH),this.eH.gn(),this.eH=void 0),this.sH&&(this.sH.gn(),this.sH=void 0),this.nH&&(this.nH.gn(),this.nH=void 0)}yZ(t){this.nH&&this.nH.yZ(t)}oH(){this.eH&&this.eH.oZ()}nZ(){this.eH&&this.eH.nZ()}constructor(t,i,e){this.ta=t,this.WW=i,this.ho=()=>{this.hH(),this.tH()},this.hH=()=>{const t=this.ta.Ya(),i=t&&t.analytics;this.aH=function(t){void 0===t&&(t=[]);for(let i of t)if(Ck(i))return jk(i)}(i)},this.tH=()=>{this.VZ(),this.ta.fn(Zi.so,this.$Z),!this.JZ()&&this.WW.uH()&&this.ta.bt&&this.aH&&(this.iH(),this.ta.KE||this.ta.OE?this.ta.yn(Zi.so,this.$Z):this.$Z())},this.$Z=()=>{this.ta.bt&&this.aH&&(this.WW.cH(this.ta.bt,this.aH),this.YW(),this.yZ(this.aH),this.XZ(),this.ta.yn(Me.ua,this.GZ),this.ta.fn(Zi.so,this.$Z))},this.KZ=()=>{this.JZ()&&this.VZ()},this.GZ=()=>{this.oH(),this.VZ()},this.rH=()=>{this.sH&&this.sH.xZ()};const s=function(t){void 0===t&&(t=[]);for(const i of t)if(Ck(i))return Ok(i)}(e.analytics);s&&this.WW.lH()&&(this.WW.Ok(s),this.WW.uH()?(this.WW.dH(),this.ta.yn(Zi.ro,this.ho),this.ta.yn(Zi.qy,this.tH)):console.warn("An error occurred while initializing an Agama EMP client. Please check your configuration"))}},Bk="agama";r(),r();var Uk=function(t){return t.NONE="",t.HORIZONTAL="horizontal",t.VERTICAL="vertical",t}({});r();var he=function(t){return t.NONE="",t.PM360="360",t.PM180="180",t}({});function Qk(t){switch(t){case"":return Uk.NONE;case"horizontal":return Uk.HORIZONTAL;case"vertical":return Uk.VERTICAL;default:throw new k}}function Fk(t,i){if(i)return he.PM360;if(null==t)return he.NONE;switch(t){case"":return he.NONE;case"360":return he.PM360;case"180":return he.PM180;default:throw new k("Provided panoramaMode value is not recognized. Expected '', '360' or '180' but value was "+t)}}r();var Fo=function(t){return t.ASSET="asset",t.CHANNEL="channel",t.EVENT="event",t}({});r();var Yk="https://content.uplynk.com";function gr(t){if(!t)return!0;const i=!function(t){return St(t)||Ia(t)&&St(t[0])}(t.sources)||gS(t.sources),e=!t.ads||Vk(t.ads),s=""!==t.poster&&!t.poster;return i&&e&&s}function Vk(t){return!t||Dn(t)&&0===t.length}function Gk(t){if(t&&t.sources)return Wk(t.sources)}function Wk(t){return Ic(t)?Mu(t):dS(t)?t.type||t.src&&Mu(t.src):Ia(t)&&t.length>0?Wk(t[0]):void 0}function Zk(t){if(t&&t.sources)return Hk(t.sources)}function Hk(t){return Ic(t)?t:dS(t)?t.src:Ia(t)&&t.length>0?Hk(t[0]):void 0}function Xk(t,i,e){return oS(t)?function(t,i,e){let s=Ei({},_S(),{ping:{adImpressions:!1,freeWheelVideoViews:!1,linearAdData:!1},integration:KT.UPLYNK,id:"",prefix:Yk,preplayParameters:{},playbackUrlParameters:{},assetType:Fo.ASSET,contentProtected:!1,assetInfo:!0});s.id=function(t){if(Ic(t))return t;if(Ia(t)&&Ic(t[0]))return t;if(function(t){return _o(t)&&Ic(t.userId)&&(Ia(t.externalId)||Ic(t.externalId))}(t))return t;return""}(t.id),t.preplayParameters&&(s.preplayParameters=t.preplayParameters);t.playbackUrlParameters&&(s.playbackUrlParameters=t.playbackUrlParameters);t.assetType&&(s.assetType=function(t){switch(t){case"channel":return Fo.CHANNEL;case"event":return Fo.EVENT;default:return Fo.ASSET}}(t.assetType));t.contentProtected&&(s.contentProtected=pu(t.contentProtected));t.assetInfo?s.assetInfo=pu(t.assetInfo):s.assetInfo="asset"===s.assetType;t.prefix&&(s.prefix=Q(t.prefix)||Yk);return s.ping=function(t,i){let e=!1,s=!1,n=!1;i?(e=!!jo(i.adImpressions)&&i.adImpressions,s=!!jo(i.freeWheelVideoViews)&&i.freeWheelVideoViews,n=jo(i.linearAdData)?i.linearAdData:t!==Fo.ASSET):t!==Fo.ASSET&&(n=!0);return{adImpressions:e,freeWheelVideoViews:s,linearAdData:n}}(s.assetType,t.ping),s=Kk(s,t),s=$k(s,i,e),s=Jk(s,t,e),s}(t,i,e):aS(t)?function(t,i,e){var s;return Ei({},qk(t,i,e),{integration:KT.MEDIATAILOR,adParams:null!=(s=t.adParams)?s:{}})}(t,i,e):hS(t)?function(t,i,e){return Ei({},qk(t,i,e),{type:"theolive"})}(t,i,e):uS(t)?function(t,i,e){return Ei({},qk(t,i,e),{type:Oe.dL,src:t.streamName||t.src,streamAccountId:t.streamAccountId,subscriberToken:t.subscriberToken,connectOptions:ex(t.connectOptions),apiUrl:t.apiUrl})}(t,i,e):qk(t,i,e)}function qk(t,i,e){let s=vS();const n=i&&(i.contentProtection||i.drm);if(Ic(t)){if(s.src=t,s.type=Mu(t),n){const t=uk(n);s.contentProtection=LT(t)}}else if(dS(t)||Tt(t)||uS(t)){s.src=t.src,s.type=t.type||Mu(t.src),s.isAdvertisement=t.isAdvertisement;const i=fS(t)?t.hesp:void 0;void 0!==i&&(s.hesp=i);aS(t)&&(s.integration=t.integration);const e=uk(t.contentProtection||t.drm||n);s.contentProtection=LT(e),t.ssai&&(s.ssai=FM(t.ssai)),s=Kk(s,t)}return s=$k(s,i,e),s=Jk(s,t,e),s}function Kk(t,i){var e,s;i.useCredentials?t.crossOrigin=BM.rL:i.crossOrigin&&(t.crossOrigin=nS(i.crossOrigin)),Ic(i.timeServer)&&(t.timeServer=i.timeServer),i.liveOffset&&(t.liveOffset=i.liveOffset),i.hlsDateRange&&(t.hlsDateRange=i.hlsDateRange),i.lowLatency&&(t.lowLatency=pu(i.lowLatency)),i.useNativePlayback&&(t.useNativePlayback=pu(i.useNativePlayback)),i.useManagedMediaSource&&(t.useManagedMediaSource=pu(i.useManagedMediaSource)),i.dash&&(t.dash=CT(i.dash)),i.hls&&(t.hls=jT(i.hls)),i.lcevc&&(t.lcevc=pu(i.lcevc)),i.ignoreEmbeddedTextTrackTypes&&(t.ignoreEmbeddedTextTrackTypes=pS(i.ignoreEmbeddedTextTrackTypes)),i.latencyConfiguration&&(t.latencyConfiguration=XT(i.latencyConfiguration)),t.seamlessSwitchStrategy=JT(null!=(s=i.seamlessSwitchStrategy)?s:null==(e=i.dash)?void 0:e.useSeamlessPeriodSwitch);const n=Ks(i.experimentalRendering);void 0!==n&&(t.experimentalRendering=n);const r=Ks(i.nativeUiRendering);return void 0!==r&&(t.nativeUiRendering=r),t}function Jk(t,i,e){return t.abr=PT(Ic(i)?void 0:RT(i.abr),null==e?void 0:e.abr),t}function $k(t,i,e){var s;const n=i&&i.timeServer;return e&&e.liveOffset&&!$t(t.liveOffset)&&(t.liveOffset=e.liveOffset),e&&e.hlsDateRange&&!$t(t.hlsDateRange)&&(t.hlsDateRange=e.hlsDateRange),t.crossOrigin===BM.EI&&(null==i||null==(s=i.vr)?void 0:s[360])&&(t.crossOrigin=BM.nL),t.useCredentials=t.crossOrigin===BM.rL,Ic(n)&&!t.timeServer&&(t.timeServer=n),t}function tx(t){const i={src:""};if(t&&t.src){if(i.src=Q(t.src),"default"in t&&(i.default=pu(t.default)),i.kind=function(t){const i=String(t||"").toLowerCase();return UI(i)?i:i?"metadata":"subtitles"}(t.kind),eS(t.format)&&(i.format=t.format),"srclang"in t){const e=t.srclang;"string"==typeof e&&""!==e&&(i.srclang=e)}if("label"in t){const e=t.label;"string"==typeof e&&""!==e&&(i.label=e)}}return i}function ix(t,i){if(_o(t))try{return i.JG(t).fH(t)}catch(t){return}}function ex(t){if(null==t)return t;if(!_o(t))throw new b("connectOptions must be an object");return t}function Hc(t,i,e){if(void 0===e&&(e=oc.Ld),gr(t))return{sources:[vS()]};const s=P(t);if(s.sources=function(t,i,e){if(St(t))return[Xk(t,i,e)];if(Ia(t)&&St(t[0])){const s=[];for(const n of t)s.push(Xk(n,i,e));return s}return[vS()]}(s.sources,s,i),"contentProtection"in s&&delete s.contentProtection,"drm"in s&&delete s.drm,"ads"in s){const t=function(t,i){if(!Ia(t))return[];const e=[];for(let s of t)s=ix(s,i),s&&e.push(s);return e}(s.ads,e);0===t.length?delete s.ads:s.ads=t}const n=!gS(s.sources),r=s.ads&&s.ads.length>0;if(n&&!r?delete s.ads:r&&!n&&(s.sources=[]),"textTracks"in s){const t=function(t){if(!Ia(t))return[];const i=[];for(let e of t)e=tx(e),""!==e.src&&i.push(e);return i}(s.textTracks);0===t.length?delete s.textTracks:s.textTracks=t}"poster"in s&&(s.poster=Q(s.poster)),"streamType"in s&&(s.streamType=function(t){switch(t){case"live":case"dvr":case"vod":return t}}(s.streamType)),"vr"in s&&(s.vr=function(t){const i=t||{};return i.stereoMode=function(t){return function(t){switch(t){case"":case"horizontal":case"vertical":return!0;default:return!1}}(t)?t:""}(i.stereoMode),{panoramaMode:Fk(i.panoramaMode,Boolean(i[360])),stereoMode:i.stereoMode?Qk(i.stereoMode):Uk.NONE,nativeVR:Boolean(i.nativeVR)}}(s.vr));if("analytics"in s||(null==i?void 0:i.analytics)){const t=mS(s.analytics),e=i&&i.analytics||[];s.analytics=function(t,i){const e=P(t);for(const s of i){const i=!t.some((t=>t.integration===s.integration));i&&s.integration!==Bk&&e.push(s)}return e}(t,e)}return"mutedAutoplay"in s&&(s.mutedAutoplay=MS(s.mutedAutoplay)),"timeServer"in s&&delete s.timeServer,"playAdsAfterTime"in s&&(s.playAdsAfterTime=pM(s.playAdsAfterTime)),s.blockContentIfAdError=function(t){return void 0!==t&&"boolean"==typeof t&&Boolean(t)}(s.blockContentIfAdError),s}Qi(),r(),r(),r();var Oc=function(){function t(t){this.gH=t}return t.prototype._H=function(t){var i,e,s,n,r,o,h,a=[];if(!t)return"";var u=t.length%4;if(u>0)for(;u++<4;)t+=this.gH.charAt(64);for(i=0;i<t.length;i+=4)e=(h=this.gH.indexOf(t.charAt(i))<<18|this.gH.indexOf(t.charAt(i+1))<<12|(r=this.gH.indexOf(t.charAt(i+2)))<<6|(o=this.gH.indexOf(t.charAt(i+3))))>>>16&255,s=h>>>8&255,n=255&h,a[i/4]=String.fromCharCode(e,s,n),64===o&&(a[i/4]=String.fromCharCode(e,s)),64===r&&(a[i/4]=String.fromCharCode(e));return a.join("")},t.prototype.vH=function(t,i){var e,s,n,r,o,h,a,u=[],c="";if((h=t.length%3)>0)for(;h++<3;)c+=this.gH.charAt(64),t+="\0";for(h=0;h<t.length;h+=3)s=(e=t.charCodeAt(h)<<16|t.charCodeAt(h+1)<<8|t.charCodeAt(h+2))>>18&63,n=e>>12&63,r=e>>6&63,o=63&e,u[h/3]=this.gH.charAt(s)+this.gH.charAt(n)+this.gH.charAt(r)+this.gH.charAt(o);return a=(a=u.join("")).slice(0,a.length-c.length),i||(a+=c),a},t.lh=new t(function(){var t,i,e,s,n=[],r=["object","$","undefined","function","Cannot find module '","MODULE_NOT_FOUND","*","com.widevine.alpha","urn:mpeg:dash:mp4protection:2011","^","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed","__proto__","@@iterator","getUTCHours","setUTCFullYear","25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?","SegmentBase","RateChangeEvent","Symbol(","Symbol.",'; codecs="'];for(t=0;t<r.length;t+=1)for(i=r[t],e=0;e<i.length;e+=1)s=i.charAt(e),-1===n.indexOf(s)&&n.push(s);return n.join("")}()),t.wH=new t(function(t){return t._H("aDtm.Dd_DE.4DuN$CeaD $t?FUa0ac'NlYsgU]dU*|sMCON9NL.i'YU M:.LiEb5TLaTOu18F|'v*:s7C41nOMop")}(t.lh)),t}();function sx(t){return"string"==typeof t}function nx(t){return"number"==typeof t}r(),r(),r();var rx={}.toString;var ox,hx=Array.isArray||function(t){return"[object Array]"===rx.call(t)};function ax(t,i){return hx(t)&&t.every(i)}!function(t){t.HTML5="html5",t.ANDROID="android",t.IOS="ios",t.TVOS="tvos",t.ANDROIDTV="androidtv",t.TIZEN="tizen",t.WEBOS="webos",t.CHROMECAST="chromecast",t.ROKU="roku",t.FIRETV="firetv",t.CHROMECASTCAF="chromecastcaf",t.THEOLIVEWEB="theoliveweb",t.KEPLER="kepler"}(ox||(ox={}));var ux,cx=_.keys(ox).map((function(t){return ox[t]}));function lx(t){return-1!==cx.indexOf(t)}!function(t){t.HESP="hesp",t.MULTIVIEW="multiview",t.THEOADS="theoads",t.MILLICAST="millicast"}(ux||(ux={}));var dx,fx=_.keys(ux).map((function(t){return ux[t]}));function gx(t){return-1!==fx.indexOf(t)}function _x(t){try{var i=Oc.wH._H(t),e=JSON.parse(i);if(!function(t,i){var e,s=function(t){return"object"==typeof t&&null!==t}(t),n=sx(t.key),r=sx(t.customer_id),o=nx(t.generation_date),h=nx(t.expiration_date),a=ax(t.domains_page,sx),u=ax(t.domains_source,sx),c=ax(t.sdks,i?lx:sx),l=function(t){return"boolean"==typeof t}(t.send_impression);t.features?e=ax(t.features,i?gx:sx):(e=!0,t.features=[]);if(!(s&&n&&r&&o&&h&&a&&u&&c&&l&&e))return!1;return!0}(e,!1))throw new b("The provided license could not be decoded correctly.");return e}catch(t){throw new b("The provided license could not be decoded correctly.")}}function vx(){return dx||(dx={zu:Yf.href,mH:gi.parent&&gi.parent!==s,pH:mx()}),dx}ld(),ds();var wx=["http:","https:","ftp:","ws:","wss:"];function mx(){var t;try{if(null==gi?void 0:gi.top)return gi.top.location.href}catch(t){}return null==gi||null==(t=gi.document)?void 0:t.referrer}var px=function(t){return t[t.AH=0]="AH",t[t.yH=1]="yH",t[t.bH=2]="bH",t}({}),Ax=class{constructor(t,i,e,s,n=[],r="",o=Date.now(),h=[],a=!0){this.MH=t,this.TH=i,this.SH=e,this.NH=s,this.IH=n,this.DH=r,this.EH=o,this.kH=h,this.xH=a}},yx=function(t){return t.yH="expired",t.LH="invaliddomain",t.CH="invalidsource",t.jH="invalidfeature",t.ua="error",t}({}),bx=class t{OH(t,i){let e=[];St(t.sources)?e=[t.sources]:Ia(t.sources)&&(e=t.sources),this.RH(t,e,i),this.PH(e,i)}RH(t,i,e){if(gr(t)||0===e.SH.length||Dx(e.SH))return;if(!i.every((t=>this.zH(t,e)))){const t="invalidsource",i=Lu.BH(t);throw new qi(Tx(t),i)}}PH(t,i){for(const e of t)dS(e)&&fS(e)&&!e.bypassLicense&&this.UH([ux.HESP],i)}QH(i){return this.FH(i.kH)&&this.YH(i)?t.VH(i.NH)?0:1:2}UH(t,i){for(const e of t)if(!Qa(i.IH,e)){const t="invalidfeature",i=Lu.GH(t,e);throw new qi(Tx(t),i)}}FH(t){return 0===t.length||t.some((t=>this.WH(t)))}WH(t){return"web"===function(t){switch(t){case ox.ANDROID:return rn.Md;case ox.ANDROIDTV:case ox.FIRETV:return rn.Td;case ox.IOS:return rn.Nd;case ox.TVOS:return rn.Id;case ox.CHROMECAST:case ox.CHROMECASTCAF:return rn.Dd;case ox.THEOLIVEWEB:return rn.Ed;default:return rn.hd}}(t)}static VH(t){const i=Number(new Date);return!!t&&i<=t}YH(t){return!(this.ZH&&0!==t.TH.length&&!Dx(t.TH))||!!(this.ZH&&this.HH(t.TH)&&this.XH(t.TH))}HH(t){return Ex(this.GM.zu,t)}XH(t){if(!this.GM.mH)return!0;if(this.qH)return!0;const i=this.KH();return!!i&&Ex(i,t)}KH(){if(!this.GM.mH)return;const t=ql.ancestorOrigins;return t&&t.length>0?t[t.length-1]:this.GM.pH?this.GM.pH:void 0}zH(i,e){return!!t.JH(i,e.SH)}static JH(t,i){return Ex(this.$H(t),i)}static $H(t){return Ic(t)?t:dS(t)&&t.src||""}constructor(t,i,e){this.qH=t,this.tX=i,this.GM=e,this.ZH=xx(this.GM)}},Mx=class{QH(t){return 0}OH(t,i){}UH(t,i){}};function Tx(t){switch(t){case"invaliddomain":return vt.LICENSE_INVALID_DOMAIN;case"invalidsource":return vt.LICENSE_INVALID_SOURCE;case"expired":return vt.LICENSE_EXPIRED;case"invalidfeature":return vt.LICENSE_INVALID_FEATURE;case"error":return vt.LICENSE_ERROR}}var Sx="25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?",Nx=di((()=>{const t="\\.",i="(\\*|"+Sx+")";return new RegExp("ip-range\\("+i+t+i+t+i+t+i+"\\)")}));function Ix(t,i){let e=t,s=i;if(!e)return!1;if(s=s.trim(),"*"===s)return!0;if(e=e.replace(/\.+$/,""),s===e)return!0;if(Et(s,"ip-range(")){const t="\\.",i=s.match(Nx()),n=t=>"*"===t?"("+Sx+")":t;if(null!==i&&5===i.length){const s=new RegExp("^"+i[1]+t+n(i[2])+t+n(i[3])+t+n(i[4])+"$");return null!==e.match(s)}}return s="."+s,-1!==e.indexOf(s,e.length-s.length)}function Dx(t){return t.some((t=>"*"===t))}function Ex(t,i){const e=Fe.Ah(t);if(!kx(e))return!0;for(const s of i){if(Ix(e.hostname,s))return!0;if(Ix(pb(t),s))return!0}return!1}function kx(t){return-1!==wx.indexOf(t.protocol)}function xx(t){const i=Fe.Ah(t.zu);return kx(i)&&!function(t){return Ix(t.hostname,"localhost")}(i)&&!function(t){return Ix(t.hostname,"theoplayer.doubleclick.net")}(i)}var Lu=class{static GH(t,i){return"The requested feature '"+i+"' is not available with the license for this player."}static BH(t){return"invaliddomain"===t?this.iX:"invalidsource"===t?this.eX:"expired"===t?this.sX:"invalidfeature"===t?this.nX:this.rX}};Lu.rX="The license for this player is invalid.",Lu.sX="The usage license for this video player has expired.",Lu.iX="The current domain is incompatible with the license for this player.",Lu.eX="The provided video source is incompatible with the license for this player.",Lu.nX="The requested feature is not available with the license for this player.",r(),r();var Kc=function(t){return t[t.oX=1]="oX",t[t.hX=4]="hX",t[t.aX=5]="aX",t[t.uX=9]="uX",t}({});function Lx(t){const i=[t.mR,t.cX,t.lX];switch(t.cX){case 1:i.push(t.$x);break;case 4:i.push(t.xE),i.push(t.lt);break;case 5:i.push(t.lt);break;case 9:i.push(t.YA)}return i}r();var hn=new Array(256);for(let t=0;t<256;t+=1)hn[t]=(t<16?"0":"")+t.toString(16);function Cx(){const t=ja(),i=(4294967296*x.random()|0)+t&3029421624,e=(4294967296*x.random()|0)+t&3595553209,s=(4294967296*x.random()|0)+t&1130486254,n=(4294967296*x.random()|0)+t&1284287105;return hn[255&i]+hn[i>>>8&255]+hn[i>>>16&255]+hn[i>>>24&255]+"-"+hn[255&e]+hn[e>>>8&255]+"-"+hn[e>>>16&15|64]+hn[e>>>24&255]+"-"+hn[63&s|128]+hn[s>>>8&255]+"-"+hn[s>>>16&255]+hn[s>>>24&255]+hn[255&n]+hn[n>>>8&255]+hn[n>>>16&255]+hn[n>>>24&255]}function jx(t){return _m(t.replace(/-/g,""))}function Ox(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(t=>{const i=16*x.random()|0;return("x"===t?i:3&i|8).toString(16)}))}function Rx(){return Fe.Og()}r(),r(),Qi(),r();var Px,zx="theoplayer-session-id";function Bx(){if(!Px){const t=jy.$b(zx);t?Px=t:(Px=Cx(),jy.tM(zx,Px))}return Px}r(),r();var Ux=/[^\x00-\x7E]/g;function Qx(t){return"\\u"+Pc(t.charCodeAt(0).toString(16),4,"0")}var Fx="https://license.theoplayer.com";function Yx(t){const i=function(t){const i=[];return function(t,i,e){return JSON.stringify(t,i,e).replace(Ux,Qx)}(t,((t,e)=>{if(_o(e)){if(-1!==i.indexOf(e))return null;i.push(e)}return e}))}(function(t){return[t.dX,t.fS,t.MH,t.cj,t.fX,t.gX,t._X.map(Lx)]}(t));return Oc.wH.vH(i)}var Vx=class{get _X(){return this.J_}vX(){return Boolean(this.fX)}get fX(){return this.wX}async mX(t){if(!(await this.AX.pX()).xH)return;const i={cX:Kc.oX,lX:ja(),$x:t};await this.lZ(i)}async yX(t){if(!(await this.AX.pX()).xH)return;const i={cX:Kc.uX,lX:ja(),YA:t};await this.lZ(i)}async bX(t,i){const e={cX:Kc.hX,lX:ja(),xE:i,lt:t};await this.lZ(e)}async MX(t){const i={cX:Kc.aX,lX:ja(),lt:t};await this.lZ(i)}async lZ(t){const i=await this.AX.pX();"a:n[_O*[C4C-N$_@_MYY $D]iOp]N$_-_]th_:c|aen?C:pH"===this.TX.vH(i.MH)&&t.cX!==Kc.aX||(t.cX===Kc.oX?this.SX():this.vX()||this.SX(),t.mR=this.bT++,this.J_.push(t),!function(t){return t===Kc.oX||t===Kc.aX}(t.cX)?this.J_.length>this.NX&&await this.IX():await this.DX())}async DX(t){for(void 0===t&&(t=!1);this.J_.length>0;)await this.IX(t)}async EX(t){const i=await this.AX.pX();return{dX:ja(),fS:Bx(),MH:this.TX.vH(i.MH)||"dev",cj:this.ZT,fX:this.wX,gX:this.kX,_X:t}}async IX(t){void 0===t&&(t=!1);const i=this.J_.splice(0,this.xX),e=await this.EX(i);t?this.YI(e):this.LX(e),this.CX=Rx()}async LX(t){const i=Yx(t),e=new Gs({zu:Fx,GN:i,zI:!1,oI:Ee.ON,aI:{"Content-Type":Si.HF},CI:4e3,LI:Ve.POST});try{const t=await this.OQ.hI(e);await t.FN()}catch(t){(new Image).src="https://licensing.theoplayer.com/t?"+i}}YI(t){const i=Yx(t);this.OQ.YI({zu:Fx,GN:i,VN:Si.HF})}SX(){this.vX()&&this.DX(),this.wX=Cx(),this.bT=0}gn(){Ff.jX(this.OX),m(this.RX),this.DX()}constructor(t,i,e,s=Oc.lh,n=0,r=1){this.ZT=t,this.OQ=i,this.AX=e,this.TX=s,this.NX=n,this.xX=r,this.J_=[],this.wX=null,this.CX=0,this.kX="unknown",this.bT=0,this.PX=()=>{Rx()-this.CX>6e4&&this.DX()},this.OX=()=>{this.DX(!0)},Ff.zX(this.OX),this.RX=v(this.PX,6e4)}};r(),il(),r(),r();var Gx=0;var Wx=c,Zu=self.requestAnimationFrame||self.webkitRequestAnimationFrame||self.mozRequestAnimationFrame,Ti=self.cancelAnimationFrame||self.webkitCancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelRequestAnimationFrame;Zu&&Ti||(Zu=function(t){const i=Rx(),e=x.max(0,16-(i-Gx)),s=u((()=>t(i+e)),e);return Gx=i+e,s},Ti=Wx),Zu=Zu.bind(self),Ti=Ti.bind(self),ds();var Zx=Ro.Uf||Ro.Ka&&Ro.Jf<13;function Hx(t,i,e){const s=t.getImageData(i,e,1,1).data;return 0===s[0]&&0===s[1]&&0===s[2]&&0===s[3]}var Xx=class{get ga(){var t;return null!=(t=this.Za)?t:this.Za=function(t){return{drawImage(i){for(var e=arguments.length,s=new Array(e>1?e-1:0),n=1;n<e;n++)s[n-1]=arguments[n];return t.BX(i,...s)},texImage2D:(i,e,s,n,r,o)=>t.UX(i,e,s,n,r,o),requestVideoFrameCallback:i=>t.QX(i),cancelVideoFrameCallback:i=>t.FX(i)}}(this)}BX(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];const n=this.YX;return void 0!==n&&(t.drawImage(n,...e),!0)}UX(t,i,e,s,n,r){let o=this.YX;return void 0!==o&&(Zx&&(o=this.VX(o)),t.texImage2D(i,e,s,n,r,o),!0)}QX(t){const i=this.GX++,e=this.WX(t,i);return this.ZX.set(i,{HX:t,XX:e}),i}FX(t){const i=this.ZX.get(t);void 0!==i&&(this.ZX.delete(t),i.XX())}WX(t,i){const e=this.YX;if(void 0===e)return ya;if(e instanceof HTMLVideoElement&&e.requestVideoFrameCallback){const s=e.requestVideoFrameCallback(((e,s)=>{this.ZX.delete(i),t(e,s)}));return()=>e.cancelVideoFrameCallback(s)}{let e;const s=n=>{this.qX()?(this.ZX.delete(i),this.KX=!1,t(n,void 0)):e=Zu(s)};return e=Zu(s),()=>Ti(e)}}qX(){return(!this.t.KE||this.KX)&&!this.t.wk&&this.t.fk>=Fn.Iz}VX(t){let i=this.JX;void 0===i&&(i=h.createElement("canvas"),this.JX=i);const e=i.getContext("2d"),s=this.t,n=s.Tk,r=s.yk,o=i.width,a=i.height;e.clearRect(0,0,i.width,i.height),o===n&&a===r||(i.width=n,i.height=r),e.drawImage(t,0,0,n,r);let u=!1;return n>0&&Hx(e,n-1,0)&&(i.width=o,u=!0),r>0&&Hx(e,0,r-1)&&(i.height=a,u=!0),u&&e.drawImage(t,0,0,n,r),i}gn(){this.ZX.forEach((t=>t.XX())),this.ZX.clear(),this.t.fn(Zi.$y,this.$X),this.t.fn(Zi.bb,this.tq),this.YX=void 0,this.JX=void 0}constructor(t){this.YX=void 0,this.Za=void 0,this.JX=void 0,this.ZX=pc(),this.GX=1,this.KX=!0,this.tq=()=>{this.KX=!0},this.$X=()=>{this.YX=this.t.jk(),this.ZX.forEach(((t,i)=>{t.XX(),t.XX=this.WX(t.HX,i)}))},this.t=t,this.t.yn(Zi.$y,this.$X),this.t.yn(Zi.bb,this.tq),this.$X()}};r(),r(),r();var Th=function(t){return t.pn="dimensionchange",t}({}),qx=class extends tu{get Tu(){return 0}get Su(){return 0}},Kx=class extends Jr{constructor(t,i){super(Th.pn),this.width=t,this.height=i}};r(),r();var Jx,$x=class{constructor(t,i){this.we=t,this.HX=i}},tL=class extends $x{get Tu(){return this.iq}get Su(){return this.nq}gn(){this.rq.disconnect()}constructor(t,i){super(t,i),this.iq=0,this.nq=0,this.dp=t=>{if(t.length>0){const i=t[t.length-1].contentRect;this.nq=i.width,this.iq=i.height,this.HX(this.nq,this.iq)}},this.rq=new gi.ResizeObserver(this.dp),this.rq.observe(this.we)}};r(),r(),ds();var iL=["Webkit","Moz","O","ms"],eL=(()=>{let t=!1;try{if(void 0!==gi&&"function"==typeof gi.addEventListener){const i=_.defineProperty({},"passive",{get(){t=!0}});gi.addEventListener("testPassiveEventSupport",ya,i),gi.removeEventListener("testPassiveEventSupport",ya,i)}}catch(t){}return t})(),sL=ll();function nL(t){return sL.has(t)||sL.set(t,function(t){const i=(Jx||(Jx=gi&&gi.document&&gi.document.createElement("span")),Jx);if(!i||!i.style)return t;if(void 0!==i.style[t])return t;const e=t.charAt(0).toUpperCase()+t.slice(1);for(const t of iL){const s=t+e;if(void 0!==i.style[s])return s}return t}(t)),sL.get(t)}function rL(t){const i=t.style;i.position="absolute",i.left="0",i.right="0",i.bottom="0",i.top="0",i.overflow="scroll",i.zIndex="-1",i.visibility="hidden"}function oL(t){const i=t.style;i.position="absolute",i.left="0",i.top="0",i[nL("transition")]="0s"}var hL=class extends $x{gn(){Ti(this.oq),this.oq=0,this.hq.removeEventListener("scroll",this.aq),this.uq.removeEventListener("scroll",this.aq),dn(this.cq),s&&s.removeEventListener("resize",this.lq)}get Tu(){return this.we.getBoundingClientRect().height||this.iq||0}get Su(){return this.we.getBoundingClientRect().width||this.nq||0}constructor(t,i,e){super(t,i),this.oq=0,this.nq=NaN,this.iq=NaN,this.dq=void 0,this.tr=()=>{const t=1e5;this.fq.style.width=t+"px",this.fq.style.height=t+"px",this.hq.scrollLeft=t,this.hq.scrollTop=t,this.uq.scrollLeft=t,this.uq.scrollTop=t,0===this.uq.scrollTop&&Zu(this.tr)},this.gq=()=>{const t=this.Su,i=this.Tu;this.HX(t,i),this.nq=t,this.iq=i,this.tr(),this.oq=0},this.aq=()=>{if(this.oq)return;const t=this.Su,i=this.Tu;t===this.nq&&i===this.iq||(this.oq=Zu(this.gq))},this.lq=()=>{this.dq||(this.dq=u(this._q,66))},this._q=()=>{this.dq=void 0,this.vq()},this.vq=()=>{this.aq()};const n=function(t,i){return s.getComputedStyle(t,void 0).getPropertyValue(i)||t.style[i]}(t,"position");e||"static"!==n||(t.style.position="relative");const r=h.createElement("div");this.cq=r,this.hq=h.createElement("div"),this.fq=h.createElement("div"),this.uq=h.createElement("div"),this.wq=h.createElement("div"),rL(this.hq),rL(this.uq),oL(this.fq),function(t){oL(t),t.style.width="200%",t.style.height="200%"}(this.wq),r.appendChild(this.hq),r.appendChild(this.uq),this.hq.appendChild(this.fq),this.uq.appendChild(this.wq),t.appendChild(r),this.hq.addEventListener("scroll",this.aq),this.uq.addEventListener("scroll",this.aq),s&&s.addEventListener("resize",this.lq),this.aq()}},aL=class extends tu{bn(t){this.rq||("function"==typeof gi.ResizeObserver?this.rq=new tL(this.we,this.dp):this.rq=new hL(this.we,this.dp,t))}gn(){this.Bo(),this.rq&&(this.rq.gn(),this.rq=void 0)}get Tu(){return this.rq?this.rq.Tu:0}get Su(){return this.rq?this.rq.Su:0}constructor(t){super(),this.rq=void 0,this.dp=(t,i)=>{this.yo(new Kx(t,i))},this.we=t}};r(),il(),r();var uL=class extends Jr{constructor(){super($s.aa)}};r();var cL=function(){if(!h)return;const t=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]];for(let i of t)if(i[1]in h)return{mq:i[0],Jo:i[1],Pm:i[2],pq:i[3],Qe:i[4],Aq:i[5]}}();r();var lL=class extends Jr{constructor(){super($s.fa)}},dL=class t extends tu{static na(t){return Boolean(cL&&h[cL.pq]&&cL.mq in t)}co(){const t=this.we[cL.mq]();t&&t.then?t.then(this.yq,this.bq):(h.removeEventListener(cL.Aq,this.bq),h.addEventListener(cL.Aq,this.bq))}bo(){const t=h[cL.Jo]();t&&t.then?t.then(this.yq,this.bq):(h.removeEventListener(cL.Aq,this.bq),h.addEventListener(cL.Aq,this.bq))}Mq(){const t=this.cs,i=this.we===h[cL.Pm];this.cs=i,t!==i&&this.yo(new uL)}Tq(){this.yo(new sk)}gn(){this.Bo(),h.removeEventListener(cL.Qe,this.yq),h.removeEventListener(cL.Aq,this.bq)}constructor(i){super(),this.cs=!1,this.yq=()=>this.Mq(),this.bq=()=>this.Tq(),this.we=i,this.ea=t.na(i),h.addEventListener(cL.Qe,this.yq),this.Mq()}},fL=class t extends tu{static na(t){return Ro.Ka&&("webkitEnterFullscreen"in t||"webkitSupportsPresentationMode"in t)}co(){this.we.webkitSupportsPresentationMode&&this.we.webkitSupportsPresentationMode("fullscreen")?Ro.Ka?requestAnimationFrame((()=>this.we.webkitSetPresentationMode("fullscreen"))):this.we.webkitSetPresentationMode("fullscreen"):this.we.webkitEnterFullscreen()}bo(){this.we.webkitSupportsPresentationMode&&this.we.webkitSupportsPresentationMode("inline")?this.we.webkitSetPresentationMode("inline"):this.we.webkitExitFullscreen()}Mq(){const t=this.cs;let i;i=this.we.webkitPresentationMode?"fullscreen"===this.we.webkitPresentationMode:Boolean(this.we.webkitDisplayingFullscreen),this.cs=i,t!==i&&this.yo(new uL)}gn(){this.Bo(),this.we.removeEventListener("webkitbeginfullscreen",this.yq),this.we.removeEventListener("webkitendfullscreen",this.yq),this.we.removeEventListener("webkitpresentationmodechanged",this.yq)}constructor(i){super(),this.cs=!1,this.yq=()=>this.Mq(),this.we=i,this.ea=t.na(i),this.we.addEventListener("webkitbeginfullscreen",this.yq),this.we.addEventListener("webkitendfullscreen",this.yq),this.we.addEventListener("webkitpresentationmodechanged",this.yq),this.Mq()}},gL=class extends tu{get ea(){return!!this.Sq&&this.Sq.ea}get cs(){return this.Nq}co(){this.Sq?this.Sq.co():this.yo(new sk)}bo(){for(const t of this.Iq)t.cs&&t.bo()}Dq(t){this.Sq=t}Eq(t){this.Iq.push(t),t.yn($s.aa,this.Mq),t.yn($s.ua,this.Ds),this.Mq()}kq(t){ra(this.Iq,t),t.fn($s.aa,this.Mq),t.fn($s.ua,this.Ds)}xq(){for(const t of this.Iq)if(t.cs)return!0;return!1}tr(){this.Sq=void 0,this.Nq=!1;const t=this.Iq.slice();for(const i of t)this.kq(i),i.gn();this.Mq()}gn(){this.Bo(),this.tr()}constructor(...t){super(...t),this.Iq=[],this.Sq=void 0,this.Nq=!1,this.Mq=()=>{const t=this.Nq,i=this.xq();t!==i&&(this.Nq=i,this.yo(new uL))}}},_L=class extends tu{get ea(){return!!this.Lq&&this.Cq.ea}get cs(){return this.Cq.cs}co(){this.Lq&&this.Cq.co()}bo(){this.Cq.bo()}jq(){this.Cq.yn([$s.aa,$s.fa],this.Mq),this.Cq.yn($s.ua,this.Ds)}Oq(){this.Cq.fn([$s.aa,$s.fa],this.Mq),this.Cq.fn($s.ua,this.Ds)}Yn(){const t=this.Cq,i=this.t.Ck();if(t===i)return;this.ca=!0;const e=this.cs,s=this.ea;e&&this.bo(),this.Oq(),this.Cq=i,this.jq(),e&&!this.cs&&this.ea?this.co():this.bo(),this.ca=!1,s!==this.ea&&this.yo(new lL),e!==this.cs&&this.yo(new uL)}gn(){this.Bo(),this.Oq(),this.t.fn(Zi.Ky,this.Rq)}constructor(t,i){super(),this.ca=!1,this.Rq=()=>this.Yn(),this.Mq=t=>{this.ca||this.yo(t)},this.t=t,this.Lq=i,this.Cq=new ut,this.jq(),this.t.yn(Zi.Ky,this.Rq),this.Yn()}};r(),r(),r();var vL=function(t){return t.MODE_CHANGE="presentationmodechange",t.ERROR="error",t}({}),wL=class extends Jr{constructor(t){super(vL.MODE_CHANGE),this.presentationMode=t}};r(),r();var mL=class extends tu{iu(t){for(const i of this.J_)t.yn(i,this.Pq);this.zq.push(t)}Bq(t){for(const i of this.J_)t.fn(i,this.Pq);this.zq.push(t)}gn(){this.Bo();for(const t of this.zq)this.Bq(t);nt(this.zq)}constructor(t,i=!1,e){super(e),this.zq=[],this.Uq=t=>{Fs((()=>{this.Ds(t)}))},this.J_=t,this.Pq=i?this.Uq:this.Ds}},Yt=class extends gs{iu(t){t.Ly(this.Qq),this.zq.push(t)}Bq(t){t.Py(this.Qq),ra(this.zq,t)}gn(){this.Bo();for(const t of this.zq)t.Py(this.Qq);nt(this.zq)}constructor(t,i=!1){super(t),this.zq=[],this.Uq=t=>{Fs((()=>{this.Ds(t)}))},this.Qq=i?this.Uq:this.Ds}};r();var pL=class extends ua{get error(){return this.errorObject.message}ma(){return this}constructor(t){super(vL.ERROR),this.errorObject=t}};r();var AL=class extends qi{constructor(t,i,e){super(t,i,e)}};ds();var yL=class extends gs{get ga(){return this.Za||(this.Za=this.ma()),this.Za}ma(){return function(t){let i,e={get currentMode(){return t.Uo()},requestMode(i){const e=DS(i);e&&t.Lo(e)},supportsMode(i){const e=DS(i);return!!e&&t.Vo(e)},addEventListener(t,e){i.yn(t,e)},removeEventListener(t,e){i.fn(t,e)}};return i=new Yt(e,!0),i.iu(t),e}(this)}Lo(t){this.zo!==t&&(this.zo=t,this.Ko=!0,this.qo(t))}Uo(){return this.zo}Vo(t){switch(t){case Ba.NATIVE_PICTURE_IN_PICTURE:return this.Qo.Cz;case Ba.FULLSCREEN:return this.Zo.ea;case Ba.INLINE:return!0}return!1}qo(t){switch(this.Go.Ty(),t){case Ba.FULLSCREEN:V(this.Go.Wo((t=>this.Fq(t))));break;case Ba.NATIVE_PICTURE_IN_PICTURE:V(this.Go.Wo((t=>this.Yq(t))));break;case Ba.INLINE:V(this.Go.Wo((t=>this.Vq(t))))}}async Fq(t){yi(t),await this.Qo.bo().catch(ya),yi(t);try{await this.Gq(),this.yo(new wL(this.zo))}catch(i){const e=new AL(vt.FULLSCREEN_ERROR,"Failed to enter fullscreen.");throw this.yo(new pL(e)),yi(t),this.Lo(Ba.INLINE),e}finally{this.Ko=!1}}async Yq(t){yi(t),await this.Jo().catch(ya),yi(t);try{await this.Qo.co(),this.yo(new wL(this.zo))}catch(i){const e=new AL(vt.PICTURE_IN_PICTURE_ERROR,"Failed to enter native picture-in-picture.");throw this.yo(new pL(e)),yi(t),this.Lo(Ba.INLINE),e}finally{this.Ko=!1}}async Vq(t){yi(t),await this.Jo().catch(ya),yi(t),await this.Qo.bo().catch(ya),this.yo(new wL(this.zo)),this.Ko=!1}async Gq(){if(this.Zo.cs)return;const t=this.Zo.zy([$s.aa,$s.ua]);if(this.Zo.co(),await t,!this.Zo.cs)throw new b("Failed to enter fullscreen.")}async Jo(){if(!this.Zo.cs)return;const t=this.Zo.zy([$s.aa,$s.ua]);if(this.Zo.bo(),await t,this.Zo.cs)throw new b("Failed to exit fullscreen.")}wi(){this.Ko||(this.zo!==Ba.FULLSCREEN||this.Zo.cs?this.zo!==Ba.FULLSCREEN&&this.Zo.cs&&this.Lo(Ba.FULLSCREEN):this.Lo(Ba.INLINE))}gn(){this.Zo.fn($s.aa,this.Mq),this.Zo.fn($s.ua,this.Tq),this.Qo.fn(Au.kz,this.Wq),this.Qo.fn(Au.xz,this.Wq),this.Qo.fn(Au.ua,this.Zq),this.Bo()}constructor(t,i){super(),this.zo=Ba.INLINE,this.Ko=!1,this.Go=new La,this.Za=void 0,this.Mq=()=>{this.wi()},this.Tq=()=>{this.Ko||(this.yo(new Uc(new qi(vt.FULLSCREEN_ERROR,"Failed to enter fullscreen."))),this.wi())},this.Wq=()=>{this.Ko||(this.zo!==Ba.NATIVE_PICTURE_IN_PICTURE||this.Qo.Lz?this.zo!==Ba.NATIVE_PICTURE_IN_PICTURE&&this.Qo.Lz&&this.Lo(Ba.NATIVE_PICTURE_IN_PICTURE):this.Lo(Ba.INLINE))},this.Zq=()=>{this.Ko||(this.yo(new pL(new AL(vt.PICTURE_IN_PICTURE_ERROR,"Unexpected native picture-in-picture error."))),this.Wq())},this.Zo=t,this.Qo=i,this.Zo.yn($s.aa,this.Mq),this.Zo.yn($s.ua,this.Tq),this.Qo.yn(Au.kz,this.Wq),this.Qo.yn(Au.xz,this.Wq),this.Qo.yn(Au.ua,this.Zq)}};function bL(t){let i;return{get url(){return t.zu},get method(){return t.LI},get headers(){return i||(i=t.aI.RN()),i},get body(){return t.GN},get useCredentials(){return t.zI},get type(){return t.YA},get subType(){return t.OI},get mediaType(){return t.RI},get responseType(){return t.oI}}}function ML(t){switch(t.toLowerCase()){case"arraybuffer":return Ee.LN;case"json":return Ee.CN;case"stream":return Ee.jN;default:return Ee.ON}}function TL(t){switch(t.toUpperCase()){case"POST":return Ve.POST;case"PUT":return Ve.PUT;case"DELETE":return Ve.DELETE;case"HEAD":return Ve.HEAD;case"OPTIONS":return Ve.OPTIONS;default:return Ve.GET}}function SL(t){switch(t.toLowerCase()){case"manifest":return ar.fI;case"segment":return ar.gI;case"preload-hint":return ar._I;case"content-protection":return ar.vI;default:return ar.dI}}function NL(t){switch(t.toLowerCase()){case"initialization-segment":return cl.wI;case"fairplay-license":return cl.mI;case"fairplay-certificate":return cl.pI;case"widevine-license":return cl.AI;case"widevine-certificate":return cl.yI;case"playready-license":return cl.bI;case"clearkey-license":return cl.MI;case"aes128-key":return cl.TI;default:return cl.dI}}function IL(t){switch(t.toLowerCase()){case"audio":return ol.SI;case"video":return ol.NI;case"text":return ol.ON;case"image":return ol.II;default:return ol.dI}}r(),r(),r(),r();var DL=class{get Hq(){return this.Xq.rM}get ga(){return this.Za||(this.Za=this.qq()),this.Za}get Kq(){return this.Jq}get $q(){return!this.Jq}get tK(){return this.iK>0}get iD(){return this.eD}JC(){this.Jq=!0,this.Xq.sM(null)}eK(){this.Xq.nM(new Fy(this.sK))}nK(t){if(!this.$q)throw new k("Cannot respond more than once");if(!_o(t))throw new k("Expected valid response");this.eD=this.rK(t),this.JC()}oK(){try{const t=this.hK(this.ga);t?this.aK(t):this.tK||this.Kq||this.JC()}catch(t){this.sK.push(t),this.eK()}}aK(t){if(this.Kq)throw new b("Request has been redirected or a response already exists");if(pr(t))this.uK(t);else{if("function"!=typeof t)throw new k("Expected promise or function");{const i=new xh,e=t=>{t?i.nM(t):i.sM(void 0)};try{const s=t(e);pr(s)&&i.Sy(s)}catch(t){i.nM(t)}this.uK(i.rM)}}}async uK(t){try{this.iK++,await t,this.iK--,this.tK||this.Kq||(this.sK.length?this.eK():this.JC())}catch(t){this.iK--,this.sK.push(t),this.tK||this.Kq||this.eK()}}constructor(t,i){this.cK=t,this.hK=i,this.Xq=new xh,this.sK=[],this.Za=void 0,this.Jq=!1,this.eD=void 0,this.iK=0}},EL=class t extends DL{get GN(){return this.lK}get aI(){return this.cK.aI}get hI(){return this.cK.hI}get iD(){return this.eD}get nI(){return this.cK.nI}get uI(){return this.cK.uI}get zu(){return this.cK.lI}static dK(t,i,e){const s=void 0===t.body?e:t.body;return new qt({rI:s,hI:i.hI,oI:i.hI.oI,aI:t.headers,nI:t.status,uI:t.statusText,lI:t.url,cI:!0},i)}qq(){return function(t){let i;const e=bL(t.hI);return{get closed(){return!t.$q},get request(){return e},get url(){return t.zu},get status(){return t.nI},get statusText(){return t.uI},get headers(){return i||(i=t.aI.RN()),i},get body(){return t.GN},respondWith:i=>t.nK(i),waitUntil:i=>t.aK(i)}}(this)}rK(i){return t.dK(i,this.cK,this.lK)}constructor(t,i,e){super(t,i),this.lK=e,this.oK()}};r();var kL=class extends DL{get GN(){return this.cK.GN}get $q(){return this.fK&&!this.Jq}get aI(){return this.cK.aI}get LI(){return this.cK.LI}get gK(){return this._K}get iD(){return this.eD}get oI(){return this.cK.oI}get CI(){return this.cK.CI}get jI(){return this.cK.jI}get ly(){return this.cK.ly}get YA(){return this.cK.YA}get OI(){return this.cK.OI}get RI(){return this.cK.RI}get zu(){return this.cK.zu}get zI(){return this.cK.zI}get QI(){return this.cK.QI}get BI(){return this.cK.BI}get UI(){return this.cK.UI}get FI(){return this.cK.FI}qq(){return function(t){let i;return{get url(){return t.zu},get method(){return t.LI},get headers(){return i||(i=t.aI.RN()),i},get body(){return t.GN},get closed(){return!t.$q},get useCredentials(){return t.zI},get type(){return t.YA},get subType(){return t.OI},get mediaType(){return t.RI},get responseType(){return t.oI},redirect:i=>t.vK(i),respondWith:i=>t.nK(i),waitUntil:i=>t.aK(i)}}(this)}rK(t){const i=this.cK.GN,e=new qt({rI:i,aI:{},hI:this.cK,lI:this.cK.zu,oI:this.cK.oI,nI:200,uI:"OK"});return EL.dK(t,e,i)}vK(t){if(!this.$q)throw new k("Cannot redirect, already redirected or has a response");let i;i=Ic(t)?{url:t}:t,this._K=function(t,i){return new Gs({zu:void 0===t.url?i.zu:t.url,LI:void 0!==t.method?TL(t.method):void 0,aI:t.headers,GN:t.body,zI:t.useCredentials,YA:void 0!==t.type?SL(t.type):void 0,OI:void 0!==t.subType?NL(t.subType):void 0,RI:void 0!==t.mediaType?IL(t.mediaType):void 0,oI:void 0!==t.responseType?ML(t.responseType):void 0},i)}(i,this.cK),this.JC()}constructor(t,i,e){super(t,i),this._K=void 0,this.fK=e,this.oK()}};Qi();var xL=class extends Mc{wK(t){this.mK.wK(t)}pK(t){this.mK.pK(t)}AK(t){this.mK.AK(t)}vZ(t){this.mK.vZ(t)}AZ(t){this.mK.AZ(t)}constructor(t,i=!0){const e=new LL(t);super(e,i),this.mK=e}},LL=class{async hI(t){let i;try{i=await this.yK(t,t.ly)}catch(i){if(i instanceof yb)return await this.bK(i,t.ly);throw i}if(i=await this.MK(i,t.ly),jc(i))return i;throw new bb(i)}YI(t){return this.ZI.YI(t)}async yK(t,i){yi(i);let e,s=t;for(const t of this.TK.slice()){yi(i);const n=new kL(s,t,!e);if(!n.Kq)try{await n.Hq}catch(t){0;continue}n.gK&&!e?s=n.gK:n.iD&&!e&&(e=n.iD)}return e||this.ZI.hI(s)}async bK(t,i){let e;if(t instanceof bb)e=t.iD;else{const i=t.hI;e=new qt({rI:null,hI:i,oI:i.oI,nI:0,uI:""})}const s=await this.MK(e,i);if(s===e)throw t;if(jc(s))return s;throw new bb(s)}async MK(t,i){let e=t;for(const t of this.SK.slice()){yi(i);const s=await Promise.resolve(e.Zb().rI(i)),n=new EL(e,t,s);if(!n.Kq)try{await n.Hq}catch(t){0;continue}e=n.iD||e}return e}wK(t){this.TK.unshift(t)}pK(t){this.TK.push(t)}AK(t){ra(this.TK,t)}vZ(t){this.SK.unshift(t)}AZ(t){ra(this.SK,t)}gn(){this.ZI.gn(),nt(this.TK),nt(this.SK)}constructor(t){this.TK=[],this.SK=[],this.ZI=t}};r();var CL=class{get ga(){return this.Za||(this.Za=function(t){return{addRequestInterceptor(i){t.wK(i)},removeRequestInterceptor(i){t.AK(i)},addResponseInterceptor(i){t.vZ(i)},removeResponseInterceptor(i){t.AZ(i)}}}(this)),this.Za}wK(t){this.OQ.wK(t)}AK(t){this.OQ.AK(t)}vZ(t){this.OQ.vZ(t)}AZ(t){this.OQ.AZ(t)}constructor(t){this.OQ=t}},jL=class extends tu{get ga(){return this.Za||(this.Za=function(t){return{get online(){return t.XE},get estimator(){return function(t){return{get bandwidth(){return t.FY},get roundTripTime(){return t.YY}}}(t.NK)},setEstimator(i){t.IK(function(t){if(!t)return;return{get FY(){return AM(t.bandwidth)},get YY(){return AM(t.roundTripTime)},VY:i=>function(t){if(!t)return;return{DK(i){t.markRequestStart(i)},EK(i){t.markResponseStart(i)},kK(i,e){t.markResponseData(i,e)},xK(i){t.markResponseEnd(i)}}}(t.createMeasurer(bL(i)))}}(i))},addRequestInterceptor(i){t.wK(i)},removeRequestInterceptor(i){t.AK(i)},addResponseInterceptor(i){t.vZ(i)},removeResponseInterceptor(i){t.AZ(i)},addEventListener(i,e){t.yn(i,e)},removeEventListener(i,e){t.fn(i,e)}}}(this)),this.Za}get XE(){return this.LK.XE}get NK(){return this.UG.NK}IK(t){this.UG.IK(t)}wK(t){this.OQ.wK(t)}AK(t){this.OQ.AK(t)}vZ(t){this.OQ.vZ(t)}AZ(t){this.OQ.AZ(t)}gn(){this.Bo(),this.LK.fn(Zi.vb,this.CK),this.LK.fn(Zi._b,this.jK)}constructor(t,i,e){super(i),this.LK=t,this.OQ=i,this.UG=e,this.CK=t=>{this.yo(t)},this.jK=t=>{this.yo(t)},this.LK.yn(Zi.vb,this.CK),this.LK.yn(Zi._b,this.jK)}};r(),r(),r();var Le=function(t){return t.PERFORMANCE="performance",t.QUALITY="quality",t.BANDWIDTH="bandwidth",t}({});r();function OL(t,i,e,s,n,r){const o=[];let h=t-x.max(r,1),a=t+n;if(i&&e){const t=ur(e,1,5),s=i-t;h=x.min(h,s);const n=i+e+t;a=x.max(a,n)}0!==h&&s.SP(0,h)&&o.push([0,h]);return s.SP(a,1/0)&&o.push([a,1/0]),o}function RL(t){return t instanceof b&&"QuotaExceededError"===t.name}r();var PL={type:Le.BANDWIDTH};function zL(t){const i=P(PL);return Ic(t)?i.type=BL(t):_o(t)&&function(t){switch(t){case Le.PERFORMANCE:case Le.QUALITY:case Le.BANDWIDTH:return!0;default:return!1}}(t.type)&&(i.type=BL(t.type)),_o(t)&&_o(t.metadata)&&(i.metadata=function(t){const i={},e=pM(t.bitrate);return j(e)||(i.bitrate=e),i}(t.metadata)),i}function BL(t){switch(t){case"bandwidth":return Le.BANDWIDTH;case"performance":return Le.PERFORMANCE;case"quality":return Le.QUALITY}}r();var UL=class extends Jr{constructor(t){super("RK"),this.PK=t}};r();var QL=class extends Jr{constructor(t){super("zK"),this.BK=t}};r();var FL=class extends Jr{constructor(t){super("UK"),this.QK=t}},YL=class extends tu{FK(t){this.YK=t}get VK(){switch(this.GK.type){case Le.PERFORMANCE:return 0;case Le.QUALITY:return 1/0;case Le.BANDWIDTH:return this.GK.metadata&&void 0!==this.GK.metadata.bitrate?this.GK.metadata.bitrate:_i.Ld.xY();default:return _i.Ld.xY()}}get ga(){return this.Za}get BK(){return this.GK}set BK(t){this.GK=t,this.yo(new QL(t))}get PK(){return this.WK}set PK(t){this.WK=t,this.yo(new UL(t))}get ZK(){return x.min(this.WK,this.HK)}get QK(){return this.XK}set QK(t){this.XK=t,this.yo(new FL(t))}get qK(){return this.HK}get NK(){var t;return null!=(t=this.KK)?t:this.YK.pV}IK(t){this.KK=t}JK(t){let i=x.min(t,.8*this.HK);if(i=x.max(10,i),this.HK===i)return!1;const e=this.ZK;this.HK=i;const s=this.ZK;return s!==e&&this.yo(new UL(s)),!0}get $K(){return this.tJ}set $K(t){this.tJ=t}constructor(...t){super(...t),this.Za=function(t){return{get strategy(){return function(t){return{metadata:t.metadata,type:t.type}}(t.BK)},set strategy(i){t.BK=zL(i)},get targetBuffer(){return t.PK},set targetBuffer(i){const e=pM(i);j(e)||(t.PK=e)},get bufferLookbackWindow(){return t.QK},set bufferLookbackWindow(i){const e=pM(i);j(e)||(t.QK=e<=0?30:e)},get maxBufferLength(){return t.qK},get clearBufferWhenSettingTargetQuality(){return t.$K},set clearBufferWhenSettingTargetQuality(i){t.$K=pu(i)}}}(this),this.GK=PL,this.WK=20,this.XK=30,this.HK=1/0,this.tJ=!1,this.KK=void 0}};r(),r();var VL=class extends ua{ma(){return new GL}constructor(){super("vx")}},GL=class extends Jr{constructor(){super("change")}};r(),r();var WL=class extends tu{gn(){this.Bo();for(const t of this.J_)this.iJ.fn(t,this.eJ)}constructor(t,i,e){super(e),this.eJ=t=>{oM(t)&&Fs((()=>{this.yo(t.ga)}))},this.iJ=t,this.J_=i;for(const t of this.J_)this.iJ.yn(t,this.eJ)}},fo=class extends gs{gn(){this.Bo(),this.iJ.Py(this.eJ)}constructor(t,i){super(i),this.eJ=t=>{oM(t)&&Fs((()=>{this.yo(t.ga)}))},this.iJ=t,this.iJ.Ly(this.eJ)}};var ZL=class extends gs{get lB(){return this.yB}set lB(t){if(this.dB<=t)throw new b("Start time of a clip should be smaller than the end time.");this.yB!==t&&(this.yB=t,this.yo(new VL))}get dB(){return this.TB}set dB(t){if(t<=this.lB)throw new b("End time of a clip should be larger than the start time.");this.TB!==t&&(this.TB=t,this.yo(new VL))}get ga(){return this.Za||(this.Za=function(t){let i,e={get startTime(){return t.lB},set startTime(i){t.lB=i},get endTime(){return t.dB},set endTime(i){t.dB=i},addEventListener(t,e){i.yn(t,e)},removeEventListener(t,e){i.fn(t,e)}};return i=new fo(t,e),e}(this)),this.Za}tr(){0===this.yB&&this.TB===1/0||(this.yB=0,this.TB=1/0,this.yo(new VL))}sJ(){return new Mo([this.lB,this.dB],[!0,!0])}constructor(...t){super(...t),this.yB=0,this.TB=1/0}};r();var HL=class t extends xt{CE(t,i){const e=this.nJ.sJ().gP(t);super.CE(e,i),this.rJ()}RE(){return super.RE()||this.oJ}get hJ(){return this.vk().length?this.vk():this.nJ.sJ().ks()}vk(){return Mo.xn(super.vk()).Sn(this.nJ.sJ()).ks()}Pk(){this.RE()?this.CE(this.hJ.start(0)):this.aJ(),super.Pk(),this.rJ()}async ka(t,i){yi(i),this.oJ=!1,this.nJ.tr(),await super.ka(t,i)}gn(){return this.nJ.fn("vx",this.uJ),this.yE.fn(Zi.Eb,this.xc),this.cJ(),super.gn()}Gk(t){switch(t.type){case Zi.Mb:return this.yo(t),this.lJ(),!0;case Zi.bb:case Zi.Hy:return this.yo(t),this.dJ(),!0;case Zi.qy:if(this.fJ)return!0}return super.Gk(t)}get fJ(){return this.nJ.dB<this.ct}cJ(){this.gJ&&(Ti(this.gJ),this.gJ=void 0)}rJ(){const i=this.xE,e=this.fJ&&i>=this.nJ.dB-t.ed;this.oJ&&!e?(this.oJ=!1,this.KE&&this.Pk()):this.oJ||!e||this.wk||this._J||(this.oJ=!0,this.yo(new fa(i)),this.Rk())}aJ(){if(this.ct===1/0)return;const i=this.hJ,e=Mo.xn(i).gP(this.xE);ce(this.xE,e,t.ed)||this.CE(e)}constructor(i,e){super(i),this.oJ=!1,this.gJ=void 0,this._J=!1,this.uJ=()=>{this.aJ(),this.rJ()},this.xc=()=>{this.cJ(),this.rJ();this.fJ&&this.xE>=this.nJ.dB-t.vJ&&!this.OE&&(this.gJ=Zu(this.xc))},this.lJ=()=>{this._J=!0},this.dJ=()=>{this._J&&(this._J=!1,this.rJ())},this.nJ=e,this.nJ.yn("vx",this.uJ),this.yE.yn(Zi.Eb,this.xc)}};HL.vJ=1,HL.ed=.001,r();var XL=class{get wJ(){return this.mJ}set wJ(t){this.mJ=t}constructor(){this.mJ=!1}};r();var qL=class extends xt{RE(){return!this.mJ.wJ&&super.RE()}Rk(){this.pJ=!0,super.Rk()}Pk(){this.pJ=!1,super.Pk()}Gk(t){if(this.mJ.wJ)switch(t.type){case Zi.qy:return this.xE=0,this.pJ||(this.wk?this.AJ=!0:this.Pk()),!0;case Zi.bb:this.AJ&&(this.AJ=!1,this.Pk());break;case Zi.wb:if(this.AJ||super.RE())return!0}return super.Gk(t)}constructor(t,i){super(t),this.AJ=!1,this.pJ=!1,this.mJ=i}};r(),r();var KL=class{get ga(){return this.Za}get Uz(){return this.ta.VE.Uz}get Fz(){return this.ta.VE.Fz}get Bz(){return this.ta.VE.Bz}get yJ(){throw new b("Not implemented")}get bJ(){throw new b("Not implemented")}get Yz(){return this.ta.VE.Yz}get Qz(){return this.ta.VE.Qz}get Vz(){return this.ta.VE.Vz}constructor(t){this.ta=t,this.Za=function(t){return{get currentBandwidthEstimate(){return t.Fz},get corruptedVideoFrames(){return t.Uz},get droppedVideoFrames(){return t.Bz},get totalVideoFrames(){return t.Qz},get totalBytesLoaded(){return t.Yz},get bufferedSegments(){return t.Vz}}}(this)}};function JL(t){if(!t||!Ln(t))return{Bz:0,Uz:0,Qz:0,Fz:0,Yz:0,Vz:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}};if("function"==typeof t.getVideoPlaybackQuality){const i=t.getVideoPlaybackQuality();return{Bz:i.droppedVideoFrames,Uz:i.corruptedVideoFrames||0,Qz:i.totalVideoFrames}}return{Bz:t.webkitDroppedFrameCount||0,Uz:0,Qz:t.webkitDecodedFrameCount||0}}r(),r();var $L=class extends ua{ma(){return new tC}constructor(){super("MJ")}},tC=class extends Jr{constructor(){super("castingchange")}};r();var iC=class extends tu{get TJ(){var t,i;return(null==(t=this.SJ)?void 0:t.TJ)||(null==(i=this.NJ)?void 0:i.TJ)||!1}get IJ(){return this.SJ}get DJ(){return this.NJ}EJ(t){this.SJ=t,this.kJ(t)}xJ(t){this.NJ=t,this.kJ(t)}kJ(t){t.yn("statechange",this.LJ)}CJ(t){t.fn("statechange",this.LJ)}get ga(){return this.Za||(this.Za=function(t){let i;const e={get casting(){return t.TJ},get airplay(){var i;return null==(i=t.IJ)?void 0:i.ga},get chromecast(){var i;return null==(i=t.DJ)?void 0:i.ga},addEventListener(t,e){i.yn(t,e)},removeEventListener(t,e){i.fn(t,e)}};return i=new WL(t,["MJ"],e),e}(this)),this.Za}gn(){this.Bo(),this.SJ&&(this.CJ(this.SJ),this.SJ=void 0),this.NJ&&(this.CJ(this.NJ),this.NJ=void 0)}constructor(...t){super(...t),this.SJ=void 0,this.NJ=void 0,this.jJ=!1,this.Za=void 0,this.LJ=()=>{const t=this.jJ,i=this.TJ;t!==i&&(this.jJ=i,this.yo(new $L))}}};r(),r(),Qi();var eC=class{static async OJ(t,i){try{const e=new Gs({zu:t,oI:Ee.ON,LI:Ve.GET}),s=await i.hI(e);return(await s.rI()).trim()}catch(t){return void Tu(t)}}static RJ(t){try{const i=_x(t);return new Ax(i.key,i.domains_page,i.domains_source,i.expiration_date,i.features,i.customer_id,i.generation_date,i.sdks,i.send_impression)}catch(t){throw new qi(vt.LICENSE_ERROR,"Invalid license. No valid license was configured.")}}static PJ(t){void 0===t&&(t=Oc.lh),Fe.uA("The baked-in license is used. Please update the configuration with your license.");const i=t._H("F2b-iL'[FL[S"),e=JSON.parse('["F$(:_L50F|aY"]').map((i=>t._H(i))),s=JSON.parse('[".$hsF|b9_Ess*rS:F]Y\\""]').map((i=>t._H(i))),n=Number(new Date(Number(t._H('COD|aHpHa:p3Ceo3Co""')))),r=JSON.parse("[]").map((i=>t._H(i)));return new Ax(i,e,s,n,r)}static convertLicenseToDummyLicense(t){return new Ax(t.MH,t.TH,t.SH,864e13,t.IH,t.DH,Date.now(),t.kH,t.xH)}};r();var $h=class t{static xN(){return t.Ld||(t.Ld=sC.PS()?new sC:new Cy),t.Ld}static eM(i){t.xN().eM(i)}static kN(){t.xN().kN()}static $b(i){return t.xN().$b(i)}static tM(i,e){t.xN().tM(i,e)}static zJ(i){const e=t.$b(i);if(void 0!==e)return S(e)}static BJ(i){return"true"===t.$b(i)}};$h.Ld=void 0;var sC=class extends $h{static PS(){const t="foobar";try{return self.localStorage.setItem(t,t),self.localStorage.removeItem(t),!0}catch(t){}return!1}eM(t){self.localStorage.removeItem(t)}kN(){self.localStorage.clear()}$b(t){var i;return null!=(i=self.localStorage.getItem(t))?i:void 0}tM(t,i){self.localStorage.setItem(t,i)}},nC="https://validate.theoplayer.com/1/",rC=72e5,oC=x.floor(14399999*x.random()-rC),hC="THEOplayer.license",aC=class{async UJ(){const t=await this.QJ(this.FJ.license,this.FJ.licenseUrl);this.AX.YJ(t)}async QJ(t,i){let e,s=i;t?e=eC.RJ(t):s||(e=eC.PJ()),s||(s=nC+e.MH);const n=this.VJ();let r;if(e&&(r=this.GJ.QH(e),r===px.AH)){if(this.WJ(e.NH)&&this.WJ(null==n?void 0:n.NH)){const t=await this.ZJ(s);if(t)return t}return e}if(n){if(this.GJ.QH(n)===px.AH){if(this.WJ(null==n?void 0:n.NH)){const t=await this.ZJ(s);if(t)return t}return n}$h.eM(hC)}const o=await eC.OJ(s,this.OQ);let h;if(o){h=eC.RJ(o);if(this.GJ.QH(h)===px.AH)return $h.tM(hC,o),h;$h.eM(hC)}else if(!this.ZH&&e&&r===px.yH&&s===nC+e.MH)return eC.convertLicenseToDummyLicense(e);if(!e&&!h)throw new qi(vt.LICENSE_ERROR,"The given license is invalid!");this.HJ(null!=e?e:h,new qi(vt.LICENSE_ERROR,"The given license is invalid!"))}async OH(t){let i=await this.AX.pX();if(this.WJ(i.NH)){var e;const t=null!=(e=this.FJ.licenseUrl)?e:nC+i.MH,s=await this.ZJ(t);s&&(this.AX.YJ(s),i=s)}try{const e=this.GJ.QH(i);if(e===px.bH){const t=yx.LH;throw new qi(Tx(t),Lu.BH(t))}if(e===px.yH){const t=yx.yH;throw new qi(Tx(t),Lu.BH(t))}this.GJ.OH(t,i)}catch(t){this.XJ(t)}}async UH(t){const i=await this.AX.pX();try{this.GJ.UH(t,i)}catch(t){this.XJ(t)}}async ZJ(t){try{const i=await eC.OJ(t,this.OQ);if(void 0===i)return;const e=eC.RJ(i);return this.GJ.QH(e)===px.AH?($h.tM(hC,i),e):void 0}catch(t){return}}WJ(t){return!t||Number(new Date)+2592e5+oC>=t}VJ(){const t=$h.$b(hC);if(t)return eC.RJ(t)}HJ(t,i){this.AX.YJ(t),this.XJ(i)}XJ(t){throw Gr(t.message),this.qJ.MX(t.message),t}constructor(t,i,e,s,n,r){this.OQ=t,this.GJ=i,this.qJ=e,this.AX=s,this.FJ=n,this.GM=r,this.ZH=xx(r)}};r();var uC=class{YJ(t){this.KJ=t,this.JJ.sM()}get $J(){return this.KJ}async pX(){return this.KJ?Promise.resolve(this.KJ):(await this.JJ.rM,this.KJ)}constructor(){this.JJ=new xh}};r(),r();var cC=class extends ua{ma(){return new lC}constructor(){super("vx")}},lC=class extends Jr{constructor(){super("change")}};function dC(t){let i;const e={get fontFamily(){return t.t$},set fontFamily(i){t.t$=i},get fontColor(){return t.i$},set fontColor(i){t.i$=i},get fontSize(){return t.e$},set fontSize(i){t.e$=i},get backgroundColor(){return t.s$},set backgroundColor(i){t.s$=i},get windowColor(){return t.n$},set windowColor(i){t.n$=i},get edgeStyle(){return t.r$},set edgeStyle(i){t.r$=i},get marginTop(){return t.o$},set marginTop(i){t.o$=i},get marginBottom(){return t.h$},set marginBottom(i){t.h$=i},get marginLeft(){return t.a$},set marginLeft(i){t.a$=i},get marginRight(){return t.u$},set marginRight(i){t.u$=i},addEventListener(t,e){const s=Mt(t,Q);i.yn(s,e)},removeEventListener(t,e){const s=Mt(t,Q);i.fn(s,e)}};return i=new Su(e),t.yn(["vx"],(t=>i.yo(t.ga))),e}r();var fC={t$:void 0,i$:void 0,e$:void 0,s$:void 0,n$:void 0,r$:void 0,o$:void 0,h$:void 0,a$:void 0,u$:void 0},qu="THEOplayer.textTrackStyle.",gC=class t extends tu{get c$(){return this.l$}get t$(){return this.l$.t$}set t$(t){this.Yn({t$:t})}get i$(){return this.l$.i$}set i$(t){this.Yn({i$:t})}get e$(){return this.l$.e$}set e$(t){this.Yn({e$:t})}get s$(){return this.l$.s$}set s$(t){this.Yn({s$:t})}get n$(){return this.l$.n$}set n$(t){this.Yn({n$:t})}get r$(){return this.l$.r$}set r$(t){this.Yn({r$:t})}get o$(){return this.l$.o$}set o$(t){this.Yn({o$:t})}get h$(){return this.l$.h$}set h$(t){this.Yn({h$:t})}get u$(){return this.l$.u$}set u$(t){this.Yn({u$:t})}get a$(){return this.l$.a$}set a$(t){this.Yn({a$:t})}get ga(){return this.Za||(this.Za=dC(this)),this.Za}Yn(i){this.l$=Ei({},this.l$,i),t.d$(this.l$),this.yo(new cC)}static f$(){let t=Ei({},fC);return t.t$=$h.$b(qu+"fontFamily")||t.t$,t.i$=$h.$b(qu+"fontColor")||t.i$,t.e$=$h.$b(qu+"fontSize")||t.e$,t.s$=$h.$b(qu+"backgroundColor")||t.s$,t.n$=$h.$b(qu+"windowColor")||t.n$,t.r$=$h.$b(qu+"edgeStyle")||t.r$,t}static d$(t){$h.tM(qu+"fontFamily",t.t$||""),$h.tM(qu+"fontColor",t.i$||""),$h.tM(qu+"fontSize",t.e$||""),$h.tM(qu+"backgroundColor",t.s$||""),$h.tM(qu+"windowColor",t.n$||""),$h.tM(qu+"edgeStyle",t.r$||"")}constructor(){super(),this.Za=void 0,this.l$=t.f$()}};function _C(t,i){var e,s;t.style.marginLeft=(null!=(e=i.a$)?e:0)+"px",t.style.marginRight=(null!=(s=i.u$)?s:0)+"px",t.style.width="calc(100% - "+t.style.marginLeft+" - "+t.style.marginRight+")"}Qi(),r(),r(),r(),r();var vC=[Zi.so,Zi.wb,E.oP,Zi.Eb,Zi.mb,Zi.ub,Zi.Mb,Zi.bb,Zi.qy,Zi.pb,Zi.kb,Zi.Zy,E.wx,Zi.yb,Me.ua,bw.Xy,bw.Fb,Zi.Vy,Zi.Yy,Zi.xb,Zi.Cb,Zi.eb,Zi.ob,Zi.$y,Zi.Ky],wC={wz:!1};function mC(t){return t.md.YA===uh.FQ}r();var po=function(t){return t.g$="_$",t}({}),br=["_$"],Xi=function(t){return t[t.v$=0]="v$",t[t.jN=1]="jN",t[t.w$=2]="w$",t}({});r(),r(),il();var pC=["loadstart","encrypted","waitingforkey","webkitneedkey","msneedkey"],sl=function(t){return t.m$="p$",t.A$="y$",t.b$="M$",t}({}),AC=class extends tu{get md(){return this.KS}get gV(){return this.vN}async T$(t,i){const e=await this.KA.qA(t.VA,i),s=await e.kS();return await this.S$(s),s}N$(t){const i=this.SS;return i?0!==t.yV.length&&t.yV.some((t=>t.NS.VA===i.NS)):0!==this.KS.yV.length?t.yV.some((t=>this.KS.yV.some((i=>t.NS===i.NS)))):0===t.yV.length||!this.I$}D$(t){return this.E$.D$(t),this.KS=t,Promise.resolve()}k$(t){this.E$.k$(t)}async wy(){this.Bo(),this.vN.removeEventListener("loadedmetadata",this.x$);for(const t of pC)this.vN.removeEventListener(t,this.L$);await this.Go.gn(),this.C$(),await this.E$.tr(),await this.j$(void 0)}O$(t){t!==this.R$&&(this.R$=t,t?this.P$.sM(void 0):this.P$=new xh)}S$(t){return this.Go.Wo((()=>this.j$(t)))}async j$(t){if(t&&!this.vN.src&&!this.vN.srcObject)throw new lu(vt.CONTENT_PROTECTION_ERROR,"Attempted to attach MediaKeys to a sourceless MediaElement");if(!t&&(this.vN.src||this.vN.srcObject))throw new lu(vt.CONTENT_PROTECTION_ERROR,"Attempted to remove MediaKeys from a non-empty MediaElement");t&&!this.R$&&await this.P$.rM;const i=this.SS;i&&(await i.DS(this.vN),this.SS=void 0),t&&(await t.bn(this.vN),this.SS=t)}ka(t){return this.Go.Wo((()=>this.z$(t)))}z$(t){this.O$(!1);const i=this.cz.$E;if(Ic(t))this.vN.src=t;else if(function(t){if(void 0!==s.ManagedMediaSource&&t instanceof s.ManagedMediaSource)return!0;if("undefined"!=typeof MediaSource&&t instanceof MediaSource)return!0;return!1}(t))if(function(t){return"srcObject"in t&&Ro.Ka&&Ro.Jf>=17}(this.vN))try{this.vN.srcObject=t}catch(i){this.vN.src=URL.createObjectURL(t)}else this.vN.src=URL.createObjectURL(t);else yC(t)&&(this.vN.srcObject=t);this.cz.$E=i}B$(t){return this.Go.Wo((()=>this.U$(t)))}U$(t){this.z$(t),this.vN.load()}C$(){this.O$(!1),qd(this.vN)}async Q$(){this.SS&&await this.SS.tr()}constructor(t,i,e,s){super(),this.R$=!1,this.P$=new xh,this.I$=!1,this.Go=new La,this.SS=void 0,this.x$=()=>{this.I$=!0},this.L$=()=>{this.O$(!0)},this.KS=t,this.cz=i,this.vN=i.gV,this.E$=e,this.KA=s,this.vN.addEventListener("loadedmetadata",this.x$);for(const t of pC)this.vN.addEventListener(t,this.L$)}};function yC(t){return"undefined"!=typeof MediaStream&&t instanceof MediaStream}var bC=class extends AC{get TE(){return Mo.xn(this.vN.buffered)}get ct(){return this.vN.duration}get F$(){const t=this.ct;if(!isFinite(t))return!1;const i=this.TE;if(0===i.V)return!1;return t-i.jn(i.V-1)<Be}get ck(){return this.vN.preload}set ck(t){this.vN.preload=t}get _k(){return Mo.xn(this.vN.seekable)}get Y$(){return this.TE}get V$(){if(Ln(this.vN)&&(this.vN.videoWidth>0||this.vN.videoHeight>0))return this.TE}async FK(){const t=this.md;switch(t.MV){case BM.nL:case BM.rL:this.vN.setAttribute("crossorigin",t.MV);break;case BM.EI:default:this.vN.removeAttribute("crossorigin")}void 0!==t.ck?this.vN.preload=t.ck:this.vN.preload=Nr.QY,void 0!==t.TV?this.vN.title=t.TV:Wd(this.vN),t.G$?await this.B$(t.G$):await this.ka(t.$x),this.E$.$n(this,t)}N$(t){return!1}D$(t){return Promise.resolve(void 0)}W$(t){return!1}Z$(){return!yC(this.KS.G$)}async wy(){Wd(this.vN),await super.wy()}static H$(t,i){return!!i.canPlayType&&Boolean(i.canPlayType(t.VN))}};il(),r();var ii=class extends Jr{constructor(t){super(Zi.mb),this.currentTime=t}};r();var Gi=class extends Jr{constructor(){super(Zi.ub)}};r(),r();var MC=function(t){return t.X$="q$",t}({}),TC=class extends Jr{constructor(t){super("q$"),this.K$=t}},SC=class extends tu{get J$(){return this.t0}i0(t,i){const e=new Mo([t,i]);this.t0=this.t0.pP(e),this.yo(new TC(e))}e0(t,i){this.t0=this.t0.yP(new Mo([t,i]))}tr(){this.t0=Mo.PP()}gn(){this.Bo()}constructor(...t){super(...t),this.t0=Mo.PP()}};function NC(t,i){return void 0===i&&(i=new Gy({highWaterMark:1/0})),new kc(new IC(t,i),{highWaterMark:0})}r(),r(),r();var IC=class{start(t){this.JJ=t,this.s0()&&this.n0()}pull(){this.n_.length>0?this.r0():this.o0=!0,this.s0()&&this.n0()}cancel(t){return nt(this.n_),this.r_=0,this.o0=!1,this.Wg.cancel(t)}r0(){if(0===this.n_.length)return;const t=this.n_;this.n_=[],this.r_=0,this.o0=!1,this.JJ.enqueue(t)}s0(){if(this.o0)return!0;return this.h0-this.r_>0}n0(){if(this.a0)return;const t=this.Wg.read().then(this.u0).catch(this.yD);this.a0=t;const i=()=>{this.a0===t&&(this.a0=void 0)};t.then(i,i)}constructor(t,{size:i=(()=>1),highWaterMark:e=1}){this.n_=[],this.r_=0,this.JJ=void 0,this.o0=!1,this.a0=void 0,this.u0=t=>t.done?(this.r0(),void this.JJ.close()):(this.n_.push(t.value),this.r_+=this.c0(t.value),this.o0&&this.r0(),this.s0()?this.Wg.read().then(this.u0):void 0),this.yD=t=>{this.r0(),this.JJ.error(t)},this.Wg=t.getReader(),this.c0=i,this.h0=e}};ds(),il(),Qi(),r(),r(),r(),r(),Qi();var DC=class{l0(t){this.d0.push(t),this.Kb+=t.byteLength}f0(t){if(this.Kb<=t)return this.g0();const i=this.d0;let e=0,s=0;for(;s<i.length&&e+i[s].byteLength<=t;)e+=i[s].byteLength,s++;const n=i.slice(0,s);if(s<i.length&&e<t){const r=t-e;0,n.push(zr(i[s],0,r)),e+=r}return{d0:n,Kb:e}}_0(t){const i=this.f0(t);return 1===i.d0.length?i.d0[0]:ym(i.d0,i.Kb)}g0(){return{d0:this.d0,Kb:this.Kb}}v0(t){if(this.Kb<=t)return this.w0();const i=this.d0;let e=0,s=0;for(;s<i.length&&e+i[s].byteLength<=t;)e+=i[s].byteLength,s++;const n=i.splice(0,s);if(i.length>0&&e<t){const s=t-e;0,n.push(zr(i[0],0,s)),i[0]=zr(i[0],s),e+=s}return this.Kb-=e,{d0:n,Kb:e}}m0(t){const i=this.v0(t);return 1===i.d0.length?i.d0[0]:ym(i.d0,i.Kb)}w0(){const t=this.g0();return this.d0=[],this.Kb=0,t}p0(){const t=1===this.d0.length?this.d0[0]:ym(this.d0,this.Kb);return this.d0=[],this.Kb=0,t}constructor(){this.d0=[],this.Kb=0}},EC=class{A0(t,i){}y0(){}b0(t){this.n_.l0(t),this.M0(!1)}T0(){this.M0(!0)}S0(){return 0!==this.Ea||0!==this.n_.Kb}M0(t){for(;0!==this.n_.Kb;){if(!t&&this.N0>this.n_.Kb)return;switch(this.Ea){case 0:this.I0(t);break;case 1:this.D0(t);break;case 2:this.E0(t)}}}k0(){this.Ea=0,this.N0=8}I0(t){const i=Al(this.n_._0(this.N0)),e=new da,s=Z.sj(i,e);if(!s.JC)return this.N0=s.rj,void(t&&this.N0>this.n_.Kb&&this.x0(this.n_.Kb));const n=s.nj.YA;let r=s.nj.Kb;0===r&&(r=1/0),this.A0(n,r),this.L0(n)?this.C0(r):this.x0(r)}C0(t){this.Ea=1,this.N0=t}D0(t){const i=Al(this.n_.m0(this.N0)),e=new da,s=Z.$C(i,e,!t);if(!s.JC)throw new lT(e.tc);this.y0(),this.j0(s.tj),this.k0()}x0(t){this.Ea=2,this.N0=0,this.O0=t}E0(t){const i=this.n_.v0(this.O0);this.O0-=i.Kb;for(const t of i.d0)this.R0(t);(0===this.O0||t&&this.O0===1/0)&&(this.y0(),this.k0())}constructor(){this.n_=new DC,this.Ea=0,this.N0=0,this.O0=0,this.k0()}};function kC(t){return t instanceof lA}function xC(t){return t instanceof uA}function LC(t){return t instanceof hA||t instanceof Ec}function CC(t){return t instanceof Cp}function jC(t){return t instanceof cp}function OC(t){return t instanceof tA}function RC(t){return t instanceof Il}function PC(t){return t instanceof yA}function zC(t){return t instanceof Jn}function BC(t){return t instanceof vA}function UC(t){return t instanceof mA}function QC(t,i){const e=dl(t.boxes,BC);if(e&&e.flags.baseDataOffsetPresent)e.baseDataOffset=e.baseDataOffset.add(i);else for(const e of t.boxes)e instanceof mA&&e.flags.dataOffsetPresent&&(e.dataOffset=e.dataOffset+i)}r();var FC=class extends EC{start(t){this.JJ=t}transform(t){this.b0(t)}flush(){this.T0()}L0(t){return t===Rt.kL||t===Rt.mC||t===Rt.DC}j0(t){const i=this.P0(t);this.JJ.enqueue(i)}R0(t){this.JJ.enqueue(t)}P0(t){const i=ka(t.rI.rI);switch(t.YA){case"moov":return this.z0(i);case"sidx":return this.B0(i);case"moof":return this.U0(i)}return i}get Q0(){if(void 0===this.F0)throw new b("Expected to have found a movie header timescale.");return this.F0}Y0(t){const i=this.V0.get(t);if(void 0===i)throw new b("Expected to have found a media header timescale for track ID "+t+".");return i}z0(t){const i=BA(t);for(let t=0;t<i.boxes.length;t++){const e=i.boxes[t];e instanceof sA?i.boxes[t]=this.G0(e):e instanceof nA?i.boxes[t]=this.W0(e):e instanceof uA&&this.Z0(e)}for(const t of i.boxes)t instanceof tA&&this.H0(t);return i.serialize().join()}G0(t){this.F0=t.timescale;const i=GC(D.fromNumber(t.duration,!0),this.Q0,this.X0);return 0!==i.getHighBits()?this.W0(function(t){return new nA({creation:D.fromNumber(t.creationTime,!0),modification:D.fromNumber(t.modificationTime,!0),scale:t.timescale,duration:D.fromNumber(t.duration,!0)},t.nextTrackId,{rate:t.rate,volume:t.volume,matrix:t.matrix},t.flags)}(t)):(t.timescale=this.X0,t.duration=i.toInt(),t)}W0(t){return this.F0=t.timescale,t.timescale=this.X0,t.duration=GC(t.duration,this.Q0,this.X0),t}Z0(t){let i;for(let e=0;e<t.boxes.length;e++){const s=t.boxes[e];s instanceof hA?(i=s.trackId,t.boxes[e]=this.q0(s)):s instanceof Ec?(i=s.trackId,t.boxes[e]=this.K0(s)):s instanceof Cp?this.J0(s,i):s instanceof bp&&this.$0(s)}}q0(t){const i=GC(D.fromNumber(t.duration,!0),this.Q0,this.X0);return 0!==i.getHighBits()?this.K0(function(t){return new Ec({creation:D.fromNumber(t.creationTime,!0),modification:D.fromNumber(t.modificationTime,!0),duration:D.fromNumber(t.duration,!0)},t.trackId,t.volume,t.width,t.height,{layer:t.layer,alternateGroup:t.alternateGroup,matrix:t.matrix})}(t)):(t.duration=i.toInt(),t)}K0(t){return t.duration=GC(t.duration,this.Q0,this.X0),t}J0(t,i){for(let e=0;e<t.boxes.length;e++){const s=t.boxes[e];s instanceof Ep?t.boxes[e]=this.t1(s,i):s instanceof kp&&(t.boxes[e]=this.i1(s,i))}}t1(t,i){this.V0.set(i,t.timescale);const e=GC(D.fromNumber(t.duration,!0),t.timescale,this.X0);return 0!==e.getHighBits()?this.i1(function(t){return new kp({creation:D.fromNumber(t.creationTime,!0),modification:D.fromNumber(t.modificationTime,!0),scale:t.timescale,duration:D.fromNumber(t.duration,!0)},t.language,t.flags)}(t),i):(t.timescale=this.X0,t.duration=e.toInt(),t)}i1(t,i){return this.V0.set(i,t.timescale),t.timescale=this.X0,t.duration=GC(t.duration,t.timescale,this.X0),t}$0(t){for(const i of t.boxes)i instanceof pp?this.e1(i):i instanceof Ap&&this.s1(i)}e1(t){for(const i of t.entries)i.mediaTime=VC(i.mediaTime,this.Q0,this.X0),i.segmentDuration=VC(i.segmentDuration,this.Q0,this.X0)}s1(t){for(const i of t.entries)i.mediaTime=GC(i.mediaTime,this.Q0,this.X0),i.segmentDuration=GC(i.segmentDuration,this.Q0,this.X0)}H0(t){for(let i=0;i<t.boxes.length;i++){const e=t.boxes[i];e instanceof Il?this.n1(e):e instanceof qp?t.boxes[i]=this.o1(e):e instanceof Kp&&(t.boxes[i]=this.a1(e))}}n1(t){const i=this.Y0(t.trackId);t.defaultSampleDuration=VC(t.defaultSampleDuration,i,this.X0)}o1(t){const i=GC(D.fromNumber(t.fragmentDuration,!0),this.Q0,this.X0);return 0!==i.getHighBits()?this.a1(function(t){return new Kp(D.fromNumber(t.fragmentDuration,!0),t.flags)}(t)):(t.fragmentDuration=i.toInt(),t)}a1(t){return t.fragmentDuration=GC(t.fragmentDuration,this.Q0,this.X0),t}B0(t){let i=UA(t);return i=i instanceof IA?this.u1(i):this.c1(i),i.serialize().join()}u1(t){const i=t.timescale,e=GC(D.fromNumber(t.earliestPresentationTime,!0),i,this.X0);if(0!==e.getHighBits())return this.c1(function(t){return new DA(t.referenceId,t.timescale,D.fromNumber(t.earliestPresentationTime,!0),D.fromNumber(t.firstOffset,!0),t.references,t.flags)}(t));t.timescale=this.X0,t.earliestPresentationTime=e.toInt();for(const e of t.references)e.subsegmentDuration=VC(e.subsegmentDuration,i,this.X0);return t}c1(t){const i=t.timescale;t.timescale=this.X0,t.earliestPresentationTime=GC(t.earliestPresentationTime,i,this.X0);for(const e of t.references)e.subsegmentDuration=VC(e.subsegmentDuration,i,this.X0);return t}U0(t){const i=QA(t),e=i.getSize();for(const t of i.boxes)t instanceof Jn&&this.l1(t);const s=i.getSize();if(s!==e){const t=s-e;for(const e of i.boxes)e instanceof Jn&&QC(e,t)}return i.serialize().join()}l1(t){let i;for(let e=0;e<t.boxes.length;e++){const s=t.boxes[e];s instanceof vA?(i=this.Y0(s.trackId),this.d1(s,i)):s instanceof gA?t.boxes[e]=this.g1(s,i):s instanceof at?t.boxes[e]=this._1(s,i):s instanceof mA&&this.v1(s,i)}}d1(t,i){void 0!==t.defaultSampleDuration&&(t.defaultSampleDuration=VC(t.defaultSampleDuration,i,this.X0))}g1(t,i){const e=GC(D.fromNumber(t.baseMediaDecodeTime,!0),i,this.X0);return 0!==e.getHighBits()?this._1(function(t){return new at(D.fromNumber(t.baseMediaDecodeTime,!0),t.flags)}(t),i):(t.baseMediaDecodeTime=e.toInt(),t)}_1(t,i){return t.baseMediaDecodeTime=GC(t.baseMediaDecodeTime,i,this.X0),t}v1(t,i){let e=0,s=0;for(const n of t.samples){if(void 0!==n.duration){s+=n.duration;const t=VC(s,i,this.X0);n.duration=t-e,e=t}void 0!==n.compositionTimeOffset&&(n.compositionTimeOffset=YC(n.compositionTimeOffset,i,this.X0))}}constructor(t){super(),this.V0=pc(),this.X0=t}};function YC(t,i,e){return D.fromInt(t,!1).multiply(e).divide(i).toNumber()}function VC(t,i,e){return D.fromInt(t,!0).multiply(e).divide(i).toNumber()}function GC(t,i,e){return iu.tU(t).TU(iu.iU(e,!0)).DU(iu.iU(i,!0)).fU()}var WC=class{w1(t){return t.pipeThrough(new Ra(this.m1))}constructor(t){this.m1=new FC(t)}};r(),r();var ZC=function(t){return t[t.A1=64]="A1",t[t.b1=103]="b1",t[t.M1=107]="M1",t}({});function HC(t,i,e){const s=on(t,i);if(s!==e)throw new k("Expected descriptor with tag "+e+", but found "+s)}function XC(t,i){HC(t,i,3);const e=qC(t,i),s=i.tc+e,n=Ps(t,i),r=on(t,i),o=0!=(64&r),h=0!=(32&r),a=31&r;let u,c,l;if(0!=(128&r)&&(u=Ps(t,i)),o){c=ai(t,i,on(t,i))}h&&(l=ai(t,i,2));const d=function(t,i){HC(t,i,4);const e=qC(t,i),s=i.tc+e,n=on(t,i),r=on(t,i),o=r>>2,h=0!=(2&r),a=Ww(t,i,3),u=ul(t,i),c=ul(t,i);let l;if(i.tc<s){const e=function(t,i){return t.getUint8(i.tc)}(t,i);5===e&&(l=function(t,i){HC(t,i,5);const e=qC(t,i),s=ss(t,i,e);return{T1:5,S1:s}}(t,i))}return i.Wb(s),{T1:4,N1:n,I1:o,D1:h,E1:a,L1:u,C1:c,j1:l}}(t,i);return i.Wb(s),{T1:3,o:n,O1:u,zu:c,R1:a,P1:l,z1:d}}function qC(t,i){let e=0;for(let s=0;s<4;s++){const s=on(t,i);if(e=e<<7|127&s,!(128&s))break}return e}function KC(t,i){const e=on(t,i),s=on(t,i),n=on(t,i),r=on(t,i),o=3&on(t,i),h=31&on(t,i),a=[];for(let e=0;e<h;e++){const e=Ps(t,i);a.push(ss(t,i,e))}const u=on(t,i),c=[];for(let e=0;e<u;e++){const e=Ps(t,i);c.push(ss(t,i,e))}return{B1:e,U1:s,Q1:n,F1:r,Y1:o,V1:a,G1:c}}function Iu(t,i,e){if(e&&i.byte>=e)return;const s=t.$b(i.byte);return i.byte+=1,s}function JC(t,i){return function(t,i,e){let s=0,n=e;for(;n>0;)n-=1,s=256*s+Iu(t,i);return s}(t,i,2)}r(),r(),r(),r(),r(),r();var $C=class t{W1(t){this.Z1=this.Z1.concat(t.Z1),this.H1+=t.V}X1(t,i,e){const s=this.H1,n=e-i;n>0&&(this.Z1.push({q1:i,K1:e,J1:n,t2:s,i2:t}),this.H1+=n)}$b(t){for(const i of this.Z1)if(i.t2<=t&&t<i.t2+i.J1)return i.i2[t+i.q1-i.t2]}e2(t,i){let e=i;for(const i of this.Z1){const s=i.K1;for(let n=i.q1;n<s;n+=1,e+=1)t[e]=i.i2[n]}return e}get V(){return this.H1}set V(t){const i=this.Z1;let e=this.H1-t;if(!(t>=this.H1))if(this.H1=t,0!==t)for(let t=i.length-1;t>=0;t-=1){const s=i[t];if(e<=s.J1)return s.K1-=e,s.J1-=e,void(i.length!==t+1&&(i.length=t+1));e-=s.J1}else i.length=0}get rI(){const t=new Array(this.H1);let i=0;for(const e of this.Z1){const s=e.K1;for(let n=e.q1;n<s;n+=1,i+=1)t[i]=e.i2[n]}return t}s2(){const t=new T(this.H1);let i=0;for(const e of this.Z1){const s=e.K1;for(let n=e.q1;n<s;n+=1,i+=1)t[i]=e.i2[n]}return t}Zb(i){const e=new t;for(const t of this.Z1)e.X1(t.i2,t.q1,t.K1);return e._Q=i||Ei({},this._Q),e}constructor(){this.H1=0,this.Z1=[],this._Q={}}};r();var tj=[128,64,32,16,8,4,2,1];function ij(t,i){const e=x.floor(i.bit/8),s=0==(t.$b(e)&tj[i.bit%8])?0:1;return i.bit+=1,s}function _r(t,i,e){let s=0,n=e;for(;n>0;)n-=1,s=2*s+ij(t,i);return s}function $i(t,i){let e=0;for(;0===ij(t,i)&&e<32;)e+=1;return _r(t,i,e)+2**e-1}function ej(t,i){const e=$i(t,i);return 1&e?x.floor((e+1)/2):-x.floor(e/2)}function sj(t,i){const e=[],s={byte:1};let n;do{e.push(rj(t,i,s)),n=i.$b(s.byte)}while(void 0!==n&&128!==n);return e}function nj(t,i){let e,s=0;do{e=Iu(t,i),s+=e}while(255===e);return s}function rj(t,i,e){const s=nj(i,e),n=nj(i,e),r=e.byte,o=r+n;return e.byte=o,{n2:t,o2:s,h2:n,a2:r,u2:o,c2:i}}var oj=function(t){return t[t.l2=1]="l2",t[t.d2=2]="d2",t[t.f2=3]="f2",t[t.g2=4]="g2",t[t._2=5]="_2",t[t.w2=6]="w2",t[t.m2=7]="m2",t[t.A2=8]="A2",t[t.b2=9]="b2",t}({}),hj=[void 0,[1,1],[12,11],[10,11],[16,11],[40,33],[24,11],[20,11],[32,11],[80,33],[18,11],[15,11],[64,33],[160,99],[4,3],[3,2],[2,1]];function aj(t,i,e){let s=8,n=8;for(let r=0;r<e;r+=1){if(0!==n){n=(s+ej(t,i)+256)%256}s=0===n?s:n}}var uj=class{M2(){const t=this.T2;let i=x.max(0,this.S2+t.length-2);const e=this.N2,s=e.V;let n=0;for(;i<s;i+=1){const s=e.$b(i);0===s?n+=1:(3===s&&n>=2&&t.push(i),n=0)}this.S2=i-t.length}I2(t){const i=this.T2;let e=t;for(const t of i){if(!(t<=e))return e;e+=1}return e}$b(t){if(!(t>this.N2.V))return t>this.S2&&this.M2(),this.N2.$b(this.I2(t))}constructor(t){this.T2=[],this.S2=0,this.N2=t}};function cj(t){const i=new uj(t);let e,s,n,r,o,h,a=0,u=0,c=0,l=0;const d=i.$b(1),f={bit:32};if($i(i,f),100===d||110===d||122===d||144===d){const t=$i(i,f);3===t&&(e=ij(i,f)),$i(i,f),$i(i,f),ij(i,f);if(1===ij(i,f))for(let e=0;e<(3!==t?8:12);e+=1){1===ij(i,f)&&aj(i,f,e<6?16:64)}}const g=$i(i,f),_=$i(i,f);if(0===_)$i(i,f);else if(1===_){ij(i,f),ej(i,f),ej(i,f);const t=$i(i,f);for(let e=0;e<t;e+=1)ej(i,f)}$i(i,f),ij(i,f);const v=$i(i,f),w=$i(i,f),m=ij(i,f);0===m&&ij(i,f),ij(i,f);1===ij(i,f)&&(a=$i(i,f),u=$i(i,f),c=$i(i,f),l=$i(i,f));if(1===ij(i,f)){if(1===ij(i,f)){const t=_r(i,f,8);if(255===t)s=_r(i,f,16),n=_r(i,f,16);else{const i=hj[t];i&&(s=i[0],n=i[1])}}1===ij(i,f)&&ij(i,f);if(1===ij(i,f)){_r(i,f,3),ij(i,f);1===ij(i,f)&&(_r(i,f,8),_r(i,f,8),_r(i,f,8))}1===ij(i,f)&&($i(i,f),$i(i,f)),r=ij(i,f),1===r&&(o=_r(i,f,32),h=_r(i,f,32),ij(i,f))}return{width:x.floor(16*(v+1)-2*a-2*u),height:x.floor((2-m)*(w+1)*16-2*c-2*l),aR:s,uR:n,D2:r?h/(2*o):void 0,E2:e,L2:g}}function lj(t,i,e){void 0===e&&(e=1);const s=cT(Rs.dj(t),Rt.mC);if(s&&0!==s.Z.length)return function(t,i,e){void 0===e&&(e=1);var s;let n;n=void 0!==i?dl(t.Z,(t=>t.nj.Fj===i)):t.Z[0];const r=null==n||null==(s=n.MR)?void 0:s.MR;return r?os(r,e):void 0}(s,i,e)}function dj(t){const i=cT(Rs.dj(t),Rt.kL);if(!i)return;const e=i.nj.Lj,s=[];for(const t of i.Z){const i=t.nj.Fj,e=t.zj.nj.Lj;let h,a,u;for(const i of t.zj.Hj.Kj.$j.iO){const t=fj(i);var n,r,o;if(t)h=null!=(n=t.C2)?n:h,a=null!=(r=t.j2)?r:a,u=null!=(o=t.O2)?o:u}s.push({Fj:i,Lj:e,C2:h,j2:a,O2:u})}return{Lj:e,Z:s}}function fj(t){let i,e,s;if(t.YA===Rt.YL){var n;const e=KC(Al(t.OO.rI),new da);i=function(t){return"avc1."+gj(t.U1,2)+gj(t.Q1,2)+gj(t.F1,2)}(e),s=null==(n=function(t){if(0===t.V1.length)return;const i=t.V1[0],e=new $C;return e.X1(i,0,i.byteLength),cj(e)}(e))?void 0:n.D2}else if(t.YA===Rt.GL||t.YA===Rt.WL){const e=function(t,i){const e=i.qb(),s=Ru(t,e,8),n=Ru(t,e,2),r=Ru(t,e,1),o=Ru(t,e,5),h=Ru(t,e,32),a=[];for(let i=0;i<6;i++)a.push(Ru(t,e,8));const u=Ru(t,e,8);e.Gb(4);const c=Ru(t,e,12);e.Gb(6);const l=Ru(t,e,2);e.Gb(6);const d=Ru(t,e,2);e.Gb(5);const f=Ru(t,e,3);e.Gb(5);const g=Ru(t,e,3),_=Ru(t,e,16),v=Ru(t,e,2),w=Ru(t,e,3),m=Ru(t,e,1),p=Ru(t,e,2),A=Ru(t,e,8),y=[];for(let i=0;i<A;i++){const i=Ru(t,e,1);e.Gb(1);const s=Ru(t,e,6),n=Ru(t,e,16),r=[];for(let i=0;i<n;i++){const i=Ru(t,e,16),s=ss(t,new da(e.tc>>3),i);e.Gb(8*i),r.push({R2:i,P2:s})}y.push({z2:i,B2:s,U2:n,Q2:r})}return{B1:s,F2:n,Y2:r,V2:o,G2:a,W2:u,Z2:c,H2:l,X2:h,q2:d,K2:f,J2:g,t4:_,i4:w,e4:m,s4:v,Y1:p,n4:A,r4:y}}(Al(t.BO.rI),new da);i=function(t,i){let e=t.toString()+".";switch(i.F2){case 0:break;case 1:e+="A";break;case 2:e+="B";break;case 3:e+="C";break;default:return}switch(e+=i.V2.toString()+".",e+=function(t){let i=t;return i=i>>>1&1431655765|(1431655765&i)<<1,i=i>>>2&858993459|(858993459&i)<<2,i=i>>>4&252645135|(252645135&i)<<4,i=i>>>8&16711935|(16711935&i)<<8,i=i>>>16|i<<16,i}(i.X2).toString(16)+".",i.Y2){case 0:e+="L";break;case 1:e+="H";break;default:return}e+=i.W2.toString();const s=i.G2.reduce(((t,i)=>0===t?i:i+1),0);for(let t=0;t<s;t++)e+="."+i.G2[t].toString(16).toUpperCase();return e}(t.YA,e)}else if(t.YA===Rt.eC||t.YA===Rt.sC||t.YA===Rt.nC||t.YA===Rt.rC){const e=function(t,i){const e=i.qb(),s=Ru(t,e,8),n=Ru(t,e,8),r=Ru(t,e,7),o=Ru(t,e,6),h=Boolean(Ru(t,e,1)),a=Boolean(Ru(t,e,1)),u=Boolean(Ru(t,e,1)),c=Ru(t,e,4);return Ru(t,e,28),Ru(t,e,32),Ru(t,e,32),Ru(t,e,32),Ru(t,e,32),{o4:s,h4:n,a4:r,u4:o,c4:h,l4:a,d4:u,f4:c}}(Al(t.JO.rI),new da);i=function(t,i){const e=t.toString(),s=Pc(i.a4.toString(),2,"0"),n=Pc(i.u4.toString(),2,"0");return e+"."+s+"."+n}(t.YA,e)}else if(t.YA===Rt.HL){const e=function(t,i){const e=i.qb(),s=Ru(t,e,8);e.Gb(24);const n=Ru(t,e,8),r=Ru(t,e,8),o=Ru(t,e,4),h=Ru(t,e,3),a=qo(t,e),u=Ru(t,e,8),c=Ru(t,e,8),l=Ru(t,e,8),d=Ru(t,e,16),f=new Array(8);for(let i=0;i<d;i++)f[i]=Ru(t,e,8);return{B1:s,a4:n,u4:r,g4:o,_4:h,v4:a,nR:u,rR:c,oR:l,w4:d,m4:f}}(Al(t.QO.rI),new da);i=function(t,i){let e=t.toString()+".";return e+="0"+i.a4+".",e+=Pc(""+i.u4,2,"0")+".",e+=Pc(""+i.g4,2,"0")+".",e+=Pc(""+i._4,2,"0")+".",e+=Pc(""+i.nR,2,"0")+".",e+=Pc(""+i.rR,2,"0")+".",e+=Pc(""+i.oR,2,"0")+".",e+="0"+i.v4,e}(t.YA,e)}else if(t.YA===Rt.qL){const e=function(t,i){const e=i.qb();e.Gb(1);const s=Ru(t,e,7),n=Ru(t,e,3),r=Ru(t,e,5),o=qo(t,e),h=qo(t,e),a=qo(t,e),u=qo(t,e),c=qo(t,e),l=qo(t,e),d=Ru(t,e,2);e.Gb(3);const f=qo(t,e);let g;return f?g=Ru(t,e,4):e.Gb(4),{cj:s,A4:n,y4:r,b4:o,M4:h,T4:a,S4:u,N4:c,I4:l,D4:d,E4:f,x4:g}}(Al(t.VO.rI),new da);i=function(t,i,e){let s=t.toString()+".";if(s+=i.A4+".",s+=""+Pc(""+i.y4,2,"0"),s+=(0===i.b4?"M":"H")+".",s+=(1===i.T4?12:10)+".",s+=(1===i.A4?0:i.S4)+".",s+=""+i.N4+i.I4+(1===i.N4&&1===i.I4?i.D4:"0"),e&&e.sR===hT.ON_SCREEN_COLOURS){const t=e;s+="."+Pc(""+t.nR,2,"0")+"."+Pc(""+t.rR,2,"0")+"."+Pc(""+t.oR,2,"0")+"."+(t.hR?1:0)}return s}(t.YA,e,t.GO)}else if(t.YA===Rt.uC){e=function(t){const i=t.z1;switch(i.N1){case ZC.A1:return function(t){var i;if(!(null==(i=t.j1)?void 0:i.S1))return"mp4a.40";const e=function(t,i){let e=Ru(t,i,5);31===e&&(e=32+Ru(t,i,6));const s=Ru(t,i,4);let n;return 15===s&&(n=Ru(t,i,24)),{L4:e,C4:s,j4:n,O4:Ru(t,i,4)}}(Al(t.j1.S1),new Lw);return"mp4a.40."+e.L4}(i);case ZC.b1:return"mp4a.40.2";case ZC.M1:return"mp4a.40.34"}}(XC(Al(t.IO.rI),new da))}else if(t.YA===Rt.lC)e="fLaC";else{if(t.YA!==Rt.oC)return(t.YA===Rt.wC||t.YA===Rt.vC)&&t.HO?fj(t.HO):void 0;e="ec-3"}return{C2:i,j2:e,O2:s}}function gj(t,i){const e=t.toString(16);return Pc(e,i,"0")}function _j(t,i){const e=Rs.dj(Al(t)),s=function(t,i){let e;for(const n of t.Z){var s;const t=null==(s=n.MR)?void 0:s.MR;if(t){const s=n.nj.Fj,r=dl(i.Z,(t=>t.Fj===s)),o=H.tU(t,r.Lj);e&&!o.WB(e)||(e=o)}}return e}(cT(e,Rt.mC),i),n=cT(e,Rt.SC);return{lB:s.BB(),R4:n.rI}}r(),r();var vj=Ro.qf,wj=class extends tu{get PK(){return this.WK}set PK(t){this.WK=t}get QK(){return this.XK}set QK(t){this.XK=t}get ca(){return this.P4||this.z4.updating}B4(t,i,e){switch(t.YA){case Xi.v$:case Xi.jN:return this.U4((e=>this.Q4(t,i,e)),e);case Xi.w$:throw new b("Opaque segments are not supported on web.")}}F4(t,i){switch(t.YA){case Xi.v$:return this.U4((i=>this.Y4(t,i)),i);case Xi.jN:throw new b("Streaming initialization segments are not supported on web.");case Xi.w$:throw new b("Opaque initialization segments are not supported on web.")}}async Y4(t,i){this.V4?this.G4=dj(Al(t.rI)):(await this.W4(t,void 0,i),vj&&(this.Z4=!1,this.H4=t))}async Q4(t,i,e){vj&&this.Z4&&this.H4&&await this.Y4(this.H4,e);try{if(yi(e),this.V4&&this.G4){const n=await async function(t,i){switch(t.YA){case Xi.v$:return t;case Xi.jN:{const e=await Xy(t.rI,i);return yi(i),{YA:Xi.v$,rI:new T(e)}}case Xi.w$:throw new b("MediaBufferWrapper - Cannot convert opaque SegmentData to ArraySegmentData.")}}(t,e),r=_j(n.rI,this.G4);var s;t={YA:Xi.v$,rI:r.R4},i=Ei({},i,{rQ:r.lB+(null!=(s=i.rQ)?s:0)})}await this.W4(t,i,e),this.yo(new Jr(po.g$))}finally{t.YA===Xi.jN&&t.rI.cancel(new J).catch(ya)}}async W4(t,i,e){switch(yi(e),i&&await this.X4(i),t.YA){case Xi.v$:if(this.q4){const i=this.q4.w1(Wy(t.rI));return await this.K4(i,e)}return await this.J4(t.rI);case Xi.jN:if(this.q4){const i=this.q4.w1(t.rI);return await this.K4(i,e)}return await this.K4(t.rI,e)}}async K4(t,i){const e=this.t3.TE,s=NC(t).getReader();let n=!1;try{for(;;){const t=await Ao(s.read(),i);if(t.done){n=!1;break}yi(i);const e=ih(t.value);n=!0,await this.J4(e)}}catch(t){if(s.cancel(t).catch(ya),n){await this.i3();const t=this.t3.TE.Sn(e._P());for(let i=0;i<t.V;i++)await this.e3(t.Cn(i),t.jn(i))}throw t}}s3(t,i){return this.U4((()=>this.n3(t,i)))}async n3(t,i){this.z4.appendWindowStart===t&&this.z4.appendWindowEnd===i||(await this.i3(),this.z4.appendWindowStart=0,this.z4.appendWindowEnd=i,this.z4.appendWindowStart=t)}async X4(t){if(this.z4.timestampOffset!==t.rQ)try{this.z4.timestampOffset=t.rQ}catch(i){await this.i3(),this.z4.timestampOffset=t.rQ}}async J4(t){this.z4.appendBuffer(t),this.r3=!0,await this.o3()}h3(t,i,e){return this.U4((e=>this.e3(t,i,e)),e)}async e3(t,i,e){yi(e),this.z4.remove(t,i),await this.o3()}o3(){const t=this.t3.TE;return new Promise(((i,e)=>{let s,n=!1,r=()=>{n=!0},o=()=>{n=!1,s="error"},h=()=>{n=!1,s="aborted"},a=()=>{n=!1,s="sourceclose",u()},u=()=>{c(),n&&!s?(t.IP(this.t3.TE)||this.yo(new Jr(po.g$)),i()):e(new b(s))},c=()=>{this.z4.removeEventListener("update",r),this.z4.removeEventListener("error",o),this.z4.removeEventListener("abort",h),this.z4.removeEventListener("updateend",u),this.a3.fn(sl.A$,a)};this.z4.addEventListener("update",r),this.z4.addEventListener("error",o),this.z4.addEventListener("abort",h),this.z4.addEventListener("updateend",u),Ro.Nf&&Ro.Df<3&&this.a3.yn(sl.A$,a)}))}u3(){return this.U4((()=>this.i3()))}async i3(){if(this.a3.fk===Oj.KI){vj&&(this.Z4=!0),this.z4.updating&&(this.P4=!0);try{this.z4.abort()}catch(t){0,this.P4=!1}this.ca&&await this.o3().catch(ya)}}l3(){return"function"==typeof this.z4.changeType&&!Ro.Mf}D$(t){if(this.d3(),this.a3.fk===Oj.f3)return;var i;this.g3=t;const e=null!=(i=this.a3._3(t.VN))?i:t.VN;this.V4=mj(t.VN,this.v3),this.l3()&&!Cv(this.v3,e)&&(this.v3=e,this.z4.changeType(this.v3))}w3(){this.a3.fk!==Oj.qy||this.m3||this.ca||(this.z4.timestampOffset=this.z4.timestampOffset,this.a3.A3())}async U4(t,i){this.d3();const e=new Wt;e.Sy(this.y3.ly),i&&e.Sy(i);try{this.m3=t(e.ly),await this.m3,this.a3.A3(),this.ca&&await this.o3()}finally{this.m3=void 0,e.wy()}}d3(){if(this.m3)throw new b("Internal error")}async wy(){this.Bo(),this.y3.Ty(),this.m3&&(await this.m3.catch(ya),this.m3=void 0),this.z4.removeEventListener("updateend",this.b3),this.z4.removeEventListener("bufferedchange",this.M3)}constructor(t,i,e,s,n){var r;if(super(),this.WK=20,this.XK=30,this.P4=!1,this.r3=!1,this.m3=void 0,this.y3=new Wt,this.Z4=!1,this.H4=void 0,this.V4=!1,this.G4=void 0,this.b3=()=>{this.P4=!1},this.M3=t=>{t.removedRanges&&this.yo(new Jr(po.g$))},this.a3=i,this.t3=t,this.z4=e,this.z4.addEventListener("updateend",this.b3),this.z4.addEventListener("bufferedchange",this.M3),this.g3=s,this.v3=n,this.V4=mj(s.VN,n),null==(r=i.md)?void 0:r.jp){var o;const t=null!=(o=i.md.T3)?o:1e5;this.q4=new WC(t)}}};function mj(t,i){return Et(t,"audio/mp4")&&Et(i,"audio/mpeg")}il(),r();var pj=class{get TE(){if(this.S3.fk===Oj.f3)return Mo.PP();let t=Mo.xn(this.z4.buffered).Sn(new Mo([0,1/0]));const i=this.N3;return void 0!==i&&t.V>0&&t.jn(t.V-1)===i&&(t=t.pP(Mo.OP(i))),t}F$(){return!!this.N3&&this.TE.fP().gr(this.N3)}I3(){const t=this.TE;this.N3=t.V>0?t.jn(t.V-1):0,this.S3.D3()}w3(){this.N3=void 0}constructor(t,i){this.N3=void 0,this.S3=i,this.z4=t}};function Aj(t){const i=t.CS("codecs");return i?i.split(",").map((t=>t.trim())):[]}function yj(t,i){return!("opus"===t)&&!("opus"===i)||t===i}function bj(t,i){const e=Mj(t)||Tj(t),s=Mj(i)||Tj(i);return!e&&!s||t.split(".")[0]===i.split(".")[0]}function Mj(t){return/^(ac-3|dac3|ec-3|dec3|ec\+3|ac-4|dac4)/.test(t)}function Tj(t){return/^(dvav|dva1|dvhe|dvh1)/.test(t)}function Wo(t,i){if(t===i)return!0;const e=t.split("."),s=i.split("."),n=e[0];if(n!==s[0])return!1;if("mp4a"===n){const[,t,i]=e,[,n,r]=s;if(t!==n)return!1;if(Number(i)!==Number(r))return!1}return!0}function Sj(t,i,e,s,n,r,o){const h=new pj(n,t),a=new wj(h,t,n,e,r);return new Nj(t,i,e,s,h,a,o)}r();var Nj=class extends tu{get TE(){return this.t3.TE}get md(){return this.KS}get VN(){return this.WS}get E3(){return this.x3}get L3(){return this.C3.J$}get PK(){return this.j3.PK}set PK(t){this.j3.PK=t}get QK(){return this.j3.QK}set QK(t){this.j3.QK=t}get ca(){return this.j3.ca}F$(){return this.t3.F$()}I3(){this.t3.I3()}w3(){this.t3.w3(),this.j3.w3()}O3(t,i){this.C3.i0(t,i)}R3(t,i){this.C3.e0(t,i)}P3(){return this.j3.u3()}B4(t,i,e){return this.j3.B4(t,i,e)}F4(t,i,e){return this.j3.F4(t,e)}s3(t,i){return Ro.Nf&&Ro.Df<3?this.j3.s3(t,1/0):this.j3.s3(t,i)}async wS(t,i,e){this.R3(t,i);const s=this.TE;await this.j3.h3(t,i,e);const n=0!==s.V&&0===this.TE.V;(Ro.ag||Ro.kf)&&n&&this.cz.Wb(this.cz.xE)}N$(t){const i=t.VN;if(this.WS===i)return!0;const e=this.z3.get(i);if(void 0!==e)return e;const s=this.B3(t);return this.z3.set(i,s),s}B3(t){const i=this.a3._3(t.VN);if(void 0===i)return!1;const e=KA(this.WS),s=KA(i),n=Aj(e),r=Aj(s);if(this.j3.l3()){if(!function(t,i){return uw(t,i,bj)}(n,r))return!1;if(Ro.dg&&!function(t,i){return uw(t,i,yj)}(n,r))return!1}else{if(e.YA!==s.YA)return!1;if(!function(t,i){return uw(t,i,Wo)}(n,r))return!1}return!0}async D$(t){const i=t.VN;this.WS!==i&&(this.z3.clear(),this.j3.D$(t),this.WS=i),this.KS=t,this.a3.U3()}async wy(){this.z3.clear(),this.Bo(),this.C3.gn();try{this.j3.fn(po.g$,this.Ds),await this.j3.wy()}catch(t){}}constructor(t,i,e,s,n,r,o){super(),this.z3=ll(),this.a3=t,this.KS=e,this.WS=e.VN,this.x3=s,this.cz=i,this.t3=n,this.j3=r,this.C3=o,this.j3.yn(po.g$,this.Ds)}};r(),Qi();var Xu=class{Q3(){let t=this.Cn,i=this.jn;if(this.F3||this.Y3){const e=.001*(Fe.Og()-this.V3);this.F3&&(t+=e),this.Y3&&(i+=e)}return Mo.RP(t,i)}constructor(t,i,e=!1,s=!1){this.Cn=t,this.jn=i,this.F3=e,this.Y3=s,this.V3=Fe.Og()}};il(),r(),ds(),Qi(),r();var Ij=.5,Dj=[Zi.so,Zi.wb,Zi.Mb,Zi.bb,Zi.eb,Zi.ob,Zi.qy,Zi.pb,E.wx,Me.ua],Ej=class{G3(t){this.W3.push(t),t.yn(MC.X$,this.Z3)}get J$(){return this.W3.reduce(((t,i)=>t.pP(i.J$)),Mo.PP())}gn(){this.H3(),this.X3.fn(E.wx,this.q3),this.cz.fn(Zi.mb,this.q3),this.cz.fn(Dj,this.K3),this.W3.forEach((t=>t.fn(MC.X$,this.Z3))),this.J3(),this.t5=!0}W$(t){if(this.cz.OE)return!1;if(0!==this.i5)return!1;const i=this.t3.TE,e=i.bP(t);if(e>=0&&t+Ij<i.jn(e))return!1;const s=e>=0?e+1:i.xP(t);if(s<0||s>=i.V)return!1;const n=i.Cn(s);if(Mo.RP(t,n).yP(this.J$).jP>1)return!1;if(0===t&&!this.cz.wk)return this.e5(t,n,2e3),!0;if(Fe.hE)return this.e5(t,n,250),!0;return!(x.abs(n-t)<=.001)&&(this.s5(n),!0)}e5(t,i,e){this.J3(),this.n5=t,this.cz.yn(Zi.Mb,this.r5),this.i5=Fe.Pg((()=>{this.n5===this.cz.xE&&this.s5(i),this.J3()}),e)}J3(){0!==this.i5&&(this.cz.fn(Zi.Mb,this.r5),Fe.Rg(this.i5),this.i5=0)}s5(t){this.cz.Wb(t,!1,!0)}o5(){0!==this.h5&&(Fe.Rg(this.h5),this.h5=0),this.cz.fn(Zi.Eb,this.Kl)}a5(){this.t5||0===this.u5&&(this.o5(),this.u5=Fe.dA(this.c5,250))}H3(){0!==this.u5&&(Fe.fA(this.u5),this.u5=0),this.o5(),this.cz.wk||(this.l5=0)}d5(){return!this.cz.KE&&!this.cz.wk&&0!==this.cz.$E&&!this.cz.OE&&!this.cz.lt&&(this.f5()||this.X3.fk>=Fn.Dz)}f5(){const t=this.cz.xE,i=this.t3.TE,e=i.bP(t);return-1!==e&&i.jn(e)>t+Ij}g5(t,i){const e=i.bP(t);return e>-1?i.jn(e):t}constructor(t,i,e,s){this.t3=t,this.X3=i,this.cz=e,this.t5=!1,this.W3=[],this.i5=0,this.h5=0,this._5=0,this.n5=0,this.l5=0,this.u5=0,this.v5=1,this.Z3=t=>{const i=this.cz.xE,e=t.K$.gr(i),s=t.K$.gr(i,Ij)&&this.cz.fk<=Fn.Iz;(e||s)&&this.W$(i)},this.q3=Gn((t=>{if(this.t5)return;if(this.X3.fk<=Fn.Iz){const t=this.cz.xE;this.W$(t)||this.c5()}else this.J3()}),100),this.Kl=Gn((t=>{this.a5()}),100),this.r5=t=>{t.currentTime!==this.n5&&this.J3()},this.K3=()=>{this.d5()?0===this.u5&&(this.cz.yn(Zi.Eb,this.Kl),this.h5=Fe.Pg((()=>{this.a5()}),3500)):this.H3()},this.c5=()=>{const t=this._5,i=this.l5,e=this.cz.xE,s=Fe.Og(),n=this.t3.TE;if(t!==e)return this._5=e,this.l5=s,this.v5=1,void(this.w5=Fe.uE?2e3:1e3);if(this.d5()&&0!==n.V&&i>0&&s>i+this.w5){let t;const i=this.J$.fP().yP(n),s=i.kP(e);if(-1!==s){const n=i.Cn(s);if(n-e<1){const e=i.jn(s);0,t=e}}var r;if(!t)t=null==(r=this.m5)?void 0:r.determineStallJumpTarget(),t||(t=e+.01*this.v5,n.gr(t)||(t=this.g5(e,n)));0,this._5=t,this.v5++,this.w5=x.min(2*this.w5,1e4),this.s5(t)}},this.X3.yn(E.wx,this.q3),this.cz.yn(Zi.mb,this.q3),this.cz.yn(Dj,this.K3),this.m5=s,this.w5=Fe.uE?2e3:1e3}};function kj(t){const i=[];if(t.A5&&i.push(t.A5.TE),t.y5&&i.push(t.y5.TE),0===i.length)return Mo.PP();let e=0;for(const t of i)t.V>0&&(e=x.max(e,t.jn(t.V-1)));const s=t.F$;let n=new Mo([0,e],[!0,s]);for(let t of i)s&&t.V>0&&(t=t.pP(new Mo([t.jn(t.V-1),e],[!0,!0]))),n=n.Sn(t);return n}function xj(t,i,e){const s=t.TE;let n,r=s.bP(i);if(r>=0){if(!(r+1<s.V))return Promise.resolve();n=s.Cn(r+1)}else{if(r=s.xP(i),!(r>=0))return Promise.resolve();n=s.Cn(r)}return t.wS(n,1/0,e)}function Lj(t,i,e){if(!t.gr(i)){const s=t.bP(i,e);if(s>=0){const e=t.Cn(s);if(i<e)return e}}return i}r();var Cj=Ro.zf||Ro.Uf,jj=Ro.Wf||Ro.qf||Ro.Ka,Oj=function(t){return t.f3="closed",t.KI="open",t.qy="ended",t}({}),Rj=class extends AC{get A5(){return this.b5}get y5(){return this.M5}get ct(){if(this.T5)return this.T5;const t=this.vV.duration;return t===tt?1/0:t}S5(t){if(j(t)||t<0)throw new b("Invalid duration");this.N5()?this.I5(t):this.T5=t}I5(t){const i=t===1/0;if(i&&this.vV.setLiveSeekableRange){const t=2**39;this.vV.setLiveSeekableRange(0,t)}this.vV.duration=i?jj?1/0:tt:t,this.T5=void 0}get TE(){return Cj?kj(this):function(t,i){let e=i;return e.V>0&&t.F$&&(e=e.pP(Mo.OP(e.jn(e.V-1)))),e}(this,Mo.xn(this.vN.buffered))}get Y$(){var t;return null==(t=this.b5)?void 0:t.TE}get V$(){var t;return null==(t=this.M5)?void 0:t.TE}get _k(){return this.D5.Q3().Sn(new Mo([0,this.ct],[!0,!0]))}E5(t,i,e,s){this.D5=new Xu(t,i,!!e,!!s)}get F$(){return(!this.b5||this.b5.F$())&&(!this.M5||this.M5.F$())}get fk(){return this.vV.readyState}async FK(){const t=this.KS,i=dl(t.k5,(t=>Et(t.VN,"audio"))),e=dl(t.k5,(t=>Et(t.VN,"video")));if(this.vN.disableRemotePlayback=!0,await this.x5(),i){const t=new SC;var s;this.L5.G3(t);const e=null!=(s=this._3(i.VN))?s:i.VN;this.C5=this.vV.addSourceBuffer(e),this.b5=Sj(this,this.cz,i,Ri.SI,this.C5,e,t),this.b5.yn(po.g$,this.M3)}if(e){const t=new SC;var n;this.L5.G3(t);const i=null!=(n=this._3(e.VN))?n:e.VN;this.j5=this.vV.addSourceBuffer(i),this.M5=Sj(this,this.cz,e,Ri.NI,this.j5,i,t),this.M5.yn(po.g$,this.M3)}this.E$.$n(this,t)}async x5(){await super.B$(this.vV),"open"!==this.fk&&await ku(this.vV,"sourceopen")}N5(){if("open"!==this.fk)return!1;const t=this.b5&&this.b5.ca,i=this.M5&&this.M5.ca;return!(t||i)}I3(){this.O5=!0,this.b5&&this.b5.I3(),this.M5&&this.M5.I3(),this.O5=!1,this.R5()}w3(){this.b5&&this.b5.w3(),this.M5&&this.M5.w3()}N$(t){const i=dl(t.k5,(t=>Et(t.VN,"audio"))),e=dl(t.k5,(t=>Et(t.VN,"video")));if(this.b5){if(!i)return!1;if(!this.b5.N$(i))return!1}else if(i)return!1;if(this.M5){if(!e)return!1;if(!this.M5.N$(e))return!1}else if(e)return!1;return!!super.N$(t)}async D$(t){const i=dl(t.k5,(t=>Et(t.VN,"audio"))),e=dl(t.k5,(t=>Et(t.VN,"video"))),s=[];this.b5&&s.push(this.b5.D$(i)),this.M5&&s.push(this.M5.D$(e)),await Promise.all(s),await super.D$(t)}k$(t){super.k$(t)}async wy(){if(this.vV.removeEventListener("sourceclose",this.P5),Ro.kf&&await this.Q$(),this.b5){if(await this.b5.wy(),this.b5=void 0,Yv()&&(Ro.kf||Ro.Nf))try{this.vV.removeSourceBuffer(this.C5)}catch(t){}this.C5=void 0}if(this.M5){if(await this.M5.wy(),this.M5=void 0,Yv()&&(Ro.kf||Ro.Nf))try{this.vV.removeSourceBuffer(this.j5)}catch(t){}this.j5=void 0}this.vN.src&&URL.revokeObjectURL(this.vN.src),this.vN.disableRemotePlayback=!1,this.cz.fn([Zi.Mb,Zi.eb],this.z5),this.L5.gn(),Ro.Nf&&await this.Q$(),await super.wy()}U3(){const t=this.KS,i=t.k5.map((t=>Et(t.VN,"audio")&&this.b5?this.b5.md:Et(t.VN,"video")&&this.M5?this.M5.md:t));this.KS=Ei({},t,{k5:i})}D3(){this.O5||this.R5()}get B5(){if(!this.F$)return!1;const t=this.TE;return 0!==t.V&&t.Cn(t.V-1)<=this.cz.xE}R5(){this.B5&&this.N5()&&(this.vV.endOfStream(),this.T5=void 0,this.yo(new Jr(sl.m$)),this.cz.M3())}A3(){this.N5()&&(this.F$?this.R5():void 0!==this.T5&&this.I5(this.T5))}W$(t){return this.L5.W$(t)}Z$(){return!0}_3(t){return Pj(this.U5,t)}static H$(t){const i=qh(t.Q5);if(void 0===i)return!1;if("function"!=typeof i.isTypeSupported)return!1;const e=new wc(t.Q5);for(const i of t.k5)if(void 0===Pj(e,i.VN))return!1;return!0}constructor(t,i,e,s,n,r=new wc(t.Q5),o){super(t,i,s,n),this.b5=void 0,this.C5=void 0,this.M5=void 0,this.j5=void 0,this.D5=new Xu(0,1/0),this.T5=void 0,this.O5=!1,this.P5=()=>{this.yo(new Jr(sl.A$))},this.F5=()=>{this.yo(new Jr(sl.b$))},this.z5=()=>{this.R5()},this.M3=()=>{this.cz.M3()},this.U5=r,this.vV=this.U5.Yp(),this.vV.addEventListener("sourceclose",this.P5),this.vV.addEventListener("sourceopen",this.F5),this.cz.yn([Zi.Mb,Zi.eb],this.z5),this.L5=new Ej(this,e,this.cz,o)}};function Pj(t,i){const e=KA(i),s=Aj(e),n="audio/mp4"===e.YA,r=n&&1===s.length&&"mp4a.40.34"===s[0];if(t.Gp(i)&&(!r||!Ro.qf))return i;if(r){const i=['audio/mp4; codecs="mp3"',"audio/mpeg"];for(const e of i)if(t.Gp(e))return e}if(n&&1===s.length&&"flac"===s[0].toLowerCase()){const e=["flac","fLaC","FLAC"];for(const s of e){const e='audio/mp4; codecs="'+s+'"';if(t.Gp(i))return e}}}r(),ds(),r();var zj=class extends Jr{constructor(t){super(Zi.eb),this.currentTime=t}},Bj=[Zi.kb,Zi.pb,Zi.Mb,Zi.eb,Zi.so,Zi.wb],Uj=class extends tu{get xE(){return this.EG}get Y5(){return this.V5}get G5(){return this.W5}get ct(){return this.JM}get OE(){return this.Z5}get KE(){return this.CG}get fk(){return this.H5}get wk(){return this.kG}get WE(){return this.xG}set WE(t){this.WE!==t&&(this.xG=t,this.yo(new $e(this.xE,this.Nk)))}get $E(){return this.jG}set $E(t){this.$E!==t&&(this.jG=t,this.yo(new cu(this.xE,this.$E)))}get Nk(){return this.cT}set Nk(t){this.Nk!==t&&(this.cT=t,this.yo(new $e(this.xE,this.Nk)))}Wb(t,i,e){this.EG!==t&&(this.EG=t,this.V5=i,e&&!this.kG?(this.W5=!0,this.yo(new zj(this.xE))):(this.W5=!1,this.kG=!0,this.yo(new Yr(this.xE))))}Rk(){this.CG||(this.CG=!0,this.yo(new Zr(this.xE)))}Pk(){this.CG&&(this.CG=!1,this.yo(new fi(this.xE)))}wy(){this.Bo()}constructor(t,i,e,s,n,r,o,h,a,u,c){super(),this.EG=t,this.JM=i,this.Z5=e,this.CG=s,this.kG=n,this.xG=r,this.jG=o,this.cT=h,this.H5=a,this.V5=u,this.W5=c}};function Qj(t){return new Uj(t.xE,t.ct,t.OE,t.KE,t.wk,t.WE,t.$E,t.Nk,t.fk,!1,t.G5)}function Fj(t,i){i.ct===t.ct||j(i.ct)&&j(t.ct)||t.yo(new Hs(t.ct)),t.WE=i.WE,t.Nk=i.Nk,t.$E=i.$E,i.KE?t.Rk():t.Pk().catch(ya),i.xE!==t.xE||i.fk>Fn.Nz&&t.fk===Fn.Nz?t.Wb(i.xE,i.Y5,i.G5):!i.wk&&t.wk?t.yo(new Yr(t.xE)):i.wk&&!t.wk&&t.fk>=Fn.Iz&&t.yo(new aa(t.xE)),!i.OE&&t.OE&&t.yo(new fa(t.xE))}r(),r();var Yj=class extends tu{get fk(){return this.gk()}X5(t){this.qQ!==t&&(this.qQ=t,this.yo(new Yu(this.cz.xE,t)))}q5(){this.X5(this.gk())}tr(){this.X5(Fn.Nz)}wy(){this.Bo()}constructor(t){super(),this.qQ=Fn.Nz,this.K5=()=>{this.q5()},this.cz=t}};r();var Vj=["emptied","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","timeupdate","progress","seeking","seeked"],Gj=class extends Yj{gk(){let t=this.cz.gV.readyState;return t>Fn.Iz&&this.cz.J5?Fn.Iz:(this.cz.gV.seeking&&t>Fn.Xn&&(t=Fn.Xn),t)}wy(){for(const t of Vj)this.cz.gV.removeEventListener(t,this.K5);super.wy()}constructor(t){super(t);for(const t of Vj)this.cz.gV.addEventListener(t,this.K5)}};r();var Wj=class extends Yj{gk(){if(this.cz.gV.readyState===Fn.Nz)return Fn.Nz;const t=this.t6(),i=t?t.jn-t.Cn:0;if(!t)return Fn.Xn;const e=this.cz.$E;return this.i6()||i>=3*e?Fn.Ez:i>=3?Fn.Dz:Fn.Iz}t6(){const t=this.cz.xE,i=this.cz.TE.mP(.04),e=i.bP(t);if(!(e<0))return{Cn:t,jn:i.jn(e)}}i6(){if(this.cz.OE)return!0;const t=this.cz.ct,i=this.t6();return!!i&&t-i.jn<=.16666666666666666}wy(){this.cz.fn([Zi.Mb,Zi.eb],this.K5);for(const t of Vj)this.cz.gV.removeEventListener(t,this.K5);super.wy()}constructor(t){super(t),this.cz.yn([Zi.Mb,Zi.eb],this.K5);for(const t of Vj)this.cz.gV.addEventListener(t,this.K5)}};ds(),r(),r();var Zj=[E.wx,Zi.so,Zi.wb,Zi.Mb,Zi.bb,Zi.eb,Zi.ob,Zi.qy,Me.ua],Hj=class extends tu{e6(){return(!this.GQ.G5||!this.GQ.s6)&&this.GQ.fk<Fn.Dz}n6(){return!this.GQ.wk&&!(this.GQ.KE||this.GQ.OE||this.GQ.lt||this.e6())}Yn(){const t=this.r6;this.r6=this.n6(),!t&&this.r6&&this.yo(new te(this.GQ.xE))}tr(){this.r6=!1}wy(){this.Bo(),this.GQ.fn(Zj,this.Rq)}constructor(t){super(),this.r6=!1,this.Rq=()=>{this.Yn()},this.GQ=t,this.GQ.yn(Zj,this.Rq)}},Xj=class extends Hj{n6(){return this.o6&&super.n6()}Yn(){this.o6&&(this.vN.paused||this.vN.ended||this.vN.error)&&(this.o6=!1),super.Yn()}tr(){super.tr(),this.o6=!1}wy(){this.vN.removeEventListener(E.oP,this.eF),super.wy()}constructor(t){super(t),this.o6=!1,this.eF=()=>{this.o6=!0,this.Yn()},this.vN=t.gV,this.vN.addEventListener(E.oP,this.eF)}};r();var qj=class extends Jr{constructor(t){super(Me.ua),this.lt=t}};function Kj(t,i){return t.lB<=i&&t.dB>i}function me(t,i){return function(t,i){return Hv(t.lB,i.lB,pl)}(t,i)||function(t,i){return Hv(t.dB,i.dB,pl)}(t,i)}function Jj(t,i){return function(t,i){return Hv(t.pB,i.pB,pl)}(t,i)||function(t,i){return Hv(t.AB,i.AB,pl)}(t,i)}function $j(t,i,e){let s=function(t,i,e,s,n,r,o){void 0===n&&(n=!1),void 0===r&&(r=0),void 0===o&&(o=t.length);let h=r,a=o-1;for(;h<=a;){const o=h+(a-h>>1),u=s(e(t[o]),i);if(u<0)h=o+1;else if(u>0)a=o-1;else{if(!(n&&o>r&&0===s(e(t[o-1]),i)))return o;a=o-1}}return~h}(t,i,vc,e,!0);if(s<0)return s;for(;s<t.length&&e(i,t[s])===$n.Zr;s++)if(t[s].DB(i))return s;return-(s+1)}function tO(t,i,e){const s=$j(t,i,e);return s>=0?s:-(s+1)}function iO(t){const i=t.Ht;if(!i)return-1;if(t instanceof dN)return i.h6(t);const e=i.L;if(!e)return-1;const s=$j(e.Ix,t,me);return s>=0?s:-1}function eO(t,i){const e=function(t,i,e){const s=t.length,n=i.length;let r=0,o=0;const h=[],a=[];for(;r<s&&o<n;){const s=t[r],n=i[o];s===n?(r++,o++):e(n,s)<=0?(h.push(n),o++):(a.push(s),r++)}for(;r<s;)a.push(t[r]),r++;for(;o<n;)h.push(i[o]),o++;return{a6:h,u6:a}}(t,i,me);return function(t,i){const e=i.length;for(let s=0;s<e;s++)t[s]=i[s];t.length=e}(t,i),e}Qi(),r(),r(),r(),ds(),r();var Ou=class{get Ix(){return this.c6}get V(){return this.c6.length}get ga(){if(this.Za){const t=this.c6;this.Za.length=t.length;for(let i=0;i<t.length;i++)this.Za[i]=t[i].ga}else this.Za=this.ma();return this.Za}ma(){return function(t){const i=[];for(let e=0;e<t.V;e++)i[e]=t.$b(e).ga;return i.item=i=>{const e=0|i,s=t.$b(e);return s&&s.ga||void 0},_.defineProperty(i,"constructor",{value:rN}),i}(this)}Jz(t){const i=this.c6;for(let e=i.length-1;e>=0;e-=1){const s=i[e];if(t.DB(s))return!0}return!1}$b(t){return this.c6[t]}constructor(t){this.Za=void 0,this.c6=t}};r();var sO=class extends du{ma(){return new nO(this.Ht.ga,this.fk)}constructor(t,i){super(yo.wx),this.Ht=t,this.fk=i}},nO=class extends Pu{constructor(t,i){super("readystatechange"),this.track=t,this.readyState=i}};r();var rO=class extends du{ma(){return new oO(this.Ht.ga)}constructor(t){super(yo.Ax),this.Ht=t}},oO=class extends Pu{constructor(t){super("typechange"),this.track=t}};r();var hO=class extends du{ma(){return new aO(this.uB.ga)}constructor(t){super(yo.Jk),this.uB=t}},aO=class extends Pu{constructor(t){super("addcue"),this.cue=t}};r();var uO=class extends du{ma(){return new cO(this.uB.ga)}constructor(t){super(yo.tx),this.uB=t}},cO=class extends Pu{constructor(t){super("removecue"),this.cue=t}};Qi();var lO=class extends tu{get q(){return this.l6}get L(){return this.d6}f6(t){return dl(this.d6.Ix,(i=>i.o===t))}get UQ(){return this.zv}set UQ(t){this.zv=t}get Jx(){return this.g6}get ga(){return this.Za||(this.Za=this.ma()),this.Za}ma(){return EM(this)}get o(){return this.aS}get Gx(){return this.iB}get qx(){return this._6}set qx(t){this._6=t}get Lt(){return this.v6}get kh(){return this.eB}set kh(t){t!==this.eB&&(this.eB=t,this.yo(new xu(this)))}get gs(){return this.$M}get Wx(){return this.w6}get UI(){return this.zo}set UI(t){this.m6(t)}m6(t){const i=wa(t);i!==this.UI&&(this.zo=i,i===lc.Ch&&(this.p6.forEach((t=>{t.Yh=!1})),nt(this.p6),this.A6=0),this.yo(new su(this)))}get fk(){return this.H5}set fk(t){this.H5!==t&&(this.H5=t,this.yo(new sO(this,this.H5)))}get $x(){return this.y6}set $x(t){this.y6=t}get YA(){return this.Zp}set YA(t){this.Zp!==t&&(this.Zp=t,this.yo(new rO(this)))}RQ(t){if(!t||t.Ht)return;const i=$j(this.b6,t,Jj);if(i>=0)return;t.Ht=this;const e=-(i+1);this.b6.splice(e,0,t);const s=tO(this.L.Ix,t,me);this.M6(t,s),this.yo(new hO(t))}M6(t,i){this.c6.splice(i,0,t),this.T6(i),t.xB=i,i<this.A6&&(this.A6=i)}SQ(t){if(!t||t.Ht!==this)return;const i=this.h6(t);if(i<0)return;t.Yh=!1;const e=this.p6,s=$j(e,t,me);s>=0&&Mn(e,s);const n=$j(this.b6,t,Jj);n>=0&&Mn(this.b6,n),this.S6(t,i),this.yo(new uO(t))}S6(t,i){Mn(this.c6,i),this.T6(i),t.xB=-1,this.A6>i&&--this.A6}MB(t){if(!t||t.Ht!==this)return;const i=this.h6(t);if(i<0)return;this.S6(t,i);const e=tO(this.L.Ix,t,me);this.M6(t,e);const s=Jv(this.p6,(i=>i===t));if(s>=0){Mn(this.p6,s);const i=tO(this.p6,t,me);this.p6.splice(i,0,t)}}N6(t,i){const e=this.p6,s=this.c6;let n=this.A6,r=!1,o=1/0;i&&(n=0);for(let i=e.length-1;i>=0;i--){const s=e[i];Kj(s,t)?s.dB<o&&(o=s.dB):(r=!0,Mn(e,i))}for(;n<s.length&&s[n].lB<=t;){const i=s[n];Kj(i,t)&&(Qa(e,i)||(r=!0,e.push(i)),i.dB<o&&(o=i.dB)),n++}return n<s.length&&s[n].lB<o&&(o=s[n].lB),r&&Gv(e,me),this.A6=n,o}h6(t){return(-1===t.xB||t.xB>=this.I6)&&this.D6(),t.xB}D6(){const t=this.c6;for(let i=this.I6;i<t.length;i++)t[i].xB=i;this.I6=t.length}T6(t){t<this.I6&&(this.I6=x.max(t,0))}Kx(t){this.Jx||(this.UI=t)}gn(){this.Bo();const t=this.c6.slice();for(const i of t)i.gn();nt(this.c6),nt(this.b6),nt(this.p6)}constructor(t,i,e,s,n,r,o,h,a){super(),this.iB=ft(),this.zv=!1,this.zo=lc.Ch,this.H5=Ma.NONE,this.y6=void 0,this.c6=[],this.b6=[],this.p6=[],this.I6=0,this.A6=0,this.aS=i||"",this._6=h||"",this.v6=t,this.$M=s||"",this.zv=Boolean(n),this.g6=Boolean(o),this.Zp=r||El.DEFAULT,this.eB=e||"",this.w6=a||[],this.d6=new Ou(this.c6),this.l6=new Ou(this.p6)}};r(),r(),r();var dO=class extends sN{ma(){return new fO(this.uB.ga)}constructor(t,i){super(oa.kz,t),this.kU=i}},fO=class extends nN{constructor(t){super("enter",t)}};r();var gO=class extends sN{ma(){return new _O(this.uB.ga)}constructor(t,i){super(oa.xz,t),this.kU=i}},_O=class extends nN{constructor(t){super("exit",t)}};r();var vO=class extends du{ma(){return new wO(this.uB.ga)}constructor(t){super(yo.ox),this.uB=t}},wO=class extends Pu{constructor(t){super("entercue"),this.cue=t}};r();var mO=class extends du{ma(){return new pO(this.uB.ga)}constructor(t){super(yo.ux),this.uB=t}},pO=class extends Pu{constructor(t){super("exitcue"),this.cue=t}},AO=class extends gs{get Gx(){return this.iB}get lB(){return this.E6.startTime}set lB(t){this.E6.startTime=t}get dB(){return this.E6.endTime}set dB(t){this.E6.endTime=t}get U(){return this.SB}set U(t){this.SB=t}get NB(){return!!this.E6.pauseOnExit}set NB(t){this.E6.pauseOnExit=!!t}get Ht(){return this.bB}set Ht(t){this.bB=t}get o(){return this.E6.id||""}get ga(){return this.Za||(this.Za=this.ma()),this.Za}ma(){return Ft(this)}get Yh(){return this.Kh}set Yh(t){this.Yh!==t&&(this.Kh=t,t?(this.yo(new dO(this,this.lB)),this.bB&&this.bB.yo(new vO(this))):(this.yo(new gO(this,this.dB)),this.bB&&this.bB.yo(new mO(this))))}DB(t){return this===t||wM(this,t)&&lN(this,t)&&this.EB(t)}EB(t){return ns(this.U,t.U)}gn(){this.Bo(),this.E6.removeEventListener("enter",this.k6),this.E6.removeEventListener("exit",this.x6)}constructor(t){super(),this.SB=void 0,this.bB=void 0,this.Za=void 0,this.Kh=!1,this.k6=()=>{this.Yh=!0},this.x6=()=>{this.Yh=!1},this.iB=WS(),this.E6=t,this.pB=t.startTime,this.AB=t.endTime,this.E6.addEventListener("enter",this.k6),this.E6.addEventListener("exit",this.x6)}};r();var yO=class extends du{ma(){return new bO(this.Ht.ga)}constructor(t){super(yo.gx),this.Ht=t}},bO=class extends Pu{constructor(t){super("cuechange"),this.track=t}};function MO(t){if(!t)return;let i=t.THEOplayerVTTRegion;return i||(i=new TO(t),t.THEOplayerVTTRegion=i),i}r(),r();var TO=class{get L6(){return this.C6}get o(){return this.C6.id||""}get ji(){return+this.C6.width||0}set ji(t){this.C6.width=t||0}get LB(){return+this.C6.lines||0}set LB(t){this.C6.lines=t||0}get CB(){return+this.C6.regionAnchorX||0}set CB(t){this.C6.regionAnchorX=t||0}get jB(){return+this.C6.regionAnchorY||0}set jB(t){this.C6.regionAnchorY=t||0}get RB(){return+this.C6.viewportAnchorX||0}set RB(t){this.C6.viewportAnchorX=t||0}get PB(){return+this.C6.viewportAnchorY||0}set PB(t){this.C6.viewportAnchorY=t||0}get OB(){return this.C6.scroll||""}get ga(){return this.Za||(this.Za=mN(this)),this.Za}constructor(t){this.Za=void 0,this.C6=t}};var SO=class extends AO{get U(){return this.E6.text}set U(t){this.E6.text=t}get Pt(){return this.E6.vertical||""}set Pt(t){this.E6.vertical=t||""}get mB(){return this.E6.snapToLines}set mB(t){this.E6.snapToLines=t}get gB(){return this.E6.line}set gB(t){this.E6.line=t}get Kb(){return+this.E6.size}set Kb(t){this.E6.size=ur(t,0,100)}get ga(){return this.Za||(this.Za=this.ma()),this.Za}ma(){return oN(this)}EB(t){return fN(this,t)}constructor(t){super(t)}},NO=class extends SO{get wB(){return MO(this.E6.region)}get _B(){return this.E6.lineAlign||"start"}set _B(t){this.E6.lineAlign=t||"start"}get uo(){return this.E6.position}set uo(t){this.E6.position=t}get vB(){return this.E6.positionAlign||"auto"}set vB(t){this.E6.positionAlign=t||"auto"}get fB(){return this.E6.align||"center"}set fB(t){this.E6.align=t||"center"}constructor(t){super(t)}},IO=class extends SO{get wB(){return MO(this.L6)}get L6(){return function(t,i){if(void 0===i)return;let e=t&&t.regions;return e&&e.getRegionById(i)||void 0}(this.E6.track,this.E6.regionId)}get _B(){return function(t){return"middle"===t?"center":t}(this.E6.lineAlign||"start")}set _B(t){this.E6.lineAlign=function(t){return"center"===t?"middle":t}(t||"start")}get uo(){return this.E6.position}set uo(t){this.E6.position=function(t,i){return eN(t,i)}(t,this.fB)}get vB(){return function(t){return tN[t]}(this.E6.positionAlign||"middle")}set vB(t){this.E6.positionAlign=function(t,i){return $S[iN(t,i)]}(t||"center",this.fB)}get fB(){return function(t){return"middle"===t?"center":t}(this.E6.align||"middle")}set fB(t){this.E6.align=function(t){return"center"===t?"middle":t}(t||"center")}constructor(t){super(t)}};function DO(t,i){return t.U===i.U}function EO(t,i){if(0===i.length)return;const e=i.length-1;if(i[e].lB<t.lB)return void kO(i,e,t.lB);const s=i[0];if(s.lB>t.lB)return void(t.dB=s.lB);const n=$j(i,t,me);if(n>=0)return;const r=-(n+1),o=r-1;if(o>=0){i[o].lB<t.lB&&kO(i,o,t.lB)}if(r<i.length){const e=i[r];t.dB=e.lB}}function kO(t,i,e){const s=t[i].lB;for(let n=i;n>=0&&t[n].lB===s;n--)t[n].dB=e}function xO(t){return Ft(t)}r(),r(),r(),r();var LO=class extends AO{get U(){return this.j6}get ga(){return this.Za||(this.Za=this.ma()),this.Za}ma(){return xO(this)}EB(t){return DO(this,t)}constructor(t,i){super(t),this.j6=i}};function Ku(t){switch(t){case 0:case 1:case 2:case 3:return!0}return!1}function CO(t){switch(t){case 0:return $w;case 1:return sm;case 2:return Tl;case 3:return Zo}}function jO(t,i){const e=i.tc,s=t.byteLength,n=ka(t);return i.Gb(s-e),vi(n,e,s).buffer}function OO(t,i){return{id:t||"",data:i instanceof ArrayBuffer?i:void 0}}function RO(t,i,e){const s=on(t,i);if(!Ku(s))return;const n=CO(s);return{id:e,language:ai(t,i,3),description:n(t,i),text:n(t,i)}}function PO(t,i,e){const s=on(t,i);if(!Ku(s))return;const n=CO(s);return{id:e,mimeType:$w(t,i),fileName:n(t,i),description:n(t,i),data:jO(t,i)}}function zO(t,i,e){const s=on(t,i);if(!Ku(s))return;const n=CO(s),r=[];for(;i.tc<t.byteLength;)r.push({involvement:n(t,i),involvee:n(t,i)});return{id:e,entries:r}}function BO(t,i,e){const s=on(t,i);if(!Ku(s))return;const n=CO(s),r=ai(t,i,3),o=on(t,i),h=on(t,i),a=n(t,i);let u=!1;const c=[];for(;i.tc<t.byteLength;){let e;if(1===s){let s=em(t,i);void 0===s?s=u:u=s,e=Tl(t,i,s)}else e=n(t,i);if(!e||i.tc+4>t.byteLength)break;c.push({text:e,timestamp:ul(t,i)})}return{id:e,language:r,format:o,contentType:h,description:a,entries:c}}function UO(t,i,e){return{id:e,ownerIdentifier:$w(t,i),identifier:jO(t,i)}}function QO(t,i,e){const s=on(t,i);if(!Ku(s))return;const n=CO(s);return{id:e,language:ai(t,i,3),description:n(t,i),text:n(t,i)}}function FO(t,i,e){const s=on(t,i);if(!Ku(s))return;return{id:e,text:CO(s)(t,i)}}function YO(t,i,e){return{id:e,url:$w(t,i)}}function VO(t,i,e){const s=on(t,i);if(!Ku(s))return;const n=CO(s);return{id:e,description:n(t,i),text:n(t,i)}}function GO(t,i,e){const s=on(t,i);if(!Ku(s))return;return{id:e,description:CO(s)(t,i),url:$w(t,i)}}function WO(t,i,e){switch(e){case"COM":return RO(t,i,e);case"GEO":return PO(t,i,e);case"IPL":return zO(t,i,e);case"PIC":return function(t,i,e){const s=on(t,i);if(!Ku(s))return;const n=CO(s),r=ai(t,i,3),o=on(t,i),h=n(t,i);let a,u;return"--\x3e"===r?(a=r,u=$w(t,i)):(a="image/"+r.toLowerCase(),u=jO(t,i)),{id:e,mimeType:a,pictureType:o,description:h,data:u}}(t,i,e);case"SLT":return BO(t,i,e);case"TXX":return VO(t,i,e);case"UFI":return UO(t,i,e);case"ULT":return QO(t,i,e);case"WXX":return GO(t,i,e);default:if("T"===e.charAt(0))return FO(t,i,e);if("W"===e.charAt(0))return YO(t,i,e)}}function ZO(t,i,e){switch(e){case"APIC":return function(t,i,e){const s=on(t,i);if(!Ku(s))return;const n=CO(s),r=$w(t,i),o=on(t,i),h=n(t,i);let a;return a="--\x3e"===r?$w(t,i):jO(t,i),{id:e,mimeType:r,pictureType:o,description:h,data:a}}(t,i,e);case"COMM":return RO(t,i,e);case"COMR":return function(t,i,e){const s=on(t,i);if(!Ku(s))return;const n=CO(s),r=$w(t,i),o=ai(t,i,8),h=$w(t,i),a=on(t,i),u=n(t,i),c=n(t,i);let l,d;return i.tc<t.byteLength&&(l=$w(t,i)||"image/",d=jO(t,i)),{id:e,price:r,validUntil:o,contactURL:h,receivedAs:a,nameOfSeller:u,description:c,pictureMimeType:l,sellerLogo:d}}(t,i,e);case"GEOB":return PO(t,i,e);case"IPLS":return zO(t,i,e);case"PRIV":return function(t,i,e){return{id:e,ownerIdentifier:$w(t,i),data:jO(t,i)}}(t,i,e);case"POSS":return function(t,i,e){return{id:e,format:on(t,i),position:ul(t,i)}}(t,i,e);case"SYLT":return BO(t,i,e);case"TXXX":return VO(t,i,e);case"UFID":return UO(t,i,e);case"USER":return function(t,i,e){const s=on(t,i);if(!Ku(s))return;const n=CO(s);return{id:e,language:ai(t,i,3),text:n(t,i)}}(t,i,e);case"USLT":return QO(t,i,e);case"WXXX":return GO(t,i,e);case"YMID":case"YTYP":case"YSEQ":case"YDUR":case"YCSP":return FO(t,i,e);default:{const s=e.charAt(0);if("T"===s)return FO(t,i,e);if("W"===s)return YO(t,i,e)}}}r(),r();var HO=10;function XO(t,i){return(127&on(t,i))<<21|(127&on(t,i))<<14|(127&on(t,i))<<7|127&on(t,i)}function qO(t,i){switch(t){case 4:return{O6:Ni(i,0),R6:Ni(i,1),P6:Ni(i,2),z6:Ni(i,3)};case 3:return{O6:Ni(i,0),R6:Ni(i,1),P6:Ni(i,2)};case 2:return{O6:Ni(i,0),B6:Ni(i,1)}}}function KO(t,i,e){switch(e.cj){case 3:e.lj.R6&&function(t,i){const e=i.tc,s=ul(t,i)+4,n=32768&Ps(t,i);i.Wb(e+s),n&&ul(t,i)}(t,i);break;case 4:e.lj.R6&&function(t,i){const e=i.tc,s=XO(t,i);i.Wb(e+s)}(t,i)}}function JO(t,i){if(t.byteLength-i.tc<HO)return null;if(73!==on(t,i)||68!==on(t,i)||51!==on(t,i))return null;const e=on(t,i),s=on(t,i);if(!function(t){switch(t){case 2:case 3:case 4:return!0}return!1}(e))return null;const n=on(t,i),r=XO(t,i);return{cj:e,U6:s,lj:qO(e,n),Q6:r}}function $O(t,i,e){switch(e){case 2:return function(t,i){if(i.tc+6>t.byteLength)return;return{o:ai(t,i,3),Kb:Ww(t,i,3)}}(t,i);case 3:return function(t,i){if(i.tc+10>t.byteLength)return;const e=ai(t,i,4),s=ul(t,i);on(t,i);const n=on(t,i);return{o:e,Kb:s,lj:{B6:Ni(n,0),F6:Ni(n,1),groupingIdentity:Ni(n,2)}}}(t,i);case 4:return function(t,i){if(i.tc+10>t.byteLength)return;const e=ai(t,i,4),s=XO(t,i);on(t,i);const n=on(t,i);return{o:e,Kb:s,lj:{groupingIdentity:Ni(n,1),B6:Ni(n,4),F6:Ni(n,5),O6:Ni(n,6),Y6:Ni(n,7)}}}(t,i)}}function tR(t){const i=ka(t),e=new T(i.byteLength);let s=0;for(let t=0;t<i.byteLength;t++){const n=i[t];255===n&&t++,e[s]=n,s++}return Al(vi(e,0,s))}function iR(t,i){const e=i||new da,s=JO(t,e);if(!s)return null;const n=function(t,i,e){const s=[],n=i.tc;let r=dm(t,n,n+e.Q6);const o=new da;switch(i.Gb(e.Q6),e.cj){case 2:case 3:e.lj.O6&&(r=tR(r))}KO(t,i,e);for(;o.tc<r.byteLength;){const t=eR(r,o,e);if(void 0===t)break;s.push(t)}return s}(t,e,s);return{nj:s,V6:n}}function eR(t,i,e){const s=$O(t,i,e.cj);if(void 0===s)return;if(0===s.o.charCodeAt(0)||0===s.Kb)return;const n=i.tc;let r,o,h=dm(t,n,n+s.Kb);switch(i.Gb(s.Kb),e.cj){case 2:{const t=s;o=h,r=WO(o,new da,t.o);break}case 3:{const t=s,i=new da;!function(t,i,e){const s=e.lj;let n,r,o;s.B6&&(n=ul(t,i)),s.F6&&(r=on(t,i)),s.groupingIdentity&&(o=on(t,i))}(h,i,t);o=dm(h,i.tc,h.byteLength),r=ZO(o,new da,t.o);break}case 4:{const t=s,i=new da;t.lj.O6&&(h=tR(h)),function(t,i,e){const s=e.lj;let n,r,o,h;s.groupingIdentity&&(n=on(t,i)),s.B6&&(r=ul(t,i)),s.F6&&(o=on(t,i)),s.Y6&&(h=XO(t,i))}(h,i,t);o=dm(h,i.tc,h.byteLength),r=ZO(o,new da,t.o);break}}if(!r){const t=Wa(ka(o));r=OO(s.o,t.buffer)}return r}r();function sR(t){return $t(t)&&"org.id3"===t.type&&$t(t.value)}function nR(t){return function(t,i,e){return FO(t,i,e)}(new DataView(t.data),new da,t.key)}function rR(t){switch(t.key){case"APIC":case"PIC":return function(t){return{id:t.key,mimeType:t.type,pictureType:16,description:t.info,data:t.data}}(t);case"GEOB":case"GEO":return function(t){return{id:t.key,mimeType:t.type,fileName:t.name,description:t.info,data:t.data}}(t);case"PRIV":return function(t){return{id:t.key,ownerIdentifier:t.info,data:t.data}}(t);case"TXXX":case"TXX":return function(t){return{id:t.key,description:t.info,text:t.data}}(t);case"WXXX":case"WXX":return function(t){return{id:t.key,description:t.info,url:t.data}}(t);case"YMID":case"YTYP":case"YSEQ":case"YDUR":case"YCSP":return nR(t);default:let i=t.key.charAt(0);if("T"===i)return function(t){return{id:t.key,text:t.data}}(t);if("W"===i)return function(t){return{id:t.key,url:t.data}}(t)}return function(t){return OO(t.key,t.data)}(t)}r(),r();var oR=class extends tu{get q(){return this.l6}get UQ(){return this.G6?this.G6.default:void 0}get L(){return this.d6}get ga(){return this.Za||(this.Za=this.ma()),this.Za}ma(){return EM(this)}get o(){return this.tB.id||this.G6&&this.G6.id||""}get Gx(){return this.iB}get qx(){return this.tB.inBandMetadataTrackDispatchType||""}get Lt(){return this.tB.kind||z.AQ}get kh(){return this.eB}set kh(t){t!==this.eB&&(this.eB=t,void 0!==this.G6&&(this.G6.label=t),this.yo(new xu(this)))}get gs(){return this.tB.language||""}get UI(){return this.zo}set UI(t){let i=this.UI;this.zo=wa(t),this.W6();let e=this.UI;i!==e&&this.yo(new su(this)),e!==lc.Ch&&this.Z6(Ma.LOADING)}get H6(){return wa(this.tB.mode)}set H6(t){this.tB.mode=t}get sB(){return this.tB}get fk(){return this.H5}get X6(){return this.G6?+this.G6.readyState||Ma.NONE:Ma.LOADED}get $x(){return this.y6}get YA(){return this.Zp}set YA(t){this.Zp!==t&&(this.Zp=t,this.yo(new rO(this)))}get q6(){return this.K6}set q6(t){this.K6=t,t&&(this.J6=!0,u((()=>{this.J6=!1}),50)),this.W6()}RQ(t){t.Ht!==this&&(t.Ht=this,this.tB.addCue(t.E6),this.t9())}SQ(t){t.Ht===this&&(t.Ht=void 0,this.tB.removeCue(t.E6),this.t9())}f6(t){var i;const e=null==(i=this.tB.cues)?void 0:i.getCueById(t);if(!e)return;const s=hR(e);return s&&Ia(s)?s[0]:s}NQ(t){this.i9>=t||(this.i9=t,JI(this,t))}W6(){let t=this.UI;this.q6||t!==lc.Jn?this.H6=t:this.H6=lc.Xx}e9(){let t=this.UI,i=this.H6;t!==i&&(this.q6||t!==lc.Jn||i!==lc.Xx)&&("metadata"===this.Lt&&i===lc.Ch?this.UI=t:this.J6&&i===lc.Ch&&t===lc.Jn?this.H6=t:this.UI=i)}q5(t){this.H5!==t&&(this.H5=t,this.yo(new sO(this,t)))}Z6(t){let i=x.max(this.H5,this.X6,t);this.q5(i)}s9(t){let i=hR(t);if(i)return i;if(i=this.n9(t),Ia(i))for(let t of i)t.Ht=this;else i.Ht=this;return i}n9(t){const i=this.r9(t);return t.THEOplayerTextTrackCue=i,i}r9(t){return t.endTime<this.i9?[]:sR(t)?(this.YA=El.ID3,function(t){let i;try{i=rR(t.value)}catch(t){i=OO("")}return new LO(t,i)}(t)):function(t){return t&&t.data instanceof ArrayBuffer}(t)?(this.YA=El.ID3,function(t){let i=[];try{let e=iR(new DataView(t.data));if(e)for(let s of e.V6)i.push(new LO(t,s))}catch(t){}return i}(t)):function(t){return"text"in t}(t)?(this.YA=El.WEBVTT,function(t){return"regionId"in t}(t)?new IO(t):new NO(t)):new AO(t)}o9(t){let i=[];if(!t)return i;let e=t.length;for(let n=0;n<e;n++){var s;let e=this.s9(null!=(s=t[n])?s:t.item(n));if(Ia(e))for(let t of e)i.push(t);else i.push(e)}return i}h9(){let t=this.o9(this.tB.cues),i=eO(this.c6,t);for(let t of i.u6)t.fn(oa.xz,this.t9),t.fn(oa.kz,this.t9),this.yo(new uO(t));for(let t of i.a6)t.yn(oa.kz,this.t9),t.yn(oa.xz,this.t9),this.yo(new hO(t))}N6(){let t=this.o9(this.tB.activeCues),i=eO(this.p6,t);for(let t of i.u6)t.Yh=!1;for(let t of i.a6)t.Yh=!0;(i.a6.length||i.u6.length)&&this.yo(new yO(this))}Kx(t){this.UI=t}gn(){this.Bo();const t=this.c6.slice();for(let i of t)i.gn();nt(this.c6),nt(this.p6),this.tB.removeEventListener("cuechange",this.a9),this.tB.removeEventListener("cuechange",this.t9),this.G6&&(this.G6.removeEventListener("load",this.u9),this.G6.removeEventListener("error",this.c9),dn(this.G6))}constructor(t,i,e=!0){super(),this.c6=[],this.p6=[],this.zo=lc.Ch,this.H5=Ma.NONE,this.y6=void 0,this.Zp=El.DEFAULT,this.J6=!1,this.i9=0,this.a9=()=>{this.W6(),this.tB.removeEventListener("cuechange",this.a9)},this.t9=()=>{this.UI!==lc.Ch&&(this.h9(),this.N6(),this.c6.length&&this.Z6(Ma.LOADING))},this.u9=()=>{this.Z6(Ma.LOADED)},this.c9=()=>{this.Z6(Ma.ERROR)},this.tB=t,this.K6=e,this.tB.addEventListener("cuechange",this.a9),this.tB.addEventListener("cuechange",this.t9),this.G6=i,this.G6&&(this.y6=qs(this.G6.src),this.G6.addEventListener("load",this.u9),this.G6.addEventListener("error",this.c9)),this.iB=ft(),this.eB=t.label||"",this.d6=new Ou(this.c6),this.l6=new Ou(this.p6),this.UI=this.H6,Fs((()=>{this.t9(),this.Z6(Ma.NONE)}))}};function hR(t){return null==t?void 0:t.THEOplayerTextTrackCue}r(),r();function aR(t,i){return To(t.kU,i.kU)||function(t,i){return t.Ht===i.Ht?jl(iO(t),iO(i)):qI(t.Ht,i.Ht)}(t.uB,i.uB)||function(t,i){return t===i?$n.Zr:t===oa.kz?$n.ey:$n.iy}(t.type,i.type)}var uR=class{tr(){nt(this.l9);for(const t of this.Ul.slice())this.it(t);this.d9(),this.f9=0,this.An=0,nt(this.g9),this._9=!1,this.v9=!1,this.w9=0}tt(t){Qa(this.Ul,t)||(this.Ul.push(t),t.yn(yo.aa,this.m9),t.UI!==lc.Ch&&this.p9())}it(t){ra(this.Ul,t)&&(t.fn(yo.aa,this.m9),t.UI!==lc.Ch&&this.p9())}p9(){const t=this.g9,i=this.Ul.filter((t=>t.UI!==lc.Ch));this.g9=i;for(const e of t)Qa(i,e)||this.A9(e);for(const e of i)Qa(t,e)||this.y9(e);this.w9=0}y9(t){if(t.yn(yo.Jk,this.b9),t.yn(yo.tx,this.M9),t.yn(yo.sx,this.T9),t.L.V>0){for(const i of t.L.Ix)this.S9.push(i);this.N9()}}A9(t){if(t.fn(yo.Jk,this.b9),t.fn(yo.tx,this.M9),t.fn(yo.sx,this.T9),t.L.V>0){for(const i of t.L.Ix)ra(this.l9,i),ra(this.S9,i);this.N9()}}I9(){this.ta.wk||this.ta.KE?this.d9():this.N9()}N9(){this._9&&0!==this.g9.length&&(this.w9-this.ta.xE>.25*this.ta.$E||this.f9||(this.f9=this.E9.D9(this.k9)))}d9(){this.f9&&(this.E9.x9(this.f9),this.f9=0)}L9(t){0!==this.w9&&(t.Yh!==Kj(t,this.ta.xE)?this.w9=0:this.An<t.lB&&t.lB<this.w9?this.w9=t.lB:this.An<t.dB&&t.dB<this.w9&&(this.w9=t.dB))}C9(){if(!this._9)return;if(0===this.g9.length)return;if(this.ta.wk)return;const t=this.g9,i=this.An,e=this.ta.xE,s=e-i<-.1;let n=this.v9||s;n&&e>i&&e-i<.1&&(n=!1),this.v9=!1;const r=[];let o=1/0;for(const i of t){const t=i.N6(e,n);t<o&&(o=t);for(const t of i.q.Ix)r.push(t)}const h=this.l9.slice();if(n);else for(const s of t)XI(s,i-Be,e,h);for(let t=h.length-1;t>=0;t--)Qa(r,h[t])&&Mn(h,t);const a=[];if(!n)for(let t=h.length-1;t>=0;t--){const s=h[t];s.lB>i&&s.dB<=e&&(a.push(s),Mn(h,t))}for(const t of this.S9)t.lB!==t.dB&&ra(a,t);nt(this.S9);const u=[],c=[];for(const t of a)t.Yh||u.push(new dO(t,t.lB)),u.push(new gO(t,x.max(t.lB,t.dB))),t.Yh=!1;for(const t of h)t.Yh&&(u.push(new gO(t,x.max(t.lB,t.dB))),t.Yh=!1);for(const t of r)t.Yh||(u.push(new dO(t,t.lB)),t.Yh=!0);u.sort(aR);for(const t of u){const i=t.uB;i.yo(t);const e=i.Ht;e&&(t.type===oa.kz?e.yo(new vO(i)):e.yo(new mO(i)),Qa(c,e)||c.push(e))}c.sort(qI);for(const t of c)t.yo(new yO(t));this.An=e,this.l9=r,this.w9=o}gn(){this.tr(),this.ta.fn(Zi.Eb,this.j9),this.ta.fn(Zi.so,this.O9),this.ta.fn(E.oP,this.j9),this.ta.fn(Zi.wb,this.j9),this.ta.fn(Zi.Mb,this.R9),this.ta.fn(Zi.bb,this.j9)}constructor(t,i){this.Ul=[],this.f9=0,this.An=0,this.l9=[],this.S9=[],this.g9=[],this._9=!1,this.v9=!1,this.w9=0,this.k9=()=>{this.f9=0,this.C9(),this.I9()},this.j9=()=>{this.C9(),this.I9()},this.O9=()=>{this._9=!0,this.j9()},this.R9=()=>{this.v9=!0,this.w9=0,this.d9()},this.m9=()=>{this.p9(),this.C9(),this.I9()},this.b9=t=>{const i=t.uB;Qa(this.S9,i)||this.S9.push(i),this.L9(i),this.N9()},this.M9=t=>{const i=t.uB;ra(this.l9,i),ra(this.S9,i),this.L9(i),this.N9()},this.T9=t=>{this.L9(t.uB),this.N9()},this.E9=i,this.ta=t,t.yn(Zi.Eb,this.j9),t.yn(Zi.so,this.O9),t.yn(E.oP,this.j9),t.yn(Zi.wb,this.j9),t.yn(Zi.Mb,this.R9),t.yn(Zi.bb,this.j9),this.N9()}};r();var Qc=class{D9(t){return Zu(t)}x9(t){Ti(t)}},cR=new Qc,xr=class extends uR{constructor(t,i=cR){super(t,i)}};r(),r();var lR=class extends dN{get ga(){return this.Za||(this.Za=xO(this)),this.Za}EB(t){return DO(this,t)}constructor(t,i,e){super(t,1/0,i,!1,e)}};r(),r();var dR=class extends lO{constructor(t,i,e=El.DEFAULT){super(z.MQ,"",i||"","",!1,e,!1,t)}},fR=class extends dR{RQ(t){EO(t,this.c6),super.RQ(t)}ma(){return EM(this)}constructor(t,i){super(t,i),this.YA=El.ID3}},gR=class extends fR{get o(){return this.tB.id||""}get qx(){return this.tB.inBandMetadataTrackDispatchType||""}get gs(){return this.tB.language||""}m6(t){super.m6(t),this.H6=this.UI}get H6(){return wa(this.tB.mode)}set H6(t){this.tB.mode=t}get sB(){return this.tB}RQ(t){super.RQ(t),t.E6.track!==this.tB&&this.tB.addCue(t.E6)}SQ(t){super.SQ(t),t.E6.track===this.tB&&this.tB.removeCue(t.E6)}NQ(t){this.i9>=t||(this.i9=t,JI(this,t))}Z6(t){this.fk=x.max(this.fk,t)}h9(){let t=this.tB.cues;if(!t)return;const i=t.length,e=[],s=[];for(let o=0;o<i;o++){var n;const i=null!=(n=t[o])?n:t.item(o);if(sR(i)&&i.endTime>=this.i9){var r;const t=null!=(r=null==i?void 0:i.THEOplayerTextTrackCue)?r:new _R(i);e.push(t)}else s.push(i)}Gv(e,me);let o=eO(this.L.Ix.slice(),e);for(const t of s)this.tB.removeCue(t);for(let t of o.u6)t.gn(),this.SQ(t);for(let t of o.a6)this.RQ(t)}gn(){this.tB.removeEventListener("cuechange",this.t9),super.gn()}constructor(t){super(t.inBandMetadataTrackDispatchType,t.label),this.i9=0,this.t9=()=>{this.UI!==lc.Ch&&(this.h9(),this.Z6(Ma.LOADED))},this.tB=t,this.tB.addEventListener("cuechange",this.t9),this.UI=this.H6,Fs((()=>{this.t9()}))}},_R=class extends lR{gn(){super.gn(),this.E6.THEOplayerTextTrackCue=void 0}constructor(t){super(t.startTime,rR(t.value),t.id),this.E6=t,this.E6.THEOplayerTextTrackCue=this}};function vR(t){return"TXXX"===t.id||"TXX"===t.id}r(),r();var wR=class extends tD{P9(){this.z9.yn(bs.Hk,this.rV),this.z9.yn(bs.qk,this.oV)}B9(){this.z9.fn(bs.Hk,this.rV),this.z9.fn(bs.qk,this.oV)}U9(t){const i=t.L.Ix[0];if(!mR(i))return;const e=function(t){const i=t.match(pR);if(!i)return;return{Ht:i[1],gs:i[2]}}(i.U.description),s=e.Ht,n=e.gs;if(this.Q9(s,n))return;const r=this.CQ.Wk(z.AQ,t.o,s,n,!1,El.TTML);this.tt(r),this.F9.set(t.Gx,r);for(let i of t.L.Ix)mR(i)&&this.Y9(i);t.yn(yo.Jk,this.V9)}Q9(t,i){return this.Z.Ix.some((e=>e.kh===t&&e.gs===i))}Y9(t){if(!t.Ht)return;const i=this.F9.get(t.Ht.Gx),e=NI(t.U.text,i,{sQ:0,nQ:1/0,rQ:t.lB});for(let t of e)i.RQ(t)}async tr(){for(let t of this.z9.Ix)t.fn(yo.Jk,this.V9);for(let t of this.Z.Ix)this.CQ.BQ(t);this.F9.clear(),await super.tr()}async gn(){this.B9(),await super.gn()}constructor(t,i){super(),this.CQ=t,this.z9=i,this.F9=pc(),this.rV=async t=>{const i=t.Ht;if(i.YA||await i.zy(yo.Ax),i.YA===El.ID3){for(;0===i.L.V;)await i.zy(yo.Jk);this.U9(i)}},this.oV=t=>{const i=t.Ht;if(i.YA!==El.ID3||!this.F9.has(i.Gx))return;const e=this.F9.get(i.Gx);this.it(e),this.CQ.BQ(e),i.fn(yo.Jk,this.V9)},this.V9=t=>{mR(t.uB)&&this.Y9(t.uB)},this.P9()}};function mR(t){return function(t){return vR(t)&&pR.test(t.description)}(t.U)}var pR=/^Track:(.+),Lang:(.+)$/;r(),Qi(),r();var jr=[Zi.Vy,Zi.Yy,Zi.xb,Zi.Cb];r();var Go=class extends Jr{get error(){return this.errorObject.message}get licenseAcquisitionURL(){return this.errorObject.url}get status(){return this.errorObject.status}get statusText(){return this.errorObject.statusText}get licenseAcquisitionMessage(){return this.errorObject.response}get systemCode(){return this.errorObject.systemCode}constructor(t){super(Zi.Yy),this.errorObject=t}};r(),r(),r();var AR=class extends Jr{constructor(t){super(Zi.Vy),this.G9=t}};Qi(),r();var yR=class extends Jr{constructor(t){super("Lb"),this.G9=t}};ds();var bR=new La,MR=class extends Jr{constructor(t){super("Ws"),this.session=t}},TR=class extends tu{get W9(){return this.Z9}vS(){return this.H9=!0,bR.Wo((t=>this.X9(t)),this.rN.ly)}async X9(t){try{yi(t),await this.q9.gF(t);const i=await this.q9._F(this.K9.GA,this.K9.Vb,t);await this.J9.vS(this.K9.GA,this.K9.Vb,i)}catch(t){X(t);const i=t instanceof Em?t.hM:void 0,e=new lu(vt.CONTENT_PROTECTION_INTERNAL_ERROR,"Error while performing the CDM request",t,void 0,void 0,void 0,void 0,i);throw this.Ss(e),e}}async yF(t,i){let e;try{e=function(t){return Yn(t,Nm())}(t)?await this.q9.kF(new T(t),this.rN.ly):await this.q9.xF(new T(t),i,this.rN.ly)}catch(t){if(Tu(t))return;throw t}if(this.rN.ly.sy)return;const s=this.t8,n=new xh;this.t8=n;try{await this.J9.Yn(e),await kt(100)}catch(t){const i=t instanceof Em?t.hM:void 0;throw new lu(vt.CONTENT_PROTECTION_INTERNAL_ERROR,"Error while applying license response",t,void 0,void 0,void 0,void 0,i)}finally{void 0!==s&&await s.rM,n.sM(),this.t8===n&&(this.t8=void 0)}}Ss(t){const i=t instanceof lu?t:new lu(vt.CONTENT_PROTECTION_ERROR,t.message,t);this.yo(new Go(i)),this.Ws()}i8(){this.J9.fn("Pb",this.um),this.J9.fn(Zi.Cb,this.e8),this.J9.fn("lt",this.s8),this.n8=!1,this.Z9=!1,this.rN.Ty(),this.yo(new MR(this))}async Ws(){let t;this.Bo();do{t=this.t8,void 0!==t&&await t.rM}while(this.t8!==t);this.i8(),await this.J9.Ws().catch(ya)}constructor(t,i,e){super(),this.J9=t,this.q9=i,this.K9=e,this.H9=!1,this.n8=!1,this.rN=new Wt,this.Z9=!1,this.um=t=>{if(!this.rN.ly.sy)switch(t.Bb){case"license-request":case"license-renewal":this.yF(t.Pb,t.Ub).catch((t=>this.Ss(t)));break;default:this.Ss(new lu(vt.CONTENT_PROTECTION_NOT_SUPPORTED,"Unsupported CDM message type: "+t.Bb))}},this.e8=t=>{this.J9.Rb.iM(((t,i)=>{switch(t){case"usable":Fe.Pg((()=>{this.n8=!0,this.yo(new AR(i))}),100);break;case"expired":case"status-pending":default:break;case"output-restricted":case"internal-error":this.yo(new yR(i))}})),this.Z9=!0,this.yo(t)},this.s8=t=>{this.Ss(new lu(vt.CONTENT_PROTECTION_INTERNAL_ERROR,"Unknown CDM error"))},t.yn("Pb",this.um),t.yn(Zi.Cb,this.e8),t.yn("lt",this.s8),t.uS.then((()=>this.i8()),(t=>this.Ss(t)))}},SR=class extends tu{get NS(){return this.yS}get r8(){return this.o8.every((t=>t.W9))}fF(){return this.h8.fF()}a8(t){return this.u8||(this.u8=this.c8(t)),this.u8}async c8(t){yi(t);const i=await this.h8.kF(new T(Nm()),t);if(yi(t),!this.SS)throw new b("Invalid MediaKeys when setting ServerCertificate");await this.SS.IS(i.buffer)}async l8(t){if(!this.SS)throw new b("Invalid MediaKeys when creating KeySession");try{this.d8.push(t);const i=await this.SS.TS("temporary"),e=new TR(i,this.h8,t);return this.o8.push(e),e.yn(jr,this.f8),e.yn("Ws",this.g8),e}finally{ra(this.d8,t)}}_8(t){if(t.v8)return!1;for(const i of this.o8)if(NR(i.K9,t))return!0;for(const i of this.d8)if(NR(i,t))return!0;return!1}async gn(){this.SS=void 0,this.Bo();const t=this.o8.slice();nt(this.o8),await Promise.all(t.map((t=>t.Ws()))),this.w8=void 0,this.h8.wy()}constructor(t,i,e){super(),this.o8=[],this.u8=void 0,this.d8=[],this.f8=t=>{if(t instanceof Aw)return null!=this.w8||(this.w8=new ru),t.Rb.iM(((t,i)=>{this.w8.tM(i,t)})),void(this.r8&&this.yo(new Aw(this.w8)));this.Ds(t)},this.g8=t=>{t.session.fn(jr,this.Ds),t.session.fn("Ws",this.g8),ra(this.o8,t.session),this.w8=void 0},this.yS=t,this.SS=i,this.h8=e}};function NR(t,i){return!t.v8&&t.GA===i.GA&&Yn(t.Vb,i.Vb)}var IR=class extends tu{get m8(){var t;return null==(t=this.yS)?void 0:t.NS}get zV(){return this.h8}set zV(t){this.h8=t}$n(t,i){this.vV=t,this.D$(i)}D$(t){this.KS=t,this.p8(this.rN.ly).catch(Ct)}k$(t){this.A8(t,this.rN.ly).catch(Ct)}async A8(t,i){var e,s;yi(i);var n;if(null==(e=this.KS)?void 0:e.yV)for(const e of null!=(n=null==(s=this.KS)?void 0:s.yV)?n:[]){var r;const s=dl(t,(t=>t.y8===e.NS.ZA));if(void 0!==(null==s?void 0:s.b8)&&!(null==(r=e.XY)?void 0:r.some((t=>Yn(s.b8,t)))))try{return void await this.M8(e.NS.GA,s.b8,i)}catch(t){X(t)}}}async p8(t){if(!Fe.Ys.Sp||!await this.T8(t))return this.KS&&this.KS.S8?await this.N8(t):void 0}async T8(t){var i,e;if(!(null==(i=this.KS)?void 0:i.yV))return!1;let s=!1;var n;for(const i of null!=(n=null==(e=this.KS)?void 0:e.yV)?n:[]){var r;for(const e of null!=(r=i.XY)?r:[])try{await this.M8(i.NS.GA,e,t),s=!0}catch(t){X(t)}if(s)return!0}return!1}async M8(t,i,e){if(yi(e),!i.byteLength)return;if(!this.KS||!this.KS.yV.length)throw new lu(vt.CONTENT_PROTECTION_CONFIGURATION_MISSING,"Missing configuration for encrypted content");if(t!==bo&&t!==vv&&t!==_v)return void 0;const s=kT(t,i),n=this.KS.yV;let r;for(const i of n){yi(e);const n=s[i.NS.WA];if(n&&i.NS.GA===t)try{const t=await this.I8(i,e);t.fF()&&await t.a8();const s=this.cz.FE,r={GA:i.NS.GA,Vb:n,v8:s};if(this.D8(t,r)){const i=await t.l8(r);await i.vS()}return}catch(t){X(t),r=t}}throw await Fe.gA()?new lu(vt.CONTENT_PROTECTION_NOT_SUPPORTED,"Encrypted content over an insecure connection is not supported",r):new lu(vt.CONTENT_PROTECTION_NOT_SUPPORTED,"Cannot create content decryption session",r)}async N8(t){var i;const e=null==(i=this.KS)?void 0:i.yV;if(e)for(const i of e){yi(t);try{const e=await this.I8(i,t);return void(e.fF()&&await e.a8())}catch(t){X(t)}}}D8(t,i){return Fe.Ys.Tp||this.cz.mz.wz||!t._8(i)}I8(t,i){return this.Go.Wo((i=>this.E8(t,i)),i)}async E8(t,i){if(yi(i),!this.KS||!this.h8||!this.vV)throw new b("Not initialized");if(this.yS){if(this.yS.NS!==t.NS)throw new b("Internal key system error");return this.yS}const e=this.h8,s=Ei({},t,{HV:t.HV.map((i=>{var s;return Ei({},i,{persistentState:null!=(s=i.persistentState)?s:e.jF(t.NS),RS:i.RS||e.RS(t.NS)})}))}),n=await this.vV.T$(s.NS,s.HV),r=e.HY(s),o=new SR(s.NS,n,r);return o.yn(jr,this.Ds),this.yS=o,o}Ss(t){if(Tu(t))return;const i=t instanceof lu?t:new lu(vt.CONTENT_PROTECTION_ERROR,t.message,t);this.yo(new Go(i))}async tr(){this.vV=void 0,this.KS=void 0,this.rN.Ty(),this.rN=new Wt,await this.k8()}async k8(){await this.Go.Ty();const t=this.yS;t&&(t.fn(Zi.xb,this.Ds),this.yS=void 0,await t.gn())}async wy(){this.Bo(),this.cz.fn(bw.Xy,this.x8),await this.tr(),await this.Go.gn()}constructor(t){super(),this.rN=new Wt,this.Go=new La,this.KS=void 0,this.h8=void 0,this.vV=void 0,this.yS=void 0,this.x8=t=>{this.M8(t.GA,t.Vb,this.rN.ly).catch((t=>this.Ss(t)))},this.cz=t,this.cz.yn(bw.Xy,this.x8)}};r();var DR=class extends Jr{constructor(t){super(Zi.ob),this.currentTime=t}};r();var ER=class extends tu{get fk(){return void 0!==this.L8?this.L8.fk:Fn.Nz}q5(){var t;null==(t=this.L8)||t.q5()}tr(){var t;null==(t=this.L8)||t.tr()}wy(){this.Bo(),void 0!==this.L8&&(this.L8.wy(),this.L8=void 0)}C8(t){if(this.L8===t)return;const i=this.fk;void 0!==this.L8&&this.L8.wy(),this.L8=t,void 0!==t&&(t.yn(E.wx,this.Ds),t.q5());const e=this.fk;i!==e&&this.yo(new Yu(this.j8.xE,e))}constructor(t){super(),this.j8=t}};r();var kR=class extends lO{get ga(){var t;return null!=(t=this.Za)?t:this.Za=xR(this)}O8(t,i,e){const s=new Ht(t,i,e,!1);return this.RQ(s),s}P8(t){this.SQ(t)}constructor(t,i,e){super(t,i,"",e,void 0,El.WEBVTT)}};function xR(t){return fe(EM(t),{get type(){return t.YA},addCue:(i,e,s)=>t.O8(i,e,s).ga,removeCue(i){t.P8(i.cB)}})}r();var LR=class extends oR{get ga(){var t;return null!=(t=this.Za)?t:this.Za=xR(this)}O8(t,i,e){const n=this.n9(new s.VTTCue(t,i,e));return this.sD?this.RQ(n):this.z8.push(n),n}P8(t){ra(this.z8,t),this.SQ(t)}gn(){var t;super.gn(),null==(t=this.G6)||t.removeEventListener("load",this.B8),nt(this.z8)}constructor(t,i){var e;super(t,i),this.sD=!1,this.z8=[],this.B8=()=>{var t;null==(t=this.G6)||t.removeEventListener("load",this.B8),this.sD=!0;for(const t of this.z8)this.RQ(t);nt(this.z8)},null==(e=this.G6)||e.addEventListener("load",this.B8),this.YA=El.WEBVTT}},CR=Ro.zf||Ro.Uf,jR=Ro.Lg,OR=Ro.qf,RR=Ro.qf&&Ro.Ka,PR=class extends tu{get J5(){return this.U8}get TE(){return this.vV?this.vV.TE:Mo.PP()}get NE(){const t=this.wV;if(!t||j(t.getTime()))return;const i=1e3*this.xE;return new Date(t.getTime()+i)}get wV(){if(this.gV.getStartDate)return this.kG&&this.Q8||(this.Q8=this.gV.getStartDate()),this.Q8}get xE(){return this.F8?this.F8.xE:void 0!==this.Y8?this.Y8:this.vN.currentTime}get Uu(){return this.Xu}get ct(){return this.F8?this.F8.ct:this.vV?this.vV.ct:this.vN.duration}get OE(){return this.wk?this.V8():this.F8?this.F8.OE:this.vN.ended||this.G8}V8(){return void 0!==this.Y8&&this.ct===this.Y8}get lt(){return this.dV}get gV(){return this.vN}get KE(){return this.W8?this.Z8:this.F8?this.F8.KE:this.vN.paused}get rk(){return this.Fo.pP(Mo.xn(this.vN.played))}get Ti(){return this.vN.offsetHeight*Fe.Ys.bp}get ji(){return this.vN.offsetWidth*Fe.Ys.bp}get wa(){return this.Zo}get LV(){return this.Qo}get fk(){return this.H8.fk}get _k(){return this.vV?this.vV._k:Mo.PP()}get wk(){return this.F8?this.F8.wk:this.kG||this.vN.seeking&&!this.W5}get G5(){return this.F8?this.F8.G5:this.W5}get s6(){return 0!==this.X8}get WE(){return this.F8?this.F8.WE:this.vN.muted}set WE(t){this.F8?this.F8.WE=t:(this.vN.muted=t,this.q8())}get $E(){return this.F8?this.F8.$E:void 0!==this.K8?this.K8:this.vN.playbackRate}set $E(t){this.F8?this.F8.$E=t:this.KE||this.U8?(this.K8=t,this.J8()):(this.K8=void 0,this.vN.playbackRate=t,this.J8())}J8(){const t=this.$E;this.t7!==t&&(this.t7=t,this.yo(new cu(this.xE,t)))}get i7(){return this.IG}get Nk(){return this.F8?this.F8.Nk:this.vN.volume}set Nk(t){this.F8?this.F8.Nk=t:(this.vN.volume=t,this.q8())}q8(){const t=this.Nk,i=this.WE;this.e7===t&&this.s7===i||(this.e7=t,this.s7=i,this.yo(new $e(this.xE,this.Nk)))}GE(){return JL(this.vN)}Pk(){this.n7||(this.n7=!0);const t=this.r7();return this.o7(),t}o7(){this.W8?this.Z8&&(this.Z8=!1,this.yo(new fi(this.xE))):this.h7()}h7(){if(this.F8)this.F8.Pk();else{Ro.qf&&!Ro.Ka&&this.vN.preload===Nr.pG&&(this.vN.preload=Nr.MQ);const t=this.$E,i=this.vN.play();t!==this.gV.playbackRate&&(this.$E=t),this.G8=!1,pr(i)?i.then(this.a7,this.u7):this.l7.n6()&&this.d7()}}Rk(){this.W8?this.Z8||(this.Z8=!0,this.yo(new Zr(this.xE))):this.f7()}f7(){this.F8?this.F8.Rk():(this.vN.pause(),this.l7.Yn()),this.g7(new J)}r7(){const t=new xh;return this._7.push(t),t.rM}v7(){for(const t of this._7)t.sM(void 0);nt(this._7)}g7(t){for(const i of this._7)i.nM(t);nt(this._7)}d7(){this.W8||this.F8||this.v7()}w7(t){this.W8||this.F8||this.g7(t)}Wb(t,i,e){void 0===i&&(i=!1),void 0===e&&(e=!1),this.F8?this.F8.Wb(t,i,e):(this.m7.Ty(),this.m7=new Wt,this.p7=Vh(this.A7(t,i,e,this.p7,this.m7.ly),this.m7).catch(ya))}cV(t){const i=this.wV;if(!i||j(i.getTime()))return;const e=(t.getTime()-i.getTime())/1e3;this.Wb(e)}async A7(t,i,e,s,n){try{if(this.Y8=t,this.y7=t,this.b7=Fe.Og(),e&&!this.kG?this.W5=!0:(this.kG=!0,this.W5=!1),this.G8&&!this.V8()&&(this.G8=!1),this.W5?this.yo(new zj(this.xE)):this.yo(new Yr(t)),await s.catch(ya),yi(n),this.vV&&!this.vV.Z$())return void this.M7();for(this.T7&&this.S7(),this.H8.fk===Fn.Nz&&await this.H8.zy(E.wx,n);0===this.vN.seekable.length||RR&&!this.n7;){const t={stack:[],error:void 0,hasError:!1};try{const i=Ne(t,Wt.Iy([n]),!1);await Promise.race([ku(this.vN,"timeupdate",i.ly),kt(100,i.ly)]),yi(n)}catch(i){t.error=i,t.hasError=!0}finally{qr(t)}}let o=Lj(this.TE,t,.05),h=this._k,a=!0,u=!1;for(;;){const t={stack:[],error:void 0,hasError:!1};try{var r;if(h=this._k,h.V>0&&!h.gr(o)&&(o=h.gP(o),a=!0),i&&!this.vN.fastSeek){const t=this.TE;if(!t.gr(o)){const i=Lj(t,o,1);i!==o&&(o=i,a=!0)}}if(OR){const t=this.N7();void 0!==t&&o>t&&(o=t,a=!0)}if(!u){const t=this.I7();void 0!==t&&o>t&&(u=!0,await this.D7(t,!1,n),await ku(this.vN,"seeked",n),yi(n),a=!0)}if(a){a=!1,await this.D7(o,i,n),yi(n);let t=this.xE;h=this._k,o=h.gP(o);let e=1;for(;x.abs(o-t)>=Be;)h=this._k,o=BR(o,h,e),await this.D7(o,i,n),yi(n),t=this.xE,e++}if(!(this.vN.seeking||this.H8.fk<Fn.Iz))break;const e=Ne(t,Wt.Iy([n]),!1);await Promise.race([ku(this.vN,"seeked",e.ly),this.zy([Zi.mb,Zi.Zy],e.ly),this.H8.zy(E.wx,e.ly),null==(r=this.vV)?void 0:r.zy(sl.m$,e.ly)].filter($t)),yi(n)}catch(i){t.error=i,t.hasError=!0}finally{qr(t)}}this.M7()}catch(t){if(Tu(t))return;0}}async D7(t,i,e){yi(e);let s=this._k;if(t=s.gP(t),this.T7){let i=!0;for(;i||this.H8.fk<Fn.Dz;){const n={stack:[],error:void 0,hasError:!1};try{if(s=this._k,s.gr(t)||(t=s.gP(t),i=!0),i){i=!1,this.Y8=t,this.E7(this.xE);continue}const r=Ne(n,Wt.Iy([e]),!1);await Promise.race([this.zy(Zi.Zy,r.ly),this.H8.zy(E.wx,r.ly)])}catch(t){n.error=t,n.hasError=!0}finally{qr(n)}}yi(e)}const n=ku(this.vN,"seeking",e);i&&this.vN.fastSeek?this.vN.fastSeek(t):this.vN.currentTime=t,this.Y8=void 0,this.E7(this.xE),this.vN.seeking&&await n}N7(){if(!this.vV||!this.vV.F$)return;const t=this.vV.Y$,i=this.vV.V$,e=t&&i?t.Sn(i):t||i;if(!e||0===e.V)return;const s=e.Cn(e.V-1),n=e.jn(e.V-1);return x.max(s,n-.001)}I7(){if(!this.vV||!this.vV.F$)return;const t=this.vV.V$;if(!t||0===t.V)return;const i=t.Cn(t.V-1);let e=t.jn(t.V-1)-.02;return e-=.001,x.max(i,e)}E7(t){this.y7!==t&&(this.y7=t,this.W5?this.yo(new zj(t)):this.yo(new Yr(t)))}M7(){const t=this.W5;this.kG=!1,this.W5=!1,this.b7=0,this.y7=NaN,this.T7&&this.k7(),t?(this.yo(new DR(this.xE)),this.x7()):(this.yo(new aa(this.xE)),this.L7=!0),this.rJ()}S7(){this.W8||(this.Z8=this.KE,this.W8=!0,this.f7())}k7(){this.W8&&(this.W8=!1,this.Z8||this.o7())}H$(t){for(const i of t){if(i.YA===uh.QQ&&bC.H$(i,this.vN))return i;if(i.YA===uh.FQ&&Rj.H$(i))return i}}be(){this.IG=!1,Ln(this.vN)&&(this.vN.style.display="none")}ge(){this.IG=!0,Ln(this.vN)&&(this.vN.style.display="block")}get nt(){return this.C7}get Ll(){return this.FG}Wk(t,i,e,s,n,r,o,h,a){const u=new lO(t,i,e,s,n,r,o,a,h);return this.Ul.tt(u),this.j7.tt(u),u}CV(t){const{Lt:i,kh:e,gs:n}=t;if("function"==typeof this.vN.addTextTrack&&"function"==typeof s.VTTCue){const{track:t,trackElement:s}=this.O7("data:text/vtt,WEBVTT%0A%0A",i,e,n);let r=new LR(t,s);return this.R7.tt(r),this.P7.push(r),r}const r=new kR(i,e,n);return this.Ul.tt(r),this.j7.tt(r),r}DV(){return!0}kV(t,i,e,s,n){const{track:r,trackElement:o}=this.O7(t,i,e,s,n),h=new oR(r,o);return this.R7.tt(h),this.P7.push(h),h}O7(t,i,e,s,n){const r=h.createElement("track");r.src=qs(t),r.kind=i,r.label=null!=e?e:"",s&&(r.srclang=s),r.default=!!n,r.id=Cx(),this.vN.appendChild(r);return{track:this.vN.textTracks.getTrackById(r.id),trackElement:r}}BQ(t){this.Ul.it(t),this.j7.it(t)}jV(){for(const t of this.Ul.Ix.slice())t.gn();this.Ul.tr();for(const t of this.P7.slice())this.R7.it(t),t.gn();nt(this.P7)}XV(){let t=this.vN.textTracks;t&&t.addEventListener&&(t.addEventListener("addtrack",this.z7),t.addEventListener("removetrack",this.B7),t.addEventListener("change",this.U7))}PV(){let t=this.vN.textTracks;t&&t.removeEventListener&&(t.removeEventListener("addtrack",this.z7),t.removeEventListener("removetrack",this.B7),t.removeEventListener("change",this.U7))}Q7(t){t.mode=lc.Xx;const i=new gR(t);this.R7.tt(i),this.j7.tt(i)}F7(t,i){const e=()=>{QR(t)&&(t.removeEventListener("cuechange",e),this.R7.tt(new oR(t,i)))};t.addEventListener("cuechange",e),t.mode=lc.Xx}Y7(t){let i=this.vN.getElementsByTagName("track");for(let e=0;e<i.length;e++){let s=i[e]||i.item(e);if(s.track===t)return s}}V7(){if(0===this.R7.V)return;const t=this._k;if(0===t.V)return;const i=t.Cn(0);if(this.G7!==i){for(const t of this.R7.Ix)t.NQ(i);this.G7=i}}$n(t){return this.W7.Wo((async i=>{if(yi(i),this.vV)throw new b("Already loaded a media source");let e;if(t.YA===uh.QQ)e=new bC(t,this,this.E$,this.KA),this.T7=!1,this.H8.C8(this.Z7());else{if(t.YA!==uh.FQ)throw new b("Unsupported configuration");{this.T7=CR;const i=this.Z7();e=new Rj(t,this,i,this.E$,this.KA,void 0,this.m5),this.H8.C8(i),jR&&(this.yn(Zi.Eb,this.H7),this.H8.yn(E.wx,this.X7))}}return this.vV=e,await e.FK(),e}))}Z7(){return this.T7?new Wj(this):new Gj(this)}q7(){if(this.U8)return;const t=this.$E;this.U8=!0,this.$E=t,this.vN.playbackRate=0,this.H8&&this.H8.q5()}K7(){if(!this.U8)return;const t=this.$E;this.U8=!1,this.$E=t,this.J7()}J7(){this.vN.currentTime=this.vN.currentTime,this.H8&&this.H8.q5()}async tr(){this.kG=!1,this.W5=!1,this.L7=!1,Fe.Rg(this.X8),this.X8=0,this.Fo=Mo.PP(),this.m7.Ty(),this.Y8=void 0,this.y7=NaN,this.Q8=void 0,this.T7=!1,this.W8=!1,this.dV=void 0,this.G8=!1,this.ttt=void 0,this.G7=0,this.itt=!1,this.n7=!1,this.ett&&(this.stt(),this.ett=!1),this.g7(new J),this.H8.C8(new Gj(this)),this.l7.tr(),this.R7.tr(),this.K7(),jR&&(Ti(this.ntt),this.ntt=0,this.fn(Zi.Eb,this.H7)),await this.W7.Ty(),await this.W7.Wo((async()=>{this.vV&&(await this.vV.wy(),this.vV=void 0,Ro.Nf&&Ro.Df<3&&this.ott())}))}ott(){this.htt();const t=this.vN,i=t.parentElement,e=t.tagName.toLowerCase();this.vN=Mz(e),this.retainMediaElementState(t),Tz(t),null==i||i.replaceChild(this.vN,t),this.stt(),this.H8.C8(this.Z7()),this.l7.fn(E.oP,this.att),this.l7.wy(),this.l7=new Xj(this),this.l7.yn(E.oP,this.att),this.IG?this.ge():this.be(),this.yo(new kS),this.yo(new Bu)}retainMediaElementState(t){this.gV.muted=t.muted,this.gV.volume=t.volume}async wy(){this.ett=!1,this.htt(),this.PV(),await this.tr(),await this.W7.gn(),this.l7.wy(),this.H8.wy(),await this.E$.wy(),this.jV(),this.Ul.gn(),this.R7.gn(),await this.utt.gn(),this.ctt.gn(),this.C7.gn(),this.Bo()}stt(){this.gV.addEventListener("play",this.ltt),this.gV.addEventListener("pause",this.dtt),this.gV.addEventListener("timeupdate",this.ftt),this.gV.addEventListener("progress",this.gtt),this.gV.addEventListener("loadstart",this._tt),this.gV.addEventListener("ended",this.wtt),this.gV.addEventListener("ratechange",this.mtt),this.gV.addEventListener("volumechange",this.ptt),this.gV.addEventListener("durationchange",this.Att),this.gV.addEventListener("resize",this.ytt),this.gV.addEventListener("loadedmetadata",this.ytt),this.gV.addEventListener("error",this.btt),this.gV.addEventListener("emptied",this.Mtt),this.gV.addEventListener("seeked",this.Ttt),this.gV.addEventListener("seeking",this.Stt),Fv()?(this.vN.addEventListener("encrypted",this.Ntt),this.vN.addEventListener("waitingforkey",this.Itt)):void 0!==gi.WebKitMediaKeys&&"function"==typeof gi.WebKitMediaKeys.isTypeSupported?this.vN.addEventListener("webkitneedkey",this.Dtt):Yv()?this.vN.addEventListener("webkitneedkey",this.Ett):void 0!==gi.MSMediaKeys&&"function"==typeof gi.MSMediaKeys.isTypeSupported&&this.vN.addEventListener("msneedkey",this.ktt)}htt(){this.gV.removeEventListener("play",this.ltt),this.gV.removeEventListener("pause",this.dtt),this.gV.removeEventListener("timeupdate",this.ftt),this.gV.removeEventListener("progress",this.gtt),this.gV.removeEventListener("loadstart",this._tt),this.gV.removeEventListener("ended",this.wtt),this.gV.removeEventListener("ratechange",this.mtt),this.gV.removeEventListener("volumechange",this.ptt),this.gV.removeEventListener("durationchange",this.Att),this.gV.removeEventListener("resize",this.ytt),this.gV.removeEventListener("loadedmetadata",this.ytt),this.gV.removeEventListener("error",this.btt),this.gV.removeEventListener("encrypted",this.Ntt),this.gV.removeEventListener("waitingforkey",this.Itt),this.gV.removeEventListener("webkitneedkey",this.Dtt),this.gV.removeEventListener("webkitneedkey",this.Ett),this.gV.removeEventListener("msneedkey",this.ktt),this.gV.removeEventListener("emptied",this.Mtt),this.gV.removeEventListener("seeked",this.Ttt),this.gV.removeEventListener("seeking",this.Stt)}xtt(){this.F8||(this.Fo=this.rk,this.F8=Qj(this),this.htt(),this.F8.yn(Bj,this.Ds))}Ltt(){if(!this.F8)return;const t=this.F8;this.F8=void 0,this.H8.q5(),Fj(this,t),t.wy(),this.stt()}x7(){const t=this.xE;this.yo(new A(t,void 0)),this.ttt=t}rJ(){this.G8||!this.OE||this.wk||(this.G8=!0,this.yo(new fa(this.xE)))}eG(t){this.dV=t,this.g7(this.dV),this.yo(new qj(this.dV))}get FE(){return!!this.vN.webkitCurrentPlaybackTargetIsWireless}get Ctt(){return this.jtt}get mz(){return Ei({},wC)}Ott(){this.jtt||(Nz(this.vN,Fe.Ys),this.jtt=!0)}Rtt(t){t.appendChild(this.vN)}M3(){jR&&this.H7(),this.H8.q5()}get zV(){return this.E$.zV}set zV(t){this.E$.zV=t}get Ptt(){return this.m5}set Ptt(t){this.m5=t}get m8(){return this.E$.m8}Fk(){this.E$.k8().catch(ya),this.R7.tr()}get Lk(){return this.itt}set Lk(t){this.itt=t,this.ett&&!this.itt&&(this.ett=!1,this.stt())}constructor(t,i,e,s){super(),this.dV=void 0,this.IG=!0,this.vV=void 0,this.W7=new La,this.F8=void 0,this.Zo=new ut,this.Qo=new nk,this.P7=[],this.Y8=void 0,this.b7=0,this.y7=NaN,this.Q8=void 0,this.L7=!1,this.ttt=void 0,this.G7=0,this.kG=!1,this.W5=!1,this.ztt=Fn.Nz,this.X8=0,this.p7=Promise.resolve(),this.m7=new Wt,this._7=[],this.Fo=Mo.PP(),this.K8=void 0,this.t7=1,this.s7=!1,this.e7=1,this.G8=!1,this.itt=!1,this.ett=!1,this.T7=!1,this.W8=!1,this.Z8=!1,this.U8=!1,this.jtt=!1,this.ntt=0,this.n7=!1,this.z7=t=>{const i=t.track,e=this.Y7(i);if(!UR(this.R7,i)){if(Ro.qf){if(i.kind===z.MQ)return void this.Q7(i);if(i.kind===z.yQ&&""===i.label&&""===i.language&&!QR(i))return void this.F7(i,e)}this.R7.tt(new oR(i,e))}},this.B7=t=>{const i=UR(this.R7,t.track);i&&this.R7.it(i)},this.U7=()=>{for(let t=0;t<this.R7.V;t++){let i=this.R7.Ex(t);i instanceof oR&&i.e9()}},this.H7=()=>{if(void 0===this.vV||!mC(this.vV))return;const t=this.vV,i=t.A5,e=t.y5;if(!i||!e)return;if(t.F$)return void this.K7();if(t.fk===Oj.f3)return;const s=i.TE,n=e.TE;if(0===s.V&&0===n.V)return void this.K7();const r=this.xE;if(r<s.Cn(0)||r<n.Cn(0))return void this.K7();if(s.gr(r)!==n.gr(r)){if(t.W$(r))return;this.q7()}else if(this.K7(),!this.ntt&&this.l7.n6()){s.AP(n).SP(r,r+.5)&&(this.ntt=Zu(this.Btt))}},this.Btt=()=>{this.ntt=0,this.H7()},this.X7=()=>{if(this.wk||this.G5)return;if(this.H8.fk>=Fn.Dz)return;if(void 0===this.vV||!mC(this.vV))return;const t=this.vV,i=t.A5,e=t.y5;if(!i||!e)return;const s=this.xE,n=i.TE,r=e.TE;if(!n.gr(s)||!r.gr(s))return;n.AP(r).SP(s-5,s)&&(this.U8?this.K7():this.J7())},this.ltt=()=>{this.yo(new fi(this.xE))},this.dtt=()=>{this.w7(new J),this.yo(new Zr(this.xE))},this.att=()=>{this.d7(),this.yo(new te(this.xE))},this.mtt=()=>{this.J8()},this.Att=()=>{this.yo(new Hs(this.ct))},this.gtt=()=>{this.yo(new ii(this.xE))},this._tt=()=>{this.yo(new Gi)},this.Ttt=()=>{this.kG||this.W5||this.L7?this.L7=!1:this.yo(new aa(this.xE))},this.Stt=()=>{this.E7(this.xE),this.L7=!1},this.ftt=()=>{const t=this.xE,i=this.wk,e=this.H8.fk<Fn.Dz&&!this.OE,s=void 0!==this.ttt,n=s&&this.ttt!==t;this.V7(),(i||!s||n&&!e)&&this.x7()},this.wtt=()=>{this.rJ()},this.btt=()=>{if(null!==this.vN.error){const i=this.vN.error;var t;this.eG(new RS(null!=(t=i.code)?t:lt.DECODE,i.message||"Error decoding media",void 0,i.msExtendedCode))}},this.Mtt=()=>{this.itt&&(this.htt(),this.ett=!0)},this.Utt=t=>{if(Fe.Rg(this.X8),this.X8=0,t.readyState<=Fn.Iz)if(this.kG||this.W5){const i=Fe.Og()-this.b7;if(i<250)return void(this.X8=Fe.Pg((()=>this.Utt(t)),250-i))}else if(void 0!==this.vV&&this.vV.W$(this.xE))return void(this.X8=Fe.Pg((()=>this.Utt(t)),250));this.ztt!==t.readyState&&(this.ztt=t.readyState,this.yo(t))},this.ptt=()=>{this.q8()},this.ytt=()=>{this.Tk>0&&this.yk>0&&this.yo(new hD)},this.Ntt=t=>{this.yo(new Mw(t.initDataType,t.initData||new ArrayBuffer(0)))},this.Itt=()=>{this.yo(new Tw)},this.ktt=t=>{const i=t.initData,e=i?Wa(i).buffer:new ArrayBuffer(0);this.yo(new Mw(bo,e))},this.Dtt=t=>{if(t.initData){const i=function(t){try{const i=Al(t),e=new da,s=ss(i,e,ul(i,e,!0));return Ml(hm(s,!0))}catch(t){return}}(t.initData);if(!i)return;this.yo(new Mw(vv,i))}else this.yo(new Mw(vv,new ArrayBuffer(0)))},this.Ett=t=>{const i=t.initData,e=i?Wa(i).buffer:new ArrayBuffer(0);this.yo(new Mw(bo,e))},this.a7=()=>{this.d7()},this.u7=t=>{this.w7(t)},this.Qtt=t=>{this.yo(t),t.type===Zi.Yy&&this.eG(la(t.errorObject))},this.vN=t,this.KA=i,this.Xu=e,this.FG=s,this.H8=new ER(this),this.H8.yn(E.wx,this.Utt),this.H8.C8(new Gj(this)),this.l7=new Xj(this),this.l7.yn(E.oP,this.att),this.E$=new IR(this),this.E$.yn(jr,this.Qtt),this.Ul=new Cc,this.R7=new Cc,this.ctt=new YE([this.Ul,this.R7]),this.utt=new wR(this,this.ctt),this.C7=new YE([this.ctt,this.utt.Z]),this.j7=new xr(this),this.stt(),this.XV()}};var zR=.01;function BR(t,i,e){if(void 0===e&&(e=0),!i.V)return 0;let s=i.gP(t);const n=zR*e;return s===i.Cn(0)?s+=n:s===i.jn(i.V-1)&&(s-=n),s}function UR(t,i){for(let e of t.Ix)if(e.sB===i)return e}function QR(t){return!!t.cues&&t.cues.length>0}r();var FR={t$:void 0,i$:void 0,e$:void 0,s$:void 0,n$:void 0,r$:void 0,o$:void 0,h$:void 0,a$:void 0,u$:void 0},YR=class extends tu{get ga(){return this.Za||(this.Za=dC(this)),this.Za}get t$(){}get i$(){}get e$(){}get s$(){}get n$(){}get r$(){}get Ftt(){}get o$(){}get h$(){}get a$(){}get u$(){}constructor(...t){super(...t),this.Za=void 0}},VR=class extends PR{jk(){}get yk(){return 0}get Tk(){return 0}constructor(t,i,e){super(t,i,e,new YR)}};r(),r();var Xn=class{get we(){return this.Ytt}be(){this.Ytt.style.display="none"}ge(){this.Ytt.style.display="block"}Rtt(t){t.appendChild(this.Ytt)}gn(){dn(this.Ytt)}constructor(t=5){let i=gi.document.createElement("div");i.className="theoplayer-texttracks",i.style.position="absolute",i.style.display="none",i.style.overflow="hidden",i.style.pointerEvents="none",i.style.left="0",i.style.right="0",i.style.top="0",i.style.bottom="0",i.style.width="100%",i.style.height="100%",i.style.lineHeight="1.3em",i.style.zIndex=""+t,this.Ytt=i,this.ge()}};function GR(t,i){return Ei({},i,mM(function(t){return{t$:t.t$,i$:t.i$,e$:t.e$,s$:t.s$,n$:t.n$,r$:t.r$,o$:t.o$,h$:t.h$,a$:t.a$,u$:t.u$}}(t)))}function WR(t){return t.e$&&rl(t.e$,"%")?Number(t.e$.replace("%",""))/100:t.e$&&rl(t.e$,"em")?Number(t.e$.replace("em","")):1}r(),r(),r(),r(),r();var ZR=class t{get Vtt(){return this.Gtt+this.ji}set Vtt(t){this.Gtt=t-this.ji}get Wtt(){return this.Ztt+this.Ti}set Wtt(t){this.Ztt=t-this.Ti}Htt(t){return this.Gtt<t.Vtt&&this.Vtt>t.Gtt&&this.Ztt<t.Wtt&&this.Wtt>t.Ztt}Jz(t){return this.Gtt<=t.Gtt&&t.Vtt<=this.Vtt&&this.Ztt<=t.Ztt&&t.Wtt<=this.Wtt}Zb(){return new t(this.Gtt,this.Ztt,this.ji,this.Ti)}Xtt(i){const e=this.Gtt+i,s=this.Ztt+i,n=x.max(0,this.ji-2*i),r=x.max(0,this.Ti-2*i);return new t(e,s,n,r)}qtt(i){const e=x.min(this.Gtt,i.Gtt),s=x.max(this.Vtt,i.Vtt),n=x.min(this.Ztt,i.Ztt),r=x.max(this.Wtt,i.Wtt);return new t(e,n,s-e,r-n)}constructor(t,i,e,s){this.Gtt=t,this.Ztt=i,this.ji=e,this.Ti=s}},HR=class{Ktt(t){const i=this.Jtt(t);if(!i)return!1;for(const t of i)dn(t);return this.$tt(t),!0}get Ht(){return this.bB}get gV(){return this.vN}get Uu(){return this.Xu}get tit(){return this.iit}get eit(){return this.sit}FK(){this.nit(),this.bB.L.Ix.forEach((t=>this.RQ(t))),this.Uu.yn(Th.pn,this.rit),this.re(this.Uu.Su,this.Uu.Tu)}oit(t){this.sit=t,this.iit=GR(this.sit,this.hit),this.iit.t$&&(this.gV.style.fontFamily=this.iit.t$),this.re(this.Uu.Su,this.Uu.Tu),this.ait(!0)}uit(){return this.iit}cit(t){return this.dit.has(t.Gx)}nit(){this.bB.yn(yo.Jk,this.fit),this.bB.yn(yo.tx,this.git),this.bB.yn(yo.aa,this._it)}vit(){this.bB.fn(yo.Jk,this.fit),this.bB.fn(yo.tx,this.git),this.bB.fn(yo.aa,this._it)}wit(t){t.yn(oa.kz,this.mit),t.yn(oa.xz,this.pit),t.yn(oa.bx,this.Ait)}yit(t){t.fn(oa.kz,this.mit),t.fn(oa.xz,this.pit),t.fn(oa.bx,this.Ait)}RQ(t){this.wit(t),t.Yh&&this.Mit(t)}SQ(t){this.yit(t),this.Tit(t)}Sit(){this.bB.UI===lc.Jn?this.Nit():this.Iit()}Nit(){if(!this.Dit)return;this.Dit=!1;const t=this.Uu.Su,i=this.Uu.Tu;this.re(t,i),this.ait(!1)}Iit(){this.Dit||(this.Dit=!0,this.ait(!0))}Mit(t){this.Dit||t.Yh&&!this.cit(t)&&this.ait(!1)}Tit(t){this.cit(t)&&this.ait(!0)}Eit(t){(t.Yh||this.cit(t))&&this.ait(!0)}ait(t){const i=this.kit,e=this.Dit?[]:this.bB.q.Ix.slice();this.xit(e,i,t),this.kit=e}Jtt(t){return this.dit.get(t.Gx)}Lit(t,i){this.dit.set(t.Gx,i)}$tt(t){this.dit.delete(t.Gx)}Cit(t){const i=[],e=this.iit;if(void 0!==e.o$){const s=t.Zb();s.Ti=e.o$,i.push(s)}if(void 0!==e.h$){const s=t.Zb();s.Ti=e.h$,s.Wtt=t.Wtt,i.push(s)}return i}jit(){return this.kit.slice()}gn(){dn(this.gV),this.dit.clear(),this.vit(),this.bB.L.Ix.forEach((t=>this.yit(t))),this.Uu.fn(Th.pn,this.rit)}constructor(t,i,e,s,n){this.dit=pc(),this.Dit=!0,this.sit=Ei({},FR),this.kit=[],this.fit=t=>this.RQ(t.uB),this.git=t=>this.SQ(t.uB),this._it=()=>this.Sit(),this.mit=t=>this.Mit(t.uB),this.pit=t=>this.Tit(t.uB),this.Ait=t=>this.Eit(t.uB),this.rit=t=>this.re(t.width,t.height),this.bB=t,this.hit=this.iit=n,this.vN=this.Oit(e),this.Xu=s,i.appendChild(this.vN)}};function XR(t,i,e,s,n){let r=t.Zb(),o=r,h=1,a=!1;const u=S(getComputedStyle(i).lineHeight)/4;if(!j(u)&&u>0){for(let i=0;i<e.length&&!a;i++){for(;!JR(t,s,e[i],.01)&&(!s.Jz(t)||qR(t,n));)KR(t,e[i],u);if(s.Jz(t)){o=t.Zb(),a=!0;break}let c=$R(t,s);h>c&&(o=t.Zb(),h=c),t=r.Zb()}s.Jz(t)||(o=r.Zb())}i.style.left=(o.Gtt-s.Gtt)/s.ji*100+"%",i.style.top=(o.Ztt-s.Ztt)/s.Ti*100+"%"}function qR(t,i){return i.some((i=>t.Htt(i)))}function Cr(t){return new ZR(t.left,t.top,t.width,t.height)}var Nt=function(t){return t[t.POS_X=0]="POS_X",t[t.NEG_X=1]="NEG_X",t[t.POS_Y=2]="POS_Y",t[t.NEG_Y=3]="NEG_Y",t}({});function KR(t,i,e){switch(i){case 0:t.Gtt+=e;break;case 1:t.Gtt-=e;break;case 2:t.Ztt+=e;break;case 3:t.Ztt-=e}}function JR(t,i,e,s){switch(e){case 0:return t.Vtt>i.Vtt+s;case 1:return t.Gtt<i.Gtt-s;case 2:return t.Wtt>i.Wtt+s;case 3:return t.Ztt<i.Ztt-s}}function $R(t,i){return x.max(0,x.min(t.Vtt,i.Vtt)-x.max(t.Gtt,i.Gtt))*x.max(0,x.min(t.Wtt,i.Wtt)-x.max(t.Ztt,i.Ztt))/(t.ji*t.Ti)}r();var tP=function(t){return t.Gc='"Courier New", Courier, "Nimbus Mono L", "Cutive Mono", monospace',t.Xc='"Times New Roman", Times, Georgia, Cambria, "PT Serif Caption", serif',t.Jc='"Deja Vu Sans Mono", "Lucida Console", Monaco, Consolas, "PT Mono", monospace',t.Qc='Arial, Helvetica, Verdana, "PT Sans Caption", sans-serif',t}({});function iP(t,i){return t?{Rit:t.Rit,Pit:t.Pit,zit:t.zit,El:i}:null}function eP(t){const i=t?t.match(/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i):null;return i?{Rit:C(i[1],16),Pit:C(i[2],16),zit:C(i[3],16)}:null}function sP(t){return("0"+t.toString(16)).slice(-2)}function nP(t){return"#"+sP(t.Rit)+sP(t.Pit)+sP(t.zit)}function rP(t){const i=t?t.match(/^rgba\(([0-9]+),\s*([0-9]+),\s*([0-9]+),\s*([0-9.]+)\)$/i):null;return i?{Rit:C(i[1],10),Pit:C(i[2],10),zit:C(i[3],10),El:S(i[4])}:null}function oP(t,i){return function(t){return t?"rgba("+t.Rit+", "+t.Pit+", "+t.zit+", "+t.El+")":void 0}(iP(eP(t),i/100))}var ro=function(t){return t.BLACK="#000000",t.WHITE="#FFFFFF",t.GREEN="#00ff00",t.BLUE="#0000ff",t.CYAN="#00ffff",t.RED="#ff0000",t.YELLOW="#ffff00",t.MAGENTA="#ff00ff",t.TRANSPARENT="transparent",t}({});function hP(t){return aP[t||"none"]}var aP={none:"",dropshadow:"#222 2px 2px 3px, #222 2px 2px 4px, #222 2px 2px 5px",raised:"#222 1px 1px, #222 2px 2px, #222 3px 3px",depressed:"#ccc 1px 1px, #ccc 0px 1px, #222 -1px -1px, #222 0px -1px",uniform:"#222 -1px -1px 0, #222 1px -1px 0, #222 -1px 1px 0, #222 1px 1px 0"},uP="monospace, sans-serif",cP="Arial, Helvetica, sans-serif",lP='"Times New Roman", Times, serif',dP=av({monospace:"monospace",sansSerif:cP,serif:lP,monospaceSansSerif:uP,monospaceSerif:"monospace, serif",proportionalSansSerif:cP,proportionalSerif:lP,default:uP}),fP=16,gP="1.3em",_P=class extends HR{Oit(t){let i=h.createElement("div");i.className="theoplayer-ttml-texttrack-"+t;const e=i.style;return e.position="absolute",Yd(e,"flex"),e.flexDirection=e.webkitFlexDirection="column",e.overflow="hidden",e.pointerEvents="none",e.top="0",e.left="0",e.width="100%",e.height="100%",e.fontSize=fP+"px",e.lineHeight=gP,i}re(t,i){const e=x.min(t/640,i/360),s=fP*e*WR(this.tit);this.gV.style.fontSize=s+"px"}xit(t,i,e){for(const t of i)!e&&t.Yh||this.Ktt(t);let s=[];const n=Cr(this.gV.getBoundingClientRect());s.push(...this.Cit(n));for(const i of t){const t=this.Bit(i,s,n);for(const i of t)s.push(i.Xtt(.1))}}Bit(t,i,e){let s=this.Jtt(t);s||(s=this.Uit(t),this.Lit(t,s));for(const t of s)this.gV.appendChild(t);const n=[],r=[Nt.POS_Y,Nt.NEG_Y,Nt.POS_X,Nt.NEG_X];for(const t of s){XR(DP(t),t,r,e,i),n.push(DP(t))}return n}Uit(t){let i=[];const e=t.dQ,s=t.oQ,n=t._Q,r=t.U,o=t.cQ,a=o?x.min(640/o.width,360/o.height):1,u=this.tit;if(0===_.keys(s).length){const t=h.createElement("div");NP(t),vP(r,e,n,t,t,a,u),wP(t,"body",u),t.firstChild&&i.push(t)}else for(let t of _.keys(s)){let o=h.createElement("div");o.id=t,NP(o),AP(o,"region",s[t],e,a),vP(r,e,n,o,o,a,u),wP(o,"body",u),o.firstChild&&i.push(o)}return i}oit(t){return _C(this.gV,t),super.oit(t)}constructor(t,i,e,s){super(t,i,e,s,FR)}};function vP(t,i,e,s,n,r,o){if(rr(t)&&function(t){const i=t.jD.toUpperCase();return"SPAN"===i||"P"===i||"BR"===i||"DIV"===i||"BODY"===i}(t)){let a=mP(t);if(!a||(null==n?void 0:n.id)===a){let a;if("BODY"===t.jD.toUpperCase())a=n;else{if(a=function(t){let i;switch(t.jD.toUpperCase()){case"BR":i=h.createElement("br");break;case"SPAN":i=h.createElement("span"),IP(i),pP(i,t);break;case"P":i=h.createElement("p"),function(t){IP(t);const i=t.style;i.textAlign="inherit",i.padding="0",i.margin="0"}(i),pP(i,t);break;case"DIV":i=h.createElement("div"),pP(i,t)}return i}(t),!a)return;s.appendChild(a)}!function(t,i,e,s,n){let r=i.KD("style");MP(t,i.jD,r,e,s,n),function(t,i,e,s){for(const n of i.XD)TP(t,i.jD,n.jD,n.zD,e,s)}(t,i,s,n)}(a,t,i,n,r),function(t,i,e){let s=null==i?void 0:i.KD("smpte:backgroundImage");if(s){s=s.replace("#","");let n=e&&yP(e,(t=>t.XD.some((t=>"id"===t.jD&&t.zD===s))));n&&bP(t,n,i,!0)}!function(t,i){const e=i.m[0];if(!e||"metadata"!==e.jD.toLowerCase())return;const s=e.m[0];bP(t,s,i)}(t,i)}(a,t,e),wP(a,t.jD,o);for(const s of t.QD)vP(s,i,e,a,n,r,o)}}else if(Wb(t)){const i=h.createTextNode(t.rI);if("SPAN"!==s.nodeName.toUpperCase()){const t=h.createElement("span");IP(t),wP(t,"span",o),t.appendChild(i),s.appendChild(t)}else s.appendChild(i)}}function wP(t,i,e){const s=t.style;switch(e.t$&&(s.fontFamily=e.t$),e.i$&&(s.color=e.i$),i.toLowerCase()){case"span":e.s$&&(s.background=e.s$);break;case"p":case"div":e.n$&&(s.backgroundColor=e.n$);break;case"body":e.r$&&(s.textShadow=hP(e.r$))}}function mP(t){const i=t.KD("region");if("p"===t.jD.toLowerCase())return i;const e=[];for(const i of t.m)e.push(mP(i));return hw(e),0===e.length?i:1===e.length?null!=(s=e[0])?s:i:void 0;var s}function pP(t,i){let e=i.JD(pI,"id");e&&(t.id=e)}function AP(t,i,e,s,n){MP(t,i,e.style,s,t,n);for(const s of _.keys(e))TP(t,i,s,e[s],t,n)}function yP(t,i){if(i(t))return t;for(let e of t.m){const t=yP(e,i);if(t)return t}return null}function bP(t,i,e,s){void 0===s&&(s=!1),s&&(t.style.width=t.style.height="100%");const n=h.createElement("img");n.src=function(t){const i=t&&t.QD.length>0?t.QD[0]:null;return i&&Wb(i)?"data:image/png;base64,"+i.rI:""}(i),n.id=t.id,n.style.height="100%",n.style.maxWidth="100%",function(t,i){const e=t.style;Yd(e,"flex"),e.flexDirection=e.webkitFlexDirection="column";let s=i.KD("smpte:backgroundImageVertical"),n="center";if(s)switch(s.toLowerCase()){case"left":n="flex-start";break;case"center":n="center";break;case"right":n="flex-end";break;case"inherit":n="inherit"}e.justifyContent=e.webkitJustifyContent=n;let r=i.KD("smpte:backgroundImageHorizontal"),o="center";if(r)switch(r.toLowerCase()){case"left":o="flex-start";break;case"center":o="center";break;case"right":o="flex-end";break;case"inherit":o="inherit"}e.alignItems=e.webkitAlignItems=o}(t,e),t.appendChild(n)}function MP(t,i,e,s,n,r){if(e)for(const o of e.split(" "))if(s[o])for(const e of _.keys(s[o]))"style"===e.toLowerCase()?MP(t,i,s[o][e],s,n,r):TP(t,i,e,s[o][e],n,r)}function TP(t,i,e,s,n,r){const o=t.style;switch(e){case"backgroundColor":o.backgroundColor=s;break;case"color":o.color=s;break;case"direction":o.direction=s;break;case"display":"none"===s&&(o.display="none");break;case"fontFamily":var h;o.fontFamily=null!=(h=dP.get(s))?h:s;break;case"fontSize":{let t=s;if(rl(t,"px")){const i=Number(t.slice(0,-2));t=i*r/fP+"em"}else rl(t,"c")&&(t=t.replace("c","em"));o.fontSize=t,o.lineHeight&&"inherit"!==o.lineHeight||(o.lineHeight=gP);break}case"fontStyle":o.fontStyle=s;break;case"fontWeight":o.fontWeight=s;break;case"lineHeight":{let t=s;if(rl(t,"px")){const i=Number(t.slice(0,-2));t=i*r+"px"}o.lineHeight=t;break}case"opacity":o.opacity=s;break;case"overflow":o.overflow=s;break;case"padding":o.padding=s;break;case"textAlign":o.textAlign=s;break;case"textDecoration":switch(s){case"lineThrough":o.textDecoration="line-through";break;case"underline":case"overline":o.textDecoration=s;break;case"noUnderline":case"noLineThrough":case"noOverline":o.textDecoration="none"}break;case"unicodeBidi":switch(s){case"bidiOverride":o.unicodeBidi="bidi-override";break;case"normal":case"embed":case"isolate":o.unicodeBidi=s}break;case"visibility":o.visibility=s;break;case"zIndex":o.zIndex=s;break;case"displayAlign":{let t;switch(s.toLowerCase()){case"before":t="flex-start";break;case"center":t="center";break;case"after":t="flex-end";break;case"justify":t="space-between";break;default:return}o.justifyContent=o.webkitJustifyContent=t;break}case"extent":{const e=SP(i.toLowerCase())?n:t;let r,o,h=s.split(" ",2);2===h.length?(r=h[0],o=h[1]):r=o="100%",e&&(e.style.height=o,e.style.width=r);break}case"origin":{const e=SP(i.toLowerCase())?n:t,[r,o]=s.split(" ",2);e&&(r||o)&&(r&&(e.style.left=r),o&&(e.style.top=o));break}case"showBackground":case"textOutline":break;case"wrapOption":switch(s){case"wrap":o.whiteSpace="normal";break;case"noWrap":o.whiteSpace="nowrap"}break;case"writingMode":{let t,i,e,n;switch(s){case"lrtb":case"lr":t="horizontal-tb";break;case"rltb":t="horizontal-tb",i="rtl",n="bidi-override";break;case"tbrl":case"tb":t="vertical-rl",e="upright";break;case"tblr":t="vertical-lr",e="upright";break;case"rl":t="horizontal-tb",i="rtl";break;default:return}o.writingMode=t,o.setProperty("-webkit-writing-mode",t),i&&(o.direction=i),e&&(o.textOrientation=e,o.setProperty("-webkit-text-orientation",e)),n&&(o.unicodeBidi=n);break}case"linePadding":if(rl(s,"c")){let t=s.replace("c","em");o.paddingLeft=o.paddingRight=t}break;case"multiRowAlign":"auto"===s.toLowerCase()?o.textAlign="":o.textAlign=s}}function SP(t){return"div"===t||"p"===t||"span"===t}function NP(t){const i=t.style;Yd(i,"flex"),i.flexDirection=i.webkitFlexDirection="column",i.top="auto",i.left="5%",i.width="90%",i.height="100%",i.maxHeight="100%",i.maxWidth="100%",i.overflow="visible",i.position="absolute",i.fontFamily=cP,i.color=ro.WHITE,i.background=ro.TRANSPARENT,i.textShadow=hP("uniform"),i.textAlign="start",i.writingMode="horizontal-tb",i.setProperty("-webkit-writing-mode","horizontal-tb"),i.padding="0",i.margin="0",i.fontSize="inherit",i.lineHeight="inherit"}function IP(t){const i=t.style;i.fontFamily="inherit",i.color="inherit",i.fontSize="inherit",i.lineHeight="inherit",i.textShadow="inherit"}function DP(t){let i=Cr(t.getBoundingClientRect());if("visible"===getComputedStyle(t).overflow&&t.scrollHeight>t.clientHeight){const e=t.children;for(let t=0;t<e.length;t++){const s=e[t];i=i.qtt(Cr(s.getBoundingClientRect()))}}return i}r(),r();var EP=void 0;function kP(t){return EP||(EP=gi.document.createElement("textarea")),EP.innerHTML=t,EP.value}function xP(t,i){let e="Data",s="",n=[],r=t.charAt(i.tc),o="",h={YA:"starttag",GD:"",Qit:[]};for(;i.tc<t.length+1;){switch(r=i.tc<t.length?t.charAt(i.tc):"EOF",e){case"Data":switch(r){case"&":let n=t.substring(i.tc).match(/&#?[0-9a-zA-Z]+;/);n?(s+=kP(n[0]),i.Gb(n[0].length-1)):s+="&";break;case"<":if(s)return{YA:"string",U:s};e="Tag";break;case"EOF":return{YA:"string",U:s};default:s+=r}break;case"Tag":switch(r){case"\t":case"\n":case"\f":case" ":e="StartTagAnnotation";break;case".":e="StartTagClass";break;case"/":e="EndTag";break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":s=r,e="TimestampTag";break;case">":return i.Gb(1),h;case"EOF":return h;default:s=r,e="StartTag"}break;case"StartTag":switch(r){case"\t":case"\f":case" ":e="StartTagAnnotation";break;case"\n":o=r,e="StartTagAnnotation";break;case".":e="StartTagClass";break;case">":return i.Gb(1),{YA:"starttag",GD:s,Qit:[]};case"EOF":return{YA:"starttag",GD:s,Qit:[]};default:s+=r}break;case"StartTagClass":switch(r){case"\t":case"\f":case" ":n.push(o),o="",e="StartTagAnnotation";break;case"\n":n.push(o),o=r,e="StartTagAnnotation";break;case".":n.push(o),o="";break;case">":return i.Gb(1),n.push(o),{YA:"starttag",GD:s,Qit:n};case"EOF":return n.push(o),{YA:"starttag",GD:s,Qit:n};default:o+=r}break;case"StartTagAnnotation":switch(r){case"&":e="CharRefInAnnotation";break;case">":i.Gb(1);let t=o.trim();return t=t.replace(/\s/," "),{YA:"starttag",GD:s,Qit:n,Fit:t};default:o+=r}break;case"CharRefInAnnotation":let a="";for(let e=i.tc;">"===t.charAt(e);e++)a+=t.charAt(e);o+=a||"&",e="StartTagAnnotation";break;case"EndTag":switch(r){case">":return i.Gb(1),{YA:"endtag",GD:s};case"EOF":return{YA:"endtag",GD:s};default:s+=r}break;case"TimestampTag":switch(r){case">":return i.Gb(1),{YA:"timestamp",Yit:s};case"EOF":return{YA:"timestamp",Yit:s};default:s+=r}}i.Gb(1)}return h}var LP=function(t){return t.Vit="string",t.Git="starttag",t.Wit="endtag",t.Zit="timestamp",t}({});function CP(t){let i;if(t.getBoundingClientRect&&t.parentNode&&(i=t.getBoundingClientRect()),!i)return{left:0,top:0};const e=h.documentElement,n=h.body,r=e.clientLeft||n.clientLeft||0,o=s.pageXOffset||n.scrollLeft,a=i.left+o-r,u=e.clientTop||n.clientTop||0,c=s.pageYOffset||n.scrollTop,l=i.top+c-u;return{left:x.round(a),top:x.round(l)}}function jP(t,i,e,s){if(void 0===s&&(s=0),!t||!i)return;t.style.left="0px";let n=t.getClientRects(),r=i.getClientRects();if(0===n.length||0===r.length)return;let o=n[0],h=r[0],a=o.width/2+o.left;OP(t,h.width/2+h.left-a,e,s)}function OP(t,i,e,s){void 0===s&&(s=0),PP(t,i,"left","right",e,s)}function RP(t,i,e,s){void 0===s&&(s=0),PP(t,i,"top","bottom",e,s)}function PP(t,i,e,s,n,r){void 0===r&&(r=0);const o=t.getClientRects();if(n&&o.length>0){const t=o[0];i=ur(i,n[e]+r-t[e],n[s]-r-t[s])}t.style[e]=i+"px"}function Vu(t,i){void 0===t.textContent?t.innerText=i:t.textContent=i}r();var zP={i$:ro.WHITE,t$:"sans-serif",e$:"100%",s$:"rgba(0,0,0,0.8)",n$:ro.TRANSPARENT,r$:"none",o$:void 0,h$:void 0,a$:void 0,u$:void 0},BP="theoplayer-webvtt-region-",UP="theoplayer-webvtt-styling-",QP="theoplayer-webvtt-default-style",FP=5.23,YP=1.14,VP=class extends HR{Oit(t){let i=h.createElement("div");i.className="theoplayer-webvtt-texttrack-"+t,pn(i),i.style.overflow="hidden",i.style.pointerEvents="none";const e=this.tit.t$;return e&&(i.style.fontFamily=e),i.style.whiteSpace="pre-line",function(){if(h.getElementById(QP))return;const t=[];for(const[i,e]of $P)t.push("."+UP+i+" { color: "+e+" !important; }"),t.push("."+UP+"Hit"+i+" { background-color: "+e+" !important; }"),t.push("video::cue(."+i+") { color: "+e+"; }"),t.push("Xit"+i+") { background-color: "+e+"; }");const i=h.createElement("style");i.id=QP,i.innerHTML=t.join("\n"),h.body.appendChild(i)}(),i}FK(){this.gV.appendChild(this.qit),super.FK()}re(t,i){const e=x.min(t/100,i/100),s=WR(this.tit);this.Kit.forEach((t=>{let{wB:i,Jit:n}=t;this.$it(n,e,s,i)})),this.$it(this.qit,e,s)}oit(t){_C(this.gV,t),super.oit(t)}xit(t,i,e){const s=this.gV,n=this.Uu.Tu/100;let r=[];for(const i of t)void 0!==i.wB&&(Qa(r,i.wB)||r.push(i.wB));this.Kit.forEach(((t,i)=>{let{wB:s,Jit:n}=t;!e&&Qa(r,s)||(dn(n),this.Kit.delete(i))}));for(const t of i)!e&&t.Yh||this.Ktt(t);let o=[];const h=Cr(this.qit.getBoundingClientRect());o.push(...this.Cit(h));for(const t of r){let i;this.Kit.has(t.o)?i=this.Kit.get(t.o).Jit:(i=KP(t,n),s.appendChild(i),this.Kit.set(t.o,{wB:t,Jit:i})),o.push(Cr(i.getBoundingClientRect()))}t.sort(tz);for(const i of t){const t=this.Bit(i,o,h);void 0!==t&&o.push(t.Xtt(.1))}}Bit(t,i,e){var s;let n;t.wB?(n=this.Kit.get(t.wB.o).Jit,"up"===t.wB.OB&&n.children.length>=1&&(n.style.transitionProperty="top",n.style.transitionDuration="0.433s")):n=this.qit;let r=null==(s=this.Jtt(t))?void 0:s[0];if(r||(r=this.tet(t),this.Lit(t,[r])),n.appendChild(r),t.wB||(GP(r,t),t.mB?function(t,i,e,s){const n=JP(t),r=n?e.Ti:e.ji;let o=S(getComputedStyle(i).lineHeight);if(0===o||j(o))return;let h=Cr(i.getBoundingClientRect()),a=x.round(gN(t));"rl"===t.Pt&&(a=-(a+1));let u=o*a;"rl"===t.Pt&&(u=u-h.ji+o);a<0&&(u+=r,o=-o);n?h.Ztt+=u:h.Gtt+=u;const c=h.Zb();let l=!1;for(;!e.Jz(h)||qR(h,s);)if(n)if(o<0&&h.Ztt<e.Ztt||o>0&&h.Wtt>e.Wtt){if(h.Ztt=c.Ztt,l)break;o=-o,l=!0}else h.Ztt+=o;else if(o<0&&h.Gtt<e.Gtt||o>0&&h.Vtt>e.Vtt){if(h.Gtt=c.Gtt,l)break;o=-o,l=!0}else h.Gtt+=o;n?i.style.top=(h.Ztt-e.Ztt)/e.Ti*100+"%":i.style.left=(h.Gtt-e.Gtt)/e.ji*100+"%"}(t,r,e,i):function(t,i,e,s){let n,r=Cr(i.getBoundingClientRect());if(0===r.ji||0===r.Ti)return;JP(t)?"center"===t._B?r.Ztt-=r.Ti/2:"end"===t._B&&(r.Ztt-=r.Ti):"center"===t._B?r.Gtt-=r.ji/2:"end"===t._B&&(r.Gtt-=r.ji);n=""===t.Pt?[Nt.POS_Y,Nt.NEG_Y,Nt.POS_X,Nt.NEG_X]:"lr"===t.Pt?[Nt.POS_X,Nt.NEG_X,Nt.POS_Y,Nt.NEG_Y]:[Nt.NEG_X,Nt.POS_X,Nt.POS_Y,Nt.NEG_Y];XR(r,i,n,e,s)}(t,r,e,i)),!t.wB)return Cr(r.getBoundingClientRect())}tet(t){let i=new da,e=t.U,s=this.iet(t),n={eet:void 0,we:s},r=n,o="",a="",u=[n],c=[],l=[];for(;i.tc<e.length;){let t=xP(e,i);if(t.YA===LP.Vit){const i=h.createElement("span");Vu(i,t.U),WP(i,u),""!==o&&(i.lang=o),this.net(i,a),r.we.appendChild(i)}else if(t.YA===LP.Git){const i=t.GD.toLowerCase();switch(i){case"i":case"b":case"u":case"ruby":{let e=h.createElement(i);r.we.appendChild(e),r={eet:t,we:e},u.push(r);break}case"rt":var d;if("ruby"===(null==(d=r.eet)?void 0:d.GD.toLowerCase())){let i=h.createElement("rt");r.we.appendChild(i),r={eet:t,we:i},u.push(r)}break;case"c":case"v":r={eet:t,we:r.we},u.push(r);break;case"font":{var f;const i=null==(f=t.Fit)?void 0:f.match(/(?:^| )color=["']([^"']+)/i);i&&(a=i[1],l.push(a),r={eet:t,we:r.we},u.push(r));break}case"lang":var g;o=null!=(g=t.Fit)?g:"",c.push(o)}}else if(t.YA===LP.Wit){var _;const i=t.GD.toLowerCase(),e=null==(_=r.eet)?void 0:_.GD.toLowerCase();e===i?(u.pop(),r=u[u.length-1],"font"===i&&(l.pop(),a=l.length>0?l[l.length-1]:"")):"rt"===e&&"ruby"===i?(u.pop(),u.pop(),r=u[u.length-1]):"lang"===i&&(c.pop(),o=c.length>0?c[c.length-1]:"")}else if(t.YA===LP.Zit){let i=t.Yit,e=new da;try{JN(i,e)}catch(t){Gr("ERROR collecting timestamp",t)}}}return s}net(t,i){const e=this.tit,s=this.eit;e.s$&&(t.style.background=e.s$);const n=s.i$||i||e.i$;n&&(t.style.color=n)}$it(t,i,e,s){if(s){let n=ZP(s,i);t.style.height=n*e+"px",t.style.left=HP(s)+"%",t.style.top=XP(s,i)+"px"}t.style.fontSize=FP*i*e+"px"}iet(t){const i=h.createElement("div");i.style.position="absolute",i.style.margin="0",i.style.padding="0",i.style.unicodeBidi="plaintext",i.style.wordWrap="break-word",i.style.overflowWrap="break-word",i.style.width="auto",i.style.textAlign=t.fB,function(t,i){"rl"===i.Pt?t.style.writingMode="vertical-rl":"lr"===i.Pt?t.style.writingMode="vertical-lr":t.style.writingMode="horizontal-tb"}(i,t),function(t,i){let e=wN(i);JP(i)?(t.style.width=e+"%",t.style.height="auto"):(t.style.height=e+"%",t.style.width="auto")}(i,t),GP(i,t);const e=this.tit.n$;e&&(i.style.background=e);const s=this.tit.i$;return s&&(i.style.color=s),i.style.textShadow=hP(this.tit.r$),i}constructor(t,i,e,s){super(t,i,e,s,zP),this.Kit=ll(),this.qit=qP(3)}};function GP(t,i){let e,s,n=vN(i),r=_N(i),o=wN(i);if(JP(i)){switch(n){case"line-left":e=r;break;case"center":e=r-o/2;break;case"line-right":e=r-o}s=i.mB?0:gN(i)}else{switch(n){case"line-left":s=r;break;case"center":s=r-o/2;break;case"line-right":s=r-o}e=i.mB?0:gN(i)}t.style.left=e+"%",t.style.top=s+"%"}function WP(t,i){for(const e of i)if(e.eet){for(const i of e.eet.Qit)Ea(t,UP+i);"v"===e.eet.GD.toLowerCase()&&e.eet.Fit&&Ea(t,"theoplayer-webvtt-voice-"+e.eet.Fit)}}function ZP(t,i){return t.LB*(FP*i)*YP}function HP(t){return t.RB-t.CB*t.ji/100}function XP(t,i){let e=t.PB,s=t.jB*ZP(t,i)/100;return x.max(0,e-s)}function qP(t){let i=h.createElement("div");return i.className=BP+"default",pn(i),i.style.wordWrap="break-word",i.style.writingMode="horizontal-tb",i.style.pointerEvents="none",i.style.width="auto",i.style.height="auto",i.style.maxHeight="100%",i.style.minHeight="0px",i.style.padding="0",i.style.boxSizing="border-box",i.style.fontSize=FP*t+"px",i.style.lineHeight=YP+"em",i}function KP(t,i){let e=qP(i);e.className=BP+t.o;let s=t.ji,n=ZP(t,i);return e.style.width=s+"%",e.style.height=n+"px",e.style.left=HP(t)+"%",e.style.right="",e.style.top=XP(t,i)+"px",e.style.bottom="",e.style.boxSizing="border-box",e}function JP(t){return""===t.Pt}var $P=[["white","#fff"],["lime","#0f0"],["cyan","#0ff"],["red","#f00"],["yellow","#ff0"],["magenta","#f0f"],["blue","#00f"],["black","#000"]];function tz(t,i){const e=gN(t),s=gN(i),n=iz(e,t.mB),r=iz(s,i.mB);return n&&r?e-s||me(i,t)||i.Gx-t.Gx:me(t,i)||t.Gx-i.Gx}function iz(t,i){return i?t<0?t>-8:t>8:t>50}r(),r(),r();var ez=function(t){return t.FONT_REGULAR="regular",t.FONT_UNDERLINE="underline",t.FONT_ITALICS="italics",t.FONT_UNDERLINE_ITALICS="underline-italics",t}({}),sz={i$:ro.WHITE,t$:tP.Jc,e$:"100%",s$:ro.BLACK,n$:"transparent",r$:"none",ret:"regular",o$:void 0,h$:void 0,a$:void 0,u$:void 0},nz=[{oet:ro.WHITE,ret:"regular",het:0},{oet:ro.WHITE,ret:"underline",het:0},{oet:ro.GREEN,ret:"regular",het:0},{oet:ro.GREEN,ret:"underline",het:0},{oet:ro.BLUE,ret:"regular",het:0},{oet:ro.BLUE,ret:"underline",het:0},{oet:ro.CYAN,ret:"regular",het:0},{oet:ro.CYAN,ret:"underline",het:0},{oet:ro.RED,ret:"regular",het:0},{oet:ro.RED,ret:"underline",het:0},{oet:ro.YELLOW,ret:"regular",het:0},{oet:ro.YELLOW,ret:"underline",het:0},{oet:ro.MAGENTA,ret:"regular",het:0},{oet:ro.MAGENTA,ret:"underline",het:0},{oet:ro.WHITE,ret:"italics",het:0},{oet:ro.WHITE,ret:"underline-italics",het:0},{oet:ro.WHITE,ret:"regular",het:0},{oet:ro.WHITE,ret:"underline",het:0},{oet:ro.WHITE,ret:"regular",het:4},{oet:ro.WHITE,ret:"underline",het:4},{oet:ro.WHITE,ret:"regular",het:8},{oet:ro.WHITE,ret:"underline",het:8},{oet:ro.WHITE,ret:"regular",het:12},{oet:ro.WHITE,ret:"underline",het:12},{oet:ro.WHITE,ret:"regular",het:16},{oet:ro.WHITE,ret:"underline",het:16},{oet:ro.WHITE,ret:"regular",het:20},{oet:ro.WHITE,ret:"underline",het:20},{oet:ro.WHITE,ret:"regular",het:24},{oet:ro.WHITE,ret:"underline",het:24},{oet:ro.WHITE,ret:"regular",het:28},{oet:ro.WHITE,ret:"underline",het:28}],rz=[11,-1,1,2,3,4,12,13,14,15,5,6,7,8,9,10];function oz(t,i){return NN(t.aet,i.aet)||jl(t.mR,i.mR)}r();var mn=32,hz=/CC([1-4])=(.*)/;function az(t){if(!t)return[];const i=[],e=t.trim().split(";");if(e.every((t=>t.match(hz))))for(const t of e){const[,e,s]=t.match(hz);i.push({uet:Number(e),cet:s})}else for(let t=0;t<e.length;t++)i.push({uet:t+1,cet:e[t]});return i}var uz=class t{get let(){return this.fet.det}get _et(){return this.fet.vet}get wet(){return this.fet.vet.het-this.fet.det.het+1}get met(){return this.fet.vet.pet-this.fet.det.pet+1}pr(){return this.Aet=this.yet(),this.bet(),this.Met(),this.Aet}yet(){let t=h.createElement("div");t.style.position="absolute",t.style.margin="0",t.style.padding="0",t.style.whiteSpace="pre",t.style.width=this.wet/mn*this.Net.Tet*100+"%",t.style.height=1.2*this.met+"em",t.style.lineHeight="1.2em",t.style.letterSpacing=this.Net.Iet?"calc(1em - 1ch)":"";const i=this.iit.t$;i&&(t.style.fontFamily=i);const e=this.iit.n$;return e&&(t.style.backgroundColor=e),t}bet(){if(!this.Aet)return;let t=this.let.pet/15*100,i=this.let.het/mn*100,e=(mn-this._et.het-1)/mn*100,s=(15-this._et.pet-1)/15*100;this.Net.Det||(i=e=1,this.Aet.style.width="98%"),s<t?this.Aet.style.bottom=s*this.Net.Tet+"%":this.Aet.style.top=t*this.Net.Tet+"%",e<i?this.Aet.style.right=e+"%":this.Aet.style.left=i+"%"}Met(){const t=this.fet.Eet.sort(cz);for(let i=0;i<t.length;i++)this.ket(t[i-1],t[i]),this.xet(t[i]);this.ket(t[t.length-1],void 0)}xet(i){var e;const s=GR(this.iit,i.Let),n=t.Cet(s);Vu(n,i.jet),null==(e=this.Aet)||e.appendChild(n)}static Cet(t){const i=h.createElement("span");i.style.display="inline-block",t.ret!==ez.FONT_ITALICS&&t.ret!==ez.FONT_UNDERLINE_ITALICS||(i.style.fontStyle="italic"),t.ret!==ez.FONT_UNDERLINE&&t.ret!==ez.FONT_UNDERLINE_ITALICS||(i.style.textDecoration="underline");const e=t.i$;e&&(i.style.color=e);const s=t.s$;return s&&(i.style.backgroundColor=s),i.style.textShadow=hP(t.r$),i.style.height="1.2em",i}ket(t,i){let e=t?t.vet.pet:this.fet.det.pet;const s=i?i.det.pet:this.fet.vet.pet;let n=t?t.vet.het:this.fet.det.het;const r=i?i.det.het:this.fet.vet.het;e<s&&(!i||t&&t.det.pet!==i.det.pet?this.Oet():this.Ret(this.fet.vet.het-n),n=this.fet.det.het),n<r&&(i?this.Ret(r-n):this.Oet())}Oet(){var t;const i=h.createElement("br");null==(t=this.Aet)||t.appendChild(i)}Ret(t){var i;if(t<=0)return;const e=h.createElement("span");e.style.display="inline-block",Vu(e,jv(" ",t)),null==(i=this.Aet)||i.appendChild(e)}constructor(t,i,e){this.fet=t,this.Net=i,this.iit=e}};function cz(t,i){return function(t,i){if(t.pet!==i.pet)return t.pet-i.pet;return t.het-i.het}(t.det,i.det)}var lz=class extends HR{Oit(t){let i=h.createElement("div");return i.className="theoplayer-cea608-texttrack-"+t,i.style.position="absolute",i.style.overflow="hidden",i.style.pointerEvents="none",i.style.top="10%",i.style.bottom="10%",this.tit.t$&&(i.style.fontFamily=this.tit.t$),i}re(t,i){this.vl()}vl(){let t=WR(this.tit);this.Pet=function(t){return{Tet:t/100,Iet:t<=100,Det:t<=150}}(100*t);const i=this.zet/mn;this.Bet=i*t,this.gV.style.fontSize=this.Bet+"px"}get zet(){let t=this.gV.offsetWidth;return this.Pet&&this.Pet.Det||(t*=.8),t}xit(t,i,e){for(const t of i)!e&&t.Yh||this.Ktt(t);for(const i of t)this.Bit(i)}Bit(t){this.Pet&&this.Pet.Det?this.Uet(80):this.Uet(100),this.vl();let i=this.Jtt(t);i||(i=this.Uit(t),this.Lit(t,i));for(const t of i)this.gV.appendChild(t)}Uit(t){return t.U.map((t=>new uz(t,this.Pet,this.tit).pr()))}Uet(t){const i=(100-t)/2;this.gV.style.left=i+"%",this.gV.style.width=t+"%"}constructor(t,i,e,s){super(t,i,e,s,sz)}},Qn=class t{Qet(t){for(let i of this.Fet)if(i.Ht===t)return i}static Yet(t){switch(t.YA){case El.TTML:case El.SRT:case El.WEBVTT:case El.CEA608:return!0}return!1}Vet(t){switch(t.YA){case El.TTML:return new _P(t,this.Get,t.kh,this.Xu);case El.SRT:case El.WEBVTT:return new VP(t,this.Get,t.kh,this.Xu);case El.CEA608:return new lz(t,this.Get,t.kh,this.Xu)}}Wet(t){let i=this.Qet(t);i||(i=this.Vet(t),i&&(i.FK(),i.oit(this.FG),this.Fet.push(i),t.UI===lc.Jn&&i.Nit()))}Zet(t){let i=this.Fet;for(let e=i.length-1;e>=0;e-=1){let s=i[e];s.Ht===t&&(s.gn(),Mn(i,e))}}Het(i){YI(i.Lt)&&t.Yet(i)&&(i.fk===Ma.ERROR?this.Zet(i):this.Wet(i))}get q6(){return this.Xet.cs||this.Qo.Lz}tr(){for(let t of this.Fet)t.Ht.fn(yo.wx,this.qet),t.Ht.fn(yo.Ax,this.qet),t.gn();nt(this.Fet)}gn(){this.tr();for(let t of this.Fet)t.gn();this.Ul.fn(bs.Hk,this.Ket),this.Ul.fn(bs.qk,this.Jet),this.Ul.fn(yo.aa,this.qet),this.Xet.fn($s.aa,this.$et),this.Qo.fn([Au.kz,Au.xz],this.$et),this.FG.fn("vx",this.tst)}constructor(t,i,e,s,n,r){this.Fet=[],this.Ket=t=>{let i=t.Ht;i.yn(yo.wx,this.qet),i.yn(yo.Ax,this.qet),i instanceof oR&&(i.q6=this.q6),this.Het(i)},this.qet=t=>{let i=t.Ht;this.Het(i)},this.Jet=t=>{let i=t.Ht;i.fn(yo.wx,this.qet),i.fn(yo.Ax,this.qet),this.Zet(i)},this.$et=()=>{let t=this.q6;for(let i of this.Ul.Ix)i instanceof oR&&(i.q6=t)},this.tst=()=>{for(let t of this.Fet)t.oit(this.FG)},this.Get=t,this.Xu=i,this.Ul=e,this.Xet=n,this.Qo=r,this.FG=s,this.Ul.yn(bs.Hk,this.Ket),this.Ul.yn(bs.qk,this.Jet),this.Ul.yn(yo.aa,this.qet),this.Xet.yn($s.aa,this.$et),this.Qo.yn([Au.kz,Au.xz],this.$et),this.FG.yn("vx",this.tst),this.$et()}};r();var dz=class extends tu{get Cz(){var t;return null!=(t=this.ist.ownerDocument.pictureInPictureEnabled)&&t}get Lz(){return this.sst}async co(){if(this.Cz){if(!this.Lz){const t=this.zy([Au.kz,Au.ua]);await this.ist.requestPictureInPicture(),await t,this.sst||this.yo(new mr)}}else this.yo(new mr)}async bo(){if(this.Cz){if(this.sst){const t=this.zy([Au.xz,Au.ua]);await this.ist.ownerDocument.exitPictureInPicture(),await t,this.sst&&this.yo(new mr)}}else this.yo(new mr)}gn(){this.Bo(),this.ist.removeEventListener("enterpictureinpicture",this.nst),this.ist.removeEventListener("leavepictureinpicture",this.rst)}constructor(t){super(),this.sst=!1,this.nst=()=>{this.sst=!0,this.yo(new xS)},this.rst=()=>{this.sst=!1,this.yo(new LS)},this.ist=t,this.ist.addEventListener("enterpictureinpicture",this.nst),this.ist.addEventListener("leavepictureinpicture",this.rst)}};function fz(t){const i=new gL,e=function(t){const i=[];return dL.na(t)&&i.push(new dL(t)),fL.na(t)&&i.push(new fL(t)),i}(t);if(e.length>0){for(const t of e)i.Eq(t);i.Dq(e[0])}return i}var gz=class extends PR{get gV(){return this.vN}get yk(){return this.vN.videoHeight}get Tk(){return this.vN.videoWidth}get wa(){return this.ost}get LV(){return this.hst}jk(){return this.vN}async wy(){this.hst.gn(),this.ost.gn(),this.ast.gn(),this.ust.gn(),await super.wy()}be(){super.be(),this.ast.be()}ge(){super.ge(),this.ast.ge()}Rtt(t){super.Rtt(t),this.ast.Rtt(t)}constructor(t,i,e,s){super(t,i,e,s),this.ost=fz(t),this.hst=new dz(t),this.ast=new Xn,this.ust=new Qn(this.ast.we,this.Uu,this.nt,this.Ll,this.wa,this.LV)}};r(),ds(),r();r(),Qi(),r();var _z=function(t){return t.cst="HELLO",t.lst="HI_THERE",t.dst="INITIALIZE",t.fst="APPEND_INIT",t.gst="APPEND_DATA",t._st="ACK",t.vst="REMOVE",t.wst="DESTROY_SESSION",t}({}),vz=class{mst(t){return this.Go.Wo((async t=>{yi(t);const i=new MessageChannel,e=i.port1,s=i.port2;Kl.serviceWorker.controller||await ku(Kl.serviceWorker,"install",t),"activated"!==Kl.serviceWorker.controller.state&&await ku(Kl.serviceWorker.controller,"activate",t);const n={kind:"HELLO",port:s};Kl.serviceWorker.controller.postMessage(n,[s]),e.start(),this.oA=e;try{const i=await ku(e,"message",t),s=i.data;if("HI_THERE"!==s.kind)throw new b("Could not set up message channel");this.pN=s.sessionId}catch(t){throw Tu(t)&&this.pst(),t}}),t)}Ast(t,i){return this.oA,this.Go.Wo((async()=>{if(!this.oA)throw new b("MessageSession not set up yet or already closed.");i||(i=[]),this.oA.postMessage(t,i);const e=await ku(this.oA,"message");return e.data}))}yst(){return this.Go.Wo((()=>this.pst()))}pst(){if(!Kl.serviceWorker.controller)return;if("activated"!==Kl.serviceWorker.controller.state)return;if(!this.oA)return;const t={kind:"DESTROY_SESSION"};this.oA.postMessage(t),this.oA.close(),this.oA=void 0}constructor(){this.Go=new La}};r();var wz=class{get bst(){return this.Mst}Tst(t,i){const e=t-i;this.Mst=e>this.bst?this.Mst:e}Sst(t){this.Mst=t}constructor(){this.Mst=1/0}};r(),r(),r();var gt=function(t){return t.SI="audio",t.NI="video",t.MQ="metadata",t}({}),mz=class extends tu{get TE(){return void 0===this.Nst||void 0===this.Ist?Mo.PP():new Mo([this.Nst,this.Ist])}get md(){return{VN:this.kX}}get E3(){return Et(this.kX,"audio")?Ri.SI:Et(this.kX,"video")?Ri.NI:Ri.dI}get gX(){return this.kX}get L3(){return Mo.PP()}get PK(){return 30}set PK(t){}get QK(){return 30}set QK(t){}O3(t,i){}R3(t,i){}F$(){return this.Dst}get ca(){return this.Est}get kst(){return this.Nst}get dB(){return this.Ist}async P3(){}async s3(t,i){}async B4(t,i,e){if(t.YA!==Xi.v$)throw new b("Streaming or opaque segments are not supported yet.");const s=t.rI,n=async()=>{const t=s.buffer,e={kind:_z.gst,mediaType:pz(this.kX),segment:s,startPts:i.xst,totalDuration:i.ct};if(await this.Lst.Ast(e,[t]),void 0===this.Nst){const t=i.xst+i.rQ;this.Nst=t,this.Ist=t}this.Ist=this.Ist+i.ct,this.yo(new Jr(po.g$))};return this.Go.Wo((async t=>{yi(t);try{this.Est=!0,await n()}finally{this.Est=!1}}),e)}async F4(t,i,e){if(t.YA!==Xi.v$)throw new b("Streaming or opaque initialization segments are not supported yet.");const s=t.rI,n=async()=>{const t={kind:_z.fst,mediaType:pz(this.kX),segment:s};await this.Lst.Ast(t,[])};return this.Go.Wo((async t=>{yi(t);try{this.Est=!0,await n()}finally{this.Est=!1}}),e)}I3(){this.Dst=!0}w3(){this.Dst=!1}async wS(t,i,e){const s=async()=>{const t={kind:_z.vst,mediaType:pz(this.kX),endTime:i};await this.Lst.Ast(t),this.Nst=void 0,this.Ist=void 0,this.yo(new Jr(po.g$))};return this.Go.Wo((async t=>{yi(t);try{this.Est=!0,await s()}finally{this.Est=!1}}),e)}N$(t){return this.kX===t.VN}D$(t){return this.kX=t.VN,Promise.resolve()}async wy(){this.Bo(),await this.Go.gn()}constructor(t,i){super(),this.kX=t,this.Lst=i,this.Nst=void 0,this.Ist=void 0,this.Go=new La,this.Est=!1,this.Dst=!1}};function pz(t){return t.match(/video/)?gt.NI:gt.SI}var Az=class t{static Cst(i,e,s,n){const r=[];for(let t=0;t<i.k5.length;t++){const s=i.k5[t].VN;r.push(new mz(s,e))}return new t(i,r,s,n)}jst(){}get Ost(){return[this.b5,this.M5].filter($t)}get A5(){return this.b5}get TE(){return kj(this)}get md(){return this.KS}get ct(){return 0}get F$(){var t,i,e;const s=null==(e=null==(t=this.b5)?void 0:t.F$())||e;var n;const r=null==(n=null==(i=this.M5)?void 0:i.F$())||n;return s&&r}get _k(){return new Mo([0,1/0])}get y5(){return this.M5}async wy(){await Promise.all([this.b5,this.M5].filter($t).map((t=>t.wy())))}S5(t){}E5(t,i,e,s){}I3(){var t,i;null==(t=this.b5)||t.I3(),null==(i=this.M5)||i.I3()}w3(){var t,i;null==(t=this.b5)||t.w3(),null==(i=this.M5)||i.w3()}N$(t){return!0}D$(t){return this.KS=t,Promise.resolve()}k$(t){}async T$(t,i){const e=await this.KA.qA(t.VA,i),s=await e.kS();return await this.S$(s),s}async S$(t){if(t&&!this.vN.src)throw new lu(vt.CONTENT_PROTECTION_ERROR,"Attempted to attach MediaKeys to a sourceless MediaElement");if(!t&&this.vN.src)throw new lu(vt.CONTENT_PROTECTION_ERROR,"Attempted to remove MediaKeys from a non-empty MediaElement");const i=this.SS;i&&(await i.DS(this.vN),this.SS=void 0),t&&(await t.bn(this.vN),this.SS=t)}constructor(t,i,e,s){this.SS=void 0,this.KS=t,this.M5=dl(i,(t=>Boolean(t.gX.match(/video/)))),this.b5=dl(i,(t=>Boolean(t.gX.match(/audio/)))),this.KA=e,this.vN=s,this.jst()}};Qi();var yz=class extends tu{Rst(){this.ist.addEventListener("timeupdate",this.Pst),this.ist.addEventListener("ended",this.zst),this.ist.addEventListener("timeupdate",this.Bst),this.ist.addEventListener("ratechange",this.Ust),this.ist.addEventListener("volumechange",this.Qst),this.ist.addEventListener("durationchange",this.Fst),this.ist.addEventListener("playing",this.Yst),this.ist.addEventListener("seeking",this.Vst),this.ist.addEventListener("play",this.Gst),this.ist.addEventListener("pause",this.Wst),this.ist.addEventListener("encrypted",this.Ntt)}Zst(){this.ist.removeEventListener("timeupdate",this.Pst),this.ist.removeEventListener("ended",this.zst),this.ist.removeEventListener("timeupdate",this.Bst),this.ist.removeEventListener("ratechange",this.Ust),this.ist.removeEventListener("volumechange",this.Qst),this.ist.removeEventListener("durationchange",this.Fst),this.ist.removeEventListener("playing",this.Yst),this.ist.removeEventListener("seeking",this.Vst),this.ist.removeEventListener("play",this.Gst),this.ist.removeEventListener("pause",this.Wst)}Hst(){this.H8.yn(E.wx,this.Ds)}Xst(){this.H8.fn(E.wx,this.Ds)}get gV(){return this.ist}get J5(){return!1}get xE(){return this.ist.currentTime+this.qst.bst}get KE(){return this.ist.paused}get Nk(){return this.ist.volume}set Nk(t){this.ist.volume=t}get $E(){return this.ist.playbackRate}set $E(t){this.ist.playbackRate=t}get Kst(){return this.ist.defaultPlaybackRate}get TE(){var t,i;return null!=(i=null==(t=this.vV)?void 0:t.TE)?i:Mo.PP()}get Jst(){return Mo.xn(this.ist.buffered)}get rk(){const t=this.$st;return this.Fo.pP(t.Gb(this.qst.bst))}get $st(){return Mo.xn(this.ist.played)}get wk(){return this.kG}get G5(){return!1}get s6(){return!1}get ct(){return this.ist.duration}get WE(){return this.ist.muted}set WE(t){this.ist.muted=t}get Let(){return this.ist.style}get mz(){return Ei({},wC,{wz:!0})}Wb(t,i,e){this.m7.Ty(),this.m7=new Wt,this.p7=Vh(this.A7(t,this.p7,this.m7.ly),this.m7).catch(ya)}async A7(t,i,e){var s;this.Fo=this.rk;const n=null==(s=this.vV)?void 0:s.Ost;if(!n)return;const r=x.max(...n.map((t=>t.kst?t.kst:1/0)));this.kG=!0,this.yo(new Yr(t)),await i.catch(ya),yi(e);try{for(this.tnt||this.int(),this.ist.load(),this.ent||(this.snt=!1,await Ao(this.ist.play(),e));this.fk<Fn.Iz;)await this.H8.zy(E.wx,e);this.nnt.sM(),this.tnt=!1,this.kG=!1,this.yo(new aa(this.xE))}catch(t){throw this.nnt.nM(t),t}finally{this.rnt(),this.qst.Sst(r)}}Rk(){this.ent=!0,this.ist.pause()}async Pk(){this.ent&&(this.ist.src||this.Ott(),await this.nnt.rM,await this.ist.play())}async wy(){this.Lst&&this.Lst.yst().catch(ya),this.m7.Ty(),this.Zst(),this.Xst(),this.H8.wy(),this.Bo(),this.Ul.gn(),this.ast.gn(),this.ust.gn()}async tr(){this.Lst&&this.Lst.yst().catch(ya),this.m7.Ty(),this.ist.removeAttribute("src"),this.ist.removeAttribute("x-webkit-wirelessvideoplaybackdisabled"),this.ist.removeAttribute("x-airplay-deny"),this.ist.disableRemotePlayback=!1,this.ist.load(),this.H8.tr(),this.Fo=Mo.PP()}Ott(){this.Ctt||(Nz(this.ist,Fe.Ys),this.jtt=!0)}get fk(){return this.H8.fk}int(){const t=this.ist.getClientRects();let i;if(!(t.length>0))return;i=t[0];const e=i.width,s=this.ist.videoWidth/this.ist.videoHeight,n=i.height;let r,o;e/n>s?(r=n*s,o=n):(o=e/s,r=e),this.ist.style.width=r+"px",this.ist.style.height=o+"px",this.ist.style.marginLeft=(e-r)/2+"px",this.ist.style.marginTop=(n-o)/2+"px",this.ist.style.backgroundColor="black"}rnt(){this.ist.style.width="100%",this.ist.style.height="100%",this.ist.style.marginLeft="",this.ist.style.marginTop="",this.ist.style.backgroundColor=""}get yk(){return this.ist.videoHeight}get Tk(){return this.ist.videoWidth}get OE(){return this.ist.ended}get Ti(){return this.ist.offsetHeight*Fe.Ys.bp}get ji(){return this.ist.offsetWidth*Fe.Ys.bp}get FE(){return!1}get Ctt(){return this.jtt}get NE(){}get Uu(){return this.ont}get lt(){}get wa(){return this.ost}get LV(){return this.Qo}get _k(){return this.vV?this.vV._k:Mo.PP()}get wV(){}get nt(){return this.Ul}get Ll(){return this.FG}get Lk(){return!1}set Lk(t){}kV(t,i,e,s,n){}Wk(t,i,e,s,n,r,o,h,a){const u=new lO(t,i,e,s,n,r,o,a,h);return this.Ul.tt(u),this.j7.tt(u),u}CV(t){throw b("Not supported.")}H$(t){}GE(){return JL(this.ist)}get i7(){return"block"===this.ist.style.display}ge(){this.ist.style.display="block",this.ast.ge()}be(){this.ist.style.display="none",this.ast.be()}xtt(){}async $n(t){if(t.YA===uh.QQ)throw new b("Not yet implemented");await this.Lst.mst();const i=dl(t.yV,(t=>t.NS.YA===Nv.QA)),e={kind:_z.dst,mediaBufferConfigs:t.k5.map((t=>t.VN)),fairPlaySdkUri:null==i?void 0:i.hY};return await this.Lst.Ast(e),this.vV=Az.Cst(t,this.Lst,this.KA,this.ist),this.E$.$n(this.vV,t),this.ist.setAttribute("x-webkit-airplay","deny"),this.ist.setAttribute("x-webkit-wirelessvideoplaybackdisabled",""),this.ist.disableRemotePlayback=!0,this.ist.preload="none",this.ist.src="https://theo.proxy/"+this.Lst.pN+"/master.m3u8",this.vV}Ltt(){}BQ(t){this.Ul.it(t),this.j7.it(t)}jV(){for(const t of this.Ul.Ix.slice())t.gn();this.Ul.tr()}cV(t){}DV(){return!1}Rtt(t){t.appendChild(this.ist),this.ast.Rtt(t)}jk(){return this.ist}get zV(){return this.E$.zV}set zV(t){this.E$.zV=t}get Ptt(){}set Ptt(t){}get m8(){}Fk(){}constructor(t,i,e,s){super(),this.tnt=!0,this.Lst=new vz,this.qst=new wz,this.ent=!0,this.nnt=new xh,this.kG=!1,this.p7=Promise.resolve(),this.m7=new Wt,this.snt=!0,this.Fo=Mo.PP(),this.jtt=!1,this.Pst=()=>{this.KE||this.Jst.V<=0||this.TE.V<=0||this.qst.Tst(this.TE.jn(this.TE.V-1),this.Jst.jn(this.Jst.V-1))},this.zst=()=>{this.yo(new fa(this.xE))},this.Bst=()=>{this.yo(new A(this.xE,this.NE))},this.Ust=()=>{this.yo(new cu(this.xE,this.$E))},this.Qst=()=>{this.yo(new $e(this.xE,this.Nk))},this.Fst=()=>{this.yo(new Hs(this.ct))},this.Yst=()=>{this.yo(new te(this.xE))},this.Vst=()=>{this.Wb(this.xE)},this.Gst=async()=>{this.snt&&this.yo(new fi(this.xE)),this.ent=!1,this.snt=!0},this.Wst=()=>{this.ent=!0,this.yo(new Zr(this.xE))},this.Ntt=t=>{const i=t.initDataType;var e;const s=null!=(e=t.initData)?e:new ArrayBuffer(0);this.yo(new Mw(i,s))},this.ist=t,this.H8=new Gj(this),this.ont=e,this.FG=s,this.ist.playsInline=!0,this.ist.style.width="100%",this.ist.style.height="100%",this.Rst(),this.Hst(),this.ost=fz(this.ist),this.Qo=new dz(this.ist),this.E$=new IR(this),this.KA=i,this.Ul=new Cc,this.j7=new xr(this),this.ast=new Xn,this.ust=new Qn(this.ast.we,this.Uu,this.nt,this.Ll,this.wa,this.LV)}},bz=[Ri.SI,Ri.NI];function Mz(t){const i=h.createElement(t);return Ln(i)&&i.addEventListener("contextmenu",Iz),Sz(i),i}function Tz(t){Sz(t),t.removeEventListener("contextmenu",Iz)}function Sz(t){t.removeAttribute("id"),t.removeAttribute("class"),t.removeAttribute("style"),qn(t),qd(t),t.pause(),t.playbackRate=1,t.disableRemotePlayback=!1,t.preload=Nr.Mz,t.controls=!1,t.style.display="none",Ln(t)&&(t.style.width="100%",t.style.height="100%",t.style.pointerEvents="none",t.playsInline=!0,t.setAttribute("webkit-playsinline",""))}function Nz(t,i){if(i.Up){const i=t.muted;t.muted=!0,t.muted=!1,t.muted=i}else if(t.paused){const i=t.play();pr(i)&&V(i),t.pause()}}function Iz(t){t.preventDefault()}r(),Qi(),r();var Dz=class{hI(t){return this.OQ.hI(t)}YI(t){this.OQ.YI(t)}gn(){this.OQ.gn()}constructor(t){this.OQ=t}},Ez=class extends Dz{hI(t){const i=new Gs(t),e=this.UG.NK.VY(i);return e?this.hnt(i,e):this.OQ.hI(i)}async hnt(t,i){i.DK(Fe.Og()/1e3);const e=await this.OQ.hI(t);let s;i.EK(Fe.Og()/1e3),s=e.XN?e.YN().pipeThrough(new Ra(new kz(i))):e.FN().then((t=>{const e=Fe.Og()/1e3;return i.kK(e,new T(t)),i.xK(e),t}));const n={rI:s,hI:e.hI};return new qt(n,e)}constructor(t,i){super(t),this.UG=i}},kz=class{start(t){this.JJ=t}transform(t){this.ant.kK(Fe.Og()/1e3,t),this.JJ.enqueue(t)}flush(){this.ant.xK(Fe.Og()/1e3)}constructor(t){this.ant=t}};function xz(t){return{get ratio(){return t.$o},get thresholds(){return t.unt.slice()}}}function Lz(t){const i=[],e=x.floor(1/t);if(j(e))return[];for(let s=0;s<=e;s++){const e=ur(s*t,0,1);i.push(e)}return i}r(),r(),r(),ds();var Cz=class{get $o(){return this.cnt}get unt(){return this.lnt}dnt(t){return i=>{const e=i[i.length-1];this.cnt=e.intersectionRatio,t(e.intersectionRatio)}}get ga(){return this.Za||(this.Za=xz(this)),this.Za}zk(){this.fnt.disconnect()}constructor(t,i,e){this.cnt=1,this.Za=void 0,this.lnt=Lz(i);const n=this.dnt(e);this.fnt=new s.IntersectionObserver(n,{root:null,threshold:this.lnt}),this.fnt.observe(t)}},jz=class{get $o(){return this.cnt}get unt(){return this.lnt}get ga(){return this.Za||(this.Za=xz(this)),this.Za}gnt(t){this.cnt=t;const i=this.lnt;let e=0;if(t>0)for(;e<i.length&&i[e]<=t;)++e;this._nt!==e&&(this._nt=e,this.vnt(t))}constructor(t,i){this.cnt=1,this._nt=-1,this.Za=void 0,this.lnt=Lz(t),this.vnt=i}},Oz=class extends jz{wnt(){const t=this.lo.getBoundingClientRect();return ur(x.max(0,x.min(s.innerWidth,t.right)-x.max(0,t.left))*x.max(0,x.min(s.innerHeight,t.bottom)-x.max(0,t.top))/(t.width*t.height),0,1)}zk(){s.removeEventListener("scroll",this.mnt)}constructor(t,i,e){super(i,e),this.mnt=Yh((()=>this.gnt(this.wnt())),50),this.lo=t,s.addEventListener("scroll",this.mnt,!!eL&&{passive:!0}),Fs((()=>this.gnt(this.wnt())))}},Rz=.1,Pz=class{get pnt(){return this.Ant}get Do(){return this.ynt}set Do(t){if(j(t)||t<0||t>1)throw new RangeError("The threshold must be a value between 0 and 1");this.ynt=t}get ga(){return this.Za||(this.Za=function(t){return{get ratio(){return t.pnt},get visible(){return t.pnt>t.Do},get visibleThreshold(){return t.Do},set visibleThreshold(i){i=pM(i),t.Do=i},addObserver:(i,e)=>(i=pM(i),t.Ao(i,e).ga),removeObserver(i){let e=t.bnt(i);e&&t.No(e)}}}(this)),this.Za}Mnt(t){return i=>{this.Ant=i,null==t||t(this.Ant)}}Ao(t,i){if(j(t))throw new k("step is not of the right type");if(t>1||t<=0)throw new RangeError("The step must be a number greater than 0 and smaller than or equal to 1");let e;return e="function"==typeof s.IntersectionObserver?new Cz(this.lo,t,this.Mnt(i)):new Oz(this.lo,t,this.Mnt(i)),this.Tnt.push(e),e}No(t){t.zk(),ra(this.Tnt,t)}bnt(t){for(const i of this.Tnt)if(i.ga===t)return i}gn(){for(const t of this.Tnt)t.zk();nt(this.Tnt)}constructor(t){this.Ant=1,this.ynt=0,this.Tnt=[],this.Za=void 0,this.lo=t,this.Ao(.1,this.Mnt())}};r();var zz=class extends Jr{constructor(){super(Zi.Wy)}},Bz=class extends gs{get Snt(){return this.UG}get Xz(){return this.Nnt}set Xz(t){this.Nnt=t,this.xa.Xz=t}get Int(){return this.Dnt}get ht(){return this.xa.ht}get qZ(){return this.Ent}get Uu(){return this.knt}get UE(){return this.xa.UE}get VE(){return this.xnt}get wZ(){return this.Lnt}get nt(){return this.xa.nt}get Ll(){return this.FG}get rt(){return this.xa.rt}get TE(){return this.SE()}SE(){return this.xa.TE}get Cnt(){return this.nJ}get wJ(){return this.mJ}get xE(){return this.LE()}set xE(t){this.CE(t)}LE(){return this.xa.xE}CE(t,i){this.xa.CE(t,i)}jnt(){return this.LE()}get NE(){return this.xa.NE}set NE(t){this.xa.NE=t}get bt(){return this.xa.bt}get ct(){return this._d()}_d(){return this.xa.ct}get we(){return this.xa.we}get OE(){return this.xa.OE}get lt(){return this.PE()}PE(){return this.xa.lt}get zE(){return this.BE()}BE(){return this.xa.zE}get wa(){return this.xa.Ck()}get LV(){return this.xa._a()}get Lk(){return this.xa.Lk}set Lk(t){this.xa.Lk=t}get WE(){return this.xa.WE}set WE(t){const i=Boolean(t);this.HE(i)}HE(t){this.xa.WE=t,t||this.KE||this.Ok()}get KE(){return this.xa.KE}get $E(){return this.ek()}set $E(t){this.nk(t)}ek(){return this.xa.$E}nk(t){this.xa.$E=t}get rk(){return this.hk()}hk(){return this.xa.rk}get ck(){return this.xa.ck}set ck(t){this.xa.ck=t}get fk(){return this.xa.fk}get _k(){return this.vk()}vk(){return this.xa._k}get wk(){return this.xa.wk}get Gx(){return this.iB}get yk(){return this.xa.yk}get Tk(){return this.xa.Tk}get Nk(){return this.xa.Nk}set Nk(t){const i=ur(Number(t),0,1)||0;this.Dk(i)}get Ek(){return this.QG}Dk(t){this.xa.Nk=t}Sa(){IS(this,yk,this)}Pk(){this.xa.Pk()}Rk(){this.xa.Rk()}Ya(){return this.MG}async ka(t,i){if(this.MG=t,t){this.Ont.OH(t).catch(this.Rnt);const e=function(t){t.sources;const i=t.sources.filter((t=>qe(t.integration)));0;return t.sources=i,t}(t);await this.xa.ka(e,i)}}Ok(){if(this.do)return;this.xa.Ok(),this.Dnt.Ok();const t=this.we.getElementsByTagName("video");for(let i=0;i<t.length;i++){const e=t[i];"Advertisement"===e.title&&Nz(e,Fe.Ys)}this.do=!0}cs(){return this.Pnt.Uo()===Ba.FULLSCREEN}ge(){this.xa.ge()}be(){this.xa.be()}jk(){return this.xa.jk()}Fk(){this.xa.Fk()}Yk(){this.xa.Yk()}Wk(t){return this.xa.Wk(t)}async zk(){this.MG=void 0,await this.xa.zk(),await this.xa.tr()}async gn(){this.yo(new zz),this.Bo(),this.Ent.gn(),this.wE.gn(),this.Lnt.gn(),this.Ow.gn(),this.znt.gn(),this.Pnt.gn(),this.knt.gn(),this.Bnt.gn(),this.Dnt.gn(),this.BG.gn(),await this.xa.gn()}constructor(t,i,e){super(),this.Nnt=!1,this.do=!1,this.MG=void 0,this.Unt=!1,this.Ca=void 0,this.Rnt=t=>{if(this.Unt)return;this.Unt=!0;const i=this.Qnt,e=la(t);this.xa.xx=new ak(this.we,e,t),V(i.gn())},this.Fnt=t=>{t.type!==Zi.vb&&t.type!==Zi._b&&this.yo(t)};const s=pM(i.uid);j(s)?this.iB=FS++:this.iB=s,this.md=i;const n=Fe.wE,r=new uC;this.Bnt=new Vx("8.13.1",n,r),this.UG=new YL,this.QG=new Qu;const o=new Ez(n,this.UG);this.wE=new xL(o,i.allowMixedContent),this.GJ=null!=e?e:new bx(i.isEmbeddable,"8.13.1",vx()),this.Ont=new aC(n,this.GJ,this.Bnt,r,i,vx()),this.Ont.UJ().catch(this.Rnt),this.knt=new aL(t),this.knt.yn(Th.pn,this.Ds),this.FG=new gC,this.nJ=new ZL,this.mJ=new XL;const h=new hk(t,i,this.wE,this.UG,this.QG,this.knt,this.FG);this.UG.FK(h);let a=h;a=new HL(a,this.Cnt),a=new qL(a,this.wJ),this.Qnt=a,this.xa=new OS(this.Qnt),this.xa.Ly(this.Fnt),this.xnt=new KL(this.xa),this.Lnt=new jL(this.xa,this.wE,this.UG),this.Ow=new Xx(this),this.znt=new _L(this.xa,i.allowNativeFullscreen),this.Pnt=new yL(this.znt,this.xa._a()),this.knt.bn(),this.To=new Pz(t),this.BG=new So(this.knt,this.FG,1,[Ri.NI]),this.Dnt=new Qf(this.BG),this.Ent=new iC}};r(),r();var Xt=class extends gs{get Snt(){return this.Ynt()}Ynt(){return this.ta.Snt}get Vc(){return this.Vnt()}Vnt(){return this.ta.Vc}get Bnt(){return this.ta.Bnt}get Int(){return this.Gnt()}Gnt(){return this.ta.Int}get Xz(){return this.ta.Xz}set Xz(t){this.ta.Xz=t}get Ow(){return this.ta.Ow}get qZ(){return this.ta.qZ}get Cnt(){return this.ta.Cnt}get md(){return this.ta.md}get Uu(){return this.ta.Uu}get wa(){return this.Ck()}Ck(){return this.ta.wa}get LV(){return this._a()}_a(){return this.ta.LV}get wE(){return this.ta.wE}get Ek(){return this.ta.Ek}get Ont(){return this.ta.Ont}get wJ(){return this.ta.wJ}get wZ(){return this.ta.wZ}get Pnt(){return this.ta.Pnt}get knt(){return this.ta.knt}get xa(){return this.ta.xa}get Ll(){return this.ta.Ll}get Wnt(){return this.Znt()}Znt(){return this.ta.Wnt}get Hnt(){return this.Xnt()}Xnt(){return this.ta.Hnt}get Gx(){return this.ta.Gx}get To(){return this.ta.To}get ht(){return this.AE()}AE(){return this.ta.ht}SE(){return this.ta.SE()}get NE(){return this.DE()}set NE(t){this.EE(t)}DE(){return this.ta.NE}EE(t){this.ta.NE=t}get bt(){return this.kE()}kE(){return this.ta.bt}LE(){return this.ta.LE()}CE(t,i){this.ta.CE(t,i)}jnt(){return this.ta.jnt()}_d(){return this.ta._d()}get we(){return this.jE()}jE(){return this.ta.we}get OE(){return this.RE()}RE(){return this.ta.OE}PE(){return this.ta.PE()}BE(){return this.ta.BE()}get UE(){return this.QE()}QE(){return this.ta.UE}get Lk(){return this.ta.Lk}set Lk(t){this.ta.Lk=t}get VE(){return this.GE()}GE(){return this.ta.VE}get WE(){return this.ZE()}set WE(t){this.HE(t)}ZE(){return this.ta.WE}HE(t){this.ta.HE(t)}get KE(){return this.JE()}JE(){return this.ta.KE}get $E(){return this.ek()}set $E(t){this.nk(t)}ek(){return this.ta.$E}nk(t){this.ta.$E=t}hk(){return this.ta.hk()}get ck(){return this.lk()}set ck(t){this.dk(t)}lk(){return this.ta.ck}dk(t){this.ta.ck=t}get fk(){return this.gk()}gk(){return this.ta.fk}get Ca(){return this.ta.Ca}set Ca(t){this.ta.Ca=t}vk(){return this.ta.vk()}get wk(){return this.pk()}pk(){return this.ta.wk}get nt(){return this.Ak()}Ak(){return this.ta.nt}get yk(){return this.bk()}bk(){return this.ta.yk}get rt(){return this.Mk()}Mk(){return this.ta.rt}get Tk(){return this.Sk()}Sk(){return this.ta.Tk}get Nk(){return this.Ik()}set Nk(t){this.Dk(t)}Ik(){return this.ta.Nk}Dk(t){this.ta.Dk(t)}Ok(){this.ta.Ok()}Rk(){this.ta.Rk()}Pk(){this.ta.Pk()}ge(){this.ta.ge()}be(){this.ta.be()}cs(){return this.ta.cs()}jk(){return this.ta.jk()}Fk(){this.ta.Fk()}Yk(){this.ta.Yk()}Wk(t){return this.ta.Wk(t)}Sa(){this.ta.Sa()}Ya(){return this.ta.Ya()}ka(t,i){return this.ta.ka(t,i)}zk(){return this.ta.zk()}Gk(t){return!1}yG(){this.qnt&&this.ta.Ly(this.Zk)}bG(){this.qnt&&this.ta.Py(this.Zk)}async gn(t){this.Bo(),t||await this.ta.gn(),this.bG()}constructor(t,i){super(),this.Zk=t=>{this.Gk(t)||this.yo(t)},this.ta=t,this.qnt=!i,this.yG()}},F=function(t){return t[t.nu=0]="nu",t[t.Knt=1]="Knt",t[t.dL=2]="dL",t[t.Jnt=3]="Jnt",t[t.$nt=4]="$nt",t[t.trt=5]="trt",t}({}),Uz=[0,1,2,3,4,5],Qz={};function Fz(t,i){(Qz[i]||(Qz[i]=[])).push(t)}var Yz={};function Mr(t,i){(Yz[i]||(Yz[i]=[])).push(t)}var Vz=[];function Gz(t){for(const i of Vz)i(t)}r();var Wz=self.CustomEvent;var Zz=function(){try{const t=new Wz("cat",{detail:{foo:"bar"}});return"cat"===t.type&&"bar"===t.detail.foo}catch(t){}return!1}()?function(t,i){return new CustomEvent(t,i)}:function(t,i){const e=h.createEvent("CustomEvent");return e.initCustomEvent(t,(null==i?void 0:i.bubbles)||!1,(null==i?void 0:i.cancelable)||!1,null==i?void 0:i.detail),e};r();var Hz=new class{get V(){return this.Gz.length}get ga(){var t;return null!=(t=this.Za)?t:this.Za=function(t){const i=[];for(let e=0;e<t.V;e++)i[e]=t.Ex(e).ga;return i.getPlayerByUID=i=>{const e=t.irt(i);return e&&e.ga},i}(this)}Ex(t){return this.Gz[t]}l0(t){this.Gz.push(t),this.ga.push(t.ga)}wS(t){const i=this.Gz.indexOf(t);i<0||(Mn(this.Gz,i),this.Za&&Mn(this.Za,i))}irt(t){for(const i of this.Gz)if(i.Gx===t)return i}constructor(){this.Gz=[],this.Za=void 0}};function Xz(t){let i,e;const s=i=>{e=i;const s=Hc(i,t.md);t.ka(s)};let n={get abr(){return t.Snt.ga},get ads(){var i;return null==(i=t.Vc)?void 0:i.ga},get audioTracks(){return t.ht.ga},get autoplay(){return t.Xz},set autoplay(i){t.Xz=Boolean(i)},get buffered(){return t.SE()},get canvas(){return t.Ow.ga},get cast(){var i;return null==(i=t.qZ)?void 0:i.ga},get clip(){return t.Cnt.ga},get currentProgramDateTime(){var i;return null!=(i=t.NE)?i:null},set currentProgramDateTime(i){t.NE=null!=i?i:void 0},get currentTime(){return t.LE()},set currentTime(i){t.CE(Number(i))},get duration(){return t._d()},get element(){return t.we},get ended(){return t.OE},get error(){return t.PE()},get errorObject(){return t.BE()},get loop(){return t.wJ.wJ},set loop(i){t.wJ.wJ=Boolean(i)},get metrics(){return t.VE.ga},get muted(){return t.WE},set muted(i){t.HE(i)},get network(){return t.wZ.ga},get paused(){return t.KE},get playbackRate(){return t.$E},set playbackRate(i){const e=Number(i);if(e<0)throw new RangeError("playbackRate must be a positive number");t.$E=e},get played(){return t.hk()},get poster(){return t.mi},set poster(i){t.mi=Q(i)},get preload(){return t.ck},set preload(i){t.ck=function(t){switch(t){case"auto":case"":return"auto";case"metadata":return"metadata";default:return"none"}}(i)},get presentation(){return t.Pnt.ga},get readyState(){return t.fk},get seekable(){return t.vk()},get seeking(){return t.wk},get source(){return e},set source(t){s(t)},get src(){return Zk(t.Ya())},set src(t){s({sources:t})},get textTracks(){return t.nt.ga},get textTrackStyle(){return t.Ll.ga},get theoLive(){return t.Wnt},get uid(){return t.Gx},get videoHeight(){return t.yk},get videoTracks(){return t.rt.ga},get videoWidth(){return t.Tk},get visibility(){return t.To.ga},get volume(){return t.Nk},set volume(i){t.Dk(Number(i))},get latency(){return t.Ek.ga},get theoads(){return t.Hnt},destroy(){t.gn(),t=null,e=void 0},play(){t.ert()},pause(){t.Rk()},stop(){e=void 0,t.zk()},prepareWithUserAction(){t.Ok()},addEventListener(t,e){i.yn(t,e)},removeEventListener(t,e){i.fn(t,e)},setSource(t){s(t)},addTextTrack:i=>t.Wk(function(t){return{Lt:Q(t.kind),kh:Q(t.label),gs:Q(t.language),YA:Q(t.type)}}(i)).ga};return i=new Yt(n,!0),i.iu(t),i.yn("destroy",(()=>{i.gn()})),n}r(),r(),r(),r();var qz=class extends Jr{constructor(t){super(Zi.ro),this.source=t}};r();var Kz=class extends gs{get NE(){}set NE(t){}get xE(){return this.LE()}set xE(t){this.CE(t)}LE(){return this.EG}jnt(){return this.LE()}CE(t,i){this.kG&&this.EG===t||(this.EG=t,this.kG=!0,this.yo(new Yr(this.EG)))}get KE(){return this.CG}get $E(){return this.jG}set $E(t){this.jG!==t&&(this.jG=t,this.yo(new cu(this.EG,this.$E)))}get fk(){return Fn.Nz}get wk(){return this.kG}Pk(){this.CG&&(this.CG=!1,this.yo(new fi(this.EG)),this.yo(new Ai(this.EG)))}Rk(){this.CG||(this.CG=!0,this.yo(new A(this.EG,this.NE)),this.yo(new Zr(this.EG)))}tr(){this.EG=0,this.kG=!1,this.jG=1,this.Rk()}gn(){this.Bo()}be(){}ge(){}constructor(){super(),this.EG=0,this.CG=!0,this.kG=!1,this.jG=1}};r();var Jz={zIndex:"1",display:"inline-block",verticalAlign:"middle",backgroundRepeat:"no-repeat",backgroundPosition:"50% 50%",backgroundSize:"contain",cursor:"pointer",margin:"0",padding:"0",position:"absolute",top:"0",right:"0",bottom:"0",left:"0",height:"100%"},$z={visibility:"hidden"},tB={visibility:"visible"},iB=class{get zu(){return void 0!==this.nrt?this.nrt:void 0!==this.rrt?this.rrt:void 0}set ort(t){this.rrt=t,this.Yn()}Yn(){const t=this.ta.KE,i=this.hrt;this.zu?this.Vs.style.backgroundImage='url("'+Bv(this.zu)+'")':this.Vs.style.backgroundImage="",t&&this.zu&&!i?this.ge():this.be()}ge(){Vd($z,this.ta.we),Vd(tB,this.Vs)}be(){Vd($z,this.Vs),Vd(tB,this.ta.we)}yG(){this.ta.yn(Zi.ro,this.art),this.ta.yn(Zi.so,this.sF)}gn(){this.ta.fn(Zi.ro,this.art),this.ta.fn(Zi.so,this.sF),dn(this.Vs)}constructor(t){this.hrt=!1,this.art=t=>{var i;this.hrt=!this.ta.KE,this.nrt=null==(i=t.source)?void 0:i.poster,this.Yn()},this.sF=()=>{this.hrt=!0,this.be()},this.ta=t,this.yG(),this.Vs=function(){let t=gi&&gi.document&&gi.document.createElement("div");return t.className="theoplayer-poster",Vd(Jz,t),t}(),t.we.appendChild(this.Vs)}};r(),r(),r(),r();var eB=function(t){return t[t.urt=0]="urt",t[t.crt=1]="crt",t}({});function sB(t){let i;const e={get playing(){return t.$c},get currentAds(){return t.lrt.map((t=>t.drt()))},get currentAdBreak(){var i,e;return null!=(e=null==(i=t.frt)?void 0:i.drt())?e:null},get scheduledAds(){return t.grt.map((t=>t.drt()))},get scheduledAdBreaks(){return t._rt.map((t=>t.drt()))},skip(){t.ZC()},schedule(i){let e=ix(i,oc.Ld);e?t.D9(e,eB.urt,!1):console.error("Invalid ad description")},registerServerSideIntegration(i,e){t.vrt(i,e)},addEventListener(t,e){i.yn(t,e)},removeEventListener(t,e){i.fn(t,e)},get theoads(){var i;return null==(i=t.Hnt)?void 0:i.ga}};return i=new fo(t,e),e}var nB=class extends gs{get $c(){return!!this.Dc&&this.Dc.$c}get lrt(){return this.Dc?this.Dc.lrt:[]}get frt(){return this.Dc?this.Dc.frt:null}get grt(){return this.Dc?this.Dc.grt:[]}get _rt(){return this.Dc?this.Dc._rt:[]}get Hnt(){var t;return null==(t=this.Dc)?void 0:t.Hnt}D9(t,i,e){var s;null==(s=this.Dc)||s.D9(t,i,e)}wrt(t){var i;null==(i=this.Dc)||i.wrt(t)}ZC(){var t;null==(t=this.Dc)||t.ZC()}mrt(t){var i;null==(i=this.Dc)||i.mrt(t)}vrt(t,i){var e;null==(e=this.Dc)||e.vrt(t,i)}get ga(){var t;return null!=(t=this.Za)?t:this.Za=sB(this)}async gn(t){this.Bo(),void 0!==this.Dc&&(this.Dc.Py(this.Ds),t||await this.Dc.gn(),this.Dc=void 0)}constructor(t){var i;super(),this.Za=void 0,this.Dc=t,null==(i=this.Dc)||i.Ly(this.Ds)}};r(),r();var rB=class extends ua{constructor(t,i){super(t),this.Yl=i}},oB=class extends Jr{get ad(){return this.adBreak}constructor(t,i){super(t),this.adBreak=i}},Ar=class extends rB{ma(){return new hB(this.Yl.drt())}constructor(t){super("prt",t)}},hB=class extends oB{constructor(t){super("removeadbreak",t)}};r();var Pr=class extends rB{ma(){return new aB(this.Yl.drt())}constructor(t){super("Art",t)}},aB=class extends oB{constructor(t){super("addadbreak",t)}};r(),r();var uB=class extends ua{constructor(t,i){super(t),this.yrt=i}},Sl=class extends Jr{constructor(t,i){super(t),this.ad=i}},cB=class extends uB{ma(){return new lB(this.yrt.drt())}constructor(t){super("brt",t)}},lB=class extends Sl{constructor(t){super("addad",t)}};r();var hc=class extends rB{ma(){return new dB(this.Yl.drt())}constructor(t){super("Mrt",t)}},dB=class extends oB{constructor(t){super("adbreakend",t)}};r();var Qt=class extends rB{ma(){return new fB(this.Yl.drt())}constructor(t){super("Trt",t)}},fB=class extends oB{constructor(t){super("adbreakbegin",t)}};r();var gB=class extends uB{ma(){return new _B(this.yrt.drt(),this.currentTime)}constructor(t,i){super("Srt",t),this.currentTime=i}},_B=class extends Sl{constructor(t,i){super("adbegin",t),this.currentTime=i}};r();var wu=class extends uB{ma(){return new vB(this.yrt.drt(),this.currentTime)}constructor(t,i){super("Nrt",t),this.currentTime=i}},vB=class extends Sl{constructor(t,i){super("adend",t),this.currentTime=i}};r();var wB=class extends ua{ma(){return new mB}constructor(){super("Irt")}},mB=class extends Jr{constructor(){super("adadded")}},pB=class extends nB{get xx(){return this.Dc}set xx(t){const i=this.Dc;if(i===t)return;const e=this.lrt,s=this.frt,n=this.grt,r=this._rt;null==i||i.Py(this.Ds),this.Dc=t,null==t||t.Ly(this.Ds);const o=this.lrt,h=this.frt,a=this.grt,u=this._rt,c=[];let l=!1;for(const t of r)Qa(u,t)||c.push(new Ar(t));for(const t of u)Qa(r,t)||c.push(new Pr(t));for(const t of a)Qa(n,t)||(c.push(new cB(t)),l=!0);l&&c.push(new wB),s!==h&&(s&&c.push(new hc(s)),h&&c.push(new Qt(h)));for(const t of e)Qa(o,t)||c.push(new wu(t,this.ta.LE()));for(const t of o)Qa(e,t)||c.push(new gB(t,this.ta.LE()));for(const t of c)this.yo(t)}constructor(t){super(void 0),this.ta=t}};r(),r();var AB=class extends gs{get ga(){var t;return null!=(t=this.Za)?t:this.Za=sB(this)}mrt(t){}vrt(t,i){}D9(t,i,e){}ZC(){}wrt(t){}gn(){return this.Bo(),Promise.resolve()}constructor(...t){super(...t),this.$c=!1,this.frt=null,this.lrt=[],this._rt=[],this.grt=[],this.Hnt=void 0,this.Za=void 0}},yB=class extends AB{D9(t,i,e){this.Drt.push({Ert:t,krt:i,xrt:e})}ZC(){}mrt(t){}vrt(t,i){this.Lrt.push({AL:t,Crt:i})}wrt(t){const i=this.Lrt.slice(),e=this.Drt.slice();this.tr();for(const e of i)t.vrt(e.AL,e.Crt);for(const i of e)t.D9(i.Ert,i.krt,i.xrt)}jrt(){const t=this.Drt.map((t=>t.Ert));return this.tr(),t}tr(){nt(this.Lrt),nt(this.Drt)}async gn(){this.tr(),await super.gn()}constructor(...t){super(...t),this.Lrt=[],this.Drt=[]}};r();var bB,MB=class extends Jr{constructor(t){super("tizen2retry"),this.originalErrorEvent=t}};function TB(){if(!bB){let t=Bz;t=function(t){return class extends Xt{constructor(i,e){let s=new t(i,e);for(const t of Uz)if(Yz[t])for(const i of Yz[t])s=i(s);super(s)}}}(t);let i=function(t){return class extends gs{get Bnt(){return this.Ort.Bnt}get Vc(){return this.Dc}get Ow(){return this.Ort.Ow}get md(){return this.Ort.md}get wE(){return this.Ort.wE}get wa(){return this.Ort.wa}get LV(){return this.Ort.LV}get Pnt(){return this.Ort.Pnt}get knt(){return this.Ort.knt}get xa(){return this.Ort.xa}get Snt(){return this.Ort.Snt}get Xz(){return this.Ort.Xz}set Xz(t){this.Ort.Xz=t,this.Rrt()}get Int(){return this.Ort.Int}get ht(){return this.Ort.ht}get qZ(){return this.Ort.qZ}get Uu(){return this.Ort.knt}get ga(){return this.Za||(this.Za=this.ma()),this.Za}get UE(){return this.Ort.UE}get Lk(){return this.Ort.Lk}set Lk(t){this.Ort.Lk=t}get VE(){return this.Ort.VE}get wZ(){return this.Ort.wZ}get nt(){return this.Ort.nt}get Ll(){return this.Ort.Ll}get rt(){return this.Ort.rt}get Cnt(){return this.Ort.Cnt}get wJ(){return this.Ort.wJ}get NE(){return this.ta.NE}set NE(t){this.ta.NE=t}get bt(){return this.Ort.bt}get we(){return this.Ort.we}get OE(){return this.Ort.OE}get WE(){return this.Ort.WE}set WE(t){this.HE(t)}get KE(){return this.ta.KE}get mi(){return this.Prt.zu||""}set mi(t){this.Prt.ort=t}get $E(){return this.ek()}set $E(t){this.nk(t)}ek(){return this.Ort.$E}nk(t){this.ta.$E=t}get ck(){return this.Ort.ck}set ck(t){this.Ort.ck=t}get fk(){return this.ta.fk}get Ca(){return this.Ort.Ca}set Ca(t){this.Ort.Ca=t}get wk(){return this.ta.wk}get Wnt(){return this.Ort.Wnt}get Hnt(){return this.Ort.Hnt}get Gx(){return this.Ort.Gx}get yk(){return this.Ort.yk}get Tk(){return this.Ort.Tk}get Nk(){return this.Ort.Nk}set Nk(t){this.Dk(t)}get Ek(){return this.Ort.Ek}get Ont(){return this.Ort.Ont}get To(){return this.Ort.To}async Wo(t,i){return this.Go.Wo(t,i).catch(Ct)}async zrt(t,i){yi(i),this.Ort.Ly(this.Brt);try{await this.Ort.ka(t,i)}finally{this.Ort.Py(this.Brt)}}async Rrt(){const t=await this.Urt();this.Qrt(t)}async Urt(){const t=this.Ya();return t&&!gr(t)&&this.Xz&&this.KE?this.Int.Frt(this.WE):"none"}Qrt(t){var i;const e=(null==(i=this.Ya())?void 0:i.mutedAutoplay)||this.md.mutedAutoplay;switch(t){case"all":this.ert();break;case"muted":(this.WE||e===bS.ALL)&&(this.WE=!0,this.Pk())}}ka(t){gr(this.MG)||this.yo(new Js(0,Fn.Nz)),this.tr(),this.MG=t,V(this.Wo((async i=>{yi(i);try{await this.zrt(t,i)}catch(t){return X(t),this.MG=void 0,void this.eG(vy(t,vt.SOURCE_NOT_SUPPORTED))}finally{this.Yrt(this.Ort)}const e=await this.Urt();this.yo(new qz(this.Ya())),this.Qrt(e)})))}CE(t,i){this.ta.CE(t,i)}PE(){var t;return null!=(t=this.ZG)?t:this.Ort.PE()}BE(){var t;return null!=(t=this.dV)?t:this.Ort.BE()}eG(t){void 0===this.BE()&&(this.dV=t,this.ZG=la(t),this.yo(new Uc(t)))}Pk(){this.ta.Pk()}ert(){this.WE||this.Ok(),this.Pk()}Ok(){this.Ort.Ok()}Rk(){this.ta.Rk()}zk(){this.ka(void 0)}ge(){this.IG=!0,this.ta.ge()}be(){this.IG=!1,this.ta.be()}Sa(){this.Ort.Sa()}Dk(t){this.Ort.Dk(t)}HE(t){this.Ort.HE(t)}ja(t){this.Vrt=t,t.l0(this)}cs(){return this.Ort.cs()}Ya(){return this.MG}jk(){return this.Ort.jk()}LE(){return this.ta.LE()}jnt(){return this.ta.jnt()}_d(){return this.Ort._d()}SE(){return this.Ort.SE()}hk(){return this.Ort.hk()}vk(){return this.Ort.vk()}Fk(){this.Ort.Fk()}Yk(){this.Ort.Yk()}Wk(t){return this.Ort.Wk(t)}tr(){this.MG=void 0,this.dV=void 0,this.ZG=void 0,this.Grt=!0,nt(this.Wrt),this.Zrt.tr(),this.Yrt(this.Zrt),this.Go.Ty(),V(this.Go.Wo((async t=>{yi(t),await this.Ort.zk()})))}gn(){this.yo(new zz),this.Prt.gn(),this.bG(),this.tr(),V(this.Wo((async()=>{await this.Ort.gn(),this.Vrt&&(this.Vrt.wS(this),this.Vrt=void 0),this.Go.gn()}))),this.Bo()}Yrt(t){if(this.ta===t)return;const i=this.ta.KE,e=this.ta.LE(),s=this.ta.$E,n=this.ta.fk,r=this.ta.wk;this.Hrt=i,this.ztt=n,this.bG(),t.Ly(this.Xrt),t===this.Ort?(void 0!==this.Dc&&(this.Dc.xx=t.Vc,this.qrt.wrt(this.Dc)),(r||t.LE()!==e)&&t.CE(e),t.$E!==s&&(t.$E=s),i?t.Rk():t.Pk()):(void 0!==this.Dc&&(this.Dc.xx=this.qrt,this.qrt.tr()),this.md.retainPlaybackRateOnSourceChange?t.$E=s:1!==s&&this.yo(new cu(this.LE(),1))),t.Py(this.Xrt),this.ta=t,this.yG();for(const t of this.Wrt)this.yo(t);nt(this.Wrt),this.IG?t.ge():t.be()}yG(){this.ta.Ly(this.Vk)}bG(){this.ta.Py(this.Vk)}ma(){return Xz(this)}constructor(i,e){super(),this.Hrt=!0,this.ztt=Fn.Nz,this.Grt=!1,this.MG=void 0,this.dV=void 0,this.ZG=void 0,this.Brt=t=>{t.type!==Zi.pb&&this.Wrt.push(t)},this.Xrt=t=>{(t.type!==Zi.so||this.ta.KE)&&(t.type===Zi.wb&&this.ta.KE||t.type===Zi.Mb&&this.ta.wk&&this.ta.LE()===t.currentTime||t.type===Zi.pb&&this.ta.$E===t.playbackRate||this.yo(t))},this.Vk=t=>{if(this.Grt){if(t.type===E.rP)return;t.type!==E.iP&&t.type!==E.oP||(this.Grt=!1)}if(t.type===Zi.so){if(!this.Hrt)return;this.Hrt=!1}else if(t.type===Zi.wb){if(this.Hrt)return;this.Hrt=!0}else if(t.type===E.wx){if(this.ztt===t.readyState)return;this.ztt=t.readyState}else if(t.type===Zi.Wy)return;this.yo(t)},this.Ort=new t(i,e),this.Zrt=new Kz,this.ta=this.Ort,this.Prt=new iB(this),this.Ort.Vc&&(this.Dc=new pB(this),this.Dc.xx=this.Ort.Vc,this.qrt=new yB),this.Go=new La,this.Wrt=[],this.IG=!0,this.yG()}}}(t);Ro.Nf&&Ro.Df<3&&(i=function(t){return class extends t{ka(t){this.Krt=0,super.ka(t)}yo(t){if(t.type===Me.ua&&this.Krt<3)return this.Krt++,super.yo(new MB(t)),void super.ka(this.Ya());super.yo(t)}constructor(...t){super(...t),this.Krt=0}}}(i)),i=function(t){let i=t;for(const t of Uz)if(Qz[t])for(const e of Qz[t])i=e(i);return i}(i),bB=i}return bB}function SB(t,i){const e=TS(i),s=new(TB())(t,e);s.Ca=s;let n=s.ga;return s.Sa(),s.ja(Hz),_.defineProperty(n,"constructor",{value:SB}),n=_M(n),Gz(s),n}il(),Fs((()=>{self.dispatchEvent&&self.dispatchEvent(Zz("theoplayerready"))})),r();var NB={base64:new class{encode(t){return gc(t)}decode(t){return Zn(t)}}};r();var IB=JSON.parse('["hbbtv","dash","hesp","millicast","hls","chromecast","ads","theoads","airplay","spotx","vr","vr-webxr","cache","webaudio","youbora","mediamelon","moat","google-dai","streamone","lcevc","freewheel","agama","uplynk","mediatailor","ui","relatedcontent","social","upnext","contextmenu","texttrackstyle-ui","activequalitylabel","upcomingadnotification"]');r(),r(),r();var DB=class{get xE(){const t=this.ta.currentTime;return isFinite(t)?t:"now"}get Jrt(){return this.ta.src||""}tr(){}constructor(t,i){this.$rt=!1,this.tot=t=>{this.iot.bX(t.error,this.xE)},this.eot=()=>{this.iot.mX(this.Jrt),this.ta.removeEventListener("playing",this.eot),this.$rt=!1},this.js=()=>{var t,i,e,s;this.$rt||(this.ta.addEventListener("playing",this.eot),this.$rt=!0),null==(t=this.ta.ads)||t.removeEventListener("adbegin",this.rot),null==(i=this.ta.theoads)||i.removeEventListener("interstitialbegin",this.oot);var n,r;(null==(s=this.ta.source)||null==(e=s.ads)?void 0:e.some((t=>"theoads"===t.integration)))&&(null==(n=this.ta.ads)||n.addEventListener("adbegin",this.rot),null==(r=this.ta.theoads)||r.addEventListener("interstitialbegin",this.oot))},this.rot=t=>{"theoads"!==t.ad.integration||t.ad.isSlate||this.iot.yX("ad")},this.oot=t=>{const i=t.interstitial;(function(t){return"adbreak"===t.type})(i)||this.iot.yX(function(t){switch(t){case"adbreak":default:return"ad";case"overlay":return"overlay"}}(i.type))},this.iot=i,this.ta=t,this.ta.addEventListener("error",this.tot),this.ta.addEventListener("sourcechange",this.js),this.js()}};!function(t){Vz.push(t)}((function(t){new DB(t.ga,t.Bnt)})),r();var EB="theoplayer-stored-volume",kB="theoplayer-stored-mutedstate";Fz((function(t){return class extends t{HE(t){this.md.persistVolume&&$h.tM(kB,""+Boolean(t)),super.HE(t)}Dk(t){this.md.persistVolume&&$h.tM(EB,""+Number(t)),super.Dk(t)}constructor(t,i){if(super(t,i),i.persistVolume){let t=$h.zJ(EB);(void 0===t||j(t))&&(t=1);const i=$h.BJ(kB)||!1;this.Nk=t,this.WE=i}}}}),F.nu);var xB="8.13.1",LB="2025.1.5",CB=Hz.ga,jB=rt.EL.registerContentProtectionIntegration.bind(rt.EL);r(),r(),r(),r(),il();var OB={zX(t){gi.addEventListener("beforeunload",t)},jX(t){gi.removeEventListener("beforeunload",t)}},RB={hot:class{get YG(){const t=[];for(const i of this.aot){const e=this.uot.get(i);if(e){const i=e.map((t=>t.cot));t.push(...i)}}return this.lot&&t.push(this.lot),t}GG(t){for(const i of this.YG)i.Rtt(t)}sG(t){const i=dl(this.uot.get(t),(t=>t.fot));if(i)return i.fot=!1,i.cot}got(t){if(!this.lot){var i;const t=null==(i=this.uot.get(Ri.NI))?void 0:i[0].cot.gV;if(!t)throw new b("Error creating iOS Safari MediaController");this.lot=new yz(t,this.KA,this.Xu,this.FG),t.parentElement&&this.lot.Rtt(t.parentElement)}return this.lot}async BV(t){const i=t.gV,e=i.tagName.toLowerCase();await t.tr(),Sz(i);const s=dl(this.uot.get(e)||[],(i=>t===i.cot));s&&(s.fot=!0)}zG(){for(const t of this.YG)t.Ott()}gn(){for(const t of this.YG){const i=t.gV;t.wy(),Tz(i),dn(i)}this.uot.clear(),this.lot=void 0}_ot(){for(const t of this.aot){const i=[];this.uot.set(t,i);for(let e=0;e<this.vot;e++){const e=Mz(t),s=t===Ri.SI?new VR(e,this.KA,this.Xu):new gz(e,this.KA,this.Xu,this.FG);i.push({cot:s,fot:!0})}}}constructor(t,i,e=2,s=bz,n=Ly()){this.vot=e,this.aot=[...s],this.KA=n,this.Xu=t,this.FG=i,this.uot=ll(),this._ot()}},wot:class t{Frt(t){return this.mot.Wo((()=>this.pot(t)))}Ok(){this.BG.zG()}async pot(i){const e=this.BG.sG(Ri.NI),s=e.gV,n=await t.Aot(s,i);return await this.BG.BV(e),n}static async Aot(i,e){return Ro.kf||Ro.Nf?"all":(i.src||(i.src="data:video/mp4;base64,AAAAHGZ0eXBNNFYgAAACAGlzb21pc28yYXZjMQAAAAhmcmVlAAAGF21kYXTeBAAAbGliZmFhYyAxLjI4AABCAJMgBDIARwAAArEGBf//rdxF6b3m2Ui3lizYINkj7u94MjY0IC0gY29yZSAxNDIgcjIgOTU2YzhkOCAtIEguMjY0L01QRUctNCBBVkMgY29kZWMgLSBDb3B5bGVmdCAyMDAzLTIwMTQgLSBodHRwOi8vd3d3LnZpZGVvbGFuLm9yZy94MjY0Lmh0bWwgLSBvcHRpb25zOiBjYWJhYz0wIHJlZj0zIGRlYmxvY2s9MTowOjAgYW5hbHlzZT0weDE6MHgxMTEgbWU9aGV4IHN1Ym1lPTcgcHN5PTEgcHN5X3JkPTEuMDA6MC4wMCBtaXhlZF9yZWY9MSBtZV9yYW5nZT0xNiBjaHJvbWFfbWU9MSB0cmVsbGlzPTEgOHg4ZGN0PTAgY3FtPTAgZGVhZHpvbmU9MjEsMTEgZmFzdF9wc2tpcD0xIGNocm9tYV9xcF9vZmZzZXQ9LTIgdGhyZWFkcz02IGxvb2thaGVhZF90aHJlYWRzPTEgc2xpY2VkX3RocmVhZHM9MCBucj0wIGRlY2ltYXRlPTEgaW50ZXJsYWNlZD0wIGJsdXJheV9jb21wYXQ9MCBjb25zdHJhaW5lZF9pbnRyYT0wIGJmcmFtZXM9MCB3ZWlnaHRwPTAga2V5aW50PTI1MCBrZXlpbnRfbWluPTI1IHNjZW5lY3V0PTQwIGludHJhX3JlZnJlc2g9MCByY19sb29rYWhlYWQ9NDAgcmM9Y3JmIG1idHJlZT0xIGNyZj0yMy4wIHFjb21wPTAuNjAgcXBtaW49MCBxcG1heD02OSBxcHN0ZXA9NCB2YnZfbWF4cmF0ZT03NjggdmJ2X2J1ZnNpemU9MzAwMCBjcmZfbWF4PTAuMCBuYWxfaHJkPW5vbmUgZmlsbGVyPTAgaXBfcmF0aW89MS40MCBhcT0xOjEuMDAAgAAAAFZliIQL8mKAAKvMnJycnJycnJycnXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXiEASZACGQAjgCEASZACGQAjgAAAAAdBmjgX4GSAIQBJkAIZACOAAAAAB0GaVAX4GSAhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGagC/AySEASZACGQAjgAAAAAZBmqAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZrAL8DJIQBJkAIZACOAAAAABkGa4C/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmwAvwMkhAEmQAhkAI4AAAAAGQZsgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGbQC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm2AvwMkhAEmQAhkAI4AAAAAGQZuAL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGboC/AySEASZACGQAjgAAAAAZBm8AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZvgL8DJIQBJkAIZACOAAAAABkGaAC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmiAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpAL8DJIQBJkAIZACOAAAAABkGaYC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmoAvwMkhAEmQAhkAI4AAAAAGQZqgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGawC/AySEASZACGQAjgAAAAAZBmuAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZsAL8DJIQBJkAIZACOAAAAABkGbIC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm0AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZtgL8DJIQBJkAIZACOAAAAABkGbgCvAySEASZACGQAjgCEASZACGQAjgAAAAAZBm6AnwMkhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AAAAhubW9vdgAAAGxtdmhkAAAAAAAAAAAAAAAAAAAD6AAABDcAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAzB0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAABAAAAAAAAA+kAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAALAAAACQAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAPpAAAAAAABAAAAAAKobWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAB1MAAAdU5VxAAAAAAALWhkbHIAAAAAAAAAAHZpZGUAAAAAAAAAAAAAAABWaWRlb0hhbmRsZXIAAAACU21pbmYAAAAUdm1oZAAAAAEAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAhNzdGJsAAAAr3N0c2QAAAAAAAAAAQAAAJ9hdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAALAAkABIAAAASAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAALWF2Y0MBQsAN/+EAFWdCwA3ZAsTsBEAAAPpAADqYA8UKkgEABWjLg8sgAAAAHHV1aWRraEDyXyRPxbo5pRvPAyPzAAAAAAAAABhzdHRzAAAAAAAAAAEAAAAeAAAD6QAAABRzdHNzAAAAAAAAAAEAAAABAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAABAAAAAQAAAIxzdHN6AAAAAAAAAAAAAAAeAAADDwAAAAsAAAALAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAAiHN0Y28AAAAAAAAAHgAAAEYAAANnAAADewAAA5gAAAO0AAADxwAAA+MAAAP2AAAEEgAABCUAAARBAAAEXQAABHAAAASMAAAEnwAABLsAAATOAAAE6gAABQYAAAUZAAAFNQAABUgAAAVkAAAFdwAABZMAAAWmAAAFwgAABd4AAAXxAAAGDQAABGh0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAACAAAAAAAABDcAAAAAAAAAAAAAAAEBAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAQkAAADcAABAAAAAAPgbWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAC7gAAAykBVxAAAAAAALWhkbHIAAAAAAAAAAHNvdW4AAAAAAAAAAAAAAABTb3VuZEhhbmRsZXIAAAADi21pbmYAAAAQc21oZAAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAADT3N0YmwAAABnc3RzZAAAAAAAAAABAAAAV21wNGEAAAAAAAAAAQAAAAAAAAAAAAIAEAAAAAC7gAAAAAAAM2VzZHMAAAAAA4CAgCIAAgAEgICAFEAVBbjYAAu4AAAADcoFgICAAhGQBoCAgAECAAAAIHN0dHMAAAAAAAAAAgAAADIAAAQAAAAAAQAAAkAAAAFUc3RzYwAAAAAAAAAbAAAAAQAAAAEAAAABAAAAAgAAAAIAAAABAAAAAwAAAAEAAAABAAAABAAAAAIAAAABAAAABgAAAAEAAAABAAAABwAAAAIAAAABAAAACAAAAAEAAAABAAAACQAAAAIAAAABAAAACgAAAAEAAAABAAAACwAAAAIAAAABAAAADQAAAAEAAAABAAAADgAAAAIAAAABAAAADwAAAAEAAAABAAAAEAAAAAIAAAABAAAAEQAAAAEAAAABAAAAEgAAAAIAAAABAAAAFAAAAAEAAAABAAAAFQAAAAIAAAABAAAAFgAAAAEAAAABAAAAFwAAAAIAAAABAAAAGAAAAAEAAAABAAAAGQAAAAIAAAABAAAAGgAAAAEAAAABAAAAGwAAAAIAAAABAAAAHQAAAAEAAAABAAAAHgAAAAIAAAABAAAAHwAAAAQAAAABAAAA4HN0c3oAAAAAAAAAAAAAADMAAAAaAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAACMc3RjbwAAAAAAAAAfAAAALAAAA1UAAANyAAADhgAAA6IAAAO+AAAD0QAAA+0AAAQAAAAEHAAABC8AAARLAAAEZwAABHoAAASWAAAEqQAABMUAAATYAAAE9AAABRAAAAUjAAAFPwAABVIAAAVuAAAFgQAABZ0AAAWwAAAFzAAABegAAAX7AAAGFwAAAGJ1ZHRhAAAAWm1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAALWlsc3QAAAAlqXRvbwAAAB1kYXRhAAAAAQAAAABMYXZmNTUuMzMuMTAw"),await t.yot(),!e&&await t.bot(i,!1)?"all":await t.bot(i,!0)?"muted":"none")}static async bot(t,i){t.muted=i;const e=t.play();try{if(!pr(e))return!Ro.Qs;const t=kt(250);return await Promise.race([e,t]),!0}catch(t){return!1}finally{t.pause(),t.muted=!0}}static yot(){return new Promise((t=>{if("function"==typeof MessageChannel){const i=new MessageChannel;i.port1.onmessage=()=>t(),i.port2.postMessage("")}else u(t,0)}))}gn(){this.mot.gn()}constructor(t){this.BG=t,this.mot=new La}},Mot:OB,Tot:s};il(),r();(function(t){So=t.hot,Qf=t.wot,Ff=t.Mot,gi=t.Tot,Yf=gi&&gi.location,Vf=gi&&gi.navigator})(Ro.Lf&&Ro.jf?Ei({},RB,{wot:class{Frt(t){return Promise.resolve("all")}Ok(){}gn(){}}}):RB),r(),r(),r(),r();var PB=class{async nG(t){return rS(t.type)}async rG(t){return!!await mu(t,!0)}},zB=class extends PB{async nG(t){return!!qh(t.useManagedMediaSource)&&super.nG(t)}};function yr(t){return qs(t)}function BB(t,i){const e=qs(t);return i?""+e+i:""+e}r(),r();var ir=class{async Sot(t){return(await this.Iot.Not(t.map(yr))).shift()}Dot(t,i){const e=BB(t,i);return this.Eot.Jb(e)}async kot(t,i){var e;const s=BB(t,i);return null==(e=await this.xot.$b(s))?void 0:e.data}VJ(t){return this.Lot.$b(t)}constructor(t,i,e,s){this.Iot=t,this.Eot=i,this.xot=e,this.Lot=s}};r(),r(),r();var UB=class{Cot(t){return Promise.resolve(!1)}jot(t){return Promise.reject(QB)}Oot(t){return Promise.reject(QB)}Jb(t){return Promise.resolve(!1)}$b(t){return Promise.resolve(void 0)}Rot(t,i){return Promise.resolve(void 0)}Not(t){return Promise.resolve([])}Pot(){return Promise.resolve([])}zot(t){return Promise.resolve([])}Bot(t,i){return Promise.resolve([])}wS(t){return Promise.reject(QB)}Uot(t){return Promise.reject(QB)}Qot(){return Promise.reject(QB)}},QB="Storage disabled",FB="Storage disabled";r(),r(),r();var YB=class{get Fot(){return this.My.rM}async Cot(t){return(this.Yot||await this.Fot).Cot(t)}async jot(t,i){return(this.Yot||await this.Fot).jot(t,i)}async Oot(t,i){return(this.Yot||await this.Fot).Oot(t,i)}async Jb(t){return(this.Yot||await this.Fot).Jb(t)}async $b(t){return(this.Yot||await this.Fot).$b(t)}async Rot(t,i){return(this.Yot||await this.Fot).Rot(t,i)}async Not(t){return(this.Yot||await this.Fot).Not(t)}async Pot(){return(this.Yot||await this.Fot).Pot()}async zot(t){return(this.Yot||await this.Fot).zot(t)}async Bot(t,i){return(this.Yot||await this.Fot).Bot(t,i)}async wS(t){return(this.Yot||await this.Fot).wS(t)}async Uot(t){return(this.Yot||await this.Fot).Uot(t)}async Qot(){return(this.Yot||await this.Fot).Qot()}constructor(t){this.My=new xh,this.Yot=void 0,this.My.Sy(t),this.My.rM.then((t=>{this.Yot=t}))}},VB=class{get Vot(){return this.My.rM}async Got(t){const i=this.Wot||await this.Vot;return await i.Got(t)}constructor(t){this.My=new xh,this.Wot=void 0,this.My.Sy(t);const i=this.My.rM;i.then((t=>{this.Wot=t})),this.Zot=new YB(i.then((t=>t.Zot))),this.Hot=new YB(i.then((t=>t.Hot))),this.Xot=new YB(i.then((t=>t.Xot))),this.qot=new YB(i.then((t=>t.qot))),this.Kot=new YB(i.then((t=>t.Kot)))}};function kr(t){return new b("This storage cannot handle persistency type "+t)}r(),r(),r();var _h=function(t){return t.Jot="readonly",t.$ot="readwrite",t}({}),Br=class{Cot(t){return Promise.resolve("temporary"===t)}jot(t,i){return void 0===i&&(i="temporary"),"temporary"!==i?Promise.reject(kr(i)):(this.tht(t.key),this.RM.push(t),Promise.resolve())}Oot(t,i){if(void 0===i&&(i="temporary"),"temporary"!==i)return Promise.reject(kr(i));for(const i of t)this.tht(i.key);for(const i of t)this.RM.push(i);return Promise.resolve()}Jb(t){return Promise.resolve(Boolean(this.iht(t)))}$b(t){return Promise.resolve(this.iht(t))}Rot(t,i){return Promise.resolve(this.eht(t,i))}Not(t){const i=t?t.map((t=>this.iht(t))):this.RM;return Promise.resolve(i.filter($t))}Pot(){return Promise.resolve([...this.RM])}zot(t){return this.Bot(t,"key")}Bot(t,i){const e=this.RM.filter((e=>e[i]===t));return Promise.resolve(e)}wS(t){return this.tht(t),Promise.resolve()}Uot(t){for(const i of t)this.tht(i);return Promise.resolve()}Qot(){return nt(this.RM),Promise.resolve()}iht(t){return this.eht(t,"key")}eht(t,i){for(const e of this.RM)if(e[i]===t)return e}tht(t){const i=this.iht(t);i&&ra(this.RM,i)}constructor(){this.RM=[]}},GB=class t{static Cst(){return Promise.resolve(new t)}Got(t){return t(this)}constructor(){this.Hot=new Br,this.Zot=new Br,this.Xot=new Br,this.qot=new Br,this.Kot=new Br}};r(),r();var WB=class{async Cot(t){for(let i of this.sht)if(await i.Cot(t))return!0;return!1}async jot(t,i){void 0===i&&(i="persistent");for(let e of this.sht)if(await e.Cot(i))return e.jot(t);throw kr(i)}async Oot(t,i){void 0===i&&(i="persistent");for(let e of this.sht)if(await e.Cot(i))return e.Oot(t);throw kr(i)}async Jb(t){for(let i of this.sht)if(await i.Jb(t))return!0;return!1}async $b(t){for(let i of this.sht){const e=await i.$b(t);if(e)return e}}async Rot(t,i){for(let e of this.sht){const s=await e.Rot(t,i);if(s)return s}}async Not(t){const i=[];for(let e of this.sht)i.push(...await e.Not(t));return i}async Pot(){const t=[];for(let i of this.sht)t.push(...await i.Pot());return t}async zot(t){const i=[];for(let e of this.sht)i.push(...await e.zot(t));return i}async Bot(t,i){const e=[];for(let s of this.sht)e.push(...await s.Bot(t,i));return e}async wS(t){for(let i of this.sht)await i.wS(t)}async Uot(t){for(let i of this.sht)await i.Uot(t)}async Qot(){for(let t of this.sht)await t.Qot()}constructor(t){this.sht=t}};function ZB(t){return async()=>{const i=await Promise.all(t.map((t=>t())));return HB.Cst(i)}}var HB=class t{static Cst(i){return Promise.resolve(new t(i))}get qot(){return this.nht}get Kot(){return this.rht}get Xot(){return this.oht}get Hot(){return this.hht}get Zot(){return this.aht}Got(i){if(0===this.uht.length)return i(this);const e=[];let s=0;const n=r=>(e.push(r),s++,s<this.uht.length?this.uht[s].Got(n):i(new t(e)));return this.uht[s].Got(n)}constructor(t){this.uht=t,this.nht=new WB(t.map((t=>t.qot))),this.rht=new WB(t.map((t=>t.Kot))),this.oht=new WB(t.map((t=>t.Xot))),this.hht=new WB(t.map((t=>t.Hot))),this.aht=new WB(t.map((t=>t.Zot)))}},Oh=class t{static ja(i){t.ZY.ja(i)}static get Ld(){return t.cht||(t.cht=t.ZY.Cst()),t.cht}};function XB(t){return void 0!==t.yk}function qB(t){const i=Ro.kf||Ro.Nf,e=void 0!==t&&void 0!==t.preferredAudioCodecs&&t.preferredAudioCodecs.some((t=>"ac-3"===t||"ec-3"===t)),s=i&&!e,n=new wc(!0);return async t=>{const i=t.VN;if(!n.Gp(i)&&!function(t,i){return!!t&&(HA(t)?VI(i)||WI(i):_t(t,Xh.APPLICATION_TTML_XML)||_t(t,Xh.TEXT_VTT)||_t(t,Xh.IMAGE_JPEG))}(t.gX,t.dht))return!1;const e=t.dht.some((t=>"ac-3"===t||"ec-3"===t));if(s&&e)return!1;if(t.GY){const e=t.GY,s=Ms(e,(t=>Lv(t.y8))).filter($t),n=await async function(t,i){for(const e of t)if(await i(e))return!0;return!1}(s,(t=>Fe.AA(t,i)));if(!n)return!1}return!0}}Oh.ZY=new class{Cst(){return new VB(this.fht())}async fht(){this.ght&&(await Promise.resolve(),this.ght=!1);for(const t of this._ht)try{return await ZB([GB.Cst,t])()}catch(t){}return await ZB([GB.Cst,this.vht])()}ja(t){if(!this.ght)throw new b("Registration overdue");this._ht.push(t)}constructor(t){this._ht=[],this.ght=!0,this.vht=t}}(class t{static Cst(){return Promise.resolve(new t)}Got(t){return Promise.reject(FB)}constructor(){this.Hot=new UB,this.Zot=new UB,this.Xot=new UB,this.qot=new UB,this.Kot=new UB}}.Cst),Oh.cht=void 0,r(),r(),r(),Qi(),il(),r(),Qi();var KB=class{get Ti(){return this.wht.offsetHeight*Fe.Ys.bp}get ji(){return this.wht.offsetWidth*Fe.Ys.bp}constructor(t){this.wht=t}};il(),r();var Ir=class{get nt(){return this.Ul}Wk(t,i,e,s,n,r,o,h){const a=new lO(t,i,e,s,n,r,o,void 0,h);return this.Ul.tt(a),this.j7.tt(a),a}BQ(t){this.Ul.it(t),this.j7.it(t),t.gn()}CV(t){const i=new kR(t.Lt,t.kh,t.gs);return this.Ul.tt(i),this.j7.tt(i),i}tr(){for(const t of this.Ul.Ix.slice())t.gn();this.Ul.tr(),this.j7.tr()}gn(){this.tr(),this.Ul.gn(),this.j7.gn()}constructor(t,i){this.Ul=new Cc,this.j7=new uR(t,i)}};r(),r();var Sr=class{sG(t){return this.ZY.sG(t)}got(t){return this.ZY.got(t)}BV(t){return this.ZY.BV(t)}constructor(t){this.ZY=t}};r(),r(),r();var JB=class extends tu{get mht(){return this.cz}get TE(){return this.SE()}SE(){return this.cz.TE}get NE(){return this.DE()}DE(){return this.cz.NE}get xE(){return this.LE()}LE(){return this.cz.xE}get Uu(){return this.cz.Uu}get ct(){return this._d()}_d(){return this.cz.ct}get wV(){return this.pht()}pht(){return this.cz.wV}get OE(){return this.Aht()}Aht(){return this.cz.OE}get lt(){return this.cz.lt}get Ti(){return this.cz.Ti}get ji(){return this.cz.ji}get wa(){return this.Ck()}Ck(){return this.cz.wa}get LV(){return this._a()}_a(){return this.cz.LV}get WE(){return this.cz.WE}set WE(t){this.cz.WE=t}get KE(){return this.yht()}yht(){return this.cz.KE}get $E(){return this.cz.$E}set $E(t){this.cz.$E=t}get rk(){return this.hk()}hk(){return this.cz.rk}get fk(){return this.gk()}gk(){return this.cz.fk}get _k(){return this.vk()}vk(){return this.cz._k}get wk(){return this.pk()}pk(){return this.cz.wk}get G5(){return this.bht()}bht(){return this.cz.G5}get s6(){return this.Mht()}Mht(){return this.cz.s6}get nt(){return this.Ak()}Ak(){return this.Tht}get Ll(){return this.uit()}uit(){return this.cz.Ll}get i7(){return this.cz.i7}get Nk(){return this.cz.Nk}set Nk(t){this.cz.Nk=t}get Ctt(){return this.cz.Ctt}get FE(){return this.cz.FE}get mz(){return this.cz.mz}get zV(){return this.Sht()}set zV(t){this.Nht(t)}Sht(){return this.cz.zV}Nht(t){this.cz.zV=t}get Ptt(){return this.cz.Ptt}set Ptt(t){this.Iht(t)}Iht(t){this.cz.Ptt=t}get m8(){return this.Dht()}Dht(){return this.cz.m8}GE(){return this.cz.GE()}Pk(){return this.cz.Pk()}Rk(){this.cz.Rk()}Wb(t,i,e){this.cz.Wb(t,i,e)}cV(t){this.cz.cV(t)}ge(){this.cz.ge()}be(){this.cz.be()}Wk(t,i,e,s,n,r,o,h){return this.cz.Wk(t,i,e,s,n,r,o,h)}CV(t){return this.cz.CV(t)}DV(){return this.cz.DV()}kV(t,i,e,s,n){return this.cz.kV(t,i,e,s,n)}BQ(t){this.cz.BQ(t)}jV(){this.cz.jV()}H$(t){return this.cz.H$(t)}async $n(t){const i=await this.cz.$n(t);let e;return e=t.YA===uh.QQ?this.Eht(i):this.kht(i),this.vV=e,e}async tr(){this.vV&&(await this.vV.wy(),this.vV=void 0),await this.cz.tr()}xtt(){this.cz.xtt()}Ltt(){this.cz.Ltt()}async wy(){this.Bo(),this.cz.fn(vC,this.xht),this.Tht.xx=void 0,this.Tht.gn(),this.vV&&(await this.vV.wy(),this.vV=void 0)}Ott(){this.cz.Ott()}Lht(t){this.cz.fn(vC,this.xht),this.cz=t,this.Tht.xx=t.nt,this.cz.yn(vC,this.xht)}Vk(t){this.yo(t)}constructor(t){super(),this.vV=void 0,this.Tht=new Ce,this.xht=t=>this.Vk(t),this.cz=t,this.Tht.xx=t.nt,this.cz.yn(vC,this.xht)}},$B=class extends JB{get gV(){return this.cz.gV}get J5(){return this.cz.J5}get Lk(){return this.cz.Lk}set Lk(t){this.cz.Lk=t}Rtt(t){this.cz.Rtt(t)}Fk(){this.cz.Fk()}constructor(t){super(t)}};r(),r(),r();var tU=class{get md(){return this.LS()}LS(){return this.vV.md}get _k(){return this.vk()}vk(){return this.vV._k}N$(t){return this.vV.N$(t)}D$(t){return this.vV.D$(t)}wy(){return Promise.resolve()}constructor(t){this.vV=t}},Tr=class extends tU{get A5(){return this.b5}get y5(){return this.M5}get TE(){return this.SE()}SE(){return this.vV.TE}get ct(){return this._d()}_d(){return this.vV.ct}get F$(){return this.Cht()}Cht(){return this.vV.F$}S5(t){this.vV.S5(t)}E5(t,i,e,s){this.vV.E5(t,i,e,s)}I3(){this.vV.I3()}w3(){this.vV.w3()}wy(){return this.b5&&(this.b5.wy(),this.b5=void 0),this.M5&&(this.M5.wy(),this.M5=void 0),super.wy()}jht(t){this.vV=t,this.b5?t.A5?this.b5.Oht(t.A5):(this.b5.wy(),this.b5=void 0):t.A5&&(this.b5=this.Rht(t.A5),this.b5.yn(br,this.Pht)),this.M5?t.y5?this.M5.Oht(t.y5):(this.M5.wy(),this.M5=void 0):t.y5&&(this.M5=this.Rht(t.y5),this.M5.yn(br,this.Pht))}k$(t){this.vV.k$(t)}zht(t){}constructor(t){super(t),this.b5=void 0,this.M5=void 0,this.Pht=t=>this.zht(t)}};r(),r(),r();var iU=class extends tu{get QK(){return this.XK}set QK(t){this.XK=t}get TE(){return Mo.PP()}get md(){return this.KS}get E3(){return Ri.dI}get L3(){return Mo.PP()}get Bht(){return!1}get PK(){return this.WK}set PK(t){this.WK=t}B4(t,i,e){return Promise.reject(new b("Invalid media buffer"))}P3(){return Promise.reject(new b("Invalid media buffer"))}F4(t,i,e){return Promise.reject(new b("Invalid media buffer"))}F$(){return!1}I3(){}O3(t,i){}R3(t,i){}wS(t,i,e){return Promise.resolve()}s3(t,i){return Promise.reject(new b("Invalid media buffer"))}nB(t,i){return Promise.reject(new b("Invalid media buffer"))}N$(t){return!1}D$(t){return Promise.reject(new b("Invalid media buffer"))}wy(){this.Bo()}constructor(t){super(),this.WK=0,this.XK=0,this.KS=t}},Er=class extends tu{get QK(){return this.Uht()}set QK(t){this.Qht(t)}Uht(){return this.Fht.QK}Qht(t){this.Fht.QK=t}get TE(){return this.SE()}SE(){return this.Fht.TE}get md(){return this.LS()}LS(){return this.Fht.md}get E3(){return this.Fht.E3}get L3(){return this.Yht()}Yht(){return this.Fht.L3}get PK(){return this.Vht()}set PK(t){this.Ght(t)}Vht(){return this.Fht.PK}Ght(t){this.Fht.PK=t}B4(t,i,e){return this.Fht.B4(t,i,e)}P3(){return this.Fht.P3()}F4(t,i,e){return this.Fht.F4(t,i,e)}F$(){return this.Fht.F$()}I3(){this.Fht.I3()}O3(t,i){this.Fht.O3(t,i)}R3(t,i){this.Fht.R3(t,i)}wS(t,i,e){return this.Fht.wS(t,i,e)}s3(t,i){return this.Fht.s3(t,i)}N$(t){return this.Fht.N$(t)}D$(t){return this.Fht.D$(t)}Vk(t){this.yo(t)}wy(){this.Bo(),this.Oht(new iU(this.md))}Oht(t){this.Fht.fn(br,this.Wht),this.Fht=t,this.Fht.yn(br,this.Wht)}constructor(t){super(),this.Wht=t=>this.Vk(t),this.Fht=t,this.Fht.yn(br,this.Wht)}};ds();var eU=class extends Er{get cot(){return this.cz}set cot(t){this.cz=t}async B4(t,i,e){return yi(e),await this.Zht(this.cz.xE,null==i?void 0:i.xst,null==i?void 0:i.ct),yi(e),t.YA===Xi.jN?await this.Hht(t,i,e):await this.Xht(t,i,e)}async Hht(t,i,e){let s=t;for(;;){const[t,n]=Ky(s.rI);s={YA:Xi.jN,rI:t};try{return await this.qht(s,i,e),void n.cancel(new J).catch(ya)}catch(t){if(RL(t)){if(await this.Zht(this.cz.xE,i.xst,i.ct,e)){s={YA:Xi.jN,rI:n};continue}}throw n.cancel(t).catch(ya),t}}}async Xht(t,i,e){for(;;)try{return yi(e),await this.qht(t,i,e)}catch(t){if(RL(t)){if(await this.Zht(this.cz.xE,i.xst,i.ct,e))continue}throw t}}async Zht(t,i,e,s){const n=OL(t,i,e,this.TE,this.PK,this.QK);for(const[t,i]of n)await this.Kht(t,i,s);return n.length>0}qht(t,i,e){return super.B4(t,i,e)}Kht(t,i,e){return super.wS(t,i,e)}constructor(t){super(t),this.cz=void 0}},sU=class extends Tr{get cot(){return this.cz}set cot(t){this.cz=t,this.b5&&(this.b5.cot=t),this.M5&&(this.M5.cot=t)}Rht(t){const i=new eU(t);return i.cot=this.cz,i}constructor(t){super(t),this.cz=void 0,this.jht(t)}};r();var Jo=class extends tU{get ck(){return this.vV.ck}set ck(t){this.vV.ck=t}};r();var nU=class extends JB{get gV(){return this.cz.gV}get J5(){return this.cz.J5}get Tk(){return this.cz.Tk}get yk(){return this.cz.yk}get Lk(){return this.cz.Lk}set Lk(t){this.cz.Lk=t}Rtt(t){this.cz.Rtt(t)}Fk(){this.cz.Fk()}jk(){return this.cz.jk()}constructor(t){super(t)}},rU=class extends $B{get mht(){return this.cz}kht(t){const i=new sU(t);return i.cot=this,i}Eht(t){return new Jo(t)}},oU=class extends nU{get mht(){return this.cz}kht(t){const i=new sU(t);return i.cot=this,i}Eht(t){return new Jo(t)}},es=class extends Sr{sG(t){return t===Ri.NI?new oU(super.sG(t)):t===Ri.SI?new rU(super.sG(t)):void 0}async BV(t){const i=t;await i.wy(),await super.BV(i.mht)}};r();var hU=class{Jht(){this.ta.Yk()}gn(){s.removeEventListener("pageshow",this.$ht)}constructor(t){this.$ht=t=>{t.persisted&&this.Jht()},this.ta=t,s.addEventListener("pageshow",this.$ht)}};r(),r(),r(),r(),r();var aU=class{iat(t,i,e){return Promise.resolve()}eat(t,i,e,s){let n=[];if(s){const r={sQ:i.lB,nQ:i.dB,rQ:e.sat.rQ};s.YA===El.TTML?n=SI(t,s,r,e.gX):s.YA===El.WEBVTT&&(n=UN(t,r,this.nat).L)}return n}tr(){}constructor(t){this.nat=t}};r(),r(),r();var ji=function(t){return t.gC="vttc",t.rat="vsid",t.oat="iden",t.aat="ctim",t.uat="sttg",t.dat="payl",t.fat="vtte",t.gat="vtta",t}({}),uU=class t{static _at(i){return Boolean(t.vat[i])}static dj(i){const e=[],s=Z.qC(new Bt(i,new da));for(const i of s)t._at(i.YA)&&e.push(t.vat[i.YA](i.rI));return e}static wat(i){const e=Z.qC(i),s=go(e,ji.rat),n=go(e,ji.oat),r=go(e,ji.aat),o=go(e,ji.uat),h=go(e,ji.dat);return{YA:ji.gC,mat:s?t.pat(s):void 0,Aat:n?t.yat(n):void 0,bat:r?t.Mat(r):void 0,Tat:o?t.Sat(o):void 0,Nat:h?t.Iat(h):void 0}}static pat(t){return{YA:ji.rat,Dat:t.QC()}}static yat(t){return{YA:ji.oat,Aat:t.WC()}}static Mat(t){return{YA:ji.aat,Eat:t.WC()}}static Sat(t){return{YA:ji.uat,xat:t.WC()}}static Iat(t){return{YA:ji.dat,Lat:t.WC()}}static Cat(t){return{YA:ji.fat}}static jat(t){return{YA:ji.gat,Oat:t.WC()}}};uU.vat={[ji.gC]:uU.wat,[ji.fat]:uU.Cat,[ji.gat]:uU.jat},Qi();var cU=class{iat(t,i,e){const s=new DataView(t.Rat),n=Rs.dj(s),r=dl(n,(t=>t.YA===Rt.kL));return r&&(this.Pat=r.Z[0].zj.nj.Lj),Promise.resolve()}eat(t,i,e){if(j(this.Pat))return[];const s=Al(t),n=Rs.dj(s),r=cT(n,Rt.mC),o=cT(n,Rt.SC);if(!r||0===r.Z.length||!o)return[];const h=function(t,i,e){const s=t.Z[0],n=s.MR?s.MR.MR.toNumber()/e:i.lB,r=[];for(const t of s.bR)r.push(...t.kR);return{zat:n,kR:r}}(r,i,this.Pat),a=e.sat.rQ;return function(t,i,e,s){const n=uU.dj(Al(i.rI)),r=t.kR,o=t.zat+s,h=[];let a=0;for(let t=0;t<r.length;t++){const i=r[t],s=n[t];var u;const c=(null!=(u=i.ct)?u:0)/e;let l;s.YA===ji.gC&&(l=lU(s,a,c,o)),l&&h.push(l),a+=c}return h}(h,o,this.Pat,a)}tr(){this.Pat=NaN}constructor(){this.Pat=NaN}};function lU(t,i,e,s){if(!t.Nat)return void 0;const n=t.bat?function(t){return JN(t.Eat,new da(0))}(t.bat):i,r=s+n,o=r+e,h=t.Nat.Lat;return new Ht(r,o,h,!1)}r(),r(),r();var dU=class t extends tD{get Bat(){return this.Uat}set Bat(t){this.Uat=t}get Rt(){for(const t of this.Z.Ix)if(t.UI!==lc.Ch)return!0;return!1}async $n(t){await this.tr(),this.Qat=t,this.Fat(t)}Fat(t){for(const i of t.Yat){const t=this.Vat(i);this.Gat(t,i),t.fk=Ma.LOADED,this.tt(t)}}it(t){this.Wat(t),super.it(t)}EQ(t){const i=this.Zat(t);if(i&&this.Bat!==i){this.Bat=i;for(const t of this.Z.Ix)t!==i&&(t.UI=lc.Ch)}}kQ(t){const i=this.Zat(t);i&&this.Bat===i&&(this.Bat=void 0)}Zat(t){return dl(this.Z.Ix,(i=>t.Gx===i.Gx))}Gat(t,i){this.Hat.set(t.Gx,i)}Xat(t){return this.Hat.get(t.Gx)}Wat(t){this.Hat.delete(t.Gx)}qat(){if(!this.Bat)return;const i=this.Xat(this.Bat);return i?t.Kat(i):void 0}static Kat(t){return t.Jat&&t.Jat.length>0?t.Jat[0]:void 0}constructor(...t){super(...t),this.Hat=pc()}};r(),Qi();var fU=function(t){return t[t.nW=0]="nW",t[t.$at=1]="$at",t[t.tut=10]="tut",t[t.iut=11]="iut",t[t.eut=12]="eut",t[t.sut=13]="sut",t[t.nut=14]="nut",t[t.rut=15]="rut",t[t.out=20]="out",t[t.hut=21]="hut",t[t.aut=22]="aut",t[t.uut=23]="uut",t[t.cut=24]="cut",t[t.lut=30]="lut",t[t.fut=31]="fut",t[t.gut=32]="gut",t[t._ut=33]="_ut",t[t.vut=34]="vut",t[t.wut=35]="wut",t[t.mut=40]="mut",t[t.Aut=41]="Aut",t[t.yut=42]="yut",t[t.but=43]="but",t[t.Mut=44]="Mut",t[t.Tut=50]="Tut",t[t.Sut=51]="Sut",t[t.Nut=52]="Nut",t[t.Iut=60]="Iut",t[t.Dut=61]="Dut",t[t.Eut=62]="Eut",t[t.kut=63]="kut",t[t.xut=70]="xut",t[t.Lut=71]="Lut",t[t.Cut=72]="Cut",t[t.jut=73]="jut",t[t.Out=74]="Out",t[t.Rut=75]="Rut",t[t.Put=76]="Put",t[t.zut=77]="zut",t[t.But=90]="But",t[t.Uut=91]="Uut",t}({});function gU(t,i){const e=i.DP(((i,e)=>t.SP(i,e,!1,!1)));return t.pP(e)}function _U(t,i){const e=i.Sn(t._P()).DP(((i,e)=>t.gr(e)));return t.pP(e)}r(),r(),r(),r();var ea=function(t){return t.Qut="Fut",t.Yut="Vut",t}({});Qi(),ds(),r();var vU=class extends Co{constructor(t,i,e){super("Gut"),this.Cn=t,this.jn=i,this.Wut=e}},wU=class extends Jr{constructor(){super("Zut")}},mU=[Zi.Sb,Zi.Ib,Zi.Tb,Zi.Qy],pU=class extends tu{get Hut(){var t,i;return(null==(t=this.qut.Xut)?void 0:t.Wut)||(null==(i=this.qut.Kut)?void 0:i.Wut)}get Jut(){return this.$ut}set tct(t){this.qut.tct=t}get tct(){return this.qut.tct}get nI(){return this.ict}ect(t){this.ict!==t&&(this.ict=t,this.yo(new wU))}get sct(){return this.$ut.Ht.sct}get lt(){return this.dV}async Cn(t){if(!this.nct&&!this.rct)return;const i=this.zy("Zut");this.nct?(this.hct.Ty(),this.hct=new Wt,Vh(this.act(this.hct.ly),this.hct)):(this.uct.sM(void 0),this.uct=new xh),await i}get nct(){return"cct"===this.ict}get rct(){return"lct"===this.ict}get dct(){return"fct"===this.ict}get gct(){return"_ct"===this.ict}async zk(t){if(this.dct||this.rct)for(0,this.hct.Ty();!this.nct&&!this.gct;)await this.zy("Zut")}async tr(t){this.gct?(this.dV=void 0,this.ect("cct")):await this.zk(t),this.qut.tr(),this.$ut.tr()}eG(t){this.dV=t,this.ect("_ct"),this.yo(new Uc(t))}vct(){this.j8.yn(Zi.Eb,this.ld),this.j8.yn([Zi.Mb,Zi.eb],this.We),this.qut.yn(mU,this.Ds),this.wct.yn(ea.Qut,this.ld)}mct(){this.j8.fn(Zi.Eb,this.ld),this.j8.fn([Zi.Mb,Zi.eb],this.We),this.qut.fn(mU,this.Ds),this.wct.fn(ea.Qut,this.ld)}async pct(t){this.mct(),this.Act.Ty(),await this.zk(null!=t?t:fU.but),this.qut.tr()}async yct(t){this.vct(),await this.Cn(null!=t?t:fU.rut)}bct(t,i,e){if(this.nct)for(const s of t.$ut.Mct())s.Tct<=e&&i<=s.Sct&&this.wct.Jat.some((t=>t.o===s.Nct))&&this.$ut.Ict(s)}async gn(){this.Bo(),this.mct(),this.Act.Ty(),await this.zk(fU.Mut),this.qut.gn()}async act(t){for(;;)try{yi(t),this.ect("fct"),await this.qut.Dct(t),yi(t),this.ect("lct"),await Ao(this.uct.rM,t)}catch(t){if(Tu(t))this.ect("cct");else{const i=t instanceof qi?t:new qi(vt.MEDIA_LOAD_ERROR,t.message,t);this.eG(i)}break}}async Ect(t){yi(t),await this.zk(fU.yut),this.qut.tr(),yi(t),await this.Cn(fU.sut)}constructor(t,i,e,s,n){super(),this.kct=t,this.wct=i,this.$ut=e,this.qut=s,this.j8=n,this.ict="cct",this.dV=void 0,this.uct=new xh,this.Act=new Wt,this.hct=new Wt,this.We=t=>{if(this.nct||this.gct)return;if(!Fe.lE&&this.qut.xct(t.currentTime))return;this.Act.Ty(),this.Act=new Wt;Vh(this.Ect(this.Act.ly),this.Act).catch(Ct)},this.ld=Yh((()=>{if(this.rct){try{this.qut.Lct();if(this.qut.Cct())return}catch(t){if(!(t instanceof vU))throw t}this.Cn(fU.nut)}}),250),this.vct()}};r(),ds(),Qi(),r(),Qi();var AU=class t{jct(t,i){return this.Oct(t,!1,i)}Rct(t,i){return this.Oct(t,!0,i)}async Oct(i,e,s){yi(s.ly);const n=await this.Pct(i,e,s);return n.XN?t.zct(n):this.Bct(n)}Bct(t){return t}static zct(t){return t}Pct(t,i,e){var s;const n=new Gs({zu:t.zu,oI:Ee.LN,aI:t.Uct?{Range:"bytes="+t.Uct[0]+"-"+(null!=(s=t.Uct[1])?s:"")}:void 0,zI:t.zI,LI:Ve.GET,YA:ar.gI,OI:i?cl.wI:cl.dI,RI:this.Qct,CI:e.Fct,jI:e.jI,ly:e.ly,QI:e.QI});return this.OQ.hI(n)}constructor(t,i){this.OQ=t,this.Qct=i}};r(),r(),Qi();var yU=class{Yct(t,i){const e=this.Vct**t,s=i*(1-e)+e*this.Tst;j(s)||(this.Tst=s,this.Gct+=t)}Wct(){const t=1-this.Vct**this.Gct;return this.Tst/t}constructor(t){this.Tst=0,this.Gct=0,this.Vct=x.exp(x.log(.5)/t)}},bU=class{Yct(t,i){const e=8e3*i/t,s=t/1e3;this.Zct+=i,this.Hct.Yct(s,e),this.Xct.Yct(s,e)}Wct(){return this.qct()?x.min(this.Hct.Wct(),this.Xct.Wct()):this.Kct}qct(){return this.Zct>=this.Jct}constructor(t=2,i=5,e=128e3){this.Zct=0,this.Kct=BE,this.Hct=new yU(t),this.Xct=new yU(i),this.Jct=e}},MU=class{get $ct(){return this.tlt.Wct()}get qct(){return this.tlt.qct()}ilt(t){const i=t.elt,e=this.slt?t.nlt-t.rlt:t.nlt-t.olt,s=t.hlt;!s&&i<this.ult||(s?this.tlt.Yct(2*e,i):this.tlt.Yct(e,i))}constructor(t,i){this.slt=i,i&&ou(t)?t===Ri.NI?(this.ult=5e3,this.tlt=new bU(.05,1,0)):(this.ult=0,this.tlt=new bU(.005,.1,0)):(this.ult=16e3,this.tlt=new bU)}};r(),r(),r(),ds();var TU=class{transform(t,i){this.o_.write(t).catch(ya),i.enqueue(t)}flush(){this.o_.close().catch(ya)}constructor(t){this.o_=t}},SU=class{clt(){return new NU(Zy(this.Rat),this.llt,this.dlt)}constructor(t,i,e){this.Rat=t,this.llt=i,this.dlt=e}},NU=class t{get YN(){return this.flt}FN(t){return Xy(this.flt,t)}Zb(){const[i,e]=Ky(this.flt);return this.flt=i,new t(e,this.llt,this.dlt)}glt(){const[i,e]=function(t){const i=new Ra,e=i.writable.getWriter(),s=new Ra(new TU(e));return t.pipeTo(s.writable).catch((t=>{e.abort(t).catch(ya)})),[s.readable,i.readable]}(this.flt);return this.flt=i,new t(e,this.llt,this.dlt)}_lt(t){return this.FN(t).then((t=>new SU(t,this.llt,this.dlt)))}constructor(t,i,e){this.flt=t,this.llt=i,this.dlt=e}};r();var IU=class extends Co{constructor(t,i,e){super(i,e),this.vlt=t}},DU="Cache lookup failed.",EU=class extends tu{async wlt(t,i){yi(i);const e=await this.plt.kot(t.zu.zu,t.zu.Uct);if(yi(i),!e)throw new IU(t,DU);const s=new SU(e.buffer,e.byteLength,e.reference);return{vlt:t.vlt,Alt:{YA:Xi.v$,rI:s},Wut:t.Wut,zu:t.zu}}async ylt(t,i){yi(i);const e=await this.plt.kot(t.zu,t.Uct);if(yi(i),!e)throw new IU(t,DU);const s=new SU(e.buffer,e.byteLength,e.reference);return{YA:Xi.v$,rI:s}}gn(){this.Bo()}constructor(t){super(),this.plt=t}};r();var kU=["Nb","Db"],xU=class extends tu{async wlt(t,i){let e;for(const s of this.blt)try{return await s.wlt(t,i)}catch(t){X(t),e=t}throw e}async ylt(t,i){let e;for(const s of this.blt)try{return await s.ylt(t,i)}catch(t){X(t),e=t}throw e}gn(){for(const t of this.blt)t.fn(kU,this.Ds),t.gn()}constructor(t){super(),this.blt=t;for(const t of this.blt)t.yn(kU,this.Ds)}};function Ko(t){return $a(t.Mlt)}function LU(t){return Ko(t)?t.Mlt:t.Tlt}r(),r(),r(),r();var CU=class extends Jr{constructor(t,i,e,s,n,r){super(t),this.Slt=i,this.YZ=e,this.mR=s,this.Fj=n,this.RI=r}},jU=class extends CU{constructor(t,i,e,s,n){super(Zi.Sb,t,i,e,s,n)}};r(),Qi(),ds(),r(),Qi();var OU=class{constructor(t,i){this.Nlt=t,this.Ilt=i}},RU=class extends OU{get elt(){return this.Dlt}start(){}transform(t,i){this.Dlt+=t.byteLength,i.enqueue(t)}flush(){this.Elt(!1)}Ty(){this.Elt(!0)}Elt(t){this.Nlt(this.Ilt,Fe.Og(),this.elt,t)}constructor(...t){super(...t),this.Dlt=0}},PU=class extends OU{get elt(){return this.Dlt}start(){this.Ilt=Fe.Og()}transform(t,i){this.Dlt+=t.byteLength,this.klt||this.xlt(t)&&this.Elt(!1),i.enqueue(t)}flush(){}Ty(){this.Elt(!0)}xlt(t){const i=this.Llt(t),e=this.Clt(i);return Boolean(dl(e,zU))}Llt(t){return this.jlt&&void 0!==this.Olt?(this.jlt=ih([this.jlt,t]),new Bt(Al(this.jlt),new da(this.Olt))):(this.jlt=t,new Bt(Al(t),new da))}Clt(t){const i=Z.KC(t.rI,t.OC,!0);return i.JC?(this.jlt=void 0,this.Olt=void 0):this.Olt=t.OC.tc,i.m}Elt(t){this.klt||(this.Nlt(this.Ilt,Fe.Og(),this.elt,t),this.klt=!0)}constructor(...t){super(...t),this.Dlt=0,this.klt=!1}};function zU(t){return t.YA===Rt.SC}var BU=class{Rlt(t){const i=t.cI?this.Plt:Fe.Og(),e=this.zlt(i),s=new Ra(e),n=t.YN().pipeTo(s.writable).then((()=>({VE:{elt:e.elt}})),(t=>{throw e.Ty(),t}));return this.Blt.Sy(n),s.readable}Ult(t){const i=t.cI?this.Plt:Fe.Og(),e=t.FN(),s=e.then((t=>{const e=Fe.Og();return this.ilt(i,e,t.byteLength,!1),{VE:{elt:t.byteLength}}}),(t=>{const e=Fe.Og();throw this.ilt(i,e,0,!0),t}));return this.Blt.Sy(s),e}get Qlt(){return this.Blt.rM}constructor(t){this.Flt=t,this.Blt=new xh,this.ilt=(t,i,e,s)=>{const n={olt:this.Plt,rlt:t,nlt:i,elt:e,hlt:s};this.Flt.ilt(n),this.Flt.qct&&_i.Ld.DY(this.Flt.$ct)},this.Blt.rM.catch(ya),this.Plt=Fe.Og()}},UU=class extends BU{zlt(t){return new RU(this.ilt,t)}},QU=class extends BU{zlt(t){return new PU(this.ilt,t)}};r();var FU=class extends CU{constructor(t,i,e,s,n,r,o){super(Zi.Ib,t,i,e,s,n),this.Ylt=r,this.Yz=o}};r();var YU=class extends Co{constructor(t,i,e){super("Error downloading segment "+LU(i),t),this.Vlt=i.lB,this.Glt=i.dB,this.Wlt=e}},VU=class extends tu{Zlt(){return this.slt?new QU(this.Flt):new UU(this.Flt)}async wlt(t,i){yi(i);const e=t.Wut,s=t.zu,n=t.vlt,r=LU(n),o=e.Wut?e.Wut.Gx:-1,h=function(t){const i=t.Wut;let e;e=i===function(t){return t.Jat.reduce(((t,i)=>t.FY<i.FY?t:i))}(i.Hlt)?Df(5*t.vlt.ct):Df(1.2*t.vlt.ct);return ur(e,1e3,18e3)}(t);this.yo(new jU(s,e.FY,r,o,e.YA));try{const t=this.Zlt(),a=await this.Xlt.jct(s,{QI:this.slt,Fct:h,ly:i}),u=await this.qlt(a,a.XN,i,t);return V(this.Klt(t.Qlt,e,s,r,o,a)),{Alt:u,Wut:e,vlt:n,zu:s}}catch(t){throw X(t),new YU(t,n,e)}}async ylt(t,i){yi(i);const e=await this.Xlt.Rct(t,{QI:false,Fct:1e4,ly:i});return await this.qlt(e,false,i)}async qlt(t,i,e,s){if(i){const i=s?s.Rlt(t):t.YN();return{YA:Xi.jN,rI:new NU(i)}}{const i=s?await s.Ult(t):await t.FN(e);return{YA:Xi.v$,rI:new SU(i)}}}async Klt(t,i,e,s,n,r){try{const o=await t;this.yo(new FU(e,i.FY,s,n,i.YA,r.nI,o.VE.elt))}catch(t){}}gn(){this.Bo()}constructor(t,i,e){super(),this.Xlt=t,this.Flt=i,this.slt=e}};r();var GU=.001,WU=class{get TE(){return this.Jlt.TE}get $lt(){return this.Jlt.$lt}get J$(){return this.Jlt.J$}get tdt(){if(this.X3.fk<Fn.Xn)return!1;if(this.Jlt.jn<=this.idt&&this.Jlt.edt())return!0;const t=this.Jlt.uV;if(!t||0===t.V)return!1;const i=Mo.RP(this.j8.xE,1/0);return t.Sn(i).yP(this.Jlt.J$).jP>=this.UG.ZK}get idt(){const t=this.Jlt.uV;let i;if(t&&t.V>0)i=t.jn(0);else{i=this.j8.xE;const t=this.Jlt.J$,e=t.bP(i);e>=0&&(i=t.jn(e))}const e=this.Jlt._k.Cn(0);if(e>i){if(this.Jlt.Cn<=i&&this.Jlt.jn>=i&&e>i+GU)throw new vU(i,e);i=e}return i=this.Jlt.sdt.gP(i),i}constructor(t,i,e,s){this.Jlt=t,this.j8=i,this.X3=e,this.UG=s}};r();var ZU=class{get ndt(){if(0===this.Hv.size)return this.rdt;let t=Mo.RP(0,1/0);return t=t.Sn(this.rdt),this.Hv.forEach((i=>{t=t.Sn(i)})),t}odt(t){return this.Hv.get(t.o)}hdt(){let t=this.rdt;return this.Hv.forEach((i=>{t=t.pP(i)})),t}adt(t){if(this.rdt.gr(t))return!0;let i=!1;return this.Hv.forEach((e=>{i=i||e.gr(t)})),i}udt(t,i){const e=this.Hv.get(i.o);return!!e&&e.gr(t)}MP(t,i){if(this.rdt.MP(t,i))return!0;let e=!1;return this.Hv.forEach((s=>{e=e||s.MP(t,i)})),e}cdt(t,i){const e=this.Hv.get(i),s=e?e.pP(t):t;this.Hv.set(i,s),this.rdt=this.rdt.pP(t)}ldt(t){this.Hv.forEach(((i,e)=>{this.Hv.set(e,i.pP(t))})),this.rdt=this.rdt.pP(t)}ddt(t){this.Hv.forEach(((i,e)=>{this.Hv.set(e,i.Sn(t))})),this.rdt=this.rdt.Sn(t)}tr(){this.Hv.forEach(((t,i)=>{this.Hv.set(i,Mo.PP())})),this.rdt=Mo.PP()}constructor(){this.Hv=ll(),this.rdt=Mo.PP()}},HU=class{get fdt(){return this.gdt}get J$(){return this.t0}_dt(t){for(const i of this.Zot){if(i.Tct>t)break;if(i.Sct>t)return i}}vdt(t){for(const i of this.Zot){if(i.wdt>t)break;if(i.mdt>=t)return i}}pdt(t,i){const e=[];for(const s of this.Zot){if(s.Tct>t)break;s.Sct>=i&&e.push(s)}return e}Mct(){return this.Zot}Ict(t){const i=Mo.RP(t.wdt,t.mdt),e=i._P();this.gdt.ddt(e),this.gdt.cdt(i,t.Nct),this.Adt(e);const s=Jv(this.Zot,(i=>t.Tct<=i.Tct));if(s<0)this.Zot.push(t);else{this.Zot[s].Sct<=t.Sct?this.Zot.splice(s,1,t):this.Zot.splice(s,0,t)}}i0(t,i){this.t0.cdt(t,i)}ydt(t){this.t0.ldt(t)}ddt(t){this.gdt.ddt(t),this.t0.ddt(t);const i=this.gdt.hdt();this.Adt(i)}Adt(t){this.Zot=this.Zot.filter((i=>t.SP(i.wdt,i.mdt))).map((i=>i.bdt&&!t.MP(i.wdt,i.mdt)?function(t,i){return{Nct:t.Nct,Tct:t.Tct,Sct:t.Sct,wdt:t.wdt,mdt:t.mdt,bdt:i}}(i,!1):i))}tr(){this.gdt.tr(),this.t0.tr(),this.Zot=[]}gn(){this.tr()}constructor(t){this.Zot=[],this.Ht=t,this.gdt=new ZU,this.t0=new ZU}};r(),r();var XU=class{get tct(){return this.Mdt}set tct(t){this.Mdt=t}get sct(){return this.$ut.Ht.sct}async Tdt(t,i,e){let s;yi(e);const n=this.$ut.vdt(t);s=n&&ce(n.mdt,t,1e-5)?n.Sct:t;const r=this.Sdt(s),o=function(t){return qU.bind(void 0,t)}(s);let h=await this.$p.Ndt(o,r,i,e);for(yi(e);h&&this.Idt(h.vlt);){const t=tQ(h.vlt),s=h.Wut;h=await this.$p.Ndt(t,[s],i,e),yi(e)}if(!h)return void 0;if(!this.Ddt(h.vlt))return h;const a=this.Edt(h.vlt);if(t<a.Cn)return await this.findFirstNonAppendedSegmentBeforeSegment(h,i,e,a);if(t>=a.jn)return await this.findFirstNonAppendedSegmentAfterSegment(h,i,e);if(!h.Wut.kdt(h.vlt))throw new b("Fatal buffering error")}async findFirstNonAppendedSegmentAfterSegment(t,i,e){let s=t;do{const n=tQ(s.vlt),r=t.Wut;s=await this.$p.Ndt(n,[r],i,e),yi(e)}while(s&&this.Ddt(s.vlt));if(s)return s}async findFirstNonAppendedSegmentBeforeSegment(t,i,e,s){let n=t;do{const s=$U(n.vlt),r=t.Wut;n=await this.$p.Ndt(s,[r],i,e),yi(e)}while(n&&this.Ddt(n.vlt));if(!n){0;const i=t.Wut.xdt.Cn;throw new vU(i,s.Cn,t.Wut)}return n}Ldt(t){return this.$ut.fdt.adt(t)}Cdt(t){return this.$ut.pdt(t.lB,t.dB)}Ddt(t){const i=this.Cdt(t);return i.length>0&&function(t,i){return function(t){let i=Mo.PP();for(const e of t)i=i.pP(Mo.RP(e.Tct,e.Sct));return i}(t).MP(i.lB,i.dB)}(i,t)&&i.every(iQ)}Idt(t){return this.$ut.J$.MP(t.lB,t.dB)}Edt(t){const i=this.Cdt(t);return{Cn:i[0].wdt,jn:i[i.length-1].mdt}}Sdt(t){const i=this.jdt(t);if(0===i.length){const t=this.Mdt?this.Mdt:this.$ut.Ht.Jat;return[t[t.length-1]]}const e=i.filter((t=>{var i;return(null==(i=t.Wut)?void 0:i.fot)&&!t.Odt}));return e.length>0?e:[i[i.length-1]]}jdt(t){return(this.Mdt?this.Mdt:this.$ut.Ht.Jat).filter((i=>!this.$ut.J$.udt(t,i)))}constructor(t,i,e){this.kct=t,this.$ut=i,this.$p=e}};async function qU(t,i,e,s){const n=i.sat.Rdt(t);if(n){if(i.Pdt(n)){return(await i.Bdt(n,e,s)).zdt(t)}return n}}async function KU(t,i,e,s){if(Ko(t)){if(0===t.Mlt)return;const n=i.sat.Udt(t);if(!n)return;return(await i.Bdt(n,e,s)).Qdt(t.Mlt-1)}return i.sat.Fdt(t)}async function JU(t,i,e,s){if(Ko(t)){const n=i.sat.Udt(t);if(!n)return;const r=await i.Bdt(n,e,s);if(t.Mlt+1===r.V)return;return r.Qdt(t.Mlt+1)}return i.sat.Ydt(t)}function $U(t){return KU.bind(void 0,t)}function tQ(t){return JU.bind(void 0,t)}function iQ(t){return t.bdt}r();var eQ=class{async Ndt(t,i,e,s){yi(s);const n=this.Vdt(i,e);if(!n)return;const r=await t(n,this.Gdt,s);if(!r)return;const o=n.Wdt(r);return{Wut:n,vlt:r,zu:o}}Vdt(t,i){if(0===t.length)return;const e=this.Hdt.Zdt(t,this.Xdt?i:void 0,this.Jlt,this.UG.VK);return this.Xdt||(this.Xdt=!0),e}constructor(t,i,e,s){this.Hdt=t,this.Jlt=i,this.UG=e,this.Gdt=s,this.Xdt=!1}};r();var sQ=class{async Ndt(t,i,e,s){yi(s);const n=this.Hdt.qdt(i,e,this.Jlt);if(!n.length)return;let r;for(const i of n)try{yi(s);const e=await t(i,this.Gdt,s);if(e){const t=i.Wdt(e);if(await this.plt.Dot(t.zu,t.Uct))return{vlt:e,Wut:i,zu:t}}}catch(t){X(t),r=t}if(r)throw r}constructor(t,i,e,s){this.Hdt=t,this.Jlt=i,this.plt=e,this.Gdt=s}};function nQ(t){return void 0!==t.$E}function rQ(t,i){const e=t.ji&&i.ji,s=t.Ti&&i.Ti;if(e||s){if(e&&s)return t.ji*t.Ti-i.ji*i.Ti;if(e)return t.ji-i.ji;if(s)return t.Ti-i.Ti;return(t.ji||1)*(t.Ti||1)-(i.ji||1)*(i.Ti||1)}return 0}function oQ(t,i){return rQ(t,i)||function(t,i){return t.FY-i.FY}(t,i)}r(),r();var fl=class t{Zdt(i,e,s,n){let r=t.sortByQuality(i);if(void 0!==this.Kdt&&void 0===e&&i.length>1){const i=t.Jdt(r,this.Kdt);i&&(r=i)}const o=this.qdt(r,e,s,n);return o.length?o[o.length-1]:r[0]}qdt(i,e,s,n){var r;const o=t.sortByQuality(i),h={$ct:void 0===n||this.$dt.qct?this.$dt.$ct:n,$E:nQ(s)&&s.$E?s.$E:1,tft:s.ji,ift:s.Ti,eft:null==(r=this.sft)?void 0:r.restrictToPlayerSize};let a=o;for(const t of this.Lv)a=t(a,e,h,this.NA,this.nft);return a}static rft(i){return t.sortByQuality(i)[0]}static oft(i,e){var s;return e?t.rft(null!=(s=t.Jdt(i,e))?s:i):t.rft(i)}static Jdt(t,i){for(const e of i){const i=t.filter((t=>Wo(t.Qp,e)));if(i.length>0)return i}}static sortByQuality(t){const i=[...t];return i.sort(oQ),i}constructor(t,i,e,s,n,r){this.Lv=t,this.$dt=i,this.NA=e,this.sft=s,this.Kdt=n,this.nft=r}};r();var hQ=(t,i,e,s,n)=>t.filter((t=>n.N$(t)&&s.Pp(i,t)));r();var aQ=(t,i,e)=>t.filter((t=>function(t,i,e){const s=e.$ct;if(s<=0)return!1;return.8*s>t.FY*e.$E}(t,0,e)));r();var uQ=(t,i,e,s,n)=>{const r=e.eft;if(void 0===r&&!s.Qs)return t;if(!1===r)return t;if(t.length>0&&t[0].YA!==Ri.NI)return t;for(let i=t.length-1;i>=0;i--){const s=t[i];if(s.Ti===e.ift&&s.ji===e.tft)return t.slice(0,i+1);if(s.Ti<e.ift||s.ji<e.tft)return t.slice(0,i+2)}return[]};r();var cQ=class{async Ndt(t,i,e,s){let n;for(const r of this.hft)try{const n=await r.Ndt(t,i,e,s);if(n)return n}catch(t){n=t}if(n)throw n}constructor(t){this.hft=t}};r(),r();var lQ=class{async aft(t,i,e,s){let n;for(const r of this.uft)try{return await r.aft(t,i,e,s)}catch(t){X(t),n=t}throw n}constructor(t){this.uft=t}};r();var dQ=class{async aft(t,i,e,s){var n;const r=await this.OQ.hI({zu:t,oI:Ee.LN,aI:i?{Range:"bytes="+i[0]+"-"+(null!=(n=i[1])?n:"")}:void 0,zI:e,LI:Ve.GET,YA:ar.dI,ly:s});return await r.FN()}constructor(t){this.OQ=t}};r();var fQ=class{async aft(t,i,e,s){const n=await this.plt.kot(t,i);if(n)return n.buffer;if(i){const e=await this.plt.kot(t);if(e)return vi(new T(e.buffer),i[0],i[1])}throw new IU({zu:t,Uct:i,zI:!1})}constructor(t){this.plt=t}};Qi(),r();var gQ=1.05,_Q=(t,i,e,s)=>{if(!1===e.eft)return t;if(s.Ap)return t;const n=s.yp;var r;const o=(null!=(r=null==n?void 0:n.width)?r:e.tft)*gQ;var h;const a=(null!=(h=null==n?void 0:n.height)?h:e.ift)*gQ;for(let i=t.length-1;i>=0;i--){const e=t[i];if(e.Ti<=a&&e.ji<=o)return t.slice(0,i+1)}return[]},vQ=class{static Cst(t,i,e,s,n,r,o,h,a,u){const c=function(t,i){return new lQ([new fQ(i),new dQ(t)])}(r,o),l=new fl([hQ],n,Fe.Ys,h,a,u),d=new sQ(l,i,o,c),f=new fl([aQ,hQ,uQ,_Q],n,Fe.Ys,h,a,u),g=new eQ(f,i,s,c),_=new cQ([d,g]);return new XU(t,e,_)}};r();var wQ=class{cft(t,i,e,s){return this.Jlt.cft(t,i,e,s)}lft(t,i,e){return this.Jlt.iat(t,i,e)}dft(t,i,e){return this.Jlt.dft(t,i,e)}i0(t,i){this.Jlt.i0(t,i)}e0(t,i){this.Jlt.e0(t,i)}I3(){this.Jlt.I3()}JK(){return this.Jlt.JK()}constructor(t){this.Jlt=t}};r(),r();var mQ=class extends Jr{constructor(t,i,e,s,n,r=0){super(Zi.Tb),this.segmentStartTime=t,this.error=i,this.trackType=e,this.track=s,this.quality=n,this.retryCount=r}};r();var pQ=class extends Jr{constructor(t,i){super(Zi.Qy),this.track=t,this.segments=i}};Qi();var AQ=class extends Co{constructor(t,i){super(i),this.fft=t}},yQ=[Zi.Sb,Zi.Ib],bQ=class extends tu{get Xut(){return this.gft}get Kut(){return this._ft}set tct(t){this.vft.tct=t}get tct(){return this.vft.tct}get sct(){return this.$ut.Ht.sct}wft(t){return!this.H4||!t||!Yn(this.H4.Rat,t.Rat)}xct(t){if(!this.gft)return!1;const i=this.gft.vlt,e=Mo.RP(i.lB,i.dB),s=this.mft.$lt,n=s.bP(t);return n<0?e.gr(t,GU):e.SP(t,s.jn(n),!0,!0,GU)}async Dct(t){const i=this.$ut.Ht.Jat;for(;;){let n;try{var e;yi(t),this.Lct();if(this.Cct())break;n=this.pft();const r=await this.Ndt(n,t);if(void 0===r)break;if(this.gft=r,!MQ(this.gft)){await this.Aft(this.gft,t);continue}var s;if(this._ft&&!Wo(this._ft.Wut.VN,this.gft.Wut.VN)&&await this.nft.D$(this.gft.Wut),this.gft.Wut.GY&&(!this.Kut||(null==(e=this._ft)?void 0:e.Wut)!==this.gft.Wut))null==(s=this.SV)||s.KY(this.gft.Wut.GY);await this.yft(n,this.gft.vlt,t),this.H4=await this.bft(this.gft.Wut,t);const o=await this.wlt(this.gft,t),h=this.mft.TE,a=this._ft;this._ft=await this.Mft(o,t);const u=this.mft.TE;this.Tft(a,this.gft,h,u,n),i.forEach((t=>t.Odt=!1)),this.Sft=0,this.Nft=0}catch(e){if(e instanceof vU){this.O3(e.Cn,e.jn,e.Wut);continue}if(e instanceof AQ){let s=500;if(i.every((t=>t.Odt))){if(2===this.Sft){const t=this.mft.TE;if(this.Ift(this.gft),this.Tft(this._ft,this.gft,t,t,n),i.forEach((t=>t.Odt=!1)),this.Nft+=1,this.Sft=0,this.Nft===this.Dft.maxRetries)throw new qi(vt.MEDIA_LOAD_ERROR,"The segments could not be loaded.",e);continue}this.Sft++;const t=this.Dft.minimumBackoff*2**(this.Sft-1);s=x.min(t,this.Dft.maximumBackoff)}await kt(s,t);continue}throw this.Eft=Mo.PP(),e}finally{this.gft=void 0}}}Tft(t,i,e,s,n){const r=s.yP(e),o=i.Wut,h=o.kft(i.vlt),a=o.kdt(i.vlt);let u=i.vlt.lB,c=i.vlt.dB;h&&(u=x.min(u,x.max(0,o.xdt.Cn-.05))),a&&(c=x.max(c,o.xdt.jn));const l=Mo.RP(u,c).yP(s);if(0===r.V)return void this.xft(e,l,u,n);if(h||this.Eft.V>0){const t=l.Sn(Mo.RP(u,r.Cn(0)));this.Lft(t)}const d=r._P().Sn(Mo.RP(r.Cn(0),r.jn(r.V-1)));if(this.Lft(d),a){const t=l.Sn(Mo.RP(r.jn(r.V-1),c));this.Lft(t)}if(this.Eft.V>0){const t=this.Eft.yP(r);this.Lft(t),this.Eft=Mo.PP()}const f=o.sat,g=Ko(i.vlt)?void 0:f.Fdt(i.vlt);var _;const v=null!=(_=null==t?void 0:t.vlt)?_:this.Cft(g)?g:void 0;if(v){const t=this.$ut.pdt(v.lB,v.dB);if(t.length>0){const i=Mo.RP(t[t.length-1].mdt,r.Cn(0));this.Lft(i)}}const w=Ko(i.vlt)?void 0:f.Ydt(i.vlt);if(w&&this.Cft(w)){const t=this.$ut.pdt(w.lB,w.dB);if(t.length>0){const i=Mo.RP(r.jn(r.V-1),t[0].wdt);this.Lft(i)}}}xft(t,i,e,s){let n=i;0===this.Eft.V&&(this.Eft=Mo.RP(t.jn(t.V-1),e)),0===n.V&&void 0!==s&&(n=Mo.OP(s)),this.Eft=this.Eft.pP(n),this.$ut.ydt(this.Eft)}Cft(t){return!!t&&this.$ut.pdt(t.lB,t.dB).length>0}Lft(t){const i=t.yP(this.mft.TE);for(let t=0;t<i.V;t++)i.Cn(t)!==i.jn(t)&&this.jft.i0(i.Cn(t),i.jn(t))}Oft(t,i){throw new AQ(t,i)}Lct(){if(this.Eft.V>0)return;var t;const i=this.mft.$lt.pP(null!=(t=this.mft.J$.fP().CP(this.mft.idt))?t:Mo.PP());this.$ut.ddt(i),this.Rft&&!this.Pft(this.Rft)&&(this.Rft=void 0),this.yo(new pQ(this.$ut.Ht.sct,this.$ut.Mct()))}Cct(){return this._ft&&this._ft.Wut.kdt(this._ft.vlt)?(this.jft.I3(),!0):(this.Rft&&this.Rft.Wut.kdt(this.Rft.vlt)&&this.Pft(this.Rft)&&this.jft.I3(),!!this.mft.tdt)}Pft(t){return this.$ut.fdt.MP(t.zft,t.Bft)}Uft(t,i,e){(!this.Rft||this.Rft.vlt.dB<t.vlt.dB)&&(this.Rft=Ei({},t,{zft:i,Bft:e}))}pft(){const t=this.mft.idt;return t}async Ndt(t,i){yi(i);const e=this._ft?this._ft.Wut:void 0,s=await this.vft.Tdt(t,e,i);if(s)return s}async Aft(t,i){const e={stack:[],error:void 0,hasError:!1};try{const s=t.Wut,n=s.sat,r=Ko(t.vlt)?n.Udt(t.vlt):t.vlt,o=s.Fft.Qft(),h=n.Yft(r);if(h&&h.getTime()<=o.getTime())return this.Oft(fU.aut,"Segment is not available.");const a=n.Vft(r).getTime()-o.getTime();0;const u=Ne(e,Wt.Iy([i]),!1);await Promise.race([kt(a,u.ly),s.zy(ea.Qut,u.ly)])}catch(t){e.error=t,e.hasError=!0}finally{qr(e)}}async bft(t,i,e){void 0===e&&(e=0),yi(i);const s=t.Gft;if(!s)return this.H4;try{if(!t.Wft){const e=await this.Zft.ylt(s,i);t.Wft=e.rI}}catch(s){if(X(s),jb(s)){if(2===e)return t.Odt=!0,this.Oft(fU.wut,"Could not fetch the initializer.");const s=x.min(this.Dft.minimumBackoff*2**e,this.Dft.maximumBackoff);return await kt(s,i),this.bft(t,i,e+1)}throw new qi(vt.MEDIA_LOAD_ERROR,s.message,s)}yi(i);try{this.wft(t.Wft)&&await this.jft.lft(t.Wft,t,i)}catch(t){if(X(t),jb(t))return this.Oft(fU.wut,"Could not append the initializer.");throw new qi(vt.MEDIA_DECODE_ERROR,t.message,t)}return t.Wft}async wlt(t,i,e){void 0===e&&(e=0);try{return yi(i),await this.Zft.wlt(t,i)}catch(s){if(X(s),s instanceof YU){if(function(t){return t instanceof At}(s.cause))return this.Hft(new YU(s,t.vlt,t.Wut),e),this.Oft(fU.aut,"Could not append the segment.");if(2===e)return t.Wut.Odt=!0,this.Hft(s,e),this.Oft(fU.aut,"Could not fetch the segment.");const n=x.min(this.Dft.minimumBackoff*2**e,this.Dft.maximumBackoff);return await kt(n,i),await this.wlt(t,i,e+1)}throw new qi(vt.MEDIA_LOAD_ERROR,s.message,s)}}async yft(t,i,e){const s=this.$ut.pdt(i.lB,i.dB),n=this.mft.$lt.CP(t);let r=Mo.PP();for(const t of s){yi(e);const i=t.wdt,s=t.mdt,o=n&&n.SP(i,s)?x.max(i,n.jn(0)):i,h=s;o<h&&(r=r.pP(Mo.RP(o,h)))}for(let t=0;t<r.V;t++)await this.jft.dft(r.Cn(t),r.jn(t),e);this.Lct()}async Mft(t,i){try{yi(i);const e=await this.jft.cft(t.Alt,t.vlt,t.Wut,i);return this.Xft(t,e.zft,e.Bft),this.Uft(t,e.zft,e.Bft),t}catch(i){if(X(i),jb(i))return this.Hft(new YU(i,t.vlt,t.Wut),0),this.Oft(fU.aut,"Could not append the segment.");if(RL(i)&&this.jft.JK())return this.Oft(fU.cut,"Buffer is full. Could not reduce the buffer.");throw new qi(vt.MEDIA_DECODE_ERROR,i.message,i)}}Xft(t,i,e){const s=t.Wut,n=t.vlt;this.Ict(n,s,i,e)}Ict(t,i,e,s){this.$ut.Ict({Nct:i.o,Tct:t.lB,Sct:t.dB,wdt:e,mdt:s,bdt:!0}),this.jft.e0(e,s)}O3(t,i,e){const s=Mo.RP(t,i);e?this.$ut.i0(s,e.o):this.$ut.ydt(s),this.jft.i0(t,i)}Ift(t){const i=Mo.RP(t.vlt.lB,t.vlt.dB);t.Wut?this.$ut.i0(i,t.Wut.o):this.$ut.ydt(i)}Hft(t,i){const e=t.Vlt,s=this.$ut.Ht.sct,n=this.$ut.Ht.ga,r=t.Wlt.Wut&&t.Wlt.Wut.ga,o=new mQ(e,t.message,s,n,r,i);this.yo(o)}tr(){this.H4=void 0,this._ft=void 0}gn(){this.tr(),this.Rft=void 0,this.Zft.fn(yQ,this.Ds),this.Zft.gn()}constructor(t,i,e,s,n,r,o,h,a){super(),this.kct=t,this.$ut=i,this.mft=e,this.vft=s,this.Zft=n,this.jft=r,this.nft=o,this.Dft=h,this.SV=a,this.gft=void 0,this.H4=void 0,this._ft=void 0,this.Rft=void 0,this.Sft=0,this.Nft=0,this.Eft=Mo.PP(),this.Zft.yn(yQ,this.Ds)}};function MQ(t){const i=t.Wut,e=i.sat,s=Ko(t.vlt)?e.Udt(t.vlt):t.vlt;return e.qft(s,i.Fft.Qft())}var TQ=0,SQ=class{Cst(t){const i=TQ++,e=this.Jlt.E3,s=new HU(t),n=this.Kft&&ou(e),r=new MU(e,n),o=new WU(this.Jlt,this.j8,this.X3,this.UG),h=vQ.Cst(i,this.Jlt,s,this.UG,r,this.OQ,this.plt,this.sft,this.Kdt,this.nft),a=function(t){switch(t){case Ri.SI:return ol.SI;case Ri.NI:return ol.NI;case Ri.ON:return ol.ON;case Ri.II:return ol.II;default:return ol.dI}}(e),u=function(t,i,e,s){const n=new EU(s),r=new VU(t,i,e);return new xU([n,r])}(new AU(this.OQ,a),r,n,this.plt),c=new wQ(this.Jlt),l=new bQ(i,s,o,h,u,c,this.nft,this.Dft,this.SV);return new pU(i,t.Hlt,s,l,this.j8)}Jft(t,i){const e={sct:Ri.ON,Hlt:i,Jat:i.Jat,ga:t.ga};return this.Cst(e)}constructor(t,i,e,s,n,r,o,h,a,u,c,l){this.Jlt=t,this.j8=i,this.X3=e,this.OQ=s,this.UG=n,this.Kft=r,this.plt=o,this.sft=h,this.Kdt=a,this.nft=u,this.Dft=c,this.SV=l}};Qi(),r();var NQ=class{N$(t){return this.Fht.N$(t)}D$(t){return this.Fht.D$(t)}constructor(t){this.Fht=t}},IQ=class{N$(t){return!0}D$(t){return Promise.resolve(void 0)}};r(),r();var th=class extends ua{ma(){return new DQ(this.Zx.map((t=>t.ga)))}constructor(t,i){super(yo.Sx),this.Zx=t||[],this.Ht=i}},DQ=class extends Jr{constructor(t){super("targetqualitychanged"),this.qualities=t,this.quality=this.qualities.length>0?this.qualities[0]:void 0}};r();var EQ=class extends du{ma(){return new kQ(this.quality.ga)}constructor(t){super(yo.QUALITY_UNAVAILABLE),this.quality=t}},kQ=class extends Pu{constructor(t){super("qualityunavailable"),this.quality=t}};r();var xQ=class extends Jr{constructor(){super(yo.NO_QUALITY)}};function LQ(t){return{FY:t.FY,Qp:t.dht,Ti:CQ(t)?t.Ti:0,YA:CQ(t)?Ri.NI:Ri.SI,ji:CQ(t)?t.ji:0}}function CQ(t){const i=t;return void 0!==i.Ti&&void 0!==i.ji}r(),Qi();var jQ=0,OQ=class extends tu{get Wx(){return this.wct.$ft.map(RQ).filter($t)}tgt(t){for(const i of t)i.yn("update",this.igt),this.qz.Kz(i)}egt(t){if(!this.qz.Jz(t))return;t.kQ();const i=this.sgt();if(this.ngt&&Qa(this.ngt,t)){const t=this.ngt.filter((t=>t.fot));0===t.length&&i.length>0?this.Hx=i:this.Hx=t}else this.Hx=i;this.yo(new EQ(t))}rgt(t){if(!this.qz.Jz(t))return;const i=this.sgt();t.EQ(),this.ngt&&!function(t,i){return iw(t,i,((t,i)=>t===i))}(this.ngt,i)||(this.Hx=this.sgt())}sgt(){const t=[];for(const i of this.qz.Ix)i.fot&&t.push(i);return t}get Vx(){return this.ogt}hgt(t){this.ogt=t.Wut,this.yo(t)}get Hlt(){return this.wct}get Rt(){return this.He}set Rt(t){this.nB(t)}get ga(){return this.Za||(this.Za=oo(this)),this.Za}get agt(){return this.ugt}set agt(t){this.ugt=t}get o(){return this.aS}get Gx(){return this.iB}get Lt(){return this.v6}get gs(){return this.$M}get kh(){return this.eB}set kh(t){t!==this.eB&&(this.eB=t,this.yo(new xu(this)))}get UI(){return this.Rt?"enabled":"disabled"}get Hx(){return this.ngt}set Hx(t){let i=[];if(t){const e=(null!=t?t:[]).filter((t=>{const i=this.Vx?LQ(this.Vx):void 0;return Fe.Ys.Pp(i,LQ(t))}));if(0===e.length)return;i=e.filter((t=>t.fot))}else i=this.sgt();0===i.length&&this.yo(new xQ),this.ngt=t&&this.qz.Jz(t)?t:void 0,this.cgt=this.lgt(this.ngt),this.yo(new th(t,this))}get dgt(){return this.cgt}lgt(t){if(!t||0===t.length)return;const i=[];for(const e of this.Jat)for(const s of t)s===e.Wut&&s.fot&&i.push(e);return i}get Zx(){return this.qz}get Jat(){return this.fgt}ggt(t){this._gt.push(t),this.fgt.push(...t.Jat);const i=t.Jat.map((t=>t.Wut));this.tgt(i)}get sct(){return this.vgt}get wgt(){return this._gt}get mgt(){return this.Jat.every((t=>t.mgt))}nB(t){this.He=t,this.ugt&&(t?this.ugt.EQ(this):this.ugt.kQ(this))}pgt(t){this.He=t,this.Agt!==t&&(this.Agt=t,this.yo(new su(this)))}gn(){for(const t of this.qz.Ix)t.fn("update",this.igt);this.qz.tr()}constructor(t,i,e="alternative"){super(),this.ogt=void 0,this.He=!1,this.Za=void 0,this.ugt=void 0,this.aS="",this.Agt=!1,this.qz=new ki,this.fgt=[],this.ngt=void 0,this.cgt=void 0,this.igt=()=>this.yo(new xu(this)),this._gt=[],this.wct=t,this.aS=String(jQ++),this.iB=ft(),this.v6=e,this.$M=t.cet,this.eB=t.kh,this.vgt=t.YA,this.fgt=t.Jat,this.tgt(i)}};function RQ(t){if("urn:mpeg:dash:role:2011"===t.y8)return PQ(t);if("urn:tva:metadata:cs:AudioPurposeCS:2007"===t.y8){if("1"===t.zD)return de.Bx;if("2"===t.zD)return de.Qx}}function PQ(t){if(void 0!==(null==t?void 0:t.zD))switch(t.zD){case"caption":return de.zx;case"sign":return de.Ux;case"description":return de.Bx;case"enhanced-audio-intelligibility":return de.Qx;default:return}}var zQ=class extends dU{get uV(){const t=this.j8.xE;return this.$lt.CP(t,.01)}get ygt(){return this.Bat&&this.bgt[this.Bat.Gx]?this.bgt[this.Bat.Gx]:Mo.PP()}get Mgt(){return this.Bat&&this.Tgt[this.Bat.Gx]?this.Tgt[this.Bat.Gx]:Mo.PP()}get sdt(){return new Mo([0,1/0])}get TE(){return this.ygt}get J$(){return this.Sgt?this.Sgt.Jut.J$.ndt:Mo.PP()}get $lt(){return gU(this.TE,this.J$).mP(2*this.Ngt)}get Cn(){return this.Qat?this.Qat.xdt.Cn:NaN}get jn(){return this.Qat?this.Qat.xdt.jn:NaN}get OE(){const t=this.jn;return!!t&&this.j8.xE>=t}get Ngt(){var t;const i=this.qat();if(!i)return.04;var e;return 1/(null!=(e=this.Bat&&(null==i||null==(t=i.Igt)?void 0:t.BB()))?e:25)}get Ti(){return this.fT}get E3(){return Ri.ON}get $E(){return this.jG}set $E(t){this.jG=t}get rk(){return this.Mgt}get _k(){if(!this.Bat)return Mo.OP(0);const t=this.Xat(this.Bat),i=null==t?void 0:t.Dgt,e=null==t?void 0:t.Egt;if(void 0===e||void 0===i)return Mo.OP(0);const s=x.max(i,this.j8.xE);return new Mo([e,s]).fP()}get ji(){return this.dT}I3(){}edt(){return this.$lt.gr(this.jn)}async cft(t,i,e,s){const n=t.YA===Xi.v$?t.rI.Rat:await t.rI.FN(s),r=this.findTrackForRepresentation(e),o=this.bgt[r.Gx],h=i.lB,a=i.dB,u=new Mo([h,a]);o||(this.bgt[r.Gx]=Mo.PP(),this.Tgt[r.Gx]=Mo.PP()),this.Zht(s);const c=this.eat(new T(n),i,e,r);for(const t of c)r.RQ(t);return this.bgt[r.Gx]=this.bgt[r.Gx].pP(u),{zft:h,Bft:a}}Zht(t){const i=OL(this.j8.xE,void 0,void 0,this.TE,this.UG.ZK,this.UG.QK);for(const[e,s]of i)V(this.dft(e,s,t))}iat(t,i,e){return this.kgt.iat(t,i,e)}eat(t,i,e,s){return this.kgt.eat(t,i,e,s)}dft(t,i,e){const s=t,n=i;let r=new Mo([t,i]);for(const t of this.Z.Ix){const i=[];for(const e of t.L.Ix)e.lB>=s&&e.dB<=n?i.push(e):r=r.yP(new Mo([e.lB,e.dB]));for(const e of i)t.SQ(e);const e=this.bgt[t.Gx];e&&(this.bgt[t.Gx]=e.yP(r))}return Promise.resolve()}i0(t,i){}e0(t,i){}JK(){return!1}EQ(t){if(super.EQ(t),this.kgt.tr(),this.Sgt&&(this.Sgt.gn(),this.Sgt=void 0),this.Bat){const t=this.Xat(this.Bat);this.Sgt=new SQ(this,this.j8,this.j8,this.OQ,this.UG,!1,this.plt,void 0,void 0,new IQ,yS,void 0).Jft(this.Bat,t),this.Sgt.yn(Me.ua,this.xgt),this.Sgt.Cn(fU.iut)}}kQ(t){this.Bat===t&&(super.kQ(t),this.Sgt&&(this.Sgt.gn(),this.Sgt=void 0))}Vat(t){const i=function(t){const i=t.Jat&&t.Jat.length>0&&t.Jat[0],e=i&&VI(i.dht),s=VI(t.dht),n=t.gX===Xh.APPLICATION_TTML_XML;return e||s||n?El.TTML:t.gX===Xh.TEXT_VTT||yl(t.gX,t.dht)?El.WEBVTT:El.DEFAULT}(t);if(!i)throw new b("Unknown TextTrack type for Representation");const e=t.Lgt.concat(t.$ft);return this.Cgt(function(t){return Qa(t.filter((t=>"urn:mpeg:dash:role:2011"===t.y8)).map((t=>t.zD)).filter($t),"caption")?z.yQ:z.AQ}(e),t.kh,t.cet,!1,i,t,function(t){return t.filter((t=>"urn:mpeg:dash:role:2011"===t.y8)).some((t=>function(t){return"forced-subtitle"===t||"forced_subtitle"===t}(t.zD)))}(t.Lgt),t.$ft.map(PQ).filter($t))}async tr(){await super.tr(),this.Sgt&&(await this.Sgt.tr(fU.Sut),this.Sgt.fn(Me.ua,this.xgt),this.Sgt=void 0),this.Qat=void 0,this.bgt={},this.Tgt={}}jgt(){this.bgt={},this.Tgt={}}findTrackForRepresentation(t){for(const i of this.Z.Ix){const e=this.Xat(i);if(e&&dU.Kat(e)===t)return i}}constructor(t,i,e,s,n){super(),this.fT=0,this.jG=1,this.Sgt=void 0,this.bgt={},this.Tgt={},this.dT=0,this.xgt=t=>{0},this.j8=t,this.OQ=i,this.UG=e,this.kgt=s,this.plt=n}},BQ=class extends zQ{Cgt(t,i,e,s,n,r,o,h){var a;const u=r.Jat.reduce(((t,i)=>t||i.o),void 0);var c;const l=null!=(c=null!=u?u:null==(a=r.o)?void 0:a.toString())?c:"";return this.CQ.Wk(t,l,i,e,s,n,o,h)}gn(){for(const t of this.Z.Ix)this.CQ.BQ(t);return super.gn()}constructor(t,i,e,s,n,r){super(t,i,e,s,n),this.CQ=r}},UQ=class{get nt(){return this.Ul}async jQ(t){if(t.YA!==Ri.ON)return;const i=function(t,i,e){return VI(i)||t===Xh.APPLICATION_TTML_XML||t===Xh.TEXT_VTT?new aU(e):yl(t,i)?new cU:void 0}(t.gX,t.dht,this.nat);if(i){const e=this.Ogt(i);return this.Rgt(e),await e.$n(t),e}}Ogt(t){return new BQ(this.j8,this.OQ,this.UG,t,this.plt,this.CQ)}Rgt(t){this.Pgt.push(t),this.Ul.$Y(t.Z)}async tr(){for(const t of this.Pgt.slice())await t.tr();nt(this.Pgt),this.Ul.tr()}async gn(){for(const t of this.Pgt)await t.gn();nt(this.Pgt),this.Ul.gn()}constructor(t,i,e,s,n,r){this.Pgt=[],this.Ul=new YE([]),this.j8=t,this.OQ=i,this.UG=e,this.plt=s,this.CQ=n,this.nat=r}};r();var QQ=class extends Jr{constructor(t){super(Zi.gb),this.error=t}};ds(),r();var nc=function(t){return t.QQ="static",t.FQ="dynamic",t}({});r(),r();var FQ=function(t){return t.zgt="Bgt",t}({}),YQ=class extends Jr{constructor(){super(FQ.zgt)}};Qi(),r(),r();var VQ=0;r();var GQ=class extends Jr{constructor(t,i){super(Zi.Ab),this.representation=t,this.previousRepresentation=i}};r(),r(),r();var WQ=function(t){return t[t.Ugt=0]="Ugt",t[t.Qgt=1]="Qgt",t[t.Fgt=2]="Fgt",t[t.Ygt=3]="Ygt",t[t.Vgt=4]="Vgt",t[t.Ggt=5]="Ggt",t}({}),zu=function(t){return t[t.Wgt=0]="Wgt",t[t.Zgt=1]="Zgt",t[t.Hgt=2]="Hgt",t[t.Xgt=3]="Xgt",t}({});function ZQ(t,i,e){return e===WQ.Ugt?e:i!==zu.Wgt&&i!==zu.Zgt||e!==WQ.Qgt&&e!==WQ.Fgt?t?i===zu.Hgt?WQ.Vgt:i===zu.Xgt?WQ.Ygt:WQ.Ugt:WQ.Ggt:WQ.Fgt}function HQ(t,i,e,s){const n={byte:e};let r=WQ.Qgt;const o=[],h=31&Iu(i,n,s);n.byte+=1;for(let e=0;e<h;e+=1){const h=Iu(i,n,s),a=4&h,u=3&h;r=ZQ(Boolean(a),u,r);const c=Iu(i,n,s),l=Iu(i,n,s);o.push({qgt:t,mR:-1,Kgt:!e,Jgt:Boolean(a),YA:u,$gt:r,t_t:c,i_t:l})}return o}function XQ(t,i,e){const s=Iu(t,i,e);if(!j(s))return String.fromCharCode(s)}function qQ(t){const i=t.c2,e={byte:t.a2},s=t.u2,n=Iu(i,e,s);if(255===n&&(e.byte+=1),181!==n)return;const r=JC(i,e);if(47!==r&&49!==r)return;if(49===r){const t=function(t,i,e){let s="",n=e;for(;n>0;)n-=1,s+=XQ(t,i);return s}(i,e,4);if("GA94"!==t)return}if(3!==Iu(i,e,s))return;47===r&&(e.byte+=1);const o=t;return o.e_t=e.byte,o}function KQ(t){return 4===t.o2}function JQ(t){const i=t.filter(KQ).map(qQ).filter($t),e=[];for(const t of i)e.push(...HQ(t.n2,t.c2,t.e_t,t.u2));return e}r();var $Q="und";function tF(t){if(t===$Q)return;const i=t.toLowerCase();for(const t of iF)if(t[1]===i||t[2]===i||t["2T"]===i||t["2B"]===i||t[3]===i)return t}var iF=[{l:"Abkhaz",lh:"\u0410\u04a7\u0441\u0443\u0430",1:"ab",2:"abk","2T":"abk","2B":"abk",3:"abk"},{l:"Afar",lh:"Afaraf",1:"aa",2:"aar","2T":"aar","2B":"aar",3:"aar"},{l:"Afrikaans",lh:"Afrikaans",1:"af",2:"afr","2T":"afr","2B":"afr",3:"afr"},{l:"Akan",lh:"Akan",1:"ak",2:"aka","2T":"aka","2B":"aka",3:"aka"},{l:"Albanian",lh:"Shqip",1:"sq",2:"sqi","2T":"sqi","2B":"alb",3:"sqi"},{l:"Amharic",lh:"\u12a0\u121b\u122d\u129b",1:"am",2:"amh","2T":"amh","2B":"amh",3:"amh"},{l:"Arabic",lh:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629",1:"ar",2:"ara","2T":"ara","2B":"ara",3:"ara"},{l:"Aragonese",lh:"Aragon\xe9s",1:"an",2:"arg","2T":"arg","2B":"arg",3:"arg"},{l:"Armenian",lh:"\u0540\u0561\u0575\u0565\u0580\u0565\u0576",1:"hy",2:"hye","2T":"hye","2B":"arm",3:"hye"},{l:"Assamese",lh:"\u0985\u09b8\u09ae\u09c0\u09af\u09bc\u09be",1:"as",2:"asm","2T":"asm","2B":"asm",3:"asm"},{l:"Avaric",lh:"\u0410\u0432\u0430\u0440",1:"av",2:"ava","2T":"ava","2B":"ava",3:"ava"},{l:"Avestan",lh:"avesta",1:"ae",2:"ave","2T":"ave","2B":"ave",3:"ave"},{l:"Aymara",lh:"Aymar",1:"ay",2:"aym","2T":"aym","2B":"aym",3:"aym"},{l:"Azerbaijani",lh:"Az\u0259rbaycanca",1:"az",2:"aze","2T":"aze","2B":"aze",3:"aze"},{l:"Bambara",lh:"Bamanankan",1:"bm",2:"bam","2T":"bam","2B":"bam",3:"bam"},{l:"Bashkir",lh:"\u0411\u0430\u0448\u04a1\u043e\u0440\u0442\u0441\u0430",1:"ba",2:"bak","2T":"bak","2B":"bak",3:"bak"},{l:"Basque",lh:"Euskara",1:"eu",2:"eus","2T":"eus","2B":"baq",3:"eus"},{l:"Belarusian",lh:"\u0411\u0435\u043b\u0430\u0440\u0443\u0441\u043a\u0430\u044f",1:"be",2:"bel","2T":"bel","2B":"bel",3:"bel"},{l:"Bengali",lh:"\u09ac\u09be\u0982\u09b2\u09be",1:"bn",2:"ben","2T":"ben","2B":"ben",3:"ben"},{l:"Bihari",lh:"\u092d\u094b\u091c\u092a\u0941\u0930\u0940",1:"bh",2:"bih","2T":"bih","2B":"bih",3:"bih"},{l:"Bislama",lh:"Bislama",1:"bi",2:"bis","2T":"bis","2B":"bis",3:"bis"},{l:"Bosnian",lh:"Bosanski",1:"bs",2:"bos","2T":"bos","2B":"bos",3:"bos"},{l:"Breton",lh:"Brezhoneg",1:"br",2:"bre","2T":"bre","2B":"bre",3:"bre"},{l:"Bulgarian",lh:"\u0411\u044a\u043b\u0433\u0430\u0440\u0441\u043a\u0438",1:"bg",2:"bul","2T":"bul","2B":"bul",3:"bul"},{l:"Burmese",lh:"\u1019\u103c\u1014\u103a\u1019\u102c\u1018\u102c\u101e\u102c",1:"my",2:"mya","2T":"mya","2B":"bur",3:"mya"},{l:"Catalan",lh:"Catal\xe0",1:"ca",2:"cat","2T":"cat","2B":"cat",3:"cat"},{l:"Chamorro",lh:"Chamoru",1:"ch",2:"cha","2T":"cha","2B":"cha",3:"cha"},{l:"Chechen",lh:"\u041d\u043e\u0445\u0447\u0438\u0439\u043d",1:"ce",2:"che","2T":"che","2B":"che",3:"che"},{l:"Chichewa",lh:"Chichewa",1:"ny",2:"nya","2T":"nya","2B":"nya",3:"nya"},{l:"Chinese",lh:"\u4e2d\u6587",1:"zh",2:"zho","2T":"zho","2B":"chi",3:"zho"},{l:"Chuvash",lh:"\u0427\u04d1\u0432\u0430\u0448\u043b\u0430",1:"cv",2:"chv","2T":"chv","2B":"chv",3:"chv"},{l:"Cornish",lh:"Kernewek",1:"kw",2:"cor","2T":"cor","2B":"cor",3:"cor"},{l:"Corsican",lh:"Corsu",1:"co",2:"cos","2T":"cos","2B":"cos",3:"cos"},{l:"Cree",lh:"\u14c0\u1426\u1403\u152d\u140d\u140f\u1423",1:"cr",2:"cre","2T":"cre","2B":"cre",3:"cre"},{l:"Croatian",lh:"Hrvatski",1:"hr",2:"hrv","2T":"hrv","2B":"hrv",3:"hrv"},{l:"Czech",lh:"\u010ce\u0161tina",1:"cs",2:"ces","2T":"ces","2B":"cze",3:"ces"},{l:"Danish",lh:"Dansk",1:"da",2:"dan","2T":"dan","2B":"dan",3:"dan"},{l:"Divehi",lh:"Divehi",1:"dv",2:"div","2T":"div","2B":"div",3:"div"},{l:"Dutch",lh:"Nederlands",1:"nl",2:"nld","2T":"nld","2B":"dut",3:"nld"},{l:"Dzongkha",lh:"\u0f62\u0fab\u0f7c\u0f44\u0f0b\u0f41",1:"dz",2:"dzo","2T":"dzo","2B":"dzo",3:"dzo"},{l:"English",lh:"English",1:"en",2:"eng","2T":"eng","2B":"eng",3:"eng"},{l:"Esperanto",lh:"Esperanto",1:"eo",2:"epo","2T":"epo","2B":"epo",3:"epo"},{l:"Estonian",lh:"Eesti",1:"et",2:"est","2T":"est","2B":"est",3:"est"},{l:"Ewe",lh:"E\u028begbe",1:"ee",2:"ewe","2T":"ewe","2B":"ewe",3:"ewe"},{l:"Faroese",lh:"F\xf8royskt",1:"fo",2:"fao","2T":"fao","2B":"fao",3:"fao"},{l:"Fijian",lh:"Na Vosa Vaka-Viti",1:"fj",2:"fij","2T":"fij","2B":"fij",3:"fij"},{l:"Finnish",lh:"Suomi",1:"fi",2:"fin","2T":"fin","2B":"fin",3:"fin"},{l:"French",lh:"Fran\xe7ais",1:"fr",2:"fra","2T":"fra","2B":"fre",3:"fra"},{l:"Fula",lh:"Fulfulde",1:"ff",2:"ful","2T":"ful","2B":"ful",3:"ful"},{l:"Galician",lh:"Galego",1:"gl",2:"glg","2T":"glg","2B":"glg",3:"glg"},{l:"Georgian",lh:"\u10e5\u10d0\u10e0\u10d7\u10e3\u10da\u10d8",1:"ka",2:"kat","2T":"kat","2B":"geo",3:"kat"},{l:"German",lh:"Deutsch",1:"de",2:"deu","2T":"deu","2B":"ger",3:"deu"},{l:"Greek",lh:"\u0395\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ac",1:"el",2:"ell","2T":"ell","2B":"gre",3:"ell"},{l:"Guaran\xed",lh:"Ava\xf1e'\u1ebd",1:"gn",2:"grn","2T":"grn","2B":"grn",3:"grn"},{l:"Gujarati",lh:"\u0a97\u0ac1\u0a9c\u0ab0\u0abe\u0aa4\u0ac0",1:"gu",2:"guj","2T":"guj","2B":"guj",3:"guj"},{l:"Haitian",lh:"Krey\xf2l Ayisyen",1:"ht",2:"hat","2T":"hat","2B":"hat",3:"hat"},{l:"Hausa",lh:"\u0647\u064e\u0648\u064f\u0633\u064e",1:"ha",2:"hau","2T":"hau","2B":"hau",3:"hau"},{l:"Hebrew",lh:"\u05e2\u05d1\u05e8\u05d9\u05ea",1:"he",2:"heb","2T":"heb","2B":"heb",3:"heb"},{l:"Herero",lh:"Otjiherero",1:"hz",2:"her","2T":"her","2B":"her",3:"her"},{l:"Hindi",lh:"\u0939\u093f\u0928\u094d\u0926\u0940",1:"hi",2:"hin","2T":"hin","2B":"hin",3:"hin"},{l:"Hiri Motu",lh:"Hiri Motu",1:"ho",2:"hmo","2T":"hmo","2B":"hmo",3:"hmo"},{l:"Hungarian",lh:"Magyar",1:"hu",2:"hun","2T":"hun","2B":"hun",3:"hun"},{l:"Interlingua",lh:"Interlingua",1:"ia",2:"ina","2T":"ina","2B":"ina",3:"ina"},{l:"Indonesian",lh:"Bahasa Indonesia",1:"id",2:"ind","2T":"ind","2B":"ind",3:"ind"},{l:"Interlingue",lh:"Interlingue",1:"ie",2:"ile","2T":"ile","2B":"ile",3:"ile"},{l:"Irish",lh:"Gaeilge",1:"ga",2:"gle","2T":"gle","2B":"gle",3:"gle"},{l:"Igbo",lh:"Igbo",1:"ig",2:"ibo","2T":"ibo","2B":"ibo",3:"ibo"},{l:"Inupiaq",lh:"I\xf1upiak",1:"ik",2:"ipk","2T":"ipk","2B":"ipk",3:"ipk"},{l:"Ido",lh:"Ido",1:"io",2:"ido","2T":"ido","2B":"ido",3:"ido"},{l:"Icelandic",lh:"\xcdslenska",1:"is",2:"isl","2T":"isl","2B":"ice",3:"isl"},{l:"Italian",lh:"Italiano",1:"it",2:"ita","2T":"ita","2B":"ita",3:"ita"},{l:"Inuktitut",lh:"\u1403\u14c4\u1483\u144e\u1450\u1466",1:"iu",2:"iku","2T":"iku","2B":"iku",3:"iku"},{l:"Japanese",lh:"\u65e5\u672c\u8a9e",1:"ja",2:"jpn","2T":"jpn","2B":"jpn",3:"jpn"},{l:"Javanese",lh:"Basa Jawa",1:"jv",2:"jav","2T":"jav","2B":"jav",3:"jav"},{l:"Kalaallisut",lh:"Kalaallisut",1:"kl",2:"kal","2T":"kal","2B":"kal",3:"kal"},{l:"Kannada",lh:"\u0c95\u0ca8\u0ccd\u0ca8\u0ca1",1:"kn",2:"kan","2T":"kan","2B":"kan",3:"kan"},{l:"Kanuri",lh:"Kanuri",1:"kr",2:"kau","2T":"kau","2B":"kau",3:"kau"},{l:"Kashmiri",lh:"\u0643\u0634\u0645\u064a\u0631\u064a",1:"ks",2:"kas","2T":"kas","2B":"kas",3:"kas"},{l:"Kazakh",lh:"\u049a\u0430\u0437\u0430\u049b\u0448\u0430",1:"kk",2:"kaz","2T":"kaz","2B":"kaz",3:"kaz"},{l:"Khmer",lh:"\u1797\u17b6\u179f\u17b6\u1781\u17d2\u1798\u17c2\u179a",1:"km",2:"khm","2T":"khm","2B":"khm",3:"khm"},{l:"Kikuyu",lh:"G\u0129k\u0169y\u0169",1:"ki",2:"kik","2T":"kik","2B":"kik",3:"kik"},{l:"Kinyarwanda",lh:"Kinyarwanda",1:"rw",2:"kin","2T":"kin","2B":"kin",3:"kin"},{l:"Kyrgyz",lh:"\u041a\u044b\u0440\u0433\u044b\u0437\u0447\u0430",1:"ky",2:"kir","2T":"kir","2B":"kir",3:"kir"},{l:"Komi",lh:"\u041a\u043e\u043c\u0438",1:"kv",2:"kom","2T":"kom","2B":"kom",3:"kom"},{l:"Kongo",lh:"Kongo",1:"kg",2:"kon","2T":"kon","2B":"kon",3:"kon"},{l:"Korean",lh:"\ud55c\uad6d\uc5b4",1:"ko",2:"kor","2T":"kor","2B":"kor",3:"kor"},{l:"Kurdish",lh:"Kurd\xee",1:"ku",2:"kur","2T":"kur","2B":"kur",3:"kur"},{l:"Kwanyama",lh:"Kuanyama",1:"kj",2:"kua","2T":"kua","2B":"kua",3:"kua"},{l:"Latin",lh:"Latina",1:"la",2:"lat","2T":"lat","2B":"lat",3:"lat"},{l:"Luxembourgish",lh:"L\xebtzebuergesch",1:"lb",2:"ltz","2T":"ltz","2B":"ltz",3:"ltz"},{l:"Ganda",lh:"Luganda",1:"lg",2:"lug","2T":"lug","2B":"lug",3:"lug"},{l:"Limburgish",lh:"Limburgs",1:"li",2:"lim","2T":"lim","2B":"lim",3:"lim"},{l:"Lingala",lh:"Ling\xe1la",1:"ln",2:"lin","2T":"lin","2B":"lin",3:"lin"},{l:"Lao",lh:"\u0e9e\u0eb2\u0eaa\u0eb2\u0ea5\u0eb2\u0ea7",1:"lo",2:"lao","2T":"lao","2B":"lao",3:"lao"},{l:"Lithuanian",lh:"Lietuvi\u0173",1:"lt",2:"lit","2T":"lit","2B":"lit",3:"lit"},{l:"Luba-Katanga",lh:"Tshiluba",1:"lu",2:"lub","2T":"lub","2B":"lub",3:"lub"},{l:"Latvian",lh:"Latvie\u0161u",1:"lv",2:"lav","2T":"lav","2B":"lav",3:"lav"},{l:"Manx",lh:"Gaelg",1:"gv",2:"glv","2T":"glv","2B":"glv",3:"glv"},{l:"Macedonian",lh:"\u041c\u0430\u043a\u0435\u0434\u043e\u043d\u0441\u043a\u0438",1:"mk",2:"mkd","2T":"mkd","2B":"mac",3:"mkd"},{l:"Malagasy",lh:"Malagasy",1:"mg",2:"mlg","2T":"mlg","2B":"mlg",3:"mlg"},{l:"Malay",lh:"Bahasa Melayu",1:"ms",2:"msa","2T":"msa","2B":"may",3:"msa"},{l:"Malayalam",lh:"\u0d2e\u0d32\u0d2f\u0d3e\u0d33\u0d02",1:"ml",2:"mal","2T":"mal","2B":"mal",3:"mal"},{l:"Maltese",lh:"Malti",1:"mt",2:"mlt","2T":"mlt","2B":"mlt",3:"mlt"},{l:"M\u0101ori",lh:"M\u0101ori",1:"mi",2:"mri","2T":"mri","2B":"mao",3:"mri"},{l:"Marathi",lh:"\u092e\u0930\u093e\u0920\u0940",1:"mr",2:"mar","2T":"mar","2B":"mar",3:"mar"},{l:"Marshallese",lh:"Kajin M\u0327aje\u013c",1:"mh",2:"mah","2T":"mah","2B":"mah",3:"mah"},{l:"Mongolian",lh:"\u041c\u043e\u043d\u0433\u043e\u043b",1:"mn",2:"mon","2T":"mon","2B":"mon",3:"mon"},{l:"Nauru",lh:"Dorerin Naoero",1:"na",2:"nau","2T":"nau","2B":"nau",3:"nau"},{l:"Navajo",lh:"Din\xe9 Bizaad",1:"nv",2:"nav","2T":"nav","2B":"nav",3:"nav"},{l:"Northern Ndebele",lh:"isiNdebele",1:"nd",2:"nde","2T":"nde","2B":"nde",3:"nde"},{l:"Nepali",lh:"\u0928\u0947\u092a\u093e\u0932\u0940",1:"ne",2:"nep","2T":"nep","2B":"nep",3:"nep"},{l:"Ndonga",lh:"Owambo",1:"ng",2:"ndo","2T":"ndo","2B":"ndo",3:"ndo"},{l:"Norwegian Bokm\xe5l",lh:"Norsk (Bokm\xe5l)",1:"nb",2:"nob","2T":"nob","2B":"nob",3:"nob"},{l:"Norwegian Nynorsk",lh:"Norsk (Nynorsk)",1:"nn",2:"nno","2T":"nno","2B":"nno",3:"nno"},{l:"Norwegian",lh:"Norsk",1:"no",2:"nor","2T":"nor","2B":"nor",3:"nor"},{l:"Nuosu",lh:"\ua188\ua320\ua4bf Nuosuhxop",1:"ii",2:"iii","2T":"iii","2B":"iii",3:"iii"},{l:"Southern Ndebele",lh:"isiNdebele",1:"nr",2:"nbl","2T":"nbl","2B":"nbl",3:"nbl"},{l:"Occitan",lh:"Occitan",1:"oc",2:"oci","2T":"oci","2B":"oci",3:"oci"},{l:"Ojibwe",lh:"\u140a\u14c2\u1511\u14c8\u142f\u14a7\u140e\u14d0",1:"oj",2:"oji","2T":"oji","2B":"oji",3:"oji"},{l:"Old Church Slavonic",lh:"\u0421\u043b\u043e\u0432\u0463\u0301\u043d\u044c\u0441\u043a\u044a",1:"cu",2:"chu","2T":"chu","2B":"chu",3:"chu"},{l:"Oromo",lh:"Afaan Oromoo",1:"om",2:"orm","2T":"orm","2B":"orm",3:"orm"},{l:"Oriya",lh:"\u0b13\u0b21\u0b3f\u0b3c\u0b06",1:"or",2:"ori","2T":"ori","2B":"ori",3:"ori"},{l:"Ossetian",lh:"\u0418\u0440\u043e\u043d \xe6\u0432\u0437\u0430\u0433",1:"os",2:"oss","2T":"oss","2B":"oss",3:"oss"},{l:"Panjabi",lh:"\u0a2a\u0a70\u0a1c\u0a3e\u0a2c\u0a40",1:"pa",2:"pan","2T":"pan","2B":"pan",3:"pan"},{l:"P\u0101li",lh:"\u092a\u093e\u0934\u093f",1:"pi",2:"pli","2T":"pli","2B":"pli",3:"pli"},{l:"Persian",lh:"\u0641\u0627\u0631\u0633\u06cc",1:"fa",2:"fas","2T":"fas","2B":"per",3:"fas"},{l:"Polish",lh:"Polski",1:"pl",2:"pol","2T":"pol","2B":"pol",3:"pol"},{l:"Pashto",lh:"\u067e\u069a\u062a\u0648",1:"ps",2:"pus","2T":"pus","2B":"pus",3:"pus"},{l:"Portuguese",lh:"Portugu\xeas",1:"pt",2:"por","2T":"por","2B":"por",3:"por"},{l:"Quechua",lh:"Runa Simi",1:"qu",2:"que","2T":"que","2B":"que",3:"que"},{l:"Romansh",lh:"Rumantsch",1:"rm",2:"roh","2T":"roh","2B":"roh",3:"roh"},{l:"Kirundi",lh:"Kirundi",1:"rn",2:"run","2T":"run","2B":"run",3:"run"},{l:"Romanian",lh:"Rom\xe2n\u0103",1:"ro",2:"ron","2T":"ron","2B":"rum",3:"ron"},{l:"Russian",lh:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439",1:"ru",2:"rus","2T":"rus","2B":"rus",3:"rus"},{l:"Sanskrit",lh:"\u0938\u0902\u0938\u094d\u0915\u0943\u0924\u092e\u094d",1:"sa",2:"san","2T":"san","2B":"san",3:"san"},{l:"Sardinian",lh:"Sardu",1:"sc",2:"srd","2T":"srd","2B":"srd",3:"srd"},{l:"Sindhi",lh:"\u0633\u0646\u068c\u064a\u200e",1:"sd",2:"snd","2T":"snd","2B":"snd",3:"snd"},{l:"Northern Sami",lh:"S\xe1megiella",1:"se",2:"sme","2T":"sme","2B":"sme",3:"sme"},{l:"Samoan",lh:"Gagana S\u0101moa",1:"sm",2:"smo","2T":"smo","2B":"smo",3:"smo"},{l:"Sango",lh:"S\xe4ng\xf6",1:"sg",2:"sag","2T":"sag","2B":"sag",3:"sag"},{l:"Serbian",lh:"\u0421\u0440\u043f\u0441\u043a\u0438",1:"sr",2:"srp","2T":"srp","2B":"srp",3:"srp"},{l:"Gaelic",lh:"G\xe0idhlig",1:"gd",2:"gla","2T":"gla","2B":"gla",3:"gla"},{l:"Shona",lh:"ChiShona",1:"sn",2:"sna","2T":"sna","2B":"sna",3:"sna"},{l:"Sinhala",lh:"\u0dc3\u0dd2\u0d82\u0dc4\u0dbd",1:"si",2:"sin","2T":"sin","2B":"sin",3:"sin"},{l:"Slovak",lh:"Sloven\u010dina",1:"sk",2:"slk","2T":"slk","2B":"slo",3:"slk"},{l:"Slovene",lh:"Sloven\u0161\u010dina",1:"sl",2:"slv","2T":"slv","2B":"slv",3:"slv"},{l:"Somali",lh:"Soomaaliga",1:"so",2:"som","2T":"som","2B":"som",3:"som"},{l:"Southern Sotho",lh:"Sesotho",1:"st",2:"sot","2T":"sot","2B":"sot",3:"sot"},{l:"Spanish",lh:"Espa\xf1ol",1:"es",2:"spa","2T":"spa","2B":"spa",3:"spa"},{l:"Sundanese",lh:"Basa Sunda",1:"su",2:"sun","2T":"sun","2B":"sun",3:"sun"},{l:"Swahili",lh:"Kiswahili",1:"sw",2:"swa","2T":"swa","2B":"swa",3:"swa"},{l:"Swati",lh:"SiSwati",1:"ss",2:"ssw","2T":"ssw","2B":"ssw",3:"ssw"},{l:"Swedish",lh:"Svenska",1:"sv",2:"swe","2T":"swe","2B":"swe",3:"swe"},{l:"Tamil",lh:"\u0ba4\u0bae\u0bbf\u0bb4\u0bcd",1:"ta",2:"tam","2T":"tam","2B":"tam",3:"tam"},{l:"Telugu",lh:"\u0c24\u0c46\u0c32\u0c41\u0c17\u0c41",1:"te",2:"tel","2T":"tel","2B":"tel",3:"tel"},{l:"Tajik",lh:"\u0422\u043e\u04b7\u0438\u043a\u04e3",1:"tg",2:"tgk","2T":"tgk","2B":"tgk",3:"tgk"},{l:"Thai",lh:"\u0e20\u0e32\u0e29\u0e32\u0e44\u0e17\u0e22",1:"th",2:"tha","2T":"tha","2B":"tha",3:"tha"},{l:"Tigrinya",lh:"\u1275\u130d\u122d\u129b",1:"ti",2:"tir","2T":"tir","2B":"tir",3:"tir"},{l:"Tibetan Standard",lh:"\u0f56\u0f7c\u0f51\u0f0b\u0f61\u0f72\u0f42",1:"bo",2:"bod","2T":"bod","2B":"tib",3:"bod"},{l:"Turkmen",lh:"T\xfcrkmen\xe7e",1:"tk",2:"tuk","2T":"tuk","2B":"tuk",3:"tuk"},{l:"Tagalog",lh:"Tagalog",1:"tl",2:"tgl","2T":"tgl","2B":"tgl",3:"tgl"},{l:"Tswana",lh:"Setswana",1:"tn",2:"tsn","2T":"tsn","2B":"tsn",3:"tsn"},{l:"Tonga",lh:"faka Tonga",1:"to",2:"ton","2T":"ton","2B":"ton",3:"ton"},{l:"Turkish",lh:"T\xfcrk\xe7e",1:"tr",2:"tur","2T":"tur","2B":"tur",3:"tur"},{l:"Tsonga",lh:"Xitsonga",1:"ts",2:"tso","2T":"tso","2B":"tso",3:"tso"},{l:"Tatar",lh:"\u0422\u0430\u0442\u0430\u0440\u0447\u0430",1:"tt",2:"tat","2T":"tat","2B":"tat",3:"tat"},{l:"Twi",lh:"Twi",1:"tw",2:"twi","2T":"twi","2B":"twi",3:"twi"},{l:"Tahitian",lh:"Reo M\u0101\u2019ohi",1:"ty",2:"tah","2T":"tah","2B":"tah",3:"tah"},{l:"Uyghur",lh:"\u0626\u06c7\u064a\u063a\u06c7\u0631\u0686\u0647",1:"ug",2:"uig","2T":"uig","2B":"uig",3:"uig"},{l:"Ukrainian",lh:"\u0423\u043a\u0440\u0430\u0457\u043d\u0441\u044c\u043a\u0430",1:"uk",2:"ukr","2T":"ukr","2B":"ukr",3:"ukr"},{l:"Urdu",lh:"\u0627\u0631\u062f\u0648",1:"ur",2:"urd","2T":"urd","2B":"urd",3:"urd"},{l:"Uzbek",lh:"O\u2018zbek",1:"uz",2:"uzb","2T":"uzb","2B":"uzb",3:"uzb"},{l:"Venda",lh:"Tshiven\u1e13a",1:"ve",2:"ven","2T":"ven","2B":"ven",3:"ven"},{l:"Vietnamese",lh:"Ti\u1ebfng Vi\u1ec7t",1:"vi",2:"vie","2T":"vie","2B":"vie",3:"vie"},{l:"Volap\xfck",lh:"Volap\xfck",1:"vo",2:"vol","2T":"vol","2B":"vol",3:"vol"},{l:"Walloon",lh:"Walon",1:"wa",2:"wln","2T":"wln","2B":"wln",3:"wln"},{l:"Welsh",lh:"Cymraeg",1:"cy",2:"cym","2T":"cym","2B":"wel",3:"cym"},{l:"Wolof",lh:"Wolof",1:"wo",2:"wol","2T":"wol","2B":"wol",3:"wol"},{l:"Western Frisian",lh:"Frysk",1:"fy",2:"fry","2T":"fry","2B":"fry",3:"fry"},{l:"Xhosa",lh:"isiXhosa",1:"xh",2:"xho","2T":"xho","2B":"xho",3:"xho"},{l:"Yiddish",lh:"\u05d9\u05d9\u05b4\u05d3\u05d9\u05e9",1:"yi",2:"yid","2T":"yid","2B":"yid",3:"yid"},{l:"Yoruba",lh:"Yor\xf9b\xe1",1:"yo",2:"yor","2T":"yor","2B":"yor",3:"yor"},{l:"Zhuang",lh:"Cuengh",1:"za",2:"zha","2T":"zha","2B":"zha",3:"zha"},{l:"Zulu",lh:"isiZulu",1:"zu",2:"zul","2T":"zul","2B":"zul",3:"zul"}];r();function eF(t){var i;const e=null!=(i=function(t){const i=t.V1,e=new $C;return e.X1(i,0,i.byteLength),cj(e).D2}(t))?i:24;return t.s_t/e}function sF(t){return t.YA===Rt.mC}function nF(t,i,e,s,n){const r=function(t,i,e,s){const n=e.s_t,r=D.fromNumber(t.xR||0),o=s.Kz(H.tU(r,n));return{n_t:s.BB(),r_t:s,o_t:o,h_t:s}}(t,0,e,s),o=H.iU(t.ct||0,e.s_t),h=t.lj||0,a=!(65536&h)&&1!==(h>>24&3);let u;const c=Al(n),l=new da;for(;l.tc<c.byteLength;){const t=ul(c,l);if((31&Ww(c,l,1))===oj.w2){const i=new $C;i.X1(n,l.tc-1,l.tc+t-1);const e=new uj(i),s=sj(r.o_t,e);u=u||[],u.push(...JQ(s))}l.Gb(t-1)}return Ei({},r,{ct:o.BB(),a_t:o,u_t:r.o_t.BB(),c_t:r.n_t,l_t:a,d_t:u,f_t:!1,g_t:!1})}function rF(t){return{Fj:t.nj.Fj,s_t:t.zj.nj.Lj}}function oF(t){return t.YA===Rt.kL}r(),r(),r(),r(),r(),r(),r(),r();var hF=class{DB(t){return this.pet===t.pet&&this.het===t.het}constructor(t,i){this.pet=t,this.het=i}};r();var aF=class{get jet(){return this.__t}get Eet(){return[this]}get Let(){return this.l$}get det(){return this.v_t}get vet(){return new hF(this.det.pet,this.det.het+this.jet.length-1)}w_t(t){this.__t+=t}m_t(t){for(const i of t)this.w_t(i)}constructor(t,i){this.l$=t,this.v_t=i,this.__t=""}};function uF(t,i){return t===i||t.jet===i.jet&&t.det.DB(i.det)&&ns(t.Let,i.Let)}function cF(t,i){return t===i||t.det.DB(i.det)&&t.vet.DB(i.vet)&&iw(t.Eet,i.Eet,uF)}var lF=class extends dN{EB(t){return iw(this.U,t.U,cF)}constructor(t,i,e){super(t,i,e,!1)}};r();var dF=class{p_t(t){return t.KU(this)}A_t(t){return Ms(t,((t,i)=>t.KU(this,i)))}y_t(t,i){return new fF(t,i).b_t()}},fF=class{b_t(){if(this.M_t)return[];for(let t=0;t<this.pet.length;t++)this.T_t(t);return this.S_t(),this.N_t}I_t(t){this.D_t=new aF(sz,new hF(this.E_t,t))}S_t(){this.D_t&&(this.N_t.push(this.D_t),this.D_t=null)}T_t(t){const i=this.pet[t];gF(i)?this.D_t&&this.S_t():(this.D_t||this.I_t(t),this.D_t.w_t(i))}get M_t(){return this.pet.every(gF)}constructor(t,i){this.pet=t,this.E_t=i,this.N_t=[],this.D_t=null}};function gF(t){return null==t}var _F=class{static k_t(t,i,e){if(i>=e)return;const s=Ms(t,((t,i)=>new fF(t.map((t=>t?t.x_t():null)),i).b_t()));return 0!==s.length?new lF(i,e,s):void 0}},vF="black",ml="white";r(),r();var wF=[[42,225],[92,233],[94,237],[95,243],[96,250],[123,231],[124,247],[125,209],[126,241],[127,9608],[128,174],[129,176],[130,189],[131,191],[132,8482],[133,162],[134,163],[135,9834],[136,224],[137,32],[138,232],[139,226],[140,234],[141,238],[142,244],[143,251],[144,193],[145,201],[146,211],[147,218],[148,220],[149,252],[150,8216],[151,161],[152,42],[153,8217],[154,9473],[155,169],[156,8480],[157,8226],[158,8220],[159,8221],[160,192],[161,194],[162,199],[163,200],[164,202],[165,203],[166,235],[167,206],[168,207],[169,239],[170,212],[171,217],[172,249],[173,219],[174,171],[175,187],[176,195],[177,227],[178,205],[179,204],[180,236],[181,210],[182,242],[183,213],[184,245],[185,123],[186,125],[187,92],[188,94],[189,95],[190,124],[191,8764],[192,196],[193,228],[194,214],[195,246],[196,223],[197,165],[198,164],[199,9475],[200,197],[201,229],[202,216],[203,248],[204,9487],[205,9491],[206,9495],[207,9499]].reduce(((t,i)=>(t[i[0]]=i[1],t)),{}),mF=class{L_t(t){for(let i=0;i<mn;i++)t&&(this.C_t[i]=t.C_t[i])}DB(t){for(let i=0;i<mn;i++)if(this.C_t[i]!==t.C_t[i])return!1;return!0}j_t(){for(let t=0;t<mn;t++)if(null!==this.C_t[t])return!1;return!0}O_t(t){this.R_t!==t&&(this.R_t=t),this.R_t<0?this.R_t=0:this.R_t>mn&&(this.R_t=31)}P_t(t){const i=this.R_t+t;this.O_t(i)}z_t(){this.P_t(-1),this.C_t[this.R_t]=null}w_t(t){t>=144&&this.z_t();const i=function(t){return wF[t]?String.fromCharCode(wF[t]):String.fromCharCode(t)}(t);this.addParsedChar(i)}addParsedChar(t){this.R_t>=mn||(32===Number(t)?(this.C_t[this.R_t]=this.B_t?"</i>":"<i>",this.B_t=!this.B_t):this.C_t[this.R_t]=t,this.P_t(1))}U_t(t){for(let i=t;i<mn;i++)this.C_t[i]=null}eM(){this.U_t(0),this.R_t=0}Q_t(){this.U_t(this.R_t)}F_t(t,i){const e=this.C_t;let s=null;for(let n=0;n<mn;n++){const r=e[n];null===r?s=null:(s||(s={Oh:n,Vh:t,ji:0,Ti:1,C_t:[[]]},i.push(s)),s.C_t[0].push(r),s.ji++)}}KU(t,i){return t.y_t(this.C_t,i)}constructor(){this.C_t=[],this.R_t=0;for(let t=0;t<mn;t++)this.C_t.push(null);this.B_t=!1}};Qi();var pF=class{Y_t(t,i){const e="CC"+(this.V_t<<1|this.G_t+1);if(t>=i)return null;const s=(new dF).A_t(this.W_t.slice(1));return 0===s.length?null:{uB:new lF(t,i,s),YN:e,Z_t:this.V_t<<1|this.G_t+1}}tr(){this.H_t(),this.X_t=1}q_t(){return this.X_t}K_t(t){this.X_t=t}O_t(t){this.W_t[this.X_t].O_t(t)}P_t(t){this.W_t[this.X_t].P_t(t)}J_t(){return this.$_t}tvt(t){this.$_t=t}w_t(t,i){if(i<32||i>127)return;let e="";switch(t){case 0:e=void 0!==bF[i]?bF[i]:String.fromCharCode(i);break;case 1:e=MF[i];break;case 2:this.ivt(),e=TF[i];break;case 3:this.ivt(),e=SF[i]}e&&this.W_t[this.X_t].addParsedChar(e)}ivt(){this.W_t[this.X_t].z_t()}evt(t,i,e){if(t>=i)for(let s=e-1;s>=0;s--)this.W_t[t+s]=this.W_t[i+s];else for(let s=0;s<e;s++)this.W_t[t+s]=this.W_t[i+s]}svt(t,i){for(let e=0;e<=i;e++)this.W_t[t+e]=new mF}H_t(){this.svt(0,AF)}nvt(){this.X_t=this.$_t>0?this.$_t:0,this.H_t()}rvt(t){this.ovt=t}avt(t){this.uvt=t}cvt(t){this.lvt=t}dvt(t){this.fvt=t}constructor(t,i){this.W_t=new Array(AF+1);for(let t=0;t<=AF;t++)this.W_t[t]=new mF;this.X_t=1,this.$_t=0,this.V_t=t,this.G_t=i,this.ovt=!1,this.uvt=!1,this.lvt=ml,this.fvt=vF,this.tr()}},AF=15,yF=function(t){return t[t.gvt=0]="gvt",t[t._vt=1]="_vt",t[t.vvt=2]="vvt",t[t.wvt=3]="wvt",t}({}),bF={39:"\u2019",42:"\xe1",92:"\xe9",94:"\xed",95:"\xf3",96:"\xfa",123:"\xe7",124:"\xf7",125:"\xd1",126:"\xf1",127:"\u2588"},MF={48:"\xae",49:"\xb0",50:"\xbd",51:"\xbf",52:"\u2122",53:"\xa2",54:"\xa3",55:"\u266a",56:"\xe0",57:"\u2800",58:"\xe8",59:"\xe2",60:"\xea",61:"\xee",62:"\xf4",63:"\xfb"},TF={32:"\xc1",33:"\xc9",34:"\xd3",35:"\xda",36:"\xdc",37:"\xfc",38:"\u2018",39:"\xa1",40:"*",41:"'",42:"\u2500",43:"\xa9",44:"\u2120",45:"\xb7",46:"\u201c",47:"\u201d",48:"\xc0",49:"\xc2",50:"\xc7",51:"\xc8",52:"\xca",53:"\xcb",54:"\xeb",55:"\xce",56:"\xcf",57:"\xef",58:"\xd4",59:"\xd9",60:"\xf9",61:"\xdb",62:"\xab",63:"\xbb"},SF={32:"\xc3",33:"\xe3",34:"\xcd",35:"\xcc",36:"\xec",37:"\xd2",38:"\xf2",39:"\xd5",40:"\xf5",41:"{",42:"}",43:"\\",44:"^",45:"_",46:"|",47:"~",48:"\xc4",49:"\xe4",50:"\xd6",51:"\xf6",52:"\xdf",53:"\xa5",54:"\xa4",55:"\u2502",56:"\xc5",57:"\xe5",58:"\xd8",59:"\xf8",60:"\u250c",61:"\u2510",62:"\u2514",63:"\u2518"};Qi();var NF=class{tr(){this.mvt=!0,this.pvt=0,this.Zp=0,this.Avt=this.yvt,this.bvt=void 0,this.yvt.tr(),this.Mvt.tr(),this.Tvt.tr()}Svt(t,i){return[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(7&t)<<1|i>>5&1]}Nvt(t,i){const e=this.Svt(t,i),s=(30&i)>>1;let n=ml,r=!1;s<7?n=EF[s]:7===s&&(r=!0);const o=1==(1&i);if(4===this.Zp)return;const h=this.Avt;if(3===this.Zp&&e!==h.q_t()){const t=1+h.q_t()-h.J_t(),i=1+e-h.J_t();h.evt(i,t,h.J_t()),h.svt(0,i-1),h.svt(e+1,AF-e)}h.K_t(e);const a=rz[t<<1&14|i>>5&1]-1;if(a<0)return;const u=function(t,i){const e=i>95?i-96:i-64;return{oet:nz[e].oet,ret:nz[e].ret,het:nz[e].het,pet:t}}(a,i);h.O_t(u.het),this.Avt.rvt(o),this.Avt.avt(r),this.Avt.cvt(n),this.Avt.dvt(vF)}Ivt(t,i){this.Avt.rvt(!1),this.Avt.avt(!1),this.Avt.cvt(ml);const e=this.Dvt(t,yF.gvt," ".charCodeAt(0));let s=ml,n=!1;const r=1==(1&i);return s=EF[(14&i)>>1],"white_italics"===s&&(s="white",n=!0),this.Avt.rvt(r),this.Avt.avt(n),this.Avt.cvt(s),e}Dvt(t,i,e){if(this.Avt.w_t(i,e),2===this.Zp||3===this.Zp){const i=this.Evt(this.Avt,this.pvt,t);return this.pvt=t,i}return null}Evt(t,i,e){return this.mvt?null:2===this.Zp||3===this.Zp?t.Y_t(e,e+10):t.Y_t(i,e)}kvt(t,i){let e=vF;0==(7&t)&&(e=DF[(14&i)>>1]),this.Avt.dvt(e)}xvt(t){const i=IF,e=t.Lvt,s=t.Cvt;let n=null;switch(e){case i.RCL:this.jvt();break;case i.BS:this.Ovt();break;case i.AOD:case i.AON:case i.DER:break;case i.RU2:n=this.Rvt(2,s);break;case i.RU3:n=this.Rvt(3,s);break;case i.RU4:n=this.Rvt(4,s);break;case i.FON:n=this.Pvt(s);break;case i.RDC:this.zvt(s);break;case i.TR:this.Bvt();break;case i.RTD:this.Uvt();break;case i.EDM:n=this.Qvt(s);break;case i.CR:n=this.Fvt(s);break;case i.ENM:this.Yvt();break;case i.EOC:n=this.Vvt(s)}return n}Fvt(t){const i=this.Avt;if(3!==this.Zp)return null;const e=this.Evt(i,this.pvt,t),s=i.q_t()-i.J_t()+1;return i.evt(s-1,s,i.J_t()),i.svt(0,s-1),i.svt(i.q_t(),AF-i.q_t()),this.pvt=t,e}Rvt(t,i){this.Avt=this.yvt;const e=this.Avt;let s=null;return 3!==this.Zp&&4!==this.Zp&&(s=this.Evt(e,this.pvt,i),this.yvt.nvt(),this.Mvt.nvt(),this.mvt=!1,e.K_t(AF)),this.Zp=3,e.tvt(t),s}Pvt(t){return this.Dvt(t,yF.gvt," ".charCodeAt(0))}Qvt(t){const i=this.yvt;let e=null;return 4!==this.Zp&&(e=this.Evt(i,this.pvt,t)),i.H_t(),this.mvt=!1,e}zvt(t){this.Zp=2,this.Avt=this.yvt,this.Avt.tvt(0),this.pvt=t}Yvt(){this.Mvt.H_t()}Vvt(t){let i=null;4!==this.Zp&&(i=this.Evt(this.yvt,this.pvt,t));const e=this.Mvt;return this.Mvt=this.yvt,this.yvt=e,this.jvt(),this.pvt=t,i}jvt(){this.Zp=1,this.Avt=this.Mvt,this.Avt.tvt(0)}Ovt(){this.Avt.ivt()}Bvt(){this.Tvt.tr(),this.mvt=!1,this.Uvt()}Uvt(){this.Avt=this.Tvt,this.Zp=4}Gvt(t,i,e){return this.Avt.w_t(yF.gvt,i),this.Dvt(t,yF.gvt,e)}Wvt(t,i,e){const s=1&i?yF.wvt:yF.vvt;return this.Dvt(t,s,e)}Zvt(t){const i=t.Hvt,e=t.Lvt,s=t.Cvt;if(this.bvt===(i<<8|e))return this.bvt=void 0,null;if(this.bvt=i<<8|e,this.Xvt(i,e))this.Nvt(i,e);else{if(this.qvt(i,e))return this.Ivt(s,e);if(this.Kvt(i,e))this.kvt(i,e);else{if(this.Jvt(i,e))return this.Dvt(s,yF._vt,e);if(this.$vt(i,e))return this.Wvt(s,i,e);if(this.twt(i,e))return this.xvt(t);this.isTabOffset(i)&&this.Avt.P_t(e-32)}}return null}isTabOffset(t){return 23===t||31===t}twt(t,i){return 20==(246&t)&&32==(240&i)}Xvt(t,i){return 16==(240&t)&&64==(192&i)}qvt(t,i){return 17==(247&t)&&32==(240&i)}Kvt(t,i){return 16==(247&t)&&32==(240&i)||23==(247&t)&&45==(255&i)}Jvt(t,i){return 17==(247&t)&&48==(240&i)}$vt(t,i){return 18==(246&t)&&32==(224&i)}static iwt(t){return 16==(112&t)}constructor(t,i){this.Zp=0,this.Tvt=new pF(t,i),this.yvt=new pF(t,i),this.Mvt=new pF(t,i),this.Avt=this.yvt,this.pvt=0,this.bvt=void 0,this.mvt=!1}},IF={RCL:32,BS:33,AOD:34,AON:35,DER:36,RU2:37,RU3:38,RU4:39,FON:40,RDC:41,TR:42,RTD:43,EDM:44,CR:45,ENM:46,EOC:47},DF=["black","green","blue","cyan","red","yellow","magenta","black"],EF=["white","green","blue","cyan","red","yellow","magenta","white_italics"];r(),r(),r();var kF=class{x_t(){return this.ewt}swt(){return this.ovt}nwt(){return this.uvt}rwt(){return this.fvt}owt(){return this.lvt}constructor(t,i,e,s,n){this.ewt=t,this.ovt=i,this.uvt=e,this.fvt=s,this.lvt=n}},xF=class{hwt(t,i,e,s,n,r,o){this.IG=t,this.awt=i,this.uwt=e,this.cwt=s,this.lwt=n,this.dwt=r,this.fwt=o}gwt(){this._wt=[];for(let t=0;t<CF;t++)this._wt.push(this.vwt())}vwt(){const t=[];for(let i=0;i<LF;i++)t.push(null);return t}wwt(t){this.mwt()&&(this._wt[this.X_t][this.pwt]=new kF(t,this.ovt,this.uvt,this.fvt,this.lvt),this.pwt++)}Awt(){this.mwt()&&(this.pwt<=0&&this.X_t<=0||(this.pwt<=0?(this.pwt=this.fwt-1,this.X_t--):this.pwt--,this._wt[this.X_t][this.pwt]=null))}mwt(){const t=this.X_t<this.dwt&&this.X_t>=0,i=this.pwt<this.fwt&&this.pwt>=0;return t&&i}ywt(){return this.IG}bwt(t){let i=0;for(let e=t;e<CF;e++,i++)this._wt[i]=this._wt[e];for(let e=0;e<t;e++,i++)this._wt[i]=this.vwt()}Mwt(){if(this.X_t+1>=this.dwt)return this.bwt(1),void(this.pwt=0);this.X_t++,this.pwt=0}Twt(){this._wt[this.X_t]=this.vwt(),this.pwt=0}Y_t(t,i){if(this.yB>=t)return null;const e=_F.k_t(this._wt,this.yB,t);return e?(this.Swt(t),{uB:e,YN:"svc"+i,Z_t:i}):null}Nwt(t,i){this.X_t=t,this.pwt=i}Iwt(t){this.fvt=t}Dwt(t){this.lvt=t}Ewt(t){this.ovt=t}kwt(t){this.uvt=t}xwt(){this.X_t=0,this.pwt=0,this.ovt=!1,this.uvt=!1,this.lvt=ml,this.fvt=vF}Lwt(t){this.Cwt=t}Owt(){this.IG=!0}be(){this.IG=!1}wh(){this.IG=!this.IG}Swt(t){this.yB=t}constructor(t){this.Rwt=t,this.IG=!1,this.lwt=!1,this.uwt=0,this.awt=0,this.cwt=0,this.dwt=0,this.fwt=0,this.Cwt=2,this._wt=[],this.yB=0,this.X_t=0,this.pwt=0,this.uvt=!1,this.ovt=!1,this.lvt=ml,this.fvt=vF,this.gwt()}},LF=42,CF=15,jF=class{Pwt(t){const i=t.zwt();let e=i.zD;const s=i.Cvt;if(e===BF){e=e<<16|t.zwt().zD}return e>=0&&e<=31?this.Bwt(e,s):e>=128&&e<=159?this.Uwt(t,e,s):(e>=4096&&e<=4127?this.Qwt(t,255&e):e>=4224&&e<=4255?this.Fwt(t,255&e):e>=32&&e<=127?this.Ywt(e):e>=160&&e<=255?this.Vwt(e):e>=4128&&e<=4223?this.Gwt(255&e):e>=4256&&e<=4351&&this.Wwt(255&e),null)}Ywt(t){this.Zwt&&(127!==t?this.Zwt.wwt(String.fromCharCode(t)):this.Zwt.wwt("\u266a"))}Vwt(t){this.Zwt&&this.Zwt.wwt(String.fromCharCode(t))}Gwt(t){if(!this.Zwt)return;if(void 0===UF[t])return void this.Zwt.wwt("_");const i=UF[t];this.Zwt.wwt(i)}Wwt(t){this.Zwt&&(160===t?this.Zwt.wwt("[CC]"):this.Zwt.wwt("_"))}Bwt(t,i){if(!this.Zwt)return null;const e=this.Zwt;let s=null;switch(t){case OF:e.Awt();break;case PF:e.ywt()&&(s=e.Y_t(i,this.Hwt)),e.Mwt();break;case zF:e.ywt()&&(s=e.Y_t(i,this.Hwt)),e.Twt();break;case RF:e.ywt()&&(s=e.Y_t(i,this.Hwt)),e.gwt(),e.Nwt(0,0)}return s}Uwt(t,i,e){if(i>=128&&i<=135){const t=7&i;this.Xwt(t)}else{if(136===i){const i=t.zwt().zD;return this.qwt(i,e)}if(137===i){const i=t.zwt().zD;this.Kwt(i,e)}else{if(138===i){const i=t.zwt().zD;return this.Jwt(i,e)}if(139===i){const i=t.zwt().zD;return this.$wt(i,e)}if(140===i){const i=t.zwt().zD;return this.tmt(i,e)}if(143===i)return this.tr(e);if(144===i)this.imt(t);else if(145===i)this.emt(t);else if(146===i)this.Nwt(t);else if(151===i)this.smt(t);else if(i>=152&&i<=159){const s=(15&i)-8;this.hwt(t,s,e)}}}return null}Qwt(t,i){i>=8&&i<=15?t.ZC(1):i>=16&&i<=23?t.ZC(2):i>=24&&i<=31&&t.ZC(3)}Fwt(t,i){i>=128&&i<=135?t.ZC(4):i>=136&&i<=143&&t.ZC(5)}Xwt(t){this.nmt[t]&&(this.Zwt=this.nmt[t])}*omt(t){for(let i=0;i<8;i++){1==(1&t)&&this.nmt[i]&&(yield i),t>>=1}}qwt(t,i){let e=null;for(const s of this.omt(t)){const t=this.nmt[s];t.ywt()&&(e=t.Y_t(i,this.Hwt)),t.gwt()}return e}Kwt(t,i){for(const e of this.omt(t)){const t=this.nmt[e];t.ywt()||t.Swt(i),t.Owt()}}Jwt(t,i){let e=null;for(const s of this.omt(t)){const t=this.nmt[s];t.ywt()&&(e=t.Y_t(i,this.Hwt)),t.be()}return e}$wt(t,i){let e=null;for(const s of this.omt(t)){const t=this.nmt[s];t.ywt()?e=t.Y_t(i,this.Hwt):t.Swt(i),t.wh()}return e}tmt(t,i){let e=null;for(const s of this.omt(t)){const t=this.nmt[s];t.ywt()&&(e=t.Y_t(i,this.Hwt)),this.nmt[s]=void 0}return e}tr(t){const i=this.tmt(255,t);return this.eM(),i}eM(){this.Zwt=void 0,this.nmt=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0]}imt(t){t.ZC(1);const i=t.zwt().zD;if(!this.Zwt)return;const e=(128&i)>0,s=(64&i)>0;this.Zwt.kwt(e),this.Zwt.Ewt(s)}emt(t){const i=t.zwt().zD,e=t.zwt().zD;if(t.ZC(1),!this.Zwt)return;const s=3&i,n=(12&i)>>2,r=(48&i)>>4,o=3&e,h=(12&e)>>2,a=(48&e)>>4,u=this.hmt(r,n,s),c=this.hmt(a,h,o);this.Zwt.Dwt(u),this.Zwt.Iwt(c)}Nwt(t){const i=t.zwt().zD,e=t.zwt().zD;if(!this.Zwt)return;const s=15&i,n=63&e;this.Zwt.Nwt(s,n)}smt(t){t.ZC(1),t.ZC(1);const i=t.zwt().zD;if(t.ZC(1),!this.Zwt)return;const e=3&i;this.Zwt.Lwt(e)}hwt(t,i,e){const s=void 0!==this.nmt[i];if(!s){const t=new xF(i);t.Swt(e),this.nmt[i]=t}const n=t.zwt().zD,r=t.zwt().zD,o=t.zwt().zD,h=t.zwt().zD,a=t.zwt().zD,u=t.zwt().zD,c=(32&n)>0,l=127&r,d=(128&r)>0,f=o,g=1+(15&h),_=(240&h)>>4,v=1+(63&a);s&&0===(7&u)||this.nmt[i].xwt(),this.nmt[i].hwt(c,l,f,_,d,g,v),this.Zwt=this.nmt[i]}hmt(t,i,e){const s={0:0,1:0,2:1,3:1};return QF[s[t]<<2|s[i]<<1|s[e]]}constructor(t){this.Hwt=t,this.nmt=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0],this.Zwt=void 0}},OF=8,RF=12,PF=13,zF=14,BF=16,UF={32:" ",33:"\xa0",37:"\u2026",42:"\u0160",44:"\u0152",48:"\u2588",49:"\u2018",50:"\u2019",51:"\u201c",52:"\u201d",53:"\u2022",57:"\u2122",58:"\u0161",60:"\u0153",61:"\u2120",63:"\u0178",118:"\u215b",119:"\u215c",120:"\u215d",121:"\u215e",122:"\u2502",123:"\u2510",124:"\u2514",125:"\u2500",126:"\u2518",127:"\u250c"},QF=["black","blue","green","cyan","red","magenta","yellow","white"];r();var FF=class{amt(t){if(t.YA===zu.Xgt){const i=63&t.zD;return this.umt=2*i-1,void(this.cmt=[])}if(this.cmt&&(this.umt>0&&(this.cmt.push(t),this.umt--),0===this.umt)){const t=new YF(this.cmt);this.lmt.push(t),this.cmt=null,this.umt=0}}dmt(){return this.lmt}fmt(){this.lmt=[]}eM(){this.lmt=[],this.cmt=[],this.umt=0}constructor(){this.lmt=[],this.cmt=null,this.umt=0}},YF=class{gmt(){return this._mt<this.vmt.length}wmt(){return this._mt}zwt(){if(!this.gmt())throw new qi(vt.SUBTITLE_PARSE_ERROR,"Buffer read out of bounds / invalid CEA-708 Data.");return this.vmt[this._mt++]}ZC(t){if(this._mt+t>this.vmt.length)throw new qi(vt.SUBTITLE_PARSE_ERROR,"Buffer read out of bounds / invalid CEA-708 Data.");this._mt+=t}constructor(t){this._mt=0,this.vmt=t}};Qi();var VF=class{eM(){this.mmt=0,this.pmt=[],this.Amt=[],this.ymt.eM(),this.tr(),this.bmt.forEach((t=>{t.eM()}))}tr(){this.Mmt=0,this.Tmt=0,this.Smt.forEach((t=>{t.tr()}))}Nmt(t,i){if(t.Jgt){const e=t.t_t,s=t.i_t,n=t.YA;n===zu.Wgt||n===zu.Zgt?this.pmt.push({Cvt:i,YA:n,Hvt:e,Lvt:s,Imt:this.pmt.length}):this.Dmt&&(this.Amt.push({Cvt:i,YA:n,zD:e,Imt:this.Amt.length}),this.Amt.push({Cvt:i,YA:zu.Hgt,zD:s,Imt:this.Amt.length}))}}_H(){const t=[];this.pmt.sort(((t,i)=>t.Cvt-i.Cvt||t.Imt-i.Imt)),this.Amt.sort(((t,i)=>t.Cvt-i.Cvt||t.Imt-i.Imt));for(const i of this.pmt){const e=this.Emt(i);e&&t.push(e)}for(const t of this.Amt)this.ymt.amt(t);const i=this.ymt.dmt();for(const e of i){const i=this.kmt(e);t.push(...i)}return this.ymt.fmt(),this.pmt=[],this.Amt=[],t}Emt(t){const i=t.YA;if(NF.iwt(t.Hvt)){const e=t.Hvt>>3&1;0===i?this.Mmt=e:this.Tmt=e}const e="CC"+(i<<1|(i?this.Tmt:this.Mmt)+1),s=this.Smt.get(e);return 255===t.Hvt&&255===t.Lvt||!t.Hvt&&!t.Lvt||!this.xmt(t.Hvt)||!this.xmt(t.Lvt)?(++this.mmt>=45&&this.tr(),null):(this.mmt=0,t.Hvt&=127,t.Lvt&=127,t.Hvt||t.Lvt?NF.iwt(t.Hvt)?s.Zvt(t):s.Gvt(t.Cvt,t.Hvt,t.Lvt):null)}kmt(t){const i=[];try{for(;t.gmt();){const e=t.zwt().zD;let s=(224&e)>>5;const n=31&e;if(7===s&&0!==n){s=63&t.zwt().zD}if(0!==s){if(!this.bmt.has(s)){const t=new jF(s);this.bmt.set(s,t)}const e=this.bmt.get(s),r=t.wmt();for(;t.wmt()-r<n;){const s=e.Pwt(t);s&&i.push(s)}}}}catch(t){if(!(t instanceof qi&&t.code===vt.SUBTITLE_PARSE_ERROR))throw t}return i}xmt(t){let i=0;for(;t;)i^=1&t,t>>=1;return 1===i}constructor(){this.Dmt=!1,this.pmt=[],this.Amt=[],this.ymt=new FF,this.mmt=0,this.Smt=av({CC1:new NF(0,0),CC2:new NF(0,1),CC3:new NF(1,0),CC4:new NF(1,1)}),this.Mmt=0,this.Tmt=0,this.bmt=pc(),this.tr()}};r();var GF=class extends Jr{constructor(t,i){super("Lmt"),this.Z_t=t,this.uB=i}},WF=H.BU(.1),ZF=class extends tu{Cmt(t,i){this.jmt.Nmt(t,i)}_H(){const t=this.jmt._H();for(const i of t)this.yo(new GF(i.Z_t,i.uB))}tr(){this.jmt.eM()}gn(){this.Bo(),this.jmt.eM()}constructor(){super(),this.jmt=new VF}},HF=class extends ZF{Omt(t,i,e,s){const n=this.Rmt(t,s);this.Pmt(n,i,e),this._H()}Rmt(t,i){const e=t.slice().sort(oz),s=this.zmt;if(0===s.length)return e;if(0===e.length)return s;let n;const r=s[0].aet,o=s[s.length-1].aet,h=e[0].aet,a=s[0].Wut===e[0].Wut;if(o.qB(h).ZB().WB(H.BU(2.5*i))&&a)n=s.concat(e).sort(oz);else if(h.FB(r)){let t=0;for(;t<s.length&&s[t].aet.WB(h);)t++;let i=!1,r=!1;for(let n=t,o=0;n<s.length&&o<e.length;n++,o++)XF(s[n],e[o])?i=!0:r=!0;const o=i&&!r,a=i&&r;!i&&r?n=s.concat(e).sort(oz):o?n=s.slice(0,t).concat(e):(n=e,a&&this.tr())}else n=e,this.tr();return n}Pmt(t,i,e){for(let s=0;s<t.length;s++){const n=t[s],r=n.aet.BB();if(!e&&i-r<WF.BB())return void(this.zmt=t.slice(s));this.Cmt(n,r)}this.zmt=[]}constructor(...t){super(...t),this.zmt=[]}};function XF(t,i){return t.aet.DB(i.aet)&&t.YA===i.YA&&t.t_t===i.t_t&&t.i_t===i.i_t}var qF=class extends tD{Bmt(t){return this.Umt.get(t)}Qmt(t){let i=this.Umt.get(t.uet);return i||(i=this.Fmt(t),this.Umt.set(t.uet,i)),i}Fmt(t){const i=[de.zx],e=tF(t.cet);let s,n=e?e.l:"";t.Ymt&&(n="easy "+n,i.push(de.Fx)),s=t.kh?"CC "+t.kh:n?"CC "+n:"CC"+t.uet;const r=this.CQ.Wk(z.yQ,s,s,t.cet,!1,El.CEA608,void 0,i);return this.tt(r),r}iat(t){const i=Rs.dj(Al(t));this.Vmt=function(t){for(const i of t.Z){const t=rF(i),e=i.zj.Hj.Kj.$j.iO;let s=dl(e,(t=>t.YA===Rt.YL));if(!s){const t=e.filter((t=>t.YA===Rt.wC)),i=dl(t,(t=>{var i;return(null==(i=t.HO)?void 0:i.YA)===Rt.YL}));i&&(s=i.HO)}if(!s)continue;const n=KC(Al(s.OO.rI),new da),r=s.PO;return Ei({},t,{Fj:i.nj.Fj,OO:gm(s.OO.rI),ji:s.ji,Ti:s.Ti,uR:r&&r.uR,aR:r&&r.aR,a4:n.U1,Gmt:n.Q1,u4:n.F1,V1:n.V1[0],G1:n.G1[0]})}}(dl(i,oF))}cft(t,i,e,s,n,r){var o;if(!this.Vmt)return;if(!j(this.Wmt)&&ce(this.Wmt,i,1e-5))return;j(this.Zmt)||ce(this.Zmt,i,.1)||this.Hmt.tr();const h=function(t,i,e,s,n){const r=[],o=i.filter(sF),h=s(e);for(const i of o){const s=dl(i.Z,(t=>t.nj.Fj===e.Fj));if(!s)continue;const o=s.nj.dR||0,u=s.nj.fR||0;let c=s.MR?s.MR.MR:D.ZERO;var a;const l=i.wR+(null!=(a=s.nj.SR)?a:D.ZERO).toNumber();for(const a of s.bR){let s=l+(a.wR||0);for(const l of a.kR){const a=l.Kb||u,d=new $C;d.X1(t,s,s+a);const f=H.tU(c,e.s_t);d._Q=n(l,i,e,f,vi(t,s,s+a)),r.push(d),s+=a,c=c.add(l.ct||o||h)}}}return r}(t,Rs.dj(Al(t)),this.Vmt,eF,nF);var a;const u=null!=(a=null==(o=ow(h,(t=>t._Q.ct)))?void 0:o._Q.ct)?a:0,c=function(t){const i=[];for(const e of t)e._Q.d_t&&i.push(...e._Q.d_t),delete e._Q.d_t;for(let t=0;t<i.length;t+=1)i[t].mR=t;return i}(h),l=H.BU(s),d=[];for(const t of c)d.push(Ei({},t,{Wut:n,aet:t.qgt.Kz(l)}));this.Hmt.Omt(d,e,r,u),this.Wmt=i,this.Zmt=e}tr(){return this.Hmt.tr(),this.Umt.forEach((t=>{t.gn(),this.it(t),this.CQ.BQ(t)})),this.Umt.clear(),this.Vmt=void 0,this.Wmt=NaN,this.Zmt=NaN,super.tr()}gn(){return this.Hmt.fn("Lmt",this.Xmt),this.Hmt.gn(),super.gn()}constructor(t){super(),this.Vmt=void 0,this.Wmt=NaN,this.Zmt=NaN,this.Xmt=t=>{const i=this.Qmt({uet:t.Z_t,cet:""}),e=t.uB;for(const t of i.L.Ix)e.lB<t.lB&&e.dB>t.lB?e.dB=t.lB:e.lB>t.lB&&t.dB>e.lB?t.dB=e.lB:e.lB===t.lB&&(e.dB=t.dB);i.RQ(e)},this.CQ=t,this.Umt=pc(),this.Hmt=new HF,this.Hmt.yn("Lmt",this.Xmt)}};r(),r();var KF=/(.*)=(.*)/,JF=/(.*):(.*)/;function $F(t){if(!t)return[];const i=[],e=t.trim().split(";");for(const t of e){const e=t.match(KF);if(e){const[,t,s]=e;let n="",r=!1;for(const t of s.trim().split(","))if(t.match(JF)){const[,i,e]=t.match(JF);switch(i){case"lang":n=e;break;case"er":r=Boolean(Number(e))}}i.push({uet:Number(t),cet:n,Ymt:r})}}return i}var tY={1:1,2:3,3:2,4:4},iY="urn:scte:dash:cc:cea-608:2015",eY="urn:scte:dash:cc:cea-708:2015";r(),r();var sY=class extends ua{ma(){return new nY(this.Wut&&this.Wut.ga)}constructor(t,i,e){super(yo.Mx),this.Wut=t,this.Wlt=i,this.qmt=e}},nY=class extends Jr{constructor(t){super("activequalitychanged"),this.quality=t}},rY=[Zi.so,E.wx,Zi.Eb],oY=class extends tu{Kmt(t){const i=this.Sgt.Jut;for(const e of i.Ht.Jat)if(i.fdt.udt(t,e))return e}gn(){this.Bo(),this.cz.fn(rY,this.Jmt)}constructor(t,i){super(),this.Jmt=t=>{const i=this.$mt,e=this.Kmt(t.currentTime)||this.Sgt.Hut;e&&i!==e&&(this.$mt=e,e.Wut&&this.yo(new sY(e.Wut,null==e?void 0:e.ga,null==i?void 0:i.ga)))},this.cz=t,this.cz.yn(rY,this.Jmt),this.Sgt=i}};function hY(t,i,e){const s=new Bt(Al(t),new da),n=Z.ej(s,Rt.kL);if(!n)return;const r=Z.qC(n.rI),o=dl(r,(t=>t.YA===Rt.LL)),h=dl(r,(t=>t.YA===Rt.NC));if(!o)return;const a=Z.ej(o.rI,Rt.jL);if(!a)return;const u=Z.ej(a.rI,Rt.PL);if(!u)return;const c=Z.ej(u.rI,Rt.zL);if(!c)return;const l=Z.qC(c.rI),d=dl(l,(t=>t.YA===Rt.BL));if(!d)return;const f=Z.uj(d.rI,Rt.BL,!1),g=new Bt(Al(f.rI),new da);g.ZC(4);const _=Z.qC(g),v=[];for(const t of _){if(t.YA===Rt.vC||t.YA===Rt.wC)return;t.YA===Rt.YL?v.push({tpt:t,ipt:Rt.wC}):t.YA===Rt.uC&&v.push({tpt:t,ipt:Rt.vC})}if(!function(t,i){return void 0===t&&void 0!==i&&i.length>0}(h,i)&&0===v.length)return;let w=Wa(t);const m=dl(r,(t=>t.YA===Rt.QL)),p=m?Z.ej(m.rI,Rt.FL):void 0,A=p?function(t){const i=t.rI.Zb();return i.ZC(4),i.ZC(4),i.BC()}(p):1,y=dl(l,(t=>t.YA===Rt.UL));y&&function(t,i,e){const s=cY(Al(t),i),n=Z.ij(s,new da),r=n.rI;r.ZC(4);const o=r.BC();for(let t=0;t<o;t++){r.ZC(4),r.ZC(4);const t=r.OC.Zb(),i=r.BC();$(r.rI,t,i+e)}}(w,y,v.length),p&&function(t,i,e){const s=cY(Al(t),i),n=Z.ij(s,new da),r=n.rI;r.ZC(4),r.ZC(4),$(r.rI,r.OC,e)}(w,p,1),w=function(t,i,e,s){if(e||!s)return t;let n=t;for(const t of s)n=aY(n,i,new T(t));return n}(w,n,h,i);const b=[n,o,a,u,c,d];for(let t=v.length-1;t>=0;t--){const i=v[t];w=uY(w,i.tpt,d,b,i.ipt,e)}return{ept:w,spt:{npt:v.length,lR:A}}}function aY(t,i,e){const s=bm(t,e,i.rI.rI.byteOffset+i.rI.rI.byteLength);return lY(cY(Al(s),i),e.byteLength),s}function uY(t,i,e,s,n,r){const o=function(t,i,e){0;const s=t.rI.rI,n=vY(),r=new T(s.byteLength+n.byteLength),o=Al(r);r.set(ka(s),0),lY(o,n.byteLength),im(o,new da(pY),i),r.set(n,s.byteLength),im(o,new da(s.byteLength+wY),t.YA),e&&Vw(o,new da(s.byteLength+mY),e);return r}(i,n,r),h=bm(t,o,i.rI.rI.byteOffset),a=Al(h);!function(t,i){const e=Z.ij(t,new da),s=Z.uj(e.rI,Rt.BL,!1),n=Al(s.rI),r=n.getUint32(0);n.setUint32(0,r+i)}(cY(a,e),1);for(const t of s)lY(cY(a,t),o.byteLength);return h}function cY(t,i){const e=i.rI.rI.byteOffset;return dm(t,e,e+i.rI.rI.byteLength)}function lY(t,i){const e=new da,s=ul(t,e);if(0===s);else if(1===s){e.Gb(4);const s=Xw(t,e.Zb());qw(t,e,s.add(i))}else e.Wb(0),$(t,e,s+i)}ds(),Qi(),r(),ds(),Qi();var dY=class extends EC{start(t){this.JJ=t}transform(t){this.b0(t),this.rpt()}flush(){this.T0(),this.rpt()}L0(t){return t===Rt.mC}j0(t){let i=Wa(ka(t.rI.rI));const e=Z.ij(Al(i),new da);i=fY(i,e,this.opt),this.hpt.push(i)}R0(t){this.hpt.push(t)}rpt(){for(const t of function(t){if(t.length<2)return t;const i=[];let{buffer:e,byteOffset:s,byteLength:n}=t[0];for(let r=1;r<t.length;r++){const o=t[r];e===o.buffer&&s+n===o.byteOffset?n+=o.byteLength:(i.push(new T(e,s,n)),({buffer:e,byteOffset:s,byteLength:n}=o))}return i.push(new T(e,s,n)),i}(this.hpt))this.JJ.enqueue(t);nt(this.hpt)}constructor(t){super(),this.hpt=[],this.opt=t}};function fY(t,i,e){let s=t;const n=Z.qC(i.rI);for(let t=n.length-1;t>=0;t--){const r=n[t];r.YA===Rt.AC&&(s=gY(s,r,i,e))}return s}function gY(t,i,e,s){const n=cY(Al(t),i),r=Z.ij(n,new da),o=Z.qC(r.rI),h=dl(o,(t=>t.YA===Rt.yC));if(!h)return t;const a=h.rI,u=a.OC.Zb(),c=a.BC(),{flags:l}=G(c);a.ZC(4),l.Hb(aT.BASE_DATA_OFFSET_PRESENT)&&a.ZC(8);const d=a.OC.Zb();if(l.Hb(aT.SAMPLE_DESCRIPTION_INDEX_PRESENT)){const i=ul(a.rI,d);return $(a.rI,a.OC,i+s.npt),t}{$(a.rI,u,c|aT.SAMPLE_DESCRIPTION_INDEX_PRESENT);const n=new T(4);Al(n).setUint32(0,s.lR+s.npt);const r=a.rI.byteOffset+d.tc;for(const t of o.filter((t=>t.YA===Rt.bC)))_Y(t,n.byteLength);for(const s of[h,i,e])lY(cY(Al(t),s),n.byteLength);return bm(t,n,r)}}function _Y(t,i){const e=t.rI,s=e.BC(),{flags:n}=G(s);if(e.ZC(4),n.Hb(Jc.DATA_OFFSET_PRESENT)){const t=e.Zb().BC();$(e.rI,e.OC,t+i)}}var vY=di((()=>new T([0,0,0,80,115,105,110,102,0,0,0,12,102,114,109,97,0,0,0,0,0,0,0,20,115,99,104,109,0,0,0,0,99,101,110,99,0,1,0,0,0,0,0,40,115,99,104,105,0,0,0,32,116,101,110,99,0,0,0,0,0,0,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]))),wY=16,mY=64,pY=4,AY=[Me.ua,Zi.Tb,Zi.Sb,Zi.Ib,Zi.Qy],yY=class extends tu{get Bat(){return this.Uat}get o(){return this.aS}get E3(){return this.x3}get nt(){return this.upt}get Igt(){return function(t){const i=29.97,e=1024,s=44100;return t===Ri.SI?s/e:i}(this.x3)}get Ngt(){return 1/this.Igt}get Rt(){return Boolean(this.Uat&&this.Uat.Rt)}get J$(){const t=this.Sgt?this.Sgt.Jut.J$.ndt:Mo.PP();return this.cpt().pP(t)}get TE(){let t=this.lpt();const i=this.dpt;return void 0!==i&&t.fP().gr(i)&&(t=t.pP(Mo.OP(i))),t}get $lt(){return gU(this.lpt(),this.J$.pP(this.fpt)).mP(2*this.Ngt)}get fpt(){const t=this.dpt;if(t&&isFinite(t)){const i=this.gpt.jn;if(isFinite(i)&&t<i)return new Mo([t,i],[!1,!0])}return Mo.PP()}get _k(){const t=this.Uat;if(!t)return Mo.OP(0);const i=t.Hlt.Dgt,e=t.Hlt.Egt;if(void 0===e||void 0===i)return Mo.OP(0);const s=e;let n=i>=t.Hlt.xdt.jn?x.max(i,this.jn):i;return n=x.max(s,n),Mo.RP(s,n).fP()}get uV(){return this.$lt.CP(this.xE)}get sdt(){return this.gpt.sdt}get xE(){return this.cz.xE}get Cn(){return this.Uat?this.Uat.Hlt.xdt.Cn:NaN}get jn(){const t=this._pt(),i=this.dpt;return void 0===t?NaN:void 0!==i?i:t}_pt(){var t;return null==(t=this.Uat)?void 0:t.Hlt.xdt.jn}get Ti(){return this.gpt.Ti}get ji(){return this.gpt.ji}get vpt(){return this.dpt}dct(){return void 0!==this.Sgt&&this.Sgt.dct}edt(){if(void 0===this.dpt)return!1;const t=this.lpt().fP(),i=t.bP(this.dpt);return!(i<0)&&t.Cn(i)!==this.dpt}I3(){const t=this.gpt.sdt,i=this.lpt().Sn(t);this.dpt=i.V>0?i.jn(i.V-1):0;const e=t.jn(0);isFinite(e)&&this.dpt<e&&this.i0(this.dpt,e),this.wpt()}async cft(t,i,e,s){const n=e.sat.rQ,r=this.mpt(t,i,e,n,s),o=this.ppt(t,i,e,n,s),[h]=await _w([o,r]);return h}async mpt(t,i,e,s,n){if(!HA(e.gX))return;let r;if(t.YA===Xi.jN){const i=t.rI.glt(),e=await i.FN(n);r=new T(e)}else r=new T(t.rI.Rat);const o=[];if(void 0!==this.Apt&&(this.Apt.cft(r,i.lB,s),o.push(this.Apt)),void 0!==this.ypt){const t=e.kdt(i);this.ypt.cft(r,i.lB,i.dB,s,e.Wut,t),o.push(this.ypt)}$I(this.TE,o)}async ppt(t,i,e,s,n){var r;let o;if(yi(n),t.YA===Xi.jN){let i=t.rI.YN;this.bpt&&(i=function(t,i){return t.pipeThrough(new Ra(new dY(i)))}(i,this.bpt)),o={YA:Xi.jN,rI:i}}else{let i=new T(t.rI.Rat);this.bpt&&(i=function(t,i){let e=Wa(t);const s=new Bt(Al(e),new da),n=Z.qC(s);for(let t=n.length-1;t>=0;t--){const s=n[t];s.YA===Rt.mC&&(e=fY(e,s,i))}return e}(i,this.bpt)),o={YA:Xi.v$,rI:i}}const h={xst:i.lB,ct:i.ct,rQ:s,u4:null==(r=e.Wut)?void 0:r.Gx},a=this.Fht.TE;await this.Mpt(),await this.Fht.B4(o,h,n);return function(t,i,e,s){let n,r,o=i.yP(t.fP());o=o.yP(e.yP(i)),!1;0===o.V?(n=s.dB,r=n):(n=o.Cn(0),r=o.jn(0));return{zft:n,Bft:r}}(a,this.Fht.TE,this.Fht.L3,i)}async iat(t,i,e){var s;yi(e),this.ypt&&this.ypt.iat(new T(t.Rat));let n=new T(t.Rat);if(this.Tpt(i)){const t=this.gpt.Spt;let i,e=[];t&&(e=Ms(t.Npt,(t=>t.XY)),i=t.Ipt.DF?jx(t.Ipt.DF):void 0);const s=hY(n,e,i);s?(this.bpt=s.spt,n=s.ept):this.bpt=void 0}const r={YA:Xi.v$,rI:n};await this.Mpt(),await this.Fht.F4(r,{u4:null==(s=i.Wut)?void 0:s.Gx},e)}dft(t,i,e){return this.Fht.wS(t,i,e)}i0(t,i){this.Fht.O3(t,i)}e0(t,i){this.Fht.R3(t,i)}lpt(){return this.Fht?this.Fht.TE:Mo.PP()}cpt(){return this.Fht?this.Fht.L3:Mo.PP()}Dpt(){return this.Fht?this.Fht.wS(0,1/0):Promise.resolve()}Ept(){return this.Fht&&(this.Fht.fn(po.g$,this.Ds),this.Fht=void 0),Promise.resolve()}async kpt(t){var i;const e=fl.oft(null!=(i=t.dgt)?i:t.Jat,this.Kdt).gX;this.Fht||(this.Fht=this.gpt.xpt(e),this.Fht.yn(po.g$,this.Ds),this.nft=new NQ(this.Fht)),await this.Mpt()}$n(t,i){const e=Wt.Iy([i]);this.zQ.Ty(),this.zQ=e;const s=this.Lpt(t,this.Cpt,e.ly);return this.Cpt=s,s}jpt(t){if(Qa(this.Opt,El.CEA608))return;const i=t.Hlt.$ft;if(function(t){return t.some((t=>t.y8===iY||t.y8===eY))}(i)){this.ypt=new qF(this.CQ);const t=function(t){const i=[];for(const e of t)if(e.y8===iY){const t=az(e.zD);for(const e of t)i.push(e)}else if(e.y8===eY){const t=$F(e.zD);for(const e of t)if(e.uet<=4){const t=tY[e.uet];i.push(Ei({},e,{uet:t}))}}return i}(i);for(const i of t)this.ypt.Qmt(i);this.upt.$Y(this.ypt.Z)}}async Lpt(t,i,e){yi(e),i&&await i.catch(ya),this.Uat===t&&this.Rpt||(await this.Ppt(),yi(e),await this.Dpt(),yi(e),t&&await this.jQ(t))}async Ppt(){const t=this.Uat;this.Uat=void 0,this.Rpt=!1,this.dpt=void 0,t&&(t.fn(yo.Sx,this.zpt),t.pgt(!1),t.fn(yo.NO_QUALITY,this.Ds)),this.Bpt&&(this.Bpt.gn(),this.Bpt=void 0),this.Sgt&&(await this.Sgt.gn(),this.Sgt=void 0),this.ypt&&(this.upt.eV(this.ypt.Z),await this.ypt.gn())}async jQ(t){this.Uat=t,this.jpt(t),t.yn(yo.Sx,this.zpt),t.yn(yo.NO_QUALITY,this.Ds),await this.kpt(t),this.Sgt=this.Upt(t),this.Sgt.yn(AY,this.Ds),this.Sgt.yn("Zut",this.wpt),this.Sgt.tct=t.dgt,this.Bpt=new oY(this.cz,this.Sgt),this.Bpt.yn(yo.Mx,this.hgt),t.pgt(!0),this.Rpt=!0}Upt(t){return new SQ(this,this.cz,this.cz,this.OQ,this.UG,this.Kft,this.plt,this.sft,this.Kdt,this.nft,this.Dft,this.SV).Cst(t)}async tr(t){this.zQ.Ty(),this.Cpt&&(await this.Cpt.catch(ya),this.Cpt=void 0),await this.Ppt(),t||await this.Dpt(),await this.Ept()}async Qpt(){await this.Ppt()}rgt(t){var i;null==(i=this.Bat)||i.rgt(t)}async egt(t,i){var e,s;await this.pct(),null==(e=this.Bat)||e.egt(i);const n=null==(s=this.Sgt)?void 0:s.Jut.fdt.odt(t);if(n&&n.V>0)for(let t=0;t<n.V;t++){var r;await(null==(r=this.Fht)?void 0:r.wS(n.Cn(t),n.jn(t)))}await this.yct()}Fpt(t){const i=t.Ht.dgt;if(void 0===i)return this.Ypt(t);if(i.some((t=>this.nft.N$(t))))return this.Ypt(t);this.yo(new Jr("Vpt"))}Ypt(t){this.Sgt&&this.Uat&&this.Uat===t.Ht&&(this.Sgt.tct=this.Uat.dgt)}async pct(t){this.Sgt&&await this.Sgt.pct(t)}async yct(t){this.Sgt&&await this.Sgt.yct(t)}JK(){const t=this.TE.jP;return this.UG.JK(t)}Mpt(){const t=this.gpt.sdt,i=x.max(0,t.Cn(0)-.1),e=t.jn(0)+.01;return this.Fht.s3(i,e)}Tpt(t){if(!HA(t.gX))return!1;if(this.gpt.m8)return!0;return void 0!==this.gpt.Spt}bct(t){if(!ou(this.x3))return;const i=this.Sgt,e=t.Sgt;void 0!==i&&void 0!==e&&i.bct(e,this.Cn,this.jn)}async gn(t){this.Bo();try{await this.tr(t),await this.Qpt()}catch(t){}}constructor(t,i,e,s,n,r,o,h,a,u,c,l,d){super(),this.Uat=void 0,this.Sgt=void 0,this.Rpt=!1,this.zQ=new Wt,this.Cpt=void 0,this.dpt=void 0,this.Fht=void 0,this.nft=new IQ,this.bpt=void 0,this.ypt=void 0,this.upt=new YE([]),this.wpt=()=>{!this.dct()&&this.edt()&&this.gpt.wpt()},this.hgt=t=>{this.Uat.hgt(t),this.yo(new GQ(t.Wlt,t.qmt))},this.zpt=t=>{this.Fpt(t)},this.aS=function(){const t=VQ;return VQ+=1,t}(),this.x3=t,this.OQ=s,this.UG=n,this.gpt=i,this.cz=e,this.plt=r,this.CQ=o,this.Apt=h,this.sft=a,this.Kdt=a?UT(t,a):void 0,this.Dft=u,this.Opt=c,this.Kft=l,this.SV=d}};var bY=class extends tu{FK(t,i){return this.Gpt(t,i)}async Gpt(t,i){for(const i of t)this.Wpt(i);await this.$n(i);for(const t of this.Hpt.Zpt)t.YA===Ri.ON&&(t.Jat&&0!==t.Jat.length?await this.Xpt.jQ(t):this.yo(new QQ("No supported representation found in the AdaptationSet with mimetype : "+t.YA)))}get Gx(){return this.iB}get ct(){return this.cz.ct}qpt(t){return new yY(t,this,this.cz,this.OQ,this.UG,this.plt,this.CQ,this.Apt,this.Kpt,this.Dft,this.Opt,this.Kft,this.SV)}dct(){return this.Pgt.some((t=>t.dct()))}edt(){return 0!==this.Pgt.length&&this.Pgt.every((t=>t.edt()))}wpt(){this.Jpt()&&this.yo(new YQ)}xpt(t){if(Et(t,"audio")){if(this.a3.A5)return this.a3.A5}else if(Et(t,"video")&&this.a3.y5)return this.a3.y5;throw new b("Cannot allocate source buffer for mime type "+t)}$pt(t){t.yn([Me.ua,Zi.Ab,Zi.Tb,Zi.Sb,Zi.Ib,Zi.Qy],this.Ds),t.yn(po.g$,this.tAt),t.yn("Vpt",this.Ds)}get Rt(){return this.Pgt.some((t=>t.Rt))}async iAt(t){await Promise.all(this.Pgt.map((i=>i.gn(t)))),nt(this.Pgt)}get ht(){return this.Oz}get TE(){if(0===this.Pgt.length)return Mo.PP();const t=this.Pgt.map((t=>t.TE));let i=Mo.RP(0,1/0);for(const e of t)i=i.Sn(e);if(0===i.V)return i;if(this.edt()){const t=i.Sn(this.sdt);if(0===t.V)return i;const e=t.jn(t.V-1);let s=0;for(const t of this.Pgt)s=x.max(s,t.vpt);e<=s&&(i=i.pP(new Mo([e,s],[!0,!0])))}return i}get m8(){return this.cz.m8}get xE(){return this.cz.xE}get Spt(){return this.eAt}get jn(){if(this.sAt){const t=this.ct;if(!j(t)&&t!==tt)return t}if(!this.Pgt.length)return NaN;let t=0;for(const i of this.Pgt)t=x.max(t,i.jn);return t}get sAt(){const t=this.Hpt.Fft;if(t.YA===nc.FQ)return!1;const i=t.nAt;return 0!==i.length&&this.Hpt===i[i.length-1]}get _k(){if(!this.Pgt.length)return Mo.PP();let t=new Mo([0,1/0]);for(const i of this.Pgt)t=t.Sn(i._k);if(t.V>0&&this.sAt&&isFinite(this.ct)){const i=this.ct,e=t.jn(t.V-1);i>e&&(t=t.pP(Mo.RP(e,i).fP()))}return t}get kc(){return this.Hpt}get nt(){return this.Ul}get rt(){return this.Pz}get ji(){return this.bu.ji}get Ti(){return this.bu.Ti}get uV(){const t=this.xE,i=this.TE,e=i.bP(t);if(-1!==e)return{Cn:i.Cn(e),jn:i.jn(e)}}get sdt(){const t=this.Hpt.Cn,i=this.sAt?1/0:this.Hpt.jn;return Mo.RP(t,i)}Jpt(){if(this.dct())return!1;if(!this.edt())return!1;const t=this.TE;if(0===t.V)return!1;const i=this.xE;if(this.sAt)return t.Cn(t.V-1)<=i;{const e=t.Sn(this.sdt);if(0===e.V)return!0;const s=e.Cn(e.V-1),n=e.jn(e.V-1)+.1;return s<=i&&i<=n}}get rAt(){return this.oAt}async pct(t){this.oAt||(this.oAt=!0,await Promise.all(this.Pgt.map((i=>i.pct(t)))))}async yct(t){this.oAt&&(this.oAt=!1,await Promise.all(this.Pgt.map((i=>i.yct(t)))))}async gn(t){this.cz.fn(Zi.xb,this.hAt),this.cz.fn(Zi.Vy,this.aAt),this.Bo(),this.Hpt.fn(ea.Yut,this.Ds),this.uAt.Ty(),this.Cpt&&(await this.Cpt.catch(ya),this.Cpt=void 0),await this.iAt(t),await this.Xpt.gn(),this.Oz.gn(),this.Pz.gn(),this.Ul.gn(),this.cAt()}Wpt(t){this.lAt.push(t),t.yn("dAt",this.fAt);const i=t.YA===Ri.SI?this.Oz:this.Pz;for(const e of t.Z)i.tt(e)}gAt(t){const i=t.YA===Ri.SI?this.Oz:this.Pz;for(const e of t.Z)i.it(e),e.gn();t.gn(),ra(this.lAt,t)}cAt(){for(let t=this.lAt.length-1;t>=0;t--)this.gAt(this.lAt[t])}get _At(){return this.lAt.map((t=>t.Bat)).filter($t)}get vAt(){return this.Pgt.map((t=>t.Bat)).filter($t)}$n(t,i){return this.uAt.Ty(),this.uAt=Wt.Iy([i]),this.Cpt=Vh(this.oD(t,this.Cpt,this.uAt.ly),this.uAt).catch(this.wAt),this.Cpt}async oD(t,i,e){i&&await i.catch(ya),yi(e);const s=[],n=this.Pgt.slice(),r=t.slice();nt(this.Pgt);for(const t of n){const i=t.Bat;i&&Qa(r,i)?(this.Pgt.push(t),s.push(t.$n(i,e)),ra(r,i)):(this.Ul.eV(t.nt),await t.gn(),yi(e))}for(const t of r){const i=this.qpt(t.sct);this.Ul.$Y(i.nt),this.Pgt.push(i),this.$pt(i),s.push(i.$n(t,e))}await Promise.all(s)}async D$(t,i,e){this.a3!==e&&(this.a3=e,await this.iAt(!1)),await this.$n(t),this.eAt=i}async mAt(t){for(const i of this.Pgt){const e=i.Bat;if(void 0!==e)for(const s of e.Hlt.Jat){(s.GY||[]).some((i=>i.DF&&pm(Tc(t),jx(i.DF))))&&!s.mgt&&(s.mgt=!0,await i.egt(s,s.Wut),this.yo(new Go(new lu(vt.CONTENT_PROTECTION_OUTPUT_RESTRICTED,"Content unavailable due to DRM restrictions"))))}}}async pAt(t){for(const i of this.Pgt){const e=i.Bat;if(void 0!==e)for(const s of e.Jat){const e=s.GY,n=s.Wut;if(void 0===e||0===e.length||void 0===n)continue;const r=this.AAt(e,t.Rb);n.fot!==r&&(r?i.rgt(n):await i.egt(s,n))}}}AAt(t,i){let e=!1;return i.iM(((i,s)=>{t.some((t=>t.DF&&pm(Tc(s),jx(t.DF))))&&"usable"===i&&(e=!0)})),e}bct(t){if(void 0===t)return;const i=t.Hpt;if(this.Hpt.yAt===i||this.Hpt.bAt===i)for(const i of this.Pgt){const e=dl(t.Pgt,(t=>t.E3===i.E3));void 0!==e&&i.bct(e)}}constructor(t,i,e,s,n,r,o,h,a,u,c,l,d,f){var g,_;super(),this.Oz=new pe,this.Pz=new pe,this.lAt=[],this.uAt=new Wt,this.oAt=!0,this.Pgt=[],this.Cpt=void 0,this.tAt=Yh((()=>{this.yo(new ii(this.xE))}),350),this.fAt=t=>{const i=t.MAt.Bat;if(i)for(const t of this.lAt){var e;t.Bat&&t.Bat!==i&&t.YA===(null==(e=i.agt)?void 0:e.YA)&&(t.fn("dAt",this.fAt),t.Bat.Rt=!1,t.yn("dAt",this.fAt))}this.Ds(t)},this.wAt=t=>{Tu(t)||this.yo(new Uc(vy(t,vt.MEDIA_LOAD_ERROR)))},this.hAt=t=>{const i=t.G9;i&&this.mAt(i).catch(this.wAt)},this.TAt=t=>{this.pAt(t).catch(this.wAt)},this.aAt=t=>{const i=t.G9;if(i)for(const t of this.vAt)for(const e of t.Hlt.Jat){const s=(e.GY||[]).some((t=>t.DF&&pm(Tc(i),jx(t.DF))));e.mgt&&s&&(e.mgt=!1,e.Wut&&t.rgt(e.Wut))}},this.OQ=e,this.UG=s,this.plt=n,this.cz=t,this.iB=ft(),this.lAt=[],this.Hpt=o,this.eAt=h,this.SV=f,this.CQ=u,this.Xpt=new UQ(t,e,s,n,u,null==(_=null==r||null==(g=r.dash)?void 0:g.segmentRelativeVttTiming)||_),this.Ul=new YE([this.Xpt.nt]),this.Dft=l,this.Opt=d,this.Hpt.yn(ea.Yut,this.Ds),this.bu=a,this.a3=i,this.Kft=r.lowLatency,this.Apt=c,this.Kpt=r.abr,this.cz.yn(Zi.xb,this.hAt),this.cz.yn(Zi.Vy,this.aAt)}};r(),r(),r();var MY=/^P(?:(\d+)Y)?(?:(\d+)M)?(?:(\d+)D)?(?:T(?:(\d+)H)?(?:(\d+)M)?(?:(\d*\.?\d*)S)?)?$/,TY=class t{static dj(i){const e=i.match(MY);if(!e)throw new b("The given value could not be parsed as a valid DateTimeInterval");const s=Number(e[1])||0,n=Number(e[2])||0,r=Number(e[3])||0,o=Number(e[4])||0,h=Number(e[5])||0,a=Number(e[6])||0;return new t(31536e3*s+2592e3*n+86400*r+3600*o+60*h+a)}get n_t(){return H.BU(this.SAt,1e3)}NAt(){return this.SAt}IAt(){return 1e3*this.SAt}constructor(t){this.SAt=t}};Qi(),r();var SY=function(t){return t.DAt="progressive",t.EAt="interlaced",t.dI="unknown",t}({});r();var NY=class{BB(){return this.kAt/this.xAt}constructor(t,i){this.kAt=t,this.xAt=i}},IY=/^(?:true|false)$/i,DY=/^(-?)(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(?:Z|([+-])(\d{2}):(\d{2}))?$/;function EY(t){if(void 0!==t)return TY.dj(t)}function kY(t){if(void 0===t)return;const i=t.match(DY);if(!i)throw new b("The given value could not be parsed as a valid Date");const[,e,s,n,r,o,h,a,u,c,l,d]=i,f=("-"===e?-1:1)*Number(s),g=Number(n)-1,_=Number(r),v=Number(o);let w=Number(h);const m=Number(a),p=Number("0."+(u||"")),A=x.round(1e3*p);if(c){w-=("-"===c?-1:1)*(60*Number(l)+Number(d))}const y=new Date(Date.UTC(f,g,_,v,w,m,A));if(j(y.getTime()))throw new b("The given value could not be parsed as a valid Date");return y}function xY(t){if(!t)return;const i=/(\d+)-(\d+)/.exec(t);return i?[vl(i[1]),vl(i[2])]:void 0}function LY(t){if(void 0!==t){if(!j(Number(t)))try{return D.fromString(t,!0)}catch(t){}throw new b("The given value could not be parsed as a valid unsigned long")}}function vl(t){if(void 0===t)return;const i=Number(t);if(!j(i))return i;throw new b("The given value could not be parsed as a valid Number")}function CY(t){if(void 0===t)return;const i=t.split("/"),e=Number(i[0]),s=Number(i[1]||1);if(!j(e)&&!j(s))return new NY(e,s);throw new b("The given value could not be parsed as a valid frame rate")}function Ze(t){if(void 0!==t){if(IY.test(t))return"true"===t.toLowerCase();if(!j(C(t)))return Boolean(C(t));throw new b("The given value could not be parsed as a valid Boolean.")}}function jY(t){return{zu:t.qD,LAt:Ze(t.KD("availabilityTimeComplete")),CAt:vl(t.KD("availabilityTimeOffset"))}}function OY(t){return t.map(jY)}function RY(t){const i=WY(t),e=function(t,i,e,s){let n=t.JD(e,i);return void 0===n&&(n=t.KD(s+":"+i)),n}(t,"default_KID","urn:mpeg:cenc:2013","cenc");let s;const n=AI(t,"pssh","urn:mpeg:cenc:2013","cenc")[0];if(void 0!==n&&(s=Mm(n.qD)),!s){const i=AI(t,"pro","urn:microsoft:playready","mspr")[0];void 0!==i&&(s=function(t){const i=Zn(t.qD),e=new T([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),s=i.length,n=12+e.length+4+s,r=new ArrayBuffer(n),o=new T(r),h=new DataView(r),a=new da;$(h,a,n),$(h,a,1886614376),$(h,a,0),Vw(h,a,e),$(h,a,s),Vw(h,a,i),!1;return o.buffer}(i))}return{DF:e,b8:s,y8:i.y8,zD:i.zD}}function PY(t){return{jAt:t.KD("sourceURL"),Uct:xY(t.KD("range"))}}function zY(t,i){const e=t.KD("d"),s=t.KD("t"),n=vl(t.KD("r"));i.push({ct:e,lB:s,OAt:n})}function BY(t){return{Tlt:t.KD("index"),RAt:xY(t.KD("indexRange")),zj:t.KD("media"),PAt:xY(t.KD("mediaRange"))}}function UY(t){const i=FY(t),e=function(t){const i=t.map(BY);return i.length>0?i:void 0}(t.VD("SegmentURL"));return Ei({},i,{zAt:e,BAt:t.KD("xlink:href"),UAt:t.KD("xlink:actuate")})}function QY(t){const i=Ze(t.KD("availabilityTimeComplete")),e=vl(t.KD("availabilityTimeOffset")),s=xY(t.KD("indexRange")),n=Ze(t.KD("indexRangeExact")),r=t.VD("Initialization");if(r.length>1)throw new b("The provided MPEG-DASH document's "+t.GD+" element can not have more than one Initialization element.");const o=1===r.length?PY(r[0]):void 0,h=LY(t.KD("presentationTimeOffset")),a=t.VD("RepresentationIndex");if(a.length>1)throw new b("The provided MPEG-DASH document's "+t.GD+" element can not have more than one RepresentationIndex element.");return{LAt:i,CAt:e,RAt:s,QAt:n,FAt:o,YAt:h,VAt:1===a.length?PY(a[0]):void 0,GAt:EY(t.KD("timeShiftBufferDepth")),Lj:vl(t.KD("timescale"))}}function FY(t){const i=QY(t),e=t.VD("BitstreamSwitching"),s=e.length>0?PY(e[0]):void 0,n=vl(t.KD("duration")),r=t.VD("SegmentTimeline");if(r.length>1)throw new b("The provided MPEG-DASH document's "+t.GD+" element can not have more than one SegmentTimeline element.");const o=1===r.length?function(t){const i=[],e=t.VD("S");for(const t of e)zY(t,i);return i}(r[0]):void 0;return Ei({},i,{WAt:s,ct:n,sat:o,ZAt:vl(t.KD("startNumber")),HAt:vl(t.KD("endNumber"))})}function YY(t){return{XAt:function(t){if(!t)return;const i=t.split(/\s/);return i.length>1?(i.length=2,i.map(vl)):1===i.length?i.map(vl)[0]:void 0}(t.KD("audioSamplingRate")),dht:t.KD("codecs"),qAt:Ze(t.KD("codingDependency")),GY:function(t){if(0!==t.length)return t.map(RY)}(t.VD("ContentProtection")),KAt:function(t){return t.map(ZY)}(t.VD("EssentialProperty")),JAt:function(t){return t.map(HY)}(t.VD("SupplementalProperty")),Igt:CY(t.KD("frameRate")),Ti:vl(t.KD("height")),$At:vl(t.KD("maxPlayoutRate")),tyt:vl(t.KD("maximumSAPPeriod")),gX:t.KD("mimeType"),iyt:t.KD("profiles"),eyt:t.KD("sar"),syt:function(t){switch(t){case SY.DAt:case SY.EAt:case SY.dI:return t;default:return}}(t.KD("scanType")),nyt:t.KD("segmentProfiles"),ryt:vl(t.KD("startWithSAP")),ji:vl(t.KD("width"))}}function VY(t){const i=OY(t.VD("BaseURL")),e=t.VD("SegmentBase");if(e.length>1)throw new b("The provided MPEG-DASH document's "+t.jD+" element can not have more than one SegmentBase element.");const s=1===e.length?QY(e[0]):void 0,n=function(t){const i=t.map(UY);return i.length>0?i:void 0}(t.VD("SegmentList")),r=t.VD("SegmentTemplate");if(r.length>1)throw new b("The provided MPEG-DASH document's "+t.jD+" element can not have more than one SegmentTemplate element.");const o=1===r.length?function(t){return Ei({},FY(t),{oyt:t.KD("bitstreamSwitching"),hyt:t.KD("index"),ayt:t.KD("initialization"),uyt:t.KD("media")})}(r[0]):void 0;return{cyt:i,lyt:s,dyt:n,fyt:o}}function GY(t){const i=YY(t),e=VY(t),s=vl(t.KD("bandwidth")),n=t.KD("dependencyId"),r=t.KD("id"),o=t.KD("mediaStreamStructureId"),h=vl(t.KD("qualityRanking"));if(t.VD("SegmentBase").length>1)throw new b("The provided MPEG-DASH document's Representation element can not have more than one SegmentBase element.");return Ei({},i,e,{FY:s,gyt:n,o:r,_yt:o,vyt:h})}function WY(t){return{y8:t.KD("schemeIdUri"),zD:t.KD("value")}}function ZY(t){return WY(t)}function HY(t){return WY(t)}function XY(t){return WY(t)}function qY(t){return WY(t)}function KY(t){var i;const e=YY(t),s=VY(t),n=function(t){return t.map(qY)}(t.VD("Accessibility")),r=Ze(t.KD("bitstreamSwitching")),o=t.KD("contentType"),h=vl(t.KD("group")),a=vl(t.KD("id")),u=(null==(i=t.VD("Label")[0])?void 0:i.qD)||"",c=t.KD("lang"),l=vl(t.KD("maxBandwidth")),d=CY(t.KD("maxFrameRate")),f=vl(t.KD("maxHeight")),g=vl(t.KD("maxWidth")),_=vl(t.KD("minBandwidth")),v=CY(t.KD("minFrameRate")),w=vl(t.KD("minHeight")),m=vl(t.KD("minWidth")),p=t.KD("par"),A=function(t){return t.map(GY)}(t.VD("Representation"));if(0===A.length)throw new b("The provided MPEG-DASH document has an AdaptationSet with no valid Representation's");const y=function(t){return t.map(XY)}(t.VD("Role")),M=Ze(t.KD("segmentAlignment"))||!1,T=vl(t.KD("selectionPriority")),S=T||1,N=Ze(t.KD("subsegmentAlignment"))||!1;let I;try{I=vl(t.KD("subsegmentStartsWithSAP"))}catch(t){}return Ei({},e,s,{$ft:n,WAt:r,VN:o,agt:h,o:a,kh:u,gs:c,wyt:l,myt:d,pyt:f,Ayt:g,yyt:_,byt:v,Myt:w,Tyt:m,Syt:p,Jat:A,Lgt:y,Nyt:M,hG:S,Iyt:N,Dyt:I,Eyt:t.KD("xlink:actuate")||"onRequest",kyt:t.KD("xlink:href")})}function JY(t){const i=LY(t.KD("presentationTime"))||D.ZERO,e=LY(t.KD("duration")),s=vl(t.KD("id")),n=function(t){const i=t.XD,e={};for(let t=0;t<i.length;t++)e[i[t].l]=i[t].zD;return e}(t),r=t.qD;return{jR:i,ct:e,o:s,XD:n,rI:""!==r.trim()?r:t.KD("messageData")||""}}function $Y(t){return{kyt:t.KD("xlink:href"),Eyt:t.KD("xlink:actuate"),y8:t.KD("schemeIdUri"),zD:t.KD("value"),Lj:vl(t.KD("timescale")),YAt:LY(t.KD("presentationTimeOffset")),_X:t.VD("Event").map(JY)}}function tV(t){const i=VY(t),e=t.VD("AssetIdentifier");if(e.length>1)throw new b("The provided MPEG-DASH document's Period element can not have more than one AssetIdentifier element.");const s=1===e.length?function(t){return WY(t)}(e[0]):void 0,n=function(t){return t.map(KY)}(t.VD("AdaptationSet")),r=Ze(t.KD("bitstreamSwitching")),o=EY(t.KD("duration")),h=function(t){return t.map($Y)}(t.VD("EventStream")),a=t.KD("id"),u=EY(t.KD("start")),c=(t.VD("Subset"),t.KD("xlink:href"));return Ei({},i,{Yat:n,xyt:s,WAt:r,ct:o,Lyt:h,o:a,Cn:u,Eyt:t.KD("xlink:actuate"),kyt:c})}function iV(t){const i=t.KD("schemeIdUri");if(!i)return;return{y8:i,zD:t.KD("value")}}function eV(t,i){const e=kY(t.KD("availabilityEndTime")),s=kY(t.KD("availabilityStartTime")),n=OY(t.VD("BaseURL")),r=t.KD("id"),o=function(t){return t.map((t=>""+t.qD))}(t.VD("Location")),h=EY(t.KD("maxSegmentDuration")),a=EY(t.KD("maxSubsegmentDuration")),u=EY(t.KD("mediaPresentationDuration")),c=(t.VD("Metrics"),EY(t.KD("minBufferTime")));if(!c)throw new b("The provided MPEG-DASH document's MPD element does not have the required 'minimumBufferTime' attribute.");const l=EY(t.KD("minimumUpdatePeriod")),d=function(t){return t.map((t=>tV(t)))}(t.VD("Period"));if(!d.length)throw new b("The provided MPEG-DASH document's MPD element does not have the required 'Period' element.");const f=t.KD("profiles");if(!f)throw new b("The provided MPEG-DASH document's MPD element does not have the required 'profiles' attribute.");const g=kY(t.KD("publishTime")),_=EY(t.KD("suggestedPresentationDelay")),v=EY(t.KD("timeShiftBufferDepth")),w=function(t){switch(t){case nc.QQ:case nc.FQ:return t;default:return}}(t.KD("type")),m=function(t){const i=[];for(const e of t){const t=iV(e);t&&i.push(t)}return i}(t.VD("UTCTiming")),p=function(t){if(0===t.length)return;const i=t[0],e=i.VD("Latency");if(0===e.length)return;const s=function(t){const i=t[0],e=vl(i.KD("target"));if(void 0===e)return;const s=vl(i.KD("min")),n=vl(i.KD("max"));return{Cyt:e,jU:s,CU:n}}(e);if(void 0===s)return;const n=function(t){if(0===t.length)return;const i=t[0],e=vl(i.KD("max")),s=vl(i.KD("min"));return{jU:s,CU:e}}(i.VD("PlaybackRate"));return{jyt:s,$E:n}}(t.VD("ServiceDescription"));return{Oyt:e,Ryt:s,cyt:n,o:r,Pyt:o,zyt:i,Byt:h,Uyt:a,Qyt:u,Fyt:c,Yyt:l,nAt:d,iyt:f,Vyt:g,Gyt:_,GAt:v,YA:w,Wyt:m,Zyt:p}}var sV=class{Hyt(t,i){return function(t,i){if(!t)throw new b("The provided MPEG-DASH document does not contain a valid MPD root element.");return eV(t,i)}(Fe.CD(t).sE,i)}};function nV(t){return{get bandwidth(){return t.FY},get codecs(){return t.dht},get id(){return t.o},get uid(){return t.Gx},get name(){return t.kh},get averageBandwidth(){return t.Xyt},get label(){return t.kh},set label(i){t.kh=Q(i)},get available(){return t.fot},get score(){return t.qyt},addEventListener(i,e){t.yn(i,e)},removeEventListener(i,e){t.fn(i,e)}}}function rV(t){return fe(nV(t),{get height(){return t.Ti},get width(){return t.ji},get frameRate(){return t.Igt},get firstFrame(){return t.Kyt}})}function oV(t){return fe(nV(t),{get audioSamplingRate(){return t.XAt}})}r(),r(),r(),r(),r(),r(),r(),r();var hV=class extends Jr{constructor(t){super("update"),this.quality=t}},aV=class extends tu{get kh(){return this.eB}set kh(t){this.eB!==t&&(this.eB=t,this.yo(new hV(this.ga)))}get Xyt(){}get fot(){return this.Jyt}get qyt(){}kQ(){this.Jyt=!1,this.yo(new hV(this.ga))}EQ(){this.Jyt=!0,this.yo(new hV(this.ga))}constructor(t,i,e,s,n){super(),this.o=t,this.FY=i,this.dht=e,this.$yt=n,this.Gx=VS(),this.eB=s||"",this.Jyt=!0}},uV=class extends aV{get ga(){return this.Za||(this.Za=rV(this)),this.Za}constructor(t,i,e,s,n,r,o,h,a=0){super(t,i,e,s,n),this.Igt=r,this.ji=o,this.Ti=h,this.Kyt=a,this.Za=void 0}},cV=class extends aV{get ga(){return this.Za||(this.Za=oV(this)),this.Za}constructor(t,i,e,s,n,r){super(t,i,e,s,n),this.XAt=r,this.Za=void 0}};r(),r();var Fr=class extends tu{get tbt(){const t=this.ibt();return null==t?void 0:t.Cn}get ebt(){const t=this.ibt();return null==t?void 0:t.jn}constructor(...t){super(...t),this.sbt=t=>{this.yo(t)}}},lV=class extends Fr{get Hlt(){return this.wct}get XAt(){var t;return null!=(t=this.nbt.rI.XAt)?t:this.Hlt.XAt}get FY(){return this.nbt.rI.FY||0}get dht(){const t=this.nbt.rI;return t.dht?[t.dht]:this.Hlt.dht}get rbt(){const t=this.nbt.rI;return t.dht?[t.dht]:[]}get Qp(){return this.nbt.rI.dht||this.Hlt.Qp}get qAt(){return this.nbt.rI.qAt||this.Hlt.qAt}get GY(){return this.nbt.rI.GY||this.Hlt.GY}get VN(){return this.gX+'; codecs="'+this.Qp+'"'}get KAt(){const t=this.nbt.rI;return t.KAt.length?t.KAt:this.Hlt.KAt}get ga(){return this.Za||(this.Za=function(t){return{get id(){return t.o},get type(){return t.YA},get bandwidth(){return t.FY},get width(){return t.ji},get height(){return t.Ti},get frameRate(){var i,e;return null!=(e=null==(i=t.Igt)?void 0:i.BB())?e:NaN},get audioSamplingRate(){return t.XAt}}}(this))}get Igt(){var t;return null!=(t=this.nbt.rI.Igt)?t:this.Hlt.Igt}get Ti(){return this.nbt.rI.Ti||this.Hlt.Ti}get o(){return this.nbt.rI.o||""}get Wft(){return this.obt}set Wft(t){this.obt=t}get Gft(){const t=this.nbt.hbt();if(t)return{zu:t.zu,Uct:t.Uct,zI:this.Fft.zI}}get $At(){return this.nbt.rI.$At||this.Hlt.$At||1}get tyt(){return this.nbt.rI.tyt||this.Hlt.tyt}get Fft(){return this.xdt.Fft}get gX(){return this.nbt.rI.gX||this.Hlt.gX}get xdt(){return this.Hlt.xdt}get iyt(){return this.nbt.rI.iyt||this.Hlt.iyt}get Wut(){return this.abt}get eyt(){return this.nbt.rI.eyt||this.Hlt.eyt}get syt(){return this.nbt.rI.syt||this.Hlt.syt}get ubt(){return this.nbt.ubt}get nyt(){return this.nbt.rI.nyt||this.Hlt.nyt}get sat(){return this.nbt.sat}get ryt(){return this.nbt.rI.ryt||this.Hlt.ryt}get YA(){const t=this.gX.split("/")[0];return"application"===t||"text"===t||yl(this.gX,this.dht)?Ri.ON:"video"===t?Ri.NI:"audio"===t?Ri.SI:"image"===t?Ri.II:Ri.dI}get ji(){return this.nbt.rI.ji||this.Hlt.ji}get Odt(){return this.cbt}set Odt(t){this.cbt=t}get mgt(){return this.lbt}set mgt(t){this.lbt=t}Wdt(t){const i=Ko(t)?this.nbt.dbt(t):this.nbt.Wdt(t);return{zu:i.zu,Uct:i.Uct,zI:this.Fft.zI}}fbt(){return this.nbt.fbt()}ibt(){return this.nbt.ibt()}gbt(){return this.nbt.gbt()}Pdt(t){return this.nbt.Pdt(t)}Bdt(t,i,e){return this.nbt.Bdt(t,this.Fft.zI,i,e)}kft(t){return Ko(t)?this.sat._bt(t,this.nbt):this.sat.kft(t)}kdt(t){return Ko(t)?this.sat.vbt(t,this.nbt):this.sat.kdt(t)}gn(){this.nbt.fn(ea.Qut,this.sbt)}constructor(t,i){if(super(),this.Za=void 0,this.obt=void 0,this.cbt=!1,this.lbt=!1,this.wct=t,this.nbt=i,this.nbt.yn(ea.Qut,this.sbt),this.YA===Ri.NI){var e,s;const t=null!=(s=null==(e=this.Igt)?void 0:e.BB())?s:NaN;this.abt=new uV(this.o,this.FY,this.Qp,"","",t,this.ji,this.Ti)}else this.YA===Ri.SI?this.abt=new cV(this.o,this.FY,this.Qp,"","",this.XAt):this.abt=void 0}},dV=class extends Fr{get $ft(){return this.nbt.rI.$ft}get XAt(){var t;return null!=(t=this.nbt.rI.XAt)?t:-1}get dht(){if(this.nbt.rI.dht)return[this.nbt.rI.dht];{const t=[];for(const i of this.Jat)i.rbt.length&&-1===t.indexOf(i.Qp)&&t.push(i.Qp);return t}}get Qp(){return this.dht.join()}get qAt(){return this.nbt.rI.qAt}get GY(){return this.nbt.rI.GY}get VN(){return this.gX+'; codecs="'+this.Qp+'"'}get KAt(){return this.nbt.KAt}get JAt(){return this.nbt.JAt}get Igt(){return this.nbt.rI.Igt}get agt(){return this.nbt.rI.agt}get Ti(){return this.nbt.rI.Ti||0}get o(){return this.nbt.rI.o}get kh(){return this.nbt.rI.kh||""}get $At(){return this.nbt.rI.$At}get tyt(){return this.nbt.rI.tyt}get Fft(){return this.xdt.Fft}get gX(){return this.nbt.rI.gX||this.fgt[0].gX}get xdt(){return this.Hpt}get iyt(){return this.nbt.rI.iyt}get Jat(){return this.fgt}get Lgt(){return this.nbt.rI.Lgt||[]}get eyt(){return this.nbt.rI.eyt}get syt(){return this.nbt.rI.syt}get nyt(){return this.nbt.rI.nyt}get hG(){return this.nbt.rI.hG}get ryt(){return this.nbt.rI.ryt}get YA(){const t=(this.nbt.rI.VN||this.gX).split("/")[0];return"application"===t||"text"===t||"subtitle"===t||yl(this.gX,this.dht)?Ri.ON:"video"===t?Ri.NI:"audio"===t?Ri.SI:"image"===t?Ri.II:Ri.dI}get ji(){return this.nbt.rI.ji||0}get cet(){return this.nbt.rI.gs||""}get Egt(){return this.tbt}get Dgt(){const t=this.Egt,i=this.ebt;if(void 0===t||void 0===i)return;const e=x.min(i,this.Fft.wbt);return x.max(t,e)}async Yn(t,i){if(0===this.fgt.length){const e=this.nbt.Jat.map((e=>this.mbt(e,t,i)));this.fgt=(await Promise.all(e)).filter($t)}this.pbt()}async mbt(t,i,e){const s=new lV(this,t),n=await i(s);if(yi(e),n)return s}pbt(){if(!this.fgt.length)throw new b("Detected an AdaptationSet without any supported Representations.")}ibt(){return this.nbt.ibt()}gbt(){return this.nbt.gbt()}gn(){this.nbt.fn(ea.Qut,this.sbt);for(const t of this.fgt)t.gn();nt(this.fgt)}constructor(t,i){super(),this.fgt=[],this.Hpt=t,this.nbt=i,this.nbt.yn(ea.Qut,this.sbt)}};function fV(t,i){const e=[];for(const s of i)for(const i of t)e.push(Fe.Ah(i,s));return e}r(),r(),r(),Qi(),r(),r(),r(),r(),Qi();var gV=class{Abt(t){const i=t-this.Hpt.Cn;if(i<0||i>=this.Hpt.ct)return;const e=this.ybt();return void 0!==e&&ce(e,i,1e-5)?this.bbt():this.Mbt(i)}Rdt(t){const i=t-this.Hpt.Cn;if(!(i<0))return this.Tbt(x.min(i,this.Hpt.ct))}bbt(){return this.Sbt(0)}Nbt(){const t=this.Hpt.ct;if(isFinite(t))return this.Tbt(t)}get Ibt(){return this.Hpt.Ebt.Dbt&&void 0!==this.kbt()}fbt(t){if(this.Hpt.Ebt.YA===nc.FQ){if(this.Ibt){const i=this.bbt(),e=this.kbt();if(void 0===i||void 0===e)return;return{xbt:t,Lbt:i,Cbt:e}}const i=this.jbt(t);if(!i)return;return{xbt:t,Lbt:this.Obt(t),Cbt:i}}{0;const i=this.bbt();if(i)return{xbt:t,Lbt:i,Cbt:this.Nbt()}}}gbt(t,i){if(i){let t=this.Yft(i.Lbt);const e=this.Ydt(i.Cbt);if(e){const i=this.Vft(e);(!t||i.getTime()<t.getTime())&&(t=i)}return t}{const i=this.bbt();if(i){const e=this.Vft(i);if(t.getTime()<e.getTime())return e}const e=this.Hpt.Ebt.Ryt;return t.getTime()<e.getTime()?e:void 0}}jbt(t){const i=(t.getTime()-this.Hpt.Ebt.Ryt.getTime())/1e3-this.Hpt.Cn+this.Rbt;let e=this.Tbt(ur(i,0,this.Hpt.ct));if(!e)return;if(e=this.Pbt(e,t),!e)return;let s=this.Ydt(e);for(;s&&this.qft(s,t);)e=s,s=this.Ydt(e);return e}Obt(t){let i;const e=this.zbt.GAt;if(e){const s=(t.getTime()-this.Hpt.Ebt.Ryt.getTime())/1e3-this.Hpt.Cn-e.NAt();i=this.Tbt(ur(s,0,this.Hpt.ct)),i||(i=this.bbt())}else i=this.bbt();if(!i)return;if(i=this.Pbt(i,t),!i)return;let s=this.Fdt(i);for(;s&&this.qft(s,t);)i=s,s=this.Fdt(i);return i}Pbt(t,i){let e=t;for(;e&&this.Vft(e).getTime()>i.getTime();)e=this.Fdt(e);if(!e)return;const s=this.Yft(e);if(s&&s.getTime()<=i.getTime()){const t=this.Fdt(e);for(t&&this.qft(t,i)&&(e=t);e;){if(this.Vft(e).getTime()>i.getTime())return;if(this.qft(e,i))break;e=this.Ydt(e)}if(!e)return}return e}qft(t,i){if(this.Ibt)return!0;if(this.Vft(t).getTime()>i.getTime())return!1;const e=this.Yft(t);return!(e&&i.getTime()>=e.getTime())}Bbt(t,i){if(this.Ibt)return!0;if(this.Ubt(t).getTime()>i.getTime())return!1;const e=this.Yft(t);return!(e&&i.getTime()>=e.getTime())}Qbt(t,i,e){const s=os(i,this.KM)+this.Hpt.Cn;return{Tlt:t,Fbt:i,lB:s,ct:e,dB:s+e}}Ubt(t){return this.Hpt.Ebt.YA===nc.FQ?new Date(this.Hpt.Ebt.Ryt.getTime()+1e3*(t.lB+t.ct)):this.Hpt.Ebt.Ryt}Vft(t){const i=this.Ubt(t);return this.Hpt.Ebt.YA===nc.FQ?new Date(i.getTime()-1e3*this.Rbt):i}Yft(t){let i=1/0;if(this.Hpt.Ebt.YA===nc.FQ){const e=this.zbt.GAt;e&&(i=this.Ubt(t).getTime()+1e3*t.ct+e.IAt())}const e=this.Hpt.Ebt.Oyt;return e&&(i=x.min(i,e.getTime())),i===1/0?void 0:new Date(i)}Ybt(t,i){return t.Tlt+i}get rQ(){return this.Hpt.Cn-os(this.Vbt,this.KM)}get YAt(){return os(this.Vbt,this.KM)}Pdt(t){return!1}Bdt(t,i,e,s,n){const r=this.Gbt(t);if(!r)return Promise.reject(new b("Invalid segment"));const o=this.Wbt(r.Tlt,i);return o?Promise.resolve(o):Ao(this.Zbt(r.Tlt,i,e,s),n)}Wbt(t,i){}Zbt(t,i,e,s){return Promise.reject(new b("Not supported"))}Fdt(t){const i=this.Gbt(t);if(i)return this.Sbt(i.Tlt-1)}Ydt(t){const i=this.Gbt(t);if(i)return this.Sbt(i.Tlt+1)}Gbt(t){const i=this.Sbt(t.Tlt);if(i&&i.lB===t.lB)return i;const e=this.Abt(t.lB);return e&&e.lB===t.lB?e:void 0}Hbt(t,i){const e=this.Udt(t);if(!e||!this.Pdt(e.Tlt))return;const s=this.Wbt(e.Tlt,i);return s?s.Hbt(t):void 0}Udt(t){return this.Sbt(t.Xbt)}kft(t){const i=this.Gbt(t);return!!i&&0===i.Tlt}_bt(t,i){const e=this.Hbt(t,i);return!!e&&0===e.Mlt}kdt(t){const i=this.Gbt(t);if(!i)return!1;const e=this.Nbt();return!!e&&i.Tlt===e.Tlt}vbt(t,i){const e=this.Hbt(t,i);if(!e)return!1;const s=this.Nbt();if(!s||e.Xbt!==s.Tlt)return!1;const n=this.Wbt(e.Xbt,i);return e.Mlt+1===n.V}wy(){}constructor(t,i){this.Hpt=t,this.zbt=i,this.KM=i.Lj,this.Rbt=i.CAt,this.Vbt=i.YAt}},_V=class extends gV{Sbt(t){if(t<0)return;const i=this.qbt.multiply(t),e=os(i,this.KM),s=this.Hpt.ct;if(e>=s)return;const n=this.Kbt();if(void 0!==n){if(t>n)return;if(t===n&&isFinite(s))return this.Qbt(t,i,s-e)}return isFinite(s)&&e+this.Jbt>s?this.Qbt(t,i,s-e):this.Qbt(t,i,this.Jbt)}ybt(){return 0}Mbt(t){const i=x.floor(t/this.Jbt),e=this.Kbt();return void 0!==e&&i>=e?this.Sbt(e):this.Sbt(i)}Tbt(t){if(t>=this.Hpt.ct){const t=x.ceil(this.Hpt.ct/this.Jbt)-1,i=this.Kbt();return void 0!==i&&t>=i?this.Sbt(i):this.Sbt(t)}return this.Mbt(t)}Kbt(){const t=this.zbt.HAt;var i;if(void 0!==t)return t-(null!=(i=this.zbt.ZAt)?i:1);const e=this.zbt.$bt;return void 0!==e&&e>0?e-1:void 0}kbt(){if(isFinite(this.Hpt.ct))return this.Nbt()}tMt(t,i){return this.qbt.multiply(t.Tlt+(i-1))}Yn(){}constructor(t,i){super(i,t);const e=t.iMt,s=t.ct;if(void 0===e||void 0===s)throw new b("MultipleSegmentBase does not have a segment duration specified.");this.qbt=e,this.Jbt=s}};function vV(t,i,e){const s=i.length;if(0===s)return-1;let n=0,r=s-1,o=t.eMt(i[n]),h=t.sMt(i[r]);for(;n<=r&&t.nMt(o,e)<=0&&t.nMt(e,h)<0;){const a=n+x.floor(t.rMt(e,o,h)*(r-n)),u=i[a],c=t.eMt(u),l=a+1<s?t.eMt(i[a+1]):t.sMt(u);if(t.nMt(l,e)<=0)n=a+1,o=l;else{if(!(t.nMt(e,c)<0))return a;r=a-1,h=c}}return-1}function wV(t,i){return vV(mV.Ld,t,i)}r(),r(),r();var mV=class t{static get Ld(){return null!=this.cht||(this.cht=new t),this.cht}eMt(t){return t.lB}sMt(t){return t.dB}nMt(t,i){return t.compare(i)}rMt(t,i,e){return t.subtract(i).toNumber()/e.subtract(i).toNumber()}};Qi();var pV=.01,AV=class extends gV{Sbt(t){if(!(t<0))return t<this.oMt.length?this.oMt[t].vlt:this.hMt(t-this.oMt.length)}ybt(){if(this.oMt.length>0)return os(this.oMt[0].lB,this.KM)}Mbt(t){if(this.aMt&&os(this.aMt.lB,this.KM)<=t){const i=os(this.aMt.lB,this.KM),e=os(this.aMt.ct,this.KM),s=x.floor((t-i)/e);return this.hMt(s)}if(this.oMt.length>0&&ce(t,os(this.oMt[0].lB,this.KM),1e-5))return this.oMt[0].vlt;const i=wV(this.oMt,D.fromNumber(t*this.KM));return i<0?void 0:this.oMt[i].vlt}Tbt(t){if(!this.aMt&&this.oMt.length>0){const i=this.oMt[this.oMt.length-1];if(function(t,i,e){return Hv(t,i,e)>=0}(t,os(i.dB,this.KM),1e-5))return i.vlt}const i=this.ybt();return i&&t<i?this.oMt[0].vlt:this.Mbt(t)}kbt(){return isFinite(this.Hpt.ct)?this.Nbt():this.Sbt(this.oMt.length-1)}tMt(t){return this.uMt(t)}hMt(t){if(!this.aMt)return;const i=this.aMt.lB,e=this.aMt.ct,s=i.add(e.multiply(t)),n=os(s,this.KM),r=this.Hpt.ct;if(n>=r)return;const o=this.oMt.length+t,h=x.min(os(e,this.KM),n+r);return this.Qbt(o,s,h)}uMt(t){return t.Fbt.add(this.Vbt)}Yn(){const t=this.zbt.rI.sat;if(!t)throw new b("MultipleSegmentBaseTO does not have a SegmentTimeline specified.");this.cMt(t)}cMt(t){const i=this.Vbt;this.lMt(t,i);const e=this.dMt(t);this.fMt(t,i,e.gMt,e.Xbt)}lMt(t,i){const e=this.oMt;if(0===t.length)nt(e);else{const s=t[0];let n=0;const r=os(s.lB?D.fromString(s.lB,!1).subtract(i):D.ZERO,this.KM);for(;n<e.length&&os(e[n].lB,this.KM)<r-pV;)n++;n>0&&e.splice(0,n)}}dMt(t){const i=this.oMt,e=this.Wmt;let s=0,n=0;for(;s<t.length&&n<i.length;){const r=t[s].OAt||0;if(r<0)break;const o=n+r;if(o>=i.length)break;if(i[o].lB.greaterThanOrEqual(e))break;if(i[n].vlt.Tlt===n)n=o+1;else for(;n<=o;)i[n].vlt.Tlt=n,n++;0,s++}return{gMt:s,Xbt:n}}fMt(t,i,e,s){const n=this.oMt;let r,o=e,h=s;for(;o<t.length;){const e=t[o],s=D.fromString(e.ct,!1),a=e.OAt||0;let u;if(e.lB){if(u=D.fromString(e.lB,!1).subtract(i),h>0){const t=n[h-1];t.dB.greaterThan(u)&&(t.ct=u.subtract(t.lB),t.dB=t.lB.add(t.ct))}}else u=h>0?n[h-1].dB:D.ZERO;if(a<0){if(o+1===t.length){r={lB:u,ct:s};break}const e=D.fromString(t[o+1].lB,!1).subtract(i);for(;u.lessThan(e);){const t=u.add(s);this._Mt(n,h,u,s,t),u=t,h++}}else{const t=h+a;for(;h<=t;){const t=u.add(s);this._Mt(n,h,u,s,t),u=t,h++}}o++}h<n.length&&n.splice(h),n.length>0&&(this.Wmt=n[n.length-1].lB),this.aMt=r}_Mt(t,i,e,s,n){if(i<t.length){const r=t[i];0,r.ct.equals(s)?r.vlt.Tlt=i:t[i]={lB:e,ct:s,dB:n,vlt:this.Qbt(i,e,os(s,this.KM))}}else t.push({lB:e,ct:s,dB:n,vlt:this.Qbt(i,e,os(s,this.KM))})}constructor(t,i){super(i,t),this.oMt=[],this.aMt=void 0,this.Wmt=D.ZERO,this.Yn()}};r(),Qi();var yV=class{get rI(){return this.Xp}get CAt(){return this.Xp&&void 0!==this.Xp.CAt?this.Xp.CAt:this.vMt?this.vMt.CAt:0}get YAt(){return this.Xp&&void 0!==this.Xp.YAt?this.Xp.YAt:this.vMt?this.vMt.YAt:D.ZERO}get GAt(){return this.Xp&&void 0!==this.Xp.GAt?this.Xp.GAt:this.vMt?this.vMt.GAt:this.xdt.Ebt.GAt}get Lj(){return this.Xp&&void 0!==this.Xp.Lj?this.Xp.Lj:this.vMt&&this.vMt.Lj?this.vMt.Lj:1}get RAt(){return this.Xp&&void 0!==this.Xp.RAt?this.Xp.RAt:this.vMt?this.vMt.RAt:void 0}get FAt(){return this.Xp&&void 0!==this.Xp.FAt?this.Xp.FAt:this.vMt?this.vMt.FAt:void 0}get sat(){return this.wMt||(this.wMt=this.mMt()),this.wMt}mMt(){if(this.pMt=this.AMt(),this.pMt)return this.pMt;if(this.vMt)return this.vMt.sat;throw new b("Missing media segment information.")}hbt(t){const i=this.FAt;if(i){return{zu:(void 0!==i.jAt?Fe.Ah(i.jAt,t.cyt[0]):t.cyt[0]).href,Uct:i.Uct}}const e=this.RAt;if(e)return{zu:t.cyt[0].href,Uct:[0,e[0]-1]}}Yn(t){this.Xp=t,this.pMt&&this.pMt.Yn()}wy(){this.pMt&&(this.pMt.wy(),this.pMt=void 0)}constructor(t,i,e){this.wMt=void 0,this.pMt=void 0,this.xdt=t,this.vMt=i,this.Xp=e}},bV=class extends yV{get ct(){return void 0!==this.Xp.ct?this.Xp.ct/this.Lj:this.vMt&&MV(this.vMt)?this.vMt.ct:void 0}get iMt(){return void 0!==this.Xp.ct?D.fromNumber(this.Xp.ct):this.vMt&&MV(this.vMt)?this.vMt.iMt:void 0}get ZAt(){return void 0!==this.Xp.ZAt?this.Xp.ZAt:this.vMt&&MV(this.vMt)?this.vMt.ZAt:void 0}get HAt(){return void 0!==this.Xp.HAt?this.Xp.HAt:this.vMt&&MV(this.vMt)?this.vMt.HAt:void 0}AMt(){return void 0!==this.Xp.sat?new AV(this,this.xdt):void 0!==this.Xp.ct?new _V(this,this.xdt):void 0}};function MV(t){return t instanceof bV}r();var TV=class{sM(t){return this.yMt.replace(/\$\$|\$(RepresentationID|Number|Bandwidth|Time)(?:%0(\d+)([diuxXo]))?\$/g,((i,e,s,n)=>{if("$$"===i)return"$";const r=t[e];if(void 0===r)return i;if(void 0===s)return r.toString();let o=function(t,i){switch(i){case"d":case"i":case"u":return t.toString(10);case"x":return t.toString(16);case"X":return t.toString(16).toUpperCase();case"o":return t.toString(8);default:return}}(r,n);return void 0===o?i:(o=Pc(o,Number(s),"0"),o)}))}constructor(t){this.yMt=t}};Qi();var SV=class t extends bV{get ayt(){return this.bMt?this.bMt:this.vMt&&this.vMt instanceof t?this.vMt.ayt:void 0}get uyt(){return this.MMt?this.MMt:this.vMt&&this.vMt instanceof t?this.vMt.uyt:void 0}hbt(t){const i=this.ayt;if(!i)return super.hbt(t);const e=i.sM({Bandwidth:t.rI.FY,RepresentationID:t.rI.o});return{zu:Fe.TA(e,t.cyt[0])}}Wdt(t,i){var e;const s=null!=(e=i.ubt.ZAt)?e:1,n=this.uyt.sM({Bandwidth:i.rI.FY,Number:i.sat.Ybt(t,s),RepresentationID:i.rI.o,Time:i.sat.tMt(t,s)});return{zu:Fe.TA(n,i.cyt[0])}}dbt(t,i){}get $bt(){}constructor(t,i,e){super(t,i,e),this.bMt=e.ayt?new TV(e.ayt):void 0,this.MMt=e.uyt?new TV(e.uyt):void 0}};r(),Qi();var NV=class t extends bV{Wdt(t,i){const e=this.zAt[t.Tlt],s=i.cyt[0];let n;return n=e.zj?Fe.Ah(e.zj,s):s,{zu:n.href,Uct:e.PAt}}dbt(t,i){}get zAt(){return void 0!==this.Xp.zAt?this.Xp.zAt:this.vMt&&this.vMt instanceof t?this.vMt.zAt:void 0}get $bt(){var t;return null==(t=this.zAt)?void 0:t.length}};r(),r(),r(),r();var IV=class{Hbt(t){const i=this.Qdt(t.Mlt);if(i&&i.lB===t.lB)return i;const e=this.TMt(t.lB);return e&&e.lB===t.lB?e:void 0}},DV=class extends IV{get V(){return this.SMt.length}Qdt(t){if(t>=0&&t<this.V)return this.NMt(this.SMt[t])}TMt(t){const i=this.IMt(t);if(this.SMt.length>0){const t=this.SMt[0];if(i<=os(t.lB,this.Lj))return this.NMt(t)}const e=wV(this.SMt,D.fromNumber(i*this.Lj));if(!(e<0))return this.NMt(this.SMt[e])}zdt(t){const i=this.IMt(t);if(this.SMt.length>0){const t=this.SMt[this.SMt.length-1];if(i>=os(t.dB,this.Lj))return this.NMt(t)}return this.TMt(t)}NMt(t){const i=os(t.lB,this.Lj)-this.YAt,e=i+this.DMt,s=os(t.ct,this.Lj);return{Xbt:this.Xbt,Mlt:t.Tlt,lB:e,Fbt:D.fromNumber(i*this.Lj),ct:s,dB:e+s,EMt:[t.kMt,t.xMt]}}IMt(t){return t-this.DMt+this.YAt}constructor(t,i,e,s,n){super(),this.Xbt=t,this.Lj=i,this.DMt=e,this.YAt=s,this.SMt=n}};r(),r(),r(),Qi();var EV=class t{gmt(){return this.OC.tc<this.rI.byteLength}LMt(){const i=this.CMt(),e=this.jMt(),s=this.OC.tc,n=this.rI.byteLength;let r;r=t.OMt(e)?n-s:t.RMt(e);const o=s+r<=n?r:n-s,h=ss(this.rI,this.OC,o);return new xV(i,Al(h))}CMt(){const t=this.jMt();if(t.length>7)throw new RangeError("Invalid EBML ID size");let i=0;for(let e=0;e<t.length;e++)i=256*i+t[e];return i}jMt(){const t=on(this.rI,this.OC.Zb());if(0===t)throw new RangeError("EBML variable sized integer is invalid");const i=8-(31-Cw(t));return Fe.lA(i<=8&&i>=1,"Incorrect log2 value"),ss(this.rI,this.OC,i)}static RMt(t){if(8===t.length&&224&t[1])throw new k("EBML variable sized integer is too large");let i=0;for(let e=0;e<t.length;e++){const s=t[e];if(0===e){i=s&(1<<8-t.length)-1}else i=256*i+s}return i}static OMt(t){for(const i of kV)if(pm(t,new T(i)))return!0;return!1}constructor(t){this.rI=t,this.OC=new da}},kV=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]],xV=class{PMt(){return this.zMt.byteOffset}BMt(){return new EV(this.zMt)}UMt(){const t=this.zMt.byteLength;if(t>8)throw new RangeError("EMBL integer field size is too large");if(8===t&&224&this.zMt.getUint8(0))throw new RangeError("EMBL integer field value is too large");let i=0;for(let e=0;e<t;e++){i=256*i+this.zMt.getUint8(e)}return i}zJ(){if(4===this.zMt.byteLength)return this.zMt.getFloat32(0);if(8===this.zMt.byteLength)return this.zMt.getFloat64(0);throw new RangeError("Invalid size for EMBL floating-point field")}constructor(t,i){this.id=t,this.zMt=i}};function LV(t,i){const e=function(t){const i=new EV(Al(t)),e=i.LMt();if(e.id!==jV)throw new k("Missing WebM EBML header");const s=i.LMt();if(s.id!==OV)throw new k("Missing WebM SegmentElement");const n=s.PMt(),r=function(t){const i=t.BMt();let e;for(;i.gmt();){const t=i.LMt();if(t.id===RV){e=t;break}}if(!e)throw new k("Missing WebM InfoElement");return function(t){const i=t.BMt();let e,s=1e6;for(;i.gmt();){const t=i.LMt();t.id===PV?s=t.UMt():t.id===zV&&(e=t.zJ())}if(void 0===e)throw new k("Missing Duration in WebM InfoElement");const n=s/1e9,r=e*n;return{timecodeScale:n,duration:r}}(e)}(s);return{segmentOffset:n,timecodeScale:r.timecodeScale,duration:r.duration}}(i),s=new EV(Al(t)).LMt();if(s.id!==BV)throw new k("Missing WebM CuesElement");const n=function(t,i,e,s){const n=[],r=t.BMt();let o,h;for(;r.gmt();){const t=r.LMt();if(t.id!==UV)continue;const e=CV(t);if(!e)continue;const s=e.unscaledTime,a=i+e.relativeOffset;void 0!==o&&n.push({Tlt:n.length,lB:o,ct:s.subtract(o),dB:s,kMt:h,xMt:a-1}),o=s,h=a}if(void 0!==o){0;const t=D.fromNumber(s/e);n.push({Tlt:n.length,lB:o,ct:t.subtract(o),dB:t,kMt:h,xMt:void 0})}return n}(s,e.segmentOffset,e.timecodeScale,e.duration);return{Lj:x.round(1/e.timecodeScale),QMt:n}}function CV(t){const i=t.BMt(),e=i.LMt();if(e.id!==QV)throw new k("Missing CueTime in WebM CuePointElement");const s=D.fromNumber(e.UMt()),n=i.LMt();if(n.id!==FV)throw new k("Missing CueTrackPositions in WebM CuePointElement");const r=n.BMt();let o=0;for(;r.gmt();){const t=r.LMt();if(t.id===YV){o=t.UMt();break}}return{unscaledTime:s,relativeOffset:o}}Qi();var jV=440786851,OV=408125543,RV=357149030,PV=2807729,zV=17545,BV=475249515,UV=187,QV=179,FV=183,YV=241,VV=class extends gV{Sbt(t){if(0===t)return this.FMt}ybt(){return 0}Mbt(t){return this.FMt}Tbt(t){return this.Mbt(t)}kbt(){return this.FMt}tMt(t,i){return D.ZERO}fbt(t){const i=this.YMt(t);return i&&{xbt:t,Lbt:i,Cbt:i}}YMt(t){const i=this.FMt;return this.qft(i,t)?i:void 0}jbt(t){return this.YMt(t)}Obt(t){return this.YMt(t)}Yn(){}Pdt(t){return 0===t&&void 0!==this.VMt}Wbt(t,i){const e=i.cyt[0].href;return this.GMt.get(e)}Zbt(t,i,e,s){const n=i.cyt[0].href;let r=this.WMt.get(n);if(void 0===r){const o=i.gX,h=this.ZMt.ly;if(HA(o))r=this.HMt(t,n,e,s,h);else{if(!XA(o))throw new qi(vt.MEDIA_NOT_SUPPORTED,"Unsupported MIME type for segment index: "+o);r=this.XMt(t,n,i,e,s,h)}this.WMt.set(n,r)}return r}async HMt(t,i,e,s,n){const r=this.VMt,o=await s.aft(i,r,e,n),h=this.qMt(t,o);return this.GMt.set(i,h),h}qMt(t,i){const e=this.VMt,s=Z.ij(new DataView(i),new da);if(s.YA!==Rt.DC)throw new b("Invalid segment index");const n=Rs.Mj(s.rI),r=function(t,i){const e=[];let s=t.KR,n=i+t.JR.toNumber(),r=0;for(const i of t.tP){const t=i.WR,o=D.fromNumber(i.ct),h=s.add(o);0===i.GR&&e.push({Tlt:r++,lB:s,ct:o,dB:h,kMt:n,xMt:n+t-1}),n+=t,s=h}return e}(n,e[1]+1);return new DV(t,n.Lj,this.Hpt.Cn,os(this.Vbt,this.KM),r)}async XMt(t,i,e,s,n,r){const o=e.hbt(),h=this.VMt,a=n.aft(o.zu,o.Uct,s,r),u=n.aft(i,h,s,r),[c,l]=await Promise.all([a,u]),d=this.KMt(t,l,c);return this.GMt.set(i,d),d}KMt(t,i,e){const s=LV(new T(i),new T(e));return new DV(t,s.Lj,this.Hpt.Cn,os(this.Vbt,this.KM),s.QMt)}wy(){super.wy(),this.ZMt.Ty()}constructor(t,i){super(i,t),this.GMt=ll(),this.WMt=ll(),this.ZMt=new Wt,this.VMt=t.RAt,this.FMt=this.Qbt(0,D.ZERO,this.Hpt.ct)}},GV=class extends yV{get ZAt(){}Wdt(t,i){return{zu:i.cyt[0].href}}dbt(t,i){return{zu:i.cyt[0].href,Uct:t.EMt}}AMt(){return new VV(this,this.xdt)}};r();var WV=class extends Jr{constructor(){super(ea.Qut)}};r(),Qi();var ZV=class extends tu{get rI(){return this.Xp}get cyt(){return this.JMt}$Mt(){var t,i;return null!=(i=this.zbt)?i:null==(t=this.lD)?void 0:t.$Mt()}tTt(t){const i=this.xdt,e=this.lD&&this.lD.$Mt();this.Xp.fyt?this.zbt=new SV(i,e,this.Xp.fyt):this.Xp.dyt?this.zbt=new NV(i,e,this.Xp.dyt[0]):this.Xp.lyt?this.zbt=new GV(i,e,this.Xp.lyt):t&&!e&&(this.zbt=new GV(i,e,void 0))}iTt(t,i){this.Xp=t,this.JMt=t.cyt&&t.cyt.length>0?fV(t.cyt.map((t=>t.zu)),i):i.slice(),this.zbt&&(t.fyt?this.zbt.Yn(t.fyt):t.dyt?this.zbt.Yn(t.dyt[0]):t.lyt&&this.zbt.Yn(t.lyt))}ibt(){var t;return null==(t=this.eTt)?void 0:t.sTt}gbt(){var t;return null==(t=this.eTt)?void 0:t.nTt}rTt(t){const i=this.oTt,e=this.xdt.ct,s=this.eTt,n=this.hTt(t);s&&ce(e,i,1e-5)&&KV(s,n)||(this.oTt=e,this.eTt=n,this.yo(new WV))}wy(){this.Bo(),this.zbt&&(this.zbt.wy(),this.zbt=void 0)}constructor(t,i,e){super(),this.zbt=void 0,this.oTt=1/0,this.eTt=void 0,this.lD=i,this.iTt(t,e)}};function HV(t){let i,e;for(const e of t){const t=e.ibt();if(t){i=t.Cn;break}}if(void 0!==i){for(let i=t.length-1;i>=0;i--){const s=t[i].ibt();if(s){e=s.jn;break}}return void 0!==e?{Cn:i,jn:e}:void 0}}function XV(t){if(0===t.length)return;let i=0,e=1/0;for(const s of t){const t=s.ibt();if(!t)return;if(i=x.max(i,t.Cn),e=x.min(e,t.jn),i>=e)return}return{Cn:i,jn:e}}function qV(t){let i;for(const e of t){const t=e.gbt();t&&(!i||t.getTime()<i.getTime())&&(i=t)}return i}function KV(t,i){return function(t,i){return t&&i?t.getTime()===i.getTime():t===i}(t.nTt,i.nTt)&&function(t,i){return t&&i?ce(t.Cn,i.Cn,1e-5)&&ce(t.jn,i.jn,1e-5):t===i}(t.sTt,i.sTt)}var JV=class extends Fr{get Yat(){return this.aTt}get dht(){return this.Yat.reduce(((t,i)=>{for(const e of i.dht)Qa(t,e)||t.push(e);return t}),[])}get Qp(){return this.dht.length>0?this.dht[0]:""}get YA(){return this.aTt[0].YA}get o(){return this.aS}get Fft(){return this.Hpt.Fft}get gX(){return this.aTt[0].gX}get xdt(){return this.Hpt}get Jat(){return Ms(this.Yat,(t=>t.Jat))}ibt(){return XV(this.aTt)}gbt(){let t;for(const i of this.aTt){const e=i.gbt();e&&(!t||e.getTime()<t.getTime())&&(t=e)}return t}gn(){this.Bo();for(const t of this.aTt)t.fn(ea.Qut,this.sbt)}constructor(t,i,e){super(),this.Hpt=t,this.aS=i,this.aTt=e.slice();for(const t of e)t.yn(ea.Qut,this.sbt)}};r();var $V=class extends Jr{constructor(){super(ea.Yut)}};function tG(t){const i=[];for(const e of t){let t;const s=e.agt;void 0===s||(t=dl(i,(t=>t.o===s))),t||(t={o:s,Yat:[]},i.push(t)),t.Yat.push(e)}return i}r(),Qi();var iG=class extends Fr{get Yat(){return this.aTt}get Zpt(){return this.uTt}get xyt(){return this.nbt.rI.xyt}get ct(){return this.nbt.ct}get jn(){return this.Cn+this.ct}get Lyt(){return this.nbt.rI.Lyt||[]}get o(){return this.nbt.o}get Vut(){return this.cTt}get Fft(){return this.lTt}get bAt(){return this.lTt.dTt(this)}get xdt(){return this}get yAt(){return this.lTt.fTt(this)}get gTt(){return this._Tt(1/0,x.min)}get vTt(){return this._Tt(0,x.max)}_Tt(t,i){if(0===this.uTt.length)return;let e=t;for(const t of this.uTt)if(ou(t.YA)){const s=t.ebt;if(void 0===s)return;e=i(e,s)}return e}get Cn(){return this.nbt.Cn}get zI(){return this.Fft.zI}wTt(){this.cTt||(this.cTt=!0,this.yo(new $V),this.gn())}async Yn(t,i){0===this.aTt.length?(await this.mTt(this.nbt.Yat,t,i),this.pTt(this.aTt),yi(i)):await this.ATt(t,i)}async mTt(t,i,e){for(const s of t){const t=new dV(this,s);try{await t.Yn(i,e),this.aTt.push(t)}catch(t){X(t)}}}pTt(t){const i=tG(t);for(const t of i){const i=new JV(this,t.o,t.Yat);this.uTt.push(i)}}async ATt(t,i){for(const e of this.aTt)await e.Yn(t,i)}ibt(){return this.nbt.ibt()}gbt(){return this.nbt.gbt()}gn(){this.Bo(),this.nbt.fn(ea.Qut,this.sbt);for(const t of this.uTt)t.gn();for(const t of this.aTt)t.gn();nt(this.aTt),nt(this.uTt)}constructor(t,i){super(),this.aTt=[],this.uTt=[],this.cTt=!1,this.lTt=t,this.nbt=i,this.nbt.yn(ea.Qut,this.sbt)}};r();var eG=class extends Jr{constructor(){super(Zi.fb)}};Qi(),r(),r();var sG=function(t){return t.yTt="bTt",t}({}),nG=class extends Jr{constructor(){super(sG.yTt)}};r(),r(),r(),r();var rG=class extends ZV{get Hlt(){return this.wct}get xdt(){return this.wct.xdt}get Ebt(){return this.wct.Ebt}get gX(){return this.Xp.gX||this.wct.gX}get ubt(){return this.$Mt()}get sat(){return this.ubt.sat}Pdt(t){const i=this.gX;return!(!HA(i)&&!XA(i))&&this.sat.Pdt(t.Tlt)}Bdt(t,i,e,s){return this.sat.Bdt(t,this,i,e,s)}hbt(){return this.ubt.hbt(this)}Wdt(t){return this.ubt.Wdt(t,this)}dbt(t){return this.ubt.dbt(t,this)}fbt(){return this.MTt}hTt(t){const i=this.sat,e=i.fbt(t),s=e&&function(t,i){const{Lbt:e,Cbt:s,xbt:n}=t,r=e.lB;let o;const h=i.Ubt(s);if(h.getTime()<=n.getTime())o=s.dB;else{const t=(h.getTime()-n.getTime())/1e3,i=x.max(s.ct-t,0);o=s.lB+i}return{Cn:r,jn:o}}(e,i),n=this.sat.gbt(t,e);return this.MTt=e,{xbt:t,sTt:s,nTt:n}}Yn(t){this.iTt(t,this.wct.cyt)}constructor(t,i){super(t,i,i.cyt),this.MTt=void 0,this.wct=i,this.tTt(!0)}},oG=class extends ZV{get Jat(){return this.fgt}get xdt(){return this.Hpt}get Ebt(){return this.Hpt.Ebt}get agt(){return this.Xp.agt}get gX(){var t;return this.Xp.gX||(null==(t=this.fgt[0])?void 0:t.rI.gX)||""}get KAt(){return this.rI.KAt}get JAt(){return this.rI.JAt}Yn(t){this.iTt(t,this.Hpt.cyt);const i=t.Jat||[];if(this.fgt.length!==i.length)throw new b("Expected "+this.fgt.length+' representations in adaptation set "'+t.o+'", found '+i.length);for(let t=0;t<i.length;t++)this.fgt[t].Yn(i[t])}rTt(t){for(const i of this.fgt)i.rTt(t);super.rTt(t)}hTt(t){return{xbt:t,sTt:XV(this.fgt),nTt:qV(this.fgt)}}wy(){for(const t of this.fgt)t.wy();super.wy()}constructor(t,i){super(t,i,i.cyt),this.Hpt=i,this.tTt(!1),this.fgt=t.Jat.map((t=>new rG(t,this)))}},hG=class extends ZV{get Yat(){return this.aTt}get Zpt(){return this.uTt}get xdt(){return this}get Ebt(){return this.TTt}get o(){return this.Xp.o}get Cn(){return this.mQ}get ct(){return this.JM}Yn(t,i){this.iTt(t,this.TTt.cyt),this.JM=i;const e=t.Yat||[];if(this.aTt.length!==e.length)throw new b("Expected "+this.aTt.length+' adaptation sets in period "'+t.o+'", found '+e.length);for(let t=0;t<e.length;t++)this.aTt[t].Yn(e[t])}rTt(t){for(const i of this.aTt)i.rTt(t);super.rTt(t)}hTt(t){return{xbt:t,sTt:XV(this.aTt),nTt:qV(this.aTt)}}wy(){for(const t of this.aTt)t.wy();super.wy()}constructor(t,i,e,s){super(i,void 0,t.cyt),this.uTt=[],this.TTt=t,this.mQ=e,this.JM=s,this.tTt(!1),this.aTt=(i.Yat||[]).map((t=>new oG(t,this))),this.uTt=tG(this.aTt)}};Qi(),r();var aG=class{get STt(){return this.NTt.jyt.jU}get ITt(){return this.NTt.jyt.CU}get DTt(){return this.NTt.jyt.Cyt}get ETt(){var t;return null==(t=this.NTt.$E)?void 0:t.jU}get kTt(){var t;return null==(t=this.NTt.$E)?void 0:t.jU}constructor(t){this.NTt=t}},uG=new Date("2000-01-01"),cG=class extends tu{get rI(){return this.Xp}get YA(){return this.Xp.YA||nc.QQ}get Ryt(){return this.xTt||this.Xp.Ryt||this.Vyt}get Oyt(){return this.Xp.Oyt}get Dbt(){var t,i;return null!=(i=null==(t=this.LTt)?void 0:t.ignoreAvailabilityWindow)&&i}get Qyt(){return this.CTt}get cyt(){return this.JMt}get Pyt(){return this.jTt}get nAt(){return this.OTt}get Vyt(){return this.Xp.Vyt||this.An}get GAt(){return this.Xp.GAt}get RTt(){return this.PTt}get zTt(){return this.An}get Zyt(){return this.NTt}ibt(){var t;return null==(t=this.eTt)?void 0:t.sTt}gbt(){var t;return null==(t=this.eTt)?void 0:t.nTt}Yn(t,i,e,s){var n;const r=void 0!==this.Xp&&this.Xp.YA===nc.FQ;this.Xp=t,this.PTt=null!=s?s:e,this.An=e;const o=[Ab(i)];this.JMt=t.cyt&&t.cyt.length>0?fV(t.cyt.map((t=>t.zu)),o):o,this.jTt=t.Pyt&&t.Pyt.length>0?fV(t.Pyt,this.JMt):[];const h=this.jTt.map((t=>t.href)),a=i.href;Qa(h,a)||(this.jTt.push(i),h.push(a));const u=this.BTt.href;Qa(h,u)||(this.jTt.push(this.BTt),h.push(u)),this.CTt=null==(n=t.Qyt)?void 0:n.NAt(),t.Zyt&&(this.NTt=new aG(t.Zyt));const c=t.YA===nc.FQ,l=function(t,i,e){const s=[];for(let e=0;e<t.length;e++){const n=t[e];let r;if(n.Cn)r=n.Cn.NAt();else if(e>0&&t[e-1].ct){r=s[e-1]+t[e-1].ct.NAt()}else{if(0!==e||i)break;r=0}s.push(r)}const n=[];for(let i=0;i<s.length-1;i++)n.push({rI:t[i],Cn:s[i],ct:s[i+1]-s[i]});if(s.length>0){const r=s.length-1,o=t[r],h=s[r];let a=1/0;i||(a=o.ct?o.ct.NAt():e-h),n.push({rI:o,Cn:h,ct:a})}return n}(t.nAt,c,this.CTt);this.UTt(l,r,c),this.rTt(e)}UTt(t,i,e){const s=this.OTt;if(0===t.length)return void nt(s);const n=t[0].rI.o;let r=0;for(;r<s.length&&s[r].o!==n;)r++;const o=s.splice(0,r);for(const t of o)t.wy();if(i&&!e&&s.length>0&&t.length>0){var h;const i=null!=(h=lG(s[0].rI))?h:H.sU;var a;const e=null!=(a=lG(t[0].rI))?a:H.sU;if(e.UB(i)){const n=e.qB(i);void 0!==this.CTt&&(this.CTt+=n.BB());for(let i=0;i<t.length;i++){const e=t[i];if(i<s.length){const t=s[i];e.Cn=t.Cn,vG(e.rI,t.rI)}i===t.length-1&&(e.ct+=n.BB())}}}for(let i=0;i<t.length;i++){const e=t[i];if(i<s.length){const t=s[i];0,t.Yn(e.rI,e.ct)}else s.push(new hG(this,e.rI,e.Cn,e.ct))}}rTt(t){for(const i of this.OTt)i.rTt(t);const i=this.eTt,e=this.hTt(t);i&&KV(i,e)||(this.eTt=e,this.yo(new WV))}hTt(t){return{xbt:t,sTt:HV(this.OTt),nTt:qV(this.OTt)}}kbt(){if(0===this.OTt.length)return;const t=this.OTt[this.OTt.length-1];if(isFinite(t.ct))return;if(0===t.Yat.length)return;const i=t.Yat[0];if(0===i.Jat.length)return;const e=i.Jat[0].sat,s=e.kbt();return s?{vlt:s,Oyt:e.Yft(s)}:void 0}wy(){this.Bo();for(const t of this.OTt)t.wy()}constructor(t,i,e,s,n){if(super(),this.eTt=void 0,this.CTt=void 0,this.xTt=void 0,this.OTt=[],this.BTt=i,this.LTt=n,this.Yn(t,e,s),t.YA===nc.FQ){const t=this.kbt();t&&t.Oyt&&t.Oyt.getTime()<uG.getTime()&&(this.xTt=new Date(this.Vyt.getTime()-1e3*(t.vlt.lB+t.vlt.ct)),this.rTt(s))}}};function lG(t){let i=gG(t);var e,s;for(const s of null!=(e=t.Yat)?e:[])i=IN(i,dG(s));for(const e of null!=(s=t.Lyt)?s:[])i=IN(i,_G(e));return i}function dG(t){let i=gG(t);for(const e of t.Jat)i=IN(i,fG(e));return i}function fG(t){return gG(t)}function gG(t){let i;if(void 0!==t.fyt&&(i=IN(i,_G(t.fyt))),void 0!==t.lyt&&(i=IN(i,_G(t.lyt))),void 0!==t.dyt)for(const e of t.dyt)i=IN(i,_G(e));return i}function _G(t){var i,e;return H.tU(null!=(i=t.YAt)?i:D.ZERO,null!=(e=t.Lj)?e:1)}function vG(t,i){if(pG(t,i),t.Cn=i.Cn,void 0!==t.Yat&&void 0!==i.Yat&&t.Yat.length===i.Yat.length)for(let e=0;e<t.Yat.length;e++)wG(t.Yat[e],i.Yat[e]);if(void 0!==t.Lyt&&void 0!==i.Lyt&&t.Lyt.length===i.Lyt.length)for(let e=0;e<t.Lyt.length;e++)AG(t.Lyt[e],i.Lyt[e])}function wG(t,i){if(pG(t,i),void 0!==t.Jat&&void 0!==i.Jat&&t.Jat.length===i.Jat.length)for(let e=0;e<t.Jat.length;e++)mG(t.Jat[e],i.Jat[e])}function mG(t,i){pG(t,i)}function pG(t,i){if(void 0!==t.fyt&&void 0!==i.fyt&&AG(t.fyt,i.fyt),void 0!==t.lyt&&void 0!==i.lyt&&AG(t.lyt,i.lyt),void 0!==t.dyt&&void 0!==i.dyt&&t.dyt.length===i.dyt.length)for(let e=0;e<t.dyt.length;e++)AG(t.dyt[e],i.dyt[e])}function AG(t,i){t.Lj=i.Lj,t.YAt=i.YAt}r(),Qi();var yG=class{async FK(t){await this.QTt(t,this.OQ,this.FTt,this.YTt).catch(Ct)}Qft(){return new Date(ja()+this.VTt)}async QTt(t,i,e,s){let n;if(s&&(n=await this.GTt(i,s,e)),void 0===n){yi(e);for(const s of t)if(n=await this.WTt(i,s,e),void 0!==n)break}this.VTt=void 0===n?0:n-ja()}async WTt(t,i,e){switch(i.y8){case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2012":case"urn:mpeg:dash:utc:http-iso:2014":{const s=i.zD;if(s)return await this.GTt(t,s,e);break}case"urn:mpeg:dash:utc:direct:2012":case"urn:mpeg:dash:utc:direct:2014":{const t=i.zD;if(t){const i=new Date(t).getTime();if(!j(i))return i}break}default:return}}async GTt(t,i,e){try{const s=await t.hI({zu:i,LI:Ve.GET,oI:Ee.ON,ly:e}),n=await s.UN(),r=new Date(n).getTime();if(!j(r))return r}catch(t){X(t)}}constructor(t,i,e){this.OQ=t,this.FTt=i,this.YTt=e,this.VTt=0}},bG=class extends tu{get Oyt(){return this.nbt&&this.nbt.Oyt}get Ryt(){return this.nbt&&this.nbt.Ryt}get Dbt(){return this.nbt&&this.nbt.Dbt}get o(){return this.nbt&&this.nbt.rI.o}get RTt(){var t;return null==(t=this.nbt)?void 0:t.RTt}get ZTt(){var t;return null==(t=this.nbt)?void 0:t.zTt}get Pyt(){return this.nbt?this.nbt.Pyt.map((t=>t.href)):[this.HTt]}get HTt(){return this.XTt.href}get Byt(){return this.nbt&&this.nbt.rI.Byt}get Uyt(){return this.nbt&&this.nbt.rI.Uyt}get Qyt(){return this.nbt&&this.nbt.rI.Qyt}get Fyt(){return this.nbt&&this.nbt.rI.Fyt}get Yyt(){var t,i;const e=(null==(i=this.nbt)||null==(t=i.rI.Yyt)?void 0:t.IAt())||0;return x.max(e,TG)}get XE(){return this.qTt}KTt(t){const i=this.XE;this.qTt=t,i!==this.XE&&this.yo(new nG)}get nAt(){return this.OTt}get JTt(){return this.YA===nc.FQ?this.wbt:this.$Tt}get tSt(){const t=this.JTt;if(void 0!==t)for(const i of this.nAt)if(i.Cn<=t&&i.jn>t)return i}get iyt(){return this.nbt&&this.nbt.rI.iyt}get Vyt(){return this.nbt&&this.nbt.Vyt}get gTt(){for(let t=this.OTt.length-1;t>=0;t-=1){const i=this.OTt[t].gTt;if(i)return i}}get wbt(){const t=this.gTt;if(void 0===t)return;const i=t-this.iSt;return x.max(i,this.$Tt)}get $Tt(){for(const t of this.OTt){const i=t.tbt;if(void 0!==i)return i}}get zI(){return Boolean(this.eSt.zI)}get iSt(){var t,i;if(this.eSt.sSt&&this.YA===nc.FQ)return this.eSt.sSt;const e=null==(i=this.nbt)||null==(t=i.rI.Gyt)?void 0:t.NAt();return void 0!==e?e:this.YA===nc.FQ?1.5*this.Fyt.NAt():0}get GAt(){return this.nbt&&this.nbt.GAt}get YA(){return this.nbt?this.nbt.YA:void 0}get Zyt(){var t;return null==(t=this.nbt)?void 0:t.Zyt}async Yn(t,i,e){const s=[],n=[],r=t.zyt?Fe.Ah(t.zyt,this.XTt):this.XTt;void 0===this.nbt?(await this.nSt.FK(t.Wyt),this.nbt=new cG(t,this.XTt,r,this.Qft(),this.LTt),this.nbt.yn(ea.Qut,this.Ds)):this.nbt.Yn(t,r,this.Qft(),i);const o=this.nbt.nAt;let h;if(0===o.length)h=this.OTt.slice(),nt(this.OTt);else{const t=o[0].o;let i=0;for(;i<this.OTt.length&&this.OTt[i].o!==t;)i++;h=this.OTt.splice(0,i);for(let t=0;t<o.length;t++){const i=o[t];let r;t<this.OTt.length?r=this.OTt[t]:(r=new iG(this,i),s.push(r)),n.push(r.Yn(this.rSt,e))}}await Promise.all(n),this.OTt.push(...s);for(const t of h)t.wTt();this.yo(new eG)}Qft(){return this.nSt.Qft()}fTt(t){const i=this.OTt.indexOf(t);if(i>0)return this.OTt[i-1]}dTt(t){const i=this.OTt.indexOf(t);if(i>=0&&i+1<this.OTt.length)return this.OTt[i+1]}ibt(){return this.nbt?this.nbt.ibt():void 0}gbt(){return this.nbt&&this.nbt.gbt()}rTt(t){this.nbt&&this.nbt.rTt(t)}gn(){this.Bo(),this.oSt=void 0,this.KTt(!1);for(const t of this.OTt)t.gn();nt(this.OTt),this.nbt&&this.nbt.wy()}constructor(t,i,e,s,n){super(),this.nbt=void 0,this.qTt=!0,this.OTt=[],this.oSt=void 0,this.eSt=t,this.XTt=t.$x,this.rSt=i,this.OQ=e,this.hSt=s,this.nSt=new yG(this.OQ,this.hSt,this.eSt.aSt),this.LTt=n}},MG=class{get Fft(){return this.lTt}constructor(t,i,e,s,n){this.lTt=new bG(t,i,e,s,n)}};Qi();var TG=1e3,SG=class{get Tr(){return this.nbt}get W(){return this.uSt||(this.uSt=this.oD(this.cSt.ly),V(this.uSt)),this.uSt}async oD(t){this.nbt.Fft.yo(new Gi);try{await this.lSt(t),this.nbt.Fft.KTt(!0)}catch(t){throw X(t),this.uSt=void 0,this.nbt.Fft.KTt(!1),new b("The provided MPEG-DASH document could not be loaded - "+t.message)}this.dSt=this.fSt(this.cSt.ly)}async fSt(t){try{for(;this.nbt.Fft.YA===nc.FQ;)await Ao(this.gSt,t)}catch(t){}}get gSt(){return this.nbt.Fft.ZTt&&this.nbt.Fft.YA===nc.FQ?this._St(this.cSt.ly):this.W}async vSt(t){yi(t);const i=this.wSt();if(i>0){const e=x.min(i,2147483647);await kt(e,t)}try{await this.lSt(t),this.nbt.Fft.KTt(!0)}catch(t){throw new b("The provided MPEG-DASH manifest could not be loaded - "+t.message)}finally{this.mSt=void 0}}wSt(){const t=this.nbt.Fft.Qft().getTime()-this.nbt.Fft.RTt.getTime();return this.nbt.Fft.Yyt-t}pSt(t){const i=this.nbt.Fft.gbt();if(i){const e=i.getTime()-t.getTime();if(e>0)return e}this.nbt.Fft.rTt(t);const e=this.nbt.Fft.gbt();return e?e.getTime()-t.getTime():NaN}async _St(t){const i={stack:[],error:void 0,hasError:!1};try{null!=this.mSt||(this.mSt=this.vSt(t));const e=Ne(i,Wt.Iy([t]),!1),s=[this.mSt,this.ASt(e.ly)].filter($t);await Promise.race(s).catch(Ct)}catch(t){i.error=t,i.hasError=!0}finally{qr(i)}}ASt(t){const i=this.nbt.Fft.Qft(),e=this.pSt(i);if(!j(e)&&!this.Tr.Fft.Dbt)return this.ySt(e,t)}async ySt(t,i){await kt(t,i);const e=this.nbt.Fft.Qft();this.nbt.Fft.rTt(e)}async bSt(t,i){const e=await this.TSt.MSt(t,{},i);return(new sV).Hyt(e.SSt,e.lI)}gn(){return this.cSt.Ty(),this.dSt=void 0,this.uSt=void 0,this.mSt=void 0,this.nbt.Fft.gn(),Promise.resolve()}constructor(t,i,e,s,n){this.cSt=new Wt,this.lSt=async t=>{try{const i=this.nbt.Fft.Qft(),e=await this.bSt(this.nbt.Fft.Pyt,t);await this.nbt.Fft.Yn(e,i,t)}catch(t){throw jb(t)&&this.nbt.Fft.KTt(!1),t}},this.TSt=s,this.nbt=new MG(t,i,e,this.cSt.ly,n)}};r(),r();var NG=class extends Jr{constructor(t,i){super("dAt"),this.MAt=t,this.Bat=i}},IG=class extends tu{get Bat(){return this.Uat}get YA(){return this.Zp}get Z(){return this.Dx.slice()}EQ(t){t&&this.Uat!==t&&this.NSt(t)}kQ(t){this.Uat===t&&this.NSt(void 0)}NSt(t){this.Uat=t,this.yo(new NG(this,this.Uat))}gn(){this.Bo();for(const t of this.Dx)t.agt=void 0;nt(this.Dx)}constructor(t,i){super(),this.Uat=void 0,this.Zp=t,this.Dx=i;for(const t of this.Dx)t.agt=this}};Qi(),r(),r(),r();var DG=class extends Jr{constructor(t,i,e){super(Zi.Xy),this.currentTime=t,this.initDataType=i,this.initData=e}};function EG(t,i,e,s,n){let r=[],o=[];for(const t of i)t.YA===Ri.SI?r=r.concat(t.Z):t.YA===Ri.NI&&(o=o.concat(t.Z));return[kG(t,r,e,s,null==n?void 0:n.preferredAudioCodecs),xG(t,o,e,s,null==n?void 0:n.preferredVideoCodecs)].filter($t)}function kG(t,i,e,s,n){const r=dl(s||[],(t=>t.sct===Ri.SI&&t.Rt)),o=[CG(r,e,t),jG(r),OG(r),RG(r,n),PG(),t=>{const i=t.filter((t=>"main"===t.Lt));return i.length>0?i:t}];return LG(i,o)}function xG(t,i,e,s,n){const r=dl(s||[],(t=>t.sct===Ri.NI&&t.Rt)),o=[CG(r,e,t),RG(r,n),PG(),t=>{const i=t.filter((t=>"main"===t.Lt));return i.length>0?i:t}];return LG(i,o)}function LG(t,i){if(0===t.length)return;let e=t;for(const t of i){if(1===e.length)return e[0];e=t(e)}return e[0]}function CG(t,i,e){return s=>{const n=t?t.Hlt.o:void 0;if(!$t(n))return s;const r=null==i?void 0:i.xyt,o=e.xyt,h=r&&o&&r.zD===o.zD,a=dl(s,(t=>t.Hlt.o===n));return h&&a?[a]:s}}function jG(t){return i=>{const e=t?t.gs:"",s=i.some((t=>""!==t.gs))?i.filter((t=>""!==t.gs)):i;if(""===e)return s;const n=s.filter((t=>t.gs===e));return n.length>0?n:s}}function OG(t){return i=>{const e=t?t.Lt:"";if(""===e)return i;const s=i.filter((t=>t.Lt===e));return s.length>0?s:i}}function RG(t,i){return t=>{if(i&&i.length>0)for(const e of i){const i=t.filter((t=>t.Zx.Ix.some((t=>Wo(t.dht,e)))));if(i.length>0)return i}return t}}function PG(){return t=>{let i=[],e=-1/0;for(const s of t){const t=s.Hlt.hG;t>e?(e=t,i=[s]):t===e&&i.push(s)}return i}}r(),r();var zG=function(t){return t.ISt="api",t.DSt="start",t}({});r(),Qi();var BG={maxRetries:3,minimumBackoff:1e3,maximumBackoff:1/0},UG=class{ESt(t,i,e){const s=this.Dft.maxRetries===1/0?BG:this.Dft;return ao((()=>this.kSt(t,i,e)),e,s.maxRetries,s.minimumBackoff,s.maximumBackoff)}async kSt(t,i,e){let s;for(const n of t)try{const t=new Gs({zu:n,oI:Ee.ON,aI:i,zI:this.xSt,LI:Ve.GET,YA:ar.fI,OI:cl.dI,ly:e,CI:15e3,jI:5e3}),s=await this.OQ.hI(t),r=await s.UN(e);return{SSt:r,LSt:n,lI:s.lI}}catch(t){s=t}throw s}constructor(t,i,e=BG){this.OQ=t,this.xSt=i,this.Dft=e}};r();var QG=class{async MSt(t,i,e){let s;for(const n of this.CSt)try{return await n.MSt(t,i,e)}catch(t){X(t),s=t}throw s}constructor(t){this.CSt=t}},FG=class{async MSt(t,i,e){const s=await this.plt.Sot(t);if(s)return{SSt:s.data,LSt:s.locationURL,lI:s.responseURL};throw new b("Manifest fetch from cache unsuccesful")}constructor(t){this.plt=t}},YG=class{async MSt(t,i,e){return await this.jSt.ESt(t,i,e)}constructor(t){this.jSt=t}};function VG(t,i){return new QG([new FG(i),new YG(t)])}var GG=class{async MSt(t,i,e){const s=await this.TSt.MSt(t,i,e);return await this.OSt(s),s}async OSt(t){await this.Iv.jot({key:yr(t.LSt),locationURL:qs(t.LSt),responseURL:qs(t.lI),data:t.SSt,references:[this.RSt.o]})}constructor(t,i,e){this.TSt=t,this.Iv=i,this.RSt=e}};r();var WG=class extends Jr{constructor(){super(Zi.vb)}};r();var wl=class extends Jr{constructor(){super(Zi._b)}};ds(),r(),r();var ZG=class extends tD{PSt(t){return t.fk=Ma.LOADED,this.tt(t),t}zSt(t){for(const i of this.Z.Ix)if(i.qx===t)return i}constructor(){super()}};function HG(t,i){return""===i?t:t+" "+i}r(),r(),r();var XG=class extends dN{get ga(){return this.Za||(this.Za=function(t){return fe(Ft(t),{get attributes(){return t.XD},get eventID(){var i;return""+(null!=(i=t.BSt)?i:"")}})}(this)),this.Za}EB(t){return this.U===t.U}constructor(t,i,e,s,n){super(t,i,e,!1,null==n?void 0:n.toString()),this.XD=s,this.BSt=n}},qG=class extends ZG{USt(t){const i=this.CQ.Wk(z.MQ,"","","",void 0,El.EVENT_STREAM);return i.qx=t,this.PSt(i),i}QSt(t,i,e){const s=t.y8;var n;const r=null!=(n=t.zD)?n:"";var o;const h=null!=(o=t.Lj)?o:1;var a;const u=null!=(a=t.YAt)?a:D.ZERO,c=HG(s,r);let l=this.zSt(c);l||(l=this.USt(c));for(const s of t._X)if(!KG(s,l)){const t=JG(s,h,u,i);t.dB>e&&l.RQ(t)}}async $n(t){await this.tr(),this.TTt=t,this.TTt.yn(Zi.fb,this.FSt),this.FSt()}async tr(){this.TTt&&(this.TTt.fn(Zi.fb,this.FSt),this.TTt=void 0);for(const t of this.Z.Ix)this.CQ.BQ(t);await super.tr()}constructor(t){super(),this.TTt=void 0,this.FSt=()=>{var t,i;const e=null!=(i=null==(t=this.TTt.ibt())?void 0:t.Cn)?i:0;if(e>0)for(const t of this.Z.Ix)JI(t,e);for(const t of this.TTt.nAt)if(t.jn>e)for(const i of t.Lyt)this.QSt(i,t,e)},this.CQ=t}};function KG(t,i){const e=t.o;if(void 0!==e){if(dl(i.L.Ix,(i=>i.BSt===e&&i.U===t.rI)))return!0}return!1}function JG(t,i,e,s){const n=t.o,r=t.jR.toSigned().subtract(e),o=t.ct,h=t.rI,a=t.XD,u=r.toNumber()/i+s.Cn,c=o?o.toNumber()/i:void 0,l=void 0!==c?u+c:s.vTt;return new XG(u,l,h,a,n)}function $G(t,i,e,s,n){const r=[],o=dl(e,(t=>t.y8===gv));if(void 0===o)return;const h=o.zD?function(t){const i=t.split(":",1)[0];switch(i){case"cbcs":case"cenc":return i;default:return}}(o.zD.toLowerCase()):"cenc";if(void 0!==h){for(const t of e)if(t.y8!==gv)for(const i of Lv(t.y8)){const e=n&&t.b8?[t.b8]:[];r.push({NS:i,XY:e,qY:void 0,hY:void 0})}if(r.length)return{IF:t,Ipt:{YSt:h,DF:o.DF},Npt:r,VSt:i===Ri.SI?s.slice():[],GSt:i===Ri.NI?s.slice():[],S8:!1}}}function tW(t,i){if(!t)return i;if(!i)return t;const e=[],s=ll();var n;return iW(e,s,t.Npt),iW(e,s,i.Npt),{IF:t.IF,Ipt:{YSt:t.Ipt.YSt,DF:null!=(n=t.Ipt.DF)?n:i.Ipt.DF},Npt:e,VSt:eW(t.VSt,i.VSt,Qa),GSt:eW(t.GSt,i.GSt,Qa),S8:t.S8||i.S8||!1}}function iW(t,i,e){for(const s of e){const e=s.NS.ZA;let n;i.has(e)?(n=i.get(e),n.XY=eW(n.XY,s.XY,sW)):(n=Ei({},s),t.push(n),i.set(e,n))}}function eW(t,i,e){const s=t.slice();for(const t of i)e(s,t)||s.push(t);return s}function sW(t,i){for(const e of t)if(Yn(e,i))return!0;return!1}function nW(t,i,e){let s;const n=t.GY;if(n){const r=t.gX,o=[];for(const i of t.dht)o.push(r+'; codecs="'+i+'"');s=$G(i||{},t.YA,n,o,e)}for(const n of t.Jat)s=tW(s,rW(n,i,e));return s}function rW(t,i,e){return $G(i||{},t.YA,t.GY||[],[t.VN],e)}function oW(t){return t?t.Npt.map((i=>{const e=hW(t.IF,i.NS),s=t.Ipt.YSt;return{NS:i.NS,XY:i.XY,hY:i.hY,HV:[{initDataTypes:[i.NS.GA],audioCapabilities:aW(t.VSt,s,null==e?void 0:e.audioRobustness),videoCapabilities:aW(t.GSt,s,null==e?void 0:e.videoRobustness),persistentState:null==e?void 0:e.persistentState,distinctiveIdentifier:null==e?void 0:e.distinctiveIdentifier}]}})):[]}function hW(t,i){switch(i.YA){case Nv.BA:return t.widevine;case Nv.zA:return t.playready;case Nv.QA:return t.fairplay;case Nv.UA:return t.clearkey}}function aW(t,i,e){if(0!==t.length)return t.map((t=>({contentType:t,encryptionScheme:i,robustness:e})))}function uW(t,i){const e=t=>{const e=i.indexOf(t.NS.ZA);return e>=0?e:i.length};return zs(t,((t,i)=>e(t)-e(i)))}r(),r();var cW=class extends ZG{USt(t){const i=this.CQ.Wk(z.MQ,t.o,"thumbnails","",!1,El.DEFAULT);return i.UI=lc.Jn,this.PSt(i),i}async $n(t){await this.tr(),this.TTt=t,this.TTt.yn(Zi.fb,this.Yn),this.Yn()}WSt(t){this.ZSt(t),this.HSt()}HSt(){const t=[];for(const i of this.Z.Ix)this.XSt(i)||t.push(i);for(const i of t)this.it(i)}ZSt(t){const i=[];for(const e of this.fgt)-1===t.indexOf(e)&&i.push(e);for(const t of i)ra(this.fgt,t)}async tr(){this.TTt&&(this.TTt.fn(Zi.fb,this.Yn),this.TTt=void 0);for(const t of this.fgt)t.fn(ea.Qut,this.qSt);this.fgt.length=0;for(const t of this.Z.Ix)this.CQ.BQ(t);await super.tr()}gn(){return this.qSt=void 0,super.gn()}KSt(){var t,i;const e=null!=(i=null==(t=this.TTt.ibt())?void 0:t.Cn)?i:0;if(e>0)for(const t of this.Z.Ix)JI(t,e)}JSt(t){return this.Z.Ix.some((i=>i.o===t.o))}$St(t){return dl(this.Z.Ix,(i=>i.o===t.o))}XSt(t){return this.fgt.some((i=>t.o===i.o))}constructor(t){super(),this.fgt=[],this.Yn=()=>{const t=[];for(const i of this.TTt.nAt)for(const e of i.Yat)if(e.YA===Ri.II&&e.Jat.length>0){const i=e.Jat[0];t.push(i),this.JSt(i)||this.USt(i),-1===this.fgt.indexOf(i)&&(this.fgt.push(i),i.yn(ea.Qut,this.qSt)),this.tNt(i)}this.WSt(t)},this.tNt=t=>{const i=this.$St(t);i&&t&&i.UI!==lc.Ch&&(this.KSt(),function(t,i){const e=t.sat,s=t.fbt();if(!s)return;const n=s.Lbt,r=s.Cbt,o=t.ji,h=t.Ti,[a,u]=function(t){for(const i of t)if(Cv(i.y8,dW)||Cv(i.y8,fW)){const t=i.zD.match(lW);if(t){const[,i,e]=t;return[Number(i),Number(e)]}}return[1,1]}(t.KAt);let c=n;for(;c&&c.Tlt<=r.Tlt;){const s=t.ubt.ct||c.ct,n=gW(i,c,t.Wdt(c).zu,o,h,a,u,s);for(const t of n)i.RQ(t);c=e.Ydt(c)}}(t,i))},this.CQ=t;const i=this;this.qSt=function(){i.tNt(this)}}},lW=/^(\d+)x(\d+)$/,dW="http://dashif.org/guidelines/thumbnail_tile",fW="http://dashif.org/thumbnail_tile";function gW(t,i,e,s,n,r,o,h){const a=[],u=i.lB,c=r*o,l=s/r,d=n/o,f=x.round(l),g=x.round(d),_=h/c;if(1===c){const i=u+_;return _W(t,u,i,e)?a:[new dN(u,i,e,!1)]}for(let s=0;s<o;s++)for(let n=0;n<r;n++){const o=u+(s*r+n)*_,h=o+_,c=e+"#xywh="+x.round(n*l)+","+x.round(s*d)+","+f+","+g;if(_W(t,o,h,c)||a.push(new dN(o,h,c,!1)),h>=i.dB)return a}return a}function _W(t,i,e,s){return t.L.Ix.some((t=>t.lB===i&&t.dB===e&&t.U===s))}r(),r(),r(),r();var vW=class extends dN{get LR(){return this.iNt}get zD(){return this.eNt}get sNt(){return this.nNt}get ga(){return this.Za||(this.Za=function(t){return fe(Ft(t),{get schemeIDURI(){return t.LR},get value(){return t.zD},get emsgID(){return t.sNt}})}(this)),this.Za}EB(t){return pm(this.U,t.U)}constructor(t,i,e,s,n,r){super(t,i,r,!1),this.iNt=e,this.eNt=s,this.nNt=n}},wW=class t extends ZG{cft(i,e,s){const n=Rs.dj(Al(i));if(!n)return;const r=function(t,i){const e=[];for(const s of t)uT(s,i)&&e.push(s);return e}(n,Rt.IC);if(r.length){const i=t.rNt(n,e,s);this.oNt(r,i,s)}}oNt(t,i,e){for(const s of t){let t;t=1===s.cj?s.jR.toNumber()/s.Lj+e:i+s.PR/s.Lj;const n=t+s.OR/s.Lj;"https://aomedia.org/emsg/ID3"===s.LR||"https://developer.apple.com/streaming/emsg-id3"===s.LR?this.hNt(s,t):this.aNt(s,t,n)}}aNt(t,i,e){const s=HG(t.LR,t.zD);let n=this.zSt(s);n||(n=this.uNt(s),this.PSt(n)),n.RQ(new vW(i,e,t.LR,t.zD,t.o,t.RR))}hNt(t,i){const e=iR(Al(t.RR));if(!e)return;const s=HG(t.LR,t.zD);let n=this.zSt(s);n||(n=this.cNt(s),this.PSt(n));for(const t of e.V6){const e=new lR(i,t);EO(e,n.L.Ix),n.RQ(e)}}static rNt(t,i,e){const s=cT(t,Rt.DC);return s?os(s.KR,s.Lj)+e:i}uNt(t){const i=this.CQ.Wk(z.MQ,"","","",void 0,El.EMSG);return i.qx=t,i.UI=lc.Xx,i}cNt(t){const i=this.CQ.Wk(z.MQ,"","","",void 0,El.ID3);return i.qx=t,i.UI=lc.Xx,i}async tr(){for(const t of this.Z.Ix)this.CQ.BQ(t);await super.tr()}constructor(t){super(),this.CQ=t}},mW=class extends wW{async $n(t){await this.tr(),this.TTt=t,this.TTt.yn(Zi.fb,this.FSt),this.FSt()}async tr(){this.TTt&&(this.TTt.fn(Zi.fb,this.FSt),this.TTt=void 0),await super.tr()}constructor(...t){super(...t),this.FSt=()=>{var t,i;const e=null!=(i=null==(t=this.TTt.ibt())?void 0:t.Cn)?i:0;this.NQ(e)}}};r(),r();var pW=class{Dot(t,i){return this.lNt?this.plt.Dot(t,i):Promise.resolve(!1)}kot(t,i){return this.lNt?this.plt.kot(t,i):Promise.resolve(void 0)}async Sot(t){const i=await this.plt.Sot(t);return this.lNt=void 0!==i,i}VJ(t){return this.plt.VJ(t)}constructor(t){this.lNt=!1,this.plt=t}};r();var AW=class extends GT{yz(){var t;return null!=(t=this.pz)?t:0}sL(){this.ta.xE=1/0}bz(){return!0}constructor(t,i,e){super(t,i,e)}},yW=[Zi.mb,Zi.Ab,Zi.Tb,Zi.gb,Zi.Sb],bW=[Zi.pb,Zi.kb,Zi.$y,Zi.Ky],MW=class t extends tu{dNt(t){return!!this.vV&&this.vV.N$(t)}async Yp(t){this.vV=await this.cz.$n(t),this.fNt(),this.gNt(),this.vV.S5(this.ct)}_Nt(t){return this.vV.D$(t)}vNt(t){return this.vV.k$(t)}async wNt(){this.mNt=this.pNt,this.vV&&(await this.cz.tr(),this.vV=void 0)}I3(){this.vV.I3()}w3(){const t=this.ct;this.vV.ct<t&&this.vV.S5(t),this.vV.w3()}async ANt(t){const i=this.vV,e=[];i.A5&&e.push(xj(i.A5,t)),i.y5&&e.push(xj(i.y5,t)),await Promise.all(e)}yNt(t,i,e,s,n,r){const o=this.cz,h=this.vV;return new bY(o,h,t,i,e,s,n,r,this.bNt,o,this.Apt,this.Dft,this.Opt,this.SV)}MNt(t,i,e){return t.D$(i,e,this.vV)}async TNt(t,i,e,s){const n=this.yNt(this.OQ,this.UG,this.plt,this.wc,t,s);return n.yn(ea.Yut,this.SNt),n.yn(Zi.gb,this.Ds),await n.FK(i,e),n}NNt(t){void 0===t&&(t=!1),this.INt.Ty(),this.m7.Ty(),this.DNt.Ty(),this.DNt=new Wt,this.ENt=Vh(this.kNt(this.xNt,this.p7,this.ENt,t,this.DNt.ly),this.DNt).catch(this.wAt)}async kNt(t,i,e,s,n){await Promise.all([t,i,e]),yi(n),await Ao(this.LNt.rM,n);const r=this.CNt;await r.pct(),this.w3(),yi(n);const o=r.kc,h=r.vAt,a=r._At;let u=this.jNt(o,a,o,h,!1),c=this.ONt(a,u);!s&&this.dNt(c)?await this.RNt(a,u,c):(u=this.jNt(o,a,o,h,!0),c=this.ONt(a,u),await this.PNt(a,u,c,n)),yi(n),this.wk?this.Wb(this.xE):this.zNt(),this.BNt()}async RNt(t,i,e){const s=this.CNt;await this._Nt(e),this.UNt=e,await this.MNt(s,t,i),await s.yct(fU.iut)}async PNt(t,i,e,s){const n=this.CNt;this.S7(),this.QNt();const r=this.FNt;await this.wNt(),await this.Yp(e),this.UNt=e,await this.MNt(n,t,i);try{const t=this.YNt(r,!1,!0,s);V(t),await n.yct(fU.iut),await t}finally{this.k7(),this.VNt()}}get ht(){return this.Oz}get uV(){const t=this.FNt,i=this.GNt,e=i.bP(t);if(-1!==e)return{Cn:i.Cn(e),jn:i.jn(e)}}get GNt(){var t,i,e;const s=null!=(e=null==(t=this.CNt)?void 0:t.TE)?e:Mo.PP();var n;const r=null!=(n=null==(i=this.WNt)?void 0:i.TE)?n:Mo.PP();return s.pP(r)}get TE(){return this.GNt.ks()}get NE(){var t;const i=null==(t=this.nbt)?void 0:t.Fft,e=null==i?void 0:i.Ryt;if(!i||!e)return;const s=e.getTime(),n=1e3*this.xE;return new Date(n+s)}set NE(t){var i;const e=null==(i=this.nbt)?void 0:i.Fft,s=null==e?void 0:e.Ryt;if(!t||!e||!s)return;const n=s.getTime()/1e3,r=t.getTime()/1e3;this.Wb(r-n)}get bt(){return this.wc}get FNt(){return void 0!==this.Y8?this.Y8:void 0!==this.ZNt?this.ZNt:this.cz.xE}get xE(){return this.FNt}set xE(t){this.CE(t)}CE(t,i){this.Wb(t,t===1/0)}get ct(){let t=NaN;return this.CNt&&this.CNt.sAt?t=this.CNt.jn:this.nbt&&void 0!==this.nbt.Fft.YA&&(t=this.nbt.Fft.Qyt?this.nbt.Fft.Qyt.NAt():1/0),t}get jn(){return this.ct}get OE(){return this.wk?this.V8():!(!this.CNt||!this.CNt.sAt)&&this.cz.OE}V8(){return!!this.wk&&(!(!this.CNt||!this.CNt.sAt)&&this.FNt===this.CNt.jn)}get lt(){return this.dV}get zE(){return this.fV}get UE(){}HNt(){var t;const i=this.XNt;if(0===i.V)return!0;var e;const s=null!=(e=null==(t=this.uV)?void 0:t.jn)?e:this.FNt,n=i.Cn(0);return s>=n||ce(s,n,.001)}qNt(){var t;if(!this.nbt)return!1;if(this.nbt.Fft.YA!==nc.FQ)return!1;const i=null==(t=this.CNt)?void 0:t.kc;if(i&&i.Vut)return!0;const e=[];for(const t of this.nbt.Fft.nAt){const i=t.tbt,s=t.vTt;void 0!==i&&void 0!==s&&e.push(i,s)}const s=new Mo(e).mP();return function(t,i,e){if(!i.V||!e.V)return Mo.PP();const s=i.Cn(0),n=i.jn(i.V-1),r=t.Sn(e)._P().Sn(t).pP(i);return Mo.RP(r.Cn(0),r.jn(r.V-1)).AP(r).DP(((t,i)=>t<s&&i<=n&&i-t>Be))}(this.GNt,this.XNt,s).V>0}get VE(){return Ei({},this.pNt,{Fz:_i.Ld.xY(),Yz:this.KNt,Vz:{amountOfBufferedAudioSegments:this.JNt,amountOfBufferedVideoSegments:this.$Nt}})}get pNt(){return function(t,i){return{Bz:t.Bz+i.Bz,Uz:t.Uz+i.Uz,Qz:t.Qz+i.Qz}}(this.mNt,this.cz.GE())}get WE(){return this.cz.WE}set WE(t){this.cz.WE=t}get KE(){return this.W8?this.tIt:this.CNt&&this.CNt.sAt?this.iIt:this.tIt}get $E(){return this.cz.$E}set $E(t){this.cz.$E=t}get rk(){let t=this.Fo;return this.CNt&&(t=t.pP(this.eIt)),t.mP(.1).ks()}get eIt(){return this.cz.rk}sIt(t){this.Fo=this.Fo.pP(t)}get ck(){return this._V}set ck(t){this._V=t,this.nIt()}get fk(){let t=this.cz.fk;return this.rIt&&(t=x.max(Fn.Xn,t)),t}get XNt(){return this.oIt(!1)}get hIt(){return this.oIt(!0)}get _k(){return this.XNt.ks()}get wk(){return this.kG||this.aIt}get aIt(){return this.cz.wk}get G5(){return this.cz.G5}get wV(){}get uIt(){var t,i;return null!=(i=null==(t=this.nbt)?void 0:t.Fft.YA)?i:nc.QQ}get nt(){return this.Ul}get rt(){return this.Pz}get yk(){var t;return this.cIt||(null==(t=this.lIt())?void 0:t.Ti)||0}get Tk(){var t;return this.dIt||(null==(t=this.lIt())?void 0:t.ji)||0}get Nk(){return this.cz.Nk}set Nk(t){this.cz.Nk=ur(t,0,1)}get Ek(){return this.mV}get Lk(){return!1}set Lk(t){}get pV(){return this.AV}fIt(t){t.yn(yW,this.Ds),t.yn(Zi.Ib,this.gIt),t.yn(Zi.Qy,this._It),t.yn(Me.ua,this.vIt),t.yn(Zi.Yy,this.wIt),t.yn(Zi.Ab,this.mIt),t.yn("dAt",this.pIt),t.yn("Vpt",this.pIt)}AIt(t){t.fn(yW,this.Ds),t.fn(Zi.Ib,this.gIt),t.fn(Zi.Qy,this._It),t.fn(Me.ua,this.vIt),t.fn(Zi.Yy,this.wIt),t.fn(Zi.Ab,this.mIt),t.fn("dAt",this.pIt),t.fn("Vpt",this.pIt)}yIt(t){t.yn(Zi.mb,this.Ds)}bIt(t){t.fn(Zi.mb,this.Ds)}lIt(){if(!this.CNt)return;const t=dl(this.CNt._At,(t=>t.sct===Ri.NI));return t?t.Vx:void 0}oIt(t){var i;const e=null==(i=this.nbt)?void 0:i.Fft;if(!e)return Mo.PP();const s=e.$Tt;let n=t?e.gTt:e.wbt;if(void 0===s||void 0===n)return Mo.PP();if(!t){const t=this.eIt;t.V>0&&t.jn(t.V-1)>n&&(n=x.min(t.jn(t.V-1),e.gTt))}const r=this.ct;return isFinite(r)&&r>n&&(n=r),Mo.RP(s,n).fP()}async $n(t,i){let e,s;yi(i);const n=this.nbt.Fft;try{e=n.tSt,s=n.JTt}catch(t){throw new b("Something went wrong determining the start of the provided MPEG-DASH stream")}if(!e)throw new b("Something went wrong determining the initial Period of the provided MPEG-DASH stream");if(void 0===s)throw new b("Something went wrong determining the start time of the provided MPEG-DASH stream");t.textTracks&&this.MIt(t.textTracks),this.S7();const r=this.Fat(e),o=EG(e,r,void 0,void 0,this.Kpt),h=this.jNt(e,o,e,o,!0);o.forEach((t=>t.Rt=!0));const a=this.ONt(o,h);await this.Yp(a),this.UNt=a,yi(i);const u=await this.TNt(e,r,o,h);yi(i),this.TIt(u),this.k7(),yi(i),await u.yct(),yi(i),!this.SIt&&s>0&&this.Wb(s,!0,zG.DSt),this.kG||(this.zNt(),this.NIt())}zNt(){this.INt.Ty(),this.INt=new Wt,this.xNt=Vh(this.IIt(this.xNt,this.ENt,this.INt.ly),this.INt).catch(this.wAt)}DIt(){this.INt.Ty()}async IIt(t,i,e){for(await Promise.all([t,i]),yi(e);;){var s;const t=null==(s=this.CNt)?void 0:s.kc;if(!t){0;break}if(!await this.EIt(t,e)){0;break}}}async EIt(t,i){var e;yi(i);const s=this.CNt;for(0;this.nbt.Fft.YA===nc.FQ&&void 0===(null==(e=this.dTt(t))?void 0:e.tbt);)await Ao(this.kIt.gSt,i),await this.xIt();for(yi(i),await this.xIt(),yi(i);!s.Jpt();)await s.zy(FQ.zgt,i),await this.xIt();yi(i),await this.xIt(),yi(i);const n=this.dTt(t);return n?(this.LIt(n)?await this.CIt(n,i):await this.jIt(n,i),!0):(this.I3(),!1)}LIt(t){var i,e,s,n,r;const o=null!=(r=null==(i=this.wc)?void 0:i.seamlessSwitchStrategy)?r:qT.Mz;if(o===qT.Tz)return!0;if(o===qT.Sz)return!1;const h=this.CNt,a=null==h?void 0:h.kc,u=null==h?void 0:h._At,c=EG(t,this.Fat(t),a,u,this.Kpt),l=this.jNt(t,c,a,u,!1);if(o===qT.CLEAR_ONLY&&((null==(e=this.CNt)?void 0:e.Spt)||l)||o===qT.SAME_DRM_ONLY&&!((null==(s=this.CNt)?void 0:s.Spt)&&l||!(null==(n=this.CNt)?void 0:n.Spt)&&!l))return!1;const d=this.ONt(c,l);return this.dNt(d)}OIt(){return!0}RIt(t){const i=this.PIt();for(const e of i)e!==t&&(e.UI=lc.Ch)}BNt(){if(void 0!==this.zIt){if(this.zIt.Jx){const t=dl(this.ht.Ix,(t=>t.Rt));void 0!==t&&this.zIt.gs===t.gs||(this.zIt.UI=lc.Ch)}}else this.BIt()}BIt(){if(this.PIt().length)return;const t=dl(this.ht.Ix,(t=>t.Rt));if(void 0===t)return;const i=this.nt.Ix.filter((t=>t.Jx));for(const e of i)if(e.gs===t.gs)return e.UI=lc.Jn,void(this.zIt=e)}PIt(){return this.nt.Ix.filter((t=>t.UI===lc.Jn&&(t.Lt===z.yQ||t.Lt===z.AQ)))}UIt(t){if(t&&this.zIt){const i=function(t,i){if(""===t.gs)return;return i.filter((i=>i.gs===t.gs))[0]}(this.zIt,t.nt.Ix);i&&(i.UI=lc.Jn)}}async CIt(t,i){var e,s;const n=this.CNt;let r=this.WNt;const o=this.UNt;try{yi(i);const e=n.kc,s=n._At,o=this.Fat(t),h=EG(t,o,e,s,this.Kpt),a=this.jNt(t,h,e,s,!1);h.forEach((t=>t.Rt=!0));const u=this.ONt(h,a);for(0,await n.pct(),this.w3(),yi(i),r&&r.kc===t?(this.dNt(u)&&await this._Nt(u),this.UNt=u):(r&&await r.gn(!0),this.dNt(u)&&await this._Nt(u),this.UNt=u,r=await this.TNt(t,o,h,a),this.WNt=r,this.yIt(r),this.QIt.xx=r.nt,r.bct(n)),await r.yct(),yi(i);this.FNt<t.Cn;)await this.cz.zy(Zi.Eb,i);yi(i),this.TIt(r)}catch(t){throw Tu(t)&&(r&&await r.pct(),o&&this.UNt!==o&&(this.dNt(o)&&await this._Nt(o),this.UNt=o)),t}(null==(s=this.wc)||null==(e=s.dash)?void 0:e.forceSeekToSynchronize)&&await this.FIt(t,i)}async FIt(t,i){const e=Date.now()/1e3;if(void 0===this.YIt)this.YIt=e;else if(e-this.YIt>900){this.YIt=e,this.QNt();const s=x.max(this.FNt,t.Cn);try{await this.YNt(s,!1,!0,i)}finally{this.VNt()}}}async jIt(t,i){for(yi(i),await this.CNt.pct(),this.w3(),await this.ANt(t.Cn),yi(i),this.I3();!this.cz.OE&&this.FNt<t.Cn;)await this.cz.zy([Zi.Eb,Zi.qy],i);yi(i);const e=this.CNt.kc,s=this.CNt._At,n=this.Fat(t),r=EG(t,n,e,s,this.Kpt),o=this.jNt(t,r,e,s,!0);r.forEach((t=>t.Rt=!0));const h=this.ONt(r,o);this.CNt&&(this.VIt.fn(yo.aa,this.GIt),await this.CNt.gn(),this.VIt.yn(yo.aa,this.GIt),this.CNt=void 0),this.WNt&&(await this.WNt.gn(),this.WNt=void 0),this.QNt(),this.S7();const a=x.max(this.FNt,t.Cn);await this.wNt(),await this.Yp(h),this.UNt=h;const u=await this.TNt(t,n,r,o);this.TIt(u);try{const t={stack:[],error:void 0,hasError:!1};try{const e=this.YNt(a,!1,!0,i);V(e),await u.yct();const s=Ne(t,Wt.Iy([i]),!1);await Promise.race([e,u.zy([FQ.zgt],s.ly)])}catch(i){t.error=i,t.hasError=!0}finally{qr(t)}}finally{this.k7(),this.VNt()}}async xIt(){const t=this.WNt;t&&t.kc.Vut&&(await t.gn(!0),this.WNt=void 0)}static WIt(t,i){const e=[],s=[];let n=!i.some((t=>t.Lgt.some((t=>"main"===t.zD))));for(const t of i){if(-1!==e.indexOf(t))continue;const r=SW(t.$ft.concat(t.Lgt),n);n=!1;const o=t.Jat.map((t=>t.Wut)),h=new OQ(t,o,r),a=NW(t,i);for(const t of a)h.ggt(t),e.push(t);s.push(h)}return new IG(t,s)}Fat(i){const e=[],s=[];for(const t of i.Zpt)ou(t.YA)&&(0===t.Jat.length?this.yo(new QQ("No supported representation found in the AdaptationSet with mimetype : "+t.YA)):t.YA===Ri.SI?e.push(...t.Yat):s.push(...t.Yat));const n=[];return e.length>0&&n.push(t.WIt(Ri.SI,e)),s.length>0&&n.push(t.WIt(Ri.NI,s)),n}ONt(t,i){var e,s,n,r,o,h,a,u;const c=t.map((t=>{var i;return fl.oft(null!=(i=t.dgt)?i:t.Jat,UT(t.sct,this.Kpt))})).map((t=>({VN:t.VN}))),l=null==(s=this.wc)||null==(e=s.dash)?void 0:e.desiredTimescale;var d;const f=(null==(n=this.wc)?void 0:n.seamlessSwitchStrategy)!==qT.Sz&&(null==(r=this.wc)?void 0:r.seamlessSwitchStrategy)!==qT.CLEAR_ONLY&&(null==(o=this.wc)?void 0:o.seamlessSwitchStrategy)!==qT.SAME_DRM_ONLY&&(null!=(d=null==(a=this.wc)||null==(h=a.dash)?void 0:h.needsTimescaleShifting)?d:Fe.Ys.jp),g=null==(u=this.wc)?void 0:u.useManagedMediaSource;return{YA:uh.FQ,k5:c,yV:oW(i),S8:null==i?void 0:i.S8,jp:f,T3:l,Q5:g}}static ZIt(t,i){if(!t.length)return;let e;for(const s of t){const t=0===s.wgt.length;e=tW(e,nW(s.Hlt,i,t))}return(null==i?void 0:i.preferredKeySystems)&&e&&(e.Npt=uW(e.Npt,i.preferredKeySystems)),e}jNt(i,e,s,n,r){var o,h;const a=this.wc.contentProtection;let u=t.ZIt(e,a);if(void 0!==u)return u;var c;const l=null!=(c=null==(o=this.wc)?void 0:o.seamlessSwitchStrategy)?c:qT.Mz;if(l===qT.Sz||l===qT.CLEAR_ONLY||l===qT.SAME_DRM_ONLY)return;const d=null==(h=this.CNt)?void 0:h.Spt;if(!r&&void 0!==d){const t=!d.S8;if(l===qT.Mz&&t&&!this.OIt())return;return d}const f=!r&&l===qT.Mz;return u=this.HIt(i,a,s,n,f),void 0!==u?(u.S8=!0,u):void 0}HIt(i,e,s,n,r){let o=i,h=!1;for(;;){if(o=h?this.fTt(o):this.dTt(o),void 0===o){if(h)return;h=!0,o=i;continue}const a=EG(o,this.Fat(o),s,n,this.Kpt),u=t.ZIt(a,e);if(r){const t=this.ONt(a,u);if(!this.dNt(t))return}if(void 0!==u)return u}}MIt(t){for(const i of t)i.src&&this.xV.LQ(i);oD(this.xV.Z)}Rk(){var t;const i=this.KE;this.tIt=!0,i||(this.W8||(this.XIt(new J),this.qIt()),(null==(t=this.aV)?void 0:t.zP)&&this.aV.zk(),this.KIt())}Pk(){this.JIt||(this.JIt=new xh),this.$It();const t=this.JIt.rM;return V(t),t}$It(){if(this.tIt=!1,this.n7=!0,this.tDt=!1,this.nIt(),this.OE){const t=this.XNt;t.V>0&&this.Wb(t.Cn(0))}this.W8||this.o7().then(this.iDt,this.XIt),this.SNt(),this.KIt()}get iIt(){return this.cz.KE}o7(){return this.cz.Pk()}qIt(){this.cz.Rk()}S7(){this.W8||(this.tIt=this.KE,this.W8=!0,this.qIt())}k7(){this.W8&&(this.W8=!1,this.tIt||this.o7().then(this.iDt,this.XIt),this.SNt(),this.KIt())}KIt(){const t=this.iF,i=this.KE;t!==i&&(this.iF=i,i?this.yo(new Zr(this.xE)):this.yo(new fi(this.xE)))}Wb(t,i,e){return void 0===i&&(i=!1),void 0===e&&(e=zG.ISt),this.SIt=!0,this.INt.Ty(),this.m7.Ty(),this.kG=!0,this.Y8=t,this.tDt=this.tDt&&this.V8(),this.sIt(this.eIt),this.eDt(new Yr(this.xE)),this.m7=new Wt,this.p7=Vh(this.A7(t,this.xNt,this.p7,this.ENt,this.m7.ly,i,e),this.m7).catch(this.wAt),this.p7}sDt(){this.m7.Ty()}async A7(t,i,e,s,n,r,o,h){var a;void 0===r&&(r=!1),void 0===o&&(o=zG.ISt),void 0===h&&(h=!1),null==(a=this.aV)||a.zk();try{var u,c;0,await Promise.all([i,e,s]),yi(n),await Ao(this.LNt.rM,n);const a=this.XNt.gP(t);this.Y8=a;const l=h||(null==(c=this.wc)||null==(u=c.dash)?void 0:u.forceHardSwitchWhenSeekingBackwards)&&a<=this.xE,d=this.nDt(a),f=this.CNt;if(l||!f||!f._k.gr(a)&&o!==zG.DSt&&f.kc!==d){if(d){let t=this.WNt;if(this.S7(),f&&await f.pct(),t&&t.kc===d&&!l){const i=this.ONt(t.vAt,t.Spt);this.w3(),this.dNt(i)&&await this._Nt(i),this.UNt=i}else{t&&await t.gn(!0);const i=this.Fat(d),e=null==f?void 0:f.kc,s=null==f?void 0:f._At,n=EG(d,i,e,s,this.Kpt);let r=this.jNt(d,n,e,s,!1);n.forEach((t=>t.Rt=!0));let o=this.ONt(n,r);this.LIt(d)&&!l?(this.w3(),this.dNt(o)&&await this._Nt(o)):(r=this.jNt(d,n,e,s,!0),o=this.ONt(n,r),f&&(this.VIt.fn(yo.aa,this.GIt),await f.gn(),this.VIt.yn(yo.aa,this.GIt),this.CNt=void 0),await this.wNt(),await this.Yp(o)),this.UNt=o,t=await this.TNt(d,i,n,r),this.WNt=t,this.QIt.xx=t.nt,this.yIt(t),t.bct(this.CNt)}await t.yct(fU.sut),this.TIt(t)}}else{0;const t=this.WNt;if(t&&!t.rAt){await t.pct(),this.w3();const i=this.ONt(f.vAt,f.Spt);this.dNt(i)&&await this._Nt(i),this.UNt=i}}0;const g=this.YNt(a,r,!1,n);V(g),this.Y8=void 0,await this.CNt.yct(fU.sut),yi(n),this.zNt(),await g,yi(n),this.k7(),this.kG=!1,this.rDt(new aa(this.xE)),this.NIt()}catch(t){if(Tu(t))return void 0;0}}NIt(){if(this.KE||this.wk||void 0===this.Az)return;const t=this.xE;var i,e;this.xE+this.Az-this.Ek.md.maximumOffset<t?null==(i=this.aV)||i.Cn():null==(e=this.aV)||e.zk()}async YNt(t,i,e,s){let n,r,o=!0,h=t;for(;;){const a={stack:[],error:void 0,hasError:!1};try{const u=this.hIt;if(u.V>0){const i=u.gP(t);h!==i&&(u.gr(h)&&this.nbt.Fft.YA===nc.FQ||(h=i,o=!0))}if(o)o=!1,null==r||r.Ty(),r=new Wt,r.Sy(s),n=Vh(this.oDt(h,i,e,r.ly),r),V(n);else if(!this.aIt&&!this.G5)break;const c=Ne(a,Wt.Iy([s]),!1);await Promise.race([n,this.zy([Zi.Tb,Zi.Zy],c.ly),this.nbt.Fft.zy(ea.Qut,c.ly)])}catch(t){a.error=t,a.hasError=!0}finally{qr(a)}}}async oDt(t,i,e,s){for(this.cz.Wb(t,i,e);this.aIt||this.G5;)await this.cz.zy([Zi.bb,Zi.ob],s)}QNt(){void 0===this.ZNt&&(this.ZNt=this.FNt,this.cz.fn(Zi.Mb,this.eDt),this.cz.fn(Zi.bb,this.rDt))}VNt(){if(void 0===this.ZNt)return;const t=this.FNt;this.ZNt=void 0,this.cz.yn(Zi.Mb,this.eDt),this.cz.yn(Zi.bb,this.rDt),this.FNt!==t&&this.xc()}hDt(t){this.Fo=this.Fo.pP(t)}nDt(t){const i=this.nbt.Fft,e=i.nAt.filter((t=>t.ct>=.2));if(0===e.length)return;const s=e[0];if(t<=s.Cn)return s;for(const i of e)if(i.jn>t)return i;return i.YA!==nc.FQ?e[e.length-1]:void 0}fTt(t){let i=t.yAt;for(;i&&i.ct<.2;)i=i.yAt;return i}dTt(t){let i=t.bAt;for(;i&&i.ct<.2;)i=i.bAt;return i}async ka(t,i,e){const s={stack:[],error:void 0,hasError:!1};try{var n;if(this.SV.WY(t.contentProtection),this.aDt(),this.wc&&!gS(this.wc)&&await this.tr(),!t||gS(t))return;const o=Ne(s,Wt.Iy([e]),!1);this.zQ=Wt.Iy([o.ly]),this.wc=t,this.uDt=i,this.Kpt=t.abr,this.Opt=t.ignoreEmbeddedTextTrackTypes;const h=VG(new UG(this.OQ,Boolean(this.wc.useCredentials),this.Dft),this.plt);var r;if(this.KTt(!0),this.kIt=new SG({$x:Fe.Ah(this.wc.src),sSt:null!=(r=null==(n=this.wc.latencyConfiguration)?void 0:n.targetOffset)?r:this.wc.liveOffset,aSt:this.wc.timeServer,zI:this.wc.useCredentials},this.cDt(this.Kpt),this.OQ,h,this.wc.dash),this.nbt=this.kIt.Tr,this.nbt.Fft.yn(Zi.ub,this.lDt),this.nbt.Fft.yn(Zi.fb,this.dDt),this.nbt.Fft.yn(sG.yTt,this.fDt),this.nbt.Fft.yn(ea.Qut,this.SNt),await this.gDt.$n(this.nbt.Fft),await this._Dt.$n(this.nbt.Fft),Qa(this.Opt,El.EMSG)||(this.Apt=new mW(this.CQ),this.Ul.$Y(this.Apt.Z),await this.Apt.$n(this.nbt.Fft)),t.latencyConfiguration){const i=t.latencyConfiguration;this.aV=new AW(this,this.cz,i),this.aV.Rt=!0,this.mV.Sa(this.aV)}this.nIt(),o.wy()}catch(t){s.error=t,s.hasError=!0}finally{qr(s)}}async vDt(){const t=this.nbt.Fft.XE;var i,e;(this.KTt(t),t)?this.pIt():(await Promise.all([null==(i=this.CNt)?void 0:i.pct(fU.Aut),null==(e=this.WNt)?void 0:e.pct(fU.Aut)].filter($t)),this.DIt(),this.sDt(),this.DNt.Ty())}get XE(){return this.qTt}KTt(t){this.qTt!==t&&(this.qTt=t,this.yo(t?new WG:new wl))}nIt(){this.nbt&&(this.wDt=this.mDt(this.wDt,this.zQ.ly).catch(this.wAt))}async mDt(t,i){t&&(await t,yi(i));try{this.ck===Nr.Mz||this.n7?await this.pDt(i):this.ck===Nr.MQ&&await this.ADt(i)}catch(t){throw X(t),this.eG(new qi(vt.MANIFEST_LOAD_ERROR,t.message,t)),t}}async pDt(t){await this.ADt(t),this.yDt||(this.yDt=!0,this.LNt.Sy(this.$n(this.uDt,t)));try{await this.LNt.rM}catch(t){X(t),this.eG(new qi(vt.MEDIA_DECODE_ERROR,t.message,t))}}async ADt(t){await Ao(this.kIt.W,t);const i=this.nbt.Fft;if(void 0===this.aV&&i.YA===nc.FQ){const t=i.Zyt,e=(null==t?void 0:t.DTt)?(null==t?void 0:t.DTt)/1e3:i.iSt,s={minimumOffset:(null==t?void 0:t.STt)?(null==t?void 0:t.STt)/1e3:.5*e,maximumOffset:(null==t?void 0:t.ITt)?(null==t?void 0:t.ITt)/1e3:1.5*e,targetOffset:e,forceSeekOffset:2.5*e,minimumPlaybackRate:We,maximumPlaybackRate:ee};this.aV=new AW(this,this.cz,s),this.mV.Sa(this.aV)}}TIt(i){const e=this.CNt;i!==e&&(this.CNt&&this.AIt(this.CNt),this.WNt&&this.bIt(this.WNt),e&&this.sIt(this.eIt),this.CNt=i,this.WNt=e,this.fIt(this.CNt),this.WNt&&this.yIt(this.WNt),this.Oz.xx=i.ht,this.Pz.xx=i.rt,this.UIt(i),this.VIt.fn(yo.aa,this.GIt),t.bDt(this.VIt),this.VIt.yn(yo.aa,this.GIt),this.VIt.xx=i.nt,this.QIt.xx=void 0,this.BIt())}static bDt(t){for(const i of t.Ix)i.UI=lc.Ch}ge(){this.cz.ge()}be(){this.cz.be()}eG(t){this.dV||(V(this.tr()),this.dV=la(t),this.fV=t,this.yo(new Uc(t)))}aDt(){this.dV=void 0,this.fV=void 0}fNt(){const t=this.vV;t&&(t.y5&&(t.y5.PK=this.UG.ZK),t.A5&&(t.A5.PK=this.UG.ZK))}gNt(){const t=this.vV;t&&(t.y5&&(t.y5.QK=this.UG.QK),t.A5&&(t.A5.QK=this.UG.QK))}determineStallJumpTarget(){if(this.CNt)return this.CNt.Jpt()&&this.xE>this.CNt.jn-Ij&&!this.CNt.sAt?this.CNt.jn:void 0}async tr(){if(this.MDt)return this.MDt;try{this.MDt=this.TDt(),await this.MDt}finally{this.MDt=void 0}}async TDt(){this.$E=1,this.zQ.Ty(),this.sDt(),this.DIt(),this.DNt.Ty(),this.LNt.Ty(),this.SIt=!1,this.Rk(),this.n7=!1,this.tDt=!1,this.Oz.xx=void 0,this.Pz.xx=void 0,this.VIt.xx=void 0,this.QIt.xx=void 0,this.wDt&&(await this.wDt.catch(ya),this.wDt=void 0),await Promise.all([this.xNt,this.p7,this.ENt,this.LNt.rM.catch(ya)]),this.CNt&&(await this.CNt.gn(!0),this.CNt=void 0),this.WNt&&(this.bIt(this.WNt),await this.WNt.gn(!0),this.WNt=void 0),await this.wNt(),this.UNt=void 0,this.zIt=void 0,this.OV.tr(),await this.gDt.tr(),await this._Dt.tr(),void 0!==this.Apt&&(this.Ul.eV(this.Apt.Z),await this.Apt.gn(),this.Apt=void 0),this.CQ.tr(),this.nbt&&(this.nbt.Fft.fn(Zi.ub,this.lDt),this.nbt.Fft.fn(Zi.fb,this.dDt),this.nbt.Fft.fn(sG.yTt,this.fDt),await this.kIt.gn(),this.nbt=void 0),this.rIt=!1,this.SDt=NaN,this.NDt=0,this.IDt=0,this.ZNt=void 0,this.W8=!1,this.Fo=Mo.PP(),this.iF=!0,this.Y8=void 0,this.DDt=!1,this.kG=!1,this.yDt=!1,this.LNt=new xh,this.KNt=0,this.JNt=0,this.$Nt=0,this.wc=void 0,this.uDt=void 0,this.Opt=[],this.YIt=void 0,this.mV.tr(),this.aV=void 0,this.mNt={Bz:0,Uz:0,Qz:0},await this.xV.tr(),this.cz.jV(),this.EDt.tr()}async gn(){this.Bo(),this.aDt(),await this.tr(),this.Bo(),this.Oz.gn(),this.Pz.gn(),this.VIt.gn(),this.QIt.gn(),this.Ul.gn(),this.OV.gn(),this.kDt.wy(),await this.gDt.gn(),await this._Dt.gn(),this.CQ.gn(),this.EDt.gn(),this.cz.fn(Zi.Zy,this.Att),this.cz.fn(bw.Xy,this.x8),this.cz.fn(Zi.qy,this.xDt),this.cz.fn(Zi.Mb,this.eDt),this.cz.fn(Zi.bb,this.rDt),this.cz.fn(Zi.yb,this.mIt),this.cz.fn(Zi.Eb,this.xc),this.cz.fn([Zi.so,Zi.wb],this.LDt),this.cz.fn(bW,this.Ds),await this.xV.gn(),this.Ul.gn(),this.UG.fn("RK",this.CDt),this.UG.fn("UK",this.jDt),this.cz.fn(Me.ua,this.ODt),this.cz.fn([Zi.Vy,Zi.Yy],this.Ds),this.cz.fn(Zi.Cb,this.TAt),this.cz.zV=void 0,this.SV.fn("contentProtectionsTracked",this.RDt),this.cz.Ptt=void 0}Ck(){return this.cz.wa}_a(){return this.cz.LV}get FE(){return!1}Bk(){return!1}Uk(){}Qk(){}Fk(){}Yk(){this.NNt(!0)}get Az(){var t;const i=null==(t=this.nbt)?void 0:t.Fft;if(i&&i.YA===nc.FQ&&i.Ryt)return i.Qft().getTime()/1e3-i.Ryt.getTime()/1e3-this.xE}Wk(t){const i=this.cz.CV(t);return this.EDt.tt(i),i}constructor(t,i,e,s,n,r,o){super(),this.CNt=void 0,this.WNt=void 0,this.n7=!1,this.SDt=NaN,this.dV=void 0,this.fV=void 0,this.W8=!1,this.ZNt=void 0,this.Y8=void 0,this.DDt=!1,this.NDt=0,this.IDt=0,this.rIt=!1,this.zQ=new Wt,this.LNt=new xh,this.yDt=!1,this.nbt=void 0,this.kIt=void 0,this.qTt=!0,this.tIt=!0,this.JIt=void 0,this.Fo=Mo.PP(),this._V=Nr.pG,this.wDt=void 0,this.iF=!0,this.wc=void 0,this.uDt=void 0,this.Kpt=void 0,this.Opt=[],this.kG=!1,this.INt=new Wt,this.xNt=Promise.resolve(),this.m7=new Wt,this.p7=Promise.resolve(),this.SIt=!1,this.tDt=!1,this.DNt=new Wt,this.ENt=Promise.resolve(),this.UNt=void 0,this.Apt=void 0,this.KNt=0,this.JNt=0,this.$Nt=0,this.AV=new wr,this.YIt=void 0,this.mNt={Bz:0,Uz:0,Qz:0},this.vV=void 0,this.aV=void 0,this.pIt=()=>{this.NNt()},this.TAt=t=>{var i;null==(i=this.CNt)||i.TAt(t)},this.xc=()=>{this.yo(new A(this.xE,this.NE))},this.x8=t=>{this.yo(new DG(this.xE,t.GA,t.Vb))},this.gIt=t=>{this.KNt+=t.Yz,this.yo(t)},this._It=t=>{const i=t.segments.filter((t=>t.bdt));t.track===Ri.SI?this.JNt=i.length:t.track===Ri.NI&&(this.$Nt=i.length)},this.Att=()=>{const t=this.ct;j(t)||t===this.SDt||(this.SDt=t,this.yo(new Hs(this.SDt)))},this.LDt=()=>{this.SNt(),this.KIt()},this.xDt=t=>{this.tDt||!this.OE||this.wk||(this.tDt=!0,this.yo(null!=t?t:new fa(this.xE)))},this.dDt=t=>{this.Ds(t),this.rIt||(this.rIt=!0,this.kDt.PDt())},this.lDt=()=>{this.nbt.Fft.fn(Zi.ub,this.lDt),this.yo(new Gi)},this.wIt=t=>{var i;if(t.errorObject.code===vt.CONTENT_PROTECTION_OUTPUT_RESTRICTED&&(null==(i=this.CNt)?void 0:i.vAt.every((t=>!t.mgt))))return;this.eG(t.errorObject),this.yo(t)},this.vIt=t=>{this.eG(t.errorObject)},this.wAt=t=>{Tu(t)||this.eG(new qi(vt.MEDIA_DECODE_ERROR,t.message,t))},this.SNt=()=>{if(!this.KE)if(this.HNt())if(this.qNt()){const t=this.nbt.Fft.JTt;this.Wb(t,!0)}else;else{const t=this.nbt.Fft.JTt;this.Wb(t,!0)}},this.eDt=t=>{this.DDt=this.wk,this.yo(t)},this.rDt=t=>{const i=this.DDt,e=this.wk;this.DDt=e,i&&!e&&this.yo(t),this.xDt()},this.mIt=()=>{const t=this.Tk,i=this.yk;this.NDt===t&&this.IDt===i||(this.NDt=t,this.IDt=i,this.yo(new hD))},this.GIt=t=>{const i=t.Ht;i.UI===lc.Jn?(this.RIt(i),this.zIt=i):i===this.zIt&&i.UI===lc.Ch&&(this.zIt=void 0,this.BIt())},this.iDt=()=>{this.W8||this.JIt&&(this.JIt.sM(),this.JIt=void 0)},this.XIt=t=>{this.W8||this.JIt&&(this.JIt.nM(t),this.JIt=void 0)},this.fDt=()=>{this.vDt().catch(this.wAt)},this.ODt=t=>{this.eG(ju(t.lt))},this.CDt=()=>{this.fNt()},this.jDt=()=>{this.gNt()},this.RDt=t=>{this.vNt(t.GY)},this.OQ=t,this.plt=new pW(n),this.cz=r,this.bNt=o,this.UG=e,this.UG.yn("RK",this.CDt),this.UG.yn("UK",this.jDt),this.mV=s,this.Dft=i.retryConfiguration,this.Oz=new tl,this.Pz=new tl,this.SV=new QE(t),this.SV.yn("contentProtectionsTracked",this.RDt),this.cz.yn(Zi.Zy,this.Att),this.cz.yn(bw.Xy,this.x8),this.cz.yn(Zi.qy,this.xDt),this.cz.yn(Zi.Mb,this.eDt),this.cz.yn(Zi.bb,this.rDt),this.cz.yn(Zi.yb,this.mIt),this.cz.yn(Zi.Eb,this.xc),this.cz.yn([Zi.so,Zi.wb],this.LDt),this.cz.yn(bW,this.Ds),this.cz.yn(Me.ua,this.ODt),this.cz.zV=this.SV,this.cz.Ptt=this,this.cz.yn([Zi.Vy,Zi.Yy],this.Ds),this.cz.yn(Zi.Cb,this.TAt),this.kDt=new TW(this,this.cz),this.OV=new uo(this.kDt,!0),this.OV.yn(E.rP,this.SNt),this.OV.yn(QT,this.Ds),this.VIt=new Ce,this.VIt.yn(yo.aa,this.GIt),this.QIt=new Ce,this.CQ=this.zDt(),this.gDt=new qG(this.CQ),this._Dt=new cW(this.CQ),this.xV=new dr(this.cz,this.OQ),this.EDt=new Cc,this.Ul=new YE([this.VIt,this.gDt.Z,this._Dt.Z,this.xV.Z,this.EDt])}},TW=class extends uD{get fk(){return this.ta.fk}PDt(){this.yo(new Yu(this.xE,this.fk))}constructor(t,i){super(i),this.ta=t}};function SW(t,i){const e=t.filter((t=>"urn:mpeg:dash:role:2011"===t.y8)).map((t=>t.zD)).filter($t);return i||Qa(e,"main")?Qa(e,"caption")?"captions":Qa(e,"subtitle")?"subtitles":Qa(e,"dub")?"translation":"main":Qa(e,"sign")?"sign":Qa(e,"description")?"descriptions":Qa(e,"commentary")?"commentary":"alternative"}function NW(t,i){var e;const s=dl([...t.KAt,...t.JAt],(t=>"urn:mpeg:dash:adaptation-set-switching:2016"===t.y8));var n;const r=null!=(n=null==s||null==(e=s.zD)?void 0:e.split(","))?n:[],o=[];for(const t of r){const e=Number(t),s=dl(i,(t=>t.o===e));s&&o.push(s)}return o}var el=class extends MW{jk(){if(XB(this.cz))return this.cz.jk()}get cIt(){return XB(this.cz)?this.cz.yk:0}get dIt(){return XB(this.cz)?this.cz.Tk:0}async gn(){var t;await super.gn(),null==(t=this.BDt)||t.gn()}LIt(t){var i,e;return((null!=(e=null==(i=this.wc)?void 0:i.seamlessSwitchStrategy)?e:qT.Mz)!==qT.Mz||!Ro.wg)&&super.LIt(t)}OIt(){return!(Ro.Nf&&Ro.Df<3)&&super.OIt()}zDt(){return new Ir(this,new Qc)}cDt(t){return qB(t)}constructor(t,i,e,s,n,r,o){super(t,i,e,s,n,r,new KB(o)),this.wht=o,Ro.qf&&(this.BDt=new hU(this))}},IW=class extends el{async gn(){await super.gn(),await this.QV.BV(this.cz)}constructor(t,i,e,s,n,r,o,h){const a=new es(r);super(t,i,e,s,n,a.sG(o),h),this.QV=a}};r(),il(),r(),r(),r(),r();var DW=class extends Er{get UDt(){return this.lD.UDt}SE(){return super.SE().Gb(this.UDt)}Yht(){return super.Yht().Gb(this.UDt)}B4(t,i,e){const s=this.UDt;return super.B4(t,{xst:i.xst-s,ct:i.ct,rQ:i.rQ-s},e)}s3(t,i){const e=this.UDt;return super.s3(x.max(0,t-e),x.max(0,i-e))}wS(t,i,e){const s=this.UDt;return super.wS(x.max(0,t-s),x.max(0,i-s),e)}O3(t,i){const e=this.UDt;super.O3(x.max(0,t-e),x.max(0,i-e))}R3(t,i){const e=this.UDt;super.R3(x.max(0,t-e),x.max(0,i-e))}constructor(t,i){super(i),this.lD=t}},EW=class extends Tr{get UDt(){return this.lD.UDt}_d(){return super._d()+this.UDt}S5(t){super.S5(t-this.UDt)}vk(){return super.vk().Gb(this.UDt)}E5(t,i,e,s){const n=this.UDt;super.E5(t-n,i-n,e,s)}Rht(t){return new DW(this,t)}constructor(t,i){super(i),this.jht(i),this.lD=t}},kW=class extends nU{get mht(){return this.cz}get UDt(){return this.QDt}set UDt(t){this.QDt=t}SE(){return super.SE().Gb(this.QDt)}DE(){return xW(super.DE(),this.QDt)}LE(){return super.LE()+this.QDt}_d(){return super._d()+this.QDt}hk(){return super.hk().Gb(this.QDt)}vk(){return super.vk().Gb(this.QDt)}Wb(t,i,e){const s=x.max(0,t-this.QDt);super.Wb(s,i,e)}cV(t){super.cV(xW(t,-this.QDt))}Ak(){return this.Ul}Wk(t,i,e,s,n,r,o,h){return this.CQ.Wk(t,i,e,s,n,r,o,h)}CV(t){return this.CQ.CV(t)}BQ(t){this.CQ.BQ(t)}jV(){this.CQ.tr(),super.jV()}DV(){return!1}kV(t,i,e,s,n){throw new b("Not supported")}wy(){return this.ust.gn(),this.ast.gn(),this.CQ.gn(),this.Ul.gn(),super.wy()}kht(t){return new EW(this,t)}Eht(t){return new Jo(t)}Vk(t){let i;switch(t.type){case Zi.so:i=new fi(t.currentTime+this.QDt);break;case Zi.wb:i=new Zr(t.currentTime+this.QDt);break;case E.oP:i=new te(t.currentTime+this.QDt);break;case Zi.Eb:i=new A(t.currentTime+this.QDt,xW(t.currentProgramDateTime,this.QDt));break;case Zi.mb:i=new ii(t.currentTime+this.QDt);break;case Zi.Mb:i=new Yr(t.currentTime+this.QDt);break;case Zi.bb:i=new aa(t.currentTime+this.QDt);break;case Zi.eb:i=new zj(t.currentTime+this.QDt);break;case Zi.ob:i=new DR(t.currentTime+this.QDt);break;case Zi.qy:i=new fa(t.currentTime+this.QDt);break;case Zi.pb:i=new cu(t.currentTime+this.QDt,t.playbackRate);break;case Zi.kb:i=new $e(t.currentTime+this.QDt,t.volume);break;case Zi.Zy:i=new Hs(t.duration+this.QDt);break;case E.wx:i=new Yu(t.currentTime+this.QDt,t.readyState);break;default:i=t}super.Vk(i)}be(){super.be(),this.ast.be()}ge(){super.ge(),this.ast.ge()}constructor(t){super(t),this.QDt=0,this.CQ=new Ir(this,new Qc),this.Ul=new YE([this.CQ.nt,super.Ak()]),this.ast=new Xn,this.ast.Rtt(this.gV.parentElement),this.ust=new Qn(this.ast.we,this.Uu,this.Ul,this.Ll,this.wa,this.LV)}};function xW(t,i){return t?new Date(t.getTime()+1e3*i):void 0}var LW=class extends Sr{sG(t){if(t===Ri.NI)return new kW(super.sG(t))}async BV(t){const i=t;await i.wy(),await super.BV(i.mht)}},CW=class extends el{async Yp(t){await super.Yp(t),void 0===this.FDt&&(this.FDt=this.YDt(),this.cz.UDt=this.FDt)}YDt(){if(this.ct===1/0){const t=this.XNt;if(t.V>0)return x.max(0,t.Cn(0)-300)}return 0}A7(t,i,e,s,n,r,o,h){return void 0===r&&(r=!1),void 0===o&&(o=zG.ISt),void 0===h&&(h=!1),h||(h=this.ct===1/0&&Ro.Nf&&Ro.Df<3&&t<=this.xE),super.A7(t,i,e,s,n,r,o,h)}async tr(){await super.tr(),this.FDt=void 0,this.cz.UDt=0}async gn(){await super.gn(),await this.cz.wy(),await this.QV.BV(this.cz)}static PS(t){var i;return(!t||"google-dai"!==(null==t||null==(i=t.ssai)?void 0:i.integration))&&(Ro.Nf&&Ro.Df<4)}constructor(t,i,e,s,n,r,o,h){const a=new LW(new es(r));super(t,i,e,s,n,a.sG(o),h),this.QV=a,this.FDt=void 0}};r(),il(),r(),r(),r(),r();var jW=class extends JB{get mht(){return this.cz}get yk(){return this.cz.yk}get Tk(){return this.cz.Tk}constructor(t){super(t)}};r(),r(),r(),ds();var OW=class extends Er{Uht(){return this.VDt?this.XK:super.Uht()}Qht(t){this.VDt?this.XK=t:super.Qht(t)}SE(){return this.VDt?this.GDt:super.SE()}LS(){return this.VDt?this.KS:super.LS()}Yht(){return this.VDt?this.WDt:super.Yht()}Vht(){return this.VDt?this.WK:super.Vht()}Ght(t){this.VDt?this.WK=t:super.Ght(t)}B4(t,i,e){return this.U4((e=>this.ZDt(t,i,e)),e)}ZDt(t,i,e){return super.B4(t,i,e)}P3(){return this.U4((()=>this.HDt()))}HDt(){return super.P3()}F4(t,i,e){return this.U4((e=>this.XDt(t,i,e)),e)}XDt(t,i,e){return super.F4(t,i,e)}F$(){return this.VDt?this.Dst:super.F$()}I3(){this.VDt?this.qDt=!0:super.I3()}O3(t,i){this.VDt?(this.WDt=this.WDt.pP(new Mo([t,i])),this.KDt.push({YA:"cdt",lB:t,dB:i})):this.JDt(t,i)}JDt(t,i){super.O3(t,i)}s3(t,i){return this.U4((()=>this.$Dt(t,i)))}$Dt(t,i){return super.s3(t,i)}R3(t,i){this.VDt?(this.WDt=this.WDt.yP(new Mo([t,i])),this.KDt.push({YA:"wS",lB:t,dB:i})):this.tEt(t,i)}tEt(t,i){super.R3(t,i)}wS(t,i,e){return this.U4((e=>this.iEt(t,i,e)),e)}iEt(t,i,e){return super.wS(t,i,e)}D$(t){return this.U4((()=>this.eEt(t)))}eEt(t){return super.D$(t)}async U4(t,i){this.d3(),this.VDt&&(await Ao(this.VDt.rM,i),this.d3()),yi(i);try{this.m3=t(i),await this.m3}finally{this.m3=void 0}}d3(){if(this.m3)throw new b("Internal error")}async sEt(){if(this.VDt)throw new k("Already locked");this.VDt=new xh,this.nEt(),this.m3&&(await this.m3.catch(ya),this.nEt())}rEt(){var t;null==(t=this.VDt)||t.sM(),this.VDt=void 0,this.oEt()}nEt(){this.KS=super.LS(),this.XK=super.Uht(),this.WK=super.Vht(),this.GDt=super.SE(),this.WDt=super.Yht(),this.Dst=super.F$(),this.qDt=!1}oEt(){this.d3(),super.Qht(this.XK),super.Ght(this.WK);const t=this.KDt.slice();nt(this.KDt);for(const i of t)"cdt"===i.YA?this.JDt(i.lB,i.dB):this.tEt(i.lB,i.dB);this.qDt&&super.I3(),this.GDt.IP(super.SE())||this.yo(new Jr(po.g$))}wy(){var t;null==(t=this.VDt)||t.Ty(),this.VDt=void 0,super.wy()}constructor(t){super(t),this.m3=void 0,this.VDt=void 0,this.XK=0,this.GDt=Mo.PP(),this.WDt=Mo.PP(),this.KDt=[],this.Dst=!1,this.qDt=!1,this.WK=0,this.KS=t.md}},RW=class extends OW{SE(){var t,i;return super.SE().pP(null!=(i=null==(t=this.hEt)?void 0:t.TE)?i:Mo.PP())}Yht(){var t,i;return super.Yht().pP(null!=(i=null==(t=this.hEt)?void 0:t.L3)?i:Mo.PP())}Qht(t){super.Qht(t),this.hEt&&(this.hEt.QK=t)}Ght(t){super.Ght(t),this.hEt&&(this.hEt.PK=t)}JDt(t,i){super.JDt(t,i),this.hEt&&this.hEt.O3(t,i)}tEt(t,i){super.tEt(t,i),this.hEt&&this.hEt.R3(t,i)}async iEt(t,i,e){yi(e);const s=[];s.push(super.iEt(t,i,e)),this.hEt&&s.push(this.hEt.wS(t,i,e)),await Promise.all(s)}N$(t){return!!super.N$(t)||this.lD.aEt(t)}eEt(t){return super.N$(t)?super.eEt(t):this.lD.uEt(t)}cEt(t){var i,e;null==(i=this.hEt)||i.fn(br,this.Wht),this.hEt=t,null==(e=this.hEt)||e.yn(br,this.Wht)}constructor(t,i){super(i),this.hEt=void 0,this.lD=t}};Qi();var PW=class extends Tr{N$(t){const i=void 0!==this.b5,e=void 0!==this.M5,s=t.k5.some((t=>Et(t.VN,"audio"))),n=t.k5.some((t=>Et(t.VN,"video")));return i===s&&e===n&&(!!super.N$(t)||(!(!this.lEt||!this.lEt.N$(t))||this.lD.dEt(t)))}async D$(t){return super.N$(t)?await super.D$(t):this.lEt&&this.lEt.N$(t)?(this.fEt(),await this.D$(t)):(await this.lD.gEt(t),await this.D$(t))}aEt(t){return this.N$(this._Et(t))}uEt(t){return this.D$(this._Et(t))}_Et(t){const i=this.md,e=i.k5.map((i=>Et(t.VN,"audio")&&Et(i.VN,"audio")||Et(t.VN,"video")&&Et(i.VN,"video")?t:i));return Ei({},i,{k5:e})}E5(t,i,e,s){super.E5(t,i,e,s),this.lEt&&this.lEt.E5(t,i,e,s)}vEt(){return!this.wEt&&this.mEt}_d(){return void 0!==this.pEt?this.pEt:this.vEt()?this.JM:super._d()}S5(t){this.JM=t,this.pEt=void 0,this.vEt()||super.S5(t)}Cht(){return!this.vEt()&&super.Cht()}I3(){this.pEt=x.max(zW(this.vV.A5),zW(this.vV.y5)),this.vEt()||super.I3()}w3(){this.pEt=void 0,this.vEt()||super.w3()}Rht(t){return new RW(this,t)}AEt(){this.wEt=!this.wEt}fEt(){const t=this.vV,i=this.lEt;i&&(this.wEt=!this.wEt,this.jht(i),this.yEt(t),this.vEt()&&this.bEt())}yEt(t){var i,e;this.lEt=t,null==(i=this.b5)||i.cEt(null==t?void 0:t.A5),null==(e=this.M5)||e.cEt(null==t?void 0:t.y5)}MEt(t){const i=this.vV,e=this.lEt;if(!e)return;const s=this.wEt,n=s?i:e,r=(s?e:i).TE.CP(t);if(!r)return;const o=_U(n.TE,this.Yht()).CP(r.jn(0),Be);return!o||r.jn(0)+Be>=o.jn(0)?void 0:x.max(r.jn(0),o.Cn(0))}TEt(t,i){if(this.mEt)return Promise.resolve();const e=this.wEt?this.lEt:this.vV;return e?(this.mEt=!0,this.SEt((i=>{if(yi(i),this.mEt)return async function(t,i,e){yi(e);const s=[];t.A5&&s.push(xj(t.A5,i,e));t.y5&&s.push(xj(t.y5,i,e));await Promise.all(s),t.I3()}(e,t,i)}),i)):Promise.resolve()}bEt(){if(!this.mEt)return;const t=this.wEt?this.lEt:this.vV;if(!t)return;var i;this.mEt=!1;const e=null!=(i=this.pEt)?i:this.JM;t.ct<e&&t.S5(e),t.w3()}NEt(t){var i;const e=null!=(i=this.pEt)?i:this.JM;t.S5(e),this.wEt?this.jht(t):this.yEt(t)}Yht(){var t,i,e;const s=null!=(e=null==(t=this.b5)?void 0:t.L3)?e:Mo.PP();var n;const r=null!=(n=null==(i=this.M5)?void 0:i.L3)?n:Mo.PP();return s.pP(r)}async SEt(t,i){const e=[];this.b5&&e.push(this.b5.sEt()),this.M5&&e.push(this.M5.sEt());try{await Promise.all(e),await t(i)}finally{this.b5&&this.b5.rEt(),this.M5&&this.M5.rEt()}}zht(t){t.type===po.g$&&this.lD.M3(),super.zht(t)}constructor(t,i){super(i),this.lEt=void 0,this.JM=NaN,this.wEt=!1,this.mEt=!1,this.pEt=void 0,this.jht(i),this.lD=t}};function zW(t){if(!t)return 0;const i=t.TE;return i.V>0?i.jn(i.V-1):0}function Hu(t){return t.md.YA===uh.FQ}r(),Qi(),ds();var BW=class extends jW{get IEt(){return this.DEt}SE(){return super.SE().pP(this.DEt.TE)}_d(){if(!this.EEt){const t=this.vV;if(t&&Hu(t))return t.ct}return super._d()}Aht(){return!!super.Aht()&&!(!this.EEt&&!this.F$())}yht(){return!!super.yht()&&!(!this.EEt&&super.Aht()&&!this.F$())}F$(){const t=this.vV;return!(!t||!Hu(t))&&t.F$}hk(){return this.Fo.pP(this.cz.rk)}vk(){return super.vk().pP(this.DEt._k)}gk(){return super.gk()}pht(){var t;return null!=(t=super.pht())?t:this.DEt.wV}Pk(){return this.CG=!1,super.Pk()}Rk(){this.CG=!0,super.Rk()}xtt(){this.EEt=!0,super.xtt(),this.DEt.xtt()}Ltt(){this.EEt=!1,super.Ltt(),this.DEt.xtt()}LE(){var t;return null!=(t=this.Y8)?t:super.LE()}pk(){return void 0!==this.Y8||super.pk()}Wb(t,i,e){void 0===i&&(i=!1),void 0===e&&(e=!1),this.kEt.Ty(),this.m7.Ty(),this.m7=new Wt,this.xEt=Vh(this.A7(t,i,e,this.xEt,this.m7.ly),this.m7).catch(ya)}async A7(t,i,e,s,n){this.Y8=t,this.y7=t,this.yo(new Yr(t)),s&&await s.catch(ya),yi(n),this.vV&&Hu(this.vV)&&this.vV.bEt(),this.Y8=void 0,super.Wb(t,i,e),this.DEt.Wb(t,i,e),this.LEt()}cV(t){const i=this.wV;if(!i||j(i.getTime()))return;const e=(t.getTime()-i.getTime())/1e3;this.Wb(e)}Ott(){super.Ott(),this.DEt.Ott()}get yk(){return this.CEt.yk}get Tk(){return this.CEt.Tk}be(){this.IG&&(this.IG=!1,this.CEt.be())}ge(){this.IG||(this.IG=!0,this.CEt.ge())}async jEt(){var t;this.Y8=void 0,this.y7=NaN,this.Fo=Mo.PP(),null==(t=this.OEt)||t.Ty(),this.kEt.Ty(),this.m7.Ty(),this.xEt&&(await this.xEt.catch(ya),this.xEt=void 0)}Nht(t){super.Nht(t),this.DEt.zV=t}Iht(t){super.Iht(t),this.DEt.Ptt=t}Ak(){return this.Ul}Wk(t,i,e,s,n,r,o,h){return this.CQ.Wk(t,i,e,s,n,r,o,h)}CV(t){return this.CQ.CV(t)}kV(t,i,e,s,n){throw new b("Not implemented yet")}DV(){return!1}BQ(t){this.CQ.BQ(t)}jV(){this.CQ.tr(),super.jV()}async $n(t){const i=await super.$n(t);return Hu(i)&&this.LEt(),i}async tr(){await this.jEt(),await super.tr(),await this.DEt.tr()}async wy(){await this.jEt(),this.CQ.gn(),this.Ul.gn(),await super.wy()}kht(t){return new PW(this,t)}Eht(t){return new Jo(t)}LEt(){this.kEt.Ty(),this.kEt=new Wt,this.xEt=Vh(this.REt(this.xEt,this.kEt.ly),this.kEt).catch(ya)}async REt(t,i){if(t&&await t.catch(ya),this.vV&&Hu(this.vV))for(;;){let t;for(yi(i),this.PEt()&&this.AEt(),this.vV.bEt(),yi(i);;){const e={stack:[],error:void 0,hasError:!1};try{if(yi(i),this.PEt())break;if(t=this.vV.MEt(this.LE()),void 0!==t){0,this.zEt(),await this.vV.TEt(t,i),yi(i),this.DEt.Wb(t);break}const s=Ne(e,Wt.Iy([i]),!1);await Promise.race([this.zy(Zi.Eb,s.ly),this.BEt(s.ly)])}catch(t){e.error=t,e.hasError=!0}finally{qr(e)}}for(yi(i);!this.PEt();)await this.cz.zy([Zi.Eb,Zi.qy,E.wx],i)}}PEt(){const t=this.vV;if(void 0===t||!Hu(t))return!1;const i=this.LE(),e=this.cz.TE;if(!this.cz.OE&&e.gr(i))return!1;return!!_U(this.DEt.TE,t.Yht()).SP(i,i+Be)}AEt(){if(this.UEt)return;this.UEt=!0,this.Fo=this.hk();const t=Qj(this),i=this.pk(),e=this.gk(),s=this.cz,n=this.DEt,r=this.vV;r.bEt(),r.AEt(),Fj(n,t),this.Lht(n),this.DEt=s,s.Rk(),s.WE=!0,this.UEt=!1;const o=this.pk();i!==o&&(o?this.yo(new Yr(this.xE)):this.yo(new aa(this.xE)));const h=this.gk();e!==h&&this.yo(new Yu(this.xE,h)),o||this.zEt()}zEt(){const t=this.cz,i=this.CEt;if(i===t)return;const e=this.Tk,s=this.yk;this.CEt=t,this.IG&&(i.be(),t.ge());const n=this.Tk,r=this.yk;n>0&&r>0&&(e!==n||s!==r)&&this.yo(new hD)}dEt(t){return void 0!==this.DEt.H$([t])}async gEt(t){this.zEt();const i=this.vV,e=this.DEt;await e.tr();const s=await e.$n(t);i.NEt(s)}BEt(t){return this.OEt=new xh,Ao(this.OEt.rM,t)}M3(){var t;null==(t=this.OEt)||t.sM()}Vk(t){t.type===Zi.Mb&&this.y7===t.currentTime||(t.type===Zi.bb&&(this.y7=NaN,this.zEt()),t.type!==E.wx&&t.type!==Zi.wb&&t.type!==Zi.qy||this.UEt||!this.PEt()?(t.type!==Zi.qy||this.OE)&&super.Vk(t):this.LEt())}constructor(t,i,e){super(t),this.EEt=!1,this.Y8=void 0,this.y7=NaN,this.Fo=Mo.PP(),this.CG=!0,this.UEt=!1,this.IG=!0,this.OEt=void 0,this.xEt=void 0,this.kEt=new Wt,this.m7=new Wt,this.DEt=i,this.CEt=t,this.cz.ge(),this.DEt.be(),this.CQ=new Ir(this,e),this.Ul=new YE([this.CQ.nt,super.Ak()])}},UW=class extends BW{get mht(){return this.cz}get IEt(){return this.DEt}be(){super.be(),this.ast.be()}ge(){super.ge(),this.ast.ge()}get gV(){return this.cz.gV}get J5(){return this.cz.J5}get Lk(){return this.cz.Lk}set Lk(t){this.cz.Lk=t}Rtt(t){this.cz.Rtt(t),this.DEt.Rtt(t)}Fk(){this.cz.Fk(),this.DEt.Fk()}jk(){return this.cz.jk()}_a(){return this.jz}Lht(t){const i=this.Ck(),e=this.jk();super.Lht(t),this.jz.xx=t.LV,this.Ck()!==i&&this.yo(new kS),this.jk()!==e&&this.yo(new Bu)}wy(){return this.jz.gn(),this.ust.gn(),this.ast.gn(),super.wy()}constructor(t,i){super(t,i,new Qc),this.jz=new CS(t.LV),this.ast=new Xn,this.ast.Rtt(t.gV.parentElement),this.ust=new Qn(this.ast.we,this.Uu,this.nt,this.Ll,this.wa,this.LV)}},QW=class extends Sr{sG(t){if(t===Ri.NI){const i=super.sG(t),e=super.sG(t);return new UW(i,e)}return super.sG(t)}async BV(t){t instanceof UW?(await t.wy(),await super.BV(t.mht),await super.BV(t.IEt)):await super.BV(t)}},FW=class extends el{async gn(){await super.gn(),await this.QV.BV(this.cz)}static PS(t){var i;return!Ro.Qs&&!Ro.dg&&!(t&&"google-dai"===(null==(i=t.ssai)?void 0:i.integration))}constructor(t,i,e,s,n,r,o,h){const a=new es(new QW(r));super(t,i,e,s,n,a.sG(o),h),this.QV=a}};r(),r(),ds(),Qi(),r();var YW=class extends Tr{Rht(t){return new OW(t)}LS(){return this.QEt?this.KS:super.LS()}SE(){return this.QEt?this.GDt:super.SE()}_d(){return this.QEt?this.JM:super._d()}S5(t){this.QEt?(this.JM=t,this.FEt=!0):super.S5(t)}vk(){return this.QEt?this.YEt?this.YEt.Q3():this.D5:super.vk()}E5(t,i,e,s){this.QEt?this.YEt=new Xu(t,i,e,s):super.E5(t,i,e,s)}Cht(){return this.QEt?this.Dst&&!1!==this.qDt:super.Cht()}I3(){this.QEt?this.qDt=!0:super.I3()}w3(){this.QEt?this.qDt=!1:super.w3()}N$(t){return!this.QEt&&super.N$(t)}D$(t){return this.QEt?Promise.reject(new k("Not supported")):super.D$(t)}async sEt(){if(this.QEt)throw new k("Already locked");this.QEt=!0,this.nEt();const t=[];this.b5&&t.push(this.b5.sEt()),this.M5&&t.push(this.M5.sEt()),await Promise.all(t)}rEt(){this.QEt=!1,this.b5&&this.b5.rEt(),this.M5&&this.M5.rEt(),this.oEt()}nEt(){this.KS=super.LS(),this.GDt=super.SE(),this.JM=super._d(),this.D5=super.vk(),this.FEt=!1,this.qDt=void 0,this.YEt=void 0}oEt(){if(this.FEt&&(super.S5(this.JM),this.FEt=!1),void 0!==this.YEt){const t=this.YEt;super.E5(t.Cn,t.jn,t.F3,t.Y3),this.YEt=void 0}void 0!==this.qDt&&(this.qDt?super.I3():super.w3(),this.qDt=void 0)}constructor(t){super(t),this.QEt=!1,this.GDt=Mo.PP(),this.JM=0,this.FEt=!1,this.Dst=!1,this.qDt=void 0,this.D5=Mo.PP(),this.YEt=void 0,this.jht(t),this.KS=t.md}},VW=class extends nU{get mht(){return this.cz}Pk(){return void 0!==this.vV&&Hu(this.vV)&&this.OE&&this.Wb(0),super.Pk()}Wb(t,i,e){void 0!==this.vV&&Hu(this.vV)&&this.OE&&t<this.ct&&this.VEt(),super.Wb(t,i,e)}xtt(){this.GEt=!0,super.xtt()}Ltt(){this.GEt=!1,this.WEt()||super.Ltt()}WEt(){return this.GEt||this.ZEt}HEt(){this.ZEt||(this.ZEt=!0,super.xtt())}XEt(){this.ZEt&&(this.ZEt=!1,this.WEt()||super.Ltt())}$n(t){this.qEt.Ty();const i=this.oD(t,this.KEt);return this.JEt=i,i}async oD(t,i){return i&&await i.catch(ya),this.XEt(),await super.$n(t)}kht(t){return new YW(t)}Eht(t){return new Jo(t)}tr(){this.qEt.Ty();const t=this.TDt(this.KEt);return this.JEt=t,t}async TDt(t){return t&&await t.catch(ya),this.XEt(),await super.tr()}VEt(){this.HEt(),this.qEt.Ty(),this.qEt=new Wt,this.KEt=Vh(this.$Et(this.JEt,this.KEt,this.qEt.ly),this.qEt).catch(Ct)}async $Et(t,i,e){t&&await t.catch(ya),i&&await i.catch(ya),yi(e);const s=this.vV;if(!s||!Hu(s))return;const n=s.md;await s.sEt(),await this.cz.tr();const r=await this.cz.$n(n);r.S5(s.ct),s.jht(r),s.rEt(),this.XEt()}async wy(){this.qEt.Ty(),this.KEt&&(await this.KEt.catch(ya),this.KEt=void 0),this.WEt()&&super.Ltt(),await super.wy()}constructor(...t){super(...t),this.GEt=!1,this.ZEt=!1,this.JEt=void 0,this.KEt=void 0,this.qEt=new Wt}};il();var GW=class extends Sr{sG(t){if(t===Ri.NI)return new VW(super.sG(t))}async BV(t){const i=t;await i.wy(),await super.BV(i.mht)}static PS(){return Ro.gg}};ko(new class extends zB{bL(t,i,e,s,n,r,o,h){const a=new ir(Oh.Ld.Xot,Oh.Ld.Hot,Oh.Ld.Zot,Oh.Ld.Kot);let u;u=CW.PS(h)?CW:FW.PS(h)?FW:IW;let c=i;return GW.PS()&&(c=new GW(c)),new u(e,s,n,r,a,c,Ri.NI,t)}oG(){return!0}constructor(...t){super(...t),this.hG=pt.RY}}),r(),r(),Fz((function(t){return class extends t{ma(){const t=this.UE.ga;return fe(super.ma(),{get hesp(){return t}})}}}),F.nu),r(),r(),r(),r(),r();var WW=0;function eu(t,i){if(void 0===i&&(i=!0),!t)return;let e=t;return"/"===e.charAt(0)&&(e=e.substring(1)),i&&"/"!==e.charAt(e.length-1)&&(e+="/"),e}function ZW(t){var i,e,s;return Ei({},t,{baseUrl:eu(t.baseUrl),id:null!=(i=t.id)?i:String(WW++),timeBounds:Ei({},t.timeBounds,{scale:null!=(e=t.timeBounds.timescale)?e:1e3}),currentTime:t.currentTime?{value:t.currentTime.timestamp,scale:null!=(s=t.currentTime.timescale)?s:1e3}:void 0,audio:t.audio.map($W),video:t.video.map(iZ),metadata:t.metadata.map(sZ),events:t.events.map(aZ)})}var HW=0;function XW(t){const i=eu(t.initPattern,!1),e=eu(t.contPattern,!1);var s;return Ei({},t,{id:null!=(s=t.id)?s:String(HW++),continuationPattern:e?sr(e,"${segmentId}","{segmentId}"):void 0,initializationPattern:i?sr(i,"${initId}","{initId}"):void 0})}function qW(t){var i;const e=eu(t.initPattern,!1),s=eu(t.contPattern,!1);return Ei({},t,{continuationPattern:s?sr(s,"${segmentId}","{segmentId}"):void 0,initializationPattern:e?sr(e,"${initId}","{initId}"):void 0,segmentDuration:t.segmentDuration?{value:t.segmentDuration.duration,scale:t.segmentDuration.timescale}:void 0,segments:t.segments.map(KW),activeSegment:null==(i=dl(t.segments,(t=>t.active)))?void 0:i.id})}function KW(t){var i;return Ei({},t,{timeBounds:Ei({},t.timeBounds,{endTime:void 0!==t.timeBounds.duration?t.timeBounds.startTime+t.timeBounds.duration:void 0,scale:null!=(i=t.timeBounds.timescale)?i:1e3})})}function JW(t){return t&&"-"===t.charAt(0)}function $W(t){let i;try{var e;i=C(null!=(e=t.channels)?e:"2")}catch(t){i=2}return JW(t.contPattern)||JW(t.initPattern)?function(t,i){const e=t.initPattern,s=t.contPattern;return t.initPattern=void 0,t.contPattern=void 0,Ei({},XW(t),{baseUrl:eu(t.baseUrl),language:"eng",channels:i,sampleRate:t.samplerate,tracks:t.tracks.map((t=>{var i,n;return t.initPattern=null!=(i=t.initPattern)?i:e,t.contPattern=null!=(n=t.contPattern)?n:s,tZ(t)}))})}(t,i):Ei({},XW(t),{baseUrl:eu(t.baseUrl),language:"eng",channels:i,sampleRate:t.samplerate,tracks:t.tracks.map(tZ)})}function tZ(t){let i;try{var e;i=C(null!=(e=t.channels)?e:"2")}catch(t){i=2}return JW(t.contPattern)||JW(t.initPattern)?function(t,i){return t.contPattern=t.baseUrl+t.contPattern,t.initPattern=t.baseUrl+t.initPattern,Ei({},qW(t),{baseUrl:"./",channels:i,sampleRate:t.samplerate})}(t,i):Ei({},qW(t),{baseUrl:eu(t.baseUrl),channels:i,sampleRate:t.samplerate})}function iZ(t){return JW(t.contPattern)||JW(t.initPattern)?function(t){const i=t.initPattern,e=t.contPattern;return t.initPattern=void 0,t.contPattern=void 0,Ei({},XW(t),{baseUrl:eu(t.baseUrl),frameRate:t.framerate?{value:t.framerate.rate,scale:t.framerate.scale}:void 0,tracks:t.tracks.map((t=>(t.initPattern=i,t.contPattern=e,eZ(t))))})}(t):Ei({},XW(t),{baseUrl:eu(t.baseUrl),frameRate:t.framerate?{value:t.framerate.rate,scale:t.framerate.scale}:void 0,tracks:t.tracks.map(eZ)})}function eZ(t){var i,e;return JW(t.contPattern)||JW(t.initPattern)?function(t){var i,e;return t.contPattern=t.baseUrl+t.contPattern,t.initPattern=t.baseUrl+t.initPattern,Ei({},qW(t),{baseUrl:"./",frameRate:t.framerate?{value:t.framerate.rate,scale:t.framerate.scale}:void 0,resolution:Ei({},t.resolution,{sarWidth:null==(i=t.resolution.sar)?void 0:i.width,sarHeight:null==(e=t.resolution.sar)?void 0:e.height})})}(t):Ei({},qW(t),{baseUrl:eu(t.baseUrl),frameRate:t.framerate?{value:t.framerate.rate,scale:t.framerate.scale}:void 0,resolution:Ei({},t.resolution,{sarWidth:null==(i=t.resolution.sar)?void 0:i.width,sarHeight:null==(e=t.resolution.sar)?void 0:e.height})})}function sZ(t){var i;return Ei({},t,{id:null!=(i=t.id)?i:String(HW++),schemeId:"",tracks:t.tracks.map(nZ)})}function nZ(t){return Ei({},t,{segments:t.segments.map(oZ)})}var rZ=0;function oZ(t){return{id:rZ++,timeBounds:Ei({},t.timeBounds,{scale:t.timeBounds.timescale})}}var hZ=0;function aZ(t){var i,e;return Ei({},t,{id:null!=(i=t.id)?i:String(hZ++),timeBounds:Ei({},t.timestamp,{scale:null!=(e=t.timestamp.timescale)?e:1e3})})}var uZ=class{async tkt(t,i){const e={zu:t,ly:i},s=await this.wE.hI(e);let n=await s.BN(i);return function(t){const i=t;if(Ic(i.manifestVersion)&&_t(i.manifestVersion,"alpha"))return!0;let e,s;for(const t of i.presentations){for(const i of[...t.video,...t.audio])if(i.tracks.length>0){e=i.tracks[0],s=i;break}if($t(e))break}return(Ic(null==s?void 0:s.initPattern)||Ic(null==e?void 0:e.initPattern))&&!Ic(null==e?void 0:e.initializationPattern)&&!Ic(null==s?void 0:s.initializationPattern)}(n)&&(n=function(t){return Ei({},t,{availabilityDuration:{value:t.dvrDuration?t.dvrDuration.duration/t.dvrDuration.timescale:0},manifestVersion:"1.0.0",presentations:t.presentations.map(ZW),contentBaseUrl:t.contentBaseUrl||"./"})}(n)),n}constructor(t){this.wE=t}};ds(),r();var cZ=class extends tu{get ga(){return this.Za||(this.Za=CM(this)),this.Za}sL(){return this.ikt.sL()}get tL(){return this.ikt.tL}get iL(){return this.ikt.iL}get eL(){return this.ikt.eL}yn(t,i){this.ikt.yn(t,i)}fn(t,i){this.ikt.fn(t,i)}constructor(t){super(),this.ikt=t}};r(),r(),r();var lZ=class{get Tst(){const t=1-this.ekt**this.skt;return this.nkt/t}Yct(t,i){const e=this.ekt**t,s=i*(1-e)+e*this.nkt;j(s)||(this.nkt=s,this.skt+=t)}D$(t){const i=x.exp(x.log(.5)/t);if(i===this.ekt)return;if(0===this.skt)return void(this.ekt=i);const e=this.Tst,s=1-i**this.skt;this.nkt=e*s,this.ekt=i}constructor(t){this.nkt=0,this.skt=0,this.ekt=x.exp(x.log(.5)/t)}};Qi();var ge=class t{get Tst(){return this.qct()?x.max(this.rkt.Tst,this.okt.Tst):this.hkt}Yct(t){const i=Fe.Og(),e=t;this.akt&&void 0!==this.ukt&&i-this.ukt>=this.ckt&&this.tr(),this.lkt+=1,this.rkt.Yct(1,e),this.okt.Yct(1,e),this.dkt.push(e),this.dkt.length>this.fkt&&this.dkt.shift(),this.ukt=i}qct(){return void 0!==this.ukt&&Fe.Og()-this.ukt<=this.ckt}tr(){this.rkt=new lZ(this.gkt),this.okt=new lZ(this._kt),this.lkt=0,this.dkt=[],this.ukt=void 0}constructor(i=t.vkt,e=t.wkt,s=t.Kct,n=!1){this.lkt=0,this.dkt=[],this.ukt=void 0,this.ckt=6e4,this.fkt=10,this.gkt=i,this._kt=e,this.hkt=s,this.akt=n,this.rkt=new lZ(i),this.okt=new lZ(e)}};ge.vkt=2,ge.wkt=5,ge.Kct=.1,r();var dZ=class{DK(t){for(const i of this.mkt)i.DK(t)}EK(t){for(const i of this.mkt)i.EK(t)}kK(t,i){for(const e of this.mkt)e.kK(t,i)}xK(t){for(const i of this.mkt)i.xK(t)}constructor(t){this.mkt=t}};r();var fZ=class{DK(t){this.pkt=t}EK(t){this.Akt.Yct(t-this.pkt)}kK(t){}xK(t){}constructor(t){this.pkt=0,this.Akt=t}};r();var gZ=class{EK(t){this.ykt=t}kK(t,i){this.tlt.Yct(t-this.ykt,i.byteLength),this.ykt=t}xK(t){}DK(t){}constructor(t){this.ykt=0,this.tlt=t}};r(),Qi();var _Z=class{DK(t){}kK(t,i){const e=i.byteLength,s=this.bkt;this.bkt=e;const n=t-this.An;this.An=t,this.Mkt.b0(i);const r=!this.Mkt.Tkt(),o=e>=this.Skt;s!==Fe.Ys.Lp&&r&&o&&this.tlt.Yct(n,e)}EK(t){this.An=t}xK(t){}constructor(t,i=0){this.Mkt=new vZ,this.An=0,this.bkt=0,this.tlt=t,this.Skt=i}},vZ=class extends EC{Tkt(){return this.Nkt}b0(t){this.Nkt=!1,super.b0(t)}A0(t,i){this.Ikt&&this.Ikt!==Rt.SC||(this.Nkt=!0),super.A0(t,i),this.Ikt=t}L0(t){return!1}j0(t){}R0(t){}constructor(...t){super(...t),this.Ikt=void 0,this.Nkt=!1}};r(),Qi();var wZ=function(t){return t.Dkt="sample",t}({}),mZ=class extends tu{DY(){if(!this.qct())return;const t=Fe.Og();t-this.Ekt>1e3&&(this.Ekt=t,_i.Ld.DY(this.Tst))}constructor(...t){super(...t),this.Ekt=0}};r();var pZ=class extends mZ{get Tst(){return this.qct()?this.nkt:this.kkt}qct(){return this.yT.length>=3}Yct(t,i){if(0===t)return;const e={FY:8*i/t,xkt:i};if(this.yT.push(e),this.Lkt+=e.xkt,this.yT.length>30){const t=this.yT.shift();this.Lkt-=t.xkt}const s=this.yT.slice().sort(((t,i)=>t.FY-i.FY));let n=0;for(let t=0;t<s.length;t++){const i=s[t];if(n+=i.xkt/this.Lkt,this.nkt=i.FY,n>=.5)break}this.DY(),this.yo(new Jr(wZ.Dkt))}constructor(t){super(),this.yT=[],this.Lkt=0,this.kkt=t,this.nkt=t}};r();var ms=class t extends mZ{Yct(t,i){const e=8*i/t;this.rkt.Yct(t,e),this.okt.Yct(t,e),this.Ckt+=i,this.DY(),this.yo(new Jr(wZ.Dkt))}get Tst(){return this.qct()?x.min(this.rkt.Tst,this.okt.Tst):this.hkt}qct(){return this.Ckt>=this.jkt}constructor(i=t.vkt,e=t.wkt,s=t.Okt,n=t.Kct){super(),this.Ckt=0,this.jkt=s,this.rkt=new lZ(i),this.okt=new lZ(e),this.hkt=n}};ms.Okt=128e3,ms.Kct=BE,ms.vkt=.5,ms.wkt=5;var AZ=class{Rkt(t){var i;null==(i=this.tlt)||i.fn(wZ.Dkt,this.Pkt),this.tlt=new pZ(t),this.tlt.yn(wZ.Dkt,this.Pkt)}zkt(t){this.Bkt.push(t)}Ukt(t){ra(this.Bkt,t)}get FY(){var t,i;return null!=(i=null==(t=this.tlt)?void 0:t.Tst)?i:this.Qkt}get YY(){return this.Fkt.Tst}VY(t){if("segment"!==t.YA)return;if("video"!==t.RI)return;const i=[new fZ(this.Fkt)];return this.tlt&&("stream"===t.oI&&"initialization-segment"!==t.OI?i.push(new _Z(this.tlt,1e3)):i.push(new gZ(this.tlt))),new dZ(i)}constructor(t,i){this.Bkt=[],this.Pkt=()=>{for(const t of this.Bkt)t()},this.Qkt=t>0?t:ms.Kct,this.Fkt=new ge(ge.vkt,ge.wkt,i>0?i:ge.Kct),this.Rkt(this.Qkt)}};r(),Qi(),ds();var yZ=class{Ykt(t,i){const e=i-t;(!this.Vkt||e<this.Vkt)&&(this.Vkt=e)}Gkt(t,i){this.Wkt=i-t}Zkt(t,i){this.Hkt=i-t}Xkt(t,i){this.qkt=i-t}get Kkt(){const t=sw([this.Hkt,this.qkt].filter($t),vc);return void 0!==t?Fe.Og()/1e3+t:void 0!==this.Wkt?Fe.Og()/1e3+this.Wkt:void 0!==this.Vkt?Fe.Og()/1e3+this.Vkt:void 0}Jkt(t){const i=this.Kkt;if(void 0!==i)return i-t}tr(){this.Vkt=void 0,this.Wkt=void 0,this.qkt=void 0,this.Hkt=void 0}};r(),Qi();var bZ=.25,MZ=400,TZ={minimumOffset:.2,targetOffset:.45,maximumOffset:.7,forceSeekOffset:3,minimumPlaybackRate:We,maximumPlaybackRate:ee},SZ={minimumOffset:.4,targetOffset:.65,maximumOffset:1,forceSeekOffset:3,minimumPlaybackRate:We,maximumPlaybackRate:ee},NZ={minimumOffset:.4,targetOffset:.7,maximumOffset:.9,forceSeekOffset:3,minimumPlaybackRate:We,maximumPlaybackRate:ee},IZ={minimumOffset:.2,targetOffset:.45,maximumOffset:1,forceSeekOffset:3,minimumPlaybackRate:We,maximumPlaybackRate:ee},DZ={minimumOffset:.5,targetOffset:1.125,maximumOffset:1.75,forceSeekOffset:2.55,minimumPlaybackRate:We,maximumPlaybackRate:ee};function EZ(t){if(Fe.IA.EA){const i=(MZ+250)/1e3,e=x.max(i,t.minimumOffset),s=x.max(e+bZ,t.targetOffset),n=x.max(s+bZ,t.maximumOffset);return{minimumOffset:e,targetOffset:s,maximumOffset:n,forceSeekOffset:x.max(n+bZ,t.forceSeekOffset),minimumPlaybackRate:We,maximumPlaybackRate:ee}}return t}function kZ(){let t;return t=Fe.Ys.Np?IZ:Fe.Ys.xp?SZ:Fe.Ys.kp?"Android"===Fe.IA.DA?NZ:TZ:DZ,Fe.IA.EA?EZ(t):t}r(),r(),r();var xZ=class{$kt(t){for(const i of this.GDt)i[1]=i[1].Sn(t)}txt(t,i){let e=!0;for(const s of this.GDt){let n=s[1];n=n.yP(i),t===s[0]&&(n=n.pP(i),e=!1),s[1]=n.mP(1e-5)}e&&this.GDt.push([t,i])}ixt(t){for(const i of this.GDt)i[1]=i[1].yP(t)}sxt(t){for(let i=0;i<this.GDt.length;i++)if(this.GDt[i][1].gr(t))return this.GDt[i][0]}constructor(){this.GDt=[]}},LZ=class extends tu{get TE(){let t=Mo.PP();for(const[,i]of this.nxt){const e=i.xst+i.rQ,s=e+i.ct;t=t.pP(Mo.RP(e,s))}return this.Fht.TE.pP(t)}sxt(t){return this.rxt.sxt(t)}get oxt(){return void 0!==this.hxt}get axt(){return this.hxt?this.hxt.rM:Promise.resolve()}async appendStream(t,i,e){if(this.oxt)throw new b("Concurrent appends are not supported.");try{const s={stack:[],error:void 0,hasError:!1};try{const n=Ne(s,Wt.Iy([e,this.y3.ly]),!1).ly;this.rxt.$kt(this.TE),this.hxt=new xh;const r=NC(t).getReader();for(;;){const t=await Ao(r.read(),n);if(t.done)break;const e=t.value,s={YA:Xi.v$,rI:ih(e.map((t=>t.vlt)))},o={ct:Ke(e,(t=>t.ct)),xst:e[0].Cvt,rQ:-i.Wut.uxt};await this.Q4(s,o,n);const h=o.xst+o.rQ,a=h+o.ct;this.rxt.txt(i.Wut,Mo.RP(h,a))}}catch(t){s.error=t,s.hasError=!0}finally{qr(s)}}finally{i.cxt();const t=this.hxt;this.hxt=void 0,null==t||t.sM()}}async B4(t,i,e,s){if(this.oxt)throw new b("Concurrent appends are not supported.");try{const n={stack:[],error:void 0,hasError:!1};try{const r=Ne(n,Wt.Iy([s,this.y3.ly]),!1).ly;this.hxt=new xh,await this.Q4(t,i,r);const o=i.xst+i.rQ,h=o+i.ct;this.rxt.$kt(this.TE),this.rxt.txt(e,Mo.RP(o,h))}catch(t){n.error=t,n.hasError=!0}finally{qr(n)}}finally{const t=this.hxt;this.hxt=void 0,null==t||t.sM()}}async Q4(t,i,e){this.Fht.E3===Ri.NI&&this.lxt.cft(t.rI,i.xst,i.xst+i.ct,i.rQ,this.abt,!1);const s=this.cz.mz.wz,n=this.Fht.TE.gr(this.cz.xE);if(s||n)return await this.dxt(e),await this.Fht.B4(t,i,e);this.nxt.push([t,i]);const r=this.nxt[0][1].xst;return this.nxt[this.nxt.length-1][1].xst-r>=.4?await this.dxt(e):void 0}async F4(t,i){if(this.oxt)throw new b("Concurrent appends are not supported.");try{const e={stack:[],error:void 0,hasError:!1};try{const s=Ne(e,Wt.Iy([i,this.y3.ly]),!1).ly;this.hxt=new xh,await this.dxt(s),await this.Fht.F4(t,{},s),this.Fht.E3===Ri.NI&&this.lxt.iat(t.rI)}catch(t){e.error=t,e.hasError=!0}finally{qr(e)}}finally{const t=this.hxt;this.hxt=void 0,null==t||t.sM()}}async wS(t,i,e){if(this.oxt)throw new b("Concurrent appends are not supported.");try{const s={stack:[],error:void 0,hasError:!1};try{const n=Ne(s,Wt.Iy([e,this.y3.ly]),!1).ly;this.hxt=new xh,await this.dxt(n),await this.Fht.wS(t,i,n),this.rxt.ixt(Mo.RP(t,i))}catch(t){s.error=t,s.hasError=!0}finally{qr(s)}}finally{const t=this.hxt;this.hxt=void 0,null==t||t.sM()}}async DX(t){if(this.oxt)throw new b("Concurrent appends are not supported.");try{const i={stack:[],error:void 0,hasError:!1};try{const e=Ne(i,Wt.Iy([t,this.y3.ly]),!1).ly;this.hxt=new xh,await this.dxt(e)}catch(t){i.error=t,i.hasError=!0}finally{qr(i)}}finally{const t=this.hxt;this.hxt=void 0,null==t||t.sM()}}async dxt(t){for(const[i,e]of this.nxt)await this.Fht.B4(i,e,t);nt(this.nxt)}async wy(){for(this.y3.wy();this.oxt;)await this.axt}constructor(t,i,e,s){super(),this.nxt=[],this.hxt=void 0,this.y3=new Wt,this.cz=i,this.Fht=t,this.abt=e,this.lxt=s,this.rxt=new xZ,this.Fht.yn(po.g$,this.Ds)}};r(),Qi(),r(),Qi();var CZ=class{async fxt(t,i){if(this.gxt>=this._xt.maxRetries)throw t;const e=this.vxt(this.gxt++);await kt(e,i)}vxt(t){let i=0;return 0!==t&&(i+=x.min(this._xt.maximumBackoff,this._xt.minimumBackoff*(2**t-1))),i}constructor(t){this.gxt=0,this._xt=t}};r(),Qi(),r();var jZ=function(t){return t.wxt="emsgdata",t}({}),OZ=class extends Jr{constructor(t,i){super("emsgdata"),this.value=t,this.data=i}};r();var RZ=class{start(t){this.JJ=t}mxt(t){this.JJ.enqueue(t)}};r(),r();var is=function(t){return t.pxt="initdata",t.MANIFEST_UPDATE="manifestupdate",t.Axt="timestamps:v1",t}({});var PZ="urn:theo:hesp:2020";function zZ(t){if(t.LR!==PZ)return;const i=t.zD;if(i===is.pxt){return function(t){if(!t||!_o(t))return;const i=t;return!$a(i.index)||!$a(i.offset)||i.index<0&&i.offset<0?void 0:{YA:"initdata",index:i.index,offset:i.offset}}(JSON.parse(Zo(Al(t.RR),new da)))}if(i===is.MANIFEST_UPDATE){return function(t){if(!t||!_o(t))return;const i=t;return!$t(i.url)||Ic(i.url)?{YA:"manifestupdate",url:i.url}:void 0}(JSON.parse(Zo(Al(t.RR),new da)))}if(i===is.Axt){const i=Al(t.RR),e=new da,s=Xw(i,e).toNumber()/t.Lj,n=Xw(i,e).toNumber()/1e3,r=ul(i,e)/1e3;let o;return e.tc+8<=i.byteLength&&(o={hours:ul(i,e),minutes:Zw(i,e),seconds:Zw(i,e),frames:Ps(i,e)}),{YA:is.Axt,yxt:s,bxt:n,Mxt:r,Txt:o}}}var BZ=class extends RZ{transform(t){if(t.YA===Rt.IC)try{const i=zZ(Rs.Tj(t.rI));i&&this.Sxt.yo(new OZ(i.YA,i))}catch(t){false}this.mxt(t)}wy(){this.Sxt.Bo()}constructor(...t){super(...t),this.Sxt=new tu}};r();var UZ=class{start(t){this.Bv=new QZ(t)}transform(t){this.Bv.b0(t)}flush(){this.Bv.T0()}},QZ=class extends EC{L0(t){return!0}j0(t){this.JJ.enqueue(t)}R0(t){}constructor(t){super(),this.JJ=t}};r(),r();var FZ=D.fromNumber(tt);var YZ=class extends tu{async hI(t){for(;;)try{return await this.OQ.hI(t)}catch(i){if(Tu(i))throw i;await this.Nxt.fxt(i,t.ly)}}constructor(t,i){super(),this.OQ=t,this.Nxt=i}};function VZ(t,i,e,s,n,r,o,h){const a=new Rh;return n&&a.zN(function(t,i){return void 0===i&&(i=FZ),new Rh({Range:"bytes="+t.toString()+"-"+i.toString()})}(n.start,n.end)),{zu:t,aI:a,zI:!1,ly:h,YA:ar.gI,OI:e,RI:s,CI:r,jI:o,oI:i,QI:i===Ee.jN}}r(),r();var Hi=function(t){return t[t.INITIALIZER=0]="INITIALIZER",t[t.FRAMES=1]="FRAMES",t}({}),GZ=class extends RZ{transform(t){this.Ixt.push(t),t.YA===Rt.SC&&this.Dxt(this.Ixt.splice(0),Hi.FRAMES)}Dxt(t,i){const e={Lj:this.KM,gX:this.kX},s=ih(t.map((t=>ka(t.rI.rI)))),n=dl(t,WZ),r=Rs.dj(n.rI.rI)[0],o={RI:this.Qct,Vb:e,vlt:s,YA:i,ct:this._d(r)/this.KM,Cvt:os(this.Ext(r),this.KM)};this.mxt(o)}_d(t){const i=t.Z[0];if(!i||0===i.bR.length)return 0;var e;const s=null!=(e=i.nj.dR)?e:0;return i.bR[0].kR.reduce(((t,i)=>{var e;return t+(null!=(e=i.ct)?e:s)}),0)}Ext(t){var i,e;return null!=(e=null==(i=t.Z[0].MR)?void 0:i.MR)?e:D.UZERO}constructor(t,i){super(),this.Ixt=[],this.kX=t,this.Qct=this.kX.match(/video/)?gt.NI:gt.SI,this.KM=i}};function WZ(t){return t.YA===Rt.mC}r();var ZZ=class extends tu{get Wut(){return this.kxt}Ydt(t){return t+1}get xxt(){return!1}get Lxt(){return this.Cxt}get oxt(){return void 0!==this.hxt}get axt(){return this.hxt?this.hxt.rM:Promise.resolve()}Wb(t){this.Cxt=t,this.jxt=void 0,this.Oxt=void 0}Rxt(){return void 0!==this.jxt}async Pxt(){if(this.oxt)throw new b("Concurrent downloads are not supported.");try{this.hxt=new xh;let t;if("now"===this.Cxt)t=Fe.TA(this.kxt.zxt("now"),this.kxt.Bxt);else{const i=this.Cxt,e=0===i?1:this.kxt.Uxt(i);t=Fe.TA(this.kxt.zxt(e),this.kxt.Bxt)}const i=VZ(t,Ee.LN,cl.wI,this.Qct,void 0,3e3,1e3,this.Qxt.ly),e=await this.Fxt.hI(i),s=await e.FN(this.Qxt.ly),n=new T(s),{Yxt:r,zj:o}=function(t){const i=Z.qC(new Bt(Al(t),new da)),e=dl(i,(t=>t.YA===Rt.EC||t.YA===Rt.mC));if(void 0===e)return{Yxt:t,zj:void 0};const s=zr(t,0,e.tc),n=zr(t,e.tc);return{Yxt:s,zj:0===n.byteLength?void 0:n}}(n),h=Rs.dj(Al(n));this.KM=function(t){const i=dl(t,(t=>t.YA===Rt.kL));return i.Z[0].zj.nj.Lj}(h);const a=function(t){const i=t.filter((t=>t.YA===Rt.IC)),e=i.map((t=>zZ(t))),s=dl(e,(t=>(null==t?void 0:t.YA)===is.pxt));if(!s)throw new b("No init data in init response");return s}(h);let u;if(this.jxt=a.index,this.Oxt=a.offset,o){u=function(t,i,e){var s;const n=dl(t,(t=>t.YA===Rt.mC));var r;const o=os(null!=(r=null==(s=n.Z[0].MR)?void 0:s.MR)?r:D.UZERO,e),h=n.Z[0];var a;const u=null!=(a=h.nj.dR)?a:0,c=h.bR[0],l=c.kR.reduce(((t,i)=>{var e;return t+(null!=(e=i.ct)?e:u)}),0)/e;return{xst:o,ct:l,rQ:i}}(Rs.dj(Al(n)),-this.Wut.uxt,this.KM)}return{initialization:r,data:o,metadata:u}}finally{const t=this.hxt;this.hxt=void 0,null==t||t.sM()}}Vxt(){if(this.oxt)throw new b("Concurrent downloads are not supported.");this.hxt=new xh;const t=void 0!==this.Oxt?D.fromNumber(this.Oxt):void 0;return qy(this.Gxt(this.jxt,t,this.Qxt.ly)).pipeThrough(new Ra(new GZ(this.Wut.gX,this.KM))).pipeThrough(new Ra(new HZ(this.Qxt.ly)))}async Gxt(t,i,e){const s=this.Wxt(t,i,e);return(await this.Fxt.hI(s)).YN().pipeThrough(new Ra(new UZ)).pipeThrough(new Ra(this.Zxt))}Wxt(t,i,e){const s=this.kxt.Hxt(t),n=void 0!==i?{start:i,end:void 0}:void 0;return VZ(Fe.TA(s,this.kxt.Bxt),Ee.jN,cl.dI,this.Qct,n,25e3,1e3,e)}cxt(){void 0!==this.jxt&&(this.jxt=this.Ydt(this.jxt)),this.Oxt=void 0;const t=this.hxt;this.hxt=void 0,null==t||t.sM()}cancelDownload(){var t;this.Qxt.Ty(),this.Qxt=new Wt,this.hxt=null!=(t=this.hxt)?t:new xh,this.jxt=void 0,this.Oxt=void 0;const i=this.hxt;this.hxt=void 0,null==i||i.sM()}async wy(){this.Bo(),this.Zxt.wy(),this.Qxt.Ty(),await this.axt,this.jxt=void 0,this.Oxt=void 0}constructor(t,i,e){super(),this.Cxt="now",this.Qxt=new Wt,this.hxt=void 0,this.kxt=t,this.Nxt=new CZ(e),this.Zxt=new BZ,this.Zxt.Sxt.yn(jZ.wxt,this.Ds),this.OQ=i,this.Qct=function(t){switch(t){case gt.SI:return ol.SI;case gt.NI:return ol.NI;default:return ol.dI}}(t.YA),this.Fxt=new YZ(this.OQ,this.Nxt)}};var HZ=class{start(t){this.JJ=t,this.My.uy(this.Xxt)}flush(){this.My.oy(this.Xxt)}constructor(t){this.Xxt=()=>{this.JJ.error(new J)},this.My=t}};function $r(t){var i;return t.value/(null!=(i=t.scale)?i:1)}r(),r(),r(),r(),r(),Qi();var XZ="{initId}",qZ=/{initId(?::0(?:\d+)d)?}/,KZ=/{segmentId(?::0(?:\d+)d)?}/,JZ=class{get o(){return this.aS}get FY(){return this.EY}get Xyt(){return this.qxt}get Zot(){return this.oMt}get Kxt(){return this.Jxt}get $xt(){return this.tLt}get Bxt(){return Fe.TA(this.iLt,this.eLt.Bxt)}get dht(){return this.sLt}get kh(){return this.eB}get nLt(){return this.rLt}get oLt(){return this.hLt}get uxt(){return this.aLt}get uLt(){return this.Jbt}Yn(t){this.Jxt=t.activeSegment,this.tLt=t.activeSequenceNumber,this.oMt=t.segments}constructor(t,i,e){var s,n,r,o;this.oMt=[],this.bB=t,this.cLt=e,this.aS=t.id,this.EY=t.bandwidth,this.qxt=t.averageBandwidth,this.iLt=null!=(s=t.baseUrl)?s:"",this.sLt=null!=(n=t.codecs)?n:i.codecs,this.rLt=null!=(r=t.continuationPattern)?r:i.continuationPattern,this.hLt=null!=(o=t.initializationPattern)?o:i.initializationPattern,this.eB=t.label,this.aLt=t.mediaTimeOffset?$r(t.mediaTimeOffset):0,this.Jbt=t.segmentDuration?$r(t.segmentDuration):0,this.Yn(t)}},$Z=class extends JZ{get YA(){return gt.SI}get eLt(){return this.cLt}get lLt(){return this.dLt}get Igt(){return this.fLt}get AO(){return this.OM}get gX(){return'audio/mp4; codecs="'+this.dht+'"'}constructor(t,i,e){var s,n,r,o;super(t,i,e),this.dLt=null!=(s=t.channels)?s:1,this.fLt=null!=(r=null!=(n=t.frameRate)?n:i.frameRate)?r:1024,this.OM=null!=(o=t.sampleRate)?o:i.sampleRate}},tH=class extends JZ{get YA(){return gt.NI}get eLt(){return this.cLt}get gLt(){return this.Wp}get Igt(){return this.fLt}get gX(){return'video/mp4; codecs="'+this.dht+'"'}constructor(t,i,e){var s;super(t,i,e),this.Wp=t.resolution,this.fLt=$r(null!=(s=t.frameRate)?s:i.frameRate)}};function iH(t,i){const e=String(i);if(t===XZ||"now"===i)return e;const s=C(t.substring(9,t.lastIndexOf("d")));return Pc(e,s,"0")}function eH(t,i){const e=String(i);if(t===XZ)return e;const s=C(t.substring(12,t.lastIndexOf("d")));return Pc(e,s,"0")}Qi();var sH=class{get Pnt(){return this._Lt}get o(){return this.aS}get vLt(){return this.wLt}get Bxt(){return Fe.TA(this.iLt,this.Pnt.Bxt)}get kh(){return this.eB}get uxt(){return this.aLt}get mLt(){return this.pLt}Yn(t){for(const i of this.Dx){const e=dl(t.tracks,(t=>i.o===t.id));e&&i.Yn(e)}}constructor(t,i,e){var s;this.cLt=t,this.Dx=e,this._Lt=i,this.aS=t.id,this.wLt=t.alignId,this.iLt=null!=(s=t.baseUrl)?s:"",this.eB=t.label,this.aLt=t.mediaTimeOffset?$r(t.mediaTimeOffset):0,this.pLt=t.protection,this.Yn(t)}},nH=class extends sH{get eLt(){return this.cLt}get Z(){return this.Dx}get gs(){return this.$M}get lLt(){return this.dLt}Yn(t){var i,e;super.Yn(t),this.$M=t.language,this.dLt=null!=(i=t.channels)?i:1,this.kX=null!=(e=t.mimeType)?e:"audio/mp4"}constructor(t,i){const e=[];super(t,i,e);for(const i of t.tracks)e.push(new $Z(i,t,this))}},rH=class extends sH{get eLt(){return this.cLt}get Z(){return this.Dx}Yn(t){var i;super.Yn(t),this.kX=null!=(i=t.mimeType)?i:"video/mp4"}constructor(t,i){const e=[];super(t,i,e);for(const i of t.tracks)e.push(new tH(i,t,this))}};Qi();var oH=class{get o(){return this.aS}get Bxt(){return Fe.TA(this.iLt,this.yLt.ALt)}get bLt(){return this.MLt}get xE(){return this.EG}get _X(){return this.J_}get TLt(){return this.SLt}get NLt(){return this.ILt}Yn(t){var i;this.MLt=t.timeBounds,this.J_=null!=(i=t.events)?i:[],this.EG=t.currentTime?$r(t.currentTime):void 0}constructor(t,i){var e,s,n;this.SLt=[],this.ILt=[],this.yLt=t,this.aS=i.id,this.iLt=null!=(e=i.baseUrl)?e:"";for(const t of null!=(s=i.audio)?s:[])this.SLt.push(new nH(t,this));for(const t of null!=(n=i.video)?n:[])this.ILt.push(new rH(t,this));this.Yn(i)}};Qi();var hH=class{get eL(){return this.yLt}get DLt(){return this.ELt}get kLt(){return this.xLt}get LLt(){return this.CLt}get jLt(){return this.OLt}get RLt(){return this.PLt}get I1(){return this.TM}get zLt(){return this.BLt}get ALt(){var t;return Fe.TA(null!=(t=this.ULt)?t:"",this.QLt)}get FLt(){return this.YLt}Yn(t){var i;this.ELt=$r(t.availabilityDuration),this.xLt=t.creationDate,this.CLt=t.fallbackPollRate,this.OLt=t.manifestVersion,this.TM=t.streamType,this.BLt=t.activePresentation,this.ULt=t.contentBaseUrl,this.YLt=null==(i=t.timeSource)?void 0:i.url,this.yLt=t;for(const i of t.presentations){const t=dl(this.PLt,(t=>t.o===i.id));t?t.Yn(i):this.PLt.push(new oH(this,i))}this.PLt=this.PLt.filter((i=>t.presentations.some((t=>t.id===i.o))))}constructor(t,i){this.PLt=[],this.QLt=t,this.yLt=i,this.Yn(i)}};r(),r();var aH=0,uH=class extends tu{get fot(){return!0}get Xyt(){return this.VLt.Xyt}get FY(){return this.VLt.FY}get dht(){return this.VLt.dht}get o(){return this.VLt.o}get kh(){var t;return null!=(t=this.VLt.kh)?t:""}get Gx(){return this.iB}get $yt(){return this.VLt.Bxt}get qyt(){}get gX(){return this.VLt.gX}get uxt(){return this.VLt.uxt}get Bxt(){return this.VLt.Bxt}get YA(){return this.VLt.YA}Uxt(t){const i=(t-this.VLt.eLt.Pnt.xE)*this.framesPerSecond();return x.round(this.VLt.$xt+i)}GLt(t){return t+1}zxt(t){var i;let e,s=this.VLt.oLt;for(;e=null==(i=s.match(qZ))?void 0:i.pop();)s=s.split(e).join(iH(e,t));return s+("now"===t?"?uuid="+Ox():"")}Hxt(t){var i;let e,s=this.VLt.nLt;for(;e=null==(i=s.match(KZ))?void 0:i.pop();)s=s.split(e).join(eH(e,t));return s}kQ(){}EQ(){}constructor(t){super(),this.iB=aH++,this.VLt=t}},cH=class extends uH{get WLt(){return this.VLt}get XAt(){return this.VLt.AO}get Ht(){return this.bB}framesPerSecond(){return this.VLt.AO/this.VLt.Igt}get ga(){return this.Za||(this.Za=oV(this)),this.Za}constructor(t,i){super(t),this.Za=void 0,this.bB=i}},lH=class extends uH{get WLt(){return this.VLt}get Kyt(){return 0}get Igt(){return this.VLt.Igt}get Ti(){return this.VLt.gLt.height}get ji(){return this.VLt.gLt.width}get gLt(){return this.VLt.gLt}get Ht(){return this.bB}framesPerSecond(){return this.VLt.Igt}get ga(){return this.Za||(this.Za=rV(this)),this.Za}constructor(t,i){super(t),this.Za=void 0,this.bB=i}};r();var Rr=function(t){return t.ZLt="alternative",t.HLt="main",t.XLt="commentary",t.qLt="",t.bQ="descriptions",t.KLt="main-desc",t.JLt="translation",t}({}),Dr=function(t){return t.ZLt="alternative",t.HLt="main",t.XLt="commentary",t.qLt="",t.yQ="captions",t.Ux="sign",t.AQ="subtitles",t}({}),dH=0,fH=class extends tu{get Vx(){return this.$Lt()}get Rt(){return this.He}set Rt(t){this.Rt!==t&&(this.He=t,t&&this.tCt(),this.eCt.iCt(),this.yo(new su(this)))}get ga(){return this.Za||(this.Za=oo(this)),this.Za}get agt(){return this.sCt}get o(){return this.cLt.o}get Gx(){return this.iB}get kh(){var t;return null!=(t=this.cLt.kh)?t:""}get UI(){return this.Rt?"enabled":"disabled"}set UI(t){"enabled"===t?this.Rt=!0:"disabled"===t&&(this.Rt=!1)}get Zx(){return this.qz}get Hx(){return this.Mdt}set Hx(t){this.Mdt=t,this.eCt.iCt(),this.yo(new th(t,this))}nB(t){this.Rt=t}nCt(t){for(const i of this.qz.Ix)i===t&&this.yo(new sY(i))}constructor(t,i,e){super(),this.qz=new ki,this.iB=dH++,this.He=!1,this.Mdt=void 0,this.cLt=i,this.eCt=e,this.sCt=new IG(t,[]);for(const t of i.Z)this.qz.Kz(this.createQuality(t))}},gH=class extends fH{get YA(){return gt.SI}get Lt(){return Rr.HLt}get gs(){return this.cLt.gs}get eLt(){return this.cLt}tCt(){this.eCt.rCt(this)}$Lt(){const t=this.eCt.oCt;return(null==t?void 0:t.Ht)===this?t:void 0}createQuality(t){return new cH(t,this)}constructor(t,i){super(Ri.SI,t,i)}},_H=class extends fH{get YA(){return gt.NI}get Lt(){return Dr.HLt}get gs(){return""}get eLt(){return this.cLt}tCt(){this.eCt.hCt(this)}$Lt(){const t=this.eCt.aCt;return(null==t?void 0:t.Ht)===this?t:void 0}createQuality(t){return new lH(t,this)}constructor(t,i){super(Ri.NI,t,i)}};function vH(t,i,e,s){if(!t)return;const n=function(t,i,e){const s=[];for(const t of i){var n;const i=null!=(n=t.mimeType)?n:"audio/mp4";var r;const e=null!=(r=t.codecs)?r:t.tracks.map((t=>t.codecs))[0];s.push(i+'; codecs="'+e+'"')}return wH(t,i,s,[],e)}(t,i?[i]:[],!s),r=function(t,i,e){const s=[];for(const t of i){var n;const i=null!=(n=t.mimeType)?n:"video/mp4";var r;const e=null!=(r=t.codecs)?r:t.tracks.map((t=>t.codecs))[0];s.push(i+'; codecs="'+e+'"')}return wH(t,i,[],s,e)}(t,e?[e]:[],!s),o=tW(n,r);return t.preferredKeySystems&&(null==o?void 0:o.Npt)&&(o.Npt=uW(o.Npt,t.preferredKeySystems)),o}function wH(t,i,e,s,n){const r=i.map((t=>t.protection)).filter($t);if(!r.length)return;const o=r[0].type,h=Ms(r,(t=>t.systems)),a=Ms(h,(t=>function(t,i){void 0===i&&(i=!0);const e=[],s=i?function(t){return xv.filter((i=>i.WA===t.toLowerCase()))}(t.schemeId):function(t){return kv.filter((i=>i.WA===t.toLowerCase()))}(t.schemeId);for(const i of s)e.push({hY:mH(t)?t.uri:void 0,NS:i,qY:void 0,XY:t.pssh?[Zn(t.pssh).buffer]:[]});return e}(t,n)));return{IF:t,Ipt:{YSt:o},Npt:a,VSt:e,GSt:s}}function mH(t){return t.schemeId===fv.QA&&void 0!==t.keyFormat&&void 0!==t.keyFormatVersions}r(),Qi(),ds(),r(),Qi(),r();var pH;function AH(t){const i=t.xE,e=t.TE.CP(i);return e?e.jn(0)-i:0}pH="Android"===Fe.IA.DA?200:300;var yH=Fe.Ys.xp?1:.5,bH=class{Cn(){1!==this.Ea&&(this.Ea=1,this.uCt=Fe.dA((()=>{this.cCt()}),pH),this.lCt.zkt(this.dCt),this.cz.KE?this.fCt.yn(E.oP,this.gCt):this.gCt())}zk(){0!==this.Ea&&(this.Ea=0,void 0!==this.uCt&&Fe.fA(this.uCt),this.lCt.Ukt(this.dCt),this.fCt.fn(E.rP,this._Ct),this.fCt.fn(E.oP,this.gCt),this.vCt=void 0,this.VP())}get wCt(){return MH(this.mCt.oCt,this.mCt.aCt)}async cCt(){await this.pCt,this.pCt=this.ACt(),await this.pCt}yCt(t,i){const e=this.bCt(t,i),s=this.lCt.FY;for(const t of e){if(t.MCt<=s)return t}return e[e.length-1]}async ACt(){var t,i;const e=null==(t=this.mCt.oCt)?void 0:t.Ht,s=null==(i=this.mCt.aCt)?void 0:i.Ht,n=this.bCt(e,s);if(0===n.length)return void 0;const r=this.maybeSwitchToTargetQuality(n);if(r)return void await this.TCt(r);const o=this.maybeGetUpSwitch(n);o&&await this.TCt(o)}maybeSwitchToTargetQuality(t){const i=this.wCt;if(t.some((t=>TH(t,i))))return;const e=this.lCt.FY;for(const i of t){if(i.MCt<=e)return i}return t[t.length-1]}maybeGetUpSwitch(t){var i,e;const s=this.lCt.FY;var n;var r;const o=(null!=(n=null==(i=this.mCt.oCt)?void 0:i.FY)?n:0)+(null!=(r=null==(e=this.mCt.aCt)?void 0:e.FY)?r:0);let h;for(const i of t){if(i.MCt<s&&i.MCt>o){h={SCt:i,n_t:Fe.Og()};break}}if(!this.vCt||!TH(this.vCt.SCt,null==h?void 0:h.SCt))return void(this.vCt=h);const a=Fe.Og()-this.vCt.n_t,u=this.vCt.SCt.MCt,c=this.NCt.length>=3&&this.NCt.every((t=>t>u));if(a>1e3&&c){if(this.cz.mz.wz||Fe.Ys.Np){const t=2*this.lCt.YY;if(!(AH(this.cz)>t))return}else{const t=x.max(2*this.lCt.YY+yH,this.aV.BP.minimumOffset);if(!(AH(this.cz)>t))return void(this.ICt&&this.ICt.minimumOffset===t||(this.VP(),this.ICt={minimumOffset:t},this.aV.QP(this.ICt)))}return this.vCt.SCt}}async TCt(t,i){void 0===i&&(i=!1),this.vCt=void 0,this.VP();const e=this.wCt;if(e.DCt===t.DCt&&e.ECt===t.ECt)return;const s=t.DCt,n=t.ECt;e.ECt&&n&&e.ECt.FY>n.FY&&i&&(this.lCt.Rkt(t.MCt),this.NCt=[]),await this.mCt.kCt(n,s)}VP(){this.ICt&&(this.aV.VP(this.ICt),this.ICt=void 0)}bCt(t,i){let e=[],s=[];var n;t&&(e=(null==(n=t.Hx)?void 0:n.length)?t.Hx:t.Zx.Ix);if(i){var r;const t=(null==(r=i.Hx)?void 0:r.length)?i.Hx:i.Zx.Ix,e=t.slice().sort(((t,i)=>t.FY-i.FY)),n=this.xCt(e);0===n.length&&t.length>0&&n.push(sw(t,(t=>t.FY))),s=n}const o=[],h=e.length>0?e:[void 0],a=s.length>0?s:[void 0];for(const t of h)for(const i of a)o.push(MH(t,i));return function(t){return t.sort(((t,i)=>i.MCt-t.MCt))}(o)}xCt(t){for(let i=0;i<t.length;i++){const e=t[i].gLt;if(e.height>=this.cz.Ti&&e.width>=this.cz.ji)return t.slice(0,i+1)}return t.slice()}wy(){this.vCt=void 0,this.fCt.tr(),this.VP()}constructor(t,i,e,s,n){this.cz=t,this.aV=i,this.mCt=e,this.LCt=s,this.lCt=n,this.Ea=0,this.pCt=Promise.resolve(),this.NCt=[],this.ICt=void 0,this._Ct=()=>{var t,i;if(this.LCt.wk)return;const e=null==(t=this.mCt.oCt)?void 0:t.Ht,s=null==(i=this.mCt.aCt)?void 0:i.Ht,n=sw(this.bCt(e,s),(t=>t.MCt));n&&(V(this.TCt(n,!0)),this.cz.mz.wz&&this.LCt.sL())},this.gCt=()=>{this.fCt.yn(E.rP,this._Ct),this.fCt.fn(E.oP,this.gCt)},this.dCt=()=>{if(this.NCt.unshift(this.lCt.FY),this.NCt=this.NCt.slice(0,3),this.vCt){const t=this.vCt.SCt.MCt;this.lCt.FY<t&&(this.vCt=void 0,this.VP())}},this.fCt=new uo(this.cz)}};function MH(t,i){var e;var s;return{DCt:t,ECt:i,MCt:(null!=(e=null==t?void 0:t.FY)?e:0)+(null!=(s=null==i?void 0:i.FY)?s:0)}}function TH(t,i){var e,s,n,r;return void 0===t||void 0===i?t===i:(null==(e=t.DCt)?void 0:e.o)===(null==(s=i.DCt)?void 0:s.o)&&(null==(n=t.ECt)?void 0:n.o)===(null==(r=i.ECt)?void 0:r.o)&&t.MCt===i.MCt}r(),Qi(),ds();var SH=class t{static async create(i,e,s){const n=await NH(i,e,s);return new t(n,i,e)}get xbt(){return(this.CCt.serverTimeMs+(Fe.Og()-this.CCt.localTimeMs))/1e3}get jCt(){return(this.CCt.localTimeMs-this.CCt.serverTimeMs)/1e3}async REt(t,i,e){for(;!e.sy;){await kt(6e5,e);try{this.CCt=await NH(t,i,e)}catch(t){X(t)}}}wy(){this.rN.Ty()}constructor(t,i,e){this.rN=new Wt,this.CCt=t,this.REt(i,e,this.rN.ly).catch(ya)}};async function NH(t,i,e){let[s,n,r]=await IH(t,i,e);return n>20&&([s,n,r]=await IH(t,i,e)),{localTimeMs:s,serverTimeMs:r-n/2}}async function IH(t,i,e){const s=Fe.Og(),n=await i.hI({LI:Ve.GET,zu:t,ly:e}),r=Fe.Og()-s,o=await n.UN(e);return[s,r,1e3*Number(o)]}var DH=class extends Jr{constructor(){super("seek")}},EH=function(t){return t.eW="seek",t}({}),kH=[Zi.so,E.wx,Zi.Eb],xH=class extends tu{get eL(){return this.yLt}get TE(){return this.OCt&&this.RCt?this.OCt.TE.Sn(this.RCt.TE):this.OCt?this.OCt.TE:this.RCt?this.RCt.TE:Mo.PP()}get oCt(){return this.PCt}get aCt(){return this.zCt}get ht(){return this.Oz}get rt(){return this.Pz}get BCt(){return this.UCt.rM}get W(){return this.QCt.rM}get _k(){return this.yLt?function(t,i,e){var s;const n=null==(s=t.RLt[0])?void 0:s.xE,r=t.DLt;if(void 0===n||void 0===r)return e>0&&e<tt?new Mo([0,e],[!0,!0]):Mo.PP();let o=i.Kkt;if(!o){const i=kY(t.kLt).getTime()/1e3;o=n+(Date.now()/1e3-i)}return new Mo([o-r,o],[!0,!0])}(this.yLt,this.FCt,this.cz.ct):Mo.PP()}async YCt(){this.OCt&&await this.OCt.wS(0,1/0),this.RCt&&await this.RCt.wS(0,1/0)}$n(){if(!this.wc.src)throw new qi(vt.SOURCE_INVALID,"No src property found in given source.");this.Cpt||(this.Cpt=this.oD(this.zQ.ly).catch(this.s8))}async oD(t){this.yo(new Gi);const i=this.wc.src,e=await this.VCt.tkt(i,t);this.yLt=new hH(i,e),this.yLt.FLt&&(this.GCt=await SH.create(this.yLt.FLt,this.OQ,t)),this.WCt();const s=this.yLt.RLt[this.yLt.RLt.length-1];this.createTracksForPresentation(s),this.UCt.sM(),this.iCt()}rCt(t){for(const i of this.Oz.Ix)i.nB(i===t)}hCt(t){for(const i of this.Pz.Ix)i.nB(i===t)}iCt(){const t=dl(this.Oz.Ix,(t=>t.Rt)),i=dl(this.Pz.Ix,(t=>t.Rt)),e=this.UG.yCt(t,i);V(this.kCt(e.ECt,e.DCt))}WCt(){if(!this.yLt||"live"!==this.yLt.I1||!this.GCt)return;const t=this.yLt.RLt.filter((t=>t.o===this.yLt.zLt))[0].xE,i=this.GCt.jCt+new Date(this.yLt.kLt).getTime()/1e3;this.FCt.Gkt(i,t)}createTracksForPresentation(t){var i,e,s,n;for(const i of null!=(s=t.TLt)?s:[])this.Oz.tt(new gH(i,this));for(const i of null!=(n=t.NLt)?n:[])this.Pz.tt(new _H(i,this));null==(i=this.Oz.Ex(0))||i.nB(!0),null==(e=this.Pz.Ex(0))||e.nB(!0)}get tL(){return sw([this.ZCt,this.HCt].filter($t),(t=>t.theolive))}get XCt(){const t=this.FCt.Kkt;if(void 0!==t)return t}Cn(){this.qCt=!0,this.KCt()}zk(){var t;this.qCt=!1,this.JCt().catch(this.s8),"live"===(null==(t=this.eL)?void 0:t.I1)&&(this.$Ct(),this.tjt())}$Ct(){this.ijt&&this.ijt.cancelDownload()}tjt(){this.ejt&&this.ejt.cancelDownload()}sL(t){this.m7.Ty(),this.m7=new Wt,this.p7=dw((i=>this.sjt(t,this.p7,i)),this.m7).catch(this.s8)}async sjt(t,i,e){if(i&&await i,await Ao(this.W,e),"live"!==this.yLt.I1)throw new b("The current video source does not support Live playback.");if(yi(e),await this.JCt(),yi(e),this.ijt&&(this.ijt.Rxt()||this.ijt.Lxt!==(null!=t?t:"now"))){var s;if(this.$Ct(),this.OCt){for(;this.OCt.oxt;)await Ao(this.OCt.axt,e);await this.OCt.wS(0,1/0)}null==(s=this.ijt)||s.Wb(null!=t?t:"now")}if(this.ejt&&(this.ejt.Rxt()||this.ejt.Lxt!==(null!=t?t:"now"))){var n;if(this.tjt(),this.RCt){for(;this.RCt.oxt;)await Ao(this.RCt.axt,e);await this.RCt.wS(0,1/0)}null==(n=this.ejt)||n.Wb(null!=t?t:"now")}this.yo(new DH),yi(e),this.p7=void 0,this.KCt()}Wb(t){this.m7.Ty(),this.m7=new Wt,this.p7=dw((i=>this.A7(t,this.p7,i)),this.m7).catch(this.s8)}async A7(t,i,e){var s,n;i&&await i,await Ao(this.W,e),yi(e),await this.JCt(),yi(e),this.ijt&&(this.ijt.Rxt()||this.ijt.Lxt!==t)&&this.$Ct(),this.ejt&&(this.ejt.Rxt()||this.ejt.Lxt!==t)&&this.tjt(),this.yo(new DH),yi(e),null==(s=this.ijt)||s.Wb(t),null==(n=this.ejt)||n.Wb(t),this.p7=void 0,this.KCt()}kCt(t,i){var e,s;return(null==(e=this.ijt)?void 0:e.Wut)===i&&(null==(s=this.ejt)?void 0:s.Wut)===t?Promise.resolve():(this.njt.Ty(),this.njt=new Wt,this.rjt=dw((e=>this.ojt(t,i,this.rjt,e)),this.njt).catch(this.s8),this.rjt)}async ojt(t,i,e,s){e&&await e,await Ao(this.UCt.rM,s),yi(s),await this.JCt(),yi(s),await this.hjt(t,i),await this.ajt(t,i),yi(s),this.rjt=void 0,this.KCt()}async hjt(t,i){var e,s,n;const r=null!=(n=this.XCt)?n:"now";if((null==(e=this.ijt)?void 0:e.Wut)!==i){var o;const t=this.ijt&&!this.ijt.Rxt(),e=null==(o=this.ijt)?void 0:o.Lxt;if(this.ijt&&(await this.ijt.wy(),this.ijt=void 0),this.OCt&&await this.OCt.axt,i){var h,a;const s=null!=(a=null==(h=this.OCt)?void 0:h.TE)?a:Mo.PP(),n=t?e:s.jn(s.V-1);this.ijt=new ZZ(i,this.OQ,this.Dft),this.ijt.yn(jZ.wxt,(t=>this.ujt(Ri.SI,t))),this.ijt.Wb(null!=n?n:r)}}if((null==(s=this.ejt)?void 0:s.Wut)!==t){var u;const i=this.ejt&&!this.ejt.Rxt(),e=null==(u=this.ejt)?void 0:u.Lxt;if(this.ejt&&(await this.ejt.wy(),this.ejt=void 0),this.RCt&&await this.RCt.axt,t){var c,l;const s=null!=(l=null==(c=this.RCt)?void 0:c.TE)?l:Mo.PP(),n=i?e:s.jn(s.V-1);this.ejt=new ZZ(t,this.OQ,this.Dft),this.ejt.yn(jZ.wxt,(t=>this.ujt(Ri.NI,t))),this.ejt.Wb(null!=n?n:r)}}}async ajt(t,i){const e=function(t,i,e,s,n){const r=vH(t,null==i?void 0:i.Ht.eLt.eLt,null==e?void 0:e.Ht.eLt.eLt,s),o=oW(r),h=[];i&&h.push({VN:i.gX});e&&h.push({VN:e.gX});return{YA:uh.FQ,k5:h,yV:o,Q5:n&&!s}}(this.wc.contentProtection,i,t,this.cz.mz.wz,this.wc.useManagedMediaSource);if(this.vV&&this.vV.N$(e)){var s,n;const t=!(null==(s=this.ijt)?void 0:s.Rxt());if(this.OCt&&t){for(;this.OCt.oxt;)await this.OCt.axt;await this.OCt.DX()}const i=!(null==(n=this.ejt)?void 0:n.Rxt());if(this.RCt&&i){for(var r,o;null==(r=this.RCt)?void 0:r.oxt;)await this.RCt.axt;await(null==(o=this.RCt)?void 0:o.DX())}await this.vV.D$(e)}else{this.$Ct(),this.tjt(),this.OCt&&(await this.OCt.wy(),this.OCt=void 0),this.RCt&&(await this.RCt.wy(),this.RCt=void 0),this.cz.xtt();try{await this.cz.tr(),this.vV=await this.cz.$n(e),this.QCt.sM(),this.vV.A5&&this.ijt&&(this.vV.A5.yn(po.g$,this.Ds),this.OCt=new LZ(this.vV.A5,this.cz,i,this.cjt)),this.vV.y5&&this.ejt&&(this.vV.y5.yn(po.g$,this.Ds),this.RCt=new LZ(this.vV.y5,this.cz,t,this.cjt)),"live"===this.yLt.I1&&this.vV.S5(1/0)}finally{this.cz.Ltt()}}}KCt(){!this.qCt||this.p7||this.rjt||this.ljt||this.djt||(this.UG.Cn(),this.fjt=new Wt,this.ejt&&this.RCt&&(this.ljt=this.gjt(this.ejt,this.RCt,this.fjt.ly).catch(this.s8)),this.ijt&&this.OCt&&(this.djt=this.gjt(this.ijt,this.OCt,this.fjt.ly).catch(this.s8)))}async JCt(){this.UG.zk(),this.fjt&&(this.fjt.Ty(),this.fjt=void 0),this.ljt&&(await this.ljt,this.ljt=void 0),this.djt&&(await this.djt,this.djt=void 0)}async gjt(t,i,e){for(await this.W;t.oxt;)await Ao(t.axt,e);for(;i.oxt;)await Ao(i.axt,e);if(!t.Rxt()){const e=Fe.Og()/1e3,s="now"===t.Lxt,{initialization:n,data:r,metadata:o}=await t.Pxt(),h={YA:Xi.v$,rI:n},a=r?{YA:Xi.v$,rI:r}:void 0,u=i.TE;!Fe.Ys.Dp&&!this.cz.mz.wz&&o&&u.jn(u.V-1)>o.xst&&await i.wS(o.xst,1/0),await i.F4(h),a&&await i.B4(a,o,t.Wut);const c=i.TE.yP(u);s&&c.V>0&&this.FCt.Ykt(e,c.jn(c.V-1))}for(;!t.xxt;){yi(e);const s=t.Vxt();await Ao(i.appendStream(s,t),e)}}async wy(){this.zQ.Ty(),this.Cpt&&await this.Cpt.catch(ya),this.p7&&(this.m7.Ty(),this.$Ct(),this.tjt(),await this.p7.catch(ya)),this.rjt&&(this.njt.Ty(),this.$Ct(),this.tjt(),await this.rjt.catch(ya)),await this.JCt(),this.ijt&&await this.ijt.wy(),this.ejt&&await this.ejt.wy(),this.ijt=void 0,this.ejt=void 0,this.QCt.Ty(),this.UCt.Ty(),this.vV&&(await this.cz.tr(),this.vV=void 0),this.OCt=void 0,this.RCt=void 0,this.cz.fn(E.oP,this.vz),this.cz.fn(kH,this.updateActiveQualities),this.Oz.tr(),this.PCt=void 0,this.Pz.tr(),this.zCt=void 0,this.yLt=void 0,this.GCt&&(this.GCt.wy(),this.GCt=void 0),this.qCt=!1}constructor(t,i,e,s,n,r,o,h,a,u){super(),this.qCt=!1,this._jt=!1,this.Oz=new pe,this.Pz=new pe,this.vjt=void 0,this.PCt=void 0,this.zCt=void 0,this.UCt=new xh,this.vV=void 0,this.Cpt=void 0,this.QCt=new xh,this.zQ=new Wt,this.rjt=void 0,this.njt=new Wt,this.p7=void 0,this.m7=new Wt,this.ijt=void 0,this.OCt=void 0,this.djt=void 0,this.ejt=void 0,this.RCt=void 0,this.ljt=void 0,this.fjt=void 0,this.vz=()=>{this._jt=!0},this.updateActiveQualities=()=>{var t,i;const e=this.cz.xE,s=null==(t=this.OCt)?void 0:t.sxt(e),n=null==(i=this.RCt)?void 0:i.sxt(e);if(this.PCt!==s&&(this.PCt=s,s))for(const t of this.Oz.Ix)t.nCt(s);if(this.zCt!==n&&(this.zCt=n,n))for(const t of this.Pz.Ix)t.nCt(n)},this.ujt=(t,i)=>{const e=i.data;if(e.YA===is.Axt){const{bxt:i,Mxt:n,yxt:r,Txt:o}=e;if(this.GCt){const e=this.GCt.xbt,s=this.cz.xE;if(this._jt&&0!==s){const o={theolive:e-i+r-s,engine:n,distribution:e-(i+n),player:r-s};t===Ri.SI?(this.HCt=o,this.FCt.Xkt(this.GCt.jCt+i,r)):(this.ZCt=o,this.FCt.Zkt(this.GCt.jCt+i,r))}}var s;if(o)null!=this.vjt||(this.vjt=this.cz.Wk(z.MQ,"timecode","timecode",void 0,!1,El.DEFAULT,!1,void 0)),this.vjt.RQ(new dN(r,r,o,!1,void 0)),JI(this.vjt,null!=(s=this.cz.TE.Cn(0))?s:-1)}this.yo(i)},this.s8=t=>{Tu(t)||(this.zk(),this.yo(new Uc(new qi(vt.MEDIA_LOAD_ERROR,t.message))))},this.wc=t,this.VCt=i,this.cz=e,this.OQ=n,this.FCt=r,this.UG=new bH(e,o,this,a,s),this.Dft=h,this.cjt=u,this.cz.yn(E.oP,this.vz),this.cz.yn(kH,this.updateActiveQualities)}};r(),Qi();var LH=class extends GT{yz(){const t=this.cz.TE;return 0===t.V?0:t.jn(t.V-1)-this.cz.xE}sL(){this.ta.sL()}GP(){return EZ(super.GP())}bz(){return!Fe.Ys.Np}constructor(t,i,e){super(t,i,e)}},CH=[Zi.yb,Zi.Eb,Zi.qy,Zi.pb,Zi.kb,Zi.Zy,Zi.$y,Zi.Ky],jH=class extends tu{Ox(){this.cz.yn(CH,this.Ds),this.cz.yn(E.oP,this.iZ),this.cz.yn([Zi.so,Zi.wb],this.wjt),this.cz.yn(Me.ua,this.mjt),this.cz.yn(Zi.Eb,this.ld),this.OV.yn(QT,this.Ds)}Cx(){this.cz.fn(CH,this.Ds),this.cz.fn(E.oP,this.iZ),this.cz.fn([Zi.so,Zi.wb],this.wjt),this.cz.fn(Me.ua,this.mjt),this.cz.fn(Zi.Eb,this.ld),this.OV.fn(QT,this.Ds)}get ht(){return this.Oz}get rt(){return this.Pz}get eL(){var t,i;return null==(i=this.mCt)||null==(t=i.eL)?void 0:t.eL}get Nk(){return this.cz.Nk}set Nk(t){this.cz.Nk=t}get Lk(){return!1}set Lk(t){}get pV(){return this.AV}Bk(){return!1}Ck(){return this.cz.wa}_a(){return this.cz.LV}Wk(t){return this.cz.CV(t)}be(){this.cz.be()}ge(){return this.cz.ge()}Fk(){}Yk(){}Uk(){}Qk(){}get WE(){return this.cz.WE}set WE(t){this.cz.WE=t}get xE(){var t;return null!=(t=this.pjt)?t:this.cz.xE}set xE(t){this.CE(t)}CE(t,i){this.m7.Ty(),this.m7=new Wt,this.p7=dw((i=>this.A7(t,i,this.p7)),this.m7)}get NE(){const t=this.Ajt();if(t)return new Date(t.getTime()+1e3*this.xE)}set NE(t){const i=this.Ajt();t&&i&&(this.xE=i.getTime()-t.getTime())}Ajt(){const t=this.eL;if(!t)return;const i=new Date(t.creationDate).getTime();let e=NaN;for(const i of t.presentations)i.currentTime&&(e=i.currentTime.value/(i.currentTime.scale||1)*1e3);return j(e)?void 0:new Date(i-e)}get bt(){return this.wc}get $E(){return this.cz.$E}set $E(t){this.cz.$E=t}get ct(){const t=this.cz.ct;return t===tt?1/0:t}get OE(){return!1}get zE(){return this.fV}get lt(){return this.dV}get UE(){return this.yjt}get FE(){return!1}get VE(){return Ei({},{Bz:0,Uz:0,Qz:0,Fz:0,Yz:0,Vz:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}},this.cz.GE())}get XE(){return!0}get wk(){return this.kG}get wV(){}get nt(){return this.Ul}get yk(){return this.cz.yk}get Tk(){return this.cz.Tk}get TE(){return this.GNt.ks()}get GNt(){return this.mCt?this.mCt.TE:Mo.PP()}get rk(){return this.cz.rk.ks()}get _k(){var t,i;return null!=(i=null==(t=this.mCt)?void 0:t._k.ks())?i:Mo.PP().ks()}get KE(){return this.ent}get iL(){return!0}get Ek(){return this.QG}get XCt(){var t;return null==(t=this.mCt)?void 0:t.XCt}get Az(){if(this.KE)return;if(!this._jt)return;const t=this.xE,i=this.FCt.Jkt(t);if(void 0===i)return;const e=this.GNt;let s=0;if(e.V>0){const i=e.jn(e.V-1);s=x.max(i-t,0)}return x.max(i,s)}get tL(){var t;return null==(t=this.mCt)?void 0:t.tL}get fk(){return this.cz.fk}get ck(){return this.bjt}set ck(t){this.bjt=t,this.Mjt()}async Mjt(){this.bjt!==Nr.pG&&this.mCt&&(this.mCt.$n(),this.bjt!==Nr.Mz&&this.bjt!==Nr.QY||(await this.mCt.BCt,"vod"===this.mCt.eL.I1&&this.mCt.Cn()))}async ka(t,i,e){if(yi(e),await this.tr(),yi(e),!fS(t))return this.fV=new qi(vt.SOURCE_INVALID,"HESP source incorrectly configured"),this.dV=la(this.fV),this.Tjt(this.fV),Promise.resolve();const s=t;this.wc=s;const n=new uZ(this.OQ);this.Sjt=this.Njt(t),this.aV=new LH(this,this.cz,this.Sjt),this.aV.Rt=!0,this.aV.yn("latencyrecoveryseek",this.Ds),this.Ek.Sa(this.aV),this.mCt=new xH(s,n,this.cz,this.AV,this.OQ,this.FCt,this.aV,this.Dft,this,this.cjt),this.mCt.yn(Zi.ub,this.Ds),this.mCt.yn(Me.ua,this.Ijt),this.Oz.xx=this.mCt.ht,this.Pz.xx=this.mCt.rt,this.SV.WY(t.contentProtection),V(this.Mjt())}Njt(t){return t.latencyConfiguration?t.latencyConfiguration:kZ()}async Pk(){var t;if(!this.mCt)return;this.ent=!1,this.mCt.$n(),await this.mCt.W,this.yo(new fi(this.xE));const i=this.mCt.zy(EH.eW);this.sL(),await i,this.mCt.Cn(),await this.cz.Pk(),null==(t=this.aV)||t.Cn()}Rk(){var t;this.mCt&&(this.ent=!0,this.yo(new Zr(this.xE)),this.mCt.zk(),null==(t=this.aV)||t.zk(),this.cz.Rk())}sL(){if(this.MDt)throw new b("Cannot seek while resetting");this.m7.Ty(),this.m7=new Wt,this.p7=dw((t=>this.sjt(this.p7,t)),this.m7)}Djt(){var t;null==(t=this.mCt)||t.zk()}Tjt(t){this.yo(new Uc(t)),this.Djt()}async A7(t,i,e){var s;if(this.MDt)throw new b("Cannot seek while resetting");let n=t;if(this.Ejt(n),this._k.length>0&&(n=Mo.xn(this._k).gP(n),this.Ejt(n)),this.mCt){e&&(await e.catch(ya),yi(i)),(null==(s=this.aV)?void 0:s.zP)&&this.aV.zk();try{const t=this.cz.zy(Zi.bb,i);this.cz.Wb(n),this.mCt.Wb(n),await t}catch(t){throw X(t),this.mCt.zk(),this.kjt(),t}this.xjt()}}async sjt(t,i){this.yo(new Jr("golive"));const e=this.XCt;if(this.Ejt(e),this.mCt){t&&(await t.catch(ya),yi(i));try{let t,s=this.aV.BP.targetOffset;if(await this.mCt.BCt,e&&s>=1){if(!this.aV.bz()){s-=x.min(1,.5*s)}t=e-s}else t=this.XCt?this.XCt-.2:void 0;for(this.mCt.sL(t);this.GNt.V>0;)await this.mCt.zy(po.g$,i);const n=this.GNt;for(;0===this.GNt.yP(n).V;)await this.mCt.zy(po.g$,i);t=this.GNt.Cn(this.GNt.V-1),t=this.Ljt(t),this.Ejt(t);const r=this.cz.zy(Zi.bb,i);this.cz.Wb(t,!0),await r}catch(t){var s;if(Tu(t))throw null==(s=this.aV)||s.Cn(),t;throw this.mCt.zk(),await this.mCt.YCt(),this.kjt(),t}this.xjt()}}Ejt(t){this.kG=!0,this.pjt=t,this.yo(new Yr(this.xE))}xjt(){this.kG&&(this.pjt=void 0,this.kG=!1,this.yo(new aa(this.xE)))}kjt(){this.pjt=void 0,this.kG=!1}Ljt(t){return t}async TDt(t,i,e){var s;yi(e),t&&await t.catch(ya),i&&await i.catch(ya),await this.cjt.tr(),null==(s=this.aV)||s.zk(),this.mCt&&(await this.mCt.wy(),this.mCt=void 0),yi(e),await this.cz.tr(),yi(e),this.cz.jV(),this.Pz.tr(),this.Oz.tr(),this.kjt(),this.OV.tr(),this.FCt.tr(),this.fV=void 0,this.dV=void 0,this.ent=!0,this._jt=!1,this.wc=void 0,this.MDt=void 0,this.Sjt=void 0}tr(){return this.m7.Ty(),this.m7=new Wt,this.Cjt.Ty(),this.Cjt=new Wt,this.MDt=this.TDt(this.p7,this.MDt,this.Cjt.ly),this.MDt}async gn(){var t,i;this.Cx(),this.OV.gn(),this.wc&&await this.tr(),this.Bo(),this.cz.zV=void 0,null==(t=this.aV)||t.fn("latencyrecoveryseek",this.Ds),null==(i=this.aV)||i.wy(),await this.cjt.gn(),this.Ul.gn(),this.Oz.gn(),this.Pz.gn()}constructor(t,i,e,s,n){super(),this.mCt=void 0,this.kG=!1,this.m7=new Wt,this.p7=void 0,this.MDt=void 0,this.Cjt=new Wt,this.ent=!0,this._jt=!1,this.Oz=new tl,this.Pz=new tl,this.fV=void 0,this.dV=void 0,this.bjt=Nr.pG,this.ld=()=>{const t=this.TE;t.length>0&&this.cjt.NQ(t.start(0))},this.wjt=()=>{this.cz.KE!==this.ent&&(this.cz.KE?this.Rk():this.Pk().catch(ya))},this.iZ=()=>{this._jt=!0},this.Ijt=t=>{this.fV=t.errorObject,this.dV=la(this.fV),this.Tjt(this.fV)},this.mjt=t=>{this.fV=ju(t.lt),this.dV=t.lt,this.Tjt(this.fV)},this.cz=t,this.OV=new uo(this.cz,!0),this.OQ=i,this.AV=new AZ(e.VK,e.NK.YY),this.SV=new QE(i),this.cz.zV=this.SV,this.cjt=new qF(this.cz),this.Ul=new YE([this.cz.nt,this.cjt.Z]),this.FCt=new yZ,this.yjt=new cZ(this),this.QG=s,this.Dft=n.retryConfiguration,this.Ox()}};il(),Qi();var OH=class extends jH{yo(t){if(this.jjt){if(t.type===Zi.bb)return void this.Ojt();if(t.type===E.rP||t.type===Zi.Mb||t.type===E.oP)return void this.Rjt.push(t)}super.yo(t)}Ojt(){this.jjt=!1,void 0!==this.Pjt&&Fe.Rg(this.Pjt);const t=dl(this.Rjt,(t=>t.type===E.oP));t&&super.yo(t),nt(this.Rjt)}jk(){if(XB(this.cz))return this.cz.jk()}async tr(){this.zjt=!1,this.Ojt(),await super.tr()}async gn(){h.removeEventListener("visibilitychange",this.Bjt),this.Ojt(),await super.gn(),await this.cz.wy(),await this.QV.BV(this.Ujt)}Ljt(t){return Ro.qf&&Ro.Jf>=15&&Ro.Kd?t+.25:t}constructor(t,i,e,s,n,r){super(t,i,e,s,r),this.zjt=!1,this.jjt=!1,this.Rjt=[],this.Pjt=void 0,this.Bjt=()=>{const t=this.WE||0===this.Nk;"hidden"===h.visibilityState&&!this.KE&&t?(this.Rk(),this.zjt=!0):"visible"===h.visibilityState&&this.zjt&&(this.jjt=!0,this.Pjt=Fe.Pg((()=>{for(const t of this.Rjt)super.yo(t);this.Pjt=void 0,this.jjt=!1}),2e3),V(this.Pk()),this.zjt=!1)},this.QV=n,this.Ujt=t,Ro.Lg&&h.addEventListener("visibilitychange",this.Bjt)}};r();var RH=class{get hG(){return pt.lL}async nG(t,i){return function(t){if(!t)return!1;const i=t.toLowerCase();return Et(i,Oe.cL)||Et(i,Oe.lL)}(t.type)}async rG(t){return mu(t)}};il(),Qi();ko(new class extends RH{bL(t,i,e,s,n,r,o){const h=new es(i),a=h.sG(Ri.NI);return new OH(a,e,n,r,h,s)}nG(t,i){return Fe.rE&&Yy?Ro.IS_IOS_CHROME||Ro.Nf&&Ro.Df<6?Promise.resolve(!1):qh(t.useManagedMediaSource)?super.nG(t,i):Promise.resolve(!1):Promise.resolve(!1)}oG(){return!1}}),r(),il(),r();var PH=class extends jH{jk(){if(XB(this.cz))return this.cz.jk()}async gn(){await super.gn(),await this.QV.BV(this.cz)}constructor(t,i,e,s,n,r){super(t,i,e,s,r),this.QV=n}};Ro.qf&&Ro.Ka&&ko(new class extends RH{get hG(){return pt.UY}async nG(t,i){var e,s;if(Ro.IS_IOS_CHROME)return!1;const n=await super.nG(t,i);var r;if(null==(r=null==(s=Jd())||null==(e=s.canPlayType)?void 0:e.call(s,Oe.hL))||!r||!n||!("serviceWorker"in Kl))return!1;try{const t=Kl.serviceWorker.ready;return await vw(t,1e3),!0}catch(t){return!1}}async rG(t){return!!t.fairplay&&await super.rG(t)}bL(t,i,e,s,n,r,o){if(t instanceof HTMLDivElement){const t=i.got(Ri.NI);return new PH(t,e,n,r,i,s)}throw new qi(vt.CONFIGURATION_ERROR,"Container Div element expected.")}oG(){return!1}}),r(),r(),r(),r();var zH="theo_live_user_id",BH=class{incrementSequenceNumber(){this.bT+=1}get sequenceNumber(){return this.bT}constructor(t){this.externalId=t,this.id=Ox(),this.userId=UH(),this.bT=0}};function UH(){try{const t=localStorage.getItem(zH);if(t)return t;const i=Ox();return localStorage.setItem(zH,i),i}catch(t){return Ox()}}r(),Qi();var QH=class{Bmt(t){const i=this.Qjt.get(t.id);if(i)return i;const e=new FH(t,this.OQ,this.Fjt);return this.Qjt.set(t.id,e),e}constructor(t,i){this.OQ=t,this.Qjt=new Map,this.Fjt=i}},FH=class{get Yjt(){return ja()-this.Vjt>36e5}Yn(){this.Gjt=!1,this.Vjt=ja(),this.Wjt=this.MSt(),this.Wjt.catch((()=>this.Gjt=!0))}async MSt(){const{id:t,discovery:i}=this.aS;if(rl(i.pathname,"manifest.json"))return function(t){return{id:{id:t.id,discovery:Fe.Ah("dev://")},name:"demo",mode:"demo",status:"playing",source:{src:t.id,type:"theo.live"},customization:{autoplay:!0}}}(this.aS);const e=await this.Zjt(this.aS,this.Hjt);if(!e)throw new VH(t);const{mode:s,status:n,fallback:r,metadata:o}=e;if("locked"===s)throw new GH(t);if("deleted"===n)throw new WH(t);return{id:this.aS,name:o.name,mode:s,status:n,source:ZH(e),fallback:r?await this.Xjt(r,i,this.Hjt):void 0,insights:null==o?void 0:o.insights,enhancedLogging:null==o?void 0:o.enhancedLogging,customization:null==o?void 0:o.customization,sseEndpoint:e.sseEndpoint}}async Xjt(t,i,e){if("theo.live"!==t.type)return{src:t.src,type:t.type};const s={id:t.src,discovery:i},n=await this.Zjt(s,e);return n?ZH(n):void 0}async Zjt(t,i){let{id:e,discovery:s}=t;try{const t=await this.OQ.hI({zu:Fe.Ah(e,s.toString()).toString(),aI:i});return await t.BN()}catch(t){return}}get uet(){return(this.Gjt||this.Yjt)&&this.Yn(),this.Wjt}constructor(t,i,e){this.aS=t,this.OQ=i,this.Hjt=new Rh,e.discoveryHeader&&this.Hjt.append("x-theolive-discovery",e.discoveryHeader),this.Yn()}};var YH=class extends qi{constructor(t,i,e){super(t,"Could not load channel with id "+i+": "+e),this.channelId=i,this.reason=e}},VH=class extends YH{constructor(t){super(vt.THEO_LIVE_CHANNEL_NOT_FOUND,t,"The channel could not be found")}},GH=class extends YH{constructor(t){super(vt.THEO_LIVE_CHANNEL_NOT_FOUND,t,"This account has been locked")}},WH=class extends YH{constructor(t){super(vt.THEO_LIVE_CHANNEL_NOT_FOUND,t,"The channel got deleted")}};function ZH(t){var i;return{src:t.hespSrc,type:"theo.live",hlsSrc:t.hlsSrc,targetLatency:null==(i=t.metadata.customization)?void 0:i.targetLatency,contentProtection:t.drmConfig?HH(t.drmConfig):void 0}}function HH(t){const{integration:i,widevine:e,playready:s,fairplay:n}=t;return Ei({integration:i},e&&{widevine:{licenseAcquisitionURL:e.licenseUrl}},s&&{playready:{licenseAcquisitionURL:s.licenseUrl}},n&&{fairplay:{licenseAcquisitionURL:n.licenseUrl,certificateURL:n.certificateUrl}})}function XH(t,i){return{id:t,discovery:Fe.Ah(t,i)}}r(),r();var qH=class{get qjt(){return this.amountOfSamples>0?this.currentAverage:0}get Kjt(){return this.Jjt}$jt(t){this.tOt=!0,this.currentAverage=this.currentAverage+(t-this.currentAverage)/(this.amountOfSamples+1),this.amountOfSamples+=1,this.Jjt=x.min(this.Kjt,t)}constructor(){this.tOt=!1,this.amountOfSamples=0,this.currentAverage=0,this.Jjt=1/0}};ds(),Qi();var KH=class extends qi{constructor(){super(vt.THEO_LIVE_ANALYTICS_ERROR,"Illegal configuration: unexpected property analyticsEnabled")}},JH=class{Na(t){var i,e,s;const n={state:t,width:this.ta.we.clientWidth,height:this.ta.we.clientHeight,activeQuality:null!=(s=null==(e=this.ta.rt.Ex(0))||null==(i=e.Vx)?void 0:i.FY)?s:-1,time:Fe.Og()};this.Ea&&function(t,i){return t.state===i.state&&t.activeQuality===i.activeQuality&&t.height===i.height&&t.width===i.width}(this.Ea,n)||(this.Ea=n,this.iOt("statechange",n))}eOt(t){var i,e;this.Na("loading");const s=rl(Fe.Ah(t.source.src).host,"fastly.net");if(!this.sOt()&&!s)throw new KH;var n,r;this.nOt=t,this.rOt=!1,this._jt=!1,this.oOt=-1/0,this.hOt({type:"session",channelId:t.id.id,channelStatus:t.status,sessionId:this.aOt.id,externalSessionId:this.aOt.externalId,backup:null==(i=t.fallback)?void 0:i.src,autoplay:null!=(n=null==(e=t.customization)?void 0:e.autoplay)&&n,userAgent:Kl.userAgent,clientVersion:"8.13.1",clientType:"theoplayer"}),this.iOt("loadchannel",{targetLatency:null!=(r=t.source.targetLatency)?r:0})}Cn(){if(!this.uOt){var t,i;this.uOt=!0,this.ta.yn(Me.ua,this.cOt),this.ta.yn(Zi.kb,this.lOt),this.ta.rt.yn(bs.Hk,this.dOt),this.ta.yn(Zi.pb,this.fOt),this.ta.yn(E.oP,this.Yst),this.ta.yn(Zi.wb,this.Wst),this.ta.yn(Zi.so,this.Gst),this.ta.UE.yn("golive",this.gOt),this.ta.UE.yn("latencyrecoveryseek",this._Ot),this.ta.yn(E.rP,this.vOt),this.ta.yn(Zi.Eb,this.wOt),this.ta.yn(Th.pn,this.mOt),null==(t=this.ta.Vc)||t.yn(["Trt","Mrt","Srt","Nrt","pOt"],this.AOt),null==(i=this.ta.Vc)||i.yn("yOt",this.bOt),s.addEventListener("beforeunload",this.MOt),h.addEventListener("visibilitychange",this.TOt),this.iOt("visibilitychange",{visibility:h.visibilityState});const e=this.ta.we;this.iOt("dimensionchange",{width:e.clientWidth,height:e.clientHeight}),this.SOt=Fe.Og(),this.NOt=Fe.dA((()=>{const t=this.IOt();this.hOt(t)}),3e4),this.DOt=Fe.dA((()=>{this.EOt()}),5e3),this.kOt=Fe.dA((()=>{this.xOt.push(this.ta.wZ.NK.FY)}),100)}}zk(){if(this.LOt.length>0){const t=this.IOt();this.hOt(t)}var t,i,e;(this.LOt=[],this.COt=[],this.jOt=[],this.uOt)&&(this.uOt=!1,this.ta.fn(Me.ua,this.cOt),this.ta.fn(Zi.kb,this.lOt),this.ta.rt.fn(bs.Hk,this.dOt),null==(t=this.ta.rt.Ex(0))||t.fn(yo.Mx,this.OOt),this.ta.fn(Zi.pb,this.fOt),this.ta.fn(E.oP,this.Yst),this.ta.fn(Zi.wb,this.Wst),this.ta.fn(Zi.so,this.Gst),this.ta.UE.fn("golive",this.gOt),this.ta.UE.fn("latencyrecoveryseek",this._Ot),this.ta.fn(E.rP,this.vOt),this.ta.fn(Zi.Eb,this.wOt),this.ta.fn(Th.pn,this.mOt),null==(i=this.ta.Vc)||i.fn(["Trt","Mrt","Srt","Nrt","pOt"],this.AOt),null==(e=this.ta.Vc)||e.fn("yOt",this.bOt),s.removeEventListener("beforeunload",this.MOt),h.removeEventListener("visibilitychange",this.TOt),Fe.fA(this.NOt),Fe.fA(this.DOt),Fe.fA(this.kOt))}ROt(){this.iOt("intenttofallback")}POt(){this.iOt("fallback")}EOt(){const t=this.ta.SE();if(t.length){const i=t.end(t.length-1)-this.ta.LE();this.COt.push(i)}this.jOt.push(this.ta.wZ.NK.FY);const i=this.ta.Ek.Az;void 0===i||this.ta.KE||(this.zOt=x.min(this.zOt,i),this.BOt=x.max(this.BOt,i),this.UOt.$jt(i))}QOt(t){var i;this.xOt.sort(((t,i)=>t-i));const e=null!=(i=this.xOt[0])?i:0;var s;const n=null!=(s=this.xOt[x.round(.05*this.xOt.length)])?s:0;var r;const o=null!=(r=this.xOt[x.round(.25*this.xOt.length)])?r:0;var h;const a=null!=(h=this.xOt[x.round(.5*this.xOt.length)])?h:0;var u;const c=null!=(u=this.xOt[x.round(.75*this.xOt.length)])?u:0;var l;const d=null!=(l=this.xOt[x.round(.95*this.xOt.length)])?l:0;var f;const g=null!=(f=this.xOt[this.xOt.length-1])?f:0,_=Fe.Og();var v;const w=(_-(null!=(v=this.SOt)?v:0))/1e3;return this.xOt.length=0,this.SOt=_,{activeQuality:t.FY,duration:w,min:e,p5:n,p25:o,median:a,p75:c,p95:d,max:g}}IOt(){var t,i,e;this.iOt("beacon",{activeQuality:null==(i=this.ta.rt.Ex(0))||null==(t=i.Vx)?void 0:t.FY,averageLatency:this.UOt.qjt,minLatency:this.zOt,maxLatency:this.BOt}),this.UOt=new qH,this.zOt=1/0,this.BOt=-1/0;const s=null==(e=this.ta.rt.Ex(0))?void 0:e.Vx;if(s){const t=this.QOt(s);this.iOt("bandwidth-distribution",t)}const n=this.LOt.slice(0),r=x.round(this.jOt.reduce(((t,i)=>t+i),0)/x.max(this.jOt.length,1)),o=this.COt.reduce(((t,i)=>t+i),0)/x.max(this.COt.length,1);return this.jOt=[],this.COt=[],this.LOt.splice(0),{type:"events",channelId:this.nOt.id.id,userId:this.aOt.userId,currentTime:ja()/1e3,latency:this.ta.Ek.Az,paused:this.ta.KE,events:n,rtt:x.round(1e3*this.ta.wZ.NK.YY),sessionId:this.aOt.id,externalSessionId:this.aOt.externalId,userAgent:Kl.userAgent,weightedAverageBandwidth:r,weightedAverageBufferSize:o}}sOt(){var t,i,e,s;return!1!==(null==(t=this.Fjt)?void 0:t.analyticsEnabled)&&(null==(s=null==(e=this.nOt)||null==(i=e.insights)?void 0:i.enabled)||s)}hOt(t){if(this.sOt()){this.FOt.push(t);for(const i of this.Fjt.analyticsUrls)this.ta.wE.hI({zu:i,LI:Ve.POST,aI:{Accept:"application/json","Content-Type":"application/json"},UI:gb.EI,GN:JSON.stringify(t)}).then((i=>{ra(this.FOt,t),V(i.FN())})).catch((()=>{ra(this.FOt,t)}))}}YOt(t){if(this.sOt())for(const i of this.Fjt.analyticsUrls)this.ta.wE.YI({zu:i,GN:JSON.stringify(t)})}constructor(t,i,e){this.VOt=Fe.Og(),this.rOt=!1,this._jt=!1,this.uOt=!1,this.GOt=!1,this.WOt=0,this.FOt=[],this.ZOt=0,this.LOt=[],this.COt=[],this.jOt=[],this.zOt=1/0,this.BOt=-1/0,this.UOt=new qH,this.oOt=-1/0,this.xOt=[],this.SOt=void 0,this.HOt=void 0,this.Ea=void 0,this.dOt=()=>{var t,i;this.ta.rt.Ex(0).yn(yo.Mx,this.OOt),this.iOt("qualities",{qualities:null==(i=this.ta.rt.Ex(0))||null==(t=i.Zx)?void 0:t.Ix.map((t=>({id:t.o,bandwidth:t.FY,label:t.kh,width:t.ji,height:t.Ti})))})},this.MOt=()=>{this.iOt("exit"),this.Na("end");const t=this.IOt();for(const t of this.FOt)this.YOt(t);this.FOt.length=0,this.YOt(t)},this.TOt=()=>{this.iOt("visibilitychange",{visibility:h.visibilityState})},this.cOt=t=>{this.iOt("error",{message:t.errorObject.message})},this.lOt=()=>{this.iOt("volumechange",{volume:this.ta.Nk,muted:this.ta.WE})},this.OOt=t=>{var i;const e=t.Wut.FY;this.iOt("qualitychange",{from:this.HOt,to:e}),this.HOt=e;const s=this.QOt(t.Wut);var n;this.iOt("bandwidth-distribution",s),this.Na(null!=(n=null==(i=this.Ea)?void 0:i.state)?n:"loading")},this.fOt=t=>{this.iOt("playbackratechange",{rate:t.playbackRate,latency:this.ta.Ek.Az})},this.Yst=()=>{this._jt||(this._jt=!0,this.iOt("firstplaying",{targetLatency:this.ta.Ek.Az}));const t=this.rOt;var i,e,s,n;(this.rOt=!0,t)?this.iOt("playing",{activeQuality:null==(e=this.ta.rt.Ex(0))||null==(i=e.Vx)?void 0:i.FY}):this.iOt("playing",{timeSincePlay:(Fe.Og()-this.VOt)/1e3,activeQuality:null==(n=this.ta.rt.Ex(0))||null==(s=n.Vx)?void 0:s.FY});this.Na("play")},this.Wst=t=>{this.iOt("pause"),this.rOt=!1,this.Na("pause")},this.Gst=()=>{this.iOt("play"),this.VOt=Fe.Og()},this.gOt=()=>{Fe.Og()-this.oOt>100&&this.iOt("liveseek",{when:this.rOt?"playback":"after-pause"})},this._Ot=()=>{this.oOt=Fe.Og(),this.iOt("latencyrecoveryseek",{when:this.rOt?"playback":"after-pause"})},this.vOt=t=>{this.GOt||(this.GOt=!0,this.WOt=ja(),this.iOt("stallstart",{when:this.rOt?"playback":"after-pause"})),this.Na("stall")},this.wOt=t=>{if(this.GOt){this.GOt=!1;const t=(ja()-this.WOt)/1e3;this.iOt("stallend",{stallDuration:t})}},this.mOt=Gn((t=>{var i,e;this.iOt("dimensionchange",{width:t.width,height:t.height}),this.Na(null!=(e=null==(i=this.Ea)?void 0:i.state)?e:"loading")}),1e3),this.bOt=t=>{this.iOt("aderror",null==t?void 0:t.message)},this.AOt=t=>{switch(t.type){case"Trt":this.iOt("adbreakbegin");break;case"Mrt":this.iOt("adbreakend");break;case"Srt":this.iOt("adbegin");break;case"Nrt":this.iOt("adend");break;case"pOt":this.iOt("adskip")}},this.iOt=(t,i)=>{this.LOt.push({sequenceNumber:this.ZOt++,currentTime:ja()/1e3,type:t,extra:i})},this.ta=t,this.aOt=i,this.Fjt=e}};r(),r();var $H=function(t){return t.STARTING="s",t.PLAYING="p",t.SEEKING="k",t.REBUFFERING="r",t.PAUSED="a",t.ENDED="e",t.QUIT="q",t}({}),tX=function(t){return t.MANIFEST="m",t.AUDIO="a",t.VIDEO="v",t.OTHER="o",t}({});function Ta(t){return 100*x.round(t/100)}function iX(t){const i=t.LE(),e=t.SE();for(let t=0;t<e.length;t++)if(e.start(t)<=i&&i<=e.end(t))return 1e3*(e.end(t)-i);return 0}function eX(t){return dl(t.Ix,(t=>t.Rt))}function sX(t){return t.Zx.Ex(0)}function nX(t){return t.Zx.Ex(t.Zx.V-1)}r(),r();var rX=class t{static starting(i,e,s){return new t($H.STARTING,i,e,s)}static playing(i){return new t($H.PLAYING,i)}static seeking(i,e){return new t($H.SEEKING,i,e)}static rebuffering(i,e){return new t($H.REBUFFERING,i,e)}static paused(i){return new t($H.PAUSED,i)}static ended(i){return new t($H.ENDED,i)}static quit(i){return new t($H.QUIT,i)}get ct(){return Date.now()-this.XOt}qOt(){const t=this.ta.wZ.NK.FY,i=this.ta.Ek.Az,e=iX(this.ta);t>0&&void 0!==e&&void 0!==i&&(this.KOt+=1,this.JOt=this.$Ot(this.JOt,e),this.tRt=this.$Ot(this.tRt,1e3*this.ta.Ek.md.targetOffset),this.mV=this.$Ot(this.mV,1e3*i),this.iRt=this.$Ot(this.iRt,t/1e3))}$Ot(t,i){return t+(i-t)/this.KOt}bL(){const t={sta:this.Zp,ts:this.XOt,"theo-vt":this.eRt,"theo-at":this.sRt,"theo-d":this.ct,"theo-r":this.__};return this.KOt>0?Ei({},t,{bl:Ta(this.JOt),tbl:Ta(this.tRt),ltc:Ta(this.mV),mtp:Ta(this.iRt),"theo-w":this.KOt}):t}nRt(){return new t(this.Zp,this.ta,this.__)}constructor(t,i,e,s){var n,r,o,h;this.XOt=Date.now(),this.JOt=0,this.tRt=0,this.mV=0,this.iRt=0,this.KOt=0,this.Zp=t,this.ta=i,this.eRt=null==(r=eX(this.ta.rt))||null==(n=r.Vx)?void 0:n.o,this.sRt=null==(h=eX(this.ta.ht))||null==(o=h.Vx)?void 0:o.o,this.__=e,this.dV=s}};Qi();var oX=class{rRt(){var t;const i=this.ta.Ek.Az,e=iX(this.ta),s=this.ta.wZ.NK.FY;return hX({bl:e?Ta(e):void 0,tbl:Ta(1e3*this.ta.Ek.md.targetOffset),ltc:i?Ta(i):void 0,mtp:s?Ta(s/1e3):void 0,sta:null==(t=this.oRt)?void 0:t.Zp,su:!this._jt||void 0,"theo-sq":this.aOt.sequenceNumber})}hRt(t){var i,e;const s=function(t,i){switch(i){case tX.VIDEO:return eX(t.rt);case tX.AUDIO:return eX(t.ht)}}(this.ta,t);return hX({br:(null==s||null==(i=s.Vx)?void 0:i.FY)?Ta((null==s||null==(e=s.Vx)?void 0:e.FY)/1e3):void 0,ot:t,tb:s?Ta(nX(s).FY/1e3):void 0,lb:s?Ta(sX(s).FY/1e3):void 0})}aRt(){return hX({"theo-cw":this.ta.we.clientWidth,"theo-ch":this.ta.we.clientHeight})}uRt(){var t;return hX({sf:"e",sid:this.aOt.id,st:"l",v:2,"theo-eid":null==(t=this.aOt.externalId)?void 0:t.substring(0,128),"theo-cn":this.nOt.name.substring(0,128),"theo-v":"8.13.1","theo-t":"web","theo-u":this.aOt.userId})}cRt(){const t={"CMCD-States":btoa(JSON.stringify(this.lRt))};return this.lRt=[],t}dRt(t){this.oRt&&this.lRt.push(this.oRt.bL()),this.oRt=t}destroy(){this.fRt(),s.removeEventListener("beforeunload",this.fRt),this.ta.fn(E.oP,this.vz),this.ta.fn(E.rP,this._z),this.ta.fn(Zi.wb,this.gRt),this.ta.UE.fn("latencyrecoveryseek",this._Rt),this.ta.UE.fn("golive",this.vRt),this.ta.rt.fn(bs.Hk,this.rV),this.ta.ht.fn(bs.Hk,this.rV),this.ta.rt.Ix.forEach((t=>t.fn(yo.Mx,this.Jr))),this.ta.ht.Ix.forEach((t=>t.fn(yo.Mx,this.Jr))),this.ta.Wnt.removeEventListener("intenttofallback",this.wRt),this.ta.Wnt.removeEventListener("publicationloadstart",this.mRt),this.ta.Wnt.removeEventListener("publicationoffline",this.pRt),this.ta.wZ.AK(this.ARt),Fe.fA(this.yRt)}constructor(t,i,e){this.lRt=[],this._jt=!1,this.gZ=!1,this.wRt=()=>{var t;this.dRt(rX.starting(this.ta,"fallback",null==(t=this.ta.BE())?void 0:t.message))},this.mRt=()=>{this.dRt(rX.starting(this.ta,"loadChannel"))},this.pRt=()=>{this.dRt(rX.ended(this.ta))},this.rV=t=>{t.Ht.yn(yo.Mx,this.Jr)},this.Jr=()=>{var t,i,e,s;const n=null==(i=eX(this.ta.rt))||null==(t=i.Vx)?void 0:t.o,r=null==(s=eX(this.ta.ht))||null==(e=s.Vx)?void 0:e.o;n&&r&&(this.oRt&&this.oRt.Zp===$H.PLAYING&&this.oRt.eRt===n&&this.oRt.sRt===r||this.dRt(rX.playing(this.ta)))},this.vz=()=>{this._jt=!0,this.gZ=!1,this.dRt(rX.playing(this.ta))},this._Rt=()=>{this._jt&&!this.gZ&&(this.gZ=!0,this.dRt(rX.seeking(this.ta,"latencyRecovery")))},this.vRt=()=>{this._jt&&!this.gZ&&(this.gZ=!0,this.dRt(rX.seeking(this.ta,"goLive")))},this._z=()=>{this.ta.wk||this.dRt(rX.rebuffering(this.ta,"visible"===h.visibilityState?void 0:"invisible"))},this.gRt=()=>{this.dRt(rX.paused(this.ta))},this.ARt=t=>{const i=Fe.Ah(t.url),e=function(t){const{pathname:i}=t;if(rl(i,"manifest.json"))return tX.MANIFEST;if(_t(i,"/video/"))return tX.VIDEO;if(_t(i,"/audio/"))return tX.AUDIO;return tX.OTHER}(i);if("o"===e)return;this.aOt.incrementSequenceNumber();let s=Ei({},t.headers,{"CMCD-Request":this.rRt(),"CMCD-Object":this.hRt(e),"CMCD-Status":this.aRt(),"CMCD-Session":this.uRt()});e===tX.VIDEO&&rl(i.pathname,".hspc")&&this.oRt&&(this.dRt(this.oRt.nRt()),s=Ei({},s,this.cRt())),t.redirect(Ei({},t,{headers:s}))},this.fRt=()=>{this.oRt&&(this.lRt.push(this.oRt.bL()),this.oRt=void 0),this.lRt.push(rX.quit(this.ta).bL()),V(this.ta.wE.hI({zu:this.bRt,aI:this.cRt(),FI:!0}))},this.ta=t,this.nOt=i,this.aOt=e,this.bRt=Fe.Ah("bye",i.source.src).href,s.addEventListener("beforeunload",this.fRt),this.ta.yn(E.oP,this.vz),this.ta.yn(E.rP,this._z),this.ta.yn(Zi.wb,this.gRt),this.ta.UE.yn("latencyrecoveryseek",this._Rt),this.ta.UE.yn("golive",this.vRt),this.ta.wZ.wK(this.ARt),this.ta.rt.yn(bs.Hk,this.rV),this.ta.ht.yn(bs.Hk,this.rV),this.ta.Wnt.addEventListener("intenttofallback",this.wRt),this.ta.Wnt.addEventListener("publicationloadstart",this.mRt),this.ta.Wnt.addEventListener("publicationoffline",this.pRt),this.oRt=rX.starting(this.ta,"loadchannel"),this.yRt=Fe.dA((()=>{var t;null==(t=this.oRt)||t.qOt()}),1e3)}};function hX(t){return _.keys(t).map((i=>function(t,i){switch(typeof i){case"boolean":return i?t:t+"=false";case"number":return t+"="+i;case"string":return t+'="'+i+'"';default:return}}(i,t[i]))).filter(Boolean).sort().join(",")}r();var aX=class extends Jr{constructor(t){super("publicationloadstart"),this.publicationId=t}},uX=class extends Jr{constructor(t){super("publicationoffline"),this.publicationId=t}},cX=class extends Jr{constructor(t,i){super("publicationloaded"),this.publicationId=t,this.channelName=i}},lX=class extends Jr{constructor(){super("intenttofallback")}},dX=class extends Jr{constructor(){super("enterbadnetworkmode")}},fX=class extends Jr{constructor(){super("exitbadnetworkmode")}},gX=class extends tu{get ga(){return this.Za||(this.Za=function(t){return{addEventListener(i,e){t.yn(i,e)},removeEventListener(i,e){t.fn(i,e)},get badNetworkMode(){return t.MRt},set badNetworkMode(i){t.MRt=i},preloadPublications:async i=>(await t.TRt(i)).map((t=>({name:t.name})))}}(this)),this.Za}get MRt(){return this.ta.MRt}set MRt(t){this.ta.MRt=t}TRt(t){return this.ta.TRt(t)}constructor(t){super(),this.ta=t}};ld(),Qi();var _X=["https://theo-insights-prod-5cb0.ew.r.appspot.com/"],vX=8e5,wX=class extends Xt{SRt(){this.ta.UE.yn("latencyrecoveryseek",this._Rt),this.ta.rt.yn(bs.Hk,this.rV)}NRt(){this.ta.UE.fn("latencyrecoveryseek",this._Rt),this.ta.rt.fn(bs.Hk,this.rV)}Gk(t){return this.qCt?t.type===E.oP?(void 0!==this.IRt?(Fe.Rg(this.IRt),this.IRt=void 0,this._jt||this.yo(new te(this.LE()))):this.yo(new te(this.LE())),this._jt=!0,!0):t.type===E.rP?(this.IRt||(this.IRt=Fe.Pg((()=>{this.yo(new Ai(this.LE())),this.IRt=void 0}),100)),!0):"error"===t.type?(this.DRt.zk(),V(this.ERt()),!0):super.Gk(t):super.Gk(t)}Znt(){return this.kRt.ga}get MRt(){return this.xRt}set MRt(t){this.qCt&&(t?this.LRt():this.CRt())}LRt(){if(this.xRt)return;if(this.xRt=!0,this.kRt.yo(new dX),0===this.ta.rt.V)return;const t=this.rt.Ex(0),i=rw(t.Zx.Ix,(t=>t.FY));var e;(null!=(e=i.Xyt)?e:i.FY)<vX?(t.Hx=[i],Promise.resolve().then((()=>t.Hx=t.Zx.Ix.slice()))):this.CRt()}CRt(){if(!this.xRt)return;if(this.xRt=!1,this.kRt.yo(new fX),0===this.ta.rt.V)return;const t=this.ta.rt.Ex(0);var i;const e=mX(null!=(i=t.Hx)?i:t.Zx.Ix);t.Hx=e.length>0?e:mX(t.Zx.Ix)}TRt(t){return Promise.all(t.map((async t=>{const i=this.jRt.Bmt(XH(t,this.ORt.discoveryUrl));return await Ao(i.uet,this.rN.ly)})))}addSseEndpointToSource(t){var i;if(t&&(null==(i=this.wc)?void 0:i.ads))for(const i of this.wc.ads){var e;if("theoads"===i.integration)null!=(e=i).sseEndpoint||(e.sseEndpoint=t)}}async ka(t,i){var e;this.qCt=!1;for(const s of null!=(e=null==t?void 0:t.sources)?e:[]){if(Vc(s)&&s.type===Oe.fL){if(void 0===s.src)continue;this.SRt(),this.qCt=!0,this.kRt.yo(new aX(s.src));const e=XH(s.src,this.ORt.discoveryUrl),n=this.kRt.zy("publicationloaded");try{this.wc=t,this.AG=s,this.RRt=this.jRt.Bmt(e);const n=await this.RRt.uet;this.addSseEndpointToSource(n.sseEndpoint),this.DRt.eOt(n);const{enhancedLogging:r}=n;(null==r?void 0:r.enabled)&&x.random()<=r.percentage&&this.ta.wZ.wK(this.PRt),this.ORt.analyticsEnabled&&"theo.live"===n.source.type&&(this.zRt=new oX(this,n,this.aOt)),await Ao(this.BRt(this.ta.Xz),i)}catch(t){throw this.k8(),this.dispatchErrorEvent(t),t}return void await Ao(n,i).catch(X)}if("web"===rn.Ed&&(null==t?void 0:t.contentProtection)&&(!Vc(s)||s.type!==Oe.lL)){const t=new qi(vt.CONFIGURATION_ERROR,"Content protection is not supported for this source type");throw this.dispatchErrorEvent(t),t}}return await super.ka(t,i)}async BRt(t){if(this.k8(),!this.RRt)return;const{source:i}=await this.RRt.uet,e=await this.URt(i);if("live"===e)if("primary"===this.QRt)try{await this.FRt(t)}catch(i){await this.YRt(t)}else await this.YRt(t);else if("offline"===e)await this.pRt();else try{await this.FRt(t)}catch(t){await this.pRt()}}async URt(t){try{const i=await this.ta.wE.hI({zu:t.src});return i.nI>=200&&i.nI<300?"live":404===i.nI||503===i.nI?"offline":"error"}catch(t){return"error"}}async YRt(t){if(!this.RRt)return;const i=await this.RRt.uet;this.QRt="primary",this.z$(i.source,t)}async pRt(){if(!this.RRt)return;const t=await this.RRt.uet;this.kRt.yo(new uX(t.id.id)),this.VRt=Fe.Pg((()=>this.BRt(this.ta.Xz)),15e3)}z$(t,i){var e,s,n;const r=this.RRt.aS.id;var o;this.DRt.Cn();const h=Hc({sources:[{type:pX(t.type),src:t.src,contentProtection:t.contentProtection,useManagedMediaSource:!0,latencyConfiguration:null!=(o=null==(e=this.AG)?void 0:e.latencyConfiguration)?o:AX(t.targetLatency)},t.hlsSrc?{type:"application/x-mpegurl",src:t.hlsSrc}:void 0].filter($t),ads:this._jt?[]:null==(s=this.wc)?void 0:s.ads,blockContentIfAdError:null==(n=this.wc)?void 0:n.blockContentIfAdError,streamType:"live"});h.sources[0].bypassLicense=!0,this.ta.ka(h,(new Wt).ly).then((()=>{i&&this.ta.Pk()})).catch(this.dispatchErrorEvent),this.RRt.uet.then((t=>{this.kRt.yo(new cX(r,t.name))}))}async FRt(t){if(this.DRt.ROt(),this.kRt.yo(new lX),!await this.GRt())throw new b("fallback not live");await this.WRt(t)}async WRt(t){var i;const e=await(null==(i=this.RRt)?void 0:i.uet);(null==e?void 0:e.fallback)&&(this.DRt.POt(),this.QRt="fallback",this.z$(e.fallback,t))}async GRt(){var t,i;const e=await(null==(t=this.RRt)?void 0:t.uet);if(!(null==(i=this.ORt)?void 0:i.fallbackEnabled)||!(null==e?void 0:e.fallback))return!1;const s=await this.ta.wE.hI({zu:e.fallback.src});return s.nI>=200&&s.nI<300}dispatchErrorEvent(t){if(t instanceof qi)return this.yo(new Uc(t));this.yo(new Uc(new qi(vt.THEO_LIVE_UNKNOWN_ERROR,t.message,t)))}async k8(){await this.ta.zk(),void 0!==this.VRt&&(Fe.Rg(this.VRt),this.VRt=void 0)}zk(){var t;return this.rN.Ty(),this.rN=new Wt,this.NRt(),void 0!==this.IRt&&(Fe.Rg(this.IRt),this.IRt=void 0),this.qCt=!1,this._jt=!1,this.DRt.zk(),null==(t=this.zRt)||t.destroy(),this.zRt=void 0,this.wc=void 0,this.AG=void 0,this.RRt=void 0,this.QRt=void 0,this.ZRt=[],this.ta.wZ.AK(this.PRt),this.xRt&&this.CRt(),super.zk()}async gn(t){var i;this.rN.Ty(),void 0!==this.IRt&&(Fe.Rg(this.IRt),this.IRt=void 0),this.Bo(),this.NRt(),null==(i=this.zRt)||i.destroy(),this.ta.UE.fn("latencyrecoveryseek",this._Rt),await super.gn(t)}constructor(t,i){var e,s;super(t,i),this.qCt=!1,this.rN=new Wt,this.IRt=void 0,this._jt=!1,this.ZRt=[],this.xRt=!1,this.rV=t=>{const i=t.Ht;var e;i.yn(yo.Mx,this.Jr);const s=mX(null!=(e=i.Hx)?e:i.Zx.Ix);i.Hx=s.length>0?s:mX(i.Zx.Ix)},this.Jr=t=>{const i=t.Wut;var e;(!i||(null!=(e=i.Xyt)?e:i.FY)>=vX)&&this.CRt()},this._Rt=async()=>{this.LRt(),this.ZRt.push(Fe.Og()),this.ZRt=this.ZRt.filter((t=>Fe.Og()-t<=3e5)),this.ZRt.length>=3&&(this.ZRt=[],await this.BRt(!0))},this.ERt=async()=>{if(this.RRt){if("demo"===(await this.RRt.uet).mode){this.RRt.Yn();if("playing"!==(await this.RRt.uet).status)return void this.yo(new Uc(new qi(vt.THEO_LIVE_END_OF_DEMO,"This demo channel has been stopped automatically after 5 minutes")))}await this.BRt(!0)}},this.PRt=t=>{if("manifest"===t.type||"segment"===t.type||""===t.type){const i=Fe.Ah(t.url);i.searchParams.append("enhancedLogging","true"),t.redirect({url:i.toString()})}},this.kRt=new gX(this);const n=t.md.theoLive;var r,o,h,a;this.ORt={sessionId:null!=(r=null==n?void 0:n.sessionId)?r:Ox(),userId:null!=(o=null==n?void 0:n.userId)?o:UH(),externalSessionId:null==n?void 0:n.externalSessionId,analyticsEnabled:!1!==(null==n?void 0:n.analyticsEnabled),fallbackEnabled:!1!==(null==n?void 0:n.fallbackEnabled),discoveryUrl:null!=(h=null==n?void 0:n.discoveryUrl)?h:"https://discovery.theo.live/channels/",analyticsUrls:null!=(a=null==n?void 0:n.analyticsUrls)?a:_X},this.aOt=new BH(null==(e=this.ORt)?void 0:e.externalSessionId),this.DRt=new JH(this,this.aOt,this.ORt),this.jRt=new QH(t.wE,{discoveryHeader:null==(s=this.ORt)?void 0:s.discoveryHeader}),this.ta.UE.yn("latencyrecoveryseek",this._Rt)}};function mX(t){return t.filter((t=>{var i;return(null!=(i=t.Xyt)?i:t.FY)>=vX}))}function pX(t){switch(t){case"theo.live":return"application/vnd.theo.hesp+json";case"hls":return"application/x-mpegurl";case"dash":return"application/dash+xml";default:throw new b("Unknown source type: "+t)}}function AX(t){return void 0===t?kZ():{minimumOffset:t-VT,targetOffset:t,maximumOffset:t+VT,forceSeekOffset:t+2.5,minimumPlaybackRate:We,maximumPlaybackRate:ee}}Mr((t=>new wX(t)),F.nu),r(),r(),r();var yX=ud(wd());Qi(),r(),r(),r();var bX=class extends tu{get Om(){return this.HRt}Yn(t,i){this.gT=t,this.HRt=i,this.Za&&this.yo(new hV(this.Za))}get ga(){var t;return null!=(t=this.Za)?t:this.Za=this.ma()}get o(){return this.gT.id}get Gx(){return this.iB}get FY(){return this.gT.bitrate}get Xyt(){}get dht(){return""}get kh(){return""}get $yt(){return""}get fot(){return!0}get qyt(){}EQ(){throw new b("Method not implemented.")}kQ(){throw new b("Method not implemented.")}gn(){this.Bo()}constructor(t,i){super(),this.iB=VS(),this.Za=void 0,this.gT=t,this.HRt=i}},MX=class extends bX{ma(){return rV(this)}get Igt(){return 0}get ji(){return this.gT.targetWidth}get Ti(){return this.gT.targetHeight}get Kyt(){return 0}constructor(t,i){super(t,i)}};r();var TX=class extends tu{get Rt(){return!0}set Rt(t){}get ga(){var t;return null!=(t=this.Za)?t:this.Za=oo(this)}nB(t){this.Rt=t}get agt(){}get Lt(){return this.v6}get o(){return this.aS||"millitrack"}get Gx(){return this.iB}get kh(){return""}get gs(){return""}get UI(){return this.Rt?"enabled":"disabled"}set UI(t){this.nB("enabled"===t)}get Vx(){}get Zx(){return this.qz}get Hx(){return this.XRt}set Hx(t){if(this.XRt=t,this.Rt){const i=1===(null==t?void 0:t.length)?t[0].Om:void 0;this.qRt(i)}this.yo(new th(this.qz.Ix.slice(),this)),((null==t?void 0:t.length)||this.qz.V)&&this.yo(new sY((null==t?void 0:t[0])||this.qz.Ex(0)))}get Wx(){}gn(){this.Bo();for(const t of this.qz.Ix)t.gn();this.qz.tr()}constructor(t,i){super(),this.iB=ft(),this.qz=new ki,this.aS=t,this.v6=i}},SX=class extends TX{Yn(t){for(const i of t.active){const e=dl(t.layers,(t=>t.encodingId===i.id)),s=dl(this.qz.Ix,(t=>t.o===i.id));s?s.Yn(i,e):this.qz.Kz(new MX(i,e))}this.yo(new xu(this))}get YA(){return Ri.NI}qRt(t){var i;null==(i=this.KRt)||i.JRt(t)}gn(){this.KRt=void 0,super.gn()}constructor(t,i,e){super(t,i),this.KRt=e}};ds(),r();var NX=class{Yn(t){this.$Rt=t}get FY(){var t,i,e,s,n;var r;return(null!=(n=null==(i=this.$Rt)||null==(t=i.video.inbounds)?void 0:t.reduce(((t,i)=>t+i.bitrateBitsPerSecond),0))?n:0)+(null!=(r=null==(s=this.$Rt)||null==(e=s.audio.inbounds)?void 0:e.reduce(((t,i)=>t+i.bitrateBitsPerSecond),0))?r:0)}get YY(){var t,i;return null!=(i=null==(t=this.$Rt)?void 0:t.currentRoundTripTime)?i:0}VY(t){}};r(),r();var IX=class extends bX{ma(){return oV(this)}get XAt(){return this.tPt}constructor(t,i){super(t,i),this.tPt=0}},DX=class extends TX{Yn(t){for(const i of t.active){const e=dl(t.layers,(t=>t.encodingId===i.id)),s=dl(this.qz.Ix,(t=>t.o===i.id));s?s.Yn(i,e):this.qz.Kz(new IX(i,e))}this.yo(new xu(this))}get YA(){return Ri.SI}qRt(t){var i;null==(i=this.KRt)||i.iPt(t)}gn(){this.KRt=void 0,super.gn()}constructor(t,i,e){super(t,i),this.KRt=e}};r();var EX=class extends dN{ma(){return function(t){return fe(Ft(t),{get mid(){return t._Q.mid},get uuid(){return t._Q.uuid},get timecode(){return t._Q.timecode},get unregistered(){return t._Q.unregistered}})}(this)}constructor(t,i){super(t,t,void 0,!1),this._Q=i}};var kX=[Zi.so,Zi.wb,E.oP,Zi.Eb,Zi.mb,Zi.ub,Zi.Mb,Zi.bb,Zi.qy,Zi.pb,Zi.kb,Zi.Zy,Zi.yb,Zi.Vy,Zi.Yy,Zi.$y,Zi.Ky],xX=["active","inactive","stopped","vad","layers","migrate","viewercount"],LX=class extends tu{JRt(t){var i;null==(i=this.R_)||i.select(t).catch(this.wAt)}iPt(t){var i;null==(i=this.R_)||i.select(t).catch(this.wAt)}get Lk(){return!1}jk(){return this.cz.jk()}get ht(){return this.Oz}get TE(){return this.cz.TE.ks()}get NE(){return this.cz.NE}set NE(t){}get bt(){return this.wc}get xE(){return this.cz.xE}set xE(t){this.CE(t)}CE(t,i){}get ct(){return this.cz.ct}get OE(){return this.cz.OE}get lt(){return this.dV}get zE(){return this.fV}get UE(){}get FE(){return this.cz.FE}get VE(){var t,i;const e=this.ePt,s=null==e||null==(t=e.video.inbounds)?void 0:t[0],n=null==e||null==(i=e.audio.inbounds)?void 0:i[0];var r,o,h,a;return{Fz:this.UG.NK.FY,Bz:null!=(r=null==s?void 0:s.framesDropped)?r:0,Uz:0,Qz:null!=(o=null==s?void 0:s.framesReceived)?o:0,Yz:(null!=(h=null==s?void 0:s.totalBytesReceived)?h:0)+(null!=(a=null==n?void 0:n.totalBytesReceived)?a:0),Vz:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}}}get WE(){return this.cz.WE}set WE(t){this.cz.WE=t}get XE(){var t,i;return null!=(i=null==(t=this.R_)?void 0:t.isActive())&&i}get KE(){return this.cz.KE}get $E(){return 1}set $E(t){}get rk(){return this.cz.rk.ks()}get ck(){return Nr.pG}set ck(t){}get fk(){return this.cz.fk}get _k(){return this.cz._k.ks()}get wk(){return this.cz.wk}get wV(){return this.cz.wV}get nt(){return this.cz.nt}get yk(){return this.cz.yk}get rt(){return this.Pz}get Tk(){return this.cz.Tk}get Nk(){return this.cz.Nk}set Nk(t){this.cz.Nk=t}get Ek(){return this.QG}get pV(){return this.AV}get Az(){return this.QG.Az}ge(){this.cz.ge()}be(){this.cz.be()}async Pk(){this.$n(),await this.cz.Pk()}Rk(){this.cz.Rk()}async tr(){var t;this.wc=void 0,this.rN.Ty(),null==(t=this.R_)||t.stop(),this.R_=void 0,this.Cpt&&(await this.Cpt.catch(ya),this.Cpt=void 0),this.sPt=void 0,await this.cz.tr(),this.nPt=void 0,this.rPt=0,this.cz.jV();for(const t of this.Pz.Ix)t.gn();this.Oz.tr(),this.Pz.tr()}async gn(){this.Bo(),await this.tr(),this.Oz.gn(),this.Pz.gn(),this.OV.gn(),this.cz.fn(kX,this.Ds),this.cz.fn(Me.ua,this.Ss),await this.BG.BV(this.cz)}async ka(t,i,e){yi(e),this.aDt();const s=t;this.wc=s,this.rN=new Wt,s.apiUrl&&yX.Director.setEndpoint(s.apiUrl);this.R_=new yX.View(void 0,(()=>yX.Director.getSubscriber({streamName:s.src,streamAccountId:s.streamAccountId,subscriberToken:s.subscriberToken})),void 0,!0),this.oPt=Ei({},s.connectOptions,{events:xX}),this.hPt()}$n(){if(void 0!==this.Cpt)return;const t=this.R_;void 0!==t&&(this.Cpt=this.oD(t,this.oPt,this.rN.ly).catch(this.wAt))}async oD(t,i,e){yi(e);try{await Ao(t.connect(i),e),t.webRTCPeer.initStats({autoInitStats:!0,statsIntervalMs:1e3})}catch(i){X(i),Fe.uA("[THEOplayer] Millicast connect error, reconnecting.",i),await Ao(t.reconnect(),e)}}async aPt(t,i){yi(i);try{this.cz.xtt(),this.sPt=t,await this.cz.tr(),await this.cz.$n({YA:uh.QQ,$x:"",G$:t,VN:Oe.dL,yV:[]})}finally{this.cz.Ltt()}}hPt(){var t;const i=this.R_;i.on("track",(t=>this.uPt(t))),i.on("broadcastEvent",(t=>this.cPt(t))),i.webRTCPeer.on("stats",(t=>{this.ePt=t,this.AV.Yn(t)})),(null==(t=this.oPt)?void 0:t.metadata)&&i.on("metadata",(t=>this.lPt(t)))}uPt(t){const i=this.Oz.V>0,e=this.Pz.V>0,s=i&&!e;if(e&&t.track.kind===Ri.NI||s&&t.track.kind===Ri.SI){const i=t.streams[0];if(s){const t=i.getVideoTracks().slice();for(const e of t)i.removeTrack(e)}this.aPt(i,this.rN.ly).catch(this.wAt)}}cPt(t){switch(t.name){case"active":{this.yo(new WG);const i=t.data;for(const t of i.tracks)t.media===Ri.NI?this.Pz.tt(new SX(t.trackId,this.Pz.V?Dr.ZLt:Dr.HLt,this)):t.media===Ri.SI&&this.Oz.tt(new DX(t.trackId,this.Oz.V?Rr.ZLt:Rr.HLt,this));break}case"inactive":this.yo(new wl),this.Pz.tr(),this.Oz.tr();break;case"stopped":this.yo(new wl);break;case"viewercount":default:break;case"layers":{const i=t.data;if(0===this.Pz.V){const t=new SX("",Dr.HLt,this);t.Yn(i.medias[0]),this.Pz.tt(t)}else{const t=dl(this.Pz.Ix,(t=>t.Lt===Dr.HLt));null==t||t.Yn(i.medias[0])}break}}}lPt(t){let i=this.nPt;void 0===i&&(i=this.cz.Wk(z.MQ,void 0,void 0,void 0,void 0,El.MILLICAST),i.UI=lc.Xx,this.nPt=i);const e=this.xE,s=x.max(0,e-10);this.rPt<s&&(JI(i,s),this.rPt=s);const n=new EX(e+.001,t);i.RQ(n)}eG(t){this.dV||(V(this.tr()),this.dV=la(t),this.fV=t,this.yo(new Uc(t)))}aDt(){this.dV=void 0,this.fV=void 0}Bk(){return!1}Uk(){}Qk(){}Fk(){this.cz.Fk()}Yk(){const t=this.sPt;void 0!==t&&this.aPt(t,this.rN.ly).catch(this.wAt)}Ck(){return this.cz.wa}_a(){return this.cz.LV}Wk(t){return this.cz.CV(t)}constructor(t,i,e){super(),this.BG=t,this.UG=i,this.QG=e,this.rN=new Wt,this.Cpt=void 0,this.sPt=void 0,this.Pz=new pe,this.Oz=new pe,this.rPt=0,this.AV=new NX,this.Ss=t=>{this.eG(ju(t.lt))},this.wAt=t=>{Tu(t)||this.eG(new qi(vt.MEDIA_DECODE_ERROR,t.message,t))},this.cz=this.BG.sG(Ri.NI),this.OV=new uo(this.cz,!0),this.cz.yn(kX,this.Ds),this.cz.yn(Me.ua,this.Ss),this.OV.yn(QT,this.Ds)}};ko(new class{get hG(){return pt.dL}bL(t,i,e,s,n,r,o,h){return new LX(i,n,r)}nG(t,i){return t.type===Oe.dL}async rG(t){let i=await mu(t);return i&&(i=Boolean(t.widevine||t.fairplay)),i&&!1}oG(){return!1}}),r(),r(),r(),r();var rs=function(t){return t.dPt="currentbufferingrenditionchange",t.fPt="gPt",t._Pt="vPt",t.wPt="mPt",t}({});r(),r();var CX=class{constructor(t,i){var e,s;this.dht=void 0,this.Gx=VS(),this.pPt=i,this.YA=t.YA,this.APt=t.APt,this.yPt=t.yPt,this.bPt=t.bPt,this.l=t.l,this.gs=t.gs,this.MPt=t.MPt,this.TPt=t.TPt,this.SPt=void 0===t.$yt,this.NPt=null!=(s=null==(e=t.NPt)?void 0:e.split(","))?s:[]}};function jX(t,i){return t.YA===i.YA&&(t.l===i.l||!(!t.APt||!i.APt))}function OX(t,i){return void 0!==t&&void 0!==i&&RX(t,i)}function RX(t,i){return t.pPt===i.pPt}function PX(t,i){return RX(t,i)&&t.MPt===i.MPt}function zX(t,i){for(const e of t)if(PX(e,i))return!0;return!1}Qi();var BX=class extends tu{get Wx(){return this.IPt}get Rt(){const t=this.DPt();if(!t)return!1;for(const i of this.Zx.Ix)if(i.EPt===t)return!0;return!1}set Rt(t){if(t!==this.Rt)if(t){var i;let t=null==(i=this.Zx.Ex(0))?void 0:i.EPt;const e=this.ta.kPt;for(const i of this.Zx.Ix)if(i.xPt===e){t=i.EPt;break}this.LPt(t)}else this.LPt(void 0)}get Vx(){if(!this.Rt)return;const t=this.ta.CPt;for(const i of this.Zx.Ix)if(zX(t,i.EPt))return i}get ga(){return this.Za||(this.Za=oo(this)),this.Za}get o(){return this.iB.toString()}get Gx(){return this.iB}get kh(){return this.eB}set kh(t){t!==this.eB&&(this.eB=t,this.yo(new xu(this)))}get gs(){return this.$M}get UI(){return this.Rt?"enabled":"disabled"}get Hx(){return this.Mdt}set Hx(t){let i=[];if(t){i=t.filter((t=>{const i=this.Vx?LQ(this.Vx):void 0;return Fe.Ys.Pp(i,LQ(t))})).filter((i=>this.Zx.Jz(t)&&i.fot))}else i=this.Zx.Ix.filter((t=>t.fot));if(0!==i.length){if(!(t===this.Mdt||this.Mdt&&ew(this.Mdt,i))){if(this.Mdt=t?i:void 0,this.ta.jPt(i.map((t=>t.xPt))),1===i.length){const t=i[0].xPt,e=this.Zp===Ri.NI,s=this.UG.$K;V(this.ta.OPt(t,{RPt:!0,PPt:s&&e,zPt:s&&!e}))}this.yo(new th(i,this))}}else this.yo(new xQ)}nB(t){this.Rt=t}gn(){this.Bo(),this.ta.fn(rs.dPt,this.BPt),this.ta.fn(rs.fPt,this.UPt);for(const t of this.Zx.Ix)t.gn();this.Zx.tr()}constructor(t,i,e,s,n){var r;super(),this.Zp=t,this.ta=i,this.UG=e,this.fh=s,this.Zx=n,this.Mdt=void 0,this.QPt=void 0,this.FPt=()=>this.yo(new xu(this)),this.BPt=()=>{const t=this.Vx;t&&this.QPt!==t&&(this.QPt=t,this.yo(new sY(t)))},this.UPt=()=>{const t=this.Rt;this.YPt!==t&&(this.YPt=t,this.fh.yo(new su(this)),this.yo(new su(this)))},this.QPt=this.Vx,this.YPt=this.Rt;const o=n.Ex(0);var h,a;this.eB=null!=(h=null==o?void 0:o.EPt.l)?h:"",this.$M=null!=(a=null==o?void 0:o.EPt.gs)?a:"",this.IPt=null==o||null==(r=o.EPt)?void 0:r.NPt.map(GX).filter($t),this.iB=ft(),this.ta.yn(rs.dPt,this.BPt),this.ta.yn(rs.fPt,this.UPt);for(let t=0;t<this.Zx.V;t++){this.Zx.Ex(t).yn("update",this.FPt)}}},UX=class extends BX{get Lt(){return Rr.HLt}DPt(){return this.ta.VPt}LPt(t){V(this.ta.GPt(t))}constructor(t,i,e,s){super(Ri.SI,t,i,e,s)}},QX=class extends BX{get Lt(){return Dr.HLt}DPt(){return this.ta.WPt}LPt(t){V(this.ta.ZPt(t))}constructor(t,i,e,s){super(Ri.NI,t,i,e,s)}},FX=class extends tu{get o(){return String(this.xPt.o)}get Gx(){return this.xPt.o}get FY(){return this.xPt.FY}get Xyt(){return this.xPt.Xyt}get kh(){var t;return null!=(t=this.eB)?t:this.EPt.l}set kh(t){this.kh!==t&&(this.eB=t,this.yo(new hV(this.ga)))}get $yt(){return this.EPt.pPt.HPt()}get qyt(){return this.xPt.qyt}kQ(){}EQ(){}gn(){this.Bo()}constructor(t,i){super(),this.xPt=t,this.EPt=i,this.eB="",this.fot=!0}},YX=class extends FX{get XAt(){return 0}get dht(){var t;return(null==(t=this.xPt.dht)?void 0:t.TLt)||""}get ga(){return this.Za||(this.Za=this.ma()),this.Za}ma(){return oV(this)}constructor(t,i){super(t,i),this.Za=void 0}},VX=class extends FX{get dht(){var t;return(null==(t=this.xPt.dht)?void 0:t.NLt)||""}get Kyt(){return this.XPt}set Kyt(t){this.XPt!==t&&(this.XPt=t,this.yo(new hV(this.ga)))}get Igt(){var t,i;return null!=(i=null!=(t=this.fLt)?t:this.xPt.Igt)?i:0}set Igt(t){this.Igt!==t&&(this.fLt=t,this.yo(new hV(this.ga)))}get Ti(){var t,i;return null!=(i=null==(t=this.xPt.gLt)?void 0:t.Ti)?i:0}get ji(){var t,i;return null!=(i=null==(t=this.xPt.gLt)?void 0:t.ji)?i:0}get ga(){return this.Za||(this.Za=this.ma()),this.Za}ma(){return rV(this)}constructor(t,i){super(t,i),this.Za=void 0,this.XPt=0,this.fLt=void 0}};function GX(t){return"public.accessibility.describes-video"===t?de.Yx:"public.accessibility.transcribes-spoken-dialog"===t?de.TRANSCRIBES_SPOKEN_DIALOG:"public.accessibility.describes-music-and-sound"===t?de.DESCRIBES_MUSIC_AND_SOUND:"public.accessibility.easy-to-read"===t?de.Fx:void 0}r(),r(),Qi();var zi=new class{qPt(t){if(!this.Rt())return!1;const i=[];return!(i.length>0)||i.some((i=>i.toLowerCase()===t.toLowerCase()))}KPt(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];this.qPt(t)&&Fe.aA("DEBUG "+t+" -",...e)}Hj(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];this.qPt(t)&&Fe.aA("INFO "+t+" -",...e)}JPt(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];this.qPt(t)&&Fe.uA("WARNING "+t+" -",...e)}lt(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];this.qPt(t)&&Fe.cA("ERROR "+t+" -",...e)}$Pt(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];this.qPt(t)&&Fe.cA("FATAL "+t+" -",...e)}constructor(){this.Rt=()=>!1}},bl="HLSPlaylistParser",WX="Discontinuity",ZX="Buffering",HX=class{Fat(){var t;const i=null==(t=this.ta.Tr)?void 0:t.tzt;if(!i||0===i.length)return void zi.JPt("LLHLSTrackConfigurator","The HLSModel contains no variant streams.");var e;const s=null!=(e=dl(i,(t=>0!==t.izt.length&&0!==t.ezt.length)))?e:i[0],n=i.filter((t=>t!==s));for(const t of s.izt){const i=new ki,e=[];i.Kz(new YX(s,t)),e.push(t);for(const s of n)for(const n of s.izt)if(jX(n,t)&&!zX(e,n)){i.Kz(new YX(s,n)),e.push(n);break}this.szt.tt(new UX(this.ta,this.UG,this.szt,i))}for(const t of s.ezt){const i=new ki,e=[];i.Kz(new VX(s,t)),e.push(t);for(const s of n)for(const n of s.ezt)if(jX(n,t)&&!zX(e,n)){i.Kz(new VX(s,n)),e.push(n);break}this.nzt.tt(new QX(this.ta,this.UG,this.nzt,i))}}rzt(){this.ozt(this.szt),this.ozt(this.nzt)}ozt(t){const i=[];for(const e of t.Ix){const t=[];for(const i of e.Zx.Ix)Qa(i.xPt.hzt,i.EPt)||t.push(i);for(const i of t)e.Zx.wS(i),i.gn();0===e.Zx.V&&i.push(e)}for(const e of i)t.it(e),e.gn()}azt(t,i){const e=this.uzt(t);void 0!==e&&(e.Igt=i)}czt(t,i){const e=this.uzt(t);void 0!==e&&(e.Kyt=i)}uzt(t){for(const i of this.nzt.Ix){const e=dl(i.Zx.Ix,(i=>i.EPt===t));if(void 0!==e)return e}}constructor(t,i,e,s){this.ta=t,this.UG=i,this.szt=e,this.nzt=s}};r();var XX=class{get FY(){return this.tlt.Tst}get YY(){return this.Fkt.Tst}VY(t){if("segment"!==t.YA&&"preload-hint"!==t.YA)return;const i=[new fZ(this.Fkt)];return"stream"!==t.oI||!function(t){return"segment"===t.YA&&"initialization-segment"!==t.OI}(t)&&"preload-hint"!==t.YA?i.push(new gZ(this.tlt)):i.push(new _Z(this.tlt,1e3)),new dZ(i)}Rkt(t){this.tlt=new ms(ms.vkt,ms.wkt,1,t)}constructor(t){const i=t.FY>0?t.FY:ms.Kct,e=t.YY>0?t.YY:ge.Kct;this.tlt=new ms(ms.vkt,ms.wkt,1,i),this.Fkt=new ge(ge.vkt,ge.wkt,e)}};r();var qX=class extends Jr{constructor(t){super(rs.wPt),this.lt=t}};r();var KX=class{H$(t,i){const e={YA:uh.FQ,yV:[],k5:t.map((t=>({VN:t}))),Q5:i};return Promise.resolve(void 0!==this.cot.H$([e]))}constructor(t){this.cot=t}};r(),r(),Qi();var JX=(t,i,e,s,n)=>t.filter((t=>!!Qa(s,t)||1.1*t.FY<=e.FY)),$X=(t,i,e,s,n)=>t.filter((t=>{if(Qa(s,t))return!0;let r=1/0;for(const i of t.hzt){var o,h;r=x.min(r,null!=(h=null!=(o=i.pPt.lzt)?o:i.pPt.dzt)?h:1/0)}r===1/0&&(r=1);const a=2*e.YY+t.FY*r/e.FY;return t.FY<=i.FY||n.fzt>a})),tq=(t,i,e,s,n)=>zs(t,((t,i)=>i.FY-t.FY)),iq=(t,i,e,s,n)=>t.every((t=>t.qyt&&!j(t.qyt)))?zs(t,((t,i)=>i.qyt-t.qyt)):t,eq=(t,i,e,s,n)=>0===s.length?t:zs(t,((t,i)=>{const e=Qa(s,t)?1:0;return(Qa(s,i)?1:0)-e})),sq=(t,i,e,s,n,r)=>t.filter((t=>!t.dht||!i.dht||!(void 0!==i.dht.NLt&&void 0!==t.dht.NLt&&!Wo(i.dht.NLt,t.dht.NLt)&&!r.gzt({VN:'video/mp4; codecs="'+t.dht.NLt+'"'}))&&!(void 0!==i.dht.TLt&&void 0!==t.dht.TLt&&!Wo(i.dht.TLt,t.dht.TLt)&&!r._zt({VN:'audio/mp4; codecs="'+t.dht.TLt+'"'})))),nq=(t,i,e,s,n)=>{if(!1===n.eft)return t;if(Fe.Ys.Ap)return t;const r=Fe.Ys.yp;var o;const h=(null!=(o=null==r?void 0:r.width)?o:n.ji)*gQ;var a;const u=(null!=(a=null==r?void 0:r.height)?a:n.Ti)*gQ;for(let i=0;i<t.length;i++){const e=t[i];if(void 0===e.gLt)return t;const s=e.gLt.Ti,n=e.gLt.ji;if(s<=u&&n<=h)return t.slice(i,t.length)}return[]},rq=(t,i,e,s,n)=>function(t,i){const e=i.eft;if(void 0===e&&!Fe.Ys.Qs)return t;if(!1===e)return t;for(let e=0;e<t.length;e++){const s=t[e];if(void 0===s.gLt)return t;const n=s.gLt.Ti,r=s.gLt.ji;if(n===i.Ti&&r===i.ji)return t.slice(e,t.length);if(n<i.Ti||r<i.ji)return t.slice(0===e?e:e-1,t.length)}return[]}(t,n);var oq="AbrEvaluator",hq=class{get vzt(){return this.UG.NK}wzt(t){this.Lv=t}async mzt(t,i,e,s,n){return(await this.pzt(t,i,e,s,n))[0]}async pzt(t,i,e,s,n){if(0===t.length)throw new b("AbrEvaluator - Unable to select optimal variant stream from an empty list.");zi.KPt(oq,"Performing optimal variant stream selection.");const r=this.vzt;let o=t;for(const t of this.Lv){const h=t(o,i,r,e,s,n);o=Dn(h)?h:await h}if(0===o.length){zi.JPt(oq,"No possible variant stream remains after ABR rule evaluation. Selecting the lowest bandwidth variant stream.");return[sw(t,(t=>t.FY))]}return o}constructor(t){this.UG=t,this.Lv=[sq,JX,$X,tq,nq,rq,iq,eq]}};function aq(t,i){return[t,void 0!==i?t+i-1:tt]}function uq(t){return Boolean(t.zj)}function cq(t){return Boolean(t.Zot)}r(),r(),r(),r(),r();var Se=function(t){return t[t.SI=0]="SI",t[t.NI=1]="NI",t[t.AQ=2]="AQ",t[t.Azt=3]="Azt",t}({}),lq=function(t){return t[t.yzt=0]="yzt",t[t.bzt=1]="bzt",t}({}),cn=function(t){return t[t.pG=0]="pG",t[t.Mzt=1]="Mzt",t[t.Tzt=2]="Tzt",t}({}),Ur=function(t){return t[t.dI=0]="dI",t[t.Szt=1]="Szt",t[t.Nzt=2]="Nzt",t}({});function yt(t){return t?t.EMt?t.zD+"@"+t.EMt.Cn+"-"+(null!=(i=t.EMt.V)?i:""):""+t.zD:"";var i}function dq(t,i){if(i===t)return!0;if(i.zD!==t.zD)return!1;if(!t.EMt)return!0;if(i.EMt){const e=aq(t.EMt.Cn,t.EMt.V),s=aq(i.EMt.Cn,i.EMt.V);if(e[0]<=s[0])return void 0===e[1]||void 0!==s[1]&&e[1]>=s[1]}return!1}function fq(t,i){return t===i||t.zD===i.zD&&(t.EMt&&i.EMt?t.EMt.Cn===i.EMt.Cn&&t.EMt.V===i.EMt.V:t.EMt===i.EMt)}function gq(t){const i=!!t.Izt||void 0;return{o:t.o,Dzt:t.Dzt,wV:t.wV,Ezt:t.Ezt,ct:t.ct,kzt:t.kzt,Izt:i,xzt:t.Lzt,Czt:t.jzt,Ozt:t.Ozt,Rzt:t.Rzt}}function _q(t,i){var e,s,n;return{TLt:null!=(e=i.TLt)?e:null==t?void 0:t.TLt,NLt:null!=(s=i.NLt)?s:null==t?void 0:t.NLt,Pzt:null!=(n=i.Pzt)?n:null==t?void 0:t.Pzt}}async function vq(t,i,e,s,n){const r=i.filter((t=>_t(t,"audio"))),o=i.filter((t=>_t(t,"video"))),h=[],a=e.map((t=>async function(t,i,e){if(!t.$yt)return;if(!t.zzt)return;if(t.LI!==cn.Tzt)return;const s=wq(t.zzt);if(!s)return;if(s.ZA===Ws)return{NS:s,XY:[],qY:void 0,hY:t.$yt};if(s.ZA===yv&&t.zzt===Sv)return{NS:s,XY:[],qY:t.$yt,hY:void 0};{zi.Hj("HLSDrmUtils","Fetching key uri "+t.$yt+".");const n=await i.hI({zu:t.$yt,zI:e});return{NS:s,XY:[await n.FN()],qY:void 0,hY:void 0}}}(t,s,n)));var u;const c=function(t,i){if(0===i.length)return t;const e=t=>{const e=i.indexOf(t.NS.ZA);return e>=0?e:i.length};return zs(t,((t,i)=>e(t)-e(i)))}((await Promise.all(a)).filter($t),null!=(u=null==t?void 0:t.preferredKeySystems)?u:[]);for(const i of c){const e=hW(null!=t?t:{},i.NS),s="cbcs";h.push({NS:i.NS,XY:i.XY,qY:i.qY,hY:i.hY,HV:[{initDataTypes:[i.NS.GA],audioCapabilities:aW(r,s,null==e?void 0:e.audioRobustness),videoCapabilities:aW(o,s,null==e?void 0:e.videoRobustness),persistentState:null==e?void 0:e.persistentState,distinctiveIdentifier:null==e?void 0:e.distinctiveIdentifier}]})}return h}function wq(t){return t===vu?Iv:t===eo?Ga:t===Tv?Ev:t===Sv?kl:void 0}function mq(t){if("#"!==t[0])throw new b("HLSPlaylistParser - Could not extract M3U8 tag or comment: "+t);return t.split(":",1)[0]}function pq(t){return"#"!==t[0]?t:t.split(":",1)[0]}function Aq(t){const i=t.indexOf(":");if(-1===i||t.length<i+1)throw new b("HLSPlaylistParser - Could not extract M3U8 parameter: "+t);return t.substring(i+1)}function yq(t){const i=Fi(Aq(t));if(void 0===i)throw new b("HLSPlaylistParser - Could not extract M3U8 float parameter: "+t);return i}function pa(t){const i={},e=/[:,] ?([A-Z0-9-]+)=([^",]+|"([^"]*)")/gi;let s=e.exec(t);for(;null!==s;){const n=s[1];let r;r=void 0!==s[3]?s[3]:s[2],null!==n?i[n]=r:zi.JPt(bl,"Ignoring unparsable M3U8 attribute name: "+t+"."),s=e.exec(t)}return i}function bq(t,i){const e=pa(t);let s,n;try{s=e.URI?Fe.TA(e.URI,i):void 0,n=function(t){switch(t){case"AUDIO":return Se.SI;case"VIDEO":return Se.NI;case"SUBTITLES":return Se.AQ;case"CLOSED-CAPTIONS":return Se.Azt}throw new b("HLSPlaylistParser - Could not parse M3U8 media type: "+t+".")}(e.TYPE)}catch(i){throw new b("HLSPlaylistParser - Could not parse #EXT-X-MEDIA tag: "+t+".")}const r=e["GROUP-ID"],o=e.LANGUAGE,h=e["ASSOC-LANGUAGE"],a=e.NAME,u="YES"===e.DEFAULT;let c="YES"===e.AUTOSELECT;const l="YES"===e.FORCED,d=e["INSTREAM-ID"],f=e.CHARACTERISTICS,g=e.CHANNELS;if(r||zi.JPt(bl,"#EXT-X-MEDIA tag has no GROUP-ID attribute: "+t+"."),o||zi.JPt(bl,"#EXT-X-MEDIA tag has no LANGUAGE attribute: "+t+"."),a||zi.JPt(bl,"#EXT-X-MEDIA tag has no NAME attribute: "+t+"."),n===Se.Azt?(s&&zi.JPt(bl,"#EXT-X-MEDIA tag of type CAPTIONS must not have a URI: "+t+"."),d?/^(CC[0-4])|(SERVICE([1-9]|[1-5][0-9]|6[0-3]))$/.test(d)||zi.JPt(bl,"#EXT-X-MEDIA's INSTREAM-ID is invalid: "+t+"."):zi.JPt(bl,"#EXT-X-MEDIA tag of type CAPTIONS must have an INSTREAM-ID attribute: "+t+".")):d&&zi.JPt(bl,"#EXT-X-MEDIA tag must not have an INSTREAM-ID attribute if the TYPE is not CAPTIONS: "+t+"."),u&&!c&&(c=!0,e.AUTOSELECT&&zi.JPt(bl,"#EXT-X-MEDIA tag with DEFAULT=YES attribute must have AUTOSELECT=YES attribute: "+t+".")),e.FORCED&&n!==Se.AQ&&zi.JPt(bl,"#EXT-X-MEDIA tag must not have a FORCED attribute if the TYPE is not SUBTITLES: "+t+"."),void 0===r||void 0===a)throw new b("HLSPlaylistParser - Could not parse #EXT-X-MEDIA tag: "+t+".");return{Bzt:h,lLt:g,NPt:f,MPt:r,yPt:c,APt:u,bPt:l,TPt:d,gs:o,l:a,YA:n,$yt:s}}function Mq(t,i,e){const s=pa(t);let n,r,o;try{n=Fe.TA(e,i),o=function(t){if(void 0===t)return;const i=t.split("x"),e=Number(i[0]),s=Number(i[1]);if(j(e)||j(s))throw new b("HLSPlaylistParser - Could not parse RESOLUTION attribute: "+t+".");return{ji:e,Ti:s}}(s.RESOLUTION),r=function(t){if(!t)return;let i,e,s;const n=t.split(",");for(const t of n){const n=t.trim();Et(n,"mp4a")?i="mp4a.40.05"===n?"mp4a.40.5":"mp4a.40.02"===n?"mp4a.40.2":n:"ac-3"===n||"ec-3"===n||"flac"===n.toLowerCase()?i=n:Et(n,"avc")||Et(n,"hvc1")||Et(n,"hev1")||Et(n,"dvh")||Et(n,"vp09")||Et(n,"av01")?e=n:s=s?s+","+n:n}return{TLt:i,NLt:e,Pzt:s}}(s.CODECS)}catch(i){throw new b("HLSPlaylistParser - Could not parse #EXT-X-STREAM-INF tag: "+t+".")}const h=Fi(s.BANDWIDTH),a=Fi(s["AVERAGE-BANDWIDTH"]),u=Fi(s.SCORE),c=Fi(s["FRAME-RATE"]),l=s["HDCP-LEVEL"],d=[];if(void 0!==s["ALLOWED-CPC"]){const t=s["ALLOWED-CPC"].split(",");d.push(...t.map((t=>{const i=t.split(":");return{keysystem:i[0],label:i[1]}})))}const f=s["VIDEO-RANGE"],g=s.AUDIO,_=s.VIDEO,v=s.SUBTITLES,w=s["CLOSED-CAPTIONS"];if(void 0===h?zi.JPt(bl,"#EXT-X-STREAM-INF tag has no valid BANDWIDTH attribute: "+t+"."):void 0!==a&&a>h&&zi.JPt(bl,"#EXT-X-STREAM-INF tag must have BANDWIDTH attribute higher or equal to AVERAGE-BANDWIDTH attribute: "+t+"."),r||zi.Hj(bl,"#EXT-X-STREAM-INF tag should have a CODECS attribute: "+t+"."),r&&r.NLt&&void 0===o&&zi.Hj(bl,"#EXT-X-STREAM-INF tag should have a valid RESOLUTION attribute if it contains video codecs: "+t+"."),void 0===l||Qa(["TYPE-0","TYPE-1","NONE"],l)||zi.JPt(bl,"#EXT-X-STREAM-INF tag has an invalid HDCP-LEVEL attribute: "+t+"."),void 0===f||Qa(["SDR","PQ","HLG"],f)||zi.JPt(bl,"#EXT-X-STREAM-INF tag has an invalid VIDEO-RANGE attribute: "+t+"."),void 0===h)throw new b("HLSPlaylistParser - Could not parse #EXT-X-STREAM-INF tag: "+t+".");return{Uzt:d,Qzt:g,Xyt:a,FY:h,Fzt:w,dht:r,Igt:c,Yzt:l,gLt:o,qyt:u,Vzt:v,$yt:n,Gzt:_,Wzt:f}}function Tq(t,i){const e=pa(t);if(!e.URI)throw new b("HLSPlaylistParser - Could not parse #EXT-X-I-FRAME-STREAM-INF tag: "+t+".");try{return Mq(t,i,e.URI)}catch(i){throw new b("HLSPlaylistParser - Could not parse #EXT-X-I-FRAME-STREAM-INF tag: "+t+".")}}function Fi(t){const i=Number(t);return j(i)?void 0:i}function Sq(t,i){const e=pa(t);let s,n;try{s=function(t){switch(t){case"NONE":return cn.pG;case"AES-128":return cn.Mzt;case"SAMPLE-AES":return cn.Tzt;case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return t}throw new b("LLHLSPlaylistParser - Could not parse M3U8 key method: "+t+".")}(e.METHOD),n=e.URI?Cq(e.URI,i):void 0}catch(i){throw new b("HLSPlaylistParser - Could not parse #EXT-X-KEY tag: "+t+".")}const r=e.KEYFORMAT,o=e.IV,h=e.KEYFORMATVERSIONS;let a,u,c,l,d;if(s!==cn.pG){if(c=r||Sv,"SAMPLE-AES-CENC"===s||"SAMPLE-AES-CTR"===s){if(wq(c)!==Iv)throw new b("HLSPlaylistParser - #EXT-X-KEY tag with METHOD="+s+" is only compatible with Widevine.");a=cn.Tzt}else a=s;u=n,l=o?_m(o):void 0,d=h?h.split("/").map((t=>Number(t))):[1]}else a=cn.pG,(n||r||h||o)&&zi.JPt(bl,"#EXT-X-KEY tag with METHOD=NONE must not have additional attributes: "+t+".");return{LI:a,$yt:u,Zzt:l,zzt:c,Hzt:d}}function Nq(t){const i=Aq(t);if(!i)return[void 0,""];const[e,s]=i.split(",");return[Fi(e),s]}function Iq(t,i){const e=t.split("@"),s=Fi(e[0]),n=e.length>1?Fi(e[1]):i;if(void 0===s||void 0===n)throw new b("HLSPlaylistParser - Could not parse #EXT-X-BYTERANGE tag: "+t+".");return{Cn:n,V:s}}function Dq(t){if(void 0!==t)return Iq(t,void 0)}function Eq(t,i){return Iq(Aq(t),i)}function kq(t,i){const e=pa(t);try{const t=Cq(e.URI,i);return{zD:t,EMt:Dq(e.BYTERANGE)}}catch(i){throw new b("HLSPlaylistParser - Could not parse #EXT-X-MAP tag: "+t+".")}}function xq(t){const i=Aq(t);if(!i)throw new b("HLSPlaylistParser - Could not parse #EXT-X-PROGRAM-DATE-TIME tag: "+t+".");const e=new Date(i);if(!Nf(e))throw new b("HLSPlaylistParser - Could not parse #EXT-X-PROGRAM-DATE-TIME tag: "+t+".");return e}function Lq(t){const i=pa(t),e=i["START-DATE"],s=i["END-DATE"],n=Fi(i["PLANNED-DURATION"]);let r,o,h,a=Fi(i.DURATION);void 0!==i["SCTE35-CMD"]&&(r=_m(i["SCTE35-CMD"]).buffer),i["SCTE35-IN"]&&(o=_m(i["SCTE35-IN"]).buffer),i["SCTE35-OUT"]&&(h=_m(i["SCTE35-OUT"]).buffer);const u="YES"===i["END-ON-NEXT"],c=function(t){const i={};for(const e of _.keys(t)){const s=t[e];void 0!==s&&Et(e,"X-")&&(i[e]=s)}return i}(i),l=i.ID,d=i.CLASS;let f,g;if(void 0===e)zi.JPt(bl,"Could not parse #EXT-X-DATERANGE tag without START-DATE attribute: "+e+".");else if(f=new Date(e),g=void 0!==s?new Date(s):void 0,Nf(f)||zi.JPt(bl,"Could not parse EXT-X-DATERANGE tag with invalid START-DATE attribute: "+f+"."),void 0!==a){const i=new Date(f.getTime()+1e3*a);g?g.getTime()!==i.getTime()&&(zi.JPt(bl,"DURATION and END-DATE attributes of #EXT-X-DATERANGE tag are not aligned, updating the END-DATE: "+t+"."),g=i):g=i}else g&&(a=(f.getTime()-g.getTime())/1e3);if(u&&(i.CLASS||zi.JPt(bl,"Could not parse #EXT-X-DATERANGE tag with END-ON-NEXT attribute without CLASS attribute: "+t+"."),i.DURATION&&zi.JPt(bl,"Could not parse #EXT-X-DATERANGE tag with END-ON-NEXT attribute with DURATION attribute: "+t+"."),g&&zi.JPt(bl,"Could not parse #EXT-X-DATERANGE tag with END-ON-NEXT attribute with END-DATE attribute: "+t+".")),void 0===l&&zi.JPt(bl,"Could not parse #EXT-X-DATERANGE tag without valid ID attribute: "+t+"."),void 0===l||void 0===f)throw new b("HLSPlaylistParser - Could not parse #EXT-X-DATERANGE tag: "+t+".");return{o:l,Dzt:d,wV:f,Ezt:g,ct:a,kzt:n,jzt:r,Rzt:o,Ozt:h,Izt:u,Lzt:c}}function Cq(t,i){if(void 0===t)throw new b("HLSPlaylistParser - Unable to parse URL from string: "+t+".");return Fe.TA(t,i)}function jq(t,i){const e=pa(t),s=Fi(e.DURATION),n=Cq(e.URI,i),r=Dq(e.BYTERANGE),o="YES"===e.INDEPENDENT,h="YES"===e.GAP;if(void 0===s)throw new b("HLSPlaylistParser - Unable to parse #EXT-X-PART without valid DURATION: "+t);return{ct:s,$yt:{zD:n,EMt:r},Xzt:o,qzt:h}}function Oq(t){const i=pa(t);return{Kzt:"YES"===i["CAN-BLOCK-RELOAD"],Jzt:Fi(i["CAN-SKIP-UNTIL"]),$zt:"YES"===i["CAN-SKIP-DATERANGES"],tBt:Fi(i["HOLD-BACK"]),iBt:Fi(i["PART-HOLD-BACK"])}}function Rq(t,i){const e=pa(t);if(void 0===e.URI)throw new b("HLSPlaylistParser - Could not parse #EXT-X-RENDITION-REPORT: "+t+".");const s=Cq(e.URI,i),n=Fi(e["LAST-MSN"]),r=Fi(e["LAST-PART"]);if(void 0===n)throw new b("HLSPlaylistParser - Could not parse #EXT-X-RENDITION-REPORT: "+t+".");return{$yt:s,eBt:n,sBt:r}}function Pq(t,i){var e;const s=pa(t),n=Fi(s["SKIPPED-SEGMENTS"]),r=null==(e=s["RECENTLY-REMOVED-DATERANGES"])?void 0:e.split("\t");if(void 0===n)throw new b("HLSPlaylistParser - Could not parse #EXT-X-SKIP tag without valid SKIPPED-SEGMENTS attribute: "+t+".");return{nBt:n,rBt:r,oBt:i}}function zq(t){const i=Fi(pa(t)["PART-TARGET"]);if(void 0===i)throw new b("HLSPlaylistParser - Could not parse #EXT-X-PART-TARGET-DURATION tag: "+t+".");return i}function Bq(t){switch(Aq(t)){case"VOD":return Ur.Szt;case"EVENT":return Ur.Nzt;default:return zi.JPt(bl,"Found #EXT-X-PLAYLIST-TYPE tag with invalid value: "+t+"."),Ur.dI}}function Uq(t,i){const e=pa(t);let s,n;try{s=function(t){if(void 0===t)throw new b("HLSPlaylistParser - Could not parse PRELOAD-HINT type: "+t+".");if("MAP"===t)return lq.yzt;if("PART"===t)return lq.bzt;throw new b("HLSPlaylistParser - Could not parse PRELOAD-HINT type: "+t+".")}(e.TYPE),n=Cq(e.URI,i)}catch(i){throw new b("HLSPlaylistParser - Could not parse #EXT-X-PRELOAD-HINT tag: "+t+".")}const r=Fi(e["BYTERANGE-START"]),o=Fi(e["BYTERANGE-LENGTH"]);let h;return void 0===r&&void 0===o||(h={Cn:r||0,V:o}),{YA:s,$yt:{zD:n,EMt:h}}}r(),Qi(),r(),r();var Qq=class t{hBt(){const t=this.aBt[this.uBt];return this.uBt+=1,t}cBt(){return this.aBt[this.uBt]}Zb(){const i=new t("");return i.uBt=0,i.aBt=this.aBt.slice(this.uBt),i}static lBt(t){if(!t)return[];return t.split(/[\r\n]+/).map((t=>t.trim())).filter((t=>t))}constructor(i){this.uBt=0,this.aBt=t.lBt(i)}};function Fq(t,i,e){const s=t.$yt;let n=t.cj,r=t.dBt,o=t.Cn;switch(e){case"#EXT-X-VERSION":n=function(t){const i=yq(t);return j(i)?(zi.JPt(bl,"Playlist version is NaN: "+t+"."),1):i}(i);break;case"#EXT-X-INDEPENDENT-SEGMENTS":r=!0;break;case"#EXT-X-START":o=function(t){const i=pa(t),e=Fi(i["TIME-OFFSET"]);if(void 0===e)throw new b("HLSPlaylistParser - #EXT-X-START is missing a TIME-OFFSET: "+t+".");return{fBt:e,gBt:"YES"===i.PRECISE}}(i);break;case"#EXT-X-DEFINE":zi.JPt(bl,"Ignoring unsupported #EXT-X-DEFINE: "+i+".");break;default:zi.Hj(bl,"Ignoring unrecognized line or comment: "+i+".")}return{$yt:s,cj:n,dBt:r,Cn:o}}function Yq(t,i){return t.map((t=>t.LI===cn.pG||t.Zzt?t:Ei({},t,{Zzt:Vq(i)})))}function Vq(t){const i=new DataView(new ArrayBuffer(16)),e=new da;return e.Gb(8),qw(i,e,D.fromNumber(t)),new T(i.buffer)}function Gq(t,i,e){zi.Hj(bl,"Parsing M3U8 playlist at "+t+".");const s=new Qq(e);if("#EXTM3U"!==s.hBt())throw new b("HLSPlaylistParser - Could not parse M3U8 playlist. Playlist does not start with #EXTM3U.");return function(t){return/^#EXT-X-(MEDIA|STREAM-INF|I-FRAME-STREAM-INF|SESSION-DATA|SESSION-KEY):/m.test(t)}(e)?function(t,i){let e;try{e=Fe.TA(t)}catch(i){throw zi.JPt(bl,"The master playlist has no valid base URI: "+t+"."),new b("HLSPlaylistParser - Could not parse HLS master playlist: "+t)}let s={$yt:e,dBt:void 0,Cn:void 0,cj:void 0};const n=[],r=[],o=[],h=[];for(;;){const t=i.hBt();if(!t)break;try{const a=mq(t);switch(a){case"#EXT-X-MEDIA":{const i=bq(t,e);n.push(i);break}case"#EXT-X-STREAM-INF":{const s=Mq(t,e,i.hBt());r.push(s);break}case"#EXT-X-I-FRAME-STREAM-INF":{const i=Tq(t,e);o.push(i);break}case"#EXT-X-SESSION-DATA":zi.JPt(bl,"Ignoring unsupported #EXT-X-SESSION-DATA: "+t+".");break;case"#EXT-X-SESSION-KEY":{const i=Sq(t,e);h.push(i);break}default:s=Fq(s,t,a)}}catch(i){zi.JPt(bl,"Ignoring unparsable line: "+t,i)}}let a=s.cj;var u;const c=null!=(u=s.dBt)&&u,l=s.Cn;return void 0===a&&(zi.JPt(bl,"The playlist has no #EXT-X-VERSION, assuming version is 2."),a=2),a>=8&&(r.some((t=>void 0!==t.qyt))||o.some((t=>void 0!==t.qyt)))&&(r.some((t=>void 0===t.qyt))||o.some((t=>void 0===t.qyt)))&&zi.JPt(bl,"If one master playlist variant stream has a SCORE, all variants should have it."),{$yt:e,cj:a,dBt:c,Cn:l,_Bt:o,vBt:h,zj:n,wBt:r}}(t,s):function(t,i,e){let s={$yt:t,dBt:void 0,Cn:void 0,cj:void 0};const n=[];let r,o,h,a,u=!1,c=!1;const l=[],d=ll();let f,g,_,v,w,m,p,A,y,M=[],T=[],S=!1,N=!1;const I=[],D=[];let E,k,x,L,C,j=0,O=!1,R=Ur.dI,P=!1,z=0;try{C=Fe.TA(t)}catch(i){throw zi.JPt(bl,"The media playlist has no valid base URI: "+t+".",i),new b("HLSPlaylistParser - Could not parse HLS media playlist.")}const B=e.Zb();for(;void 0===k||void 0===x;){const t=B.hBt();if(!t)break;try{switch(pq(t)){case"#EXT-X-MEDIA-SEQUENCE":k=yq(t);break;case"#EXT-X-DISCONTINUITY-SEQUENCE":x=yq(t)}}catch(i){zi.JPt(bl,"Ignoring unparsable line: "+t,i)}}void 0===k&&(zi.Hj(bl,"#EXT-X-MEDIA-SEQUENCE tag is missing, assuming first segment media sequence number is 0."),k=0),void 0===x&&(zi.Hj(bl,"#EXT-X-DISCONTINUITY-SEQUENCE tag is missing, assuming first segment discontinuity sequence number is 0."),x=0);let U=k,Q=x;for(;;){const t=e.hBt();if(!t)break;let i=!1;try{const e=pq(t);switch(e){case"#EXTINF":i=!0,[f,g]=Nq(t);break;case"#EXT-X-BYTERANGE":i=!0,_=Eq(t,j),_&&(j=_.Cn+_.V);break;case"#EXT-X-DISCONTINUITY":i=!0,S=!0,Q++;break;case"#EXT-X-KEY":{var F;i=!0;const e=Sq(t,C);if(e.LI===cn.pG){d.clear(),y=void 0;break}var Y;const s=null!=(Y=null==(F=e.zzt)?void 0:F.toString())?Y:"identity";d.set(s,e),e.LI===cn.Mzt&&(y=e);break}case"#EXT-X-MAP":i=!0,w=kq(t,C),m=y;break;case"#EXT-X-PROGRAM-DATE-TIME":i=!0,p=xq(t);break;case"#EXT-X-GAP":i=!0,N=!0;break;case"#EXT-X-BITRATE":i=!0,A=yq(t);break;case"#EXT-X-TARGETDURATION":r=yq(t);break;case"#EXT-X-DATERANGE":{const i=Lq(t);n.push(i);break}case"#EXT-X-PART":{i=!0;const e=jq(t,C);T.push(e);break}case"#EXT-X-PRELOAD-HINT":{const i=Uq(t,C);I.push(i);break}case"#EXT-X-SKIP":{l.length>0&&zi.JPt(bl,"#EXT-X-SKIP must appear before any #EXTINF tags."),i=!0;const e=Pq(t,U);z=e.nBt,L=e.rBt,U+=e.nBt;break}case"#EXT-X-SERVER-CONTROL":{const i=Oq(t);u=i.Kzt,o=i.Jzt,c=i.$zt,h=i.tBt,a=i.iBt;break}case"#EXT-X-RENDITION-REPORT":{const i=Rq(t,C);D.push(i);break}case"#EXT-X-PART-INF":E=zq(t);break;case"#EXT-X-MEDIA-SEQUENCE":i&&zi.JPt(bl,"#EXT-X-MEDIA-SEQUENCE must appear before any media segment tags.");break;case"#EXT-X-DISCONTINUITY-SEQUENCE":i&&zi.JPt(bl,"#EXT-X-DISCONTINUITY-SEQUENCE must appear before any media segment tags.");break;case"#EXT-X-ENDLIST":O=!0;break;case"#EXT-X-PLAYLIST-TYPE":R=Bq(t);break;case"#EXT-X-I-FRAMES-ONLY":P=!0;break;default:if(Et(e,"#"))s=Fq(s,t,e);else{v=Fe.TA(t,C);const i=w?{$yt:w,mBt:m}:void 0,e={vBt:Yq(uv(d),U),_Q:M,pBt:T,ct:f,TV:g,ABt:S,$yt:{EMt:_,zD:v},yBt:i,bBt:p,qzt:N,MBt:A,oBt:U,TBt:Q};l.push(e),U++,M=[],T=[],f=void 0,g=void 0,S=!1,_=void 0,v=void 0,p=void 0,N=!1,A=void 0}}}catch(i){zi.JPt(bl,"Ignoring unparsable line: "+t,i)}}if(T.length){const t=w?{$yt:w,mBt:y}:void 0,i={vBt:Yq(uv(d),U),_Q:M,pBt:T,ct:f,TV:g,ABt:S,$yt:void 0,yBt:t,bBt:p,qzt:N,MBt:A,oBt:U,TBt:Q};l.push(i)}let V=s.cj;var G;const W=null!=(G=s.dBt)&&G,Z=s.Cn;void 0===V&&(zi.JPt(bl,"The media playlist has no #EXT-X-VERSION tag, assuming version is 2."),V=2),void 0===r&&zi.JPt(bl,"Could not parse the HLS media playlist: no #EXT-X-TARGET-DURATION tag was found.");const H=l.length,X=H>0;X||zi.JPt(bl,"The HLS media playlist contains no segments.");const q=X&&l[H-1].pBt.length>0;return q&&void 0===E&&zi.JPt(bl,"Could not parse the HLS media playlist: no #EXT-X-PART-TARGET-DURATION tag was found, but it is required when some or all segments contain parts."),q&&void 0===a&&zi.JPt(bl,"Could not parse the HLS media playlist: The #EXT-X-SERVER-CONTROL tag has no PART-HOLDBACK attribute, but it is required when some or all segments contain parts."),{Kzt:u,Jzt:o,$zt:c,SBt:n,TBt:x,NBt:O,dBt:W,tBt:h,IBt:P,oBt:k,nBt:z,iBt:a,lzt:E,DBt:R,EBt:I,rBt:L,kBt:D,xBt:r,Zot:l,Cn:Z,$yt:C,LBt:i,cj:V}}(t,i,s)}Qi(),r(),r();var Wq=class{get $yt(){return this.pPt.$yt}get dht(){return this.sLt}set dht(t){this.sLt=t?Hq(t):void 0,this.CBt=function(t,i){return!(void 0!==(null==t?void 0:t.TLt)&&void 0===(null==i?void 0:i.TLt)||void 0!==(null==t?void 0:t.NLt)&&void 0===(null==i?void 0:i.NLt))}(this.jBt,this.sLt)}get OBt(){return this.CBt}get hzt(){return this.RBt}get izt(){return this.RBt.filter((t=>t.YA===Se.SI))}get ezt(){return this.RBt.filter((t=>t.YA===Se.NI))}get PBt(){return this.RBt.filter((t=>t.YA===Se.AQ))}get zBt(){return this.RBt.filter((t=>t.YA===Se.Azt))}BBt(t){for(const i of this.RBt){const e=i.pPt.BBt(t);if(void 0!==e)return e}}UBt(t){for(const i of this.RBt){const e=i.pPt.UBt(t);if(void 0!==e)return e}}QBt(t){ra(this.RBt,t)}constructor(t,i,e){var s,n,r,o;this.o=Zq++,this.qyt=void 0,this.gLt=void 0,this.Xyt=void 0,this.CBt=!1,this.RBt=[],this.pPt=i,this.FY=t.FY,this.Xyt=t.Xyt,this.qyt=t.qyt,this.jBt=t.dht?Hq(t.dht):void 0,this.sLt=this.jBt,this.gLt=t.gLt,this.Igt=t.Igt,this.Qzt=null!=(s=t.Qzt)?s:"FBt"+this.o,this.Gzt=null!=(n=t.Gzt)?n:"YBt"+this.o,this.Vzt=null!=(r=t.Vzt)?r:"VBt"+this.o,this.Fzt=null!=(o=t.Fzt)?o:"GBt"+this.o,this.RBt=e}},Zq=0;function Hq(t){return Ei({},t,{NLt:t.NLt?ty(t.NLt):void 0})}r(),r(),r();var Xq=class{get lB(){var t;return this.yB+(null!=(t=this.WBt)?t:0)}get ZBt(){return this.HBt}get vBt(){return this.XBt.vBt}qBt(t,i){this.yB=t,this.HBt=i}constructor(t,i,e,s,n){this.xst=void 0,this.XBt=t,this.KBt=i,this.yB=e,this.HBt=s,this.ct=n.ct,this.$yt=n.$yt,this.Xzt=n.Xzt,this.qzt=n.qzt}},qq=class{get lB(){var t;return this.yB+(null!=(t=this.JBt)?t:0)}get $Bt(){return this.yB}get ct(){return this.JM}get $yt(){return this.tUt}get iUt(){return this.eUt}get ZBt(){return this.HBt}get pBt(){return this.Cw}get sUt(){return this.nUt}get dB(){var t;return this.lB+(null!=(t=this.JM)?t:this.nUt)}set WBt(t){this.JBt=t;for(const i of this.Cw)i.WBt=t}get WBt(){return this.JBt}rUt(t){return this.Cw[t]}oUt(t){for(let i=0;i<this.Cw.length;i++){const e=this.Cw[i],s=e.lB,n=s+e.ct;if(s<=t&&t<=n)return t===n&&i+1<this.Cw.length?this.Cw[i+1]:e}}hUt(t){for(let i=this.Cw.length-1;i>=0;i--){const e=this.Cw[i];if(e.lB<=t)return e}}aUt(t){let i=this.hUt(t);for(;i&&!i.Xzt&&i.KBt>0;)i=this.rUt(i.KBt-1);return i}qBt(t,i,e){const s=t.pBt.length!==this.Cw.length||e!==this.HBt;this.eUt=i,this.HBt=e,this.JM=t.ct,null!=this.bBt||(this.bBt=t.bBt),void 0===this.tUt&&(this.tUt=t.$yt),s&&this.uUt(t.pBt)}uUt(t){this.Cw.length>t.length&&(this.Cw.length=t.length);let i=0;for(let e=0;e<t.length;e++){const s=t[e],n=this.HBt&&e===t.length-1,r=this.yB+i;if(e<this.Cw.length)this.Cw[e].qBt(r,n);else{const t=new Xq(this,e,r,n,s);t.WBt=this.JBt,this.Cw.push(t)}i+=s.ct}this.nUt=i}cUt(){nt(this.Cw),this.nUt=0}constructor(t,i,e,s,n){this.xst=void 0,this.Cw=[],this.nUt=0,this.yB=t,this.yBt=n.yBt,this.eUt=e,this.HBt=s,this.JM=n.ct,this.bBt=n.bBt,this.tUt=n.$yt,this.qzt=n.qzt,this.oBt=n.oBt,this.ABt=n.ABt,this.TBt=i,this.vBt=n.vBt,this.uUt(n.pBt)}};r();var Kq=function(t){return t.lUt="YES",t.dUt="v2",t}({});Qi(),r();var Jq=class extends Co{};r(),r(),r();var $q=class extends dN{get ga(){return this.Za||(this.Za=function(t){return fe(Ft(t),{get content(){return t.U},get class(){return t.Dzt},get startDate(){return t.wV},get endDate(){return t.Ezt},get duration(){return t.ct},get plannedDuration(){return t.kzt},get endOnNext(){return t.Izt},get scte35Cmd(){return t.Czt},get scte35Out(){return t.Ozt},get scte35In(){return t.Rzt},get customAttributes(){return t.xzt}})}(this)),this.Za}get Dzt(){return this.fUt}get wV(){return this.gUt}get Ezt(){return this._Ut}get ct(){return this.JM}get kzt(){return this.vUt}get Izt(){return this.wUt}get Czt(){return this.mUt}get Ozt(){return this.pUt}get Rzt(){return this.AUt}get xzt(){return this.yUt}Yn(t){let i=!1;var e;(void 0===this.fUt&&void 0!==t.Dzt&&(i=!0,this.fUt=t.Dzt),void 0===this._Ut&&void 0!==t.Ezt&&(i=!0,this._Ut=t.Ezt),void 0===this.JM&&void 0!==t.ct&&(i=!0,this.JM=t.ct),void 0===this.vUt&&void 0!==t.kzt&&(i=!0,this.vUt=t.kzt),!this.wUt&&t.Izt&&(i=!0,this.wUt=t.Izt),i=this.updateCustomAttributes(t,i),void 0===this.mUt&&void 0!==t.Czt&&(i=!0,this.mUt=t.Czt),void 0===this.pUt&&void 0!==t.Ozt&&(i=!0,this.pUt=t.Ozt),void 0===this.AUt&&void 0!==t.Rzt&&(i=!0,this.AUt=t.Rzt),this.bUt(),this.MUt(),this.TUt(),i)&&(this.yo(new hN(this)),null==(e=this.bB)||e.yo(new uN(this)))}updateCustomAttributes(t,i){let e=i;if(t.xzt)for(const i of _.keys(t.xzt))void 0===this.yUt[i]&&(e=!0,this.yUt[i]=t.xzt[i]);return e}bUt(){this.JM&&!this._Ut&&(this._Ut=new Date(this.gUt.getTime()+Df(this.JM)))}MUt(){this._Ut&&!this.JM&&(this.JM=If(this._Ut.getTime()-this.gUt.getTime()))}TUt(){this.TB===1/0&&(this._Ut||this.JM)&&(this.TB=tK(this.yB,this.JM,this.gUt,this._Ut))}constructor(t,i){super(i,tK(i,t.ct,t.wV,t.Ezt),void 0,!1,t.o),this.fUt=t.Dzt,this.gUt=t.wV,this._Ut=t.Ezt,this.JM=t.ct,this.vUt=t.kzt,this.wUt=Boolean(t.Izt),this.yUt=t.xzt||{},this.mUt=t.Czt,this.pUt=t.Ozt,this.AUt=t.Rzt,this.bUt(),this.MUt()}};function tK(t,i,e,s){return $t(i)?t+i:s?t+(If(s.getTime())-If(e.getTime())):1/0}var iK=class extends dR{Yn(t,i){eK(this,sK(t),i)}RQ(t){nK(this.L.Ix,t),super.RQ(t)}constructor(){super(void 0,void 0,El.DATE_RANGE)}};function eK(t,i,e){const s=t.L.Ix;for(let e=s.length-1;e>=0;e--){const n=s[e],r=dl(i,(t=>t.o===n.o));r?n.Yn(r):t.SQ(n)}for(const s of i){const i=s.wV;if(void 0!==i&&!t.f6(s.o)){const n=e(i),r=new $q(s,n);nK(t.L.Ix,r),t.RQ(r)}}}function sK(t){const i=ll(),e=[];for(const s of t)if(i.has(s.o)){const t=i.get(s.o),e=Ei({},t,mM(s),{xzt:Ei({},t.xzt,s.xzt)});i.set(s.o,e)}else i.set(s.o,s),e.push(s.o);return e.map((t=>i.get(t)))}function nK(t,i){const e=No(t,(t=>t.Dzt===i.Dzt));e&&e.Izt&&e.Yn({o:e.o,Ezt:i.wV})}var rK=String.fromCharCode(95),oK=rK+"HLS_msn",hK=rK+"HLS_part",aK=rK+"HLS_skip",uK="HLSMediaPlaylist",cK=class{get NBt(){if(0===this.oMt.length)return!1;return this.oMt[this.oMt.length-1].ZBt}get ct(){return this.JM}get _k(){return this.D5}get SUt(){return this.NUt}get dzt(){return this.IUt}get lzt(){return this.DUt}get tBt(){return this.NBt?0:this.EUt?this.EUt:this.IUt?3*this.IUt:void 0}get iBt(){var t;return null!=(t=this.kUt)?t:this.DUt?3*this.DUt:void 0}get Kzt(){return this.xUt}get Jzt(){return this.LUt}get $zt(){return this.CUt}get DBt(){return this.jUt}get OUt(){return void 0!==this.lzt}get RUt(){if(this.NBt)return!0;const t=Fe.Og()/1e3,i=this.PUt,e=this.zUt;return void 0!==i&&t-i<e}get PUt(){return this.BUt}get UUt(){if(this.QUt)return Fe.Og()/1e3-this.QUt}get WBt(){return this.JBt}get zUt(){var t;return null!=(t=this.IUt)?t:void 0===this.BUt?5:1}get Zot(){return this.oMt}get SBt(){return this.FUt}get YUt(){return this.VUt}set YUt(t){this.VUt=t}get Cn(){return this.mQ}get GUt(){return this.WUt}HPt(t){if(!t)return this.$yt;const i=Fe.Ah(this.$yt);return void 0!==t.oBt&&i.searchParams.append(oK,String(t.oBt)),void 0!==t.ZUt&&i.searchParams.append(hK,String(t.ZUt)),void 0!==t.ZC&&i.searchParams.append(aK,t.ZC),i.href}Oct(t){const i=this.oMt;if(0===i.length)return;const e=t-i[0].oBt;return e<0||e>=i.length?void 0:i[e]}HUt(t){if(0===this.oMt.length)return;const i=vV(lK.Ld,this.oMt,t);if(!(i<0)){const e=this.oMt[i];return t===e.dB&&i+1<this.oMt.length?this.oMt[i+1]:e}{const i=this.oMt[this.oMt.length-1];if(t===i.dB)return i}}XUt(t){if(0===this.oMt.length)return;const i=this.oMt[0];if(t<i.dB)return i;const e=this.oMt[this.oMt.length-1];return t>=e.lB?e:this.HUt(t)}BBt(t){const i=this.XUt(t);if(void 0===i)return;for(let e=i.oBt-this.oMt[0].oBt;e>=0;e--){const i=this.oMt[e];if(void 0!==i.bBt)return new Date(i.bBt.getTime()+1e3*(t-i.lB))}}UBt(t){let i;for(const e of this.oMt)if(dK(e))if(void 0===i)i=e;else{if(!(e.bBt.getTime()<=t.getTime()))break;i=e}if(void 0!==i)return i.lB+(t.getTime()-i.bBt.getTime())/1e3}qUt(t){switch(t){case lq.yzt:return this.KUt;case lq.bzt:return this.JUt;default:return}}qBt(t){var i;void 0===this.IUt&&(this.IUt=null!=(i=t.xBt)?i:this.$Ut(t));void 0===this.EUt&&void 0!==t.tBt&&(this.EUt=t.tBt),void 0===this.DUt&&void 0!==t.lzt&&(this.DUt=t.lzt),void 0===this.kUt&&void 0!==t.iBt&&(this.kUt=t.iBt),this.xUt=t.Kzt,this.LUt=t.Jzt,this.CUt=t.$zt,this.jUt=t.DBt,this.cMt(t),this.tQt(t);const e=dl(t.EBt,(t=>t.YA===lq.yzt)),s=dl(t.EBt,(t=>t.YA===lq.bzt));this.KUt=e?{$yt:e.$yt,YA:e.YA,TBt:t.TBt}:void 0,this.JUt=s?{$yt:s.$yt,YA:s.YA,TBt:t.TBt}:void 0,this.BUt=Fe.Og()/1e3;const n=this.D5.jn(this.D5.V-1);this.iQt();const r=this.D5.jn(this.D5.V-1);(!this.QUt||r-n>0)&&(this.QUt=this.BUt),null!=this.mQ||(this.mQ=t.Cn)}iQt(){this.NUt=this.eQt(),this.D5=this.sQt(this.NUt),this.JM=this.nQt()}eQt(){const t=this.Zot;if(0===t.length)return Mo.PP();const i=t[0].lB,e=t[t.length-1].dB;return new Mo([i,e])}sQt(t){if(0===t.V||this.NBt)return t;const i=t.Cn(0),e=t.jn(0)-this.sSt;return e<i?Mo.OP(i):new Mo([i,e])}get sSt(){return this.NBt?0:null!=(e=null!=(i=null!=(t=this.rQt)?t:this.iBt)?i:this.tBt)?e:0;var t,i,e}nQt(){return 0===this.oMt.length?0:this.NBt?Ke(this.oMt,(t=>{var i;return null!=(i=t.ct)?i:t.sUt})):1/0}$Ut(t){let i;for(const e of t.Zot)if(void 0!==e.ct){const t=x.max(1,x.round(e.ct));(void 0===i||i<t)&&(i=t)}if(void 0===i)throw new b("HLSModel - Could not determine required segment target duration.");return i}cMt(t){if(0===t.Zot.length)return nt(this.oMt),void this.oQt();const i=this.hQt(t);if(!i)return;let e,s,n;i.aQt>0&&this.oMt.splice(0,i.aQt);const r=t.nBt;if(r>0){if(r>this.oMt.length)throw new Jq("New playlist skips over missing segments.");const i=this.oMt[r-1];if(void 0===i.ct)throw new Jq("New playlist skips over an incomplete segment.");e=i.$Bt+i.ct,n=i.TBt-t.TBt,s=r;for(let t=0;t<r;t++)this.oMt[t].cUt()}else e=i.uQt,n=0,s=0;for(let i=0;i<t.Zot.length;i++,s++){const r=t.Zot[i],o=0===i,h=t.NBt&&i===t.Zot.length-1,a=r.ct,u=r.TBt+n;if(s<this.oMt.length){const t=this.oMt[s];0,t.qBt(r,o,h)}else{let t=r;if(this.oMt.length>0&&void 0===t.yBt){t=Ei({},t,{yBt:this.oMt[this.oMt.length-1].yBt})}const i=new qq(e,u,o,h,t);i.WBt=this.JBt,this.oMt.push(i)}void 0!==a&&(e+=a)}}hQt(t){if(0===this.oMt.length)return{aQt:0,uQt:0};const i=this.oMt[0].oBt,e=this.oMt[this.oMt.length-1].oBt,s=t.Zot[0].oBt-t.nBt,n=t.Zot[t.Zot.length-1].oBt;let r=0,o=0;if(s<i){const e=this.Zot[0].bBt,n=t.Zot[0].bBt;if(!(e&&n&&e<n))return void zi.JPt(uK,"Ignoring older playlist (first media sequence number is "+s+", but previous playlist already started at "+i+")");r=this.oMt.length,this.oQt()}else{if(n<e)return void zi.JPt(uK,"Ignoring older playlist (last media sequence number is "+n+", but previous playlist already ended at "+e+")");if(e<s){var h;o=null!=(h=function(t,i){const e=No(t,(t=>void 0!==t.bBt));if(void 0===e)return;const s=function(t){let i=0;for(const s of t){if(s.ABt)return;if(s.bBt)return[s,i];var e;i+=null!=(e=s.ct)?e:0}return}(i.Zot);if(void 0===s)return;const[n,r]=s;if(e.TBt!==n.TBt)return;const o=(n.bBt.getTime()-e.bBt.getTime())/1e3;return e.$Bt+o-r}(this.oMt,t))?h:function(t,i,e){const s=t[t.length-1];var n;const r=null!=(n=s.ct)?n:x.max(e,s.sUt),o=e*(i-s.oBt-1);return s.$Bt+r+o}(this.oMt,s,this.IUt),zi.KPt(uK,"New playlist (starting at "+s+") is entirely after previous playlist (ending at "+e+"), resetting playlist and restarting at "+o+"s"),r=this.oMt.length,this.oQt()}else{0;const t=Jv(this.oMt,(t=>t.oBt===s));0,o=this.oMt[t].$Bt,t>0&&(r=t)}}return{aQt:r,uQt:o}}tQt(t){let i=t.SBt.map(gq);if(t.$zt&&t.LBt.ZC===Kq.dUt&&(i=this.FUt.concat(i)),this.FUt=sK(i),t.rBt)for(const i of t.rBt){const t=Jv(this.FUt,(t=>t.o===i));t>=0&&Mn(this.FUt,t)}}cQt(t,i){if(this.JBt!==t){this.JBt=t;for(const t of this.oMt)t.WBt=this.JBt;this.iQt()}this.WUt=i}oQt(){this.JBt=void 0,this.WUt=void 0}constructor(t,i,e){this.BUt=void 0,this.QUt=void 0,this.KUt=void 0,this.JUt=void 0,this.IUt=void 0,this.DUt=void 0,this.EUt=void 0,this.kUt=void 0,this.oMt=[],this.FUt=[],this.xUt=!1,this.LUt=void 0,this.CUt=!1,this.jUt=Ur.dI,this.D5=Mo.PP(),this.NUt=Mo.PP(),this.JM=void 0,this.VUt=-1/0,this.WUt=void 0,this.$yt=t,this.mQ=i,this.rQt=e}},lK=class t{static get Ld(){return null!=this.cht||(this.cht=new t),this.cht}eMt(t){return t.lB}sMt(t){return t.dB}nMt(t,i){return To(t,i)}rMt(t,i,e){return(t-i)/(e-i)}};function dK(t){return void 0!==t.bBt}function fK(t){return void 0!==t.pBt}function gK(t){return fK(t)?t.iUt:0===t.KBt&&t.XBt.iUt}function _K(t,i){return fK(t)?fK(i)?t.oBt+1===i.oBt:0===i.KBt&&_K(t,i.XBt):t.KBt===t.XBt.pBt.length-1?_K(t.XBt,i):!fK(i)&&t.XBt===i.XBt&&t.KBt+1===i.KBt}r(),r(),r();var vK=class extends Co{get name(){return"DiscontinuityMisalignmentError"}constructor(){super("Tried to wait for multiple discontinuity mappings at the same time")}};var wK=class{lQt(t){const i=this.dQt.get(t);return void 0!==i&&mK(i)}fQt(t){if(this.gQt()>t)return Promise.reject(new vK);const i=[];for(const s of this._Qt){var e;if(s<t)null==(e=this.dQt.get(s))||e.vQt.nM(new vK),this.dQt.delete(s);else i.push(s)}return this._Qt=i,-1===this._Qt.indexOf(t)&&this._Qt.push(t),this.wQt(t).vQt.rM}mQt(t){const i=this.dQt.get(t);if(!i||!mK(i))throw new b("LLHLSPlayer - Missing timestamp mapping for discontinuity #"+t);return i}pQt(t){return this.mQt(t).rQ}AQt(t,i){const e=fK(i)?i:i.XBt,s=this.mQt(e.TBt);let n=t.Kz(s.rQ);if(s.yQt){const t=H.BU(i.lB).qB(n);if(t.ZB().UB(kN())){const i=x.round(t.BB()/EN().BB());n=n.Kz(EN().TU(i))}}return n}bQt(t,i){return this.AQt(t,i).qB(t)}MQt(t,i,e,s,n,r){this.TQt<t&&(this.TQt=t);const o=this.wQt(t);void 0===o.rQ&&(o.SQt.some((t=>t.sct===i))||(o.SQt.push({sct:i,NQt:e,IQt:s.OU(e.Lj),DQt:n,yQt:r}),this.EQt(o,t)))}EQt(t,i){if(t.rQ||!this.kQt(t))return;const e=function(t){return ow(t,pK)}(t.SQt);t.rQ=e.IQt.qB(e.NQt),t.yQt=t.SQt.some((t=>t.yQt)),t.vQt.sM(),nt(t.SQt),ra(this._Qt,i)}kQt(t){return this.xQt.length>0&&this.xQt.every((i=>t.SQt.some((t=>t.sct===i))))}wQt(t){if(this.dQt.has(t))return this.dQt.get(t);{const i={rQ:void 0,yQt:!1,vQt:new xh,SQt:[]};return this.dQt.set(t,i),i}}LQt(t){this.xQt=t,this.dQt.forEach(((t,i)=>this.EQt(t,i)))}CQt(){this.TQt=-1}gQt(){return this.TQt}wy(){this.dQt.forEach((t=>t.vQt.Ty())),this.dQt.clear()}constructor(){this.xQt=[],this.dQt=pc(),this._Qt=[],this.TQt=-1}};function mK(t){return void 0!==t.rQ}function pK(t,i){return-function(t,i){if(t.yQt||i.yQt)return function(t,i){let e=t.qB(i);return t.JB()||i.JB()||(e.FB(kN())?e=e.qB(EN()):e.WB(kN().XB())&&(e=e.Kz(EN()))),e}(t.NQt,i.NQt).QB(H.sU);return t.NQt.QB(i.NQt)}(t,i)||function(t,i){return t.DQt===i.DQt?$n.Zr:t.DQt?$n.iy:$n.ey}(t,i)||function(t,i){return t.IQt.QB(i.IQt)}(t,i)}var AK=class{get jQt(){return this.OQt}get tzt(){return this.RQt}get tP(){return this.PQt}qBt(t,i){if(cq(t))if(0===this.RQt.length)this.zQt(t);else{if(!i)return void zi.JPt("HLSModel","No rendition was provided to update the playlist. Ignoring the update.");i.pPt.qBt(t)}else{if(0!==this.RQt.length)return void zi.JPt("HLSModel","Master playlist can only be applied once. Ignoring the update.");this.BQt(t)}}zQt(t){const i=this.UQt(t.$yt);i.qBt(t);const e=this.QQt(Se.SI,i),s=this.QQt(Se.NI,i),n=new Wq({$yt:i.$yt,FY:0,Xyt:0,qyt:NaN,dht:void 0,gLt:void 0,Igt:0,Uzt:[],Yzt:void 0,Wzt:void 0,Qzt:void 0,Gzt:void 0,Vzt:void 0,Fzt:void 0},i,[e,s]);this.RQt.push(n)}BQt(t){this.OQt.push(...t.vBt);const i=this.FQt(t);for(const e of t.wBt){const s=i.filter((t=>bK(t,e)));this.YQt(e,s);const n=new Wq(e,this.UQt(e.$yt,t.Cn),s);this.RQt.push(n)}}UQt(t,i){let e=this.VQt.get(t);return void 0===e&&(e=new cK(t,i,this.rQt),this.VQt.set(t,e)),e}FQt(t){const i=[];for(const e of t.zj)if(void 0===e.$yt){for(const s of t.wBt)if(yK(e.YA,e.MPt,s)){const t=new CX(e,this.UQt(s.$yt));i.push(t)}}else{const t=new CX(e,this.UQt(e.$yt));i.push(t)}return i}QQt(t,i){return new CX({YA:t,$yt:void 0,MPt:"",gs:void 0,Bzt:void 0,l:"",APt:!0,yPt:!1,bPt:!1,NPt:void 0,TPt:void 0,lLt:void 0},i)}YQt(t,i){const e=i.filter((t=>t.YA===Se.SI)),s=i.filter((t=>t.YA===Se.NI)),n=t.dht&&(t.dht.NLt||t.dht.TLt);if((!n||t.dht.NLt)&&0===s.length){const e=this.QQt(Se.NI,this.UQt(t.$yt));i.push(e)}if((!n||t.dht.TLt)&&0===e.length){const e=this.QQt(Se.SI,this.UQt(t.$yt));i.push(e)}t.dht&&t.dht.Pzt}GQt(t){for(const i of this.RQt)for(const e of i.hzt)if(e===t)return e}WQt(t){for(const i of this.RQt)if(i===t)return i}ZQt(t){for(const i of this.RQt)if(Qa(i.hzt,t))return i}wy(){nt(this.RQt),nt(this.OQt),this.VQt.clear(),this.PQt.wy()}constructor(t,i){this.RQt=[],this.OQt=[],this.VQt=ll(),this.PQt=new wK,this.HQt=t,this.rQt=i}};function yK(t,i,e){switch(t){case Se.SI:return e.Qzt===i;case Se.NI:return e.Gzt===i;case Se.AQ:return e.Vzt===i;case Se.Azt:return e.Fzt===i}return!1}function bK(t,i){return yK(t.YA,t.MPt,i)&&(!t.SPt||t.pPt.$yt===i.$yt)}r();var MK=class extends Jr{constructor(t){super(Cl.XQt),this.EPt=t}};Qi(),r();var TK=class extends Jr{constructor(t){super(Cl.qQt),this.EPt=t}},SK="HlsModelUpdater",Cl=function(t){return t.XQt="KQt",t.qQt="JQt",t}({}),NK=class extends tu{get $Qt(){return this.tFt}get iFt(){return this.eFt}get Tr(){return this.nbt}get sFt(){return this.nFt}async rFt(t){const i=this.nbt.HQt;if(!i)throw new b("HLSModelUpdater - Could not load HLS playlist: The provided source is empty.");this.yo(new Gi);const e=await this.oFt(i,{},2,!0,t),s=e.pPt;if(!uq(s)&&!cq(s))throw new b("HLSModelUpdater - Could not load HLS playlist: The playlist is invalid.");uq(s)||zi.Hj(SK,"Detected media playlist only HLS stream."),this.hFt(s),e.aFt&&(this.eFt=!0,await this.uFt(t)),this.tFt=!0}async cFt(t,i,e,s){const n=this.nbt.GQt(t);if(!n)throw new b("HLSModelUpdater - Could not load HLS playlist for rendition: the rendition does not exist on the internal model.");const r={oBt:i,ZUt:e,ZC:kK(n)},o=Df(x.max(1,3*t.pPt.zUt));try{await this.lFt(n,r,s,o)}catch(t){throw X(t),this.dFt(n),t}}fFt(t,i){const e=this.nbt.GQt(t);if(!e)throw new b("HLSModelUpdater - Could not load HLS playlist for rendition: the rendition does not exist on the internal model.");const s={oBt:void 0,ZUt:void 0,ZC:kK(e)},n=Df(x.max(1,3*t.pPt.zUt));return this.lFt(e,s,i,n)}gFt(t,i){return this._Ft.has(t.Gx)||this._Ft.set(t.Gx,new xh),Ao(this._Ft.get(t.Gx).rM,i)}dFt(t){this.yo(new TK(t))}async lFt(t,i,e,s){const n=t.pPt.HPt(i);let r;try{r=(await this.oFt(n,i,0,this.eFt,e,s)).pPt}catch(i){throw X(i),t.pPt.YUt=Fe.Og(),i}if(!cq(r))throw new b("HLSModelUpdater - Could not load HLS playlist for rendition: the playlist is not a media playlist.");if(this.vFt&&t!==this.vFt&&!this.vFt.pPt.RUt)try{await this.fFt(this.vFt,e)}catch(i){X(i),this.vFt=t,this.wFt()}try{this.hFt(r,t)}catch(n){if(n instanceof Jq&&void 0!==i.ZC){const n=Ei({},i,{ZC:void 0});return this.lFt(t,n,e,s)}throw n}this.mFt(t),this.vFt=t}async oFt(t,i,e,s,n,r){if(zi.Hj(SK,"Loading HLS playlist at "+t+"."),s){const i=await this.pFt(t,n);if(void 0!==i)return{pPt:i,aFt:!0}}return{pPt:await this.AFt(t,i,e,n,r),aFt:!1}}async pFt(t,i){try{const e=await this.plt.Sot([t]);if(yi(i),void 0!==e)return Gq(e.responseURL,{},e.data)}catch(t){X(t)}}async AFt(t,i,e,s,n){const r={zu:t,oI:Ee.ON,zI:this.xSt,LI:Ve.GET,YA:ar.fI,ly:s,CI:n},o=await ao((()=>this.yFt(r)),s,e);return Gq(o.lI,i,o.rI)}async yFt(t){const i=await this.OQ.hI(t);return{rI:await i.UN(),lI:i.lI}}async uFt(t){yi(t);const i=[];for(const e of this.nbt.tzt)for(const s of e.hzt)i.push(this.bFt(s,t));await Promise.all(i)}async bFt(t,i){try{const e=await this.plt.Sot([t.pPt.$yt]);yi(i),void 0===e||t.pPt.RUt||await this.fFt(t,i)}catch(t){X(t)}}wFt(){for(const t of this.nbt.tzt)for(const i of t.hzt)i!==this.vFt&&void 0!==i.pPt.WBt&&(i.pPt.RUt?this.mFt(i):i.pPt.oQt())}mFt(t){if(0!==t.pPt.Zot.length){if(!this.vFt)return this.vFt=t,void this.vFt.pPt.cQt(0,void 0);if(this.MFt(this.vFt),!this.MFt(t)&&void 0===t.pPt.WBt){const i=this.TFt(t,this.vFt);zi.KPt(SK,"Assuming global timeline offset of "+i+"s for rendition "+t.pPt.$yt+"."),t.pPt.cQt(i,void 0)}}}TFt(t,i){if(IK(t)){const e=t.pPt.Zot[0],s=i.pPt.Zot[0];return zi.KPt(SK,"Synchronizing by start of VOD: "+s.lB+" vs "+e.lB),s.lB-e.$Bt}const e=function(t,i){let e=t.length-1,s=i.length-1;for(;e>=0&&s>=0;){const n=t[e],r=i[s];if(n.TBt>r.TBt)e--;else if(n.TBt<r.TBt)s--;else if(n.ABt){if(r.ABt)return{segment:n,referenceSegment:r};s--}else e--}return}(t.pPt.Zot,i.pPt.Zot);if(void 0!==e){const{segment:t,referenceSegment:i}=e;return zi.KPt(SK,"Synchronizing by start of discontinuity #"+i.TBt+": "+i.lB+" vs "+t.lB),i.lB-t.$Bt}const s=EK(t.pPt.Zot);if(void 0!==s){const t=EK(i.pPt.Zot);if(void 0!==t){zi.KPt(SK,"Synchronizing by PDT:",t.bBt.toISOString()+" vs "+s.bBt.getTime());return t.lB-s.$Bt-(t.bBt.getTime()-s.bBt.getTime())/1e3}}const n=DK(i),r=DK(t);var o;const h=null!=(o=t.pPt.WBt)?o:0;return zi.KPt(SK,"Synchronizing by last segment:",n+" vs "+r),n-r+h}MFt(t){const i=this.nbt.GQt(t);if(!i)return!1;if(IK(i))return!1;const e=function(t,i){return No(t,(t=>void 0!==t.xst&&i.lQt(t.TBt)))}(i.pPt.Zot,this.nbt.tP);if(void 0===e)return!1;if(i.pPt.GUt===e.TBt)return!0;const s=this.nbt.tP.AQt(e.xst,e).BB()-e.$Bt;return zi.KPt(SK,"Synchronize by media timestamp: "+s+"s for rendition "+t.pPt.$yt+"."),i.pPt.cQt(s,e.TBt),(void 0===this.vFt||void 0===this.vFt.pPt.GUt||this.vFt.pPt.GUt<e.TBt)&&(this.vFt=i),!0}hFt(t,i){var e;(this.nbt.qBt(t,i),cq(t)&&i)&&(this.nFt=i,this.yo(new MK(i)),null==(e=this._Ft.get(i.Gx))||e.sM(),this._Ft.delete(i.Gx));this.yo(new eG)}SFt(t,i){for(const e of this.nbt.tzt){const s=dl(e.ezt,(t=>t.pPt===i));void 0!==s&&void 0!==t.NLt&&(s.dht=_q(s.dht,t));const n=dl(e.izt,(t=>t.pPt===i));void 0!==n&&void 0!==t.TLt&&(n.dht=_q(n.dht,t)),e.OBt||void 0===s&&void 0===n||(e.dht=_q(e.dht,t))}}NFt(t,i){for(const e of this.nbt.tzt){const s=dl(e.ezt,(t=>t.pPt===i));void 0!==s&&void 0===t.NLt&&e.QBt(s);const n=dl(e.izt,(t=>t.pPt===i));void 0!==n&&void 0===t.TLt&&e.QBt(n)}}wy(){this.Bo(),this.nbt.wy(),this._Ft.forEach((t=>t.Ty())),this._Ft.clear()}constructor(t,i,e,s,n){super(),this.OQ=t,this.plt=i,this.xSt=e,this.tFt=!1,this.eFt=!1,this.vFt=void 0,this.nFt=void 0,this._Ft=pc(),this.nbt=new AK(s,n)}};function IK(t){return t.pPt.NBt||t.pPt.DBt===Ur.Nzt}function DK(t){const i=t.pPt.Zot;return i[i.length-1].dB}function EK(t){return No(t,(t=>void 0!==t.bBt))}function kK(t){if(void 0!==t.pPt.Jzt&&!t.pPt.NBt&&!(void 0===t.pPt.PUt||Fe.Og()/1e3-t.pPt.PUt>=t.pPt.Jzt/2))return t.pPt.$zt?Kq.dUt:Kq.lUt}var xK=class{get nt(){return this.upt}tQt(t){if(0===t.pPt.SBt.length)return;this.IFt||(this.IFt=this.cz.Wk(z.MQ,void 0,void 0,void 0,void 0,El.DATE_RANGE),this.upt.tt(this.IFt));eK(this.IFt,t.pPt.SBt,(i=>{var e;return null!=(e=t.pPt.UBt(i))?e:NaN}))}constructor(t,i){this.DFt=t=>{this.tQt(t.EPt)},this.kIt=t,this.cz=i,this.upt=new Cc,this.kIt.yn(Cl.XQt,this.DFt)}};r();var LK=class extends Jr{constructor(){super(rs.dPt)}};r(),r(),r();var CK=class{get EFt(){return this.H4}get TE(){return gU(this.Fht.TE,this.Fht.L3)}get Zot(){return this.oMt}get vpt(){return this.dpt}kFt(t){var i;return null==(i=this.xFt(t))?void 0:i.EPt}lft(t){this.H4=t,this.LFt()}cft(t,i,e,s,n,r){this.oMt.push({EPt:t,vlt:i,CFt:Mo.RP(n,r),jFt:Mo.RP(e,s)}),this.LFt()}xFt(t){return dl(this.oMt,(i=>i.jFt.gr(t)))}Oct(t){return dl(this.oMt,(i=>i.vlt===t))}Fdt(t,i){return dl(this.oMt,(e=>e.EPt===t&&_K(e.vlt,i)))}I3(){const t=this.TE;t.V>0&&(this.dpt=t.jn(t.V-1))}LFt(){const t=this.Fht.TE;this.oMt=this.oMt.filter((i=>0!==t.Sn(i.jFt).V))}constructor(t){this.Fht=t,this.oMt=[],this.H4=void 0,this.dpt=void 0}},jK=class{get YA(){return this.Zp}get OFt(){return ou(this.Zp)}get RFt(){return this.$ut}get PFt(){return this.zFt}get oxt(){return void 0!==this.BFt}UFt(){if(this.oxt)throw new b("Cannot perform new operation while BufferAppender is still busy")}Oht(t){this.Fht!==t&&(this.UFt(),this.Fht=t,this.$ut=new CK(t))}QFt(){return this.BFt?this.BFt.rM:Promise.resolve()}FFt(t){const i=this.$ut.vpt;return void 0!==i&&this.YFt(t,i)}YFt(t,i){var e;const s=x.min(t,i);var n;return null!=(n=null==(e=this.$ut.TE.fP().yP(this.PFt).CP(s))?void 0:e.gr(i))&&n}VFt(t){return this.$ut.kFt(t)}Ty(){this.rN.Ty(),this.rN=new Wt}F4(t){this.UFt(),this.BFt=new xh;const i=i=>{this.WFt.GFt(t),this.ZFt(i)};this.Y4(t,this.rN.ly).then(i,i)}async Y4(t,i){zi.KPt(ZX,"Appending initializer",yt(t.HFt.$yt)),await this.Fht.F4(t,i),zi.KPt(ZX,"Appended initializer",yt(t.HFt.$yt)),this.$ut.lft(t)}Mft(t){this.UFt(),this.BFt=new xh;const i=i=>{this.WFt.GFt(t),this.ZFt(i)};this.XFt(t,this.rN.ly).then(i,i)}async XFt(t,i){const e=t.EPt;if(void 0===e.pPt.dzt)throw new b("MediaBufferWrapper - Cannot append HLSAsset to "+this.Zp+" MediaBuffer for a HLSRendition with an undefined targetDuration.");const s=this.$ut.TE.hP,n=this.Fht.TE;zi.KPt(ZX,"Appending",yt(t.HFt.$yt)),await this.Fht.B4(t,i),zi.KPt(ZX,"Appended",yt(t.HFt.$yt),s,this.$ut.TE.hP);const r=t.lB,o=r+t.ct,h=t.HFt,a=h.lB;var u;const c=h.lB+(null!=(u=h.ct)?u:0);this.$ut.cft(e,h,r,o,a,c);const l=this.Fht.TE.yP(n),d=this.$ut.Fdt(e,h);if(this.YA===Ri.NI)if(d)if(this.qFt(d))if(0===l.V){if(void 0===this.$ut.Oct(h)){const t=this.Fht.L3.Sn(new Mo([r,o]));this.zFt=this.zFt.pP(t)}}else{const t=l.Cn(0),i=new Mo([t,o]);if(this.zFt=this.zFt.yP(i),t>r){const i=this.Fht.L3.Sn(new Mo([r,t]));this.zFt=this.zFt.pP(i)}}else{const t=l.V>0&&l.Cn(0)<r?l.Cn(0):r;this.zFt=this.zFt.yP(new Mo([t,o]))}else if(0===l.V){const t=this.Fht.L3.Sn(new Mo([r,o]));this.zFt=this.zFt.pP(t)}else{var f;const t=l.Cn(0),i=null==(f=n.CP(r))?void 0:f.jn(0),e=i&&i>r?i:r;if(t>e){const t=this.Fht.L3.Sn(new Mo([e,l.Cn(0)]));this.zFt=this.zFt.pP(t)}}t.HFt.ZBt&&this.$ut.I3()}qFt(t){const i=t.jFt,e=i.Cn(0),s=i.jn(i.V-1),n=i.uP(0),r=i.lP(i.V-1);return this.zFt.MP(e,s,n,r)}constructor(t,i,e,s,n){this.BFt=void 0,this.rN=new Wt,this.zFt=Mo.PP(),this.ZFt=t=>{this.BFt&&(t?RL(t)&&this.OFt?this.KFt.JK(this.Fht.TE.jP)?this.BFt.sM():this.BFt.nM(t):Tu(t)?this.BFt.sM():this.BFt.nM(t):this.BFt.sM(),this.BFt=void 0)},this.Zp=t,this.WFt=e,this.Fht=i,this.$ut=s,this.KFt=n}};r(),r();var OK=class{async JFt(t,i,e,s){const n=await this.$Ft(i,s);return await this.tYt.JFt(t,n,e)}async $Ft(t,i){var e;if((null==(e=this.iYt)?void 0:e.zu)!==t){zi.KPt("HLSDecryptor","Fetching new AES-128 decryption key from "+t+".");const e=await this.OQ.hI({zu:t,oI:Ee.LN,LI:Ve.GET,ly:i,YA:ar.vI,OI:cl.TI,zI:this.xSt}),s=await e.FN(),n=new T(s);this.iYt={zu:t,rI:n}}return this.iYt.rI}constructor(t,i,e){this.tYt=t,this.OQ=i,this.xSt=e,this.iYt=void 0}};r(),Qi();var RK=class{async hI(t,i,e,s,n){const r=await this.eYt(t,i,e,Ee.LN,s,n),o=await r.FN(n);return{httpStatusCode:r.nI,response:new T(o)}}async sYt(t,i,e,s,n){return(await this.eYt(t,i,e,Ee.jN,s,n)).YN(n)}async eYt(t,i,e,s,n,r){let o;t.EMt&&(o=aq(t.EMt.Cn,t.EMt.V),0===o[0]&&o[1]===tt&&(o=void 0));const h=o?{Range:"bytes="+o[0]+"-"+o[1]}:void 0,a=new Gs({zu:t.zD,oI:s,aI:h,zI:this.xSt,LI:Ve.GET,YA:i,OI:e,RI:this.Qct,QI:s===Ee.jN,BI:n,ly:r});try{const i=await this.plt.kot(t.zD,o);if(yi(r),void 0!==i)return null==n||n(i.buffer.byteLength,i.buffer.byteLength),new qt({hI:a,oI:a.oI,rI:i.buffer})}catch(t){X(t)}return await ao((()=>Ao(this.OQ.hI(a),a.ly)),r,this.Krt)}constructor(t,i,e,s,n=2){this.OQ=t,this.plt=i,this.Qct=e,this.xSt=s,this.Krt=n}};r(),ds(),Qi();var PK=class{nYt(){return this.rYt.pPt.Kzt}async oYt(t,i,e){if(!this.nYt())throw new b("Could not perform blocking playlist update.");const s=this.hYt,n={oBt:t,ZUt:i};return void 0!==s&&function(t,i,e){if(t.oBt===i.oBt){if(t.ZUt===i.ZUt)return!0;if(0===t.ZUt&&void 0===i.ZUt)return!0}if(t.oBt===i.oBt+1&&0===t.ZUt&&void 0!==i.ZUt){const t=e.Oct(i.oBt);if(t&&t.$yt&&i.ZUt>=t.pBt.length)return!0}return!1}(s,n,this.rYt.pPt)||(await this.aYt(),this.uYt(n)),this.kIt.gFt(this.rYt,e)}cYt(t){return this.uYt(),this.kIt.gFt(this.rYt,t)}uYt(t){if(!this.lYt&&!this.dYt){const i=()=>{this.lYt=void 0};this.lYt=this.fYt(t,this.gYt.ly).then(i,i)}}async aYt(){this.lYt&&(this.gYt.Ty(),this.gYt=new Wt,await this.lYt.catch(ya),this.lYt=void 0)}async fYt(t,i){let e=t;for(;;){if(yi(i),this.rYt.pPt.NBt&&this.rYt.pPt.RUt)return;null!=e||(e=this._Yt()),this.hYt=e;try{if(e)await this.kIt.cFt(this.rYt,e.oBt,e.ZUt,i);else{const t=Fe.Og()-this.An,e=1e3*this.rYt.pPt.zUt;t<e&&await kt(e-t,i),await this.kIt.fFt(this.rYt,i)}}catch(t){throw this.hYt=void 0,X(t),this.kIt.dFt(this.rYt),t}e=void 0,this.An=Fe.Og()}}_Yt(){const t=this.rYt.pPt;if(!t.Kzt||t.NBt||0===t.Zot.length)return;const i=t.Zot[t.Zot.length-1];return i.$yt?{oBt:i.oBt+1,ZUt:t.OUt?0:void 0}:{oBt:i.oBt,ZUt:i.pBt.length}}wy(){this.dYt=!0,V(this.aYt())}constructor(t,i){this.lYt=void 0,this.gYt=new Wt,this.An=-1/0,this.hYt=void 0,this.dYt=!1,this.kIt=t,this.rYt=i,this.uYt()}};r();var zK=function(t){return t[t.yzt=0]="yzt",t[t.bzt=1]="bzt",t[t.gI=2]="gI",t[t._I=3]="_I",t}({});r(),r();var Li="AssetExtractor",BK=class{vYt(t,i,e){let s=i;for(const i of this.wYt){if(s>=t)return!0;if(s<i.Cn)return!1;if(s<i.jn){if(e<=i.jn)return!0;s=i.jn}}return s>=t}mYt(t,i){const e=[];for(let s=0;s<this.wYt.length;s+=1){const n=this.wYt[s],r=t-n.Cn,o=n.rI.length,h=x.min(o,x.max(r,0)),a=x.max(0,i+r),u=vi(n.rI,h,a);u.length&&(s=this.pYt(s,n,t,h,a),e.push(u))}return e}AYt(t,i){this.wYt.push({Cn:t,jn:t+i.length,rI:i})}pYt(t,i,e,s,n){let r=t;this.wYt.splice(r,1),r-=1,i.Cn<e&&(r+=1,this.wYt.splice(r,0,{Cn:i.Cn,jn:e,rI:vi(i.rI,0,s)}));const o=e+n-s;return o<i.jn&&(r+=1,this.wYt.splice(r,0,{Cn:o,jn:i.jn,rI:vi(i.rI,n)})),r}constructor(){this.wYt=[]}},UK=class{get yYt(){return this.bYt}async MYt(){const t=await this.Wg.read();if(t.done)throw this.bYt=1/0,new b("No more data can be read from the given stream.");return this.bYt+=t.value.length,t.value}async TYt(t){await this.Wg.cancel(t)}constructor(t,i){this.bYt=i,this.Wg=t.getReader()}},QK=class{SYt(){this.NYt.sM(),this.NYt=new xh}IYt(t){const{kMt:i,xMt:e}=YK(this.tUt.EMt),s=this.DYt.mYt(i,e-i);zi.KPt(Li,"Collected "+s.length+" chunks.");for(const i of s)t.enqueue(i)}async readAndSliceOutAssetBytes(t){await this.EYt.rM;const{kMt:i,xMt:e}=YK(this.tUt.EMt);try{for(;;){const s=this.Wg.yYt,n=await this.Wg.MYt(),r=n.length;zi.KPt(Li,"Read "+r+" at "+s+" for extraction of "+yt(this.tUt));const o=x.min(s+r,i)-s;if(!(o>0)){if(s+r<=e)return zi.KPt(Li,"Extracting the read data range for extraction of "+yt(this.tUt)),t.enqueue(n),this.SYt(),V(this.readAndSliceOutAssetBytes(t));{const i=e-s,o=vi(n,0,i),h=vi(n,i);return o.length>0&&(zi.KPt(Li,"Extracting "+o.length+" bytes for extraction of "+yt(this.tUt)),t.enqueue(o)),zi.KPt(Li,"Of the read "+r+" bytes, the last "+h.length+" will be stored locally for extraction of "+yt(this.tUt)),this.DYt.AYt(s+i,h),zi.KPt(Li,"Extraction of "+yt(this.tUt)+" completed as the entire request has been fulfilled."),this.kYt(t),void(this.xYt&&(zi.KPt(Li,"Aborting stream upstream as no more bytes are needed from "+yt(this.tUt)+"."),await this.Wg.TYt("AssetExtraction - AbortOnEnd")))}}{const i=vi(n,0,o),e=vi(n,o);if(zi.KPt(Li,"Of the read "+r+" bytes, the first "+o+" will be stored locally for extraction of "+yt(this.tUt)),this.DYt.AYt(s,i),e.length>0)return zi.KPt(Li,"Extracting "+e.length+" bytes for extraction of "+yt(this.tUt)),t.enqueue(e),this.SYt(),V(this.readAndSliceOutAssetBytes(t))}}}catch(i){zi.KPt(Li,"Extraction of "+yt(this.tUt)+" completed as the entire source stream has been read."),this.kYt(t)}}kYt(t){t.close(),this.SYt(),this.LYt.sM()}start(t){zi.KPt(Li,"Preparing to push all collected data to controller for extraction of "+yt(this.tUt)),this.IYt(t),zi.KPt(Li,"Collected data pushed to controller for extraction of "+yt(this.tUt));const{xMt:i}=YK(this.tUt.EMt);this.Wg.yYt>=i?(zi.KPt(Li,"Extraction of "+yt(this.tUt)+" completed as the entire request has been fulfilled."),this.kYt(t)):(zi.KPt(Li,"Continuing read from original stream for extraction of "+yt(this.tUt)),V(this.readAndSliceOutAssetBytes(t)))}get CYt(){return this.LYt.rM}pull(){return this.EYt.sM(),this.EYt=new xh,this.NYt.rM}constructor(t,i,e,s){this.LYt=new xh,this.tUt=t,this.Wg=i,this.DYt=e,this.xYt=s,this.EYt=new xh,this.NYt=new xh}},FK=class{Jz(t){if(!dq(this.tUt,t))return!1;const{kMt:i,xMt:e}=YK(t.EMt);return this.DYt.vYt(this.jYt.yYt,i,e)}async Nmt(t,i){void 0===i&&(i=!1);const e=this.jYt,s=this.DYt;if(zi.Hj(Li,"Extracting data from "+yt(t)+" out of "+yt(this.tUt)),this.OYt&&(zi.KPt(Li,"Awaiting previous extraction before extracting "+yt(t)+" out of "+yt(this.tUt)),await this.OYt),!this.Jz(t))throw new b("The extractor does not contain the data requested");const n=new QK(t,e,s,i);return this.OYt=n.CYt,new kc(n)}constructor(t,i){this.tUt=i;const{kMt:e}=YK(this.tUt.EMt);this.jYt=new UK(t,e),this.DYt=new BK}};function YK(t){if(t){const i=t.Cn;return{kMt:i,xMt:void 0!==t.V?i+t.V:tt}}return{kMt:0,xMt:tt}}ds();var VK=class{async $n(){const t=await this.RYt.sYt(this.tUt,ar._I,cl.dI,void 0,this.rN.ly);return new FK(t,this.tUt)}Jz(t){return dq(this.tUt,t)}async Nmt(t,i){void 0===i&&(i=!1);const e=await this.Cpt;return await Ao(e.Nmt(t,i),this.rN.ly)}Ty(){this.Cpt.catch(ya),this.rN.Ty()}constructor(t,i){this.tUt=t,this.RYt=i,this.rN=new Wt,this.Cpt=this.$n()}};Qi(),r();var GK=class extends Jr{constructor(t){super(JK.PYt),this.RI=t}};r();var WK=class extends Jr{constructor(t,i,e,s,n,r,o){super(JK.zYt),this.uri=t,this.BYt=i,this.RI=e,this.mediaSequenceNumeber=s,this.mediaTrackId=n,this.UYt=r,this.httpStatusCode=o}};function ZK(t,i,e){const s=fK(e)?e:e.XBt;if(i.lQt(s.TBt)){if(void 0!==e.xst)return i.AQt(e.xst,e).BB();if(e!==s&&void 0!==s.xst){const t=i.AQt(s.xst,s).BB();return e.lB+(t-s.lB)}}const n=t.pPt.Oct(s.oBt-1);if(void 0!==n&&i.lQt(n.TBt)){if(n.pBt.length>0){const t=n.rUt(n.pBt.length-1);if(void 0!==t.xst){const s=i.AQt(t.xst,t).BB();return e.lB+(s-t.lB)}}if(void 0!==n.xst){const t=i.AQt(n.xst,n).BB();return e.lB+(t-n.lB)}}const r=t.pPt.Oct(s.oBt+1);if(void 0!==r&&i.lQt(r.TBt)){if(r.pBt.length>0){const t=r.rUt(0);if(void 0!==t.xst){const s=i.AQt(t.xst,t).BB();return e.lB+(s-t.lB)}}if(void 0!==r.xst){const t=i.AQt(r.xst,r).BB();return e.lB+(t-r.lB)}}return e.lB}function HK(t){return void 0!==t.xst}function XK(t,i,e,s){for(let n=i;n<t.length;n++){const i=t[n];if(i.TBt!==e)break;if(HK(i)){if(s(i,n))break}}}function qK(t,i,e,s){for(let n=i;n>=0;n--){const i=t[n];if(i.TBt!==e)break;if(HK(i)){if(s(i,n))break}}}r();var KK="HlsPlaylistDownloader",JK=function(t){return t.PYt="segmentdownloadprogress",t.zYt="segmentdownloaded",t}({}),$K=class extends tu{QYt(t){this.FYt.wy(),this.FYt=new PK(this.kIt,t),this.oxt?this.YYt=t:(this.rYt=t,this.VYt=0,this.GYt=void 0,this.WYt=void 0)}get oxt(){return void 0!==this.ZYt}QFt(){return this.ZYt?this.ZYt.rM:Promise.resolve()}HYt(){return this.WFt.HYt()}XYt(t){this.WFt.XYt(t)}Ty(){var t,i,e;this.qYt.Ty(),this.qYt=new Wt,null==(t=this.KYt)||t.Ty(),this.KYt=void 0,null==(i=this.JYt)||i.Ty(),null==(e=this.$Yt)||e.Ty(),this.JYt=void 0,this.$Yt=void 0,this.VYt=0,this.GYt=void 0,this.WYt=void 0}wy(){this.FYt.wy()}get EPt(){var t;return null!=(t=this.YYt)?t:this.rYt}get xxt(){if(!this.rYt.pPt.NBt||void 0===this.GYt)return!1;const t=this.rYt.pPt.Oct(this.GYt);if(!t.ZBt)return!1;if(void 0!==this.WYt){if(!t.rUt(this.WYt).ZBt)return!1}return!0}tVt(t){const i=this.rYt.pPt.HUt(t);if(!i)return!1;if(void 0!==this.GYt){const e=i.oBt===this.GYt;return void 0!==this.WYt?i.oUt(t)===i.rUt(this.WYt)&&e:e}return!1}iVt(t){let i;if(void 0===this.GYt||t<this.VYt-1e-6)i=this.eVt(t);else if(i=this.sVt(this.GYt,this.WYt),void 0!==i){const[e,s]=i,n=ZK(this.rYt,this.kIt.Tr.tP,null!=s?s:e),r=3*this.rYt.pPt.dzt;x.abs(n-t)>=r&&(i=this.eVt(t))}else if(this.rYt.pPt.NBt){if(this.rYt.pPt.Oct(this.GYt).ZBt&&(i=this.eVt(t),void 0!==i&&i[0].oBt===this.GYt))return}if(i){this.VYt=t;const[e,s]=i;return 0===(null==s?void 0:s.KBt)&&void 0!==e.ct?[e,void 0]:[e,s]}}eVt(t){let i,e;const s=this.rYt.pPt.Zot;if(0===s.length)return;const n=this.kIt.Tr.tP,r=H.BU(t),o=function(t,i,e){const s=t.pPt.Zot;if(0===s.length)return;const n=t.pPt.XUt(e.BB());if(!i.lQt(n.TBt))return;const r=n.oBt-s[0].oBt,o=n.TBt;let h,a,u,c=0;if(qK(s,r,o,((t,i)=>(h=t,c=i,!0))),void 0===h&&(XK(s,r+1,o,((t,i)=>(h=t,c=i,!0))),void 0===h))return;return i.AQt(h.xst,h).VB(e)?(a=h,XK(s,c+1,o,(t=>i.AQt(t.xst,t).UB(e)?(u=t,!0):(a=t,!1)))):(u=h,qK(s,c-1,o,(t=>i.AQt(t.xst,t).VB(e)?(a=t,!0):(u=t,!1)))),void 0!==a&&void 0!==u?[a,u]:void 0}(this.rYt,n,r);let h;if(void 0!==o){const[t,i]=o,e=n.AQt(t.xst,t),s=n.AQt(i.xst,i),a=r.qB(e).BB()/s.qB(e).BB()*(i.lB-t.lB);h=t.lB+a}else h=t;const a=s[s.length-1];return a.dB<=h?(i=a,e=a.aUt(h)):s[0].lB>h?(i=s[0],e=i.rUt(0)):(i=this.rYt.pPt.HUt(h),e=null==i?void 0:i.aUt(h)),i?[i,e]:void 0}sVt(t,i){let e,s;if(e=this.rYt.pPt.Oct(t),e&&void 0!==i){if(0===e.pBt.length)return[e,void 0];s=e.rUt(i+1)}return void 0!==e&&void 0!==s||(e=this.rYt.pPt.Oct(t+1),s=null==e?void 0:e.rUt(0)),e?[e,s]:void 0}UFt(){if(this.oxt)throw new b("Cannot perform new operation while PlaylistDownloader is still busy")}nVt(t){this.UFt(),this.ZYt=new xh,this.rVt(t,this.qYt.ly).then(this.oVt,this.oVt)}hVt(){this.FYt.uYt()}async rVt(t,i){if(this.rYt.pPt.NBt)return;let e=this.iVt(t);for(!e&&this.FYt.nYt()&&void 0!==this.GYt&&(await this.FYt.oYt(void 0===this.WYt?this.GYt+1:this.GYt,void 0!==this.WYt?this.WYt+1:void 0,i),e=this.iVt(t)),!e&&this.FYt.nYt()&&void 0!==this.GYt&&(await this.FYt.oYt(this.GYt+1,0,i),e=this.iVt(t));!e;){zi.Hj(KK,"No next segment / part available, need to update playlist before continuing."),await this.FYt.cYt(i);const s=this.EPt.pPt.Zot;s[0].lB>t&&(this.WYt=void 0,this.GYt=void 0);s[s.length-1].oBt<this.GYt&&(this.WYt=void 0,this.GYt=void 0),e=this.iVt(t)}}aVt(){return this.WFt.uVt()}cVt(){this.UFt();try{const t=this.rYt.pPt.qUt(lq.yzt);t&&this.lVt(t);const i=this.rYt.pPt.qUt(lq.bzt);i&&this.dVt(i)}catch(t){throw X(t),this.rYt.pPt.YUt=Fe.Og(),this.kIt.dFt(this.rYt),t}}lVt(t){this.$Yt&&!this.$Yt.Jz(t.$yt)&&(this.$Yt.Ty(),this.$Yt=void 0),this.$Yt||(this.$Yt=new VK(t.$yt,this.RYt))}dVt(t){this.JYt&&!this.JYt.Jz(t.$yt)&&(this.JYt.Ty(),this.JYt=void 0),this.JYt||(this.JYt=new VK(t.$yt,this.RYt))}jct(t,i,e){this.UFt(),zi.Hj(KK,"Starting download of segment "+yt(t.$yt)+" and part "+(null==i?void 0:i.KBt)),this.ZYt=new xh,this.fVt(t,i,e,this.qYt.ly).catch((t=>{throw X(t),this.rYt.pPt.YUt=Fe.Og(),this.kIt.dFt(this.rYt),t})).then(this.oVt,this.oVt)}async fVt(t,i,e,s){let n;if(t.yBt){var r,o;if(!e||!fq(e.HFt.$yt,null==(r=t.yBt)?void 0:r.$yt)||t.TBt!==e.TBt){var h;null==(h=this.KYt)||h.Ty(),this.KYt=new xh;const i=this.gVt(t.yBt,t,s).then((()=>{this.KYt=void 0}));this.KYt.Sy(i)}n=null==(o=this.KYt)?void 0:o.rM}await this._Vt(t,i,n,s)}async gVt(t,i,e){const s=await this.vVt(t,i,e),n=s.yBt.rI.rI.byteLength;this.WFt.wVt(s),this.yo(new WK(s.yBt.HFt.$yt,s.YA,this.Zp,i.oBt,s.EPt.Gx,n,s.yBt.Ylt)),zi.KPt(ZX,"Download initializer complete",yt(t.$yt))}async _Vt(t,i,e,s){const n=await this.mVt(t,i,s),r=n.vlt.rI.rI.byteLength;var o;e&&await Ao(e,s),this.WFt.wVt(n),this.yo(new WK(n.vlt.HFt.$yt,n.YA,this.Zp,t.oBt,n.EPt.Gx,r,n.vlt.Ylt)),zi.KPt(ZX,"Download complete",yt(null!=(o=null==i?void 0:i.$yt)?o:t.$yt))}async mVt(t,i,e){let s;if(i){if(this.JYt)if(this.JYt.Jz(i.$yt)){const t=await this.JYt.Nmt(i.$yt),n=await Xy(t,e),r=new T(n);s=iJ(i,await this.JFt(r,i.vBt,e),200)}else this.JYt.Ty(),this.JYt=void 0;s||(zi.KPt(ZX,"Start download",yt(i.$yt)),s=await this.pVt(i,e))}else zi.KPt(ZX,"Start download",yt(t.$yt)),s=await this.Pct(t,e);return this.GYt=t.oBt,this.WYt=null==i?void 0:i.KBt,{YA:"vlt",vlt:s,EPt:this.rYt,TBt:t.TBt}}async vVt(t,i,e){let s;if(this.$Yt){var n;if(this.$Yt.Jz(t.$yt)){const n=await Ao(this.$Yt.Nmt(t.$yt),e),r=await Xy(n,e),o=new T(r);s=tJ(t,i,await this.JFt(o,t.mBt?[t.mBt]:[],e),200)}zi.Hj(KK,"MAP is required for segment, downloading MAP data."),null==(n=this.$Yt)||n.Ty(),this.$Yt=void 0}return s||(zi.KPt(ZX,"Start download",yt(t.$yt)),s=await this.AVt(t,i,e)),{YA:"yBt",yBt:s,EPt:this.rYt,lB:i.lB,TBt:i.TBt,vBt:i.vBt}}async AVt(t,i,e){const{response:s,httpStatusCode:n}=await this.RYt.hI(t.$yt,ar.gI,cl.wI,void 0,e),r=t.mBt?[t.mBt]:[];return tJ(t,i,await this.JFt(s,r,e),n)}async Pct(t,i){if(!t.$yt)throw new b("Internal error: attempted to download an incomplete segment");let e,s;try{this.yVt(t);const n=await this.RYt.hI(t.$yt,ar.gI,cl.dI,this.bVt,i);e=n.response,s=n.httpStatusCode}finally{this.MVt()}return function(t,i,e){return{rI:{rI:i,YA:Xi.v$},YA:zK.gI,Ylt:e,HFt:t,TBt:t.TBt}}(t,await this.JFt(e,t.vBt,i),s)}async pVt(t,i){let e,s;try{this.yVt(t);const n=await this.RYt.hI(t.$yt,ar.gI,cl.dI,this.bVt,i);e=n.response,s=n.httpStatusCode}finally{this.MVt()}return iJ(t,await this.JFt(e,t.vBt,i),s)}async JFt(t,i,e){const s=dl(i,(t=>t.LI===cn.Mzt));return s?s.$yt&&s.Zzt?await this.TVt.JFt(t,s.$yt,s.Zzt,e):(zi.lt(KK,"Encountered an AES-128 encrypted segment for which no initialization vector could be determined."),t):t}yVt(t){var i,e,s;this.SVt=t,this.NVt=0,this.IVt=Fe.Og(),this.DVt=0,this.EVt=null!=(s=null==(e=t.$yt)||null==(i=e.EMt)?void 0:i.V)?s:0}MVt(){this.SVt=void 0,this.NVt=0,this.IVt=0,this.DVt=0,this.EVt=0}kVt(){if(void 0!==this.SVt)return{vlt:this.SVt,xVt:this.DVt,LVt:this.EVt,CVt:Fe.Og()-this.IVt}}jVt(t){return void 0!==this.SVt&&(0!==this.NVt&&(!(this.EVt>0&&this.DVt>=this.EVt)&&!(t-this.NVt<500)))}constructor(t,i,e,s,n,r,o,h){super(),this.YYt=void 0,this.ZYt=void 0,this.SVt=void 0,this.NVt=0,this.IVt=0,this.DVt=0,this.EVt=0,this.qYt=new Wt,this.KYt=void 0,this.VYt=0,this.GYt=void 0,this.WYt=void 0,this.$Yt=void 0,this.JYt=void 0,this.oVt=t=>{this.YYt&&(this.rYt=this.YYt,this.YYt=void 0,this.VYt=0,this.GYt=void 0,this.WYt=void 0),this.ZYt&&(t&&!Tu(t)?this.ZYt.nM(t):this.ZYt.sM(),this.ZYt=void 0)},this.bVt=(t,i)=>{this.DVt=t,t>0&&0===this.NVt&&(this.NVt=Fe.Og()),void 0!==i&&(this.EVt=i),this.yo(new GK(this.Zp))},this.Zp=t,this.kIt=e,this.WFt=s,this.rYt=i,this.FYt=new PK(e,i),this.TVt=new OK(o,n,h),this.RYt=new RK(n,r,function(t){switch(t){case Se.NI:return ol.NI;case Se.SI:return ol.SI;case Se.AQ:case Se.Azt:return ol.ON;default:return ol.dI}}(i.YA),h)}};function tJ(t,i,e,s){return{rI:{rI:e,YA:Xi.v$},YA:zK.yzt,Ylt:s,HFt:t,TBt:i.TBt}}function iJ(t,i,e){return{rI:{rI:i,YA:Xi.v$},Ylt:e,YA:zK.bzt,HFt:t,TBt:t.XBt.TBt}}r();var eJ=class{get EFt(){return this.OVt}get RVt(){const t=[];for(const e of this.PVt)if("vlt"===e.YA){const s=e.vlt.HFt,n=ZK(e.EPt,this.PQt,s);var i;t.push({vlt:s,EPt:e.EPt,lB:n,dB:n+(null!=(i=s.ct)?i:0)})}return t}get zVt(){const t=[];return this.BVt.forEach((i=>{for(const e of i.UVt)"vlt"===e.YA&&t.push({vlt:e.HFt,EPt:e.EPt,lB:e.lB,dB:e.lB+e.ct})})),t}wVt(t){"yBt"===t.YA&&(this.OVt=t.yBt),this.PVt.push(t),this.QVt&&(this.QVt.sM(),this.QVt=void 0)}HYt(){return this.PVt[0]}XYt(t){ra(this.PVt,t)}uVt(){return null!=this.QVt||(this.QVt=new xh),this.QVt.rM}FVt(t){this.YVt(t.sct).FVt(t)}VVt(t){return this.YVt(t).VVt()}GFt(t){this.YVt(t.sct).GFt(t)}GVt(t){var i;null==(i=this.BVt.get(t))||i.wy()}WVt(t){return this.YVt(t).WVt()}YVt(t){if(this.BVt.has(t))return this.BVt.get(t);{const i=new sJ;return this.BVt.set(t,i),i}}eM(){this.ZVt(),this.HVt()}ZVt(){this.OVt=void 0,nt(this.PVt)}HVt(){this.BVt.forEach((t=>t.eM()))}wy(){this.BVt.forEach((t=>t.wy())),this.BVt.clear(),this.eM(),this.QVt&&(this.QVt.Ty(),this.QVt=void 0)}constructor(t){this.PVt=[],this.BVt=ll(),this.QVt=void 0,this.OVt=void 0,this.PQt=t}},sJ=class{get UVt(){return this.XVt}FVt(t){this.XVt.push(t),this.qVt&&(this.qVt.sM(),this.qVt=void 0)}VVt(){return this.XVt[0]}GFt(t){ra(this.XVt,t)}WVt(){return null!=this.qVt||(this.qVt=new xh),this.qVt.rM}eM(){nt(this.XVt)}wy(){this.eM(),this.qVt&&(this.qVt.Ty(),this.qVt=void 0)}constructor(){this.XVt=[],this.qVt=void 0}};r();var nJ=1e-6,rJ=class{get TE(){return this.GDt}get L3(){return this.WDt}async F4(t,i){const e=t.rI.rI;if(this.KVt(e),this.JVt.YA===El.TTML){this.PQt.lQt(t.TBt)||await Ao(this.PQt.fQt(t.TBt),i);const s=this.$Vt(e,t.TBt);for(const t of s)this.JVt.RQ(t)}}async B4(t,i){if(void 0===t.rI)return;const e=t.lB,s=e+t.ct;this.GDt=this.GDt.pP(Mo.RP(e,s)).mP(nJ),this.O3(t.tGt,t.iGt),this.R3(e,s),this.PQt.lQt(t.TBt)||await Ao(this.PQt.fQt(t.TBt),i),this.Q4(t.rI.rI,t.TBt,t.HFt)}Q4(t,i,e){let s;this.KVt(t),s=this.JVt.YA===El.WEBVTT?this.eGt(t,e):this.$Vt(t,i);for(const t of s)this.JVt.RQ(t)}eGt(t,i){const e=UN(t),s=e.L;var n;const r=null!=(n=e.aQ)?n:{uQ:H.sU,lh:H.sU};for(const t of s){const e=H.BU(t.lB).qB(r.lh).Kz(r.uQ),s=this.PQt.AQt(e,i).BB(),n=s+(t.dB-t.lB);t.kB(s,n)}return s}$Vt(t,i){const e=this.PQt.pQt(i).BB();return SI(t,this.JVt,{sQ:0,nQ:1/0,rQ:e},Xh.APPLICATION_MP4)}KVt(t){this.JVt.YA===El.DEFAULT&&(this.JVt.YA=this.sGt(t)?El.WEBVTT:El.TTML)}sGt(t){return $N(lm(dm(Al(t),0,x.min(t.byteLength,16)),new da))}O3(t,i){this.WDt=this.WDt.pP(Mo.RP(t,i)).mP(nJ)}R3(t,i){this.WDt=this.WDt.yP(Mo.RP(t,i))}constructor(t,i){this.GDt=Mo.PP(),this.WDt=Mo.PP(),this.JVt=t,this.PQt=i}};r(),r(),r();var oJ=class extends Jr{constructor(t,i){super(js.nGt),this.EPt=t,this.dht=i}};r();var hJ=class extends Jr{constructor(t){super(js.rGt),this.EPt=t}};r();var aJ=class extends Jr{constructor(t,i){super(js.oGt),this.EPt=t,this.Igt=i}};r();var uJ=class extends Jr{constructor(t,i){super(js.hGt),this.EPt=t,this.aGt=i}},js=function(t){return t.nGt="uGt",t.oGt="cGt",t.hGt="lGt",t.rGt="dGt",t}({}),cJ=class extends tu{get fGt(){return this.gGt}_Gt(t){for(const i of this.gGt)Qa(t,i)||this.WFt.GVt(i);this.gGt=t}get oxt(){return void 0!==this.vGt}QFt(){var t,i;return null!=(i=null==(t=this.vGt)?void 0:t.rM)?i:Promise.resolve()}UFt(){if(this.oxt)throw new b("Cannot perform new operation while transmuxer is still busy")}wGt(t,i){}mGt(t){this.UFt(),this.vGt=new xh;const i=i=>{this.pGt(t,i)};this.AGt(t,this.rN.ly).then(i,i)}yGt(t){this.UFt(),this.vGt=new xh;const i=i=>{this.pGt(t,i)};this.bGt(t,this.rN.ly).then(i,i)}pGt(t,i){this.vGt&&(!i||Tu(i)||function(t){return t instanceof vK}(i)?(Tu(i)||this.WFt.XYt(t),this.vGt.sM(),this.vGt=void 0):this.vGt.nM(i))}MGt(t,i){this.yo(new oJ(t,i))}TGt(t,i){this.yo(new aJ(t,i))}SGt(t,i,e){gK(i)&&this.yo(new uJ(t,e))}NGt(t){this.yo(new hJ(t))}FVt(t){Qa(this.gGt,t.sct)&&this.WFt.FVt(t)}IGt(t){return this.WFt.VVt(t)}GFt(t){this.WFt.GFt(t)}DGt(t){return this.WFt.WVt(t)}Ty(){this.rN.Ty(),this.rN=new Wt}constructor(t,i,e){super(),this.vGt=void 0,this.rN=new Wt,this.WFt=t,this.PQt=i,this.gGt=e}};function lJ(t,i){return gK(t)?0:x.min(t.lB,i)}function dJ(t,i){var e;return x.max(t.lB,i)+(null!=(e=t.ct)?e:0)}var fJ=class extends cJ{AGt(t,i){yi(i);const e={YA:"Yxt",rI:t.yBt.rI,sct:this.fGt[0],TBt:t.TBt,EGt:{dht:"",vBt:t.vBt},lB:t.lB,EPt:t.EPt,HFt:t.yBt.HFt};return this.FVt(e),Promise.resolve()}async bGt(t,i){yi(i);const e=t.vlt.HFt;let s;void 0!==e.xst?(this.PQt.lQt(t.TBt)||await Ao(this.PQt.fQt(t.TBt),i),s=this.PQt.AQt(e.xst,e).BB()):s=e.lB;const n=lJ(e,s),r=dJ(e,n);var o;const h={YA:"vlt",rI:t.vlt.rI,sct:this.fGt[0],tGt:n,iGt:r,lB:s,ct:null!=(o=e.ct)?o:0,rQ:0,TBt:t.TBt,EPt:t.EPt,HFt:t.vlt.HFt};this.FVt(h)}constructor(t,i,e){super(t,i,[e])}};function gJ(t,i){let e=Mo.PP();for(const s of t){let n=s.lB;if(s.EPt.pPt.NBt&&gK(s.vlt))n=0;else{const e=t=>s.EPt===t.EPt&&_K(t.vlt,s.vlt),r=dl(t,e);if(void 0!==r)n=x.min(n,r.dB);else{const t=dl(i,e);void 0!==t&&(n=x.min(n,t.jFt.jn(0)))}}e=e.pP(Mo.RP(n,s.dB))}return e}r();var _J=.001,vJ=class{get kGt(){return this.xGt}get EPt(){return this.LGt.EPt}QYt(t){this.LGt.QYt(t)}get oxt(){return this.LGt.oxt||this.CGt.oxt||this.xGt.some((t=>t.oxt))}jGt(t){const i=t.slice();for(let t=this.xGt.length-1;t>=0;t--){const e=this.xGt[t];if(!e.OFt)throw new b("Invalid state");const s=Jv(i,(t=>t.YA===e.YA));s>=0?(e.Oht(i[s]),Mn(i,s)):Mn(this.xGt,t)}for(const t of i){const i=new CK(t);this.xGt.push(new jK(t.YA,t,this.OGt,i,this))}i.length>0&&this.OGt.eM();const e=t.map((t=>t.YA));this.CGt._Gt(e)}JK(t){var i;const e=(null==(i=this.UG)?void 0:i.JK(t))||!1;return e&&(this.Ty(),this.OGt.eM()),e}RGt(t){for(const t of this.xGt)if(t.YA!==Ri.ON||t.oxt)throw new b("Invalid state");const i=new CK(t),e=new jK(Ri.ON,t,this.OGt,i,this);this.xGt=[e]}get EFt(){const t=this.OGt.EFt;if(t)return t;if(this.xGt.length>0){const t=this.xGt[0].RFt.EFt;if(t&&this.xGt.every((i=>i.RFt.EFt===t)))return t}}Lct(){for(const t of this.xGt)t.RFt.LFt()}get PGt(){if(0===this.xGt.length)return Mo.PP();const t=gJ(this.OGt.RVt.concat(this.OGt.zVt),Ms(this.xGt,(t=>t.RFt.Zot))).fP();let i=new Mo([0,1/0]);for(const t of this.xGt)i=i.Sn(t.RFt.TE);for(const t of this.xGt)i=i.yP(t.PFt);return i=i.pP(t),i.mP(_J)}get zGt(){if(0===this.xGt.length)return Mo.PP();const t=gJ(this.OGt.zVt,Ms(this.xGt,(t=>t.RFt.Zot))).fP();let i=new Mo([0,1/0]);for(const t of this.xGt)i=i.Sn(t.RFt.TE);return i=i.pP(t),i}pft(t){const i=this.PGt.CP(t,_J);return i?i.jn(i.V-1):t}tVt(t){return!!this.PGt.CP(t,_J)||this.LGt.tVt(t)}BGt(t){return this.zGt.gr(t,_J)}UGt(t,i,e){for(const t of this.xGt){const e=t.RFt,s=e.vpt;if(void 0!==s&&i>=s&&!e.TE.fP().gr(s))return!0}return i-t<e}Ty(){this.QGt(),this.FGt()}QGt(){this.LGt.Ty()}FGt(){this.CGt.Ty(),this.kGt.forEach((t=>t.Ty()))}wy(){this.Ty(),this.LGt.wy()}constructor(t,i,e,s){this.LGt=t,this.OGt=i,this.CGt=e,this.UG=s,this.xGt=[]}};r();var wJ=class extends Jr{constructor(){super(rs._Pt)}};r();var mJ=class extends Jr{constructor(){super(rs.fPt)}};r(),r();var pJ="LazyMediaBuffer",AJ=class extends tu{get VN(){return this.WS}get E3(){return this.Zp}get md(){if(!this.Fht)throw new qi(vt.MEDIA_LOAD_ERROR,"Cannot get the configuration of an uninitialized MediaBuffer.");return this.Fht.md}get PK(){return this.WK}set PK(t){this.WK=t,this.Fht&&(this.Fht.PK=t)}F$(){return this.Fht?this.Fht.F$():this.YGt}get TE(){return this.Fht?this.Fht.TE:Mo.PP()}get L3(){return this.Fht?this.Fht.L3:this.C3.J$}get QK(){return this.XK}set QK(t){this.XK=t,this.Fht&&(this.Fht.QK=t)}O3(t,i){zi.KPt(pJ,"Marking gap from "+t+" to "+i+"."),this.C3.i0(t,i),this.Fht&&this.Fht.O3(t,i)}R3(t,i){zi.KPt(pJ,"Removing gap from "+t+" to "+i+"."),this.C3.e0(t,i),this.Fht&&this.Fht.R3(t,i)}VGt(t){this.Fht=t,this.Fht.QK=this.XK,this.Fht.PK=this.WK;const i=this.C3.J$;for(let t=0;t<i.V;t++)this.Fht.O3(i.Cn(t),i.jn(t));var e;this.YGt&&(zi.KPt(pJ,"End of stream"),null==(e=this.Fht)||e.I3());this.Fht.yn(po.g$,this.Ds),this.GGt.sM(t)}WGt(t){return Ao(this.GGt.rM,t)}async B4(t,i,e){const s=await this.WGt(e);await s.B4(t,i,e)}async P3(){const t=await this.WGt();await t.P3()}async F4(t,i,e){const s=await this.WGt(e);await s.F4(t,i,e)}async wS(t,i,e){const s=await this.WGt(e);await s.wS(t,i,e)}async s3(t,i){const e=await this.WGt();await e.s3(t,i)}I3(){this.YGt=!0,this.Fht&&this.Fht.I3()}N$(t){return!!this.Fht&&this.Fht.N$(t)}async D$(t){const i=await this.WGt();await i.D$(t)}async gn(){var t;this.Bo(),null==(t=this.Fht)||t.fn(po.g$,this.Ds)}constructor(t,i){super(),this.Zp=t,this.ZGt=i,this.WS=void 0,this.Fht=void 0,this.GGt=new xh,this.WK=20,this.YGt=!1,this.XK=30,this.C3=new SC}},yJ="LazyMediaSource",bJ=class{get md(){return{YA:uh.FQ,k5:[],yV:[]}}get A5(){return this.HGt}get y5(){return this.XGt}get TE(){return this.vV?this.vV.TE:Mo.PP()}get ct(){return this.vV?this.vV.ct:this.JM}get F$(){return!!this.vV&&this.vV.F$}get _k(){return this.vV?this.vV._k:new Mo([0,1/0])}S5(t){this.JM=t,this.vV&&this.vV.S5(t)}I3(){this.Dst=!0,this.vV&&this.vV.I3()}w3(){this.Dst=!1,this.vV&&this.vV.w3()}E5(t,i,e,s){this.qGt=t,this.KGt=i,this.JGt=Boolean(e),this.$Gt=Boolean(s),this.vV&&this.vV.E5(t,i,e,s)}N$(t){return!this.vV||this.vV.N$(t)}async D$(t){if(!this.N$(t))throw new b("LazyMediaSource - Unable to reconfigure MediaSource.");if(this.vV)await this.vV.D$(t);else{var i,e;this.cz.xtt();const s=await this.cz.$n(t);j(this.JM)||s.S5(this.JM),this.Dst&&s.I3(),s.E5(this.qGt,this.KGt,this.JGt,this.$Gt),zi.KPt(yJ,"The MediaSource has been loaded."),this.tWt=!0,this.vV=s,null==(i=this.HGt)||i.VGt(this.vV.A5),null==(e=this.XGt)||e.VGt(this.vV.y5),this.iWt.sM(s),this.cz.Ltt()}}k$(t){this.vV.k$(t)}async wy(){this.vV&&await this.vV.wy()}constructor(t,i,e){this.cz=t,this.HGt=void 0,this.XGt=void 0,this.iWt=new xh,this.vV=void 0,this.tWt=!1,this.JM=NaN,this.Dst=!1,this.qGt=0,this.KGt=1/0,this.JGt=!1,this.$Gt=!1,i&&(zi.KPt(yJ,"Created lazy media buffer for audio."),this.HGt=new AJ(Ri.SI,this)),e&&(zi.KPt(yJ,"Created lazy media buffer for video."),this.XGt=new AJ(Ri.NI,this))}};function MJ(t,i){return void 0===i&&(i=!1),function(e,s){void 0===s&&(s="*");let n=SJ(e,"tag");const r=SJ(null==s?"*":s,"range"),o=[];let h,a,u,c=-1;for(;++c<r.length;)if(h=r[c].toLowerCase(),i||"*"!==h){for(a=-1,u=[];++a<n.length;)if(t(n[a].toLowerCase(),h)){if(!i)return n[a];o.push(n[a])}else u.push(n[a]);n=u}return i?o:void 0}}ds(),Qi(),r();MJ(((t,i)=>"*"===i||t===i||_t(t,i+"-")),!0),MJ(((t,i)=>{const e=t.split("-"),s=i.split("-");let n=0,r=0;if("*"!==s[r]&&e[n]!==s[r])return!1;for(n++,r++;r<s.length;)if("*"!==s[r]){if(!e[n])return!1;if(e[n]!==s[r]){if(1===e[n].length)return!1;n++}else n++,r++}else r++;return!0}),!0);var TJ=MJ(((t,i)=>{let e,s=i;for(;;){if("*"===s||t===s)return!0;if(e=s.lastIndexOf("-"),e<0)return!1;"-"===s.charAt(e-2)&&(e-=2),s=s.slice(0,e)}}));function SJ(t,i){const e=t&&"string"==typeof t?[t]:t;if(!e||"object"!=typeof e||!("length"in e))throw new b("Invalid "+i+" `"+e+"`, expected non-empty string");return e}r(),Qi(),r();var NJ=16384,IJ=71,DJ=188,EJ=2,kJ=3,xJ=function(t){return t[t.dI=0]="dI",t[t.uL=1]="uL",t[t.eWt=2]="eWt",t[t.sWt=3]="sWt",t}({});function LJ(t){return CJ(t)?1:function(t){return function(t){if(t.length<EJ*DJ)return-1;const i=t.length<kJ*DJ?EJ:kJ,e=x.min(1e3,t.length-i*DJ);for(let s=0;s<=e;s++){let e=!0;for(let n=0;n<i;n++)if(t[s+n*DJ]!==IJ){e=!1;break}if(e)return s}return-1}(t)>=0}(t)?2:function(t){return null!==JO(Al(t),new da)}(t)?3:0}function CJ(t){const i=zr(t,0,x.min(t.length,NJ));return Rs._j(Al(i))}var jJ=class{get YA(){return this.Zp}get TE(){return this.Fht.TE}get L3(){return this.Fht.L3}nWt(t){return this.Fht===t}async F4(t,i){if(this.Fht.md.VN!==t.EGt.dht){const e={VN:t.EGt.dht};this.Fht.N$(e)&&(await this.Fht.D$(e),yi(i))}await this.Fht.F4(t.rI,{u4:t.EPt.Gx},i),void 0!==this.cjt&&this.Zp===Ri.NI&&CJ(t.rI.rI)&&this.cjt.iat(t.rI.rI)}async B4(t,i){yi(i),zi.Hj("HlsMediaBuffer","Got media data, appending to "+this.Zp+" MediaBuffer: "+yt(t.HFt.$yt));const e=t.tGt,s=t.iGt,n={xst:t.lB,ct:t.ct,rQ:t.rQ,u4:t.EPt.Gx};void 0!==t.rI&&(await this.Fht.B4(t.rI,n,i),this.rWt(t.rI,t)),this.oWt(e,s)}rWt(t,i){var e;if(!CJ(t.rI))return;const s=i.lB,n=s+i.ct,r=i.rQ;if(null==(e=this.Apt)||e.cft(t.rI,s,r),void 0!==this.cjt&&this.Zp===Ri.NI){const e=i.HFt.ZBt;this.cjt.cft(t.rI,s,n,r,i.EPt,e)}const o=[];void 0!==this.Apt&&o.push(this.Apt),void 0!==this.cjt&&o.push(this.cjt),$I(this.TE,o)}oWt(t,i){const e=this.Fht.TE,s=new Mo([t,i]).yP(e);for(let t=0;t<s.V;t++)this.Fht.O3(s.Cn(t),s.jn(t));for(let t=0;t<e.V;t++)this.Fht.R3(e.Cn(t),e.jn(t))}O3(t,i){this.Fht.O3(t,i)}R3(t,i){this.Fht.R3(t,i)}constructor(t,i,e,s){this.Zp=t,this.Fht=i,this.Apt=e,this.cjt=s}};function OJ(t){if(t.YA!==Se.Azt||void 0===t.TPt)return;const i=t.TPt.match(/^CC([1-4])$/);if(i)return Number(i[1]);const e=t.TPt.match(/^SERVICE([\d+])$/);return e?Number(e[1]):void 0}r(),r(),r();var RJ=class{gzt(t){var i,e,s;return null==(s=null==(e=this.vV)||null==(i=e.y5)?void 0:i.N$(t))||s}_zt(t){var i,e,s;return null==(s=null==(e=this.vV)||null==(i=e.A5)?void 0:i.N$(t))||s}constructor(t){this.vV=t}},Xc="LLHLSPlayer",PJ=[E.eP,E.sP,E.nP,E.wx],zJ=[Zi.pb,Zi.Vy,Zi.$y,Zi.Ky],BJ=2e3,UJ=class extends tu{get Az(){var t;const i=[this.hWt,this.aWt].filter($t);if(0===i.length||this.ct!==1/0)return;const e=null==(t=this.NE)?void 0:t.getTime();if(e){return(Date.now()-e)/1e3}let s;for(const t of i){const i=t.pPt._k;if(0===i.V)continue;const e=i.jn(i.V-1)+t.pPt.sSt,n=t.pPt.UUt,r=e+(null!=n?n:0)-this.xE;(!s||s<r)&&(s=r)}return s}uWt(){if(void 0===this.cWt)return!1;const t=Fe.Og();if(!this.cWt.LGt.jVt(t))return!1;const i=this.cWt.LGt.kVt();if(void 0===i||void 0===i.vlt.ct)return!1;const e=this.xE,s=this.$E,n=this.cWt.PGt.CP(e);if((void 0!==n?n.jn(0)-e:0)>=2*i.vlt.ct*s)return!1;if(i.xVt>0&&0===i.LVt)return i.CVt>1e3*i.vlt.ct*.8;return 8*i.LVt/this.UG.NK.FY>=1.8*i.vlt.ct}async lWt(){var t;const i=await this.mzt();if(void 0===i)return;const e=null==(t=this.cWt)?void 0:t.LGt.kVt();if(void 0===e)return;const s=this.dWt;if(e.LVt>0){if(x.max(0,e.LVt-e.xVt)<=e.LVt*(i.FY/s.FY))return}const n=i.FY<s.FY;await this.OPt(i,{RPt:n})}fWt(t){return sw(t,(t=>t.FY))}async gWt(){let t=await this._Wt();if(0===t.length)return;const i=await this.vWt(t);i.length>0&&(t=i);const e=this.fWt(t);void 0!==e&&(await this.OPt(e,{RPt:!0}),this.AV.Rkt(e.FY))}get wWt(){const t=[this.aWt,this.hWt].filter($t);for(const i of t){if(!i.pPt.NBt)return!1;const t=i.pPt.Zot,e=t[t.length-1];if(e&&e.TBt!==this.mWt)return!1}return!0}get kPt(){return this.dWt}get VPt(){return this.aWt}get WPt(){return this.hWt}get pWt(){return this.AWt}get ht(){return this.Oz}get TE(){return this.cz.TE.ks()}get CPt(){const t=[];if(this.dWt){const i=this.cz.xE;for(const e of this.yWt)for(const s of e.kGt){const e=s.VFt(i);e&&!Qa(t,e)&&t.push(e)}}return t}get NE(){if(this.dWt){const t=this.cz.xE;return this.dWt.BBt(t)}}set NE(t){if(!t||!this.dWt)return;const i=this.dWt.UBt(t);void 0!==i&&this.CE(i,{bWt:!1,MWt:!0})}get bt(){return this.TWt}get xE(){var t;return null!=(t=this.SWt)?t:this.cz.xE}set xE(t){this.CE(t)}CE(t,i){var e,s,n,r;zi.Hj(Xc,"Seeking to "+t+" s.");const o={bWt:null!=(s=null==i?void 0:i.bWt)?s:t===1/0,MWt:null==(n=null==i?void 0:i.MWt)||n,gBt:null!=(r=null==i?void 0:i.gBt)&&r};this.SWt=t,this.NWt=o,this.IWt=!0,this.SIt=!0,null==(e=this.aV)||e.zk(),this.yo(new Yr(t)),this.m7.Ty(),this.DWt&&(Fe.Rg(this.EWt),o.MWt?this.EWt=Fe.Pg((()=>this.kWt(t,o)),50):this.kWt(t,o))}kWt(t,i){Fe.Rg(this.EWt);const e=[this.Cpt,this.xWt,this.p7].filter($t);this.m7=new Wt,this.m7.Sy(this.zQ.ly),this.p7=Vh(this.A7(e,t,i,this.m7.ly),this.m7).catch(this.LWt)}get ct(){var t,i,e,s,n,r,o;if(!this.wWt)return null!=(o=null!=(r=null!=(n=null==(t=this.aWt)?void 0:t.pPt.ct)?n:null==(i=this.hWt)?void 0:i.pPt.ct)?r:null==(s=this.kIt)||null==(e=s.sFt)?void 0:e.pPt.ct)?o:[this.aWt,this.hWt].filter($t).every((t=>function(t){if(void 0===t)return!1;return t.pPt.Zot.length>0&&!t.pPt.NBt}(t)))?1/0:NaN;const h=this.cz.ct;if(j(h)){var a,u;const t=null==(u=this.kIt)||null==(a=u.sFt)?void 0:a.pPt.ct;if(void 0!==t)return t}return h}get OE(){if(!this.wWt)return!1;if(this.wk&&this.DWt){var t,i;const e=this.xE,s=null==(t=this.aWt)?void 0:t.pPt.ct,n=null==(i=this.hWt)?void 0:i.pPt.ct;return!(void 0!==s&&e<s)&&!(void 0!==n&&e<n)}return this.cz.OE}get lt(){return this.dV}get zE(){return this.fV}get UE(){}get FE(){return!1}get VE(){return Ei({},{Bz:0,Uz:0,Qz:0,Fz:0,Yz:0,Vz:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}},this.cz.GE(),{Yz:this.KNt,Fz:this.UG.NK.FY})}get Tr(){var t;return null==(t=this.kIt)?void 0:t.Tr}get WE(){return this.cz.WE}set WE(t){this.cz.WE=t}get XE(){return this.qTt}set XE(t){this.qTt!==t&&(this.qTt=t,this.yo(t?new WG:new wl))}get KE(){return this.cz.KE}get $E(){return this.cz.$E}set $E(t){zi.Hj(Xc,"Setting playback rate to "+t+"."),this.cz.$E=t}get rk(){return this.eIt.ks()}get eIt(){return this.cz.rk}get ck(){return this._V}set ck(t){this._V!==t&&(this._V=t,this.CWt())}get fk(){let t=this.cz.fk;return this.rIt&&(t=x.max(Fn.Xn,t)),t}get _k(){return this.XNt.ks()}get XNt(){let t=this.D5;const i=[this.aWt,this.hWt].filter($t);if(t.V>0&&i.some((t=>!t.pPt.NBt))){const e=this.eIt,s=t.jn(t.V-1);if(e.V>0&&e.jn(e.V-1)>s){let n=e.jn(e.V-1);const r=YJ(i);r.V>0&&(n=x.min(n,r.jn(r.V-1))),t=t.pP(new Mo([s,n]))}}return t}iQt(){let t=function(t){if(0===t.length)return Mo.PP();let i=new Mo([0,1/0]),e=0;for(const s of t){const t=s.pPt._k;t.V>0&&(i=i.Sn(t),e=x.max(e,t.Cn(0)))}if(i.V>0)return i;return Mo.OP(e)}([this.aWt,this.hWt].filter($t));0!==t.V&&(this.vV&&this.wWt&&this.vV.ct!==1/0&&(t=new Mo([t.Cn(0),this.vV.ct])),this.D5=t,this.jWt&&this.Apt.NQ(t.Cn(0)),this.OWt&&this.cjt.NQ(t.Cn(0)))}get wk(){var t;return null!=(t=this.IWt)?t:this.cz.wk}get wV(){}get nt(){return this.Ul}get rt(){return this.Pz}get yk(){var t,i;return this.cz.yk||(null==(i=this.dWt)||null==(t=i.gLt)?void 0:t.Ti)||0}get Tk(){var t,i;return this.cz.Tk||(null==(i=this.dWt)||null==(t=i.gLt)?void 0:t.ji)||0}get Nk(){return this.cz.Nk}set Nk(t){zi.Hj(Xc,"Setting volume to "+t+"."),this.cz.Nk=t}get Ek(){return this.QG}get Lk(){return!1}set Lk(t){}get pV(){return this.AV}Bk(){return!1}Ck(){return this.cz.wa}_a(){return this.cz.LV}Wk(t){return this.cz.CV(t)}be(){zi.Hj(Xc,"Hiding the player."),this.cz.be()}Rk(){var t;zi.Hj(Xc,"Pausing the player."),this.cz.Rk(),(null==(t=this.aV)?void 0:t.zP)&&this.aV.zk()}async Pk(){this.n7=!0;const t=this.cz.Pk();if(this.OE){const t=this.XNt;t.V>0&&this.CE(t.Cn(0),{MWt:!1})}this.DWt||await this.CWt(),this.SNt(),await t,this.NIt()}SNt(){var t;if(!this.HNt())if(null==(t=this.kPt)?void 0:t.pPt.NBt){var i;let t=!0,e=0;const s=null==(i=this.dWt)?void 0:i.pPt.Cn;if(!this.SIt&&s&&(t=!s.gBt,e=s.fBt,e<0)){const t=this.kPt.pPt.SUt;e+=t.jn(t.V-1)}this.kWt(e,{bWt:t})}else this.kWt(1/0,{bWt:!0});this.RWt()&&this.kWt(1/0,{bWt:!0})}HNt(){var t;const i=this.XNt;if(0===i.V)return!0;const e=null==(t=this.PWt)?void 0:t.bP(this.xE);return(e&&e>0?this.PWt.jn(e):this.xE)>=i.Cn(0)}get PWt(){var t,i;const e=null==(t=this.zWt)?void 0:t.PGt,s=null==(i=this.cWt)?void 0:i.PGt;return e?s?s.Sn(e):e:s}RWt(){return XJ(this.xE,this.aWt)||XJ(this.xE,this.hWt)}aDt(){this.dV=void 0,this.fV=void 0}eG(t){this.dV||(V(this.tr()),this.dV=la(t),this.fV=t,this.yo(new Uc(t)))}ge(){zi.Hj(Xc,"Showing the player."),this.cz.ge()}Uk(){throw new b("Not implemented")}Qk(){throw new b("Not implemented")}Fk(){}Yk(){this.DWt&&V(this.BWt(this.aWt,this.hWt,this.AWt,{Yk:!0}))}async ka(t,i,e){const s={stack:[],error:void 0,hasError:!1};try{var n;if(zi.Hj(Xc,"Setting the player source to "+t.src+"."),this.aDt(),this.TWt&&!gS(this.TWt)&&(await this.tr(),yi(e)),!t.src||gS(t))return;const o=Ne(s,Wt.Iy([e]),!1);var r;this.zQ=Wt.Iy([o.ly]),this.SV.WY(t.contentProtection),this.TWt=t,this.UWt=t.seamlessSwitchStrategy,this.OWt=!Qa(t.ignoreEmbeddedTextTrackTypes,El.CEA608),this.jWt=!Qa(t.ignoreEmbeddedTextTrackTypes,El.EMSG),this.yn(rs.wPt,this.handleBufferingErrorEvent);const h=null!=(r=null==(n=t.latencyConfiguration)?void 0:n.targetOffset)?r:t.liveOffset;if(this.kIt=new NK(this.OQ,this.plt,t.useCredentials,Fe.TA(t.src),h),this.kIt.yn(Cl.XQt,this.DFt),this.kIt.yn(Cl.qQt,this.QWt),this.kIt.yn(Zi.ub,this.Ds),this.kIt.yn(Zi.fb,this.Ds),t.hlsDateRange&&(this.FWt=new xK(this.kIt,this.cz),this.Ul.$Y(this.FWt.nt)),null!=this.YWt||(this.YWt=this.VWt.Cst()),i.textTracks&&this.NV(i.textTracks),t.latencyConfiguration){const i=t.latencyConfiguration;this.aV=new AW(this,this.cz,i),this.aV.Rt=!0,this.Ek.Sa(this.aV)}oD(this.Ul),this.CWt(),o.wy()}catch(t){s.error=t,s.hasError=!0}finally{qr(s)}}CWt(){return this.Cpt=this.GWt(this.Cpt,this.zQ.ly).catch(this.wAt),this.Cpt}async GWt(t,i){if(t&&(await t,yi(i)),!this.kIt)return;const e=this._V;e===Nr.Mz||this.n7?await this.oD(i):e===Nr.MQ&&await this.WWt(i)}async WWt(t){if(void 0===this.kIt||this.rIt)return;if(!this.kIt.$Qt){try{await this.kIt.rFt(t)}catch(t){throw X(t),this.XE=!1,new qi(vt.MANIFEST_LOAD_ERROR,"The provided HLS document could not be loaded - "+t.message,t)}this.ZWt.Fat()}const i=await this.HWt();this.XWt(i);const e=this.qWt(i.izt),s=this.KWt(i.ezt),n=this.JWt(i.PBt);if(!n){const t=VJ(i.zBt);t&&(zi.Hj(Xc,"Detected initial closed caption rendition."),this.$Wt(i,t))}await this.BWt(e,s,n,{tZt:!0}),this.rIt=!0,this.kDt.PDt(),this.iZt()}iZt(){const t=[this.aWt,this.hWt].filter($t);if(t.some((t=>t.pPt.NBt)))return;if(this.aV)return;const i=x.max(...t.map((t=>{var i;return null!=(i=t.pPt.sSt)?i:0}))),e={minimumOffset:.66*i,maximumOffset:2*i,targetOffset:1*i,forceSeekOffset:3*i,minimumPlaybackRate:We,maximumPlaybackRate:ee};this.aV=new AW(this,this.cz,e),this.QG.Sa(this.aV)}async HWt(){if(this.eZt=this.kIt.Tr.tzt,!this.eZt.length)throw new qi(vt.MANIFEST_LOAD_ERROR,"LLHLSPlayer - Could not select initial variant stream: the HLS stream contains no variant streams.");let t=await this.sZt(this.eZt);if(0===t.length)throw new qi(vt.MANIFEST_LOAD_ERROR,"LLHLSPlayer - Could not select initial variant stream: the HLS stream contains no variant stream with a supported codec.");const i=await this.vWt(t);return i.length>0&&(t=i),zi.Hj(Xc,"Selecting initial active variant stream."),function(t,i,e,s){void 0===s&&(s=yS.maximumBackoff);const n=function(t,i){if(void 0===i)return t;const e=i.preferredVideoCodecs,s=i.preferredAudioCodecs;if(void 0!==e){let i;for(const n of e){const e=t.filter((t=>t.dht&&t.dht.NLt&&Wo(t.dht.NLt,n)));if(0===e.length)continue;if(void 0===s)return e;void 0===i&&(i=e);const r=GJ(e,s);if(void 0!==r)return r}if(void 0!==i)return i}if(void 0!==s){const i=GJ(t,s);if(void 0!==i)return i}return t}(t,i),r=ZJ(n,s);switch(e.BK.type){case Le.BANDWIDTH:{const t=e.VK,i=r.filter((i=>i.FY<=t));if(i.length>0)return nw(i,(t=>t.FY))}case Le.PERFORMANCE:return sw(r,(t=>t.FY));case Le.QUALITY:return nw(r,(t=>t.FY))}}(t,this.TWt.abr,this.UG,this.Dft.maximumBackoff)}qWt(t){if(this.nZt){const t=this.rZt(this.nZt);if(t)return t}return WJ(t)}KWt(t){if(this.oZt){const t=this.rZt(this.oZt);if(t)return t}return WJ(t)}JWt(t){for(const t of this.Ul.Ix)t.UI===lc.Jn&&(this.hZt=this.aZt(t));if(this.hZt){const t=this.rZt(this.hZt);if(t)return t}return VJ(t)}aZt(t){return dl(this.dWt.PBt,(i=>t===this.uZt.get(i.Gx)))}async oD(t){this.DWt||(await this.WWt(t),yi(t),this.DWt=!0,await this.BWt(this.aWt,this.hWt,this.AWt,{tZt:!0}))}NV(t){for(const i of t)i.src&&this.xV.LQ(i)}$Wt(t,i){if(!this.OWt)return;const e=function(t){const i=[];for(const e of t){const t=OJ(e);void 0!==t&&i.push({uet:t,cet:e.gs||"",kh:e.l})}return i}(t.zBt);for(const t of e)this.cjt.Qmt(t);if(void 0!==i){const t=OJ(i);this.cjt.Bmt(t).UI=lc.Jn}}get yWt(){return[this.zWt,this.cWt,this.cZt].filter($t)}jPt(t){for(const i of t)if(!this.lZt(i))throw new b("LLHLSPlayer - Could not set an allowed variant stream that does not exists in the internal HLS model.");this.eZt=t}lZt(t){const i=this.Tr;return!!i&&Qa(i.tzt,t)}rZt(t){if(t&&this.dWt)return dl(this.dWt.hzt,(i=>i===t))}XWt(t){var i;if(zi.Hj(Xc,"Setting active variant stream."),this.dWt===t)return;const e=(null==(i=this.dWt)?void 0:i.Vzt)!==(null==t?void 0:t.Vzt);if(this.dWt&&e)for(const t of this.dWt.PBt)this.BQ(t);if(this.dWt=t,this.yo(new wJ),this.mIt(),t&&e)for(const i of t.PBt)this.dZt(i)}dZt(t){const i=this.cz.Wk(z.AQ,void 0,t.l,t.gs,t.APt,void 0,void 0,t.NPt.map(GX).filter($t));i.yn(yo.aa,this.onTextTrackChange),this.uZt.set(t.Gx,i),this.fZt.tt(i)}BQ(t){const i=this.uZt.get(t.Gx);i&&(i.fn(yo.aa,this.onTextTrackChange),this.fZt.it(i),this.uZt.delete(t.Gx),this.cz.BQ(i))}async _Wt(){var t;const i=null!=(t=this.eZt)?t:this.Tr.tzt;if(0===i.length&&!this.eZt)return zi.Hj(Xc,"The HLS stream does not contain any variant streams, skipping ABR selection."),[];if(1===i.length&&!this.eZt)return zi.Hj(Xc,"The HLS stream contains only a single variant stream, skipping ABR selection."),[];const e=await this.sZt(i);if(0===e.length)return zi.JPt(Xc,"LLHLSPlayer - No variant streams with supported codecs available to perform ABR selection on."),[];const s=ZJ(e,this.Dft.maximumBackoff);return 0===s.length?(this.gZt||(zi.JPt(Xc,"LLHLSPlayer - No variant streams with online renditions available to perform ABR selection on."),this._Zt++,await this.vZt(e)),[]):s}async wZt(){const t=await this.mzt();if(void 0===t)return;const i=!!this.dWt&&t.FY<this.dWt.FY;await this.OPt(t,{RPt:i})}async mzt(){var t,i;const e=await this._Wt();if(0===e.length)return;const s=AH(this.cz),n=await this.vWt(e),r={ji:this.cz.ji,Ti:this.cz.Ti,fzt:s,eft:null==(i=this.TWt)||null==(t=i.abr)?void 0:t.restrictToPlayerSize},o=await this.mZt.mzt(e,this.dWt,n,r,new RJ(this.vV));return!!this.dWt&&o.FY<this.dWt.FY||this.pZt(o,s)?o:void 0}pZt(t,i){var e;if(t===this.kPt)return!1;const s=this.kPt&&HJ(this.kPt,this.Dft.maximumBackoff),n=HJ(t,this.Dft.maximumBackoff);if(!s&&n)return!0;(!this.vCt||this.vCt.xPt.FY>t.FY)&&(this.vCt={xPt:t,n_t:Fe.Og()});const r=Fe.Og()-this.vCt.n_t;var o;const h=null!=(o=null==(e=this.WPt)?void 0:e.pPt.dzt)?o:1/0;return i>=x.max(h-1,5)||r>1e3}async vZt(t){this.gZt=!0;let i=!1;for(const e of t)try{const t=this.hWt?dl(e.ezt,(t=>jX(t,this.hWt))):void 0;if(void 0===t)continue;await this.fFt(t),t.pPt.YUt=-1/0,i=!0}catch(t){}if(i)this._Zt=0,await this.AZt();else{if(this._Zt>=this.Dft.maxRetries)return void this.eG(new qi(vt.MEDIA_LOAD_ERROR,"The provided video renditions could not be loaded."));const t=x.min(this.Dft.minimumBackoff*2**(this._Zt-1),this.Dft.maximumBackoff);await kt(t)}this.gZt=!1,await this.wZt()}async sZt(t){let i=await aw(t,(async t=>{var i,e,s;const n=[(null==(i=t.dht)?void 0:i.TLt)?'audio/mp4; codecs="'+t.dht.TLt+'"':void 0,(null==(e=t.dht)?void 0:e.NLt)?'video/mp4; codecs="'+t.dht.NLt+'"':void 0].filter($t);return 0===n.length||await this.yZt.H$(n,null==(s=this.TWt)?void 0:s.useManagedMediaSource)}));return i.some((t=>{var i;return null==(i=t.dht)?void 0:i.NLt}))&&(i=i.filter((t=>!t.dht||t.dht.NLt||0!==t.ezt.length))),i.some((t=>{var i;return null==(i=t.dht)?void 0:i.TLt}))&&(i=i.filter((t=>!t.dht||t.dht.TLt||0!==t.izt.length))),i}vWt(t){return this.kIt.iFt?aw(t,(t=>async function(t,i){for(const e of t)if(!await i(e))return!1;return!0}([WJ(t.izt),WJ(t.ezt),VJ(t.PBt),VJ(t.zBt)].filter($t),(t=>this.bZt(t))))):Promise.resolve([])}async bZt(t){if(0===t.pPt.Zot.length)return!1;const i=t.pPt.Zot[0];if(!i.$yt)return!1;const e=i.$yt,s=e.EMt?aq(e.EMt.Cn,e.EMt.V):void 0;try{return await this.plt.Dot(e.zD,s)}catch(t){return!1}}async OPt(t,i){if(!this.DWt)throw new b("LLHLSPlayer - The LLHLSPlayer is not loaded.");if(!t)throw new b("LLHLSPlayer - Cannot explicitly set the active variant stream to undefined.");if(!this.lZt(t))throw new b("LLHLSPlayer - Trying to set an active variant stream that does not exists on the internal model.");if(t===this.dWt)return void zi.Hj(Xc,"Trying to set the already active variant stream, ignoring.");const e=this.aWt?dl(t.izt,(t=>jX(t,this.aWt))):void 0,s=this.hWt?dl(t.ezt,(t=>jX(t,this.hWt))):void 0,n=this.AWt?dl(t.PBt,(t=>jX(t,this.AWt))):void 0;this.XWt(t),this.vCt=void 0,await this.BWt(e,s,n,i)}async GPt(t){if(!this.dWt)return void(this.nZt=t);const i=this.rZt(t);if(t&&!i)throw new b("LLHLSPlayer - Trying to set an invalid rendition as the active audio rendition.");this.VPt!==i&&(zi.Hj(Xc,"Switching audio rendition"),await this.BWt(i,this.hWt,this.AWt,{zPt:!0}))}async ZPt(t){if(!this.dWt)return void(this.oZt=t);const i=this.rZt(t);if(t&&!i)throw new b("LLHLSPlayer - Trying to set an invalid rendition as the active video rendition.");this.WPt!==i&&(zi.Hj(Xc,"Switching video rendition"),await this.BWt(this.aWt,i,this.AWt,{PPt:!0}))}async MZt(t){if(!t)throw new b("LLHLSPlayer - Cannot explicitly set the active subtitle rendition to undefined.");if(!this.rIt)return void(this.hZt=t);const i=this.rZt(t);if(!i)throw new b("LLHLSPlayer - Trying to set an invalid rendition as the active subtitle rendition.");zi.Hj(Xc,"Switching subtitle rendition"),await this.BWt(this.aWt,this.hWt,i)}async TZt(t,i){if(this.gZt)return;const e=0===this.rt.V;t.YA===Se.NI||t.YA===Se.SI&&e?this.eZt&&this.eZt.length<=1?(t.YA===Se.NI&&this.hWt!==t?await this.BWt(this.aWt,t,this.AWt):t.YA===Se.SI&&e&&this.aWt!==t&&await this.BWt(t,this.hWt,this.AWt),await this.SZt(t,i)):await this.wZt():await this.SZt(t,i)}async fFt(t,i){try{await this.kIt.fFt(t,i)}catch(e){throw X(e),(jb(e)||Ob(e))&&await this.TZt(t,i),e}}async SZt(t,i){if(!Qa(this.NZt,t)){this.NZt.push(t);try{const e=t.YA===Se.AQ||t.YA===Se.Azt?1/0:this.Dft.maxRetries;await ao((()=>this.retryOfflineRenditionsCallback(t,i)),i,e,this.Dft.minimumBackoff,this.Dft.maximumBackoff)}catch(t){this.eG(new qi(vt.MEDIA_LOAD_ERROR,t.message,t))}finally{ra(this.NZt,t),t.pPt.YUt===-1/0&&await this.AZt()}}}BWt(t,i,e,s){void 0===s&&(s={});const n={RPt:s.RPt||!1,zPt:s.zPt||!1,PPt:s.PPt||!1,Yk:s.Yk||!1,tZt:s.tZt||!1};return n.tZt||n.Yk||this.aWt!==t||this.hWt!==i||this.AWt!==e?void 0===t&&void 0===i?Promise.reject(new b("Trying to buffer no media renditions.")):(this.aWt=t,this.hWt=i,this.AWt=e,this.iQt(),this.yo(new mJ),this.m7.Ty(),this.m7=new Wt,this.m7.Sy(this.zQ.ly),this.IZt.Ty(),this.IZt=new Wt,this.IZt.Sy(this.zQ.ly),this.xWt=Vh(this.DZt([this.xWt,this.p7].filter($t),t,i,e,n,this.IZt.ly),this.IZt).catch(this.LWt),this.xWt):Promise.resolve()}async EZt(t,i,e,s){var n,r;const o=[];if(o.push(this.kZt(i,s)),OX(t,i)||o.push(this.kZt(t,s)),null==(r=this.TWt)||null==(n=r.hls)?void 0:n.delaySubtitlePreload)return Promise.all(o).then((()=>this.kZt(e,s)));const h=this.kZt(e,s);return Promise.all([...o,h])}async kZt(t,i){if(t)try{await this.kIt.fFt(t,i)}catch(e){X(e),(jb(e)||Ob(e))&&await this.xZt(t,i)}}async xZt(t,i){if(this.gZt)return;const e=0===this.rt.V;if(t.YA===Se.NI||t.YA===Se.SI&&e)if(this.eZt&&this.eZt.length<=1)await this.SZt(t,i);else{const t=await this.HWt();this.XWt(t);const i=this.qWt(t.izt),e=this.KWt(t.ezt),s=this.JWt(t.PBt);await this.BWt(i,e,s)}else await this.SZt(t,i)}async DZt(t,i,e,s,n,r){var o;if(!this.DWt)return void await this.EZt(i,e,s,r);await Promise.all(t.map((t=>t.catch(ya)))),this.LZt(),await this.CZt(r),await this.jZt();const h=[];n.zPt&&this.vV&&this.vV.A5&&h.push(this.vV.A5.wS(0,1/0)),n.PPt&&this.vV&&this.vV.y5&&h.push(this.vV.y5.wS(0,1/0)),await Promise.all(h),yi(r);const a=await this.OZt(i,e,n.Yk,r);this.RZt(i,e,n.RPt||a),this.PZt(s,n.RPt),yi(r);const u=[e,OX(i,e)?void 0:i,s].filter($t);try{await Promise.all(u.filter((t=>!t.pPt.RUt)).map((t=>{var i;return null==(i=this.kIt)?void 0:i.gFt(t,r)})))}catch(t){X(t)}if(yi(r),this.I5(),this.iQt(),void 0!==this.SWt)this.kWt(this.SWt,this.NWt);else if(!this.SIt&&(null==(o=this.dWt)?void 0:o.pPt.Cn)){const t=this.dWt.pPt,i=t.Cn;let e=i.fBt;if(i.fBt<0){const i=t.SUt;e+=i.jn(i.V-1)}this.kWt(e,{bWt:!i.gBt})}else!this.SIt&&u.every((t=>!t.pPt.NBt))?this.kWt(1/0,{bWt:!0}):this.yWt.length>0&&this.zZt()}async OZt(t,i,e,s){var n,r;const o=void 0!==t&&t!==i,h=void 0!==i,a=await this.BZt(t,i,this.dWt);if(yi(s),!e&&this.vV&&!a)return!1;const u=void 0!==(null==(n=this.vV)?void 0:n.A5),c=void 0!==(null==(r=this.vV)?void 0:r.y5);if(!e&&!(o!==u||h!==c)&&a&&this.vV&&this.vV.N$(a))return await this.CZt(s),await this.vV.D$(a),!0;for(const t of this.yWt)t.kGt.forEach((t=>t.Ty()));this.cz.xtt();try{this.vV&&await this.cz.tr(),this.vV=await this.UZt(a,o,h)}finally{this.cz.Ltt()}return!0}async BZt(t,i,e){var s,n;const r=e.dht,o=[];if(void 0!==t){var h,a;const i=null!=(a=null==(h=t.dht)?void 0:h.TLt)?a:null==r?void 0:r.TLt;if(!i)return;{const t='audio/mp4; codecs="'+i+'"';zi.Hj(Xc,"Configuring MediaSource for initial audio rendition with codec: "+t+"."),o.push(t)}}if(void 0!==i){var u,c;const t=null!=(c=null==(u=i.dht)?void 0:u.NLt)?c:null==r?void 0:r.NLt;if(!t)return;{const i='video/mp4; codecs="'+t+'"';zi.Hj(Xc,"Configuring MediaSource for initial video rendition with codec: "+i+"."),o.push(i)}}if(0===o.length)return void zi.JPt(Xc,"No codecs found on the active variant stream.");var l;const d=null!=(l=null==i||null==(s=i.pPt.Zot[0])?void 0:s.vBt)?l:[];var f;const g=null!=(f=null==t||null==(n=t.pPt.Zot[0])?void 0:n.vBt)?f:[],_=this.kIt.Tr,v=await vq(this.TWt.contentProtection,o,_.jQt.concat(g).concat(d),this.OQ,this.TWt.useCredentials);return{YA:uh.FQ,k5:o.map((t=>({VN:t}))),yV:v,Q5:this.TWt.useManagedMediaSource}}async UZt(t,i,e){let s;return s=t?await this.cz.$n(t):new bJ(this.cz,i,e),this.vV=s,this.I5(),this.fNt(),this.gNt(),s}I5(){const t=this.vV;if(t&&j(t.ct)){var i,e,s;const n=null!=(s=null==(i=this.aWt)?void 0:i.pPt.ct)?s:null==(e=this.hWt)?void 0:e.pPt.ct;void 0!==n&&n>0&&t.S5(n)}this.iQt()}fNt(){const t=this.vV;t&&(t.y5&&(t.y5.PK=this.UG.ZK),t.A5&&(t.A5.PK=this.UG.ZK))}gNt(){const t=this.vV;t&&(t.y5&&(t.y5.QK=this.UG.QK),t.A5&&(t.A5.QK=this.UG.QK))}RZt(t,i,e){if(!this.vV)throw new b("Invalid state");this.vV.A5?this.b5&&this.b5.nWt(this.vV.A5)||(this.b5=new jJ(Ri.SI,this.vV.A5,this.jWt?this.Apt:void 0,this.OWt?this.cjt:void 0)):this.b5=void 0,this.vV.y5?this.M5&&this.M5.nWt(this.vV.y5)||(this.M5=new jJ(Ri.NI,this.vV.y5,this.jWt?this.Apt:void 0,this.OWt?this.cjt:void 0)):this.M5=void 0;const s=OX(t,i);if(this.M5&&i){const t=s&&this.b5?[this.M5,this.b5]:[this.M5];this.cWt?this.cWt.EPt!==i&&(e&&(this.cWt.Ty(),this.cWt.OGt.eM()),this.cWt.QYt(i)):(this.cWt=function(t,i,e,s,n,r,o,h,a,u){const c=s.Tr.tP,l=new eJ(c),d=new $K(Ri.NI,t,s,l,n,r,o,u),f=i.map((t=>t.YA)),g=h.USt(l,s.Tr.tP,f),_=new vJ(d,l,g,a);return _.jGt(i),_}(i,t,this.cz,this.kIt,this.OQ,this.plt,this.tYt,this.YWt,this.UG,this.TWt.useCredentials),this.cWt.LGt.yn(JK.PYt,this.QZt),this.cWt.LGt.yn(JK.zYt,this.FZt),this.cWt.CGt.yn(js.nGt,this.YZt),this.cWt.CGt.yn(js.oGt,this.VZt),this.cWt.CGt.yn(js.hGt,this.GZt),this.cWt.CGt.yn(js.rGt,this.WZt)),this.cWt.jGt(t)}else{var n;null==(n=this.cWt)||n.wy(),this.cWt=void 0}var r;this.b5&&t&&!s?(this.zWt?this.zWt.EPt!==t&&(e&&(this.zWt.Ty(),this.zWt.OGt.eM()),this.zWt.QYt(t)):(this.zWt=function(t,i,e,s,n,r,o,h,a,u){const c=s.Tr.tP,l=new eJ(c),d=new $K(Ri.SI,t,s,l,n,r,o,u),f=h.USt(l,s.Tr.tP,[i.YA]),g=new vJ(d,l,f,a);return g.jGt([i]),g}(t,this.b5,this.cz,this.kIt,this.OQ,this.plt,this.tYt,this.YWt,this.UG,this.TWt.useCredentials),this.zWt.LGt.yn(JK.zYt,this.FZt),this.zWt.CGt.yn(js.nGt,this.YZt),this.zWt.CGt.yn(js.rGt,this.WZt)),this.zWt.jGt([this.b5])):(null==(r=this.zWt)||r.wy(),this.zWt=void 0);this.ZZt()}PZt(t,i){if(this.cZt){this.cZt.LGt.EPt===t?i&&(this.cZt.Ty(),this.cZt.OGt.eM()):(this.cZt.wy(),this.cZt=void 0)}if(!this.cZt&&t){const i=this.uZt.get(t.Gx);i.UI=lc.Jn,this.cZt=function(t,i,e,s,n,r,o){const h=e.Tr.tP,a=new rJ(i,h),u=new eJ(h),c=new $K(Ri.ON,t,e,u,s,n,r,o),l=new fJ(u,h,Ri.ON),d=new vJ(c,u,l);return d.RGt(a),d}(t,i,this.kIt,this.OQ,this.plt,this.tYt,this.TWt.useCredentials)}}ZZt(){const t=[this.b5,this.M5].filter($t).map((t=>t.YA));this.kIt.Tr.tP.LQt(t)}async A7(t,i,e,s){let n;if(await Promise.all(t.map((t=>t.catch(ya)))),yi(s),await this.jZt(),yi(s),this.SWt=void 0,this.IWt=void 0,this.SIt=!0,e.gBt){n=YJ([this.aWt,this.hWt].filter($t))}else n=this.XNt;const r=n.gP(i),o=this.cz.zy(Zi.bb,s);this.cz.Wb(r,e.bWt),this.DWt&&this.yWt.length>0&&(this.kIt.Tr.tP.CQt(),this.HZt(this.cz.xE),this.zZt()),await o,this.NIt()}NIt(){const t=this.Az;if(this.KE||this.wk||void 0===t)return;const i=this.xE;var e,s;t+this.xE-this.Ek.md.maximumOffset<i?null==(e=this.aV)||e.Cn():null==(s=this.aV)||s.zk()}HZt(t){for(const i of this.yWt)i.tVt(t)||(i.QGt(),i.OGt.ZVt()),i.BGt(t)||(i.FGt(),i.OGt.HVt())}LZt(){for(const t of this.yWt)t.Ty()}jZt(){return Promise.all([this.JCt(),this.XZt(),this.qZt()])}zZt(){this.KCt(),this.KZt(),this.JZt()}async AZt(){this.DWt&&this.yWt.length>0&&(this.yWt.forEach((t=>t.QGt())),await this.JCt(),this.KCt(),this.yWt.forEach((t=>t.LGt.hVt())))}KCt(){if(this.$Zt)return;const t=()=>{this.$Zt=void 0};this.tHt=new Wt,this.tHt.Sy(this.zQ.ly),this.$Zt=Vh(this.gjt(this.tHt.ly),this.tHt).catch(this.LWt).then(t,t)}async JCt(){var t;null==(t=this.tHt)||t.Ty();const i=this.$Zt;this.$Zt=void 0,i&&await i}async gjt(t){yi(t);const i=this.yWt;for(;;){const e={stack:[],error:void 0,hasError:!1};try{const s=[],n=this.cz.xE;for(const t of i){const i=t.LGt,e=t.pft(n);if(i.oxt)s.push(i.QFt());else if(t.UGt(n,e,this.UG.ZK)){const n=i.iVt(e);if(void 0===n){if(i.EPt.pPt.NBt)continue;const t=i.EPt.pPt.Zot;t.length&&t[0].lB>e&&(this.xE=1/0),i.cVt(),i.nVt(e)}else{const[e,s]=n;i.jct(e,s,t.EFt),t.CGt.wGt(e,s)}s.push(i.QFt())}}const r=Ne(e,Wt.Iy([t]),!1);if(0===s.length){i.every((t=>t.LGt.xxt))||s.push(this.cz.zy(Zi.Eb,r.ly));for(const t of i)s.push(t.CGt.zy(js.rGt,r.ly))}await Ao(Promise.race(s),r.ly)}catch(t){e.error=t,e.hasError=!0}finally{qr(e)}}}KZt(){if(this.iHt)return;const t=()=>{this.iHt=void 0};this.eHt=new Wt,this.eHt.Sy(this.zQ.ly),this.iHt=Vh(this.sHt(this.eHt.ly),this.eHt).catch(this.LWt).then(t,t)}async XZt(){var t;null==(t=this.eHt)||t.Ty();const i=this.iHt;this.iHt=void 0,i&&await i}async sHt(t){yi(t);const i=this.yWt;for(;;){const e=[];for(const t of i){const i=t.LGt,s=t.CGt;if(s.oxt)e.push(s.QFt());else{const t=i.HYt();t?"vlt"===t.YA?(s.yGt(t),e.push(s.QFt())):"yBt"===t.YA&&(s.mGt(t),e.push(s.QFt())):e.push(i.aVt())}}if(0===e.length)break;await Ao(Promise.race(e),t)}}JZt(){if(this.nHt)return;this.rHt=new Wt,this.rHt.Sy(this.zQ.ly);const t=()=>{this.nHt=void 0};this.nHt=Vh(this.oHt(this.rHt.ly),this.rHt).catch(this.LWt).then(t,t)}async qZt(){var t;null==(t=this.rHt)||t.Ty();const i=this.nHt;this.nHt=void 0,i&&await i}async oHt(t){for(;;){const i=this.yWt;i.forEach((t=>t.Lct()));const e=this.cz.xE,s=[],n=[];for(const t of i){const i=t.CGt;for(const r of t.kGt){const t=r.OFt?s:n;if(r.oxt)t.push(r.QFt());else if(!r.FFt(e)){const e=i.IGt(r.YA);e?"vlt"===e.YA&&e.TBt===this.mWt?(r.Mft(e),t.push(r.QFt())):"Yxt"===e.YA&&e.TBt===this.mWt&&(r.F4(e),t.push(r.QFt())):n.push(i.DGt(r.YA))}}}if(0===s.length){if(await this.hHt(i,e,t))continue}if(0===s.length&&0===n.length){i.every((t=>t.kGt.length>0&&t.kGt.every((t=>t.FFt(e)))))&&this.vV.I3();break}await Ao(Promise.race([...s,...n]),t)}}async hHt(t,i,e){const s=[],n=[];for(const e of t){const t=e.pft(i);for(const r of e.kGt){if(!r.OFt)continue;const o=e.CGt.IGt(r.YA);if(void 0!==o){if(o.TBt===this.mWt)return!1;s.push(o)}else{if(e.oxt||e.UGt(i,t,this.UG.ZK)||!r.YFt(i,t))return!1;{const t=r.RFt.EFt;void 0!==t&&n.push(t)}}}}if(0===s.length)return!1;const r=nw(s,(t=>t.TBt)).TBt;if(s.every((t=>"Yxt"===t.YA&&t.TBt===r))){const t=sw(s,(t=>t.lB)).lB,i=[...s,...n],r=await this.aHt(i);this.uHt(r)?(zi.KPt(WX,"Seamless switch from",this.vV.md,"to",r),await this.vV.D$(r),zi.KPt(WX,"Seamless switch complete.")):await this.cHt(t,r,e),this.mWt=s[0].TBt}else for(const i of t)for(const t of i.kGt){let e=i.CGt.IGt(t.YA);for(;void 0!==e&&("Yxt"!==e.YA||e.TBt!==r);)zi.KPt(WX,"Removing append for other discontinuity, expecting "+r,e),i.CGt.GFt(e),e=i.CGt.IGt(t.YA)}return!0}uHt(t){return this.UWt===qT.Tz||this.UWt!==qT.Sz&&this.vV.N$(t)}async aHt(t){const i=t.map((t=>t.EGt.dht)),e=i.map((t=>({VN:t}))),s=Ms(t,(t=>t.EGt.vBt));s.push(...this.kIt.Tr.jQt);let n=await vq(this.TWt.contentProtection,i,s,this.OQ,this.TWt.useCredentials);return 0===n.length&&this.vV&&this.vV.md.yV.length>0&&(n=this.vV.md.yV),{YA:uh.FQ,k5:e,yV:n,Q5:this.TWt.useManagedMediaSource}}async cHt(t,i,e){var s;const n=this.vV,r=n.ct,o=this.TE.length>0&&this.xE<t;if(o)try{for(zi.KPt(WX,"Marking end of stream and waiting for ended to switch discontinuity."),n.I3();!this.cz.OE&&this.cz.xE<t;)await this.cz.zy([Zi.Eb,Zi.qy],e)}catch(t){throw n.w3(),n.S5(r),t}zi.KPt(WX,"Perform hard switch from",null==(s=this.vV)?void 0:s.md,"to",i);try{this.cz.xtt(),this.xE<t&&this.cz.Wb(t,!0,!0),this.M5=void 0,this.b5=void 0,this.ZZt(),await this.cz.tr(),this.vV=await this.cz.$n(i),this.I5(),this.fNt(),this.gNt(),this.vV.y5&&(this.M5=new jJ(Ri.NI,this.vV.y5,this.jWt?this.Apt:void 0,this.OWt?this.cjt:void 0),this.M5.O3(t-1,t)),this.vV.A5&&(this.b5=new jJ(Ri.SI,this.vV.A5,this.jWt?this.Apt:void 0,this.OWt?this.cjt:void 0),this.b5.O3(t-1,t)),this.ZZt()}finally{o&&V(this.cz.Pk()),this.cz.Ltt()}if(this.cWt){const t=void 0!==this.b5&&void 0===this.zWt?[this.M5,this.b5]:[this.M5];this.cWt.jGt(t)}this.zWt&&this.zWt.jGt([this.b5]),zi.KPt(WX,"Hard switch complete.")}CZt(t){return Ao(_w(Ms(this.yWt,(t=>t.kGt.map((t=>t.QFt()))))),t)}mIt(){const t=this.Tk,i=this.yk;this.NDt===t&&this.IDt===i||(this.NDt=t,this.IDt=i,this.yo(new hD))}async gn(){zi.Hj(Xc,"Unloading the player."),this.lHt(),this.aDt(),await this.tr(),this.cz.zV=void 0,this.fZt.gn(),await this.xV.gn(),await this.Apt.gn(),await this.cjt.gn(),this.Oz.gn(),this.Pz.gn(),this.Ul.gn(),this.dHt.gn(),this.kDt.wy(),this.tYt.wy(),this.YWt&&(this.YWt.wy(),this.YWt=void 0)}async tr(){zi.Hj(Xc,"Resetting the player."),this.fn(rs.wPt,this.handleBufferingErrorEvent),this.mWt=-1,this.zQ.Ty(),this.m7.Ty(),this.m7=new Wt,this.m7.Sy(this.zQ.ly),this.IZt.Ty(),this.IZt=new Wt,this.IZt.Sy(this.zQ.ly);const t=[this.Cpt,this.p7,this.xWt].filter($t);await Promise.all(t.map((t=>t.catch(ya)))),this.Cpt=void 0,this.p7=void 0,this.xWt=void 0,this.aWt=void 0,this.hWt=void 0,this.AWt=void 0,this.eZt=void 0,this.nZt=void 0,this.oZt=void 0,this.hZt=void 0,this.nZt=void 0,this.oZt=void 0,this.hZt=void 0,this.aV=void 0,this.QG.tr(),this.NZt=[],this.XWt(void 0),this.LZt(),await this.jZt(),this.zWt&&(this.zWt.wy(),this.zWt=void 0),this.cWt&&(this.cWt.wy(),this.cWt=void 0),this.cZt&&(this.cZt.wy(),this.cZt=void 0),this.b5=void 0,this.M5=void 0,this.vV=void 0,this.kIt&&(this.kIt.wy(),this.kIt=void 0),this.FWt&&(this.Ul.eV(this.FWt.nt),this.FWt=void 0),await this.xV.tr(),await this.Apt.tr(),await this.cjt.tr(),this.cz.jV(),await this.cz.tr(),this.TWt=void 0,this.DWt=!1,this.D5=Mo.PP(),this.SWt=void 0,this.SDt=void 0,this.NDt=0,this.IDt=0,this.IWt=void 0,this.SIt=!1,this.n7=!1,Fe.Rg(this.EWt),this.rIt=!1,this.fHt=!1,this.KNt=0,this.UWt=qT.Mz,this.dHt.tr(),this.gHt(),this.yo(new Js(this.xE,this.fk))}gHt(){for(const t of this.Oz.Ix)t.gn();for(const t of this.Pz.Ix)t.gn();for(const t of this.Ul.Ix)t.gn();this.Oz.tr(),this.Pz.tr(),this.Ul.tr(),this.uZt.clear()}_Ht(){this.dHt.yn(PJ,this.Ds),this.dHt.yn(E.oP,this.vz),this.dHt.yn(E.rP,this.vHt),this.dHt.yn(E.iP,this.wHt),this.UG.yn("RK",this.CDt),this.UG.yn("UK",this.jDt),this.cz.yn(zJ,this.Ds),this.cz.yn(Me.ua,this.ODt),this.cz.yn(Zi.Yy,this.handleContentProtectionErrorEvent),this.cz.yn(Zi.Zy,this.mHt),this.cz.yn(Zi.qy,this.Sh),this.cz.yn(Zi.wb,this.gRt),this.cz.yn(Zi.so,this.pHt),this.cz.yn(Zi.mb,this.AHt),this.cz.yn(E.wx,this.rF),this.cz.yn(Zi.Eb,this.j9),this.cz.yn(Zi.Mb,this.We),this.cz.yn(Zi.bb,this.YV),this.cz.yn(Zi.yb,this.yHt),this.cz.yn(Zi.kb,this.bHt)}lHt(){this.dHt.fn(PJ,this.Ds),this.dHt.fn(E.oP,this.vz),this.dHt.fn(E.rP,this.vHt),this.dHt.fn(E.iP,this.wHt),this.UG.fn("RK",this.CDt),this.UG.fn("UK",this.jDt),this.cz.fn(zJ,this.Ds),this.cz.fn(Me.ua,this.ODt),this.cz.fn(Zi.Yy,this.handleContentProtectionErrorEvent),this.cz.fn(Zi.Zy,this.mHt),this.cz.fn(Zi.qy,this.Sh),this.cz.fn(Zi.wb,this.gRt),this.cz.fn(Zi.so,this.pHt),this.cz.fn(Zi.mb,this.AHt),this.cz.fn(E.wx,this.rF),this.cz.fn(Zi.Eb,this.j9),this.cz.fn(Zi.Mb,this.We),this.cz.fn(Zi.bb,this.YV),this.cz.fn(Zi.yb,this.yHt),this.cz.fn(Zi.kb,this.bHt)}constructor(t,i,e,s,n,r,o,h){super(),this.UG=e,this.QG=s,this.tYt=n,this.VWt=r,this.uZt=pc(),this.OWt=!0,this.jWt=!0,this.DWt=!1,this.TWt=void 0,this.vV=void 0,this.Cpt=void 0,this.zQ=new Wt,this.kIt=void 0,this.nZt=void 0,this.oZt=void 0,this.hZt=void 0,this.dWt=void 0,this.aWt=void 0,this.hWt=void 0,this.AWt=void 0,this.eZt=void 0,this.NZt=[],this.b5=void 0,this.M5=void 0,this.zWt=void 0,this.cWt=void 0,this.cZt=void 0,this.YWt=void 0,this.IZt=new Wt,this.xWt=void 0,this.m7=new Wt,this.p7=void 0,this.mWt=-1,this.tHt=void 0,this.eHt=void 0,this.rHt=void 0,this.$Zt=void 0,this.iHt=void 0,this.nHt=void 0,this.qTt=!0,this._Zt=0,this.gZt=!1,this._V=Nr.pG,this.dV=void 0,this.fV=void 0,this.D5=Mo.PP(),this.MHt=[],this.SWt=void 0,this.NWt=void 0,this.SIt=!1,this.n7=!1,this.SDt=void 0,this.NDt=0,this.IDt=0,this.IWt=void 0,this.EWt=0,this.rIt=!1,this.fHt=!1,this.UWt=qT.Mz,this.vCt=void 0,this.THt=void 0,this.KNt=0,this.handleContentProtectionErrorEvent=t=>{this.dV=la(t.errorObject),this.fV=t.errorObject,this.Ds(t)},this.handleBufferingErrorEvent=t=>{this.eG(new qi(vt.MEDIA_LOAD_ERROR,t.lt.message,t.lt))},this.ODt=t=>{this.eG(ju(t.lt))},this.mHt=()=>{this.iQt();const t=this.ct;t!==this.SDt&&(this.SDt=t,this.yo(new Hs(this.SDt)))},this.Sh=()=>{this.OE&&this.yo(new fa(this.xE))},this.gRt=()=>{this.yo(new Zr(this.xE))},this.pHt=()=>{this.SNt(),this.yo(new fi(this.xE))},this.vz=()=>{void 0!==this.THt&&(Fe.Rg(this.THt),this.THt=void 0),this.yo(new te(this.xE))},this.AHt=()=>{this.yo(new ii(this.xE))},this.rF=()=>{this.yo(new Yu(this.xE,this.fk))},this.j9=()=>{const t=this.CPt;ew(this.MHt,t)||(this.yo(new LK),this.MHt=t),this.yo(new A(this.xE,this.NE))},this.QZt=Yh((t=>{t.RI===Ri.NI&&this.uWt()&&V(this.lWt())}),200),this.FZt=t=>{var i;this.KNt+=t.UYt;const e=this.rt.V>0?t.RI===Ri.NI:t.RI===Ri.SI;"vlt"===t.BYt&&e&&V(this.wZt()),this.yo(new FU(function(t){if(t){if(void 0!==t.EMt){var i,e;const s=t.EMt.Cn+(null!=(e=t.EMt.V)?e:0);return{zu:t.zD,Uct:[null==(i=t.EMt)?void 0:i.Cn,s],zI:!0}}return{zu:t.zD.toString()||"",zI:!0}}return{zu:"",zI:!0}}(t.uri),(null==(i=this.kPt)?void 0:i.FY)||0,t.mediaSequenceNumeber,t.mediaTrackId,t.RI,t.httpStatusCode,t.UYt))},this.We=()=>{this.yo(new Yr(this.xE))},this.YV=()=>{this.yo(new aa(this.xE))},this.yHt=()=>{this.mIt()},this.bHt=()=>{this.yo(new $e(this.xE,this.Nk))},this.vHt=()=>{this.cz.wk?this.yo(new Ai(this.xE)):(null!=this.THt||(this.THt=Fe.Pg((()=>{this.fHt&&(this.vCt=void 0,V(this.gWt()))}),2500)),this.SNt(),this.yo(new Ai(this.xE)))},this.wHt=()=>{this.fHt=!0,this.yo(new AS(this.xE,this.fk))},this.LWt=t=>{Tu(t)||jb(t)||Ob(t)||(this.LZt(),V(this.jZt()),this.yo(new qX(t)))},this.DFt=()=>{this.iQt()},this.QWt=t=>{V(this.TZt(t.EPt,this.zQ.ly))},this.wAt=t=>{if(Tu(t))return;const i=t instanceof qi?t:new qi(vt.MEDIA_DECODE_ERROR,t.message,t);this.eG(i)},this.onTextTrackChange=t=>{if(!this.dWt)return;const i=t.Ht,e=this.aZt(i);e&&(i.UI===lc.Xx||i.UI===lc.Jn?(V(this.MZt(e)),this.uZt.forEach((t=>{t!==i&&(t.UI=lc.Ch)}))):this.AWt&&this.AWt===e&&V(this.BWt(this.aWt,this.hWt,void 0)))},this.retryOfflineRenditionsCallback=async(t,i)=>{this.pWt!==t&&this.VPt!==t&&this.WPt!==t||(await this.kIt.fFt(t,i),t.pPt.YUt=-1/0)},this.CDt=()=>{this.fNt()},this.jDt=()=>{this.gNt()},this.YZt=t=>{const i=this.dWt,e=null==i?void 0:i.OBt;if(this.kIt.SFt(t.dht,t.EPt.pPt),!e&&(this.kIt.NFt(t.dht,t.EPt.pPt),this.ZWt.rzt(),i)){const t=void 0!==this.aWt&&!Qa(i.izt,this.aWt),e=void 0!==this.hWt&&!Qa(i.ezt,this.hWt);(t||e)&&this.BWt(t?void 0:this.aWt,e?void 0:this.hWt,this.AWt).catch(ya)}},this.VZt=t=>{this.ZWt.azt(t.EPt,t.Igt)},this.GZt=t=>{this.ZWt.czt(t.EPt,t.aGt.BB())},this.WZt=t=>{this.kIt.MFt(t.EPt)},this.plt=new pW(o),this.cz=t,this.OQ=i,this.AV=new XX(this.UG.NK),this.yZt=new KX(this.cz),this.mZt=new hq(this.UG),this.Dft=h.retryConfiguration,this.Oz=new pe,this.Pz=new pe,this.ZWt=new HX(this,this.UG,this.Oz,this.Pz),this.fZt=new Cc,this.xV=new dr(this.cz,this.OQ),this.Apt=new wW(this.cz),this.cjt=new qF(this.cz),this.Ul=new YE([this.fZt,this.xV.Z,this.Apt.Z,this.cjt.Z,this.cz.nt]),this.SV=new QE(this.OQ),this.cz.zV=this.SV,this.kDt=new FJ(this,this.cz),this.dHt=new uo(this.kDt,!0),this._Ht()}},QJ=class{async nG(t,i){return!!or(t.type)&&!t.useNativePlayback}async rG(t){return!!t.aes128||await mu(t,!0)}},FJ=class extends uD{get fk(){return this.ta.fk}PDt(){this.yo(new Yu(this.xE,this.fk))}constructor(t,i){super(i),this.ta=t}};function YJ(t){return t.reduce(((t,i)=>t.Sn(i.pPt.SUt)),new Mo([0,1/0]))}function VJ(t){const i=dl(t,(t=>t.APt)),e=t.filter((t=>t.yPt)),s=Fe.xA,n=e.map((t=>t.gs)).filter($t),r=TJ(n,s);return r?dl(e,(t=>t.gs===r)):i}function GJ(t,i){for(const e of i){const i=t.filter((t=>t.dht&&t.dht.TLt&&Wo(t.dht.TLt,e)));if(0!==i.length)return i}}function WJ(t){var i;return null!=(i=VJ(t))?i:t[0]}function ZJ(t,i){return t.filter((t=>HJ(t,i)))}function HJ(t,i){const e=i+BJ,s=0===t.ezt.length||t.ezt.some((t=>t.pPt.YUt<Fe.Og()-e)),n=0===t.izt.length||t.izt.some((t=>t.pPt.YUt<Fe.Og()-e));return s&&n}function XJ(t,i){if(!i||i.pPt.NBt)return!1;const e=i.pPt.Zot;return 0!==e.length&&e[0].lB>t}r(),r();var qJ=class{async JFt(t,i,e){try{const s=await crypto.subtle.importKey("raw",i,{name:"AES-CBC"},!1,["decrypt"]),n=await crypto.subtle.decrypt({name:"AES-CBC",iv:e},s,t);return new T(n)}catch(t){throw new qi(vt.CONTENT_PROTECTION_INTERNAL_ERROR,"Error during AES128 decrypt.")}}wy(){}static PS(){return"undefined"!=typeof crypto&&void 0!==crypto.subtle&&void 0!==crypto.subtle.decrypt}};r(),Qi(),r(),r(),r();var KJ=class extends Jr{constructor(t,i){super(t),this.data=i}},JJ=["message","messageerror","error"];r();var $J=class extends Jr{constructor(t){super(Me.ua),this.error=t}},t$=class extends tu{get SHt(){return this.NHt.ly.sy}IHt(t,i){this.SHt||(void 0!==this.DHt?this.DHt.IHt(t,i):this.EHt.push({Pb:t,kHt:i}))}xHt(){this.SHt||(this.NHt.Ty(),nt(this.EHt),void 0!==this.DHt&&this.DHt.xHt())}constructor(t){super(),this.DHt=void 0,this.EHt=[],this.LHt=t=>{if(this.SHt)t.xHt();else{this.DHt=t,this.DHt.yn(JJ,this.Ds);for(const i of this.EHt)t.IHt(i.Pb,i.kHt);nt(this.EHt)}},this.CHt=t=>{if(this.SHt)return;const i=t instanceof b?t:new b("Could not create Worker.");this.yo(new $J(i)),this.xHt()},this.NHt=new Wt,t(this.NHt.ly).then(this.LHt,this.CHt)}};r(),r();var i$=class extends tu{IHt(t,i){i?this.DHt.postMessage(t,i):this.DHt.postMessage(t)}xHt(){this.Bo(),this.DHt.removeEventListener("message",this.jHt),this.DHt.removeEventListener("messageerror",this.OHt),this.DHt.removeEventListener("error",this.btt),this.DHt.terminate()}constructor(t,i){super(),this.jHt=t=>{this.yo(new KJ("message",t.data))},this.OHt=t=>{this.yo(new KJ("messageerror",t.data))},this.btt=t=>{null==t.preventDefault||t.preventDefault.call(t);const i=t.error instanceof b?t.error:new b(t.message);this.yo(new $J(i)),this.xHt()},this.DHt=new Jl(t,i),this.DHt.addEventListener("message",this.jHt),this.DHt.addEventListener("messageerror",this.OHt),this.DHt.addEventListener("error",this.btt)}};Qi(),r(),Qi();var e$=0,s$=class extends tu{IHt(t,i){i?this.RHt.contentWindow.postMessage({type:"message",data:t},"*",i):this.RHt.contentWindow.postMessage({type:"message",data:t},"*")}xHt(){var t;this.RHt.removeEventListener("load",this.PHt),self.removeEventListener("message",this.zHt),null==(t=this.RHt.contentWindow)||t.postMessage({type:"terminate"},"*"),dn(this.RHt)}constructor(t,i){super(),this.PHt=()=>{this.RHt.removeEventListener("load",this.PHt),this.RHt.contentWindow.postMessage({type:"initialize",id:this.aS,script:this.BHt},"*")},this.zHt=t=>{t.origin===this.UHt&&t.data.id===this.aS&&("initialized"===t.data.type||("error"===t.data.type?(this.yo(new $J(new b(t.data.data.message))),this.xHt()):this.yo(new KJ("message",t.data.data))))},this.aS=e$++,this.BHt=t;const e=Fe.Ah("iframe.html",i);this.RHt=function(t){const i=h.createElement("iframe");return i.width="0",i.height="0",i.style.display="none",i.role="",i.src=t,h.body.appendChild(i),i}(e.href),this.UHt=e.origin,this.RHt.addEventListener("load",this.PHt),self.addEventListener("message",this.zHt)}};function n$(t,i,e){const s=Fe.TA(t,i);return new t$((t=>async function(t,i,e,s){let n;try{return n=new i$(t,e),await o$(n,s),n}catch(t){null==n||n.xHt(),X(t)}if(r$&&Ry){let i;try{const e=await Fe.wE.hI({zu:t,LI:Ve.GET,oI:Ee.ON,ly:s});i=await e.UN(s)}catch(t){X(t)}if(i){let t;try{const r=Ry([i],{type:"application/javascript"});return t=URL.createObjectURL(r),n=new i$(t,e),await o$(n,s),n}catch(t){null==n||n.xHt(),X(t),r$=!1}finally{t&&URL.revokeObjectURL(t)}}}try{return n=new s$(t,i),await o$(n,s),n}catch(t){throw null==n||n.xHt(),t}}(s,i,e,t)))}var r$=!0;async function o$(t,i){const e=await t.zy(["message","error"],i);if("error"===e.type)throw function(t){return new qi(vt.CONFIGURATION_ERROR,"THEOplayer workers could not be loaded. Please check the configuration of the libraryLocation.",t)}(e.error);if(!function(t){return Cd(t)&&"8.13.1"===t.QHt}(e.data))throw new qi(vt.CONFIGURATION_ERROR,"THEOplayer workers could not be loaded. Please check that the worker's version matches THEOplayer's version (8.13.1).");return e}r();var h$=function(t){return t.FHt="JFt",t.YHt="TYt",t}({}),a$=function(t){return t.VHt="GHt",t.WHt="ZHt",t}({}),u$=class{HHt(){const t=n$(this.XHt,this.qHt,{name:"THEOplayer decrypt worker"});return t.yn("message",this.KHt),t.yn("error",this.JHt),t}JFt(t,i,e){const s=""+ ++this.$Ht,n={tXt:h$.FHt,iXt:s,eXt:t,sXt:i,nXt:e},r=new xh;return this.rXt.set(s,r),null!=this.DHt||(this.DHt=this.HHt()),this.DHt.IHt(n),r.rM}wy(t){void 0===t&&(t=new J),this.rXt.forEach((i=>i.nM(t))),this.rXt.clear(),this.DHt&&(this.DHt.xHt(),this.DHt=void 0)}constructor(t){this.DHt=void 0,this.$Ht=0,this.rXt=ll(),this.KHt=t=>{const i=t.data,e=i.oXt,s=this.rXt.get(e);if(s)if(this.rXt.delete(e),i.hXt===a$.VHt)s.sM(i.aXt);else if(i.hXt===a$.WHt){const t=i.uXt,e=i.cXt?new b(i.cXt):void 0,n=new qi(vt.CONTENT_PROTECTION_INTERNAL_ERROR,"Error during AES128 decrypt. (code: "+t+")",e);s.nM(n)}},this.JHt=t=>{const i=new qi(vt.CONTENT_PROTECTION_INTERNAL_ERROR,t.error.message,t.error);this.wy(i)},this.qHt=t;try{this.XHt=Fe.TA("theoplayer.d.js",t)}catch(t){throw new qi(vt.CONFIGURATION_ERROR,"Invalid player configuration: missing libraryLocation",t)}}};function c$(t){return qJ.PS()?new qJ:new u$(t)}function l$(t){const i=dl(t.boxes,CC);if(!i)return;const e=dl(i.boxes,jC);return e?e.handlerType:void 0}function d$(t){const i=new PA;return i.boxes.push(...t.boxes),i}function f$(t){const i=new tA;return i.boxes.push(...t.boxes),i}r(),r(),r(),r(),Qi();var g$=8;function _$(t,i){const e=function(t){const i=new lA;return i.boxes.push(...t.boxes),i}(t),s=w$(i);for(let t=0;t<e.boxes.length;t++){const n=e.boxes[t];if(n===i)e.boxes[t]=new Ip(new T(i.getSize()-g$));else if(OC(n)){const i=n,r=Jv(i.boxes,(t=>t instanceof Il&&t.trackId===s));if(r>=0){const s=i.boxes[r],n=f$(i);n.boxes[r]=new Ip(new T(s.getSize()-g$)),e.boxes[t]=n}}}return e}function v$(t,i){const e=function(t){const i=new yA;return i.boxes.push(...t.boxes),i}(t);for(let t=0;t<e.boxes.length;t++){const s=e.boxes[t];if(zC(s)){const n=dl(s.boxes,BC);n&&n.trackId===i&&(e.boxes[t]=new Ip(new T(s.getSize()-g$)))}}return e}function w$(t){return dl(t.boxes,LC).trackId}function m$(t,i,e,s){const n=dl(t.boxes,BC),r=e.OU(i).fU();let o=D.ZERO;for(const i of t.boxes){if(i instanceof at){o=Af(i.baseMediaDecodeTime,r),i.baseMediaDecodeTime=i.baseMediaDecodeTime.subtract(o);break}if(i instanceof gA){o=Af(D.fromNumber(i.baseMediaDecodeTime),r),i.baseMediaDecodeTime-=o.toNumber();break}}if(o.isZero())return;const h=dl(t.boxes,UC);if(void 0!==h&&h.samples.length>0){const t=h.samples;if(!h.flags.sampleDurationPresent){h.flags.sampleDurationPresent=!0;const i=null!=s?s:n.defaultSampleDuration;for(const e of t)e.duration=i}t[0].duration+=o.toNumber(),h.samples=t}}r();var p$="Mp4Transmuxer",A$=class extends cJ{AGt(t,i){yi(i);const e=t.EPt,s=dj(Al(t.yBt.rI.rI));if(!s)throw new b("Mp4Transmuxer - Unable to parse "+e.YA+" MP4 initializer.");this.G4=s;const n=function(t){let i,e;for(const s of t.Z)i||(i=s.j2),e||(e=s.C2);if(i||e)return{TLt:i,NLt:e,Pzt:void 0};return}(s);n&&this.MGt(e,n);const r=function(t){for(const i of t.Z)if(void 0!==i.O2)return i.O2;return}(s);void 0!==r&&this.TGt(e,r);const o=function(t){var i;const e=YA(t),s=dl(e.boxes,kC),n=s.boxes.filter(xC),r=dl(n,(t=>l$(t)===Pp.AUDIO)),o=dl(n,(t=>l$(t)===Pp.VIDEO)),h={TLt:{Fj:r?w$(r):void 0},NLt:{Fj:o?w$(o):void 0}},a=null==(i=dl(s.boxes,OC))?void 0:i.boxes.filter(RC);var u,c;const l=a?{TLt:null!=(u=dl(a,(t=>t.trackId===h.TLt.Fj)))?u:void 0,NLt:null!=(c=dl(a,(t=>t.trackId===h.NLt.Fj)))?c:void 0}:void 0;var d,f;if(l&&(h.TLt.dR=null==(d=l.TLt)?void 0:d.defaultSampleDuration,h.NLt.dR=null==(f=l.NLt)?void 0:f.defaultSampleDuration),!r||!o)return{TLt:r?t:void 0,NLt:o?t:void 0,_Q:h};const g=d$(e),_=d$(e),v=e.boxes.indexOf(s);g.boxes[v]=_$(s,o),_.boxes[v]=_$(s,r);const w=g.serialize().join(),m=_.serialize().join();return{TLt:w,NLt:m,_Q:h}}(t.yBt.rI.rI);if(this.lXt=o._Q,o.NLt){const i=dl(s.Z,(t=>t.Fj===o._Q.NLt.Fj)),e={YA:"Yxt",rI:{YA:Xi.v$,rI:o.NLt},sct:Ri.NI,TBt:t.TBt,EGt:{dht:'video/mp4; codecs="'+i.C2+'"',vBt:t.vBt},lB:t.lB,EPt:t.EPt,HFt:t.yBt.HFt};this.FVt(e)}if(o.TLt){const i=dl(s.Z,(t=>t.Fj===o._Q.TLt.Fj)),e={YA:"Yxt",rI:{YA:Xi.v$,rI:o.TLt},sct:Ri.SI,TBt:t.TBt,EGt:{dht:'audio/mp4; codecs="'+i.j2+'"',vBt:t.vBt},lB:t.lB,EPt:t.EPt,HFt:t.yBt.HFt};this.FVt(e)}return Promise.resolve()}async bGt(t,i){yi(i);const e=t.vlt.HFt;zi.Hj(p$,"Transmuxing fMP4: "+yt(e.$yt));const s=t.vlt.rI,n=y$(s.rI,this.G4),r=rw(n.map((t=>t.kst)),NN);if(void 0!==r&&(e.xst=r,this.NGt(t.EPt)),!this.PQt.lQt(t.TBt)){const s=H.BU(e.lB);if(n.length>0){const i=rw(n.map((t=>t.dXt)),NN);for(const n of this.fGt)this.PQt.MQt(t.TBt,n,i,s,b$(e),!1);this.NGt(t.EPt)}this.PQt.lQt(t.TBt)||await Ao(this.PQt.fQt(t.TBt),i)}const o=this.PQt.pQt(t.TBt),h=e.xst?this.PQt.AQt(e.xst,e).BB():e.lB,a=lJ(e,h);var u;const c={tGt:a,iGt:dJ(e,a),lB:h,ct:null!=(u=e.ct)?u:0,rQ:o.BB(),TBt:t.TBt,EPt:t.EPt,HFt:t.vlt.HFt},l=function(t,i){if(void 0===i.TLt.Fj)return{TLt:void 0,NLt:t};if(void 0===i.NLt.Fj)return{TLt:t,NLt:void 0};const e=YA(t),s=d$(e),n=d$(e);for(let t=0;t<e.boxes.length;t++){const r=e.boxes[t];PC(r)&&(s.boxes[t]=v$(r,i.NLt.Fj),n.boxes[t]=v$(r,i.TLt.Fj))}const r=s.serialize().join(),o=n.serialize().join();return{TLt:r,NLt:o}}(s.rI,this.lXt);if(l.NLt){var d;const i=this.lXt.NLt.Fj,s=dl(this.G4.Z,(t=>t.Fj===i)),o=dl(n,(t=>t.Fj===i)),h=this.fXt(l.NLt,s,o,null==(d=this.lXt)?void 0:d.NLt.dR,e);this.gXt=s,this.SGt(t.EPt,e,o.kst.qB(r));const a=Ei({YA:"vlt",rI:{YA:Xi.v$,rI:h},sct:Ri.NI},c);this.FVt(a)}if(l.TLt){const t=Ei({YA:"vlt",rI:{YA:Xi.v$,rI:l.TLt},sct:Ri.SI},c);this.FVt(t)}this._Xt=e,this.vXt=n}fXt(t,i,e,s,n){if(!b$(n))return t;if(!this._Xt||!this.gXt||!this.vXt)return t;const r=this.gXt.Fj,o=dl(this.vXt,(t=>t.Fj===r)),h=this.PQt.AQt(o.wXt,this._Xt),a=this.PQt.AQt(e.kst,n).qB(h).OU(i.Lj);if(a.VB(H.sU))return t;if(a.UB(H.BU(.5)))return t;const u=fK(n)?n:n.XBt;return zi.KPt(p$,"Stretching first video frame of segment #"+u.oBt+" to fill gap of "+a.BB()+"s"),function(t,i,e,s){const n=YA(t),r=dl(n.boxes,PC);if(r){const t=r.getSize();for(const t of r.boxes)t instanceof Jn&&m$(t,i,e,s);const n=r.getSize();if(n!==t){const i=n-t;for(const t of r.boxes)t instanceof Jn&&QC(t,i)}}return n.serialize().join()}(t,i.Lj,a,s)}constructor(...t){super(...t),this.G4=void 0,this.lXt=void 0,this._Xt=void 0,this.vXt=void 0,this.gXt=void 0}};function y$(t,i){const e=cT(Rs.dj(Al(t)),Rt.mC);if(!e)throw new b("Mp4Transmuxer - Unable to parse segment or part.");return function(t,i){const e=[];for(const n of t.Z){if(!n.MR||0===n.bR.length||0===n.bR[0].kR.length)continue;const t=n.nj.Fj,r=dl(i.Z,(i=>i.Fj===t));let o=0,h=1/0,a=0;const u=n.nj.dR||0;for(const t of n.bR)for(const i of t.kR){const t=i.xR||0,e=o+t;var s;o+=null!=(s=i.ct)?s:u;const n=o+t;e<h&&(h=e),n>a&&(a=n)}const c=H.tU(n.MR.MR,r.Lj);e.push({Fj:t,dXt:c,kst:c.Kz(H.iU(h,r.Lj)),mXt:c.Kz(H.iU(o,r.Lj)),wXt:c.Kz(H.iU(a,r.Lj))})}return e}(e,i)}function b$(t){return fK(t)?t.ABt:0===t.KBt&&t.XBt.ABt}var M$="MpegtsTransmuxer",T$=class extends A${AGt(t,i){return super.AGt(t,i)}wGt(t,i){if(super.wGt(t,i),this.lD.pXt())return;var e;const s=null!=(e=null==i?void 0:i.$yt)?e:t.$yt;if(!s)return;/\.(ts|aac|mp3)/i.test(s.zD)&&this.lD.AXt()}yXt(t){let i;return t.EPt===this.bXt&&this.MXt.has(t.TBt)?i=this.MXt.get(t.TBt):(i=LJ(t.vlt.rI.rI),this.bXt=t.EPt,this.MXt.set(t.TBt,i)),i}async bGt(t,i){yi(i);const e=this.yXt(t),s=t.vlt;if(e!==xJ.eWt&&e!==xJ.sWt)return super.bGt(t,i);if(s.HFt.vBt.some(N$))throw new qi(vt.CONTENT_PROTECTION_NOT_SUPPORTED,"SAMPLE-AES encryption is not supported for MPEG-TS or Packed Audio segments");const n=this.lD.AXt();let r;e===xJ.eWt?(zi.Hj(M$,"Transmuxing MPEG-TS: "+yt(s.HFt.$yt)),r=await n.TXt({data:s.rI.rI,metadata:this.SXt})):(zi.Hj(M$,"Transmuxing raw audio: "+yt(s.HFt.$yt)),r=await n.NXt({data:s.rI.rI,metadata:this.SXt})),yi(i),this.MGt(t.EPt,{TLt:r.metadata.audio_codec,NLt:r.metadata.video_codec,Pzt:void 0}),r.metadata.video_frame_rate&&this.TGt(t.EPt,r.metadata.video_frame_rate);const o=I$(r.metadata.first_decode_timestamp),h=I$(r.metadata.first_presentation_timestamp),a=void 0!==r.metadata.first_video_presentation_timestamp?I$(r.metadata.first_video_presentation_timestamp):void 0;if(s.HFt.xst=h,this.NGt(t.EPt),void 0!==a&&this.SGt(t.EPt,s.HFt,function(t,i){let e=t.qB(i);return e.WB(H.sU)&&(e=e.Kz(EN())),e}(a,h)),!this.PQt.lQt(t.TBt)){const e=H.BU(s.HFt.lB);for(const i of this.fGt)this.PQt.MQt(t.TBt,i,o,e,b$(s.HFt),!0);this.NGt(t.EPt),this.PQt.lQt(t.TBt)||await Ao(this.PQt.fQt(t.TBt),i)}const u=this.PQt.bQt(o,s.HFt);this.SXt=r.metadata;const c=this.PQt.AQt(h,s.HFt).BB(),l=lJ(s.HFt,c);var d;const f={tGt:l,iGt:dJ(s.HFt,l),lB:c,ct:null!=(d=s.HFt.ct)?d:0,rQ:u.BB(),TBt:t.TBt,EPt:t.EPt,HFt:s.HFt};if(void 0===r.data.audio_media&&void 0===r.data.video_media){for(const t of this.fGt){const i=Ei({YA:"vlt",rI:void 0,sct:t},f);this.FVt(i)}return}const g=[];if(void 0!==r.data.audio_media){if(r.data.audio_init&&(!this.IXt||this.DXt!==t.TBt||!pm(this.IXt,r.data.audio_init))){const i=this.PQt.AQt(s.HFt.xst,s.HFt).BB(),e={YA:"Yxt",rI:{YA:Xi.v$,rI:r.data.audio_init},sct:Ri.SI,TBt:t.TBt,EGt:{dht:'audio/mp4; codecs="'+r.metadata.audio_codec+'"',vBt:s.HFt.vBt},lB:i,EPt:t.EPt,HFt:s.HFt};this.IXt=r.data.audio_init,this.DXt=t.TBt,this.FVt(e)}const i=Ei({YA:"vlt",rI:{YA:Xi.v$,rI:r.data.audio_media},sct:Ri.SI},f);this.FVt(i)}else if(t.vlt.HFt.ZBt&&Qa(this.fGt,Ri.SI)){const t=Ei({YA:"vlt",rI:void 0,sct:Ri.SI},f);this.FVt(t)}if(void 0!==r.data.video_media){if(r.data.video_init&&(!this.EXt||this.kXt!==t.TBt||!pm(this.EXt,r.data.video_init))){const i=this.PQt.AQt(s.HFt.xst,s.HFt).BB(),e={YA:"Yxt",rI:{YA:Xi.v$,rI:r.data.video_init},sct:Ri.NI,TBt:t.TBt,EGt:{dht:'video/mp4; codecs="'+r.metadata.video_codec+'"',vBt:s.HFt.vBt},lB:i,EPt:t.EPt,HFt:s.HFt};this.EXt=r.data.video_init,this.kXt=t.TBt,this.xXt=dj(Al(r.data.video_init)),this.FVt(e)}const i=this.xXt.Z[0],e=y$(r.data.video_media,this.xXt)[0],n=this.fXt(r.data.video_media,i,e,void 0,s.HFt);this.gXt=i;const o=Ei({YA:"vlt",rI:{YA:Xi.v$,rI:n},sct:Ri.NI},f);this.FVt(o),g.push(e)}else if(t.vlt.HFt.ZBt&&Qa(this.fGt,Ri.NI)){const t=Ei({YA:"vlt",rI:void 0,sct:Ri.NI},f);this.FVt(t)}this._Xt=s.HFt,this.vXt=g}Ty(){this.IXt=void 0,this.EXt=void 0,this.DXt=-1,this.kXt=-1,super.Ty()}constructor(t,i,e,s){super(i,e,s),this.SXt=void 0,this.IXt=void 0,this.EXt=void 0,this.xXt=void 0,this.DXt=-1,this.kXt=-1,this.bXt=void 0,this.MXt=pc(),this.lD=t}},S$=class{USt(t,i,e){return new T$(this,t,i,e)}};function N$(t){return t.LI===cn.Tzt}function I$(t){return H.tU(D.fromBits(t.low,t.high),t.base)}r(),Qi(),r();var D$=function(t){return t[t.MPEGTS_TO_FMP4=0]="MPEGTS_TO_FMP4",t[t.RAW_AUDIO_TO_FMP4=1]="RAW_AUDIO_TO_FMP4",t}({});il();var E$=()=>{const t=function(){if("undefined"==typeof WebAssembly)return!1;const t=Ro.mf;if(t>0&&t<=56)return!1;try{return void 0!==new WebAssembly.Module(Zn("AGFzbQEAAAA="))}catch(t){return!1}}();return E$=()=>t,t};var k$=class{TXt(t){return this.LXt(D$.MPEGTS_TO_FMP4,t)}NXt(t){return this.LXt(D$.RAW_AUDIO_TO_FMP4,t)}HHt(){const t=n$(this.XHt,this.qHt,{name:"THEOplayer transmux worker"});return t.yn("message",this.KHt),t.yn("error",this.JHt),t}LXt(t,i){const e=++this.$Ht,s={type:t,id:e,input:i},n=new xh;return this.rXt.set(e,n),this.DHt.IHt(s),n.rM}wy(t){void 0===t&&(t=new J),this.rXt.forEach((i=>i.nM(t))),this.rXt.clear(),this.DHt.xHt()}constructor(t){this.$Ht=0,this.rXt=pc(),this.KHt=t=>{const i=t.data;if(void 0!==i.requestId){const t=this.rXt.get(i.requestId);if(!t)return;this.rXt.delete(i.requestId),i.success?t.sM(i.output):t.nM(new qi(i.errorCode,i.error))}else i.success||this.wy(new qi(i.errorCode,i.error))},this.JHt=t=>{const i=new qi(vt.MEDIA_DECODE_ERROR,t.error.message,t.error);this.wy(i)},this.qHt=t;const i=E$()?"THEOplayer.transmux.js":"THEOplayer.transmux.asmjs.js";try{this.XHt=Fe.TA(i,t)}catch(t){throw new qi(vt.CONFIGURATION_ERROR,"Invalid player configuration: missing libraryLocation",t)}this.DHt=this.HHt()}},x$=class extends S${pXt(){return void 0!==this.DHt}AXt(){var t;return null!=(t=this.DHt)?t:this.DHt=new k$(this.CXt)}wy(){this.DHt&&(this.DHt.wy(),this.DHt=void 0)}constructor(t){super(),this.CXt=t,this.DHt=void 0}},L$=class{Cst(){return new x$(this.CXt)}constructor(t){this.CXt=t}};il();var C$=class extends UJ{jk(){return this.cz.jk()}get Lk(){return this.cz.Lk}set Lk(t){this.cz.Lk=t}async gn(){var t;await super.gn(),null==(t=this.BDt)||t.gn()}constructor(t,i,e,s,n,r,o,h){super(t,i,e,s,n,r,o,h),Ro.qf&&(this.BDt=new hU(this))}},j$=class extends C${async gn(){await super.gn(),await this.QV.BV(this.cz)}constructor(t,i,e,s,n,r,o,h){const a=new es(t);super(a.sG(Ri.NI),i,e,s,n,r,o,h),this.QV=a}},O$=class extends QJ{async nG(t,i){return!!qh(t.useManagedMediaSource)&&(!(!t.useManagedMediaSource&&(Ro.Ka||Ro.Sg))&&super.nG(t,i))}async rG(t){return!(t.clearkey&&!t.fairplay&&Ro.qf)&&super.rG(t)}};ko(new class extends O${bL(t,i,e,s,n,r,o){return new j$(i,e,n,r,c$(s.libraryLocation),new L$(s.libraryLocation),new ir(Oh.Ld.Xot,Oh.Ld.Hot,Oh.Ld.Zot,Oh.Ld.Kot),s)}oG(){return!0}constructor(...t){super(...t),this.hG=pt.hL}}),zi.Rt=()=>{var t;return Boolean(null==(t=s)?void 0:t.THEOplayerDebugLogsEnabled)},r(),r(),r(),r();var R$=class{Dot(t,i){return Promise.resolve(!1)}kot(t,i){return Promise.resolve(void 0)}Sot(t){return Promise.resolve(void 0)}VJ(t){return Promise.resolve(void 0)}},P$=class extends tu{jXt(){var t;return null==(t=this.OXt)?void 0:t.pPt}Cn(){V(ao((()=>this.RXt(this.rN.ly)),this.rN.ly))}async RXt(t){await this.kIt.rFt(t),this.PXt&&(this.zXt(this.PXt.ji,this.PXt.Ti),this.PXt=void 0),this.H9=!0}BXt(t,i){this.H9?this.zXt(t,i):this.PXt={ji:t,Ti:i}}zXt(t,i){const e=this.UXt(t,i),s=null==e?void 0:e.ezt[0];s!==this.OXt&&(this.QXt(),void 0!==s&&(this.OXt=s,this.FXt=new PK(this.kIt,s),this.FXt.uYt()))}QXt(){this.OXt=void 0,this.FXt&&(this.FXt.wy(),this.FXt=void 0)}UXt(t,i){const e=dl(this.kIt.Tr.tzt,(e=>void 0!==e.gLt&&e.gLt.ji===t&&e.gLt.Ti===i));return null!=e?e:this.kIt.Tr.tzt[0]}gn(){this.Bo(),this.rN.Ty(),this.rN.wy(),this.QXt(),this.kIt.wy()}constructor(t,i,e){super(),this.OXt=void 0,this.FXt=void 0,this.PXt=void 0,this.rN=new Wt,this.YXt=()=>{this.yo(new eG)},this.wc=t,this.kIt=new NK(e,new R$,t.useCredentials,t.src,t.liveOffset),this.kIt.yn(Zi.fb,this.Ds),this.H9=!1}};r();var z$=class extends gs{get ht(){return this.L8.ht}get TE(){return this.L8.TE}get NE(){return this.L8.NE}set NE(t){this.L8.NE=t}get bt(){return this.L8.bt}get xE(){return this.L8.xE}set xE(t){this.L8.xE=t}CE(t,i){this.xE=t}get ct(){return this.L8.ct}get OE(){return this.L8.OE}get zE(){return this.L8.zE}get UE(){return this.L8.UE}get lt(){return this.L8.lt}get FE(){return this.L8.FE}get VE(){return this.L8.VE}get WE(){return this.L8.WE}set WE(t){this.L8.WE=t}get XE(){return this.L8.XE}get KE(){return this.L8.KE}get $E(){return this.L8.$E}set $E(t){this.L8.$E=t}get rk(){return this.L8.rk}get ck(){return this.L8.ck}set ck(t){this.L8.ck=t}get fk(){return this.L8.fk}get _k(){return this.L8._k}get wk(){return this.L8.wk}get wV(){return this.L8.wV}get nt(){return this.L8.nt}get yk(){return this.L8.yk}get rt(){return this.L8.rt}get Tk(){return this.L8.Tk}get Nk(){return this.L8.Nk}set Nk(t){this.L8.Nk=t}get Ek(){return this.L8.Ek}get Lk(){return this.L8.Lk}set Lk(t){this.L8.Lk=t}get pV(){return this.L8.pV}get Az(){}Bk(){return this.L8.Bk()}Ck(){return this.L8.Ck()}_a(){return this.L8._a()}Wk(t){return this.L8.Wk(t)}jk(){return this.L8.jk()}be(){return this.L8.be()}Fk(){return this.L8.Fk()}Yk(){return this.L8.Yk()}Rk(){return this.L8.Rk()}Pk(){return this.L8.Pk()}tr(){return this.L8.tr()}ka(t,i,e){return this.L8.ka(t,i,e)}ge(){return this.L8.ge()}Uk(){return this.L8.Uk()}Qk(){return this.L8.Qk()}gn(){this.Bo();for(const t of ik)this.L8.fn(t,this.Ds);return this.L8.gn()}constructor(t){super(),this.L8=t;for(const t of ik)this.L8.yn(t,this.Ds)}},B$=class extends z${async ka(t,i,e){await super.ka(t,i,e),t.hlsDateRange&&this.Hyt(t,i)}Hyt(t,i){this.VXt=new P$(t,i,this.GXt),this.VXt.yn(Zi.fb,this.handleManifestUpdate),this.VXt.Cn()}tr(){return this.IFt&&(this.nt.it(this.IFt),this.j7.it(this.IFt),this.IFt.gn(),this.IFt=void 0,this.WXt=!1),this.VXt&&(this.VXt.gn(),this.VXt=void 0),this.j7.tr(),super.tr()}gn(){return this.fn(Zi.yb,this.yHt),this.VXt&&(this.VXt.gn(),this.VXt=void 0),this.j7.gn(),super.gn()}constructor(t,i,e){super(t),this.VXt=void 0,this.WXt=!1,this.IFt=void 0,this.handleManifestUpdate=()=>{const t=this.VXt.jXt();if(t){const i=this.wV;if(i){const e=i.getTime();let s=this.IFt;s||(s=new iK,this.IFt=s),s.Yn(t.SBt,(t=>(t.getTime()-e)/1e3)),!this.WXt&&s.L.V>0&&(this.nt.tt(s),this.j7.tt(s),this.WXt=!0)}}},this.yHt=()=>{this.VXt&&this.VXt.BXt(this.Tk,this.yk)},this.GXt=i,this.j7=new xr(this),this.yn(Zi.yb,this.yHt)}};!function(t){Gc.aG().uG(t)}((function(t,i,e){return new B$(t,i,e)})),r(),r(),r(),Qi(),r();var ws=class extends Co{get name(){return"CastError"}constructor(t,i=""){super("An error occurred while casting."),this.errorCode=t,this.description=i}};ds();async function U$(t){Y$()||await async function(t){if(null==t?void 0:t.sy)return Promise.reject(new J);const{rM:i,sM:e,nM:n}=function(){let t,i;return{rM:new Promise(((e,s)=>{t=e,i=s})),sM:t,nM:i}}(),r=s.__onGCastApiAvailable,o=()=>{s.__onGCastApiAvailable=r,n(new J)};return s.__onGCastApiAvailable=(i,h)=>{i?e():n(new b(h)),null==t||t.oy(o),s.__onGCastApiAvailable=r,r&&r(i,h)},null==t||t.uy(o),i}(t),F$()||await kt(100,t),F$()||(Fe.uA('Detected the Chromecast library was loaded without the CAF framework. It is strongly encouraged to load it with the CAF framework by using this URL: "//www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1"'),await Q$())}var Q$=di((()=>function(t){return new Promise(((i,e)=>{const s=h.createElement("script");s.onload=()=>i(),s.onerror=t=>e((null==t?void 0:t.error)||t),s.type="text/javascript",s.src=t,(h.head||h.documentElement).appendChild(s)}))}("//www.gstatic.com/cast/sdk/libs/sender/1.0/cast_framework.js").catch((()=>{throw new ws("API_NOT_INITIALIZED","The Chromecast library could not be loaded successfully.")}))));function F$(){return Boolean("undefined"!=typeof cast&&cast.framework)}function Y$(){return"undefined"!=typeof chrome&&chrome&&chrome.cast&&chrome.cast.isAvailable}function V$(t,i,e,s){if($t(i))for(const e of _.keys(i)){if("type"===e||"images"===e)continue;const s=i[e];$t(s)&&(t[e]=s)}!function(t,i,e,s){if(!$t(e)&&!$t(null==i?void 0:i.images))return;t.images=[],e&&t.images.push(new s.Image(e));if(null==i?void 0:i.images)if(Ic(i.images))t.images.push(new s.Image(i.images));else if(Dn(i.images))for(const e of i.images){let i;var n,r;if(Ic(e))i=new s.Image(e);else i=new s.Image(e.src),i.height=null!=(n=e.height)?n:null,i.width=null!=(r=e.width)?r:null;t.images.push(i)}}(t,i,e,s)}function G$(t,i,e){return void 0===e&&(e=chrome),function(t,i,e){switch(null==t?void 0:t.type){case"movie":{const s=new e.MovieMediaMetadata;return V$(s,t,i,e),s}case"audio":{const s=new e.MusicTrackMediaMetadata;return V$(s,t,i,e),!$t(s.artist)&&$t(t.artistName)&&(s.artist=t.artistName),s}case"tv-show":{const s=new e.TvShowMediaMetadata;return V$(s,t,i,e),!$t(s.title)&&$t(t.episodeTitle)&&(s.title=t.episodeTitle),!$t(s.season)&&$t(t.seasonNumber)&&(s.season=t.seasonNumber),!$t(s.episode)&&$t(t.episodeNumber)&&(s.episode=t.episodeNumber),s}default:{const s=new e.GenericMediaMetadata;return V$(s,t,i,e),s}}}(t,i,function(t){return{GenericMediaMetadata:t.cast.media.GenericMediaMetadata,MovieMediaMetadata:t.cast.media.MovieMediaMetadata,TvShowMediaMetadata:t.cast.media.TvShowMediaMetadata,MusicTrackMediaMetadata:t.cast.media.MusicTrackMediaMetadata,Image:t.cast.Image}}(e))}function Xr(t){switch(t){case chrome.cast.ErrorCode.CANCEL:return"CANCEL";case chrome.cast.ErrorCode.TIMEOUT:return"TIMEOUT";case chrome.cast.ErrorCode.API_NOT_INITIALIZED:return"API_NOT_INITIALIZED";case chrome.cast.ErrorCode.INVALID_PARAMETER:return"INVALID_PARAMETER";case chrome.cast.ErrorCode.EXTENSION_NOT_COMPATIBLE:return"EXTENSION_NOT_COMPATIBLE";case chrome.cast.ErrorCode.EXTENSION_MISSING:return"EXTENSION_MISSING";case chrome.cast.ErrorCode.RECEIVER_UNAVAILABLE:return"RECEIVER_UNAVAILABLE";case chrome.cast.ErrorCode.SESSION_ERROR:return"SESSION_ERROR";case chrome.cast.ErrorCode.CHANNEL_ERROR:return"CHANNEL_ERROR";case chrome.cast.ErrorCode.LOAD_MEDIA_FAILED:return"LOAD_MEDIA_FAILED";default:return"CANCEL"}}function W$(t){if(t.items&&t.items.length>0&&t.currentItemId>=0)return dl(t.items,(i=>i.itemId===t.currentItemId))}r(),r(),ds(),r(),r(),r();var Z$="urn:x-cast:com.theoplayer.cast";r(),r();var H$=function(t){return t.ZXt="theoplayer_receiver_info",t.HXt="theoplayer_trackpropertychange",t.XXt="theoplayer_propertychange",t}({});r();var X$=function(t){return t.SKIP_AD="SKIP_AD",t}({});r();function q$(t){h.createElement("img").src=t}r(),r(),r();var K$=new RegExp(/^(\d\d):(\d\d):(\d\d)(?:\.(\d{3}))?$/);function J$(t){if(!Ic(t))return;const i=t.match(K$);return i?3600*C(i[1],10)+60*C(i[2],10)+Number(i[3])+(Number(i[4])||0)/1e3:void 0}function $$(t){if(void 0===t)return;const i=t.match(/^([1-9]?\d|100)%$/);return i?C(i[1])/100:void 0}function t0(t,i){return"vmap"===t.type||!$t(t.type)&&!$t(i)}function i0(t,i){return"vast"===t.type||!$t(t.type)&&$t(i)}r(),r(),r();var e0=class{},s0=class extends e0{get qXt(){return this.Dc}KXt(){return null!=this.JXt||(this.JXt=Ms(this.Dc,(t=>t.KXt()))),this.JXt}constructor(t){super(),this.Dc=t.sort(((t,i)=>t.mR-i.mR))}};r(),r();var n0=class extends e0{get o(){return this.$Xt}get mR(){return this.tqt}get iqt(){return this.eqt}constructor(t,i){super(),this.$Xt=t,this.tqt=i,this.eqt=!1}},r0=class extends n0{get sqt(){return this.nqt}get rqt(){return this.oqt}get hqt(){return this.aqt}get uqt(){return this.cqt}get lt(){return this.dV}KXt(){if(void 0===this.lqt){let t,i,e,s=[];for(const n of this.nqt)n.dqt&&(t=n.dqt),n.fqt&&(i=n.fqt),n.gqt&&(e=n.gqt),s=s.concat(n.universalAdIds);this.lqt={uqt:this.uqt,dqt:t,_qt:i,gqt:e,lt:this.lt,vqt:s}}return[this.lqt]}constructor(t,i,e,s,n,r,o){super(t,i),this.oqt=e,this.aqt=s,this.cqt=n,this.nqt=r,this.dV=o}};r(),r();var o0=class{get wqt(){return this.mqt}get pqt(){return this.Aqt}constructor(t,i){this.mqt=t,this.Aqt=i}},h0=class{get yqt(){return this.bqt}get Mqt(){return this.Tqt}get Sqt(){return this.Nqt}get Iqt(){return this.Dqt}get Yl(){return this.Eqt}set Yl(t){this.Eqt=t}get kqt(){return this.xqt}get Lqt(){return this.Cqt}jqt(){this.Cqt=!0}get rqt(){return this.oqt}constructor(t,i,e,s,n,r){this.bqt=t,this.Tqt=i,this.Nqt=e,this.Dqt=s,this.Cqt=!1,this.xqt=n,this.oqt=r}};r();var a0=function(t){return t.Oqt="all",t.Rqt="any",t.pG="none",t}({});var u0=class{get Pqt(){return this.zqt}get Bqt(){return this.Uqt}constructor(t,i){this.zqt=t,this.Uqt=i}},c0=class{get o(){return this.aS}get ji(){return this.dT}get Ti(){return this.fT}get Qqt(){return this.Fqt}get Yqt(){return this.Vqt}get Gqt(){return this.Wqt}get Zqt(){return this.Hqt}get Xqt(){return this.qqt}get Kqt(){return this.Jqt}get $qt(){return this.tKt}get yqt(){return this.bqt}get Mqt(){return this.Tqt}get Sqt(){return this.Nqt}get iKt(){return this.eKt}get pqt(){return this.sKt}get nKt(){return this.rKt}constructor(t,i,e,s,n,r,o,h,a,u,c,l,d,f,g,_){this.dT=t,this.fT=i,this.aS=e,this.Fqt=s,this.Vqt=n,this.Wqt=r,this.Hqt=o,this.qqt=h,this.Jqt=a,this.tKt=u,this.bqt=c,this.Tqt=l,this.Nqt=d,this.eKt=f,this.sKt=g,this.rKt=_}};r();var l0=class{get id(){return this.aS}get uri(){return this.tUt}constructor(t,i){this.aS=t,this.tUt=i}},d0=class{get oKt(){return this.hKt}get aKt(){return this.uKt}get cKt(){return this.lKt}get dKt(){return this.fKt}constructor(t,i,e,s){this.hKt=t,this.uKt=i,this.lKt=e,this.fKt=s}},f0=class extends n0{get uqt(){return this.cqt}get gKt(){return this._Kt}get vKt(){return this.wKt}get sqt(){return this.nqt}get mKt(){return this.pKt}get AKt(){return this.yKt}get lt(){return this.dV}KXt(){return void 0===this._Kt?[]:(null!=this.JXt||(this.JXt=this._Kt.KXt().map((t=>this.bKt(t)))),this.JXt)}bKt(t){let i,e,s;for(const t of this.sqt)t.dqt&&(i=t.dqt),t.fqt&&(e=t.fqt),t.gqt&&(s=t.gqt);const n=t.uqt.concat(this.uqt);let r=t.dqt;if(i&&t.dqt){const e=new d0(t.dqt.MKt.oKt,t.dqt.MKt.aKt,t.dqt.MKt.cKt.concat(i.MKt.cKt),t.dqt.MKt.dKt.concat(i.MKt.dKt));r=t.dqt,r.MKt=e,r.pqt=r.pqt.concat(i.pqt)}let o=t._qt;if(e&&e.wqt){var h,a;const s=[];for(const t of e.wqt)s.concat(t.Iqt.cKt);const n=[];var u,c;for(const e of null!=(u=null==(h=t._qt)?void 0:h.wqt)?u:[]){var l,d,f;const r=new d0(e.Iqt.oKt,e.Iqt.aKt,e.Iqt.cKt.concat(s),(null!=(d=null==(l=t.dqt)?void 0:l.MKt.dKt)?d:[]).concat(null!=(f=null==i?void 0:i.MKt.dKt)?f:[]));n.push(new h0(e.yqt,e.Mqt,e.Sqt,r,e.kqt,e.rqt))}o=new o0(n,(null!=(c=null==(a=t._qt)?void 0:a.pqt)?c:[]).concat(e.pqt))}let g=t.gqt;if(g){var _;let i=g.Pqt;var v,w;s&&s.Pqt&&(i=s.Pqt),g=new u0(i,(null!=(v=null==(_=t.gqt)?void 0:_.Bqt)?v:[]).concat(null!=(w=null==s?void 0:s.Bqt)?w:[]))}let m=t.lt;return this.lt&&(m=this.lt),{uqt:n,dqt:r,_qt:o,gqt:g,lt:m,vqt:t.vqt}}constructor(t,i,e,s,n,r,o,h,a){super(t,i),this.cqt=e,this._Kt=s,this.wKt=n,this.nqt=r,this.pKt=o,this.yKt=h,this.dV=a}};r();var g0=class{get o(){return this.aS}get TKt(){return this.SKt}get NKt(){return this.IKt}get Xqt(){return this.qqt}get dqt(){return this.DKt}get fqt(){return this.EKt}get gqt(){return this.kKt}get universalAdIds(){return this.xKt}constructor(t,i,e,s,n,r,o,h){this.aS=t,this.SKt=i,this.IKt=e,this.qqt=s,this.DKt=n,this.EKt=r,this.kKt=o,this.xKt=h}};r();var _0=class{get ct(){return this.LKt}get CKt(){return this.jKt}get pqt(){return this.Aqt}set pqt(t){this.Aqt=t}set MKt(t){this.OKt=t}get MKt(){return this.OKt}get RKt(){return this.PKt}set RKt(t){this.PKt=t}get zKt(){return this.Cqt}get Yl(){return this.Eqt}set Yl(t){this.Eqt=t}get kqt(){return this.xqt}get rqt(){return this.oqt}jqt(){this.Cqt=!0}get BKt(){return this.UKt}set BKt(t){this.UKt=t}get QKt(){return this.FKt}constructor(t,i,e,s,n,r,o,h){this.LKt=t,this.jKt=i,this.Aqt=e,this.OKt=s,this.PKt=n,this.Cqt=!1,this.xqt=r,this.oqt=o,this.FKt=h}};function O(t,i){return m0(t)&&t.getAttribute(i)||void 0}function v0(t,i){return w0(t,i,void 0,!1)}function w0(t,i,e,s){return i===(t.localName?t.localName:t.nodeName)&&(s&&e?e===t.namespaceURI:!e||!t.namespaceURI||e===t.namespaceURI)}function Nc(t,i){const e=[];for(let s=0;s<t.childNodes.length;s+=1){const n=t.childNodes.item(s);m0(n)&&v0(n,i)&&e.push(n)}return e}function m0(t){return t&&1===t.nodeType}function p0(t,i){const e=(new DOMParser).parseFromString(t,i);if(!e||e.getElementsByTagName("parsererror").length>0)throw new b('Invalid document for MIME type "'+i+'"');return e}function A0(t){return t.replace(/[<>&'"]/g,(t=>{switch(t){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case"'":return"&apos;";case'"':return"&quot;";default:return t}}))}function y0(t){return"data:application/xml,"+encodeURIComponent(t)}r(),r();var dt=function(t){return t.YKt="mute",t.VKt="unmute",t.wb="pause",t.GKt="resume",t.WKt="rewind",t.ZKt="skip",t.HKt="playerExpand",t.XKt="playerCollapse",t.qKt="fullscreen",t.KKt="exitFullscreen",t.JKt="expand",t.COLLAPSE="collapse",t.DSt="start",t.$Kt="firstQuartile",t.tJt="thirdQuartile",t.iJt="midpoint",t.eJt="complete",t.sJt="acceptInvitationLinear",t.nJt="acceptInvitation",t.rJt="timeSpentViewing",t.oJt="otherAdInteraction",t.mb="progress",t.hJt="creativeView",t.aJt="adExpand",t.uJt="adCollapse",t.cJt="minimize",t.lJt="close",t.dJt="closeLinear",t.fJt="overlayViewDuration",t.gJt="breakStart",t._Jt="breakEnd",t.ua="error",t}({});function b0(t){switch(t){case"breakStart":case"breakEnd":case"error":return!0;default:return!1}}var M0=["mute","unmute","pause","resume","rewind","skip","closeLinear","close","playerExpand","playerCollapse","fullscreen","exitFullscreen","expand","collapse","creativeView","start","firstQuartile","midpoint","thirdQuartile","complete","acceptInvitationLinear","acceptInvitation","timeSpentViewing","otherAdInteraction","progress"];function T0(t){return void 0!==t&&-1!==M0.indexOf(t)}var S0=["start","firstQuartile","midpoint","thirdQuartile","complete","mute","unmute","pause","resume","rewind","skip","playerExpand","playerCollapse","expand","collapse","fullscreen","exitFullscreen","creativeView","acceptInvitation","adExpand","adCollapse","minimize","close","overlayViewDuration","otherAdInteraction","progress"];function N0(t){return void 0!==t&&-1!==S0.indexOf(t)}var I0=["mute","unmute","pause","resume","rewind","skip","playerExpand","playerCollapse","creativeView"];function D0(t){return void 0!==t&&-1!==I0.indexOf(t)}function E0(t,i){if(void 0===t||""===t||void 0===i)return;let e=t.match(/^(\d+):(\d+):(\d+)$/);return e?S(e[1]||"0")+60*S(e[2]||"0")+S(e[3]||"0"):(e=t.match(/^(100|[1-9]\d|\d)%$/),e?S(e[1]||"0")*i/100:void 0)}var k0=class{get dZ(){return this.vJt}get tc(){return this.wJt}get eventURL(){return this.mJt}constructor(t,i,e){this.vJt=t,this.wJt=i,this.mJt=e}};r();var x0=class{get pJt(){return this.AJt}constructor(t){this.AJt=t}},L0=class extends x0{get oKt(){return this.hKt}get nKt(){return this.rKt}get yJt(){return this.bJt}constructor(t,i,e,s){super(t),this.bJt=i,this.hKt=e,this.rKt=s}},C0=class extends x0{constructor(t){super(t)}},j0=class extends x0{constructor(t){super(t)}};r(),Qi();var fn={MJt:{oM:100,Pb:"XML parsing error."},TJt:{oM:303,Pb:"Empty or invalid VAST error."},SJt:{oM:400,Pb:"General linear error"},NJt:{oM:403,Pb:"Unsupported MIME-type or missing mediafiles error"},IJt:{oM:500,Pb:"General nonlinear error"},BW:{oM:900,Pb:"Network error"}},O0=class{get DJt(){return this.EJt}kJt(t){if(!this.DJt)return;const i=this.DJt.replace(/\[ERRORCODE]/,""+t.oM);q$(i)}constructor(t){this.EJt=t}};r();var Ie=class extends Co{get xJt(){return this.LJt}get CJt(){var t;return null!=(t=this.jJt)?t:900}constructor(t,i,e,s){super(e||i&&R0[i]||t,s),this.LJt=t,this.jJt=i,this.OJt=e}},nn=function(t){return t.ADBLOCK="adblock",t.NETWORK="network",t.PARSING="parsing",t.PLAYBACK="playback",t.GENERAL="general",t}({}),$u=function(t){return t[t.VAST_MALFORMED_RESPONSE=100]="VAST_MALFORMED_RESPONSE",t[t.VAST_SCHEMA_VALIDATION_ERROR=101]="VAST_SCHEMA_VALIDATION_ERROR",t[t.VAST_UNSUPPORTED_VERSION=102]="VAST_UNSUPPORTED_VERSION",t[t.VAST_TRAFFICKING_ERROR=200]="VAST_TRAFFICKING_ERROR",t[t.VAST_UNEXPECTED_LINEARITY=201]="VAST_UNEXPECTED_LINEARITY",t[t.VAST_UNEXPECTED_DURATION_ERROR=202]="VAST_UNEXPECTED_DURATION_ERROR",t[t.UNEXPECTED_SIZE=203]="UNEXPECTED_SIZE",t[t.VAST_WRAPPER_ERROR=300]="VAST_WRAPPER_ERROR",t[t.VAST_LOAD_TIMEOUT=301]="VAST_LOAD_TIMEOUT",t[t.VAST_TOO_MANY_REDIRECTS=302]="VAST_TOO_MANY_REDIRECTS",t[t.VAST_NO_ADS_AFTER_WRAPPER=303]="VAST_NO_ADS_AFTER_WRAPPER",t[t.GENERAL_LINEAR_ERROR=400]="GENERAL_LINEAR_ERROR",t[t.FILE_NOT_FOUND=401]="FILE_NOT_FOUND",t[t.VAST_MEDIA_LOAD_TIMEOUT=402]="VAST_MEDIA_LOAD_TIMEOUT",t[t.VAST_LINEAR_ASSET_MISMATCH=403]="VAST_LINEAR_ASSET_MISMATCH",t[t.VAST_PROBLEM_DISPLAYING_MEDIA_FILE=405]="VAST_PROBLEM_DISPLAYING_MEDIA_FILE",t[t.MEZZANINE_FILE_REQUIRES=406]="MEZZANINE_FILE_REQUIRES",t[t.MEZZANINE_FILE_DOWNLOADED_FIRST_TIME=407]="MEZZANINE_FILE_DOWNLOADED_FIRST_TIME",t[t.AD_IN_VAST_REJECTED=408]="AD_IN_VAST_REJECTED",t[t.INTERACTIVE_CREATIVE_NOT_EXECUTED=409]="INTERACTIVE_CREATIVE_NOT_EXECUTED",t[t.VERIFICATION_CODE_NOT_EXECUTED=410]="VERIFICATION_CODE_NOT_EXECUTED",t[t.GENERAL_NON_LINEAR_ERROR=500]="GENERAL_NON_LINEAR_ERROR",t[t.NONLINEAR_DIMENSIONS_ERROR=501]="NONLINEAR_DIMENSIONS_ERROR",t[t.OVERLAY_AD_LOADING_FAILED=502]="OVERLAY_AD_LOADING_FAILED",t[t.VAST_NONLINEAR_ASSET_MISMATCH=503]="VAST_NONLINEAR_ASSET_MISMATCH",t[t.GENERAL_COMPANION_AD_ERROR=600]="GENERAL_COMPANION_AD_ERROR",t[t.INVALID_DIMENSIONS_COMPANION_AD=601]="INVALID_DIMENSIONS_COMPANION_AD",t[t.COMPANION_REQUIRED_ERROR=602]="COMPANION_REQUIRED_ERROR",t[t.COMPANION_AD_LOADING_FAILED=603]="COMPANION_AD_LOADING_FAILED",t[t.UNABLE_TO_FIND_SUPPORTED_COMPANION=604]="UNABLE_TO_FIND_SUPPORTED_COMPANION",t[t.UNKNOWN_ERROR=900]="UNKNOWN_ERROR",t[t.GENERAL_VPAID_ERROR=901]="GENERAL_VPAID_ERROR",t[t.MALFORMED_URI=1005]="MALFORMED_URI",t[t.VAST_ASSET_NOT_FOUND=1007]="VAST_ASSET_NOT_FOUND",t[t.VAST_EMPTY_RESPONSE=1009]="VAST_EMPTY_RESPONSE",t[t.UNKNOWN_AD_RESPONSE=1010]="UNKNOWN_AD_RESPONSE",t[t.UNSUPPORTED_LOCALE=1011]="UNSUPPORTED_LOCALE",t[t.INVALID_ARGUMENTS=1101]="INVALID_ARGUMENTS",t[t.INVALID_ADX_EXTENSION=1105]="INVALID_ADX_EXTENSION",t[t.AUTOPLAY_DISALLOWED=1205]="AUTOPLAY_DISALLOWED",t}({}),R0={100:"XML parsing error.",101:"VAST schema validation error.",102:"VAST version of response not supported.",200:"Trafficking error. The video player received an ad type that it was not expecting and/or cannot display.",201:"Video player expecting different linearity.",202:"Video player expecting different duration.",203:"Video player expecting different size.",300:"General wrapper error.",301:"Timeout of VAST URI provided in wrapper element, or of VAST URI provided in a subsequent wrapper element. This includes request errors such as invalid URI, unreachable or request timeout for URI, and security or other exceptions related to requesting a VAST URI.",302:"Wrapper limit reached, as defined by the video player. Too many wrapper responses have been received with no InLine response. This can be caused by a circular loop of daisy chaining (one network bouncing to another and another).",303:"No ads VAST response after one or more wrappers. This also includes the number of empty VAST responses from fallback.",400:"General linear error. The video player is unable to display the linear ad.",401:"File not found. Unable to find Linear/MediaFile from URI.",402:"Unable to download or timeout of MediaFile URI.",403:"Could not find a media file that is supported by this video player, based on the attributes of the MediaFile element.",405:"Problem displaying a media file.",406:"A mezzanine file was required, but not provided.",407:"The mezzanine file was downloaded for the first time, so the ad did not serve. This can occur when an ad insertion is missed because the creative is being transcoded. It continues to occur until the creative is available for insertion.",408:"The ad returned in the VAST response was rejected.",409:"The interactive creative defined in the InteractiveCreativeFile node was not executed.",410:"The code referenced in the Verification node was not executed.",500:"General NonLinearAds error.",501:"Unable to display non-linear ad because creative dimensions do not align with creative display area (in other words, the creative dimension was too large). This can occur if you use CSS styles to set width and height of the video ,content element. You should instead use the width and height HTML attributes.",502:"Unable to fetch NonLinearAds/NonLinear resource.",503:"Could not find NonLinearResource with supported type. This can occur when a creative size is larger than the player size.",600:"General CompanionAds error.",601:"Unable to display companion because creative dimensions do not fit within the companion display area (in other words, space was not available).",602:"Unable to display required companion.",603:"Unable to fetch CompanionAds/Companion resource.",604:"Could not find Companion resource with supported type.",900:"VAST 2 error. Even if you request VAST 3 or your DFP network default is VAST 3, this can occur if you have a VAST redirect that returns a VAST 2 response.",901:"General VPAID error",1005:"URI malformed."};function P0(t){if(!t)return!1;switch(t.toLocaleLowerCase()){case Oe.hL:case Oe.aL:case Oe.oL:return!0;default:return!1}}function z0(t){const i=Jd();return!!(P0(t)||t&&i&&(null==i?void 0:i.canPlayType)&&i.canPlayType(t))||(Vr("Invalid or unsupported MediaFile Content delivery type, skipping mediafile"),!1)}function B0(t,i){for(const e of i){new O0(e).kJt(t)}}function Vr(t){0}r(),Qi(),r();var U0=class{get RJt(){return this.PJt}get zJt(){return this.BJt}constructor(t,i){this.PJt=t,this.BJt=i}},Q0=class t{async UJt(i,e){if(t0(i.sources,i.timeOffset)){const s=await t.QJt(i.sources.src,e),n=s&&s.documentElement;if(!n)throw new Ie(nn.NETWORK,$u.VAST_SCHEMA_VALIDATION_ERROR,"Ad source is not a valid XML document.");if(v0(n,"VMAP"))return await this.FJt(n,i,e);if(v0(n,"VAST")){const t=await this.YJt(n,e,!1);if(t){const e=new G0("",!0,!0,t);return[new Y0("start",e,F0.VJt,"",[],!1,!0,i)]}return[]}throw new Ie(nn.GENERAL,$u.VAST_MALFORMED_RESPONSE,"Only VMAP and VAST files are allowed as ad source.")}if(i0(i.sources,i.timeOffset))return[new V0(String(i.timeOffset),i,e)];throw new Ie(nn.GENERAL,$u.VAST_MALFORMED_RESPONSE,"Something went wrong parsing the ad source; only VMAP and VAST files are allowed as ad source.")}async GJt(i,e,s,n){let r;void 0===n&&(n=[]);try{r=await t.QJt(i,e)}catch(t){throw B0(t instanceof Ie&&t.CJt===$u.VAST_MALFORMED_RESPONSE?fn.TJt:fn.BW,n),t}const o=r&&r.documentElement;if(o&&v0(o,"VAST"))return await this.YJt(o,e,s,n);o&&v0(o,"VMAP")&&Bi("Received VMAP ad when expecting VAST. Please set the type of your ad source in the configuration, or make sure to not set a timeOffset for VMAP ad sources. VMAP ads have their own offsets included.")}async WJt(t,i,e,s){var n;if(!(null==(n=t.sources)?void 0:n.src))throw new Ie(nn.GENERAL,$u.MALFORMED_URI,"Property src on adSource is missing.");const r=await this.GJt(t.sources.src,s,!1),o=new G0("",!0,!0,r),h=new Y0(i,o,F0.VJt,"",[],!1,!0,t);return h.ZJt=e,h}static async requestSuccessOnly(t,i){let e;try{e=await i.hI(t)}catch(t){throw new Ie(nn.NETWORK,$u.UNKNOWN_ERROR,"Something went wrong while requesting xml from server.",t)}if(!jc(e))throw new Ie(nn.NETWORK,$u.UNKNOWN_ERROR,"Something went wrong while requesting xml from server.");return e}static async QJt(t,i){const e=new Gs({zu:t,oI:Ee.ON,LI:Ve.GET}),s=await this.requestSuccessOnly(e,i);try{return function(t){return p0(t,"text/xml")}(await s.rI())}catch(t){throw new Ie(nn.NETWORK,$u.VAST_MALFORMED_RESPONSE,"The ad source could not be loaded.")}}async YJt(t,i,e,s){void 0===s&&(s=[]);const n=[],r=[],o=[];if(!t||!v0(t,"VAST")){if(B0(fn.TJt,s),e)throw new Ie(nn.PARSING,$u.VAST_NO_ADS_AFTER_WRAPPER,"No VAST element found after wrapper.");throw new Ie(nn.PARSING,$u.VAST_EMPTY_RESPONSE,"The VAST element was empty.")}if(0!==Nc(t,"Ad").length){for(const e of Nc(t,"Ad"))try{const t=await this.HJt(e,i,s);0===t.mR?n.push(t):r.push(t)}catch(t){o.push(t)}if(0===n.length&&0===r.length&&o.length>0)throw o[0];if(1===n.length&&0===r.length)return n[0];if(0===n.length&&0!==r.length)return new s0(r);if(n.length>0||r.length>0)return new s0(r.concat(n))}if(0!==Nc(t,"Error").length)for(const i of Nc(t,"Error")){Vr(fn.TJt.Pb);const t=i.textContent;t&&s.push(t.trim())}if(B0(fn.TJt,s),e)throw new Ie(nn.PARSING,$u.VAST_NO_ADS_AFTER_WRAPPER,"No VAST element found after wrapper.");throw new Ie(nn.PARSING,$u.VAST_EMPTY_RESPONSE,"The VAST element was empty.")}async FJt(t,i,e){const s=[],n=Nc(t,"AdBreak");for(const t of n)try{const n=await this.XJt(t,i,e);n&&s.push(n)}catch(t){Fe.aA(t)}return s}async HJt(i,e,s){const n=O(i,"id")||"";let r=vl(O(i,"sequence"));r||(r=0);const o=Nc(i,"InLine"),h=Nc(i,"Wrapper");if(0!==h.length)return await this.qJt(h[0],n,r,e,s);if(0!==o.length)return t.KJt(o[0],n,r,s);throw new Ie(nn.PARSING,$u.VAST_SCHEMA_VALIDATION_ERROR,"An Ad tag without a Wrapper or inline element cannot be parsed")}static KJt(i,e,s,n){const r=Nc(i,"Error")[0];let o;r&&r.textContent&&(o=r.textContent,n.push(o));const h=Nc(i,"AdSystem")[0];let a,u="";h&&(u=h.textContent||u);const c=Nc(i,"AdTitle")[0];c&&(a=c.textContent||void 0);const l=[];for(const t of Nc(i,"Impression"))t.textContent&&l.push(t.textContent);const d=t.JJt(Nc(i,"Creatives")[0],u,n);return new r0(e,s,u,a,l,d,new O0(o))}async qJt(i,e,s,n,r){const o=Nc(i,"Error")[0];let h="";o&&o.textContent&&(h=o.textContent,r.push(h));const a=Nc(i,"AdSystem")[0];let u="";a&&(u=a.textContent||u);const c=[];for(const t of Nc(i,"Impression"))t.textContent&&c.push(t.textContent);const l=Nc(i,"VASTAdTagURI")[0];let d="";l&&l.textContent&&(d=l.textContent);const f=await this.GJt(d,n,!0,r),g=Nc(i,"Creatives")[0];let _=[];g&&(_=t.$Jt(g,u,r));let v=Ze(O(i,"followAdditionalWrappers"));v||(v=!0);let w=Ze(O(i,"allowMultipleAds"));w||(w=!0);let m=Ze(O(i,"fallbackOnNoAd"));return m||(m=!1),new f0(e,s,c,f,v,_,w,m,new O0(h))}static $Jt(i,e,s){const n=[];for(const r of Nc(i,"Creative")){let i=O(r,"id");i||(i="");let o=vl(O(r,"sequence"));o||(o=0);let h=O(r,"adId");h||(h="");const a=Nc(r,"Linear")[0];let u;a&&(u=t.t$t(a,"wrapper",i,e,s));const c=Nc(r,"NonLinearAds")[0];let l,d;if(c)try{d=t.i$t(c,i,e),l=d}catch(t){}const f=Nc(r,"CompanionAds")[0];let g;f&&(g=t.e$t(f)),n.push(new g0(i,h,o,"",u,l,g,[]))}return n}static JJt(i,e,s){const n=[];for(const r of Nc(i,"Creative")){let i=O(r,"id");i||(i="");let o=vl(O(r,"sequence"));o||(o=0);let h=O(r,"adId");h||(h="");let a=O(r,"apiFramework");a||(a="");const u=Nc(r,"Linear")[0];let c;if(u)try{c=t.t$t(u,"inline",i,e,s)}catch(t){}if(0===(null==c?void 0:c.ct))throw new Ie(nn.PARSING,$u.VAST_UNEXPECTED_DURATION_ERROR,"The VAST response had a duration of 0 seconds, so skipping the ad(s).");const l=Nc(r,"NonLinearAds")[0];let d,f;if(l)try{f=t.i$t(l,i,e),d=f}catch(t){}const g=Nc(r,"CompanionAds")[0];let _;g&&(_=t.e$t(g));const v=Nc(r,"UniversalAdId"),w=t.parseUniversalAdIds(v);n.push(new g0(i,h,o,a,c,d,_,w))}return n}static t$t(i,e,s,n,r){const o=Nc(i,"Duration")[0];let h=0;if(o)h=J$(o.textContent)||0;else if(!o&&"inline"===e)throw new Ie(nn.PARSING,$u.VAST_SCHEMA_VALIDATION_ERROR,"Missing duration element in inLine linear");const a=O(i,"skipoffset");let u=-1;if(a){let t=J$(a);if(void 0===t&&a.indexOf("%")>-1){const i=x.abs(Number(a.replace(/(?![0-9])./g,"")))/100;j(i)||(t=h*i)}void 0!==t&&(u=t)}const c=Nc(i,"MediaFiles")[0];let l=[],d=[];if(c&&(l=function(t,i){const e=[];for(const s of Nc(t,"MediaFile")){const t=O(s,"delivery"),n=O(s,"type");if(!n){Vr();continue}if(!i(n))continue;let r=vl(O(s,"width")),o=vl(O(s,"height"));r||(Vr(),r=0),o||(Vr(),o=0);const h={delivery:t,type:n,width:r,height:o,contentURL:""+s.textContent};e.push(h)}return e}(c,z0),d=function(t){const i=Nc(t,"ClosedCaptionFiles");if(0===i.length)return[];const e=i[0],s=[];for(const t of Nc(e,"ClosedCaptionFile")){const i=O(t,"type");i||Vr();const e=O(t,"language");e||Vr();const n={type:null!=i?i:"",language:null!=e?e:"",contentURL:(""+t.textContent).trim()};s.push(n)}return s}(c)),"inline"===e&&(!c||0===l.length))throw B0(fn.NJt,r),new Ie(nn.PARSING,$u.VAST_LINEAR_ASSET_MISMATCH,"Missing MediaFiles in linear element");const f=Nc(i,"TrackingEvents")[0];let g=[];f&&(g=t.s$t(f,T0,"linear"));const _=Nc(i,"VideoClicks")[0],v=t.n$t(_);return new _0(h,l,g,v,u,s,n,d)}static n$t(i){if(!i)return new d0("","",[],[]);const e=Nc(i,"ClickThrough")[0];let s,n="";e&&(s=e.textContent||void 0,n=O(e,"id")||"");const r=t.r$t(Nc(i,"ClickTracking")),o=t.r$t(Nc(i,"CustomClick"));return new d0(s,n,r,o)}static r$t(t){const i=[];for(const e of t){const t=e.textContent;if(!t)continue;const s=O(e,"id")||"";i.push(new l0(s,t))}return i}static s$t(t,i,e){const s=[];for(const n of Nc(t,"Tracking")){const r=O(n,"event");if(!i(r)){Vr();continue}let o="";"linear"===e&&(o=O(t,"offset")||"0");const h=n.textContent;h&&s.push(new k0(r,o,h))}return s}static i$t(i,e,s){const n=[];for(const r of Nc(i,"NonLinear")){const i=Nc(r,"NonLinearClickThrough")[0];let o;i&&(o=i.textContent||void 0);const h=t.r$t(Nc(r,"NonLinearClickTracking")),a=Nc(r,"StaticResource")[0];let u;if(a&&a.parentNode){const t=O(a,"creativeType"),i=a.textContent||"",e=Nc(a.parentNode,"NonLinearClickThrough")[0];let s="";e&&(s=e.textContent||""),u=new L0(i,t,s,"")}const c=t.o$t(r),l=t.parseHtmlResource(r);if(!u&&!c&&!l){Vr();continue}const d=new d0(o,"",h,[]);n.push(new h0(u,c,l,d,e,s))}if(0===n.length)throw new Ie(nn.PARSING,$u.VAST_SCHEMA_VALIDATION_ERROR,"nonLinearAds element found with no nonLinear elements");const r=Nc(i,"TrackingEvents")[0];let o=[];return r&&(o=t.s$t(r,N0,"nonlinear")),new o0(n,o)}static parseUniversalAdIds(t){const i=[];for(const r of t){var e;const t=null!=(e=O(r,"idRegistry"))?e:"";var s,n;const o=null!=(n=null!=(s=O(r,"idValue"))?s:r.textContent)?n:"";i.push(new U0(t,o))}return i}static e$t(i){let e=O(i,"requiredType");(function(t){switch(t){case"all":case"any":case"none":return!0;default:return!1}})(e)||(e=a0.pG);const s=[];for(const e of Nc(i,"Companion")){let i=vl(O(e,"width")),n=vl(O(e,"height")),r=O(e,"id"),o=vl(O(e,"assetWidth")),h=vl(O(e,"assetHeight")),a=vl(O(e,"expandedWidth")),u=vl(O(e,"rxpandedHeight")),c=O(e,"apiFramework"),l=O(e,"adSlotId"),d=vl(O(e,"pxratio"));const f=Nc(e,"AltText")[0];let g=f?f.textContent:"";i||(Vr(),i=0),n||(Vr(),n=0),r||(r=""),o||(o=0),h||(h=0),a||(a=0),u||(u=0),c||(c=""),l||(l=""),d||(d=1),g||(g="");const _=t.h$t(e),v=t.o$t(e),w=t.parseHtmlResource(e),m=Nc(e,"TrackingEvents")[0];let p=[];m&&(p=t.s$t(m,D0,"companion"));const A=Nc(e,"CompanionClickThrough")[0];let y;A&&(y=A.textContent||void 0);const b=t.r$t(Nc(e,"CompanionClickTracking"));(_||v||w)&&s.push(new c0(i,n,r,o,h,a,u,c,l,d,_,v,w,new d0(y,"",b,[]),p,g))}return new u0(e,s)}static h$t(t){const i=Nc(t,"StaticResource")[0];let e;if(i&&i.parentNode){let t=O(i,"creativeType");t||(t="");const s=i.textContent,n=Nc(i.parentNode,"AltText")[0],r=Nc(i.parentNode,"CompanionClickThrough")[0];let o,h="";n&&(h=n.textContent||""),r&&(o=r.textContent||void 0),s&&(e=new L0(s,t,o,h))}return e}static o$t(t){const i=Nc(t,"IFrameResource")[0];let e;if(i){const t=i.textContent||"";e=new C0(t)}return e}static parseHtmlResource(t){const i=Nc(t,"HTMLResource")[0];let e;if(i){const t=i.textContent||"";e=new j0(t)}return e}async XJt(i,e,s){const n=O(i,"timeOffset")||"0",r=O(i,"breakType")||F0.dI;let o=O(i,"breakId"),h=Ze(O(i,"repeatAfter"));if(void 0===o&&(o=""),void 0===h&&(h=!1),!(void 0!==Yc.a$t(n)))throw new Ie(nn.PARSING,$u.VAST_SCHEMA_VALIDATION_ERROR,"Invalid TimeOffset type");const a=Nc(i,"AdSource")[0],u=Nc(i,"TrackingEvents")[0];let c=[];u&&(c=t.s$t(u,b0,"vmap"));let l=O(a,"id");l||(l="");let d=Ze(O(a,"allowMultipleAds"));void 0===d&&(d=!0);let f=Ze(O(a,"followRedirects"));f||(f=!0);const g=Nc(a,"AdTagURI")[0];let _="";const v=Nc(a,"VASTAdData")[0];if(!g||!g.textContent){if(v){if(v.firstElementChild&&w0(v.firstElementChild,"VAST")){const t=await this.YJt(v.firstElementChild,s,!1);if(t){const i=new G0(l,d,f,t);return new Y0(n,i,r,o,c,h,!1,e)}return}throw new Ie(nn.PARSING,$u.VAST_SCHEMA_VALIDATION_ERROR,"vmap:VASTAdData does not have a VAST-structure as a child element")}throw new Ie(nn.PARSING,$u.VAST_SCHEMA_VALIDATION_ERROR,"Invalid AdTagURI source or invalid VASTAdData in Adbreak Element")}try{_=g.textContent;const t=P(e);return t.sources.src=_,new V0(n,t,s)}catch(t){return}}},F0=function(t){return t.dI="",t.VJt="linear",t.u$t="nonlinear",t.c$t="display",t}({}),Yc=class{static l$t(t){switch(t){case"linear":case"nonlinear":case"display":return!0;default:return!1}}static d$t(t){}static f$t(t){if(void 0!==t)return"start"===t?0:"end"===t?-1:void 0}static g$t(t){const i=t.split(":");let e=0;return e+=3600*Number(i[0]),e+=60*Number(i[1]),e+=Number(i[2]),e}static _$t(t){if(t<=0)return"00:00:00.000";const i=x.floor(t),e=t-i;return this.v$t(i/3600,2)+":"+this.v$t(i/60%60,2)+":"+this.v$t(i%60,2)+"."+this.v$t(1e3*e,3)}static v$t(t,i){return("00"+x.floor(t)).slice(-i)}static w$t(t,i){const e=this.a$t(t);if(0===e)switch(t){case"start":return 0;case"end":return-1}else{if(2===e)return $$(t)*i;if(1===e)return J$(t);if(3===e)return this.f$t(t);if(4===e){const i=Number(t);if(!j(i)&&i>=-1)return i}}}static a$t(t){return"start"===t||"end"===t?0:void 0!==J$(t.toString())?1:void 0!==$$(t.toString())?2:void 0!==this.d$t(t.toString())?3:j(Number(t))?void 0:4}},Y0=class{get m$t(){return this.p$t.integration}get A$t(){return this.y$t}get fBt(){return this.b$t}get RKt(){return this.PKt}set RKt(t){this.PKt=t}get pqt(){return this.sKt}get M$t(){return this.T$t}get S$t(){return this.N$t}get Ert(){return this.p$t}get I$t(){return this.ZJt.sd}get W(){return!0}$n(){return Promise.resolve()}get ZJt(){return this.D$t}set ZJt(t){this.D$t=t}constructor(t,i,e,s,n,r,o,h){this.PKt=-1,this.y$t=i,this.b$t=t,this.E$t=e,this.T$t=s,this.N$t=r,this.sKt=n,this.k$t=o,this.p$t=h}},V0=class{get m$t(){return this.Eqt.m$t}get A$t(){return this.Eqt.A$t}get fBt(){return this.Eqt.fBt}get RKt(){return this.Eqt.RKt}set RKt(t){this.Eqt.RKt=t}get pqt(){return this.Eqt.pqt}get M$t(){return this.Eqt.M$t}get S$t(){return this.Eqt.S$t}get Ert(){return this.Eqt.Ert}get I$t(){return this.Eqt.I$t}get W(){return this.sD}$n(){var t;return null!=(t=this.x$t)?t:this.x$t=this.oD()}async oD(){const t=new Q0;this.Eqt=await t.WJt(this.Ert,this.fBt,this.ZJt,this.OQ),this.sD=!0}get ZJt(){return this.Eqt.ZJt}set ZJt(t){this.Eqt.ZJt=t}constructor(t,i,e){this.sD=!1,this.OQ=e,this.Eqt=new Y0(t,void 0,"","",[],!1,!1,i)}},G0=class{get o(){return this.aS}get mKt(){return this.L$t}get C$t(){return this.j$t}get qXt(){return this.O$t}constructor(t,i,e,s){this.aS=t,this.L$t=i,this.O$t=s,this.j$t=e}};function W0(t,i){let e;if(t.vastAdsRequest&&(e=function(t){if(t.adTagUrl)return t.adTagUrl;if(t.adsResponse)return y0(t.adsResponse);return}(t.vastAdsRequest)),!e){const i=function(t){const i=t.contentUrl||t.contentId;if(!i)return;const e=t.contentType||"video/mp4",s=sS(e)||or(t.contentType)?"streaming":"progressive",n=void 0!==t.duration?"<Duration>"+Yc._$t(t.duration)+"</Duration>":"",r=void 0!==t.whenSkippable&&t.whenSkippable>=0?' skipoffset="'+Yc._$t(t.whenSkippable)+'"':"",o='<MediaFile delivery="'+s+'" type="'+e+'">'+A0(i)+"</MediaFile>",h=t.clickThroughUrl?"<VideoClicks><ClickThrough>"+A0(t.clickThroughUrl)+"</ClickThrough></VideoClicks>":"",a="<Linear"+r+">"+n+"<MediaFiles>"+o+"</MediaFiles>"+h+"</Linear>",u=t.title?"<AdTitle>"+A0(t.title)+"</AdTitle>":"";return'<VAST version="3.0"><Ad>'+u+"<InLine><Creatives><Creative>"+a+"</Creative></Creatives></InLine></Ad></VAST>"}(t);i&&(e=y0(i))}const s=t.customData;if(e){const n={integration:null==s?void 0:s.integration,sources:{src:e,type:"vast"},timeOffset:i};return n.integration&&"csai"!==n.integration&&"theo"!==n.integration||(n.skipOffset=t.whenSkippable),n}}var Z0=function(t){return t.R$t="error",t.P$t="sourceupdate",t}({}),H0=class extends Jr{constructor(t){super("error"),this.lt=t}},X0=class extends Jr{constructor(t,i){super("sourceupdate"),this.bt=t,this.kc=i}},q0=class extends tu{get zj(){return this.z$t}B$t(t){this.U$t.B$t(t)}Q$t(t){this.U$t.Q$t(t)}F$t(t){this.U$t.F$t(t)}Y$t(t){this.U$t.Y$t(t)}V$t(t){this.z$t.addUpdateListener(t)}G$t(t){this.z$t.removeUpdateListener(t)}W$t(){const t=new xh,i=new chrome.cast.media.GetStatusRequest;return this.z$t.getStatus(i,(()=>{t.sM({bt:this.kE(),kc:this.Ya()})}),(i=>t.nM(i))),t.rM}kE(){var t;return null==(t=this.z$t.customData)?void 0:t.currentSource}Ya(){var t;let i;if(null==(t=this.aOt.Z$t())?void 0:t.version){var e;i=null==(e=this.z$t.customData)?void 0:e.sourceDescription}else{var s;const t=null==(s=W$(this.z$t))?void 0:s.customData;(function(t){return _o(t)&&t.theoplayer_version>=1&&$t(t.streamStart)&&$t(t.isLive)&&$t(t.sourceDescription)})(t)&&(i=t.sourceDescription),i||(i=function(t){return{sources:[{src:t.contentId,type:t.contentType}],ads:K0(t)}}(this.z$t.media))}return i}Rk(){const t=new chrome.cast.media.PauseRequest;this.z$t.pause(t,ya,this.H$t)}zk(){const t=new chrome.cast.media.StopRequest;this.z$t.stop(t,ya,this.H$t)}Pk(){const t=new chrome.cast.media.PlayRequest;this.z$t.play(t,ya,this.H$t)}Wb(t,i){const e=new chrome.cast.media.SeekRequest;return e.currentTime=t,e.resumeState=i?chrome.cast.media.ResumeState.PLAYBACK_PAUSE:chrome.cast.media.ResumeState.PLAYBACK_START,new Promise(((t,i)=>{this.z$t.seek(e,t,(t=>{var e;i(new ws(Xr(t.code),null!=(e=t.description)?e:void 0))}))}))}nk(t){this.U$t.Ast(Z$,function(t){return{type:H$.XXt,properties:{playbackRate:t}}}(t)).catch(this.X$t)}q$t(t){const i=new chrome.cast.media.EditTracksInfoRequest(t);this.z$t.editTracksInfo(i,ya,this.H$t)}K$t(){return this.z$t.getEstimatedTime()}J$t(){return this.z$t.getEstimatedBreakClipTime()}$$t(){return this.z$t.getEstimatedBreakTime()}t0t(){this.U$t.Ast("urn:x-cast:com.google.cast.media",{type:X$.SKIP_AD,requestId:this.i0t++,mediaSessionId:this.z$t.mediaSessionId}).catch(this.X$t)}gn(){this.Bo()}constructor(t,i,e){super(i),this.i0t=0,this.X$t=t=>{this.yo(new H0(t))},this.H$t=t=>{var i;const e=new ws(Xr(t.code),null!=(i=t.description)?i:void 0);this.X$t(e)},this.aOt=t,this.U$t=i,this.z$t=e}};function K0(t){return t.vmapAdsRequest&&t.vmapAdsRequest.adTagUrl?[{sources:{src:t.vmapAdsRequest.adTagUrl,type:"vmap"}}]:t.breaks&&t.breakClips?Ms(t.breaks,(i=>function(t,i){const e=[];if(t.isWatched)return e;for(const s of t.breakClipIds){const n=dl(i,(t=>t.id===s));if(n){const i=W0(n,t.position);i&&e.push(i)}}return e}(i,t.breakClips))):[]}ds(),r();var J0=class{e0t(t,i){this.aOt.addMessageListener(t,i)}s0t(t,i){this.aOt.removeMessageListener(t,i)}Ast(t,i){return new Promise(((e,s)=>{this.aOt.sendMessage(t,i,e,(t=>{var i;s(new ws(Xr(t.code),null!=(i=t.description)?i:void 0))}))}))}gn(){}constructor(t){this.aOt=t}};function $0(t){return"vmap"===t||"adrule"===t}function t1(t){if(t)return Ic(t)&&""!==t?{src:Q(t),type:void 0}:function(t){return _o(t)&&Boolean(t.src)}(t)&&""!==t.src?{src:Q(t.src),type:i1(t.type)}:void 0}function i1(t){if(Ic(t)){const i=t.toLowerCase();switch(i){case"vast":case"vmap":case"adrule":return i;default:return void Bi("The ad source type provided in the configuration could not be recognized: '"+t+"'.")}}else t||Bi("For better performance it is highly recommended to add the type to the configuration of your ad sources.")}function e1(t){if(void 0!==t&&""!==t&&("string"==typeof t||"number"==typeof t)){switch(t){case"start":case"00:00:00":case"00:00:00.000":case"0%":case"0":return 0;case"end":case"100%":return-1}if("string"==typeof t){if(function(t){return K$.test(t)}(t))return Yc.g$t(t);if(s1(t))return t}return Number(t)>=0?Number(t):void 0}}function s1(t){return new RegExp(/^\d{1,2}%$/).test(t)}function n1(t){const i=[],e=(t,s)=>{if(Dn(s))for(let i=0,n=s.length;i<n;i++){const n=_o(s[i])&&s[i]?String(i):"";e(t+"["+encodeURIComponent(n)+"]",s[i])}else if(_o(s))for(const i of _.keys(s))e(t+"["+encodeURIComponent(i)+"]",s[i]);else((t,e)=>{i.push(t+"="+encodeURIComponent(null!=e?e:""))})(t,String(s))};for(const i of _.keys(t))e(encodeURIComponent(i),t[i]);return i.join("&")}r(),Qi(),r(),r();var r1=function(t){return t.ZXt="receiver_info",t.Nzt="event",t.n0t="propertychange",t.HXt="trackevent",t}({});Qi();var o1=class{r0t(t){let i;try{i=JSON.parse(t)}catch(t){0}return i}B$t(t){this.o0t.push(t)}Q$t(t){ra(this.o0t,t)}F$t(t){this.h0t.push(t)}Y$t(t){ra(this.h0t,t)}a0t(t){this.u0t=t}Ast(t,i){return this.c0t.Ast(t,i)}gn(){this.c0t.s0t(Z$,this.l0t),nt(this.h0t),nt(this.o0t),this.u0t=void 0}constructor(t){this.o0t=[],this.h0t=[],this.l0t=(t,i)=>{const e=this.r0t(i);if(e)if(e.type===r1.n0t)for(const t of this.o0t)for(const i of _.keys(e.properties))t(i,e.properties[i]);else if(e.type===r1.Nzt)for(const t of this.h0t)t(e.event);else e.type===r1.HXt&&this.u0t&&e.event.trackState&&this.u0t(e.event.trackId,e.event.trackState.targetQualityIds)},this.c0t=t,this.c0t.e0t(Z$,this.l0t)}};r(),r();var h1=function(t){return t.d0t="medialoadedchange",t.kb="volumechange",t.R$t="casterror",t.f0t="playererror",t.g0t="targetqualitychanged",t._0t="receiverinfochanged",t}({}),a1=class extends Jr{constructor(){super("medialoadedchange")}},u1=class extends Jr{constructor(t,i){super("volumechange"),this.Nk=t,this.WE=i}},c1=class extends Jr{constructor(t){super("casterror"),this.lt=t}},l1=class extends Jr{constructor(t){super("playererror"),this.lt=t}},d1=class extends Jr{constructor(t,i){super("targetqualitychanged"),this.Fj=t,this.v0t=i}},f1=class extends Jr{constructor(){super("receiverinfochanged")}},g1=class extends tu{w0t(t,i,e){this.U$t.Ast(Z$,function(t,i,e){return{type:H$.HXt,trackID:t,trackType:i,properties:{targetQuality:e}}}(t,i,e)).catch(this.X$t)}m0t(){this.c0t.e0t(Z$,this.p0t),this.U$t.Ast(Z$,{type:H$.ZXt}).catch(ya)}Z$t(){return this.A0t}y0t(){return this.aOt.getSessionObj()}b0t(t){!this.M0t&&t&&t.idleReason!==chrome.cast.media.IdleReason.FINISHED&&(this.M0t=new q0(this,this.U$t,t),this.T0t(),this.yo(new a1),this.M0t.V$t(this.S0t))}N0t(){return this.M0t}async I0t(t){const i=function(t){const i=function(t,i,e,s){const[n,r]=function(t){for(const e of t.sources)if(dS(e)){const t=e.src;if(t){var i;const s=null!=(i=e.type)?i:Mu(t);if(_1(s))return[t,s]}}var e,s;return[null!=(e=Zk(t))?e:"",null!=(s=Gk(t))?s:""]}(t),o=new chrome.cast.media.MediaInfo(n,r);return o.metadata=G$(t.metadata,t.poster),o.streamType=s,function(t,i,e){const s=[],n=[];let r,o=0,h=0;for(const t of i){const i=t1(t.sources);if(i)if(t0(i,t.timeOffset))r=new chrome.cast.media.VastAdsRequest,r.adTagUrl=i.src;else if(i0(i,t.timeOffset)){var a;const r=null!=(a=t.timeOffset)?a:0,c=t.skipOffset;var u;const l=null!=(u=Yc.w$t(r,e))?u:0,d=void 0!==c?Yc.w$t(c,e):void 0,f=new chrome.cast.media.BreakClip("bc"+h++);f.vastAdsRequest=new chrome.cast.media.VastAdsRequest,f.vastAdsRequest.adTagUrl=i.src,f.whenSkippable=d,f.customData={integration:t.integration};let g=dl(n,(t=>t.position===l));void 0===g&&(g=new chrome.cast.media.Break("b"+o++,[],l),n.push(g)),g.breakClipIds.push(f.id),s.push(f)}else 0;else 0}t.breakClips=s,t.breaks=n,t.vmapAdsRequest=r}(o,i,e),o}(t.D0t,t.Vc,t.ct,t.I1),e=new chrome.cast.media.LoadRequest(i);return e.autoplay=!0,e.currentTime=t.xE,e.customData=t.E0t,e}(t);let e;try{e=await this.aOt.loadMedia(i)}catch(t){e=t}if(e)throw new ws(Xr(e))}HE(t){this.y0t().setReceiverMuted(t,ya,this.k0t)}Dk(t){this.y0t().setReceiverVolumeLevel(t,ya,this.k0t)}x0t(){return this.y0t().receiver.friendlyName}gn(){this.Bo(),this.aOt.removeEventListener(cast.framework.SessionEventType.MEDIA_SESSION,this.L0t),this.y0t().removeUpdateListener(this.T0t),this.c0t.s0t(Z$,this.p0t),this.U$t.gn(),this.c0t.gn()}constructor(t){super(),this.A0t=void 0,this.X$t=t=>{this.yo(new c1(t))},this.C0t=(t,i)=>{"error"===t&&this.yo(new l1(i))},this.j0t=(t,i)=>{this.yo(new d1(t,i))},this.p0t=(t,i)=>{const e=JSON.parse(i);e.type===r1.ZXt&&(this.A0t=e.info,this.yo(new f1))},this.T0t=()=>{const t=this.y0t(),{level:i,muted:e}=t.receiver.volume;this.yo(new u1(null!=i?i:void 0,null!=e?e:void 0))},this.L0t=()=>this.b0t(this.aOt.getMediaSession()),this.S0t=t=>{var i;t||(null==(i=this.M0t)||i.G$t(this.S0t),this.M0t=void 0,this.yo(new a1))},this.k0t=t=>{var i;const e=new ws(Xr(t.code),null!=(i=t.description)?i:void 0);this.X$t(e)},this.aOt=t,this.aOt.addEventListener(cast.framework.SessionEventType.MEDIA_SESSION,this.L0t),this.c0t=new J0(t.getSessionObj()),this.U$t=new o1(this.c0t),this.U$t.B$t(this.C0t),this.U$t.a0t(this.j0t),this.y0t().addUpdateListener(this.T0t),this.T0t(),this.m0t();const i=this.aOt.getMediaSession();i&&this.b0t(i)}};function _1(t){switch(t){case Oe.hL:case Oe.oL:case Oe.aL:case Oe.uL:return!0}return!1}var v1=function(t){return t.O0t="statechange",t}({}),w1=class extends Jr{constructor(t){super("statechange"),this.$gt=t}};r(),r(),r(),ds(),r();var m1=class extends tu{Vnt(){return this.Dc}SE(){return Mo.PP()}LE(){return this.EG+this.R0t}jnt(){return this.LE()}DE(){}_d(){return this.JM}RE(){return this.Z5}PE(){}JE(){return this.CG}P0t(){}ek(){return this.jG}nk(t){this.jG!==t&&(this.jG=t,this.yo(new cu(this.ta.xE,t)))}gk(){return Fn.Nz}hk(){return Mo.PP()}vk(){return Mo.PP()}pk(){return!1}AE(){return this.Oz}Mk(){return this.Pz}Ak(){return this.Ul}q$t(t){}Sk(){return this.z0t}bk(){return this.B0t}Pk(){this.CG=!1}Rk(){this.CG=!0}Wb(t){this.EG=t-this.R0t}U0t(){return this.R0t}Q0t(t){this.R0t=t}wrt(t){this.Dc.wrt(t)}zk(){}gn(){this.Bo(),this.Oz.gn(),this.Pz.gn(),this.Ul.gn(),this.Dc.gn()}constructor(t,i,e,s,n,r,o,h,a){super(),this.ta=t,this.R0t=0,this.Oz=new pe,this.Pz=new pe,this.Ul=new Cc,this.Dc=new yB,this.R0t=i,this.EG=e-i,this.JM=s,this.Z5=n,this.CG=r,this.jG=o,this.z0t=h,this.B0t=a}};r(),r(),r(),r();var Hr=function(t){return t.F0t="ccmodechangerequest",t.Y0t="cctargetqualitychangerequest",t.V0t="cctrackchangerequest",t}({}),p1=class extends Jr{constructor(t,i,e){super(Hr.F0t),this.track=t,this.trackId=i,this.mode=e}};r();var A1=function(t){return t.ON="TEXT",t.SI="AUDIO",t.NI="VIDEO",t}({}),y1=function(t){return t.AQ="SUBTITLES",t.yQ="CAPTIONS",t.bQ="DESCRIPTIONS",t.Fn="CHAPTERS",t.MQ="METADATA",t}({});function b1(t){return"AUDIO"===t.type}function M1(t){return"VIDEO"===t.type}function T1(t){return"TEXT"===t.type}var S1=class extends tu{get ga(){return this.Za||(this.Za=EM(this)),this.Za}get kh(){return this.eB}set kh(t){t!==this.eB&&(this.eB=t,this.yo(new xu(this)))}get q(){return this.l6}get L(){return this.d6}get UI(){return this.zo}set UI(t){const i=wa(t);this.zo!==i&&(this.zo=i,this.G0t!==i&&this.yo(new p1(this,this.Gx,i)),this.yo(new su(this)))}get W0t(){return this.G0t}set W0t(t){const i=wa(t),e=this.zo!==i;this.zo=i,this.G0t=i,e&&this.yo(new su(this))}f6(t){return dl(this.d6.Ix,(i=>i.o===t))}Kx(t){this.UI=t}Z0t(t){}gn(){}tr(){}constructor(t){super(),this.Za=void 0;const i=t.customData;this.Gx=Number(t.trackId)||0,this.o=""+(i&&i.id||this.Gx),this.eB=i&&i.label||t.name||"",this.gs=i&&i.language||t.language||"",this.qx=i&&i.inBandMetadataTrackDispatchType||"",this.Lt=i&&i.kind||function(t){switch(t){case y1.AQ:return z.AQ;case y1.yQ:return z.yQ;case y1.bQ:return z.bQ;case y1.Fn:return z.Fn;case y1.MQ:return z.MQ}return}(t.subtype)||"subtitles",this.fk=Ma.NONE,this.YA=i&&void 0!==i.type?function(t){return eS(t)?t:El.DEFAULT}(i.type):El.WEBVTT,this.c6=[],this.d6=new Ou(this.c6),this.p6=[],this.l6=new Ou(this.p6),this.zo=wa(i&&i.mode||lc.Ch),this.G0t=this.zo}};r(),r();var N1=class extends Jr{constructor(t,i){super(Hr.V0t),this.trackId=t,this.enabled=i}};r();var I1=class extends Jr{constructor(t,i){super(Hr.Y0t),this.track=t,this.targetQuality=i}};r();var D1=function(t){return t.SI="audio",t.NI="video",t.ON="text",t}({}),E1=class extends tu{get Vx(){return this.ogt}get Hx(){return this.ngt}set Hx(t){this.H0t(t),this.yo(new I1(this,t))}get Zx(){return this.qz}get kh(){return this.eB}set kh(t){t!==this.eB&&(this.eB=t,this.yo(new xu(this)))}get Rt(){return this.He}set Rt(t){this.He!==t&&(this.He=t,this.X0t!==t&&this.yo(new N1(this.Gx,t)),this.yo(new su(this)))}get q0t(){return this.X0t}set q0t(t){const i=this.He!==t;this.He=t,this.X0t=t,i&&this.yo(new su(this))}get ga(){return this.Za||(this.Za=oo(this)),this.Za}get UI(){return this.Rt?"enabled":"disabled"}nB(t){this.Rt=t}Z0t(t){if(t.targetQualityIds){const i=[];for(const e of this.qz.Ix)t.targetQualityIds.indexOf(e.o)>-1&&i.push(e);const e=i.length?i:void 0;this.H0t(e)}}H0t(t){(function(t,i){return!t&&i||t&&!i||t&&i&&!ew(t,i)})(this.ngt,t)&&(this.ngt=t&&this.qz.Jz(t)?t:void 0,this.yo(new th(this.ngt,this)))}unload(){for(const t of this.qz.Ix)t.fn("update",this.FPt);this.qz.tr()}constructor(t){super(),this.ogt=void 0,this.qz=new ki,this.ngt=void 0,this.Za=void 0,this.FPt=()=>this.yo(new xu(this));const i=t.customData;if(this.Gx=Number(t.trackId)||0,this.o=""+(i&&i.id||this.Gx),this.eB=i&&i.label||t.name||"",this.gs=i&&i.language||t.language||"",this.Lt=i&&i.kind||"main",this.He=i&&i.enabled,this.X0t=this.He,b1(t)){this.E3=D1.SI;const i=t.customData&&t.customData.qualities;if(i)for(const t of i){const i=new cV(t.id,t.bandwidth,t.codecs,t.name,"",t.audioSamplingRate);i.yn("update",this.FPt),this.qz.Kz(i)}}else{this.E3=D1.NI;const i=t.customData&&t.customData.qualities;if(i)for(const t of i){const i=new uV(t.id,t.bandwidth,t.codecs,t.name,"",t.frameRate,t.width,t.height);i.yn("update",this.FPt),this.qz.Kz(i)}}}};r();var k1=function(t){return t.K0t="legacy",t.J0t="caf",t}({});r(),r(),Qi(),r(),r();var x1=class{Pc(){if(this.$0t>=this.Dc.length)return;const t=this.Dc[this.$0t];return this.$0t+=1,t}lt(){return this.Pc()}constructor(t){this.$0t=0,this.Dc=t}};function L1(t){var i,e,s;return null!=(s=null==(e=t.A$t)||null==(i=e.qXt)?void 0:i.KXt())?s:[]}var C1=class{},j1=class{drt(){var t;return null!=(t=this.Za)?t:this.Za=function(t){return{get ads(){return t.Vc.map((t=>t.drt()))},get integration(){return t.m$t},get maxDuration(){return t.t1t},get maxRemainingDuration(){return t.i1t},get timeOffset(){return t.fBt},get customData(){return t.E0t}}}(this)}constructor(){this.Za=void 0}},O1=class{get e1t(){return this.s1t}get t(){return this.ta}constructor(t,i){this.s1t=t,this.ta=i}},R1=class extends j1{get ZJt(){return this.D$t}get Vc(){const t=[];for(const s of this.D$t.n1t)for(const n of L1(s)){var i,e;const r=null!=(e=null==(i=n.gqt)?void 0:i.Bqt)?e:[];if(n.dqt&&t.push(this.r1t(n.dqt,r,n.vqt,s.Ert)),n._qt)for(const i of n._qt.wqt)t.push(this.o1t(i,r,n._qt,n.vqt,s.Ert))}return t}r1t(t,i,e,s){const n=dl(this.h1t,(i=>i.dqt===t));if(void 0!==n)return n;const r=new U1(t,i,this,this.a1t,e,s);return this.h1t.push(r),r}o1t(t,i,e,s,n){const r=dl(this.u1t,(i=>i._qt===t));if(void 0!==r)return r;const o=new B1(t,i,e,this,this.a1t,s,n);return this.u1t.push(o),o}get m$t(){return pi.CSAI}get fBt(){const t=this.D$t.sd;return t>=0?t:this.a1t.t._d()}get i1t(){let t=0;for(const i of this.D$t.n1t)for(const e of L1(i))e.dqt&&!e.dqt.zKt&&(t+=e.dqt.ct);return this.a1t&&this.a1t.e1t&&(t+=this.a1t.e1t.ct-this.a1t.e1t.xE),t}get t1t(){let t=0;for(const i of this.D$t.n1t)for(const e of L1(i))e.dqt&&(t+=e.dqt.ct);return t}get E0t(){}constructor(t,i){super(),this.h1t=[],this.u1t=[],this.D$t=t,this.a1t=i}},P1={height:0,width:0,clickThrough:"",contentHTML:"",resourceURI:"",altText:""},z1=class extends C1{get Yl(){return this.Eqt}get Ert(){return this.p$t}get vqt(){return this.xKt}c1t(){return this.l1t}d1t(){this.l1t=!0}f1t(t){return Ei({},P1,{resourceURI:t.pJt||""})}g1t(t){return Ei({},P1,{contentHTML:t.pJt.trim(),type:"HTMLResource"})}_1t(t){var i,e;return Ei({},P1,{clickThrough:(null==(i=t.oKt)?void 0:i.trim())||"",resourceURI:(null==(e=t.pJt)?void 0:e.trim())||"",altText:t.nKt||"",type:"StaticResource"})}v1t(t,i,e){if(!t||!i)return;const s="<img "+(e?"title='"+e+"' ":"")+"src='"+encodeURI(t)+"'>";return"<a href='"+encodeURI(i)+"' target='_blank' rel='noopener'>"+s+"</a>"}gqt(t){return t?t.map((t=>{let i;const e={adSlotId:t.Kqt||"",height:t.Ti||0,width:t.ji||0};if(t.yqt){var s;const e=this._1t(t.yqt),n=e.clickThrough||(null==(s=t.iKt)?void 0:s.oKt);i=Ei({},e,{contentHTML:this.v1t(e.resourceURI,n,e.altText)||""})}else if(t.Sqt)i=this.g1t(t.Sqt);else{if(!t.Mqt)return;i=this.f1t(t.Mqt)}return fe(i,e)})).filter((t=>void 0!==t)):[]}w1t(){return this.m1t.rqt}constructor(t,i,e,s,n,r){super(),this.l1t=!1,this.m1t=t,this.Uqt=i,this.Eqt=e,this.a1t=s,this.xKt=n,this.p$t=r}},B1=class extends z1{get _qt(){return this.m1t}get fqt(){return this.p1t}ma(){const t=this.Eqt,i={companions:this.gqt(this.Uqt),type:"nonlinear",id:this.m1t.kqt,skipOffset:this.RKt,integration:this.p$t.integration,adSystem:this.m1t.rqt,get adBreak(){return t.drt()},creativeId:this.m1t.kqt,universalAdIds:this.xKt.map((t=>({adIdRegistry:t.RJt,adIdValue:t.zJt})))};return this.m1t.Mqt?fe(this.f1t(this.m1t.Mqt),i):this.m1t.Sqt?fe(this.g1t(this.m1t.Sqt),i):this.m1t.yqt?fe(this._1t(this.m1t.yqt),i):i}drt(){var t;return null!=(t=this.Za)?t:this.Za=this.ma()}A1t(){var t,i;return null!=(i=null==(t=this.m1t.yqt)?void 0:t.pJt)?i:""}y1t(){var t,i,e;return null!=(e=null==(i=this.m1t)||null==(t=i.yqt)?void 0:t.yJt)?e:""}get RKt(){const t=this.m1t.Yl;return t&&t.Ert&&void 0!==t.Ert.skipOffset?Yc.w$t(t.Ert.skipOffset,this.a1t.e1t.ct):(null==(i=this.m1t.Yl)?void 0:i.RKt)||-1;var i}constructor(t,i,e,s,n,r,o){super(t,i,s,n,r,o),this.p1t=e}},U1=class extends z1{get dqt(){return this.m1t}ma(){var t;const i=this.Eqt,e=this.m1t;return{companions:this.gqt(this.Uqt),duration:e.ct,id:e.kqt,mediaFiles:e.CKt,get mediaUrl(){return e.BKt},skipOffset:this.RKt,type:"linear",integration:this.p$t.integration,adSystem:e.rqt,width:void 0,height:void 0,get adBreak(){return i.drt()},clickThrough:null==(t=e.MKt)?void 0:t.oKt,creativeId:e.kqt,universalAdIds:this.xKt.map((t=>({adIdRegistry:t.RJt,adIdValue:t.zJt}))),closedCaptionFiles:e.QKt}}drt(){var t;return null!=(t=this.Za)?t:this.Za=this.ma()}A1t(){return this.m1t.CKt.length>0?this.m1t.CKt[0].contentURL:""}y1t(){return this.m1t.CKt.length>0?this.m1t.CKt[0].type:""}get RKt(){const t=this.m1t.Yl;return t&&t.Ert&&void 0!==t.Ert.skipOffset?Yc.w$t(t.Ert.skipOffset,this.a1t.e1t.ct):this.m1t.RKt||-1}constructor(t,i,e,s,n,r){super(t,i,e,s,n,r)}};function Q1(t){return t instanceof U1}r();var ah=function(t){return t.b1t="csai",t.M1t="google-ima",t.Xh="google-dai",t.T1t="freewheel",t.S1t="mediatailor",t.Dd="chromecast",t.Jnt="theoads",t}({});r();var xl=class extends uB{ma(){return new F1(this.yrt.drt())}constructor(t){super("N1t",t)}},F1=class extends Sl{constructor(t){super("updatead",t)}};r();var Y1=class extends uB{ma(){return new V1(this.yrt.drt())}constructor(t){super("I1t",t)}},V1=class extends Sl{constructor(t){super("adloaded",t)}},G1=class extends gs{get $c(){return void 0!==this.D1t}get lrt(){return this.m1t?[this.m1t]:[]}get frt(){var t;return null!=(t=this.D1t)?t:null}get grt(){return Ms(this.E1t,(t=>{const i=t.Vc;if(t===this.D1t&&void 0!==this.m1t){const t=i.indexOf(this.m1t);if(t>=0)return i.slice(t+1)}return t.k1t()?[]:i}))}get _rt(){return this.E1t.filter((t=>t===this.D1t||!t.k1t()))}get Hnt(){}get ga(){var t;return null!=(t=this.Za)?t:this.Za=sB(this)}D9(t,i,e){throw new k("Scheduling ads while casting is not supported.")}ZC(){this.z$t.t0t()}mrt(t){var i;null==(i=this.x1t)||i.mrt(t)}vrt(t,i){var e;null==(e=this.x1t)||e.vrt(t,i)}L1t(t){return dl(this.E1t,(i=>i.o===t))}C1t(t,i,e,s){const n=this.E1t,r=[];let o=!1;for(const n of t){let t=this.L1t(n.id);void 0===t&&(t=new W1(n),s.push(new Pr(t))),!$t(t.j1t)&&$t(e)&&(t.j1t=this.O1t(t.R1t,e));const h=t.Vc;t.Yn(n,i,e,s);const a=t.Vc;for(const t of a)Qa(h,t)||(s.push(new cB(t)),o=!0);r.push(t)}this.E1t=r,o&&s.push(new wB);for(const t of n)Qa(r,t)||s.push(new Ar(t))}P1t(t,i){const e=this.D1t,s=this.m1t;let n,r;if(t){var o;const{breakId:i,breakClipId:e}=t;n=i?this.L1t(i):void 0,r=e?null==(o=this.D1t)?void 0:o.z1t(e):void 0}if(this.D1t=n,this.m1t=r,n!==e&&(void 0!==e&&(e.B1t=void 0,i.push(new hc(e))),void 0!==n&&(n.B1t=this.z$t,i.push(new Qt(n)))),r!==s){const t=this.ta.LE();void 0!==s&&i.push(new wu(s,t)),void 0!==r&&i.push(new gB(r,t))}}O1t(t,i){if(!i||!i.breaks)return;const e=dl(i.breaks,(i=>i.id===t.id));return e}wrt(t){const i=[];for(const t of this.E1t){let e=t.Vc;if(t===this.D1t&&void 0!==this.m1t){const t=e.indexOf(this.m1t);t>=0&&(e=e.slice(t))}else if(t.k1t())continue;for(const t of e){const e=t.U1t();e&&i.push(e)}}for(const e of i)t.D9(e,eB.urt,!1)}gn(){return this.Bo(),this.z$t.G$t(this.Yr),void 0!==this.D1t&&(this.D1t.B1t=void 0,this.D1t=void 0),this.m1t=void 0,nt(this.E1t),Promise.resolve(void 0)}constructor(t,i,e){super(),this.E1t=[],this.D1t=void 0,this.m1t=void 0,this.Za=void 0,this.Yr=t=>{var i;if(!t)return;const e=this.z$t.zj,{breakStatus:s}=e,{breakClips:n,breaks:r}=e.media,o=null==(i=W$(e))?void 0:i.media,h=[];r&&n&&this.C1t(r,n,o,h),this.P1t(s,h);for(const t of h)this.yo(t)},this.ta=t,this.z$t=i,this.x1t=e,this.z$t.V$t(this.Yr)}},W1=class extends j1{get R1t(){return this.Q1t}get o(){return this.Q1t.id}get Vc(){return this.Dc}get m$t(){return ah.Dd}get t1t(){let t=this.Q1t.duration;return void 0===t&&this.Dc.length>0&&(t=Ke(this.Dc,(t=>t.ct)),j(t)&&(t=void 0)),t}get i1t(){const t=this.t1t;if(void 0!==t&&void 0!==this.B1t){const i=this.B1t.$$t();if(void 0!==i)return x.max(0,t-i)}return t}get fBt(){return this.Q1t.position}get E0t(){}k1t(){return this.Q1t.isWatched}z1t(t){return dl(this.Dc,(i=>i.o===t))}Yn(t,i,e,s){const n=[];for(let r=0;r<t.breakClipIds.length;r++){const o=t.breakClipIds[r],h=dl(i,(t=>t.id===o));if(void 0===h)continue;const a=r<this.Dc.length?this.Dc[r]:new Z1(h,this);!$t(a.F1t)&&$t(e)&&(a.F1t=this.Y1t(e,o,r)),a.Yn(h,s),n.push(a)}this.Q1t=t,this.Dc=n}Y1t(t,i,e){if(!t||!t.breakClips)return;let s=dl(t.breakClips,(t=>t.id===i));if(!s){var n;const i=null==(n=this.j1t)?void 0:n.breakClipIds[e];i&&(s=dl(t.breakClips,(t=>t.id===i)))}return s}constructor(t){super(),this.j1t=void 0,this.Dc=[],this.B1t=void 0,this.Q1t=t}},Z1=class{get V1t(){return this.G1t}get o(){return this.G1t.id}get Bqt(){return[]}get ct(){var t;return null!=(t=this.G1t.duration)?t:NaN}get CKt(){const t=this.A1t();return t?[{contentURL:t,delivery:"progressive",type:this.y1t(),width:0,height:0}]:[]}get BKt(){return this.A1t()}get RKt(){const{whenSkippable:t}=this.G1t;return void 0===t?void 0:t<0?-1:t}get oKt(){return this.G1t.clickThroughUrl}get kqt(){}get vqt(){return[]}get E0t(){}w1t(){return""}y1t(){var t;return null!=(t=this.G1t.contentType)?t:""}A1t(){var t,i;return null!=(i=null!=(t=this.G1t.contentUrl)?t:this.G1t.contentId)?i:""}Yn(t,i){const e=this.o,s=this.ct,n=this.G1t.contentUrl;this.G1t=t;const r=this.o,o=this.ct,h=this.G1t.contentUrl;e===r&&(s===o||j(s)&&j(o))&&n===h||i.push(new xl(this)),j(s)&&!j(o)&&i.push(new Y1(this))}U1t(){let t;return this.F1t&&(t=W0(this.F1t,this.Yl.fBt)),t||(t=W0(this.G1t,this.Yl.fBt)),t}drt(){var t;return null!=(t=this.Za)?t:this.Za=this.ma()}ma(){const t=this;return{get companions(){return t.Bqt},get duration(){return t.ct},get id(){return t.o},get mediaFiles(){return t.CKt},get mediaUrl(){return t.BKt},get closedCaptionFiles(){return[]},get skipOffset(){return t.RKt},type:"linear",integration:ah.Dd,get adSystem(){return t.w1t()},width:void 0,height:void 0,get adBreak(){return t.Yl.drt()},get resourceURI(){return t.A1t()},get clickThrough(){return t.oKt},get creativeId(){return t.kqt},get customData(){return t.E0t},get isSlate(){return!1},get universalAdIds(){return t.vqt.map((t=>({adIdRegistry:t.RJt,adIdValue:t.zJt})))}}}constructor(t,i){this.Za=void 0,this.G1t=t,this.Yl=i}};r(),Qi();var H1=class extends tu{get W1t(){return this.Z1t}set W1t(t){this.Z1t!==t&&(this.Z1t=t,this.Vs.href=null!=t?t:"",t?this.EQ():this.kQ())}EQ(){if(this.He)return;this.He=!0,this.Vs.style.display="",this.H1t||(this.lD.style.cursor="pointer");const t=this.H1t?this.Vs:this.lD;Fe.Ys.Je?(t.addEventListener("touchstart",this.X1t),t.addEventListener("touchend",this.q1t)):(t.addEventListener("mousedown",this.X1t),t.addEventListener("click",this.q1t))}kQ(){if(!this.He)return;this.He=!1,this.Vs.style.display="none",this.H1t||(this.lD.style.cursor="");const t=this.H1t?this.Vs:this.lD;Fe.Ys.Je?(t.removeEventListener("touchstart",this.X1t),t.removeEventListener("touchend",this.q1t)):(t.removeEventListener("mousedown",this.X1t),t.removeEventListener("click",this.q1t))}wy(){this.Bo(),this.kQ(),this.lD.removeChild(this.Vs)}constructor(t,i=Fe.Ys.Je){super(),this.He=!1,this.X1t=t=>{t.stopPropagation(),this.yo(new Jr("clickstart"))},this.q1t=t=>{t.stopPropagation(),this.yo(new Jr("click"))},this.lD=t,this.H1t=i,this.Vs=h.createElement("a"),this.Vs.style.position="absolute",this.Vs.style.zIndex="11",this.Vs.target="Vu",this.H1t?(Vu(this.Vs,"learn more"),this.Vs.className="theoplayer-ad-overlay-component theoplayer-ad-touch-clickthrough",this.Vs.setAttribute("rel","noopener")):pn(this.Vs),this.lD.appendChild(this.Vs),this.kQ()}};r(),r();var X1=[1200,992,768,576],q1={1200:"theo-size-xl",992:"theo-size-l",768:"theo-size-m",576:"theo-size-s"},K1=class{K1t(t){let i=J1(t);i!==this.J1t&&(Ea(this.Vs,i),Ud(this.Vs,this.J1t),this.J1t=i)}gn(){this.Xu.fn(Th.pn,this.mn)}constructor(t,i){this.Vs=t,this.Xu=i,this.mn=t=>{this.K1t(t.width)},this.J1t=J1(i.Su),Ea(this.Vs,this.J1t),i.yn(Th.pn,this.mn)}};function J1(t){for(let i of X1)if(t>i)return q1[i];return"theo-size-xs"}var $1=class extends tu{get we(){return this.Vs}get UI(){return this.zo}get UN(){return this.Zl.textContent||""}set UN(t){Vu(this.Zl,t)}$1t(t){"countdown"!==this.zo&&(this.zo="countdown",this.t2t(),this.we.classList.remove("theoplayer-ad-skip-button"),this.we.classList.add("theoplayer-ad-skip-countdown")),this.UN="You can skip in "+x.round(t)+" seconds"}i2t(){"skip"!==this.zo&&(this.zo="skip",this.UN="Skip Ad",this.e2t(),this.we.classList.remove("theoplayer-ad-skip-countdown"),this.we.classList.add("theoplayer-ad-skip-button"))}e2t(){this.we.addEventListener("mouseup",this.s2t),this.we.addEventListener("touchend",this.s2t)}t2t(){this.we.removeEventListener("mouseup",this.s2t),this.we.removeEventListener("touchend",this.s2t)}gn(){this.Bo(),this.t2t(),this.Gu.gn(),dn(this.Vs),dn(this.Zl),this.n2t&&dn(this.n2t)}constructor(t,i){super(),this.s2t=()=>{this.yo(new Jr("ZC"))},this.Vs=h.createElement("div"),this.we.className="theoplayer-ad-overlay-component theoplayer-ad-skip theoplayer-ad-skip-countdown",this.we.style.position="absolute",this.Zl=h.createElement("span"),this.we.appendChild(this.Zl),i&&(this.n2t=h.createElement("div"),this.n2t.className="theoplayer-ad-skip-poster",this.n2t.style.backgroundImage='url("'+Bv(i)+'")',this.we.appendChild(this.n2t)),this.zo="countdown",this.Gu=new K1(this.we,t)}};ds();var t2=class extends tu{r2t(){const t=this.z$t.zj.activeTrackIds;if(t){if(this.o2t()){const i=this.Pz.Ix.map((t=>t.o)),e=this.Oz.Ix.map((t=>t.o));Qa(i.concat(e),"0")&&t.push(0)}r2(t,this.Oz),r2(t,this.Pz),function(t,i){const e=!1;for(const e of i.Ix)e.W0t=Qa(t,e.Gx)?lc.Jn:lc.Ch}(t,this.Ul)}}h2t(){var t;const i=null==(t=this.z$t.zj.media)?void 0:t.tracks;if(!i)return;const e=i.filter(b1),s=i.filter(M1),n=i.filter(T1);if(this.o2t()&&0===s.length&&0!==this.Sk()){const t=this.a2t();s.push(t)}if(this.o2t()&&0===e.length){const t=this.u2t();e.push(t)}s2(this.Oz,e.map((t=>t.trackId))),s2(this.Pz,s.map((t=>t.trackId))),s2(this.Ul,n.map((t=>t.trackId))),n2(e,this.Oz),n2(s,this.Pz),function(t,i){let e=!1;for(const s of t){let t=e2(i,s.trackId);t||(t=new S1(s),i.tt(t),e=!0)}}(n,this.Ul)}c2t(){this.CG||(this.l2t=v(this.ld,250))}d2t(){m(this.l2t)}f2t(){this.d2t(),this.c2t()}g2t(){var t;const i=this.z$t.zj,e=i.media;var s;const n=null!=(s=null==e?void 0:e.duration)?s:NaN,r=(null==e?void 0:e.streamType)===chrome.cast.media.StreamType.LIVE||n<0,o=r?1/0:n;this.JM=o,this._2t();const h=i.getEstimatedLiveSeekableRange(),a=null==(t=i.customData)?void 0:t.buffers;if($t(h)){const{start:t,end:i,isMovingWindow:e=r,isLiveDone:s=!1}=h;this.iQt(t,i,e,s)}else if($t(a)){const[t,i]=a.seekable;this.iQt(t,i,r,!1)}else r?this.iQt(void 0,void 0,!0,!1):this.iQt(0,o,!1,!1)}v2t(){const t=this.z$t.zj,i=function(t){return void 0!==t&&t.playerState===chrome.cast.media.PlayerState.PAUSED}(t)||i2(t);this.w2t=i,this.CG!==i&&(this.CG=i,this.CG?this.yo(new Zr(this.LE())):this.yo(new fi(this.LE())))}th(){const{playbackRate:t}=this.z$t.zj;this.m2t!==t&&(this.m2t=void 0,this.jG!==t&&(this.jG=t,this.yo(new cu(this.LE(),t))))}p2t(){const{playerState:t}=this.z$t.zj;let i;switch(t){case chrome.cast.media.PlayerState.IDLE:i=Fn.Nz;break;case chrome.cast.media.PlayerState.BUFFERING:i=Fn.Xn;break;case chrome.cast.media.PlayerState.PAUSED:case chrome.cast.media.PlayerState.PLAYING:i=Fn.Dz}this.q5(i),this.A2t()}iQt(t,i,e,s){$t(t)&&$t(i)?this.D5=new Xu(t,i,e,e&&!s):this.D5=void 0}y2t(t,i){this.B0t=null!=i?i:this.B0t,this.z0t=null!=t?t:this.z0t,this.yo(new hD)}We(t){this.b2t!==t?(this.kG=!0,this.yo(new Yr(this.LE()))):this.b2t=void 0}YV(){if(!this.kG)return;this.kG=!1;const t=this.LE();this.yo(new A(t,this.DE())),this.yo(new aa(t))}Sh(){this.Z5=!0,this.RE()&&this.yo(new fa(this.LE()))}_2t(){const t=this.SDt,i=this._d();t===i||j(t)&&j(i)||(this.SDt=i,this.yo(new Hs(i)))}M2t(){const t=this.LE();this.kG||this.T2t===t||(this.T2t=t,this.yo(new A(t,this.DE())))}P0t(){this.CG&&(this.CG=!1,this.yo(new fi(this.LE())),this.q5(Fn.Nz))}Vnt(){return this.Dc}SE(){return this.GDt.Gb(this.R0t)}LE(){if(this.Dc.$c){const t=this.z$t.J$t();if(void 0!==t)return t}return this.jnt()}jnt(){return void 0!==this.S2t?this.R0t+this.S2t:this.Z5?this._d():this.R0t+this.z$t.K$t()}DE(){if(this.N2t)return new Date(this.jnt()+this.N2t)}_d(){if(this.Dc.$c){var t;const i=null==(t=this.Dc.lrt[0])?void 0:t.ct;if(void 0!==i&&!j(i))return i}return this.R0t+this.JM}PE(){return this.dV}RE(){return!this.Dc.$c&&this.Z5}JE(){return this.CG}ek(){return this.jG}nk(t){this.jG!==t&&(this.m2t=this.jG,this.jG=t,this.yo(new cu(this.LE(),t)),this.z$t.nk(t))}gk(){return this.H5}hk(){return this.Dc.$c?Mo.RP(0,this.LE()):this.Fo.Gb(this.R0t)}vk(){var t,i;if(this.Dc.$c)return Mo.PP();let e=null!=(i=null==(t=this.D5)?void 0:t.Q3().Gb(this.R0t))?i:Mo.PP();if(e.V>0){const t=e.jn(e.V-1);e=e.pP(Mo.RP(t,this.LE()))}return e}pk(){return this.kG}AE(){return this.Oz}Mk(){return this.Pz}Ak(){return this.Ul}a2t(){return{customData:{activeQuality:{averageBandwidth:0,bandwidth:0,codecs:"",frameRate:0,height:this.bk(),id:"0",name:"",width:this.Sk()},enabled:!0,id:"0",kind:"main",label:"",language:"",qualities:[],uid:0},language:"",name:"",trackContentId:"",trackContentType:"",trackId:0,type:A1.NI}}u2t(){return{customData:{activeQuality:{averageBandwidth:0,bandwidth:0,codecs:"",id:"0",name:"",audioSamplingRate:0},qualities:[],enabled:!0,id:"0",kind:"main",label:"",language:"",uid:0},language:"",name:"",trackContentId:"",trackContentType:"",trackId:0,type:A1.SI}}o2t(){var t,i;return!(void 0!==(null==(t=this.aOt.Z$t())?void 0:t.version))||(null==(i=this.aOt.Z$t())?void 0:i.sdkType)===k1.J0t}q$t(t){this.o2t()&&ra(t,0),this.z$t.q$t(t)}Sk(){return this.z0t}bk(){return this.B0t}Pk(){this.CG&&(this.CG=!1,this.w2t=!1,this.yo(new fi(this.LE()))),this.z$t.Pk()}Rk(){this.CG||(this.CG=!0,this.w2t=!0,this.yo(new Zr(this.LE()))),this.z$t.Rk()}Wb(t){if(this.Dc.$c)return;let i=x.max(0,t-this.R0t);i=x.round(1e6*i)/1e6;const e=this.S2t;this.S2t=i,this.w2t=this.JE(),this.b2t=i,this.kG=!0,this.yo(new Yr(this.LE())),void 0===e&&(this.o2t()?this.I2t(i):this.A7(i))}A7(t){this.z$t.Wb(t,this.w2t).then(this.D2t(t)).catch(this.X$t)}D2t(t){return()=>{void 0!==this.S2t&&(this.S2t===t?this.S2t=void 0:this.A7(this.S2t))}}q5(t){this.H5!==t&&(this.H5=t,this.yo(new Yu(this.LE(),t))),void 0===this.S2t&&this.kG&&t>=Fn.Iz&&this.YV(),this.A2t()}A2t(){if(this.CG)return void(this.E2t=!1);const t=this.H5>=Fn.Dz;this.E2t!==t&&(this.E2t=t,t?this.yo(new te(this.LE())):this.yo(new Ai(this.LE())))}k2t(){this.x2t||(this.x2t=h.createElement("div"),this.ta.we.appendChild(this.x2t),this.x2t.className="theoplayer-ad-linear theoplayer-chromecast-ad",this.x2t.style.zIndex="10",pn(this.x2t)),this.x2t.style.display=this.Dc.$c?"":"none"}L2t(){var t;const i=null==(t=this.Dc.lrt[0])?void 0:t.oKt;i&&!this.C2t?(this.C2t=new H1(this.x2t,!0),this.C2t.W1t=i,this.C2t.yn("clickstart",this.j2t)):this.C2t&&(this.C2t.W1t=i)}O2t(){var t;const i=null==(t=this.Dc.lrt[0])?void 0:t.RKt;if(void 0===i||i<0)return void(this.R2t&&(this.R2t.gn(),this.R2t=void 0));if(!this.R2t){var e;const t=null==(e=this.ta.Ca)?void 0:e.mi;this.R2t=new $1(this.ta.Uu,t),this.x2t.appendChild(this.R2t.we),this.R2t.yn("ZC",this.P2t)}const s=this.z$t.J$t();void 0!==s&&(s<i?this.R2t.$1t(i-s):this.R2t.i2t())}U0t(){return this.R0t}Q0t(t){this.R0t=t}wrt(t){}zk(){this.z$t.zk()}gn(){this.Bo(),this.Dc.gn(),this.C2t&&(this.C2t.wy(),this.C2t=void 0),this.R2t&&(this.R2t.gn(),this.R2t=void 0),this.x2t&&(dn(this.x2t),this.x2t=void 0),this.z$t.Y$t(this.q3),this.z$t.Q$t(this.z2t),this.z$t.G$t(this.S0t),this.z$t.fn(Z0.R$t,this.B2t),this.z$t.gn()}constructor(t,i,e,s,n){super(),this.GDt=Mo.PP(),this.N2t=void 0,this.Z5=!1,this.dV=void 0,this.m2t=void 0,this.H5=Fn.Nz,this.E2t=!1,this.Fo=Mo.PP(),this.D5=void 0,this.kG=!1,this.Oz=new pe,this.Pz=new pe,this.Ul=new Cc,this.SDt=NaN,this.S2t=void 0,this.w2t=!1,this.T2t=NaN,this.b2t=void 0,this.l2t=0,this.z2t=(t,i)=>{switch(t){case"buffered":this.GDt=new Mo(i),this.yo(new ii(this.LE()));break;case"currentProgramDateTime":this.N2t=new Date(i).getTime()-this.LE();break;case"played":this.Fo=new Mo(i);break;case"seekable":this.g2t();break;case"videoHeight":this.y2t(void 0,i);break;case"videoWidth":this.y2t(i,void 0)}},this.q3=t=>{switch(t.type){case Zi.Mb:this.We(t.currentTime);break;case Zi.bb:this.YV();break;case Zi.Ab:this.yo(new GQ(t.representation,t.previousRepresentation));break;case Zi.Tb:this.yo(new mQ(t.segmentStartTime,t.error,t.trackType,t.track,t.quality,t.retryCount));break;case Zi.Xy:this.yo(new DG(t.currentTime,t.initDataType,t.initData));break;case Zi.Yy:this.yo(new Go(new lu(vt.CONTENT_PROTECTION_ERROR,t.error,void 0,t.licenseAcquisitionURL,t.status,t.statusText,t.licenseAcquisitionMessage,t.systemCode)));break;case Zi.Vy:this.yo(new AR)}},this.S0t=t=>{this.g2t(),this.v2t(),this.th(),this.p2t(),this.M2t(),this.f2t(),this.h2t(),this.r2t(),this.k2t(),this.L2t(),this.O2t(),t||i2(this.z$t.zj)&&this.Sh()},this.ld=()=>{this.M2t(),this.O2t()},this.B2t=t=>{this.yo(t)},this.I2t=Gn((t=>this.A7(t)),50),this.X$t=t=>{this.S2t=void 0,this.yo(new H0(t))},this.j2t=()=>{this.Rk()},this.P2t=()=>{this.Dc.ZC()},this.ta=t,this.aOt=e,this.z$t=s,this.Dc=new G1(t,s,i.Vc),this.R0t=n.U0t(),this.JM=n._d()-this.R0t,this.CG=n.JE(),this.jG=n.ek(),this.z0t=n.Sk(),this.B0t=n.bk(),this.z$t.F$t(this.q3),this.z$t.B$t(this.z2t),this.z$t.V$t(this.S0t),this.z$t.yn(Z0.R$t,this.B2t),this.z$t.W$t().then((t=>{this.yo(new X0(t.bt,t.kc))}),this.X$t)}};function i2(t){return void 0!==t&&t.playerState===chrome.cast.media.PlayerState.IDLE&&t.idleReason===chrome.cast.media.IdleReason.FINISHED}function e2(t,i){for(const e of t.Ix)if(e.Gx===i)return e}function s2(t,i){let e=!1;for(let s=0;s<t.V;s++){const n=t.Ex(s);-1===i.indexOf(n.Gx)&&(t.it(n),s--,e=!0)}return e}function n2(t,i){let e=!1;for(const s of t){let t=e2(i,s.trackId);t||(t=new E1(s),i.tt(t),e=!0)}return e}function r2(t,i){for(const e of i.Ix)e.q0t=Qa(t,e.Gx);return!1}r();var o2=class{Frt(t){return Promise.resolve("all")}Ok(){}gn(){}};r();function h2(t,i,e){if(j(t))return e;if(t===1/0){if("live"===e||"dvr"===e)return e;if(i&&i.length>0){if(i.end(i.length-1)-i.start(0)>60)return"dvr"}return"live"}return"vod"}var a2=[Zi.qy,Zi.Zy,Zi.pb,Zi.yb,Zi.wb,Zi.so,Zi.mb,Zi.Eb,Zi.Mb,Zi.bb,E.rP,E.oP,Zi.Ab,Zi.Tb,Zi.Xy,Zi.Yy,Zi.Vy],u2=class extends Xt{DG(t){if(!t)return;ns(this.AG&&Rc(this.AG),t&&Rc(t))||(this.AG=t,this.yo(new ES(t)))}U2t(t){if(!t)return;const i=Hc(t,this.ta.md);ns(this.wc&&Rc(this.wc),i&&Rc(i))||(this.Ea.Q0t(0),this.wc=i,this.yo(new qz(i)),this.Ea.P0t())}Q2t(t){for(const i of this.rt.Ix)if(i.Gx===t)return i;for(const i of this.ht.Ix)if(i.Gx===t)return i}get $gt(){return this.Ea}set $gt(t){const i=this.Ea;i&&(i.fn(Z0.R$t,this.B2t),i.fn(Z0.P$t,this.F2t),i.fn(a2,this.Ds),i.fn(E.wx,this.rF),t.Q0t(i.U0t()),i.wrt(t.Vnt())),this.Ea=t,this.Oz.xx=t.AE(),this.Pz.xx=t.Mk(),this.Ul.xx=t.Ak(),this.Dc.xx=t.Vnt(),i&&i.gn(),t.yn(Z0.R$t,this.B2t),t.yn(Z0.P$t,this.F2t),t.yn(a2,this.Ds),t.yn(E.wx,this.rF)}get Yh(){return this.Kh}get Vc(){return this.Vnt()}Vnt(){return this.Dc}Gnt(){return this.Dnt}AE(){return this.Oz}SE(){return this.Ea.SE().ks()}get Y2t(){return this.V2t||this.wc}set Y2t(t){this.V2t=t}async $n(t,i){var e;t&&await this.I0t(t,null!=(e=t.ads)?e:[],t.streamType,NaN,0,null!=i?i:0)}async G2t(t){var i;const e=null!=(i=this.V2t)?i:this.wc;if(!e)return;var s;const n=this.V2t?null!=(s=this.V2t.ads)?s:[]:this.jrt(),r=this.ta._d(),o=this.ta.vk(),h=h2(r,o,e.streamType),a=o.length>0?o.start(0):0,u=null!=t?t:this.jnt();await this.I0t(e,n,h,r,a,u)}jrt(){const t=new yB;return this.Dc.wrt(t),t.jrt()}DE(){return this.Ea.DE()}kE(){return this.AG}get xE(){return this.LE()}set xE(t){this.CE(t)}LE(){return this.Ea.LE()}jnt(){return this.Ea.jnt()}CE(t,i){this.W2t||(this.aOt.N0t()||this.W2t||!this.wc?this.Ea.Wb(t):this.$n(this.wc,t))}_d(){return this.Ea._d()}RE(){return this.Ea.RE()}PE(){return this.dV}BE(){return this.fV}QE(){return this.Rz}GE(){return this.ta.VE}ZE(){return this.xG}HE(t){this.xG=t,this.yo(new $e(this.xE,this.Nk)),this.aOt.HE(t)}JE(){return this.Ea.JE()}ek(){return this.Ea.ek()}nk(t){this.Ea.nk(t)}hk(){return this.Ea.hk().ks()}lk(){return Nr.Mz}dk(t){}gk(){return this.Ea.gk()}vk(){return this.Ea.vk().ks()}pk(){return this.Ea.pk()}Ya(){return this.wc}async ka(t){this.wc=t,await this.$n(t),this.V2t=void 0,this.Ea.P0t()}Ak(){return this.Ul}bk(){return this.Ea.bk()}Sk(){return this.Ea.Sk()}Mk(){return this.Pz}Ik(){return this.cT}Dk(t){this.cT=t,this.yo(new $e(this.xE,this.Nk)),this.aOt.Dk(t)}get Lk(){return!1}set Lk(t){}jk(){}Ck(){return this.Zo}Ok(){}Pk(){this.aOt.N0t()||this.W2t||!this.wc?this.Ea.Pk():this.$n(this.wc)}Rk(){this.Ea.Rk()}ur(){this.Kh=!0}ar(){this.AG=void 0,this.Kh=!1}ge(){}be(){}async I0t(t,i,e,s,n,r){this.W2t=!0,this.Z2t(),this.Ea.Q0t(n);const o="live"===e||"dvr"===e,h=function(t,i,e){return{theoplayer_version:1,streamStart:t,isLive:i,sourceDescription:e}}(n,o,t),a={D0t:t,Vc:i,xE:x.max(0,r-n),ct:s,I1:o?chrome.cast.media.StreamType.LIVE:chrome.cast.media.StreamType.BUFFERED,E0t:h};try{await this.aOt.I0t(a)}catch(t){this.H2t(t)}finally{this.W2t=!1}}X2t(){this.q2t(this.Oz),this.q2t(this.Pz),this.K2t(this.Ul)}q2t(t){for(const i of t.Ix)this.J2t(i);t.yn(bs.Hk,(t=>{this.J2t(t.Ht),this.$2t()}))}K2t(t){for(const i of t.Ix)this.t4t(i);t.yn(bs.Hk,(t=>{this.t4t(t.Ht),this.$2t()}))}J2t(t){t.yn(Hr.Y0t,this.zpt),t.yn(Hr.V0t,this.i4t),t.yn(Hr.V0t,this.r2t)}t4t(t){t.yn(Hr.F0t,this.e4t),t.yn(Hr.F0t,this.r2t)}s4t(){const t=[];for(const i of this.rt.Ix)i.Rt&&t.push(i.Gx);for(const i of this.ht.Ix)i.Rt&&t.push(i.Gx);for(const i of this.nt.Ix)i.UI===lc.Jn&&t.push(i.Gx);this.Ea.q$t(t)}n4t(t,i,e){this.r4t=t,this.o4t=i,this.h4t=e}a4t(t){var i,e;if(!t)return!1;return(null!=(e=null==(i=this.aOt.Z$t())?void 0:i.version)?e:-1)>=2?t.map((t=>t.o)):[t[0].o]}u4t(t){this.c4t=t}Fk(){}Yk(){}Wk(t){throw new b("Can't add a track while casting.")}async zk(){this.Ea.zk(),this.Z2t()}Z2t(){this.qQ=Fn.Nz,this.VQ=!1,this.ZQ=!1,this.dV=void 0,this.fV=void 0}async gn(){this.Z2t(),this.Bo(),this.$gt=this.l4t(),this.aOt.fn(h1.R$t,this.B2t),this.aOt.fn(h1.f0t,this.ERt),this.aOt.fn(h1.kb,this.d4t),this.aOt.fn(h1.d0t,this.f4t),this.aOt.fn(h1.g0t,this.g4t),this.aOt.gn()}l4t(){return new m1(this,this.Ea.U0t(),this.Ea.LE(),this.Ea._d(),this.Ea.RE(),this.Ea.JE(),this.Ea.ek(),this.Ea.Sk(),this.Ea.bk())}constructor(t,i){super(t,!0),this.Kh=!1,this.c4t=ya,this.qQ=Fn.Nz,this.VQ=!1,this.ZQ=!1,this.W2t=!1,this.V2t=void 0,this.dV=void 0,this.fV=void 0,this.Oz=new tl,this.Pz=new tl,this.Ul=new Ce,this.Zo=new ut,this.Rz=new LM,this.Dnt=new o2,this.r4t=void 0,this.o4t=void 0,this.h4t=void 0,this.d4t=t=>{var i,e;($t(t.Nk)&&!ce(t.Nk,this.cT,1e-5)||$t(t.WE)&&t.WE!==this.xG)&&(this.cT=null!=(i=t.Nk)?i:this.cT,this.xG=null!=(e=t.WE)?e:this.xG,this.yo(new $e(this.xE,this.cT)))},this.f4t=()=>{const t=this.aOt.N0t();this.$gt=t?new t2(this,this.ta,this.aOt,t,this.Ea):this.l4t()},this.F2t=t=>{this.DG(t.bt),this.U2t(t.kc)},this.g4t=t=>{const i=this.Q2t(t.Fj);if(!i)return void 0;const e={targetQualityIds:t.v0t};i.Z0t(e)},this.B2t=t=>{this.H2t(t.lt)},this.H2t=t=>{this.c4t&&this.c4t(t)},this.ERt=t=>{this.dV=t.lt,this.fV=ju(this.dV),this.yo(new Uc(this.fV))},this.i4t=t=>{if(!t.enabled)return;const i=this.rt.Ix.some((i=>i.Gx===t.trackId))?this.rt:this.ht;for(const e of i.Ix)e.Rt&&e.Gx!==t.trackId&&(e.Rt=!1)},this.e4t=t=>{if(t.mode===lc.Jn)for(const i of this.nt.Ix)i.UI===lc.Jn&&i.Gx!==t.trackId&&QI(i.Lt,t.track.Lt)&&(i.UI=lc.Ch)},this.r2t=Gn((()=>{this.s4t()}),50),this.$2t=()=>{const t=[];var i;const e=null!=(i=dl(this.ht.Ix,(t=>m2(t,this.r4t))))?i:dl(this.ht.Ix,(t=>t.Rt));var s;e&&t.push(e.Gx);const n=null!=(s=dl(this.nt.Ix,(t=>m2(t,this.o4t))))?s:dl(this.nt.Ix,(t=>t.UI===lc.Jn));var r;n&&t.push(n.Gx);const o=null!=(r=dl(this.rt.Ix,(t=>m2(t,this.h4t))))?r:dl(this.rt.Ix,(t=>t.Rt));o&&t.push(o.Gx),0!==t.length&&this.Ea.q$t(t)},this.zpt=t=>{const i=this.a4t(t.targetQuality),e=t.track;this.aOt.w0t(e.Gx,e.E3,i)},this.rF=t=>{this.yo(t);const i=t.readyState;!this.VQ&&this.qQ===Fn.Nz&&i>=Fn.Xn&&(this.VQ=!0,this.yo(new yu(t.currentTime))),!this.ZQ&&this.qQ<=Fn.Xn&&i>=Fn.Iz&&(this.ZQ=!0,this.yo(new Cu(t.currentTime))),this.qQ<=Fn.Iz&&i>=Fn.Dz&&this.yo(new AS(t.currentTime)),this.qQ<=Fn.Dz&&i===Fn.Ez&&this.yo(new Eu(t.currentTime)),this.qQ=i},this.cT=this.ta.Nk,this.xG=this.ta.WE,this.aOt=i,this.aOt.yn(h1.R$t,this.B2t),this.aOt.yn(h1.f0t,this.ERt),this.aOt.yn(h1.kb,this.d4t),this.aOt.yn(h1.d0t,this.f4t),this.aOt.yn(h1.g0t,this.g4t),this.Dc=new pB(this),this.AG=this.ta.bt,this.wc=this.ta.Ya(),this.$gt=new m1(this,0,this.ta.jnt(),this.ta._d(),this.ta.OE,this.ta.KE,this.ta.$E,this.ta.Tk,this.ta.yk),this.X2t()}};r();var c2=class extends ua{ma(){return new l2(this.lt)}constructor(t){super("error"),this.lt=t}},l2=class extends Jr{constructor(t){super("error"),this.error=t}};r();var d2=class extends Jr{constructor(t){super("statechange"),this.state=t}};function f2(t,i){let e;return{get casting(){return t.TJ},get error(){return t.lt},get receiverName(){return t._4t},get state(){return t.$gt},start(){t.Cn()},stop(){t.zk()},join(){t.v4t()},leave(){t.w4t()},set connectionCallback(t){null==i||i.m4t(t)},get connectionCallback(){return null==i?void 0:i.p4t()},get source(){return e||t.kc},set source(i){e=i,t.kc=i},addEventListener(i,e){const s=Mt(i,Q);t.yn(s,e)},removeEventListener(i,e){const s=Mt(i,Q);t.fn(s,e)}}}r(),Qi(),ds();var g2=class extends gs{get TJ(){return this.$gt===Dt.CONNECTING||this.$gt===Dt.CONNECTED}get lt(){return this.dV}get ga(){return this.Za||(this.Za=f2(this,this.A4t)),this.Za}get _4t(){var t;return null==(t=this.A4t.y4t())?void 0:t.x0t()}get kc(){return this.ta?this.ta.Y2t:this.V2t}set kc(t){this.V2t=t?Hc(t,this.b4t.md):void 0,this.ta&&(this.ta.Y2t=this.V2t,this.V2t&&this.ta.$n(this.V2t))}get $gt(){return this.Ea}set $gt(t){let i=t;this.M4t||i!==Dt.CONNECTING&&i!==Dt.CONNECTED||(i=Dt.AVAILABLE),this.Ea!==i&&(this.Ea=i,this.yo(new d2(this.$gt)))}async T4t(){if(!this.S4t)throw new b("Chromecast must be initialized before starting a session");await this.S4t,this.A4t.y4t()||await this.A4t.N4t()}async Cn(){this.M4t=!0;try{if(this.$gt=Dt.CONNECTING,await this.T4t(),await this.I4t(),this.ta){const t=this.b4t.Ya(),i=this.A4t.D4t(t);this.ta.Y2t=i?Hc(i,this.b4t.md):this.V2t,this.ta.G2t()}this.$gt=Dt.CONNECTED,await this.b4t.zk()}catch(t){this.E4t(!1).catch(ya),this.$gt=Dt.AVAILABLE,Tu(t)||this.s8(t)}}async v4t(){this.M4t=!0;try{if(this.$gt=Dt.CONNECTING,await this.T4t(),await this.I4t(),this.ta){const t=this.b4t.Ya(),i=this.A4t.k4t(t);i&&(this.ta.Y2t=Hc(i,this.b4t.md))}this.$gt=Dt.CONNECTED,await this.b4t.zk()}catch(t){await this.E4t(!0).catch(ya),this.$gt=Dt.AVAILABLE,Tu(t)||this.s8(t)}}async x4t(){this.A4t.y4t()&&await this.Cn()}async I4t(){null!=this.ta||(this.ta=this.L4t()),this.dV=void 0,this.b4t.Rk(),await this.LK.C4t(this.ta)}L4t(){const t=new u2(this.b4t,this.A4t.y4t());return t.u4t(this.s8),t}j4t(){this.ta&&(this.ta.gn(),this.ta=void 0)}async E4t(t){if(this.M4t=!1,!this.ta)return;const i=this.ta.Yh,e=this.ta.Ya(),s=this.ta.jnt();try{if(i){let i;i=t?this.A4t.O4t(e):this.A4t.R4t(e),null!=i||(i=e),await this.LK.P4t(i,i===e),this.b4t.CE(s),this.b4t.Pk()}}finally{this.j4t()}}w4t(){this.TJ&&(this.A4t.z4t(!1),this.E4t(!0).catch(this.s8))}zk(){this.TJ&&(this.A4t.z4t(!0),this.E4t(!1).catch(this.s8))}gn(){this.zQ.Ty(),this.A4t.fn(v1.O0t,this.B4t),this.Bo(),this.j4t()}constructor(t,i,e,s){super(),this.dV=void 0,this.Za=void 0,this.ta=void 0,this.Ea=Dt.UNAVAILABLE,this.M4t=!1,this.zQ=new Wt,this.U4t=()=>{this.A4t.yn(v1.O0t,this.B4t),this.$gt=this.A4t.Q4t()},this.B4t=t=>{const i=t.$gt;this.$gt=i,i!==Dt.UNAVAILABLE&&i!==Dt.AVAILABLE||this.E4t(!1).catch(this.s8)},this.V2t=void 0,this.s8=t=>{Tu(t)||t instanceof ws&&(this.dV=t,this.yo(new c2(t).ga))},this.LK=t,this.b4t=i,this.A4t=s,this.KS=e.chromecast,this.S4t=Vh(this.A4t.FK(this.KS,this.zQ.ly),this.zQ),this.S4t.then(this.U4t).catch(this.s8)}};r(),Qi();var _2=class extends gs{get TJ(){return!1}get lt(){}get _4t(){}get kc(){}set kc(t){}get $gt(){return Dt.UNAVAILABLE}get ga(){return this.Za||(this.Za=f2(this)),this.Za}v4t(){Fe.uA("Joining a Chromecast session is not possible when JoinStrategy is configured to disabled")}w4t(){Fe.uA("Leaving a Chromecast session is not possible when JoinStrategy is configured to disabled")}Cn(){Fe.uA("Starting a Chromecast session is not possible when JoinStrategy is configured to disabled")}zk(){Fe.uA("Stopping a Chromecast session is not possible when JoinStrategy is configured to disabled")}x4t(){return Promise.resolve()}gn(){}};function v2(t){return{bt:t.bt,xE:t.LE(),ct:t._d(),OE:t.OE,lt:t.PE(),zE:t.BE(),WE:t.WE,KE:t.KE,$E:t.$E,fk:t.fk,wk:t.wk,yk:t.yk,Tk:t.Tk,Nk:t.Nk}}r(),r();var Or=class extends Xt{Vnt(){return this.Dc}AE(){return this.Oz}get UE(){return this.QE()}QE(){return this.Rz}_a(){return this.jz}Ak(){return this.Ul}Mk(){return this.Pz}switchContexts(t){this.ta=t,this.Oz.xx=t.ht,this.Pz.xx=t.rt,this.Ul.xx=t.nt,this.jz.xx=t.LV,this.Rz.xx=t.UE,this.Dc.xx=t.Vc}F4t(t){this.ta!==t&&(this.bG(),this.switchContexts(t),this.yG())}zz(t){if(this.ta===t)return;let i;this.bG(),this.qnt&&(i=v2(this));const e=this.kE(),s=this.Ck(),n=this.jk();if(this.switchContexts(t),void 0!==i){IS(this,i,v2(this))}const r=this.kE();r!==e&&this.yo(new ES(r)),this.Ck()!==s&&this.yo(new kS),this.jk()!==n&&this.yo(new Bu),this.yG()}async gn(t){await super.gn(t),this.jz.gn(t),this.Oz.gn(t),this.Pz.gn(t),this.Ul.gn(t),this.Rz.gn(),await this.Dc.gn(t)}constructor(t,i){super(t,i),this.Oz=new tl,this.Pz=new tl,this.Ul=new Ce,this.Rz=new ct,this.jz=new CS(t.LV),this.Oz.xx=t.ht,this.Pz.xx=t.rt,this.Ul.xx=t.nt,this.Rz.xx=t.UE,this.Dc=new pB(this),this.Dc.xx=t.Vc}},w2=class extends Or{Ya(){const t=super.Ya();return!t&&this.Y4t.TJ&&this.Y4t.kc?this.Y4t.kc:t}ka(t,i){return this.Go.Wo((i=>(this.V4t=new Wt,this.V4t.Sy(i),Vh(super.ka(t,this.V4t.ly),this.V4t))),i)}Pk(){super.Pk(),this.md.cast.strategy!==PM.AUTO||this.Y4t.TJ||this.Y4t.x4t()}C4t(t){return this.Go.Wo((i=>this.G4t(t,i)))}P4t(t,i){return void 0===t&&(t=void 0),void 0===i&&(i=!1),this.Go.Wo((e=>this.W4t(t,i,e)))}G4t(t,i){yi(i),this.Z4t.Vc&&this.Z4t.Vc.wrt(t.Vc),this.H4t(),this.X4t=dl(this.Z4t.ht.Ix,(t=>t.Rt)),this.zIt=dl(this.Z4t.nt.Ix,(t=>"showing"===t.UI)),this.q4t=dl(this.Z4t.rt.Ix,(t=>t.Rt)),this.K4t=t,this.K4t.n4t(this.X4t,this.zIt,this.q4t),this.zz(t),this.K4t.ur()}async W4t(t,i,e){yi(e);const s=this.K4t;if(void 0!==s)try{if(t){await this.Z4t.zk(),yi(e);const s=Hc(t,this.Z4t.md);i&&(s.ads=void 0),this.V4t=new Wt,this.V4t.Sy(e),await Vh(this.Z4t.ka(s,this.V4t.ly),this.V4t)}i&&this.Z4t.Vc&&s.Vc.wrt(this.Z4t.Vc)}catch(t){Ct(t)}finally{s.ar(),this.zz(this.Z4t),this.X4t=dl(this.K4t.ht.Ix,(t=>t.Rt)),this.zIt=dl(this.K4t.nt.Ix,(t=>"showing"===t.UI)),this.q4t=dl(this.K4t.rt.Ix,(t=>t.Rt)),this.Z4t.ht.yn(bs.Hk,this.J4t),this.Z4t.nt.yn(bs.Hk,this.$4t),this.Z4t.rt.yn(bs.Hk,this.t3t),this.Z4t.yn(E.nP,this.H4t),this.K4t===s&&(this.K4t=void 0)}}zk(){var t;return this.X4t=void 0,this.zIt=void 0,this.q4t=void 0,this.H4t(),null==(t=this.V4t)||t.Ty(),this.Go.Wo((()=>super.zk()))}async gn(){var t;null==(t=this.V4t)||t.Ty(),this.Y4t.gn(),await this.P4t(),await this.Go.gn(),await super.gn()}constructor(t,i){super(t),this.Go=new La,this.X4t=void 0,this.zIt=void 0,this.q4t=void 0,this.J4t=t=>{const i=t.Ht;m2(this.X4t,i)&&(i.Rt=!0)},this.$4t=t=>{const i=t.Ht;m2(this.zIt,i)&&(i.UI=lc.Jn)},this.t3t=t=>{const i=t.Ht;m2(this.q4t,i)&&(i.Rt=!0)},this.H4t=()=>{this.Z4t.ht.fn(bs.Hk,this.J4t),this.Z4t.nt.fn(bs.Hk,this.$4t),this.Z4t.rt.fn(bs.Hk,this.t3t)},this.Z4t=t,this.md.cast.strategy!==PM.DISABLED?this.Y4t=new g2(this,t,this.md.cast,i):this.Y4t=new _2,this.qZ.xJ(this.Y4t)}};function m2(t,i){return void 0!==t&&void 0!==i&&(t.gs===i.gs&&i.kh===t.kh)}r(),ds();var p2=new class extends tu{m4t(t){this.i3t=t}p4t(){return this.i3t}y4t(){return this.e3t}Q4t(){switch(this.s3t.getCastState()){case cast.framework.CastState.CONNECTED:return Dt.CONNECTED;case cast.framework.CastState.CONNECTING:return Dt.CONNECTING;case cast.framework.CastState.NOT_CONNECTED:return Dt.AVAILABLE;case cast.framework.CastState.NO_DEVICES_AVAILABLE:default:return Dt.UNAVAILABLE}}async FK(t,i){await U$(i),this.s3t=cast.framework.CastContext.getInstance(),this.s3t.addEventListener(cast.framework.CastContextEventType.CAST_STATE_CHANGED,this.LJ),this.s3t.setOptions({receiverApplicationId:t.appID,autoJoinPolicy:chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED})}async N4t(){try{const t=await this.s3t.requestSession();if(t)throw t}catch(t){throw new ws(Xr(t))}}D4t(t){var i;return null==(i=this.i3t)?void 0:i.onStart(t)}R4t(t){var i;return null==(i=this.i3t)?void 0:i.onStop(t)}k4t(t){var i;return null==(i=this.i3t)?void 0:i.onJoin(t)}O4t(t){var i;return null==(i=this.i3t)?void 0:i.onLeave(t)}z4t(t){this.s3t.endCurrentSession(t)}constructor(...t){super(...t),this.e3t=void 0,this.i3t=void 0,this.LJ=()=>{const t=this.Q4t();this.e3t=t===Dt.CONNECTED?new g1(this.s3t.getCurrentSession()):void 0,this.yo(new w1(t))}}},A2=new class{get ga(){return this.Za||(this.Za=function(t){return{initialize(i){const e=t.FK(zM(i));return e.catch(ya),e},startSession(){const i=t.N4t();return i.catch(ya),i},endSession(){t.n3t()}}}(this)),this.Za}async FK(t){this.S4t||(this.S4t=this.r3t(t)),await this.S4t}async r3t(t){await this.A4t.FK(t)}async N4t(){if(!this.S4t)throw new b("Chromecast must be initialized before starting a session");await this.S4t,this.A4t.y4t()||await this.A4t.N4t()}o3t(){this.A4t.z4t(!1)}n3t(){this.A4t.z4t(!0)}constructor(t){this.S4t=void 0,this.Za=void 0,this.A4t=t}}(p2),y2={get chromecast(){return A2.ga}};Mr((t=>new w2(t,p2)),F.$nt),r(),r(),r(),r(),r(),r(),r();var b2=class{h3t(t,i,e,s){t.qG.forEach((t=>{if(!this.a3t(t.u3t)){const n=t.c3t(i,e,s);n&&this.l3t(n)}}))}a3t(t){return this.d3t.get(t)}l3t(t){this.d3t.set(t.f3t,t),this.g3t.set(t.f3t,t._3t),this.v3t.iu(t.w3t)}mrt(t){this.g3t.has(t.f3t)||(this.g3t.set(t.f3t,t),this.v3t.iu(t.w3t))}m3t(t){return this.g3t.forEach(t)}p3t(t){return this.d3t.forEach(t)}A3t(t){let i=!1;return this.d3t.forEach((e=>{i=e.A3t(t)||i})),i}async gn(){const t=[];this.d3t.forEach((i=>t.push(i.gn()))),this.g3t.forEach((i=>t.push(i.gn()))),await Promise.all(t),this.d3t.clear(),this.g3t.clear()}constructor(t){this.v3t=t,this.d3t=ll(),this.g3t=ll()}};r();var mc=class t extends ua{ma(){return new M2(this.xJt,this.Pb,this.oM,this.kc)}static y3t(i){return new t(nn.GENERAL,i.Pb,i.CJt)}static b3t(i,e){return new t(i.xJt,i.message,i.CJt,e)}constructor(t,i,e,s){super("yOt"),this.xJt=t,this.Pb=i,this.oM=e,this.kc=s}},M2=class extends Jr{constructor(t,i,e,s){super("aderror"),this.problemType=t,this.message=i,this.errorCode=e,this.source=s}};Qi();var T2=class extends Yt{get M3t(){return this.T3t}get $c(){let t=!1;return this.S3t((i=>{t=t||i.N3t})),t}get lrt(){const t=[];return this.S3t((i=>{const e=i.lrt;e.length&&t.push(...e)})),t}get frt(){let t=null;return this.S3t((i=>{null!=t||(t=i.frt)})),t}get grt(){const t=[];return this.S3t((i=>{t.push(...i.grt)})),t}get _rt(){const t=[];return this.S3t((i=>{t.push(...i._rt)})),t}wrt(t){this.S3t((i=>{i.wrt(t)}))}get Hnt(){}get ga(){var t;return null!=(t=this.Za)?t:this.Za=sB(this)}D9(t,i,e){try{this.I3t=e;const s=oc.Ld.JG(t);if(s.u3t===ah.Jnt)return;const n=this.T3t.a3t(s.u3t);if(!n)throw new Ie(nn.ADBLOCK,void 0,"Ads could not be loaded.");i!==eB.crt&&this.n7||this.E3t.D3t(n),s.D9(t,i,n,this.I3t)}catch(i){0,this.yo(mc.b3t(i,t.sources))}}ZC(){this.S3t((t=>{t.ZC()}))}mrt(t){this.T3t.mrt(t)}vrt(t,i){return this.E3t.vrt(t,i)}k3t(t){this.T3t.p3t((i=>{i.k3t(t)}))}A3t(t){return this.T3t.A3t(t)}S3t(t){return this.T3t.m3t(t)}Ok(){this.T3t.p3t((t=>t.Ok()))}async tr(){this.n7=!1;const t=[];this.T3t.p3t((i=>t.push(i.zk()))),await Promise.all(t)}async gn(){this.Bo(),await this.T3t.gn(),this.E3t.fn(Zi.so,this.Gst),this.fn("yOt",this.x3t)}constructor(t){super(),this.I3t=!1,this.n7=!1,this.Za=void 0,this.x3t=t=>{if(!this.I3t)return;const i=new RS(lt.ADVERTISEMENT_ERROR,t.Pb),e=new qi(vt.AD_BLOCKER_DETECTED,t.Pb+" Turn off your AdBlocker and try again.",i);this.E3t.eG(e)},this.Gst=()=>{this.n7=!0},this.E3t=t,this.T3t=new b2(this),this.yn("yOt",this.x3t),t.yn(Zi.so,this.Gst)}};Qi(),r(),r(),r();var S2=class extends j1{get Vc(){return this.Dc}get t1t(){return this.L3t}set t1t(t){this.L3t=t}get i1t(){return this.C3t}set i1t(t){this.C3t=t}set fBt(t){this.b$t=t}get fBt(){return this.b$t}get E0t(){return this.j3t}O3t(){this.R3t=!0}P3t(t){this.Dc.push(t),this.R3t=!1}z3t(t){ra(this.Dc,t)}get rk(){return this.R3t}constructor(t){super(),this.b$t=t,this.Dc=[],this.L3t=-1,this.C3t=-1,this.j3t=void 0,this.R3t=!1}},N2=class extends S2{get m$t(){return this.B3t}get grt(){return this.U3t}Yn(t){void 0!==t.maxDuration&&(this.L3t=t.maxDuration),void 0!==t.customData&&(this.j3t=t.customData)}Q3t(t){const i=this.Dc.indexOf(t);return i>=0&&i<this.Dc.length-1}P3t(t){super.P3t(t),this.U3t.push(t)}F3t(t){ra(this.U3t,t)}z3t(t){super.z3t(t),ra(this.U3t,t)}constructor(t,i){super(i.timeOffset),this.U3t=[],this.B3t=t,this.Yn(i)}};r(),r();var Qo=function(t){return t.VJt="linear",t.Y3t="nonlinear",t.dI="unknown",t}({}),I2=function(t){return t.NONE="none",t.READY="ready",t}({}),D2=class extends C1{V3t(t,i,e,s,n,r){this.aS=t,this.dT=i,this.fT=e,this.JM=s,this.Uqt=n,this.PKt=r,this.G3t="ready"}get W3t(){return this.G3t}get Bqt(){return this.Uqt}get ct(){return this.JM}drt(){var t;return null!=(t=this.Za)?t:this.Za=this.ma()}get Ti(){return this.fT}get o(){return this.aS}get RKt(){return this.PKt}get ji(){return this.dT}get Z3t(){return this.H3t}get oKt(){return this.hKt}get kqt(){return this.xqt}get vqt(){return this.xKt}get E0t(){return this.j3t}get X3t(){return this.q3t}w1t(){}y1t(){return""}A1t(){return this.K3t}constructor(t,i){super(),this.H3t=i,this.aS=void 0,this.PKt=void 0,this.dT=void 0,this.fT=void 0,this.JM=void 0,this.xKt=[],this.Uqt=[],this.G3t="none",this.j3t=void 0,this.q3t=!1,this.Yl=t}};function Kr(t){return{get adSystem(){return t.w1t()},get readyState(){return t.W3t},get adBreak(){return t.Yl.drt()},get duration(){return t.ct},get companions(){return t.Bqt.map((t=>t.ga))},get resourceURI(){return t.A1t()},get clickThrough(){return t.oKt},get width(){return t.ji},get type(){return function(t){switch(t){case"linear":case"unknown":return"linear";case"nonlinear":return"nonlinear"}}(t.Z3t)},get height(){return t.Ti},get id(){return t.o},get skipOffset(){return t.RKt},get integration(){return t.m$t},get creativeId(){return t.kqt},get universalAdIds(){return t.vqt},get customData(){return t.E0t},get isSlate(){return t.X3t}}}r();var E2=class{get Kqt(){return this.Jqt}get nKt(){return this.rKt}get J3t(){return this.$3t}get oKt(){return this.hKt}get Ti(){return this.fT}get pJt(){return this.K3t}get ji(){return this.dT}get ga(){var t;return null!=(t=this.Za)?t:this.Za=function(t){return{get adSlotId(){return t.Kqt},get altText(){return t.nKt},get contentHTML(){return t.J3t},get clickThrough(){return t.oKt},get height(){return t.Ti},get resourceURI(){return t.pJt},get width(){return t.ji}}}(this)}t5t(t){if(t.oKt&&t.pJt)return;const i=function(t){try{return p0(t,"text/html")}catch(t){return}}(t.J3t);i&&(this.hKt=k2(i,"a","href"),this.K3t=k2(i,"img","src"))}constructor(t){var i;this.Za=void 0,this.hKt=void 0,this.K3t=void 0,this.Jqt=t.Kqt,this.dT=t.ji,this.fT=t.Ti,this.$3t=t.J3t,this.hKt=t.oKt,this.K3t=t.pJt,this.rKt=null!=(i=t.nKt)?i:"",this.t5t(t)}};function k2(t,i,e){const s=t.querySelector(i);return s&&s.getAttribute(e)||""}var x2=class extends D2{get m$t(){return this.B3t}get i5t(){return this.e5t}set i5t(t){this.e5t=t}ma(){return Kr(this)}Yn(t){t.id&&(this.aS=t.id),void 0!==t.skipOffset&&(this.PKt=t.skipOffset),void 0!==t.width&&(this.dT=t.width),void 0!==t.height&&(this.fT=t.height),void 0!==t.duration&&(this.JM=t.duration),void 0!==t.readyState&&(this.G3t=function(t){return"ready"===t?I2.READY:I2.NONE}(t.readyState)),void 0!==t.resourceURI&&(this.K3t=t.resourceURI),void 0!==t.clickThrough&&(this.hKt=t.clickThrough),void 0!==t.companions&&(this.Uqt=[...t.companions].map(L2)),void 0!==t.creativeId&&(this.xqt=t.creativeId),void 0!==t.universalAdIds&&(this.xKt=t.universalAdIds),void 0!==t.customData&&(this.j3t=t.customData)}constructor(t,i,e){super(e,function(t){return"linear"===t?Qo.VJt:"nonlinear"===t?Qo.Y3t:Qo.dI}(i.type)),this.e5t=0,this.B3t=t,this.Yn(i)}};function L2(t){const i={Kqt:t.adSlotId,nKt:t.altText,J3t:t.contentHTML,VN:void 0,oKt:t.clickThrough,Ti:t.height,pJt:t.resourceURI,ji:t.width};return new E2(i)}r();var fh=class extends uB{ma(){return new C2(this.yrt.drt(),this.s5t)}get s5t(){return this.n5t}constructor(t,i){super("pOt",t),this.n5t=i}},C2=class extends Sl{constructor(t,i){super("adskip",t),this.playedPercentage=i}};r();var j2=class extends rB{ma(){return new O2(this.Yl.drt())}constructor(t){super("r5t",t)}},O2=class extends oB{constructor(t){super("updateadbreak",t)}};r();var R2=class extends rB{ma(){return new P2(this.Yl.drt())}constructor(t){super("o5t",t)}},P2=class extends oB{constructor(t){super("adbreakchange",t)}};ds(),r();var z2=class extends uB{ma(){return new B2(this.yrt.drt(),this.currentTime)}constructor(t,i){super("h5t",t),this.currentTime=i}},B2=class extends Sl{constructor(t,i){super("adfirstquartile",t),this.currentTime=i}};r();var U2=class extends uB{ma(){return new Q2(this.yrt.drt(),this.currentTime)}constructor(t,i){super("a5t",t),this.currentTime=i}},Q2=class extends Sl{constructor(t,i){super("admidpoint",t),this.currentTime=i}};r();var F2=class extends uB{ma(){return new Y2(this.yrt.drt(),this.currentTime)}constructor(t,i){super("u5t",t),this.currentTime=i}},Y2=class extends Sl{constructor(t,i){super("adthirdquartile",t),this.ad=t,this.currentTime=i}},V2=class{get Vc(){return this.Dc}get n1t(){return this.E1t}get ga(){var t;return null!=(t=this.Za)?t:this.Za=function(t){return{get integration(){return t.m$t},get ads(){return t.Vc.map((t=>t.drt()))},get adBreaks(){return t.n1t.map((t=>t.drt()))},createAd:(i,e)=>t.c5t(i,e?t.l5t(e):void 0).drt(),updateAd(i,e){t.d5t(t.f5t(i),e)},updateAdProgress(i,e){const s=ur(Number(e),0,1);t.g5t(t.f5t(i),s)},beginAd(i){t.F3t(t.f5t(i))},endAd(i){t._5t(t.f5t(i))},skipAd(i){t.t0t(t.f5t(i))},removeAd(i){t.z3t(t.f5t(i))},createAdBreak:i=>t.v5t(i).drt(),updateAdBreak(i,e){t.w5t(t.l5t(i),e)},removeAdBreak(i){t.m5t(t.l5t(i))},removeAllAds(){t.p5t()},error(i){t.A5t(i)},fatalError(i,e){const s=e?Number(e):void 0;t.y5t(i,s)}}}(this)}get Zj(){return this.h8}set Zj(t){this.h8=t}get N3t(){return this.b5t.some((t=>t.Z3t===Qo.VJt))}get f3t(){return this.m$t}get lrt(){return this.b5t}get frt(){var t;return null!=(t=this.D1t)?t:null}get grt(){return Ms(this.E1t,(t=>t.grt))}get _rt(){return this.E1t.filter((t=>!t.rk))}ZC(){var t;if(0===this.b5t.length)return;const i=this.b5t[0];(null==(t=this.h8)?void 0:t.skipAd)?this.h8.skipAd(i.drt()):this.t0t(i)}wrt(t){}c5t(t,i){var e;const s=null!=i?i:this.M5t({timeOffset:null!=(e=t.timeOffset)?e:0}),n=new x2(this.m$t,t,s);return s.P3t(n),this.Dc.push(n),this.w3t.yo(new cB(n)),n}d5t(t,i){t.Yn(i),this.w3t.yo(new xl(t))}g5t(t,i){if(!Qa(this.b5t,t))throw new b("Cannot update ad progress on a non-started ad");const e=t.i5t,s=x.max(e,i);t.i5t=s;const n=this.E3t.LE();e<.25&&s>=.25&&this.w3t.yo(new z2(t,n)),e<.5&&s>=.5&&this.w3t.yo(new U2(t,n)),e<.75&&s>=.75&&this.w3t.yo(new F2(t,n))}F3t(t){Qa(this.b5t,t)||(this.b5t.push(t),t.Yl.F3t(t),this.T5t(t.Yl),this.w3t.yo(new gB(t,this.E3t.LE())))}t0t(t){if(!Qa(this.b5t,t))return;const i=t.Yl.Q3t(t);this.w3t.yo(new fh(t,t.i5t)),this.S5t(t,i)}_5t(t){if(!Qa(this.b5t,t))return;const i=t.Yl.Q3t(t);this.w3t.yo(new wu(t,this.E3t.LE())),this.S5t(t,i)}z3t(t){if(!Qa(this.Dc,t))return;const i=t.Yl.Q3t(t);ra(this.Dc,t),t.Yl.z3t(t),this.w3t.yo(new R2(t.Yl)),this.S5t(t,i)}v5t(t){const i=new N2(this.m$t,t);return this.E1t.push(i),this.w3t.yo(new Pr(i)),i}w5t(t,i){t.Yn(i),this.w3t.yo(new j2(t))}m5t(t){if(Qa(this.E1t,t)){for(const i of t.Vc.slice())this.z3t(i);ra(this.E1t,t),this.w3t.yo(new Ar(t))}}p5t(){for(const t of this.E1t.slice())this.m5t(t)}A5t(t){this.w3t.yo(new mc(nn.GENERAL,t.message))}y5t(t,i){const e=new qi(null!=i?i:vt.AD_ERROR,t.message,t);this.E3t.eG(e)}N5t(t){return dl(this.E1t,(i=>i.fBt===t))}M5t(t){var i;return null!=(i=this.N5t(t.timeOffset))?i:this.v5t(t)}S5t(t,i){ra(this.b5t,t);const e=t.Yl;0!==this.b5t.length||this.D1t!==e||i||(e.O3t(),this.T5t(void 0))}T5t(t){this.D1t!==t&&(void 0!==this.D1t&&this.w3t.yo(new hc(this.D1t)),this.D1t=t,void 0!==t&&this.w3t.yo(new Qt(t)))}f5t(t){const i=dl(this.Dc,(i=>i.drt()===t));if(void 0===i)throw new b('Invalid ad for integration "'+this.m$t+'"');return i}l5t(t){const i=dl(this.E1t,(i=>i.drt()===t));if(void 0===i)throw new b('Invalid ad break for integration "'+this.m$t+'"');return i}async ka(t,i){var e;if(yi(i),null==(e=this.h8)?void 0:e.setSource){let i=await Promise.resolve(this.h8.setSource(t));return gr(i)&&(i=t),Hc(i,this.E3t.md)}return t}async I5t(){var t;(null==(t=this.h8)?void 0:t.resetSource)?await Promise.resolve(this.h8.resetSource()):this.p5t()}async gn(){var t;(null==(t=this.h8)?void 0:t.destroy)&&await Promise.resolve(this.h8.destroy()).catch(ya),this.p5t(),this.T5t(void 0),this.h8=void 0,this.w3t.gn()}constructor(t,i){this.w3t=new Yt,this.Dc=[],this.E1t=[],this.b5t=[],this.m$t=t,this.E3t=i}};ds(),r();var G2=class{destroy(){this.removeAdListeners()}get player(){return this.ta}set player(t){this.ta&&this.removeAdListeners(),this.ta=t,this.addAdListeners()}get inAdBreak(){return this.D5t}addAdListeners(){var t,i;null==(t=this.ta.Vc)||t.yn("Trt",this.xd),null==(i=this.ta.Vc)||i.yn("Mrt",this.Cd)}removeAdListeners(){var t,i;null==(t=this.ta.Vc)||t.fn("Trt",this.xd),null==(i=this.ta.Vc)||i.fn("Mrt",this.Cd)}constructor(t){this.K8=void 0,this.D5t=!1,this.xd=t=>{1!==this.ta.$E&&(this.K8=this.ta.$E,this.ta.$E=1),this.D5t=!0},this.Cd=t=>{this.D5t=!1,void 0!==this.K8&&(this.ta.$E=this.K8,this.K8=void 0)},this.ta=t,this.addAdListeners()}},W2=class extends Or{Vnt(){return this.E5t}get k5t(){return this.x5t}Ok(){this.Z4t.Ok(),this.E5t.Ok()}Pk(){void 0===this.dV?(void 0!==this.L5t&&this.C5t(this.L5t),super.Pk()):this.yo(new Uc(this.dV))}async ka(t,i){yi(i);let e=t;if(e)for(const t of this.j5t)e=await t.ka(e,i);if(await super.ka(e,i),yi(i),null==e?void 0:e.ads){const t=Boolean(e.blockContentIfAdError);this.E5t.k3t(e.playAdsAfterTime);for(const i of e.ads)this.E5t.D9(i,eB.crt,t)}}async zk(){this.dV=void 0,this.ZG=void 0,await this.E5t.tr(),this.P4t(),await super.zk();for(const t of this.j5t)await t.I5t()}C5t(t){this.O5t=this.ta.$E;const i=this.ta.Nk,e=this.ta.WE;t.Dk(i),t.HE(e),this.x5t=t,this.L5t=void 0,this.zz(t)}D3t(t){void 0===this.x5t&&(this.L5t=t)}P4t(){this.L5t=void 0,void 0!==this.x5t&&(this.Z4t.$E=this.O5t,this.Z4t.Nk=this.Nk,this.Z4t.WE=this.WE,this.zz(this.Z4t),this.x5t=void 0)}PE(){var t;return null!=(t=this.ZG)?t:super.PE()}BE(){var t;return null!=(t=this.dV)?t:super.BE()}eG(t){void 0===this.BE()&&(this.dV=t,this.ZG=la(t),this.yo(new Uc(t)))}Gk(t){return void 0===this.x5t&&this.E5t.A3t(t)}vrt(t,i){try{const e=new V2(t,this);e.Zj=i(e.ga),this.E5t.mrt(e),this.j5t.push(e),t!==pi.UPLYNK&&(this.R5t=new G2(this))}catch(i){this.E5t.yo(new mc(nn.GENERAL,'Error while constructing ad integration "'+t+'": '+i+'"'))}}nk(t){var i;(null==(i=this.R5t)?void 0:i.inAdBreak)||super.nk(t)}async gn(){var t;for(const t of this.j5t)await t.gn().catch(ya);await this.E5t.gn(),this.P4t(),null==(t=this.R5t)||t.destroy(),this.R5t=void 0,await super.gn()}constructor(t,i){super(t),this.j5t=[],this.dV=void 0,this.ZG=void 0,this.O5t=1,this.Z4t=t,this.E5t=new T2(this),this.E5t.M3t.h3t(i,t,this,t.md)}};Mr((t=>new W2(t,oc.Ld)),F.Knt),r(),r(),r(),il(),Qi();var Z2=0!==Ro.Jf?Ro.Jf:Ro.nf,H2=Ro.Ka&&Z2<12,X2=class extends Xt{get xE(){return this.LE()}set xE(t){this.CE(t)}jnt(){return this.ta.jnt()}get ct(){return this._d()}get UE(){return this.Rz}get _k(){return this.vk()}get Ek(){return this.mV}get w3t(){return this.P5t}get ht(){return this.Oz}get N3t(){return this.E3t.k5t===this}SE(){return Mo.PP().ks()}DE(){}EE(t){}ek(){return 1}nk(t){}hk(){return new Mo([0,this.xE]).ks()}pk(){return!1}Ak(){return this.Ul}Mk(){return this.Pz}cs(){return this.Ck().cs}Ck(){return this.Zo}Sa(){}async gn(){this.Bo(),this.Oz.gn(),this.Pz.gn(),this.Ul.gn(),this.P5t.gn(),this.ta.fn(Zi.Gy,this.Ds)}z5t(){H2&&this.B5t(),this.N3t||this.E3t.C5t(this)}P4t(){this.N3t&&(H2&&this.U5t(),Ro.Sg&&this.we.querySelectorAll("video[src]").forEach((t=>{t.src=""})),Fe.Ys.Op&&this.ta.Yk(),this.E3t.P4t())}B5t(){this.Q5t||(gi.addEventListener("blur",this.F5t),gi.addEventListener("focus",this.Y5t),this.Q5t=!0)}U5t(){gi.removeEventListener("blur",this.F5t),gi.removeEventListener("focus",this.Y5t),this.Q5t=!1}V5t(){requestAnimationFrame((()=>this.ta.be()))}constructor(t,i){super(t,!0),this.E3t=i,this.Q5t=!1,this.Pz=new pe,this.Oz=new pe,this.Ul=new Cc,this.Rz=new LM,this.P5t=new Yt,this.Zo=new ut,this.mV=new Qu,this.F5t=()=>{this.ta.ge()},this.Y5t=()=>{this.V5t()},this.ta.yn(Zi.Gy,this.Ds)}};r(),r(),Qi();var q2=0,K2="theoplayer-wrapper",J2=class t{get G5t(){return this.W5t}get Z5t(){return this.H5t}get X5t(){return 1===this.H5t.length&&$0(this.H5t[0].sources.type)}get q5t(){return this.K5t}J5t(t){const i=this.$5t===t.timeOffset;return!this.t6t&&i}get i6t(){return this.e6t}get s6t(){return s1(this.n6t)&&!this.t6t}get $5t(){return this.n6t}get sd(){return this.r6t}o6t(){if(j(this.r6t)){let t=this.$5t;if(void 0===t)return void(this.r6t=0);if("string"==typeof t&&s1(t)){const i=this.ta._d();j(i)||i===1/0||(t=$$(t)*i)}j(t)||(this.r6t=t)}}get h6t(){return this.a6t}set h6t(t){this.a6t=t}get u6t(){return this.c6t}set u6t(t){this.c6t=t,this.l6t=!1}get d6t(){return this.f6t}g6t(t){this.f6t.push(t)}_6t(){if(!this.t6t){let t,i,e=this.W5t===eB.crt&&void 0===this.v6t&&1===this.H5t.length;const s=this.H5t[0];if(!e&&1===this.H5t.length){const t=Fe.Ah(s.sources.src).searchParams.get("output");t&&t.toLowerCase().indexOf("vmap")>-1&&(e=!0,void 0!==this.v6t&&Bi("Do not set a timeOffset for VMAP ad sources. VMAP ads have their own offsets included."))}if($0(s.sources.type)||e)t=s.sources.src;else{if(j(this.ta._d())&&"end"===this.w6t())return;i=this.m6t()}let n=this.ta._d();(j(n)||n===1/0)&&(n=-3),this.t6t={p6t:this.ta.we.offsetWidth,A6t:this.ta.we.offsetHeight,y6t:this.ta.we.offsetWidth,b6t:this.ta.we.offsetHeight,M6t:this.Nnt,T6t:this.xG,S6t:t,N6t:i,I6t:s.omidAccessModeRules,D6t:n}}return this.t6t}m6t(){return'<vmap:VMAP xmlns:vmap="http://www.iab.net/videosuite/vmap" version="1.0">'+this.H5t.map(((t,i)=>this.E6t(t.sources,i))).join("\n")+"</vmap:VMAP>"}E6t(t,i){const e=this.w6t(),s=t.src;return'<vmap:AdBreak timeOffset="'+e+'" breakType="linear,nonlinear" breakId="theoplayer-break-'+this.Gx+"-"+i+'"><vmap:AdSource allowMultipleAds="true" followRedirects="true"><vmap:VASTAdData><VAST version="3.0"><Ad id="'+K2+"-"+this.Gx+"-"+i+'"><Wrapper allowMultipleAds="true" followAdditionalWrappers="true"><VASTAdTagURI><![CDATA['+s+"]]></VASTAdTagURI></Wrapper></Ad></VAST></vmap:VASTAdData></vmap:AdSource></vmap:AdBreak>"}w6t(){if(0===this.$5t)return"start";if(this.$5t===1/0)return"end";const t=this.$5t;if("string"==typeof t&&s1(t)){const i=$$(t)*this.ta._d();return Yc._$t(i)}return Yc._$t(this.$5t||0)}k6t(t){this.H5t.push(t)}x6t(t){const i=K2+"-"+this.Gx+"-";for(const e of t)if(Et(e,i)){const t=Number(e.slice(i.length));if(!j(t)&&t>=0&&t<this.H5t.length)return t}return-1}static L6t(t){if(void 0!==t)return-1===t?1/0:t}C6t(){this.e6t=!0}get Xz(){return this.Nnt}set Xz(t){this.Nnt=t}get WE(){return this.xG}set WE(t){this.xG=t}constructor(i,e,s,n){this.W5t=e,this.ta=s,this.K5t=n,this.r6t=NaN,this.a6t=!1,this.c6t=!1,this.e6t=!1,this.f6t=[],this.Nnt=!1,this.xG=!1,this.H5t=[],this.Gx=++q2,this.v6t=i.timeOffset,this.n6t=t.L6t(this.v6t),this.o6t(),this.H5t.push(i)}};r();var $2=class{get j6t(){return this.O6t.j6t}get R6t(){return this.O6t.R6t}get grt(){return this.O6t.grt}get t(){return this.O6t.t}k3t(t){this.P6t=t}z6t(t){return!(this.j6t&&!this.j6t.i6t&&"nonlinear"!==this.R6t.Z3t)||this.j6t.sd>t.sd&&this.j6t.sd!==t.sd}B6t(t){if(t.length)return t.sort(((t,i)=>t.sd-i.sd))[0]}U6t(){if(this.grt.length)return this.B6t(this.Q6t(this.t.LE()))}F6t(){if(!(void 0!==this.P6t&&this.P6t>=0))return this.grt.filter((t=>!t.h6t&&0===t.sd&&t!==this.j6t))[0]}Q6t(t){if(!this.Y6t&&(this.Y6t=!this.grt.some((t=>j(t.sd))),!this.Y6t))return[];const i=this.grt.filter((i=>!i.h6t&&(i.X5t||!j(i.sd)&&t<=i.sd)));return void 0===this.P6t?i:i.filter((t=>t.X5t||void 0===t.$5t||t.sd>this.P6t))}constructor(t){this.Y6t=!1,this.O6t=t,this.P6t=void 0}};Qi();var t4=function(t){return t[t.V6t=0]="V6t",t[t.G6t=1]="G6t",t[t.W6t=2]="W6t",t}({}),i4=class{Ok(){this.do=!0,this.Z6t&&this.H6t()}X6t(t,i){this.q6t(t,i);const e=dl(this.grt,(i=>i.J5t(t)));if(e)e.k6t(t);else{var s;const e=new J2(t,i,this.ta,null==(s=t.replaceContent)||s);this.U3t.push(e),2===this.K6t&&this.J6t.v5t(e.sd,e,e.$5t),this.$6t(i,e)}}get R6t(){return this.t9t}get grt(){return this.U3t}get t(){return this.ta}get tZt(){return Boolean(this.Cpt)}get K6t(){return this.i9t}e9t(){if(ra(this.grt,this.j6t),this.j6t){for(const t of this.j6t.d6t)this.J6t.s9t();this.j6t=void 0}}n9t(){for(const t of this.U3t)for(const i of t.d6t)this.J6t.r9t(i,!0);nt(this.U3t)}async o9t(t){this.e9t(),this.h9t=!0,this.j6t=t,this.a9t=t.sd,this.Cpt=this.u9t(t),await this.Cpt,this.Cpt=void 0}async u9t(t){this.c9t(t);const i=t._6t();if(!i)return this.h9t=!1,void(this.j6t=void 0);const e=this.t9t.l9t(i);t.h6t=!0;try{await e,t.G5t===eB.urt&&this.t9t.d9t()}catch(t){0,this.j6t=void 0,await this.H6t()}}c9t(t){this.do?t.Xz=!0:t.Xz=this.E3t.Xz,t.WE=this.E3t.WE}f9t(){var t;return null!=(t=this.g9t.F6t())?t:this.g9t.U6t()}async H6t(){if(this.j6t&&!this.j6t.i6t)return this.Cpt;const t=this.f9t();t&&await this.o9t(t)}get j6t(){return this._9t}set j6t(t){this._9t=t}get h9t(){return this.v9t}set h9t(t){this.v9t=t}tr(){this.e9t(),nt(this.U3t),this.a9t=0,this.j6t=void 0,this.Cpt=void 0,this.h9t=!1}u6t(){this.h9t=!1,this.j6t&&(this.j6t.u6t=!0)}async $6t(t,i){t===eB.urt&&this.do&&this.g9t.z6t(i)&&!this.tZt&&"linear"!==this.t9t.Z3t&&(!this.j6t||this.j6t&&this.j6t.h6t)&&(await Promise.resolve(),await this.o9t(i))}C6t(){this.j6t&&this.j6t.C6t()}get w9t(){if(this.tZt||this.h9t)return!1;if(this.j6t&&!this.j6t.i6t)return!1;return!!this.U3t.filter((t=>this.j6t!==t)).length&&Boolean(this.f9t())}async m9t(){if(!this.w9t)return void 0;const t=this.f9t();t&&await this.o9t(t)}q6t(t,i){const e=t.sources.type,s=i===eB.crt&&void 0===t.timeOffset,n=$0(e)||s?1:2;n!==this.i9t&&(this.i9t=n,this.n9t(),this.t9t.e1t&&!this.tZt&&"linear"!==this.t9t.Z3t&&(this.t9t.e1t.wy(),this.j6t=void 0,this.Cpt=void 0),this.a9t=0,this.Z6t=!0)}k3t(t){this.g9t.k3t(t)}gn(){this.ta.fn(Zi.Zy,this.pZ)}constructor(t,i,e,s,n){this.i9t=0,this.Cpt=void 0,this.v9t=!1,this.pZ=()=>{const t=this.U3t.filter((t=>t.s6t));for(const i of t){i.o6t();const t=i.$5t;this.J6t.p9t(t,i.sd)}this.do&&this.w9t&&this.H6t()},this.U3t=[],this.t9t=t,this.do=!1,this.Z6t=!1,this.ta=i,this.E3t=e,this.j6t=void 0,this.a9t=0,this.g9t=new $2(this),this.Dnt=s,this.J6t=n,this.ta.yn(Zi.Zy,this.pZ)}};r(),r();var Da=function(t){return t.A9t="contentResumeRequested",t.y9t="contentPauseRequested",t.b9t="click",t.Zy="durationChange",t.M9t="expandedChanged",t.T9t="start",t.S9t="impression",t.iW="pause",t.N9t="resume",t.I9t="adProgress",t.D9t="adBuffering",t.E9t="firstQuartile",t.iJt="midpoint",t.k9t="thirdQuartile",t.eJt="complete",t.x9t="userClose",t.L9t="linearChanged",t.C9t="loaded",t.j9t="adCanPlay",t.O9t="adMetadata",t.R9t="adBreakReady",t.P9t="interaction",t.z9t="allAdsCompleted",t.B9t="skip",t.U9t="skippableStateChanged",t.Q9t="log",t.F9t="viewableImpression",t.Y9t="volumeChange",t.V9t="mute",t}({});r();var e4=function(t){return t.G9t="adError",t}({});r();var s4=function(t){return t[t.W9t=-1]="W9t",t[t.Z9t=-1]="Z9t",t[t.H9t=-1]="H9t",t[t.X9t=101]="X9t",t[t.q9t=102]="q9t",t[t.K9t=200]="K9t",t[t.J9t=201]="J9t",t[t.$9t=202]="$9t",t[t.t8t=300]="t8t",t[t.i8t=301]="i8t",t[t.e8t=302]="e8t",t[t.s8t=303]="s8t",t[t.n8t=400]="n8t",t[t.r8t=402]="r8t",t[t.o8t=403]="o8t",t[t.h8t=405]="h8t",t[t.a8t=500]="a8t",t[t.u8t=501]="u8t",t[t.c8t=-1]="c8t",t[t.l8t=503]="l8t",t[t.d8t=602]="d8t",t[t.f8t=900]="f8t",t[t.g8t=901]="g8t",t[t._8t=1005]="_8t",t[t.v8t=1007]="v8t",t[t.w8t=1009]="w8t",t[t.m8t=1010]="m8t",t[t.p8t=1011]="p8t",t[t.A8t=1012]="A8t",t[t.y8t=1013]="y8t",t[t.b8t=1020]="b8t",t[t.M8t=1021]="M8t",t[t.T8t=1101]="T8t",t[t.S8t=1204]="S8t",t[t.N8t=1205]="N8t",t[t.I8t=1300]="I8t",t[t.D8t=-1]="D8t",t[t.E8t=-1]="E8t",t[t.k8t=-1]="k8t",t[t.x8t=-1]="x8t",t}({}),n4=function(t){return t.L8t="adLoadError",t.C8t="adPlayError",t}({});function r4(t,i){if(t===Da.I9t){const t=i;return{j8t:t.adBreakDuration,O8t:t.adPosition,xE:t.currentTime,ct:t.duration,R8t:t.totalAds}}return i}function o4(t){switch(t){case google.ima.AdError.Type.AD_LOAD:return n4.L8t;case google.ima.AdError.Type.AD_PLAY:return n4.C8t}}function h4(t){return _o(t)&&dc(t.getVastErrorCode)}function a4(t){const i=t.getInnerError(),e=i&&h4(i)?a4(i):void 0;return{Pb:t.getMessage(),CJt:t.getErrorCode(),P8t:t.getVastErrorCode(),YA:o4(t.getType()),z8t:e}}function u4(t){if($t(t))return t}Qi(),r(),r();var c4=class extends tu{B8t(t){this.t9t.yo(t)}U8t(t){this.s1t=t,this.s1t.yn(e4.G9t,this.Q8t),this.s1t.yn(Da.y9t,this.F8t),this.s1t.yn(Da.A9t,this.Y8t),this.s1t.yn(Da.z9t,this.V8t),this.s1t.yn(Da.T9t,this.G8t),this.s1t.yn(Da.eJt,this.W8t),this.s1t.yn(Da.B9t,this.Z8t),this.s1t.yn(Da.x9t,this.H8t),this.s1t.yn(Da.b9t,this.X8t),this.s1t.yn(Da.j9t,this.q8t),this.s1t.yn(Da.iW,(()=>{this.t9t.KE||(this.t9t.K8t(!0),this.t9t.yo(new Zr(this.t9t.xE))),this.J8t(!0)})),this.s1t.yn(Da.N9t,(()=>{this.t9t.KE&&(this.t9t.K8t(!1),this.t9t.yo(new fi(this.t9t.xE)))})),this.s1t.yn(Da.V9t,(()=>{const i=t.Ik();i>=0&&this.$8t(i)})),this.s1t.yn(Da.Y9t,(()=>{const i=t.Ik();i>=0&&this.$8t(i)})),this.s1t.yn(Da.O9t,(t=>{this.i7t.t7t(t.type)})),this.s1t.yn(Da.Zy,(t=>{t.yrt&&this.e7t(t.yrt.ct)})),this.s1t.yn(Da.Q9t,(async t=>{const i=t.s7t.adError,e=h4(i)?a4(i):void 0;e&&(this.n7t(e)?await this.r7t(t):this.o7t(e)?await this.h7t(e):this.a7t(e)&&this.u7t(e))})),this.s1t.yn(Da.C9t,(t=>{if(t.yrt&&(this.t9t.u6t(),this.i7t.c7t(t.yrt),this.l7t=0,t.yrt.d7t)){var i;const t=this.t9t.fk,e=Fn.Nz;this.t9t.X5(e);const s=this.t9t.xE,n=this.t9t.fk;n!==t&&this.B8t(new Js(s,n)),null==(i=this.s1t)||i.Dk(this.t9t.f7t()),this.B8t(new yu(s,e))}})),this.s1t.yn([Da.D9t,Da.S9t,Da.E9t,Da.iJt,Da.k9t],(t=>{t.yrt&&this.i7t.g7t(t.yrt,t.type,this.t9t.xE)})),this.s1t.yn(Da.E9t,this._7t),this.s1t.yn(Da.I9t,this.v7t)}async switchToPlayerIfNoNextAd(){if(this.s1t){const t=this.s1t.w7t();t&&this.m7t(t)||(this.t9t.w9t()?await this.t9t.m9t():(this.t9t.p7t(),this.ta.KE&&!this.ta.OE&&this.ta.Pk()))}else if(this.t9t.w9t())await this.t9t.m9t();else{const t=this.t9t.KE;this.t9t.p7t(),t||this.ta.Pk()}}m7t(t){const i=t.A7t,e=null==i?void 0:i.R8t;return(null==i?void 0:i.O8t)!==e}fA(){this.t9t.Mc&&(m(this.t9t.Mc),this.t9t.Mc=null)}a7t(t){return t.YA===n4.L8t}o7t(t){return t.YA===n4.C8t}n7t(t){return t.CJt===s4.w8t}async h7t(t){var i;this.u7t(t);const e=[s4.n8t,s4.g8t,s4.M8t,s4.N8t];var s;this.t9t.xrt||Qa(e,t.CJt)||Qa(e,null==(i=t.z8t)?void 0:i.CJt)||(this.t9t.y7t.h9t=!1,null==(s=this.t9t.y7t.j6t)||s.C6t(),await this.switchToPlayerIfNoNextAd())}u7t(t){this.t9t.A5t(t)}async b7t(){this.i7t.s9t(),this.t9t.C6t(),"nonlinear"===this.t9t.Z3t&&(this.i7t.M7t(-1,!1),this.t9t.T7t(void 0)),"nonlinear"!==this.t9t.Z3t&&"none"!==this.t9t.Z3t||this.t9t.w9t()&&await this.t9t.m9t(),this.t9t.S7t(),this.t9t.N3t?this.t9t.P4t():this.N7t()&&this.ta.yo(new fa(this.ta.LE()))}N7t(){return this.t9t.I7t&&!this.t9t.D7t&&this.ta.OE}setCountdownTimer(){this.fA(),this.t9t.Mc=v((()=>this.J8t()),250)}async r7t(t){void 0!==t.yrt&&(this.t9t.y7t.h9t=!1,this.t9t.C6t(),this.t9t.w9t()?await this.t9t.m9t():this.t9t.K8t(!0))}e7t(t){this.t9t.ct!==t&&t>=0&&(this.t9t.S5(t),this.B8t(new Hs(this.t9t.ct)))}$8t(t){this.t9t.f7t()!==t&&(0===t?this.t9t.E7t(t,!0,!1):this.t9t.E7t(t,!1,!1))}async k7t(){this.t9t.x7t&&void 0!==this.ta.PE()&&(this.L7t=new Wt,await Vh(this.ta.ka(this.ta.Ya(),this.L7t.ly),this.L7t),this.C7t&&this.ta.CE(this.C7t),this.C7t=void 0)}J8t(t){if(this.s1t){const t=this.s1t.j7t();t>this.t9t.ct&&this.e7t(x.round(t))}const i=this.t9t.xE;(t||!this.t9t.KE&&i!==this.t9t.O7t)&&(this.t9t.yo(new A(i,void 0)),this.t9t.O7t=i)}tr(){this.L7t&&(this.L7t.Ty(),this.L7t=void 0),this.R7t=!1,this.l7t=0}gn(){this.tr(),this.Bo()}constructor(t,i,e){super(),this.t9t=t,this.ta=i,this.i7t=e,this.R7t=!1,this.L7t=void 0,this.C7t=void 0,this.l7t=0,this._7t=t=>{if(!t.yrt||!t.yrt.A7t)return;const i=t.yrt.A7t;this.i7t.w5t(i.fBt,i.R8t,i.t1t)},this.v7t=t=>{var i,e,s;if(this.l7t>=5)return;this.l7t++;const n=t.s7t;if(!function(t){return _o(t)&&void 0!==t.j8t&&void 0!==t.R8t}(n))return;const r=null==(s=this.s1t)||null==(e=s.w7t())||null==(i=e.A7t)?void 0:i.fBt;void 0!==r&&this.i7t.w5t(r,n.R8t,n.j8t)},this.Q8t=async t=>{t.s7t.P7t&&await this.h7t(t.s7t.P7t)},this.V8t=async()=>{this.R7t=!0,this.t9t.C6t(),await this.Y8t()},this.G8t=t=>{if(!t.yrt)return;const i=t.yrt;this.t9t.T7t(i),this.t9t.ge(),this.t9t.z7t(),this.t9t.B7t=!0,this.i7t.U7t(i);const e=i.ct;if(this.e7t(e),i.d7t){const t=this.t9t.xE,i=this.t9t.fk;this.t9t.X5(Fn.Dz),this.B8t(new Cu(t,i)),this.B8t(new AS(t,i)),this.B8t(new Eu(t,i)),this.t9t.KE||this.B8t(new te(this.t9t.xE)),this.setCountdownTimer(),this.J8t(!0)}else this.t9t.P4t(),this.ta.ge(),this.t9t.KE||this.ta.Pk()},this.W8t=t=>{var i;if(!t.yrt)return;const e=t.yrt;if(this.fA(),this.i7t.M7t(this.t9t.ct,e.d7t),this.t9t.fk!==Fn.Nz){const t=Fn.Nz;this.t9t.X5(t);const i=this.t9t.xE;this.B8t(new Js(i,t))}this.e7t(NaN),this.t9t.B7t=!1,null==(i=this.s1t)||i.Dk(this.t9t.f7t())},this.Z8t=t=>{t.yrt&&(this.W8t(t),this.i7t.Z8t(t.yrt,this.t9t.xE,this.t9t.ct))},this.H8t=t=>{t.yrt&&(this.i7t.M7t(-1,t.yrt.d7t),this.t9t.C6t(),!t.yrt.d7t&&this.t9t.w9t()&&this.t9t.m9t())},this.X8t=t=>{t.yrt&&(t.yrt.d7t?this.t9t.Rk():this.ta.Rk())},this.q8t=()=>{var t;(this.t9t.B7t=!0,this.t9t.Q7t)&&(null==(t=this.s1t)||t.Rk(),this.t9t.Q7t=!1)},this.F8t=t=>{var i;if(!t.yrt)return;this.t9t.x7t&&(this.C7t=this.ta.LE(),this.ta.Fk(),this.ta.Lk=!0),this.t9t.F7t=!0;const e=t.yrt;this.i7t.xd(e);const s=e.ct;this.t9t.T7t(e),this.e7t(s),this.t9t.K8t(!1),this.t9t.ge(),this.t9t.z5t(),this.t9t.x7t||this.ta.be(),this.ta.Rk(),this.t9t.Y7t(e);0===(null==(i=e.A7t)?void 0:i.fBt)||this.t9t.yo(new Ai(this.t9t.xE))},this.Y8t=async t=>{const i=null==t?void 0:t.yrt;this.t9t.F7t=!1,"linear"===this.t9t.Z3t&&this.i7t.Cd(),i&&i.ct>=0&&this.e7t(i.ct),this.ta._d()===1/0&&this.t9t.V7t(),this.t9t.B7t=!1,this.R7t&&await this.b7t(),this.t9t.K8t(!0);try{await this.k7t()}catch(t){return void(Tu(t)||this.yo(new $J(t)))}if(this.t9t.P4t(),this.t9t.be(),this.ta.OE||this.ta.Pk(),i&&this.t9t.T7t(i),this.t9t.I7t){if(this.t9t.x7t){var e;const t=this.ta.jk(),i=null==(e=this.ta.bt)?void 0:e.src;t&&i&&(t.src=i)}this.t9t.D7t=!0}this.ta.Lk=!1,this.t9t.w9t()&&await this.t9t.m9t()}}};r(),r();var l4=class extends S2{get m$t(){return ah.M1t}constructor(t,i,e){super(t),this.G7t=i,this.W7t=e}};r(),r(),r();var d4=class extends D2{set Z7t(t){this.H7t=t}get Z7t(){return this.H7t}get m$t(){return ah.Xh}w1t(){var t;return null==(t=this.X7t)?void 0:t.rqt}get q7t(){var t;return null==(t=this.X7t)?void 0:t.Xqt}get kqt(){var t;return null==(t=this.X7t)?void 0:t.kqt}get $j(){var t;return null==(t=this.X7t)?void 0:t.$j}get TV(){var t;return null==(t=this.X7t)?void 0:t.TV}get K7t(){var t,i;return null!=(i=null==(t=this.X7t)?void 0:t.K7t)?i:[]}get J7t(){var t,i;return null!=(i=null==(t=this.X7t)?void 0:t.J7t)?i:[]}get $7t(){var t,i;return null!=(i=null==(t=this.X7t)?void 0:t.$7t)?i:[]}ma(){return function(t,i){return fe(t,{bitrate:0,contentType:void 0,mediaUrl:void 0,traffickingParameters:void 0,traffickingParametersString:void 0,universalAdIds:[],get description(){return i.$j},get apiFramework(){return i.q7t},get creativeId(){return i.kqt},get title(){return i.TV},get wrapperAdIds(){return i.K7t},get wrapperAdSystems(){return i.J7t},get wrapperCreativeIds(){return i.$7t}})}(Kr(this),this)}tti(t){this.X7t=t;const i=f4(t);this.V3t(t.TKt,t.iti,t.eti,t.ct,i,-1)}constructor(t,i){super(t,i),this.H7t=0,this.X7t=void 0}};function f4(t){return t.gqt.map((t=>new E2(t)))}var g4=class extends D2{ma(){return function(t,i){return fe(t,{get adSystem(){return i.w1t()},get apiFramework(){return i.q7t},get bitrate(){return i.sti},get contentType(){return i.VN},get creativeId(){return i.kqt},get description(){return i.$j},get mediaUrl(){return i.BKt},get title(){return i.TV},get traffickingParameters(){return i.nti},get traffickingParametersString(){return i.rti},get wrapperAdIds(){return i.K7t},get wrapperAdSystems(){return i.J7t},get wrapperCreativeIds(){return i.$7t},get universalAdIds(){return i.vqt}})}(Kr(this),this)}tti(t){this.X7t=t,this.V3t(t.TKt,t.iti,t.eti,t.ct,f4(t),t.oti),this.H3t=t.d7t?Qo.VJt:Qo.Y3t}get m$t(){return ah.M1t}w1t(){return this.X7t?_4(this.X7t.rqt):void 0}get q7t(){return this.X7t?_4(this.X7t.Xqt):void 0}get sti(){return this.X7t?this.X7t.hti:0}get VN(){return this.X7t?_4(this.X7t.VN):void 0}get kqt(){return this.X7t?_4(this.X7t.kqt):void 0}get ati(){return this.X7t?_4(this.X7t.ati):void 0}get $j(){var t;return null==(t=this.X7t)?void 0:t.$j}get BKt(){var t;const i=null==(t=this.X7t)?void 0:t.BKt;return $t(i)?i:this.UKt}set BKt(t){this.UKt=t}get TV(){var t;return null==(t=this.X7t)?void 0:t.TV}get nti(){return this.X7t?_4(this.X7t.nti):void 0}get rti(){return this.X7t?_4(this.X7t.rti):void 0}get K7t(){var t,i;return null!=(i=null==(t=this.X7t)?void 0:t.K7t)?i:[]}get J7t(){var t,i;return null!=(i=null==(t=this.X7t)?void 0:t.J7t)?i:[]}get $7t(){var t,i;return null!=(i=null==(t=this.X7t)?void 0:t.$7t)?i:[]}get vqt(){var t,i;return null!=(i=null==(t=this.X7t)?void 0:t.vqt.map((t=>({adIdRegistry:t.uti,adIdValue:t.cti}))))?i:[]}constructor(t){super(t,Qo.dI),this.X7t=void 0,this.UKt=void 0}};function _4(t){return null===t?void 0:t}r(),r();var v4=class{get w3t(){return this.i7t.w3t}get f3t(){return this.lti}get N3t(){return this.i7t.N3t}get frt(){var t;return null!=(t=this.i7t.frt)?t:null}get lrt(){const t=this.i7t.dti;return t?[t]:[]}get grt(){return this.i7t.grt}get _rt(){return this.i7t._rt}wrt(t){this.i7t.wrt(t)}ZC(){this.i7t.ZC()}gn(){return Promise.resolve()}constructor(t,i){this.i7t=t,this.lti=i}},w4=class{get fti(){return this.gti}get w3t(){return this.P5t}get N3t(){return this._ti}get dti(){return this.m1t}get frt(){return this.D1t}get grt(){return Ms(this.E1t,(t=>{if(t.rk)return[];const i=t.Vc;if(t===this.D1t&&void 0!==this.m1t){const t=i.indexOf(this.m1t);if(t>=0)return i.slice(t+1)}return i}))}get _rt(){return this.E1t.filter((t=>!t.rk))}constructor(t,i){this.P5t=t,this.E1t=[],this._ti=!1,this.gti=new v4(this,i)}};r();var m4=class extends uB{ma(){return new p4(this.yrt.drt())}constructor(t){super("vti",t)}},p4=class extends Sl{constructor(t){super("adimpression",t)}};r();var A4=class extends ua{ma(){return new y4(this.yrt.drt())}constructor(t){super("wti"),this.yrt=t}},y4=class extends Jr{constructor(t){super("adbuffering"),this.ad=t}};r();var b4=class extends ua{ma(){return new M4}constructor(){super("mti")}},M4=class extends Jr{constructor(){super("admetadata")}};Qi();var T4=class t extends w4{pti(t,i){for(let e=0;e<t;e++){const t=new g4(i);i.P3t(t),this.w3t.yo(new cB(t))}}v5t(t,i,e){let s=t;s===1/0&&(s=-1);const n=new l4(s,e,i);this.E1t.push(n),i.g6t(n),this.w3t.yo(new Pr(n))}p9t(t,i){for(const e of this.E1t)j(e.fBt)&&e.G7t===t&&(e.fBt=i,this.w3t.yo(new j2(e)))}r9t(t,i){void 0===i&&(i=!1),i&&ra(this.E1t,t),this.w3t.yo(new Ar(t))}s9t(){if(this.frt){this.r9t(this.frt,!0);const t=Boolean(this.m1t&&this.m1t.Z3t===Qo.VJt);this.Ati(void 0,t)}}d5t(t,i){const e=i.A7t;if(!e)return;const s=e.O8t-1,n=t.Vc[s];return n.tti(i),this.w3t.yo(new xl(n)),n.Yl.t1t=e.t1t,n}get N3t(){return this.yti.N3t}bti(t){if(!Qa(this.Mti,t)){if(t){if(this.m1t===t)return;this.m1t=t;for(const i of this.Tti)this.t7t(i,t,this.yti.xE)}else{if(!this.m1t)return;const t=new wu(this.m1t,this.m1t.Yl.fBt);this.Mti.push(this.m1t),this.m1t=void 0,this.P5t.yo(t)}nt(this.Tti)}}Ati(t,i){if(t){var e;if((null==(e=this.frt)?void 0:e.fBt)===t.fBt)return;this.D1t=t,i&&this.w3t.yo(new Qt(this.D1t))}else{if(!this.D1t)return;const t=new hc(this.D1t);this.D1t=void 0,nt(this.Mti),i&&this.P5t.yo(t)}}Sti(t){return this.E1t.filter((i=>ce(i.fBt,t,.01)))[0]}static Nti(t,i){if(i.A7t)return t.Vc[i.A7t.O8t-1]}xd(t){if(!t.A7t)return;const i=t.A7t,e=this.Sti(i.fBt);e&&(nt(this.Tti),this.Ati(e,t.d7t))}Cd(){this.frt&&this.w3t.yo(new hc(this.frt)),nt(this.Tti),this.s9t()}U7t(i){if(!this.D1t&&i.A7t){const t=this.Sti(i.A7t.fBt);this.Ati(t,i.d7t)}if(this.D1t){const e=t.Nti(this.D1t,i);if(!e)return;this.d5t(this.D1t,i);const s=i.BKt;$t(s)&&!$t(e.BKt)&&(e.BKt=s,this.w3t.yo(new xl(e))),this.bti(e),this.w3t.yo(new gB(this.m1t,e.Yl.fBt))}else 0}M7t(t,i){if(this.bti(void 0),!i&&this.frt){const t=this.frt;this.Ati(void 0,!1),this.r9t(t)}}c7t(t){const i=t.A7t;if(!i)return;const e=this.Sti(i.fBt);if(!e)return;this.w5t(i.fBt,i.R8t,i.t1t);const s=this.d5t(e,t);s&&this.w3t.yo(new Y1(s))}w5t(t,i,e){const s=this.Sti(t);if(!s)return;const n=s.Vc.length;if(i>n){const t=i-n;this.pti(t,s),s.t1t=e,this.w3t.yo(new j2(s))}}Z8t(i,e,s){if(!this.D1t)return;const n=t.Nti(this.D1t,i);if(n){const t=e/s;this.w3t.yo(new fh(n,t))}}g7t(i,e,s){if(!this.D1t)return;let n=this.m1t;if(!n){const s=t.Nti(this.D1t,i);if(!s||Qa(this.Mti,s))return void this.Tti.push(e);n=s,this.d5t(this.D1t,i),this.bti(n)}this.t7t(e,n,s)}t7t(t,i,e){t===Da.O9t?this.w3t.yo(new b4):t===Da.S9t&&i?this.w3t.yo(new m4(i)):t===Da.D9t&&i?this.w3t.yo(new A4(i)):t===Da.E9t&&i&&e?this.w3t.yo(new z2(i,e)):t===Da.iJt&&i&&e?this.w3t.yo(new U2(i,e)):t===Da.k9t&&i&&e&&this.w3t.yo(new F2(i,e))}ZC(){this.yti.ZC()}wrt(t){this.yti.wrt(t)}tr(){const t=Boolean(this.m1t&&this.m1t.Z3t===Qo.VJt);this.bti(void 0),this.Ati(void 0,t);for(const t of this.E1t)this.r9t(t);nt(this.E1t),nt(this.Tti),nt(this.Mti)}gn(){this.tr()}constructor(t,i){super(t,ah.M1t),this.yti=i,this.Tti=[],this.Mti=[]}};function S4(t){const i=s.google.ima.settings;t.ads&&t.ads.vpaidMode&&s.google.ima.settings.setVpaidMode(function(t){const i=s.google.ima.ImaSdkSettings.VpaidMode;switch(t){case $T.ENABLED:return i.ENABLED;case $T.INSECURE:return i.INSECURE;case $T.DISABLED:default:return i.DISABLED}}(t.ads.vpaidMode)),i.setPlayerVersion("8.13.1"),i.setPlayerType("THEOplayer"),i.setAutoPlayAdBreaks(!0),i.setDisableCustomPlaybackForIOS10Plus(!N4(t));const e=function(t){var i,e,s;const n=null==(e=t.ads)||null==(i=e.googleIma)?void 0:i.language;if(void 0!==n)return n;const r=null==(s=t.ui)?void 0:s.language;if(Ic(r))return r;return}(t);e&&i.setLocale(e)}function N4(t){return Ro.Ka&&t.allowNativeFullscreen}r(),il();var I4=class t extends X2{get _3t(){return this.J6t.fti}get Iti(){return this.J6t}get y7t(){return this.O6t}get x7t(){return N4(this.FJ)}Dti(t,i,e){i===eB.crt&&void 0!==e&&(this.I3t=e),this.O6t.X6t(t,i)}static get f3t(){return ah.M1t}get f3t(){return t.f3t}get Eti(){return this.FJ.ads.preload===iS.MIDROLL_AND_POSTROLL}wrt(t){const i=this.kti();for(const e of i)t0(e.sources,e.timeOffset)||t.D9(e,eB.urt,!1)}kti(){const t=[],{lrt:i,grt:e}=this._3t,s=[];for(const n of i.concat(e)){const i=n.Yl.W7t;if(Qa(s,i.Gx))continue;const e=i.x6t(n.K7t);e>=0?t.push(...i.Z5t.slice(e)):t.push(...i.Z5t),s.push(i.Gx)}for(const i of this.O6t.grt)i.h6t||t.push(...i.Z5t);return hw(t)}set Z3t(t){this.H3t=t}get Z3t(){return this.H3t}get e1t(){return this.s1t}set e1t(t){this.s1t=t,this.xti=!1}LE(){if(!this.e1t)return 0;const t=this.e1t.j7t();return j(this.ct)||t<0?0:this.ct-t}CE(t,i){}_d(){return this.JM||NaN}S5(t){this.JM=t}ZE(){return this.ta.WE}HE(t){this.E7t(this.Nk,t,!0)}JE(){return this.CG}K8t(t){this.CG=t}get B7t(){return this.Lti}set B7t(t){this.Lti=t}get xrt(){return this.I3t}get I7t(){return this.Cti}get Q7t(){return this.jti}set Q7t(t){this.jti=t}get D7t(){return this.Oti}set D7t(t){this.Oti=t}bk(){var t,i,e;return null!=(e=null==(i=this.e1t)||null==(t=i.w7t())?void 0:t.eti)?e:0}Sk(){var t,i,e;return null!=(e=null==(i=this.e1t)||null==(t=i.w7t())?void 0:t.iti)?e:0}bE(){return[]}k3t(t){this.P6t=t,this.O6t.k3t(t)}d9t(){!this.xti&&this.e1t&&(this.e1t.Cn(),this.xti=!0)}T7t(t){this.Z3t=t?t.d7t?"linear":"nonlinear":"none"}vk(){return Mo.PP().ks()}Ik(){return this.ta.Nk}Dk(t){this.E7t(t,this.WE,!0)}f7t(){return this.ta.WE?0:this.ta.Nk}E7t(t,i,e){const s=this.ta.Nk!==t||this.ta.WE!==i;s&&(this.ta.Nk=t,this.ta.WE=i),this.e1t&&e&&this.e1t.Dk(this.f7t()),s&&this.yo(new $e(this.xE,this.Nk))}RE(){return!1}PE(){if(this.Rti&&this.I3t)return this.Rti}BE(){if(this.Pti&&this.I3t)return this.Pti}gk(){return this.H5}X5(t){this.H5=t,this.yo(new Yu(this.xE,t))}get F7t(){return this.zti}set F7t(t){this.zti=t}Ok(){this.ta.fn(Zi.so,this.Bti),this.do||(this.do=!0,this.O6t.Ok(),this.z7t())}async Pk(){if(this.Uti)return;this.Qti.Ty(),this.Qti=new Wt;const t=this.KE;this.K8t(!1),this.yo(new fi(this.xE)),this.Fti()||(this.x7t||this.ta.be(),this.yo(new Ai(this.xE))),this.B7t||(this.Q7t=!1);const i=Boolean(this.e1t);this.Uti=this.O6t.H6t();try{await this.Uti}finally{this.Uti=void 0}try{yi(this.Qti.ly)}catch(t){return}if(this.do||this.Bti(),!this.Rti||!this.I3t)if(this.e1t){if(t)if(i)try{yi(this.Qti.ly),this.e1t.Yti(),this.yo(new te(this.xE))}catch(t){return}else this.d9t()}else this.I3t||(this.P4t(),this.E3t.Pk())}Rk(){var t;this.KE||(this.K8t(!0),this.yo(new Zr(this.xE))),this.Qti.Ty(),this.B7t?null==(t=this.e1t)||t.Rk():this.Q7t=!0}ZC(){var t;null==(t=this.e1t)||t.ZC()}S7t(){this.e1t&&(this.Gti.Vti(),this.e1t.zk(),this.e1t.wy(),this.e1t=void 0,this.Z3t="none",this.xti=!1)}async zk(){var t;this.O7t=0,this.O6t.tr(),this.Qti.Ty(),this.K8t(!0),this.Cti=!1,this.Oti=!1,this.B7t=!1,this.J6t.tr(),this.S7t(),this.p7t(),null==(t=this.Wti)||t.tr(),this.Q7t=!1,this.Gti.wy()}ge(){this.Zti.ge(),this.x7t&&this.ta.ge()}be(){this.Zti.be()}Hti(){return Boolean(this.e1t)&&Qa(this.e1t.Xti(),-1)&&!this.Cti}u6t(){this.O6t.u6t()}w9t(){return this.O6t.w9t}C6t(){this.O6t.C6t()}m9t(){return this.O6t.m9t()}A3t(t){if(this.Hti()){if(t.type===Zi.wb&&this.ta.OE)return!0;if(t.type===Zi.qy)return this.Cti=!0,this.Gti.Vti(),!0}return!1}Fti(){return Boolean(this.e1t&&this.e1t.w7t())}async l9t(t){try{this.S7t();const i=this.qti();this.Zti.FK(),this.e1t=await this.Gti.l9t(t,this.Wti,i),this.Kti(this.e1t)}catch(t){this.Jti.h7t(t)}}Kti(t){if(t.Dk(this.f7t()),this.O6t.K6t===t4.G6t){const i=t.Xti();if(i.length)for(const t of i)this.J6t.v5t(t,this.O6t.j6t);else this.J6t.v5t(this.O6t.j6t.sd,this.O6t.j6t)}this.Jti.tr(),this.Jti.U8t(t)}jk(){if(this.s1t&&this.x7t&&this.Fti())return this.ta.jk()}Ck(){return this.x7t&&this.N3t?this.ta.wa:super.Ck()}qti(){const t=!!(this.O6t.K6t===t4.G6t)&&this.Eti;let i,e;void 0!==this.FJ.ads.googleIma.uiElements?i=this.FJ.ads.googleIma.uiElements:this.FJ.ads.showCountdown||(i=[]),void 0!==this.FJ.ads.allowedMimeTypes&&(e=this.FJ.ads.allowedMimeTypes);return{$ti:e,tii:i,eii:t,sti:this.FJ.ads.googleIma.bitrate,sii:void 0,nii:this.P6t}}z7t(){if(this.s1t){const t=this.qti();this.s1t.rii(t)}}A5t(t){this.Rti=new RS(lt.ADVERTISEMENT_ERROR,t.Pb),this.Pti=new qi(vt.AD_ERROR,"There was a problem playing ads.",this.Rti),this.w3t.yo(mc.y3t(t))}p7t(){this.N3t&&(this.ta.ge(),this.P4t(),this.be())}V7t(){var t;if(this.ta.LE()===1/0||0===this.ta.vk().length)return;(null==(t=this.O6t.j6t)?void 0:t.q5t)&&-1!==this.oii&&(this.ta.CE(this.ta.LE()+this.oii),this.oii=-1)}Y7t(t){var i,e;this.oii=null!=(e=null==(i=t.A7t)?void 0:i.t1t)?e:-1}P4t(){super.P4t(),this.ta.ge(),this.x7t&&!this.ta.OE&&this.ta.Pk()}V5t(){this.x7t||super.V5t()}async gn(){this.Jti.fn(Me.ua,this.hii),await super.gn(),this.S7t(),this.Gti.fn("aii",this.uii),this.Gti.wy(),this.Zti.wy(),this.O6t.gn(),this.Jti.gn()}constructor(t,i,e,s,n,r,o){super(t,i),this.do=!1,this.I3t=!1,this.Rti=void 0,this.Pti=void 0,this.oii=-1,this.H3t="none",this.zti=!1,this.xti=!1,this.Qti=new Wt,this.Lti=!1,this.jti=!1,this.uii=t=>{this.w3t.yo(t)},this.hii=t=>{this.Rti=new RS(lt.ADVERTISEMENT_ERROR,"Error while recovering from failed IMA ad.",t.error.message),this.Pti=ju(this.Rti)},this.O7t=NaN,this.Bti=()=>{this.do||this.Ok()},this.FJ=e,this.CG=!0,this.JM=NaN,this.H5=Fn.Nz,this.Cti=!1,this.Oti=!1,this.J6t=new T4(this.w3t,this),this.Jti=new c4(this,this.ta,this.J6t),this.Jti.yn(Me.ua,this.hii),this.ta.yn(Zi.so,this.Bti),this.O6t=new i4(this,this.ta,this.E3t,s,this.J6t),this.Wti=o,this.Gti=r,this.Zti=n,this.be(),this.Gti.yn("aii",this.uii)}};r(),Qi();var D4=class{registerWebImaAdPlayerConstructor(t){this.cii=t}createAdPlayer(t,i,e){return E4()&&this.cii?this.cii(t,i,e):void 0}};function E4(){if(Boolean(gi.google&&gi.google.ima)){return!(1===_.keys(gi.google.ima).length&&gi.google.ima.dai)}return!1}D4.Ld=new D4;var k4=class{get u3t(){return I4.f3t}$G(t){return t&&t.integration===pi.GOOGLE_IMA}c3t(t,i,e){return D4.Ld.createAdPlayer(t,i,e)}D9(t,i,e,s){e.Dti(t,i,s)}fH(t){const i=t1(t.sources);if(!i)return;const e={integration:pi.GOOGLE_IMA,sources:i,omidAccessModeRules:u4(t.omidAccessModeRules)},s=e1(t.timeOffset);return void 0!==s&&(e.timeOffset=s),e}};oc.Ld.tW(new k4),r(),r(),r(),r();var x4=class extends ua{ma(){return new L4}constructor(){super("I1t")}},L4=class extends Jr{constructor(){super("adloaded")}};Qi();var C4=-1,j4=class{get n1t(){return this.E1t}get lii(){return this.dii}get Tlt(){return this.Jp}get fii(){return this.n6t}get gii(){return this._ii}get sd(){if(j(this.vii)){const t=Yc.w$t(this.n6t,this.a1t.t._d());void 0===t||j(t)||(this.vii=t)}return this.vii}wii(){return this.Jp<this.E1t.length}Pc(){let t;return this.Jp<this.E1t.length&&(t=this.E1t[this.Jp],this.Jp++),t}mii(t){t.ZJt=this,this.E1t.push(t)}async pii(t){let i=!1;for(const e of this.E1t)try{await e.$n(),i=!0}catch(i){0,ra(this.E1t,e);const s=e.Ert.sources,n="string"==typeof s?s:s.src;t.yo(mc.b3t(i,n))}return this._ii=!0,i}d1t(){this.l1t=!0}c1t(){return this.l1t}Aii(){return this.E1t.some((t=>L1(t).some((t=>t.dqt))))}constructor(t,i){this.E1t=[],this.l1t=!1,this.n6t=t,this.Jp=0,this.a1t=i,this.vii=NaN,this._ii=!1,this.dii=new R1(this,this.a1t)}},O4=class t extends gs{get yii(){let t=0;for(const i of this.bii)i.c1t()||(t+=1);return t}Mii(){this.Sii.Tii()}Cn(){this.Co(),this.Nii.yn("Nrt",this.Sii.Iii)}jn(){this.Eo(),this.Nii.fn("Nrt",this.Sii.Iii),this._5=this.yB,this.Sii.tr();for(const t of this.bii)t.d1t();nt(this.bii)}Co(){this.Dii||(this.ta.yn(Zi.Eb,this.Eii),this.Dii=!0)}Eo(){this.Dii&&(this.ta.fn(Zi.Eb,this.Eii),this.Dii=!1)}get grt(){return this.bii}kii(){return this.xii(new A(C4,void 0))}Lii(t){return this.Cii(t,0,0).length>0}jii(t,i){let e,s=0;for(const n of this.bii){if(n.c1t())continue;const r=n.sd;r>=t&&r<=i&&r>=s&&!j(r)&&(e=n,s=e.sd)}return e}Oii(t){return this.xii(new A(t,void 0))}Rii(){if(!this.Pii&&void 0!==this.P6t){this.Pii=!this.bii.some((t=>j(t.sd)));for(const t of this.bii)t.sd!==C4&&t.sd<=this.P6t&&!t.c1t()&&t.d1t()}}zii(t){for(const i of t)i.d1t();this.x5t.Bii(t),0===this.yii&&this.Eo()}Cii(t,i,e){return this.bii.filter((s=>{if(s.c1t())return!1;const n=s.sd;return this.Uii(n,t)||this.Qii(n,t,i,e)}))}Uii(t,i){switch(i){case 0:return 0===t;case C4:return t===C4;default:return!1}}Qii(t,i,e,s){if(t<0)return!1;const n=t-i;return-1!==n&&n<=e&&n>=-s}Fii(i){if(i&&i.length>0){for(const e of i){const i=t.L6t(e.fBt);let s=this.wmt(e);-1===s&&(this.Pii=void 0===this.P6t,this.bii.push(new j4(i,this.Yii)),s=this.bii.length-1);this.bii[s].mii(e)}this.Co()}}static L6t(t){switch(t){case"start":case"00:00:00":case"00:00:00.000":case"0%":case"0":return"0";case"end":case"100%":return"-1";default:return t}}wmt(i){const e=t.L6t(i.fBt);return Jv(this.bii,(i=>e===t.L6t(i.fii)))}Vii(t){ra(this.bii,t)}k3t(t){this.P6t=t,this.Pii=void 0===t}constructor(t,i,e,s){super(),this.Pii=!1,this.Eii=t=>V(this.xii(t)),this.xii=async t=>{this.Rii();const i=t.currentTime,e=t.currentTime!==C4?this.jii(this._5,t.currentTime):this.Cii(t.currentTime,0,0)[0];let s,n;const r=this.ta._d()-10;if(n=this.Lii(C4)&&x.ceil(i)===x.ceil(r)?this.Cii(C4,10,0).filter((t=>!t.gii)):this.Cii(i,10,0).filter((t=>!t.gii)),n.length){const t=(await Promise.all(n.map((t=>t.pii(this.Nii))))).some((t=>!0===t));t&&this.yo(new x4),(!t||!this.Sii.Gii||n[0].sd<this.Sii.Gii.sd)&&(s=n[0])}e&&(e!==this.Sii.Gii&&(s=e),this.zii([e])),s&&(this.Sii.Iii(),this.Sii.Gii=s,await this.Sii.Tii()),j(this.ta._d())||(this._5=t.currentTime)},this.ta=t,this.x5t=i,this.Yii=new O1(this.x5t,this.ta),this.P6t=void 0,this.Pii=!1,t._d()!==1/0?this.yB=0:this.yB=t.LE(),this._5=this.yB,this.bii=[],this.Nii=e,this.Sii=s,this.Dii=!1}};r(),r(),Qi();var R4=class extends gs{get Wii(){return this.x2t}get w3t(){return this.P5t}Zii(){this.Hii(),this.Xii(),this.dV=void 0}qii(t){this.Kii=this.Kii.concat(t)}Jii(t){this.$ii=this.$ii.concat(t)}Xii(){this.Kii=[]}Hii(){this.$ii=[]}tei(t){for(const i of this.Kii)i.dZ===t&&q$(i.eventURL)}ge(){this.Wii.style.display=""}be(){this.Wii.style.display="none"}gn(){this.Bo(),this.P5t.Bo(),dn(this.x2t)}constructor(t,i){super(),this.$ii=[],this.Kii=[],this.dV=void 0,this.P5t=new gs,this.iei=t=>{t.stopPropagation(),this.eei()},this.eei=()=>{for(const t of this.$ii)for(const i of t.cKt)q$(i.uri)},this.x2t=h.createElement("div"),this.x2t.style.display="none",this.sei=t,this.nei=i}};function P4(t,i){let e=i;if(!function(t){return"ui"in t}(t))return e;const s=t.ui.language;let n;if(Ic(s)){const i=t.ui.languages;if(!i)return e;n=i[s]}else n=s;return n&&n[i]&&(e=n[i]),e}r(),r();var z4={[Oe.oL]:1,[Oe.hL]:2,[Oe.aL]:2};function B4(t,i){const e=i?i.map((t=>t.toLowerCase())):i;return zs(t.filter((t=>{const i=t.type.toLowerCase();return!!Dn(e)&&-1!==e.indexOf(i)&&P0(i)})),((t,i)=>z4[t.type]-z4[i.type])).map(U4)}function U4(t){return xT({src:t.contentURL,type:t.type,isAdvertisement:!0})}function Q4(t,i){return rQ(F4(t),F4(i))}function F4(t){return{Ti:t.height,ji:t.width}}function Y4(t,i,e,s){const n=function(t,i,e,s){let n,r=1/0;const o=t.filter((t=>!P0(t.type))).filter((t=>void 0===s||-1!==s.indexOf(t.type)));if(o.length){for(const t of o){const s=(x.abs(t.width/i-1)+x.abs(t.height/e-1))/2;s<r&&(r=s,n=t)}return n||o.sort(Q4)[0]}}(t.CKt,i.width,i.height,e),r=B4(t.CKt,e);if(n){const t=U4(n);t&&r.push(t)}var o;r.length>0&&(t.BKt=null==(o=r[0].src)?void 0:o.trim());return Hc({sources:r},s)}Qi();var V4=class extends R4{get rei(){return this.oei}get xE(){return this.hei.xE}get ct(){let t=this.hei.ct;return j(t)&&this.DKt&&(t=this.DKt.ct||0),t}get OE(){return this.hei.OE}get WE(){return this.hei.WE}set WE(t){this.hei.WE=t,t?this.tei(dt.YKt):this.tei(dt.VKt)}get KE(){return this.hei.KE}get fk(){return this.hei.fk}get Nk(){return this.hei.Nk}set Nk(t){this.hei.Nk=t}get yk(){return this.hei.yk}get Tk(){return this.hei.Tk}get aei(){return this.uei}Pk(){this.hei.KE&&(this.hei.Pk(),this.yo(new fi(this.xE)),this.oei&&this.tei(dt.GKt),this.oei=!0)}Rk(){this.hei.KE||(this.hei.Rk(),this.yo(new Zr(this.xE)),this.tei(dt.wb))}async zk(){var t;null==(t=this.rN)||t.Ty(),this.rN=void 0,this.be(),this.oei=!1,this.cei=!0,this.lei(),this.dei(),await this.fei()}gei(t){void 0===t&&(t=!0),this.oei=!1,t&&this.tei(dt.eJt),this.be(),this.nei()}_ei(){var t;const i=null==(t=this.x5t.Ca)?void 0:t.mi,e=new $1(this.Xu,i);return this.Wii.appendChild(e.we),e.yn("ZC",this.vei),e}wei(){this.DKt&&this.DKt.MKt.oKt&&(this.C2t=new H1(this.Wii),this.C2t.W1t=this.DKt.MKt.oKt,this.C2t.yn("clickstart",this.mei),this.C2t.yn("click",this.eei))}pei(t,i){for(const e of this.Kii)if(e.dZ===dt.mb){const s=E0(e.tc,i);void 0!==s&&this._5<s&&s<=t&&q$(e.eventURL)}}async Aei(){if(!this.DKt||!this.yei)return;const t=Y4(this.DKt,this.yei,this.KS.ads.allowedMimeTypes,this.KS);if(!t.sources.length)return await this.hei.tr(),this.sei(""),void this.DKt.jqt();this.rN=new Wt,this.cei=!0,await Vh(this.hei.ka(t,this.rN.ly),this.rN),this.hei.ge(),this.DKt.jqt(),this.wei()}async bei(t,i,e){this.uei=t,this.DKt=t.dqt,this.hei.yn(Zi.Eb,this.Mei),this.hei.yn(Zi.Zy,this.Tei),this.hei.yn(Zi.kb,this.Sei),this.hei.yn(QT,this.Ds),this.DKt.pqt&&0!==this.DKt.pqt.length&&this.qii(this.DKt.pqt),this.DKt.MKt&&this.Jii(this.DKt.MKt),this.dV=i,this.yei=e,0!==this.DKt.CKt.length&&(this.hei.yn(Me.ua,this.Nei),await this.Aei(),this.hei.yn(Zi.qy,this.Iei),this.hei.yn(Zi.Eb,this.Dei),this.hei.yn(E.oP,this.Eei),this.hei.yn(Zi.yb,this.Ds))}t0t(){this.rei&&this.kei&&this.vei()}get kei(){return this.DKt&&-1!==this.DKt.RKt&&this.hei.xE>=this.DKt.RKt}xei(){this.tei(dt.DSt),this.uei&&this.w3t.yo(new gB(this.uei,this.xE))}async fei(){this.hei.fn(Me.ua,this.Nei),this.hei.fn(Zi.qy,this.Iei),this.hei.fn(Zi.Eb,this.Dei),this.hei.fn(E.oP,this.Ds),this.hei.fn(E.oP,this.Eei),this.hei.fn(Zi.yb,this.Ds),this.hei.fn(Zi.Eb,this.Mei),this.hei.fn(Zi.Zy,this.Tei),this.hei.fn(Zi.kb,this.Sei),this.hei.fn(QT,this.Ds),this.uei&&(this.uei.d1t(),this.w3t.yo(new wu(this.uei,this.xE))),this.Lei(),this.Zii(),this.lei(),this.dei(),this.uei=void 0,this.DKt=void 0,this.yei=void 0,await this.hei.tr(),this.hei.be(),this.Wii.style.cursor="",this.Cei=0,this._5=-1,this.jei&&(this.Oei.fei(),this.jei=!1)}Lei(){this.C2t&&(this.C2t.wy(),this.C2t=void 0)}dei(){this.Rei&&(dn(this.Rei),this.Rei=void 0)}lei(){this.R2t&&(this.R2t.gn(),this.R2t=void 0)}Pei(){this.jei=!0}zei(){var t;this.Rei||(this.Rei=h.createElement("div"),this.Rei.className="theoplayer-ad-overlay-component theo-ad-remaining-container",this.Wii.appendChild(this.Rei));const i=null==(t=this.uei)?void 0:t.Yl;if(!i)return;const e=i.Vc.filter(Q1);let s=P4(this.KS,"The content will play in")+" "+x.round(i.i1t)+" "+P4(this.KS,"seconds");if(e.length>1){const t=e.filter((t=>t.c1t())).length;s+=". "+P4(this.KS,"Ad")+" "+(t+1)+"/"+e.length}Vu(this.Rei,s)}constructor(t,i,e,s,n,r,o){super(t,i),this.Oei=e,this.KS=s,this.x5t=n,this.Xu=r,this.hei=o,this.oei=!1,this.Cei=0,this._5=-1,this.rN=new Wt,this.cei=!0,this.Iei=()=>{this.gei()},this.Eei=()=>{this.rN=void 0,this.oei||(this.xei(),this.oei=!0),this.cei&&(this.cei=!1,this.x5t.Mii()),this.Wii.style.display="block",this.hei.fn(E.oP,this.Eei),this.oei=!0},this.Dei=()=>{const t=this.xE,i=this.ct,e=t/i;(0===this.Cei&&e>=.25?(this.tei(dt.$Kt),this.Cei=1):1===this.Cei&&e>=.5?(this.tei(dt.iJt),this.Cei=2):2===this.Cei&&e>=.75&&(this.tei(dt.tJt),this.Cei=3),this.pei(t,i),this.zei(),this._5=t,this.DKt)&&(-1!==this.DKt.RKt&&this.DKt.RKt<this.DKt.ct&&(null!=this.R2t||(this.R2t=this._ei()),this.xE<this.DKt.RKt?this.R2t.$1t(this.DKt.RKt-this.xE):this.R2t.i2t()))},this.Nei=()=>{var t,i;this.rN=void 0,this.hei.fn(Me.ua,this.Nei),this.cei=!0,null==(t=this.dV)||t.kJt(fn.SJt),this.oei=!1,this.hei.be();const e=(null==(i=this.hei.bt)?void 0:i.src)||"";this.sei(e)},this.Mei=()=>{this.Ds(new A(this.xE,void 0))},this.Tei=()=>{this.Ds(new Hs(this.ct))},this.Sei=()=>{this.Ds(new $e(this.xE,this.Nk))},this.mei=()=>{this.x5t.Rk()},this.vei=()=>{this.uei&&(this.tei(dt.ZKt),this.w3t.yo(new fh(this.uei,this.xE/this.ct)),this.gei(!1))},this.Wii.className="theoplayer-ad-linear",this.Wii.style.zIndex="10",pn(this.Wii),this.hei.be(),this.jei=!1}};r(),r();var G4=class t extends tu{get we(){return this.Vs}e2t(){this.we.addEventListener("mouseup",this.s2t),this.we.addEventListener("touchend",this.s2t),this.we.addEventListener("mousedown",this.Bei)}t2t(){this.we.removeEventListener("mouseup",this.s2t),this.we.removeEventListener("touchend",this.s2t),this.we.removeEventListener("mousedown",this.Bei)}static cr(){const t=h.createElement("div");return t.className="theoplayer-ad-nonlinear-close",t.style.position="absolute",t.style.right="0",t.style.top="0",t.style.cursor="pointer",t.style.fontSize="1.7em",t.style.lineHeight="0.75em",t}gn(){this.t2t(),dn(this.Vs)}constructor(){super(),this.s2t=t=>{this.yo(new Jr("ZC")),this.Bei(t)},this.Bei=t=>{t.stopPropagation()},this.Vs=t.cr(),this.e2t()}},W4=class extends R4{get Uei(){return this.Qei}get Fei(){return this.lu}Zii(){super.Zii(),this.Wii&&qn(this.Wii)}async bei(t,i,e){this.p1t&&this.fei(),this.Qei=t,this.p1t=t.fqt,0!==this.p1t.pqt.length&&this.qii(this.p1t.pqt),this.dV=i,0!==this.p1t.wqt.length&&(this.Jii(this.p1t.wqt[0].Iqt),this.Wii.addEventListener("error",this.Yei),this.Wii.addEventListener("load",this.Vei),await this.Aei(),this.Gei())}t0t(){var t;if(void 0!==this.Wei)return;const i=null==(t=this.p1t)?void 0:t.wqt[0];i&&i.Yl&&-1!==i.Yl.RKt&&(this.tei(dt.ZKt),this.w3t.yo(new fh(this.Qei,0)),this.Zei())}xei(){void 0!==this.Qei&&this.w3t.yo(new gB(this.Qei,this.x5t.xE))}zk(){this.fei(),this.Qei=void 0,this.p1t=void 0}fei(){this.Hei(),void 0!==this.Qei&&(this.Qei.d1t(),this.w3t.yo(new wu(this.Qei,this.x5t.xE))),this.Zii(),this.Xei(),void 0!==this.Wei&&(c(this.Wei),this.Wei=void 0)}Hei(){this.Wii.removeEventListener("load",this.Vei),this.Wii.removeEventListener("error",this.Yei)}async Aei(){const t=h.createElement("div");t.className="theoplayer-ad-nonlinear-content",t.style.position="relative",t.style.display="inline-block";const i=this.p1t.wqt[0],e=h.createElement("a");if(i.Iqt.oKt&&(e.href=i.Iqt.oKt,e.target="Vu",e.setAttribute("rel","noopener")),i.Mqt){const t=i.Mqt,s=h.createElement("iframe");s.src=t.pJt,e.appendChild(s)}else if(i.yqt){const t=i.yqt,s=h.createElement("img");s.src=t.pJt,e.appendChild(s)}else if(i.Sqt){const t=i.Sqt,s=h.createElement("iframe");s.src=t.pJt,e.appendChild(s)}i.jqt(),e.addEventListener("mousedown",this.iei),e.addEventListener("touchend",this.iei),this.Wii.firstChild&&(qn(this.Wii),this.fei()),t.appendChild(e),this.Wii.appendChild(t),this.ge()}Gei(){var t;if(!this.p1t)return;const i=null==(t=this.p1t.wqt[0].Yl)?void 0:t.RKt;void 0!==i&&-1!==i&&(this.Wei=gi.setTimeout(this.qei,1e3*i))}Xei(){this.lu&&(this.lu.fn("ZC",this.Kei),this.lu.gn()),this.lu=void 0}get Jei(){return this.x5t.$ei()}constructor(t,i,e){super(t,i),this.Vei=()=>{this.Hei(),this.tei(dt.hJt),this.nei()},this.Yei=t=>{var i,e;this.Hei(),null==(i=this.dV)||i.kJt(fn.IJt);const s=null==(e=this.p1t)?void 0:e.wqt[0];var n,r;const o=null!=(r=null!=(n=null==s?void 0:s.Mqt)?n:null==s?void 0:s.yqt)?r:null==s?void 0:s.Sqt;var h;this.sei(null!=(h=null==o?void 0:o.pJt)?h:"")},this.Zei=()=>{this.be(),qn(this.Wii),this.nei(),this.Qei=void 0,this.p1t=void 0},this.qei=()=>{this.lu||(this.Wei=void 0,this.lu=new G4,this.Wii.children[0].appendChild(this.lu.we),this.lu.yn("ZC",this.Kei))},this.Kei=()=>{this.tei(dt.ZKt),this.t0t()},this.Wii.className="theoplayer-ad-nonlinear",this.Wii.style.position="absolute",this.Wii.style.width="100%",this.Wii.style.bottom="3em",this.Wii.style.zIndex="10",this.Wii.style.textAlign="center",this.x5t=e}};r(),Qi();var Z4=class{static async tsi(t,i,e){let s=[],n=t.shift();for(;n;){try{const t=await(new Q0).UJt(n,i);s=s.concat(t)}catch(t){0;const i=mc.b3t(t,n.sources.src);e.yo(i)}n=t.shift()}return s}};Qi(),r(),r(),r();var en=class extends ua{ma(){return new H4}constructor(){super("Zut")}},H4=class extends Jr{constructor(){super("statechange")}};r();var un=function(t){return t.IDLE="idle",t.LOADING="loading",t.DONE="done",t.ERROR="error",t.EVICTED="evicted",t}({});r(),r();var X4=class{get Ju(){return this.Qu}get V(){return this.Qu.length}get ga(){return this.Za||(this.Za=this.ma()),this.Za}Ex(t){return this.Qu[t]}Kz(t){this.Qu.push(t),this.Za&&this.Za.push(t.ga),this.isi(t)}esi(t){for(const i of t)this.Kz(i)}ssi(t,i){i>=0&&i<=this.Qu.length&&(this.Qu.splice(i,0,t),this.Za&&this.Za.splice(i,0,t.ga),this.isi(t))}Jz(t){return Qa(this.Qu,t)}wS(t){this.nsi(this.Qu.indexOf(t))}nsi(t){if(!(t>=0&&t<this.Qu.length))return;const i=this.Qu[t];Mn(this.Qu,t),this.Za&&Mn(this.Za,t),this.rsi(i)}eM(){const t=this.Qu.slice();nt(this.Qu),this.Za&&nt(this.Za);for(const i of t)this.rsi(i)}constructor(){this.Qu=[],this.Za=void 0}},rh=class extends X4{ma(){return function(t){const i=function(t){const i=t.Ju.map((t=>t.ga));return i.item=i=>{const e=0|i,s=t.Ex(e);return s&&s.ga||void 0},i}(t),e=new fo(t,i);return i.addEventListener=(t,i)=>{e.yn(t,i)},i.removeEventListener=(t,i)=>{e.fn(t,i)},i}(this)}yn(t,i){this.osi.yn(t,i)}Ly(t){this.osi.Ly(t)}Bo(){this.osi.Bo()}yo(t){this.osi.yo(t)}fn(t,i){this.osi.fn(t,i)}Ry(t){this.osi.Ry(t)}Py(t){this.osi.Py(t)}zy(t,i){return this.osi.zy(t,i)}constructor(...t){super(...t),this.osi=new gs,this.Ds=t=>{this.yo(t)}}};r();var q4=class extends Jr{constructor(t){super("addtask"),this.task=t}},K4=class extends ua{ma(){return new q4(this.hsi.ga)}constructor(t){super("asi"),this.hsi=t}};r();var J4=class extends Jr{constructor(t){super("removetask"),this.task=t}},$4=class extends ua{ma(){return new J4(this.task.ga)}constructor(t){super("usi"),this.task=t}},t3=class extends rh{isi(t){this.yo(new K4(t))}rsi(t){this.yo(new $4(t))}constructor(){super()}},i3=class extends tu{async Ok(){await this.lsi(),this.ect("initialised")}async lsi(){try{await this.dsi()}catch(t){0}}async dsi(){const t=await this.Iv.Pot();for(const i of t){const t=this.gsi.fsi(i.id,i.sourceDescription,i.parameters,this._si);this.vsi(t),this.oN.Kz(t),await t.wsi}}get nI(){return this.ict}ect(t){this.ict=t,this.yo(new en)}get msi(){return this.oN}fsi(t,i,e){void 0===e&&(e="persistent");const s=this.gsi.psi(t,i,e);return this.Asi(s,e),this.oN.Kz(s),this.vsi(s),s}async Asi(t,i){try{await this.ysi(t,i)}catch(t){throw b("Unable to persist task - "+t)}}async ysi(t,i){await this.Iv.jot({key:t.o,id:t.o,sourceDescription:t.kc,parameters:t.jS},i)}vsi(t){t.yn("Zut",(()=>{t.nI===un.EVICTED&&this.oN.wS(t)}))}constructor(t,i,e){super(),this.ict="uninitialised",this.oN=new t3,this.gsi=i,this._si=e,this.Iv=t,this.Ok()}};r(),r(),r(),r();var Ss=class{get jP(){return this.bsi}get Msi(){return this.Tsi}get Ssi(){return this.Nsi.jP}get Isi(){let t=0,i=0;return this.qz.forEach((e=>{t+=e.timeRanges.jP,i+=e.totalQualityDurationToCache})),0===i?0:x.min(1,t/i)}get Nsi(){return this.Dsi}DB(t){return!!ns(this.qz,t.qz)&&(!!Tf(this.Tsi,t.Tsi)&&(!!Tf(this.jP,t.jP)&&(!!Tf(this.Ssi,t.Ssi)&&this.Nsi.IP(t.Nsi))))}constructor(t,i,e){if(this.Tsi=t,this.qz=i,this.bsi=e,0===this.qz.size)this.Dsi=Mo.PP();else{let t=new Mo([-1/0,1/0]);this.qz.forEach((i=>{t=t.Sn(i.timeRanges)})),this.Dsi=t}}};Ss.QUALITY_TIME_RANGES_NULL_OBJECT=ll(),Ss.CACHE_PROGRESSION_NULL_OBJECT=new Ss(0,Ss.QUALITY_TIME_RANGES_NULL_OBJECT,NaN),Ss.Esi=Ss.CACHE_PROGRESSION_NULL_OBJECT,r(),r(),r(),r();var e3=class extends Jr{constructor(){super("progress")}},s3=class extends ua{ma(){return new e3}constructor(){super("i5t")}};r(),r();var n3=class extends Co{get name(){return"ksi"}constructor(t,i){super(t,i)}};r(),r(),r();var r3=function(t){return t[t.oL=0]="oL",t[t.hL=1]="hL",t}({});async function o3(t,i,e){const s=[];for(const n of t.Zpt)s.push(h3(n,i,e));return{xsi:await Promise.all(s)}}async function h3(t,i,e){const s=[];for(const n of t.Yat)a3(n)||s.push(l3(n,i,e));return{Z:await Promise.all(s),YA:t.YA}}function a3(t){return t.Jat.every(c3)}Qi();var u3=1;function c3(t){return t.$At!==u3&&Boolean(t.$At)}async function l3(t,i,e){const s=[];for(const i of t.Jat)c3(i)||s.push(d3(i,e));const n=await Promise.all(s),r=t.dht[0],o=t.GY,h=o?function(t,i){const e=[],s=function(t){return t?_t(t,"avc")?Xh.VIDEO_H264:_t(t,"hev")||_t(t,"hvc")||_t(t,"hvt")||_t(t,"lhv")||_t(t,"lhe")||_t(t,"lht")?Xh.VIDEO_H265:_t(t,"mp4")?Xh.VIDEO_MP4:_t(t,"mpeg2")?Xh.VIDEO_MPEG2:_t(t,"mpeg")?Xh.VIDEO_MPEG:Xh.VIDEO_UNKNOWN:Xh.VIDEO_UNKNOWN}(t);for(const t of i){const i=t.y8.split(":").pop(),n=t.b8;e.push({mimeType:s,uuid:i,data:n})}const n=r3.oL,r=bo;return{type:n,schemeType:r,schemeDatas:e}}(r,o):void 0,a=nW(t,i,!0);return{Zx:n,gs:t.cet,YA:t.YA,yV:h,Spt:a}}async function d3(t,i){const e={stack:[],error:void 0,hasError:!1};try{const r=Ne(e,new Wt,!1),o=await async function(t,i,e){const s=[],n=t.sat;t.Gft&&s.push({lB:0,ct:0,Lsi:t.Gft});const r=n.bbt();let o=r;for(;o;){if(t.Pdt(o)){const n=await t.Bdt(o,i,e);for(let i=0;i<n.V;i++)s.push(f3(n.Qdt(i),t))}else s.push(f3(o,t));o=n.Ydt(o)}const h=n.Nbt(),a=h.dB-r.lB;return{ct:a,Zot:s}}(t,i,r.ly),h={o:g3(t),tP:o,FY:t.FY,Qp:t.Qp,Ti:t.Ti,YA:t.YA,ji:t.ji};switch(t.YA){case Ri.ON:break;case Ri.NI:var s,n;h.Igt=null!=(n=null==(s=t.Igt)?void 0:s.BB())?n:NaN;break;case Ri.SI:h.audioSamplingRate=t.XAt}return h}catch(t){e.error=t,e.hasError=!0}finally{qr(e)}}function f3(t,i){return{lB:t.lB,ct:t.ct,Lsi:i.Wdt(t)}}function g3(t){return t.xdt.Cn+"-"+(""+t.o)}function _3(t,i){const e=function(t){const i=function(t){const i=ll();for(const e of t){let t=i.get(e.MPt);t||(t={YA:e.YA,zj:[]},i.set(e.MPt,t)),t.zj.push(e)}return i}(t),e=pc();return i.forEach((t=>{for(const i of t.zj){let s=e.get(t.YA);s||(s=ll(),e.set(t.YA,s));let n=s.get(i.l);n||(n=[],s.set(i.l,n)),n.push(i)}})),e}(t);return function(t,i){const e=pc();return t.forEach(((t,s)=>{const n=ll();t.forEach(((t,e)=>{const r=[];for(const e of t){const t=v3(e,s,i);r.push(t)}n.set(e,r)})),e.set(s,n)})),e}(e,i)}function v3(t,i,e){const s=t.MPt,n={EPt:t,tzt:[]};for(const t of e)yK(i,s,t)&&n.tzt.push(t);return n}async function w3(t,i){const e=await i.MSt([t],{});return Gq(e.lI,{},e.SSt)}async function m3(t,i){return uq(t)?async function(t,i){const e=_3(t.zj,t.wBt),s=await async function(t,i){const e=[],s=t.entries();for(let t=s.next();!t.done;t=s.next()){const[s,n]=t.value,r=await y3(n,s,i);e.push(r)}return e}(e,i),n=await async function(t,i){const e=[];for(const h of t){var s,n;const t=await S3(h.$yt,i);var r,o;t.FY=h.FY,t.Qp=h.dht?A3(h.dht):"",t.Ti=null!=(r=null==(s=h.gLt)?void 0:s.Ti)?r:0,t.ji=null!=(o=null==(n=h.gLt)?void 0:n.ji)?o:0,e.push(t)}return{YA:Ri.dI,Z:[{gs:$Q,YA:Ri.dI,Zx:e}]}}(t.wBt,i);return s.push(n),{ct:p3(s),Csi:[t.$yt],nAt:[{xsi:s}]}}(t,i):function(t){const i=N3(t);return{ct:i.ct,Csi:[t.$yt],nAt:[{xsi:[{YA:Ri.dI,Z:[{YA:Ri.dI,gs:$Q,Zx:[{o:t.$yt,tP:i,FY:0,Qp:"",Ti:0,YA:Ri.dI,ji:0}]}]}]}]}}(t)}function p3(t){let i=-1/0;for(const e of t)for(const t of e.Z)i=x.max(i,...t.Zx.map((t=>t.tP.ct)));return i}function A3(t){return[t.TLt,t.NLt,t.Pzt].filter($t).join(",")}async function y3(t,i,e){const s=[],n=t.entries();for(let t=n.next();!t.done;t=n.next()){const[,i]=t.value,n=await b3(i,e);s.push(n)}return{YA:M3(i),Z:s}}async function b3(t,i){const e=[],s=t[0].EPt;for(const s of t){const t=await T3(s,i);e.push(t)}return{gs:s.gs||$Q,YA:M3(s.YA),Zx:e}}function M3(t){switch(t){case Se.SI:return Ri.SI;case Se.NI:return Ri.NI;case Se.AQ:case Se.Azt:return Ri.ON;default:return Ri.dI}}function T3(t,i){const e=function(t){const i=t.EPt.$yt,e=t.tzt.map((t=>t.$yt));return i||(e.length?e[0]:void 0)}(t);return S3(e,i)}async function S3(t,i){let e={ct:0,Zot:[]};if(t){const s=await w3(t,i);cq(s)&&(e=N3(s))}return{o:t||"default",jsi:t,tP:e,FY:0,Qp:"",Ti:0,YA:Ri.dI,ji:0}}function N3(t){const i=[];let e,s=0;for(const n of t.Zot){const t=s;!n.yBt||void 0!==e&&fq(n.yBt.$yt,e)||(i.push(I3(n.yBt,t)),e=n.yBt.$yt),i.push(D3(n,t)),s+=n.ct}return{ct:s,Zot:i}}function I3(t,i){return{lB:i,ct:0,Lsi:E3(t.$yt)}}function D3(t,i){return{lB:i,ct:t.ct,Lsi:E3(t.$yt)}}function E3(t){return{zu:t.zD,Uct:t.EMt?[t.EMt.Cn,t.EMt.Cn+t.EMt.V]:void 0,zI:!1}}r(),r(),Qi();var k3=class{async Osi(t){if(!t.src)throw new b("Invalid typed source");const i=t.type;if(or(i))return await this.Rsi(t);if(rS(i))return await this.Psi(t);throw new b("Unexpected source type")}async Rsi(t){try{const i=await w3(t.src,this.TSt);return await m3(i,this.TSt)}catch(t){throw new b("Unable to fetch HLS manifest")}}async Psi(t){try{const i=new SG({$x:Fe.Ah(t.src),sSt:t.liveOffset,aSt:t.timeServer,zI:t.useCredentials},this.zsi,Mc.VI,this.TSt,t.dash);return await i.W,await async function(t,i,e){const s=[];for(const n of t.nAt)s.push(o3(n,i,e));const n=await Promise.all(s);return{ct:t.Qyt.NAt(),Csi:[t.HTt],nAt:n}}(i.Tr.Fft,t.contentProtection,this.Gdt)}catch(t){throw new b("Unable to fetch DASH manifest")}}constructor(t,i,e){this.TSt=t,this.Gdt=i,this.zsi=e}};Qi(),r();var x3=class{Bsi(){const t=new xh;return this.Usi.push(t),this.Qsi(),t.rM}async Fsi(t,i){try{await t}finally{this.Ysi-=1,this.Qsi(),0===this.Usi.length&&0===this.Ysi&&i.sM(!0)}}Qsi(){if(this.Usi.length>0&&this.Ysi<this.Vsi){this.Usi.shift().sM(),this.Ysi+=1}}constructor(t){this.Usi=[],this.Ysi=0,this.Vsi=t}};ds();var L3=class extends tu{get wsi(){return this.Ok()}async Ok(){const t=new k3(this.TSt,this.Gdt,this.zsi);this.yLt=await t.Osi(this.Gsi);const i=function(t,i){if(Ic(t)){if(_t(t,"%"))return S(t)/100*i;throw new b("Unexpected - Invalid string supplied as amount to cache.")}return i<t?i:t}(this.RSt.jS.amount,this.yLt.ct);let e;this.bsi=i;const s=yr(this.yLt.Csi[0]),n=(await this.Wot.Hot.Bot(s,"manifestURL")).filter((t=>Qa(t.references,this.RSt.o))),r=[],o=this.RSt.jS.bandwidth;for(const t of this.yLt.nAt)for(const i of t.xsi)for(const t of j3(i,this.RSt.jS.preferredTrackSelection))for(const i of R3(t.Zx,o))r.push(i);this.Wsi=x.ceil(r.map((t=>t.FY*function(t,i){let e=0;for(const s of t.tP.Zot.map((t=>t.ct)))if(e+=s,e>=i)return e;return e}(t,i)/8)).reduce(((t,i)=>t+i),0));const h=ll();if(n&&0!==n.length){const t=n.reduce(((t,i)=>t+i.byteSize),0);for(const t of n){const i=t.qualityId,e=new Mo(t.startsAndEnds);if(h.has(i))h.get(i).timeRanges=h.get(i).timeRanges.pP(e).mP(5e-4);else{const t=dl(r,(t=>t.o===i));var a;const s=x.min(this.bsi,null!=(a=null==t?void 0:t.tP.ct)?a:1/0);h.set(i,{timeRanges:e,totalQualityDurationToCache:s})}}e=new Ss(t,h,this.bsi)}else{for(const t of r)h.set(t.o,{timeRanges:Mo.PP(),totalQualityDurationToCache:x.min(t.tP.ct,this.bsi)});e=new Ss(0,h,this.bsi)}this.Zsi=e}get Hsi(){return this.Wsi}get Zsi(){return this.Xsi}set Zsi(t){this.Xsi.DB(t)||(this.Xsi=t,t.DB(Ss.Esi)||this.yo(new s3))}async pi(t){await this.do,await this.qsi(this.yLt,t)}async qsi(t,i){if(!t.Csi)throw new b("Unexpected - manifest is missing locations");await this.Ksi();const e=[];for(const s of t.nAt)e.push(this.Jsi(s,t.Csi[0],i));return _w(e)}async Ksi(){const t=await this.$si.Pot();for(const i of t){const t=await this.Wot.Xot.$b(i.key);if(t)await C3(t,this.RSt.o,this.Wot.Xot,this._si);else try{await this.Wot.Xot.jot(i,this._si)}catch(t){throw new n3("Unable to store manifest with url: "+i.locationURL,t)}}await this.$si.Qot()}Jsi(t,i,e){const s=[];for(const n of t.xsi){const t=j3(n,this.RSt.jS.preferredTrackSelection);for(const n of t)s.push(this.tni(n,i,e))}return _w(s)}async tni(t,i,e){const s=this.RSt.jS.bandwidth,n=R3(t.Zx,s);t.YA===Ri.NI&&t.Spt&&t.Spt.IF.widevine&&"persistent"===t.Spt.IF.widevine.licenseType&&(await this.ini(t.Spt),yi(e));const r=[];for(const t of n)r.push(this.eni(t,i,e));return _w(r)}async eni(t,i,e){yi(e);const s=t.tP.Zot[0].lB+this.bsi,n=[];let r=!1;for(const o of t.tP.Zot){if(o.lB>=s||this.stopIfFailed(r))break;await this.sni(e),await this.nni.Bsi(),n.push(this.nni.Fsi(this.rni(o,t,i),this.oni).catch((t=>(r=!0,Promise.reject(t)))))}return _w(n)}async sni(t){if(null==t?void 0:t.sy)throw await this.oni.rM,new J}async hni(){return await this.do.catch(ya),this.yLt}ini(t){return Promise.resolve()}ani(){return Fe.uA("License renewal unsupported in this SDK."),Promise.resolve()}async rni(t,i,e){const s=this.Wot.Hot,n=BB(t.Lsi.zu,t.Lsi.Uct),r=await s.$b(n);if(r)await C3(r,this.RSt.o,s,this._si),this.uni(r,!1);else try{const s=await this.cni(t.Lsi),{segmentMetadataEntry:n,segmentEntry:r}=this.lni(t,i,e,s);await this.Wot.Got((async t=>{await t.Hot.jot(n,this._si),await t.Zot.jot(r,this._si)})),this.uni(n,!0)}catch(i){throw new n3("Unable to store segment with url: "+t.Lsi.zu,i)}}async cni(t){const i=await this.Xlt.jct(t,{Fct:this.DEFAULT_CACHING_SEGMENT_TIMEOUT,jI:this.DEFAULT_CACHING_SEGMENT_CONNECTION_TIMEOUT});return await this.qlt(i)}async qlt(t){return{buffer:await t.FN()}}lni(t,i,e,s){const n=BB(t.Lsi.zu,t.Lsi.Uct),r=t.lB,o=t.ct,h=this.dni(s);return{segmentMetadataEntry:{key:n,segmentURLsegmentByteRange:n,manifestURL:yr(e),qualityId:i.o,byteSize:h,startsAndEnds:new Mo([r,r+o]).hP,references:[this.RSt.o]},segmentEntry:{key:n,segmentURLsegmentByteRange:n,manifestURL:yr(e),data:s,references:[this.RSt.o]}}}dni(t){return t.buffer.byteLength}uni(t,i){const e=t.qualityId,s=this.Xsi,n=s.qz;n.get(e).timeRanges=n.get(e).timeRanges.pP(new Mo(t.startsAndEnds)).mP(5e-4),this.Zsi=new Ss(i?s.Msi+t.byteSize:s.Msi,n,this.bsi)}stopIfFailed(t){return!1}constructor(t,i,e,s,n,r,o,h){super(),this.DEFAULT_CACHING_SEGMENT_TIMEOUT=3e4,this.DEFAULT_CACHING_SEGMENT_CONNECTION_TIMEOUT=0,this.oni=new xh,this.Xsi=Ss.Esi,this.RSt=t,this.Wot=i,this.TSt=e,this.$si=s,this.Xlt=n,this.Gdt=r,this.zsi=h,this._si=o,this.Wsi=-1;const a=this.RSt.kc.sources[0];this.Gsi=a,this.do=this.Ok(),this.nni=new x3(this.RSt.jS.parallelTasksThreshold)}};async function C3(t,i,e,s){Qa(t.references,i)||(t.references.push(i),await e.jot(t,s))}function j3(t,i){switch(t.YA){case Ri.SI:return O3(t.Z,i.audioTrackSelection);case Ri.ON:return O3(t.Z,i.textTrackSelection);default:return O3(t.Z,[])}}function O3(t,i){if(0===i.length)return t.length?[t[0]]:[];const e=[];for(const s of t)i.indexOf(s.gs)>-1&&e.push(s);return e}function R3(t,i){if(!t.length)return[];const e=[...t].sort(oQ),s=e.filter((t=>t.FY<=i));return s.length>0?[s.pop()]:[e.shift()]}var P3=class{async fni(){await this.Wot.Got((async t=>{await this.gni(t),await this._ni(t),await this.vni(t),await this.wni(t)}))}async gni(t){const i=t.qot,e=this.RSt.o;await i.wS(e)}async _ni(t){const i=t.Hot,e=t.Zot,s=this.RSt.kc.sources[0];if(!dS(s))return;const n=yr(s.src),r=(await i.Bot(n,"manifestURL")).filter((t=>Qa(t.references,this.RSt.o)));for(const t of r)ra(t.references,this.RSt.o),0===t.references.length?(await i.wS(t.key),await e.wS(t.key)):await i.jot(t)}async vni(t){const i=t.Xot,e=this.mni(),s=(await i.Not(e)).filter((t=>Qa(t.references,this.RSt.o)));for(const t of s)ra(t.references,this.RSt.o),0===t.references.length?await i.wS(t.key):await i.jot(t)}mni(){if(!this.yLt)return[];const t=this.RSt.kc.sources[0];if(!dS(t))return[];const i=yr(t.src),e=function(t){if(!t)return[];const i=[];for(const e of t.nAt)for(const t of e.xsi)for(const e of t.Z)for(const t of e.Zx)t.jsi&&i.push(t.jsi);return function(t){return t.reduce(((t,i)=>(t.indexOf(i)<0&&t.push(i),t)),[])}(i)}(this.yLt).map((t=>({src:t}))).map((t=>yr(t.src)));return[i,...e]}async wni(t){const i=t.Kot,e=(await i.Pot()).filter((t=>Qa(t.references,this.RSt.o)));for(const t of e)ra(t.references,this.RSt.o),0===t.references.length?(await i.wS(t.key),this.pni(t)):await i.jot(t)}pni(t){}constructor(t,i,e){this.RSt=t,this.Wot=i,this.yLt=e}},z3=new class{Cst(t,i,e){return new P3(t,i,e)}};r(),r(),Qi();var B3=class{get ga(){return this.Za||(this.Za=function(t){return{renew(i){t.Ani(i)}}}(this)),this.Za}Ani(t){this.yni(t)}async yni(t){try{await this.bni.ani(t)}catch(t){0,this.lD.ect(un.ERROR)}}constructor(t,i){this.lD=t,this.bni=i}},U3=class extends gs{get wsi(){return this.bni.wsi}get ga(){return this.Za||(this.Za=function(t){let i,e={get id(){return t.o},get status(){return t.nI},get source(){return t.kc},get parameters(){return t.jS},get duration(){return t.ct},get cached(){return t.Mni.ks()},get secondsCached(){return t.Tni},get percentageCached(){return t.Sni},get bytes(){return t.Nni},get bytesCached(){return t.Ini},get license(){return t.pX.ga},start(){t.Cn()},pause(){t.Rk()},remove(){t.wS()},addEventListener(t,e){i.yn(t,e)},removeEventListener(t,e){i.fn(t,e)}};return i=new WL(t,["i5t","Zut"],e),e}(this)),this.Za}get o(){return this.aS}get pX(){return this.Dni}get nI(){return this.ict}ect(t){this.ict!==t&&(this.ict=t,this.yo(new en))}get kc(){return this.wc}get jS(){return this.Eni}get ct(){return this.bni.Zsi.jP}get Mni(){return this.bni.Zsi.Nsi}get Tni(){return this.bni.Zsi.Ssi}get Sni(){return this.bni.Zsi.Isi}get Nni(){return this.bni.Hsi}get Ini(){return this.bni.Zsi.Msi}Cn(){this.ict===un.EVICTED||this.ict===un.DONE||this.kni()}async kni(){try{this.ect(un.LOADING);const t=new Wt;this.xni=t,await this.bni.pi(t.ly),this.ect(un.DONE)}catch(t){Tu(t)?this.ect(un.IDLE):this.ect(un.ERROR)}finally{this.xni.wy()}}Rk(){this.xni.Ty()}wS(){this.nI===un.LOADING?(this.yn("Zut",this.evictOnLoading),this.Rk()):this.Lni()}async Lni(){try{const t=await this.bni.hni();await z3.Cst(this,this.Wot,t).fni(),this.bni.Zsi=Ss.Esi,this.ect(un.EVICTED)}catch(t){0,this.ect(un.ERROR)}}constructor(t,i,e,s,n,r){super(),this.xni=new Wt,this.evictOnLoading=()=>{this.fn("Zut",this.evictOnLoading),this.Lni()},this.aS=t,this.wc=i,this.Eni=e,this.Wot=s,this.bni=n.Cst(this,this.Wot,r),this.Dni=new B3(this,this.bni),this.ict=1===this.bni.Zsi.Isi?un.DONE:un.IDLE,this.bni.yn("i5t",(t=>{this.Ds(t),1===this.Sni&&this.ect(un.DONE)}));const o=new Date,h=this.Eni.expirationDate.getTime()-o.getTime();(function(t){return t<2147483647})(h)&&u((()=>this.Lni()),h)}};var Q3=class{psi(t,i,e){const s=Cx();return this.fsi(s,t,i,e)}fsi(t,i,e,s){return new U3(t,i,e,this.Wot,this.Cni,s)}constructor(t,i){this.Wot=t,this.Cni=i}};r();var F3=30,Y3=5;function V3(t){if(!t)throw new b("Unexpected - The cache parameters are undefined");const i=function(t){if(Ic(t)&&!_t(t,"%"))return C(t);return t}(t.amount);!function(t){if(function(t){return Ic(t)&&_t(t,"%")}(t)){const i=S(t);if(j(i)||i<0||i>100)throw new b("The amount as percentage must be between 0 and 100 percent.")}if(!Ic(t)&&j(t))throw new b("The amount must be a number or a string")}(i);const e=function(t){if(!t)return function(){const t=new Date;return t.setMinutes(t.getMinutes()+F3),t}();return t}(t.expirationDate);!function(t){if(t&&!function(t){return!t||jd(t)&&t>new Date}(t))throw new b("Invalid expiration date for the cache parameters")}(e);const s=function(t){if(void 0===t)return 1/0;return t}(t.bandwidth);!function(t){if(j(t)||t<0)throw new b("The bandwidth must be between zero and infinity.")}(s);const n=function(t){if(!t)return Y3;if(j(t))throw new b("The amount must be a number");return t}(t.numberOfParallelTasks);return{amount:i,expirationDate:e,bandwidth:s,parallelTasksThreshold:n,preferredTrackSelection:{audioTrackSelection:[],textTrackSelection:[]}}}ds();var G3=class{set Gii(t){this.jni=t,this.Oni=0,this.Rni=0,this.Pni=void 0}get Gii(){return this.jni}f9t(){if(!this.jni)return;const t=this.jni.n1t;for(;this.Oni<t.length;){const i=t[this.Oni];for(void 0===this.Pni&&(this.Pni=L1(i),this.Rni=0);this.Rni<this.Pni.length;){const t=this.Pni[this.Rni];if(this.Rni++,void 0!==t.dqt)return t.dqt}this.Oni++,this.Pni=void 0}}tr(){for(this.Gii=void 0,this.rN.Ty(),this.rN=new Wt;this.zni.length;)this.Iii()}Bni(t){return new i3(this.Wot.qot,t,"temporary")}async GWt(t){const i=B4(t.CKt,this.FJ.ads.allowedMimeTypes);if(!i.length)return;const e=await uu.Ld.mG(i,Hc({sources:i}));if(!e.t.oG())return;this.bni||(this.bni=new this.Cni(this.OQ));const s=this.Wot,n=new Q3(s,this.bni),r=this.Bni(n).fsi(Hc({sources:e.kc}),V3({amount:10,bandwidth:_i.Ld.xY()||this.UG.VK}),"temporary");this.zni.push(r);const o=this.bni.Cst(r,s,"temporary");this.rN.Ty(),this.rN=new Wt,Vh(o.pi(this.rN.ly),this.rN).then(ya),this.Uni(o,t)}constructor(t,i,e,s){this.zni=[],this.Oni=0,this.Rni=0,this.Tii=async()=>{const t=this.f9t();t&&await this.GWt(t)},this.Iii=()=>{const t=this.zni.shift();null==t||t.wS()},this.Uni=async(t,i)=>{let e=!1;for(;!e;)await t.zy("i5t"),e=1===t.Zsi.Isi;i.ct<5&&this.Tii()},this.FJ=t,this.OQ=i,this.rN=new Wt,this.Cni=e,this.UG=s,this.Wot=new GB}};r(),r();var W3={key:"",segmentURLsegmentByteRange:"",manifestURL:"",qualityId:"",byteSize:0,startsAndEnds:new Mo([0,0]).hP,references:[]},Z3={key:"",segmentURLsegmentByteRange:"",manifestURL:"",data:""},H3=class t extends fQ{async aft(t,i,e,s){try{return await super.aft(t,i,e,s)}catch(t){X(t)}const n=await this.Qni.aft(t,i,e,s);return await this.Fni(t,i,n),n}async Fni(i,e,s){if(void 0===this.Yni)return;const n=this.Wot.Hot,r=BB(i,e),o=await n.$b(r);if(o)await C3(o,this.Yni,n,this._si);else try{const i={buffer:s},{segmentMetadataEntry:e,segmentEntry:n}=t.lni(r,i,this.Yni);await this.Wot.Got((async t=>{await t.Hot.jot(e,this._si),await t.Zot.jot(n,this._si)}))}catch(t){throw new n3("Unable to store segment with url: "+i,t)}}static lni(t,i,e){return{segmentMetadataEntry:Ei({},W3,{key:t,segmentURLsegmentByteRange:t,references:[e]}),segmentEntry:Ei({},Z3,{key:t,segmentURLsegmentByteRange:t,data:i,references:[e]})}}constructor(t,i,e,s,n){super(t),this.Qni=new dQ(i),this.Wot=e,this.Yni=s,this._si=n}};var X3=class{Cst(t,i,e){void 0===e&&(e="persistent");const s=t.kc.sources[0];if(hS(s))throw new b("Caching THEOlive sources is not supported");const n=Boolean(s.useCredentials),r=new AU(this.OQ,ol.dI),o=new UG(this.OQ,n),h=new ir(i.Xot,i.Hot,i.Zot,i.Kot),a=function(t,i,e,s,n){return new H3(i,t,e,s,n)}(this.OQ,h,i,t.o,e),u=new Br,c=new GG(VG(o,h),u,t);return this.Vni(t,i,c,u,r,a,e)}constructor(t){this.OQ=t}},q3=class extends X3{Vni(t,i,e,s,n,r,o){return new L3(t,i,e,s,n,r,o,qB())}},K3=q3;ds();var J3=class t extends X2{get _3t(){return this}static get f3t(){return ah.b1t}get f3t(){return t.f3t}Dti(t,i,e){i===eB.urt&&this.n7?V(this.l9t([t])):this.Gni.push(t)}LE(){return this.Wni.rei?this.Wni.xE:this.jnt()}CE(t,i){}_d(){return this.Wni.ct}RE(){return this.Wni.OE}PE(){}BE(){}ZE(){return this.Wni.WE}HE(t){this.WE!==t&&(this.Wni.WE=t,this.yo(new $e(this.xE,this.Nk)))}JE(){return this.Wni.KE}gk(){return this.Wni.fk}vk(){return Mo.PP().ks()}bk(){return this.Wni.yk}Sk(){return this.Wni.Tk}Ik(){return this.Wni.Nk}Dk(t){this.Nk!==t&&(this.Wni.Nk=t,this.yo(new $e(this.xE,this.Nk)))}async Pk(){if(this.Zni)return;this.yo(new fi(this.xE)),this.Hni(),this.Gni.length&&(this.Zni=this.l9t(this.Gni),await this.Zni,this.Zni=void 0),await this.Xni.Oii(this.ta.LE());const t=this.qni;4!==t&&1!==t&&5!==t||(!this.D1t&&this.Kni.length?this.Jni():this.D1t?(this.$ni=!0,this.Wni.Pk()):(this.P4t(),this.ta.Pk()),this.qni=3)}Rk(){3===this.qni&&(this.Wni.Rk(),this.qni=4)}Mii(){this.Xni.Mii()}Cn(){this.qni=1,this.Xni.Cn()}async zk(){this.Xni&&(this.Xni.jn(),this.tri(!1),this.Oei.zk(),this.qni=5,this.D1t&&(this.Xni.Vii(this.D1t.ZJt),this.D1t=void 0)),this.n7=!1,this.$ni=!1,nt(this.Kni),this.N3t&&(this.P4t(),this.ta.ge()),nt(this.Gni),await this.Wni.zk(),await this.hei.tr()}ZC(){this.Wni.t0t(),this.Oei.t0t()}Ok(){this.hei.Ok(),this.Hni()}A3t(t){return!(t.type!==Zi.qy||!this.Xni||!this.Xni.Lii(-1))&&(this.Xni.kii().then(ya),!0)}ge(){void 0!==this.Wni.aei&&(this.hei.ge(),this.Wni.ge()),void 0!==this.Oei.Uei&&this.Oei.ge()}be(){this.hei.be(),this.Wni.be(),this.Oei.be()}async l9t(t){const i=await Z4.tsi(t,this.OQ,this.w3t);if(!i.length){const t="Ads could not be loaded.";return this.w3t.yo(mc.b3t(new Ie(nn.ADBLOCK,$u.FILE_NOT_FOUND),t)),void(this.n7&&!this.D1t&&0===this.Kni.length&&this.iri())}this.Xni.Fii(i),this.w3t.yo(new wB),this.N3t||this.ta.KE||this.Xni.Oii(this.ta.LE()),0!==this.qni&&5!==this.qni||this.Cn()}Bii(t){this.Kni.push(...t);for(const i of t)this.n7&&!this.N3t&&this.Jni()}async Jni(){if(2!==this.qni&&!this.eri){0,this.eri=!0,this.qni=2;const t=this.D1t;this.sri(),this.D1t?(await this.D1t.ZJt.pii(this.w3t),this.rri()||(this.eri=!1),this.w3t.yo(new R2(this.hri(this.D1t))),await this.ari()):((null==t?void 0:t.ZJt.Aii())&&this.w3t.yo(new hc(this.hri(t))),this.eri=!1,this.qni=1,this.iri())}}iri(){this.P4t(),this.ta.ge(),this.ta.OE?this.ta.yo(new fa(this.ta.LE())):this.ta.Pk()}sri(){let t;if(this.D1t&&this.rri())t=this.D1t.ZJt;else{if(0===this.Kni.length)return;t=this.Kni.shift()}if(!t)return;const i=t.Pc();i?this.D1t=i:(this.D1t&&(this.Xni.Vii(this.D1t.ZJt),this.D1t=void 0),this.D1t=void 0)}async ari(){const t=this.D1t?function(t){var i,e;const s=null==(e=t.A$t)||null==(i=e.qXt)?void 0:i.KXt();return void 0===s?void 0:new x1(s)}(this.D1t):void 0;if(t){if(!this.D1t)return;this.cri=t,this.lri(this.D1t.pqt),this.dri(dt.gJt);const i=this.cri.Pc();this.D1t.ZJt.Aii()&&(this.Oei.fei(),1===this.D1t.ZJt.Tlt&&this.w3t.yo(new Qt(this.hri(this.D1t)))),await this.bei(i)}else this.qni=1,this.eri=!1,this.D1t=void 0,this.Jni()}async bei(t){if(t){var i;let s=$t(t.dqt),n=$t(t._qt);var e;const r=null!=(e=null==(i=t.gqt)?void 0:i.Bqt)?e:[],o=r.length>0,h=this.D1t,a=this.hri(h);if(t.dqt){if(t.dqt.Yl=h,void 0!==h.Ert.skipOffset){const i=Yc.w$t(h.Ert.skipOffset,t.dqt.ct);i&&i<t.dqt.ct&&(t.dqt.RKt=i)}const i=a.r1t(t.dqt,r,t.vqt,h.Ert);this.Oei.fei(),this.z5t(),await this.Wni.bei(i,t.lt,{width:this.ta.we.offsetWidth,height:this.ta.we.offsetHeight}),s=!0}if(t._qt){const i=t._qt.wqt[0];if(i.Yl=h,void 0!==h.Ert.skipOffset){const t=Yc.w$t(h.Ert.skipOffset,this.ta._d());t&&(i.Yl.RKt=t)}const e=s?[]:r,o=a.o1t(i,e,t._qt,t.vqt,h.Ert);s&&this.Wni.Pei(),await this.Oei.bei(o,t.lt,{width:this.ta.we.offsetWidth,height:this.ta.we.offsetHeight}),n=!0}if(s){this.qni=3,this.Wni.ge();const t=0===a.fBt;this.$ni=t,this.hei.Rk(),this.Wni.Pk(),this.ta.Rk(),this.ta.be(),this.z5t(),this.Wni.xei()}n&&(this.qni=3,this.Oei.ge(),this.Oei.xei()),(s||n||o)&&this.fri(t.uqt),s||n||await this.gri(),!s&&n&&(this.rri()||this.Kni.length>0?this.Jni():(this.iri(),this.D1t=h))}else null===t?await this.gri():this.tri(!0)}gri(){const t=this.cri;return this.bei(t&&t.Pc())}tri(t){this.dri(dt._Jt),this._ri(),this.qni=1;const i=void 0!==this.D1t&&this.D1t.ZJt.wii();if(this.eri=!1,i)t&&(this.qni=1,this.Jni());else{if(!this.N3t)return;this.ta.ge(),!this.ta.OE&&t&&this.ta.Pk(),this.P4t()}}P4t(){this.vri(),super.P4t()}vri(){if(this.ta.OE&&(this.qni=5),this.D1t){const t=this.D1t.ZJt;t.Aii()&&this.w3t.yo(new hc(this.hri(this.D1t))),this.Xni.Vii(t),this.D1t=void 0}}lri(t){this.wri=this.wri.concat(t)}_ri(){this.wri=[]}pri(t){this.ta.we.appendChild(t)}dri(t){for(const i of this.wri)i.dZ===t&&q$(i.eventURL)}fri(t){this.Wni.tei(dt.hJt);for(const i of t)q$(i)}get frt(){return this.D1t?this.hri(this.D1t):null}get lrt(){return this.D1t?[this.Wni.aei,this.Oei.Uei].filter($t):[]}get grt(){const t=this.Kni.concat(this.Xni.grt.filter((t=>!t.c1t())));return Ms(t,(t=>t.lii.Vc.filter((t=>!t.c1t()))))}get _rt(){return this.Xni.grt.map((t=>t.lii))}wrt(t){const i=this.kti();for(const e of i)t0(e.sources,e.timeOffset)||t.D9(e,eB.urt,!1)}kti(){const t=[];for(const i of this.lrt.concat(this.grt))t.push(i.Ert);const i=this.Kni.concat(this.Xni.grt.filter((t=>!t.c1t())));for(const e of i)for(const i of e.n1t)i.W||t.push(i.Ert);return t.push(...this.Gni),hw(t)}rri(){return!!this.D1t&&L1(this.D1t).some((t=>t.dqt))}hri(t){return t.ZJt.lii}$ei(){return this.Ari}jk(){return this.hei.jk()}bE(){return this.hei.bE()}k3t(t){this.Xni.k3t(t)}async gn(){await super.gn(),this.ta.fn(Zi.so,this.Hni),this.w3t.Bq(this.Wni.w3t),this.w3t.Bq(this.Oei.w3t),this.w3t.Bq(this.Xni),this.Wni.gn(),this.Oei.gn(),await this.hei.gn()}constructor(t,i,e,s,n,r){super(t,i),this.Kni=[],this.qni=0,this.wri=[],this.eri=!1,this.n7=!1,this.$ni=!0,this.Gni=[],this.yri=t=>{t.type===Zi.so&&this.$ni?this.$ni=!1:this.yo(t)},this.Hni=()=>{this.n7=!0},this.bri=async()=>(this.qni=1,await this.Wni.fei(),this.bei(this.cri.Pc())),this.Mri=async t=>{const i=new Ie(nn.PLAYBACK,$u.GENERAL_LINEAR_ERROR,"There was a problem playing a linear ad.");return this.w3t.yo(mc.b3t(i,t)),await this.Wni.fei(),this.bei(this.cri.Pc())},this.Tri=()=>(this.Oei.fei(),this.bei(this.cri.Pc())),this.Sri=t=>{const i=new Ie(nn.PLAYBACK,$u.GENERAL_NON_LINEAR_ERROR,"There was a problem playing a non linear ad.");return this.w3t.yo(mc.b3t(i,t)),this.Oei.fei(),this.bei(this.cri.Pc())},this.OQ=r,this.hei=e,this.Oei=new W4(this.Sri,this.Tri,this),this.Wni=new V4(this.Mri,this.bri,this.Oei,s,this,t.Uu,e),this.pri(this.Oei.Wii),this.pri(this.Wni.Wii);const o=new G3(s,r,q3,n);this.Xni=new O4(this.ta,this,this.w3t,o),this.Wni.Ly(this.yri),this.Oei.Ly(this.Ds),this.w3t.iu(this.Wni.w3t),this.w3t.iu(this.Oei.w3t),this.w3t.iu(this.Xni),this.Ari=new O1(this,this.ta),this.Uu.yn(Th.pn,this.Ds),this.ta.yn(Zi.so,this.Hni)}};oc.Ld.tW(new class{get u3t(){return J3.f3t}$G(t){return t&&("string"!=typeof t.integration||t.integration===pi.DEFAULT||t.integration===pi.CSAI||t.integration===pi.THEO)}c3t(t,i,e){const s=new hk(t.we,e,t.wE,t.Snt,t.Ek,t.knt,t.Ll);return new J3(t,i,s,e,t.Snt,t.wE)}D9(t,i,e,s){e.Dti(t,i,s)}fH(t){const i=t1(t.sources);if(!i)return;const e={integration:pi.CSAI,sources:i};"vast"===e.sources.type&&void 0===t.timeOffset?t.timeOffset=0:"vmap"===e.sources.type&&void 0!==t.timeOffset&&Bi("Do not set timeOffset for VMAP ad sources. VMAP ads have their own offsets included.");const s=e1(t.timeOffset);void 0!==s&&(e.timeOffset=s);const n=e1(t.skipOffset);return void 0!==n&&(e.skipOffset=n),e}}),r(),r(),il();var $3=class{FK(){var t;this.H9||(null==(t=this.Zti)||t.initialize(),this.H9=!0)}get Wii(){return this.x2t}get Nri(){return this.Iri.offsetHeight}get Dri(){return this.Iri.offsetWidth}get Eri(){return this.Zti}kri(t){"linear"===t?this.x2t.style.marginTop="0px":"nonlinear"===t&&(this.x2t.style.marginTop="-45px")}ge(){this.x2t.style.opacity="1",this.x2t.style.pointerEvents=""}be(){this.x2t.style.opacity="0",this.x2t.style.pointerEvents="none"}wy(){var t;null==(t=this.Zti)||t.destroy(),this.Zti=void 0}constructor(t,i){this.Zti=void 0,this.H9=!1,this.ist=t;const e=h.createElement("div");e.className="theoplayer-ima-wrapper",pn(e),e.style.zIndex="10",Ro.Qs&&function(t,i){t.addEventListener(i,Fd)}(e,"mousedown"),i.appendChild(e);const s=h.createElement("div");s.className="theoplayer-ima",s.style.height="100%",this.Iri=s,e.appendChild(s),this.x2t=e,this.Zti=new google.ima.AdDisplayContainer(this.Iri,this.ist)}};r(),r(),r();var t5=class{get TKt(){return this.xri.getAdId()}get A7t(){const t=this.xri.getAdPodInfo();if(void 0!==t)try{return{O8t:t.getAdPosition(),t1t:t.getMaxDuration(),Lri:t.getPodIndex(),fBt:t.getTimeOffset(),R8t:t.getTotalAds(),Cri:t.getIsBumper()}}catch(t){return}}get rqt(){return this.xri.getAdSystem()}get jri(){return this.xri.getAdvertiserName()}get Xqt(){var t;return null!=(t=this.xri.getApiFramework())?t:void 0}get gqt(){return this.Uqt.map((t=>({Kqt:t.getAdSlotId(),VN:t.getContentType(),J3t:t.getContent(),Ti:t.getHeight(),ji:t.getWidth()})))}get VN(){var t;return null!=(t=this.xri.getContentType())?t:void 0}get kqt(){return this.xri.getCreativeId()}get ati(){return this.xri.getCreativeAdId()}get Ori(){return this.xri.getDealId()}get $j(){return this.xri.getDescription()}get ct(){return this.xri.getDuration()}get ji(){return this.xri.getWidth()}get Ti(){return this.xri.getHeight()}get BKt(){var t;return null!=(t=this.xri.getMediaUrl())?t:void 0}get Rri(){return this.xri.getMinSuggestedDuration()}get oti(){return this.xri.getSkipTimeOffset()}get Pri(){return this.xri.getSurveyUrl()}get TV(){return this.xri.getTitle()}get nti(){return this.xri.getTraffickingParameters()}get rti(){return this.xri.getTraffickingParametersString()}get vqt(){return this.xri.getUniversalAdIds().map((t=>({uti:t.getAdIdRegistry(),cti:t.getAdIdValue()})))}get tii(){return this.xri.getUiElements()}get hti(){return this.xri.getVastMediaBitrate()}get eti(){return this.xri.getVastMediaHeight()}get iti(){return this.xri.getVastMediaWidth()}get K7t(){return this.xri.getWrapperAdIds()}get J7t(){return this.xri.getWrapperAdSystems()}get $7t(){return this.xri.getWrapperCreativeIds()}get d7t(){return this.xri.isLinear()}constructor(t){this.xri=t;const i=new google.ima.CompanionAdSelectionSettings;i.resourceType=google.ima.CompanionAdSelectionSettings.ResourceType.ALL,i.creativeType=google.ima.CompanionAdSelectionSettings.CreativeType.ALL,i.sizeCriteria=google.ima.CompanionAdSelectionSettings.SizeCriteria.IGNORE,this.Uqt=t.getCompanionAds(0,0,i)}};function i5(){return[google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,google.ima.AdEvent.Type.CLICK,google.ima.AdEvent.Type.DURATION_CHANGE,google.ima.AdEvent.Type.EXPANDED_CHANGED,google.ima.AdEvent.Type.STARTED,google.ima.AdEvent.Type.IMPRESSION,google.ima.AdEvent.Type.PAUSED,google.ima.AdEvent.Type.RESUMED,google.ima.AdEvent.Type.AD_PROGRESS,google.ima.AdEvent.Type.AD_BUFFERING,google.ima.AdEvent.Type.FIRST_QUARTILE,google.ima.AdEvent.Type.MIDPOINT,google.ima.AdEvent.Type.THIRD_QUARTILE,google.ima.AdEvent.Type.COMPLETE,google.ima.AdEvent.Type.USER_CLOSE,google.ima.AdEvent.Type.LINEAR_CHANGED,google.ima.AdEvent.Type.LOADED,google.ima.AdEvent.Type.AD_CAN_PLAY,google.ima.AdEvent.Type.AD_METADATA,google.ima.AdEvent.Type.AD_BREAK_READY,google.ima.AdEvent.Type.INTERACTION,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,google.ima.AdEvent.Type.SKIPPED,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,google.ima.AdEvent.Type.LOG,google.ima.AdEvent.Type.VIEWABLE_IMPRESSION,google.ima.AdEvent.Type.VOLUME_CHANGED,google.ima.AdEvent.Type.VOLUME_MUTED]}var e5=class extends tu{Dk(t){var i;null==(i=this.s1t)||i.setVolume(t)}Ik(){return this.s1t.getVolume()}j7t(){return this.s1t.getRemainingTime()}wy(){nt(this.Dc),this.Xu.fn(Th.pn,this.zri),this.s1t.removeEventListener(google.ima.AdEvent.Type.LOADED,this.Bri),this.s1t.removeEventListener(i5(),this.forwardAdEventListener),this.s1t.removeEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.forwardAdErrorEventListener),this.s1t.destroy()}Cn(){this.s1t.start()}Yti(){this.s1t.resume()}Rk(){this.s1t.pause()}ZC(){this.s1t.skip()}zk(){this.s1t.stop()}w7t(){const t=this.s1t.getCurrentAd();if(t)return this.Uri(t)}Xti(){return this.s1t.getCuePoints()}Uri(t){let i=dl(this.Dc,(i=>i.xri===t));return i||(i=new t5(t),this.Dc.push(i)),i}rii(t){this.s1t.updateAdsRenderingSettings(o5(t))}constructor(t,i,e){super(),this.Dc=[],this.Bri=t=>{t.getAd().isLinear()?this.Zti.kri("linear"):this.Zti.kri("nonlinear")},this.zri=()=>{this.s1t.resize(this.Zti.Dri,this.Zti.Nri,google.ima.ViewMode.NORMAL)},this.forwardAdEventListener=t=>{const i=t.getAd(),e=function(t){return{[google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED]:Da.A9t,[google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED]:Da.y9t,[google.ima.AdEvent.Type.CLICK]:Da.b9t,[google.ima.AdEvent.Type.DURATION_CHANGE]:Da.Zy,[google.ima.AdEvent.Type.EXPANDED_CHANGED]:Da.M9t,[google.ima.AdEvent.Type.STARTED]:Da.T9t,[google.ima.AdEvent.Type.IMPRESSION]:Da.S9t,[google.ima.AdEvent.Type.PAUSED]:Da.iW,[google.ima.AdEvent.Type.RESUMED]:Da.N9t,[google.ima.AdEvent.Type.AD_PROGRESS]:Da.I9t,[google.ima.AdEvent.Type.AD_BUFFERING]:Da.D9t,[google.ima.AdEvent.Type.FIRST_QUARTILE]:Da.E9t,[google.ima.AdEvent.Type.MIDPOINT]:Da.iJt,[google.ima.AdEvent.Type.THIRD_QUARTILE]:Da.k9t,[google.ima.AdEvent.Type.COMPLETE]:Da.eJt,[google.ima.AdEvent.Type.USER_CLOSE]:Da.x9t,[google.ima.AdEvent.Type.LINEAR_CHANGED]:Da.L9t,[google.ima.AdEvent.Type.LOADED]:Da.C9t,[google.ima.AdEvent.Type.AD_CAN_PLAY]:Da.j9t,[google.ima.AdEvent.Type.AD_METADATA]:Da.O9t,[google.ima.AdEvent.Type.AD_BREAK_READY]:Da.R9t,[google.ima.AdEvent.Type.INTERACTION]:Da.P9t,[google.ima.AdEvent.Type.ALL_ADS_COMPLETED]:Da.z9t,[google.ima.AdEvent.Type.SKIPPED]:Da.B9t,[google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED]:Da.U9t,[google.ima.AdEvent.Type.LOG]:Da.Q9t,[google.ima.AdEvent.Type.VIEWABLE_IMPRESSION]:Da.F9t,[google.ima.AdEvent.Type.VOLUME_CHANGED]:Da.Y9t,[google.ima.AdEvent.Type.VOLUME_MUTED]:Da.V9t}[t]}(t.type),s={type:e,date:new Date,yrt:i?this.Uri(i):void 0,s7t:r4(e,t.getAdData())};this.yo(s)},this.forwardAdErrorEventListener=t=>{this.yo({date:new Date,yrt:void 0,type:e4.G9t,s7t:{P7t:a4(t.getError())}})},this.s1t=t,this.Zti=i,this.Xu=e,this.Xu.yn(Th.pn,this.zri),this.s1t.init(this.Zti.Dri,this.Zti.Nri,google.ima.ViewMode.NORMAL),this.s1t.addEventListener(google.ima.AdEvent.Type.LOADED,this.Bri),this.s1t.addEventListener(i5(),this.forwardAdEventListener),this.s1t.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.forwardAdErrorEventListener)}};r();var s5=class extends ua{get Qri(){return this.Fri}get Wii(){return this.x2t}ma(){return new n5(this.Fri)}constructor(t,i){super("aii"),this.Fri=t,this.x2t=i}},n5=class extends Jr{get adsManager(){return this.Fri}constructor(t){super("adsmanagerloaded"),this.Fri=t}},r5=class extends tu{Vti(){var t;null==(t=this.Gti)||t.contentComplete()}async l9t(t,i,e){if(this.Yri)throw new b("Only one ImaAdsRequest can be made at a time.");if(!this.Vri.Eri)throw new b("AdDisplayContainer is not initialized.");this.Gti=new google.ima.AdsLoader(this.Vri.Eri),this.Gti.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoadedListener),this.Gti.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdsManagerErrorListener),this.Yri=new xh,this.Gri=i,this.Wri=e;const s=new google.ima.AdsRequest;return t.S6t?s.adTagUrl=t.S6t:t.N6t&&(s.adsResponse=t.N6t),s.linearAdSlotWidth=t.p6t,s.linearAdSlotHeight=t.A6t,s.nonLinearAdSlotWidth=t.y6t,s.nonLinearAdSlotHeight=t.b6t,s.contentDuration=t.D6t,s.setAdWillAutoPlay(t.M6t),s.setAdWillPlayMuted(t.T6t),t.I6t&&(s.omidAccessModeRules=t.I6t),this.Gti.requestAds(s),this.Yri.rM}wy(){var t;void 0!==this.Gti&&(this.Gti.removeEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoadedListener),this.Gti.removeEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdsManagerErrorListener),this.Gti.destroy(),this.Gti=void 0),null==(t=this.Yri)||t.nM("AdsLoader destroyed"),this.Yri=void 0}constructor(t,i){super(),this.onAdsManagerLoadedListener=t=>{if(this.Gri&&this.Wri&&this.Yri){var i;const e=o5(this.Wri),s=this.Gri,n=t.getAdsManager({get currentTime(){return s.xE},get duration(){return s.ct}},e),r=new e5(n,this.Vri,this.Xu);this.yo(new s5(n,this.Vri.Wii)),null==(i=this.Yri)||i.sM(r),this.Yri=void 0}},this.onAdsManagerErrorListener=t=>{var i;const e={Pb:t.getError().getMessage(),P8t:t.getError().getVastErrorCode(),CJt:t.getError().getErrorCode(),YA:o4(t.getError().getType()),z8t:void 0};null==(i=this.Yri)||i.nM(e),this.Yri=void 0},this.Xu=i,this.Vri=t}};function o5(t){const i=new google.ima.AdsRenderingSettings;return i.enablePreloading=t.eii,t.tii&&(i.uiElements=t.tii),i.mimeTypes=t.$ti,void 0!==t.nii&&(i.playAdsAfterTime=t.nii),void 0!==t.sii&&(i.loadVideoTimeout=t.sii),void 0!==t.sti&&(i.bitrate=t.sti),void 0!==t.nii&&(i.playAdsAfterTime=t.nii),i.restoreCustomPlaybackStateOnAdBreakComplete=!0,i}r();var h5=class extends tu{get xE(){return this.ta.wk?this.Zri:this.ta.LE()}get ct(){return this.ta._d()}get WE(){return this.ta.WE}get Nk(){return this.ta.Nk}tr(){this.Zri=0}constructor(t){super(),this.ta=t,this.Zri=this.ta.LE(),this.ta.yn(Zi.Eb,(()=>{this.ta.wk||(this.Zri=this.ta.LE()),this.yo(new A(this.xE,void 0))}))}};D4.Ld.registerWebImaAdPlayerConstructor((function(t,i,e){S4(e);const s=N4(e)?t.jk():void 0,n=new $3(s,t.we),r=new r5(n,t.Uu),o=new h5(t);return new I4(t,i,e,t.Int,n,r,o)})),r(),r(),r();var Wi=class extends Xt{get Hri(){return this.ta===this.Qnt?this.x5t:this.Qnt}ur(t,i,e,s,n){this.ta===this.x5t&&this.x5t.Xri(),(n||!s.KE||s.OE)&&this.ta.Pk()}CE(t,i){}EE(t){}qri(t,i){const e=t-this.x5t.Kri;return super.CE(e,i)}Jri(t){return super.EE(t)}kE(){return this.Qnt.bt}Ya(){return this.Qnt.Ya()}_d(){return this.Qnt._d()}vk(){const t=Mo.xn(this.Qnt.vk()).Gb(this.x5t.Kri);if(this.$ri())return t.ks();const i=Mo.xn(this.x5t.vk());let e=i;return this.Lz()||(e=t.pP(i)),e=e.Sn(Mo.RP(0,this.LE())),e.ks()}LE(){return this.toi(super.LE())}toi(t){return this.ta===this.x5t?this.x5t.ioi+t:this.x5t.Kri+t}DE(){return this.eoi(super.LE())}eoi(t){return this.ta===this.x5t&&this.soi?new Date(this.soi.getTime()+1e3*t):this.Qnt.NE}SE(){const t=Mo.xn(this.Qnt.SE()).Gb(this.x5t.Kri);if(this.$ri())return t.ks();const i=Mo.xn(this.x5t.SE());if(t.jn(t.V-1)<i.Cn(0))return i.ks();return t.pP(i).ks()}Gk(t){if(this.Lz())switch(t.type){case Zi.Gy:case Zi.ub:case E.sP:case E.nP:case Zi.Zy:return!0}switch(t.type){case Zi.Eb:return this.yo(new A(this.toi(t.currentTime),t.currentProgramDateTime)),!0;case Zi.mb:return this.yo(new ii(this.toi(t.currentTime))),!0;case Zi.so:return this.yo(new fi(this.toi(t.currentTime))),!0;case Zi.wb:return this.yo(new Zr(this.toi(t.currentTime))),!0;case Zi.qy:return this.yo(new fa(this.toi(t.currentTime))),!0;case Zi.Mb:return this.yo(new Yr(this.toi(t.currentTime))),!0;case Zi.bb:return this.yo(new aa(this.toi(t.currentTime))),!0;case Zi.pb:return this.yo(new cu(this.toi(t.currentTime),t.playbackRate)),!0;case Zi.kb:return this.noi?(this.yo(new $e(this.toi(t.currentTime),t.volume)),!0):(this.noi=!0,!0);case Zi.Hy:return this.yo(new Js(this.toi(t.currentTime),t.readyState)),!0;case E.iP:return this.yo(new AS(this.toi(t.currentTime),t.readyState)),!0;case E.eP:return this.yo(new Eu(this.toi(t.currentTime),t.readyState)),!0;case E.sP:return this.yo(new Cu(this.toi(t.currentTime),t.readyState)),!0;case E.nP:return this.yo(new yu(this.toi(t.currentTime),t.readyState)),!0;case E.wx:return this.yo(new Yu(this.toi(t.currentTime),t.readyState)),!0;case E.rP:return this.yo(new Ai(this.toi(t.currentTime))),!0;case E.oP:return this.yo(new te(this.toi(t.currentTime))),!0;case Zi.Xy:return this.yo(new DG(this.toi(t.currentTime),t.initDataType,t.initData)),!0}return super.Gk(t)}Lz(){return this.Qnt.LV.Lz}async gn(){await super.gn(!0)}constructor(t,i,e){super(e),this.noi=!0,this.Qnt=t,this.x5t=i,this.soi=t.NE}};function a5(t,i){i.WE=t.WE,i.Nk=t.Nk,i.$E=t.$E}r();var u5=class extends Wi{ur(t,i,e,s,n){super.ur(t,i,e,s,n),this.Hri.Rk();this.roi(i,e).style.flex="1"}ar(t,i,e){this.roi(i,e).style.flex="0"}constructor(t,i,e){super(t,i,e)}},c5=class extends u5{$ri(){return!0}roi(t,i){return t}ooi(t,i){return i}CE(t,i){return super.qri(t,i)}EE(t){return super.Jri(t)}constructor(t,i){super(t,i,t)}},l5=class extends Wi{$ri(){return!1}ur(t,i,e,s,n){super.ur(t,i,e,s,n),this.noi=!1,this.ta.hoi(),i.style.flex="1"}ar(t,i,e){this.ta.aoi(),i.style.flex="0"}_d(){return this.ta._d()}constructor(t,i){super(t,i,i)}},d5=class extends u5{$ri(){return!1}roi(t,i){return i}ooi(t,i){return t}ur(t,i,e,s,n){super.ur(t,i,e,s,n);for(const t of[i,e])t.style.transition=""}ar(t,i,e){super.ar(t,i,e)}constructor(t,i){super(t,i,i)}};r(),r();var f5=class extends ua{ma(){return new g5(this.interstitial.drt())}constructor(t){super("uoi"),this.interstitial=t}},g5=class extends Jr{constructor(t){super("interstitialupdate"),this.interstitial=t}},Ca=function(t){return t.SINGLE="SINGLE",t.DOUBLE="DOUBLE",t.LSHAPE_AD="LSHAPE_AD",t.LSHAPE_CONTENT="LSHAPE_CONTENT",t}({}),_5=class extends tu{get coi(){var t,i;const e=null!=(i=null!=(t=this.loi)?t:this.JM)?i:this.vUt;return void 0!==e?this.lB+e:this.TB?this.TB:void 0}get ct(){const t=this.coi;return void 0===t?void 0:t-this.lB}get i5t(){var t;return null!=(t=this.e5t)?t:0}doi(t){if(!this.ct)return;const i=(t-(this.lB+this.foi))/this.ct;i<this.i5t||(this.e5t=x.min(i,1),1===this.e5t&&(this.rk=!0))}Yn(t){var i,e,s,n;this.JM=null!=(i=t.ct)?i:this.JM,this.TB=null!=(e=t.dB)?e:this.TB,this.loi=null!=(s=t.goi)?s:this.loi,this.foi=null!=(n=t._oi)?n:this.foi,this.voi(),this.yo(new f5(this))}voi(){void 0===this.JM&&void 0!==this.TB?this.JM=this.TB-this.lB:void 0===this.TB&&void 0!==this.JM&&(this.TB=this.lB+this.JM)}constructor(t){super(),this.foi=0,this.rk=!1,this.o=t.o,this.lB=t.lB,this.TB=t.dB,this.vUt=t.kzt,this.JM=t.ct,this.loi=t.goi,this.Cvt=t.Cvt,this.woi=t.woi,this.voi()}};r(),r(),ds();var vn=Promise;Qi(),r(),il(),r();var v5=class extends S2{moi(t){this.Dc.push(t)}get rk(){return this.poi.rk}get m$t(){return ah.Jnt}get t1t(){var t;return null!=(t=this.poi.ct)?t:-1}get fBt(){return this.poi.lB}get E0t(){}get Aoi(){return this.poi}constructor(t){var i;super(t.lB),this.poi=t,this.i1t=null!=(i=this.poi.ct)?i:-1}},w5=function(t){return t[t.GOOGLE=0]="GOOGLE",t[t.DEFAULT=1]="DEFAULT",t}({}),m5=class extends tu{get n1t(){return this.E1t}get yoi(){return this.boi}get frt(){return this.D1t}get dti(){return this.m1t}Moi(){this.Toi()}Soi(t){const i=new v5(t);this.E1t.push(i)}Noi(t){const i=this.N5t(t);ra(this.E1t,i)}N5t(t){return dl(this.E1t,(i=>i.Aoi===t))}Ioi(){this.x5t.yn(Zi.ub,this.Doi),this.x5t.yn(E.eP,this.Eoi),this.x5t.yn(Zi.qy,this.koi),this.x5t.yn(Zi.Eb,this.j9)}Toi(){this.x5t.fn(Zi.ub,this.Doi),this.x5t.fn(E.eP,this.Eoi),this.x5t.fn(Zi.qy,this.koi),this.x5t.fn(Zi.Eb,this.j9)}ld(t){var i;null==(i=this.boi)||i.doi(this.toi(t.currentTime))}async xoi(t,i,e){const s={stack:[],error:void 0,hasError:!1};try{var n;this.Ioi(),null==(n=this.zQ)||n.Ty();const r=Ne(s,Wt.Iy([i]),!1);this.zQ=r;const o=r.ly;return yi(o),await this.x5t.ka(Hc(t),o),Ro.Ka&&Ro.qf&&(this.x5t.Pk(),this.x5t.Rk()),e&&this.x5t.CE(e),await vn.race([this.zy("aderror",o).then(vn.reject),this.zy("adloaded",o).then((()=>vn.resolve()))])}catch(t){s.error=t,s.hasError=!0}finally{qr(s)}}Cd(t){this.boi&&(this.boi.doi(t),this.boi.rk=!0,this.Noi(this.boi),this.boi=void 0),this.m1t&&(this.P5t.yo(new wu(this.m1t,t)),this.m1t=void 0),this.D1t&&(this.P5t.yo(new hc(this.D1t)),this.D1t=void 0),this.Toi()}toi(t){var i,e;return(null!=(e=null==(i=this.boi)?void 0:i.lB)?e:0)+t}async tr(){var t;null==(t=this.zQ)||t.Ty(),this.zQ=void 0,this.Toi(),this.E1t=[],this.m1t=void 0,this.D1t=void 0,this.boi=void 0}async gn(){await this.tr(),await this.Loi.gn()}constructor(t,i,e){super(),this.P5t=new Yt,this.E1t=[],this.j9=t=>{this.ld(t)},this.koi=()=>{this.Toi(),this.x5t.zk()},this.Doi=()=>{this.yo(new Jr("adloading"))},this.Eoi=()=>{this.yo(new Jr("adloaded"))},this.x5t=t,this.Loi=i,this.E1t=e,this.Loi.Coi(this),this.P5t=i.w3t}};r(),r();var p5=class extends D2{ma(){return Kr(this)}get m$t(){return ah.Jnt}constructor(t){super(t,function(t){return t===Ca.LSHAPE_CONTENT?Qo.Y3t:Qo.VJt}(t.Aoi.joi)),t.moi(this)}};var A5=class extends p5{w1t(){return this.Ooi.getAdSystem()}A1t(){return this.Yl.Aoi.$yt}get o(){return this.Ooi.getAdId()}get ct(){return this.Ooi.getDuration()}get oKt(){var t,i;return null==(i=this.Ooi)||null==(t=i.ad)?void 0:t.clickThroughUrl}get kqt(){return this.Ooi.getCreativeId()}get RKt(){return this.Ooi.getSkipTimeOffset()}constructor(t,i){super(t),this.Ooi=i}};r();var y5=class extends p5{constructor(t){super(t),this.q3t=!0,this.JM=t.i1t}},b5="theoads_slot",M5="urn:google:dai:2018",T5=class extends m5{get Roi(){return w5.GOOGLE}D$(t,i,e){if(void 0===this.Poi){var s,n;if(void 0===(null==(n=gi.google)||null==(s=n.ima)?void 0:s.dai))throw new b("IMA DAI SDK missing for THEOads");this.Poi=new google.ima.dai.api.StreamManager(this.x5t.we.querySelector("video"),this.zoi)}this.Boi=t,this.Uoi=i,this.Qoi=e;const r=this.Poi;this.Foi(),r.reset();const o=new google.ima.dai.api.PodStreamRequest;return o.networkCode=this.Boi,o.customAssetKey=this.Uoi,o.adTagParameters=this.Qoi,this.Yoi&&(o.streamActivityMonitorId=this.Yoi),o.format="hls",this.Voi=this.Goi([google.ima.dai.api.StreamEvent.Type.STREAM_INITIALIZED,google.ima.dai.api.StreamEvent.Type.ERROR]).then((t=>{if(t.type===google.ima.dai.api.StreamEvent.Type.ERROR)throw new b("DAI stream request failed");this.Woi=t.getStreamData(),this.Zoi()})),this.Poi.requestStream(o),this.Voi}Goi(t,i){return new vn(((e,s)=>{var n;if(i&&i.sy)return s(new J);const r=t=>{h(),e(t)},o=()=>{h(),s(new J)},h=()=>{var e;null==(e=this.Poi)||e.removeEventListener(t,r),i&&i.oy(o)};null==(n=this.Poi)||n.addEventListener(t,r),i&&i.uy(o)}))}Hoi(t){var i;null==(i=this.Poi)||i.replaceAdTagParameters(t)}async Xoi(t){var i,e;return(null==(i=this.boi)?void 0:i.woi)&&!j(this.boi.woi)?this.boi.woi:this.qoi&&(null==(e=this.boi)?void 0:e.Cvt)?await ao((()=>this.Koi()),t,4,500,5e3):void 0}async Koi(){const t=this.qoi+"/"+this.Boi+"/"+this.Uoi+"/"+this.boi.Cvt+".json",i=new Gs({zu:t,oI:Ee.CN,LI:Ve.GET,CI:1e3});let e;try{e=await this.x5t.wE.hI(i)}catch(t){throw new Ie(nn.NETWORK,$u.UNKNOWN_AD_RESPONSE,"The ad's PodId could not be loaded.")}if(!jc(e))throw new Ie(nn.NETWORK,$u.UNKNOWN_ERROR,"Something went wrong while requesting JSON from server.");const s=await e.rI();if(s)return s.podid}async Joi(t,i,e){this.boi=t;const s=Fe.Ah(t.$yt),n=s.searchParams.get("n"),r=s.searchParams.get("k"),o=this.Qoi;o.cust_params=function(t,i){const e=new I_(t);return e.set(b5,function(t){switch(t){case Ca.DOUBLE:return"double";case Ca.SINGLE:return"single";case Ca.LSHAPE_AD:case Ca.LSHAPE_CONTENT:return"l-shape"}}(i)),e.toString()}(o.cust_params,t.joi),n&&r&&(n!==this.Boi||r!==this.Uoi)?(this.Boi=n,this.Uoi=r,await this.D$(n,r,this.Qoi),yi(e)):this.Hoi(this.Qoi),this.Voi&&await Ao(this.Voi,e);const h=Number(s.searchParams.get("d")),a=x.floor(1e3*x.min(h,t.coi-i)),u=await this.Xoi(e);if(!u)throw new b("Something went wrong with retrieving the PodID from the server.");const c=this.Woi.getStandalonePodManifestUrl((()=>u),a);return this.xoi({sources:{src:c}},e,void 0)}Ioi(){super.Ioi(),this.x5t.yn(Zi.qy,this.$oi),this.x5t.nt.yn(bs.Hk,this.zn)}Toi(){super.Toi(),this.x5t.fn(Zi.qy,this.$oi),this.x5t.nt.fn(bs.Hk,this.zn)}Zoi(){var t;null==(t=this.Poi)||t.addEventListener([google.ima.dai.api.StreamEvent.Type.ERROR,google.ima.dai.api.StreamEvent.Type.CLICK,google.ima.dai.api.StreamEvent.Type.STARTED,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,google.ima.dai.api.StreamEvent.Type.MIDPOINT,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,google.ima.dai.api.StreamEvent.Type.COMPLETE,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,google.ima.dai.api.StreamEvent.Type.AD_PERIOD_STARTED,google.ima.dai.api.StreamEvent.Type.AD_PERIOD_ENDED,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,google.ima.dai.api.StreamEvent.Type.RESUMED],this.thi)}Foi(){var t;null==(t=this.Poi)||t.removeEventListener([google.ima.dai.api.StreamEvent.Type.ERROR,google.ima.dai.api.StreamEvent.Type.CLICK,google.ima.dai.api.StreamEvent.Type.STARTED,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,google.ima.dai.api.StreamEvent.Type.MIDPOINT,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,google.ima.dai.api.StreamEvent.Type.COMPLETE,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,google.ima.dai.api.StreamEvent.Type.AD_PERIOD_STARTED,google.ima.dai.api.StreamEvent.Type.AD_PERIOD_ENDED,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,google.ima.dai.api.StreamEvent.Type.RESUMED],this.thi)}Cd(t){super.Cd(t),this.ihi=void 0}async tr(){var t;await super.tr(),this.Foi(),null==(t=this.Poi)||t.reset()}async gn(){var t;await super.gn(),null==(t=this.ehi)||t.gn()}constructor(t,i,e,s,n,r,o){super(t,i,s),this.$oi=()=>{this.Cd(this.toi(this.x5t.LE()))},this.zn=t=>{const i=t.Ht;if(i.Lt===z.MQ&&!(i.YA!==El.ID3&&i.YA!==El.EVENT_STREAM||i.YA===El.EVENT_STREAM&&i.qx!==M5)){if(i.yn(yo.Jk,this.shi),i.yn(yo.tx,this.nhi),i.L)for(const t of i.L.Ix)this.shi(new hO(t));i.UI=lc.Xx,this.ehi=i}},this.shi=t=>{t.uB.yn(oa.kz,this.rhi)},this.nhi=t=>{t.uB.fn(oa.kz,this.rhi)},this.rhi=t=>{var i,e;if(this.Woi)if((null==(i=this.ehi)?void 0:i.YA)===El.ID3){const i=t.uB.U;var s;if(vR(i))if(this.ihi!==i.text)this.ihi=i.text,null==(s=this.Poi)||s.processMetadata("ID3",i.text,t.uB.lB)}else if((null==(e=this.ehi)?void 0:e.YA)===El.EVENT_STREAM){var n;const i=t.uB.U;null==(n=this.Poi)||n.processMetadata(M5,i,t.uB.lB)}},this.thi=t=>{switch(this.D1t&&(this.D1t.i1t=this.x5t._d()-this.x5t.LE()),t.type){case google.ima.dai.api.StreamEvent.Type.ERROR:this.P5t.yo(new mc(nn.GENERAL));break;case google.ima.dai.api.StreamEvent.Type.AD_PERIOD_STARTED:this.D1t=this.N5t(this.boi),this.P5t.yo(new Qt(this.D1t)),this.ohi=Fe.Pg(this.hhi,250);break;case google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED:Fe.Rg(this.ohi);break;case google.ima.dai.api.StreamEvent.Type.STARTED:{var i;const e=t.getAd();this.m1t=new A5(this.D1t,e),null==(i=this.boi)||i.Yn({ad:this.m1t}),this.P5t.yo(new gB(this.m1t,this.toi(this.x5t.LE())));break}case google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE:this.P5t.yo(new z2(this.m1t,this.toi(this.x5t.LE())));break;case google.ima.dai.api.StreamEvent.Type.MIDPOINT:this.P5t.yo(new U2(this.m1t,this.toi(this.x5t.LE())));break;case google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE:this.P5t.yo(new F2(this.m1t,this.toi(this.x5t.LE())));break;case google.ima.dai.api.StreamEvent.Type.COMPLETE:this.P5t.yo(new wu(this.m1t,this.toi(this.x5t.LE()))),this.m1t=void 0;break;case google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED:if(!this.D1t)break;this.D1t.i1t>1&&this.hhi()}},this.hhi=()=>{var t;this.m1t=new y5(this.D1t),null==(t=this.boi)||t.Yn({ad:this.m1t}),this.P5t.yo(new gB(this.m1t,this.toi(this.x5t.LE())))},this.zoi=e,this.Qoi=null!=n?n:{},this.Yoi=r,this.qoi=o}};Qi(),r();var S5=class extends Wi{$ri(){return!0}ur(t,i,e,s,n){super.ur(t,i,e,s,n),a5(this.ta,this.Hri),this.Hri.WE=!0,t.style.backgroundImage="url('"+this.ahi+"')",t.style.backgroundSize="contain",t.style.backgroundPosition="center",this.uhi=this.Qnt.nt.Ix.filter((t=>t.UI===lc.Jn));for(const t of this.uhi)t.UI=lc.Ch;for(const t of[i,e])t.style.flex="1",t.style.borderWidth="20px",t.style.transition=["flex","border-width","transform"].map((t=>t+" 1s ease-in-out")).join(", ")}ar(t,i,e){for(const t of[i,e])t.style.flex="0",t.style.borderWidth="0px";var s;for(const t of null!=(s=this.uhi)?s:[])t.UI=lc.Jn;this.uhi=void 0}PE(){return this.Qnt.PE()||this.x5t.PE()}BE(){return this.Qnt.BE()||this.x5t.BE()}gk(){return x.min(this.Qnt.fk,this.x5t.fk)}Pk(){this.Qnt.Pk(),this.x5t.Pk()}Rk(){this.Qnt.Rk(),this.x5t.Rk()}constructor(t,i,e){super(t,i,i),this.uhi=void 0,this.ahi=e}};r();var N5=class extends Wi{ur(t,i,e,s,n){super.ur(t,i,e,s,n);this.ooi(i,e).style.visibility="hidden",this.Hri.Rk(),t.style.backgroundImage="url('"+this.ahi+"')",t.style.backgroundSize="contain",t.style.backgroundPosition="center";const r=this.roi(i,e);r.style.flex="1",r.style.transform="\n          translate(-50%, -50%)\n          scale(calc(43/60))\n          translate(calc(50% + 100%/30), calc(50% + 100%/30))\n        ";for(const t of[i,e])t.style.transition=["flex","border-width","transform"].map((t=>t+" 1s ease-in-out")).join(", ")}ar(t,i,e){const s=this.roi(i,e);s.style.flex="0",s.style.transform="";this.ooi(i,e).style.visibility=""}constructor(t,i,e,s){super(t,i,e),this.ahi=s}},I5=class extends N5{$ri(){return!0}roi(t,i){return t}ooi(t,i){return i}constructor(t,i,e){super(t,i,t,e)}},D5=class extends N5{$ri(){return!1}roi(t,i){return i}ooi(t,i){return t}constructor(t,i,e){super(t,i,i,e)}};r(),Qi(),r(),r(),r(),r(),r();var E5=class extends RZ{start(t){super.start(t);for(const t of this.prependPackets)this.mxt(t)}constructor(t=[]){super(),this.prependPackets=t}};function k5(t){return t.YA===Rt.mC}var x5=class extends E5{transform(t){this.Ixt.push(t),t.YA===Rt.kL?(this.KM=function(t){const i=Rs.dj(t.rI.rI)[0];if((null==i?void 0:i.YA)!==Rt.kL)throw new b("Not able to parse Moov Box");if(0===i.Z.length)throw new b("Tracks not found");return i.Z[0].zj.nj.Lj}(t),this.lhi(this.Ixt.splice(0),Hi.INITIALIZER)):t.YA===Rt.SC&&this.lhi(this.Ixt.splice(0),Hi.FRAMES)}lhi(t,i){const e={Lj:this.KM,gX:this.kX},s=ih(t.map((t=>ka(t.rI.rI)))),n=dl(t,k5),r={RI:this.Qct,Vb:e,vlt:s,YA:i,ct:this.dhi(n)/e.Lj,Cvt:os(this.fhi(n),e.Lj)};this.mxt(r)}dhi(t){if(!t||!this.KM)return 0;const i=Rs.dj(t.rI.rI)[0].Z[0];if(!i||0===i.bR.length)return 0;const e=i.nj.dR||0;return i.bR[0].kR.reduce(((t,i)=>{var s;return t+(null!=(s=i.ct)?s:e)}),0)}fhi(t){var i;if(!t||!this.KM)return D.UZERO;var e;return null!=(e=null==(i=Rs.dj(t.rI.rI)[0].Z[0].MR)?void 0:i.MR)?e:D.UZERO}ghi(t){t.YA===Hi.INITIALIZER&&(this.KM=t.Vb.Lj)}constructor(t,i=[],e=!1){super(e?i:[]),this.kX=t,this.Ixt=[],this.Qct=this.kX.match(/video/)?gt.NI:gt.SI;for(const t of i)this.ghi(t)}};r();var L5="audio/x-theoplayer-fake-json-segment",C5="video/x-theoplayer-fake-json-segment";var j5=1e-6;var O5=class{write(t){if(t.YA===Hi.FRAMES){const i=t.Vb.Lj,e=lj(Al(t.vlt),void 0,i);if(void 0===e)return;this.cM._hi(e,t.ct)}else if(t.YA===Hi.INITIALIZER){const i=new Bt(Al(t.vlt),new da),e=Z.ej(i,Rt.kL),s=e?Rs.pj(e):[];if(s.length){const t=ih(s.map((t=>new T(t.YR))));this.cM.yo(new Mw(bo,t))}}}constructor(t){this.cM=t}},R5=class t extends tu{get TE(){return this.GDt}get md(){return this.KS}get E3(){return this.x3}get L3(){return this.WDt}get PK(){return this.WK}set PK(t){this.WK=t}get QK(){return this.XK}set QK(t){this.XK=t}B4(t,i,e){return this.vhi=i.rQ,this.whi((i=>this.mhi(t,i)),e)}mhi(t,i){switch(this.WS){case"audio/mp4":case"video/mp4":return this.phi(t,i);case L5:case C5:return this.Ahi(t,i);default:return Promise.reject(new k("Unknown content type: "+this.WS))}}async phi(t,i){yi(i);const e=function(t){switch(t.YA){case Xi.v$:return Wy(t.rI);case Xi.jN:return t.rI;case Xi.w$:throw new b("HeadlessMediaBuffer - Cannot convert opaque SegmentData to Stream.")}}(t);await e.pipeThrough(new Ra(new UZ)).pipeThrough(new Ra(this.yhi)).pipeTo(new Vy(this.bhi),{preventClose:!0,preventAbort:!0})}async Ahi(t,i){yi(i);const e=function(t){return JSON.parse(cm(t))}(await function(t,i){switch(t.YA){case Xi.v$:return Promise.resolve(t.rI);case Xi.jN:return Hy(t.rI,i).then((t=>ih(t)));case Xi.w$:return Promise.reject(new b("HeadlessMediaBuffer - Cannot convert opaque SegmentData to Uint8Array."))}}(t,i));this._hi(e.startTime,e.duration)}P3(){return Promise.resolve()}F4(t,i,e){return this.whi((i=>this.mhi(t,i)),e)}F$(){return this.Dst}I3(){this.Dst=!0}w3(){this.Dst=!1}O3(t,i){this.WDt=this.WDt.pP(new Mo([t,i])).mP(j5)}wS(t,i,e){return this.whi((e=>{yi(e),this.GDt=this.GDt.yP(new Mo([t,i])),this.yo(new Jr(po.g$))}),e)}s3(t,i){return this.whi((()=>{this.Mhi=new Mo([t,i])}))}R3(t,i){this.WDt=this.WDt.yP(new Mo([t,i]))}_hi(t,i){const e=this.vhi+t,s=new Mo([e,e+i]).Sn(this.Mhi);this.GDt=this.GDt.pP(s).mP(j5),this.yo(new Jr(po.g$)),this.Thi()}Shi(){return this.Nhi}Thi(){const t=this.GDt,i=t.V>0?t.jn(this.GDt.V-1):0;this.Nhi!==i&&(this.Nhi=i,this.yo(new Hs(i)))}N$(i){if(!t.H$(i))return!1;const e=KA(i.VN);return this.WS===e.YA}D$(t){return this.KS=t,this.WS=KA(t.VN).YA,HA(this.WS)?this.yhi=new x5(t.VN):this.yhi=void 0,Promise.resolve()}async whi(t,i){if(this.Ihi)throw new b("Attempted to start concurrent buffer mutation");const e=new Wt;e.Sy(this.y3.ly),i&&e.Sy(i);try{this.Ihi=Promise.resolve(t(e.ly)),await this.Ihi}finally{this.Ihi=void 0}}wy(){this.Bo(),this.y3.Ty()}static H$(t){switch(KA(t.VN).YA){case"audio/mp4":case"video/mp4":case L5:case C5:return!0;default:return!1}}constructor(t,i){super(),this.Nhi=0,this.Dst=!1,this.GDt=Mo.PP(),this.WDt=Mo.PP(),this.XK=30,this.WK=30,this.vhi=0,this.yhi=void 0,this.bhi=new O5(this),this.Ihi=void 0,this.Mhi=new Mo([0,1/0]),this.y3=new Wt,this.KS=t,this.WS=KA(t.VN).YA,HA(this.WS)&&(this.yhi=new x5(t.VN)),this.x3=i}},P5=class t extends tu{get A5(){return this.b5}get y5(){return this.M5}get TE(){return kj(this)}get L3(){var t,i,e,s;return(null!=(e=null==(t=this.b5)?void 0:t.L3)?e:Mo.PP()).pP(null!=(s=null==(i=this.M5)?void 0:i.L3)?s:Mo.PP())}get md(){return this.KS}get ct(){return this.JM}get F$(){return(!this.b5||this.b5.F$())&&(!this.M5||this.M5.F$())}get _k(){return this.D5.Q3().Sn(new Mo([0,this.ct],[!0,!0]))}get m8(){return this.Dhi}wy(){var t,i;return this.Bo(),null==(t=this.M5)||t.wy(),null==(i=this.b5)||i.wy(),this.b5=void 0,this.M5=void 0,this.JM=NaN,Promise.resolve()}S5(t){this.JM!==t&&(this.JM=t,this.yo(new Hs(t)))}Shi(){let t=0;return this.b5&&(t=x.max(t,this.b5.Shi())),this.M5&&(t=x.max(t,this.M5.Shi())),t}E5(t,i,e,s){this.D5=new Xu(t,i,Boolean(e),Boolean(s))}I3(){this.b5&&this.b5.I3(),this.M5&&this.M5.I3(),this.Ehi()}w3(){this.b5&&this.b5.w3(),this.M5&&this.M5.w3()}N$(i){if(!t.H$(i))return!1;const e=dl(i.k5,(t=>Et(t.VN,"audio"))),s=dl(i.k5,(t=>Et(t.VN,"video")));return!(this.b5&&e&&!this.b5.N$(e))&&!(this.M5&&s&&!this.M5.N$(s))}async D$(t){this.KS=t;const i=dl(t.k5,(t=>Et(t.VN,"audio"))),e=dl(t.k5,(t=>Et(t.VN,"video")));this.b5?i?await this.b5.D$(i):(this.b5.wy(),this.b5=void 0):i&&(this.b5=new R5(i,Ri.SI),this.b5.yn(Zi.Zy,this.Ehi)),this.M5?e?await this.M5.D$(e):(this.M5.wy(),this.M5=void 0):e&&(this.M5=new R5(e,Ri.NI),this.M5.yn(Zi.Zy,this.Ehi));const s=this.Dhi;0===t.yV.length?this.Dhi=void 0:s&&!t.yV.some((t=>t.NS===s))&&(this.Dhi=t.yV[0].NS)}k$(t){}static H$(t){return t.k5.every((t=>R5.H$(t)))}constructor(t){var i;super(),this.b5=void 0,this.M5=void 0,this.JM=NaN,this.D5=new Xu(0,1/0),this.Dhi=void 0,this.Ehi=()=>{let t;t=this.F$?this.Shi():x.max(this.JM||0,this.Shi()),this.S5(t)},this.KS=t;const e=dl(t.k5,(t=>Et(t.VN,"audio"))),s=dl(t.k5,(t=>Et(t.VN,"video")));e&&(this.b5=new R5(e,Ri.SI),this.b5.yn(Zi.Zy,this.Ehi)),s&&(this.M5=new R5(s,Ri.NI),this.M5.yn(Zi.Zy,this.Ehi)),this.Dhi=null==(i=t.yV[0])?void 0:i.NS}};Qi(),r(),Qi();var z5=class{D9(t){return Fe.Pg(t,16)}x9(t){Fe.Rg(t)}},B5=class extends tu{get TE(){var t,i;return null!=(i=null==(t=this.vV)?void 0:t.TE)?i:Mo.PP()}get xE(){return this.F8?this.F8.xE:this.khi/1e3}get Uu(){return this.Xu}get ct(){var t,i;return this.F8?this.F8.ct:null!=(i=null==(t=this.vV)?void 0:t.ct)?i:NaN}get OE(){return this.F8?this.F8.OE:this.Z5}get lt(){}get FE(){return!1}get xhi(){return this.vV}get WE(){return this.F8?this.F8.WE:this.xG}set WE(t){this.F8?this.F8.WE=t:this.xG!==t&&(this.xG=t,this.yo(new $e(this.xE,this.cT)))}get KE(){return this.F8?this.F8.KE:this.CG}get $E(){return this.F8?this.F8.$E:this.jG}set $E(t){this.jG!==t&&(this.Yn(),this.jG=t,this.yo(new cu(this.xE,t)))}get fk(){return this.H5}get _k(){var t;return(null==(t=this.vV)?void 0:t._k)||Mo.PP()}get wk(){return this.F8?this.F8.wk:this.kG}get G5(){return this.F8?this.F8.G5:this.W5}get s6(){return!1}get wV(){}get Nk(){return this.F8?this.F8.Nk:this.cT}set Nk(t){this.F8?this.F8.Nk=t:this.cT!==t&&(this.cT=t,this.yo(new $e(this.xE,t)))}get NE(){}get Ti(){return this.Xu.Tu}get rk(){let t=this.Fo;return!this.F8&&this.E2t&&(t=t.pP(new Mo([this.S2t,this.xE]))),t}get i7(){return this.IG}get ji(){return this.Xu.Su}get wa(){return this.Zo}get LV(){return this.Qo}get Ctt(){return!0}get mz(){return wC}GE(){return{Bz:0,Uz:0,Qz:0,Fz:0,Yz:0,Vz:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}}}H$(t){for(const i of t)if(i.YA===uh.FQ&&P5.H$(i))return i}async wy(){this.Bo(),await this.tr(),this.CQ.gn()}$n(t){if(t.YA===uh.FQ){const i=new P5(t);this.Lhi(i),this.vV=i,Fe.Pg((()=>{this.vV===i&&(this.yo(new Gi),this.Yn())}),0);const e=new sU(i);return e.cot=this,Promise.resolve(e)}return Promise.reject(new b("Unsupported configuration"))}Rk(){this.F8?this.F8.Rk():this.Chi(),this.Yn()}Chi(){this.CG=!0,void 0!==this.jhi&&(Fe.fA(this.jhi),this.jhi=void 0),this.yo(new Zr(this.xE))}async Pk(){const t=this.zy(E.oP);this.F8?this.F8.Pk():this.Ohi(),await t}Ohi(){this.CG&&(this.Yn(),this.CG=!1,this.Z5&&(this.khi=0),this.yo(new fi(this.xE)),this.Yn(),void 0===this.jhi&&(this.jhi=Fe.dA(this.Rhi,20)))}async tr(){void 0!==this.jhi&&(Fe.fA(this.jhi),this.jhi=void 0),this.vV&&(await this.vV.wy(),this.vV=void 0),this.yo(new Hs(NaN)),this.khi=0,this.S2t=0,this.Phi=-1/0,this.Z5=!1,this.Fo=Mo.PP(),this.E2t=!1,this.W5=!1,this.yo(new A(0,void 0)),this.kG&&(this.kG=!1,this.yo(new aa(0))),this.CG||(this.yo(new Zr(0)),this.CG=!0),1!==this.jG&&(this.jG=1,this.yo(new cu(0,1))),this.H5!==Fn.Nz&&(this.H5=Fn.Nz,this.yo(new Yu(0,Fn.Nz)))}Wb(t,i,e){if(void 0===i&&(i=!1),void 0===e&&(e=!1),this.F8)return void this.F8.Wb(t,i,e);this.Fo=this.rk;const s=this.vV?this.vV._k.gP(t):t;this.S2t=s,this.khi=1e3*s,this.V5=i,e&&!this.kG?(this.W5=!0,this.yo(new zj(s))):(this.W5=!1,this.kG=!0,this.yo(new Yr(s))),this.Yn()}be(){this.IG=!1}get nt(){return this.CQ.nt}get Ll(){return this.FG}Wk(t,i,e,s,n,r,o,h){return this.CQ.Wk(t,i,e,s,n,r,o,h)}CV(t){return this.CQ.CV(t)}DV(){return!1}kV(){throw new b("Sideloaded native text tracks are not supported")}BQ(t){this.CQ.BQ(t)}jV(){this.CQ.tr()}cV(){}ge(){this.IG=!0}Ott(){}xtt(){this.F8||(void 0!==this.jhi&&(Fe.fA(this.jhi),this.jhi=void 0),this.Fo=this.rk,this.F8=Qj(this),this.F8.yn(Bj,this.Ds))}Ltt(){if(!this.F8)return;const t=this.F8;this.F8=void 0,Fj(this,t),t.wy(),this.Yn(),this.CG||void 0!==this.jhi||(this.jhi=Fe.dA(this.Rhi,20))}get yk(){return 0}get Tk(){return 0}get zV(){return this.SV}set zV(t){this.SV=t}get m8(){var t;return null==(t=this.vV)?void 0:t.m8}Yn(){var t,i;if(this.F8)return;const e=Fe.Og(),s=j(this.zhi)?0:e-this.zhi;this.zhi=e;let n=!1;var r;const o=null!=(r=null==(t=this.vV)?void 0:t.TE)?r:Mo.PP();var h;const a=null!=(h=null==(i=this.vV)?void 0:i.L3)?h:Mo.PP();this.CG||(this.khi=this.Bhi(s,o,a));const u=gU(o,a).fP().CP(this.xE);var c;const l=1e3*x.min(null!=(c=null==u?void 0:u.jn(0))?c:0,this.ct);this.Uhi<l&&(this.Uhi=l,this.yo(new ii(this.xE)));const d=this.Qhi(u,l);d!==this.H5&&(this.H5=d,this.yo(new Yu(this.xE,this.H5))),n=this.Fhi(n),this.A2t(),n=this.rJ(n),!n&&this.E2t&&this.Phi+250<e&&(n=!0,this.yo(new A(this.xE,void 0))),n&&(this.Phi=e)}Bhi(t,i,e){let s=this.khi,n=t*this.jG;const r=1e3*this.ct;for(;;){const t=e.CP(s/1e3);if(void 0!==t&&i.gr(t.jn(0))&&(s=1e3*t.jn(0)),(this.kG||this.W5)&&this.V5){const t=s/1e3,e=Lj(i,t,1);if(e!==t){s=1e3*e;break}}if(this.kG||this.W5)break;if(n<=0)break;const o=i.CP(s/1e3);if(void 0===o)break;{const t=x.min(1e3*o.jn(0),r),i=x.min(n,t-s);if(!(i>0))break;s+=i,n-=i}}return s}Qhi(t,i){return this.vV?t?this.vV&&this.vV.F$&&i===1e3*this.vV.ct?this.khi===i?Fn.Iz:Fn.Ez:this.khi===i?Fn.Iz:Fn.Dz:Fn.Xn:Fn.Nz}Fhi(t){let i=t;if(this.H5>=Fn.Iz){const t=this.kG,e=this.W5;this.kG=!1,this.W5=!1,i||!t&&!e||(i=!0,this.yo(new A(this.xE,void 0))),t?this.yo(new aa(this.xE)):e&&this.yo(new DR(this.xE))}return i}A2t(){const t=this.E2t,i=this.Yhi();!t&&i?(this.E2t=!0,this.yo(new te(this.xE))):t&&!i&&(this.Fo=this.rk,this.E2t=!1)}Yhi(){return!this.wk&&!(this.KE||this.OE||this.lt||this.e6())}e6(){return this.fk<Fn.Dz}rJ(t){let i=t;return this.vV&&this.vV.F$&&this.xE===this.ct?this.Z5||(this.Z5=!0,i||(i=!0,this.yo(new A(this.xE,void 0))),this.Chi(),this.yo(new fa(this.xE))):this.Z5=!1,i}Lhi(t){var i,e;null==(i=t.y5)||i.yn(po.g$,this.Vhi),null==(e=t.A5)||e.yn(po.g$,this.Vhi),t.yn(Zi.Zy,this.Ghi)}constructor(){super(),this.F8=void 0,this.SV=void 0,this.khi=0,this.Xu=new qx,this.Z5=!1,this.Zo=new ut,this.Qo=new nk,this.Uhi=0,this.S2t=0,this.Phi=-1/0,this.zhi=NaN,this.vV=void 0,this.xG=!1,this.CG=!0,this.jG=1,this.Fo=Mo.PP(),this.E2t=!1,this.H5=Fn.Nz,this.kG=!1,this.V5=!1,this.W5=!1,this.FG=new YR,this.jhi=void 0,this.IG=!0,this.cT=1,this.Rhi=()=>{this.Yn()},this.Vhi=()=>{this.Yn()},this.Ghi=()=>{this.F8||(this.Yn(),this.yo(new Hs(this.vV.ct)))},this.CQ=new Ir(this,new z5)}},U5=class{async Whi(t){this.lYt&&await this.lYt,this.Zhi.$Qt||await this.Zhi.rFt(t),void 0===this.Hhi&&this.Xhi(),await this.Zhi.fFt(this.Hhi,t)}Xhi(){for(const t of this.Zhi.Tr.tzt)0!==t.ezt.length&&(this.Hhi=t.ezt[0])}get nt(){return this.FWt.nt}gn(){var t;this.Qnt.fn(Zi.fb,this.qhi),null==(t=this.gYt)||t.Ty(),this.Zhi.wy()}constructor(t,i,e,s){this.qhi=()=>{this.lYt=this.Whi(this.gYt.ly).catch(this.Khi)},this.Khi=t=>{0},this.Qnt=t;const n=new R$,r=new B5;this.Zhi=new NK(e,n,!1,i,void 0),this.FWt=new xK(this.Zhi,r),this.gYt=new Wt,this.gYt.Sy(s),this.Qnt.yn(Zi.fb,this.qhi)}};r();function Q5(t){return t&&t.integration===pi.THEOADS}function F5(t){const i=h.createElement("div"),e=h.createElement("div");return function(t,i){let e;for(;$t(e=t.firstChild);)i.appendChild(e)}(t,i),Ea(t,"theo-ads-sgai-container"),Ea(i,"theo-ads-sgai-content-player"),Ea(e,"theo-ads-sgai-ad-player"),t.appendChild(i),t.appendChild(e),{contentElement:i,adElement:e}}function Y5(t){const i=t.style;i.position="relative",i.backgroundColor="transparent",i.backgroundRepeat="no-repeat",i.backgroundAttachment="scroll",i.border="0 solid transparent",i.borderWidth="0px",i.flex="0"}function V5(t){const i=t.style;i.display="",i.backgroundColor="",i.backgroundRepeat="",i.backgroundAttachment="",i.border="",i.borderWidth="",i.flex="",i.transform="",i.transition="",i.backgroundImage="",i.backgroundSize="",i.backgroundPosition="",i.alignItems="",i.position=""}function G5(t){return!Et(t.$yt,"theo-ads://dai.break")}function W5(t){return{get id(){return t.o},get duration(){return t.ct},get startTime(){return t.lB},get type(){return"adbreak"},get layout(){return function(t){switch(t){case Ca.SINGLE:return"single";case Ca.DOUBLE:return"double";case Ca.LSHAPE_CONTENT:case Ca.LSHAPE_AD:return"l-shape"}}(t.joi)},get ads(){return t.Vc.map((t=>t.drt()))},get backdropUri(){return t.Jhi}}}oc.Ld.tW(new class{get u3t(){return ah.Jnt}$G(t){return Q5(t)}c3t(t,i,e){}D9(t,i,e,s){}fH(t){const i={integration:pi.THEOADS,adTagParameters:_o(t.adTagParameters)?t.adTagParameters:{},useId3:Boolean(t.useId3)};return Ic(t.sources)&&(i.sources=Q(t.sources)),Ic(t.networkCode)&&(i.networkCode=Q(t.networkCode)),Ic(t.customAssetKey)&&(i.customAssetKey=Q(t.customAssetKey)),Ic(t.backdropDoubleBox)&&(i.backdropDoubleBox=Q(t.backdropDoubleBox)),Ic(t.backdropLShape)&&(i.backdropLShape=Q(t.backdropLShape)),Ic(t.overrideLayout)&&(i.overrideLayout=function(t){switch(t){case"single":case"l-shape":case"double":case"single-if-mobile":return t;default:return}}(t.overrideLayout)),Ic(t.overrideAdSrc)&&(i.overrideAdSrc=Q(t.overrideAdSrc)),Ic(t.retrievePodIdURI)&&(i.retrievePodIdURI=Q(t.retrievePodIdURI)),Ic(t.sseEndpoint)&&(i.sseEndpoint=Q(t.sseEndpoint)),Ic(t.streamActivityMonitorId)&&(i.streamActivityMonitorId=Q(t.streamActivityMonitorId)),i}}),r(),ds(),r(),Qi(),r(),r();var Z5=function(t){return t.image="image",t}({}),H5=function(t){return t.png="png",t.svg="svg",t}({}),X5=class extends _5{get YA(){return"overlay"}get oKt(){return this.$hi}get tai(){return this.iai}Yn(t){var i,e;this.iai=null!=(i=t.imageUrl)?i:this.iai,this.$hi=null!=(e=t.clickThrough)?e:this.$hi,super.Yn(t)}drt(){var t;return null!=(t=this.Za)?t:this.Za=function(t){return{get type(){return"overlay"},get id(){return t.o},get duration(){return t.ct},get startTime(){return t.lB},get clickThrough(){return t.oKt},get imageUrl(){return t.tai},get position(){return function(t){return{get top(){return t.Ztt},get bottom(){return t.Wtt},get left(){return t.Gtt},get right(){return t.Vtt}}}(t.uo)},get size(){return function(t){return{get width(){return t.ji},get height(){return t.Ti}}}(t.Kb)}}}(this)}constructor(t){super(t),this.eai=t.YA,this.uo=t.uo,this.Kb=t.Kb,this.nai=t.nai,this.rai=t.rai,this.pJt=t.pJt,this.$hi=t.oai}};il(),r();var q5=class extends _5{get YA(){return"adbreak"}get Vc(){return this.Dc}Yn(t){var i;t.ad&&this.Dc.push(t.ad),this.Jhi=null!=(i=t.backdropUri)?i:this.Jhi,super.Yn(t)}drt(){var t;return null!=(t=this.Za)?t:this.Za=W5(this)}constructor(t){super(t),this.Dc=[],this.$yt=t.$yt,this.joi=t.joi||Ca.SINGLE,this.Jhi=t.hai}},K5="com.theoplayer.theoads.interstitial",J5="com.theoplayer.theoads.overlay",$5=class{get aai(){return this.uai}cai(t){this.lai=new EventSource(t),this.lai.addEventListener("adbreak",this.fai)}gai(t){if(!Qa(this._ai,t)){this._ai.push(t);for(const i of t.Ix)this.vai(i);t.yn(bs.Hk,this.zn),t.yn(bs.qk,this.qn)}}wai(t){if(Qa(this._ai,t)){ra(this._ai,t),t.fn(bs.Hk,this.zn),t.fn(bs.qk,this.qn);for(const i of t.Ix)this.mai(i)}}vai(t){!this.pai&&function(t){return t.Lt===z.MQ&&t.YA===El.DATE_RANGE}(t)&&this.Aai!==t?this.yai(t):this.pai&&function(t){return t.Lt===z.MQ&&t.YA===El.ID3}(t)&&this.bai!==t&&this.Mai(t)}mai(t){this.Aai===t?this.yai(void 0):this.bai===t&&this.Mai(void 0)}yai(t){const i=this.Aai;if(void 0!==i){if(i.L)for(const t of i.L.Ix)this.Tai(t);i.fn(yo.Jk,this.Sai),i.fn(yo.sx,this.Nai),i.fn(yo.ox,this.Iai),i.fn(yo.tx,this.nhi),i.UI=lc.Xx}if(this.Aai=t,void 0!==t){if(t.L)for(const i of t.L.Ix)this.Dai(i);t.yn(yo.Jk,this.Sai),t.yn(yo.sx,this.Nai),t.yn(yo.ox,this.Iai),t.yn(yo.tx,this.nhi),t.UI=lc.Xx}}Mai(t){const i=this.bai;if(void 0!==i){if(i.L)for(const t of i.L.Ix)this.Tai(t);i.fn(yo.Jk,this.Eai),i.fn(yo.ox,this.Iai),i.fn(yo.tx,this.nhi),i.UI=lc.Xx}if(this.bai=t,void 0!==t){if(t.L)for(const i of t.L.Ix)this.kai(i);t.yn(yo.Jk,this.Eai),t.yn(yo.ox,this.Iai),t.yn(yo.tx,this.nhi),t.UI=lc.Xx}}xai(t){const i=this.KRt.NE;if(void 0!==i)try{const n=JSON.parse(t.data);var e;const r=null!=(e=n.podDuration)?e:n.adBreakDuration;if(void 0===r)return void Fe.cA("Tried to schedule an ad break without knowing the duration");const o=(Date.parse(n.startDate)-i.getTime())/1e3;if(o<=0)return;const h=this.KRt.LE()+o,a=n.networkCode,u=n.assetKey,c=n.podId?C(n.podId):void 0;let l="theo-ads://dai.break/?d="+r;var s;u&&(l+="&k="+u),a&&(l+="&n="+a);const d=new q5({o:t.id,lB:h,$yt:null!=(s=n.assetURI)?s:l,joi:this.Lai||Ca[n.layout],kzt:r,woi:c,hai:n.backdropURI,Cvt:n.startPTS});this.Soi(d,void 0)}catch(t){Fe.cA("Error parsing the Server sent event",t)}else Fe.cA("Tried to schedule an ad break without knowing the Program Date Time of the player")}Dai(t){if((t.Dzt===K5||t.Dzt===J5)&&t.xzt["X-ASSET-URI"])switch(t.Dzt){case J5:try{var i;const e=atob(t.xzt["X-COM-THEOPLAYER-THEOADS-OVERLAY-PROPERTIES"]),s=JSON.parse(e),n=Z5[s.type],r=new X5({o:t.o,YA:n||Z5.image,lB:t.lB,dB:isFinite(t.dB)?t.dB:void 0,ct:t.ct,kzt:t.kzt,uo:i6(s.position),Kb:e6(s.size),nai:s.opacity,rai:t6(s.gamProperties),pJt:null==(i=s.resourceURI)?void 0:i.map((t=>function(t){const i=H5[t.type];let e=t.default;Ro.Qs&&t.phone?e=t.phone:Ro.dg&&t.tv&&(e=t.tv);return{YA:i,$yt:e}}(t))),oai:s.clickThroughURI});this.Soi(r,t)}catch(t){Fe.cA(t)}break;case K5:{const i=t.xzt["X-RESUME-OFFSET"],e=new q5({o:t.o,lB:t.lB,$yt:this.Cai||t.xzt["X-ASSET-URI"],joi:this.Lai||Ca[t.xzt["X-COM-THEOPLAYER-THEOADS-LAYOUT"]]||Ca.SINGLE,hai:t.xzt["X-COM-THEOPLAYER-THEOADS-BACKDROP"],dB:isFinite(t.dB)?t.dB:void 0,ct:t.ct,kzt:t.kzt,goi:void 0!==i?Number(i):void 0});this.Soi(e,t),this.jai=e}}}kai(t){const i=t.U;if(!function(t){return"GEO"===t.id||"GEOB"===t.id}(i)||!function(t){return"Anvatos"===t.description&&"application/json"===t.mimeType}(i))return;const e=Zo(new DataView(i.data),new da),s=new I_(e),n=s.get("type");if("cue"===n){let i=Number(s.get("duration"))/1e3||void 0;const e=new I_(s.get("payload")),n=Number(e.get("dur"))||void 0,r=Number(e.get("s_bd"))||void 0;if(void 0!==n?i=n:void 0!==r&&(i=r/10),!i)return void 0;const o="theo-ads://dai.break/?d="+i,h=Number(s.get("pts"))||void 0,a=new q5({o:this.Cai||t.o,lB:t.lB,$yt:o,joi:this.Lai||Ca.SINGLE,kzt:i,Cvt:h});this.Soi(a,t)}else if("cue_end"===n){const i=this.jai;i&&i.Yn({ct:t.lB-i.lB})}}Oai(t){this.Rai.get(t.Gx)&&this.KRt.Pai(t.lB)}zai(t){for(const i of this.uai)if(t.o===i.o&&t.YA===i.YA)return!0;return!1}Soi(t,i){this.zai(t)||(this.uai.push(t),i&&this.Rai.set(i.Gx,t),this.KRt.Soi(t))}Bai(t){const i=this.Rai.get(t.Gx);if(void 0===i)return;const e=t.xzt["X-RESUME-OFFSET"];i.Yn({ct:t.ct,dB:isFinite(t.dB)?t.dB:void 0,goi:void 0!==e?Number(e):void 0})}Tai(t){this.Uai(t)}Uai(t){void 0!==this.Rai.get(t.Gx)&&this.Rai.delete(t.Gx)}Noi(t){ra(this.uai,t)}tr(){var t,i;this.jai=void 0,this.yai(void 0),this.Mai(void 0);for(const t of this._ai.slice())this.wai(t);nt(this._ai),nt(this.uai),this.Rai.clear(),null==(t=this.lai)||t.removeEventListener("adbreak",this.fai),null==(i=this.lai)||i.close(),this.lai=void 0}gn(){this.tr()}constructor(t){this.pai=!1,this.uai=[],this.Rai=pc(),this._ai=[],this.zn=t=>{this.vai(t.Ht)},this.qn=t=>{this.mai(t.Ht)},this.Sai=t=>{this.Dai(t.uB)},this.Eai=t=>{this.kai(t.uB)},this.Iai=t=>{this.Oai(t.uB)},this.nhi=t=>{this.Tai(t.uB)},this.Nai=t=>{this.Bai(t.uB)},this.fai=t=>{this.xai(t)},this.KRt=t}};function t6(t){if(!t)return;let i=t.sz.default;return Ro.Qs&&t.sz.phone?i=t.sz.phone:Ro.dg&&t.sz.tv&&(i=t.sz.tv),{Qai:t.iu,Fai:i}}function i6(t){let i,e,s,n;return t.top&&t.top>=0&&t.top<=100?i=t.top:t.bottom&&t.bottom>=0&&t.bottom<=100?e=t.bottom:i=10,t.left&&t.left>=0&&t.left<=100?s=t.left:t.right&&t.right>=0&&t.right<=100?n=t.right:s=10,{Ztt:i,Wtt:e,Gtt:s,Vtt:n}}function e6(t){let i,e;return i=t.width&&t.width>=0&&t.width<=100?t.width:10,e=t.height&&t.height>=0&&t.height<=100?t.height:10,{ji:i,Ti:e}}il(),r();var s6=class{Coi(t){this.Yai=t}get w3t(){return this.P5t}get N3t(){var t;return void 0!==(null==(t=this.Yai)?void 0:t.frt)}get f3t(){return ah.Jnt}get lrt(){var t;return(null==(t=this.Yai)?void 0:t.dti)?[this.Yai.dti]:[]}get frt(){var t,i;return null!=(i=null==(t=this.Yai)?void 0:t.frt)?i:null}get grt(){return this.Yai?Ms(this.Yai.n1t,(t=>{var i;const e=t.Vc;if(t===(null==(i=this.Yai)?void 0:i.frt)&&void 0!==this.Yai.dti){const t=e.indexOf(this.Yai.dti);if(t>=0)return e.slice(t+1)}return t.rk?[]:e})):[]}get _rt(){return this.Yai?this.Yai.n1t.filter((t=>{var i;return t===(null==(i=this.Yai)?void 0:i.frt)||!t.rk})):[]}ZC(){}wrt(t){}gn(){return this.Yai=void 0,Promise.resolve(void 0)}constructor(){this.P5t=new Yt}};r();var n6=class{Vai(t){this.theoAdsPlayer.Hoi(t)}get ga(){return function(t){return{replaceAdTagParameters(i){t.Vai(i)}}}(this)}constructor(t){this.theoAdsPlayer=t}},r6=class extends nB{get Hnt(){return this.Gai}constructor(t,i){super(i),this.Gai=new n6(t)}};r(),Qi();var o6=class{get Wai(){return this.Zai}get Hai(){return this.Xai}get qai(){return this.Qoi}set qai(t){this.Qoi=t}async Kai(t){this.Zai.push(t),this.Xai.style.display="";const i=h.createElement("div");i.className="theoplayer-theoads-overlay",i.style.display="",this.Jai.set(t.o,i);const e=h.createElement("a"),s=await this.$ai(t);if(s.clickThroughURI&&(this.Xai.style.zIndex="11",e.href=s.clickThroughURI,e.target="Vu",e.setAttribute("rel","noopener"),e.addEventListener("mousedown",this.iei),e.addEventListener("touchend",this.iei)),t.eai===Z5.image&&(e.style.backgroundImage="url("+s.resourceURI+")",e.style.backgroundSize="contain",e.style.backgroundPosition="center",e.style.backgroundRepeat="no-repeat",s.impressionURI)){const t=h.createElement("img");t.src=s.impressionURI,t.style.display="none",e.appendChild(t)}pn(e),i.appendChild(e),i.style.cssText=this.tui(t),this.Xai.appendChild(i)}iui(t){const i=this.Jai.get(t.o);i&&(this.Xai.contains(i)&&this.Xai.removeChild(i),this.Jai.delete(t.o),0===this.Jai.size&&(this.Xai.style.display="none"),ra(this.Zai,t))}eui(){this.Jai.forEach(((t,i)=>{this.Xai.contains(t)&&this.Xai.removeChild(t)})),this.Jai.clear(),this.Zai=[]}tui(t){const i=t.uo;let e=0,s=1;if(this.Xai.clientWidth>0&&this.Xai.clientHeight>0){const t=this.ta.Tk/this.ta.yk,i=this.Hai.clientWidth,n=this.Hai.clientHeight,r=i/t,o=(n-r)/2;e=0===n?0:x.floor(o/n*100),s=0===n?1:x.floor(100*(1-(n-r)/n))/100}let n="position:absolute;zIndex:10;";if(i.Gtt&&(n+="left:"+i.Gtt+"%;"),i.Vtt&&(n+="right:"+i.Vtt+"%;"),i.Ztt){n+="top:"+(i.Ztt*s+e)+"%;"}if(i.Wtt){n+="bottom:"+(i.Wtt*s+e)+"%;"}const r=t.Kb;return r.ji&&(n+="width:"+r.ji+"%;"),r.Ti&&(n+="height:"+r.Ti*s+"%;"),t.nai&&t.nai>0&&t.nai<=100&&(n+="opacity:"+t.nai/100+";"),n}async sui(t){if(!t)return;const i=this.nui(t);return i?await this.rui(i,this.OQ):void 0}async $ai(t){const i={resourceURI:""},e=await this.sui(t.rai);if(e)i.resourceURI=e.image,i.impressionURI=e.impression;else if(t.pJt){const e=dl(t.pJt,(t=>t.YA===H5.svg));e&&(i.resourceURI=e.$yt);const s=dl(t.pJt,(t=>t.YA===H5.png));s&&(i.resourceURI=s.$yt)}var s;return i.clickThroughURI=null!=(s=null==e?void 0:e.clickThrough)?s:t.oKt,t.Yn({imageUrl:i.resourceURI,clickThrough:i.clickThroughURI}),i}nui(t){const i=new I_(this.Qoi);return i.set("iu",t.Qai),i.set("sz",t.Fai),i.set("c",String(this.oui)),"https://securepubads.g.doubleclick.net/gampad/adx?"+i.toString()}async rui(t,i){const e=new Gs({zu:t,oI:Ee.CN,LI:Ve.GET});try{const t=await i.hI(e);return await t.rI()}catch(t){throw new Ie(nn.NETWORK,$u.UNKNOWN_AD_RESPONSE,"The ad source could not be loaded.",t)}}tr(){this.eui(),this.Xai.style.display="none"}constructor(t,i,e){this.Zai=[],this.Jai=ll(),this.oui=(new Date).getTime(),this.hui=()=>{this.Zai.forEach((t=>{this.Jai.get(t.o).style.cssText=this.tui(t)}))},this.iei=t=>{t.stopPropagation()},this.ta=t,this.ta.yn(Th.pn,this.hui);const s=h.createElement("div");s.style.display="none",s.className="theoads-image-overlays-container",i.appendChild(s),pn(s),this.Xai=s,this.aui=e,this.OQ=Fe.wE}};r(),r();var h6=class extends p5{constructor(t,i){super(t),this.JM=x.min(i,this.Yl.t1t)}},a6=class extends m5{get Roi(){return w5.DEFAULT}D$(t,i,e){return vn.resolve()}Hoi(t){}Joi(t,i,e){let s;if(this.boi=t,t.lB<i){const e=x.min(t.ct,t.coi-i);s=t.ct-e,t.Yn({ct:e,_oi:s})}return this.xoi({sources:{src:t.$yt}},e,s)}Ioi(){super.Ioi(),this.x5t.yn(E.oP,this.uui),this.x5t.yn(Zi.qy,this.wtt),this.x5t.yn(Me.ua,this.JHt)}Toi(){this.x5t.fn(E.oP,this.uui),this.x5t.fn(Zi.qy,this.wtt),this.x5t.fn(Me.ua,this.JHt),super.Toi()}ld(t){var i;const e=this.toi(t.currentTime),s=this.boi.i5t;this.boi.doi(e);const n=this.boi.i5t;s<.25&&n>=.25?this.P5t.yo(new z2(this.m1t,e)):s<.5&&n>.5?this.P5t.yo(new U2(this.m1t,e)):s<.75&&n>=.75?this.P5t.yo(new F2(this.m1t,e)):(null==(i=this.boi)?void 0:i.rk)&&this.Cd(e)}Cd(t){super.Cd(t),this.n7=!1}async tr(){await super.tr(),this.n7=!1}constructor(...t){super(...t),this.n7=!1,this.JHt=()=>{this.yo(new mc(nn.GENERAL))},this.uui=t=>{!this.n7&&this.boi&&(this.n7=!0,this.D1t=this.N5t(this.boi),this.m1t=new h6(this.D1t,this.x5t._d()),this.boi.Yn({ad:this.dti}),this.P5t.yo(new Qt(this.D1t)),this.P5t.yo(new gB(this.m1t,this.toi(t.currentTime))))},this.wtt=t=>{this.Cd(this.toi(t.currentTime))}}};r(),ds(),r(),r();var u6=class extends Xt{},c6=class extends u6{ur(t,i){t.style.flex="1"}ar(t){t.style.flex="0"}constructor(t){super(t)}};r();var l6=class extends u6{ur(t,i){i.style.backgroundImage="url('"+this.ahi+"')",i.style.backgroundSize="contain",i.style.backgroundPosition="center",t.style.flex="1",t.style.transition=["flex","border-width","transform"].map((t=>t+" 1s ease-in-out")).join(", "),t.style.transform="\n          translate(-50%, -50%)\n          scale(calc(43/60))\n          translate(calc(50% + 100%/30), calc(50% + 100%/30))\n        "}ar(t){t.style.flex="0",t.style.transform=""}constructor(t,i){super(t),this.ahi=i}};r();var d6=class extends tu{get Wai(){return this.ta.Wai.map((t=>t.drt()))}get cui(){return this.ta.cui.map((t=>t.drt()))}Vai(t){this.ta.Hoi(t)}get ga(){var t;return null!=(t=this.Za)?t:this.Za=function(t){return{get currentInterstitials(){return t.Wai},get scheduledInterstitials(){return t.cui},replaceAdTagParameters(i){t.Vai(i)},addEventListener(i,e){t.yn(i,e)},removeEventListener(i,e){t.fn(i,e)}}}(this)}constructor(t){super(),this.ta=t}};r();var f6=class extends ua{ma(){return new g6(this.interstitial.drt())}constructor(t){super("lui"),this.interstitial=t}},g6=class extends Jr{constructor(t){super("interstitialend"),this.interstitial=t}};r();var _6=class extends ua{ma(){return new v6(this.interstitial.drt())}constructor(t){super("dui"),this.interstitial=t}},v6=class extends Jr{constructor(t){super("addinterstitial"),this.interstitial=t}};r();var w6=class extends ua{ma(){return new m6(this.interstitial.drt())}constructor(t){super("fui"),this.interstitial=t}},m6=class extends Jr{constructor(t){super("interstitialbegin"),this.interstitial=t}},p6=class extends Or{get Wai(){return[this.Yai.yoi].filter($t)}get cui(){return this.gui.aai}Xnt(){return this._ui.ga}get Vc(){return this.vui}get qai(){var t,i,e;return null!=(e=null!=(i=this.Qoi)?i:null==(t=this.wui)?void 0:t.adTagParameters)?e:{}}Hoi(t){var i,e;this.Qoi=t,this.Yai.Hoi(null!=(e=null!=t?t:null==(i=this.wui)?void 0:i.adTagParameters)?e:{})}Pk(){this.n7||(this.n7=!0,this.mui=this.ta.Xz,this.pui=this.ta.ck,this.ta.Xz=!1,this.ta.ck=Nr.Mz),super.Pk()}async ka(t,i){var e;await super.ka(t,i);if(void 0===(null==(e=this.ta.bt)?void 0:e.src)||void 0===(null==t?void 0:t.ads))return;const s=dl(t.ads,Q5);if(void 0!==s){if(this.wc=t,this.wui=s,this.Aui=s.overrideAdSrc,this.yui=s.backdropLShape,s.networkCode&&s.customAssetKey){const t=this.Yai.n1t;await this.Yai.tr(),this.Yai=new T5(this,this.aui,this.we,t,this.qai,this.wui.streamActivityMonitorId,this.wui.retrievePodIdURI),this.Yai.D$(s.networkCode,s.customAssetKey,this.qai).then(ya)}this.gui.pai=s.useId3,this.gui.gai(this.ta.nt),this.bui=new c6(this.ta),this.bui.ur(this.ta.we,this.ta.we.parentElement),this.ta.yn(E.sP,this.wd),this.zz(this.bui)}}Soi(t){this.Mui&&(t.yn("uoi",this.Tui),S6(t)&&this.Yai.Soi(t),this.Sui(this.ta.LE()),this._ui.yo(new _6(t).ga))}Sui(t){var i;const e=this.LE();this.gui.aai.filter((t=>t.rk||t.coi&&t.coi<e)).forEach((t=>this.Noi(t)));const s=this.gui.aai.filter((t=>t.lB<=e&&(!t.coi||e<t.coi)));if(this.Nui=s[s.length-1],!this.Nui||void 0!==this.Iui)return;const n=this.Nui;null==(i=this.Dui)||i.Ty(),this.Dui=new Wt,this.Iui=this.Joi(t,n,this.Dui.ly)}async Joi(t,i,e){var s;const n=this.Aui||G5(i);if(n&&this.Yai.Roi!==w5.DEFAULT){const t=this.Yai.n1t;await this.Yai.tr(),this.Yai=new a6(this,this.aui,t)}if(!n&&this.Yai.Roi!==w5.GOOGLE){var r,o;const t=this.Yai.n1t;await this.Yai.tr(),this.Yai=new T5(this,this.aui,this.we,t,this.qai,null==(r=this.wui)?void 0:r.streamActivityMonitorId,null==(o=this.wui)?void 0:o.retrievePodIdURI)}for(;this.LE()<t;)await this.ta.zy(Zi.Eb,e);this.gUt=this.ta.NE,null==(s=this.bui)||s.ar(this.ta.we),await this.ta.zk(),this._ui.yo(new w6(i).ga),await this.Yai.Joi(i,t,e),this.bui=this.Eui(i.joi,this.yui),this.F4t(this.bui),this.bui.ur(this.we,this.ta.we.parentElement),this.ta.Pk(),this.aui.w3t.yn("Mrt",this.kui)}Eui(t,i){switch(t){case Ca.LSHAPE_AD:return new l6(this.ta,i);case Ca.SINGLE:default:return new c6(this.ta)}}Noi(t){this.gui.Noi(t),S6(t)&&this.Yai.Noi(t),this.Mui&&this._ui.yo(new f6(t).ga)}PE(){var t;return null!=(t=this.ZG)?t:super.PE()}BE(){var t;return null!=(t=this.dV)?t:super.BE()}eG(t){void 0===this.BE()&&(this.dV=t,this.ZG=la(t),this.yo(new Uc(t)))}async zk(){var t,i;(this.Nui=void 0,this.bui=void 0,this.Aui=void 0,this.wui=void 0,this.n7)&&(this.ta.Xz=null!=(t=this.mui)&&t,this.ta.ck=null!=(i=this.pui)?i:Nr.pG,this.n7=!1,this.mui=void 0,this.pui=void 0);this.gui.tr(),await this.Yai.tr(),await this.ta.zk(),await super.zk()}async gn(){await this.zk().catch(ya),this.bui=void 0,this.gui.gn(),await this.Yai.gn(),await this.ta.gn(),await super.gn()}Pai(t){this.Sui(t)}constructor(t){super(t),this.dV=void 0,this.ZG=void 0,this.n7=!1,this.Mui=!1,this.wd=()=>{this.Pai(this.LE()),this.Mui=!0,this.ta.fn(E.sP,this.wd),this.gui.aai.forEach((t=>this.Soi(t)))},this.Tui=t=>{this._ui.yo(t.ga)},this.kui=async()=>{var t;const i=this.Nui;this.Nui=void 0,i&&(await this.ta.zk(),await this.ta.ka(this.wc,(new Wt).ly),null==(t=this.bui)||t.ar(this.ta.we),this.bui=new c6(this.ta),this.bui.ur(this.ta.we,this.ta.we.parentElement),this.F4t(this.bui),this.ta.Pk(),this.ta.NE=new Date(Number(this.gUt)+1e3*i.ct),this.Iui=void 0,this.Nui=void 0,this.gUt=void 0,this.aui.w3t.fn("Mrt",this.kui))},this.ta=t,this._ui=new d6(this),this.aui=new s6,this.Yai=new a6(this.ta,this.aui,[]),this.vui=new r6(this,this.ta.Vc),this.vui.mrt(this.aui),this.gui=new $5(this)}};r(),ds();var A6=class extends Or{get ioi(){return this.xui}get Kri(){return this.Lui}Xri(){this.xui=this.Qnt.LE()+this.Lui}hoi(){var t;if(void 0!==this.Iui)return;const i=this.Cui;this.Cui=void 0,null==(t=this.jui)||t.Ty(),T6(this.Qnt)&&(this.Oui=new Wt,this.Iui=Vh(this.Rui(i,this.Oui.ly),this.Oui).catch(Ct))}aoi(){var t;const i=this.Iui;this.Iui=void 0,null==(t=this.Oui)||t.Ty(),this.jui=new Wt,this.Cui=Vh(this.Pui(i,this.jui.ly),this.jui).catch(Ct)}_a(){return this.Qnt.LV}zui(){this.Bui={source:this.Qnt.Ya(),duration:this.Qnt._d(),currentTime:this.Qnt.LE(),preload:this.Qnt.ck,autoplay:this.Qnt.Xz}}async Uui(t){this.Qnt.ck=Nr.Mz,this.Qnt.Xz=!1,this.x5t.WE=!0;const i=this.x5t.Ya();await this.Qnt.ka(i,t),this.Qnt.CE(this.x5t.LE())}async Qui(t){this.Bui&&(this.Qnt.ck=this.Bui.preload,this.Qnt.Xz=this.Bui.autoplay,await this.Qnt.ka(this.Bui.source,t),this.Bui=void 0)}async Rui(t,i){await(null==t?void 0:t.catch(ya)),this.zui(),this.Fui=this.Qnt.NE,await this.Qnt.zk(),await this.Uui(i),this.F4t(this.Qnt),this.Qnt.Pk()}async Pui(t,i){await(null==t?void 0:t.catch(ya)),this.Yui=this.x5t.LE(),this.Lui=this.Yui+this.ioi,await this.Qnt.zk(),await this.Qui(i),this.F4t(this.x5t),this.Qnt.yn(E.nP,this.Vui),this.Qnt.Pk()}Ya(){return this.Bui?this.Bui.source:super.Ya()}_d(){return this.Bui?this.Bui.duration:super._d()}vk(){const t=super.vk();return Mo.xn(t).Gb(this.ioi).ks()}SE(){const t=super.SE();return Mo.xn(t).Gb(this.ioi).ks()}tr(){this.Lui=0,this.xui=0,this.Yui=0,this.Fui=void 0}async gn(){await super.gn(),this.tr(),this.Qnt.fn(E.nP,this.Vui)}constructor(t,i){super(i),this.xui=0,this.Lui=0,this.Yui=0,this.Vui=()=>{if(this.Qnt.fn(E.nP,this.Vui),this.Fui){const t=this.Fui;t.setSeconds(this.Fui.getSeconds()+this.Yui),this.Qnt.NE=t,this.Fui=void 0}this.Lui-=this.Qnt.LE()},this.Qnt=t,this.x5t=i}};r();var y6=class extends ua{ma(){return new b6(this.interstitial.drt(),this.Pb)}constructor(t,i){super("Gui"),this.interstitial=t,this.Pb=i}},b6=class extends Jr{constructor(t,i){super("interstitialerror"),this.interstitial=t,this.message=i}},M6=class extends Or{Wui(){this.Qnt.Pnt.yn("presentationmodechange",this.Zui)}Hui(){this.Qnt.Pnt.fn("presentationmodechange",this.Zui)}get Pnt(){return this.Qnt.Pnt}async ka(t,i){if(this.Xui(),yi(i),await super.ka(t,i),void 0===t||void 0===t.ads)return;const e=dl(t.ads,Q5);if(void 0!==e){if(this.qui(),this.Kui(),this.wui=e,this.Jui=e.backdropDoubleBox,this.$ui=e.backdropLShape,this.gui.Lai=function(t){switch(t){case"single":return Ca.SINGLE;case"l-shape":return Ca.LSHAPE_AD;case"double":return Ca.DOUBLE;case"single-if-mobile":return Ro.Qs?Ca.SINGLE:void 0;default:return}}(e.overrideLayout),this.gui.Cai=e.overrideAdSrc,void 0!==e.networkCode&&void 0!==e.customAssetKey){const t=this.Yai.n1t,i=new T5(this.x5t,this.Loi,this.zoi,t,this.qai,e.streamActivityMonitorId,e.retrievePodIdURI);await this.tci(i),this.Yai.D$(e.networkCode,e.customAssetKey,this.qai).catch((t=>{0}))}var s;if(this.ici(),this.ta.yn(E.sP,this.wd),this.gui.pai=e.useId3,this.gui.gai(this.Qnt.nt),this.eci.qai=e.adTagParameters,void 0!==e.sources)this.sci(e.sources+(null==(s=this.Qnt.bt)?void 0:s.src));this.nci(new c5(this.Qnt,this.x5t),!1,!0),this.Qnt.yn(E.nP,this.rci)}}async tci(t){await this.Yai.tr(),this.Yai=t}sci(t){this.hci=new Wt,this.aci=new U5(this.Qnt,t,this.Qnt.wE,this.hci.ly),this.gui.gai(this.aci.nt)}Xui(){var t;void 0!==this.aci&&(null==(t=this.hci)||t.Ty(),this.hci=void 0,this.aci.gn(),this.aci=void 0)}qui(){this.uci||(this.uci=!0,Gd(this.cci),Gd(this.lci),Y5(this.Vs),Y5(this.cci),Y5(this.lci),function(t){const i=t.style;i.display="flex",i.alignItems="center"}(this.Vs))}dci(){this.uci&&(this.uci=!1,V5(this.Vs),V5(this.cci),V5(this.lci),pn(this.cci),pn(this.lci))}Ok(){this.Qnt.Ok(),this.x5t.Ok()}Ynt(){return this.Qnt.Snt}jE(){return this.Vs}get Vc(){return this.vui}get Wai(){return[this.Yai.yoi,...this.eci.Wai].filter($t)}get cui(){return this.Mui?this.gui.aai:[]}Xnt(){return this._ui.ga}get qai(){var t,i,e;return null!=(e=null!=(i=this.Qoi)?i:null==(t=this.wui)?void 0:t.adTagParameters)?e:{}}Pk(){super.Pk(),this.yo(new fi(this.LE())),this.fci=!0}CE(t,i){this.gci=!0,super.CE(t,i)}Hoi(t){var i,e;this.Qoi=t,this.Yai.Hoi(null!=(e=null!=t?t:null==(i=this.wui)?void 0:i.adTagParameters)?e:{}),this.eci.qai=t}nci(t,i,e){var s;void 0!==this._ci&&(this._ci.ar(this.we,this.cci,this.lci),this._ci.gn());const n=null!=(s=this._ci)?s:this,r=null!=t?t:this.Qnt;a5(n,r),null==t||t.ur(this.we,this.cci,this.lci,n,i),this._ci=t,e?this.zz(r):this.F4t(r)}ici(){this.Qnt.yn(Zi.Eb,this.vci),this.Qnt.yn(Zi.Mb,this.eZ),this.Qnt.yn(Zi.mb,this.BI)}wci(){this.Qnt.fn(Zi.Eb,this.vci),this.Qnt.fn(Zi.Mb,this.eZ),this.Qnt.fn(Zi.mb,this.BI)}mci(){this.x5t.yn(Zi.mb,this.pci),this.Loi.w3t.yn("Mrt",this.Aci),this.Qnt.yn(Zi.fb,this.qhi)}yci(){this.x5t.fn(Zi.mb,this.pci),this.Loi.w3t.fn("Mrt",this.Aci),this.Qnt.fn(Zi.fb,this.qhi)}Sui(t){this.bci(t),this.Mci(t),this.Tci(t)}Sci(){const t=this.LE(),i=[];this.Nci.forEach((e=>{t>=e.lB&&(void 0===e.coi||t<e.coi)||i.push(e)})),i.forEach((t=>this.Noi(t)));for(const i of this.gui.aai.filter(N6)){const e=i.coi;if(void 0!==e&&t>=e)continue;const s=i.lB,n=i.lB+i.ct;t>=s&&t<=n&&!this.Nci.has(i.o)&&(this.eci.Kai(i).catch((()=>{this._ui.yo(new y6(i,"Could not load the overlay.").ga)})),this._ui.yo(new w6(i).ga),this.Nci.set(i.o,i))}}bci(t){let i;const e=[];for(const s of this.gui.aai.filter(S6)){if(s.rk){e.push(s);continue}const n=s.coi;void 0!==n&&t>=n?(s.rk=!0,e.push(s)):void 0!==i&&i.lB<s.lB||(i=s)}for(const t of e)this.Noi(t);this.Nui!==i&&(this.Nui=i,this.Ici())}Ici(){var t;this.Yai.Moi(),null==(t=this.Dci)||t.Ty(),this.Eci=void 0,this.kci=void 0}Mci(t){if(void 0===this.Nui||void 0!==this.Eci||this.xci)return;let i=!1;const e=Mo.xn(this.Qnt.SE()).CP(t);if(void 0!==e&&(i=e.jn(0)>=this.Nui.lB),S6(this.Nui)){const e=this.Nui,s=e.coi,n=t>=e.lB&&(void 0===s||t<s);(i||n)&&(this.Dci=new Wt,this.Eci=Vh(this.Joi(e,t,this.Dci.ly),this.Dci).catch((()=>{this._ui.yo(new y6(this.Nui,"Could not load the ad break.").ga)})))}}async Joi(t,i,e){const s=G5(t);if(s&&this.Yai.Roi!==w5.DEFAULT){const t=this.Yai.n1t,i=new a6(this.x5t,this.Loi,t);await this.tci(i)}if(!s&&this.Yai.Roi!==w5.GOOGLE){var n,r;const t=this.Yai.n1t,i=new T5(this.x5t,this.Loi,this.zoi,t,this.qai,null==(n=this.wui)?void 0:n.streamActivityMonitorId,null==(r=this.wui)?void 0:r.retrievePodIdURI);await this.tci(i)}try{await this.Yai.Joi(t,i,e)}catch(i){Tu(i)||(this._ui.yo(new y6(t,"Could not load the interstitial.").ga),t.rk=!0,this.Nui=void 0)}}Tci(t){if(void 0===this.Nui||void 0!==this.kci||this.xci)return;const i=this.Nui.coi;var e;t>=this.Nui.lB&&(void 0===i||t<i)&&(this.kci=null==(e=this.Eci)?void 0:e.then((()=>this.Lci())))}Lci(){if(void 0===this.Nui||!S6(this.Nui))return;const t=this.Nui,i=t.joi,e=this.Eui(i,t);this.wci(),Ro.qf&&Ro.Jf>=16&&Ro.Jf<18&&this.x5t.CE(this.x5t.LE()),Ro.Zd&&!e.$ri()&&(V5(this.cci),pn(this.cci)),this.nci(e,this.fci,!1),this._ui.yo(new w6(t).ga),this.mci(),this.xci=!0,this.kci=void 0}Eui(t,i){if(T6(this.Qnt))return new l5(this.Qnt,this.x5t);switch(t){case Ca.DOUBLE:return i.Jhi||i.Yn({backdropUri:this.Jui}),new S5(this.Qnt,this.x5t,i.Jhi);case Ca.LSHAPE_AD:return i.Jhi||i.Yn({backdropUri:this.$ui}),new D5(this.Qnt,this.x5t,i.Jhi);case Ca.LSHAPE_CONTENT:return i.Jhi||i.Yn({backdropUri:this.$ui}),new I5(this.Qnt,this.x5t,i.Jhi);case Ca.SINGLE:default:return new d5(this.Qnt,this.x5t)}}Cci(){var t,i;const e=null==(t=this.Nui)?void 0:t.coi;if(void 0===e||(null==(i=this._ci)?void 0:i.$ri())||ce(this.Qnt.LE(),e,.001))return;const s=Mo.xn(this.x5t.SE()),n=this.x5t.vk(),r=x.min(n.end(n.length-1),this.Nui.ct);s.fP().gr(r)&&this.Qnt.CE(e,{gBt:!0})}P4t(){var t;if(void 0===this.Nui)return;this.yci();const i=null==(t=this._ci)?void 0:t.$ri();Ro.Zd&&(Gd(this.cci),Y5(this.cci)),this.nci(new c5(this.Qnt,this.x5t),!0,!1),i||(this.gci=!1,this.Qnt.CE(this.Nui.coi,{gBt:!0})),this.ici(),this.xci=!1,this.Nui=void 0}Soi(t){this.Mui&&(S6(t)&&(this.Yai.Soi(t),this.bci(this.Qnt.LE())),t.yn("uoi",this.Tui),this._ui.yo(new v6(t.drt())))}Noi(t){S6(t)?this.Yai.Noi(t):N6(t)&&(this.eci.iui(t),this.Nci.delete(t.o)),this.gui.Noi(t),this.Mui&&(t.fn("uoi",this.Tui),this._ui.yo(new f6(t).ga))}Pai(t){this.Sui(t),this.Sci()}PE(){var t;return null!=(t=this.ZG)?t:super.PE()}BE(){var t;return null!=(t=this.dV)?t:super.BE()}eG(t){void 0===this.BE()&&(this.dV=t,this.ZG=la(t),this.yo(new Uc(t)))}async zk(){this.dV=void 0,this.ZG=void 0,this.Nui=void 0,this.fci=!0,this.xci=!1,this.Mui=!1,this.gui.tr(),this.wci(),this.yci(),this.ta.fn(E.sP,this.wd),this.Qnt.fn(E.nP,this.rci),this.Xui(),this.nci(void 0,!1,!0),await this.x5t.zk(),this.x5t.tr(),this.Ici(),await this.Yai.tr(),this.dci(),this.eci.tr(),this.Nci.clear(),await super.zk()}async gn(){await this.zk().catch(ya),this.Hui(),this.nci(void 0,!1,!0),this.gui.gn(),await this.Yai.gn(),await this.x5t.gn(),await super.gn()}Gk(t){if(void 0!==this._ci){const i=T6(this.Qnt);switch(t.type){case Zi.so:if(!i)return!0;break;case Zi.wb:if(this.OE&&this.xci)return!0;break;case E.oP:if(!this.fci&&!i)return!0;this.fci=!1;break;case E.rP:this.fci=!0;break;case Zi.Mb:if(!this.gci)return!0;break;case Zi.bb:if(!this.gci)return this.gci=!0,!0}}return super.Gk(t)}constructor(t){super(t),this.dV=void 0,this.ZG=void 0,this.Nci=ll(),this.uci=!1,this.fci=!0,this.gci=!0,this.xci=!1,this.Mui=!1,this.wd=()=>{this.Pai(this.LE()),this.Mui=!0,this.Qnt.fn(E.sP,this.wd),this.gui.aai.forEach((t=>this.Soi(t)))},this.Zui=t=>{if(this._ci&&!function(t){return t instanceof l5}(this._ci)&&this.xci)switch(t.presentationMode){case"native-picture-in-picture":this.nci(new l5(this.Qnt,this.x5t),!1,!1);break;case"fullscreen":N4(this.md)&&this.nci(new l5(this.Qnt,this.x5t),!1,!1);break}},this.rci=()=>{var t;this.Qnt.fn(E.nP,this.rci),(null==(t=this.wui)?void 0:t.sseEndpoint)&&this.gui.cai(this.wui.sseEndpoint)},this.Kui=async()=>{try{await this.Ont.UH([ux.THEOADS])}catch(t){await this.zk().catch(ya),this.eG(vy(t,vt.LICENSE_INVALID_FEATURE))}},this.vci=t=>{this.Sui(t.currentTime),this.Sci()},this.eZ=t=>{this.Sui(t.currentTime),this.Sci()},this.BI=t=>{this.Mci(t.currentTime)},this.pci=t=>{T6(this.Qnt)||this.Cci()},this.qhi=t=>{T6(this.Qnt)||this.Cci()},this.Aci=()=>{this.P4t()},this.Tui=t=>{this._ui.yo(t.ga)},this.Vs=t.we;const{contentElement:i,adElement:e}=F5(this.Vs);this.cci=i,this.lci=e,pn(this.cci),pn(this.lci),this.Qnt=t;const s=new W2(new Bz(this.lci,t.md,new Mx),oc.Ld);s.ck=Nr.Mz,s.Xz=!1,this.x5t=new A6(this.Qnt,s),this.zoi=function(t){const i=h.createElement("div");return Ea(i,"theo-ads-sgai-ima-container"),function(t){t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%"}(i),t.appendChild(i),i}(e),this._ui=new d6(this),this.Loi=new s6,this.Yai=new a6(this.x5t,this.Loi,[]),this.gui=new $5(this),this.vui=new r6(this,t.Vc),this.vui.mrt(this.Loi),this.eci=new o6(this,i,this.Loi),this.Wui()}};function T6(t){const i=t.Pnt.Uo()===Ba.FULLSCREEN&&N4(t.md);return t.LV.Lz||i}function S6(t){return"adbreak"===t.YA}function N6(t){return"overlay"===t.YA}var I6=class extends Xt{ka(t,i){var e;return void 0!==dl(null!=(e=null==t?void 0:t.ads)?e:[],Q5)?Promise.reject(new qi(vt.CONFIGURATION_ERROR,"THEOads must be enabled in the player configuration.")):super.ka(t,i)}};Mr((t=>t.md.ads.theoads?Ro.Nf||Ro.kf?new p6(t):new M6(t):new I6(t)),F.Jnt),r(),r(),r(),il(),Qi(),r(),r();var D6=class extends tu{get ga(){return this.Za||(this.Za=function(t){return{get casting(){return t.TJ},get state(){return t.$gt},start(){t.Uk()},stop(){t.Qk()},addEventListener(i,e){const s=Mt(i,Q);t.yn(s,e)},removeEventListener(i,e){const s=Mt(i,Q);t.fn(s,e)}}}(this)),this.Za}constructor(...t){super(...t),this.Za=void 0}},E6=class extends D6{get TJ(){return this.$gt===Dt.CONNECTED}get $gt(){return this.Ea}jci(){this.Oci(),this.gpt.yn(Zi.ro,this.Rci),this.Na(Dt.AVAILABLE)}Oci(){this.ta&&this.ta.fn(Zi.By,this.handleAirplayChangedEvent),this.Pci?this.ta=this.LK:this.ta=this.zci,this.ta.yn(Zi.By,this.handleAirplayChangedEvent)}get Pci(){return this.LK.Bk()}async Bci(){if(this.ta){if(this.Pci){if(!this.ta.KE){const t=new Promise((t=>u(t,800))),i=this.ta.zy(Zi.wb,this.Uci.ly);await Promise.race([i,t])}this.ta.Pk()}else{this.Qci=this.LK.xE,this.Fci=this.LK.NE,this.zci.yn(Zi.Eb,this.handleAirplayPlayerTimeUpdate),this.Yci=this.LK.xx,this.LK.xx=this.zci,this.Yci.Rk(),this.Yci.be(),this.zci.ge(),this.zci.WE=this.Yci.WE,this.zci.$E=this.Yci.$E,this.zci.Nk=this.Yci.Nk;const t=this.zci.zy(Zi.bb);this.zci.xE=this.Yci.xE,await t,this.zci.Pk(),this.zci.WE=this.Yci.WE,this.zci.$E=this.Yci.$E,this.zci.Nk=this.Yci.Nk}this.Na(Dt.CONNECTED)}}Vci(){if(this.Yci){this.zci.fn(Zi.Eb,this.handleAirplayPlayerTimeUpdate),this.Yci.WE=this.zci.WE,this.Yci.$E=this.zci.$E,this.Yci.Nk=this.zci.Nk;Ro.qf&&!Ro.Ka&&this.LK.ct===1/0?this.Fci?this.Yci.NE=this.Fci:this.Yci.xE=1/0:this.Yci.xE=this.Qci,this.Fci=void 0,this.Qci=void 0,this.Yci.ge(),this.zci.be(),this.zci.KE||this.Yci.Pk(),this.LK.xx=this.Yci,this.zci.tr(),this.Yci=void 0}else this.ta&&(this.ta.xE=this.ta.xE+1e-4);this.Na(Dt.AVAILABLE)}preloadPlayer(t){if(yi(t),this.ta.fk<Fn.Xn){const i=this.ta.zy(E.nP,t);return this.ta.ck=Nr.MQ,i}return Promise.resolve()}Na(t){t!==this.Ea&&(this.Ea=t,this.yo(new d2(this.Ea)))}Uk(){let t;this.gpt.Ok(),this.Uci.Ty(),this.Uci=new Wt,t=this.Pci?this.Gci(this.Uci.ly):this.Wci(this.Uci.ly),V(Vh(t,this.Uci))}async Gci(t){await this.preloadPlayer(t),this.LK.Uk()}async Wci(t){try{await this.zci.tr();const i=this.LK.Ya();if(void 0===i)throw new b("Not possible to start Airplay without a source");await this.zci.ka(i,t);const e=this.zci.zy(E.oP,t);this.zci.Pk(),await vw(e,3e3),this.zci.Rk(),yi(t),this.zci.Uk()}catch(t){if(Tu(t))return;0}}Qk(){this.ta.Qk()}gn(){var t;this.Bo(),this.gpt.fn(Zi.ro,this.Rci),this.Uci.Ty(),this.LK.Zz(this.zci),null==(t=this.zci)||t.gn()}constructor(t,i,e){super(),this.Ea=Dt.UNAVAILABLE,this.Uci=new Wt,this.Rci=()=>{var t;const i=null==(t=this.LK.Ya())?void 0:t.sources.filter(Vc);(null==i?void 0:i.some(HE))?this.Na(Dt.AVAILABLE):this.Na(Dt.UNAVAILABLE)},this.handleAirplayChangedEvent=()=>{this.ta&&this.ta.FE?this.Bci():this.$gt===Dt.CONNECTED&&this.Vci()},this.handleAirplayPlayerTimeUpdate=t=>{this.Qci=t.currentTime,this.Fci=this.LK.NE},this.gpt=t,this.LK=i,this.zci=e,this.zci.be(),i.Wz(e),this.jci()}};r();var k6=class extends D6{get TJ(){return!1}get $gt(){return Dt.UNAVAILABLE}Uk(){}Qk(){}};r();var x6=class extends gs{Yk(){this.Zci.Yk()}Wk(t){throw new b("Can't add a track while using AirPlay.")}get ht(){return this.Zci.ht}get TE(){return this.Zci.TE}get bt(){return this.AG}get xE(){return this.Zci.xE}set xE(t){this.CE(t)}CE(t,i){this.Zci.CE(t,i)}get NE(){return this.Zci.NE}get ct(){return this.Zci.ct}get we(){return this.Vs}get OE(){return this.Zci.OE}get lt(){return this.Zci.lt}get zE(){return this.Zci.zE}get UE(){return this.Zci.UE}get FE(){return this.Zci.FE}get Lk(){return this.Zci.Lk}get Ek(){return this.Zci.Ek}get VE(){return this.Zci.VE}get WE(){return this.Zci.WE}set WE(t){this.Zci.WE=t}get XE(){return this.Zci.XE}get KE(){return this.Zci.KE}get $E(){return this.Zci.$E}set $E(t){this.Zci.$E=t}get rk(){return this.Zci.rk}get ck(){return this.Zci.ck}set ck(t){this.Zci.ck=t}get fk(){return this.Zci.fk}get _k(){return this.Zci._k}get wk(){return this.Zci.wk}Bk(){return this.Zci.Bk()}Uk(){this.Zci.Uk()}Qk(){this.Zci.Qk()}get nt(){return this.Zci.nt}get yk(){return this.Zci.yk}get Tk(){return this.Zci.Tk}get rt(){return this.Zci.rt}get Nk(){return this.Zci.Nk}set Nk(t){this.Zci.Nk=t}Pk(){V(this.Zci.Pk())}Rk(){this.Zci.Rk()}async zk(){}Ya(){return this.wc}async ka(t,i){let e;if(yi(i),this.wc=t,gS(t.sources))e=xT({src:""});else{const i=t.sources.filter(Vc);for(const t of i)if(HE(t)){e=t;break}}if(!e)throw new b("Unsupported source.");await this.Zci.ka(e,t,i),this.DG(e)}DG(t){this.AG!==t&&(this.AG=t,this.yo(new ES(t)))}jk(){return this.Zci.jk()}bE(){return[]}Ok(){this.Hci.zG()}ur(t){NS(this,t)}ar(){}Vk(t){return!1}Fk(){this.Zci.Fk()}async tr(){this.AG=void 0,this.wc=void 0,await this.Zci.tr()}ge(){this.Zci.ge()}be(){this.Zci.be()}Ck(){return this.Zci.Ck()}_a(){return this.Zci._a()}async gn(){this.Bo(),this.Hci.gn(),await this.Zci.gn(),this.Oz.gn(),this.Pz.gn(),this.Ul.gn()}constructor(t,i,e,s,n,r,o){super(),this.AG=void 0,this.wc=void 0,this.Oz=new tl,this.Pz=new tl,this.Ul=new Ce,this.Vs=t,this.Hci=new So(r,o,1,[Ri.NI]),this.Hci.GG(t),this.Zci=new ZE(t,this.Hci,i,e,s,n),this.Zci.Ly(this.Ds),this.Oz.xx=this.Zci.ht,this.Pz.xx=this.Zci.rt,this.Ul.xx=this.Zci.nt}};Qi();var L6=class extends Xt{async gn(){this.Xci.gn(),await super.gn()}constructor(t){super(t);const i=new x6(this.xa.we,this.wE,this.md,this.Snt,this.Ek,this.knt,this.Ll);this.Xci=new E6(this,this.xa,i),this.qZ.EJ(this.Xci),this.yn(Zi.Gy,(()=>{this.Xci.Oci()}))}};Mr((t=>Fe.Ys.Mp?new L6(t):(t.qZ.EJ(new k6),t)),F.$nt),r(),r(),il();var C6="VPAID";function j6(t){return"spotx"===t.integration}oc.Ld.tW(new class t{get u3t(){return this.qci.u3t}$G(t){return j6(t)}c3t(i,e,s){return s.ads||(s.ads=wS({})),s.ads.vpaidMode=s.ads.vpaidMode||t.Kci(),this.qci.c3t(i,e,s)}D9(i,e,s,n){!function(t){if(!j6(t))throw new b("Unknown ad integration: "+t.integration)}(i);const r=t.Jci(i,s.we);this.qci.D9(r,e,s,n)}fH(t){const i=P(t);if(!j(i.id))return i.queryParameters||(i.queryParameters={}),i.custom&&(i.queryParameters.custom?Bi('"custom" parameter is redefined in queryParameters! Please use "queryParameters.custom" only!'):(i.queryParameters.custom=i.custom,delete i.custom)),i.app&&(i.queryParameters.app?Bi('"app" parameter is redefined in queryParameters! Please use "queryParameters.app" only!'):(i.queryParameters.app=i.app,delete i.app)),i.device&&(i.queryParameters.device?Bi('"device" parameter is redefined in queryParameters! Please use "queryParameters.device" only!'):(i.queryParameters.device=i.device,delete i.device)),i.user&&(i.queryParameters.user?Bi('"user" parameter is redefined in queryParameters! Please use "queryParameters.user" only!'):(i.queryParameters.user=i.user,delete i.user)),i.ipAddress&&(i.queryParameters.ip_addr?Bi('"ipAddress" parameter is redefined in queryParameters! Please use "queryParameters.ip_addr" or "ipAddress" only!'):(i.queryParameters.ip_addr=i.ipAddress,delete i.ipAddress)),i.maximumAdDuration&&(i.queryParameters.VMaxd?Bi('"maximumAdDuration" parameter is redefined in queryParameters! Please use "queryParameters.VMaxd" or "maximumAdDuration" only!'):(i.queryParameters.VMaxd=i.maximumAdDuration,delete i.maximumAdDuration)),i}static Jci(i,e){return{integration:pi.SPOTX,sources:{src:t.$ci(i,gi.location.href,e.offsetWidth,e.offsetHeight,Ro.Sg)}}}static $ci(i,e,s,n,r){if(i.sources)return i.sources;let o=n,h=s;r&&0===h&&(h=320,o=180);const a={custom_skin:1,player_width:h,player_height:o};i.cacheBuster&&(a.cb=x.random()),t.tli(e)&&(a.content_page_url=e);const u=Ei({},a,i.queryParameters);return u[C6]||u.VPI||(u[C6]="js"),"https://search.spotxchange.com/vast/2.0/"+i.id+"?"+t.ili(u)}static tli(t){return Et(t,"http://")||Et(t,"https://")}static ili(t){return n1(t)}static Kci(){return Ro.zf?$T.ENABLED:$T.INSECURE}constructor(){this.qci=new k4}}),r(),r(),r(),r(),r();var O6=class{eli(t,i){const e=this.sli;let s;switch(i){case e.VERTEX_SHADER:s=e.createShader(i),this.nli=s;break;case e.FRAGMENT_SHADER:s=e.createShader(i),this.rli=s;break;default:return void console.error("Invalid Shader Type:",i)}e.attachShader(this.oli,s),e.shaderSource(s,t),e.compileShader(s)}hli(t){const i=this.sli;if(t){this.ali={};for(const e in t)i.bindAttribLocation(this.oli,t[e],e),this.ali[e]=t[e]}}uli(){this.sli.linkProgram(this.oli)}cli(){const t=this.sli;if(this.lli){if(t.getProgramParameter(this.oli,t.LINK_STATUS)){if(!this.ali){this.ali={};const i=t.getProgramParameter(this.oli,t.ACTIVE_ATTRIBUTES);for(let e=0;e<i;e++){const i=t.getActiveAttrib(this.oli,e);this.ali[i.name]=t.getAttribLocation(this.oli,i.name)}}this.dli={};const i=t.getProgramParameter(this.oli,t.ACTIVE_UNIFORMS);let e="";for(let s=0;s<i;s++){e=t.getActiveUniform(this.oli,s).name.replace("[0]",""),this.dli[e]=t.getUniformLocation(this.oli,e)}}else this.nli&&!t.getShaderParameter(this.nli,t.COMPILE_STATUS)?console.error("Vertex shader compile error:",t.getShaderInfoLog(this.nli)):this.rli&&!t.getShaderParameter(this.rli,t.COMPILE_STATUS)?console.error("Fragment shader compile error:",t.getShaderInfoLog(this.rli)):console.error("Program link error:",t.getProgramInfoLog(this.oli)),t.deleteProgram(this.oli),this.oli=null;t.deleteShader(this.nli),t.deleteShader(this.rli),this.lli=!1}t.useProgram(this.oli)}constructor(t){this.ali=null,this.dli=null,this.lli=!0,this.nli=null,this.rli=null,this.sli=t,this.oli=t.createProgram()}},R6=class{pr(t,i,e){let s=this.sli;this.fli(t,i,s,e),this.t.KE||this.t.Ow.UX(s,s.TEXTURE_2D,0,s.RGBA,s.RGBA,s.UNSIGNED_BYTE),s.drawElements(s.TRIANGLES,this.gli,s.UNSIGNED_SHORT,0)}_li(t){this.vli||(t.bindTexture(t.TEXTURE_2D,this.wli),this.t.Ow.UX(t,t.TEXTURE_2D,0,t.RGB,t.RGB,t.UNSIGNED_BYTE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),this.vli=!0)}fli(t,i,e,s){const n=this.oli;n.cli(),this._li(e);const r=n.dli,o=n.ali;let h;e.uniformMatrix4fv(r.projectionMat,!1,t),e.uniformMatrix4fv(r.modelViewMat,!1,i),h="right"===s?this.mli:this.Ali,e.bindBuffer(e.ARRAY_BUFFER,h),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.yli),e.enableVertexAttribArray(o.position),e.enableVertexAttribArray(o.texCoord),e.vertexAttribPointer(o.position,3,e.FLOAT,!1,20,0),e.vertexAttribPointer(o.texCoord,2,e.FLOAT,!1,20,12),e.activeTexture(e.TEXTURE0),e.uniform1i(r.diffuse,0),e.bindTexture(e.TEXTURE_2D,this.wli)}constructor(t,i,e){this.vli=!1,this.sli=t,this.wli=t.createTexture();let s=["uniform mat4 projectionMat;","uniform mat4 modelViewMat;","attribute vec3 position;","attribute vec2 texCoord;","varying vec2 vTexCoord;","void main() {","  vTexCoord = texCoord;","  gl_Position = projectionMat * modelViewMat * vec4( position, 1.0 );","}"].join("\n"),n=["precision mediump float;","uniform sampler2D diffuse;","varying vec2 vTexCoord;","void main() {","  gl_FragColor = texture2D(diffuse, vTexCoord);","}"].join("\n");this.oli=new O6(t),this.oli.eli(s,t.VERTEX_SHADER),this.oli.eli(n,t.FRAGMENT_SHADER),this.oli.hli({position:0,texCoord:1}),this.oli.uli();const r=[],o=[],h=[],a=40;for(let t=0;t<=40;++t){const i=t*x.PI/40,s=x.sin(i),n=x.cos(i);for(let i=0;i<=a;++i){const h=2*i*x.PI/a-x.PI,u=x.sin(h)*s,c=n,l=-x.cos(h)*s,d=i/a,f=t/40;switch(e){case"horizontal":r.push(2*u,2*c,2*l,d/2,f),o.push(2*u,2*c,2*l,d/2+.5,f);break;case"vertical":r.push(2*u,2*c,2*l,d,f/2),o.push(2*u,2*c,2*l,d,f/2+.5);break;default:r.push(2*u,2*c,2*l,d,f)}}}for(let t=0;t<40;++t){let i=41*t,e=41*(t+1);for(let t=0;t<a;++t){let s=i+t,n=e+t;h.push(s,n,s+1,n,n+1,s+1)}}switch(this.Ali=t.createBuffer(),this.mli=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.Ali),t.bufferData(t.ARRAY_BUFFER,new Float32Array(r),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.mli),e){case"horizontal":case"vertical":t.bufferData(t.ARRAY_BUFFER,new Float32Array(o),t.STATIC_DRAW);break;default:t.bufferData(t.ARRAY_BUFFER,new Float32Array(r),t.STATIC_DRAW)}this.yli=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.yli),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array(h),t.STATIC_DRAW),this.gli=h.length,this.t=i}};r();var P6=class extends ua{ma(){return new z6}constructor(){super("bli")}},z6=class extends Jr{constructor(){super("stereochange")}};r();var B6=class extends ua{ma(){return new U6}constructor(){super("Mli")}},U6=class extends Jr{constructor(){super("directionchange")}};r(),r();var bn=x.PI/180,Q6=180/x.PI,cr=class{tM(t,i){return this.x=t,this.y=i,this}L_t(t){return this.x=t.x,this.y=t.y,this}Tli(t){return this.tM(t[0],t[1])}Sli(){const t=new Float32Array(2);return t[0]=this.x,t[1]=this.y,t}Nli(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this}constructor(t,i){this.x=t||0,this.y=i||0}},yn=class{tM(t,i,e){return this.x=t,this.y=i,this.z=e,this}L_t(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}Tli(t){return this.tM(t[0],t[1],t[2])}Sli(){const t=new Float32Array(3);return t[0]=this.x,t[1]=this.y,t[2]=this.z,t}V(){return x.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}Ili(){const t=this.V();if(0!==t){const i=1/t;this.Dli(i)}else this.x=0,this.y=0,this.z=0;return this}Dli(t){this.x*=t,this.y*=t,this.z*=t}Eli(t){const i=this.x,e=this.y,s=this.z,n=t.x,r=t.y,o=t.z,h=t.w,a=h*i+r*s-o*e,u=h*e+o*i-n*s,c=h*s+n*e-r*i,l=-n*i-r*e-o*s;return this.x=a*h+l*-n+u*-o-c*-r,this.y=u*h+l*-r+c*-n-a*-o,this.z=c*h+l*-o+a*-r-u*-n,this}kli(t){return this.x*t.x+this.y*t.y+this.z*t.z}xli(t,i){const e=t.x,s=t.y,n=t.z,r=i.x,o=i.y,h=i.z;return this.x=s*h-n*o,this.y=n*r-e*h,this.z=e*o-s*r,this}constructor(t,i,e){this.x=t||0,this.y=i||0,this.z=e||0}},gn=class{tM(t,i,e,s){return this.x=t,this.y=i,this.z=e,this.w=s,this}L_t(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this}Tli(t){return this.tM(t[0],t[1],t[2],t[3])}Sli(){const t=new Float32Array(4);return t[0]=this.x,t[1]=this.y,t[2]=this.z,t[3]=this.w,t}kli(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}TU(t){return this.Lli(this,t)}Lli(t,i){const e=t.x,s=t.y,n=t.z,r=t.w,o=i.x,h=i.y,a=i.z,u=i.w;return this.x=e*u+r*o+s*a-n*h,this.y=s*u+r*h+n*o-e*a,this.z=n*u+r*a+e*h-s*o,this.w=r*u-e*o-s*h-n*a,this}Cli(){return this.x*=-1,this.y*=-1,this.z*=-1,this.Ili(),this}jli(){const t=this.x,i=this.y,e=this.z,s=this.w,n=t*i+e*s;let r,o,h;if(n>.499)r=2*x.atan2(t,s),o=x.PI/2,h=0;else if(n<-.499)r=-2*x.atan2(t,s),o=-x.PI/2,h=0;else{const a=t*t,u=i*i,c=e*e;r=x.atan2(2*i*s-2*t*e,1-2*u-2*c),o=x.asin(2*n),h=x.atan2(2*t*s-2*i*e,1-2*a-2*c)}return new F6(r,h,o)}Ili(){let t=x.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===t?(this.x=0,this.y=0,this.z=0,this.w=1):(t=1/t,this.x=this.x*t,this.y=this.y*t,this.z=this.z*t,this.w=this.w*t),this}constructor(t,i,e,s){this.x=t||0,this.y=i||0,this.z=e||0,this.w=void 0!==s?s:1}},F6=class{tM(t,i,e){return this.Oli=t,this.Rli=i,this.Pli=e,this}L_t(t){return this.tM(t.Oli,t.Rli,t.Pli)}Kz(t){return this.Oli+=t.Oli,this.Rli+=t.Rli,this.Pli+=t.Pli,this}zli(){const t=this.Oli,i=this.Pli,e=this.Rli,s=x.cos(t/2),n=x.cos(i/2),r=x.cos(e/2),o=x.sin(t/2),h=x.sin(i/2),a=x.sin(e/2),u=s*n,c=o*h;return new gn(u*a+c*r,o*n*r+s*h*a,s*h*r-o*n*a,u*r-c*a)}constructor(t,i,e){this.Oli=t||0,this.Rli=i||0,this.Pli=e||0}},Y6=.15,V6=class{EQ(){this.Rt||(this.Rt=!0,this.we.addEventListener("keydown",this.Bli),this.we.addEventListener("mousedown",this.Uli),this.we.addEventListener("touchstart",this.Qli),s.addEventListener("mousemove",this.er),s.addEventListener("mouseup",this.Fli),this.Yli(s),s.addEventListener("touchmove",this.Vli),s.addEventListener("touchend",this.Gli))}Yli(t){if(Hd(t));else if(Xd(t))try{t.parent.addEventListener("mouseup",this.Fli),this.Yli(t.parent)}catch(i){t.document.documentElement.addEventListener("mouseleave",this.Wli)}}kQ(){this.Rt&&(this.Rt=!1,this.Zli=!1,this.Hli&&(Ti(this.Hli),this.Hli=null),this.we.removeEventListener("keydown",this.Bli),this.we.removeEventListener("mousedown",this.Uli),this.we.removeEventListener("touchstart",this.Qli),s.removeEventListener("mousemove",this.er),s.removeEventListener("mouseup",this.Fli),this.Xli(s),s.removeEventListener("touchmove",this.Vli),s.removeEventListener("touchend",this.Gli))}Xli(t){if(t.document.documentElement.removeEventListener("mouseleave",this.Wli),Xd(t))try{t.parent.removeEventListener("mouseup",this.Fli),this.Xli(t.parent)}catch(t){}}get qli(){return new F6(this.Kli,this.Jli,this.$li)}set qli(t){this.Kli=t.Oli,this.Jli=t.Rli,this.$li=t.Pli}tdi(t){this.idi("Kli",t)}edi(t){t=ur(t,-x.PI/2,x.PI/2),this.idi("Jli",t)}idi(t,i){this.Hli&&Ti(this.Hli);let e=this[t],s=Rx(),n=()=>{let r=Rx()-s;if(r>=80)return this[t]=i,Ti(this.Hli),void(this.Hli=null);this.Hli=Zu(n);let o=r/80;this[t]=e+(i-e)*o};this.Hli=Zu(n)}sdi(){this.Jli+=2*x.PI*this.ndi.y/this.we.clientHeight*.3,this.Kli+=2*x.PI*this.ndi.x/this.we.clientWidth*.5,this.Jli=ur(this.Jli,-x.PI/2,x.PI/2)}rdi(){this.Zli=!1}odi(){return(h.pointerLockElement||h.mozPointerLockElement||h.webkitPointerLockElement)===this.we}resetPose(){this.Jli=0,this.Kli=0}gn(){this.kQ()}constructor(t){this.Rt=!1,this.Jli=0,this.Kli=0,this.$li=0,this.Hli=null,this.hdi=new cr,this.adi=new cr,this.ndi=new cr,this.Zli=!1,this.Bli=t=>{38===t.keyCode?this.edi(this.Jli+Y6):39===t.keyCode?this.tdi(this.Kli-Y6):40===t.keyCode?this.edi(this.Jli-Y6):37===t.keyCode&&this.tdi(this.Kli+Y6)},this.Uli=t=>{this.hdi.tM(t.clientX,t.clientY),this.Zli=!0,t.preventDefault()},this.Qli=t=>{t.touches&&1===t.touches.length&&(this.hdi.tM(t.touches[0].pageX,t.touches[0].pageY),this.Zli=!0,t.preventDefault())},this.er=t=>{if(this.Zli||this.odi()){if(this.odi()){let i=t.movementX||t.mozMovementX||0,e=t.movementY||t.mozMovementY||0;this.adi.tM(this.hdi.x-i,this.hdi.y-e)}else this.adi.tM(t.clientX,t.clientY);this.ndi.Nli(this.adi,this.hdi),this.hdi.L_t(this.adi),this.sdi()}},this.Vli=t=>{this.Zli&&(this.adi.tM(t.touches[0].pageX,t.touches[0].pageY),this.ndi.Nli(this.adi,this.hdi),this.hdi.L_t(this.adi),this.sdi())},this.Fli=t=>{this.rdi()},this.Gli=t=>{this.rdi()},this.Wli=t=>{this.rdi()},this.we=t}};r();var G6=ud(md()),W6=ud(pd()),Z6=(ud(Ad()),ud(yd())),H6=(ud(bd()),ud(Md())),X6=ud(Td()),q6=ud(Sd()),K6=ud(Nd()),J6=ud(Id());il(),r();var $6=["Mli","Zut","bli","error"];function t9(t){let i,e={get stereo(){return t.udi},set stereo(i){t.udi=i},get useDeviceMotionControls(){return t.cdi},set useDeviceMotionControls(i){t.cdi=i},get direction(){return t.ldi},set direction(i){t.ldi=i},get verticalFOV(){return t.ddi},set verticalFOV(i){t.ddi=i},get canPresentVR(){return t.fdi},get state(){return t.$gt},addEventListener(t,e){i.yn(t,e)},removeEventListener(t,e){i.fn(t,e)}};return i=new WL(t,$6,e),e}r();var jn=function(t){return t.Rs="unavailable",t.gdi="available",t.za="presenting",t}({});Qi(),ds();var i9=ud(kd()),e9=new F6(0*bn,0,0);function s9(t){return bf(t+180,360)-180}function n9(t,i){let e=t.kli(i);return 1-e*e<1e-4}var r9=class extends tu{_di(){this.vdi||((0,i9.installWebVRPolyfill)(),Kl.getVRDisplays?(this.wdi=new VRFrameData,this.mdi(),s.addEventListener("vrdisplayconnect",this.mdi,!1),s.addEventListener("vrdisplaydisconnect",this.mdi,!1),s.addEventListener("vrdisplayactivate",this.pdi,!1),s.addEventListener("vrdisplaydeactivate",this.Adi,!1),s.addEventListener("vrdisplaypresentchange",this.ydi,!1)):Kl.getVRDevices?this.Tjt("Your browser supports WebVR but not the latest version.",vt.VR_PLATFORM_UNSUPPORTED):this.Tjt("Your browser does not support WebVR.",vt.VR_PLATFORM_UNSUPPORTED),this.vdi=!0)}bdi(){let t={alpha:!1,antialias:!1,preserveDrawingBuffer:!0};if(!this.Mdi){const t=h.createElement("canvas");t.className="theoplayer-vr",pn(t),t.style.zIndex="2",this.t.we.appendChild(t),this.Mdi=t}this.sli=this.Mdi.getContext("webgl",t),this.sli||(this.sli=this.Mdi.getContext("experimental-webgl",t),this.sli)?(this.sli.enable(this.sli.DEPTH_TEST),this.sli.enable(this.sli.CULL_FACE)):this.Tjt("Your browser does not support WebGL.",vt.VR_PLATFORM_UNSUPPORTED)}Tdi(){let t=this.ldi;this.Sdi||(this.bdi(),this.Sdi=!0),this.sli&&(this.Ndi(new R6(this.sli,this.t,this.Idi)),this.Mdi.style.display="",this.gi||(this.gi=new V6(this.Mdi)),this.gi.EQ(),this.t.wa.yn($s.aa,this.dp),this.t.yn(Th.pn,this.dp),this.ldi=t,this.dp(),this.Ddi=Zu(this.Edi))}kdi(){let t=this.ldi;this.Ndi(void 0),this.gi&&this.gi.kQ(),this.Mdi&&(this.Mdi.style.display="none"),this.t.wa.fn($s.aa,this.dp),this.t.fn(Th.pn,this.dp),this.Ddi&&Ti(this.Ddi),this.ldi=t}xdi(){var t;return null==(t=this.t.Ya())?void 0:t.vr}Ldi(t){let i=this.$gt,e=this.udi;this.Cdi&&(this.jdi=void 0,this.Adi()),this.Cdi=t,this.Cdi&&(this.Cdi.depthNear=.1,this.Cdi.depthFar=1024),this.udi=e,this.$gt!==i&&this.yo(new en),this.udi!==e&&this.yo(new P6)}Odi(t){let i=this.$gt;this.Rdi=t,t&&this._di(),this.$gt!==i&&this.yo(new en)}Ndi(t){let i=this.$gt;this.Pdi=t,this.$gt!==i&&this.yo(new en)}zdi(t){let i=this.$gt,e=this.udi;this.Bdi=t,this.gi&&(t?this.gi.kQ():this.gi.EQ()),this.$gt!==i&&this.yo(new en),this.udi!==e&&this.yo(new P6)}Udi(t){let i=this.udi;this.Qdi=t,this.udi!==i&&this.yo(new P6)}Fdi(){let t=this.Mdi;this.Ydi===t.width&&this.Vdi===t.height||(t.width=this.Ydi,t.height=this.Vdi,this.Gdi())}Wdi(t,i){(0,W6.default)(t,i.Sli()),(0,H6.default)(t,t)}useDeviceOrientation(){return!!this.Bdi||this.Zdi}Hdi(){const t=DeviceMotionEvent.requestPermission;"function"==typeof t&&t().catch(ya)}Tjt(t,i){Gr(t),this.yo(new Uc(new qi(i,t)))}Xdi(){this.yo(new B6)}get udi(){return this.fdi?this.Bdi:this.Qdi}set udi(t){this.fdi?t?this.pdi():this.Adi():this.Udi(t)}get cdi(){return this.Zdi}set cdi(t){this.udi||(this.Zdi=t,t&&Ro.Ka&&this.Hdi())}get ldi(){let t=this.qli;return{yaw:s9(t.Oli*Q6),pitch:t.Rli*Q6,roll:x.round(t.Pli*Q6)}}set ldi(t){let i=s9(t&&+t.yaw||0),e=s9(t&&+t.pitch||0),s=s9(t&&+t.roll||0);this.qli=new F6(i*bn,e*bn,s*bn)}get qli(){if(this.$gt===jn.Rs)return this.qdi.jli();let t=this.Kdi,i=this.Jdi,e=new F6;return t&&e.Kz(t),i&&e.Kz(i),e}set qli(t){const i=this.qli.zli();if(this.$gt===jn.Rs)this.qdi=t.zli();else{let i=this.Cdi;i&&i.resetPose&&i.resetPose(),this.gi&&(this.gi.qli=t),this.qdi=this.qli.zli()}n9(i,this.qdi)||this.Xdi()}get Kdi(){let t=this.jdi&&this.jdi.orientation;if(t)return(new gn).Tli(t).jli()}get Jdi(){return this.gi&&this.gi.qli}get ddi(){return 180*this.$di}set ddi(t){t&&t>=0&&t<=180&&(this.$di=+t/180)}get fdi(){return!(!this.Cdi||!this.Cdi.capabilities.canPresent)}get $gt(){var t;return this.Rdi&&((null==(t=this.xdi())?void 0:t.nativeVR)||this.Pdi)?this.Bdi?jn.za:jn.gdi:jn.Rs}gn(){this.zQ.Ty(),this.Bo(),this.kdi(),this.Adi(),this.t.fn(Zi.ro,this.ho),s.removeEventListener("vrdisplayconnect",this.mdi,!1),s.removeEventListener("vrdisplaydisconnect",this.mdi,!1),s.removeEventListener("vrdisplayactivate",this.pdi,!1),s.removeEventListener("vrdisplaydeactivate",this.Adi,!1),s.removeEventListener("vrdisplaypresentchange",this.ydi,!1),this.t=void 0}constructor(t){super(),this.zQ=new Wt,this.vdi=!1,this.qdi=new gn,this.$di=.4,this.Qdi=!1,this.Zdi=!1,this.Rdi=!1,this.md=void 0,this.Idi=Uk.NONE,this.gi=void 0,this.tfi=[],this.Cdi=void 0,this.Bdi=!1,this.Sdi=!1,this.Mdi=void 0,this.Pdi=void 0,this.sli=null,this.Ddi=0,this.wdi=void 0,this.jdi=void 0,this.ifi=(0,G6.default)(),this.efi=(0,G6.default)(),this.Ydi=0,this.Vdi=0,this.sfi=!0,this.nfi=0,this.rfi=()=>{this.t.fn(E.oP,this.rfi);let t=this.xdi();t&&!t.nativeVR&&this.Tdi()},this.ho=()=>{this.kdi();let t=this.xdi();this.md=t,t&&t.panoramaMode!==he.NONE?(t.panoramaMode===he.PM180&&Bi("PanoramaMode is set to '180' while the VR API only supports '360', consider using the WebXR API if you need to play 180 degree content."),this.Odi(!0),t.nativeVR?this.yo(new en):(this.Idi=t.stereoMode,this.t.yn(E.oP,this.rfi))):this.Odi(!1)},this.pdi=async()=>{if(this.$gt!==jn.Rs&&this.fdi){this.sfi=!1,this.ofi();try{await this.Cdi.requestPresent([{source:this.Mdi}])}catch(t){this.Tjt("Failed to present VR content.",vt.VR_PRESENTATION_ERROR)}finally{this.ydi()}}},this.Adi=async()=>{if(this.Cdi)try{await this.Cdi.exitPresent()}catch(t){}finally{this.ydi()}},this.mdi=async()=>{try{this.tfi=await Ao(Kl.getVRDisplays(),this.zQ.ly),this.Cdi&&Qa(this.tfi,this.Cdi)||this.Ldi(this.tfi[0])}catch(t){this.tfi=[],this.Ldi(void 0)}},this.ydi=()=>{this.zdi(!!this.Cdi&&this.Cdi.isPresenting),this.dp(),this.sfi=!this.Bdi,this.sfi?Zu(this.Gdi):this.ofi()},this.dp=()=>{if(!this.Mdi)return;const t=this.t.we.offsetWidth,i=this.t.we.offsetHeight;let e=this.Cdi;if(e&&this.udi){let t=e.getEyeParameters("left"),i=e.getEyeParameters("right");t&&i&&(this.Ydi=2*x.max(t.renderWidth,i.renderWidth),this.Vdi=x.max(t.renderHeight,i.renderHeight))}else{let e=Fe.Ys.bp;this.Ydi=t*e,this.Vdi=i*e}},this.Gdi=()=>{if(!Ro.Ka||!this.Mdi||!this.sfi)return;this.ofi();let t=this.Mdi,i=t.offsetWidth+1,e=t.offsetHeight;t.style.width=i+"px",t.style.height=e+"px",this.nfi=Zu(this.ofi)},this.ofi=()=>{if(!this.nfi)return;let t=this.Mdi;t.style.width="100%",t.style.height="100%",Ti(this.nfi),this.nfi=0},this.Edi=()=>{let t=this.Cdi,i=this.$di,e=this.Mdi,s=this.Pdi,n=this.sli,r=this.wdi,o=this.ifi,h=this.efi;this.Fdi(),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT),t&&this.useDeviceOrientation()&&(t.getFrameData(r),this.jdi=r.pose);let a=this.qli.zli();this.Wdi(h,a),t&&t.isPresenting?(this.Ddi=t.requestAnimationFrame(this.Edi),n.viewport(0,0,.5*e.width,e.height),s.pr(r.leftProjectionMatrix,h,"left"),n.viewport(.5*e.width,0,.5*e.width,e.height),s.pr(r.rightProjectionMatrix,h,"right"),t.submitFrame()):(this.Ddi=Zu(this.Edi),(0,q6.default)(o,x.PI*i,e.width/e.height,.1,1024),this.udi?(n.viewport(0,0,.5*e.width,e.height),s.pr(o,h,"left"),n.viewport(.5*e.width,0,.5*e.width,e.height),s.pr(o,h,"right")):(n.viewport(0,0,e.width,e.height),s.pr(o,h))),n9(a,this.qdi)||(this.qdi.L_t(a),this.Xdi())},this.t=t,this.qli=e9,this.ga=t9(this),this.t.yn(Zi.ro,this.ho),this.ho()}};r(),Fz((function(t){return class extends t{ma(){if(null!==this.hfi){const t=this.hfi.ga;return fe(super.ma(),{vr:t})}return super.ma()}gn(){var t;null==(t=this.hfi)||t.gn(),super.gn()}constructor(t,i){super(t,i),this.hfi=null,i.vr.useWebXR||(this.hfi=new r9(this))}}}),F.nu),r(),r(),r(),r();var o9=class{EQ(){this.He||(this.He=!0,this.Vs.addEventListener("mousedown",this.Uli),this.Vs.addEventListener("touchstart",this.Qli),s.addEventListener("mousemove",this.er),s.addEventListener("touchmove",this.Vli),s.addEventListener("mouseup",this.Fli),s.addEventListener("touchend",this.Gli),this.Yli(s))}kQ(){this.He&&(this.He=!1,this.Vs.removeEventListener("mousedown",this.Uli),this.Vs.removeEventListener("touchstart",this.Qli),s.removeEventListener("mousemove",this.er),s.removeEventListener("touchmove",this.Vli),s.removeEventListener("mouseup",this.Fli),s.removeEventListener("touchend",this.Gli),this.Xli(s))}Yli(t){if(Hd(t));else if(Xd(t))try{t.parent.addEventListener("mouseup",this.Fli),this.Yli(t.parent)}catch(i){t.document.documentElement.addEventListener("mouseleave",this.Wli)}}Xli(t){if(t.document.documentElement.removeEventListener("mouseleave",this.Wli),Xd(t))try{t.parent.removeEventListener("mouseup",this.Fli),this.Xli(t.parent)}catch(t){}}rdi(){this.afi=!1}sdi(){const t=this.cfi.ufi;t.yaw+=2*x.PI*this.lfi.x*.4/this.Vs.clientWidth,t.pitch+=2*x.PI*this.lfi.y*.5/this.Vs.clientHeight,t.pitch=ur(t.pitch,-x.PI/2,x.PI/2),this.cfi.ufi=t}odi(){return(h.pointerLockElement||h.mozPointerLockElement||h.webkitPointerLockElement)===this.Vs}gn(){this.kQ()}constructor(t,i){this.He=!1,this.dfi=new cr,this.ffi=new cr,this.lfi=new cr,this.afi=!1,this.Uli=t=>{this.dfi.tM(t.clientX,t.clientY),this.afi=!0,t.preventDefault(),t.stopPropagation()},this.Qli=t=>{t.touches&&1===t.touches.length&&(this.dfi.tM(t.touches[0].pageX,t.touches[0].pageY),this.afi=!0,t.preventDefault())},this.er=t=>{if(this.afi||this.odi()){if(this.odi()){const i=t.movementX||t.mozMovementX||0,e=t.movementY||t.mozMovementY||0;this.ffi.tM(this.dfi.x-i,this.dfi.y-e)}else this.ffi.tM(t.clientX,t.clientY);this.lfi.Nli(this.ffi,this.dfi),this.dfi.L_t(this.ffi),this.sdi()}},this.Vli=t=>{this.afi&&(this.ffi.tM(t.touches[0].pageX,t.touches[0].pageY),this.lfi.Nli(this.ffi,this.dfi),this.dfi.L_t(this.ffi),this.sdi())},this.Fli=()=>{this.rdi()},this.Gli=()=>{this.rdi()},this.Wli=()=>{this.rdi()},this.cfi=t,this.Vs=i}};r();var h9=class{gfi(t){t.clearColor(...this.s$),t.clear(t.COLOR_BUFFER_BIT)}_fi(t,i){t.clearDepth(1),t.enable(t.DEPTH_TEST),t.depthFunc(t.LEQUAL),t.clear(t.DEPTH_BUFFER_BIT),this.vfi.forEach((e=>{e._fi(t,i)}))}wfi(t){this.vfi.push(t)}mfi(){this.vfi=[]}constructor(){this.s$=[0,0,0,1],this.vfi=[]}};r(),r(),r();var a9=class{pfi(t,i,e){const s=t.createBuffer();return null===s?(Bi("Failed to create buffer."),null):(t.bindBuffer(i,s),t.bufferData(i,e,t.STATIC_DRAW),s)}constructor(t,i,e,s,n){this.Afi=t,this.cM=this.pfi(t,i,e),this.yfi=s,this.Zp=n,this.bfi=!1,this.Mfi=0,this.ic=0}},u9=class extends a9{EQ(t){if(null===this.cM)return void Bi("Attempted to enable buffer that failed to initialize.");if(null===t)return void Bi("Attempted to enable attribute without location.");const i=this.Afi;i.bindBuffer(i.ARRAY_BUFFER,this.cM),i.vertexAttribPointer(t,this.yfi,this.Zp,this.bfi,this.Mfi,this.ic),i.enableVertexAttribArray(t)}kQ(t){t&&this.Afi.disableVertexAttribArray(t)}constructor(t,i,e){super(t,t.ARRAY_BUFFER,i,e,t.FLOAT)}};var c9=class extends a9{Tfi(){const t=this.Afi;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.cM),t.drawElements(t.TRIANGLES,this.Sfi,this.Zp,this.ic)}constructor(t,i){super(t,t.ELEMENT_ARRAY_BUFFER,i,1,t.UNSIGNED_SHORT),this.Sfi=i.length}};r();var l9=function(t){return t.VertexPos="aVertexPosition",t.VertexUV="aVertexUV",t.VertexColor="aVertexColor",t}({}),d9=function(t){return t.ProjectionMat="uProjectionMatrix",t.ModelViewMat="uModelViewMatrix",t.Texture="uTexture",t}({}),f9=function(t){return t.Normal="vNormal",t.Color="vColor",t.UV="vUV",t}({}),g9=class{Nfi(t,i,e){const s=this.Ifi(t,t.VERTEX_SHADER,i),n=this.Ifi(t,t.FRAGMENT_SHADER,e);if(null===s||null===n)return Bi("Failed to create vertex or fragment shader."),null;const r=t.createProgram();return null===r?(Bi("Failed to create shader program"),null):(t.attachShader(r,s),t.attachShader(r,n),t.linkProgram(r),t.getProgramParameter(r,t.LINK_STATUS)?r:(Bi("Failed to initialize shader program"),null))}Ifi(t,i,e){const s=t.createShader(i);if(null===s)return Bi("failed to create shader."),null;if(t.shaderSource(s,e),t.compileShader(s),!t.getShaderParameter(s,t.COMPILE_STATUS)){const i=t.getShaderInfoLog(s);return Bi("Failed to compile shader with error: "+i),t.deleteShader(s),null}return s}Dfi(){return this.Efi}kfi(t){const i=this.Efi;if(null===i)return Bi("Attempted to retrieve attribute location when shader program was not initialized"),null;const e=this.Afi.getAttribLocation(i,t);return-1===e?null:e}xfi(t){const i=this.Efi;if(null===i)return Bi("Attempted to retrieve uniform location when shader program was not initialized"),null;const e=this.Afi.getUniformLocation(i,t);return null===e&&Gr("Attempted to retrieve nonexistent uniform: "+t),e}constructor(t,i,e){this.Afi=t,this.Efi=this.Nfi(this.Afi,i,e)}},_9=class{Lfi(){const t=this.Cfi.length,i=x.max(...this.jfi);return i>=t?(Gr("Created geometry where largest index ("+i+") is larger than/equal to attribute array size ("+t+")"),!1):(i<t-1&&Bi("Created geometry where largest index ("+i+") is smaller than attribute buffer - 1 ("+(t-1)+") resulting in unused vertices"),!this.Ofi||this.Ofi.length===t||(Gr("Created geometry where position ("+t+") and uv ("+this.Ofi.length+") buffers have different length."),!1))}Rfi(t,i){if(!this.Lfi())throw new b("Failed to validate buffers for WebGLGeometry.");const e=function(t,i){const e=[];return i.forEach((t=>{e.push(t.x,t.y,t.z)})),new u9(t,new Float32Array(e),3)}(t,this.Cfi),s=function(t,i){return new c9(t,new Uint16Array(i))}(t,this.jfi),n=function(t,i){const e=[];return i.forEach((t=>{e.push(t.x,t.y)})),new u9(t,new Float32Array(e),2)}(t,this.Ofi);return new v9(e,s,n,i)}constructor(t,i,e){this.Cfi=t,this.jfi=i,this.Ofi=e}},v9=class{Pfi(){this.Cfi.EQ(this.zfi),null!==this.Bfi&&this.Ofi.EQ(this.Bfi)}Ufi(){this.Cfi.kQ(this.zfi),null!==this.Bfi&&this.Ofi.kQ(this.Bfi)}_fi(){this.jfi.Tfi()}constructor(t,i,e,s){this.Cfi=t;const n=s.kfi(l9.VertexPos);if(null===n)throw new b("Failed to get position attribute location.");this.zfi=n,this.Ofi=e,this.Bfi=s.kfi(l9.VertexUV),this.jfi=i}},w9=class extends _9{constructor(t=1,i=32,e=16,s=0,n=2*x.PI,r=0,o=x.PI){let h=0;const a=x.min(r+o,x.PI),u=[],c=[],l=[],d=[];for(let u=0;u<=e;u++){const f=[],g=u/e;let _=0;0===u&&0===r?_=.5/i:u===e&&a===x.PI&&(_=-.5/i);for(let e=0;e<=i;e++){const a=e/i,u=-t*x.cos(s+a*n)*x.sin(r+g*o),d=t*x.cos(r+g*o),v=t*x.sin(s+a*n)*x.sin(r+g*o);c.push(new yn(u,d,v)),l.push(new cr(a+_,1-g)),f.push(h++)}d.push(f)}for(let t=0;t<e;t++)for(let s=0;s<i;s++){const i=d[t][s+1],n=d[t][s],o=d[t+1][s],h=d[t+1][s+1];(0!==t||r>0)&&u.push(i,n,h),(t!==e-1||a<x.PI)&&u.push(n,o,h)}super(c,u,l)}};r(),r();var m9=[0,0,0,255,0,0,0,255,0,0,0,255,0,0,0,255],p9=class{Qfi(){const t=this.Afi;t.activeTexture(this.Ffi),t.bindTexture(t.TEXTURE_2D,this.Yfi)}ur(){const t=this.Afi;t.activeTexture(this.Ffi),t.bindTexture(t.TEXTURE_2D,this.Yfi),t.uniform1i(this.Vfi,0)}Gfi(t){const i=this.Afi;i.bindTexture(i.TEXTURE_2D,this.Yfi),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!0),i.texImage2D(i.TEXTURE_2D,this.u4,this.Wfi,this.Zfi,this.Hfi,t),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!1)}Xfi(t){const i=this.Afi;i.bindTexture(i.TEXTURE_2D,this.Yfi),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!0),t.Ow.UX(i,i.TEXTURE_2D,this.u4,this.Wfi,this.Zfi,this.Hfi),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!1)}constructor(t,i){if(this.Afi=t,this.Yfi=t.createTexture(),null===this.Yfi)throw new b("Failed to create texture");const e=i.xfi(d9.Texture);if(null===e)throw new b("Failed to get texture location.");this.Vfi=e,t.bindTexture(t.TEXTURE_2D,this.Yfi),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),this.Ffi=t.TEXTURE0,this.u4=0,this.Wfi=t.RGBA,this.Zfi=t.RGBA,this.Hfi=t.UNSIGNED_BYTE,t.texImage2D(t.TEXTURE_2D,this.u4,this.Wfi,2,2,0,this.Zfi,this.Hfi,new T(m9))}},A9="\n    attribute vec4 "+l9.VertexPos+";\n    attribute vec2 "+l9.VertexUV+";\n\n    uniform mat4 "+d9.ModelViewMat+";\n    uniform mat4 "+d9.ProjectionMat+";\n    \n    varying mediump vec2 "+f9.UV+";\n    \n    void main() {\n      gl_Position = "+d9.ProjectionMat+" * "+d9.ModelViewMat+" * "+l9.VertexPos+";\n      "+f9.UV+" = "+l9.VertexUV+";\n    }\n",y9="\n    varying mediump vec2 "+f9.UV+";\n    \n    uniform sampler2D "+d9.Texture+";\n\n    void main() {\n      gl_FragColor = texture2D("+d9.Texture+", "+f9.UV+");\n    }\n",b9=class{Dfi(){return this.Efi}EQ(){this.Afi.useProgram(this.Efi.Dfi()),this.Yfi.ur()}qfi(t){this.Yfi.Gfi(t)}Kfi(t){this.Yfi.Xfi(t)}constructor(t){this.Afi=t,this.Efi=new g9(t,A9,y9),this.Yfi=new p9(t,this.Efi)}};r();var M9=class{_fi(t,i){if(this.Jfi(i.$fi)){this.tgi.Pfi(),this.igi.EQ();const e=this.egi,s=i.sgi,n=(0,X6.default)(s,s,e);t.uniformMatrix4fv(this.ngi,!1,n);const r=i.rgi;t.uniformMatrix4fv(this.ogi,!1,r),this.tgi._fi(),this.tgi.Ufi()}}Jfi(t){return"none"===this.$fi||"right"!==t&&"left"===this.$fi||"right"===t&&"right"===this.$fi}get egi(){const t=(0,G6.default)(),i=this.uo;return(0,J6.default)(t,t,i.Sli()),(0,K6.default)(t,t,this.hgi.x,new Float32Array([1,0,0])),(0,K6.default)(t,t,this.hgi.y,new Float32Array([0,1,0])),(0,K6.default)(t,t,this.hgi.z,new Float32Array([0,0,1])),t}constructor(t,i,e,s){this.uo=new yn,this.hgi=new yn,this.$fi="none",this.igi=e;const n=e.Dfi();this.tgi=i.Rfi(t,n),s&&(this.$fi=s);const r=n.xfi(d9.ModelViewMat);if(null===r)throw new b("Failed to get model view matrix location.");this.ngi=r;const o=n.xfi(d9.ProjectionMat);if(null===o)throw new b("Failed to get projection matrix location.");this.ogi=o}};r();var T9=class{agi(){const t=(0,G6.default)();return(0,q6.default)(t,this.ugi,this.cgi,this.lgi,this.dgi)}fgi(){this.ggi=this.agi()}get rgi(){return new Float32Array(this.ggi)}set rgi(t){this.ggi=t}_gi(){const t=(0,G6.default)(),i=(0,Z6.default)((0,G6.default)(),this.vgi.Sli()),e=(0,W6.default)((0,G6.default)(),this.wgi.Sli());return(0,X6.default)(t,i,e),(0,H6.default)(t,t),t}mgi(){this.pgi=this._gi()}get sgi(){return new Float32Array(this.pgi)}Agi(){this.mgi(),this.fgi()}tr(){this.vgi=new yn,this.hgi=new gn,this.Agi()}ygi(t){const i=this.wgi.jli();i.Kz(t),this.hgi=i.zli()}bgi(t){this.hgi=t.zli()}get Mgi(){return this.ugi}set Mgi(t){this.ugi=t,this.fgi()}get Tgi(){return this.cgi}set Tgi(t){this.cgi=t,this.fgi()}get uo(){return(new yn).L_t(this.vgi)}set uo(t){this.vgi=t,this.mgi()}get hgi(){return(new gn).L_t(this.wgi)}set hgi(t){this.wgi=t,this.mgi()}constructor(t){this.ugi=72*x.PI/180,this.cgi=1.77,this.lgi=.1,this.dgi=100,this.$fi="none",this.vgi=new yn,this.wgi=new gn,this.ggi=this.agi(),this.pgi=this._gi(),t&&(this.$fi=t)}};Qi(),il();var S9=1e-4,N9=class extends tu{fo(){this.Sgi(),this.Afi?Kl.xr?(Kl.xr.addEventListener("devicechange",this.Ngi),this.Igi().then((()=>{this.Dgi?(this.Egi(),this.kgi(),this.xgi()):this.Tjt("XR: Inline session not available. Panorama functionality will not work.",vt.VR_PRESENTATION_ERROR)}))):this.Tjt("Your browser does not support WebXR",vt.VR_PLATFORM_UNSUPPORTED):this.Tjt("Your browser does not support webGL",vt.VR_PLATFORM_UNSUPPORTED)}xgi(){this.ta.wa.yn($s.aa,this.mn),this.ta.yn(Th.pn,this.mn),this.ta.yn(Zi.ro,this.ho),this.ta.yn(Zi.bb,this.sZ)}Sgi(){this.Lgi=h.createElement("canvas"),this.Lgi.className="theoplayer-vr",this.Lgi.style.zIndex="2",this.Lgi.style.background="black",this.Lgi.style.display="none",this.ta.we.appendChild(this.Lgi),pn(this.Lgi);let t=this.Lgi.getContext("webgl2");t||(t=this.Lgi.getContext("webgl")),t&&(this.Afi=t,this.Cgi=new o9(this,this.Lgi))}async Igi(){Kl.xr?await Promise.all([Kl.xr.isSessionSupported("inline").then((t=>{this.Dgi=t})).catch((t=>{this.Dgi=!1,this.Tjt("exception when calling xr.isSessionSupported for inline session: "+t,vt.VR_PRESENTATION_ERROR)})),Kl.xr.isSessionSupported("immersive-vr").then((t=>{this.jgi=t})).catch((t=>{this.jgi=!1,this.Tjt("exception when calling xr.isSessionSupported for immersive-vr session: "+t,vt.VR_PRESENTATION_ERROR)}))]):(this.Dgi=!1,this.jgi=!1)}Egi(){const t=this.xdi();this.KS=t,this.Rdi=Boolean(t),this.Rdi&&(this.Ogi=(null==t?void 0:t.stereoMode)||Uk.NONE,this.Rgi=(null==t?void 0:t.panoramaMode)||he.NONE,this.Pgi&&(this.zgi(this.Rgi,this.Ogi),this.Tdi()))}zgi(t,i){if(!this.Afi||t===he.NONE)return;const e=this.Afi;let s,n;this.Bgi.mfi(),t===he.PM360?(s=2*x.PI,n=-x.PI/2):(s=x.PI,n=-x.PI);const r=new w9(16,60,40,0,s),o=[],h=[];for(let t=0;t<r.Ofi.length;t++){const e=r.Ofi[t];switch(i){case Uk.NONE:o.push(e),h.push(e);break;case Uk.VERTICAL:o.push(new cr(e.x,.5*e.y)),h.push(new cr(e.x,.5*e.y+.5));break;case Uk.HORIZONTAL:o.push(new cr(.5*e.x,e.y)),h.push(new cr(.5*e.x+.5,e.y))}}r.Cfi.forEach((t=>{t.x*=-1}));const a=new _9(r.Cfi,r.jfi,o),u=new _9(r.Cfi,r.jfi,h);this.Ugi=new b9(e);const c=new M9(e,a,this.Ugi,"left");c.hgi.y=n,this.Bgi.wfi(c);const l=new M9(e,u,this.Ugi,"right");l.hgi.y=n,this.Bgi.wfi(l)}Tdi(){this.Lgi.style.display="block",this.Dgi&&this.ta.yn(Zi.so,this.Qgi)}kdi(){this.Fgi(),this.ta.fn(Zi.so,this.Qgi),this.Lgi.style.display="none"}Ygi(){this.Vgi(),this.Ggi()}async Wgi(){if(!this.Zgi&&this.Dgi)try{const t=await Ao(Kl.xr.requestSession("inline"),this.zQ.ly);let i;i=Ro.Qs?Ro.vf?"viewer":"local":"viewer";const e=await t.requestReferenceSpace(i);t.addEventListener("end",this.Vgi),this.Hgi=e,this.Zgi=t,this.Cgi.EQ(),this.Xgi(),await t.updateRenderState({baseLayer:new XRWebGLLayer(t,this.Afi),inlineVerticalFieldOfView:this.ugi*bn})}catch(t){this.Vgi(),this.Tjt(t,vt.VR_PRESENTATION_ERROR)}}Vgi(){this.Zgi&&(this.Fgi(),this.Cgi.kQ(),this.Zgi.removeEventListener("end",this.Ggi),this.Zgi.end(),this.Zgi=null,this.kgi())}async qgi(){if(!this.Kgi&&this.jgi){this.Fgi();try{const t=await Ao(Kl.xr.requestSession("immersive-vr"),this.zQ.ly),i=await t.requestReferenceSpace("local");t.addEventListener("end",this.Ggi),this.Jgi=i,this.Kgi=t,await this.$gi(),this.Xgi()}catch(t){this.Ggi(),this.Tjt(t,vt.VR_PRESENTATION_ERROR)}}}async $gi(){const t=this.Afi,i=this.Kgi;this.Lgi&&t&&i&&!this.t_i&&(this.Lgi.addEventListener("webglcontextlost",(t=>{t.preventDefault()})),this.Lgi.addEventListener("webglcontextrestored",(()=>{this.zgi(this.Rgi,this.Ogi)})),this.t_i=!0,await t.makeXRCompatible(),await i.updateRenderState({baseLayer:new XRWebGLLayer(i,t)}))}kgi(){if(!this.Kgi&&this.Afi){const t=this.Afi,i=this.Lgi.clientWidth,e=this.Lgi.clientHeight,s=Fe.Ys.bp;this.Lgi.width=i*s,this.Lgi.height=e*s,t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight)}}Xgi(){null===this.i_i&&(this.e_i(),this.s_i?this.i_i=this.s_i.requestAnimationFrame(this.n_i):(this.r_i(),Bi("XR: Attempted to start animation loop without inline or immersive session.")))}Fgi(){null!==this.i_i&&(this.r_i(),this.s_i?this.s_i.cancelAnimationFrame(this.i_i):Bi("XR: Attempted to stop animation loop by cancelAnimationFrame even though there is no session running."),this.i_i=null)}e_i(){if(null!==this.o_i)return;const t=this.ta.jk();if(void 0===t||!(t instanceof HTMLVideoElement))return void Bi("No video source.");if("function"!=typeof t.requestVideoFrameCallback)return;const i=()=>{this.Ugi.Kfi(this.ta),this.o_i=t.requestVideoFrameCallback(i)};this.h_i=t,this.o_i=t.requestVideoFrameCallback(i)}r_i(){var t,i;null!==this.o_i&&(null==(i=this.h_i)||null==(t=i.cancelVideoFrameCallback)||t.call(i,this.o_i),this.h_i=null,this.o_i=null)}a_i(){return!!this.u_i||(Ro.Ka?this.c_i&&this.l_i:this.c_i)}Hdi(){const t=DeviceMotionEvent.requestPermission;"function"==typeof t&&t().then((t=>{this.l_i="granted"===t}))}d_i(){return(!this.KE()||Boolean(this.f_i))&&this.g_i()}KE(){return this.ta.KE}g_i(){return this.ta.fk>=2}get Rdi(){return this.__i}set Rdi(t){const i=this.$gt;this.__i=t,this.$gt!==i&&this.yo(new en)}get Pgi(){return this.Rgi!==he.NONE}get Rgi(){return this.v_i}set Rgi(t){const i=this.$gt;this.v_i=t,this.$gt!==i&&this.yo(new en)}get jgi(){return this.w_i}set jgi(t){const i=this.$gt;this.w_i=t,this.$gt!==i&&this.yo(new en)}get fdi(){return this.jgi}get s_i(){return this.Kgi||this.Zgi}get Kgi(){return this.u_i}set Kgi(t){const i=this.$gt;this.u_i=t,this.$gt!==i&&this.yo(new en)}get m_i(){return this.Jgi||this.Hgi}get ldi(){const t=this.p_i.jli();return{yaw:t.Oli*Q6,pitch:t.Rli*Q6,roll:t.Pli*Q6}}set ldi(t){const i=I9(t&&t.pitch||0)*bn,e=I9(t&&t.roll||0)*bn,s=I9(t&&t.yaw||0)*bn,n=new F6(s,i,e);this.p_i=n.zli()}get ufi(){const t=this.A_i.jli();return{yaw:t.Oli,pitch:t.Rli,roll:t.Pli}}set ufi(t){const i=D9(t&&t.pitch||0),e=D9(t&&t.roll||0),s=D9(t&&t.yaw||0),n=new F6(s,i,e);this.A_i=n.zli()}get $gt(){return this.Rdi?this.Kgi?jn.za:jn.gdi:jn.Rs}get udi(){return null!==this.Kgi}set udi(t){const i=this.udi;t&&this.jgi?this.qgi():this.Ggi(),this.udi!==i&&this.yo(new P6)}get cdi(){return this.c_i}set cdi(t){null===this.u_i&&(this.c_i=t,t&&Ro.Ka&&this.Hdi())}get ddi(){return this.ugi}set ddi(t){t&&t>=0&&t<=180&&(this.ugi=t,null!==this.Zgi&&this.Zgi.updateRenderState({inlineVerticalFieldOfView:this.ugi*bn}))}Tjt(t,i){Gr(t),this.yo(new Uc(new qi(i,t)))}xdi(){const t=this.ta.Ya();return t&&t.vr}gn(){this.zQ.Ty(),this.Ygi(),this.Bo(),this.ta=void 0,this.Afi=void 0}constructor(t){super(),this.zQ=new Wt,this.Dgi=!1,this.w_i=!1,this.p_i=new gn,this.y_i=new gn,this.A_i=new gn,this.ugi=74,this.c_i=!1,this.KS=void 0,this.Ogi=Uk.NONE,this.__i=!1,this.v_i=he.NONE,this.Bgi=new h9,this.Zgi=null,this.u_i=null,this.Hgi=null,this.Jgi=null,this.t_i=!1,this.i_i=null,this.h_i=null,this.o_i=null,this.f_i=0,this.l_i=!1,this.Ngi=()=>{this.Igi()},this.ho=()=>{this.kdi(),this.Ygi(),this.Egi()},this.Qgi=()=>{this.Wgi()},this.Ggi=()=>{this.Kgi&&(tg("Ending immersive session"),this.Fgi(),this.Kgi.removeEventListener("end",this.Ggi),this.Kgi.end(),this.Kgi=null,this.Jgi=null,this.t_i=!1,this.Zgi?this.Xgi():this.Wgi())},this.mn=()=>{this.kgi()},this.n_i=(t,i)=>{if(!this.Afi)return;const e=this.Afi,s=this.s_i;if(null===this.o_i&&this.d_i()&&(this.Ugi.Kfi(this.ta),this.f_i>0&&(this.f_i-=1)),null===s||void 0===i)return void Bi("Attempted to run webXR animation loop without session or xrFrame.");this.i_i=s.requestAnimationFrame(this.n_i);const n=s.renderState.baseLayer,r=i.getViewerPose(this.m_i);if(void 0===n||void 0===r)return void Bi("Attempted to run webXR animation loop without glLayer or viewerPose.");e.bindFramebuffer(e.FRAMEBUFFER,n.framebuffer);let o=new F6,h=0;for(const t of r.views){const i=new T9(t.eye);if(i.rgi=t.projectionMatrix,this.a_i()){let e;if(Ro.Qs&&Ro.vf&&null===this.u_i){if(e=t.transform.inverse.orientation,0===e.x&&0===e.y&&0===e.z&&1===e.w)return}else e=t.transform.orientation;i.hgi=new gn(e.x,e.y,e.z,e.w)}this.Zgi&&i.ygi(this.A_i.jli()),o=o.Kz(i.hgi.jli()),h+=1;const s=n.getViewport(t);s&&e.viewport(s.x,s.y,s.width,s.height),this.Bgi._fi(e,i)}const a=new F6(o.Oli/h,o.Rli/h,o.Pli);this.p_i=a.zli(),function(t,i){const e=t.kli(i);return 1-e*e<S9}(this.p_i,this.y_i)||(this.y_i.L_t(this.p_i),this.yo(new B6))},this.sZ=()=>{this.f_i=5},this.ta=t,this.ga=t9(this),this.fo()}};function I9(t){return bf(t+180,360)-180}function D9(t){return bf(t+x.PI,2*x.PI)-x.PI}Fz((function(t){return class extends t{ma(){return null!==this.cfi?fe(super.ma(),{vr:this.cfi.ga}):super.ma()}gn(){var t;null==(t=this.cfi)||t.gn(),super.gn()}constructor(t,i){super(t,i),this.cfi=null,i.vr.useWebXR&&(this.cfi=new N9(this))}}}),F.nu),r(),r(),Qi();var E9=class extends gs{get ga(){return this.Za||(this.Za=function(t){let i,e={get status(){return t.nI},get tasks(){return t.msi},get network(){return t.wZ.ga},createTask:(i,e)=>t.b_i(i,e),addEventListener(t,e){i.yn(t,e)},removeEventListener(t,e){i.fn(t,e)}};return i=new fo(t,e),e}(this)),this.Za}get nI(){return this.M_i.nI}get msi(){return this.M_i.msi.ga}get wZ(){return this.Lnt}b_i(t,i,e){let s,n;if(void 0===e&&(e="persistent"),!t)throw new b("Unexpected - The source description is undefined");if(s=Hc(t),n=V3(i),gr(s))throw new b("Invalid source description");return this.M_i.fsi(s,n).ga}constructor(t,i){super(),this.M_i=t,this.Lnt=i,this.M_i.yn("Zut",this.Ds)}};var k9=function(){const t=new xL(Fe.wE,!1),i=Oh.Ld,e=new K3(t),s=new Q3(i,e),n=new CL(t),r=new i3(i.qot,s,"persistent");return new E9(r,n)}().ga;function x9(t,i){if("function"==typeof t.getAll){return se(void 0===i?t.getAll():t.getAll(i))}return function(t){let i=new xh,e=[];return t.onsuccess=()=>{let s=t.result;s&&s.value?(e.push(s.value),s.continue()):i.sM(e),ya()},t.onerror=()=>{i.nM(t.error),ya()},i.rM}(void 0===i?t.openCursor():t.openCursor(i))}function se(t){return new Promise(((i,e)=>{t.onsuccess=()=>{i(t.result),ya()},t.onerror=()=>{e(t.error),ya()}}))}r(),r(),r(),r(),r(),r();var L9=class{Ty(){if(this.Yh)try{this.Got.abort(),this.Yh=!1}catch(t){}}constructor(t){this.Got=t,this.Yh=!0,this.rM=new Promise(((t,i)=>{this.Got.oncomplete=()=>{this.Yh=!1,t(),ya()},this.Got.onerror=()=>{this.Yh&&(this.Yh=!1,i(this.Got.error||new b("Transaction error")),ya())},this.Got.onabort=()=>{this.Yh=!1,i(new b("Transaction aborted")),ya()}}))}};async function C9(t,i,e){const s=new L9(t);try{const[t]=await Promise.all([i(e),s.rM]);return t}catch(t){if(!s.Yh)throw new n3("IDBTransaction committed prematurely",t);throw t}finally{s.Ty()}}var j9=class{get l(){return this.lD.l}Cot(t){return Promise.resolve("persistent"===t)}jot(t,i){if(void 0===i&&(i="persistent"),"persistent"!==i)return Promise.reject(kr(i));return se(this.T_i(_h.$ot).put(t))}async Oot(t,i){if(void 0===i&&(i="persistent"),"persistent"!==i)return Promise.reject(kr(i));for(const e of t)await this.jot(e,i)}async Jb(t){return Boolean(await this.$b(t))}$b(t){return se(this.T_i(_h.Jot).get(t))}Rot(t,i){return se(this.T_i(_h.Jot).index(i).get(t))}async Not(t){const i=[];for(let e of t){const t=await this.$b(e);t&&i.push(t)}return i}Pot(){return x9(this.T_i(_h.Jot))}zot(t){return x9(this.T_i(_h.Jot),t)}Bot(t,i){return x9(this.T_i(_h.Jot).index(i),t)}wS(t){return se(this.T_i(_h.$ot).delete(t))}async Uot(t){for(const i of t)await this.wS(i)}Qot(){return se(this.T_i(_h.$ot).clear())}T_i(t){if(!this.S_i)throw new b("Lock was released");if(!function(t,i){return t===_h.Jot&&i===_h.Jot||i===_h.$ot}(t,this.S_i.mode))throw new b("Incompatible transaction mode: "+this.S_i.mode+", expected "+t);return this.S_i.objectStore(this.l)}N_i(){this.lD.I_i(this),this.S_i=void 0}constructor(t,i){this.lD=t,this.S_i=i}};ds();var O9=class{Cot(t){return Promise.resolve("persistent"===t)}jot(t,i){return void 0===i&&(i="persistent"),"persistent"!==i?Promise.reject(kr(i)):this.Got(_h.$ot,(i=>i.jot(t)))}Oot(t,i){return void 0===i&&(i="persistent"),"persistent"!==i?Promise.reject(kr(i)):this.Got(_h.$ot,(i=>i.Oot(t)))}Jb(t){return this.Got(_h.Jot,(i=>i.Jb(t)))}$b(t){return this.Got(_h.Jot,(i=>i.$b(t)))}Rot(t,i){return this.Got(_h.Jot,(e=>e.Rot(t,i)))}Not(t){return this.Got(_h.Jot,(i=>i.Not(t)))}Pot(){return this.Got(_h.Jot,(t=>t.Pot()))}zot(t){return this.Got(_h.Jot,(i=>i.zot(t)))}Bot(t,i){return this.Got(_h.Jot,(e=>e.Bot(t,i)))}wS(t){return this.Got(_h.$ot,(i=>i.wS(t)))}Uot(t){return this.Got(_h.$ot,(i=>i.Uot(t)))}Qot(){return this.Got(_h.$ot,(t=>t.Qot()))}sEt(t){return this.D_i(),this.VDt=new j9(this,t),this.VDt}D_i(){if(void 0!==this.VDt)throw new b("Already locked")}I_i(t){if(this.VDt!==t)throw new b("Incorrect lock");this.VDt=void 0}Wo(t){return this.Go.Wo(t)}Got(t,i){return this.Wo((()=>this.E_i(t,i)))}async E_i(t,i){this.D_i();const e=this.k_i.transaction(this.l,t),s=this.sEt(e);try{return await C9(e,i,s)}finally{s.N_i()}}x_i(t){this.D_i();const i=this.k_i.transaction(this.l,t);return this.sEt(i)}static L_i(t,i){let e;const s=new Promise((t=>{e=t})),n=t.reduce(((t,i)=>t.then((()=>{let t;const e=new Promise((i=>{t=i}));return i.Wo((()=>(t(),s))).catch(ya),e}))),Promise.resolve());return e(n.then(i)),s}constructor(t,i){this.VDt=void 0,this.Go=new La,this.k_i=t,this.l=i}};r(),r(),r(),r(),r();var R9={cj:17,C_i:async t=>{const{transaction:i,database:e}=t,s=i.objectStoreNames;if(s&&s.length)for(let t=0;t<s.length;t++)e.deleteObjectStore(s[t]);e.createObjectStore(Q9,{keyPath:"id"}),e.createObjectStore(F9,{keyPath:"key"}),e.createObjectStore(Y9,{keyPath:"key"});e.createObjectStore(V9,{keyPath:"segmentURLsegmentByteRange"}).createIndex("manifestURL","manifestURL");e.createObjectStore(G9,{keyPath:"segmentURLsegmentByteRange"}).createIndex("manifestURL","manifestURL")}},P9=class{async j_i(t){for(const i of this.O_i)this.R_i<i.cj&&await i.C_i(t)}constructor(t){this.R_i=t}},z9=class extends P9{get O_i(){return[R9]}},B9=new class{P_i(t){this.z_i=t}Cst(t){return this.z_i(t)}constructor(){this.z_i=t=>new z9(t)}},U9=18,Q9="cachingTask",F9="licences",Y9="manifest",V9="segment",G9="segmentMetadata";async function W9(){!function(){if("undefined"==typeof indexedDB)throw new b("Indexed database unavailable")}();const t=indexedDB.open("theoplayer-cache-database",U9);return t.addEventListener("upgradeneeded",Z9),await se(t)}async function Z9(t){const i=t.oldVersion<=U9?t.oldVersion:-1,e=t.target,s=e.result,n=e.transaction,r=B9.Cst(i),o={database:s,transaction:n};await C9(n,(t=>r.j_i(t)),o)}var H9=class{static get Ld(){return this.cht||(this.cht=W9()),this.cht}};H9.cht=void 0,r();var X9=class{Got(t){return t(this)}N_i(){this.Hot.N_i(),this.Zot.N_i(),this.Xot.N_i(),this.qot.N_i(),this.Kot.N_i()}constructor(t,i){this.Hot=t.Hot.sEt(i),this.Zot=t.Zot.sEt(i),this.Xot=t.Xot.sEt(i),this.qot=t.qot.sEt(i),this.Kot=t.Kot.sEt(i)}};Oh.ja(class t{static async Cst(){const i=await H9.Ld;return new t(i)}Got(t){const i=this.allCollections;return O9.L_i(i,(()=>this.E_i(i,t)))}async E_i(t,i){const e=t.map((t=>t.l)),s=this.k_i.transaction(e,_h.$ot),n=new X9(this,s);try{return await C9(s,i,n)}finally{n.N_i()}}get allCollections(){return[this.Zot,this.Hot,this.Xot,this.qot,this.Kot]}constructor(t){this.k_i=t,this.Hot=new O9(t,G9),this.Zot=new O9(t,V9),this.Xot=new O9(t,Y9),this.qot=new O9(t,Q9),this.Kot=new O9(t,F9)}}.Cst),r(),r(),r();var q9=class{B_i(t){const i=this.LK.bE(),e=t.createGain();for(const s of i){t.createMediaElementSource(s).connect(e)}return e}get ga(){return this.Za||(this.Za=this.ma()),this.Za}ma(){const t=this;return{createAudioSourceNode:i=>t.B_i(i)}}constructor(t){this.Za=void 0,this.LK=t}};Fz((function(t){return class extends t{ma(){const t=this.U_i.ga;return fe(super.ma(),{get audio(){return t}})}constructor(t,i){super(t,i),this.U_i=new q9(this.xa)}}}),F.nu),r(),r();Fz((function(t){return class i extends t{ka(t){const e=i.Q_i(this.md.analytics),s=i.Q_i(t?t.analytics:void 0);e||s?this.F_i(Ei({},e,s)):this.Y_i&&this.Y_i.disable(),super.ka(t)}F_i(t){if(this.Y_i)this.Y_i.enable(),this.Y_i.setOptions(t);else{const i=s.youbora;if(!i)throw new b("Youbora JavaScript library not loaded.");if(!i.adapters.TheoPlayer2)throw new b("TheoPlayer2 adapter not available on Youbora JavasScript library");const e=new i.Plugin(t);e.setAdapter(new i.adapters.TheoPlayer2(this.ga)),this.Vc&&i.adapters.TheoPlayer2.NativeAdsAdapter&&e.setAdsAdapter(new i.adapters.TheoPlayer2.NativeAdsAdapter(this.ga)),this.Y_i=e}}static Q_i(t){if(t){const i=t.filter((t=>"youbora"===t.integration));if(0===i.length)return;if(i.length>1)throw new b("Only one youbora analytics configuration expected");const e=i[0],{integration:s}=e;return iT(e,["integration"])}}gn(){this.Y_i&&this.Y_i.disable(),super.gn()}constructor(t,i){super(t,i)}}}),F.trt),r(),r(),r();var K9=1,J9=0,$9=1e3,t8=class t extends rM{V_i(){const t=this.ct===1/0,i=t?K9:J9,e=t?-1:this.ct,s=Ms(this.ta.rt.Ix,this.G_i);this.W_i.setPresentationInformation(new this.Z_i(i,e,s))}G_i(t){const i=t.Zx.Ix,e=[];for(let t=0;t<i.length;t++){const s=i[t];s.ji&&s.Ti&&e.push({trackIdx:t,bitrate:s.FY,width:s.ji,height:s.Ti,codecIdentifier:s.dht})}return e}H_i(){return this.ta.LE()*$9}get ct(){return this.ta._d()*$9}get X_i(){return this.q_i}get K_i(){return this.J_i}set K_i(t){this.J_i=t,t&&this.W_i.reportPlayerState(t)}set $_i(t){this.tvi=t}ivi(){return v((()=>{this.evi(),this.svi()}),t.nvi)}SRt(){this.ta.Vc&&(this.ta.Vc.yn("Srt",this.rvi),this.ta.Vc.yn("Nrt",this.ovi),this.ta.Vc.yn("yOt",this.hvi),this.ta.Vc.yn("pOt",this.avi)),this.ta.yn(Zi.qy,this.$oi),this.ta.yn(Me.ua,this.s8),this.ta.yn(Zi.wb,this.uvi),this.ta.yn(Zi.so,this.Qgi),this.ta.yn(E.oP,this.iZ),this.ta.yn(Zi.yb,this.dp),this.ta.yn(Zi.bb,this.sZ),this.ta.yn(E.rP,this.$W),this.ta.yn(Zi.Sb,this.cvi)}NRt(){this.ta.Vc&&(this.ta.Vc.fn("Srt",this.rvi),this.ta.Vc.fn("Nrt",this.ovi),this.ta.Vc.fn("yOt",this.hvi),this.ta.Vc.fn("pOt",this.avi)),this.ta.fn(Zi.qy,this.$oi),this.ta.fn(Me.ua,this.s8),this.ta.fn(Zi.wb,this.uvi),this.ta.fn(Zi.so,this.Qgi),this.ta.fn(E.oP,this.iZ),this.ta.fn(Zi.yb,this.dp),this.ta.fn(Zi.bb,this.sZ),this.ta.fn(E.rP,this.$W),this.ta.fn(Zi.Sb,this.cvi)}gn(){m(this.lvi),this.NRt()}constructor(t,i,e,s=MMPlayerState,n=MMAdState,r=MMPresentationInfo){super(),this.ta=t,this.KS=i,this.W_i=e,this.dvi=s,this.fvi=n,this.Z_i=r,this.gvi=!0,this.q_i=!1,this.tvi=void 0,this.J_i=void 0,this._vi=void 0,this.rvi=t=>{const i=t.yrt;i.A1t();var e;e=i.drt().duration;const s="linear"===i.drt().type;i.y1t(),i.w1t();s&&(this.q_i=!0),this.$_i=this.fvi.AD_IMPRESSION,this.$_i=this.fvi.AD_STARTED},this.ovi=t=>{this.q_i=!1,this.$_i=this.fvi.AD_COMPLETED},this.hvi=t=>{t.xJt===nn.ADBLOCK?this.$_i=this.fvi.AD_BLOCKED:this.$_i=this.fvi.AD_ERROR},this.avi=()=>{this.$_i=this.fvi.AD_SKIPPED},this.cvi=t=>{var i,e,s,n;t.RI===Ri.NI&&(this._vi&&t.YZ!==this._vi&&this.W_i.reportABRSwitch(this._vi,t.YZ),this._vi=t.YZ,this.W_i.reportChunkRequest(new MMChunkInformation(t.Fj,t.YZ,t.mR,t.Slt.zu,void 0,void 0,null!=(s=null==(i=t.Slt.Uct)?void 0:i[0])?s:0,null!=(n=null==(e=t.Slt.Uct)?void 0:e[1])?n:-1)))},this.$oi=t=>{this.K_i=this.dvi.STOPPED,this.yo(t)},this.s8=t=>{this.K_i=this.dvi.ERROR,this.W_i.reportError(t.error,this.H_i())},this.uvi=()=>{this.X_i?this.$_i=this.fvi.AD_PAUSED:this.K_i=this.dvi.PAUSED},this.Qgi=()=>{this.X_i&&(this.$_i=this.fvi.AD_PLAY)},this.iZ=()=>{this.X_i?(this.tvi===this.fvi.AD_PAUSED&&(this.$_i=this.fvi.AD_RESUMED),this.$_i=this.fvi.AD_PLAYING):(this.gvi&&(this.gvi=!1,this.V_i(),this.K_i=this.dvi.STARTED),this.K_i!==this.dvi.PAUSED&&this.K_i!==this.dvi.BUFFERING||(this.K_i=this.dvi.RESUMED))},this.dp=()=>{this.W_i.reportPresentationSize(this.ta.Tk,this.ta.yk)},this.sZ=t=>{this.X_i||this.K_i!==this.dvi.PAUSED||this.W_i.reportPlayerSeekCompleted(t.currentTime*$9)},this.$W=()=>{this.X_i||(this.K_i=this.dvi.BUFFERING)},this.svi=()=>{this.W_i.reportDownloadRate(x.floor(_i.Ld.xY()))},this.evi=()=>{this.X_i||this.W_i.reportPlaybackPosition(this.H_i())},this.K_i=this.dvi.INITIALIZED,this.SRt(),this.lvi=this.ivi()}};t8.nvi=2e3,Fz((function(t){return class extends t{gn(){super.gn(),this.vvi()}constructor(t,i){super(t,i),this.wvi=void 0,this.mvi=void 0,this.pvi=()=>{this.mvi=void 0,this.vvi();const t=super.Ya();t&&(this.mvi=function(t,i){const e=function(t,i){if(t&&t.analytics)for(const i of t.analytics)if("smartsight"===i.integration)return i;if(i&&i.analytics)for(const t of i.analytics)if("smartsight"===t.integration)return t;return}(t,i);if(!e)return;return e}(t,this.md)),this.Avi()},this.Avi=()=>{if(!this.wvi&&this.mvi&&this.bt&&this.bt.src&&!this.KE){const t=MMSmartStreaming.getInstance();!function(t,i,e){t.registerMMSmartStreaming(e.playerName,e.customerID,e.subscriberID,e.domainName),t.reportComponent("THEOSDK"),t.reportPlayerInfo("THEOplayer","THEOplayer","8.13.1"),t.reportDeviceInfo(void 0,void 0,void 0,void 0,void 0,s.innerWidth,s.innerHeight),t.initializeSession("QBRModeDisabled",i,e.metaURL,e.assetID)}(t,this.bt.src,this.mvi),this.wvi=new t8(this,this.mvi,t),this.wvi.yn("ended",this.vvi)}},this.vvi=()=>{this.wvi&&(this.wvi.gn(),this.wvi=void 0)},this.yn(Zi.ro,this.pvi),this.yn(Zi.Gy,this.Avi),this.yn(Zi.so,this.Avi)}}}),F.trt),r(),r();var i8=String.fromCharCode(95);var e8=class t{get ga(){return this.Za||(this.Za=function(t){return{get adsManager(){return t.adsManager},get ids(){return t.ids},get adContainer(){return t.adContainer},get imaSDK(){return t.imaSDK},get sendEvent(){return t.sendEvent},set sendEvent(i){t.sendEvent=i}}}(this)),this.Za}get id(){return this.aS}get adsManager(){return this.Fri}get ids(){return this.Tv}get adContainer(){return this.x2t}get sendEvent(){return this.yvi}set sendEvent(t){for(let t of this.bvi)this.Fri.removeEventListener(t.type,t.listener);this.bvi=[],this.yvi=t,this.Mvi()}get imaSDK(){return!0}Tvi(){for(let t in google.ima.AdEvent.Type){const i=google.ima.AdEvent.Type[t];this.Fri.addEventListener(i,this.Svi),this.bvi.push({type:i,listener:this.Svi})}}Nvi(){nt(this.bvi);for(let t in google.ima.AdEvent.Type){const i=google.ima.AdEvent.Type[t];this.Fri.removeEventListener(i,this.Svi)}}Ivi(t){this.J_.push({type:t.type,adVolume:this.adsManager.getVolume()})}Mvi(){null==this.yvi||this.yvi.call(this,this.J_),this.J_=[]}static Dvi(i){return t.Evi[i]||i}constructor(i,e,s,n){this.Svi=i=>{this.Ivi({type:t.Dvi(i.type)})},this.aS=i,this.Fri=e,this.Tv=s,this.x2t=n,this.bvi=[],this.J_=[]}};e8.Evi={loaded:"AdLoaded",impression:"AdImpression",start:"AdVideoStart",firstQuartile:"AdVideoFirstQuartile",midpoint:"AdVideoMidpoint",thirdQuartile:"AdVideoThirdQuartile",complete:"AdVideoComplete",pause:"AdPaused",skip:"AdSkipped",volumeChange:"AdVolumeChange"};var s8=class{kvi(t,i){this.xvi=h.createElement("script"),this.xvi.id=t.id,this.xvi.type="text/javascript",t.adContainer.appendChild(this.xvi),this.xvi.src="https://z.moatads.com/"+i+"/moatvideo.js#"+t.id,this.Lvi=t.id,s[this.Lvi]=t.ga}Cvi(){this.xvi&&dn(this.xvi),this.Lvi&&(s[this.Lvi]=void 0)}constructor(){this.xvi=void 0,this.Lvi=void 0}};Fz((function(t){return class i extends t{ka(t){var e,s,n;this.jvi(),null==(e=this.Ovi)||e.removeEventListener(google.ima.AdEvent.Type.COMPLETE,this.Rvi),null==(s=this.Ovi)||s.removeEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.jvi),null==(n=this.Ovi)||n.removeEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.Pvi),this.Ovi=void 0,this.x2t=void 0,super.ka(t);const r=t&&t.analytics;this.zvi=i.Bvi(r);this.Vc&&this.zvi&&E4()&&this.Uvi()}gn(){var t,i,e;this.jvi(),null==(t=this.Ovi)||t.removeEventListener(google.ima.AdEvent.Type.COMPLETE,this.Rvi),null==(i=this.Ovi)||i.removeEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.jvi),null==(e=this.Ovi)||e.removeEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.Pvi),this.Ovi=void 0,this.x2t=void 0,this.Vc&&this.Vc.fn("aii",this.uii),super.gn()}Uvi(){this.Vc&&this.Vc.yn("aii",this.uii)}Qvi(t,i,e){const s=i8+"moatApi"+x.floor(1e8*x.random());this.Fvi=new e8(s,t,i,e),this.Fvi.Tvi(),this.Yvi.kvi(this.Fvi,this.zvi.partnerCode)}static Bvi(t){if(t){const i=t.filter((t=>"moat"===t.integration));if(0===i.length)return;if(i.length>1)throw new b("Only one Moat analytics configuration expected");return i[0]}}constructor(t,i){super(t,i),this.zvi=void 0,this.Fvi=void 0,this.Ovi=void 0,this.x2t=void 0,this.Pvi=()=>{this.Qvi(this.Ovi,{partnerCode:this.zvi.partnerCode,viewMode:google.ima.ViewMode.NORMAL},this.x2t)},this.uii=t=>{this.Ovi=t.Qri,this.x2t=t.Wii,this.jvi(),this.Ovi.addEventListener(google.ima.AdEvent.Type.COMPLETE,this.Rvi),this.Ovi.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.jvi),this.Ovi.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.Pvi)},this.Rvi=t=>{const i=t.getAd().getAdPodInfo();i.getAdPosition()<i.getTotalAds()&&(this.jvi(),this.Pvi())},this.jvi=()=>{this.Fvi&&(this.Fvi.Nvi(),this.Fvi=void 0),this.Yvi.Cvi()},this.Yvi=new s8}}}),F.trt),r(),r(),r();var Un=class extends Jr{constructor(t,i,e){super(t,new Date),this.Vvi=i,this.yrt=e}},Lh=function(t){return t.LOADED="DAILoaded",t.AD_BREAK_STARTED="DAIAdBreakStarted",t.AD_BREAK_ENDED="DAIAdBreakEnded",t.AD_PERIOD_STARTED="DAIAdPeriodStarted",t.AD_PERIOD_ENDED="DAIAdPeriodEnded",t.AD_PROGRESS="DAIAdProgress",t.CUEPOINTS_CHANGED="DAICuePointsChanged",t.CLICK="DAIClick",t.ERROR="DAIError",t.STARTED="DAIStarted",t.FIRST_QUARTILE="DAIFirstQuartile",t.MIDPOINT="DAIMidpoint",t.STREAM_INITIALIZED="DAIStreamInitialized",t.THIRD_QUARTILE="DAIThirdQuartile",t.COMPLETE="DAIComplete",t}({}),n8=class extends Un{constructor(t,i){super("DAILoaded",t,i)}},r8=class extends Un{constructor(t,i){super("DAIAdBreakStarted",t,i)}},o8=class extends Un{constructor(t,i){super("DAIAdBreakEnded",t,i)}},h8=class extends Un{constructor(t,i){super("DAIAdProgress",t,i)}},a8=class extends Un{constructor(t,i){super("DAICuePointsChanged",t,i)}},u8=class extends Un{constructor(t,i){super("DAIClick",t,i)}},c8=class extends Un{constructor(t,i){super("DAIError",t,i)}},l8=class extends Un{constructor(t,i){super("DAIStarted",t,i)}},d8=class extends Un{constructor(t,i){super("DAIFirstQuartile",t,i)}},f8=class extends Un{constructor(t,i){super("DAIMidpoint",t,i)}},g8=class extends Un{constructor(t,i){super("DAIStreamInitialized",t,i)}},_8=class extends Un{constructor(t,i){super("DAIThirdQuartile",t,i)}},v8=class extends Un{constructor(t,i){super("DAIComplete",t,i)}};var w8=class extends tu{replaceAdTagParameters(t){return this.Poi.replaceAdTagParameters(null!=t?t:null)}Gvi(t){return this.Poi.contentTimeForStreamTime(t)}Wvi(t){return this.Poi.streamTimeForContentTime(t)}sYt(t,i){const e=function(t){return"vod"===t.availabilityType?new s.google.ima.dai.api.VODStreamRequest(Ei({},m8(t),{contentSourceId:t.contentSourceID,videoId:t.videoID})):new s.google.ima.dai.api.LiveStreamRequest(Ei({},m8(t),{assetKey:t.assetKey}))}(t);this.Poi.requestStream(e)}tr(){this.Zvi(!1),this.Poi.reset()}gn(){this.Bo();const t=google.ima.dai.api.StreamEvent.Type;this.Poi.removeEventListener(t.AD_BREAK_STARTED,this.Hvi),this.Poi.removeEventListener(t.AD_PROGRESS,this.Xvi),this.Poi.removeEventListener(t.CLICK,this.s2t),this.Poi.removeEventListener(t.COMPLETE,this.qvi),this.Poi.removeEventListener(t.CUEPOINTS_CHANGED,this.Kvi),this.Poi.removeEventListener(t.ERROR,this.Ss),this.Poi.removeEventListener(t.FIRST_QUARTILE,this.Jvi),this.Poi.removeEventListener(t.LOADED,this.$vi),this.Poi.removeEventListener(t.MIDPOINT,this.iwi),this.Poi.removeEventListener(t.STARTED,this.ewi),this.Poi.removeEventListener(t.STREAM_INITIALIZED,this.swi),this.Poi.removeEventListener(t.THIRD_QUARTILE,this.nwi),this.Poi.removeEventListener(t.AD_BREAK_ENDED,this.rwi),this.tr(),this.owi&&dn(this.owi)}hwi(t){this.Poi.onTimedMetadata(t)}awi(t,i,e){this.Poi.processMetadata(t,i,e)}uwi(t){const i=this.Poi.previousCuePointForStreamTime(t);if(i)return{dB:i.end,lB:i.start,rk:i.played}}cwi(t,i){const e=this.uwi(t);if(!e)return;const s=t>i&&e.dB>i,n=e.dB>t&&e.lB<=t;return e.rk||!s&&!n?void 0:e.lB}Zvi(t){this.C2t&&(this.C2t.style.display=t?"block":"none")}constructor(t,i,e){super(),this.Poi=t,this.C2t=i,this.owi=e,this.Hvi=t=>{this.Zvi(!0);const i=sa(t),e=ha(t);this.yo(new r8(i,e))},this.rwi=t=>{this.Zvi(!1);const i=sa(t),e=ha(t);this.yo(new o8(i,e))},this.Xvi=t=>{const i=sa(t),e=ha(t);this.yo(new h8(i,e))},this.s2t=t=>{const i=sa(t),e=ha(t);this.yo(new u8(i,e))},this.qvi=t=>{const i=sa(t),e=ha(t);this.yo(new v8(i,e))},this.Kvi=t=>{const i=sa(t),e=ha(t);this.yo(new a8(i,e))},this.Ss=t=>{const i=sa(t),e=ha(t);this.yo(new c8(i,e))},this.Jvi=t=>{const i=sa(t),e=ha(t);this.yo(new d8(i,e))},this.$vi=t=>{const i=sa(t),e=ha(t);this.yo(new n8(i,e))},this.iwi=t=>{const i=sa(t),e=ha(t);this.yo(new f8(i,e))},this.ewi=t=>{const i=sa(t),e=ha(t);this.yo(new l8(i,e))},this.swi=t=>{const i=sa(t),e=ha(t);this.yo(new g8(i,e))},this.nwi=t=>{const i=sa(t),e=ha(t);this.yo(new _8(i,e))},this.C2t&&(this.C2t.style.display="none",this.Poi.setClickElement(this.C2t));const s=google.ima.dai.api.StreamEvent.Type;this.Poi.addEventListener(s.AD_BREAK_STARTED,this.Hvi),this.Poi.addEventListener(s.AD_PROGRESS,this.Xvi),this.Poi.addEventListener(s.CLICK,this.s2t),this.Poi.addEventListener(s.COMPLETE,this.qvi),this.Poi.addEventListener(s.CUEPOINTS_CHANGED,this.Kvi),this.Poi.addEventListener(s.ERROR,this.Ss),this.Poi.addEventListener(s.FIRST_QUARTILE,this.Jvi),this.Poi.addEventListener(s.LOADED,this.$vi),this.Poi.addEventListener(s.MIDPOINT,this.iwi),this.Poi.addEventListener(s.STARTED,this.ewi),this.Poi.addEventListener(s.STREAM_INITIALIZED,this.swi),this.Poi.addEventListener(s.THIRD_QUARTILE,this.nwi),this.Poi.addEventListener(s.AD_BREAK_ENDED,this.rwi)}};function m8(t){const i=google.ima.dai.api.StreamRequest.StreamFormat;var e;return{apiKey:t.apiKey,authToken:t.authToken,format:"dash"===t.format?i.DASH:i.HLS,networkCode:t.networkCode,streamActivityMonitorId:t.streamActivityMonitorID,adTagParameters:t.adTagParameters,omidAccessModeRules:null!=(e=u4(t.omidAccessModeRules))?e:{}}}function sa(t){const i=t.getStreamData(),e=i.adProgressData;let s;e&&(s={j8t:e.adBreakDuration,lwi:e.duration,O8t:e.adPosition,xE:e.currentTime,ct:e.duration,R8t:e.totalAds});return{dwi:s,fwi:(i.cuepoints||[]).map((t=>({lB:t.start,dB:t.end,rk:t.played}))),gwi:i.errorMessage||void 0,_wi:i.manifestFormat||void 0,vwi:i.streamId||void 0,wwi:(i.subtitles||[]).map((t=>({mwi:t.webvtt,pwi:t.ttml,gs:t.language}))),zu:i.url}}function p8(t){return{Kqt:t.getAdSlotId(),J3t:t.getContent(),VN:t.getContentType(),Ti:t.getHeight(),ji:t.getWidth()}}function ha(t){const i=t.getAd();if(!i)return;const e=i.getAdPodInfo(),s=i.getCompanionAds().map(p8);return{TKt:i.getAdId(),A7t:{O8t:e.getAdPosition(),t1t:e.getMaxDuration(),Lri:e.getPodIndex(),fBt:e.getTimeOffset(),R8t:e.getTotalAds()},rqt:i.getAdSystem(),jri:i.getAdvertiserName(),Xqt:i.getApiFramework(),gqt:s,kqt:i.getCreativeId(),ati:i.getCreativeAdId(),Ori:i.getDealId(),$j:i.getDescription(),ct:i.getDuration(),TV:i.getTitle(),Awi:i.getUniversalAdIdRegistry(),ywi:i.getUniversalAdIdValue(),eti:i.getVastMediaHeight(),iti:i.getVastMediaWidth(),K7t:i.getWrapperAdIds(),J7t:i.getWrapperAdSystems(),$7t:i.getWrapperCreativeIds()}}function A8(){const t=h.body.lastElementChild;if(t instanceof HTMLIFrameElement&&"Advertisement"===t.title)return t}r(),r(),r();var y8="theo-dai-clickthrough",b8="urn:google:dai:2018",M8=class{get ga(){const t=this,i=this.bwi;return{contentTimeForStreamTime:i=>t.Poi?t.Poi.Gvi(i):i,streamTimeForContentTime:i=>t.Poi?t.Poi.Wvi(i):i,replaceAdTagParameters(i){t.Poi&&t.Poi.replaceAdTagParameters(i)},get snapback(){return t.Mwi},set snapback(i){t.Mwi=i},get sourceTransformer(){return i.Swi},set sourceTransformer(t){i.Swi=t}}}CE(t){this.m7.Ty(),this.m7=new Wt;V(Vh(this.qri(t,this.m7.ly),this.m7))}async qri(t,i){if(yi(i),!this.Nwi||!this.Poi)return this.ta.Iwi(t);if(this.Nwi.frt)return;const e=this.ta.LE();if(this.Mwi){const s=this.Poi.cwi(t,e);if(s){this.ta.Iwi(s),await this.Poi.zy(Lh.AD_BREAK_ENDED,i);if(this.Poi.uwi(t).dB>t)return}}this.ta.Iwi(t)}vk(){const t=this.Nwi&&this.Nwi.frt;if(t){const i=Mo.xn(this.ta.Dwi()),e=t.fBt,s=e+t.t1t,n=new Mo([e,s]);return i.Sn(n).ks()}return this.ta.Dwi()}async zrt(t,i){if(!t)return this.ta.Ewi(t,i);let e=t;try{this.ta.nt.yn(bs.Hk,this.kwi),e=await this.bwi.xwi(t,i),this.Nwi&&this.Poi&&(this.Lwi=!0)}catch(t){if(X(t),t.code===lt.LICENSE_INVALID)return;const i=new qi(vt.SOURCE_NOT_SUPPORTED,"Something went wrong while setting up a Google DAI stream.",t);throw this.dV=la(i),this.fV=i,this.ta.yo(new Uc(i)),i}await this.ta.Ewi(e,i)}tr(){if(this.Lwi){if(this.ta.nt.fn(bs.Hk,this.kwi),this.ehi){this.ehi.fn(yo.Jk,this.Cwi);for(const t of this.ehi.L.Ix)t.fn(oa.kz,this.jwi);this.ehi=void 0}this.dV=void 0,this.fV=void 0,this.m7.Ty(),this.Nwi&&this.Nwi.tr(),this.Poi&&this.Poi.tr(),this.Lwi=!1}}get lt(){return this.dV||this.ta.Owi()}get zE(){return this.fV||this.ta.Rwi()}gn(){this.tr(),this.ta.Pwi(),this.Poi&&this.Poi.gn()}constructor(t,i,e,s){this.ehi=void 0,this.dV=void 0,this.fV=void 0,this.m7=new Wt,this.Lwi=!1,this.Mwi=!0,this.kwi=t=>{const i=t.Ht;i.Lt===z.MQ&&(i.YA===El.ID3||i.YA===El.EVENT_STREAM&&i.qx===b8)&&(i.UI=lc.Xx,this.ehi=i,i.yn(yo.Jk,this.Cwi))},this.Cwi=t=>{t.uB.yn(oa.kz,this.jwi)},this.jwi=t=>{var i,e;if(this.Poi)if((null==(i=this.ehi)?void 0:i.YA)===El.ID3){const i=t.uB.U;"TXXX"===i.id&&this.Poi.hwi({TXXX:i.text})}else if((null==(e=this.ehi)?void 0:e.YA)===El.EVENT_STREAM){const i=t.uB.U;this.Poi.awi(b8,i,t.kU)}},this.ta=t,this.Poi=i,this.Nwi=e,this.bwi=s,e&&i&&this.ta.Vc&&this.ta.Vc.mrt(e.fti)}};r(),r();var T8=class extends S2{get zwi(){return this.Bwi}get m$t(){return ah.Xh}constructor(t,i,e,s=!0){super(e),this.Bwi=s,this.L3t=t,this.C3t=i}},S8=class extends w4{Uwi(){const t=[Lh.STARTED,Lh.FIRST_QUARTILE,Lh.MIDPOINT,Lh.THIRD_QUARTILE,Lh.COMPLETE];this.Poi.yn(t,this.Qwi),this.Poi.yn(Lh.AD_BREAK_ENDED,this.rwi),this.Poi.yn(Lh.AD_PROGRESS,this.Xvi),this.Poi.yn(Lh.CUEPOINTS_CHANGED,this.Kvi)}get N3t(){return this._ti}get w3t(){return this.P5t}Fwi(t){let i=t.A7t.fBt,e=this.D1t||this.findAdBreakWithPredicate(i,(t=>!t.rk));if(!e){const s=t.A7t.t1t;i=this.ta.LE(),e=new T8(s,s,i,!1),e.O3t(),this.E1t.push(e)}return e}Ywi(t){switch(t){case Lh.STARTED:this._ti=!0;break;case Lh.AD_BREAK_ENDED:this._ti=!1}}Vwi(t,i,e){if(i)switch(t){case Lh.STARTED:case Lh.FIRST_QUARTILE:case Lh.MIDPOINT:case Lh.THIRD_QUARTILE:case Lh.COMPLETE:this.w3t.yo(new Qt(this.D1t))}if(e)switch(t){case Lh.STARTED:case Lh.FIRST_QUARTILE:case Lh.MIDPOINT:case Lh.THIRD_QUARTILE:case Lh.COMPLETE:this.w3t.yo(new gB(this.m1t,this.m1t.Z7t))}switch(t){case Lh.COMPLETE:this.w3t.yo(new wu(this.m1t,this.dti.Z7t));break;case Lh.AD_BREAK_ENDED:this.w3t.yo(new hc(this.frt))}switch(t){case Lh.FIRST_QUARTILE:this.w3t.yo(new z2(this.m1t,this.dti.Z7t));break;case Lh.MIDPOINT:this.w3t.yo(new U2(this.m1t,this.dti.Z7t));break;case Lh.THIRD_QUARTILE:this.w3t.yo(new F2(this.m1t,this.dti.Z7t))}}Gwi(t){const i=t.yrt,e=this.Fwi(i),s=function(t,i){if(t.Vc.length)return!1;for(let e=0;e<i;e++){const i=new d4(t,Qo.VJt);t.P3t(i)}return!0}(e,i.A7t.R8t),n=function(t,i){const e=i.A7t.O8t-1;return t.Vc[e]}(e,i),r=function(t,i){return t.W3t!==I2.READY&&(t.tti(i),!0)}(n,i);this.m1t=n,this.D1t=e,e.O3t(),this.Vwi(t.type,s,r)}Wwi(t){for(const i of this.E1t)if(wo(t,i.fBt))return i}findAdBreakWithPredicate(t,i){for(const e of this.E1t)if(wo(e.fBt,t)&&i(e))return e}get Zwi(){const t=this.findAdBreakWithPredicate(0,(t=>t.zwi));let i=0;return t&&(i=t.t1t),i}Hwi(t,i){let e;for(const s of this.E1t)s.fBt>=t&&s.fBt<=i&&!s.rk&&(!e||s.fBt>=e.fBt)&&(e=s);return e}ZC(){}wrt(t){}tr(){this.m1t&&(this.w3t.yo(new wu(this.m1t,this.m1t.Z7t)),this.m1t=void 0),this.D1t&&(this.w3t.yo(new hc(this.D1t)),this.D1t=void 0),this._ti=!1,nt(this.E1t)}gn(){this.tr(),this.w3t.gn()}constructor(t,i){super(new Yt,ah.Xh),this.Poi=t,this.ta=i,this.Xvi=t=>{const i=this.D1t;if(!i||!this.m1t)return;const e=t.Vvi.dwi;this.m1t.Z7t=e.xE,function(t,i){const e=i.O8t,s=i.j8t,n=i.xE,r=Ke(t.Vc.slice(0,e-1),(t=>{var i;return null!=(i=t.ct)?i:0}));t.i1t=s-n-r}(i,e)},this.Kvi=t=>{const i=t.Vvi.fwi;if(i)for(const t of i)if(!this.Wwi(t.lB)){const i=t.dB-t.lB,e=new T8(i,i,t.lB,!0);this.E1t.push(e)}},this.Qwi=t=>{this.Ywi(t.type),this.Gwi(t)},this.rwi=t=>{this._ti=!1,this.m1t=void 0;const i=this.frt;i&&(i.i1t=0,this.Vwi(t.type,!1,!1),this.D1t=void 0)},this.Uwi()}};function N8(t){if(t.sources)if(Dn(t.sources)){for(const i of t.sources)if(Tt(i))return!0}else if(_o(t.sources))return Tt(t.sources);return!1}r(),Qi();var I8=class{async xwi(t,i){const e=[],s=[];for(const i of t.sources)if(Tt(i)){if(!this.Poi)continue;e.push(i)}else s.push(i);if(0===e.length)return t;let n,r;for(;void 0===n&&0!==e.length;){const{kc:o}=await uu.Ld.mG(e,t),h=o;yi(i);try{n=await this.Xwi(h,i),s.push(n)}catch(t){X(t),r=t,ra(e,h)}}if(0!==t.sources.length&&0===s.length)throw new b("Fatal: unable to play DAI streams.");return r&&Bi(r.message),Ei({},t,{sources:s})}async Xwi(t,i){if(!this.Poi)throw new b("Could not find Google\u2019s IMA DAI HTML5 SDK, all DAI sources will be ignored.");const e=this.Poi.zy(Lh.LOADED,i),s=this.Poi.zy(Lh.ERROR,i),n=t.type===Oe.oL?"dash":"hls";this.Poi.sYt(Ei({},t.ssai,{format:n}));const r=await Promise.race([e,s]);if(r.type===Lh.LOADED){const i=t.type===Oe.oL?Oe.oL:Oe.aL;return xT(Ei({},t,{src:this.Swi?await this.Swi(r.Vvi.zu||""):r.Vvi.zu,type:i}))}throw b(r.Vvi.gwi)}constructor(t){this.Poi=t,this.Swi=t=>t}};Fz(function(t){return i=>class extends i{ma(){const t=super.ma(),i=t.ads;if(i){const t=this.qwi.ga;fe(i,{get dai(){return t}})}return t}get zl(){return this.Kwi}Iwi(t){super.CE(t)}CE(t,i){this.qwi.CE(t)}Dwi(){return super.vk()}vk(){return this.qwi.vk()}ka(t){return this.qwi.tr(),super.ka(t)}async Ewi(t,i){return super.zrt(t,i)}async zrt(t,i){return this.qwi.zrt(t,i)}Owi(){return super.PE()}Rwi(){return super.BE()}PE(){return this.qwi.lt}BE(){return this.qwi.zE}Pwi(){super.gn()}gn(){this.qwi.gn(),this.C2t&&(dn(this.C2t),this.C2t.removeEventListener("keydown",this.Jwi),this.C2t.removeEventListener("click",this.Jwi),this.C2t=void 0),this.$wi&&(dn(this.$wi),this.$wi=void 0)}constructor(i,e){super(i,e),this.Kwi=!1,this.Jwi=t=>{13===t.which&&this.C2t.click(),this.Rk()};const s=this.jk(),n=e.ads.googleIma.useAdUiElementForSsai;let r,o;try{var a;n?(this.$wi=h.createElement("div"),pn(this.$wi),this.$wi.className="theo-dai-ad-ui"):(this.C2t=h.createElement("button"),this.C2t.className=y8),r=t(s,this.C2t,this.$wi),o=new S8(r,this);const i=null!=(a=this.C2t)?a:this.$wi;i&&this.we.appendChild(i),this.Kwi=!0}catch(t){this.C2t=void 0,this.$wi=void 0}const u=new I8(r);this.qwi=new M8(this,r,o,u),this.C2t&&(this.C2t.addEventListener("keydown",this.Jwi),this.C2t.addEventListener("click",this.Jwi))}}}((function(t,i,e){if(!(s.google&&s.google.ima&&_o(s.google.ima.dai)))throw new b("Could not find Google\u2019s IMA DAI HTML5 SDK, all DAI sources will be ignored.");const n=A8(),r=new google.ima.dai.api.StreamManager(t,e),o=A8();return new w8(r,i,o&&o!==n?o:void 0)})),F.Knt),r(),r(),r();var D8=class{get tmi(){return void 0===this.imi?0:(performance.now()-this.imi)/1e3}emi(t){this.smi=t,this.rmi.nmi(t),this.ta.yn(Zi.so,this.Qgi),this.ta.yn(Zi.qy,this.$oi),this.ta.yn(Zi.Eb,this.vci),this.ta.yn(Me.ua,this.s8),this.ta.yn(E.rP,this.omi),this.ta.yn([E.iP,E.eP,E.oP],this.hmi),this.ta.yn(Zi.Zy,this.ami),Ff.zX(this.fRt)}umi(){this.ta.fn(Zi.so,this.Qgi),this.ta.fn(Zi.qy,this.$oi),this.ta.fn(Zi.Eb,this.vci),this.ta.fn(Me.ua,this.s8),this.ta.fn(E.rP,this.omi),this.ta.fn([E.iP,E.eP,E.oP],this.hmi),this.ta.fn(Zi.Zy,this.ami),Ff.jX(this.fRt),this.cmi||(this.rmi.lmi(this.dmi),this.rmi.fmi()),this.gmi&&this._mi(),this.smi=void 0,this.vmi=!1,this.cmi=!1,this.dmi=-1/0,nt(this.wmi)}mmi(){this.vmi&&this.rmi.pmi(),this.imi=performance.now(),this.Ami=v(this.ymi,6e4)}_mi(){this.rmi.bmi(this.tmi),this.gmi=!1,this.imi=void 0,this.Ami&&(m(this.Ami),this.Ami=void 0)}Mmi(){if(j(this.ta._d()))return;const t=10*function(t,i){return x.floor(t/i)}(this.ta.LE()/this.ta._d()*100,10);Qa(this.wmi,t)||(this.wmi.push(t),this.rmi.Tmi(t))}constructor(t,i){this.ta=t,this.rmi=i,this.vmi=!1,this.cmi=!1,this.wmi=[],this.dmi=-1/0,this.gmi=!1,this.Qgi=()=>{this.vmi||(this.rmi.Smi(),this.gmi&&this.rmi.pmi(),this.vmi=!0)},this.$oi=()=>{this.rmi.Nmi(),this.cmi=!0},this.vci=()=>{this.dmi<this.ta.LE()&&(this.dmi=this.ta.LE()),this.Mmi()},this.omi=()=>{this.vmi&&(this.Imi=performance.now(),this.rmi.Dmi(this.ta.LE()))},this.hmi=()=>{this.Imi&&(this.rmi.Emi((performance.now()-this.Imi)/1e3),this.Imi=void 0)},this.s8=()=>{this.dmi<this.ta.LE()&&(this.dmi=this.ta.LE()),this.rmi.tot(this.ta.PE().message)},this.ami=()=>{const t=this.ta._d()===1/0;t&&!this.gmi&&(this.gmi=t,this.mmi())},this.fRt=()=>{this.rmi.lmi(this.dmi),this.rmi.kmi()},this.ymi=()=>{void 0!==this.imi&&this.rmi.xmi(this.tmi)}}};r();var E8=class{nmi(t){this.Lmi(["setDocumentTitle",t.itemTitle]),this.Lmi(["setCustomUrl","https://content.streamone.net/embed/cust=Xo9oT45EptMG/account="+t.accountID+"/item="+t.itemID]),this.Lmi(["trackPageView"])}Smi(){this.Cmi("item first play","viewing","1")}fmi(){this.Cmi("item skipped","skipped","1")}Tmi(t){this.Cmi("item progress","percent",""+t)}kmi(){this.Cmi("item abandoned","window closed","1")}lmi(t){this.Cmi("item time","watched",""+t)}Nmi(){this.Cmi("item finished","ended","1")}Dmi(t){this.Cmi("buffering started","timestamp",""+t)}Emi(t){this.Cmi("buffering ended","duration",""+t)}tot(t){this.Cmi("error","message",""+t)}pmi(){this.Cmi("livestream first play","viewing","1")}xmi(t){this.Cmi("livestream progress","duration",""+t)}bmi(t){this.Cmi("livestream time","watched",""+t)}Cmi(t,i,e){this.Lmi(["trackEvent","Video",t,i,e])}Lmi(t){const i="undefined"!=typeof _paq?_paq:void 0;i?i.push(t):console.warn("The Piwik library required for the StreamOne pre-integration was not found. Make sure it is loaded before instantiating THEOplayer.")}};r();var k8=class{get jmi(){if(!this.Omi)return;const t=this.ta.LE()/this.Omi;return x.floor(4*t)+1}get Rmi(){return void 0!==this.Omi}emi(){this.Dc.yn("Srt",this.rvi),this.Dc.yn("Nrt",this.ovi),this.Dc.yn("pOt",this.avi),this.Dc.yn("yOt",this.hvi),this.ta.yn(Zi.Eb,this.vci),Ff.zX(this.fRt)}umi(){this.Dc.fn("Srt",this.rvi),this.Dc.fn("Nrt",this.ovi),this.Dc.fn("pOt",this.avi),this.Dc.fn("yOt",this.hvi),this.ta.fn(Zi.Eb,this.vci),nt(this.Pmi),Ff.jX(this.fRt),this.Omi=void 0}constructor(t,i,e){this.ta=t,this.Dc=i,this.rmi=e,this.Pmi=[],this.rvi=()=>{this.Omi=this.ta._d(),this.rmi.zmi(this.Omi)},this.ovi=()=>{this.Omi&&(this.rmi.Bmi(this.Omi),nt(this.Pmi),this.Omi=void 0)},this.avi=t=>{if(!this.Omi)return;const i=this.Omi-this.Omi*t.s5t;this.rmi.Umi(i),this.Omi=void 0},this.hvi=()=>{this.Omi=this.ta._d(),this.rmi.Qmi()},this.vci=()=>{const t=this.jmi;if(this.Rmi&&t&&!Qa(this.Pmi,t)){switch(t){case 1:this.rmi.Fmi();break;case 2:this.rmi.Ymi();break;case 3:this.rmi.Vmi();break;case 4:this.rmi.Gmi()}this.Pmi.push(t)}},this.fRt=()=>{this.rmi.Wmi()}}};r();var x8=class{zmi(t){this.rmi.Cmi("ad start","duration",""+t)}Bmi(t){this.rmi.Cmi("ad finished","duration",""+t)}Umi(t){this.rmi.Cmi("ad skipped","remaining time",""+t)}Qmi(){this.rmi.Cmi("ad blocker","detected","1")}Fmi(){this.rmi.Cmi("ad progress","firstQuartile","")}Ymi(){this.rmi.Cmi("ad progress","secondQuartile","")}Vmi(){this.rmi.Cmi("ad progress","thirdQuartile","")}Gmi(){this.rmi.Cmi("ad progress","fourthQuartile","")}Wmi(){this.rmi.Cmi("ad abandoned","window closed","1")}constructor(t){this.rmi=t}};function L8(t){return t&&"streamone"===t.integration}Fz((function(t){return class extends t{gn(){this.fn(Zi.ro,this.ho),this.Zmi&&(this.Hmi&&this.Hmi.umi(),this.Xmi&&this.Xmi.umi(),this.Zmi=!1),super.gn()}constructor(t,i){super(t,i),this.Zmi=!1,this.ho=()=>{this.Zmi&&(this.Hmi.umi(),this.Xmi&&this.Xmi.umi());const t=this.Ya();if(this.Zmi=!1,!t)return;const i=function(t){if(t.analytics)for(let i of t.analytics)if(L8(i))return i}(t);i&&(this.Zmi=!0,this.Hmi.emi(i),this.Xmi&&this.Xmi.emi())};const e=new E8;if(this.Hmi=new D8(this,e),this.Vc){const t=new x8(e);this.Xmi=new k8(this,this.Vc,t)}this.yn(Zi.ro,this.ho)}}}),F.trt),r(),r(),r(),r(),r(),r(),Qi();var C8=class extends Er{async F4(t,i,e){const s=await j8(t);await super.F4(s,i,e),this.qmi(s,i)}async B4(t,i,e){const s=await j8(t);await super.B4(s,i,e),this.qmi(s,i)}qmi(t,i){const e=this.Jmi.Kmi;if(void 0===e)return;const s=i.u4;let n;if(this.$mi!==s&&(this.$mi=s,e.setLevelSwitching(s),e.setContainerFormat(2)),function(t){return no.call(t,"xst")}(i)){const t=i.xst,r=i.xst+i.ct;n=i.rQ,e.newPts(t,r,"video",s)}else 0;e.appendBuffer(t.rI,"video",s,n)}async wS(t,i,e){var s;await super.wS(t,i,e),null==(s=this.Jmi.Kmi)||s.flushBuffer(t,i)}constructor(t,i){super(t),this.Jmi=i,this.$mi=void 0}};async function j8(t){switch(t.YA){case Xi.v$:return t;case Xi.jN:{const i=await Xy(t.rI);return{YA:Xi.v$,rI:new T(i)}}case Xi.w$:throw new b("Opaque initialization segments are not supported on web.")}}var O8=class extends Tr{Rht(t){return t.E3===Ri.NI?new C8(t,this.Jmi):new Er(t)}constructor(t,i){super(t),this.Jmi=i,this.jht(t)}},R8=class extends nU{get Kmi(){return this.tpi}ipi(){this.tpi=new LCEVCdec.LCEVCdec(this.cz.gV,this.epi,{})}ge(){super.ge(),this.spi()}be(){super.be(),this.epi.style.display="none"}tr(){return this.epi.style.display="none",void 0!==this.tpi&&(this.tpi.close(),this.ipi()),super.tr()}wy(){return this.npi=!0,void 0!==this.tpi&&(this.tpi.close(),this.tpi=void 0),this.ku.removeChild(this.epi),super.wy()}eG(t){this.yo(new qj(new RS(lt.ABORTED,t)))}spi(){this.cz.gV.style.display="none",this.epi.style.display="block"}get mht(){return this.cz}kht(t){return new O8(t,this)}Eht(t){return new Jo(t)}constructor(t,i){super(t),this.npi=!1,this.rpi=t=>{this.npi||(t||this.eG("LCEVC SDK failed to initialize."),this.ipi())},this.opi=()=>{this.npi||this.eG("LCEVC SDK failed to initialize.")},this.ku=i,this.epi=h.createElement("canvas"),this.epi.style.width="100%",this.epi.style.height="100%",this.epi.style.position="absolute",this.epi.style.transform="translate(0%, -100%)",this.epi.style.display="none",this.ku.appendChild(this.epi),LCEVCdec.ready.then(this.rpi,this.opi)}},P8=class extends Sr{sG(t){if(t===Ri.NI)return this.hpi=new R8(super.sG(t),this.ku),this.hpi}async BV(t){this.hpi=void 0;const i=t;await i.wy(),await super.BV(i.mht)}get upi(){return this.hpi}constructor(t,i){super(t),this.ku=i}};Qi();var z8=class extends el{async gn(){for(const t of this.Pz.Ix)t.fn(yo.Mx,this.cpi);this.rt.fn(bs.Hk,this.lpi),this.rt.fn(bs.qk,this.fpi),await super.gn(),await this.cz.wy(),await this.QV.BV(this.cz)}constructor(t,i,e,s,n,r,o,h){const a=new P8(r,h),u=new es(a);super(t,i,e,s,n,u.sG(o),h),this.lpi=t=>{t.Ht.yn(yo.Mx,this.cpi)},this.fpi=t=>{t.Ht.fn(yo.Mx,this.cpi)},this.cpi=t=>{var i;const e=null==(i=this.gpi.upi)?void 0:i.Kmi,s=t.Wut.Gx;null==e||e.setCurrentLevel(s)},this.QV=u,this.gpi=a,this.Pz.yn(bs.Hk,this.lpi),this.Pz.yn(bs.qk,this.fpi)}};ko(new class extends zB{bL(t,i,e,s,n,r,o){const h=new ir(Oh.Ld.Xot,Oh.Ld.Hot,Oh.Ld.Zot,Oh.Ld.Kot);let a=i;return GW.PS()&&(a=new GW(a)),new z8(e,s,n,r,h,a,Ri.NI,t)}async nG(t){if(!t.lcevc)return!1;if(!await super.nG(t))return!1;if(void 0===s.LCEVCdec)throw new qi(vt.CONFIGURATION_ERROR,"LCEVC SDK is not loaded.");return!0}oG(){return!1}constructor(...t){super(...t),this.hG=pt.CY}}),r(),Qi();var B8=class extends C${async gn(){for(const t of this.Pz.Ix)t.fn(yo.Mx,this.cpi);this.rt.fn(bs.Hk,this.lpi),this.rt.fn(bs.qk,this.fpi),await super.gn(),await this.QV.BV(this.cz)}constructor(t,i,e,s,n,r,o,h,a){const u=new P8(i,t),c=new es(u);super(c.sG(Ri.NI),e,s,n,r,o,h,a),this.lpi=t=>{t.Ht.yn(yo.Mx,this.cpi)},this.fpi=t=>{t.Ht.fn(yo.Mx,this.cpi)},this.cpi=t=>{var i;const e=null==(i=this.gpi.upi)?void 0:i.Kmi,s=t.Wut.EPt.Gx;null==e||e.setCurrentLevel(s)},this.QV=c,this.gpi=u,this.Pz.yn(bs.Hk,this.lpi),this.Pz.yn(bs.qk,this.fpi)}};ko(new class extends O${bL(t,i,e,s,n,r,o){return new B8(t,i,e,n,r,c$(s.libraryLocation),new L$(s.libraryLocation),new ir(Oh.Ld.Xot,Oh.Ld.Hot,Oh.Ld.Zot,Oh.Ld.Kot),s)}async nG(t,i){if(!t.lcevc)return!1;if(!await super.nG(t,i))return!1;if(void 0===s.LCEVCdec)throw new qi(vt.CONFIGURATION_ERROR,"LCEVC SDK is not loaded.");return!0}oG(){return!1}constructor(...t){super(...t),this.hG=pt.PY}}),r(),r(),r(),r();var U8=function(t){return t._pi="tr",t.vpi="wpi",t}({}),Q8="freewheel-nonlinear-ad",F8=[Zi.Zy,Zi.Eb,Zi.kb,Zi.wb,E.oP,Zi.so],Y8=class t extends X2{Ok(){this.QV.zG()}mpi(){this.ppi.yn("Trt",this.Api),this.ppi.yn(["Srt","Nrt"],this.ypi),this.ppi.yn("Mrt",this.iri)}bpi(){this.ppi.fn("Trt",this.Api),this.ppi.fn(["Srt","Nrt"],this.ypi),this.ppi.fn("Mrt",this.iri)}Mpi(){this.w3t.iu(this.ppi.Tpi)}Spi(){this.ppi.Npi.yn(F8,this.Ds)}Ipi(){this.ppi.Npi.fn(F8,this.Ds)}get _3t(){return this}static get f3t(){return ah.T1t}get f3t(){return t.f3t}get frt(){var t;return null!=(t=this.ppi.Tpi.frt)?t:null}get lrt(){const t=this.ppi.Tpi.dti;return t?[t]:[]}wrt(t){}LE(){return this.ppi.Npi.xE}CE(t,i){}_d(){return this.ppi.Npi.ct}RE(){return this.ppi.Npi.OE}PE(){return this.dV}BE(){return this.fV}bk(){return 0}Sk(){return 0}Ik(){return this.ppi.Npi.Nk}Dk(t){this.ppi.Npi.Nk=t}ZE(){return this.ppi.Npi.WE}HE(t){this.ppi.Npi.WE=t}gk(){return this.ppi.Npi.fk}get grt(){return this.ppi.Tpi.grt}get _rt(){return this.ppi.Tpi._rt}vk(){return this.ppi.Npi._k}JE(){return this.ppi.Npi.KE}A3t(t){if(this.N3t||this.ppi.A3t(t),this.ppi.Dpi){if(t.type===Zi.wb&&this.ta.OE)return!0;if(t.type===Zi.qy)return this.ppi.kpi.Epi(),!0}return!1}be(){this.ppi.be()}Rk(){this.KE||this.ppi.Npi.Rk()}async xpi(){if(!this.ppi.Lpi)try{await this.ppi.l9t()}catch(t){this.Cpi(t,nn.GENERAL)}}async jpi(){if(this.ppi.Npi.Opi)return this.ppi.Npi.Pk(),!1;if(this.ppi.Rpi)try{await this.ppi.kpi.Ppi()}catch(t){this.Cpi(t,nn.PLAYBACK)}return!0}get zpi(){return $t(this.PE())}Cpi(t,i){t.name!==U8._pi&&this.w3t.yo(new mc(i,"Ads could not be loaded."))}async Pk(){if(this.KE&&this.yo(new fi(this.xE)),await this.xpi(),this.zpi)return;const t=await this.jpi();!this.zpi&&t&&this.iri()}Dti(t,i,e){i===eB.crt&&this.ppi.Dti(t)}ge(){this.ppi.ge()}ZC(){this.ppi.Npi.ZC()}jk(){return this.ist}bE(){return this.QV.YG.map((t=>t.gV))}k3t(t){}async gn(){await this.zk(),this.ppi.gn(),await this.QV.BV(this.cz),this.bpi(),this.Ipi(),this.w3t.Bq(this.ppi.Tpi)}async zk(){this.ppi.tr(),this.N3t&&(this.ta.ge(),this.P4t(),this.be())}constructor(t,i,e,s,n){super(t,i),this.dV=void 0,this.fV=void 0,this.ypi=t=>{const i=t.yrt,e="Srt"===t.type;if(i.Z3t===Qo.Y3t){const t=this.ta.we.classList;e?t.add(Q8):t.remove(Q8)}e?this.ge():this.be()},this.Api=()=>{this.z5t(),this.ta.Rk(),this.ta.be()},this.iri=()=>{this.ppi.Lpi&&(this.ta.OE||this.ta.Pk(),this.be(),this.ta.ge(),this.P4t())},this.ppi=s,this.QV=e,this.cz=n,this.ist=n.gV,this.ist.controls=!1,this.mpi(),this.Mpi(),this.Spi()}};r(),r(),r();var V8=class extends S2{get Bpi(){return this.Upi}get Qpi(){return this.Vc[this.Fpi]}set Ypi(t){this.Fpi=t}get Ypi(){return this.Fpi}get Z3t(){return this.H3t}get m$t(){return ah.T1t}constructor(t,i,e,s){super(e),this.Upi=s,this.Fpi=0,this.H3t=W8(s),this.L3t=t,this.C3t=i}};r();var G8=class extends D2{get Vpi(){return this.Gpi}set Vpi(t){this.Gpi!==t&&(this.Gpi=t)}get Ti(){return this.Yl.Bpi.getHeight()}get ji(){return this.Yl.Bpi.getWidth()}get oKt(){return this.Vpi.getEventCallbackUrls(tv.freewheel.SDK.EVENT_AD_CLICK,tv.freewheel.SDK.EVENT_TYPE_CLICK)[0]}get m$t(){return ah.T1t}ma(){return Kr(this)}constructor(t,i,e){super(t,i),this.Gpi=e}};function W8(t){return t.getTimePositionClass()===tv.freewheel.SDK.TIME_POSITION_CLASS_OVERLAY?Qo.Y3t:Qo.VJt}Qi();var Z8=class t extends gs{async Wpi(t,i){this.Zpi=t,this.Hpi=i,this.Xpi(t),await i,this.qpi()}get Kpi(){return this.Jpi}get $pi(){return this.tAi}get iAi(){return this.eAi}get frt(){return this.D1t}get dti(){return this.m1t}get grt(){const t=[];if(this.D1t){const i=this.D1t.Ypi;i>=0&&t.push(...this.D1t.Vc.slice(i+1))}for(const i of this.sAi)t.push(...i.Vc);return t}get _rt(){return this.sAi}qpi(){this.nAi()}Xpi(t){t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_STARTED,this.rAi),t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,this.oAi),t.addEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION,this.hAi),t.addEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION_END,this.aAi),t.addEventListener(tv.freewheel.SDK.EVENT_AD,this.uAi)}cAi(){this.Zpi&&(this.Zpi.removeEventListener(tv.freewheel.SDK.EVENT_SLOT_STARTED,this.rAi),this.Zpi.removeEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,this.oAi),this.Zpi.removeEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION,this.hAi),this.Zpi.removeEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION_END,this.aAi),this.Zpi.removeEventListener(tv.freewheel.SDK.EVENT_AD,this.uAi))}nAi(){this.Jpi=this.lAi(this.dAi),this.tAi=this.lAi(this.fAi).concat(this.lAi(this.gAi)),this.eAi=this.lAi(this._Ai),this.sAi=this.Jpi.concat(this.tAi).concat(this.eAi)}lAi(t){if(!this.Zpi)return[];const i=this.Zpi.getSlotsByTimePositionClass(t);return this.vAi(i)}wAi(t){if(!this.D1t)return void 0;const i=t.getSlot().getAdInstances().indexOf(t);-1!==i&&(this.D1t.Ypi=i);const e=this.D1t.Qpi;return e&&(e.Vpi=t),e}mAi(t){return dl(this.sAi,(i=>i.Bpi===t))}vAi(i){return i.map((i=>{const e=i.getTotalDuration(),s=t.pAi(i);return new V8(e,e,s,i)}))}static AAi(t,i){const e=t.getAdInstances(),s=[];for(const t of e){const e=W8(t.getSlot()),n=new G8(i,e,t),r=[];n.V3t(t.getAdId(),t.getSlot().getWidth(),t.getSlot().getHeight(),t.getDuration(),r,0),i.P3t(n),s.push(n)}return s}P2t(){const t=this.dti;t&&this.yo(new fh(t,this.yAi()))}bAi(){const t=this.dti;t&&(this.yo(new wu(t,t.Vpi.getPlayheadTime())),this.m1t=void 0)}MAi(t){const i=this.frt;i&&(i.i1t=function(t,i,e){void 0===e&&(e=0);let s=0;const n=t.Vc.length;for(let r=i;r<n;r++){const n=t.Vc[r],o=n.ct;if(n){let t=o;r===i&&(t=ur(o-e,0,o)),s+=t}}return s}(i,i.Ypi,t))}static pAi(t){return t.getTimePositionClass()===tv.freewheel.SDK.TIME_POSITION_CLASS_POSTROLL?-1:t.getTimePosition()}yAi(){const t=this.dti;if(!t)return 0;const i=t.Vpi;return i.getPlayheadTime()/i.getDuration()}TAi(t){ra(this.sAi,t),ra(this.Jpi,t),ra(this.tAi,t),ra(this.eAi,t)}tr(){this.cAi(),this.Jpi.length=0,this.tAi.length=0,this.eAi.length=0,this.sAi.length=0,this.m1t=void 0,this.D1t=void 0,this.Zpi=void 0,this.Hpi=void 0}gn(){this.tr(),this.Bo()}constructor(i,e){super(),this.Vs=i,this.vN=e,this.dAi=tv.freewheel.SDK.TIME_POSITION_CLASS_PREROLL,this.fAi=tv.freewheel.SDK.TIME_POSITION_CLASS_MIDROLL,this._Ai=tv.freewheel.SDK.TIME_POSITION_CLASS_POSTROLL,this.gAi=tv.freewheel.SDK.TIME_POSITION_CLASS_OVERLAY,this.Jpi=[],this.tAi=[],this.eAi=[],this.sAi=[],this.rAi=i=>{const e=i.slot,s=this.mAi(e);s&&(t.AAi(e,s),this.D1t=s,s.O3t(),this.TAi(s),s.Z3t===Qo.VJt&&this.yo(new Qt(s)))},this.oAi=()=>{const t=this.frt;t&&t.Z3t===Qo.VJt&&(this.yo(new hc(t)),this.vN.src=""),this.D1t=void 0},this.hAi=t=>{const i=this.wAi(t.adInstance);i&&(this.yo(new gB(i,i.Vpi.getPlayheadTime())),this.m1t=i),t.adInstance.getEventCallbackUrls(tv.freewheel.SDK.EVENT_AD_CLICK,tv.freewheel.SDK.EVENT_TYPE_CLICK).length>0&&(this.Vs.style.cursor="pointer",this.Vs.addEventListener("click",this.SAi))},this.aAi=()=>{this.Vs.style.cursor="",this.Vs.removeEventListener("click",this.SAi)},this.SAi=()=>{this.dti&&this.dti.Vpi.getRendererController().processEvent({name:tv.freewheel.SDK.EVENT_AD_CLICK})},this.uAi=t=>{switch(t.subType){case tv.freewheel.SDK.EVENT_AD_COMPLETE:this.bAi();break;case tv.freewheel.SDK.EVENT_AD_SKIPPED:this.P2t(),this.bAi()}}}};r();var H8=class t extends gs{NAi(){if(this.opt){this.opt.setAdVolume(X8(this.WE,this.Nk))}}IAi(t){this.opt=t,this.Xpi(t)}Xpi(t){t.addEventListener(tv.freewheel.SDK.EVENT_AD,this.DAi),t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_STARTED,this.EAi),t.addEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION,this.kAi),t.addEventListener(tv.freewheel.SDK.EVENT_AD_COMPLETE,this.xAi),t.addEventListener(tv.freewheel.SDK.EVENT_CONTENT_VIDEO_PAUSE_REQUEST,this.LAi),t.addEventListener(tv.freewheel.SDK.EVENT_CONTENT_VIDEO_RESUME_REQUEST,this.CAi)}jAi(){const t=this.opt;t&&(t.removeEventListener(tv.freewheel.SDK.EVENT_AD,this.DAi),t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_STARTED,this.EAi),t.removeEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION,this.kAi),t.removeEventListener(tv.freewheel.SDK.EVENT_AD_COMPLETE,this.xAi),t.removeEventListener(tv.freewheel.SDK.EVENT_CONTENT_VIDEO_PAUSE_REQUEST,this.LAi),t.removeEventListener(tv.freewheel.SDK.EVENT_CONTENT_VIDEO_RESUME_REQUEST,this.CAi))}Pk(){this.nbt.frt&&(this.nbt.frt.Bpi.resume(),this.KE=!1)}Rk(){this.nbt.frt&&(this.nbt.frt.Bpi.pause(),this.KE=!0)}get xE(){const t=this.nbt.dti;return t&&(this.xE=t.Vpi.getPlayheadTime()),this.EG}set xE(t){this.EG=t}get ct(){return this.JM}get Opi(){return!!this.nbt&&void 0!==this.nbt.frt}get KE(){return this.CG}set KE(t){this.CG=t}get Nk(){return this.cT}set Nk(t){this.opt&&this.opt.setAdVolume(t),this.cT=t}get WE(){return this.opt&&(this.OAi=0===this.opt.getAdVolume()),this.OAi}set WE(t){this.opt&&this.opt.setAdVolume(X8(t,this.Nk)),this.OAi=t}get _k(){return this.D5}get OE(){return this.Z5}set OE(t){this.Z5=t}get fk(){return this.H5}static RAi(t){switch(t){case"pause":return tv.freewheel.SDK.VIDEO_STATE_PAUSED;case"playing":return tv.freewheel.SDK.VIDEO_STATE_PLAYING;case"ended":return tv.freewheel.SDK.VIDEO_STATE_COMPLETED;case"stop":return tv.freewheel.SDK.VIDEO_STATE_STOPPED}}PAi(i){const e=t.RAi(i);this.opt&&e&&this.opt.setVideoState(e)}ZC(){const t=this.nbt.dti;t&&t.Vpi.skip()}tr(){if(this.jAi(),this.opt){this.PAi("stop"),this.opt.setVideoState(tv.freewheel.SDK.VIDEO_STATE_STOPPED);const t=this.opt.getTemporalSlots();for(const i of t)i.stop();this.opt.dispose(),this.opt=void 0}this.JM=NaN,this.OE=!1,this.H5=Fn.Nz,this.xE=0,this.zAi=0,this.KE=!0,void 0!==this.BAi&&(m(this.BAi),this.BAi=void 0)}gn(){this.tr(),this.Bo(),this.nbt.fn("Trt",this.xd),this.Xu.fn(Th.pn,this.EAi),this.x2t.removeEventListener("click",this.UAi)}constructor(t,i,e,s){super(),this.ta=t,this.Xu=i,this.nbt=e,this.x2t=s,this.D5=Mo.PP().ks(),this.CG=!0,this.JM=NaN,this.OAi=!1,this.Z5=!1,this.H5=Fn.Nz,this.EG=0,this.zAi=0,this.DAi=t=>{switch(t.subType){case tv.freewheel.SDK.EVENT_AD_PAUSE:(function(t){if(!t)return!0;const i=t.Vpi,e=i.getPlayheadTime(),s=i.getDuration();return e>=s||wo(s,e)})(this.nbt.dti)||(this.KE=!0,this.yo(new Zr(this.xE)));break;case tv.freewheel.SDK.EVENT_AD_RESUME:this.KE=!1,this.yo(new te(this.xE));break;case tv.freewheel.SDK.EVENT_AD_VOLUME_CHANGE:if(this.opt){const t=this.opt.getAdVolume();0===t?this.OAi=!0:this.cT=t,this.yo(new $e(this.xE,this.Nk))}}},this.kAi=()=>{this.OE=!1;const t=this.KE;if(this.KE=!1,t&&(this.yo(new fi(this.xE)),this.yo(new te(this.xE))),this.H5=Fn.Dz,this.xE=0,!this.nbt.dti)return;const i=this.nbt.dti.Vpi;this.JM=i.getDuration(),this.yo(new Hs(this.JM)),this.BAi=v((()=>{if(!this.Opi)return void this.fA();this.nbt.MAi(this.xE);const t=i.getPlayheadTime();ce(t,this.zAi,.001)||this.yo(new A(t,void 0)),this.zAi=t}),250),this.opt&&this.opt.setAdVolume(X8(this.WE,this.Nk))},this.UAi=()=>{const t=this.nbt.dti;t&&(t.Z3t===Qo.Y3t?this.ta.Rk():this.KE||this.Rk())},this.fA=()=>{m(this.BAi),this.BAi=void 0},this.xAi=()=>{this.fA(),this.OE=!0},this.LAi=()=>{this.PAi("pause")},this.CAi=()=>{this.PAi("playing")},this.xd=t=>{t.Yl.Z3t===Qo.VJt&&(this.KE=!1)},this.EAi=()=>{this.opt&&this.opt.resize(this.Xu.Su,this.Xu.Tu)},this.cT=t.Nk,e.yn("Trt",this.xd),this.Xu.yn(Th.pn,this.EAi),this.x2t.addEventListener("click",this.UAi)}};function X8(t,i){return t?0:i}r(),r();var q8=class extends Co{get name(){return U8.vpi}constructor(){super("A FreeWheel Ad Error occurred")}};r();var K8=class extends Co{get name(){return U8._pi}constructor(){super("A FreeWheel Reset Error Occurred")}},J8=0;var $8=class{QAi(t,i,e){t.setNetwork(i.networkId),t.setServer(i.adServerUrl);const s=this.opt;if(s.setProfile(i.profile),i.assetId&&i.assetDuration&&s.setVideoAsset(i.assetId,i.assetDuration),i.siteSectionId&&s.setSiteSection(i.siteSectionId),s.registerVideoDisplayBase(e),i.cuePoints&&i.cuePoints.length)for(const t of i.cuePoints)s.addTemporalSlot("cue-"+ ++J8,t.adUnit,t.timeOffset);const n=i.customData;if(_o(n)){const t=_.keys(n);for(const i of t){const t=n[i];s.addKeyValue(i,t)}}}async FAi(){this.opt.submitRequest(),await this.YAi.rM}tr(){this.opt.removeEventListener(tv.freewheel.SDK.EVENT_REQUEST_COMPLETE,this.VAi),this.YAi.nM(new K8)}constructor(t,i,e,s){this.opt=i,this.VAi=t=>{this.opt.removeEventListener(tv.freewheel.SDK.EVENT_REQUEST_COMPLETE,this.VAi),t.success?this.YAi.sM(void 0):this.YAi.nM(new q8)},this.QAi(t,e,s),i.addEventListener(tv.freewheel.SDK.EVENT_REQUEST_COMPLETE,this.VAi),this.YAi=new xh}};r(),r();var t7=class{GAi(){this.Zpi.removeEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,this.oAi),this.Zpi.removeEventListener(tv.freewheel.SDK.EVENT_ERROR,this.oAi)}get WAi(){return this.My.rM}TYt(){this.GAi(),this.My.nM(new K8)}constructor(t){this.Zpi=t,this.oAi=t=>{this.GAi(),this.My.sM(void 0)},this.h7t=t=>{this.GAi(),this.My.nM(new q8)},this.My=new xh,t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,this.oAi),t.addEventListener(tv.freewheel.SDK.EVENT_ERROR,this.h7t)}},i7=class{Wz(t){this.Zpi=t}Ppi(){return this.ZAi(this.HAi.Kpi)}Epi(){this.ZAi(this.HAi.iAi)}async ZAi(t){if(this.Zpi)for(;t.length>0;){this.XAi=new t7(this.Zpi);const i=this.XAi.WAi,e=this.HAi.frt;e&&e.Z3t===Qo.Y3t&&e.Bpi.stop();t.shift().Bpi.play();try{await i}finally{this.XAi=void 0}}}tr(){this.XAi&&(this.XAi.TYt(),this.XAi=void 0),this.qAi=0}gn(){this.ta.fn(Zi.Eb,this.KAi)}constructor(t,i){this.ta=t,this.HAi=i,this.qAi=0,this.KAi=()=>{const t=this.ta.LE();for(const i of this.HAi.$pi){const e=new Mo([this.qAi,t],[!0,!0]),s=i.Bpi.getTimePosition();if(e.gr(s))switch(i.Bpi.getTimePositionClass()){case tv.freewheel.SDK.TIME_POSITION_CLASS_MIDROLL:this.ZAi([i]);break;case tv.freewheel.SDK.TIME_POSITION_CLASS_OVERLAY:i.Bpi.play(),i.Bpi.setVisible(!0)}}this.qAi=t},t.yn(Zi.Eb,this.KAi)}},e7=0,s7=class t extends Yt{static createUniqueDisplayBaseId(){return"theo-freewheel-"+ ++e7}get Dpi(){return 0!==this.Tpi.iAi.length}get Rpi(){return 0!==this.Tpi.Kpi.length}async l9t(){if(!this.p$t)throw new b("Invalid state");const t=this.JAi,i=t.newContext();i.setParameter(tv.freewheel.SDK.PARAMETER_RENDERER_VIDEO_DISPLAY_CONTROLS_WHEN_PAUSE,!1,tv.freewheel.SDK.PARAMETER_LEVEL_GLOBAL),i.setParameter(tv.freewheel.SDK.PARAMETER_EXTENSION_CONTENT_VIDEO_ENABLED,!1,tv.freewheel.SDK.PARAMETER_LEVEL_GLOBAL);const e=new $8(t,i,this.p$t,this.$Ai),s=this.Tpi.Wpi(i,e.FAi());this.tyi.Wz(i),this.Npi.IAi(i),this.iyi=e;try{await s}finally{this.Npi.NAi(),this.eyi=!0}}get Npi(){return this.i7t}get Tpi(){return this.syi}get Lpi(){return this.eyi}static nyi(t,i,e){const s=h.createElement("div");return s.id=e,s.className="theo-freewheel",i.classList.add("theo-freewheel-video"),s.appendChild(i),t.appendChild(s),s}get kpi(){return this.tyi}A3t(t){this.Npi.PAi(t.type)}ge(){this.x2t.style.display="block",this.vN.style.display="block"}be(){this.x2t.style.display="none",this.vN.style.display="none"}Dti(t){this.p$t=t}tr(){this.eyi=!1,this.p$t=void 0,this.Tpi.tr(),this.tyi.tr(),this.iyi&&(this.iyi.tr(),this.iyi=void 0),this.Npi.tr(),this.vN.src=""}gn(){this.tr(),this.i7t.gn(),this.tyi.gn(),this.Tpi.gn(),this.x2t.remove(),this.ta.we.removeChild(this.x2t)}constructor(i,e,n){super(),this.ta=i,this.vN=e,this.eyi=!1,this.$Ai=t.createUniqueDisplayBaseId(),this.x2t=t.nyi(i.we,e,this.$Ai),this.JAi=new s.tv.freewheel.SDK.AdManager,this.syi=new Z8(this.x2t,this.vN),this.tyi=new i7(this.ta,this.Tpi),this.iu(this.Tpi),this.i7t=new H8(i,n,this.Tpi,this.x2t)}};function n7(t){if(s.tv)switch(t){case"preroll":return tv.freewheel.SDK.ADUNIT_PREROLL;case"midroll":return tv.freewheel.SDK.ADUNIT_MIDROLL;case"postroll":return tv.freewheel.SDK.ADUNIT_POSTROLL;case"overlay":return tv.freewheel.SDK.ADUNIT_OVERLAY}}function r7(t,i,e){if(void 0!==i&&j(i)||i<0||i===1/0)return NaN;switch(t){case"preroll":return 0;case"postroll":return e}return e1(i)}Qi();oc.Ld.tW(new class{get u3t(){return ah.T1t}$G(t){return t.integration===pi.FREEWHEEL}c3t(t,i,e){if(!Boolean(s.tv&&s.tv.freewheel&&s.tv.freewheel.SDK&&s.tv.freewheel.SDK.AdManager))return;const n=new So(t.Uu,t.Ll,1,[Ri.NI]);n.GG(t.we);const r=n.sG(Ri.NI),o=new s7(t,r.gV,t.Uu);return new Y8(t,i,n,o,r)}fH(t){const i=P(t);Dn(i.cuePoints)||(i.cuePoints=[]);const e=[],s=t.assetDuration||0;for(const t of i.cuePoints){const i=r7(t.adUnit,t.timeOffset,s),n=n7(t.adUnit);!j(i)&&Ic(n)?(t.adUnit=n,t.timeOffset=i,e.push(t)):Fe.uA("Invalid adUnit/timeOffset combination. Cue was removed.")}return i.cuePoints=e,i}D9(t,i,e,s){e.Dti(t,i,s)}}),r(),r(),r(),r(),r();var o7=self.theoplayerDeviceMetadata;function Ah(t){return t.navigator&&t.navigator.userAgent||""}r(),r(),r(),il(),r();var h7={"Windows 10":/(Windows 10.0|Windows NT 10.0)/i,"Windows 8.1":/(Windows 8.1|Windows NT 6.3)/i,"Windows 8":/(Windows 8|Windows NT 6.2)/i,"Windows 7":/(Windows 7|Windows NT 6.1)/i,"Windows Vista":/Windows NT 6.0/i,"Windows Server 2003":/Windows NT 5.2/i,"Windows XP":/(Windows NT 5.1|Windows XP)/i,"Windows Phone":/Windows Phone/i,Android:/Android/i,Linux:/(Linux(?!.*Ubuntu)|X11)/,Ubuntu:/Ubuntu/i,iOS:/(iPhone|iPad|iPod)/i,"Mac OS X":/Mac OS X/i,"Mac OS":/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/i,"Chrome OS":/CrOS/i};function An(t,i){const e=h7[i];return!!e&&Boolean(Ah(t).match(e))}function a7(t){return An(t,"Android")}function u7(t){return An(t,"Windows Phone")}function c7(t){return An(t,"iOS")&&!u7(t)}function l7(t){return An(t,"Ubuntu")}var d7=/Windows (NT|Phone) ([0-9.]+)/i,f7=/Mac.*?(OS |OS X )(\d+(([_.])\d+)?(([_.])\d+)?)/i,g7={"Windows 10":d7,"Windows 8.1":d7,"Windows 8":d7,"Windows 7":d7,"Windows Vista":d7,"Windows Server 2003":d7,"Windows XP":d7,"Windows Phone":/Windows Phone ([0-9.]+)/i,Android:/Android (\d+(([_.])\d+)?(([_.])\d+)?)/i,Linux:void 0,Ubuntu:void 0,iOS:/(iPad|iPhone|iPod).*?(OS |os |OS_)(\d+(([_.])\d+)?(([_.])\d+)?)/i,"Mac OS X":f7,"Mac OS":f7,"Chrome OS":void 0};function _7(t,i){const e=g7[i];return e?Ah(t).match(e):null}function v7(t){return t.split(/[_.]/).map((t=>C(t,10)))}function w7(t){if(function(t){return Boolean(Ah(t).match(/Windows/i))}(t)){if(function(t){return An(t,"Windows 10")}(t))return"Windows 10";if(u7(t))return"Windows Phone";if(function(t){return An(t,"Windows 8.1")}(t))return"Windows 8.1";if(function(t){return An(t,"Windows 8")}(t))return"Windows 8";if(function(t){return An(t,"Windows 7")}(t))return"Windows 7";if(function(t){return An(t,"Windows Vista")}(t))return"Windows Vista";if(function(t){return An(t,"Windows Server 2003")}(t))return"Windows Server 2003";if(function(t){return An(t,"Windows XP")}(t))return"Windows XP"}else{if(a7(t))return"Android";if(c7(t))return"iOS";if(function(t){return An(t,"Mac OS X")}(t))return"Mac OS X";if(function(t){return An(t,"Mac OS")}(t))return"Mac OS";if(l7(t))return"Ubuntu";if(function(t){return An(t,"Chrome OS")}(t))return"Chrome OS";if(function(t){return An(t,"Linux")&&!l7(t)}(t))return"Linux"}}function m7(t,i){const e=function(t){const i=_7(t,"Windows 10");return i&&i.length>2?v7(i[2]):void 0}(t),s=function(t){const i=_7(t,"Mac OS X");return i&&i.length>2?v7(i[2]):void 0}(t),n=function(t){const i=_7(t,"Android");return i&&i.length>1?v7(i[1]):void 0}(t),r=function(t){const i=_7(t,"iOS");return i&&i.length>3?v7(i[3]):void 0}(t),o=function(t){const i=_7(t,"Chrome OS");return i&&i.length>0?v7(i[0]):void 0}(t);return e?e.length>i?e[i]:void 0:s?s.length>i?s[i]:void 0:n?n.length>i?n[i]:void 0:r?r.length>i?r[i]:void 0:o&&o.length>i?o[i]:void 0}function p7(t){const i=function(t){return m7(t,0)}(t),e=function(t){return m7(t,1)}(t),s=function(t){return m7(t,2)}(t);if(void 0!==i)return void 0===e?""+i:void 0===s?i+"."+e:i+"."+e+"."+s}var A7={Chrome:/Chrome/i,"Chrome Mobile":void 0,"Chrome iOS":/CriOS/i,Chromium:/Chromium/i,HeadlessChrome:/HeadlessChrome/i,Firefox:/Firefox/i,Seamonkey:/Seamonkey/i,"Firefox iOS":/FxiOS/i,Safari:/Safari/i,Edge:/Edge\/\d+/i,"Edge Chromium":/Edg\/\d+/i,IE:/Trident/i,Opera:/Opera|OPR/i,Vivaldi:/Vivaldi/i,"Android Browser":void 0};function y7(t,i){const e=A7[i];return!!e&&Boolean(Ah(t).match(e))}function b7(t){return Boolean(Ah(t).match(/Mobi/i))}function M7(t){return Boolean(t.chrome&&t.navigator&&t.navigator.vendor&&/google/i.test(t.navigator.vendor))||T7(t)}function T7(t){return y7(t,"Chrome iOS")}function S7(t){return y7(t,"Firefox")&&!I7(t)}function N7(t){return y7(t,"Firefox Mobile")&&!I7(t)&&b7(t)}function I7(t){return y7(t,"Seamonkey")}function D7(t){return y7(t,"Firefox iOS")&&!I7(t)}function E7(t){return y7(t,"Safari")&&!y7(t,"Chrome")&&!Ro.Gd}function k7(t){return Boolean(z7(t))}function x7(t){return y7(t,"Edge")}function L7(t){return y7(t,"Edge Chromium")}function C7(t){return y7(t,"IE")}function j7(t){return y7(t,"Vivaldi")}var O7=/chrome\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/i,R7={Chrome:O7,"Chrome Mobile":O7,"Chrome iOS":/CriOS\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/i,Chromium:O7,HeadlessChrome:O7,Firefox:/Firefox\/([0-9.]+)/i,"Firefox iOS":/FxiOS\/([0-9.]+)/i,Safari:/(Version)\/((\d+)\.(\d+)(?:\.(\d+))?).*Safari/,"Safari Mobile":void 0,Edge:/Edge\/(\d+)/i,"Edge Chromium":/Edg\/(\d+)/i,"Edge Mobile":void 0,IE:/(MSIE |Trident.*?rv:)(\d+)/i,Opera:/(OPR\/(\d+\.\d+))|(Opera(?=.*Version\/((\d+)\.(\d+))))/i,"Opera Mobile":void 0,Vivaldi:/Vivaldi\/((\d+)\.(\d+)\.(\d+)(?:\.(\d+))?)/i,"Android Browser":void 0};function P7(t,i){const e=R7[i];return e?Ah(t).match(e):null}function z7(t){return P7(t,"Opera")}function B7(t){const i=function(t){return P7(t,"Firefox")}(t);return i?S(i[1]):0}function U7(t){const i=function(t){return P7(t,"Firefox iOS")}(t);return i?S(i[1].split(".")[0]):0}function Q7(t){const i=function(t){return P7(t,"Safari")}(t);return i?S(i[2].split(".")[0]):0}function F7(t){const i=function(t){return P7(t,"Edge")}(t);return i?S(i[1]):0}function Y7(t){const i=function(t){return P7(t,"Edge Chromium")}(t);return i?S(i[1]):0}function V7(t){const i=function(t){return P7(t,"IE")}(t);return i?S(i[2]):0}function G7(t){const i=function(t){return P7(t,"Vivaldi")}(t);return i?S(i[1]):0}function W7(t){if(a7(t))return M7(t)?"Chrome Mobile":S7(t)||N7(t)?"Firefox Mobile":x7(t)?"Edge Mobile":k7(t)?"Opera Mobile":"Android Browser";if(c7(t)){if(M7(t)||T7(t))return"Chrome iOS";if(S7(t)||D7(t))return"Firefox iOS";if(x7(t))return"Edge Mobile";if(E7(t)||function(t){return E7(t)&&b7(t)}(t))return"Safari Mobile";if(k7(t))return"Opera Mobile"}return function(t){return y7(t,"Chromium")}(t)?"Chromium":function(t){return y7(t,"HeadlessChrome")}(t)?"HeadlessChrome":M7(t)?"Chrome":S7(t)?"Firefox":E7(t)?"Safari":x7(t)?"Edge":L7(t)?"Edge Chromium":C7(t)?"IE":k7(t)?"Opera":j7(t)?"Vivaldi":void 0}function Z7(t){return j7(t)?G7(t):T7(t)?Number(function(t){const i=R7["Chrome iOS"];return i&&i.exec(Ah(t))||[]}(t)[1]):M7(t)?Number(function(t){const i=R7.Chrome;return i&&i.exec(Ah(t))||[]}(t)[1]):S7(t)||N7(t)?B7(t):D7(t)?U7(t):E7(t)?Q7(t):x7(t)?F7(t):L7(t)?Y7(t):C7(t)?V7(t):k7(t)?function(t){const i=z7(t);return i&&i[0].indexOf("Opera")>-1?S(i[5]):i?S(i[2].split(".")[0]):0}(t):void 0}var H7=function(t){return t.ryi="pc",t.oyi="console",t.hyi="settop",t.ayi="mobile",t.uyi="tablet",t.cyi="smarttv",t.lyi="searchbot",t}({});function X7(t){const i=Ah(t);return i.match(/CrKey|Roku|AFTS|AppleTV|Nexus Player/i)?"settop":i.match(/Xbox|Playstation|Wii|Nintendo/i)?"console":/(iPad|Tablet|(Android(?!.*Mobi))|(Windows(?!.*Phone)(.*Touch))|Kindle|Playbook|Silk|(Puffin(?!.*(IP|AP|WP))))/i.test(i)?"tablet":/Mobi/.test(i)?"mobile":i.match(/GoogleTV|SmartTV|SMART-TV|Internet TV|NetCast|NETTV|boxee|Kylo|DLNADOC|hbbtv|CE-HTML/i)?"smarttv":i.match(/(nuhk|Googlebot|bingbot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/i)?"searchbot":function(t){return Boolean(W7(t))}(t)?"pc":void 0}Qi();var q7=class{dH(t){this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_ID,t.deviceID||function(){let t=jy.$b("deviceId");if(t)return t;let i=Rk();return jy.tM("deviceId",i),i}()),this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.PLAYER,"THEOplayer"),this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.PLAYER_VERSION,"8.13.1"),this.dyi(t),this.fyi(),this.gyi(t),this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.EMPCLIENT_INTEGRATION_VERSION,"3.0"),this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.EMPCLIENT_INTEGRATION_BUILDDATE,"2023-04-17 12:00:00"),t.application&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.APPLICATION,t.application),t.applicationVersion&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.APPLICATION_VERSION,t.applicationVersion),t.userAccountID&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.USER_ACCOUNT_ID,t.userAccountID);const i=t.connectionType;i?this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DATA_CONNECTION_TYPE,i):(this._yi(),Kl.connection&&Kl.connection.addEventListener&&Kl.connection.addEventListener("change",this._yi))}dyi(t){this.vyi(t);const i=t.deviceManufacturer||o7&&o7.manufacturer;i&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_MANUFACTURER,i);const e=t.deviceModel||o7&&o7.model;e&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_MODEL,e)}vyi(t){const i=t.deviceType||function(){const t=X7(self);switch(t){case H7.oyi:return"game-console";case H7.cyi:return"tv";case H7.hyi:return"media-streamer";default:return t}}();i&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_TYPE,i)}fyi(){const t=W7(self);t&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_BROWSER,t);const i=Z7(self);void 0!==i&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_BROWSER_VERSION,i.toString())}gyi(t){const i=t.deviceOs||w7(self);i&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_OS,i);const e=t.deviceOsVersion||p7(self);e&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_OS_VERSION,e.toString())}gn(){Kl.connection&&Kl.connection.removeEventListener&&Kl.connection.removeEventListener("change",this._yi)}constructor(t,i){this.empClient=t,this.agama=i,this._yi=()=>{const t=Fe.vE;switch(t){case"wifi":this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DATA_CONNECTION_TYPE,"wlan");break;case"ethernet":this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DATA_CONNECTION_TYPE,t);break;case"cellular":const i=function(t){switch(t){case"3g":return"mobile/3G";case"4g":return"mobile/4G";default:return}}(Fe._E);i&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DATA_CONNECTION_TYPE,i)}}}};Fz(function(t){return i=>class extends i{CE(t,i){this.wyi&&this.wyi.nZ(),super.CE(t)}gn(){this.wyi&&this.wyi.gn(),super.gn()}constructor(i,e){super(i,e),this.WW=new t,this.wyi=new zk(this,this.WW,e)}}}(class extends Nk{Ok(t){this.myi=t,this.pyi&&(this.WW=function(t,i){const e=function(t,i){switch(i){case"info":return t.LogLevel.INFO;case"debug":return t.LogLevel.DEBUG;case"warning":return t.LogLevel.WARNING;case"error":return t.LogLevel.ERROR;default:return t.LogLevel.FATAL}}(i,t.logLevel);i.setLogLevel(e);const s=new i.EMPClient(t.config);return function(t,i){return t.setExternalConfig(i.config),t}(s,t)}(t,this.pyi),this.WW&&(this.Ayi=new q7(this.WW,this.pyi),this.do=!0))}lH(){return this.pyi||console.warn("Please load the Agama Library (empclient.min.js) in order to use the integration"),!!this.pyi}uH(){return this.do}FZ(t,i){if(this.WW&&this.pyi)switch(t){case nr.dW:this.WW.setMeasurement(this.pyi.Measurement.BUFFER_LENGTH,i);break;case nr.fW:this.WW.setMeasurement(this.pyi.Measurement.BYTES_RECEIVED,i);break;case nr._W:this.WW.setMeasurement(this.pyi.Measurement.SEGMENT_PROFILE_BITRATE,i);break;case nr.vW:this.WW.setMeasurement(this.pyi.Measurement.VIDEO_PROFILE_BITRATE,i);break;case nr.gW:this.WW.setMeasurement(this.pyi.Measurement.SEGMENT_READ_BITRATE,i);break;case nr.hW:this.WW.setMeasurement(this.pyi.Measurement.HTTP_REQUEST_STATUS_CODE_1XX,i);break;case nr.aW:this.WW.setMeasurement(this.pyi.Measurement.HTTP_REQUEST_STATUS_CODE_2XX,i);break;case nr.uW:this.WW.setMeasurement(this.pyi.Measurement.HTTP_REQUEST_STATUS_CODE_3XX,i);break;case nr.cW:this.WW.setMeasurement(this.pyi.Measurement.HTTP_REQUEST_STATUS_CODE_4XX,i);break;case nr.lW:this.WW.setMeasurement(this.pyi.Measurement.HTTP_REQUEST_STATUS_CODE_5XX,i);break;case nr.mW:this.WW.setMeasurement(this.pyi.Measurement.PLAYBACK_POSITION,i);break;case nr.pW:this.WW.setMeasurement(this.pyi.Measurement.NUMBER_OF_FRAMES_DECODED,i);break;case nr.wW:this.WW.setMeasurement(this.pyi.Measurement.NUMBER_OF_FRAMES_DROPPED,i)}}MZ(t,i){if(this.WW&&this.pyi)switch(t){case bk.TW:this.WW.setSessionMetadata(this.pyi.SessionMetadata.ASSET_DURATION,i);break;case bk.MW:this.WW.setSessionMetadata(this.pyi.SessionMetadata.MANIFEST_URI,i);break;case bk.NW:this.WW.setSessionMetadata(this.pyi.SessionMetadata.NUMBER_OF_CONTENT_PROFILES,i);break;case bk.EW:this.WW.setSessionMetadata(this.pyi.SessionMetadata.SERVICE_NAME,i);break;case bk.IW:this.WW.setSessionMetadata(this.pyi.SessionMetadata.CDN,i);break;case bk.DW:this.WW.setSessionMetadata(this.pyi.SessionMetadata.CONTENT_TITLE,i);break;case bk.kW:this.WW.setSessionMetadata(this.pyi.SessionMetadata.CONTENT_TYPE,i);break;case bk.xW:this.WW.setSessionMetadata(this.pyi.SessionMetadata.CONTENT_DESCRIPTION,i)}}dH(){this.Ayi&&this.myi&&this.Ayi.dH(this.myi)}cH(t,i){this.pyi&&this.WW&&(this.HZ(),function(t,i,e,s){const n=Pk(t,e,s);i.abrSession(n,t.ViewState.INITIAL_BUFFERING)}(this.pyi,this.WW,t,i),this.yyi=!0)}gn(){this.Ayi&&this.Ayi.gn(),this.byi(Mk.LW),this.WW=void 0}uZ(t){this.Myi(t)}dZ(t,i){this.WW&&this.WW.event(t.code,i)}HZ(){this.WW&&this.yyi&&(this.WW.exitSession(),this.yyi=!1)}byi(t){if(this.WW&&this.pyi&&(this.HZ(),t===Mk.LW))this.WW.shutdown(this.pyi.ShutdownType.NORMAL_SHUTDOWN)}cZ(t,i,e){this.Myi(t,i,e)}Myi(t,i,e){if(this.WW&&this.pyi)switch(t){case Xe.oP:this.Tyi(this.pyi.ViewState.PLAYING,i,e);break;case Xe.nW:this.Tyi(this.pyi.ViewState.FAILED,i,e);break;case Xe.rW:this.Tyi(this.pyi.ViewState.INITIAL_BUFFERING,i,e);break;case Xe.iW:this.Tyi(this.pyi.ViewState.PAUSED,i,e);break;case Xe.eW:this.Tyi(this.pyi.ViewState.SEEK,i,e);break;case Xe.sW:this.Tyi(this.pyi.ViewState.STALLED,i,e);break;case Xe.oW:this.Tyi(this.pyi.ViewState.NO_ACCESS,i,e)}}Tyi(t,i,e){if(this.WW)if(i){const s=function(t){return t||""}(e);this.WW.viewStateExtended(t,i.code,s)}else this.WW.viewStateChanged(t)}constructor(){super(),this.do=!1,this.yyi=!1,this.pyi=gi.Agama}}),F.trt),r(),r(),r(),r(),r();var K7=function(t){return t.PLAY_ALL="play-all",t.PLAY_NONE="play-none",t.PLAY_LAST="play-last",t}({});r();var Vs=function(t){return t.VOD="vod",t.LIVE="live",t}({}),J7=class{get ga(){return this.Syi.ga}get lt(){return this.dV}get zE(){return this.fV}Nyi(t){this.dV=la(t),this.fV=t,this.ta.yo(new Uc(t))}ka(t){this.Iyi.resetSource(),this.Dyi.eM(),this.Eyi=!1,this.ta.kyi(t)}async zrt(t,i){if(this.xyi.tr(),this.Eyi=!1,!t||!function(t){return t.sources.some((t=>t.integration===KT.UPLYNK))}(t))return await this.ta.Lyi(t,i);try{this.Cyi=await this.jyi.xwi(t),await this.ta.Lyi(this.Cyi,i)}catch(t){this.Nyi(new qi(vt.MANIFEST_LOAD_ERROR,t.message,t))}}gn(){this.m7.Ty(),this.Oyi.Ty(),this.ta.fn(Zi.Gy,this.Ryi),this.ta.fn(Zi.so,this.Qgi),this.ta.fn(Zi.Eb,this.vci),this.ta.fn(Zi.qy,this.$oi),this.ta.fn(E.sP,this.wd);for(const t of this.Iyi.n1t.Ju)t.fn("Pyi",this.zyi),t.fn("Trt",this.Byi),t.fn("Mrt",this.Uyi);this.Iyi.n1t.fn("Art",this.Qyi),this.Iyi.n1t.fn("prt",this.Fyi),this.Iyi.destroy(),this.C2t&&(this.C2t.wy(),this.C2t=void 0),this.Eyi=!1}async fetchAssetInfo(t){if(t&&t.integrationData)try{const i=await this.Yyi.MSt(t.integrationData.source.prefix,t.integrationData.source.id,this.Oyi.ly,t.integrationData.preplayResponse.sid);this.Syi.Vyi(i),this.Dyi.Gyi(i,this.Iyi.n1t.Ju)}catch(t){0}}Wyi(t){this.Iyi.Zyi(t),this.Iyi.lrt.forEach((i=>i.Hyi(t))),this.Iyi.Xyi(this.ta.vk()),this.L2t()}CE(t){if(this.Iyi.frt)return;this.m7.Ty(),this.m7=new Wt;V(Vh(this.qri(t,this.m7.ly),this.m7))}async qri(t,i){if(yi(i),t<this.ta.LE())return void this.qyi(t);let e=[];switch(this.Iyi.Kyi){case K7.PLAY_ALL:e=this.Iyi.Jyi(this.ta.LE(),t),await this.$yi(t,e,i);break;case K7.PLAY_LAST:const s=this.Iyi.Jyi(this.ta.LE(),t).pop();e=s?[s]:[],await this.$yi(t,e,i);break;case K7.PLAY_NONE:this.tbi(t)}}qyi(t){const i=dl(this.Iyi.n1t.Ju,(i=>i.Uct.gr(t)));i?this.ta.ibi(i.lB):this.ta.ibi(t)}tbi(t){const i=this.Iyi.Jyi(this.ta.LE(),t).pop();i&&i.Uct.gr(t)?this.ta.ibi(i.dB):this.ta.ibi(t)}async $yi(t,i,e){for(const t of i)await this.ebi(t,e);const s=i[i.length-1];s&&s.Uct.gr(t)?this.ta.LE()<t&&this.ta.ibi(s.dB):this.ta.ibi(t)}async ebi(t,i){t.fn("Pyi",this.zyi);const e=Promise.race([t.zy("Mrt",i),t.zy("Pyi",i)]);this.Wyi(this.ta.LE()),t.Yh||this.ta.ibi(t.lB),await e,t.yn("Pyi",this.zyi)}L2t(){const t=dl(this.Iyi.lrt,(t=>t.sbi.length>0));if(t){const i=t.sbi[0];this.C2t||(this.C2t=new H1(this.ta.we),this.C2t.yn("clickstart",this.nbi)),this.C2t.W1t=i}else this.C2t&&(this.C2t.wy(),this.C2t=void 0)}constructor(t,i,e,s,n,r,o){this.ta=t,this.xyi=i,this.jyi=e,this.Iyi=s,this.Syi=n,this.Yyi=r,this.Dyi=o,this.dV=void 0,this.fV=void 0,this.m7=new Wt,this.Oyi=new Wt,this.rbi=void 0,this.Eyi=!1,this.C2t=void 0,this.Ryi=t=>{const i=t.currentSource;if(!i||!i.integrationData)return;const{preplayResponse:e,source:s}=i.integrationData;this.Syi.obi(e),e&&e.type===Vs.VOD&&e.ads&&this.Iyi.Gyi(e.ads),this.xyi.hbi=i.integrationData,s.assetInfo&&V(this.fetchAssetInfo(i))},this.Qgi=()=>{this.Eyi=!0},this.vci=()=>{this.Eyi&&this.Wyi(this.ta.LE())},this.$oi=()=>{this.Eyi&&(this.Wyi(1/0),this.Eyi=!1)},this.wd=()=>{V(this.xyi.Cn())},this.zyi=t=>{this.m7.Ty(),this.m7=new Wt;V(Vh(this.qri(t.Yl.dB,this.m7.ly),this.m7))},this.Byi=()=>{1!==this.ta.$E&&(this.rbi=this.ta.$E,this.ta.$E=1)},this.Uyi=()=>{void 0!==this.rbi&&(this.ta.$E=this.rbi,this.rbi=void 0)},this.Qyi=t=>{t.Yl.yn("Pyi",this.zyi),t.Yl.yn("Trt",this.Byi),t.Yl.yn("Mrt",this.Uyi)},this.Fyi=t=>{t.Yl.fn("Pyi",this.zyi),t.Yl.fn("Trt",this.Byi),t.Yl.fn("Mrt",this.Uyi)},this.nbi=()=>{this.ta.Rk()},this.ta.yn(Zi.Gy,this.Ryi),this.ta.yn(Zi.so,this.Qgi),this.ta.yn(Zi.Eb,this.vci),this.ta.yn(Zi.qy,this.$oi),this.ta.yn(E.sP,this.wd),this.Iyi.n1t.yn("Art",this.Qyi),this.Iyi.n1t.yn("prt",this.Fyi)}};r(),r();var $7=bu({breaksIndex:xs,adsIndex:xs,startTime:xs,endTime:xs}),ttt=bu({index:xs,timeOffset:xs}),itt=bu({duration:xs,apiFramework:Du(sn,aE),creative:sn,mimeType:sn,width:xs,height:xs,companions:Ja(function(t){return new mE(t)}((()=>itt))),extensions:Du(oE,Ja(hE)),fw_parameters:Du(oE,wE(sn)),events:wE(Ja(sn))}),ett=bu({type:fE(["linear","nonlinear"]),position:fE(["preroll","midroll","postroll","pause","overlay",""]),timeOffset:xs,duration:xs,ads:Ja(itt),events:wE(Ja(sn))}),stt=bu({breaks:Ja(ett),breakOffsets:Du(oE,Ja(ttt)),placeholderOffsets:Du(oE,Ja($7))}),ntt=bu({required:Du(oE,rE),fairplayCertificateURL:Du(oE,sn),widevineLicenseURL:Du(oE,sn),playreadyLicenseURL:Du(oE,sn)}),rtt={type:fE(lE(Vs)),playURL:sn,prefix:sn,sid:sn,drm:Du(oE,ntt)},ott=bu(Ei({},rtt,{type:fE([Vs.VOD]),ads:stt,interstitialURL:Du(sn,aE,oE)})),htt=Du(ott,bu(Ei({},rtt,{type:fE([Vs.LIVE])})));r();var att=sn,utt=bu({userId:sn,externalId:Du(sn,Ja(sn))});Qi();var ctt=class{async MSt(t){try{return this.abi(t)}catch(t){throw t}}async abi(t){const i=await async function(t){const i=t.prefix,e=ltt[t.assetType],s=function(t){if(Ja(att).uY(t))return 1===t.length?t[0]:t.join(",")+"/multiple";if(att.uY(t))return t;if(utt.uY(t)&&Dn(t.externalId))return 1===t.externalId.length?"ext/"+t.userId+"/"+t.externalId[0]:"ext/"+t.userId+"/"+t.externalId.join(",")+"/multiple";if(utt.uY(t))return"ext/"+t.userId+"/"+t.externalId;throw new k("Invalid asset id")}(t.id),n=await async function(t){if(t&&await Fe.wA())return{rmt:"fps",manifest:"m3u8"};if(t&&await Fe.pA())return{rmt:"wv",manifest:"mpd"};if(t&&await Fe.mA())return{rmt:"pr",manifest:"mpd"};return{}}(t.contentProtected),r=function(t,i){const e=dtt(t,i);return e?{"ad.cping":"1","ad.pingf":String(e)}:{}}(t.assetType,t.ping);let o={};Dn(t.preplayParameters)?t.preplayParameters.forEach((t=>{o[t[0]]=t[1]})):o=t.preplayParameters;const h=i+"/preplay/"+e+s+".json";return bt(h,Ei({v:"2"},o,n,r,o))}(t),e=this.OQ.hI({LI:Ve.GET,zu:i,oI:Ee.CN}),s=await e,n=Ei({},await s.rI(),{type:t.assetType===Fo.ASSET?Vs.VOD:Vs.LIVE});return htt.uY(n)||htt.lY(n,"PreplayResponse"),n}constructor(t){this.OQ=t}},ltt={[Fo.ASSET]:"",[Fo.CHANNEL]:"channel/",[Fo.EVENT]:"event/"};function dtt(t,i){const e=t!==Fo.ASSET;return(!e&&i.adImpressions?1:0)+(!e&&i.freeWheelVideoViews?2:0)+(e&&i.linearAdData?4:0)}r(),r();var ftt=bu({ad_id:sn,apiFramework:Du(aE,sn),companions:Ja(hE),creative:sn,duration:xs,mimeType:sn,height:xs,width:xs,extensions:Du(oE,Ja(hE)),fw_parameters:Du(oE,wE(sn))}),gtt=bu({breakId:sn,ads:Ja(ftt),type:fE(["linear","nonlinear"]),position:fE(["preroll","midroll","postroll","pause","overlay",""]),timeOffset:xs,duration:xs,height:Du(oE,xs),width:Du(oE,xs),events:wE(Ja(sn))}),_tt=bu({breaks:Ja(gtt)}),vtt=bu({next_time:xs,ads:Du(oE,_tt),extensions:Du(oE,Ja(hE)),error:Du(oE,sn),currentBreakEnd:Du(oE,xs)}),wtt=function(t){return t.DSt="start",t.eW="seek",t}({}),mtt=class{async MSt(t,i){try{return this.abi(t,i)}catch(t){throw t}}async abi(t,i){const e=function(t){const i={v:"3",pt:String(t.currentTime)};(function(t){return void 0!==t.seekTime})(t)&&t.hasFreeWheelVideoViews&&(i.ft=String(t.seekTime));t.event&&(i.ev=t.event);return bt(t.zonePrefix+"/session/ping/"+t.sessionId+".json",Ei({},i))}(t),s=this.OQ.hI({LI:Ve.GET,zu:e,oI:Ee.CN,ly:i}),n=await s,r=await n.rI();return vtt.uY(r)||vtt.lY(r,"PingResponse"),r}constructor(t){this.OQ=t}};r(),r();var ptt=class extends ua{get iD(){return this.eD}ma(){return new Att(this.eD)}constructor(t){super("ubi"),this.eD=t}},Att=class extends Jr{constructor(t){super("pingresponse"),this.response=t}};r();var ytt=class extends ua{get lt(){return this.dV}ma(){return new btt(this.dV)}constructor(t){super("cbi"),this.dV=t}},btt=class extends Jr{constructor(t){super("pingerror"),this.error=t}},Mtt=class extends tu{set hbi(t){this.lbi=t}get dbi(){return this.fbi}async Cn(){const t=this.lbi;if(!t)return;0!==dtt(t.source.assetType,t.source.ping)&&(this.fbi=this.ta.vk().start(0),await this.gbi(wtt.DSt),this.ta.yn("timeupdate",this._bi),this.ta.yn("seeking",this.vbi))}async gbi(t,i){const e=this.lbi.preplayResponse,s={};if(j(this.fbi))return void 0;if($t(this.wbi)&&wo(this.wbi,this.ta.LE()-this.fbi))return;void 0!==i&&(s.seekTime=i),void 0!==t&&(s.event=t);let n,r=this.ta.LE()-this.fbi;t===wtt.DSt?r=0:t!==wtt.eW&&this.mbi&&(r=x.min(r,this.mbi)),this.wbi=r;try{var o;const t=await this.pbi.MSt(Ei({zonePrefix:e.prefix,sessionId:e.sid,currentTime:r,hasFreeWheelVideoViews:null==(o=this.lbi)?void 0:o.source.ping.freeWheelVideoViews},s),this.rN.ly);this.yo(new ptt(t)),this.mbi=-1!==t.next_time?t.next_time:void 0,n=t.error}catch(t){Tu(t)||(n=t.message)}finally{n&&this.yo(new ytt(n))}}tr(){this.mbi=void 0,this.lbi=void 0,this.fbi=NaN,this.Abi=!1,this.ybi=NaN,this.wbi=void 0,this.ta.fn("seeking",this.vbi),this.ta.fn("timeupdate",this._bi),this.bbi()}bbi(){this.rN.Ty(),this.rN=new Wt}gn(){this.tr()}constructor(t,i){super(),this.pbi=t,this.ta=i,this.fbi=NaN,this.mbi=void 0,this.Abi=!1,this.ybi=NaN,this.rN=new Wt,this.wbi=void 0,this._bi=async()=>{const t=this.ta.LE();if(this.ybi=t,this.Abi||qe(this.mbi)||j(this.fbi))return;this.fbi+this.mbi<=t&&(this.Abi=!0,await this.gbi(),this.Abi=!1)},this.vbi=()=>{if(this.ta.LE()===this.fbi)return;this.Abi&&this.bbi(),this.ybi=this.ta.LE();const t=this.ybi-(this.fbi||0);j(t)?V(this.gbi(wtt.eW,0)):V(this.gbi(wtt.eW,t))}}};r();var Ttt=class{async xwi(t){const i=[];for(const e of t.sources)if(Stt(e))try{const s=Itt({source:e,preplayResponse:await this.Mbi.MSt(e)},t,this.FJ);s.src&&(s.src=bt(s.src,e.playbackUrlParameters)),i.push(s)}catch(t){0}else i.push(e);if(0!==t.sources.length&&0===i.length)throw new b("Fatal: unable to play UplynkSources.");return Ei({},t,{sources:i})}constructor(t,i){this.Mbi=t,this.FJ=i}};function Stt(t){return"verizon-media"===t.integration||"uplynk"===t.integration}function Ntt(t){if(t.sources)if(Dn(t.sources)){for(const i of t.sources)if(!Ic(i)&&("verizon-media"===i.integration||"uplynk"===i.integration))return!0}else if(!Ic(t.sources))return"verizon-media"===t.sources.integration||"uplynk"===t.sources.integration;return!1}function Itt(t,i,e){const s=t.preplayResponse;let n;t.source.contentProtected&&s.drm&&(n={integration:"uplynk"},s.drm.fairplayCertificateURL&&(n.fairplay={certificateURL:s.drm.fairplayCertificateURL}),s.drm.widevineLicenseURL&&(n.widevine={licenseAcquisitionURL:s.drm.widevineLicenseURL}),s.drm.playreadyLicenseURL&&(n.playready={licenseAcquisitionURL:s.drm.playreadyLicenseURL}));const r=xT({src:s.playURL,contentProtection:n,useNativePlayback:t.source.useNativePlayback,hls:t.source.hls,dash:t.source.dash,seamlessSwitchStrategy:t.source.seamlessSwitchStrategy},i,e);return r.integrationData=t,r}r(),r(),r();var Dtt=class extends ua{ma(){return new Ett(this.Yl.ga)}constructor(t,i){super("Trt"),this.Yl=t,this.kU=i}},Ett=class extends Jr{constructor(t){super("adbreakbegin"),this.adBreak=t}};r();var ktt=class extends ua{ma(){return new xtt(this.Yl.ga)}constructor(t,i){super("Mrt"),this.Yl=t,this.kU=i}},xtt=class extends Jr{constructor(t){super("adbreakend"),this.adBreak=t}};r();var Ltt=class extends ua{ma(){return new Ctt(this.Yl.ga)}constructor(t){super("Pyi"),this.Yl=t}},Ctt=class extends Jr{constructor(t){super("adbreakskip"),this.adBreak=t}};r(),r();var jtt=class extends ua{ma(){return new Ott(this.Yl.ga)}constructor(t){super("r5t"),this.Yl=t}},Ott=class extends Jr{constructor(t){super("updateadbreak"),this.adBreak=t}},Rtt=class extends gs{get ga(){return this.Za||(this.Za=function(t){let i;const e={get startTime(){return t.lB},get endTime(){return t.dB},get duration(){return t.ct},get ads(){return t.Vc.ga},get skipOffset(){return t.RKt},set skipOffset(i){t.RKt=i},addEventListener(t,e){i.yn(t,e)},removeEventListener(t,e){i.fn(t,e)}};return i=new fo(t,e),e}(this)),this.Za}get lB(){return this.yB}get dB(){return this.JM?this.yB+this.JM:void 0}Tbi(t){this.JM=t-this.lB;for(const i of this.Vc.Ju)i.lB>t&&this.Vc.wS(i);this.yo(new jtt(this))}get ct(){return this.JM}get Uct(){const t=this.dB;return $t(t)?new Mo([this.lB,t]):Mo.PP()}get Vc(){return this.Dc}get Sbi(){return this.Nbi}get Yh(){return this.Kh}get RKt(){return this.gmi?-1:this.PKt}set RKt(t){this.gmi||(this.PKt=t)}adt(t){return t>=this.lB&&(qe(this.ct)||t<=this.lB+this.ct)}Ibi(t){return-1!==this.RKt&&(!!$t(this.dB)&&t-this.lB>=this.RKt)}ZC(){this.Dc.Ju.forEach((t=>t.ZC())),this.yo(new Ltt(this))}Dbi(t){const i=$t(this.dB)&&t>=this.dB,e=this.lB<=t&&!i&&!this.Yh,s=this.Yh&&this.dB&&t>=this.dB;e&&(this.Kh=!0,this.yo(new Dtt(this,this.lB))),this.Dc.Ju.forEach((i=>i.Dbi(t))),s&&(this.Nbi=!0,this.Kh=!1,this.yo(new ktt(this,this.dB)))}constructor(t,i,e,s,n){super(),this.yB=t,this.JM=i,this.Dc=e,this.gmi=s,this.Kh=!1,this.Nbi=!1,this.PKt=n}};r(),r();var Ptt=class extends ua{ma(){return new ztt(this.yrt.ga)}constructor(t,i){super("Srt"),this.yrt=t,this.kU=i}},ztt=class extends Jr{constructor(t){super("adbegin"),this.ad=t}};r();var Btt=class extends ua{ma(){return new Utt(this.yrt.ga)}constructor(t,i){super("Nrt"),this.yrt=t,this.kU=i}},Utt=class extends Jr{constructor(t){super("adend"),this.ad=t}};r(),r();var Qtt=class extends ua{ma(){return new Ftt(this.yrt.ga)}constructor(t){super("Ebi"),this.yrt=t}},Ftt=class extends Jr{constructor(t){super("removead"),this.ad=t}},Ytt=class extends rh{isi(t){}rsi(t){this.yo(new Qtt(t))}constructor(){super()}};r();var Vtt=class extends ua{ma(){return new Gtt(this.yrt.ga)}constructor(t){super("h5t"),this.yrt=t}},Gtt=class extends Jr{constructor(t){super("adfirstquartile"),this.ad=t}},Wtt=class extends ua{ma(){return new Ztt(this.yrt.ga)}constructor(t){super("a5t"),this.yrt=t}},Ztt=class extends Jr{constructor(t){super("admidpoint"),this.ad=t}},Htt=class extends ua{ma(){return new Xtt(this.yrt.ga)}constructor(t){super("u5t"),this.yrt=t}},Xtt=class extends Jr{constructor(t){super("adthirdquartile"),this.ad=t}},qtt=class extends ua{ma(){return new Ktt(this.yrt.ga)}constructor(t){super("kbi"),this.yrt=t}},Ktt=class extends Jr{constructor(t){super("adcomplete"),this.ad=t}};r();var Jtt=class t extends gs{static xbi(i,e){return new t(i,e.duration,e.apiFramework||"",e.creative,e.mimeType,e.width,e.height,e.companions.map((e=>t.xbi(i,e))),e.extensions,e.fw_parameters,e.events,void 0)}static Lbi(i,e){return new t(i,e.duration,e.apiFramework||"",e.creative,e.mimeType,e.width,e.height,e.companions.map((e=>t.Lbi(i,e))),e.extensions,e.fw_parameters,void 0,e.ad_id)}get ga(){return this.Za||(this.Za=function(t){let i;const e={get apiFramework(){return t.Xqt},get companions(){return t.Bqt.ga},get creative(){return t.Cbi},get duration(){return t.ct},get endTime(){return t.dB},get events(){return t._X},get extensions(){return t.jbi},get freeWheelParameters(){return t.Obi},get height(){return t.Ti},get mimeType(){return t.gX},get startTime(){return t.lB},get width(){return t.ji},addEventListener(t,e){i.yn(t,e)},removeEventListener(t,e){i.fn(t,e)}};return i=new fo(t,e),e}(this)),this.Za}get lB(){return this.yB}get dB(){return this.yB+this.JM}get ct(){return this.JM}get Xqt(){return this.qqt}get Cbi(){return this.Rbi}get gX(){return this.kX}get ji(){return this.dT}get Ti(){return this.fT}get _X(){return this.J_}get Bqt(){return this.Uqt}get jbi(){return this.Pbi}get Obi(){return this.zbi}get Yh(){return this.Kh}get sbi(){var t;return null!=(t=this.J_.clickthroughs)?t:[]}Dbi(t){const i=this.lB<=t&&t<this.dB,e=i&&!this.Yh,s=!i&&this.Yh;e&&(this.Bbi=!1,this.Ubi=!1,this.Qbi=!1,this.Fbi=!1,this.Kh=!0,this.yo(new Ptt(this,this.lB))),s&&(this.Kh=!1,this.yo(new Btt(this,this.dB)))}Hyi(t){const i=(t-this.lB)/this.ct;!this.Bbi&&i>=.25&&(this.Bbi=!0,this.yo(new Vtt(this))),!this.Ubi&&i>=.5&&(this.Ubi=!0,this.yo(new Wtt(this))),!this.Qbi&&i>=.75&&(this.Qbi=!0,this.yo(new Htt(this))),!this.Fbi&&i>=.9999&&(this.Fbi=!0,this.yo(new qtt(this)))}ZC(){this.Bbi=!0,this.Ubi=!0,this.Qbi=!0,this.Fbi=!0}gn(){this.fn("Srt",this.Ybi),this.fn("Nrt",this.Vbi)}constructor(t,i,e,s,n,r,o,h,a=[],u={},c={},l){super(),this.yB=t,this.JM=i,this.qqt=e,this.Rbi=s,this.kX=n,this.dT=r,this.fT=o,this.Pbi=a,this.zbi=u,this.J_=c,this.SKt=l,this.Uqt=new Ytt,this.Kh=!1,this.Bbi=!1,this.Ubi=!1,this.Qbi=!1,this.Fbi=!1,this.Ybi=()=>this.Hyi(this.yB),this.Vbi=()=>this.Hyi(this.dB),this.Uqt.esi(h),this.yn("Srt",this.Ybi),this.yn("Nrt",this.Vbi)}};r(),r();var $tt=class extends ua{ma(){return new tit(this.Yl.ga)}constructor(t){super("Art"),this.Yl=t}},tit=class extends Jr{constructor(t){super("addadbreak"),this.adBreak=t}};r();var iit=class extends ua{ma(){return new eit(this.Yl.ga)}constructor(t){super("prt"),this.Yl=t}},eit=class extends Jr{constructor(t){super("removeadbreak"),this.adBreak=t}},sit=class extends rh{isi(t){this.yo(new $tt(t))}rsi(t){this.yo(new iit(t))}constructor(){super()}},nit=class{get ga(){return this.Za||(this.Za=function(t){return{get adBreaks(){return t.n1t.ga},get currentAdBreak(){if(t.frt)return t.frt.ga},get currentAds(){return t.frt?t.frt.Vc.ga:(new Ytt).ga},skip(){t.ZC()}}}(this)),this.Za}get n1t(){return this.E1t}get frt(){return dl(this.E1t.Ju,(t=>t.Yh))}get lrt(){return this.frt?this.frt.Vc.Ju.filter((t=>t.Yh)):[]}get Gbi(){if(0===this.n1t.V||0===this.ta.vk().length)return;const t=this.ta.vk().end(this.ta.vk().length-1);return dl(this.n1t.Ju,(i=>i.adt(t)))}get Kyi(){return this.Wbi}Xyi(t){if(0===t.length)return;const i=Mo.xn(t);for(const t of this.E1t.Ju.slice())$t(t.dB)&&i.Cn(0)>t.dB&&this.E1t.wS(t)}Gyi(t){const i=!function(t){return $t(t.breakOffsets)}(t),e=i?this.xyi.dbi:0;for(const s of t.breaks){if(0===s.ads.length)continue;let t=s.timeOffset+e;const n=new Ytt;let r=0;for(const e of s.ads){const s=i?Jtt.Lbi(t,e):Jtt.xbi(t,e);n.Kz(s),t+=s.ct,r+=s.ct}const o=s.timeOffset+e,h=i?void 0:s.duration,a=new Rtt(o,h,n,i,this.Zbi);i&&this.Hbi.push({Eqt:a,nkt:o+r}),this.E1t.Kz(a)}}Xbi(t){const i=this.Gbi;i&&i.Tbi(t+this.xyi.dbi)}Zyi(t){this.qbi=t,this.E1t.Ju.forEach((i=>i.Dbi(t)))}ZC(){const t=this.qbi,i=this.frt;t&&i&&i.Ibi(t)&&i.ZC()}skipAd(t){this.ZC()}Jyi(t,i){let e=[];for(const s of this.n1t.Ju)!s.Sbi&&s.lB>=t&&s.lB<i&&e.push(s);return e}destroy(){this.ta.fn("timeupdate",this.Kbi),this.xyi.fn("ubi",this.Jbi)}resetSource(){var t;for(const t of this.n1t.Ju){for(const i of t.Vc.Ju)i.Bo();t.Bo()}this.n1t.eM(),null==(t=this.$bi)||t.removeAllAds(),this.qbi=void 0,this.Hbi=[]}tMi(t){return dl(this.$bi.ads,(i=>i.creativeId===t.Cbi))}constructor(t,i,e,s){var n;this.Hbi=[],this.$bi=void 0,this.iMi=t=>(this.$bi=t,this),this.Jbi=t=>{t.iD.ads&&this.Gyi(t.iD.ads),t.iD.currentBreakEnd&&this.Xbi(t.iD.currentBreakEnd)},this.Kbi=t=>{if(0===this.Hbi.length||0===this.ta.vk().length)return;const i=this.ta.vk().end(this.ta.vk().length-1);for(const t of this.Hbi.slice())$t(t.Eqt.ct)?ra(this.Hbi,t):t.nkt<i&&(t.Eqt.Tbi(t.nkt),ra(this.Hbi,t))},this.yd=t=>{var i;const e=null==(i=this.$bi)?void 0:i.createAdBreak({timeOffset:t.Yl.lB,maxDuration:t.Yl.ct,customData:t.Yl});t.Yl.yn("Pyi",this.eMi);for(const i of t.Yl.Vc.Ju){var s,n;const r={type:"linear",timeOffset:i.lB,duration:i.ct,creativeId:i.Cbi,skipOffset:t.Yl.RKt,clickThrough:null==(s=i.sbi)?void 0:s[0],customData:i};null==(n=this.$bi)||n.createAd(r,e),i.yn("Srt",this.U7t),i.yn("Nrt",this.sMi),i.yn("h5t",this.nMi),i.yn("a5t",this.rMi),i.yn("u5t",this.oMi),i.yn("kbi",this.bAi)}},this.eMi=t=>{for(const s of t.Yl.Vc.Ju){const t=this.tMi(s);var i,e;if(t)null==(i=this.$bi)||i.beginAd(t),null==(e=this.$bi)||e.skipAd(t)}},this.bd=t=>{for(const i of t.Yl.Vc.Ju)i.Bo();t.Yl.Bo()},this.U7t=t=>{const i=this.tMi(t.yrt);var e;i&&(null==(e=this.$bi)||e.beginAd(i))},this.sMi=t=>{const i=this.tMi(t.yrt);var e;i&&(null==(e=this.$bi)||e.endAd(i))},this.nMi=t=>{const i=this.tMi(t.yrt);var e;i&&(null==(e=this.$bi)||e.updateAdProgress(i,.25))},this.rMi=t=>{const i=this.tMi(t.yrt);var e;i&&(null==(e=this.$bi)||e.updateAdProgress(i,.5))},this.oMi=t=>{const i=this.tMi(t.yrt);var e;i&&(null==(e=this.$bi)||e.updateAdProgress(i,.75))},this.bAi=t=>{const i=this.tMi(t.yrt);var e;i&&(null==(e=this.$bi)||e.updateAdProgress(i,1))},this.ta=t,this.xyi=i,this.E1t=new sit,this.E1t.yn("Art",this.yd),this.E1t.yn("prt",this.bd),this.Zbi=e,this.Wbi=s,t.yn("timeupdate",this.Kbi),this.xyi.yn("ubi",this.Jbi),null==(n=this.ta.Vc)||n.vrt(pi.UPLYNK,this.iMi)}};r(),r(),r();var rit=function(t){return t[t.NOT_AVAILABLE=-1]="NOT_AVAILABLE",t[t.NOT_APPLICABLE=0]="NOT_APPLICABLE",t[t.G=1]="G",t[t.PG=2]="PG",t[t.PG_13=3]="PG_13",t[t.R=4]="R",t[t.NC_17=5]="NC_17",t[t.X=6]="X",t[t.NOT_RATED=7]="NOT_RATED",t}({}),oit=function(t){return t[t.NOT_AVAILABLE=-1]="NOT_AVAILABLE",t[t.NOT_APPLICABLE=0]="NOT_APPLICABLE",t[t.TV_Y=1]="TV_Y",t[t.TV_Y7=2]="TV_Y7",t[t.TV_G=3]="TV_G",t[t.TV_PG=4]="TV_PG",t[t.TV_14=5]="TV_14",t[t.TV_MA=6]="TV_MA",t[t.NOT_RATED=7]="NOT_RATED",t}({}),hit=class t{static hMi(i,e,s){const n=new Qw(i.rating_flags);return new t(e,s,i.duration,Boolean(i.audio_only),i.boundary_details,Boolean(i.error),i.tv_rating,i.max_slice,i.thumb_prefix,i.slice_dur,i.movie_rating,i.owner,i.meta,i.rates,i.thumbs,i.poster_url,i.default_poster_url,i.desc,n.Hb(1),n.Hb(2),n.Hb(4),n.Hb(8),i.external_id,Boolean(i.is_ad),i.asset)}get ga(){return this.Za||(this.Za=function(t){return{startTime:t.lB,endTime:t.dB,duration:t.ct,audioOnly:t.aMi,boundaryDetails:t.uMi,error:t.lt,tvRating:t.cMi,maxSlice:t.lMi,thumbPrefix:t.dMi,sliceDuration:t.fMi,movieRating:t.gMi,ownerId:t._Mi,metadata:t._Q,rates:t.vMi,thumbnailResolutions:t.wMi,posterUrl:t.mMi,defaultPosterUrl:t.pMi,description:t.$j,hasAdultLanguage:t.AMi,hasSexualSituations:t.yMi,hasViolence:t.bMi,hasDrugSituations:t.MMi,externalId:t.TMi,isAd:t.SMi,assetId:t.NMi}}(this)),this.Za}constructor(t,i,e,s,n,r,o,h,a,u,c,l,d,f,g,_,v,w,m,p,A,y,b,M,T){this.lB=t,this.dB=i,this.ct=e,this.aMi=s,this.uMi=n,this.lt=r,this.cMi=o,this.lMi=h,this.dMi=a,this.fMi=u,this.gMi=c,this._Mi=l,this._Q=d,this.vMi=f,this.wMi=g,this.mMi=_,this.pMi=v,this.$j=w,this.AMi=m,this.yMi=p,this.bMi=A,this.MMi=y,this.TMi=b,this.SMi=M,this.NMi=T}};var ait=bu({duration:xs,offset:xs}),uit=bu({c3:ait}),cit=bu({c7:ait}),lit=bu({halftime:ait}),dit=fE(lE(oit)),fit=fE(lE(rit)),git=bu({width:Du(oE,xs),prefix:sn,bw:xs,bh:xs,height:Du(oE,xs)}),_it=bu({audio_only:xs,boundary_details:Du(oE,Ja(Du(uit,cit,lit))),error:xs,tv_rating:dit,max_slice:xs,thumb_prefix:sn,slice_dur:xs,movie_rating:fit,owner:sn,meta:hE,rates:Ja(xs),thumbs:Ja(git),poster_url:sn,duration:xs,default_poster_url:sn,desc:sn,rating_flags:xs,external_id:sn,is_ad:xs,asset:sn}),vit=class{async MSt(t,i,e,s){const n=function(t,i,e){if(att.uY(i))return[wit(t,i,e)];if(Ja(att).uY(i))return i.map((i=>wit(t,i,e)));if(utt.uY(i)){return(Dn(i.externalId)?i.externalId:[i.externalId]).map((s=>wit(t,"ext/"+i.userId+"/"+s,e)))}throw new k("Invalid asset id")}(t,i,s),r=n.map((t=>ao((()=>this.abi(t)),e)));return(await Promise.all(r)).filter($t)}async abi(t){const i=this.OQ.hI({LI:Ve.GET,zu:t,oI:Ee.CN}),e=await i,s=await e.rI();return _it.uY(s)||_it.lY(s,"AssetInfoResponse"),s}constructor(t){this.OQ=t}};function wit(t,i,e){return e?t+"/player/assetinfo/"+i+".json?pbs="+e:t+"/player/assetinfo/"+i+".json"}r(),r();var mit=class extends ua{ma(){return new pit(this.rd.ga)}constructor(t){super("IMi"),this.rd=t}},pit=class extends Jr{constructor(t){super("removeasset"),this.asset=t}};r();var Ait=class extends ua{ma(){return new yit(this.rd.ga)}constructor(t){super("DMi"),this.rd=t}},yit=class extends Jr{constructor(t){super("addasset"),this.asset=t}},bit=class extends rh{Gyi(t,i){let e,s=0;for(const n of t){e=s+n.duration;for(const t of i)s<=t.lB&&t.lB<e&&(e+=t.ct||0);this.Kz(hit.hMi(n,s,e)),s=e}}isi(t){this.yo(new Ait(t))}rsi(t){this.yo(new mit(t))}constructor(){super()}};r(),r();var Mit=class extends ua{ma(){return new Tit(this.iD)}constructor(t){super("EMi"),this.iD=t}},Tit=class extends Jr{constructor(t){super("preplayresponse"),this.response=t}};r();var Sit=class extends ua{ma(){return new Nit(this.iD)}constructor(t){super("kMi"),this.iD=t}},Nit=class extends Jr{constructor(t){super("assetinforesponse"),this.response=t}},Iit=class extends gs{obi(t){t&&this.yo(new Mit(P(t)))}Vyi(t){t.forEach((t=>this.yo(new Sit(t))))}get ga(){return this.Za||(this.Za=this.ma()),this.Za}ma(){let t;const i=this,e={get ads(){return i.Iyi.ga},get assets(){return i.Dyi.ga},addEventListener(i,e){t.yn(i,e)},removeEventListener(i,e){t.fn(i,e)}};return t=new fo(i,e),e}constructor(t,i,e){super(),this.Iyi=t,this.Dyi=i,this.xyi=e,e.yn("ubi",this.Ds),e.yn("cbi",this.Ds)}},Dit=class{xMi(t,i){const e=new ctt(t.wE),s=new mtt(t.wE),n=function(t){if(t.uplynk&&$t(t.uplynk.defaultSkipOffset))return Eit(t.uplynk.defaultSkipOffset);if(t.verizonMedia&&$t(t.verizonMedia.defaultSkipOffset))return Eit(t.verizonMedia.defaultSkipOffset);return-1}(i),r=function(t){var i,e,s,n;const r=null!=(n=null!=(s=null==(i=t.uplynk)?void 0:i.onSeekOverAd)?s:null==(e=t.verizonMedia)?void 0:e.onSeekOverAd)?n:void 0;return function(t){if(!t)return"play-none";switch(t.toLowerCase()){case"play-all":return"play-all";case"play-none":default:return"play-none";case"play-last":return"play-last"}}(r)}(i),o=new Mtt(s,t),h=new Ttt(e,i),a=new nit(t,o,n,r),u=new vit(t.wE),c=new bit,l=new Iit(a,c,o);return new J7(t,o,h,a,l,u,c)}};function Eit(t){return $a(t)?t:-1}Fz((function(t){return class extends t{kyi(t){super.ka(t)}Lyi(t,i){return super.zrt(t,i)}ibi(t){super.CE(t)}PE(){var t;return null!=(t=this.LMi.lt)?t:super.PE()}BE(){var t;return null!=(t=this.LMi.zE)?t:super.BE()}CE(t,i){this.LMi.CE(t)}ka(t){this.LMi.ka(t)}zrt(t,i){return this.LMi.zrt(t,i)}ma(){const t=this.LMi.ga;return fe(super.ma(),{get verizonMedia(){return t},get uplynk(){return t}})}gn(){this.LMi.gn(),super.gn()}constructor(t,i){super(t,i),this.LMi=(new Dit).xMi(this,i)}}}),F.Knt),r(),r(),r(),Qi(),r();var kit=function(t){return t.CREATIVE_VIEW="creativeView",t.START="start",t.FIRST_QUARTILE="firstQuartile",t.MID_POINT="midpoint",t.THIRD_QUARTILE="thirdQuartile",t.COMPLETE="complete",t.MUTE="mute",t.UNMUTE="unmute",t.PAUSE="pause",t.REWIND="rewind",t.RESUME="resume",t.FULL_SCREEN="fullscreen",t.EXIT_FULL_SCREEN="exitFullscreen",t.EXPAND="expand",t.COLLAPSE="collapse",t.ACCEPT_INVITATION_LINEAR="acceptInvitationLinear",t.ACCEPT_INVITATION="acceptInvitation",t.CLOSE_LINEAR="closeLinear",t.CLOSE="close",t.SKIP="skip",t.SKIP_SHOWN="skipShown",t.PROGRESS="progress",t.ENGAGED_VIEW="engagedView",t.IMPRESSION="impression",t.ERROR="error",t}({});r();var xit=class extends D2{ma(){return Kr(this)}get m$t(){return ah.S1t}get lB(){return this.yB}get pqt(){return this.sKt}constructor(t,i,e,s){super(t,i),this.sKt=s,this.yB=e}};r();var Lit=class extends S2{get bBt(){return this.CMi}get m$t(){return ah.S1t}constructor(t,i,e){if(super(i),this.L3t=t,this.C3t=t,e){const t=new Date(e);Nf(t)&&(this.CMi=t)}}},Cit=class{Ox(){this.ta.yn(E.oP,this.vz),this.ta.yn(Zi.wb,this.gRt),this.ta.yn(Zi.so,this.pHt),this.ta.yn(Zi.Mb,this.We),this.ta.yn(Zi.qy,this.Sh),this.ta.yn(Zi.Eb,this.ld),this.ta.yn(Zi.kb,this.d4t),this.ta.yn(vL.MODE_CHANGE,this.jMi)}Cx(){this.ta.fn(E.oP,this.vz),this.ta.fn(Zi.wb,this.gRt),this.ta.fn(Zi.so,this.pHt),this.ta.fn(Zi.Mb,this.We),this.ta.fn(Zi.qy,this.Sh),this.ta.fn(Zi.Eb,this.ld),this.ta.fn(Zi.kb,this.d4t),this.ta.fn(vL.MODE_CHANGE,this.jMi)}get OMi(){return this.RMi}get lrt(){const t=this.OMi;if(!t)return[];const i=[],e=this.PMi();for(const s of t.Vc)e>=s.lB&&this.qAi<=s.lB+s.ct&&i.push(s);return i}PMi(){return this.ta.LE()-this.zMi}BMi(){if(this.UMi)return;if(this.ta._d()!==1/0)return void(0===this.QMi.length&&(this.UMi=this.FMi()));const t=()=>{var t;null==(t=this.YMi)||t.wy(),this.YMi=void 0,this.UMi=void 0};this.YMi=new Wt,this.UMi=this.VMi(this.YMi.ly).catch(this.s8).then(t,t)}async GMi(){const t=x.min(1e3*2**this.WMi,3e4);try{var i;await kt(t,null==(i=this.YMi)?void 0:i.ly),this.WMi++}catch(t){if(Tu(t))return void(this.WMi=0)}this.BMi()}async VMi(t){for(;yi(t),!this.ta.KE;){const i=Fe.Og()-this.ZMi;if(i>1e4)await this.FMi(t),this.ZMi=Fe.Og(),this.WMi=0;else{const e=1e4-i;await kt(e,t)}}}HMi(t){const i=t.bBt;if(i&&this.ta.NE&&0===this.zMi&&!this.XMi&&0!==x.floor(this.ta.vk().start(0))){const e=(this.ta.NE.getTime()-i.getTime())/1e3,s=this.ta.LE()-t.fBt;this.zMi=s-e}}async FMi(t){try{const i=await this.ta.wE.hI({zu:this.qMi}),e=await i.BN(t);if(0===e.avails.length)return void(0!==this.QMi.length&&(this.QMi=[]));if(e.avails.length===this.QMi.length&&e.avails[0].startTimeInSeconds===this.QMi[0].fBt)return void this.HMi(this.QMi[0]);const s=[];for(const t of e.avails){const i=new Lit(t.durationInSeconds,t.startTimeInSeconds,t.availProgramDateTime);for(const e of t.ads){const t=new xit(i,Qo.VJt,e.startTimeInSeconds,e.trackingEvents);t.V3t(e.adId,e.width,e.height,e.durationInSeconds,[],e.skipoffset),i.P3t(t)}s.push(i),this.HMi(i)}this.QMi=zs(s,((t,i)=>t.fBt-i.fBt))}catch(t){throw X(t),new b("Failed to poll MediaTailor tracking events")}}KMi(){var t;null==(t=this.YMi)||t.Ty(),this.YMi=void 0,this.UMi=void 0,this.ZMi=-1/0}JMi(){if(0===this.QMi.length)return;const t=this.QMi[this.QMi.length-1],i=this.PMi();if(t.fBt+t.t1t<this.qAi){var e;this.RMi&&(null==(e=this.ta.Vc)||e.yo(new hc(this.RMi)),this.RMi=void 0)}else{for(const t of this.QMi){const e=t.fBt;if(!(e+t.t1t<this.qAi)&&(e<=i&&e+t.t1t>this.qAi)){var s;if(this.OMi===t)return;return this.RMi=t,void(null==(s=this.ta.Vc)||s.yo(new Qt(this.RMi)))}}var n;if(this.RMi)null==(n=this.ta.Vc)||n.yo(new hc(this.RMi)),this.RMi=void 0}}$Mi(){const t=this.lrt;if(0===t.length)return;let i=[];for(const e of t){const t=e.pqt.filter((t=>Qa(this.tTi,t.eventType)));i=i.concat(t)}for(const t of i)this.iTi(t.startTimeInSeconds)&&(t.eventType===kit.COMPLETE&&this.eTi(kit.ENGAGED_VIEW),this.sTi(t))}nTi(t,i){return i.pqt.filter((i=>Cv(i.eventType,t)))[0]}eTi(t){const i=this.lrt;if(0===i.length)return;const e=this.nTi(t,i[0]);e&&this.sTi(e)}sTi(t){this.Vwi(t.eventType);for(const i of t.beaconUrls){const t={LI:Ve.GET,zu:i,GN:"",oI:Ee.CN};0,V(this.rTi(t))}}Vwi(t){let i;const e=this.lrt;switch(t){case kit.START:i=new gB(e[e.length-1],this.ta.LE());break;case kit.COMPLETE:i=new wu(e[0],this.ta.LE());break;case kit.FIRST_QUARTILE:i=new z2(e[0],this.ta.LE());break;case kit.MID_POINT:i=new U2(e[0],this.ta.LE());break;case kit.THIRD_QUARTILE:i=new F2(e[0],this.ta.LE())}var s;void 0!==i&&(null==(s=this.ta.Vc)||s.yo(i))}async rTi(t){const i=await this.ta.wE.hI(t);i.nI}iTi(t){const i=this.PMi();return t>=this.qAi&&t<i}gn(){this.Cx(),this.KMi(),this.qAi=-1}constructor(t,i,e){this.ZMi=-1/0,this.RMi=void 0,this.zMi=0,this.QMi=[],this.OAi=!1,this.Nq=!1,this.qAi=-1,this.YMi=void 0,this.UMi=void 0,this.WMi=0,this.vz=()=>{this.BMi()},this.pHt=()=>{this.eTi(kit.RESUME)},this.gRt=()=>{this.KMi(),this.eTi(kit.PAUSE)},this.We=()=>{this.KMi(),this.qAi=-1},this.Sh=()=>{this.KMi()},this.ld=()=>{-1===this.qAi&&(this.qAi=this.PMi()),this.JMi(),this.$Mi(),this.qAi=this.PMi()},this.d4t=()=>{if(this.OAi!==this.ta.WE){this.OAi=this.ta.WE;const t=this.OAi?kit.MUTE:kit.UNMUTE;this.eTi(t)}},this.jMi=()=>{if(this.Nq!==this.ta.cs()){this.Nq=this.ta.cs();const t=this.Nq?kit.FULL_SCREEN:kit.EXIT_FULL_SCREEN;this.eTi(t)}},this.s8=t=>{Tu(t)||(this.eTi(kit.ERROR),V(this.GMi()))},this.tTi=[kit.START,kit.FIRST_QUARTILE,kit.MID_POINT,kit.THIRD_QUARTILE,kit.COMPLETE,kit.IMPRESSION,kit.CREATIVE_VIEW],this.ta=t,this.qMi=i,this.XMi=e,this.Ox()}};Fz((function(t){return class extends t{ka(t){return this.oTi&&(this.oTi.gn(),this.oTi=void 0,this.aDt()),super.ka(t)}async zrt(t,i){if(!t||!function(t){return t.sources.some((t=>t.integration===KT.MEDIATAILOR))}(t))return super.zrt(t,i);try{const e=await this.hTi(t,i);this.aTi=new G2(this),await super.zrt(e,i)}catch(t){this.eG(new qi(vt.MANIFEST_LOAD_ERROR,t.message,t))}}nk(t){var i;(null==(i=this.aTi)?void 0:i.inAdBreak)||super.nk(t)}CE(t,i){var e;(null==(e=this.oTi)?void 0:e.OMi)||super.CE(t,i)}PE(){var t;return null!=(t=this.dV)?t:super.PE()}BE(){var t;return null!=(t=this.fV)?t:super.BE()}eG(t){this.dV=la(t),this.fV=t,this.yo(new Uc(t))}aDt(){this.dV=void 0,this.fV=void 0}async hTi(t,i){let e=[];for(const s of t.sources){if(!aS(s)){e.push(s);continue}const t=s;if(!t.src){e.push(s);continue}const n=await this.uTi(t,i);yi(i);const r=Ei({},t,{integration:void 0,src:n});e.push(r)}const s=P(t);return s.sources=e,s}async uTi(t,i){const e=t.src||"",s=e.match(/.+?(?=\/v1\/)/);if(!s)throw new b("Could not find MediaTailor session initialization url");const n=s[0],r=_t(e,"?ads."),o=r?{zu:e,oI:Ee.CN}:{zu:e,LI:Ve.POST,GN:JSON.stringify({adParams:t.adParams}),oI:Ee.CN},h=await ao((()=>this.cTi(o,i)),i);let a;try{if(a=n+h.manifestUrl,!r){const t=n+h.trackingUrl,i=sS(a);this.oTi=new Cit(this,t,i)}}catch(t){throw new b("Something went wrong parsing the MediaTailor session initialization response")}return a}async cTi(t,i){try{const e=await this.wE.hI(t);return await e.BN(i)}catch(t){throw X(t),new b("Failed to initialize MediaTailor session manifest")}}gn(){var t;this.oTi&&(this.oTi.gn(),this.oTi=void 0),this.aDt(),null==(t=this.aTi)||t.destroy(),this.aTi=void 0,super.gn()}constructor(t,i){super(t,i),this.oTi=void 0,this.dV=void 0,this.fV=void 0,this.aTi=void 0}}}),F.trt),r(),r(),r(),r(),Qi(),r();var Ph=function(t){return t[t.lTi=0]="lTi",t[t.oP=1]="oP",t[t.iW=2]="iW",t[t.dTi=3]="dTi",t[t.fTi=4]="fTi",t[t.gTi=5]="gTi",t[t.ua=6]="ua",t}({});r();var jit=class extends tu{get Vx(){}get Rt(){return this.He}set Rt(t){this.nB(t)}get ga(){var t;return null!=(t=this.Za)?t:this.Za=oo(this)}get o(){return String(this.ou.componentTag)||"hbbtvaudiotrack"}get Lt(){return this.v6}get kh(){return this.eB}get gs(){return""}get UI(){return this.Rt?"enabled":"disabled"}set UI(t){this.nB("enabled"===t)}get Zx(){return this.qz}get Hx(){}set Hx(t){}get Gx(){return this.iB}nB(t){this.He=t,t?this.KRt._Ti(this.ou):this.KRt.vTi(this.ou)}constructor(t,i,e,s,n=!1){super(),this.iB=ft(),this.qz=new ki,this.ou=t,this.eB=i,this.v6=e,this.He=n,this.KRt=s}};r(),r(),r();var Oit=function(t){return t.zA="urn:dvb:casystemid:19219",t.BA="urn:dvb:casystemid:19156",t}({}),Rit=function(t){return t.zA="application/vnd.ms-playready.initiator+xml",t.BA="application/widevine+xml",t}({});function Pit(t,i,e){switch(t){case"urn:dvb:casystemid:19219":return function(t){return'<?xml version="1.0" encoding="utf-8"?><PlayReadyInitiator xmlns="http://schemas.microsoft.com/DRM/2007/03/protocols/"><LicenseServerUriOverride><LA_URL>'+(null!=t?t:"")+"</LA_URL></LicenseServerUriOverride></PlayReadyInitiator>"}(i);case"urn:dvb:casystemid:19156":if(!e)throw new b("Content URL is needed for Widevine license request");return function(t,i){return'<?xml version="1.0" encoding="utf-8"?><WidevineCredentialsInfo xmlns="http://www.smarttv-alliance.org/DRM/widevine/2012/protocols/"><ContentURL>'+A0(null!=i?i:"")+"</ContentURL><DeviceID></DeviceID><StreamID></StreamID><ClientIP></ClientIP><DRMServerURL>"+A0(null!=t?t:"")+"</DRMServerURL><DRMAckServerURL></DRMAckServerURL><DRMHeartBeatURL></DRMHeartBeatURL><DRMHeartBeatPeriod></DRMHeartBeatPeriod><UserData></UserData><Portal></Portal><StoreFront></StoreFront><BandwidthCheckURL></BandwidthCheckURL><BandwidthCheckInterval></BandwidthCheckInterval></WidevineCredentialsInfo>"}(i,e);default:throw new b("DRM key system is not supported")}}var zit=class extends IR{wTi(t){this.mTi(),this.ku=t}async pTi(t){if(!t.yV.length)return void this.mTi();if(!this.ku)throw new b("The OIPF DRM agent has to be attached to the DOM");let i;this.ATi||(this.ATi=h.createElement("object"),this.ATi.type="application/oipfDrmAgent",this.ku.appendChild(this.ATi),this.ATi.onDRMMessageResult=this.yTi,this.ATi.onDRMRightsError=this.bTi,this.MTi=h.createElement("object"),this.MTi.type="application/oipfCapabilities",this.ku.appendChild(this.MTi));for(const e of t.yV){let s,n,r;if(e.NS===Ga)s=Oit.zA,n=Rit.zA,r=Pit(Oit.zA,e.qY);else{if(e.NS!==Iv)continue;s=Oit.BA,n=Rit.BA,r=Pit(Oit.BA,e.qY,t.$x)}try{return await this.Ast(n,r,s),void this.yo(new AR)}catch(t){i=t}}i&&this.yo(new Go(i))}wy(){return this.TTi=void 0,this.ku=void 0,super.wy()}Ast(t,i,e){var s,n;return this.TTi=new xh,this.STi=null==(n=this.ATi)||null==(s=n.sendDRMMessage)?void 0:s.call(n,t,i,e),this.STi||null==this.TTi.nM||this.TTi.nM.call(this.TTi,new lu(vt.CONTENT_PROTECTION_INTERNAL_ERROR,"No DRM message returned by OIPF DRM agent")),this.TTi.rM}NTi(t){switch(t){case 5:return vt.CONTENT_PROTECTION_NOT_SUPPORTED;case 2:case 1:case 3:case 4:case 6:return vt.CONTENT_PROTECTION_INTERNAL_ERROR;default:return vt.CONTENT_PROTECTION_ERROR}}ITi(t){switch(t){case 2:return"The DRM agent was unable to complete the request";case 3:return"The specified MIME type is unknown for the specified DRM system";case 4:return"User consent is needed for that action";case 5:return"The specified DRM System is unknown";case 6:return"The license message has the wrong format";default:return"Unspecified error occurred"}}DTi(t){return 0===t?vt.CONTENT_PROTECTION_LICENSE_ERROR:1===t?vt.CONTENT_PROTECTION_LICENSE_INVALID:vt.CONTENT_PROTECTION_ERROR}ETi(t){switch(t){case 0:return"No license, consumption of the content is blocked";case 1:return"Invalid license, consumption of the content is blocked";case 2:return"Valid license, consumption of the content is unblocked";default:return"Unknown error occurred"}}mTi(){this.ATi&&(dn(this.ATi),this.ATi=void 0),this.MTi&&(dn(this.MTi),this.MTi=void 0)}async M8(t,i,e){}constructor(...t){super(...t),this.ATi=void 0,this.MTi=void 0,this.ku=void 0,this.STi=void 0,this.TTi=void 0,this.yTi=(t,i,e)=>{var s,n,r,o;if(0===e)return void(null==(o=this.TTi)||null==(r=o.sM)||r.call(o,t));const h=this.NTi(e),a=this.ITi(e),u=new lu(h,a);null==(n=this.TTi)||null==(s=n.nM)||s.call(n,u)},this.bTi=(t,i,e,s)=>{const n=this.DTi(t),r=this.ETi(t),o=new lu(n,r);this.yo(new Go(o))}}};r();var Bit=class{get _k(){return Mo.RP(0,this.cz.ct)}get ck(){return Nr.pG}set ck(t){}get md(){return this.KS}N$(t){return!1}D$(t){return vn.resolve(void 0)}async pTi(t){await this.E$.pTi(this.KS)}wy(){return vn.resolve(void 0)}constructor(t,i,e){this.KS=t,this.cz=i,this.E$=e}};Qi(),ds();var Uit=class extends tu{get TE(){return Mo.PP()}get NE(){}get wV(){}get Uu(){return this.Xu}get _k(){var t,i;return null!=(i=null==(t=this.vV)?void 0:t._k)?i:Mo.PP()}get wk(){return this.kG}get s6(){return!1}get FE(){return!1}get mz(){return Ei({},wC)}get lt(){return this.dV}get J5(){return!1}get wa(){return this.Zo}get Ctt(){return!0}get G5(){return!1}get Lk(){return!0}set Lk(t){}get Ll(){return this.FG}get nt(){return this.C7}get i7(){return this.IG}get LV(){return this.Qo}Rtt(t){this.E$.wTi(t),this.ast.Rtt(t)}H$(t){for(const i of t)if(i.YA===uh.QQ)return i}async $n(t){if(this.vV)throw new b("Already loaded a media source");if(t.YA===uh.QQ)return this.vV=new Bit(t,this,this.E$),await this.vV.pTi(t),this.vV;throw new b("Unsupported media source configuration for HbbTV")}async kTi(t){await this.xTi()}async Pk(){await this.xTi()}cV(t){}async tr(){this.vV=void 0,this.LTi=void 0}async wy(){await this.tr(),this.Ul.gn(),this.C7.gn(),this.ast.gn(),this.ust.gn(),this.E$.fn(jr,this.Ds),await this.E$.wy()}ge(){this.IG=!0,this.ast.ge()}be(){this.IG=!1,this.ast.be()}DV(){return!1}kV(t,i,e,s,n){throw new b("Adding native sideloaded text tracks is not supported on HbbTV")}xtt(){}Ltt(){}Ott(){}GE(){return{Bz:0,Uz:0,Qz:0}}Fk(){}CV(t){throw new b("Adding custom text tracks is not supported on HbbTV")}jk(){}Wk(t,i,e,s,n,r,o,h,a){const u=new lO(t,i,e,s,n,r,o,a,h);return this.Ul.tt(u),this.j7.tt(u),u}jV(){for(const t of this.Ul.Ix.slice())t.gn();this.Ul.tr()}BQ(t){this.Ul.it(t),this.j7.it(t)}CTi(){const t=h.getElementsByTagName("object");for(let i=0;i<t.length;i++){const e=t.item(i);if("video/broadcast"===e.type){const t=e;return t.onPlayStateChange=this.jTi,0===t.playState&&(null==t.bindToCurrentChannel||t.bindToCurrentChannel.call(t)),t}}}xTi(){var t,i;if(!this.OTi||3===this.OTi.playState||0===this.OTi.playState)return Promise.resolve("");if(null==(t=this.LTi)?void 0:t.rM)return null==(i=this.LTi)?void 0:i.rM;this.LTi=new xh;try{null==this.OTi.stop||this.OTi.stop.call(this.OTi)}catch(t){Fe.cA("Unable to stop broadcast for HbbTV",t),this.LTi.nM(new b("Unable to stop broadcast for HbbTV"))}return this.LTi.rM}constructor(t,i){super(),this.Xu=t,this.FG=i,this.Zo=new ut,this.Qo=new nk,this.Ul=new Cc,this.vV=void 0,this.kG=!1,this.dV=void 0,this.qQ=Fn.Nz,this.IG=!0,this.LTi=void 0,this.jTi=()=>{var t,i,e,s;(null==(t=this.OTi)?void 0:t.playState)&&((null==(i=this.LTi)?void 0:i.rM)||2!==this.OTi.playState||this.xTi().catch(ya),3===this.OTi.playState&&(null==(s=this.LTi)||null==(e=s.sM)||e.call(s,String(this.OTi.playState)),this.LTi=void 0))},this.E$=new zit(this),this.E$.yn(jr,this.Ds),this.C7=new YE([this.Ul]),this.j7=new xr(this),this.ast=new Xn,this.ust=new Qn(this.ast.we,this.Uu,this.nt,this.Ll,this.wa,this.LV),this.OTi=this.CTi(),this.xTi().catch(ya)}},Qit=class extends Uit{get gV(){}get ht(){return this.Oz}get rt(){return this.Pz}get $E(){return this.jG}set $E(t){this.jG=t,this.KE||this.RTi.play(t)}get WE(){return this.RTi.muted}set WE(t){this.RTi.muted=t}get Nk(){var t,i;return(null!=(i=null!=(t=this.RTi.volume)?t:null==this.RTi.getVolume?void 0:this.RTi.getVolume.call(this.RTi))?i:100)/100}set Nk(t){null==this.RTi.setVolume||this.RTi.setVolume.call(this.RTi,100*t)}get xE(){return this.RTi.playPosition?this.RTi.playPosition/1e3:0}get ct(){return!this.RTi.playTime||this.RTi.playTime<0?1/0:this.RTi.playTime/1e3}get OE(){return this.RTi.playState===Ph.gTi}get Ti(){return this.RTi.offsetHeight*Fe.Ys.bp}get ji(){return this.RTi.offsetWidth*Fe.Ys.bp}get KE(){return this.RTi.playState===Ph.iW}get rk(){return Mo.PP()}get fk(){return this.H5}get yk(){return 0}get Tk(){return 0}Rtt(t){super.Rtt(t),t.appendChild(this.RTi)}async $n(t){if(t.YA===uh.QQ){const i=await super.$n(t);return await this.kTi(t),this.RTi.onPlayStateChange=this.PTi,i}throw new b("Unsupported media source configuration for HbbTV")}async kTi(t){this.RTi.type=Mu(t.$x),this.RTi.data=t.$x,await super.kTi(t)}async Pk(){await super.Pk(),this.RTi.play(this.jG),this.yo(new fi(this.xE))}Rk(){this.RTi.play(0),this.yo(new Zr(this.xE))}Wb(t,i,e){this.RTi.seek(1e3*t),this.kG=!0,this.yo(new Yr(this.xE))}async tr(){void 0!==this.vV&&this.RTi.stop(),this.zTi&&(Fe.fA(this.zTi),this.zTi=void 0),await super.tr(),qn(this.RTi),this.RTi.data&&this.RTi.removeAttribute("data"),this.Oz.tr(),this.Pz.tr()}async wy(){await super.wy(),dn(this.RTi)}ge(){super.ge(),this.RTi.style.display="block"}be(){super.be(),this.RTi.style.display="none"}_Ti(t){const i=this.BTi(t);if(!i)throw new b("Selected track does not exist on HbbTV");null==this.RTi.selectComponent||this.RTi.selectComponent.call(this.RTi,i)}vTi(t){const i=this.BTi(t);if(!i)throw new b("Selected track does not exist on HbbTV");null==this.RTi.unselectComponent||this.RTi.unselectComponent.call(this.RTi,i)}BTi(t){var i;const e=null!=(i=null==this.RTi.getComponents?void 0:this.RTi.getComponents.call(this.RTi,t.type))?i:this.UTi();return this.QTi(e,t)}FTi(t){var i;const e=null!=(i=null==this.RTi.getCurrentActiveComponents?void 0:this.RTi.getCurrentActiveComponents.call(this.RTi,1))?i:this.UTi();this.Oz.tr();for(let i=0;i<t.length;i++){const s=t.item(i);this.Oz.tt(new jit(s,s.language,this.Oz.V?Rr.ZLt:Rr.HLt,this,this.YTi(e,s)))}}VTi(t){var i;const e=null!=(i=null==this.RTi.getCurrentActiveComponents?void 0:this.RTi.getCurrentActiveComponents.call(this.RTi,0))?i:this.UTi();this.Pz.tr();for(let i=0;i<t.length;i++){const s=t.item(i);this.Pz.tt(new jit(s,String(s.aspectRatio),this.Pz.V?Dr.ZLt:Dr.HLt,this,this.YTi(e,s)))}}UTi(){return{length:0,item:t=>{}}}YTi(t,i){return void 0!==this.QTi(t,i)}QTi(t,i){for(let e=0;e<t.length;e++){const s=t.item(e);if(this.GTi(s,i))return s}}GTi(t,i){return t.pid===i.pid&&t.componentTag===i.componentTag&&t.type===i.type&&t.encoding===i.encoding&&t.encrypted===i.encrypted}WTi(t){switch(t){case 0:return lt.SRC_NOT_SUPPORTED;case 1:case 5:case 6:return lt.NETWORK;default:return lt.DECODE}}constructor(t,i,e){super(i,e),this.RTi=t,this.jG=1,this.Oz=new pe,this.Pz=new pe,this.H5=Fn.Nz,this.ZTi=void 0,this.zTi=void 0,this.PTi=()=>{if(!this.RTi.playState)return;this.qQ=this.H5,this.HTi=this.XTi,this.XTi=this.RTi.playState;const t=this.ct;switch(t!==this.ZTi&&(this.yo(new Hs(t)),this.ZTi=t),this.zTi&&this.XTi!==Ph.oP&&(Fe.fA(this.zTi),this.zTi=void 0),this.XTi){case Ph.dTi:this.H5=Fn.Nz;break;case Ph.fTi:if(this.HTi===Ph.dTi){var i;const t=null!=(i=null==this.RTi.getComponents?void 0:this.RTi.getComponents.call(this.RTi,1))?i:this.UTi();var e;const s=null!=(e=null==this.RTi.getComponents?void 0:this.RTi.getComponents.call(this.RTi,0))?e:this.UTi();if(0===t.length&&0===s.length)break;this.FTi(t),this.VTi(s)}this.H5=Fn.Xn;break;case Ph.oP:this.kG&&(this.kG=!1,this.yo(new aa(this.xE))),this.yo(new te(this.xE)),this.H5=Fn.Dz,this.zTi=Fe.dA(this.qTi,250);break;case Ph.ua:this.H5=Fn.Nz,this.yo(new qj(new RS(this.WTi(this.RTi.error))));break;case Ph.gTi:this.yo(new fa(this.xE));case Ph.iW:case Ph.lTi:}this.H5!==this.qQ&&this.yo(new Yu(this.xE,this.H5))},this.qTi=()=>{this.yo(new A(this.xE,void 0))}}};r(),Qi();var Fit=class extends Uit{get gV(){return this.vN}get ht(){return this.Oz}get rt(){return this.Pz}get $E(){return this.vN.playbackRate}set $E(t){this.vN.playbackRate=t}get WE(){return this.vN.muted}set WE(t){this.vN.muted=t}get Nk(){return this.vN.volume}set Nk(t){this.vN.volume=t}get xE(){return this.vN.currentTime}get ct(){return this.vN.duration}get OE(){return this.vN.ended}get Ti(){return this.vN.offsetHeight*Fe.Ys.bp}get ji(){return this.vN.offsetWidth*Fe.Ys.bp}get KE(){return this.vN.paused}get rk(){return Mo.xn(this.vN.played)}get fk(){return this.H8.fk}get yk(){return this.vN.videoHeight}get Tk(){return this.vN.videoWidth}Rtt(t){super.Rtt(t),t.appendChild(this.vN)}async $n(t){if(t.YA===uh.QQ){const i=await super.$n(t);return await this.kTi(t),i}throw new b("Unsupported media source configuration for HbbTV")}async kTi(t){switch(t.MV){case BM.nL:case BM.rL:this.vN.setAttribute("crossorigin",t.MV);break;case BM.EI:default:this.vN.removeAttribute("crossorigin")}void 0!==t.ck?this.vN.preload=t.ck:this.vN.preload=Nr.QY,void 0!==t.TV?this.vN.title=t.TV:Wd(this.vN);const i=this.$E;this.vN.src=t.$x,this.$E=i,await super.kTi(t)}async Pk(){await super.Pk(),await this.vN.play()}Rk(){this.vN.pause()}Wb(t,i,e){i&&this.vN.fastSeek?this.vN.fastSeek(t):this.vN.currentTime=t,this.kG=!0,this.yo(new Yr(this.xE))}async tr(){await super.tr(),qn(this.vN),this.vN.src&&this.vN.removeAttribute("src"),this.Oz.tr(),this.Pz.tr()}async wy(){await super.wy(),this.l7.wy(),this.H8.wy(),this.htt(),this.PV(),dn(this.vN)}ge(){super.ge(),this.vN.style.display="block",this.vN.style.height="100%",this.vN.style.width="100%"}be(){super.be(),this.vN.style.display="none"}stt(){this.gV.addEventListener("play",this.sF),this.gV.addEventListener("pause",this.nF),this.gV.addEventListener("timeupdate",this.xc),this.gV.addEventListener("progress",this.KTi),this.gV.addEventListener("loadstart",this.Ts),this.gV.addEventListener("ended",this.Cc),this.gV.addEventListener("ratechange",this.JTi),this.gV.addEventListener("volumechange",this.bHt),this.gV.addEventListener("durationchange",this.mHt),this.gV.addEventListener("loadedmetadata",this.$Ti),this.gV.addEventListener("emptied",this.tSi),this.gV.addEventListener("seeked",this.iSi),this.gV.addEventListener("seeking",this.eSi),this.gV.addEventListener("error",this.sSi),Fv()&&this.gV.addEventListener("encrypted",this.x8)}htt(){this.gV.removeEventListener("play",this.sF),this.gV.removeEventListener("pause",this.nF),this.gV.removeEventListener("timeupdate",this.xc),this.gV.removeEventListener("progress",this.KTi),this.gV.removeEventListener("loadstart",this.Ts),this.gV.removeEventListener("ended",this.Cc),this.gV.removeEventListener("ratechange",this.JTi),this.gV.removeEventListener("volumechange",this.bHt),this.gV.removeEventListener("durationchange",this.mHt),this.gV.removeEventListener("loadedmetadata",this.$Ti),this.gV.removeEventListener("emptied",this.tSi),this.gV.removeEventListener("seeked",this.iSi),this.gV.removeEventListener("seeking",this.eSi),this.gV.removeEventListener("error",this.sSi),this.gV.removeEventListener("encrypted",this.x8)}eG(t){this.dV=t,this.yo(new qj(this.dV))}XV(){const t=this.vN.audioTracks,i=this.vN.videoTracks;t&&(t.addEventListener("addtrack",this.nSi),t.addEventListener("removetrack",this.rSi),t.addEventListener("change",this.oSi)),i&&(i.addEventListener("addtrack",this.hSi),i.addEventListener("removetrack",this.aSi),i.addEventListener("change",this.uSi))}PV(){const t=this.vN.audioTracks,i=this.vN.videoTracks;t&&(t.removeEventListener("addtrack",this.nSi),t.removeEventListener("removetrack",this.rSi),t.removeEventListener("change",this.oSi)),i&&(i.removeEventListener("addtrack",this.hSi),i.removeEventListener("removetrack",this.aSi),i.removeEventListener("change",this.uSi))}nh(t){for(let i=0;i<t.V;i++){t.Ex(i).rB()}}constructor(t,i,e){super(i,e),this.vN=t,this.Oz=new pe,this.Pz=new pe,this.cSi=void 0,this.sF=()=>{this.yo(new fi(this.xE))},this.nF=()=>{this.yo(new Zr(this.xE))},this.xc=()=>{const t=this.xE,i=this.wk,e=void 0!==this.cSi,s=e&&this.cSi!==t;(i||!e||s)&&(this.yo(new A(t,void 0)),this.cSi=t)},this.KTi=()=>{this.yo(new ii(this.xE))},this.Ts=()=>{this.yo(new Gi)},this.Cc=()=>{this.yo(new fa(this.xE))},this.JTi=()=>{this.yo(new cu(this.xE,this.$E))},this.bHt=()=>{this.yo(new $e(this.xE,this.Nk))},this.mHt=()=>{this.yo(new Hs(this.ct))},this.$Ti=()=>{},this.tSi=()=>{},this.iSi=()=>{this.kG&&(this.kG=!1),this.yo(new aa(this.xE))},this.eSi=()=>{this.yo(new Yr(this.xE))},this.rF=t=>{this.qQ!==t.readyState&&(this.qQ=t.readyState,this.yo(t))},this.eF=()=>{this.yo(new te(this.xE))},this.sSi=()=>{if(null!==this.vN.error){const i=this.vN.error;var t;this.eG(new RS(null!=(t=i.code)?t:lt.DECODE,i.message||"Error decoding media",void 0,i.msExtendedCode))}},this.x8=t=>{this.yo(new Mw(t.initDataType,t.initData||new ArrayBuffer(0)))},this.hSi=t=>{const i=this.vN.videoTracks;if(i)for(let t=0;t<i.length;t++){const e=i[t];qE(this.Pz,e)||this.Pz.tt(new qS(e))}},this.aSi=t=>{const i=[],e=this.vN.videoTracks;if(e){for(const t of this.Pz.Ix)KE(e,t.sB)||i.push(t);for(const t of i)this.Pz.it(t)}},this.uSi=t=>{this.nh(this.Pz)},this.nSi=t=>{const i=this.vN.audioTracks;if(i)for(let t=0;t<i.length;t++){const e=i[t];qE(this.Oz,e)||this.Oz.tt(new HS(e))}},this.rSi=t=>{const i=[],e=this.vN.audioTracks;if(e){for(const t of this.Oz.Ix)KE(e,t.sB)||i.push(t);for(const t of i)this.Oz.it(t)}},this.oSi=t=>{this.nh(this.Oz)},this.H8=new ER(this),this.H8.yn(E.wx,this.rF),this.H8.C8(new Gj(this)),this.l7=new Xj(this),this.l7.yn(E.oP,this.eF),this.stt(),this.XV()}},Yit=[Zi.so,Zi.wb,E.oP,Zi.Mb,Zi.bb,Zi.qy,Zi.Zy,Zi.Vy,Zi.Yy,Zi.Eb,Zi.mb,Zi.ub,Zi.pb,Zi.kb,Zi.yb,Zi.$y,Zi.Ky],Vit=class extends tu{get ht(){return this.cz.ht}get TE(){return this.cz.TE.ks()}get Az(){}get NE(){return this.cz.NE}set NE(t){t&&this.cz.cV(t)}get bt(){return this.wc}get xE(){return this.cz.xE}set xE(t){this.cz.Wb(t)}get pV(){return this.AV}get ct(){return this.cz.ct}get OE(){return this.cz.OE}get zE(){return this.fV}get lt(){return this.dV}get UE(){}get FE(){return!1}get Lk(){return this.cz.Lk}set Lk(t){this.cz.Lk=t}get Ek(){return this.QG}get VE(){return Ei({},{Bz:0,Uz:0,Qz:0,Fz:0,Yz:0,Vz:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}},this.cz.GE())}get WE(){return this.cz.WE}set WE(t){this.cz.WE=t}get XE(){return!0}get KE(){return this.cz.KE}get $E(){return this.cz.$E}set $E(t){this.cz.$E=t}get rk(){return this.cz.rk.ks()}get ck(){return this._V}set ck(t){this._V=t,this.vV&&(this.vV.ck=t)}get fk(){return this.cz.fk}get _k(){return this.cz._k.ks()}get wk(){return this.cz.wk}get wV(){return this.cz.wV}get nt(){return this.Ul}get yk(){return this.cz.yk}get rt(){return this.cz.rt}get Tk(){return this.cz.Tk}get Nk(){return this.cz.Nk}set Nk(t){this.cz.Nk=t}Wk(t){return this.cz.CV(t)}Bk(){return!1}Ck(){return this.cz.wa}jk(){}be(){this.cz.be()}Fk(){this.cz.Fk()}Rk(){this.cz.Rk()}async Pk(){await this.cz.Pk()}Yk(){throw new b("Recreate media source is not supported on HbbTV")}CE(t,i){this.cz.Wb(t)}async ka(t,i,e){var s;yi(e),this.wc=t;const n={YA:uh.QQ,$x:t.src,VN:t.type,yV:this.bV(t),ck:this._V,MV:t.crossOrigin,TV:null==(s=i.metadata)?void 0:s.title};this.vV=await this.cz.$n(n),i.textTracks&&this.NV(i.textTracks),oD(this.nt)}ge(){this.cz.ge()}Uk(){}Qk(){}_a(){return this.cz.LV}async tr(){this.wc=void 0,this.dV=void 0,this.fV=void 0,this.vV=void 0,await this.xV.tr(),this.cz.jV(),await this.cz.tr()}async gn(){await this.tr(),this.OV.gn(),this.cz.fn(Yit,this.Ds),this.cz.fn(Me.ua,this.GV),await this.cz.wy(),this.vn.gn(),this.Ul.gn(),await this.xV.gn()}eG(t,i){this.dV||(this.dV=i,this.fV=t,this.yo(new Uc(t)))}NV(t){for(const i of t)void 0!==i.src&&this.xV.LQ(i)}bV(t){if(!t.contentProtection)return[];const i=[];return t.contentProtection.widevine&&i.push({NS:Iv,qY:t.contentProtection.widevine.licenseAcquisitionURL,HV:[]}),t.contentProtection.playready&&i.push({NS:Ga,qY:t.contentProtection.playready.licenseAcquisitionURL,HV:[]}),this.lSi(i,t.contentProtection.preferredKeySystems)}lSi(t,i){if(void 0===i||0===i.length)return t;const e=t=>{const e=i.indexOf(t.NS.ZA);return e>=0?e:i.length};return zs(t,((t,i)=>e(t)-e(i)))}constructor(t,i,e,s){super(),this.vV=void 0,this.AV=new wr,this.wc=void 0,this.dV=void 0,this.fV=void 0,this._V=Nr.pG,this.GV=t=>{const i=t.lt,e=i.code,s=new qi(BS(e),"Something went wrong during HbbTV playback.",i),n=la(s);this.eG(s,n)},this.vn=new aL(t),this.vn.bn(),this.cz=$d()?new Fit(h.createElement(Ri.NI),this.vn,s):new Qit(h.createElement("object"),this.vn,s),this.cz.Rtt(t),this.cz.yn(Yit,this.Ds),this.cz.yn(Me.ua,this.GV),this.OV=new uo(this.cz,!0),this.OV.yn(QT,this.Ds),this.xV=new dr(this.cz,i),this.Ul=new YE([this.cz.nt,this.xV.Z]),this.QG=e}};il();ko(new class{bL(t,i,e,s,n,r,o,h){return new Vit(t,e,r,o)}nG(t,i){var e;return!(!Ro.Lf||t.type!==Oe.uL&&!rS(t.type)&&!or(t.type))&&!($d()&&!(null==(e=t.contentProtection)?void 0:e.useOipfDrmAgent)&&(!t.contentProtection||Fv()))}async rG(t){return!!await mu(t,!0)}oG(){return!1}constructor(){this.hG=pt.LY}});export{Bo as a,f as b,r as c,Ro as d,il as e,$t as f,Dn as g,_o as h,Ic as i,dn as j,Rd as k,Bd as l,Ea as m,Ud as n,Qd as o,pn as p,Wd as q,Zd as r,Fe as s,Qi as t,ya as u,Yh as v,ds as w,ur as x,Bf as y,Uf as z,sv as A,Ei as B,_t as C,Bv as D,zs as E,$n as F,To as G,dl as H,ra as I,Qa as J,nt as K,yi as L,V as M,tu as N,Jr as O,Zi as P,vt as Q,xd as R,_M as S,fe as T,ns as U,vM as V,pu as W,pM as X,zS as Y,Ma as Z,Io as _,lc as $,z as aa,QI as ba,YI as ca,Fn as da,Ai as ea,F as fa,Fz as ga,Gz as ha,Mo as ia,cS as ja,Js as ka,Hs as la,Ba as ma,TS as na,DS as oa,$s as pa,Dt as qa,Vk as ra,Zu as sa,Th as ta,Kx as ua,nL as va,aL as wa,uL as xa,cL as ya,dL as za,vL as Aa,wL as Ba,mL as Ca,yL as Da,Gi as Ea,tP as Fa,iP as Ga,eP as Ha,nP as Ia,rP as Ja,oP as Ka,CP as La,jP as Ma,OP as Na,RP as Oa,Vu as Pa,Rz as Qa,Pz as Ra,Hz as Sa,TB as Ta,SB as Ua,NB as Va,IB as Wa,xB as Xa,LB as Ya,CB as Za,jB as _a,$Q as $a,tF as ab,ah as bb,K1 as cb,h2 as db,y2 as eb,jn as fb,k9 as gb,y8 as hb,N8 as ib,Ntt as jb};