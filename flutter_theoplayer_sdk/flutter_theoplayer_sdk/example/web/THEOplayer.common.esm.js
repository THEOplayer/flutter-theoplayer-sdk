/*!
 THEOplayer

 Usage of this software is limited by the THEOplayer License.

 It is prohibited to reverse engineer, decompile, translate,
 disassemble, decipher, decrypt, or otherwise attempt to
 discover the source code of this software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 OTHER DEALINGS IN THE SOFTWARE.

 For more information, visit https://www.theoplayer.com or contact
 contact @ theoplayer . com

 This product makes use of Open Source Software: video.js
 (Apache 2.0 - Copyright Brightcove, Inc.), long.js (Apache 2.0),
 nodejs-langs (MIT - Copyright Andrew Lawson), promise-polyfill
 (MIT - Copyright (c) 2014 Taylor Hakes & Forbes Lindesay),
 shaka-player (Apache 2.0 - Copyright 2016 Google LLC)
 The code of these projects has been heavily modified during
 integration.
 More information on the licenses can be found here: Apache 2.0
 (http://www.apache.org/licenses/LICENSE-2.0), MIT
 (https://opensource.org/licenses/MIT)


 THEOplayer is based on patented technology developed by
 THEO Technologies (https://www.theoplayer.com).

 Version: 9.3.1
 Created: 2025-05-12T14:40:54.701Z
 */
var Po,f,Et,El,Mt,Rl,Il,Pl,y,Dl,a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:void 0!==s?s:"undefined"!=typeof global?global:this,s=a.window,h=a.document,Nl=a.location,Ll=a.navigator,u=a.setTimeout,v=a.clearTimeout,p=a.setInterval,m=a.clearInterval,g=a.Error,b=a.TypeError,w=(a.SyntaxError,a.Object),_=a.Math,x=a.parseInt,C=a.parseFloat,S=a.isNaN,j=a.Uint8Array,Bl=a.Worker,Ol=(a.WorkerGlobalScope,a.XMLHttpRequest),Fl=w.create,Vl=w.defineProperty,Wl=w.getOwnPropertyDescriptor,Ul=w.getOwnPropertyNames,Gl=w.getPrototypeOf,Hl=w.prototype.hasOwnProperty,lr=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Zl=(t,e,i)=>(i=null!=t?Fl(Gl(t)):{},((t,e,i,s)=>{if(e&&"object"==typeof e||"function"==typeof e)for(let n of Ul(e))Hl.call(t,n)||n===i||Vl(t,n,{get:()=>e[n],enumerable:!(s=Wl(e,n))||s.enumerable});return t})(!e&&t&&t.__esModule?i:Vl(i,"default",{value:t,enumerable:!0}),t)),r=(y=()=>{"use strict";if("function"==typeof Symbol&&Symbol.iterator)Po=Symbol,f=null!=(Rl=Symbol.for)?Rl:Symbol,Et=Symbol.iterator,El=null!=(Il=Symbol.dispose)?Il:f("Symbol.dispose"),Mt=null!=(Pl=Symbol.asyncDispose)?Pl:f("Symbol.asyncDispose");else{let t=0;Po=function(e){return"ul"+e+"_"+ ++t},Et=(f=function(t){return"ul"+t})("Symbol.iterator"),El=f("Symbol.dispose"),Mt=f("Symbol.asyncDispose"),Po.for=f,Po.iterator=Et,Po.dispose=El,Po.asyncDispose=Mt}},()=>(y&&(Dl=y(y=0)),Dl)),Xl=lr(((t,e)=>{r(),function(i,s){"object"==typeof t&&void 0!==e?s(t):"function"==typeof define&&define.amd?define(["exports"],s):s((i=i||self).WebStreamsPolyfill={})}(t,(function(t){"use strict";var e="function"==typeof Po&&"symbol"==typeof Et?Po:function(t){return"Symbol("+t+")"};function i(){}var s=Number.isNaN||function(t){return t!=t},n=i;function r(t){return"object"==typeof t&&null!==t||"function"==typeof t}function o(t){return t.slice()}function h(t,e,i,s,n){new j(t).set(new j(i,s,n),e)}function a(t){return!1!==function(t){if("number"!=typeof t)return!1;if(s(t))return!1;if(t<0)return!1;return!0}(t)&&t!==1/0}function u(t,e,i){if("function"!=typeof t)throw new b("Argument is not a function");return Function.prototype.apply.call(t,e,i)}function c(t,e,i,s){var n=t[e];if(void 0!==n){if("function"!=typeof n)throw new b(n+" is not a method");switch(i){case 0:return function(){return d(n,t,s)};case 1:return function(e){var i=[e].concat(s);return d(n,t,i)}}}return function(){return T(void 0)}}function l(t,e,i){var s=t[e];if(void 0!==s)return u(s,t,i)}function d(t,e,i){try{return T(u(t,e,i))}catch(t){return k(t)}}function f(t){if(t=Number(t),s(t)||t<0)throw new RangeError("highWaterMark property of a queuing strategy must be non-negative and non-NaN");return t}function v(t){if(void 0===t)return function(){return 1};if("function"!=typeof t)throw new b("size property of a queuing strategy must be a function");return function(e){return t(e)}}var m=Promise,p=Promise.prototype.then,y=Promise.resolve.bind(m),A=Promise.reject.bind(m);function S(t){return new m(t)}function T(t){return y(t)}function k(t){return A(t)}function E(t,e,i){return p.call(t,e,i)}function x(t,e,i){E(E(t,e,i),void 0,n)}function R(t,e){x(t,e)}function I(t,e){x(t,void 0,e)}function C(t,e,i){return E(t,e,i)}function P(t){E(t,void 0,n)}var D=function(){function t(){this.hd=0,this.Ed=0,this.Rd={Id:[],Dd:void 0},this.Nd=this.Rd,this.hd=0,this.Ed=0}return w.defineProperty(t.prototype,"length",{get:function(){return this.Ed},enumerable:!0,configurable:!0}),t.prototype.push=function(t){var e=this.Nd,i=e;16383===e.Id.length&&(i={Id:[],Dd:void 0}),e.Id.push(t),i!==e&&(this.Nd=i,e.Dd=i),++this.Ed},t.prototype.shift=function(){var t=this.Rd,e=t,i=this.hd,s=i+1,n=t.Id,r=n[i];return 16384===s&&(e=t.Dd,s=0),--this.Ed,this.hd=s,t!==e&&(this.Rd=e),n[i]=void 0,r},t.prototype.forEach=function(t){for(var e=this.hd,i=this.Rd,s=i.Id;!(e===s.length&&void 0===i.Dd||e===s.length&&(e=0,0===(s=(i=i.Dd).Id).length));)t(s[e]),++e},t.prototype.peek=function(){var t=this.Rd,e=this.hd;return t.Id[e]},t}();function N(t,e,i){var s=null;!0===i&&(s=w.prototype);var n=w.create(s);return n.value=t,n.done=e,n}function M(t,e){t.Ld=!0,t.Bd=e,e.Od=t,"readable"===e.Fa?F(t):"closed"===e.Fa?function(t){F(t),U(t)}(t):V(t,e.Fd)}function L(t,e){return qe(t.Bd,e)}function B(t){"readable"===t.Bd.Fa?W(t,new b("Reader was released and can no longer be used to monitor the stream's closedness")):function(t,e){V(t,e)}(t,new b("Reader was released and can no longer be used to monitor the stream's closedness")),t.Bd.Od=void 0,t.Bd=void 0}function O(t){return new b("Cannot "+t+" a stream using a released reader")}function F(t){t.Vd=S((function(e,i){t.Wd=e,t.Ud=i}))}function V(t,e){F(t),W(t,e)}function W(t,e){P(t.Vd),t.Ud(e),t.Wd=void 0,t.Ud=void 0}function U(t){t.Wd(void 0),t.Wd=void 0,t.Ud=void 0}var G=e("[[CancelSteps]]"),H=e("[[PullSteps]]");function Z(t,e){void 0===e&&(e=!1);var i=new J(t);return i.Ld=e,i}function X(t){return S((function(e,i){var s={Gd:e,Hd:i};t.Od.Zd.push(s)}))}function z(t,e,i){var s=t.Od;s.Zd.shift().Gd(N(e,i,s.Ld))}function q(t){return t.Od.Zd.length}function Y(t){var e=t.Od;return void 0!==e&&!!$(e)}var K,Q,J=function(){function t(t){if(!1===Xe(t))throw new b("ReadableStreamDefaultReader can only be constructed with a ReadableStream instance");if(!0===ze(t))throw new b("This stream has already been locked for exclusive reading by another reader");M(this,t),this.Zd=new D}return w.defineProperty(t.prototype,"closed",{get:function(){return $(this)?this.Vd:k(et("closed"))},enumerable:!0,configurable:!0}),t.prototype.cancel=function(t){return $(this)?void 0===this.Bd?k(O("cancel")):L(this,t):k(et("cancel"))},t.prototype.read=function(){return $(this)?void 0===this.Bd?k(O("read from")):tt(this):k(et("read"))},t.prototype.releaseLock=function(){if(!$(this))throw et("releaseLock");if(void 0!==this.Bd){if(this.Zd.length>0)throw new b("Tried to release a reader lock when that reader has pending read() calls un-settled");B(this)}},t}();function $(t){return!!r(t)&&!!w.prototype.hasOwnProperty.call(t,"Zd")}function tt(t){var e=t.Bd;return e.Xd=!0,"closed"===e.Fa?T(N(void 0,!0,t.Ld)):"errored"===e.Fa?k(e.Fd):e.zd[H]()}function et(t){return new b("ReadableStreamDefaultReader.prototype."+t+" can only be used on a ReadableStreamDefaultReader")}"symbol"==typeof e.asyncIterator&&((K={})[e.asyncIterator]=function(){return this},Q=K,w.defineProperty(Q,e.asyncIterator,{enumerable:!1}));var it={next:function(){if(!1===st(this))return k(nt("next"));var t=this.qd;return void 0===t.Bd?k(O("iterate")):C(tt(t),(function(e){var i=e.done;return i&&B(t),N(e.value,i,!0)}))},return:function(t){if(!1===st(this))return k(nt("next"));var e=this.qd;if(void 0===e.Bd)return k(O("finish iterating"));if(e.Zd.length>0)return k(new b("Tried to release a reader lock when that reader has pending read() calls un-settled"));if(!1===this.Yd){var i=L(e,t);return B(e),C(i,(function(){return N(t,!0,!0)}))}return B(e),T(N(t,!0,!0))}};function st(t){return!!r(t)&&!!w.prototype.hasOwnProperty.call(t,"qd")}function nt(t){return new b("ReadableStreamAsyncIterator."+t+" can only be used on a ReadableSteamAsyncIterator")}function rt(t){var e=t.Kd.shift();return t.Qd-=e.size,t.Qd<0&&(t.Qd=0),e.value}function ot(t,e,i){if(!a(i=Number(i)))throw new RangeError("Size must be a finite, non-NaN, non-negative number.");t.Kd.push({value:e,size:i}),t.Qd+=i}function ht(t){t.Kd=new D,t.Qd=0}void 0!==Q&&w.setPrototypeOf(it,Q),w.defineProperty(it,"next",{enumerable:!1}),w.defineProperty(it,"return",{enumerable:!1});var at=e("[[AbortSteps]]"),ut=e("[[ErrorSteps]]"),ct=function(){function t(t,e){void 0===t&&(t={}),void 0===e&&(e={}),dt(this);var i=e.size,s=e.highWaterMark;if(void 0!==t.type)throw new RangeError("Invalid type is specified");var n=v(i);void 0===s&&(s=1),function(t,e,i,s){var n=w.create(Pt.prototype);function r(){return l(e,"start",[n])}var o=c(e,"write",1,[n]),h=c(e,"close",0,[]),a=c(e,"abort",1,[]);Dt(t,n,r,o,h,a,i,s)}(this,t,s=f(s),n)}return w.defineProperty(t.prototype,"locked",{get:function(){if(!1===ft(this))throw Vt("locked");return _t(this)},enumerable:!0,configurable:!0}),t.prototype.abort=function(t){return!1===ft(this)?k(Vt("abort")):!0===_t(this)?k(new b("Cannot abort a stream that already has a writer")):vt(this,t)},t.prototype.close=function(){return!1===ft(this)?k(Vt("close")):!0===_t(this)?k(new b("Cannot close a stream that already has a writer")):!0===yt(this)?k(new b("Cannot close an already-closing stream")):mt(this)},t.prototype.getWriter=function(){if(!1===ft(this))throw Vt("getWriter");return lt(this)},t}();function lt(t){return new St(t)}function dt(t){t.Fa="writable",t.Fd=void 0,t.Jd=void 0,t.$d=void 0,t.tf=new D,t.ef=void 0,t.nf=void 0,t.rf=void 0,t.hf=void 0,t.uf=!1}function ft(t){return!!r(t)&&!!w.prototype.hasOwnProperty.call(t,"$d")}function _t(t){return void 0!==t.Jd}function vt(t,e){var i=t.Fa;if("closed"===i||"errored"===i)return T(void 0);if(void 0!==t.hf)return t.hf.cf;var s=!1;"erroring"===i&&(s=!0,e=void 0);var n=S((function(i,n){t.hf={cf:void 0,Gd:i,Hd:n,lf:e,df:s}}));return t.hf.cf=n,!1===s&&pt(t,e),n}function mt(t){var e=t.Fa;if("closed"===e||"errored"===e)return k(new b("The stream (in "+e+" state) is not in the writable state and cannot be closed"));var i=S((function(e,i){var s={Gd:e,Hd:i};t.nf=s})),s=t.Jd;return void 0!==s&&!0===t.uf&&"writable"===e&&jt(s),function(t){ot(t,"close",0),Lt(t)}(t.$d),i}function gt(t,e){"writable"!==t.Fa?wt(t):pt(t,e)}function pt(t,e){var i=t.$d;t.Fa="erroring",t.Fd=e;var s=t.Jd;void 0!==s&&Rt(s,e),!1===function(t){if(void 0===t.ef&&void 0===t.rf)return!1;return!0}(t)&&!0===i._f&&wt(t)}function wt(t){t.Fa="errored",t.$d[ut]();var e=t.Fd;if(t.tf.forEach((function(t){t.Hd(e)})),t.tf=new D,void 0!==t.hf){var i=t.hf;if(t.hf=void 0,!0===i.df)return i.Hd(e),void bt(t);x(t.$d[at](i.lf),(function(){i.Gd(),bt(t)}),(function(e){i.Hd(e),bt(t)}))}else bt(t)}function yt(t){return void 0!==t.nf||void 0!==t.rf}function bt(t){void 0!==t.nf&&(t.nf.Hd(t.Fd),t.nf=void 0);var e=t.Jd;void 0!==e&&Zt(e,t.Fd)}function At(t,e){var i=t.Jd;void 0!==i&&e!==t.uf&&(!0===e?function(t){zt(t)}(i):jt(i)),t.uf=e}var St=function(){function t(t){if(!1===ft(t))throw new b("WritableStreamDefaultWriter can only be constructed with a WritableStream instance");if(!0===_t(t))throw new b("This stream has already been locked for exclusive writing by another writer");this.vf=t,t.Jd=this;var e=t.Fa;if("writable"===e)!1===yt(t)&&!0===t.uf?zt(this):Yt(this),Gt(this);else if("erroring"===e)qt(this,t.Fd),Gt(this);else if("closed"===e)Yt(this),function(t){Gt(t),Xt(t)}(this);else{var i=t.Fd;qt(this,i),Ht(this,i)}}return w.defineProperty(t.prototype,"closed",{get:function(){return!1===Tt(this)?k(Wt("closed")):this.Vd},enumerable:!0,configurable:!0}),w.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===Tt(this))throw Wt("desiredSize");if(void 0===this.vf)throw Ut("desiredSize");return function(t){var e=t.vf,i=e.Fa;if("errored"===i||"erroring"===i)return null;if("closed"===i)return 0;return Mt(e.$d)}(this)},enumerable:!0,configurable:!0}),w.defineProperty(t.prototype,"ready",{get:function(){return!1===Tt(this)?k(Wt("ready")):this.mf},enumerable:!0,configurable:!0}),t.prototype.abort=function(t){return!1===Tt(this)?k(Wt("abort")):void 0===this.vf?k(Ut("abort")):function(t,e){var i=t.vf;return vt(i,e)}(this,t)},t.prototype.close=function(){if(!1===Tt(this))return k(Wt("close"));var t=this.vf;return void 0===t?k(Ut("close")):!0===yt(t)?k(new b("Cannot close an already-closing stream")):kt(this)},t.prototype.releaseLock=function(){if(!1===Tt(this))throw Wt("releaseLock");void 0!==this.vf&&It(this)},t.prototype.write=function(t){return!1===Tt(this)?k(Wt("write")):void 0===this.vf?k(Ut("write to")):Ct(this,t)},t}();function Tt(t){return!!r(t)&&!!w.prototype.hasOwnProperty.call(t,"vf")}function kt(t){return mt(t.vf)}function xt(t,e){"pending"===t.gf?Zt(t,e):function(t,e){Ht(t,e)}(t,e)}function Rt(t,e){"pending"===t.pf?Kt(t,e):function(t,e){qt(t,e)}(t,e)}function It(t){var e=t.vf,i=new b("Writer was released and can no longer be used to monitor the stream's closedness");Rt(t,i),xt(t,i),e.Jd=void 0,t.vf=void 0}function Ct(t,e){var i=t.vf,s=i.$d,n=function(t,e){try{return t.wf(e)}catch(e){return Bt(t,e),1}}(s,e);if(i!==t.vf)return k(Ut("write to"));var r=i.Fa;if("errored"===r)return k(i.Fd);if(!0===yt(i)||"closed"===r)return k(new b("The stream is closing or closed and cannot be written to"));if("erroring"===r)return k(i.Fd);var o=function(t){return S((function(e,i){var s={Gd:e,Hd:i};t.tf.push(s)}))}(i);return function(t,e,i){var s={chunk:e};try{ot(t,s,i)}catch(e){return void Bt(t,e)}var n=t.yf;if(!1===yt(n)&&"writable"===n.Fa){At(n,Ot(t))}Lt(t)}(s,e,n),o}var Pt=function(){function t(){throw new b("WritableStreamDefaultController cannot be constructed explicitly")}return t.prototype.error=function(t){if(!1===function(t){if(!r(t))return!1;if(!w.prototype.hasOwnProperty.call(t,"yf"))return!1;return!0}(this))throw new b("WritableStreamDefaultController.prototype.error can only be used on a WritableStreamDefaultController");"writable"===this.yf.Fa&&Ft(this,t)},t.prototype[at]=function(t){var e=this.bf(t);return Nt(this),e},t.prototype[ut]=function(){ht(this)},t}();function Dt(t,e,i,s,n,r,o,h){e.yf=t,t.$d=e,e.Kd=void 0,e.Qd=void 0,ht(e),e._f=!1,e.wf=h,e.Af=o,e.Sf=s,e.Tf=n,e.bf=r;var a=Ot(e);At(t,a),x(T(i()),(function(){e._f=!0,Lt(e)}),(function(i){e._f=!0,gt(t,i)}))}function Nt(t){t.Sf=void 0,t.Tf=void 0,t.bf=void 0,t.wf=void 0}function Mt(t){return t.Af-t.Qd}function Lt(t){var e=t.yf;if(!1!==t._f&&void 0===e.ef)if("erroring"!==e.Fa){if(0!==t.Kd.length){var i=function(t){return t.Kd.peek().value}(t);"close"===i?function(t){var e=t.yf;(function(t){t.rf=t.nf,t.nf=void 0})(e),rt(t);var i=t.Tf();Nt(t),x(i,(function(){!function(t){t.rf.Gd(void 0),t.rf=void 0,"erroring"===t.Fa&&(t.Fd=void 0,void 0!==t.hf&&(t.hf.Gd(),t.hf=void 0)),t.Fa="closed";var e=t.Jd;void 0!==e&&Xt(e)}(e)}),(function(t){!function(t,e){t.rf.Hd(e),t.rf=void 0,void 0!==t.hf&&(t.hf.Hd(e),t.hf=void 0),gt(t,e)}(e,t)}))}(t):function(t,e){var i=t.yf;!function(t){t.ef=t.tf.shift()}(i);var s=t.Sf(e);x(s,(function(){!function(t){t.ef.Gd(void 0),t.ef=void 0}(i);var e=i.Fa;if(rt(t),!1===yt(i)&&"writable"===e){var s=Ot(t);At(i,s)}Lt(t)}),(function(e){"writable"===i.Fa&&Nt(t),function(t,e){t.ef.Hd(e),t.ef=void 0,gt(t,e)}(i,e)}))}(t,i.chunk)}}else wt(e)}function Bt(t,e){"writable"===t.yf.Fa&&Ft(t,e)}function Ot(t){return Mt(t)<=0}function Ft(t,e){var i=t.yf;Nt(t),pt(i,e)}function Vt(t){return new b("WritableStream.prototype."+t+" can only be used on a WritableStream")}function Wt(t){return new b("WritableStreamDefaultWriter.prototype."+t+" can only be used on a WritableStreamDefaultWriter")}function Ut(t){return new b("Cannot "+t+" a stream using a released writer")}function Gt(t){t.Vd=S((function(e,i){t.Wd=e,t.Ud=i,t.gf="pending"}))}function Ht(t,e){Gt(t),Zt(t,e)}function Zt(t,e){P(t.Vd),t.Ud(e),t.Wd=void 0,t.Ud=void 0,t.gf="rejected"}function Xt(t){t.Wd(void 0),t.Wd=void 0,t.Ud=void 0,t.gf="resolved"}function zt(t){t.mf=S((function(e,i){t.kf=e,t.Ef=i})),t.pf="pending"}function qt(t,e){zt(t),Kt(t,e)}function Yt(t){zt(t),jt(t)}function Kt(t,e){P(t.mf),t.Ef(e),t.kf=void 0,t.Ef=void 0,t.pf="rejected"}function jt(t){t.kf(void 0),t.kf=void 0,t.Ef=void 0,t.pf="fulfilled"}function Qt(t){if("object"!=typeof t||null===t)return!1;try{return"boolean"==typeof t.aborted}catch(t){return!1}}var Jt="undefined"!=typeof DOMException?DOMException:void 0;var $t,te=function(t){if("function"!=typeof t&&"object"!=typeof t)return!1;try{return new t,!0}catch(t){return!1}}(Jt)?Jt:(($t=function(t,e){this.message=t||"",this.name=e||"Error",g.captureStackTrace&&g.captureStackTrace(this,this.constructor)}).prototype=w.create(g.prototype),w.defineProperty($t.prototype,"constructor",{value:$t,writable:!0,configurable:!0}),$t);function ee(t,e,s,n,r,o){var h=Z(t),a=lt(e);t.Xd=!0;var u=!1,c=T(void 0);return S((function(l,d){var f,_,v,m;if(void 0!==o){if(f=function(){var i=new te("Aborted","AbortError"),s=[];!1===n&&s.push((function(){return"writable"===e.Fa?vt(e,i):T(void 0)})),!1===r&&s.push((function(){return"readable"===t.Fa?qe(t,i):T(void 0)})),y((function(){return Promise.all(s.map((function(t){return t()})))}),!0,i)},!0===o.aborted)return void f();o.addEventListener("abort",f)}if(w(t,h.Vd,(function(t){!1===n?y((function(){return vt(e,t)}),!0,t):A(!0,t)})),w(e,a.Vd,(function(e){!1===r?y((function(){return qe(t,e)}),!0,e):A(!0,e)})),_=t,v=h.Vd,m=function(){!1===s?y((function(){return function(t){var e=t.vf,i=e.Fa;return!0===yt(e)||"closed"===i?T(void 0):"errored"===i?k(e.Fd):kt(t)}(a)})):A()},"closed"===_.Fa?m():R(v,m),!0===yt(e)||"closed"===e.Fa){var g=new b("the destination writable stream closed before all data could be piped to it");!1===r?y((function(){return qe(t,g)}),!0,g):A(!0,g)}function p(){var t=c;return E(c,(function(){return t!==c?p():void 0}))}function w(t,e,i){"errored"===t.Fa?i(t.Fd):I(e,i)}function y(t,i,s){function n(){x(t(),(function(){return C(i,s)}),(function(t){return C(!0,t)}))}!0!==u&&(u=!0,"writable"===e.Fa&&!1===yt(e)?R(p(),n):n())}function A(t,i){!0!==u&&(u=!0,"writable"===e.Fa&&!1===yt(e)?R(p(),(function(){return C(t,i)})):C(t,i))}function C(t,e){It(a),B(h),void 0!==o&&o.removeEventListener("abort",f),t?d(e):l(void 0)}P(S((function(t,e){!function s(n){n?t():E(!0===u?T(!0):E(a.mf,(function(){return E(tt(h),(function(t){return!0===t.done||(c=E(Ct(a,t.value),void 0,i),!1)}))})),s,e)}(!1)})))}))}var ie=function(){function t(){throw new b}return w.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===se(this))throw fe("desiredSize");return ce(this)},enumerable:!0,configurable:!0}),t.prototype.close=function(){if(!1===se(this))throw fe("close");if(!1===le(this))throw new b("The stream is not in a state that permits close");he(this)},t.prototype.enqueue=function(t){if(!1===se(this))throw fe("enqueue");if(!1===le(this))throw new b("The stream is not in a state that permits enqueue");return ae(this,t)},t.prototype.error=function(t){if(!1===se(this))throw fe("error");ue(this,t)},t.prototype[G]=function(t){ht(this);var e=this.xf(t);return oe(this),e},t.prototype[H]=function(){var t=this.Rf;if(this.Kd.length>0){var e=rt(this);return!0===this.If&&0===this.Kd.length?(oe(this),Ye(t)):ne(this),T(N(e,!1,t.Od.Ld))}var i=X(t);return ne(this),i},t}();function se(t){return!!r(t)&&!!w.prototype.hasOwnProperty.call(t,"Rf")}function ne(t){!1!==re(t)&&(!0!==t.Cf?(t.Cf=!0,x(t.Pf(),(function(){t.Cf=!1,!0===t.Df&&(t.Df=!1,ne(t))}),(function(e){ue(t,e)}))):t.Df=!0)}function re(t){var e=t.Rf;return!1!==le(t)&&(!1!==t._f&&(!0===ze(e)&&q(e)>0||ce(t)>0))}function oe(t){t.Pf=void 0,t.xf=void 0,t.wf=void 0}function he(t){var e=t.Rf;t.If=!0,0===t.Kd.length&&(oe(t),Ye(e))}function ae(t,e){var i=t.Rf;if(!0===ze(i)&&q(i)>0)z(i,e,!1);else{var s=void 0;try{s=t.wf(e)}catch(e){throw ue(t,e),e}try{ot(t,e,s)}catch(e){throw ue(t,e),e}}ne(t)}function ue(t,e){var i=t.Rf;"readable"===i.Fa&&(ht(t),oe(t),Ke(i,e))}function ce(t){var e=t.Rf.Fa;return"errored"===e?null:"closed"===e?0:t.Af-t.Qd}function le(t){var e=t.Rf.Fa;return!1===t.If&&"readable"===e}function de(t,e,i,s,n,r,o){e.Rf=t,e.Kd=void 0,e.Qd=void 0,ht(e),e._f=!1,e.If=!1,e.Df=!1,e.Cf=!1,e.wf=o,e.Af=r,e.Pf=s,e.xf=n,t.zd=e,x(T(i()),(function(){e._f=!0,ne(e)}),(function(t){ue(e,t)}))}function fe(t){return new b("ReadableStreamDefaultController.prototype."+t+" can only be used on a ReadableStreamDefaultController")}var _e=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&_.floor(t)===t},ve=function(){function t(){throw new b("ReadableStreamBYOBRequest cannot be used directly")}return w.defineProperty(t.prototype,"view",{get:function(){if(!1===pe(this))throw Me("view");return this.Nf},enumerable:!0,configurable:!0}),t.prototype.respond=function(t){if(!1===pe(this))throw Me("respond");if(void 0===this.Mf)throw new b("This BYOB request has been invalidated");this.Nf.buffer,function(t,e){if(e=Number(e),!1===a(e))throw new RangeError("bytesWritten must be a finite");Re(t,e)}(this.Mf,t)},t.prototype.respondWithNewView=function(t){if(!1===pe(this))throw Me("respond");if(void 0===this.Mf)throw new b("This BYOB request has been invalidated");if(!ArrayBuffer.isView(t))throw new b("You can only respond with array buffer views");t.buffer,function(t,e){var i=t.Lf.peek();if(i.byteOffset+i.bytesFilled!==e.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(i.byteLength!==e.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");i.buffer=e.buffer,Re(t,e.byteLength)}(this.Mf,t)},t}(),me=function(){function t(){throw new b("ReadableByteStreamController constructor cannot be used directly")}return w.defineProperty(t.prototype,"byobRequest",{get:function(){if(!1===ge(this))throw Le("byobRequest");if(void 0===this.Bf&&this.Lf.length>0){var t=this.Lf.peek(),e=new j(t.buffer,t.byteOffset+t.bytesFilled,t.byteLength-t.bytesFilled),i=w.create(ve.prototype);!function(t,e,i){t.Mf=e,t.Nf=i}(i,this,e),this.Bf=i}return this.Bf},enumerable:!0,configurable:!0}),w.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===ge(this))throw Le("desiredSize");return De(this)},enumerable:!0,configurable:!0}),t.prototype.close=function(){if(!1===ge(this))throw Le("close");if(!0===this.If)throw new b("The stream has already been closed; do not close it again!");var t=this.Of.Fa;if("readable"!==t)throw new b("The stream (in "+t+" state) is not in the readable state and cannot be closed");!function(t){var e=t.Of;if(t.Qd>0)return void(t.If=!0);if(t.Lf.length>0){if(t.Lf.peek().bytesFilled>0){var i=new b("Insufficient bytes to fill elements in the given buffer");throw Pe(t,i),i}}Ce(t),Ye(e)}(this)},t.prototype.enqueue=function(t){if(!1===ge(this))throw Le("enqueue");if(!0===this.If)throw new b("stream is closed or draining");var e=this.Of.Fa;if("readable"!==e)throw new b("The stream (in "+e+" state) is not in the readable state and cannot be enqueued to");if(!ArrayBuffer.isView(t))throw new b("You can only enqueue array buffer views when using a ReadableByteStreamController");t.buffer,function(t,e){var i=t.Of,s=e.buffer,n=e.byteOffset,r=e.byteLength,o=s;if(!0===Y(i)){if(0===q(i))Ae(t,o,n,r);else z(i,new j(o,n,r),!1)}else!0===Fe(i)?(Ae(t,o,n,r),xe(t)):Ae(t,o,n,r);we(t)}(this,t)},t.prototype.error=function(t){if(!1===ge(this))throw Le("error");Pe(this,t)},t.prototype[G]=function(t){this.Lf.length>0&&(this.Lf.peek().bytesFilled=0);ht(this);var e=this.xf(t);return Ce(this),e},t.prototype[H]=function(){var t=this.Of;if(this.Qd>0){var e=this.Kd.shift();this.Qd-=e.byteLength,ke(this);var i=void 0;try{i=new j(e.buffer,e.byteOffset,e.byteLength)}catch(t){return k(t)}return T(N(i,!1,t.Od.Ld))}var s=this.Ff;if(void 0!==s){var n=void 0;try{n=new ArrayBuffer(s)}catch(t){return k(t)}var r={buffer:n,byteOffset:0,byteLength:s,bytesFilled:0,elementSize:1,ctor:j,readerType:"default"};this.Lf.push(r)}var o=X(t);return we(this),o},t}();function ge(t){return!!r(t)&&!!w.prototype.hasOwnProperty.call(t,"Of")}function pe(t){return!!r(t)&&!!w.prototype.hasOwnProperty.call(t,"Mf")}function we(t){var e=function(t){var e=t.Of;if("readable"!==e.Fa)return!1;if(!0===t.If)return!1;if(!1===t._f)return!1;if(!0===Y(e)&&q(e)>0)return!0;if(!0===Fe(e)&&Oe(e)>0)return!0;var i=De(t);if(i>0)return!0;return!1}(t);!1!==e&&(!0!==t.Cf?(t.Cf=!0,x(t.Pf(),(function(){t.Cf=!1,!0===t.Df&&(t.Df=!1,we(t))}),(function(e){Pe(t,e)}))):t.Df=!0)}function ye(t,e){var i=!1;"closed"===t.Fa&&(i=!0);var s=be(e);"default"===e.readerType?z(t,s,i):function(t,e,i){var s=t.Od,n=s.Vf.shift();n.Gd(N(e,i,s.Ld))}(t,s,i)}function be(t){var e=t.bytesFilled,i=t.elementSize;return new t.ctor(t.buffer,t.byteOffset,e/i)}function Ae(t,e,i,s){t.Kd.push({buffer:e,byteOffset:i,byteLength:s}),t.Qd+=s}function Se(t,e){var i=e.elementSize,s=e.bytesFilled-e.bytesFilled%i,n=_.min(t.Qd,e.byteLength-e.bytesFilled),r=e.bytesFilled+n,o=r-r%i,a=n,u=!1;o>s&&(a=o-e.bytesFilled,u=!0);for(var c=t.Kd;a>0;){var l=c.peek(),d=_.min(a,l.byteLength),f=e.byteOffset+e.bytesFilled;h(e.buffer,f,l.buffer,l.byteOffset,d),l.byteLength===d?c.shift():(l.byteOffset+=d,l.byteLength-=d),t.Qd-=d,Te(t,d,e),a-=d}return u}function Te(t,e,i){Ee(t),i.bytesFilled+=e}function ke(t){0===t.Qd&&!0===t.If?(Ce(t),Ye(t.Of)):we(t)}function Ee(t){void 0!==t.Bf&&(t.Bf.Mf=void 0,t.Bf.Nf=void 0,t.Bf=void 0)}function xe(t){for(;t.Lf.length>0;){if(0===t.Qd)return;var e=t.Lf.peek();!0===Se(t,e)&&(Ie(t),ye(t.Of,e))}}function Re(t,e){var i=t.Lf.peek();if("closed"===t.Of.Fa){if(0!==e)throw new b("bytesWritten must be 0 when calling respond() on a closed stream");!function(t,e){e.buffer=e.buffer;var i=t.Of;if(!0===Fe(i))for(;Oe(i)>0;)ye(i,Ie(t))}(t,i)}else!function(t,e,i){if(i.bytesFilled+e>i.byteLength)throw new RangeError("bytesWritten out of range");if(Te(t,e,i),!(i.bytesFilled<i.elementSize)){Ie(t);var s=i.bytesFilled%i.elementSize;if(s>0){var n=i.byteOffset+i.bytesFilled,r=i.buffer.slice(n-s,n);Ae(t,r,0,r.byteLength)}i.buffer=i.buffer,i.bytesFilled-=s,ye(t.Of,i),xe(t)}}(t,e,i);we(t)}function Ie(t){var e=t.Lf.shift();return Ee(t),e}function Ce(t){t.Pf=void 0,t.xf=void 0}function Pe(t,e){var i=t.Of;"readable"===i.Fa&&(!function(t){Ee(t),t.Lf=new D}(t),ht(t),Ce(t),Ke(i,e))}function De(t){var e=t.Of.Fa;return"errored"===e?null:"closed"===e?0:t.Af-t.Qd}function Ne(t,e,i){var s=w.create(me.prototype);var n=c(e,"pull",0,[s]),r=c(e,"cancel",1,[]),o=e.autoAllocateChunkSize;if(void 0!==o&&(o=Number(o),!1===_e(o)||o<=0))throw new RangeError("autoAllocateChunkSize must be a positive integer");!function(t,e,i,s,n,r,o){e.Of=t,e.Df=!1,e.Cf=!1,e.Bf=void 0,e.Kd=e.Qd=void 0,ht(e),e.If=!1,e._f=!1,e.Af=f(r),e.Pf=s,e.xf=n,e.Ff=o,e.Lf=new D,t.zd=e,x(T(i()),(function(){e._f=!0,we(e)}),(function(t){Pe(e,t)}))}(t,s,(function(){return l(e,"start",[s])}),n,r,i,o)}function Me(t){return new b("ReadableStreamBYOBRequest.prototype."+t+" can only be used on a ReadableStreamBYOBRequest")}function Le(t){return new b("ReadableByteStreamController.prototype."+t+" can only be used on a ReadableByteStreamController")}function Be(t){return S((function(e,i){var s={Gd:e,Hd:i};t.Od.Vf.push(s)}))}function Oe(t){return t.Od.Vf.length}function Fe(t){var e=t.Od;return void 0!==e&&!!We(e)}var Ve=function(){function t(t){if(!Xe(t))throw new b("ReadableStreamBYOBReader can only be constructed with a ReadableStream instance given a byte source");if(!1===ge(t.zd))throw new b("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");if(ze(t))throw new b("This stream has already been locked for exclusive reading by another reader");M(this,t),this.Vf=new D}return w.defineProperty(t.prototype,"closed",{get:function(){return We(this)?this.Vd:k(Ue("closed"))},enumerable:!0,configurable:!0}),t.prototype.cancel=function(t){return We(this)?void 0===this.Bd?k(O("cancel")):L(this,t):k(Ue("cancel"))},t.prototype.read=function(t){return We(this)?void 0===this.Bd?k(O("read from")):ArrayBuffer.isView(t)?(t.buffer,0===t.byteLength?k(new b("view must have non-zero byteLength")):function(t,e){var i=t.Bd;if(i.Xd=!0,"errored"===i.Fa)return k(i.Fd);return function(t,e){var i=t.Of,s=1;e.constructor!==DataView&&(s=e.constructor.BYTES_PER_ELEMENT);var n=e.constructor,r={buffer:e.buffer,byteOffset:e.byteOffset,byteLength:e.byteLength,bytesFilled:0,elementSize:s,ctor:n,readerType:"byob"};if(t.Lf.length>0)return t.Lf.push(r),Be(i);if("closed"===i.Fa)return T(N(new n(r.buffer,r.byteOffset,0),!0,i.Od.Ld));if(t.Qd>0){if(!0===Se(t,r)){var o=be(r);return ke(t),T(N(o,!1,i.Od.Ld))}if(!0===t.If){var h=new b("Insufficient bytes to fill elements in the given buffer");return Pe(t,h),k(h)}}t.Lf.push(r);var a=Be(i);return we(t),a}(i.zd,e)}(this,t)):k(new b("view must be an array buffer view")):k(Ue("read"))},t.prototype.releaseLock=function(){if(!We(this))throw Ue("releaseLock");if(void 0!==this.Bd){if(this.Vf.length>0)throw new b("Tried to release a reader lock when that reader has pending read() calls un-settled");B(this)}},t}();function We(t){return!!r(t)&&!!w.prototype.hasOwnProperty.call(t,"Vf")}function Ue(t){return new b("ReadableStreamBYOBReader.prototype."+t+" can only be used on a ReadableStreamBYOBReader")}var Ge=function(){function t(t,e){void 0===t&&(t={}),void 0===e&&(e={}),Ze(this);var i=e.size,s=e.highWaterMark,n=t.type;if("bytes"===String(n)){if(void 0!==i)throw new RangeError("The strategy for a byte stream cannot have a size function");void 0===s&&(s=0),Ne(this,t,s=f(s))}else{if(void 0!==n)throw new RangeError("Invalid type is specified");var r=v(i);void 0===s&&(s=1),function(t,e,i,s){var n=w.create(ie.prototype),r=c(e,"pull",0,[n]),o=c(e,"cancel",1,[]);de(t,n,(function(){return l(e,"start",[n])}),r,o,i,s)}(this,t,s=f(s),r)}}return w.defineProperty(t.prototype,"locked",{get:function(){if(!1===Xe(this))throw je("locked");return ze(this)},enumerable:!0,configurable:!0}),t.prototype.cancel=function(t){return!1===Xe(this)?k(je("cancel")):!0===ze(this)?k(new b("Cannot cancel a stream that already has a reader")):qe(this,t)},t.prototype.getReader=function(t){var e=(void 0===t?{}:t).mode;if(!1===Xe(this))throw je("getReader");if(void 0===e)return Z(this,!0);if("byob"===(e=String(e)))return function(t,e){void 0===e&&(e=!1);var i=new Ve(t);return i.Ld=e,i}(this,!0);throw new RangeError("Invalid mode is specified")},t.prototype.pipeThrough=function(t,e){var i=t.writable,s=t.readable,n=void 0===e?{}:e,r=n.preventClose,o=n.preventAbort,h=n.preventCancel,a=n.signal;if(!1===Xe(this))throw je("pipeThrough");if(!1===ft(i))throw new b("writable argument to pipeThrough must be a WritableStream");if(!1===Xe(s))throw new b("readable argument to pipeThrough must be a ReadableStream");if(r=Boolean(r),o=Boolean(o),h=Boolean(h),void 0!==a&&!Qt(a))throw new b("ReadableStream.prototype.pipeThrough's signal option must be an AbortSignal");if(!0===ze(this))throw new b("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(!0===_t(i))throw new b("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");return P(ee(this,i,r,o,h,a)),s},t.prototype.pipeTo=function(t,e){var i=void 0===e?{}:e,s=i.preventClose,n=i.preventAbort,r=i.preventCancel,o=i.signal;return!1===Xe(this)?k(je("pipeTo")):!1===ft(t)?k(new b("ReadableStream.prototype.pipeTo's first argument must be a WritableStream")):(s=Boolean(s),n=Boolean(n),r=Boolean(r),void 0===o||Qt(o)?!0===ze(this)?k(new b("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):!0===_t(t)?k(new b("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):ee(this,t,s,n,r,o):k(new b("ReadableStream.prototype.pipeTo's signal option must be an AbortSignal")))},t.prototype.tee=function(){if(!1===Xe(this))throw je("tee");var t=function(t,e){var i,s,n,r,h,a=Z(t),u=!1,c=!1,l=!1,d=S((function(t){h=t}));function f(){return!0===u||(u=!0,P(C(tt(a),(function(t){if(u=!1,!0===t.done)return!1===c&&he(n.zd),void(!1===l&&he(r.zd));var e=t.value,i=e,s=e;!1===c&&ae(n.zd,i),!1===l&&ae(r.zd,s)})))),T(void 0)}function _(){}return n=He(_,f,(function(e){if(c=!0,i=e,!0===l){var n=o([i,s]),r=qe(t,n);h(r)}return d})),r=He(_,f,(function(e){if(l=!0,s=e,!0===c){var n=o([i,s]),r=qe(t,n);h(r)}return d})),I(a.Vd,(function(t){ue(n.zd,t),ue(r.zd,t)})),[n,r]}(this);return o(t)},t.prototype.getIterator=function(t){var e=(void 0===t?{}:t).preventCancel,i=void 0!==e&&e;if(!1===Xe(this))throw je("getIterator");return function(t,e){void 0===e&&(e=!1);var i=Z(t),s=w.create(it);return s.qd=i,s.Yd=Boolean(e),s}(this,i)},t}();function He(t,e,i,s,n){void 0===s&&(s=1),void 0===n&&(n=function(){return 1});var r=w.create(Ge.prototype);return Ze(r),de(r,w.create(ie.prototype),t,e,i,s,n),r}function Ze(t){t.Fa="readable",t.Od=void 0,t.Fd=void 0,t.Xd=!1}function Xe(t){return!!r(t)&&!!w.prototype.hasOwnProperty.call(t,"zd")}function ze(t){return void 0!==t.Od}function qe(t,e){return t.Xd=!0,"closed"===t.Fa?T(void 0):"errored"===t.Fa?k(t.Fd):(Ye(t),C(t.zd[G](e),i))}function Ye(t){t.Fa="closed";var e=t.Od;void 0!==e&&($(e)&&(e.Zd.forEach((function(t){t.Gd(N(void 0,!0,e.Ld))})),e.Zd=new D),U(e))}function Ke(t,e){t.Fa="errored",t.Fd=e;var i=t.Od;void 0!==i&&($(i)?(i.Zd.forEach((function(t){t.Hd(e)})),i.Zd=new D):(i.Vf.forEach((function(t){t.Hd(e)})),i.Vf=new D),W(i,e))}function je(t){return new b("ReadableStream.prototype."+t+" can only be used on a ReadableStream")}"symbol"==typeof e.asyncIterator&&w.defineProperty(Ge.prototype,e.asyncIterator,{value:Ge.prototype.getIterator,enumerable:!1,writable:!0,configurable:!0});var Qe=function(){function t(t){var e=t.highWaterMark;this.highWaterMark=e}return t.prototype.size=function(t){return t.byteLength},t}(),Je=function(){function t(t){var e=t.highWaterMark;this.highWaterMark=e}return t.prototype.size=function(){return 1},t}(),$e=function(){function t(t,e,i){void 0===t&&(t={}),void 0===e&&(e={}),void 0===i&&(i={});var s=e.size,n=e.highWaterMark,r=i.size,o=i.highWaterMark;if(void 0!==t.writableType)throw new RangeError("Invalid writable type specified");var h=v(s);if(void 0===n&&(n=1),n=f(n),void 0!==t.readableType)throw new RangeError("Invalid readable type specified");var a,u=v(r);void 0===o&&(o=0),o=f(o),function(t,e,i,s,n,r){function o(){return e}function h(e){return function(t,e){var i=t.Wf;if(!0===t.uf){return C(t.Uf,(function(){var s=t.Gf;if("erroring"===s.Fa)throw s.Fd;return ai(i,e)}))}return ai(i,e)}(t,e)}function a(e){return function(t,e){return ei(t,e),T(void 0)}(t,e)}function u(){return function(t){var e=t.Hf,i=t.Wf,s=i.Zf();return oi(i),C(s,(function(){if("errored"===e.Fa)throw e.Fd;var t=e.zd;!0===le(t)&&he(t)}),(function(i){throw ei(t,i),e.Fd}))}(t)}function c(){return function(t){return si(t,!1),t.Uf}(t)}function l(e){return ii(t,e),T(void 0)}t.Gf=function(t,e,i,s,n,r){void 0===n&&(n=1),void 0===r&&(r=function(){return 1});var o=w.create(ct.prototype);return dt(o),Dt(o,w.create(Pt.prototype),t,e,i,s,n,r),o}(o,h,u,a,i,s),t.Hf=He(o,c,l,n,r),t.uf=void 0,t.Uf=void 0,t.Xf=void 0,si(t,!0),t.Wf=void 0}(this,S((function(t){a=t})),n,h,o,u),function(t,e){var i=w.create(ni.prototype),s=function(t){try{return hi(i,t),T(void 0)}catch(t){return k(t)}},n=e.transform;if(void 0!==n){if("function"!=typeof n)throw new b("transform is not a method");s=function(t){return d(n,e,[t,i])}}var r=c(e,"flush",0,[i]);!function(t,e,i,s){e.zf=t,t.Wf=e,e.qf=i,e.Zf=s}(t,i,s,r)}(this,t);var _=l(t,"start",[this.Wf]);a(_)}return w.defineProperty(t.prototype,"readable",{get:function(){if(!1===ti(this))throw ci("readable");return this.Hf},enumerable:!0,configurable:!0}),w.defineProperty(t.prototype,"writable",{get:function(){if(!1===ti(this))throw ci("writable");return this.Gf},enumerable:!0,configurable:!0}),t}();function ti(t){return!!r(t)&&!!w.prototype.hasOwnProperty.call(t,"Wf")}function ei(t,e){ue(t.Hf.zd,e),ii(t,e)}function ii(t,e){oi(t.Wf),Bt(t.Gf.$d,e),!0===t.uf&&si(t,!1)}function si(t,e){void 0!==t.Uf&&t.Xf(),t.Uf=S((function(e){t.Xf=e})),t.uf=e}var ni=function(){function t(){throw new b("TransformStreamDefaultController instances cannot be created directly")}return w.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===ri(this))throw ui("desiredSize");return ce(this.zf.Hf.zd)},enumerable:!0,configurable:!0}),t.prototype.enqueue=function(t){if(!1===ri(this))throw ui("enqueue");hi(this,t)},t.prototype.error=function(t){if(!1===ri(this))throw ui("error");!function(t,e){ei(t.zf,e)}(this,t)},t.prototype.terminate=function(){if(!1===ri(this))throw ui("terminate");!function(t){var e=t.zf,i=e.Hf.zd;!0===le(i)&&he(i);var s=new b("TransformStream terminated");ii(e,s)}(this)},t}();function ri(t){return!!r(t)&&!!w.prototype.hasOwnProperty.call(t,"zf")}function oi(t){t.qf=void 0,t.Zf=void 0}function hi(t,e){var i=t.zf,s=i.Hf.zd;if(!1===le(s))throw new b("Readable side is not in a state that permits enqueue");try{ae(s,e)}catch(t){throw ii(i,t),i.Hf.Fd}var n=function(t){return!0!==re(t)}(s);n!==i.uf&&si(i,!0)}function ai(t,e){return C(t.qf(e),void 0,(function(e){throw ei(t.zf,e),e}))}function ui(t){return new b("TransformStreamDefaultController.prototype."+t+" can only be used on a TransformStreamDefaultController")}function ci(t){return new b("TransformStream.prototype."+t+" can only be used on a TransformStream")}t.ByteLengthQueuingStrategy=Qe,t.CountQueuingStrategy=Je,t.ReadableStream=Ge,t.TransformStream=$e,t.WritableStream=ct,w.defineProperty(t,"__esModule",{value:!0})}))})),zl=lr((t=>{"use strict";function e(){const t=Xl();return e=function(){return t},t}r(),w.defineProperty(t,"__esModule",{value:!0}),function(t,e){for(var i in e)w.defineProperty(t,i,{enumerable:!0,get:e[i]})}(t,{ByteLengthQueuingStrategy:function(){return e().ByteLengthQueuingStrategy},CountQueuingStrategy:function(){return e().CountQueuingStrategy},ReadableStream:function(){return e().ReadableStream},TransformStream:function(){return e().TransformStream},WritableStream:function(){return e().WritableStream}})})),ql=lr(((t,e)=>{r(),function(i,s){"object"==typeof t&&typeof e<"u"?s(t):"function"==typeof define&&define.amd?define(["exports"],s):s((i=typeof globalThis<"u"?globalThis:i||self).millicast={})}(t,(function(t){"use strict";var e,i=w.defineProperty,n=w.defineProperties,r=w.getOwnPropertyDescriptors,o=w.getOwnPropertySymbols,a=w.prototype.hasOwnProperty,c=w.prototype.propertyIsEnumerable,l=(t,e,s)=>e in t?i(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,d=(t,e)=>{for(var i in e||(e={}))a.call(e,i)&&l(t,i,e[i]);if(o)for(var i of o(e))c.call(e,i)&&l(t,i,e[i]);return t},v=(t,e)=>n(t,r(e)),y=(t,e)=>{var i={};for(var s in t)a.call(t,s)&&e.indexOf(s)<0&&(i[s]=t[s]);if(null!=t&&o)for(var s of o(t))e.indexOf(s)<0&&c.call(t,s)&&(i[s]=t[s]);return i},A=typeof globalThis<"u"?globalThis:typeof s<"u"?s:typeof global<"u"?global:typeof self<"u"?self:{};function T(t){return t&&t.__esModule&&w.prototype.hasOwnProperty.call(t,"default")?t.default:t}var k,E={exports:{}};k=E,function(t){var e,i={VERSION:"1.6.1"},s={},n=function(t,e){return function(){return e.apply(t,arguments)}},r=function(){var t,e,i=arguments,s=i[0];for(e=1;e<i.length;e++)for(t in i[e])!(t in s)&&i[e].hasOwnProperty(t)&&(s[t]=i[e][t]);return s},o=function(t,e){return{value:t,name:e}};i.TRACE=o(1,"TRACE"),i.DEBUG=o(2,"DEBUG"),i.INFO=o(3,"INFO"),i.TIME=o(4,"TIME"),i.WARN=o(5,"WARN"),i.ERROR=o(8,"ERROR"),i.OFF=o(99,"OFF");var h=function(t){this.context=t,this.setLevel(t.filterLevel),this.log=this.info};h.prototype={setLevel:function(t){t&&"value"in t&&(this.context.filterLevel=t)},getLevel:function(){return this.context.filterLevel},enabledFor:function(t){var e=this.context.filterLevel;return t.value>=e.value},trace:function(){this.invoke(i.TRACE,arguments)},debug:function(){this.invoke(i.DEBUG,arguments)},info:function(){this.invoke(i.INFO,arguments)},warn:function(){this.invoke(i.WARN,arguments)},error:function(){this.invoke(i.ERROR,arguments)},time:function(t){"string"==typeof t&&t.length>0&&this.invoke(i.TIME,[t,"start"])},timeEnd:function(t){"string"==typeof t&&t.length>0&&this.invoke(i.TIME,[t,"end"])},invoke:function(t,i){e&&this.enabledFor(t)&&e(i,r({level:t},this.context))}};var a,u=new h({filterLevel:i.OFF});(a=i).enabledFor=n(u,u.enabledFor),a.trace=n(u,u.trace),a.debug=n(u,u.debug),a.time=n(u,u.time),a.timeEnd=n(u,u.timeEnd),a.info=n(u,u.info),a.warn=n(u,u.warn),a.error=n(u,u.error),a.log=a.info,i.setHandler=function(t){e=t},i.setLevel=function(t){for(var e in u.setLevel(t),s)s.hasOwnProperty(e)&&s[e].setLevel(t)},i.getLevel=function(){return u.getLevel()},i.get=function(t){return s[t]||(s[t]=new h(r({name:t},u.context)))},i.createDefaultHandler=function(t){(t=t||{}).formatter=t.formatter||function(t,e){e.name&&t.unshift("["+e.name+"]")};var e={},s=function(t,e){Function.prototype.apply.call(t,console,e)};return typeof console>"u"?function(){}:function(n,r){n=Array.prototype.slice.call(n);var o,h=console.log;r.level===i.TIME?(o=(r.name?"["+r.name+"] ":"")+n[0],"start"===n[1]?console.time?console.time(o):e[o]=(new Date).getTime():console.timeEnd?console.timeEnd(o):s(h,[o+": "+((new Date).getTime()-e[o])+"ms"])):(r.level===i.WARN&&console.warn?h=console.warn:r.level===i.ERROR&&console.error?h=console.error:r.level===i.INFO&&console.info?h=console.info:r.level===i.DEBUG&&console.debug?h=console.debug:r.level===i.TRACE&&console.trace&&(h=console.trace),t.formatter(n,r),s(h,n))}},i.useDefaults=function(t){i.setLevel(t&&t.defaultLevel||i.DEBUG),i.setHandler(i.createDefaultHandler(t))},i.setDefaults=i.useDefaults,k.exports?k.exports=i:(i.Yf=t.Logger,i.noConflict=function(){return t.Logger=i.Yf,i},t.Logger=i)}(A);const R=T(E.exports),I="0.3.2",P=(null==(e=null==s?void 0:s.navigator)?void 0:e.userAgent)||"No user agent available";let D="",N="",M="",L="",B="",O="",F="",V=0;const W=[];const U=t=>{D=""===D?t:D},G=t=>{N=""===N?t:N},H=t=>{M=""===M?t:M},Z=t=>{L=""===L?t:L},X=t=>{B=""===B?t:B},z=t=>{V=0===V?t:V},q=t=>{O=t},Y=t=>{F=""===F?t:F},K=t=>{60===W.length&&W.shift(),W.push(t)},Q=(t,e)=>{let i;void 0===t&&(t=60),void 0===e&&(e="JSON"),i=!Number.isInteger(t)||t>60||t<=0?60:t;const s={client:"@millicast/millicast-sdk",version:I,timestamp:(new Date).toISOString(),userAgent:P,clusterId:F,accountId:D,streamName:N,subscriberId:M,connection:O,stats:W.slice(-i),connectionDurationMs:(new Date).getTime()-V};return""!==B?s.feedId=B:""!==L&&(s.streamViewId=L),"CMCD"===e?function(t){function e(t,e){return{ts:_.round(e.timestamp)||"",ot:"audio"===t?"a":"v",bl:e.jitterBufferDelay||0,br:_.round(e.bitrateBitsPerSecond||0),pld:e.packetsLostDeltaPerSecond||0,j:e.jitter||0,mtp:e.packetRate||0,mid:e.mid||"",mimeType:e.mimeType||""}}return t.stats=t.stats.reduce(((t,i)=>{const s=0!==i.audio.inbounds.length?i.audio.inbounds.map((t=>e("audio",t))):i.audio.outbounds.map((t=>e("audio",t))),n=0!==i.video.inbounds.length?i.video.inbounds.map((t=>e("video",t))):i.video.outbounds.map((t=>e("video",t)));return t.concat([...s,...n])}),[]),t}(s):s};R.useDefaults({defaultLevel:R.TRACE});const J=["TRACE","DEBUG","INFO","WARN","ERROR"],tt=(t,e)=>{t.unshift("[".concat(e.name||"Global","] ").concat((new Date).toISOString()," - ").concat(e.level.name," -"))},et=(t,e)=>e?t.value>=ot[e].value:t.value>=rt.value,it=R.createDefaultHandler({formatter:tt});R.setHandler(((t,e)=>{((t,e)=>{t=(t=Array.prototype.slice.call(t)).map((t=>"object"==typeof t?JSON.stringify(t):t)),tt(t,e),0!==st?(nt.push(t.join(" ")),nt.length>=st&&(nt=nt.slice(-st))):nt=[]})(t,e),et(e.level,e.name)&&it(t,e);for(const{handler:i,level:s}of ht)e.level.value>=s.value&&i(t,e)}));let st=1e4,nt=[],rt=R.OFF;const ot={},ht=[],at=v(d({},R),{enabledFor:et,getHistory:()=>nt,getHistoryMaxSize:()=>st,setHistoryMaxSize:t=>{st=t},setLevel:t=>{rt=t;for(const e in ot)ot[e]=t},getLevel:()=>rt,get:t=>{ot[t]||(ot[t]=rt);const e=R.get(t);return e.setLevel=e=>{ot[t]=e},e.getLevel=()=>ot[t],e},setHandler:(t,e)=>{ht.push({handler:t,level:e})},diagnose:t=>{let e;void 0===t&&(t={});const i={statsCount:60,historySize:1e3,minLogLevel:"TRACE",statsFormat:"JSON"};"number"==typeof t?(i.statsCount=t,e=i):e=d(d({},i),t);const{statsCount:s,historySize:n,minLogLevel:r,statsFormat:o}=e,h=Q(s,o),a=at.getHistory();if(!Number.isInteger(n)||n<=0)throw new g("Invalid Argument Exception : historySize must be a positive integer.");if(!J.includes(r.toUpperCase()))throw new g('Invalid Argument Exception : the minLogLevel parameter only excepts "trace", "debug", "info", "warn", and "error" as arguments.');if(J.includes(r.toUpperCase())){const t=J.slice(J.indexOf(r.toUpperCase())),e=a.filter((e=>t.some((t=>e.includes(t)))));h.history=e.slice(-n)}return h},JSON:"JSON",CMCD:"CMCD",VERSION:I});var ut,ct={exports:{}},lt="object"==typeof Reflect?Reflect:null,dt=lt&&"function"==typeof lt.apply?lt.apply:function(t,e,i){return Function.prototype.apply.call(t,e,i)};ut=lt&&"function"==typeof lt.ownKeys?lt.ownKeys:w.getOwnPropertySymbols?function(t){return w.getOwnPropertyNames(t).concat(w.getOwnPropertySymbols(t))}:function(t){return w.getOwnPropertyNames(t)};var ft=Number.isNaN||function(t){return t!=t};function _t(){_t.init.call(this)}ct.exports=_t,ct.exports.once=function(t,e){return new Promise((function(i,s){function n(i){t.removeListener(e,r),s(i)}function r(){"function"==typeof t.removeListener&&t.removeListener("error",n),i([].slice.call(arguments))}Tt(t,e,r,{once:!0}),"error"!==e&&function(t,e,i){"function"==typeof t.on&&Tt(t,"error",e,i)}(t,n,{once:!0})}))},_t.EventEmitter=_t,_t.prototype.Kf=void 0,_t.prototype.jf=0,_t.prototype.Qf=void 0;var vt=10;function mt(t){if("function"!=typeof t)throw new b('The "listener" argument must be of type Function. Received type '+typeof t)}function gt(t){return void 0===t.Qf?_t.defaultMaxListeners:t.Qf}function pt(t,e,i,s){var n,r,o;if(mt(i),void 0===(r=t.Kf)?(r=t.Kf=w.create(null),t.jf=0):(void 0!==r.newListener&&(t.emit("newListener",e,i.listener?i.listener:i),r=t.Kf),o=r[e]),void 0===o)o=r[e]=i,++t.jf;else if("function"==typeof o?o=r[e]=s?[i,o]:[o,i]:s?o.unshift(i):o.push(i),(n=gt(t))>0&&o.length>n&&!o.warned){o.warned=!0;var h=new g("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");h.name="MaxListenersExceededWarning",h.emitter=t,h.type=e,h.count=o.length,function(t){console&&console.warn&&console.warn(t)}(h)}return t}function wt(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function yt(t,e,i){var s={fired:!1,wrapFn:void 0,target:t,type:e,listener:i},n=wt.bind(s);return n.listener=i,s.wrapFn=n,n}function bt(t,e,i){var s=t.Kf;if(void 0===s)return[];var n=s[e];return void 0===n?[]:"function"==typeof n?i?[n.listener||n]:[n]:i?function(t){for(var e=new Array(t.length),i=0;i<e.length;++i)e[i]=t[i].listener||t[i];return e}(n):St(n,n.length)}function At(t){var e=this.Kf;if(void 0!==e){var i=e[t];if("function"==typeof i)return 1;if(void 0!==i)return i.length}return 0}function St(t,e){for(var i=new Array(e),s=0;s<e;++s)i[s]=t[s];return i}function Tt(t,e,i,s){if("function"==typeof t.on)s.once?t.once(e,i):t.on(e,i);else{if("function"!=typeof t.addEventListener)throw new b('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function n(r){s.once&&t.removeEventListener(e,n),i(r)}))}}w.defineProperty(_t,"defaultMaxListeners",{enumerable:!0,get:function(){return vt},set:function(t){if("number"!=typeof t||t<0||ft(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");vt=t}}),_t.init=function(){(void 0===this.Kf||this.Kf===w.getPrototypeOf(this).Kf)&&(this.Kf=w.create(null),this.jf=0),this.Qf=this.Qf||void 0},_t.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||ft(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this.Qf=t,this},_t.prototype.getMaxListeners=function(){return gt(this)},_t.prototype.emit=function(t){for(var e=[],i=1;i<arguments.length;i++)e.push(arguments[i]);var s="error"===t,n=this.Kf;if(void 0!==n)s=s&&void 0===n.error;else if(!s)return!1;if(s){var r;if(e.length>0&&(r=e[0]),r instanceof g)throw r;var o=new g("Unhandled error."+(r?" ("+r.message+")":""));throw o.context=r,o}var h=n[t];if(void 0===h)return!1;if("function"==typeof h)dt(h,this,e);else{var a=h.length,u=St(h,a);for(i=0;i<a;++i)dt(u[i],this,e)}return!0},_t.prototype.addListener=function(t,e){return pt(this,t,e,!1)},_t.prototype.on=_t.prototype.addListener,_t.prototype.prependListener=function(t,e){return pt(this,t,e,!0)},_t.prototype.once=function(t,e){return mt(e),this.on(t,yt(this,t,e)),this},_t.prototype.prependOnceListener=function(t,e){return mt(e),this.prependListener(t,yt(this,t,e)),this},_t.prototype.removeListener=function(t,e){var i,s,n,r,o;if(mt(e),void 0===(s=this.Kf))return this;if(void 0===(i=s[t]))return this;if(i===e||i.listener===e)0==--this.jf?this.Kf=w.create(null):(delete s[t],s.removeListener&&this.emit("removeListener",t,i.listener||e));else if("function"!=typeof i){for(n=-1,r=i.length-1;r>=0;r--)if(i[r]===e||i[r].listener===e){o=i[r].listener,n=r;break}if(n<0)return this;0===n?i.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(i,n),1===i.length&&(s[t]=i[0]),void 0!==s.removeListener&&this.emit("removeListener",t,o||e)}return this},_t.prototype.off=_t.prototype.removeListener,_t.prototype.removeAllListeners=function(t){var e,i,s;if(void 0===(i=this.Kf))return this;if(void 0===i.removeListener)return 0===arguments.length?(this.Kf=w.create(null),this.jf=0):void 0!==i[t]&&(0==--this.jf?this.Kf=w.create(null):delete i[t]),this;if(0===arguments.length){var n,r=w.keys(i);for(s=0;s<r.length;++s)"removeListener"!==(n=r[s])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this.Kf=w.create(null),this.jf=0,this}if("function"==typeof(e=i[t]))this.removeListener(t,e);else if(void 0!==e)for(s=e.length-1;s>=0;s--)this.removeListener(t,e[s]);return this},_t.prototype.listeners=function(t){return bt(this,t,!0)},_t.prototype.rawListeners=function(t){return bt(this,t,!1)},_t.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):At.call(t,e)},_t.prototype.listenerCount=At,_t.prototype.eventNames=function(){return this.jf>0?ut(this.Kf):[]};var kt=ct.exports;const xt=T(kt);var Rt={exports:{}};Rt.exports=Ct,Rt.exports.filter=function(t,e){var i=new It;return Ct(t,i,e),i};var It=kt.EventEmitter;function Ct(t,e,i){Array.isArray(i)||(i=[i]);var s=[];return i.forEach((function(i){var n=function(){var t=[].slice.call(arguments);t.unshift(i),e.emit.apply(e,t)};s.push(n),t.on(i,n)})),function(){i.forEach((function(e,i){t.removeListener(e,s[i])}))}}const Pt=T(Rt.exports);var Dt={exports:{}};!function(t,e){var i;self,i=()=>{return t={7:t=>{var e,i="object"==typeof Reflect?Reflect:null,s=i&&"function"==typeof i.apply?i.apply:function(t,e,i){return Function.prototype.apply.call(t,e,i)};e=i&&"function"==typeof i.ownKeys?i.ownKeys:w.getOwnPropertySymbols?function(t){return w.getOwnPropertyNames(t).concat(w.getOwnPropertySymbols(t))}:function(t){return w.getOwnPropertyNames(t)};var n=Number.isNaN||function(t){return t!=t};function r(){r.init.call(this)}t.exports=r,t.exports.once=function(t,e){return new Promise((function(i,s){function n(i){t.removeListener(e,r),s(i)}function r(){"function"==typeof t.removeListener&&t.removeListener("error",n),i([].slice.call(arguments))}var o,h;v(t,e,r,{once:!0}),"error"!==e&&(h=n,"function"==typeof(o=t).on&&v(o,"error",h,{once:!0}))}))},r.EventEmitter=r,r.prototype.Kf=void 0,r.prototype.jf=0,r.prototype.Qf=void 0;var o=10;function h(t){if("function"!=typeof t)throw new b('The "listener" argument must be of type Function. Received type '+typeof t)}function a(t){return void 0===t.Qf?r.defaultMaxListeners:t.Qf}function u(t,e,i,s){var n,r,o,u;if(h(i),void 0===(r=t.Kf)?(r=t.Kf=w.create(null),t.jf=0):(void 0!==r.newListener&&(t.emit("newListener",e,i.listener?i.listener:i),r=t.Kf),o=r[e]),void 0===o)o=r[e]=i,++t.jf;else if("function"==typeof o?o=r[e]=s?[i,o]:[o,i]:s?o.unshift(i):o.push(i),(n=a(t))>0&&o.length>n&&!o.warned){o.warned=!0;var c=new g("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=t,c.type=e,c.count=o.length,u=c,console&&console.warn&&console.warn(u)}return t}function c(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function l(t,e,i){var s={fired:!1,wrapFn:void 0,target:t,type:e,listener:i},n=c.bind(s);return n.listener=i,s.wrapFn=n,n}function d(t,e,i){var s=t.Kf;if(void 0===s)return[];var n=s[e];return void 0===n?[]:"function"==typeof n?i?[n.listener||n]:[n]:i?function(t){for(var e=new Array(t.length),i=0;i<e.length;++i)e[i]=t[i].listener||t[i];return e}(n):_(n,n.length)}function f(t){var e=this.Kf;if(void 0!==e){var i=e[t];if("function"==typeof i)return 1;if(void 0!==i)return i.length}return 0}function _(t,e){for(var i=new Array(e),s=0;s<e;++s)i[s]=t[s];return i}function v(t,e,i,s){if("function"==typeof t.on)s.once?t.once(e,i):t.on(e,i);else{if("function"!=typeof t.addEventListener)throw new b('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function n(r){s.once&&t.removeEventListener(e,n),i(r)}))}}w.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(t){if("number"!=typeof t||t<0||n(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");o=t}}),r.init=function(){void 0!==this.Kf&&this.Kf!==w.getPrototypeOf(this).Kf||(this.Kf=w.create(null),this.jf=0),this.Qf=this.Qf||void 0},r.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||n(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this.Qf=t,this},r.prototype.getMaxListeners=function(){return a(this)},r.prototype.emit=function(t){for(var e=[],i=1;i<arguments.length;i++)e.push(arguments[i]);var n="error"===t,r=this.Kf;if(void 0!==r)n=n&&void 0===r.error;else if(!n)return!1;if(n){var o;if(e.length>0&&(o=e[0]),o instanceof g)throw o;var h=new g("Unhandled error."+(o?" ("+o.message+")":""));throw h.context=o,h}var a=r[t];if(void 0===a)return!1;if("function"==typeof a)s(a,this,e);else{var u=a.length,c=_(a,u);for(i=0;i<u;++i)s(c[i],this,e)}return!0},r.prototype.addListener=function(t,e){return u(this,t,e,!1)},r.prototype.on=r.prototype.addListener,r.prototype.prependListener=function(t,e){return u(this,t,e,!0)},r.prototype.once=function(t,e){return h(e),this.on(t,l(this,t,e)),this},r.prototype.prependOnceListener=function(t,e){return h(e),this.prependListener(t,l(this,t,e)),this},r.prototype.removeListener=function(t,e){var i,s,n,r,o;if(h(e),void 0===(s=this.Kf))return this;if(void 0===(i=s[t]))return this;if(i===e||i.listener===e)0==--this.jf?this.Kf=w.create(null):(delete s[t],s.removeListener&&this.emit("removeListener",t,i.listener||e));else if("function"!=typeof i){for(n=-1,r=i.length-1;r>=0;r--)if(i[r]===e||i[r].listener===e){o=i[r].listener,n=r;break}if(n<0)return this;0===n?i.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(i,n),1===i.length&&(s[t]=i[0]),void 0!==s.removeListener&&this.emit("removeListener",t,o||e)}return this},r.prototype.off=r.prototype.removeListener,r.prototype.removeAllListeners=function(t){var e,i,s;if(void 0===(i=this.Kf))return this;if(void 0===i.removeListener)return 0===arguments.length?(this.Kf=w.create(null),this.jf=0):void 0!==i[t]&&(0==--this.jf?this.Kf=w.create(null):delete i[t]),this;if(0===arguments.length){var n,r=w.keys(i);for(s=0;s<r.length;++s)"removeListener"!==(n=r[s])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this.Kf=w.create(null),this.jf=0,this}if("function"==typeof(e=i[t]))this.removeListener(t,e);else if(void 0!==e)for(s=e.length-1;s>=0;s--)this.removeListener(t,e[s]);return this},r.prototype.listeners=function(t){return d(this,t,!0)},r.prototype.rawListeners=function(t){return d(this,t,!1)},r.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):f.call(t,e)},r.prototype.listenerCount=f,r.prototype.eventNames=function(){return this.jf>0?e(this.Kf):[]}},586:function(t,e,i){var s,n;!function(r){var o,h={VERSION:"1.6.1"},a={},u=function(t,e){return function(){return e.apply(t,arguments)}},c=function(){var t,e,i=arguments,s=i[0];for(e=1;e<i.length;e++)for(t in i[e])!(t in s)&&i[e].hasOwnProperty(t)&&(s[t]=i[e][t]);return s},l=function(t,e){return{value:t,name:e}};h.TRACE=l(1,"TRACE"),h.DEBUG=l(2,"DEBUG"),h.INFO=l(3,"INFO"),h.TIME=l(4,"TIME"),h.WARN=l(5,"WARN"),h.ERROR=l(8,"ERROR"),h.OFF=l(99,"OFF");var d=function(t){this.context=t,this.setLevel(t.filterLevel),this.log=this.info};d.prototype={setLevel:function(t){t&&"value"in t&&(this.context.filterLevel=t)},getLevel:function(){return this.context.filterLevel},enabledFor:function(t){var e=this.context.filterLevel;return t.value>=e.value},trace:function(){this.invoke(h.TRACE,arguments)},debug:function(){this.invoke(h.DEBUG,arguments)},info:function(){this.invoke(h.INFO,arguments)},warn:function(){this.invoke(h.WARN,arguments)},error:function(){this.invoke(h.ERROR,arguments)},time:function(t){"string"==typeof t&&t.length>0&&this.invoke(h.TIME,[t,"start"])},timeEnd:function(t){"string"==typeof t&&t.length>0&&this.invoke(h.TIME,[t,"end"])},invoke:function(t,e){o&&this.enabledFor(t)&&o(e,c({level:t},this.context))}};var f,_=new d({filterLevel:h.OFF});(f=h).enabledFor=u(_,_.enabledFor),f.trace=u(_,_.trace),f.debug=u(_,_.debug),f.time=u(_,_.time),f.timeEnd=u(_,_.timeEnd),f.info=u(_,_.info),f.warn=u(_,_.warn),f.error=u(_,_.error),f.log=f.info,h.setHandler=function(t){o=t},h.setLevel=function(t){for(var e in _.setLevel(t),a)a.hasOwnProperty(e)&&a[e].setLevel(t)},h.getLevel=function(){return _.getLevel()},h.get=function(t){return a[t]||(a[t]=new d(c({name:t},_.context)))},h.createDefaultHandler=function(t){(t=t||{}).formatter=t.formatter||function(t,e){e.name&&t.unshift("["+e.name+"]")};var e={},i=function(t,e){Function.prototype.apply.call(t,console,e)};return typeof console>"u"?function(){}:function(s,n){s=Array.prototype.slice.call(s);var r,o=console.log;n.level===h.TIME?(r=(n.name?"["+n.name+"] ":"")+s[0],"start"===s[1]?console.time?console.time(r):e[r]=(new Date).getTime():console.timeEnd?console.timeEnd(r):i(o,[r+": "+((new Date).getTime()-e[r])+"ms"])):(n.level===h.WARN&&console.warn?o=console.warn:n.level===h.ERROR&&console.error?o=console.error:n.level===h.INFO&&console.info?o=console.info:n.level===h.DEBUG&&console.debug?o=console.debug:n.level===h.TRACE&&console.trace&&(o=console.trace),t.formatter(s,n),i(o,s))}},h.useDefaults=function(t){h.setLevel(t&&t.defaultLevel||h.DEBUG),h.setHandler(h.createDefaultHandler(t))},h.setDefaults=h.useDefaults,void 0===(n="function"==typeof(s=h)?s.call(e,i,e,t):s)||(t.exports=n)}()},156:function(t,e,i){var s=this&&this.Jf||(w.create?function(t,e,i,s){void 0===s&&(s=i);var n=w.getOwnPropertyDescriptor(e,i);n&&!("get"in n?!e.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return e[i]}}),w.defineProperty(t,s,n)}:function(t,e,i,s){void 0===s&&(s=i),t[s]=e[i]}),n=this&&this.$f||function(t,e){for(var i in t)"default"===i||w.prototype.hasOwnProperty.call(e,i)||s(e,t,i)},r=this&&this.t_||function(t){return t&&t.__esModule?t:{default:t}};w.defineProperty(e,"__esModule",{value:!0}),e.Logger=void 0;var o=i(586);w.defineProperty(e,"Logger",{enumerable:!0,get:function(){return r(o).default}}),n(i(284),e),n(i(280),e),n(i(738),e),n(i(767),e)},738:(t,e)=>{var i,s;w.defineProperty(e,"__esModule",{value:!0}),e.QualityLimitationReason=void 0,(s=i||(e.QualityLimitationReason=i={}))[s.none=0]="none",s[s.cpu=1]="cpu",s[s.bandwidth=2]="bandwidth",s[s.other=3]="other"},280:(t,e)=>{w.defineProperty(e,"__esModule",{value:!0})},767:(t,e)=>{w.defineProperty(e,"__esModule",{value:!0})},185:(t,e)=>{w.defineProperty(e,"__esModule",{value:!0}),e.calculatePacketsLostRatio=e.calculateRate=e.getMediaKind=void 0,e.getMediaKind=t=>{let e=t.kind||t.mediaType;return["audio","video"].includes(e)||"inbound-rtp"!==t.type||(e=t.id.toLocaleLowerCase().includes("video")?"video":"audio"),e},e.calculateRate=(t,e,i,s)=>i&&s?(e-s)/((t-i)/1e3):0,e.calculatePacketsLostRatio=(t,e,i,s)=>0==e?0:(t-(null!=i?i:0))/(e-(null!=s?s:0))},284:function(t,e,i){var s,n,r,o,h,a,u,c,l,d,f,_,v,g,y,A,S=this&&this.e_||function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},T=this&&this.i_||function(t,e,i,s,n){if("m"===s)throw new b("Private method is not writable");if("a"===s&&!n)throw new b("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new b("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(t,i):n?n.value=i:e.set(t,i),i},k=this&&this.s_||function(t,e,i,s){if("a"===i&&!s)throw new b("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new b("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(t):s?s.value:e.get(t)},E=this&&this.t_||function(t){return t&&t.__esModule?t:{default:t}};w.defineProperty(e,"__esModule",{value:!0}),e.WebRTCStats=void 0;const x=i(7),R=E(i(586)),I=i(738),C=i(185);class P extends x.EventEmitter{constructor(t){super(),s.add(this),n.set(this,void 0),r.set(this,void 0),o.set(this,void 0),h.set(this,null),a.set(this,void 0),u.set(this,null),this.start=()=>{k(this,a,"f").info("WebRTC statistics collection is starting..."),T(this,u,null,"f"),T(this,h,p(k(this,c,"f"),k(this,r,"f")),"f")},this.stop=()=>{k(this,h,"f")&&(m(k(this,h,"f")),T(this,h,null,"f"),k(this,a,"f").info("WebRTC statistics collection has stopped."))},c.set(this,(()=>S(this,void 0,void 0,(function*(){let t,e;try{k(this,a,"f").trace("Requesting WebRTC statistics..."),t=yield k(this,n,"f").call(this),e=(new Date).toISOString()}catch(t){return k(this,a,"f").error("Problem collecting the WebRTC statistics.",t),void this.emit("error","Problem collecting the WebRTC statistics - ".concat(t))}const i=Array.from(t.values()),r={timestamp:e,input:{audio:[],video:[]},output:{audio:[],video:[]}};k(this,o,"f")&&(r.rawStats=t);for(let e=0;e<w.keys(i).length;e++){const n=i[e];switch(n.type){case"outbound-rtp":const e=n,i=(0,C.getMediaKind)(e);"audio"===i?yield k(this,s,"m",f).call(this,t,e,r):"video"===i&&(yield k(this,s,"m",_).call(this,t,e,r));break;case"inbound-rtp":const o=n;let h=(0,C.getMediaKind)(o);"audio"===h?yield k(this,s,"m",g).call(this,t,o,r):"video"===h&&(yield k(this,s,"m",y).call(this,t,o,r));break;case"candidate-pair":const a=n;a.nominated&&k(this,s,"m",A).call(this,a,r)}}T(this,u,r,"f"),this.emit("stats",r)})))),T(this,a,R.default.get("WebRTCStats"),"f"),T(this,n,t.getStats,"f"),T(this,r,t.getStatsInterval||1e3,"f"),T(this,o,!!t.includeRawStats,"f")}}e.WebRTCStats=P,n=new WeakMap,r=new WeakMap,o=new WeakMap,h=new WeakMap,a=new WeakMap,u=new WeakMap,c=new WeakMap,s=new WeakSet,l=function(t,e){if(e){const i=t.get(e);if(i)return{mimeType:i.mimeType}}return{}},d=function(t,e,i){return S(this,void 0,void 0,(function*(){var n,r,o,h;const a=(0,C.calculateRate)(e.timestamp,e.bytesSent,null==i?void 0:i.timestamp,null==i?void 0:i.totalBytesSent),u=(0,C.calculateRate)(e.timestamp,e.packetsSent,null==i?void 0:i.timestamp,null==i?void 0:i.totalPacketsSent),c=k(this,s,"m",l).call(this,t,e.codecId);return w.assign({id:e.id,timestamp:e.timestamp,mid:e.mid,totalBytesSent:e.bytesSent,bytesSentDelta:e.bytesSent-(null!==(n=null==i?void 0:i.totalBytesSent)&&void 0!==n?n:0),totalPacketsSent:e.packetsSent,packetsSentDelta:e.packetsSent-(null!==(r=null==i?void 0:i.totalPacketsSent)&&void 0!==r?r:0),bitrate:a,packetRate:u,targetBitrate:e.targetBitrate,retransmittedPacketsSent:e.retransmittedPacketsSent,retransmittedPacketsSentDelta:e.retransmittedPacketsSent-(null!==(o=null==i?void 0:i.retransmittedPacketsSent)&&void 0!==o?o:0),retransmittedBytesSent:e.retransmittedBytesSent,retransmittedBytesSentDelta:e.retransmittedBytesSent-(null!==(h=null==i?void 0:i.retransmittedBytesSent)&&void 0!==h?h:0)},c)}))},f=function(t,e,i){return S(this,void 0,void 0,(function*(){var n;const r=null===(n=k(this,u,"f"))||void 0===n?void 0:n.output.audio.find((t=>t.id===e.id));if(r&&e.timestamp-r.timestamp<=0)return;const o=yield k(this,s,"m",d).call(this,t,e,r),h=w.assign({},o);i.output.audio.push(h)}))},_=function(t,e,i){return S(this,void 0,void 0,(function*(){var n;const r=null===(n=k(this,u,"f"))||void 0===n?void 0:n.output.video.find((t=>t.id===e.id));if(r&&e.timestamp-r.timestamp<=0)return;const o=yield k(this,s,"m",d).call(this,t,e,r);let h=I.QualityLimitationReason.none;e.qualityLimitationReason&&(h=e.qualityLimitationReason);const a=w.assign(w.assign({},o),{frameWidth:e.frameWidth,frameHeight:e.frameHeight,framesPerSecond:e.framesPerSecond,framesSent:e.framesSent,qualityLimitationReason:h,qualityLimitationDurations:e.qualityLimitationDurations});i.output.video.push(a)}))},v=function(t,e,i){return S(this,void 0,void 0,(function*(){var n,r;const o=(0,C.calculateRate)(e.timestamp,e.bytesReceived,null==i?void 0:i.timestamp,null==i?void 0:i.totalBytesReceived),h=(0,C.calculateRate)(e.timestamp,e.packetsReceived,null==i?void 0:i.timestamp,null==i?void 0:i.totalPacketsReceived),a=(0,C.calculatePacketsLostRatio)(e.packetsReceived,e.packetsLost,null==i?void 0:i.totalPacketsReceived,null==i?void 0:i.totalPacketsLost),u=(null!==(n=e.packetsLost)&&void 0!==n?n:0)-(null!==(r=null==i?void 0:i.totalPacketsLost)&&void 0!==r?r:0),c=k(this,s,"m",l).call(this,t,e.codecId);return w.assign({id:e.id,timestamp:e.timestamp,mid:e.mid,trackIdentifier:e.trackIdentifier,jitter:e.jitter,jitterBufferDelay:e.jitterBufferDelay,jitterBufferEmittedCount:e.jitterBufferEmittedCount,totalBytesReceived:e.bytesReceived,totalPacketsReceived:e.packetsReceived,totalPacketsLost:e.packetsLost,bitrate:o,packetRate:h,packetLossRatio:a,packetLossDelta:u},c)}))},g=function(t,e,i){return S(this,void 0,void 0,(function*(){var n;const r=null===(n=k(this,u,"f"))||void 0===n?void 0:n.input.audio.find((t=>t.id===e.id));if(r&&e.timestamp-r.timestamp<=0)return;const o=yield k(this,s,"m",v).call(this,t,e,r);i.input.audio.push(o)}))},y=function(t,e,i){return S(this,void 0,void 0,(function*(){var n;const r=null===(n=k(this,u,"f"))||void 0===n?void 0:n.input.video.find((t=>t.id===e.id));if(r&&e.timestamp-r.timestamp<=0)return;const o=yield k(this,s,"m",v).call(this,t,e,r),h=w.assign(w.assign({},o),{keyFramesDecoded:e.keyFramesDecoded,frameHeight:e.frameHeight,frameWidth:e.frameWidth,framesDecoded:e.framesDecoded,framesDropped:e.framesDropped,framesPerSecond:e.framesPerSecond,framesReceived:e.framesReceived});i.input.video.push(h)}))},A=function(t,e){e.totalRoundTripTime=t.totalRoundTripTime,e.currentRoundTripTime=t.currentRoundTripTime,e.responsesReceived=t.responsesReceived,e.availableOutgoingBitrate=t.availableOutgoingBitrate,e.availableIncomingBitrate=t.availableIncomingBitrate}}},e={},function i(s){var n=e[s];if(void 0!==n)return n.exports;var r=e[s]={exports:{}};return t[s].call(r.exports,r,r.exports,i),r.exports}(156);var t,e},t.exports=i()}(Dt);var Nt=Dt.exports;const Mt=at.get("PeerConnectionStats"),Lt="stats";class Bt extends xt{init(t){if(this.initialized)return void Mt.warn("PeerConnectionStats.init() has already been called. Automatic initialization occurs when the PeerConnectionStats object is constructed.");Mt.info("Initializing peer connection stats");const e=this.peer;try{this.collection=new Nt.WebRTCStats({getStatsInterval:t,getStats:()=>e.getStats(),includeRawStats:!0}),this.collection.on("stats",(t=>{const e=(t=>{const e=t,{input:i,output:s,rawStats:n}=e,r=y(e,["input","output","rawStats"]);return v(d({},r),{audio:{inbounds:t.input.audio.map((t=>{var e=t,{packetLossRatio:i,packetLossDelta:s,bitrate:n}=e,r=y(e,["packetLossRatio","packetLossDelta","bitrate"]);return d({packetsLostRatioPerSecond:i,packetsLostDeltaPerSecond:s,bitrateBitsPerSecond:8*n,bitrate:n},r)})),outbounds:t.output.audio.map((t=>{var e=t,{packetLossRatio:i,packetLossDelta:s,bitrate:n}=e,r=y(e,["packetLossRatio","packetLossDelta","bitrate"]);return d({packetsLostRatioPerSecond:i,packetsLostDeltaPerSecond:s,bitrateBitsPerSecond:8*n,bitrate:n},r)}))},video:{inbounds:t.input.video.map((t=>{var e=t,{packetLossRatio:i,packetLossDelta:s,bitrate:n}=e,r=y(e,["packetLossRatio","packetLossDelta","bitrate"]);return d({packetsLostRatioPerSecond:i,packetsLostDeltaPerSecond:s,bitrateBitsPerSecond:8*n,bitrate:n},r)})),outbounds:t.output.video.map((t=>{var e=t,{packetLossRatio:i,packetLossDelta:s,bitrate:n}=e,r=y(e,["packetLossRatio","packetLossDelta","bitrate"]);return d({packetsLostRatioPerSecond:i,packetsLostDeltaPerSecond:s,bitrateBitsPerSecond:8*n,bitrate:n},r)}))},raw:t.rawStats})})(t);K(e),this.emit(Lt,e)})),this.collection.start(),this.initialized=!0}catch(t){Mt.error(t)}}parseStats(t){return Mt.warn("The parseStats method is deprecated and will be removed in future releases."),null}stop(){Mt.info("Stopping peer connection stats"),this.collection.stop()}constructor(t,e={statsIntervalMs:1e3,autoInitStats:!0}){super(),this.peer=t,this.collection=null,this.initialized=!1,e.autoInitStats&&this.init(e.statsIntervalMs)}}var Ot={},Ft={},Vt={},Wt={exports:{}},Ut=Wt.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(t){return t.encoding?"rtpmap:%d %s/%s/%s":t.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(t){return null!=t.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(t){return null!=t.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(t){return"extmap:%d"+(t.direction?"/%s":"%v")+(t["encrypt-uri"]?" %s":"%v")+" %s"+(t.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(t){return null!=t.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(t){var e="candidate:%s %d %s %d %s %d typ %s";return e+=null!=t.raddr?" raddr %s rport %d":"%v%v",e+=null!=t.tcptype?" tcptype %s":"%v",null!=t.generation&&(e+=" generation %d"),e+=null!=t["network-id"]?" network-id %d":"%v",e+=null!=t["network-cost"]?" network-cost %d":"%v"}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(t){var e="ssrc:%d";return null!=t.attribute&&(e+=" %s",null!=t.value&&(e+=":%s")),e}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(t){return null!=t.maxMessageSize?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(t){return t.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(t){return"imageattr:%s %s %s"+(t.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(t){return"simulcast:%s %s"+(t.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(t){return"ts-refclk:%s"+(null!=t.clksrcExt?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(t){var e="mediaclk:";return e+=null!=t.id?"id=%s %s":"%v%s",e+=null!=t.mediaClockValue?"=%s":"",e+=null!=t.rateNumerator?" rate=%s":"",e+=null!=t.rateDenominator?"/%s":""}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};w.keys(Ut).forEach((function(t){Ut[t].forEach((function(t){t.reg||(t.reg=/(.*)/),t.format||(t.format="%s")}))}));var Gt=Wt.exports;!function(t){var e=function(t){return String(Number(t))===t?Number(t):t},i=function(t,i,s){var n=t.name&&t.names;t.push&&!i[t.push]?i[t.push]=[]:n&&!i[t.name]&&(i[t.name]={});var r=t.push?{}:n?i[t.name]:i;(function(t,i,s,n){if(n&&!s)i[n]=e(t[1]);else for(var r=0;r<s.length;r+=1)null!=t[r+1]&&(i[s[r]]=e(t[r+1]))})(s.match(t.reg),r,t.names,t.name),t.push&&i[t.push].push(r)},s=Gt,n=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(t){var e={},r=[],o=e;return t.split(/(\r\n|\r|\n)/).filter(n).forEach((function(t){var e=t[0],n=t.slice(2);"m"===e&&(r.push({rtp:[],fmtp:[]}),o=r[r.length-1]);for(var h=0;h<(s[e]||[]).length;h+=1){var a=s[e][h];if(a.reg.test(n))return i(a,o,n)}})),e.media=r,e};var r=function(t,i){var s=i.split(/=(.+)/,2);return 2===s.length?t[s[0]]=e(s[1]):1===s.length&&i.length>1&&(t[s[0]]=void 0),t};t.parseParams=function(t){return t.split(/;\s?/).reduce(r,{})},t.parseFmtpConfig=t.parseParams,t.parsePayloads=function(t){return t.toString().split(" ").map(Number)},t.parseRemoteCandidates=function(t){for(var i=[],s=t.split(" ").map(e),n=0;n<s.length;n+=3)i.push({component:s[n],ip:s[n+1],port:s[n+2]});return i},t.parseImageAttributes=function(t){return t.split(" ").map((function(t){return t.substring(1,t.length-1).split(",").reduce(r,{})}))},t.parseSimulcastStreamList=function(t){return t.split(";").map((function(t){return t.split(",").map((function(t){var i,s=!1;return"~"!==t[0]?i=e(t):(i=e(t.substring(1,t.length)),s=!0),{scid:i,paused:s}}))}))}}(Vt);var Ht=Gt,Zt=/%[sdv%]/g,Xt=function(t){var e=1,i=arguments,s=i.length;return t.replace(Zt,(function(t){if(e>=s)return t;var n=i[e];switch(e+=1,t){case"%%":return"%";case"%s":return String(n);case"%d":return Number(n);case"%v":return""}}))},zt=function(t,e,i){var s=[t+"="+(e.format instanceof Function?e.format(e.push?i:i[e.name]):e.format)];if(e.names)for(var n=0;n<e.names.length;n+=1){var r=e.names[n];e.name?s.push(i[e.name][r]):s.push(i[e.names[n]])}else s.push(i[e.name]);return Xt.apply(null,s)},qt=["v","o","s","i","u","e","p","c","b","t","r","z","a"],Yt=["i","c","b","a"],Kt=Vt,jt=function(t,e){e=e||{},null==t.version&&(t.version=0),null==t.name&&(t.name=" "),t.media.forEach((function(t){null==t.payloads&&(t.payloads="")}));var i=e.outerOrder||qt,s=e.innerOrder||Yt,n=[];return i.forEach((function(e){Ht[e].forEach((function(i){i.name in t&&null!=t[i.name]?n.push(zt(e,i,t)):i.push in t&&null!=t[i.push]&&t[i.push].forEach((function(t){n.push(zt(e,i,t))}))}))})),t.media.forEach((function(t){n.push(zt("m",Ht.m[0],t)),s.forEach((function(e){Ht[e].forEach((function(i){i.name in t&&null!=t[i.name]?n.push(zt(e,i,t)):i.push in t&&null!=t[i.push]&&t[i.push].forEach((function(t){n.push(zt(e,i,t))}))}))}))})),n.join("\r\n")+"\r\n"};Ft.write=jt,Ft.parse=Kt.parse,Ft.parseParams=Kt.parseParams,Ft.parseFmtpConfig=Kt.parseFmtpConfig,Ft.parsePayloads=Kt.parsePayloads,Ft.parseRemoteCandidates=Kt.parseRemoteCandidates,Ft.parseImageAttributes=Kt.parseImageAttributes,Ft.parseSimulcastStreamList=Kt.parseSimulcastStreamList;let Qt=class t{equals(t){return t.foundation===this.foundation&&t.componentId===this.componentId&&t.transport===this.transport&&t.priority===this.priority&&t.address===this.address&&t.port===this.port&&t.type===this.type&&t.relAddr===this.relAddr&&t.relPort===this.relPort}clone(){return new t(this.foundation,this.componentId,this.transport,this.priority,this.address,this.port,this.type,this.relAddr,this.relPort)}plain(){const t={foundation:this.foundation,componentId:this.componentId,transport:this.transport,priority:this.priority,address:this.address,port:this.port,type:this.type};return this.relAddr&&(t.relAddr=this.relAddr),this.relPort&&(t.relPort=this.relPort),t}getFoundation(){return this.foundation}getComponentId(){return this.componentId}getTransport(){return this.transport}getPriority(){return this.priority}getAddress(){return this.address}getPort(){return this.port}getType(){return this.type}getRelAddr(){return this.relAddr}getRelPort(){return this.relPort}constructor(t,e,i,s,n,r,o,h,a){this.foundation=t,this.componentId=e,this.transport=i,this.priority=s,this.address=n,this.port=r,this.type=o,this.relAddr=h,this.relPort=a}};Qt.expand=function(t){return"CandidateInfo"===t.constructor.name?t:new Qt(t.foundation,t.componentId,t.transport,t.priority,t.address,t.port,t.type,t.relAddr,t.relPort)},Qt.clone=function(t){return"CandidateInfo"===t.constructor.name?t.clone():Qt.expand(t)};var Jt=Qt;let $t=class t{clone(){return new t(this.id,this.params)}plain(){return this.params.length?{id:this.id,params:this.params}:{id:this.id}}getId(){return this.id}getParams(){return this.params}constructor(t,e){this.id=t,this.params=e||[]}};$t.expand=function(t){return"RTCPFeedbackInfo"===t.constructor.name?t:new $t(t.id,t.params)},$t.clone=function(t){return"RTCPFeedbackInfo"===t.constructor.name?t.clone():$t.expand(t)};var te=$t;const ee=te;let ie=class t{clone(){const e=new t(this.codec,this.type,this.params);this.hasRTX()&&e.setRTX(this.getRTX());for(const t of this.rtcpfbs)e.addRTCPFeedback(t.clone());return this.hasChannels()&&e.setChannels(this.getChannels()),e}plain(){const t={codec:this.codec,type:this.type};this.rtx&&(t.rtx=this.rtx),this.channels&&(t.channels=this.channels),w.keys(this.params).length&&(t.params=this.params);for(const e of this.rtcpfbs)t.rtcpfbs||(t.rtcpfbs=[]),t.rtcpfbs.push(e.plain());return t}setRTX(t){this.rtx=t}getType(){return this.type}setType(t){this.type=t}getCodec(){return this.codec}getParams(){return this.params}addParams(t){for(const e in t)this.params[e]=t[e]}addParam(t,e){this.params[t]=e}hasParam(t){return w.hasOwnProperty.call(this.params,t)}getParam(t,e){if(void 0===e&&(e=void 0),this.hasParam(t))return this.params[t];if(void 0===e)throw new g("param ".concat(t," not found and no default value provided"));return""+e}hasRTX(){return this.rtx}getRTX(){return this.rtx}hasChannels(){return this.channels}getChannels(){return this.channels}setChannels(t){this.channels=t}addRTCPFeedback(t){this.rtcpfbs.add(t)}getRTCPFeedbacks(){return this.rtcpfbs}constructor(t,e,i){this.codec=t,this.type=e,this.params={},this.rtcpfbs=new Set,i&&this.addParams(i)}};ie.expand=function(t){if("CodecInfo"===t.constructor.name)return t;const e=new ie(t.codec,t.type,t.params);t.rtx&&e.setRTX(t.rtx),t.channels&&e.setChannels(t.channels);for(const i of t.rtcpfbs||[]){const t=ee.expand(i);e.addRTCPFeedback(t)}return e},ie.clone=function(t){return"CodecInfo"===t.constructor.name?t.clone():ie.expand(t)},ie.MapFromNames=function(t,e,i){var s;const n=new Map;let r=96;for(const o of t){let t;const h=o.split(";"),a=h.shift().toLowerCase().trim();t="pcmu"===a?0:"pcma"===a?8:++r;const u=new ie(a,t);"opus"===a?u.setChannels(2):"multiopus"===a&&u.setChannels(6),e&&"ulpfec"!==a&&"flexfec-03"!==a&&"red"!==a&&u.setRTX(++r);for(const t of i||[])u.addRTCPFeedback(new ee(t.id,t.params));for(const t of h){let e=t.split("=");u.addParam(e[0].trim(),null===(s=e[1])||void 0===s?void 0:s.trim())}n.set(t,u)}return n};var se=ie;var ne=function t(){var e=this;if(!(this instanceof t))return new(Function.prototype.bind.apply(t,[null].concat(Array.prototype.slice.call(arguments))));Array.from(arguments).forEach((function(t){e[t]=f("n_"+t)}))};const re=ne("ACTIVE","PASSIVE","ACTPASS","INACTIVE");re.byValue=function(t){switch(t){case re.ACTIVE:case re.PASSIVE:case re.ACTPASS:case re.INACTIVE:return t}return re[t.toUpperCase()]},re.toString=function(t){switch(t){case re.ACTIVE:return"active";case re.PASSIVE:return"passive";case re.ACTPASS:return"actpass";case re.INACTIVE:return"inactive"}},re.reverse=function(t,e){switch(t){case re.ACTIVE:return re.PASSIVE;case re.PASSIVE:return re.ACTIVE;case re.ACTPASS:return e?re.ACTIVE:re.PASSIVE;case re.INACTIVE:return re.INACTIVE}};var oe=re;const he=oe;let ae=class t{clone(){return new t(this.setup,this.hash,this.fingerprint)}plain(){return{setup:he.toString(this.setup),hash:this.hash,fingerprint:this.fingerprint}}getFingerprint(){return this.fingerprint}getHash(){return this.hash}getSetup(){return this.setup}setSetup(t){this.setup=t}constructor(t,e,i){this.setup=t,this.hash=e,this.fingerprint=i}};ae.expand=function(t){return"DTLSInfo"===t.constructor.name?t:new ae(t.setup?he.byValue(t.setup):he.ACTPASS,t.hash,t.fingerprint)},ae.clone=function(t){return"DTLSInfo"===t.constructor.name?t.clone():ae.expand(t)};var ue=ae;let ce=class t{clone(){return new t(this.tag,this.suite,this.keyParams,this.sessionParams)}plain(){return{tag:this.tag,suite:this.suite,keyParams:this.keyParams,sessionParams:this.sessionParams}}getSessionParams(){return this.sessionParams}getKeyParams(){return this.keyParams}getSuite(){return this.suite}getTag(){return this.tag}constructor(t,e,i,s){this.tag=t,this.suite=e,this.keyParams=i,this.sessionParams=s}};ce.expand=function(t){return"CryptoInfo"===t.constructor.name?t:new ce(t.tag,t.suite,t.keyParams,t.sessionParams)},ce.clone=function(t){return"CryptoInfo"===t.constructor.name?t.clone():ce.expand(t)};for(var le=ce,de={exports:{}},fe={exports:{}},_e={},ve={byteLength:function(t){var e=be(t),i=e[0],s=e[1];return 3*(i+s)/4-s},toByteArray:function(t){var e,i,s=be(t),n=s[0],r=s[1],o=new pe(function(t,e,i){return 3*(e+i)/4-i}(0,n,r)),h=0,a=r>0?n-4:n;for(i=0;i<a;i+=4)e=ge[t.charCodeAt(i)]<<18|ge[t.charCodeAt(i+1)]<<12|ge[t.charCodeAt(i+2)]<<6|ge[t.charCodeAt(i+3)],o[h++]=e>>16&255,o[h++]=e>>8&255,o[h++]=255&e;return 2===r&&(e=ge[t.charCodeAt(i)]<<2|ge[t.charCodeAt(i+1)]>>4,o[h++]=255&e),1===r&&(e=ge[t.charCodeAt(i)]<<10|ge[t.charCodeAt(i+1)]<<4|ge[t.charCodeAt(i+2)]>>2,o[h++]=e>>8&255,o[h++]=255&e),o},fromByteArray:function(t){for(var e,i=t.length,s=i%3,n=[],r=16383,o=0,h=i-s;o<h;o+=r)n.push(Se(t,o,o+r>h?h:o+r));return 1===s?(e=t[i-1],n.push(me[e>>2]+me[e<<4&63]+"==")):2===s&&(e=(t[i-2]<<8)+t[i-1],n.push(me[e>>10]+me[e>>4&63]+me[e<<2&63]+"=")),n.join("")}},me=[],ge=[],pe=typeof j<"u"?j:Array,we="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ye=0;ye<64;++ye)me[ye]=we[ye],ge[we.charCodeAt(ye)]=ye;function be(t){var e=t.length;if(e%4>0)throw new g("Invalid string. Length must be a multiple of 4");var i=t.indexOf("=");return-1===i&&(i=e),[i,i===e?0:4-i%4]}function Ae(t){return me[t>>18&63]+me[t>>12&63]+me[t>>6&63]+me[63&t]}function Se(t,e,i){for(var s,n=[],r=e;r<i;r+=3)s=(t[r]<<16&16711680)+(t[r+1]<<8&65280)+(255&t[r+2]),n.push(Ae(s));return n.join("")}ge[45]=62,ge[95]=63;var Te={read:function(t,e,i,s,n){var r,o,h=8*n-s-1,a=(1<<h)-1,u=a>>1,c=-7,l=i?n-1:0,d=i?-1:1,f=t[e+l];for(l+=d,r=f&(1<<-c)-1,f>>=-c,c+=h;c>0;r=256*r+t[e+l],l+=d,c-=8);for(o=r&(1<<-c)-1,r>>=-c,c+=s;c>0;o=256*o+t[e+l],l+=d,c-=8);if(0===r)r=1-u;else{if(r===a)return o?NaN:1/0*(f?-1:1);o+=_.pow(2,s),r-=u}return(f?-1:1)*o*_.pow(2,r-s)},write:function(t,e,i,s,n,r){var o,h,a,u=8*r-n-1,c=(1<<u)-1,l=c>>1,d=23===n?_.pow(2,-24)-_.pow(2,-77):0,f=s?0:r-1,v=s?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=_.abs(e),S(e)||e===1/0?(h=S(e)?1:0,o=c):(o=_.floor(_.log(e)/_.LN2),e*(a=_.pow(2,-o))<1&&(o--,a*=2),(e+=o+l>=1?d/a:d*_.pow(2,1-l))*a>=2&&(o++,a/=2),o+l>=c?(h=0,o=c):o+l>=1?(h=(e*a-1)*_.pow(2,n),o+=l):(h=e*_.pow(2,l-1)*_.pow(2,n),o=0));n>=8;t[i+f]=255&h,f+=v,h/=256,n-=8);for(o=o<<n|h,u+=n;u>0;t[i+f]=255&o,f+=v,o/=256,u-=8);t[i+f-v]|=128*m}};(function(t){const e=ve,i=Te,s="function"==typeof Po&&"function"==typeof f?f("nodejs.util.inspect.custom"):null;t.Buffer=o,t.SlowBuffer=function(t){return+t!=t&&(t=0),o.alloc(+t)},t.INSPECT_MAX_BYTES=50;const n=2147483647;function r(t){if(t>n)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new j(t);return w.setPrototypeOf(e,o.prototype),e}function o(t,e,i){if("number"==typeof t){if("string"==typeof e)throw new b('The "string" argument must be of type string. Received type number');return u(t)}return h(t,e,i)}function h(t,e,i){if("string"==typeof t)return function(t,e){if(("string"!=typeof e||""===e)&&(e="utf8"),!o.isEncoding(e))throw new b("Unknown encoding: "+e);const i=0|v(t,e);let s=r(i);const n=s.write(t,e);return n!==i&&(s=s.slice(0,n)),s}(t,e);if(ArrayBuffer.isView(t))return function(t){if(tt(t,j)){const e=new j(t);return l(e.buffer,e.byteOffset,e.byteLength)}return c(t)}(t);if(null==t)throw new b("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(tt(t,ArrayBuffer)||t&&tt(t.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(tt(t,SharedArrayBuffer)||t&&tt(t.buffer,SharedArrayBuffer)))return l(t,e,i);if("number"==typeof t)throw new b('The "value" argument must not be of type number. Received type number');const s=t.valueOf&&t.valueOf();if(null!=s&&s!==t)return o.from(s,e,i);const n=function(t){if(o.isBuffer(t)){const e=0|d(t.length),i=r(e);return 0===i.length||t.copy(i,0,0,e),i}if(void 0!==t.length)return"number"!=typeof t.length||et(t.length)?r(0):c(t);if("Buffer"===t.type&&Array.isArray(t.data))return c(t.data)}(t);if(n)return n;if(typeof Po<"u"&&null!=Po.toPrimitive&&"function"==typeof t[Po.toPrimitive])return o.from(t[Po.toPrimitive]("string"),e,i);throw new b("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function a(t){if("number"!=typeof t)throw new b('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function u(t){return a(t),r(t<0?0:0|d(t))}function c(t){const e=t.length<0?0:0|d(t.length),i=r(e);for(let s=0;s<e;s+=1)i[s]=255&t[s];return i}function l(t,e,i){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(i||0))throw new RangeError('"length" is outside of buffer bounds');let s;return s=void 0===e&&void 0===i?new j(t):void 0===i?new j(t,e):new j(t,e,i),w.setPrototypeOf(s,o.prototype),s}function d(t){if(t>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return 0|t}function v(t,e){if(o.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||tt(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new b('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const i=t.length,s=arguments.length>2&&!0===arguments[2];if(!s&&0===i)return 0;let n=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":return Q(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return J(t).length;default:if(n)return s?-1:Q(t).length;e=(""+e).toLowerCase(),n=!0}}function m(t,e,i){let s=!1;if((void 0===e||e<0)&&(e=0),e>this.length||((void 0===i||i>this.length)&&(i=this.length),i<=0)||(i>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return M(this,e,i);case"utf8":case"utf-8":return C(this,e,i);case"ascii":return D(this,e,i);case"latin1":case"binary":return N(this,e,i);case"base64":return I(this,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,e,i);default:if(s)throw new b("Unknown encoding: "+t);t=(t+"").toLowerCase(),s=!0}}function p(t,e,i){const s=t[e];t[e]=t[i],t[i]=s}function y(t,e,i,s,n){if(0===t.length)return-1;if("string"==typeof i?(s=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),et(i=+i)&&(i=n?0:t.length-1),i<0&&(i=t.length+i),i>=t.length){if(n)return-1;i=t.length-1}else if(i<0){if(!n)return-1;i=0}if("string"==typeof e&&(e=o.from(e,s)),o.isBuffer(e))return 0===e.length?-1:A(t,e,i,s,n);if("number"==typeof e)return e&=255,"function"==typeof j.prototype.indexOf?n?j.prototype.indexOf.call(t,e,i):j.prototype.lastIndexOf.call(t,e,i):A(t,[e],i,s,n);throw new b("val must be string, number or Buffer")}function A(t,e,i,s,n){let r,o=1,h=t.length,a=e.length;if(void 0!==s&&("ucs2"===(s=String(s).toLowerCase())||"ucs-2"===s||"utf16le"===s||"utf-16le"===s)){if(t.length<2||e.length<2)return-1;o=2,h/=2,a/=2,i/=2}function u(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(n){let s=-1;for(r=i;r<h;r++)if(u(t,r)===u(e,-1===s?0:r-s)){if(-1===s&&(s=r),r-s+1===a)return s*o}else-1!==s&&(r-=r-s),s=-1}else for(i+a>h&&(i=h-a),r=i;r>=0;r--){let i=!0;for(let s=0;s<a;s++)if(u(t,r+s)!==u(e,s)){i=!1;break}if(i)return r}return-1}function S(t,e,i,s){i=Number(i)||0;const n=t.length-i;s?(s=Number(s))>n&&(s=n):s=n;const r=e.length;let o;for(s>r/2&&(s=r/2),o=0;o<s;++o){const s=x(e.substr(2*o,2),16);if(et(s))return o;t[i+o]=s}return o}function T(t,e,i,s){return $(Q(e,t.length-i),t,i,s)}function k(t,e,i,s){return $(function(t){const e=[];for(let i=0;i<t.length;++i)e.push(255&t.charCodeAt(i));return e}(e),t,i,s)}function E(t,e,i,s){return $(J(e),t,i,s)}function R(t,e,i,s){return $(function(t,e){let i,s,n;const r=[];for(let o=0;o<t.length&&!((e-=2)<0);++o)i=t.charCodeAt(o),s=i>>8,n=i%256,r.push(n),r.push(s);return r}(e,t.length-i),t,i,s)}function I(t,i,s){return 0===i&&s===t.length?e.fromByteArray(t):e.fromByteArray(t.slice(i,s))}function C(t,e,i){i=_.min(t.length,i);const s=[];let n=e;for(;n<i;){const e=t[n];let r=null,o=e>239?4:e>223?3:e>191?2:1;if(n+o<=i){let i,s,h,a;switch(o){case 1:e<128&&(r=e);break;case 2:i=t[n+1],128==(192&i)&&(a=(31&e)<<6|63&i,a>127&&(r=a));break;case 3:i=t[n+1],s=t[n+2],128==(192&i)&&128==(192&s)&&(a=(15&e)<<12|(63&i)<<6|63&s,a>2047&&(a<55296||a>57343)&&(r=a));break;case 4:i=t[n+1],s=t[n+2],h=t[n+3],128==(192&i)&&128==(192&s)&&128==(192&h)&&(a=(15&e)<<18|(63&i)<<12|(63&s)<<6|63&h,a>65535&&a<1114112&&(r=a))}}null===r?(r=65533,o=1):r>65535&&(r-=65536,s.push(r>>>10&1023|55296),r=56320|1023&r),s.push(r),n+=o}return function(t){const e=t.length;if(e<=P)return String.fromCharCode.apply(String,t);let i="",s=0;for(;s<e;)i+=String.fromCharCode.apply(String,t.slice(s,s+=P));return i}(s)}t.kMaxLength=n,o.TYPED_ARRAY_SUPPORT=function(){try{const t=new j(1),e={foo:function(){return 42}};return w.setPrototypeOf(e,j.prototype),w.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),!o.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),w.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),w.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}}),o.poolSize=8192,o.from=function(t,e,i){return h(t,e,i)},w.setPrototypeOf(o.prototype,j.prototype),w.setPrototypeOf(o,j),o.alloc=function(t,e,i){return function(t,e,i){return a(t),t<=0?r(t):void 0!==e?"string"==typeof i?r(t).fill(e,i):r(t).fill(e):r(t)}(t,e,i)},o.allocUnsafe=function(t){return u(t)},o.allocUnsafeSlow=function(t){return u(t)},o.isBuffer=function(t){return null!=t&&!0===t.r_&&t!==o.prototype},o.compare=function(t,e){if(tt(t,j)&&(t=o.from(t,t.offset,t.byteLength)),tt(e,j)&&(e=o.from(e,e.offset,e.byteLength)),!o.isBuffer(t)||!o.isBuffer(e))throw new b('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let i=t.length,s=e.length;for(let n=0,r=_.min(i,s);n<r;++n)if(t[n]!==e[n]){i=t[n],s=e[n];break}return i<s?-1:s<i?1:0},o.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(t,e){if(!Array.isArray(t))throw new b('"list" argument must be an Array of Buffers');if(0===t.length)return o.alloc(0);let i;if(void 0===e)for(e=0,i=0;i<t.length;++i)e+=t[i].length;const s=o.allocUnsafe(e);let n=0;for(i=0;i<t.length;++i){let e=t[i];if(tt(e,j))n+e.length>s.length?(o.isBuffer(e)||(e=o.from(e)),e.copy(s,n)):j.prototype.set.call(s,e,n);else{if(!o.isBuffer(e))throw new b('"list" argument must be an Array of Buffers');e.copy(s,n)}n+=e.length}return s},o.byteLength=v,o.prototype.r_=!0,o.prototype.swap16=function(){const t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)p(this,e,e+1);return this},o.prototype.swap32=function(){const t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)p(this,e,e+3),p(this,e+1,e+2);return this},o.prototype.swap64=function(){const t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)p(this,e,e+7),p(this,e+1,e+6),p(this,e+2,e+5),p(this,e+3,e+4);return this},o.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?C(this,0,t):m.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(t){if(!o.isBuffer(t))throw new b("Argument must be a Buffer");return this===t||0===o.compare(this,t)},o.prototype.inspect=function(){let e="";const i=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,i).replace(/(.{2})/g,"$1 ").trim(),this.length>i&&(e+=" ... "),"<Buffer "+e+">"},s&&(o.prototype[s]=o.prototype.inspect),o.prototype.compare=function(t,e,i,s,n){if(tt(t,j)&&(t=o.from(t,t.offset,t.byteLength)),!o.isBuffer(t))throw new b('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===i&&(i=t?t.length:0),void 0===s&&(s=0),void 0===n&&(n=this.length),e<0||i>t.length||s<0||n>this.length)throw new RangeError("out of range index");if(s>=n&&e>=i)return 0;if(s>=n)return-1;if(e>=i)return 1;if(this===t)return 0;let r=(n>>>=0)-(s>>>=0),h=(i>>>=0)-(e>>>=0);const a=_.min(r,h),u=this.slice(s,n),c=t.slice(e,i);for(let t=0;t<a;++t)if(u[t]!==c[t]){r=u[t],h=c[t];break}return r<h?-1:h<r?1:0},o.prototype.includes=function(t,e,i){return-1!==this.indexOf(t,e,i)},o.prototype.indexOf=function(t,e,i){return y(this,t,e,i,!0)},o.prototype.lastIndexOf=function(t,e,i){return y(this,t,e,i,!1)},o.prototype.write=function(t,e,i,s){if(void 0===e)s="utf8",i=this.length,e=0;else if(void 0===i&&"string"==typeof e)s=e,i=this.length,e=0;else{if(!isFinite(e))throw new g("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(i)?(i>>>=0,void 0===s&&(s="utf8")):(s=i,i=void 0)}const n=this.length-e;if((void 0===i||i>n)&&(i=n),t.length>0&&(i<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");s||(s="utf8");let r=!1;for(;;)switch(s){case"hex":return S(this,t,e,i);case"utf8":case"utf-8":return T(this,t,e,i);case"ascii":case"latin1":case"binary":return k(this,t,e,i);case"base64":return E(this,t,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,t,e,i);default:if(r)throw new b("Unknown encoding: "+s);s=(""+s).toLowerCase(),r=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this.o_||this,0)}};const P=4096;function D(t,e,i){let s="";i=_.min(t.length,i);for(let n=e;n<i;++n)s+=String.fromCharCode(127&t[n]);return s}function N(t,e,i){let s="";i=_.min(t.length,i);for(let n=e;n<i;++n)s+=String.fromCharCode(t[n]);return s}function M(t,e,i){const s=t.length;(!e||e<0)&&(e=0),(!i||i<0||i>s)&&(i=s);let n="";for(let s=e;s<i;++s)n+=it[t[s]];return n}function L(t,e,i){const s=t.slice(e,i);let n="";for(let t=0;t<s.length-1;t+=2)n+=String.fromCharCode(s[t]+256*s[t+1]);return n}function B(t,e,i){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>i)throw new RangeError("Trying to access beyond buffer length")}function O(t,e,i,s,n,r){if(!o.isBuffer(t))throw new b('"buffer" argument must be a Buffer instance');if(e>n||e<r)throw new RangeError('"value" argument is out of bounds');if(i+s>t.length)throw new RangeError("Index out of range")}function F(t,e,i,s,n){z(e,s,n,t,i,7);let r=Number(e&BigInt(4294967295));t[i++]=r,r>>=8,t[i++]=r,r>>=8,t[i++]=r,r>>=8,t[i++]=r;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[i++]=o,o>>=8,t[i++]=o,o>>=8,t[i++]=o,o>>=8,t[i++]=o,i}function V(t,e,i,s,n){z(e,s,n,t,i,7);let r=Number(e&BigInt(4294967295));t[i+7]=r,r>>=8,t[i+6]=r,r>>=8,t[i+5]=r,r>>=8,t[i+4]=r;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[i+3]=o,o>>=8,t[i+2]=o,o>>=8,t[i+1]=o,o>>=8,t[i]=o,i+8}function W(t,e,i,s,n,r){if(i+s>t.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function U(t,e,s,n,r){return e=+e,s>>>=0,r||W(t,0,s,4),i.write(t,e,s,n,23,4),s+4}function G(t,e,s,n,r){return e=+e,s>>>=0,r||W(t,0,s,8),i.write(t,e,s,n,52,8),s+8}o.prototype.slice=function(t,e){const i=this.length;(t=~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),(e=void 0===e?i:~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),e<t&&(e=t);const s=this.subarray(t,e);return w.setPrototypeOf(s,o.prototype),s},o.prototype.readUintLE=o.prototype.readUIntLE=function(t,e,i){t>>>=0,e>>>=0,i||B(t,e,this.length);let s=this[t],n=1,r=0;for(;++r<e&&(n*=256);)s+=this[t+r]*n;return s},o.prototype.readUintBE=o.prototype.readUIntBE=function(t,e,i){t>>>=0,e>>>=0,i||B(t,e,this.length);let s=this[t+--e],n=1;for(;e>0&&(n*=256);)s+=this[t+--e]*n;return s},o.prototype.readUint8=o.prototype.readUInt8=function(t,e){return t>>>=0,e||B(t,1,this.length),this[t]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(t,e){return t>>>=0,e||B(t,2,this.length),this[t]|this[t+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(t,e){return t>>>=0,e||B(t,2,this.length),this[t]<<8|this[t+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(t,e){return t>>>=0,e||B(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(t,e){return t>>>=0,e||B(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},o.prototype.readBigUInt64LE=st((function(t){q(t>>>=0,"offset");const e=this[t],i=this[t+7];(void 0===e||void 0===i)&&Y(t,this.length-8);const s=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,n=this[++t]+256*this[++t]+65536*this[++t]+i*2**24;return BigInt(s)+(BigInt(n)<<BigInt(32))})),o.prototype.readBigUInt64BE=st((function(t){q(t>>>=0,"offset");const e=this[t],i=this[t+7];(void 0===e||void 0===i)&&Y(t,this.length-8);const s=e*2**24+65536*this[++t]+256*this[++t]+this[++t],n=this[++t]*2**24+65536*this[++t]+256*this[++t]+i;return(BigInt(s)<<BigInt(32))+BigInt(n)})),o.prototype.readIntLE=function(t,e,i){t>>>=0,e>>>=0,i||B(t,e,this.length);let s=this[t],n=1,r=0;for(;++r<e&&(n*=256);)s+=this[t+r]*n;return n*=128,s>=n&&(s-=_.pow(2,8*e)),s},o.prototype.readIntBE=function(t,e,i){t>>>=0,e>>>=0,i||B(t,e,this.length);let s=e,n=1,r=this[t+--s];for(;s>0&&(n*=256);)r+=this[t+--s]*n;return n*=128,r>=n&&(r-=_.pow(2,8*e)),r},o.prototype.readInt8=function(t,e){return t>>>=0,e||B(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},o.prototype.readInt16LE=function(t,e){t>>>=0,e||B(t,2,this.length);const i=this[t]|this[t+1]<<8;return 32768&i?4294901760|i:i},o.prototype.readInt16BE=function(t,e){t>>>=0,e||B(t,2,this.length);const i=this[t+1]|this[t]<<8;return 32768&i?4294901760|i:i},o.prototype.readInt32LE=function(t,e){return t>>>=0,e||B(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},o.prototype.readInt32BE=function(t,e){return t>>>=0,e||B(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},o.prototype.readBigInt64LE=st((function(t){q(t>>>=0,"offset");const e=this[t],i=this[t+7];(void 0===e||void 0===i)&&Y(t,this.length-8);const s=this[t+4]+256*this[t+5]+65536*this[t+6]+(i<<24);return(BigInt(s)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)})),o.prototype.readBigInt64BE=st((function(t){q(t>>>=0,"offset");const e=this[t],i=this[t+7];(void 0===e||void 0===i)&&Y(t,this.length-8);const s=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(s)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+i)})),o.prototype.readFloatLE=function(t,e){return t>>>=0,e||B(t,4,this.length),i.read(this,t,!0,23,4)},o.prototype.readFloatBE=function(t,e){return t>>>=0,e||B(t,4,this.length),i.read(this,t,!1,23,4)},o.prototype.readDoubleLE=function(t,e){return t>>>=0,e||B(t,8,this.length),i.read(this,t,!0,52,8)},o.prototype.readDoubleBE=function(t,e){return t>>>=0,e||B(t,8,this.length),i.read(this,t,!1,52,8)},o.prototype.writeUintLE=o.prototype.writeUIntLE=function(t,e,i,s){if(t=+t,e>>>=0,i>>>=0,!s){O(this,t,e,i,_.pow(2,8*i)-1,0)}let n=1,r=0;for(this[e]=255&t;++r<i&&(n*=256);)this[e+r]=t/n&255;return e+i},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(t,e,i,s){if(t=+t,e>>>=0,i>>>=0,!s){O(this,t,e,i,_.pow(2,8*i)-1,0)}let n=i-1,r=1;for(this[e+n]=255&t;--n>=0&&(r*=256);)this[e+n]=t/r&255;return e+i},o.prototype.writeUint8=o.prototype.writeUInt8=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,1,255,0),this[e]=255&t,e+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},o.prototype.writeBigUInt64LE=st((function(t,e){return void 0===e&&(e=0),F(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),o.prototype.writeBigUInt64BE=st((function(t,e){return void 0===e&&(e=0),V(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),o.prototype.writeIntLE=function(t,e,i,s){if(t=+t,e>>>=0,!s){const s=_.pow(2,8*i-1);O(this,t,e,i,s-1,-s)}let n=0,r=1,o=0;for(this[e]=255&t;++n<i&&(r*=256);)t<0&&0===o&&0!==this[e+n-1]&&(o=1),this[e+n]=(t/r>>0)-o&255;return e+i},o.prototype.writeIntBE=function(t,e,i,s){if(t=+t,e>>>=0,!s){const s=_.pow(2,8*i-1);O(this,t,e,i,s-1,-s)}let n=i-1,r=1,o=0;for(this[e+n]=255&t;--n>=0&&(r*=256);)t<0&&0===o&&0!==this[e+n+1]&&(o=1),this[e+n]=(t/r>>0)-o&255;return e+i},o.prototype.writeInt8=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},o.prototype.writeInt16LE=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},o.prototype.writeInt16BE=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},o.prototype.writeInt32LE=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},o.prototype.writeInt32BE=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},o.prototype.writeBigInt64LE=st((function(t,e){return void 0===e&&(e=0),F(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),o.prototype.writeBigInt64BE=st((function(t,e){return void 0===e&&(e=0),V(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),o.prototype.writeFloatLE=function(t,e,i){return U(this,t,e,!0,i)},o.prototype.writeFloatBE=function(t,e,i){return U(this,t,e,!1,i)},o.prototype.writeDoubleLE=function(t,e,i){return G(this,t,e,!0,i)},o.prototype.writeDoubleBE=function(t,e,i){return G(this,t,e,!1,i)},o.prototype.copy=function(t,e,i,s){if(!o.isBuffer(t))throw new b("argument should be a Buffer");if(i||(i=0),!s&&0!==s&&(s=this.length),e>=t.length&&(e=t.length),e||(e=0),s>0&&s<i&&(s=i),s===i||0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("Index out of range");if(s<0)throw new RangeError("sourceEnd out of bounds");s>this.length&&(s=this.length),t.length-e<s-i&&(s=t.length-e+i);const n=s-i;return this===t&&"function"==typeof j.prototype.copyWithin?this.copyWithin(e,i,s):j.prototype.set.call(t,this.subarray(i,s),e),n},o.prototype.fill=function(t,e,i,s){if("string"==typeof t){if("string"==typeof e?(s=e,e=0,i=this.length):"string"==typeof i&&(s=i,i=this.length),void 0!==s&&"string"!=typeof s)throw new b("encoding must be a string");if("string"==typeof s&&!o.isEncoding(s))throw new b("Unknown encoding: "+s);if(1===t.length){const e=t.charCodeAt(0);("utf8"===s&&e<128||"latin1"===s)&&(t=e)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<i)throw new RangeError("Out of range index");if(i<=e)return this;let n;if(e>>>=0,i=void 0===i?this.length:i>>>0,t||(t=0),"number"==typeof t)for(n=e;n<i;++n)this[n]=t;else{const r=o.isBuffer(t)?t:o.from(t,s),h=r.length;if(0===h)throw new b('The value "'+t+'" is invalid for argument "value"');for(n=0;n<i-e;++n)this[n+e]=r[n%h]}return this};const H={};function Z(t,e,i){H[t]=class extends i{get code(){return t}set code(t){w.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return"".concat(this.name," [").concat(t,"]: ").concat(this.message)}constructor(){super(),w.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name="".concat(this.name," [").concat(t,"]"),this.stack,delete this.name}}}function X(t){let e="",i=t.length;const s="-"===t[0]?1:0;for(;i>=s+4;i-=3)e="_".concat(t.slice(i-3,i)).concat(e);return"".concat(t.slice(0,i)).concat(e)}function z(t,e,i,s,n,r){if(t>i||t<e){const i="bigint"==typeof e?"n":"";let s;throw s=0===e||e===BigInt(0)?">= 0".concat(i," and < 2").concat(i," ** ").concat(8*(r+1)).concat(i):">= -(2".concat(i," ** ").concat(8*(r+1)-1).concat(i,") and < 2 ** ")+"".concat(8*(r+1)-1).concat(i),new H.ERR_OUT_OF_RANGE("value",s,t)}!function(t,e,i){q(e,"offset"),(void 0===t[e]||void 0===t[e+i])&&Y(e,t.length-(i+1))}(s,n,r)}function q(t,e){if("number"!=typeof t)throw new H.ERR_INVALID_ARG_TYPE(e,"number",t)}function Y(t,e,i){throw _.floor(t)!==t?(q(t,i),new H.ERR_OUT_OF_RANGE("offset","an integer",t)):e<0?new H.ERR_BUFFER_OUT_OF_BOUNDS:new H.ERR_OUT_OF_RANGE("offset",">= 0 and <= ".concat(e),t)}Z("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?"".concat(t," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"}),RangeError),Z("ERR_INVALID_ARG_TYPE",(function(t,e){return'The "'.concat(t,'" argument must be of type number. Received type ').concat(typeof e)}),b),Z("ERR_OUT_OF_RANGE",(function(t,e,i){let s='The value of "'.concat(t,'" is out of range.'),n=i;return Number.isInteger(i)&&_.abs(i)>2**32?n=X(String(i)):"bigint"==typeof i&&(n=String(i),(i>BigInt(2)**BigInt(32)||i<-(BigInt(2)**BigInt(32)))&&(n=X(n)),n+="n"),s+=" It must be ".concat(e,". Received ").concat(n),s}),RangeError);const K=/[^+/0-9A-Za-z-_]/g;function Q(t,e){let i;e=e||1/0;const s=t.length;let n=null;const r=[];for(let o=0;o<s;++o){if(i=t.charCodeAt(o),i>55295&&i<57344){if(!n){if(i>56319){(e-=3)>-1&&r.push(239,191,189);continue}if(o+1===s){(e-=3)>-1&&r.push(239,191,189);continue}n=i;continue}if(i<56320){(e-=3)>-1&&r.push(239,191,189),n=i;continue}i=65536+(n-55296<<10|i-56320)}else n&&(e-=3)>-1&&r.push(239,191,189);if(n=null,i<128){if((e-=1)<0)break;r.push(i)}else if(i<2048){if((e-=2)<0)break;r.push(i>>6|192,63&i|128)}else if(i<65536){if((e-=3)<0)break;r.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new g("Invalid code point");if((e-=4)<0)break;r.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return r}function J(t){return e.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(K,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function $(t,e,i,s){let n;for(n=0;n<s&&!(n+i>=e.length||n>=t.length);++n)e[n+i]=t[n];return n}function tt(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function et(t){return t!=t}const it=function(){const t="0123456789abcdef",e=new Array(256);for(let i=0;i<16;++i){const s=16*i;for(let n=0;n<16;++n)e[s+n]=t[i]+t[n]}return e}();function st(t){return typeof BigInt>"u"?nt:t}function nt(){throw new g("BigInt not supported")}})(_e),function(t,e){var i=_e,s=i.Buffer;function n(t,e){for(var i in t)e[i]=t[i]}function r(t,e,i){return s(t,e,i)}s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?t.exports=i:(n(i,e),e.Buffer=r),r.prototype=w.create(s.prototype),n(s,r),r.from=function(t,e,i){if("number"==typeof t)throw new b("Argument must not be a number");return s(t,e,i)},r.alloc=function(t,e,i){if("number"!=typeof t)throw new b("Argument must be a number");var n=s(t);return void 0!==e?"string"==typeof i?n.fill(e,i):n.fill(e):n.fill(0),n},r.allocUnsafe=function(t){if("number"!=typeof t)throw new b("Argument must be a number");return s(t)},r.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new b("Argument must be a number");return i.SlowBuffer(t)}}(fe,fe.exports);var ke=65536;var Ee=fe.exports.Buffer,xe=A.crypto||A.msCrypto;xe&&xe.getRandomValues?de.exports=function(t,e){if(t>4294967295)throw new RangeError("requested too many random bytes");var i=Ee.allocUnsafe(t);if(t>0)if(t>ke)for(var s=0;s<t;s+=ke)xe.getRandomValues(i.slice(s,s+ke));else xe.getRandomValues(i);return"function"==typeof e?process.nextTick((function(){e(null,i)})):i}:de.exports=function(){throw new g("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")};const Re=de.exports;let Ie=class t{clone(){const e=new t(this.ufrag,this.pwd);return e.setLite(this.lite),e.setEndOfCandidates(this.endOfCandidates),e}plain(){const t={ufrag:this.ufrag,pwd:this.pwd};return this.lite&&(t.lite=this.lite),this.endOfCandidates&&(t.endOfCandidates=this.endOfCandidates),t}getUfrag(){return this.ufrag}getPwd(){return this.pwd}isLite(){return this.lite}setLite(t){this.lite=t}isEndOfCandidates(){return this.endOfCandidates}setEndOfCandidates(t){this.endOfCandidates=t}constructor(t,e){this.ufrag=t,this.pwd=e,this.lite=!1,this.endOfCandidates=!1}};Ie.generate=function(t){const e=new Ie,i=Re(8),s=Re(24);return e.ufrag=i.toString("hex"),e.pwd=s.toString("hex"),e.lite=t,e},Ie.expand=function(t){if("ICEInfo"===t.constructor.name)return t;const e=new Ie(t.ufrag,t.pwd);return e.setLite(t.lite),e.setEndOfCandidates(t.endOfCandidates),e},Ie.clone=function(t){return"ICEInfo"===t.constructor.name?t.clone():Ie.expand(t)};var Ce=Ie;const Pe=ne("SEND","RECV");Pe.byValue=function(t){return Pe[t.toUpperCase()]},Pe.toString=function(t){switch(t){case Pe.SEND:return"send";case Pe.RECV:return"recv"}},Pe.reverse=function(t){switch(t){case Pe.SEND:return Pe.RECV;case Pe.RECV:return Pe.SEND}};var De=Pe;const Ne=De;let Me=class t{clone(){var e=new t(this.id,this.direction);return e.setFormats(this.formats),e.setParams(this.params),e}plain(){var t={id:this.id,direction:Ne.toString(this.direction)};for(var[e,i]of(this.formats&&(t.formats=this.formats),this.params.entries()))t.params||(t.params={}),t.params[e]=i;return t}getId(){return this.id}getDirection(){return this.direction}setDirection(t){this.direction=t}getFormats(){return this.formats}setFormats(t){this.formats=[];for(let e=0;e<t.length;++e)this.formats.push(x(t[e]))}getParams(){return this.params}setParams(t){this.params=new Map(t)}addParam(t,e){this.params.set(t,e)}constructor(t,e){this.id=t,this.direction=e,this.formats=[],this.params=new Map}};Me.expand=function(t){if("RIDInfo"===t.constructor.name)return t;const e=new Me(t.id,Ne.byValue(t.direction));for(const[i,s]of w.entries(t.params||{}))e.addParam(i,s);return t.formats&&e.setFormats(t.formats),e},Me.clone=function(t){return"RIDInfo"===t.constructor.name?t.clone():Me.expand(t)};var Le=Me;let Be=class t{clone(){return new t(this.id,this.paused)}plain(){return{id:this.id,paused:this.paused}}isPaused(){return this.paused}getId(){return this.id}constructor(t,e){this.paused=e,this.id=t}};Be.expand=function(t){return"SimulcastStreamInfo"===t.constructor.name?t:new Be(t.id,t.paused)},Be.clone=function(t){return"SimulcastStreamInfo"===t.constructor.name?t.clone():Be.expand(t)};var Oe=Be;const Fe=Oe,Ve=De;let We=class t{clone(){const e=new t;for(const t of this.send)e.addSimulcastAlternativeStreams(Ve.SEND,t.map((t=>t.clone())));for(const t of this.recv)e.addSimulcastAlternativeStreams(Ve.RECV,t.map((t=>t.clone())));return e}plain(){const t={send:[],recv:[]};for(const e of this.send)t.send.push(e.map((t=>t.plain())));for(const e of this.recv)t.recv.push(e.map((t=>t.plain())));return t}addSimulcastAlternativeStreams(t,e){return t===Ve.SEND?this.send.push(e):this.recv.push(e)}addSimulcastStream(t,e){return t===Ve.SEND?this.send.push([e]):this.recv.push([e])}getSimulcastStreams(t){return t===Ve.SEND?this.send:this.recv}constructor(){this.send=[],this.recv=[]}};We.expand=function(t){if("SimulcastInfo"===t.constructor.name)return t;const e=new We;for(const i of t.send||[])e.addSimulcastAlternativeStreams(Ve.SEND,i.map(Fe.expand));for(const i of t.recv||[])e.addSimulcastAlternativeStreams(Ve.RECV,i.map(Fe.expand));return e},We.clone=function(t){return"SimulcastInfo"===t.constructor.name?t.clone():We.expand(t)};var Ue=We;const Ge=ne("SENDRECV","SENDONLY","RECVONLY","INACTIVE");Ge.byValue=function(t){return Ge[t.toUpperCase()]},Ge.toString=function(t){switch(t){case Ge.SENDRECV:return"sendrecv";case Ge.SENDONLY:return"sendonly";case Ge.RECVONLY:return"recvonly";case Ge.INACTIVE:return"inactive"}},Ge.reverse=function(t){switch(t){case Ge.SENDRECV:return Ge.SENDRECV;case Ge.SENDONLY:return Ge.RECVONLY;case Ge.RECVONLY:return Ge.SENDONLY;case Ge.INACTIVE:return Ge.INACTIVE}};var He=Ge;let Ze=class t{clone(){return new t(this.port,this.maxMessageSize)}plain(){return{port:this.port,maxMessageSize:this.maxMessageSize}}getPort(){return this.port}getMaxMessageSize(){return this.maxMessageSize}constructor(t,e){this.port=t,this.maxMessageSize=e}};Ze.expand=function(t){return"DataChannelInfo"===t.constructor.name?t:new Ze(t.port,t.maxMessageSize)},Ze.clone=function(t){return"DataChannelInfo"===t.constructor.name?t.clone():Ze.expand(t)};var Xe=Ze;const ze=se,qe=Le,Ye=Ue,Ke=He,je=De,Qe=Xe;let Je=class t{clone(){const e=new t(this.id,this.type);e.setDirection(this.direction),e.setBitrate(this.bitrate);for(const t of this.codecs.values())e.addCodec(t.clone());for(const[t,i]of this.extensions.entries())e.addExtension(t,i);for(const t of this.rids.values())e.addRID(t.clone());return this.simulcast&&e.setSimulcast(this.simulcast.clone()),this.control&&e.setControl(this.control),this.dataChannel&&e.setDataChannel(this.dataChannel.clone()),e}plain(){const t={id:this.id,type:this.type,direction:Ke.toString(this.direction),codecs:[]};this.dataChannel&&(t.dataChannel=this.dataChannel.plain()),this.bitrate&&(t.bitrate=this.bitrate);for(const e of this.codecs.values())t.codecs.push(e.plain());for(const[e,i]of this.extensions.entries())t.extensions||(t.extensions={}),t.extensions[e]=i;for(const e of this.rids.values())t.rids||(t.rids=[]),t.rids.push(e.plain());return this.simulcast&&(t.simulcast=this.simulcast.plain()),this.control&&(t.control=this.control),t}getType(){return this.type}getId(){return this.id}setId(t){this.id=t}addExtension(t,e){this.extensions.set(t,e)}addRID(t){this.rids.set(t.getId(),t)}addCodec(t){this.codecs.set(t.getType(),t)}setCodecs(t){this.codecs=t}getCodecForType(t){return this.codecs.get(t)}getCodec(t){for(const e of this.codecs.values())if(e.getCodec().toLowerCase()===t.toLowerCase())return e;return null}hasCodec(t){return null!==this.getCodec(t)}getCodecs(){return this.codecs}hasRTX(){for(const t of this.codecs.values())if(t.hasRTX())return!0;return!1}getExtensions(){return this.extensions}getRIDs(){return this.rids}getRID(t){return this.rids.get(t)}getBitrate(){return this.bitrate}setBitrate(t){this.bitrate=t}getDirection(){return this.direction}setDirection(t){this.direction=t}hasControl(){return!!this.control}getControl(){return this.control}setControl(t){this.control=t}hasDataChannel(){return!!this.dataChannel}getDataChannel(){return this.dataChannel}setDataChannel(t){this.dataChannel=t}answer(e){const i=new t(this.id,this.type);if(e){i.setDirection(Ke.reverse(this.direction));const{codecs:t,dataChannel:s}=e;if(t){let s;s=Array.isArray(t)?ze.MapFromNames(t,e.rtx,e.rtcpfbs):t;for(let t of this.codecs.values())for(let e of s.values()){if(e.getCodec().toLowerCase()!==t.getCodec().toLowerCase()||"h264"===e.getCodec()&&e.hasParam("packetization-mode")&&e.getParam("packetization-mode")!=t.getParam("packetization-mode","0")||"h264"===e.getCodec()&&e.hasParam("profile-level-id")&&t.hasParam("profile-level-id")&&e.getParam("profile-level-id")!=t.getParam("profile-level-id")||"multiopus"===e.getCodec()&&e.hasParam("num_streams")&&t.hasParam("num_streams")&&e.getParam("num_streams")!=t.getParam("num_streams"))continue;const s=e.clone();s.setType(t.getType()),s.hasRTX()&&s.setRTX(t.getRTX()),t.hasChannels()&&s.setChannels(t.getChannels()),s.addParams(t.getParams()),i.addCodec(s);break}}const n=new Set(e.extensions);for(let[t,e]of this.extensions)n.has(e)&&i.addExtension(t,e);if(e.simulcast&&this.simulcast){const t=new Ye,e=this.simulcast.getSimulcastStreams(je.SEND);if(e)for(const i of e){const e=i.map((t=>t.clone()));t.addSimulcastAlternativeStreams(je.RECV,e)}const s=this.simulcast.getSimulcastStreams(je.RECV);if(s)for(const e of s){const i=e.map((t=>t.clone()));t.addSimulcastAlternativeStreams(je.SEND,i)}for(const t of this.rids.values()){const e=t.clone();e.setDirection(je.reverse(t.getDirection())),i.addRID(e)}i.setSimulcast(t)}if(s&&this.dataChannel){const t=new Qe(this.dataChannel.getPort(),s.maxMessageSize?s.maxMessageSize:this.dataChannel.getMaxMessageSize());i.setDataChannel(t)}}else i.setDirection(Ke.INACTIVE);return i}getSimulcast(){return this.simulcast}setSimulcast(t){this.simulcast=t}constructor(t,e){this.id=t,this.type=e,this.direction=Ke.SENDRECV,this.extensions=new Map,this.codecs=new Map,this.rids=new Map,this.simulcast=null,this.bitrate=0,this.control=null,this.dataChannel=null}};function $e(t){const e=t.toString();if(!/^\d+$/.test(e))throw new g("invalid integer ".concat(e));return x(e)}Je.create=function(t,e,i){!i&&"string"!=typeof e&&(i=e,e=t);const s=new Je(t,e);if(i){const{codecs:t}=i;t&&(Array.isArray(t)?s.setCodecs(ze.MapFromNames(t,i.rtx,i.rtcpfbs)):s.setCodecs(t))}else s.setDirection(Ke.INACTIVE);return s},Je.expand=function(t){if("MediaInfo"===t.constructor.name)return t;const e=new Je(t.id,t.type);if(t.direction&&e.setDirection(Ke.byValue(t.direction)),e.setBitrate(t.bitrate),t.dataChannel){const i=Qe.expand(t.dataChannel);i&&e.setDataChannel(i)}for(const[i,s]of w.entries(t.extensions))e.addExtension($e(i),s);for(const i of t.codecs){const t=ze.expand(i);t&&e.addCodec(t)}for(const i of t.rids||[]){const t=qe.expand(i);e.addRID(t)}return t.simulcast&&e.setSimulcast(Ye.expand(t.simulcast)),t.control&&e.setControl(t.control),e},Je.clone=function(t){return"MediaInfo"===t.constructor.name?t.clone():Je.expand(t)};var ti=Je;let ei=class t{clone(){return new t(this.semantics,this.ssrcs)}plain(){const t={semantics:this.semantics,ssrcs:[]};for(let e=0;e<this.ssrcs.length;++e)t.ssrcs.push(this.ssrcs[e]);return t}getSemantics(){return this.semantics}getSSRCs(){return this.ssrcs}constructor(t,e){this.semantics=t,this.ssrcs=[];for(let t=0;t<e.length;++t)this.ssrcs.push(x(e[t]))}};ei.expand=function(t){return"SourceGroupInfo"===t.constructor.name?t:new ei(t.semantics,t.ssrcs)},ei.clone=function(t){return"SourceGroupInfo"===t.constructor.name?t.clone():ei.expand(t)};var ii=ei;let si=class t{clone(){const e=new t(this.ssrc);return e.setCName(this.cname),e.setStreamId(this.streamId),e.setTrackId(this.trackId),e}plain(){const t={ssrc:this.ssrc};return this.cname&&(t.cname=this.cname),this.streamId&&(t.streamId=this.streamId),this.trackId&&(t.trackId=this.trackId),t}getCName(){return this.cname}setCName(t){this.cname=t}getStreamId(){return this.streamId}setStreamId(t){this.streamId=t}getTrackId(){return this.trackId}setTrackId(t){this.trackId=t}getSSRC(){return this.ssrc}constructor(t){this.ssrc=t}};si.expand=function(t){if("SourceInfo"===t.constructor.name)return t;const e=new si(t.ssrc);return e.setCName(t.cname),e.setStreamId(t.streamId),e.setTrackId(t.trackId),e},si.clone=function(t){return"SourceInfo"===t.constructor.name?t.clone():si.expand(t)};var ni=si;const ri=se;let oi=class t{clone(){var e=new t(this.id,this.paused);for(let t of this.codecs.values())e.addCodec(t.clone());return e.setParams(this.params),e}plain(){var t={id:this.id,paused:this.paused,codecs:{},params:{}};for(var[e,i]of this.codecs.entries())t.codecs[e]=i.plain();for(var[e,s]of this.params.entries())t.params[e]=s;return t}getId(){return this.id}getCodecs(){return this.codecs}addCodec(t){this.codecs.set(t.getType(),t)}getParams(){return this.params}setParams(t){this.params=new Map(t)}addParam(t,e){this.params.set(t,e)}isPaused(){return this.paused}constructor(t,e=!1){this.id=t,this.paused=e,this.codecs=new Map,this.params=new Map}};oi.expand=function(t){if("TrackEncodingInfo"===t.constructor.name)return t;const e=new oi(t.id,t.paused);for(const i of w.values(t.codecs||{}))e.addCodec(ri.expand(i));for(const[i,s]of w.entries(t.params||{}))e.addParam(i,s);return e},oi.clone=function(t){return"TrackEncodingInfo"===t.constructor.name?t.clone():oi.expand(t)};var hi=oi;const ai=ii,ui=hi;let ci=class t{clone(){const e=new t(this.media,this.id);this.mediaId&&e.setMediaId(this.mediaId);for(let t=0;t<this.ssrcs.length;++t)e.addSSRC(this.ssrcs[t]);for(let t=0;t<this.groups.length;++t)e.addSourceGroup(this.groups[t].clone());for(let t=0;t<this.encodings.length;++t){const i=[];for(let e=0;e<this.encodings[t].length;++e)i.push(this.encodings[t][e].clone());e.addAlternativeEncodings(i)}return e}plain(){const t={media:this.media,id:this.id,ssrcs:[]};this.mediaId&&(t.mediaId=this.mediaId);for(let e=0;e<this.ssrcs.length;++e)t.ssrcs.push(this.ssrcs[e]);for(let e=0;e<this.groups.length;++e)t.groups||(t.groups=[]),t.groups.push(this.groups[e].plain());for(let e=0;e<this.encodings.length;++e){const i=[];for(let t=0;t<this.encodings[e].length;++t)i.push(this.encodings[e][t].plain());i.length&&(t.encodings||(t.encodings=[]),t.encodings.push(i))}return t}getMedia(){return this.media}setMediaId(t){this.mediaId=t}getMediaId(){return this.mediaId}getId(){return this.id}addSSRC(t){this.ssrcs.push(t)}getSSRCs(){return this.ssrcs}addSourceGroup(t){this.groups.push(t)}getSourceGroup(t){for(const e of this.groups)if(e.getSemantics().toLowerCase()===t.toLowerCase())return e;return null}getSourceGroups(){return this.groups}getSourceGroupsForMediaSSRC(t){return this.groups.filter((e=>e.getSSRCs()[0]===t))}hasSourceGroup(t){for(const e of this.groups)if(e.getSemantics().toLowerCase()===t.toLowerCase())return!0;return!1}getEncodings(){return this.encodings}addEncoding(t){this.encodings.push([t])}addAlternativeEncodings(t){this.encodings.push(t)}setEncodings(t){this.encodings=t}getEncodingSources(){const t=[];if(this.encodings.length)for(const e of this.encodings)for(const i of e){const e={id:i.getId(),rid:i.getId()},s=i.getParams(),n=null==s?void 0:s.get("ssrc");if(void 0!==n){e.media=x(n);for(const t of this.getSourceGroupsForMediaSSRC(e.media))switch(t.getSemantics()){case"FID":e.rtx=t.getSSRCs()[1];break;case"FEC-FR":e.fec=t.getSSRCs()[1]}}t.push(e)}else if(this.hasSourceGroup("SIM")){const e=this.getSourceGroup("SIM").getSSRCs();this.getSourceGroups();for(const i of e){const e={id:String(i),media:i};for(const t of this.getSourceGroupsForMediaSSRC(e.media))switch(t.getSemantics()){case"FID":e.rtx=t.getSSRCs()[1];break;case"FEC-FR":e.fec=t.getSSRCs()[1]}t.push(e)}}else{const e={id:""};if(this.ssrcs.length){e.media=this.ssrcs[0];for(const t of this.getSourceGroupsForMediaSSRC(e.media))switch(t.getSemantics()){case"FID":e.rtx=t.getSSRCs()[1];break;case"FEC-FR":e.fec=t.getSSRCs()[1]}}t.push(e)}return t}constructor(t,e){this.media=t,this.id=e,this.ssrcs=[],this.groups=[],this.encodings=[]}};ci.expand=function(t){var e,i;if("TrackInfo"===t.constructor.name)return t;const s=new ci(t.media,t.id);if(t.mediaId&&s.setMediaId(t.mediaId),Array.isArray(t.ssrcs))for(const e of t.ssrcs)s.addSSRC(e);else if(void 0!==(null===(e=t.ssrcs)||void 0===e?void 0:e.media)){const e=t.ssrcs.media;if(s.addSSRC(e),void 0!==t.ssrcs.rtx){const i=t.ssrcs.rtx;s.addSSRC(i),s.addSourceGroup(new ai("FID",[e,i]))}if(void 0!==t.ssrcs.fec){const i=t.ssrcs.fec;s.addSSRC(i),s.addSourceGroup(new ai("FEC-FR",[e,i]))}}if(t.rid){const e=new ui(t.rid);void 0!==(null===(i=t.ssrcs)||void 0===i?void 0:i.media)&&e.addParam("ssrc",t.ssrcs.media),s.addAlternativeEncodings([e])}for(const e of t.groups||[])s.addSourceGroup(ai.expand(e));for(const e of t.encodings||[]){const t=[];for(const i of e)t.push(ui.expand(i));s.addAlternativeEncodings(t)}return s},ci.clone=function(t){return"TrackInfo"===t.constructor.name?t.clone():ci.expand(t)};var li=ci;const di=li;let fi=class t{clone(){const e=new t(this.id);for(const t of this.tracks.values())e.addTrack(t.clone());return e}plain(){const t={id:this.id,tracks:[]};for(const e of this.tracks.values())t.tracks.push(e.plain());return t}getId(){return this.id}addTrack(t){this.tracks.set(t.getId(),t)}removeTrack(t){return this.tracks.delete(t.getId())}removeTrackById(t){return this.tracks.delete(t)}getFirstTrack(t){for(let e of this.tracks.values())if(e.getMedia().toLowerCase()===t.toLowerCase())return e;return null}getTracks(){return this.tracks}removeAllTracks(){this.tracks.clear()}getTrack(t){return this.tracks.get(t)}constructor(t){this.id=t,this.tracks=new Map}};fi.expand=function(t){if("StreamInfo"===t.constructor.name)return t;const e=new fi(t.id);for(const i of t.tracks||[]){const t=di.expand(i);t&&e.addTrack(t)}return e},fi.clone=function(t){return"StreamInfo"===t.constructor.name?t.clone():fi.expand(t)};var _i=fi;const vi=Ft,mi=function(t){const e=new Intl.Collator(t,{sensitivity:"base"});return(t,i)=>0==e.compare(t,i)}("en-US"),gi=Jt,pi=se,wi=te,yi=ue,bi=le,Ai=Ce,Si=ti,Ti=oe,ki=He,Ei=De,xi=ii,Ri=ni,Ii=_i,Ci=li,Pi=hi,Di=Ue,Ni=Oe,Mi=Le,Li=Xe;let Bi=class t{clone(){const e=new t(this.version);for(const t of this.medias)e.addMedia(t.clone());for(const t of this.streams.values())e.addStream(t.clone());for(const t of this.candidates)e.addCandidate(t.clone());return e.setICE(this.ice.clone()),this.dtls&&e.setDTLS(this.dtls.clone()),this.crypto&&e.setCrypto(this.crypto.clone()),e.setExtmapAllowMixed(this.extmapAllowMixed),e}plain(){const t={version:this.version,streams:[],medias:[],candidates:[]};for(const e of this.medias)t.medias.push(e.plain());for(const e of this.streams.values())t.streams.push(e.plain());for(const e of this.candidates)t.candidates.push(e.plain());return this.ice&&(t.ice=this.ice.plain()),this.dtls&&(t.dtls=this.dtls.plain()),this.crypto&&(t.crypto=this.crypto.plain()),this.extmapAllowMixed||(t.extmapAllowMixedNotSupported=!this.extmapAllowMixed),t}unify(){const e=new t(this.version);for(const t of this.medias)e.addMedia(t.clone());const i={audio:e.getMediasByType("audio"),video:e.getMediasByType("video")};for(const t of this.streams.values()){const s=t.clone();for(const t of s.getTracks().values()){let s=i[t.getMedia()].pop();s||(s=this.getMedia(t.getMedia()).clone(),s.setId(t.getId()),e.addMedia(s)),t.setMediaId(s.getId())}e.addStream(s)}for(const t of this.candidates)e.addCandidate(t.clone());return this.ice&&e.setICE(this.ice.clone()),this.dtls&&e.setDTLS(this.dtls.clone()),this.crypto&&e.setCrypto(this.crypto.clone()),e}setVersion(t){this.version=t}addMedia(t){this.medias.push(t)}getMedia(t){for(let e in this.medias){let i=this.medias[e];if(mi(i.getType(),t))return i}return null}getMediasByType(t){let e=[];for(let i in this.medias){let s=this.medias[i];mi(s.getType(),t)&&e.push(s)}return e}getMediaById(t){for(const e of this.medias)if(mi(e.getId(),t))return e;return null}replaceMedia(t){for(let e in this.medias)if(this.medias[e].getId()==t.getId())return this.medias[e]=t,!0;return!1}getMedias(){return this.medias}getVersion(){return this.version}getDTLS(){return this.dtls}setDTLS(t){this.dtls=t}hasCrypto(){return!!this.crypto}getCrypto(){return this.crypto}setCrypto(t){this.crypto=t}hasICE(){return!!this.ice}getICE(){return this.ice}setICE(t){this.ice=t}addCandidate(t){for(const e of this.candidates)if(e.equals(t))return;this.candidates.push(t)}addCandidates(t){for(const e of t)this.addCandidate(e)}getCandidates(){return this.candidates}getStream(t){return this.streams.get(t)}getStreams(){return this.streams}getFirstStream(){for(const t of this.streams.values())return t;return null}addStream(t){this.streams.set(t.getId(),t)}removeStream(t){return this.streams.delete(t.getId())}removeAllStreams(){this.streams.clear()}getTracksByMediaType(t){let e=[];for(const i of this.streams.values())for(const[s,n]of i.getTracks())mi(n.getMedia(),t)&&e.push(n);return e}getTrackByMediaId(t){for(const e of this.streams.values())for(const[i,s]of e.getTracks())if(s.getMediaId()==t)return s;return null}getStreamByMediaId(t){for(const e of this.streams.values())for(const[i,s]of e.getTracks())if(s.getMediaId()==t)return e;return null}getExtmapAllowMixed(){return this.extmapAllowMixed}setExtmapAllowMixed(t){this.extmapAllowMixed=t}answer(e){const i=new t;e.ice&&(e.ice instanceof Ai?i.setICE(e.ice.clone()):i.setICE(Ai.expand(e.ice))),e.dtls&&(e.dtls instanceof yi?i.setDTLS(e.dtls):i.setDTLS(yi.expand(e.dtls))),e.crypto&&(e.crypto instanceof bi?i.setCrypto(e.crypto):i.setCrypto(bi.expand(e.crypto)));for(let t=0;e.candidates&&t<e.candidates.length;++t)e.candidates[t]instanceof gi?i.addCandidate(e.candidates[t].clone()):i.addCandidate(gi.expand(e.candidates[t]));for(const t of this.medias){const s=e&&e.capabilities&&e.capabilities[t.getType()];i.addMedia(t.answer(s))}return i.setExtmapAllowMixed(this.extmapAllowMixed),i}toString(){let t={version:0,media:[]};t.version=0,t.origin={username:"-",sessionId:(new Date).getTime(),sessionVersion:this.version,netType:"IN",ipVer:4,address:"127.0.0.1"},t.name="semantic-sdp",t.connection={version:4,ip:"0.0.0.0"},t.timing={start:0,stop:0},this.hasICE()&&this.getICE().isLite()&&(t.icelite="ice-lite"),t.msidSemantic={semantic:"WMS",token:"*"},t.groups=[],this.extmapAllowMixed&&(t.extmapAllowMixed="extmap-allow-mixed");const e=[];for(const i of this.medias){let s={type:i.getType(),port:9,protocol:"",fmtp:[],rtp:[],rtcpFb:[],ext:[],bandwidth:[],candidates:[],ssrcGroups:[],ssrcs:[],rids:[]};s.direction=ki.toString(i.getDirection()),this.extmapAllowMixed&&(s.extmapAllowMixed="extmap-allow-mixed"),s.mid=i.getId(),e.push(i.getId()),i.hasControl()&&(s.control=i.getControl()),i.getBitrate()>0&&(s.bandwidth.push({type:"AS",limit:i.getBitrate()}),s.bandwidth.push({type:"TIAS",limit:1e3*i.getBitrate()}));let n=this.getCandidates();for(const t of n)s.candidates.push({foundation:t.getFoundation(),component:t.getComponentId(),transport:t.getTransport(),priority:t.getPriority(),ip:t.getAddress(),port:t.getPort(),type:t.getType(),raddr:t.getRelAddr(),rport:t.getRelPort()});if(this.getICE()&&(s.iceUfrag=this.getICE().getUfrag(),s.icePwd=this.getICE().getPwd()),mi("audio",i.getType())||mi("video",i.getType())){s.rtcpMux="rtcp-mux",s.rtcpRsize="rtcp-rsize",this.getDTLS()?(s.protocol="UDP/TLS/RTP/SAVPF",s.fingerprint={type:this.getDTLS().getHash(),hash:this.getDTLS().getFingerprint()},s.setup=Ti.toString(this.getDTLS().getSetup())):this.getCrypto()?(s.protocol="RTP/SAVPF",s.crypto=[{id:this.getCrypto().getTag(),suite:this.getCrypto().getSuite(),config:this.getCrypto().getKeyParams()}]):s.protocol="RTP/AVP";for(const t of i.getCodecs().values()){mi("video",i.getType())?s.rtp.push({payload:t.getType(),codec:t.getCodec().toUpperCase(),rate:9e4}):mi("opus",t.getCodec())||mi("multiopus",t.getCodec())?s.rtp.push({payload:t.getType(),codec:t.getCodec(),rate:48e3,encoding:t.getChannels()}):s.rtp.push({payload:t.getType(),codec:t.getCodec(),rate:8e3});for(const e of t.getRTCPFeedbacks())s.rtcpFb.push({payload:t.getType(),type:e.getId(),subtype:e.getParams().join(" ")});t.hasRTX()&&(s.rtp.push({payload:t.getRTX(),codec:"rtx",rate:9e4}),s.fmtp.push({payload:t.getRTX(),config:"apt="+t.getType()}));const e=t.getParams();if(w.keys(e).length){const i={payload:t.getType(),config:""};for(const t in e)i.config.length&&(i.config+=";"),w.hasOwnProperty.call(e,t)?i.config+=t+"="+e[t]:i.config+=t;s.fmtp.push(i)}}const t=[];for(const e of s.rtp)t.push(e.payload);s.payloads=t.join(" ");for(let[t,e]of i.getExtensions().entries())s.ext.push({value:t,uri:e});for(let t of i.getRIDs().values()){let e={id:t.getId(),direction:Ei.toString(t.getDirection()),params:""};t.getFormats().length&&(e.params="pt="+t.getFormats().join(","));for(let[i,s]of t.getParams().entries())e.params+=(e.params.length?";":"")+i+"="+s;s.rids.push(e)}const e=i.getSimulcast();if(e){let t=1;s.simulcast={};const i=e.getSimulcastStreams(Ei.SEND),n=e.getSimulcastStreams(Ei.RECV);if(i&&i.length){let e="";for(const t of i){let i="";for(const e of t)i+=(i.length?",":"")+(e.isPaused()?"~":"")+e.getId();e+=(e.length?";":"")+i}s.simulcast["dir"+t]="send",s.simulcast["list"+t]=e,t++}if(n&&n.length){let e="";for(const t of n){let i="";for(const e of t)i+=(i.length?",":"")+(e.isPaused()?"~":"")+e.getId();e+=(e.length?";":"")+i}s.simulcast["dir"+t]="recv",s.simulcast["list"+t]=e,t++}}}else if(i.hasDataChannel()){s.protocol="UDP/DTLS/SCTP",s.payloads="webrtc-datachannel";const t=i.getDataChannel();s.sctpPort=t.getPort(),s.maxMessageSize=t.getMaxMessageSize()}t.media.push(s)}for(let e of this.streams.values())for(let i of e.getTracks().values())for(let s in t.media){let n=t.media[s];if(i.getMediaId()){if(i.getMediaId()==n.mid){let t=i.getSourceGroups();for(let e in t){let i=t[e];n.ssrcGroups.push({semantics:i.getSemantics(),ssrcs:i.getSSRCs().join(" ")})}let s=i.getSSRCs();for(let t in s)n.ssrcs.push({id:s[t],attribute:"cname",value:e.getId()}),n.ssrcs.push({id:s[t],attribute:"msid",value:e.getId()+" "+i.getId()});n.msid=e.getId()+" "+i.getId();break}}else if(mi(n.type,i.getMedia())){let t=i.getSourceGroups();for(let e in t){let i=t[e];n.ssrcGroups.push({semantics:i.getSemantics(),ssrcs:i.getSSRCs().join(" ")})}let s=i.getSSRCs();for(let t in s)n.ssrcs.push({id:s[t],attribute:"cname",value:e.getId()}),n.ssrcs.push({id:s[t],attribute:"msid",value:e.getId()+" "+i.getId()});break}}const i={type:"BUNDLE",mids:e.join(" ")};return t.groups.push(i),vi.write(t)}toIceFragmentString(){let t={version:0,media:[],candidates:[]};this.hasICE()&&this.getICE().isLite()&&(t.icelite="ice-lite"),this.getICE()&&(t.iceUfrag=this.getICE().getUfrag(),t.icePwd=this.getICE().getPwd());for(const e of this.getCandidates())t.candidates.push({foundation:e.getFoundation(),component:e.getComponentId(),transport:e.getTransport(),priority:e.getPriority(),ip:e.getAddress(),port:e.getPort(),type:e.getType(),raddr:e.getRelAddr(),rport:e.getRelPort()});return vi.write(t).slice(10)}constructor(t){this.version=t||1,this.streams=new Map,this.medias=new Array,this.candidates=new Array,this.ice=null,this.dtls=null,this.crypto=null,this.extmapAllowMixed=!0}};Bi.create=function(t){var e;const i=new Bi;if(t.streams)for(const e of t.streams)i.addStream(Ii.expand(e));t.ice&&(t.ice instanceof Ai?i.setICE(t.ice.clone()):i.setICE(Ai.expand(t.ice))),t.dtls&&(t.dtls instanceof yi?i.setDTLS(t.dtls):i.setDTLS(yi.expand(t.dtls))),t.crypto&&(t.crypto instanceof bi?i.setCrypto(t.crypto):i.setCrypto(bi.expand(t.crypto)));for(const e of t.candidates||[])e instanceof gi?i.addCandidate(e.clone()):i.addCandidate(gi.expand(e));let s=96,n=1,r=0;for(const[o,h]of w.entries(t.capabilities||{}))if(t.unified&&null!==(e=t.streams)&&void 0!==e&&e.length)for(const t of i.getTracksByMediaType(o)){const e=Si.create(t.getMediaId(),o,h);for(const[t,i]of e.getCodecs())i.getType()>=96&&i.setType(s++),i.getRTX()&&i.setRTX(s++);if(h.extensions)for(let t of h.extensions)15===n&&n++,e.addExtension(n++,t);i.addMedia(e)}else{const e=Si.create(t.unified?String(r++):o,o,h);for(const[t,i]of e.getCodecs())i.getType()>=96&&i.setType(s++),i.getRTX()&&i.setRTX(s++);if(h.extensions)for(let t of h.extensions)15===n&&n++,e.addExtension(n++,t);i.addMedia(e)}return i},Bi.expand=function(t){if("SDPInfo"===t.constructor.name)return t;const e=new Bi(t.version);for(const i of t.medias||[]){const t=Si.expand(i);t&&e.addMedia(t)}for(const i of t.streams||[]){const t=Ii.expand(i);t&&e.addStream(t)}for(const i of t.candidates||[]){const t=gi.expand(i);t&&e.addCandidate(t)}return t.ice&&e.setICE(Ai.expand(t.ice)),t.dtls&&e.setDTLS(yi.expand(t.dtls)),t.crypto&&e.setCrypto(bi.expand(t.crypto)),t.extmapAllowMixedNotSupported&&(this.extmapAllowMixed=!t.extmapAllowMixedNotSupported),e},Bi.clone=function(t){return"SDPInfo"===t.constructor.name?t.clone():Bi.expand(t)},Bi.process=function(t){return Bi.parse(t)},Bi.parse=function(t){const e=vi.parse(t),i=new Bi;if(i.setVersion(e.version),e.iceUfrag&&e.icePwd){const t=String(e.iceUfrag),s=String(e.icePwd),n=new Ai(t,s);n.setLite("ice-lite"==e.icelite),n.setEndOfCandidates("end-of-candidates"==e.endOfCandidates),i.setICE(n)}for(let t in e.media){const s=e.media[t],n=s.type,r=s.mid?s.mid.toString():t,o=new Si(r,n);if(s.iceUfrag&&s.icePwd){const t=String(s.iceUfrag),n=String(s.icePwd),r=new Ai(t,n);r.setLite("ice-lite"==e.icelite),r.setEndOfCandidates("end-of-candidates"==s.endOfCandidates),i.setICE(r)}for(let t=0;s.candidates&&t<s.candidates.length;++t){const e=s.candidates[t],n=new gi(e.foundation,e.component,e.transport,e.priority,e.ip,e.port,e.type,e.raddr,e.rport);i.addCandidate(n)}const h=s.fingerprint||e.fingerprint;if(h){const t=h.type,e=h.hash;let n=Ti.ACTPASS;s.setup&&(n=Ti.byValue(s.setup)),i.setDTLS(new yi(n,t,e))}if(s.crypto){const t=s.crypto[0];i.setCrypto(new bi(t.id,t.suite,t.config,t.sessionConfig))}let a=ki.SENDRECV;s.direction&&(a=ki.byValue(s.direction),o.setDirection(a)),s.control&&o.setControl(s.control),i.setExtmapAllowMixed("extmap-allow-mixed"==s.extmapAllowMixed||"extmap-allow-mixed"==e.extmapAllowMixed);const u=new Map;for(let t in s.rtp){const e=s.rtp[t],i=e.payload,n=e.codec;if("RED"===n.toUpperCase()||"ULPFEC"===n.toUpperCase())continue;let r={};for(let t in s.fmtp){const e=s.fmtp[t];if(e.payload===i){const t=e.config.split(";");for(let e in t){const i=t[e].split("="),s=i[0].trim(),n=i.splice(1).join("=").trim();r[s]=n}}}if("RTX"===n.toUpperCase())u.set(x(r.apt),i);else{const t=new pi(n,i,r);e.encoding>1&&t.setChannels(e.encoding),o.addCodec(t)}}for(let t of u.entries()){const e=o.getCodecForType(t[0]);e&&e.setRTX(t[1])}for(let t=0;s.rtcpFb&&t<s.rtcpFb.length;++t){const e=o.getCodecForType(s.rtcpFb[t].payload);if(e){const i=s.rtcpFb[t].type,n=s.rtcpFb[t].subtype?s.rtcpFb[t].subtype.split(" "):null;e.addRTCPFeedback(new wi(i,n))}}const c=s.ext;for(let t in c){const e=c[t];o.addExtension(e.value,e.uri)}const l=s.rids;for(let t in l){const e=l[t],i=new Mi(e.id,Ei.byValue(e.direction));let s=[];const n=new Map;if(e.params){const t=vi.parseParams(e.params);for(let e in t)"pt"===e?s=t[e].split(","):n.set(e,t[e]);i.setFormats(s),i.setParams(n)}o.addRID(i)}const d=[];if(s.simulcast){const t=new Di;if(s.simulcast.dir1){const e=Ei.byValue(s.simulcast.dir1),i=vi.parseSimulcastStreamList(s.simulcast.list1);for(let s=0;s<i.length;++s){const n=[];for(let t=0;t<i[s].length;++t)n.push(new Ni(i[s][t].scid,i[s][t].paused));t.addSimulcastAlternativeStreams(e,n)}}if(s.simulcast.dir2){const e=Ei.byValue(s.simulcast.dir2),i=vi.parseSimulcastStreamList(s.simulcast.list2);for(let s=0;s<i.length;++s){const n=[];for(let t=0;t<i[s].length;++t)n.push(new Ni(i[s][t].scid,i[s][t].paused));t.addSimulcastAlternativeStreams(e,n)}}for(let e of t.getSimulcastStreams(Ei.SEND)){const t=[];for(let i=0;i<e.length;i++){const s=new Pi(e[i].getId(),e[i].isPaused()),n=o.getRID(s.getId());if(n){const e=n.getFormats();for(let t=0;e&&t<e.length;++t){const i=o.getCodecForType(e[t]);i&&s.addCodec(i)}s.setParams(n.getParams()),t.push(s)}}t.length&&d.push(t)}o.setSimulcast(t)}const f=new Map;if(s.ssrcs)for(let t in s.ssrcs){let e=s.ssrcs[t],o=e.id,h=e.attribute,a=e.value,u=f.get(o);if(u||(u=new Ri(o),f.set(u.getSSRC(),u)),mi("cname",h))u.setCName(a);else if(mi("msid",h)){let t=a.split(" "),e=t[0],s=t[1];u.setStreamId(e),u.setTrackId(s);let h=i.getStream(e);h||(h=new Ii(e),i.addStream(h));let c=h.getTrack(s);c||(c=new Ci(n,s),c.setMediaId(r),c.setEncodings(d),h.addTrack(c)),c.addSSRC(o)}}if(s.msid){let t=s.msid.split(" "),e=t[0],o=t[1],h=i.getStream(e);h||(h=new Ii(e),i.addStream(h));let a=h.getTrack(o);a||(a=new Ci(n,o),a.setMediaId(r),a.setEncodings(d),h.addTrack(a));for(let[t,i]of f.entries())i.getStreamId()||(i.setStreamId(e),i.setTrackId(o),a.addSSRC(t))}for(let[t,e]of f.entries())if(!e.getStreamId()){let s=e.getCName(),o=r;e.setStreamId(s),e.setTrackId(o);let h=i.getStream(s);h||(h=new Ii(s),i.addStream(h));let a=h.getTrack(o);a||(a=new Ci(n,o),a.setMediaId(r),a.setEncodings(d),h.addTrack(a)),a.addSSRC(t)}if(s.ssrcGroups)for(let t in s.ssrcGroups){let e=s.ssrcGroups[t],n=e.ssrcs.split(" "),r=new xi(e.semantics,n),o=f.get(x(n[0]));o&&i.getStream(o.getStreamId()).getTrack(o.getTrackId()).addSourceGroup(r)}if("application"==s.type&&"webrtc-datachannel"==s.payloads){const t=new Li(s.sctpPort,s.maxMessageSize);o.setDataChannel(t)}i.addMedia(o)}return i};var Oi=Bi;w.defineProperty(Ot,"__esModule",{value:!0});var Fi=Ot.SDPInfo=Oi;Ot.CandidateInfo=Jt,Ot.CodecInfo=se,Ot.DTLSInfo=ue,Ot.CryptoInfo=le,Ot.ICEInfo=Ce;var Vi=Ot.MediaInfo=ti;Ot.Setup=oe,Ot.SourceGroupInfo=ii,Ot.SourceInfo=ni,Ot.StreamInfo=_i,Ot.TrackInfo=li,Ot.RTCPFeedbackInfo=te,Ot.TrackEncodingInfo=hi,Ot.RIDInfo=Le,Ot.SimulcastInfo=Ue,Ot.SimulcastStreamInfo=Oe,Ot.DataChannelInfo=Xe;var Wi=Ot.Direction=He,Ui={exports:{}};!function(t,e){!function(i,s){var n="function",r="undefined",o="object",h="string",a="major",u="model",c="name",l="type",d="vendor",f="version",_="architecture",v="console",m="mobile",g="tablet",p="smarttv",w="wearable",y="embedded",b="Amazon",A="Apple",S="ASUS",T="BlackBerry",k="Browser",E="Chrome",x="Firefox",R="Google",I="Huawei",C="LG",P="Microsoft",D="Motorola",N="Opera",M="Samsung",L="Sharp",B="Sony",O="Xiaomi",F="Zebra",V="Facebook",W="Chromium OS",U="Mac OS",G=" Browser",H=function(t){for(var e={},i=0;i<t.length;i++)e[t[i].toUpperCase()]=t[i];return e},Z=function(t,e){return typeof t===h&&-1!==X(e).indexOf(X(t))},X=function(t){return t.toLowerCase()},z=function(t,e){if(typeof t===h)return t=t.replace(/^\s\s*/,""),typeof e===r?t:t.substring(0,500)},q=function(t,e){for(var i,r,h,a,u,c,l=0;l<e.length&&!u;){var d=e[l],f=e[l+1];for(i=r=0;i<d.length&&!u&&d[i];)if(u=d[i++].exec(t))for(h=0;h<f.length;h++)c=u[++r],typeof(a=f[h])===o&&a.length>0?2===a.length?typeof a[1]==n?this[a[0]]=a[1].call(this,c):this[a[0]]=a[1]:3===a.length?typeof a[1]!==n||a[1].exec&&a[1].test?this[a[0]]=c?c.replace(a[1],a[2]):s:this[a[0]]=c?a[1].call(this,c,a[2]):s:4===a.length&&(this[a[0]]=c?a[3].call(this,c.replace(a[1],a[2])):s):this[a]=c||s;l+=2}},Y=function(t,e){for(var i in e)if(typeof e[i]===o&&e[i].length>0){for(var n=0;n<e[i].length;n++)if(Z(e[i][n],t))return"?"===i?s:i}else if(Z(e[i],t))return"?"===i?s:i;return e.hasOwnProperty("*")?e["*"]:t},K={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},j={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[f,[c,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[f,[c,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[c,f],[/opios[\/ ]+([\w\.]+)/i],[f,[c,N+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[f,[c,N+" GX"]],[/\bopr\/([\w\.]+)/i],[f,[c,N]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[f,[c,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[c,f],[/quark(?:pc)?\/([-\w\.]+)/i],[f,[c,"Quark"]],[/\bddg\/([\w\.]+)/i],[f,[c,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[f,[c,"UC"+k]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[f,[c,"WeChat"]],[/konqueror\/([\w\.]+)/i],[f,[c,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[f,[c,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[f,[c,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[f,[c,"Smart Lenovo "+k]],[/(avast|avg)\/([\w\.]+)/i],[[c,/(.+)/,"$1 Secure "+k],f],[/\bfocus\/([\w\.]+)/i],[f,[c,x+" Focus"]],[/\bopt\/([\w\.]+)/i],[f,[c,N+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[f,[c,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[f,[c,"Dolphin"]],[/coast\/([\w\.]+)/i],[f,[c,N+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[f,[c,"MIUI "+k]],[/fxios\/([-\w\.]+)/i],[f,[c,x]],[/\bqihu|(qi?ho?o?|360)browser/i],[[c,"360"+G]],[/\b(qq)\/([\w\.]+)/i],[[c,/(.+)/,"$1Browser"],f],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[c,/(.+)/,"$1"+G],f],[/samsungbrowser\/([\w\.]+)/i],[f,[c,M+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[c,/_/g," "],f],[/metasr[\/ ]?([\d\.]+)/i],[f,[c,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[c,"Sogou Mobile"],f],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[c,f],[/(lbbrowser|rekonq)/i,/\[(linkedin)app\]/i],[c],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[c,V],f],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[c,f],[/\bgsa\/([\w\.]+) .*safari\//i],[f,[c,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[f,[c,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[f,[c,E+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[c,E+" WebView"],f],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[f,[c,"Android "+k]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[c,f],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[f,[c,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[f,c],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[c,[f,Y,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[c,f],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[c,"Netscape"],f],[/(wolvic)\/([\w\.]+)/i],[c,f],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[f,[c,x+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[c,[f,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[c,[f,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[_,"amd64"]],[/(ia32(?=;))/i],[[_,X]],[/((?:i[346]|x)86)[;\)]/i],[[_,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[_,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[_,"armhf"]],[/windows (ce|mobile); ppc;/i],[[_,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[_,/ower/,"",X]],[/(sun4\w)[;\)]/i],[[_,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[_,X]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[u,[d,M],[l,g]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr])[-\w]+)/i,/sec-(sgh\w+)/i],[u,[d,M],[l,m]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[u,[d,A],[l,m]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[u,[d,A],[l,g]],[/(macintosh);/i],[u,[d,A]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[u,[d,L],[l,m]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[u,[d,I],[l,g]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[u,[d,I],[l,m]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i],[[u,/_/g," "],[d,O],[l,m]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[u,/_/g," "],[d,O],[l,g]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[u,[d,"OPPO"],[l,m]],[/\b(opd2\d{3}a?) bui/i],[u,[d,"OPPO"],[l,g]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[u,[d,"Vivo"],[l,m]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[u,[d,"Realme"],[l,m]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[u,[d,D],[l,m]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[u,[d,D],[l,g]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[u,[d,C],[l,g]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[u,[d,C],[l,m]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[u,[d,"Lenovo"],[l,g]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[u,/_/g," "],[d,"Nokia"],[l,m]],[/(pixel c)\b/i],[u,[d,R],[l,g]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[u,[d,R],[l,m]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[u,[d,B],[l,m]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[u,"Xperia Tablet"],[d,B],[l,g]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[u,[d,"OnePlus"],[l,m]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[u,[d,b],[l,g]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[u,/(.+)/g,"Fire Phone $1"],[d,b],[l,m]],[/(playbook);[-\w\),; ]+(rim)/i],[u,d,[l,g]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[u,[d,T],[l,m]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[u,[d,S],[l,g]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[u,[d,S],[l,m]],[/(nexus 9)/i],[u,[d,"HTC"],[l,g]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[d,[u,/_/g," "],[l,m]],[/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])\w*(\)| bui)/i],[u,[d,"TCL"],[l,g]],[/(itel) ((\w+))/i],[[d,X],u,[l,Y,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[u,[d,"Acer"],[l,g]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[u,[d,"Meizu"],[l,m]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[u,[d,"Ulefone"],[l,m]],[/droid.+; (a(?:015|06[35]|142p?))/i],[u,[d,"Nothing"],[l,m]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[d,u,[l,m]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[d,u,[l,g]],[/(surface duo)/i],[u,[d,P],[l,g]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[u,[d,"Fairphone"],[l,m]],[/(u304aa)/i],[u,[d,"AT&T"],[l,m]],[/\bsie-(\w*)/i],[u,[d,"Siemens"],[l,m]],[/\b(rct\w+) b/i],[u,[d,"RCA"],[l,g]],[/\b(venue[\d ]{2,7}) b/i],[u,[d,"Dell"],[l,g]],[/\b(q(?:mv|ta)\w+) b/i],[u,[d,"Verizon"],[l,g]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[u,[d,"Barnes & Noble"],[l,g]],[/\b(tm\d{3}\w+) b/i],[u,[d,"NuVision"],[l,g]],[/\b(k88) b/i],[u,[d,"ZTE"],[l,g]],[/\b(nx\d{3}j) b/i],[u,[d,"ZTE"],[l,m]],[/\b(gen\d{3}) b.+49h/i],[u,[d,"Swiss"],[l,m]],[/\b(zur\d{3}) b/i],[u,[d,"Swiss"],[l,g]],[/\b((zeki)?tb.*\b) b/i],[u,[d,"Zeki"],[l,g]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[d,"Dragon Touch"],u,[l,g]],[/\b(ns-?\w{0,9}) b/i],[u,[d,"Insignia"],[l,g]],[/\b((nxa|next)-?\w{0,9}) b/i],[u,[d,"NextBook"],[l,g]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[d,"Voice"],u,[l,m]],[/\b(lvtel\-)?(v1[12]) b/i],[[d,"LvTel"],u,[l,m]],[/\b(ph-1) /i],[u,[d,"Essential"],[l,m]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[u,[d,"Envizen"],[l,g]],[/\b(trio[-\w\. ]+) b/i],[u,[d,"MachSpeed"],[l,g]],[/\btu_(1491) b/i],[u,[d,"Rotor"],[l,g]],[/(shield[\w ]+) b/i],[u,[d,"Nvidia"],[l,g]],[/(sprint) (\w+)/i],[d,u,[l,m]],[/(kin\.[onetw]{3})/i],[[u,/\./g," "],[d,P],[l,m]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[u,[d,F],[l,g]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[u,[d,F],[l,m]],[/smart-tv.+(samsung)/i],[d,[l,p]],[/hbbtv.+maple;(\d+)/i],[[u,/^/,"SmartTV"],[d,M],[l,p]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[d,C],[l,p]],[/(apple) ?tv/i],[d,[u,A+" TV"],[l,p]],[/crkey/i],[[u,E+"cast"],[d,R],[l,p]],[/droid.+aft(\w+)( bui|\))/i],[u,[d,b],[l,p]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[u,[d,L],[l,p]],[/(bravia[\w ]+)( bui|\))/i],[u,[d,B],[l,p]],[/(mitv-\w{5}) bui/i],[u,[d,O],[l,p]],[/Hbbtv.*(technisat) (.*);/i],[d,u,[l,p]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[d,z],[u,z],[l,p]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[l,p]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[d,u,[l,v]],[/droid.+; (shield) bui/i],[u,[d,"Nvidia"],[l,v]],[/(playstation [345portablevi]+)/i],[u,[d,B],[l,v]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[u,[d,P],[l,v]],[/\b(sm-[lr]\d\d[05][fnuw]?s?)\b/i],[u,[d,M],[l,w]],[/((pebble))app/i],[d,u,[l,w]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[u,[d,A],[l,w]],[/droid.+; (glass) \d/i],[u,[d,R],[l,w]],[/droid.+; (wt63?0{2,3})\)/i],[u,[d,F],[l,w]],[/(quest( \d| pro)?)/i],[u,[d,V],[l,w]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[d,[l,y]],[/(aeobc)\b/i],[u,[d,b],[l,y]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[u,[l,m]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[u,[l,g]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[l,g]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[l,m]],[/(android[-\w\. ]{0,9});.+buil/i],[u,[d,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[f,[c,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[f,[c,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[c,f],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[f,c]],os:[[/microsoft (windows) (vista|xp)/i],[c,f],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[c,[f,Y,K]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[f,Y,K],[c,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[f,/_/g,"."],[c,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[c,U],[f,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[f,c],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[c,f],[/\(bb(10);/i],[f,[c,T]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[f,[c,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[f,[c,x+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[f,[c,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[f,[c,"watchOS"]],[/crkey\/([\d\.]+)/i],[f,[c,E+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[c,W],f],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[c,f],[/(sunos) ?([\w\.\d]*)/i],[[c,"Solaris"],f],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[c,f]]},Q=function(t,e){if(typeof t===o&&(e=t,t=s),!(this instanceof Q))return new Q(t,e).getResult();var v=typeof i!==r&&i.navigator?i.navigator:s,p=t||(v&&v.userAgent?v.userAgent:""),w=v&&v.userAgentData?v.userAgentData:s,y=e?function(t,e){var i={};for(var s in t)e[s]&&e[s].length%2==0?i[s]=e[s].concat(t[s]):i[s]=t[s];return i}(j,e):j,b=v&&v.userAgent==p;return this.getBrowser=function(){var t={};return t[c]=s,t[f]=s,q.call(t,p,y.browser),t[a]=function(t){return typeof t===h?t.replace(/[^\d\.]/g,"").split(".")[0]:s}(t[f]),b&&v&&v.brave&&typeof v.brave.isBrave==n&&(t[c]="Brave"),t},this.getCPU=function(){var t={};return t[_]=s,q.call(t,p,y.cpu),t},this.getDevice=function(){var t={};return t[d]=s,t[u]=s,t[l]=s,q.call(t,p,y.device),b&&!t[l]&&w&&w.mobile&&(t[l]=m),b&&"Macintosh"==t[u]&&v&&typeof v.standalone!==r&&v.maxTouchPoints&&v.maxTouchPoints>2&&(t[u]="iPad",t[l]=g),t},this.getEngine=function(){var t={};return t[c]=s,t[f]=s,q.call(t,p,y.engine),t},this.getOS=function(){var t={};return t[c]=s,t[f]=s,q.call(t,p,y.os),b&&!t[c]&&w&&w.platform&&"Unknown"!=w.platform&&(t[c]=w.platform.replace(/chrome os/i,W).replace(/macos/i,U)),t},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return p},this.setUA=function(t){return p=typeof t===h&&t.length>500?z(t,500):t,this},this.setUA(p),this};Q.VERSION="0.7.39",Q.BROWSER=H([c,f,a]),Q.CPU=H([_]),Q.DEVICE=H([u,d,l,v,m,p,g,w,y]),Q.ENGINE=Q.OS=H([c,f]),t.exports&&(e=t.exports=Q),e.UAParser=Q;var J=typeof i!==r&&(i.jQuery||i.Zepto);if(J&&!J.ua){var $=new Q;J.ua=$.getResult(),J.ua.get=function(){return $.getUA()},J.ua.set=function(t){$.setUA(t);var e=$.getResult();for(var i in e)J.ua[i]=e[i]}}}("object"==typeof s?s:A)}(Ui,Ui.exports);const Gi=T(Ui.exports),Hi=["iOS"];class Zi extends Gi{isChromium(){return this.getUA().match(/Chrome/i)}isChrome(){const t=this.getBrowser();if(!t.name)return!1;const e=this.getOS();let i=!0;return i=!new RegExp(Hi.join("|"),"i").test(e.name),t.name.match(/Chrome/i)&&i}isFirefox(){const t=this.getBrowser();return!!t.name&&t.name.match(/Firefox/i)}isOpera(){const t=this.getBrowser();return!!t.name&&t.name.match(/Opera/i)}isSafari(){const t=this.getBrowser();return!!t.name&&t.name.match(/Safari/i)}constructor(){super(s.navigator.userAgent)}}const Xi=at.get("SdpParser"),zi=Array.from({length:31},((t,e)=>e+35)),qi=Array.from({length:32},((t,e)=>e+96)),Yi=Array.from({length:14},((t,e)=>e+1)),Ki=Array.from({length:240},((t,e)=>e+16)),ji={setSimulcast(t,e){if(Xi.info("Setting simulcast. Codec: ",e),!(new Zi).isChromium())return Xi.warn("Your browser does not appear to support Simulcast. For a better experience, use a Chromium based browser."),t;if("h264"!==e&&"vp8"!==e)return Xi.warn("Your selected codec ".concat(e," does not appear to support Simulcast.  To broadcast using simulcast, please use H.264 or VP8.")),t;if(!/m=video/.test(t))return Xi.warn("There is no available video for simulcast to be enabled."),t;try{const e=new RegExp("m=video.*?a=ssrc:(\\d*) cname:(.+?)\\r\\n","s"),i=new RegExp("m=video.*?a=ssrc:(\\d*) msid:(.+?)\\r\\n","s"),s=e.exec(t),n=s[1],r=s[2],o=i.exec(t)[2],h=2,a=[n];for(let e=0;e<h;++e){const i=100+2*e,s=i+1;a.push(i),t+="a=ssrc-group:FID "+i+" "+s+"\r\na=ssrc:"+i+" cname:"+r+"\r\na=ssrc:"+i+" msid:"+o+"\r\na=ssrc:"+s+" cname:"+r+"\r\na=ssrc:"+s+" msid:"+o+"\r\n"}return t+="a=ssrc-group:SIM "+a.join(" ")+"\r\n",Xi.info("Simulcast setted"),Xi.debug("Simulcast SDP: ",t),t}catch(t){throw Xi.error("Error setting SDP for simulcast: ",t),t}},setStereo:t=>(Xi.info("Replacing SDP response for support stereo"),t=t.replace(/useinbandfec=1/g,"useinbandfec=1; stereo=1"),Xi.info("Replaced SDP response for support stereo"),Xi.debug("New SDP value: ",t),t),setDTX:t=>(Xi.info("Replacing SDP response for support dtx"),t=t.replace("useinbandfec=1","useinbandfec=1; usedtx=1"),Xi.info("Replaced SDP response for support dtx"),Xi.debug("New SDP value: ",t),t),setAbsoluteCaptureTime(t){const e="a=extmap:"+ji.getAvailableHeaderExtensionIdRange(t)[0]+" http://www.webrtc.org/experiments/rtp-hdrext/abs-capture-time\r\n";return t=t.replace(/(m=.*\r\n(?:.*\r\n)*?)(a=extmap.*\r\n)/gm,((t,i,s)=>i+e+s)),Xi.info("Replaced SDP response for setting absolute capture time"),Xi.debug("New SDP value: ",t),t},setDependencyDescriptor(t){const e="a=extmap:"+ji.getAvailableHeaderExtensionIdRange(t)[0]+" https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension\r\n";return t=t.replace(/(m=.*\r\n(?:.*\r\n)*?)(a=extmap.*\r\n)/gm,((t,i,s)=>i+e+s)),Xi.info("Replaced SDP response for setting depency descriptor"),Xi.debug("New SDP value: ",t),t},setVideoBitrate(t,e){if(e<1)Xi.info("Remove bitrate restrictions"),t=t.replace(/b=AS:.*\r\n/,"").replace(/b=TIAS:.*\r\n/,"");else{const i=Fi.parse(t),s=i.getMedia("video");Xi.info("Setting video bitrate"),s.setBitrate(e),t=i.toString()}return t},removeSdpLine:(t,e)=>(Xi.debug("SDP before trimming: ",t),t=t.split("\n").filter((t=>t.trim()!==e)).join("\n"),Xi.debug("SDP trimmed result: ",t),t),adaptCodecName(t,e,i){if(!t)return t;const s=new RegExp("".concat(e),"i");return t.replace(s,i)},setMultiopus(t,e){if(!(new Zi).isFirefox()&&(!e||Qi(e)))if(t.includes("multiopus/48000/6"))Xi.info("Multiopus already setted");else{Xi.info("Setting multiopus");const e=/m=audio 9 UDP\/TLS\/RTP\/SAVPF (.*)\r\n/.exec(t)[0],i=ji.getAvailablePayloadTypeRange(t)[0],s=e.replace("\r\n"," ")+i+"\r\na=rtpmap:"+i+" multiopus/48000/6\r\na=fmtp:"+i+" channel_mapping=0,4,1,2,3,5;coupled_streams=2;minptime=10;num_streams=4;useinbandfec=1\r\n";t=t.replace(e,s),Xi.info("Multiopus offer created"),Xi.debug("SDP parsed for multioups: ",t)}return t},getAvailablePayloadTypeRange(t){const e=t.matchAll(/m=(?:.*) (?:.*) UDP\/TLS\/RTP\/SAVPF (.*)\r\n/gm);let i=qi.concat(zi);for(const t of e){const e=t[1].split(" ").map((t=>x(t)));i=i.filter((t=>!e.includes(t)))}return i},getAvailableHeaderExtensionIdRange(t){const e=t.matchAll(/a=extmap:(\d+)(?:.*)\r\n/gm);let i=Yi.concat(Ki);for(const t of e){const e=t[1].split(" ").map((t=>x(t)));i=i.filter((t=>!e.includes(t)))}return i},renegotiate(t,e){const i=Fi.parse(t),s=Fi.parse(e);for(const t of i.getMedias()){let e=s.getMediaById(t.getId());if(!e){e=new Vi(t.getId(),t.getType()),e.setDirection(Wi.reverse(t.getDirection()));const i=s.getMedia(t.getType());if(i){e.setCodecs(i.getCodecs());for(const[t,s]of i.getExtensions())e.addExtension(t,s)}s.addMedia(e)}}return s.toString()},updateMissingVideoExtensions(t,e){var i;const s=Fi.parse(t),n=null==(i=Fi.parse(e).getMediasByType("video")[0])?void 0:i.getExtensions();if(n||n.length){for(const e of s.getMediasByType("video")){const i=e.getExtensions();n.forEach(((s,n)=>{if(!i.get(n)){const i=e.getId(),r="a=extmap:"+n+" "+s+"\r\n",o=new RegExp("(a=mid:"+i+"\r\n(?:.*\r\n)*?)","g");t=t.replace(o,((t,e,i)=>e+r))}}))}return t}},getCodecPayloadType(t){const e=t.matchAll(/a=rtpmap:(\d+) (\w+)\/\d+/g),i={};for(const t of e)i[t[1]]=t[2];return i}},Qi=t=>t.getAudioTracks().some((t=>t.getSettings().channelCount>2)),Ji={VP8:"vp8",VP9:"vp9",H264:"h264",AV1:"av1",H265:"h265"},$i={OPUS:"opus",MULTIOPUS:"multiopus"},ts=at.get("PeerConnection"),es="Publisher",is="Viewer",ss={track:"track",connectionStateChange:"connectionStateChange"},ns={stereo:!1,mediaStream:null,codec:"h264",simulcast:!1,scalabilityMode:null,disableAudio:!1,disableVideo:!1,setSDPToPeer:!0};class rs extends xt{async createRTCPeer(t,e){void 0===t&&(t={autoInitStats:!0,statsIntervalMs:1e3}),void 0===e&&(e=is),ts.info("Creating new RTCPeerConnection"),ts.debug("RTC configuration provided by user: ",t),this.peer=as(this,t),this.mode=e,t.autoInitStats&&this.initStats(t)}getRTCPeer(){return ts.info("Getting RTC Peer"),this.peer}async closeRTCPeer(){var t;ts.info("Closing RTCPeerConnection"),null==(t=this.peer)||t.close(),this.peer=null,this.stopStats(),this.emit(ss.connectionStateChange,"closed")}async setRTCRemoteSDP(t){ts.info("Setting RTC Remote SDP");const e={type:"answer",sdp:t};try{await this.peer.setRemoteDescription(e),ts.info("RTC Remote SDP was set successfully."),ts.debug("RTC Remote SDP new value: ",t)}catch(t){throw ts.error("Error while setting RTC Remote SDP: ",t),t}}async getRTCLocalSDP(t){void 0===t&&(t=ns),ts.info("Getting RTC Local SDP"),t=d(d({},ns),t),ts.debug("Options: ",t);const e=hs(t.mediaStream);e?ls(this.peer,e,t):ds(this.peer,t),ts.info("Creating peer offer");const i=await this.peer.createOffer();return ts.info("Peer offer created"),ts.debug("Peer offer response: ",i.sdp),this.sessionDescription=i,t.disableAudio||(t.stereo&&(this.sessionDescription.sdp=ji.setStereo(this.sessionDescription.sdp)),t.dtx&&(this.sessionDescription.sdp=ji.setDTX(this.sessionDescription.sdp)),this.sessionDescription.sdp=ji.setMultiopus(this.sessionDescription.sdp,e)),!t.disableVideo&&t.simulcast&&(this.sessionDescription.sdp=ji.setSimulcast(this.sessionDescription.sdp,t.codec)),t.absCaptureTime&&(this.sessionDescription.sdp=ji.setAbsoluteCaptureTime(this.sessionDescription.sdp)),t.dependencyDescriptor&&(this.sessionDescription.sdp=ji.setDependencyDescriptor(this.sessionDescription.sdp)),t.setSDPToPeer&&(await this.peer.setLocalDescription(this.sessionDescription),ts.info("Peer local description set")),this.sessionDescription.sdp}async addRemoteTrack(t,e){return new Promise(((i,s)=>{try{const s=this.peer.addTransceiver(t,{direction:"recvonly",streams:e});this.transceiverMap.set(s,i)}catch(t){s(t)}}))}updateBandwidthRestriction(t,e){if(this.mode===is)throw ts.error("Viewer attempting to update bitrate, this is not allowed"),new g("It is not possible for a viewer to update the bitrate.");return ts.info("Updating bandwidth restriction, bitrate value: ",e),ts.debug("SDP value: ",t),ji.setVideoBitrate(t,e)}async updateBitrate(t){if(void 0===t&&(t=0),this.mode===is)throw ts.error("Viewer attempting to update bitrate, this is not allowed"),new g("It is not possible for a viewer to update the bitrate.");if(!this.peer)throw ts.error("Cannot update bitrate. No peer found."),new g("Cannot update bitrate. No peer found.");ts.info("Updating bitrate to value: ",t),this.sessionDescription=await this.peer.createOffer(),await this.peer.setLocalDescription(this.sessionDescription);const e=this.updateBandwidthRestriction(this.peer.remoteDescription.sdp,t);await this.setRTCRemoteSDP(e),ts.info("Bitrate restrictions updated: ","".concat(t>0?t:"unlimited"," kbps"))}getRTCPeerStatus(){if(ts.info("Getting RTC peer status"),!this.peer)return null;const t=fs(this.peer);return ts.info("RTC peer status getted, value: ",t),t}replaceTrack(t){if(!this.peer)return void ts.error("Could not change track if there is not an active connection.");const e=this.peer.getSenders().find((e=>e.track.kind===t.kind));e?e.replaceTrack(t):ts.error("There is no ".concat(t.kind," track in active broadcast."))}static getCapabilities(t){const e=new Zi,i=RTCRtpSender.getCapabilities(t);if(i){const s={};let n=new RegExp("^video/(".concat(w.values(Ji).join("|"),")x?$"),"i");"audio"===t&&(n=new RegExp("^audio/(".concat(w.values($i).join("|"),")$"),"i"),e.isChrome()&&(s.multiopus={mimeType:"audio/multiopus",channels:6}));for(const t of i.codecs){const e=t.mimeType.match(n);if(e){const i=e[1].toLowerCase();if(s[i]=v(d({},s[i]),{mimeType:t.mimeType}),t.scalabilityModes){let e=s[i].scalabilityModes||[];e=[...e,...t.scalabilityModes],s[i].scalabilityModes=[...new Set(e)]}t.channels&&(s[i].channels=t.channels)}}i.codecs=w.keys(s).map((t=>d({codec:t},s[t])))}return i}getTracks(){var t,e;return null==(e=null==(t=this.peer)?void 0:t.getSenders())?void 0:e.map((t=>t.track))}initStats(t){this.peerConnectionStats?ts.warn("PeerConnection.initStats() has already been called. Automatic initialization occurs via View.connect(), Publish.connect() or this.createRTCPeer(). See options"):this.peer?(this.peerConnectionStats=new Bt(this.peer,t),Pt(this.peerConnectionStats,this,[Lt])):ts.warn("Cannot init peer stats: RTCPeerConnection not initialized")}stopStats(){var t;null==(t=this.peerConnectionStats)||t.stop(),this.peerConnectionStats=null}constructor(){super(),this.mode=null,this.sessionDescription=null,this.peer=null,this.peerConnectionStats=null,this.transceiverMap=new Map}}const os=t=>(null==t?void 0:t.getAudioTracks().length)<=1&&(null==t?void 0:t.getVideoTracks().length)<=1,hs=t=>{if(!t)return null;if(t instanceof MediaStream&&os(t))return t;if(!(t instanceof MediaStream)){ts.info("Creating MediaStream to add received tracks.");const e=new MediaStream;for(const i of t)e.addTrack(i);if(os(e))return e}throw ts.error("MediaStream must have 1 audio track and 1 video track, or at least one of them."),new g("MediaStream must have 1 audio track and 1 video track, or at least one of them.")},as=(t,e)=>{const i=new RTCPeerConnection(e);return cs(t,i),i};async function us(t){return new Promise((e=>u(e,t)))}const cs=(t,e)=>{e.ontrack=async e=>{ts.info("New track from peer."),ts.debug("Track event value: ",e);const i=t.transceiverMap.get(e.transceiver);if(i){for(;!e.transceiver.mid;)await us(100);i(e.transceiver),t.transceiverMap.delete(e.transceiver)}u((()=>{t.emit(ss.track,e)}),0)},e.connectionState?e.onconnectionstatechange=i=>{ts.info("Peer connection state change: ",e.connectionState),t.emit(ss.connectionStateChange,e.connectionState)}:e.oniceconnectionstatechange=i=>{ts.info("Peer ICE connection state change: ",e.iceConnectionState),t.emit(ss.connectionStateChange,e.iceConnectionState)},e.onnegotiationneeded=async t=>{if(!e.remoteDescription)return;ts.info("Peer onnegotiationneeded, updating local description");const i=await e.createOffer();ts.info("Peer onnegotiationneeded, got local offer",i.sdp),i.sdp=ji.updateMissingVideoExtensions(i.sdp,e.remoteDescription.sdp),await e.setLocalDescription(i);const s=ji.renegotiate(i.sdp,e.remoteDescription.sdp);ts.info("Peer onnegotiationneeded, updating remote description",s),await e.setRemoteDescription({type:"answer",sdp:s}),ts.info("Peer onnegotiationneeded, renegotiation done")}},ls=(t,e,i)=>{ts.info("Adding mediaStream tracks to RTCPeerConnection");for(const s of e.getTracks()){const n={streams:[e]};"audio"===s.kind&&(n.direction=i.disableAudio?"inactive":"sendonly"),"video"===s.kind&&(n.direction=i.disableVideo?"inactive":"sendonly",i.scalabilityMode&&(new Zi).isChrome()?(ts.debug("Video track with scalability mode: ".concat(i.scalabilityMode,".")),n.sendEncodings=[{scalabilityMode:i.scalabilityMode}]):i.scalabilityMode&&ts.warn("SVC is only supported in Google Chrome")),t.addTransceiver(s,n),ts.info("Track '".concat(s.label,"' added: "),"id: ".concat(s.id),"kind: ".concat(s.kind))}},ds=(t,e)=>{const i=new Zi;if(!e.disableVideo){const e=t.addTransceiver("video",{direction:"recvonly"});i.isOpera()&&e.setCodecPreferences(RTCRtpReceiver.getCapabilities("video").codecs.filter((t=>"video/H264"!==t.mimeType||t.sdpFmtpLine.includes("profile-level-id=4"))))}e.disableAudio||t.addTransceiver("audio",{direction:"recvonly"});for(let i=0;i<e.multiplexedAudioTracks;i++)t.addTransceiver("audio",{direction:"recvonly"})},fs=t=>{var e;const i=null!=(e=t.connectionState)?e:t.iceConnectionState;switch(i){case"checking":return"connecting";case"completed":return"connected";default:return i}};var _s={};w.defineProperty(_s,"__esModule",{value:!0}),_s.TypedEmitter=kt.EventEmitter;const{TypedEmitter:vs}=_s;class ms extends vs{cmd(t,e){return this.tm.cmd(t,e,this.namespace)}event(t,e){return this.tm.event(t,e,this.namespace)}close(){return this.tm.namespaces.delete(this.namespace)}constructor(t,e){super(),this.namespace=t,this.tm=e}}const gs=T(class extends vs{h_(t){this.transport.send(JSON.stringify(t))}cmd(t,e,i){return void 0===i&&(i=void 0),new Promise(((s,n)=>{if(!t||0===t.length)throw new g("Bad command name");const r={type:"cmd",transId:this.maxId++,name:t,data:e};i&&(r.namespace=i),this.transactions.set(r.transId,v(d({},r),{resolve:s,reject:n}));try{this.h_(r)}catch(t){throw this.transactions.delete(r.transId),t}}))}event(t,e,i){if(void 0===i&&(i=void 0),!t||0===t.length)throw new g("Bad event name");const s={type:"event",name:t,data:e};i&&(s.namespace=i),this.h_(s)}namespace(t){let e=this.namespaces.get(t);return e||(e=new ms(t,this),this.namespaces.set(t,e),e)}close(){for(const t of this.namespaces.values())t.close();this.transport.removeListener?this.transport.removeListener("message",this.listener):this.transport.removeEventListener("message",this.listener)}constructor(t){super(),this.maxId=0,this.namespaces=new Map,this.transactions=new Map,this.transport=t,this.listener=t=>{let e;try{e=JSON.parse(t.utf8Data||t.data||t)}catch(t){return}switch(e.type){case"cmd":const{transId:t}=e,s={name:e.name,data:e.data,namespace:e.namespace,accept:e=>{this.h_({type:"response",transId:t,data:e})},reject:e=>{this.h_({type:"error",transId:t,data:e})}};if(s.namespace){const t=this.namespaces.get(s.namespace);t?t.emit("cmd",s):this.emit("cmd",s)}else this.emit("cmd",s);break;case"response":{const t=this.transactions.get(e.transId);if(!t)return;this.transactions.delete(e.transId),t.resolve(e.data);break}case"error":{const t=this.transactions.get(e.transId);if(!t)return;this.transactions.delete(e.transId),t.reject(e.data);break}case"event":const n={name:e.name,data:e.data,namespace:e.namespace};if(n.namespace){var i=this.namespaces.get(n.namespace);i?i.emit("event",n):this.emit("event",n)}else this.emit("event",n)}},this.transport.addListener?this.transport.addListener("message",this.listener):this.transport.addEventListener("message",this.listener)}}),ps=at.get("Signaling"),ws="wsConnectionSuccess",ys="wsConnectionError",bs="wsConnectionClose",As="broadcastEvent";class Ss extends xt{async connect(){var t;return ps.info("Connecting to Signaling Server"),this.transactionManager&&(null==(t=this.webSocket)?void 0:t.readyState)===WebSocket.OPEN?(ps.info("Connected to server: ",this.webSocket.url),ps.debug("WebSocket value: ",{url:this.webSocket.url,protocol:this.webSocket.protocol,readyState:this.webSocket.readyState,binaryType:this.webSocket.binaryType,extensions:this.webSocket.extensions}),this.emit(ws,{ws:this.webSocket,tm:this.transactionManager}),this.webSocket):new Promise(((t,e)=>{this.webSocket=new WebSocket(this.wsUrl),this.transactionManager=new gs(this.webSocket),this.webSocket.onopen=()=>{ps.info("WebSocket opened"),this.transactionManager.on("event",(t=>{this.emit(As,t)})),ps.info("Connected to server: ",this.webSocket.url),ps.debug("WebSocket value: ",{url:this.webSocket.url,protocol:this.webSocket.protocol,readyState:this.webSocket.readyState,binaryType:this.webSocket.binaryType,extensions:this.webSocket.extensions}),this.emit(ws,{ws:this.webSocket,tm:this.transactionManager}),t(this.webSocket)},this.webSocket.onerror=()=>{ps.error("WebSocket not connected: ",this.webSocket.url),this.emit(ys,this.webSocket.url),e(this.webSocket.url)},this.webSocket.onclose=()=>{this.webSocket=null,this.transactionManager=null,ps.info("Connection closed with Signaling Server."),this.emit(bs)}}))}close(){var t;ps.info("Closing connection with Signaling Server."),null==(t=this.webSocket)||t.close()}async subscribe(t,e,i,s){var n,r,o,h;void 0===i&&(i=null),void 0===s&&(s=null),ps.info("Starting subscription to streamName: ",this.streamName),ps.debug("Subcription local description: ",t);const a=Ts(e,i,s),u={sdp:t=ji.adaptCodecName(t,"AV1X",Ji.AV1),streamId:this.streamName,pinnedSourceId:a.pinnedSourceId,excludedSourceIds:a.excludedSourceIds,events:["active","inactive","layers","viewercount","vad","updated","migrate","stopped"]};a.vad&&(u.vad=!0),Array.isArray(a.events)&&(u.events=a.events),a.forcePlayoutDelay&&(u.forcePlayoutDelay=a.forcePlayoutDelay),a.layer&&(u.layer=a.layer);try{if(a.disableVideo&&a.disableAudio)throw new g("Not attempting to connect as video and audio are disabled");await this.connect(),ps.info("Sending view command");const t=await this.transactionManager.cmd("view",u),e=null==(h=null==(o=null==(r=null==(n=RTCRtpReceiver.getCapabilities)?void 0:n.call(RTCRtpReceiver,"video"))?void 0:r.codecs)?void 0:o.find)?void 0:h.call(o,(t=>"video/AV1X"===t.mimeType));return t.sdp=e?ji.adaptCodecName(t.sdp,Ji.AV1,"AV1X"):t.sdp,ps.info("Command sent, subscriberId: ",t.subscriberId),ps.debug("Command result: ",t),this.serverId=t.subscriberId,this.clusterId=t.clusterId,this.streamViewId=t.streamViewId,G(this.streamName),H(this.serverId),Z(t.streamViewId),Y(this.clusterId),t.sdp}catch(t){throw ps.error("Error sending view command, error: ",t),t}}async publish(t,e,i,s){var n,r,o,h,a,u,c,l;void 0===i&&(i=null),void 0===s&&(s=null);const d=ks(e,i,s);ps.info("Starting publishing to streamName: ".concat(this.streamName,", codec: ").concat(d.codec)),ps.debug("Publishing local description: ",t);const f=null!=(h=null==(o=null==(r=null==(n=rs.getCapabilities)?void 0:n.call(rs,"video"))?void 0:r.codecs)?void 0:o.map((t=>t.codec)))?h:[],_=w.values(Ji);if(-1===_.indexOf(d.codec))throw ps.error("Invalid codec ".concat(d.codec,". Possible values are: "),_),new g("Invalid codec ".concat(d.codec,". Possible values are: ").concat(_));if(f.length>0&&-1===f.indexOf(d.codec))throw ps.error("Unsupported codec ".concat(d.codec,". Possible values are: "),f),new g("Unsupported codec ".concat(d.codec,". Possible values are: ").concat(f));d.codec===Ji.AV1&&(t=ji.adaptCodecName(t,"AV1X",Ji.AV1));const v={name:this.streamName,sdp:t,codec:d.codec,sourceId:d.sourceId};if(d.priority){if(!(Number.isInteger(d.priority)&&d.priority>=-2147483648&&d.priority<=2147483647))throw new g("Invalid value for priority option. It should be a decimal integer between the range [-2^31, +2^31 - 1]");v.priority=d.priority}null!==d.record&&(v.record=d.record),Array.isArray(d.events)&&(v.events=d.events);try{if(d.disableVideo&&d.disableAudio)throw new g("Not attempting to connect as video and audio are disabled");await this.connect(),ps.info("Sending publish command");const t=await this.transactionManager.cmd("publish",v);if(d.codec===Ji.AV1){const e=null==(l=null==(c=null==(u=null==(a=RTCRtpSender.getCapabilities)?void 0:a.call(RTCRtpSender,"video"))?void 0:u.codecs)?void 0:c.find)?void 0:l.call(c,(t=>"video/AV1X"===t.mimeType));t.sdp=e?ji.adaptCodecName(t.sdp,Ji.AV1,"AV1X"):t.sdp}return ps.info("Command sent, publisherId: ",t.publisherId),ps.debug("Command result: ",t),this.serverId=t.publisherId,this.clusterId=t.clusterId,G(this.streamName),H(this.serverId),X(t.feedId),Y(this.clusterId),t.sdp}catch(t){throw ps.error("Error sending publish command, error: ",t),t}}async cmd(t,e){return ps.info("Sending cmd: ".concat(t)),this.transactionManager.cmd(t,e)}constructor(t={streamName:null,url:"ws://localhost:8080/"}){super(),this.streamName=t.streamName,this.wsUrl=t.url,this.webSocket=null,this.transactionManager=null,this.serverId=null,this.clusterId=null,this.streamViewId=null}}const Ts=(t,e,i)=>{let s="object"==typeof t?t:{};return 0===w.keys(s).length&&(s={vad:t,pinnedSourceId:e,excludedSourceIds:i}),s},ks=(t,e,i)=>{let s="object"==typeof t?t:{};if(0===w.keys(s).length){s={codec:null!=t?t:Ji.H264,record:e,sourceId:i}}return s};class Es extends g{constructor(t,e){super(t),this.name="FetchError",this.status=e}}const xs=at.get("Director"),Rs="WebRtc";let Is="",Cs="https://director.millicast.com";const Ps={setEndpoint:t=>{Cs=t.replace(/\/$/,"")},getEndpoint:()=>Cs,setLiveDomain:t=>{Is=t.replace(/\/$/,"")},getLiveDomain:()=>Is,getPublisher:async(t,e,i)=>{void 0===e&&(e=null),void 0===i&&(i=Rs);const s=Ds(t,e,i);xs.info("Getting publisher connection path for stream name: ",s.streamName);const n={streamName:s.streamName,streamType:s.streamType},r={"Content-Type":"application/json",Authorization:"Bearer ".concat(s.token)},o="".concat(Ps.getEndpoint(),"/api/director/publish");try{const t=await fetch(o,{method:"POST",headers:r,body:JSON.stringify(n)});let e=await t.json();if("fail"===e.status)throw new Es(e.data.message,t.status);return e=Ms(e),xs.debug("Getting publisher response: ",e),U(e.data.streamAccountId),e.data}catch(t){throw xs.error("Error while getting publisher connection path. ",t),t}},getSubscriber:async(t,e,i)=>{void 0===e&&(e=null),void 0===i&&(i=null);const s=Ns(t,e,i);U(s.streamAccountId),xs.info("Getting subscriber connection data for stream name: ".concat(s.streamName," and account id: ").concat(s.streamAccountId));const n={streamAccountId:s.streamAccountId,streamName:s.streamName};let r={"Content-Type":"application/json"};s.subscriberToken&&(r=v(d({},r),{Authorization:"Bearer ".concat(s.subscriberToken)}));const o="".concat(Ps.getEndpoint(),"/api/director/subscribe");try{const t=await fetch(o,{method:"POST",headers:r,body:JSON.stringify(n)});let e=await t.json();if("fail"===e.status)throw new Es(e.data.message,t.status);return e=Ms(e),xs.debug("Getting subscriber response: ",e),s.subscriberToken&&(e.data.subscriberToken=s.subscriberToken),e.data}catch(t){throw xs.error("Error while getting subscriber connection path. ",t),t}}},Ds=(t,e,i)=>{let s="object"==typeof t?t:{};return 0===w.keys(s).length&&(s={token:t,streamName:e,streamType:i}),s},Ns=(t,e,i)=>{let s="object"==typeof t?t:{};return 0===w.keys(s).length&&(s={streamName:t,streamAccountId:e,subscriberToken:i}),s},Ms=t=>{if(Ps.getLiveDomain()){const e=/\/\/(.*?)\//,i=t.data.urls.map((t=>{const i=e.exec(t);return t.replace(i[1],Ps.getLiveDomain())}));t.data.urls=i}if(t.data.drmObject){const e=t.data.drmObject.playReadyUrl;e&&(t.data.drmObject.playReadyUrl="".concat(Ps.getEndpoint()).concat(e));const i=t.data.drmObject.widevineUrl;i&&(t.data.drmObject.widevineUrl="".concat(Ps.getEndpoint()).concat(i));const s=t.data.drmObject.fairPlayUrl;s&&(t.data.drmObject.fairPlayUrl="".concat(Ps.getEndpoint()).concat(s));const n=t.data.drmObject.fairPlayCertUrl;n&&(t.data.drmObject.fairPlayCertUrl="".concat(Ps.getEndpoint()).concat(n))}return t};function Ls(t){this.message=t}Ls.prototype=new g,Ls.prototype.name="InvalidCharacterError";var Bs=typeof s<"u"&&s.atob&&s.atob.bind(s)||function(t){var e=String(t).replace(/=+$/,"");if(e.length%4==1)throw new Ls("'atob' failed: The string to be decoded is not correctly encoded.");for(var i,s,n=0,r=0,o="";s=e.charAt(r++);~s&&(i=n%4?64*i+s:s,n++%4)?o+=String.fromCharCode(255&i>>(-2*n&6)):0)s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(s);return o};function Os(t){this.message=t}function Fs(t,e){if("string"!=typeof t)throw new Os("Invalid token specified");var i=!0===(e=e||{}).header?0:1;try{return JSON.parse(function(t){var e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw"Illegal base64url string!"}try{return decodeURIComponent(Bs(e).replace(/(.)/g,(function(t,e){var i=e.charCodeAt(0).toString(16).toUpperCase();return i.length<2&&(i="0"+i),"%"+i})))}catch(t){return Bs(e)}}(t.split(".")[i]))}catch(t){throw new Os("Invalid token specified: "+t.message)}}Os.prototype=new g,Os.prototype.name="InvalidTokenError";var Vs={exports:{}};!function(t,e){!function(i){if(null!=e&&"number"!=typeof e.nodeType)t.exports=i();else{var s=i(),n=typeof self<"u"?self:$.global;"function"!=typeof n.btoa&&(n.btoa=s.btoa),"function"!=typeof n.atob&&(n.atob=s.atob)}}((function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function e(t){this.message=t}return e.prototype=new g,e.prototype.name="InvalidCharacterError",{btoa:function(i){for(var s,n,r,o,h=String(i),a=0,u="";a<h.length;){if(s=h.charCodeAt(a++),n=h.charCodeAt(a++),r=h.charCodeAt(a++),s>255||n>255||r>255)throw new e("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");u+=t.charAt((o=s<<16|n<<8|r)>>18&63)+t.charAt(o>>12&63)+t.charAt(o>>6&63)+t.charAt(63&o)}switch(h.length%3){case 0:return u;case 1:return u.slice(0,-2)+"==";case 2:return u.slice(0,-1)+"="}},atob:function(i){var s=String(i).replace(/[=]+$/,"");if(s.length%4==1)throw new e("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,r,o=0,h=0,a="";r=s.charAt(h++);~r&&(n=o%4?64*n+r:r,o++%4)?a+=String.fromCharCode(255&n>>(-2*o&6)):0)r=t.indexOf(r);return a}}}))}(Vs,Vs.exports);var Ws=Vs.exports,Us={exports:{}};!function(t,e){var i;self,i=()=>{return t={7629:(t,e,i)=>{const s=i(375),n=i(8571),r=i(9474),o=i(1687),h=i(8652),a=i(8160),u=i(3292),c=i(6354),l=i(8901),d=i(9708),f=i(6914),_=i(2294),v=i(6133),m=i(1152),p=i(8863),y=i(2036),b={Base:class{a_(){this.u_=new _.Ids,this.c_=null,this.l_=new v.Manager,this.d_=null,this.f_=null,this.__=null,this.v_={},this.m_=[],this.g_=new Map,this.$_terms={},this.$_temp={ruleset:null,whens:{}}}describe(){return s("function"==typeof d.describe,"Manifest functionality disabled"),d.describe(this)}allow(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return a.verifyFlat(e,"allow"),this.p_(e,"f_")}alter(t){s(t&&"object"==typeof t&&!Array.isArray(t),"Invalid targets argument"),s(!this.w_(),"Cannot set alterations inside a ruleset");const e=this.clone();e.$_terms.alterations=e.$_terms.alterations||[];for(const i in t){const n=t[i];s("function"==typeof n,"Alteration adjuster for",i,"must be a function"),e.$_terms.alterations.push({target:i,adjuster:n})}return e.$_temp.ruleset=!1,e}artifact(t){return s(void 0!==t,"Artifact cannot be undefined"),s(!this.d_,"Cannot set an artifact with a rule cache"),this.$_setFlag("artifact",t)}cast(t){return s(!1===t||"string"==typeof t,"Invalid to value"),s(!1===t||this.y_.cast[t],"Type",this.type,"does not support casting to",t),this.$_setFlag("cast",!1===t?void 0:t)}default(t,e){return this.b_("default",t,e)}description(t){return s(t&&"string"==typeof t,"Description must be a non-empty string"),this.$_setFlag("description",t)}empty(t){const e=this.clone();return void 0!==t&&(t=e.$_compile(t,{override:!1})),e.$_setFlag("empty",t,{clone:!1})}error(t){return s(t,"Missing error"),s(t instanceof g||"function"==typeof t,"Must provide a valid Error object or a function"),this.$_setFlag("error",t)}example(t,e){return void 0===e&&(e={}),s(void 0!==t,"Missing example"),a.assertOptions(e,["override"]),this.A_("examples",t,{single:!0,override:e.override})}external(t,e){return"object"==typeof t&&(s(!e,"Cannot combine options with description"),e=t.description,t=t.method),s("function"==typeof t,"Method must be a function"),s(void 0===e||e&&"string"==typeof e,"Description must be a non-empty string"),this.A_("externals",{method:t,description:e},{single:!0})}failover(t,e){return this.b_("failover",t,e)}forbidden(){return this.presence("forbidden")}id(t){return t?(s("string"==typeof t,"id must be a non-empty string"),s(/^[^\.]+$/.test(t),"id cannot contain period character"),this.$_setFlag("id",t)):this.$_setFlag("id",void 0)}invalid(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this.p_(e,"__")}label(t){return s(t&&"string"==typeof t,"Label name must be a non-empty string"),this.$_setFlag("label",t)}meta(t){return s(void 0!==t,"Meta cannot be undefined"),this.A_("metas",t,{single:!0})}note(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];s(e.length,"Missing notes");for(const t of e)s(t&&"string"==typeof t,"Notes must be non-empty strings");return this.A_("notes",e)}only(t){return void 0===t&&(t=!0),s("boolean"==typeof t,"Invalid mode:",t),this.$_setFlag("only",t)}optional(){return this.presence("optional")}prefs(t){s(t,"Missing preferences"),s(void 0===t.context,"Cannot override context"),s(void 0===t.externals,"Cannot override externals"),s(void 0===t.warnings,"Cannot override warnings"),s(void 0===t.debug,"Cannot override debug"),a.checkPreferences(t);const e=this.clone();return e.c_=a.preferences(e.c_,t),e}presence(t){return s(["optional","required","forbidden"].includes(t),"Unknown presence mode",t),this.$_setFlag("presence",t)}raw(t){return void 0===t&&(t=!0),this.$_setFlag("result",t?"raw":void 0)}result(t){return s(["raw","strip"].includes(t),"Unknown result mode",t),this.$_setFlag("result",t)}required(){return this.presence("required")}strict(t){const e=this.clone(),i=void 0!==t&&!t;return e.c_=a.preferences(e.c_,{convert:i}),e}strip(t){return void 0===t&&(t=!0),this.$_setFlag("result",t?"strip":void 0)}tag(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];s(e.length,"Missing tags");for(const t of e)s(t&&"string"==typeof t,"Tags must be non-empty strings");return this.A_("tags",e)}unit(t){return s(t&&"string"==typeof t,"Unit name must be a non-empty string"),this.$_setFlag("unit",t)}valid(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];a.verifyFlat(e,"valid");const s=this.allow(...e);return s.$_setFlag("only",!!s.f_,{clone:!1}),s}when(t,e){const i=this.clone();i.$_terms.whens||(i.$_terms.whens=[]);const n=u.when(i,t,e);if(!["any","link"].includes(i.type)){const t=n.is?[n]:n.switch;for(const e of t)s(!e.then||"any"===e.then.type||e.then.type===i.type,"Cannot combine",i.type,"with",e.then&&e.then.type),s(!e.otherwise||"any"===e.otherwise.type||e.otherwise.type===i.type,"Cannot combine",i.type,"with",e.otherwise&&e.otherwise.type)}return i.$_terms.whens.push(n),i.$_mutateRebuild()}cache(t){s(!this.w_(),"Cannot set caching inside a ruleset"),s(!this.d_,"Cannot override schema cache"),s(void 0===this.v_.artifact,"Cannot cache a rule with an artifact");const e=this.clone();return e.d_=t||h.provider.provision(),e.$_temp.ruleset=!1,e}clone(){const t=w.create(w.getPrototypeOf(this));return this.S_(t)}concat(t){s(a.isSchema(t),"Invalid schema object"),s("any"===this.type||"any"===t.type||t.type===this.type,"Cannot merge type",this.type,"with another type:",t.type),s(!this.w_(),"Cannot concatenate onto a schema with open ruleset"),s(!t.w_(),"Cannot concatenate a schema with open ruleset");let e=this.clone();if("any"===this.type&&"any"!==t.type){const i=t.clone();for(const t of w.keys(e))"type"!==t&&(i[t]=e[t]);e=i}e.u_.concat(t.u_),e.l_.register(t,v.toSibling),e.c_=e.c_?a.preferences(e.c_,t.c_):t.c_,e.f_=y.merge(e.f_,t.f_,t.__),e.__=y.merge(e.__,t.__,t.f_);for(const i of t.g_.keys())e.g_.has(i)&&(e.m_=e.m_.filter((t=>t.keep||t.name!==i)),e.g_.delete(i));for(const i of t.m_)t.y_.rules[i.method].multi||e.g_.set(i.name,i),e.m_.push(i);if(e.v_.empty&&t.v_.empty){e.v_.empty=e.v_.empty.concat(t.v_.empty);const i=w.assign({},t.v_);delete i.empty,o(e.v_,i)}else if(t.v_.empty){e.v_.empty=t.v_.empty;const i=w.assign({},t.v_);delete i.empty,o(e.v_,i)}else o(e.v_,t.v_);for(const i in t.$_terms){const s=t.$_terms[i];s?e.$_terms[i]?e.$_terms[i]=e.$_terms[i].concat(s):e.$_terms[i]=s.slice():e.$_terms[i]||(e.$_terms[i]=s)}return this.$_root.T_&&this.$_root.T_.k_(e,[this,t]),e.$_mutateRebuild()}extend(t){return s(!t.base,"Cannot extend type with another base"),l.type(this,t)}extract(t){return t=Array.isArray(t)?t:t.split("."),this.u_.reach(t)}fork(t,e){s(!this.w_(),"Cannot fork inside a ruleset");let i=this;for(let s of[].concat(t))s=Array.isArray(s)?s:s.split("."),i=i.u_.fork(s,e,i);return i.$_temp.ruleset=!1,i}rule(t){const e=this.y_;a.assertOptions(t,w.keys(e.modifiers)),s(!1!==this.$_temp.ruleset,"Cannot apply rules to empty ruleset or the last rule added does not support rule properties");const i=null===this.$_temp.ruleset?this.m_.length-1:this.$_temp.ruleset;s(i>=0&&i<this.m_.length,"Cannot apply rules to empty ruleset");const r=this.clone();for(let o=i;o<r.m_.length;++o){const i=r.m_[o],h=n(i);for(const n in t)e.modifiers[n](h,t[n]),s(h.name===i.name,"Cannot change rule name");r.m_[o]=h,r.g_.get(h.name)===i&&r.g_.set(h.name,h)}return r.$_temp.ruleset=!1,r.$_mutateRebuild()}get ruleset(){s(!this.w_(),"Cannot start a new ruleset without closing the previous one");const t=this.clone();return t.$_temp.ruleset=t.m_.length,t}get $(){return this.ruleset}tailor(t){t=[].concat(t),s(!this.w_(),"Cannot tailor inside a ruleset");let e=this;if(this.$_terms.alterations)for(const{target:i,adjuster:n}of this.$_terms.alterations)t.includes(i)&&(e=n(e),s(a.isSchema(e),"Alteration adjuster for",i,"failed to return a schema object"));return e=e.$_modify({each:e=>e.tailor(t),ref:!1}),e.$_temp.ruleset=!1,e.$_mutateRebuild()}tracer(){return m.location?m.location(this):this}validate(t,e){return p.entry(t,this,e)}validateAsync(t,e){return p.entryAsync(t,this,e)}$_addRule(t){"string"==typeof t&&(t={name:t}),s(t&&"object"==typeof t,"Invalid options"),s(t.name&&"string"==typeof t.name,"Invalid rule name");for(const e in t)s("_"!==e[0],"Cannot set private rule properties");const e=w.assign({},t);e.Gd=[],e.method=e.method||e.name;const i=this.y_.rules[e.method],n=e.args;s(i,"Unknown rule",e.method);const r=this.clone();if(n){s(1===w.keys(n).length||w.keys(n).length===this.y_.rules[e.name].args.length,"Invalid rule definition for",this.type,e.name);for(const t in n){let o=n[t];if(i.argsByName){const h=i.argsByName.get(t);if(h.ref&&a.isResolvable(o))e.Gd.push(t),r.$_mutateRegister(o);else if(h.normalize&&(o=h.normalize(o),n[t]=o),h.assert){const e=a.validateArg(o,t,h);s(!e,e,"or reference")}}void 0!==o?n[t]=o:delete n[t]}}return i.multi||(r.E_(e.name,{clone:!1}),r.g_.set(e.name,e)),!1===r.$_temp.ruleset&&(r.$_temp.ruleset=null),i.priority?r.m_.unshift(e):r.m_.push(e),r}$_compile(t,e){return u.schema(this.$_root,t,e)}$_createError(t,e,i,s,n,r){void 0===r&&(r={});const o=!1!==r.flags?this.v_:{},h=r.messages?f.merge(this.y_.messages,r.messages):this.y_.messages;return new c.Report(t,e,i,o,h,s,n)}$_getFlag(t){return this.v_[t]}$_getRule(t){return this.g_.get(t)}$_mapLabels(t){return t=Array.isArray(t)?t:t.split("."),this.u_.labels(t)}$_match(t,e,i,s){(i=w.assign({},i)).abortEarly=!0,i.x_=!1,e.snapshot();const n=!p.validate(t,this,e,i,s).errors;return e.restore(),n}$_modify(t){return a.assertOptions(t,["each","once","ref","schema"]),_.schema(this,t)||this}$_mutateRebuild(){return s(!this.w_(),"Cannot add this rule inside a ruleset"),this.l_.reset(),this.u_.reset(),this.$_modify({each:(t,e)=>{let{source:i,name:s,path:n,key:r}=e;const o=this.y_[i][s]&&this.y_[i][s].register;!1!==o&&this.$_mutateRegister(t,{family:o,key:r})}}),this.y_.rebuild&&this.y_.rebuild(this),this.$_temp.ruleset=!1,this}$_mutateRegister(t,e){let{family:i,key:s}=void 0===e?{}:e;this.l_.register(t,i),this.u_.register(t,{key:s})}$_property(t){return this.y_.properties[t]}$_reach(t){return this.u_.reach(t)}$_rootReferences(){return this.l_.roots()}$_setFlag(t,e,i){void 0===i&&(i={}),s("_"===t[0]||!this.w_(),"Cannot set flag inside a ruleset");const n=this.y_.flags[t]||{};if(r(e,n.default)&&(e=void 0),r(e,this.v_[t]))return this;const o=!1!==i.clone?this.clone():this;return void 0!==e?(o.v_[t]=e,o.$_mutateRegister(e)):delete o.v_[t],"_"!==t[0]&&(o.$_temp.ruleset=!1),o}$_parent(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];return this[t][a.symbols.parent].call(this,...i)}$_validate(t,e,i){return p.validate(t,this,e,i)}S_(t){t.type=this.type,t.$_root=this.$_root,t.$_temp=w.assign({},this.$_temp),t.$_temp.whens={},t.u_=this.u_.clone(),t.c_=this.c_,t.f_=this.f_&&this.f_.clone(),t.__=this.__&&this.__.clone(),t.m_=this.m_.slice(),t.g_=n(this.g_,{shallow:!0}),t.l_=this.l_.clone(),t.v_=w.assign({},this.v_),t.d_=null,t.$_terms={};for(const e in this.$_terms)t.$_terms[e]=this.$_terms[e]?this.$_terms[e].slice():null;t.$_super={};for(const e in this.$_super)t.$_super[e]=this.R_[e].bind(t);return t}I_(){const t=this.clone();t.a_();const e=t.y_.terms;for(const i in e){const s=e[i];t.$_terms[i]=s.init}return t.$_mutateRebuild()}b_(t,e,i){return void 0===i&&(i={}),a.assertOptions(i,"literal"),s(void 0!==e,"Missing",t,"value"),s("function"==typeof e||!i.literal,"Only function value supports literal option"),"function"==typeof e&&i.literal&&(e={[a.symbols.literal]:!0,literal:e}),this.$_setFlag(t,e)}C_(t,e,i){if(!this.$_terms.whens)return{schema:this};const s=[],n=[];for(let r=0;r<this.$_terms.whens.length;++r){const o=this.$_terms.whens[r];if(o.concat){s.push(o.concat),n.push("".concat(r,".concat"));continue}const h=o.ref?o.ref.resolve(t,e,i):t,a=o.is?[o]:o.switch,u=n.length;for(let u=0;u<a.length;++u){const{is:c,then:l,otherwise:d}=a[u],f="".concat(r).concat(o.switch?"."+u:"");if(c.$_match(h,e.nest(c,"".concat(f,".is")),i)){if(l){const r=e.localize([...e.path,"".concat(f,".then")],e.ancestors,e.schemas),{schema:o,id:h}=l.C_(t,r,i);s.push(o),n.push("".concat(f,".then").concat(h?"(".concat(h,")"):""));break}}else if(d){const r=e.localize([...e.path,"".concat(f,".otherwise")],e.ancestors,e.schemas),{schema:o,id:h}=d.C_(t,r,i);s.push(o),n.push("".concat(f,".otherwise").concat(h?"(".concat(h,")"):""));break}}if(o.break&&n.length>u)break}const r=n.join(", ");if(e.mainstay.tracer.debug(e,"rule","when",r),!r)return{schema:this};if(!e.mainstay.tracer.active&&this.$_temp.whens[r])return{schema:this.$_temp.whens[r],id:r};let o=this;this.y_.generate&&(o=this.y_.generate(this,t,e,i));for(const t of s)o=o.concat(t);return this.$_root.T_&&this.$_root.T_.k_(o,[this,...s]),this.$_temp.whens[r]=o,{schema:o,id:r}}A_(t,e,i){void 0===i&&(i={}),s(!this.w_(),"Cannot set ".concat(t," inside a ruleset"));const n=this.clone();return n.$_terms[t]&&!i.override||(n.$_terms[t]=[]),i.single?n.$_terms[t].push(e):n.$_terms[t].push(...e),n.$_temp.ruleset=!1,n}w_(){return null!==this.$_temp.ruleset&&!1!==this.$_temp.ruleset}E_(t,e){if(void 0===e&&(e={}),!this.g_.has(t))return this;const i=!1!==e.clone?this.clone():this;i.g_.delete(t);const s=[];for(let e=0;e<i.m_.length;++e){const n=i.m_[e];n.name!==t||n.keep?s.push(n):i.w_()&&e<i.$_temp.ruleset&&--i.$_temp.ruleset}return i.m_=s,i}p_(t,e){a.verifyFlat(t,e.slice(1,-1));const i=this.clone(),n=t[0]===a.symbols.override;if(n&&(t=t.slice(1)),!i[e]&&t.length?i[e]=new y:n&&(i[e]=t.length?new y:null,i.$_mutateRebuild()),!i[e])return i;n&&i[e].override();for(const n of t){s(void 0!==n,"Cannot call allow/valid/invalid with undefined"),s(n!==a.symbols.override,"Override must be the first value");const t="__"===e?"f_":"__";i[t]&&(i[t].remove(n),i[t].length||(s("f_"===e||!i.v_.only,"Setting invalid value",n,"leaves schema rejecting all values due to previous valid rule"),i[t]=null)),i[e].add(n,i.l_)}return i}constructor(t){this.type=t,this.$_root=null,this.y_={},this.a_()}}};b.Base.prototype[a.symbols.any]={version:a.version,compile:u.compile,root:"$_root"},b.Base.prototype.isImmutable=!0,b.Base.prototype.deny=b.Base.prototype.invalid,b.Base.prototype.disallow=b.Base.prototype.invalid,b.Base.prototype.equal=b.Base.prototype.valid,b.Base.prototype.exist=b.Base.prototype.required,b.Base.prototype.not=b.Base.prototype.invalid,b.Base.prototype.options=b.Base.prototype.prefs,b.Base.prototype.preferences=b.Base.prototype.prefs,t.exports=new b.Base},8652:(t,e,i)=>{const s=i(375),n=i(8571),r=i(8160),o={max:1e3,supported:new Set(["undefined","boolean","number","string"])};e.provider={provision:t=>new o.Cache(t)},o.Cache=class{get length(){return this.P_.size}set(t,e){if(null!==t&&!o.supported.has(typeof t))return;let i=this.P_.get(t);if(i)return i.value=e,void this.D_.first(i);i=this.D_.unshift({key:t,value:e}),this.P_.set(t,i),this.N_()}get(t){const e=this.P_.get(t);if(e)return this.D_.first(e),n(e.value)}N_(){if(this.P_.size>this.M_){const t=this.D_.pop();this.P_.delete(t.key)}}constructor(t={}){r.assertOptions(t,["max"]),s(void 0===t.max||t.max&&t.max>0&&isFinite(t.max),"Invalid max cache size"),this.M_=t.max||o.max,this.P_=new Map,this.D_=new o.List}},o.List=class{unshift(t){return t.next=null,t.prev=this.head,this.head&&(this.head.next=t),this.head=t,this.tail||(this.tail=t),t}first(t){t!==this.head&&(this.L_(t),this.unshift(t))}pop(){return this.L_(this.tail)}L_(t){const{next:e,prev:i}=t;return e.prev=i,i&&(i.next=e),t===this.tail&&(this.tail=e),t.prev=null,t.next=null,t}constructor(){this.tail=null,this.head=null}}},8160:(t,e,i)=>{const s=i(375),n=i(7916),r=i(5934);let o,h;const a={isoDate:/^(?:[-+]\d{2})?(?:\d{4}(?!\d{2}\b))(?:(-?)(?:(?:0[1-9]|1[0-2])(?:\1(?:[12]\d|0[1-9]|3[01]))?|W(?:[0-4]\d|5[0-2])(?:-?[1-7])?|(?:00[1-9]|0[1-9]\d|[12]\d{2}|3(?:[0-5]\d|6[1-6])))(?![T]$|[T][\d]+Z$)(?:[T\s](?:(?:(?:[01]\d|2[0-3])(?:(:?)[0-5]\d)?|24\:?00)(?:[.,]\d+(?!:))?)(?:\2[0-5]\d(?:[.,]\d+)?)?(?:[Z]|(?:[+-])(?:[01]\d|2[0-3])(?::?[0-5]\d)?)?)?)?$/};e.version=r.version,e.defaults={abortEarly:!0,allowUnknown:!1,artifacts:!1,cache:!0,context:null,convert:!0,dateFormat:"iso",errors:{escapeHtml:!1,label:"path",language:null,render:!0,stack:!1,wrap:{label:'"',array:"[]"}},externals:!0,messages:{},nonEnumerables:!1,noDefaults:!1,presence:"optional",skipFunctions:!1,stripUnknown:!1,warnings:!1},e.symbols={any:f("@hapi/joi/schema"),arraySingle:Po("arraySingle"),deepDefault:Po("deepDefault"),errors:Po("errors"),literal:Po("literal"),override:Po("override"),parent:Po("parent"),prefs:Po("prefs"),ref:Po("ref"),template:Po("template"),values:Po("values")},e.assertOptions=function(t,e,i){void 0===i&&(i="Options"),s(t&&"object"==typeof t&&!Array.isArray(t),"Options must be of type object");const n=w.keys(t).filter((t=>!e.includes(t)));s(0===n.length,"".concat(i," contain unknown keys: ").concat(n))},e.checkPreferences=function(t){h=h||i(3378);const e=h.preferences.validate(t);if(e.error)throw new n([e.error.details[0].message])},e.compare=function(t,e,i){switch(i){case"=":return t===e;case">":return t>e;case"<":return t<e;case">=":return t>=e;case"<=":return t<=e}},e.default=function(t,e){return void 0===t?e:t},e.isIsoDate=function(t){return a.isoDate.test(t)},e.isNumber=function(t){return"number"==typeof t&&!S(t)},e.isResolvable=function(t){return!!t&&(t[e.symbols.ref]||t[e.symbols.template])},e.isSchema=function(t,i){void 0===i&&(i={});const n=t&&t[e.symbols.any];return!!n&&(s(i.legacy||n.version===e.version,"Cannot mix different versions of joi schemas"),!0)},e.isValues=function(t){return t[e.symbols.values]},e.limit=function(t){return Number.isSafeInteger(t)&&t>=0},e.preferences=function(t,s){o=o||i(6914),t=t||{},s=s||{};const n=w.assign({},t,s);return s.errors&&t.errors&&(n.errors=w.assign({},t.errors,s.errors),n.errors.wrap=w.assign({},t.errors.wrap,s.errors.wrap)),s.messages&&(n.messages=o.compile(s.messages,t.messages)),delete n[e.symbols.prefs],n},e.tryWithPath=function(t,e,i){void 0===i&&(i={});try{return t()}catch(t){throw void 0!==t.path?t.path=e+"."+t.path:t.path=e,i.append&&(t.message="".concat(t.message," (").concat(t.path,")")),t}},e.validateArg=function(t,i,s){let{assert:n,message:r}=s;if(e.isSchema(n)){const e=n.validate(t);return e.error?e.error.message:void 0}if(!n(t))return i?"".concat(i," ").concat(r):r},e.verifyFlat=function(t,e){for(const i of t)s(!Array.isArray(i),"Method no longer accepts array arguments:",e)}},3292:(t,e,i)=>{const s=i(375),n=i(8160),r=i(6133),o={};e.schema=function(t,e,i){void 0===i&&(i={}),n.assertOptions(i,["appendPath","override"]);try{return o.schema(t,e,i)}catch(t){throw i.appendPath&&void 0!==t.path&&(t.message="".concat(t.message," (").concat(t.path,")")),t}},o.schema=function(t,e,i){s(void 0!==e,"Invalid undefined schema"),Array.isArray(e)&&(s(e.length,"Invalid empty array schema"),1===e.length&&(e=e[0]));const r=function(e){for(var s=arguments.length,n=new Array(s>1?s-1:0),r=1;r<s;r++)n[r-1]=arguments[r];return!1!==i.override?e.valid(t.override,...n):e.valid(...n)};if(o.simple(e))return r(t,e);if("function"==typeof e)return t.custom(e);if(s("object"==typeof e,"Invalid schema content:",typeof e),n.isResolvable(e))return r(t,e);if(n.isSchema(e))return e;if(Array.isArray(e)){for(const i of e)if(!o.simple(i))return t.alternatives().try(...e);return r(t,...e)}return e instanceof RegExp?t.string().regex(e):e instanceof Date?r(t.date(),e):(s(w.getPrototypeOf(e)===w.getPrototypeOf({}),"Schema can only contain plain objects"),t.object().keys(e))},e.ref=function(t,e){return r.isRef(t)?t:r.create(t,e)},e.compile=function(t,i,r){void 0===r&&(r={}),n.assertOptions(r,["legacy"]);const h=i&&i[n.symbols.any];if(h)return s(r.legacy||h.version===n.version,"Cannot mix different versions of joi schemas:",h.version,n.version),i;if("object"!=typeof i||!r.legacy)return e.schema(t,i,{appendPath:!0});const a=o.walk(i);return a?a.compile(a.root,i):e.schema(t,i,{appendPath:!0})},o.walk=function(t){if("object"!=typeof t)return null;if(Array.isArray(t)){for(const e of t){const t=o.walk(e);if(t)return t}return null}const e=t[n.symbols.any];if(e)return{root:t[e.root],compile:e.compile};s(w.getPrototypeOf(t)===w.getPrototypeOf({}),"Schema can only contain plain objects");for(const e in t){const i=o.walk(t[e]);if(i)return i}return null},o.simple=function(t){return null===t||["boolean","string","number"].includes(typeof t)},e.when=function(t,i,h){if(void 0===h&&(s(i&&"object"==typeof i,"Missing options"),h=i,i=r.create(".")),Array.isArray(h)&&(h={switch:h}),n.assertOptions(h,["is","not","then","otherwise","switch","break"]),n.isSchema(i))return s(void 0===h.is,'"is" can not be used with a schema condition'),s(void 0===h.not,'"not" can not be used with a schema condition'),s(void 0===h.switch,'"switch" can not be used with a schema condition'),o.condition(t,{is:i,then:h.then,otherwise:h.otherwise,break:h.break});if(s(r.isRef(i)||"string"==typeof i,"Invalid condition:",i),s(void 0===h.not||void 0===h.is,'Cannot combine "is" with "not"'),void 0===h.switch){let a=h;void 0!==h.not&&(a={is:h.not,then:h.otherwise,otherwise:h.then,break:h.break});let u=void 0!==a.is?t.$_compile(a.is):t.$_root.invalid(null,!1,0,"").required();return s(void 0!==a.then||void 0!==a.otherwise,'options must have at least one of "then", "otherwise", or "switch"'),s(void 0===a.break||void 0===a.then||void 0===a.otherwise,"Cannot specify then, otherwise, and break all together"),void 0===h.is||r.isRef(h.is)||n.isSchema(h.is)||(u=u.required()),o.condition(t,{ref:e.ref(i),is:u,then:a.then,otherwise:a.otherwise,break:a.break})}s(Array.isArray(h.switch),'"switch" must be an array'),s(void 0===h.is,'Cannot combine "switch" with "is"'),s(void 0===h.not,'Cannot combine "switch" with "not"'),s(void 0===h.then,'Cannot combine "switch" with "then"');const a={ref:e.ref(i),switch:[],break:h.break};for(let e=0;e<h.switch.length;++e){const i=h.switch[e],o=e===h.switch.length-1;n.assertOptions(i,o?["is","then","otherwise"]:["is","then"]),s(void 0!==i.is,'Switch statement missing "is"'),s(void 0!==i.then,'Switch statement missing "then"');const u={is:t.$_compile(i.is),then:t.$_compile(i.then)};if(r.isRef(i.is)||n.isSchema(i.is)||(u.is=u.is.required()),o){s(void 0===h.otherwise||void 0===i.otherwise,'Cannot specify "otherwise" inside and outside a "switch"');const e=void 0!==h.otherwise?h.otherwise:i.otherwise;void 0!==e&&(s(void 0===a.break,"Cannot specify both otherwise and break"),u.otherwise=t.$_compile(e))}a.switch.push(u)}return a},o.condition=function(t,e){for(const i of["then","otherwise"])void 0===e[i]?delete e[i]:e[i]=t.$_compile(e[i]);return e}},6354:(t,e,i)=>{const s=i(5688),n=i(8160),r=i(3328);e.Report=class{B_(t){if(this.template=t,!this.flags.label&&0===this.path.length){const t=this.O_(this.template,"root");t&&(this.local.label=t)}}toString(){if(this.message)return this.message;const t=this.code;if(!this.prefs.errors.render)return this.code;const e=this.O_(this.template)||this.O_(this.prefs.messages)||this.O_(this.messages);return void 0===e?'Error code "'.concat(t,'" is not defined, your custom type is missing the correct messages definition'):(this.message=e.render(this.value,this.state,this.prefs,this.local,{errors:this.prefs.errors,messages:[this.prefs.messages,this.messages]}),this.prefs.errors.label||(this.message=this.message.replace(/^"" /,"").trim()),this.message)}O_(t,i){return e.template(this.value,t,i||this.code,this.state,this.prefs)}constructor(t,i,s,n,r,o,h){if(this.code=t,this.flags=n,this.messages=r,this.path=o.path,this.prefs=h,this.state=o,this.value=i,this.message=null,this.template=null,this.local=s||{},this.local.label=e.label(this.flags,this.state,this.prefs,this.messages),void 0===this.value||this.local.hasOwnProperty("value")||(this.local.value=this.value),this.path.length){const t=this.path[this.path.length-1];"object"!=typeof t&&(this.local.key=t)}}},e.path=function(t){let e="";for(const i of t)"object"!=typeof i&&("string"==typeof i?(e&&(e+="."),e+=i):e+="[".concat(i,"]"));return e},e.template=function(t,e,i,s,o){if(!e)return;if(r.isTemplate(e))return"root"!==i?e:null;let h=o.errors.language;if(n.isResolvable(h)&&(h=h.resolve(t,s,o)),h&&e[h]){if(void 0!==e[h][i])return e[h][i];if(void 0!==e[h]["*"])return e[h]["*"]}return e[i]?e[i]:e["*"]},e.label=function(t,i,s,n){if(!s.errors.label)return"";if(t.label)return t.label;let r=i.path;return"key"===s.errors.label&&i.path.length>1&&(r=i.path.slice(-1)),e.path(r)||e.template(null,s.messages,"root",i,s)||n&&e.template(null,n,"root",i,s)||"value"},e.process=function(t,i,s){if(!t)return null;const{override:n,message:r,details:o}=e.details(t);if(n)return n;if(s.errors.stack)return new e.ValidationError(r,o,i);const h=g.stackTraceLimit;g.stackTraceLimit=0;const a=new e.ValidationError(r,o,i);return g.stackTraceLimit=h,a},e.details=function(t,e){void 0===e&&(e={});let i=[];const s=[];for(const n of t){if(n instanceof g){if(!1!==e.override)return{override:n};const t=n.toString();i.push(t),s.push({message:t,type:"override",context:{error:n}});continue}const t=n.toString();i.push(t),s.push({message:t,path:n.path.filter((t=>"object"!=typeof t)),type:n.code,context:n.local})}return i.length>1&&(i=[...new Set(i)]),{message:i.join(". "),details:s}},e.ValidationError=class extends g{static isError(t){return t instanceof e.ValidationError}constructor(t,e,i){super(t),this.F_=i,this.details=e}},e.ValidationError.prototype.isJoi=!0,e.ValidationError.prototype.name="ValidationError",e.ValidationError.prototype.annotate=s.error},8901:(t,e,i)=>{const s=i(375),n=i(8571),r=i(8160),o=i(6914),h={};e.type=function(t,e){const i=w.getPrototypeOf(t),a=n(i),u=t.S_(w.create(a)),c=w.assign({},e);delete c.base,a.y_=c;const l=i.y_||{};c.messages=o.merge(l.messages,c.messages),c.properties=w.assign({},l.properties,c.properties),u.type=c.type,c.flags=w.assign({},l.flags,c.flags);const d=w.assign({},l.terms);if(c.terms)for(const t in c.terms){const e=c.terms[t];s(void 0===u.$_terms[t],"Invalid term override for",c.type,t),u.$_terms[t]=e.init,d[t]=e}c.terms=d,c.args||(c.args=l.args),c.prepare=h.prepare(c.prepare,l.prepare),c.coerce&&("function"==typeof c.coerce&&(c.coerce={method:c.coerce}),c.coerce.from&&!Array.isArray(c.coerce.from)&&(c.coerce={method:c.coerce.method,from:[].concat(c.coerce.from)})),c.coerce=h.coerce(c.coerce,l.coerce),c.validate=h.validate(c.validate,l.validate);const f=w.assign({},l.rules);if(c.rules)for(const t in c.rules){const e=c.rules[t];s("object"==typeof e,"Invalid rule definition for",c.type,t);let i=e.method;if(void 0===i&&(i=function(){return this.$_addRule(t)}),i&&(s(!a[t],"Rule conflict in",c.type,t),a[t]=i),s(!f[t],"Rule conflict in",c.type,t),f[t]=e,e.alias){const t=[].concat(e.alias);for(const i of t)a[i]=e.method}e.args&&(e.argsByName=new Map,e.args=e.args.map((t=>("string"==typeof t&&(t={name:t}),s(!e.argsByName.has(t.name),"Duplicated argument name",t.name),r.isSchema(t.assert)&&(t.assert=t.assert.strict().label(t.name)),e.argsByName.set(t.name,t),t))))}c.rules=f;const _=w.assign({},l.modifiers);if(c.modifiers)for(const t in c.modifiers){s(!a[t],"Rule conflict in",c.type,t);const e=c.modifiers[t];s("function"==typeof e,"Invalid modifier definition for",c.type,t);const i=function(e){return this.rule({[t]:e})};a[t]=i,_[t]=e}if(c.modifiers=_,c.overrides){a.R_=i,u.$_super={};for(const t in c.overrides)s(i[t],"Cannot override missing",t),c.overrides[t][r.symbols.parent]=i[t],u.$_super[t]=i[t].bind(u);w.assign(a,c.overrides)}c.cast=w.assign({},l.cast,c.cast);const v=w.assign({},l.manifest,c.manifest);return v.build=h.build(c.manifest&&c.manifest.build,l.manifest&&l.manifest.build),c.manifest=v,c.rebuild=h.rebuild(c.rebuild,l.rebuild),u},h.build=function(t,e){return t&&e?function(i,s){return e(t(i,s),s)}:t||e},h.coerce=function(t,e){return t&&e?{from:t.from&&e.from?[...new Set([...t.from,...e.from])]:null,method(i,s){let n;if((!e.from||e.from.includes(typeof i))&&(n=e.method(i,s),n)){if(n.errors||void 0===n.value)return n;i=n.value}if(!t.from||t.from.includes(typeof i)){const e=t.method(i,s);if(e)return e}return n}}:t||e},h.prepare=function(t,e){return t&&e?function(i,s){const n=t(i,s);if(n){if(n.errors||void 0===n.value)return n;i=n.value}return e(i,s)||n}:t||e},h.rebuild=function(t,e){return t&&e?function(i){e(i),t(i)}:t||e},h.validate=function(t,e){return t&&e?function(i,s){const n=e(i,s);if(n){if(n.errors&&(!Array.isArray(n.errors)||n.errors.length))return n;i=n.value}return t(i,s)||n}:t||e}},5107:(t,e,i)=>{const s=i(375),n=i(8571),r=i(8652),o=i(8160),h=i(3292),a=i(6354),u=i(8901),c=i(9708),l=i(6133),d=i(3328),f=i(1152);let _;const v={types:{alternatives:i(4946),any:i(8068),array:i(546),boolean:i(4937),date:i(7500),function:i(390),link:i(8785),number:i(3832),object:i(8966),string:i(7417),symbol:i(8826)},aliases:{alt:"alternatives",bool:"boolean",func:"function"},root:function(){const t={V_:new Set(w.keys(v.types))};for(const e of t.V_)t[e]=function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return s(!i.length||["alternatives","link","object"].includes(e),"The",e,"type does not allow arguments"),v.generate(this,v.types[e],i)};for(const e of["allow","custom","disallow","equal","exist","forbidden","invalid","not","only","optional","options","prefs","preferences","required","strip","valid","when"])t[e]=function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return this.any()[e](...i)};w.assign(t,v.methods);for(const e in v.aliases){const i=v.aliases[e];t[e]=t[i]}return t.x=t.expression,f.setup&&f.setup(t),t}};v.methods={ValidationError:a.ValidationError,version:o.version,cache:r.provider,assert(t,e){for(var i=arguments.length,s=new Array(i>2?i-2:0),n=2;n<i;n++)s[n-2]=arguments[n];v.assert(t,e,!0,s)},attempt:function(t,e){for(var i=arguments.length,s=new Array(i>2?i-2:0),n=2;n<i;n++)s[n-2]=arguments[n];return v.assert(t,e,!1,s)},build(t){return s("function"==typeof c.build,"Manifest functionality disabled"),c.build(this,t)},checkPreferences(t){o.checkPreferences(t)},compile(t,e){return h.compile(this,t,e)},defaults(t){s("function"==typeof t,"modifier must be a function");const e=w.assign({},this);for(const i of e.V_){const n=t(e[i]());s(o.isSchema(n),"modifier must return a valid schema object"),e[i]=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return v.generate(this,n,e)}}return e},expression:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return new d(...e)},extend(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];o.verifyFlat(e,"extend"),_=_||i(3378),s(e.length,"You need to provide at least one extension"),this.assert(e,_.extensions);const r=w.assign({},this);r.V_=new Set(r.V_);for(let t of e){"function"==typeof t&&(t=t(r)),this.assert(t,_.extension);const e=v.expandExtension(t,r);for(const t of e){s(void 0===r[t.type]||r.V_.has(t.type),"Cannot override name",t.type);const e=t.base||this.any(),i=u.type(e,t);r.V_.add(t.type),r[t.type]=function(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];return v.generate(this,i,e)}}}return r},isError:a.ValidationError.isError,isExpression:d.isTemplate,isRef:l.isRef,isSchema:o.isSchema,in:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return l.in(...e)},override:o.symbols.override,ref:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return l.create(...e)},types(){const t={};for(const e of this.V_)t[e]=this[e]();for(const e in v.aliases)t[e]=this[e]();return t}},v.assert=function(t,e,i,s){const r=s[0]instanceof g||"string"==typeof s[0]?s[0]:null,h=null!==r?s[1]:s[0],u=e.validate(t,o.preferences({errors:{stack:!0}},h||{}));let c=u.error;if(!c)return u.value;if(r instanceof g)throw r;const l=i&&"function"==typeof c.annotate?c.annotate():c.message;throw c instanceof a.ValidationError==0&&(c=n(c)),c.message=r?"".concat(r," ").concat(l):l,c},v.generate=function(t,e,i){return s(t,"Must be invoked on a Joi instance."),e.$_root=t,e.y_.args&&i.length?e.y_.args(e,...i):e},v.expandExtension=function(t,e){if("string"==typeof t.type)return[t];const i=[];for(const s of e.V_)if(t.type.test(s)){const n=w.assign({},t);n.type=s,n.base=e[s](),i.push(n)}return i},t.exports=v.root()},6914:(t,e,i)=>{const s=i(375),n=i(8571),r=i(3328);e.compile=function(t,e){if("string"==typeof t)return s(!e,"Cannot set single message string"),new r(t);if(r.isTemplate(t))return s(!e,"Cannot set single message template"),t;s("object"==typeof t&&!Array.isArray(t),"Invalid message options"),e=e?n(e):{};for(let i in t){const n=t[i];if("root"===i||r.isTemplate(n)){e[i]=n;continue}if("string"==typeof n){e[i]=new r(n);continue}s("object"==typeof n&&!Array.isArray(n),"Invalid message for",i);const o=i;for(i in e[o]=e[o]||{},n){const t=n[i];"root"===i||r.isTemplate(t)?e[o][i]=t:(s("string"==typeof t,"Invalid message for",i,"in",o),e[o][i]=new r(t))}}return e},e.decompile=function(t){const e={};for(let i in t){const s=t[i];if("root"===i){e.root=s;continue}if(r.isTemplate(s)){e[i]=s.describe({compact:!0});continue}const n=i;for(i in e[n]={},s){const t=s[i];"root"!==i?e[n][i]=t.describe({compact:!0}):e[n].root=t}}return e},e.merge=function(t,i){if(!t)return e.compile(i);if(!i)return t;if("string"==typeof i)return new r(i);if(r.isTemplate(i))return i;const o=n(t);for(let t in i){const e=i[t];if("root"===t||r.isTemplate(e)){o[t]=e;continue}if("string"==typeof e){o[t]=new r(e);continue}s("object"==typeof e&&!Array.isArray(e),"Invalid message for",t);const n=t;for(t in o[n]=o[n]||{},e){const i=e[t];"root"===t||r.isTemplate(i)?o[n][t]=i:(s("string"==typeof i,"Invalid message for",t,"in",n),o[n][t]=new r(i))}}return o}},2294:(t,e,i)=>{const s=i(375),n=i(8160),r=i(6133),o={};e.Ids=o.Ids=class{clone(){const t=new o.Ids;return t.W_=new Map(this.W_),t.U_=new Map(this.U_),t.G_=this.G_,t}concat(t){t.G_&&(this.G_=!0);for(const[e,i]of t.W_.entries())s(!this.U_.has(e),"Schema id conflicts with existing key:",e),this.W_.set(e,i);for(const[e,i]of t.U_.entries())s(!this.W_.has(e),"Schema key conflicts with existing id:",e),this.U_.set(e,i)}fork(t,e,i){const r=this.H_(t);r.push({schema:i});const h=r.shift();let a={id:h.id,schema:e(h.schema)};s(n.isSchema(a.schema),"adjuster function failed to return a joi schema type");for(const t of r)a={id:t.id,schema:o.fork(t.schema,a.id,a.schema)};return a.schema}labels(t,e){void 0===e&&(e=[]);const i=t[0],s=this.Z_(i);if(!s)return[...e,...t].join(".");const n=t.slice(1);return e=[...e,s.schema.v_.label||i],n.length?s.schema.u_.labels(n,e):e.join(".")}reach(t,e){void 0===e&&(e=[]);const i=t[0],n=this.Z_(i);s(n,"Schema does not contain path",[...e,...t].join("."));const r=t.slice(1);return r.length?n.schema.u_.reach(r,[...e,i]):n.schema}register(t,e){let{key:i}=void 0===e?{}:e;if(!t||!n.isSchema(t))return;(t.$_property("schemaChain")||t.u_.G_)&&(this.G_=!0);const r=t.v_.id;if(r){const e=this.W_.get(r);s(!e||e.schema===t,"Cannot add different schemas with the same id:",r),s(!this.U_.has(r),"Schema id conflicts with existing key:",r),this.W_.set(r,{schema:t,id:r})}i&&(s(!this.U_.has(i),"Schema already contains key:",i),s(!this.W_.has(i),"Schema key conflicts with existing id:",i),this.U_.set(i,{schema:t,id:i}))}reset(){this.W_=new Map,this.U_=new Map,this.G_=!1}H_(t,e,i){void 0===e&&(e=[]),void 0===i&&(i=[]);const n=t[0],r=this.Z_(n);s(r,"Schema does not contain path",[...e,...t].join(".")),i=[r,...i];const o=t.slice(1);return o.length?r.schema.u_.H_(o,[...e,n],i):i}Z_(t){return this.W_.get(t)||this.U_.get(t)}constructor(){this.W_=new Map,this.U_=new Map,this.G_=!1}},o.fork=function(t,i,s){const n=e.schema(t,{each:(t,e)=>{let{key:n}=e;if(i===(t.v_.id||n))return s},ref:!1});return n?n.$_mutateRebuild():t},e.schema=function(t,e){let i;for(const s in t.v_){if("_"===s[0])continue;const n=o.scan(t.v_[s],{source:"flags",name:s},e);void 0!==n&&(i=i||t.clone(),i.v_[s]=n)}for(let s=0;s<t.m_.length;++s){const n=t.m_[s],r=o.scan(n.args,{source:"rules",name:n.name},e);if(void 0!==r){i=i||t.clone();const e=w.assign({},n);e.args=r,i.m_[s]=e,i.g_.get(n.name)===n&&i.g_.set(n.name,e)}}for(const s in t.$_terms){if("_"===s[0])continue;const n=o.scan(t.$_terms[s],{source:"terms",name:s},e);void 0!==n&&(i=i||t.clone(),i.$_terms[s]=n)}return i},o.scan=function(t,e,i,s,h){const a=s||[];if(null===t||"object"!=typeof t)return;let u;if(Array.isArray(t)){for(let s=0;s<t.length;++s){const n="terms"===e.source&&"keys"===e.name&&t[s].key,r=o.scan(t[s],e,i,[s,...a],n);void 0!==r&&(u=u||t.slice(),u[s]=r)}return u}if(!1!==i.schema&&n.isSchema(t)||!1!==i.ref&&r.isRef(t)){const s=i.each(t,v(d({},e),{path:a,key:h}));return s===t?void 0:s}for(const s in t){if("_"===s[0])continue;const n=o.scan(t[s],e,i,[s,...a],h);void 0!==n&&(u=u||w.assign({},t),u[s]=n)}return u}},6133:(t,e,i)=>{const s=i(375),n=i(8571),r=i(9621),o=i(8160);let h;const a={symbol:Po("ref"),defaults:{adjust:null,in:!1,iterables:null,map:null,separator:".",type:"value"}};e.create=function(t,e){void 0===e&&(e={}),s("string"==typeof t,"Invalid reference key:",t),o.assertOptions(e,["adjust","ancestor","in","iterables","map","prefix","render","separator"]),s(!e.prefix||"object"==typeof e.prefix,"options.prefix must be of type object");const i=w.assign({},a.defaults,e);delete i.prefix;const n=i.separator,r=a.context(t,n,e.prefix);if(i.type=r.type,t=r.key,"value"===i.type)if(r.root&&(s(!n||t[0]!==n,"Cannot specify relative path with root prefix"),i.ancestor="root",t||(t=null)),n&&n===t)t=null,i.ancestor=0;else if(void 0!==i.ancestor)s(!n||!t||t[0]!==n,"Cannot combine prefix with ancestor option");else{const[e,s]=a.ancestor(t,n);s&&""===(t=t.slice(s))&&(t=null),i.ancestor=e}return i.path=n?null===t?[]:t.split(n):[t],new a.Ref(i)},e.in=function(t,i){return void 0===i&&(i={}),e.create(t,v(d({},i),{in:!0}))},e.isRef=function(t){return!!t&&!!t[o.symbols.ref]},a.Ref=class{resolve(t,e,i,n,r){return void 0===r&&(r={}),s(!this.in||r.in,"Invalid in() reference usage"),"global"===this.type?this.Gd(i.context,e,r):"local"===this.type?this.Gd(n,e,r):this.ancestor?"root"===this.ancestor?this.Gd(e.ancestors[e.ancestors.length-1],e,r):(s(this.ancestor<=e.ancestors.length,"Invalid reference exceeds the schema root:",this.display),this.Gd(e.ancestors[this.ancestor-1],e,r)):this.Gd(t,e,r)}Gd(t,e,i){let s;if("value"===this.type&&e.mainstay.shadow&&!1!==i.shadow&&(s=e.mainstay.shadow.get(this.absolute(e))),void 0===s&&(s=r(t,this.path,{iterables:this.iterables,functions:!0})),this.adjust&&(s=this.adjust(s)),this.map){const t=this.map.get(s);void 0!==t&&(s=t)}return e.mainstay&&e.mainstay.tracer.resolve(e,this,s),s}toString(){return this.display}absolute(t){return[...t.path.slice(0,-this.ancestor),...this.path]}clone(){return new a.Ref(this)}describe(){const t={path:this.path};"value"!==this.type&&(t.type=this.type),"."!==this.separator&&(t.separator=this.separator),"value"===this.type&&1!==this.ancestor&&(t.ancestor=this.ancestor),this.map&&(t.map=[...this.map]);for(const e of["adjust","iterables","render"])null!==this[e]&&void 0!==this[e]&&(t[e]=this[e]);return!1!==this.in&&(t.in=!0),{ref:t}}updateDisplay(){const t=null!==this.key?this.key:"";if("value"!==this.type)return void(this.display="ref:".concat(this.type,":").concat(t));if(!this.separator)return void(this.display="ref:".concat(t));if(!this.ancestor)return void(this.display="ref:".concat(this.separator).concat(t));if("root"===this.ancestor)return void(this.display="ref:root:".concat(t));if(1===this.ancestor)return void(this.display="ref:".concat(t||".."));const e=new Array(this.ancestor+1).fill(this.separator).join("");this.display="ref:".concat(e).concat(t||"")}constructor(t){s("object"==typeof t,"Invalid reference construction"),o.assertOptions(t,["adjust","ancestor","in","iterables","map","path","render","separator","type","depth","key","root","display"]),s([!1,void 0].includes(t.separator)||"string"==typeof t.separator&&1===t.separator.length,"Invalid separator"),s(!t.adjust||"function"==typeof t.adjust,"options.adjust must be a function"),s(!t.map||Array.isArray(t.map),"options.map must be an array"),s(!t.map||!t.adjust,"Cannot set both map and adjust options"),w.assign(this,a.defaults,t),s("value"===this.type||void 0===this.ancestor,"Non-value references cannot reference ancestors"),Array.isArray(this.map)&&(this.map=new Map(this.map)),this.depth=this.path.length,this.key=this.path.length?this.path.join(this.separator):null,this.root=this.path[0],this.updateDisplay()}},a.Ref.prototype[o.symbols.ref]=!0,e.build=function(t){return"value"===(t=w.assign({},a.defaults,t)).type&&void 0===t.ancestor&&(t.ancestor=1),new a.Ref(t)},a.context=function(t,e,i){if(void 0===i&&(i={}),t=t.trim(),i){const s=void 0===i.global?"$":i.global;if(s!==e&&t.startsWith(s))return{key:t.slice(s.length),type:"global"};const n=void 0===i.local?"#":i.local;if(n!==e&&t.startsWith(n))return{key:t.slice(n.length),type:"local"};const r=void 0===i.root?"/":i.root;if(r!==e&&t.startsWith(r))return{key:t.slice(r.length),type:"value",root:!0}}return{key:t,type:"value"}},a.ancestor=function(t,e){if(!e)return[1,0];if(t[0]!==e)return[1,0];if(t[1]!==e)return[0,1];let i=2;for(;t[i]===e;)++i;return[i-1,i]},e.toSibling=0,e.toParent=1,e.Manager=class{register(t,s){if(t)if(s=void 0===s?e.toParent:s,Array.isArray(t))for(const e of t)this.register(e,s);else if(o.isSchema(t))for(const e of t.l_.refs)e.ancestor-s>=0&&this.refs.push({ancestor:e.ancestor-s,root:e.root});else e.isRef(t)&&"value"===t.type&&t.ancestor-s>=0&&this.refs.push({ancestor:t.ancestor-s,root:t.root}),h=h||i(3328),h.isTemplate(t)&&this.register(t.refs(),s)}get length(){return this.refs.length}clone(){const t=new e.Manager;return t.refs=n(this.refs),t}reset(){this.refs=[]}roots(){return this.refs.filter((t=>!t.ancestor)).map((t=>t.root))}constructor(){this.refs=[]}}},3378:(t,e,i)=>{const s=i(5107),n={};n.wrap=s.string().min(1).max(2).allow(!1),e.preferences=s.object({allowUnknown:s.boolean(),abortEarly:s.boolean(),artifacts:s.boolean(),cache:s.boolean(),context:s.object(),convert:s.boolean(),dateFormat:s.valid("date","iso","string","time","utc"),debug:s.boolean(),errors:{escapeHtml:s.boolean(),label:s.valid("path","key",!1),language:[s.string(),s.object().ref()],render:s.boolean(),stack:s.boolean(),wrap:{label:n.wrap,array:n.wrap,string:n.wrap}},externals:s.boolean(),messages:s.object(),noDefaults:s.boolean(),nonEnumerables:s.boolean(),presence:s.valid("required","optional","forbidden"),skipFunctions:s.boolean(),stripUnknown:s.object({arrays:s.boolean(),objects:s.boolean()}).or("arrays","objects").allow(!0,!1),warnings:s.boolean()}).strict(),n.nameRx=/^[a-zA-Z0-9]\w*$/,n.rule=s.object({alias:s.array().items(s.string().pattern(n.nameRx)).single(),args:s.array().items(s.string(),s.object({name:s.string().pattern(n.nameRx).required(),ref:s.boolean(),assert:s.alternatives([s.function(),s.object().schema()]).conditional("ref",{is:!0,then:s.required()}),normalize:s.function(),message:s.string().when("assert",{is:s.function(),then:s.required()})})),convert:s.boolean(),manifest:s.boolean(),method:s.function().allow(!1),multi:s.boolean(),validate:s.function()}),e.extension=s.object({type:s.alternatives([s.string(),s.object().regex()]).required(),args:s.function(),cast:s.object().pattern(n.nameRx,s.object({from:s.function().maxArity(1).required(),to:s.function().minArity(1).maxArity(2).required()})),base:s.object().schema().when("type",{is:s.object().regex(),then:s.forbidden()}),coerce:[s.function().maxArity(3),s.object({method:s.function().maxArity(3).required(),from:s.array().items(s.string()).single()})],flags:s.object().pattern(n.nameRx,s.object({setter:s.string(),default:s.any()})),manifest:{build:s.function().arity(2)},messages:[s.object(),s.string()],modifiers:s.object().pattern(n.nameRx,s.function().minArity(1).maxArity(2)),overrides:s.object().pattern(n.nameRx,s.function()),prepare:s.function().maxArity(3),rebuild:s.function().arity(1),rules:s.object().pattern(n.nameRx,n.rule),terms:s.object().pattern(n.nameRx,s.object({init:s.array().allow(null).required(),manifest:s.object().pattern(/.+/,[s.valid("schema","single"),s.object({mapped:s.object({from:s.string().required(),to:s.string().required()}).required()})])})),validate:s.function().maxArity(3)}).strict(),e.extensions=s.array().items(s.object(),s.function().arity(1)).strict(),n.desc={buffer:s.object({buffer:s.string()}),func:s.object({function:s.function().required(),options:{literal:!0}}),override:s.object({override:!0}),ref:s.object({ref:s.object({type:s.valid("value","global","local"),path:s.array().required(),separator:s.string().length(1).allow(!1),ancestor:s.number().min(0).integer().allow("root"),map:s.array().items(s.array().length(2)).min(1),adjust:s.function(),iterables:s.boolean(),in:s.boolean(),render:s.boolean()}).required()}),regex:s.object({regex:s.string().min(3)}),special:s.object({special:s.valid("deep").required()}),template:s.object({template:s.string().required(),options:s.object()}),value:s.object({value:s.alternatives([s.object(),s.array()]).required()})},n.desc.entity=s.alternatives([s.array().items(s.link("...")),s.boolean(),s.function(),s.number(),s.string(),n.desc.buffer,n.desc.func,n.desc.ref,n.desc.regex,n.desc.special,n.desc.template,n.desc.value,s.link("/")]),n.desc.values=s.array().items(null,s.boolean(),s.function(),s.number().allow(1/0,-1/0),s.string().allow(""),s.symbol(),n.desc.buffer,n.desc.func,n.desc.override,n.desc.ref,n.desc.regex,n.desc.template,n.desc.value),n.desc.messages=s.object().pattern(/.+/,[s.string(),n.desc.template,s.object().pattern(/.+/,[s.string(),n.desc.template])]),e.description=s.object({type:s.string().required(),flags:s.object({cast:s.string(),default:s.any(),description:s.string(),empty:s.link("/"),failover:n.desc.entity,id:s.string(),label:s.string(),only:!0,presence:["optional","required","forbidden"],result:["raw","strip"],strip:s.boolean(),unit:s.string()}).unknown(),preferences:{allowUnknown:s.boolean(),abortEarly:s.boolean(),artifacts:s.boolean(),cache:s.boolean(),convert:s.boolean(),dateFormat:["date","iso","string","time","utc"],errors:{escapeHtml:s.boolean(),label:["path","key"],language:[s.string(),n.desc.ref],wrap:{label:n.wrap,array:n.wrap}},externals:s.boolean(),messages:n.desc.messages,noDefaults:s.boolean(),nonEnumerables:s.boolean(),presence:["required","optional","forbidden"],skipFunctions:s.boolean(),stripUnknown:s.object({arrays:s.boolean(),objects:s.boolean()}).or("arrays","objects").allow(!0,!1),warnings:s.boolean()},allow:n.desc.values,invalid:n.desc.values,rules:s.array().min(1).items({name:s.string().required(),args:s.object().min(1),keep:s.boolean(),message:[s.string(),n.desc.messages],warn:s.boolean()}),keys:s.object().pattern(/.*/,s.link("/")),link:n.desc.ref}).pattern(/^[a-z]\w*$/,s.any())},493:(t,e,i)=>{const s=i(8571),n=i(9621),r=i(8160),o={value:Po("value")};t.exports=o.State=class{localize(t,e,i){void 0===e&&(e=null),void 0===i&&(i=null);const s=new o.State(t,e,this);return i&&s.schemas&&(s.schemas=[o.schemas(i),...s.schemas]),s}nest(t,e){const i=new o.State(this.path,this.ancestors,this);return i.schemas=i.schemas&&[o.schemas(t),...i.schemas],i.debug=e,i}shadow(t,e){this.mainstay.shadow=this.mainstay.shadow||new o.Shadow,this.mainstay.shadow.set(this.path,t,e)}snapshot(){this.mainstay.shadow&&(this.X_=s(this.mainstay.shadow.node(this.path))),this.mainstay.snapshot()}restore(){this.mainstay.shadow&&(this.mainstay.shadow.override(this.path,this.X_),this.X_=void 0),this.mainstay.restore()}commit(){this.mainstay.shadow&&(this.mainstay.shadow.override(this.path,this.X_),this.X_=void 0),this.mainstay.commit()}constructor(t,e,i){this.path=t,this.ancestors=e,this.mainstay=i.mainstay,this.schemas=i.schemas,this.debug=null}},o.schemas=function(t){return r.isSchema(t)?{schema:t}:t},o.Shadow=class{set(t,e,i){if(!t.length||"strip"===i&&"number"==typeof t[t.length-1])return;this.p_=this.p_||new Map;let s=this.p_;for(let e=0;e<t.length;++e){const i=t[e];let n=s.get(i);n||(n=new Map,s.set(i,n)),s=n}s[o.value]=e}get(t){const e=this.node(t);if(e)return e[o.value]}node(t){if(this.p_)return n(this.p_,t,{iterables:!0})}override(t,e){if(!this.p_)return;const i=t.slice(0,-1),s=t[t.length-1],r=n(this.p_,i,{iterables:!0});e?r.set(s,e):r&&r.delete(s)}constructor(){this.p_=null}}},3328:(t,e,i)=>{const s=i(375),n=i(8571),r=i(5277),o=i(1447),h=i(8160),a=i(6354),u=i(6133),c={symbol:Po("template"),opens:new Array(1e3).join("\0"),closes:new Array(1e3).join("\x01"),dateFormat:{date:Date.prototype.toDateString,iso:Date.prototype.toISOString,string:Date.prototype.toString,time:Date.prototype.toTimeString,utc:Date.prototype.toUTCString}};t.exports=c.Template=class{z_(){if(!this.source.includes("{"))return;const t=c.encode(this.source),e=c.split(t);let i=!1;const s=[],n=e.shift();n&&s.push(n);for(const t of e){const e="{"!==t[0],n=e?"}":"}}",r=t.indexOf(n);if(-1===r||"{"===t[1]){s.push("{".concat(c.decode(t)));continue}let o=t.slice(e?0:1,r);const h=":"===o[0];h&&(o=o.slice(1));const a=this.q_(c.decode(o),{raw:e,wrapped:h});s.push(a),"string"!=typeof a&&(i=!0);const u=t.slice(r+n.length);u&&s.push(c.decode(u))}i?this.O_=s:this.rendered=s.join("")}static date(t,e){return c.dateFormat[e.dateFormat].call(t)}describe(t){if(void 0===t&&(t={}),!this.Y_&&t.compact)return this.source;const e={template:this.source};return this.Y_&&(e.options=this.Y_),this.K_&&(e.functions=this.K_),e}static build(t){return new c.Template(t.template,t.options||t.functions?v(d({},t.options),{functions:t.functions}):void 0)}isDynamic(){return!!this.O_}static isTemplate(t){return!!t&&!!t[h.symbols.template]}refs(){if(!this.O_)return;const t=[];for(const e of this.O_)"string"!=typeof e&&t.push(...e.refs);return t}resolve(t,e,i,s){return this.O_&&1===this.O_.length?this.j_(this.O_[0],t,e,i,s,{}):this.render(t,e,i,s)}j_(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];return t.ref?t.ref.resolve(...i):t.formula.evaluate(i)}render(t,e,i,s,n){if(void 0===n&&(n={}),!this.isDynamic())return this.rendered;const o=[];for(const h of this.O_)if("string"==typeof h)o.push(h);else{const a=this.j_(h,t,e,i,s,n),u=c.stringify(a,t,e,i,s,n);if(void 0!==u){const t=h.raw||!1===(n.errors&&n.errors.escapeHtml)?u:r(u);o.push(c.wrap(t,h.wrapped&&i.errors.wrap.label))}}return o.join("")}q_(t,e){let{raw:i,wrapped:s}=e;const n=[],r=t=>{const e=u.create(t,this.Y_);return n.push(e),t=>{const i=e.resolve(...t);return void 0!==i?i:null}};try{const e=this.K_?d(d({},c.functions),this.K_):c.functions;var h=new o.Parser(t,{reference:r,functions:e,constants:c.constants})}catch(e){throw e.message='Invalid template variable "'.concat(t,'" fails due to: ').concat(e.message),e}if(h.single){if("reference"===h.single.type){const t=n[0];return{ref:t,raw:i,refs:n,wrapped:s||"local"===t.type&&"label"===t.key}}return c.stringify(h.single.value)}return{formula:h,raw:i,refs:n}}toString(){return this.source}constructor(t,e){if(s("string"==typeof t,"Template source must be a string"),s(!t.includes("\0")&&!t.includes("\x01"),"Template source cannot contain reserved control characters"),this.source=t,this.rendered=t,this.O_=null,e){const t=e,{functions:i}=t,r=y(t,["functions"]);this.Y_=w.keys(r).length?n(r):void 0,this.K_=i,this.K_&&(s(w.keys(this.K_).every((t=>"string"==typeof t)),"Functions keys must be strings"),s(w.values(this.K_).every((t=>"function"==typeof t)),"Functions values must be functions"))}else this.Y_=void 0,this.K_=void 0;this.z_()}},c.Template.prototype[h.symbols.template]=!0,c.Template.prototype.isImmutable=!0,c.encode=function(t){return t.replace(/\\(\{+)/g,((t,e)=>c.opens.slice(0,e.length))).replace(/\\(\}+)/g,((t,e)=>c.closes.slice(0,e.length)))},c.decode=function(t){return t.replace(/\u0000/g,"{").replace(/\u0001/g,"}")},c.split=function(t){const e=[];let i="";for(let s=0;s<t.length;++s){const n=t[s];if("{"===n){let n="";for(;s+1<t.length&&"{"===t[s+1];)n+="{",++s;e.push(i),i=n}else i+=n}return e.push(i),e},c.wrap=function(t,e){return e?1===e.length?"".concat(e).concat(t).concat(e):"".concat(e[0]).concat(t).concat(e[1]):t},c.stringify=function(t,e,i,s,n,r){void 0===r&&(r={});const o=typeof t,h=s&&s.errors&&s.errors.wrap||{};let a=!1;if(u.isRef(t)&&t.render&&(a=t.in,t=t.resolve(e,i,s,n,d({in:t.in},r))),null===t)return"null";if("string"===o)return c.wrap(t,r.arrayItems&&h.string);if("number"===o||"function"===o||"symbol"===o)return t.toString();if("object"!==o)return JSON.stringify(t);if(t instanceof Date)return c.Template.date(t,s);if(t instanceof Map){const e=[];for(const[i,s]of t.entries())e.push("".concat(i.toString()," -> ").concat(s.toString()));t=e}if(!Array.isArray(t))return t.toString();const l=[];for(const o of t)l.push(c.stringify(o,e,i,s,n,d({arrayItems:!0},r)));return c.wrap(l.join(", "),!a&&h.array)},c.constants={true:!0,false:!1,null:null,second:1e3,minute:6e4,hour:36e5,day:864e5},c.functions={if:(t,e,i)=>t?e:i,length:t=>"string"==typeof t?t.length:t&&"object"==typeof t?Array.isArray(t)?t.length:w.keys(t).length:null,msg(t){const[e,i,s,n,r]=this,o=r.messages;if(!o)return"";const h=a.template(e,o[0],t,i,s)||a.template(e,o[1],t,i,s);return h?h.render(e,i,s,n,r):""},number:t=>"number"==typeof t?t:"string"==typeof t?C(t):"boolean"==typeof t?t?1:0:t instanceof Date?t.getTime():null}},4946:(t,e,i)=>{const s=i(375),n=i(1687),r=i(8068),o=i(8160),h=i(3292),a=i(6354),u=i(6133),c={};t.exports=r.extend({type:"alternatives",flags:{match:{default:"any"}},terms:{matches:{init:[],register:u.toSibling}},args:function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];return 1===i.length&&Array.isArray(i[0])?t.try(...i[0]):t.try(...i)},validate(t,e){const{schema:i,error:s,state:r,prefs:o}=e;if(i.v_.match){const e=[],h=[];for(let s=0;s<i.$_terms.matches.length;++s){const n=i.$_terms.matches[s],a=r.nest(n.schema,"match.".concat(s));a.snapshot();const u=n.schema.$_validate(t,a,o);u.errors?(h.push(u.errors),a.restore()):(e.push(u.value),a.commit())}if(0===e.length)return{errors:s("alternatives.any",{details:h.map((t=>a.details(t,{override:!1})))})};if("one"===i.v_.match)return 1===e.length?{value:e[0]}:{errors:s("alternatives.one")};if(e.length!==i.$_terms.matches.length)return{errors:s("alternatives.all",{details:h.map((t=>a.details(t,{override:!1})))})};const u=t=>t.$_terms.matches.some((t=>"object"===t.schema.type||"alternatives"===t.schema.type&&u(t.schema)));return u(i)?{value:e.reduce(((t,e)=>n(t,e,{mergeArrays:!1})))}:{value:e[e.length-1]}}const h=[];for(let e=0;e<i.$_terms.matches.length;++e){const s=i.$_terms.matches[e];if(s.schema){const i=r.nest(s.schema,"match.".concat(e));i.snapshot();const n=s.schema.$_validate(t,i,o);if(!n.errors)return i.commit(),n;i.restore(),h.push({schema:s.schema,reports:n.errors});continue}const n=s.ref?s.ref.resolve(t,r,o):t,a=s.is?[s]:s.switch;for(let i=0;i<a.length;++i){const h=a[i],{is:u,then:c,otherwise:l}=h,d="match.".concat(e).concat(s.switch?"."+i:"");if(u.$_match(n,r.nest(u,"".concat(d,".is")),o)){if(c)return c.$_validate(t,r.nest(c,"".concat(d,".then")),o)}else if(l)return l.$_validate(t,r.nest(l,"".concat(d,".otherwise")),o)}}return c.errors(h,e)},rules:{conditional:{method(t,e){s(!this.v_.Q_,"Unreachable condition"),s(!this.v_.match,"Cannot combine match mode",this.v_.match,"with conditional rule"),s(void 0===e.break,"Cannot use break option with alternatives conditional");const i=this.clone(),n=h.when(i,t,e),r=n.is?[n]:n.switch;for(const t of r)if(t.then&&t.otherwise){i.$_setFlag("Q_",!0,{clone:!1});break}return i.$_terms.matches.push(n),i.$_mutateRebuild()}},match:{method(t){if(s(["any","one","all"].includes(t),"Invalid alternatives match mode",t),"any"!==t)for(const e of this.$_terms.matches)s(e.schema,"Cannot combine match mode",t,"with conditional rules");return this.$_setFlag("match",t)}},try:{method(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];s(e.length,"Missing alternative schemas"),o.verifyFlat(e,"try"),s(!this.v_.Q_,"Unreachable condition");const n=this.clone();for(const t of e)n.$_terms.matches.push({schema:n.$_compile(t)});return n.$_mutateRebuild()}}},overrides:{label(t){return this.$_parent("label",t).$_modify({each:(e,i)=>"is"!==i.path[0]&&"string"!=typeof e.v_.label?e.label(t):void 0,ref:!1})}},rebuild(t){t.$_modify({each:e=>{o.isSchema(e)&&"array"===e.type&&t.$_setFlag("J_",!0,{clone:!1})}})},manifest:{build(t,e){if(e.matches)for(const i of e.matches){const{schema:e,ref:s,is:n,not:r,then:o,otherwise:h}=i;t=e?t.try(e):s?t.conditional(s,{is:n,then:o,not:r,otherwise:h,switch:i.switch}):t.conditional(n,{then:o,otherwise:h})}return t}},messages:{"alternatives.all":"{{#label}} does not match all of the required types","alternatives.any":"{{#label}} does not match any of the allowed types","alternatives.match":"{{#label}} does not match any of the allowed types","alternatives.one":"{{#label}} matches more than one allowed type","alternatives.types":"{{#label}} must be one of {{#types}}"}}),c.errors=function(t,e){let{error:i,state:s}=e;if(!t.length)return{errors:i("alternatives.any")};if(1===t.length)return{errors:t[0].reports};const n=new Set,r=[];for(const{reports:e,schema:o}of t){if(e.length>1)return c.unmatched(t,i);const h=e[0];if(h instanceof a.Report==0)return c.unmatched(t,i);if(h.state.path.length!==s.path.length){r.push({type:o.type,report:h});continue}if("any.only"===h.code){for(const t of h.local.valids)n.add(t);continue}const[u,l]=h.code.split(".");"base"!==l?r.push({type:o.type,report:h}):"object.base"===h.code?n.add(h.local.type):n.add(u)}return r.length?1===r.length?{errors:r[0].report}:c.unmatched(t,i):{errors:i("alternatives.types",{types:[...n]})}},c.unmatched=function(t,e){const i=[];for(const e of t)i.push(...e.reports);return{errors:e("alternatives.match",a.details(i,{override:!1}))}}},8068:(t,e,i)=>{const s=i(375),n=i(7629),r=i(8160),o=i(6914);t.exports=n.extend({type:"any",flags:{only:{default:!1}},terms:{alterations:{init:null},examples:{init:null},externals:{init:null},metas:{init:[]},notes:{init:[]},shared:{init:null},tags:{init:[]},whens:{init:null}},rules:{custom:{method(t,e){return s("function"==typeof t,"Method must be a function"),s(void 0===e||e&&"string"==typeof e,"Description must be a non-empty string"),this.$_addRule({name:"custom",args:{method:t,description:e}})},validate(t,e,i){let{method:s}=i;try{return s(t,e)}catch(t){return e.error("any.custom",{error:t})}},args:["method","description"],multi:!0},messages:{method(t){return this.prefs({messages:t})}},shared:{method(t){s(r.isSchema(t)&&t.v_.id,"Schema must be a schema with an id");const e=this.clone();return e.$_terms.shared=e.$_terms.shared||[],e.$_terms.shared.push(t),e.$_mutateRegister(t),e}},warning:{method(t,e){return s(t&&"string"==typeof t,"Invalid warning code"),this.$_addRule({name:"warning",args:{code:t,local:e},warn:!0})},validate:(t,e,i)=>{let{code:s,local:n}=i;return e.error(s,n)},args:["code","local"],multi:!0}},modifiers:{keep(t,e){void 0===e&&(e=!0),t.keep=e},message(t,e){t.message=o.compile(e)},warn(t,e){void 0===e&&(e=!0),t.warn=e}},manifest:{build(t,e){for(const i in e){const s=e[i];if(["examples","externals","metas","notes","tags"].includes(i))for(const e of s)t=t[i.slice(0,-1)](e);else if("alterations"!==i)if("whens"!==i){if("shared"===i)for(const e of s)t=t.shared(e)}else for(const e of s){const{ref:i,is:s,not:n,then:r,otherwise:o,concat:h}=e;t=h?t.concat(h):i?t.when(i,{is:s,not:n,then:r,otherwise:o,switch:e.switch,break:e.break}):t.when(s,{then:r,otherwise:o,break:e.break})}else{const e={};for(const{target:t,adjuster:i}of s)e[t]=i;t=t.alter(e)}}return t}},messages:{"any.custom":"{{#label}} failed custom validation because {{#error.message}}","any.default":"{{#label}} threw an error when running default method","any.failover":"{{#label}} threw an error when running failover method","any.invalid":"{{#label}} contains an invalid value","any.only":'{{#label}} must be {if(#valids.length == 1, "", "one of ")}{{#valids}}',"any.ref":"{{#label}} {{#arg}} references {{:#ref}} which {{#reason}}","any.required":"{{#label}} is required","any.unknown":"{{#label}} is not allowed"}})},546:(t,e,i)=>{const s=i(375),n=i(9474),r=i(9621),o=i(8068),h=i(8160),a=i(3292),u={};t.exports=o.extend({type:"array",flags:{single:{default:!1},sparse:{default:!1}},terms:{items:{init:[],manifest:"schema"},ordered:{init:[],manifest:"schema"},rv:{init:[]},ov:{init:[]},hv:{init:[]}},coerce:{from:"object",method(t,e){let{schema:i,state:s,prefs:n}=e;if(!Array.isArray(t))return;const r=i.$_getRule("sort");return r?u.sort(i,t,r.args.options,s,n):void 0}},validate(t,e){let{schema:i,error:s}=e;if(!Array.isArray(t)){if(i.v_.single){const e=[t];return e[h.symbols.arraySingle]=!0,{value:e}}return{errors:s("array.base")}}if(i.$_getRule("items")||i.$_terms.externals)return{value:t.slice()}},rules:{has:{method(t){t=this.$_compile(t,{appendPath:!0});const e=this.$_addRule({name:"has",args:{schema:t}});return e.$_mutateRegister(t),e},validate(t,e,i){let{state:s,prefs:n,error:r}=e,{schema:o}=i;const h=[t,...s.ancestors];for(let e=0;e<t.length;++e){const i=s.localize([...s.path,e],h,o);if(o.$_match(t[e],i,n))return t}const a=o.v_.label;return a?r("array.hasKnown",{patternLabel:a}):r("array.hasUnknown",null)},multi:!0},items:{method(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];h.verifyFlat(e,"items");const s=this.$_addRule("items");for(let t=0;t<e.length;++t){const i=h.tryWithPath((()=>this.$_compile(e[t])),t,{append:!0});s.$_terms.items.push(i)}return s.$_mutateRebuild()},validate(t,e){let{schema:i,error:s,state:n,prefs:r,errorsArray:o}=e;const a=i.$_terms.hv.slice(),c=i.$_terms.ordered.slice(),l=[...i.$_terms.ov,...a],d=!t[h.symbols.arraySingle];delete t[h.symbols.arraySingle];const f=o();let _=t.length;for(let e=0;e<_;++e){const o=t[e];let h=!1,v=!1;const m=d?e:new Number(e),g=[...n.path,m];if(!i.v_.sparse&&void 0===o){if(f.push(s("array.sparse",{key:m,path:g,pos:e,value:void 0},n.localize(g))),r.abortEarly)return f;c.shift();continue}const p=[t,...n.ancestors];for(const t of i.$_terms.rv)if(t.$_match(o,n.localize(g,p,t),r,{presence:"ignore"})){if(f.push(s("array.excludes",{pos:e,value:o},n.localize(g))),r.abortEarly)return f;h=!0,c.shift();break}if(h)continue;if(i.$_terms.ordered.length){if(c.length){const h=c.shift(),a=h.$_validate(o,n.localize(g,p,h),r);if(a.errors){if(f.push(...a.errors),r.abortEarly)return f}else if("strip"===h.v_.result)u.fastSplice(t,e),--e,--_;else{if(!i.v_.sparse&&void 0===a.value){if(f.push(s("array.sparse",{key:m,path:g,pos:e,value:void 0},n.localize(g))),r.abortEarly)return f;continue}t[e]=a.value}continue}if(!i.$_terms.items.length){if(f.push(s("array.orderedLength",{pos:e,limit:i.$_terms.ordered.length})),r.abortEarly)return f;break}}const w=[];let y=a.length;for(let h=0;h<y;++h){const c=n.localize(g,p,a[h]);c.snapshot();const l=a[h].$_validate(o,c,r);if(w[h]=l,!l.errors){if(c.commit(),t[e]=l.value,v=!0,u.fastSplice(a,h),--h,--y,!i.v_.sparse&&void 0===l.value&&(f.push(s("array.sparse",{key:m,path:g,pos:e,value:void 0},n.localize(g))),r.abortEarly))return f;break}c.restore()}if(v)continue;const b=r.stripUnknown&&!!r.stripUnknown.arrays||!1;y=l.length;for(const c of l){let l;const d=a.indexOf(c);if(-1!==d)l=w[d];else{const a=n.localize(g,p,c);if(a.snapshot(),l=c.$_validate(o,a,r),!l.errors){a.commit(),"strip"===c.v_.result?(u.fastSplice(t,e),--e,--_):i.v_.sparse||void 0!==l.value?t[e]=l.value:(f.push(s("array.sparse",{key:m,path:g,pos:e,value:void 0},n.localize(g))),h=!0),v=!0;break}a.restore()}if(1===y){if(b){u.fastSplice(t,e),--e,--_,v=!0;break}if(f.push(...l.errors),r.abortEarly)return f;h=!0;break}}if(!h&&(i.$_terms.ov.length||i.$_terms.hv.length)&&!v){if(b){u.fastSplice(t,e),--e,--_;continue}if(f.push(s("array.includes",{pos:e,value:o},n.localize(g))),r.abortEarly)return f}}return a.length&&u.fillMissedErrors(i,f,a,t,n,r),c.length&&(u.fillOrderedErrors(i,f,c,t,n,r),f.length||u.fillDefault(c,t,n,r)),f.length?f:t},priority:!0,manifest:!1},length:{method(t){return this.$_addRule({name:"length",args:{limit:t},operator:"="})},validate:(t,e,i,s)=>{let{limit:n}=i,{name:r,operator:o,args:a}=s;return h.compare(t.length,n,o)?t:e.error("array."+r,{limit:a.limit,value:t})},args:[{name:"limit",ref:!0,assert:h.limit,message:"must be a positive integer"}]},max:{method(t){return this.$_addRule({name:"max",method:"length",args:{limit:t},operator:"<="})}},min:{method(t){return this.$_addRule({name:"min",method:"length",args:{limit:t},operator:">="})}},ordered:{method(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];h.verifyFlat(e,"ordered");const s=this.$_addRule("items");for(let t=0;t<e.length;++t){const i=h.tryWithPath((()=>this.$_compile(e[t])),t,{append:!0});u.validateSingle(i,s),s.$_mutateRegister(i),s.$_terms.ordered.push(i)}return s.$_mutateRebuild()}},single:{method(t){const e=void 0===t||!!t;return s(!e||!this.v_.J_,"Cannot specify single rule when array has array items"),this.$_setFlag("single",e)}},sort:{method(t){void 0===t&&(t={}),h.assertOptions(t,["by","order"]);const e={order:t.order||"ascending"};return t.by&&(e.by=a.ref(t.by,{ancestor:0}),s(!e.by.ancestor,"Cannot sort by ancestor")),this.$_addRule({name:"sort",args:{options:e}})},validate(t,e,i){let{error:s,state:n,prefs:r,schema:o}=e,{options:h}=i;const{value:a,errors:c}=u.sort(o,t,h,n,r);if(c)return c;for(let e=0;e<t.length;++e)if(t[e]!==a[e])return s("array.sort",{order:h.order,by:h.by?h.by.key:"value"});return t},convert:!0},sparse:{method(t){const e=void 0===t||!!t;return this.v_.sparse===e?this:(e?this.clone():this.$_addRule("items")).$_setFlag("sparse",e,{clone:!1})}},unique:{method(t,e){void 0===e&&(e={}),s(!t||"function"==typeof t||"string"==typeof t,"comparator must be a function or a string"),h.assertOptions(e,["ignoreUndefined","separator"]);const i={name:"unique",args:{options:e,comparator:t}};if(t)if("string"==typeof t){const s=h.default(e.separator,".");i.path=s?t.split(s):[t]}else i.comparator=t;return this.$_addRule(i)},validate(t,e,i,o){let{state:h,error:a,schema:u}=e,{comparator:c,options:l}=i,{comparator:d,path:f}=o;const _={string:w.create(null),number:w.create(null),undefined:w.create(null),boolean:w.create(null),bigint:w.create(null),object:new Map,function:new Map,custom:new Map},v=d||n,m=l.ignoreUndefined;for(let e=0;e<t.length;++e){const i=f?r(t[e],f):t[e],n=d?_.custom:_[typeof i];if(s(n,"Failed to find unique map container for type",typeof i),n instanceof Map){const s=n.entries();let r;for(;!(r=s.next()).done;)if(v(r.value[0],i)){const i=h.localize([...h.path,e],[t,...h.ancestors]),s={pos:e,value:t[e],dupePos:r.value[1],dupeValue:t[r.value[1]]};return f&&(s.path=c),a("array.unique",s,i)}n.set(i,e)}else{if((!m||void 0!==i)&&void 0!==n[i]){const s={pos:e,value:t[e],dupePos:n[i],dupeValue:t[n[i]]};return f&&(s.path=c),a("array.unique",s,h.localize([...h.path,e],[t,...h.ancestors]))}n[i]=e}}return t},args:["comparator","options"],multi:!0}},cast:{set:{from:Array.isArray,to:(t,e)=>new Set(t)}},rebuild(t){t.$_terms.ov=[],t.$_terms.rv=[],t.$_terms.hv=[];for(const e of t.$_terms.items)u.validateSingle(e,t),"required"===e.v_.presence?t.$_terms.hv.push(e):"forbidden"===e.v_.presence?t.$_terms.rv.push(e):t.$_terms.ov.push(e);for(const e of t.$_terms.ordered)u.validateSingle(e,t)},manifest:{build:(t,e)=>(e.items&&(t=t.items(...e.items)),e.ordered&&(t=t.ordered(...e.ordered)),t)},messages:{"array.base":"{{#label}} must be an array","array.excludes":"{{#label}} contains an excluded value","array.hasKnown":"{{#label}} does not contain at least one required match for type {:#patternLabel}","array.hasUnknown":"{{#label}} does not contain at least one required match","array.includes":"{{#label}} does not match any of the allowed types","array.includesRequiredBoth":"{{#label}} does not contain {{#knownMisses}} and {{#unknownMisses}} other required value(s)","array.includesRequiredKnowns":"{{#label}} does not contain {{#knownMisses}}","array.includesRequiredUnknowns":"{{#label}} does not contain {{#unknownMisses}} required value(s)","array.length":"{{#label}} must contain {{#limit}} items","array.max":"{{#label}} must contain less than or equal to {{#limit}} items","array.min":"{{#label}} must contain at least {{#limit}} items","array.orderedLength":"{{#label}} must contain at most {{#limit}} items","array.sort":"{{#label}} must be sorted in {#order} order by {{#by}}","array.sort.mismatching":"{{#label}} cannot be sorted due to mismatching types","array.sort.unsupported":"{{#label}} cannot be sorted due to unsupported type {#type}","array.sparse":"{{#label}} must not be a sparse array item","array.unique":"{{#label}} contains a duplicate value"}}),u.fillMissedErrors=function(t,e,i,s,n,r){const o=[];let h=0;for(const t of i){const e=t.v_.label;e?o.push(e):++h}o.length?h?e.push(t.$_createError("array.includesRequiredBoth",s,{knownMisses:o,unknownMisses:h},n,r)):e.push(t.$_createError("array.includesRequiredKnowns",s,{knownMisses:o},n,r)):e.push(t.$_createError("array.includesRequiredUnknowns",s,{unknownMisses:h},n,r))},u.fillOrderedErrors=function(t,e,i,s,n,r){const o=[];for(const t of i)"required"===t.v_.presence&&o.push(t);o.length&&u.fillMissedErrors(t,e,o,s,n,r)},u.fillDefault=function(t,e,i,s){const n=[];let r=!0;for(let o=t.length-1;o>=0;--o){const h=t[o],a=[e,...i.ancestors],u=h.$_validate(void 0,i.localize(i.path,a,h),s).value;if(r){if(void 0===u)continue;r=!1}n.unshift(u)}n.length&&e.push(...n)},u.fastSplice=function(t,e){let i=e;for(;i<t.length;)t[i++]=t[i];--t.length},u.validateSingle=function(t,e){("array"===t.type||t.v_.J_)&&(s(!e.v_.single,"Cannot specify array item with single rule enabled"),e.$_setFlag("J_",!0,{clone:!1}))},u.sort=function(t,e,i,s,n){const r="ascending"===i.order?1:-1,o=-1*r,h=r,a=(a,c)=>{let l=u.compare(a,c,o,h);if(null!==l||(i.by&&(a=i.by.resolve(a,s,n),c=i.by.resolve(c,s,n)),l=u.compare(a,c,o,h),null!==l))return l;const d=typeof a;if(d!==typeof c)throw t.$_createError("array.sort.mismatching",e,null,s,n);if("number"!==d&&"string"!==d)throw t.$_createError("array.sort.unsupported",e,{type:d},s,n);return"number"===d?(a-c)*r:a<c?o:h};try{return{value:e.slice().sort(a)}}catch(t){return{errors:t}}},u.compare=function(t,e,i,s){return t===e?0:void 0===t?1:void 0===e?-1:null===t?s:null===e?i:null}},4937:(t,e,i)=>{const s=i(375),n=i(8068),r=i(8160),o=i(2036),h={isBool:function(t){return"boolean"==typeof t}};t.exports=n.extend({type:"boolean",flags:{sensitive:{default:!1}},terms:{falsy:{init:null,manifest:"values"},truthy:{init:null,manifest:"values"}},coerce(t,e){let{schema:i}=e;if("boolean"!=typeof t){if("string"==typeof t){const e=i.v_.sensitive?t:t.toLowerCase();t="true"===e||"false"!==e&&t}return"boolean"!=typeof t&&(t=i.$_terms.truthy&&i.$_terms.truthy.has(t,null,null,!i.v_.sensitive)||(!i.$_terms.falsy||!i.$_terms.falsy.has(t,null,null,!i.v_.sensitive))&&t),{value:t}}},validate(t,e){let{error:i}=e;if("boolean"!=typeof t)return{value:t,errors:i("boolean.base")}},rules:{truthy:{method(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];r.verifyFlat(e,"truthy");const n=this.clone();n.$_terms.truthy=n.$_terms.truthy||new o;for(let t=0;t<e.length;++t){const i=e[t];s(void 0!==i,"Cannot call truthy with undefined"),n.$_terms.truthy.add(i)}return n}},falsy:{method(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];r.verifyFlat(e,"falsy");const n=this.clone();n.$_terms.falsy=n.$_terms.falsy||new o;for(let t=0;t<e.length;++t){const i=e[t];s(void 0!==i,"Cannot call falsy with undefined"),n.$_terms.falsy.add(i)}return n}},sensitive:{method(t){return void 0===t&&(t=!0),this.$_setFlag("sensitive",t)}}},cast:{number:{from:h.isBool,to:(t,e)=>t?1:0},string:{from:h.isBool,to:(t,e)=>t?"true":"false"}},manifest:{build:(t,e)=>(e.truthy&&(t=t.truthy(...e.truthy)),e.falsy&&(t=t.falsy(...e.falsy)),t)},messages:{"boolean.base":"{{#label}} must be a boolean"}})},7500:(t,e,i)=>{const s=i(375),n=i(8068),r=i(8160),o=i(3328),h={isDate:function(t){return t instanceof Date}};t.exports=n.extend({type:"date",coerce:{from:["number","string"],method:(t,e)=>{let{schema:i}=e;return{value:h.parse(t,i.v_.format)||t}}},validate(t,e){let{schema:i,error:s,prefs:n}=e;if(t instanceof Date&&!S(t.getTime()))return;const r=i.v_.format;return n.convert&&r&&"string"==typeof t?{value:t,errors:s("date.format",{format:r})}:{value:t,errors:s("date.base")}},rules:{compare:{method:!1,validate(t,e,i,s){let{date:n}=i,{name:o,operator:h,args:a}=s;const u="now"===n?Date.now():n.getTime();return r.compare(t.getTime(),u,h)?t:e.error("date."+o,{limit:a.date,value:t})},args:[{name:"date",ref:!0,normalize:t=>"now"===t?t:h.parse(t),assert:t=>null!==t,message:"must have a valid date format"}]},format:{method(t){return s(["iso","javascript","unix"].includes(t),"Unknown date format",t),this.$_setFlag("format",t)}},greater:{method(t){return this.$_addRule({name:"greater",method:"compare",args:{date:t},operator:">"})}},iso:{method(){return this.format("iso")}},less:{method(t){return this.$_addRule({name:"less",method:"compare",args:{date:t},operator:"<"})}},max:{method(t){return this.$_addRule({name:"max",method:"compare",args:{date:t},operator:"<="})}},min:{method(t){return this.$_addRule({name:"min",method:"compare",args:{date:t},operator:">="})}},timestamp:{method(t){return void 0===t&&(t="javascript"),s(["javascript","unix"].includes(t),'"type" must be one of "javascript, unix"'),this.format(t)}}},cast:{number:{from:h.isDate,to:(t,e)=>t.getTime()},string:{from:h.isDate,to:(t,e)=>{let{prefs:i}=e;return o.date(t,i)}}},messages:{"date.base":"{{#label}} must be a valid date","date.format":'{{#label}} must be in {msg("date.format." + #format) || #format} format',"date.greater":"{{#label}} must be greater than {{:#limit}}","date.less":"{{#label}} must be less than {{:#limit}}","date.max":"{{#label}} must be less than or equal to {{:#limit}}","date.min":"{{#label}} must be greater than or equal to {{:#limit}}","date.format.iso":"ISO 8601 date","date.format.javascript":"timestamp or number of milliseconds","date.format.unix":"timestamp or number of seconds"}}),h.parse=function(t,e){if(t instanceof Date)return t;if("string"!=typeof t&&(S(t)||!isFinite(t))||/^\s*$/.test(t))return null;if("iso"===e)return r.isIsoDate(t)?h.date(t.toString()):null;const i=t;if("string"==typeof t&&/^[+-]?\d+(\.\d+)?$/.test(t)&&(t=C(t)),e){if("javascript"===e)return h.date(1*t);if("unix"===e)return h.date(1e3*t);if("string"==typeof i)return null}return h.date(t)},h.date=function(t){const e=new Date(t);return S(e.getTime())?null:e}},390:(t,e,i)=>{const s=i(375),n=i(7824);t.exports=n.extend({type:"function",properties:{typeof:"function"},rules:{arity:{method(t){return s(Number.isSafeInteger(t)&&t>=0,"n must be a positive integer"),this.$_addRule({name:"arity",args:{n:t}})},validate:(t,e,i)=>{let{n:s}=i;return t.length===s?t:e.error("function.arity",{n:s})}},class:{method(){return this.$_addRule("class")},validate:(t,e)=>/^\s*class\s/.test(t.toString())?t:e.error("function.class",{value:t})},minArity:{method(t){return s(Number.isSafeInteger(t)&&t>0,"n must be a strict positive integer"),this.$_addRule({name:"minArity",args:{n:t}})},validate:(t,e,i)=>{let{n:s}=i;return t.length>=s?t:e.error("function.minArity",{n:s})}},maxArity:{method(t){return s(Number.isSafeInteger(t)&&t>=0,"n must be a positive integer"),this.$_addRule({name:"maxArity",args:{n:t}})},validate:(t,e,i)=>{let{n:s}=i;return t.length<=s?t:e.error("function.maxArity",{n:s})}}},messages:{"function.arity":"{{#label}} must have an arity of {{#n}}","function.class":"{{#label}} must be a class","function.maxArity":"{{#label}} must have an arity lesser or equal to {{#n}}","function.minArity":"{{#label}} must have an arity greater or equal to {{#n}}"}})},7824:(t,e,i)=>{const s=i(978),n=i(375),r=i(8571),o=i(3652),h=i(8068),a=i(8160),u=i(3292),c=i(6354),l=i(6133),f=i(3328),_={renameDefaults:{alias:!1,multiple:!1,override:!1}};t.exports=h.extend({type:"uv",properties:{typeof:"object"},flags:{unknown:{default:void 0}},terms:{dependencies:{init:null},keys:{init:null,manifest:{mapped:{from:"schema",to:"key"}}},patterns:{init:null},renames:{init:null}},args:(t,e)=>t.keys(e),validate(t,e){let{schema:i,error:s,state:n,prefs:r}=e;if(!t||typeof t!==i.$_property("typeof")||Array.isArray(t))return{value:t,errors:s("object.base",{type:i.$_property("typeof")})};if(!(i.$_terms.renames||i.$_terms.dependencies||i.$_terms.keys||i.$_terms.patterns||i.$_terms.externals))return;t=_.clone(t,r);const o=[];if(i.$_terms.renames&&!_.rename(i,t,n,r,o))return{value:t,errors:o};if(!i.$_terms.keys&&!i.$_terms.patterns&&!i.$_terms.dependencies)return{value:t,errors:o};const h=new Set(w.keys(t));if(i.$_terms.keys){const e=[t,...n.ancestors];for(const s of i.$_terms.keys){const i=s.key,a=t[i];h.delete(i);const u=n.localize([...n.path,i],e,s),c=s.schema.$_validate(a,u,r);if(c.errors){if(r.abortEarly)return{value:t,errors:c.errors};void 0!==c.value&&(t[i]=c.value),o.push(...c.errors)}else"strip"===s.schema.v_.result||void 0===c.value&&void 0!==a?delete t[i]:void 0!==c.value&&(t[i]=c.value)}}if(h.size||i.v_.fv){const e=_.unknown(i,t,h,o,n,r);if(e)return e}if(i.$_terms.dependencies)for(const e of i.$_terms.dependencies){if(null!==e.key&&!1===_.isPresent(e.options)(e.key.resolve(t,n,r,null,{shadow:!1})))continue;const s=_.dependencies[e.rel](i,e,t,n,r);if(s){const e=i.$_createError(s.code,t,s.context,n,r);if(r.abortEarly)return{value:t,errors:e};o.push(e)}}return{value:t,errors:o}},rules:{and:{method(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return a.verifyFlat(e,"and"),_.dependency(this,"and",null,e)}},append:{method(t){return null==t||0===w.keys(t).length?this:this.keys(t)}},assert:{method(t,e,i){f.isTemplate(t)||(t=u.ref(t)),n(void 0===i||"string"==typeof i,"Message must be a string"),e=this.$_compile(e,{appendPath:!0});const s=this.$_addRule({name:"assert",args:{subject:t,schema:e,message:i}});return s.$_mutateRegister(t),s.$_mutateRegister(e),s},validate(t,e,i){let{error:s,prefs:n,state:r}=e,{subject:o,schema:h,message:a}=i;const u=o.resolve(t,r,n),c=l.isRef(o)?o.absolute(r):[];return h.$_match(u,r.localize(c,[t,...r.ancestors],h),n)?t:s("object.assert",{subject:o,message:a})},args:["subject","schema","message"],multi:!0},instance:{method(t,e){return n("function"==typeof t,"constructor must be a function"),e=e||t.name,this.$_addRule({name:"instance",args:{constructor:t,name:e}})},validate:(t,e,i)=>{let{constructor:s,name:n}=i;return t instanceof s?t:e.error("object.instance",{type:n,value:t})},args:["constructor","name"]},keys:{method(t){n(void 0===t||"object"==typeof t,"Object schema must be a valid object"),n(!a.isSchema(t),"Object schema cannot be a joi schema");const e=this.clone();if(t)if(w.keys(t).length){e.$_terms.keys=e.$_terms.keys?e.$_terms.keys.filter((e=>!t.hasOwnProperty(e.key))):new _.Keys;for(const i in t)a.tryWithPath((()=>e.$_terms.keys.push({key:i,schema:this.$_compile(t[i])})),i)}else e.$_terms.keys=new _.Keys;else e.$_terms.keys=null;return e.$_mutateRebuild()}},length:{method(t){return this.$_addRule({name:"length",args:{limit:t},operator:"="})},validate:(t,e,i,s)=>{let{limit:n}=i,{name:r,operator:o,args:h}=s;return a.compare(w.keys(t).length,n,o)?t:e.error("object."+r,{limit:h.limit,value:t})},args:[{name:"limit",ref:!0,assert:a.limit,message:"must be a positive integer"}]},max:{method(t){return this.$_addRule({name:"max",method:"length",args:{limit:t},operator:"<="})}},min:{method(t){return this.$_addRule({name:"min",method:"length",args:{limit:t},operator:">="})}},nand:{method(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return a.verifyFlat(e,"nand"),_.dependency(this,"nand",null,e)}},or:{method(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return a.verifyFlat(e,"or"),_.dependency(this,"or",null,e)}},oxor:{method(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return _.dependency(this,"oxor",null,e)}},pattern:{method(t,e,i){void 0===i&&(i={});const s=t instanceof RegExp;s||(t=this.$_compile(t,{appendPath:!0})),n(void 0!==e,"Invalid rule"),a.assertOptions(i,["fallthrough","matches"]),s&&n(!t.flags.includes("g")&&!t.flags.includes("y"),"pattern should not use global or sticky mode"),e=this.$_compile(e,{appendPath:!0});const r=this.clone();r.$_terms.patterns=r.$_terms.patterns||[];const o={[s?"regex":"schema"]:t,rule:e};return i.matches&&(o.matches=this.$_compile(i.matches),"array"!==o.matches.type&&(o.matches=o.matches.$_root.array().items(o.matches)),r.$_mutateRegister(o.matches),r.$_setFlag("fv",!0,{clone:!1})),i.fallthrough&&(o.fallthrough=!0),r.$_terms.patterns.push(o),r.$_mutateRegister(e),r}},ref:{method(){return this.$_addRule("ref")},validate:(t,e)=>l.isRef(t)?t:e.error("object.refType",{value:t})},regex:{method(){return this.$_addRule("regex")},validate:(t,e)=>t instanceof RegExp?t:e.error("object.regex",{value:t})},rename:{method(t,e,i){void 0===i&&(i={}),n("string"==typeof t||t instanceof RegExp,"Rename missing the from argument"),n("string"==typeof e||e instanceof f,"Invalid rename to argument"),n(e!==t,"Cannot rename key to same name:",t),a.assertOptions(i,["alias","ignoreUndefined","override","multiple"]);const r=this.clone();r.$_terms.renames=r.$_terms.renames||[];for(const e of r.$_terms.renames)n(e.from!==t,"Cannot rename the same key multiple times");return e instanceof f&&r.$_mutateRegister(e),r.$_terms.renames.push({from:t,to:e,options:s(_.renameDefaults,i)}),r}},schema:{method(t){return void 0===t&&(t="any"),this.$_addRule({name:"schema",args:{type:t}})},validate:(t,e,i)=>{let{type:s}=i;return!a.isSchema(t)||"any"!==s&&t.type!==s?e.error("object.schema",{type:s}):t}},unknown:{method(t){return this.$_setFlag("unknown",!1!==t)}},with:{method(t,e,i){return void 0===i&&(i={}),_.dependency(this,"with",t,e,i)}},without:{method(t,e,i){return void 0===i&&(i={}),_.dependency(this,"without",t,e,i)}},xor:{method(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return a.verifyFlat(e,"xor"),_.dependency(this,"xor",null,e)}}},overrides:{default(t,e){return void 0===t&&(t=a.symbols.deepDefault),this.$_parent("default",t,e)}},rebuild(t){if(t.$_terms.keys){const e=new o.Sorter;for(const i of t.$_terms.keys)a.tryWithPath((()=>e.add(i,{after:i.schema.$_rootReferences(),group:i.key})),i.key);t.$_terms.keys=new _.Keys(...e.nodes)}},manifest:{build(t,e){if(e.keys&&(t=t.keys(e.keys)),e.dependencies)for(const{rel:i,key:s=null,peers:n,options:r}of e.dependencies)t=_.dependency(t,i,s,n,r);if(e.patterns)for(const{regex:i,schema:s,rule:n,fallthrough:r,matches:o}of e.patterns)t=t.pattern(i||s,n,{fallthrough:r,matches:o});if(e.renames)for(const{from:i,to:s,options:n}of e.renames)t=t.rename(i,s,n);return t}},messages:{"object.and":"{{#label}} contains {{#presentWithLabels}} without its required peers {{#missingWithLabels}}","object.assert":'{{#label}} is invalid because {if(#subject.key, `"` + #subject.key + `" failed to ` + (#message || "pass the assertion test"), #message || "the assertion failed")}',"object.base":"{{#label}} must be of type {{#type}}","object.instance":"{{#label}} must be an instance of {{:#type}}","object.length":'{{#label}} must have {{#limit}} key{if(#limit == 1, "", "s")}',"object.max":'{{#label}} must have less than or equal to {{#limit}} key{if(#limit == 1, "", "s")}',"object.min":'{{#label}} must have at least {{#limit}} key{if(#limit == 1, "", "s")}',"object.missing":"{{#label}} must contain at least one of {{#peersWithLabels}}","object.nand":"{{:#mainWithLabel}} must not exist simultaneously with {{#peersWithLabels}}","object.oxor":"{{#label}} contains a conflict between optional exclusive peers {{#peersWithLabels}}","object.pattern.match":"{{#label}} keys failed to match pattern requirements","object.refType":"{{#label}} must be a Joi reference","object.regex":"{{#label}} must be a RegExp object","object.rename.multiple":"{{#label}} cannot rename {{:#from}} because multiple renames are disabled and another key was already renamed to {{:#to}}","object.rename.override":"{{#label}} cannot rename {{:#from}} because override is disabled and target {{:#to}} exists","object.schema":"{{#label}} must be a Joi schema of {{#type}} type","object.unknown":"{{#label}} is not allowed","object.with":"{{:#mainWithLabel}} missing required peer {{:#peerWithLabel}}","object.without":"{{:#mainWithLabel}} conflict with forbidden peer {{:#peerWithLabel}}","object.xor":"{{#label}} contains a conflict between exclusive peers {{#peersWithLabels}}"}}),_.clone=function(t,e){if("object"==typeof t){if(e.nonEnumerables)return r(t,{shallow:!0});const i=w.create(w.getPrototypeOf(t));return w.assign(i,t),i}const i=function(){for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return t.apply(this,i)};return i.prototype=r(t.prototype),w.defineProperty(i,"name",{value:t.name,writable:!1}),w.defineProperty(i,"length",{value:t.length,writable:!1}),w.assign(i,t),i},_.dependency=function(t,e,i,s,r){n(null===i||"string"==typeof i,e,"key must be a strings"),r||(r=s.length>1&&"object"==typeof s[s.length-1]?s.pop():{}),a.assertOptions(r,["separator","isPresent"]),s=[].concat(s);const o=a.default(r.separator,"."),h=[];for(const t of s)n("string"==typeof t,e,"peers must be strings"),h.push(u.ref(t,{separator:o,ancestor:0,prefix:!1}));null!==i&&(i=u.ref(i,{separator:o,ancestor:0,prefix:!1}));const c=t.clone();return c.$_terms.dependencies=c.$_terms.dependencies||[],c.$_terms.dependencies.push(new _.Dependency(e,i,h,s,r)),c},_.dependencies={and(t,e,i,s,n){const r=[],o=[],h=e.peers.length,a=_.isPresent(e.options);for(const t of e.peers)!1===a(t.resolve(i,s,n,null,{shadow:!1}))?r.push(t.key):o.push(t.key);if(r.length!==h&&o.length!==h)return{code:"object.and",context:{present:o,presentWithLabels:_.keysToLabels(t,o),missing:r,missingWithLabels:_.keysToLabels(t,r)}}},nand(t,e,i,s,n){const r=[],o=_.isPresent(e.options);for(const t of e.peers)o(t.resolve(i,s,n,null,{shadow:!1}))&&r.push(t.key);if(r.length!==e.peers.length)return;const h=e.paths[0],a=e.paths.slice(1);return{code:"object.nand",context:{main:h,mainWithLabel:_.keysToLabels(t,h),peers:a,peersWithLabels:_.keysToLabels(t,a)}}},or(t,e,i,s,n){const r=_.isPresent(e.options);for(const t of e.peers)if(r(t.resolve(i,s,n,null,{shadow:!1})))return;return{code:"object.missing",context:{peers:e.paths,peersWithLabels:_.keysToLabels(t,e.paths)}}},oxor(t,e,i,s,n){const r=[],o=_.isPresent(e.options);for(const t of e.peers)o(t.resolve(i,s,n,null,{shadow:!1}))&&r.push(t.key);if(!r.length||1===r.length)return;const h={peers:e.paths,peersWithLabels:_.keysToLabels(t,e.paths)};return h.present=r,h.presentWithLabels=_.keysToLabels(t,r),{code:"object.oxor",context:h}},with(t,e,i,s,n){const r=_.isPresent(e.options);for(const o of e.peers)if(!1===r(o.resolve(i,s,n,null,{shadow:!1})))return{code:"object.with",context:{main:e.key.key,mainWithLabel:_.keysToLabels(t,e.key.key),peer:o.key,peerWithLabel:_.keysToLabels(t,o.key)}}},without(t,e,i,s,n){const r=_.isPresent(e.options);for(const o of e.peers)if(r(o.resolve(i,s,n,null,{shadow:!1})))return{code:"object.without",context:{main:e.key.key,mainWithLabel:_.keysToLabels(t,e.key.key),peer:o.key,peerWithLabel:_.keysToLabels(t,o.key)}}},xor(t,e,i,s,n){const r=[],o=_.isPresent(e.options);for(const t of e.peers)o(t.resolve(i,s,n,null,{shadow:!1}))&&r.push(t.key);if(1===r.length)return;const h={peers:e.paths,peersWithLabels:_.keysToLabels(t,e.paths)};return 0===r.length?{code:"object.missing",context:h}:(h.present=r,h.presentWithLabels=_.keysToLabels(t,r),{code:"object.xor",context:h})}},_.keysToLabels=function(t,e){return Array.isArray(e)?e.map((e=>t.$_mapLabels(e))):t.$_mapLabels(e)},_.isPresent=function(t){return"function"==typeof t.isPresent?t.isPresent:t=>void 0!==t},_.rename=function(t,e,i,s,n){const r={};for(const o of t.$_terms.renames){const h=[],a="string"!=typeof o.from;if(a)for(const t in e){if(void 0===e[t]&&o.options.ignoreUndefined||t===o.to)continue;const i=o.from.exec(t);i&&h.push({from:t,to:o.to,match:i})}else!w.prototype.hasOwnProperty.call(e,o.from)||void 0===e[o.from]&&o.options.ignoreUndefined||h.push(o);for(const u of h){const h=u.from;let c=u.to;if(c instanceof f&&(c=c.render(e,i,s,u.match)),h!==c){if(!o.options.multiple&&r[c]&&(n.push(t.$_createError("object.rename.multiple",e,{from:h,to:c,pattern:a},i,s)),s.abortEarly)||w.prototype.hasOwnProperty.call(e,c)&&!o.options.override&&!r[c]&&(n.push(t.$_createError("object.rename.override",e,{from:h,to:c,pattern:a},i,s)),s.abortEarly))return!1;void 0===e[h]?delete e[c]:e[c]=e[h],r[c]=!0,o.options.alias||delete e[h]}}}return!0},_.unknown=function(t,e,i,s,n,r){if(t.$_terms.patterns){let o=!1;const h=t.$_terms.patterns.map((t=>{if(t.matches)return o=!0,[]})),a=[e,...n.ancestors];for(const o of i){const u=e[o],c=[...n.path,o];for(let l=0;l<t.$_terms.patterns.length;++l){const d=t.$_terms.patterns[l];if(d.regex){const t=d.regex.test(o);if(n.mainstay.tracer.debug(n,"rule","pattern.".concat(l),t?"pass":"error"),!t)continue}else if(!d.schema.$_match(o,n.nest(d.schema,"pattern.".concat(l)),r))continue;i.delete(o);const f=n.localize(c,a,{schema:d.rule,key:o}),_=d.rule.$_validate(u,f,r);if(_.errors){if(r.abortEarly)return{value:e,errors:_.errors};s.push(..._.errors)}if(d.matches&&h[l].push(o),e[o]=_.value,!d.fallthrough)break}}if(o)for(let i=0;i<h.length;++i){const o=h[i];if(!o)continue;const u=t.$_terms.patterns[i].matches,l=n.localize(n.path,a,u),d=u.$_validate(o,l,r);if(d.errors){const i=c.details(d.errors,{override:!1});i.matches=o;const h=t.$_createError("object.pattern.match",e,i,n,r);if(r.abortEarly)return{value:e,errors:h};s.push(h)}}}if(i.size&&(t.$_terms.keys||t.$_terms.patterns)){if(r.stripUnknown&&void 0===t.v_.unknown||r.skipFunctions){const t=!(!r.stripUnknown||!0!==r.stripUnknown&&!r.stripUnknown.objects);for(const s of i)t?(delete e[s],i.delete(s)):"function"==typeof e[s]&&i.delete(s)}if(!a.default(t.v_.unknown,r.allowUnknown))for(const o of i){const i=n.localize([...n.path,o],[]),h=t.$_createError("object.unknown",e[o],{child:o},i,r,{flags:!1});if(r.abortEarly)return{value:e,errors:h};s.push(h)}}},_.Dependency=class{describe(){const t={rel:this.rel,peers:this.paths};return null!==this.key&&(t.key=this.key.key),"."!==this.peers[0].separator&&(t.options=v(d({},t.options),{separator:this.peers[0].separator})),this.options.isPresent&&(t.options=v(d({},t.options),{isPresent:this.options.isPresent})),t}constructor(t,e,i,s,n){this.rel=t,this.key=e,this.peers=i,this.paths=s,this.options=n}},_.Keys=class extends Array{concat(t){const e=this.slice(),i=new Map;for(let t=0;t<e.length;++t)i.set(e[t].key,t);for(const s of t){const t=s.key,n=i.get(t);void 0!==n?e[n]={key:t,schema:e[n].schema.concat(s.schema)}:e.push(s)}return e}}},8785:(t,e,i)=>{const s=i(375),n=i(8068),r=i(8160),o=i(3292),h=i(6354),a={};t.exports=n.extend({type:"link",properties:{schemaChain:!0},terms:{link:{init:null,manifest:"single",register:!1}},args:(t,e)=>t.ref(e),validate(t,e){let{schema:i,state:n,prefs:r}=e;s(i.$_terms.link,"Uninitialized link schema");const o=a.generate(i,t,n,r),h=i.$_terms.link[0].ref;return o.$_validate(t,n.nest(o,"link:".concat(h.display,":").concat(o.type)),r)},generate:(t,e,i,s)=>a.generate(t,e,i,s),rules:{ref:{method(t){s(!this.$_terms.link,"Cannot reinitialize schema"),t=o.ref(t),s("value"===t.type||"local"===t.type,"Invalid reference type:",t.type),s("local"===t.type||"root"===t.ancestor||t.ancestor>0,"Link cannot reference itself");const e=this.clone();return e.$_terms.link=[{ref:t}],e}},relative:{method(t){return void 0===t&&(t=!0),this.$_setFlag("relative",t)}}},overrides:{concat(t){s(this.$_terms.link,"Uninitialized link schema"),s(r.isSchema(t),"Invalid schema object"),s("link"!==t.type,"Cannot merge type link with another link");const e=this.clone();return e.$_terms.whens||(e.$_terms.whens=[]),e.$_terms.whens.push({concat:t}),e.$_mutateRebuild()}},manifest:{build:(t,e)=>(s(e.link,"Invalid link description missing link"),t.ref(e.link))}}),a.generate=function(t,e,i,s){let n=i.mainstay.links.get(t);if(n)return n.C_(e,i,s).schema;const r=t.$_terms.link[0].ref,{perspective:o,path:h}=a.perspective(r,i);a.assert(o,"which is outside of schema boundaries",r,t,i,s);try{n=h.length?o.$_reach(h):o}catch(e){a.assert(!1,"to non-existing schema",r,t,i,s)}return a.assert("link"!==n.type,"which is another link",r,t,i,s),t.v_.relative||i.mainstay.links.set(t,n),n.C_(e,i,s).schema},a.perspective=function(t,e){if("local"===t.type){for(const{schema:i,key:s}of e.schemas){if((i.v_.id||s)===t.path[0])return{perspective:i,path:t.path.slice(1)};if(i.$_terms.shared)for(const e of i.$_terms.shared)if(e.v_.id===t.path[0])return{perspective:e,path:t.path.slice(1)}}return{perspective:null,path:null}}return"root"===t.ancestor?{perspective:e.schemas[e.schemas.length-1].schema,path:t.path}:{perspective:e.schemas[t.ancestor]&&e.schemas[t.ancestor].schema,path:t.path}},a.assert=function(t,e,i,n,r,o){t||s(!1,'"'.concat(h.label(n.v_,r,o),'" contains link reference "').concat(i.display,'" ').concat(e))}},3832:(t,e,i)=>{const s=i(375),n=i(8068),r=i(8160),o={numberRx:/^\s*[+-]?(?:(?:\d+(?:\.\d*)?)|(?:\.\d+))(?:e([+-]?\d+))?\s*$/i,precisionRx:/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/,exponentialPartRegex:/[eE][+-]?\d+$/,leadingSignAndZerosRegex:/^[+-]?(0*)?/,dotRegex:/\./,trailingZerosRegex:/0+$/,decimalPlaces(t){const e=t.toString(),i=e.indexOf("."),s=e.indexOf("e");return(i<0?0:(s<0?e.length:s)-i-1)+(s<0?0:_.max(0,-x(e.slice(s+1))))}};t.exports=n.extend({type:"number",flags:{unsafe:{default:!1}},coerce:{from:"string",method(t,e){let{schema:i,error:s}=e;if(!t.match(o.numberRx))return;t=t.trim();const n={value:C(t)};if(0===n.value&&(n.value=0),!i.v_.unsafe)if(t.match(/e/i)){if(o.extractSignificantDigits(t)!==o.extractSignificantDigits(String(n.value)))return n.errors=s("number.unsafe"),n}else{const e=n.value.toString();if(e.match(/e/i))return n;if(e!==o.normalizeDecimal(t))return n.errors=s("number.unsafe"),n}return n}},validate(t,e){let{schema:i,error:s,prefs:n}=e;if(t===1/0||t===-1/0)return{value:t,errors:s("number.infinity")};if(!r.isNumber(t))return{value:t,errors:s("number.base")};const o={value:t};if(n.convert){const t=i.$_getRule("precision");if(t){const e=_.pow(10,t.args.limit);o.value=_.round(o.value*e)/e}}return 0===o.value&&(o.value=0),!i.v_.unsafe&&(t>Number.MAX_SAFE_INTEGER||t<Number.MIN_SAFE_INTEGER)&&(o.errors=s("number.unsafe")),o},rules:{compare:{method:!1,validate:(t,e,i,s)=>{let{limit:n}=i,{name:o,operator:h,args:a}=s;return r.compare(t,n,h)?t:e.error("number."+o,{limit:a.limit,value:t})},args:[{name:"limit",ref:!0,assert:r.isNumber,message:"must be a number"}]},greater:{method(t){return this.$_addRule({name:"greater",method:"compare",args:{limit:t},operator:">"})}},integer:{method(){return this.$_addRule("integer")},validate:(t,e)=>_.trunc(t)-t==0?t:e.error("number.integer")},less:{method(t){return this.$_addRule({name:"less",method:"compare",args:{limit:t},operator:"<"})}},max:{method(t){return this.$_addRule({name:"max",method:"compare",args:{limit:t},operator:"<="})}},min:{method(t){return this.$_addRule({name:"min",method:"compare",args:{limit:t},operator:">="})}},multiple:{method(t){const e="number"==typeof t?o.decimalPlaces(t):null,i=_.pow(10,e);return this.$_addRule({name:"multiple",args:{base:t,baseDecimalPlace:e,pfactor:i}})},validate:(t,e,i,s)=>{let{base:n,baseDecimalPlace:r,pfactor:h}=i;return o.decimalPlaces(t)>r?e.error("number.multiple",{multiple:s.args.base,value:t}):_.round(h*t)%_.round(h*n)==0?t:e.error("number.multiple",{multiple:s.args.base,value:t})},args:[{name:"base",ref:!0,assert:t=>"number"==typeof t&&isFinite(t)&&t>0,message:"must be a positive number"},"baseDecimalPlace","pfactor"],multi:!0},negative:{method(){return this.sign("negative")}},port:{method(){return this.$_addRule("port")},validate:(t,e)=>Number.isSafeInteger(t)&&t>=0&&t<=65535?t:e.error("number.port")},positive:{method(){return this.sign("positive")}},precision:{method(t){return s(Number.isSafeInteger(t),"limit must be an integer"),this.$_addRule({name:"precision",args:{limit:t}})},validate(t,e,i){let{limit:s}=i;const n=t.toString().match(o.precisionRx);return _.max((n[1]?n[1].length:0)-(n[2]?x(n[2],10):0),0)<=s?t:e.error("number.precision",{limit:s,value:t})},convert:!0},sign:{method(t){return s(["negative","positive"].includes(t),"Invalid sign",t),this.$_addRule({name:"sign",args:{sign:t}})},validate:(t,e,i)=>{let{sign:s}=i;return"negative"===s&&t<0||"positive"===s&&t>0?t:e.error("number.".concat(s))}},unsafe:{method(t){return void 0===t&&(t=!0),s("boolean"==typeof t,"enabled must be a boolean"),this.$_setFlag("unsafe",t)}}},cast:{string:{from:t=>"number"==typeof t,to:(t,e)=>t.toString()}},messages:{"number.base":"{{#label}} must be a number","number.greater":"{{#label}} must be greater than {{#limit}}","number.infinity":"{{#label}} cannot be infinity","number.integer":"{{#label}} must be an integer","number.less":"{{#label}} must be less than {{#limit}}","number.max":"{{#label}} must be less than or equal to {{#limit}}","number.min":"{{#label}} must be greater than or equal to {{#limit}}","number.multiple":"{{#label}} must be a multiple of {{#multiple}}","number.negative":"{{#label}} must be a negative number","number.port":"{{#label}} must be a valid port","number.positive":"{{#label}} must be a positive number","number.precision":"{{#label}} must have no more than {{#limit}} decimal places","number.unsafe":"{{#label}} must be a safe number"}}),o.extractSignificantDigits=function(t){return t.replace(o.exponentialPartRegex,"").replace(o.dotRegex,"").replace(o.trailingZerosRegex,"").replace(o.leadingSignAndZerosRegex,"")},o.normalizeDecimal=function(t){return(t=t.replace(/^\+/,"").replace(/\.0*$/,"").replace(/^(-?)\.([^\.]*)$/,"$10.$2").replace(/^(-?)0+([0-9])/,"$1$2")).includes(".")&&t.endsWith("0")&&(t=t.replace(/0+$/,"")),"-0"===t?"0":t}},8966:(t,e,i)=>{const s=i(7824);t.exports=s.extend({type:"object",cast:{map:{from:t=>t&&"object"==typeof t,to:(t,e)=>new Map(w.entries(t))}}})},7417:(t,e,i)=>{const s=i(375),n=i(5380),r=i(1745),o=i(9959),h=i(6064),a=i(9926),u=i(5752),c=i(8068),l=i(8160),f={tlds:a instanceof Set&&{tlds:{allow:a,deny:null}},base64Regex:{true:{true:/^(?:[\w\-]{2}[\w\-]{2})*(?:[\w\-]{2}==|[\w\-]{3}=)?$/,false:/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/},false:{true:/^(?:[\w\-]{2}[\w\-]{2})*(?:[\w\-]{2}(==)?|[\w\-]{3}=?)?$/,false:/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}(==)?|[A-Za-z0-9+\/]{3}=?)?$/}},dataUriRegex:/^data:[\w+.-]+\/[\w+.-]+;((charset=[\w-]+|base64),)?(.*)$/,hexRegex:{withPrefix:/^0x[0-9a-f]+$/i,withOptionalPrefix:/^(?:0x)?[0-9a-f]+$/i,withoutPrefix:/^[0-9a-f]+$/i},ipRegex:o.regex({cidr:"forbidden"}).regex,isoDurationRegex:/^P(?!$)(\d+Y)?(\d+M)?(\d+W)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?$/,guidBrackets:{"{":"}","[":"]","(":")","":""},guidVersions:{uuidv1:"1",uuidv2:"2",uuidv3:"3",uuidv4:"4",uuidv5:"5",uuidv6:"6",uuidv7:"7",uuidv8:"8"},guidSeparators:new Set([void 0,!0,!1,"-",":"]),normalizationForms:["NFC","NFD","NFKC","NFKD"]};t.exports=c.extend({type:"string",flags:{insensitive:{default:!1},truncate:{default:!1}},terms:{replacements:{init:null}},coerce:{from:"string",method(t,e){let{schema:i,state:s,prefs:n}=e;const r=i.$_getRule("normalize");r&&(t=t.normalize(r.args.form));const o=i.$_getRule("case");o&&(t="upper"===o.args.direction?t.toLocaleUpperCase():t.toLocaleLowerCase());const h=i.$_getRule("trim");if(h&&h.args.enabled&&(t=t.trim()),i.$_terms.replacements)for(const e of i.$_terms.replacements)t=t.replace(e.pattern,e.replacement);const a=i.$_getRule("hex");if(a&&a.args.options.byteAligned&&t.length%2!=0&&(t="0".concat(t)),i.$_getRule("isoDate")){const e=f.isoDate(t);e&&(t=e)}if(i.v_.truncate){const e=i.$_getRule("max");if(e){let r=e.args.limit;if(l.isResolvable(r)&&(r=r.resolve(t,s,n),!l.limit(r)))return{value:t,errors:i.$_createError("any.ref",r,{ref:e.args.limit,arg:"limit",reason:"must be a positive integer"},s,n)};t=t.slice(0,r)}}return{value:t}}},validate(t,e){let{schema:i,error:s}=e;if("string"!=typeof t)return{value:t,errors:s("string.base")};if(""===t){const e=i.$_getRule("min");return e&&0===e.args.limit?void 0:{value:t,errors:s("string.empty")}}},rules:{alphanum:{method(){return this.$_addRule("alphanum")},validate:(t,e)=>/^[a-zA-Z0-9]+$/.test(t)?t:e.error("string.alphanum")},base64:{method(t){return void 0===t&&(t={}),l.assertOptions(t,["paddingRequired","urlSafe"]),t=d({urlSafe:!1,paddingRequired:!0},t),s("boolean"==typeof t.paddingRequired,"paddingRequired must be boolean"),s("boolean"==typeof t.urlSafe,"urlSafe must be boolean"),this.$_addRule({name:"base64",args:{options:t}})},validate:(t,e,i)=>{let{options:s}=i;return f.base64Regex[s.paddingRequired][s.urlSafe].test(t)?t:e.error("string.base64")}},case:{method(t){return s(["lower","upper"].includes(t),"Invalid case:",t),this.$_addRule({name:"case",args:{direction:t}})},validate:(t,e,i)=>{let{direction:s}=i;return"lower"===s&&t===t.toLocaleLowerCase()||"upper"===s&&t===t.toLocaleUpperCase()?t:e.error("string.".concat(s,"case"))},convert:!0},creditCard:{method(){return this.$_addRule("creditCard")},validate(t,e){let i=t.length,s=0,n=1;for(;i--;){const e=t.charAt(i)*n;s+=e-9*(e>9),n^=3}return s>0&&s%10==0?t:e.error("string.creditCard")}},dataUri:{method(t){return void 0===t&&(t={}),l.assertOptions(t,["paddingRequired"]),t=d({paddingRequired:!0},t),s("boolean"==typeof t.paddingRequired,"paddingRequired must be boolean"),this.$_addRule({name:"dataUri",args:{options:t}})},validate(t,e,i){let{options:s}=i;const n=t.match(f.dataUriRegex);return!n||n[2]&&"base64"===n[2]&&!f.base64Regex[s.paddingRequired].false.test(n[3])?e.error("string.dataUri"):t}},domain:{method(t){t&&l.assertOptions(t,["allowFullyQualified","allowUnicode","maxDomainSegments","minDomainSegments","tlds"]);const e=f.addressOptions(t);return this.$_addRule({name:"domain",args:{options:t},address:e})},validate:(t,e,i,s)=>{let{address:r}=s;return n.isValid(t,r)?t:e.error("string.domain")}},email:{method(t){void 0===t&&(t={}),l.assertOptions(t,["allowFullyQualified","allowUnicode","ignoreLength","maxDomainSegments","minDomainSegments","multiple","separator","tlds"]),s(void 0===t.multiple||"boolean"==typeof t.multiple,"multiple option must be an boolean");const e=f.addressOptions(t),i=new RegExp("\\s*[".concat(t.separator?h(t.separator):",","]\\s*"));return this.$_addRule({name:"email",args:{options:t},regex:i,address:e})},validate(t,e,i,s){let{options:n}=i,{regex:o,address:h}=s;const a=n.multiple?t.split(o):[t],u=[];for(const t of a)r.isValid(t,h)||u.push(t);return u.length?e.error("string.email",{value:t,invalids:u}):t}},guid:{alias:"uuid",method(t){void 0===t&&(t={}),l.assertOptions(t,["version","separator"]);let e="";if(t.version){const i=[].concat(t.version);s(i.length>=1,"version must have at least 1 valid version specified");const n=new Set;for(let t=0;t<i.length;++t){const r=i[t];s("string"==typeof r,"version at position "+t+" must be a string");const o=f.guidVersions[r.toLowerCase()];s(o,"version at position "+t+" must be one of "+w.keys(f.guidVersions).join(", ")),s(!n.has(o),"version at position "+t+" must not be a duplicate"),e+=o,n.add(o)}}s(f.guidSeparators.has(t.separator),'separator must be one of true, false, "-", or ":"');const i=void 0===t.separator?"[:-]?":!0===t.separator?"[:-]":!1===t.separator?"[]?":"\\".concat(t.separator),n=new RegExp("^([\\[{\\(]?)[0-9A-F]{8}(".concat(i,")[0-9A-F]{4}\\2?[").concat(e||"0-9A-F","][0-9A-F]{3}\\2?[").concat(e?"89AB":"0-9A-F","][0-9A-F]{3}\\2?[0-9A-F]{12}([\\]}\\)]?)$"),"i");return this.$_addRule({name:"guid",args:{options:t},regex:n})},validate(t,e,i,s){let{regex:n}=s;const r=n.exec(t);return r?f.guidBrackets[r[1]]!==r[r.length-1]?e.error("string.guid"):t:e.error("string.guid")}},hex:{method(t){return void 0===t&&(t={}),l.assertOptions(t,["byteAligned","prefix"]),t=d({byteAligned:!1,prefix:!1},t),s("boolean"==typeof t.byteAligned,"byteAligned must be boolean"),s("boolean"==typeof t.prefix||"optional"===t.prefix,'prefix must be boolean or "optional"'),this.$_addRule({name:"hex",args:{options:t}})},validate:(t,e,i)=>{let{options:s}=i;return("optional"===s.prefix?f.hexRegex.withOptionalPrefix:!0===s.prefix?f.hexRegex.withPrefix:f.hexRegex.withoutPrefix).test(t)?s.byteAligned&&t.length%2!=0?e.error("string.hexAlign"):t:e.error("string.hex")}},hostname:{method(){return this.$_addRule("hostname")},validate:(t,e)=>n.isValid(t,{minDomainSegments:1})||f.ipRegex.test(t)?t:e.error("string.hostname")},insensitive:{method(){return this.$_setFlag("insensitive",!0)}},ip:{method(t){void 0===t&&(t={}),l.assertOptions(t,["cidr","version"]);const{cidr:e,versions:i,regex:s}=o.regex(t),n=t.version?i:void 0;return this.$_addRule({name:"ip",args:{options:{cidr:e,version:n}},regex:s})},validate:(t,e,i,s)=>{let{options:n}=i,{regex:r}=s;return r.test(t)?t:n.version?e.error("string.ipVersion",{value:t,cidr:n.cidr,version:n.version}):e.error("string.ip",{value:t,cidr:n.cidr})}},isoDate:{method(){return this.$_addRule("isoDate")},validate:(t,e)=>{let{error:i}=e;return f.isoDate(t)?t:i("string.isoDate")}},isoDuration:{method(){return this.$_addRule("isoDuration")},validate:(t,e)=>f.isoDurationRegex.test(t)?t:e.error("string.isoDuration")},length:{method(t,e){return f.length(this,"length",t,"=",e)},validate(t,e,i,s){let{limit:n,encoding:r}=i,{name:o,operator:h,args:a}=s;const u=!r&&t.length;return l.compare(u,n,h)?t:e.error("string."+o,{limit:a.limit,value:t,encoding:r})},args:[{name:"limit",ref:!0,assert:l.limit,message:"must be a positive integer"},"encoding"]},lowercase:{method(){return this.case("lower")}},max:{method(t,e){return f.length(this,"max",t,"<=",e)},args:["limit","encoding"]},min:{method(t,e){return f.length(this,"min",t,">=",e)},args:["limit","encoding"]},normalize:{method(t){return void 0===t&&(t="NFC"),s(f.normalizationForms.includes(t),"normalization form must be one of "+f.normalizationForms.join(", ")),this.$_addRule({name:"normalize",args:{form:t}})},validate:(t,e,i)=>{let{error:s}=e,{form:n}=i;return t===t.normalize(n)?t:s("string.normalize",{value:t,form:n})},convert:!0},pattern:{alias:"regex",method(t,e){void 0===e&&(e={}),s(t instanceof RegExp,"regex must be a RegExp"),s(!t.flags.includes("g")&&!t.flags.includes("y"),"regex should not use global or sticky mode"),"string"==typeof e&&(e={name:e}),l.assertOptions(e,["invert","name"]);const i=["string.pattern",e.invert?".invert":"",e.name?".name":".base"].join("");return this.$_addRule({name:"pattern",args:{regex:t,options:e},errorCode:i})},validate:(t,e,i,s)=>{let{regex:n,options:r}=i,{errorCode:o}=s;return n.test(t)^r.invert?t:e.error(o,{name:r.name,regex:n,value:t})},args:["regex","options"],multi:!0},replace:{method(t,e){"string"==typeof t&&(t=new RegExp(h(t),"g")),s(t instanceof RegExp,"pattern must be a RegExp"),s("string"==typeof e,"replacement must be a String");const i=this.clone();return i.$_terms.replacements||(i.$_terms.replacements=[]),i.$_terms.replacements.push({pattern:t,replacement:e}),i}},token:{method(){return this.$_addRule("token")},validate:(t,e)=>/^\w+$/.test(t)?t:e.error("string.token")},trim:{method(t){return void 0===t&&(t=!0),s("boolean"==typeof t,"enabled must be a boolean"),this.$_addRule({name:"trim",args:{enabled:t}})},validate:(t,e,i)=>{let{enabled:s}=i;return s&&t!==t.trim()?e.error("string.trim"):t},convert:!0},truncate:{method(t){return void 0===t&&(t=!0),s("boolean"==typeof t,"enabled must be a boolean"),this.$_setFlag("truncate",t)}},uppercase:{method(){return this.case("upper")}},uri:{method(t){void 0===t&&(t={}),l.assertOptions(t,["allowRelative","allowQuerySquareBrackets","domain","relativeOnly","scheme","encodeUri"]),t.domain&&l.assertOptions(t.domain,["allowFullyQualified","allowUnicode","maxDomainSegments","minDomainSegments","tlds"]);const{regex:e,scheme:i}=u.regex(t),s=t.domain?f.addressOptions(t.domain):null;return this.$_addRule({name:"uri",args:{options:t},regex:e,domain:s,scheme:i})},validate(t,e,i,s){let{options:r}=i,{regex:o,domain:h,scheme:a}=s;if(["http:/","https:/"].includes(t))return e.error("string.uri");let u=o.exec(t);if(!u&&e.prefs.convert&&r.encodeUri){const e=encodeURI(t);u=o.exec(e),u&&(t=e)}if(u){const i=u[1]||u[2];return!h||r.allowRelative&&!i||n.isValid(i,h)?t:e.error("string.domain",{value:i})}return r.relativeOnly?e.error("string.uriRelativeOnly"):r.scheme?e.error("string.uriCustomScheme",{scheme:a,value:t}):e.error("string.uri")}}},manifest:{build(t,e){if(e.replacements)for(const{pattern:i,replacement:s}of e.replacements)t=t.replace(i,s);return t}},messages:{"string.alphanum":"{{#label}} must only contain alpha-numeric characters","string.base":"{{#label}} must be a string","string.base64":"{{#label}} must be a valid base64 string","string.creditCard":"{{#label}} must be a credit card","string.dataUri":"{{#label}} must be a valid dataUri string","string.domain":"{{#label}} must contain a valid domain name","string.email":"{{#label}} must be a valid email","string.empty":"{{#label}} is not allowed to be empty","string.guid":"{{#label}} must be a valid GUID","string.hex":"{{#label}} must only contain hexadecimal characters","string.hexAlign":"{{#label}} hex decoded representation must be byte aligned","string.hostname":"{{#label}} must be a valid hostname","string.ip":"{{#label}} must be a valid ip address with a {{#cidr}} CIDR","string.ipVersion":"{{#label}} must be a valid ip address of one of the following versions {{#version}} with a {{#cidr}} CIDR","string.isoDate":"{{#label}} must be in iso format","string.isoDuration":"{{#label}} must be a valid ISO 8601 duration","string.length":"{{#label}} length must be {{#limit}} characters long","string.lowercase":"{{#label}} must only contain lowercase characters","string.max":"{{#label}} length must be less than or equal to {{#limit}} characters long","string.min":"{{#label}} length must be at least {{#limit}} characters long","string.normalize":"{{#label}} must be unicode normalized in the {{#form}} form","string.token":"{{#label}} must only contain alpha-numeric and underscore characters","string.pattern.base":"{{#label}} with value {:[.]} fails to match the required pattern: {{#regex}}","string.pattern.name":"{{#label}} with value {:[.]} fails to match the {{#name}} pattern","string.pattern.invert.base":"{{#label}} with value {:[.]} matches the inverted pattern: {{#regex}}","string.pattern.invert.name":"{{#label}} with value {:[.]} matches the inverted {{#name}} pattern","string.trim":"{{#label}} must not have leading or trailing whitespace","string.uri":"{{#label}} must be a valid uri","string.uriCustomScheme":"{{#label}} must be a valid uri with a scheme matching the {{#scheme}} pattern","string.uriRelativeOnly":"{{#label}} must be a valid relative uri","string.uppercase":"{{#label}} must only contain uppercase characters"}}),f.addressOptions=function(t){if(!t)return f.tlds||t;if(s(void 0===t.minDomainSegments||Number.isSafeInteger(t.minDomainSegments)&&t.minDomainSegments>0,"minDomainSegments must be a positive integer"),s(void 0===t.maxDomainSegments||Number.isSafeInteger(t.maxDomainSegments)&&t.maxDomainSegments>0,"maxDomainSegments must be a positive integer"),!1===t.tlds)return t;if(!0===t.tlds||void 0===t.tlds)return s(f.tlds,"Built-in TLD list disabled"),w.assign({},t,f.tlds);s("object"==typeof t.tlds,"tlds must be true, false, or an object");const e=t.tlds.deny;if(e)return Array.isArray(e)&&(t=w.assign({},t,{tlds:{deny:new Set(e)}})),s(t.tlds.deny instanceof Set,"tlds.deny must be an array, Set, or boolean"),s(!t.tlds.allow,"Cannot specify both tlds.allow and tlds.deny lists"),f.validateTlds(t.tlds.deny,"tlds.deny"),t;const i=t.tlds.allow;return i?!0===i?(s(f.tlds,"Built-in TLD list disabled"),w.assign({},t,f.tlds)):(Array.isArray(i)&&(t=w.assign({},t,{tlds:{allow:new Set(i)}})),s(t.tlds.allow instanceof Set,"tlds.allow must be an array, Set, or boolean"),f.validateTlds(t.tlds.allow,"tlds.allow"),t):t},f.validateTlds=function(t,e){for(const i of t)s(n.isValid(i,{minDomainSegments:1,maxDomainSegments:1}),"".concat(e," must contain valid top level domain names"))},f.isoDate=function(t){if(!l.isIsoDate(t))return null;/.*T.*[+-]\d\d$/.test(t)&&(t+="00");const e=new Date(t);return S(e.getTime())?null:e.toISOString()},f.length=function(t,e,i,n,r){return s(!r||!1,"Invalid encoding:",r),t.$_addRule({name:e,method:"length",args:{limit:i,encoding:r},operator:n})}},8826:(t,e,i)=>{const s=i(375),n=i(8068),r={};r.Map=class extends Map{slice(){return new r.Map(this)}},t.exports=n.extend({type:"symbol",terms:{map:{init:new r.Map}},coerce:{method(t,e){let{schema:i,error:s}=e;const n=i.$_terms.map.get(t);return n&&(t=n),i.v_.only&&"symbol"!=typeof t?{value:t,errors:s("symbol.map",{map:i.$_terms.map})}:{value:t}}},validate(t,e){let{error:i}=e;if("symbol"!=typeof t)return{value:t,errors:i("symbol.base")}},rules:{map:{method(t){t&&!t[Et]&&"object"==typeof t&&(t=w.entries(t)),s(t&&t[Et],"Iterable must be an iterable or object");const e=this.clone(),i=[];for(const n of t){s(n&&n[Et],"Entry must be an iterable");const[t,r]=n;s("object"!=typeof t&&"function"!=typeof t&&"symbol"!=typeof t,"Key must not be of type object, function, or Symbol"),s("symbol"==typeof r,"Value must be a Symbol"),e.$_terms.map.set(t,r),i.push(r)}return e.valid(...i)}}},manifest:{build:(t,e)=>(e.map&&(t=t.map(e.map)),t)},messages:{"symbol.base":"{{#label}} must be a symbol","symbol.map":"{{#label}} must be one of {{#map}}"}})},8863:(t,e,i)=>{const s=i(375),n=i(8571),r=i(738),o=i(9621),h=i(8160),a=i(6354),u=i(493),c={result:Po("result")};e.entry=function(t,e,i){let n=h.defaults;i&&(s(void 0===i.warnings,"Cannot override warnings preference in synchronous validation"),s(void 0===i.artifacts,"Cannot override artifacts preference in synchronous validation"),n=h.preferences(h.defaults,i));const r=c.entry(t,e,n);s(!r.mainstay.externals.length,"Schema with external rules must use validateAsync()");const o={value:r.value};return r.error&&(o.error=r.error),r.mainstay.warnings.length&&(o.warning=a.details(r.mainstay.warnings)),r.mainstay.debug&&(o.debug=r.mainstay.debug),r.mainstay.artifacts&&(o.artifacts=r.mainstay.artifacts),o},e.entryAsync=async function(t,e,i){let s=h.defaults;i&&(s=h.preferences(h.defaults,i));const n=c.entry(t,e,s),r=n.mainstay;if(n.error)throw r.debug&&(n.error.debug=r.debug),n.error;if(r.externals.length){let e=n.value;const u=[];for(const n of r.externals){const l=n.state.path,d="link"===n.schema.type?r.links.get(n.schema):null;let f,_,v=e;const m=l.length?[e]:[],g=l.length?o(t,l):t;if(l.length){f=l[l.length-1];let t=e;for(const e of l.slice(0,-1))t=t[e],m.unshift(t);_=m[0],v=_[f]}try{const t=(t,e)=>(d||n.schema).$_createError(t,v,e,n.state,s),o=await n.method(v,{schema:n.schema,linked:d,state:n.state,prefs:i,original:g,error:t,errorsArray:c.errorsArray,warn:(t,e)=>r.warnings.push((d||n.schema).$_createError(t,v,e,n.state,s)),message:(t,e)=>(d||n.schema).$_createError("external",v,e,n.state,s,{messages:t})});if(void 0===o||o===v)continue;if(o instanceof a.Report){if(r.tracer.log(n.schema,n.state,"rule","external","error"),u.push(o),s.abortEarly)break;continue}if(Array.isArray(o)&&o[h.symbols.errors]){if(r.tracer.log(n.schema,n.state,"rule","external","error"),u.push(...o),s.abortEarly)break;continue}_?(r.tracer.value(n.state,"rule",v,o,"external"),_[f]=o):(r.tracer.value(n.state,"rule",e,o,"external"),e=o)}catch(t){throw s.errors.label&&(t.message+=" (".concat(n.label,")")),t}}if(n.value=e,u.length)throw n.error=a.process(u,t,s),r.debug&&(n.error.debug=r.debug),n.error}if(!s.warnings&&!s.debug&&!s.artifacts)return n.value;const u={value:n.value};return r.warnings.length&&(u.warning=a.details(r.warnings)),r.debug&&(u.debug=r.debug),r.artifacts&&(u.artifacts=r.artifacts),u},c.Mainstay=class{snapshot(){this._v.push({externals:this.externals.slice(),warnings:this.warnings.slice()})}restore(){const t=this._v.pop();this.externals=t.externals,this.warnings=t.warnings}commit(){this._v.pop()}constructor(t,e,i){this.externals=[],this.warnings=[],this.tracer=t,this.debug=e,this.links=i,this.shadow=null,this.artifacts=null,this._v=[]}},c.entry=function(t,i,s){const{tracer:n,cleanup:r}=c.tracer(i,s),o=s.debug?[]:null,h=i.u_.G_?new Map:null,l=new c.Mainstay(n,o,h),d=i.u_.G_?[{schema:i}]:null,f=new u([],[],{mainstay:l,schemas:d}),_=e.validate(t,i,f,s);r&&i.$_root.untrace();const v=a.process(_.errors,t,s);return{value:_.value,error:v,mainstay:l}},c.tracer=function(t,e){return t.$_root.T_?{tracer:t.$_root.T_.vv(t)}:e.debug?(s(t.$_root.trace,"Debug mode not supported"),{tracer:t.$_root.trace().vv(t),cleanup:!0}):{tracer:c.ignore}},e.validate=function(t,e,i,s,n){if(void 0===n&&(n={}),e.$_terms.whens&&(e=e.C_(t,i,s).schema),e.c_&&(s=c.prefs(e,s)),e.d_&&s.cache){const s=e.d_.get(t);if(i.mainstay.tracer.debug(i,"validate","cached",!!s),s)return s}const r=(n,r,o)=>e.$_createError(n,t,r,o||i,s),o={original:t,prefs:s,schema:e,state:i,error:r,errorsArray:c.errorsArray,warn:(t,e,s)=>i.mainstay.warnings.push(r(t,e,s)),message:(n,r)=>e.$_createError("custom",t,r,i,s,{messages:n})};i.mainstay.tracer.entry(e,i);const a=e.y_;if(a.prepare&&void 0!==t&&s.convert){const e=a.prepare(t,o);if(e){if(i.mainstay.tracer.value(i,"prepare",t,e.value),e.errors)return c.finalize(e.value,[].concat(e.errors),o);t=e.value}}if(a.coerce&&void 0!==t&&s.convert&&(!a.coerce.from||a.coerce.from.includes(typeof t))){const e=a.coerce.method(t,o);if(e){if(i.mainstay.tracer.value(i,"coerced",t,e.value),e.errors)return c.finalize(e.value,[].concat(e.errors),o);t=e.value}}const u=e.v_.empty;u&&u.$_match(c.trim(t,e),i.nest(u),h.defaults)&&(i.mainstay.tracer.value(i,"empty",t,void 0),t=void 0);const l=n.presence||e.v_.presence||(e.v_.Q_?null:s.presence);if(void 0===t){if("forbidden"===l)return c.finalize(t,null,o);if("required"===l)return c.finalize(t,[e.$_createError("any.required",t,null,i,s)],o);if("optional"===l){if(e.v_.default!==h.symbols.deepDefault)return c.finalize(t,null,o);i.mainstay.tracer.value(i,"default",t,{}),t={}}}else if("forbidden"===l)return c.finalize(t,[e.$_createError("any.unknown",t,null,i,s)],o);const d=[];if(e.f_){const n=e.f_.get(t,i,s,e.v_.insensitive);if(n)return s.convert&&(i.mainstay.tracer.value(i,"valids",t,n.value),t=n.value),i.mainstay.tracer.filter(e,i,"valid",n),c.finalize(t,null,o);if(e.v_.only){const n=e.$_createError("any.only",t,{valids:e.f_.values({display:!0})},i,s);if(s.abortEarly)return c.finalize(t,[n],o);d.push(n)}}if(e.__){const n=e.__.get(t,i,s,e.v_.insensitive);if(n){i.mainstay.tracer.filter(e,i,"invalid",n);const r=e.$_createError("any.invalid",t,{invalids:e.__.values({display:!0})},i,s);if(s.abortEarly)return c.finalize(t,[r],o);d.push(r)}}if(a.validate){const e=a.validate(t,o);if(e&&(i.mainstay.tracer.value(i,"base",t,e.value),t=e.value,e.errors)){if(!Array.isArray(e.errors))return d.push(e.errors),c.finalize(t,d,o);if(e.errors.length)return d.push(...e.errors),c.finalize(t,d,o)}}return e.m_.length?c.rules(t,d,o):c.finalize(t,d,o)},c.rules=function(t,e,i){const{schema:s,state:n,prefs:r}=i;for(const o of s.m_){const a=s.y_.rules[o.method];if(a.convert&&r.convert){n.mainstay.tracer.log(s,n,"rule",o.name,"full");continue}let u,l=o.args;if(o.Gd.length){l=w.assign({},l);for(const e of o.Gd){const i=a.argsByName.get(e),o=l[e].resolve(t,n,r),c=i.normalize?i.normalize(o):o,d=h.validateArg(c,null,i);if(d){u=s.$_createError("any.ref",o,{arg:e,ref:l[e],reason:d},n,r);break}l[e]=c}}u=u||a.validate(t,i,l,o);const d=c.rule(u,o);if(d.errors){if(n.mainstay.tracer.log(s,n,"rule",o.name,"error"),o.warn){n.mainstay.warnings.push(...d.errors);continue}if(r.abortEarly)return c.finalize(t,d.errors,i);e.push(...d.errors)}else n.mainstay.tracer.log(s,n,"rule",o.name,"pass"),n.mainstay.tracer.value(n,"rule",t,d.value,o.name),t=d.value}return c.finalize(t,e,i)},c.rule=function(t,e){return t instanceof a.Report?(c.error(t,e),{errors:[t],value:null}):Array.isArray(t)&&t[h.symbols.errors]?(t.forEach((t=>c.error(t,e))),{errors:t,value:null}):{errors:null,value:t}},c.error=function(t,e){return e.message&&t.B_(e.message),t},c.finalize=function(t,e,i){e=e||[];const{schema:n,state:r,prefs:o}=i;if(e.length){const s=c.default("failover",void 0,e,i);void 0!==s&&(r.mainstay.tracer.value(r,"failover",t,s),t=s,e=[])}if(e.length&&n.v_.error)if("function"==typeof n.v_.error){e=n.v_.error(e),Array.isArray(e)||(e=[e]);for(const t of e)s(t instanceof g||t instanceof a.Report,"error() must return an Error object")}else e=[n.v_.error];if(void 0===t){const s=c.default("default",t,e,i);r.mainstay.tracer.value(r,"default",t,s),t=s}if(n.v_.cast&&void 0!==t){const e=n.y_.cast[n.v_.cast];if(e.from(t)){const s=e.to(t,i);r.mainstay.tracer.value(r,"cast",t,s,n.v_.cast),t=s}}if(n.$_terms.externals&&o.externals&&!1!==o.x_)for(const{method:t}of n.$_terms.externals)r.mainstay.externals.push({method:t,schema:n,state:r,label:a.label(n.v_,r,o)});const h={value:t,errors:e.length?e:null};return n.v_.result&&(h.value="strip"===n.v_.result?void 0:i.original,r.mainstay.tracer.value(r,n.v_.result,t,h.value),r.shadow(t,n.v_.result)),n.d_&&!1!==o.cache&&!n.l_.length&&n.d_.set(i.original,h),void 0===t||h.errors||void 0===n.v_.artifact||(r.mainstay.artifacts=r.mainstay.artifacts||new Map,r.mainstay.artifacts.has(n.v_.artifact)||r.mainstay.artifacts.set(n.v_.artifact,[]),r.mainstay.artifacts.get(n.v_.artifact).push(r.path)),h},c.prefs=function(t,e){const i=e===h.defaults;return i&&t.c_[h.symbols.prefs]?t.c_[h.symbols.prefs]:(e=h.preferences(e,t.c_),i&&(t.c_[h.symbols.prefs]=e),e)},c.default=function(t,e,i,s){const{schema:r,state:o,prefs:a}=s,u=r.v_[t];if(a.noDefaults||void 0===u)return e;if(o.mainstay.tracer.log(r,o,"rule",t,"full"),!u)return u;if("function"==typeof u){const e=u.length?[n(o.ancestors[0]),s]:[];try{return u(...e)}catch(e){return void i.push(r.$_createError("any.".concat(t),null,{error:e},o,a))}}return"object"!=typeof u?u:u[h.symbols.literal]?u.literal:h.isResolvable(u)?u.resolve(e,o,a):n(u)},c.trim=function(t,e){if("string"!=typeof t)return t;const i=e.$_getRule("trim");return i&&i.args.enabled?t.trim():t},c.ignore={active:!1,debug:r,entry:r,filter:r,log:r,resolve:r,value:r},c.errorsArray=function(){const t=[];return t[h.symbols.errors]=!0,t}},2036:(t,e,i)=>{const s=i(375),n=i(9474),r=i(8160),o={};t.exports=o.Values=class{get length(){return this.p_.size+this.l_.size}add(t,e){r.isResolvable(t)?this.l_.has(t)||(this.l_.add(t),e&&e.register(t)):this.has(t,null,null,!1)||(this.p_.add(t),"string"==typeof t&&this.mv.set(t.toLowerCase(),t))}static merge(t,e,i){if(t=t||new o.Values,e){if(e.pv)return e.clone();for(const i of[...e.p_,...e.l_])t.add(i)}if(i)for(const e of[...i.p_,...i.l_])t.remove(e);return t.length?t:null}remove(t){r.isResolvable(t)?this.l_.delete(t):(this.p_.delete(t),"string"==typeof t&&this.mv.delete(t.toLowerCase()))}has(t,e,i,s){return!!this.get(t,e,i,s)}get(t,e,i,s){if(!this.length)return!1;if(this.p_.has(t))return{value:t};if("string"==typeof t&&t&&s){const e=this.mv.get(t.toLowerCase());if(e)return{value:e}}if(!this.l_.size&&"object"!=typeof t)return!1;if("object"==typeof t)for(const e of this.p_)if(n(e,t))return{value:e};if(e)for(const r of this.l_){const o=r.resolve(t,e,i,null,{in:!0});if(void 0===o)continue;const h=r.in&&"object"==typeof o?Array.isArray(o)?o:w.keys(o):[o];for(const e of h)if(typeof e==typeof t)if(s&&t&&"string"==typeof t){if(e.toLowerCase()===t.toLowerCase())return{value:e,ref:r}}else if(n(e,t))return{value:e,ref:r}}return!1}override(){this.pv=!0}values(t){if(t&&t.display){const t=[];for(const e of[...this.p_,...this.l_])void 0!==e&&t.push(e);return t}return Array.from([...this.p_,...this.l_])}clone(){const t=new o.Values(this.p_,this.l_);return t.pv=this.pv,t}concat(t){s(!t.pv,"Cannot concat override set of values");const e=new o.Values([...this.p_,...t.p_],[...this.l_,...t.l_]);return e.pv=this.pv,e}describe(){const t=[];this.pv&&t.push({override:!0});for(const e of this.p_.values())t.push(e&&"object"==typeof e?{value:e}:e);for(const e of this.l_.values())t.push(e.describe());return t}constructor(t,e){this.p_=new Set(t),this.l_=new Set(e),this.mv=o.lowercases(t),this.pv=!1}},o.Values.prototype[r.symbols.values]=!0,o.Values.prototype.slice=o.Values.prototype.clone,o.lowercases=function(t){const e=new Map;if(t)for(const i of t)"string"==typeof i&&e.set(i.toLowerCase(),i);return e}},978:(t,e,i)=>{const s=i(375),n=i(8571),r=i(1687),o=i(9621),h={};t.exports=function(t,e,i){if(void 0===i&&(i={}),s(t&&"object"==typeof t,"Invalid defaults value: must be an object"),s(!e||!0===e||"object"==typeof e,"Invalid source value: must be true, falsy or an object"),s("object"==typeof i,"Invalid options: must be an object"),!e)return null;if(i.shallow)return h.applyToDefaultsWithShallow(t,e,i);const o=n(t);if(!0===e)return o;const a=void 0!==i.nullOverride&&i.nullOverride;return r(o,e,{nullOverride:a,mergeArrays:!1})},h.applyToDefaultsWithShallow=function(t,e,i){const a=i.shallow;s(Array.isArray(a),"Invalid keys");const u=new Map,c=!0===e?null:new Set;for(let i of a){i=Array.isArray(i)?i:i.split(".");const s=o(t,i);s&&"object"==typeof s?u.set(s,c&&o(e,i)||s):c&&c.add(i)}const l=n(t,{},u);if(!c)return l;for(const t of c)h.reachCopy(l,e,t);const d=void 0!==i.nullOverride&&i.nullOverride;return r(l,e,{nullOverride:d,mergeArrays:!1})},h.reachCopy=function(t,e,i){for(const t of i){if(!(t in e))return;const i=e[t];if("object"!=typeof i||null===i)return;e=i}const s=e;let n=t;for(let t=0;t<i.length-1;++t){const e=i[t];"object"!=typeof n[e]&&(n[e]={}),n=n[e]}n[i[i.length-1]]=s}},375:(t,e,i)=>{const s=i(7916);t.exports=function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];if(!t)throw 1===i.length&&i[0]instanceof g?i[0]:new s(i)}},8571:(t,e,i)=>{const s=i(9621),n=i(4277),r=i(7043),o={needsProtoHack:new Set([n.set,n.map,n.weakSet,n.weakMap])};t.exports=o.clone=function(t,e,i){if(void 0===e&&(e={}),void 0===i&&(i=null),"object"!=typeof t||null===t)return t;let s=o.clone,h=i;if(e.shallow){if(!0!==e.shallow)return o.cloneWithShallow(t,e);s=t=>t}else if(h){const e=h.get(t);if(e)return e}else h=new Map;const a=n.getInternalProto(t);if(a===n.buffer)return!1;if(a===n.date)return new Date(t.getTime());if(a===n.regex)return new RegExp(t);const u=o.base(t,a,e);if(u===t)return t;if(h&&h.set(t,u),a===n.set)for(const i of t)u.add(s(i,e,h));else if(a===n.map)for(const[i,n]of t)u.set(i,s(n,e,h));const c=r.keys(t,e);for(const i of c){if("__proto__"===i)continue;if(a===n.array&&"length"===i){u.length=t.length;continue}const r=w.getOwnPropertyDescriptor(t,i);r?r.get||r.set?w.defineProperty(u,i,r):r.enumerable?u[i]=s(t[i],e,h):w.defineProperty(u,i,{enumerable:!1,writable:!0,configurable:!0,value:s(t[i],e,h)}):w.defineProperty(u,i,{enumerable:!0,writable:!0,configurable:!0,value:s(t[i],e,h)})}return u},o.cloneWithShallow=function(t,e){const i=e.shallow;(e=w.assign({},e)).shallow=!1;const n=new Map;for(const e of i){const i=s(t,e);"object"!=typeof i&&"function"!=typeof i||n.set(i,i)}return o.clone(t,e,n)},o.base=function(t,e,i){if(!1===i.prototype)return o.needsProtoHack.has(e)?new e.constructor:e===n.array?[]:{};const s=w.getPrototypeOf(t);if(s&&s.isImmutable)return t;if(e===n.array){const t=[];return s!==e&&w.setPrototypeOf(t,s),t}if(o.needsProtoHack.has(e)){const t=new s.constructor;return s!==e&&w.setPrototypeOf(t,s),t}return w.create(s)}},9474:(t,e,i)=>{const s=i(4277),n={mismatched:null};t.exports=function(t,e,i){return i=w.assign({prototype:!0},i),!!n.isDeepEqual(t,e,i,[])},n.isDeepEqual=function(t,e,i,r){if(t===e)return 0!==t||1/t==1/e;const o=typeof t;if(o!==typeof e||null===t||null===e)return!1;if("function"===o){if(!i.deepFunction||t.toString()!==e.toString())return!1}else if("object"!==o)return t!=t&&e!=e;const h=n.getSharedType(t,e,!!i.prototype);switch(h){case s.buffer:return!1;case s.promise:return t===e;case s.regex:return t.toString()===e.toString();case n.mismatched:return!1}for(let i=r.length-1;i>=0;--i)if(r[i].isSame(t,e))return!0;r.push(new n.SeenEntry(t,e));try{return!!n.isDeepEqualObj(h,t,e,i,r)}finally{r.pop()}},n.getSharedType=function(t,e,i){if(i)return w.getPrototypeOf(t)!==w.getPrototypeOf(e)?n.mismatched:s.getInternalProto(t);const r=s.getInternalProto(t);return r!==s.getInternalProto(e)?n.mismatched:r},n.valueOf=function(t){const e=t.valueOf;if(void 0===e)return t;try{return e.call(t)}catch(t){return t}},n.hasOwnEnumerableProperty=function(t,e){return w.prototype.propertyIsEnumerable.call(t,e)},n.isSetSimpleEqual=function(t,e){for(const i of Set.prototype.values.call(t))if(!Set.prototype.has.call(e,i))return!1;return!0},n.isDeepEqualObj=function(t,e,i,r,o){const{isDeepEqual:h,valueOf:a,hasOwnEnumerableProperty:u}=n,{keys:c,getOwnPropertySymbols:l}=w;if(t===s.array){if(!r.part){if(e.length!==i.length)return!1;for(let t=0;t<e.length;++t)if(!h(e[t],i[t],r,o))return!1;return!0}for(const t of e)for(const e of i)if(h(t,e,r,o))return!0}else if(t===s.set){if(e.size!==i.size)return!1;if(!n.isSetSimpleEqual(e,i)){const t=new Set(Set.prototype.values.call(i));for(const i of Set.prototype.values.call(e)){if(t.delete(i))continue;let e=!1;for(const s of t)if(h(i,s,r,o)){t.delete(s),e=!0;break}if(!e)return!1}}}else if(t===s.map){if(e.size!==i.size)return!1;for(const[t,s]of Map.prototype.entries.call(e))if(void 0===s&&!Map.prototype.has.call(i,t)||!h(s,Map.prototype.get.call(i,t),r,o))return!1}else if(t===s.error&&(e.name!==i.name||e.message!==i.message))return!1;const d=a(e),f=a(i);if((e!==d||i!==f)&&!h(d,f,r,o))return!1;const _=c(e);if(!r.part&&_.length!==c(i).length&&!r.skip)return!1;let v=0;for(const t of _)if(r.skip&&r.skip.includes(t))void 0===i[t]&&++v;else if(!u(i,t)||!h(e[t],i[t],r,o))return!1;if(!r.part&&_.length-v!==c(i).length)return!1;if(!1!==r.symbols){const t=l(e),s=new Set(l(i));for(const n of t){if(!r.skip||!r.skip.includes(n))if(u(e,n)){if(!u(i,n)||!h(e[n],i[n],r,o))return!1}else if(u(i,n))return!1;s.delete(n)}for(const t of s)if(u(i,t))return!1}return!0},n.SeenEntry=class{isSame(t,e){return this.obj===t&&this.ref===e}constructor(t,e){this.obj=t,this.ref=e}}},7916:(t,e,i)=>{const s=i(8761);t.exports=class extends g{constructor(t){super(t.filter((t=>""!==t)).map((t=>"string"==typeof t?t:t instanceof g?t.message:s(t))).join(" ")||"Unknown error"),"function"==typeof g.captureStackTrace&&g.captureStackTrace(this,e.assert)}}},5277:t=>{const e={};t.exports=function(t){if(!t)return"";let i="";for(let s=0;s<t.length;++s){const n=t.charCodeAt(s);e.isSafe(n)?i+=t[s]:i+=e.escapeHtmlChar(n)}return i},e.escapeHtmlChar=function(t){return e.namedHtml.get(t)||(t>=256?"&#"+t+";":"&#x".concat(t.toString(16).padStart(2,"0"),";"))},e.isSafe=function(t){return e.safeCharCodes.has(t)},e.namedHtml=new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[34,"&quot;"],[160,"&nbsp;"],[162,"&cent;"],[163,"&pound;"],[164,"&curren;"],[169,"&copy;"],[174,"&reg;"]]),e.safeCharCodes=function(){const t=new Set;for(let e=32;e<123;++e)(e>=97||e>=65&&e<=90||e>=48&&e<=57||32===e||46===e||44===e||45===e||58===e||95===e)&&t.add(e);return t}()},6064:t=>{t.exports=function(t){return t.replace(/[\^\$\.\*\+\-\?\=\!\:\|\\\/\(\)\[\]\{\}\,]/g,"\\$&")}},738:t=>{t.exports=function(){}},1687:(t,e,i)=>{const s=i(375),n=i(8571),r=i(7043),o={};t.exports=o.merge=function(t,e,i){if(s(t&&"object"==typeof t,"Invalid target value: must be an object"),s(null==e||"object"==typeof e,"Invalid source value: must be null, undefined, or an object"),!e)return t;if(i=w.assign({nullOverride:!0,mergeArrays:!0},i),Array.isArray(e)){s(Array.isArray(t),"Cannot merge array onto an object"),i.mergeArrays||(t.length=0);for(let s=0;s<e.length;++s)t.push(n(e[s],{symbols:i.symbols}));return t}const h=r.keys(e,i);for(let s=0;s<h.length;++s){const r=h[s];if("__proto__"===r||!w.prototype.propertyIsEnumerable.call(e,r))continue;const a=e[r];if(a&&"object"==typeof a){if(t[r]===a)continue;!t[r]||"object"!=typeof t[r]||Array.isArray(t[r])!==Array.isArray(a)||a instanceof Date||a instanceof RegExp?t[r]=n(a,{symbols:i.symbols}):o.merge(t[r],a,i)}else(null!=a||i.nullOverride)&&(t[r]=a)}return t}},9621:(t,e,i)=>{const s=i(375),n={};t.exports=function(t,e,i){if(!1===e||null==e)return t;"string"==typeof(i=i||{})&&(i={separator:i});const r=Array.isArray(e);s(!r||!i.separator,"Separator option is not valid for array-based chain");const o=r?e:e.split(i.separator||".");let h=t;for(let t=0;t<o.length;++t){let r=o[t];const a=i.iterables&&n.iterables(h);if(Array.isArray(h)||"set"===a){const t=Number(r);Number.isInteger(t)&&(r=t<0?h.length+t:t)}if(!h||"function"==typeof h&&!1===i.functions||!a&&void 0===h[r]){s(!i.strict||t+1===o.length,"Missing segment",r,"in reach path ",e),s("object"==typeof h||!0===i.functions||"function"!=typeof h,"Invalid segment",r,"in reach path ",e),h=i.default;break}h=a?"set"===a?[...h][r]:h.get(r):h[r]}return h},n.iterables=function(t){return t instanceof Set?"set":t instanceof Map?"map":void 0}},8761:t=>{t.exports=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];try{return JSON.stringify(...e)}catch(t){return"[Cannot display object: "+t.message+"]"}}},4277:(t,e)=>{const i={};e=t.exports={array:Array.prototype,buffer:!1,date:Date.prototype,error:g.prototype,generic:w.prototype,map:Map.prototype,promise:Promise.prototype,regex:RegExp.prototype,set:Set.prototype,weakMap:WeakMap.prototype,weakSet:WeakSet.prototype},i.typeMap=new Map([["[object Error]",e.error],["[object Map]",e.map],["[object Promise]",e.promise],["[object Set]",e.set],["[object WeakMap]",e.weakMap],["[object WeakSet]",e.weakSet]]),e.getInternalProto=function(t){if(Array.isArray(t))return e.array;if(t instanceof Date)return e.date;if(t instanceof RegExp)return e.regex;if(t instanceof g)return e.error;const s=w.prototype.toString.call(t);return i.typeMap.get(s)||e.generic}},7043:(t,e)=>{e.keys=function(t,e){return void 0===e&&(e={}),!1!==e.symbols?Reflect.ownKeys(t):w.getOwnPropertyNames(t)}},3652:(t,e,i)=>{const s=i(375),n={};e.Sorter=class{add(t,e){const i=[].concat((e=e||{}).before||[]),n=[].concat(e.after||[]),r=e.group||"?",o=e.sort||0;s(!i.includes(r),"Item cannot come before itself: ".concat(r)),s(!i.includes("?"),"Item cannot come before unassociated items"),s(!n.includes(r),"Item cannot come after itself: ".concat(r)),s(!n.includes("?"),"Item cannot come after unassociated items"),Array.isArray(t)||(t=[t]);for(const e of t){const t={seq:this.tc.length,sort:o,before:i,after:n,group:r,node:e};this.tc.push(t)}if(!e.manual){const t=this.yv();s(t,"item","?"!==r?"added into group ".concat(r):"","created a dependencies error")}return this.nodes}merge(t){Array.isArray(t)||(t=[t]);for(const e of t)if(e)for(const t of e.tc)this.tc.push(w.assign({},t));this.tc.sort(n.mergeSort);for(let t=0;t<this.tc.length;++t)this.tc[t].seq=t;const e=this.yv();return s(e,"merge created a dependencies error"),this.nodes}sort(){const t=this.yv();return s(t,"sort created a dependencies error"),this.nodes}yv(){const t={},e=w.create(null),i=w.create(null);for(const s of this.tc){const n=s.seq,r=s.group;i[r]=i[r]||[],i[r].push(n),t[n]=s.before;for(const t of s.after)e[t]=e[t]||[],e[t].push(n)}for(const e in t){const s=[];for(const n in t[e]){const r=t[e][n];i[r]=i[r]||[],s.push(...i[r])}t[e]=s}for(const s in e)if(i[s])for(const n of i[s])t[n].push(...e[s]);const s={};for(const e in t){const i=t[e];for(const t of i)s[t]=s[t]||[],s[t].push(e)}const n={},r=[];for(let t=0;t<this.tc.length;++t){let e=t;if(s[t]){e=null;for(let t=0;t<this.tc.length;++t){if(!0===n[t])continue;s[t]||(s[t]=[]);const i=s[t].length;let r=0;for(let e=0;e<i;++e)n[s[t][e]]&&++r;if(r===i){e=t;break}}}null!==e&&(n[e]=!0,r.push(e))}if(r.length!==this.tc.length)return!1;const o={};for(const t of this.tc)o[t.seq]=t;this.tc=[],this.nodes=[];for(const t of r){const e=o[t];this.nodes.push(e.node),this.tc.push(e)}return!0}constructor(){this.tc=[],this.nodes=[]}},n.mergeSort=(t,e)=>t.sort===e.sort?0:t.sort<e.sort?-1:1},5380:(t,e,i)=>{const s=i(443),n=i(2178),r={minDomainSegments:2,nonAsciiRx:/[^\x00-\x7f]/,domainControlRx:/[\x00-\x20@\:\/\\#!\$&\'\(\)\*\+,;=\?]/,tldSegmentRx:/^[a-zA-Z](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?$/,domainSegmentRx:/^[a-zA-Z0-9](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?$/,URL:s.URL||URL};e.analyze=function(t,e){if(void 0===e&&(e={}),!t)return n.code("DOMAIN_NON_EMPTY_STRING");if("string"!=typeof t)throw new g("Invalid input: domain must be a string");if(t.length>256)return n.code("DOMAIN_TOO_LONG");if(r.nonAsciiRx.test(t)){if(!1===e.allowUnicode)return n.code("DOMAIN_INVALID_UNICODE_CHARS");t=t.normalize("NFC")}if(r.domainControlRx.test(t))return n.code("DOMAIN_INVALID_CHARS");t=r.punycode(t),e.allowFullyQualified&&"."===t[t.length-1]&&(t=t.slice(0,-1));const i=e.minDomainSegments||r.minDomainSegments,s=t.split(".");if(s.length<i)return n.code("DOMAIN_SEGMENTS_COUNT");if(e.maxDomainSegments&&s.length>e.maxDomainSegments)return n.code("DOMAIN_SEGMENTS_COUNT_MAX");const o=e.tlds;if(o){const t=s[s.length-1].toLowerCase();if(o.deny&&o.deny.has(t)||o.allow&&!o.allow.has(t))return n.code("DOMAIN_FORBIDDEN_TLDS")}for(let t=0;t<s.length;++t){const e=s[t];if(!e.length)return n.code("DOMAIN_EMPTY_SEGMENT");if(e.length>63)return n.code("DOMAIN_LONG_SEGMENT");if(t<s.length-1){if(!r.domainSegmentRx.test(e))return n.code("DOMAIN_INVALID_CHARS")}else if(!r.tldSegmentRx.test(e))return n.code("DOMAIN_INVALID_TLDS_CHARS")}return null},e.isValid=function(t,i){return!e.analyze(t,i)},r.punycode=function(t){t.includes("%")&&(t=t.replace(/%/g,"%25"));try{return new r.URL("http://".concat(t)).host}catch(e){return t}}},1745:(t,e,i)=>{const s=i(9848),n=i(5380),r=i(2178),o={nonAsciiRx:/[^\x00-\x7f]/,encoder:new(s.TextEncoder||TextEncoder)};e.analyze=function(t,e){return o.email(t,e)},e.isValid=function(t,e){return!o.email(t,e)},o.email=function(t,e){if(void 0===e&&(e={}),"string"!=typeof t)throw new g("Invalid input: email must be a string");if(!t)return r.code("EMPTY_STRING");const i=!o.nonAsciiRx.test(t);if(!i){if(!1===e.allowUnicode)return r.code("FORBIDDEN_UNICODE");t=t.normalize("NFC")}const s=t.split("@");if(2!==s.length)return s.length>2?r.code("MULTIPLE_AT_CHAR"):r.code("MISSING_AT_CHAR");const[h,a]=s;if(!h)return r.code("EMPTY_LOCAL");if(!e.ignoreLength){if(t.length>254)return r.code("ADDRESS_TOO_LONG");if(o.encoder.encode(h).length>64)return r.code("LOCAL_TOO_LONG")}return o.local(h,i)||n.analyze(a,e)},o.local=function(t,e){const i=t.split(".");for(const t of i){if(!t.length)return r.code("EMPTY_LOCAL_SEGMENT");if(e){if(!o.atextRx.test(t))return r.code("INVALID_LOCAL_CHARS")}else for(const e of t){if(o.atextRx.test(e))continue;const t=o.binary(e);if(!o.atomRx.test(t))return r.code("INVALID_LOCAL_CHARS")}}},o.binary=function(t){return Array.from(o.encoder.encode(t)).map((t=>String.fromCharCode(t))).join("")},o.atextRx=/^[\w!#\$%&'\*\+\-/=\?\^`\{\|\}~]+$/,o.atomRx=new RegExp(["(?:[\\xc2-\\xdf][\\x80-\\xbf])","(?:\\xe0[\\xa0-\\xbf][\\x80-\\xbf])|(?:[\\xe1-\\xec][\\x80-\\xbf]{2})|(?:\\xed[\\x80-\\x9f][\\x80-\\xbf])|(?:[\\xee-\\xef][\\x80-\\xbf]{2})","(?:\\xf0[\\x90-\\xbf][\\x80-\\xbf]{2})|(?:[\\xf1-\\xf3][\\x80-\\xbf]{3})|(?:\\xf4[\\x80-\\x8f][\\x80-\\xbf]{2})"].join("|"))},2178:(t,e)=>{e.codes={EMPTY_STRING:"Address must be a non-empty string",FORBIDDEN_UNICODE:"Address contains forbidden Unicode characters",MULTIPLE_AT_CHAR:"Address cannot contain more than one @ character",MISSING_AT_CHAR:"Address must contain one @ character",EMPTY_LOCAL:"Address local part cannot be empty",ADDRESS_TOO_LONG:"Address too long",LOCAL_TOO_LONG:"Address local part too long",EMPTY_LOCAL_SEGMENT:"Address local part contains empty dot-separated segment",INVALID_LOCAL_CHARS:"Address local part contains invalid character",DOMAIN_NON_EMPTY_STRING:"Domain must be a non-empty string",DOMAIN_TOO_LONG:"Domain too long",DOMAIN_INVALID_UNICODE_CHARS:"Domain contains forbidden Unicode characters",DOMAIN_INVALID_CHARS:"Domain contains invalid character",DOMAIN_INVALID_TLDS_CHARS:"Domain contains invalid tld character",DOMAIN_SEGMENTS_COUNT:"Domain lacks the minimum required number of segments",DOMAIN_SEGMENTS_COUNT_MAX:"Domain contains too many segments",DOMAIN_FORBIDDEN_TLDS:"Domain uses forbidden TLD",DOMAIN_EMPTY_SEGMENT:"Domain contains empty dot-separated segment",DOMAIN_LONG_SEGMENT:"Domain contains dot-separated segment that is too long"},e.code=function(t){return{code:t,error:e.codes[t]}}},9959:(t,e,i)=>{const s=i(375),n=i(5752);e.regex=function(t){void 0===t&&(t={}),s(void 0===t.cidr||"string"==typeof t.cidr,"options.cidr must be a string");const e=t.cidr?t.cidr.toLowerCase():"optional";s(["required","optional","forbidden"].includes(e),"options.cidr must be one of required, optional, forbidden"),s(void 0===t.version||"string"==typeof t.version||Array.isArray(t.version),"options.version must be a string or an array of string");let i=t.version||["ipv4","ipv6","ipvfuture"];Array.isArray(i)||(i=[i]),s(i.length>=1,"options.version must have at least 1 version specified");for(let t=0;t<i.length;++t)s("string"==typeof i[t],"options.version must only contain strings"),i[t]=i[t].toLowerCase(),s(["ipv4","ipv6","ipvfuture"].includes(i[t]),"options.version contains unknown version "+i[t]+" - must be one of ipv4, ipv6, ipvfuture");i=Array.from(new Set(i));const r="(?:".concat(i.map((t=>{if("forbidden"===e)return n.ip[t];const i="\\/".concat("ipv4"===t?n.ip.v4Cidr:n.ip.v6Cidr);return"required"===e?"".concat(n.ip[t]).concat(i):"".concat(n.ip[t],"(?:").concat(i,")?")})).join("|"),")"),o=new RegExp("^".concat(r,"$"));return{cidr:e,versions:i,regex:o,raw:r}}},5752:(t,e,i)=>{const s=i(375),n=i(6064),r={generate:function(){const t={},e="\\dA-Fa-f",i="["+e+"]",s="\\w-\\.~",n="!\\$&'\\(\\)\\*\\+,;=",r="%"+e,o=s+r+n+":@",h="["+o+"]",a="(?:0{0,2}\\d|0?[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])";t.ipv4address="(?:"+a+"\\.){3}"+a;const u=i+"{1,4}",c="(?:"+u+":"+u+"|"+t.ipv4address+")",l="(?:"+u+":){6}"+c,d="::(?:"+u+":){5}"+c,f="(?:"+u+")?::(?:"+u+":){4}"+c,_="(?:(?:"+u+":){0,1}"+u+")?::(?:"+u+":){3}"+c,v="(?:(?:"+u+":){0,2}"+u+")?::(?:"+u+":){2}"+c,m="(?:(?:"+u+":){0,3}"+u+")?::"+u+":"+c,g="(?:(?:"+u+":){0,4}"+u+")?::"+c,p="(?:(?:"+u+":){0,5}"+u+")?::"+u,w="(?:(?:"+u+":){0,6}"+u+")?::";t.ipv4Cidr="(?:\\d|[1-2]\\d|3[0-2])",t.ipv6Cidr="(?:0{0,2}\\d|0?[1-9]\\d|1[01]\\d|12[0-8])",t.ipv6address="(?:"+l+"|"+d+"|"+f+"|"+_+"|"+v+"|"+m+"|"+g+"|"+p+"|"+w+")",t.ipvFuture="v"+i+"+\\.["+s+n+":]+",t.scheme="[a-zA-Z][a-zA-Z\\d+-\\.]*",t.schemeRegex=new RegExp(t.scheme);const y="["+s+r+n+":]*",b="["+s+r+n+"]{1,255}",A="(?:\\[(?:"+t.ipv6address+"|"+t.ipvFuture+")\\]|"+t.ipv4address+"|"+b+")",S="(?:"+y+"@)?"+A+"(?::\\d*)?",T="(?:"+y+"@)?("+A+")(?::\\d*)?",k=h+"*",E=h+"+",x="(?:\\/"+k+")*",R="\\/(?:"+E+x+")?",I=E+x,C="["+s+r+n+"@]+"+x,P="(?:\\/\\/\\/"+k+x+")";return t.hierPart="(?:(?:\\/\\/"+S+x+")|"+R+"|"+I+"|"+P+")",t.hierPartCapture="(?:(?:\\/\\/"+T+x+")|"+R+"|"+I+")",t.relativeRef="(?:(?:\\/\\/"+S+x+")|"+R+"|"+C+"|)",t.relativeRefCapture="(?:(?:\\/\\/"+T+x+")|"+R+"|"+C+"|)",t.query="["+o+"\\/\\?]*(?=#|$)",t.queryWithSquareBrackets="["+o+"\\[\\]\\/\\?]*(?=#|$)",t.fragment="["+o+"\\/\\?]*",t}};r.rfc3986=r.generate(),e.ip={v4Cidr:r.rfc3986.ipv4Cidr,v6Cidr:r.rfc3986.ipv6Cidr,ipv4:r.rfc3986.ipv4address,ipv6:r.rfc3986.ipv6address,ipvfuture:r.rfc3986.ipvFuture},r.createRegex=function(t){const e=r.rfc3986,i="(?:\\?"+(t.allowQuerySquareBrackets?e.queryWithSquareBrackets:e.query)+")?(?:#"+e.fragment+")?",o=t.domain?e.relativeRefCapture:e.relativeRef;if(t.relativeOnly)return r.wrap(o+i);let h="";if(t.scheme){s(t.scheme instanceof RegExp||"string"==typeof t.scheme||Array.isArray(t.scheme),"scheme must be a RegExp, String, or Array");const i=[].concat(t.scheme);s(i.length>=1,"scheme must have at least 1 scheme specified");const r=[];for(let t=0;t<i.length;++t){const o=i[t];s(o instanceof RegExp||"string"==typeof o,"scheme at position "+t+" must be a RegExp or String"),o instanceof RegExp?r.push(o.source.toString()):(s(e.schemeRegex.test(o),"scheme at position "+t+" must be a valid scheme"),r.push(n(o)))}h=r.join("|")}const a="(?:"+(h?"(?:"+h+")":e.scheme)+":"+(t.domain?e.hierPartCapture:e.hierPart)+")",u=t.allowRelative?"(?:"+a+"|"+o+")":a;return r.wrap(u+i,h)},r.wrap=function(t,e){return{raw:t="(?=.)(?!https?:/(?:$|[^/]))(?!https?:///)(?!https?:[^/])".concat(t),regex:new RegExp("^".concat(t,"$")),scheme:e}},r.uriRegex=r.createRegex({}),e.regex=function(t){return void 0===t&&(t={}),t.scheme||t.allowRelative||t.relativeOnly||t.allowQuerySquareBrackets||t.domain?r.createRegex(t):r.uriRegex}},1447:(t,e)=>{const i={operators:["!","^","*","/","%","+","-","<","<=",">",">=","==","!=","&&","||","??"],operatorCharacters:["!","^","*","/","%","+","-","<","=",">","&","|","?"],operatorsOrder:[["^"],["*","/","%"],["+","-"],["<","<=",">",">="],["==","!="],["&&"],["||","??"]],operatorsPrefix:["!","n"],literals:{'"':'"',"`":"`","'":"'","[":"]"},numberRx:/^(?:[0-9]*(\.[0-9]*)?){1}$/,tokenRx:/^[\w\$\#\.\@\:\{\}]+$/,symbol:Po("formula"),settings:Po("settings")};e.Parser=class{z_(t){let s=[],n="",r=0,o=!1;const h=t=>{if(r)throw new g("Formula missing closing parenthesis");const h=s.length?s[s.length-1]:null;if(o||n||t){if(h&&"reference"===h.type&&")"===t)return h.type="function",h.value=this.bv(n,h.value),void(n="");if(")"===t){const t=new e.Parser(n,this.settings);s.push({type:"segment",value:t})}else if(o){if("]"===o)return s.push({type:"reference",value:n}),void(n="");s.push({type:"literal",value:n})}else if(i.operatorCharacters.includes(n))h&&"operator"===h.type&&i.operators.includes(h.value+n)?h.value+=n:s.push({type:"operator",value:n});else if(n.match(i.numberRx))s.push({type:"constant",value:C(n)});else if(void 0!==this.settings.constants[n])s.push({type:"constant",value:this.settings.constants[n]});else{if(!n.match(i.tokenRx))throw new g("Formula contains invalid token: ".concat(n));s.push({type:"reference",value:n})}n=""}};for(const e of t)o?e===o?(h(),o=!1):n+=e:r?"("===e?(n+=e,++r):")"===e?(--r,r?n+=e:h(e)):n+=e:e in i.literals?o=i.literals[e]:"("===e?(h(),++r):i.operatorCharacters.includes(e)?(h(),n=e,h()):" "!==e?n+=e:h();h(),s=s.map(((t,e)=>"operator"!==t.type||"-"!==t.value||e&&"operator"!==s[e-1].type?t:{type:"operator",value:"n"}));let a=!1;for(const t of s){if("operator"===t.type){if(i.operatorsPrefix.includes(t.value))continue;if(!a)throw new g("Formula contains an operator in invalid position");if(!i.operators.includes(t.value))throw new g("Formula contains an unknown operator ".concat(t.value))}else if(a)throw new g("Formula missing expected operator");a=!a}if(!a)throw new g("Formula contains invalid trailing operator");1===s.length&&["reference","literal","constant"].includes(s[0].type)&&(this.single={type:"reference"===s[0].type?"reference":"value",value:s[0].value}),this.Av=s.map((t=>{if("operator"===t.type)return i.operatorsPrefix.includes(t.value)?t:t.value;if("reference"!==t.type)return t.value;if(this.settings.tokenRx&&!this.settings.tokenRx.test(t.value))throw new g("Formula contains invalid reference ".concat(t.value));return this.settings.reference?this.settings.reference(t.value):i.reference(t.value)}))}bv(t,s){const n=this.settings.functions[s];if("function"!=typeof n)throw new g("Formula contains unknown function ".concat(s));let r=[];if(t){let e="",n=0,o=!1;const h=()=>{if(!e)throw new g("Formula contains function ".concat(s," with invalid arguments ").concat(t));r.push(e),e=""};for(let s=0;s<t.length;++s){const r=t[s];o?(e+=r,r===o&&(o=!1)):r in i.literals&&!n?(e+=r,o=i.literals[r]):","!==r||n?(e+=r,"("===r?++n:")"===r&&--n):h()}h()}return r=r.map((t=>new e.Parser(t,this.settings))),function(t){const e=[];for(const i of r)e.push(i.evaluate(t));return n.call(t,...e)}}evaluate(t){const e=this.Av.slice();for(let s=e.length-2;s>=0;--s){const n=e[s];if(n&&"operator"===n.type){const r=e[s+1];e.splice(s+1,1);const o=i.evaluate(r,t);e[s]=i.single(n.value,o)}}return i.operatorsOrder.forEach((s=>{for(let n=1;n<e.length-1;)if(s.includes(e[n])){const s=e[n],r=i.evaluate(e[n-1],t),o=i.evaluate(e[n+1],t);e.splice(n,2);const h=i.calculate(s,r,o);e[n-1]=0===h?0:h}else n+=2})),i.evaluate(e[0],t)}constructor(t,e={}){if(!e[i.settings]&&e.constants)for(const t in e.constants){const i=e.constants[t];if(null!==i&&!["boolean","number","string"].includes(typeof i))throw new g("Formula constant ".concat(t," contains invalid ").concat(typeof i," value type"))}this.settings=e[i.settings]?e:w.assign({[i.settings]:!0,constants:{},functions:{}},e),this.single=null,this.Av=null,this.z_(t)}},e.Parser.prototype[i.symbol]=!0,i.reference=function(t){return function(e){return e&&void 0!==e[t]?e[t]:null}},i.evaluate=function(t,e){return null===t?null:"function"==typeof t?t(e):t[i.symbol]?t.evaluate(e):t},i.single=function(t,e){if("!"===t)return!e;const i=-e;return 0===i?0:i},i.calculate=function(t,e,s){if("??"===t)return i.exists(e)?e:s;if("string"==typeof e||"string"==typeof s){if("+"===t)return(e=i.exists(e)?e:"")+(i.exists(s)?s:"")}else switch(t){case"^":return _.pow(e,s);case"*":return e*s;case"/":return e/s;case"%":return e%s;case"+":return e+s;case"-":return e-s}switch(t){case"<":return e<s;case"<=":return e<=s;case">":return e>s;case">=":return e>=s;case"==":return e===s;case"!=":return e!==s;case"&&":return e&&s;case"||":return e||s}return null},i.exists=function(t){return null!=t}},9926:()=>{},5688:()=>{},9708:()=>{},1152:()=>{},443:()=>{},9848:()=>{},5934:t=>{t.exports=JSON.parse('{"version":"17.13.3"}')}},e={},function i(s){var n=e[s];if(void 0!==n)return n.exports;var r=e[s]={exports:{}};return t[s](r,r.exports,i),r.exports}(5107);var t,e},t.exports=i()}(Us);const Gs=T(Us.exports);let Hs;class Zs extends xt{getRTCPeerConnection(){return this.webRTCPeer?this.webRTCPeer.getRTCPeer():null}stop(){var t;Hs.info("Stopping"),this.webRTCPeer.closeRTCPeer(),null==(t=this.signaling)||t.close(),this.signaling=null,this.stopReconnection=!0,this.webRTCPeer=new rs}isActive(){const t=this.webRTCPeer.getRTCPeerStatus();return Hs.info("Broadcast status: ",t||"not_established"),"connected"===t}setReconnect(){this.signaling.on("migrate",(()=>this.replaceConnection())),this.autoReconnect&&(this.signaling.on(ys,(()=>{(this.firstReconnection||!this.alreadyDisconnected)&&(this.firstReconnection=!1,this.reconnect({error:new g("Signaling error: wsConnectionError")}))})),this.webRTCPeer.on(ss.connectionStateChange,(t=>{q(t),"connected"===t&&z(new Date),("failed"===t||"disconnected"===t&&this.alreadyDisconnected)&&this.firstReconnection?(this.firstReconnection=!1,this.reconnect({error:new g("Connection state change: RTCPeerConnectionState disconnected")})):"disconnected"===t?(this.alreadyDisconnected=!0,u((()=>this.reconnect({error:new g("Connection state change: RTCPeerConnectionState disconnected")})),1500)):this.alreadyDisconnected=!1})))}async reconnect(t){try{Hs.info("Attempting to reconnect..."),!this.isActive()&&!this.stopReconnection&&!this.isReconnecting&&(this.stop(),this.emit("reconnect",{timeout:Xs(this.reconnectionInterval),error:null!=t&&t.error?null==t?void 0:t.error:new g("Attempting to reconnect")}),this.isReconnecting=!0,await this.connect(this.options),this.alreadyDisconnected=!1,this.reconnectionInterval=1e3,this.firstReconnection=!0,this.isReconnecting=!1)}catch(t){this.isReconnecting=!1,this.reconnectionInterval=Xs(this.reconnectionInterval),Hs.error("Reconnection failed, retrying in ".concat(this.reconnectionInterval,"ms. "),t),u((()=>this.reconnect({error:t})),this.reconnectionInterval)}}constructor(t,e,i,s){if(super(),Hs=i,!e)throw Hs.error("Token generator is required to construct this module."),new g("Token generator is required to construct this module.");this.webRTCPeer=new rs,this.signaling=null,this.autoReconnect=s,this.reconnectionInterval=1e3,this.alreadyDisconnected=!1,this.firstReconnection=!0,this.stopReconnection=!1,this.isReconnecting=!1,this.tokenGenerator=e,this.options=null}}const Xs=t=>t<32e3?2*t:t,zs=s.RTCRtpSender&&!!RTCRtpSender.prototype.createEncodedStreams&&s.RTCRtpReceiver&&!!RTCRtpReceiver.prototype.createEncodedStreams,qs="RTCRtpScriptTransform"in s,Ys="KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3ZhciBGPXR5cGVvZiBnbG9iYWxUaGlzPCJ1Ij9nbG9iYWxUaGlzOnR5cGVvZiB3aW5kb3c8InUiP3dpbmRvdzp0eXBlb2YgZ2xvYmFsPCJ1Ij9nbG9iYWw6dHlwZW9mIHNlbGY8InUiP3NlbGY6e307ZnVuY3Rpb24gVyhuKXtyZXR1cm4gbiYmbi5fX2VzTW9kdWxlJiZPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobiwiZGVmYXVsdCIpP24uZGVmYXVsdDpufXZhciBCPXtleHBvcnRzOnt9fTsvKiEKICoganMtbG9nZ2VyIC0gaHR0cDovL2dpdGh1Yi5jb20vam9ubnlyZWV2ZXMvanMtbG9nZ2VyCiAqIEpvbm55IFJlZXZlcywgaHR0cDovL2pvbm55cmVldmVzLmNvLnVrLwogKiBqcy1sb2dnZXIgbWF5IGJlIGZyZWVseSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuCiAqLyhmdW5jdGlvbihuKXsoZnVuY3Rpb24odCl7dmFyIGU9e307ZS5WRVJTSU9OPSIxLjYuMSI7dmFyIHMscj17fSxvPWZ1bmN0aW9uKGksdSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHUuYXBwbHkoaSxhcmd1bWVudHMpfX0sYT1mdW5jdGlvbigpe3ZhciBpPWFyZ3VtZW50cyx1PWlbMF0saCxjO2ZvcihjPTE7YzxpLmxlbmd0aDtjKyspZm9yKGggaW4gaVtjXSkhKGggaW4gdSkmJmlbY10uaGFzT3duUHJvcGVydHkoaCkmJih1W2hdPWlbY11baF0pO3JldHVybiB1fSxkPWZ1bmN0aW9uKGksdSl7cmV0dXJue3ZhbHVlOmksbmFtZTp1fX07ZS5UUkFDRT1kKDEsIlRSQUNFIiksZS5ERUJVRz1kKDIsIkRFQlVHIiksZS5JTkZPPWQoMywiSU5GTyIpLGUuVElNRT1kKDQsIlRJTUUiKSxlLldBUk49ZCg1LCJXQVJOIiksZS5FUlJPUj1kKDgsIkVSUk9SIiksZS5PRkY9ZCg5OSwiT0ZGIik7dmFyIGw9ZnVuY3Rpb24oaSl7dGhpcy5jb250ZXh0PWksdGhpcy5zZXRMZXZlbChpLmZpbHRlckxldmVsKSx0aGlzLmxvZz10aGlzLmluZm99O2wucHJvdG90eXBlPXtzZXRMZXZlbDpmdW5jdGlvbihpKXtpJiYidmFsdWUiaW4gaSYmKHRoaXMuY29udGV4dC5maWx0ZXJMZXZlbD1pKX0sZ2V0TGV2ZWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZXh0LmZpbHRlckxldmVsfSxlbmFibGVkRm9yOmZ1bmN0aW9uKGkpe3ZhciB1PXRoaXMuY29udGV4dC5maWx0ZXJMZXZlbDtyZXR1cm4gaS52YWx1ZT49dS52YWx1ZX0sdHJhY2U6ZnVuY3Rpb24oKXt0aGlzLmludm9rZShlLlRSQUNFLGFyZ3VtZW50cyl9LGRlYnVnOmZ1bmN0aW9uKCl7dGhpcy5pbnZva2UoZS5ERUJVRyxhcmd1bWVudHMpfSxpbmZvOmZ1bmN0aW9uKCl7dGhpcy5pbnZva2UoZS5JTkZPLGFyZ3VtZW50cyl9LHdhcm46ZnVuY3Rpb24oKXt0aGlzLmludm9rZShlLldBUk4sYXJndW1lbnRzKX0sZXJyb3I6ZnVuY3Rpb24oKXt0aGlzLmludm9rZShlLkVSUk9SLGFyZ3VtZW50cyl9LHRpbWU6ZnVuY3Rpb24oaSl7dHlwZW9mIGk9PSJzdHJpbmciJiZpLmxlbmd0aD4wJiZ0aGlzLmludm9rZShlLlRJTUUsW2ksInN0YXJ0Il0pfSx0aW1lRW5kOmZ1bmN0aW9uKGkpe3R5cGVvZiBpPT0ic3RyaW5nIiYmaS5sZW5ndGg+MCYmdGhpcy5pbnZva2UoZS5USU1FLFtpLCJlbmQiXSl9LGludm9rZTpmdW5jdGlvbihpLHUpe3MmJnRoaXMuZW5hYmxlZEZvcihpKSYmcyh1LGEoe2xldmVsOml9LHRoaXMuY29udGV4dCkpfX07dmFyIGY9bmV3IGwoe2ZpbHRlckxldmVsOmUuT0ZGfSk7KGZ1bmN0aW9uKCl7dmFyIGk9ZTtpLmVuYWJsZWRGb3I9byhmLGYuZW5hYmxlZEZvciksaS50cmFjZT1vKGYsZi50cmFjZSksaS5kZWJ1Zz1vKGYsZi5kZWJ1ZyksaS50aW1lPW8oZixmLnRpbWUpLGkudGltZUVuZD1vKGYsZi50aW1lRW5kKSxpLmluZm89byhmLGYuaW5mbyksaS53YXJuPW8oZixmLndhcm4pLGkuZXJyb3I9byhmLGYuZXJyb3IpLGkubG9nPWkuaW5mb30pKCksZS5zZXRIYW5kbGVyPWZ1bmN0aW9uKGkpe3M9aX0sZS5zZXRMZXZlbD1mdW5jdGlvbihpKXtmLnNldExldmVsKGkpO2Zvcih2YXIgdSBpbiByKXIuaGFzT3duUHJvcGVydHkodSkmJnJbdV0uc2V0TGV2ZWwoaSl9LGUuZ2V0TGV2ZWw9ZnVuY3Rpb24oKXtyZXR1cm4gZi5nZXRMZXZlbCgpfSxlLmdldD1mdW5jdGlvbihpKXtyZXR1cm4gcltpXXx8KHJbaV09bmV3IGwoYSh7bmFtZTppfSxmLmNvbnRleHQpKSl9LGUuY3JlYXRlRGVmYXVsdEhhbmRsZXI9ZnVuY3Rpb24oaSl7aT1pfHx7fSxpLmZvcm1hdHRlcj1pLmZvcm1hdHRlcnx8ZnVuY3Rpb24ocCxfKXtfLm5hbWUmJnAudW5zaGlmdCgiWyIrXy5uYW1lKyJdIil9O3ZhciB1PXt9LGg9ZnVuY3Rpb24oYyxwKXtGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHkuY2FsbChjLGNvbnNvbGUscCl9O3JldHVybiB0eXBlb2YgY29uc29sZT4idSI/ZnVuY3Rpb24oKXt9OmZ1bmN0aW9uKGMscCl7Yz1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChjKTt2YXIgXz1jb25zb2xlLmxvZyxnO3AubGV2ZWw9PT1lLlRJTUU/KGc9KHAubmFtZT8iWyIrcC5uYW1lKyJdICI6IiIpK2NbMF0sY1sxXT09PSJzdGFydCI/Y29uc29sZS50aW1lP2NvbnNvbGUudGltZShnKTp1W2ddPW5ldyBEYXRlKCkuZ2V0VGltZSgpOmNvbnNvbGUudGltZUVuZD9jb25zb2xlLnRpbWVFbmQoZyk6aChfLFtnKyI6ICIrKG5ldyBEYXRlKCkuZ2V0VGltZSgpLXVbZ10pKyJtcyJdKSk6KHAubGV2ZWw9PT1lLldBUk4mJmNvbnNvbGUud2Fybj9fPWNvbnNvbGUud2FybjpwLmxldmVsPT09ZS5FUlJPUiYmY29uc29sZS5lcnJvcj9fPWNvbnNvbGUuZXJyb3I6cC5sZXZlbD09PWUuSU5GTyYmY29uc29sZS5pbmZvP189Y29uc29sZS5pbmZvOnAubGV2ZWw9PT1lLkRFQlVHJiZjb25zb2xlLmRlYnVnP189Y29uc29sZS5kZWJ1ZzpwLmxldmVsPT09ZS5UUkFDRSYmY29uc29sZS50cmFjZSYmKF89Y29uc29sZS50cmFjZSksaS5mb3JtYXR0ZXIoYyxwKSxoKF8sYykpfX0sZS51c2VEZWZhdWx0cz1mdW5jdGlvbihpKXtlLnNldExldmVsKGkmJmkuZGVmYXVsdExldmVsfHxlLkRFQlVHKSxlLnNldEhhbmRsZXIoZS5jcmVhdGVEZWZhdWx0SGFuZGxlcihpKSl9LGUuc2V0RGVmYXVsdHM9ZS51c2VEZWZhdWx0cyxuLmV4cG9ydHM/bi5leHBvcnRzPWU6KGUuX3ByZXZMb2dnZXI9dC5Mb2dnZXIsZS5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIHQuTG9nZ2VyPWUuX3ByZXZMb2dnZXIsZX0sdC5Mb2dnZXI9ZSl9KShGKX0pKEIpO3ZhciB6PUIuZXhwb3J0cyxEPVcoeik7Y2xhc3Mgd3tjb25zdHJ1Y3Rvcih0KXt0aGlzLmRhdGE9dCx0aGlzLmJpdE9mZnNldD0wfXJlYWRCaXRzKHQpe2lmKHRoaXMuYml0T2Zmc2V0K3Q+dGhpcy5kYXRhLmxlbmd0aCo4KXRocm93IG5ldyBFcnJvcigiQXR0ZW1wdGVkIHRvIHJlYWQgcGFzdCB0aGUgZW5kIG9mIHRoZSBiaXRzdHJlYW0iKTtsZXQgZT0wO2ZvcihsZXQgcz0wO3M8dDtzKyspe2NvbnN0IHI9TWF0aC5mbG9vcih0aGlzLmJpdE9mZnNldC84KSxvPTctdGhpcy5iaXRPZmZzZXQlOCxhPXRoaXMuZGF0YVtyXT4+byYxO2V8PWE8PHQtMS1zLHRoaXMuYml0T2Zmc2V0Kyt9cmV0dXJuIGV9c2tpcCh0KXt0aGlzLmJpdE9mZnNldCs9dH1yZWFkRXhwR29sb21iVW5zaWduZWQoKXtsZXQgdD0tMTtmb3IobGV0IGU9MDtlPT09MDt0KyspZT10aGlzLnJlYWRCaXRzKDEpO3JldHVybigxPDx0KS0xK3RoaXMucmVhZEJpdHModCl9cmVhZEV4cEdvbG9tYlNpZ25lZCgpe2NvbnN0IHQ9dGhpcy5yZWFkRXhwR29sb21iVW5zaWduZWQoKTtyZXR1cm4gdCUyPT09MD8tKHQvMik6KHQrMSkvMn19Y29uc3QgbT17U0xJQ0VfTk9OX0lEUjoxLFNMSUNFX1BBUlRJVElPTl9BOjIsU0xJQ0VfSURSOjUsU0VJX0gyNjQ6NixTRUlfSDI2NV9QUkVGSVg6MzksU0VJX0gyNjVfU1VGRklYOjQwLFNQU19IMjY0OjcsU1BTX0gyNjU6MzMsUFBTX0gyNjQ6OCxQUFNfSDI2NTozNH0sUj17UElDX1RJTUlORzoxLFVTRVJfREFUQV9VTlJFR0lTVEVSRUQ6NX0sRT17TEVHQUNZOjEsTkVXOjIsVElNRUNPREU6MyxPVEhFUjo0fSxqPSI2ZTljZmQyYS01OTA3LTQ5ZmYtYjM2My04OTc4YTZlODM0MGUiLHE9IjlhMjFmM2JlLTMxZjAtNGI3OC1iMGJlLWM3ZjdkYmI5NzI1MCIsTD0iZDQwZTM4ZWEtZDQxOS00YzYyLTk0ZWQtMjBhYzM3YjRlNGZhIjtjbGFzcyBWe2NvbnN0cnVjdG9yKHQ9IkgyNjQiKXt0aGlzLnNwcz1uZXcgTWFwLHRoaXMucHBzPW5ldyBNYXAsdGhpcy5hY3RpdmVTUFM9bnVsbCx0aGlzLmNvZGVjPXR9Y29sbGVjdFBQUyh0KXt0aGlzLmNvZGVjPT09IkgyNjQiP3RoaXMuY29sbGVjdEgyNjRQUFModCk6dGhpcy5jb2xsZWN0SDI2NVBQUyh0KX1jb2xsZWN0U1BTKHQpe3RoaXMuY29kZWM9PT0iSDI2NCI/dGhpcy5jb2xsZWN0SDI2NFNQUyh0KTp0aGlzLmNvbGxlY3RIMjY1U1BTKHQpfWNvbGxlY3RIMjY0U1BTKHQpe2NvbnN0IGU9bmV3IHcodCkscz1lLnJlYWRCaXRzKDgpLHI9WzEwMCwxMTAsMTIyLDI0NCw0NCw4Myw4NiwxMTgsMTI4LDEzOCwxMzksMTM0LDEzNV07ZS5za2lwKDgpLGUuc2tpcCg4KTtjb25zdCBvPWUucmVhZEV4cEdvbG9tYlVuc2lnbmVkKCk7aWYobz4zMXx8bzwwKXRocm93IG5ldyBFcnJvcigiSW52YWxpZCBzZXFfcGFyYW1ldGVyX3NldF9pZCIpO2lmKHIuaW5jbHVkZXMocykpe2NvbnN0IGw9ZS5yZWFkRXhwR29sb21iVW5zaWduZWQoKTtpZihsPT09MyYmZS5za2lwKDEpLGUucmVhZEV4cEdvbG9tYlVuc2lnbmVkKCksZS5yZWFkRXhwR29sb21iVW5zaWduZWQoKSxlLnNraXAoMSksZS5yZWFkQml0cygxKSl7Y29uc3QgaT1sIT09Mz84OjEyO2ZvcihsZXQgdT0wO3U8aTt1KyspaWYoZS5yZWFkQml0cygxKSl7Y29uc3QgaD11PDY/MTY6NjQ7bGV0IGM9OCxwPTg7Zm9yKGxldCBfPTA7XzxoO18rKyl7aWYocCE9PTApe2NvbnN0IGc9ZS5yZWFkRXhwR29sb21iU2lnbmVkKCk7cD0oYytnKzI1NiklMjU2fWM9cD09PTA/YzpwfX19fWUucmVhZEV4cEdvbG9tYlVuc2lnbmVkKCk7Y29uc3QgYT1lLnJlYWRFeHBHb2xvbWJVbnNpZ25lZCgpO2lmKGE9PT0wKWUucmVhZEV4cEdvbG9tYlVuc2lnbmVkKCk7ZWxzZSBpZihhPT09MSl7ZS5za2lwKDEpLGUucmVhZEV4cEdvbG9tYlNpZ25lZCgpLGUucmVhZEV4cEdvbG9tYlNpZ25lZCgpO2NvbnN0IGw9ZS5yZWFkRXhwR29sb21iVW5zaWduZWQoKTtmb3IobGV0IGY9MDtmPGw7ZisrKWUucmVhZEV4cEdvbG9tYlNpZ25lZCgpfWUucmVhZEV4cEdvbG9tYlVuc2lnbmVkKCksZS5za2lwKDEpLGUucmVhZEV4cEdvbG9tYlVuc2lnbmVkKCksZS5yZWFkRXhwR29sb21iVW5zaWduZWQoKSxlLnJlYWRCaXRzKDEpPT09MCYmZS5za2lwKDEpLGUuc2tpcCgxKSxlLnJlYWRCaXRzKDEpJiYoZS5yZWFkRXhwR29sb21iVW5zaWduZWQoKSxlLnJlYWRFeHBHb2xvbWJVbnNpZ25lZCgpLGUucmVhZEV4cEdvbG9tYlVuc2lnbmVkKCksZS5yZWFkRXhwR29sb21iVW5zaWduZWQoKSk7bGV0IGQ7aWYoZS5yZWFkQml0cygxKSl7bGV0IGY9ZnVuY3Rpb24oYyl7Y29uc3QgcD1jLnJlYWRFeHBHb2xvbWJVbnNpZ25lZCgpO2Muc2tpcCg0KSxjLnNraXAoNCk7Zm9yKGxldCB4PTA7eDw9cDt4KyspYy5yZWFkRXhwR29sb21iVW5zaWduZWQoKSxjLnJlYWRFeHBHb2xvbWJVbnNpZ25lZCgpLGMuc2tpcCgxKTtjLnNraXAoNSk7Y29uc3QgXz1jLnJlYWRCaXRzKDUpLGc9Yy5yZWFkQml0cyg1KSxBPWMucmVhZEJpdHMoNSk7cmV0dXJue2NwYl9yZW1vdmFsX2RlbGF5X2xlbmd0aF9taW51czE6XyxkcGJfb3V0cHV0X2RlbGF5X2xlbmd0aF9taW51czE6Zyx0aW1lX29mZnNldF9sZW5ndGg6QX19O2UucmVhZEJpdHMoMSkmJmUucmVhZEJpdHMoOCk9PT0yNTUmJihlLnNraXAoMTYpLGUuc2tpcCgxNikpLGUucmVhZEJpdHMoMSkmJmUuc2tpcCgxKSxlLnJlYWRCaXRzKDEpJiYoZS5za2lwKDMpLGUuc2tpcCgxKSxlLnJlYWRCaXRzKDEpJiZlLnNraXAoMjQpKSxlLnJlYWRCaXRzKDEpJiYoZS5yZWFkRXhwR29sb21iVW5zaWduZWQoKSxlLnJlYWRFeHBHb2xvbWJVbnNpZ25lZCgpKTtjb25zdCBsPWUucmVhZEJpdHMoMSk/e251bV91bml0c19pbl90aWNrOmUucmVhZEJpdHMoMzIpLHRpbWVfc2NhbGU6ZS5yZWFkQml0cygzMiksZml4ZWRfZnJhbWVfcmF0ZV9mbGFnOmUucmVhZEJpdHMoMSl9OnZvaWQgMCxpPWUucmVhZEJpdHMoMSk/ZihlKTp2b2lkIDAsdT1lLnJlYWRCaXRzKDEpP2YoZSk6dm9pZCAwOyhpfHx1KSYmZS5za2lwKDEpO2NvbnN0IGg9ZS5yZWFkQml0cygxKTtkPXt0aW1pbmdfaW5mbzpsLG5hbF9ocmRfcGFyYW1ldGVyczppLHZjbF9ocmRfcGFyYW1ldGVyczp1LHBpY19zdHJ1Y3RfcHJlc2VudF9mbGFnOmh9fXRoaXMuc3BzLnNldChvLHt2dWlfcGFyYW1ldGVyczpkfSl9Y29sbGVjdEgyNjVTUFModCl7fWNvbGxlY3RIMjY0UFBTKHQpe2NvbnN0IGU9bmV3IHcodCkscz1lLnJlYWRFeHBHb2xvbWJVbnNpZ25lZCgpO2lmKHM+MjU1fHxzPDApdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIHBpY19wYXJhbWV0ZXJfc2V0X2lkIik7Y29uc3Qgcj1lLnJlYWRFeHBHb2xvbWJVbnNpZ25lZCgpO3RoaXMucHBzLnNldChzLHtzZXFfcGFyYW1ldGVyX3NldF9pZDpyfSl9Y29sbGVjdEgyNjVQUFModCl7fWZpbmRBY3RpdmVTUFModCl7Y29uc3QgZT1uZXcgdyh0KTtlLnJlYWRFeHBHb2xvbWJVbnNpZ25lZCgpLGUucmVhZEV4cEdvbG9tYlVuc2lnbmVkKCk7Y29uc3Qgcz1lLnJlYWRFeHBHb2xvbWJVbnNpZ25lZCgpLHI9dGhpcy5wcHMuZ2V0KHMpO2lmKHIpe2NvbnN0IG89dGhpcy5zcHMuZ2V0KHIuc2VxX3BhcmFtZXRlcl9zZXRfaWQpO2lmKG8pe3RoaXMuYWN0aXZlU1BTPW87cmV0dXJufX10aHJvdyBuZXcgRXJyb3IoIkNhbm5vdCBmaW5kIHRoZSBhY3RpdmUgU1BTIil9fWNvbnN0IFM9bmV3IFY7ZnVuY3Rpb24gRyhuLHQpe2Zvcig7dDxuLmJ5dGVMZW5ndGgtNDspe2lmKG5bdF09PT0wJiZuW3QrMV09PT0wJiYoblt0KzJdPT09MXx8blt0KzJdPT09MCYmblt0KzNdPT09MSkpcmV0dXJuIHQ7dCs9MX1yZXR1cm4tMX1mdW5jdGlvbiBVKG4pe2NvbnN0IHQ9bmV3IFVpbnQ4QXJyYXkobi5ieXRlTGVuZ3RoKTtsZXQgZT0wLHM9MDtmb3IobGV0IHI9MjtyPG4uYnl0ZUxlbmd0aDtyKyspbltyXT09PTMmJm5bci0xXT09PTAmJm5bci0yXT09PTAmJih0LnNldChuLnN1YmFycmF5KHMsciksZSksZSs9ci1zLHM9cisxKTtyZXR1cm4gczxuLmJ5dGVMZW5ndGgmJnQuc2V0KG4uc3ViYXJyYXkocyksZSksdH1mdW5jdGlvbiBZKG4sdCl7bGV0IGU9MDtjb25zdCBzPXQ9PT0iSDI2NCI/MToyLHI9W107Zm9yKDtlPG4uYnl0ZUxlbmd0aC00Oyl7Y29uc3Qgbz1HKG4sZSk7aWYobz49ZSl7Y29uc3QgYT1uW28rMl09PT0xPzM6NCxkPUcobixvK2Ercyk7aWYoZD5vKXIucHVzaChuLnN1YmFycmF5KG8sZCkpLGU9ZDtlbHNle3IucHVzaChuLnN1YmFycmF5KG8pKTticmVha319ZWxzZSBicmVha31yZXR1cm4gcn1mdW5jdGlvbiBYKG4sdCl7bGV0IGU9ITA7cmV0dXJuIFkobix0KS5maWx0ZXIocz0+e2NvbnN0IHI9c1syXT09PTE/Mzo0LG89dD09PSJIMjY0Ij8xOjIsYT1zW3JdLGQ9dD09PSJIMjY0Ij9hJjMxOmE+PjEmNjM7aWYoZSlzd2l0Y2goZCl7Y2FzZSBtLlBQU19IMjY0OmNhc2UgbS5QUFNfSDI2NTpTLmNvbGxlY3RQUFMoVShzLnN1YmFycmF5KHIrbykpKTticmVhaztjYXNlIG0uU1BTX0gyNjQ6Y2FzZSBtLlNQU19IMjY1OlMuY29sbGVjdFNQUyhVKHMuc3ViYXJyYXkocitvKSkpO2JyZWFrO2Nhc2UgbS5TTElDRV9JRFI6Y2FzZSBtLlNMSUNFX05PTl9JRFI6Y2FzZSBtLlNMSUNFX1BBUlRJVElPTl9BOnRyeXtTLmZpbmRBY3RpdmVTUFMoVShzLnN1YmFycmF5KHIrbykpKSxlPSExfWNhdGNoKGwpe2NvbnNvbGUuaW5mbygiRmFpbGVkIHRvIGZpbmQgYWN0aXZlIFNQUy4gV2lsbCBub3QgYmUgYWJsZSB0byBleHRyYWN0IFBJQyB0aW1pbmcgbWV0YWRhdGEiKX1icmVha31yZXR1cm5bbS5TRUlfSDI2NCxtLlNFSV9IMjY1X1BSRUZJWCxtLlNFSV9IMjY1X1NVRkZJWF0uaW5jbHVkZXMoZCl9KX1mdW5jdGlvbiAkKG4pe2xldCB0PTAsZT0wO2Zvcig7bltlXT09PTI1NTspdCs9MjU1LGUrKzt0Kz1uW2VdLGUrKztsZXQgcz0wO2Zvcig7bltlXT09PTI1NTspcys9MjU1LGUrKztyZXR1cm4gcys9bltlXSxlKysse3R5cGU6dCxjb250ZW50Om4uc3ViYXJyYXkoZSxlK3MpfX1mdW5jdGlvbiBKKG4pe2NvbnN0IHQ9bmV3IFVpbnQ4QXJyYXkoVChxKSksZT1uZXcgVWludDhBcnJheShUKGopKSxzPW5ldyBVaW50OEFycmF5KFQoTCkpO3JldHVybiB0LmV2ZXJ5KChyLG8pPT5yPT09bltvXSk/RS5USU1FQ09ERTplLmV2ZXJ5KChyLG8pPT5yPT09bltvXSk/RS5MRUdBQ1k6cy5ldmVyeSgocixvKT0+cj09PW5bb10pP0UuTkVXOkUuT1RIRVJ9ZnVuY3Rpb24gSyhuLHQpe2xldCBlPTA7bi51dWlkPXQuc3ViYXJyYXkoZSxlKzE2KSxlKz0xNjtjb25zdCBzPUoobi51dWlkKSxyPXQuc3ViYXJyYXkoZSk7c3dpdGNoKHMpe2Nhc2UgRS5MRUdBQ1k6Y2FzZSBFLk9USEVSOm4udW5yZWdpc3RlcmVkPXI7YnJlYWs7Y2FzZSBFLlRJTUVDT0RFOm4udGltZWNvZGU9TyhyKTticmVhaztjYXNlIEUuTkVXOntsZXQgbz0wO2NvbnN0IGE9QyhEYXRlLm5vdygpKS5sZW5ndGgsZD1yLnN1YmFycmF5KG8sYSk7bys9YTtjb25zdCBsPXIuc3ViYXJyYXkobyk7bi50aW1lY29kZT1PKGQpLG4udW5yZWdpc3RlcmVkPWw7YnJlYWt9fX1mdW5jdGlvbiBPKG4pe2NvbnN0IHQ9bi5yZWR1Y2UoKG8sYSk9PihvPDxCaWdJbnQoOCkpK0JpZ0ludChhKSxCaWdJbnQoMCkpLGU9TnVtYmVyKHQpLHM9bmV3IERhdGUoZSk7cmV0dXJuIG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShzLnRvSVNPU3RyaW5nKCkpfWZ1bmN0aW9uIFoobix0KXt2YXIgZixpLHUsaCxjO2lmKCFTLmFjdGl2ZVNQUyl7Y29uc29sZS53YXJuKCJDYW5ub3QgZmluZCB0aGUgYWN0aXZlIFNQUyIpO3JldHVybn1jb25zdCBlPShmPVMuYWN0aXZlU1BTLnZ1aV9wYXJhbWV0ZXJzLm5hbF9ocmRfcGFyYW1ldGVycykhPW51bGw/ZjpTLmFjdGl2ZVNQUy52dWlfcGFyYW1ldGVycy52Y2xfaHJkX3BhcmFtZXRlcnMscz17Y3BiX2RwYl9kZWxheXNfcHJlc2VudF9mbGFnOmU/MTowLGNwYl9yZW1vdmFsX2RlbGF5X2xlbmd0aF9taW51czE6KGk9ZT09bnVsbD92b2lkIDA6ZS5jcGJfcmVtb3ZhbF9kZWxheV9sZW5ndGhfbWludXMxKSE9bnVsbD9pOjIzLGRwYl9vdXRwdXRfZGVsYXlfbGVuZ3RoX21pbnVzMToodT1lPT1udWxsP3ZvaWQgMDplLmRwYl9vdXRwdXRfZGVsYXlfbGVuZ3RoX21pbnVzMSkhPW51bGw/dToyMyx0aW1lX29mZnNldF9sZW5ndGg6ZT8oaD1lLnRpbWVfb2Zmc2V0X2xlbmd0aCkhPW51bGw/aDoyNDp2b2lkIDAscGljX3N0cnVjdF9wcmVzZW50X2ZsYWc6KGM9Uy5hY3RpdmVTUFMudnVpX3BhcmFtZXRlcnMucGljX3N0cnVjdF9wcmVzZW50X2ZsYWcpIT1udWxsP2M6MH07aWYoIXMucGljX3N0cnVjdF9wcmVzZW50X2ZsYWcpe2NvbnNvbGUud2FybigicGljX3N0cnVjdF9wcmVzZW50X2ZsYWcgaXMgbm90IHByZXNlbnQiKTtyZXR1cm59Y29uc3Qgcj1uZXcgdyh0KTtzLmNwYl9kcGJfZGVsYXlzX3ByZXNlbnRfZmxhZyYmKHIuc2tpcChzLmNwYl9yZW1vdmFsX2RlbGF5X2xlbmd0aF9taW51czErMSksci5za2lwKHMuZHBiX291dHB1dF9kZWxheV9sZW5ndGhfbWludXMxKzEpKTtjb25zdCBvPVsxLDEsMSwyLDIsMywzLDIsM10sYT1yLnJlYWRCaXRzKDQpO2lmKGE+PW8ubGVuZ3RoKXRocm93IG5ldyBFcnJvcigiSW52YWxpZCBwaWNfc3RydWN0Iik7Y29uc3QgZD1vW2FdLGw9W107Zm9yKGxldCBwPTA7cDxkO3ArKylpZihyLnJlYWRCaXRzKDEpKXtjb25zdCBnPXt9O3Iuc2tpcCgyKSxyLnNraXAoMSksci5za2lwKDUpO2NvbnN0IEE9ci5yZWFkQml0cygxKTtpZihyLnNraXAoMiksZy5uX2ZyYW1lcz1yLnJlYWRCaXRzKDgpLEE/KGcuc2Vjb25kc192YWx1ZT1yLnJlYWRCaXRzKDYpLGcubWludXRlc192YWx1ZT1yLnJlYWRCaXRzKDYpLGcuaG91cnNfdmFsdWU9ci5yZWFkQml0cyg1KSk6ci5yZWFkQml0cygxKSYmKGcuc2Vjb25kc192YWx1ZT1yLnJlYWRCaXRzKDYpLHIucmVhZEJpdHMoMSkmJihnLm1pbnV0ZXNfdmFsdWU9ci5yZWFkQml0cyg2KSxyLnJlYWRCaXRzKDEpJiYoZy5ob3Vyc192YWx1ZT1yLnJlYWRCaXRzKDUpKSkpLHMudGltZV9vZmZzZXRfbGVuZ3RoKXRyeXtnLnRpbWVfb2Zmc2V0PXIucmVhZEJpdHMocy50aW1lX29mZnNldF9sZW5ndGgpfWNhdGNoKHgpe2NvbnNvbGUuZXJyb3IoIkZhaWxlZCB0byByZWFkIHRpbWVfb2Zmc2V0Iix4KSxnLnRpbWVfb2Zmc2V0PTB9ZWxzZSBnLnRpbWVfb2Zmc2V0PTA7bC5wdXNoKGcpfW4uc2VpUGljVGltaW5nVGltZUNvZGVBcnJheT1sfWZ1bmN0aW9uIFEobix0KXtpZih0IT09IkgyNjQiJiZ0IT09IkgyNjUiKXRocm93IG5ldyBFcnJvcigiVW5zdXBwb3J0ZWQgY29kZWMgIi5jb25jYXQodCkpO2NvbnN0IGU9e307cmV0dXJuIFMuY29kZWM9dCxYKG5ldyBVaW50OEFycmF5KG4uZGF0YSksdCkuZm9yRWFjaChzPT57Y29uc3Qgcj1zWzJdPT09MT8zOjQsbz10PT09IkgyNjQiPzE6MixhPVUocy5zdWJhcnJheShyK28pKSxkPSQoYSk7c3dpdGNoKGQudHlwZSl7Y2FzZSBSLlBJQ19USU1JTkc6WihlLGQuY29udGVudCk7YnJlYWs7Y2FzZSBSLlVTRVJfREFUQV9VTlJFR0lTVEVSRUQ6SyhlLGQuY29udGVudCk7YnJlYWt9fSksZX1mdW5jdGlvbiBlZShuKXtyZXR1cm4vXlswLTlhLWZBLUZdezh9LVswLTlhLWZBLUZdezR9LVswLTlhLWZBLUZdezR9LVswLTlhLWZBLUZdezR9LVswLTlhLWZBLUZdezEyfSQvLnRlc3Qobil9ZnVuY3Rpb24gVChuKXtyZXR1cm4gbi5yZXBsYWNlKC8tL2csIiIpLm1hdGNoKC8uezEsMn0vZykubWFwKHQ9PnBhcnNlSW50KHQsMTYpKX1mdW5jdGlvbiB0ZShuLHQsZSl7Y29uc3Qgcz1uZXcgVWludDhBcnJheShUKG4pKSxyPUMoZSksbz1uZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUoSlNPTi5zdHJpbmdpZnkodCkpLGE9bmV3IFVpbnQ4QXJyYXkocy5sZW5ndGgrci5sZW5ndGgrby5sZW5ndGgpO3JldHVybiBhLnNldChzKSxhLnNldChyLHMubGVuZ3RoKSxhLnNldChvLHIubGVuZ3RoK3MubGVuZ3RoKSxhfWZ1bmN0aW9uIG5lKG4pe2NvbnN0IHQ9W10sZT1NYXRoLmZsb29yKG4uYnl0ZUxlbmd0aC8yNTUpLHM9bi5ieXRlTGVuZ3RoJTI1NTtmb3IobGV0IHI9MDtyPGU7cisrKXQucHVzaCgyNTUpO3JldHVybiB0LnB1c2gocyksbmV3IFVpbnQ4QXJyYXkoWzUsLi4udF0pfWZ1bmN0aW9uIHJlKG4pe2NvbnN0IHQ9W107Zm9yKGxldCBlPTA7ZTxuLmJ5dGVMZW5ndGg7ZSsrKWUrMjxuLmJ5dGVMZW5ndGgmJlswLDEsMiwzXS5pbmNsdWRlcyhuW2UrMl0pJiZuW2VdPT09MCYmbltlKzFdPT09MD8odC5wdXNoKG5bZV0pLHQucHVzaChuW2UrMV0pLGUrPTIsdC5wdXNoKDMpKTp0LnB1c2gobltlXSk7cmV0dXJuIHQucHVzaCgxMjgpLG5ldyBVaW50OEFycmF5KHQpfWZ1bmN0aW9uIEMobil7Y29uc3QgdD1bXTtpZighaXNOYU4obikpe2NvbnN0IGU9QmlnSW50KG4pO2ZvcihsZXQgcz0wO3M8TWF0aC5jZWlsKE1hdGguZmxvb3IoTWF0aC5sb2cyKG5ldyBOdW1iZXIobikpKzEpLzgpO3MrKyl0LnVuc2hpZnQobmV3IE51bWJlcihlPj5CaWdJbnQoOCpzKSZCaWdJbnQoMjU1KSkpfXJldHVybiBuZXcgVWludDhBcnJheSh0KX1mdW5jdGlvbiBzZSh7dXVpZDpuLHBheWxvYWQ6dCx0aW1lY29kZTplfSl7Y29uc3Qgcz1bMCwwLDAsMV0scj1bMTAyXSxvPXRlKG4sdCxlKSxhPW5lKG8pLGQ9cmUobyksbD1uZXcgVWludDhBcnJheShzLmxlbmd0aCtyLmxlbmd0aCthLmxlbmd0aCtkLmxlbmd0aCk7cmV0dXJuIGwuc2V0KHMpLGwuc2V0KHIscy5sZW5ndGgpLGwuc2V0KGEscy5sZW5ndGgrci5sZW5ndGgpLGwuc2V0KGQscy5sZW5ndGgrci5sZW5ndGgrYS5sZW5ndGgpLGx9ZnVuY3Rpb24gaWUoe3V1aWQ6bixwYXlsb2FkOnQsdGltZWNvZGU6ZX0scyl7aWYobj09PSIifHx0PT09IiIpdGhyb3cgbmV3IEVycm9yKCJ1dWlkIGFuZCBwYXlsb2FkIGNhbm5vdCBiZSBlbXB0eSIpO2VlKG4pfHwoY29uc29sZS53YXJuKCJJbnZhbGlkIFVVSUQuIFVzaW5nIGRlZmF1bHQgVVVJRC4iKSxuPUwsZT1EYXRlLm5vdygpKTtjb25zdCByPXNlKHt1dWlkOm4scGF5bG9hZDp0LHRpbWVjb2RlOmV9KSxvPW5ldyBEYXRhVmlldyhzLmRhdGEpLGE9bmV3IEFycmF5QnVmZmVyKHMuZGF0YS5ieXRlTGVuZ3RoK3IuYnl0ZUxlbmd0aCksZD1uZXcgRGF0YVZpZXcoYSk7Zm9yKGxldCBsPTA7bDxzLmRhdGEuYnl0ZUxlbmd0aDtsKyspZC5zZXRVaW50OChsLG8uZ2V0VWludDgobCkpO2ZvcihsZXQgbD0wO2w8ci5ieXRlTGVuZ3RoO2wrKylkLnNldFVpbnQ4KHMuZGF0YS5ieXRlTGVuZ3RoK2wscltsXSk7cy5kYXRhPWF9RC5nZXQoIlRyYW5zZm9ybVdvcmtlciIpLnNldExldmVsKEQuREVCVUcpO2NvbnN0IG9lPTJlMyxiPVtdO2xldCB5PSIiLFA9e307Y29uc3Qgdj17fTtsZXQgST1bXTtmdW5jdGlvbiBIKG4pe3JldHVybiBuZXcgVHJhbnNmb3JtU3RyZWFtKHtzdGFydCgpe30sZmx1c2goKXt9LGFzeW5jIHRyYW5zZm9ybSh0LGUpe3ZhciBzLHI7aWYodCBpbnN0YW5jZW9mIFJUQ0VuY29kZWRWaWRlb0ZyYW1lKXtjb25zdCBvPSgocz1QW3QuZ2V0TWV0YWRhdGEoKS5wYXlsb2FkVHlwZV0pPT1udWxsP3ZvaWQgMDpzLnRvVXBwZXJDYXNlKCkpfHwoeT09bnVsbD92b2lkIDA6eS50b1VwcGVyQ2FzZSgpKTtpZihvPT09IkgyNjQiKXtjb25zdCBhPVEodCxvKTsoYS50aW1lY29kZXx8YS51bnJlZ2lzdGVyZWR8fCgocj1hLnNlaVBpY1RpbWluZ1RpbWVDb2RlQXJyYXkpPT1udWxsP3ZvaWQgMDpyLmxlbmd0aCk+MCkmJnNlbGYucG9zdE1lc3NhZ2Uoe2V2ZW50OiJtZXRhZGF0YSIsbWlkOm4sbWV0YWRhdGE6YX0pfXNlbGYucG9zdE1lc3NhZ2Uoe2V2ZW50OiJjb21wbGV0ZSIsZnJhbWU6e3R5cGU6dC50eXBlLHRpbWVzdGFtcDp0LnRpbWVzdGFtcCxkYXRhOnQuZGF0YX19KX1lLmVucXVldWUodCl9fSl9ZnVuY3Rpb24gTSgpe09iamVjdC5rZXlzKHYpLnNvcnQoKS5qb2luKCk9PT1JLnNvcnQoKS5qb2luKCkmJihiLnNoaWZ0KCksST1bXSl9ZnVuY3Rpb24gYWUobil7Y29uc3QgdD1uZXcgRGF0ZSgpLmdldFRpbWUoKTt2W25dPXQsT2JqZWN0LmtleXModikuZmlsdGVyKHM9PnQtdltzXT5vZSkuZm9yRWFjaChzPT57ZGVsZXRlIHZbc10sZGVsZXRlIElbc119KSxNKCl9ZnVuY3Rpb24gTigpe3JldHVybiBuZXcgVHJhbnNmb3JtU3RyZWFtKHtzdGFydCgpe30sZmx1c2goKXt9LGFzeW5jIHRyYW5zZm9ybShuLHQpe2lmKG4gaW5zdGFuY2VvZiBSVENFbmNvZGVkVmlkZW9GcmFtZSl7Y29uc3Qgcz1uLmdldE1ldGFkYXRhKCkuc3luY2hyb25pemF0aW9uU291cmNlO2lmKGFlKHMpLCFJLmluY2x1ZGVzKHMpJiZiLmxlbmd0aCl0cnl7aWYoIS8oaDI2WzRdKS8udGVzdCh5KSl0aHJvdyBuZXcgRXJyb3IoIlNlbmRpbmcgbWV0YWRhdGEgaXMgbm90IHN1cHBvcnRlZCB3aXRoIGFueSBvdGhlciBjb2RlYyBvdGhlciB0aGFuIEguMjY0Iik7YlswXS51dWlkPT09TCYmKGJbMF0udGltZWNvZGU9RGF0ZS5ub3coKSksaWUoYlswXSxuKSxJLnB1c2gocyl9Y2F0Y2gocil7Y29uc29sZS5lcnJvcihyKX1maW5hbGx5e00oKX19dC5lbnF1ZXVlKG4pfX0pfWZ1bmN0aW9uIGsoe3JlYWRhYmxlOm4sd3JpdGFibGU6dH0sZSl7bi5waXBlVGhyb3VnaChlKS5waXBlVG8odCl9YWRkRXZlbnRMaXN0ZW5lcigicnRjdHJhbnNmb3JtIixuPT57bGV0IHQ7aWYobi50cmFuc2Zvcm1lci5vcHRpb25zLm5hbWU9PT0ic2VuZGVyVHJhbnNmb3JtIil5PW4udHJhbnNmb3JtZXIub3B0aW9ucy5jb2RlYyx0PU4oKTtlbHNlIGlmKG4udHJhbnNmb3JtZXIub3B0aW9ucy5uYW1lPT09InJlY2VpdmVyVHJhbnNmb3JtIilQPW4udHJhbnNmb3JtZXIub3B0aW9ucy5wYXlsb2FkVHlwZUNvZGVjfHx7fSx5PW4udHJhbnNmb3JtZXIub3B0aW9ucy5jb2RlY3x8IiIsdD1IKG4udHJhbnNmb3JtZXIub3B0aW9ucy5taWQpO2Vsc2UgcmV0dXJuO2sobi50cmFuc2Zvcm1lcix0KX0pLGFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLG49Pntjb25zdHthY3Rpb246dH09bi5kYXRhO3N3aXRjaCh0KXtjYXNlImluc2VydGFibGUtc3RyZWFtcy1zZW5kZXIiOnk9bi5kYXRhLmNvZGVjLGsobi5kYXRhLE4oKSk7YnJlYWs7Y2FzZSJpbnNlcnRhYmxlLXN0cmVhbXMtcmVjZWl2ZXIiOlA9bi5kYXRhLnBheWxvYWRUeXBlQ29kZWN8fHt9LHk9bi5kYXRhLmNvZGVjfHwiIixrKG4uZGF0YSxIKG4uZGF0YS5taWQpKTticmVhaztjYXNlIm1ldGFkYXRhLXNlaS11c2VyLWRhdGEtdW5yZWdpc3RlcmVkIjpiLnB1c2goe3V1aWQ6bi5kYXRhLnV1aWQscGF5bG9hZDpuLmRhdGEucGF5bG9hZH0pO2JyZWFrfX0pfSkoKTsK",Ks=typeof self<"u"&&self.Blob&&new Blob([(t=>j.from(atob(t),(t=>t.charCodeAt(0))))(Ys)],{type:"text/javascript;charset=utf-8"});function js(t){let e;try{if(e=Ks&&(self.URL||self.webkitURL).createObjectURL(Ks),!e)throw"";const i=new Bl(e,{name:null==t?void 0:t.name});return i.addEventListener("error",(()=>{(self.URL||self.webkitURL).revokeObjectURL(e)})),i}catch(e){return new Bl("data:text/javascript;base64,"+Ys,{name:null==t?void 0:t.name})}finally{e&&(self.URL||self.webkitURL).revokeObjectURL(e)}}const Qs=at.get("Publish"),Js={mediaStream:null,bandwidth:0,metadata:!1,disableVideo:!1,disableAudio:!1,codec:Ji.H264,simulcast:!1,scalabilityMode:null,peerConfig:{autoInitStats:!0,statsIntervalMs:1e3}};function $s(t){if(!t)return new j;const e=t.length,i=new j(e/2);for(let s=0;s<e;s+=2)i[s/2]=x(t.substr(s,2),16);return i}function tn(t,e,i){if(w.prototype.hasOwnProperty.call(t,i)&&w.prototype.hasOwnProperty.call(e,i)){const s=t[i];t[i]=e[i],e[i]=s}else console.error('One or both objects do not have the property "'.concat(i,'"'))}function en(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))}const sn=nn;function nn(t,e){const i=_n();return(nn=function(t,e){return i[t-=257]})(t,e)}var rn;!function(){const t=nn,e=_n();for(;;)try{if(x(t(266))/1*(-x(t(261))/2)+x(t(258))/3*(-x(t(264))/4)+-x(t(267))/5*(x(t(274))/6)+x(t(260))/7*(x(t(268))/8)+x(t(270))/9+-x(t(277))/10+x(t(263))/11==303379)break;e.push(e.shift())}catch(t){e.push(e.shift())}}();const on=Ll&&Ll[sn(276)]||"",hn=Ll&&Ll.vendor||"",an=!(null==s||!s[sn(273)]),un=on[sn(278)](sn(257)),cn=!un&&hn[sn(278)](sn(259)),ln=!un&&!cn&&on.includes(sn(272)),dn=!un&&!cn&&!ln&&on[sn(278)](sn(275)),fn=(null===(rn=null==Ll?void 0:Ll[sn(262)])||void 0===rn?void 0:rn[sn(271)])||(null==Ll?void 0:Ll[sn(271)])||"";function _n(){const t=["2403660vsbxKa","includes","Firefox","653511krAkNS","Apple","63eEorAu","2iQvmqu","userAgentData","13393182jRLBxS","4fTXBZP","Win32","74923SyWRbn","1345hVdNEb","21688LwGppn","Windows","132498ZoOcLo","platform","Edg","RTCRtpScriptTransform","9372dNMWWf","Chrome","userAgent"];return(_n=function(){return t})()}const vn={supportsRtpScriptTransform:an,isFirefox:un,isSafari:cn,isEdge:ln,isChrome:dn,platform:fn,isWindows:fn===sn(269)||fn===sn(265)},mn=gn;function gn(t,e){const i=bn();return(gn=function(t,e){return i[t-=185]})(t,e)}!function(){const t=gn,e=bn();for(;;)try{if(-x(t(380))/1+-x(t(354))/2+-x(t(464))/3*(x(t(486))/4)+-x(t(253))/5+x(t(377))/6+x(t(321))/7*(-x(t(285))/8)+-x(t(444))/9*(-x(t(279))/10)==657542)break;e.push(e.shift())}catch(t){e.push(e.shift())}}();const pn=vn[mn(496)];function wn(t,e){const i=mn;let s=new j((0|t.byteLength)+(0|e[i(442)]));return s[i(311)](t,0),s[i(311)](e,0|t.byteLength),s}const yn=(t,e,i,s)=>{const n=mn,r=s[n(203)]||1;e*=r,i*=r;const o=(u=t)instanceof ArrayBuffer?u:u[mn(492)],h=(t[n(447)]||0)+t[n(442)],a=(t[n(447)]||0)+e;var u;let c=_[n(389)](0,_[n(487)](a,h)),l=_[n(487)](c+_[n(389)](i,0),h);return c/=r,l/=r,new s(o,c,l-c)};function bn(){const t=["[MSE] source buffer error","ManagedMediaSource","BYTES_PER_ELEMENT","types","ready","valid","Num frames in chunk: ","readBits","getTrackID","mvhd","parsePPS","encrypted","dependsOn","payload","len","moov","VMHD","mse","volume","h264","setUint16","tfdt","nextDts","avc1.","audioSampleAuxInfo","message","endMSE","width","hdlr","warn","traf","readBoolean","shift","mseReady","revokeObjectURL","smhd","dts","indexOf","<PROTECTINFO>","webkitsourceclose","onMSEClose","[H264Parser] IDR without SPS/PPS, not suitable for recovery",'VALUE="',"createObjectURL","</KID>","mdhd","SMHD","getFramePayload","tkhd","flush","clRtcDrmDebugLog","getBits","2598770DahMdb","dbgQueue","dispatch","DINF","http://schemas.microsoft.com/DRM/2007/03/PlayReadyHeader","isReady","sps","nalus","endOfStream","toString","UNKNOWN","Opus","minf","onError","stco","STSC","buffered","</KIDS>","initSegment","dinf","org.w3.clearkey","mp4track","keyFrame","units","mseEnded","videoSampleAuxInfo","41695210Plpuuo","splice","ended","bitLength","seq","url","8YyaFaO","com.apple.fps","[MSE] error: ","bitsAvailable","</WRMHEADER>","trex","setData","buffer error","slice","length","readUByte","mp4a","Unsupported DRM type ","mdia","fromCharCode",'<WRMHEADER xmlns="',"index","string","both","NDR","dOps","cenc","getPayload","bind","PPS","sourceBuffer","set","Checking codec","releaseBuffer","tenc","trak","flags",'/mp4; codecs="',"[H264Parser] Both IDR and non-IDR VCL NALUs found in the same frame","clRtcDrmCreateMediaDump","STSD","6352549TgZLxu","initBrowser","IDR","trun"," - ","start","mediaSource","startsWith","stype","readSPS","addEventListener","schi","encv","createElement","getVideoFrames","onReady","href","sourceopen","setUint32","vmhd","FTYP","schm","getData","toISOString","remuxer","track","skipScalingList","STSZ","getSize","addSourceBuffer","[MSE] buffer error:","appendBufferError","off","2392886zJoPkf","destroy","sdtp","audiosamplerate",": NRI: ","reportDiscontinuity","extractNALUs","No A/V data","pps","senc","saio","concat","config","ftyp","parseNAL","esds","error","feed","Browser does not support codec","4.3.0.0","skipUEG","mp4","end","2232924PKvVOf","updating","options","227868XbMqAn","prototype","createBuffer","info","MediaSource","timestamp","mvex","isfmb","opus","max","stsz","POSITIVE_INFINITY","saiz","timescale","call","encryption","height","jmuxer","bufferControllers","open","patchSampleAuxinfo","queue","stsd","onBufferError","frameCounter","ntype","remux","getPayloadSize","isSupported","</LA_URL>","waitingForIdr","box","idr"," samples - expected 1","tracks","stbl","getNri",'<KID ALGID="AESCTR" ',"download","readUInt","join","com.microsoft.playready.recommendation",'" version="',"remuxController","Received ","frma","resetTrack","disableRemotePlayback","</DATA>","mfhd","pssh","charCodeAt","drm","mediaDuration","video","readyToDecode","from","SPS","skipLZ","data","keySystem","[MSE] sourceclose","byteLength","STTS","9mESMVl","Buffered range ","samples","byteOffset","parseHeader","codec","node","audio","Failure: Browser doesn't support MSE/MMS","subarray","replaceAll","downloadToFile","onBuffer","skipBits","mdat","isKeyframe","moof","mode","push","STCO","9ffcUcC","listener","isReset","map","enca","type","<LA_URL>","parseSPS","getElementById","no video element were found to render, provide a valid video element","sinf","doAppend","HDLR_TYPES","videoElement","stts","keyId","trackTypes","TYPES","remove","size","AUD","src","1376748eVkTXq","min","tfhd","initialized","offAll","appendBuffer","buffer","nri","skipEG","isvcl","isSafari","isTypeSupported","readyState","abort","apply","reduce","assign","calculateExpectedSizeFromSai","duration","generatePlayReadyHeader","readUEG","onMSEOpen","sampleAuxInfo","SEI","irrecoverableError","channelCount","saiIvSize","stsc"];return(bn=function(){return t})()}function An(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=1/0),yn(t,e,i,j)}function Sn(t){const e=mn,i=Array[e(436)](t)[e(467)]((t=>t[e(431)](0)));return new j(i)}s[mn(455)]=(t,e,i)=>{void 0===i&&(i="application/octet-stream");const s=mn,n=h[s(334)]("a"),r=new Blob([t],{type:i});n[s(337)]=URL[s(244)](r),n[s(418)]=e,n.click(),URL[s(235)](n[s(337)])};class Tn{static get[mn(304)](){return 1}static get[mn(323)](){return 5}static get[mn(196)](){return 6}static get SPS(){return 7}static get PPS(){return 8}static get[mn(484)](){return 9}static get[mn(481)](){const t=mn;return{[Tn[t(323)]]:t(323),[Tn.SEI]:t(196),[Tn.SPS]:t(437),[Tn[t(309)]]:t(309),[Tn[t(304)]]:t(304),[Tn[t(484)]]:t(484)}}static type(t){const e=mn;return t[e(405)]in Tn[e(481)]?Tn[e(481)][t[e(405)]]:e(263)}toString(){const t=mn;return Tn[t(469)](this)+t(358)+this[t(416)]()}getNri(){return this[mn(493)]}[mn(469)](){return this[mn(405)]}[mn(459)](){const t=mn;return this[t(405)]===Tn[t(323)]}[mn(307)](){return this[mn(214)]}[mn(407)](){const t=mn;return this[t(214)][t(442)]}getSize(){return 4+this[mn(407)]()}[mn(343)](){const t=mn,e=new j(this.getSize());return new DataView(e.buffer)[t(339)](0,this.getSize()-4),e[t(311)](this[t(307)](),4),e}constructor(t){const e=mn;this.payload=t,this[e(493)]=(96&this.payload[0])>>5,this[e(405)]=31&this[e(214)][0],this[e(495)]=1==this.ntype||5==this[e(405)],this[e(329)]="",this[e(387)]=!1}}class kn{[mn(291)](t){const e=mn;this.data=t,this[e(301)]=0,this[e(282)]=8*t[e(442)]}get[mn(288)](){const t=mn;return this[t(282)]-this[t(301)]}skipBits(t){if(this[mn(288)]<t)return!1;this.index+=t}[mn(208)](t,e){return void 0===e&&(e=!0),this.getBits(t,this.index,e)}[mn(252)](t,e,i){void 0===i&&(i=!0);const s=mn;if(this.bitsAvailable<t)return 0;const n=e%8,r=this[s(439)][e/8|0]&255>>>n,o=8-n;if(o>=t)return i&&(this.index+=t),r>>o-t;{i&&(this.index+=o);const n=t-o;return r<<n|this[s(252)](n,e+o,i)}}[mn(438)](){const t=mn;let e;for(e=0;e<this.bitLength-this[t(301)];++e)if(0!==this.getBits(1,this[t(301)]+e,!1))return this.index+=e,e;return e}[mn(374)](){const t=mn;this[t(457)](1+this[t(438)]())}[mn(494)](){const t=mn;this[t(457)](1+this[t(438)]())}readUEG(){const t=mn,e=this[t(438)]();return this[t(208)](e+1)-1}readEG(){const t=this[mn(193)]();return 1&t?1+t>>>1:-1*(t>>>1)}readBoolean(){return 1===this[mn(208)](1)}[mn(295)](t){return void 0===t&&(t=1),this[mn(208)](8*t)}readUShort(){return this[mn(208)](16)}[mn(419)](){return this[mn(208)](32)}constructor(t){const e=mn;this[e(439)]=t,this[e(301)]=0,this.bitLength=8*t[e(442)]}}class En{static[mn(360)](t,e){const i=mn;let s=[],n=!1,r=!1,o=!1,h=!1,a=0,u=0,c=0,l=[];for(;a<=t.byteLength;){if(a<t.byteLength){const e=t[a++];0!==e?(1===e&&u>1&&(c=u>2?4:3,l.push(a)),u=0):++u}else c=0,l.push(a++);if(l.length>1){const i=l.shift(),d=l[0]-c;if(i<d){let c=!1;const l=31&t[i];if(l===Tn.NDR?r=!0:l===Tn.IDR?n=!0:l===Tn.SPS?(c=o,o=!0):l===Tn.PPS&&(c=h,h=!0),!c)if(!e||l!==Tn.NDR&&l!==Tn.IDR)s.push(t.subarray(i,d));else{const e=new j(d-i);let n=0;for(a=i,u=0;a<d;){let i=t[a++];u>1&&3===i&&(u=0,i=t[a++]),0!==i?u=0:++u,e[n++]=i}s.push(e.subarray(0,n))}}}}let d=!0,f=!1;return r||n?r&&n&&(console[i(230)](i(318)),d=!1):(console[i(230)]("[H264Parser] No VCL NALUs found"),d=!1),n&&(o&&h?f=!0:console[i(230)](i(242))),{valid:d,idr:f,nalus:s}}static skipScalingList(t,e){let i,s=8,n=8;for(let r=0;r<e;r++)0!==n&&(i=t.readEG(),n=(s+i+256)%256),s=0===n?s:n}static[mn(330)](t){const e=mn;let i,s,n,r,o,h,a=new kn(t),u=0,c=0,l=0,d=0,f=1;if(a[e(295)](),i=a.readUByte(),a[e(208)](5),a[e(457)](3),a.readUByte(),a[e(374)](),100===i||110===i||122===i||244===i||44===i||83===i||86===i||118===i||128===i){var v=a[e(193)]();if(3===v&&a[e(457)](1),a.skipUEG(),a[e(374)](),a[e(457)](1),a[e(232)]()){h=3!==v?8:12;for(let t=0;t<h;++t)a[e(232)]()&&(t<6?En[e(347)](a,16):En[e(347)](a,64))}}a[e(374)]();var m=a.readUEG();if(0===m)a[e(193)]();else if(1===m){a.skipBits(1),a[e(494)](),a[e(494)](),s=a[e(193)]();for(let t=0;t<s;++t)a.skipEG()}if(a.skipUEG(),a[e(457)](1),n=a[e(193)](),r=a.readUEG(),o=a[e(208)](1),0===o&&a[e(457)](1),a[e(457)](1),a[e(232)]()&&(u=a[e(193)](),c=a[e(193)](),l=a[e(193)](),d=a.readUEG()),a.readBoolean()){if(a[e(232)]()){let t;switch(a[e(295)]()){case 1:t=[1,1];break;case 2:t=[12,11];break;case 3:t=[10,11];break;case 4:t=[16,11];break;case 5:t=[40,33];break;case 6:t=[24,11];break;case 7:t=[20,11];break;case 8:t=[32,11];break;case 9:t=[80,33];break;case 10:t=[18,11];break;case 11:t=[15,11];break;case 12:t=[64,33];break;case 13:t=[160,99];break;case 14:t=[4,3];break;case 15:t=[3,2];break;case 16:t=[2,1];break;case 255:t=[a[e(295)]()<<8|a.readUByte(),a[e(295)]()<<8|a[e(295)]()]}t&&t[0]>0&&t[1]>0&&(f=t[0]/t[1])}a.readBoolean()&&a[e(457)](1),a[e(232)]()&&(a.skipBits(4),a[e(232)]()&&a[e(457)](24)),a.readBoolean()&&(a.skipUEG(),a[e(374)]()),a.readBoolean()&&(a[e(419)](),a[e(419)](),a.readBoolean())}return{width:_.ceil((16*(n+1)-2*u-2*c)*f),height:(2-o)*(r+1)*16-(o?2:4)*(l+d)}}static[mn(448)](t){const e=mn;let i=new kn(t[e(307)]());i.readUByte(),t.isfmb=0===i[e(193)](),t.stype=i[e(193)]()}[mn(471)](t){const e=mn;var i=En[e(330)](new j(t));this[e(346)][e(228)]=i[e(228)],this[e(346)][e(396)]=i[e(396)],this[e(346)].sps=[new j(t)],this[e(346)][e(449)]=e(224);let s=new DataView(t.buffer,t[e(447)]+1,4);for(let t=0;t<3;++t){var n=s.getUint8(t)[e(262)](16);n.length<2&&(n="0"+n),this.track[e(449)]+=n}}[mn(211)](t){this[mn(346)].pps=[new j(t)]}[mn(368)](t){const e=mn;if(!t)return!1;let i=!1;switch(t.type()){case Tn[e(323)]:case Tn[e(304)]:i=!0;break;case Tn[e(309)]:!this[e(346)][e(362)]&&(this.parsePPS(t[e(307)]()),!this[e(345)][e(435)]&&this[e(346)][e(362)]&&this[e(346)][e(259)]&&(this[e(345)][e(435)]=!0)),i=!0;break;case Tn[e(437)]:!this[e(346)][e(259)]&&(this[e(471)](t[e(307)]()),!this[e(345)][e(435)]&&this[e(346)][e(362)]&&this.track.sps&&(this[e(345)][e(435)]=!0)),i=!0;break;case Tn[e(484)]:break;case Tn[e(196)]:i=!0}return i}constructor(t){const e=mn;this.remuxer=t,this[e(346)]=t[e(274)]}}class xn{on(t,e){const i=mn;return!this[i(465)][t]&&(this[i(465)][t]=[]),this[i(465)][t][i(462)](e),!0}[mn(353)](t,e){const i=mn;if(this[i(465)][t]){var s=this.listener[t][i(238)](e);return s>-1&&this[i(465)][t][i(280)](s,1),!0}return!1}[mn(490)](){this[mn(465)]={}}[mn(255)](t,e){const i=mn;return!!this.listener[t]&&(this[i(465)][t][i(467)]((t=>{t[i(187)](null,[e])})),!0)}constructor(t){const e=mn;this[e(465)]={},this[e(469)]=""|t}}class Rn{static[mn(411)](t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];const n=mn;let r,o=8,h=i.length,a=h;for(;h--;)i[h]&&(o+=i[h].byteLength);for(r=new j(o),r[0]=o>>>24,r[1]=o>>>16&255,r[2]=o>>>8&255,r[3]=255&o,r[n(311)](t,4),h=0,o=8;h<a;++h)i[h]&&(r[n(311)](i[h],o),o+=i[h][n(442)]);return r}hdlr(t){const e=mn;return Rn[e(411)](Rn[e(204)][e(229)],Rn[e(476)][t])}mdat(t){const e=mn;return Rn.box(Rn.types[e(458)],t)}[mn(246)](t,e){const i=mn;return Rn.box(Rn[i(204)][i(246)],new j([0,0,0,0,0,0,0,0,0,0,0,0,t>>>24,t>>>16&255,t>>>8&255,255&t,0,0,0,0,85,196,0,0]))}[mn(298)](t){const e=mn;return Rn[e(411)](Rn[e(204)][e(298)],this[e(246)](t[e(393)],t.duration),this[e(229)](t[e(469)]),this[e(265)](t))}[mn(429)](t){const e=mn;return Rn[e(411)](Rn.types[e(429)],new j([0,0,0,0,t>>>24,t>>>16&255,t>>>8&255,255&t]))}[mn(265)](t){const e=mn;return t[e(469)]===e(451)?Rn[e(411)](Rn[e(204)][e(265)],Rn.box(Rn[e(204)][e(236)],Rn[e(247)]),Rn.DINF,this[e(415)](t)):Rn[e(411)](Rn[e(204)][e(265)],Rn[e(256)],this[e(415)](t),Rn[e(411)](Rn[e(204)][e(340)],Rn[e(217)]))}[mn(460)](t,e,i){const s=mn;return Rn[s(411)](Rn[s(204)][s(460)],this[s(429)](t),this.traf(i,e))}moov(t,e,i){const s=mn;let n=t[s(294)],r=[];for(;n--;)r[n]=this[s(315)](t[n]);return Rn[s(411)][s(187)](null,[Rn[s(204)].moov,this[s(210)](i,e),this[s(430)](t)].concat(r)[s(365)](this[s(386)](t)))}mvex(t){const e=mn;let i=t[e(294)],s=[];for(;i--;)s[i]=this[e(290)](t[i]);return Rn.box[e(187)](null,[Rn[e(204)].mvex].concat(s))}[mn(210)](t,e){const i=mn;let s=new j([0,0,0,0,0,0,0,0,0,0,0,0,t>>>24,t>>>16&255,t>>>8&255,255&t,e>>>24,e>>>16&255,e>>>8&255,255&e,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return Rn[i(411)](Rn[i(204)].mvhd,s)}[mn(356)](t){const e=mn;let i=t[e(446)]||[],s=new j(4+i.length);for(let t=0;t<i.length;t++){const n=i[t][e(316)];s[t+4]=n[e(213)]<<4|n.isDependedOn<<2|n.hasRedundancy}return Rn.box(Rn.types.sdtp,s)}[mn(415)](t){const e=mn;return Rn[e(411)](Rn.types[e(415)],this[e(402)](t),Rn.box(Rn.types[e(478)],Rn[e(443)]),Rn.box(Rn.types[e(200)],Rn[e(268)]),Rn[e(411)](Rn[e(204)][e(390)],Rn[e(348)]),Rn[e(411)](Rn[e(204)][e(267)],Rn[e(463)]))}[mn(333)](t){const e=mn;let i,s,n,r=[],o=[];for(i=0;i<t[e(259)][e(294)];i++)s=t[e(259)][i],n=s[e(442)],r.push(n>>>8&255),r[e(462)](255&n),r=r[e(365)](Array[e(381)].slice.call(s));for(i=0;i<t.pps.length;i++)s=t.pps[i],n=s[e(442)],o.push(n>>>8&255),o[e(462)](255&n),o=o[e(365)](Array[e(381)][e(293)][e(394)](s));const h=Rn[e(411)](Rn[e(204)].avcC,new j([1,r[3],r[4],r[5],255,224|t[e(259)][e(294)]][e(365)](r)[e(365)]([t[e(362)].length]).concat(o))),a=t[e(228)],u=t[e(396)],c=Rn[e(411)](Rn[e(204)][e(474)],Rn[e(411)](Rn.types[e(425)],new j([97,118,99,49])),Rn[e(411)](Rn[e(204)][e(342)],new j([0,0,0,0,...Sn(this[e(432)][e(366)].video[e(395)]),0,1,0,0])),Rn[e(411)](Rn[e(204)].schi,this[e(314)]("video")));return Rn[e(411)](Rn[e(204)][e(333)],new j([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,a>>>8&255,255&a,u>>>8&255,255&u,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,65,86,67,32,67,111,100,105,110,103,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]),h,c)}[mn(369)](t){const e=mn;let i=t.config[e(442)],s=new j(26+i+3);return s[e(311)]([0,0,0,0,3,23+i,0,1,0,4,15+i,64,21,0,0,0,0,0,0,0,0,0,0,0,5,i]),s[e(311)](t[e(366)],26),s[e(311)]([6,1,2],26+i),s}[mn(296)](t){const e=mn,i=t.audiosamplerate;return Rn[e(411)](Rn[e(204)][e(296)],new j([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t[e(198)],0,16,0,0,0,0,i>>>8&255,255&i,0,0]),Rn[e(411)](Rn[e(204)][e(369)],this.esds(t)))}dOps(t){const e=mn,i=t[e(357)];return new j([0,t[e(198)],1,56,0,0,i>>>8&255,255&i,0,0,0])}[mn(264)](t){const e=mn,i=t[e(357)];return Rn[e(411)](Rn[e(204)].Opus,new j([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t[e(198)],0,16,0,0,0,0,i>>>8&255,255&i,0,0]),Rn[e(411)](Rn.types[e(305)],this[e(305)](t)))}[mn(468)](t){const e=mn,i=Rn[e(411)](Rn[e(204)].dOps,this[e(305)](t)),s=Rn[e(411)](Rn[e(204)].sinf,Rn[e(411)](Rn[e(204)].frma,new j([79,112,117,115])),Rn[e(411)](Rn[e(204)][e(342)],new j([0,0,0,0,...Sn(this.drm[e(366)].audio[e(395)]),0,1,0,0])),Rn[e(411)](Rn[e(204)][e(332)],this[e(314)](e(451)))),n=t[e(357)];return Rn[e(411)](Rn[e(204)][e(468)],new j([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t[e(198)],0,16,0,0,0,0,n>>>8&255,255&n,0,0]),i,s)}[mn(402)](t){const e=mn;return t[e(469)]===e(451)?Rn.box(Rn[e(204)][e(402)],Rn[e(320)],t[e(212)]?this[e(468)](t):this[e(264)](t)):Rn.box(Rn[e(204)][e(402)],Rn[e(320)],this.encv(t))}[mn(249)](t){const e=mn,i=t.id,s=t[e(191)],n=t.width,r=t[e(396)],o=t[e(219)];return Rn[e(411)](Rn[e(204)][e(249)],new j([0,0,0,7,0,0,0,0,0,0,0,0,i>>>24,i>>>16&255,i>>>8&255,255&i,0,0,0,0,s>>>24,s>>>16&255,s>>>8&255,255&s,0,0,0,0,0,0,0,0,0,0,0,0,255&o,o%1*10&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,n>>>8&255,255&n,0,0,r>>>8&255,255&r,0,0]))}[mn(231)](t,e){var i;const s=mn,n=t.id,r=t[s(446)][0][s(483)],o=t[s(446)][0][s(191)],h=t[s(446)][0].flags,a=Rn[s(411)](Rn[s(204)][s(488)],new j([0,2,0,58,n>>>24,n>>>16&255,n>>>8&255,255&n,0,0,0,1,o>>>24,n>>>16&255,o>>>8&255,255&o,r>>>24,r>>>16&255,r>>>8&255,255&r,0,h.isNonSync,0,0])),u=Rn[s(411)](Rn[s(204)][s(222)],new j([0,0,0,0,e>>>24,e>>>16&255,e>>>8&255,255&e]));if(t[s(212)]){let e,n;if(t[s(469)]===s(434)?(e=!0,n=this[s(199)][s(434)]+(null==(i=t[s(446)][0].sampleAuxInfo)?void 0:i.byteLength)):(e=!1,n=this[s(199)][s(451)]),n>0){const i=this[s(392)](n),r=this[s(363)](t[s(446)],e),o=i.length+20+r.length+a[s(294)]+u[s(294)]+8+16+8+8,h=this[s(324)](t,o);return Rn[s(411)](Rn[s(204)][s(231)],a,u,h,i,this[s(364)](o-r[s(294)]+h[s(294)]+8),r)}{const e=this[s(363)](null,!1),i=e[s(294)]+a[s(294)]+u.length+8+16+8+8,n=this[s(324)](t,i);return Rn[s(411)](Rn[s(204)][s(231)],a,u,n,e)}}return Rn.box(Rn.types.traf,a,u,this[s(324)](t,a[s(294)]+u[s(294)]+8+16+8+8))}[mn(315)](t){const e=mn;return t[e(191)]=t[e(191)]||4294967295,Rn.box(Rn[e(204)][e(315)],this[e(249)](t),this[e(298)](t))}trex(t){const e=mn,i=t.id;return Rn[e(411)](Rn[e(204)][e(290)],new j([0,0,0,0,i>>>24,i>>>16&255,i>>>8&255,255&i,0,0,0,1,0,0,0,16,0,0,0,0,0,0,0,0]))}trun(t,e){const i=mn;let s=(t.samples||[]).length,n=new j(12);return e+=20,n[i(311)]([0,0,0,1,s>>>24,s>>>16&255,s>>>8&255,255&s,e>>>24,e>>>16&255,e>>>8&255,255&e],0),Rn.box(Rn.types[i(324)],n)}[mn(192)](t,e){const i=mn,s=i(373),n=i(257),r=function(t){const e=function(t){const e=mn;let i="";for(let s=0;s<t.length;s+=16e3){const n=t[e(453)](s,s+16e3);i+=String[e(299)][e(187)](null,n)}return i}(An(t));return btoa(e)}(function(t){const e=mn,i=[];return i[e(462)](t[3]),i[e(462)](t[2]),i[e(462)](t[1]),i[e(462)](t[0]),i.push(t[5]),i.push(t[4]),i.push(t[7]),i.push(t[6]),(t=An(t))[e(311)](i,0),t}(t));return An(function(t,e){const i=mn,s=new j(2*t.length),n=new DataView(s[i(492)]);for(let e=0;e<t[i(294)];++e){const s=t[i(431)](e);n[i(221)](2*e,s,true)}return s[i(492)]}([i(300)+n+i(422)+s+'">',"<DATA>",i(239),"<KIDS>",i(417),i(243)+r+'"',">",i(245),i(270),"</PROTECTINFO>",e?i(470)+e+i(409):"",i(428),i(289)][i(420)]("")))}[mn(430)](t){const e=mn;if(this[e(432)][e(440)][e(328)]("com.widevine"))return Rn[e(411)](Rn[e(204)][e(430)],new j([0,0,0,0,237,239,139,169,121,214,74,206,163,200,39,220,213,29,33,237,0,0,0,18,18,16,...this[e(432)][e(366)][t[0][e(469)]][e(479)]]));if(this[e(432)].keySystem===e(421)){const i=this[e(192)](this[e(432)][e(366)][t[0].type][e(479)],this.drm.licenseUrl),s=i[e(442)];return Rn[e(411)](Rn[e(204)][e(430)],new j([0,0,0,0,154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149,s>>>24,s>>>16&255,s>>>8&255,255&s,...i]))}return this[e(432)][e(440)]===e(273)?Rn[e(411)](Rn[e(204)][e(430)],new j([1,0,0,0,16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75,0,0,0,1,...this.drm.config[t[0][e(469)]][e(479)],0,0,0,0])):this[e(432)][e(440)]===e(286)?null:void console[e(370)](e(297)+this[e(432)].keySystem)}[mn(314)](t){const e=mn;let i,s,n=this[e(432)][e(366)][t];return"cbcs"===n.encryption?(i=new j([16,...n.iv]),s=25):(i=new j([]),s=0),Rn[e(411)](Rn[e(204)].tenc,new j([1,0,0,0,0,s,1,this[e(199)][t],...n[e(479)],...i]))}[mn(392)](t){return Rn[mn(411)](Rn.types.saiz,new j([0,0,0,0,t,0,0,0,1]))}[mn(364)](t){const e=mn;return Rn[e(411)](Rn[e(204)][e(364)],new j([0,0,0,0,0,0,0,1,t>>>24,t>>>16&255,t>>>8&255,255&t]))}[mn(363)](t,e){const i=mn;let s=null;return t&&(1!==t[i(294)]&&console[i(370)](i(424)+t[i(294)]+i(413)),s=t[0][i(195)]),s&&s[i(442)]?Rn[i(411)](Rn[i(204)][i(363)],new j([0,0,0,e?2:0,0,0,0,1,...s])):Rn[i(411)](Rn[i(204)][i(363)],new j([0,0,0,0,0,0,0,1]))}[mn(271)](t,e,i){const s=mn,n=this[s(216)](t,e,i);let r=new j(Rn[s(341)][s(442)]+n.byteLength);return r.set(Rn[s(341)]),r[s(311)](n,Rn[s(341)].byteLength),r}constructor(t){var e,i;const s=mn;this[s(432)]=t,this[s(199)]={video:(null==(e=t[s(366)][s(434)])?void 0:e.encryption)===s(306)?16:0,audio:(null==(i=t[s(366)][s(451)])?void 0:i.encryption)===s(306)?16:0},Rn.types={avc1:[],encv:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],Opus:[],dOps:[],enca:[],mvex:[],mvhd:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[],pssh:[],sinf:[],frma:[],schm:[],schi:[],tenc:[],saiz:[],saio:[],senc:[]};for(let t in Rn[s(204)])Rn[s(204)][t]=[t[s(431)](0),t[s(431)](1),t.charCodeAt(2),t[s(431)](3)];const n=new j([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),r=new j([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);Rn[s(476)]={video:n,audio:r};const o=new j([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),h=new j([0,0,0,0,0,0,0,0]);Rn[s(443)]=Rn[s(268)]=Rn[s(463)]=h,Rn[s(348)]=new j([0,0,0,0,0,0,0,0,0,0,0,0]),Rn[s(217)]=new j([0,0,0,1,0,0,0,0,0,0,0,0]),Rn.SMHD=new j([0,0,0,0,0,0,0,0]),Rn[s(320)]=new j([0,0,0,0,0,0,0,1]);const a=new j([105,115,111,109]),u=new j([97,118,99,49]),c=new j([0,0,0,1]);Rn[s(341)]=Rn[s(411)](Rn[s(204)][s(367)],a,c,a,u),Rn.DINF=Rn[s(411)](Rn[s(204)][s(272)],Rn[s(411)](Rn[s(204)].dref,o))}}let In=1;class Cn{static[mn(209)](){return In++}[mn(250)](){const t=mn;this[t(274)][t(215)]=0,this.mp4track[t(446)]=[]}[mn(258)](){const t=mn;return!(!this.readyToDecode||!this[t(446)][t(294)])}constructor(){this[mn(283)]=1}}class Pn extends Cn{resetTrack(){const t=mn;this[t(283)]=1,this[t(223)]=0,this[t(237)]=0}[mn(406)](t,e,i){const s=mn;if(t.length>0)for(let n=0;n<t[s(294)];n++){let r=t[n],o=r[s(276)],h=o[s(442)];this.samples.push({units:o,size:h,duration:r.duration,sampleAuxInfo:e,timestamp:i}),this[s(274)][s(215)]+=h}}[mn(248)](){const t=mn;if(!this[t(446)])return null;let e,i=this[t(274)][t(446)];for(;this.samples[t(294)];){let s=this[t(446)][t(233)](),n=(1e3*s[t(385)]|0)-this.nextDts|0;n<5&&(n=5),this.dts=this.nextDts,this[t(223)]+=n,e={size:s.size,duration:n,cts:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1},sampleAuxInfo:s[t(195)]};let r=new j(s.size);return r[t(311)](s.units,0),i.push(e),new j(r.buffer,0,s[t(483)])}return null}constructor(t){const e=mn;super(),this[e(435)]=!0,this[e(223)]=0,this[e(237)]=0,this[e(274)]={id:Cn[e(209)](),type:"audio",channelCount:2,audiosamplerate:48e3,len:0,fragmented:!0,timescale:t,duration:t,samples:[],codec:e(388),encrypted:!0},this[e(446)]=[]}}class Dn extends Cn{[mn(426)](){const t=mn;this[t(283)]=1,this.readyToDecode=!1,this[t(274)].sps="",this[t(274)][t(362)]="",this[t(223)]=0,this[t(237)]=0}[mn(406)](t,e,i){const s=mn;for(let n of t){let t=[],r=0;for(let e of n[s(276)])this.h264[s(368)](e)&&(t[s(462)](e),r+=e.getSize());t[s(294)]>0&&this[s(435)]&&(this[s(274)][s(215)]+=r,this[s(446)][s(462)]({units:t,size:r,keyFrame:n.keyFrame,duration:n[s(191)],sampleAuxInfo:e,timestamp:i}))}}[mn(248)](){const t=mn;if(!this[t(258)]()||!this.samples)return null;let e,i=this[t(274)][t(446)],n=this.samples[t(233)](),r=n[t(276)],o=(1e3*n.timestamp|0)-this[t(223)]|0;o<5&&(o=5),s[t(251)]&&o>5e3&&console[t(383)]("timestamp gap: "+(o/1e3|0)+" s"),this[t(237)]=this[t(223)],this.nextDts+=o,e={size:n[t(483)],duration:o,cts:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,isNonSync:n[t(275)]?0:1,dependsOn:n.keyFrame?2:1},sampleAuxInfo:n[t(195)]};let h=0;for(const e of r)h+=e[t(349)]();let a=0,u=new j(h);for(const e of r)u[t(311)](e[t(343)](),a),a+=e[t(349)]();return i[t(462)](e),new j(u[t(492)],0,h)}constructor(t,e){const i=mn;super(),this[i(435)]=!1,this.nextDts=0,this[i(237)]=0,this[i(477)]=e,this.mp4track={id:Cn[i(209)](),type:i(434),len:0,fragmented:!0,sps:"",pps:"",width:0,height:0,timescale:t,duration:t,samples:[],encrypted:!0},this[i(446)]=[],this[i(220)]=new En(this)}}class Nn extends xn{addTrack(t){const e=mn;(t===e(434)||"both"===t)&&(this[e(414)][e(434)]=new Dn(this[e(393)],this.videoElement),this[e(480)][e(462)](e(434))),(t===e(451)||t===e(303))&&(this[e(414)][e(451)]=new Pn(this.timescale),this[e(480)][e(462)](e(451)))}reset(){const t=mn;for(let e of this[t(480)])this[t(414)][e][t(426)]();this[t(489)]=!1}[mn(355)](){const t=mn;this[t(414)]={},this[t(490)]()}[mn(250)](){const t=mn;if(this[t(489)])for(let e of this[t(480)]){let i=this[t(414)][e];for(;;){let s=i.getFramePayload();if(!s||!s[t(442)])break;let n={type:e,payload:wn(this[t(375)][t(460)](i[t(283)]++,i[t(237)],i[t(274)]),this[t(375)][t(458)](s)),dts:i[t(237)]};this[t(255)](t(492),n),i[t(250)]()}}else this[t(258)]()&&(this[t(255)](t(205)),this[t(271)](),this[t(489)]=!0,this[t(250)]())}initSegment(){const t=mn;for(let e of this[t(480)]){let i=this[t(414)][e],s={type:e,payload:this[t(375)][t(271)]([i[t(274)]],this[t(433)],this[t(393)])};this.dispatch(t(492),s)}}isReady(){const t=mn;for(let e of this.trackTypes)if(!this[t(414)][e][t(435)]||!this[t(414)][e].samples[t(294)])return!1;return!0}[mn(406)](t){const e=mn;for(let i of this[e(480)]){let s=t[i];s.length>0&&this[e(414)][i][e(406)](s,i===e(451)?t[e(225)]:t.videoSampleAuxInfo,t[e(385)])}this.flush()}constructor(t,e){const i=mn;super(i(345)),this.initialized=!1,this.trackTypes=[],this[i(414)]={},this[i(393)]=1e3,this.mediaDuration=0,this[i(477)]=t,this[i(375)]=e}}class Mn extends xn{[mn(355)](){const t=mn;this[t(401)]=null,this[t(254)]=null;try{this.sourceBuffer&&(this[t(310)][t(186)](),this[t(218)].removeSourceBuffer(this[t(310)]),this[t(310)]=null)}catch(t){}this.offAll()}[mn(475)](){const t=mn;if(this.queue[t(294)]&&this[t(310)]&&!this[t(310)].updating){if(this[t(310)].buffered[t(294)]>1){for(let e=0;e<this[t(310)].buffered[t(294)];++e){const i=e<this[t(310)].buffered[t(294)]-1;s[t(251)]&&console[t(383)](t(445)+e+(i?" (remove)":"")+": "+this[t(310)][t(269)][t(326)](e)+t(325)+this[t(310)][t(269)][t(376)](e)),i&&this.sourceBuffer[t(482)](this[t(310)][t(269)].start(e),this[t(310)].buffered[t(376)](e))}if(this.sourceBuffer[t(378)])return}try{this[t(310)][t(491)](this[t(401)]),this.queue=new j}catch(e){this[t(255)](t(370),{type:this[t(469)],name:t(352),error:e})}}}[mn(371)](t){const e=mn;if(this[e(254)]&&(this.dbgQueue=wn(this[e(254)],t),100==++this[e(404)])){const t=(new Date)[e(344)]().substring(0,19)[e(454)](":","-"),i=this.type+"-"+t+".mp4";s.downloadToFile(this[e(254)],i),this[e(254)]=null}this[e(197)]||(this[e(401)]=wn(this[e(401)],t)),this.doAppend()}constructor(t,e,i){const n=mn;super(n(492)),this[n(469)]=e,this.queue=new j,s[n(319)]&&(this[n(254)]=new j,this[n(404)]=0),this.sourceBuffer=t,this[n(218)]=i,this[n(197)]=!1,this[n(310)].addEventListener(n(370),(t=>{const e=n;console.warn(e(201),t,this.type),this[e(197)]=!0,this[e(255)](e(370),{type:this[e(469)],name:"buffer",error:e(292)})}))}}class Ln extends xn{static isSupported(t){const e=mn;return s[e(202)]?s.ManagedMediaSource[e(497)](t):!!s[e(384)]&&s.MediaSource[e(497)](t)}[mn(322)](){const t=mn;typeof this.options.node===t(302)&&""==this.options[t(450)]&&console[t(370)](t(473)),this[t(234)]=!1,this.setupMSE()}setupMSE(){const t=mn;if(!s[t(202)]&&!s[t(384)])throw t(452);s.ManagedMediaSource?(this.node[t(427)]=!0,this[t(327)]=new ManagedMediaSource):this[t(327)]=new MediaSource,this[t(284)]=URL[t(244)](this[t(327)]),this.node[t(485)]=this[t(284)],this[t(277)]=!1,this[t(327)][t(331)](t(338),this.onMSEOpen[t(308)](this)),this.mediaSource.addEventListener("sourceclose",this[t(241)][t(308)](this)),this[t(327)][t(331)]("webkitsourceopen",this[t(194)][t(308)](this)),this.mediaSource[t(331)](t(240),this[t(241)].bind(this)),this[t(327)][t(331)]("error",(function(e){const i=t;console[i(370)](i(287),e[i(226)])}))}[mn(227)](){const t=mn;if(!this[t(277)])try{this.mseEnded=!0,this[t(327)][t(185)]===t(399)&&this[t(327)][t(261)]()}catch(e){console[t(370)]("mediasource is not available to end: ",e)}}[mn(359)](){this[mn(410)]=!0}[mn(371)](t){const e=mn;let i={video:[],audio:[]};if(this[e(197)]||this[e(277)]||!t||!this[e(423)])return-1;if(t[e(434)]){i.timestamp=t.timestamp;const s=this[e(190)](t.videoSampleAuxInfo,this.mp4[e(199)][e(434)]),n=s!=t[e(434)][e(442)];let r=En[e(360)](t[e(434)],n);if(!r[e(206)]||r[e(260)].length<1)return 0;if(this.waitingForIdr){if(!r[e(412)])return 0;this[e(410)]=!1}if(!pn&&t[e(278)]){const i=r[e(260)][e(188)](((t,i)=>t+4+i[e(442)]),0);i!==s&&this[e(400)](t[e(278)],this.mp4[e(199)][e(434)],i-s)}i[e(434)]=this[e(335)](r[e(260)]),i[e(278)]=t[e(278)]}return t[e(451)]&&(i[e(385)]=t[e(385)],i[e(451)]=[{units:t.audio}],i.audioSampleAuxInfo=t[e(225)]),t[e(434)]||t[e(451)]?(this[e(423)][e(406)](i),0):(console.error(e(361)),0)}[mn(335)](t){const e=mn;let i=[],s=[],n=!1,r=!1;for(let o of t){let t=new Tn(o);t.type()!==Tn.IDR&&t[e(469)]()!==Tn.NDR||En[e(448)](t),i[e(294)]&&r&&(t[e(387)]||!t[e(495)])&&(s[e(462)]({units:i,keyFrame:n}),i=[],n=!1,r=!1),i[e(462)](t),n=n||t[e(459)](),r=r||t[e(495)]}if(i[e(294)])if(r)s[e(462)]({units:i,keyFrame:n});else{let t=s[e(294)]-1;t>=0&&(s[t].units=s[t][e(276)].concat(i))}return 1!==s[e(294)]&&console[e(230)](e(207)+s[e(294)]),s}[mn(190)](t,e){const i=mn;if(!t)return 0;const s=(t[0]<<8)+t[1],n=e+2+4;let r=0,o=2;for(;0<s&&o+n<=t[i(442)];){o+=e;const i=(t[o]<<8)+t[o+1],s=(t[o+2]<<24)+(t[o+3]<<16)+(t[o+4]<<8)+t[o+5];o+=6,r+=i+s}return r}patchSampleAuxinfo(t,e,i){const s=mn;let n=2;if(0<(t[0]<<8)+t[1]&&n+(e+2+4)<=t[s(442)]){n+=e;let s=(t[n]<<8)+t[n+1];s+=i,s>=0&&(t[n]=s>>>8&255,t[n+1]=255&s)}return 0}[mn(382)](){const t=mn;if(this[t(234)]&&this[t(423)]&&this[t(423)].isReady()&&!this.bufferControllers){this.bufferControllers={};for(let e in this[t(423)][t(414)]){let i=this[t(423)][t(414)][e];const n="".concat(e,t(317))[t(365)](i[t(274)][t(449)],'"');if(s.clRtcDrmDebugLog&&console[t(383)](t(312),n),!Ln[t(408)](n))return console[t(370)](t(372)),!1;let r=this[t(327)][t(350)](n);this[t(398)][e]=new Mn(r,e,this[t(327)]),this.bufferControllers[e].on(t(370),this[t(403)][t(308)](this))}}}[mn(313)](){const t=mn;for(let e in this[t(398)])this[t(398)][e].doAppend()}onBuffer(t){const e=mn;this[e(234)]&&this[e(398)]&&this[e(398)][t.type]&&this[e(398)][t[e(469)]][e(371)](t[e(214)])}[mn(194)](){const t=mn;s[t(251)]&&console.info("[MSE] sourceopen"),this[t(327)][t(185)]!==t(281)&&(this.mediaSource.duration=Number[t(391)],this[t(234)]=!0,"function"==typeof this[t(379)][t(336)]&&this[t(379)].onReady[t(394)](null,this[t(466)]),URL[t(235)](this.url),this[t(382)]())}[mn(241)](){const t=mn;s.clRtcDrmDebugLog&&console[t(383)](t(441)),this.mseReady=!1,this[t(227)]()}[mn(403)](t){const e=mn;console.warn(e(351),t),this.irrecoverableError=!0,this[e(227)](),"function"==typeof this[e(379)][e(266)]&&this[e(379)][e(266)][e(394)](null,t)}constructor(t){const e=mn;super(e(397)),this[e(197)]=!1,this[e(410)]=!0,this[e(466)]=!1,this[e(234)]=!1,this.mseEnded=!1,this[e(379)]=w[e(189)]({},{node:"",mode:"video",debug:!1,onReady:function(){},onError:function(t){}},t),this[e(450)]=typeof this.options[e(450)]===e(302)?h[e(472)](this.options.node):this[e(379)].node,this[e(432)]=t.drm,this.mp4=new Rn(this.drm),this[e(423)]=new Nn(this.node,this[e(375)]),this[e(423)].addTrack(this[e(379)][e(461)]),this[e(423)].on(e(492),this[e(456)].bind(this)),this[e(423)].on(e(205),this[e(382)][e(308)](this)),this.initBrowser()}}function Bn(t,e){const i=On();return(Bn=function(t,e){return i[t-=222]})(t,e)}function On(){const t=["Sv","1634635aeNfVS","4rWkceo","1051qHPzyB","314juHkBI","7752096GfpyFE","1023208nKrJjX","2137269uUqtNM","303058KNxeBb","1097196nHglzA"];return(On=function(){return t})()}!function(){const t=Bn,e=On();for(;;)try{if(x(t(228))/1*(-x(t(229))/2)+-x(t(222))/3*(x(t(227))/4)+x(t(226))/5+x(t(224))/6+x(t(223))/7+-x(t(231))/8+x(t(230))/9==409100)break;e.push(e.shift())}catch(t){e.push(e.shift())}}();const Fn=Vn;function Vn(t,e){const i=Hn();return(Vn=function(t,e){return i[t-=460]})(t,e)}!function(){const t=Vn,e=Hn();for(;;)try{if(-x(t(471))/1*(-x(t(474))/2)+x(t(479))/3+x(t(473))/4*(x(t(461))/5)+x(t(487))/6+-x(t(467))/7+-x(t(482))/8+-x(t(464))/9==139726)break;e.push(e.shift())}catch(t){e.push(e.shift())}}();const Wn="CrsCCAMSEKDc0WAwLAQT1SB2ogyBJEwYv4Tx7gUijgIwggEKAoIBAQC8Xc/GTRwZDtlnBThq8"+Fn(462)+"wyoYOE+M/t1oIbccwlTQ7o+BpV1X6TB7fxFyx1jsBtRsBWphU65w121zqmSiwzZzJ4xsXVQCJ"+Fn(460)+Fn(476)+Fn(480)+Fn(484)+Fn(485)+"7hyskG5ZLAyJMzTvgnV3D8/I5Y6mCFBPb/+/Ri+9bEvquPF3Ff9ip3yEHu9mcQeEYCeGe9zR/27eI5MATX39gYtCnn7dDXVxo4/rCYK0A4VemC3HRai2X3pSGcsKY7+6we7h4IycjqtuGtYg8A"+Fn(475)+"RL9KsD0v7ysBQVdUXEbJotcFz71tI5qc3jwr6GjYIPA3VzusD17PN6AGQniMwxJV12z/EgnUo"+Fn(477),Un=j[Fn(478)](s[Fn(470)](Wn),(t=>t.charCodeAt(0)));class Gn{[Fn(469)](){return this[Fn(488)]}[Fn(483)](){const t=Fn;switch(this[t(488)]){case t(489):return"https://lic.staging.drmtoday.com";case t(465):return t(481);default:return t(466)}}certificate(){return Un}constructor(t){this[Fn(488)]=t}}function Hn(){const t=["development","https://lic.drmtoday.com","462553oMrSQp","Staging","toString","atob","20047HjYCpd","Development","52chMPdC","6mbMcSk","baigovcoURAZcr1d/G0rpREjLdVLG0Gjqk63Gx688W5gh3TKemsK3R1jV0dOfj3e6uV/kTpsN","+vwmV2/NJWxKqHBKdL9JqvOnNiQUF0hDI7Wf8Wb63RYSXKE27Ky31hKgx1wuq7TTWkA+kHnJT","pcFB13osydpD2AaDsgWo5RWJcNf+fzCgtUQx/0Au9+xVm5LQBdv8Ja4f2oiHN3dw","from","146355HhTpSB","UrTEfQxfPR4dJTquE+IDLAi5yeVVxzbAgMBAAE6DGNhc3RsYWJzLmNvbUABEoADMmGXpXg/0q","https://lic.test.drmtoday.com","501688OkVRMl","baseUrl","xUuwokpsqVIHZrJfu62ar+BF8UVUKdK5oYQoiTZd9OzK3kr29kqGGk3lSgM0/p499p/FUL8oH","HzgsJ7Hajdsyzn0Vs3+VysAgaJAkXZ+k+N6Ka0WBiZlCtcunVJDiHQbz1sF9GvcePUUi2fM/h","Production","1063410zFUyaf","name","staging","pQnNI61gzHO42XZOMuxytMm0F6puNHTTqhyY3Z290YqvSDdOB+UY5QJuXJgjhvOUD9+oaLlvT","93365ZJpndd","V382D1oJAM0F/YgCQtNDLz7vTWJ+QskNGi5Dd2qzO4s48Cnx5BLvL4H0xCRSw2Ed6ekHSdrRU","production","2343546YgIYCY"];return(Hn=function(){return t})()}function Zn(t,e){const i=Xn();return(Zn=function(t,e){return i[t-=325]})(t,e)}function Xn(){const t=["1052499bnJBHn","cenc","4222tSxFth","Unsupported SampleAuxInfo version","12980Tusgux","3160ZwXFcU","40030ewyARR","16lkTHRT","1199124lbwxEr","data","105TSrukA","getUint8","12bBEpge","SampleAuxInfo corrupted (postfix not found)","getUint16","error","85265ZYYyUv","buffer","3616548TKdsLX","subarray","byteLength","SampleAuxInfo corrupted"];return(Xn=function(){return t})()}function zn(t,e){const i=jn();return(zn=function(t,e){return i[t-=295]})(t,e)}Gn[Fn(468)]=new Gn(Fn(489)),Gn[Fn(486)]=new Gn(Fn(463)),Gn[Fn(472)]=new Gn(Fn(465)),function(){const t=Zn,e=Xn();for(;;)try{if(x(t(328))/1+-x(t(332))/2*(-x(t(336))/3)+-x(t(338))/4*(-x(t(342))/5)+-x(t(344))/6+-x(t(326))/7*(x(t(333))/8)+x(t(334))/9+x(t(331))/10*(x(t(330))/11)==358550)break;e.push(e.shift())}catch(t){e.push(e.shift())}}(),function(){const t=zn,e=jn();for(;;)try{if(x(t(305))/1*(-x(t(297))/2)+-x(t(295))/3+x(t(310))/4*(x(t(309))/5)+-x(t(304))/6*(x(t(296))/7)+x(t(307))/8*(-x(t(298))/9)+-x(t(301))/10*(x(t(302))/11)+-x(t(300))/12*(-x(t(308))/13)==178039)break;e.push(e.shift())}catch(t){e.push(e.shift())}}();const qn=[];let Yn=null,Kn=0;function jn(){const t=["31476hbBsvr","850RxzAPl","4180KczaCN","push","156MUFuvQ","96571jvhWaB","buffer","26232BkewNd","4303YGAqiP","5yhGpFn","1137036pzCnTd","1035942NcoZLh","94073eTaQjy","2bXtEms","414snfiTE","slice"];return(jn=function(){return t})()}const Qn=ir;function Jn(){const t=["Data does not seem to be UTF-16 encoded!","No init data available!","getElementsByTagName","min","14BFNrBA","keystatuseschange","catch","childNodes","internal-error","Failed to reuse previous EME session: ","output-downscaled","expired","bind","5576688EKOFOG","has","length","License acquisition failed with error ","arrayBuffer","apply","CDM error generating license request: ","<Challenge","No PR challenge data!","then","license","createSession","warn","[PR] License fetched:","text/xml","clRtcDrmDebugLog","push","encode","max","json"," is not ","replace","target","rtcdrmerror","update","fromCharCode","subarray","2993694njpqat","4002692oINhTV","Content-Type","1347492MkzfDC","Data has an incorrect length, must be even.","addEventListener","buffer","onFetch","generateRequest","initData","dispatchEvent","atob","No clear key test key provided!","Challenge","New lic will be requested","oct","BYTES_PER_ELEMENT","sessionId","usable for decryption (status: ","[WV] License fetched:","Key ","5MtuOVr","byteLength","744563CKOUzg","load","floor","error","decode","indexOf","info","isSafari","edef8ba979d64acea3c827dcd51d21ed","mediaKeys","Previous lic will be reused","charCodeAt","licenseUrl","status","Failed to update the session: ","log","keyStatuses","temporary","9a04f07998404286ab92e65be0885f95","output-restricted","nodeValue","btoa","message","EME createSession() failed - no DRM available","5977680uUTwUr","getUint16","[PR] Challenge node not found","A128KW","3974463jrELhf","Failed to update the session","stringify","[EME]","delete","No media keys for media element!","set","2nMQfRz"];return(Jn=function(){return t})()}!function(){const t=ir,e=Jn();for(;;)try{if(-x(t(419))/1*(x(t(454))/2)+x(t(495))/3+x(t(496))/4*(-x(t(417))/5)+-x(t(498))/6*(-x(t(459))/7)+x(t(468))/8+-x(t(447))/9+x(t(443))/10==555073)break;e.push(e.shift())}catch(t){e.push(e.shift())}}();let $n={licenseUrl:"",onFetch:void 0};const tr={},er=(t,e,i)=>(void 0===e&&(e=0),void 0===i&&(i=1/0),((t,e,i)=>{const s=ir,n=j[s(511)];e*=n,i*=n;const r=(a=t)instanceof ArrayBuffer?a:a[ir(501)],o=t[s(418)],h=e;var a;let u=_[s(486)](0,_[s(458)](h,o)),c=_[s(458)](u+_[s(486)](i,0),o);return u/=n,c/=n,new j(r,u,c-u)})(t,e,i));function ir(t,e){const i=Jn();return(ir=function(t,e){return i[t-=417]})(t,e)}const sr=t=>{const e=ir;let i="";for(const s of t){let t=s.toString(16);1==t[e(470)]&&(t="0"+t),i+=t}return i};let nr=null;const rr=t=>{const e=ir;return s[e(440)](String[e(493)][e(473)](null,t))[e(489)](/\+/g,"-")[e(489)](/\//g,"_")[e(489)](/=*$/,"")},or=(t,e)=>{const i=ir,s=(t=>{const e=ir,i=JSON.parse((new TextDecoder)[e(423)](t));if(console[e(434)]("CK license request:",i),null===nr)throw new g(e(507));const s=[];for(const t of i.kids){const i={kty:e(510),alg:e(446),kid:t,k:rr(nr)};s[e(484)](i)}return(new TextEncoder)[e(485)](JSON[e(449)]({keys:s}))})(e.message);e[i(490)][i(492)](s)[i(461)]((function(t){const e=i;console[e(422)](e(448),t)}))},hr=t=>{const e=ir,i=s[e(506)](t[e(489)](/-/g,"+")[e(489)](/_/g,"/")),n=new j(i[e(470)]);for(let t=0;t<i.length;++t)n[t]=i[e(430)](t);return n},ar=function(t,e){for(var i=arguments.length,s=new Array(i>2?i-2:0),n=2;n<i;n++)s[n-2]=arguments[n];return en(void 0,[t,e,...s],void 0,(function*(t,e,i){void 0===i&&(i=!1);const s=ir,n=new Headers(tr);i&&n.append(s(497),s(482));const r={method:"POST",headers:n,body:e},o=yield $n[s(502)]?$n[s(502)](t,r):fetch(t,r);if(!o.ok)throw new g(s(471)+o[s(432)]);return o}))},ur=(t,e)=>{const i=ir;ar($n[i(431)],e[i(441)])[i(477)]((t=>t[i(487)]()))[i(477)]((t=>{const n=i;s[n(483)]&&console.info(n(514),t.license);const r=hr(t[n(478)])[n(501)];e[n(490)][n(492)](r)[n(461)]((t=>{console[n(422)]("Failed to update the session",t)}))}))[i(461)]((e=>{const s=i;t.dispatchEvent(new CustomEvent(s(491),{detail:{message:""+e}})),console[s(422)](e)}))},cr=(t,e)=>{const i=ir,n=((t,e)=>{const i=ir,s=new DOMParser;try{const t=function(t,e,i){void 0===i&&(i=!1);const s=ir;if(!t)return"";let n=t;if(!i&&n.byteLength%2!=0)throw console[s(422)](s(499)),new g(s(455));const r=er(n);let o;if((255===r[0]&&254===r[1]||254===r[0]&&255===r[1])&&(n=r[s(494)](2)),n instanceof ArrayBuffer)o=n;else{const t=new j(n[s(418)]);t[s(453)](er(n)),o=t[s(501)]}const h=_[s(421)](n.byteLength/2),a=new Uint16Array(h),u=new DataView(o);for(let t=0;t<h;t++)a[t]=u[s(444)](2*t,e);return function(t){const e=ir;let i="";for(let s=0;s<t[e(470)];s+=16e3){const n=t[e(494)](s,s+16e3);i+=String[e(493)].apply(null,n)}return i}(a)}(e,!0);if(t[i(424)](i(475))>-1){const e=s.parseFromString(t,i(482))[i(457)](i(508))[0][i(462)][0][i(439)];if(null===e)throw new g("No PR challenge data!");return hr(e)}console[i(480)](i(445))}catch(e){t.dispatchEvent(new CustomEvent(i(491),{detail:{message:""+e}})),console.error(e)}return null})(t,e.message);if(null===n)return t[i(505)](new CustomEvent("rtcdrmerror",{detail:{message:"No PR challenge data!"}})),void console.error(i(476));ar($n[i(431)],n[i(501)],!0)[i(477)]((t=>t[i(472)]()))[i(477)]((n=>{const r=i;s[r(483)]&&console[r(425)](r(481),n),e[r(490)].update(n)[r(461)]((function(e){const i=r;t[i(505)](new CustomEvent(i(491),{detail:{message:i(433)+e}})),console[i(422)](i(448),e)}))}))[i(461)]((e=>{const s=i;t.dispatchEvent(new CustomEvent("rtcdrmerror",{detail:{message:""+e}})),console[s(422)](e)}))},lr=(t,e)=>{const i=ir;ar($n[i(431)],e[i(441)])[i(477)]((t=>{const e=i,n=t.text();return s[e(483)]&&console.info("[FPS] License fetched:",t,n),n}))[i(477)]((t=>{const s=i;e[s(490)][s(492)](hr(t))}))[i(461)]((e=>{const s=i;t.dispatchEvent(new CustomEvent(s(491),{detail:{message:""+e}})),console[s(422)](e)}))},dr=(t,e)=>{tr[t]=e},fr=vn[Qn(426)];let _r=!fr;const vr=new Map;function mr(t){return en(this,void 0,void 0,(function*(){const e=ir;if(null===t[e(504)])throw new g(e(456));const i=t[e(490)];if(null===i)throw new g("No media element available!");const n=i[e(428)];if(null===n)throw new g(e(452));const r=sr(new j(t[e(504)])),o=r+i.id;let h=null;vr[e(469)](o)&&(h=vr.get(o),null!=h&&h.close(),vr[e(451)](o)),s[e(483)]&&console[e(425)](e(450),e(h?429:509));let a=null;try{a=n[e(479)](_r?"persistent-license":"temporary")}catch(t){console[e(434)]("EME createSession(persistent) failed:",t)}if(!a&&_r){_r=!1;try{a=n[e(479)](e(436))}catch(t){console[e(422)]("EME createSession(temporary) failed:",t)}}if(a)if(a[e(500)](e(460),(t=>{const s=e;t[s(490)][s(435)].forEach(((t,e)=>{const n=s;(t===n(466)||t===n(438)||t===n(465)||t===n(463))&&i[n(505)](new CustomEvent(n(491),{detail:{message:n(515)+sr(new j(e))+n(488)+(n(513)+t+")"),keyId:e}}))}))})),fr?a.addEventListener(e(441),lr[e(467)](null,i),!1):-1!==r[e(424)](e(427))?a.addEventListener(e(441),ur[e(467)](null,i),!1):-1!==r[e(424)](e(437))?a[e(500)](e(441),cr[e(467)](null,i),!1):a.addEventListener("message",or[e(467)](null,i),!1),h)try{(yield a[e(420)](h[e(512)]))?vr[e(453)](o,a):i.dispatchEvent(new CustomEvent(e(491),{detail:{message:"Failed to load previous EME session"}}))}catch(t){i[e(505)](new CustomEvent(e(491),{detail:{message:e(464)+t}}))}else a[e(503)](t.initDataType,t[e(504)]).then((()=>{_r&&vr[e(453)](o,a)}))[e(461)]((t=>{const s=e;i[s(505)](new CustomEvent(s(491),{detail:{message:s(474)+t}}))}));else i[e(505)](new CustomEvent(e(491),{detail:{message:e(442)}}))}))}const gr=Vr;function pr(){const t=[" too close to seek, ","fpsCertificateUrl","9880640TWxZrg","H264","ignoreAudio","Unable to create Worker!","createMediaKeys(",", restart required: ","/license-proxy-headerauth/drmtoday/RightsManager.asmx","6236Nwzlef","worker","serverCertificateUrl","serverCertificate","seq",",255]).buffer,idrFrames.push(new Uint8Array([0,0,0,1,39,100,0,13,172,87,5,6,100,0,0,0,1,40,238,60,176,0,0,0,1,37,","ClearKey","No valid DRM config found, call rtcDrmConfigure first.","sessionId","toISOString","indexOf","robustness","isInteger","info","includes","Development","slice","16niaptx"," frame","video/mp4","isArray","Android","end","PlayReady","streamType","1772WtcYWF","]: ","Frame gap: ","nextKeyFrameAllowedTime","use rtcDrmFeedFrame to push frames manually","Error recovery attempted","merchant","FairPlay","requestMediaKeySystemAccess(","pipeThrough","/license-server-fairplay/","isChrome","type","MSE (re)init","const DUMMY_IDR_FRAME_SLICE_HDR0=new Uint8Array([32,0,203]),DUMMY_IDR_FRAME_SLICE_HDR1=new Uint8Array([16,0,50]);","DRM config env value must be one of: ","length","GOP is getting too long, requesting a new key frame","Worker","let brokenFrame=null,idrFrames=[];function initializeDummyFrames(){brokenFrame=new Uint8Array([0,0,0,1,65,154,255","srcObject","RTCRtpScriptTransform","),idrFrames.push(idrFrames[0].slice());let $=new Uint8Array(idrFrames[1]);$.set([16,0,50],27)}let idrPicIdToggle=","now"," to ","join","setServerCertificate","audioCapabilities","lastKeyFrameTime","prevSeqNum"," seeking from ",".experiment","clRtcDrmDebugLog","Server certificate fetch failed with error ","isFirefox","org.w3.clearkey","x-dt-custom-data","jitterBufferTarget","playbackRate","enabled","keyFrameNeeded","createEncodedStreams","wvCertificateUrl","key","sai","Discarding corrupted video frame (too small)",'gle^=1]}function audioTransformFunction($,e){postMessage({streamType:"audio",frame:{timestamp:$.timestamp,data:$.',"H264 is the only supported video codec.","com.microsoft.playready.recommendation"," will be used","DRM config iv must be an instance of 16-byte long Uint8Array.","encryption","0;function generateDummyFrame($){return(brokenFrame||initializeDummyFrames(),$)?brokenFrame:idrFrames[idrPicIdTog","toString","message","status","bytesSinceKey","currentTime","supportsRtpScriptTransform","1585647fRskxG","audioElement","track","sinf","createObjectURL","enqueue","Invalid videoElement, it must be an instance of HTMLVideoElement.","7302558TqFWae","pipeTo","SampleAuxInfo extraction failed (video)","isEdge","keys","not-allowed","rtcdrmerror","btoa","?audioTransformFunction:videoTransformFunction});e.pipeThrough(a).pipeTo(x)}self.RTCTransformEvent&&(self.onrtctr",", a1d1f1 is recommended).","reportDiscontinuity","onFetch","keyId","sessionTypes","). Edge only supports PlayReady, Widevine and ClearKey.","audioEncrypted","audioStartTimestamp","frame","videoStartTimestamp","184,32,0,203,255,38,29,217,24,192,161,96,0,0,12,229,174,166,6,7,20,3,84,0,247,96,193,181,229,128,0,32,32]).buffer","Duplicate/reordered frame, prev seq: ","ClearKey is not supported by Safari.","bind",") not found in [","DRM config robustness can only be one of: ","persistent-license","postMessage","receiver","get","both","jmuxer","Production","Blob","timestamp","cenc","emeConfig","clear","cbcs-1-9","5iKPdqC","isWindows","PlayReady license acquisition might fail without output protection enabled (sessionId is ","). Chrome only supports Widevine and ClearKey.","mediaBufferMs should be an integer.","size","certificate","prLicenseUrl","fpsLicenseUrl","/license-proxy-widevine/cenc/","4572770OAoUlm","BYTES_PER_ELEMENT","then","SW_SECURE_CRYPTO","ansform=$=>{let e=$.transformer;handleTransform(e.options.operation,e.readable,e.writable)}),onmessage=$=>{keyFra","splice","Safari doesn't support 'cenc'/AES-CTR, use 'cbcs' instead if possible.","videoElement","rtcDrmConfigure did not specify audioElement, audio will be dropped",'audio/mp4; codecs="opus"',"object","Invalid audioElement, it must be an instance of HTMLMediaElement.","keyFrameNeededPosted","debugCreateMediaDump","next","play","6591266VeIbXo","userId","jitterBufferDelayHint",'ame(keyFrameNeeded),e.enqueue($)}function handleTransform($,e,x){let a=new TransformStream({transform:"audio"===$',"dispatchEvent","reduce"," bytes, playback at ","offset","arrayBuffer","waitingForIdr","Widevine","DRM config mediaBufferMs should be an integer.","hwSecurity","authToken","audio"," bytes)","push","licenseUrl","Default transform mode enabled, ","RTCRtpScriptTransform/TransformStream will not be created, ","GET","baseUrl","video","trim","7377TdQrIK","3000","playoutDelayHint","catch","fpsCertificate","POSITIVE_INFINITY","/license-server-fairplay/cert/","DRM config:","streams","mediaBufferMs","log","codec","onmessage","Target video element (","Applying pre-configured certificate (","webkitURL","Discarding corrupted video frame (no Annex B startcode)"," requesting a new key frame (latency ","PlayReady might not support '","No target media element!","URL","set","warn","data","config","isSafari","forEach","setMediaKeys","buffered"," - ","keySystem",'data}}),e.enqueue($)}let keyFrameNeeded=!1;function videoTransformFunction($,e){postMessage({streamType:"video",f',"paused","wvCertificate","a1d1f1","2000","keyFrameRequestInterval","Several DRM configs detected, rtcDrmOnTrack have to be called with target DRM config.","error","238HZxcdH","HW_SECURE_ALL","Invalid DRM type (","buffer","x-dt-auth-token","clRtcDrmCreateMediaDump",'rame:{type:$.type,timestamp:$.timestamp,data:$.data}}),"key"===$.type&&(keyFrameNeeded=!1),$.data=generateDummyFr',"addEventListener",") failed","keyFrameLogCntr","feed","byteLength","kind","purchase","environment","videoCapabilities","requestMediaKeySystemAccess","temporary","). It has to be a string containing a JWT.","value",".. ","string"];return(pr=function(){return t})()}!function(){const t=Vr,e=pr();for(;;)try{if(x(t(543))/1*(x(t(512))/2)+x(t(473))/3*(x(t(568))/4)+-x(t(672))/5*(-x(t(634))/6)+-x(t(536))/7+x(t(560))/8*(x(t(627))/9)+-x(t(682))/10+-x(t(449))/11==932877)break;e.push(e.shift())}catch(t){e.push(e.shift())}}();const wr=vn[gr(626)],yr=vn[gr(602)],br=vn[gr(498)],Ar=vn[gr(637)],Sr=vn[gr(579)],Tr=vn.platform,kr=vn[gr(673)],Er=Ar||Sr&&Tr===gr(564),xr=1e6*(yr?82:br?220:120),Rr=yr?5e3:2e3,Ir=yr?1.5:.5;function Cr(t){const e=gr;return typeof t!==e(692)||null===t||t instanceof Element||t instanceof Gn?t:function(t){const e=gr;return!!((null==t?void 0:t[e(515)])instanceof ArrayBuffer&&null!=t&&t[e(683)])}(t)?t[e(559)]():Array[e(563)](t)?t[e(454)](((t,e,i)=>(t[i]=Cr(e),t)),[]):t instanceof w?w[e(638)](t)[e(454)](((e,i)=>(e[i]=Cr(t[i]),e)),{}):t}class Pr{constructor(t){const e=gr;this[e(545)]="",this.licenseUrl="",this[e(503)]="",this[e(669)]=[],this[e(497)]=Cr(t),this[e(664)]=null,this[e(521)]=0,this[e(571)]=Date.now(),this.videoStartTimestamp=0,this.audioStartTimestamp=0,this.prevSeqNum=-1,this[e(596)]=0,this[e(624)]=0,this.keyFrameNeeded=!0,this.keyFrameNeededPosted=!1,this.keyFrameRequestInterval=Rr,this.worker=null}}const Dr=new Map,Nr=new j([60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60]),Mr=new j([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1]),Lr=new j([213,251,214,184,46,217,62,78,249,138,228,9,49,238,51,183]);function Br(t){const e=gr;let i=!1;if((t[e(497)].video&&"clear"!==t[e(497)].video[e(619)]&&"HW"===t.config[e(471)][e(554)]||t[e(497)][e(463)]&&t[e(497)][e(463)].encryption!==e(670)&&"HW"===t[e(497)][e(463)][e(554)])&&(i=!0),t.hwSecurity=i,function(t,e){const i=gr;void 0!==e&&(t[i(497)][i(482)]=e),(void 0===t[i(497)][i(482)]||t[i(497)].mediaBufferMs<0)&&(t.config[i(482)]=100,yr?t[i(497)][i(482)]=350:!br&&kr&&(t[i(497)][i(580)]===i(566)||t[i(461)])&&(t[i(497)][i(482)]=1400))}(t,t[e(497)][e(482)]),void 0===t.config.authToken){void 0===t.config[e(450)]&&(t[e(497)][e(450)]=e(525)),void 0===t[e(497)][e(551)]&&(t.config[e(551)]=e(507));const i=s[e(641)](JSON.stringify({userId:t.config[e(450)],sessionId:t[e(497)][e(551)],merchant:t.config[e(574)]}));dr(e(604),i)}else dr(e(516),t.config[e(462)]);for(const i of[t[e(497)].audio,t[e(497)][e(471)]])i&&i[e(619)]!==e(670)&&(i[e(646)]||(i[e(646)]=Mr),i.iv||(i.iv=Lr));t[e(546)]=void 0,t[e(545)]="",t[e(466)]="";const n=t.config[e(526)][e(470)]();var r;if(t[e(497)][e(580)]===e(549)?(t.keySystem=e(603),nr=Nr):t.config.type===e(459)?(t[e(503)]="com.widevine.alpha",kr&&i&&(t[e(503)]+=e(599)),t.config.wvCertificate?t[e(546)]=t[e(497)][e(506)]:t[e(497)][e(610)]?t[e(545)]=t[e(497)][e(610)]:t[e(546)]=t.config[e(526)][e(678)](),t.config.wvLicenseUrl?t[e(466)]=t[e(497)].wvLicenseUrl:t[e(466)]=n+e(681)):t[e(497)][e(580)]===e(566)?(t[e(503)]=e(616),t[e(497)][e(679)]?t.licenseUrl=t[e(497)][e(679)]:t[e(466)]=n+e(542)):t[e(497)].type===e(575)&&(t.keySystem="com.apple.fps",t.config[e(477)]?t[e(546)]=t[e(497)][e(477)]:t[e(497)][e(535)]?t.serverCertificateUrl=t.config[e(535)]:t[e(545)]=n+e(479)+t[e(497)].merchant,t[e(497)][e(680)]?t[e(466)]=t.config.fpsLicenseUrl:t.licenseUrl=n+e(578)),r={licenseUrl:t[e(466)],onFetch:t.config[e(645)]},$n=r,t[e(669)]=[],t.config[e(580)]!==e(575)){t[e(669)][e(465)]({initDataTypes:[e(668)],sessionTypes:["persistent-license",e(529)]});for(const i of[t[e(497)][e(471)],t[e(497)][e(463)]])if(i&&i.encryption!==e(670)){const s=i==t[e(497)][e(471)]?e(471):e(463);let n;t[e(497)][e(580)]===e(459)?n="HW"===i[e(554)]?e(513):e(685):"PlayReady"===t[e(497)][e(580)]&&(n="HW"===i.robustness?e(474):e(508)),s===e(471)?t[e(669)][0][e(527)]=[{contentType:'video/mp4; codecs="avc1.640032"',encryptionScheme:"cenc"===i[e(619)]?e(668):"cbcs-1-9",robustness:n||void 0}]:t[e(669)][0][e(595)]=[{contentType:e(691),encryptionScheme:i[e(619)]===e(668)?"cenc":e(671),robustness:n||void 0}]}}else t[e(669)]=[{initDataTypes:[e(630)],videoCapabilities:[{contentType:e(562),robustness:""}],distinctiveIdentifier:"not-allowed",persistentState:e(639),sessionTypes:["temporary"]}];s[e(600)]&&console.info(e(480),t)}function Or(t){const e=gr;s[e(600)]&&console[e(556)](e(581));let i=t[e(497)].videoElement;(!t[e(497)][e(471)]||t.config[e(471)][e(619)]===e(670))&&(i=t.config.audioElement),t[e(664)]=null;const n=!t.ignoreAudio&&t[e(497)][e(463)]&&"clear"!==t[e(497)].audio[e(619)],r=t[e(497)][e(471)]&&t.config.video[e(619)]!==e(670);t[e(624)]=0,t[e(608)]=!0,t.keyFrameNeededPosted=!1,t[e(509)]=Rr,t[e(652)]=0,t[e(650)]=0,t[e(597)]=-1,t[e(596)]=0,t.jmuxer=new Ln({node:i,mode:n?e(r?663:463):"video",fps:60,drm:t}),br&&t[e(497)].videoElement&&t[e(497)][e(689)][e(448)]()[e(684)]((()=>{}))[e(476)]((()=>{}))}function Fr(t,e,i){const n=gr;if(t[n(497)][n(471)]&&"clear"===t.config[n(471)][n(619)])return null==i||i[n(632)](e),!1;const r=Date[n(591)]();if(e.type===n(611)){const i=s[n(600)];++t[n(521)]<(i?Number[n(478)]:5)&&(console[n(556)]((new Date)[n(552)]().slice(11,-1)+" "+e[n(580)]+", "+(e[n(496)].byteLength+n(455)+t[n(497)][n(689)][n(625)])),i&&1===t[n(521)]&&function(t,e,i){void 0===e&&(e=64),void 0===i&&(i=64);const s=gr,n=new j(t[s(496)]);let r="",o=0;for(let t=0;t<e&&t<n[s(584)];++t)r+=(n[t]<16?"0":"")+n[t].toString(16)+" ";if(o<n[s(584)])for(o<n[s(584)]-i&&(r+=s(532),o=n[s(584)]-i);o<n[s(584)];o++)r+=(n[o]<16?"0":"")+n[o][s(621)](16)+" ";console.info("["+((t[s(580)]||s(463))+s(561))+s(569)+r[s(472)]())}(e,128,8)),t[n(608)]=!1,t[n(624)]=0,t[n(571)]=r+t[n(509)]}return t[n(624)]+=e.data[n(523)],!t[n(608)]&&t[n(624)]>xr&&(console[n(556)](n(585)),t[n(608)]=!0),t.jmuxer&&(function(t,e){const i=gr;0===t[i(652)]&&(t[i(652)]=e[i(667)],t[i(509)]=Rr,t[i(571)]=Date[i(591)]()+2e3);let n=null,r=!1;if(e.data[i(523)]<=4)console[i(495)](i(613)),r=!0;else{const s=new j(e[i(496)],0,4);0!=s[0]||0!=s[1]||0!=s[2]||1!=s[3]?(console[i(495)](i(489)),r=!0):(n=function(t,e){const i=Zn,s=new DataView(t[i(335)]),n=t.data[i(346)]-2,r=s[i(340)](n);if(r<n){let t=n-r;if(69!==s[i(337)](n-1))return console[i(341)](i(339)),null;if(s.getUint8(t++)>>>4!=1)return console[i(341)](i(329)),null;const o=new j(r-2);let h=0,a=0;for(;t<n-1;){let e=s.getUint8(t++);a>1&&3===e&&(a=0,e=s.getUint8(t++)),0!==e?a=0:++a,o[h++]=e}const u=new DataView(o[i(343)]),c=e===i(327)?16:0,l=c+2+6*u.getUint16(c);return l+2>h?(console.error(i(325)),null):{sai:o[i(345)](0,l),offset:n-r,seq:u.getUint16(l)}}return null}(e,t[i(497)][i(471)][i(619)]),!n&&(console.warn(i(636)),r=!0))}if(n)if(-1===t[i(597)]){if(e[i(580)]!==i(611))return 0;t[i(597)]=n[i(547)]}else{let o=n.seq-t[i(597)];if(o<-32767&&(o+=65536),o<=0)return s[i(600)]&&console[i(495)](i(654)+t[i(597)]+", curr: "+n[i(547)]),0;o>1&&(r=e[i(580)]!==i(611),console[i(495)](i(570)+t[i(597)]+i(502)+n[i(547)]+i(541)+r)),t.prevSeqNum=n[i(547)]}let o=0;r&&!t[i(664)][i(458)]&&(o=-1,t[i(664)][i(644)]());const h=(e[i(667)]-t[i(652)])/9e4;return n&&t[i(664)][i(522)]({video:new j(e.data,0,n[i(456)]),videoSampleAuxInfo:n[i(612)],timestamp:h})<0&&(o=-1,console[i(495)](i(573)),Or(t)),o>=0&&"key"===e[i(580)]&&(t[i(596)]=h,console[i(483)]((new Date)[i(552)]()[i(559)](11,-1)+" kf at "+h+", playback at "+t[i(497)].videoElement[i(625)])),o}(t,e)<0?t[n(608)]=!0:function(t){const e=gr,i=t.config[e(689)];if(!i||i[e(501)][e(584)]<1||i[e(505)]||i[e(625)]<Ir)return;const n=t[e(497)].mediaBufferMs;if(void 0===n||n<0)throw new g("targetLatency not set!");const r=i[e(501)][e(565)](i[e(501)][e(584)]-1),o=1e3*(r-i[e(625)])|0;if(!t[e(649)]&&function(t,e,i){const s=gr;let n;n=e<3*i>>>2?.875:e<=i?1:e<7*i>>>2?1.125:e<9*i>>>2?1.25:e<11*i>>>2?1.375:1.5,n!==t.playbackRate&&(t[s(606)]=n)}(i,o,n),!(o<n+50||o<5*n>>>2))if(t.lastKeyFrameTime>i[e(625)]+.1){const o=1e3*(r-t[e(596)])|0;o>40&&o>n-100?(s[e(600)]&&console.info((new Date).toISOString().slice(11,-1)+e(598)+(i[e(625)]+e(592)+t[e(596)]+" (")+(t.lastKeyFrameTime-i[e(625)])+")"),i[e(625)]=t[e(596)]):console[e(483)]((new Date)[e(552)]().slice(11,-1)+e(534)+o)}else!t[e(608)]&&Date[e(591)]()>t[e(571)]&&o>n+100&&o>3*n>>>1&&(s[e(600)]&&console[e(556)]((new Date).toISOString()[e(559)](11,-1)+e(490)+o+" ms)"),t[e(608)]=!0,t[e(509)]<16e3&&(t[e(509)]<<=1))}(t)),i?(!t[n(608)]||!Er)&&(e[n(496)]=function(t){return!Yn&&function(){const t=zn;Yn=new j([0,0,0,1,65,154,255,255]).buffer,qn[t(303)](new j([0,0,0,1,39,100,0,13,172,87,5,6,100,0,0,0,1,40,238,60,176,0,0,0,1,37,184,32,0,203,255,38,29,217,24,192,161,96,0,0,12,229,174,166,6,7,20,3,84,0,247,96,193,181,229,128,0,32,32])[t(306)]),qn[t(303)](qn[0][t(299)](0)),new j(qn[1]).set([16,0,50],27)}(),t?Yn:(Kn^=1,qn[Kn])}(t[n(608)]),i[n(632)](e)):t[n(608)]!=t[n(445)]&&(t.worker&&t[n(544)][n(660)](t[n(608)]),t[n(445)]=t[n(608)]),t[n(608)]}function Vr(t,e){const i=pr();return(Vr=function(t,e){return i[t-=445]})(t,e)}function Wr(t,e,i){const s=gr;return t[s(497)][s(463)]&&t[s(497)].audio[s(619)]!==s(670)?e[s(496)][s(523)]>0&&function(t,e){const i=gr;var s;if(!t.jmuxer||t[i(538)])return 0;0===t[i(650)]&&(t[i(650)]=e[i(667)]);const n=(e[i(667)]-t.audioStartTimestamp)/48e3;if("cbcs"===(null===(s=t.config[i(463)])||void 0===s?void 0:s[i(619)]))return t[i(664)][i(522)]({audio:new j(e[i(496)]),timestamp:n});const r=function(t){const e=Zn,i=new DataView(t.data),s=t.data[e(346)]-2,n=i.getUint16(s);if(n<s){let t=s-n;if(69!==i[e(337)](s-1))return console[e(341)](e(339)),null;if(i[e(337)](t++)>>>4!=1)return console[e(341)](e(329)),null;const r=new j(n-2);let o=0;for(;t<s-1;){const s=i[e(337)](t++);if(r[o++]=s,o>=16)break}return{sai:r,offset:s-n}}return null}(e);r?t[i(664)][i(522)]({audio:new j(e[i(496)],0,r[i(456)]),audioSampleAuxInfo:r[i(612)],timestamp:n}):console[i(511)]("SampleAuxInfo extraction failed (audio)")}(t,e):i&&i[s(632)](e),!1}function Ur(t){const e=gr;if(!t||typeof t!==e(692))throw new b("Invalid config argument type, DRM config must be an object.");if(!(t[e(689)]instanceof HTMLVideoElement))throw new b(e(633));if(t[e(628)]&&!(t.audioElement instanceof HTMLMediaElement))throw new b(e(693));if(void 0!==t[e(482)]&&!Number[e(555)](t[e(482)]))throw new b(e(460));let i=!1,n=!1,r=!1;const o=["cbcs",e(668),e(670)],h=["SW","HW"];for(const s of[t[e(471)],t[e(463)]])if(s){if(!o[e(557)](s[e(619)]))throw new RangeError("DRM config encryption value must be one of: "+o[e(593)](", "));if(br&&"cenc"===s.encryption)throw new RangeError(e(688));if(s[e(619)]!==e(670)){if(n=!0,s.keyId){if(!(s[e(646)]instanceof j)||16!==s.keyId[e(584)])throw new b("DRM config keyId must be an instance of 16-byte long Uint8Array.");r=!0}else if(br)throw new ReferenceError(e(655));if(s.iv&&(!(s.iv instanceof j)||16!==s.iv.length))throw new b(e(618));if(s[e(554)]&&!h[e(557)](s.robustness))throw new RangeError(e(658)+h[e(593)](", "));if(s===t[e(471)]&&s[e(484)]!==e(537))throw new RangeError(e(615));br&&s===t.audio&&"opus"===s.codec&&(i=!0,console.warn("Safari does not support Opus, audio will not be rendered.")),"PlayReady"===t[e(580)]&&(s[e(619)]!==e(668)&&console[e(495)](e(491)+s[e(619)]+"', it's safer to use 'cbcs' instead."),void 0===t.sessionId||t.sessionId[e(557)]("f1")||console.warn(e(674)+t.sessionId+e(643)))}}if(n){const i=[Gn[e(558)],Gn.Staging,Gn[e(665)]];if(!i.includes(t[e(526)]))throw new RangeError(e(583)+i.join(", "));if(t[e(462)]&&typeof t[e(462)]!==e(533))throw new b("Invalid authToken type ("+typeof t[e(462)]+e(530));if(t.type)if(br){if(t[e(580)]!==e(575))throw new RangeError(e(514)+t[e(580)]+"). Safari only supports FairPlay.")}else if(Sr){if(t.type!==e(459)&&"ClearKey"!==t[e(580)])throw new RangeError("Invalid DRM type ("+t.type+e(675))}else if(Ar&&t[e(580)]!==e(566)&&"Widevine"!==t[e(580)]&&"ClearKey"!==t[e(580)])throw new RangeError(e(514)+t.type+e(648))}void 0!==t.debugLog&&(s[e(600)]=t.debugLog),void 0!==t[e(446)]&&(s[e(517)]=t[e(446)]);let a=Dr.get(t[e(689)]);!a&&(a=new Pr(t),Dr[e(494)](t[e(689)],a)),a.enabled=n,a[e(538)]=i,a[e(649)]=!i&&a[e(497)][e(463)]&&a[e(497)].audio.encryption!==e(670),n&&(a[e(497)].type||(a[e(497)][e(580)]=e(br?575:459)),r||a[e(497)][e(580)]===e(549)||(a[e(497)][e(580)]=e(549)),Br(a),function(t){en(this,void 0,void 0,(function*(){const e=Vr;var i,n;let r=t[e(497)][e(689)];if((!t[e(497)][e(471)]||t[e(497)][e(471)].encryption===e(670))&&(r=t[e(497)][e(628)]),!r)throw new g(e(492));r.src="",r[e(588)]=null,yield r.setMediaKeys(null);let o=null;try{o=yield Ll[e(528)](t[e(503)],t.emeConfig)}catch(t){}if(!o&&t[e(669)][0]){const s=null===(i=t[e(669)][0][e(647)])||void 0===i?void 0:i[e(553)](e(659));if(void 0!==s&&s>=0){null===(n=t.emeConfig[0].sessionTypes)||void 0===n||n[e(687)](s,1);try{o=yield Ll[e(528)](t[e(503)],t[e(669)])}catch(t){}}}if(!o){const i=e(576)+t[e(503)]+e(520);return r.dispatchEvent(new CustomEvent(e(640),{detail:{message:i}})),void console[e(511)](i)}let h=null;try{h=yield o.createMediaKeys()}catch(t){}if(!h){const i=e(540)+t[e(503)]+e(520);return r[e(453)](new CustomEvent("rtcdrmerror",{detail:{message:i}})),void console[e(511)](i)}if(t.serverCertificate)s.clRtcDrmDebugLog&&console[e(556)](e(487)+t[e(546)][e(523)]+e(464)),yield h[e(594)](t[e(546)]);else if(t.serverCertificateUrl){const i={method:e(469)},n=t.serverCertificateUrl;try{const o=yield t[e(497)].onFetch?t.config[e(645)](n,i):fetch(n,i);if(!o.ok){const t=e(601)+o[e(623)];return void r[e(453)](new CustomEvent(e(640),{detail:{message:t}}))}const a=yield o[e(457)]();s.clRtcDrmDebugLog&&console[e(556)]("Fetched certificate from "+n+", "+a[e(523)]+" bytes"),yield h[e(594)](a)}catch(t){const i=t.name+": "+t[e(622)];return console.error(i),void r[e(453)](new CustomEvent(e(640),{detail:{message:i}}))}}yield r[e(500)](h),r[e(519)]("encrypted",mr),Or(t)}))}(a)),a[e(497)][e(689)][e(519)](e(448),(function(){const t=e;a[t(497)][t(689)][t(625)]>.5&&(a[t(571)]=Date.now())}))}const Gr=gr(582)+gr(587)+gr(548)+gr(653)+gr(590)+gr(620)+gr(614)+gr(504)+gr(518)+gr(452)+gr(642)+gr(686)+"meNeeded=$.data};";function Hr(t){const e=gr;if(0===Dr[e(677)])throw new b(e(550));let i;if(t&&t[e(689)])i=t[e(689)];else{if(1!==Dr.size)throw new b(e(510));i=Dr[e(638)]()[e(447)]()[e(531)]}const s=Dr[e(662)](i);if(!s){let t="";throw Dr[e(499)](((e,i)=>{t+=i.id+", "})),t=t.slice(0,-2),new b(e(486)+i.id+e(657)+t+"]")}return s}function Zr(t,e){const i=gr;if(t&&t[i(497)][i(689)]){const s=t[i(497)][i(689)];if(s[i(501)].length>0){const t=s.buffered[i(565)](s[i(501)][i(584)]-1)-s[i(625)];e.playoutDelayHint=e.jitterBufferDelayHint=e.jitterBufferTarget=t}u(Zr,1e3,t,e)}}const Xr=at.get("View");Xr.setLevel(at.DEBUG);const zr={metadata:!1,enableDRM:!1,disableVideo:!1,disableAudio:!1,peerConfig:{autoInitStats:!0,statsIntervalMs:1e3}};t.Director=Ps,t.Logger=at,t.PeerConnection=rs,t.Publish=class extends Zs{async connect(t){void 0===t&&(t=Js);const e=Gs.object({sourceId:Gs.string(),stereo:Gs.boolean(),dtx:Gs.boolean(),absCaptureTime:Gs.boolean(),dependencyDescriptor:Gs.boolean(),mediaStream:Gs.alternatives().try(Gs.array().items(Gs.object()),Gs.object()),bandwidth:Gs.number(),metadata:Gs.boolean(),disableVideo:Gs.boolean(),disableAudio:Gs.boolean(),codec:Gs.string().valid(...w.values(Ji)),simulcast:Gs.boolean(),scalabilityMode:Gs.string(),peerConfig:Gs.object(),record:Gs.boolean(),events:Gs.array().items(Gs.string().valid("active","inactive","viewercount")),priority:Gs.number()}),{error:i,value:s}=e.validate(t);i&&Qs.warn(i,s),this.options=v(d(d({},Js),t),{peerConfig:d(d({},Js.peerConfig),t.peerConfig),setSDPToPeer:!1}),this.options.metadata=this.options.metadata&&this.options.codec===Ji.H264&&!this.options.disableVideo,await this.initConnection({migrate:!1})}async reconnect(t){var e,i;this.options.mediaStream=null!=(i=null==(e=this.webRTCPeer)?void 0:e.getTracks())?i:this.options.mediaStream,super.reconnect(t)}async replaceConnection(){var t,e;Qs.info("Migrating current connection"),this.options.mediaStream=null!=(e=null==(t=this.webRTCPeer)?void 0:t.getTracks())?e:this.options.mediaStream,await this.initConnection({migrate:!0})}async record(){var t;this.recordingAvailable?(this.options.record=!0,await(null==(t=this.signaling)?void 0:t.cmd("record")),Qs.info("Broadcaster start recording")):Qs.error("Record not available")}async unrecord(){var t;this.recordingAvailable?(this.options.record=!1,await(null==(t=this.signaling)?void 0:t.cmd("unrecord")),Qs.info("Broadcaster stop recording")):Qs.error("Unrecord not available")}stop(){var t;super.stop(),null==(t=this.worker)||t.terminate(),this.worker=null}async initConnection(t){var e,i;let s,n;if(Qs.debug("Broadcast option values: ",this.options),this.stopReconnection=!1,!this.options.mediaStream)throw Qs.error("Error while broadcasting. MediaStream required"),new g("MediaStream required");if(!t.migrate&&this.isActive())throw Qs.warn("Broadcast currently working"),new g("Broadcast currently working");try{n=await this.tokenGenerator(),this.options.peerConfig.iceServers=null==n?void 0:n.iceServers,this.options.peerConfig.encodedInsertableStreams=this.options.metadata}catch(t){throw Qs.error("Error generating token."),t instanceof Es&&(401!==t.status&&this.autoReconnect?this.reconnect():this.stopReconnection=!0),t}if(!n)throw Qs.error("Error while broadcasting. Publisher data required"),new g("Publisher data required");const r=Fs(n.jwt);if(this.streamName=r.millicast.streamName,this.recordingAvailable=r[Ws.atob("bWlsbGljYXN0")].record,this.options.record&&!this.recordingAvailable)throw Qs.error("Error while broadcasting. Record option detected but recording is not available"),new g("Record option detected but recording is not available");const o=new Ss({streamName:this.streamName,url:"".concat(n.urls[0],"?token=").concat(n.jwt)}),h=t.migrate?new rs:this.webRTCPeer;await h.createRTCPeer(this.options.peerConfig,es),null==(e=this.stopReemitingWebRTCPeerInstanceEvents)||e.call(this),null==(i=this.stopReemitingSignalingInstanceEvents)||i.call(this),this.stopReemitingWebRTCPeerInstanceEvents=Pt(h,this,[ss.connectionStateChange]),this.stopReemitingSignalingInstanceEvents=Pt(o,this,[As]);const a=h.getRTCLocalSDP(this.options),u=o.connect();s=await Promise.all([a,u]);const c=s[0];this.options.metadata&&(this.worker||(this.worker=new js),this.getRTCPeerConnection().getSenders().forEach((t=>{if(qs)t.transform=new RTCRtpScriptTransform(this.worker,{name:"senderTransform",codec:this.options.codec});else if(zs){const{readable:e,writable:i}=t.createEncodedStreams();this.worker.postMessage({action:"insertable-streams-sender",codec:this.options.codec,readable:e,writable:i},[e,i])}})));let l=this.signaling;this.signaling=o;const d=this.signaling.publish(c,this.options),f=h.peer.setLocalDescription(h.sessionDescription);s=await Promise.all([d,f]);let _=s[0];!this.options.disableVideo&&this.options.bandwidth>0&&(_=h.updateBandwidthRestriction(_,this.options.bandwidth)),await h.setRTCRemoteSDP(_),Qs.info("Broadcasting to streamName: ",this.streamName);let v=this.webRTCPeer;this.webRTCPeer=h,this.setReconnect(),t.migrate&&this.webRTCPeer.on(ss.connectionStateChange,(t=>{var e,i;["connected","disconnected","failed","closed"].includes(t)&&(null==(e=null==l?void 0:l.close)||e.call(l),null==(i=null==v?void 0:v.closeRTCPeer)||i.call(v),l=v=null)}))}sendMetadata(t,e){var i;if(void 0===e&&(e="d40e38ea-d419-4c62-94ed-20ac37b4e4fa"),null!=(i=this.options)&&i.metadata&&this.worker)this.worker.postMessage({action:"metadata-sei-user-data-unregistered",uuid:e,payload:t});else{let t="Could not send metadata due to:";this.options?this.options.metadata?this.worker||(t+="\n- Stream not being published."):(t+="\n- Metadata option is not enabled.",this.options.codec!==Ji.H264&&(t+="\n- Incompatible codec. Only H264 available."),this.options.disableVideo&&(t+="\n- Video disabled.")):t+="\n- Stream not being published.",Qs.warn(t)}}constructor(t,e,i=!0){t&&Qs.warn("The streamName property has been deprecated. In a future release, this will be removed. Please do not rely on this value. Instead, set via token generator"),super(null,e,Qs,i)}},t.Signaling=Ss,t.View=class extends Zs{async connect(t){void 0===t&&(t=zr),this.options=v(d(d({},zr),t),{peerConfig:d(d({},zr.peerConfig),t.peerConfig),setSDPToPeer:!1}),this.eventQueue.length=0,await this.initConnection({migrate:!1})}async select(t){void 0===t&&(t={}),Xr.debug("Viewer select layer values: ",t),await this.signaling.cmd("select",{layer:t}),Xr.info("Connected to streamName: ",this.streamName)}async addRemoteTrack(t,e){Xr.info("Viewer adding remote track",t);const i=await this.webRTCPeer.addRemoteTrack(t,e);for(const t of e)t.addTrack(i.receiver.track);return i}async project(t,e){for(const t of e){if(!t.trackId&&!t.media)throw Xr.error("Error in projection mapping, trackId or mediaId must be set"),new g("Error in projection mapping, trackId or mediaId must be set");const e=this.webRTCPeer.getRTCPeer();if(t.mediaId&&!e.getTransceivers().find((e=>e.mid===t.mediaId.toString())))throw Xr.error("Error in projection mapping, ".concat(t.mediaId," mid not found in local transceivers")),new g("Error in projection mapping, ".concat(t.mediaId," mid not found in local transceivers"))}Xr.debug("Viewer project source: layer mappings: ",t,e),await this.signaling.cmd("project",{sourceId:t,mapping:e}),Xr.info("Projection done")}async unproject(t){Xr.debug("Viewer unproject mediaIds: ",t),await this.signaling.cmd("unproject",{mediaIds:t}),Xr.info("Unprojection done")}async replaceConnection(){Xr.info("Migrating current connection"),await this.initConnection({migrate:!0})}stop(){var t,e;super.stop(),null==(t=this.drmOptionsMap)||t.clear(),this.DRMProfile=null,null==(e=this.worker)||e.terminate(),this.worker=null,this.payloadTypeCodec={},this.tracksMidValues={},this.eventQueue.length=0}async initConnection(t){var e;let i,s;if(Xr.debug("Viewer connect options values: ",this.options),this.stopReconnection=!1,!t.migrate&&this.isActive())throw Xr.warn("Viewer currently subscribed"),new g("Viewer currently subscribed");try{s=await this.tokenGenerator(),this.options.peerConfig.iceServers=null==s?void 0:s.iceServers,this.options.peerConfig.encodedInsertableStreams=zs&&(this.options.enableDRM||this.options.metadata)}catch(t){throw Xr.error("Error generating token."),t instanceof Es&&(401!==t.status&&this.autoReconnect?this.reconnect():this.stopReconnection=!0),t}if(!s)throw Xr.error("Error while subscribing. Subscriber data required"),new g("Subscriber data required");const n=Fs(s.jwt);this.streamName=n.millicast.streamName;const r=new Ss({streamName:this.streamName,url:"".concat(s.urls[0],"?token=").concat(s.jwt)});s.subscriberToken&&(this.subscriberToken=s.subscriberToken);const o=t.migrate?new rs:this.webRTCPeer;await o.createRTCPeer(this.options.peerConfig),null==(e=this.stopReemitingWebRTCPeerInstanceEvents)||e.call(this),this.stopReemitingWebRTCPeerInstanceEvents=Pt(o,this,w.values(ss).filter((t=>t!==ss.track))),this.options.metadata&&(this.worker||(this.worker=new js),this.worker.onmessage=t=>{if("metadata"===t.data.event){const e=new TextDecoder,i=t.data.metadata;if(i.mid=t.data.mid,i.track=this.tracksMidValues[t.data.mid],i.uuid){const t=i.uuid;i.uuid=t.reduce(((t,e)=>t+e.toString(16).padStart(2,"0")),""),i.uuid=i.uuid.replace(/(.{8})(.{4})(.{4})(.{4})(.{12})/,"$1-$2-$3-$4-$5")}if(i.timecode&&(i.timecode=new Date(e.decode(i.timecode))),i.unregistered){const t=e.decode(i.unregistered);try{const e=JSON.parse(t);i.unregistered=e}catch(t){Xr.info("The content could not be converted to JSON, returning raw bytes instead")}}this.emit("metadata",i),this.emit("onMetadata",i)}}),o.on(ss.track,(t=>{this.isMainStreamActive?this.onTrackEvent(t):this.eventQueue.push(t)})),r.on(As,(async t=>{if(this.isMainStreamActive||"active"!==t.name)"inactive"===t.name&&this.isMainStreamActive&&this.mainSourceId===t.data.sourceId&&(this.isMainStreamActive=!1),this.emit(As,t);else{if(this.mainSourceId=t.data.sourceId,!this.DRMProfile&&t.data.encryption){const t=await this.tokenGenerator();t.drmObject&&(this.DRMProfile=t.drmObject)}for(this.emit(As,t),this.isMainStreamActive=!0;this.eventQueue.length>0;)this.onTrackEvent(this.eventQueue.shift())}}));const h=o.getRTCLocalSDP(v(d({},this.options),{stereo:!0})),a=r.connect();i=await Promise.all([h,a]);const c=i[0];let l=this.signaling;this.signaling=r;const f=this.signaling.subscribe(c,v(d({},this.options),{vad:this.options.multiplexedAudioTracks>0})),_=o.peer.setLocalDescription(o.sessionDescription);i=await Promise.all([f,_]);const m=i[0];this.payloadTypeCodec=ji.getCodecPayloadType(m),await o.setRTCRemoteSDP(m),Xr.info("Connected to streamName: ",this.streamName);let p=this.webRTCPeer;this.webRTCPeer=o,this.setReconnect(),t.migrate&&this.webRTCPeer.on(ss.connectionStateChange,(t=>{var e,i;"connected"===t?u((()=>{var t,e;null==(t=null==l?void 0:l.close)||t.call(l),null==(e=null==p?void 0:p.closeRTCPeer)||e.call(p),l=p=null,Xr.info("Current connection migrated")}),1e3):["disconnected","failed","closed"].includes(t)&&(null==(e=null==l?void 0:l.close)||e.call(l),null==(i=null==p?void 0:p.closeRTCPeer)||i.call(p),l=p=null)}))}onTrackEvent(t){var e,i,n;if(this.tracksMidValues[null==(e=t.transceiver)?void 0:e.mid]=t.track,this.isDRMOn){const e=t.transceiver.mid,i=this.getDRMConfiguration(e);try{!function(t,e){const i=gr;var n,r;const o=t[i(629)][i(524)];"video"===o&&(t[i(661)][i(475)]=t[i(661)][i(451)]=t[i(661)][i(605)]=0);const h=Hr(e),a=h[i(497)].videoElement,u=h[i(497)][i(628)];if(h[i(607)]){if(h[i(497)].customTransform)s.clRtcDrmDebugLog&&console[i(556)](i(468)+i(572));else if(s[i(600)]&&console[i(556)](i(467)+(i(wr?589:609)+i(617))),wr){if(h[i(544)]=function(t){const e=gr,i=s[e(493)]||s[e(488)],n=s[e(666)],r=s[e(586)];if(!(i&&n&&r&&t))return null;const o=new n([t]);return new r(i[e(631)](o))}(Gr),null==h[i(544)])throw new g(i(539));h[i(544)][i(485)]=t=>{const e=i;t[e(496)][e(567)]===e(471)?Fr(h,t[e(496)].frame,null):Wr(h,t[e(496)][e(651)],null)},t[i(661)].transform=new RTCRtpScriptTransform(h.worker,{operation:o})}else{const e=o===i(471)?Fr:Wr,s={drm:h,transform:(t,i)=>{e(h,t,i)}},n=t.receiver.createEncodedStreams(),r=new TransformStream({transform:s.transform[i(656)](s)}),{readable:a,writable:u}=n;a[i(577)](r)[i(635)](u)}if("audio"===o&&(null===(n=h[i(497)][i(463)])||void 0===n?void 0:n.encryption)===i(670)){if(!u)return void console.warn(i(690));u[i(588)]!==t[i(481)][0]&&(u[i(588)]=t[i(481)][0]),h[i(497)].videoElement&&(t[i(661)][i(475)]=t[i(661)].jitterBufferDelayHint=t[i(661)][i(605)]=h[i(497)][i(482)],Zr(h,t[i(661)]))}else"video"===o&&"clear"===(null===(r=h.config[i(471)])||void 0===r?void 0:r[i(619)])&&a[i(588)]!==t[i(481)][0]&&(a.srcObject=t.streams[0])}else a[i(588)]!==t[i(481)][0]&&(a.srcObject=t[i(481)][0])}(t,i)}catch(t){Xr.error("Failed to apply DRM on media Id:",e,"error is: ",t),this.emit("error",new g("Failed to apply DRM on media Id: "+e+" error is: "+t))}this.worker||(this.worker=new js),this.worker.addEventListener("message",(t=>{"complete"===t.data.event&&function(t,e,i){const s=gr,n=Hr(i);t[s(580)]?Fr(n,t,e):Wr(n,t,e)}(t.data.frame,null,i)}))}if(this.options.metadata)if(qs)t.receiver.transform=new RTCRtpScriptTransform(this.worker,{name:"receiverTransform",payloadTypeCodec:d({},this.payloadTypeCodec),codec:this.options.metadata&&"h264",mid:null==(i=t.transceiver)?void 0:i.mid});else if(zs){const{readable:e,writable:i}=t.receiver.createEncodedStreams();this.worker.postMessage({action:"insertable-streams-receiver",payloadTypeCodec:d({},this.payloadTypeCodec),codec:this.options.metadata&&"h264",mid:null==(n=t.transceiver)?void 0:n.mid,readable:e,writable:i},[e,i])}this.emit(ss.track,t)}getDRMConfiguration(t){return this.drmOptionsMap?this.drmOptionsMap.get(t):null}async onRtcDrmFetch(t,e){return e.headers||(e.headers=new Headers),e.headers.get("x-dt-custom-data")&&e.headers.delete("x-dt-custom-data"),this.subscriberToken?e.headers.append("Authorization","Bearer ".concat(this.subscriberToken)):Xr.warn("onRtcDrmFetch: no subscriberToken"),fetch(t,e)}configureDRM(t){if(!t)throw new g("Required DRM options is not provided");this.drmOptionsMap||(this.drmOptionsMap=new Map);const e={merchant:"dolby",environment:Gn.Production,customTransform:this.options.metadata,videoElement:t.videoElement,audioElement:t.audioElement,video:{codec:"H264",encryption:"cbcs",keyId:$s(t.videoEncryptionParams.keyId),iv:$s(t.videoEncryptionParams.iv)},audio:{codec:"opus",encryption:"clear"},onFetch:this.onRtcDrmFetch.bind(this)};t.mediaBufferMs&&(e.mediaBufferMs=t.mediaBufferMs),this.DRMProfile&&(this.DRMProfile.playReadyUrl&&(e.prLicenseUrl=this.DRMProfile.playReadyUrl),this.DRMProfile.widevineUrl&&(e.wvLicenseUrl=this.DRMProfile.widevineUrl),this.DRMProfile.fairPlayUrl&&(e.fpsLicenseUrl=this.DRMProfile.fairPlayUrl),this.DRMProfile.fairPlayCertUrl&&(e.fpsCertificateUrl=this.DRMProfile.fairPlayCertUrl));try{Ur(e),this.drmOptionsMap.set(t.videoMid,e),t.audioMid&&this.drmOptionsMap.set(t.audioMid,e),e.videoElement.addEventListener("rtcdrmerror",(t=>{Xr.error("DRM error: ",t.detail.message,"in video element:",e.videoElement.id),this.emit("error",new g(t.detail.message))}))}catch(e){Xr.error("Failed to configure DRM with options:",t,"error is:",e)}}removeDRMConfiguration(t){var e;null==(e=this.drmOptionsMap)||e.delete(t)}get isDRMOn(){return!!this.drmOptionsMap&&this.drmOptionsMap.size>0}exchangeDRMConfiguration(t,e){const i=this.getDRMConfiguration(t),s=this.getDRMConfiguration(e);if(null===i)throw new g("No DRM configuration found for "+t);if(null===s)throw new g("No DRM configuration found for "+e);tn(i.video,s.video,"keyId"),tn(i.video,s.video,"iv");try{Ur(i)}catch(t){Xr.error("Failed to configure DRM with options:",i,"error is:",t)}try{Ur(s)}catch(t){Xr.error("Failed to configure DRM with options:",s,"error is:",t)}}constructor(t,e,i=null,s=!0){t&&Xr.warn("The streamName property has been deprecated. In a future release, this will be removed. Please do not rely on this value. Instead, set via token generator"),super(null,e,Xr,s),this.payloadTypeCodec={},this.tracksMidValues={},this.drmOptionsMap=null,this.eventQueue=[],this.isMainStreamActive=!1,i&&(this.on(ss.track,(t=>{i.srcObject=t.streams[0]})),Xr.warn("The mediaElement property has been deprecated. In a future release, this will be removed. Please do not rely on this value. Instead, do this in either the `track` or the `active` broadcast event."))}},w.defineProperty(t,Po.toStringTag,{value:"Module"})}))})),Yl=lr((t=>{"use strict";function e(){const t=ql();return e=function(){return t},t}r(),w.defineProperty(t,"__esModule",{value:!0}),function(t,e){for(var i in e)w.defineProperty(t,i,{enumerable:!0,get:e[i]})}(t,{Director:function(){return e().Director},View:function(){return e().View}})})),Kl=lr(((t,e)=>{r(),e.exports=function(){var t=new Float32Array(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}})),Ql=lr(((t,e)=>{r(),e.exports=function(t,e){var i=e[0],s=e[1],n=e[2],r=e[3],o=i+i,h=s+s,a=n+n,u=i*o,c=s*o,l=s*h,d=n*o,f=n*h,_=n*a,v=r*o,m=r*h,g=r*a;return t[0]=1-l-_,t[1]=c+g,t[2]=d-m,t[3]=0,t[4]=c-g,t[5]=1-u-_,t[6]=f+v,t[7]=0,t[8]=d+m,t[9]=f-v,t[10]=1-u-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}})),Jl=lr(((t,e)=>{r(),e.exports=function(t,e,i){var s,n,r,o=i[0],h=i[1],a=i[2],u=_.sqrt(o*o+h*h+a*a);if(_.abs(u)<1e-6)return null;return o*=u=1/u,h*=u,a*=u,s=_.sin(e),n=_.cos(e),r=1-n,t[0]=o*o*r+n,t[1]=h*o*r+a*s,t[2]=a*o*r-h*s,t[3]=0,t[4]=o*h*r-a*s,t[5]=h*h*r+n,t[6]=a*h*r+o*s,t[7]=0,t[8]=o*a*r+h*s,t[9]=h*a*r-o*s,t[10]=a*a*r+n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}})),$l=lr(((t,e)=>{r(),e.exports=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}})),td=lr(((t,e)=>{r(),e.exports=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}})),ed=lr(((t,e)=>{r(),e.exports=function(t,e){var i=e[0],s=e[1],n=e[2],r=e[3],o=e[4],h=e[5],a=e[6],u=e[7],c=e[8],l=e[9],d=e[10],f=e[11],_=e[12],v=e[13],m=e[14],g=e[15],p=i*h-s*o,w=i*a-n*o,y=i*u-r*o,b=s*a-n*h,A=s*u-r*h,S=n*u-r*a,T=c*v-l*_,k=c*m-d*_,E=c*g-f*_,x=l*m-d*v,R=l*g-f*v,I=d*g-f*m,C=p*I-w*R+y*x+b*E-A*k+S*T;if(!C)return null;return C=1/C,t[0]=(h*I-a*R+u*x)*C,t[1]=(n*R-s*I-r*x)*C,t[2]=(v*S-m*A+g*b)*C,t[3]=(d*A-l*S-f*b)*C,t[4]=(a*E-o*I-u*k)*C,t[5]=(i*I-n*E+r*k)*C,t[6]=(m*y-_*S-g*w)*C,t[7]=(c*S-d*y+f*w)*C,t[8]=(o*R-h*E+u*T)*C,t[9]=(s*E-i*R-r*T)*C,t[10]=(_*A-v*y+g*p)*C,t[11]=(l*y-c*A-f*p)*C,t[12]=(h*k-o*x-a*T)*C,t[13]=(i*x-s*k+n*T)*C,t[14]=(v*w-_*b-m*p)*C,t[15]=(c*b-l*w+d*p)*C,t}})),id=lr(((t,e)=>{r(),e.exports=function(t,e,i){var s=e[0],n=e[1],r=e[2],o=e[3],h=e[4],a=e[5],u=e[6],c=e[7],l=e[8],d=e[9],f=e[10],_=e[11],v=e[12],m=e[13],g=e[14],p=e[15],w=i[0],y=i[1],b=i[2],A=i[3];return t[0]=w*s+y*h+b*l+A*v,t[1]=w*n+y*a+b*d+A*m,t[2]=w*r+y*u+b*f+A*g,t[3]=w*o+y*c+b*_+A*p,w=i[4],y=i[5],b=i[6],A=i[7],t[4]=w*s+y*h+b*l+A*v,t[5]=w*n+y*a+b*d+A*m,t[6]=w*r+y*u+b*f+A*g,t[7]=w*o+y*c+b*_+A*p,w=i[8],y=i[9],b=i[10],A=i[11],t[8]=w*s+y*h+b*l+A*v,t[9]=w*n+y*a+b*d+A*m,t[10]=w*r+y*u+b*f+A*g,t[11]=w*o+y*c+b*_+A*p,w=i[12],y=i[13],b=i[14],A=i[15],t[12]=w*s+y*h+b*l+A*v,t[13]=w*n+y*a+b*d+A*m,t[14]=w*r+y*u+b*f+A*g,t[15]=w*o+y*c+b*_+A*p,t}})),sd=lr(((t,e)=>{r(),e.exports=function(t,e,i,s,n){var r=1/_.tan(e/2),o=1/(s-n);return t[0]=r/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(n+s)*o,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*n*s*o,t[15]=0,t}})),nd=lr(((t,e)=>{r(),e.exports=function(t,e,i,s){var n,r,o,h,a,u,c,l,d,f,v,m,g,p,w,y,b,A,S,T,k,E,x,R,I=s[0],C=s[1],P=s[2],D=_.sqrt(I*I+C*C+P*P);if(_.abs(D)<1e-6)return null;I*=D=1/D,C*=D,P*=D,n=_.sin(i),r=_.cos(i),o=1-r,h=e[0],a=e[1],u=e[2],c=e[3],l=e[4],d=e[5],f=e[6],v=e[7],m=e[8],g=e[9],p=e[10],w=e[11],y=I*I*o+r,b=C*I*o+P*n,A=P*I*o-C*n,S=I*C*o-P*n,T=C*C*o+r,k=P*C*o+I*n,E=I*P*o+C*n,x=C*P*o-I*n,R=P*P*o+r,t[0]=h*y+l*b+m*A,t[1]=a*y+d*b+g*A,t[2]=u*y+f*b+p*A,t[3]=c*y+v*b+w*A,t[4]=h*S+l*T+m*k,t[5]=a*S+d*T+g*k,t[6]=u*S+f*T+p*k,t[7]=c*S+v*T+w*k,t[8]=h*E+l*x+m*R,t[9]=a*E+d*x+g*R,t[10]=u*E+f*x+p*R,t[11]=c*E+v*x+w*R,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t}})),rd=lr(((t,e)=>{r(),e.exports=function(t,e,i){var s,n,r,o,h,a,u,c,l,d,f,_,v=i[0],m=i[1],g=i[2];e===t?(t[12]=e[0]*v+e[4]*m+e[8]*g+e[12],t[13]=e[1]*v+e[5]*m+e[9]*g+e[13],t[14]=e[2]*v+e[6]*m+e[10]*g+e[14],t[15]=e[3]*v+e[7]*m+e[11]*g+e[15]):(s=e[0],n=e[1],r=e[2],o=e[3],h=e[4],a=e[5],u=e[6],c=e[7],l=e[8],d=e[9],f=e[10],_=e[11],t[0]=s,t[1]=n,t[2]=r,t[3]=o,t[4]=h,t[5]=a,t[6]=u,t[7]=c,t[8]=l,t[9]=d,t[10]=f,t[11]=_,t[12]=s*v+h*m+l*g+e[12],t[13]=n*v+a*m+d*g+e[13],t[14]=r*v+u*m+f*g+e[14],t[15]=o*v+c*m+_*g+e[15]);return t}}));r();var Qa=function(t){return t[t.CONFIGURATION_ERROR=1e3]="CONFIGURATION_ERROR",t[t.LICENSE_ERROR=2e3]="LICENSE_ERROR",t[t.LICENSE_INVALID_DOMAIN=2001]="LICENSE_INVALID_DOMAIN",t[t.LICENSE_INVALID_SOURCE=2002]="LICENSE_INVALID_SOURCE",t[t.LICENSE_EXPIRED=2003]="LICENSE_EXPIRED",t[t.LICENSE_INVALID_FEATURE=2004]="LICENSE_INVALID_FEATURE",t[t.SOURCE_INVALID=3e3]="SOURCE_INVALID",t[t.SOURCE_NOT_SUPPORTED=3001]="SOURCE_NOT_SUPPORTED",t[t.MANIFEST_LOAD_ERROR=4e3]="MANIFEST_LOAD_ERROR",t[t.MANIFEST_CORS_ERROR=4001]="MANIFEST_CORS_ERROR",t[t.MANIFEST_PARSE_ERROR=4002]="MANIFEST_PARSE_ERROR",t[t.MEDIA_NOT_SUPPORTED=5e3]="MEDIA_NOT_SUPPORTED",t[t.MEDIA_LOAD_ERROR=5001]="MEDIA_LOAD_ERROR",t[t.MEDIA_DECODE_ERROR=5002]="MEDIA_DECODE_ERROR",t[t.MEDIA_AVPLAYER_ERROR=5003]="MEDIA_AVPLAYER_ERROR",t[t.MEDIA_ABORTED=5004]="MEDIA_ABORTED",t[t.NETWORK_ERROR=6e3]="NETWORK_ERROR",t[t.NETWORK_TIMEOUT=6001]="NETWORK_TIMEOUT",t[t.CONTENT_PROTECTION_ERROR=7e3]="CONTENT_PROTECTION_ERROR",t[t.CONTENT_PROTECTION_NOT_SUPPORTED=7001]="CONTENT_PROTECTION_NOT_SUPPORTED",t[t.CONTENT_PROTECTION_CONFIGURATION_MISSING=7002]="CONTENT_PROTECTION_CONFIGURATION_MISSING",t[t.CONTENT_PROTECTION_CONFIGURATION_INVALID=7003]="CONTENT_PROTECTION_CONFIGURATION_INVALID",t[t.CONTENT_PROTECTION_INITIALIZATION_INVALID=7004]="CONTENT_PROTECTION_INITIALIZATION_INVALID",t[t.CONTENT_PROTECTION_CERTIFICATE_ERROR=7005]="CONTENT_PROTECTION_CERTIFICATE_ERROR",t[t.CONTENT_PROTECTION_CERTIFICATE_INVALID=7006]="CONTENT_PROTECTION_CERTIFICATE_INVALID",t[t.CONTENT_PROTECTION_LICENSE_ERROR=7007]="CONTENT_PROTECTION_LICENSE_ERROR",t[t.CONTENT_PROTECTION_LICENSE_INVALID=7008]="CONTENT_PROTECTION_LICENSE_INVALID",t[t.CONTENT_PROTECTION_KEY_EXPIRED=7009]="CONTENT_PROTECTION_KEY_EXPIRED",t[t.CONTENT_PROTECTION_KEY_MISSING=7010]="CONTENT_PROTECTION_KEY_MISSING",t[t.CONTENT_PROTECTION_OUTPUT_RESTRICTED=7011]="CONTENT_PROTECTION_OUTPUT_RESTRICTED",t[t.CONTENT_PROTECTION_INTERNAL_ERROR=7012]="CONTENT_PROTECTION_INTERNAL_ERROR",t[t.SUBTITLE_LOAD_ERROR=8e3]="SUBTITLE_LOAD_ERROR",t[t.SUBTITLE_CORS_ERROR=8001]="SUBTITLE_CORS_ERROR",t[t.SUBTITLE_PARSE_ERROR=8002]="SUBTITLE_PARSE_ERROR",t[t.VR_PLATFORM_UNSUPPORTED=9e3]="VR_PLATFORM_UNSUPPORTED",t[t.VR_PRESENTATION_ERROR=9001]="VR_PRESENTATION_ERROR",t[t.AD_ERROR=1e4]="AD_ERROR",t[t.AD_BLOCKER_DETECTED=10001]="AD_BLOCKER_DETECTED",t[t.FULLSCREEN_ERROR=11e3]="FULLSCREEN_ERROR",t[t.PICTURE_IN_PICTURE_ERROR=11001]="PICTURE_IN_PICTURE_ERROR",t[t.CACHE_SOURCE_ERROR=12e3]="CACHE_SOURCE_ERROR",t[t.CACHE_CONTENT_PROTECTION_ERROR=12001]="CACHE_CONTENT_PROTECTION_ERROR",t[t.THEO_LIVE_UNKNOWN_ERROR=13e3]="THEO_LIVE_UNKNOWN_ERROR",t[t.THEO_LIVE_CHANNEL_NOT_FOUND=13001]="THEO_LIVE_CHANNEL_NOT_FOUND",t[t.THEO_LIVE_END_OF_DEMO=13002]="THEO_LIVE_END_OF_DEMO",t[t.THEO_LIVE_ANALYTICS_ERROR=13003]="THEO_LIVE_ANALYTICS_ERROR",t}({}),Ye=function(t){return t[t.CONFIGURATION=1]="CONFIGURATION",t[t.LICENSE=2]="LICENSE",t[t.SOURCE=3]="SOURCE",t[t.MANIFEST=4]="MANIFEST",t[t.MEDIA=5]="MEDIA",t[t.NETWORK=6]="NETWORK",t[t.CONTENT_PROTECTION=7]="CONTENT_PROTECTION",t[t.SUBTITLE=8]="SUBTITLE",t[t.VR=9]="VR",t[t.AD=10]="AD",t[t.FULLSCREEN=11]="FULLSCREEN",t[t.CACHE=12]="CACHE",t[t.THEOLIVE=13]="THEOLIVE",t}({});!function(t){t.fromCode=function(e){const i=_.floor(e/1e3);if(i in t)return i;throw new b("Invalid error code: "+e)}}(Ye||(Ye={})),r(),r(),r(),r(),r(),r(),r(),r();var Xt=function(t){return t.Tv="web",t.Ev="android",t.xv="android-tv",t.Rv="ios",t.Iv="tvos",t.Cv="chromecast",t.Pv="theoliveweb",t}({});var I=Ll?Ll.userAgent:"",od=I.match(/chrome\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/i),hd=I.match(/Edg\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/i),ad=I.match(/Android ([0-9\.]+)/i),ud=I.match(/Windows NT ([0-9\.]+)/i),cd=I.match(/(Version)\/((\d+)\.(\d+)(?:\.(\d+))?).*Safari/),ld=I.match(/Firefox\/([0-9\.]+)/i),dd=I.match(/OPR\/(\d+\.\d+)/i),fd=I.match(/Tizen ([0-9\.]+)/i),_d=I.match(/(iPhone OS|iPad OS|iPod OS|Mac OS X) (\d+)_(\d+)_?(\d+)?/),vd=I.match(/HbbTV\/([0-9.]+)/i),md=class{get Qe(){return this.Dv}get Nv(){return this.Mv}get Lv(){return this.Bv}get Ov(){return this.Fv}get Vv(){return this.Wv}get Uv(){return this.Gv}get Hv(){return this.Zv}get Xv(){return this.zv}get qv(){return this.Yv}get Kv(){return this.Qv}get Jv(){return this.$v}get su(){return this.im}get nm(){return this.hm}get um(){return this.lm||this.dm}get ud(){return this.fm}get Qs(){return this._m}get vm(){return this.gm}get pm(){return this.wm}get ym(){var t;return null!=(t=this.Am)?t:this.Sm}get Tm(){return this.Em}get xm(){var t;return(null==(t=s.chrome)?void 0:t.webview)&&this.Rm>0}get Im(){return this.Rm}get Cm(){return this.Pm}get Dm(){return this.Nm}get Mm(){return this.Lm}get Bm(){return this.Om}get Fm(){return this.Vm}get Wm(){return this.Um}get Gm(){return this.Hm}get Zm(){return this.Xm}get zm(){return this.qm}get Ym(){return this.Km}get jm(){return this.Qm}get Jm(){return this.$m}get eg(){return this.rg}get og(){return this.hg}get ag(){return this.cg}get dg(){return this.fg}get _g(){return this.vg}get gg(){return this.pg}get wg(){return!(!this.Mm&&!this.Cm)&&this.ym<=56}get yg(){return this.Ag}get Sg(){return this.Tg}get Eg(){return this.xg}get Rg(){return this.Ig}get Cg(){return this.Pg}get Dg(){return this.Ng}get Mg(){return this.Lg}get Bg(){return this.Og}get IS_IOS_CHROME(){return this.Fg}constructor(){this.Dv=Boolean("ontouchstart"in self||self.DocumentTouch&&h instanceof self.DocumentTouch||Ll&&Ll.msMaxTouchPoints),this.Mv=/(mac\sos\sx)\s?([\w\s\.]+\w)*/i.test(I)||/(macintosh|mac(?=_powerpc)\s)/i.test(I),this.Bv=/Windows NT/i.test(I),this.Fv=ud?C(ud[1]):0,this.Wv=/Android/i.test(I),this.Gv=ad?C(ad[1]):0,this.Zv=/windows phone (8|8\.1)/i.test(I),this.zv=/iPhone/i.test(I),this.Yv=/iPad/i.test(I),this.Qv=this.Mv&&this.Dv&&!this.Yv,this.$v=/iPod/i.test(I),this.fm=/Mobile Safari/i.test(I),this.lm=/EOS\d*STB/i.test(I),this.dm=/APP\d*STB/i.test(I),this.im=(this.zv||this.Yv||this.Qv||this.$v)&&!this.Zv,this.hm=_d?C(_d[2]):0,this._m=this.Zv||this.im||this.Wv||this.fm,this.gm=/CriOS/i.test(I),this.wm=Boolean(self.chrome&&/google/i.test(Ll.vendor))||this.gm,this.Em=this.wm&&/Edg\//i.test(Ll.userAgent),this.Rm=hd?x(hd[1],10):0,this.Fg=Boolean(/CriOS/i.test(I)),this.Og=Boolean(self.chrome||/Chrome/i.test(I)||this.Fg),this.Sm=od?x(od[1],10):0,this.Pm=/SMART-TV.*Tizen/i.test(I),this.Nm=fd?C(fd[1]):0,this.Am=this.Nm>0?function(t){return t>=8?108:t>=7?94:t>=6.5?85:t>=6?76:t>=5.5?69:t>=5?63:t>=4?56:t>=3?47:0}(this.Nm):void 0,this.Lm=/webos|web0s/i.test(I),this.Om=/HbbTV/i.test(I),this.Vm=!!vd&&function(t){if(!t)return!1;let e=t.split(".").map(Number);return 3===e.length&&1===e[0]&&2===e[1]}(vd[1]),this.Um=/VIZIO/i.test(I),this.Hm=/Edge\/\d+/i.test(I),this.Xm=/Trident/i.test(I),this.qm=this.Xm&&!self.ActiveXObject&&"ActiveXObject"in self,this.Km=/Vivaldi/i.test(I),this.Qm=/Firefox/i.test(I)&&!/Seamonkey/i.test(I),this.$m=ld?C(ld[1]):0,this.rg=/Safari/i.test(I)&&!/Chrome/i.test(I)&&!this.Zv&&!this.Pm,this.hg=cd?C(cd[2]):0,this.cg=Boolean(dd),this.fg=dd?C(dd[1]):0,this.vg=/CrKey/.test(I),this.pg=/\b(tv|smart-tv|smarttv|appletv|crkey|googletv|hbbtv|pov_tv|roku|viera|nettv|philipstv|vizio)\b/i.test(I),this.Ag=/PlayStation 4/i.test(I),this.Tg="web"===Xt.xv,this.xg="web"===Xt.Ev,this.Ig=this.xg||this.Tg,this.Pg="web"===Xt.Rv,this.Ng="web"===Xt.Iv,this.Lg="web"===Xt.Cv}};md.Vg=new md;var Z=md.Vg;r();var Sa={}.hasOwnProperty,gd={}.toString;function Bo(t){return null!=t}function pd(t){return void 0===t}var Ms,$c=Array.isArray||function(t){return"[object Array]"===gd.call(t)};function nc(t){return V(t)&&Sa.call(t,"length")&&Ad(t.length)}function V(t){return"object"==typeof t&&null!==t}function wd(t){return V(t)&&t.constructor&&t.constructor===w}function Yt(t){return"string"==typeof t}function yd(t){return"boolean"==typeof t}function yt(t){return Bo(t)&&"function"==typeof t.then}function bd(t){return"[object Date]"===gd.call(t)}function Ad(t){return"number"==typeof t}function Sd(t){return"function"==typeof t}function cr(t){return Sd(t)||V(t)}function ze(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function Sh(t){let e;for(;Bo(e=t.firstChild);)t.removeChild(e)}function Td(t,e){let i;for(;Bo(i=t.firstChild);)e.appendChild(i)}function kd(t,e){t.insertBefore(e,t.firstChild)}function Ed(t){const e=t.className;return"string"==typeof e?e:e&&"string"==typeof e.baseVal?e.baseVal:""}function xd(t,e){const i=t.className;"string"==typeof i?t.className=e:i&&"string"==typeof i.baseVal&&(i.baseVal=e)}function Rd(t,e){return void 0!==t.classList?t.classList.contains(e):void 0!==t.className&&-1!==(" "+Ed(t)+" ").indexOf(" "+e+" ")}function ce(t,e){if(void 0!==t.classList)t.classList.add(e);else if(void 0!==t.className){const i=Ed(t);-1===(" "+i+" ").indexOf(" "+e+" ")&&xd(t,(i+" "+e).trim())}}function Id(t,e){if(void 0!==t.classList)t.classList.remove(e);else if(void 0!==t.className){let i=" "+Ed(t)+" ";const s=" "+e+" ";for(;-1!==i.indexOf(s);)i=i.replace(s," ");xd(t,i.trim())}}function Cd(t,e,i){void 0===i&&(i=!Rd(t,e)),i?ce(t,e):Id(t,e)}function Pd(t){t.stopPropagation()}function Dd(t,e){Z.Cm&&Z.Dm<3?function(t,e){let i=e;switch(e){case"flex":i="-webkit-flex";break;case"inline-flex":i="-webkit-inline-flex"}t.display=i}(t,e):function(t,e){if(t.display=e,t.display!==e){let i=e;switch(e){case"flex":i="-ms-flexbox";break;case"inline-flex":i="-ms-inline-flexbox"}t.display=i}}(t,e)}function Nd(t,e){const i=e.style;if(i)for(const e of w.keys(t)){const s=t[e];void 0!==s&&(i[e]=s)}}function Zo(t){const e=t.style;e.position="absolute",e.left="0",e.right="0",e.top="0",e.bottom="0",e.width="100%",e.height="100%"}function Md(t){const e=t.style;e.position="",e.left="",e.right="",e.top="",e.bottom="",e.width="",e.height=""}function Ld(t){t.removeAttribute("title")}function Bd(t){t.addEventListener("mouseover",(t=>{Ld(t.target)}))}function Od(t){try{return Boolean(t)&&t.parent!==t}catch(t){return!1}}r(),r();var Tt=()=>{},Fd=t=>t;function Qr(t,e){let i=-1/0;return function(){for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];const o=Ms.Wg();o-i>=e&&(t.apply(this,n),i=o)}}function Vd(t,e){let i=0;return function(){for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];const o=this;0!==i&&Ms.Ug(i),i=Ms.Gg((()=>{i=0,t.apply(o,n)}),e)}}function sl(t){let e;return()=>(void 0!==t&&(e=t(),t=void 0),e)}function Ur(t){return"video"===function(t){return t&&t.nodeName&&t.nodeName.toLowerCase()||""}(t)}function Wd(t){t.src&&(t.removeAttribute("src"),t.load()),t.srcObject&&(t.srcObject=null,t.load())}function Ud(){return void 0!==h?h.createElement("video"):void 0}var Gd=sl(Ud),Hd=sl((()=>"undefined"!=typeof HTMLVideoElement&&Gd()instanceof HTMLVideoElement));r(),r(),r();var Zd=null;try{Zd=new WebAssembly.Instance(new WebAssembly.Module(new j([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(y){}function cc(t,e,i){this.low=0|t,this.high=0|e,this.unsigned=!!i}function ti(t){return!0===(t&&t.Hg)}function Xd(t){var e=_.clz32(t&-t);return t?31-e:e}cc.prototype.Hg,w.defineProperty(cc.prototype,"Hg",{value:!0}),cc.isLong=ti;var zd={},qd={};function Yd(t,e){var i,s,n;return e?(n=0<=(t>>>=0)&&t<256)&&(s=qd[t])?s:(i=is(t,0,!0),n&&(qd[t]=i),i):(n=-128<=(t|=0)&&t<128)&&(s=zd[t])?s:(i=is(t,t<0?-1:0,!1),n&&(zd[t]=i),i)}function Kd(t,e){if(S(t))return e?oh:Fa;if(e){if(t<0)return oh;if(t>=$d)return hf}else{if(t<=-tf)return af;if(t+1>=tf)return of}return t<0?Kd(-t,e).neg():is(t%Jd|0,t/Jd|0,e)}function is(t,e,i){return new cc(t,e,i)}cc.fromInt=Yd,cc.fromNumber=Kd,cc.fromBits=is;var jd=_.pow;function Qd(t,e,i){if(0===t.length)throw g("empty string");if("number"==typeof e?(i=e,e=!1):e=!!e,"NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return e?oh:Fa;if((i=i||10)<2||36<i)throw RangeError("radix");var s;if((s=t.indexOf("-"))>0)throw g("interior hyphen");if(0===s)return Qd(t.substring(1),e,i).neg();for(var n=Kd(jd(i,8)),r=Fa,o=0;o<t.length;o+=8){var h=_.min(8,t.length-o),a=x(t.substring(o,o+h),i);if(h<8){var u=Kd(jd(i,h));r=r.mul(u).add(Kd(a))}else r=(r=r.mul(n)).add(Kd(a))}return r.unsigned=e,r}function Oa(t,e){return"number"==typeof t?Kd(t,e):"string"==typeof t?Qd(t,e):is(t.low,t.high,"boolean"==typeof e?e:t.unsigned)}cc.fromString=Qd,cc.fromValue=Oa;var Jd=4294967296,$d=Jd*Jd,tf=$d/2,ef=Yd(1<<24),Fa=Yd(0);cc.ZERO=Fa;var oh=Yd(0,!0);cc.UZERO=oh;var sf=Yd(1);cc.ONE=sf;var nf=Yd(1,!0);cc.UONE=nf;var rf=Yd(-1);cc.NEG_ONE=rf;var of=is(-1,2147483647,!1);cc.MAX_VALUE=of;var hf=is(-1,-1,!0);cc.MAX_UNSIGNED_VALUE=hf;var af=is(0,-2147483648,!1);cc.MIN_VALUE=af;var Ui=cc.prototype;Ui.toInt=function(){return this.unsigned?this.low>>>0:this.low},Ui.toNumber=function(){return this.unsigned?(this.high>>>0)*Jd+(this.low>>>0):this.high*Jd+(this.low>>>0)},Ui.toString=function(t){if((t=t||10)<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(af)){var e=Kd(t),i=this.div(e),s=i.mul(e).sub(this);return i.toString(t)+s.toInt().toString(t)}return"-"+this.neg().toString(t)}for(var n=Kd(jd(t,6),this.unsigned),r=this,o="";;){var h=r.div(n),a=(r.sub(h.mul(n)).toInt()>>>0).toString(t);if((r=h).isZero())return a+o;for(;a.length<6;)a="0"+a;o=""+a+o}},Ui.getHighBits=function(){return this.high},Ui.getHighBitsUnsigned=function(){return this.high>>>0},Ui.getLowBits=function(){return this.low},Ui.getLowBitsUnsigned=function(){return this.low>>>0},Ui.getNumBitsAbs=function(){if(this.isNegative())return this.eq(af)?64:this.neg().getNumBitsAbs();for(var t=0!=this.high?this.high:this.low,e=31;e>0&&0==(t&1<<e);e--);return 0!=this.high?e+33:e+1},Ui.isZero=function(){return 0===this.high&&0===this.low},Ui.eqz=Ui.isZero,Ui.isNegative=function(){return!this.unsigned&&this.high<0},Ui.isPositive=function(){return this.unsigned||this.high>=0},Ui.isOdd=function(){return 1==(1&this.low)},Ui.isEven=function(){return 0==(1&this.low)},Ui.equals=function(t){return ti(t)||(t=Oa(t)),(this.unsigned===t.unsigned||this.high>>>31!=1||t.high>>>31!=1)&&(this.high===t.high&&this.low===t.low)},Ui.eq=Ui.equals,Ui.notEquals=function(t){return!this.eq(t)},Ui.neq=Ui.notEquals,Ui.ne=Ui.notEquals,Ui.lessThan=function(t){return this.comp(t)<0},Ui.lt=Ui.lessThan,Ui.lessThanOrEqual=function(t){return this.comp(t)<=0},Ui.lte=Ui.lessThanOrEqual,Ui.le=Ui.lessThanOrEqual,Ui.greaterThan=function(t){return this.comp(t)>0},Ui.gt=Ui.greaterThan,Ui.greaterThanOrEqual=function(t){return this.comp(t)>=0},Ui.gte=Ui.greaterThanOrEqual,Ui.ge=Ui.greaterThanOrEqual,Ui.compare=function(t){if(ti(t)||(t=Oa(t)),this.eq(t))return 0;var e=this.isNegative(),i=t.isNegative();return e&&!i?-1:!e&&i?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},Ui.comp=Ui.compare,Ui.negate=function(){return!this.unsigned&&this.eq(af)?af:this.not().add(sf)},Ui.neg=Ui.negate,Ui.add=function(t){ti(t)||(t=Oa(t));var e=this.high>>>16,i=65535&this.high,s=this.low>>>16,n=65535&this.low,r=t.high>>>16,o=65535&t.high,h=t.low>>>16,a=0,u=0,c=0,l=0;return c+=(l+=n+(65535&t.low))>>>16,u+=(c+=s+h)>>>16,a+=(u+=i+o)>>>16,a+=e+r,is((c&=65535)<<16|(l&=65535),(a&=65535)<<16|(u&=65535),this.unsigned)},Ui.subtract=function(t){return ti(t)||(t=Oa(t)),this.add(t.neg())},Ui.sub=Ui.subtract,Ui.multiply=function(t){if(this.isZero())return this;if(ti(t)||(t=Oa(t)),Zd)return is(Zd.mul(this.low,this.high,t.low,t.high),Zd.get_high(),this.unsigned);if(t.isZero())return this.unsigned?oh:Fa;if(this.eq(af))return t.isOdd()?af:Fa;if(t.eq(af))return this.isOdd()?af:Fa;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(ef)&&t.lt(ef))return Kd(this.toNumber()*t.toNumber(),this.unsigned);var e=this.high>>>16,i=65535&this.high,s=this.low>>>16,n=65535&this.low,r=t.high>>>16,o=65535&t.high,h=t.low>>>16,a=65535&t.low,u=0,c=0,l=0,d=0;return l+=(d+=n*a)>>>16,c+=(l+=s*a)>>>16,l&=65535,c+=(l+=n*h)>>>16,u+=(c+=i*a)>>>16,c&=65535,u+=(c+=s*h)>>>16,c&=65535,u+=(c+=n*o)>>>16,u+=e*a+i*h+s*o+n*r,is((l&=65535)<<16|(d&=65535),(u&=65535)<<16|(c&=65535),this.unsigned)},Ui.mul=Ui.multiply,Ui.divide=function(t){if(ti(t)||(t=Oa(t)),t.isZero())throw g("division by zero");var e,i,s;if(Zd)return this.unsigned||-2147483648!==this.high||-1!==t.low||-1!==t.high?is((this.unsigned?Zd.div_u:Zd.div_s)(this.low,this.high,t.low,t.high),Zd.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?oh:Fa;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return oh;if(t.gt(this.shru(1)))return nf;s=oh}else{if(this.eq(af))return t.eq(sf)||t.eq(rf)?af:t.eq(af)?sf:(e=this.shr(1).div(t).shl(1)).eq(Fa)?t.isNegative()?sf:rf:(i=this.sub(t.mul(e)),s=e.add(i.div(t)));if(t.eq(af))return this.unsigned?oh:Fa;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();s=Fa}for(i=this;i.gte(t);){e=_.max(1,_.floor(i.toNumber()/t.toNumber()));for(var n=_.ceil(_.log(e)/_.LN2),r=n<=48?1:jd(2,n-48),o=Kd(e),h=o.mul(t);h.isNegative()||h.gt(i);)h=(o=Kd(e-=r,this.unsigned)).mul(t);o.isZero()&&(o=sf),s=s.add(o),i=i.sub(h)}return s},Ui.div=Ui.divide,Ui.modulo=function(t){return ti(t)||(t=Oa(t)),Zd?is((this.unsigned?Zd.rem_u:Zd.rem_s)(this.low,this.high,t.low,t.high),Zd.get_high(),this.unsigned):this.sub(this.div(t).mul(t))},Ui.mod=Ui.modulo,Ui.rem=Ui.modulo,Ui.not=function(){return is(~this.low,~this.high,this.unsigned)},Ui.countLeadingZeros=function(){return this.high?_.clz32(this.high):_.clz32(this.low)+32},Ui.clz=Ui.countLeadingZeros,Ui.countTrailingZeros=function(){return this.low?Xd(this.low):Xd(this.high)+32},Ui.ctz=Ui.countTrailingZeros,Ui.and=function(t){return ti(t)||(t=Oa(t)),is(this.low&t.low,this.high&t.high,this.unsigned)},Ui.or=function(t){return ti(t)||(t=Oa(t)),is(this.low|t.low,this.high|t.high,this.unsigned)},Ui.xor=function(t){return ti(t)||(t=Oa(t)),is(this.low^t.low,this.high^t.high,this.unsigned)},Ui.shiftLeft=function(t){return ti(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?is(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):is(0,this.low<<t-32,this.unsigned)},Ui.shl=Ui.shiftLeft,Ui.shiftRight=function(t){return ti(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?is(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):is(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},Ui.shr=Ui.shiftRight,Ui.shiftRightUnsigned=function(t){return ti(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?is(this.low>>>t|this.high<<32-t,this.high>>>t,this.unsigned):is(32===t?this.high:this.high>>>t-32,0,this.unsigned)},Ui.shru=Ui.shiftRightUnsigned,Ui.shr_u=Ui.shiftRightUnsigned,Ui.rotateLeft=function(t){var e;return ti(t)&&(t=t.toInt()),0==(t&=63)?this:32===t?is(this.high,this.low,this.unsigned):t<32?(e=32-t,is(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned)):(e=32-(t-=32),is(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned))},Ui.rotl=Ui.rotateLeft,Ui.rotateRight=function(t){var e;return ti(t)&&(t=t.toInt()),0==(t&=63)?this:32===t?is(this.high,this.low,this.unsigned):t<32?(e=32-t,is(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned)):(e=32-(t-=32),is(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned))},Ui.rotr=Ui.rotateRight,Ui.toSigned=function(){return this.unsigned?is(this.low,this.high,!1):this},Ui.toUnsigned=function(){return this.unsigned?this:is(this.low,this.high,!0)},Ui.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},Ui.toBytesLE=function(){var t=this.high,e=this.low;return[255&e,e>>>8&255,e>>>16&255,e>>>24,255&t,t>>>8&255,t>>>16&255,t>>>24]},Ui.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24,t>>>16&255,t>>>8&255,255&t,e>>>24,e>>>16&255,e>>>8&255,255&e]},cc.fromBytes=function(t,e,i){return i?cc.fromBytesLE(t,e):cc.fromBytesBE(t,e)},cc.fromBytesLE=function(t,e){return new cc(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,e)},cc.fromBytesBE=function(t,e){return new cc(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],e)};var vo=cc;function uf(t,e){return t.lessThan(e)?t:e}r();var cf=9007199254740991,lf=2**-52;function Ns(t,e,i){return _.min(_.max(t,e),i)}function _s(t,e,i){return t===e||_.abs(t-e)<=i}function gh(t,e){if(t===e)return!0;const i=_.abs(t-e);if(i<lf)return!0;return i<_.max(_.abs(t),_.abs(e))*lf}function df(t,e){return t%e+(t<0?e:0)}function ff(t){return t!=t}function _f(t,e){return t===e||ff(t)&&ff(e)}function vf(t,e){let i=t,s=e;for(;0!==s;){const t=i%s;i=s,s=t}return i<0?-i:i}function Kn(t,e){return t.reduce(((t,i)=>t+e(i)),0)}function mf(t){return!S(t.getTime())}function Ba(){return Date.now()||(new Date).getTime()}function gf(t){return t/1e3}function Ha(t){return 1e3*t}var Si=1/6,pf=vo.fromNumber(cf);function io(t,e){if(0===e)return t.isZero()?NaN:t.isNegative()?-1/0:1/0;if(t.lessThanOrEqual(pf))return t.toNumber()/e;const i=t.divide(e),s=t.subtract(i.multiply(e));return i.toNumber()+s.toNumber()/e}var wf=!!("ontouchstart"in self||self.DocumentTouch&&h instanceof self.DocumentTouch)||!(!Ll||!Ll.msMaxTouchPoints),yf=Gd(),bf=!(!yf||!yf.webkitShowPlaybackTargetPicker),Af=class{get Zg(){return void 0===this.Xg&&(this.Xg=this.zg()),this.Xg}zg(){return 0}get qg(){return!Z.gg}get Yg(){if(s.screen)return{width:s.screen.width,height:s.screen.height}}get Kg(){return s.devicePixelRatio||1}get jg(){return bf}get Qg(){return!1}get Jg(){return!0}get $g(){return!!(Z.eg||Z.su||Z.xm)||!!Z.Wm}get tp(){return Z.Wm}get ep(){return!Z.su}get sp(){return!0}get np(){return!0}get rp(){return!1}get op(){}get hp(){return!0}get ap(){return!1}get cp(){return Z.Wm}get lp(){return!1}dp(t,e){return!0}fp(t){return t>=2*Si}get _p(){return!1}constructor(){this.Xg=void 0,this.vp=!1,this.Qe=wf,this.Qs=!1,this.mp=!0}},Sf=class extends Af{constructor(){super()}};r();var Tf=class extends Sf{get op(){if(Z.Nv)return 4096}dp(t,e){if(t&&t.gp&&e&&e.gp){let i=kf(t.gp,"mp4a.40.2")&&kf(e.gp,"mp4a.40.5"),s=kf(t.gp,"mp4a.40.5")&&kf(e.gp,"mp4a.40.2"),n=kf(t.gp,"mp4a.40.2")&&kf(e.gp,"mp4a.40.34"),r=kf(t.gp,"mp4a.40.34")&&kf(e.gp,"mp4a.40.2"),o=kf(t.gp,"mp4a.40.5")&&kf(e.gp,"mp4a.40.34"),h=kf(t.gp,"mp4a.40.34")&&kf(e.gp,"mp4a.40.5");return!(i||s||n||r||o||h)}return!0}};function kf(t,e){return t.indexOf(e)>-1}r();var Ef=class extends Sf{fp(t){return t>=2}};r();var xf=class extends Sf{get lp(){return Z.og<17}get _p(){return!0}constructor(){super(),this.vp=Z.og>=11,this.mp=Z.eg&&!(Z.su&&Z.og<10)}};r();var Rf,If=class extends Sf{get hp(){return!Z.Lv||(Z.Tm?92!==Z.Im:Z.ym>=100)}};r(),r(),r(),r(),r();var Cf=function(){const t=Ud();if(!t)return!1;const e=t.muted;return t.muted=!e,t.muted!==e}(),Pf=function(){if(Z.Kv)return!1;const t=Ud();if(!t)return!1;const e=t.volume;return t.volume=e/2+.1,e!==t.volume}();var Df=class extends Af{zg(){return this.pp.Zg}get op(){return this.pp.op}get hp(){return this.pp.hp}dp(t,e){return this.pp.dp(t,e)}fp(t){return this.pp.fp(t)}get lp(){return this.pp.lp}constructor(t){super(),this.pp=t,this.vp=this.pp.vp,this.Qe=this.pp.Qe,this.mp=Cf&&this.pp.mp}},Nf=class extends Df{get rp(){return Z.su}constructor(t){super(t),this.vp=!0,this.Qs=!0}};r();var Mf=class{wp(){return new this.yp}bp(t){return this.yp.isTypeSupported(t)}constructor(t){this.yp=Ia(t)}};function Ia(t){return t&&cr(s.ManagedMediaSource)?s.ManagedMediaSource:cr(s.MediaSource)?s.MediaSource:void 0}var Lf=class extends Nf{get rp(){return!0}zg(){return Ia(!0)?super.zg():1}};r();var Bf=class extends Df{get Qg(){return Z.Dm<3}get Jg(){return Z.Dm>=3}get Yg(){return s.tizen&&!this.Ap&&s.tizen.systeminfo.getPropertyValue("DISPLAY",(t=>{const e=t.resolutionWidth,i=t.resolutionHeight;1===e&&1===i||(this.Ap={width:e,height:i})})),this.Ap}get ap(){return Z.Dm<3}dp(t,e){return super.dp(t,e)}};r();var Of=class extends Df{get Yg(){return s.webOS&&!this.Ap&&s.webOS.deviceInfo((t=>{this.Ap={width:t.screenWidth,height:t.screenHeight}})),this.Ap}get sp(){return!1}};r();var Ff=class extends Df{get rp(){return!0}get _p(){return this.pp._p}};!function(t){Rf=t}(function(){const t=function(){if(Z.jm)return new Tf;if(Z.Gm||Z.Zm)return new Ef;if(Z.eg)return new xf;if(Z.pm)return new If;return new Sf}();return Z.su?new Lf(t):Z.Qs?new Nf(t):Z.Cm?new Bf(t):Z.Mm?new Of(t):Z.Nv?new Ff(t):new Df(t)}()),r(),r(),r();var Vf=!(Z.Zm&&!Z.zm),Wf=self.console;function Uf(t){if(V(t))try{return JSON.stringify(t)}catch(t){}return t}function Gf(t){return t.map(Uf).join(" ")}function Hf(t){const e=Wf&&Wf[t];return e?e.bind&&Vf?e.bind(Wf):function(){for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];Wf[t](Gf(i))}:void 0}var Zf=Hf("log")||Tt,vl=Hf("warn")||Zf.bind(void 0,"WARNING:"),Xf=Hf("error")||Zf.bind(void 0,"ERROR:"),zf=(()=>{const t=Wf&&Wf.assert;return t?t.bind&&Vf?t.bind(Wf):function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];Wf.assert(t,Gf(i))}:function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];t||Xf("Assertion failed:",...i)}})();function qf(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),w.defineProperty(t,s.key,s)}}function Yf(t,e){var i=function(t,e){var i=t.length;if(i<=1)return t;for(var s=new Array(i),n=1;n<i;n*=2){Kf(t,e,n,s);var r=t;t=s,s=r}return t}(t,e);return i!==t&&Kf(i,null,t.length,t),t}function Kf(t,e,i,s){var n,r,o,h,a,u=t.length,c=0,l=2*i;for(n=0;n<u;n+=l)for(o=(r=n+i)+i,r>u&&(r=u),o>u&&(o=u),h=n,a=r;;)if(h<r&&a<o)e(t[h],t[a])<=0?s[c++]=t[h++]:s[c++]=t[a++];else if(h<r)s[c++]=t[h++];else{if(!(a<o))break;s[c++]=t[a++]}}r();var jf=/[a-zA-Z]/,Qf=/[0-9]/,Jf=/[0-9a-fA-F]/,$f=/^0x/i,t_=/^[0-9]+$/,e_=/^[0-9a-fA-F]+$/,i_=/^[0-7]+$/,s_=w.prototype.toString,n_=Array.isArray||function(t){return"[object Array]"===s_.call(t)},r_=void 0!==Po&&"symbol"==typeof Et;function o_(t){return n_(t)?t:Array.from(t)}function h_(t,e,i){var s=t[e];t[e]=t[i],t[i]=s}function a_(t){return t>=65&&t<=90}function u_(t){return a_(t)||function(t){return t>=97&&t<=122}(t)}function c_(t){return t>=48&&t<=57}function l_(t){return c_(t)||u_(t)}function d_(t){return c_(t)||t>=65&&t<=70||t>=97&&t<=102}function f_(t){return a_(t)?t+32:t}function __(t){return c_(t)?t-48:t>=65&&t<=70?t-65+10:t>=97&&t<=102?t-97+10:-1}function v_(t,e){return void 0===e&&(e=!1),0<=t&&t<=9?t+48:10<=t&&t<=15?t+(e?87:55):-1}var m_=_.min,g_=String.fromCharCode,p_=16384;function w_(t){for(var e=t.length,i=[],s=0;s<e;s+=p_){var n=m_(s+p_,e);i.push(g_.apply(null,t.slice(s,n)))}return i.join("")}var y_=2147483647,b_=/[^\0-\x7E]/,A_=/[\x2E\u3002\uFF0E\uFF61]/g,S_={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},T_=_.floor,k_=String.fromCharCode;function E_(t){throw new RangeError(S_[t])}function x_(t){for(var e=[],i=0,s=t.length;i<s;){var n=t.charCodeAt(i++);if(n>=55296&&n<=56319&&i<s){var r=t.charCodeAt(i++);56320==(64512&r)?e.push(((1023&n)<<10)+(1023&r)+65536):(e.push(n),i--)}else e.push(n)}return e}var R_,I_,C_,P_=function(t,e){return t+22+75*(t<26)-((0!=e)<<5)},D_=function(t,e,i){var s=0;for(t=i?T_(t/700):t>>1,t+=T_(t/e);t>455;s+=36)t=T_(t/35);return T_(s+36*t/(t+38))},N_=function(t){return function(t,e){var i=t.split("@"),s="";i.length>1&&(s=i[0]+"@",t=i[1]);var n=function(t,e){for(var i=[],s=t.length;s--;)i[s]=e(t[s]);return i}((t=t.replace(A_,".")).split("."),e).join(".");return s+n}(t,(function(t){return b_.test(t)?"xn--"+function(t){for(var e=[],i=(t=x_(t)).length,s=128,n=0,r=72,o=0,h=t;o<h.length;o++){var a=h[o];a<128&&e.push(k_(a))}var u=e.length,c=u;for(u&&e.push("-");c<i;){for(var l=y_,d=0,f=t;d<f.length;d++){var _=f[d];_>=s&&_<l&&(l=_)}var v=c+1;l-s>T_((y_-n)/v)&&E_("overflow"),n+=(l-s)*v,s=l;for(var m=0,g=t;m<g.length;m++){var p=g[m];if(p<s&&++n>y_&&E_("overflow"),p==s){for(var w=n,y=36;;y+=36){var b=y<=r?1:y>=r+26?26:y-r;if(w<b)break;var A=w-b,S=36-b;e.push(k_(P_(b+A%S,0))),w=T_(A/S)}e.push(k_(P_(w,0))),r=D_(n,v,c==u),n=0,++c}}++n,++s}return e.join("")}(t):t}))};function Gs(t){for(var e=[],i=0;i<t.length;i++){var s=t[i];s>65535&&(s-=65536,e.push(s>>>10&1023|55296),s=56320|1023&s),e.push(s)}return w_(e)}function M_(t){if(t>=55296&&t<=57343)throw new g("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value")}function L_(t,e){return t>>e&63|128}function B_(t,e){0!=(4294967168&t)?(0==(4294965248&t)?e.push(t>>6&31|192):0==(4294901760&t)?(M_(t),e.push(t>>12&15|224),e.push(L_(t,6))):0==(4292870144&t)&&(e.push(t>>18&7|240),e.push(L_(t,12)),e.push(L_(t,6))),e.push(63&t|128)):e.push(t)}function O_(t){for(var e=[],i=0;i<t.length;i++){B_(t[i],e)}return e}function F_(){if(C_>=I_)throw new g("Invalid byte index");var t=255&R_[C_];if(C_++,128==(192&t))return 63&t;throw new g("Invalid continuation byte")}function V_(){var t,e;if(C_>I_)throw new g("Invalid byte index");if(C_===I_)return!1;if(t=255&R_[C_],C_++,0==(128&t))return t;if(192==(224&t)){if((e=(31&t)<<6|F_())>=128)return e;throw new g("Invalid continuation byte")}if(224==(240&t)){if((e=(15&t)<<12|F_()<<6|F_())>=2048)return M_(e),e;throw new g("Invalid continuation byte")}if(240==(248&t)&&(e=(7&t)<<18|F_()<<12|F_()<<6|F_())>=65536&&e<=1114111)return e;throw new g("Invalid UTF-8 detected")}function W_(t){return[37,v_(t>>4),v_(15&t)]}function U_(t){return function(t){return t>=0&&t<=31}(t)||t>126}function G_(t){return U_(t)||32===t||34===t||60===t||62===t||96===t}function H_(t){return G_(t)||35===t||63===t||123===t||125===t}function Z_(t){return H_(t)||47===t||58===t||59===t||61===t||64===t||t>=91&&t<=94||124===t}function X_(t){return t<33||t>126||34===t||35===t||60===t||62===t}function z_(t){return X_(t)||39===t}function q_(t,e){if(!e(t))return[t];for(var i=O_([t]),s=[],n=0;n<i.length;n++){var r=i[n];s.push.apply(s,W_(r))}return s}function Y_(t,e){for(var i=[],s=0,n=x_(t);s<n.length;s++){var r=n[s];i.push.apply(i,q_(r,e))}return Gs(i)}function K_(t){return function(t){for(var e=[],i=t.length,s=0;s<i;s++){var n=t[s];if(37===n&&s+2<i&&d_(t[s+1])&&d_(t[s+2])){var r=__(t[s+1])<<4|__(t[s+2]);e.push(r),s+=2}else e.push(n)}return e}(O_(t))}function j_(t){return Gs(function(t){R_=t.slice(),I_=R_.length,C_=0;for(var e,i=[];!1!==(e=V_());)i.push(e);return i}(K_(x_(t))))}function Q_(t){var e=t.length,i=[0,0,0,0,0,0,0,0],s=0,n=null,r=0;if(r<e&&":"===t[r]){if(!(r+1<e&&":"===t[r+1]))throw new b;r+=2,n=s+=1}for(;r<e;){if(8===s)throw new b("Too many groups");if(":"!==t[r]){for(var o=0,h=0;h<4&&r<e&&Jf.test(t[r]);)o=o<<4|x(t[r],16),r+=1,h+=1;if("."===t[r]){if(0===h)throw new b;if(r-=h,s>6)throw new b;for(var a=0;r<e;){var u=null;if(a>0){if(!("."===t[r]&&a<4))throw new b;r+=1}if(!Qf.test(t[r]))throw new b;for(;r<e&&Qf.test(t[r]);){var c=x(t[r],10);if(null===u)u=c;else{if(0===u)throw new b;if((u=10*u+c)>255)throw new b}r+=1}i[s]=i[s]<<8|u,2!==(a+=1)&&4!==a||(s+=1)}if(4!==a)throw new b;break}if(":"===t[r]){if((r+=1)===e)throw new b}else if(r<e)throw new b;i[s]=o,s+=1}else{if(null!==n)throw new b("Too many :: groups");r+=1,n=s+=1}}if(null!==n){var l=s-n;for(s=7;0!==s&&l>0;)h_(i,s,n+l-1),s-=1,l-=1}else if(8!==s)throw new b;return i}function J_(t){var e=10,i=t_;return $f.test(t)?(t=t.slice(2),e=16,i=e_):t.length>=2&&"0"===t[0]&&(t=t.slice(1),e=8,i=i_),""===t?0:i.test(t)?x(t,e):void 0}var fr={Sp:4},$_=/[\0\t\n\r #%/:?@\[\\\]]/,ev=/[\0\t\n\r #/:?@\[\\\]]/;function iv(t,e){if("["===t[0]){if("]"!==t[t.length-1])throw new b("Invalid IPv6 address");return{Sp:2,Tp:Q_(t.slice(1,-1))}}if(!e)return function(t){if(ev.test(t))throw new b("Invalid code point in opaque host");var e=Y_(t,U_);return""===e?fr:{Sp:3,kp:e}}(t);var i=function(t){var e=function(t){return N_(t.toLowerCase())}(t);return e}(j_(t));if($_.test(i))throw new b("Invalid code point in host");var s=function(t){var e=t.split(".");if(""===e[e.length-1]&&e.pop(),!(e.length>4)){for(var i=[],s=0;s<e.length;s++){var n=e[s];if(""===n)return;var r=J_(n);if(void 0===r)return;i.push(r)}for(var o=0;o<i.length-1;o++)if(i[o]>255)throw new b;if(i[i.length-1]>=_.pow(256,5-i.length))throw new b;for(var h=i.pop(),a=0;a<i.length;a++)h+=i[a]*_.pow(256,3-a);return h}}(i);return void 0!==s?{Sp:1,Tp:s}:""===i?fr:{Sp:0,Ep:i}}function sv(t){switch(t.Sp){case 0:return t.Ep;case 1:return function(t){for(var e=[],i=t,s=1;s<=4;s++)e.push(""+(255&i)),4!==s&&e.push("."),i>>>=8;return e.reverse().join("")}(t.Tp);case 2:return"["+function(t){for(var e="",i=function(t){for(var e=0,i=0,s=0,n=0,r=0;r<8;r++)0===t[r]?(0===n&&(s=r),n++):(n>i&&(e=s,i=n),n=0);return n>i&&(e=s,i=n),i>1?e:null}(t),s=!1,n=0;n<8;n++){if(s){if(0===t[n])continue;s=!1}i!==n?(e+=t[n].toString(16),7!==n&&(e+=":")):(e+=0===n?"::":":",s=!0)}return e}(t.Tp)+"]";case 3:return t.kp;case 4:return""}}var nv=/\+/g;function rv(t){return 42===t||45===t||46===t||95===t||l_(t)}function ov(t){for(var e=t.split("&"),i=[],s=0;s<e.length;s++){var n=e[s];if(""!==n){var r=n.indexOf("="),o=void 0,h=void 0;-1!==r?(o=n.slice(0,r),h=n.slice(r+1)):(o=n,h=""),o=o.replace(nv," "),h=h.replace(nv," ");var a=j_(o),u=j_(h);i.push([a,u])}}return i}function hv(t){for(var e="",i=0;i<t.length;i++){var s=t[i];i>0&&(e+="&"),e+=av(O_(x_(s[0])))+"="+av(O_(x_(s[1])))}return e}function av(t){for(var e=[],i=0;i<t.length;i++){var s=t[i];32===s?e.push(43):rv(s)?e.push(s):e.push.apply(e,W_(s))}return w_(e)}var uv=/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/;function Or(t){var e=""+t,i=uv.exec(e);return i?function(t,e){for(var i=t.length,s=[],n=e;n<i;n++){var r=t.charCodeAt(n);if(lv(r))if(dv(r)||n===i-1)s.push(cv);else{var o=t.charCodeAt(n+1);dv(o)?(s.push(r,o),n++):s.push(cv)}else s.push(r)}return t.slice(0,e)+w_(s)}(e,i.index):e}var cv=65533,lv=function(t){return 55296==(63488&t)},dv=function(t){return 0!=(1024&t)};function fv(t,e){var i=t[0],s=e[0];return i===s?0:i<s?-1:1}function _v(t){t.D_.length=0}function vv(t,e){!function(t,e){for(var i=0;i<e.length;i++)t[i]=e[i];t.length=e.length}(t.D_,ov(e))}function mv(t){if(t.ic){var e=hv(t.D_);""===e&&(e=null),t.ic.ic.xp=e}}var gv=function(){function t(t){if(void 0===t&&(t=void 0),this.ic=null,null==t)this.D_=[];else if("object"==typeof t||"function"==typeof t)if(function(t){return t instanceof gv&&!!n_(t.D_)&&(!r_||t[Et]===pv)}(t))this.D_=t.D_.slice();else if(function(t){return null!=t&&(!!n_(t)||!!r_&&"function"==typeof t[Et])}(t)){this.D_=[];for(var e=0,i=o_(t);e<i.length;e++){var s=o_(i[e]);if(2!==s.length)throw new b("Invalid name-value pair");this.D_.push([Or(s[0]),Or(s[1])])}}else for(var n in this.D_=[],t)w.prototype.hasOwnProperty.call(t,n)&&this.D_.push([Or(n),Or(t[n])]);else(t=Or(t)).length>0&&"?"===t[0]&&(t=t.slice(1)),this.D_=ov(t)}var e=t.prototype;return e.append=function(t,e){t=Or(t),e=Or(e),this.D_.push([t,e]),mv(this)},e.delete=function(t){t=Or(t);for(var e=this.D_,i=0;i<e.length;){e[i][0]===t?e.splice(i,1):i++}mv(this)},e.get=function(t){t=Or(t);for(var e=this.D_,i=0;i<e.length;i++){var s=e[i];if(s[0]===t)return s[1]}return null},e.getAll=function(t){t=Or(t);for(var e=this.D_,i=[],s=0;s<e.length;s++){var n=e[s];n[0]===t&&i.push(n[1])}return i},e.has=function(t){t=Or(t);for(var e=this.D_,i=0;i<e.length;i++){if(e[i][0]===t)return!0}return!1},e.set=function(t,e){t=Or(t),e=Or(e);for(var i=this.D_,s=!1,n=0;n<i.length;){var r=i[n];r[0]===t?s?i.splice(n,1):(r[1]=e,s=!0,n++):n++}s||i.push([t,e]),mv(this)},e.sort=function(){Yf(this.D_,fv),mv(this)},e.toString=function(){return hv(this.D_)},e.entries=function(){return new Av(this.D_,wv)},e.keys=function(){return new Av(this.D_,yv)},e.values=function(){return new Av(this.D_,bv)},e.forEach=function(t){var e=this;this.D_.forEach((function(i){return t(i[1],i[0],e)}))},t}(),pv=gv.prototype.entries;r_&&(gv.prototype[Et]=pv);var wv=function(t){return[t[0],t[1]]},yv=function(t){return t[0]},bv=function(t){return t[1]},Av=function(){function t(t,e){this.Rp=0,this.D_=t,this.Ip=e}return t.prototype.next=function(){return this.Rp<this.D_.length?{done:!1,value:this.Ip(this.D_[this.Rp++])}:{done:!0,value:void 0}},t}(),Sv="null";var Xr=w.create(null);Xr.ftp=21,Xr.file=0,Xr.gopher=70,Xr.http=80,Xr.https=443,Xr.ws=80,Xr.wss=443;var Tv=/^(?:\.|%2e)$/i,kv=/^(?:\.|%2e){2}$/i;function Ev(t){return Tv.test(t)}function xv(t){return kv.test(t)}function Rv(t){return void 0!==Xr[t]}function xi(t){return Rv(t.Cp)}function Iv(t){return""!==t.Pp||""!==t.Dp}function Cv(t){var e=t.length;if(!(e>=2))return!1;if(!Dv(t.slice(0,2)))return!1;if(2!==e){var i=t[2];if(47!==i&&92!==i&&63!==i&&35!==i)return!1}return!0}function Pv(t){return 2===t.length&&jf.test(t[0])&&(":"===t[1]||"|"===t[1])}function Dv(t){return 2===t.length&&Pv(w_(t))}function Nv(t){return Pv(t)&&":"===t[1]}function Mv(t){var e=t.Np;0!==e.length&&("file"===t.Cp&&1===e.length&&Nv(e[0])||e.pop())}function Lv(t){return null===t.Mp||fr===t.Mp||t.Lp||"file"===t.Cp}var Hs=-1,Bv=/\t|\n|\r/g,Ov=/^[\x00-\x1f ]+|[\x00-\x1f ]+$/g;function Fv(t,e,i,s){void 0===i&&(i=null),void 0===s&&(s=null),i||(i=new Wv,t=t.replace(Ov,""));var n=null!==s?s:0;e=e||null;for(var r=[],o=!1,h=!1,a=!1,u=x_(t=t.replace(Bv,"")),c=u.length,l=0;l<=c;){var d=l<c?u[l]:Hs;switch(n){case 0:if(!u_(d)){if(null===s){r.length=0,n=2;continue}throw new b("Invalid scheme")}r.push(f_(d)),n=1;break;case 1:if(l_(d)||43===d||45===d||46===d)r.push(f_(d));else{if(58!==d){if(null===s){r.length=0,n=2,l=0;continue}throw new b("Invalid scheme")}var f=Gs(r);if(null!==s){if(Rv(i.Cp)&&!Rv(f))return;if(!Rv(i.Cp)&&Rv(f))return;if((Iv(i)||null!==i.Bp)&&"file"===f)return;if("file"===i.Cp&&(i.Mp===fr||null===i.Mp))return}if(i.Cp=f,null!==s)return void(xi(i)&&i.Bp===Xr[i.Cp]&&(i.Bp=null));r.length=0,"file"===i.Cp?n=13:xi(i)&&e&&e.Cp===i.Cp?n=3:xi(i)?n=7:47===u[l+1]?(n=4,l+=1):(i.Lp=!0,i.Np.push(""),n=18)}break;case 2:if(!e||e.Lp&&35!==d)throw new b("Invalid scheme");e.Lp&&35===d?(i.Cp=e.Cp,i.Np=e.Np.slice(),i.xp=e.xp,i.Op="",i.Lp=!0,n=20):"file"!==e.Cp?(n=5,l-=1):(n=13,l-=1);break;case 3:47===d&&47===u[l+1]?n=8:(n=5,l-=1);break;case 4:47===d?n=9:(n=17,l-=1);break;case 5:i.Cp=e.Cp,Hs===d?(i.Pp=e.Pp,i.Dp=e.Dp,i.Mp=e.Mp,i.Bp=e.Bp,i.Np=e.Np.slice(),i.xp=e.xp):47===d?n=6:63===d?(i.Pp=e.Pp,i.Dp=e.Dp,i.Mp=e.Mp,i.Bp=e.Bp,i.Np=e.Np.slice(),i.xp="",n=19):35===d?(i.Pp=e.Pp,i.Dp=e.Dp,i.Mp=e.Mp,i.Bp=e.Bp,i.Np=e.Np.slice(),i.xp=e.xp,i.Op="",n=20):92===d&&xi(i)?n=6:(i.Pp=e.Pp,i.Dp=e.Dp,i.Mp=e.Mp,i.Bp=e.Bp,i.Np=e.Np.slice(),i.Np.pop(),n=17,l-=1);break;case 6:!xi(i)||47!==d&&92!==d?47===d?n=9:(i.Pp=e.Pp,i.Dp=e.Dp,i.Mp=e.Mp,i.Bp=e.Bp,n=17,l-=1):n=8;break;case 7:if(47!==d||47!==u[l+1]){n=8;continue}n=8,l+=1;break;case 8:47!==d&&92!==d&&(n=9,l-=1);break;case 9:if(64===d){o&&r.unshift(37,52,48),o=!0;for(var _=0;_<r.length;_++){var v=r[_];if(58!==v||a){var m=Gs(q_(v,Z_));a?i.Dp+=m:i.Pp+=m}else a=!0}r.length=0}else if(Hs===d||47===d||63===d||35===d||xi(i)&&92===d){if(o&&0===r.length)throw new b("Invalid host");l-=r.length+1,r.length=0,n=10}else r.push(d);break;case 10:case 11:if(null!==s&&"file"===i.Cp)l-=1,n=15;else if(58!==d||h)if(Hs===d||47===d||63===d||35===d||xi(i)&&92===d){if(l-=1,xi(i)&&0===r.length)throw new b("Invalid host");if(null!==s&&0===r.length&&(Iv(i)||null!==i.Bp))return;var g=iv(Gs(r),xi(i));if(i.Mp=g,r.length=0,n=16,null!==s)return}else 91===d?h=!0:93===d&&(h=!1),r.push(d);else{if(0===r.length)throw new b("Invalid host");var p=iv(Gs(r),xi(i));if(i.Mp=p,r.length=0,n=12,11===s)return}break;case 12:if(c_(d))r.push(d);else{if(!(Hs===d||47===d||63===d||35===d||xi(i)&&92===d||null!==s))throw new b("Invalid port");if(0!==r.length){var w=x(Gs(r),10);if(w>65535)throw new b("Invalid port");i.Bp=w===Xr[i.Cp]?null:w,r.length=0}if(null!==s)return;n=16,l-=1}break;case 13:i.Cp="file",47===d||92===d?n=14:e&&"file"===e.Cp?Hs===d?(i.Mp=e.Mp,i.Np=e.Np.slice(),i.xp=e.xp):63===d?(i.Mp=e.Mp,i.Np=e.Np.slice(),i.xp="",n=19):35===d?(i.Mp=e.Mp,i.Np=e.Np.slice(),i.xp=e.xp,i.Op="",n=20):(Cv(u.slice(l))||(i.Mp=e.Mp,i.Np=e.Np.slice(),Mv(i)),n=17,l-=1):(n=17,l-=1);break;case 14:47===d||92===d?n=15:(e&&"file"===e.Cp&&!Cv(u.slice(l))&&(Nv(e.Np[0])?i.Np.push(e.Np[0]):i.Mp=e.Mp),n=17,l-=1);break;case 15:if(Hs===d||47===d||92===d||63===d||35===d)if(l-=1,null===s&&Dv(r))n=17;else if(0===r.length){if(i.Mp=fr,null!==s)return;n=16}else{var y=iv(Gs(r),xi(i));if(0===y.Sp&&"localhost"===y.Ep&&(y=fr),i.Mp=y,null!==s)return;r.length=0,n=16}else r.push(d);break;case 16:xi(i)?(n=17,47!==d&&92!==d&&(l-=1)):null===s&&63===d?(i.xp="",n=19):null===s&&35===d?(i.Op="",n=20):Hs!==d&&(n=17,47!==d&&(l-=1));break;case 17:if(Hs===d||47===d||xi(i)&&92===d||null===s&&(63===d||35===d)){var A=Gs(r);if(xv(A)?(Mv(i),47===d||xi(i)&&92===d||i.Np.push("")):!Ev(A)||47===d||xi(i)&&92===d?Ev(A)||("file"===i.Cp&&0===i.Np.length&&Dv(r)&&(fr!==i.Mp&&null!==i.Mp&&(i.Mp=fr),r[1]=58,A=Gs(r)),i.Np.push(A)):i.Np.push(""),r.length=0,"file"===i.Cp&&(Hs===d||63===d||35===d))for(;i.Np.length>1&&""===i.Np[0];)i.Np.shift();63===d?(i.xp="",n=19):35===d&&(i.Op="",n=20)}else r.push.apply(r,q_(d,H_));break;case 18:63===d?(i.xp="",n=19):35===d?(i.Op="",n=20):Hs!==d&&(i.Np[0]+=Gs(q_(d,U_)));break;case 19:null===s&&35===d?(i.Op="",n=20):Hs!==d&&(i.xp+=Gs(q_(d,xi(i)?z_:X_)));break;case 20:Hs===d||0===d||(i.Op+=Gs(q_(d,G_)))}l++}return i}function Vv(t,e,i,s){try{Fv(t,e,i,s)}catch(t){}}var Wv=function(){this.Cp="",this.Pp="",this.Dp="",this.Mp=null,this.Bp=null,this.Np=[],this.xp=null,this.Op=null,this.Lp=!1};function Uv(t){switch(t.Cp){case"blob":var e;try{e=Fv(t.Np[0],null)}catch(t){return Sv}return Uv(e);case"ftp":case"gopher":case"http":case"https":case"ws":case"wss":return function(t,e,i){return t+"://"+sv(e)+(null===i?"":":"+i)}(t.Cp,t.Mp,t.Bp);default:return Sv}}var Gv=function(){function t(t,e){var i,s=null;if(null!=e)if(function(t){return null!=t&&t instanceof Gv&&"object"==typeof t.ic}(e))s=e.ic;else try{s=Fv(String(e),null)}catch(t){throw new b("Invalid base URL: "+t.message)}try{i=Fv(String(t),s)}catch(t){throw new b("Invalid URL: "+t.message)}var n=i.xp;this.ic=i,this.xp=function(t){var e=new gv;return null!==t&&vv(e,t),e}(n),this.xp.ic=this}var e=t.prototype;return e.toString=function(){return this.href},e.toJSON=function(){return this.href},function(t,e,i){e&&qf(t.prototype,e),i&&qf(t,i)}(t,[{key:"href",get:function(){return function(t,e){void 0===e&&(e=!1);var i=t.Cp+":";if(null!==t.Mp?(i+="//",Iv(t)&&(i+=t.Pp,""!==t.Dp&&(i+=":"+t.Dp),i+="@"),i+=sv(t.Mp),null!==t.Bp&&(i+=":"+t.Bp)):null===t.Mp&&"file"===t.Cp&&(i+="//"),t.Lp)i+=t.Np[0];else for(var s=0,n=t.Np;s<n.length;s++)i+="/"+n[s];return null!==t.xp&&(i+="?"+t.xp),e||null===t.Op||(i+="#"+t.Op),i}(this.ic)},set:function(t){var e;try{e=Fv(String(t),null)}catch(t){throw new b("Invalid URL: "+t.message)}this.ic=e,_v(this.xp);var i=this.ic.xp;null!==i&&vv(this.xp,i)}},{key:"origin",get:function(){return Uv(this.ic)}},{key:"protocol",get:function(){return this.ic.Cp+":"},set:function(t){Vv(t+":",null,this.ic,0)}},{key:"username",get:function(){return this.ic.Pp},set:function(t){Lv(this.ic)||(this.ic.Pp=Y_(t,Z_))}},{key:"password",get:function(){return this.ic.Dp},set:function(t){Lv(this.ic)||(this.ic.Dp=Y_(t,Z_))}},{key:"host",get:function(){var t=this.ic,e=t.Mp;if(null===e)return"";var i=t.Bp,s=sv(e);return null!==i&&(s+=":"+i),s},set:function(t){this.ic.Lp||Vv(t,null,this.ic,10)}},{key:"hostname",get:function(){var t=this.ic.Mp;return null===t?"":sv(t)},set:function(t){this.ic.Lp||Vv(t,null,this.ic,11)}},{key:"port",get:function(){var t=this.ic.Bp;return null===t?"":""+t},set:function(t){Lv(this.ic)||(""===t?this.ic.Bp=null:Vv(t,null,this.ic,12))}},{key:"pathname",get:function(){var t=this.ic.Np;return this.ic.Lp?t[0]:0===t.length?"":"/"+t.join("/")},set:function(t){this.ic.Lp||(this.ic.Np.length=0,Vv(t,null,this.ic,16))}},{key:"search",get:function(){var t=this.ic.xp;return null===t||""===t?"":"?"+t},set:function(t){t=Or(t);var e=this.ic;if(""===t)return e.xp=null,void _v(this.xp);"?"===t[0]&&(t=t.slice(1)),e.xp="",Vv(t,null,e,19),vv(this.xp,t)}},{key:"searchParams",get:function(){return this.xp}},{key:"hash",get:function(){var t=this.ic.Op;return null===t||""===t?"":"#"+t},set:function(t){""!==t?("#"===t[0]&&(t=t.slice(1)),this.ic.Op="",Vv(t,null,this.ic,20)):this.ic.Op=null}}]),t}();function Hv(t){return t.document&&t.document.baseURI||t.location.href||""}function Zv(){let t=s,e=t.location.href;for(;t!==s.top;){t=t.parent;try{e=t.location.href}catch(t){}}return e}r();var Xv=class{Fp(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];Zf(...e)}Vp(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];vl(...e)}Wp(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];Xf(...e)}Up(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];zf(t,...i)}Gg(t,e){return u(t,e)}Gp(t,e){return p(t,e)}Ug(t){v(t)}Hp(t){m(t)}Zp(){return this.Xp.Zp()}zp(){return this.Xp.zp()}qp(){return this.Xp.qp()}Yp(){return this.Xp.Yp()}Kp(){return this.Xp.Kp()}jp(t,e){return this.Xp.jp(t,e)}Qp(t){return this.Xp.Qp(t)}get Jp(){return this.$p}Ih(t,e){let i;return void 0===e&&(e=Hv(s)),i="object"!=typeof e||e instanceof Gv?e:e.href,new Gv(t,i)}ew(t,e){if(void 0===e&&(e=Hv(s)),this.iw){const i=Yt(e)?e:e.toString();return new self.URL(t,i).href}return this.Ih(t,e).href}get Ys(){return this.nw}get ow(){return{hw:Ll&&Ll.userAgent.match(/Android /i)?"Android":"other",aw:Boolean(Ll&&Ll.userAgent.match(/Android 8.0.0/i))}}get uw(){return self&&self.location&&"https:"===self.location.protocol}get cw(){return"languages"in Ll?Ll.languages.slice():[Ll.language]}constructor(){this.$p=new zv,this.nw=Rf,this.iw=qv(),self.performance&&self.performance.now?this.Wg=()=>self.performance.now():this.Wg=Ba}},zv=class{get lw(){return Ll.oscpu}get Ys(){return Ll.platform}get dw(){return Ll.vendor}get fw(){return Ll.vendorSub}};function qv(){if(self.URL)try{const t=new self.URL("b","http://a");return t.pathname="c d","http://a/c%20d"===t.href}catch(t){}return!1}function ol(){return ol=w.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)w.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},ol.apply(this,arguments)}function Yv(){const t=w.create(null);return t._w=void 0,delete t._w,t}function Oh(){return new Jv}function ne(){return new $v}function Kv(t){const e=Oh();for(const i in t)Sa.call(t,i)&&e.set(i,t[i]);return e}function jv(t){const e=[];return t.forEach((t=>e.push(t))),e}r(),r(),r();var Qv="undefined"!=typeof Map&&"entries"in Map.prototype?Map:void 0,Jv=Qv||function(){class t{next(){const t=this.index;return t<this.keys.length?(this.index++,{value:this.selector(this.data,this.keys[t]),done:!1}):{value:void 0,done:!0}}constructor(t,e){this.index=0,this.data=t,this.selector=e,this.keys=w.keys(t)}}return class{get(t){return this.data[t]}set(t,e){return this.has(t)||this.size++,this.data[t]=e,this}has(t){return t in this.data}delete(t){return!!this.has(t)&&(this.size--,delete this.data[t],!0)}clear(){this.data=Yv(),this.size=0}keys(){return new t(this.data,((t,e)=>e))}values(){return new t(this.data,((t,e)=>t[e]))}entries(){return new t(this.data,((t,e)=>[e,t[e]]))}forEach(t){for(const e in this.data)t(this.data[e],e)}constructor(){this.data=Yv(),this.size=0}}}();var $v=Qv||function(){class t{next(){const t=this.mw.next();return t.done?t:{value:this.gw(t.value),done:!1}}constructor(t,e){this.mw=t,this.gw=e}}return class{get size(){return this.P_.size}get(t){return this.P_.get(""+t)}set(t,e){return this.P_.set(""+t,e),this}has(t){return this.P_.has(""+t)}delete(t){return this.P_.delete(""+t)}clear(){this.P_.clear()}keys(){return new t(this.P_.keys(),(t=>Number(t)))}values(){return this.P_.values()}entries(){return new t(this.P_.entries(),(t=>{let[e,i]=t;return[Number(e),i]}))}forEach(t){this.P_.forEach(((e,i)=>{t(e,Number(i))}))}constructor(){this.P_=Oh()}}}();r(),r();var tm=function(t){return t.pw="9a04f079-9840-4286-ab92-e65be0885f95",t.ww="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",t.yw="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",t.Aw="94ce86fb-07ff-4f43-adb8-93d2fa968ca2",t}({}),em="urn:mpeg:dash:mp4protection:2011",im="cenc",sm="sinf",nm="skd",rm="9a04f079-9840-4286-ab92-e65be0885f95",om="urn:uuid:"+rm,cu="com.microsoft.playready",hm="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",am="urn:uuid:"+hm,um="com.widevine.alpha",cm="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",lm="urn:uuid:"+cm,dm="94ce86fb-07ff-4f43-adb8-93d2fa968ca2",Ve="urn:uuid:"+dm,fm="com.apple.fps.1_0",_m="com.apple.streamingkeydelivery",vm="identity";r();var ue=function(t){return t.pw="playready",t.ww="widevine",t.Aw="fairplay",t.yw="clearkey",t.Sw="aes128",t}({}),mm={Tw:ue.pw,Ew:cu,xw:"cenc",Rw:rm,Iw:om,Cw:"PlayReady"},gm={Tw:ue.ww,Ew:um,xw:"cenc",Rw:hm,Iw:am,Cw:"Widevine"},pm={Tw:ue.Aw,Ew:fm,xw:"skd",Rw:dm,Iw:Ve,Cw:"FairPlay"},wm={Tw:ue.Aw,Ew:"com.apple.fps",xw:"sinf",Rw:dm,Iw:Ve,Cw:"FairPlay"},dr={Tw:ue.yw,Ew:"org.w3.clearkey",xw:"cenc",Rw:cm,Iw:lm,Cw:"ClearKey"},ym=[mm,gm,pm,dr],bm=[mm,gm,wm,dr];function Am(t){return ym.filter((e=>e.Iw===t.toLowerCase()))}r();var Sm="function"==typeof String.prototype.replaceAll?(t,e,i)=>t.replaceAll(e,i):(t,e,i)=>t.split(e).join(i);function Ga(t,e){return Bo(t)&&-1!==t.indexOf(e)}var Cl="function"==typeof String.prototype.startsWith?(t,e)=>Bo(t)&&t.startsWith(e):(t,e)=>Bo(t)&&t.substr(0,e.length)===e,Tm="function"==typeof String.prototype.endsWith?(t,e)=>Bo(t)&&t.endsWith(e):(t,e)=>Bo(t)&&t.substr(t.length-e.length,e.length)===e;function lh(t,e){return t.length===e.length&&t.toUpperCase()===e.toUpperCase()}var km="function"==typeof String.prototype.repeat?(t,e)=>t.repeat(e):(t,e)=>{let i=0|e;if(0===t.length||0===i)return"";let s=t,n="";for(;1==(1&i)&&(n+=s),i>>>=1,0!==i;)s+=s;return n},Jh="function"==typeof String.prototype.padStart?(t,e,i)=>(void 0===i&&(i=" "),t.padStart(e,i)):(t,e,i)=>{void 0===i&&(i=" ");let s=i;const n=(0|e)-t.length;return n<=0?t:(n>s.length&&(s+=km(s,n/s.length)),s.slice(0,n)+t)},Em=(String.prototype.padEnd,16384),xm="function"==typeof String.fromCodePoint?t=>t.length<=Em?String.fromCodePoint(...t):Im(t,String.fromCodePoint):t=>{const e=[];for(let i of t)i>65535&&(i-=65536,e.push(i>>>10&1023|55296),i=56320|1023&i),e.push(i);return Rm(e)};function Rm(t){return t.length<=Em?String.fromCharCode(...t):Im(t,String.fromCharCode)}function Im(t,e){const i=[];for(let s=0;s<t.length;s+=Em)i.push(e(...t.slice(s,s+Em)));return i.join("")}function Cm(t){return t.replace(/[\\"]/g,(t=>"\\"+t))}var Pm=Z.pm&&Z.ym>=42||Z.jm&&Z.Jm>=38||Z.Gm||Z.zm||Z.ag&&Z.dg>=29;function Dm(t,e){return Ga(t,"audio")?{initDataTypes:["cenc"],audioCapabilities:[ol({contentType:t},e?{robustness:"SW_SECURE_CRYPTO"}:{})]}:{initDataTypes:["cenc"],videoCapabilities:[ol({contentType:t},e?{robustness:"SW_SECURE_CRYPTO"}:{})]}}function Nm(){return void 0!==Ll&&"function"==typeof Ll.requestMediaKeySystemAccess}function Mm(){return"undefined"!=typeof HTMLMediaElement&&void 0!==HTMLMediaElement.prototype.webkitGenerateKeyRequest&&void 0!==HTMLMediaElement.prototype.webkitAddKey&&void 0!==HTMLMediaElement.prototype.webkitCancelKeyRequest}var Lm=class{Kp(){return this.Qp(gm)}zp(){return this.Qp(dr)}Yp(){return this.Qp(mm)}qp(){return this.Qp(pm)}Qp(t){const e=t.Iw,i=this.Pw.get(e);if(i)return i;const s=this.jp(t,'video/mp4; codecs="avc1.42000a"');return this.Pw.set(e,s),s}async jp(t,e){try{return await this.Nw.Dw(t.Ew,[Dm(e,!0)]),!0}catch(i){try{return await this.Nw.Dw(t.Ew,[Dm(e,!1)]),!0}catch(t){return!1}}}Zp(){return this.Mw||(this.Mw=this.Lw()),this.Mw}async Lw(){return"https:"!==s.location.protocol&&(!!Pm&&!await this.zp())}constructor(t){this.Pw=Oh(),this.Mw=void 0,this.Nw=t}};function Ii(t,e){return Om(t.slice(),e)}function Bm(t,e){const i=Om(t,e);return i!==t&&Fm(i,void 0,t.length,t),t}function Om(t,e){let i=t;const s=i.length;if(s<=1)return i;let n=new Array(s);for(let t=1;t<s;t*=2){Fm(i,e,t,n);const s=i;i=n,n=s}return i}function Fm(t,e,i,s){const n=t.length;let r=0;const o=2*i;let h,a,u,c,l;for(a=0;a<n;a+=o)for(u=a+i,h=u+i,u>n&&(u=n),h>n&&(h=n),c=a,l=u;;)if(c<u&&l<h)e&&e(t[c],t[l])<=0?s[r++]=t[c++]:s[r++]=t[l++];else if(c<u)s[r++]=t[c++];else{if(!(l<h))break;s[r++]=t[l++]}}r(),r(),r(),r(),r(),r(),r(),r(),r();var Pc=function(t){return t[t.eh=0]="eh",t[t.Bw=1]="Bw",t[t.Ow=-1]="Ow",t}({}),gr=(t,e)=>(0|t)-(0|e),Xa=(t,e)=>t===e?0:t<e?-1:t>e?1:S(t)?S(e)?0:1:-1;function Vm(t,e,i){return _s(t,e,i)?0:Xa(t,e)}var Wm=(t,e)=>gh(t,e)?0:Xa(t,e);var Um="function"==typeof Array.prototype.find?(t,e)=>t.find(e):(t,e)=>{const i=rn(t,e);return-1===i?void 0:t[i]},Fo=Um,Gm="function"==typeof Array.prototype.findLast?(t,e)=>t.findLast(e):(t,e)=>{const i=Zm(t,e);return-1===i?void 0:t[i]},Hm=Gm,rn="function"==typeof Array.prototype.findIndex?(t,e)=>t.findIndex(e):(t,e)=>{for(let i=0;i<t.length;i+=1){if(e(t[i],i,t))return i}return-1},Zm="function"==typeof Array.prototype.findLastIndex?(t,e)=>t.findLastIndex(e):(t,e)=>{for(let i=t.length-1;i>=0;i-=1){if(e(t[i],i,t))return i}return-1};function we(t,e){const i=t.indexOf(e);return-1!==i&&(uu(t,i),!0)}function uu(t,e){0===e?t.shift():t.splice(e,1)}function Xm(t,e){const i=new Array(t.length);let s=0,n=0;for(;n<t.length;){if(t[n]===e){n++,i.length-=1;break}i[s++]=t[n++]}for(;n<t.length;)i[s++]=t[n++];return i}function ms(t,e){return-1!==t.indexOf(e)}function zm(t,e,i){if(t===e)return!0;if(t.length!==e.length)return!1;for(let s=0;s<t.length;s+=1)if(!i(t[s],e[s]))return!1;return!0}function En(t){t.length=0}function qm(t,e){if(t.length!==e.length)return!1;for(const i of t)if(!ms(e,i))return!1;return!0}Array.prototype.flat;var on="function"==typeof Array.prototype.flatMap?(t,e)=>t.flatMap(e):(t,e)=>{const i=[];for(let s=0;s<t.length;s++)i.push(...e(t[s],s));return i};function Ws(t,e){return hh(t,((t,i)=>Xa(e(t),e(i))))}function Ym(t,e){return Km(t,((t,i)=>Xa(e(t),e(i))))}function hh(t,e){if(0!==t.length)return t.reduce(((t,i)=>e(t,i)<=0?t:i))}function Km(t,e){return hh(t,((t,i)=>e(i,t)))}function jm(t){return t.filter(((e,i)=>t.indexOf(e)===i))}function Qm(t,e){return Promise.all(t.map(e)).then((e=>t.filter(((t,i)=>e[i]))))}function Jm(t,e,i){if(t.length!==e.length)return!1;for(let s=0;s<t.length;s++)if(!i(t[s],e[s]))return!1;return!0}function gs(t,e,i){if(null!=e){if("object"!=typeof e&&"function"!=typeof e)throw new b("Object expected.");var s,n;if(i){if(!Mt)throw new b("Symbol.asyncDispose is not defined.");s=e[Mt]}if(void 0===s){if(!El)throw new b("Symbol.dispose is not defined.");s=e[El],i&&(n=s)}if("function"!=typeof s)throw new b("Object not disposable.");n&&(s=function(){try{n.call(this)}catch(t){return Promise.reject(t)}}),t.stack.push({value:e,dispose:s,async:i})}else i&&t.stack.push({async:!0});return e}r(),r(),r();var $m="function"==typeof SuppressedError?SuppressedError:function(t,e,i){var s=new g(i);return s.name="SuppressedError",s.error=t,s.suppressed=e,s};function co(t){function e(e){t.error=t.hasError?new $m(e,t.error,"An error was suppressed during disposal."):e,t.hasError=!0}var i,s=0;return function n(){for(;i=t.stack.pop();)try{if(!i.async&&1===s)return s=0,t.stack.push(i),Promise.resolve().then(n);if(i.dispose){var r=i.dispose.call(i.value);if(i.async)return s|=2,Promise.resolve(r).then(n,(function(t){return e(t),n()}))}else s|=1}catch(t){e(t)}if(1===s)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}()}r(),r();var tg=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];g.apply(this,e)};(tg.prototype=w.create(g.prototype)).constructor=tg;var ri=class extends tg{get name(){return"BaseError"}constructor(t,e){super(),this.message=t||"Unknown error",this.cause=e,g.captureStackTrace&&g.captureStackTrace(this,this.constructor)}},Bu=class extends ri{get name(){return"AbortError"}constructor(t,e){super(t||"Aborted",e)}};function Je(t){return t instanceof g&&"AbortError"===t.name}function J(t){if(t&&t.Fw)throw new Bu}function th(t){if(Je(t))throw t}function yu(t){if(!Je(t))throw t}function ou(t,e){return e?new Promise(((i,s)=>{if(e.Fw)return t.catch(Tt),s(new Bu);const n=()=>{e.Vw(n),s(new Bu)};e.Ww(n),t.then((t=>{e.Vw(n),i(t)}),(t=>{e.Vw(n),s(t)}))})):t}async function js(t,e){const i={stack:[],error:void 0,hasError:!1};try{gs(i,e,!1);return await t}catch(t){i.error=t,i.hasError=!0}finally{co(i)}}async function eg(t,e){const i={stack:[],error:void 0,hasError:!1};try{gs(i,e,!1);return await t(e.Uw)}catch(t){i.error=t,i.hasError=!0}finally{co(i)}}r(),r();var ig=class{Gw(){if(!this.Fw&&!this.Hw){this.Fw=!0;for(const t of this.Zw.slice())t();this.Xw()}}Xw(){if(!this.Hw){this.Hw=!0;for(const t of this.zw.slice())t();En(this.Zw),En(this.zw)}}Ww(t){this.Hw||this.Zw.push(t)}Vw(t){this.Hw||we(this.Zw,t)}qw(t){this.Hw||this.zw.push(t)}Yw(t){this.Hw||we(this.zw,t)}constructor(){this.Fw=!1,this.Hw=!1,this.Zw=[],this.zw=[]}},da=class t{get Uw(){return this.Kw}jw(){this.Kw.Gw()}Xw(){this.Kw.Xw()}Qw(t){const e=this.Kw;if(e.Fw)return;if(t.Fw)return void e.Gw();if(e.Hw||t.Hw)return;const i=()=>{s(),e.Gw()},s=()=>{t.Vw(i),t.Yw(s),e.Vw(i),e.Yw(s)};t.Ww(i),t.qw(s),e.Ww(i),e.qw(s)}Jw(){const e=new t,i=new t,s=e.Uw,n=i.Uw,r=this.Kw,o=()=>{s.Fw&&n.Hw||n.Fw&&s.Hw?r.Gw():s.Hw&&n.Hw&&r.Xw()};s.Ww(o),n.Ww(o),s.qw(o),n.qw(o),e.Qw(r),i.Qw(r);return r.qw((()=>{s.Vw(o),n.Vw(o),s.Yw(o),n.Yw(o)})),[e,i]}static $w(e){const i=new t;for(const t of e)void 0!==t&&i.Qw(t);return i}[El](){this.jw()}constructor(){this.Kw=new ig}},sg=Promise.resolve(),li="function"==typeof queueMicrotask?queueMicrotask:t=>{sg.then(t)};function ah(t){t.then(Tt,Tt)}async function Rs(t){try{return await Promise.all(t)}catch(e){throw await Promise.all(t.map((t=>t.catch(Tt)))),e}}function ke(t,e){return new Promise(((i,s)=>{if(void 0!==e&&e.Fw)return void s(new Bu);const n=Ms.Gg((()=>{void 0!==e&&e.Vw(r),i()}),t),r=()=>{Ms.Ug(n),s(new Bu)};void 0!==e&&e.Ww(r)}))}async function ng(t,e){const i={stack:[],error:void 0,hasError:!1};try{const s=gs(i,new da,!1);return await Promise.race([t,ke(e,s.Uw).then((()=>{throw new g("Timeout")}))])}catch(t){i.error=t,i.hasError=!0}finally{co(i)}}function rg(t,e,i){if("function"==typeof i)i.call(t,e);else for(const s of i)s.call(t,e)}var Co=class{bn(t,e){if("function"==typeof e)if("string"==typeof t)this.ey(t,e);else for(const i of t)this.ey(i,e)}ey(t,e){const i=this.iy[t];void 0===i?this.iy[t]=e:"function"==typeof i?this.iy[t]=[i,e]:0===this.sy?i.push(e):this.iy[t]=i.concat(e)}oy(t){if("function"!=typeof t)return;const e=this.uy;void 0===e?this.uy=t:"function"==typeof e?this.uy=[e,t]:0===this.sy?e.push(t):this.uy=e.concat(t)}Ro(){this.iy=Yv(),this.uy=void 0}_o(t){this.sy++;const e=this.iy[t.type],i=this.uy;void 0!==e&&rg(this.ly,t,e),void 0!==i&&rg(this.ly,t,i),this.sy--}vn(t,e){if("function"==typeof e)if("string"==typeof t)this._y(t,e);else for(const i of t)this._y(i,e)}_y(t,e){const i=this.iy[t];void 0!==i&&("function"==typeof i?i===e&&(this.iy[t]=void 0):0===this.sy?we(i,e):this.iy[t]=Xm(i,e))}vy(t){if("string"==typeof t)this.iy[t]=void 0;else for(const e of t)this.iy[e]=void 0}gy(t){const e=this.uy;void 0!==e&&("function"==typeof e?e===t&&(this.uy=void 0):0===this.sy?we(e,t):this.uy=Xm(e,t))}py(t,e){return new Promise(((i,s)=>{if(e&&e.Fw)return s(new Bu);const n=t=>{o(),i(t)},r=()=>{o(),s(new Bu)},o=()=>{this.vn(t,n),e&&e.Vw(r)};this.bn(t,n),e&&e.Ww(r)}))}constructor(t){this.iy=Yv(),this.uy=void 0,this.sy=0,this.Ds=t=>{this._o(t)},this.ly=null!=t?t:this}},og=class extends Co{_o(t){li((()=>{super._o(t)}))}},sn=class extends Co{oy(t){super.oy(t)}gy(t){super.gy(t)}};r(),r();var pe=class{constructor(t,e=new Date){this.type=t,this.date=e}};r();var Ti=function(t){return t.wy="yy",t.Ay="Sy",t.Ty="contentprotectionerror",t.Ey="contentprotectionsuccess",t.xy="currentsourcechange",t.Ry="destroy",t.Iy="durationchange",t.Cy="emptied",t.Py="encrypted",t.Dy="ended",t.Ny="My",t.Ly="By",t.Oy="Fy",t.Vy="Wy",t.Uy="loadstart",t.Gy="manifestupdate",t.Hy="nosupportedrepresentationfound",t.Zy="offline",t.Xy="online",t.zy="pause",t.ho="play",t.qy="progress",t.Yy="ratechange",t.Ky="representationchange",t.jy="resize",t.Qy="seeked",t.Jy="seeking",t.$y="segmentnotfound",t.eb="ib",t.sb="ob",t.uo="sourcechange",t.hb="timeupdate",t.ub="volumechange",t.fb="_b",t.vb="mb",t.gb="metricschange",t}({}),hg=["cenc"],ag=["cbcs","cbcs-1-9"],te=class extends pe{constructor(t){super(Ti.vb),this.pb=t}},jh=class extends pe{constructor(t,e,i,s){super("wb"),this.yb=t,this.bb=e,this.wb=i,this.Ab=s}},ug=class extends pe{constructor(){super("lt")}},kh=function(t){return t.Py="Sb",t.Tb="kb",t}({}),cg=class extends pe{constructor(t,e){super("Sb"),this.xw=t,this.Eb=e}},lg=class extends pe{constructor(){super("kb")}};r(),r(),r();var vh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),dg=16383,fg=/[\t\n\f\r ]/g;function ch(t){return 43===t?62:47===t?63:t>=48&&t<=57?t-48+52:t>=65&&t<=90?t-65:t>=97&&t<=122?t-97+26:_g()}function _g(){throw new g("Invalid base64 input")}function ha(t){let e=t;fg.test(e)&&(e=e.replace(fg,""));let i=e.length;i%4==0&&i>=1&&"="===e[i-1]&&(i>=2&&"="===e[i-2]?i-=2:i-=1,e=e.substr(0,i));const s=i%4;if(1===s)return _g();const n=0===s?0:4-s,r=new j(function(t,e){return 3*(t+e)/4-e}(i,n)),o=n>0?i-4:i;let h,a=0,u=0;for(;a<o;a+=4)h=ch(e.charCodeAt(a))<<18|ch(e.charCodeAt(a+1))<<12|ch(e.charCodeAt(a+2))<<6|ch(e.charCodeAt(a+3)),r[u++]=h>>16&255,r[u++]=h>>8&255,r[u++]=255&h;return 2===n?(h=ch(e.charCodeAt(a))<<2|ch(e.charCodeAt(a+1))>>4,r[u++]=255&h):1===n&&(h=ch(e.charCodeAt(a))<<10|ch(e.charCodeAt(a+1))<<4|ch(e.charCodeAt(a+2))>>2,r[u++]=h>>8&255,r[u++]=255&h),r}function vg(t,e,i){return vh[t>>2]+vh[(3&t)<<4|e>>4]+vh[(15&e)<<2|i>>6]+vh[63&i]}function mg(t,e,i){const s=[];for(let n=e;n<i;n+=3)s.push(vg(t[n],t[n+1],t[n+2]));return s.join("")}function Nh(t){const e=t.length,i=e%3,s=[],n=e-i;for(let e=0;e<n;e+=dg)s.push(mg(t,e,_.min(n,e+dg)));if(1===i){const i=t[e-1];s.push(vh[i>>2]+vh[(3&i)<<4]+"==")}else if(2===i){const i=t[e-2],n=t[e-1];s.push(vh[i>>2]+vh[(3&i)<<4|n>>4]+vh[(15&n)<<2]+"=")}return s.join("")}function gg(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/[=]/g,"")}function eu(t,e){const i=e.nc,s=t.getUint8(i>>3),n=1<<7-(7&i);return e.xb(1),(s&n)===n?1:0}function jo(t,e,i){let s=0;for(let n=0;n<i;n++)s=2*s+eu(t,e);return s}r(),r();var pg=class t{get nc(){return this.rc}xb(t){this.rc+=t}Rb(t){this.rc=t}Ib(){return new t(this.nc)}constructor(t=0){this.rc=t}};var wg=_.clz32||function(t){let e=32,i=t>>16;return i&&(e-=16,t=i),i=t>>8,i&&(e-=8,t=i),i=t>>4,i&&(e-=4,t=i),i=t>>2,i&&(e-=2,t=i),i=t>>1,i?e-2:e-t};function yg(t){if(t>=55296&&t<=57343)throw new g("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value")}function bg(t,e){return t>>e&63|128}function Ag(t,e){0!=(4294967168&t)?(0==(4294965248&t)?e.push(t>>6&31|192):0==(4294901760&t)?(yg(t),e.push(t>>12&15|224),e.push(bg(t,6))):0==(4292870144&t)&&(e.push(t>>18&7|240),e.push(bg(t,12)),e.push(bg(t,6))),e.push(63&t|128)):e.push(t)}function Sg(t,e){if(e.nc>=t.length)throw new g("Invalid byte index");const i=255&t[e.nc];if(e.xb(1),128==(192&i))return 63&i;throw new g("Invalid continuation byte")}function Tg(t,e){const i=e.nc;if(i>t.length)throw new g("Invalid byte index");if(i===t.length)return!1;const s=255&t[i];if(e.xb(1),0==(128&s))return s;if(192==(224&s)){const i=(31&s)<<6|Sg(t,e);if(i>=128)return i;throw new g("Invalid continuation byte")}if(224==(240&s)){const i=(15&s)<<12|Sg(t,e)<<6|Sg(t,e);if(i>=2048)return yg(i),i;throw new g("Invalid continuation byte")}if(240==(248&s)){const i=(7&s)<<18|Sg(t,e)<<12|Sg(t,e)<<6|Sg(t,e);if(i>=65536&&i<=1114111)return i}throw new g("Invalid UTF-8 detected")}r(),r();var kg=65279;var Eg=[128,64,32,16,8,4,2,1],xg=class{Cb(t){return Rg(this.Pb,t)}constructor(t){this.Pb=t}};function Rg(t,e){return(t&e)===e}function il(t,e){return Rg(t,Eg[e])}function hc(t,e){const i=t.getUint8(e.nc);return e.xb(1),i}function Ig(t,e,i){t.setUint8(e.nc,i),e.xb(1)}function E(t,e,i){const s=si(ua(t),e.nc,e.nc+i);return e.xb(s.byteLength),s}function Cg(t,e,i){ua(t).set(ua(i),e.nc),e.xb(i.byteLength)}function Pg(t,e,i){return e.nc+i<=t.byteLength}function Dg(t,e,i,s){return void 0===s&&(s=!1),s?function(t,e,i){let s=0,n=1;for(let r=0;r<i;r++)s+=hc(t,e)*n,n*=256;return s}(t,e,i):function(t,e,i){let s=0;for(let n=0;n<i;n++)s=256*s+hc(t,e);return s}(t,e,i)}function Ng(t,e){const i=t.getUint8(e.nc);return e.xb(1),i}function Ei(t,e,i){void 0===i&&(i=!1);const s=t.getUint16(e.nc,i);return e.xb(2),s}function Mg(t,e,i,s){void 0===s&&(s=!1),t.setUint16(e.nc,i,s),e.xb(2)}function $h(t,e,i){void 0===i&&(i=!1);const s=t.getUint32(e.nc,i);return e.xb(4),s}function kl(t,e,i,s){void 0===s&&(s=!1),t.setUint32(e.nc,i,s),e.xb(4)}function Hr(t,e,i){void 0===i&&(i=!1);const s=$h(t,e,i),n=$h(t,e,i),r=i?n:s,o=i?s:n;return vo.fromBits(o,r,!0)}function Lg(t,e,i,s){void 0===s&&(s=!1);const n=i.getHighBitsUnsigned(),r=i.getLowBitsUnsigned(),o=s?n:r;kl(t,e,s?r:n,s),kl(t,e,o,s)}function Bg(t,e){return Yr(t,e)}function Sc(t,e,i){return Rm(Jg(E(t,e,i)))}function Og(t,e){const i=hc(t,e);let s;return 0==(128&i)?s=i:192==(224&i)?s=64*(31&i)+(63&hc(t,e)):224==(240&i)?s=4096*(15&i)+64*(63&hc(t,e))+(63&hc(t,e)):240==(248&i)&&(s=262144*(7&i)+4096*(63&hc(t,e))+64*(63&hc(t,e))+(63&hc(t,e))),s}function Yr(t,e){return Fg(t,e,!0)}function Fg(t,e,i){const s=[];for(;e.nc<t.byteLength;){const n=hc(t,e);if(i&&!n)break;s.push(n)}return Rm(s)}function Vg(t,e,i){const s=i.length;for(let n=0;n<s;n+=1){Ig(t,e,i.charCodeAt(n))}}function Wg(t,e){if(!(e.nc+2<=t.byteLength))return;const i=t.getUint8(e.nc),s=t.getUint8(e.nc+1);return(254!==i||255!==s)&&(255===i&&254===s||void 0)}function Ug(t,e){const i=Wg(t,e);return void 0!==i&&e.xb(2),yr(t,e,!0===i)}function yr(t,e,i){return void 0===i&&(i=!1),Gg(t,e,i,!0)}function Gg(t,e,i,s){const n=[];for(;e.nc+2<=t.byteLength;){const r=Ei(t,e,i);if(s&&!r)break;n.push(r)}return Rm(n)}function Hg(t,e,i,s){void 0===s&&(s=!1);const n=i.length;for(let r=0;r<n;r+=1){Mg(t,e,i.charCodeAt(r),s)}}function uh(t){return Fg(ra(t),new Ri,!1)}function Zg(t){const e=new j(t.length);return Vg(ra(e),new Ri,t),e}function Xg(t,e){return void 0===e&&(e=!1),Gg(ra(t),new Ri,e,!1)}function zg(t,e){void 0===e&&(e=!1);const i=new j(2*t.length);return Hg(ra(i),new Ri,t,e),i}function qg(t,e){return e.nc+3<=t.byteLength&&(239===t.getUint8(e.nc)&&187===t.getUint8(e.nc+1)&&191===t.getUint8(e.nc+2))}function Va(t,e){return function(t,e,i){const s=[],n=qg(t,e);n&&e.xb(3);for(;e.nc<t.byteLength;){const n=Og(t,e);if(void 0===n)break;if(i&&0===n)break;s.push(n)}return xm(s)}(t,e,!0)}function ar(t){return function(t){return xm(t)}(function(t,e){const i=[],s=new Ri;let n;if(!e){if(n=Tg(t,s),!1===n)return i;n===kg||i.push(n)}for(;!1!==(n=Tg(t,s));)i.push(n);return i}(ua(t)))}function Yg(t){return new j(function(t){const e=[];for(const i of t)Ag(i,e);return e}(function(t){const e=[];let i=0;const s=t.length;for(;i<s;){const n=t.charCodeAt(i++);if(n>=55296&&n<=56319&&i<s){const s=t.charCodeAt(i++);56320==(64512&s)?e.push(((1023&n)<<10)+(1023&s)+65536):(e.push(n),i--)}else e.push(n)}return e}(t)))}function Kg(t,e){if(qg(t,e))return Va(t,e);if(void 0!==Wg(t,e))return Ug(t,e);if(e.nc+4<=t.byteLength){if(0===t.getUint8(e.nc)&&0===t.getUint8(e.nc+2))return yr(t,e,!1);if(0===t.getUint8(e.nc+1)&&0===t.getUint8(e.nc+3))return yr(t,e,!0)}return Va(t,e)}function si(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=t.byteLength),new j(t.buffer,t.byteOffset+e,i-e)}function jg(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=t.byteLength),new DataView(t.buffer,t.byteOffset+e,i-e)}function ra(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function ua(t){return new j(t.buffer,t.byteOffset,t.byteLength)}function Qg(t){return t instanceof ArrayBuffer||ip(t)}function na(t){return t instanceof ArrayBuffer?new j(t):ua(t)}function Rc(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=t.byteLength),t.slice?t.slice(e,i):fc(si(t,e,i))}function fc(t){if(t.slice)return t.slice(0);{const e=new j(t.byteLength);return e.set(t,0),e}}function Jg(t){return[].slice.call(t)}var Ri=class t{get nc(){return this.rc}xb(t){this.rc+=t}Rb(t){this.rc=t}Ib(){return new t(this.nc)}Db(){return new pg(this.nc<<3)}constructor(t=0){this.rc=t}};function $g(t){let e=t.toLowerCase(),i=0,s=0;Cl(e,"0x")&&(e=e.substring(2));const n=new j(_.ceil(e.length/2));for(1==(1&e.length)&&(i=1,n[s++]=x(e[0],16));i<e.length;i+=2)n[s++]=x(e.substr(i,2),16);return n}function tp(t){return.001*t}var ep=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]","[object DataView]"],ip=ArrayBuffer.isView||(t=>t&&ms(ep,gd.call(t)));function Ph(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;return _e(new j(t),new j(e))}function _e(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;if(t.buffer===e.buffer&&t.byteOffset===e.byteOffset)return!0;for(let i=0;i<t.length;i+=1)if(t[i]!==e[i])return!1;return!0}function sp(t,e){return t===e||_e(na(t),na(e))}function mu(t){const e=t.reduce(((t,e)=>t+e.byteLength),0);return np(t,e)}function np(t,e){const i=new j(e);let s=0;for(const e of t)i.set(e,s),s+=e.byteLength;return i}function rp(t,e,i){const s=new j(t.byteLength+e.byteLength),n=si(t,0,i),r=si(t,i);return s.set(n),s.set(e,i),s.set(r,i+e.byteLength),s}function pr(t){return ha(t).buffer}function op(t){return Nh(new j(t))}function kr(t){return Nh(Zg(t))}var br=new j([0]).buffer,hp=class{get Nb(){return this.tc.length}Mb(t){for(const e of this.tc)if(sp(e[0],t))return!0;return!1}Lb(t){for(const e of this.tc)if(sp(e[0],t))return e[1]}Bb(t,e){for(const i of this.tc)if(sp(i[0],t))return void(i[1]=e);this.tc.push([t,e])}Ob(t,e){this.tc.forEach((e=>t(e[1],e[0])),e)}Fb(){En(this.tc)}constructor(){this.tc=[]}};r();var os=class{Vb(t){this.Gd&&(this.Gd(t),this.Xw())}Wb(t){this.Hd&&(this.Hd(t),this.Xw())}jw(){this.Ub.catch(Tt),this.Wb(new Bu)}Qw(t){t.then((t=>this.Vb(t)),(t=>this.Wb(t)))}Xw(){this.Gd=void 0,this.Hd=void 0}constructor(){this.Ub=new Promise(((t,e)=>{this.Gd=t,this.Hd=e}))}};function ap(){return new j([8,4]).buffer}function up(t,e){return t===cu?function(t){if(t.byteLength<2*cp.length)return t;const e=new DataView(t,0,2*cp.length),i=Xg(e,!0);if(i===cp)return t;return function(t){const e='<PlayReadyKeyMessage type="LicenseAcquisition"><LicenseAcquisition Version="1"><Challenge encoding="base64encoded">',i='</Challenge><HttpHeaders><HttpHeader><name>Content-Type</name><value>text/xml; charset=utf-8</value></HttpHeader><HttpHeader><name>SOAPAction</name><value>"http://schemas.microsoft.com/DRM/2007/03/protocols/AcquireLicense"</value></HttpHeader></HttpHeaders></LicenseAcquisition></PlayReadyKeyMessage>',s=""+e+op(t)+i;return zg(s,!0).buffer}(t)}(e):e}r();var cp="<PlayReady";r(),r();var Js=class extends ri{constructor(t,e,i,s){super(t,s),this.Gb=e,this.Hb=i}};r(),r(),r(),r(),r();var lp=function(t,e){return(lp=w.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)w.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)};function Dt(t,e){if("function"!=typeof e&&null!==e)throw new b("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}lp(t,e),t.prototype=null===e?w.create(e):(i.prototype=e.prototype,new i)}function dp(t,e,i){return t.indexOf?t.indexOf(e,i):Array.prototype.indexOf.call(t,e,i)}r(),r(),r(),r(),r(),r(),r();!function(){function t(t,e){this.Zb=t,this.Xb=e}t.prototype.get=function(t){var e=this.Zb.get(t);if(0===this.Xb||void 0===e)return e;var i=this.Zb.get(t+1)||0,s=e&(1<<8-this.Xb)-1,n=i>>8-this.Xb;return(s<<this.Xb)+n},t.prototype.getBit=function(t){if(!(t<0)){var e=this.Zb.get(_.floor((t+this.Xb)/8));if(void 0!==e)return(e&1<<7-this.Xb-t%8)>0?1:0}},w.defineProperty(t.prototype,"bitLength",{get:function(){return this.Zb.bitLength-this.Xb},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"length",{get:function(){return this.Zb.length},enumerable:!1,configurable:!0})}();r(),r();_.pow(2,-52);function fp(t,e,i){return _.min(_.max(t,e),i)}function _p(t,e){return t>>8-e}function vp(t,e){return t&(1<<e)-1}var so=function(){function t(t){this.zb=t,this.qb=0,this.Yb=0}return w.defineProperty(t.prototype,"totalBitsRead",{get:function(){return 8*this.qb+this.Yb},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"done",{get:function(){return this.qb===this.zb.length&&0===this.Yb},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"location",{get:function(){return{byte:this.qb,bit:this.Yb}},enumerable:!1,configurable:!0}),t.prototype.copy=function(){var e=new t(this.zb);return e.seek(this.qb,this.Yb),e},t.prototype.canReadBits=function(t){return 8*this.qb+t+this.Yb<=8*this.zb.length},t.prototype.canReadBytes=function(t){return 0===this.Yb?this.qb+t<=this.zb.length:this.qb+t<this.zb.length},t.prototype.incBit=function(){this.Yb++,this.Yb>7&&(this.qb++,this.Yb=0)},t.prototype.seek=function(t,e){this.qb=t,this.Yb=e},t.prototype.peekBit=function(){if(!this.canReadBits(1))throw new g("Cannot read past end of buffer.");return this.zb.get(this.qb)>>7-this.Yb&1},t.prototype.readBit=function(){var t=this.peekBit();return this.incBit(),t},t.prototype.readByte=function(){if(!this.canReadBytes(1))throw new g("Cannot read past end of buffer.");if(0===this.Yb)return this.zb.get(this.qb++);var t=vp(this.zb.get(this.qb),8-this.Yb),e=_p(this.zb.get(this.qb+1),this.Yb);return this.qb++,t<<this.Yb|e},t.prototype.readBits=function(t){if(!this.canReadBits(t))throw new g("Cannot read past end of buffer.");for(var e=[],i=0;i<t;i++)e.push(this.readBit());return e},t.prototype.readUInt=function(t){if(t>32)throw new g("The max bitlength that can be provided is 32.");if(!this.canReadBits(t))throw new g("Cannot read past end of buffer.");var e=0;if(0===this.Yb&&t%8==0)for(var i=t-8;i>=0;i-=8)e|=this.readByte()<<i;else for(i=t-1;i>=0;i--)e|=this.readBit()<<i;return e},t.prototype.readInt=function(t){if(t>32)throw new g("The max bitlength that can be provided is 32.");if(!this.canReadBits(t))throw new g("Cannot read past end of buffer.");var e=this.readUInt(t);return 0===(e&1<<t-1)?e:e-_.pow(2,t)},t.prototype.readExponentialGolombCode=function(){for(var t=0;0===this.readBit();)t++;var e=1<<t;return e+=this.readUInt(t)-1},t.prototype.readSignedExponentialGolombCode=function(){var t=this.readExponentialGolombCode();return 1&t?(t+1)/2:-t/2},t.prototype.skipBits=function(t){if(!this.canReadBits(t))throw new g("Skipping over the buffer edge is not allowed.");var e=this.Yb+t;this.qb+=e>>3,this.Yb=7&e},t.prototype.readBool=function(){return this.readBit()>0},t.prototype.readString=function(t){if(!this.canReadBytes(t))throw new g("Cannot read past end of buffer.");for(var e=[],i=0;i<t;i++)e.push(this.readByte());return String.fromCharCode.apply(String,e)},t}();r(),r(),r();var mp=function(t,e){return t===e?0:t<e?-1:t>e?1:S(t)?S(e)?0:1:-1},D=function(){function t(){this.Kb=[],this.jb=[],this.Qb=0}return t.from=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];for(var s=new t,n=0,r=e;n<r.length;n++){var o=r[n];s.pushRange(o)}return s},t.prototype.pushRange=function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=t.length),i<0)throw new g("The buffer length must be positive.");if(0!==i){if(0===this.jb.length)this.jb.push(0);else{var s=this.jb[this.jb.length-1]+this.Kb[this.Kb.length-1].length;this.jb.push(s)}this.Kb.push(t.subarray(e,e+i)),this.Qb+=i}},t.prototype.concat=function(e){var i=new t;return i.pushRange(this.join()),i.pushRange(e.join()),i},t.prototype.copy=function(t,e,i,s){if(void 0===e&&(e=0),void 0===i&&(i=0),void 0===s&&(s=this.length),e<0||i<0||s<0)throw new RangeError;return this.slice(i,s).copyInternal(t,e)},t.prototype.copyInternal=function(t,e){for(var i=0,s=e,n=0,r=this.Kb;n<r.length;n++){var o=r[n];t.set(o,s),i+=o.length,s+=o.length}return i},t.prototype.clear=function(){this.Kb=[],this.jb=[],this.Qb=0},t.prototype.get=function(t){if(!(t<0||t>=this.length)){var e=this.findContainingBufferIndex(t),i=t-this.jb[e];return this.Kb[e][i]}},w.defineProperty(t.prototype,"first",{get:function(){return this.get(0)},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){if(this.Kb.length<1)return-1;if(this.Kb.length>1){var e=this.join();this.clear(),this.pushRange(e)}var i=this.Kb[0];return"number"==typeof t?dp(i,t):"undefined"!=typeof Buffer?Buffer.from(i.buffer,i.byteOffset,i.byteLength).indexOf(t):function(t,e){if(0===e.length)return 0;for(var i=e[0],s=e.length,n=t.length-s,r=0;r<=n&&!((r=dp(t,i,r))<0||r>n);r++){for(var o=r+1,h=r+s,a=1;o<h&&t[o]===e[a];o++,a++);if(o===h)return r}return-1}(i,t)},t.prototype.findContainingBufferIndex=function(t){return function(t,e,i){if(0!==t.length){var s=0,n=t.length-1;if(1!==i(t[s],e)){if(1===i(e,t[n]))return n;for(;s!==n;){var r=_.ceil((s+n)/2);i(t[r],e)<=0?s=r:n=r-1}return s}}}(this.jb,t,mp)},t.prototype.join=function(){if(1===this.Kb.length)return this.Kb[0];var t=new j(this.length);return this.copyInternal(t,0),t},w.defineProperty(t.prototype,"length",{get:function(){return this.Qb},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"bitLength",{get:function(){return 8*this.length},enumerable:!1,configurable:!0}),t.prototype.readUIntBE=function(t,e){if(e<=0||e>4)throw new g("Expected byteLength to be between 0 and 4 but was "+e);if(t<0||t>this.length-e)throw new g("Offset must be between 0 and buffer.length - byteLength, but was "+t+" (max allowed "+(this.length-e)+")");if(1===e)return this.get(t);for(var i=0,s=0;s<e;s++)i+=this.get(t+s)*_.pow(2,8*(e-s-1));return i},t.prototype.slice=function(e,i){void 0===i&&(i=this.length);var s=fp(e,0,this.length),n=fp(i,0,this.length);if(s>n)return new t;if(s===n)return new t;for(var r=new t,o=this.findContainingBufferIndex(s),h=this.Kb[o],a=s,u=a-this.jb[o];a+h.length-u<n;)r.pushRange(h,u,h.length-u),o+=1,u=(a+=h.length-u)-this.jb[o],h=this.Kb[o];var c=n-a;return r.pushRange(h,u,c),r},t.prototype.trim=function(){if(0===this.length)return new t;for(var e=this.length-1,i=this.Kb.length-1,s=this.Kb[i],n=s.length-1;e>=0&&i>=0;){if(0!==s[n])break;if(0===n){if(0===i)return new t;i-=1,n=(s=this.Kb[i]).length-1}else n-=1;e-=1}return this.slice(0,e+1)},t}(),gp=function(){function t(e){this.Jb=e||t.BUFFER_CHUNK_SIZE,this.$b=!1,this.tA=new D,this.zb=new j(this.Jb),this.eA=0,this.iA=0,this.Yb=7}return t.prototype.closeByte=function(){this.zb[this.eA++]=this.iA,this.eA>=this.Jb&&this.closeBuffer(),this.iA=0,this.Yb=7},t.prototype.closeBuffer=function(t){void 0===t&&(t=!0),0!==this.eA&&(this.tA.pushRange(this.zb,0,this.eA),t&&(this.zb=new j(this.Jb)),this.eA=0)},w.defineProperty(t.prototype,"isWritingStartBit",{get:function(){return 7===this.Yb},enumerable:!1,configurable:!0}),t.prototype.close=function(){if(this.$b)throw new g("Cannot close a closed BitWriter.");return this.isWritingStartBit||this.closeByte(),this.closeBuffer(!1),this.$b=!0,this.tA},t.prototype.writeBit=function(t){if(this.$b)throw new g("Cannot write to a closed BitWriter.");this.iA|=t<<this.Yb,0===this.Yb?this.closeByte():this.Yb--},t.prototype.writeByte=function(t){if(this.$b)throw new g("Cannot write to a closed BitWriter.");this.isWritingStartBit?(this.iA=t,this.closeByte()):this.writeByteUnaligned(t)},t.prototype.writeByteUnaligned=function(t){var e=this.Yb;this.iA|=_p(t,e+1),this.closeByte(),this.iA=vp(t,8-e)<<e+1,this.Yb=e},t.prototype.writeBits=function(t){for(var e=0,i=t;e<i.length;e++){var s=i[e];this.writeBit(s)}},t.prototype.writeBytes=function(t){if(this.$b)throw new g("Cannot write to a closed BitWriter.");this.isWritingStartBit?this.writeBytesAligned(t):this.writeBytesUnaligned(t)},t.prototype.writeBytesAligned=function(t){this.eA+t.length<=this.Jb?(this.zb.set(t,this.eA),this.eA+=t.length,this.eA===this.Jb&&this.closeBuffer()):(this.closeBuffer(),this.tA.pushRange(t))},t.prototype.writeBytesUnaligned=function(t){if(0!==t.length){var e=this.Yb;this.iA|=_p(t[0],e+1),this.closeByte();for(var i=1;i<t.length;i++){var s=vp(t[i-1],8-e),n=_p(t[i],e+1);this.iA=s<<e+1|n,this.closeByte()}this.iA=vp(t[t.length-1],8-e)<<e+1,this.Yb=e}},t.prototype.writeUInt=function(t,e){if(t<0)throw new g("Received a negative number.");if(e>32)throw new g("The max bitlength that can be provided is 32.");if(t>=_.pow(2,e))throw new g("Uint "+t+" cannot be represented in "+e+" bit(s).");if(this.isWritingStartBit&&e%8==0)for(var i=e-8;i>=0;i-=8)this.writeByte(t>>i&255);else for(i=e-1;i>=0;i--)this.writeBool((t&1<<i)>0)},t.prototype.writeInt=function(t,e){if(e>32)throw new g("The max bitlength that can be provided is 32.");if(_.abs(t)>=_.pow(2,e-1))throw new g("Signed integer "+t+" cannot be represented in "+e+" bit(s).");t<0?this.writeUInt(t+_.pow(2,e),e):this.writeUInt(t,e)},t.prototype.writeExponentialGolombCode=function(t){if(t<0)throw new g("Received a negative number.");for(var e=_.floor(_.log2(t+1))+1,i=0;i<e-1;i++)this.writeBit(0);this.writeUInt(t+1,e)},t.prototype.writeSignedExponentialGolombCode=function(t){0===t?this.writeExponentialGolombCode(0):t<0?this.writeExponentialGolombCode(-2*t):this.writeExponentialGolombCode(2*t-1)},t.prototype.padByte=function(t){for(;!this.isWritingStartBit;)this.writeBit(t)},t.prototype.writeBool=function(t){this.writeBit(t?1:0)},t.prototype.writeString=function(t){for(var e=function(t){for(var e=new j(t.length),i=0;i<t.length;i++)e[i]=t.charCodeAt(i);return e}(t),i=0;i<e.length;i++)this.writeByte(e[i])},t.BUFFER_CHUNK_SIZE=1024,t}();r();var pp=function(){function t(t){this.rb=new D,this.Jd=t}return t.prototype.closeWriter=function(){void 0!==this.Jd&&(this.rb=this.rb.concat(this.Jd.close()),this.Jd=void 0)},w.defineProperty(t.prototype,"writer",{get:function(){return void 0===this.Jd&&(this.Jd=new gp),this.Jd},enumerable:!1,configurable:!0}),t.prototype.concat=function(t){this.closeWriter(),this.rb=this.rb.concat(t)},t.prototype.toRangedBuffer=function(){return this.closeWriter(),this.rb},t}(),tr=function(){function t(t){if(this.boxType=t,4!==t.length&&16!==t.length)throw new g("The provided box type does not conform to either a 4 character type or a 16 byte uuid.")}return t.prototype.serializeCommonBoxHeader=function(e){var i=this.getSize(),s=i>=t.LARGE_SIZE/8,n=16===this.boxType.length;e.writeUInt(s?1:i,32),e.writeString(n?"uuid":this.boxType),s&&(e.writeUInt(_.floor(i/t.LARGE_SIZE),32),e.writeUInt(i%t.LARGE_SIZE,32)),n&&e.writeString(this.boxType)},t.prototype.getSize=function(){var e=8+(this.boxType.length>4?16:0),i=this.getBoxContentSize()+e;return i>=t.LARGE_SIZE/8&&(i+=8),i},t.prototype.serialize=function(){var t=new pp;return this.serializeCommonBoxHeader(t.writer),this.serializeBoxContent(t),t.toRangedBuffer()},t.LARGE_SIZE=_.pow(2,32),t}();function Ni(t,e){return t instanceof vo?64===e:t<_.pow(2,e)}function zs(t,e){return _.round(t*_.pow(2,e))}function fh(t,e){for(var i=0;i<e.length;i++)t.writeByte(e[i])}function nt(t,e){return t/_.pow(2,e)}r();var W=function(t){function e(e,i,s){var n=t.call(this,e)||this;if(n.version=i,!Ni(i,8))throw new g("the provided version cannot fit in 8 bits.");return n.flags=s,n}return Dt(e,t),w.defineProperty(e.prototype,"flags",{get:function(){return this.v_},set:function(t){this.v_=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return 4},e.prototype.serializeFlags=function(t){if("number"!=typeof this.flags)throw new g("Missing custom serializeFlags method.");t.writer.writeUInt(this.flags,24)},e.prototype.serializeBoxContent=function(t){t.writer.writeByte(this.version),this.serializeFlags(t)},e}(tr);r(),r();var wp=function(t){function e(e,i){var s=t.call(this,e)||this;return s.data=i,s}return Dt(e,t),e.prototype.getBoxContentSize=function(){return this.data.length},e.prototype.serializeBoxContent=function(t){t.concat(D.from(this.data))},e}(tr);r(),r();var yp=function(){function t(t){void 0===t&&(t=0),this.offset=t}return t.prototype.shift=function(t){this.offset+=t},t.prototype.seek=function(t){this.offset=t},t.prototype.clone=function(){return new t(this.offset)},t}();r();var bp=16384;function Ap(t){var e=t.length;if(e<=bp)return String.fromCharCode.apply(String,t);for(var i=[],s=0;s<e;s+=bp)i.push(String.fromCharCode.apply(String,t.slice(s,s+bp)));return i.join("")}var Sp=function(){function t(t){this.raw=t}return t.prototype.isSet=function(t){return function(t,e){return(t&e)===e}(this.raw,t)},t}();function eh(t,e){var i=t.getUint8(e.offset);return e.shift(1),i}function Tp(t,e,i){var s=Cp(Np(t),e.offset,e.offset+i);return e.shift(s.byteLength),s}function kp(t,e,i){return e.offset+i<=t.byteLength}function mh(t,e,i){void 0===i&&(i=!1);var s=t.getUint32(e.offset,i);return e.shift(4),s}function Ep(t,e,i){void 0===i&&(i=!1);var s=mh(t,e,i),n=mh(t,e,i),r=i?n:s,o=i?s:n;return vo.fromBits(o,r,!0)}function xp(t,e,i){return Ap(function(t){return[].slice.call(t)}(Tp(t,e,i)))}function Rp(t,e){var i,s=eh(t,e);return 0==(128&s)?i=s:192==(224&s)?i=64*(31&s)+(63&eh(t,e)):224==(240&s)?i=4096*(15&s)+64*(63&eh(t,e))+(63&eh(t,e)):240==(248&s)&&(i=262144*(7&s)+4096*(63&eh(t,e))+64*(63&eh(t,e))+(63&eh(t,e))),i}function Ip(t,e){return function(t,e,i){var s=[],n=function(t,e){return e.offset+3<=t.byteLength&&239===t.getUint8(e.offset)&&187===t.getUint8(e.offset+1)&&191===t.getUint8(e.offset+2)}(t,e);n&&e.shift(3);for(;e.offset<t.byteLength;){var r=Rp(t,e);if(void 0===r)break;if(i&&0===r)break;s.push(r)}return function(t){for(var e=[],i=0,s=t;i<s.length;i++){var n=s[i];n>65535&&(n-=65536,e.push(n>>>10&1023|55296),n=56320|1023&n),e.push(n)}return Ap(e)}(s)}(t,e,!0)}function Cp(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=t.byteLength),new j(t.buffer,t.byteOffset+e,i-e)}function Pp(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=t.byteLength),new DataView(t.buffer,t.byteOffset+e,i-e)}function Dp(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Np(t){return new j(t.buffer,t.byteOffset,t.byteLength)}var Mp=function(){function t(t){void 0===t&&(t=0),this.offset=t}return t.prototype.shift=function(t){this.offset+=t},t.prototype.seek=function(t){this.offset=t},t.prototype.clone=function(){return new t(this.offset)},t.prototype.toBit=function(){return new yp(this.offset<<3)},t}();r();var Lp=function(){function t(t,e){this.data=t,this.cursor=e}return t.prototype.nextUint8=function(){return eh(this.data,this.cursor)},t.prototype.nextUint16=function(){return function(t,e,i){void 0===i&&(i=!1);var s=t.getUint16(e.offset,i);return e.shift(2),s}(this.data,this.cursor)},t.prototype.nextInt16=function(){return function(t,e,i){void 0===i&&(i=!1);var s=t.getInt16(e.offset,i);return e.shift(2),s}(this.data,this.cursor)},t.prototype.nextUint32=function(){return mh(this.data,this.cursor)},t.prototype.nextInt32=function(){return function(t,e,i){void 0===i&&(i=!1);var s=t.getInt32(e.offset,i);return e.shift(4),s}(this.data,this.cursor)},t.prototype.nextInt64=function(){return function(t,e,i){void 0===i&&(i=!1);var s=mh(t,e,i),n=mh(t,e,i),r=i?n:s,o=i?s:n;return vo.fromBits(o,r,!1)}(this.data,this.cursor)},t.prototype.nextUint64=function(){return Ep(this.data,this.cursor)},t.prototype.nextUint8Array=function(t){return Tp(this.data,this.cursor,t)},t.prototype.nextUint32Array=function(t){return function(t,e,i){for(var s=[],n=0;n<i;n++)s.push(mh(t,e));return s}(this.data,this.cursor,t)},t.prototype.nextChars=function(t){return xp(this.data,this.cursor,t)},t.prototype.nextUTF8String=function(){return Ip(this.data,this.cursor)},t.prototype.skip=function(t){this.cursor.shift(t)},t.prototype.clone=function(){return new t(this.data,this.cursor.clone())},t}();function dt(t,e){return t.type===e}var Bp=8;function ci(t){var e=function(t,e){var i=[];for(;e.offset<t.byteLength;){var s=Op(t,e);if(!s.complete)return{complete:!1,boxes:i};i.push(s.box)}return{complete:!0,boxes:i}}(t.data,t.cursor);if(!e.complete)throw new g("Data incomplete");return e.boxes}function Op(t,e){var i=e.offset,s=function(t,e){var i=e.offset;if(!kp(t,e,Bp)){return{complete:!1,neededOffset:r=e.offset+Bp}}var s=mh(t,e),n=xp(t,e,4);if(1===s){if(!kp(t,e,8)){var r=e.offset+8;return e.seek(i),{complete:!1,neededOffset:r}}s=Ep(t,e).toNumber()}if("uuid"===n){if(!kp(t,e,16)){r=e.offset+16;return e.seek(i),{complete:!1,neededOffset:r}}n=xp(t,e,16)}var o=e.offset,h={type:n,size:s,headerSize:o-i};return{complete:!0,header:h}}(t,e);if(!s.complete)return s;var n=s.header,r=n.size;0===r&&(r=t.byteLength-i);var o=i+r;if(o>t.byteLength){var h=o;return e.seek(i),{complete:!1,neededOffset:h}}var a={type:n.type,offset:i,data:new Lp(Pp(t,i,o),new Mp(n.headerSize))};return e.seek(o),{complete:!0,box:a}}function Fp(t){return{version:t>>24,flags:new Sp(16777215&t)}}function Vp(t,e){var i,s,n,r;return 1===e?(i=t.nextUint64(),s=t.nextUint64(),n=t.nextUint32(),r=t.nextUint64()):(i=t.nextUint32(),s=t.nextUint32(),n=t.nextUint32(),r=t.nextUint32()),{creation:i,modification:s,scale:n,duration:r}}function Wp(t){return t.skipBits(4),{isLeading:t.readUInt(2),sampleDependsOn:t.readUInt(2),sampleIsDependedOn:t.readUInt(2),sampleHasRedundancy:t.readUInt(2),samplePaddingValue:t.readUInt(3),sampleIsNonSyncSample:Boolean(t.readBit()),sampleDegradationPriority:t.readUInt(16)}}function Up(t){var e=t.nextUint32Array(9);return{a:nt(e[0],16),b:nt(e[1],16),u:nt(e[2],30),c:nt(e[3],16),d:nt(e[4],16),v:nt(e[5],30),x:nt(e[6],16),y:nt(e[7],16),w:nt(e[8],30)}}function ai(t){return new wp(t.type,Cp(Np(t.data.data),t.data.cursor.offset))}var Gp=function(t){function e(e,i,s,n){void 0===s&&(s=0),void 0===n&&(n=0);var r=t.call(this,"hdlr",s,n)||this;return r.name=i,r.handlerType=e,r}return Dt(e,t),w.defineProperty(e.prototype,"handlerType",{get:function(){return this.sA},set:function(t){this.sA=t},enumerable:!1,configurable:!0}),e.prototype.serializeReserved=function(t){t.writer.writeUInt(0,32),t.writer.writeUInt(0,32),t.writer.writeUInt(0,32)},e.prototype.getBoxContentSize=function(){var e,i;return t.prototype.getBoxContentSize.call(this)+4+4+12+(null!==(i=null===(e=this.name)||void 0===e?void 0:e.length)&&void 0!==i?i:0)+1},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(0,32),e.writer.writeString(this.handlerType),this.serializeReserved(e),this.name&&e.writer.writeString(this.name),e.writer.writeByte(0)},e}(W);function Hp(t){var e=t.data,i=Fp(e.nextUint32()),s=i.version,n=i.flags;e.skip(4);var r=e.nextChars(4);e.skip(12);var o=e.nextUTF8String();return new Gp(r,o,s,n.raw)}!function(t){function e(){return t.call(this,"mdir")||this}Dt(e,t),e.prototype.serializeReserved=function(t){t.writer.writeString("appl"),t.writer.writeUInt(0,32),t.writer.writeUInt(0,32)}}(Gp);r(),r(),r();var Zp=function(){function t(t,e){void 0===e&&(e=!1),this.fixed28BitMode=e,this.tag=t}return t.prototype.encodeSize=function(t){for(var e=[];t>0;)e.length>0&&(e[e.length-1]+=128),e.push(t%128),t>>=7;if(this.fixed28BitMode)for(;e.length<4;)e.push(128);return e.reverse()},w.defineProperty(t.prototype,"tag",{get:function(){return this.nA},set:function(t){if(!Ni(t,8))throw new g("Provided tag does not fit in 8 bits.");this.nA=t},enumerable:!1,configurable:!0}),t.prototype.getSize=function(){return this.getDescriptorSize()+1+this.encodeSize(this.getDescriptorSize()).length},t.prototype.serialize=function(t){t.writer.writeByte(this.tag);for(var e=0,i=this.encodeSize(this.getDescriptorSize());e<i.length;e++){var s=i[e];t.writer.writeByte(s)}this.serializeDescriptorContent(t)},t}();r();!function(t){function e(e,i,s,n,r,o,h){void 0===h&&(h={});var a=t.call(this,4,h.fixed28BitMode)||this;return a.upStream=s,a.decoderSpecificInfo=o,a.objectTypeIndication=e,a.streamType=i,a.bufferSizeDb=n,a.maxBitrate=r.max,a.avgBitrate=r.avg,a}Dt(e,t),w.defineProperty(e.prototype,"objectTypeIndication",{get:function(){return this.rA},set:function(t){if(!Ni(t,8))throw new g("Provided objectTypeIndication does not fit in 8 bits.");this.rA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"streamType",{get:function(){return this.oA},set:function(t){if(!Ni(t,6))throw new g("Provided streamType does not fit in 6 bits.");this.oA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"bufferSizeDb",{get:function(){return this.hA},set:function(t){if(!Ni(t,24))throw new g("Provided bufferSizeDb does not fit in 24 bits.");this.hA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"maxBitrate",{get:function(){return this.aA},set:function(t){if(!Ni(t,32))throw new g("Provided maxBitrate does not fit in 32 bits.");this.aA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"avgBitrate",{get:function(){return this.uA},set:function(t){if(!Ni(t,32))throw new g("Provided avgBitrate does not fit in 32 bits.");this.uA=t},enumerable:!1,configurable:!0}),e.prototype.getDescriptorSize=function(){return 13+this.decoderSpecificInfo.reduce((function(t,e){return t+e.getSize()}),0)},e.prototype.serializeDescriptorContent=function(t){t.writer.writeByte(this.objectTypeIndication),t.writer.writeUInt(this.streamType,6),t.writer.writeBool(this.upStream),t.writer.writeBit(1),t.writer.writeUInt(this.bufferSizeDb,24),t.writer.writeUInt(this.maxBitrate,32),t.writer.writeUInt(this.avgBitrate,32);for(var e=0,i=this.decoderSpecificInfo;e<i.length;e++){i[e].serialize(t)}}}(Zp);r();!function(t){function e(e,i){void 0===i&&(i={});var s=t.call(this,5,i.fixed28BitMode)||this;return s.data=e,s}Dt(e,t),e.prototype.getDescriptorSize=function(){return this.data.length},e.prototype.serializeDescriptorContent=function(t){t.concat(D.from(this.data))}}(Zp);r(),r();var Xp=function(t){function e(e){void 0===e&&(e=!1);var i=t.call(this,6,e)||this;return i.predefined=2,i}return Dt(e,t),e.prototype.getDescriptorSize=function(){return 1},e.prototype.serializeDescriptorContent=function(t){t.writer.writeByte(this.predefined)},e}(Zp);!function(t){function e(e,i,s,n){void 0===n&&(n={});var r=t.call(this,3,n.fixed28BitMode)||this;return r.decoderConfigDescriptor=s,r.esId=e,r.streamPriority=i,r.dependsOnEsId=null==n?void 0:n.dependsOnEsId,r.urlString=null==n?void 0:n.url,r.ocrEsId=null==n?void 0:n.ocrEsId,r.slConfigDescriptor=new Xp(n.fixed28BitMode),r}Dt(e,t),w.defineProperty(e.prototype,"streamDependenceFlag",{get:function(){return void 0!==this.dependsOnEsId},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"urlFlag",{get:function(){return void 0!==this.urlString},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"ocrStreamFlag",{get:function(){return void 0!==this.ocrEsId},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"esId",{get:function(){return this.cA},set:function(t){if(!Ni(t,16))throw new g("Provided esId does not fit in 16 bits.");this.cA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"streamPriority",{get:function(){return this.lA},set:function(t){if(!Ni(t,5))throw new g("Provided streamPriority does not fit in 5 bits.");this.lA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"dependsOnEsId",{get:function(){return this.dA},set:function(t){if(t&&!Ni(t,16))throw new g("Provided dependsOnEsId does not fit in 16 bits.");this.dA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"ocrEsId",{get:function(){return this.fA},set:function(t){if(t&&!Ni(t,16))throw new g("Provided ocrEsId does not fit in 16 bits.");this.fA=t},enumerable:!1,configurable:!0}),e.prototype.getDescriptorSize=function(){return 3+(this.streamDependenceFlag?2:0)+(this.urlFlag?1+this.urlString.length:0)+(this.ocrStreamFlag?2:0)+this.decoderConfigDescriptor.getSize()+this.slConfigDescriptor.getSize()},e.prototype.serializeDescriptorContent=function(t){t.writer.writeUInt(this.esId,16),t.writer.writeBool(this.streamDependenceFlag),t.writer.writeBool(this.urlFlag),t.writer.writeBool(this.ocrStreamFlag),t.writer.writeUInt(this.streamPriority,5),this.streamDependenceFlag&&t.writer.writeUInt(this.dependsOnEsId,16),this.urlFlag&&(t.writer.writeByte(this.urlString.length),t.writer.writeString(this.urlString)),this.ocrStreamFlag&&t.writer.writeUInt(this.ocrEsId,16),this.decoderConfigDescriptor.serialize(t),this.slConfigDescriptor.serialize(t)}}(Zp);r(),r(),r(),r(),r();var zp=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.boxes=[],e}return Dt(e,t),e.prototype.getSize=function(){return t.prototype.getSize.call(this)+this.boxes.reduce((function(t,e){return t+e.getSize()}),0)},e.prototype.serialize=function(){for(var e=t.prototype.serialize.call(this),i=0,s=this.boxes;i<s.length;i++){var n=s[i];e=e.concat(n.serialize())}return e},e}(tr),ea=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Dt(e,t),e.prototype.serializeBoxContent=function(t){},e.prototype.getBoxContentSize=function(){return 0},e}(zp),qp=function(t){function e(e,i){var s=t.call(this,e)||this;return s.dataReferenceIndex=i,s}return Dt(e,t),w.defineProperty(e.prototype,"dataReferenceIndex",{get:function(){return this._A},set:function(t){if(!Ni(t,16))throw new g("Provided dataReferenceIndex does not fit in 16 bits.");this._A=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return 8},e.prototype.serializeBoxContent=function(t){for(var e=0;e<6;e++)t.writer.writeByte(0);t.writer.writeUInt(this.dataReferenceIndex,16)},e}(ea),Yp=function(t){function e(e,i,s,n){var r,o,h=this;return(h=t.call(this,e,i)||this).extra=n,h.channelCount=null!==(r=s.channelCount)&&void 0!==r?r:2,h.sampleSize=null!==(o=s.sampleSize)&&void 0!==o?o:16,h.sampleRate=s.sampleRate,h}return Dt(e,t),w.defineProperty(e.prototype,"channelCount",{get:function(){return this.vA},set:function(t){if(!Ni(t,16))throw new g("Provided channelCount does not fit in 16 bits.");this.vA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"sampleSize",{get:function(){return this.mA},set:function(t){if(!Ni(t,16))throw new g("Provided sampleSize does not fit in 16 bits.");this.mA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"sampleRate",{get:function(){return this.gA},set:function(t){if(!Ni(zs(t,16),32))throw new g("Provided rate does not fit in 32 bits (fixed 16.16).");this.gA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){var e,i;return t.prototype.getBoxContentSize.call(this)+8+2+2+2+2+(void 0!==this.sampleRate?4:0)+(null!==(i=null===(e=this.extra)||void 0===e?void 0:e.length)&&void 0!==i?i:0)},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(0,32),e.writer.writeUInt(0,32),e.writer.writeUInt(this.channelCount,16),e.writer.writeUInt(this.sampleSize,16),e.writer.writeUInt(0,16),e.writer.writeUInt(0,16),e.writer.writeUInt(zs(this.sampleRate,16),32),this.extra&&fh(e.writer,this.extra)},e}(qp);r();!function(t){function e(e){var i=t.call(this,"stco",0,0)||this;return i.entries=e,i}Dt(e,t),w.defineProperty(e.prototype,"entries",{get:function(){return this.pA},set:function(t){if(!Ni(t.length,32))throw new g("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!Ni(t,32)})))throw new g("Not all entries can be represented in 32 bits.");this.pA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4*this.entries.length},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.entries.length,32);for(var i=0,s=this.entries;i<s.length;i++){var n=s[i];e.writer.writeUInt(n,32)}}}(W);r();!function(t){function e(e){var i=t.call(this,"clap")||this;return i.cleanApertureWidthN=e.cleanApertureWidthN,i.cleanApertureWidthD=e.cleanApertureWidthD,i.cleanApertureHeightN=e.cleanApertureHeightN,i.cleanApertureHeightD=e.cleanApertureHeightD,i.horizOffN=e.horizOffN,i.horizOffD=e.horizOffD,i.vertOffN=e.vertOffN,i.vertOffD=e.vertOffD,i}Dt(e,t),w.defineProperty(e.prototype,"cleanApertureWidthN",{get:function(){return this.wA},set:function(t){if(!Ni(t,32))throw new g("Provided cleanApertureWidthN does not fit in 32 bits.");this.wA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"cleanApertureWidthD",{get:function(){return this.yA},set:function(t){if(!Ni(t,32))throw new g("Provided cleanApertureWidthD does not fit in 32 bits.");this.yA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"cleanApertureHeightN",{get:function(){return this.bA},set:function(t){if(!Ni(t,32))throw new g("Provided cleanApertureHeightN does not fit in 32 bits.");this.bA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"cleanApertureHeightD",{get:function(){return this.AA},set:function(t){if(!Ni(t,32))throw new g("Provided cleanApertureHeightD does not fit in 32 bits.");this.AA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"horizOffN",{get:function(){return this.SA},set:function(t){if(!Ni(t,32))throw new g("Provided horizOffN does not fit in 32 bits.");this.SA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"horizOffD",{get:function(){return this.TA},set:function(t){if(!Ni(t,32))throw new g("Provided horizOffD does not fit in 32 bits.");this.TA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"vertOffN",{get:function(){return this.kA},set:function(t){if(!Ni(t,32))throw new g("Provided vertOffN does not fit in 32 bits.");this.kA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"vertOffD",{get:function(){return this.EA},set:function(t){if(!Ni(t,32))throw new g("Provided vertOffD does not fit in 32 bits.");this.EA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return 32},e.prototype.serializeBoxContent=function(t){t.writer.writeUInt(this.cleanApertureWidthN,32),t.writer.writeUInt(this.cleanApertureWidthD,32),t.writer.writeUInt(this.cleanApertureHeightN,32),t.writer.writeUInt(this.cleanApertureHeightD,32),t.writer.writeUInt(this.horizOffN,32),t.writer.writeUInt(this.horizOffD,32),t.writer.writeUInt(this.vertOffN,32),t.writer.writeUInt(this.vertOffD,32)}}(tr);r();!function(t){function e(e,i){var s=t.call(this,"ctts",e,0)||this;return s.entries=i,s}Dt(e,t),w.defineProperty(e.prototype,"entries",{get:function(){return this.pA},set:function(t){if(!Ni(t.length,32))throw new g("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!Ni(t.sampleCount,32)||!Ni(t.sampleOffset,32)})))throw new g("Not all entries can be represented in 64 bits.");this.pA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+8*this.entries.length},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.entries.length,32);for(var i=0,s=this.entries;i<s.length;i++){var n=s[i];e.writer.writeUInt(n.sampleCount,32),0===this.version?e.writer.writeUInt(n.sampleOffset,32):1===this.version&&e.writer.writeInt(n.sampleOffset,32)}}}(W);r();!function(t){function e(e){var i=t.call(this,"url ",0,void 0===e?1:0)||this;return i.location=e,i}Dt(e,t),w.defineProperty(e.prototype,"location",{get:function(){return this.xA},set:function(t){this.flags=void 0===t?1:0,this.xA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){var e=t.prototype.getBoxContentSize.call(this);return this.location?e+this.location.length+1:e},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),this.location&&(e.writer.writeString(this.location),e.writer.writeByte(0))}}(W);r();!function(t){function e(e,i,s){var n=t.call(this,"urn ",0,s)||this;return n.name=e,n.location=i,n}Dt(e,t),w.defineProperty(e.prototype,"location",{get:function(){return this.xA},set:function(t){if(1&this.flags)throw new g("The moov containment flag is set, a DataEntryUrlBox should be used instead.");this.xA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){var e=t.prototype.getBoxContentSize.call(this)+this.name.length+1;return this.location?e+this.location.length+1:e},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeString(this.name),e.writer.writeByte(0),this.location&&(e.writer.writeString(this.location),e.writer.writeByte(0))}}(W);r();!function(t){function e(){return t.call(this,"dinf")||this}Dt(e,t)}(ea);r(),r();var vc=function(t){function e(e,i,s){var n=t.call(this,e)||this;if(n.version=i,!Ni(i,8))throw new g("the provided version cannot fit in 8 bits.");return n.flags=s,n}return Dt(e,t),w.defineProperty(e.prototype,"flags",{get:function(){return this.v_},set:function(t){this.v_=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return 4},e.prototype.serializeFlags=function(t){if("number"!=typeof this.flags)throw new g("Missing custom serializeFlags method.");t.writer.writeUInt(this.flags,24)},e.prototype.serializeBoxContent=function(t){t.writer.writeByte(this.version),this.serializeFlags(t)},e}(zp);!function(t){function e(){return t.call(this,"dref",0,0)||this}Dt(e,t),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.boxes.length,32)}}(vc);r(),r();var Kp=function(t){function e(e,i,s){void 0===s&&(s=0);var n=t.call(this,"elst",i,s)||this;return n.entries=e,n}return Dt(e,t),w.defineProperty(e.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"entries",{get:function(){return this.pA},set:function(t){for(var e=0,i=t;e<i.length;e++){var s=i[e];if(!Ni(s.segmentDuration,this.bitSize))throw new g("SegmentDuration of one of the entries does not fit in ".concat(this.bitSize," bits."));if(!Ni(s.mediaTime,this.bitSize))throw new g("MediaTime of one of the entries does not fit in ".concat(this.bitSize," bits."));if(!Ni(s.mediaRateInteger,16))throw new g("Provided mediaRateInteger does not fit in 16 bits.");if(s.mediaRateFraction&&!Ni(s.mediaRateFraction,16))throw new g("Provided mediaRateFraction does not fit in 16 bits.")}this.pA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+this.entries.length*(2*this.bitSize/8+2+2)},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.entries.length,32),this.serializeElstBoxContent(e)},e}(W),jp=function(t){function e(e,i){return void 0===i&&(i=0),t.call(this,e,0,i)||this}return Dt(e,t),e.prototype.serializeElstBoxContent=function(t){for(var e,i=0,s=this.entries;i<s.length;i++){var n=s[i];t.writer.writeUInt(n.segmentDuration,32),t.writer.writeInt(n.mediaTime,32),t.writer.writeUInt(n.mediaRateInteger,16),t.writer.writeUInt(null!==(e=n.mediaRateFraction)&&void 0!==e?e:0,16)}},e}(Kp),Qp=function(t){function e(e,i){return void 0===i&&(i=0),t.call(this,e,1,i)||this}return Dt(e,t),e.prototype.serializeElstBoxContent=function(t){for(var e,i=0,s=this.entries;i<s.length;i++){var n=s[i];t.writer.writeUInt(n.segmentDuration.getHighBitsUnsigned(),32),t.writer.writeUInt(n.segmentDuration.getLowBitsUnsigned(),32),t.writer.writeInt(n.mediaTime.getHighBits(),32),t.writer.writeInt(n.mediaTime.getLowBits(),32),t.writer.writeUInt(n.mediaRateInteger,16),t.writer.writeUInt(null!==(e=n.mediaRateFraction)&&void 0!==e?e:0,16)}},e}(Kp);function Jp(t){for(var e=t.data,i=Fp(e.nextUint32()),s=i.version,n=i.flags,r=e.nextUint32(),o=[],h=0;h<r;h++){var a=void 0,u=void 0;0===s?(a=e.nextUint32(),u=e.nextInt32()):(a=e.nextUint64(),u=e.nextInt64());var c=e.nextInt16(),l=e.nextInt16();o.push({segmentDuration:a,mediaTime:u,mediaRateFraction:l,mediaRateInteger:c})}return 0===s?new jp(o,n.raw):new Qp(o,n.raw)}var $p=function(t){function e(){return t.call(this,"edts")||this}return Dt(e,t),e}(ea);function tw(t){for(var e=new $p,i=0,s=ci(t.data);i<s.length;i++){var n=s[i];dt(n,"elst")?e.boxes.push(Jp(n)):e.boxes.push(ai(n))}return e}r(),r();var ew=function(t){function e(e,i,s,n){var r=t.call(this,e)||this;return r.majorBrand=i,r.minorVersion=s,r.compatibleBrands=n,r}return Dt(e,t),w.defineProperty(e.prototype,"majorBrand",{get:function(){return this.RA},set:function(t){if(4!==t.length)throw new g("the provided major brand does not conform to the 4 character requirement");this.RA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"minorVersion",{get:function(){return this.IA},set:function(t){if(!Ni(t,32))throw new g("the provided minor version does not fit in 32 bits.");this.IA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"compatibleBrands",{get:function(){return this.CA},set:function(t){if(t.some((function(t){return 4!==t.length})))throw new g("Some of the compatible brands do not conform to the 4 character requirement");this.CA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return 4*(2+this.compatibleBrands.length)},e.prototype.serializeBoxContent=function(t){t.writer.writeString(this.majorBrand),t.writer.writeUInt(this.minorVersion,32);for(var e=0,i=this.compatibleBrands;e<i.length;e++){var s=i[e];t.writer.writeString(s)}},e}(tr),iw=function(t){function e(e,i,s){return t.call(this,"ftyp",e,i,s)||this}return Dt(e,t),e}(ew);function sw(t){for(var e=t.data,i=e.nextChars(4),s=e.nextUint32(),n=[];e.cursor.offset<e.data.byteLength;)n.push(e.nextChars(4));return new iw(i,s,n)}r();var nw=function(t){function e(e,i){void 0===i&&(i="free");var s=t.call(this,i)||this;return s.data=e,s}return Dt(e,t),e.prototype.getBoxContentSize=function(){var t,e;return null!==(e=null===(t=this.data)||void 0===t?void 0:t.length)&&void 0!==e?e:0},e.prototype.serializeBoxContent=function(t){this.data&&t.concat(D.from(this.data))},e}(tr);r(),r();var rw=function(t){function e(e,i,s,n){void 0===n&&(n=0);var r=t.call(this,"mdhd",s,n)||this;return r.creationTime=e.creation,r.modificationTime=e.modification,r.timescale=e.scale,r.duration=e.duration,r.language=i,r}return Dt(e,t),w.defineProperty(e.prototype,"creationTime",{get:function(){return this.PA},set:function(t){if(!Ni(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.PA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"modificationTime",{get:function(){return this.DA},set:function(t){if(!Ni(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.DA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"timescale",{get:function(){return this.NA},set:function(t){if(!Ni(t,32))throw new g("Provided sequence number does not fit in 32 bits.");this.NA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"duration",{get:function(){return this.MA},set:function(t){if(!Ni(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.MA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"language",{get:function(){return this.LA},set:function(t){if(!uw(t))throw new g("Expected an ISO-639-2/T language code");this.LA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8*3+4+2+2},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),this.serializeMdiaContent(e),e.writer.writeBit(0);for(var i=0,s=this.language;i<s.length;i++){var n=s[i];e.writer.writeUInt(n.charCodeAt(0)-96,5)}e.writer.writeUInt(0,16)},e}(W),ow=function(t){function e(e,i,s){return void 0===s&&(s=0),t.call(this,e,i,0,s)||this}return Dt(e,t),e.prototype.serializeMdiaContent=function(t){t.writer.writeUInt(this.creationTime,32),t.writer.writeUInt(this.modificationTime,32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration,32)},e}(rw),hw=function(t){function e(e,i,s){return void 0===s&&(s=0),t.call(this,e,i,1,s)||this}return Dt(e,t),e.prototype.serializeMdiaContent=function(t){t.writer.writeUInt(this.creationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.creationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration.getHighBitsUnsigned(),32),t.writer.writeUInt(this.duration.getLowBitsUnsigned(),32)},e}(rw);function aw(t){var e=t.data,i=Fp(e.nextUint32()),s=i.version,n=i.flags,r=Vp(e,s),o=new so(D.from(e.nextUint8Array(2)));o.skipBits(1);for(var h=[],a=0;a<3;a++)h.push(o.readUInt(5));var u=h.map((function(t){return String.fromCharCode(t+96)})).join("");return uw(u)||(u="und"),e.skip(2),0===s?new ow(r,u,n.raw):new hw(r,u,n.raw)}function uw(t){return/^[a-z]{3}$/.test(t)}var cw=function(t){function e(){return t.call(this,"mdia")||this}return Dt(e,t),e}(ea);function lw(t){for(var e=new cw,i=0,s=ci(t.data);i<s.length;i++){var n=s[i];dt(n,"mdhd")?e.boxes.push(aw(n)):dt(n,"hdlr")?e.boxes.push(Hp(n)):e.boxes.push(ai(n))}return e}r();var dw=function(t){function e(){var e=t.call(this,"mdat")||this;return e.data=new D,e}return Dt(e,t),e.prototype.getBoxContentSize=function(){return this.data.length},e.prototype.serializeBoxContent=function(t){t.concat(this.data)},e}(tr);function fw(t){var e=t.data,i=e.nextUint8Array(e.data.byteLength-e.cursor.offset),s=new dw;return s.data.pushRange(i),s}r();!function(t){function e(){return t.call(this,"minf")||this}Dt(e,t)}(ea);r();var _w;!function(t){function e(e){var i=t.call(this,"meta",0,0)||this;return i.handler=e,i}Dt(e,t),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.handler.getSize()},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.concat(this.handler.serialize())}}(vc);r(),r(),function(t){t.VIDEO="vide",t.AUXILIARY_VIDEO="auxv",t.AUDIO="soun",t.METADATA="meta",t.HINT="hint",t.TEXT="text",t.SUBTITLE="subt",t.FONT="fdsm"}(_w||(_w={})),r();var vw,mw,gw={a:1,b:0,u:0,c:0,d:1,v:0,x:0,y:0,w:1};function pw(t,e){e.writer.writeUInt(zs(t.a,16),32),e.writer.writeUInt(zs(t.b,16),32),e.writer.writeUInt(zs(0,30),32),e.writer.writeUInt(zs(t.c,16),32),e.writer.writeUInt(zs(t.d,16),32),e.writer.writeUInt(zs(0,30),32),e.writer.writeUInt(zs(t.x,16),32),e.writer.writeUInt(zs(t.y,16),32),e.writer.writeUInt(zs(1,30),32)}function ww(t,e){var i,s,n,r;e.writer.writeUInt(null!==(i=t.isLeading)&&void 0!==i?i:vw.UNKNOWN,2),e.writer.writeUInt(null!==(s=t.sampleDependsOn)&&void 0!==s?s:mw.UNKNOWN,2),e.writer.writeUInt(null!==(n=t.sampleIsDependedOn)&&void 0!==n?n:mw.UNKNOWN,2),e.writer.writeUInt(null!==(r=t.sampleHasRedundancy)&&void 0!==r?r:mw.UNKNOWN,2)}function yw(t,e){var i,s,n;e.writer.writeUInt(0,4),ww(t,e),e.writer.writeUInt(null!==(i=t.samplePaddingValue)&&void 0!==i?i:0,3),e.writer.writeBool(null!==(s=t.sampleIsNonSyncSample)&&void 0!==s&&s),e.writer.writeUInt(null!==(n=t.sampleDegradationPriority)&&void 0!==n?n:0,16)}r(),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WITH_DEPENDENCY=1]="WITH_DEPENDENCY",t[t.NO=2]="NO",t[t.WITHOUT_DEPENDENCY=3]="WITHOUT_DEPENDENCY"}(vw||(vw={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.YES=1]="YES",t[t.NO=2]="NO",t[t.RESERVED=3]="RESERVED"}(mw||(mw={})),r(),r();var bw=function(){};r(),r(),r();var Aw=function(t){function e(e,i,s){var n=t.call(this,"pssh",e,0)||this;return n.systemId=i,n.data=s,n}return Dt(e,t),w.defineProperty(e.prototype,"systemId",{get:function(){return this.BA},set:function(t){if(16!==t.length)throw new g("Provided systemId length is not 16.");this.BA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"data",{get:function(){return this.kp},set:function(t){if(!Ni(t.length,32))throw new g("Provided data length does not fit in 32 bits.");this.kp=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+16+4+this.data.length},e.prototype.serializeVersionBoxContent=function(t){},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.concat(D.from(this.systemId)),this.serializeVersionBoxContent(e),e.writer.writeUInt(this.data.length,32),e.concat(D.from(this.data))},e}(W),Sw=function(t){function e(e,i){return t.call(this,0,e,i)||this}return Dt(e,t),e}(Aw),Tw=function(t){function e(e,i,s){var n=t.call(this,1,e,i)||this;return n.kIds=s,n}return Dt(e,t),w.defineProperty(e.prototype,"kIds",{get:function(){return this.OA},set:function(t){if(!Ni(t.length,32))throw new g("Provided kIds length cannot fit in 32 bits.");if(t.some((function(t){return 16!==t.length})))throw new g("Not all provided key ids are 16 bytes long.");this.OA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+16*this.kIds.length},e.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.kIds.length,32);for(var e=0,i=this.kIds;e<i.length;e++){var s=i[e];t.concat(D.from(s))}},e}(Aw);function kw(t){var e=t.data.nextUint8();t.data.skip(3);var i=t.data.nextUint8Array(16),s=[];if(1===e)for(var n=t.data.nextUint32(),r=0;r<n;r++)s.push(t.data.nextUint8Array(16));var o=t.data.nextUint32(),h=t.data.nextUint8Array(o);return 1===e?new Tw(i,h,s):new Sw(i,h)}r(),r();var Ew=function(t){function e(e,i,s){void 0===s&&(s=0);var n=t.call(this,"mehd",i,s)||this;return n.fragmentDuration=e,n}return Dt(e,t),w.defineProperty(e.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"fragmentDuration",{get:function(){return this.FA},set:function(t){if(!Ni(t,this.bitSize))throw new g("The provided fragmentDuration does not fit in ".concat(this.bitSize," bits."));this.FA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8},e}(W),xw=function(t){function e(e,i){return void 0===i&&(i=0),t.call(this,e,0,i)||this}return Dt(e,t),e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.fragmentDuration,32)},e}(Ew),Rw=function(t){function e(e,i){return void 0===i&&(i=0),t.call(this,e,1,i)||this}return Dt(e,t),e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.fragmentDuration.getHighBitsUnsigned(),32),e.writer.writeUInt(this.fragmentDuration.getLowBitsUnsigned(),32)},e}(Ew);function Iw(t){var e=t.data,i=Fp(e.nextUint32()),s=i.version,n=i.flags;return 0===s?new xw(e.nextUint32(),n.raw):new Rw(e.nextUint64(),n.raw)}r();var pc=function(t){function e(e,i,s,n){void 0===i&&(i={}),void 0===s&&(s=0),void 0===n&&(n=0);var r,o,h,a=this;return(a=t.call(this,"trex",s,n)||this).trackId=e,a.defaultSampleDescriptionIndex=null!==(r=null==i?void 0:i.sampleDescriptionIndex)&&void 0!==r?r:0,a.defaultSampleDuration=null!==(o=i.sampleDuration)&&void 0!==o?o:0,a.defaultSampleSize=null!==(h=i.sampleSize)&&void 0!==h?h:0,a.defaultSampleFlags=i.sampleFlags,a}return Dt(e,t),w.defineProperty(e.prototype,"trackId",{get:function(){return this.VA},set:function(t){if(!Ni(t,32))throw new g("Provided track id does not fit in 32 bits.");this.VA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"defaultSampleDescriptionIndex",{get:function(){return this.WA},set:function(t){if(!Ni(t,32))throw new g("Provided default sample description index does not fit in 32 bits.");this.WA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"defaultSampleDuration",{get:function(){return this.UA},set:function(t){if(!Ni(t,32))throw new g("Provided default sample duration does not fit in 32 bits.");this.UA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"defaultSampleSize",{get:function(){return this.GA},set:function(t){if(!Ni(t,32))throw new g("Provided default sample size does not fit in 32 bits.");this.GA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"defaultSampleFlags",{get:function(){return this.HA},set:function(t){if((null==t?void 0:t.samplePaddingValue)&&!Ni(t.samplePaddingValue,3))throw new g("Provided sample padding value does not fit in 3 bits.");if((null==t?void 0:t.sampleDegradationPriority)&&!Ni(t.sampleDegradationPriority,16))throw new g("Provided sample degradation priority does not fit in 16 bits.");this.HA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+20},e.prototype.serializeBoxContent=function(e){var i;t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.trackId,32),e.writer.writeUInt(this.defaultSampleDescriptionIndex,32),e.writer.writeUInt(this.defaultSampleDuration,32),e.writer.writeUInt(this.defaultSampleSize,32),yw(null!==(i=this.defaultSampleFlags)&&void 0!==i?i:{},e)},e}(W);function Cw(t){var e=t.data,i=Fp(e.nextUint32()),s=i.version,n=i.flags,r=e.nextUint32(),o=e.nextUint32(),h=e.nextUint32(),a=e.nextUint32(),u=Wp(new so(D.from(e.nextUint8Array(4))));return new pc(r,{sampleDescriptionIndex:o,sampleDuration:h,sampleSize:a,sampleFlags:u},s,n.raw)}var xc=function(t){function e(){return t.call(this,"mvex")||this}return Dt(e,t),e}(ea);function Pw(t){for(var e=new xc,i=0,s=ci(t.data);i<s.length;i++){var n=s[i];dt(n,"mehd")?e.boxes.push(Iw(n)):dt(n,"trex")?e.boxes.push(Cw(n)):e.boxes.push(ai(n))}return e}r();var Dw=function(t){function e(i,s,n,r,o){void 0===o&&(o=0);var h,a,u,c=this;return(c=t.call(this,"mvhd",r,o)||this).creationTime=i.creation,c.modificationTime=i.modification,c.timescale=i.scale,c.duration=i.duration,c.rate=null!==(h=n.rate)&&void 0!==h?h:e.DEFAULT_RATE,c.volume=null!==(a=n.volume)&&void 0!==a?a:e.DEFAULT_VOLUME,c.matrix=null!==(u=n.matrix)&&void 0!==u?u:gw,c.ZA=s,c}return Dt(e,t),w.defineProperty(e.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"creationTime",{get:function(){return this.PA},set:function(t){if(!Ni(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.PA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"modificationTime",{get:function(){return this.DA},set:function(t){if(!Ni(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.DA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"timescale",{get:function(){return this.NA},set:function(t){if(!Ni(t,32))throw new g("Provided sequence number does not fit in 32 bits.");this.NA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"duration",{get:function(){return this.MA},set:function(t){if(!Ni(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.MA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"rate",{get:function(){return this.XA},set:function(t){if(!Ni(zs(t,16),32))throw new g("Provided rate does not fit in 32 bits (fixed 16.16).");this.XA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"volume",{get:function(){return this.zA},set:function(t){if(!Ni(zs(t,8),16))throw new g("Provided volume does not fit in 16 bits (fixed 8.8).");this.zA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"matrix",{get:function(){return this.qA},set:function(t){if(0!==t.u||0!==t.v||1!==t.w)throw new g("(u, v, w) does not match the required (0, 0, 1)");this.qA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"nextTrackId",{get:function(){return this.ZA},set:function(t){if(0===t)throw new g("NextTrackId cannot be 0.");if(!Ni(t,32))throw new g("NextTrackId cannot exceed 32 bits.");this.ZA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8*3+4+4+2+2+8+36+24+4},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),this.serializeMvhdContent(e),e.writer.writeUInt(zs(this.rate,16),32),e.writer.writeUInt(zs(this.volume,8),16),e.writer.writeUInt(0,16),e.writer.writeUInt(0,32),e.writer.writeUInt(0,32),pw(this.matrix,e);for(var i=0;i<6;i++)e.writer.writeUInt(0,32);e.writer.writeUInt(this.nextTrackId,32)},e.DEFAULT_RATE=1,e.DEFAULT_VOLUME=1,e}(W),Nw=function(t){function e(e,i,s,n){return void 0===s&&(s={}),void 0===n&&(n=0),t.call(this,e,i,s,0,n)||this}return Dt(e,t),e.prototype.serializeMvhdContent=function(t){t.writer.writeUInt(this.creationTime,32),t.writer.writeUInt(this.modificationTime,32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration,32)},e}(Dw),Mw=function(t){function e(e,i,s,n){return void 0===s&&(s={}),void 0===n&&(n=0),t.call(this,e,i,s,1,n)||this}return Dt(e,t),e.prototype.serializeMvhdContent=function(t){t.writer.writeUInt(this.creationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.creationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration.getHighBitsUnsigned(),32),t.writer.writeUInt(this.duration.getLowBitsUnsigned(),32)},e}(Dw);function Lw(t){var e=t.data,i=Fp(e.nextUint32()),s=i.version,n=i.flags,r=Vp(e,s),o=nt(e.nextUint32(),16),h=nt(e.nextUint16(),8);e.skip(2),e.skip(8);var a=Up(e);e.skip(24);var u=e.nextUint32();return 0===s?new Nw(r,u,{rate:o,volume:h,matrix:a},n.raw):new Mw(r,u,{rate:o,volume:h,matrix:a},n.raw)}r(),r();var Bw=function(t){function e(e,i,s,n,r,o,h){void 0===h&&(h={});var a,u,c,l=this;return l=t.call(this,"tkhd",e,function(t){var e,i,s,n;return{trackEnabled:null===(e=null==t?void 0:t.trackEnabled)||void 0===e||e,trackInMovie:null===(i=null==t?void 0:t.trackInMovie)||void 0===i||i,trackInPreview:null===(s=null==t?void 0:t.trackInPreview)||void 0===s||s,trackSizeIsAspectRatio:null!==(n=null==t?void 0:t.trackSizeIsAspectRatio)&&void 0!==n&&n}}(h))||this,l.creationTime=i.creation,l.modificationTime=i.modification,l.trackId=s,l.duration=i.duration,l.volume=n,l.width=r,l.height=o,l.layer=null!==(a=h.layer)&&void 0!==a?a:0,l.alternateGroup=null!==(u=h.alternateGroup)&&void 0!==u?u:0,l.matrix=null!==(c=h.matrix)&&void 0!==c?c:gw,l}return Dt(e,t),w.defineProperty(e.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"creationTime",{get:function(){return this.PA},set:function(t){if(!Ni(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.PA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"modificationTime",{get:function(){return this.DA},set:function(t){if(!Ni(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.DA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"trackId",{get:function(){return this.VA},set:function(t){if(0===t)throw new g("trackId cannot be 0.");if(!Ni(t,32))throw new g("trackId cannot exceed 32 bits.");this.VA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"duration",{get:function(){return this.MA},set:function(t){if(!Ni(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.MA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"volume",{get:function(){return this.zA},set:function(t){if(!Ni(zs(t,8),16))throw new g("Provided volume does not fit in 16 bits (fixed 8.8).");this.zA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"width",{get:function(){return this.YA},set:function(t){if(!Ni(zs(t,16),32))throw new g("Provided width does not fit in 32 bits (fixed 16.16).");this.YA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"height",{get:function(){return this.KA},set:function(t){if(!Ni(zs(t,16),32))throw new g("Provided height does not fit in 32 bits (fixed 16.16).");this.KA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"layer",{get:function(){return this.jA},set:function(t){if(!Ni(t,16))throw new g("Provided layer does not fit in 16 bits.");this.jA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"alternateGroup",{get:function(){return this.QA},set:function(t){if(!Ni(t,16))throw new g("Provided alternateGroup does not fit in 16 bits.");this.QA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"matrix",{get:function(){return this.qA},set:function(t){if(0!==t.u||0!==t.v||1!==t.w)throw new g("(u, v, w) does not match the required (0, 0, 1)");this.qA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8*3+4+4+8+2+2+2+2+36+4+4},e.prototype.serializeFlags=function(t){t.writer.writeUInt(0,20),t.writer.writeBool(this.flags.trackSizeIsAspectRatio),t.writer.writeBool(this.flags.trackInPreview),t.writer.writeBool(this.flags.trackInMovie),t.writer.writeBool(this.flags.trackEnabled)},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),this.serializeTkhdContent(e),e.writer.writeUInt(0,32),e.writer.writeUInt(0,32),e.writer.writeUInt(this.layer,16),e.writer.writeUInt(this.alternateGroup,16),e.writer.writeUInt(zs(this.volume,8),16),e.writer.writeUInt(0,16),pw(this.matrix,e),e.writer.writeUInt(zs(this.width,16),32),e.writer.writeUInt(zs(this.height,16),32)},e}(W),Ow=function(t){function e(e,i,s,n,r,o){return t.call(this,0,e,i,s,n,r,o)||this}return Dt(e,t),e.prototype.serializeTkhdContent=function(t){t.writer.writeUInt(this.creationTime,32),t.writer.writeUInt(this.modificationTime,32),t.writer.writeUInt(this.trackId,32),t.writer.writeUInt(0,32),t.writer.writeUInt(this.duration,32)},e}(Bw),Fw=function(t){function e(e,i,s,n,r,o){return t.call(this,1,e,i,s,n,r,o)||this}return Dt(e,t),e.prototype.serializeTkhdContent=function(t){t.writer.writeUInt(this.creationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.creationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.trackId,32),t.writer.writeUInt(0,32),t.writer.writeUInt(this.duration.getHighBitsUnsigned(),32),t.writer.writeUInt(this.duration.getLowBitsUnsigned(),32)},e}(Bw);function Vw(t){var e,i,s,n,r=t.data,o=Fp(r.nextUint32()),h=o.version,a=o.flags,u=a.isSet(8),c=a.isSet(4),l=a.isSet(2),d=a.isSet(1);0===h?(e=r.nextUint32(),i=r.nextUint32(),s=r.nextUint32(),r.skip(4),n=r.nextUint32()):(e=r.nextUint64(),i=r.nextUint64(),s=r.nextUint32(),r.skip(4),n=r.nextUint64()),r.skip(8);var f=r.nextInt16(),_=r.nextInt16(),v=nt(r.nextInt16(),8);r.skip(2);var m=Up(r),g=nt(r.nextUint32(),16),p=nt(r.nextUint32(),16);return 0===h?new Ow({creation:e,modification:i,duration:n},s,v,g,p,{layer:f,matrix:m,alternateGroup:_,trackSizeIsAspectRatio:u,trackEnabled:d,trackInPreview:c,trackInMovie:l}):new Fw({creation:e,modification:i,duration:n},s,v,g,p,{layer:f,matrix:m,alternateGroup:_,trackSizeIsAspectRatio:u,trackEnabled:d,trackInPreview:c,trackInMovie:l})}var Ww=function(t){function e(){return t.call(this,"trak")||this}return Dt(e,t),e}(ea);function Uw(t){for(var e=new Ww,i=0,s=ci(t.data);i<s.length;i++){var n=s[i];dt(n,"tkhd")?e.boxes.push(Vw(n)):dt(n,"mdia")?e.boxes.push(lw(n)):dt(n,"edts")?e.boxes.push(tw(n)):e.boxes.push(ai(n))}return e}var Gw=function(t){function e(){return t.call(this,"moov")||this}return Dt(e,t),e}(ea);function Hw(t){for(var e=new Gw,i=0,s=ci(t.data);i<s.length;i++){var n=s[i];dt(n,"mvhd")?e.boxes.push(Lw(n)):dt(n,"trak")?e.boxes.push(Uw(n)):dt(n,"mvex")?e.boxes.push(Pw(n)):dt(n,"pssh")?e.boxes.push(kw(n)):e.boxes.push(ai(n))}return e}r(),r(),r();var Zw=function(t){function e(e,i,s){void 0===s&&(s=0);var n=t.call(this,"tfdt",i,s)||this;return n.baseMediaDecodeTime=e,n}return Dt(e,t),w.defineProperty(e.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"baseMediaDecodeTime",{get:function(){return this.JA},set:function(t){if(!Ni(t,this.bitSize))throw new g("Provided baseMediaDecodeTime does not fit in ".concat(this.bitSize," bits."));this.JA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8},e}(W),Xw=function(t){function e(e,i){return void 0===i&&(i=0),t.call(this,e,0,i)||this}return Dt(e,t),e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.baseMediaDecodeTime,32)},e}(Zw),wc=function(t){function e(e,i){return void 0===i&&(i=0),t.call(this,e,1,i)||this}return Dt(e,t),e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.baseMediaDecodeTime.getHighBitsUnsigned(),32),e.writer.writeUInt(this.baseMediaDecodeTime.getLowBitsUnsigned(),32)},e}(Zw);function zw(t){var e=t.data,i=Fp(e.nextUint32()),s=i.version,n=i.flags;return 0===s?new Xw(e.nextUint32(),n.raw):new wc(e.nextUint64(),n.raw)}r();var qw=function(t){function e(e,i){void 0===i&&(i=0);var s=t.call(this,"tfhd",i,function(t){return{baseDataOffsetPresent:void 0!==t.baseDataOffset,sampleDescriptionIndexPresent:void 0!==t.sampleDescriptionIndex,defaultSampleDurationPresent:void 0!==t.defaultSampleDuration,defaultSampleSizePresent:void 0!==t.defaultSampleSize,defaultSampleFlagsPresent:void 0!==t.defaultSampleFlags,durationIsEmpty:t.durationIsEmpty,defaultBaseIsMoof:t.defaultBaseIsMoof}}(e))||this;return s.trackId=e.trackId,s.baseDataOffset=e.baseDataOffset,s.sampleDescriptionIndex=e.sampleDescriptionIndex,s.defaultSampleDuration=e.defaultSampleDuration,s.defaultSampleSize=e.defaultSampleSize,s.defaultSampleFlags=e.defaultSampleFlags,s}return Dt(e,t),w.defineProperty(e.prototype,"trackId",{get:function(){return this.VA},set:function(t){if(!Ni(t,32))throw new g("Provided track id does not fit in 32 bits.");this.VA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"baseDataOffset",{get:function(){return this.$A},set:function(t){if(void 0===t&&this.flags.baseDataOffsetPresent)throw new g("The base data offset present flag is set.");if(void 0!==t&&!this.flags.baseDataOffsetPresent)throw new g("The base data offset present flag is not set.");if(t&&!Ni(t,64))throw new g("Provided baseDataOffset does not fit in 32 bits.");this.$A=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"sampleDescriptionIndex",{get:function(){return this.tS},set:function(t){if(void 0===t&&this.flags.sampleDescriptionIndexPresent)throw new g("The sample description index flag is set.");if(void 0!==t&&!this.flags.sampleDescriptionIndexPresent)throw new g("The sample description index flag is not set.");if(t&&!Ni(t,32))throw new g("Provided sampleDescriptionIndex does not fit in 32 bits.");this.tS=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"defaultSampleDuration",{get:function(){return this.UA},set:function(t){if(void 0===t&&this.flags.defaultSampleDurationPresent)throw new g("The default sample duration present flag is set.");if(void 0!==t&&!this.flags.defaultSampleDurationPresent)throw new g("The default sample duration present flag is not set.");if(t&&!Ni(t,32))throw new g("Provided defaultSampleDuration does not fit in 32 bits.");this.UA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"defaultSampleSize",{get:function(){return this.GA},set:function(t){if(void 0===t&&this.flags.defaultSampleSizePresent)throw new g("The default sample size present flag is set.");if(void 0!==t&&!this.flags.defaultSampleSizePresent)throw new g("The default sample size present flag is not set.");if(t&&!Ni(t,32))throw new g("Provided defaultSampleSize does not fit in 32 bits.");this.GA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"defaultSampleFlags",{get:function(){return this.HA},set:function(t){if(void 0===t&&this.flags.defaultSampleFlagsPresent)throw new g("The default sample flags present flag is set.");if(void 0!==t&&!this.flags.defaultSampleFlagsPresent)throw new g("The default sample flags present flag is not set.");if((null==t?void 0:t.samplePaddingValue)&&!Ni(t.samplePaddingValue,3))throw new g("Provided sample padding value does not fit in 3 bits.");if((null==t?void 0:t.sampleDegradationPriority)&&!Ni(t.sampleDegradationPriority,16))throw new g("Provided sample degradation priority does not fit in 16 bits.");this.HA=t},enumerable:!1,configurable:!0}),e.prototype.serializeFlags=function(t){t.writer.writeUInt(0,6),t.writer.writeBool(this.flags.defaultBaseIsMoof),t.writer.writeBool(this.flags.durationIsEmpty),t.writer.writeByte(0),t.writer.writeUInt(0,2),t.writer.writeBool(this.flags.defaultSampleFlagsPresent),t.writer.writeBool(this.flags.defaultSampleSizePresent),t.writer.writeBool(this.flags.defaultSampleDurationPresent),t.writer.writeBit(0),t.writer.writeBool(this.flags.sampleDescriptionIndexPresent),t.writer.writeBool(this.flags.baseDataOffsetPresent)},e.prototype.getBoxContentSize=function(){var e=t.prototype.getBoxContentSize.call(this)+4;return this.flags.baseDataOffsetPresent&&(e+=8),this.flags.sampleDescriptionIndexPresent&&(e+=4),this.flags.defaultSampleDurationPresent&&(e+=4),this.flags.defaultSampleSizePresent&&(e+=4),this.flags.defaultSampleFlagsPresent&&(e+=4),e},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.trackId,32),this.flags.baseDataOffsetPresent&&(e.writer.writeUInt(this.baseDataOffset.getHighBitsUnsigned(),32),e.writer.writeUInt(this.baseDataOffset.getLowBitsUnsigned(),32)),this.flags.sampleDescriptionIndexPresent&&e.writer.writeUInt(this.sampleDescriptionIndex,32),this.flags.defaultSampleDurationPresent&&e.writer.writeUInt(this.defaultSampleDuration,32),this.flags.defaultSampleSizePresent&&e.writer.writeUInt(this.defaultSampleSize,32),this.flags.defaultSampleFlagsPresent&&yw(this.defaultSampleFlags,e)},e}(W);function Yw(t){var e=t.data,i=e.nextUint8(),s=new so(D.from(e.nextUint8Array(3)));s.skipBits(6);var n=Boolean(s.readBit()),r=Boolean(s.readBit());s.skipBits(10);var o=Boolean(s.readBit()),h=Boolean(s.readBit()),a=Boolean(s.readBit());s.skipBits(1);var u=Boolean(s.readBit()),c=Boolean(s.readBit()),l=e.nextUint32(),d=c?e.nextUint64():void 0,f=u?e.nextUint32():void 0,_=a?e.nextUint32():void 0,v=h?e.nextUint32():void 0,m=o?Wp(new so(D.from(e.nextUint8Array(4)))):void 0;return new qw({trackId:l,defaultBaseIsMoof:n,durationIsEmpty:r,baseDataOffset:d,sampleDescriptionIndex:f,defaultSampleDuration:_,defaultSampleSize:v,defaultSampleFlags:m},i)}r();var Kw=function(t){function e(e,i,s){var n=t.call(this,"trun",e,function(t){var e,i,s,n;return{dataOffsetPresent:void 0!==t.dataOffset,firstSampleFlagsPresent:void 0!==t.firstSampleFlags,sampleDurationPresent:null!==(e=t.sampleDurationPresent)&&void 0!==e&&e,sampleSizePresent:null!==(i=t.sampleSizePresent)&&void 0!==i&&i,sampleFlagsPresent:null!==(s=t.sampleFlagsPresent)&&void 0!==s&&s,sampleCompositionTimeOffsetsPresent:null!==(n=t.sampleCompositionTimeOffsetsPresent)&&void 0!==n&&n}}(i))||this;return n.dataOffset=i.dataOffset,n.samples=s,n.firstSampleFlags=i.firstSampleFlags,n}return Dt(e,t),w.defineProperty(e.prototype,"dataOffset",{get:function(){return this.eS},set:function(t){if(t&&!Ni(t,32))throw new g("Provided data offset does not fit in 32 bits.");this.eS=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"firstSampleFlags",{get:function(){return this.iS},set:function(t){if((null==t?void 0:t.samplePaddingValue)&&!Ni(t.samplePaddingValue,3))throw new g("Provided sample padding value does not fit in 3 bits.");if((null==t?void 0:t.sampleDegradationPriority)&&!Ni(t.sampleDegradationPriority,16))throw new g("Provided sample degradation priority does not fit in 16 bits.");this.iS=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"samples",{get:function(){return this.sS},set:function(t){var e,i;if(!Ni(t.length,32))throw new g("The sample count cannot be represented in 32 bits.");for(var s=0,n=t;s<n.length;s++){var r=n[s];if(void 0===r.duration&&this.flags.sampleDurationPresent)throw new g("The sample duration present flag is set.");if(void 0!==r.duration&&!this.flags.sampleDurationPresent)throw new g("The sample duration present flag is not set.");if(r.duration&&!Ni(r.duration,32))throw new g("Provided sample duration does not fit in 32 bits.");if(void 0===r.size&&this.flags.sampleSizePresent)throw new g("The sample size present flag is set.");if(void 0!==r.size&&!this.flags.sampleSizePresent)throw new g("The sample size present flag is not set.");if(r.size&&!Ni(r.size,32))throw new g("Provided sample size does not fit in 32 bits.");if(void 0===r.flags&&this.flags.sampleFlagsPresent)throw new g("The sample flags present flag is set.");if(void 0!==r.flags&&!this.flags.sampleFlagsPresent)throw new g("The sample flags present flag is not set.");if((null===(e=r.flags)||void 0===e?void 0:e.samplePaddingValue)&&!Ni(r.flags.samplePaddingValue,3))throw new g("Provided sample padding value does not fit in 3 bits.");if((null===(i=r.flags)||void 0===i?void 0:i.sampleDegradationPriority)&&!Ni(r.flags.sampleDegradationPriority,16))throw new g("Provided sample degradation priority does not fit in 16 bits.");if(void 0===r.compositionTimeOffset&&this.flags.sampleCompositionTimeOffsetsPresent)throw new g("The sample compositionTimeOffset present flag is set.");if(void 0!==r.compositionTimeOffset&&!this.flags.sampleCompositionTimeOffsetsPresent)throw new g("The sample compositionTimeOffset present flag is not set.");if(r.compositionTimeOffset&&!Ni(r.compositionTimeOffset,32))throw new g("Provided sample compositionTimeOffset does not fit in 32 bits.")}this.sS=t},enumerable:!1,configurable:!0}),e.prototype.serializeFlags=function(t){t.writer.writeByte(0),t.writer.writeUInt(0,4),t.writer.writeBool(this.flags.sampleCompositionTimeOffsetsPresent),t.writer.writeBool(this.flags.sampleFlagsPresent),t.writer.writeBool(this.flags.sampleSizePresent),t.writer.writeBool(this.flags.sampleDurationPresent),t.writer.writeUInt(0,5),t.writer.writeBool(this.flags.firstSampleFlagsPresent),t.writer.writeBit(0),t.writer.writeBool(this.flags.dataOffsetPresent)},e.prototype.getBoxContentSize=function(){var e=t.prototype.getBoxContentSize.call(this)+4;return this.flags.dataOffsetPresent&&(e+=4),this.flags.firstSampleFlagsPresent&&(e+=4),this.flags.sampleDurationPresent&&(e+=4*this.samples.length),this.flags.sampleSizePresent&&(e+=4*this.samples.length),this.flags.sampleFlagsPresent&&(e+=4*this.samples.length),this.flags.sampleCompositionTimeOffsetsPresent&&(e+=4*this.samples.length),e},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.samples.length,32),this.flags.dataOffsetPresent&&e.writer.writeUInt(this.dataOffset,32),this.flags.firstSampleFlagsPresent&&yw(this.firstSampleFlags,e);for(var i=0,s=this.samples;i<s.length;i++){var n=s[i];this.flags.sampleDurationPresent&&e.writer.writeUInt(n.duration,32),this.flags.sampleSizePresent&&e.writer.writeUInt(n.size,32),this.flags.sampleFlagsPresent&&yw(n.flags,e),this.flags.sampleCompositionTimeOffsetsPresent&&(0===this.version?e.writer.writeUInt(n.compositionTimeOffset,32):e.writer.writeInt(n.compositionTimeOffset,32))}},e}(W);function jw(t){var e=t.data,i=e.nextUint8(),s=new so(D.from(e.nextUint8Array(3)));s.skipBits(12);var n=Boolean(s.readBit()),r=Boolean(s.readBit()),o=Boolean(s.readBit()),h=Boolean(s.readBit());s.skipBits(5);var a=Boolean(s.readBit());s.skipBits(1);var u=Boolean(s.readBit()),c=e.nextUint32(),l={sampleDurationPresent:h,sampleSizePresent:o,sampleFlagsPresent:r,sampleCompositionTimeOffsetsPresent:n};u&&(l.dataOffset=e.nextInt32()),a&&(l.firstSampleFlags=Wp(new so(D.from(e.nextUint8Array(4)))));for(var d=[],f=0;f<c;f++){var _={};h&&(_.duration=e.nextUint32()),o&&(_.size=e.nextUint32()),r&&(_.flags=Wp(new so(D.from(e.nextUint8Array(4))))),n&&(_.compositionTimeOffset=0===i?e.nextUint32():e.nextInt32()),d.push(_)}return new Kw(i,l,d)}var Eh=function(t){function e(){return t.call(this,"traf")||this}return Dt(e,t),e}(ea);function Qw(t){for(var e=new Eh,i=0,s=ci(t.data);i<s.length;i++){var n=s[i];dt(n,"tfhd")?e.boxes.push(Yw(n)):dt(n,"tfdt")?e.boxes.push(zw(n)):dt(n,"trun")?e.boxes.push(jw(n)):e.boxes.push(ai(n))}return e}var Jw=function(t){function e(){return t.call(this,"moof")||this}return Dt(e,t),e}(ea);function $w(t){for(var e=new Jw,i=0,s=ci(t.data);i<s.length;i++){var n=s[i];dt(n,"traf")?e.boxes.push(Qw(n)):dt(n,"pssh")?e.boxes.push(kw(n)):e.boxes.push(ai(n))}return e}r();!function(t){function e(e){var i=t.call(this,"mfhd",0,0)||this;return i.sequenceNumber=e,i}Dt(e,t),w.defineProperty(e.prototype,"sequenceNumber",{get:function(){return this.nS},set:function(t){if(!Ni(t,32))throw new g("Provided sequence number does not fit in 32 bits.");this.nS=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.sequenceNumber,32)}}(W);r();var ty=function(t){function e(e){var i=t.call(this,"frma")||this;return i.codingName=e,i}return Dt(e,t),w.defineProperty(e.prototype,"codingName",{get:function(){return this.rS},set:function(t){if(4!==t.length)throw new g("Provided coding name was not 4 characters long.");this.rS=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return 4},e.prototype.serializeBoxContent=function(t){t.writer.writeString(this.codingName)},e}(tr);r();!function(t){function e(e,i){var s=t.call(this,"pasp")||this;return s.hSpacing=e,s.vSpacing=i,s}Dt(e,t),w.defineProperty(e.prototype,"hSpacing",{get:function(){return this.oS},set:function(t){if(!Ni(t,32))throw new g("Provided hSpacing does not fit in 32 bits.");this.oS=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"vSpacing",{get:function(){return this.hS},set:function(t){if(!Ni(t,32))throw new g("Provided vSpacing does not fit in 32 bits.");this.hS=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return 8},e.prototype.serializeBoxContent=function(t){t.writer.writeUInt(this.hSpacing,32),t.writer.writeUInt(this.vSpacing,32)}}(tr);r();!function(t){function e(e,i,s){var n=t.call(this,e)||this;return n.sample=i,n.sinf=s,n}Dt(e,t),e.prototype.getBoxContentSize=function(){return this.sample.getBoxContentSize()+this.sinf.getSize()},e.prototype.serializeBoxContent=function(t){this.sample.serializeBoxContent(t),t.concat(this.sinf.serialize())}}(ea);r();!function(t){function e(e,i,s){var n=t.call(this,"sinf")||this;return n.schm=i,n.schi=s,n.frma=new ty(e),n}Dt(e,t),e.prototype.getBoxContentSize=function(){var t,e,i,s;return this.frma.getSize()+(null!==(e=null===(t=this.schm)||void 0===t?void 0:t.getSize())&&void 0!==e?e:0)+(null!==(s=null===(i=this.schi)||void 0===i?void 0:i.getSize())&&void 0!==s?s:0)},e.prototype.serializeBoxContent=function(t){t.concat(this.frma.serialize()),this.schm&&t.concat(this.schm.serialize()),this.schi&&t.concat(this.schi.serialize())}}(tr);r();var ey=function(t){function e(e,i,s){var n=t.call(this,"saio",e,void 0===s?0:1)||this;return n.entries=i,n.explicitAuxInfoType=s,n}return Dt(e,t),w.defineProperty(e.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"entries",{get:function(){return this.pA},set:function(t){var e=this;if(!Ni(t.length,32))throw new g("Number of entries provided does not fit in 32 bits.");if(t.some((function(t){return!Ni(t,e.bitSize)})))throw new g("Not all provided entries fit in ".concat(this.bitSize," bits."));this.pA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"explicitAuxInfoType",{get:function(){return this.aS},set:function(t){if(void 0===t)this.flags=0;else{if(!Ni(t.auxInfoType,32))throw new g("Provided auxInfoType does not fit in 32 bits.");if(!Ni(t.auxInfoTypeParameter,32))throw new g("Provided auxInfoTypeParameter does not fit in 32 bits.");this.flags=1}this.aS=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+(void 0===this.explicitAuxInfoType?0:8)+4+this.entries.length*this.bitSize/8},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),void 0!==this.explicitAuxInfoType&&(e.writer.writeUInt(this.explicitAuxInfoType.auxInfoType,32),e.writer.writeUInt(this.explicitAuxInfoType.auxInfoTypeParameter,32)),e.writer.writeUInt(this.entries.length,32),this.serializeSaioContent(e)},e}(W);(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}Dt(e,t),e.prototype.serializeSaioContent=function(t){for(var e=0,i=this.entries;e<i.length;e++){var s=i[e];t.writer.writeUInt(s,32)}}})(ey),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}Dt(e,t),e.prototype.serializeSaioContent=function(t){for(var e=0,i=this.entries;e<i.length;e++){var s=i[e];t.writer.writeUInt(s.getHighBitsUnsigned(),32),t.writer.writeUInt(s.getLowBitsUnsigned(),32)}}}(ey);r();!function(t){function e(e,i,s){var n=t.call(this,"saiz",0,void 0===s?0:1)||this;return n.defaultSampleInfoSize=e,n.sampleInfoSizes=i,n.explicitAuxInfoType=s,n}Dt(e,t),w.defineProperty(e.prototype,"defaultSampleInfoSize",{get:function(){return this.uS},set:function(t){if(!Ni(t,8))throw new g("Provided defaultSampleInfoSize does not fit in a single byte.");this.uS=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"sampleInfoSizes",{get:function(){return this.cS},set:function(t){if(!Ni(t.length,32))throw new g("Number of sampleInfoSizes provided does not fit in 32 bits.");if(t.some((function(t){return!Ni(t,8)})))throw new g("Not all provided sampleInfoSizes fit in a byte.");this.cS=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"explicitAuxInfoType",{get:function(){return this.aS},set:function(t){if(void 0===t)this.flags=0;else{if(!Ni(t.auxInfoType,32))throw new g("Provided auxInfoType does not fit in 32 bits.");if(!Ni(t.auxInfoTypeParameter,32))throw new g("Provided auxInfoTypeParameter does not fit in 32 bits.");this.flags=1}this.aS=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+(void 0===this.explicitAuxInfoType?0:8)+1+4+(0!==this.defaultSampleInfoSize?0:this.sampleInfoSizes.length)},e.prototype.serializeBoxContent=function(e){if(0!==this.defaultSampleInfoSize&&this.sampleInfoSizes.length>0)throw new g("Both a default size and specific sizes are provided.  This is prohibited.");t.prototype.serializeBoxContent.call(this,e),void 0!==this.explicitAuxInfoType&&(e.writer.writeUInt(this.explicitAuxInfoType.auxInfoType,32),e.writer.writeUInt(this.explicitAuxInfoType.auxInfoTypeParameter,32)),e.writer.writeByte(this.defaultSampleInfoSize),e.writer.writeUInt(this.sampleInfoSizes.length,32);for(var i=0,s=this.sampleInfoSizes;i<s.length;i++){var n=s[i];e.writer.writeByte(n)}}}(W);r();!function(t){function e(e){var i=t.call(this,"sdtp",0,0)||this;return i.samples=e,i}Dt(e,t),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.samples.length},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e);for(var i=0,s=this.samples;i<s.length;i++){ww(s[i],e)}}}(W);r();!function(t){function e(e){return t.call(this,"stsd",e,0)||this}Dt(e,t),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.boxes.length,32)}}(vc);r();var iy=function(t){function e(e,i,s){var n=t.call(this,"sgpd",e,0)||this;return n.entries=s,n.groupingType=i,n}return Dt(e,t),w.defineProperty(e.prototype,"groupingType",{get:function(){return this.lS},set:function(t){if(4!==t.length)throw new g("The provided groupingType does not equal 4 characters.");this.lS=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeString(this.groupingType),this.serializeVersionBoxContent(e),e.writer.writeUInt(this.entries.length,32);for(var i=0,s=this.entries;i<s.length;i++){var n=s[i];this.serializeEntryBoxContent(e,n)}},e.prototype.serializeEntryBoxContent=function(t,e){e.serializeBoxContent(t)},e}(W);(function(t){function e(e,i){return t.call(this,0,e,i)||this}Dt(e,t),e.prototype.serializeVersionBoxContent=function(t){}})(iy),function(t){function e(e,i,s){var n=t.call(this,1,e,s)||this;return n.defaultLength=i,n}Dt(e,t),w.defineProperty(e.prototype,"defaultLength",{get:function(){return this.dS},set:function(t){if(!Ni(t,32))throw new g("The provided defaultLength does not fit in 32 bits.");this.dS=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+this.entries.length*(this.defaultLength||4)},e.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.defaultLength,32)},e.prototype.serializeEntryBoxContent=function(t,e){0===this.defaultLength&&t.writer.writeUInt(e.getBoxContentSize(),32),e.serializeBoxContent(t)}}(iy),function(t){function e(e,i,s,n){void 0===n&&(n=0);var r=this;if(e<2)throw new g("This constructor is only meant for versions 2 and up.");return(r=t.call(this,e,i,s)||this).defaultSampleDescriptionIndex=n,r}Dt(e,t),w.defineProperty(e.prototype,"defaultSampleDescriptionIndex",{get:function(){return this.WA},set:function(t){if(!Ni(t,32))throw new g("The provided defaultSampleDescriptionIndex does not fit in 32 bits.");this.WA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},e.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.defaultSampleDescriptionIndex,32)}}(iy);r();(function(t){function e(e){void 0===e&&(e=[]);var i=t.call(this,"stsz",0,0)||this;return i.sampleSizes=e,i}Dt(e,t),w.defineProperty(e.prototype,"sampleSizes",{get:function(){return this.fS},set:function(t){if(!Ni(t.length,32))throw new g("Number of allowed samples cannot fit in 32 bits.");if(t.some((function(t){return!Ni(t,32)})))throw new g("Not all sampleSizes can be represented in 32 bits.");this.fS=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4+4*this.sampleSizes.length},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(0,32),e.writer.writeUInt(this.sampleSizes.length,32);for(var i=0,s=this.sampleSizes;i<s.length;i++){var n=s[i];e.writer.writeUInt(n,32)}}})(W),function(t){function e(e,i){void 0===e&&(e=0),void 0===i&&(i=0);var s=t.call(this,"stsz",0,0)||this;return s.defaultSampleSize=e,s.samples=i,s}Dt(e,t),w.defineProperty(e.prototype,"defaultSampleSize",{get:function(){return this.GA},set:function(t){if(!Ni(t,32))throw new g("Provided defaultSampleSize does not fit in 32 bits.");this.GA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"samples",{get:function(){return this.sS},set:function(t){if(!Ni(t,32))throw new g("Number of allowed samples cannot fit in 32 bits.");this.sS=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.defaultSampleSize,32),e.writer.writeUInt(this.samples,32)}}(W);r();!function(t){function e(){return t.call(this,"stbl")||this}Dt(e,t)}(ea);r();!function(t){function e(e){var i=t.call(this,"stsc",0,0)||this;return i.entries=e,i}Dt(e,t),w.defineProperty(e.prototype,"entries",{get:function(){return this.pA},set:function(t){if(!Ni(t.length,32))throw new g("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!Ni(t.firstChunk,32)||!Ni(t.sampleDescriptionIndex,32)||!Ni(t.samplesPerChunk,32)})))throw new g("Not all entries can be represented in 96 bits.");this.pA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+12*this.entries.length},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.entries.length,32);for(var i=0,s=this.entries;i<s.length;i++){var n=s[i];e.writer.writeUInt(n.firstChunk,32),e.writer.writeUInt(n.samplesPerChunk,32),e.writer.writeUInt(n.sampleDescriptionIndex,32)}}}(W);r();!function(t){function e(){return t.call(this,"schi")||this}Dt(e,t)}(ea);r();!function(t){function e(e,i,s){var n=t.call(this,"schm",0,void 0===s?0:1)||this;return n.schemeType=e,n.schemeVersion=i,n.schemeUri=s,n}Dt(e,t),w.defineProperty(e.prototype,"schemeType",{get:function(){return this._S},set:function(t){if(4!==t.length)throw new g("The provided schemeType does not have a length of 4.");this._S=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"schemeVersion",{get:function(){return this.vS},set:function(t){if(!Ni(t,32))throw new g("The provided schemeVersion does not fit in 23 bits.");this.vS=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"schemeUri",{get:function(){return this.mS},set:function(t){if(t&&4!==t.length)throw new g("The provided schemeUri does not have a length of 4.");this.flags=void 0===t?0:1,this.mS=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4+(void 0===this.schemeUri?0:this.schemeUri.length+1)},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeString(this.schemeType),e.writer.writeUInt(this.schemeVersion,32),this.schemeUri&&(e.writer.writeString(this.schemeUri),e.writer.writeByte(0))}}(W);r();var sy=function(t){function e(e,i,s,n,r,o,h){void 0===h&&(h=0);var a=t.call(this,"sidx",e,h)||this;return a.referenceId=i,a.timescale=s,a.earliestPresentationTime=n,a.firstOffset=r,a.references=o,a}return Dt(e,t),w.defineProperty(e.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"referenceId",{get:function(){return this.gS},set:function(t){if(!Ni(t,32))throw new g("Provided referenceId does not fit in 32 bits.");this.gS=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"timescale",{get:function(){return this.NA},set:function(t){if(!Ni(t,32))throw new g("Provided timescale does not fit in 32 bits.");this.NA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"earliestPresentationTime",{get:function(){return this.pS},set:function(t){if(!Ni(t,this.bitSize))throw new g("Provided earliestPresentationTime does not fit in ".concat(this.bitSize," bits."));this.pS=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"firstOffset",{get:function(){return this.wS},set:function(t){if(!Ni(t,this.bitSize))throw new g("Provided timescale does not fit in ".concat(this.bitSize," bits."));this.wS=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"references",{get:function(){return this.yS},set:function(t){if(!Ni(t.length,16))throw new g("The number of provided reference items does not fit in 16 bits.");for(var e=0,i=t;e<i.length;e++){var s=i[e];if(!Ni(s.referencedSize,31))throw new g("Provided referenced size does not fit in 31 bits.");if(!Ni(s.subsegmentDuration,32))throw new g("Provided subsegment duration does not fit in 31 bits.");if(!Ni(s.sapType,3))throw new g("Provided SAP type does not fit in 3 bits.");if(!Ni(s.sapDeltaTime,28))throw new g("Provided SAP delta time does not fit in 28 bits.")}this.yS=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4+this.bitSize/8*2+2+2+12*this.references.length},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.referenceId,32),e.writer.writeUInt(this.timescale,32),this.serializeSidxBoxContent(e),e.writer.writeUInt(0,16),e.writer.writeUInt(this.references.length,16);for(var i=0,s=this.references;i<s.length;i++){var n=s[i];e.writer.writeBit(n.referenceType),e.writer.writeUInt(n.referencedSize,31),e.writer.writeUInt(n.subsegmentDuration,32),e.writer.writeBool(n.startsWithSap),e.writer.writeUInt(n.sapType,3),e.writer.writeUInt(n.sapDeltaTime,28)}},e}(W),ny=function(t){function e(e,i,s,n,r,o){return void 0===o&&(o=0),t.call(this,0,e,i,s,n,r,o)||this}return Dt(e,t),e.prototype.serializeSidxBoxContent=function(t){t.writer.writeUInt(this.earliestPresentationTime,32),t.writer.writeUInt(this.firstOffset,32)},e}(sy),ry=function(t){function e(e,i,s,n,r,o){return void 0===o&&(o=0),t.call(this,1,e,i,s,n,r,o)||this}return Dt(e,t),e.prototype.serializeSidxBoxContent=function(t){t.writer.writeUInt(this.earliestPresentationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.earliestPresentationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.firstOffset.getHighBitsUnsigned(),32),t.writer.writeUInt(this.firstOffset.getLowBitsUnsigned(),32)},e}(sy);r();var oy=function(t){function e(e,i,s){return t.call(this,"styp",e,i,s)||this}return Dt(e,t),e}(ew);function hy(t){for(var e=t.data,i=e.nextChars(4),s=e.nextUint32(),n=[];e.cursor.offset<e.data.byteLength;)n.push(e.nextChars(4));return new oy(i,s,n)}r();!function(t){function e(e){void 0===e&&(e=0);var i=t.call(this,"smhd",0,0)||this;return i.balance=e,i}Dt(e,t),w.defineProperty(e.prototype,"balance",{get:function(){return this.bS},set:function(t){if(t<-1||t>1)throw new g("Provided balance does not fit in the allowed range [-1, 1].");if(!Ni(zs(t,8),16))throw new g("Provided balance does not fit in 16 bits (fixed 8.8).");this.bS=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+2+2},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(zs(this.balance,8),16),e.writer.writeUInt(0,16)}}(W);r();!function(t){function e(e){var i=t.call(this,"stss",0,0)||this;return i.entries=e,i}Dt(e,t),w.defineProperty(e.prototype,"entries",{get:function(){return this.pA},set:function(t){if(!Ni(t.length,32))throw new g("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!Ni(t,32)})))throw new g("Not all entries can be represented in 32 bits.");this.pA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4*this.entries.length},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.entries.length,32);for(var i=0,s=this.entries;i<s.length;i++){var n=s[i];e.writer.writeUInt(n,32)}}}(W);r();!function(t){function e(e){var i=t.call(this,"stts",0,0)||this;return i.entries=e,i}Dt(e,t),w.defineProperty(e.prototype,"entries",{get:function(){return this.pA},set:function(t){if(!Ni(t.length,32))throw new g("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!Ni(t.sampleCount,32)||!Ni(t.sampleDelta,32)})))throw new g("Not all entries can be represented in 64 bits.");this.pA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+8*this.entries.length},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.entries.length,32);for(var i=0,s=this.entries;i<s.length;i++){var n=s[i];e.writer.writeUInt(n.sampleCount,32),e.writer.writeUInt(n.sampleDelta,32)}}}(W);r();!function(t){function e(e){var i=t.call(this,"trep",0,0)||this;return i.trackId=e,i}Dt(e,t),w.defineProperty(e.prototype,"trackId",{get:function(){return this.VA},set:function(t){if(!Ni(t,32))throw new g("The provided trackId does not fit in 32 bits.");this.VA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.trackId,32)}}(vc);r();!function(t){function e(){return t.call(this,"udta")||this}Dt(e,t)}(ea);r();var ay={red:0,green:0,blue:0};!function(t){function e(e,i){void 0===e&&(e=0),void 0===i&&(i=ay);var s=t.call(this,"vmhd",0,1)||this;return s.graphicsMode=e,s.opColor=i,s}Dt(e,t),w.defineProperty(e.prototype,"opColor",{get:function(){return this.SS},set:function(t){if(!Ni(t.red,16)||!Ni(t.green,16)||!Ni(t.blue,16))throw new g("Not all colors could be represented in 16 bits.");this.SS=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+2+6},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.graphicsMode,16),e.writer.writeUInt(this.opColor.red,16),e.writer.writeUInt(this.opColor.green,16),e.writer.writeUInt(this.opColor.blue,16)}}(W);r();var uy=function(t){function e(e,i,s,n,r){void 0===n&&(n={}),void 0===r&&(r=void 0);var o,h,a,u,c,l=this;return(l=t.call(this,e,i)||this).width=s.width,l.height=s.height,l.horizontalResolution=null!==(o=s.horizontal)&&void 0!==o?o:72,l.verticalResolution=null!==(h=s.vertical)&&void 0!==h?h:72,l.compressorName=null!==(a=n.compressorName)&&void 0!==a?a:"",l.frameCount=null!==(u=n.frameCount)&&void 0!==u?u:1,l.depth=null!==(c=n.depth)&&void 0!==c?c:24,l.clap=n.clap,l.pasp=n.pasp,l.extra=r,l}return Dt(e,t),w.defineProperty(e.prototype,"width",{get:function(){return this.YA},set:function(t){if(!Ni(t,16))throw new g("Provided width does not fit in 16 bits.");this.YA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"height",{get:function(){return this.KA},set:function(t){if(!Ni(t,16))throw new g("Provided height does not fit in 16 bits.");this.KA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"horizontalResolution",{get:function(){return this.TS},set:function(t){if(!Ni(zs(t,16),32))throw new g("Provided horizontalResolution does not fit in 32 bits (fixed 16.16).");this.TS=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"verticalResolution",{get:function(){return this.kS},set:function(t){if(!Ni(zs(t,16),32))throw new g("Provided verticalResolution does not fit in 32 bits (fixed 16.16).");this.kS=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"compressorName",{get:function(){return this.ES},set:function(t){if(t.length>31)throw new g("The provided compressorName should at most be 31 characters long.");this.ES=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"frameCount",{get:function(){return this.xS},set:function(t){if(!Ni(t,16))throw new g("Provided frameCount does not fit in 16 bits.");this.xS=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"depth",{get:function(){return this.RS},set:function(t){if(!Ni(t,16))throw new g("Provided depth does not fit in 16 bits.");this.RS=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){var e,i,s,n,r,o;return t.prototype.getBoxContentSize.call(this)+2+2+12+2+2+4+4+4+2+32+2+2+(null!==(i=null===(e=this.clap)||void 0===e?void 0:e.getSize())&&void 0!==i?i:0)+(null!==(n=null===(s=this.pasp)||void 0===s?void 0:s.getSize())&&void 0!==n?n:0)+(null!==(o=null===(r=this.extra)||void 0===r?void 0:r.length)&&void 0!==o?o:0)},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(0,16),e.writer.writeUInt(0,16),e.writer.writeUInt(0,32),e.writer.writeUInt(0,32),e.writer.writeUInt(0,32),e.writer.writeUInt(this.width,16),e.writer.writeUInt(this.height,16),e.writer.writeUInt(zs(this.horizontalResolution,16),32),e.writer.writeUInt(zs(this.verticalResolution,16),32),e.writer.writeUInt(0,32),e.writer.writeUInt(this.frameCount,16),e.writer.writeByte(this.compressorName.length),e.writer.writeString(this.compressorName);for(var i=0;i<31-this.compressorName.length;i++)e.writer.writeByte(0);e.writer.writeUInt(this.depth,16),e.writer.writeInt(-1,16),this.clap&&e.concat(this.clap.serialize()),this.pasp&&e.concat(this.pasp.serialize()),this.extra&&fh(e.writer,this.extra)},e}(qp);r(),r();!function(t){function e(e){var i=t.call(this,"esds",0,0)||this;return i.esDescriptor=e,i}Dt(e,t),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+(this.esDescriptor instanceof j?this.esDescriptor.length:this.esDescriptor.getSize())},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),this.esDescriptor instanceof j?e.concat(D.from(this.esDescriptor)):this.esDescriptor.serialize(e)}}(W);r();!function(t){function e(e,i,s){var n=t.call(this,"mp4a",e,s)||this;return n.esd=i,n}Dt(e,t),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.esd.getSize()},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.concat(this.esd.serialize())}}(Yp);r();!function(t){function e(e,i,s,n){void 0===n&&(n={});var r=t.call(this,"mp4v",e,i,n)||this;return r.esDescriptor=s,r}Dt(e,t),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.esDescriptor.getSize()},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),this.esDescriptor.serialize(e)}}(uy);r();!function(t){function e(e,i){var s=t.call(this,"mp4s",e)||this;return s.esDescriptor=i,s}Dt(e,t),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.esDescriptor.getSize()},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),this.esDescriptor.serialize(e)}}(qp);r(),r();!function(t){function e(e){var i=t.call(this,"avcC")||this;return i.decoderConfig=e,i}Dt(e,t),e.prototype.getBoxContentSize=function(){return this.decoderConfig.getSize()},e.prototype.serializeBoxContent=function(t){this.decoderConfig.serialize(t)}}(tr);r();!function(){function t(t,e,i,s,n,r){void 0===r&&(r=1),this.lengthSizeMinusOne=i,this.version=r,this.profileIndication=t.indication,this.profileCompatibility=t.compatibility,this.levelIndication=e,this.spsSets=s,this.ppsSets=n}w.defineProperty(t.prototype,"version",{get:function(){return this.IS},set:function(t){if(!Ni(t,8))throw new g("Provided version does not fit in 8 bits.");this.IS=t},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"profileIndication",{get:function(){return this.CS},set:function(t){if(!Ni(t,8))throw new g("Provided profileIndication does not fit in 8 bits.");this.CS=t},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"profileCompatibility",{get:function(){return this.PS},set:function(t){if(!Ni(t,8))throw new g("Provided profileCompatibility does not fit in 8 bits.");this.PS=t},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"levelIndication",{get:function(){return this.DS},set:function(t){if(!Ni(t,8))throw new g("Provided levelIndication does not fit in 8 bits.");this.DS=t},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"spsSets",{get:function(){return this.NS},set:function(t){if(!Ni(t.length,5))throw new g("Provided number of spsSets exceeds the max (32)");this.NS=t},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"ppsSets",{get:function(){return this.MS},set:function(t){if(!Ni(t.length,8))throw new g("Provided number of ppsSets exceeds the max (256)");this.MS=t},enumerable:!1,configurable:!0}),t.prototype.getSize=function(){return 7+2*this.spsSets.length+this.spsSets.reduce((function(t,e){return t+e.length}),0)+2*this.ppsSets.length+this.ppsSets.reduce((function(t,e){return t+e.length}),0)},t.prototype.serialize=function(t){t.writer.writeByte(this.version),t.writer.writeByte(this.profileIndication),t.writer.writeByte(this.profileCompatibility),t.writer.writeByte(this.levelIndication),t.writer.writeBits([1,1,1,1,1,1]),t.writer.writeUInt(this.lengthSizeMinusOne,2),t.writer.writeBits([1,1,1]),t.writer.writeUInt(this.spsSets.length,5);for(var e=0,i=this.spsSets;e<i.length;e++){var s=i[e];t.writer.writeUInt(s.length,16),t.concat(D.from(s))}t.writer.writeByte(this.ppsSets.length);for(var n=0,r=this.ppsSets;n<r.length;n++){var o=r[n];t.writer.writeUInt(o.length,16),t.concat(D.from(o))}}}();r();!function(t){function e(e,i,s,n,r){void 0===n&&(n={}),void 0===r&&(r=void 0);var o=t.call(this,"avc1",e,i,n)||this;return o.configurationBox=s,o.bitrateBox=r,o}Dt(e,t),e.prototype.getBoxContentSize=function(){var e,i;return t.prototype.getBoxContentSize.call(this)+this.configurationBox.getSize()+(null!==(i=null===(e=this.bitrateBox)||void 0===e?void 0:e.getSize())&&void 0!==i?i:0)},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.concat(this.configurationBox.serialize()),this.bitrateBox&&e.concat(this.bitrateBox.serialize())}}(uy);r();!function(t){function e(e,i,s){var n=t.call(this,"btrt")||this;return n.bufferSizeDb=e,n.max=i,n.avg=s,n}Dt(e,t),w.defineProperty(e.prototype,"bufferSizeDb",{get:function(){return this.hA},set:function(t){if(!Ni(t,32))throw new g("Provided bufferSizeDb does not fit in 32 bits.");this.hA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"max",{get:function(){return this.M_},set:function(t){if(!Ni(t,32))throw new g("Provided max does not fit in 32 bits.");this.M_=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"avg",{get:function(){return this.LS},set:function(t){if(!Ni(t,32))throw new g("Provided avg does not fit in 32 bits.");this.LS=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return 12},e.prototype.serializeBoxContent=function(t){t.writer.writeUInt(this.bufferSizeDb,32),t.writer.writeUInt(this.max,32),t.writer.writeUInt(this.avg,32)}}(tr);r(),r(),r();var cy=function(t){function e(e,i){var s,n,r,o,h=this;if(h=t.call(this,"tenc",e,0)||this,i.perSampleIvSize>0&&(null!==(n=null===(s=i.constantIv)||void 0===s?void 0:s.length)&&void 0!==n?n:0)>0)throw new g("Either perSampleSize should be > 0 or constantIv should be defined. Not both.");return h.kId=i.kId,h.isProtected=null!==(r=i.isProtected)&&void 0!==r?r:1,i.perSampleIvSize>0?h.perSampleIvSize=i.perSampleIvSize:h.constantIv=null!==(o=i.constantIv)&&void 0!==o?o:new j(0),h}return Dt(e,t),w.defineProperty(e.prototype,"isProtected",{get:function(){return this.FS},set:function(t){if(!Ni(t,8))throw new g("Provided isProtected does not fit in 1 byte.");this.FS=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"perSampleIvSize",{get:function(){return this.VS},set:function(t){if(![8,16].includes(t))throw new g("Provided perSampleIvSize does not match any allowed value [8, 16].");this.VS=t,this.WS=new j(0)},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"kId",{get:function(){return this.US},set:function(t){if(16!==t.length)throw new g("Provided kId length is not 16.");this.US=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"constantIv",{get:function(){return this.WS},set:function(t){if(![8,16].includes(t.length))throw new g("Provided constant IV length does not match any allowed value [8, 16].");this.WS=t,this.VS=0},enumerable:!1,configurable:!0}),e.prototype.getTencHeaderSize=function(){return 20+(this.constantIv.length>0?1+this.constantIv.length:0)},e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.getTencHeaderSize()},e.prototype.serializeVersionBoxContent=function(t){t.writer.writeByte(0)},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),this.serializeOwnContent(e)},e.prototype.serializeOwnContent=function(t){t.writer.writeByte(0),this.serializeVersionBoxContent(t),t.writer.writeByte(this.isProtected),t.writer.writeByte(this.perSampleIvSize),fh(t.writer,this.kId),0===this.perSampleIvSize&&(t.writer.writeByte(this.constantIv.length),fh(t.writer,this.constantIv))},e}(W),ly=(function(t){function e(e){return t.call(this,0,e)||this}Dt(e,t)}(cy),function(t){function e(e){var i=t.call(this,1,e)||this;return i.cryptByteBlocks=e.cryptByteBlock,i.skipByteBlocks=e.skipByteBlock,i}return Dt(e,t),w.defineProperty(e.prototype,"cryptByteBlocks",{get:function(){return this.GS},set:function(t){if(!Ni(t,4))throw new g("Provided cryptByteBlocks does not fit in 4 bits.");this.GS=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"skipByteBlocks",{get:function(){return this.HS},set:function(t){if(!Ni(t,4))throw new g("Provided skipByteBlocks does not fit in 4 bits.");this.HS=t},enumerable:!1,configurable:!0}),e.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.cryptByteBlocks,4),t.writer.writeUInt(this.skipByteBlocks,4)},e}(cy));!function(t){function e(e){var i=t.call(this)||this;return i.tencBox=new ly(e),i}Dt(e,t),e.prototype.serializeBoxContent=function(t){this.tencBox.serializeOwnContent(t)},e.prototype.getBoxContentSize=function(){return this.tencBox.getTencHeaderSize()}}(bw);function dy(t){return void 0!==t.iv}function fy(t){return void 0!==t.subsamples}r();!function(t){function e(e){var i=t.call(this,"senc",0,{useSubsampleEncryption:!1})||this;return i.samples=e,i}Dt(e,t),w.defineProperty(e.prototype,"samples",{get:function(){return this.sS},set:function(t){var e;if(!Ni(t.length,32))throw new g("The number of samples provided does not fit in 32 bits.");for(var i=0,s=t;i<s.length;i++){var n=s[i];if(dy(n)&&![8,16].includes(n.iv.length))throw new g("IV of one of the provided samples did not satisfy the required length constraints. [8, 16]");if(void 0===e&&(e=fy(n)),!0===e&&!fy(n)||!1===e&&fy(n))throw new g("Mix of samples with and without subsamples detected.");if(fy(n)){if(!Ni(n.subsamples.length,16))throw new g("Subsample length of one of the provided samples does not fit in 16 bits.");for(var r=0,o=n.subsamples;r<o.length;r++){var h=o[r];if(!Ni(h.clearData,16))throw new g("Subsample clearData of one of the provided samples does not fit in 16 bits.");if(!Ni(h.protectedData,23))throw new g("Subsample protectedData of one of the provided samples does not fit in 23 bits.")}}}this.flags.useSubsampleEncryption=null!=e&&e,this.sS=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){for(var e=0,i=0,s=this.samples;i<s.length;i++){var n=s[i];dy(n)&&(e+=n.iv.length),fy(n)&&(e+=2+6*n.subsamples.length)}return t.prototype.getBoxContentSize.call(this)+4+e},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.samples.length,32);for(var i=0,s=this.samples;i<s.length;i++){var n=s[i];if(dy(n)&&fh(e.writer,n.iv),fy(n)){e.writer.writeUInt(n.subsamples.length,16);for(var r=0,o=n.subsamples;r<o.length;r++){var h=o[r];e.writer.writeUInt(h.clearData,16),e.writer.writeUInt(h.protectedData,32)}}}},e.prototype.serializeFlags=function(t){t.writer.writeUInt(this.flags.useSubsampleEncryption?2:0,24)}}(W);r(),r();!function(t){function e(e,i,s,n,r){var o=t.call(this,"emsg",0,0)||this;return o.schemeIdUri=e,o.value=i,o.data=r,o.id=s,o.timescale=n.timescale,o.presentationTimeDelta=n.presentationTimeDelta,o.eventDuration=n.eventDuration,o}Dt(e,t),w.defineProperty(e.prototype,"timescale",{get:function(){return this.NA},set:function(t){if(!Ni(t,32))throw new g("The provided timescale does not fit in 32 bits.");this.NA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"presentationTimeDelta",{get:function(){return this.ZS},set:function(t){if(!Ni(t,32))throw new g("The provided presentationTimeDelta does not fit in 32 bits.");this.ZS=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"eventDuration",{get:function(){return this.XS},set:function(t){if(!Ni(t,32))throw new g("The provided eventDuration does not fit in 32 bits.");this.XS=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"id",{get:function(){return this.zS},set:function(t){if(!Ni(t,32))throw new g("The provided id does not fit in 32 bits.");this.zS=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.schemeIdUri.length+1+this.value.length+1+16+this.data.length},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeString(this.schemeIdUri),e.writer.writeByte(0),e.writer.writeString(this.value),e.writer.writeByte(0),e.writer.writeUInt(this.timescale,32),e.writer.writeUInt(this.presentationTimeDelta,32),e.writer.writeUInt(this.eventDuration,32),e.writer.writeUInt(this.id,32),e.concat(D.from(this.data))}}(W);r(),r(),r();var _y=function(){function t(){this.boxes=[]}return t.prototype.serialize=function(){for(var t=new pp,e=0,i=this.boxes;e<i.length;e++){var s=i[e];t.concat(s.serialize())}return t.toRangedBuffer()},t}();function vy(t,e){return function(i){var s=function(t,e){for(var i=t.data,s=t.cursor;s.offset<i.byteLength;){var n=Op(i,s);if(!n.complete)return;if(dt(n.box,e))return n.box}}(new Lp(Dp(i),new Mp),t);if(!s)throw new g("".concat(t," box not found"));return e(s)}}var my=vy("moov",Hw),gy=vy("sidx",(function(t){var e,i,s=t.data,n=Fp(s.nextUint32()),r=n.version,o=n.flags,h=s.nextUint32(),a=s.nextUint32();0===r?(e=s.nextUint32(),i=s.nextUint32()):(e=s.nextUint64(),i=s.nextUint64()),s.skip(2);for(var u=s.nextUint16(),c=[],l=0;l<u;l++){var d=new so(D.from(s.nextUint8Array(12))),f=d.readBit(),_=d.readUInt(31),v=d.readUInt(32),m=Boolean(d.readBit()),g=d.readUInt(3),p=d.readUInt(28);c.push({referenceType:f,referencedSize:_,subsegmentDuration:v,startsWithSap:m,sapType:g,sapDeltaTime:p})}return 0===r?new ny(h,a,e,i,c,o.raw):new ry(h,a,e,i,c,o.raw)})),py=vy("moof",$w),wy=vy("pssh",kw);function yy(t){return function(t){for(var e=new _y,i=0,s=ci(t);i<s.length;i++){var n=s[i];dt(n,"ftyp")?e.boxes.push(sw(n)):dt(n,"styp")?e.boxes.push(hy(n)):dt(n,"moov")?e.boxes.push(Hw(n)):dt(n,"moof")?e.boxes.push($w(n)):dt(n,"mdat")?e.boxes.push(fw(n)):e.boxes.push(ai(n))}return e}(new Lp(Dp(t),new Mp))}var by=class extends Co{get qS(){return this.Vd}get YS(){return this.KS.expiration}get pb(){return this.jS}get QS(){return this.KS.sessionId}Ws(){if(this.JS)return this.Vd;const t=[];return t.push(Promise.resolve(this.KS.close())),t.push(ke(1e3)),this.$S.Qw(Promise.race(t).catch(Ay)),this.JS=!0,this.Vd}tT(t,e,i){if(Z.um){const t=wy(na(e));if(1===t.version){e=new Sw(t.systemId,t.data).serialize().join()}}return Promise.resolve(this.KS.generateRequest(t,e)).catch(Ay)}$n(t){return Promise.resolve(this.KS.load(t)).catch(Ay)}eT(){return Promise.resolve(this.KS.remove()).catch(Ay)}ir(t){return Promise.resolve(this.KS.update(t)).catch(Ay)}iT(){this.jS.Fb(),this.KS.keyStatuses.forEach(((t,e)=>{this.sT(e,t)})),this._o(new te(this.jS))}sT(t,e){if("string"==typeof t){const i=t;t=e,e=i}const i=na(t);if(this.nT===cu&&16===i.byteLength&&(Z.Tm||Z.yg)){let t=ra(i),e=t.getUint32(0,!0),s=t.getUint16(4,!0),n=t.getUint16(6,!0);t.setUint32(0,e,!1),t.setUint16(4,s,!1),t.setUint16(6,n,!1)}this.nT===cu&&"status-pending"===e&&(e="usable"),this.jS.Bb(i,e)}constructor(t,e){super(),this.KS=t,this.nT=e,this.JS=!1,this.rT=()=>{this.iT()},this.oT=t=>{this._o(new jh(this,t.messageType,up(this.nT,t.message)))},this.hT=()=>{this.JS=!0,this.jS.Nb>0&&(this.jS.Fb(),this._o(new te(this.jS))),this.KS.removeEventListener("keystatuseschange",this.rT),this.KS.removeEventListener("message",this.oT)},this.KS.addEventListener("keystatuseschange",this.rT),this.KS.addEventListener("message",this.oT),this.jS=new hp;const i=[];this.KS.closed&&i.push(Promise.resolve(this.KS.closed)),this.$S=new os,i.push(this.$S.Ub),this.Vd=Promise.race(i).then(this.hT,this.hT),this.iT()}};function Ay(t){let e;if(t.message){const i=t.message.match(/^SystemCode:0x([0-9a-fA-F]+)$/);i&&(e=0|x(i[1],16))}throw new Js(t.message,void 0,e,t)}var Sy=class{async aT(t){return new by(this.uT.createSession(t),this.cT)}lT(t){return Promise.resolve(this.uT.setServerCertificate(t))}kn(t){return Promise.resolve(t.setMediaKeys(this.uT))}dT(t){return Promise.resolve(t.setMediaKeys(null))}nr(){return Promise.resolve()}constructor(t,e,i){this.uT=t,this.cT=e,this.kd=i}},Ty=class{get cT(){return this.fT.keySystem}async _T(){const t=await this.fT.createMediaKeys();return new Sy(t,this.nT,this.vT)}mT(){return this.vT}constructor(t,e,i){this.fT=t,this.nT=e,this.vT=i}};r(),r();var au={VIDEO_H264:"video/avc",VIDEO_H265:"video/hevc",VIDEO_MP4:"video/mp4",VIDEO_MPEG:"video/mpeg",VIDEO_MPEG2:"video/mpeg2",VIDEO_WEBM:"video/webm",VIDEO_UNKNOWN:"video/x-unknown",AUDIO_AAC:"audio/mp4a-latm",AUDIO_MP4:"audio/mp4",AUDIO_WEBM:"audio/webm",AUDIO_UNKOWN:"audio/x-unknown",IMAGE_JPEG:"image/jpeg",APPLICATION_TTML_XML:"application/ttml+xml",APPLICATION_MP4:"application/mp4",TEXT_VTT:"text/vtt"};function Gh(t){return Ga(t,au.APPLICATION_MP4)||Ga(t,au.VIDEO_MP4)||Ga(t,au.AUDIO_MP4)}function ky(t){return Ga(t,au.VIDEO_WEBM)||Ga(t,au.AUDIO_WEBM)}var Ey=class{gT(t){for(const[e,i]of this.pT)if(e.toLowerCase()===t.toLowerCase())return i}constructor(t,e){this.Tw=t,this.pT=e}};function xy(t){const e=t.trim(),i=e.indexOf(";");if(i<0)return new Ey(e,[]);const s=e.substr(0,i).trim(),n=e.substr(i+1).trim(),r=[];let o=0,h=!1;for(let t=0;t<n.length;t++){const e=n[t];if(h||";"!==e)'"'===e&&(h=!h);else{const e=Ry(n.substr(o,t));e&&r.push(e),o=t+1}}if(o!==n.length){const t=Ry(n.substr(o));t&&r.push(t)}return new Ey(s,r)}function Ry(t){const e=t.indexOf("=");if(e<0)return;const i=t.substr(0,e).trim();let s=t.substr(e+1).trim();return'"'===s[0]&&(s=s.substring(1,s.length-1)),[i,s]}function Iy(t){const e=t.trim(),i=e.indexOf(";");return i<0?e:e.substr(0,i).trim()}function Cy(t){let e=t;const i=e.match(/^avc1\.(\d+)\.(\d+)$/);if(i){const t=Number(i[1]),s=Number(i[2]);e="avc1."+Jh((t<<16|s).toString(16),6,"0")}return e}function Py(t,e,i,s){let n=!1;if(s.persistentState&&"optional"!==s.persistentState)return;if(s.distinctiveIdentifier&&"optional"!==s.distinctiveIdentifier)return;const r={audioCapabilities:[],videoCapabilities:[],persistentState:s.persistentState||"optional",distinctiveIdentifier:s.distinctiveIdentifier||"optional",initDataTypes:s.initDataTypes,sessionTypes:["temporary"],label:s.label,wT:s.wT};let o=!1;if(s.audioCapabilities){const h=s.audioCapabilities.filter((t=>Boolean(t.contentType)));h.length&&(r.audioCapabilities=h.filter((s=>Dy(t,e,i,s))),o=!0,r.audioCapabilities.length&&(n=!0))}if(s.videoCapabilities){const h=s.videoCapabilities.filter((t=>Boolean(t.contentType)));h.length&&(r.videoCapabilities=h.filter((s=>Dy(t,e,i,s))),o=!0,r.videoCapabilities.length&&(n=!0))}return o||(n=t(i,"video/mp4")),n?r:void 0}function Dy(t,e,i,s){if(!s.contentType)return!1;if(s.encryptionScheme&&!ms(e,s.encryptionScheme))return!1;if(s.robustness)return!1;return t(i,Iy(s.contentType))}function Ny(t){if(t.videoCapabilities)for(const e of t.videoCapabilities)if(e.contentType)return e.contentType;if(t.audioCapabilities)for(const e of t.audioCapabilities)if(e.contentType)return e.contentType}function My(t){const e=[];for(const i of t)i.encryptionScheme&&e.push({contentType:i.contentType,robustness:i.robustness});return t.concat(e)}function Ly(t){return!(!t.audioCapabilities||!t.audioCapabilities.some(By))||!(!t.videoCapabilities||!t.videoCapabilities.some(By))}function By(t){return!t.robustness}function Oy(t,e){const i=[];for(const s of t)s.robustness?i.push(s):i.push(ol({},s,{robustness:e}));return i}var Fy=class{async Dw(t,e){e=e.filter((t=>!t.wT));for(const t of e)t.audioCapabilities&&(t.audioCapabilities=My(t.audioCapabilities)),t.videoCapabilities&&(t.videoCapabilities=My(t.videoCapabilities));if(t===um&&e.some(Ly)){const i=e.map((t=>function(t,e){return ol({},t,{videoCapabilities:t.videoCapabilities?Oy(t.videoCapabilities,e):void 0,audioCapabilities:t.audioCapabilities?Oy(t.audioCapabilities,e):void 0})}(t,"SW_SECURE_CRYPTO")));try{const e=await Ll.requestMediaKeySystemAccess(t,i),s=e.getConfiguration();return new Ty(e,t,s)}catch(t){}}const i=await Ll.requestMediaKeySystemAccess(t,e),s=i.getConfiguration();return new Ty(i,t,s)}static yT(){return Nm()}};r(),r(),r(),r();var Vy=class extends Co{get QS(){return this.bT&&this.bT.sessionId||""}get YS(){return NaN}get qS(){return this.AT.Ub}get pb(){return this.ST}async tT(t,e,i){this.TT(),this.kT=new os,this.aT(na(e),i),await this.kT.Ub}aT(t,e){if(!t)throw new b("Expected initData to be defined but was "+t+".");const i=e&&e.playready&&e.playready.ET;let s;return s=e?this.xT.createSession(this.IT,t,i):this.xT.createSession(this.IT,t),s.addEventListener("mskeyclose",this.hT),s.addEventListener("mskeymessage",this.CT),s.addEventListener("mskeyerror",this.Ss),s.addEventListener("mskeyadded",this.PT),this.bT=s,this.DT("status-pending"),s}async $n(t){return this.TT(),!0}async ir(t){if(this.NT=new os,this.TT(),!this.bT)return Promise.resolve();const e=na(t);if(0===e.byteLength)throw new b("Cannot call update with an empty response.");this.bT.update(e),await this.NT.Ub}Ws(){return!this.JS&&this.bT&&(this.JS=!0,this.bT.close()),this.AT.Ub}async eT(){this.TT()}TT(){if(this.JS)throw new b("Already closing or closed.")}DT(t){this.ST.Fb(),this.ST.Bb(br,t),this._o(new te(this.ST))}constructor(t,e){super(),this.xT=t,this.IT=e,this.JS=!1,this.NT=void 0,this.kT=void 0,this.bT=void 0,this.hT=()=>{this.JS=!0,this.AT.Vb(void 0),this.bT&&(this.bT.removeEventListener("mskeyclose",this.hT),this.bT.removeEventListener("mskeymessage",this.CT),this.bT.removeEventListener("mskeyerror",this.Ss),this.bT.removeEventListener("mskeyadded",this.PT))},this.CT=t=>{this.kT&&(this.kT.Vb(void 0),this.kT=void 0),this._o(new jh(this,"license-request",fc(t.message).buffer,t.destinationURL||void 0))},this.Ss=()=>{const t=this.bT&&this.bT.error;if(!t)return;const e=new Js("Unknown CDM error",t.code,t.systemCode);if(this.kT)this.kT.Wb(e),this.kT=void 0;else if(this.NT)this.NT.Wb(e),this.NT=void 0;else switch(e.Gb){case MSMediaKeyError.MS_MEDIA_KEYERR_OUTPUT:case MSMediaKeyError.MS_MEDIA_KEYERR_HARDWARECHANGE:this.DT("output-not-allowed");break;default:this.DT("internal-error")}},this.PT=()=>{this.kT&&(this.DT("usable"),this.kT.Vb(void 0),this.kT=void 0),this.NT&&(this.DT("usable"),this.NT.Vb(void 0),this.NT=void 0)},this.AT=new os,this.ST=new hp}},Wy=class{async aT(t){return new Vy(this.xT,this.IT)}lT(t){return Promise.resolve(!1)}kn(t){const e=()=>{t.msSetMediaKeys(this.xT),t.removeEventListener("loadedmetadata",e)};return t.readyState>=1?t.msSetMediaKeys(this.xT):t.addEventListener("loadedmetadata",e),Promise.resolve()}dT(t){return Promise.resolve()}nr(){return Promise.resolve()}constructor(t,e,i){this.xT=t,this.cT=e,this.kd=i;const s=Ny(i)||"video/mp4";this.IT=Iy(s)}},Uy=class{get cT(){return this.nT}mT(){return this.MT}_T(){const t=new s.MSMediaKeys(this.nT);return Promise.resolve(new Wy(t,this.nT,this.MT))}constructor(t,e){this.nT=t,this.MT=e}},Gy=class{Dw(t,e){try{return Promise.resolve(function(t,e){if(!Hy())throw new b("Unsupported key system "+t);for(let i of e){let e=Py(Zy,hg,t,i);if(e)return new Uy(t,e)}throw new b("Unsupported key system configuration for "+t)}(t,e))}catch(t){return Promise.reject(t)}}static yT(){return Hy()}};function Hy(){return void 0!==s.MSMediaKeys&&"function"==typeof s.MSMediaKeys.isTypeSupported}function Zy(t,e){return s.MSMediaKeys.isTypeSupported(t,e)}r(),r(),r(),r();var Xy=class extends Co{get QS(){return this.LT?this.LT.sessionId:""}get YS(){return NaN}get qS(){return this.AT.Ub}get pb(){return this.ST}tT(t,e,i){const s=i&&i.fairplay&&i.fairplay.BT;if(!s)throw new b("Expected FairPlay contentId to be defined but was "+s+".");const n=function(t,e,i){const s=ar(t),n=2*s.length,r=2*e.length;let o=new ArrayBuffer(4+n+4+r+4+i.byteLength),h=new DataView(o),a=new Ri;return kl(h,a,n,!0),Hg(h,a,s,!0),kl(h,a,r,!0),Hg(h,a,e,!0),kl(h,a,i.byteLength,!0),Cg(h,a,i),new j(o)}(na(e),s,this.OT);return this.LT=this.FT.createSession(this.IT,n),this.LT.addEventListener("webkitkeymessage",this.CT,!1),this.LT.addEventListener("webkitkeyadded",this.PT,!1),this.LT.addEventListener("webkitkeyerror",this.Ss,!1),this.DT("status-pending"),this.VT.Vb(this.LT),this.VT=new os,Promise.resolve()}$n(t){return Promise.resolve(!0)}async ir(t){const e=na(t);if(0===e.byteLength)throw new b("Cannot call update with an empty response.");this.WT=new os;(this.LT||await this.VT.Ub).update(e),await this.WT.Ub}Ws(){var t;const e=this.LT;return e&&(e.removeEventListener("webkitkeymessage",this.CT,!1),e.removeEventListener("webkitkeyadded",this.PT,!1),e.removeEventListener("webkitkeyerror",this.Ss,!1),e.close()),this.VT.jw(),null==(t=this.WT)||t.jw(),this.AT.Vb(void 0),this.AT.Ub}eT(){return Promise.resolve(void 0)}DT(t){this.ST.Fb(),this.ST.Bb(br,t),this._o(new te(this.ST))}constructor(t,e,i){super(),this.FT=t,this.IT=e,this.OT=i,this.AT=new os,this.WT=void 0,this.ST=new hp,this.LT=void 0,this.VT=new os,this.Ss=()=>{const t=this.LT&&this.LT.error;if(!t)return;const e=new Js("Unknown CDM error",t.code,t.systemCode);this.WT?(this.WT.Wb(e),this.WT=void 0):e.Gb===WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT?this.DT("output-not-allowed"):this.DT("internal-error"),this._o(new ug)},this.CT=t=>{this._o(new jh(this,"license-request",fc(t.message).buffer,"this is a test string"===t.destinationURL?void 0:t.destinationURL))},this.PT=()=>{this.WT&&(this.WT.Vb(void 0),this.WT=void 0),this.DT("usable")}}};r();var A=class extends ri{get name(){return"THEOplayerError"}get category(){return Ye.fromCode(this.code)}constructor(t,e,i){super(e,i),this.code=t}};function zy(t,e){return t instanceof A?t:t instanceof g?new A(e,t.message,t):new A(e,String(t))}var qy=class{getInternalMediaKeys(){return this.FT}async aT(t){if(!this.OT)throw new A(Qa.CONTENT_PROTECTION_CERTIFICATE_ERROR,"No valid certificate was provided.");return new Xy(this.FT,this.IT,this.OT)}lT(t){return this.OT=na(t),Promise.resolve(!0)}kn(t){return t.webkitSetMediaKeys(this.FT),Promise.resolve()}dT(t){return t.webkitSetMediaKeys(null),Promise.resolve()}nr(){return Promise.resolve()}constructor(t,e,i){this.FT=t,this.cT=e,this.kd=i,this.OT=void 0;const s=Ny(i)||"video/mp4";this.IT=Iy(s)}},Yy=class{get cT(){return this.nT}mT(){return this.MT}_T(){const t=new s.WebKitMediaKeys(this.nT);return Promise.resolve(new qy(t,this.nT,this.MT))}constructor(t,e){this.nT=t,this.MT=e}},Ky=class{Dw(t,e){try{return Promise.resolve(function(t,e){if(t!==fm)throw new b(t+" is not supported with webkit-prefixed Encrypted Media Extensions.");if(!jy())throw new b("Unsupported key system "+t);for(let i of e){let e=Py(Qy,ag,t,i);if(e)return new Yy(t,e)}throw new b("Unsupported key system configuration for "+t)}(t,e))}catch(t){return Promise.reject(t)}}static yT(){return jy()}};function jy(){return void 0!==s.WebKitMediaKeys&&"function"==typeof s.WebKitMediaKeys.isTypeSupported}function Qy(t,e){return s.WebKitMediaKeys.isTypeSupported(t,e)}r();var Jy=class{async Dw(t,e){for(let i of this.UT)try{return await i.Dw(t,e)}catch(t){}throw new b("Unsupported key system configuration for "+t)}constructor(t){this.UT=t}};r(),r(),r(),r(),r();var Su=class{Qo(t,e){return new Promise((i=>{const s=da.$w([this.GT.Uw,e]),n=()=>{s.Xw()};this.HT.push((()=>{const e=$y(t,s.Uw);return i(e),e.then(n,n)})),this.ZT||(this.ZT=this.XT())}))}jw(){return this.zT(!0)}yn(){return this.qT=void 0,this.zT(!1)}zT(t){const e=this.ZT;return this.GT.jw(),t&&(this.GT=new da),Promise.resolve(e)}constructor(t){this.HT=[],this.ZT=void 0,this.GT=new da,this.XT=()=>{if(0===this.HT.length)return this.qT?$y(this.qT,this.GT.Uw).then(this.YT,this.YT):this.YT();return this.HT.shift()().then(this.XT)},this.YT=()=>{if(0!==this.HT.length)return this.XT();this.ZT=void 0},this.qT=t}};function $y(t,e){return new Promise((i=>i(t(e))))}var tb=new Su,eb=class extends Co{KT(){this.WT&&(this.DT("usable"),this.WT.Vb(void 0),this.WT=void 0)}jT(t){const e=new Js("Unknown CDM error",t.errorCode,t.systemCode);this.WT?(this.WT.Wb(e),this.WT=void 0):this.kT?(this.kT.Wb(e),this.kT=void 0):e.Gb===WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT?this.DT("output-restricted"):1===e.Hb?this.DT("expired"):this.DT("internal-error")}QT(t){0!==t.message.byteLength?(this.kT&&(this.kT.Vb(void 0),this.kT=void 0),this._o(new jh(this,"license-request",up(this.nT,fc(t.message).buffer),t.defaultURL||void 0))):this.kT&&(this.kT.Wb("Empty key message"),this.kT=void 0)}JT(t){this.$T||(this.$T=t,this.ek.Vb(t))}get pb(){return this.nk}get QS(){return this.rk}set QS(t){this.rk=t}get qS(){return this.AT.Ub}get YS(){return NaN}async Ws(){this.throwIfClosed(),this.WT&&(this.WT.Wb(void 0),this.WT=void 0),this.$b=!0,this.AT.Vb(void 0)}async tT(t,e){this.throwIfClosed(),this.kT=new os,this.hk=na(e);(this.$T||await this.ek.Ub).webkitGenerateKeyRequest(this.nT,this.hk),await this.kT.Ub}async $n(t){return this.throwIfClosed(),!1}async eT(){this.throwIfClosed()}async ir(t){if(this.throwIfClosed(),this.WT=new os,Z.Mm||Z.Cm)return tb.Qo((async()=>{await this.doUpdate(t)}));await this.doUpdate(t)}async doUpdate(t){if(void 0===this.WT)return;(this.$T||await this.ek.Ub).webkitAddKey(this.nT,na(t),this.hk,this.QS),await this.WT.Ub,Z.Cm&&await ke(500)}throwIfClosed(){if(this.$b)throw new b("Already closing or closed.")}DT(t){this.nk.Fb(),this.nk.Bb(br,t),this._o(new te(this.nk))}async ck(){const t=this.$T||await this.ek.Ub;if(t.webkitCancelKeyRequest)try{t.webkitCancelKeyRequest(this.nT,this.rk)}catch(t){}finally{await ke(500)}}constructor(t){super(),this.nT=t,this.kT=void 0,this.WT=void 0,this.$b=!1,this.hk=void 0,this.$T=void 0,this.AT=new os,this.rk="",this.ek=new os,this.nk=new hp}},ib=class{kn(t){return this.$T=t,this.$T.addEventListener("webkitkeyadded",this.PT),this.$T.addEventListener("webkitkeyerror",this.lk),this.$T.addEventListener("webkitkeymessage",this.dk),this.fk.forEach(((e,i)=>e.JT(t))),this._k.forEach((e=>e.JT(t))),Promise.resolve()}dT(t){return t.removeEventListener("webkitkeyadded",this.PT),t.removeEventListener("webkitkeyerror",this.lk),t.removeEventListener("webkitkeymessage",this.dk),this.$T=void 0,Promise.resolve()}async nr(){let t=this.fk.entries(),e=t.next();for(;!e.done;)await e.value[1].ck(),e=t.next();this.fk.clear()}async aT(t,e,i){const s=new eb(this.cT);return this.$T&&s.JT(this.$T),this._k.push(s),s}lT(t){return Promise.resolve(!1)}vk(t){if(!t)return;let e=this.fk.get(t);return e||(e=this._k.shift(),e?(e.QS=t,this.fk.set(t,e),e):void 0)}constructor(t,e){this.cT=t,this.kd=e,this.$T=void 0,this.fk=Oh(),this._k=[],this.PT=t=>{const e=this.vk(t.sessionId);e&&e.KT()},this.lk=t=>{const e=this.vk(t.sessionId);e&&e.jT(t)},this.dk=t=>{const e=this.vk(t.sessionId);e&&e.QT(t)}}},sb=class{_T(){return Promise.resolve(new ib(this.cT,this.gk))}mT(){return this.gk}constructor(t,e){this.cT=t,this.gk=e}},nb=class{Dw(t,e){try{return Promise.resolve(function(t,e){if(!nb.yT())throw new b("Unsupported key system "+t);for(let i of e){let e=Py(rb,hg,t,i);if(e)return new sb(t,e)}throw new b("Unsupported key system configuration for "+t)}(t,e))}catch(t){return Promise.reject(t)}}static yT(){return Mm()}};function rb(t,e){const i=Gd();return!(!i||!i.canPlayType||""===i.canPlayType(e,t))}r();var ob,hb=class{Dw(t,e){return t===um||t===cu?Promise.resolve(void 0):Promise.reject(new g("DRM configuration not supported"))}};function ab(){return ob||(ob=function(){const t=[];Ky.yT()&&t.push(new Ky);Fy.yT()&&t.push(new Fy);Gy.yT()&&t.push(new Gy);nb.yT()&&t.push(new nb);Z.Bm&&t.push(new hb);return new Jy(t)}()),ob}r(),r();var ub=class{Fb(t){this.pk.delete(t)}wk(){this.pk.clear()}Lb(t){return this.pk.get(t)}Bb(t,e){this.pk.set(t,e)}constructor(){this.pk=Oh()}},cb=class t{static yk(){return t.Vg||(t.Vg=lb.yT()?new lb:new ub),t.Vg}static Fb(e){t.yk().Fb(e)}static wk(){t.yk().wk()}static Lb(e){return t.yk().Lb(e)}static Bb(e,i){t.yk().Bb(e,i)}};cb.Vg=void 0;var lb=class extends cb{static yT(){const t="foobar";try{return self.sessionStorage.setItem(t,t),self.sessionStorage.removeItem(t),!0}catch(t){return!1}}Fb(t){self.sessionStorage.removeItem(t)}wk(){self.sessionStorage.clear()}Lb(t){var e;return null!=(e=self.sessionStorage.getItem(t))?e:void 0}Bb(t,e){self.sessionStorage.setItem(t,e)}};r(),r();var db=(()=>{const t=self.Blob;if(t)try{new t;return function(t){return(e,i)=>new t(e,i)}(t)}catch(t){}const e=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder;if(e)return function(t){return(e,i)=>{const s=new t;if(e)for(const t of e)s.append(t);return s.getBlob(i&&i.type||"")}}(e)})();function fb(t,e,i){const s=db([e],{type:"application/octet-stream"}),n=URL.createObjectURL(s),r=function(t,e){let i=t;const s=i.indexOf("?");if(s>=0&&(i=i.substr(0,s)),i=i.substr(i.lastIndexOf("/")+1),e){let t=i.indexOf(".");t<0&&(t=i.length),i=i.substr(0,t)+e+i.substr(t)}return i}(t,i),o=h.createElement("a");o.href=n,o.download=r,h.body.appendChild(o),o.click(),h.body.removeChild(o),URL.revokeObjectURL(n)}r();var _b="default";r(),r(),r(),r();var Rr=function(t){return t.bk="arraybuffer",t.Ak="json",t.Sk="stream",t.Tk="text",t}({});r();var ya=class t{append(t,e){let i=t,s=e;i=vb(i),s=mb(s);const n=i.toLowerCase();if(this.P_.hasOwnProperty(n)){const t=this.P_[n],e=t[1];t[1]=e?e+", "+s:s}else this.P_[n]=[i,s]}delete(t){const e=vb(t).toLowerCase();delete this.P_[e]}get(t){const e=vb(t).toLowerCase();return this.P_.hasOwnProperty(e)?this.P_[e][1]:null}has(t){const e=vb(t).toLowerCase();return this.P_.hasOwnProperty(e)}set(t,e){let i=t;i=vb(i);const s=i.toLowerCase();this.P_[s]=[i,mb(e)]}forEach(t,e){for(const i in this.P_)this.P_.hasOwnProperty(i)&&t.call(e,this.P_[i][1],i,this)}asList(){const t=[];for(const e in this.P_)if(this.P_.hasOwnProperty(e)){const[i,s]=this.P_[e];t.push([i,s])}return t}Ek(){const t={};return this.forEach(((e,i)=>{t[i]=e})),t}xk(t){t.forEach(((t,e)=>{this.append(e,t)}))}Rk(t){t.forEach(((t,e)=>{this.set(e,t)}))}constructor(e){this.P_={},e instanceof t?e.asList().forEach((t=>{let[e,i]=t;this.append(e,i)})):Array.isArray(e)?e.forEach((t=>{let[e,i]=t;this.append(e,i)})):e&&w.getOwnPropertyNames(e).forEach((t=>{this.append(t,e[t])}))}};function vb(t){let e=t;if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new b("Invalid character in header field name");return e}function mb(t){let e=t;return"string"!=typeof e&&(e=String(e)),e}r(),r(),r();var Ah=Zl(zl());r();var gb=class extends ri{get name(){return"AggregateError"}constructor(t){super(""+t.join("\n"),t[0]),this.causes=t}},Tu=a,pb=cr(Tu.ReadableStream)&&cr(Tu.WritableStream)&&cr(Tu.TransformStream)&&Sd(Tu.ReadableStream.prototype.pipeThrough)&&!Rf.lp,_h=pb?Tu.ReadableStream:Ah.ReadableStream,_a=(pb?Tu.WritableStream:Ah.WritableStream,pb?Tu.TransformStream:Ah.TransformStream),wb=(pb&&Tu.ByteLengthQueuingStrategy?Tu.ByteLengthQueuingStrategy:Ah.ByteLengthQueuingStrategy,pb&&Tu.CountQueuingStrategy?Tu.CountQueuingStrategy:Ah.CountQueuingStrategy);function yb(t){return function(t){return new _h({start(e){for(const i of t)e.enqueue(i);e.close()}})}([t])}function bb(t){return yb(function(t){return new j(t)}(t))}function He(t,e){return function(t,e){let i=e;const s=t.getReader(),n=new os,r=()=>{o();const t=new Bu;s.cancel(t).catch(Tt),n.Wb(t)},o=()=>{i&&(i.Vw(r),i=void 0)};i&&(i.Fw?r():i.Ww(r));const h=[],a=t=>t.done?(o(),Promise.resolve(h)):(h.push(t.value),Promise.resolve(s.read()).then(a));return Promise.resolve(s.read()).then(a).then((t=>{o(),n.Vb(t)}),(t=>{o(),n.Wb(t)})),n.Ub}(t,e).then((t=>mu(t).buffer))}function Ab(t,e){let i=e;const{readable:s,writable:n}=new _a,r=n.getWriter(),o=()=>{i&&i.jw()};return r.closed.then(o,o),t.then((t=>(i=void 0,r.releaseLock(),t.pipeTo(n).catch(Tt))),(t=>(i=void 0,r.releaseLock(),n.abort(t).catch(Tt)))),s}function Sb(t){const{readable:e,writable:i}=new _a;return t.pipeTo(i,{preventCancel:!0}).catch((e=>{let i;i=$c(e)?e[0]===e[1]||Je(e[0])&&Je(e[1])?e[0]:new gb(e):e,t.cancel(i).catch(Tt)})),e.tee()}function Tb(t){return ar(new j(t))}function kb(t){return Yg(t).buffer}r();var Eb="content-type",xb="text/plain;charset=UTF-8",Cc=class{Ik(t){return this.Ck(t).then(JSON.parse)}Pk(t,e){switch(t){case Rr.bk:return this.Dk(e);case Rr.Ak:return this.Ik(e);case Rr.Sk:return this.Nk();case Rr.Tk:return this.Ck(e);default:throw new b}}};function Rb(t,e,i){if(t instanceof Cc)return t;if(t instanceof _h)return function(t,e){return new Cb({Tw:0,Nk:t,Mk:Ib(e)})}(t,i);const s=Ib(i),n=Promise.resolve(t).then((t=>function(t,e){if(t){if("string"==typeof t)return{Tw:Rr.Tk,Lk:t,Mk:e||xb};if(t instanceof ArrayBuffer||ip(t))return{Tw:Rr.bk,Lk:Ob(t),Mk:e};if(wd(t)||$c(t))return{Tw:Rr.Ak,Lk:t,Mk:e};throw new b("Unsupported BodyInit type")}return{Tw:Rr.Tk,Lk:null,Mk:e}}(t,s)));return new Cb({Tw:1,Ub:n,Bk:e})}function Ib(t){return(t.get(Eb)||"").toLowerCase()}var Cb=class t extends Cc{get Ok(){return this.Fk}get Vk(){return 0===this.Wk.Tw}Uk(){return this.Gk.Ub}Ck(t){return this.Hk(Pb,t)}Ik(t){return this.Hk(Nb,t)}Dk(t){return this.Hk(Lb,t)}Nk(){return this.Zk(function(t){return 0===t.Tw?t.Nk:Ab(t.Ub.then(Bb).then(bb),t.Bk)}(this.Wk))}Hk(t,e){if(this.Fk)return Promise.reject(new b("Already used"));this.Fk=!0;const i=t(this.Wk,e);return this.Gk.Qw(i.then(Tt)),i}Zk(t){if(this.Fk)throw new b("Already used");if(t.locked)throw new b("Body stream is locked");this.Fk=!0;const e=new _a,i=Promise.resolve(t.pipeTo(e.writable));return this.Gk.Qw(i),e.readable}Xk(t){this.Wk=t,1===t.Tw&&t.Ub.catch(Tt)}zk(){if(this.Fk)throw new b("Already used");const e=function(t){if(0===t.Tw){const[e,i]=t.Nk.tee();return[{Tw:t.Tw,Nk:e,Mk:t.Mk},{Tw:t.Tw,Nk:i,Mk:t.Mk}]}{const[e,i]=t.Bk.Jw();return[{Tw:t.Tw,Ub:t.Ub,Bk:e},{Tw:t.Tw,Ub:t.Ub,Bk:i}]}}(this.Wk),i=e[0],s=e[1];return this.Xk(i),new t(s)}constructor(t){super(),this.Fk=!1,this.Gk=new os,this.Gk.Ub.catch(Tt),this.Xk(t)}};function Pb(t,e){return 0===t.Tw?He(t.Nk,e).then(Tb):(e&&t.Bk.Qw(e),js(t.Ub.then(Db),t.Bk))}function Db(t){switch(t.Tw){case Rr.Tk:return Promise.resolve(t.Lk||"");case Rr.bk:return Promise.resolve(t.Lk).then(Tb);case Rr.Ak:return Promise.resolve(t.Lk).then(JSON.stringify)}}function Nb(t,e){return 0===t.Tw?Pb(t,e).then(JSON.parse):(e&&t.Bk.Qw(e),js(t.Ub.then(Mb),t.Bk))}function Mb(t){return t.Tw===Rr.Ak?Promise.resolve(t.Lk):Db(t).then(JSON.parse)}function Lb(t,e){return 0===t.Tw?He(t.Nk,e):(e&&t.Bk.Qw(e),js(t.Ub.then(Bb),t.Bk))}function Bb(t){switch(t.Tw){case Rr.bk:return Promise.resolve(t.Lk);case Rr.Tk:case Rr.Ak:return Db(t).then(kb)}}function Ob(t){return t instanceof ArrayBuffer?t:fc(ua(t)).buffer}var Fb=class extends Cc{get Ok(){return this.qk.Ok}get Vk(){return this.qk.Vk}Uk(){return this.qk.Uk()}Ck(t){return this.qk.Ck(t)}Ik(t){return this.qk.Ik(t)}Dk(t){return this.qk.Dk(t)}Nk(t){return this.qk.Nk(t)}zk(){return this.qk.zk()}constructor(t){super(),this.qk=t}};function ph(t){return t.Yk>=200&&t.Yk<=299||304===t.Yk}var Vb=class t extends Fb{Kk(t){return this.Pk(this.jk,t)}Ib(){return new t({Kk:this.zk(),Qk:this.Qk},this)}constructor(t,e){let i,s,n,r,o;e?(i=e.Jk,s=e.jk,n=e.Yk,r=e.$k,o=e.tE):(i=[],s=Rr.Tk,n=200,r="OK",o=!1);const h=t.Qk,a=new ya(t.Jk||i),u=t.jk||s,c=t.eE||(e&&e.Qk===h?e.eE:h.Xu),l=e?e.qk:null;super(Rb(void 0!==t.Kk?t.Kk:l,t.Bk||new da,a)),this.Jk=a,this.Qk=h,this.eE=c,this.jk=u,this.Yk=void 0!==t.Yk?t.Yk:n,this.$k=void 0!==t.$k?String(t.$k):r,this.tE=t.tE||o}};r();var xe=function(t){return t.DELETE="DELETE",t.GET="GET",t.HEAD="HEAD",t.OPTIONS="OPTIONS",t.POST="POST",t.PUT="PUT",t}({}),Mr=function(t){return t.iE="",t.sE="manifest",t.nE="segment",t.rE="preload-hint",t.oE="content-protection",t}({}),xu=function(t){return t.iE="",t.hE="initialization-segment",t.aE="fairplay-license",t.uE="fairplay-certificate",t.cE="widevine-license",t.lE="widevine-certificate",t.dE="playready-license",t.fE="clearkey-license",t._E="aes128-key",t}({}),qh=function(t){return t.iE="",t.vE="audio",t.mE="video",t.Tk="text",t.gE="image",t}({}),Wb=function(t){return t.pE="same-origin",t.wE="no-cors",t.yE="cors",t.bE="navigate",t}({}),wt=class{constructor(t,e){const i=t.Xu;let s,n,r,o,h,a,u,c,l,d,f,_,v,m,g;var p,w,y;e?(s=e.Lk,n=e.Jk,r=e.AE,o=e.jk,h=e.SE,a=e.TE,u=e.Uw,c=e.Tw,l=e.kE,d=e.EE,f=e.xE,_=e.RE,v=e.CE,m=e.PE,g=e.DE):(s=null,n={},r="GET",o=Rr.Tk,h=0,a=0,c="",l="",d="",f=!1,v=void 0,m=!1,g=void 0),this.Xu=i,this.Lk=t.Lk||s,this.Jk=new ya(t.Jk||n),this.AE=t.AE||r,this.jk=t.jk||o,this.SE=void 0!==t.SE?Number(t.SE)||0:h,this.TE=void 0!==t.TE?Number(t.TE)||0:a,this.Uw=t.Uw||u||(new da).Uw,this.Tw=t.Tw||c,this.kE=t.kE||l,this.EE=t.EE||d,this.xE=void 0!==t.xE?Boolean(t.xE):f,this.RE=t.RE||_,this.CE=null!=(p=t.CE)?p:v,this.PE=null!=(w=t.PE)?w:m,this.DE=null!=(y=t.DE)?y:g}},Ub=class{Qk(t){const e=function(t){return new Vb({Kk:null,Jk:{},Qk:t,eE:t.Xu,jk:t.jk,Yk:0,$k:Ti.Zy})}(new wt(t));return Promise.resolve(e)}NE(t){}yn(){}};var Ch=class t{static get LE(){return t.BE||(t.BE=new t(new Ub)),t.BE}Qk(t){const e=this.OE(t);return this.FE.Qk(e)}NE(t){return this.FE.NE(this.VE(t))}OE(e){let i=new wt(e);if(!this.WE){const e=t.UE(i.Xu);i=new wt({Xu:e},i)}return i}VE(e){let i=e.Xu;return this.WE||(i=t.UE(i)),{Xu:i,Lk:e.Lk}}static UE(t){return Ms.uw&&Cl(t,"http://")?t.replace(":","s:"):t}yn(){this.FE.yn()}constructor(t,e=!0){this.FE=t,this.WE=e}};function Gb(t,e){const i=Ms.Ih(t);return Hb(i,e),i.toString()}function Hb(t,e){for(const i of w.keys(e))t.searchParams.set(i,e[i])}function Ki(t,e){let i=Ms.ew(t);return e&&!Tm(i,"/")&&(i+="/"),i}Ch.BE=void 0,r(),r(),r();var Zb=/cache:(.+)?(?=&|$)/,Xb="http://webcache.googleusercontent.com/search?q=cache:";function zb(t){if(!Cl(t,Xb))return"";const e=Ms.Ih(t).search.match(Zb);return e&&e.length>1?e[1]:""}function qb(t){return Ms.Ih(".",t)}r(),r();var Fc=function(t){return t.GE="HttpOpenError",t.HE="HttpResponseError",t.ZE="HttpTimeoutError",t}({}),Yb=class extends ri{get Qk(){return this.XE}constructor(t,e,i){super(e,i),this.XE=t}};var Kb=class extends Yb{get name(){return Fc.GE}constructor(t,e){super(t,function(t){return"Error while opening "+t+". Invalid URL."}(t.Xu),e)}};r();var Mn=class extends Yb{get name(){return Fc.HE}get zE(){return this.qE}constructor(t,e,i){super(t.Qk,null!=i?i:function(t){return"Error while loading "+t.Qk.Xu+", status code "+t.Yk}(t),e),this.qE=t}};r();var Dc=class extends Yb{get name(){return Fc.ZE}constructor(t,e){super(t,function(t){return"Request for "+t.Xu+" timed out after "+t.SE+" seconds."}(t),e)}};r();var jb=self.fetch,Qb=self.Request,Jb=self.Response,$b=self.Headers,tA=self.ReadableStream,eA=self.AbortSignal,iA=self.AbortController,sA=sl((()=>{try{return Sd(jb)&&cr(Qb)&&cr(Jb)&&cr($b)&&"forEach"in $b.prototype&&qv()}catch(t){return!1}})),nA=["http:","https:"];var rA=sl((()=>{try{return sA()&&cr(eA)&&cr(iA)&&"signal"in Qb.prototype}catch(t){return!1}})),oA=sl((()=>{try{return sA()&&cr(tA)&&"body"in Jb.prototype&&!Z.um}catch(t){return!1}}));function hA(t){return t instanceof Yb}function aA(t){return t instanceof Mn}function uA(t,e){const i=t.Jk.has("content-length")?Number(t.Jk.get("content-length")):void 0;let s;return s=t.Vk?function(t,e,i){return t.pipeThrough(new _a(new cA(e,i)))}(t.Nk(),e,i):async function(t,e,i){await Promise.resolve(),e(0,i);const s=await t,n=s.byteLength;return e(n,null!=i?i:n),s}(t.Dk(),e,i),new Vb({Kk:s,Qk:t.Qk},t)}r(),r();var cA=class{transform(t,e){this.YE+=t.byteLength,this.KE(this.YE,this.jE),e.enqueue(t)}flush(t){var e;this.KE(this.YE,null!=(e=this.jE)?e:this.YE)}constructor(t,e){this.KE=t,this.jE=e,this.YE=0}};var lA=class{async QE(){const t=this.XE;let e,i;t.SE&&(this.JE=u((()=>{this.$E=!0,this.GT.jw()}),t.SE),this.GT.Uw.qw((()=>{v(this.JE)})));try{e=jb(t.Xu,{method:t.AE,headers:t.Jk.Ek(),body:t.Lk,credentials:t.xE?"include":"same-origin",signal:_A(this.GT.Uw),mode:t.CE,keepalive:t.DE})}catch(e){throw new Kb(t,e)}try{i=await e}catch(t){const e=this.tx(t);throw Je(e)&&this.GT.jw(),e}const s=i.url||t.Xu,n=0===i.status&&"file:"===function(t){return Ms.Ih(t).protocol}(s)?200:i.status,r=new dA(this,i,this.GT);let o=new Vb({Kk:r,Qk:t,jk:t.jk,Jk:vA(i.headers),Yk:n,$k:i.statusText,eE:s});if(!ph(o))throw new Mn(o);return t.RE&&(o=uA(o,t.RE)),o}tx(t){return hA(t)?t:Je(t)?this.$E?new Dc(this.XE):new Bu(t.message,t):this.qE?new Mn(this.qE,t):new Kb(this.XE,t)}constructor(t){this.GT=new da,this.qE=void 0,this.JE=0,this.$E=!1,this.XE=t,this.GT.Qw(t.Uw),this.zE=this.QE()}},dA=class t extends Cc{get Ok(){return this.ix.bodyUsed}get Vk(){return Bo(this.ix.body)}Uk(){return this.Gk.Ub}Ck(t){return this.Hk(this.ix.text(),t)}Dk(t){return this.Hk(this.ix.arrayBuffer(),t)}Nk(){const t=this.ix.body;return t?this.Zk(t):Ab(this.Dk().then(bb),this.GT)}zk(){const e=this.ix.clone(),[i,s]=this.GT.Jw();return this.GT=i,new t(this.sx,e,s)}Hk(t,e){e&&this.GT.Qw(e);let i=ou(Promise.resolve(t),this.GT.Uw).catch((t=>{throw this.sx.tx(t)}));return i=js(i,this.GT),this.Gk.Qw(i.then(Tt)),i}Zk(t){return new _h(new mA(t,(t=>this.sx.tx(t)),this.GT,this.Gk),{highWaterMark:0})}constructor(t,e,i){super(),this.Gk=new os,this.sx=t,this.ix=e,this.GT=i,this.Gk.Ub.catch(Tt)}},fA="abort";function _A(t){if(!rA())return;const e=new iA;if(t.Fw)e.abort();else if(!t.Hw){const i=()=>{s(),e.abort()},s=()=>{e.signal.removeEventListener(fA,i),t.Vw(i),t.Yw(s)};e.signal.addEventListener(fA,i),t.Ww(i),t.qw(s)}return e.signal}function vA(t){if(function(t){return V(t)&&"function"==typeof t.forEach}(t)){const e=new ya;return t.forEach(((t,i)=>{Array.isArray(t)&&2===t.length?e.append(t[0],t[1]):e.append(i,t)})),e}return new ya(t)}var mA=class{start(t){this.Od=this.nx.getReader()}async pull(t){let e;try{e=await ou(this.Od.read(),this.GT.Uw)}catch(e){const i=this.ox(e);return this.Gk.Wb(i),this.GT.jw(),this.Od.cancel(i).catch(Tt),void t.error(i)}e.done?(this.Gk.Vb(),this.GT.jw(),t.close()):t.enqueue(e.value)}cancel(t){return this.GT.jw(),this.Gk.Wb(t),this.Od.cancel(t)}constructor(t,e,i,s){this.nx=t,this.ox=e,this.GT=i,this.Gk=s}};r();var gA=class{get zE(){return this.hx.Ub}QE(){const t=this.ux,e=this.XE;if(e.Uw.Fw)return this.lx();t.onreadystatechange=()=>this._x(),t.onprogress=t=>this.KE(t),t.onload=()=>this.vx(),t.onloadend=()=>this.mx(),t.onerror=()=>this.gx(),t.ontimeout=()=>this.wx(),t.onabort=()=>this.lx(),t.open(e.AE,e.Xu,!0),t.withCredentials=Boolean(e.xE),"responseType"in t&&e.jk&&(e.jk===Rr.Tk?t.responseType="text":t.responseType="arraybuffer"),e.Jk.forEach(((e,i)=>{t.setRequestHeader(i,e)})),e.SE&&(t.timeout=e.SE),this.GT.Uw.Ww(this.yx);const i=e.Lk;i?t.send(i):t.send()}_x(){const t=this.ux;void 0!==t&&t.readyState>=2&&!this.bx&&(this.bx=!0,this.Ax())}Ax(){var t;const e=this.ux,i=function(t){const e=new ya,i=t.replace(/\r?\n[\t ]+/g," ");return i.split(/\r?\n/).forEach((t=>{const i=t.split(":"),s=i.shift().trim();if(s){const t=i.join(":").trim();e.append(s,t)}})),e}(e.getAllResponseHeaders()||""),s=this.XE;var n;this.Sx=new os,this.qE=new Vb({Qk:s,jk:s.jk,Kk:this.Sx.Ub,Yk:e.status,$k:e.statusText,Jk:i,eE:null!=(n=e.responseURL)?n:i.get("X-Request-URL")}),null==(t=this.hx)||t.Vb(this.qE)}vx(){var t;const e=this.ux;if(void 0===e)return;let i=e.response;if(!Bo(i)){const t=this.XE.jk;i=t===Rr.Tk?e.responseText:t===Rr.bk?new ArrayBuffer(0):{}}null==(t=this.Sx)||t.Vb(i)}mx(){this.yn()}KE(t){void 0!==this.ux&&(null==this.XE.RE||this.XE.RE.call(this.XE,t.loaded,t.lengthComputable?t.total:void 0))}gx(){const t=new g("Network request failed");this.qE?this.Ss(new Mn(this.qE,t)):this.Ss(new Kb(this.XE,t))}wx(){this.Ss(new Dc(this.XE))}lx(){this.Ss(new Bu),this.yn()}Ss(t){var e,i;null==(e=null!=(i=this.Sx)?i:this.hx)||e.Wb(t)}yn(){this.ux=void 0,this.qE=void 0,this.hx=void 0,this.Sx=void 0,this.GT.Xw()}constructor(t){this.GT=new da,this.qE=void 0,this.hx=new os,this.bx=!1,this.yx=()=>{var t;this.lx(),null==(t=this.ux)||t.abort()},this.XE=t,this.GT.Qw(t.Uw),this.ux=new Ol,this.QE()}};function pA(t,e,i){return new Promise(((s,n)=>{if(i&&i.Fw)return n(new Bu);const r=t=>{h(),s(t)},o=()=>{h(),n(new Bu)},h=()=>{t.removeEventListener(e,r),i&&i.Vw(o)};t.addEventListener(e,r),i&&i.Ww(o)}))}r();var wA=class{Qk(t){return function(t){if(!sA()||!function(t){try{return nA.indexOf(new self.URL(t,self.location.href).protocol)>=0}catch(t){return!1}}(t.Xu))return!1;if(!oA()&&t.RE)return!1;if(!t.PE&&t.AE!==xe.POST){if(Z.Mm&&Z.ym<=68)return!1;if(Z.Cm)return!1}return!0}(t)?new lA(t).zE:new gA(t).zE}NE(t){const e=s.navigator;if(e&&e.sendBeacon)e.sendBeacon(t.Xu,db([t.Lk],{type:t.Mk}));else{const e=t.Mk?{"Content-type":t.Mk}:void 0;this.Qk(new wt({AE:xe.POST,Xu:t.Xu,Lk:t.Lk,Jk:e,CE:Wb.wE})).then((t=>{ah(t.Dk())}),Tt)}}yn(){}};r(),r();var iu=function(t){return t[t.Tx=1]="Tx",t[t.kx=2]="kx",t[t.Tk=3]="Tk",t[t.Ex=4]="Ex",t[t.xx=9]="xx",t}({});function Uh(t){return 1===t.Rx}function yA(t){return 3===t.Rx}r();var bA=class extends ri{constructor(t){super("Invalid XML",t)}},AA=class{Ix(t){const e=new DOMParser;let i;try{i=e.parseFromString(t,"text/xml")}catch(t){throw new bA(t)}if(!i||i.getElementsByTagName("parsererror").length>0)throw new bA;return new IA(i)}},SA=class t{get Rx(){return iu.kx}get Cx(){var t;return null!=(t=this.Px.localName)?t:DA(this.Px.nodeName)}get l(){return this.Px.nodeName}get Dx(){var t;return null!=(t=this.Px.namespaceURI)?t:void 0}get Nx(){var t;return null!=(t=this.Px.prefix)?t:void 0}get Mx(){return this.Px.nodeValue}Lx(t){return this.Px.isEqualNode(t.Px)}Bx(e){return new t(this.Px.cloneNode(e))}constructor(t){this.Px=t}},TA=class{get Ox(){return void 0===this.Fx&&(this.Fx=function(t){const e=[];for(let i=0;i<t.length;i++){const s=PA(t.item(i));s&&e.push(s)}return e}(this.Vx.childNodes)),this.Fx}get m(){return this.Ox.filter(CA)}Wx(t){return this.Ox.filter((e=>CA(e)&&e.Ux===t))}Gx(t,e){return this.Ox.filter((i=>CA(i)&&i.Cx===e&&i.Dx===t))}get Hx(){return this.Vx}Zx(t){this.Vx.appendChild(t.Hx),this.Fx&&this.Fx.push(t)}Lx(t){return this.Vx.isEqualNode(t.Hx)}constructor(t){this.Fx=void 0,this.Vx=t}},kA=class t extends TA{get Rx(){return iu.Tx}get Cx(){var t;return null!=(t=this.Vx.localName)?t:DA(this.Vx.nodeName)}get Dx(){var t;return null!=(t=this.Vx.namespaceURI)?t:void 0}get Nx(){var t;return null!=(t=this.Vx.prefix)?t:void 0}get Ux(){return this.Vx.nodeName}get Xx(){return function(t){const e=[];for(let i=0;i<t.length;i++)e.push(new SA(t.item(i)));return e}(this.Vx.attributes)}get zx(){return this.Vx.textContent}qx(t){if(this.Vx.hasAttribute(t))return this.Vx.getAttribute(t)}Yx(t,e){if(this.Vx.hasAttributeNS(t,e))return this.Vx.getAttributeNS(t,e)}Kx(t){this.Vx.removeAttribute(t)}jx(t,e){this.Vx.removeAttributeNS(t,e)}Qx(t,e){this.Vx.setAttribute(t,e)}Jx(t,e,i){this.Vx.setAttributeNS(t,e,i)}Bx(e){return new t(this.Vx.cloneNode(e))}constructor(t){super(t)}},EA=class{get Kk(){return this.Vx.nodeValue}get Hx(){return this.Vx}Lx(t){return this.Kk===t.Kk}constructor(t){this.Vx=t}},xA=class t extends EA{get Rx(){return iu.Tk}Bx(e){return new t(this.Vx.cloneNode(e))}constructor(t){super(t)}},RA=class t extends EA{get Rx(){return iu.Ex}Bx(e){return new t(this.Vx.cloneNode(e))}constructor(t){super(t)}},IA=class t extends TA{get Rx(){return iu.xx}get $x(){return new kA(this.Vx.documentElement)}Bx(e){return new t(this.Vx.cloneNode(e))}constructor(t){super(t)}};function CA(t){return Uh(t)}function PA(t){switch(t.nodeType){case iu.Tx:return new kA(t);case iu.Tk:return new xA(t);case iu.Ex:return new RA(t)}}function DA(t){const e=t.indexOf(":");return e<0?t:t.substr(e+1)}!function(t){Ms=t}(new class extends Xv{get Xp(){return this.tR||(this.tR=new Lm(ab())),this.tR}get eR(){return this.iR}get sR(){return this.nR}get rR(){return this.oR}get hR(){return!1}get aR(){return cb.yk()}get uR(){return{cR:fb}}get lR(){return Ll.connection&&Ll.connection.effectiveType||_b}get dR(){return Ll.connection&&Ll.connection.type||"unknown"}get fR(){return this._R||(this._R=new Ch(new wA)),this._R}Ix(t){return this.vR.Ix(t)}constructor(...t){super(...t),this.tR=void 0,this.iR=oA(),this.nR=Z.wg||Z.um,this.oR=(Z.wg||Z.Mm&&Z.ym<=68||Z.um)&&!(Z.Cm&&Z.Dm<3),this._R=void 0,this.vR=new AA}}),r(),r(),r(),r(),r(),r();var NA=class extends sn{},al=class extends sn{get ht(){return this.mR()}mR(){return this.gR.ht}pR(){return this.gR.pR()}get wR(){return this.yR()}yR(){return this.gR.wR}get bR(){return this.AR()}set bR(t){this.SR(t)}AR(){return this.gR.bR}SR(t){this.gR.bR=t}get bt(){return this.kR()}kR(){return this.gR.bt}get ER(){return this.xR()}set ER(t){this.RR(t)}xR(){return this.gR.ER}RR(t,e){this.gR.RR(t,e)}get ct(){return this.jd()}jd(){return this.gR.ct}get we(){return this.IR()}IR(){return this.gR.we}get PR(){return this.DR()}DR(){return this.gR.PR}get lt(){return this.NR()}get MR(){return this.LR()}NR(){return this.gR.lt}LR(){return this.gR.MR}get OR(){return this.FR()}FR(){return this.gR.OR}get WR(){return this.UR()}UR(){return this.gR.WR}get GR(){return this.HR()}HR(){return this.gR.GR}get ZR(){return this.XR()}set ZR(t){this.zR(t)}XR(){return this.gR.ZR}zR(t){this.gR.ZR=t}get qR(){return this.YR()}YR(){return this.gR.qR}get KR(){return this.jR()}jR(){return this.gR.KR}get QR(){return this.JR()}set QR(t){this.$R(t)}JR(){return this.gR.QR}$R(t){this.gR.QR=t}get tI(){return this.eI()}eI(){return this.gR.tI}get iI(){return this.sI()}set iI(t){this.nI(t)}sI(){return this.gR.iI}nI(t){this.gR.iI=t}get rI(){return this.oI()}oI(){return this.gR.rI}get hI(){return this.aI()}aI(){return this.gR.hI}get uI(){return this.cI()}cI(){return this.gR.uI}iu(){return this.gR.iu()}Ca(t,e){return this.gR.Ca(t,e)}get nt(){return this.lI()}lI(){return this.gR.nt}get dI(){return this.fI()}fI(){return this.gR.dI}get rt(){return this._I()}_I(){return this.gR.rt}get vI(){return this.mI()}mI(){return this.gR.vI}get gI(){return this.pI()}set gI(t){this.wI(t)}get yI(){return this.bI()}bI(){return this.gR.yI}pI(){return this.gR.gI}wI(t){this.gR.gI=t}get AI(){return this.gR.AI}set AI(t){this.gR.AI=t}SI(){return this.gR.SI()}ja(){return this.gR.ja()}TI(){return this.gR.TI()}pr(t){this.gR.pr(t)}dr(){this.gR.dr()}be(){this.gR.be()}kI(){this.gR.kI()}EI(){this.gR.EI()}xI(){this.gR.xI()}ge(){this.gR.ge()}RI(){return this.gR.RI()}II(){return this.gR.II()}CI(){this.gR.CI()}DI(){this.gR.DI()}nr(){return this.gR.nr()}NI(){this.gR.NI()}MI(){this.gR.MI()}LI(t){return this.gR.LI(t)}BI(t){return!1}async yn(){this.Ro(),await this.gR.yn()}OI(t){return this.gR.OI(t)}constructor(t){super(),this.FI=t=>{this.BI(t)||this._o(t)},this.gR=t,t.oy(this.FI)}};r(),r(),r();var Se=function(t){return t.VI="WI",t.UI="GI",t}({});r(),r(),r(),r();var Ds=class extends pe{get wa(){return this.eu||(this.eu=this.ka()),this.eu}constructor(t,e){super(t,e),this.eu=void 0}};function MA(t){return Boolean(t&&t.wa)}var en=class extends Ds{constructor(t){super(t)}},Un=class extends pe{constructor(t){super(t)}},LA=class extends en{ka(){return new BA(this.Ht.wa)}constructor(t){super(Se.VI),this.Ht=t}},BA=class extends Un{constructor(t){super("addtrack"),this.track=t}};r();var OA=class extends en{ka(){return new FA(this.Ht.wa)}constructor(t){super(Se.UI),this.Ht=t}},FA=class extends Un{constructor(t){super("removetrack"),this.track=t}};r();var No=function(t){return t.HI="ZI",t.XI="zI",t.qI="YI",t.KI="jI",t.QI="JI",t.$I="tC",t.da="eC",t.iC="sC",t.nC="rC",t.oC="ir",t.hC="aC",t.uC="cC",t.QUALITY_UNAVAILABLE="qualityunavailable",t.NO_QUALITY="noquality",t}({}),to=class extends Co{get lC(){return this.dC}get wa(){return this.eu||(this.eu=this.ka()),this.eu}get V(){return this.dC.length}fC(t){return this.dC[t]}tt(t){return!(!t||ms(this.dC,t))&&(this.dC.push(t),this.eu&&this.eu.push(t.wa),t.bn(No.da,this.Ds),this._o(new LA(t)),!0)}it(t){if(!t)return!1;const e=this.dC.indexOf(t);return!(e<0)&&(uu(this.dC,e),this.eu&&uu(this.eu,e),t.vn(No.da,this.Ds),this._o(new OA(t)),!0)}_C(t){return ms(this.dC,t)}nr(){const t=this.dC;for(let e=t.length-1;e>=0;e-=1)this.it(t[e])}yn(){this.nr(),this.Ro()}constructor(){super(),this.dC=[],this.eu=void 0}};r();var bc=class extends en{ka(){return new VA(this.Ht.wa)}constructor(t){super(No.da),this.Ht=t}},VA=class extends Un{constructor(t){super("change"),this.track=t}},WA=class extends to{get vC(){return this.mC}set vC(t){const e=this.mC;if(t!==e){if(e){this.gC(e);for(const i of e.lC)t&&t._C(i)||this.it(i)}if(this.mC=t,t){const e=[];for(const i of t.lC)this.tt(i),this.pC(i)&&e.push(i);this.wC(t);for(const t of e)t._o(new bc(t))}}}wC(t){t.bn(Se.VI,this.yC),t.bn(Se.UI,this.bC)}gC(t){t.vn(Se.VI,this.yC),t.vn(Se.UI,this.bC)}yn(t){!t&&this.mC&&this.mC.yn(),super.yn()}constructor(){super(),this.mC=void 0,this.yC=t=>{const e=t.Ht;this.tt(e)},this.bC=t=>{const e=t.Ht;this.it(e)}}};r(),r(),r();var UA=w.freeze||Fd;function GA(t,e,i){w.defineProperty(t,e,{writable:!1,enumerable:!0,value:i})}function HA(t){return UA(t)}function Jr(t,e){for(const i of w.getOwnPropertyNames(e))w.defineProperty(t,i,w.getOwnPropertyDescriptor(e,i));return t}function tu(t){if(wd(t)){const e={};for(const i in t)Sa.call(t,i)&&(e[i]=tu(t[i]));return e}if($c(t)){const e=new Array(t.length);for(let i=0;i<e.length;i++)i in t&&(e[i]=tu(t[i]));return e}return t}function Ai(t,e){return t===e||!(!t||!e)&&(!(!V(t)||!V(e))&&(nc(t)?!!nc(e)&&function(t,e){const i=t.length,s=e.length;if(i!==s)return!1;for(let s=0;s<i;s+=1)if(!Ai(t[s],e[s]))return!1;return!0}(t,e):!nc(e)&&function(t,e){const i=w.keys(t),s=w.keys(e);if(!i||!s||i.length!==s.length)return!1;for(const s of i)if(!Sa.call(e,s)||!Ai(t[s],e[s]))return!1;return!0}(t,e)))}function ZA(t,e){if(!V(t))return!1;for(const i of e)if(!(i in t))return!1;return!0}function XA(t,e){return t.constructor===e.constructor}function zA(t){const e={};for(const i of w.keys(t)){const s=t[i];null!=s&&(e[i]=s)}return e}function qA(t){const e={};for(const i of w.keys(t)){const s=t[i];if(nc(s)){const t=[];for(let e=0;e<s.length;e+=1){const i=s[e];if(null!=i){const e=V(i)?qA(i):i;t.push(e)}}e[i]=t}else null!=s&&(e[i]=V(s)?qA(s):s)}return e}function Fu(t){let e=t;if("string"==typeof e){if(e=e.toLowerCase(),"true"===e)return!0;if("false"===e)return!1}return Boolean(e)}function vi(t){return Bo(t)?Fu(t):void 0}function eo(t){return"string"==typeof t?""===t?NaN:Number(t):"boolean"==typeof t||null==t||t instanceof Date||"number"!=typeof Number(t)&&!t?NaN:Number(t)}function YA(t){const e=eo(t);if(S(e))throw new g("Expected a valid number.");return e}function hs(t){return"string"==typeof t?t:""}function KA(t,e){if(!nc(t))return[];const i=0|t.length,s=new Array(i);for(let n=0;n<i;n++)s[n]=e(t[n]);return s}function Hu(t,e){let i;return i=nc(t)?KA(t,e):e(t),i}r();var jA=[Se.VI,Se.UI,No.da];function QA(t){let e;const i=t.lC.map((t=>t.wa));return i.item=e=>{const i=0|e,s=t.fC(i);return s&&s.wa||void 0},i.addEventListener=(t,i)=>{e.bn(t,i)},i.removeEventListener=(t,i)=>{e.vn(t,i)},e=new og(i),t.bn(jA,(t=>e._o(t.wa))),i}r();var ln=function(t){return t[t.AC=0]="AC",t[t.SC=1]="SC",t[t.TC=2]="TC",t[t.kC=3]="kC",t[t.EC=4]="EC",t[t.TRANSCRIBES_SPOKEN_DIALOG=5]="TRANSCRIBES_SPOKEN_DIALOG",t[t.DESCRIBES_MUSIC_AND_SOUND=6]="DESCRIBES_MUSIC_AND_SOUND",t[t.xC=7]="xC",t}({});function JA(t){switch(t){case 0:return"caption";case 2:return"sign";case 1:return"description";case 3:return"enhanced audio intelligibility";case 4:return"easy reader";case 5:return"transcribes spoken dialog";case 6:return"describes music and sound";case 7:return"describes video"}}function $A(){}function yi(t){const e=[No.oC,No.da,No.hC,No.uC,No.QUALITY_UNAVAILABLE];let i;const s={get activeQuality(){return t.RC&&t.RC.wa},get enabled(){return t.Rt},set enabled(e){t.Rt=Fu(e)},get id(){return t.o},get uid(){return t.IC},get kind(){return t.Lt},get label(){return t.Ch},set label(e){t.Ch=hs(e)},get accessibility(){var e,i;return null!=(i=null==(e=t.DC)?void 0:e.map(JA))?i:[]},get language(){return t.gs},get qualities(){return t.NC.wa},set targetQuality(e){let i;i=e?function(t,e){const i=[];for(const s of t.NC.lC)for(const t of e)s.wa===t&&i.push(s);return i}(t,$c(e)?e:[e]):[],i.length>0?t.MC=i:t.MC=void 0},get targetQuality(){if(t.MC)return 1===t.MC.length?t.MC[0].wa:t.MC.map((t=>t.wa))},addEventListener(t,e){const s=Hu(t,hs);i.bn(s,e)},removeEventListener(t,e){const s=Hu(t,hs);i.vn(s,e)}};return i=new og(s),t.bn(e,(t=>i._o(t.wa))),w.defineProperty(s,"constructor",{value:$A}),s}function tS(){}function eS(t){const e=QA(t);return w.defineProperty(e,"constructor",{value:tS}),e}var qo=class extends WA{ka(){return eS(this)}pC(t){return t.Rt}};r(),r(),r();var bh=function(t){return t.Mh="disabled",t.LC="hidden",t.Qn="showing",t}({});function qa(t){if("string"==typeof t){const e=t.toLowerCase();switch(e){case"disabled":case"hidden":case"showing":return e}}else if("number"==typeof t)switch(t){case 0:return"disabled";case 1:return"hidden";case 2:return"showing"}return"disabled"}r();var yo=function(t){return t.fa="error",t}({});function iS(){}function Qh(t){const e=[No.da,No.oC,No.HI,No.XI,No.KI,No.QI,No.qI,No.$I,No.iC,No.nC],i=[yo.fa];let s;const n={get kind(){return t.Lt},get label(){return t.Ch},set label(e){t.Ch=hs(e)},get language(){return t.gs},get id(){return t.o},get uid(){return t.IC},get inBandMetadataTrackDispatchType(){return t.BC},get mode(){return t.CE},set mode(e){e!==bh.Qn&&e!==bh.LC&&e!==bh.Mh||t.OC(e)},get forced(){return Boolean(t.FC)},get accessibility(){var e,i;return null!=(i=null==(e=t.DC)?void 0:e.map(JA))?i:[]},get type(){return t.Tw},get readyState(){return t.rI},get cues(){return t.CE===bh.Mh?null:t.L.wa},get activeCues(){return t.CE===bh.Mh?null:t.q.wa},get src(){return t.VC||""},addEventListener(t,e){const i=Hu(t,hs);s.bn(i,e)},removeEventListener(t,e){const i=Hu(t,hs);s.vn(i,e)}};return s=new og(t),t.bn(e,(t=>s._o(t.wa))),t.bn(i,(t=>s._o(t))),w.defineProperty(n,"constructor",{value:iS}),n}function sS(){}function nS(t){const e=QA(t);return w.defineProperty(e,"constructor",{value:sS}),e}var at=class extends WA{ka(){return nS(this)}pC(t){return t.CE===bh.Qn}};r(),r();var rS=class extends Co{get WC(){}get GC(){return!1}get HC(){}get wa(){var t;return null!=(t=this.eu)?t:this.eu=oS(this)}ZC(){}};function oS(t){return{goLive:()=>t.ZC(),get isLive(){return t.GC},get latencies(){return t.WC},get manifest(){return t.HC},addEventListener(e,i){t.bn(aS(e),i)},removeEventListener(e,i){t.vn(aS(e),i)}}}var hS=["golive","latencyrecoveryseek"];function aS(t){const e=Hu(t,hs);return(Yt(e)?[e]:e).filter((t=>ms(hS,t)))}var Xc=class extends Co{set vC(t){const e=this.mC;t!==e&&(e&&this.gC(e),t&&this.wC(t),this.mC=t)}get vC(){return this.mC}get wa(){return this.eu||(this.eu=oS(this)),this.eu}wC(t){t.bn(hS,this.Ds)}gC(t){t.vn(hS,this.Ds)}ZC(){var t;null==(t=this.mC)||t.ZC()}get WC(){var t;return null==(t=this.mC)?void 0:t.WC}get GC(){return!!this.mC&&this.mC.GC}get HC(){var t;return null==(t=this.mC)?void 0:t.HC}yn(){this.Ro(),this.mC&&this.gC(this.mC),this.mC=void 0}constructor(){super(),this.mC=void 0,this.eu=void 0,this.mC=void 0}};r(),r();var uS="8E80B9CE",cS=function(t){return t.AUTO="auto",t.MANUAL="manual",t.DISABLED="disabled",t}({});function lS(t){return{appID:t&&t.appID?hs(t.appID):uS}}r(),r();var Ih=function(t){return t.wE="",t.XC="anonymous",t.zC="use-credentials",t}({}),Bc=function(t){return t.qC="application/dash+xml",t.YC="application/vnd.apple.mpegurl",t.KC="application/x-mpegurl",t.jC="video/mp4",t.QC="application/vnd.theoplayer.hesp+json",t.JC="application/vnd.theo.hesp+json",t.$C="millicast",t.tP="theolive",t}({});function dS(t){if(null!==t)return t}function fS(t){const e={apiKey:t.apiKey,integration:t.integration,streamActivityMonitorID:dS(t.streamActivityMonitorID),adTagParameters:V(t.adTagParameters)?t.adTagParameters:{},authToken:dS(t.authToken),omidAccessModeRules:dS(t.omidAccessModeRules)};if(t.enableNonce&&(e.enableNonce=!0),"vod"===(null==t?void 0:t.availabilityType)||function(t){const e=t;return Boolean(e.videoID&&e.contentSourceID)}(t)){const i=t.videoID,s=t.contentSourceID;return i?s?ol({},e,{availabilityType:"vod",videoID:i,contentSourceID:s}):void Ms.Vp("A VOD DAI configuration was provided without valid contentSourceID which is required."):void Ms.Vp("A VOD DAI configuration was provided without valid videoID which is required.")}if("live"===(null==t?void 0:t.availabilityType)||function(t){const e=t;return Boolean(e.assetKey)}(t)){const i=t.assetKey;return i?ol({},e,{availabilityType:"live",assetKey:i}):void Ms.Vp("A Live DAI configuration was provided without valid assetKey which is required.")}Ms.Vp("A DAI configuration was provided without a valid availabilityType which is required.")}function _S(t){return"google-dai"===t.integration?fS(t):ol({},t,{integration:String(t.integration)})}r(),r(),r(),r(),r(),r();var dc,go="titanium",vS="conax",mS="ezdrm",gS="irdeto",pS="vudrm",wS="verimatrix",Th="keyos",yS="drmtoday",bS="expressplay",AS="azure",SS="xstream",TS="vimond",kS="axinom",ES="uplynk",xS="comcast",RS="custom";function IS(t,e){if(null==t)return{};var i,s,n={},r=w.keys(t);for(s=0;s<r.length;s++)i=r[s],e.indexOf(i)>=0||(n[i]=t[i]);return n}function CS(t){return Bo(t.token&&t.deviceId)}function PS(t){var e;const i=null==(e=t.fairplay)?void 0:e.headers;return void 0!==i&&Bo(i.PreAuthorization)}function DS(t){const e=t;return CS(e)&&""!==e.token&&""!==e.deviceId&&!PS(e)}r(),r(),r(),r(),r(),function(t){t.eP=!1,t.iP=!1,t.sP=!1,t.nP=!1,t.LOG_ADS_DETAILS=!1,t.LOG_CHROMECAST_DETAILS=!1,t.LOG_CUSTOM_DRM=!1,t.LOG_BUFFERING_VIDEO_MAIN=!1,t.LOG_BUFFERING_VIDEO_SELECTION=!1,t.LOG_BUFFERING_AUDIO_MAIN=!1,t.LOG_BUFFERING_AUDIO_SELECTION=!1,t.rP=!1,t.oP=!1,t.LOG_LCEVC_DETAILS=!1}(dc||(dc={})),r();var sr=class extends A{get name(){return"ContentProtectionError"}constructor(t,e,i,s,n,r,o,h){super(t,e,i),this.url=s,this.status=n,this.statusText=r,this.response=o,this.systemCode=h}};r();var NS=class{get hP(){return this.aP}get cT(){return this.nT}uP(t){return function(t){const e=t.onCertificateRequest;if(void 0!==e&&"function"!=typeof e)throw new b("ContentProtectionIntegration.onCertificateRequest is not a function.");const i=t.onCertificateResponse;if(void 0!==i&&"function"!=typeof i)throw new b("ContentProtectionIntegration.onCertificateResponse is not a function.");const s=t.onLicenseRequest;if(void 0!==s&&"function"!=typeof s)throw new b("ContentProtectionIntegration.onLicenseRequest is not a function.");const n=t.onLicenseResponse;if(void 0!==n&&"function"!=typeof n)throw new b("ContentProtectionIntegration.onLicenseResponse is not a function.");const r=t.extractFairplayContentId;if(void 0!==r&&"function"!=typeof r)throw new b("ContentProtectionIntegration.extractFairplayContentId is not a function.");return t}(this.cP.build(t))}constructor(t,e,i){this.aP=t,this.nT=e,this.cP=i}};r();var MS=function(t){return t.FAILED="FAILED",t.OVERRIDDEN="OVERRIDDEN",t.SUCCEEDED="SUCCEEDED",t}({}),LS=class{registerContentProtectionIntegration(t,e,i){switch(this.lP(t,e,i)){case MS.FAILED:throw new sr(Qa.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The keySystem should be 'widevine', 'playready' or 'fairplay', but was "+e+".");case MS.OVERRIDDEN:{const i=rT(e);Ms.Vp("Warning: Overwriting an earlier registered integration for "+t+" and "+i+".");break}case MS.SUCCEEDED:rT(e);0;break}}lP(t,e,i){const s=rT(e);if(!s)return MS.FAILED;let n=MS.SUCCEEDED;for(const e of this.dP.slice())e.hP===t&&e.cT===s&&(n=MS.OVERRIDDEN,we(this.dP,e));return this.dP.push(new NS(t,s,i)),n}fP(t,e){return void 0!==this._P(t,e)}vP(t,e,i){const s=this._P(t,e);if(!s)throw g("No ContentProtectionIntegrationInit was found for integration id "+t+" and key system "+e);return s.uP(i)}_P(t,e){for(const i of this.dP)if(i.hP===t&&(!e||i.cT===e))return i}constructor(){this.dP=[]}};LS.mP=new LS,r(),r();var _t=function(t){return t.gP="moov",t.pP="mvhd",t.wP="trak",t.yP="tkhd",t.bP="mdia",t.AP="mdhd",t.SP="hdlr",t.TP="minf",t.kP="stbl",t.EP="stsd",t.xP="stsc",t.RP="mvex",t.IP="trex",t.CP="avc1",t.PP="avcC",t.DP="hev1",t.NP="hvc1",t.MP="hvcC",t.LP="vp09",t.BP="vpcC",t.OP="av01",t.FP="av1C",t.VP="dvcC",t.WP="dvvC",t.UP="dvwC",t.GP="dec3",t.HP="dvav",t.ZP="dva1",t.zP="dvhe",t.qP="dvh1",t.YP="ec-3",t.KP="colr",t.jP="pasp",t.QP="mp4a",t.JP="esds",t.$P="fLaC",t.tD="dfLa",t.eD="wvtt",t.iD="vttC",t.sD="vlab",t.nD="enca",t.rD="encv",t.oD="moof",t.hD="mfhd",t.aD="traf",t.uD="tfhd",t.cD="trun",t.lD="tfdt",t.dD="senc",t.fD="mdat",t._D="pssh",t.vD="emsg",t.mD="sidx",t.gD="styp",t.pD="ftyp",t.wD="sinf",t.yD="frma",t}({}),BS=function(t){return t.ON_SCREEN_COLOURS="nclx",t.RESTRICTED_ICC_PROFILE="rICC",t.UNRESTRICED_ICC_PROFILE="prof",t}({}),Zh=function(t){return t[t.BASE_DATA_OFFSET_PRESENT=1]="BASE_DATA_OFFSET_PRESENT",t[t.SAMPLE_DESCRIPTION_INDEX_PRESENT=2]="SAMPLE_DESCRIPTION_INDEX_PRESENT",t[t.DEFAULT_SAMPLE_DURATION_PRESENT=8]="DEFAULT_SAMPLE_DURATION_PRESENT",t[t.DEFAULT_SAMPLE_SIZE_PRESENT=16]="DEFAULT_SAMPLE_SIZE_PRESENT",t[t.DEFAULT_SAMPLE_FLAGS_PRESENT=32]="DEFAULT_SAMPLE_FLAGS_PRESENT",t[t.DURATION_IS_EMPTY=65536]="DURATION_IS_EMPTY",t[t.DEFAULT_BASE_IS_MOOF=131072]="DEFAULT_BASE_IS_MOOF",t}({}),OS=function(t){return t[t.DATA_OFFSET_PRESENT=1]="DATA_OFFSET_PRESENT",t[t.FIRST_SAMPLE_FLAGS_PRESENT=4]="FIRST_SAMPLE_FLAGS_PRESENT",t[t.SAMPLE_DURATION_PRESENT=256]="SAMPLE_DURATION_PRESENT",t[t.SAMPLE_SIZE_PRESENT=512]="SAMPLE_SIZE_PRESENT",t[t.SAMPLE_FLAGS_PRESENT=1024]="SAMPLE_FLAGS_PRESENT",t[t.SAMPLE_COMPOSITION_TIME_OFFSET_PRESENT=2048]="SAMPLE_COMPOSITION_TIME_OFFSET_PRESENT",t}({});r();var FS=class t{bD(){return hc(this.Kk,this.SD)}TD(){return Ei(this.Kk,this.SD)}kD(){return function(t,e,i){void 0===i&&(i=!1);const s=t.getInt16(e.nc,i);return e.xb(2),s}(this.Kk,this.SD)}ED(){return $h(this.Kk,this.SD)}xD(){return function(t,e,i){void 0===i&&(i=!1);const s=t.getInt32(e.nc,i);return e.xb(4),s}(this.Kk,this.SD)}RD(){return Hr(this.Kk,this.SD)}CD(t){return E(this.Kk,this.SD,t)}PD(t){return function(t,e,i){const s=[];for(let n=0;n<i;n++)s.push($h(t,e));return s}(this.Kk,this.SD,t)}DD(t){return Sc(this.Kk,this.SD,t)}ND(){return Va(this.Kk,this.SD)}MD(t){this.SD.xb(t)}Ib(){return new t(this.Kk,this.SD.Ib())}constructor(t,e){this.Kk=t,this.SD=e}};r(),r();function VS(t,e){return t.Tw===e}function dn(t,e){for(const i of t)if(VS(i,e))return i}var WS=class extends ri{get name(){return"DataIncompleteError"}constructor(t,e){super(),this.LD=t,this.BD=e}},Mi=class t{static OD(e){const i=e.Kk,s=e.SD,n=t.FD(i,s,!1);if(!n.VD)throw new WS(s.nc,n.m);return n.m}static FD(e,i,s){const n=[];for(;i.nc<e.byteLength;){const r=t.WD(e,i,s);if(!r.VD)return{VD:!1,m:n};n.push(r.UD)}return{VD:!0,m:n}}static GD(e,i){const s=t.WD(e,i,!1);if(!s.VD)throw new WS(i.nc);return s.UD}static HD(e,i){const s=e.Kk,n=e.SD;for(;n.nc<s.byteLength;){const e=t.WD(s,n,!1);if(!e.VD)return;if(e.UD.Tw===i)return e.UD}}static WD(e,i,s){const n=i.nc,r=t.ZD(e,i);if(!r.VD)return r;const o=r.XD;let h=o.Nb;if(0===h){if(s)return i.Rb(n),{VD:!1,zD:1/0};h=e.byteLength-n}const a=n+h;if(a>e.byteLength){const t=a;return i.Rb(n),{VD:!1,zD:t}}const u={Tw:o.Tw,nc:n,Kk:new FS(jg(e,n,a),new Ri(o.qD))};return i.Rb(a),{VD:!0,UD:u}}static ZD(t,e){const i=e.nc;if(!Pg(t,e,8)){return{VD:!1,zD:e.nc+8}}let s=$h(t,e),n=Sc(t,e,4);if(1===s){if(!Pg(t,e,8)){const t=e.nc+8;return e.Rb(i),{VD:!1,zD:t}}s=Hr(t,e).toNumber()}if("uuid"===n){if(!Pg(t,e,16)){const t=e.nc+16;return e.Rb(i),{VD:!1,zD:t}}n=Sc(t,e,16)}return{VD:!0,XD:{Tw:n,Nb:s,qD:e.nc-i}}}static YD(t,e,i){const s=t.Kk,n=t.SD;let r=si(ua(s),n.nc,s.byteLength);return i&&(r=fc(r)),n.xb(r.byteLength),{Tw:e,Kk:r}}static KD(e,i,s){const n=e.ED(),{version:r,flags:o}=GS(n);return{Tw:i,jD:r,QD:o,Kk:t.YD(e,i,s).Kk}}};function Ra(t,e){const i=ki(t,e);if(!i)throw new g("Missing "+e+" atom");return i}function ki(t,e){for(const i of t)if(i.Tw===e)return i.Kk}function US(t,e){const i=[];for(const s of t)s.Tw===e&&i.push(s.Kk);return i}function GS(t){return{version:t>>24,flags:new xg(16777215&t)}}var nr=class t{static JD(e){const i=[],s=Mi.OD(new FS(e,new Ri));for(const e of s){const s=t.$D(e);s&&i.push(s)}return i}static tN(t){return Mi.FD(t,new Ri,!1).m.some(this.eN)}static iN(e){return US(Mi.OD(new FS(e,new Ri)),_t._D).map(t.sN)}static nN(e){return US(Mi.OD(e.Kk),_t._D).map(t.sN)}static eN(t){return t.Tw===_t.pD||t.Tw===_t.gD||t.Tw===_t.gP||t.Tw===_t.oD||t.Tw===_t.fD||t.Tw===_t.mD||t.Tw===_t.vD}static $D(e){switch(e.Tw){case _t.gP:return t.rN(e.Kk);case _t.oD:return t.oN(e.Kk,e.nc);case _t.fD:return t.hN(e.Kk);case _t.mD:return t.aN(e.Kk);case _t.vD:return t.uN(e.Kk)}}static rN(e){const i=Mi.OD(e),s=Ra(i,_t.pP),n=US(i,_t.wP),r=ki(i,_t.RP),o=t.cN(s),h=n.map(t.lN),a=r?t.dN(r):void 0;return{Tw:_t.gP,XD:o,Z:h,fN:a}}static cN(t){const e=t.ED(),{version:i,flags:s}=GS(e),n=1===i?t.RD():t.ED(),r=1===i?t.RD():t.ED(),o=t.ED(),h=1===i?t.RD():t.ED(),a=t.ED(),u=t.TD()>>8;t.MD(2),t.MD(8);const c=t.PD(9);t.MD(24);const l=t.ED();return{Tw:_t.pP,jD:i,QD:s,_N:n,vN:r,mN:o,ct:h,gN:a,gI:u,pN:c,wN:l}}static lN(e){const i=Mi.OD(e),s=Ra(i,_t.yP),n=Ra(i,_t.bP),r=t.yN(s),o=t.bN(n);return{Tw:_t.wP,XD:r,AN:o}}static yN(t){const e=t.ED(),{version:i,flags:s}=GS(e),n=1===i?t.RD():t.ED(),r=1===i?t.RD():t.ED(),o=t.ED();t.MD(4);const h=1===i?t.RD():t.ED();t.MD(8);const a=t.kD(),u=t.kD(),c=t.kD()/256;t.MD(2);const l=t.PD(9),d=t.ED()/65536,f=t.ED()/65536;return{Tw:_t.yP,SN:s.Cb(1),TN:s.Cb(2),kN:s.Cb(4),_N:n,vN:r,EN:o,ct:h,xN:a,RN:u,gI:c,pN:l,ji:d,Ti:f}}static bN(e){const i=Mi.OD(e),s=Ra(i,_t.AP),n=Ra(i,_t.SP),r=Ra(i,_t.TP),o=t.CN(s),h=t.PN(n),a=t.DN(r);return{Tw:_t.bP,XD:o,NN:h,MN:a}}static CN(t){const e=t.ED(),{version:i,flags:s}=GS(e),n=1===i?t.RD():t.ED(),r=1===i?t.RD():t.ED(),o=t.ED(),h=1===i?t.RD():t.ED();t.TD();return t.MD(2),{Tw:_t.AP,jD:i,QD:s,_N:n,vN:r,mN:o,ct:h}}static PN(t){const e=t.ED(),{version:i,flags:s}=GS(e);t.MD(4);const n=t.DD(4);t.MD(12);const r=t.ND();return{Tw:_t.SP,jD:i,QD:s,LN:n,l:r}}static DN(e){const i=Ra(Mi.OD(e),_t.kP),s=t.BN(i);return{Tw:_t.TP,ON:s}}static BN(e){const i=Ra(Mi.OD(e),_t.EP),s=t.FN(i);return{Tw:_t.kP,VN:s}}static FN(e){const i=e.ED(),{version:s,flags:n}=GS(i),r=(e.ED(),[]),o=Mi.OD(e);for(const e of o){const i=t.WN(e.Kk,e.Tw);i&&r.push(i)}return{Tw:_t.EP,jD:s,QD:n,UN:r}}static WN(e,i){let s=t.GN(e,i);return s||(s=t.HN(e,i),s||(i===_t.eD?t.ZN(e):void 0))}static GN(e,i){return i===_t.QP?t.XN(e):i===_t.$P||i===_t.$P.toLowerCase()||i===_t.$P.toUpperCase()?t.zN(e):i===_t.nD?t.qN(e):i===_t.YP?t.YN(e):void 0}static HN(e,i){return i===_t.CP?t.KN(e):i===_t.DP||i===_t.NP?t.jN(e,i):i===_t.LP?t.QN(e,i):i===_t.OP?t.JN(e,i):i===_t.rD?t.$N(e):i===_t.HP||i===_t.ZP||i===_t.zP||i===_t.qP?t.tM(e,i):void 0}static eM(t,e){t.MD(6);return{Tw:e,iM:t.TD()}}static sM(e,i){const s=t.eM(e,i);e.MD(8);const n=e.TD(),r=e.TD();e.MD(2),e.MD(2);return ol({},s,{nM:n,rM:r,oM:e.ED()>>>16})}static hM(e,i){const s=t.eM(e,i);e.MD(2),e.MD(2),e.MD(12);const n=e.TD(),r=e.TD(),o=e.ED(),h=e.ED();e.MD(4);const a=e.TD();e.MD(32);const u=e.TD();return e.MD(2),ol({},s,{ji:n,Ti:r,aM:o,uM:h,cM:a,lM:u})}static XN(e){const i=t.sM(e,_t.QP),s=Ra(Mi.OD(e),_t.JP);return ol({},i,{dM:t.fM(s)})}static zN(e){const i=t.sM(e,_t.$P),s=Ra(Mi.OD(e),_t.tD);return ol({},i,{_M:t.vM(s)})}static ZN(e){const i=t.eM(e,_t.eD),s=Mi.OD(e),n=Ra(s,_t.iD),r=t.mM(n),o=ki(s,_t.sD);return ol({},i,{gM:r,pM:o?t.wM(o):void 0})}static mM(t){return{Tw:_t.iD,kd:t.ND()}}static wM(t){return{Tw:_t.sD,Ch:t.ND()}}static fM(t){return Mi.KD(t,_t.JP,!0)}static vM(t){return Mi.KD(t,_t.tD,!0)}static KN(e){const i=t.hM(e,_t.CP),s=Mi.OD(e),n=Ra(s,_t.PP),r=ki(s,_t.jP);return ol({},i,{yM:t.bM(n),AM:r?t.SM(r):void 0})}static jN(e,i){const s=t.hM(e,i),n=Ra(Mi.OD(e),_t.MP);return ol({},s,{TM:t.kM(n)})}static QN(e,i){const s=t.hM(e,i),n=Ra(Mi.OD(e),_t.BP);return ol({},s,{EM:t.xM(n)})}static JN(e,i){const s=t.hM(e,i),n=Mi.OD(e),r=Ra(n,_t.FP),o=t.RM(r),h=ki(n,_t.KP);return ol({},s,{IM:o,CM:h?t.PM(h):void 0})}static $N(e){const i=e.Ib(),s=t.hM(e,_t.rD),n=Ra(Mi.OD(e),_t.wD),r=t.DM(n);return ol({},s,{NM:t.HN(i,r.LM.MM),BM:r})}static tM(e,i){const s=t.hM(e,i),n=Mi.OD(e);return ol({},s,{OM:t.FM(n)})}static YN(e){const i=t.sM(e,_t.YP),s=Ra(Mi.OD(e),_t.GP);return ol({},i,{VM:t.WM(s)})}static qN(e){const i=e.Ib(),s=t.sM(e,_t.nD),n=Ra(Mi.OD(e),_t.wD),r=t.DM(n);return ol({},s,{NM:t.GN(i,r.LM.MM),BM:r})}static DM(e){const i=Ra(Mi.OD(e),_t.yD),s=t.UM(i);return{Tw:_t.wD,LM:s}}static UM(t){const e=t.DD(4);return{Tw:_t.yD,MM:e}}static bM(t){return Mi.YD(t,_t.PP,!0)}static kM(t){return Mi.YD(t,_t.MP,!0)}static FM(t){const e=ki(t,_t.VP);if(void 0!==e)return Mi.YD(e,_t.VP,!0);const i=ki(t,_t.WP);if(void 0!==i)return Mi.YD(i,_t.WP,!0);const s=ki(t,_t.UP);if(void 0!==s)return Mi.YD(s,_t.UP,!0);throw g("Error parsing Dolby Vision configuration box.")}static WM(t){return Mi.YD(t,_t.GP,!0)}static xM(t){return Mi.YD(t,_t.BP,!0)}static RM(t){return Mi.YD(t,_t.FP,!0)}static PM(t){const e=t.DD(4);switch(e){case"nclx":return{GM:BS.ON_SCREEN_COLOURS,HM:t.TD(),ZM:t.TD(),XM:t.TD(),zM:0!=(128&t.bD())};case"rICC":return{GM:BS.RESTRICTED_ICC_PROFILE};case"prof":return{GM:BS.UNRESTRICED_ICC_PROFILE};default:throw g("Could not parse ColourInformationBox: unknown type '"+e+"'.")}}static SM(t){const e=t.ED(),i=t.ED();return{Tw:_t.jP,qM:e,YM:i}}static dN(e){const i=US(Mi.OD(e),_t.IP).map(t.KM);return{Tw:_t.RP,Z:i}}static KM(t){const e=t.ED(),{version:i,flags:s}=GS(e),n=t.ED(),r=t.ED(),o=t.ED(),h=t.ED(),a=t.ED();return{Tw:_t.IP,jD:i,QD:s,EN:n,jM:r,QM:o,JM:h,$M:a}}static oN(e,i){const s=Mi.OD(e),n=Ra(s,_t.hD),r=US(s,_t.aD),o=t.tL(n),h=r.map(t.eL);return{Tw:_t.oD,iL:i,XD:o,Z:h}}static tL(t){const e=t.ED(),{version:i,flags:s}=GS(e),n=t.ED();return{Tw:_t.hD,jD:i,QD:s,sL:n}}static eL(e){const i=Mi.OD(e),s=Ra(i,_t.uD),n=US(i,_t.cD),r=ki(i,_t.lD),o=t.nL(s),h=n.map((e=>t.rL(e,o))),a=r?t.oL(r):void 0;return{Tw:_t.aD,XD:o,hL:h,aL:a}}static nL(t){const e=t.ED(),{version:i,flags:s}=GS(e),n=t.ED(),r=s.Cb(Zh.BASE_DATA_OFFSET_PRESENT)?t.RD():void 0,o=s.Cb(Zh.SAMPLE_DESCRIPTION_INDEX_PRESENT)?t.ED():void 0,h=s.Cb(Zh.DEFAULT_SAMPLE_DURATION_PRESENT)?t.ED():void 0,a=s.Cb(Zh.DEFAULT_SAMPLE_SIZE_PRESENT)?t.ED():void 0,u=s.Cb(Zh.DEFAULT_SAMPLE_FLAGS_PRESENT)?t.ED():void 0;return{Tw:_t.uD,jD:i,QD:s,EN:n,uL:r,cL:o,QM:h,JM:a,$M:u}}static rL(e,i){const s=e.ED(),{version:n,flags:r}=GS(s),o=e.ED(),h=r.Cb(OS.DATA_OFFSET_PRESENT)?e.xD():void 0,a=r.Cb(OS.FIRST_SAMPLE_FLAGS_PRESENT)?e.ED():void 0,u=[];for(let s=0;s<o;s++){const o=t.lL(e,r,n,i);0===s&&void 0!==a&&(o.QD=a),u.push(o)}return{Tw:_t.cD,jD:n,QD:r,dL:o,iL:h,fL:a,_L:u}}static lL(t,e,i,s){return{ct:e.Cb(OS.SAMPLE_DURATION_PRESENT)?t.ED():s.QM,Nb:e.Cb(OS.SAMPLE_SIZE_PRESENT)?t.ED():s.JM,QD:e.Cb(OS.SAMPLE_FLAGS_PRESENT)?t.ED():s.$M,vL:e.Cb(OS.SAMPLE_COMPOSITION_TIME_OFFSET_PRESENT)?0===i?t.ED():t.xD():void 0}}static uN(t){const e=t.Kk,i=t.SD,s=$h(e,i),{version:n,flags:r}=GS(s);if(1===n){const t=$h(e,i),s=Hr(e,i),o=$h(e,i),h=$h(e,i),a=Bg(e,i),u=Bg(e,i),c=Rc(ua(e),i.nc,e.byteLength);return i.xb(c.byteLength),{Tw:_t.vD,jD:n,QD:r,mL:a,Mx:u,mN:t,gL:s,pL:o,o:h,wL:c}}{const t=Bg(e,i),s=Bg(e,i),o=$h(e,i),h=$h(e,i),a=$h(e,i),u=$h(e,i),c=Rc(ua(e),i.nc,e.byteLength);return i.xb(c.byteLength),{Tw:_t.vD,QD:r,jD:n,mL:t,Mx:s,mN:o,yL:h,pL:a,o:u,wL:c}}}static hN(t){return Mi.YD(t,_t.fD,!1)}static sN(e){const i=e.Kk,s=e.SD,n=fc(ua(i)).buffer,r=$h(i,s),{version:o,flags:h}=GS(r),a=t.bL(i,s),u=[];if(o>0){const t=$h(i,s);for(let e=0;e<t;e++){const t=E(i,s,16);u.push(t)}}const c=$h(i,s),l=new j(n,s.nc,c);return s.xb(i.byteLength),{Tw:_t._D,jD:o,QD:h,AL:a,SL:u,TL:c,Kk:l,kL:n}}static bL(t,e){let i="";for(let s=0;s<4;s++){const s=hc(t,e).toString(16);i+=1===s.length?"0"+s:s}i+="-";for(let s=0;s<2;s++){const s=hc(t,e).toString(16);i+=1===s.length?"0"+s:s}i+="-";for(let s=0;s<2;s++){const s=hc(t,e).toString(16);i+=1===s.length?"0"+s:s}i+="-";for(let s=0;s<2;s++){const s=hc(t,e).toString(16);i+=1===s.length?"0"+s:s}i+="-";for(let s=0;s<6;s++){const s=hc(t,e).toString(16);i+=1===s.length?"0"+s:s}return i.toLowerCase()}static aN(t){const e=t.Kk,i=t.SD,s=$h(e,i),{version:n,flags:r}=GS(s),o=$h(e,i),h=$h(e,i);let a,u;0===n?(a=vo.fromBits($h(e,i),0,!0),u=vo.fromBits($h(e,i),0,!0)):(a=Hr(e,i),u=Hr(e,i)),i.xb(2);const c=Ei(e,i),l=[];for(let t=0;t<c;t+=1){const t=$h(e,i),s=t>>31&1,n=2147483647&t,r=$h(e,i),o=$h(e,i),h=o>>31&1,a=o>>28&7,u=268435455&o;l.push({EL:s,xL:n,ct:r,RL:h,IL:a,CL:u})}return{Tw:_t.mD,jD:n,QD:r,PL:o,mN:h,DL:a,NL:u,ML:c,LL:l}}static oL(t){const e=t.Kk,i=t.SD,s=$h(e,i),{version:n,flags:r}=GS(s);let o;return o=0===n?vo.fromBits($h(e,i),0,!0):Hr(e,i),{Tw:_t.lD,jD:n,QD:r,aL:o}}},HS={playready:"https://pr-keyos.licensekeyserver.com/core/rightsmanager.asmx",widevine:"https://wv-keyos.licensekeyserver.com/",fairplay:"https://fp-keyos.licensekeyserver.com/getkey"};function ZS(t){if(!t)return!0;const e=t.licenseAcquisitionURL,i=t.certificateURL,s=t.keys,n=t.headers,r=t.useCredentials,o=t.queryParameters;return!(e||i||s||n||r||o)}function XS(t){return t&&void 0!==t.licenseAcquisitionURL}var zS=XS,qS=XS;function YS(t){if(!t)return!0;if(JS(t))return!1;const e=t.fairplay,i=t.playready,s=t.widevine,n=t.clearkey,r=t.aes128;return ZS(e)&&ZS(i)&&ZS(s)&&void 0===n&&ZS(r)}function KS(t){const e=DS(t),i=function(t){var e;const i=t;return PS(i)&&""!==(null==(e=i.fairplay)?void 0:e.headers.PreAuthorization)&&!CS(i)}(t);return(!e||!i)&&(e||i)}function jS(t){return t.integration===gS}function QS(t){const e=t;if(!e)return!1;if(YS(e))return!1;const i=e.fairplay,s=e.playready,n=e.widevine,r=e.clearkey;if(JS(t))return!0;if(i&&!function(t){const e=t;return e&&(void 0!==e.certificateURL||void 0!==e.certificate)}(i))return!1;if(s&&!zS(s))return!1;if(n&&!qS(n))return!1;if(r&&!function(t){return void 0!==t}(r))return!1;if(e.integration){if(LS.mP.fP(e.integration))return!0;switch(e.integration){case go:if(!function(t){const e=t,i=e.integration===go;return i&&($S(t)||tT(t))}(t))return!1;break;case pS:if(!eT(t))return!1;break;case wS:if(!function(t){const e=t;return e.integration===wS}(t))return!1;break;case gS:if(!jS(t))return!1;break;case vS:if(!KS(t))return!1;break;case mS:if(!function(t){const e=t;return e.integration===mS}(t))return!1;break;case Th:if(!JS(t))return!1;break;case yS:if(!function(t){const e=t;return e.integration===yS&&(void 0!==e.token||function(t){return void 0!==t.merchant&&void 0!==t.sessionId&&void 0!==t.userId}(e))}(t))return!1;break;case bS:if(!function(t){const e=t;return e.integration===bS}(t))return!1;break;case SS:if(!iT(t))return!1;break;case TS:if(!function(t){return t.integration===TS}(t))return!1;break;case kS:if(!sT(t))return!1;break;case AS:if(!function(t){const e=t;return e.integration===AS&&void 0!==e.token}(t))return!1;break;case ES:if(!function(t){const e=t;return e.integration===ES}(t))return!1;break;case xS:if(!function(t){const e=t;return e&&Bo(e.releasePid)&&Bo(e.accountId)&&Bo(e.token)}(t))return!1;break;case RS:return!0;default:return!1}}return!0}function JS(t){return t.integration===Th}function $S(t){return void 0!==t.authToken}function tT(t){const e=t;return void 0!==e.accountName&&void 0!==e.customerName&&void 0!==e.portalId}function eT(t){const e=t;return e.integration===pS&&void 0!==e.token}function iT(t){const e=t;return e&&e.integration===SS&&Yt(e.ticketAcquisitionURL)&&Yt(e.streamId)}function sT(t){const e=t;return e.integration===kS&&void 0!==e.token}function nT(t,e){const i=e[t];var s;const n=null!=(s=null==i?void 0:i.licenseAcquisitionURL)?s:HS[t];var r;const o=null!=(r=null==i?void 0:i.customdata)?r:e.customdata,h=o?{customData:o}:{};var a;const u=ol({},null!=(a=null==i?void 0:i.headers)?a:{},h),c=null!=i?i:{},{customdata:l}=c;return ol({},IS(c,["customdata"]),{licenseAcquisitionURL:n,headers:u})}function rT(t){switch(t.toLowerCase()){case"widevine":case am:return am;case"playready":case om:return om;case"fairplay":case Ve:return Ve}}function oT(t,e){switch(t){case im:return function(t){const e={},i=nr.iN(new DataView(t));for(const t of i)e[t.AL]=t.kL;return e}(e);case sm:case nm:return function(t){return{[dm]:t}}(e);default:throw new A(Qa.CONTENT_PROTECTION_INITIALIZATION_INVALID,"Unsupported initDataType "+t)}}async function hT(t,e){return void 0===e&&(e=!1),!(!t.widevine||!await Ms.Kp())||(!(!t.playready||!await Ms.Yp())||(!(!t.clearkey||!await Ms.zp())||!(e||!t.fairplay||!await Ms.qp())))}function Vc(t,e,i){const s=function(t,e,i){var s;const{useCredentials:n,crossOrigin:r}=function(t,e){let i=Ih.wE;return t.useCredentials?i=Ih.zC:t.crossOrigin&&(i=DT(t.crossOrigin)),i===Ih.wE&&e&&e.vr&&e.vr[360]&&(i=Ih.XC),{useCredentials:i===Ih.zC,crossOrigin:i}}(t,e);let o=t.liveOffset;Bo(o)||(o=i&&Bo(i.liveOffset)?i.liveOffset:void 0);let h=t.timeServer;Bo(h)||(h=e&&Bo(e.timeServer)?e.timeServer:void 0);let a=t.hlsDateRange;Bo(a)||(a=i&&Bo(i.hlsDateRange)?Boolean(i.hlsDateRange):void 0);const u=Boolean(t.experimentalRendering),c=Boolean(t.nativeUiRendering),l=Boolean(t.lowLatency),d=Boolean(t.useNativePlayback),f=Boolean(t.useManagedMediaSource),_=Bo(t.dash)?uT(t.dash):void 0,v=Bo(t.hls)?cT(t.hls):void 0,m=_T(fT(t.abr),null==i?void 0:i.abr),g=vi(t.lcevc),p=Bo(t.ignoreEmbeddedTextTrackTypes)?HT(t.ignoreEmbeddedTextTrackTypes):[];var w;const y=xT(null!=(w=t.seamlessSwitchStrategy)?w:null==(s=t.dash)?void 0:s.useSeamlessPeriodSwitch),b=kT(t.latencyConfiguration);return{crossOrigin:r,useCredentials:n,liveOffset:o,timeServer:h,hlsDateRange:a,experimentalRendering:u,nativeUiRendering:c,lowLatency:l,useNativePlayback:d,useManagedMediaSource:f,dash:_,hls:v,abr:m,lcevc:g,ignoreEmbeddedTextTrackTypes:p,seamlessSwitchStrategy:y,latencyConfiguration:b}}(t,e,i),n=dS(t.src);let r=t.type;r||(r=t.src?vu(t.src):void 0);const o=function(t,e){let i;i=Bo(t.contentProtection)?t.contentProtection:Bo(t.drm)?t.drm:Bo(e)&&Bo(e.contentProtection)?e.contentProtection:Bo(e)&&Bo(e.drm)?e.drm:void 0;return aT(i)}(t,e);return ol({},s,{src:n,type:r,contentProtection:o,ssai:Bo(t.ssai)?_S(t.ssai):void 0,integrationData:void 0,isAdvertisement:Boolean(t.isAdvertisement)})}function aT(t){return QS(t)&&t.integration&&t.integration===Th?function(t){const e=nT(ue.ww,t),i=nT(ue.pw,t),s=t[ue.Aw]&&nT(ue.Aw,t);return ol({integration:"keyos",widevine:e,playready:i},s?{fairplay:s}:{})}(t):t}function uT(t){return{useSeamlessPeriodSwitch:xT(null==t?void 0:t.useSeamlessPeriodSwitch),needsTimescaleShifting:vi(null==t?void 0:t.needsTimescaleShifting),desiredTimescale:void 0!==(null==t?void 0:t.desiredTimescale)?eo(null==t?void 0:t.desiredTimescale):void 0,forceSeekToSynchronize:vi(null==t?void 0:t.forceSeekToSynchronize),ignoreAvailabilityWindow:vi(null==t?void 0:t.ignoreAvailabilityWindow),forceHardSwitchWhenSeekingBackwards:vi(null==t?void 0:t.forceHardSwitchWhenSeekingBackwards),segmentRelativeVttTiming:vi(null==t?void 0:t.segmentRelativeVttTiming),forceRecreateMediaSourceOnAudioSwitch:vi(null==t?void 0:t.forceRecreateMediaSourceOnAudioSwitch)}}function cT(t){return{discontinuityAlignment:lT(null==t?void 0:t.discontinuityAlignment),delaySubtitlePreload:Fu(null==t?void 0:t.delaySubtitlePreload)}}function lT(t){if(!t||!Yt(t))return"auto";switch(t){case"playlist":return"playlist";case"media":return"media";default:return"auto"}}r(),r(),r(),r();var ee=function(t){return t.vE="audio",t.mE="video",t.Tk="text",t.gE="image",t.iE="unknown",t}({});function dT(t){return"audio"===t||"video"===t}function fT(t){if(!Bo(t))return;return vT(KA(null==t?void 0:t.preferredAudioCodecs,hs),KA(null==t?void 0:t.preferredVideoCodecs,hs),vi(null==t?void 0:t.restrictToPlayerSize))}function _T(t,e){if(!Bo(t)&&!Bo(e))return;var i;return vT(mT(null==t?void 0:t.preferredAudioCodecs,null==e?void 0:e.preferredAudioCodecs),mT(null==t?void 0:t.preferredVideoCodecs,null==e?void 0:e.preferredVideoCodecs),null!=(i=null==t?void 0:t.restrictToPlayerSize)?i:null==e?void 0:e.restrictToPlayerSize)}function vT(t,e,i){if(0!==t.length||0!==e.length||void 0!==i)return{preferredAudioCodecs:0===t.length?void 0:t,preferredVideoCodecs:0===e.length?void 0:e,restrictToPlayerSize:i}}function mT(t,e){return void 0!==t&&(null==t?void 0:t.length)>0?t:null!=e?e:[]}function gT(t,e){if(void 0!==e)switch(t){case ee.mE:return e.preferredVideoCodecs;case ee.vE:return e.preferredAudioCodecs;default:return}}r(),r(),r();var Gc=!1;r();var Zc=function(t){return t.BL="canplay",t.OL="canplaythrough",t.FL="loadeddata",t.VL="loadedmetadata",t.iC="readystatechange",t.WL="waiting",t.UL="playing",t}({}),no=["canplay","canplaythrough","loadeddata","loadedmetadata","readystatechange","waiting","playing"];function pT(t,e,i){return i?t<=e:t<e}r();var se=class t{get GL(){return this.HL.slice()}Sn(t){return this.HL[2*t]}Tn(t){return this.HL[2*t+1]}ZL(t){return this.XL[2*t]}zL(t){return this.XL[2*t+1]}ks(){const t=this;return{get length(){return t.V},start(e){const i=0|e;return t.qL(i),t.Sn(i)},end(e){const i=0|e;return t.qL(i),t.Tn(i)}}}YL(){const e=new Array(2*this.V),i=new Array(2*this.V);for(let t=0;t<this.V;t++)e[2*t]=this.Sn(t),e[2*t+1]=this.Tn(t),i[2*t]=!0,i[2*t+1]=!0;return new t(e,i)}qL(t){if(t<0)throw new g("The index provided ("+t+") must be non-negative");if(t>=this.V)throw new g("The index provided ("+t+") is greater than the maximum bound ("+this.V+")")}KL(t){if(0===this.V)return 0;if(this.wr(t))return t;if(t<=this.Sn(0))return this.Sn(0);if(t>=this.Tn(this.V-1))return this.Tn(this.V-1);{let e=0,i=1/0;for(let s=0;s<this.V;s++){const n=this.Sn(s),r=_.abs(n-t);r<i&&(e=n,i=r);const o=this.Tn(s),h=_.abs(o-t);h<i&&(e=o,i=h)}return e}}jn(e){let i=0,s=0;const n=[],r=[];for(;i<this.V&&s<e.V;){const t=this.Sn(i),o=this.Tn(i),h=this.ZL(i),a=this.zL(i),u=e.Sn(s),c=e.Tn(s),l=e.ZL(s),d=e.zL(s),f=_.max(t,u),v=_.min(o,c);let m,g;m=t===u?h&&l:f===t?h:l,g=o===c?a&&d:v===o?a:d,(f<v||m&&g&&f===v)&&(n.push(f,v),r.push(m,g)),o===c?(i+=1,s+=1):o<c?i+=1:s+=1}return new t(n,r)}jL(){const e=this.QL(),i=e.V;if(0===i)return new t([-1/0,1/0],[!1,!1]);const s=[],n=[],r=e.Sn(0);r!==-1/0&&(s.push(-1/0,r),n.push(!1,!e.ZL(0)));for(let t=0;t<i-1;t++)s.push(e.Tn(t),e.Sn(t+1)),n.push(!e.zL(t),!e.ZL(t+1));const o=e.Tn(i-1);return o!==1/0&&(s.push(o,1/0),n.push(!e.zL(i-1),!1)),new t(s,n)}JL(e){let i=0,s=0;const n=this.V,r=e.V,o=new Array(2*(n+r)),h=new Array(2*(n+r));let a=0;for(;i<n&&s<r;){const t=this.Sn(i),n=this.Tn(i),r=e.Sn(s),u=e.Tn(s);t<r||t===r&&n<u?(o[a]=t,o[a+1]=n,h[a]=this.ZL(i),h[a+1]=this.zL(i),i++):(o[a]=r,o[a+1]=u,h[a]=e.ZL(s),h[a+1]=e.zL(s),s++),a+=2}for(;i<n;)o[a]=this.Sn(i),o[a+1]=this.Tn(i),h[a]=this.ZL(i),h[a+1]=this.zL(i),i++,a+=2;for(;s<r;)o[a]=e.Sn(s),o[a+1]=e.Tn(s),h[a]=e.ZL(s),h[a+1]=e.zL(s),s++,a+=2;return new t(o,h)}$L(e){void 0===e&&(e=0);const i=this.V;if(i<2)return this;const s=[],n=[];let r=this.Sn(0),o=this.Tn(0),h=this.ZL(0),a=this.zL(0);for(let t=1;t<i;t++){const i=this.Sn(t),u=this.Tn(t);let c=this.ZL(t),l=this.zL(t);r<i&&o>u||(r===i&&(c=h||c,h=c),o===u&&(l=a||l,a=l),pT(i,o+e,a||c)?(o=u,a=l):(s.push(r,o),n.push(h,a),r=i,o=u,h=c,a=l))}return s.push(r,o),n.push(h,a),new t(s,n).QL()}QL(){const e=[],i=[];for(let t=0;t<this.V;t++){const s=this.Sn(t),n=this.Tn(t),r=this.ZL(t),o=this.zL(t);s===n?(r||o)&&(e.push(s,n),i.push(!0,!0)):(e.push(s,n),i.push(r,o))}return new t(e,i)}tB(t){if(0===this.V)return t;if(0===t.V)return this;return this.JL(t).$L()}eB(t){const e=this.QL(),i=t.QL(),s=e.jL(),n=i.jL(),r=s.jn(i),o=n.jn(e);return r.tB(o)}xb(e){if(0===this.V||0===e)return this;const i=[],s=[];for(let t=0;t<this.V;t++){const n=this.Sn(t)+e,r=this.Tn(t)+e;i.push(n,r),s.push(this.ZL(t),this.zL(t))}return new t(i,s)}iB(t){return 0===this.V||0===t.V?this:this.QL().jn(t.QL().jL())}wr(t,e){return this.sB(t,e)>=0}nB(t,e,i,s,n){return this.rB(t,e,i,s,n)>=0}oB(t,e,i,s,n){return this.hB(t,e,i,s,n)>=0}aB(t){if(t.V!==this.V)return!1;for(let e=0;e<this.V;e++)if(this.Sn(e)!==t.Sn(e)||this.Tn(e)!==t.Tn(e)||this.ZL(e)!==t.ZL(e)||this.zL(e)!==t.zL(e))return!1;return!0}uB(e){const i=[],s=[];for(let t=0;t<this.V;t++){const n=this.Sn(t),r=this.Tn(t),o=this.ZL(t),h=this.zL(t);e(n,r,o,h)&&(i.push(n,r),s.push(o,h))}return new t(i,s)}hB(t,e,i,s,n){void 0===i&&(i=!0),void 0===s&&(s=!0),void 0===n&&(n=0);const r=t-n,o=e+n;for(let t=0;t<this.V;t+=1)if(pT(this.Sn(t),o,!s||this.ZL(t))&&pT(r,this.Tn(t),!i||this.zL(t)))return t;return-1}rB(t,e,i,s,n){void 0===i&&(i=!0),void 0===s&&(s=!1),void 0===n&&(n=0);const r=t+n,o=e-n;for(let t=0;t<this.V;t+=1)if(pT(this.Sn(t),r,!i||this.ZL(t))&&pT(o,this.Tn(t),!s||this.zL(t)))return t;return-1}sB(t,e){return this.rB(t,t,!0,!0,e)}cB(t,e){void 0===e&&(e=0);const i=t+e;for(let t=this.V-1;t>=0;t-=1)if(pT(this.Sn(t),i,this.ZL(t)))return t;return-1}lB(t,e){void 0===e&&(e=0);const i=t-e;for(let t=0;t<this.V;t+=1)if(pT(i,this.Tn(t),this.zL(t)))return t;return-1}dB(t,e){void 0===e&&(e=0);const i=t+e;for(let t=0;t<this.V;t+=1)if(this.Sn(t)>i)return t;return-1}fB(e){return this.qL(e),new t([this.Sn(e),this.Tn(e)],[this.ZL(e),this.zL(e)])}_B(t,e){const i=this.sB(t,e);return i<0?void 0:this.fB(i)}get vB(){let t=0;for(let e=0;e<this.V;e++){t+=this.Tn(e)-this.Sn(e)}return t}static Cn(e){const i=[];for(let t=0;t<e.length;t++)i.push(e.start(t),e.end(t));return new t(i)}static mB(e){return new t([e,e],[!0,!0])}static gB(e,i){return e<=i?new t([e,i]):t.pB()}static pB(){return wT}constructor(t,e){this.V=t.length>>1,this.HL=t,this.XL=e||function(t){const e=new Array(2*t);for(let i=0,s=0;i<t;i+=1,s+=2)e[s]=!0,e[s+1]=!1;return e}(this.V)}},wT=new se([]),At=.92,mt=1.08,yT=.25,bT=class extends Co{get wB(){return this.qe&&this.eo}get yB(){return this.bB}get Rt(){return this.qe}set Rt(t){this.qe=t,t?this.Sn():this.RI()}AB(t){this.SB.push(t),this.TB()}kB(t){we(this.SB,t),this.TB()}TB(){this.bB=this.EB(),this.eo&&this.xB()}EB(){const t=this.RB,e=function(t,e){const i=e-t.targetOffset;return{minimumOffset:t.minimumOffset+i,targetOffset:t.targetOffset+i,maximumOffset:t.maximumOffset+i,forceSeekOffset:t.forceSeekOffset+i,minimumPlaybackRate:t.minimumPlaybackRate,maximumPlaybackRate:t.maximumPlaybackRate,leniency:t.leniency}}(this.IB,this.CB),i=[e,...this.SB],s=i.reduce(((t,e)=>{var i;return _.max(t,null!=(i=null==e?void 0:e.minimumOffset)?i:0)}),t),n=i.reduce(((t,e)=>{var i;return _.max(t,null!=(i=null==e?void 0:e.targetOffset)?i:0)}),s+yT),r=i.reduce(((t,e)=>{var i;return _.max(t,null!=(i=null==e?void 0:e.maximumOffset)?i:0)}),n+yT);return{minimumOffset:s,targetOffset:n,maximumOffset:r,forceSeekOffset:i.reduce(((t,e)=>{var i;return _.max(t,null!=(i=null==e?void 0:e.forceSeekOffset)?i:0)}),r+yT),minimumPlaybackRate:i.reduce(((t,e)=>{var i;return _.min(t,null!=(i=e.minimumPlaybackRate)?i:At)}),At),maximumPlaybackRate:i.reduce(((t,e)=>{var i;return _.max(t,null!=(i=e.maximumPlaybackRate)?i:mt)}),mt)}}PB(){var t;const e=null==(t=se.Cn(this.na.wR)._B(this.na.ER))?void 0:t.Tn(0),i=void 0!==e?e-this.na.ER:0;this.DB=_.min(this.DB,i),this.NB+=1}MB(){if(this.NB<10)return;const t=.25-this.DB,e=Ns(this.CB+t,this.CB-.1,this.CB+.1);this.CB=Ns(e,this.LB,this.BB),this.DB=1/0,this.NB=0}OB(){this.FB(),this.JE=Ms.Gg((()=>this.xB()),500)}FB(){void 0!==this.JE&&(Ms.Ug(this.JE),this.JE=void 0)}Sn(){this.qe&&this.VB&&(this.eo||this.WB.bn(Ti.hb,this.xB),this.UB=Ms.Gp((()=>this.PB()),1e3),this.GB=Ms.Gp((()=>this.MB()),6e4),this.OB(),this.eo=!0)}RI(){this.eo&&(this.FB(),this.UB&&Ms.Hp(this.UB),this.GB&&Ms.Hp(this.GB),this.WB.vn(Ti.hb,this.xB),this.HB(1),this.eo=!1)}Xw(){this.RI(),this.na.vn(Zc.WL,this.ZB),this.na.vn(Zc.UL,this.XB),this.Ro()}HB(t){this.WB.qB.zB||this.na.QR!==t&&(this.na.QR=t)}get YB(){return this.na.KB}constructor(t,e,i){var s;super(),this.eo=!1,this.qe=!1,this.SB=[],this.VB=!1,this.RB=0,this.JE=void 0,this.NB=0,this.DB=1/0,this.ZB=()=>{const t=this.WB.wR,e=this.WB.ER,i=t._B(e);i&&(this.RB=Ns(i.Tn(0)-e,this.RB,.5),this.TB())},this.XB=()=>{this.VB=!0,this.na.vn(Zc.UL,this.XB),this.qe&&this.Sn()},this.xB=()=>{this.FB(),this.OB();const t=this.YB;if(!t)return;const e=this.jB();if(t>this.bB.forceSeekOffset)return this._o(new pe("latencyrecoveryseek")),void this.ZC();const{minimumOffset:i,targetOffset:s,maximumOffset:n}=this.bB,r=this.WB.QR;if(e>n&&this.QB()){const t=this.bB.maximumPlaybackRate;Gc,this.HB(t)}else if(e<i&&!Ms.Ys.$g){const t=this.bB.minimumPlaybackRate;Gc,this.HB(t)}else if(r>1&&e<s){const t=1;Gc,this.HB(t)}else if(r<1&&e>s){const t=1;Gc,this.HB(t)}},this.na=t,this.WB=e,this.IB=i,this.LB=i.targetOffset,this.BB=i.targetOffset+(null!=(s=i.leniency)?s:0),this.CB=i.targetOffset,this.bB=this.EB(),this.na.bn(Zc.WL,this.ZB),this.na.bn(Zc.UL,this.XB)}},AT=.66,ST=1.5,TT=3;function kT(t){if(!Bo(t))return;const e=Ms.Ys.tp?10:0,i=t.targetOffset;var s;var n;var r;var o;var h;var a;return{minimumOffset:null!=(s=t.minimumOffset)?s:i*AT,targetOffset:i,maximumOffset:null!=(n=t.maximumOffset)?n:i*ST,forceSeekOffset:_.max(null!=(r=t.forceSeekOffset)?r:i*TT,e),minimumPlaybackRate:null!=(o=t.minimumPlaybackRate)?o:At,maximumPlaybackRate:null!=(h=t.maximumPlaybackRate)?h:mt,leniency:null!=(a=t.leniency)?a:void 0}}var Ks=function(t){return t.JB="auto",t.$B="always",t.tO="never",t.CLEAR_ONLY="clear-only",t.SAME_DRM_ONLY="same-drm-only",t}({}),ET=function(t){return t.UPLYNK="uplynk",t.MEDIATAILOR="mediatailor",t}({});function xT(t){if(!t||!Yt(t))return"auto";switch(t){case"always":return"always";case"never":return"never";case"clear-only":return"clear-only";case"same-drm-only":return"same-drm-only";default:return"auto"}}r(),r();var jn=function(t){return t.ENABLED="enabled",t.INSECURE="insecure",t.DISABLED="disabled",t}({});r();var RT=!1;r();var IT=function(t){return t.NONE="none",t.MIDROLL_AND_POSTROLL="midroll-and-postroll",t}({});r();var Lr=function(t){return t.DEFAULT="",t.SRT="srt",t.TTML="ttml",t.WEBVTT="webvtt",t.EMSG="emsg",t.EVENT_STREAM="eventstream",t.ID3="id3",t.CEA608="cea608",t.DATE_RANGE="daterange",t.MILLICAST="millicast",t}({});function CT(t){switch(t){case"":case"srt":case"ttml":case"webvtt":case"emsg":case"eventstream":case"id3":case"cea608":case"daterange":case"millicast":return!0;default:return!1}}function PT(t){return!!t&&Ga(t,"mpd")}function vu(t){let e=Bc.jC;return PT(t)&&(e=Bc.qC),function(t){return!!t&&Ga(t,"m3u8")}(t)&&(e=Bc.YC),e}function DT(t){switch(t){case Ih.XC:case Ih.zC:return t;default:return Ih.wE}}function NT(t){if(!t)return!1;const e=t.toLowerCase();return Cl(e,Bc.qC)}function zh(t){if(!t)return!1;const e=t.toLowerCase();return Cl(e,Bc.YC)||Cl(e,Bc.KC)}function qc(t){return V(t)&&V(t.ssai)&&"google-dai"===t.ssai.integration}function Kc(t){return V(t)&&("verizon-media"===t.integration||"uplynk"===t.integration)}function MT(t){return V(t)&&("theolive"===t.type||"theolive"===t.integration)}function LT(t){return V(t)&&"mediatailor"===t.integration}function zc(t){return V(t)&&"millicast"===t.type}function BT(t){if(t.sources)if($c(t.sources)){for(const e of t.sources)if(zc(e))return!0}else if(V(t.sources))return zc(t.sources);return!1}function OT(t){if(Yt(t))return!t;if(Kc(t))return!t.id;if(qc(t)){const e=t.ssai,i="live"===e.availabilityType&&e.assetKey,s="vod"===e.availabilityType&&e.contentSourceID&&e.videoID;return Boolean(i&&s)}return zc(t)?!t.src||!t.streamAccountId:!t.src}function Cn(t){return Boolean(V(t)&&Yt(t.src))}function FT(t){return t.type===Bc.QC||t.type===Bc.JC}function ll(t){return Yt(t)||Cn(t)||qc(t)||Kc(t)||zc(t)}function Fn(t){if(t){if(ll(t))return OT(t);for(const e of t)if(!OT(e))return!1;return!0}return!0}function VT(){return{crossOrigin:Ih.wE,useCredentials:!1,liveOffset:void 0,timeServer:void 0,hlsDateRange:void 0,experimentalRendering:!1,nativeUiRendering:!1,lowLatency:!1,useNativePlayback:!1,useManagedMediaSource:!1,dash:void 0,hls:void 0,abr:void 0,lcevc:void 0,ignoreEmbeddedTextTrackTypes:[],seamlessSwitchStrategy:Ks.JB,latencyConfiguration:void 0}}function WT(){return ol({},VT(),{src:void 0,type:Bc.jC,contentProtection:void 0,ssai:void 0,integrationData:void 0,isAdvertisement:void 0})}function UT(t){const e={allowedMimeTypes:void 0,preload:"midroll-and-postroll",showCountdown:!0,vpaidMode:jn.ENABLED,googleIma:{useNativeIma:!1,useAdUiElementForSsai:!1,bitrate:-1,language:void 0,uiElements:void 0,allowSeekingForGoogleDai:!1},theoads:RT};return void 0===t||(void 0!==t.preload&&(e.preload=function(t){return"none"===t?IT.NONE:IT.MIDROLL_AND_POSTROLL}(t.preload)),void 0!==t.showCountdown&&(e.showCountdown=Fu(t.showCountdown)),void 0!==t.vpaidMode&&(e.vpaidMode=function(t){switch(t){case"insecure":return jn.INSECURE;case"disabled":return jn.DISABLED;default:return jn.ENABLED}}(t.vpaidMode)),$c(t.allowedMimeTypes)&&(e.allowedMimeTypes=t.allowedMimeTypes.filter(Yt)),void 0!==t.googleIma&&(e.googleIma=function(t){return void 0===t?{useNativeIma:!1,useAdUiElementForSsai:!1,bitrate:-1,language:void 0,uiElements:void 0,allowSeekingForGoogleDai:!1}:{useNativeIma:Fu(t.useNativeIma),useAdUiElementForSsai:Fu(t.useAdUiElementForSsai),bitrate:null!=(e=t.bitrate)?e:-1,language:Bo(t.language)?hs(t.language):void 0,uiElements:t.uiElements,allowSeekingForGoogleDai:Fu(t.allowSeekingForGoogleDai)};var e}(t.googleIma)),void 0!==t.theoads?e.theoads=Fu(t.theoads):e.theoads=RT),e}function GT(t){if(!nc(t))return[];const e=[];for(const i of t)V(i)&&e.push(i);return e}function _o(t){return Yt(t.src)||zc(t)}function HT(t){return $c(t)?t.filter(CT):[]}r(),r();var Ht=function(t){return t[t.eO=0]="eO",t[t.Xn=1]="Xn",t[t.iO=2]="iO",t[t.sO=3]="sO",t[t.nO=4]="nO",t}({}),Ys=class extends pe{constructor(t,e=Ht.eO){super(Ti.Cy),this.currentTime=t,this.readyState=e}};r();var ul=class extends pe{constructor(t){super(Ti.zy),this.currentTime=t}};r();var $=class extends pe{constructor(t){super(Ti.ho),this.currentTime=t}};r();var ZT=class extends pe{constructor(t,e=Ht.Xn){super(Zc.VL),this.currentTime=t,this.readyState=e}};r();var $s=class extends pe{constructor(t){super(Ti.Iy),this.duration=t}};r();var ju=class extends pe{constructor(t,e){super(Ti.Yy),this.currentTime=t,this.playbackRate=e}};r();var Al=class extends pe{constructor(t,e){super(Ti.hb),this.currentTime=t,this.currentProgramDateTime=e}};r();var Xs=class extends pe{constructor(t){super(Ti.Dy),this.currentTime=t}};r();var XT=class extends pe{constructor(t,e=Ht.iO){super(Zc.FL),this.currentTime=t,this.readyState=e}};r();var R=class extends pe{constructor(t){super(Ti.Jy),this.currentTime=t}};r();var oa=class extends pe{constructor(t){super(Ti.Qy),this.currentTime=t}};r();var ns=class extends pe{constructor(t,e){super(Ti.ub),this.currentTime=t,this.volume=e}};r();var ro=class extends pe{constructor(t,e=Ht.sO){super(Zc.BL),this.currentTime=t,this.readyState=e}};r();var zT=class extends pe{constructor(t,e=Ht.nO){super(Zc.OL),this.currentTime=t,this.readyState=e}};r();var hu=class extends pe{constructor(t,e){super(Zc.iC),this.currentTime=t,this.readyState=e}};r();var Na=class extends Ds{get error(){return this.errorObject.message}ka(){return this}constructor(t){super(yo.fa),this.errorObject=t}};async function Ci(t,e,i,s,n){void 0===i&&(i=3),void 0===s&&(s=1e3),void 0===n&&(n=1/0);let r=0;for(;;)try{return await t(e)}catch(t){if(th(t),r<i){const t=_.min(s*2**r,n);r++,await ke(t,e);continue}throw t}}r();var qT={maxRetries:1/0,minimumBackoff:200,maximumBackoff:3e4};r();var Nu=function(t){return t.INLINE="inline",t.FULLSCREEN="fullscreen",t.PICTURE_IN_PICTURE="picture-in-picture",t.NATIVE_PICTURE_IN_PICTURE="native-picture-in-picture",t}({}),YT=function(t){return t.NONE="none",t.ALL="all",t.CONTENT="content",t}({});function KT(t){switch(t){case"all":case"content":return t;default:return"none"}}function jT(t){var e;const i=tu(t||{});return i.libraryLocation&&(i.libraryLocation=Ki(i.libraryLocation,!0)),i.isEmbeddable=Boolean(i.isEmbeddable),i.cast=function(t){const e=lS(t?t.chromecast:void 0),i=function(t){switch(t){case"auto":return"auto";case"manual":default:return"manual";case"disabled":return"disabled"}}(t?t.strategy:void 0);return{chromecast:e,strategy:i}}(i.cast),i.ads=UT(i.ads),i.analytics=GT(i.analytics),i.mutedAutoplay=KT(i.mutedAutoplay),i.allowNativeFullscreen=Boolean(i.allowNativeFullscreen),i.allowMixedContent=Boolean(i.allowMixedContent),i.persistVolume=Boolean(i.persistVolume),i.liveOffset=function(t){return Number(t)||void 0}(i.liveOffset),i.hlsDateRange=function(t){return Boolean(t)}(i.hlsDateRange),i.retainPlaybackRateOnSourceChange=Boolean(i.retainPlaybackRateOnSourceChange),i.license=function(t){return Yt(t)?t:void 0}(i.license),i.licenseUrl=function(t){if(!t)return;try{return Ki(t)}catch(t){return void Ms.Vp("Invalid 'licenseUrl', falling back to default URL")}}(i.licenseUrl),i.abr=fT(i.abr),i.retryConfiguration=function(t){const e=ol({},qT);return void 0!==t&&(void 0!==t.maxRetries&&(e.maxRetries=Number(t.maxRetries)),void 0!==t.minimumBackoff&&(e.minimumBackoff=Number(t.minimumBackoff)),void 0!==t.maximumBackoff&&(e.maximumBackoff=Number(t.maximumBackoff))),e}(i.retryConfiguration),i.hideDeprecationWarnings=Boolean(i.hideDeprecationWarnings),i.theoLive=function(t){if(!t)return t;return ol({},t,{externalSessionId:t.externalSessionId?hs(t.externalSessionId):void 0,fallbackEnabled:vi(t.fallbackEnabled)})}(i.theoLive),null!=(e=i).uplynk||(e.uplynk=i.verizonMedia),i}function QT(t){return{bt:t.bt,ER:t.ER,ct:t.ct,PR:t.PR,lt:t.lt,MR:t.MR,ZR:t.ZR,KR:t.KR,QR:t.QR,rI:t.rI,uI:t.uI,dI:t.dI,vI:t.vI,gI:t.gI}}function JT(t,e){const i=e.gI,s=e.ZR;t.gI=i,t.ZR=s}function Yc(t,e,i){if(e===i)return;const s=e.bt!==i.bt,n=e.ER,r=e.ct,o=e.ZR,h=e.KR,a=e.QR,u=e.rI,c=e.uI,l=(e.vI,e.dI,e.gI),d=i.ER,f=i.ct,_=i.PR,v=i.MR,m=i.ZR,g=i.KR,p=i.QR,w=i.rI,y=i.uI,b=(i.vI,i.dI,i.gI);(s||u>Ht.eO&&w===Ht.eO)&&t._o(new Ys(d,w)),g&&!h?t._o(new ul(d)):!g&&h&&t._o(new $(d)),w>=Ht.Xn&&(s||u<Ht.Xn)&&t._o(new ZT(d,w)),f===r||S(f)&&S(r)||t._o(new $s(f)),p!==a&&t._o(new ju(d,p)),d!==n&&t._o(new Al(d,void 0)),_&&t._o(new Xs(d)),w>=Ht.iO&&(s||u<Ht.iO)&&t._o(new XT(d,w)),y&&!c?t._o(new R(d)):!y&&c&&t._o(new oa(d)),b===l&&m===o||t._o(new ns(d,b)),w>=Ht.sO&&(s||u<Ht.sO)&&t._o(new ro(d,w)),w>=Ht.nO&&(s||u<Ht.nO)&&t._o(new zT(d,w)),w!==u&&t._o(new hu(d,w)),v&&t._o(new Na(v))}function $T(t){switch(t){case Nu.INLINE:case Nu.FULLSCREEN:case Nu.PICTURE_IN_PICTURE:case Nu.NATIVE_PICTURE_IN_PICTURE:return t;default:return}}r();var tk=class extends pe{constructor(t){super(Ti.xy),this.currentSource=t}};r();var ho=class extends pe{constructor(){super(Ti.Ny)}};r();var ek=class extends pe{constructor(){super(Ti.Ly)}};r(),r(),r();var rr=function(t){return t.rO="enterpictureinpicture",t.oO="exitpictureinpicture",t.fa="pictureinpictureerror",t}({}),ik=class extends pe{constructor(){super(rr.rO)}};r();var sk=class extends pe{constructor(){super(rr.oO)}},Vh=class extends Co{get vC(){return this.mC}set vC(t){if(t===this.mC)return;this.gC(this.mC);const e=this.mC.hO;this.mC=t,this.wC(t),!e&&this.mC.hO?this._o(new ik):e&&!this.mC.hO&&this._o(new sk)}wC(t){t.bn(rr.rO,this.Ds),t.bn(rr.oO,this.Ds),t.bn(rr.fa,this.Ds)}gC(t){t.vn(rr.rO,this.Ds),t.vn(rr.oO,this.Ds),t.vn(rr.fa,this.Ds)}get aO(){return this.mC.aO}get hO(){return this.mC.hO}vo(){return this.mC.vo()}xo(){return this.mC.xo()}yn(t){this.Ro(),this.gC(this.mC),t||this.mC.yn()}constructor(t){super(),this.mC=t,this.wC(this.mC)}},nk=class extends al{ja(){return this.uO}mR(){return this.cO}get OR(){return this.FR()}FR(){return this.lO}lI(){return this.Hl}_I(){return this.dO}fO(t){const e=this.gR;if(e===t)return;e.gy(this.FI);const i=QT(this),s=this.kR(),n=this.SI(),r=this.TI();this.gR=t,this.cO.vC=t.ht,this.dO.vC=t.rt,this.Hl.vC=t.nt,this.uO.vC=t.ja(),this.lO.vC=t.OR,void 0!==i&&Yc(this,i,this);const o=this.kR();o!==s&&this._o(new tk(o)),this.SI()!==n&&this._o(new ho),this.TI()!==r&&this._o(new ek),t.oy(this.FI)}async yn(){await super.yn(),this.uO.yn(),this.cO.yn(),this.dO.yn(),this.Hl.yn(),this.lO.yn()}constructor(t){super(t),this.cO=new qo,this.dO=new qo,this.Hl=new at,this.lO=new Xc,this.uO=new Vh(t.ja()),this.cO.vC=t.ht,this.dO.vC=t.rt,this.Hl.vC=t.nt,this.lO.vC=t.OR}};r();var rk=class extends nk{HR(){return function(t){let e=0,i=0,s=0,n=0,r=0,o=0,h=0;for(const a of t)e+=a._O,i+=a.vO,s+=a.mO,n+=a.gO,r+=a.pO,o+=a.wO.amountOfBufferedAudioSegments,h+=a.wO.amountOfBufferedVideoSegments;return{_O:e,vO:i,mO:s,gO:n,pO:r,wO:{amountOfBufferedAudioSegments:o,amountOfBufferedVideoSegments:h}}}(this.yO.map((t=>t.GR)))}RI(){return Rs(this.yO.map((t=>t.RI()))).then(Tt)}nr(){return Rs(this.yO.map((t=>t.nr()))).then(Tt)}kI(){if(!this.mo){for(const t of this.yO)t.kI();this.mo=!0}}pR(){const t=[];for(const e of this.yO)t.push(...e.pR());return t}LI(t){let e=!1;for(const i of this.yO)e=i.LI(t)||e;return e}_o(t){this.LI(t)||super._o(t)}get vC(){return this.gR}set vC(t){this.fO(t)}bO(t){this.yO.push(t)}AO(t){we(this.yO,t)}fO(t){if(t===this.gR)return;const e=this.gR;e.dr(),super.fO(t),t.pr(e)}NI(){for(const t of this.yO)t.NI()}async yn(){this.Ro(),this.gR.dr();for(const t of this.yO)this.gR!==t&&await t.yn();await super.yn()}constructor(t){super(t),this.yO=[],this.mo=!1,this.SO=!1,this.bO(t)}};r();var ok=function(t){return t[t.ABORTED=1]="ABORTED",t[t.NETWORK=2]="NETWORK",t[t.DECODE=3]="DECODE",t[t.SRC_NOT_SUPPORTED=4]="SRC_NOT_SUPPORTED",t[t.ENCRYPTED=5]="ENCRYPTED",t[t.LICENSE_INVALID=6]="LICENSE_INVALID",t[t.ADVERTISEMENT_ERROR=7]="ADVERTISEMENT_ERROR",t}({}),hk=class extends tg{get name(){return"MediaError"}constructor(t,e,i,s){super(e),this.code=t,this.message=null!=e?e:"Unknown error",this.cause=i,this.systemCode=s,g.captureStackTrace&&g.captureStackTrace(this,this.constructor)}};function ak(t){GA(t,"MEDIA_ERR_ABORTED",1),GA(t,"MEDIA_ERR_NETWORK",2),GA(t,"MEDIA_ERR_DECODE",3),GA(t,"MEDIA_ERR_SRC_NOT_SUPPORTED",4),GA(t,"MEDIA_ERR_ENCRYPTED",5)}function gn(t){var e,i;return function(t){return t.category===Ye.CONTENT_PROTECTION}(t)?new hk(5,t.message,null==(e=t.cause)?void 0:e.message,t.systemCode):new hk(uk(t.code),t.message,null==(i=t.cause)?void 0:i.message)}function uk(t){if(t===Qa.MEDIA_ABORTED)return 1;if(t===Qa.MANIFEST_LOAD_ERROR||t===Qa.MEDIA_LOAD_ERROR||t===Qa.SUBTITLE_LOAD_ERROR)return 2;if(t===Qa.MEDIA_DECODE_ERROR)return 3;if(t===Qa.MEDIA_NOT_SUPPORTED)return 4;const e=Ye.fromCode(t);return e===Ye.NETWORK?2:e===Ye.SOURCE?4:e===Ye.LICENSE?6:e===Ye.CONTENT_PROTECTION?5:e===Ye.AD?7:3}function ck(t){return new A(lk(t.code),t.message,t)}function lk(t){switch(t){case 1:return Qa.MEDIA_ABORTED;case 2:return Qa.NETWORK_ERROR;case 3:return Qa.MEDIA_DECODE_ERROR;case 4:return Qa.SOURCE_NOT_SUPPORTED;case 5:return Qa.CONTENT_PROTECTION_ERROR;case 6:return Qa.LICENSE_ERROR;case 7:return Qa.AD_ERROR}}ak(hk),ak(hk.prototype),r(),r(),r(),r(),r();var Ke=class extends to{tt(t){return super.tt(t)}ka(){return eS(this)}};r(),r(),r(),r();var gl=class{get lC(){return this.TO}get V(){return this.TO.length}get wa(){return this.eu||(this.eu=function(t){const e=t.lC.map((t=>t.wa));return e.item=e=>{const i=0|e,s=t.fC(i);return s&&s.wa||void 0},e}(this)),this.eu}kO(t){this.TO.push(t),this.eu&&this.eu.push(t.wa)}eT(t){we(this.TO,t),this.eu&&we(this.eu,t.wa)}fC(t){return this.TO[t]}EO(t){return $c(t)?function(t,e){for(const i of e)if(!ms(t,i))return!1;return!0}(this.TO,t):ms(this.TO,t)}nr(){En(this.TO),this.eu&&En(this.eu)}constructor(){this.TO=[],this.eu=void 0}};r();var Zs=class extends en{ka(){return new dk(this.Ht.wa)}constructor(t){super(No.oC),this.Ht=t}},dk=class extends Un{constructor(t){super("update"),this.track=t}};r();var fk=0;function oi(){return fk++}var _k=0;var vk=0;function mk(){return vk++}var gk=0;function pk(){return gk++}var wk=0;var yk=class extends Co{get RC(){}get Rt(){return this.qe}set Rt(t){this.qe!==t&&(this.qe=t,this.xO=t,this._o(new bc(this)))}get xO(){return this.RO.enabled}set xO(t){this.RO.enabled=t}get wa(){return this.eu||(this.eu=yi(this)),this.eu}get o(){return this.zS}get IC(){return this.IO}get Lt(){return this.RO.kind}get Ch(){return this.CO}set Ch(t){t!==this.CO&&(this.CO=t,this._o(new Zs(this)))}get gs(){return this.RO.language}get CE(){return this.Rt?"enabled":"disabled"}get PO(){return this.RO}get NC(){return this.TO}get MC(){}set MC(t){}DO(t){this.Rt=t}MO(){this.Rt=this.xO}constructor(t){super(),this.Tw=ee.vE,this.qe=!1,this.eu=void 0,this.RO=t,this.IO=oi(),this.zS=wk+++"",this.CO=t.label,this.TO=new gl,this.MO()}};r();var bk=0;var Ak=class extends Co{get RC(){}get Rt(){return this.qe}set Rt(t){this.qe!==t&&(this.qe=t,this.xO=t,this._o(new bc(this)))}get xO(){return!!this.RO.selected}set xO(t){this.RO.selected=t}get wa(){return this.eu||(this.eu=yi(this)),this.eu}get o(){return this.zS}get IC(){return this.IO}get Lt(){return"main"}get Ch(){return this.CO}set Ch(t){t!==this.CO&&(this.CO=t,this._o(new Zs(this)))}get gs(){return this.RO.language}get CE(){return this.Rt?"enabled":"disabled"}get PO(){return this.RO}get NC(){return this.TO}get MC(){}set MC(t){}MO(){this.Rt=this.xO}DO(t){this.Rt=t}constructor(t){super(),this.Tw=ee.mE,this.qe=!1,this.eu=void 0,this.RO=t,this.IO=oi(),this.zS=bk+++"",this.TO=new gl,this.CO=t.label,this.MO()}};r();var Sk=class extends pe{constructor(t){super(Ti.wy),this.WR=t}};r(),r();var Zu=function(t){return t[t.NONE=0]="NONE",t[t.LOADING=1]="LOADING",t[t.LOADED=2]="LOADED",t[t.ERROR=3]="ERROR",t}({});r(),r();var Tk=function(t){return t.LO="cue",t.BO="region",t.OO="stylesheet",t}({});r(),r();var kk={"line-left":"start",center:"middle","line-right":"end"},Ek={start:"line-left",middle:"center",end:"line-right"};function xk(t,e){if("auto"===t)switch(e){case"start":case"left":return"line-left";case"end":case"right":return"line-right";default:return"center"}return t}function Rk(t,e){if("auto"===t)switch(e){case"left":return 0;case"right":return 100;default:return 50}return function(t,e){const i="number"==typeof t?t:C(t);return S(i)?e:i}(t,50)}r(),r(),r();var Ct=function(t){return t.rO="vo",t.oO="xo",t.oC="ir",t}({}),yl=class extends en{constructor(t,e){super(t),this.FO=e}},bl=class extends Un{constructor(t,e){super(t),this.cue=e}};function Ut(t){const e=[Ct.rO,Ct.oO,Ct.oC];let i;const s={get VO(){return t},get track(){return t.Ht.wa},get id(){return t.o},get uid(){return t.IC},get startTime(){return t.WO},set startTime(e){t.WO=e},get endTime(){return t.UO},set endTime(e){t.UO=e},get content(){return t.U},addEventListener(t,e){const s=Hu(t,hs);i.bn(s,e)},removeEventListener(t,e){const s=Hu(t,hs);i.vn(s,e)}};return i=new og(s),t.bn(e,(t=>i._o(t.wa))),s}function Ik(){}function Ck(t){return Jr(Ut(t),{get align(){return t.GO},get line(){return t.HO},get lineAlign(){return t.ZO},get position(){return t.fo},get positionAlign(){return t.XO},get region(){return t.zO?t.zO.wa:null},get size(){return t.Nb},get snapToLines(){return t.qO},get text(){return t.U},get vertical(){return t.Pt}})}r(),r();var Oi=class extends yl{ka(){return new Pk(this.FO.wa)}constructor(t){super(Ct.oC,t)}},Pk=class extends bl{constructor(t){super("update",t)}};r();var ml=class extends en{ka(){return new Dk(this.FO.wa)}constructor(t){super(No.qI),this.FO=t}},Dk=class extends Un{constructor(t){super("updatecue"),this.cue=t}},Nk=.02;function Mk(t,e){return _s(t.YO,e.YO,Nk)&&_s(t.KO,e.KO,Nk)&&t.o===e.o}var Le=class extends Co{get WO(){return this.jO}set WO(t){var e,i;this.jO!==t&&(this.jO=t,null==(e=this.QO)||e.JO(this),this._o(new Oi(this)),null==(i=this.QO)||i._o(new ml(this)))}get UO(){return this.$O}set UO(t){var e,i;this.$O!==t&&(this.$O=t,null==(e=this.QO)||e.JO(this),this._o(new Oi(this)),null==(i=this.QO)||i._o(new ml(this)))}get o(){return this.zS}get IC(){return this.IO}get wa(){return this.eu||(this.eu=this.ka()),this.eu}ka(){return Ut(this)}get so(){return this.eo}set so(t){this.eo=t}get Ht(){return this.QO}set Ht(t){this.QO=t}get U(){return this.tF}set U(t){var e;this.tF!==t&&(this.tF=t,this._o(new Oi(this)),null==(e=this.QO)||e._o(new ml(this)))}get eF(){return this.iF}set eF(t){this.iF=t}sF(t){return this===t||XA(this,t)&&Mk(this,t)&&this.nF(t)}nF(t){return Ai(this.U,t.U)}rF(t,e){this.jO=t,this.$O=e,this.YO=t,this.KO=e}yn(){this.Ro()}constructor(t,e,i,s,n){super(),this.eu=void 0,this.QO=void 0,this.eo=!1,this.oF=-1,this.IO=pk(),this.jO=t,this.$O=e,this.YO=t,this.KO=e,this.tF=i,this.iF=Boolean(s),this.zS=null!=n?n:""}};function Lk(t,e){return t.U===e.U&&t.HO===e.HO&&t.ZO===e.ZO&&t.fo===e.fo&&t.XO===e.XO&&t.zO===e.zO&&t.qO===e.qO&&t.Nb===e.Nb&&t.GO===e.GO&&t.Pt===e.Pt}var Bk=class extends Le{get wa(){return this.eu||(this.eu=Ck(this)),this.eu}get Tw(){return Tk.LO}nF(t){return Lk(this,t)}constructor(t,e,i,s,n){super(t,e,i,s,n),this.HO="auto",this.ZO="start",this.fo="auto",this.XO="auto",this.zO=void 0,this.qO=!0,this.Nb=100,this.GO="center",this.Pt=""}};function Ok(t){const e=t.HO,i=Ad(e);return i&&!t.qO&&(e<0||e>100)?100:i?Number(e):t.qO?-1:100}function Fk(t){return Rk(t.fo,t.GO)}function Vk(t){return xk(t.XO,t.GO)}function Wk(t){const e=Vk(t),i=Fk(t);let s;switch(e){case"line-left":s=100-i;break;case"line-right":s=i;break;case"center":s=i<=50?2*i:2*(100-i)}return _.min(t.Nb,s)}function Uk(t){return{get id(){return t.o},get identifier(){return t.o},get lines(){return t.hF},get regionAnchorX(){return t.aF},get regionAnchorY(){return t.uF},get scrollValue(){return t.cF},get viewportAnchorX(){return t.lF},get viewportAnchorY(){return t.dF},get width(){return t.ji}}}r(),r();var Gk=class{get wa(){return this.eu||(this.eu=Uk(this)),this.eu}get Tw(){return Tk.BO}constructor(t,e,i,s,n,r,o,h){this.o=t,this.ji=e,this.hF=i,this.aF=s,this.uF=n,this.lF=r,this.dF=o,this.cF=h}};r(),r();var Hk=1e6,Zk=class{fF(t){return this._F()*t}vF(t){return this.mF(t)>0}gF(t){return this.mF(t)>=0}pF(t,e){return this.yF(t).wF(e)}sF(t){return 0===this.mF(t)}bF(t){return this.mF(t)<0}wF(t){return this.mF(t)<=0}AF(){return this.SF()?this.TF():this}kF(t){return this.kO(t.TF())}yF(t){return this.kF(t).AF()}};function Xk(t,e){return t.EF()?e.EF()?Pc.eh:Pc.Bw:e.EF()?Pc.Ow:t.xF()?e.xF()&&t.SF()===e.SF()?Pc.eh:t.SF()?Pc.Ow:Pc.Bw:e.SF()?Pc.Bw:Pc.Ow}r(),r();var zk=4294967296,qk=zk*zk,Yk=qk*qk,Kk=Yk/2,mi=class t{static RF(e,i,s){return s?new t(e.toUnsigned(),i.toUnsigned()):new t(e.toSigned(),i.toSigned())}static IF(e){return e.unsigned?new t(e,vo.UZERO):new t(e,e.isNegative()?vo.NEG_ONE:vo.ZERO)}static CF(e,i){if(S(e))return i?t.PF:t.DF;if(i){if(e<0)return t.PF;if(e>=Yk)return t.NF}else{if(e<=-Kk)return t.MF;if(e+1>=Kk)return t.LF}return e<0?t.CF(-e,i).TF():t.RF(vo.fromNumber(e%qk),vo.fromNumber(e/qk),i)}BF(){return this.OF.unsigned}FF(){return this.VF.isZero()&&this.OF.isZero()}SF(){return this.OF.isNegative()}WF(){return this.BF()?t.RF(this.VF,this.OF,!1):this}UF(){return this.BF()?this:t.RF(this.VF,this.OF,!0)}GF(){return this.VF}_F(){return this.SF()?-this.TF()._F():this.OF.toNumber()*qk+this.VF.toUnsigned().toNumber()}HF(){return this.VF.toInt()}sF(t){return(this.BF()===t.BF()||this.OF.getHighBits()>>>31!=1||t.OF.getHighBits()>>>31!=1)&&(this.OF.toUnsigned().eq(t.OF.toUnsigned())&&this.VF.toUnsigned().eq(t.VF.toUnsigned()))}mF(t){if(this.sF(t))return Pc.eh;const e=this.SF(),i=t.SF();if(e&&!i)return Pc.Ow;if(!e&&i)return Pc.Bw;if(!this.BF())return this.kF(t).SF()?Pc.Ow:Pc.Bw;const s=this.UF(),n=t.UF(),r=n.OF.comp(s.OF);return r>0||0===r&&n.VF.gt(s.VF)?Pc.Ow:Pc.Bw}bF(t){return this.mF(t)<0}wF(t){return this.mF(t)<=0}ZF(t){return this.mF(t)>0}XF(t){return this.mF(t)>=0}zF(){return new t(this.VF.not(),this.OF.not())}qF(e){return new t(this.VF.and(e.VF),this.OF.and(e.OF))}YF(e){return new t(this.VF.or(e.VF),this.OF.or(e.OF))}KF(e){const i=127&e;return 0===i?this:i<64?t.RF(this.VF.shl(i),this.OF.shl(i).or(this.VF.shru(64-i)),this.BF()):t.RF(vo.ZERO,this.VF.shl(i-64),this.BF())}jF(e){const i=127&e;return 0===i?this:i<64?t.RF(this.VF.shru(i).or(this.OF.shl(64-i)),this.OF.shr(i),this.BF()):t.RF(this.OF.shr(i-64),this.OF.isNegative()?vo.NEG_ONE:vo.ZERO,this.BF())}QF(e){const i=127&e;return 0===i?this:i<64?t.RF(this.VF.shru(i).or(this.OF.shl(64-i)),this.OF.shru(i),this.BF()):64===i?t.RF(this.OF,vo.ZERO,this.BF()):t.RF(this.OF.shru(i-64),vo.ZERO,this.BF())}kO(e){const i=this.OF.high>>>16,s=65535&this.OF.high,n=this.OF.low>>>16,r=65535&this.OF.low,o=this.VF.high>>>16,h=65535&this.VF.high,a=this.VF.low>>>16,u=65535&this.VF.low,c=e.OF.high>>>16,l=65535&e.OF.high,d=e.OF.low>>>16,f=65535&e.OF.low,_=e.VF.high>>>16,v=65535&e.VF.high,m=e.VF.low>>>16;let g=0,p=0,w=0,y=0,b=0,A=0,S=0,T=0;T+=u+(65535&e.VF.low),S+=T>>>16,T&=65535,S+=a+m,A+=S>>>16,S&=65535,A+=h+v,b+=A>>>16,A&=65535,b+=o+_,y+=b>>>16,b&=65535,y+=r+f,w+=y>>>16,y&=65535,w+=n+d,p+=w>>>16,w&=65535,p+=s+l,g+=p>>>16,p&=65535,g+=i+c,g&=65535;const k=this.BF(),E=vo.fromBits(w<<16|y,g<<16|p,k),x=vo.fromBits(S<<16|T,b<<16|A,k);return t.RF(x,E,k)}kF(t){return this.kO(t.TF())}TF(){return this.zF().kO(t.JF)}tV(e){if(this.FF()||e.FF())return this.BF()?t.PF:t.DF;if(this.SF())return e.SF()?this.TF().tV(e.TF()):this.TF().tV(e).TF();if(e.SF())return this.tV(e.TF()).TF();if(this.OF.isZero()&&0===this.VF.high&&e.OF.isZero()&&0===e.VF.high)return t.IF(this.VF.multiply(e.VF));const i=vo.fromBits(4294967295,0,!0),s=this.VF.and(i),n=this.VF.shru(32),r=this.OF.and(i),o=this.OF.shru(32),h=e.VF.and(i),a=e.VF.shru(32),u=e.OF.and(i),c=e.OF.shru(32);let l=vo.UZERO,d=vo.UZERO,f=vo.UZERO,_=vo.UZERO;l=l.add(s.mul(h)),d=d.add(l.shru(32)),l=l.and(i),d=d.add(n.mul(h)),f=f.add(d.shru(32)),d=d.and(i),d=d.add(s.mul(a)),f=f.add(d.shru(32)),d=d.and(i),f=f.add(r.mul(h)),_=_.add(f.shru(32)),f=f.and(i),f=f.add(n.mul(a)),_=_.add(f.shru(32)),f=f.and(i),f=f.add(s.mul(u)),_=_.add(f.shru(32)),f=f.and(i),_=_.add(o.mul(h)).add(r.mul(a)).add(n.mul(u)).add(s.mul(c)).and(i);const v=vo.fromBits(l.getLowBitsUnsigned(),d.getLowBitsUnsigned(),!0),m=vo.fromBits(f.getLowBitsUnsigned(),_.getLowBitsUnsigned(),!0);return t.RF(v,m,this.BF())}eV(e){let i,s,n=e;if(n.FF())throw new RangeError("division by zero");if(this.FF())return this.BF()?[t.PF,t.PF]:[t.DF,t.DF];if(this.BF()){if(n.BF()||(n=n.UF()),n.ZF(this))return[t.PF,this];if(n.ZF(this.QF(1)))return s=t.iV,i=this.kF(n),[s,i];s=t.PF}else{if(this.sF(t.MF)){if(n.sF(t.JF)||n.sF(t.sV))return[t.MF,t.DF];if(n.sF(t.MF))return[t.JF,t.DF];{const e=this.jF(1).nV(n).KF(1);return e.sF(t.DF)?s=n.SF()?t.JF:t.sV:(i=this.kF(n.tV(e)),s=e.kO(i.nV(n))),i=this.kF(n.tV(s)),[s,i]}}if(n.sF(t.MF))return this.BF()?[t.PF,this]:[t.DF,this];if(this.SF())return n.SF()?this.TF().eV(n.TF()):([s,i]=this.TF().eV(n),[s.TF(),i.TF()]);if(n.SF())return[s,i]=this.eV(n.TF()),[s.TF(),i.TF()];s=t.DF}for(i=this;i.XF(n);){let e=_.max(1,_.floor(i._F()/n._F()));const r=_.ceil(_.log(e)/_.LN2),o=r<=48?1:2**(r-48);let h=t.CF(e),a=h.tV(n);for(;a.SF()||a.ZF(i);)e-=o,h=t.CF(e,this.BF()),a=h.tV(n);h.FF()&&(h=t.JF),s=s.kO(h),i=i.kF(a)}return[s,i]}nV(t){return this.eV(t)[0]}rV(t){return this.eV(t)[1]}toString(e){const i=e||10;if(i<2||i>36)throw new RangeError("radix");if(this.FF())return"0";if(this.SF()){if(this.sF(t.MF)){const e=t.CF(i),s=this.nV(e),n=s.tV(e).kF(this);return s.toString(i)+n.HF().toString(i)}return"-"+this.TF().toString(i)}const s=t.CF(i**6,this.BF());let n=this,r="";for(;;){const t=n.nV(s);let e=(n.kF(t.tV(s)).HF()>>>0).toString(i);if(n=t,n.FF())return e+r;for(;e.length<6;)e="0"+e;r=String(e)+r}}constructor(t,e){this.VF=t,this.OF=e}};mi.DF=mi.IF(vo.ZERO),mi.PF=mi.IF(vo.UZERO),mi.JF=mi.IF(vo.ONE),mi.iV=mi.IF(vo.UONE),mi.sV=mi.IF(vo.NEG_ONE),mi.LF=mi.RF(vo.NEG_ONE,vo.MAX_VALUE,!1),mi.NF=mi.RF(vo.MAX_UNSIGNED_VALUE,vo.MAX_UNSIGNED_VALUE,!0),mi.MF=mi.RF(vo.ZERO,vo.MIN_VALUE,!1),r();var Dn=class t{get xF(){return!isFinite(this.oV)}get od(){return this.oV/this.mN}static hV(e){return new t(_.ceil(e.oV),e.mN)}static aV(e){return new t(_.floor(e.oV),e.mN)}static uV(t,e){return t.gF(e)?t:e}static cV(t,e){return t.wF(e)?t:e}kO(e){return this.mN>=e.mN?new t(this.oV+e.lV(this.mN).oV,this.mN):new t(this.lV(e.mN).oV+e.oV,e.mN)}vF(t){return t.bF(this)}gF(t){return t.wF(this)}yF(e){if(this.mN>=e.mN){const i=_.abs(this.oV-e.lV(this.mN).oV),s=this.mN;return new t(i,s)}return e.yF(this)}pF(t,e){return this.yF(t).wF(e)}mF(t){return function(t,e){return t.mN>=e.mN?Wm(t.oV,e.lV(t.mN).oV):Wm(t.lV(e.mN).oV,e.oV)}(this,t)}sF(t){return 0===this.mF(t)}bF(t){return this.mF(t)<0}wF(t){return this.mF(t)<=0}lV(e){return new t(this.oV*(e/this.mN),e)}kF(e){return this.mN>=e.mN?new t(this.oV-e.lV(this.mN).oV,this.mN):new t(this.lV(e.mN).oV-e.oV,e.mN)}dV(e){return new t(this.oV*e,this.mN)}constructor(t,e=1){this.oV=t,this.mN=e}};Dn.ad=new Dn(1/6,1),Dn.DF=new Dn(0),Dn.fV=new Dn(1/0),Dn._V=1e6;var Q=class t extends Zk{static vV(e,i){return void 0===i&&(i=Hk),t.CF(e*i,i)}static CF(e,i){return S(e)?t.mV:e===1/0?t.gV:e===-1/0?t.pV:new t(vo.fromNumber(e),i)}static IF(e,i){return new t(e,i)}static wV(e){return t.vV(e.od,Hk)}static yV(e){return new t(vo.fromNumber(e.getTime()),1e3)}static uV(t,e){return t.gF(e)?t:e}static cV(t,e){return t.wF(e)?t:e}static bV(e,i,s){return t.uV(i,t.cV(s,e))}SF(){return this.Mx.isNegative()}FF(){return 0!==this.mN&&this.Mx.isZero()}xF(){return 0===this.mN&&!this.Mx.isZero()}EF(){return 0===this.mN&&this.Mx.isZero()}_F(){if(0===this.mN)return this.Mx.isZero()?NaN:this.Mx.isNegative()?-1/0:1/0;const t=this.Mx.divide(this.mN),e=this.Mx.subtract(t.multiply(this.mN));return t.toNumber()+e.toNumber()/this.mN}GF(){if(0===this.mN)throw new g("Failed to convert timestamp");return this.Mx}AV(){return new Date(0===this.mN?NaN:this.lV(1e3).Mx.toNumber())}SV(){return new Dn(0===this.mN?this._F():this.Mx.toNumber(),this.mN)}lV(e,i){void 0===i&&(i=et.TV);const s=this.mN;if(s===e)return this;if(0===s)return this;const n=vf(s,e),r=function(t,e,i){const[s,n]=t.eV(e);if(n.FF())return s;if(i===et.TV)return n.SF()?s.kF(mi.JF):s;if(i===et.kV)return n.SF()?s:s.kO(mi.JF);{const t=n.tV(mi.CF(2));return t.SF()?t.TF().bF(e)?s:s.kF(mi.JF):t.bF(e)?s:s.kO(mi.JF)}}(mi.IF(this.Mx).tV(mi.CF(e/n)),mi.CF(s/n),i);return new t(r.GF(),e)}mF(t){if(this===t)return Pc.eh;if(0===this.mN||0===t.mN)return Xk(this,t);if(this.FF())return t.FF()?Pc.eh:t.SF()?Pc.Bw:Pc.Ow;if(t.FF())return this.SF()?Pc.Ow:Pc.Bw;const e=_.min(this.mN,t.mN),i=this.lV(e,et.EV).Mx,s=t.lV(e,et.EV).Mx;return i.compare(s)}TF(){return 0===this.mN?function(t){0;return t.EF()?t:t.SF()?Q.gV:Q.pV}(this):new t(this.Mx.negate(),this.mN)}kO(e){if(0===this.mN||0===e.mN)return function(t,e){0;if(t.EF()||e.EF())return Q.mV;if(t.xF()&&e.xF())return t.SF()===e.SF()?t:Q.mV;return t.xF()?t:e}(this,e);if(this.FF())return e;if(e.FF())return this;const i=_.max(this.mN,e.mN),s=this.lV(i,et.EV),n=e.lV(i,et.EV);return new t(s.Mx.add(n.Mx),i)}tV(e){if(this.EF()||S(e))return t.mV;if(this.xF()||!isFinite(e)){if(this.FF()||0===e)return t.mV;{const i=this.SF()?t.pV:t.gV;return e<0?i.TF():i}}return this.FF()?this:new t(0===e?vo.ZERO:this.Mx.multiply(e),this.mN)}nV(e){if(this.EF()||S(e))return t.mV;if(this.xF())return isFinite(e)?0===e?1/e<0?this.TF():this:e<0?this.TF():this:t.mV;if(!isFinite(e))return new t(vo.ZERO,this.mN);if(this.FF())return 0===e?t.mV:new t(vo.ZERO,this.mN);if(0===e){const i=this.SF()?t.pV:t.gV;return 1/e<0?i.TF():i}return new t(this.Mx.divide(e),this.mN)}xV(){return[this.Mx.low,this.Mx.high,this.mN]}constructor(t,e){super(),this.Mx=t.toSigned(),this.mN=e>>>0}};Q.DF=new Q(vo.ZERO,Hk),Q.mV=new Q(vo.ZERO,0),Q.gV=new Q(vo.ONE,0),Q.pV=new Q(vo.NEG_ONE,0),r();var jk=class t extends Zk{static vV(e,i){return void 0===i&&(i=Hk),t.CF(e*i,i)}static CF(e,i){return S(e)?t.mV:e===1/0?t.gV:e===-1/0?t.pV:new t(BigInt(_.floor(e)),i)}static IF(e,i){return new t(BigInt(e.high)<<BigInt(32)|BigInt(e.low>>>0),i)}static wV(e){return t.vV(e.od,Hk)}static yV(e){return t.CF(e.getTime(),1e3)}static get DF(){return t.RV||(t.RV=new t(BigInt(0),Hk)),t.RV}static get mV(){return t.CV||(t.CV=new t(BigInt(0),0)),t.CV}static get gV(){return t.PV||(t.PV=new t(BigInt(1),0)),t.PV}static get pV(){return t.DV||(t.DV=new t(BigInt(-1),0)),t.DV}static uV(t,e){return t.gF(e)?t:e}static cV(t,e){return t.wF(e)?t:e}static bV(e,i,s){return t.uV(i,t.cV(s,e))}SF(){return this.Mx<BigInt(0)}FF(){return 0!==this.mN&&this.Mx===BigInt(0)}xF(){return 0===this.mN&&this.Mx!==BigInt(0)}EF(){return 0===this.mN&&this.Mx===BigInt(0)}_F(){if(0===this.mN)return this.Mx===BigInt(0)?NaN:this.Mx<BigInt(0)?-1/0:1/0;const t=this.Mx/BigInt(this.mN),e=this.Mx-t*BigInt(this.mN);return Number(t)+Number(e)/this.mN}GF(){if(0===this.mN)throw new g("Failed to convert timestamp");return this.NV()}NV(){const t=this.Mx&BigInt(4294967295),e=this.Mx>>BigInt(32)&BigInt(4294967295);return vo.fromBits(Number(t),Number(e))}AV(){return new Date(0===this.mN?NaN:Number(this.lV(1e3).Mx))}SV(){return new Dn(0===this.mN?this._F():Number(this.Mx),this.mN)}lV(e,i){void 0===i&&(i=et.TV);const s=this.mN;if(s===e)return this;if(0===s)return this;const n=vf(s,e),r=function(t,e,i){const s=t/e,n=t-s*e;if(n===BigInt(0))return s;if(i===et.TV)return n<BigInt(0)?s-BigInt(1):s;if(i===et.kV)return n<BigInt(0)?s:s+BigInt(1);{const t=n*BigInt(2);return t<BigInt(0)?-t<e?s:s-BigInt(1):t<e?s:s+BigInt(1)}}(this.Mx*BigInt(e/n),BigInt(s/n),i);return new t(r,e)}mF(t){if(this===t)return Pc.eh;if(0===this.mN||0===t.mN)return Xk(this,t);if(this.FF())return t.FF()?Pc.eh:t.SF()?Pc.Bw:Pc.Ow;if(t.FF())return this.SF()?Pc.Ow:Pc.Bw;const e=_.min(this.mN,t.mN),i=this.lV(e,et.EV).Mx,s=t.lV(e,et.EV).Mx;return i>s?Pc.Bw:i<s?Pc.Ow:Pc.eh}TF(){return 0===this.mN?function(t){0;return t.EF()?t:t.SF()?jk.gV:jk.pV}(this):new t(-this.Mx,this.mN)}kO(e){if(0===this.mN||0===e.mN)return function(t,e){0;if(t.EF()||e.EF())return jk.mV;if(t.xF()&&e.xF())return t.SF()===e.SF()?t:jk.mV;return t.xF()?t:e}(this,e);if(this.FF())return e;if(e.FF())return this;const i=_.max(this.mN,e.mN),s=this.lV(i,et.EV),n=e.lV(i,et.EV);return new t(s.Mx+n.Mx,i)}tV(e){if(this.EF()||S(e))return t.mV;if(this.xF()||!isFinite(e)){if(this.FF()||0===e)return t.mV;{const i=this.SF()?t.pV:t.gV;return e<0?i.TF():i}}return this.FF()?this:new t(0===e?BigInt(0):this.Mx*BigInt(e),this.mN)}nV(e){if(this.EF()||S(e))return t.mV;if(this.xF())return isFinite(e)?0===e?1/e<0?this.TF():this:e<0?this.TF():this:t.mV;if(!isFinite(e))return new t(BigInt(0),this.mN);if(this.FF())return 0===e?t.mV:new t(BigInt(0),this.mN);if(0===e){const i=this.SF()?t.pV:t.gV;return 1/e<0?i.TF():i}return new t(this.Mx/BigInt(e),this.mN)}xV(){const t=this.NV();return[t.low,t.high,this.mN]}constructor(t,e){super(),this.Mx=BigInt.asIntN(64,t),this.mN=e>>>0}};jk.RV=void 0,jk.CV=void 0,jk.PV=void 0,jk.DV=void 0;var et=function(t){return t[t.TV=0]="TV",t[t.kV=1]="kV",t[t.EV=2]="EV",t}({}),H=function(){try{return"function"==typeof BigInt&&"bigint"==typeof BigInt(0)}catch(t){return!1}}()?jk:Q;function Qk(t,e){return t.mF(e)}function Jk(t,e){return void 0!==t?void 0!==e?H.cV(t,e):t:e}r();var $k=9e4,tE=sl((()=>H.CF(8589934592,$k))),eE=sl((()=>tE().nV(2)));r();var iE={MV:0,LV:1/0,BV:0},sE=6,nE=["WEBVTT","WEBVTT ","WEBVTT\t","WEBVTT\n"],rE=[" ","\t","\n","\f","\r"],oE=/^\d*$/,hE=/.*[0-9]+.*/,aE=/^[\d.-]+$/,uE=/(^\.|\.$)/,cE=/(\D\.|\.\D)/;function lE(t,e,i){void 0===e&&(e=iE),void 0===i&&(i=!0);return dE(Kg(ra(t),new Ri),e,i)}function dE(t,e,i){void 0===e&&(e=iE),void 0===i&&(i=!0);const s={L:[],OV:[],FV:[]},n=fE(t),r=new Ri;if(kE(n),_E(n,(t=>"\n"!==t),r),r.nc>=n.length)return s;if(r.xb(1),"\n"!==n.charAt(r.nc)){wE(vE(n,r,false,!0,s,e,i),s)}else r.xb(1);for(_E(n,(t=>"\n"===t),r);r.nc<n.length;){wE(vE(n,r,false,!1,s,e,i),s),_E(n,(t=>"\n"===t),r)}return s}function fE(t){const e=Sm(t,"\0"," "),i=Sm(e,"\r\n","\n");return Sm(i,"\r","\n")}function _E(t,e,i){const s=i.nc;for(;i.nc<t.length&&e(t.charAt(i.nc));)i.xb(1);return t.substring(s,i.nc)}function vE(t,e,i,s,n,r,o){let h,a=0,u=e.nc,c="",l=!1,d=!1,f=null,_=null,v=null;for(;!l;)if(h=_E(t,(t=>"\n"!==t),e),a++,e.nc>=t.length?l=!0:e.xb(1),Ga(h,"--\x3e")){if(s||1!==a&&(2!==a||d)){e.Rb(u);break}d=!0,u=e.nc,f=new Bk(0,0,"",!1,c);try{yE(h,n.OV,f,r,o),c=""}catch(t){Ms.Vp(t),f=null}}else{if(""===h)break;s&&Cl(h,"X-TIMESTAMP-MAP")&&(n.VV=mE(h)),s||2!==a||i||(lh("STYLE",c.replace(/ /g,""))?(_={Tw:Tk.OO},c=""):lh("REGION",c.replace(/ /g,""))&&(v=new Gk("",100,3,0,100,0,100,""),c="")),c&&(c+="\n"),c+=h,u=e.nc}if(f)return f.U=c,f;if(_);else if(v)return function(t,e){const i=t.split(/\s/),s=":";for(const t of i)if(0!==t.length&&Ga(t,s)&&t.charAt(0)!==s&&t.charAt(t.length-1)!==s){const i=t.indexOf(s),n=t.substring(0,i),r=t.substring(i+1,t.length);switch(n.toUpperCase()){case"ID":OE(r,e);break;case"WIDTH":WE(r,e);break;case"LINES":VE(r,e);break;case"REGIONANCHOR":{const t=BE(r);t&&(e.aF=t[0],e.uF=t[1]);break}case"VIEWPORTANCHOR":{const t=BE(r);t&&(e.lF=t[0],e.dF=t[1]);break}case"SCROLL":FE(r,e)}}}(c,v),v;return null}function mE(t){const e=t.split("=")[1].trim().split(","),i=pE(e[0].trim(),"MPEGTS")?e[0]:e[1],s=pE(e[0].trim(),"LOCAL")?e[0]:e[1];var n;return{WV:gE(Number(i.split(/:(.*)/)[1].trim())||0),mh:H.vV(null!=(n=SE(s.split(/:(.*)/)[1].trim(),new Ri))?n:0)}}function gE(t){return H.CF(t,$k)}function pE(t,e){return Cl(t,e)}function wE(t,e){t&&function(t){return"cue"===t.Tw}(t)?e.L.push(t):t&&function(t){return"region"===t.Tw}(t)?e.OV.push(t):t&&function(t){return"stylesheet"===t.Tw}(t)&&e.FV.push(t)}function yE(t,e,i,s,n){const r=new Ri;xE(t,r);const o=bE(SE(t,r),s,n);if(xE(t,r),"--\x3e"!==t.substring(r.nc,r.nc+3))throw g("Something went wrong with parsing a WebVTT Cue");r.xb(3),xE(t,r);const h=bE(SE(t,r),s,n);i.rF(o,h);!function(t,e,i){const s=t.split(/\s/),n=":";for(const t of s)if(0!==t.length&&Ga(t,n)&&t.charAt(0)!==n&&t.charAt(t.length-1)!==n){const s=t.indexOf(n),r=t.substring(0,s),o=t.substring(s+1,t.length);switch(r.toUpperCase()){case"REGION":DE(o,e,i);break;case"VERTICAL":ME(o,e);break;case"D":LE(o,e);break;case"LINE":case"L":CE(o,e);break;case"POSITION":case"T":PE(o,e);break;case"SIZE":case"S":NE(o,e);break;case"ALIGN":case"A":IE(o,e)}}}(t.substring(r.nc,t.length),i,e)}function bE(t,e,i){return i?t+e.MV:t}function AE(t){return/^[0-9]$/.test(t)}function SE(t,e){const i=Sm(t,",",".");let s,n,r,o=!1;if(e.nc>=i.length||!AE(i.charAt(e.nc)))throw new g("Something went wrong with parsing a WebVTT Cue timestamp");const h=_E(i,AE,e),a=x(h,10);if((h.length>2||a>59)&&(o=!0),e.nc>=i.length||":"!==i.charAt(e.nc))throw new g("Something went wrong with parsing a WebVTT Cue timestamp");e.xb(1);const u=_E(i,AE,e);if(2!==u.length)throw new g("Something went wrong with parsing a WebVTT Cue timestamp");const c=x(u,10);if(o||e.nc<i.length&&":"===i.charAt(e.nc)){if(e.nc>=i.length||":"!==i.charAt(e.nc))throw new g("Something went wrong with parsing a WebVTT Cue timestamp");e.xb(1);const t=_E(i,AE,e);if(2!==u.length)throw new g("Something went wrong with parsing a WebVTT Cue timestamp");s=a,n=c,r=x(t,10)}else s=0,n=a,r=c;if(e.nc>=i.length||"."!==i.charAt(e.nc))throw new g("Something went wrong with parsing a WebVTT Cue timestamp");e.xb(1);const l=_E(i,AE,e),d=x(l,10);if(c>59||r>59)throw new g("Something went wrong with parsing a WebVTT Cue timestamp");return 60*s*60+60*n+r+d/1e3}function TE(t){return kE(fE(t))}function kE(t){if(t.length<sE)return!1;for(const e of nE)if(Cl(t,e))return!0;return!1}function EE(t){return ms(rE,t)}function xE(t,e){for(;e.nc<t.length&&EE(t.charAt(e.nc));)e.xb(1)}function RE(t){const e=t.lastIndexOf("%");if(e>-1){const i=C(t.substring(0,e));if(!S(i)&&i>=0&&i<=100)return i}return null}function IE(t,e){const i=t.toLowerCase();switch(i){case"start":case"center":case"end":case"left":case"right":e.GO=i;break;case"middle":e.GO="center"}}function CE(t,e){let i,s;const n=t.indexOf(",");if(n>=0?(i=t.substring(0,n),s=t.substring(n+1,t.length)):(i=t,s=""),!hE.test(i))return;let r,o;if(Tm(i,"%")){const t=RE(i);if(null===t)return;r=t,o=!1}else{if(!aE.test(i)||i.lastIndexOf("-")>0)return;const t=i.indexOf(".");if(t>=0&&(t!==i.lastIndexOf(".")||!cE.test(i)||uE.test(i)))return;if(r=C(i),S(r))return;o=!0}switch(e.HO=r,e.qO=o,s=s.toLowerCase(),s){case"start":case"center":case"end":e.ZO=s;break;case"middle":e.ZO="center"}}function PE(t,e){let i,s;const n=t.indexOf(",");n>=0?(i=t.substring(0,n),s=t.substring(n+1,t.length)):(i=t,s="");const r=RE(i);if(null!==r)switch(e.fo=r,s=s.toLowerCase(),s){case"line-left":case"center":case"line-right":case"auto":e.XO=s;break;case"start":e.XO="line-left";break;case"middle":e.XO="center";break;case"end":e.XO="line-right"}}function DE(t,e,i){const s=Hm(i,(e=>e.o===t));void 0!==s&&(e.zO=s)}function NE(t,e){const i=RE(t);null!==i&&(e.Nb=i)}function ME(t,e){switch(t.toLowerCase()){case"rl":case"vertical:rl":case"vertical-rl":e.Pt="rl";break;case"lr":case"vertical:lr":case"vertical-lr":e.Pt="lr";break;default:e.Pt=""}}function LE(t,e){"VERTICAL"===t.toUpperCase()?e.Pt="rl":"VERTICAL-LR"===t.toUpperCase()&&(e.Pt="lr")}function BE(t){if(t.indexOf(",")>=0){const e=RE(t.substring(0,t.indexOf(","))),i=RE(t.substring(t.indexOf(",")+1,t.length));return[Ns(e||0,0,100),Ns(i||100,0,100)]}return null}function OE(t,e){e.o=t}function FE(t,e){"up"===t.toLowerCase()&&(e.cF="up")}function VE(t,e){oE.test(t)&&(e.hF=x(t))}function WE(t,e){const i=RE(t);null!==i&&(e.ji=i)}function UE(t){return t&&"Hx"in t?t.Hx:t}r(),r(),r();var GE=class extends Le{get GV(){return this.HV}get ZV(){return this.XV}get OV(){return this.zV}get qV(){return this.YV}get wa(){return this.eu||(this.eu=function(t){return Jr(Ut(t),{get extent(){return t.GV},get styles(){return t.ZV},get regions(){return t.OV},get metadata(){return UE(t.qV)},get content(){return UE(t.U)}})}(this)),this.eu}nF(t){return!!Ai(this.GV,t.GV)&&(!!Ai(this.ZV,t.ZV)&&(!!Ai(this.OV,t.OV)&&(this.qV&&t.qV?!!this.qV.Lx(t.qV)&&(this.U&&t.U?this.U.Lx(t.U):this.U===t.U):this.qV===t.qV)))}constructor(t,e,i,s,n,r,o,h){super(t,e,i,s),this.HV=n,this.XV=r,this.zV=o,this.YV=h||void 0}};r();var HE=class{get KV(){return this.Nf.Bx(!0)}get WO(){return this.jV}get UO(){return this.QV}constructor(t,e,i){this.jV=t,this.QV=e,Uh(i)?this.Nf=function(t,e,i){for(const t of["begin","end","dur"])i.Kx(t);return i}(0,0,i):this.Nf=i}};r();var ZE="http://www.w3.org/XML/1998/namespace";function XE(t,e,i,s){let n=t.Gx(i,e);return 0===n.length&&(n=t.Wx(s+":"+e)),n}function zE(t){const e={};for(const i of t.Xx)e[i.Cx]=i.Mx;return e}var qE=/^(\d\d+):(\d\d):(\d+)((\.(\d+))?|(:(\d\d+)(\.(\d+))?))$/,YE=/^(\d+)(\.(\d+))?(h|m|s|ms|f|t)$/,KE="http://www.w3.org/ns/ttml";function jE(t,e,i,s){void 0===i&&(i=iE),void 0===s&&(s=au.APPLICATION_TTML_XML);let n=[];const r=ra(t);return s===au.APPLICATION_MP4?n=function(t,e,i){const s=nr.JD(t),n=dn(s,_t.fD);if(!n)return[];return $E(ra(n.Kk),e,i)}(r,e,i):s===au.APPLICATION_TTML_XML&&(n=$E(r,e,i)),n}function QE(t,e,i){return void 0===i&&(i=iE),tx(t,e,i)}function JE(t,e){const i=hx(e.KV),s={};for(const e of i)s[e]=t[e];return s}function $E(t,e,i){return tx(Kg(t,new Ri),e,i)}function tx(t,e,i){const s=[];let n;try{n=Ms.Ix(t)}catch(t){return s}const r=n.$x;if("tt"!==r.Cx)return s;const o=r.Gx(KE,"head")[0],h=r.Gx(KE,"body")[0];if(!h||!o)return s;const a=ix(r.qx("tts:extent")),u=a?{width:a[0],height:a[1]}:void 0,c=function(t){const e={},i=t.Gx(KE,"styling")[0],s=i&&i.Gx(KE,"style")||[];for(const t of s){e[t.Yx(ZE,"id")]=zE(t)}return e}(o),l=function(t){const e={},i=t.Gx(KE,"layout")[0],s=i&&i.Gx(KE,"region")||[];for(const t of s){const i=t.Yx(ZE,"id");if(!i)continue;e[i]=zE(t);const s=ox(t);for(const t in s)Sa.call(s,t)&&(e[i][t]=s[t])}return e}(o),d=a?function(t,e){const i=tu(t);for(const t of w.keys(i)){const s=ix(i[t].extent);if(s){const n=ex(s[0],e[0]),r=ex(s[1],e[1]);i[t].extent=n+" "+r}const n=ix(i[t].origin);if(n){const s=ex(n[0],e[0]),r=ex(n[1],e[1]);i[t].origin=s+" "+r}}return i}(l,a):l,f=o.Gx(KE,"metadata")[0],_=sx(h,i.MV,i.LV,i.BV);for(const t of _){const e=JE(d,t);s.push(new GE(t.WO,t.UO,t.KV,!1,u,c,e,f))}return s}function ex(t,e){return t/e*100+"%"}function ix(t){if(!t)return;const e=t.split(" ",2);if(2!==e.length)return;const[i,s]=e;if(!Tm(i,"px")||!Tm(s,"px"))return;return[Number(i.slice(0,-2)),Number(s.slice(0,-2))]}function sx(t,e,i,s){let n,r=e,o=i,h=[];const a=[];if(Uh(t)){var u,c;r=null!=(u=rx(t.qx("begin"),s))?u:r,n=rx(t.qx("dur"),0),o=null!=(c=rx(t.qx("end"),s))?c:void 0!==n?r+n:o;const e=t.Ox;for(let i=0;i<e.length;i++)("body"===t.Cx||"div"===t.Cx)&&e[i].Rx>1||(h=h.concat(sx(e[i],r,o,s)))}const l=function(t,e,i){const s=[];s.push(t,e);for(const t of i)s.push(t.WO,t.UO);s.sort(Xa);let n=s.length;for(let t=0;t<n-1;t++)s[t+1]===s[t]&&(uu(s,t+1),t--,n=s.length);return s}(r,o,h);for(let e=0;e<l.length-1;e++){const i=nx(l[e],l[e+1],h);if(i.length<=0&&ax(t)){const i=t.Bx(!1);a.push(new HE(l[e],l[e+1],i))}else if(i.length>0){const s=t.Bx(!1);i.forEach((t=>s.Zx(t.KV))),a.push(new HE(l[e],l[e+1],s))}}return a}function nx(t,e,i){const s=[];for(let n=0;n<i.length;n++){const r=i[n].WO,o=i[n].UO;(r>=t&&o<=e||r<e&&o>=e||r<t&&o>t)&&s.push(i[n])}return s}function rx(t,e){if(t){if(qE.test(t)){const i=qE.exec(t);if(!i)return;const s=Number(i[1])||0,n=Number(i[2])||0,r=Number(i[3])||0,o=i[6];return 3600*s+60*n+r+(o?Number(o)*.1**o.length:0)+e}if(YE.test(t)){const i=YE.exec(t);if(!i)return;const s=Number(i[1]);let n;switch(i[4]){case"h":n=3600*s;break;case"m":n=60*s;break;case"s":n=s;break;case"ms":n=.001*s;break;default:n=NaN}return n+e}}}function ox(t){const e={},i=t.Wx("style")||[];for(const t of i){const i=zE(t);for(const t in i)Sa.call(i,t)&&(e[t]=i[t])}return e}function hx(t){let e,i=[];if(Uh(t)){e=t.qx("region"),e&&i.push(e);const s=t.Ox;for(let t=0;t<s.length;t++)i=i.concat(hx(s[t]))}return i}function ax(t){if(Uh(t)){const e=t.Cx.toUpperCase(),i=Boolean(t.qx("smpte:backgroundImage"));return"BR"===e||i}return t.Rx===iu.Tk}function ux(t){const e=function(t){try{return Ms.Ix(t).$x}catch(t){}}(t);return"tt"===(null==e?void 0:e.Cx)}r(),r();var Wo=class extends to{tt(t){return super.tt(t)}it(t){const e=super.it(t);return e&&(t.CE=bh.Mh),e}ka(){return nS(this)}};r(),r();var Li=function(t){return t.JV="subtitles",t.$V="captions",t.tW="descriptions",t.Jn="chapters",t.eW="metadata",t.iW="thumbnails",t}({}),cx=["subtitles","captions","descriptions","chapters","metadata","thumbnails"];function lx(t){return"string"==typeof t&&ms(cx,t)}function dx(t,e){return!(!lx(t)||!lx(e))&&(t===e||"subtitles"===t&&"captions"===e||"captions"===t&&"subtitles"===e)}r();var fx=class extends A{constructor(t,e,i,s,n){super(t,e,n),this.url=i,this.status=s}};function _x(t){return t===Li.JV||t===Li.$V}function vx(t){return t.some(mx)}function mx(t){return Ga(t,"stpp")}function gx(t){return t.some(px)}function px(t){return Ga(t,"vtt")||Ga(t,"wvtt")}function wx(t,e){return Gh(t)&&gx(e)}function yx(t,e){return t===Li.iW||t===Li.eW&&e===Li.iW}function bx(t,e,i,s){for(const n of t.L.lC){if(n.WO>i)break;e<=n.UO&&!ms(s,n)&&s.push(n)}}function Ax(t,e){return gr(t.IC,e.IC)}function Sx(t,e,i,s){const n=function(t){switch(t){case Lr.WEBVTT:return"WebVTT";case Lr.SRT:return"SRT";case Lr.TTML:return"TTML";default:return""}}(t);return new fx(Qa.SUBTITLE_PARSE_ERROR,"Could not parse the "+(n?n+" ":"")+"subtitle file.",e,i,s)}function Vi(t,e){const i=[];for(const s of t.L.lC)if(s.UO<=e)i.push(s);else if(s.WO>=e)break;for(const e of i)t.sW(e)}function Tx(t,e){if(t.V>0){const i=t.Sn(0),s=_.max(0,i-10);for(const t of e)t.nW(s)}}var kx=class extends Co{tt(t){t.bn(No.da,this.rW),this.Z.tt(t),this.oW(t)}it(t){t.vn(No.da,this.rW),t.CE=bh.Mh,this.Z.it(t)}hW(t){}aW(t){}oW(t){t.CE!==bh.Mh?this.hW(t):this.aW(t)}uW(){for(const t of this.Z.lC)t.vn(No.da,this.rW),t.yn()}nW(t){if(t>0)for(const e of this.Z.lC)Vi(e,t)}nr(){return this.uW(),this.Z.nr(),Promise.resolve()}async yn(){this.Ro(),await this.nr(),this.Z.yn()}constructor(...t){super(...t),this.Z=new Wo,this.rW=t=>{const e=t.Ht;this.oW(e)}}};r();var Ex=class extends Ds{get error(){return this.errorObject.message}ka(){return this}constructor(t){super(yo.fa),this.errorObject=t}},xx=class extends kx{cW(t){if(!t.src)return;const e=t.kind||Li.JV,i=this.lW.OI(e,t.id,t.label,t.srclang,t.default);return i.VC=Ki(t.src),this.tt(i),i}async dW(t,e){t.rI=Zu.LOADING;const i=new wt({Xu:t.VC,jk:Rr.Tk,AE:xe.GET,Uw:e});let s,n;try{const t=await this.fW.Qk(i);n=t.Yk,s=await t.Ck()}catch(e){return th(e),t.rI=Zu.ERROR,void t._o(new Ex(function(t,e){let i=e,s=0;if(hA(t)&&t.name===Fc.GE)i=t.Qk.Xu;else if(aA(t)){const e=t.zE;if(i=e.eE,s=e.Yk,0===s)return new fx(Qa.SUBTITLE_CORS_ERROR,"Could not load the subtitle file. Make sure the source is set correctly and that CORS support is enabled.",i,s,t)}return new fx(Qa.SUBTITLE_LOAD_ERROR,"Could not load the subtitle file.",i,s,t)}(e,t.VC)))}try{const e=function(t){return TE(t)?Lr.WEBVTT:ux(t)?Lr.TTML:Lr.SRT}(s);t.Tw=e;let i=[];if(e===Lr.WEBVTT||e===Lr.SRT){i=dE(s).L}else e===Lr.TTML&&(i=QE(s,t));for(const e of i)t._W(e)}catch(e){return th(e),t.rI=Zu.ERROR,void t._o(new Ex(Sx(t.Tw,t.VC,n,e)))}t.rI=Zu.LOADED}hW(t){ms(this.Z.lC,t)&&t.rI===Zu.NONE&&this.dW(t,this.vW.Uw).catch(yu)}$n(){}async nr(){this.vW.jw(),this.vW=new da;for(const t of this.Z.lC)this.lW.mW(t);await super.nr()}constructor(t,e){super(),this.vW=new da,this.lW=t,this.fW=e}};function Rx(t,e){for(const i of t)if(i.Lt===e&&i.gW)return i}function Ix(t,e){Cx(Rx(t.lC,e))}function Cx(t){void 0!==t&&(t.CE=bh.Qn)}function Px(t,e){const i=Rx(t.lC,e)||function(t,e){for(const i of t)if(i.Lt===e)return i}(t.lC,e);Cx(i)}function Ji(t){for(const e of cx)e===Li.Jn?Px(t,e):Ix(t,e)}r(),r();var P=class extends pe{constructor(){super(Ti.jy)}};r(),r();var In=function(t){return t[t.pW=0]="pW",t[t.wW=1]="wW",t}({});r(),r();var za=class extends pe{constructor(t){super(Zc.WL),this.currentTime=t}};r();var ko=class extends pe{constructor(t){super(Zc.UL),this.currentTime=t}},Dx=[Zc.iC,Zc.UL,Ti.ho,Ti.zy],q=class extends Co{yW(t){!this.bW&&t>=Ht.Xn&&(this.bW=!0,this._o(new ZT(this.AW.ER,t)))}TW(t){!this.kW&&t>=Ht.iO&&(this.kW=!0,this._o(new XT(this.AW.ER,t)))}EW(t){this.xW||(t>=Ht.sO&&this.RW<Ht.sO&&!this.AW.KR||this.IW&&t>=Ht.sO)&&this._o(new ko(this.AW.ER))}PW(t){!this.DW(t)||this.AW.PR||this.AW.lt||this._o(new za(this.AW.ER))}NW(t){this.RW<=Ht.iO&&t>=Ht.sO&&this._o(new ro(this.AW.ER,t))}maybeDispatchCanPlayThroughEvent(t){t===Ht.nO&&this._o(new zT(this.AW.ER,t))}DW(t){const e=!this.AW.KR&&t<=Ht.iO,i=!this.MW&&this.RW<=Ht.iO;return e&&!i}get IW(){return!this.AW.KR&&this.MW}nr(){this.RW=Ht.eO,this.MW=!0,this.kW=!1,this.bW=!1}yn(){this.Ro(),this.xW&&this.AW.vn(Zc.UL,this.LW),this.AW.vn(Ti.ho,this.BW),this.AW.vn(Ti.zy,this.OW),this.AW.vn(Zc.iC,this.FW)}constructor(t,e=!1){super(),this.AW=t,this.xW=e,this.RW=Ht.eO,this.MW=!0,this.kW=!1,this.bW=!1,this.FW=t=>{const e=this.AW.rI;e!==this.RW&&this._o(new hu(t.currentTime,e)),e===Ht.eO&&(this.kW=!1,this.bW=!1),this.yW(e),this.TW(e),this.NW(e),this.maybeDispatchCanPlayThroughEvent(e),this.EW(e),this.PW(e),this.RW=e},this.BW=()=>{this.PW(this.RW),this.EW(this.RW),this.MW=this.AW.KR},this.OW=()=>{this.MW=this.AW.KR},this.LW=t=>{this._o(new ko(t.currentTime))},this.AW.bn(Zc.iC,this.FW),this.AW.bn(Ti.ho,this.BW),this.AW.bn(Ti.zy,this.OW),this.xW&&this.AW.bn(Zc.UL,this.LW)}},Nx=class extends Co{get ER(){return this.AW.ER}get PR(){return this.AW.PR}get lt(){return this.AW.lt}get KR(){return this.AW.KR}get rI(){return this.AW.rI}Xw(){this.Ro(),this.AW.vn(Dx,this.Ds)}constructor(t){super(),this.AW=t,this.AW.bn(Dx,this.Ds)}};r(),r(),r(),r();var Jo=class{VW(){return this.WW}UW(t){this.WW=t}get fR(){return this.fW}get GW(){return!1}get ZW(){const t=this.XW.certificate;if(t)return Yt(t)?ha(t):na(t)}zW(){return this.XW.licenseAcquisitionURL||this.VW()}get qW(){return!1}YW(t){return Promise.resolve()}KW(t,e){return Promise.resolve(void 0)}get xE(){return Boolean(this.XW.useCredentials)}async jW(t,e,i,s){const n=this.QW(t,e,i,s);if(""===n.Xu)throw new sr(Qa.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The license request URL has not been correctly configured.");try{const t=await this.fR.Qk(n);return await t.Pk(e)}catch(t){return th(t),void await this.JW(t,n.Xu,s)}}QW(t,e,i,s){const n=this.$W().Ek(),r=this.xE,o={Xu:this.tU(),jk:e,Jk:n,Lk:t,xE:r,AE:xe.POST,SE:0,Uw:s,Tw:Mr.oE,kE:i};return new wt(o)}eU(t,e){return Promise.resolve(t)}iU(t,e,i,s){return Promise.resolve(t)}$W(){return new ya(this.XW.headers||{})}async JW(t,e,i){throw new sr(Qa.CONTENT_PROTECTION_LICENSE_ERROR,"Error during license server request",t)}tU(t,e){let i=e;const s=this.XW.queryParameters;if(!i){const t=this.zW();if(!t)return"";i=t}if(s||t){const e=Ms.Ih(i);t&&Hb(e,t),s&&Hb(e,s),i=e.href}return i}sU(t,e){return Mx(t)}nU(t){return new j(t)}async rU(t,e,i){const s=await this.sU(t,i),n=await this.jW(s,this.oU,e,i);return this.nU(n)}yn(){}constructor(t,e,i,s,n){this.WW=void 0,this.cT=t,this.hU=e,this.aU=i,this.fW=s,this.oU=n,this.XW=this.uU(e)}};function Mx(t){return Promise.resolve(fc(t).buffer)}var fu=class extends Jo{uU(t){return t.widevine||{}}async cU(t,e){return this.ZW?this.ZW:this.lU(new j(t),e)}lU(t,e){return super.rU(t,xu.cE,e)}constructor(t,e,i,s){super(gm,t,e,i,s)}};r();var Lx=function(t){return t.ww="Widevine",t.dU="PlayreadyV2",t.fU="PlayreadyV3",t.pw="PlayreadyV2",t.Aw="Fairplay",t}({}),Bx={Widevine:{DRMProvider:"Google",DRMVersion:"1.4.8.86",DRMType:"Widevine"},PlayreadyV2:{DRMProvider:"Microsoft",DRMVersion:"2.9",DRMType:"Playready"},PlayreadyV3:{DRMProvider:"Microsoft",DRMVersion:"3",DRMType:"Playready"},Fairplay:{DRMProvider:"Apple",DRMType:"FairPlay",DRMVersion:"1.0"}};function Ox(t,e){var i,s,n,r;const o=Bx[e],h=t.accountName;return{CustomerName:t.customerName,AccountName:h,PortalId:t.portalId,FriendlyName:t.friendlyName,DeviceInfo:{FormatVersion:"1",DeviceType:"PC",OSType:null==(i=Ms.Jp)?void 0:i.Ys,OSVersion:null==(s=Ms.Jp)?void 0:s.lw,DRMProvider:o.DRMProvider,DRMVersion:o.DRMVersion,DRMType:o.DRMType,DeviceVendor:null==(n=Ms.Jp)?void 0:n.dw,DeviceModel:null==(r=Ms.Jp)?void 0:r.fw}}}function Fx(t,e){if(!t.accountName)throw new sr(Qa.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium "+e+" DRM configuration, accountName is not set.");if(!t.customerName)throw new sr(Qa.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium "+e+" DRM configuration, customerName is not set.");if(!t.portalId)throw new sr(Qa.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium "+e+" DRM configuration, portalId is not set.");throw new sr(Qa.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium "+e+" DRM configuration.")}function Vx(t,e,i){let s;if($S(t))s={AuthToken:t.authToken,Payload:e};else{if(!tT(t))throw Fx(t,i);s={LatensRegistration:Ox(t,i),Payload:e}}return kr(JSON.stringify(s))}async function Wx(t,e,i){const s=t.zE;if(!s)throw new sr(Qa.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Titanium server request",t,e);const n=s;let r,o;try{r=await n.Ik(i),o=function(t){if(t){if(t.WvProxyErr)return t.WvProxyErr.desc;if(t.DrmErr)return t.DrmErr.desc}return}(r)}catch(t){o=""}throw new sr(Qa.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Titanium server request",t,n.Qk.Xu,n.Yk,n.$k,o)}r();var Ux=class extends fu{static _U(){return Ms.Ys.sp?"required":"optional"}JW(t,e,i){return Wx(t,e,i)}YW(t){return this.vU?ou(this.vU.Ub,t):(this.vU=new os,Promise.resolve())}async sU(t,e){const i=this.hU;if(!i)throw new sr(Qa.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium Widevine DRM configuration.");return Vx(i,Nh(t),Lx.ww)}nU(t){let e;if(!t.license)throw new sr(Qa.CONTENT_PROTECTION_LICENSE_INVALID,"Could not process the response from the Titanium Widevine license server");return e=ha(t.license),e}mU(t){return Promise.resolve(new j(t))}async cU(t,e){this.gU();const i=await this.sU(t,e),s=await this.jW(i,Rr.bk,xu.lE,e);return await this.mU(s)}async lU(t,e){const i=await super.lU(t,e);return this.gU(),i}gU(){this.vU||(this.vU=new os),this.vU.Vb()}yn(){this.vU&&this.vU.jw(),super.yn()}constructor(t,e,i){super(t,e,i,Rr.Ak),this.vU=void 0}};r();var Gx=class extends fu{get pU(){if(eT(this.hU))return this.hU.token}async sU(t,e){const i=await Mx(t),s=this.aU,n=Jg(new j(i)),r=this.pU;if(void 0===r)throw new sr(Qa.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The Widevine vuDRM token has not been correctly configured.");return JSON.stringify({token:r,drm_info:n,kid:s})}constructor(t,e,i){super(t,e,i,Rr.bk),this.UW("https://widevine-proxy.drm.technology/proxy")}};function Hx(t,e){let i=e||{};return t.ticket&&t.sessionId&&(i=ol({},i,{SessionId:t.sessionId,Ticket:t.ticket})),ol({},i,{CrmId:t.crmId,AccountId:t.accountId,ContentId:t.contentId})}r(),r();var Zx=class extends fu{tU(t,e){let i=t;return jS(this.hU)&&(i=Hx(this.hU,i)),super.tU(i,e)}constructor(t,e,i){super(t,e,i,Rr.bk),this.UW("https://emeademo.dev.ott.irdeto.com/Widevine/getlicense")}};r(),r();var Xx="Conax-Custom-Data";function zx(t,e,i){const s=t&&KS(t)&&t;if(s&&!i.has(Xx)){const t=DS(s)?s.token:void 0,n=DS(s)?s.deviceId:void 0,r=JSON.stringify({Version:"1.0.0",CxAuthenticationDataToken:t,CxClientInfo:{DeviceType:"Browser",DrmClientType:e+"-HTML5",DrmClientVersion:"1.0.0",CxDeviceId:n}});i.set(Xx,r)}return i}var qx=class extends fu{$W(){const t=super.$W();return zx(this.hU,"Widevine",t)}constructor(t,e,i){super(t,e,i,Rr.bk),this.UW("https://connect.conax.com:8094/license")}};function Yx(t){const e=uh(new j(t));return ha(JSON.parse(e).license)}function Kx(t){return"string"==typeof t.token?t.token:kr(JSON.stringify({userId:t.userId,sessionId:t.sessionId,merchant:t.merchant}))}function jx(t,e,i){let s;return s=i.token?"x-dt-auth-token":"dt-custom-data",t.set(s,e),t}r(),r();var Qx=class extends fu{get pU(){return Kx(this.hU)}nU(t){return Yx(t)}$W(){return jx(super.$W(),this.pU,this.hU)}constructor(t,e,i){super(t,e,i,Rr.bk),this.UW("https://lic.drmtoday.com/license-proxy-widevine/cenc/")}};r();var Jx=class extends fu{$W(){const t=super.$W(),e=this.hU.token;return t.set("Authorization","Bearer "+e),t}constructor(t,e,i){super(t,e,i,Rr.bk)}};async function $x(t,e,i,s){if(!iT(t))throw new sr(Qa.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Xstream DRM Configuration");const n=new ya;n.append("Cache-Control","no-cache"),n.append("Content-Type","application/json");const r=t.sessionId;r&&n.append("XSSESSION",r);const o=t.streamId;let h;h=t.fairplay?"persistent"===t.fairplay.licenseType?"persistent":"non-persistent":t.widevine&&"persistent"===t.widevine.licenseType?"persistent":"non-persistent";const a={drmType:e,licenseType:h,streamId:o},u={Xu:t.ticketAcquisitionURL,jk:Rr.Ak,Jk:n,AE:xe.POST,Lk:JSON.stringify(a),Uw:s},c=await i.Qk(u);return await c.Ik()}r(),r();var tR=class extends fu{$W(){const t=super.$W();return t.set("Content-Type","application/json"),t}async sU(t,e){const i=op(t.buffer),s=this.hU,n=await $x(s,"widevine_modular",this.fR,e);this.UW(n.licenseServerUrl);const r=Zg(JSON.stringify({payload:i,ticket:n.ticket}));return super.sU(r,e)}nU(t){return ha(t.license)}constructor(t,e,i){super(t,e,i,Rr.Ak)}};r();var eR=class extends fu{$W(){if(!sT(this.hU))throw new sr(Qa.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Axinom configuration");const t=super.$W();return t.set("X-AxDRM-Message",this.hU.token),t}constructor(t,e,i){super(t,e,i,Rr.bk)}};function iR(t){const e=new j(2*t.length);for(let i=0;i<t.length;i+=1)e[2*i]=t.charCodeAt(i),e[2*i+1]=0;return e}r();var sR=class extends Jo{uU(t){return t.playready||{}}$W(){const t=new ya(this.wU);return t.Rk(super.$W()),t}yU(t){return t.length>=1&&t[0].Ox.length>0}KW(t){const e=this.hU.playready.customData;if(e){const t=iR(e),i=iR('<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">'+Nh(t)+"</CustomData></LicenseAcquisition></PlayReadyCDMData>");return Promise.resolve({playready:{ET:i}})}return super.KW(t)}async sU(t,e){const i=await Mx(t);return this.bU(i)}async bU(t){var e,i;let s=null;const n=yr(new DataView(t),new Ri,!0);let r;try{r=Ms.Ix(n)}catch(t){return s}const o=null==(e=r.Wx("PlayReadyKeyMessage")[0])?void 0:e.Wx("LicenseAcquisition")[0];var h;const a=null!=(h=null==o?void 0:o.Wx("Challenge"))?h:[];this.yU(a)&&(s=pr(a[0].zx));const u=new ya;var c;const l=null!=(c=null==o||null==(i=o.Wx("HttpHeaders")[0])?void 0:i.Wx("HttpHeader"))?c:[];for(const t of l){const e=t.Wx("name")[0].zx,i=t.Wx("value")[0].zx;u.append(e,i)}return this.wU=u,s}cU(t,e){return Promise.resolve(t)}lU(t,e){return super.rU(t,xu.dE,e)}constructor(t,e,i){super(mm,t,e,i,Rr.bk),this.wU=void 0}};r(),r();var nR=class t{static AU(t){return"3"===t.version?Lx.fU:Lx.dU}SU(){const t={};if(this.IS===Lx.fU){const e={LatensRegistration:Ox(this.TU,Lx.fU)};t["X-TITANIUM-DRM-CDATA"]=kr(JSON.stringify(e))}return t}get kU(){return this.IS}get wT(){return this.IS===Lx.dU}constructor(e){this.TU=e,this.IS=t.AU(e)}};var rR=class extends sR{KW(t){const e=this.hU;if(!this.hU)throw new sr(Qa.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium PlayReady DRM configuration.");if(tT(e)){const t={};return t.playready={ET:oR(e,this.EU.kU)},Promise.resolve(t)}return Promise.reject(Fx(e,Lx.pw))}$W(){const t=new ya(this.EU.SU());return t.Rk(super.$W()),t}async JW(t,e,i){const s=t.zE;if(!s)throw new sr(Qa.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Titanium PlayReady license request",t,e);let n,r;try{const t=await s.Dk(i),e=uh(new j(t)),h=Ms.Ix(e);if(h){const t=function(t,e){return function(t,e){const i=t.m.slice(),s=[];for(;i.length>0;){const t=i.shift();e(t)?s.push(t):i.push(...t.m)}return s}(t,(t=>t.Ux===e))}(h,"CustomData");var o;if(t.length>0)n=JSON.parse(t[0].zx),r=null==(o=n.DrmErr)?void 0:o.desc}}catch(t){}throw new sr(Qa.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Titanium PlayReady license request",t,e,s.Yk,s.$k,r)}yU(t){if(1!==t.length)throw new sr(Qa.CONTENT_PROTECTION_INITIALIZATION_INVALID,"PlayReady license message incorrectly formatted, Challenge not found.");return!0}constructor(t,e,i){super(t,e,i),this.EU=new nR(this.hU)}};function oR(t,e){const i=Ox(t,e),s=i.DeviceInfo.FormatVersion,n=function(t){return t.replace(/&lt;/g,"<").replace(/&gt;/g,">")}(function(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}("<TitaniumCustomData>"+kr('<LatensRegistration formatversion="'+s+'"><AccountName>'+i.AccountName+"</AccountName><CustomerName>"+i.CustomerName+"</CustomerName><PortalID>"+i.PortalId+'</PortalID><DeviceInfo formatversion="'+s+'"><DeviceType>'+i.DeviceInfo.DeviceType+"</DeviceType><OSType>"+i.DeviceInfo.OSType+"</OSType><OSVersion>"+i.DeviceInfo.OSVersion+"</OSVersion><DRMProvider>"+i.DeviceInfo.DRMProvider+"</DRMProvider><DRMVersion>"+i.DeviceInfo.DRMVersion+"</DRMVersion><DRMType>"+i.DeviceInfo.DRMType+"</DRMType><DeviceVendor>"+i.DeviceInfo.DeviceVendor+"</DeviceVendor><DeviceModel>"+i.DeviceInfo.DeviceModel+"</DeviceModel></DeviceInfo></LatensRegistration>")+"</TitaniumCustomData>")),r=zg(n,!0);return zg('<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0"><CustomData encoding="base64encoded">'+Nh(r)+"</CustomData></LicenseAcquisition></PlayReadyCDMData>",!0)}r();var hR=class extends sR{get pU(){if(eT(this.hU))return this.hU.token}yU(t){if(1!==t.length)throw new sr(Qa.CONTENT_PROTECTION_INITIALIZATION_INVALID,"Vudrm PlayReady license message incorrectly formatted, Challenge not found.");return!0}tU(t,e){const i=ol({},t||{},{token:this.pU});return super.tU(i,e)}constructor(t,e,i){super(t,e,i),this.UW("https://playready-license.drm.technology/rightsmanager.asmx")}};r();var aR=class extends sR{tU(t,e){let i=t;return jS(this.hU)&&(i=Hx(this.hU,i)),super.tU(i,e)}constructor(t,e,i){super(t,e,i),this.UW("https://emeademo.dev.ott.irdeto.com/playready/rightsmanager.asmx")}};r();var uR=class extends sR{$W(){const t=super.$W();return zx(this.hU,"PlayReady",t)}constructor(t,e,i){super(t,e,i),this.UW("https://connect.conax.com:8010/cxplayready/rightsmanager.asmx")}};r();var cR=class extends sR{get pU(){return Kx(this.hU)}nU(t){const e=function(t){const e=uh(new j(t));return Cl(e,"<?xml")?0:1}(t);return 1===e?Yx(t):super.nU(new j(t))}$W(){return jx(super.$W(),this.pU,this.hU)}constructor(t,e,i){super(t,e,i),this.UW("https://lic.drmtoday.com/license-proxy-headerauth/drmtoday/RightsManager.asmx")}};r();var lR=class extends sR{$W(){const t=super.$W();return this.xU&&t.set("Ticket",this.xU),t.set("Content-Type","text/xml"),t}async sU(t,e){const i=this.hU,s=await $x(i,"playready",this.fR,e);return this.UW(s.licenseServerUrl),this.xU=s.ticket,super.sU(t,e)}constructor(t,e,i){super(t,e,i)}};r();var dR=class extends sR{$W(){if(!sT(this.hU))throw new sr(Qa.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Axinom configuration");const t=super.$W();return t.set("X-AxDRM-Message",this.hU.token),t}};r(),r();var fR=function(t){return t.Ak="application/json",t.RU="application/x-www-form-urlencoded",t.IU="application/octet-stream",t.Tk="text/plain;charset=UTF-8",t}({}),zi=class extends Jo{get qW(){return!0}CU(){return this.XW.certificateURL||this.PU}DU(t){this.PU=t}sU(t){return Promise.resolve(this.NU(t,this.MU))}NU(t,e){return"spc="+encodeURIComponent(Nh(t))+"&assetId="+encodeURIComponent(e)}get LU(){return fR.RU}uU(t){return t.fairplay||{}}BU(t){const e=t.indexOf("?");if(e>=0)return Promise.resolve(t.substr(e+1));{const e=t.split("skd://").pop();if(e){if(/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/.test(e))return Promise.resolve(e)}const i=t.split("/");return Promise.resolve(i[i.length-1])}}async KW(t){var e;const i=null!=(e=this.OU)?e:ar(new j(t)),s=await this.BU(i);this.MU=s;const n={};return n.fairplay={BT:s},n}$W(){const t=super.$W();return t.set("Content-Type",this.LU),t}async cU(t,e){return this.ZW?this.ZW:await this.FU(e)}lU(t,e){return super.rU(t,xu.aE,e)}VU(t){const e=this.CU(),i=this.$W(),s={Xu:e,jk:Rr.bk,Jk:i,AE:xe.GET,xE:!1,Lk:null,SE:0,Uw:t,Tw:Mr.oE,kE:xu.uE};return new wt(s)}async FU(t){const e=this.VU(t),i=await this.fR.Qk(e),s=await i.Dk();return new j(s)}nU(t){let e;if("string"==typeof t){let i=t.trim();"<ckc>"===i.substr(0,5)&&"</ckc>"===i.substr(-6)&&(i=i.slice(5,-6)),e=ha(i)}else e=new j(t);return e}tU(t,e){let i=super.tU(t,e);return Cl(i,"skd:")&&(i=i.substr(4)),i}constructor(t,e,i,s,n){super(t.cT,e,i,s,n),this.MU="",this.PU=void 0,this.OU=t.WU}};r();var _R=class extends zi{get LU(){return fR.IU}BU(t){let e=t.split("://",1);return"skd"!==e[0].slice(-3).toLowerCase()?Promise.resolve(""):(e=t.split(";",2),e.length>1?Promise.resolve(e[1]):Promise.resolve(super.BU(t)))}async sU(t){return t}nU(t){return new j(t)}tU(t,e){const i=t||{};return i.p1=Ba(),super.tU(i,e)}constructor(t,e,i,s){super(t,e,i,s,Rr.bk)}};r();var vR=class extends zi{get LU(){return fR.Ak}get pU(){if(!eT(this.hU))throw new sr(Qa.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Token is required for FairPlay VuDrm.");return this.hU.token}NU(t,e){const i={token:this.pU,contentId:e,payload:Nh(t)};return JSON.stringify(i)}nU(t){return new j(t)}$W(){const t=super.$W();return t.set("x-vudrm-token",this.pU),t}constructor(t,e,i,s){super(t,e,i,s,Rr.bk),this.UW("https://fairplay-license.drm.technology/license"),this.DU("https://fairplay-license.drm.technology/certificate")}};r();var mR="Verimatrix Fairplay license response incorrectly formatted. Invalid json.",gR="Verimatrix Fairplay license response incorrectly formatted. Ckc not found.",pR=class extends zi{nU(t){const e=function(t){let e;try{e=JSON.parse(t).ckc}catch(t){throw new sr(Qa.CONTENT_PROTECTION_LICENSE_INVALID,mR)}if(!e)throw new sr(Qa.CONTENT_PROTECTION_LICENSE_ERROR,gR);return e}(uh(new DataView(t)));return super.nU(e)}constructor(t,e,i,s){super(t,e,i,s,Rr.bk)}};r();var wR=class extends zi{get LU(){return fR.Ak}async sU(t){const e=this.hU;if(!e)throw new sr(Qa.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium Fairplay DRM configuration.");return Vx(e,Nh(t),Lx.Aw)}nU(t){try{let e;if(Yt(t)){const i=t.trim();e=JSON.parse(i)}else e=t;if(e.license){const t=pr(e.license);return new j(t)}throw new sr(Qa.CONTENT_PROTECTION_LICENSE_ERROR,"No license received from the Titanium Fairplay license server")}catch(t){throw new sr(Qa.CONTENT_PROTECTION_LICENSE_INVALID,"Could not process the response from the Titanium Fairplay license server")}}JW(t,e,i){return Wx(t,e,i)}constructor(t,e,i,s){super(t,e,i,s,Rr.Ak)}};r();var yR=class extends zi{CU(){const t=super.CU();if(!t)return t;const e=Ms.Ih(t),i=this.hU;return jS(i)&&Hb(e,{accountId:i.accountId,applicationId:i.applicationId||""}),e.href}BU(t){return jS(this.hU)?Promise.resolve(this.hU.contentId):super.BU(t)}async sU(t){return t}nU(t){return new j(t)}get LU(){return fR.IU}tU(t,e){let i=t;return jS(this.hU)&&(i=function(t,e){return ol({},Hx(t,e),{KeyId:t.keyId})}(this.hU,i)),super.tU(i,e)}constructor(t,e,i,s){super(t,e,i,s,Rr.bk),this.UW("https://emeademo.dev.ott.irdeto.com/streaming/getckc"),this.DU("https://emeademo.dev.ott.irdeto.com/streaming/getcertificate")}};r();var bR=class extends zi{$W(){const t=super.$W();return zx(this.hU,"FairPlay",t)}async FU(t){const e={Xu:this.CU(),jk:Rr.bk,Jk:{},AE:xe.GET,xE:!1,Lk:null,SE:0,Uw:t,Tw:Mr.oE,kE:xu.uE},i=await this.fR.Qk(e),s=await i.Dk();return new j(s)}async sU(t){return t}BU(t){const e=t.indexOf("?");if(0===t.indexOf("skd://")){let i;return i=e>=0?t.substring(6,e):t.substring(6),Promise.resolve(function(t){return uh(ha(t))}(i))}return Promise.resolve("unknown")}nU(t){try{const e=JSON.parse(t);return new j(pr(e.CkcMessage))}catch(t){throw new g("CFLRW-66")}}constructor(t,e,i,s){if(super(t,e,i,s,Rr.Tk),!KS(e))throw new sr(Qa.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Conax configuration");this.UW("https://connect.conax.com:8097/license")}};r();var AR=class extends zi{BU(t){return Cl(t,"skd://")?Promise.resolve(t.substring(6,40)):Promise.reject(new sr(Qa.CONTENT_PROTECTION_INITIALIZATION_INVALID,"Error while determining the KeyOS Content ID."))}NU(t,e){return"spc="+Nh(t)+"&assetId="+e}constructor(t,e,i,s){super(t,e,i,s,Rr.Tk),this.UW(HS[ue.Aw])}};r();var SR=class extends zi{get pU(){return Kx(this.hU)}NU(t,e){const i="spc="+encodeURIComponent(Nh(t))+"&"+encodeURI(e);return"persistent"===this.XW.licenseType?i+"&offline=true":i}$W(){return jx(super.$W(),this.pU,this.hU)}constructor(t,e,i,s){super(t,e,i,s,Rr.Tk),this.UW("https://lic.drmtoday.com/license-server-fairplay/")}};r();var TR=class extends zi{BU(t){let e=t;return Cl(e,"skd:")&&(e="http:"+e.substring(4)),Cl(e,"http:")||Cl(e,"https:")?Promise.resolve(Ms.Ih(e).hostname):Promise.reject(new g("Could not parse ExpressPlay FairPlay content ID."))}async sU(t){return t}nU(t){return new j(t)}get LU(){return fR.IU}constructor(t,e,i,s){super(t,e,i,s,Rr.bk)}};r();var kR=class extends zi{$W(){const t=super.$W(),e=this.hU.token;return t.set("Authorization","Bearer "+e),t}constructor(t,e,i,s){super(t,e,i,s,Rr.Tk)}};r();var ER=class extends zi{async FU(t){const e=this.CU(),i=this.$W(),s={Xu:e,jk:Rr.Ak,Jk:i,AE:xe.POST,Uw:t,Tw:Mr.oE,kE:xu.uE},n=await this.fR.Qk(s),r=await n.Ik();return new j(ha(r.certificate))}get LU(){return fR.Ak}async lU(t,e,i){void 0===i&&(i=Rr.Tk);const s=Nh(t),n=this.hU,r=await $x(n,"fairplay",this.fR,e),o=Zg(JSON.stringify({spc:s,ticket:r.ticket})),h={Xu:this.zW(),jk:Rr.Ak,Jk:this.$W(),AE:xe.POST,Lk:o,SE:0,Uw:e,Tw:Mr.oE,kE:xu.aE},a=await this.fR.Qk(h);return ha((await a.Ik()).licence)}constructor(t,e,i,s){if(super(t,e,i,s,Rr.Ak),!iT(e))throw new g("Invalid Xstream DRM configuration")}};r();var xR=class extends zi{NU(t,e){return Nh(t)}nU(t){if(0===t.length)throw new sr(Qa.CONTENT_PROTECTION_LICENSE_ERROR,"Vimond license request error.");return super.nU(t)}$W(){const t=super.$W();return t.set("Content-Type","text/plain"),t}constructor(t,e,i,s){super(t,e,i,s,Rr.Tk)}};r();var RR=class extends zi{get LU(){return fR.Ak}NU(t,e){return t}nU(t){return new j(t)}$W(){if(!sT(this.hU))throw new sr(Qa.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Axinom configuration");const t=super.$W();return t.set("X-AxDRM-Message",this.hU.token),t}constructor(t,e,i,s){super(t,e,i,s,Rr.bk)}};r();var IR=class extends zi{get LU(){return fR.Tk}NU(t,e){const i={spc:Nh(t)};return JSON.stringify(i)}BU(t){const e=Ms.Ih(t);return this.UU=t,e.searchParams.has("b")?Promise.resolve(e.searchParams.get("b")):Promise.reject(new sr(Qa.CONTENT_PROTECTION_INITIALIZATION_INVALID,"Error during license server request: Could not extract content id"))}tU(t,e){let i=this.zW();return!i&&this.UU&&(i=this.UU),i&&(i=i.replace("skd://","https://")),super.tU(t,e||i)}nU(t){try{let e;if(e=Yt(t)?JSON.parse(t.trim()):t,e.ckc)return ha(e.ckc)}catch(t){throw new sr(Qa.CONTENT_PROTECTION_LICENSE_INVALID,"Could not process the response from the Uplynk Fairplay license server")}throw new sr(Qa.CONTENT_PROTECTION_LICENSE_ERROR,"No license received from the Uplynk Fairplay license server")}constructor(t,e,i,s){super(t,e,i,s,Rr.Ak),this.UU=void 0}};r(),r(),r();var Mu=class{GU(t){return this.HU(t)}ZU(t,e){throw new b(e+" must be "+this.XU+". (Received: "+t+")")}constructor(t,e){this.HU=t,this.XU=e}},dl=(new Mu((function(t){return!0}),"any"),new Mu(Ad,"a number")),rl=new Mu(Yt,"a string"),CR=new Mu(yd,"a boolean"),xh=(new Mu(bd,"a date"),new Mu(pd,"undefined")),PR=new Mu(V,"an object"),DR=new Mu((function(t){return null===t}),"null");new Mu((function(t){return null==t}),"null or undefined");function NR(t,e){throw new b(e+" has an incorrect type")}var MR=class{GU(t){if(!V(t))return!1;for(const e of w.keys(this.Cp)){if(!this.Cp[e].GU(t[e]))return!1}return!0}ZU(t,e){if(!V(t))throw new b(e+" must be an object.");for(const i of w.keys(this.Cp)){const s=this.Cp[i];if(!s.GU(t[i]))return s.ZU(t[i],e+"."+String(i))}throw new b}constructor(t){this.Cp=t}};function qe(t){return new MR(t)}function LR(t){return w.keys(t).map((e=>t[e]))}var BR=class{GU(t){return ms(this.p_,t)}ZU(t,e){return NR(0,e)}constructor(t){this.p_=t}};function OR(t){return new BR(t)}var FR=class{GU(t){return this.zU.some((e=>e.GU(t)))}ZU(t,e){return NR(0,e)}constructor(t){this.zU=t}};function Me(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return new FR(e)}var VR=class{GU(t){return $c(t)&&t.every((t=>this.qU.GU(t)))}ZU(t,e){if(!$c(t))throw new b(e+" must be an array.");for(let i=0;i<t.length;i++){const s=t[i];this.qU.GU(s)||this.qU.ZU(s,e+"["+i+"]")}return NR(0,e)}constructor(t){this.qU=t}};function tc(t){return new VR(t)}var WR=class{GU(t){return V(t)&&w.keys(t).every((e=>this.qU.GU(t[e])))}ZU(t,e){if(!V(t))throw new b(e+" must be an object.");for(const i of w.keys(t))if(!this.qU.GU(t[i]))return this.qU.ZU(t[i],e+"."+i);return NR(0,e)}constructor(t){this.qU=t}};function UR(t){return new WR(t)}var GR=class{GU(t){return this.qU().GU(t)}ZU(t,e){return this.qU().ZU(t,e)}constructor(t){this.qU=sl(t)}};var HR=qe({responseCode:dl,isException:CR,description:rl,title:rl,correlationId:rl});async function ZR(t,e,i,s,n){const r=function(t,e,i,s){const n={token:e.token,account:e.accountId,form:"json"},r=decodeURIComponent(Gb(i,n)),o=new ya({});o.append("Content-Type","application/json");const h=Nh(t),a={getFairplayLicense:{releasePid:e.releasePid,spcMessage:h}};return{Xu:r,jk:Rr.Tk,Jk:o,AE:xe.POST,Lk:JSON.stringify(a),Uw:s,Tw:Mr.oE,kE:xu.aE}}(t,e,i,n);return await async function(t,e){const i=await e.Qk(t),s=await i.Ik();if(HR.GU(s))throw new sr(Qa.CONTENT_PROTECTION_LICENSE_ERROR,s.description,void 0,t.Xu,s.responseCode);return ha(s.getFairplayLicenseResponse.ckcResponse)}(r,s)}var XR=class extends zi{BU(t){const e=t.replace("FairPlay",this.YU.releasePid);return super.BU(e)}async lU(t,e){return await ZR(t,this.YU,this.zW(),this.fR,e)}constructor(t,e,i,s){super(t,e,i,s,Rr.bk),this.YU=e}};r();var zR=class extends Jo{uU(t){return t.clearkey||{}}async jW(t,e,i,s){const n=this.XW;if(this.zW())return super.jW(t,this.oU,i,s);if(n.keys&&n.keys.length){const t={keys:n.keys.map((t=>{let e=t;return e||(e={}),{kty:"oct",kid:e.id,k:e.value}}))};return Yg(JSON.stringify(t)).buffer}throw new sr(Qa.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The clearkey license has not been configured correctly.")}cU(t,e){return Promise.resolve(new j(0))}async lU(t,e){const i=await super.rU(t,xu.fE,e),s=JSON.parse(ar(i));if(s.keys)for(const t of s.keys)t.k&&(t.k=gg(t.k)),t.kid&&(t.kid=gg(t.kid));return Yg(JSON.stringify(s))}constructor(t,e,i){super(dr,t,e,i,Rr.bk)}};r();var qR=class extends fu{};r(),r();var YR={url:"",method:"GET",headers:{},body:null,useCredentials:!1};async function KR(t,e,i){const s=iI(e),n=t.onCertificateRequest;if(!n||"function"!=typeof n)return Promise.resolve(e);const r=await ou(Promise.resolve(n.call(t,s)),i);return Qg(r)?na(r):eI(ol({},YR,r))}async function jR(t,e,i,s,n){const r=t.onCertificateResponse,o=tI(e,i,s);if(!r||"function"!=typeof r)return Promise.resolve(e);return na(await ou(Promise.resolve(r.call(t,o)),n))}async function QR(t,e,i,s){const n=await async function(t,e,i,s){const n=null==t?void 0:t.onLicenseRequest,r=$R(e,i);if(!n||"function"!=typeof n)return Promise.resolve(r);0;const o=await ou(Promise.resolve(n.call(t,r)),s);if(Qg(o))return na(o).buffer;return ol({fairplaySkdUrl:void 0},YR,o)}(t,e,i,s);return n instanceof ArrayBuffer?n:eI(n)}async function JR(t,e,i,s,n,r){const o=$R(i,n),h=await async function(t,e,i,s,n){const r=null==t?void 0:t.onLicenseResponse,o=tI(e,i,s);if(!r||"function"!=typeof r)return Promise.resolve(e);0;const h=await ou(Promise.resolve(r.call(t,o)),n);return na(h)}(t,new j(e),o,s,r);return na(h)}function $R(t,e){return ol({},iI(t),{fairplaySkdUrl:e})}function tI(t,e,i){return{url:i.eE,status:i.Yk,statusText:i.$k,headers:i.Jk.Ek(),body:t,request:e}}function eI(t){return new wt({Xu:t.url,AE:t.method,Jk:t.headers,Lk:t.body,xE:t.useCredentials,Tw:Mr.oE})}function iI(t){var e;return{url:t.Xu,body:null!=(e=sI(t.Lk))?e:null,headers:t.Jk.Ek(),method:t.AE,useCredentials:t.xE}}function sI(t){if(t)return"string"==typeof t?Yg(t):t instanceof ArrayBuffer?new j(t):ip(t)?ua(t):void 0}var nI=class extends sR{cU(t,e){return Promise.resolve(t)}async lU(t,e){const i=await this.bU(fc(t).buffer),s=this.QW(i,Rr.bk,xu.dE,e),n=await QR(this.KU,s,void 0,e);if(n instanceof ArrayBuffer)return new j(n);if(""===n.Xu)throw new sr(Qa.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The license request URL has not been correctly configured.");try{const t=await this.fR.Qk(n),i=await t.Dk(e);return await JR(this.KU,i,s,t,void 0,e)}catch(t){throw th(t),new sr(Qa.CONTENT_PROTECTION_LICENSE_ERROR,"Error during PlayReady license request",t)}}constructor(t,e,i,s){super(t,e,i),this.KU=s}};r();var rI=class extends qR{async cU(t,e){if(this.ZW)return this.ZW;const i=this.QW(t,Rr.bk,xu.lE,e),s=await KR(this.KU,i,e);if(s instanceof j)return s;if(""===s.Xu)throw new sr(Qa.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The certificate request URL has not been correctly configured.");let n,r;try{n=await this.fR.Qk(s),r=await n.Dk(e)}catch(t){throw th(t),new sr(Qa.CONTENT_PROTECTION_CERTIFICATE_ERROR,"Error during Widevine certificate request",t)}const o=$R(i,void 0);return await jR(this.KU,new j(r),o,n,e)}async lU(t,e){const i=this.QW(t,Rr.bk,xu.cE,e),s=await QR(this.KU,i,void 0,e);if(s instanceof ArrayBuffer)return new j(s);if(""===s.Xu)throw new sr(Qa.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The license request URL has not been correctly configured.");try{const t=await this.fR.Qk(s),n=await t.Dk(e);return await JR(this.KU,n,i,t,void 0,e)}catch(t){throw th(t),new sr(Qa.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Widevine license request",t)}}constructor(t,e,i,s){super(t,e,i,Rr.bk),this.KU=s}};r();var oI=class extends zi{async cU(t,e){if(this.ZW)return this.ZW;const i=this.VU(e),s=await KR(this.KU,i,e);if(ip(s))return s;try{const t=await this.fR.Qk(s),n=await t.Dk(),r=$R(i,void 0);return await jR(this.KU,new j(n),r,t,e)}catch(t){throw th(t),new sr(Qa.CONTENT_PROTECTION_CERTIFICATE_ERROR,"Error during FairPlay certificate request",t)}}async lU(t,e){const i=this.QW(t,Rr.bk,xu.aE,e),s=await QR(this.KU,i,this.jU,e);if(s instanceof ArrayBuffer)return new j(s);if(""===s.Xu)throw new sr(Qa.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The license request URL has not been correctly configured.");try{const t=await this.fR.Qk(s),n=await t.Dk(e);return await JR(this.KU,n,i,t,this.jU,e)}catch(t){throw th(t),new sr(Qa.CONTENT_PROTECTION_LICENSE_ERROR,"Error during FairPlay license request",t)}}BU(t){var e;return this.jU=t,(null==(e=this.KU)?void 0:e.extractFairplayContentId)?Promise.resolve(this.KU.extractFairplayContentId(t)):super.BU(t)}constructor(t,e,i,s,n){super(t,e,i,s,Rr.bk),this.KU=n}},hI=class{QU(t,e,i,s){switch(t.cT.Tw){case ue.ww:return this.JU(e,i,s);case ue.pw:return this.$U(e,i,s);case ue.Aw:return this.tG(t,e,i,s);case ue.yw:default:return this.eG(e,i,s)}}JU(t,e,i){const s=function(t){return t.integration===RS&&Yt(t.customIntegrationId)}(t)?t.customIntegrationId:t.integration;if(s&&LS.mP.fP(s,am)){const n=LS.mP.vP(s,am,t);return new rI(t,e,i,n)}switch(s){case go:return new Ux(t,e,i);case pS:return new Gx(t,e,i);case gS:return new Zx(t,e,i);case vS:return new qx(t,e,i);case yS:return new Qx(t,e,i);case AS:return new Jx(t,e,i);case SS:return new tR(t,e,i);case kS:return new eR(t,e,i);default:return new qR(t,e,i,Rr.bk)}}$U(t,e,i){const s=t.integration;if(s&&LS.mP.fP(s,om)){const n=LS.mP.vP(s,om,t);return new nI(t,e,i,n)}switch(s){case go:return new rR(t,e,i);case pS:return new hR(t,e,i);case gS:return new aR(t,e,i);case vS:return new uR(t,e,i);case yS:return new cR(t,e,i);case SS:return new lR(t,e,i);case kS:return new dR(t,e,i);default:return new sR(t,e,i)}}tG(t,e,i,s){const n=e.integration;if(n&&LS.mP.fP(n,Ve)){const r=LS.mP.vP(n,Ve,e);return new oI(t,e,i,s,r)}switch(n){case mS:return new _R(t,e,i,s);case pS:return new vR(t,e,i,s);case wS:return new pR(t,e,i,s);case go:return new wR(t,e,i,s);case gS:return new yR(t,e,i,s);case vS:return new bR(t,e,i,s);case Th:return new AR(t,e,i,s);case yS:return new SR(t,e,i,s);case bS:return new TR(t,e,i,s);case AS:return new kR(t,e,i,s);case SS:return new ER(t,e,i,s);case TS:return new xR(t,e,i,s);case kS:return new RR(t,e,i,s);case ES:return new IR(t,e,i,s);case xS:return new XR(t,e,i,s);default:return new zi(t,e,i,s,Rr.Tk)}}eG(t,e,i){return new zR(t,e,i)}iG(t){return t.Tw===ue.pw||t.Tw===ue.ww||t.Tw===ue.Aw||t.Tw===ue.yw}wT(t,e){var i;if(t.Tw!==ue.pw)return!1;if(Bo(null==(i=e.playready)?void 0:i.customData))return!0;const s=e.integration;return(!s||!LS.mP.fP(s,Ve))&&(s===go&&new nR(e).wT)}_U(t,e){if(t.Tw!==ue.ww)return;const i=e.integration;return i&&LS.mP.fP(i,Ve)?void 0:i===go?Ux._U():void 0}};r(),r(),r();var aI="theoplayer-stored-network-info-v2",uI=25e5,gu=class{sG(t){var e;const i=null==(e=Ms.aR)?void 0:e.Lb(t);if(void 0===i)return;const s=JSON.parse(i);if(void 0!==s&&void 0!==s[this.nG]){if(!this.rG(s))return s[this.nG].availableBandwidth;var n;null==(n=Ms.aR)||n.Bb(t,JSON.stringify({}))}}oG(){const t=this.sG(aI);if(void 0!==t)return t;const e=this.sG("theoplayer-stored-network-info");return e?8*e:void 0}rG(t){const e=t[this.nG].storedTimestamp;return!!e&&Ba()-e>36e5}hG(t){this.aG=t,this.uG()}cG(){var t;return null!=this.aG||(this.aG=null!=(t=this.oG())?t:uI),this.aG}constructor(){this.nG=_b,this.aG=void 0,this.uG=Qr((()=>{var t;const e={[this.nG]:{availableBandwidth:this.aG,storedTimestamp:Ba()}};null==(t=Ms.aR)||t.Bb(aI,JSON.stringify(e))}),1e4)}};gu.Vg=new gu,r();var zt=function(t){return t[t.lG=0]="lG",t[t.dG=1]="dG",t[t.fG=2]="fG",t[t._G=3]="_G",t[t.vG=4]="vG",t[t.mG=5]="mG",t[t.YC=6]="YC",t[t.gG=7]="gG",t[t.pG=8]="pG",t[t.JC=9]="JC",t[t.wG=10]="wG",t[t.$C=11]="$C",t[t.yG=12]="yG",t}({});r();var Yh=class{get bG(){return 0}get AG(){return 0}SG(t){}};r(),r();var cI=class extends pe{constructor(t){super("contentProtectionsTracked"),this.TG=t}},Xh=class extends Co{kG(t){this.TU=t}_U(t){const e=this.TU;if(void 0!==e)return this.EG._U(t,e)}wT(t){const e=this.TU;return void 0!==e&&this.EG.wT(t,e)}xG(t){const e={cT:t.cT,IG:t.IG||[],CG:t.CG,WU:t.WU},i=this.EG.QU(e,this.TU||{},t.aU,this.fW);return e.CG&&i.UW(e.CG),new lI(i)}DG(t){if(!t)return;Fo(t,(t=>void 0!==t.aU))&&this._o(new cI(t))}constructor(t,e=new hI){super(),this.TU=void 0,this.fW=t,this.EG=e}},lI=class{YW(t){return this.NG.YW(t)}KW(t,e,i){return this.NG.KW(e,i)}qW(){return this.NG.qW||void 0!==this.NG.ZW}cU(t,e){return this.NG.cU(t,e)}lU(t,e,i){return e&&this.NG.UW(e),this.NG.lU(t,i)}Xw(){this.NG.yn()}constructor(t){this.NG=t}};r();var Iu=class extends to{MG(t){this.BG.push(t);for(const e of t.lC)this.tt(e);this.OG(t)}FG(t){we(this.BG,t),this.VG(t);for(const e of t.lC)this.WG(e)||this.it(e)}WG(t){for(const e of this.BG)if(e._C(t))return!0;return!1}OG(t){t.bn(Se.VI,this.UG),t.bn(Se.UI,this.GG)}VG(t){t.vn(Se.VI,this.UG),t.vn(Se.UI,this.GG)}yn(){for(;this.BG.length>0;)this.FG(this.BG[0]);super.yn()}ka(){return nS(this)}constructor(t){super(),this.BG=[],this.UG=t=>{this.tt(t.Ht)},this.GG=t=>{const e=t.Ht;this.WG(e)||this.it(e)};for(const e of t)this.MG(e)}};r(),r();var dI,fI={forceSeekOffset:0,maximumOffset:0,maximumPlaybackRate:0,minimumOffset:0,minimumPlaybackRate:0,targetOffset:0},_I=class{get wa(){return null!=this.eu||(this.eu=function(t){return{get enabled(){return t.Rt},set enabled(e){t.Rt=Fu(e)},get monitoringLivePlayback(){return t.HG},get currentLatency(){return t.KB},get currentConfiguration(){return function(t){if(void 0!==t)return{get minimumOffset(){return t.minimumOffset},get maximumOffset(){return t.maximumOffset},get targetOffset(){return t.targetOffset},get forceSeekOffset(){return t.forceSeekOffset},get minimumPlaybackRate(){return t.minimumPlaybackRate},get maximumPlaybackRate(){return t.maximumPlaybackRate}}}(t.kd)}}}(this)),this.eu}get Rt(){var t,e;return null!=(e=this.qe)?e:Boolean(null==(t=this.ZG)?void 0:t.Rt)}set Rt(t){this.qe=t,this.ZG&&(this.ZG.Rt=t)}get HG(){var t,e;return null!=(e=null==(t=this.ZG)?void 0:t.wB)&&e}get KB(){var t;return null==(t=this.ZG)?void 0:t.YB}get kd(){return this.ZG?this.ZG.yB:fI}Aa(t){this.ZG=t,void 0!==this.qe&&(this.ZG.Rt=this.qe)}nr(){this.ZG=void 0,this.qe=void 0}};var vI=!(!s||!s.TextTrack),mI=class extends sn{get KB(){}get XG(){const t=this.WB.wR,e=this.ER;return t.wr(e,.01)}get ht(){return this.cO}get wR(){return this.WB.wR.ks()}get bR(){return this.WB.bR}set bR(t){t&&this.WB.zG(t)}get bt(){return this.Sc}get ER(){return void 0!==this.qG?this.qG:this.WB.ER}set ER(t){this.RR(t)}RR(t,e){this.WR&&(this.qG=t),this.WB.Rb(t)}get ct(){return this.WB.ct}get PR(){return this.WB.PR}get lt(){return this.YG}get MR(){return this.KG}get OR(){}get WR(){return this.WB.WR}get GR(){return ol({},{_O:0,vO:0,mO:0,gO:0,pO:0,wO:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}},this.WB.HR())}get ZR(){return this.WB.ZR}set ZR(t){this.WB.ZR=t}get qR(){return!0}get KR(){return this.WB.KR}get QR(){return this.WB.QR}set QR(t){this.WB.QR=t}get tI(){return this.WB.jG.played}get iI(){return this.QG}set iI(t){this.QG=t,this.JG&&(this.JG.iI=t)}get rI(){return this.WB.rI}get hI(){return this.WB.hI.ks()}get uI(){return this.WB.uI}get $G(){return this.WB.$G}get nt(){return this.Hl}get rt(){return this.dO}get dI(){return this.WB.dI}get vI(){return this.WB.vI}get gI(){return this.WB.gI}set gI(t){this.WB.gI=t}get yI(){return this.tH}get AI(){return this.WB.AI}set AI(t){this.WB.AI=t}get eH(){return this.iH}be(){this.WB.be()}ge(){this.WB.ge()}async Ca(t,e,i){J(i),this.Sc=t;const s={Tw:In.pW,VC:t.src,Mk:t.type,sH:this.nH(t),iI:this.QG,rH:t.crossOrigin,oH:e.metadata&&e.metadata.title};this.hH.kG(t.contentProtection),this.JG=await this.WB.$n(s),J(i),e.textTracks&&this.aH(e.textTracks),Ji(this.nt)}aH(t){for(const i of t)if(this.WB.uH()&&Z.su&&vI&&!yx(i.kind,i.label)&&this.cH(i)){var e;const t=null!=(e=i.kind)?e:Li.JV;this.WB.lH(i.src,t,i.label,i.srclang,i.default)}else{if(void 0===i.src)continue;this.dH.cW(i)}}cH(t){return!t.format||"webvtt"===t.format}async xI(){try{await this.WB.xI()}catch(t){}for(;!this.XG;)await this.WB.py(Ti.qy)}EI(){this.WB.EI()}II(){return void 0!==this.WB.jG.webkitShowPlaybackTargetPicker}CI(){this.WB.jG.webkitShowPlaybackTargetPicker&&this.WB.jG.webkitShowPlaybackTargetPicker()}DI(){this.WB.jG.webkitShowPlaybackTargetPicker&&this.WB.jG.webkitShowPlaybackTargetPicker()}TI(){return this.WB.jG}SI(){return this.WB.Sa}ja(){return this.WB.fH}OI(t){return this.WB._H(t)}async nr(){this.Sc=void 0,this.YG=void 0,this.KG=void 0,this.JG=void 0,await this.dH.nr(),this.WB.vH(),await this.WB.nr(),this.mH.nr(),this.iI=this.QG,this.ht.nr(),this.rt.nr(),this.qG=void 0}async yn(){await this.nr(),this.Ro(),this.gH(),this.pH(),this.mH.yn(),this.WB.wH=void 0,await this.bH.yH(this.WB),this.cO.yn(),this.dO.yn(),this.Hl.yn(),await this.dH.yn()}AH(){this.WB.bn(Ti.ho,this.Ds),this.WB.bn(Ti.zy,this.Ds),this.WB.bn(Ti.hb,this.Tc),this.WB.bn(Ti.qy,this.Ds),this.WB.bn(Ti.Uy,this.Ds),this.WB.bn(Ti.Jy,this.Ds),this.WB.bn(Ti.Qy,this.SH),this.WB.bn(Ti.Dy,this.Ds),this.WB.bn(Ti.Yy,this.Ds),this.WB.bn(Ti.ub,this.Ds),this.WB.bn(Ti.Iy,this.Ds),this.WB.bn(Ti.jy,this.TH),this.WB.bn(Zc.UL,this.XB),this.WB.bn(yo.fa,this.kH),this.WB.bn(Ti.Ey,this.Ds),this.WB.bn(Ti.Ty,this.EH),this.WB.jG.addEventListener("webkitcurrentplaybacktargetiswirelesschanged",this.xH)}gH(){this.WB.vn(Ti.ho,this.Ds),this.WB.vn(Ti.zy,this.Ds),this.WB.vn(Ti.hb,this.Tc),this.WB.vn(Ti.qy,this.Ds),this.WB.vn(Ti.Uy,this.Ds),this.WB.vn(Ti.Jy,this.Ds),this.WB.vn(Ti.Qy,this.SH),this.WB.vn(Ti.Dy,this.Ds),this.WB.vn(Ti.Yy,this.Ds),this.WB.vn(Ti.ub,this.Ds),this.WB.vn(Ti.Iy,this.Ds),this.WB.vn(Ti.jy,this.TH),this.WB.vn(Zc.UL,this.XB),this.WB.vn(yo.fa,this.kH),this.WB.vn(Ti.Ey,this.Ds),this.WB.vn(Ti.Ty,this.EH),this.WB.jG.removeEventListener("webkitcurrentplaybacktargetiswirelesschanged",this.xH)}nH(t){if(!t.contentProtection||!t.contentProtection.fairplay)return[];return[{cT:pm,RH:[{initDataTypes:[pm.xw],videoCapabilities:[{contentType:"video/mp4",encryptionScheme:"cbcs"}]}]}]}IH(){const t=this.WB.jG.audioTracks,e=this.WB.jG.videoTracks;t&&(t.addEventListener("addtrack",this.CH),t.addEventListener("removetrack",this.PH),t.addEventListener("change",this.DH)),e&&(e.addEventListener("addtrack",this.NH),e.addEventListener("removetrack",this.MH),e.addEventListener("change",this.LH))}pH(){const t=this.WB.jG.audioTracks,e=this.WB.jG.videoTracks;t&&(t.removeEventListener("addtrack",this.CH),t.removeEventListener("removetrack",this.PH),t.removeEventListener("change",this.DH)),e&&(e.removeEventListener("addtrack",this.NH),e.removeEventListener("removetrack",this.MH),e.removeEventListener("change",this.LH))}ah(t){for(let e=0;e<t.V;e++){t.fC(e).MO()}}NI(){this.WB.NI()}MI(){}BH(t,e){this.YG||(this.YG=e,this.KG=t,this._o(new Na(t)))}constructor(t,e,i,s,n,r,o=new hI,h=ab()){super(),this.JG=void 0,this.Sc=void 0,this.YG=void 0,this.KG=void 0,this.iH=new Yh,this.tH=new _I,this.kH=t=>{const e=t.lt,i=e.code,s=new A(lk(i),"Something went wrong during native playback.",e),n=new hk(i,s.message,e.message);this.BH(s,n)},this.Tc=()=>{this._o(new Al(this.ER,this.bR))},this.SH=t=>{this.KR||(this.qG=void 0),this._o(t)},this.XB=t=>{this.qG=void 0},this.xH=()=>{this._o(new Sk(this.WR))},this.TH=()=>{this.vI>0&&this.dI>0&&this._o(new P)},this.CH=t=>{const e=this.WB.jG.audioTracks;if(e)for(let t=0;t<e.length;t++){const i=e[t];wI(this.cO,i)||this.cO.tt(new yk(i))}},this.PH=t=>{const e=[],i=this.WB.jG.audioTracks;if(i){for(const t of this.cO.lC)yI(i,t.PO)||e.push(t);for(const t of e)this.cO.it(t)}},this.DH=()=>{this.ah(this.cO)},this.NH=t=>{const e=this.WB.jG.videoTracks;if(e)for(let t=0;t<e.length;t++){const i=e[t];wI(this.dO,i)||this.dO.tt(new Ak(i))}},this.MH=t=>{const e=[],i=this.WB.jG.videoTracks;if(i){for(const t of this.dO.lC)yI(i,t.PO)||e.push(t);for(const t of e)this.dO.it(t)}},this.LH=()=>{this.ah(this.dO)},this.EH=t=>{this._o(t),this.BH(t.errorObject,gn(t.errorObject))},this.bH=e,this.fW=i,this.Nw=h,this.WB=this.bH.OH(ee.mE),this.QG=this.WB.jG.preload,this.mH=new q(this.WB,!0),this.mH.bn(no,this.Ds),this.hH=new Xh(i,o),this.WB.wH=this.hH,this.AH(),this.cO=new Ke,this.dO=new Ke,this.IH(),this.dH=new xx(this.WB,this.fW),this.Hl=new Iu([this.WB.nt]),this.ge()}};function gI(t){var e,i;if(!(null==(e=(dI||(dI=s&&s.document&&s.document.createElement("video")),i=dI).canPlayType)?void 0:e.call(i,t.type)))return!1;if(t.useNativePlayback)return!0;const n=Z.su||Z.Cg;return!t.useManagedMediaSource||!n}var pI=class{uP(t,e,i,s,n,r,o){return new mI(t,e,i,s,n,r)}FH(t,e){return gI(t)}VH(t){return hT(t)}WH(){return!1}constructor(){this.UH=zt.yG}};function wI(t,e){for(const i of t.lC)if(i.PO===e)return i}function yI(t,e){for(let i=0;i<t.length;i++)if(t[i]===e)return!0;return!1}var bI=class{static GH(){return this.Vg}HH(t){this.ZH.push(t)}get UH(){return this.XH.UH}uP(t,e,i,s,n,r,o){let h=this.XH.uP(t,e,i,s,n,r,o);for(const t of this.ZH)h=t(h,i,s);return h}FH(t,e){return this.XH.FH(t,e)}VH(t){return this.XH.VH(t)}WH(){return!1}constructor(){this.XH=new pI,this.ZH=[]}};function AI(t,e){return gr(t.UH,e.UH)}bI.Vg=new bI,r(),r();var SI=class{zH(t){this.qH.push(t),this.qH.sort(AI)}async YH(t,e){for(const i of this.qH){const s=i.FH(t,e);if(yt(s)?await s:Boolean(s))return i}}constructor(){this.qH=[]}};function O(t){kI.Vg.zH(t)}r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r();var Ao,TI,xo,kI=class extends SI{KH(t){this.jH=t}QH(){return this.jH}async JH(t,e){const i=this.jH;let s=!1;for(const n of t){const t=await this.YH(n,e);if(t){if(YS(n.contentProtection)||await t.VH(n.contentProtection))return{Cc:n,t:t};n.contentProtection&&(s=!0)}const r=i.FH(n,e);if(yt(r)?await r:Boolean(r)){if(YS(n.contentProtection)||await i.VH(n.contentProtection))return{Cc:n,t:i};n.contentProtection&&(s=!0)}}if(s)throw await Ms.Zp()?new A(Qa.CONTENT_PROTECTION_NOT_SUPPORTED,"Encrypted content over an insecure connection is not supported."):new A(Qa.CONTENT_PROTECTION_NOT_SUPPORTED,"The DRM configuration is not supported by this platform.");return{Cc:t[0],t:i}}constructor(...t){super(...t),this.jH=bI.GH()}};kI.Vg=new kI,r(),r();var EI=class{yn(){ze(this.Vs)}constructor(t){this.Vs=s&&s.document&&s.document.createElement("div"),Zo(this.Vs),t.appendChild(this.Vs)}};r(),r();var el=function(t){return t.yG="",t.$H="none",t.eW="metadata",t.JB="auto",t}({});var xI=[yo.fa,Ti.Cy,Ti.Py,Ti.gb,Ti.wy,Ti.Ny,Ti.Ly,Ti.Zy,Ti.Xy,Ti.eb,Ti.sb,Zc.BL,Zc.OL,Zc.FL,Zc.VL,Zc.iC,Zc.WL,Zc.UL,Ti.Ty,Ti.Ey,Ti.Iy,Ti.Dy,Ti.Uy,Ti.Gy,Ti.ho,Ti.qy,Ti.zy,Ti.Yy,Ti.jy,Ti.Jy,Ti.Qy,Ti.hb,Ti.ub,Ti.Ky,Ti.Hy,Ti.$y],RI=class extends sn{get ht(){return this.cO}get wR(){return this.na.wR}get lt(){return this.na.lt}get MR(){return this.na.MR}get bR(){return this.na.bR}set bR(t){this.na.bR=t}get bt(){return this.tZ}get ER(){return this.na.ER}set ER(t){this.na.ER=t}get ct(){return this.na.ct}get PR(){return this.na.PR}get OR(){return this.lO}get WR(){return this.na.WR}get GR(){return this.na.GR}get ZR(){return this.na.ZR}set ZR(t){this.na.ZR=t}get qR(){return this.na.qR}get KR(){return this.na.KR}get QR(){return this.na.QR}set QR(t){this.na.QR=t}get tI(){return this.na.tI}get iI(){return this.QG}set iI(t){this.QG=t,this.na&&(this.na.iI=this.QG)}get rI(){return this.na.rI}get hI(){return this.na.hI}get uI(){return this.na.uI}get nt(){return this.Hl}get dI(){return this.na.dI}get rt(){return this.dO}get vI(){return this.na.vI}get gI(){return this.na.gI}set gI(t){this.na.gI=t}get yI(){return this.na.yI}get eH(){return this.na.eH}EI(){this.na.EI()}xI(){const t=this.na.xI();yt(t)&&ah(t)}RI(){return this.Ca(void 0)}kI(){}eZ(){this.uO.vC=this.na.ja(),this.cO.vC=this.na.ht,this.dO.vC=this.na.rt,this.Hl.vC=this.na.nt,this.lO.vC=this.na.OR,this.na.bn(xI,this.Ds)}iZ(){this.na.vn(xI,this.Ds),this.cO.vC=void 0,this.dO.vC=void 0,this.Hl.vC=void 0,this.lO.vC=void 0}iu(){return this.sZ}async Ca(t,e){if(J(e),this.sZ=t,!t)return;const i=t.sources.filter(_o);if(Fn(i))return;const s=await this.nZ.JH(i,t);J(e);const n=s.Cc,r=s.t,o=this.SI(),h=QT(this);(this.rZ!==r||this.lt)&&(this.iZ(),await this.na.yn(),J(e),this.rZ=r,this.na=this.oZ(r,n),function(t,e){t.ZR!==e.ZR&&(t.ZR=e.ZR);t.gI!==e.gI&&(t.gI=e.gI);t.QR!==e.QR&&(t.QR=e.QR)}(this.na,h),Yc(this,h,this),this.eZ()),this.na.iI=this.iI,this.hZ?this.na.ge():this.na.be(),await this.na.Ca(n,t,e),J(e),this.aZ(n),this.SI()!==o&&this._o(new ho)}aZ(t){this.tZ!==t&&(this.tZ=t,this._o(new tk(t)))}II(){return this.na.II()}CI(){this.na.CI()}DI(){this.na.DI()}SI(){return this.na.SI()}ja(){return this.uO}NI(){this.na.NI()}MI(){this.na.MI()}OI(t){return this.na.OI(t)}async nr(){this.sZ=void 0,this.aZ(void 0),await this.na.nr()}async yn(){this.Ro(),await this.nr(),await this.na.yn(),this.cO.yn(),this.dO.yn(),this.Hl.yn(),this.uO.yn(),this.lO.yn()}ge(){this.hZ=!0,this.na.ge()}be(){this.hZ=!1,this.na.be()}constructor(t,e){super(),this.rZ=void 0,this.tZ=void 0,this.QG=el.$H,this.sZ=void 0,this.hZ=!0,this.cO=new qo,this.dO=new qo,this.Hl=new at,this.lO=new Xc,this.nZ=t,this.na=e,this.na.iI=this.iI,this.uO=new Vh(e.ja()),this.eZ()}};r(),r(),r(),r();var nh=function(t){return t.da="fullscreenchange",t.ga="fullscreensupportchange",t.fa="fullscreenerror",t}({});r();var II=class extends pe{constructor(){super(nh.fa)}},N=(nh.da,nh.ga,nh.fa,class extends Co{get cs(){return!1}get oa(){return!1}vo(){this._o(new II)}xo(){}yn(){this.Ro()}});r(),r();var ga=class extends pe{constructor(){super(rr.fa)}},CI=class extends Co{get aO(){return!1}get hO(){return!1}async vo(){this._o(new ga)}async xo(){this._o(new ga)}yn(){this.Ro()}},PI=class extends Co{get bR(){}set bR(t){}get bt(){}get ER(){return this.uZ}set ER(t){this.RR(t)}RR(t,e){this.uZ!==t&&(this.uZ=t,this.cZ=!0,this._o(new R(this.ER)))}get GR(){return{_O:0,vO:0,mO:0,gO:0,pO:0,wO:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}}}get ZR(){return this.lZ}set ZR(t){this.lZ!==t&&(this.lZ=t,this._o(new ns(this.ER,this.gI)))}get KR(){return this.dZ}get QR(){return this.fZ}set QR(t){this.fZ!==t&&(this.fZ=t,this._o(new ju(this.ER,this.QR)))}get uI(){return this.cZ}get gI(){return this.zA}set gI(t){this.zA!==t&&(this.zA=t,this._o(new ns(this.ER,this.gI)))}get AI(){return!1}set AI(t){}get eH(){return this.iH}get KB(){}ge(){}be(){}xI(){this.dZ&&(this.dZ=!1,this._o(new $(this.ER)),this._o(new za(this.ER)))}EI(){this.dZ||(this.dZ=!0,this._o(new Al(this.ER,this.bR)),this._o(new ul(this.ER)))}Ca(t,e){return Promise.resolve()}II(){return!1}CI(){}DI(){}SI(){return this.ea}ja(){return this.ta}OI(t){throw new g("Adding a CustomTextTrack is not supported without setting a source.")}NI(){}MI(){}async nr(){this.uZ=0,this.cZ=!1,this.EI(),this._o(new Ys(this.uZ))}async yn(){this.Ro(),this.ht.yn(),this.nt.yn(),this.rt.yn()}constructor(...t){super(...t),this.uZ=0,this.lZ=!1,this.dZ=!0,this.fZ=1,this.cZ=!1,this.zA=1,this.ht=new Ke,this.wR=se.pB().ks(),this.ct=NaN,this.PR=!1,this.lt=void 0,this.MR=void 0,this.OR=void 0,this.WR=!1,this.qR=!0,this.tI=se.pB().ks(),this.iI=el.$H,this.rI=Ht.eO,this.hI=se.pB().ks(),this.$G=void 0,this.nt=new Wo,this.dI=0,this.rt=new Ke,this.vI=0,this.yI=new _I,this.iH=new Yh,this.ea=new N,this.ta=new CI}},DI=class extends PI{set _Z(t){this.bH=t,this.WB=t.OH(ee.mE)}TI(){var t;return null==(t=this.WB)?void 0:t.jG}async yn(){await super.yn(),this.WB&&(await this.bH.yH(this.WB),this.WB=void 0)}constructor(...t){super(...t),this.bH=void 0,this.WB=void 0}},NI=class extends RI{get we(){return this.Cu}get AI(){return this.na.AI}set AI(t){this.na.AI=t}kI(){super.kI(),this.mZ.vZ()}pr(t){JT(this,t)}dr(){}LI(t){return!1}async Ca(t,e){const i=this.SI(),s=this.TI();await super.Ca(t,e),this.SI()!==i&&this._o(new ho),this.TI()!==s&&this._o(new ek)}RR(t,e){this.na.RR(t,e)}oZ(t,e){return t.uP(this.Cu,this.mZ,this.fW,this.MT,this.gZ,this.pZ,this.wZ,e)}TI(){return this.na.TI()}pR(){return this.mZ.yZ.map((t=>t.jG))}async yn(){await super.yn(),this.mZ.yn(),this.bZ.yn()}constructor(t,e,i,s,n,r,o){const h=new DI;super(kI.Vg,h),this.Cu=t,this.MT=e,this.fW=i,this.gZ=s,this.pZ=n,this.wZ=o,this.mZ=new Ao(r,this.wZ),this.mZ.AZ(this.Cu),h._Z=this.mZ,this.bZ=new EI(this.Cu)}};r(),r();var MI=class extends sn{get ht(){return this.SZ}get wR(){return se.pB().ks()}get bR(){return new Date(NaN)}set bR(t){}get bt(){}get ER(){return 0}set ER(t){}RR(t,e){}get ct(){return 0}get we(){return this.Cu}get PR(){return!0}get lt(){return this.TZ}get MR(){return this.kZ}get OR(){}get GR(){return{_O:0,vO:0,mO:0,gO:0,pO:0,wO:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}}}get ZR(){return!1}set ZR(t){}get qR(){return!0}get KR(){return!0}get QR(){return 0}set QR(t){}get tI(){return se.pB().ks()}get iI(){return el.$H}set iI(t){}get rI(){return Ht.eO}get hI(){return se.pB().ks()}get uI(){return!1}get nt(){return this.EZ}get dI(){return 0}get rt(){return this.SZ}get vI(){return 0}get gI(){return 1}set gI(t){}get yI(){return this.tH}get AI(){return!1}set AI(t){}LI(t){return!0}be(){}xI(){throw this._o(new Na(this.kZ)),this.TZ}EI(){}iu(){}async Ca(t,e){throw J(e),this._o(new Na(this.kZ)),this.TZ}ge(){}RI(){return Promise.resolve()}TI(){}SI(){return this.ea}ja(){return this.ta}pR(){return[]}kI(){}pr(t){}dr(){}get WR(){return!1}II(){return!1}CI(){}DI(){}NI(){}MI(){}OI(t){}nr(){return Promise.resolve()}yn(){return this.Ro(),this.SZ.yn(),this.EZ.yn(),Promise.resolve()}constructor(t,e,i){super(),this.ea=new N,this.ta=new CI,this.tH=new _I,this.Cu=t,this.TZ=e,this.SZ=new Ke,this.EZ=new Wo,this.kZ=i}};function LI(t){if(t&&V(t))return ol({},t,{integration:BI(t.integration),fairplay:GI(t.fairplay),widevine:OI(t.widevine),playready:FI(t.playready),clearkey:HI(t.clearkey),aes128:ZI(t.aes128),integrationParameters:XI(t.integrationParameters),preferredKeySystems:zI(t.preferredKeySystems),useOipfDrmAgent:Fu(t.useOipfDrmAgent)})}function BI(t){if(Yt(t))return t}function OI(t){if(t&&V(t))return{persistentState:VI(t.persistentState),distinctiveIdentifier:VI(t.distinctiveIdentifier),audioRobustness:WI(t.audioRobustness),videoRobustness:WI(t.videoRobustness),licenseAcquisitionURL:Yt(t.licenseAcquisitionURL)?t.licenseAcquisitionURL:void 0,licenseType:UI(t.licenseType),headers:t.headers,useCredentials:!!yd(t.useCredentials)&&t.useCredentials,queryParameters:t.queryParameters,certificate:Yt(t.certificate)||Qg(t.certificate)?t.certificate:void 0}}function FI(t){if(!t)return;const e=OI(t);if(!e)return;return ol({},e,{customData:Yt(t.customData)?t.customData:void 0})}function VI(t){switch(null==t?void 0:t.toLowerCase()){case"required":return"required";case"optional":return"optional";case"not-allowed":return"not-allowed"}}function WI(t){switch(t){case"HW_SECURE_ALL":return"HW_SECURE_ALL";case"HW_SECURE_DECODE":return"HW_SECURE_DECODE";case"HW_SECURE_CRYPTO":return"HW_SECURE_CRYPTO";case"SW_SECURE_DECODE":return"SW_SECURE_DECODE";case"SW_SECURE_CRYPTO":return"SW_SECURE_CRYPTO";case"":return""}}function UI(t){switch(null==t?void 0:t.toLowerCase()){case"temporary":return"temporary";case"persistent":return"persistent"}}function GI(t){if(!t)return;const e=OI(t);if(!e)return;return ol({},e,{certificateURL:Yt(t.certificateURL)?t.certificateURL:void 0})}function HI(t){if(!t)return;const e=OI(t);if(!e)return;const i=$c(t.keys)?t.keys.map((t=>function(t){if(!t||!V(t))return;const e=t.id,i=t.value;if(!Yt(e)||!Yt(i))return;return{id:e,value:i}}(t))).filter(Bo):void 0;return ol({},e,{keys:i})}function ZI(t){if(V(t))return{useCredentials:yd(t.useCredentials)?t.useCredentials:void 0}}function XI(t){if(V(t))return t}function zI(t){return t&&$c(t)?t.map((t=>rT(t))).filter(Bo):[am,om,Ve]}r(),r(),r(),r();var qI={bt:void 0,ER:0,ct:NaN,PR:!1,lt:void 0,MR:void 0,ZR:!1,KR:!0,QR:1,rI:Ht.eO,uI:!1,dI:0,vI:0,gI:1};r();var lu=function(t){return t.DEFAULT="",t.THEO="theo",t.CSAI="csai",t.GOOGLE_IMA="google-ima",t.SPOTX="spotx",t.FREEWHEEL="freewheel",t.MEDIATAILOR="mediatailor",t.THEOADS="theoads",t.UPLYNK="uplynk",t}({}),yh=class{get xZ(){return this.RZ}IZ(t){const e=this.RZ.filter((e=>e.CZ(t)));if(e.length>1)0;else if(0===e.length)throw g("Unknown ad integration: "+t.integration);return e[0]||null}PZ(t){this.RZ.push(t)}constructor(){this.RZ=[]}};yh.Vg=new yh,r(),r(),r(),r();var Ae=function(t){return t.UL="PLAYING",t.DZ="PAUSED",t.NZ="SEEK",t.MZ="STALLED",t.LZ="FAILED",t.BZ="INITIAL_BUFFERING",t.OZ="NO_ACCESS",t}({}),YI=function(t){return t.FZ="HTTP_REQUEST_STATUS_CODE_1XX",t.VZ="HTTP_REQUEST_STATUS_CODE_2XX",t.WZ="HTTP_REQUEST_STATUS_CODE_3XX",t.UZ="HTTP_REQUEST_STATUS_CODE_4XX",t.GZ="HTTP_REQUEST_STATUS_CODE_5XX",t.HZ="BUFFER_LENGTH",t.ZZ="BYTES_RECEIVED",t.XZ="SEGMENT_READ_BITRATE",t.zZ="SEGMENT_PROFILE_BITRATE",t.qZ="VIDEO_PROFILE_BITRATE",t.YZ="NUMBER_OF_FRAMES_DROPPED",t.KZ="PLAYBACK_POSITION",t.jZ="NUMBER_OF_FRAMES_DECODED",t.QZ="PLAYBACK_DELTA_TO_ORIGIN",t.JZ="STREAM_DELTA_TO_ORIGIN",t.$Z="ORIGIN_TIMESTAMP",t}({}),KI=function(t){return t.tX="MANIFEST_URI",t.eX="ASSET_DURATION",t.iX="NUMBER_OF_CONTENT_PROFILES",t.sX="CDN",t.nX="CONTENT_TITLE",t.rX="SERVICE_NAME",t.oX="CONTENT_TYPE",t.hX="CONTENT_DESCRIPTION",t}({}),jI=function(t){return t.aX="shutdown_normal_shutdown",t}({}),QI=function(t){return t.uX="session/",t.cX="content/",t.lX="internalError/",t.dX="drmError/",t.fX="caError/",t._X="networkError/",t}({}),JI=class{get code(){return this.category+this.statusCode}constructor(t,e){this.category=t,this.statusCode=e}},$I=class extends Co{};r(),r(),r();var tC=function(t){return t.PAUSE="vX",t.RESUME="mX",t}({}),eC=class extends pe{constructor(){super("gX")}},$i=class extends Co{pX(){this.wX=!0}yX(){}yn(){this.wX=!1,this.bX.vn(tC.PAUSE,this.AX),this.bX.vn(tC.RESUME,this.SX)}TX(){return isFinite(this.na.jd())}constructor(t,e){super(),this.na=t,this.bX=e,this.wX=!1,this.AX=()=>{this.yX(),this.wX=!1},this.SX=()=>{this.wX=!0},this.bX.bn(tC.PAUSE,this.AX),this.bX.bn(tC.RESUME,this.SX)}},iC=class extends $i{pX(){super.pX(),this.kX()}yn(){this.EX(),super.yn()}kX(){this.na.bn(Zc.WL,this.xX),this.na.bn(Ti.zy,this.RX),this.na.bn(Zc.UL,this.IX),this.na.bn(Ti.Jy,this.CX),this.na.bn(Ti.Qy,this.PX)}EX(){this.na.vn(Zc.WL,this.xX),this.na.vn(Ti.zy,this.RX),this.na.vn(Zc.UL,this.IX),this.na.vn(Ti.Jy,this.CX),this.na.vn(Ti.Qy,this.PX)}DX(){this.NX=!0}MX(){const t=this.na.NR(),e=new JI(QI.lX,String(t.code));this.LX(Ae.LZ,e,t.message)}BX(t){this.wX&&(this.bX.OX(t),this._o(new eC))}LX(t,e,i){this.bX.FX(t,e,i),this._o(new eC)}VX(t,e){this.bX.WX(t,e)}constructor(...t){super(...t),this.NX=!1,this.UX=!1,this.GX=!1,this.xX=()=>{this.UX&&!this.GX&&this.BX(Ae.MZ)},this.IX=()=>{this.na.KR||(this.UX||this.VX(new JI(QI.cX,"firstFrameDisplayed"),"now"),this.UX=!0,this.BX(Ae.UL))},this.RX=()=>{this.na.KR&&(this.UX=!0,this.BX(Ae.DZ))},this.CX=()=>{this.NX&&(this.GX=!0,this.NX=!1,this.BX(Ae.NZ))},this.PX=()=>{this.GX=!1,this.na.KR&&this.BX(Ae.DZ)}}};r();var sC=class extends $i{pX(){super.pX(),this.HX(),this.kX()}yn(){this.EX(),super.yn()}kX(){this.na.rt.bn(No.da,this.HX),this.na.XX.ZX(this.zX),this.na.bn(Ti.Iy,this.qX)}EX(){this.na.rt.vn(No.da,this.HX),this.na.XX.YX(this.zX),this.na.vn(Ti.Iy,this.qX)}KX(t){t.serviceName&&this.jX(KI.rX,t.serviceName),t.cdn&&this.jX(KI.sX,t.cdn),t.contentTitle&&this.jX(KI.nX,t.contentTitle),t.contentType&&this.jX(KI.oX,t.contentType),t.contentDescription&&this.jX(KI.hX,t.contentDescription)}jX(t,e){this.wX&&this.bX.QX(t,e)}constructor(...t){super(...t),this.qX=()=>{this.TX()&&this.jX(KI.eX,_.round(this.na.jd()))},this.zX=t=>{"manifest"===t.request.type&&this.jX(KI.tX,t.url)},this.HX=()=>{const t=Fo(this.na.rt.lC,(t=>t.Rt));t&&this.jX(KI.iX,t.NC.V)}}};r();var nC=class extends $i{pX(){super.pX(),this.JX=this.na.GR._O,this.$X=this.na.GR.mO,this.kX(),this.tz.push(p(this.ez,1e3))}yX(){super.yX(),this.iz()}yn(){this.iz(),this.EX(),this.tz.forEach(m),En(this.tz),super.yn()}kX(){this.na.XX.ZX(this.nz),this.na.bn(Ti.sb,this.rz)}EX(){this.na.XX.YX(this.nz),this.na.vn(Ti.sb,this.rz)}oz(){this.iz()}cz(t){this.lz+=t,this.fz(YI.ZZ,this.lz)}_z(t,e){const i=this.vz.get(e)||0;this.fz(t,i)}mz(){const t=this.na.GR._O-this.JX;this.fz(YI.YZ,t)}gz(){const t=this.na.GR.mO-this.$X;this.fz(YI.jZ,t)}pz(){const t=gu.Vg.cG();this.fz(YI.XZ,tp(t))}wz(t){this.fz(YI.zZ,tp(t)),this.fz(YI.qZ,tp(t))}iz(){if(!this.TX())return;const t=_.round(Ha(this.na.xR()));this.fz(YI.KZ,t)}yz(){const t=se.Cn(this.na.yR()),e=this.na.xR(),i=t._B(e),s=i?Ha(i.Tn(0)-e):0;this.fz(YI.HZ,s)}fz(t,e){this.wX&&this.bX.bz(t,e)}constructor(...t){super(...t),this.vz=Oh(),this.lz=0,this.JX=0,this.$X=0,this.tz=[],this.ez=()=>{this.mz(),this.gz(),this.yz()},this.rz=t=>{t.EE===ee.mE&&(this.cz(t.pO),this.pz(),this.wz(t.Az),this.iz())},this.nz=t=>{const e=t.status.toString()[0],i=this.vz.get(e)||0;this.vz.set(e,i+1),this._z(YI.FZ,"1"),this._z(YI.VZ,"2"),this._z(YI.WZ,"3"),this._z(YI.UZ,"4"),this._z(YI.GZ,"5")}}};r();function rC(t){return t&&t.integration===lC}function oC(t){if(!Yt(t.asset))throw new b("Agama source configuration: expected 'asset' to be a string");if(!function(t){return!!Yt(t)&&("live"===t||"vod"===t)}(t.streamType))throw new b("Agama source configuration: expected 'streamType' to be 'live' or 'vod'");if(void 0!==t.serviceName&&!function(t){return!!Yt(t)&&("live"===t||"svod"===t||"nvod"===t||"tvod"===t||"avod"===t||"catchuptv"===t)}(t.serviceName))throw new b("Agama source configuration: expected 'serviceName' to be 'live', 'svod', 'nvod','tvod', 'avod' or 'catchuptv'");if(void 0!==t.cdn&&!Yt(t.cdn))throw new b("Agama source configuration: expected 'cdn' to be a string");if(void 0!==t.contentTitle&&!Yt(t.contentTitle))throw new b("Agama source configuration: expected 'contentTitle' to be a string");if(void 0!==t.contentType&&!Yt(t.contentType))throw new b("Agama source configuration: expected 'contentType' to be a string");if(void 0!==t.contentDescription&&!Yt(t.contentDescription))throw new b("Agama source configuration: expected 'contentDescription' to be a string");return t}function hC(t){if(!Yt(t.config))throw new b("Agama player configuration: expected 'config' to be a string");if(void 0!==t.logLevel&&!function(t){return!!Yt(t)&&("info"===t||"debug"===t||"warning"===t||"error"===t||"fatal"===t)}(t.logLevel))throw new b("Agama player configuration: expected 'logLevel' to be 'info', 'debug', 'warning','error' or 'fatal'");if(void 0!==t.application&&!Yt(t.application))throw new b("Agama player configuration: expected 'application' to be a string");if(void 0!==t.applicationVersion&&!Yt(t.applicationVersion))throw new b("Agama player configuration: expected 'applicationVersion' to be a string");if(void 0!==t.userAccountID&&!Yt(t.userAccountID))throw new b("Agama player configuration: expected 'userAccountID' to be a string");if(void 0!==t.deviceID&&!Yt(t.deviceID))throw new b("Agama player configuration: expected 'deviceID' to be a string");return t}function aC(){let t="00000000-0000-0000-0000-000000000000",e=s.navigator,i=s.screen,n=""+e.mimeTypes.length;n+=e.userAgent.replace(/\D+/g,""),n+=e.plugins.length,n+=i.height||"",n+=i.width||"",n+=i.pixelDepth||"",n+=_.floor(1e3*_.random());let r=function(t){let e,i,s=0;if(0===t.length)return"0";for(e=0;e<t.length;e++)i=t.charCodeAt(e),s=(s<<5)-s+i,s|=0;return _.abs(s).toString().substring(0,12)}(n);return t=[t.slice(0,t.length-r.length),r].join(""),t}function uC(t,e,i){const s=e,n=function(t,e){return zh(e)?t.DsProtocol.APPLE_HLS:t.DsProtocol.MPEG_DASH}(t,s.type),r=function(t,e){let i=t.DsPlaylistType.VOD;"live"===e&&(i=t.DsPlaylistType.LIVE);return i}(t,i.streamType);return{asset:i.asset,playlistType:r,protocol:n,uri:s.src}}r();var Nn=function(t){return t.UNAVAILABLE="unavailable",t.AVAILABLE="available",t.CONNECTING="connecting",t.CONNECTED="connected",t}({}),cC=class{Sz(){this.na.vn(yo.fa,this.Tz),this.kz(),this.Ez(),this.bX.xz()}Rz(){this.na.Iz.wa.chromecast&&this.na.Iz.wa.chromecast.addEventListener("statechange",this.Cz)}Ez(){this.na.Iz.wa.chromecast&&this.na.Iz.wa.chromecast.removeEventListener("statechange",this.Cz)}Pz(){return void 0!==this.na.Iz.wa.chromecast&&this.na.Iz.wa.chromecast.state===Nn.CONNECTED}yn(){this.na.vn(Ti.uo,this.co),this.na.vn(Ti.ho,this.Dz),this.na.vn(Ti.Dy,this.Nz),this.Sz(),this.bX.yn()}Mz(){this.Lz||(this.Lz=new iC(this.na,this.bX)),this.Bz||(this.Bz=new nC(this.na,this.bX)),this.Oz||(this.Oz=new sC(this.na,this.bX))}pX(){this.Lz&&(this.Lz.pX(),this.Lz.bn("gX",this.Fz)),this.Bz&&this.Bz.pX(),this.Oz&&this.Oz.pX()}kz(){this.Lz&&(this.Lz.vn("gX",this.Fz),this.Lz.yn(),this.Lz=void 0),this.Bz&&(this.Bz.yn(),this.Bz=void 0),this.Oz&&(this.Oz.yn(),this.Oz=void 0)}KX(t){this.Oz&&this.Oz.KX(t)}Vz(){this.Lz&&this.Lz.MX()}DX(){this.Lz&&this.Lz.DX()}constructor(t,e,i){this.na=t,this.bX=e,this.co=()=>{this.Wz(),this.Nz()},this.Wz=()=>{const t=this.na.iu(),e=t&&t.analytics;this.Uz=function(t){void 0===t&&(t=[]);for(let e of t)if(rC(e))return oC(e)}(e)},this.Nz=()=>{this.Sz(),this.na.vn(Ti.ho,this.Dz),!this.Pz()&&this.bX.Gz()&&this.na.bt&&this.Uz&&(this.Mz(),this.na.KR||this.na.PR?this.na.bn(Ti.ho,this.Dz):this.Dz())},this.Dz=()=>{this.na.bt&&this.Uz&&(this.bX.Zz(this.na.bt,this.Uz),this.pX(),this.KX(this.Uz),this.Rz(),this.na.bn(yo.fa,this.Tz),this.na.vn(Ti.ho,this.Dz))},this.Cz=()=>{this.Pz()&&this.Sz()},this.Tz=()=>{this.Vz(),this.Sz()},this.Fz=()=>{this.Bz&&this.Bz.oz()};const s=function(t){void 0===t&&(t=[]);for(const e of t)if(rC(e))return hC(e)}(i.analytics);s&&this.bX.Xz()&&(this.bX.kI(s),this.bX.Gz()?(this.bX.zz(),this.na.bn(Ti.uo,this.co),this.na.bn(Ti.Dy,this.Nz)):console.warn("An error occurred while initializing an Agama EMP client. Please check your configuration"))}},lC="agama";r(),r();var dC=function(t){return t.NONE="",t.HORIZONTAL="horizontal",t.VERTICAL="vertical",t}({});r();var fC=function(t){return t.NONE="",t.PM360="360",t.PM180="180",t}({});function _C(t){switch(t){case"":return dC.NONE;case"horizontal":return dC.HORIZONTAL;case"vertical":return dC.VERTICAL;default:throw new b}}function vC(t,e){if(e)return fC.PM360;if(null==t)return fC.NONE;switch(t){case"":return fC.NONE;case"360":return fC.PM360;case"180":return fC.PM180;default:throw new b("Provided panoramaMode value is not recognized. Expected '', '360' or '180' but value was "+t)}}r();var qn=function(t){return t.ASSET="asset",t.CHANNEL="channel",t.EVENT="event",t}({});r();var mC="https://content.uplynk.com";function gC(t){if(!t)return!0;const e=!function(t){return ll(t)||nc(t)&&ll(t[0])}(t.sources)||Fn(t.sources),i=!t.ads||pC(t.ads),s=""!==t.poster&&!t.poster;return e&&i&&s}function pC(t){return!t||$c(t)&&0===t.length}function wC(t){if(t&&t.sources)return yC(t.sources)}function yC(t){return Yt(t)?vu(t):Cn(t)?t.type||t.src&&vu(t.src):nc(t)&&t.length>0?yC(t[0]):void 0}function bC(t){if(t&&t.sources)return AC(t.sources)}function AC(t){return Yt(t)?t:Cn(t)?t.src:nc(t)&&t.length>0?AC(t[0]):void 0}function SC(t,e,i){return Kc(t)?function(t,e,i){let s=ol({},VT(),{ping:{adImpressions:!1,freeWheelVideoViews:!1,linearAdData:!1},integration:ET.UPLYNK,id:"",prefix:mC,preplayParameters:{},playbackUrlParameters:{},assetType:qn.ASSET,contentProtected:!1,assetInfo:!0});s.id=function(t){if(Yt(t))return t;if(nc(t)&&Yt(t[0]))return t;if(function(t){return V(t)&&Yt(t.userId)&&(nc(t.externalId)||Yt(t.externalId))}(t))return t;return""}(t.id),t.preplayParameters&&(s.preplayParameters=t.preplayParameters);t.playbackUrlParameters&&(s.playbackUrlParameters=t.playbackUrlParameters);t.assetType&&(s.assetType=function(t){switch(t){case"channel":return qn.CHANNEL;case"event":return qn.EVENT;default:return qn.ASSET}}(t.assetType));t.contentProtected&&(s.contentProtected=Fu(t.contentProtected));t.assetInfo?s.assetInfo=Fu(t.assetInfo):s.assetInfo="asset"===s.assetType;t.prefix&&(s.prefix=hs(t.prefix)||mC);return s.ping=function(t,e){let i=!1,s=!1,n=!1;e?(i=!!yd(e.adImpressions)&&e.adImpressions,s=!!yd(e.freeWheelVideoViews)&&e.freeWheelVideoViews,n=yd(e.linearAdData)?e.linearAdData:t!==qn.ASSET):t!==qn.ASSET&&(n=!0);return{adImpressions:i,freeWheelVideoViews:s,linearAdData:n}}(s.assetType,t.ping),s=kC(s,t),s=xC(s,e,i),s=EC(s,t,i),s}(t,e,i):LT(t)?function(t,e,i){var s;return ol({},TC(t,e,i),{integration:ET.MEDIATAILOR,adParams:null!=(s=t.adParams)?s:{}})}(t,e,i):MT(t)?function(t,e,i){return ol({},TC(t,e,i),{type:"theolive"})}(t,e,i):zc(t)?function(t,e,i){return ol({},TC(t,e,i),{type:Bc.$C,src:t.src,streamAccountId:t.streamAccountId,subscriberToken:t.subscriberToken,connectOptions:CC(t.connectOptions),apiUrl:t.apiUrl})}(t,e,i):TC(t,e,i)}function TC(t,e,i){let s=WT();const n=e&&(e.contentProtection||e.drm);if(Yt(t)){if(s.src=t,s.type=vu(t),n){const t=LI(n);s.contentProtection=aT(t)}}else if(Cn(t)||qc(t)||zc(t)){s.src=t.src,s.type=t.type||vu(t.src),s.isAdvertisement=t.isAdvertisement;const e=FT(t)?t.hesp:void 0;void 0!==e&&(s.hesp=e);LT(t)&&(s.integration=t.integration);const i=LI(t.contentProtection||t.drm||n);s.contentProtection=aT(i),t.ssai&&(s.ssai=_S(t.ssai)),s=kC(s,t)}return s=xC(s,e,i),s=EC(s,t,i),s}function kC(t,e){var i,s;e.useCredentials?t.crossOrigin=Ih.zC:e.crossOrigin&&(t.crossOrigin=DT(e.crossOrigin)),Yt(e.timeServer)&&(t.timeServer=e.timeServer),e.liveOffset&&(t.liveOffset=e.liveOffset),e.hlsDateRange&&(t.hlsDateRange=e.hlsDateRange),e.lowLatency&&(t.lowLatency=Fu(e.lowLatency)),e.useNativePlayback&&(t.useNativePlayback=Fu(e.useNativePlayback)),e.useManagedMediaSource&&(t.useManagedMediaSource=Fu(e.useManagedMediaSource)),e.dash&&(t.dash=uT(e.dash)),e.hls&&(t.hls=cT(e.hls)),e.lcevc&&(t.lcevc=Fu(e.lcevc)),e.ignoreEmbeddedTextTrackTypes&&(t.ignoreEmbeddedTextTrackTypes=HT(e.ignoreEmbeddedTextTrackTypes)),e.latencyConfiguration&&(t.latencyConfiguration=kT(e.latencyConfiguration)),t.seamlessSwitchStrategy=xT(null!=(s=e.seamlessSwitchStrategy)?s:null==(i=e.dash)?void 0:i.useSeamlessPeriodSwitch);const n=vi(e.experimentalRendering);void 0!==n&&(t.experimentalRendering=n);const r=vi(e.nativeUiRendering);return void 0!==r&&(t.nativeUiRendering=r),t}function EC(t,e,i){return t.abr=_T(Yt(e)?void 0:fT(e.abr),null==i?void 0:i.abr),t}function xC(t,e,i){var s;const n=e&&e.timeServer;return i&&i.liveOffset&&!Bo(t.liveOffset)&&(t.liveOffset=i.liveOffset),i&&i.hlsDateRange&&!Bo(t.hlsDateRange)&&(t.hlsDateRange=i.hlsDateRange),t.crossOrigin===Ih.wE&&(null==e||null==(s=e.vr)?void 0:s[360])&&(t.crossOrigin=Ih.XC),t.useCredentials=t.crossOrigin===Ih.zC,Yt(n)&&!t.timeServer&&(t.timeServer=n),t}function RC(t){const e={src:""};if(t&&t.src){if(e.src=hs(t.src),"default"in t&&(e.default=Fu(t.default)),e.kind=function(t){const e=String(t||"").toLowerCase();return lx(e)?e:e?"metadata":"subtitles"}(t.kind),CT(t.format)&&(e.format=t.format),"srclang"in t){const i=t.srclang;"string"==typeof i&&""!==i&&(e.srclang=i)}if("label"in t){const i=t.label;"string"==typeof i&&""!==i&&(e.label=i)}}return e}function IC(t,e){if(V(t))try{return e.IZ(t).qz(t)}catch(t){return}}function CC(t){if(null==t)return t;if(!V(t))throw new g("connectOptions must be an object");return t}function _c(t,e,i){if(void 0===i&&(i=yh.Vg),gC(t))return{sources:[WT()]};const s=tu(t);if(s.sources=function(t,e,i){if(ll(t))return[SC(t,e,i)];if(nc(t)&&ll(t[0])){const s=[];for(const n of t)s.push(SC(n,e,i));return s}return[WT()]}(s.sources,s,e),"contentProtection"in s&&delete s.contentProtection,"drm"in s&&delete s.drm,"ads"in s){const t=function(t,e){if(!nc(t))return[];const i=[];for(let s of t)s=IC(s,e),s&&i.push(s);return i}(s.ads,i);0===t.length?delete s.ads:s.ads=t}const n=!Fn(s.sources),r=s.ads&&s.ads.length>0;if(n&&!r?delete s.ads:r&&!n&&(s.sources=[]),"textTracks"in s){const t=function(t){if(!nc(t))return[];const e=[];for(let i of t)i=RC(i),""!==i.src&&e.push(i);return e}(s.textTracks);0===t.length?delete s.textTracks:s.textTracks=t}"poster"in s&&(s.poster=hs(s.poster)),"streamType"in s&&(s.streamType=function(t){switch(t){case"live":case"dvr":case"vod":return t}}(s.streamType)),"vr"in s&&(s.vr=function(t){const e=t||{};return e.stereoMode=function(t){return function(t){switch(t){case"":case"horizontal":case"vertical":return!0;default:return!1}}(t)?t:""}(e.stereoMode),{panoramaMode:vC(e.panoramaMode,Boolean(e[360])),stereoMode:e.stereoMode?_C(e.stereoMode):dC.NONE,nativeVR:Boolean(e.nativeVR)}}(s.vr));if("analytics"in s||(null==e?void 0:e.analytics)){const t=GT(s.analytics),i=e&&e.analytics||[];s.analytics=function(t,e){const i=tu(t);for(const s of e){const e=!t.some((t=>t.integration===s.integration));e&&s.integration!==lC&&i.push(s)}return i}(t,i)}return"mutedAutoplay"in s&&(s.mutedAutoplay=KT(s.mutedAutoplay)),"timeServer"in s&&delete s.timeServer,"playAdsAfterTime"in s&&(s.playAdsAfterTime=eo(s.playAdsAfterTime)),s.blockContentIfAdError=function(t){return void 0!==t&&"boolean"==typeof t&&Boolean(t)}(s.blockContentIfAdError),s}r(),r(),r();var wh=function(){function t(t){this.Yz=t}return t.prototype.Kz=function(t){var e,i,s,n,r,o,h,a=[];if(!t)return"";var u=t.length%4;if(u>0)for(;u++<4;)t+=this.Yz.charAt(64);for(e=0;e<t.length;e+=4)i=(h=this.Yz.indexOf(t.charAt(e))<<18|this.Yz.indexOf(t.charAt(e+1))<<12|(r=this.Yz.indexOf(t.charAt(e+2)))<<6|(o=this.Yz.indexOf(t.charAt(e+3))))>>>16&255,s=h>>>8&255,n=255&h,a[e/4]=String.fromCharCode(i,s,n),64===o&&(a[e/4]=String.fromCharCode(i,s)),64===r&&(a[e/4]=String.fromCharCode(i));return a.join("")},t.prototype.jz=function(t,e){var i,s,n,r,o,h,a,u=[],c="";if((h=t.length%3)>0)for(;h++<3;)c+=this.Yz.charAt(64),t+="\0";for(h=0;h<t.length;h+=3)s=(i=t.charCodeAt(h)<<16|t.charCodeAt(h+1)<<8|t.charCodeAt(h+2))>>18&63,n=i>>12&63,r=i>>6&63,o=63&i,u[h/3]=this.Yz.charAt(s)+this.Yz.charAt(n)+this.Yz.charAt(r)+this.Yz.charAt(o);return a=(a=u.join("")).slice(0,a.length-c.length),e||(a+=c),a},t.mh=new t(function(){var t,e,i,s,n=[],r=["object","$","undefined","function","Cannot find module '","MODULE_NOT_FOUND","*","com.widevine.alpha","urn:mpeg:dash:mp4protection:2011","^","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed","__proto__","@@iterator","getUTCHours","setUTCFullYear","25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?","SegmentBase","RateChangeEvent","Symbol(","Symbol.",'; codecs="'];for(t=0;t<r.length;t+=1)for(e=r[t],i=0;i<e.length;i+=1)s=e.charAt(i),-1===n.indexOf(s)&&n.push(s);return n.join("")}()),t.Qz=new t(function(t){return t.Kz("aDtm.Dd_DE.4DuN$CeaD $t?FUa0ac'NlYsgU]dU*|sMCON9NL.i'YU M:.LiEb5TLaTOu18F|'v*:s7C41nOMop")}(t.mh)),t}();function PC(t){return"string"==typeof t}function DC(t){return"number"==typeof t}r(),r(),r();var NC={}.toString;var le,MC=Array.isArray||function(t){return"[object Array]"===NC.call(t)};function LC(t,e){return MC(t)&&t.every(e)}!function(t){t.HTML5="html5",t.ANDROID="android",t.IOS="ios",t.TVOS="tvos",t.ANDROIDTV="androidtv",t.TIZEN="tizen",t.WEBOS="webos",t.CHROMECAST="chromecast",t.ROKU="roku",t.FIRETV="firetv",t.CHROMECASTCAF="chromecastcaf",t.THEOLIVEWEB="theoliveweb",t.KEPLER="kepler"}(le||(le={}));var BC,OC=w.keys(le).map((function(t){return le[t]}));function FC(t){return-1!==OC.indexOf(t)}!function(t){t.HESP="hesp",t.MULTIVIEW="multiview",t.THEOADS="theoads",t.MILLICAST="millicast"}(BC||(BC={}));var VC,WC=w.keys(BC).map((function(t){return BC[t]}));function UC(t){return-1!==WC.indexOf(t)}function GC(t){try{var e=wh.Qz.Kz(t),i=JSON.parse(e);if(!function(t,e){var i,s=function(t){return"object"==typeof t&&null!==t}(t),n=PC(t.key),r=PC(t.customer_id),o=DC(t.generation_date),h=DC(t.expiration_date),a=LC(t.domains_page,PC),u=LC(t.domains_source,PC),c=LC(t.sdks,e?FC:PC),l=function(t){return"boolean"==typeof t}(t.send_impression);t.features?i=LC(t.features,e?UC:PC):(i=!0,t.features=[]);if(!(s&&n&&r&&o&&h&&a&&u&&c&&l&&i))return!1;return!0}(i,!1))throw new g("The provided license could not be decoded correctly.");return i}catch(t){throw new g("The provided license could not be decoded correctly.")}}function HC(){return VC||(VC={Xu:s.location.href,Jz:s.parent&&s.parent!==s,$z:XC()}),VC}var ZC=["http:","https:","ftp:","ws:","wss:"];function XC(){var t,e;try{var i;if(null==(i=s)?void 0:i.top)return s.top.location.href}catch(t){}return null==(e=s)||null==(t=e.document)?void 0:t.referrer}var zC=function(t){return t[t.tq=0]="tq",t[t.iq=1]="iq",t[t.nq=2]="nq",t}({}),qC=class{constructor(t,e,i,s,n=[],r="",o=Date.now(),h=[],a=!0){this.rq=t,this.oq=e,this.hq=i,this.aq=s,this.uq=n,this.cq=r,this.lq=o,this.dq=h,this.fq=a}},YC=function(t){return t.iq="expired",t._q="invaliddomain",t.vq="invalidsource",t.mq="invalidfeature",t.fa="error",t}({}),KC=class t{gq(t,e){let i=[];ll(t.sources)?i=[t.sources]:nc(t.sources)&&(i=t.sources),this.pq(t,i,e),this.wq(i,e)}pq(t,e,i){if(gC(t)||0===i.hq.length||eP(i.hq))return;if(!e.every((t=>this.yq(t,i)))){const t="invalidsource",e=rP.bq(t);throw new A(QC(t),e)}}wq(t,e){for(const i of t)Cn(i)&&FT(i)&&!i.bypassLicense&&this.Aq([BC.HESP],e)}Sq(e){return this.Tq(e.dq)&&this.kq(e)?t.Eq(e.aq)?0:1:2}Aq(t,e){for(const i of t)if(!ms(e.uq,i)){const t="invalidfeature",e=rP.xq(t,i);throw new A(QC(t),e)}}Tq(t){return 0===t.length||t.some((t=>this.Rq(t)))}Rq(t){return"web"===function(t){switch(t){case le.ANDROID:return Xt.Ev;case le.ANDROIDTV:case le.FIRETV:return Xt.xv;case le.IOS:return Xt.Rv;case le.TVOS:return Xt.Iv;case le.CHROMECAST:case le.CHROMECASTCAF:return Xt.Cv;case le.THEOLIVEWEB:return Xt.Pv;default:return Xt.Tv}}(t)}static Eq(t){const e=Number(new Date);return!!t&&e<=t}kq(t){return!(this.Iq&&0!==t.oq.length&&!eP(t.oq))||!!(this.Iq&&this.Cq(t.oq)&&this.Pq(t.oq))}Cq(t){return iP(this.xA.Xu,t)}Pq(t){if(!this.xA.Jz)return!0;if(this.Dq)return!0;const e=this.Nq();return!!e&&iP(e,t)}Nq(){if(!this.xA.Jz)return;const t=Nl.ancestorOrigins;return t&&t.length>0?t[t.length-1]:this.xA.$z?this.xA.$z:void 0}yq(e,i){return!!t.Mq(e,i.hq)}static Mq(t,e){return iP(this.Lq(t),e)}static Lq(t){return Yt(t)?t:Cn(t)&&t.src||""}constructor(t,e,i){this.Dq=t,this.Bq=e,this.xA=i,this.Iq=nP(this.xA)}},jC=class{Sq(t){return 0}gq(t,e){}Aq(t,e){}};function QC(t){switch(t){case"invaliddomain":return Qa.LICENSE_INVALID_DOMAIN;case"invalidsource":return Qa.LICENSE_INVALID_SOURCE;case"expired":return Qa.LICENSE_EXPIRED;case"invalidfeature":return Qa.LICENSE_INVALID_FEATURE;case"error":return Qa.LICENSE_ERROR}}var JC="25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?",$C=sl((()=>{const t="\\.",e="(\\*|"+JC+")";return new RegExp("ip-range\\("+e+t+e+t+e+t+e+"\\)")}));function tP(t,e){let i=t,s=e;if(!i)return!1;if(s=s.trim(),"*"===s)return!0;if(i=i.replace(/\.+$/,""),s===i)return!0;if(Cl(s,"ip-range(")){const t="\\.",e=s.match($C()),n=t=>"*"===t?"("+JC+")":t;if(null!==e&&5===e.length){const s=new RegExp("^"+e[1]+t+n(e[2])+t+n(e[3])+t+n(e[4])+"$");return null!==i.match(s)}}return s="."+s,-1!==i.indexOf(s,i.length-s.length)}function eP(t){return t.some((t=>"*"===t))}function iP(t,e){const i=Ms.Ih(t);if(!sP(i))return!0;for(const s of e){if(tP(i.hostname,s))return!0;if(tP(zb(t),s))return!0}return!1}function sP(t){return-1!==ZC.indexOf(t.protocol)}function nP(t){const e=Ms.Ih(t.Xu);return sP(e)&&!function(t){return tP(t.hostname,"localhost")}(e)&&!function(t){return tP(t.hostname,"theoplayer.doubleclick.net")}(e)}var rP=class{static xq(t,e){return"The requested feature '"+e+"' is not available with the license for this player."}static bq(t){return"invaliddomain"===t?this.Oq:"invalidsource"===t?this.Fq:"expired"===t?this.Vq:"invalidfeature"===t?this.Wq:this.Uq}};rP.Uq="The license for this player is invalid.",rP.Vq="The usage license for this video player has expired.",rP.Oq="The current domain is incompatible with the license for this player.",rP.Fq="The provided video source is incompatible with the license for this player.",rP.Wq="The requested feature is not available with the license for this player.",r(),r();var Mo=function(t){return t[t.Gq=1]="Gq",t[t.Hq=4]="Hq",t[t.Zq=5]="Zq",t[t.Xq=9]="Xq",t}({});function oP(t){const e=[t.sL,t.zq,t.qq];switch(t.zq){case 1:e.push(t.VC);break;case 4:e.push(t.ER),e.push(t.lt);break;case 5:e.push(t.lt);break;case 9:e.push(t.Tw)}return e}r();var jt=new Array(256);for(let t=0;t<256;t+=1)jt[t]=(t<16?"0":"")+t.toString(16);function ae(){const t=Ba(),e=(4294967296*_.random()|0)+t&3029421624,i=(4294967296*_.random()|0)+t&3595553209,s=(4294967296*_.random()|0)+t&1130486254,n=(4294967296*_.random()|0)+t&1284287105;return jt[255&e]+jt[e>>>8&255]+jt[e>>>16&255]+jt[e>>>24&255]+"-"+jt[255&i]+jt[i>>>8&255]+"-"+jt[i>>>16&15|64]+jt[i>>>24&255]+"-"+jt[63&s|128]+jt[s>>>8&255]+"-"+jt[s>>>16&255]+jt[s>>>24&255]+jt[255&n]+jt[n>>>8&255]+jt[n>>>16&255]+jt[n>>>24&255]}function hP(t){return $g(t.replace(/-/g,""))}function aP(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(t=>{const e=16*_.random()|0;return("x"===t?e:3&e|8).toString(16)}))}function uP(){return Ms.Wg()}r(),r(),r();var cP,lP="theoplayer-session-id";function dP(){if(!cP){const t=cb.Lb(lP);t?cP=t:(cP=ae(),cb.Bb(lP,cP))}return cP}r(),r();var fP=/[^\x00-\x7E]/g;function _P(t){return"\\u"+Jh(t.charCodeAt(0).toString(16),4,"0")}var vP="https://license.theoplayer.com";function mP(t){const e=function(t){const e=[];return function(t,e,i){return JSON.stringify(t,e,i).replace(fP,_P)}(t,((t,i)=>{if(V(i)){if(-1!==e.indexOf(i))return null;e.push(i)}return i}))}(function(t){return[t.Yq,t.QS,t.rq,t.jD,t.Kq,t.jq,t.Qq.map(oP)]}(t));return wh.Qz.jz(e)}var gP=class{get Qq(){return this.Kf}Jq(){return Boolean(this.Kq)}get Kq(){return this.$q}async tY(t){if(!(await this.iY.eY()).fq)return;const e={zq:Mo.Gq,qq:Ba(),VC:t};await this.VX(e)}async sY(t){if(!(await this.iY.eY()).fq)return;const e={zq:Mo.Xq,qq:Ba(),Tw:t};await this.VX(e)}async nY(t,e){const i={zq:Mo.Hq,qq:Ba(),ER:e,lt:t};await this.VX(i)}async rY(t){const e={zq:Mo.Zq,qq:Ba(),lt:t};await this.VX(e)}async VX(t){const e=await this.iY.eY();"a:n[_O*[C4C-N$_@_MYY $D]iOp]N$_-_]th_:c|aen?C:pH"===this.oY.jz(e.rq)&&t.zq!==Mo.Zq||(t.zq===Mo.Gq?this.hY():this.Jq()||this.hY(),t.sL=this.nS++,this.Kf.push(t),!function(t){return t===Mo.Gq||t===Mo.Zq}(t.zq)?this.Kf.length>this.aY&&await this.uY():await this.cY())}async cY(t){for(void 0===t&&(t=!1);this.Kf.length>0;)await this.uY(t)}async lY(t){const e=await this.iY.eY();return{Yq:Ba(),QS:dP(),rq:this.oY.jz(e.rq)||"dev",jD:this.IS,Kq:this.$q,jq:this.dY,Qq:t}}async uY(t){void 0===t&&(t=!1);const e=this.Kf.splice(0,this.fY),i=await this.lY(e);t?this.NE(i):this._Y(i),this.vY=uP()}async _Y(t){const e=mP(t),i=new wt({Xu:vP,Lk:e,xE:!1,jk:Rr.Tk,Jk:{"Content-Type":fR.RU},SE:4e3,AE:xe.POST});try{const t=await this.fW.Qk(i);await t.Dk()}catch(t){(new Image).src="https://licensing.theoplayer.com/t?"+e}}NE(t){const e=mP(t);this.fW.NE({Xu:vP,Lk:e,Mk:fR.RU})}hY(){this.Jq()&&this.cY(),this.$q=ae(),this.nS=0}yn(){xo.mY(this.gY),m(this.pY),this.cY()}constructor(t,e,i,s=wh.mh,n=0,r=1){this.IS=t,this.fW=e,this.iY=i,this.oY=s,this.aY=n,this.fY=r,this.Kf=[],this.$q=null,this.vY=0,this.dY="unknown",this.nS=0,this.wY=()=>{uP()-this.vY>6e4&&this.cY()},this.gY=()=>{this.cY(!0)},xo.yY(this.gY),this.pY=p(this.wY,6e4)}};r(),r(),r();var pP=0;var wP=v,it=self.requestAnimationFrame||self.webkitRequestAnimationFrame||self.mozRequestAnimationFrame,fo=self.cancelAnimationFrame||self.webkitCancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelRequestAnimationFrame;it&&fo||(it=function(t){const e=uP(),i=_.max(0,16-(e-pP)),s=u((()=>t(e+i)),i);return pP=e+i,s},fo=wP),it=it.bind(self),fo=fo.bind(self);var yP=Z.Zm||Z.su&&Z.og<13;function bP(t,e,i){const s=t.getImageData(e,i,1,1).data;return 0===s[0]&&0===s[1]&&0===s[2]&&0===s[3]}var AP=class{get wa(){var t;return null!=(t=this.eu)?t:this.eu=function(t){return{drawImage(e){for(var i=arguments.length,s=new Array(i>1?i-1:0),n=1;n<i;n++)s[n-1]=arguments[n];return t.bY(e,...s)},texImage2D:(e,i,s,n,r,o)=>t.AY(e,i,s,n,r,o),requestVideoFrameCallback:e=>t.SY(e),cancelVideoFrameCallback:e=>t.TY(e)}}(this)}bY(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];const n=this.kY;return void 0!==n&&(t.drawImage(n,...i),!0)}AY(t,e,i,s,n,r){let o=this.kY;return void 0!==o&&(yP&&(o=this.EY(o)),t.texImage2D(e,i,s,n,r,o),!0)}SY(t){const e=this.xY++,i=this.RY(t,e);return this.IY.set(e,{CY:t,PY:i}),e}TY(t){const e=this.IY.get(t);void 0!==e&&(this.IY.delete(t),e.PY())}RY(t,e){const i=this.kY;if(void 0===i)return Tt;if(i instanceof HTMLVideoElement&&i.requestVideoFrameCallback){const s=i.requestVideoFrameCallback(((i,s)=>{this.IY.delete(e),t(i,s)}));return()=>i.cancelVideoFrameCallback(s)}{let i;const s=n=>{this.DY()?(this.IY.delete(e),this.NY=!1,t(n,void 0)):i=it(s)};return i=it(s),()=>fo(i)}}DY(){return(!this.t.KR||this.NY)&&!this.t.uI&&this.t.rI>=Ht.iO}EY(t){let e=this.MY;void 0===e&&(e=h.createElement("canvas"),this.MY=e);const i=e.getContext("2d"),s=this.t,n=s.vI,r=s.dI,o=e.width,a=e.height;i.clearRect(0,0,e.width,e.height),o===n&&a===r||(e.width=n,e.height=r),i.drawImage(t,0,0,n,r);let u=!1;return n>0&&bP(i,n-1,0)&&(e.width=o,u=!0),r>0&&bP(i,0,r-1)&&(e.height=a,u=!0),u&&i.drawImage(t,0,0,n,r),e}yn(){this.IY.forEach((t=>t.PY())),this.IY.clear(),this.t.vn(Ti.Ly,this.LY),this.t.vn(Ti.Qy,this.BY),this.kY=void 0,this.MY=void 0}constructor(t){this.kY=void 0,this.eu=void 0,this.MY=void 0,this.IY=ne(),this.xY=1,this.NY=!0,this.BY=()=>{this.NY=!0},this.LY=()=>{this.kY=this.t.TI(),this.IY.forEach(((t,e)=>{t.PY(),t.PY=this.RY(t.CY,e)}))},this.t=t,this.t.bn(Ti.Ly,this.LY),this.t.bn(Ti.Qy,this.BY),this.LY()}};r(),r(),r();var nu=function(t){return t.mn="dimensionchange",t}({}),SP=class extends pe{constructor(t,e){super(nu.mn),this.width=t,this.height=e}};r(),r();var TP,kP=class{constructor(t,e){this.we=t,this.CY=e}},EP=class extends kP{get Eu(){return this.OY}get Au(){return this.FY}yn(){this.VY.disconnect()}constructor(t,e){super(t,e),this.OY=0,this.FY=0,this.WY=t=>{if(t.length>0){const e=t[t.length-1].contentRect;this.FY=e.width,this.OY=e.height,this.CY(this.FY,this.OY)}},this.VY=new s.ResizeObserver(this.WY),this.VY.observe(this.we)}};r(),r();var xP=["Webkit","Moz","O","ms"],RP=(()=>{let t=!1;try{if(void 0!==s&&"function"==typeof s.addEventListener){const e=w.defineProperty({},"passive",{get(){t=!0}});s.addEventListener("testPassiveEventSupport",Tt,e),s.removeEventListener("testPassiveEventSupport",Tt,e)}}catch(t){}return t})(),IP=Oh();function CP(t){return IP.has(t)||IP.set(t,function(t){const e=(TP||(TP=s&&s.document&&s.document.createElement("span")),TP);if(!e||!e.style)return t;if(void 0!==e.style[t])return t;const i=t.charAt(0).toUpperCase()+t.slice(1);for(const t of xP){const s=t+i;if(void 0!==e.style[s])return s}return t}(t)),IP.get(t)}function PP(t){const e=t.style;e.position="absolute",e.left="0",e.right="0",e.bottom="0",e.top="0",e.overflow="scroll",e.zIndex="-1",e.visibility="hidden"}function DP(t){const e=t.style;e.position="absolute",e.left="0",e.top="0",e[CP("transition")]="0s"}var NP=class extends kP{yn(){fo(this.UY),this.UY=0,this.GY.removeEventListener("scroll",this.HY),this.ZY.removeEventListener("scroll",this.HY),ze(this.XY),s&&s.removeEventListener("resize",this.zY)}get Eu(){return this.we.getBoundingClientRect().height||this.OY||0}get Au(){return this.we.getBoundingClientRect().width||this.FY||0}constructor(t,e,i){super(t,e),this.UY=0,this.FY=NaN,this.OY=NaN,this.qY=void 0,this.nr=()=>{const t=1e5;this.YY.style.width=t+"px",this.YY.style.height=t+"px",this.GY.scrollLeft=t,this.GY.scrollTop=t,this.ZY.scrollLeft=t,this.ZY.scrollTop=t,0===this.ZY.scrollTop&&it(this.nr)},this.KY=()=>{const t=this.Au,e=this.Eu;this.CY(t,e),this.FY=t,this.OY=e,this.nr(),this.UY=0},this.HY=()=>{if(this.UY)return;const t=this.Au,e=this.Eu;t===this.FY&&e===this.OY||(this.UY=it(this.KY))},this.zY=()=>{this.qY||(this.qY=u(this.jY,66))},this.jY=()=>{this.qY=void 0,this.QY()},this.QY=()=>{this.HY()};const n=function(t,e){return s.getComputedStyle(t,void 0).getPropertyValue(e)||t.style[e]}(t,"position");i||"static"!==n||(t.style.position="relative");const r=h.createElement("div");this.XY=r,this.GY=h.createElement("div"),this.YY=h.createElement("div"),this.ZY=h.createElement("div"),this.JY=h.createElement("div"),PP(this.GY),PP(this.ZY),DP(this.YY),function(t){DP(t),t.style.width="200%",t.style.height="200%"}(this.JY),r.appendChild(this.GY),r.appendChild(this.ZY),this.GY.appendChild(this.YY),this.ZY.appendChild(this.JY),t.appendChild(r),this.GY.addEventListener("scroll",this.HY),this.ZY.addEventListener("scroll",this.HY),s&&s.addEventListener("resize",this.zY),this.HY()}},MP=class extends Co{kn(t){this.VY||("function"==typeof s.ResizeObserver?this.VY=new EP(this.we,this.WY):this.VY=new NP(this.we,this.WY,t))}yn(){this.Ro(),this.VY&&(this.VY.yn(),this.VY=void 0)}get Eu(){return this.VY?this.VY.Eu:0}get Au(){return this.VY?this.VY.Au:0}constructor(t){super(),this.VY=void 0,this.WY=(t,e)=>{this._o(new SP(t,e))},this.we=t}};r(),r();var LP=class extends pe{constructor(){super(nh.da)}};r();var uo=function(){if(!h)return;const t=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]];for(let e of t)if(e[1]in h)return{$Y:e[0],Zo:e[1],tK:e[2],eK:e[3],Ye:e[4],iK:e[5]}}();r();var BP=class extends pe{constructor(){super(nh.ga)}},OP=class t extends Co{static aa(t){return Boolean(uo&&h[uo.eK]&&uo.$Y in t)}vo(){const t=this.we[uo.$Y]();t&&t.then?t.then(this.sK,this.nK):(h.removeEventListener(uo.iK,this.nK),h.addEventListener(uo.iK,this.nK))}xo(){const t=h[uo.Zo]();t&&t.then?t.then(this.sK,this.nK):(h.removeEventListener(uo.iK,this.nK),h.addEventListener(uo.iK,this.nK))}rK(){const t=this.cs,e=this.we===h[uo.tK];this.cs=e,t!==e&&this._o(new LP)}oK(){this._o(new II)}yn(){this.Ro(),h.removeEventListener(uo.Ye,this.sK),h.removeEventListener(uo.iK,this.nK)}constructor(e){super(),this.cs=!1,this.sK=()=>this.rK(),this.nK=()=>this.oK(),this.we=e,this.oa=t.aa(e),h.addEventListener(uo.Ye,this.sK),this.rK()}},FP=class t extends Co{static aa(t){return Z.su&&("webkitEnterFullscreen"in t||"webkitSupportsPresentationMode"in t)}vo(){this.we.webkitSupportsPresentationMode&&this.we.webkitSupportsPresentationMode("fullscreen")?Z.su?requestAnimationFrame((()=>this.we.webkitSetPresentationMode("fullscreen"))):this.we.webkitSetPresentationMode("fullscreen"):this.we.webkitEnterFullscreen()}xo(){this.we.webkitSupportsPresentationMode&&this.we.webkitSupportsPresentationMode("inline")?this.we.webkitSetPresentationMode("inline"):this.we.webkitExitFullscreen()}rK(){const t=this.cs;let e;e=this.we.webkitPresentationMode?"fullscreen"===this.we.webkitPresentationMode:Boolean(this.we.webkitDisplayingFullscreen),this.cs=e,t!==e&&this._o(new LP)}yn(){this.Ro(),this.we.removeEventListener("webkitbeginfullscreen",this.sK),this.we.removeEventListener("webkitendfullscreen",this.sK),this.we.removeEventListener("webkitpresentationmodechanged",this.sK)}constructor(e){super(),this.cs=!1,this.sK=()=>this.rK(),this.we=e,this.oa=t.aa(e),this.we.addEventListener("webkitbeginfullscreen",this.sK),this.we.addEventListener("webkitendfullscreen",this.sK),this.we.addEventListener("webkitpresentationmodechanged",this.sK),this.rK()}},VP=class extends Co{get oa(){return!!this.hK&&this.hK.oa}get cs(){return this.aK}vo(){this.hK?this.hK.vo():this._o(new II)}xo(){for(const t of this.uK)t.cs&&t.xo()}cK(t){this.hK=t}lK(t){this.uK.push(t),t.bn(nh.da,this.rK),t.bn(nh.fa,this.Ds),this.rK()}dK(t){we(this.uK,t),t.vn(nh.da,this.rK),t.vn(nh.fa,this.Ds)}fK(){for(const t of this.uK)if(t.cs)return!0;return!1}nr(){this.hK=void 0,this.aK=!1;const t=this.uK.slice();for(const e of t)this.dK(e),e.yn();this.rK()}yn(){this.Ro(),this.nr()}constructor(...t){super(...t),this.uK=[],this.hK=void 0,this.aK=!1,this.rK=()=>{const t=this.aK,e=this.fK();t!==e&&(this.aK=e,this._o(new LP))}}},WP=class extends Co{get oa(){return!!this._K&&this.vK.oa}get cs(){return this.vK.cs}vo(){this._K&&this.vK.vo()}xo(){this.vK.xo()}mK(){this.vK.bn([nh.da,nh.ga],this.rK),this.vK.bn(nh.fa,this.Ds)}gK(){this.vK.vn([nh.da,nh.ga],this.rK),this.vK.vn(nh.fa,this.Ds)}ir(){const t=this.vK,e=this.t.SI();if(t===e)return;this.va=!0;const i=this.cs,s=this.oa;i&&this.xo(),this.gK(),this.vK=e,this.mK(),i&&!this.cs&&this.oa?this.vo():this.xo(),this.va=!1,s!==this.oa&&this._o(new BP),i!==this.cs&&this._o(new LP)}yn(){this.Ro(),this.gK(),this.t.vn(Ti.Ny,this.pK)}constructor(t,e){super(),this.va=!1,this.pK=()=>this.ir(),this.rK=t=>{this.va||this._o(t)},this.t=t,this._K=e,this.vK=new N,this.mK(),this.t.bn(Ti.Ny,this.pK),this.ir()}};r(),r(),r();var UP=function(t){return t.MODE_CHANGE="presentationmodechange",t.ERROR="error",t}({}),GP=class extends pe{constructor(t){super(UP.MODE_CHANGE),this.presentationMode=t}};r(),r();var HP=class extends Co{ru(t){for(const e of this.Kf)t.bn(e,this.wK);this.yK.push(t)}bK(t){for(const e of this.Kf)t.vn(e,this.wK);this.yK.push(t)}yn(){this.Ro();for(const t of this.yK)this.bK(t);En(this.yK)}constructor(t,e=!1,i){super(i),this.yK=[],this.AK=t=>{li((()=>{this.Ds(t)}))},this.Kf=t,this.wK=e?this.AK:this.Ds}},Ju=class extends sn{ru(t){t.oy(this.SK),this.yK.push(t)}bK(t){t.gy(this.SK),we(this.yK,t)}yn(){this.Ro();for(const t of this.yK)t.gy(this.SK);En(this.yK)}constructor(t,e=!1){super(t),this.yK=[],this.AK=t=>{li((()=>{this.Ds(t)}))},this.SK=e?this.AK:this.Ds}};r();var ZP=class extends Ds{get error(){return this.errorObject.message}ka(){return this}constructor(t){super(UP.ERROR),this.errorObject=t}};r();var XP=class extends A{constructor(t,e,i){super(t,e,i)}},zP=class extends sn{get wa(){return this.eu||(this.eu=this.ka()),this.eu}ka(){return function(t){let e,i={get currentMode(){return t.Ho()},requestMode(e){const i=$T(e);i&&t.Wo(i)},supportsMode(e){const i=$T(e);return!!i&&t.zo(i)},addEventListener(t,i){e.bn(t,i)},removeEventListener(t,i){e.vn(t,i)}};return e=new Ju(i,!0),e.ru(t),i}(this)}Wo(t){this.Xo!==t&&(this.Xo=t,this.sa=!0,this.Jo(t))}Ho(){return this.Xo}zo(t){switch(t){case Nu.NATIVE_PICTURE_IN_PICTURE:return this.ta.aO;case Nu.FULLSCREEN:return this.ea.oa;case Nu.INLINE:return!0}return!1}Jo(t){switch(this.Yo.jw(),t){case Nu.FULLSCREEN:ah(this.Yo.Qo((t=>this.TK(t))));break;case Nu.NATIVE_PICTURE_IN_PICTURE:ah(this.Yo.Qo((t=>this.kK(t))));break;case Nu.INLINE:ah(this.Yo.Qo((t=>this.EK(t))))}}async TK(t){J(t),await this.ta.xo().catch(Tt),J(t);try{await this.xK(),this._o(new GP(this.Xo))}catch(e){const i=new XP(Qa.FULLSCREEN_ERROR,"Failed to enter fullscreen.");throw this._o(new ZP(i)),J(t),this.Wo(Nu.INLINE),i}finally{this.sa=!1}}async kK(t){J(t),await this.Zo().catch(Tt),J(t);try{await this.ta.vo(),this._o(new GP(this.Xo))}catch(e){const i=new XP(Qa.PICTURE_IN_PICTURE_ERROR,"Failed to enter native picture-in-picture.");throw this._o(new ZP(i)),J(t),this.Wo(Nu.INLINE),i}finally{this.sa=!1}}async EK(t){J(t),await this.Zo().catch(Tt),J(t),await this.ta.xo().catch(Tt),this._o(new GP(this.Xo)),this.sa=!1}async xK(){if(this.ea.cs)return;const t=this.ea.py([nh.da,nh.fa]);if(this.ea.vo(),await t,!this.ea.cs)throw new g("Failed to enter fullscreen.")}async Zo(){if(!this.ea.cs)return;const t=this.ea.py([nh.da,nh.fa]);if(this.ea.xo(),await t,this.ea.cs)throw new g("Failed to exit fullscreen.")}wi(){this.sa||(this.Xo!==Nu.FULLSCREEN||this.ea.cs?this.Xo!==Nu.FULLSCREEN&&this.ea.cs&&this.Wo(Nu.FULLSCREEN):this.Wo(Nu.INLINE))}yn(){this.ea.vn(nh.da,this.rK),this.ea.vn(nh.fa,this.oK),this.ta.vn(rr.rO,this.RK),this.ta.vn(rr.oO,this.RK),this.ta.vn(rr.fa,this.IK),this.Ro()}constructor(t,e){super(),this.Xo=Nu.INLINE,this.sa=!1,this.Yo=new Su,this.eu=void 0,this.rK=()=>{this.wi()},this.oK=()=>{this.sa||(this._o(new Na(new A(Qa.FULLSCREEN_ERROR,"Failed to enter fullscreen."))),this.wi())},this.RK=()=>{this.sa||(this.Xo!==Nu.NATIVE_PICTURE_IN_PICTURE||this.ta.hO?this.Xo!==Nu.NATIVE_PICTURE_IN_PICTURE&&this.ta.hO&&this.Wo(Nu.NATIVE_PICTURE_IN_PICTURE):this.Wo(Nu.INLINE))},this.IK=()=>{this.sa||(this._o(new ZP(new XP(Qa.PICTURE_IN_PICTURE_ERROR,"Unexpected native picture-in-picture error."))),this.RK())},this.ea=t,this.ta=e,this.ea.bn(nh.da,this.rK),this.ea.bn(nh.fa,this.oK),this.ta.bn(rr.rO,this.RK),this.ta.bn(rr.oO,this.RK),this.ta.bn(rr.fa,this.IK)}};function qP(t){let e;return{get url(){return t.Xu},get method(){return t.AE},get headers(){return e||(e=t.Jk.Ek()),e},get body(){return t.Lk},get useCredentials(){return t.xE},get type(){return t.Tw},get subType(){return t.kE},get mediaType(){return t.EE},get responseType(){return t.jk}}}function YP(t){switch(t.toLowerCase()){case"arraybuffer":return Rr.bk;case"json":return Rr.Ak;case"stream":return Rr.Sk;default:return Rr.Tk}}function KP(t){switch(t.toUpperCase()){case"POST":return xe.POST;case"PUT":return xe.PUT;case"DELETE":return xe.DELETE;case"HEAD":return xe.HEAD;case"OPTIONS":return xe.OPTIONS;default:return xe.GET}}function jP(t){switch(t.toLowerCase()){case"manifest":return Mr.sE;case"segment":return Mr.nE;case"preload-hint":return Mr.rE;case"content-protection":return Mr.oE;default:return Mr.iE}}function QP(t){switch(t.toLowerCase()){case"initialization-segment":return xu.hE;case"fairplay-license":return xu.aE;case"fairplay-certificate":return xu.uE;case"widevine-license":return xu.cE;case"widevine-certificate":return xu.lE;case"playready-license":return xu.dE;case"clearkey-license":return xu.fE;case"aes128-key":return xu._E;default:return xu.iE}}function JP(t){switch(t.toLowerCase()){case"audio":return qh.vE;case"video":return qh.mE;case"text":return qh.Tk;case"image":return qh.gE;default:return qh.iE}}r(),r(),r(),r();var $P=class{get CK(){return this.PK.Ub}get wa(){return this.eu||(this.eu=this.DK()),this.eu}get NK(){return this.MK}get LK(){return!this.MK}get BK(){return this.FK>0}get zE(){return this.qE}VD(){this.MK=!0,this.PK.Vb(null)}VK(){this.PK.Wb(new gb(this.WK))}UK(t){if(!this.LK)throw new b("Cannot respond more than once");if(!V(t))throw new b("Expected valid response");this.qE=this.GK(t),this.VD()}HK(){try{const t=this.ZK(this.wa);t?this.XK(t):this.BK||this.NK||this.VD()}catch(t){this.WK.push(t),this.VK()}}XK(t){if(this.NK)throw new g("Request has been redirected or a response already exists");if(yt(t))this.zK(t);else{if("function"!=typeof t)throw new b("Expected promise or function");{const e=new os,i=t=>{t?e.Wb(t):e.Vb(void 0)};try{const s=t(i);yt(s)&&e.Qw(s)}catch(t){e.Wb(t)}this.zK(e.Ub)}}}async zK(t){try{this.FK++,await t,this.FK--,this.BK||this.NK||(this.WK.length?this.VK():this.VD())}catch(t){this.FK--,this.WK.push(t),this.BK||this.NK||this.VK()}}constructor(t,e){this.qK=t,this.ZK=e,this.PK=new os,this.WK=[],this.eu=void 0,this.MK=!1,this.qE=void 0,this.FK=0}},tD=class t extends $P{get Lk(){return this.YK}get Jk(){return this.qK.Jk}get Qk(){return this.qK.Qk}get zE(){return this.qE}get Yk(){return this.qK.Yk}get $k(){return this.qK.$k}get Xu(){return this.qK.eE}static KK(t,e,i){const s=void 0===t.body?i:t.body;return new Vb({Kk:s,Qk:e.Qk,jk:e.Qk.jk,Jk:t.headers,Yk:t.status,$k:t.statusText,eE:t.url,tE:!0},e)}DK(){return function(t){let e;const i=qP(t.Qk);return{get closed(){return!t.LK},get request(){return i},get url(){return t.Xu},get status(){return t.Yk},get statusText(){return t.$k},get headers(){return e||(e=t.Jk.Ek()),e},get body(){return t.Lk},respondWith:e=>t.UK(e),waitUntil:e=>t.XK(e)}}(this)}GK(e){return t.KK(e,this.qK,this.YK)}constructor(t,e,i){super(t,e),this.YK=i,this.HK()}};r();var eD=class extends $P{get Lk(){return this.qK.Lk}get LK(){return this.jK&&!this.MK}get Jk(){return this.qK.Jk}get AE(){return this.qK.AE}get QK(){return this.JK}get zE(){return this.qE}get jk(){return this.qK.jk}get SE(){return this.qK.SE}get TE(){return this.qK.TE}get Uw(){return this.qK.Uw}get Tw(){return this.qK.Tw}get kE(){return this.qK.kE}get EE(){return this.qK.EE}get Xu(){return this.qK.Xu}get xE(){return this.qK.xE}get PE(){return this.qK.PE}get RE(){return this.qK.RE}get CE(){return this.qK.CE}get DE(){return this.qK.DE}DK(){return function(t){let e;return{get url(){return t.Xu},get method(){return t.AE},get headers(){return e||(e=t.Jk.Ek()),e},get body(){return t.Lk},get closed(){return!t.LK},get useCredentials(){return t.xE},get type(){return t.Tw},get subType(){return t.kE},get mediaType(){return t.EE},get responseType(){return t.jk},redirect:e=>t.$K(e),respondWith:e=>t.UK(e),waitUntil:e=>t.XK(e)}}(this)}GK(t){const e=this.qK.Lk,i=new Vb({Kk:e,Jk:{},Qk:this.qK,eE:this.qK.Xu,jk:this.qK.jk,Yk:200,$k:"OK"});return tD.KK(t,i,e)}$K(t){if(!this.LK)throw new b("Cannot redirect, already redirected or has a response");let e;e=Yt(t)?{url:t}:t,this.JK=function(t,e){return new wt({Xu:void 0===t.url?e.Xu:t.url,AE:void 0!==t.method?KP(t.method):void 0,Jk:t.headers,Lk:t.body,xE:t.useCredentials,Tw:void 0!==t.type?jP(t.type):void 0,kE:void 0!==t.subType?QP(t.subType):void 0,EE:void 0!==t.mediaType?JP(t.mediaType):void 0,jk:void 0!==t.responseType?YP(t.responseType):void 0},e)}(e,this.qK),this.VD()}constructor(t,e,i){super(t,e),this.JK=void 0,this.jK=i,this.HK()}};var iD=class extends Ch{tj(t){this.ej.tj(t)}ij(t){this.ej.ij(t)}sj(t){this.ej.sj(t)}ZX(t){this.ej.ZX(t)}YX(t){this.ej.YX(t)}constructor(t,e=!0){const i=new sD(t);super(i,e),this.ej=i}},sD=class{async Qk(t){let e;try{e=await this.nj(t,t.Uw)}catch(e){if(e instanceof Yb)return await this.rj(e,t.Uw);throw e}if(e=await this.hj(e,t.Uw),ph(e))return e;throw new Mn(e)}NE(t){return this.FE.NE(t)}async nj(t,e){J(e);let i,s=t;for(const t of this.aj.slice()){J(e);const n=new eD(s,t,!i);if(!n.NK)try{await n.CK}catch(t){0;continue}n.QK&&!i?s=n.QK:n.zE&&!i&&(i=n.zE)}return i||this.FE.Qk(s)}async rj(t,e){let i;if(t instanceof Mn)i=t.zE;else{const e=t.Qk;i=new Vb({Kk:null,Qk:e,jk:e.jk,Yk:0,$k:""})}const s=await this.hj(i,e);if(s===i)throw t;if(ph(s))return s;throw new Mn(s)}async hj(t,e){let i=t;for(const t of this.uj.slice()){J(e);const s=await Promise.resolve(i.Ib().Kk(e)),n=new tD(i,t,s);if(!n.NK)try{await n.CK}catch(t){0;continue}i=n.zE||i}return i}tj(t){this.aj.unshift(t)}ij(t){this.aj.push(t)}sj(t){we(this.aj,t)}ZX(t){this.uj.unshift(t)}YX(t){we(this.uj,t)}yn(){this.FE.yn(),En(this.aj),En(this.uj)}constructor(t){this.aj=[],this.uj=[],this.FE=t}};r();var nD=class{get wa(){return this.eu||(this.eu=function(t){return{addRequestInterceptor(e){t.tj(e)},removeRequestInterceptor(e){t.sj(e)},addResponseInterceptor(e){t.ZX(e)},removeResponseInterceptor(e){t.YX(e)}}}(this)),this.eu}tj(t){this.fW.tj(t)}sj(t){this.fW.sj(t)}ZX(t){this.fW.ZX(t)}YX(t){this.fW.YX(t)}constructor(t){this.fW=t}},rD=class extends Co{get wa(){return this.eu||(this.eu=function(t){return{get online(){return t.qR},get estimator(){return function(t){return{get bandwidth(){return t.bG},get roundTripTime(){return t.AG}}}(t.cj)},setEstimator(e){t.lj(function(t){if(!t)return;return{get bG(){return YA(t.bandwidth)},get AG(){return YA(t.roundTripTime)},SG:e=>function(t){if(!t)return;return{dj(e){t.markRequestStart(e)},_j(e){t.markResponseStart(e)},vj(e,i){t.markResponseData(e,i)},mj(e){t.markResponseEnd(e)}}}(t.createMeasurer(qP(e)))}}(e))},addRequestInterceptor(e){t.tj(e)},removeRequestInterceptor(e){t.sj(e)},addResponseInterceptor(e){t.ZX(e)},removeResponseInterceptor(e){t.YX(e)},addEventListener(e,i){t.bn(e,i)},removeEventListener(e,i){t.vn(e,i)}}}(this)),this.eu}get qR(){return this.gj.qR}get cj(){return this.gZ.cj}lj(t){this.gZ.lj(t)}tj(t){this.fW.tj(t)}sj(t){this.fW.sj(t)}ZX(t){this.fW.ZX(t)}YX(t){this.fW.YX(t)}yn(){this.Ro(),this.gj.vn(Ti.Xy,this.pj),this.gj.vn(Ti.Zy,this.wj)}constructor(t,e,i){super(e),this.gj=t,this.fW=e,this.gZ=i,this.pj=t=>{this._o(t)},this.wj=t=>{this._o(t)},this.gj.bn(Ti.Xy,this.pj),this.gj.bn(Ti.Zy,this.wj)}};r(),r(),r();var kt=function(t){return t.PERFORMANCE="performance",t.QUALITY="quality",t.BANDWIDTH="bandwidth",t}({});r();function oD(t,e,i,s,n,r){const o=[];let h=t-_.max(r,1),a=t+n;if(e&&i){const t=Ns(i,1,5),s=e-t;h=_.min(h,s);const n=e+i+t;a=_.max(a,n)}0!==h&&s.oB(0,h)&&o.push([0,h]);return s.oB(a,1/0)&&o.push([a,1/0]),o}function hD(t){return t instanceof g&&"QuotaExceededError"===t.name}r();var aD={type:kt.BANDWIDTH};function uD(t){const e=tu(aD);return Yt(t)?e.type=cD(t):V(t)&&function(t){switch(t){case kt.PERFORMANCE:case kt.QUALITY:case kt.BANDWIDTH:return!0;default:return!1}}(t.type)&&(e.type=cD(t.type)),V(t)&&V(t.metadata)&&(e.metadata=function(t){const e={},i=eo(t.bitrate);return S(i)||(e.bitrate=i),e}(t.metadata)),e}function cD(t){switch(t){case"bandwidth":return kt.BANDWIDTH;case"performance":return kt.PERFORMANCE;case"quality":return kt.QUALITY}}r();var lD=class extends pe{constructor(t){super("yj"),this.bj=t}};r();var dD=class extends pe{constructor(t){super("Aj"),this.Sj=t}};r();var fD=class extends pe{constructor(t){super("Tj"),this.Ej=t}},_D=class extends Co{xj(t){this.Rj=t}get Ij(){switch(this.Cj.type){case kt.PERFORMANCE:return 0;case kt.QUALITY:return 1/0;case kt.BANDWIDTH:return this.Cj.metadata&&void 0!==this.Cj.metadata.bitrate?this.Cj.metadata.bitrate:gu.Vg.cG();default:return gu.Vg.cG()}}get wa(){return this.eu}get Sj(){return this.Cj}set Sj(t){this.Cj=t,this._o(new dD(t))}get bj(){return this.Pj}set bj(t){this.Pj=t,this._o(new lD(t))}get Dj(){return _.min(this.Pj,this.Nj)}get Ej(){return this.Mj}set Ej(t){this.Mj=t,this._o(new fD(t))}get Lj(){return this.Nj}get cj(){var t;return null!=(t=this.Bj)?t:this.Rj.eH}lj(t){this.Bj=t}Oj(t){let e=_.min(t,.8*this.Nj);if(e=_.max(10,e),this.Nj===e)return!1;const i=this.Dj;this.Nj=e;const s=this.Dj;return s!==i&&this._o(new lD(s)),!0}get Fj(){return this.Vj}set Fj(t){this.Vj=t}constructor(...t){super(...t),this.eu=function(t){return{get strategy(){return function(t){return{metadata:t.metadata,type:t.type}}(t.Sj)},set strategy(e){t.Sj=uD(e)},get targetBuffer(){return t.bj},set targetBuffer(e){const i=eo(e);S(i)||(t.bj=i)},get bufferLookbackWindow(){return t.Ej},set bufferLookbackWindow(e){const i=eo(e);S(i)||(t.Ej=i<=0?30:i)},get maxBufferLength(){return t.Lj},get clearBufferWhenSettingTargetQuality(){return t.Fj},set clearBufferWhenSettingTargetQuality(e){t.Fj=Fu(e)}}}(this),this.Cj=aD,this.Pj=20,this.Mj=30,this.Nj=1/0,this.Vj=!1,this.Bj=void 0}};r(),r();var vD=class extends Ds{ka(){return new mD}constructor(){super("eC")}},mD=class extends pe{constructor(){super("change")}};r(),r();var gD=class extends Co{yn(){this.Ro();for(const t of this.Kf)this.Wj.vn(t,this.Uj)}constructor(t,e,i){super(i),this.Uj=t=>{MA(t)&&li((()=>{this._o(t.wa)}))},this.Wj=t,this.Kf=e;for(const t of this.Kf)this.Wj.bn(t,this.Uj)}},rt=class extends sn{yn(){this.Ro(),this.Wj.gy(this.Uj)}constructor(t,e){super(e),this.Uj=t=>{MA(t)&&li((()=>{this._o(t.wa)}))},this.Wj=t,this.Wj.oy(this.Uj)}};var pD=class extends sn{get WO(){return this.jO}set WO(t){if(this.UO<=t)throw new g("Start time of a clip should be smaller than the end time.");this.jO!==t&&(this.jO=t,this._o(new vD))}get UO(){return this.$O}set UO(t){if(t<=this.WO)throw new g("End time of a clip should be larger than the start time.");this.$O!==t&&(this.$O=t,this._o(new vD))}get wa(){return this.eu||(this.eu=function(t){let e,i={get startTime(){return t.WO},set startTime(e){t.WO=e},get endTime(){return t.UO},set endTime(e){t.UO=e},addEventListener(t,i){e.bn(t,i)},removeEventListener(t,i){e.vn(t,i)}};return e=new rt(t,i),i}(this)),this.eu}nr(){0===this.jO&&this.$O===1/0||(this.jO=0,this.$O=1/0,this._o(new vD))}Gj(){return new se([this.WO,this.UO],[!0,!0])}constructor(...t){super(...t),this.jO=0,this.$O=1/0}};r();var wD=class t extends al{RR(t,e){const i=this.Hj.Gj().KL(t);super.RR(i,e),this.Zj()}DR(){return super.DR()||this.Xj}get zj(){return this.aI().length?this.aI():this.Hj.Gj().ks()}aI(){return se.Cn(super.aI()).jn(this.Hj.Gj()).ks()}xI(){this.DR()?this.RR(this.zj.start(0)):this.qj(),super.xI(),this.Zj()}async Ca(t,e){J(e),this.Xj=!1,this.Hj.nr(),await super.Ca(t,e)}yn(){return this.Hj.vn("eC",this.Yj),this.gR.vn(Ti.hb,this.Tc),this.Kj(),super.yn()}BI(t){switch(t.type){case Ti.Jy:return this._o(t),this.jj(),!0;case Ti.Qy:case Ti.Cy:return this._o(t),this.Qj(),!0;case Ti.Dy:if(this.Jj)return!0}return super.BI(t)}get Jj(){return this.Hj.UO<this.ct}Kj(){this.$j&&(fo(this.$j),this.$j=void 0)}Zj(){const e=this.ER,i=this.Jj&&e>=this.Hj.UO-t.ad;this.Xj&&!i?(this.Xj=!1,this.KR&&this.xI()):this.Xj||!i||this.uI||this.tQ||(this.Xj=!0,this._o(new Xs(e)),this.EI())}qj(){if(this.ct===1/0)return;const e=this.zj,i=se.Cn(e).KL(this.ER);_s(this.ER,i,t.ad)||this.RR(i)}constructor(e,i){super(e),this.Xj=!1,this.$j=void 0,this.tQ=!1,this.Yj=()=>{this.qj(),this.Zj()},this.Tc=()=>{this.Kj(),this.Zj();this.Jj&&this.ER>=this.Hj.UO-t.eQ&&!this.PR&&(this.$j=it(this.Tc))},this.jj=()=>{this.tQ=!0},this.Qj=()=>{this.tQ&&(this.tQ=!1,this.Zj())},this.Hj=i,this.Hj.bn("eC",this.Yj),this.gR.bn(Ti.hb,this.Tc)}};wD.eQ=1,wD.ad=.001,r();var yD=class{get iQ(){return this.sQ}set iQ(t){this.sQ=t}constructor(){this.sQ=!1}};r();var bD=class extends al{DR(){return!this.sQ.iQ&&super.DR()}EI(){this.nQ=!0,super.EI()}xI(){this.nQ=!1,super.xI()}BI(t){if(this.sQ.iQ)switch(t.type){case Ti.Dy:return this.ER=0,this.nQ||(this.uI?this.rQ=!0:this.xI()),!0;case Ti.Qy:this.rQ&&(this.rQ=!1,this.xI());break;case Ti.zy:if(this.rQ||super.DR())return!0}return super.BI(t)}constructor(t,e){super(t),this.rQ=!1,this.nQ=!1,this.sQ=e}};r(),r();var AD=class{get wa(){return this.eu}get vO(){return this.na.GR.vO}get gO(){return this.na.GR.gO}get _O(){return this.na.GR._O}get oQ(){throw new g("Not implemented")}get hQ(){throw new g("Not implemented")}get pO(){return this.na.GR.pO}get mO(){return this.na.GR.mO}get wO(){return this.na.GR.wO}constructor(t){this.na=t,this.eu=function(t){return{get currentBandwidthEstimate(){return t.gO},get corruptedVideoFrames(){return t.vO},get droppedVideoFrames(){return t._O},get totalVideoFrames(){return t.mO},get totalBytesLoaded(){return t.pO},get bufferedSegments(){return t.wO}}}(this)}};function SD(t){if(!t||!Ur(t))return{_O:0,vO:0,mO:0,gO:0,pO:0,wO:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}};if("function"==typeof t.getVideoPlaybackQuality){const e=t.getVideoPlaybackQuality();return{_O:e.droppedVideoFrames,vO:e.corruptedVideoFrames||0,mO:e.totalVideoFrames}}return{_O:t.webkitDroppedFrameCount||0,vO:0,mO:t.webkitDecodedFrameCount||0}}r(),r();var TD=class extends Ds{ka(){return new kD}constructor(){super("aQ")}},kD=class extends pe{constructor(){super("castingchange")}};r();var ED=class extends Co{get uQ(){var t,e;return(null==(t=this.cQ)?void 0:t.uQ)||(null==(e=this.lQ)?void 0:e.uQ)||!1}get dQ(){return this.cQ}get fQ(){return this.lQ}_Q(t){this.cQ=t,this.vQ(t)}mQ(t){this.lQ=t,this.vQ(t)}vQ(t){t.bn("statechange",this.gQ)}pQ(t){t.vn("statechange",this.gQ)}get wa(){return this.eu||(this.eu=function(t){let e;const i={get casting(){return t.uQ},get airplay(){var e;return null==(e=t.dQ)?void 0:e.wa},get chromecast(){var e;return null==(e=t.fQ)?void 0:e.wa},addEventListener(t,i){e.bn(t,i)},removeEventListener(t,i){e.vn(t,i)}};return e=new gD(t,["aQ"],i),i}(this)),this.eu}yn(){this.Ro(),this.cQ&&(this.pQ(this.cQ),this.cQ=void 0),this.lQ&&(this.pQ(this.lQ),this.lQ=void 0)}constructor(...t){super(...t),this.cQ=void 0,this.lQ=void 0,this.wQ=!1,this.eu=void 0,this.gQ=()=>{const t=this.wQ,e=this.uQ;t!==e&&(this.wQ=e,this._o(new TD))}}};r(),r();var ku=class{static async yQ(t,e){try{const i=new wt({Xu:t,jk:Rr.Tk,AE:xe.GET}),s=await e.Qk(i);return(await s.Kk()).trim()}catch(t){return void Je(t)}}static bQ(t){try{const e=GC(t);return new qC(e.key,e.domains_page,e.domains_source,e.expiration_date,e.features,e.customer_id,e.generation_date,e.sdks,e.send_impression)}catch(t){throw new A(Qa.LICENSE_ERROR,"Invalid license. No valid license was configured.")}}static AQ(t){void 0===t&&(t=wh.mh),Ms.Vp("The baked-in license is used. Please update the configuration with your license.");const e=t.Kz("F2b-iL'[FL[S"),i=JSON.parse('["F$(:_L50F|aY"]').map((e=>t.Kz(e))),s=JSON.parse('[".$hsF|b9_Ess*rS:F]Y\\""]').map((e=>t.Kz(e))),n=Number(new Date(Number(t.Kz('COD|aHpHa:p3Ceo3Co""')))),r=JSON.parse("[]").map((e=>t.Kz(e)));return new qC(e,i,s,n,r)}static convertLicenseToDummyLicense(t){return new qC(t.rq,t.oq,t.hq,864e13,t.uq,t.cq,Date.now(),t.dq,t.fq)}};r();var ka=class t{static yk(){return t.Vg||(t.Vg=xD.yT()?new xD:new ub),t.Vg}static Fb(e){t.yk().Fb(e)}static wk(){t.yk().wk()}static Lb(e){return t.yk().Lb(e)}static Bb(e,i){t.yk().Bb(e,i)}static SQ(e){const i=t.Lb(e);if(void 0!==i)return C(i)}static TQ(e){return"true"===t.Lb(e)}};ka.Vg=void 0;var xD=class extends ka{static yT(){const t="foobar";try{return self.localStorage.setItem(t,t),self.localStorage.removeItem(t),!0}catch(t){}return!1}Fb(t){self.localStorage.removeItem(t)}wk(){self.localStorage.clear()}Lb(t){var e;return null!=(e=self.localStorage.getItem(t))?e:void 0}Bb(t,e){self.localStorage.setItem(t,e)}},RD="https://validate.theoplayer.com/1/",ID=72e5,CD=_.floor(14399999*_.random()-ID),PD="THEOplayer.license",DD=class{async kQ(){const t=await this.EQ(this.xQ.license,this.xQ.licenseUrl);this.iY.RQ(t)}async EQ(t,e){let i,s=e;t?i=ku.bQ(t):s||(i=ku.AQ()),s||(s=RD+i.rq);const n=this.IQ();let r;if(i&&(r=this.CQ.Sq(i),r===zC.tq)){if(this.DQ(i.aq)&&this.DQ(null==n?void 0:n.aq)){const t=await this.NQ(s);if(t)return t}return i}if(n){if(this.CQ.Sq(n)===zC.tq){if(this.DQ(null==n?void 0:n.aq)){const t=await this.NQ(s);if(t)return t}return n}ka.Fb(PD)}const o=await ku.yQ(s,this.fW);let h;if(o){h=ku.bQ(o);if(this.CQ.Sq(h)===zC.tq)return ka.Bb(PD,o),h;ka.Fb(PD)}else if(!this.Iq&&i&&r===zC.iq&&s===RD+i.rq)return ku.convertLicenseToDummyLicense(i);if(!i&&!h)throw new A(Qa.LICENSE_ERROR,"The given license is invalid!");this.MQ(null!=i?i:h,new A(Qa.LICENSE_ERROR,"The given license is invalid!"))}async gq(t){let e=await this.iY.eY();if(this.DQ(e.aq)){var i;const t=null!=(i=this.xQ.licenseUrl)?i:RD+e.rq,s=await this.NQ(t);s&&(this.iY.RQ(s),e=s)}try{const i=this.CQ.Sq(e);if(i===zC.nq){const t=YC._q;throw new A(QC(t),rP.bq(t))}if(i===zC.iq){const t=YC.iq;throw new A(QC(t),rP.bq(t))}this.CQ.gq(t,e)}catch(t){this.LQ(t)}}async Aq(t){const e=await this.iY.eY();try{this.CQ.Aq(t,e)}catch(t){this.LQ(t)}}async NQ(t){try{const e=await ku.yQ(t,this.fW);if(void 0===e)return;const i=ku.bQ(e);return this.CQ.Sq(i)===zC.tq?(ka.Bb(PD,e),i):void 0}catch(t){return}}DQ(t){return!t||Number(new Date)+2592e5+CD>=t}IQ(){const t=ka.Lb(PD);if(t)return ku.bQ(t)}MQ(t,e){this.iY.RQ(t),this.LQ(e)}LQ(t){throw Xf(t.message),this.BQ.rY(t.message),t}constructor(t,e,i,s,n,r){this.fW=t,this.CQ=e,this.BQ=i,this.iY=s,this.xQ=n,this.xA=r,this.Iq=nP(r)}};r();var ND=class{RQ(t){this.OQ=t,this.FQ.Vb()}get VQ(){return this.OQ}async eY(){return this.OQ?Promise.resolve(this.OQ):(await this.FQ.Ub,this.OQ)}constructor(){this.FQ=new os}};r(),r();var MD=class extends Ds{ka(){return new LD}constructor(){super("eC")}},LD=class extends pe{constructor(){super("change")}};function BD(t){let e;const i={get fontFamily(){return t.WQ},set fontFamily(e){t.WQ=e},get fontColor(){return t.UQ},set fontColor(e){t.UQ=e},get fontSize(){return t.GQ},set fontSize(e){t.GQ=e},get backgroundColor(){return t.HQ},set backgroundColor(e){t.HQ=e},get windowColor(){return t.ZQ},set windowColor(e){t.ZQ=e},get edgeStyle(){return t.XQ},set edgeStyle(e){t.XQ=e},get marginTop(){return t.zQ},set marginTop(e){t.zQ=e},get marginBottom(){return t.qQ},set marginBottom(e){t.qQ=e},get marginLeft(){return t.YQ},set marginLeft(e){t.YQ=e},get marginRight(){return t.KQ},set marginRight(e){t.KQ=e},addEventListener(t,i){const s=Hu(t,hs);e.bn(s,i)},removeEventListener(t,i){const s=Hu(t,hs);e.vn(s,i)}};return e=new og(i),t.bn(["eC"],(t=>e._o(t.wa))),i}r();var OD={WQ:void 0,UQ:void 0,GQ:void 0,HQ:void 0,ZQ:void 0,XQ:void 0,zQ:void 0,qQ:void 0,YQ:void 0,KQ:void 0},FD="THEOplayer.textTrackStyle.",VD=class t extends Co{get jQ(){return this.QQ}get WQ(){return this.QQ.WQ}set WQ(t){this.ir({WQ:t})}get UQ(){return this.QQ.UQ}set UQ(t){this.ir({UQ:t})}get GQ(){return this.QQ.GQ}set GQ(t){this.ir({GQ:t})}get HQ(){return this.QQ.HQ}set HQ(t){this.ir({HQ:t})}get ZQ(){return this.QQ.ZQ}set ZQ(t){this.ir({ZQ:t})}get XQ(){return this.QQ.XQ}set XQ(t){this.ir({XQ:t})}get zQ(){return this.QQ.zQ}set zQ(t){this.ir({zQ:t})}get qQ(){return this.QQ.qQ}set qQ(t){this.ir({qQ:t})}get KQ(){return this.QQ.KQ}set KQ(t){this.ir({KQ:t})}get YQ(){return this.QQ.YQ}set YQ(t){this.ir({YQ:t})}get wa(){return this.eu||(this.eu=BD(this)),this.eu}ir(e){this.QQ=ol({},this.QQ,e),t.JQ(this.QQ),this._o(new MD)}static $Q(){let t=ol({},OD);return t.WQ=ka.Lb(FD+"fontFamily")||t.WQ,t.UQ=ka.Lb(FD+"fontColor")||t.UQ,t.GQ=ka.Lb(FD+"fontSize")||t.GQ,t.HQ=ka.Lb(FD+"backgroundColor")||t.HQ,t.ZQ=ka.Lb(FD+"windowColor")||t.ZQ,t.XQ=ka.Lb(FD+"edgeStyle")||t.XQ,t}static JQ(t){ka.Bb(FD+"fontFamily",t.WQ||""),ka.Bb(FD+"fontColor",t.UQ||""),ka.Bb(FD+"fontSize",t.GQ||""),ka.Bb(FD+"backgroundColor",t.HQ||""),ka.Bb(FD+"windowColor",t.ZQ||""),ka.Bb(FD+"edgeStyle",t.XQ||"")}constructor(){super(),this.eu=void 0,this.QQ=t.$Q()}};function WD(t,e){var i,s;t.style.marginLeft=(null!=(i=e.YQ)?i:0)+"px",t.style.marginRight=(null!=(s=e.KQ)?s:0)+"px",t.style.width="calc(100% - "+t.style.marginLeft+" - "+t.style.marginRight+")"}r(),r(),r(),r();var UD=[Ti.ho,Ti.zy,Zc.UL,Ti.hb,Ti.qy,Ti.Uy,Ti.Jy,Ti.Qy,Ti.Dy,Ti.Yy,Ti.ub,Ti.Iy,Zc.iC,Ti.jy,yo.fa,kh.Py,kh.Tb,Ti.Ey,Ti.Ty,Ti.fb,Ti.vb,Ti.Oy,Ti.Vy,Ti.Ly,Ti.Ny],GD={zB:!1};function HD(t){return t.kd.Tw===In.wW}r();var oe=function(t){return t.tJ="eJ",t}({}),Vo=["eJ"],Ce=function(t){return t[t.iJ=0]="iJ",t[t.Sk=1]="Sk",t[t.sJ=2]="sJ",t}({});r(),r();var ZD=["loadstart","encrypted","waitingforkey","webkitneedkey","msneedkey"],wo=function(t){return t.nJ="rJ",t.oJ="hJ",t.aJ="uJ",t}({}),XD=class extends Co{get kd(){return this.MT}get jG(){return this.$T}async cJ(t,e){const i=await this.Nw.Dw(t.Ew,e),s=await i._T();return await this.lJ(s),s}dJ(t){const e=this.uT;return e?0!==t.sH.length&&t.sH.some((t=>t.cT.Ew===e.cT)):0!==this.MT.sH.length?t.sH.some((t=>this.MT.sH.some((e=>t.cT===e.cT)))):0===t.sH.length||!this.fJ}_J(t){return this.vJ._J(t),this.MT=t,Promise.resolve()}mJ(t){this.vJ.mJ(t)}async Xw(){this.Ro(),this.$T.removeEventListener("loadedmetadata",this.gJ);for(const t of ZD)this.$T.removeEventListener(t,this.pJ);await this.Yo.yn(),this.wJ(),await this.vJ.nr(),await this.yJ(void 0)}bJ(t){t!==this.AJ&&(this.AJ=t,t?this.SJ.Vb(void 0):this.SJ=new os)}lJ(t){return this.Yo.Qo((()=>this.yJ(t)))}async yJ(t){if(t&&!this.$T.src&&!this.$T.srcObject)throw new sr(Qa.CONTENT_PROTECTION_ERROR,"Attempted to attach MediaKeys to a sourceless MediaElement");if(!t&&(this.$T.src||this.$T.srcObject))throw new sr(Qa.CONTENT_PROTECTION_ERROR,"Attempted to remove MediaKeys from a non-empty MediaElement");t&&!this.AJ&&await this.SJ.Ub;const e=this.uT;e&&(await e.dT(this.$T),this.uT=void 0),t&&(await t.kn(this.$T),this.uT=t)}Ca(t){return this.Yo.Qo((()=>this.TJ(t)))}TJ(t){this.bJ(!1);const e=this.WB.QR;if(Yt(t))this.$T.src=t;else if(function(t){if(void 0!==s.ManagedMediaSource&&t instanceof s.ManagedMediaSource)return!0;if("undefined"!=typeof MediaSource&&t instanceof MediaSource)return!0;return!1}(t))if(function(t){return"srcObject"in t&&Z.su&&Z.og>=17}(this.$T))try{this.$T.srcObject=t}catch(e){this.$T.src=URL.createObjectURL(t)}else this.$T.src=URL.createObjectURL(t);else zD(t)&&(this.$T.srcObject=t);this.WB.QR=e}kJ(t){return this.Yo.Qo((()=>this.EJ(t)))}EJ(t){this.TJ(t),this.$T.load()}wJ(){this.bJ(!1),Wd(this.$T)}async xJ(){this.uT&&await this.uT.nr()}constructor(t,e,i,s){super(),this.AJ=!1,this.SJ=new os,this.fJ=!1,this.Yo=new Su,this.uT=void 0,this.gJ=()=>{this.fJ=!0},this.pJ=()=>{this.bJ(!0)},this.MT=t,this.WB=e,this.$T=e.jG,this.vJ=i,this.Nw=s,this.$T.addEventListener("loadedmetadata",this.gJ);for(const t of ZD)this.$T.addEventListener(t,this.pJ)}};function zD(t){return"undefined"!=typeof MediaStream&&t instanceof MediaStream}var qD=class extends XD{get wR(){return se.Cn(this.$T.buffered)}get ct(){return this.$T.duration}get RJ(){const t=this.ct;if(!isFinite(t))return!1;const e=this.wR;if(0===e.V)return!1;return t-e.Tn(e.V-1)<Si}get iI(){return this.$T.preload}set iI(t){this.$T.preload=t}get hI(){return se.Cn(this.$T.seekable)}get IJ(){return this.wR}get CJ(){if(Ur(this.$T)&&(this.$T.videoWidth>0||this.$T.videoHeight>0))return this.wR}async xj(){const t=this.kd;switch(t.rH){case Ih.XC:case Ih.zC:this.$T.setAttribute("crossorigin",t.rH);break;case Ih.wE:default:this.$T.removeAttribute("crossorigin")}void 0!==t.iI?this.$T.preload=t.iI:this.$T.preload=el.yG,void 0!==t.oH?this.$T.title=t.oH:Ld(this.$T),t.PJ?await this.kJ(t.PJ):await this.Ca(t.VC),this.vJ.$n(this,t)}dJ(t){return!1}_J(t){return Promise.resolve(void 0)}DJ(t){return!1}NJ(){return!zD(this.MT.PJ)}async Xw(){Ld(this.$T),await super.Xw()}static MJ(t,e){return!!e.canPlayType&&Boolean(e.canPlayType(t.Mk))}};r();var K=class extends pe{constructor(t){super(Ti.qy),this.currentTime=t}};r();var ao=class extends pe{constructor(){super(Ti.Uy)}};r(),r();var YD=function(t){return t.LJ="BJ",t}({}),KD=class extends pe{constructor(t){super("BJ"),this.OJ=t}},jD=class extends Co{get FJ(){return this.VJ}WJ(t,e){const i=new se([t,e]);this.VJ=this.VJ.tB(i),this._o(new KD(i))}UJ(t,e){this.VJ=this.VJ.iB(new se([t,e]))}nr(){this.VJ=se.pB()}yn(){this.Ro()}constructor(...t){super(...t),this.VJ=se.pB()}};function QD(t,e){return void 0===e&&(e=new wb({highWaterMark:1/0})),new _h(new JD(t,e),{highWaterMark:0})}r(),r(),r();var JD=class{start(t){this.FQ=t,this.GJ()&&this.HJ()}pull(){this.Kd.length>0?this.ZJ():this.XJ=!0,this.GJ()&&this.HJ()}cancel(t){return En(this.Kd),this.Qd=0,this.XJ=!1,this.Od.cancel(t)}ZJ(){if(0===this.Kd.length)return;const t=this.Kd;this.Kd=[],this.Qd=0,this.XJ=!1,this.FQ.enqueue(t)}GJ(){if(this.XJ)return!0;return this.zJ-this.Qd>0}HJ(){if(this.qJ)return;const t=this.Od.read().then(this.YJ).catch(this.gx);this.qJ=t;const e=()=>{this.qJ===t&&(this.qJ=void 0)};t.then(e,e)}constructor(t,{size:e=(()=>1),highWaterMark:i=1}){this.Kd=[],this.Qd=0,this.FQ=void 0,this.XJ=!1,this.qJ=void 0,this.YJ=t=>t.done?(this.ZJ(),void this.FQ.close()):(this.Kd.push(t.value),this.Qd+=this.KJ(t.value),this.XJ&&this.ZJ(),this.GJ()?this.Od.read().then(this.YJ):void 0),this.gx=t=>{this.ZJ(),this.FQ.error(t)},this.Od=t.getReader(),this.KJ=e,this.zJ=i}};r(),r(),r(),r();var $D=class{jJ(t){this.QJ.push(t),this.Nb+=t.byteLength}JJ(t){if(this.Nb<=t)return this.$J();const e=this.QJ;let i=0,s=0;for(;s<e.length&&i+e[s].byteLength<=t;)i+=e[s].byteLength,s++;const n=e.slice(0,s);if(s<e.length&&i<t){const r=t-i;0,n.push(si(e[s],0,r)),i+=r}return{QJ:n,Nb:i}}t$(t){const e=this.JJ(t);return 1===e.QJ.length?e.QJ[0]:np(e.QJ,e.Nb)}$J(){return{QJ:this.QJ,Nb:this.Nb}}e$(t){if(this.Nb<=t)return this.i$();const e=this.QJ;let i=0,s=0;for(;s<e.length&&i+e[s].byteLength<=t;)i+=e[s].byteLength,s++;const n=e.splice(0,s);if(e.length>0&&i<t){const s=t-i;0,n.push(si(e[0],0,s)),e[0]=si(e[0],s),i+=s}return this.Nb-=i,{QJ:n,Nb:i}}s$(t){const e=this.e$(t);return 1===e.QJ.length?e.QJ[0]:np(e.QJ,e.Nb)}i$(){const t=this.$J();return this.QJ=[],this.Nb=0,t}n$(){const t=1===this.QJ.length?this.QJ[0]:np(this.QJ,this.Nb);return this.QJ=[],this.Nb=0,t}constructor(){this.QJ=[],this.Nb=0}},po=class{r$(t,e){}o$(){}h$(t){this.Kd.jJ(t),this.a$(!1)}u$(){this.a$(!0)}c$(){return 0!==this.Fa||0!==this.Kd.Nb}a$(t){for(;0!==this.Kd.Nb;){if(!t&&this.l$>this.Kd.Nb)return;switch(this.Fa){case 0:this.d$(t);break;case 1:this.f$(t);break;case 2:this._$(t)}}}v$(){this.Fa=0,this.l$=8}d$(t){const e=ra(this.Kd.t$(this.l$)),i=new Ri,s=Mi.ZD(e,i);if(!s.VD)return this.l$=s.zD,void(t&&this.l$>this.Kd.Nb&&this.m$(this.Kd.Nb));const n=s.XD.Tw;let r=s.XD.Nb;0===r&&(r=1/0),this.r$(n,r),this.g$(n)?this.p$(r):this.m$(r)}p$(t){this.Fa=1,this.l$=t}f$(t){const e=ra(this.Kd.s$(this.l$)),i=new Ri,s=Mi.WD(e,i,!t);if(!s.VD)throw new WS(i.nc);this.o$(),this.w$(s.UD),this.v$()}m$(t){this.Fa=2,this.l$=0,this.y$=t}_$(t){const e=this.Kd.e$(this.y$);this.y$-=e.Nb;for(const t of e.QJ)this.b$(t);(0===this.y$||t&&this.y$===1/0)&&(this.o$(),this.v$())}constructor(){this.Kd=new $D,this.Fa=0,this.l$=0,this.y$=0,this.v$()}};function tN(t){return t instanceof Gw}function eN(t){return t instanceof Ww}function iN(t){return t instanceof Ow||t instanceof Fw}function sN(t){return t instanceof cw}function nN(t){return t instanceof Gp}function rN(t){return t instanceof xc}function oN(t){return t instanceof pc}function hN(t){return t instanceof Jw}function aN(t){return t instanceof Eh}function uN(t){return t instanceof qw}function cN(t){return t instanceof Kw}function lN(t,e){const i=Fo(t.boxes,uN);if(i&&i.flags.baseDataOffsetPresent)i.baseDataOffset=i.baseDataOffset.add(e);else for(const i of t.boxes)i instanceof Kw&&i.flags.dataOffsetPresent&&(i.dataOffset=i.dataOffset+e)}r();var dN=class extends po{start(t){this.FQ=t}transform(t){this.h$(t)}flush(){this.u$()}g$(t){return t===_t.gP||t===_t.oD||t===_t.mD}w$(t){const e=this.A$(t);this.FQ.enqueue(e)}b$(t){this.FQ.enqueue(t)}A$(t){const e=ua(t.Kk.Kk);switch(t.Tw){case"moov":return this.S$(e);case"sidx":return this.T$(e);case"moof":return this.k$(e)}return e}get E$(){if(void 0===this.x$)throw new g("Expected to have found a movie header timescale.");return this.x$}R$(t){const e=this.I$.get(t);if(void 0===e)throw new g("Expected to have found a media header timescale for track ID "+t+".");return e}S$(t){const e=my(t);for(let t=0;t<e.boxes.length;t++){const i=e.boxes[t];i instanceof Nw?e.boxes[t]=this.C$(i):i instanceof Mw?e.boxes[t]=this.P$(i):i instanceof Ww&&this.D$(i)}for(const t of e.boxes)t instanceof xc&&this.N$(t);return e.serialize().join()}C$(t){this.x$=t.timescale;const e=Di(vo.fromNumber(t.duration,!0),this.E$,this.M$);return 0!==e.getHighBits()?this.P$(function(t){return new Mw({creation:vo.fromNumber(t.creationTime,!0),modification:vo.fromNumber(t.modificationTime,!0),scale:t.timescale,duration:vo.fromNumber(t.duration,!0)},t.nextTrackId,{rate:t.rate,volume:t.volume,matrix:t.matrix},t.flags)}(t)):(t.timescale=this.M$,t.duration=e.toInt(),t)}P$(t){return this.x$=t.timescale,t.timescale=this.M$,t.duration=Di(t.duration,this.E$,this.M$),t}D$(t){let e;for(let i=0;i<t.boxes.length;i++){const s=t.boxes[i];s instanceof Ow?(e=s.trackId,t.boxes[i]=this.L$(s)):s instanceof Fw?(e=s.trackId,t.boxes[i]=this.B$(s)):s instanceof cw?this.O$(s,e):s instanceof $p&&this.F$(s)}}L$(t){const e=Di(vo.fromNumber(t.duration,!0),this.E$,this.M$);return 0!==e.getHighBits()?this.B$(function(t){return new Fw({creation:vo.fromNumber(t.creationTime,!0),modification:vo.fromNumber(t.modificationTime,!0),duration:vo.fromNumber(t.duration,!0)},t.trackId,t.volume,t.width,t.height,{layer:t.layer,alternateGroup:t.alternateGroup,matrix:t.matrix})}(t)):(t.duration=e.toInt(),t)}B$(t){return t.duration=Di(t.duration,this.E$,this.M$),t}O$(t,e){for(let i=0;i<t.boxes.length;i++){const s=t.boxes[i];s instanceof ow?t.boxes[i]=this.V$(s,e):s instanceof hw&&(t.boxes[i]=this.W$(s,e))}}V$(t,e){this.I$.set(e,t.timescale);const i=Di(vo.fromNumber(t.duration,!0),t.timescale,this.M$);return 0!==i.getHighBits()?this.W$(function(t){return new hw({creation:vo.fromNumber(t.creationTime,!0),modification:vo.fromNumber(t.modificationTime,!0),scale:t.timescale,duration:vo.fromNumber(t.duration,!0)},t.language,t.flags)}(t),e):(t.timescale=this.M$,t.duration=i.toInt(),t)}W$(t,e){return this.I$.set(e,t.timescale),t.timescale=this.M$,t.duration=Di(t.duration,t.timescale,this.M$),t}F$(t){for(const e of t.boxes)e instanceof jp?this.U$(e):e instanceof Qp&&this.G$(e)}U$(t){for(const e of t.entries)e.mediaTime=_N(e.mediaTime,this.E$,this.M$),e.segmentDuration=_N(e.segmentDuration,this.E$,this.M$)}G$(t){for(const e of t.entries)e.mediaTime=Di(e.mediaTime,this.E$,this.M$),e.segmentDuration=Di(e.segmentDuration,this.E$,this.M$)}N$(t){for(let e=0;e<t.boxes.length;e++){const i=t.boxes[e];i instanceof pc?this.H$(i):i instanceof xw?t.boxes[e]=this.Z$(i):i instanceof Rw&&(t.boxes[e]=this.X$(i))}}H$(t){const e=this.R$(t.trackId);t.defaultSampleDuration=_N(t.defaultSampleDuration,e,this.M$)}Z$(t){const e=Di(vo.fromNumber(t.fragmentDuration,!0),this.E$,this.M$);return 0!==e.getHighBits()?this.X$(function(t){return new Rw(vo.fromNumber(t.fragmentDuration,!0),t.flags)}(t)):(t.fragmentDuration=e.toInt(),t)}X$(t){return t.fragmentDuration=Di(t.fragmentDuration,this.E$,this.M$),t}T$(t){let e=gy(t);return e=e instanceof ny?this.z$(e):this.q$(e),e.serialize().join()}z$(t){const e=t.timescale,i=Di(vo.fromNumber(t.earliestPresentationTime,!0),e,this.M$);if(0!==i.getHighBits())return this.q$(function(t){return new ry(t.referenceId,t.timescale,vo.fromNumber(t.earliestPresentationTime,!0),vo.fromNumber(t.firstOffset,!0),t.references,t.flags)}(t));t.timescale=this.M$,t.earliestPresentationTime=i.toInt();for(const i of t.references)i.subsegmentDuration=_N(i.subsegmentDuration,e,this.M$);return t}q$(t){const e=t.timescale;t.timescale=this.M$,t.earliestPresentationTime=Di(t.earliestPresentationTime,e,this.M$);for(const i of t.references)i.subsegmentDuration=_N(i.subsegmentDuration,e,this.M$);return t}k$(t){const e=py(t),i=e.getSize();for(const t of e.boxes)t instanceof Eh&&this.Y$(t);const s=e.getSize();if(s!==i){const t=s-i;for(const i of e.boxes)i instanceof Eh&&lN(i,t)}return e.serialize().join()}Y$(t){let e;for(let i=0;i<t.boxes.length;i++){const s=t.boxes[i];s instanceof qw?(e=this.R$(s.trackId),this.K$(s,e)):s instanceof Xw?t.boxes[i]=this.j$(s,e):s instanceof wc?t.boxes[i]=this.Q$(s,e):s instanceof Kw&&this.J$(s,e)}}K$(t,e){void 0!==t.defaultSampleDuration&&(t.defaultSampleDuration=_N(t.defaultSampleDuration,e,this.M$))}j$(t,e){const i=Di(vo.fromNumber(t.baseMediaDecodeTime,!0),e,this.M$);return 0!==i.getHighBits()?this.Q$(function(t){return new wc(vo.fromNumber(t.baseMediaDecodeTime,!0),t.flags)}(t),e):(t.baseMediaDecodeTime=i.toInt(),t)}Q$(t,e){return t.baseMediaDecodeTime=Di(t.baseMediaDecodeTime,e,this.M$),t}J$(t,e){let i=0,s=0;for(const n of t.samples){if(void 0!==n.duration){s+=n.duration;const t=_N(s,e,this.M$);n.duration=t-i,i=t}void 0!==n.compositionTimeOffset&&(n.compositionTimeOffset=fN(n.compositionTimeOffset,e,this.M$))}}constructor(t){super(),this.I$=ne(),this.M$=t}};function fN(t,e,i){return vo.fromInt(t,!1).multiply(i).divide(e).toNumber()}function _N(t,e,i){return vo.fromInt(t,!0).multiply(i).divide(e).toNumber()}function Di(t,e,i){return mi.IF(t).tV(mi.CF(i,!0)).nV(mi.CF(e,!0)).GF()}var vN=class{t0(t){return t.pipeThrough(new _a(this.e0))}constructor(t){this.e0=new dN(t)}};r(),r();var mN=function(t){return t[t.i0=64]="i0",t[t.s0=103]="s0",t[t.n0=107]="n0",t}({});function gN(t,e,i){const s=hc(t,e);if(s!==i)throw new b("Expected descriptor with tag "+i+", but found "+s)}function pN(t,e){gN(t,e,3);const i=wN(t,e),s=e.nc+i,n=Ei(t,e),r=hc(t,e),o=0!=(64&r),h=0!=(32&r),a=31&r;let u,c,l;if(0!=(128&r)&&(u=Ei(t,e)),o){c=Sc(t,e,hc(t,e))}h&&(l=Sc(t,e,2));const d=function(t,e){gN(t,e,4);const i=wN(t,e),s=e.nc+i,n=hc(t,e),r=hc(t,e),o=r>>2,h=0!=(2&r),a=Dg(t,e,3),u=$h(t,e),c=$h(t,e);let l;if(e.nc<s){const i=function(t,e){return t.getUint8(e.nc)}(t,e);5===i&&(l=function(t,e){gN(t,e,5);const i=wN(t,e),s=E(t,e,i);return{r0:5,o0:s}}(t,e))}return e.Rb(s),{r0:4,h0:n,a0:o,u0:h,c0:a,l0:u,d0:c,f0:l}}(t,e);return e.Rb(s),{r0:3,o:n,_0:u,Xu:c,v0:a,m0:l,g0:d}}function wN(t,e){let i=0;for(let s=0;s<4;s++){const s=hc(t,e);if(i=i<<7|127&s,!(128&s))break}return i}function yN(t,e){const i=hc(t,e),s=hc(t,e),n=hc(t,e),r=hc(t,e),o=3&hc(t,e),h=31&hc(t,e),a=[];for(let i=0;i<h;i++){const i=Ei(t,e);a.push(E(t,e,i))}const u=hc(t,e),c=[];for(let i=0;i<u;i++){const i=Ei(t,e);c.push(E(t,e,i))}return{p0:i,w0:s,y0:n,b0:r,A0:o,S0:a,T0:c}}function du(t,e,i){if(i&&e.byte>=i)return;const s=t.Lb(e.byte);return e.byte+=1,s}function bN(t,e){return function(t,e,i){let s=0,n=i;for(;n>0;)n-=1,s=256*s+du(t,e);return s}(t,e,2)}r(),r(),r(),r(),r(),r();var AN=class t{k0(t){this.E0=this.E0.concat(t.E0),this.x0+=t.V}R0(t,e,i){const s=this.x0,n=i-e;n>0&&(this.E0.push({I0:e,C0:i,P0:n,D0:s,N0:t}),this.x0+=n)}Lb(t){for(const e of this.E0)if(e.D0<=t&&t<e.D0+e.P0)return e.N0[t+e.I0-e.D0]}M0(t,e){let i=e;for(const e of this.E0){const s=e.C0;for(let n=e.I0;n<s;n+=1,i+=1)t[i]=e.N0[n]}return i}get V(){return this.x0}set V(t){const e=this.E0;let i=this.x0-t;if(!(t>=this.x0))if(this.x0=t,0!==t)for(let t=e.length-1;t>=0;t-=1){const s=e[t];if(i<=s.P0)return s.C0-=i,s.P0-=i,void(e.length!==t+1&&(e.length=t+1));i-=s.P0}else e.length=0}get Kk(){const t=new Array(this.x0);let e=0;for(const i of this.E0){const s=i.C0;for(let n=i.I0;n<s;n+=1,e+=1)t[e]=i.N0[n]}return t}L0(){const t=new j(this.x0);let e=0;for(const i of this.E0){const s=i.C0;for(let n=i.I0;n<s;n+=1,e+=1)t[e]=i.N0[n]}return t}Ib(e){const i=new t;for(const t of this.E0)i.R0(t.N0,t.I0,t.C0);return i.qV=e||ol({},this.qV),i}constructor(){this.x0=0,this.E0=[],this.qV={}}};r();var SN=[128,64,32,16,8,4,2,1];function TN(t,e){const i=_.floor(e.bit/8),s=0==(t.Lb(i)&SN[e.bit%8])?0:1;return e.bit+=1,s}function Go(t,e,i){let s=0,n=i;for(;n>0;)n-=1,s=2*s+TN(t,e);return s}function kN(t,e){let i=0;for(;0===TN(t,e)&&i<32;)i+=1;return Go(t,e,i)+2**i-1}function EN(t,e){const i=kN(t,e);return 1&i?_.floor((i+1)/2):-_.floor(i/2)}function xN(t,e){const i=[],s={byte:1};let n;do{i.push(IN(t,e,s)),n=e.Lb(s.byte)}while(void 0!==n&&128!==n);return i}function RN(t,e){let i,s=0;do{i=du(t,e),s+=i}while(255===i);return s}function IN(t,e,i){const s=RN(e,i),n=RN(e,i),r=i.byte,o=r+n;return i.byte=o,{B0:t,O0:s,F0:n,V0:r,W0:o,U0:e}}var CN=function(t){return t[t.G0=1]="G0",t[t.H0=2]="H0",t[t.Z0=3]="Z0",t[t.X0=4]="X0",t[t.z0=5]="z0",t[t.q0=6]="q0",t[t.Y0=7]="Y0",t[t.K0=8]="K0",t[t.j0=9]="j0",t}({}),PN=[void 0,[1,1],[12,11],[10,11],[16,11],[40,33],[24,11],[20,11],[32,11],[80,33],[18,11],[15,11],[64,33],[160,99],[4,3],[3,2],[2,1]];function DN(t,e,i){let s=8,n=8;for(let r=0;r<i;r+=1){if(0!==n){n=(s+EN(t,e)+256)%256}s=0===n?s:n}}var NN=class{Q0(){const t=this.J0;let e=_.max(0,this.$0+t.length-2);const i=this.t1,s=i.V;let n=0;for(;e<s;e+=1){const s=i.Lb(e);0===s?n+=1:(3===s&&n>=2&&t.push(e),n=0)}this.$0=e-t.length}e1(t){const e=this.J0;let i=t;for(const t of e){if(!(t<=i))return i;i+=1}return i}Lb(t){if(!(t>this.t1.V))return t>this.$0&&this.Q0(),this.t1.Lb(this.e1(t))}constructor(t){this.J0=[],this.$0=0,this.t1=t}};function MN(t){const e=new NN(t);let i,s,n,r,o,h,a=0,u=0,c=0,l=0;const d=e.Lb(1),f={bit:32};if(kN(e,f),100===d||110===d||122===d||144===d){const t=kN(e,f);3===t&&(i=TN(e,f)),kN(e,f),kN(e,f),TN(e,f);if(1===TN(e,f))for(let i=0;i<(3!==t?8:12);i+=1){1===TN(e,f)&&DN(e,f,i<6?16:64)}}const v=kN(e,f),m=kN(e,f);if(0===m)kN(e,f);else if(1===m){TN(e,f),EN(e,f),EN(e,f);const t=kN(e,f);for(let i=0;i<t;i+=1)EN(e,f)}kN(e,f),TN(e,f);const g=kN(e,f),p=kN(e,f),w=TN(e,f);0===w&&TN(e,f),TN(e,f);1===TN(e,f)&&(a=kN(e,f),u=kN(e,f),c=kN(e,f),l=kN(e,f));if(1===TN(e,f)){if(1===TN(e,f)){const t=Go(e,f,8);if(255===t)s=Go(e,f,16),n=Go(e,f,16);else{const e=PN[t];e&&(s=e[0],n=e[1])}}1===TN(e,f)&&TN(e,f);if(1===TN(e,f)){Go(e,f,3),TN(e,f);1===TN(e,f)&&(Go(e,f,8),Go(e,f,8),Go(e,f,8))}1===TN(e,f)&&(kN(e,f),kN(e,f)),r=TN(e,f),1===r&&(o=Go(e,f,32),h=Go(e,f,32),TN(e,f))}return{width:_.floor(16*(g+1)-2*a-2*u),height:_.floor((2-w)*(p+1)*16-2*c-2*l),qM:s,YM:n,i1:r?h/(2*o):void 0,s1:i,n1:v}}function LN(t){const e=dn(nr.JD(t),_t.gP);if(!e)return;const i=e.XD.mN,s=[];for(const t of e.Z){const e=t.XD.EN,i=t.AN.XD.mN;let h,a,u;for(const e of t.AN.MN.ON.VN.UN){const t=BN(e);var n,r,o;if(t)h=null!=(n=t.o1)?n:h,a=null!=(r=t.h1)?r:a,u=null!=(o=t.a1)?o:u}s.push({EN:e,mN:i,o1:h,h1:a,a1:u})}return{mN:i,Z:s}}function BN(t){let e,i,s;if(t.Tw===_t.CP){var n;const i=yN(ra(t.yM.Kk),new Ri);e=function(t){return"avc1."+ON(t.w0,2)+ON(t.y0,2)+ON(t.b0,2)}(i),s=null==(n=function(t){if(0===t.S0.length)return;const e=t.S0[0],i=new AN;return i.R0(e,0,e.byteLength),MN(i)}(i))?void 0:n.i1}else if(t.Tw===_t.DP||t.Tw===_t.NP){const i=function(t,e){const i=e.Db(),s=jo(t,i,8),n=jo(t,i,2),r=jo(t,i,1),o=jo(t,i,5),h=jo(t,i,32),a=[];for(let e=0;e<6;e++)a.push(jo(t,i,8));const u=jo(t,i,8);i.xb(4);const c=jo(t,i,12);i.xb(6);const l=jo(t,i,2);i.xb(6);const d=jo(t,i,2);i.xb(5);const f=jo(t,i,3);i.xb(5);const _=jo(t,i,3),v=jo(t,i,16),m=jo(t,i,2),g=jo(t,i,3),p=jo(t,i,1),w=jo(t,i,2),y=jo(t,i,8),b=[];for(let e=0;e<y;e++){const e=jo(t,i,1);i.xb(1);const s=jo(t,i,6),n=jo(t,i,16),r=[];for(let e=0;e<n;e++){const e=jo(t,i,16),s=E(t,new Ri(i.nc>>3),e);i.xb(8*e),r.push({u1:e,c1:s})}b.push({l1:e,d1:s,_1:n,v1:r})}return{p0:s,m1:n,g1:r,w1:o,b1:a,A1:u,S1:c,T1:l,E1:h,R1:d,I1:f,C1:_,P1:v,D1:g,N1:p,M1:m,A0:w,L1:y,B1:b}}(ra(t.TM.Kk),new Ri);e=function(t,e){let i=t.toString()+".";switch(e.m1){case 0:break;case 1:i+="A";break;case 2:i+="B";break;case 3:i+="C";break;default:return}switch(i+=e.w1.toString()+".",i+=function(t){let e=t;return e=e>>>1&1431655765|(1431655765&e)<<1,e=e>>>2&858993459|(858993459&e)<<2,e=e>>>4&252645135|(252645135&e)<<4,e=e>>>8&16711935|(16711935&e)<<8,e=e>>>16|e<<16,e}(e.E1).toString(16)+".",e.g1){case 0:i+="L";break;case 1:i+="H";break;default:return}i+=e.A1.toString();const s=e.b1.reduce(((t,e)=>0===t?e:e+1),0);for(let t=0;t<s;t++)i+="."+e.b1[t].toString(16).toUpperCase();return i}(t.Tw,i)}else if(t.Tw===_t.HP||t.Tw===_t.ZP||t.Tw===_t.zP||t.Tw===_t.qP){const i=function(t,e){const i=e.Db(),s=jo(t,i,8),n=jo(t,i,8),r=jo(t,i,7),o=jo(t,i,6),h=Boolean(jo(t,i,1)),a=Boolean(jo(t,i,1)),u=Boolean(jo(t,i,1)),c=jo(t,i,4);return jo(t,i,28),jo(t,i,32),jo(t,i,32),jo(t,i,32),jo(t,i,32),{O1:s,F1:n,V1:r,W1:o,U1:h,G1:a,H1:u,Z1:c}}(ra(t.OM.Kk),new Ri);e=function(t,e){const i=t.toString(),s=Jh(e.V1.toString(),2,"0"),n=Jh(e.W1.toString(),2,"0");return i+"."+s+"."+n}(t.Tw,i)}else if(t.Tw===_t.LP){const i=function(t,e){const i=e.Db(),s=jo(t,i,8);i.xb(24);const n=jo(t,i,8),r=jo(t,i,8),o=jo(t,i,4),h=jo(t,i,3),a=eu(t,i),u=jo(t,i,8),c=jo(t,i,8),l=jo(t,i,8),d=jo(t,i,16),f=new Array(8);for(let e=0;e<d;e++)f[e]=jo(t,i,8);return{p0:s,V1:n,W1:r,X1:o,z1:h,q1:a,HM:u,ZM:c,XM:l,Y1:d,K1:f}}(ra(t.EM.Kk),new Ri);e=function(t,e){let i=t.toString()+".";return i+="0"+e.V1+".",i+=Jh(""+e.W1,2,"0")+".",i+=Jh(""+e.X1,2,"0")+".",i+=Jh(""+e.z1,2,"0")+".",i+=Jh(""+e.HM,2,"0")+".",i+=Jh(""+e.ZM,2,"0")+".",i+=Jh(""+e.XM,2,"0")+".",i+="0"+e.q1,i}(t.Tw,i)}else if(t.Tw===_t.OP){const i=function(t,e){const i=e.Db();i.xb(1);const s=jo(t,i,7),n=jo(t,i,3),r=jo(t,i,5),o=eu(t,i),h=eu(t,i),a=eu(t,i),u=eu(t,i),c=eu(t,i),l=eu(t,i),d=jo(t,i,2);i.xb(3);const f=eu(t,i);let _;return f?_=jo(t,i,4):i.xb(4),{jD:s,j1:n,Q1:r,J1:o,t2:h,e2:a,i2:u,s2:c,n2:l,o2:d,h2:f,a2:_}}(ra(t.IM.Kk),new Ri);e=function(t,e,i){let s=t.toString()+".";if(s+=e.j1+".",s+=""+Jh(""+e.Q1,2,"0"),s+=(0===e.J1?"M":"H")+".",s+=(1===e.e2?12:10)+".",s+=(1===e.j1?0:e.i2)+".",s+=""+e.s2+e.n2+(1===e.s2&&1===e.n2?e.o2:"0"),i&&i.GM===BS.ON_SCREEN_COLOURS){const t=i;s+="."+Jh(""+t.HM,2,"0")+"."+Jh(""+t.ZM,2,"0")+"."+Jh(""+t.XM,2,"0")+"."+(t.zM?1:0)}return s}(t.Tw,i,t.CM)}else if(t.Tw===_t.QP){i=function(t){const e=t.g0;switch(e.h0){case mN.i0:return function(t){var e;if(!(null==(e=t.f0)?void 0:e.o0))return"mp4a.40";const i=function(t,e){let i=jo(t,e,5);31===i&&(i=32+jo(t,e,6));const s=jo(t,e,4);let n;return 15===s&&(n=jo(t,e,24)),{u2:i,c2:s,l2:n,d2:jo(t,e,4)}}(ra(t.f0.o0),new pg);return"mp4a.40."+i.u2}(e);case mN.s0:return"mp4a.40.2";case mN.n0:return"mp4a.40.34"}}(pN(ra(t.dM.Kk),new Ri))}else if(t.Tw===_t.$P)i="fLaC";else{if(t.Tw!==_t.YP)return(t.Tw===_t.rD||t.Tw===_t.nD)&&t.NM?BN(t.NM):void 0;i="ec-3"}return{o1:e,h1:i,a1:s}}function ON(t,e){const i=t.toString(16);return Jh(i,e,"0")}function FN(t,e){const i=nr.JD(ra(t)),s=function(t,e){let i;for(const n of t.Z){var s;const t=null==(s=n.aL)?void 0:s.aL;if(t){const s=n.XD.EN,r=Fo(e.Z,(t=>t.EN===s)),o=H.IF(t,r.mN);i&&!o.bF(i)||(i=o)}}return i}(dn(i,_t.oD),e),n=dn(i,_t.fD);return{WO:s._F(),f2:n.Kk}}r(),r();var VN=Z.eg,WN=class extends Co{get bj(){return this.Pj}set bj(t){this.Pj=t}get Ej(){return this.Mj}set Ej(t){this.Mj=t}get va(){return this._2||this.m2.updating}g2(t,e,i){switch(t.Tw){case Ce.iJ:case Ce.Sk:return this.w2((i=>this.b2(t,e,i)),i);case Ce.sJ:throw new g("Opaque segments are not supported on web.")}}A2(t,e){switch(t.Tw){case Ce.iJ:return this.w2((e=>this.S2(t,e)),e);case Ce.Sk:throw new g("Streaming initialization segments are not supported on web.");case Ce.sJ:throw new g("Opaque initialization segments are not supported on web.")}}async S2(t,e){this.T2?this.E2=LN(ra(t.Kk)):(await this.R2(t,void 0,e),VN&&(this.I2=!1,this.C2=t))}async b2(t,e,i){VN&&this.I2&&this.C2&&await this.S2(this.C2,i);try{if(J(i),this.T2&&this.E2){const n=await async function(t,e){switch(t.Tw){case Ce.iJ:return t;case Ce.Sk:{const i=await He(t.Kk,e);return J(e),{Tw:Ce.iJ,Kk:new j(i)}}case Ce.sJ:throw new g("MediaBufferWrapper - Cannot convert opaque SegmentData to ArraySegmentData.")}}(t,i),r=FN(n.Kk,this.E2);var s;t={Tw:Ce.iJ,Kk:r.f2},e=ol({},e,{BV:r.WO+(null!=(s=e.BV)?s:0)})}await this.R2(t,e,i),this._o(new pe(oe.tJ))}finally{t.Tw===Ce.Sk&&t.Kk.cancel(new Bu).catch(Tt)}}async R2(t,e,i){switch(J(i),e&&await this.P2(e),t.Tw){case Ce.iJ:if(this.D2){const e=this.D2.t0(yb(t.Kk));return await this.N2(e,i)}return await this.M2(t.Kk);case Ce.Sk:if(this.D2){const e=this.D2.t0(t.Kk);return await this.N2(e,i)}return await this.N2(t.Kk,i)}}async N2(t,e){const i=this.L2.wR,s=QD(t).getReader();let n=!1;try{for(;;){const t=await ou(s.read(),e);if(t.done){n=!1;break}J(e);const i=mu(t.value);n=!0,await this.M2(i)}}catch(t){if(s.cancel(t).catch(Tt),n){await this.B2();const t=this.L2.wR.jn(i.jL());for(let e=0;e<t.V;e++)await this.O2(t.Sn(e),t.Tn(e))}throw t}}F2(t,e){return this.w2((()=>this.W2(t,e)))}async W2(t,e){this.m2.appendWindowStart===t&&this.m2.appendWindowEnd===e||(await this.B2(),this.m2.appendWindowStart=0,this.m2.appendWindowEnd=e,this.m2.appendWindowStart=t)}async P2(t){if(this.m2.timestampOffset!==t.BV)try{this.m2.timestampOffset=t.BV}catch(e){await this.B2(),this.m2.timestampOffset=t.BV}}async M2(t){this.m2.appendBuffer(t),this.U2=!0,await this.G2()}H2(t,e,i){return this.w2((i=>this.O2(t,e,i)),i)}async O2(t,e,i){J(i),this.m2.remove(t,e),await this.G2()}G2(){const t=this.L2.wR;return new Promise(((e,i)=>{let s,n=!1,r=()=>{n=!0},o=()=>{n=!1,s="error"},h=()=>{n=!1,s="aborted"},a=()=>{n=!1,s="sourceclose",u()},u=()=>{c(),n&&!s?(t.aB(this.L2.wR)||this._o(new pe(oe.tJ)),e()):i(new g(s))},c=()=>{this.m2.removeEventListener("update",r),this.m2.removeEventListener("error",o),this.m2.removeEventListener("abort",h),this.m2.removeEventListener("updateend",u),this.Z2.vn(wo.oJ,a)};this.m2.addEventListener("update",r),this.m2.addEventListener("error",o),this.m2.addEventListener("abort",h),this.m2.addEventListener("updateend",u),Z.Cm&&Z.Dm<3&&this.Z2.bn(wo.oJ,a)}))}X2(){return this.w2((()=>this.B2()))}async B2(){if(this.Z2.rI===Ts.GE){VN&&(this.I2=!0),this.m2.updating&&(this._2=!0);try{this.m2.abort()}catch(t){0,this._2=!1}this.va&&await this.G2().catch(Tt)}}z2(){return"function"==typeof this.m2.changeType&&!Z.xm}_J(t){if(this.q2(),this.Z2.rI===Ts.Y2)return;var e;this.K2=t;const i=null!=(e=this.Z2.j2(t.Mk))?e:t.Mk;this.T2=UN(t.Mk,this.Q2),this.z2()&&!lh(this.Q2,i)&&(this.Q2=i,this.m2.changeType(this.Q2))}J2(){this.Z2.rI!==Ts.Dy||this.t3||this.va||(this.m2.timestampOffset=this.m2.timestampOffset,this.Z2.e3())}async w2(t,e){this.q2();const i=new da;i.Qw(this.i3.Uw),e&&i.Qw(e);try{this.t3=t(i.Uw),await this.t3,this.Z2.e3(),this.va&&await this.G2()}finally{this.t3=void 0,i.Xw()}}q2(){if(this.t3)throw new g("Internal error")}async Xw(){this.Ro(),this.i3.jw(),this.t3&&(await this.t3.catch(Tt),this.t3=void 0),this.m2.removeEventListener("updateend",this.s3),this.m2.removeEventListener("bufferedchange",this.n3)}constructor(t,e,i,s,n){var r;if(super(),this.Pj=20,this.Mj=30,this._2=!1,this.U2=!1,this.t3=void 0,this.i3=new da,this.I2=!1,this.C2=void 0,this.T2=!1,this.E2=void 0,this.s3=()=>{this._2=!1},this.n3=t=>{t.removedRanges&&this._o(new pe(oe.tJ))},this.Z2=e,this.L2=t,this.m2=i,this.m2.addEventListener("updateend",this.s3),this.m2.addEventListener("bufferedchange",this.n3),this.K2=s,this.Q2=n,this.T2=UN(s.Mk,n),null==(r=e.kd)?void 0:r.ap){var o;const t=null!=(o=e.kd.r3)?o:1e5;this.D2=new vN(t)}}};function UN(t,e){return Cl(t,"audio/mp4")&&Cl(e,"audio/mpeg")}r();var GN=class{get wR(){if(this.o3.rI===Ts.Y2)return se.pB();let t=se.Cn(this.m2.buffered).jn(new se([0,1/0]));const e=this.h3;return void 0!==e&&t.V>0&&t.Tn(t.V-1)===e&&(t=t.tB(se.mB(e))),t}RJ(){return!!this.h3&&this.wR.YL().wr(this.h3)}a3(){const t=this.wR;this.h3=t.V>0?t.Tn(t.V-1):0,this.o3.u3()}J2(){this.h3=void 0}constructor(t,e){this.h3=void 0,this.o3=e,this.m2=t}};function HN(t){const e=t.gT("codecs");return e?e.split(",").map((t=>t.trim())):[]}function ZN(t,e){return Jm(t,e,_u)}function XN(t,e){return!("opus"===t)&&!("opus"===e)||t===e}function zN(t,e){const i=qN(t),s=qN(e);if((i||s)&&Ms.Ys._p)return!0;const n=i||YN(t),r=s||YN(e);return!n&&!r||t.split(".")[0]===e.split(".")[0]}function qN(t){return/^(ac-3|dac3|ec-3|dec3|ec\+3|ac-4|dac4)/.test(t)}function YN(t){return/^(dvav|dva1|dvhe|dvh1)/.test(t)}function _u(t,e){if(t===e)return!0;const i=t.split("."),s=e.split("."),n=i[0];if(n!==s[0])return!1;if("mp4a"===n){const[,t,e]=i,[,n,r]=s;if(t!==n)return!1;if(Number(e)!==Number(r))return!1}return!0}r();var KN=class extends ri{get l3(){return this.d3}get f3(){return this._3}constructor(t,e,i,s){super(i),this.d3=t,this._3=e,this.v3=i}};function jN(t,e,i,s,n,r,o){const h=new GN(n,t),a=new WN(h,t,n,i,r);return new QN(t,e,i,s,h,a,o)}var QN=class extends Co{get wR(){return this.L2.wR}get kd(){return this.MT}get Mk(){return this.IT}get m3(){return this.g3}get w3(){return this.y3.FJ}get bj(){return this.b3.bj}set bj(t){this.b3.bj=t}get Ej(){return this.b3.Ej}set Ej(t){this.b3.Ej=t}get va(){return this.b3.va}RJ(){return this.L2.RJ()}a3(){this.L2.a3()}J2(){this.L2.J2(),this.b3.J2()}A3(t,e){this.y3.WJ(t,e)}S3(t,e){this.y3.UJ(t,e)}T3(){return this.b3.X2()}g2(t,e,i){return this.b3.g2(t,e,i)}A2(t,e,i){return this.b3.A2(t,i)}F2(t,e){return Z.Cm&&Z.Dm<3?this.b3.F2(t,1/0):this.b3.F2(t,e)}async eT(t,e,i){this.S3(t,e);const s=this.wR;await this.b3.H2(t,e,i);const n=0!==s.V&&0===this.wR.V;(Z._g||Z.Mm)&&n&&this.WB.Rb(this.WB.ER)}dJ(t){const e=t.Mk;if(this.IT===e)return!0;const i=this.E3.get(e);if(void 0!==i)return i;const s=this.x3(t);return this.E3.set(e,s),s}x3(t){const e=this.Z2.j2(t.Mk);if(void 0===e)return!1;const i=xy(this.IT),s=xy(e),n=HN(i),r=HN(s);if(this.b3.z2()){if(!function(t,e){return Jm(t,e,zN)}(n,r))return!1;if(Z.gg&&!function(t,e){return Jm(t,e,XN)}(n,r))return!1}else{if(i.Tw!==s.Tw)return!1;if(!ZN(n,r))return!1}return!0}async _J(t){const e=t.Mk;this.IT!==e&&(this.E3.clear(),this.b3._J(t),this.IT=e),this.MT=t,this.Z2.R3()}async Xw(){this.E3.clear(),this.Ro(),this.y3.yn();try{this.b3.vn(oe.tJ,this.Ds),await this.b3.Xw()}catch(t){}}constructor(t,e,i,s,n,r,o){super(),this.E3=Oh(),this.Z2=t,this.MT=i,this.IT=i.Mk,this.g3=s,this.WB=e,this.L2=n,this.b3=r,this.y3=o,this.b3.bn(oe.tJ,this.Ds)}};r();var JN=class{I3(){let t=this.Sn,e=this.Tn;if(this.C3||this.P3){const i=.001*(Ms.Wg()-this.D3);this.C3&&(t+=i),this.P3&&(e+=i)}return se.gB(t,e)}constructor(t,e,i=!1,s=!1){this.Sn=t,this.Tn=e,this.C3=i,this.P3=s,this.D3=Ms.Wg()}};r(),r();var $N=.5,tM=[Ti.ho,Ti.zy,Ti.Jy,Ti.Qy,Ti.Oy,Ti.Vy,Ti.Dy,Ti.Yy,Zc.iC,yo.fa],eM=class{N3(t){this.M3.push(t),t.bn(YD.LJ,this.L3)}get FJ(){return this.M3.reduce(((t,e)=>t.tB(e.FJ)),se.pB())}yn(){this.B3(),this.O3.vn(Zc.iC,this.F3),this.WB.vn(Ti.qy,this.F3),this.WB.vn(tM,this.V3),this.M3.forEach((t=>t.vn(YD.LJ,this.L3))),this.W3(),this.U3=!0}DJ(t){if(this.WB.PR)return!1;if(0!==this.G3)return!1;const e=this.L2.wR,i=e.sB(t);if(i>=0&&t+$N<e.Tn(i))return!1;const s=i>=0?i+1:e.dB(t);if(s<0||s>=e.V)return!1;const n=e.Sn(s);if(se.gB(t,n).iB(this.FJ).vB>1)return!1;if(0===t&&!this.WB.uI)return this.H3(t,n,2e3),!0;if(Ms.sR)return this.H3(t,n,250),!0;return!(_.abs(n-t)<=.001)&&(this.Z3(n),!0)}H3(t,e,i){this.W3(),this.X3=t,this.WB.bn(Ti.Jy,this.z3),this.G3=Ms.Gg((()=>{this.X3===this.WB.ER&&this.Z3(e),this.W3()}),i)}W3(){0!==this.G3&&(this.WB.vn(Ti.Jy,this.z3),Ms.Ug(this.G3),this.G3=0)}Z3(t){this.WB.Rb(t,!1,!0)}q3(){0!==this.Y3&&(Ms.Ug(this.Y3),this.Y3=0),this.WB.vn(Ti.hb,this.ed)}K3(){this.U3||0===this.j3&&(this.q3(),this.j3=Ms.Gp(this.Q3,250))}B3(){0!==this.j3&&(Ms.Hp(this.j3),this.j3=0),this.q3(),this.WB.uI||(this.J3=0)}t4(){return!this.WB.KR&&!this.WB.uI&&0!==this.WB.QR&&!this.WB.PR&&!this.WB.lt&&(this.e4()||this.O3.rI>=Ht.sO)}e4(){const t=this.WB.ER,e=this.L2.wR,i=e.sB(t);return-1!==i&&e.Tn(i)>t+$N}i4(t,e){const i=e.sB(t);return i>-1?e.Tn(i):t}constructor(t,e,i,s){this.L2=t,this.O3=e,this.WB=i,this.U3=!1,this.M3=[],this.G3=0,this.Y3=0,this.s4=0,this.X3=0,this.J3=0,this.j3=0,this.n4=1,this.L3=t=>{const e=this.WB.ER,i=t.OJ.wr(e),s=t.OJ.wr(e,$N)&&this.WB.rI<=Ht.iO;(i||s)&&this.DJ(e)},this.F3=Vd((t=>{if(this.U3)return;if(this.O3.rI<=Ht.iO){const t=this.WB.ER;this.DJ(t)||this.Q3()}else this.W3()}),100),this.ed=Vd((t=>{this.K3()}),100),this.z3=t=>{t.currentTime!==this.X3&&this.W3()},this.V3=()=>{this.t4()?0===this.j3&&(this.WB.bn(Ti.hb,this.ed),this.Y3=Ms.Gg((()=>{this.K3()}),3500)):this.B3()},this.Q3=()=>{const t=this.s4,e=this.J3,i=this.WB.ER,s=Ms.Wg(),n=this.L2.wR;if(t!==i)return this.s4=i,this.J3=s,this.n4=1,void(this.r4=Ms.rR?2e3:1e3);if(this.t4()&&0!==n.V&&e>0&&s>e+this.r4){let t;const e=this.FJ.YL().iB(n),s=e.lB(i);if(-1!==s){const n=e.Sn(s);if(n-i<1){const i=e.Tn(s);0,t=i}}var r;if(!t)t=null==(r=this.o4)?void 0:r.determineStallJumpTarget(),t||(t=i+.01*this.n4,n.wr(t)||(t=this.i4(i,n)));0,this.s4=t,this.n4++,this.r4=_.min(2*this.r4,1e4),this.Z3(t)}},this.O3.bn(Zc.iC,this.F3),this.WB.bn(Ti.qy,this.F3),this.WB.bn(tM,this.V3),this.o4=s,this.r4=Ms.rR?2e3:1e3}};function iM(t){const e=[];if(t.h4&&e.push(t.h4.wR),t.a4&&e.push(t.a4.wR),0===e.length)return se.pB();let i=0;for(const t of e)t.V>0&&(i=_.max(i,t.Tn(t.V-1)));const s=t.RJ;let n=new se([0,i],[!0,s]);for(let t of e)s&&t.V>0&&(t=t.tB(new se([t.Tn(t.V-1),i],[!0,!0]))),n=n.jn(t);return n}function sM(t,e,i){const s=t.wR;let n,r=s.sB(e);if(r>=0){if(!(r+1<s.V))return Promise.resolve();n=s.Sn(r+1)}else{if(r=s.dB(e),!(r>=0))return Promise.resolve();n=s.Sn(r)}return t.eT(n,1/0,i)}function nM(t,e,i){if(!t.wr(e)){const s=t.sB(e,i);if(s>=0){const i=t.Sn(s);if(e<i)return i}}return e}r();var rM=Z.Gm||Z.Zm,oM=Z.jm||Z.eg||Z.su,Ts=function(t){return t.Y2="closed",t.GE="open",t.Dy="ended",t}({}),hM=class extends XD{get h4(){return this.u4}get a4(){return this.c4}get ct(){if(this.l4)return this.l4;const t=this.JG.duration;return t===cf?1/0:t}d4(t){if(S(t)||t<0)throw new g("Invalid duration");this.f4()?this._4(t):this.l4=t}_4(t){const e=t===1/0;if(e&&this.JG.setLiveSeekableRange){const t=2**39;this.JG.setLiveSeekableRange(0,t)}this.JG.duration=e?oM?1/0:cf:t,this.l4=void 0}get wR(){return rM?iM(this):function(t,e){let i=e;return i.V>0&&t.RJ&&(i=i.tB(se.mB(i.Tn(i.V-1)))),i}(this,se.Cn(this.$T.buffered))}get IJ(){var t;return null==(t=this.u4)?void 0:t.wR}get CJ(){var t;return null==(t=this.c4)?void 0:t.wR}get hI(){return this.v4.I3().jn(new se([0,this.ct],[!0,!0]))}m4(t,e,i,s){this.v4=new JN(t,e,!!i,!!s)}get RJ(){return(!this.u4||this.u4.RJ())&&(!this.c4||this.c4.RJ())}get rI(){return this.JG.readyState}async xj(){const t=this.MT,e=Fo(t.g4,(t=>Cl(t.Mk,"audio"))),i=Fo(t.g4,(t=>Cl(t.Mk,"video")));if(this.$T.disableRemotePlayback=!0,await this.w4(),e){const t=new jD;var s;this.y4.N3(t);const i=null!=(s=this.j2(e.Mk))?s:e.Mk;this.b4=this.JG.addSourceBuffer(i),this.u4=jN(this,this.WB,e,ee.vE,this.b4,i,t),this.u4.bn(oe.tJ,this.n3)}if(i){const t=new jD;var n;this.y4.N3(t);const e=null!=(n=this.j2(i.Mk))?n:i.Mk;this.A4=this.JG.addSourceBuffer(e),this.c4=jN(this,this.WB,i,ee.mE,this.A4,e,t),this.c4.bn(oe.tJ,this.n3)}this.vJ.$n(this,t)}async w4(){await super.kJ(this.JG),"open"!==this.rI&&await pA(this.JG,"sourceopen")}f4(){if("open"!==this.rI)return!1;const t=this.u4&&this.u4.va,e=this.c4&&this.c4.va;return!(t||e)}a3(){this.S4=!0,this.u4&&this.u4.a3(),this.c4&&this.c4.a3(),this.S4=!1,this.T4()}J2(){this.u4&&this.u4.J2(),this.c4&&this.c4.J2()}dJ(t){const e=Fo(t.g4,(t=>Cl(t.Mk,"audio"))),i=Fo(t.g4,(t=>Cl(t.Mk,"video")));if(this.u4){if(!e)return!1;if(!this.u4.dJ(e))return!1}else if(e)return!1;if(this.c4){if(!i)return!1;if(!this.c4.dJ(i))return!1}else if(i)return!1;return!!super.dJ(t)}async _J(t){const e=Fo(t.g4,(t=>Cl(t.Mk,"audio"))),i=Fo(t.g4,(t=>Cl(t.Mk,"video"))),s=[];this.u4&&s.push(this.u4._J(e)),this.c4&&s.push(this.c4._J(i)),await Promise.all(s),await super._J(t)}mJ(t){super.mJ(t)}async Xw(){if(this.JG.removeEventListener("sourceclose",this.E4),Z.Mm&&await this.xJ(),this.u4){if(await this.u4.Xw(),this.u4=void 0,Mm()&&(Z.Mm||Z.Cm))try{this.JG.removeSourceBuffer(this.b4)}catch(t){}this.b4=void 0}if(this.c4){if(await this.c4.Xw(),this.c4=void 0,Mm()&&(Z.Mm||Z.Cm))try{this.JG.removeSourceBuffer(this.A4)}catch(t){}this.A4=void 0}this.$T.src&&URL.revokeObjectURL(this.$T.src),this.$T.disableRemotePlayback=!1,this.WB.vn([Ti.Jy,Ti.Oy],this.x4),this.y4.yn(),Z.Cm&&await this.xJ(),await super.Xw()}R3(){const t=this.MT,e=t.g4.map((t=>Cl(t.Mk,"audio")&&this.u4?this.u4.kd:Cl(t.Mk,"video")&&this.c4?this.c4.kd:t));this.MT=ol({},t,{g4:e})}u3(){this.S4||this.T4()}get R4(){if(!this.RJ)return!1;const t=this.wR;return 0!==t.V&&t.Sn(t.V-1)<=this.WB.ER}T4(){this.R4&&this.f4()&&(this.JG.endOfStream(),this.l4=void 0,this._o(new pe(wo.nJ)),this.WB.n3())}e3(){this.f4()&&(this.RJ?this.T4():void 0!==this.l4&&this._4(this.l4))}DJ(t){return this.y4.DJ(t)}NJ(){return!0}j2(t){return aM(this.I4,t)}static MJ(t){const e=Ia(t.C4);if(void 0===e)return!1;if("function"!=typeof e.isTypeSupported)return!1;const i=new Mf(t.C4);for(const e of t.g4)if(void 0===aM(i,e.Mk))return!1;return!0}constructor(t,e,i,s,n,r=new Mf(t.C4),o){super(t,e,s,n),this.u4=void 0,this.b4=void 0,this.c4=void 0,this.A4=void 0,this.v4=new JN(0,1/0),this.l4=void 0,this.S4=!1,this.E4=()=>{this._o(new pe(wo.oJ))},this.P4=()=>{this._o(new pe(wo.aJ))},this.x4=()=>{this.T4()},this.n3=()=>{this.WB.n3()},this.I4=r,this.JG=this.I4.wp(),this.JG.addEventListener("sourceclose",this.E4),this.JG.addEventListener("sourceopen",this.P4),this.WB.bn([Ti.Jy,Ti.Oy],this.x4),this.y4=new eM(this,i,this.WB,o)}};function aM(t,e){const i=xy(e),s=HN(i),n="audio/mp4"===i.Tw,r=n&&1===s.length&&"mp4a.40.34"===s[0];if(t.bp(e)&&(!r||!Z.eg))return e;if(r){const e=['audio/mp4; codecs="mp3"',"audio/mpeg"];for(const i of e)if(t.bp(i))return i}if(n&&1===s.length&&"flac"===s[0].toLowerCase()){const i=["flac","fLaC","FLAC"];for(const s of i){const i='audio/mp4; codecs="'+s+'"';if(t.bp(e))return i}}}r(),r();var uM=class extends pe{constructor(t){super(Ti.Oy),this.currentTime=t}},cM=[Ti.ub,Ti.Yy,Ti.Jy,Ti.Oy,Ti.ho,Ti.zy],lM=class extends Co{get ER(){return this.uZ}get D4(){return this.N4}get M4(){return this.L4}get ct(){return this.MA}get PR(){return this.B4}get KR(){return this.dZ}get rI(){return this.O4}get uI(){return this.cZ}get ZR(){return this.lZ}set ZR(t){this.ZR!==t&&(this.lZ=t,this._o(new ns(this.ER,this.gI)))}get QR(){return this.fZ}set QR(t){this.QR!==t&&(this.fZ=t,this._o(new ju(this.ER,this.QR)))}get gI(){return this.zA}set gI(t){this.gI!==t&&(this.zA=t,this._o(new ns(this.ER,this.gI)))}Rb(t,e,i){this.uZ!==t&&(this.uZ=t,this.N4=e,i&&!this.cZ?(this.L4=!0,this._o(new uM(this.ER))):(this.L4=!1,this.cZ=!0,this._o(new R(this.ER))))}EI(){this.dZ||(this.dZ=!0,this._o(new ul(this.ER)))}xI(){this.dZ&&(this.dZ=!1,this._o(new $(this.ER)))}Xw(){this.Ro()}constructor(t,e,i,s,n,r,o,h,a,u,c){super(),this.uZ=t,this.MA=e,this.B4=i,this.dZ=s,this.cZ=n,this.lZ=r,this.fZ=o,this.zA=h,this.O4=a,this.N4=u,this.L4=c}};function dM(t){return new lM(t.ER,t.ct,t.PR,t.KR,t.uI,t.ZR,t.QR,t.gI,t.rI,!1,t.M4)}function fM(t,e){e.ct===t.ct||S(e.ct)&&S(t.ct)||t._o(new $s(t.ct)),t.ZR=e.ZR,t.gI=e.gI,t.QR=e.QR,e.KR?t.EI():t.xI().catch(Tt),e.ER!==t.ER||e.rI>Ht.eO&&t.rI===Ht.eO?t.Rb(e.ER,e.D4,e.M4):!e.uI&&t.uI?t._o(new R(t.ER)):e.uI&&!t.uI&&t.rI>=Ht.iO&&t._o(new oa(t.ER)),!e.PR&&t.PR&&t._o(new Xs(t.ER))}r(),r();var _M=class extends Co{get rI(){return this.oI()}F4(t){this.RW!==t&&(this.RW=t,this._o(new hu(this.WB.ER,t)))}V4(){this.F4(this.oI())}nr(){this.F4(Ht.eO)}Xw(){this.Ro()}constructor(t){super(),this.RW=Ht.eO,this.W4=()=>{this.V4()},this.WB=t}};r();var vM=["emptied","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","timeupdate","progress","seeking","seeked"],Za=class extends _M{oI(){let t=this.WB.jG.readyState;return t>Ht.iO&&this.WB.U4?Ht.iO:(this.WB.jG.seeking&&t>Ht.Xn&&(t=Ht.Xn),t)}Xw(){for(const t of vM)this.WB.jG.removeEventListener(t,this.W4);super.Xw()}constructor(t){super(t);for(const t of vM)this.WB.jG.addEventListener(t,this.W4)}};r();var mM=class extends _M{oI(){if(this.WB.jG.readyState===Ht.eO)return Ht.eO;const t=this.G4(),e=t?t.Tn-t.Sn:0;if(!t)return Ht.Xn;const i=this.WB.QR;return this.H4()||e>=3*i?Ht.nO:e>=3?Ht.sO:Ht.iO}G4(){const t=this.WB.ER,e=this.WB.wR.$L(.04),i=e.sB(t);if(!(i<0))return{Sn:t,Tn:e.Tn(i)}}H4(){if(this.WB.PR)return!0;const t=this.WB.ct,e=this.G4();return!!e&&t-e.Tn<=.16666666666666666}Xw(){this.WB.vn([Ti.Jy,Ti.Oy],this.W4);for(const t of vM)this.WB.jG.removeEventListener(t,this.W4);super.Xw()}constructor(t){super(t),this.WB.bn([Ti.Jy,Ti.Oy],this.W4);for(const t of vM)this.WB.jG.addEventListener(t,this.W4)}};r(),r();var gM=[Zc.iC,Ti.ho,Ti.zy,Ti.Jy,Ti.Qy,Ti.Oy,Ti.Vy,Ti.Dy,yo.fa],pM=class extends Co{Z4(){return(!this.AW.M4||!this.AW.X4)&&this.AW.rI<Ht.sO}z4(){return!this.AW.uI&&!(this.AW.KR||this.AW.PR||this.AW.lt||this.Z4())}ir(){const t=this.q4;this.q4=this.z4(),!t&&this.q4&&this._o(new ko(this.AW.ER))}nr(){this.q4=!1}Xw(){this.Ro(),this.AW.vn(gM,this.pK)}constructor(t){super(),this.q4=!1,this.pK=()=>{this.ir()},this.AW=t,this.AW.bn(gM,this.pK)}},wM=class extends pM{z4(){return this.Y4&&super.z4()}ir(){this.Y4&&(this.$T.paused||this.$T.ended||this.$T.error)&&(this.Y4=!1),super.ir()}nr(){super.nr(),this.Y4=!1}Xw(){this.$T.removeEventListener(Zc.UL,this.LW),super.Xw()}constructor(t){super(t),this.Y4=!1,this.LW=()=>{this.Y4=!0,this.ir()},this.$T=t.jG,this.$T.addEventListener(Zc.UL,this.LW)}};r();var yM=class extends pe{constructor(t){super(yo.fa),this.lt=t}};function bM(t,e){return t.WO<=e&&t.UO>e}function be(t,e){return function(t,e){return Vm(t.WO,e.WO,Nk)}(t,e)||function(t,e){return Vm(t.UO,e.UO,Nk)}(t,e)}function AM(t,e){return function(t,e){return Vm(t.YO,e.YO,Nk)}(t,e)||function(t,e){return Vm(t.KO,e.KO,Nk)}(t,e)}function Fs(t,e,i){let s=function(t,e,i,s,n,r,o){void 0===n&&(n=!1),void 0===r&&(r=0),void 0===o&&(o=t.length);let h=r,a=o-1;for(;h<=a;){const o=h+(a-h>>1),u=s(i(t[o]),e);if(u<0)h=o+1;else if(u>0)a=o-1;else{if(!(n&&o>r&&0===s(i(t[o-1]),e)))return o;a=o-1}}return~h}(t,e,Fd,i,!0);if(s<0)return s;for(;s<t.length&&i(e,t[s])===Pc.eh;s++)if(t[s].sF(e))return s;return-(s+1)}function SM(t,e,i){const s=Fs(t,e,i);return s>=0?s:-(s+1)}function TM(t){const e=t.Ht;if(!e)return-1;if(t instanceof Le)return e.K4(t);const i=e.L;if(!i)return-1;const s=Fs(i.lC,t,be);return s>=0?s:-1}function kM(t,e){const i=function(t,e,i){const s=t.length,n=e.length;let r=0,o=0;const h=[],a=[];for(;r<s&&o<n;){const s=t[r],n=e[o];s===n?(r++,o++):i(n,s)<=0?(h.push(n),o++):(a.push(s),r++)}for(;r<s;)a.push(t[r]),r++;for(;o<n;)h.push(e[o]),o++;return{j4:h,Q4:a}}(t,e,be);return function(t,e){const i=e.length;for(let s=0;s<i;s++)t[s]=e[s];t.length=i}(t,e),i}r(),r(),r(),r();var EM=class{get lC(){return this.J4}get V(){return this.J4.length}get wa(){if(this.eu){const t=this.J4;this.eu.length=t.length;for(let e=0;e<t.length;e++)this.eu[e]=t[e].wa}else this.eu=this.ka();return this.eu}ka(){return function(t){const e=[];for(let i=0;i<t.V;i++)e[i]=t.Lb(i).wa;return e.item=e=>{const i=0|e,s=t.Lb(i);return s&&s.wa||void 0},w.defineProperty(e,"constructor",{value:Ik}),e}(this)}EO(t){const e=this.J4;for(let i=e.length-1;i>=0;i-=1){const s=e[i];if(t.sF(s))return!0}return!1}Lb(t){return this.J4[t]}constructor(t){this.eu=void 0,this.J4=t}};r();var xM=class extends en{ka(){return new RM(this.Ht.wa,this.rI)}constructor(t,e){super(No.iC),this.Ht=t,this.rI=e}},RM=class extends Un{constructor(t,e){super("readystatechange"),this.track=t,this.readyState=e}};r();var IM=class extends en{ka(){return new CM(this.Ht.wa)}constructor(t){super(No.nC),this.Ht=t}},CM=class extends Un{constructor(t){super("typechange"),this.track=t}};r();var Ps=class extends en{ka(){return new PM(this.FO.wa)}constructor(t){super(No.HI),this.FO=t}},PM=class extends Un{constructor(t){super("addcue"),this.cue=t}};r();var DM=class extends en{ka(){return new NM(this.FO.wa)}constructor(t){super(No.XI),this.FO=t}},NM=class extends Un{constructor(t){super("removecue"),this.cue=t}},Yi=class extends Co{get q(){return this.t5}get L(){return this.e5}i5(t){return Fo(this.e5.lC,(e=>e.o===t))}get gW(){return this.b_}set gW(t){this.b_=t}get FC(){return this.s5}get wa(){return this.eu||(this.eu=this.ka()),this.eu}ka(){return Qh(this)}get o(){return this.zS}get IC(){return this.IO}get BC(){return this.n5}set BC(t){this.n5=t}get Lt(){return this.r5}get Ch(){return this.CO}set Ch(t){t!==this.CO&&(this.CO=t,this._o(new Zs(this)))}get gs(){return this.LA}get DC(){return this.o5}get CE(){return this.Xo}set CE(t){this.h5(t)}h5(t){const e=qa(t);e!==this.CE&&(this.Xo=e,e===bh.Mh&&(this.a5.forEach((t=>{t.so=!1})),En(this.a5),this.u5=0),this._o(new bc(this)))}get rI(){return this.O4}set rI(t){this.O4!==t&&(this.O4=t,this._o(new xM(this,this.O4)))}get VC(){return this.c5}set VC(t){this.c5=t}get Tw(){return this.Sp}set Tw(t){this.Sp!==t&&(this.Sp=t,this._o(new IM(this)))}_W(t){if(!t||t.Ht)return;const e=Fs(this.l5,t,AM);if(e>=0)return;t.Ht=this;const i=-(e+1);this.l5.splice(i,0,t);const s=SM(this.L.lC,t,be);this.d5(t,s),this._o(new Ps(t))}d5(t,e){this.J4.splice(e,0,t),this.f5(e),t.oF=e,e<this.u5&&(this.u5=e)}sW(t){if(!t||t.Ht!==this)return;const e=this.K4(t);if(e<0)return;t.so=!1;const i=this.a5,s=Fs(i,t,be);s>=0&&uu(i,s);const n=Fs(this.l5,t,AM);n>=0&&uu(this.l5,n),this._5(t,e),this._o(new DM(t))}_5(t,e){uu(this.J4,e),this.f5(e),t.oF=-1,this.u5>e&&--this.u5}JO(t){if(!t||t.Ht!==this)return;const e=this.K4(t);if(e<0)return;this._5(t,e);const i=SM(this.L.lC,t,be);this.d5(t,i);const s=rn(this.a5,(e=>e===t));if(s>=0){uu(this.a5,s);const e=SM(this.a5,t,be);this.a5.splice(e,0,t)}}v5(t,e){const i=this.a5,s=this.J4;let n=this.u5,r=!1,o=1/0;e&&(n=0);for(let e=i.length-1;e>=0;e--){const s=i[e];bM(s,t)?s.UO<o&&(o=s.UO):(r=!0,uu(i,e))}for(;n<s.length&&s[n].WO<=t;){const e=s[n];bM(e,t)&&(ms(i,e)||(r=!0,i.push(e)),e.UO<o&&(o=e.UO)),n++}return n<s.length&&s[n].WO<o&&(o=s[n].WO),r&&Bm(i,be),this.u5=n,o}K4(t){return(-1===t.oF||t.oF>=this.m5)&&this.g5(),t.oF}g5(){const t=this.J4;for(let e=this.m5;e<t.length;e++)t[e].oF=e;this.m5=t.length}f5(t){t<this.m5&&(this.m5=_.max(t,0))}OC(t){this.FC||(this.CE=t)}yn(){this.Ro();const t=this.J4.slice();for(const e of t)e.yn();En(this.J4),En(this.l5),En(this.a5)}constructor(t,e,i,s,n,r,o,h,a){super(),this.IO=oi(),this.b_=!1,this.Xo=bh.Mh,this.O4=Zu.NONE,this.c5=void 0,this.J4=[],this.l5=[],this.a5=[],this.m5=0,this.u5=0,this.zS=e||"",this.n5=h||"",this.r5=t,this.LA=s||"",this.b_=Boolean(n),this.s5=Boolean(o),this.Sp=r||Lr.DEFAULT,this.CO=i||"",this.o5=a||[],this.e5=new EM(this.J4),this.t5=new EM(this.a5)}};r(),r(),r();var MM=class extends yl{ka(){return new LM(this.FO.wa)}constructor(t,e){super(Ct.rO,t),this.oV=e}},LM=class extends bl{constructor(t){super("enter",t)}};r();var BM=class extends yl{ka(){return new OM(this.FO.wa)}constructor(t,e){super(Ct.oO,t),this.oV=e}},OM=class extends bl{constructor(t){super("exit",t)}};r();var FM=class extends en{ka(){return new VM(this.FO.wa)}constructor(t){super(No.KI),this.FO=t}},VM=class extends Un{constructor(t){super("entercue"),this.cue=t}};r();var WM=class extends en{ka(){return new UM(this.FO.wa)}constructor(t){super(No.QI),this.FO=t}},UM=class extends Un{constructor(t){super("exitcue"),this.cue=t}},GM=class extends sn{get IC(){return this.IO}get WO(){return this.p5.startTime}set WO(t){this.p5.startTime=t}get UO(){return this.p5.endTime}set UO(t){this.p5.endTime=t}get U(){return this.tF}set U(t){this.tF=t}get eF(){return!!this.p5.pauseOnExit}set eF(t){this.p5.pauseOnExit=!!t}get Ht(){return this.QO}set Ht(t){this.QO=t}get o(){return this.p5.id||""}get wa(){return this.eu||(this.eu=this.ka()),this.eu}ka(){return Ut(this)}get so(){return this.eo}set so(t){this.so!==t&&(this.eo=t,t?(this._o(new MM(this,this.WO)),this.QO&&this.QO._o(new FM(this))):(this._o(new BM(this,this.UO)),this.QO&&this.QO._o(new WM(this))))}sF(t){return this===t||XA(this,t)&&Mk(this,t)&&this.nF(t)}nF(t){return Ai(this.U,t.U)}yn(){this.Ro(),this.p5.removeEventListener("enter",this.w5),this.p5.removeEventListener("exit",this.y5)}constructor(t){super(),this.tF=void 0,this.QO=void 0,this.eu=void 0,this.eo=!1,this.w5=()=>{this.so=!0},this.y5=()=>{this.so=!1},this.IO=pk(),this.p5=t,this.YO=t.startTime,this.KO=t.endTime,this.p5.addEventListener("enter",this.w5),this.p5.addEventListener("exit",this.y5)}};r();var HM=class extends en{ka(){return new ZM(this.Ht.wa)}constructor(t){super(No.$I),this.Ht=t}},ZM=class extends Un{constructor(t){super("cuechange"),this.track=t}};function XM(t){if(!t)return;let e=t.THEOplayerVTTRegion;return e||(e=new zM(t),t.THEOplayerVTTRegion=e),e}r(),r();var zM=class{get b5(){return this.A5}get o(){return this.A5.id||""}get ji(){return+this.A5.width||0}set ji(t){this.A5.width=t||0}get hF(){return+this.A5.lines||0}set hF(t){this.A5.lines=t||0}get aF(){return+this.A5.regionAnchorX||0}set aF(t){this.A5.regionAnchorX=t||0}get uF(){return+this.A5.regionAnchorY||0}set uF(t){this.A5.regionAnchorY=t||0}get lF(){return+this.A5.viewportAnchorX||0}set lF(t){this.A5.viewportAnchorX=t||0}get dF(){return+this.A5.viewportAnchorY||0}set dF(t){this.A5.viewportAnchorY=t||0}get cF(){return this.A5.scroll||""}get wa(){return this.eu||(this.eu=Uk(this)),this.eu}constructor(t){this.eu=void 0,this.A5=t}};var qM=class extends GM{get U(){return this.p5.text}set U(t){this.p5.text=t}get Pt(){return this.p5.vertical||""}set Pt(t){this.p5.vertical=t||""}get qO(){return this.p5.snapToLines}set qO(t){this.p5.snapToLines=t}get HO(){return this.p5.line}set HO(t){this.p5.line=t}get Nb(){return+this.p5.size}set Nb(t){this.p5.size=Ns(t,0,100)}get wa(){return this.eu||(this.eu=this.ka()),this.eu}ka(){return Ck(this)}nF(t){return Lk(this,t)}constructor(t){super(t)}},YM=class extends qM{get zO(){return XM(this.p5.region)}get ZO(){return this.p5.lineAlign||"start"}set ZO(t){this.p5.lineAlign=t||"start"}get fo(){return this.p5.position}set fo(t){this.p5.position=t}get XO(){return this.p5.positionAlign||"auto"}set XO(t){this.p5.positionAlign=t||"auto"}get GO(){return this.p5.align||"center"}set GO(t){this.p5.align=t||"center"}constructor(t){super(t)}},KM=class extends qM{get zO(){return XM(this.b5)}get b5(){return function(t,e){if(void 0===e)return;let i=t&&t.regions;return i&&i.getRegionById(e)||void 0}(this.p5.track,this.p5.regionId)}get ZO(){return function(t){return"middle"===t?"center":t}(this.p5.lineAlign||"start")}set ZO(t){this.p5.lineAlign=function(t){return"center"===t?"middle":t}(t||"start")}get fo(){return this.p5.position}set fo(t){this.p5.position=function(t,e){return Rk(t,e)}(t,this.GO)}get XO(){return function(t){return Ek[t]}(this.p5.positionAlign||"middle")}set XO(t){this.p5.positionAlign=function(t,e){return kk[xk(t,e)]}(t||"center",this.GO)}get GO(){return function(t){return"middle"===t?"center":t}(this.p5.align||"middle")}set GO(t){this.p5.align=function(t){return"center"===t?"middle":t}(t||"center")}constructor(t){super(t)}};function jM(t,e){return t.U===e.U}function QM(t,e){if(0===e.length)return;const i=e.length-1;if(e[i].WO<t.WO)return void JM(e,i,t.WO);const s=e[0];if(s.WO>t.WO)return void(t.UO=s.WO);const n=Fs(e,t,be);if(n>=0)return;const r=-(n+1),o=r-1;if(o>=0){e[o].WO<t.WO&&JM(e,o,t.WO)}if(r<e.length){const i=e[r];t.UO=i.WO}}function JM(t,e,i){const s=t[e].WO;for(let n=e;n>=0&&t[n].WO===s;n--)t[n].UO=i}function $M(t){return Ut(t)}r(),r(),r(),r();var tL=class extends GM{get U(){return this.S5}get wa(){return this.eu||(this.eu=this.ka()),this.eu}ka(){return $M(this)}nF(t){return jM(this,t)}constructor(t,e){super(t),this.S5=e}};function eL(t){switch(t){case 0:case 1:case 2:case 3:return!0}return!1}function iL(t){switch(t){case 0:return Yr;case 1:return Ug;case 2:return yr;case 3:return Va}}function sL(t,e){const i=e.nc,s=t.byteLength,n=ua(t);return e.xb(s-i),Rc(n,i,s).buffer}function nL(t,e){return{id:t||"",data:e instanceof ArrayBuffer?e:void 0}}function rL(t,e,i){const s=hc(t,e);if(!eL(s))return;const n=iL(s);return{id:i,language:Sc(t,e,3),description:n(t,e),text:n(t,e)}}function oL(t,e,i){const s=hc(t,e);if(!eL(s))return;const n=iL(s);return{id:i,mimeType:Yr(t,e),fileName:n(t,e),description:n(t,e),data:sL(t,e)}}function hL(t,e,i){const s=hc(t,e);if(!eL(s))return;const n=iL(s),r=[];for(;e.nc<t.byteLength;)r.push({involvement:n(t,e),involvee:n(t,e)});return{id:i,entries:r}}function aL(t,e,i){const s=hc(t,e);if(!eL(s))return;const n=iL(s),r=Sc(t,e,3),o=hc(t,e),h=hc(t,e),a=n(t,e);let u=!1;const c=[];for(;e.nc<t.byteLength;){let i;if(1===s){let s=Wg(t,e);void 0===s?s=u:u=s,i=yr(t,e,s)}else i=n(t,e);if(!i||e.nc+4>t.byteLength)break;c.push({text:i,timestamp:$h(t,e)})}return{id:i,language:r,format:o,contentType:h,description:a,entries:c}}function uL(t,e,i){return{id:i,ownerIdentifier:Yr(t,e),identifier:sL(t,e)}}function cL(t,e,i){const s=hc(t,e);if(!eL(s))return;const n=iL(s);return{id:i,language:Sc(t,e,3),description:n(t,e),text:n(t,e)}}function lL(t,e,i){const s=hc(t,e);if(!eL(s))return;return{id:i,text:iL(s)(t,e)}}function dL(t,e,i){return{id:i,url:Yr(t,e)}}function fL(t,e,i){const s=hc(t,e);if(!eL(s))return;const n=iL(s);return{id:i,description:n(t,e),text:n(t,e)}}function _L(t,e,i){const s=hc(t,e);if(!eL(s))return;return{id:i,description:iL(s)(t,e),url:Yr(t,e)}}function vL(t,e,i){switch(i){case"COM":return rL(t,e,i);case"GEO":return oL(t,e,i);case"IPL":return hL(t,e,i);case"PIC":return function(t,e,i){const s=hc(t,e);if(!eL(s))return;const n=iL(s),r=Sc(t,e,3),o=hc(t,e),h=n(t,e);let a,u;return"--\x3e"===r?(a=r,u=Yr(t,e)):(a="image/"+r.toLowerCase(),u=sL(t,e)),{id:i,mimeType:a,pictureType:o,description:h,data:u}}(t,e,i);case"SLT":return aL(t,e,i);case"TXX":return fL(t,e,i);case"UFI":return uL(t,e,i);case"ULT":return cL(t,e,i);case"WXX":return _L(t,e,i);default:if("T"===i.charAt(0))return lL(t,e,i);if("W"===i.charAt(0))return dL(t,e,i)}}function mL(t,e,i){switch(i){case"APIC":return function(t,e,i){const s=hc(t,e);if(!eL(s))return;const n=iL(s),r=Yr(t,e),o=hc(t,e),h=n(t,e);let a;return a="--\x3e"===r?Yr(t,e):sL(t,e),{id:i,mimeType:r,pictureType:o,description:h,data:a}}(t,e,i);case"COMM":return rL(t,e,i);case"COMR":return function(t,e,i){const s=hc(t,e);if(!eL(s))return;const n=iL(s),r=Yr(t,e),o=Sc(t,e,8),h=Yr(t,e),a=hc(t,e),u=n(t,e),c=n(t,e);let l,d;return e.nc<t.byteLength&&(l=Yr(t,e)||"image/",d=sL(t,e)),{id:i,price:r,validUntil:o,contactURL:h,receivedAs:a,nameOfSeller:u,description:c,pictureMimeType:l,sellerLogo:d}}(t,e,i);case"GEOB":return oL(t,e,i);case"IPLS":return hL(t,e,i);case"PRIV":return function(t,e,i){return{id:i,ownerIdentifier:Yr(t,e),data:sL(t,e)}}(t,e,i);case"POSS":return function(t,e,i){return{id:i,format:hc(t,e),position:$h(t,e)}}(t,e,i);case"SYLT":return aL(t,e,i);case"TXXX":return fL(t,e,i);case"UFID":return uL(t,e,i);case"USER":return function(t,e,i){const s=hc(t,e);if(!eL(s))return;const n=iL(s);return{id:i,language:Sc(t,e,3),text:n(t,e)}}(t,e,i);case"USLT":return cL(t,e,i);case"WXXX":return _L(t,e,i);case"YMID":case"YTYP":case"YSEQ":case"YDUR":case"YCSP":return lL(t,e,i);default:{const s=i.charAt(0);if("T"===s)return lL(t,e,i);if("W"===s)return dL(t,e,i)}}}r(),r();var gL=10;function pL(t,e){return(127&hc(t,e))<<21|(127&hc(t,e))<<14|(127&hc(t,e))<<7|127&hc(t,e)}function wL(t,e){switch(t){case 4:return{T5:il(e,0),k5:il(e,1),E5:il(e,2),x5:il(e,3)};case 3:return{T5:il(e,0),k5:il(e,1),E5:il(e,2)};case 2:return{T5:il(e,0),R5:il(e,1)}}}function yL(t,e,i){switch(i.jD){case 3:i.QD.k5&&function(t,e){const i=e.nc,s=$h(t,e)+4,n=32768&Ei(t,e);e.Rb(i+s),n&&$h(t,e)}(t,e);break;case 4:i.QD.k5&&function(t,e){const i=e.nc,s=pL(t,e);e.Rb(i+s)}(t,e)}}function bL(t,e){if(t.byteLength-e.nc<gL)return null;if(73!==hc(t,e)||68!==hc(t,e)||51!==hc(t,e))return null;const i=hc(t,e),s=hc(t,e);if(!function(t){switch(t){case 2:case 3:case 4:return!0}return!1}(i))return null;const n=hc(t,e),r=pL(t,e);return{jD:i,I5:s,QD:wL(i,n),C5:r}}function AL(t,e,i){switch(i){case 2:return function(t,e){if(e.nc+6>t.byteLength)return;return{o:Sc(t,e,3),Nb:Dg(t,e,3)}}(t,e);case 3:return function(t,e){if(e.nc+10>t.byteLength)return;const i=Sc(t,e,4),s=$h(t,e);hc(t,e);const n=hc(t,e);return{o:i,Nb:s,QD:{R5:il(n,0),P5:il(n,1),groupingIdentity:il(n,2)}}}(t,e);case 4:return function(t,e){if(e.nc+10>t.byteLength)return;const i=Sc(t,e,4),s=pL(t,e);hc(t,e);const n=hc(t,e);return{o:i,Nb:s,QD:{groupingIdentity:il(n,1),R5:il(n,4),P5:il(n,5),T5:il(n,6),D5:il(n,7)}}}(t,e)}}function SL(t){const e=ua(t),i=new j(e.byteLength);let s=0;for(let t=0;t<e.byteLength;t++){const n=e[t];255===n&&t++,i[s]=n,s++}return ra(Rc(i,0,s))}function TL(t,e){const i=e||new Ri,s=bL(t,i);if(!s)return null;const n=function(t,e,i){const s=[],n=e.nc;let r=jg(t,n,n+i.C5);const o=new Ri;switch(e.xb(i.C5),i.jD){case 2:case 3:i.QD.T5&&(r=SL(r))}yL(t,e,i);for(;o.nc<r.byteLength;){const t=kL(r,o,i);if(void 0===t)break;s.push(t)}return s}(t,i,s);return{XD:s,N5:n}}function kL(t,e,i){const s=AL(t,e,i.jD);if(void 0===s)return;if(0===s.o.charCodeAt(0)||0===s.Nb)return;const n=e.nc;let r,o,h=jg(t,n,n+s.Nb);switch(e.xb(s.Nb),i.jD){case 2:{const t=s;o=h,r=vL(o,new Ri,t.o);break}case 3:{const t=s,e=new Ri;!function(t,e,i){const s=i.QD;let n,r,o;s.R5&&(n=$h(t,e)),s.P5&&(r=hc(t,e)),s.groupingIdentity&&(o=hc(t,e))}(h,e,t);o=jg(h,e.nc,h.byteLength),r=mL(o,new Ri,t.o);break}case 4:{const t=s,e=new Ri;t.QD.T5&&(h=SL(h)),function(t,e,i){const s=i.QD;let n,r,o,h;s.groupingIdentity&&(n=hc(t,e)),s.R5&&(r=$h(t,e)),s.P5&&(o=hc(t,e)),s.D5&&(h=pL(t,e))}(h,e,t);o=jg(h,e.nc,h.byteLength),r=mL(o,new Ri,t.o);break}}if(!r){const t=fc(ua(o));r=nL(s.o,t.buffer)}return r}r();function EL(t){return Bo(t)&&"org.id3"===t.type&&Bo(t.value)}function xL(t){return function(t,e,i){return lL(t,e,i)}(new DataView(t.data),new Ri,t.key)}function RL(t){switch(t.key){case"APIC":case"PIC":return function(t){return{id:t.key,mimeType:t.type,pictureType:16,description:t.info,data:t.data}}(t);case"GEOB":case"GEO":return function(t){return{id:t.key,mimeType:t.type,fileName:t.name,description:t.info,data:t.data}}(t);case"PRIV":return function(t){return{id:t.key,ownerIdentifier:t.info,data:t.data}}(t);case"TXXX":case"TXX":return function(t){return{id:t.key,description:t.info,text:t.data}}(t);case"WXXX":case"WXX":return function(t){return{id:t.key,description:t.info,url:t.data}}(t);case"YMID":case"YTYP":case"YSEQ":case"YDUR":case"YCSP":return xL(t);default:let e=t.key.charAt(0);if("T"===e)return function(t){return{id:t.key,text:t.data}}(t);if("W"===e)return function(t){return{id:t.key,url:t.data}}(t)}return function(t){return nL(t.key,t.data)}(t)}r(),r();var IL=class extends Co{get q(){return this.t5}get gW(){return this.M5?this.M5.default:void 0}get L(){return this.e5}get wa(){return this.eu||(this.eu=this.ka()),this.eu}ka(){return Qh(this)}get o(){return this.RO.id||this.M5&&this.M5.id||""}get IC(){return this.IO}get BC(){return this.RO.inBandMetadataTrackDispatchType||""}get Lt(){return this.RO.kind||Li.JV}get Ch(){return this.CO}set Ch(t){t!==this.CO&&(this.CO=t,void 0!==this.M5&&(this.M5.label=t),this._o(new Zs(this)))}get gs(){return this.RO.language||""}get CE(){return this.Xo}set CE(t){let e=this.CE;this.Xo=qa(t),this.L5();let i=this.CE;e!==i&&this._o(new bc(this)),i!==bh.Mh&&this.B5(Zu.LOADING)}get O5(){return qa(this.RO.mode)}set O5(t){this.RO.mode=t}get PO(){return this.RO}get rI(){return this.O4}get F5(){return this.M5?+this.M5.readyState||Zu.NONE:Zu.LOADED}get VC(){return this.c5}get Tw(){return this.Sp}set Tw(t){this.Sp!==t&&(this.Sp=t,this._o(new IM(this)))}get V5(){return this.W5}set V5(t){this.W5=t,t&&(this.U5=!0,u((()=>{this.U5=!1}),50)),this.L5()}_W(t){t.Ht!==this&&(t.Ht=this,this.RO.addCue(t.p5),this.G5())}sW(t){t.Ht===this&&(t.Ht=void 0,this.RO.removeCue(t.p5),this.G5())}i5(t){var e;const i=null==(e=this.RO.cues)?void 0:e.getCueById(t);if(!i)return;const s=CL(i);return s&&nc(s)?s[0]:s}nW(t){this.H5>=t||(this.H5=t,Vi(this,t))}L5(){let t=this.CE;this.V5||t!==bh.Qn?this.O5=t:this.O5=bh.LC}Z5(){let t=this.CE,e=this.O5;t!==e&&(this.V5||t!==bh.Qn||e!==bh.LC)&&("metadata"===this.Lt&&e===bh.Mh?this.CE=t:this.U5&&e===bh.Mh&&t===bh.Qn?this.O5=t:this.CE=e)}V4(t){this.O4!==t&&(this.O4=t,this._o(new xM(this,t)))}B5(t){let e=_.max(this.O4,this.F5,t);this.V4(e)}X5(t){let e=CL(t);if(e)return e;if(e=this.z5(t),nc(e))for(let t of e)t.Ht=this;else e.Ht=this;return e}z5(t){const e=this.q5(t);return t.THEOplayerTextTrackCue=e,e}q5(t){return t.endTime<this.H5?[]:EL(t)?(this.Tw=Lr.ID3,function(t){let e;try{e=RL(t.value)}catch(t){e=nL("")}return new tL(t,e)}(t)):function(t){return t&&t.data instanceof ArrayBuffer}(t)?(this.Tw=Lr.ID3,function(t){let e=[];try{let i=TL(new DataView(t.data));if(i)for(let s of i.N5)e.push(new tL(t,s))}catch(t){}return e}(t)):function(t){return"text"in t}(t)?(this.Tw=Lr.WEBVTT,function(t){return"regionId"in t}(t)?new KM(t):new YM(t)):new GM(t)}Y5(t){let e=[];if(!t)return e;let i=t.length;for(let n=0;n<i;n++){var s;let i=this.X5(null!=(s=t[n])?s:t.item(n));if(nc(i))for(let t of i)e.push(t);else e.push(i)}return e}K5(){let t=this.Y5(this.RO.cues),e=kM(this.J4,t);for(let t of e.Q4)t.vn(Ct.oO,this.G5),t.vn(Ct.rO,this.G5),this._o(new DM(t));for(let t of e.j4)t.bn(Ct.rO,this.G5),t.bn(Ct.oO,this.G5),this._o(new Ps(t))}v5(){let t=this.Y5(this.RO.activeCues),e=kM(this.a5,t);for(let t of e.Q4)t.so=!1;for(let t of e.j4)t.so=!0;(e.j4.length||e.Q4.length)&&this._o(new HM(this))}OC(t){this.CE=t}yn(){this.Ro();const t=this.J4.slice();for(let e of t)e.yn();En(this.J4),En(this.a5),this.RO.removeEventListener("cuechange",this.j5),this.RO.removeEventListener("cuechange",this.G5),this.M5&&(this.M5.removeEventListener("load",this.Q5),this.M5.removeEventListener("error",this.J5),ze(this.M5))}constructor(t,e,i=!0){super(),this.J4=[],this.a5=[],this.Xo=bh.Mh,this.O4=Zu.NONE,this.c5=void 0,this.Sp=Lr.DEFAULT,this.U5=!1,this.H5=0,this.j5=()=>{this.L5(),this.RO.removeEventListener("cuechange",this.j5)},this.G5=()=>{this.CE!==bh.Mh&&(this.K5(),this.v5(),this.J4.length&&this.B5(Zu.LOADING))},this.Q5=()=>{this.B5(Zu.LOADED)},this.J5=()=>{this.B5(Zu.ERROR)},this.RO=t,this.W5=i,this.RO.addEventListener("cuechange",this.j5),this.RO.addEventListener("cuechange",this.G5),this.M5=e,this.M5&&(this.c5=Ki(this.M5.src),this.M5.addEventListener("load",this.Q5),this.M5.addEventListener("error",this.J5)),this.IO=oi(),this.CO=t.label||"",this.e5=new EM(this.J4),this.t5=new EM(this.a5),this.CE=this.O5,li((()=>{this.G5(),this.B5(Zu.NONE)}))}};function CL(t){return null==t?void 0:t.THEOplayerTextTrackCue}r(),r();function PL(t,e){return Xa(t.oV,e.oV)||function(t,e){return t.Ht===e.Ht?gr(TM(t),TM(e)):Ax(t.Ht,e.Ht)}(t.FO,e.FO)||function(t,e){return t===e?Pc.eh:t===Ct.rO?Pc.Ow:Pc.Bw}(t.type,e.type)}var DL=class{nr(){En(this.t6);for(const t of this.Hl.slice())this.it(t);this.e6(),this.i6=0,this.Pn=0,En(this.s6),this.n6=!1,this.r6=!1,this.o6=0}tt(t){ms(this.Hl,t)||(this.Hl.push(t),t.bn(No.da,this.h6),t.CE!==bh.Mh&&this.a6())}it(t){we(this.Hl,t)&&(t.vn(No.da,this.h6),t.CE!==bh.Mh&&this.a6())}a6(){const t=this.s6,e=this.Hl.filter((t=>t.CE!==bh.Mh));this.s6=e;for(const i of t)ms(e,i)||this.u6(i);for(const i of e)ms(t,i)||this.c6(i);this.o6=0}c6(t){if(t.bn(No.HI,this.l6),t.bn(No.XI,this.d6),t.bn(No.qI,this.f6),t.L.V>0){for(const e of t.L.lC)this._6.push(e);this.v6()}}u6(t){if(t.vn(No.HI,this.l6),t.vn(No.XI,this.d6),t.vn(No.qI,this.f6),t.L.V>0){for(const e of t.L.lC)we(this.t6,e),we(this._6,e);this.v6()}}m6(){this.na.uI||this.na.KR?this.e6():this.v6()}v6(){this.n6&&0!==this.s6.length&&(this.o6-this.na.ER>.25*this.na.QR||this.i6||(this.i6=this.p6.g6(this.w6)))}e6(){this.i6&&(this.p6.y6(this.i6),this.i6=0)}b6(t){0!==this.o6&&(t.so!==bM(t,this.na.ER)?this.o6=0:this.Pn<t.WO&&t.WO<this.o6?this.o6=t.WO:this.Pn<t.UO&&t.UO<this.o6&&(this.o6=t.UO))}A6(){if(!this.n6)return;if(0===this.s6.length)return;if(this.na.uI)return;const t=this.s6,e=this.Pn,i=this.na.ER,s=i-e<-.1;let n=this.r6||s;n&&i>e&&i-e<.1&&(n=!1),this.r6=!1;const r=[];let o=1/0;for(const e of t){const t=e.v5(i,n);t<o&&(o=t);for(const t of e.q.lC)r.push(t)}const h=this.t6.slice();if(n);else for(const s of t)bx(s,e-Si,i,h);for(let t=h.length-1;t>=0;t--)ms(r,h[t])&&uu(h,t);const a=[];if(!n)for(let t=h.length-1;t>=0;t--){const s=h[t];s.WO>e&&s.UO<=i&&(a.push(s),uu(h,t))}for(const t of this._6)t.WO!==t.UO&&we(a,t);En(this._6);const u=[],c=[];for(const t of a)t.so||u.push(new MM(t,t.WO)),u.push(new BM(t,_.max(t.WO,t.UO))),t.so=!1;for(const t of h)t.so&&(u.push(new BM(t,_.max(t.WO,t.UO))),t.so=!1);for(const t of r)t.so||(u.push(new MM(t,t.WO)),t.so=!0);u.sort(PL);for(const t of u){const e=t.FO;e._o(t);const i=e.Ht;i&&(t.type===Ct.rO?i._o(new FM(e)):i._o(new WM(e)),ms(c,i)||c.push(i))}c.sort(Ax);for(const t of c)t._o(new HM(t));this.Pn=i,this.t6=r,this.o6=o}yn(){this.nr(),this.na.vn(Ti.hb,this.S6),this.na.vn(Ti.ho,this.T6),this.na.vn(Zc.UL,this.S6),this.na.vn(Ti.zy,this.S6),this.na.vn(Ti.Jy,this.k6),this.na.vn(Ti.Qy,this.S6)}constructor(t,e){this.Hl=[],this.i6=0,this.Pn=0,this.t6=[],this._6=[],this.s6=[],this.n6=!1,this.r6=!1,this.o6=0,this.w6=()=>{this.i6=0,this.A6(),this.m6()},this.S6=()=>{this.A6(),this.m6()},this.T6=()=>{this.n6=!0,this.S6()},this.k6=()=>{this.r6=!0,this.o6=0,this.e6()},this.h6=()=>{this.a6(),this.A6(),this.m6()},this.l6=t=>{const e=t.FO;ms(this._6,e)||this._6.push(e),this.b6(e),this.v6()},this.d6=t=>{const e=t.FO;we(this.t6,e),we(this._6,e),this.b6(e),this.v6()},this.f6=t=>{this.b6(t.FO),this.v6()},this.p6=e,this.na=t,t.bn(Ti.hb,this.S6),t.bn(Ti.ho,this.T6),t.bn(Zc.UL,this.S6),t.bn(Ti.zy,this.S6),t.bn(Ti.Jy,this.k6),t.bn(Ti.Qy,this.S6),this.v6()}};r();var Kh=class{g6(t){return it(t)}y6(t){fo(t)}},NL=new Kh,su=class extends DL{constructor(t,e=NL){super(t,e)}};r(),r();var ML=class extends Le{get wa(){return this.eu||(this.eu=$M(this)),this.eu}nF(t){return jM(this,t)}constructor(t,e,i){super(t,1/0,e,!1,i)}};r(),r();var LL=class extends Yi{constructor(t,e,i=Lr.DEFAULT){super(Li.eW,"",e||"","",!1,i,!1,t)}},BL=class extends LL{_W(t){QM(t,this.J4),super._W(t)}ka(){return Qh(this)}constructor(t,e){super(t,e),this.Tw=Lr.ID3}},OL=class extends BL{get o(){return this.RO.id||""}get BC(){return this.RO.inBandMetadataTrackDispatchType||""}get gs(){return this.RO.language||""}h5(t){super.h5(t),this.O5=this.CE}get O5(){return qa(this.RO.mode)}set O5(t){this.RO.mode=t}get PO(){return this.RO}_W(t){super._W(t),t.p5.track!==this.RO&&this.RO.addCue(t.p5)}sW(t){super.sW(t),t.p5.track===this.RO&&this.RO.removeCue(t.p5)}nW(t){this.H5>=t||(this.H5=t,Vi(this,t))}B5(t){this.rI=_.max(this.rI,t)}K5(){let t=this.RO.cues;if(!t)return;const e=t.length,i=[],s=[];for(let o=0;o<e;o++){var n;const e=null!=(n=t[o])?n:t.item(o);if(EL(e)&&e.endTime>=this.H5){var r;const t=null!=(r=null==e?void 0:e.THEOplayerTextTrackCue)?r:new FL(e);i.push(t)}else s.push(e)}Bm(i,be);let o=kM(this.L.lC.slice(),i);for(const t of s)this.RO.removeCue(t);for(let t of o.Q4)t.yn(),this.sW(t);for(let t of o.j4)this._W(t)}yn(){this.RO.removeEventListener("cuechange",this.G5),super.yn()}constructor(t){super(t.inBandMetadataTrackDispatchType,t.label),this.H5=0,this.G5=()=>{this.CE!==bh.Mh&&(this.K5(),this.B5(Zu.LOADED))},this.RO=t,this.RO.addEventListener("cuechange",this.G5),this.CE=this.O5,li((()=>{this.G5()}))}},FL=class extends ML{yn(){super.yn(),this.p5.THEOplayerTextTrackCue=void 0}constructor(t){super(t.startTime,RL(t.value),t.id),this.p5=t,this.p5.THEOplayerTextTrackCue=this}};function VL(t){return"TXXX"===t.id||"TXX"===t.id}r(),r();var WL=class extends kx{E6(){this.x6.bn(Se.VI,this.UG),this.x6.bn(Se.UI,this.GG)}R6(){this.x6.vn(Se.VI,this.UG),this.x6.vn(Se.UI,this.GG)}I6(t){const e=t.L.lC[0];if(!UL(e))return;const i=function(t){const e=t.match(GL);if(!e)return;return{Ht:e[1],gs:e[2]}}(e.U.description),s=i.Ht,n=i.gs;if(this.C6(s,n))return;const r=this.lW.OI(Li.JV,t.o,s,n,!1,Lr.TTML);this.tt(r),this.P6.set(t.IC,r);for(let e of t.L.lC)UL(e)&&this.D6(e);t.bn(No.HI,this.N6)}C6(t,e){return this.Z.lC.some((i=>i.Ch===t&&i.gs===e))}D6(t){if(!t.Ht)return;const e=this.P6.get(t.Ht.IC),i=QE(t.U.text,e,{MV:0,LV:1/0,BV:t.WO});for(let t of i)e._W(t)}async nr(){for(let t of this.x6.lC)t.vn(No.HI,this.N6);for(let t of this.Z.lC)this.lW.mW(t);this.P6.clear(),await super.nr()}async yn(){this.R6(),await super.yn()}constructor(t,e){super(),this.lW=t,this.x6=e,this.P6=ne(),this.UG=async t=>{const e=t.Ht;if(e.Tw||await e.py(No.nC),e.Tw===Lr.ID3){for(;0===e.L.V;)await e.py(No.HI);this.I6(e)}},this.GG=t=>{const e=t.Ht;if(e.Tw!==Lr.ID3||!this.P6.has(e.IC))return;const i=this.P6.get(e.IC);this.it(i),this.lW.mW(i),e.vn(No.HI,this.N6)},this.N6=t=>{UL(t.FO)&&this.D6(t.FO)},this.E6()}};function UL(t){return function(t){return VL(t)&&GL.test(t.description)}(t.U)}var GL=/^Track:(.+),Lang:(.+)$/;r(),r();var Du=[Ti.Ey,Ti.Ty,Ti.fb,Ti.vb];r();var $n=class extends pe{get error(){return this.errorObject.message}get licenseAcquisitionURL(){return this.errorObject.url}get status(){return this.errorObject.status}get statusText(){return this.errorObject.statusText}get licenseAcquisitionMessage(){return this.errorObject.response}get systemCode(){return this.errorObject.systemCode}constructor(t){super(Ti.Ty),this.errorObject=t}};r(),r(),r();var ie=class extends pe{constructor(t){super(Ti.Ey),this.M6=t}};r();var HL=class extends pe{constructor(t){super("_b"),this.M6=t}},ZL=new Su,XL=class extends pe{constructor(t){super("Ws"),this.session=t}},zL=class extends Co{get L6(){return this.B6}tT(){return this.O6=!0,ZL.Qo((t=>this.F6(t)),this.GT.Uw)}async F6(t){try{J(t),await this.V6.YW(t);const e=await this.V6.KW(this.W6.xw,this.W6.Eb,t);await this.U6.tT(this.W6.xw,this.W6.Eb,e)}catch(t){th(t);const e=t instanceof Js?t.Hb:void 0,i=new sr(Qa.CONTENT_PROTECTION_INTERNAL_ERROR,"Error while performing the CDM request",t,void 0,void 0,void 0,void 0,e);throw this.Ss(i),i}}async eU(t,e){let i;try{i=function(t){return Ph(t,ap())}(t)?await this.V6.cU(new j(t),this.GT.Uw):await this.V6.lU(new j(t),e,this.GT.Uw)}catch(t){if(Je(t))return;throw t}if(this.GT.Uw.Fw)return;const s=this.G6,n=new os;this.G6=n;try{await this.U6.ir(i),await ke(100)}catch(t){const e=t instanceof Js?t.Hb:void 0;throw new sr(Qa.CONTENT_PROTECTION_INTERNAL_ERROR,"Error while applying license response",t,void 0,void 0,void 0,void 0,e)}finally{void 0!==s&&await s.Ub,n.Vb(),this.G6===n&&(this.G6=void 0)}}Ss(t){const e=t instanceof sr?t:new sr(Qa.CONTENT_PROTECTION_ERROR,t.message,t);this._o(new $n(e)),this.Ws()}H6(){this.U6.vn("wb",this.oT),this.U6.vn(Ti.vb,this.Z6),this.U6.vn("lt",this.X6),this.z6=!1,this.B6=!1,this.GT.jw(),this._o(new XL(this))}async Ws(){let t;this.Ro();do{t=this.G6,void 0!==t&&await t.Ub}while(this.G6!==t);this.H6(),await this.U6.Ws().catch(Tt)}constructor(t,e,i){super(),this.U6=t,this.V6=e,this.W6=i,this.O6=!1,this.z6=!1,this.GT=new da,this.B6=!1,this.oT=t=>{if(!this.GT.Uw.Fw)switch(t.bb){case"license-request":case"license-renewal":this.eU(t.wb,t.Ab).catch((t=>this.Ss(t)));break;default:this.Ss(new sr(Qa.CONTENT_PROTECTION_NOT_SUPPORTED,"Unsupported CDM message type: "+t.bb))}},this.Z6=t=>{this.U6.pb.Ob(((t,e)=>{switch(t){case"usable":Ms.Gg((()=>{this.z6=!0,this._o(new ie(e))}),100);break;case"expired":case"status-pending":default:break;case"output-restricted":case"internal-error":this._o(new HL(e))}})),this.B6=!0,this._o(t)},this.X6=t=>{this.Ss(new sr(Qa.CONTENT_PROTECTION_INTERNAL_ERROR,"Unknown CDM error"))},t.bn("wb",this.oT),t.bn(Ti.vb,this.Z6),t.bn("lt",this.X6),t.qS.then((()=>this.H6()),(t=>this.Ss(t)))}},qL=class extends Co{get cT(){return this.nT}get q6(){return this.Y6.every((t=>t.L6))}qW(){return this.K6.qW()}j6(t){return this.Q6||(this.Q6=this.J6(t)),this.Q6}async J6(t){J(t);const e=await this.K6.cU(new j(ap()),t);if(J(t),!this.uT)throw new g("Invalid MediaKeys when setting ServerCertificate");await this.uT.lT(e.buffer)}async t9(t){if(!this.uT)throw new g("Invalid MediaKeys when creating KeySession");try{this.e9.push(t);const e=await this.uT.aT("temporary"),i=new zL(e,this.K6,t);return this.Y6.push(i),i.bn(Du,this.i9),i.bn("Ws",this.s9),i}finally{we(this.e9,t)}}n9(t){if(t.r9)return!1;for(const e of this.Y6)if(YL(e.W6,t))return!0;for(const e of this.e9)if(YL(e,t))return!0;return!1}async yn(){this.uT=void 0,this.Ro();const t=this.Y6.slice();En(this.Y6),await Promise.all(t.map((t=>t.Ws()))),this.o9=void 0,this.K6.Xw()}constructor(t,e,i){super(),this.Y6=[],this.Q6=void 0,this.e9=[],this.i9=t=>{if(t.type===Ti.vb)return null!=this.o9||(this.o9=new hp),t.pb.Ob(((t,e)=>{this.o9.Bb(e,t)})),void(this.q6&&this._o(new te(this.o9)));this.Ds(t)},this.s9=t=>{t.session.vn(Du,this.Ds),t.session.vn("Ws",this.s9),we(this.Y6,t.session),this.o9=void 0},this.nT=t,this.uT=e,this.K6=i}};function YL(t,e){return!t.r9&&t.xw===e.xw&&Ph(t.Eb,e.Eb)}var Ee=class extends Co{get h9(){var t;return null==(t=this.nT)?void 0:t.cT}get wH(){return this.K6}set wH(t){this.K6=t}$n(t,e){this.JG=t,this._J(e)}_J(t){this.MT=t,this.a9(this.GT.Uw).catch(yu)}mJ(t){this.u9(t,this.GT.Uw).catch(yu)}async u9(t,e){var i,s;J(e);var n;if(null==(i=this.MT)?void 0:i.sH)for(const i of null!=(n=null==(s=this.MT)?void 0:s.sH)?n:[]){var r;const s=Fo(t,(t=>t.c9===i.cT.Iw));if(void 0!==(null==s?void 0:s.l9)&&!(null==(r=i.IG)?void 0:r.some((t=>Ph(s.l9,t)))))try{return void await this.d9(i.cT.xw,s.l9,e)}catch(t){th(t)}}}async a9(t){if(!Ms.Ys.Jg||!await this.f9(t))return this.MT&&this.MT._9?await this.v9(t):void 0}async f9(t){var e,i;if(!(null==(e=this.MT)?void 0:e.sH))return!1;let s=!1;var n;for(const e of null!=(n=null==(i=this.MT)?void 0:i.sH)?n:[]){var r;for(const i of null!=(r=e.IG)?r:[])try{await this.d9(e.cT.xw,i,t),s=!0}catch(t){th(t)}if(s)return!0}return!1}async d9(t,e,i){if(J(i),!e.byteLength)return;if(!this.MT||!this.MT.sH.length)throw new sr(Qa.CONTENT_PROTECTION_CONFIGURATION_MISSING,"Missing configuration for encrypted content");if(t!==im&&t!==nm&&t!==sm)return void 0;const s=oT(t,e),n=this.MT.sH;let r;for(const e of n){J(i);const n=s[e.cT.Rw];if(n&&e.cT.xw===t)try{const t=await this.m9(e,i);t.qW()&&await t.j6();const s=this.WB.WR,r={xw:e.cT.xw,Eb:n,r9:s};if(this.g9(t,r)){const e=await t.t9(r);await e.tT()}return}catch(t){th(t),r=t}}throw await Ms.Zp()?new sr(Qa.CONTENT_PROTECTION_NOT_SUPPORTED,"Encrypted content over an insecure connection is not supported",r):new sr(Qa.CONTENT_PROTECTION_NOT_SUPPORTED,"Cannot create content decryption session",r)}async v9(t){var e;const i=null==(e=this.MT)?void 0:e.sH;if(i)for(const e of i){J(t);try{const i=await this.m9(e,t);return void(i.qW()&&await i.j6())}catch(t){th(t)}}}g9(t,e){return Ms.Ys.Qg||this.WB.qB.zB||!t.n9(e)}m9(t,e){return this.Yo.Qo((e=>this.p9(t,e)),e)}async p9(t,e){if(J(e),!this.MT||!this.K6||!this.JG)throw new g("Not initialized");if(this.nT){if(this.nT.cT!==t.cT)throw new g("Internal key system error");return this.nT}const i=this.K6,s=ol({},t,{RH:t.RH.map((e=>{var s;return ol({},e,{persistentState:null!=(s=e.persistentState)?s:i._U(t.cT),wT:e.wT||i.wT(t.cT)})}))}),n=await this.JG.cJ(s.cT,s.RH),r=i.xG(s),o=new qL(s.cT,n,r);return o.bn(Du,this.Ds),this.nT=o,o}Ss(t){if(Je(t))return;const e=t instanceof sr?t:new sr(Qa.CONTENT_PROTECTION_ERROR,t.message,t);this._o(new $n(e))}async nr(){this.JG=void 0,this.MT=void 0,this.GT.jw(),this.GT=new da,await this.w9()}async w9(){await this.Yo.jw();const t=this.nT;t&&(t.vn(Ti.fb,this.Ds),this.nT=void 0,await t.yn())}async Xw(){this.Ro(),this.WB.vn(kh.Py,this.y9),await this.nr(),await this.Yo.yn()}constructor(t){super(),this.GT=new da,this.Yo=new Su,this.MT=void 0,this.K6=void 0,this.JG=void 0,this.nT=void 0,this.y9=t=>{this.d9(t.xw,t.Eb,this.GT.Uw).catch((t=>this.Ss(t)))},this.WB=t,this.WB.bn(kh.Py,this.y9)}};r();var KL=class extends pe{constructor(t){super(Ti.Vy),this.currentTime=t}};r();var jL=class extends Co{get rI(){return void 0!==this.b9?this.b9.rI:Ht.eO}V4(){var t;null==(t=this.b9)||t.V4()}nr(){var t;null==(t=this.b9)||t.nr()}Xw(){this.Ro(),void 0!==this.b9&&(this.b9.Xw(),this.b9=void 0)}A9(t){if(this.b9===t)return;const e=this.rI;void 0!==this.b9&&this.b9.Xw(),this.b9=t,void 0!==t&&(t.bn(Zc.iC,this.Ds),t.V4());const i=this.rI;e!==i&&this._o(new hu(this.S9.ER,i))}constructor(t){super(),this.S9=t}};r();var QL=class extends Yi{get wa(){var t;return null!=(t=this.eu)?t:this.eu=JL(this)}T9(t,e,i){const s=new Bk(t,e,i,!1);return this._W(s),s}k9(t){this.sW(t)}constructor(t,e,i){super(t,e,"",i,void 0,Lr.WEBVTT)}};function JL(t){return Jr(Qh(t),{get type(){return t.Tw},addCue:(e,i,s)=>t.T9(e,i,s).wa,removeCue(e){t.k9(e.VO)}})}r();var $L=class extends IL{get wa(){var t;return null!=(t=this.eu)?t:this.eu=JL(this)}T9(t,e,i){const n=this.z5(new s.VTTCue(t,e,i));return this.YE?this._W(n):this.E9.push(n),n}k9(t){we(this.E9,t),this.sW(t)}yn(){var t;super.yn(),null==(t=this.M5)||t.removeEventListener("load",this.x9),En(this.E9)}constructor(t,e){var i;super(t,e),this.YE=!1,this.E9=[],this.x9=()=>{var t;null==(t=this.M5)||t.removeEventListener("load",this.x9),this.YE=!0;for(const t of this.E9)this._W(t);En(this.E9)},null==(i=this.M5)||i.addEventListener("load",this.x9),this.Tw=Lr.WEBVTT}},tB=Z.Gm||Z.Zm,eB=Z.Bg,iB=Z.eg,sB=Z.eg&&Z.su,nB=class extends Co{get U4(){return this.R9}get wR(){return this.JG?this.JG.wR:se.pB()}get bR(){const t=this.$G;if(!t||S(t.getTime()))return;const e=1e3*this.ER;return new Date(t.getTime()+e)}get $G(){if(this.jG.getStartDate)return this.cZ&&this.I9||(this.I9=this.jG.getStartDate()),this.I9}get ER(){return this.C9?this.C9.ER:void 0!==this.P9?this.P9:this.$T.currentTime}get Hu(){return this.Ku}get ct(){return this.C9?this.C9.ct:this.JG?this.JG.ct:this.$T.duration}get PR(){return this.uI?this.D9():this.C9?this.C9.PR:this.$T.ended||this.N9}D9(){return void 0!==this.P9&&this.ct===this.P9}get lt(){return this.YG}get jG(){return this.$T}get KR(){return this.M9?this.L9:this.C9?this.C9.KR:this.$T.paused}get tI(){return this.Uo.tB(se.Cn(this.$T.played))}get Ti(){return this.$T.offsetHeight*Ms.Ys.Kg}get ji(){return this.$T.offsetWidth*Ms.Ys.Kg}get Sa(){return this.ea}get fH(){return this.ta}get rI(){return this.B9.rI}get hI(){return this.JG?this.JG.hI:se.pB()}get uI(){return this.C9?this.C9.uI:this.cZ||this.$T.seeking&&!this.L4}get M4(){return this.C9?this.C9.M4:this.L4}get X4(){return 0!==this.O9}get ZR(){return this.C9?this.C9.ZR:this.$T.muted}set ZR(t){this.C9?this.C9.ZR=t:(this.$T.muted=t,this.F9())}get QR(){return this.C9?this.C9.QR:void 0!==this.V9?this.V9:this.$T.playbackRate}set QR(t){this.C9?this.C9.QR=t:this.KR||this.R9?(this.V9=t,this.W9()):(this.V9=void 0,this.$T.playbackRate=t,this.W9())}W9(){const t=this.QR;this.U9!==t&&(this.U9=t,this._o(new ju(this.ER,t)))}get G9(){return this.hZ}get gI(){return this.C9?this.C9.gI:this.$T.volume}set gI(t){this.C9?this.C9.gI=t:(this.$T.volume=t,this.F9())}F9(){const t=this.gI,e=this.ZR;this.H9===t&&this.Z9===e||(this.H9=t,this.Z9=e,this._o(new ns(this.ER,this.gI)))}HR(){return SD(this.$T)}xI(){this.X9||(this.X9=!0);const t=this.z9();return this.q9(),t}q9(){this.M9?this.L9&&(this.L9=!1,this._o(new $(this.ER))):this.Y9()}Y9(){if(this.C9)this.C9.xI();else{Z.eg&&!Z.su&&this.$T.preload===el.$H&&(this.$T.preload=el.eW);const t=this.QR,e=this.$T.play();t!==this.jG.playbackRate&&(this.QR=t),this.N9=!1,yt(e)?e.then(this.K9,this.j9):this.Q9.z4()&&this.J9()}}EI(){this.M9?this.L9||(this.L9=!0,this._o(new ul(this.ER))):this.t8()}t8(){this.C9?this.C9.EI():(this.$T.pause(),this.Q9.ir()),this.e8(new Bu)}z9(){const t=new os;return this.i8.push(t),t.Ub}s8(){for(const t of this.i8)t.Vb(void 0);En(this.i8)}e8(t){for(const e of this.i8)e.Wb(t);En(this.i8)}J9(){this.M9||this.C9||this.s8()}n8(t){this.M9||this.C9||this.e8(t)}Rb(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=!1),this.C9?this.C9.Rb(t,e,i):(this.r8.jw(),this.r8=new da,this.o8=js(this.h8(t,e,i,this.o8,this.r8.Uw),this.r8).catch(Tt))}zG(t){const e=this.$G;if(!e||S(e.getTime()))return;const i=(t.getTime()-e.getTime())/1e3;this.Rb(i)}async h8(t,e,i,s,n){try{if(this.P9=t,this.a8=t,this.u8=Ms.Wg(),i&&!this.cZ?this.L4=!0:(this.cZ=!0,this.L4=!1),this.N9&&!this.D9()&&(this.N9=!1),this.L4?(this._o(new uM(this.ER)),Z.Cm&&(t+=.05)):this._o(new R(t)),await s.catch(Tt),J(n),this.JG&&!this.JG.NJ())return void this.c8();for(this.l8&&this.d8(),this.B9.rI===Ht.eO&&await this.B9.py(Zc.iC,n);0===this.$T.seekable.length||sB&&!this.X9;){const t={stack:[],error:void 0,hasError:!1};try{const e=gs(t,da.$w([n]),!1);await Promise.race([pA(this.$T,"timeupdate",e.Uw),ke(100,e.Uw)]),J(n)}catch(e){t.error=e,t.hasError=!0}finally{co(t)}}let o=nM(this.wR,t,.05),h=this.hI,a=!0,u=!1;for(;;){const t={stack:[],error:void 0,hasError:!1};try{var r;if(h=this.hI,h.V>0&&!h.wr(o)&&(o=h.KL(o),a=!0),e&&!this.$T.fastSeek){const t=this.wR;if(!t.wr(o)){const e=nM(t,o,1);e!==o&&(o=e,a=!0)}}if(iB){const t=this.f8();void 0!==t&&o>t&&(o=t,a=!0)}if(!u){const t=this._8();void 0!==t&&o>t&&(u=!0,await this.v8(t,!1,n),await pA(this.$T,"seeked",n),J(n),a=!0)}if(a){a=!1,await this.v8(o,e,n),J(n);let t=this.ER;h=this.hI,o=h.KL(o);let i=1;for(;_.abs(o-t)>=Si;)h=this.hI,o=oB(o,h,i),await this.v8(o,e,n),J(n),t=this.ER,i++}if(!(this.$T.seeking||this.B9.rI<Ht.iO))break;const i=gs(t,da.$w([n]),!1);await Promise.race([pA(this.$T,"seeked",i.Uw),this.py([Ti.qy,Ti.Iy],i.Uw),this.B9.py(Zc.iC,i.Uw),null==(r=this.JG)?void 0:r.py(wo.nJ,i.Uw)].filter(Bo)),J(n)}catch(e){t.error=e,t.hasError=!0}finally{co(t)}}this.c8()}catch(t){if(Je(t))return;0}}async v8(t,e,i){J(i);let s=this.hI;if(t=s.KL(t),this.l8){let e=!0;for(;e||this.B9.rI<Ht.sO;){const n={stack:[],error:void 0,hasError:!1};try{if(s=this.hI,s.wr(t)||(t=s.KL(t),e=!0),e){e=!1,this.P9=t,this.m8(this.ER);continue}const r=gs(n,da.$w([i]),!1);await Promise.race([this.py(Ti.Iy,r.Uw),this.B9.py(Zc.iC,r.Uw)])}catch(t){n.error=t,n.hasError=!0}finally{co(n)}}J(i)}const n=pA(this.$T,"seeking",i);e&&this.$T.fastSeek?this.$T.fastSeek(t):this.$T.currentTime=t,this.P9=void 0,this.m8(this.ER),this.$T.seeking&&await n}f8(){if(!this.JG||!this.JG.RJ)return;const t=this.JG.IJ,e=this.JG.CJ,i=t&&e?t.jn(e):t||e;if(!i||0===i.V)return;const s=i.Sn(i.V-1),n=i.Tn(i.V-1);return _.max(s,n-.001)}_8(){if(!this.JG||!this.JG.RJ)return;const t=this.JG.CJ;if(!t||0===t.V)return;const e=t.Sn(t.V-1);let i=t.Tn(t.V-1)-.02;return i-=.001,_.max(e,i)}m8(t){this.a8!==t&&(this.a8=t,this.L4?this._o(new uM(t)):this._o(new R(t)))}c8(){const t=this.L4;this.cZ=!1,this.L4=!1,this.u8=0,this.a8=NaN,this.l8&&this.g8(),t?(this._o(new KL(this.ER)),this.p8()):(this._o(new oa(this.ER)),this.w8=!0),this.Zj()}d8(){this.M9||(this.L9=this.KR,this.M9=!0,this.t8())}g8(){this.M9&&(this.M9=!1,this.L9||this.q9())}MJ(t){for(const e of t){if(e.Tw===In.pW&&qD.MJ(e,this.$T))return e;if(e.Tw===In.wW&&hM.MJ(e))return e}}be(){this.hZ=!1,Ur(this.$T)&&(this.$T.style.display="none")}ge(){this.hZ=!0,Ur(this.$T)&&(this.$T.style.display="block")}get nt(){return this.y8}get Wl(){return this.wZ}OI(t,e,i,s,n,r,o,h,a){const u=new Yi(t,e,i,s,n,r,o,a,h);return this.Hl.tt(u),this.b8.tt(u),u}_H(t){const{Lt:e,Ch:i,gs:n}=t;if("function"==typeof this.$T.addTextTrack&&"function"==typeof s.VTTCue){const{track:t,trackElement:s}=this.A8("data:text/vtt,WEBVTT%0A%0A",e,i,n);let r=new $L(t,s);return this.S8.tt(r),this.T8.push(r),r}const r=new QL(e,i,n);return this.Hl.tt(r),this.b8.tt(r),r}uH(){return!0}lH(t,e,i,s,n){const{track:r,trackElement:o}=this.A8(t,e,i,s,n),h=new IL(r,o);return this.S8.tt(h),this.T8.push(h),h}A8(t,e,i,s,n){const r=h.createElement("track");r.src=Ki(t),r.kind=e,r.label=null!=i?i:"",s&&(r.srclang=s),r.default=!!n,r.id=ae(),this.$T.appendChild(r);return{track:this.$T.textTracks.getTrackById(r.id),trackElement:r}}mW(t){this.Hl.it(t),this.b8.it(t)}vH(){for(const t of this.Hl.lC.slice())t.yn();this.Hl.nr();for(const t of this.T8.slice())this.S8.it(t),t.yn();En(this.T8)}IH(){let t=this.$T.textTracks;t&&t.addEventListener&&(t.addEventListener("addtrack",this.k8),t.addEventListener("removetrack",this.E8),t.addEventListener("change",this.x8))}pH(){let t=this.$T.textTracks;t&&t.removeEventListener&&(t.removeEventListener("addtrack",this.k8),t.removeEventListener("removetrack",this.E8),t.removeEventListener("change",this.x8))}I8(t){t.mode=bh.LC;const e=new OL(t);this.S8.tt(e),this.b8.tt(e)}C8(t,e){const i=()=>{aB(t)&&(t.removeEventListener("cuechange",i),this.S8.tt(new IL(t,e)))};t.addEventListener("cuechange",i),t.mode=bh.LC}P8(t){let e=this.$T.getElementsByTagName("track");for(let i=0;i<e.length;i++){let s=e[i]||e.item(i);if(s.track===t)return s}}D8(){if(0===this.S8.V)return;const t=this.hI;if(0===t.V)return;const e=t.Sn(0);if(this.N8!==e){for(const t of this.S8.lC)t.nW(e);this.N8=e}}$n(t){return this.M8.Qo((async e=>{if(J(e),this.JG)throw new g("Already loaded a media source");let i;if(t.Tw===In.pW)i=new qD(t,this,this.vJ,this.Nw),this.l8=!1,this.B9.A9(this.L8());else{if(t.Tw!==In.wW)throw new g("Unsupported configuration");{this.l8=tB;const e=this.L8();i=new hM(t,this,e,this.vJ,this.Nw,void 0,this.o4),this.B9.A9(e),eB&&(this.bn(Ti.hb,this.B8),this.B9.bn(Zc.iC,this.O8))}}return this.JG=i,await i.xj(),i}))}L8(){return this.l8?new mM(this):new Za(this)}F8(){if(this.R9)return;const t=this.QR;this.R9=!0,this.QR=t,this.$T.playbackRate=0,this.B9&&this.B9.V4()}V8(){if(!this.R9)return;const t=this.QR;this.R9=!1,this.QR=t,this.W8()}W8(){this.$T.currentTime=this.$T.currentTime,this.B9&&this.B9.V4()}async nr(){this.cZ=!1,this.L4=!1,this.w8=!1,Ms.Ug(this.O9),this.O9=0,this.Uo=se.pB(),this.r8.jw(),this.P9=void 0,this.a8=NaN,this.I9=void 0,this.l8=!1,this.M9=!1,this.YG=void 0,this.N9=!1,this.U8=void 0,this.N8=0,this.G8=!1,this.X9=!1,this.H8&&(this.Z8(),this.H8=!1),this.e8(new Bu),this.B9.A9(new Za(this)),this.Q9.nr(),this.S8.nr(),this.V8(),eB&&(fo(this.X8),this.X8=0,this.vn(Ti.hb,this.B8)),await this.M8.jw(),await this.M8.Qo((async()=>{this.JG&&(await this.JG.Xw(),this.JG=void 0,Z.Cm&&Z.Dm<3&&this.z8())}))}z8(){this.q8();const t=this.$T,e=t.parentElement,i=t.tagName.toLowerCase();this.$T=ZO(i),this.retainMediaElementState(t),XO(t),null==e||e.replaceChild(this.$T,t),this.Z8(),this.B9.A9(this.L8()),this.Q9.vn(Zc.UL,this.Y8),this.Q9.Xw(),this.Q9=new wM(this),this.Q9.bn(Zc.UL,this.Y8),this.hZ?this.ge():this.be(),this._o(new ho),this._o(new ek)}retainMediaElementState(t){this.jG.muted=t.muted,this.jG.volume=t.volume}async Xw(){this.H8=!1,this.q8(),this.pH(),await this.nr(),await this.M8.yn(),this.Q9.Xw(),this.B9.Xw(),await this.vJ.Xw(),this.vH(),this.Hl.yn(),this.S8.yn(),await this.K8.yn(),this.j8.yn(),this.y8.yn(),this.Ro()}Z8(){this.jG.addEventListener("play",this.Q8),this.jG.addEventListener("pause",this.J8),this.jG.addEventListener("timeupdate",this.t7),this.jG.addEventListener("progress",this.e7),this.jG.addEventListener("loadstart",this.i7),this.jG.addEventListener("ended",this.s7),this.jG.addEventListener("ratechange",this.n7),this.jG.addEventListener("volumechange",this.r7),this.jG.addEventListener("durationchange",this.o7),this.jG.addEventListener("resize",this.h7),this.jG.addEventListener("loadedmetadata",this.h7),this.jG.addEventListener("error",this.a7),this.jG.addEventListener("emptied",this.u7),this.jG.addEventListener("seeked",this.l7),this.jG.addEventListener("seeking",this.d7),Nm()?(this.$T.addEventListener("encrypted",this.f7),this.$T.addEventListener("waitingforkey",this._7)):void 0!==s.WebKitMediaKeys&&"function"==typeof s.WebKitMediaKeys.isTypeSupported?this.$T.addEventListener("webkitneedkey",this.v7):Mm()?this.$T.addEventListener("webkitneedkey",this.m7):void 0!==s.MSMediaKeys&&"function"==typeof s.MSMediaKeys.isTypeSupported&&this.$T.addEventListener("msneedkey",this.g7)}q8(){this.jG.removeEventListener("play",this.Q8),this.jG.removeEventListener("pause",this.J8),this.jG.removeEventListener("timeupdate",this.t7),this.jG.removeEventListener("progress",this.e7),this.jG.removeEventListener("loadstart",this.i7),this.jG.removeEventListener("ended",this.s7),this.jG.removeEventListener("ratechange",this.n7),this.jG.removeEventListener("volumechange",this.r7),this.jG.removeEventListener("durationchange",this.o7),this.jG.removeEventListener("resize",this.h7),this.jG.removeEventListener("loadedmetadata",this.h7),this.jG.removeEventListener("error",this.a7),this.jG.removeEventListener("encrypted",this.f7),this.jG.removeEventListener("waitingforkey",this._7),this.jG.removeEventListener("webkitneedkey",this.v7),this.jG.removeEventListener("webkitneedkey",this.m7),this.jG.removeEventListener("msneedkey",this.g7),this.jG.removeEventListener("emptied",this.u7),this.jG.removeEventListener("seeked",this.l7),this.jG.removeEventListener("seeking",this.d7)}p7(){this.C9||(this.Uo=this.tI,this.C9=dM(this),this.q8(),this.C9.bn(cM,this.Ds))}w7(){if(!this.C9)return;const t=this.C9;this.C9=void 0,this.B9.V4(),fM(this,t),t.Xw(),this.Z8()}p8(){const t=this.ER;this._o(new Al(t,void 0)),this.U8=t}Zj(){this.N9||!this.PR||this.uI||(this.N9=!0,this._o(new Xs(this.ER)))}BH(t){this.YG=t,this.e8(this.YG),this._o(new yM(this.YG))}get WR(){return!!this.$T.webkitCurrentPlaybackTargetIsWireless}get y7(){return this.b7}get qB(){return ol({},GD)}A7(){this.b7||(qO(this.$T,Ms.Ys),this.b7=!0)}S7(t){t.appendChild(this.$T)}n3(){eB&&this.B8(),this.B9.V4()}get wH(){return this.vJ.wH}set wH(t){this.vJ.wH=t}get T7(){return this.o4}set T7(t){this.o4=t}get h9(){return this.vJ.h9}NI(){this.vJ.w9().catch(Tt),this.S8.nr()}get AI(){return this.G8}set AI(t){this.G8=t,this.H8&&!this.G8&&(this.H8=!1,this.Z8())}constructor(t,e,i,s){super(),this.YG=void 0,this.hZ=!0,this.JG=void 0,this.M8=new Su,this.C9=void 0,this.ea=new N,this.ta=new CI,this.T8=[],this.P9=void 0,this.u8=0,this.a8=NaN,this.I9=void 0,this.w8=!1,this.U8=void 0,this.N8=0,this.cZ=!1,this.L4=!1,this.k7=Ht.eO,this.O9=0,this.o8=Promise.resolve(),this.r8=new da,this.i8=[],this.Uo=se.pB(),this.V9=void 0,this.U9=1,this.Z9=!1,this.H9=1,this.N9=!1,this.G8=!1,this.H8=!1,this.l8=!1,this.M9=!1,this.L9=!1,this.R9=!1,this.b7=!1,this.X8=0,this.X9=!1,this.k8=t=>{const e=t.track,i=this.P8(e);if(!hB(this.S8,e)){if(Z.eg){if(e.kind===Li.eW)return void this.I8(e);if(e.kind===Li.$V&&""===e.label&&""===e.language&&!aB(e))return void this.C8(e,i)}this.S8.tt(new IL(e,i))}},this.E8=t=>{const e=hB(this.S8,t.track);e&&this.S8.it(e)},this.x8=()=>{for(let t=0;t<this.S8.V;t++){let e=this.S8.fC(t);e instanceof IL&&e.Z5()}},this.B8=()=>{if(void 0===this.JG||!HD(this.JG))return;if(this.KR)return;const t=this.JG,e=t.h4,i=t.a4;if(!e||!i)return;if(t.RJ)return void this.V8();if(t.rI===Ts.Y2)return;const s=e.wR,n=i.wR;if(0===s.V&&0===n.V)return void this.V8();const r=this.ER;if(r<s.Sn(0)||r<n.Sn(0))return void this.V8();if(s.wr(r)!==n.wr(r)){if(t.DJ(r))return;this.F8()}else if(this.V8(),!this.X8&&this.Q9.z4()){s.eB(n).oB(r,r+.5)&&(this.X8=it(this.E7))}},this.E7=()=>{this.X8=0,this.B8()},this.O8=()=>{if(this.uI||this.M4)return;if(this.B9.rI>=Ht.sO)return;if(void 0===this.JG||!HD(this.JG))return;const t=this.JG,e=t.h4,i=t.a4;if(!e||!i)return;const s=this.ER,n=e.wR,r=i.wR;if(!n.wr(s)||!r.wr(s))return;n.eB(r).oB(s-5,s)&&(this.R9?this.V8():this.W8())},this.Q8=()=>{this._o(new $(this.ER))},this.J8=()=>{this.n8(new Bu),this._o(new ul(this.ER))},this.Y8=()=>{this.J9(),this._o(new ko(this.ER))},this.n7=()=>{this.W9()},this.o7=()=>{this._o(new $s(this.ct))},this.e7=()=>{this._o(new K(this.ER))},this.i7=()=>{this._o(new ao)},this.l7=()=>{this.cZ||this.L4||this.w8?this.w8=!1:this._o(new oa(this.ER))},this.d7=()=>{this.m8(this.ER),this.w8=!1},this.t7=()=>{const t=this.ER,e=this.uI,i=this.B9.rI<Ht.sO&&!this.PR,s=void 0!==this.U8,n=s&&this.U8!==t;this.D8(),(e||!s||n&&!i)&&this.p8()},this.s7=()=>{this.Zj()},this.a7=()=>{if(null!==this.$T.error){const e=this.$T.error;var t;this.BH(new hk(null!=(t=e.code)?t:ok.DECODE,e.message||"Error decoding media",void 0,e.msExtendedCode))}},this.u7=()=>{this.G8&&(this.q8(),this.H8=!0)},this.x7=t=>{if(Ms.Ug(this.O9),this.O9=0,t.readyState<=Ht.iO)if(this.cZ||this.L4){const e=Ms.Wg()-this.u8;if(e<250)return void(this.O9=Ms.Gg((()=>this.x7(t)),250-e))}else if(void 0!==this.JG&&this.JG.DJ(this.ER))return void(this.O9=Ms.Gg((()=>this.x7(t)),250));this.k7!==t.readyState&&(this.k7=t.readyState,this._o(t))},this.r7=()=>{this.F9()},this.h7=()=>{this.vI>0&&this.dI>0&&this._o(new P)},this.f7=t=>{this._o(new cg(t.initDataType,t.initData||new ArrayBuffer(0)))},this._7=()=>{this._o(new lg)},this.g7=t=>{const e=t.initData,i=e?fc(e).buffer:new ArrayBuffer(0);this._o(new cg(im,i))},this.v7=t=>{if(t.initData){const e=function(t){try{const e=ra(t),i=new Ri,s=E(e,i,$h(e,i,!0));return Zg(Xg(s,!0))}catch(t){return}}(t.initData);if(!e)return;this._o(new cg(nm,e))}else this._o(new cg(nm,new ArrayBuffer(0)))},this.m7=t=>{const e=t.initData,i=e?fc(e).buffer:new ArrayBuffer(0);this._o(new cg(im,i))},this.K9=()=>{this.J9()},this.j9=t=>{this.n8(t)},this.R7=t=>{this._o(t),t.type===Ti.Ty&&this.BH(gn(t.errorObject))},this.$T=t,this.Nw=e,this.Ku=i,this.wZ=s,this.B9=new jL(this),this.B9.bn(Zc.iC,this.x7),this.B9.A9(new Za(this)),this.Q9=new wM(this),this.Q9.bn(Zc.UL,this.Y8),this.vJ=new Ee(this),this.vJ.bn(Du,this.R7),this.Hl=new Wo,this.S8=new Wo,this.j8=new Iu([this.Hl,this.S8]),this.K8=new WL(this,this.j8),this.y8=new Iu([this.j8,this.K8.Z]),this.b8=new su(this),this.Z8(),this.IH()}};var rB=.01;function oB(t,e,i){if(void 0===i&&(i=0),!e.V)return 0;let s=e.KL(t);const n=rB*i;return s===e.Sn(0)?s+=n:s===e.Tn(e.V-1)&&(s-=n),s}function hB(t,e){for(let i of t.lC)if(i.PO===e)return i}function aB(t){return!!t.cues&&t.cues.length>0}r();var uB={WQ:void 0,UQ:void 0,GQ:void 0,HQ:void 0,ZQ:void 0,XQ:void 0,zQ:void 0,qQ:void 0,YQ:void 0,KQ:void 0},cB=class extends Co{get wa(){return this.eu||(this.eu=BD(this)),this.eu}get WQ(){}get UQ(){}get GQ(){}get HQ(){}get ZQ(){}get XQ(){}get I7(){}get zQ(){}get qQ(){}get YQ(){}get KQ(){}constructor(...t){super(...t),this.eu=void 0}},lB=class extends nB{TI(){}get dI(){return 0}get vI(){return 0}constructor(t,e,i){super(t,e,i,new cB)}};r(),r();var dB=class{get we(){return this.C7}be(){this.C7.style.display="none"}ge(){this.C7.style.display="block"}S7(t){t.appendChild(this.C7)}yn(){ze(this.C7)}constructor(t=5){let e=s.document.createElement("div");e.className="theoplayer-texttracks",e.style.position="absolute",e.style.display="none",e.style.overflow="hidden",e.style.pointerEvents="none",e.style.left="0",e.style.right="0",e.style.top="0",e.style.bottom="0",e.style.width="100%",e.style.height="100%",e.style.lineHeight="1.3em",e.style.zIndex=""+t,this.C7=e,this.ge()}};function fB(t,e){return ol({},e,zA(function(t){return{WQ:t.WQ,UQ:t.UQ,GQ:t.GQ,HQ:t.HQ,ZQ:t.ZQ,XQ:t.XQ,zQ:t.zQ,qQ:t.qQ,YQ:t.YQ,KQ:t.KQ}}(t)))}function _B(t){return t.GQ&&Tm(t.GQ,"%")?Number(t.GQ.replace("%",""))/100:t.GQ&&Tm(t.GQ,"em")?Number(t.GQ.replace("em","")):1}r(),r(),r(),r(),r();var vB=class t{get P7(){return this.D7+this.ji}set P7(t){this.D7=t-this.ji}get N7(){return this.M7+this.Ti}set N7(t){this.M7=t-this.Ti}L7(t){return this.D7<t.P7&&this.P7>t.D7&&this.M7<t.N7&&this.N7>t.M7}EO(t){return this.D7<=t.D7&&t.P7<=this.P7&&this.M7<=t.M7&&t.N7<=this.N7}Ib(){return new t(this.D7,this.M7,this.ji,this.Ti)}B7(e){const i=this.D7+e,s=this.M7+e,n=_.max(0,this.ji-2*e),r=_.max(0,this.Ti-2*e);return new t(i,s,n,r)}O7(e){const i=_.min(this.D7,e.D7),s=_.max(this.P7,e.P7),n=_.min(this.M7,e.M7),r=_.max(this.N7,e.N7);return new t(i,n,s-i,r-n)}constructor(t,e,i,s){this.D7=t,this.M7=e,this.ji=i,this.Ti=s}},Qs=class{F7(t){const e=this.V7(t);if(!e)return!1;for(const t of e)ze(t);return this.W7(t),!0}get Ht(){return this.QO}get jG(){return this.$T}get Hu(){return this.Ku}get U7(){return this.G7}get H7(){return this.Z7}xj(){this.X7(),this.QO.L.lC.forEach((t=>this._W(t))),this.Hu.bn(nu.mn,this.z7),this.re(this.Hu.Au,this.Hu.Eu)}q7(t){this.Z7=t,this.G7=fB(this.Z7,this.Y7),this.G7.WQ&&(this.jG.style.fontFamily=this.G7.WQ),this.re(this.Hu.Au,this.Hu.Eu),this.K7(!0)}j7(){return this.G7}Q7(t){return this.J7.has(t.IC)}X7(){this.QO.bn(No.HI,this.ttt),this.QO.bn(No.XI,this.ett),this.QO.bn(No.da,this.itt)}stt(){this.QO.vn(No.HI,this.ttt),this.QO.vn(No.XI,this.ett),this.QO.vn(No.da,this.itt)}ntt(t){t.bn(Ct.rO,this.ott),t.bn(Ct.oO,this.htt),t.bn(Ct.oC,this.att)}utt(t){t.vn(Ct.rO,this.ott),t.vn(Ct.oO,this.htt),t.vn(Ct.oC,this.att)}_W(t){this.ntt(t),t.so&&this.ctt(t)}sW(t){this.utt(t),this.ltt(t)}dtt(){this.QO.CE===bh.Qn?this.ftt():this._tt()}ftt(){if(!this.mtt)return;this.mtt=!1;const t=this.Hu.Au,e=this.Hu.Eu;this.re(t,e),this.K7(!1)}_tt(){this.mtt||(this.mtt=!0,this.K7(!0))}ctt(t){this.mtt||t.so&&!this.Q7(t)&&this.K7(!1)}ltt(t){this.Q7(t)&&this.K7(!0)}gtt(t){(t.so||this.Q7(t))&&this.K7(!0)}K7(t){const e=this.ptt,i=this.mtt?[]:this.QO.q.lC.slice();this.wtt(i,e,t),this.ptt=i}V7(t){return this.J7.get(t.IC)}ytt(t,e){this.J7.set(t.IC,e)}W7(t){this.J7.delete(t.IC)}btt(t){const e=[],i=this.G7;if(void 0!==i.zQ){const s=t.Ib();s.Ti=i.zQ,e.push(s)}if(void 0!==i.qQ){const s=t.Ib();s.Ti=i.qQ,s.N7=t.N7,e.push(s)}return e}Att(){return this.ptt.slice()}yn(){ze(this.jG),this.J7.clear(),this.stt(),this.QO.L.lC.forEach((t=>this.utt(t))),this.Hu.vn(nu.mn,this.z7)}constructor(t,e,i,s,n){this.J7=ne(),this.mtt=!0,this.Z7=ol({},uB),this.ptt=[],this.ttt=t=>this._W(t.FO),this.ett=t=>this.sW(t.FO),this.itt=()=>this.dtt(),this.ott=t=>this.ctt(t.FO),this.htt=t=>this.ltt(t.FO),this.att=t=>this.gtt(t.FO),this.z7=t=>this.re(t.width,t.height),this.QO=t,this.Y7=this.G7=n,this.$T=this.Stt(i),this.Ku=s,e.appendChild(this.$T)}};function mB(t,e,i,s,n){let r=t.Ib(),o=r,h=1,a=!1;const u=C(getComputedStyle(e).lineHeight)/4;if(!S(u)&&u>0){for(let e=0;e<i.length&&!a;e++){for(;!wB(t,s,i[e],.01)&&(!s.EO(t)||gB(t,n));)pB(t,i[e],u);if(s.EO(t)){o=t.Ib(),a=!0;break}let c=yB(t,s);h>c&&(o=t.Ib(),h=c),t=r.Ib()}s.EO(t)||(o=r.Ib())}e.style.left=(o.D7-s.D7)/s.ji*100+"%",e.style.top=(o.M7-s.M7)/s.Ti*100+"%"}function gB(t,e){return e.some((e=>t.L7(e)))}function ru(t){return new vB(t.left,t.top,t.width,t.height)}var gi=function(t){return t[t.POS_X=0]="POS_X",t[t.NEG_X=1]="NEG_X",t[t.POS_Y=2]="POS_Y",t[t.NEG_Y=3]="NEG_Y",t}({});function pB(t,e,i){switch(e){case 0:t.D7+=i;break;case 1:t.D7-=i;break;case 2:t.M7+=i;break;case 3:t.M7-=i}}function wB(t,e,i,s){switch(i){case 0:return t.P7>e.P7+s;case 1:return t.D7<e.D7-s;case 2:return t.N7>e.N7+s;case 3:return t.M7<e.M7-s}}function yB(t,e){return _.max(0,_.min(t.P7,e.P7)-_.max(t.D7,e.D7))*_.max(0,_.min(t.N7,e.N7)-_.max(t.M7,e.M7))/(t.ji*t.Ti)}r();var bB=function(t){return t.Yc='"Courier New", Courier, "Nimbus Mono L", "Cutive Mono", monospace',t.Kc='"Times New Roman", Times, Georgia, Cambria, "PT Serif Caption", serif',t.Zc='"Deja Vu Sans Mono", "Lucida Console", Monaco, Consolas, "PT Mono", monospace',t.tl='Arial, Helvetica, Verdana, "PT Sans Caption", sans-serif',t}({});function AB(t,e){return t?{Ttt:t.Ttt,ktt:t.ktt,Ett:t.Ett,Fl:e}:null}function SB(t){const e=t?t.match(/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i):null;return e?{Ttt:x(e[1],16),ktt:x(e[2],16),Ett:x(e[3],16)}:null}function TB(t){return("0"+t.toString(16)).slice(-2)}function kB(t){return"#"+TB(t.Ttt)+TB(t.ktt)+TB(t.Ett)}function EB(t){const e=t?t.match(/^rgba\(([0-9]+),\s*([0-9]+),\s*([0-9]+),\s*([0-9.]+)\)$/i):null;return e?{Ttt:x(e[1],10),ktt:x(e[2],10),Ett:x(e[3],10),Fl:C(e[4])}:null}function xB(t,e){return function(t){return t?"rgba("+t.Ttt+", "+t.ktt+", "+t.Ett+", "+t.Fl+")":void 0}(AB(SB(t),e/100))}var hl=function(t){return t.BLACK="#000000",t.WHITE="#FFFFFF",t.GREEN="#00ff00",t.BLUE="#0000ff",t.CYAN="#00ffff",t.RED="#ff0000",t.YELLOW="#ffff00",t.MAGENTA="#ff00ff",t.TRANSPARENT="transparent",t}({});function ec(t){return RB[t||"none"]}var RB={none:"",dropshadow:"#222 2px 2px 3px, #222 2px 2px 4px, #222 2px 2px 5px",raised:"#222 1px 1px, #222 2px 2px, #222 3px 3px",depressed:"#ccc 1px 1px, #ccc 0px 1px, #222 -1px -1px, #222 0px -1px",uniform:"#222 -1px -1px 0, #222 1px -1px 0, #222 -1px 1px 0, #222 1px 1px 0"},IB="monospace, sans-serif",CB="Arial, Helvetica, sans-serif",PB='"Times New Roman", Times, serif',DB=Kv({monospace:"monospace",sansSerif:CB,serif:PB,monospaceSansSerif:IB,monospaceSerif:"monospace, serif",proportionalSansSerif:CB,proportionalSerif:PB,default:IB}),NB=16,MB="1.3em",LB=class extends Qs{Stt(t){let e=h.createElement("div");e.className="theoplayer-ttml-texttrack-"+t;const i=e.style;return i.position="absolute",Dd(i,"flex"),i.flexDirection=i.webkitFlexDirection="column",i.overflow="hidden",i.pointerEvents="none",i.top="0",i.left="0",i.width="100%",i.height="100%",i.fontSize=NB+"px",i.lineHeight=MB,e}re(t,e){const i=_.min(t/640,e/360),s=NB*i*_B(this.U7);this.jG.style.fontSize=s+"px"}wtt(t,e,i){for(const t of e)!i&&t.so||this.F7(t);let s=[];const n=ru(this.jG.getBoundingClientRect());s.push(...this.btt(n));for(const e of t){const t=this.xtt(e,s,n);for(const e of t)s.push(e.B7(.1))}}xtt(t,e,i){let s=this.V7(t);s||(s=this.Rtt(t),this.ytt(t,s));for(const t of s)this.jG.appendChild(t);const n=[],r=[gi.POS_Y,gi.NEG_Y,gi.POS_X,gi.NEG_X];for(const t of s){mB(YB(t),t,r,i,e),n.push(YB(t))}return n}Rtt(t){let e=[];const i=t.ZV,s=t.OV,n=t.qV,r=t.U,o=t.GV,a=o?_.min(640/o.width,360/o.height):1,u=this.U7;if(0===w.keys(s).length){const t=h.createElement("div");zB(t),BB(r,i,n,t,t,a,u),OB(t,"body",u),t.firstChild&&e.push(t)}else for(let t of w.keys(s)){let o=h.createElement("div");o.id=t,zB(o),WB(o,"region",s[t],i,a),BB(r,i,n,o,o,a,u),OB(o,"body",u),o.firstChild&&e.push(o)}return e}q7(t){return WD(this.jG,t),super.q7(t)}constructor(t,e,i,s){super(t,e,i,s,uB)}};function BB(t,e,i,s,n,r,o){if(Uh(t)&&function(t){const e=t.Cx.toUpperCase();return"SPAN"===e||"P"===e||"BR"===e||"DIV"===e||"BODY"===e}(t)){let a=FB(t);if(!a||(null==n?void 0:n.id)===a){let a;if("BODY"===t.Cx.toUpperCase())a=n;else{if(a=function(t){let e;switch(t.Cx.toUpperCase()){case"BR":e=h.createElement("br");break;case"SPAN":e=h.createElement("span"),qB(e),VB(e,t);break;case"P":e=h.createElement("p"),function(t){qB(t);const e=t.style;e.textAlign="inherit",e.padding="0",e.margin="0"}(e),VB(e,t);break;case"DIV":e=h.createElement("div"),VB(e,t)}return e}(t),!a)return;s.appendChild(a)}!function(t,e,i,s,n){let r=e.qx("style");HB(t,e.Cx,r,i,s,n),function(t,e,i,s){for(const n of e.Xx)ZB(t,e.Cx,n.Cx,n.Mx,i,s)}(t,e,s,n)}(a,t,e,n,r),function(t,e,i){let s=null==e?void 0:e.qx("smpte:backgroundImage");if(s){s=s.replace("#","");let n=i&&UB(i,(t=>t.Xx.some((t=>"id"===t.Cx&&t.Mx===s))));n&&GB(t,n,e,!0)}!function(t,e){const i=e.m[0];if(!i||"metadata"!==i.Cx.toLowerCase())return;const s=i.m[0];GB(t,s,e)}(t,e)}(a,t,i),OB(a,t.Cx,o);for(const s of t.Ox)BB(s,e,i,a,n,r,o)}}else if(yA(t)){const e=h.createTextNode(t.Kk);if("SPAN"!==s.nodeName.toUpperCase()){const t=h.createElement("span");qB(t),OB(t,"span",o),t.appendChild(e),s.appendChild(t)}else s.appendChild(e)}}function OB(t,e,i){const s=t.style;switch(i.WQ&&(s.fontFamily=i.WQ),i.UQ&&(s.color=i.UQ),e.toLowerCase()){case"span":i.HQ&&(s.background=i.HQ);break;case"p":case"div":i.ZQ&&(s.backgroundColor=i.ZQ);break;case"body":i.XQ&&(s.textShadow=ec(i.XQ))}}function FB(t){const e=t.qx("region");if("p"===t.Cx.toLowerCase())return e;const i=[];for(const e of t.m)i.push(FB(e));return jm(i),0===i.length?e:1===i.length?null!=(s=i[0])?s:e:void 0;var s}function VB(t,e){let i=e.Yx(ZE,"id");i&&(t.id=i)}function WB(t,e,i,s,n){HB(t,e,i.style,s,t,n);for(const s of w.keys(i))ZB(t,e,s,i[s],t,n)}function UB(t,e){if(e(t))return t;for(let i of t.m){const t=UB(i,e);if(t)return t}return null}function GB(t,e,i,s){void 0===s&&(s=!1),s&&(t.style.width=t.style.height="100%");const n=h.createElement("img");n.src=function(t){const e=t&&t.Ox.length>0?t.Ox[0]:null;return e&&yA(e)?"data:image/png;base64,"+e.Kk:""}(e),n.id=t.id,n.style.height="100%",n.style.maxWidth="100%",function(t,e){const i=t.style;Dd(i,"flex"),i.flexDirection=i.webkitFlexDirection="column";let s=e.qx("smpte:backgroundImageVertical"),n="center";if(s)switch(s.toLowerCase()){case"left":n="flex-start";break;case"center":n="center";break;case"right":n="flex-end";break;case"inherit":n="inherit"}i.justifyContent=i.webkitJustifyContent=n;let r=e.qx("smpte:backgroundImageHorizontal"),o="center";if(r)switch(r.toLowerCase()){case"left":o="flex-start";break;case"center":o="center";break;case"right":o="flex-end";break;case"inherit":o="inherit"}i.alignItems=i.webkitAlignItems=o}(t,i),t.appendChild(n)}function HB(t,e,i,s,n,r){if(i)for(const o of i.split(" "))if(s[o])for(const i of w.keys(s[o]))"style"===i.toLowerCase()?HB(t,e,s[o][i],s,n,r):ZB(t,e,i,s[o][i],n,r)}function ZB(t,e,i,s,n,r){const o=t.style;switch(i){case"backgroundColor":o.backgroundColor=s;break;case"color":o.color=s;break;case"direction":o.direction=s;break;case"display":"none"===s&&(o.display="none");break;case"fontFamily":var h;o.fontFamily=null!=(h=DB.get(s))?h:s;break;case"fontSize":{let t=s;if(Tm(t,"px")){const e=Number(t.slice(0,-2));t=e*r/NB+"em"}else Tm(t,"c")&&(t=t.replace("c","em"));o.fontSize=t,o.lineHeight&&"inherit"!==o.lineHeight||(o.lineHeight=MB);break}case"fontStyle":o.fontStyle=s;break;case"fontWeight":o.fontWeight=s;break;case"lineHeight":{let t=s;if(Tm(t,"px")){const e=Number(t.slice(0,-2));t=e*r+"px"}o.lineHeight=t;break}case"opacity":o.opacity=s;break;case"overflow":o.overflow=s;break;case"padding":o.padding=s;break;case"textAlign":o.textAlign=s;break;case"textDecoration":switch(s){case"lineThrough":o.textDecoration="line-through";break;case"underline":case"overline":o.textDecoration=s;break;case"noUnderline":case"noLineThrough":case"noOverline":o.textDecoration="none"}break;case"unicodeBidi":switch(s){case"bidiOverride":o.unicodeBidi="bidi-override";break;case"normal":case"embed":case"isolate":o.unicodeBidi=s}break;case"visibility":o.visibility=s;break;case"zIndex":o.zIndex=s;break;case"displayAlign":{let t;switch(s.toLowerCase()){case"before":t="flex-start";break;case"center":t="center";break;case"after":t="flex-end";break;case"justify":t="space-between";break;default:return}o.justifyContent=o.webkitJustifyContent=t;break}case"extent":{const i=XB(e.toLowerCase())?n:t;let r,o,h=s.split(" ",2);2===h.length?(r=h[0],o=h[1]):r=o="100%",i&&(i.style.height=o,i.style.width=r);break}case"origin":{const i=XB(e.toLowerCase())?n:t,[r,o]=s.split(" ",2);i&&(r||o)&&(r&&(i.style.left=r),o&&(i.style.top=o));break}case"showBackground":case"textOutline":break;case"wrapOption":switch(s){case"wrap":o.whiteSpace="normal";break;case"noWrap":o.whiteSpace="nowrap"}break;case"writingMode":{let t,e,i,n;switch(s){case"lrtb":case"lr":t="horizontal-tb";break;case"rltb":t="horizontal-tb",e="rtl",n="bidi-override";break;case"tbrl":case"tb":t="vertical-rl",i="upright";break;case"tblr":t="vertical-lr",i="upright";break;case"rl":t="horizontal-tb",e="rtl";break;default:return}o.writingMode=t,o.setProperty("-webkit-writing-mode",t),e&&(o.direction=e),i&&(o.textOrientation=i,o.setProperty("-webkit-text-orientation",i)),n&&(o.unicodeBidi=n);break}case"linePadding":if(Tm(s,"c")){let t=s.replace("c","em");o.paddingLeft=o.paddingRight=t}break;case"multiRowAlign":"auto"===s.toLowerCase()?o.textAlign="":o.textAlign=s}}function XB(t){return"div"===t||"p"===t||"span"===t}function zB(t){const e=t.style;Dd(e,"flex"),e.flexDirection=e.webkitFlexDirection="column",e.top="auto",e.left="5%",e.width="90%",e.height="100%",e.maxHeight="100%",e.maxWidth="100%",e.overflow="visible",e.position="absolute",e.fontFamily=CB,e.color=hl.WHITE,e.background=hl.TRANSPARENT,e.textShadow=ec("uniform"),e.textAlign="start",e.writingMode="horizontal-tb",e.setProperty("-webkit-writing-mode","horizontal-tb"),e.padding="0",e.margin="0",e.fontSize="inherit",e.lineHeight="inherit"}function qB(t){const e=t.style;e.fontFamily="inherit",e.color="inherit",e.fontSize="inherit",e.lineHeight="inherit",e.textShadow="inherit"}function YB(t){let e=ru(t.getBoundingClientRect());if("visible"===getComputedStyle(t).overflow&&t.scrollHeight>t.clientHeight){const i=t.children;for(let t=0;t<i.length;t++){const s=i[t];e=e.O7(ru(s.getBoundingClientRect()))}}return e}r(),r();var KB=void 0;function jB(t){return KB||(KB=s.document.createElement("textarea")),KB.innerHTML=t,KB.value}function QB(t,e){let i="Data",s="",n=[],r=t.charAt(e.nc),o="",h={Tw:"starttag",Ux:"",Itt:[]};for(;e.nc<t.length+1;){switch(r=e.nc<t.length?t.charAt(e.nc):"EOF",i){case"Data":switch(r){case"&":let n=t.substring(e.nc).match(/&#?[0-9a-zA-Z]+;/);n?(s+=jB(n[0]),e.xb(n[0].length-1)):s+="&";break;case"<":if(s)return{Tw:"string",U:s};i="Tag";break;case"EOF":return{Tw:"string",U:s};default:s+=r}break;case"Tag":switch(r){case"\t":case"\n":case"\f":case" ":i="StartTagAnnotation";break;case".":i="StartTagClass";break;case"/":i="EndTag";break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":s=r,i="TimestampTag";break;case">":return e.xb(1),h;case"EOF":return h;default:s=r,i="StartTag"}break;case"StartTag":switch(r){case"\t":case"\f":case" ":i="StartTagAnnotation";break;case"\n":o=r,i="StartTagAnnotation";break;case".":i="StartTagClass";break;case">":return e.xb(1),{Tw:"starttag",Ux:s,Itt:[]};case"EOF":return{Tw:"starttag",Ux:s,Itt:[]};default:s+=r}break;case"StartTagClass":switch(r){case"\t":case"\f":case" ":n.push(o),o="",i="StartTagAnnotation";break;case"\n":n.push(o),o=r,i="StartTagAnnotation";break;case".":n.push(o),o="";break;case">":return e.xb(1),n.push(o),{Tw:"starttag",Ux:s,Itt:n};case"EOF":return n.push(o),{Tw:"starttag",Ux:s,Itt:n};default:o+=r}break;case"StartTagAnnotation":switch(r){case"&":i="CharRefInAnnotation";break;case">":e.xb(1);let t=o.trim();return t=t.replace(/\s/," "),{Tw:"starttag",Ux:s,Itt:n,Ctt:t};default:o+=r}break;case"CharRefInAnnotation":let a="";for(let i=e.nc;">"===t.charAt(i);i++)a+=t.charAt(i);o+=a||"&",i="StartTagAnnotation";break;case"EndTag":switch(r){case">":return e.xb(1),{Tw:"endtag",Ux:s};case"EOF":return{Tw:"endtag",Ux:s};default:s+=r}break;case"TimestampTag":switch(r){case">":return e.xb(1),{Tw:"timestamp",Ptt:s};case"EOF":return{Tw:"timestamp",Ptt:s};default:s+=r}}e.xb(1)}return h}var JB=function(t){return t.Dtt="string",t.Ntt="starttag",t.Mtt="endtag",t.Ltt="timestamp",t}({});function $B(t){let e;if(t.getBoundingClientRect&&t.parentNode&&(e=t.getBoundingClientRect()),!e)return{left:0,top:0};const i=h.documentElement,n=h.body,r=i.clientLeft||n.clientLeft||0,o=s.pageXOffset||n.scrollLeft,a=e.left+o-r,u=i.clientTop||n.clientTop||0,c=s.pageYOffset||n.scrollTop,l=e.top+c-u;return{left:_.round(a),top:_.round(l)}}function tO(t,e,i,s){if(void 0===s&&(s=0),!t||!e)return;t.style.left="0px";let n=t.getClientRects(),r=e.getClientRects();if(0===n.length||0===r.length)return;let o=n[0],h=r[0],a=o.width/2+o.left;eO(t,h.width/2+h.left-a,i,s)}function eO(t,e,i,s){void 0===s&&(s=0),sO(t,e,"left","right",i,s)}function iO(t,e,i,s){void 0===s&&(s=0),sO(t,e,"top","bottom",i,s)}function sO(t,e,i,s,n,r){void 0===r&&(r=0);const o=t.getClientRects();if(n&&o.length>0){const t=o[0];e=Ns(e,n[i]+r-t[i],n[s]-r-t[s])}t.style[i]=e+"px"}function wu(t,e){void 0===t.textContent?t.innerText=e:t.textContent=e}r();var nO={UQ:hl.WHITE,WQ:"sans-serif",GQ:"100%",HQ:"rgba(0,0,0,0.8)",ZQ:hl.TRANSPARENT,XQ:"none",zQ:void 0,qQ:void 0,YQ:void 0,KQ:void 0},rO="theoplayer-webvtt-region-",oO="theoplayer-webvtt-styling-",hO="theoplayer-webvtt-default-style",aO=5.23,uO=1.14,cO=class extends Qs{Stt(t){let e=h.createElement("div");e.className="theoplayer-webvtt-texttrack-"+t,Zo(e),e.style.overflow="hidden",e.style.pointerEvents="none";const i=this.U7.WQ;return i&&(e.style.fontFamily=i),e.style.whiteSpace="pre-line",function(){if(h.getElementById(hO))return;const t=[];for(const[e,i]of wO)t.push("."+oO+e+" { color: "+i+" !important; }"),t.push("."+oO+"Btt"+e+" { background-color: "+i+" !important; }"),t.push("video::cue(."+e+") { color: "+i+"; }"),t.push("Ott"+e+") { background-color: "+i+"; }");const e=h.createElement("style");e.id=hO,e.innerHTML=t.join("\n"),h.body.appendChild(e)}(),e}xj(){this.jG.appendChild(this.Ftt),super.xj()}re(t,e){const i=_.min(t/100,e/100),s=_B(this.U7);this.Vtt.forEach((t=>{let{zO:e,Wtt:n}=t;this.Utt(n,i,s,e)})),this.Utt(this.Ftt,i,s)}q7(t){WD(this.jG,t),super.q7(t)}wtt(t,e,i){const s=this.jG,n=this.Hu.Eu/100;let r=[];for(const e of t)void 0!==e.zO&&(ms(r,e.zO)||r.push(e.zO));this.Vtt.forEach(((t,e)=>{let{zO:s,Wtt:n}=t;!i&&ms(r,s)||(ze(n),this.Vtt.delete(e))}));for(const t of e)!i&&t.so||this.F7(t);let o=[];const h=ru(this.Ftt.getBoundingClientRect());o.push(...this.btt(h));for(const t of r){let e;this.Vtt.has(t.o)?e=this.Vtt.get(t.o).Wtt:(e=gO(t,n),s.appendChild(e),this.Vtt.set(t.o,{zO:t,Wtt:e})),o.push(ru(e.getBoundingClientRect()))}t.sort(yO);for(const e of t){const t=this.xtt(e,o,h);void 0!==t&&o.push(t.B7(.1))}}xtt(t,e,i){var s;let n;t.zO?(n=this.Vtt.get(t.zO.o).Wtt,"up"===t.zO.cF&&n.children.length>=1&&(n.style.transitionProperty="top",n.style.transitionDuration="0.433s")):n=this.Ftt;let r=null==(s=this.V7(t))?void 0:s[0];if(r||(r=this.Gtt(t),this.ytt(t,[r])),n.appendChild(r),t.zO||(lO(r,t),t.qO?function(t,e,i,s){const n=pO(t),r=n?i.Ti:i.ji;let o=C(getComputedStyle(e).lineHeight);if(0===o||S(o))return;let h=ru(e.getBoundingClientRect()),a=_.round(Ok(t));"rl"===t.Pt&&(a=-(a+1));let u=o*a;"rl"===t.Pt&&(u=u-h.ji+o);a<0&&(u+=r,o=-o);n?h.M7+=u:h.D7+=u;const c=h.Ib();let l=!1;for(;!i.EO(h)||gB(h,s);)if(n)if(o<0&&h.M7<i.M7||o>0&&h.N7>i.N7){if(h.M7=c.M7,l)break;o=-o,l=!0}else h.M7+=o;else if(o<0&&h.D7<i.D7||o>0&&h.P7>i.P7){if(h.D7=c.D7,l)break;o=-o,l=!0}else h.D7+=o;n?e.style.top=(h.M7-i.M7)/i.Ti*100+"%":e.style.left=(h.D7-i.D7)/i.ji*100+"%"}(t,r,i,e):function(t,e,i,s){let n,r=ru(e.getBoundingClientRect());if(0===r.ji||0===r.Ti)return;pO(t)?"center"===t.ZO?r.M7-=r.Ti/2:"end"===t.ZO&&(r.M7-=r.Ti):"center"===t.ZO?r.D7-=r.ji/2:"end"===t.ZO&&(r.D7-=r.ji);n=""===t.Pt?[gi.POS_Y,gi.NEG_Y,gi.POS_X,gi.NEG_X]:"lr"===t.Pt?[gi.POS_X,gi.NEG_X,gi.POS_Y,gi.NEG_Y]:[gi.NEG_X,gi.POS_X,gi.POS_Y,gi.NEG_Y];mB(r,e,n,i,s)}(t,r,i,e)),!t.zO)return ru(r.getBoundingClientRect())}Gtt(t){let e=new Ri,i=t.U,s=this.Htt(t),n={Ztt:void 0,we:s},r=n,o="",a="",u=[n],c=[],l=[];for(;e.nc<i.length;){let t=QB(i,e);if(t.Tw===JB.Dtt){const e=h.createElement("span");wu(e,t.U),dO(e,u),""!==o&&(e.lang=o),this.Xtt(e,a),r.we.appendChild(e)}else if(t.Tw===JB.Ntt){const e=t.Ux.toLowerCase();switch(e){case"i":case"b":case"u":case"ruby":{let i=h.createElement(e);r.we.appendChild(i),r={Ztt:t,we:i},u.push(r);break}case"rt":var d;if("ruby"===(null==(d=r.Ztt)?void 0:d.Ux.toLowerCase())){let e=h.createElement("rt");r.we.appendChild(e),r={Ztt:t,we:e},u.push(r)}break;case"c":case"v":r={Ztt:t,we:r.we},u.push(r);break;case"font":{var f;const e=null==(f=t.Ctt)?void 0:f.match(/(?:^| )color=["']([^"']+)/i);e&&(a=e[1],l.push(a),r={Ztt:t,we:r.we},u.push(r));break}case"lang":var _;o=null!=(_=t.Ctt)?_:"",c.push(o)}}else if(t.Tw===JB.Mtt){var v;const e=t.Ux.toLowerCase(),i=null==(v=r.Ztt)?void 0:v.Ux.toLowerCase();i===e?(u.pop(),r=u[u.length-1],"font"===e&&(l.pop(),a=l.length>0?l[l.length-1]:"")):"rt"===i&&"ruby"===e?(u.pop(),u.pop(),r=u[u.length-1]):"lang"===e&&(c.pop(),o=c.length>0?c[c.length-1]:"")}else if(t.Tw===JB.Ltt){let e=t.Ptt,i=new Ri;try{SE(e,i)}catch(t){Xf("ERROR collecting timestamp",t)}}}return s}Xtt(t,e){const i=this.U7,s=this.H7;i.HQ&&(t.style.background=i.HQ);const n=s.UQ||e||i.UQ;n&&(t.style.color=n)}Utt(t,e,i,s){if(s){let n=fO(s,e);t.style.height=n*i+"px",t.style.left=_O(s)+"%",t.style.top=vO(s,e)+"px"}t.style.fontSize=aO*e*i+"px"}Htt(t){const e=h.createElement("div");e.style.position="absolute",e.style.margin="0",e.style.padding="0",e.style.unicodeBidi="plaintext",e.style.wordWrap="break-word",e.style.overflowWrap="break-word",e.style.width="auto",e.style.textAlign=t.GO,function(t,e){"rl"===e.Pt?t.style.writingMode="vertical-rl":"lr"===e.Pt?t.style.writingMode="vertical-lr":t.style.writingMode="horizontal-tb"}(e,t),function(t,e){let i=Wk(e);pO(e)?(t.style.width=i+"%",t.style.height="auto"):(t.style.height=i+"%",t.style.width="auto")}(e,t),lO(e,t);const i=this.U7.ZQ;i&&(e.style.background=i);const s=this.U7.UQ;return s&&(e.style.color=s),e.style.textShadow=ec(this.U7.XQ),e}constructor(t,e,i,s){super(t,e,i,s,nO),this.Vtt=Oh(),this.Ftt=mO(3)}};function lO(t,e){let i,s,n=Vk(e),r=Fk(e),o=Wk(e);if(pO(e)){switch(n){case"line-left":i=r;break;case"center":i=r-o/2;break;case"line-right":i=r-o}s=e.qO?0:Ok(e)}else{switch(n){case"line-left":s=r;break;case"center":s=r-o/2;break;case"line-right":s=r-o}i=e.qO?0:Ok(e)}t.style.left=i+"%",t.style.top=s+"%"}function dO(t,e){for(const i of e)if(i.Ztt){for(const e of i.Ztt.Itt)ce(t,oO+e);"v"===i.Ztt.Ux.toLowerCase()&&i.Ztt.Ctt&&ce(t,"theoplayer-webvtt-voice-"+i.Ztt.Ctt)}}function fO(t,e){return t.hF*(aO*e)*uO}function _O(t){return t.lF-t.aF*t.ji/100}function vO(t,e){let i=t.dF,s=t.uF*fO(t,e)/100;return _.max(0,i-s)}function mO(t){let e=h.createElement("div");return e.className=rO+"default",Zo(e),e.style.wordWrap="break-word",e.style.writingMode="horizontal-tb",e.style.pointerEvents="none",e.style.width="auto",e.style.height="auto",e.style.maxHeight="100%",e.style.minHeight="0px",e.style.padding="0",e.style.boxSizing="border-box",e.style.fontSize=aO*t+"px",e.style.lineHeight=uO+"em",e}function gO(t,e){let i=mO(e);i.className=rO+t.o;let s=t.ji,n=fO(t,e);return i.style.width=s+"%",i.style.height=n+"px",i.style.left=_O(t)+"%",i.style.right="",i.style.top=vO(t,e)+"px",i.style.bottom="",i.style.boxSizing="border-box",i}function pO(t){return""===t.Pt}var wO=[["white","#fff"],["lime","#0f0"],["cyan","#0ff"],["red","#f00"],["yellow","#ff0"],["magenta","#f0f"],["blue","#00f"],["black","#000"]];function yO(t,e){const i=Ok(t),s=Ok(e),n=bO(i,t.qO),r=bO(s,e.qO);return n&&r?i-s||be(e,t)||e.IC-t.IC:be(t,e)||t.IC-e.IC}function bO(t,e){return e?t<0?t>-8:t>8:t>50}r(),r(),r();var AO=function(t){return t.FONT_REGULAR="regular",t.FONT_UNDERLINE="underline",t.FONT_ITALICS="italics",t.FONT_UNDERLINE_ITALICS="underline-italics",t}({}),SO={UQ:hl.WHITE,WQ:bB.Zc,GQ:"100%",HQ:hl.BLACK,ZQ:"transparent",XQ:"none",ztt:"regular",zQ:void 0,qQ:void 0,YQ:void 0,KQ:void 0},TO=[{qtt:hl.WHITE,ztt:"regular",Ytt:0},{qtt:hl.WHITE,ztt:"underline",Ytt:0},{qtt:hl.GREEN,ztt:"regular",Ytt:0},{qtt:hl.GREEN,ztt:"underline",Ytt:0},{qtt:hl.BLUE,ztt:"regular",Ytt:0},{qtt:hl.BLUE,ztt:"underline",Ytt:0},{qtt:hl.CYAN,ztt:"regular",Ytt:0},{qtt:hl.CYAN,ztt:"underline",Ytt:0},{qtt:hl.RED,ztt:"regular",Ytt:0},{qtt:hl.RED,ztt:"underline",Ytt:0},{qtt:hl.YELLOW,ztt:"regular",Ytt:0},{qtt:hl.YELLOW,ztt:"underline",Ytt:0},{qtt:hl.MAGENTA,ztt:"regular",Ytt:0},{qtt:hl.MAGENTA,ztt:"underline",Ytt:0},{qtt:hl.WHITE,ztt:"italics",Ytt:0},{qtt:hl.WHITE,ztt:"underline-italics",Ytt:0},{qtt:hl.WHITE,ztt:"regular",Ytt:0},{qtt:hl.WHITE,ztt:"underline",Ytt:0},{qtt:hl.WHITE,ztt:"regular",Ytt:4},{qtt:hl.WHITE,ztt:"underline",Ytt:4},{qtt:hl.WHITE,ztt:"regular",Ytt:8},{qtt:hl.WHITE,ztt:"underline",Ytt:8},{qtt:hl.WHITE,ztt:"regular",Ytt:12},{qtt:hl.WHITE,ztt:"underline",Ytt:12},{qtt:hl.WHITE,ztt:"regular",Ytt:16},{qtt:hl.WHITE,ztt:"underline",Ytt:16},{qtt:hl.WHITE,ztt:"regular",Ytt:20},{qtt:hl.WHITE,ztt:"underline",Ytt:20},{qtt:hl.WHITE,ztt:"regular",Ytt:24},{qtt:hl.WHITE,ztt:"underline",Ytt:24},{qtt:hl.WHITE,ztt:"regular",Ytt:28},{qtt:hl.WHITE,ztt:"underline",Ytt:28}],kO=[11,-1,1,2,3,4,12,13,14,15,5,6,7,8,9,10];function EO(t,e){return Qk(t.Ktt,e.Ktt)||gr(t.sL,e.sL)}r();var Bt=32,xO=/CC([1-4])=(.*)/;function RO(t){if(!t)return[];const e=[],i=t.trim().split(";");if(i.every((t=>t.match(xO))))for(const t of i){const[,i,s]=t.match(xO);e.push({jtt:Number(i),Qtt:s})}else for(let t=0;t<i.length;t++)e.push({jtt:t+1,Qtt:i[t]});return e}var IO=class t{get Jtt(){return this.tet.$tt}get eet(){return this.tet.iet}get net(){return this.tet.iet.Ytt-this.tet.$tt.Ytt+1}get ret(){return this.tet.iet.oet-this.tet.$tt.oet+1}br(){return this.het=this.aet(),this.uet(),this.cet(),this.het}aet(){let t=h.createElement("div");t.style.position="absolute",t.style.margin="0",t.style.padding="0",t.style.whiteSpace="pre",t.style.width=this.net/Bt*this.det.let*100+"%",t.style.height=1.2*this.ret+"em",t.style.lineHeight="1.2em",t.style.letterSpacing=this.det.fet?"calc(1em - 1ch)":"";const e=this.G7.WQ;e&&(t.style.fontFamily=e);const i=this.G7.ZQ;return i&&(t.style.backgroundColor=i),t}uet(){if(!this.het)return;let t=this.Jtt.oet/15*100,e=this.Jtt.Ytt/Bt*100,i=(Bt-this.eet.Ytt-1)/Bt*100,s=(15-this.eet.oet-1)/15*100;this.det._et||(e=i=1,this.het.style.width="98%"),s<t?this.het.style.bottom=s*this.det.let+"%":this.het.style.top=t*this.det.let+"%",i<e?this.het.style.right=i+"%":this.het.style.left=e+"%"}cet(){const t=this.tet.vet.sort(CO);for(let e=0;e<t.length;e++)this.met(t[e-1],t[e]),this.pet(t[e]);this.met(t[t.length-1],void 0)}pet(e){var i;const s=fB(this.G7,e.wet),n=t.yet(s);wu(n,e.bet),null==(i=this.het)||i.appendChild(n)}static yet(t){const e=h.createElement("span");e.style.display="inline-block",t.ztt!==AO.FONT_ITALICS&&t.ztt!==AO.FONT_UNDERLINE_ITALICS||(e.style.fontStyle="italic"),t.ztt!==AO.FONT_UNDERLINE&&t.ztt!==AO.FONT_UNDERLINE_ITALICS||(e.style.textDecoration="underline");const i=t.UQ;i&&(e.style.color=i);const s=t.HQ;return s&&(e.style.backgroundColor=s),e.style.textShadow=ec(t.XQ),e.style.height="1.2em",e}met(t,e){let i=t?t.iet.oet:this.tet.$tt.oet;const s=e?e.$tt.oet:this.tet.iet.oet;let n=t?t.iet.Ytt:this.tet.$tt.Ytt;const r=e?e.$tt.Ytt:this.tet.iet.Ytt;i<s&&(!e||t&&t.$tt.oet!==e.$tt.oet?this.Aet():this.Tet(this.tet.iet.Ytt-n),n=this.tet.$tt.Ytt),n<r&&(e?this.Tet(r-n):this.Aet())}Aet(){var t;const e=h.createElement("br");null==(t=this.het)||t.appendChild(e)}Tet(t){var e;if(t<=0)return;const i=h.createElement("span");i.style.display="inline-block",wu(i,km(" ",t)),null==(e=this.het)||e.appendChild(i)}constructor(t,e,i){this.tet=t,this.det=e,this.G7=i}};function CO(t,e){return function(t,e){if(t.oet!==e.oet)return t.oet-e.oet;return t.Ytt-e.Ytt}(t.$tt,e.$tt)}var PO=class extends Qs{Stt(t){let e=h.createElement("div");return e.className="theoplayer-cea608-texttrack-"+t,e.style.position="absolute",e.style.overflow="hidden",e.style.pointerEvents="none",e.style.top="10%",e.style.bottom="10%",this.U7.WQ&&(e.style.fontFamily=this.U7.WQ),e}re(t,e){this.yl()}yl(){let t=_B(this.U7);this.ket=function(t){return{let:t/100,fet:t<=100,_et:t<=150}}(100*t);const e=this.Eet/Bt;this.xet=e*t,this.jG.style.fontSize=this.xet+"px"}get Eet(){let t=this.jG.offsetWidth;return this.ket&&this.ket._et||(t*=.8),t}wtt(t,e,i){for(const t of e)!i&&t.so||this.F7(t);for(const e of t)this.xtt(e)}xtt(t){this.ket&&this.ket._et?this.Ret(80):this.Ret(100),this.yl();let e=this.V7(t);e||(e=this.Rtt(t),this.ytt(t,e));for(const t of e)this.jG.appendChild(t)}Rtt(t){return t.U.map((t=>new IO(t,this.ket,this.U7).br()))}Ret(t){const e=(100-t)/2;this.jG.style.left=e+"%",this.jG.style.width=t+"%"}constructor(t,e,i,s){super(t,e,i,s,SO)}},DO=class t{Iet(t){for(let e of this.Cet)if(e.Ht===t)return e}static Pet(t){switch(t.Tw){case Lr.TTML:case Lr.SRT:case Lr.WEBVTT:case Lr.CEA608:return!0}return!1}Det(t){switch(t.Tw){case Lr.TTML:return new LB(t,this.Net,t.Ch,this.Ku);case Lr.SRT:case Lr.WEBVTT:return new cO(t,this.Net,t.Ch,this.Ku);case Lr.CEA608:return new PO(t,this.Net,t.Ch,this.Ku)}}Met(t){let e=this.Iet(t);e||(e=this.Det(t),e&&(e.xj(),e.q7(this.wZ),this.Cet.push(e),t.CE===bh.Qn&&e.ftt()))}Let(t){let e=this.Cet;for(let i=e.length-1;i>=0;i-=1){let s=e[i];s.Ht===t&&(s.yn(),uu(e,i))}}Bet(e){_x(e.Lt)&&t.Pet(e)&&(e.rI===Zu.ERROR?this.Let(e):this.Met(e))}get V5(){return this.Oet.cs||this.ta.hO}nr(){for(let t of this.Cet)t.Ht.vn(No.iC,this.Fet),t.Ht.vn(No.nC,this.Fet),t.yn();En(this.Cet)}yn(){this.nr();for(let t of this.Cet)t.yn();this.Hl.vn(Se.VI,this.Vet),this.Hl.vn(Se.UI,this.Wet),this.Hl.vn(No.da,this.Fet),this.Oet.vn(nh.da,this.Uet),this.ta.vn([rr.rO,rr.oO],this.Uet),this.wZ.vn("eC",this.Get)}constructor(t,e,i,s,n,r){this.Cet=[],this.Vet=t=>{let e=t.Ht;e.bn(No.iC,this.Fet),e.bn(No.nC,this.Fet),e instanceof IL&&(e.V5=this.V5),this.Bet(e)},this.Fet=t=>{let e=t.Ht;this.Bet(e)},this.Wet=t=>{let e=t.Ht;e.vn(No.iC,this.Fet),e.vn(No.nC,this.Fet),this.Let(e)},this.Uet=()=>{let t=this.V5;for(let e of this.Hl.lC)e instanceof IL&&(e.V5=t)},this.Get=()=>{for(let t of this.Cet)t.q7(this.wZ)},this.Net=t,this.Ku=e,this.Hl=i,this.Oet=n,this.ta=r,this.wZ=s,this.Hl.bn(Se.VI,this.Vet),this.Hl.bn(Se.UI,this.Wet),this.Hl.bn(No.da,this.Fet),this.Oet.bn(nh.da,this.Uet),this.ta.bn([rr.rO,rr.oO],this.Uet),this.wZ.bn("eC",this.Get),this.Uet()}};r();var NO=class extends Co{get aO(){var t;return null!=(t=this.Het.ownerDocument.pictureInPictureEnabled)&&t}get hO(){return this.Zet}async vo(){if(this.aO){if(!this.hO){const t=this.py([rr.rO,rr.fa]);await this.Het.requestPictureInPicture(),await t,this.Zet||this._o(new ga)}}else this._o(new ga)}async xo(){if(this.aO){if(this.Zet){const t=this.py([rr.oO,rr.fa]);await this.Het.ownerDocument.exitPictureInPicture(),await t,this.Zet&&this._o(new ga)}}else this._o(new ga)}yn(){this.Ro(),this.Het.removeEventListener("enterpictureinpicture",this.Xet),this.Het.removeEventListener("leavepictureinpicture",this.zet)}constructor(t){super(),this.Zet=!1,this.Xet=()=>{this.Zet=!0,this._o(new ik)},this.zet=()=>{this.Zet=!1,this._o(new sk)},this.Het=t,this.Het.addEventListener("enterpictureinpicture",this.Xet),this.Het.addEventListener("leavepictureinpicture",this.zet)}};function MO(t){const e=new VP,i=function(t){const e=[];return OP.aa(t)&&e.push(new OP(t)),FP.aa(t)&&e.push(new FP(t)),e}(t);if(i.length>0){for(const t of i)e.lK(t);e.cK(i[0])}return e}var LO=class extends nB{get jG(){return this.$T}get dI(){return this.$T.videoHeight}get vI(){return this.$T.videoWidth}get Sa(){return this.qet}get fH(){return this.Yet}TI(){return this.$T}async Xw(){this.Yet.yn(),this.qet.yn(),this.Ket.yn(),this.jet.yn(),await super.Xw()}be(){super.be(),this.Ket.be()}ge(){super.ge(),this.Ket.ge()}S7(t){super.S7(t),this.Ket.S7(t)}constructor(t,e,i,s){super(t,e,i,s),this.qet=MO(t),this.Yet=new NO(t),this.Ket=new dB,this.jet=new DO(this.Ket.we,this.Hu,this.nt,this.Wl,this.Sa,this.fH)}};r(),r();r(),r();var BO=function(t){return t.Qet="HELLO",t.Jet="HI_THERE",t.$et="INITIALIZE",t.tit="APPEND_INIT",t.eit="APPEND_DATA",t.iit="ACK",t.sit="REMOVE",t.nit="DESTROY_SESSION",t}({}),OO=class{rit(t){return this.Yo.Qo((async t=>{J(t);const e=new MessageChannel,i=e.port1,s=e.port2;Ll.serviceWorker.controller||await pA(Ll.serviceWorker,"install",t),"activated"!==Ll.serviceWorker.controller.state&&await pA(Ll.serviceWorker.controller,"activate",t);const n={kind:"HELLO",port:s};Ll.serviceWorker.controller.postMessage(n,[s]),i.start(),this.Bp=i;try{const e=await pA(i,"message",t),s=e.data;if("HI_THERE"!==s.kind)throw new g("Could not set up message channel");this.rk=s.sessionId}catch(t){throw Je(t)&&this.oit(),t}}),t)}hit(t,e){return this.Bp,this.Yo.Qo((async()=>{if(!this.Bp)throw new g("MessageSession not set up yet or already closed.");e||(e=[]),this.Bp.postMessage(t,e);const i=await pA(this.Bp,"message");return i.data}))}ait(){return this.Yo.Qo((()=>this.oit()))}oit(){if(!Ll.serviceWorker.controller)return;if("activated"!==Ll.serviceWorker.controller.state)return;if(!this.Bp)return;const t={kind:"DESTROY_SESSION"};this.Bp.postMessage(t),this.Bp.close(),this.Bp=void 0}constructor(){this.Yo=new Su}};r();var FO=class{get uit(){return this.cit}dit(t,e){const i=t-e;this.cit=i>this.uit?this.cit:i}fit(t){this.cit=t}constructor(){this.cit=1/0}};r(),r(),r();var Qi=function(t){return t.vE="audio",t.mE="video",t.eW="metadata",t}({}),VO=class extends Co{get wR(){return void 0===this._it||void 0===this.vit?se.pB():new se([this._it,this.vit])}get kd(){return{Mk:this.dY}}get m3(){return Cl(this.dY,"audio")?ee.vE:Cl(this.dY,"video")?ee.mE:ee.iE}get jq(){return this.dY}get w3(){return se.pB()}get bj(){return 30}set bj(t){}get Ej(){return 30}set Ej(t){}A3(t,e){}S3(t,e){}RJ(){return this.mit}get va(){return this.git}get pit(){return this._it}get UO(){return this.vit}async T3(){}async F2(t,e){}async g2(t,e,i){if(t.Tw!==Ce.iJ)throw new g("Streaming or opaque segments are not supported yet.");const s=t.Kk,n=async()=>{const t=s.buffer,i={kind:BO.eit,mediaType:WO(this.dY),segment:s,startPts:e.wit,totalDuration:e.ct};if(await this.yit.hit(i,[t]),void 0===this._it){const t=e.wit+e.BV;this._it=t,this.vit=t}this.vit=this.vit+e.ct,this._o(new pe(oe.tJ))};return this.Yo.Qo((async t=>{J(t);try{this.git=!0,await n()}finally{this.git=!1}}),i)}async A2(t,e,i){if(t.Tw!==Ce.iJ)throw new g("Streaming or opaque initialization segments are not supported yet.");const s=t.Kk,n=async()=>{const t={kind:BO.tit,mediaType:WO(this.dY),segment:s};await this.yit.hit(t,[])};return this.Yo.Qo((async t=>{J(t);try{this.git=!0,await n()}finally{this.git=!1}}),i)}a3(){this.mit=!0}J2(){this.mit=!1}async eT(t,e,i){const s=async()=>{const t={kind:BO.sit,mediaType:WO(this.dY),endTime:e};await this.yit.hit(t),this._it=void 0,this.vit=void 0,this._o(new pe(oe.tJ))};return this.Yo.Qo((async t=>{J(t);try{this.git=!0,await s()}finally{this.git=!1}}),i)}dJ(t){return this.dY===t.Mk}_J(t){return this.dY=t.Mk,Promise.resolve()}async Xw(){this.Ro(),await this.Yo.yn()}constructor(t,e){super(),this.dY=t,this.yit=e,this._it=void 0,this.vit=void 0,this.Yo=new Su,this.git=!1,this.mit=!1}};function WO(t){return t.match(/video/)?Qi.mE:Qi.vE}var UO=class t{static Ait(e,i,s,n){const r=[];for(let t=0;t<e.g4.length;t++){const s=e.g4[t].Mk;r.push(new VO(s,i))}return new t(e,r,s,n)}Sit(){}get Tit(){return[this.u4,this.c4].filter(Bo)}get h4(){return this.u4}get wR(){return iM(this)}get kd(){return this.MT}get ct(){return 0}get RJ(){var t,e,i;const s=null==(i=null==(t=this.u4)?void 0:t.RJ())||i;var n;const r=null==(n=null==(e=this.c4)?void 0:e.RJ())||n;return s&&r}get hI(){return new se([0,1/0])}get a4(){return this.c4}async Xw(){await Promise.all([this.u4,this.c4].filter(Bo).map((t=>t.Xw())))}d4(t){}m4(t,e,i,s){}a3(){var t,e;null==(t=this.u4)||t.a3(),null==(e=this.c4)||e.a3()}J2(){var t,e;null==(t=this.u4)||t.J2(),null==(e=this.c4)||e.J2()}dJ(t){return!0}_J(t){return this.MT=t,Promise.resolve()}mJ(t){}async cJ(t,e){const i=await this.Nw.Dw(t.Ew,e),s=await i._T();return await this.lJ(s),s}async lJ(t){if(t&&!this.$T.src)throw new sr(Qa.CONTENT_PROTECTION_ERROR,"Attempted to attach MediaKeys to a sourceless MediaElement");if(!t&&this.$T.src)throw new sr(Qa.CONTENT_PROTECTION_ERROR,"Attempted to remove MediaKeys from a non-empty MediaElement");const e=this.uT;e&&(await e.dT(this.$T),this.uT=void 0),t&&(await t.kn(this.$T),this.uT=t)}constructor(t,e,i,s){this.uT=void 0,this.MT=t,this.c4=Fo(e,(t=>Boolean(t.jq.match(/video/)))),this.u4=Fo(e,(t=>Boolean(t.jq.match(/audio/)))),this.Nw=i,this.$T=s,this.Sit()}},GO=class extends Co{kit(){this.Het.addEventListener("timeupdate",this.Eit),this.Het.addEventListener("ended",this.xit),this.Het.addEventListener("timeupdate",this.Rit),this.Het.addEventListener("ratechange",this.Iit),this.Het.addEventListener("volumechange",this.Cit),this.Het.addEventListener("durationchange",this.Pit),this.Het.addEventListener("playing",this.Dit),this.Het.addEventListener("seeking",this.Nit),this.Het.addEventListener("play",this.Mit),this.Het.addEventListener("pause",this.Lit),this.Het.addEventListener("encrypted",this.f7)}Bit(){this.Het.removeEventListener("timeupdate",this.Eit),this.Het.removeEventListener("ended",this.xit),this.Het.removeEventListener("timeupdate",this.Rit),this.Het.removeEventListener("ratechange",this.Iit),this.Het.removeEventListener("volumechange",this.Cit),this.Het.removeEventListener("durationchange",this.Pit),this.Het.removeEventListener("playing",this.Dit),this.Het.removeEventListener("seeking",this.Nit),this.Het.removeEventListener("play",this.Mit),this.Het.removeEventListener("pause",this.Lit)}Oit(){this.B9.bn(Zc.iC,this.Ds)}Fit(){this.B9.vn(Zc.iC,this.Ds)}get jG(){return this.Het}get U4(){return!1}get ER(){return this.Het.currentTime+this.Vit.uit}get KR(){return this.Het.paused}get gI(){return this.Het.volume}set gI(t){this.Het.volume=t}get QR(){return this.Het.playbackRate}set QR(t){this.Het.playbackRate=t}get Wit(){return this.Het.defaultPlaybackRate}get wR(){var t,e;return null!=(e=null==(t=this.JG)?void 0:t.wR)?e:se.pB()}get Uit(){return se.Cn(this.Het.buffered)}get tI(){const t=this.Git;return this.Uo.tB(t.xb(this.Vit.uit))}get Git(){return se.Cn(this.Het.played)}get uI(){return this.cZ}get M4(){return!1}get X4(){return!1}get ct(){return this.Het.duration}get ZR(){return this.Het.muted}set ZR(t){this.Het.muted=t}get wet(){return this.Het.style}get qB(){return ol({},GD,{zB:!0})}Rb(t,e,i){this.r8.jw(),this.r8=new da,this.o8=js(this.h8(t,this.o8,this.r8.Uw),this.r8).catch(Tt)}async h8(t,e,i){var s;this.Uo=this.tI;const n=null==(s=this.JG)?void 0:s.Tit;if(!n)return;const r=_.max(...n.map((t=>t.pit?t.pit:1/0)));this.cZ=!0,this._o(new R(t)),await e.catch(Tt),J(i);try{for(this.Hit||this.Zit(),this.Het.load(),this.Xit||(this.zit=!1,await ou(this.Het.play(),i));this.rI<Ht.iO;)await this.B9.py(Zc.iC,i);this.qit.Vb(),this.Hit=!1,this.cZ=!1,this._o(new oa(this.ER))}catch(t){throw this.qit.Wb(t),t}finally{this.Yit(),this.Vit.fit(r)}}EI(){this.Xit=!0,this.Het.pause()}async xI(){this.Xit&&(this.Het.src||this.A7(),await this.qit.Ub,await this.Het.play())}async Xw(){this.yit&&this.yit.ait().catch(Tt),this.r8.jw(),this.Bit(),this.Fit(),this.B9.Xw(),this.Ro(),this.Hl.yn(),this.Ket.yn(),this.jet.yn()}async nr(){this.yit&&this.yit.ait().catch(Tt),this.r8.jw(),this.Het.removeAttribute("src"),this.Het.removeAttribute("x-webkit-wirelessvideoplaybackdisabled"),this.Het.removeAttribute("x-airplay-deny"),this.Het.disableRemotePlayback=!1,this.Het.load(),this.B9.nr(),this.Uo=se.pB()}A7(){this.y7||(qO(this.Het,Ms.Ys),this.b7=!0)}get rI(){return this.B9.rI}Zit(){const t=this.Het.getClientRects();let e;if(!(t.length>0))return;e=t[0];const i=e.width,s=this.Het.videoWidth/this.Het.videoHeight,n=e.height;let r,o;i/n>s?(r=n*s,o=n):(o=i/s,r=i),this.Het.style.width=r+"px",this.Het.style.height=o+"px",this.Het.style.marginLeft=(i-r)/2+"px",this.Het.style.marginTop=(n-o)/2+"px",this.Het.style.backgroundColor="black"}Yit(){this.Het.style.width="100%",this.Het.style.height="100%",this.Het.style.marginLeft="",this.Het.style.marginTop="",this.Het.style.backgroundColor=""}get dI(){return this.Het.videoHeight}get vI(){return this.Het.videoWidth}get PR(){return this.Het.ended}get Ti(){return this.Het.offsetHeight*Ms.Ys.Kg}get ji(){return this.Het.offsetWidth*Ms.Ys.Kg}get WR(){return!1}get y7(){return this.b7}get bR(){}get Hu(){return this.Kit}get lt(){}get Sa(){return this.qet}get fH(){return this.ta}get hI(){return this.JG?this.JG.hI:se.pB()}get $G(){}get nt(){return this.Hl}get Wl(){return this.wZ}get AI(){return!1}set AI(t){}lH(t,e,i,s,n){}OI(t,e,i,s,n,r,o,h,a){const u=new Yi(t,e,i,s,n,r,o,a,h);return this.Hl.tt(u),this.b8.tt(u),u}_H(t){throw g("Not supported.")}MJ(t){}HR(){return SD(this.Het)}get G9(){return"block"===this.Het.style.display}ge(){this.Het.style.display="block",this.Ket.ge()}be(){this.Het.style.display="none",this.Ket.be()}p7(){}async $n(t){if(t.Tw===In.pW)throw new g("Not yet implemented");await this.yit.rit();const e=Fo(t.sH,(t=>t.cT.Tw===ue.Aw)),i={kind:BO.$et,mediaBufferConfigs:t.g4.map((t=>t.Mk)),fairPlaySdkUri:null==e?void 0:e.WU};return await this.yit.hit(i),this.JG=UO.Ait(t,this.yit,this.Nw,this.Het),this.vJ.$n(this.JG,t),this.Het.setAttribute("x-webkit-airplay","deny"),this.Het.setAttribute("x-webkit-wirelessvideoplaybackdisabled",""),this.Het.disableRemotePlayback=!0,this.Het.preload="none",this.Het.src="https://theo.proxy/"+this.yit.rk+"/master.m3u8",this.JG}w7(){}mW(t){this.Hl.it(t),this.b8.it(t)}vH(){for(const t of this.Hl.lC.slice())t.yn();this.Hl.nr()}zG(t){}uH(){return!1}S7(t){t.appendChild(this.Het),this.Ket.S7(t)}TI(){return this.Het}get wH(){return this.vJ.wH}set wH(t){this.vJ.wH=t}get T7(){}set T7(t){}get h9(){}NI(){}constructor(t,e,i,s){super(),this.Hit=!0,this.yit=new OO,this.Vit=new FO,this.Xit=!0,this.qit=new os,this.cZ=!1,this.o8=Promise.resolve(),this.r8=new da,this.zit=!0,this.Uo=se.pB(),this.b7=!1,this.Eit=()=>{this.KR||this.Uit.V<=0||this.wR.V<=0||this.Vit.dit(this.wR.Tn(this.wR.V-1),this.Uit.Tn(this.Uit.V-1))},this.xit=()=>{this._o(new Xs(this.ER))},this.Rit=()=>{this._o(new Al(this.ER,this.bR))},this.Iit=()=>{this._o(new ju(this.ER,this.QR))},this.Cit=()=>{this._o(new ns(this.ER,this.gI))},this.Pit=()=>{this._o(new $s(this.ct))},this.Dit=()=>{this._o(new ko(this.ER))},this.Nit=()=>{this.Rb(this.ER)},this.Mit=async()=>{this.zit&&this._o(new $(this.ER)),this.Xit=!1,this.zit=!0},this.Lit=()=>{this.Xit=!0,this._o(new ul(this.ER))},this.f7=t=>{const e=t.initDataType;var i;const s=null!=(i=t.initData)?i:new ArrayBuffer(0);this._o(new cg(e,s))},this.Het=t,this.B9=new Za(this),this.Kit=i,this.wZ=s,this.Het.playsInline=!0,this.Het.style.width="100%",this.Het.style.height="100%",this.kit(),this.Oit(),this.qet=MO(this.Het),this.ta=new NO(this.Het),this.vJ=new Ee(this),this.Nw=e,this.Hl=new Wo,this.b8=new su(this),this.Ket=new dB,this.jet=new DO(this.Ket.we,this.Hu,this.nt,this.Wl,this.Sa,this.fH)}},HO=[ee.vE,ee.mE];function ZO(t){const e=h.createElement(t);return Ur(e)&&e.addEventListener("contextmenu",YO),zO(e),e}function XO(t){zO(t),t.removeEventListener("contextmenu",YO)}function zO(t){t.removeAttribute("id"),t.removeAttribute("class"),t.removeAttribute("style"),Sh(t),Wd(t),t.pause(),t.playbackRate=1,t.disableRemotePlayback=!1,t.preload=el.JB,t.controls=!1,t.style.display="none",Ur(t)&&(t.style.width="100%",t.style.height="100%",t.style.pointerEvents="none",t.playsInline=!0,t.setAttribute("webkit-playsinline",""))}function qO(t,e){if(e.mp){const e=t.muted;t.muted=!0,t.muted=!1,t.muted=e}else if(t.paused){const e=t.play();yt(e)&&ah(e),t.pause()}}function YO(t){t.preventDefault()}r(),r();var KO=class{Qk(t){return this.fW.Qk(t)}NE(t){this.fW.NE(t)}yn(){this.fW.yn()}constructor(t){this.fW=t}},jO=class extends KO{Qk(t){const e=new wt(t),i=this.gZ.cj.SG(e);return i?this.jit(e,i):this.fW.Qk(e)}async jit(t,e){e.dj(Ms.Wg()/1e3);const i=await this.fW.Qk(t);let s;e._j(Ms.Wg()/1e3),s=i.Vk?i.Nk().pipeThrough(new _a(new QO(e))):i.Dk().then((t=>{const i=Ms.Wg()/1e3;return e.vj(i,new j(t)),e.mj(i),t}));const n={Kk:s,Qk:i.Qk};return new Vb(n,i)}constructor(t,e){super(t),this.gZ=e}},QO=class{start(t){this.FQ=t}transform(t){this.Qit.vj(Ms.Wg()/1e3,t),this.FQ.enqueue(t)}flush(){this.Qit.mj(Ms.Wg()/1e3)}constructor(t){this.Qit=t}};function JO(t){return{get ratio(){return t.Vo},get thresholds(){return t.Jit.slice()}}}function $O(t){const e=[],i=_.floor(1/t);if(S(i))return[];for(let s=0;s<=i;s++){const i=Ns(s*t,0,1);e.push(i)}return e}r(),r(),r();var tF=class{get Vo(){return this.$it}get Jit(){return this.tst}ist(t){return e=>{const i=e[e.length-1];this.$it=i.intersectionRatio,t(i.intersectionRatio)}}get wa(){return this.eu||(this.eu=JO(this)),this.eu}RI(){this.sst.disconnect()}constructor(t,e,i){this.$it=1,this.eu=void 0,this.tst=$O(e);const n=this.ist(i);this.sst=new s.IntersectionObserver(n,{root:null,threshold:this.tst}),this.sst.observe(t)}},eF=class{get Vo(){return this.$it}get Jit(){return this.tst}get wa(){return this.eu||(this.eu=JO(this)),this.eu}nst(t){this.$it=t;const e=this.tst;let i=0;if(t>0)for(;i<e.length&&e[i]<=t;)++i;this.rst!==i&&(this.rst=i,this.ost(t))}constructor(t,e){this.$it=1,this.rst=-1,this.eu=void 0,this.tst=$O(t),this.ost=e}},iF=class extends eF{hst(){const t=this.po.getBoundingClientRect();return Ns(_.max(0,_.min(s.innerWidth,t.right)-_.max(0,t.left))*_.max(0,_.min(s.innerHeight,t.bottom)-_.max(0,t.top))/(t.width*t.height),0,1)}RI(){s.removeEventListener("scroll",this.ast)}constructor(t,e,i){super(e,i),this.ast=Qr((()=>this.nst(this.hst())),50),this.po=t,s.addEventListener("scroll",this.ast,!!RP&&{passive:!0}),li((()=>this.nst(this.hst())))}},sF=.1,nF=class{get ust(){return this.cst}get Oo(){return this.lst}set Oo(t){if(S(t)||t<0||t>1)throw new RangeError("The threshold must be a value between 0 and 1");this.lst=t}get wa(){return this.eu||(this.eu=function(t){return{get ratio(){return t.ust},get visible(){return t.ust>t.Oo},get visibleThreshold(){return t.Oo},set visibleThreshold(e){e=eo(e),t.Oo=e},addObserver:(e,i)=>(e=eo(e),t.Io(e,i).wa),removeObserver(e){let i=t.dst(e);i&&t.Do(i)}}}(this)),this.eu}fst(t){return e=>{this.cst=e,null==t||t(this.cst)}}Io(t,e){if(S(t))throw new b("step is not of the right type");if(t>1||t<=0)throw new RangeError("The step must be a number greater than 0 and smaller than or equal to 1");let i;return i="function"==typeof s.IntersectionObserver?new tF(this.po,t,this.fst(e)):new iF(this.po,t,this.fst(e)),this._st.push(i),i}Do(t){t.RI(),we(this._st,t)}dst(t){for(const e of this._st)if(e.wa===t)return e}yn(){for(const t of this._st)t.RI();En(this._st)}constructor(t){this.cst=1,this.lst=0,this._st=[],this.eu=void 0,this.po=t,this.Io(.1,this.fst())}};r();var rF=class extends pe{constructor(){super(Ti.Ry)}},oF=class extends sn{get vst(){return this.gZ}get SO(){return this.mst}set SO(t){this.mst=t,this.Ta.SO=t}get gst(){return this.pst}get ht(){return this.Ta.ht}get Iz(){return this.wst}get Hu(){return this.yst}get OR(){return this.Ta.OR}get GR(){return this.bst}get XX(){return this.Ast}get nt(){return this.Ta.nt}get Wl(){return this.wZ}get rt(){return this.Ta.rt}get wR(){return this.yR()}yR(){return this.Ta.wR}get Sst(){return this.Hj}get iQ(){return this.sQ}get ER(){return this.xR()}set ER(t){this.RR(t)}xR(){return this.Ta.ER}RR(t,e){this.Ta.RR(t,e)}Tst(){return this.xR()}get bR(){return this.Ta.bR}set bR(t){this.Ta.bR=t}get bt(){return this.Ta.bt}get ct(){return this.jd()}jd(){return this.Ta.ct}get we(){return this.Ta.we}get PR(){return this.Ta.PR}get lt(){return this.NR()}NR(){return this.Ta.lt}get MR(){return this.LR()}LR(){return this.Ta.MR}get Sa(){return this.Ta.SI()}get fH(){return this.Ta.ja()}get AI(){return this.Ta.AI}set AI(t){this.Ta.AI=t}get ZR(){return this.Ta.ZR}set ZR(t){const e=Boolean(t);this.zR(e)}zR(t){this.Ta.ZR=t,t||this.KR||this.kI()}get KR(){return this.Ta.KR}get QR(){return this.JR()}set QR(t){this.$R(t)}JR(){return this.Ta.QR}$R(t){this.Ta.QR=t}get tI(){return this.eI()}eI(){return this.Ta.tI}get iI(){return this.Ta.iI}set iI(t){this.Ta.iI=t}get rI(){return this.Ta.rI}get hI(){return this.aI()}aI(){return this.Ta.hI}get uI(){return this.Ta.uI}get IC(){return this.IO}get dI(){return this.Ta.dI}get vI(){return this.Ta.vI}get gI(){return this.Ta.gI}set gI(t){const e=Ns(Number(t),0,1)||0;this.wI(e)}get yI(){return this.pZ}wI(t){this.Ta.gI=t}Aa(){Yc(this,qI,this)}xI(){this.Ta.xI()}EI(){this.Ta.EI()}iu(){return this.sZ}async Ca(t,e){if(this.sZ=t,t){this.kst.gq(t).catch(this.Est);const i=function(t){t.sources;const e=t.sources.filter((t=>pd(t.integration)));0;return t.sources=e,t}(t);await this.Ta.Ca(i,e)}}kI(){if(this.mo)return;this.Ta.kI(),this.pst.kI();const t=this.we.getElementsByTagName("video");for(let e=0;e<t.length;e++){const i=t[e];"Advertisement"===i.title&&qO(i,Ms.Ys)}this.mo=!0}cs(){return this.xst.Ho()===Nu.FULLSCREEN}ge(){this.Ta.ge()}be(){this.Ta.be()}TI(){return this.Ta.TI()}NI(){this.Ta.NI()}MI(){this.Ta.MI()}OI(t){return this.Ta.OI(t)}async RI(){this.sZ=void 0,await this.Ta.RI(),await this.Ta.nr()}async yn(){this._o(new rF),this.Ro(),this.wst.yn(),this.fR.yn(),this.Ast.yn(),this.Rst.yn(),this.Ist.yn(),this.xst.yn(),this.yst.yn(),this.Cst.yn(),this.pst.yn(),this.mZ.yn(),await this.Ta.yn()}constructor(t,e,i){super(),this.mst=!1,this.mo=!1,this.sZ=void 0,this.Pst=!1,this.Ma=void 0,this.Est=t=>{if(this.Pst)return;this.Pst=!0;const e=this.Dst,i=gn(t);this.Ta.vC=new MI(this.we,i,t),ah(e.yn())},this.Nst=t=>{t.type!==Ti.Xy&&t.type!==Ti.Zy&&this._o(t)};const s=eo(e.uid);S(s)?this.IO=_k++:this.IO=s,this.kd=e;const n=Ms.fR,r=new ND;this.Cst=new gP("9.3.1",n,r),this.gZ=new _D,this.pZ=new _I;const o=new jO(n,this.gZ);this.fR=new iD(o,e.allowMixedContent),this.CQ=null!=i?i:new KC(e.isEmbeddable,"9.3.1",HC()),this.kst=new DD(n,this.CQ,this.Cst,r,e,HC()),this.kst.kQ().catch(this.Est),this.yst=new MP(t),this.yst.bn(nu.mn,this.Ds),this.wZ=new VD,this.Hj=new pD,this.sQ=new yD;const h=new NI(t,e,this.fR,this.gZ,this.pZ,this.yst,this.wZ);this.gZ.xj(h);let a=h;a=new wD(a,this.Sst),a=new bD(a,this.iQ),this.Dst=a,this.Ta=new rk(this.Dst),this.Ta.oy(this.Nst),this.bst=new AD(this.Ta),this.Ast=new rD(this.Ta,this.fR,this.gZ),this.Rst=new AP(this),this.Ist=new WP(this.Ta,e.allowNativeFullscreen),this.xst=new zP(this.Ist,this.Ta.ja()),this.yst.kn(),this.Eo=new nF(t),this.mZ=new Ao(this.yst,this.wZ,1,[ee.mE]),this.pst=new TI(this.mZ),this.wst=new ED}};r(),r();var ic=class extends sn{get vst(){return this.Mst()}Mst(){return this.na.vst}get zc(){return this.Lst()}Lst(){return this.na.zc}get Cst(){return this.na.Cst}get gst(){return this.Bst()}Bst(){return this.na.gst}get SO(){return this.na.SO}set SO(t){this.na.SO=t}get Rst(){return this.na.Rst}get Iz(){return this.na.Iz}get Sst(){return this.na.Sst}get kd(){return this.na.kd}get Hu(){return this.na.Hu}get Sa(){return this.SI()}SI(){return this.na.Sa}get fH(){return this.ja()}ja(){return this.na.fH}get fR(){return this.na.fR}get yI(){return this.na.yI}get kst(){return this.na.kst}get iQ(){return this.na.iQ}get XX(){return this.na.XX}get xst(){return this.na.xst}get yst(){return this.na.yst}get Ta(){return this.na.Ta}get Wl(){return this.na.Wl}get Ost(){return this.Fst()}Fst(){return this.na.Ost}get Vst(){return this.Wst()}Wst(){return this.na.Vst}get IC(){return this.na.IC}get Eo(){return this.na.Eo}get ht(){return this.mR()}mR(){return this.na.ht}yR(){return this.na.yR()}get bR(){return this.AR()}set bR(t){this.SR(t)}AR(){return this.na.bR}SR(t){this.na.bR=t}get bt(){return this.kR()}kR(){return this.na.bt}xR(){return this.na.xR()}RR(t,e){this.na.RR(t,e)}Tst(){return this.na.Tst()}jd(){return this.na.jd()}get we(){return this.IR()}IR(){return this.na.we}get PR(){return this.DR()}DR(){return this.na.PR}NR(){return this.na.NR()}LR(){return this.na.LR()}get OR(){return this.FR()}FR(){return this.na.OR}get AI(){return this.na.AI}set AI(t){this.na.AI=t}get GR(){return this.HR()}HR(){return this.na.GR}get ZR(){return this.XR()}set ZR(t){this.zR(t)}XR(){return this.na.ZR}zR(t){this.na.zR(t)}get KR(){return this.jR()}jR(){return this.na.KR}get QR(){return this.JR()}set QR(t){this.$R(t)}JR(){return this.na.QR}$R(t){this.na.QR=t}eI(){return this.na.eI()}get iI(){return this.sI()}set iI(t){this.nI(t)}sI(){return this.na.iI}nI(t){this.na.iI=t}get rI(){return this.oI()}oI(){return this.na.rI}get Ma(){return this.na.Ma}set Ma(t){this.na.Ma=t}aI(){return this.na.aI()}get uI(){return this.cI()}cI(){return this.na.uI}get nt(){return this.lI()}lI(){return this.na.nt}get dI(){return this.fI()}fI(){return this.na.dI}get rt(){return this._I()}_I(){return this.na.rt}get vI(){return this.mI()}mI(){return this.na.vI}get gI(){return this.pI()}set gI(t){this.wI(t)}pI(){return this.na.gI}wI(t){this.na.wI(t)}kI(){this.na.kI()}EI(){this.na.EI()}xI(){this.na.xI()}ge(){this.na.ge()}be(){this.na.be()}cs(){return this.na.cs()}TI(){return this.na.TI()}NI(){this.na.NI()}MI(){this.na.MI()}OI(t){return this.na.OI(t)}Aa(){this.na.Aa()}iu(){return this.na.iu()}Ca(t,e){return this.na.Ca(t,e)}RI(){return this.na.RI()}BI(t){return!1}eZ(){this.Ust&&this.na.oy(this.FI)}iZ(){this.Ust&&this.na.gy(this.FI)}async yn(t){this.Ro(),t||await this.na.yn(),this.iZ()}constructor(t,e){super(),this.FI=t=>{this.BI(t)||this._o(t)},this.na=t,this.Ust=!e,this.eZ()}},rh=function(t){return t[t.au=0]="au",t[t.Gst=1]="Gst",t[t.$C=2]="$C",t[t.Hst=3]="Hst",t[t.Zst=4]="Zst",t[t.Xst=5]="Xst",t}({}),hF=[0,1,2,3,4,5],aF={};function Dh(t,e){(aF[e]||(aF[e]=[])).push(t)}var uF={};function cF(t,e){(uF[e]||(uF[e]=[])).push(t)}var lF=[];function dF(t){for(const e of lF)e(t)}r();var fF=self.CustomEvent;var _F=function(){try{const t=new fF("cat",{detail:{foo:"bar"}});return"cat"===t.type&&"bar"===t.detail.foo}catch(t){}return!1}()?function(t,e){return new CustomEvent(t,e)}:function(t,e){const i=h.createEvent("CustomEvent");return i.initCustomEvent(t,(null==e?void 0:e.bubbles)||!1,(null==e?void 0:e.cancelable)||!1,null==e?void 0:e.detail),i};r();var vF=new class{get V(){return this.yO.length}get wa(){var t;return null!=(t=this.eu)?t:this.eu=function(t){const e=[];for(let i=0;i<t.V;i++)e[i]=t.fC(i).wa;return e.getPlayerByUID=e=>{const i=t.zst(e);return i&&i.wa},e}(this)}fC(t){return this.yO[t]}jJ(t){this.yO.push(t),this.wa.push(t.wa)}eT(t){const e=this.yO.indexOf(t);e<0||(uu(this.yO,e),this.eu&&uu(this.eu,e))}zst(t){for(const e of this.yO)if(e.IC===t)return e}constructor(){this.yO=[],this.eu=void 0}};function mF(t){let e,i;const s=e=>{i=e;const s=_c(e,t.kd);t.Ca(s)};let n={get abr(){return t.vst.wa},get ads(){var e;return null==(e=t.zc)?void 0:e.wa},get audioTracks(){return t.ht.wa},get autoplay(){return t.SO},set autoplay(e){t.SO=Boolean(e)},get buffered(){return t.yR()},get canvas(){return t.Rst.wa},get cast(){var e;return null==(e=t.Iz)?void 0:e.wa},get clip(){return t.Sst.wa},get currentProgramDateTime(){var e;return null!=(e=t.bR)?e:null},set currentProgramDateTime(e){t.bR=null!=e?e:void 0},get currentTime(){return t.xR()},set currentTime(e){t.RR(Number(e))},get duration(){return t.jd()},get element(){return t.we},get ended(){return t.PR},get error(){return t.NR()},get errorObject(){return t.LR()},get loop(){return t.iQ.iQ},set loop(e){t.iQ.iQ=Boolean(e)},get metrics(){return t.GR.wa},get muted(){return t.ZR},set muted(e){t.zR(e)},get network(){return t.XX.wa},get paused(){return t.KR},get playbackRate(){return t.QR},set playbackRate(e){const i=Number(e);if(i<0)throw new RangeError("playbackRate must be a positive number");t.QR=i},get played(){return t.eI()},get poster(){return t.mi},set poster(e){t.mi=hs(e)},get preload(){return t.iI},set preload(e){t.iI=function(t){switch(t){case"auto":case"":return"auto";case"metadata":return"metadata";default:return"none"}}(e)},get presentation(){return t.xst.wa},get readyState(){return t.rI},get seekable(){return t.aI()},get seeking(){return t.uI},get source(){return i},set source(t){s(t)},get src(){return bC(t.iu())},set src(t){s({sources:t})},get textTracks(){return t.nt.wa},get textTrackStyle(){return t.Wl.wa},get theoLive(){return t.Ost},get uid(){return t.IC},get videoHeight(){return t.dI},get videoTracks(){return t.rt.wa},get videoWidth(){return t.vI},get visibility(){return t.Eo.wa},get volume(){return t.gI},set volume(e){t.wI(Number(e))},get latency(){return t.yI.wa},get theoads(){return t.Vst},destroy(){t.yn(),t=null,i=void 0},play(){t.qst()},pause(){t.EI()},stop(){i=void 0,t.RI()},prepareWithUserAction(){t.kI()},addEventListener(t,i){e.bn(t,i)},removeEventListener(t,i){e.vn(t,i)},setSource(t){s(t)},addTextTrack:e=>t.OI(function(t){return{Lt:hs(t.kind),Ch:hs(t.label),gs:hs(t.language),Tw:hs(t.type)}}(e)).wa};return e=new Ju(n,!0),e.ru(t),e.bn("destroy",(()=>{e.yn()})),n}r(),r(),r(),r();var gF=class extends pe{constructor(t){super(Ti.uo),this.source=t}};r();var pF=class extends sn{get bR(){}set bR(t){}get ER(){return this.xR()}set ER(t){this.RR(t)}xR(){return this.uZ}Tst(){return this.xR()}RR(t,e){this.cZ&&this.uZ===t||(this.uZ=t,this.cZ=!0,this._o(new R(this.uZ)))}get KR(){return this.dZ}get QR(){return this.fZ}set QR(t){this.fZ!==t&&(this.fZ=t,this._o(new ju(this.uZ,this.QR)))}get rI(){return Ht.eO}get uI(){return this.cZ}xI(){this.dZ&&(this.dZ=!1,this._o(new $(this.uZ)),this._o(new za(this.uZ)))}EI(){this.dZ||(this.dZ=!0,this._o(new Al(this.uZ,this.bR)),this._o(new ul(this.uZ)))}nr(){this.uZ=0,this.cZ=!1,this.fZ=1,this.EI()}yn(){this.Ro()}be(){}ge(){}constructor(){super(),this.uZ=0,this.dZ=!0,this.cZ=!1,this.fZ=1}};r();var wF={zIndex:"1",display:"inline-block",verticalAlign:"middle",backgroundRepeat:"no-repeat",backgroundPosition:"50% 50%",backgroundSize:"contain",cursor:"pointer",margin:"0",padding:"0",position:"absolute",top:"0",right:"0",bottom:"0",left:"0",height:"100%"},yF={visibility:"hidden"},bF={visibility:"visible"},AF=class{get Xu(){return void 0!==this.Yst?this.Yst:void 0!==this.Kst?this.Kst:void 0}set jst(t){this.Kst=t,this.ir()}ir(){const t=this.na.KR,e=this.Qst;this.Xu?this.Vs.style.backgroundImage='url("'+Cm(this.Xu)+'")':this.Vs.style.backgroundImage="",t&&this.Xu&&!e?this.ge():this.be()}ge(){Nd(yF,this.na.we),Nd(bF,this.Vs)}be(){Nd(yF,this.Vs),Nd(bF,this.na.we)}eZ(){this.na.bn(Ti.uo,this.Jst),this.na.bn(Ti.ho,this.BW)}yn(){this.na.vn(Ti.uo,this.Jst),this.na.vn(Ti.ho,this.BW),ze(this.Vs)}constructor(t){this.Qst=!1,this.Jst=t=>{var e;this.Qst=!this.na.KR,this.Yst=null==(e=t.source)?void 0:e.poster,this.ir()},this.BW=()=>{this.Qst=!0,this.be()},this.na=t,this.eZ(),this.Vs=function(){let t=s&&s.document&&s.document.createElement("div");return t.className="theoplayer-poster",Nd(wF,t),t}(),t.we.appendChild(this.Vs)}};r(),r(),r(),r();var Ca=function(t){return t[t.$st=0]="$st",t[t.tnt=1]="tnt",t}({});function SF(t){let e;const i={get playing(){return t.Vc},get currentAds(){return t.ent.map((t=>t.int()))},get currentAdBreak(){var e,i;return null!=(i=null==(e=t.snt)?void 0:e.int())?i:null},get scheduledAds(){return t.nnt.map((t=>t.int()))},get scheduledAdBreaks(){return t.rnt.map((t=>t.int()))},skip(){t.MD()},schedule(e){let i=IC(e,yh.Vg);i?t.g6(i,Ca.$st,!1):console.error("Invalid ad description")},registerServerSideIntegration(e,i){t.ont(e,i)},addEventListener(t,i){e.bn(t,i)},removeEventListener(t,i){e.vn(t,i)}};return e=new rt(t,i),i}var TF=class extends sn{get Vc(){return!!this.Oc&&this.Oc.Vc}get ent(){return this.Oc?this.Oc.ent:[]}get snt(){return this.Oc?this.Oc.snt:null}get nnt(){return this.Oc?this.Oc.nnt:[]}get rnt(){return this.Oc?this.Oc.rnt:[]}g6(t,e,i){var s;null==(s=this.Oc)||s.g6(t,e,i)}hnt(t){var e;null==(e=this.Oc)||e.hnt(t)}MD(){var t;null==(t=this.Oc)||t.MD()}ant(t){var e;null==(e=this.Oc)||e.ant(t)}ont(t,e){var i;null==(i=this.Oc)||i.ont(t,e)}get wa(){var t;return null!=(t=this.eu)?t:this.eu=SF(this)}async yn(t){this.Ro(),void 0!==this.Oc&&(this.Oc.gy(this.Ds),t||await this.Oc.yn(),this.Oc=void 0)}constructor(t){var e;super(),this.eu=void 0,this.Oc=t,null==(e=this.Oc)||e.oy(this.Ds)}};r(),r();var mo=class extends Ds{constructor(t,e){super(t),this.sd=e}},ss=class extends pe{get ad(){return this.adBreak}constructor(t,e){super(t),this.adBreak=e}},Au=class extends mo{ka(){return new kF(this.sd.int())}constructor(t){super("unt",t)}},kF=class extends ss{constructor(t){super("removeadbreak",t)}};r();var EF=class extends mo{ka(){return new xF(this.sd.int())}constructor(t){super("cnt",t)}},xF=class extends ss{constructor(t){super("addadbreak",t)}};r(),r();var Da=class extends Ds{constructor(t,e){super(t),this.lnt=e}},Ka=class extends pe{constructor(t,e){super(t),this.ad=e}},Uu=class extends Da{ka(){return new RF(this.lnt.int())}constructor(t){super("dnt",t)}},RF=class extends Ka{constructor(t){super("addad",t)}};r();var Hh=class extends mo{ka(){return new IF(this.sd.int())}constructor(t){super("fnt",t)}},IF=class extends ss{constructor(t){super("adbreakend",t)}};r();var Ua=class extends mo{ka(){return new CF(this.sd.int())}constructor(t){super("_nt",t)}},CF=class extends ss{constructor(t){super("adbreakbegin",t)}};r();var cn=class extends Da{ka(){return new PF(this.lnt.int(),this.currentTime)}constructor(t,e){super("vnt",t),this.currentTime=e}},PF=class extends Ka{constructor(t,e){super("adbegin",t),this.currentTime=e}};r();var xn=class extends Da{ka(){return new DF(this.lnt.int(),this.currentTime)}constructor(t,e){super("mnt",t),this.currentTime=e}},DF=class extends Ka{constructor(t,e){super("adend",t),this.currentTime=e}};r();var Ue=class extends Ds{ka(){return new NF}constructor(){super("gnt")}},NF=class extends pe{constructor(){super("adadded")}},MF=class extends TF{get vC(){return this.Oc}set vC(t){const e=this.Oc;if(e===t)return;const i=this.ent,s=this.snt,n=this.nnt,r=this.rnt;null==e||e.gy(this.Ds),this.Oc=t,null==t||t.oy(this.Ds);const o=this.ent,h=this.snt,a=this.nnt,u=this.rnt,c=[];let l=!1;for(const t of r)ms(u,t)||c.push(new Au(t));for(const t of u)ms(r,t)||c.push(new EF(t));for(const t of a)ms(n,t)||(c.push(new Uu(t)),l=!0);l&&c.push(new Ue),s!==h&&(s&&c.push(new Hh(s)),h&&c.push(new Ua(h)));for(const t of i)ms(o,t)||c.push(new xn(t,this.na.xR()));for(const t of o)ms(i,t)||c.push(new cn(t,this.na.xR()));for(const t of c)this._o(t)}constructor(t){super(void 0),this.na=t}};r(),r();var LF=class extends sn{get wa(){var t;return null!=(t=this.eu)?t:this.eu=SF(this)}ant(t){}ont(t,e){}g6(t,e,i){}MD(){}hnt(t){}yn(){return this.Ro(),Promise.resolve()}constructor(...t){super(...t),this.Vc=!1,this.snt=null,this.ent=[],this.rnt=[],this.nnt=[],this.eu=void 0}},Re=class extends LF{g6(t,e,i){this.pnt.push({wnt:t,ynt:e,bnt:i})}MD(){}ant(t){}ont(t,e){this.Ant.push({hP:t,Snt:e})}hnt(t){const e=this.Ant.slice(),i=this.pnt.slice();this.nr();for(const i of e)t.ont(i.hP,i.Snt);for(const e of i)t.g6(e.wnt,e.ynt,e.bnt)}Tnt(){const t=this.pnt.map((t=>t.wnt));return this.nr(),t}nr(){En(this.Ant),En(this.pnt)}async yn(){this.nr(),await super.yn()}constructor(...t){super(...t),this.Ant=[],this.pnt=[]}};r();var BF,OF=class extends pe{constructor(t){super("tizen2retry"),this.originalErrorEvent=t}};function FF(){if(!BF){let t=oF;t=function(t){return class extends ic{constructor(e,i){let s=new t(e,i);for(const t of hF)if(uF[t])for(const e of uF[t])s=e(s);super(s)}}}(t);let e=function(t){return class extends sn{get Cst(){return this.knt.Cst}get zc(){return this.Oc}get Rst(){return this.knt.Rst}get kd(){return this.knt.kd}get fR(){return this.knt.fR}get Sa(){return this.knt.Sa}get fH(){return this.knt.fH}get xst(){return this.knt.xst}get yst(){return this.knt.yst}get Ta(){return this.knt.Ta}get vst(){return this.knt.vst}get SO(){return this.knt.SO}set SO(t){this.knt.SO=t,this.Ent()}get gst(){return this.knt.gst}get ht(){return this.knt.ht}get Iz(){return this.knt.Iz}get Hu(){return this.knt.yst}get wa(){return this.eu||(this.eu=this.ka()),this.eu}get OR(){return this.knt.OR}get AI(){return this.knt.AI}set AI(t){this.knt.AI=t}get GR(){return this.knt.GR}get XX(){return this.knt.XX}get nt(){return this.knt.nt}get Wl(){return this.knt.Wl}get rt(){return this.knt.rt}get Sst(){return this.knt.Sst}get iQ(){return this.knt.iQ}get bR(){return this.na.bR}set bR(t){this.na.bR=t}get bt(){return this.knt.bt}get we(){return this.knt.we}get PR(){return this.knt.PR}get ZR(){return this.knt.ZR}set ZR(t){this.zR(t)}get KR(){return this.na.KR}get mi(){return this.xnt.Xu||""}set mi(t){this.xnt.jst=t}get QR(){return this.JR()}set QR(t){this.$R(t)}JR(){return this.knt.QR}$R(t){this.na.QR=t}get iI(){return this.knt.iI}set iI(t){this.knt.iI=t}get rI(){return this.na.rI}get Ma(){return this.knt.Ma}set Ma(t){this.knt.Ma=t}get uI(){return this.na.uI}get Ost(){return this.knt.Ost}get Vst(){return this.knt.Vst}get IC(){return this.knt.IC}get dI(){return this.knt.dI}get vI(){return this.knt.vI}get gI(){return this.knt.gI}set gI(t){this.wI(t)}get yI(){return this.knt.yI}get kst(){return this.knt.kst}get Eo(){return this.knt.Eo}async Qo(t,e){return this.Yo.Qo(t,e).catch(yu)}async Rnt(t,e){J(e),this.knt.oy(this.Int);try{await this.knt.Ca(t,e)}finally{this.knt.gy(this.Int)}}async Ent(){const t=await this.Cnt();this.Pnt(t)}async Cnt(){const t=this.iu();return t&&!gC(t)&&this.SO&&this.KR?this.gst.Dnt(this.ZR):"none"}Pnt(t){var e;const i=(null==(e=this.iu())?void 0:e.mutedAutoplay)||this.kd.mutedAutoplay;switch(t){case"all":this.qst();break;case"muted":(this.ZR||i===YT.ALL)&&(this.ZR=!0,this.xI())}}Ca(t){gC(this.sZ)||this._o(new Ys(0,Ht.eO)),this.nr(),this.sZ=t,ah(this.Qo((async e=>{J(e);try{await this.Rnt(t,e)}catch(t){return th(t),this.sZ=void 0,void this.BH(zy(t,Qa.SOURCE_NOT_SUPPORTED))}finally{this.Nnt(this.knt)}const i=await this.Cnt();this._o(new gF(this.iu())),this.Pnt(i)})))}RR(t,e){this.na.RR(t,e)}NR(){var t;return null!=(t=this.TZ)?t:this.knt.NR()}LR(){var t;return null!=(t=this.YG)?t:this.knt.LR()}BH(t){void 0===this.LR()&&(this.YG=t,this.TZ=gn(t),this._o(new Na(t)))}xI(){this.na.xI()}qst(){this.ZR||this.kI(),this.xI()}kI(){this.knt.kI()}EI(){this.na.EI()}RI(){this.Ca(void 0)}ge(){this.hZ=!0,this.na.ge()}be(){this.hZ=!1,this.na.be()}Aa(){this.knt.Aa()}wI(t){this.knt.wI(t)}zR(t){this.knt.zR(t)}Pa(t){this.Mnt=t,t.jJ(this)}cs(){return this.knt.cs()}iu(){return this.sZ}TI(){return this.knt.TI()}xR(){return this.na.xR()}Tst(){return this.na.Tst()}jd(){return this.knt.jd()}yR(){return this.knt.yR()}eI(){return this.knt.eI()}aI(){return this.knt.aI()}NI(){this.knt.NI()}MI(){this.knt.MI()}OI(t){return this.knt.OI(t)}nr(){this.sZ=void 0,this.YG=void 0,this.TZ=void 0,this.Lnt=!0,En(this.Bnt),this.Ont.nr(),this.Nnt(this.Ont),this.Yo.jw(),ah(this.Yo.Qo((async t=>{J(t),await this.knt.RI()})))}yn(){this._o(new rF),this.xnt.yn(),this.iZ(),this.nr(),ah(this.Qo((async()=>{await this.knt.yn(),this.Mnt&&(this.Mnt.eT(this),this.Mnt=void 0),this.Yo.yn()}))),this.Ro()}Nnt(t){if(this.na===t)return;const e=this.na.KR,i=this.na.xR(),s=this.na.QR,n=this.na.rI,r=this.na.uI;this.Fnt=e,this.k7=n,this.iZ(),t.oy(this.Vnt),t===this.knt?(void 0!==this.Oc&&(this.Oc.vC=t.zc,this.Wnt.hnt(this.Oc)),(r||t.xR()!==i)&&t.RR(i),t.QR!==s&&(t.QR=s),e?t.EI():t.xI()):(void 0!==this.Oc&&(this.Oc.vC=this.Wnt,this.Wnt.nr()),this.kd.retainPlaybackRateOnSourceChange?t.QR=s:1!==s&&this._o(new ju(this.xR(),1))),t.gy(this.Vnt),this.na=t,this.eZ();for(const t of this.Bnt)this._o(t);En(this.Bnt),this.hZ?t.ge():t.be()}eZ(){this.na.oy(this.LI)}iZ(){this.na.gy(this.LI)}ka(){return mF(this)}constructor(e,i){super(),this.Fnt=!0,this.k7=Ht.eO,this.Lnt=!1,this.sZ=void 0,this.YG=void 0,this.TZ=void 0,this.Int=t=>{t.type!==Ti.Yy&&this.Bnt.push(t)},this.Vnt=t=>{(t.type!==Ti.ho||this.na.KR)&&(t.type===Ti.zy&&this.na.KR||t.type===Ti.Jy&&this.na.uI&&this.na.xR()===t.currentTime||t.type===Ti.Yy&&this.na.QR===t.playbackRate||this._o(t))},this.LI=t=>{if(this.Lnt){if(t.type===Zc.WL)return;t.type!==Zc.BL&&t.type!==Zc.UL||(this.Lnt=!1)}if(t.type===Ti.ho){if(!this.Fnt)return;this.Fnt=!1}else if(t.type===Ti.zy){if(this.Fnt)return;this.Fnt=!0}else if(t.type===Zc.iC){if(this.k7===t.readyState)return;this.k7=t.readyState}else if(t.type===Ti.Ry)return;this._o(t)},this.knt=new t(e,i),this.Ont=new pF,this.na=this.knt,this.xnt=new AF(this),this.knt.zc&&(this.Oc=new MF(this),this.Oc.vC=this.knt.zc,this.Wnt=new Re),this.Yo=new Su,this.Bnt=[],this.hZ=!0,this.eZ()}}}(t);Z.Cm&&Z.Dm<3&&(e=function(t){return class extends t{Ca(t){this.Unt=0,super.Ca(t)}_o(t){if(t.type===yo.fa&&this.Unt<3)return this.Unt++,super._o(new OF(t)),void super.Ca(this.iu());super._o(t)}constructor(...t){super(...t),this.Unt=0}}}(e)),e=function(t){let e=t;for(const t of hF)if(aF[t])for(const i of aF[t])e=i(e);return e}(e),BF=e}return BF}function VF(t,e){const i=jT(e),s=new(FF())(t,i);s.Ma=s;let n=s.wa;return s.Aa(),s.Pa(vF),w.defineProperty(n,"constructor",{value:VF}),n=HA(n),dF(s),n}li((()=>{self.dispatchEvent&&self.dispatchEvent(_F("theoplayerready"))})),r();var WF={base64:new class{encode(t){return Nh(t)}decode(t){return ha(t)}}};r();var UF=JSON.parse('["hbbtv","dash","hesp","millicast","hls","chromecast","ads","theoads","airplay","spotx","vr","cache","webaudio","youbora","mediamelon","moat","google-dai","streamone","lcevc","freewheel","agama","uplynk","mediatailor","ui","relatedcontent","social","upnext","contextmenu","texttrackstyle-ui","activequalitylabel","upcomingadnotification"]');r(),r(),r();var GF=class{get ER(){const t=this.na.currentTime;return isFinite(t)?t:"now"}get Gnt(){return this.na.src||""}nr(){}constructor(t,e){this.Hnt=!1,this.Znt=t=>{this.Xnt.nY(t.error,this.ER)},this.znt=()=>{this.Xnt.tY(this.Gnt),this.na.removeEventListener("playing",this.znt),this.Hnt=!1},this.js=()=>{var t,e,i,s;this.Hnt||(this.na.addEventListener("playing",this.znt),this.Hnt=!0),null==(t=this.na.ads)||t.removeEventListener("adbegin",this.qnt),null==(e=this.na.theoads)||e.removeEventListener("interstitialbegin",this.Ynt);var n,r;(null==(s=this.na.source)||null==(i=s.ads)?void 0:i.some((t=>"theoads"===t.integration)))&&(null==(n=this.na.ads)||n.addEventListener("adbegin",this.qnt),null==(r=this.na.theoads)||r.addEventListener("interstitialbegin",this.Ynt))},this.qnt=t=>{"theoads"!==t.ad.integration||t.ad.isSlate||this.Xnt.sY("ad")},this.Ynt=t=>{const e=t.interstitial;(function(t){return"adbreak"===t.type})(e)||this.Xnt.sY(function(t){switch(t){case"adbreak":default:return"ad";case"overlay":return"overlay"}}(e.type))},this.Xnt=e,this.na=t,this.na.addEventListener("error",this.Znt),this.na.addEventListener("sourcechange",this.js),this.js()}};!function(t){lF.push(t)}((function(t){new GF(t.wa,t.Cst)})),r();var HF="theoplayer-stored-volume",ZF="theoplayer-stored-mutedstate";Dh((function(t){return class extends t{zR(t){this.kd.persistVolume&&ka.Bb(ZF,""+Boolean(t)),super.zR(t)}wI(t){this.kd.persistVolume&&ka.Bb(HF,""+Number(t)),super.wI(t)}constructor(t,e){if(super(t,e),e.persistVolume){let t=ka.SQ(HF);(void 0===t||S(t))&&(t=1);const e=ka.TQ(ZF)||!1;this.gI=t,this.ZR=e}}}}),rh.au);var XF="9.3.1",zF=vF.wa,qF=LS.mP.registerContentProtectionIntegration.bind(LS.mP);r(),r(),r(),r();var YF={yY(t){s.addEventListener("beforeunload",t)},mY(t){s.removeEventListener("beforeunload",t)}},KF={Knt:class{get yZ(){const t=[];for(const e of this.jnt){const i=this.Qnt.get(e);if(i){const e=i.map((t=>t.Jnt));t.push(...e)}}return this.$nt&&t.push(this.$nt),t}AZ(t){for(const e of this.yZ)e.S7(t)}OH(t){const e=Fo(this.Qnt.get(t),(t=>t.trt));if(e)return e.trt=!1,e.Jnt}ert(t){if(!this.$nt){var e;const t=null==(e=this.Qnt.get(ee.mE))?void 0:e[0].Jnt.jG;if(!t)throw new g("Error creating iOS Safari MediaController");this.$nt=new GO(t,this.Nw,this.Ku,this.wZ),t.parentElement&&this.$nt.S7(t.parentElement)}return this.$nt}async yH(t){const e=t.jG,i=e.tagName.toLowerCase();await t.nr(),zO(e);const s=Fo(this.Qnt.get(i)||[],(e=>t===e.Jnt));s&&(s.trt=!0)}vZ(){for(const t of this.yZ)t.A7()}yn(){for(const t of this.yZ){const e=t.jG;t.Xw(),XO(e),ze(e)}this.Qnt.clear(),this.$nt=void 0}irt(){for(const t of this.jnt){const e=[];this.Qnt.set(t,e);for(let i=0;i<this.nrt;i++){const i=ZO(t),s=t===ee.vE?new lB(i,this.Nw,this.Ku):new LO(i,this.Nw,this.Ku,this.wZ);e.push({Jnt:s,trt:!0})}}}constructor(t,e,i=2,s=HO,n=ab()){this.nrt=i,this.jnt=[...s],this.Nw=n,this.Ku=t,this.wZ=e,this.Qnt=Oh(),this.irt()}},rrt:class t{Dnt(t){return this.ort.Qo((()=>this.hrt(t)))}kI(){this.mZ.vZ()}async hrt(e){const i=this.mZ.OH(ee.mE),s=i.jG,n=await t.art(s,e);return await this.mZ.yH(i),n}static async art(e,i){return Z.Mm||Z.Cm?"all":(e.src||(e.src="data:video/mp4;base64,AAAAHGZ0eXBNNFYgAAACAGlzb21pc28yYXZjMQAAAAhmcmVlAAAGF21kYXTeBAAAbGliZmFhYyAxLjI4AABCAJMgBDIARwAAArEGBf//rdxF6b3m2Ui3lizYINkj7u94MjY0IC0gY29yZSAxNDIgcjIgOTU2YzhkOCAtIEguMjY0L01QRUctNCBBVkMgY29kZWMgLSBDb3B5bGVmdCAyMDAzLTIwMTQgLSBodHRwOi8vd3d3LnZpZGVvbGFuLm9yZy94MjY0Lmh0bWwgLSBvcHRpb25zOiBjYWJhYz0wIHJlZj0zIGRlYmxvY2s9MTowOjAgYW5hbHlzZT0weDE6MHgxMTEgbWU9aGV4IHN1Ym1lPTcgcHN5PTEgcHN5X3JkPTEuMDA6MC4wMCBtaXhlZF9yZWY9MSBtZV9yYW5nZT0xNiBjaHJvbWFfbWU9MSB0cmVsbGlzPTEgOHg4ZGN0PTAgY3FtPTAgZGVhZHpvbmU9MjEsMTEgZmFzdF9wc2tpcD0xIGNocm9tYV9xcF9vZmZzZXQ9LTIgdGhyZWFkcz02IGxvb2thaGVhZF90aHJlYWRzPTEgc2xpY2VkX3RocmVhZHM9MCBucj0wIGRlY2ltYXRlPTEgaW50ZXJsYWNlZD0wIGJsdXJheV9jb21wYXQ9MCBjb25zdHJhaW5lZF9pbnRyYT0wIGJmcmFtZXM9MCB3ZWlnaHRwPTAga2V5aW50PTI1MCBrZXlpbnRfbWluPTI1IHNjZW5lY3V0PTQwIGludHJhX3JlZnJlc2g9MCByY19sb29rYWhlYWQ9NDAgcmM9Y3JmIG1idHJlZT0xIGNyZj0yMy4wIHFjb21wPTAuNjAgcXBtaW49MCBxcG1heD02OSBxcHN0ZXA9NCB2YnZfbWF4cmF0ZT03NjggdmJ2X2J1ZnNpemU9MzAwMCBjcmZfbWF4PTAuMCBuYWxfaHJkPW5vbmUgZmlsbGVyPTAgaXBfcmF0aW89MS40MCBhcT0xOjEuMDAAgAAAAFZliIQL8mKAAKvMnJycnJycnJycnXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXiEASZACGQAjgCEASZACGQAjgAAAAAdBmjgX4GSAIQBJkAIZACOAAAAAB0GaVAX4GSAhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGagC/AySEASZACGQAjgAAAAAZBmqAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZrAL8DJIQBJkAIZACOAAAAABkGa4C/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmwAvwMkhAEmQAhkAI4AAAAAGQZsgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGbQC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm2AvwMkhAEmQAhkAI4AAAAAGQZuAL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGboC/AySEASZACGQAjgAAAAAZBm8AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZvgL8DJIQBJkAIZACOAAAAABkGaAC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmiAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpAL8DJIQBJkAIZACOAAAAABkGaYC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmoAvwMkhAEmQAhkAI4AAAAAGQZqgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGawC/AySEASZACGQAjgAAAAAZBmuAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZsAL8DJIQBJkAIZACOAAAAABkGbIC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm0AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZtgL8DJIQBJkAIZACOAAAAABkGbgCvAySEASZACGQAjgCEASZACGQAjgAAAAAZBm6AnwMkhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AAAAhubW9vdgAAAGxtdmhkAAAAAAAAAAAAAAAAAAAD6AAABDcAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAzB0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAABAAAAAAAAA+kAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAALAAAACQAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAPpAAAAAAABAAAAAAKobWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAB1MAAAdU5VxAAAAAAALWhkbHIAAAAAAAAAAHZpZGUAAAAAAAAAAAAAAABWaWRlb0hhbmRsZXIAAAACU21pbmYAAAAUdm1oZAAAAAEAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAhNzdGJsAAAAr3N0c2QAAAAAAAAAAQAAAJ9hdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAALAAkABIAAAASAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAALWF2Y0MBQsAN/+EAFWdCwA3ZAsTsBEAAAPpAADqYA8UKkgEABWjLg8sgAAAAHHV1aWRraEDyXyRPxbo5pRvPAyPzAAAAAAAAABhzdHRzAAAAAAAAAAEAAAAeAAAD6QAAABRzdHNzAAAAAAAAAAEAAAABAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAABAAAAAQAAAIxzdHN6AAAAAAAAAAAAAAAeAAADDwAAAAsAAAALAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAAiHN0Y28AAAAAAAAAHgAAAEYAAANnAAADewAAA5gAAAO0AAADxwAAA+MAAAP2AAAEEgAABCUAAARBAAAEXQAABHAAAASMAAAEnwAABLsAAATOAAAE6gAABQYAAAUZAAAFNQAABUgAAAVkAAAFdwAABZMAAAWmAAAFwgAABd4AAAXxAAAGDQAABGh0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAACAAAAAAAABDcAAAAAAAAAAAAAAAEBAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAQkAAADcAABAAAAAAPgbWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAC7gAAAykBVxAAAAAAALWhkbHIAAAAAAAAAAHNvdW4AAAAAAAAAAAAAAABTb3VuZEhhbmRsZXIAAAADi21pbmYAAAAQc21oZAAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAADT3N0YmwAAABnc3RzZAAAAAAAAAABAAAAV21wNGEAAAAAAAAAAQAAAAAAAAAAAAIAEAAAAAC7gAAAAAAAM2VzZHMAAAAAA4CAgCIAAgAEgICAFEAVBbjYAAu4AAAADcoFgICAAhGQBoCAgAECAAAAIHN0dHMAAAAAAAAAAgAAADIAAAQAAAAAAQAAAkAAAAFUc3RzYwAAAAAAAAAbAAAAAQAAAAEAAAABAAAAAgAAAAIAAAABAAAAAwAAAAEAAAABAAAABAAAAAIAAAABAAAABgAAAAEAAAABAAAABwAAAAIAAAABAAAACAAAAAEAAAABAAAACQAAAAIAAAABAAAACgAAAAEAAAABAAAACwAAAAIAAAABAAAADQAAAAEAAAABAAAADgAAAAIAAAABAAAADwAAAAEAAAABAAAAEAAAAAIAAAABAAAAEQAAAAEAAAABAAAAEgAAAAIAAAABAAAAFAAAAAEAAAABAAAAFQAAAAIAAAABAAAAFgAAAAEAAAABAAAAFwAAAAIAAAABAAAAGAAAAAEAAAABAAAAGQAAAAIAAAABAAAAGgAAAAEAAAABAAAAGwAAAAIAAAABAAAAHQAAAAEAAAABAAAAHgAAAAIAAAABAAAAHwAAAAQAAAABAAAA4HN0c3oAAAAAAAAAAAAAADMAAAAaAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAACMc3RjbwAAAAAAAAAfAAAALAAAA1UAAANyAAADhgAAA6IAAAO+AAAD0QAAA+0AAAQAAAAEHAAABC8AAARLAAAEZwAABHoAAASWAAAEqQAABMUAAATYAAAE9AAABRAAAAUjAAAFPwAABVIAAAVuAAAFgQAABZ0AAAWwAAAFzAAABegAAAX7AAAGFwAAAGJ1ZHRhAAAAWm1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAALWlsc3QAAAAlqXRvbwAAAB1kYXRhAAAAAQAAAABMYXZmNTUuMzMuMTAw"),await t.urt(),!i&&await t.crt(e,!1)?"all":await t.crt(e,!0)?"muted":"none")}static async crt(t,e){t.muted=e;const i=t.play();try{if(!yt(i))return!Z.Qs;const t=ke(250);return await Promise.race([i,t]),!0}catch(t){return!1}finally{t.pause(),t.muted=!0}}static urt(){return new Promise((t=>{if("function"==typeof MessageChannel){const e=new MessageChannel;e.port1.onmessage=()=>t(),e.port2.postMessage("")}else u(t,0)}))}yn(){this.ort.yn()}constructor(t){this.mZ=t,this.ort=new Su}},lrt:YF};r();(function(t){Ao=t.Knt,TI=t.rrt,xo=t.lrt})(Z.Bm&&Z.Fm?ol({},KF,{rrt:class{Dnt(t){return Promise.resolve("all")}kI(){}yn(){}}}):KF),r(),r(),r(),r();var jF=class{async FH(t){return NT(t.type)}async VH(t){return!!await hT(t,!0)}},QF=class extends jF{async FH(t){return!!Ia(t.useManagedMediaSource)&&super.FH(t)}};function JF(t){return Ki(t)}function $F(t,e){const i=Ki(t);return e?""+i+e:""+i}r(),r();var tV=class{async drt(t){return(await this._rt.frt(t.map(JF))).shift()}vrt(t,e){const i=$F(t,e);return this.mrt.Mb(i)}async grt(t,e){var i;const s=$F(t,e);return null==(i=await this.prt.Lb(s))?void 0:i.data}IQ(t){return this.wrt.Lb(t)}constructor(t,e,i,s){this._rt=t,this.mrt=e,this.prt=i,this.wrt=s}};r(),r(),r();var eV=class{yrt(t){return Promise.resolve(!1)}brt(t){return Promise.reject(iV)}Art(t){return Promise.reject(iV)}Mb(t){return Promise.resolve(!1)}Lb(t){return Promise.resolve(void 0)}Srt(t,e){return Promise.resolve(void 0)}frt(t){return Promise.resolve([])}Trt(){return Promise.resolve([])}krt(t){return Promise.resolve([])}Ert(t,e){return Promise.resolve([])}eT(t){return Promise.reject(iV)}xrt(t){return Promise.reject(iV)}Rrt(){return Promise.reject(iV)}},iV="Storage disabled",sV="Storage disabled";r(),r(),r();var We=class{get Irt(){return this.Kw.Ub}async yrt(t){return(this.Crt||await this.Irt).yrt(t)}async brt(t,e){return(this.Crt||await this.Irt).brt(t,e)}async Art(t,e){return(this.Crt||await this.Irt).Art(t,e)}async Mb(t){return(this.Crt||await this.Irt).Mb(t)}async Lb(t){return(this.Crt||await this.Irt).Lb(t)}async Srt(t,e){return(this.Crt||await this.Irt).Srt(t,e)}async frt(t){return(this.Crt||await this.Irt).frt(t)}async Trt(){return(this.Crt||await this.Irt).Trt()}async krt(t){return(this.Crt||await this.Irt).krt(t)}async Ert(t,e){return(this.Crt||await this.Irt).Ert(t,e)}async eT(t){return(this.Crt||await this.Irt).eT(t)}async xrt(t){return(this.Crt||await this.Irt).xrt(t)}async Rrt(){return(this.Crt||await this.Irt).Rrt()}constructor(t){this.Kw=new os,this.Crt=void 0,this.Kw.Qw(t),this.Kw.Ub.then((t=>{this.Crt=t}))}},nV=class{get Prt(){return this.Kw.Ub}async Drt(t){const e=this.Nrt||await this.Prt;return await e.Drt(t)}constructor(t){this.Kw=new os,this.Nrt=void 0,this.Kw.Qw(t);const e=this.Kw.Ub;e.then((t=>{this.Nrt=t})),this.Mrt=new We(e.then((t=>t.Mrt))),this.Lrt=new We(e.then((t=>t.Lrt))),this.Brt=new We(e.then((t=>t.Brt))),this.Ort=new We(e.then((t=>t.Ort))),this.Frt=new We(e.then((t=>t.Frt)))}};function rV(t){return new g("This storage cannot handle persistency type "+t)}r(),r(),r();var Ya=function(t){return t.Vrt="readonly",t.Wrt="readwrite",t}({}),oV=class{yrt(t){return Promise.resolve("temporary"===t)}brt(t,e){return void 0===e&&(e="temporary"),"temporary"!==e?Promise.reject(rV(e)):(this.Urt(t.key),this.pA.push(t),Promise.resolve())}Art(t,e){if(void 0===e&&(e="temporary"),"temporary"!==e)return Promise.reject(rV(e));for(const e of t)this.Urt(e.key);for(const e of t)this.pA.push(e);return Promise.resolve()}Mb(t){return Promise.resolve(Boolean(this.Grt(t)))}Lb(t){return Promise.resolve(this.Grt(t))}Srt(t,e){return Promise.resolve(this.Hrt(t,e))}frt(t){const e=t?t.map((t=>this.Grt(t))):this.pA;return Promise.resolve(e.filter(Bo))}Trt(){return Promise.resolve([...this.pA])}krt(t){return this.Ert(t,"key")}Ert(t,e){const i=this.pA.filter((i=>i[e]===t));return Promise.resolve(i)}eT(t){return this.Urt(t),Promise.resolve()}xrt(t){for(const e of t)this.Urt(e);return Promise.resolve()}Rrt(){return En(this.pA),Promise.resolve()}Grt(t){return this.Hrt(t,"key")}Hrt(t,e){for(const i of this.pA)if(i[e]===t)return i}Urt(t){const e=this.Grt(t);e&&we(this.pA,e)}constructor(){this.pA=[]}},hV=class t{static Ait(){return Promise.resolve(new t)}Drt(t){return t(this)}constructor(){this.Lrt=new oV,this.Mrt=new oV,this.Brt=new oV,this.Ort=new oV,this.Frt=new oV}};r(),r();var aV=class{async yrt(t){for(let e of this.Zrt)if(await e.yrt(t))return!0;return!1}async brt(t,e){void 0===e&&(e="persistent");for(let i of this.Zrt)if(await i.yrt(e))return i.brt(t);throw rV(e)}async Art(t,e){void 0===e&&(e="persistent");for(let i of this.Zrt)if(await i.yrt(e))return i.Art(t);throw rV(e)}async Mb(t){for(let e of this.Zrt)if(await e.Mb(t))return!0;return!1}async Lb(t){for(let e of this.Zrt){const i=await e.Lb(t);if(i)return i}}async Srt(t,e){for(let i of this.Zrt){const s=await i.Srt(t,e);if(s)return s}}async frt(t){const e=[];for(let i of this.Zrt)e.push(...await i.frt(t));return e}async Trt(){const t=[];for(let e of this.Zrt)t.push(...await e.Trt());return t}async krt(t){const e=[];for(let i of this.Zrt)e.push(...await i.krt(t));return e}async Ert(t,e){const i=[];for(let s of this.Zrt)i.push(...await s.Ert(t,e));return i}async eT(t){for(let e of this.Zrt)await e.eT(t)}async xrt(t){for(let e of this.Zrt)await e.xrt(t)}async Rrt(){for(let t of this.Zrt)await t.Rrt()}constructor(t){this.Zrt=t}};function uV(t){return async()=>{const e=await Promise.all(t.map((t=>t())));return cV.Ait(e)}}var cV=class t{static Ait(e){return Promise.resolve(new t(e))}get Ort(){return this.Xrt}get Frt(){return this.zrt}get Brt(){return this.qrt}get Lrt(){return this.Yrt}get Mrt(){return this.Krt}Drt(e){if(0===this.jrt.length)return e(this);const i=[];let s=0;const n=r=>(i.push(r),s++,s<this.jrt.length?this.jrt[s].Drt(n):e(new t(i)));return this.jrt[s].Drt(n)}constructor(t){this.jrt=t,this.Xrt=new aV(t.map((t=>t.Ort))),this.zrt=new aV(t.map((t=>t.Frt))),this.qrt=new aV(t.map((t=>t.Brt))),this.Yrt=new aV(t.map((t=>t.Lrt))),this.Krt=new aV(t.map((t=>t.Mrt)))}},To=class t{static Pa(e){t.EG.Pa(e)}static get Vg(){return t.Qrt||(t.Qrt=t.EG.Ait()),t.Qrt}};function lV(t){return void 0!==t.dI}function dV(t){const e=Z.Mm||Z.Cm,i=void 0!==t&&void 0!==t.preferredAudioCodecs&&t.preferredAudioCodecs.some((t=>"ac-3"===t||"ec-3"===t)),s=e&&!i,n=new Mf(!0);return async t=>{const e=t.Mk;if(!n.bp(e)&&!function(t,e){return!!t&&(Gh(t)?vx(e)||gx(e):Ga(t,au.APPLICATION_TTML_XML)||Ga(t,au.TEXT_VTT)||Ga(t,au.IMAGE_JPEG))}(t.jq,t.Jrt))return!1;const i=t.Jrt.some((t=>"ac-3"===t||"ec-3"===t));if(s&&i)return!1;if(t.TG){const i=t.TG,s=on(i,(t=>Am(t.c9))).filter(Bo),n=await async function(t,e){for(const i of t)if(await e(i))return!0;return!1}(s,(t=>Ms.jp(t,e)));if(!n)return!1}return!0}}To.EG=new class{Ait(){return new nV(this.$rt())}async $rt(){this.tot&&(await Promise.resolve(),this.tot=!1);for(const t of this.eot)try{return await uV([hV.Ait,t])()}catch(t){}return await uV([hV.Ait,this.iot])()}Pa(t){if(!this.tot)throw new g("Registration overdue");this.eot.push(t)}constructor(t){this.eot=[],this.tot=!0,this.iot=t}}(class t{static Ait(){return Promise.resolve(new t)}Drt(t){return Promise.reject(sV)}constructor(){this.Lrt=new eV,this.Mrt=new eV,this.Brt=new eV,this.Ort=new eV,this.Frt=new eV}}.Ait),To.Qrt=void 0,r(),r(),r(),r();var fV=class{get Ti(){return this.rot.offsetHeight*Ms.Ys.Kg}get ji(){return this.rot.offsetWidth*Ms.Ys.Kg}constructor(t){this.rot=t}};r();var Ge=class{get nt(){return this.Hl}OI(t,e,i,s,n,r,o,h){const a=new Yi(t,e,i,s,n,r,o,void 0,h);return this.Hl.tt(a),this.b8.tt(a),a}mW(t){this.Hl.it(t),this.b8.it(t),t.yn()}_H(t){const e=new QL(t.Lt,t.Ch,t.gs);return this.Hl.tt(e),this.b8.tt(e),e}nr(){for(const t of this.Hl.lC.slice())t.yn();this.Hl.nr(),this.b8.nr()}yn(){this.nr(),this.Hl.yn(),this.b8.yn()}constructor(t,e){this.Hl=new Wo,this.b8=new DL(t,e)}};r(),r();var _V=class{OH(t){return this.EG.OH(t)}ert(t){return this.EG.ert(t)}yH(t){return this.EG.yH(t)}constructor(t){this.EG=t}};r(),r(),r();var Oe=class extends Co{get oot(){return this.WB}get wR(){return this.yR()}yR(){return this.WB.wR}get bR(){return this.AR()}AR(){return this.WB.bR}get ER(){return this.xR()}xR(){return this.WB.ER}get Hu(){return this.WB.Hu}get ct(){return this.jd()}jd(){return this.WB.ct}get $G(){return this.hot()}hot(){return this.WB.$G}get PR(){return this.aot()}aot(){return this.WB.PR}get lt(){return this.WB.lt}get Ti(){return this.WB.Ti}get ji(){return this.WB.ji}get Sa(){return this.SI()}SI(){return this.WB.Sa}get fH(){return this.ja()}ja(){return this.WB.fH}get ZR(){return this.WB.ZR}set ZR(t){this.WB.ZR=t}get KR(){return this.uot()}uot(){return this.WB.KR}get QR(){return this.WB.QR}set QR(t){this.WB.QR=t}get tI(){return this.eI()}eI(){return this.WB.tI}get rI(){return this.oI()}oI(){return this.WB.rI}get hI(){return this.aI()}aI(){return this.WB.hI}get uI(){return this.cI()}cI(){return this.WB.uI}get M4(){return this.cot()}cot(){return this.WB.M4}get X4(){return this.lot()}lot(){return this.WB.X4}get nt(){return this.lI()}lI(){return this.dot}get Wl(){return this.j7()}j7(){return this.WB.Wl}get G9(){return this.WB.G9}get gI(){return this.WB.gI}set gI(t){this.WB.gI=t}get y7(){return this.WB.y7}get WR(){return this.WB.WR}get qB(){return this.WB.qB}get wH(){return this.fot()}set wH(t){this._ot(t)}fot(){return this.WB.wH}_ot(t){this.WB.wH=t}get T7(){return this.WB.T7}set T7(t){this.vot(t)}vot(t){this.WB.T7=t}get h9(){return this.mot()}mot(){return this.WB.h9}HR(){return this.WB.HR()}xI(){return this.WB.xI()}EI(){this.WB.EI()}Rb(t,e,i){this.WB.Rb(t,e,i)}zG(t){this.WB.zG(t)}ge(){this.WB.ge()}be(){this.WB.be()}OI(t,e,i,s,n,r,o,h){return this.WB.OI(t,e,i,s,n,r,o,h)}_H(t){return this.WB._H(t)}uH(){return this.WB.uH()}lH(t,e,i,s,n){return this.WB.lH(t,e,i,s,n)}mW(t){this.WB.mW(t)}vH(){this.WB.vH()}MJ(t){return this.WB.MJ(t)}async $n(t){const e=await this.WB.$n(t);let i;return i=t.Tw===In.pW?this.got(e):this.pot(e),this.JG=i,i}async nr(){this.JG&&(await this.JG.Xw(),this.JG=void 0),await this.WB.nr()}p7(){this.WB.p7()}w7(){this.WB.w7()}async Xw(){this.Ro(),this.WB.vn(UD,this.wot),this.dot.vC=void 0,this.dot.yn(),this.JG&&(await this.JG.Xw(),this.JG=void 0)}A7(){this.WB.A7()}yot(t){this.WB.vn(UD,this.wot),this.WB=t,this.dot.vC=t.nt,this.WB.bn(UD,this.wot)}LI(t){this._o(t)}constructor(t){super(),this.JG=void 0,this.dot=new at,this.wot=t=>this.LI(t),this.WB=t,this.dot.vC=t.nt,this.WB.bn(UD,this.wot)}},vV=class extends Oe{get jG(){return this.WB.jG}get U4(){return this.WB.U4}get AI(){return this.WB.AI}set AI(t){this.WB.AI=t}S7(t){this.WB.S7(t)}NI(){this.WB.NI()}constructor(t){super(t)}};r(),r(),r();var mV=class{get kd(){return this.mT()}mT(){return this.JG.kd}get hI(){return this.aI()}aI(){return this.JG.hI}dJ(t){return this.JG.dJ(t)}_J(t){return this.JG._J(t)}Xw(){return Promise.resolve()}constructor(t){this.JG=t}},gV=class extends mV{get h4(){return this.u4}get a4(){return this.c4}get wR(){return this.yR()}yR(){return this.JG.wR}get ct(){return this.jd()}jd(){return this.JG.ct}get RJ(){return this.bot()}bot(){return this.JG.RJ}d4(t){this.JG.d4(t)}m4(t,e,i,s){this.JG.m4(t,e,i,s)}a3(){this.JG.a3()}J2(){this.JG.J2()}Xw(){return this.u4&&(this.u4.Xw(),this.u4=void 0),this.c4&&(this.c4.Xw(),this.c4=void 0),super.Xw()}Aot(t){this.JG=t,this.u4?t.h4?this.u4.Sot(t.h4):(this.u4.Xw(),this.u4=void 0):t.h4&&(this.u4=this.Tot(t.h4),this.u4.bn(Vo,this.kot)),this.c4?t.a4?this.c4.Sot(t.a4):(this.c4.Xw(),this.c4=void 0):t.a4&&(this.c4=this.Tot(t.a4),this.c4.bn(Vo,this.kot))}mJ(t){this.JG.mJ(t)}Eot(t){}constructor(t){super(t),this.u4=void 0,this.c4=void 0,this.kot=t=>this.Eot(t)}};r(),r(),r();var pV=class extends Co{get Ej(){return this.Mj}set Ej(t){this.Mj=t}get wR(){return se.pB()}get kd(){return this.MT}get m3(){return ee.iE}get w3(){return se.pB()}get xot(){return!1}get bj(){return this.Pj}set bj(t){this.Pj=t}g2(t,e,i){return Promise.reject(new g("Invalid media buffer"))}T3(){return Promise.reject(new g("Invalid media buffer"))}A2(t,e,i){return Promise.reject(new g("Invalid media buffer"))}RJ(){return!1}a3(){}A3(t,e){}S3(t,e){}eT(t,e,i){return Promise.resolve()}F2(t,e){return Promise.reject(new g("Invalid media buffer"))}DO(t,e){return Promise.reject(new g("Invalid media buffer"))}dJ(t){return!1}_J(t){return Promise.reject(new g("Invalid media buffer"))}Xw(){this.Ro()}constructor(t){super(),this.Pj=0,this.Mj=0,this.MT=t}},wV=class extends Co{get Ej(){return this.Rot()}set Ej(t){this.Iot(t)}Rot(){return this.Cot.Ej}Iot(t){this.Cot.Ej=t}get wR(){return this.yR()}yR(){return this.Cot.wR}get kd(){return this.mT()}mT(){return this.Cot.kd}get m3(){return this.Cot.m3}get w3(){return this.Pot()}Pot(){return this.Cot.w3}get bj(){return this.Dot()}set bj(t){this.Not(t)}Dot(){return this.Cot.bj}Not(t){this.Cot.bj=t}g2(t,e,i){return this.Cot.g2(t,e,i)}T3(){return this.Cot.T3()}A2(t,e,i){return this.Cot.A2(t,e,i)}RJ(){return this.Cot.RJ()}a3(){this.Cot.a3()}A3(t,e){this.Cot.A3(t,e)}S3(t,e){this.Cot.S3(t,e)}eT(t,e,i){return this.Cot.eT(t,e,i)}F2(t,e){return this.Cot.F2(t,e)}dJ(t){return this.Cot.dJ(t)}_J(t){return this.Cot._J(t)}LI(t){this._o(t)}Xw(){this.Ro(),this.Sot(new pV(this.kd))}Sot(t){this.Cot.vn(Vo,this.Mot),this.Cot=t,this.Cot.bn(Vo,this.Mot)}constructor(t){super(),this.Mot=t=>this.LI(t),this.Cot=t,this.Cot.bn(Vo,this.Mot)}},yV=class extends wV{get Jnt(){return this.WB}set Jnt(t){this.WB=t}async g2(t,e,i){return J(i),await this.Lot(this.WB.ER,null==e?void 0:e.wit,null==e?void 0:e.ct),J(i),t.Tw===Ce.Sk?await this.Bot(t,e,i):await this.Oot(t,e,i)}async Bot(t,e,i){let s=t;for(;;){const[t,n]=Sb(s.Kk);s={Tw:Ce.Sk,Kk:t};try{return await this.Fot(s,e,i),void n.cancel(new Bu).catch(Tt)}catch(t){if(hD(t)){if(await this.Lot(this.WB.ER,e.wit,e.ct,i)){s={Tw:Ce.Sk,Kk:n};continue}}throw n.cancel(t).catch(Tt),t}}}async Oot(t,e,i){for(;;)try{return J(i),await this.Fot(t,e,i)}catch(t){if(hD(t)){if(await this.Lot(this.WB.ER,e.wit,e.ct,i))continue}throw t}}async Lot(t,e,i,s){const n=oD(t,e,i,this.wR,this.bj,this.Ej);for(const[t,e]of n)await this.Vot(t,e,s);return n.length>0}Fot(t,e,i){return super.g2(t,e,i)}Vot(t,e,i){return super.eT(t,e,i)}constructor(t){super(t),this.WB=void 0}},bV=class extends gV{get Jnt(){return this.WB}set Jnt(t){this.WB=t,this.u4&&(this.u4.Jnt=t),this.c4&&(this.c4.Jnt=t)}Tot(t){const e=new yV(t);return e.Jnt=this.WB,e}constructor(t){super(t),this.WB=void 0,this.Aot(t)}};r();var Bn=class extends mV{get iI(){return this.JG.iI}set iI(t){this.JG.iI=t}};r();var Ja=class extends Oe{get jG(){return this.WB.jG}get U4(){return this.WB.U4}get vI(){return this.WB.vI}get dI(){return this.WB.dI}get AI(){return this.WB.AI}set AI(t){this.WB.AI=t}S7(t){this.WB.S7(t)}NI(){this.WB.NI()}TI(){return this.WB.TI()}constructor(t){super(t)}},AV=class extends vV{get oot(){return this.WB}pot(t){const e=new bV(t);return e.Jnt=this,e}got(t){return new Bn(t)}},SV=class extends Ja{get oot(){return this.WB}pot(t){const e=new bV(t);return e.Jnt=this,e}got(t){return new Bn(t)}},ut=class extends _V{OH(t){return t===ee.mE?new SV(super.OH(t)):t===ee.vE?new AV(super.OH(t)):void 0}async yH(t){const e=t;await e.Xw(),await super.yH(e.oot)}};r();var TV=class{Wot(){this.na.MI()}yn(){s.removeEventListener("pageshow",this.Uot)}constructor(t){this.Uot=t=>{t.persisted&&this.Wot()},this.na=t,s.addEventListener("pageshow",this.Uot)}};r(),r(),r(),r(),r();var kV=class{Got(t,e,i){return Promise.resolve()}Hot(t,e,i,s){let n=[];if(s){const r={MV:e.WO,LV:e.UO,BV:i.Zot.BV};s.Tw===Lr.TTML?n=jE(t,s,r,i.jq):s.Tw===Lr.WEBVTT&&(n=lE(t,r,this.Xot).L)}return n}nr(){}constructor(t){this.Xot=t}};r(),r(),r();var tl=function(t){return t.iD="vttc",t.zot="vsid",t.qot="iden",t.Yot="ctim",t.Kot="sttg",t.jot="payl",t.Qot="vtte",t.Jot="vtta",t}({}),an=class t{static $ot(e){return Boolean(t.tht[e])}static JD(e){const i=[],s=Mi.OD(new FS(e,new Ri));for(const e of s)t.$ot(e.Tw)&&i.push(t.tht[e.Tw](e.Kk));return i}static eht(e){const i=Mi.OD(e),s=ki(i,tl.zot),n=ki(i,tl.qot),r=ki(i,tl.Yot),o=ki(i,tl.Kot),h=ki(i,tl.jot);return{Tw:tl.iD,iht:s?t.sht(s):void 0,nht:n?t.rht(n):void 0,oht:r?t.hht(r):void 0,aht:o?t.uht(o):void 0,cht:h?t.dht(h):void 0}}static sht(t){return{Tw:tl.zot,fht:t.xD()}}static rht(t){return{Tw:tl.qot,nht:t.ND()}}static hht(t){return{Tw:tl.Yot,_ht:t.ND()}}static uht(t){return{Tw:tl.Kot,vht:t.ND()}}static dht(t){return{Tw:tl.jot,mht:t.ND()}}static ght(t){return{Tw:tl.Qot}}static pht(t){return{Tw:tl.Jot,wht:t.ND()}}};an.tht={[tl.iD]:an.eht,[tl.Qot]:an.ght,[tl.Jot]:an.pht};var EV=class{Got(t,e,i){const s=new DataView(t.yht),n=nr.JD(s),r=Fo(n,(t=>t.Tw===_t.gP));return r&&(this.bht=r.Z[0].AN.XD.mN),Promise.resolve()}Hot(t,e,i){if(S(this.bht))return[];const s=ra(t),n=nr.JD(s),r=dn(n,_t.oD),o=dn(n,_t.fD);if(!r||0===r.Z.length||!o)return[];const h=function(t,e,i){const s=t.Z[0],n=s.aL?s.aL.aL.toNumber()/i:e.WO,r=[];for(const t of s.hL)r.push(...t._L);return{Aht:n,_L:r}}(r,e,this.bht),a=i.Zot.BV;return function(t,e,i,s){const n=an.JD(ra(e.Kk)),r=t._L,o=t.Aht+s,h=[];let a=0;for(let t=0;t<r.length;t++){const e=r[t],s=n[t];var u;const c=(null!=(u=e.ct)?u:0)/i;let l;s.Tw===tl.iD&&(l=xV(s,a,c,o)),l&&h.push(l),a+=c}return h}(h,o,this.bht,a)}nr(){this.bht=NaN}constructor(){this.bht=NaN}};function xV(t,e,i,s){if(!t.cht)return void 0;const n=t.oht?function(t){return SE(t._ht,new Ri(0))}(t.oht):e,r=s+n,o=r+i,h=t.cht.mht;return new Bk(r,o,h,!1)}r(),r();var Yu=function(t){return t[t.LZ=0]="LZ",t[t.Sht=1]="Sht",t[t.Tht=10]="Tht",t[t.kht=11]="kht",t[t.Eht=12]="Eht",t[t.xht=13]="xht",t[t.Rht=14]="Rht",t[t.Iht=15]="Iht",t[t.Cht=20]="Cht",t[t.Pht=21]="Pht",t[t.Dht=22]="Dht",t[t.Nht=23]="Nht",t[t.Mht=24]="Mht",t[t.Lht=30]="Lht",t[t.Bht=31]="Bht",t[t.Oht=32]="Oht",t[t.Fht=33]="Fht",t[t.Vht=34]="Vht",t[t.Wht=35]="Wht",t[t.Uht=40]="Uht",t[t.Ght=41]="Ght",t[t.Hht=42]="Hht",t[t.Zht=43]="Zht",t[t.Xht=44]="Xht",t[t.zht=50]="zht",t[t.qht=51]="qht",t[t.Yht=52]="Yht",t[t.Kht=60]="Kht",t[t.jht=61]="jht",t[t.Qht=62]="Qht",t[t.Jht=63]="Jht",t[t.$ht=70]="$ht",t[t.eat=71]="eat",t[t.iat=72]="iat",t[t.sat=73]="sat",t[t.nat=74]="nat",t[t.rat=75]="rat",t[t.oat=76]="oat",t[t.aat=77]="aat",t[t.uat=90]="uat",t[t.dat=91]="dat",t}({});function RV(t,e){const i=e.uB(((e,i)=>t.oB(e,i,!1,!1)));return t.tB(i)}function IV(t,e){const i=e.jn(t.jL()).uB(((e,i)=>t.wr(i)));return t.tB(i)}r(),r(),r(),r();var Ne=function(t){return t.fat="_at",t.vat="mat",t}({});r();var Ou=class extends ri{constructor(t,e,i){super("gat"),this.Sn=t,this.Tn=e,this.pat=i}},CV=class extends pe{constructor(){super("wat")}},PV=[Ti.eb,Ti.sb,Ti.$y,Ti.Ay],DV=class extends Co{get yat(){var t,e;return(null==(t=this.Aat.bat)?void 0:t.pat)||(null==(e=this.Aat.Sat)?void 0:e.pat)}get Tat(){return this.Eat}set xat(t){this.Aat.xat=t}get xat(){return this.Aat.xat}get Yk(){return this.Rat}Iat(t){this.Rat!==t&&(this.Rat=t,this._o(new CV))}get Cat(){return this.Eat.Ht.Cat}get lt(){return this.YG}async Sn(t){if(!this.Pat&&!this.Dat)return;const e=this.py("wat");this.Pat?(this.Nat.jw(),this.Nat=new da,js(this.Mat(this.Nat.Uw),this.Nat)):(this.Lat.Vb(void 0),this.Lat=new os),await e}get Pat(){return"Bat"===this.Rat}get Dat(){return"Oat"===this.Rat}get Fat(){return"Vat"===this.Rat}get Wat(){return"Uat"===this.Rat}async RI(t){if(this.Fat||this.Dat)for(0,this.Nat.jw();!this.Pat&&!this.Wat;)await this.py("wat")}async nr(t){this.Wat?(this.YG=void 0,this.Iat("Bat")):await this.RI(t),this.Aat.nr(),this.Eat.nr()}BH(t){this.YG=t,this.Iat("Uat"),this._o(new Na(t))}Gat(){this.S9.bn(Ti.hb,this.pd),this.S9.bn([Ti.Jy,Ti.Oy],this.Ge),this.Aat.bn(PV,this.Ds),this.Hat.bn(Ne.fat,this.pd)}Zat(){this.S9.vn(Ti.hb,this.pd),this.S9.vn([Ti.Jy,Ti.Oy],this.Ge),this.Aat.vn(PV,this.Ds),this.Hat.vn(Ne.fat,this.pd)}async Xat(t){this.Zat(),this.zat.jw(),await this.RI(null!=t?t:Yu.Zht),this.Aat.nr()}async qat(t){this.Gat(),await this.Sn(null!=t?t:Yu.Iht)}Yat(t,e,i){if(this.Pat)for(const s of t.Eat.Kat())s.jat<=i&&e<=s.Qat&&this.Hat.Jat.some((t=>t.o===s.$at))&&this.Eat.tut(s)}async yn(){this.Ro(),this.Zat(),this.zat.jw(),await this.RI(Yu.Xht),this.Aat.yn()}async Mat(t){for(;;)try{J(t),this.Iat("Vat"),await this.Aat.eut(t),J(t),this.Iat("Oat"),await ou(this.Lat.Ub,t)}catch(t){if(Je(t))this.Iat("Bat");else{const e=t instanceof A?t:new A(Qa.MEDIA_LOAD_ERROR,t.message,t);this.BH(e)}break}}async iut(t){J(t),await this.RI(Yu.Hht),this.Aat.nr(),J(t),await this.Sn(Yu.xht)}constructor(t,e,i,s,n){super(),this.sut=t,this.Hat=e,this.Eat=i,this.Aat=s,this.S9=n,this.Rat="Bat",this.YG=void 0,this.Lat=new os,this.zat=new da,this.Nat=new da,this.Ge=t=>{if(this.Pat||this.Wat)return;if(!Ms.hR&&this.Aat.nut(t.currentTime))return;this.zat.jw(),this.zat=new da;js(this.iut(this.zat.Uw),this.zat).catch(yu)},this.pd=Qr((()=>{if(this.Dat){try{this.Aat.rut();if(this.Aat.out())return}catch(t){if(!(t instanceof Ou))throw t}this.Sn(Yu.Rht)}}),250),this.Gat()}};r(),r();var NV=class t{hut(t,e){return this.aut(t,!1,e)}uut(t,e){return this.aut(t,!0,e)}async aut(e,i,s){J(s.Uw);const n=await this.cut(e,i,s);return n.Vk?t.lut(n):this.fut(n)}fut(t){return t}static lut(t){return t}cut(t,e,i){var s;const n=new wt({Xu:t.Xu,jk:Rr.bk,Jk:t._ut?{Range:"bytes="+t._ut[0]+"-"+(null!=(s=t._ut[1])?s:"")}:void 0,xE:t.xE,AE:xe.GET,Tw:Mr.nE,kE:e?xu.hE:xu.iE,EE:this.vut,SE:i.mut,TE:i.TE,Uw:i.Uw,PE:i.PE});return this.fW.Qk(n)}constructor(t,e){this.fW=t,this.vut=e}};r(),r();var MV=class{gut(t,e){const i=this.wut**t,s=e*(1-i)+i*this.dit;S(s)||(this.dit=s,this.yut+=t)}but(){const t=1-this.wut**this.yut;return this.dit/t}constructor(t){this.dit=0,this.yut=0,this.wut=_.exp(_.log(.5)/t)}},LV=class{gut(t,e){const i=8e3*e/t,s=t/1e3;this.Aut+=e,this.Sut.gut(s,i),this.Tut.gut(s,i)}but(){return this.kut()?_.min(this.Sut.but(),this.Tut.but()):this.Eut}kut(){return this.Aut>=this.xut}constructor(t=2,e=5,i=128e3){this.Aut=0,this.Eut=uI,this.Sut=new MV(t),this.Tut=new MV(e),this.xut=i}},BV=class{get Rut(){return this.Iut.but()}get kut(){return this.Iut.kut()}Cut(t){const e=t.Put,i=this.Dut?t.Nut-t.Mut:t.Nut-t.Lut,s=t.But;!s&&e<this.Out||(s?this.Iut.gut(2*i,e):this.Iut.gut(i,e))}constructor(t,e){this.Dut=e,e&&dT(t)?t===ee.mE?(this.Out=5e3,this.Iut=new LV(.05,1,0)):(this.Out=0,this.Iut=new LV(.005,.1,0)):(this.Out=16e3,this.Iut=new LV)}};r(),r(),r();var OV=class{transform(t,e){this.Jd.write(t).catch(Tt),e.enqueue(t)}flush(){this.Jd.close().catch(Tt)}constructor(t){this.Jd=t}},FV=class{Fut(){return new VV(bb(this.yht),this.Vut,this.Wut)}constructor(t,e,i){this.yht=t,this.Vut=e,this.Wut=i}},VV=class t{get Nk(){return this.Uut}Dk(t){return He(this.Uut,t)}Ib(){const[e,i]=Sb(this.Uut);return this.Uut=e,new t(i,this.Vut,this.Wut)}Gut(){const[e,i]=function(t){const e=new _a,i=e.writable.getWriter(),s=new _a(new OV(i));return t.pipeTo(s.writable).catch((t=>{i.abort(t).catch(Tt)})),[s.readable,e.readable]}(this.Uut);return this.Uut=e,new t(i,this.Vut,this.Wut)}Hut(t){return this.Dk(t).then((t=>new FV(t,this.Vut,this.Wut)))}constructor(t,e,i){this.Uut=t,this.Vut=e,this.Wut=i}};r();var mc=class extends ri{constructor(t,e,i){super(e,i),this.Zut=t}},WV="Cache lookup failed.",UV=class extends Co{async Xut(t,e){J(e);const i=await this.zut.grt(t.Xu.Xu,t.Xu._ut);if(J(e),!i)throw new mc(t,WV);const s=new FV(i.buffer,i.byteLength,i.reference);return{Zut:t.Zut,qut:{Tw:Ce.iJ,Kk:s},pat:t.pat,Xu:t.Xu}}async Yut(t,e){J(e);const i=await this.zut.grt(t.Xu,t._ut);if(J(e),!i)throw new mc(t,WV);const s=new FV(i.buffer,i.byteLength,i.reference);return{Tw:Ce.iJ,Kk:s}}yn(){this.Ro()}constructor(t){super(),this.zut=t}};r();var GV=["ib","ob"],HV=class extends Co{async Xut(t,e){let i;for(const s of this.Kut)try{return await s.Xut(t,e)}catch(t){th(t),i=t}throw i}async Yut(t,e){let i;for(const s of this.Kut)try{return await s.Yut(t,e)}catch(t){th(t),i=t}throw i}yn(){for(const t of this.Kut)t.vn(GV,this.Ds),t.yn()}constructor(t){super(),this.Kut=t;for(const t of this.Kut)t.bn(GV,this.Ds)}};function Yn(t){return Ad(t.jut)}function ZV(t){return Yn(t)?t.jut:t.Qut}r(),r(),r(),r();var XV=class extends pe{constructor(t,e,i,s,n,r){super(t),this.Jut=e,this.Az=i,this.sL=s,this.EN=n,this.EE=r}},zV=class extends XV{constructor(t,e,i,s,n){super(Ti.eb,t,e,i,s,n)}};r(),r();var qV=class{constructor(t,e){this.$ut=t,this.tct=e}},YV=class extends qV{get Put(){return this.ect}start(){}transform(t,e){this.ect+=t.byteLength,e.enqueue(t)}flush(){this.ict(!1)}jw(){this.ict(!0)}ict(t){this.$ut(this.tct,Ms.Wg(),this.Put,t)}constructor(...t){super(...t),this.ect=0}},KV=class extends qV{get Put(){return this.ect}start(){this.tct=Ms.Wg()}transform(t,e){this.ect+=t.byteLength,this.sct||this.nct(t)&&this.ict(!1),e.enqueue(t)}flush(){}jw(){this.ict(!0)}nct(t){const e=this.rct(t),i=this.hct(e);return Boolean(Fo(i,jV))}rct(t){return this.act&&void 0!==this.uct?(this.act=mu([this.act,t]),new FS(ra(this.act),new Ri(this.uct))):(this.act=t,new FS(ra(t),new Ri))}hct(t){const e=Mi.FD(t.Kk,t.SD,!0);return e.VD?(this.act=void 0,this.uct=void 0):this.uct=t.SD.nc,e.m}ict(t){this.sct||(this.$ut(this.tct,Ms.Wg(),this.Put,t),this.sct=!0)}constructor(...t){super(...t),this.ect=0,this.sct=!1}};function jV(t){return t.Tw===_t.fD}var QV=class{cct(t){const e=t.tE?this.lct:Ms.Wg(),i=this.dct(e),s=new _a(i),n=t.Nk().pipeTo(s.writable).then((()=>({GR:{Put:i.Put}})),(t=>{throw i.jw(),t}));return this.fct.Qw(n),s.readable}_ct(t){const e=t.tE?this.lct:Ms.Wg(),i=t.Dk(),s=i.then((t=>{const i=Ms.Wg();return this.Cut(e,i,t.byteLength,!1),{GR:{Put:t.byteLength}}}),(t=>{const i=Ms.Wg();throw this.Cut(e,i,0,!0),t}));return this.fct.Qw(s),i}get vct(){return this.fct.Ub}constructor(t){this.mct=t,this.fct=new os,this.Cut=(t,e,i,s)=>{const n={Lut:this.lct,Mut:t,Nut:e,Put:i,But:s};this.mct.Cut(n),this.mct.kut&&gu.Vg.hG(this.mct.Rut)},this.fct.Ub.catch(Tt),this.lct=Ms.Wg()}},JV=class extends QV{dct(t){return new YV(this.Cut,t)}},$V=class extends QV{dct(t){return new KV(this.Cut,t)}};r();var tW=class extends XV{constructor(t,e,i,s,n,r,o){super(Ti.sb,t,e,i,s,n),this.gct=r,this.pO=o}};r();var eW=class extends ri{constructor(t,e,i){super("Error downloading segment "+ZV(e),t),this.pct=e.WO,this.wct=e.UO,this.yct=i}},iW=class extends Co{bct(){return this.Dut?new $V(this.mct):new JV(this.mct)}async Xut(t,e){J(e);const i=t.pat,s=t.Xu,n=t.Zut,r=ZV(n),o=i.pat?i.pat.IC:-1,h=function(t){const e=t.pat;let i;i=e===function(t){return t.Jat.reduce(((t,e)=>t.bG<e.bG?t:e))}(e.Act)?Ha(5*t.Zut.ct):Ha(1.2*t.Zut.ct);return Ns(i,1e3,18e3)}(t);this._o(new zV(s,i.bG,r,o,i.Tw));try{const t=this.bct(),a=await this.Sct.hut(s,{PE:this.Dut,mut:h,Uw:e}),u=await this.Tct(a,a.Vk,e,t);return ah(this.kct(t.vct,i,s,r,o,a)),{qut:u,pat:i,Zut:n,Xu:s}}catch(t){throw th(t),new eW(t,n,i)}}async Yut(t,e){J(e);const i=await this.Sct.uut(t,{PE:false,mut:1e4,Uw:e});return await this.Tct(i,false,e)}async Tct(t,e,i,s){if(e){const e=s?s.cct(t):t.Nk();return{Tw:Ce.Sk,Kk:new VV(e)}}{const e=s?await s._ct(t):await t.Dk(i);return{Tw:Ce.iJ,Kk:new FV(e)}}}async kct(t,e,i,s,n,r){try{const o=await t;this._o(new tW(i,e.bG,s,n,e.Tw,r.Yk,o.GR.Put))}catch(t){}}yn(){this.Ro()}constructor(t,e,i){super(),this.Sct=t,this.mct=e,this.Dut=i}};r();var sW=.001,nW=class{get wR(){return this.Ect.wR}get xct(){return this.Ect.xct}get FJ(){return this.Ect.FJ}get Rct(){if(this.O3.rI<Ht.Xn)return!1;if(this.Ect.Tn<=this.Ict&&this.Ect.Cct())return!0;const t=this.Ect.XG;if(!t||0===t.V)return!1;const e=se.gB(this.S9.ER,1/0);return t.jn(e).iB(this.Ect.FJ).vB>=this.gZ.Dj}get Ict(){const t=this.Ect.XG;let e;if(t&&t.V>0)e=t.Tn(0);else{e=this.S9.ER;const t=this.Ect.FJ,i=t.sB(e);i>=0&&(e=t.Tn(i))}const i=this.Ect.hI.Sn(0);if(i>e){if(this.Ect.Sn<=e&&this.Ect.Tn>=e&&i>e+sW)throw new Ou(e,i);e=i}return e=this.Ect.Pct.KL(e),e}constructor(t,e,i,s){this.Ect=t,this.S9=e,this.O3=i,this.gZ=s}};r();var rW=class{get Dct(){if(0===this.P_.size)return this.Nct;let t=se.gB(0,1/0);return t=t.jn(this.Nct),this.P_.forEach((e=>{t=t.jn(e)})),t}Mct(t){return this.P_.get(t.o)}Lct(){let t=this.Nct;return this.P_.forEach((e=>{t=t.tB(e)})),t}Bct(t){if(this.Nct.wr(t))return!0;let e=!1;return this.P_.forEach((i=>{e=e||i.wr(t)})),e}Oct(t,e){const i=this.P_.get(e.o);return!!i&&i.wr(t)}nB(t,e){if(this.Nct.nB(t,e))return!0;let i=!1;return this.P_.forEach((s=>{i=i||s.nB(t,e)})),i}Fct(t,e){const i=this.P_.get(e),s=i?i.tB(t):t;this.P_.set(e,s),this.Nct=this.Nct.tB(t)}Vct(t){this.P_.forEach(((e,i)=>{this.P_.set(i,e.tB(t))})),this.Nct=this.Nct.tB(t)}Wct(t){this.P_.forEach(((e,i)=>{this.P_.set(i,e.jn(t))})),this.Nct=this.Nct.jn(t)}nr(){this.P_.forEach(((t,e)=>{this.P_.set(e,se.pB())})),this.Nct=se.pB()}constructor(){this.P_=Oh(),this.Nct=se.pB()}},oW=class{get Uct(){return this.Gct}get FJ(){return this.VJ}Hct(t){for(const e of this.Mrt){if(e.jat>t)break;if(e.Qat>t)return e}}Zct(t){for(const e of this.Mrt){if(e.Xct>t)break;if(e.zct>=t)return e}}qct(t,e){const i=[];for(const s of this.Mrt){if(s.jat>t)break;s.Qat>=e&&i.push(s)}return i}Kat(){return this.Mrt}tut(t){const e=se.gB(t.Xct,t.zct),i=e.jL();this.Gct.Wct(i),this.Gct.Fct(e,t.$at),this.Yct(i);const s=rn(this.Mrt,(e=>t.jat<=e.jat));if(s<0)this.Mrt.push(t);else{this.Mrt[s].Qat<=t.Qat?this.Mrt.splice(s,1,t):this.Mrt.splice(s,0,t)}}WJ(t,e){this.VJ.Fct(t,e)}Kct(t){this.VJ.Vct(t)}Wct(t){this.Gct.Wct(t),this.VJ.Wct(t);const e=this.Gct.Lct();this.Yct(e)}Yct(t){this.Mrt=this.Mrt.filter((e=>t.oB(e.Xct,e.zct))).map((e=>e.jct&&!t.nB(e.Xct,e.zct)?function(t,e){return{$at:t.$at,jat:t.jat,Qat:t.Qat,Xct:t.Xct,zct:t.zct,jct:e}}(e,!1):e))}nr(){this.Gct.nr(),this.VJ.nr(),this.Mrt=[]}yn(){this.nr()}constructor(t){this.Mrt=[],this.Ht=t,this.Gct=new rW,this.VJ=new rW}};r(),r();var hW=class{get xat(){return this.Qct}set xat(t){this.Qct=t}get Cat(){return this.Eat.Ht.Cat}async Jct(t,e,i){let s;J(i);const n=this.Eat.Zct(t);s=n&&_s(n.zct,t,1e-5)?n.Qat:t;const r=this.$ct(s),o=function(t){return aW.bind(void 0,t)}(s);let h=await this.Ip.tlt(o,r,e,i);for(J(i);h&&this.elt(h.Zut);){const t=dW(h.Zut),s=h.pat;h=await this.Ip.tlt(t,[s],e,i),J(i)}if(!h)return void 0;if(!this.ilt(h.Zut))return h;const a=this.slt(h.Zut);if(t<a.Sn)return await this.findFirstNonAppendedSegmentBeforeSegment(h,e,i,a);if(t>=a.Tn)return await this.findFirstNonAppendedSegmentAfterSegment(h,e,i);if(!h.pat.nlt(h.Zut))throw new g("Fatal buffering error")}async findFirstNonAppendedSegmentAfterSegment(t,e,i){let s=t;do{const n=dW(s.Zut),r=t.pat;s=await this.Ip.tlt(n,[r],e,i),J(i)}while(s&&this.ilt(s.Zut));if(s)return s}async findFirstNonAppendedSegmentBeforeSegment(t,e,i,s){let n=t;do{const s=lW(n.Zut),r=t.pat;n=await this.Ip.tlt(s,[r],e,i),J(i)}while(n&&this.ilt(n.Zut));if(!n){0;const e=t.pat.rlt.Sn;throw new Ou(e,s.Sn,t.pat)}return n}olt(t){return this.Eat.Uct.Bct(t)}hlt(t){return this.Eat.qct(t.WO,t.UO)}ilt(t){const e=this.hlt(t);return e.length>0&&function(t,e){return function(t){let e=se.pB();for(const i of t)e=e.tB(se.gB(i.jat,i.Qat));return e}(t).nB(e.WO,e.UO)}(e,t)&&e.every(fW)}elt(t){return this.Eat.FJ.nB(t.WO,t.UO)}slt(t){const e=this.hlt(t);return{Sn:e[0].Xct,Tn:e[e.length-1].zct}}$ct(t){const e=this.ult(t);if(0===e.length){const t=this.Qct?this.Qct:this.Eat.Ht.Jat;return[t[t.length-1]]}const i=e.filter((t=>{var e;return(null==(e=t.pat)?void 0:e.trt)&&!t.clt}));return i.length>0?i:[e[e.length-1]]}ult(t){return(this.Qct?this.Qct:this.Eat.Ht.Jat).filter((e=>!this.Eat.FJ.Oct(t,e)))}constructor(t,e,i){this.sut=t,this.Eat=e,this.Ip=i}};async function aW(t,e,i,s){const n=e.Zot.llt(t);if(n){if(e.dlt(n)){return(await e._lt(n,i,s)).flt(t)}return n}}async function uW(t,e,i,s){if(Yn(t)){if(0===t.jut)return;const n=e.Zot.vlt(t);if(!n)return;return(await e._lt(n,i,s)).glt(t.jut-1)}return e.Zot.plt(t)}async function cW(t,e,i,s){if(Yn(t)){const n=e.Zot.vlt(t);if(!n)return;const r=await e._lt(n,i,s);if(t.jut+1===r.V)return;return r.glt(t.jut+1)}return e.Zot.wlt(t)}function lW(t){return uW.bind(void 0,t)}function dW(t){return cW.bind(void 0,t)}function fW(t){return t.jct}r();var _W=class{async tlt(t,e,i,s){J(s);const n=this.ylt(e,i);if(!n)return;const r=await t(n,this.blt,s);if(!r)return;const o=n.Alt(r);return{pat:n,Zut:r,Xu:o}}ylt(t,e){if(0===t.length)return;const i=this.Tlt.Slt(t,this.klt?e:void 0,this.Ect,this.gZ.Ij);return this.klt||(this.klt=!0),i}constructor(t,e,i,s){this.Tlt=t,this.Ect=e,this.gZ=i,this.blt=s,this.klt=!1}};r();var vW=class{async tlt(t,e,i,s){J(s);const n=this.Tlt.Elt(e,i,this.Ect);if(!n.length)return;let r;for(const e of n)try{J(s);const i=await t(e,this.blt,s);if(i){const t=e.Alt(i);if(await this.zut.vrt(t.Xu,t._ut))return{Zut:i,pat:e,Xu:t}}}catch(t){th(t),r=t}if(r)throw r}constructor(t,e,i,s){this.Tlt=t,this.Ect=e,this.zut=i,this.blt=s}};function mW(t){return void 0!==t.QR}function gW(t,e){const i=t.ji&&e.ji,s=t.Ti&&e.Ti;if(i||s){if(i&&s)return t.ji*t.Ti-e.ji*e.Ti;if(i)return t.ji-e.ji;if(s)return t.Ti-e.Ti;return(t.ji||1)*(t.Ti||1)-(e.ji||1)*(e.Ti||1)}return 0}function pW(t,e){return gW(t,e)||function(t,e){return t.bG-e.bG}(t,e)}r(),r();var wW=class t{Slt(e,i,s,n){let r=t.sortByQuality(e);if(void 0!==this.xlt&&void 0===i&&e.length>1){const e=t.Rlt(r,this.xlt);e&&(r=e)}const o=this.Elt(r,i,s,n);return o.length?o[o.length-1]:r[0]}Elt(e,i,s,n){var r;const o=t.sortByQuality(e),h={Rut:void 0===n||this.Ilt.kut?this.Ilt.Rut:n,QR:mW(s)&&s.QR?s.QR:1,Clt:s.ji,Plt:s.Ti,Dlt:null==(r=this.Nlt)?void 0:r.restrictToPlayerSize};let a=o;for(const t of this.m_)a=t(a,i,h,this.nw,this.Mlt);return a}static Llt(e){return t.sortByQuality(e)[0]}static Blt(e,i){var s;return i?t.Llt(null!=(s=t.Rlt(e,i))?s:e):t.Llt(e)}static Rlt(t,e){for(const i of e){const e=t.filter((t=>_u(t.gp,i)));if(e.length>0)return e}}static sortByQuality(t){const e=[...t];return e.sort(pW),e}constructor(t,e,i,s,n,r){this.m_=t,this.Ilt=e,this.nw=i,this.Nlt=s,this.xlt=n,this.Mlt=r}};r();var yW=(t,e,i,s,n)=>t.filter((t=>n.dJ(t)&&s.dp(e,t)));r();var bW=(t,e,i)=>t.filter((t=>function(t,e,i){const s=i.Rut;if(s<=0)return!1;return.8*s>t.bG*i.QR}(t,0,i)));r();var AW=(t,e,i,s,n)=>{const r=i.Dlt;if(void 0===r&&!s.Qs)return t;if(!1===r)return t;if(t.length>0&&t[0].Tw!==ee.mE)return t;for(let e=t.length-1;e>=0;e--){const s=t[e];if(s.Ti===i.Plt&&s.ji===i.Clt)return t.slice(0,e+1);if(s.Ti<i.Plt||s.ji<i.Clt)return t.slice(0,e+2)}return[]};r();var SW=class{async tlt(t,e,i,s){let n;for(const r of this.Olt)try{const n=await r.tlt(t,e,i,s);if(n)return n}catch(t){n=t}if(n)throw n}constructor(t){this.Olt=t}};r(),r();var TW=class{async Flt(t,e,i,s){let n;for(const r of this.Vlt)try{return await r.Flt(t,e,i,s)}catch(t){th(t),n=t}throw n}constructor(t){this.Vlt=t}};r();var kW=class{async Flt(t,e,i,s){var n;const r=await this.fW.Qk({Xu:t,jk:Rr.bk,Jk:e?{Range:"bytes="+e[0]+"-"+(null!=(n=e[1])?n:"")}:void 0,xE:i,AE:xe.GET,Tw:Mr.iE,Uw:s});return await r.Dk()}constructor(t){this.fW=t}};r();var EW=class{async Flt(t,e,i,s){const n=await this.zut.grt(t,e);if(n)return n.buffer;if(e){const i=await this.zut.grt(t);if(i)return Rc(new j(i.buffer),e[0],e[1])}throw new mc({Xu:t,_ut:e,xE:!1})}constructor(t){this.zut=t}};r();var xW=1.05,RW=(t,e,i,s)=>{if(!1===i.Dlt)return t;if(s.qg)return t;const n=s.Yg;var r;const o=(null!=(r=null==n?void 0:n.width)?r:i.Clt)*xW;var h;const a=(null!=(h=null==n?void 0:n.height)?h:i.Plt)*xW;for(let e=t.length-1;e>=0;e--){const i=t[e];if(i.Ti<=a&&i.ji<=o)return t.slice(0,e+1)}return[]},IW=class{static Ait(t,e,i,s,n,r,o,h,a,u){const c=function(t,e){return new TW([new EW(e),new kW(t)])}(r,o),l=new wW([yW],n,Ms.Ys,h,a,u),d=new vW(l,e,o,c),f=new wW([bW,yW,AW,RW],n,Ms.Ys,h,a,u),_=new _W(f,e,s,c),v=new SW([d,_]);return new hW(t,i,v)}};r(),r();var CW=class extends pe{constructor(t,e,i,s,n,r=0){super(Ti.$y),this.segmentStartTime=t,this.error=e,this.trackType=i,this.track=s,this.quality=n,this.retryCount=r}};r();var PW=class extends pe{constructor(t,e){super(Ti.Ay),this.track=t,this.segments=e}},DW=class extends ri{constructor(t,e){super(e),this.Wlt=t}},NW=[Ti.eb,Ti.sb],MW=class extends Co{get bat(){return this.Ult}get Sat(){return this.Glt}set xat(t){this.Hlt.xat=t}get xat(){return this.Hlt.xat}get Cat(){return this.Eat.Ht.Cat}Zlt(t){return!this.C2||!t||!Ph(this.C2.yht,t.yht)}nut(t){if(!this.Ult)return!1;const e=this.Ult.Zut,i=se.gB(e.WO,e.UO),s=this.Xlt.xct,n=s.sB(t);return n<0?i.wr(t,sW):i.oB(t,s.Tn(n),!0,!0,sW)}async eut(t){const e=this.Eat.Ht.Jat;for(;;){let n;try{var i;J(t),this.rut();if(this.out())break;n=this.zlt();const r=await this.tlt(n,t);if(void 0===r)break;if(this.Ult=r,!LW(this.Ult)){await this.qlt(this.Ult,t);continue}var s;if(this.Glt&&!ZN(this.Glt.pat.Jrt,this.Ult.pat.Jrt)&&await this.Mlt._J(this.Ult.pat),this.Ult.pat.TG&&(!this.Sat||(null==(i=this.Glt)?void 0:i.pat)!==this.Ult.pat))null==(s=this.hH)||s.DG(this.Ult.pat.TG);await this.Ylt(n,this.Ult.Zut,t),this.C2=await this.Klt(this.Ult.pat,t);const o=await this.Xut(this.Ult,t),h=this.Xlt.wR,a=this.Glt;this.Glt=await this.jlt(o,t);const u=this.Xlt.wR;this.Qlt(a,this.Ult,h,u,n),e.forEach((t=>t.clt=!1)),this.Jlt=0,this.$lt=0}catch(i){if(i instanceof Ou){this.A3(i.Sn,i.Tn,i.pat);continue}if(i instanceof DW){let s=500;if(e.every((t=>t.clt))){if(2===this.Jlt){const t=this.Xlt.wR;if(this.tdt(this.Ult),this.Qlt(this.Glt,this.Ult,t,t,n),e.forEach((t=>t.clt=!1)),this.$lt+=1,this.Jlt=0,this.$lt===this.edt.maxRetries)throw new A(Qa.MEDIA_LOAD_ERROR,"The segments could not be loaded.",i);continue}this.Jlt++;const t=this.edt.minimumBackoff*2**(this.Jlt-1);s=_.min(t,this.edt.maximumBackoff)}await ke(s,t);continue}throw this.idt=se.pB(),i}finally{this.Ult=void 0}}}Qlt(t,e,i,s,n){const r=s.iB(i),o=e.pat,h=o.sdt(e.Zut),a=o.nlt(e.Zut);let u=e.Zut.WO,c=e.Zut.UO;h&&(u=_.min(u,_.max(0,o.rlt.Sn-.05))),a&&(c=_.max(c,o.rlt.Tn));const l=se.gB(u,c).iB(s);if(0===r.V)return void this.ndt(i,l,u,n);if(h||this.idt.V>0){const t=l.jn(se.gB(u,r.Sn(0)));this.rdt(t)}const d=r.jL().jn(se.gB(r.Sn(0),r.Tn(r.V-1)));if(this.rdt(d),a){const t=l.jn(se.gB(r.Tn(r.V-1),c));this.rdt(t)}if(this.idt.V>0){const t=this.idt.iB(r);this.rdt(t),this.idt=se.pB()}const f=o.Zot,v=Yn(e.Zut)?void 0:f.plt(e.Zut);var m;const g=null!=(m=null==t?void 0:t.Zut)?m:this.odt(v)?v:void 0;if(g){const t=this.Eat.qct(g.WO,g.UO);if(t.length>0){const e=se.gB(t[t.length-1].zct,r.Sn(0));this.rdt(e)}}const p=Yn(e.Zut)?void 0:f.wlt(e.Zut);if(p&&this.odt(p)){const t=this.Eat.qct(p.WO,p.UO);if(t.length>0){const e=se.gB(r.Tn(r.V-1),t[0].Xct);this.rdt(e)}}}ndt(t,e,i,s){let n=e;0===this.idt.V&&(this.idt=se.gB(t.Tn(t.V-1),i)),0===n.V&&void 0!==s&&(n=se.mB(s)),this.idt=this.idt.tB(n),this.Eat.Kct(this.idt)}odt(t){return!!t&&this.Eat.qct(t.WO,t.UO).length>0}rdt(t){const e=t.iB(this.Xlt.wR);for(let t=0;t<e.V;t++)e.Sn(t)!==e.Tn(t)&&this.hdt.WJ(e.Sn(t),e.Tn(t))}adt(t,e){throw new DW(t,e)}rut(){if(this.idt.V>0)return;var t;const e=this.Xlt.xct.tB(null!=(t=this.Xlt.FJ.YL()._B(this.Xlt.Ict))?t:se.pB());this.Eat.Wct(e),this.udt&&!this.cdt(this.udt)&&(this.udt=void 0),this._o(new PW(this.Eat.Ht.Cat,this.Eat.Kat()))}out(){return this.Glt&&this.Glt.pat.nlt(this.Glt.Zut)?(this.hdt.a3(),!0):(this.udt&&this.udt.pat.nlt(this.udt.Zut)&&this.cdt(this.udt)&&this.hdt.a3(),!!this.Xlt.Rct)}cdt(t){return this.Eat.Uct.nB(t.ldt,t.ddt)}fdt(t,e,i){(!this.udt||this.udt.Zut.UO<t.Zut.UO)&&(this.udt=ol({},t,{ldt:e,ddt:i}))}zlt(){const t=this.Xlt.Ict;return t}async tlt(t,e){J(e);const i=this.Glt?this.Glt.pat:void 0,s=await this.Hlt.Jct(t,i,e);if(s)return s}async qlt(t,e){const i={stack:[],error:void 0,hasError:!1};try{const s=t.pat,n=s.Zot,r=Yn(t.Zut)?n.vlt(t.Zut):t.Zut,o=s.vdt._dt(),h=n.mdt(r);if(h&&h.getTime()<=o.getTime())return this.adt(Yu.Dht,"Segment is not available.");const a=n.gdt(r).getTime()-o.getTime();0;const u=gs(i,da.$w([e]),!1);await Promise.race([ke(a,u.Uw),s.py(Ne.fat,u.Uw)])}catch(t){i.error=t,i.hasError=!0}finally{co(i)}}async Klt(t,e,i){void 0===i&&(i=0),J(e);const s=t.pdt;if(!s)return this.C2;try{if(!t.wdt){const i=await this.ydt.Yut(s,e);t.wdt=i.Kk}}catch(s){if(th(s),hA(s)){if(2===i)return t.clt=!0,this.adt(Yu.Wht,"Could not fetch the initializer.");const s=_.min(this.edt.minimumBackoff*2**i,this.edt.maximumBackoff);return await ke(s,e),this.Klt(t,e,i+1)}throw new A(Qa.MEDIA_LOAD_ERROR,s.message,s)}J(e);try{this.Zlt(t.wdt)&&await this.hdt.Got(t.wdt,t,e)}catch(t){if(th(t),hA(t))return this.adt(Yu.Wht,"Could not append the initializer.");throw new A(Qa.MEDIA_DECODE_ERROR,t.message,t)}return t.wdt}async Xut(t,e,i){void 0===i&&(i=0);try{return J(e),await this.ydt.Xut(t,e)}catch(s){if(th(s),s instanceof eW){if(function(t){return t instanceof Dc}(s.cause))return this.bdt(new eW(s,t.Zut,t.pat),i),this.adt(Yu.Dht,"Could not append the segment.");if(2===i)return t.pat.clt=!0,this.bdt(s,i),this.adt(Yu.Dht,"Could not fetch the segment.");const n=_.min(this.edt.minimumBackoff*2**i,this.edt.maximumBackoff);return await ke(n,e),await this.Xut(t,e,i+1)}throw new A(Qa.MEDIA_LOAD_ERROR,s.message,s)}}async Ylt(t,e,i){const s=this.Eat.qct(e.WO,e.UO),n=this.Xlt.xct._B(t);let r=se.pB();for(const t of s){J(i);const e=t.Xct,s=t.zct,o=n&&n.oB(e,s)?_.max(e,n.Tn(0)):e,h=s;o<h&&(r=r.tB(se.gB(o,h)))}for(let t=0;t<r.V;t++)await this.hdt.Adt(r.Sn(t),r.Tn(t),i);this.rut()}async jlt(t,e){try{J(e);const i=await this.hdt.Sdt(t.qut,t.Zut,t.pat,e);return this.Tdt(t,i.ldt,i.ddt),this.fdt(t,i.ldt,i.ddt),t}catch(e){if(th(e),hA(e))return this.bdt(new eW(e,t.Zut,t.pat),0),this.adt(Yu.Dht,"Could not append the segment.");if(hD(e)&&this.hdt.Oj())return this.adt(Yu.Mht,"Buffer is full. Could not reduce the buffer.");throw new A(Qa.MEDIA_DECODE_ERROR,e.message,e)}}Tdt(t,e,i){const s=t.pat,n=t.Zut;this.tut(n,s,e,i)}tut(t,e,i,s){this.Eat.tut({$at:e.o,jat:t.WO,Qat:t.UO,Xct:i,zct:s,jct:!0}),this.hdt.UJ(i,s)}A3(t,e,i){const s=se.gB(t,e);i?this.Eat.WJ(s,i.o):this.Eat.Kct(s),this.hdt.WJ(t,e)}tdt(t){const e=se.gB(t.Zut.WO,t.Zut.UO);t.pat?this.Eat.WJ(e,t.pat.o):this.Eat.Kct(e)}bdt(t,e){const i=t.pct,s=this.Eat.Ht.Cat,n=this.Eat.Ht.wa,r=t.yct.pat&&t.yct.pat.wa,o=new CW(i,t.message,s,n,r,e);this._o(o)}nr(){this.C2=void 0,this.Glt=void 0}yn(){this.nr(),this.udt=void 0,this.ydt.vn(NW,this.Ds),this.ydt.yn()}constructor(t,e,i,s,n,r,o,h,a){super(),this.sut=t,this.Eat=e,this.Xlt=i,this.Hlt=s,this.ydt=n,this.hdt=r,this.Mlt=o,this.edt=h,this.hH=a,this.Ult=void 0,this.C2=void 0,this.Glt=void 0,this.udt=void 0,this.Jlt=0,this.$lt=0,this.idt=se.pB(),this.ydt.bn(NW,this.Ds)}};function LW(t){const e=t.pat,i=e.Zot,s=Yn(t.Zut)?i.vlt(t.Zut):t.Zut;return i.kdt(s,e.vdt._dt())}var BW=0,OW=class{Ait(t){const e=BW++,i=this.Ect.m3,s=new oW(t),n=this.Edt&&dT(i),r=new BV(i,n),o=new nW(this.Ect,this.S9,this.O3,this.gZ),h=IW.Ait(e,this.Ect,s,this.gZ,r,this.fW,this.zut,this.Nlt,this.xlt,this.Mlt),a=function(t){switch(t){case ee.vE:return qh.vE;case ee.mE:return qh.mE;case ee.Tk:return qh.Tk;case ee.gE:return qh.gE;default:return qh.iE}}(i),u=function(t,e,i,s){const n=new UV(s),r=new iW(t,e,i);return new HV([n,r])}(new NV(this.fW,a),r,n,this.zut),c=new MW(e,s,o,h,u,this.Ect,this.Mlt,this.edt,this.hH);return new DV(e,t.Act,s,c,this.S9)}xdt(t,e){const i={Cat:ee.Tk,Act:e,Jat:e.Jat,wa:t.wa};return this.Ait(i)}constructor(t,e,i,s,n,r,o,h,a,u,c,l){this.Ect=t,this.S9=e,this.O3=i,this.fW=s,this.gZ=n,this.Edt=r,this.zut=o,this.Nlt=h,this.xlt=a,this.Mlt=u,this.edt=c,this.hH=l}};r();var FW=class{dJ(t){return this.Cot.dJ(t)}_J(t){return this.Cot._J(t)}constructor(t){this.Cot=t}},VW=class{dJ(t){return!0}_J(t){return Promise.resolve(void 0)}};r(),r();var WW=class extends Ds{ka(){return new UW(this.NC.map((t=>t.wa)))}constructor(t,e){super(No.uC),this.NC=t||[],this.Ht=e}},UW=class extends pe{constructor(t){super("targetqualitychanged"),this.qualities=t,this.quality=this.qualities.length>0?this.qualities[0]:void 0}};r();var GW=class extends en{ka(){return new HW(this.quality.wa)}constructor(t){super(No.QUALITY_UNAVAILABLE),this.quality=t}},HW=class extends Un{constructor(t){super("qualityunavailable"),this.quality=t}};r();var ZW=class extends pe{constructor(){super(No.NO_QUALITY)}};function XW(t){return{bG:t.bG,gp:t.Jrt,Ti:zW(t)?t.Ti:0,Tw:zW(t)?ee.mE:ee.vE,ji:zW(t)?t.ji:0}}function zW(t){const e=t;return void 0!==e.Ti&&void 0!==e.ji}r();var qW=0,YW=class extends Co{get DC(){return this.Hat.Rdt.map(KW).filter(Bo)}Idt(t){for(const e of t)e.bn("update",this.Cdt),this.TO.kO(e)}Pdt(t){if(!this.TO.EO(t))return;t.aW();const e=this.Ddt();if(this.Ndt&&ms(this.Ndt,t)){const t=this.Ndt.filter((t=>t.trt));0===t.length&&e.length>0?this.MC=e:this.MC=t}else this.MC=e;this._o(new GW(t))}Mdt(t){if(!this.TO.EO(t))return;const e=this.Ddt();t.hW(),this.Ndt&&!function(t,e){return zm(t,e,((t,e)=>t===e))}(this.Ndt,e)||(this.MC=this.Ddt())}Ddt(){return this.TO.lC.filter((t=>t.trt))}get RC(){return this.Ldt}Bdt(t){this.Ldt=t.pat,this._o(t)}get Act(){return this.Hat}get Rt(){return this.qe}set Rt(t){this.DO(t)}get wa(){return this.eu||(this.eu=yi(this)),this.eu}get Odt(){return this.Fdt}set Odt(t){this.Fdt=t}get o(){return this.zS}get IC(){return this.IO}get Lt(){return this.r5}get gs(){return this.LA}get Ch(){return this.CO}set Ch(t){t!==this.CO&&(this.CO=t,this._o(new Zs(this)))}get CE(){return this.Rt?"enabled":"disabled"}get MC(){return this.Ndt}set MC(t){let e;if(t){const i=this.RC?XW(this.RC):void 0;e=t.filter((t=>t.trt&&Ms.Ys.dp(i,XW(t))))}else e=this.Ddt();0!==e.length?(this.Ndt=t&&this.TO.EO(t)?t:void 0,this.Vdt=this.Wdt(this.Ndt),this._o(new WW(t,this))):this._o(new ZW)}get Udt(){return this.Vdt}Wdt(t){if(!t||0===t.length)return;const e=[];for(const i of this.Jat)for(const s of t)s===i.pat&&s.trt&&e.push(i);return e}get NC(){return this.TO}get Jat(){return this.Gdt}Hdt(t){this.Zdt.push(t),this.Gdt.push(...t.Jat);const e=t.Jat.map((t=>t.pat));this.Idt(e)}get Cat(){return this.Xdt}get zdt(){return this.Zdt}get qdt(){return this.Jat.every((t=>t.qdt))}DO(t){this.qe=t,this.Fdt&&(t?this.Fdt.hW(this):this.Fdt.aW(this))}Ydt(t){this.qe=t,this.Kdt!==t&&(this.Kdt=t,this._o(new bc(this)))}yn(){for(const t of this.TO.lC)t.vn("update",this.Cdt);this.TO.nr()}constructor(t,e,i="alternative"){super(),this.Ldt=void 0,this.qe=!1,this.eu=void 0,this.Fdt=void 0,this.zS="",this.Kdt=!1,this.TO=new gl,this.Gdt=[],this.Ndt=void 0,this.Vdt=void 0,this.Cdt=()=>this._o(new Zs(this)),this.Zdt=[],this.Hat=t,this.zS=String(qW++),this.IO=oi(),this.r5=i,this.LA=t.Qtt,this.CO=t.Ch,this.Xdt=t.Tw,this.Gdt=t.Jat,this.Idt(e)}};function KW(t){if("urn:mpeg:dash:role:2011"===t.c9)return jW(t);if("urn:tva:metadata:cs:AudioPurposeCS:2007"===t.c9){if("1"===t.Mx)return ln.SC;if("2"===t.Mx)return ln.kC}}function jW(t){if(void 0!==(null==t?void 0:t.Mx))switch(t.Mx){case"caption":return ln.AC;case"sign":return ln.TC;case"description":return ln.SC;case"enhanced-audio-intelligibility":return ln.kC;default:return}}var QW=class t extends kx{get jdt(){return this.Qdt}set jdt(t){this.Qdt=t}get Rt(){for(const t of this.Z.lC)if(t.CE!==bh.Mh)return!0;return!1}get XG(){const t=this.S9.ER;return this.xct._B(t,.01)}get Jdt(){return this.jdt&&this.$dt[this.jdt.IC]?this.$dt[this.jdt.IC]:se.pB()}get tft(){return this.jdt&&this.eft[this.jdt.IC]?this.eft[this.jdt.IC]:se.pB()}get Pct(){return new se([0,1/0])}get wR(){return this.Jdt}get FJ(){return this.ift?this.ift.Tat.FJ.Dct:se.pB()}get xct(){return RV(this.wR,this.FJ).$L(2*this.sft)}get Sn(){return this.nft?this.nft.rlt.Sn:NaN}get Tn(){return this.nft?this.nft.rlt.Tn:NaN}get PR(){const t=this.Tn;return!!t&&this.S9.ER>=t}get sft(){var t;const e=this.rft();if(!e)return.04;var i;return 1/(null!=(i=this.jdt&&(null==e||null==(t=e.oft)?void 0:t._F()))?i:25)}get Ti(){return this.KA}get m3(){return ee.Tk}get QR(){return this.fZ}set QR(t){this.fZ=t}get tI(){return this.tft}get hI(){if(!this.jdt)return se.mB(0);const t=this.hft(this.jdt),e=null==t?void 0:t.aft,i=null==t?void 0:t.uft;if(void 0===i||void 0===e)return se.mB(0);const s=_.max(e,this.S9.ER);return new se([i,s]).YL()}get ji(){return this.YA}a3(){}Cct(){return this.xct.wr(this.Tn)}async Sdt(t,e,i,s){const n=t.Tw===Ce.iJ?t.Kk.yht:await t.Kk.Dk(s),r=this.findTrackForRepresentation(i),o=this.$dt[r.IC],h=e.WO,a=e.UO,u=new se([h,a]);o||(this.$dt[r.IC]=se.pB(),this.eft[r.IC]=se.pB()),this.Lot(s);const c=this.Hot(new j(n),e,i,r);for(const t of c)r._W(t);return this.$dt[r.IC]=this.$dt[r.IC].tB(u),{ldt:h,ddt:a}}Lot(t){const e=oD(this.S9.ER,void 0,void 0,this.wR,this.gZ.Dj,this.gZ.Ej);for(const[i,s]of e)ah(this.Adt(i,s,t))}Got(t,e,i){return this.cft.Got(t,e,i)}Hot(t,e,i,s){return this.cft.Hot(t,e,i,s)}Adt(t,e,i){const s=t,n=e;let r=new se([t,e]);for(const t of this.Z.lC){const e=[];for(const i of t.L.lC)i.WO>=s&&i.UO<=n?e.push(i):r=r.iB(new se([i.WO,i.UO]));for(const i of e)t.sW(i);const i=this.$dt[t.IC];i&&(this.$dt[t.IC]=i.iB(r))}return Promise.resolve()}WJ(t,e){}UJ(t,e){}Oj(){return!1}hW(t){const e=this.lft(t);if(e&&this.jdt!==e){this.jdt=e;for(const t of this.Z.lC)t!==e&&(t.CE=bh.Mh);if(this.cft.nr(),this.ift&&(this.ift.yn(),this.ift=void 0),this.jdt){const t=this.hft(this.jdt);this.ift=new OW(this,this.S9,this.S9,this.fW,this.gZ,!1,this.zut,void 0,void 0,new VW,qT,void 0).xdt(this.jdt,t),this.ift.bn(yo.fa,this.dft),this.ift.Sn(Yu.kht)}}}aW(t){if(this.jdt===t){const e=this.lft(t);e&&this.jdt===e&&(this.jdt=void 0),this.ift&&(this.ift.yn(),this.ift=void 0)}}async $n(t){await this.nr(),this.nft=t,this.fft(t)}_ft(t){const e=function(t){const e=t.Jat&&t.Jat.length>0&&t.Jat[0],i=e&&vx(e.Jrt),s=vx(t.Jrt),n=t.jq===au.APPLICATION_TTML_XML;return i||s||n?Lr.TTML:t.jq===au.TEXT_VTT||wx(t.jq,t.Jrt)?Lr.WEBVTT:Lr.DEFAULT}(t);if(!e)throw new g("Unknown TextTrack type for Representation");const i=t.vft.concat(t.Rdt);return this.mft(function(t){return ms(t.filter((t=>"urn:mpeg:dash:role:2011"===t.c9)).map((t=>t.Mx)).filter(Bo),"caption")?Li.$V:Li.JV}(i),t.Ch,t.Qtt,!1,e,t,function(t){return t.filter((t=>"urn:mpeg:dash:role:2011"===t.c9)).some((t=>function(t){return"forced-subtitle"===t||"forced_subtitle"===t}(t.Mx)))}(t.vft),t.Rdt.map(jW).filter(Bo))}fft(t){for(const e of t.gft){const t=this._ft(e);this.pft.set(t.IC,e),t.rI=Zu.LOADED,this.tt(t)}}it(t){this.pft.delete(t.IC),super.it(t)}mft(t,e,i,s,n,r,o,h){var a;const u=r.Jat.reduce(((t,e)=>t||e.o),void 0);var c;const l=null!=(c=null!=u?u:null==(a=r.o)?void 0:a.toString())?c:"";return this.lW.OI(t,l,e,i,s,n,o,h)}async nr(){await super.nr(),this.ift&&(await this.ift.nr(Yu.qht),this.ift.vn(yo.fa,this.dft),this.ift=void 0),this.nft=void 0,this.$dt={},this.eft={}}wft(){this.$dt={},this.eft={}}findTrackForRepresentation(e){for(const i of this.Z.lC){const s=this.hft(i);if(s&&t.yft(s)===e)return i}}lft(t){return Fo(this.Z.lC,(e=>t.IC===e.IC))}hft(t){return this.pft.get(t.IC)}rft(){if(!this.jdt)return;const e=this.hft(this.jdt);return e?t.yft(e):void 0}static yft(t){return t.Jat&&t.Jat.length>0?t.Jat[0]:void 0}yn(){for(const t of this.Z.lC)this.lW.mW(t);return super.yn()}constructor(t,e,i,s,n,r){super(),this.KA=0,this.fZ=1,this.ift=void 0,this.$dt={},this.eft={},this.YA=0,this.pft=ne(),this.dft=t=>{0},this.S9=t,this.fW=e,this.gZ=i,this.cft=s,this.zut=n,this.lW=r}},JW=class{get nt(){return this.Hl}async dW(t){if(t.Tw!==ee.Tk)return;const e=function(t,e,i){return vx(e)||t===au.APPLICATION_TTML_XML||t===au.TEXT_VTT?new kV(i):wx(t,e)?new EV:void 0}(t.jq,t.Jrt,this.Xot);if(e){const i=this.bft(e);return this.Aft(i),await i.$n(t),i}}bft(t){return new QW(this.S9,this.fW,this.gZ,t,this.zut,this.lW)}Aft(t){this.Sft.push(t),this.Hl.MG(t.Z)}async nr(){for(const t of this.Sft.slice())await t.nr();En(this.Sft),this.Hl.nr()}async yn(){for(const t of this.Sft)await t.yn();En(this.Sft),this.Hl.yn()}constructor(t,e,i,s,n,r){this.Sft=[],this.Hl=new Iu([]),this.S9=t,this.fW=e,this.gZ=i,this.zut=s,this.lW=n,this.Xot=r}};r();var $W=class extends pe{constructor(t){super(Ti.Hy),this.error=t}};r();var Bs=function(t){return t.pW="static",t.wW="dynamic",t}({});r(),r();var tU=function(t){return t.Tft="kft",t}({}),eU=class extends pe{constructor(){super(tU.Tft)}};r(),r();var iU=class extends pe{constructor(t,e){super(Ti.Ky),this.representation=t,this.previousRepresentation=e}};r(),r(),r();var $u=function(t){return t[t.Eft=0]="Eft",t[t.xft=1]="xft",t[t.Rft=2]="Rft",t[t.Ift=3]="Ift",t[t.Cft=4]="Cft",t[t.Pft=5]="Pft",t}({}),Pu=function(t){return t[t.Dft=0]="Dft",t[t.Nft=1]="Nft",t[t.Mft=2]="Mft",t[t.Lft=3]="Lft",t}({});function sU(t,e,i){return i===$u.Eft?i:e!==Pu.Dft&&e!==Pu.Nft||i!==$u.xft&&i!==$u.Rft?t?e===Pu.Mft?$u.Cft:e===Pu.Lft?$u.Ift:$u.Eft:$u.Pft:$u.Rft}function nU(t,e,i,s){const n={byte:i};let r=$u.xft;const o=[],h=31&du(e,n,s);n.byte+=1;for(let i=0;i<h;i+=1){const h=du(e,n,s),a=4&h,u=3&h;r=sU(Boolean(a),u,r);const c=du(e,n,s),l=du(e,n,s);o.push({Bft:t,sL:-1,Oft:!i,Fft:Boolean(a),Tw:u,Vft:r,Wft:c,Uft:l})}return o}function rU(t,e,i){const s=du(t,e,i);if(!S(s))return String.fromCharCode(s)}function oU(t){const e=t.U0,i={byte:t.V0},s=t.W0,n=du(e,i,s);if(255===n&&(i.byte+=1),181!==n)return;const r=bN(e,i);if(47!==r&&49!==r)return;if(49===r){const t=function(t,e,i){let s="",n=i;for(;n>0;)n-=1,s+=rU(t,e);return s}(e,i,4);if("GA94"!==t)return}if(3!==du(e,i,s))return;47===r&&(i.byte+=1);const o=t;return o.Gft=i.byte,o}function hU(t){return 4===t.O0}function aU(t){const e=t.filter(hU).map(oU).filter(Bo),i=[];for(const t of e)i.push(...nU(t.B0,t.U0,t.Gft,t.W0));return i}r();var uU="und";function cU(t){if(t===uU)return;const e=t.toLowerCase();for(const t of lU)if(t[1]===e||t[2]===e||t["2T"]===e||t["2B"]===e||t[3]===e)return t}var lU=[{l:"Abkhaz",mh:"\u0410\u04a7\u0441\u0443\u0430",1:"ab",2:"abk","2T":"abk","2B":"abk",3:"abk"},{l:"Afar",mh:"Afaraf",1:"aa",2:"aar","2T":"aar","2B":"aar",3:"aar"},{l:"Afrikaans",mh:"Afrikaans",1:"af",2:"afr","2T":"afr","2B":"afr",3:"afr"},{l:"Akan",mh:"Akan",1:"ak",2:"aka","2T":"aka","2B":"aka",3:"aka"},{l:"Albanian",mh:"Shqip",1:"sq",2:"sqi","2T":"sqi","2B":"alb",3:"sqi"},{l:"Amharic",mh:"\u12a0\u121b\u122d\u129b",1:"am",2:"amh","2T":"amh","2B":"amh",3:"amh"},{l:"Arabic",mh:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629",1:"ar",2:"ara","2T":"ara","2B":"ara",3:"ara"},{l:"Aragonese",mh:"Aragon\xe9s",1:"an",2:"arg","2T":"arg","2B":"arg",3:"arg"},{l:"Armenian",mh:"\u0540\u0561\u0575\u0565\u0580\u0565\u0576",1:"hy",2:"hye","2T":"hye","2B":"arm",3:"hye"},{l:"Assamese",mh:"\u0985\u09b8\u09ae\u09c0\u09af\u09bc\u09be",1:"as",2:"asm","2T":"asm","2B":"asm",3:"asm"},{l:"Avaric",mh:"\u0410\u0432\u0430\u0440",1:"av",2:"ava","2T":"ava","2B":"ava",3:"ava"},{l:"Avestan",mh:"avesta",1:"ae",2:"ave","2T":"ave","2B":"ave",3:"ave"},{l:"Aymara",mh:"Aymar",1:"ay",2:"aym","2T":"aym","2B":"aym",3:"aym"},{l:"Azerbaijani",mh:"Az\u0259rbaycanca",1:"az",2:"aze","2T":"aze","2B":"aze",3:"aze"},{l:"Bambara",mh:"Bamanankan",1:"bm",2:"bam","2T":"bam","2B":"bam",3:"bam"},{l:"Bashkir",mh:"\u0411\u0430\u0448\u04a1\u043e\u0440\u0442\u0441\u0430",1:"ba",2:"bak","2T":"bak","2B":"bak",3:"bak"},{l:"Basque",mh:"Euskara",1:"eu",2:"eus","2T":"eus","2B":"baq",3:"eus"},{l:"Belarusian",mh:"\u0411\u0435\u043b\u0430\u0440\u0443\u0441\u043a\u0430\u044f",1:"be",2:"bel","2T":"bel","2B":"bel",3:"bel"},{l:"Bengali",mh:"\u09ac\u09be\u0982\u09b2\u09be",1:"bn",2:"ben","2T":"ben","2B":"ben",3:"ben"},{l:"Bihari",mh:"\u092d\u094b\u091c\u092a\u0941\u0930\u0940",1:"bh",2:"bih","2T":"bih","2B":"bih",3:"bih"},{l:"Bislama",mh:"Bislama",1:"bi",2:"bis","2T":"bis","2B":"bis",3:"bis"},{l:"Bosnian",mh:"Bosanski",1:"bs",2:"bos","2T":"bos","2B":"bos",3:"bos"},{l:"Breton",mh:"Brezhoneg",1:"br",2:"bre","2T":"bre","2B":"bre",3:"bre"},{l:"Bulgarian",mh:"\u0411\u044a\u043b\u0433\u0430\u0440\u0441\u043a\u0438",1:"bg",2:"bul","2T":"bul","2B":"bul",3:"bul"},{l:"Burmese",mh:"\u1019\u103c\u1014\u103a\u1019\u102c\u1018\u102c\u101e\u102c",1:"my",2:"mya","2T":"mya","2B":"bur",3:"mya"},{l:"Catalan",mh:"Catal\xe0",1:"ca",2:"cat","2T":"cat","2B":"cat",3:"cat"},{l:"Chamorro",mh:"Chamoru",1:"ch",2:"cha","2T":"cha","2B":"cha",3:"cha"},{l:"Chechen",mh:"\u041d\u043e\u0445\u0447\u0438\u0439\u043d",1:"ce",2:"che","2T":"che","2B":"che",3:"che"},{l:"Chichewa",mh:"Chichewa",1:"ny",2:"nya","2T":"nya","2B":"nya",3:"nya"},{l:"Chinese",mh:"\u4e2d\u6587",1:"zh",2:"zho","2T":"zho","2B":"chi",3:"zho"},{l:"Chuvash",mh:"\u0427\u04d1\u0432\u0430\u0448\u043b\u0430",1:"cv",2:"chv","2T":"chv","2B":"chv",3:"chv"},{l:"Cornish",mh:"Kernewek",1:"kw",2:"cor","2T":"cor","2B":"cor",3:"cor"},{l:"Corsican",mh:"Corsu",1:"co",2:"cos","2T":"cos","2B":"cos",3:"cos"},{l:"Cree",mh:"\u14c0\u1426\u1403\u152d\u140d\u140f\u1423",1:"cr",2:"cre","2T":"cre","2B":"cre",3:"cre"},{l:"Croatian",mh:"Hrvatski",1:"hr",2:"hrv","2T":"hrv","2B":"hrv",3:"hrv"},{l:"Czech",mh:"\u010ce\u0161tina",1:"cs",2:"ces","2T":"ces","2B":"cze",3:"ces"},{l:"Danish",mh:"Dansk",1:"da",2:"dan","2T":"dan","2B":"dan",3:"dan"},{l:"Divehi",mh:"Divehi",1:"dv",2:"div","2T":"div","2B":"div",3:"div"},{l:"Dutch",mh:"Nederlands",1:"nl",2:"nld","2T":"nld","2B":"dut",3:"nld"},{l:"Dzongkha",mh:"\u0f62\u0fab\u0f7c\u0f44\u0f0b\u0f41",1:"dz",2:"dzo","2T":"dzo","2B":"dzo",3:"dzo"},{l:"English",mh:"English",1:"en",2:"eng","2T":"eng","2B":"eng",3:"eng"},{l:"Esperanto",mh:"Esperanto",1:"eo",2:"epo","2T":"epo","2B":"epo",3:"epo"},{l:"Estonian",mh:"Eesti",1:"et",2:"est","2T":"est","2B":"est",3:"est"},{l:"Ewe",mh:"E\u028begbe",1:"ee",2:"ewe","2T":"ewe","2B":"ewe",3:"ewe"},{l:"Faroese",mh:"F\xf8royskt",1:"fo",2:"fao","2T":"fao","2B":"fao",3:"fao"},{l:"Fijian",mh:"Na Vosa Vaka-Viti",1:"fj",2:"fij","2T":"fij","2B":"fij",3:"fij"},{l:"Finnish",mh:"Suomi",1:"fi",2:"fin","2T":"fin","2B":"fin",3:"fin"},{l:"French",mh:"Fran\xe7ais",1:"fr",2:"fra","2T":"fra","2B":"fre",3:"fra"},{l:"Fula",mh:"Fulfulde",1:"ff",2:"ful","2T":"ful","2B":"ful",3:"ful"},{l:"Galician",mh:"Galego",1:"gl",2:"glg","2T":"glg","2B":"glg",3:"glg"},{l:"Georgian",mh:"\u10e5\u10d0\u10e0\u10d7\u10e3\u10da\u10d8",1:"ka",2:"kat","2T":"kat","2B":"geo",3:"kat"},{l:"German",mh:"Deutsch",1:"de",2:"deu","2T":"deu","2B":"ger",3:"deu"},{l:"Greek",mh:"\u0395\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ac",1:"el",2:"ell","2T":"ell","2B":"gre",3:"ell"},{l:"Guaran\xed",mh:"Ava\xf1e'\u1ebd",1:"gn",2:"grn","2T":"grn","2B":"grn",3:"grn"},{l:"Gujarati",mh:"\u0a97\u0ac1\u0a9c\u0ab0\u0abe\u0aa4\u0ac0",1:"gu",2:"guj","2T":"guj","2B":"guj",3:"guj"},{l:"Haitian",mh:"Krey\xf2l Ayisyen",1:"ht",2:"hat","2T":"hat","2B":"hat",3:"hat"},{l:"Hausa",mh:"\u0647\u064e\u0648\u064f\u0633\u064e",1:"ha",2:"hau","2T":"hau","2B":"hau",3:"hau"},{l:"Hebrew",mh:"\u05e2\u05d1\u05e8\u05d9\u05ea",1:"he",2:"heb","2T":"heb","2B":"heb",3:"heb"},{l:"Herero",mh:"Otjiherero",1:"hz",2:"her","2T":"her","2B":"her",3:"her"},{l:"Hindi",mh:"\u0939\u093f\u0928\u094d\u0926\u0940",1:"hi",2:"hin","2T":"hin","2B":"hin",3:"hin"},{l:"Hiri Motu",mh:"Hiri Motu",1:"ho",2:"hmo","2T":"hmo","2B":"hmo",3:"hmo"},{l:"Hungarian",mh:"Magyar",1:"hu",2:"hun","2T":"hun","2B":"hun",3:"hun"},{l:"Interlingua",mh:"Interlingua",1:"ia",2:"ina","2T":"ina","2B":"ina",3:"ina"},{l:"Indonesian",mh:"Bahasa Indonesia",1:"id",2:"ind","2T":"ind","2B":"ind",3:"ind"},{l:"Interlingue",mh:"Interlingue",1:"ie",2:"ile","2T":"ile","2B":"ile",3:"ile"},{l:"Irish",mh:"Gaeilge",1:"ga",2:"gle","2T":"gle","2B":"gle",3:"gle"},{l:"Igbo",mh:"Igbo",1:"ig",2:"ibo","2T":"ibo","2B":"ibo",3:"ibo"},{l:"Inupiaq",mh:"I\xf1upiak",1:"ik",2:"ipk","2T":"ipk","2B":"ipk",3:"ipk"},{l:"Ido",mh:"Ido",1:"io",2:"ido","2T":"ido","2B":"ido",3:"ido"},{l:"Icelandic",mh:"\xcdslenska",1:"is",2:"isl","2T":"isl","2B":"ice",3:"isl"},{l:"Italian",mh:"Italiano",1:"it",2:"ita","2T":"ita","2B":"ita",3:"ita"},{l:"Inuktitut",mh:"\u1403\u14c4\u1483\u144e\u1450\u1466",1:"iu",2:"iku","2T":"iku","2B":"iku",3:"iku"},{l:"Japanese",mh:"\u65e5\u672c\u8a9e",1:"ja",2:"jpn","2T":"jpn","2B":"jpn",3:"jpn"},{l:"Javanese",mh:"Basa Jawa",1:"jv",2:"jav","2T":"jav","2B":"jav",3:"jav"},{l:"Kalaallisut",mh:"Kalaallisut",1:"kl",2:"kal","2T":"kal","2B":"kal",3:"kal"},{l:"Kannada",mh:"\u0c95\u0ca8\u0ccd\u0ca8\u0ca1",1:"kn",2:"kan","2T":"kan","2B":"kan",3:"kan"},{l:"Kanuri",mh:"Kanuri",1:"kr",2:"kau","2T":"kau","2B":"kau",3:"kau"},{l:"Kashmiri",mh:"\u0643\u0634\u0645\u064a\u0631\u064a",1:"ks",2:"kas","2T":"kas","2B":"kas",3:"kas"},{l:"Kazakh",mh:"\u049a\u0430\u0437\u0430\u049b\u0448\u0430",1:"kk",2:"kaz","2T":"kaz","2B":"kaz",3:"kaz"},{l:"Khmer",mh:"\u1797\u17b6\u179f\u17b6\u1781\u17d2\u1798\u17c2\u179a",1:"km",2:"khm","2T":"khm","2B":"khm",3:"khm"},{l:"Kikuyu",mh:"G\u0129k\u0169y\u0169",1:"ki",2:"kik","2T":"kik","2B":"kik",3:"kik"},{l:"Kinyarwanda",mh:"Kinyarwanda",1:"rw",2:"kin","2T":"kin","2B":"kin",3:"kin"},{l:"Kyrgyz",mh:"\u041a\u044b\u0440\u0433\u044b\u0437\u0447\u0430",1:"ky",2:"kir","2T":"kir","2B":"kir",3:"kir"},{l:"Komi",mh:"\u041a\u043e\u043c\u0438",1:"kv",2:"kom","2T":"kom","2B":"kom",3:"kom"},{l:"Kongo",mh:"Kongo",1:"kg",2:"kon","2T":"kon","2B":"kon",3:"kon"},{l:"Korean",mh:"\ud55c\uad6d\uc5b4",1:"ko",2:"kor","2T":"kor","2B":"kor",3:"kor"},{l:"Kurdish",mh:"Kurd\xee",1:"ku",2:"kur","2T":"kur","2B":"kur",3:"kur"},{l:"Kwanyama",mh:"Kuanyama",1:"kj",2:"kua","2T":"kua","2B":"kua",3:"kua"},{l:"Latin",mh:"Latina",1:"la",2:"lat","2T":"lat","2B":"lat",3:"lat"},{l:"Luxembourgish",mh:"L\xebtzebuergesch",1:"lb",2:"ltz","2T":"ltz","2B":"ltz",3:"ltz"},{l:"Ganda",mh:"Luganda",1:"lg",2:"lug","2T":"lug","2B":"lug",3:"lug"},{l:"Limburgish",mh:"Limburgs",1:"li",2:"lim","2T":"lim","2B":"lim",3:"lim"},{l:"Lingala",mh:"Ling\xe1la",1:"ln",2:"lin","2T":"lin","2B":"lin",3:"lin"},{l:"Lao",mh:"\u0e9e\u0eb2\u0eaa\u0eb2\u0ea5\u0eb2\u0ea7",1:"lo",2:"lao","2T":"lao","2B":"lao",3:"lao"},{l:"Lithuanian",mh:"Lietuvi\u0173",1:"lt",2:"lit","2T":"lit","2B":"lit",3:"lit"},{l:"Luba-Katanga",mh:"Tshiluba",1:"lu",2:"lub","2T":"lub","2B":"lub",3:"lub"},{l:"Latvian",mh:"Latvie\u0161u",1:"lv",2:"lav","2T":"lav","2B":"lav",3:"lav"},{l:"Manx",mh:"Gaelg",1:"gv",2:"glv","2T":"glv","2B":"glv",3:"glv"},{l:"Macedonian",mh:"\u041c\u0430\u043a\u0435\u0434\u043e\u043d\u0441\u043a\u0438",1:"mk",2:"mkd","2T":"mkd","2B":"mac",3:"mkd"},{l:"Malagasy",mh:"Malagasy",1:"mg",2:"mlg","2T":"mlg","2B":"mlg",3:"mlg"},{l:"Malay",mh:"Bahasa Melayu",1:"ms",2:"msa","2T":"msa","2B":"may",3:"msa"},{l:"Malayalam",mh:"\u0d2e\u0d32\u0d2f\u0d3e\u0d33\u0d02",1:"ml",2:"mal","2T":"mal","2B":"mal",3:"mal"},{l:"Maltese",mh:"Malti",1:"mt",2:"mlt","2T":"mlt","2B":"mlt",3:"mlt"},{l:"M\u0101ori",mh:"M\u0101ori",1:"mi",2:"mri","2T":"mri","2B":"mao",3:"mri"},{l:"Marathi",mh:"\u092e\u0930\u093e\u0920\u0940",1:"mr",2:"mar","2T":"mar","2B":"mar",3:"mar"},{l:"Marshallese",mh:"Kajin M\u0327aje\u013c",1:"mh",2:"mah","2T":"mah","2B":"mah",3:"mah"},{l:"Mongolian",mh:"\u041c\u043e\u043d\u0433\u043e\u043b",1:"mn",2:"mon","2T":"mon","2B":"mon",3:"mon"},{l:"Nauru",mh:"Dorerin Naoero",1:"na",2:"nau","2T":"nau","2B":"nau",3:"nau"},{l:"Navajo",mh:"Din\xe9 Bizaad",1:"nv",2:"nav","2T":"nav","2B":"nav",3:"nav"},{l:"Northern Ndebele",mh:"isiNdebele",1:"nd",2:"nde","2T":"nde","2B":"nde",3:"nde"},{l:"Nepali",mh:"\u0928\u0947\u092a\u093e\u0932\u0940",1:"ne",2:"nep","2T":"nep","2B":"nep",3:"nep"},{l:"Ndonga",mh:"Owambo",1:"ng",2:"ndo","2T":"ndo","2B":"ndo",3:"ndo"},{l:"Norwegian Bokm\xe5l",mh:"Norsk (Bokm\xe5l)",1:"nb",2:"nob","2T":"nob","2B":"nob",3:"nob"},{l:"Norwegian Nynorsk",mh:"Norsk (Nynorsk)",1:"nn",2:"nno","2T":"nno","2B":"nno",3:"nno"},{l:"Norwegian",mh:"Norsk",1:"no",2:"nor","2T":"nor","2B":"nor",3:"nor"},{l:"Nuosu",mh:"\ua188\ua320\ua4bf Nuosuhxop",1:"ii",2:"iii","2T":"iii","2B":"iii",3:"iii"},{l:"Southern Ndebele",mh:"isiNdebele",1:"nr",2:"nbl","2T":"nbl","2B":"nbl",3:"nbl"},{l:"Occitan",mh:"Occitan",1:"oc",2:"oci","2T":"oci","2B":"oci",3:"oci"},{l:"Ojibwe",mh:"\u140a\u14c2\u1511\u14c8\u142f\u14a7\u140e\u14d0",1:"oj",2:"oji","2T":"oji","2B":"oji",3:"oji"},{l:"Old Church Slavonic",mh:"\u0421\u043b\u043e\u0432\u0463\u0301\u043d\u044c\u0441\u043a\u044a",1:"cu",2:"chu","2T":"chu","2B":"chu",3:"chu"},{l:"Oromo",mh:"Afaan Oromoo",1:"om",2:"orm","2T":"orm","2B":"orm",3:"orm"},{l:"Oriya",mh:"\u0b13\u0b21\u0b3f\u0b3c\u0b06",1:"or",2:"ori","2T":"ori","2B":"ori",3:"ori"},{l:"Ossetian",mh:"\u0418\u0440\u043e\u043d \xe6\u0432\u0437\u0430\u0433",1:"os",2:"oss","2T":"oss","2B":"oss",3:"oss"},{l:"Panjabi",mh:"\u0a2a\u0a70\u0a1c\u0a3e\u0a2c\u0a40",1:"pa",2:"pan","2T":"pan","2B":"pan",3:"pan"},{l:"P\u0101li",mh:"\u092a\u093e\u0934\u093f",1:"pi",2:"pli","2T":"pli","2B":"pli",3:"pli"},{l:"Persian",mh:"\u0641\u0627\u0631\u0633\u06cc",1:"fa",2:"fas","2T":"fas","2B":"per",3:"fas"},{l:"Polish",mh:"Polski",1:"pl",2:"pol","2T":"pol","2B":"pol",3:"pol"},{l:"Pashto",mh:"\u067e\u069a\u062a\u0648",1:"ps",2:"pus","2T":"pus","2B":"pus",3:"pus"},{l:"Portuguese",mh:"Portugu\xeas",1:"pt",2:"por","2T":"por","2B":"por",3:"por"},{l:"Quechua",mh:"Runa Simi",1:"qu",2:"que","2T":"que","2B":"que",3:"que"},{l:"Romansh",mh:"Rumantsch",1:"rm",2:"roh","2T":"roh","2B":"roh",3:"roh"},{l:"Kirundi",mh:"Kirundi",1:"rn",2:"run","2T":"run","2B":"run",3:"run"},{l:"Romanian",mh:"Rom\xe2n\u0103",1:"ro",2:"ron","2T":"ron","2B":"rum",3:"ron"},{l:"Russian",mh:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439",1:"ru",2:"rus","2T":"rus","2B":"rus",3:"rus"},{l:"Sanskrit",mh:"\u0938\u0902\u0938\u094d\u0915\u0943\u0924\u092e\u094d",1:"sa",2:"san","2T":"san","2B":"san",3:"san"},{l:"Sardinian",mh:"Sardu",1:"sc",2:"srd","2T":"srd","2B":"srd",3:"srd"},{l:"Sindhi",mh:"\u0633\u0646\u068c\u064a\u200e",1:"sd",2:"snd","2T":"snd","2B":"snd",3:"snd"},{l:"Northern Sami",mh:"S\xe1megiella",1:"se",2:"sme","2T":"sme","2B":"sme",3:"sme"},{l:"Samoan",mh:"Gagana S\u0101moa",1:"sm",2:"smo","2T":"smo","2B":"smo",3:"smo"},{l:"Sango",mh:"S\xe4ng\xf6",1:"sg",2:"sag","2T":"sag","2B":"sag",3:"sag"},{l:"Serbian",mh:"\u0421\u0440\u043f\u0441\u043a\u0438",1:"sr",2:"srp","2T":"srp","2B":"srp",3:"srp"},{l:"Gaelic",mh:"G\xe0idhlig",1:"gd",2:"gla","2T":"gla","2B":"gla",3:"gla"},{l:"Shona",mh:"ChiShona",1:"sn",2:"sna","2T":"sna","2B":"sna",3:"sna"},{l:"Sinhala",mh:"\u0dc3\u0dd2\u0d82\u0dc4\u0dbd",1:"si",2:"sin","2T":"sin","2B":"sin",3:"sin"},{l:"Slovak",mh:"Sloven\u010dina",1:"sk",2:"slk","2T":"slk","2B":"slo",3:"slk"},{l:"Slovene",mh:"Sloven\u0161\u010dina",1:"sl",2:"slv","2T":"slv","2B":"slv",3:"slv"},{l:"Somali",mh:"Soomaaliga",1:"so",2:"som","2T":"som","2B":"som",3:"som"},{l:"Southern Sotho",mh:"Sesotho",1:"st",2:"sot","2T":"sot","2B":"sot",3:"sot"},{l:"Spanish",mh:"Espa\xf1ol",1:"es",2:"spa","2T":"spa","2B":"spa",3:"spa"},{l:"Sundanese",mh:"Basa Sunda",1:"su",2:"sun","2T":"sun","2B":"sun",3:"sun"},{l:"Swahili",mh:"Kiswahili",1:"sw",2:"swa","2T":"swa","2B":"swa",3:"swa"},{l:"Swati",mh:"SiSwati",1:"ss",2:"ssw","2T":"ssw","2B":"ssw",3:"ssw"},{l:"Swedish",mh:"Svenska",1:"sv",2:"swe","2T":"swe","2B":"swe",3:"swe"},{l:"Tamil",mh:"\u0ba4\u0bae\u0bbf\u0bb4\u0bcd",1:"ta",2:"tam","2T":"tam","2B":"tam",3:"tam"},{l:"Telugu",mh:"\u0c24\u0c46\u0c32\u0c41\u0c17\u0c41",1:"te",2:"tel","2T":"tel","2B":"tel",3:"tel"},{l:"Tajik",mh:"\u0422\u043e\u04b7\u0438\u043a\u04e3",1:"tg",2:"tgk","2T":"tgk","2B":"tgk",3:"tgk"},{l:"Thai",mh:"\u0e20\u0e32\u0e29\u0e32\u0e44\u0e17\u0e22",1:"th",2:"tha","2T":"tha","2B":"tha",3:"tha"},{l:"Tigrinya",mh:"\u1275\u130d\u122d\u129b",1:"ti",2:"tir","2T":"tir","2B":"tir",3:"tir"},{l:"Tibetan Standard",mh:"\u0f56\u0f7c\u0f51\u0f0b\u0f61\u0f72\u0f42",1:"bo",2:"bod","2T":"bod","2B":"tib",3:"bod"},{l:"Turkmen",mh:"T\xfcrkmen\xe7e",1:"tk",2:"tuk","2T":"tuk","2B":"tuk",3:"tuk"},{l:"Tagalog",mh:"Tagalog",1:"tl",2:"tgl","2T":"tgl","2B":"tgl",3:"tgl"},{l:"Tswana",mh:"Setswana",1:"tn",2:"tsn","2T":"tsn","2B":"tsn",3:"tsn"},{l:"Tonga",mh:"faka Tonga",1:"to",2:"ton","2T":"ton","2B":"ton",3:"ton"},{l:"Turkish",mh:"T\xfcrk\xe7e",1:"tr",2:"tur","2T":"tur","2B":"tur",3:"tur"},{l:"Tsonga",mh:"Xitsonga",1:"ts",2:"tso","2T":"tso","2B":"tso",3:"tso"},{l:"Tatar",mh:"\u0422\u0430\u0442\u0430\u0440\u0447\u0430",1:"tt",2:"tat","2T":"tat","2B":"tat",3:"tat"},{l:"Twi",mh:"Twi",1:"tw",2:"twi","2T":"twi","2B":"twi",3:"twi"},{l:"Tahitian",mh:"Reo M\u0101\u2019ohi",1:"ty",2:"tah","2T":"tah","2B":"tah",3:"tah"},{l:"Uyghur",mh:"\u0626\u06c7\u064a\u063a\u06c7\u0631\u0686\u0647",1:"ug",2:"uig","2T":"uig","2B":"uig",3:"uig"},{l:"Ukrainian",mh:"\u0423\u043a\u0440\u0430\u0457\u043d\u0441\u044c\u043a\u0430",1:"uk",2:"ukr","2T":"ukr","2B":"ukr",3:"ukr"},{l:"Urdu",mh:"\u0627\u0631\u062f\u0648",1:"ur",2:"urd","2T":"urd","2B":"urd",3:"urd"},{l:"Uzbek",mh:"O\u2018zbek",1:"uz",2:"uzb","2T":"uzb","2B":"uzb",3:"uzb"},{l:"Venda",mh:"Tshiven\u1e13a",1:"ve",2:"ven","2T":"ven","2B":"ven",3:"ven"},{l:"Vietnamese",mh:"Ti\u1ebfng Vi\u1ec7t",1:"vi",2:"vie","2T":"vie","2B":"vie",3:"vie"},{l:"Volap\xfck",mh:"Volap\xfck",1:"vo",2:"vol","2T":"vol","2B":"vol",3:"vol"},{l:"Walloon",mh:"Walon",1:"wa",2:"wln","2T":"wln","2B":"wln",3:"wln"},{l:"Welsh",mh:"Cymraeg",1:"cy",2:"cym","2T":"cym","2B":"wel",3:"cym"},{l:"Wolof",mh:"Wolof",1:"wo",2:"wol","2T":"wol","2B":"wol",3:"wol"},{l:"Western Frisian",mh:"Frysk",1:"fy",2:"fry","2T":"fry","2B":"fry",3:"fry"},{l:"Xhosa",mh:"isiXhosa",1:"xh",2:"xho","2T":"xho","2B":"xho",3:"xho"},{l:"Yiddish",mh:"\u05d9\u05d9\u05b4\u05d3\u05d9\u05e9",1:"yi",2:"yid","2T":"yid","2B":"yid",3:"yid"},{l:"Yoruba",mh:"Yor\xf9b\xe1",1:"yo",2:"yor","2T":"yor","2B":"yor",3:"yor"},{l:"Zhuang",mh:"Cuengh",1:"za",2:"zha","2T":"zha","2B":"zha",3:"zha"},{l:"Zulu",mh:"isiZulu",1:"zu",2:"zul","2T":"zul","2B":"zul",3:"zul"}];r();function dU(t){var e;const i=null!=(e=function(t){const e=t.S0,i=new AN;return i.R0(e,0,e.byteLength),MN(i).i1}(t))?e:24;return t.Hft/i}function fU(t){return t.Tw===_t.oD}function _U(t,e,i,s,n){const r=function(t,e,i,s){const n=i.Hft,r=vo.fromNumber(t.vL||0),o=s.kO(H.IF(r,n));return{Zft:s._F(),Xft:s,zft:o,qft:s}}(t,0,i,s),o=H.CF(t.ct||0,i.Hft),h=t.QD||0,a=!(65536&h)&&1!==(h>>24&3);let u;const c=ra(n),l=new Ri;for(;l.nc<c.byteLength;){const t=$h(c,l);if((31&Dg(c,l,1))===CN.q0){const e=new AN;e.R0(n,l.nc-1,l.nc+t-1);const i=new NN(e),s=xN(r.zft,i);u=u||[],u.push(...aU(s))}l.xb(t-1)}return ol({},r,{ct:o._F(),Yft:o,Kft:r.zft._F(),jft:r.Zft,Qft:a,Jft:u,$ft:!1,t_t:!1})}function vU(t){return{EN:t.XD.EN,Hft:t.AN.XD.mN}}function mU(t){return t.Tw===_t.gP}r(),r(),r(),r(),r(),r(),r(),r();var ac=class{sF(t){return this.oet===t.oet&&this.Ytt===t.Ytt}constructor(t,e){this.oet=t,this.Ytt=e}};r();var gU=class{get bet(){return this.e_t}get vet(){return[this]}get wet(){return this.QQ}get $tt(){return this.i_t}get iet(){return new ac(this.$tt.oet,this.$tt.Ytt+this.bet.length-1)}s_t(t){this.e_t+=t}n_t(t){for(const e of t)this.s_t(e)}constructor(t,e){this.QQ=t,this.i_t=e,this.e_t=""}};function pU(t,e){return t===e||t.bet===e.bet&&t.$tt.sF(e.$tt)&&Ai(t.wet,e.wet)}function wU(t,e){return t===e||t.$tt.sF(e.$tt)&&t.iet.sF(e.iet)&&zm(t.vet,e.vet,pU)}var yU=class extends Le{nF(t){return zm(this.U,t.U,wU)}constructor(t,e,i){super(t,e,i,!1)}};r();var bU=class{r_t(t){return t.xV(this)}o_t(t){return on(t,((t,e)=>t.xV(this,e)))}h_t(t,e){return new AU(t,e).a_t()}},AU=class{a_t(){if(this.u_t)return[];for(let t=0;t<this.oet.length;t++)this.c_t(t);return this.l_t(),this.d_t}f_t(t){this.__t=new gU(SO,new ac(this.v_t,t))}l_t(){this.__t&&(this.d_t.push(this.__t),this.__t=null)}c_t(t){const e=this.oet[t];SU(e)?this.__t&&this.l_t():(this.__t||this.f_t(t),this.__t.s_t(e))}get u_t(){return this.oet.every(SU)}constructor(t,e){this.oet=t,this.v_t=e,this.d_t=[],this.__t=null}};function SU(t){return null==t}var TU=class{static m_t(t,e,i){if(e>=i)return;const s=on(t,((t,e)=>new AU(t.map((t=>t?t.g_t():null)),e).a_t()));return 0!==s.length?new yU(e,i,s):void 0}},wl="black",kU="white";r(),r();var EU=[[42,225],[92,233],[94,237],[95,243],[96,250],[123,231],[124,247],[125,209],[126,241],[127,9608],[128,174],[129,176],[130,189],[131,191],[132,8482],[133,162],[134,163],[135,9834],[136,224],[137,32],[138,232],[139,226],[140,234],[141,238],[142,244],[143,251],[144,193],[145,201],[146,211],[147,218],[148,220],[149,252],[150,8216],[151,161],[152,42],[153,8217],[154,9473],[155,169],[156,8480],[157,8226],[158,8220],[159,8221],[160,192],[161,194],[162,199],[163,200],[164,202],[165,203],[166,235],[167,206],[168,207],[169,239],[170,212],[171,217],[172,249],[173,219],[174,171],[175,187],[176,195],[177,227],[178,205],[179,204],[180,236],[181,210],[182,242],[183,213],[184,245],[185,123],[186,125],[187,92],[188,94],[189,95],[190,124],[191,8764],[192,196],[193,228],[194,214],[195,246],[196,223],[197,165],[198,164],[199,9475],[200,197],[201,229],[202,216],[203,248],[204,9487],[205,9491],[206,9495],[207,9499]].reduce(((t,e)=>(t[e[0]]=e[1],t)),{}),xU=class{p_t(t){for(let e=0;e<Bt;e++)t&&(this.w_t[e]=t.w_t[e])}sF(t){for(let e=0;e<Bt;e++)if(this.w_t[e]!==t.w_t[e])return!1;return!0}y_t(){for(let t=0;t<Bt;t++)if(null!==this.w_t[t])return!1;return!0}b_t(t){this.A_t!==t&&(this.A_t=t),this.A_t<0?this.A_t=0:this.A_t>Bt&&(this.A_t=31)}S_t(t){const e=this.A_t+t;this.b_t(e)}T_t(){this.S_t(-1),this.w_t[this.A_t]=null}s_t(t){t>=144&&this.T_t();const e=function(t){return EU[t]?String.fromCharCode(EU[t]):String.fromCharCode(t)}(t);this.addParsedChar(e)}addParsedChar(t){this.A_t>=Bt||(32===Number(t)?(this.w_t[this.A_t]=this.k_t?"</i>":"<i>",this.k_t=!this.k_t):this.w_t[this.A_t]=t,this.S_t(1))}E_t(t){for(let e=t;e<Bt;e++)this.w_t[e]=null}Fb(){this.E_t(0),this.A_t=0}x_t(){this.E_t(this.A_t)}R_t(t,e){const i=this.w_t;let s=null;for(let n=0;n<Bt;n++){const r=i[n];null===r?s=null:(s||(s={qh:n,zh:t,ji:0,Ti:1,w_t:[[]]},e.push(s)),s.w_t[0].push(r),s.ji++)}}xV(t,e){return t.h_t(this.w_t,e)}constructor(){this.w_t=[],this.A_t=0;for(let t=0;t<Bt;t++)this.w_t.push(null);this.k_t=!1}};var RU=class{I_t(t,e){const i="CC"+(this.C_t<<1|this.P_t+1);if(t>=e)return null;const s=(new bU).o_t(this.D_t.slice(1));return 0===s.length?null:{FO:new yU(t,e,s),Nk:i,N_t:this.C_t<<1|this.P_t+1}}nr(){this.M_t(),this.L_t=1}B_t(){return this.L_t}O_t(t){this.L_t=t}b_t(t){this.D_t[this.L_t].b_t(t)}S_t(t){this.D_t[this.L_t].S_t(t)}F_t(){return this.V_t}W_t(t){this.V_t=t}s_t(t,e){if(e<32||e>127)return;let i="";switch(t){case 0:i=void 0!==CU[e]?CU[e]:String.fromCharCode(e);break;case 1:i=PU[e];break;case 2:this.U_t(),i=DU[e];break;case 3:this.U_t(),i=NU[e]}i&&this.D_t[this.L_t].addParsedChar(i)}U_t(){this.D_t[this.L_t].T_t()}G_t(t,e,i){if(t>=e)for(let s=i-1;s>=0;s--)this.D_t[t+s]=this.D_t[e+s];else for(let s=0;s<i;s++)this.D_t[t+s]=this.D_t[e+s]}H_t(t,e){for(let i=0;i<=e;i++)this.D_t[t+i]=new xU}M_t(){this.H_t(0,IU)}Z_t(){this.L_t=this.V_t>0?this.V_t:0,this.M_t()}X_t(t){this.z_t=t}q_t(t){this.Y_t=t}K_t(t){this.j_t=t}Q_t(t){this.J_t=t}constructor(t,e){this.D_t=new Array(IU+1);for(let t=0;t<=IU;t++)this.D_t[t]=new xU;this.L_t=1,this.V_t=0,this.C_t=t,this.P_t=e,this.z_t=!1,this.Y_t=!1,this.j_t=kU,this.J_t=wl,this.nr()}},IU=15,_l=function(t){return t[t.$_t=0]="$_t",t[t.tvt=1]="tvt",t[t.evt=2]="evt",t[t.ivt=3]="ivt",t}({}),CU={39:"\u2019",42:"\xe1",92:"\xe9",94:"\xed",95:"\xf3",96:"\xfa",123:"\xe7",124:"\xf7",125:"\xd1",126:"\xf1",127:"\u2588"},PU={48:"\xae",49:"\xb0",50:"\xbd",51:"\xbf",52:"\u2122",53:"\xa2",54:"\xa3",55:"\u266a",56:"\xe0",57:"\u2800",58:"\xe8",59:"\xe2",60:"\xea",61:"\xee",62:"\xf4",63:"\xfb"},DU={32:"\xc1",33:"\xc9",34:"\xd3",35:"\xda",36:"\xdc",37:"\xfc",38:"\u2018",39:"\xa1",40:"*",41:"'",42:"\u2500",43:"\xa9",44:"\u2120",45:"\xb7",46:"\u201c",47:"\u201d",48:"\xc0",49:"\xc2",50:"\xc7",51:"\xc8",52:"\xca",53:"\xcb",54:"\xeb",55:"\xce",56:"\xcf",57:"\xef",58:"\xd4",59:"\xd9",60:"\xf9",61:"\xdb",62:"\xab",63:"\xbb"},NU={32:"\xc3",33:"\xe3",34:"\xcd",35:"\xcc",36:"\xec",37:"\xd2",38:"\xf2",39:"\xd5",40:"\xf5",41:"{",42:"}",43:"\\",44:"^",45:"_",46:"|",47:"~",48:"\xc4",49:"\xe4",50:"\xd6",51:"\xf6",52:"\xdf",53:"\xa5",54:"\xa4",55:"\u2502",56:"\xc5",57:"\xe5",58:"\xd8",59:"\xf8",60:"\u250c",61:"\u2510",62:"\u2514",63:"\u2518"},fn=class{nr(){this.svt=!0,this.nvt=0,this.Sp=0,this.rvt=this.ovt,this.avt=void 0,this.ovt.nr(),this.uvt.nr(),this.cvt.nr()}lvt(t,e){return[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(7&t)<<1|e>>5&1]}dvt(t,e){const i=this.lvt(t,e),s=(30&e)>>1;let n=kU,r=!1;s<7?n=BU[s]:7===s&&(r=!0);const o=1==(1&e);if(4===this.Sp)return;const h=this.rvt;if(3===this.Sp&&i!==h.B_t()){const t=1+h.B_t()-h.F_t(),e=1+i-h.F_t();h.G_t(e,t,h.F_t()),h.H_t(0,e-1),h.H_t(i+1,IU-i)}h.O_t(i);const a=kO[t<<1&14|e>>5&1]-1;if(a<0)return;const u=function(t,e){const i=e>95?e-96:e-64;return{qtt:TO[i].qtt,ztt:TO[i].ztt,Ytt:TO[i].Ytt,oet:t}}(a,e);h.b_t(u.Ytt),this.rvt.X_t(o),this.rvt.q_t(r),this.rvt.K_t(n),this.rvt.Q_t(wl)}fvt(t,e){this.rvt.X_t(!1),this.rvt.q_t(!1),this.rvt.K_t(kU);const i=this._vt(t,_l.$_t," ".charCodeAt(0));let s=kU,n=!1;const r=1==(1&e);return s=BU[(14&e)>>1],"white_italics"===s&&(s="white",n=!0),this.rvt.X_t(r),this.rvt.q_t(n),this.rvt.K_t(s),i}_vt(t,e,i){if(this.rvt.s_t(e,i),2===this.Sp||3===this.Sp){const e=this.vvt(this.rvt,this.nvt,t);return this.nvt=t,e}return null}vvt(t,e,i){return this.svt?null:2===this.Sp||3===this.Sp?t.I_t(i,i+10):t.I_t(e,i)}mvt(t,e){let i=wl;0==(7&t)&&(i=LU[(14&e)>>1]),this.rvt.Q_t(i)}gvt(t){const e=MU,i=t.pvt,s=t.wvt;let n=null;switch(i){case e.RCL:this.yvt();break;case e.BS:this.bvt();break;case e.AOD:case e.AON:case e.DER:break;case e.RU2:n=this.Avt(2,s);break;case e.RU3:n=this.Avt(3,s);break;case e.RU4:n=this.Avt(4,s);break;case e.FON:n=this.Svt(s);break;case e.RDC:this.Tvt(s);break;case e.TR:this.kvt();break;case e.RTD:this.Evt();break;case e.EDM:n=this.xvt(s);break;case e.CR:n=this.Rvt(s);break;case e.ENM:this.Ivt();break;case e.EOC:n=this.Cvt(s)}return n}Rvt(t){const e=this.rvt;if(3!==this.Sp)return null;const i=this.vvt(e,this.nvt,t),s=e.B_t()-e.F_t()+1;return e.G_t(s-1,s,e.F_t()),e.H_t(0,s-1),e.H_t(e.B_t(),IU-e.B_t()),this.nvt=t,i}Avt(t,e){this.rvt=this.ovt;const i=this.rvt;let s=null;return 3!==this.Sp&&4!==this.Sp&&(s=this.vvt(i,this.nvt,e),this.ovt.Z_t(),this.uvt.Z_t(),this.svt=!1,i.O_t(IU)),this.Sp=3,i.W_t(t),s}Svt(t){return this._vt(t,_l.$_t," ".charCodeAt(0))}xvt(t){const e=this.ovt;let i=null;return 4!==this.Sp&&(i=this.vvt(e,this.nvt,t)),e.M_t(),this.svt=!1,i}Tvt(t){this.Sp=2,this.rvt=this.ovt,this.rvt.W_t(0),this.nvt=t}Ivt(){this.uvt.M_t()}Cvt(t){let e=null;4!==this.Sp&&(e=this.vvt(this.ovt,this.nvt,t));const i=this.uvt;return this.uvt=this.ovt,this.ovt=i,this.yvt(),this.nvt=t,e}yvt(){this.Sp=1,this.rvt=this.uvt,this.rvt.W_t(0)}bvt(){this.rvt.U_t()}kvt(){this.cvt.nr(),this.svt=!1,this.Evt()}Evt(){this.rvt=this.cvt,this.Sp=4}Pvt(t,e,i){return this.rvt.s_t(_l.$_t,e),this._vt(t,_l.$_t,i)}Dvt(t,e,i){const s=1&e?_l.ivt:_l.evt;return this._vt(t,s,i)}Nvt(t){const e=t.Mvt,i=t.pvt,s=t.wvt;if(this.avt===(e<<8|i))return this.avt=void 0,null;if(this.avt=e<<8|i,this.Lvt(e,i))this.dvt(e,i);else{if(this.Bvt(e,i))return this.fvt(s,i);if(this.Ovt(e,i))this.mvt(e,i);else{if(this.Fvt(e,i))return this._vt(s,_l.tvt,i);if(this.Vvt(e,i))return this.Dvt(s,e,i);if(this.Wvt(e,i))return this.gvt(t);this.isTabOffset(e)&&this.rvt.S_t(i-32)}}return null}isTabOffset(t){return 23===t||31===t}Wvt(t,e){return 20==(246&t)&&32==(240&e)}Lvt(t,e){return 16==(240&t)&&64==(192&e)}Bvt(t,e){return 17==(247&t)&&32==(240&e)}Ovt(t,e){return 16==(247&t)&&32==(240&e)||23==(247&t)&&45==(255&e)}Fvt(t,e){return 17==(247&t)&&48==(240&e)}Vvt(t,e){return 18==(246&t)&&32==(224&e)}static Uvt(t){return 16==(112&t)}constructor(t,e){this.Sp=0,this.cvt=new RU(t,e),this.ovt=new RU(t,e),this.uvt=new RU(t,e),this.rvt=this.ovt,this.nvt=0,this.avt=void 0,this.svt=!1}},MU={RCL:32,BS:33,AOD:34,AON:35,DER:36,RU2:37,RU3:38,RU4:39,FON:40,RDC:41,TR:42,RTD:43,EDM:44,CR:45,ENM:46,EOC:47},LU=["black","green","blue","cyan","red","yellow","magenta","black"],BU=["white","green","blue","cyan","red","yellow","magenta","white_italics"];r(),r(),r();var OU=class{g_t(){return this.Gvt}Hvt(){return this.z_t}Zvt(){return this.Y_t}Xvt(){return this.J_t}zvt(){return this.j_t}constructor(t,e,i,s,n){this.Gvt=t,this.z_t=e,this.Y_t=i,this.J_t=s,this.j_t=n}},FU=class{qvt(t,e,i,s,n,r,o){this.hZ=t,this.Yvt=e,this.Kvt=i,this.jvt=s,this.Qvt=n,this.Jvt=r,this.$vt=o}tmt(){this.emt=[];for(let t=0;t<WU;t++)this.emt.push(this.imt())}imt(){const t=[];for(let e=0;e<VU;e++)t.push(null);return t}smt(t){this.nmt()&&(this.emt[this.L_t][this.omt]=new OU(t,this.z_t,this.Y_t,this.J_t,this.j_t),this.omt++)}hmt(){this.nmt()&&(this.omt<=0&&this.L_t<=0||(this.omt<=0?(this.omt=this.$vt-1,this.L_t--):this.omt--,this.emt[this.L_t][this.omt]=null))}nmt(){const t=this.L_t<this.Jvt&&this.L_t>=0,e=this.omt<this.$vt&&this.omt>=0;return t&&e}De(){return this.hZ}amt(t){let e=0;for(let i=t;i<WU;i++,e++)this.emt[e]=this.emt[i];for(let i=0;i<t;i++,e++)this.emt[e]=this.imt()}umt(){if(this.L_t+1>=this.Jvt)return this.amt(1),void(this.omt=0);this.L_t++,this.omt=0}cmt(){this.emt[this.L_t]=this.imt(),this.omt=0}I_t(t,e){if(this.jO>=t)return null;const i=TU.m_t(this.emt,this.jO,t);return i?(this.lmt(t),{FO:i,Nk:"svc"+e,N_t:e}):null}dmt(t,e){this.L_t=t,this.omt=e}fmt(t){this.J_t=t}_mt(t){this.j_t=t}vmt(t){this.z_t=t}mmt(t){this.Y_t=t}gmt(){this.L_t=0,this.omt=0,this.z_t=!1,this.Y_t=!1,this.j_t=kU,this.J_t=wl}pmt(t){this.wmt=t}ymt(){this.hZ=!0}be(){this.hZ=!1}Sh(){this.hZ=!this.hZ}lmt(t){this.jO=t}constructor(t){this.bmt=t,this.hZ=!1,this.Qvt=!1,this.Kvt=0,this.Yvt=0,this.jvt=0,this.Jvt=0,this.$vt=0,this.wmt=2,this.emt=[],this.jO=0,this.L_t=0,this.omt=0,this.Y_t=!1,this.z_t=!1,this.j_t=kU,this.J_t=wl,this.tmt()}},VU=42,WU=15,UU=class{Amt(t){const e=t.Smt();let i=e.Mx;const s=e.wvt;if(i===zU){i=i<<16|t.Smt().Mx}return i>=0&&i<=31?this.Tmt(i,s):i>=128&&i<=159?this.kmt(t,i,s):(i>=4096&&i<=4127?this.Emt(t,255&i):i>=4224&&i<=4255?this.xmt(t,255&i):i>=32&&i<=127?this.Rmt(i):i>=160&&i<=255?this.Imt(i):i>=4128&&i<=4223?this.Cmt(255&i):i>=4256&&i<=4351&&this.Pmt(255&i),null)}Rmt(t){this.Dmt&&(127!==t?this.Dmt.smt(String.fromCharCode(t)):this.Dmt.smt("\u266a"))}Imt(t){this.Dmt&&this.Dmt.smt(String.fromCharCode(t))}Cmt(t){if(!this.Dmt)return;if(void 0===qU[t])return void this.Dmt.smt("_");const e=qU[t];this.Dmt.smt(e)}Pmt(t){this.Dmt&&(160===t?this.Dmt.smt("[CC]"):this.Dmt.smt("_"))}Tmt(t,e){if(!this.Dmt)return null;const i=this.Dmt;let s=null;switch(t){case GU:i.hmt();break;case ZU:i.De()&&(s=i.I_t(e,this.Nmt)),i.umt();break;case XU:i.De()&&(s=i.I_t(e,this.Nmt)),i.cmt();break;case HU:i.De()&&(s=i.I_t(e,this.Nmt)),i.tmt(),i.dmt(0,0)}return s}kmt(t,e,i){if(e>=128&&e<=135){const t=7&e;this.Mmt(t)}else{if(136===e){const e=t.Smt().Mx;return this.Lmt(e,i)}if(137===e){const e=t.Smt().Mx;this.Bmt(e,i)}else{if(138===e){const e=t.Smt().Mx;return this.Omt(e,i)}if(139===e){const e=t.Smt().Mx;return this.Fmt(e,i)}if(140===e){const e=t.Smt().Mx;return this.Vmt(e,i)}if(143===e)return this.nr(i);if(144===e)this.Wmt(t);else if(145===e)this.Umt(t);else if(146===e)this.dmt(t);else if(151===e)this.Gmt(t);else if(e>=152&&e<=159){const s=(15&e)-8;this.qvt(t,s,i)}}}return null}Emt(t,e){e>=8&&e<=15?t.MD(1):e>=16&&e<=23?t.MD(2):e>=24&&e<=31&&t.MD(3)}xmt(t,e){e>=128&&e<=135?t.MD(4):e>=136&&e<=143&&t.MD(5)}Mmt(t){this.Hmt[t]&&(this.Dmt=this.Hmt[t])}*Zmt(t){for(let e=0;e<8;e++){1==(1&t)&&this.Hmt[e]&&(yield e),t>>=1}}Lmt(t,e){let i=null;for(const s of this.Zmt(t)){const t=this.Hmt[s];t.De()&&(i=t.I_t(e,this.Nmt)),t.tmt()}return i}Bmt(t,e){for(const i of this.Zmt(t)){const t=this.Hmt[i];t.De()||t.lmt(e),t.ymt()}}Omt(t,e){let i=null;for(const s of this.Zmt(t)){const t=this.Hmt[s];t.De()&&(i=t.I_t(e,this.Nmt)),t.be()}return i}Fmt(t,e){let i=null;for(const s of this.Zmt(t)){const t=this.Hmt[s];t.De()?i=t.I_t(e,this.Nmt):t.lmt(e),t.Sh()}return i}Vmt(t,e){let i=null;for(const s of this.Zmt(t)){const t=this.Hmt[s];t.De()&&(i=t.I_t(e,this.Nmt)),this.Hmt[s]=void 0}return i}nr(t){const e=this.Vmt(255,t);return this.Fb(),e}Fb(){this.Dmt=void 0,this.Hmt=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0]}Wmt(t){t.MD(1);const e=t.Smt().Mx;if(!this.Dmt)return;const i=(128&e)>0,s=(64&e)>0;this.Dmt.mmt(i),this.Dmt.vmt(s)}Umt(t){const e=t.Smt().Mx,i=t.Smt().Mx;if(t.MD(1),!this.Dmt)return;const s=3&e,n=(12&e)>>2,r=(48&e)>>4,o=3&i,h=(12&i)>>2,a=(48&i)>>4,u=this.Xmt(r,n,s),c=this.Xmt(a,h,o);this.Dmt._mt(u),this.Dmt.fmt(c)}dmt(t){const e=t.Smt().Mx,i=t.Smt().Mx;if(!this.Dmt)return;const s=15&e,n=63&i;this.Dmt.dmt(s,n)}Gmt(t){t.MD(1),t.MD(1);const e=t.Smt().Mx;if(t.MD(1),!this.Dmt)return;const i=3&e;this.Dmt.pmt(i)}qvt(t,e,i){const s=void 0!==this.Hmt[e];if(!s){const t=new FU(e);t.lmt(i),this.Hmt[e]=t}const n=t.Smt().Mx,r=t.Smt().Mx,o=t.Smt().Mx,h=t.Smt().Mx,a=t.Smt().Mx,u=t.Smt().Mx,c=(32&n)>0,l=127&r,d=(128&r)>0,f=o,_=1+(15&h),v=(240&h)>>4,m=1+(63&a);s&&0===(7&u)||this.Hmt[e].gmt(),this.Hmt[e].qvt(c,l,f,v,d,_,m),this.Dmt=this.Hmt[e]}Xmt(t,e,i){const s={0:0,1:0,2:1,3:1};return YU[s[t]<<2|s[e]<<1|s[i]]}constructor(t){this.Nmt=t,this.Hmt=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0],this.Dmt=void 0}},GU=8,HU=12,ZU=13,XU=14,zU=16,qU={32:" ",33:"\xa0",37:"\u2026",42:"\u0160",44:"\u0152",48:"\u2588",49:"\u2018",50:"\u2019",51:"\u201c",52:"\u201d",53:"\u2022",57:"\u2122",58:"\u0161",60:"\u0153",61:"\u2120",63:"\u0178",118:"\u215b",119:"\u215c",120:"\u215d",121:"\u215e",122:"\u2502",123:"\u2510",124:"\u2514",125:"\u2500",126:"\u2518",127:"\u250c"},YU=["black","blue","green","cyan","red","magenta","yellow","white"];r();var KU=class{zmt(t){if(t.Tw===Pu.Lft){const e=63&t.Mx;return this.qmt=2*e-1,void(this.Ymt=[])}if(this.Ymt&&(this.qmt>0&&(this.Ymt.push(t),this.qmt--),0===this.qmt)){const t=new jU(this.Ymt);this.Kmt.push(t),this.Ymt=null,this.qmt=0}}jmt(){return this.Kmt}Qmt(){this.Kmt=[]}Fb(){this.Kmt=[],this.Ymt=[],this.qmt=0}constructor(){this.Kmt=[],this.Ymt=null,this.qmt=0}},jU=class{Jmt(){return this.$mt<this.tgt.length}egt(){return this.$mt}Smt(){if(!this.Jmt())throw new A(Qa.SUBTITLE_PARSE_ERROR,"Buffer read out of bounds / invalid CEA-708 Data.");return this.tgt[this.$mt++]}MD(t){if(this.$mt+t>this.tgt.length)throw new A(Qa.SUBTITLE_PARSE_ERROR,"Buffer read out of bounds / invalid CEA-708 Data.");this.$mt+=t}constructor(t){this.$mt=0,this.tgt=t}},QU=class{Fb(){this.igt=0,this.sgt=[],this.ngt=[],this.rgt.Fb(),this.nr(),this.ogt.forEach((t=>{t.Fb()}))}nr(){this.hgt=0,this.agt=0,this.ugt.forEach((t=>{t.nr()}))}cgt(t,e){if(t.Fft){const i=t.Wft,s=t.Uft,n=t.Tw;n===Pu.Dft||n===Pu.Nft?this.sgt.push({wvt:e,Tw:n,Mvt:i,pvt:s,lgt:this.sgt.length}):this.dgt&&(this.ngt.push({wvt:e,Tw:n,Mx:i,lgt:this.ngt.length}),this.ngt.push({wvt:e,Tw:Pu.Mft,Mx:s,lgt:this.ngt.length}))}}Kz(){const t=[];this.sgt.sort(((t,e)=>t.wvt-e.wvt||t.lgt-e.lgt)),this.ngt.sort(((t,e)=>t.wvt-e.wvt||t.lgt-e.lgt));for(const e of this.sgt){const i=this.fgt(e);i&&t.push(i)}for(const t of this.ngt)this.rgt.zmt(t);const e=this.rgt.jmt();for(const i of e){const e=this._gt(i);t.push(...e)}return this.rgt.Qmt(),this.sgt=[],this.ngt=[],t}fgt(t){const e=t.Tw;if(fn.Uvt(t.Mvt)){const i=t.Mvt>>3&1;0===e?this.hgt=i:this.agt=i}const i="CC"+(e<<1|(e?this.agt:this.hgt)+1),s=this.ugt.get(i);return 255===t.Mvt&&255===t.pvt||!t.Mvt&&!t.pvt||!this.vgt(t.Mvt)||!this.vgt(t.pvt)?(++this.igt>=45&&this.nr(),null):(this.igt=0,t.Mvt&=127,t.pvt&=127,t.Mvt||t.pvt?fn.Uvt(t.Mvt)?s.Nvt(t):s.Pvt(t.wvt,t.Mvt,t.pvt):null)}_gt(t){const e=[];try{for(;t.Jmt();){const i=t.Smt().Mx;let s=(224&i)>>5;const n=31&i;if(7===s&&0!==n){s=63&t.Smt().Mx}if(0!==s){if(!this.ogt.has(s)){const t=new UU(s);this.ogt.set(s,t)}const i=this.ogt.get(s),r=t.egt();for(;t.egt()-r<n;){const s=i.Amt(t);s&&e.push(s)}}}}catch(t){if(!(t instanceof A&&t.code===Qa.SUBTITLE_PARSE_ERROR))throw t}return e}vgt(t){let e=0;for(;t;)e^=1&t,t>>=1;return 1===e}constructor(){this.dgt=!1,this.sgt=[],this.ngt=[],this.rgt=new KU,this.igt=0,this.ugt=Kv({CC1:new fn(0,0),CC2:new fn(0,1),CC3:new fn(1,0),CC4:new fn(1,1)}),this.hgt=0,this.agt=0,this.ogt=ne(),this.nr()}};r();var JU=class extends pe{constructor(t,e){super("mgt"),this.N_t=t,this.FO=e}},$U=H.vV(.1),tG=class extends Co{ggt(t,e){this.pgt.cgt(t,e)}Kz(){const t=this.pgt.Kz();for(const e of t)this._o(new JU(e.N_t,e.FO))}nr(){this.pgt.Fb()}yn(){this.Ro(),this.pgt.Fb()}constructor(){super(),this.pgt=new QU}},eG=class extends tG{wgt(t,e,i,s){const n=this.ygt(t,s);this.bgt(n,e,i),this.Kz()}ygt(t,e){const i=t.slice().sort(EO),s=this.Agt;if(0===s.length)return i;if(0===i.length)return s;let n;const r=s[0].Ktt,o=s[s.length-1].Ktt,h=i[0].Ktt,a=s[0].pat===i[0].pat;if(o.kF(h).AF().bF(H.vV(2.5*e))&&a)n=s.concat(i).sort(EO);else if(h.gF(r)){let t=0;for(;t<s.length&&s[t].Ktt.bF(h);)t++;let e=!1,r=!1;for(let n=t,o=0;n<s.length&&o<i.length;n++,o++)iG(s[n],i[o])?e=!0:r=!0;const o=e&&!r,a=e&&r;!e&&r?n=s.concat(i).sort(EO):o?n=s.slice(0,t).concat(i):(n=i,a&&this.nr())}else n=i,this.nr();return n}bgt(t,e,i){for(let s=0;s<t.length;s++){const n=t[s],r=n.Ktt._F();if(!i&&e-r<$U._F())return void(this.Agt=t.slice(s));this.ggt(n,r)}this.Agt=[]}constructor(...t){super(...t),this.Agt=[]}};function iG(t,e){return t.Ktt.sF(e.Ktt)&&t.Tw===e.Tw&&t.Wft===e.Wft&&t.Uft===e.Uft}var xl=class extends kx{Sgt(t){return this.Tgt.get(t)}kgt(t){let e=this.Tgt.get(t.jtt);return e||(e=this.Egt(t),this.Tgt.set(t.jtt,e)),e}Egt(t){const e=[ln.AC],i=cU(t.Qtt);let s=i?i.l:"";t.xgt&&(s="easy "+s,e.push(ln.EC));const n=t.Ch||s||"CC"+t.jtt,r=this.lW.OI(Li.$V,n,n,t.Qtt,!1,Lr.CEA608,void 0,e);return this.tt(r),r}Got(t){const e=nr.JD(ra(t));this.Rgt=function(t){for(const e of t.Z){const t=vU(e),i=e.AN.MN.ON.VN.UN;let s=Fo(i,(t=>t.Tw===_t.CP));if(!s){const t=i.filter((t=>t.Tw===_t.rD)),e=Fo(t,(t=>{var e;return(null==(e=t.NM)?void 0:e.Tw)===_t.CP}));e&&(s=e.NM)}if(!s)continue;const n=yN(ra(s.yM.Kk),new Ri),r=s.AM;return ol({},t,{EN:e.XD.EN,yM:Jg(s.yM.Kk),ji:s.ji,Ti:s.Ti,YM:r&&r.YM,qM:r&&r.qM,V1:n.w0,Igt:n.y0,W1:n.b0,S0:n.S0[0],T0:n.T0[0]})}}(Fo(e,mU))}Sdt(t,e,i,s,n,r){var o;if(!this.Rgt)return;if(!S(this.Cgt)&&_s(this.Cgt,e,1e-5))return;S(this.Pgt)||_s(this.Pgt,e,.1)||this.Dgt.nr();const h=function(t,e,i,s,n){const r=[],o=e.filter(fU),h=s(i);for(const e of o){const s=Fo(e.Z,(t=>t.XD.EN===i.EN));if(!s)continue;const o=s.XD.QM||0,u=s.XD.JM||0;let c=s.aL?s.aL.aL:vo.ZERO;var a;const l=e.iL+(null!=(a=s.XD.uL)?a:vo.ZERO).toNumber();for(const a of s.hL){let s=l+(a.iL||0);for(const l of a._L){const a=l.Nb||u,d=new AN;d.R0(t,s,s+a);const f=H.IF(c,i.Hft);d.qV=n(l,e,i,f,Rc(t,s,s+a)),r.push(d),s+=a,c=c.add(l.ct||o||h)}}}return r}(t,nr.JD(ra(t)),this.Rgt,dU,_U);var a;const u=null!=(a=null==(o=Km(h,(t=>t.qV.ct)))?void 0:o.qV.ct)?a:0,c=function(t){const e=[];for(const i of t)i.qV.Jft&&e.push(...i.qV.Jft),delete i.qV.Jft;for(let t=0;t<e.length;t+=1)e[t].sL=t;return e}(h),l=H.vV(s),d=[];for(const t of c)d.push(ol({},t,{pat:n,Ktt:t.Bft.kO(l)}));this.Dgt.wgt(d,i,r,u),this.Cgt=e,this.Pgt=i}nr(){return this.Dgt.nr(),this.Tgt.forEach((t=>{t.yn(),this.it(t),this.lW.mW(t)})),this.Tgt.clear(),this.Rgt=void 0,this.Cgt=NaN,this.Pgt=NaN,super.nr()}yn(){return this.Dgt.vn("mgt",this.Ngt),this.Dgt.yn(),super.yn()}constructor(t){super(),this.Rgt=void 0,this.Cgt=NaN,this.Pgt=NaN,this.Ngt=t=>{const e=this.kgt({jtt:t.N_t,Qtt:""}),i=t.FO;for(const t of e.L.lC)i.WO<t.WO&&i.UO>t.WO?i.UO=t.WO:i.WO>t.WO&&t.UO>i.WO?t.UO=i.WO:i.WO===t.WO&&(i.UO=t.UO);e._W(i)},this.lW=t,this.Tgt=ne(),this.Dgt=new eG,this.Dgt.bn("mgt",this.Ngt)}};r(),r();var sG=/(.*)=(.*)/,nG=/(.*):(.*)/;function rG(t){if(!t)return[];const e=[],i=t.trim().split(";");for(const t of i){const i=t.match(sG);if(i){const[,t,s]=i;let n="",r=!1;for(const t of s.trim().split(","))if(t.match(nG)){const[,e,i]=t.match(nG);switch(e){case"lang":n=i;break;case"er":r=Boolean(Number(i))}}e.push({jtt:Number(t),Qtt:n,xgt:r})}}return e}var oG={1:1,2:3,3:2,4:4},hG="urn:scte:dash:cc:cea-608:2015",aG="urn:scte:dash:cc:cea-708:2015";r(),r();var uG=class extends Ds{ka(){return new cG(this.pat&&this.pat.wa)}constructor(t,e,i){super(No.hC),this.pat=t,this.yct=e,this.Mgt=i}},cG=class extends pe{constructor(t){super("activequalitychanged"),this.quality=t}},lG=[Ti.ho,Zc.iC,Ti.hb],dG=class extends Co{Lgt(t){const e=this.ift.Tat;for(const i of e.Ht.Jat)if(e.Uct.Oct(t,i))return i}yn(){this.Ro(),this.WB.vn(lG,this.Bgt)}constructor(t,e){super(),this.Bgt=t=>{const e=this.Ogt,i=this.Lgt(t.currentTime)||this.ift.yat;i&&e!==i&&(this.Ogt=i,i.pat&&this._o(new uG(i.pat,null==i?void 0:i.wa,null==e?void 0:e.wa)))},this.WB=t,this.WB.bn(lG,this.Bgt),this.ift=e}};function fG(t,e,i){const s=new FS(ra(t),new Ri),n=Mi.HD(s,_t.gP);if(!n)return;const r=Mi.OD(n.Kk),o=Fo(r,(t=>t.Tw===_t.wP)),h=Fo(r,(t=>t.Tw===_t._D));if(!o)return;const a=Mi.HD(o.Kk,_t.bP);if(!a)return;const u=Mi.HD(a.Kk,_t.TP);if(!u)return;const c=Mi.HD(u.Kk,_t.kP);if(!c)return;const l=Mi.OD(c.Kk),d=Fo(l,(t=>t.Tw===_t.EP));if(!d)return;const f=Mi.KD(d.Kk,_t.EP,!1),_=new FS(ra(f.Kk),new Ri);_.MD(4);const v=Mi.OD(_),m=[];for(const t of v){if(t.Tw===_t.nD||t.Tw===_t.rD)return;t.Tw===_t.CP?m.push({Fgt:t,Vgt:_t.rD}):t.Tw===_t.QP&&m.push({Fgt:t,Vgt:_t.nD})}if(!function(t,e){return void 0===t&&void 0!==e&&e.length>0}(h,e)&&0===m.length)return;let g=fc(t);const p=Fo(r,(t=>t.Tw===_t.RP)),w=p?Mi.HD(p.Kk,_t.IP):void 0,y=w?function(t){const e=t.Kk.Ib();return e.MD(4),e.MD(4),e.ED()}(w):1,b=Fo(l,(t=>t.Tw===_t.xP));b&&function(t,e,i){const s=oc(ra(t),e),n=Mi.GD(s,new Ri),r=n.Kk;r.MD(4);const o=r.ED();for(let t=0;t<o;t++){r.MD(4),r.MD(4);const t=r.SD.Ib(),e=r.ED();kl(r.Kk,t,e+i)}}(g,b,m.length),w&&function(t,e,i){const s=oc(ra(t),e),n=Mi.GD(s,new Ri),r=n.Kk;r.MD(4),r.MD(4),kl(r.Kk,r.SD,i)}(g,w,1),g=function(t,e,i,s){if(i||!s)return t;let n=t;for(const t of s)n=_G(n,e,new j(t));return n}(g,n,h,e);const A=[n,o,a,u,c,d];for(let t=m.length-1;t>=0;t--){const e=m[t];g=vG(g,e.Fgt,d,A,e.Vgt,i)}return{Wgt:g,Ugt:{Ggt:m.length,jM:y}}}function _G(t,e,i){const s=rp(t,i,e.Kk.Kk.byteOffset+e.Kk.Kk.byteLength);return mG(oc(ra(s),e),i.byteLength),s}function vG(t,e,i,s,n,r){const o=function(t,e,i){0;const s=t.Kk.Kk,n=bG(),r=new j(s.byteLength+n.byteLength),o=ra(r);r.set(ua(s),0),mG(o,n.byteLength),Vg(o,new Ri(TG),e),r.set(n,s.byteLength),Vg(o,new Ri(s.byteLength+AG),t.Tw),i&&Cg(o,new Ri(s.byteLength+SG),i);return r}(e,n,r),h=rp(t,o,e.Kk.Kk.byteOffset),a=ra(h);!function(t,e){const i=Mi.GD(t,new Ri),s=Mi.KD(i.Kk,_t.EP,!1),n=ra(s.Kk),r=n.getUint32(0);n.setUint32(0,r+e)}(oc(a,i),1);for(const t of s)mG(oc(a,t),o.byteLength);return h}function oc(t,e){const i=e.Kk.Kk.byteOffset;return jg(t,i,i+e.Kk.Kk.byteLength)}function mG(t,e){const i=new Ri,s=$h(t,i);if(0===s);else if(1===s){i.xb(4);const s=Hr(t,i.Ib());Lg(t,i,s.add(e))}else i.Rb(0),kl(t,i,s+e)}r();var gG=class extends po{start(t){this.FQ=t}transform(t){this.h$(t),this.Hgt()}flush(){this.u$(),this.Hgt()}g$(t){return t===_t.oD}w$(t){let e=fc(ua(t.Kk.Kk));const i=Mi.GD(ra(e),new Ri);e=pG(e,i,this.Zgt),this.Xgt.push(e)}b$(t){this.Xgt.push(t)}Hgt(){for(const t of function(t){if(t.length<2)return t;const e=[];let{buffer:i,byteOffset:s,byteLength:n}=t[0];for(let r=1;r<t.length;r++){const o=t[r];i===o.buffer&&s+n===o.byteOffset?n+=o.byteLength:(e.push(new j(i,s,n)),({buffer:i,byteOffset:s,byteLength:n}=o))}return e.push(new j(i,s,n)),e}(this.Xgt))this.FQ.enqueue(t);En(this.Xgt)}constructor(t){super(),this.Xgt=[],this.Zgt=t}};function pG(t,e,i){let s=t;const n=Mi.OD(e.Kk);for(let t=n.length-1;t>=0;t--){const r=n[t];r.Tw===_t.aD&&(s=wG(s,r,e,i))}return s}function wG(t,e,i,s){const n=oc(ra(t),e),r=Mi.GD(n,new Ri),o=Mi.OD(r.Kk),h=Fo(o,(t=>t.Tw===_t.uD));if(!h)return t;const a=h.Kk,u=a.SD.Ib(),c=a.ED(),{flags:l}=GS(c);a.MD(4),l.Cb(Zh.BASE_DATA_OFFSET_PRESENT)&&a.MD(8);const d=a.SD.Ib();if(l.Cb(Zh.SAMPLE_DESCRIPTION_INDEX_PRESENT)){const e=$h(a.Kk,d);return kl(a.Kk,a.SD,e+s.Ggt),t}{kl(a.Kk,u,c|Zh.SAMPLE_DESCRIPTION_INDEX_PRESENT);const n=new j(4);ra(n).setUint32(0,s.jM+s.Ggt);const r=a.Kk.byteOffset+d.nc;for(const t of o.filter((t=>t.Tw===_t.cD)))yG(t,n.byteLength);for(const s of[h,e,i])mG(oc(ra(t),s),n.byteLength);return rp(t,n,r)}}function yG(t,e){const i=t.Kk,s=i.ED(),{flags:n}=GS(s);if(i.MD(4),n.Cb(OS.DATA_OFFSET_PRESENT)){const t=i.Ib().ED();kl(i.Kk,i.SD,t+e)}}var bG=sl((()=>new j([0,0,0,80,115,105,110,102,0,0,0,12,102,114,109,97,0,0,0,0,0,0,0,20,115,99,104,109,0,0,0,0,99,101,110,99,0,1,0,0,0,0,0,40,115,99,104,105,0,0,0,32,116,101,110,99,0,0,0,0,0,0,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]))),AG=16,SG=64,TG=4,kG=[yo.fa,Ti.$y,Ti.eb,Ti.sb,Ti.Ay],EG=class extends Co{get jdt(){return this.Qdt}get o(){return this.zS}get m3(){return this.g3}get nt(){return this.zgt}get oft(){return function(t){const e=29.97,i=1024,s=44100;return t===ee.vE?s/i:e}(this.g3)}get sft(){return 1/this.oft}get Rt(){return Boolean(this.Qdt&&this.Qdt.Rt)}get FJ(){const t=this.ift?this.ift.Tat.FJ.Dct:se.pB();return this.qgt().tB(t)}get wR(){let t=this.Ygt();const e=this.Kgt;return void 0!==e&&t.YL().wr(e)&&(t=t.tB(se.mB(e))),t}get xct(){return RV(this.Ygt(),this.FJ.tB(this.jgt)).$L(2*this.sft)}get jgt(){const t=this.Kgt;if(t&&isFinite(t)){const e=this.Qgt.Tn;if(isFinite(e)&&t<e)return new se([t,e],[!1,!0])}return se.pB()}get hI(){const t=this.Qdt;if(!t)return se.mB(0);const e=t.Act.aft,i=t.Act.uft;if(void 0===i||void 0===e)return se.mB(0);const s=i;let n=e>=t.Act.rlt.Tn?_.max(e,this.Tn):e;return n=_.max(s,n),se.gB(s,n).YL()}get XG(){return this.xct._B(this.ER)}get Pct(){return this.Qgt.Pct}get ER(){return this.WB.ER}get Sn(){return this.Qdt?this.Qdt.Act.rlt.Sn:NaN}get Tn(){const t=this.Jgt(),e=this.Kgt;return void 0===t?NaN:void 0!==e?e:t}Jgt(){var t;return null==(t=this.Qdt)?void 0:t.Act.rlt.Tn}get Ti(){return this.Qgt.Ti}get ji(){return this.Qgt.ji}get $gt(){return this.Kgt}Fat(){return void 0!==this.ift&&this.ift.Fat}Cct(){if(void 0===this.Kgt)return!1;const t=this.Ygt().YL(),e=t.sB(this.Kgt);return!(e<0)&&t.Sn(e)!==this.Kgt}a3(){const t=this.Qgt.Pct,e=this.Ygt().jn(t);this.Kgt=e.V>0?e.Tn(e.V-1):0;const i=t.Tn(0);isFinite(i)&&this.Kgt<i&&this.WJ(this.Kgt,i),this.tpt()}async Sdt(t,e,i,s){const n=i.Zot.BV,r=this.ept(t,e,i,n,s),o=this.ipt(t,e,i,n,s),[h]=await Rs([o,r]);return h}async ept(t,e,i,s,n){if(!Gh(i.jq))return;let r;if(t.Tw===Ce.Sk){const e=t.Kk.Gut(),i=await e.Dk(n);r=new j(i)}else r=new j(t.Kk.yht);const o=[];if(void 0!==this.spt&&(this.spt.Sdt(r,e.WO,s),o.push(this.spt)),void 0!==this.npt){const t=i.nlt(e);this.npt.Sdt(r,e.WO,e.UO,s,i.pat,t),o.push(this.npt)}Tx(this.wR,o)}async ipt(t,e,i,s,n){var r;let o;if(J(n),t.Tw===Ce.Sk){let e=t.Kk.Nk;this.rpt&&(e=function(t,e){return t.pipeThrough(new _a(new gG(e)))}(e,this.rpt)),o={Tw:Ce.Sk,Kk:e}}else{let e=new j(t.Kk.yht);this.rpt&&(e=function(t,e){let i=fc(t);const s=new FS(ra(i),new Ri),n=Mi.OD(s);for(let t=n.length-1;t>=0;t--){const s=n[t];s.Tw===_t.oD&&(i=pG(i,s,e))}return i}(e,this.rpt)),o={Tw:Ce.iJ,Kk:e}}const h={wit:e.WO,ct:e.ct,BV:s,W1:null==(r=i.pat)?void 0:r.IC},a=this.Cot.wR;await this.opt(),await this.Cot.g2(o,h,n);return function(t,e,i,s){let n,r,o=e.iB(t.YL());o=o.iB(i.iB(e)),!1;0===o.V?(n=s.UO,r=n):(n=o.Sn(0),r=o.Tn(0));return{ldt:n,ddt:r}}(a,this.Cot.wR,this.Cot.w3,e)}async Got(t,e,i){var s;J(i),this.npt&&this.npt.Got(new j(t.yht));let n=new j(t.yht);if(this.hpt(e)){const t=this.Qgt.upt;let e,i=[];t&&(i=on(t.cpt,(t=>t.IG)),e=t.lpt.aU?hP(t.lpt.aU):void 0);const s=fG(n,i,e);s?(this.rpt=s.Ugt,n=s.Wgt):this.rpt=void 0}const r={Tw:Ce.iJ,Kk:n};await this.opt(),await this.Cot.A2(r,{W1:null==(s=e.pat)?void 0:s.IC},i)}Adt(t,e,i){return this.Cot.eT(t,e,i)}WJ(t,e){this.Cot.A3(t,e)}UJ(t,e){this.Cot.S3(t,e)}Ygt(){return this.Cot?this.Cot.wR:se.pB()}qgt(){return this.Cot?this.Cot.w3:se.pB()}dpt(){return this.Cot?this.Cot.eT(0,1/0):Promise.resolve()}fpt(){return this.Cot&&(this.Cot.vn(oe.tJ,this.Ds),this.Cot=void 0),Promise.resolve()}async _pt(t){var e;const i=wW.Blt(null!=(e=t.Udt)?e:t.Jat,this.xlt).jq;this.Cot||(this.Cot=this.Qgt.vpt(i),this.Cot.bn(oe.tJ,this.Ds),this.Mlt=new FW(this.Cot)),await this.opt()}$n(t,e){const i=da.$w([e]);this.vW.jw(),this.vW=i;const s=this.mpt(t,this.gpt,i.Uw);return this.gpt=s,s}ppt(t){if(ms(this.wpt,Lr.CEA608))return;const e=t.Act.Rdt;if(function(t){return t.some((t=>t.c9===hG||t.c9===aG))}(e)){this.npt=new xl(this.lW);const t=function(t){const e=[];for(const i of t)if(i.c9===hG){const t=RO(i.Mx);for(const i of t)e.push(i)}else if(i.c9===aG){const t=rG(i.Mx);for(const i of t)if(i.jtt<=4){const t=oG[i.jtt];e.push(ol({},i,{jtt:t}))}}return e}(e);for(const e of t)this.npt.kgt(e);this.zgt.MG(this.npt.Z)}}async mpt(t,e,i){J(i),e&&await e.catch(Tt),this.Qdt===t&&this.ypt||(await this.bpt(),J(i),await this.dpt(),J(i),t&&await this.dW(t))}async bpt(){const t=this.Qdt;this.Qdt=void 0,this.ypt=!1,this.Kgt=void 0,t&&(t.vn(No.uC,this.Apt),t.Ydt(!1),t.vn(No.NO_QUALITY,this.Ds)),this.Spt&&(this.Spt.yn(),this.Spt=void 0),this.ift&&(await this.ift.yn(),this.ift=void 0),this.npt&&(this.zgt.FG(this.npt.Z),await this.npt.yn())}async dW(t){this.Qdt=t,this.ppt(t),t.bn(No.uC,this.Apt),t.bn(No.NO_QUALITY,this.Ds),await this._pt(t),this.ift=this.Tpt(t),this.ift.bn(kG,this.Ds),this.ift.bn("wat",this.tpt),this.ift.xat=t.Udt,this.Spt=new dG(this.WB,this.ift),this.Spt.bn(No.hC,this.Bdt),t.Ydt(!0),this.ypt=!0}Tpt(t){return new OW(this,this.WB,this.WB,this.fW,this.gZ,this.Edt,this.zut,this.Nlt,this.xlt,this.Mlt,this.edt,this.hH).Ait(t)}async nr(t){this.vW.jw(),this.gpt&&(await this.gpt.catch(Tt),this.gpt=void 0),await this.bpt(),t||await this.dpt(),await this.fpt()}async kpt(){await this.bpt()}Mdt(t){var e;null==(e=this.jdt)||e.Mdt(t)}async Pdt(t,e){var i,s;await this.Xat(),null==(i=this.jdt)||i.Pdt(e);const n=null==(s=this.ift)?void 0:s.Tat.Uct.Mct(t);if(n&&n.V>0)for(let t=0;t<n.V;t++){var r;await(null==(r=this.Cot)?void 0:r.eT(n.Sn(t),n.Tn(t)))}await this.qat()}Ept(t){const e=t.Ht.Udt;if(void 0===e)return this.xpt(t);if(e.some((t=>this.Mlt.dJ(t))))return this.xpt(t);this._o(new pe("Rpt"))}xpt(t){this.ift&&this.Qdt&&this.Qdt===t.Ht&&(this.ift.xat=this.Qdt.Udt)}async Xat(t){this.ift&&await this.ift.Xat(t)}async qat(t){this.ift&&await this.ift.qat(t)}Oj(){const t=this.wR.vB;return this.gZ.Oj(t)}opt(){const t=this.Qgt.Pct,e=_.max(0,t.Sn(0)-.1),i=t.Tn(0)+.01;return this.Cot.F2(e,i)}hpt(t){if(!Gh(t.jq))return!1;if(this.Qgt.h9)return!0;return void 0!==this.Qgt.upt}Yat(t){if(!dT(this.g3))return;const e=this.ift,i=t.ift;void 0!==e&&void 0!==i&&e.Yat(i,this.Sn,this.Tn)}async yn(t){this.Ro();try{await this.nr(t),await this.kpt()}catch(t){}}constructor(t,e,i,s,n,r,o,h,a,u,c,l,d){super(),this.Qdt=void 0,this.ift=void 0,this.ypt=!1,this.vW=new da,this.gpt=void 0,this.Kgt=void 0,this.Cot=void 0,this.Mlt=new VW,this.rpt=void 0,this.npt=void 0,this.zgt=new Iu([]),this.tpt=()=>{!this.Fat()&&this.Cct()&&this.Qgt.tpt()},this.Bdt=t=>{this.Qdt.Bdt(t),this._o(new iU(t.yct,t.Mgt))},this.Apt=t=>{this.Ept(t)},this.zS=function(){const t=xG;return xG+=1,t}(),this.g3=t,this.fW=s,this.gZ=n,this.Qgt=e,this.WB=i,this.zut=r,this.lW=o,this.spt=h,this.Nlt=a,this.xlt=a?gT(t,a):void 0,this.edt=u,this.wpt=c,this.Edt=l,this.hH=d}};var xG=0;var RG=class extends Co{xj(t,e){return this.Ipt(t,e)}async Ipt(t,e){for(const e of t)this.Cpt(e);await this.$n(e);for(const t of this.Dpt.Ppt)t.Tw===ee.Tk&&(t.Jat&&0!==t.Jat.length?await this.Npt.dW(t):this._o(new $W("No supported representation found in the AdaptationSet with mimetype : "+t.Tw)))}get IC(){return this.IO}get ct(){return this.WB.ct}Mpt(t){return new EG(t,this,this.WB,this.fW,this.gZ,this.zut,this.lW,this.spt,this.Lpt,this.edt,this.wpt,this.Edt,this.hH)}Fat(){return this.Sft.some((t=>t.Fat()))}Cct(){return 0!==this.Sft.length&&this.Sft.every((t=>t.Cct()))}tpt(){this.Bpt()&&this._o(new eU)}vpt(t){if(Cl(t,"audio")){if(this.Z2.h4)return this.Z2.h4}else if(Cl(t,"video")&&this.Z2.a4)return this.Z2.a4;throw new g("Cannot allocate source buffer for mime type "+t)}Opt(t){t.bn([yo.fa,Ti.Ky,Ti.$y,Ti.eb,Ti.sb,Ti.Ay],this.Ds),t.bn(oe.tJ,this.Fpt),t.bn("Rpt",this.Ds)}get Rt(){return this.Sft.some((t=>t.Rt))}async Vpt(t){await Promise.all(this.Sft.map((e=>e.yn(t)))),En(this.Sft)}get ht(){return this.cO}get wR(){if(0===this.Sft.length)return se.pB();const t=this.Sft.map((t=>t.wR));let e=se.gB(0,1/0);for(const i of t)e=e.jn(i);if(0===e.V)return e;if(this.Cct()){const t=e.jn(this.Pct);if(0===t.V)return e;const i=t.Tn(t.V-1);let s=0;for(const t of this.Sft)s=_.max(s,t.$gt);i<=s&&(e=e.tB(new se([i,s],[!0,!0])))}return e}get h9(){return this.WB.h9}get ER(){return this.WB.ER}get upt(){return this.Wpt}get Tn(){if(this.Upt){const t=this.ct;if(!S(t)&&t!==cf)return t}if(!this.Sft.length)return NaN;let t=0;for(const e of this.Sft)t=_.max(t,e.Tn);return t}get Upt(){const t=this.Dpt.vdt;if(t.Tw===Bs.wW)return!1;const e=t.Gpt;return 0!==e.length&&this.Dpt===e[e.length-1]}get hI(){if(!this.Sft.length)return se.pB();let t=new se([0,1/0]);for(const e of this.Sft)t=t.jn(e.hI);if(t.V>0&&this.Upt&&isFinite(this.ct)){const e=this.ct,i=t.Tn(t.V-1);e>i&&(t=t.tB(se.gB(i,e).YL()))}return t}get Cc(){return this.Dpt}get nt(){return this.Hl}get rt(){return this.dO}get ji(){return this.xu.ji}get Ti(){return this.xu.Ti}get XG(){const t=this.ER,e=this.wR,i=e.sB(t);if(-1!==i)return{Sn:e.Sn(i),Tn:e.Tn(i)}}get Pct(){const t=this.Dpt.Sn,e=this.Upt?1/0:this.Dpt.Tn;return se.gB(t,e)}Bpt(){if(this.Fat())return!1;if(!this.Cct())return!1;const t=this.wR;if(0===t.V)return!1;const e=this.ER;if(this.Upt)return t.Sn(t.V-1)<=e;{const i=t.jn(this.Pct);if(0===i.V)return!0;const s=i.Sn(i.V-1),n=i.Tn(i.V-1)+.1;return s<=e&&e<=n}}get Hpt(){return this.Zpt}async Xat(t){this.Zpt||(this.Zpt=!0,await Promise.all(this.Sft.map((e=>e.Xat(t)))))}async qat(t){this.Zpt&&(this.Zpt=!1,await Promise.all(this.Sft.map((e=>e.qat(t)))))}async yn(t){this.WB.vn(Ti.fb,this.Xpt),this.WB.vn(Ti.Ey,this.zpt),this.Ro(),this.Dpt.vn(Ne.vat,this.Ds),this.qpt.jw(),this.gpt&&(await this.gpt.catch(Tt),this.gpt=void 0),await this.Vpt(t),await this.Npt.yn(),this.cO.yn(),this.dO.yn(),this.Hl.yn(),this.Ypt()}Cpt(t){this.Kpt.push(t),t.bn("jpt",this.Qpt);const e=t.Tw===ee.vE?this.cO:this.dO;for(const i of t.Z)e.tt(i)}Jpt(t){const e=t.Tw===ee.vE?this.cO:this.dO;for(const i of t.Z)e.it(i),i.yn();t.yn(),we(this.Kpt,t)}Ypt(){for(let t=this.Kpt.length-1;t>=0;t--)this.Jpt(this.Kpt[t])}get $pt(){return this.Kpt.map((t=>t.jdt)).filter(Bo)}get twt(){return this.Sft.map((t=>t.jdt)).filter(Bo)}$n(t,e){return this.qpt.jw(),this.qpt=da.$w([e]),this.gpt=js(this.QE(t,this.gpt,this.qpt.Uw),this.qpt).catch(this.ewt),this.gpt}async QE(t,e,i){e&&await e.catch(Tt),J(i);const s=[],n=this.Sft.slice(),r=t.slice();En(this.Sft);for(const t of n){const e=t.jdt;e&&ms(r,e)?(this.Sft.push(t),s.push(t.$n(e,i)),we(r,e)):(this.Hl.FG(t.nt),await t.yn(),J(i))}for(const t of r){const e=this.Mpt(t.Cat);this.Hl.MG(e.nt),this.Sft.push(e),this.Opt(e),s.push(e.$n(t,i))}await Promise.all(s)}async _J(t,e,i){this.Z2!==i&&(this.Z2=i,await this.Vpt(!1)),await this.$n(t),this.Wpt=e}async iwt(t){for(const e of this.Sft){const i=e.jdt;if(void 0!==i)for(const s of i.Act.Jat){(s.TG||[]).some((e=>e.aU&&_e(na(t),hP(e.aU))))&&!s.qdt&&(s.qdt=!0,await e.Pdt(s,s.pat),this._o(new $n(new sr(Qa.CONTENT_PROTECTION_OUTPUT_RESTRICTED,"Content unavailable due to DRM restrictions"))))}}}async swt(t){for(const e of this.Sft){const i=e.jdt;if(void 0!==i)for(const s of i.Jat){const i=s.TG,n=s.pat;if(void 0===i||0===i.length||void 0===n)continue;const r=this.nwt(i,t.pb);n.trt!==r&&(r?e.Mdt(n):await e.Pdt(s,n))}}}nwt(t,e){let i=!1;const s=t.reduce(((t,e)=>!e.aU||ms(t,e.aU)?t:[...t,e.aU]),[]);return e.Ob(((n,r)=>{if("usable"!==n)return;(t.some((t=>t.aU&&_e(na(r),hP(t.aU))))||sp(r,br)&&1===s.length&&1===e.Nb)&&(i=!0)})),i}Yat(t){if(void 0===t)return;const e=t.Dpt;if(this.Dpt.rwt===e||this.Dpt.owt===e)for(const e of this.Sft){const i=Fo(t.Sft,(t=>t.m3===e.m3));void 0!==i&&e.Yat(i)}}constructor(t,e,i,s,n,r,o,h,a,u,c,l,d,f){var _,v;super(),this.cO=new Ke,this.dO=new Ke,this.Kpt=[],this.qpt=new da,this.Zpt=!0,this.Sft=[],this.gpt=void 0,this.Fpt=Qr((()=>{this._o(new K(this.ER))}),350),this.Qpt=t=>{const e=t.hwt.jdt;if(e)for(const t of this.Kpt){var i;t.jdt&&t.jdt!==e&&t.Tw===(null==(i=e.Odt)?void 0:i.Tw)&&(t.vn("jpt",this.Qpt),t.jdt.Rt=!1,t.bn("jpt",this.Qpt))}this.Ds(t)},this.ewt=t=>{Je(t)||this._o(new Na(zy(t,Qa.MEDIA_LOAD_ERROR)))},this.Xpt=t=>{const e=t.M6;e&&this.iwt(e).catch(this.ewt)},this.awt=t=>{this.swt(t).catch(this.ewt)},this.zpt=t=>{const e=t.M6;if(e)for(const t of this.twt)for(const i of t.Act.Jat){const s=(i.TG||[]).some((t=>t.aU&&_e(na(e),hP(t.aU))));i.qdt&&s&&(i.qdt=!1,i.pat&&t.Mdt(i.pat))}},this.fW=i,this.gZ=s,this.zut=n,this.WB=t,this.IO=oi(),this.Kpt=[],this.Dpt=o,this.Wpt=h,this.hH=f,this.lW=u,this.Npt=new JW(t,i,s,n,u,null==(v=null==r||null==(_=r.dash)?void 0:_.segmentRelativeVttTiming)||v),this.Hl=new Iu([this.Npt.nt]),this.edt=l,this.wpt=d,this.Dpt.bn(Ne.vat,this.Ds),this.xu=a,this.Z2=e,this.Edt=r.lowLatency,this.spt=c,this.Lpt=r.abr,this.WB.bn(Ti.fb,this.Xpt),this.WB.bn(Ti.Ey,this.zpt)}};r(),r(),r();var IG=/^P(?:(\d+)Y)?(?:(\d+)M)?(?:(\d+)D)?(?:T(?:(\d+)H)?(?:(\d+)M)?(?:(\d*\.?\d*)S)?)?$/,CG=class t{static JD(e){const i=e.match(IG);if(!i)throw new g("The given value could not be parsed as a valid DateTimeInterval");const s=Number(i[1])||0,n=Number(i[2])||0,r=Number(i[3])||0,o=Number(i[4])||0,h=Number(i[5])||0,a=Number(i[6])||0;return new t(31536e3*s+2592e3*n+86400*r+3600*o+60*h+a)}get Zft(){return H.vV(this.uwt,1e3)}cwt(){return this.uwt}lwt(){return 1e3*this.uwt}constructor(t){this.uwt=t}};r();var PG=function(t){return t.dwt="progressive",t.fwt="interlaced",t.iE="unknown",t}({});r();var DG=class{_F(){return this._wt/this.vwt}constructor(t,e){this._wt=t,this.vwt=e}},NG=/^(?:true|false)$/i,MG=/^(-?)(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(?:Z|([+-])(\d{2}):(\d{2}))?$/;function LG(t){if(void 0!==t)return CG.JD(t)}function BG(t){if(void 0===t)return;const e=t.match(MG);if(!e)throw new g("The given value could not be parsed as a valid Date");const[,i,s,n,r,o,h,a,u,c,l,d]=e,f=("-"===i?-1:1)*Number(s),v=Number(n)-1,m=Number(r),p=Number(o);let w=Number(h);const y=Number(a),b=Number("0."+(u||"")),A=_.round(1e3*b);if(c){w-=("-"===c?-1:1)*(60*Number(l)+Number(d))}const T=new Date(Date.UTC(f,v,m,p,w,y,A));if(S(T.getTime()))throw new g("The given value could not be parsed as a valid Date");return T}function OG(t){if(!t)return;const e=/(\d+)-(\d+)/.exec(t);return e?[Tc(e[1]),Tc(e[2])]:void 0}function FG(t){if(void 0!==t){if(!S(Number(t)))try{return vo.fromString(t,!0)}catch(t){}throw new g("The given value could not be parsed as a valid unsigned long")}}function Tc(t){if(void 0===t)return;const e=Number(t);if(!S(e))return e;throw new g("The given value could not be parsed as a valid Number")}function VG(t){if(void 0===t)return;const e=t.split("/"),i=Number(e[0]),s=Number(e[1]||1);if(!S(i)&&!S(s))return new DG(i,s);throw new g("The given value could not be parsed as a valid frame rate")}function $e(t){if(void 0!==t){if(NG.test(t))return"true"===t.toLowerCase();if(!S(x(t)))return Boolean(x(t));throw new g("The given value could not be parsed as a valid Boolean.")}}function WG(t){return{Xu:t.zx,mwt:$e(t.qx("availabilityTimeComplete")),gwt:Tc(t.qx("availabilityTimeOffset"))}}function UG(t){return t.map(WG)}function GG(t){const e=JG(t),i=function(t,e,i,s){let n=t.Yx(i,e);return void 0===n&&(n=t.qx(s+":"+e)),n}(t,"default_KID","urn:mpeg:cenc:2013","cenc");let s;const n=XE(t,"pssh","urn:mpeg:cenc:2013","cenc")[0];if(void 0!==n&&(s=pr(n.zx)),!s){const e=XE(t,"pro","urn:microsoft:playready","mspr")[0];void 0!==e&&(s=function(t){const e=ha(t.zx),i=new j([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),s=e.length,n=12+i.length+4+s,r=new ArrayBuffer(n),o=new j(r),h=new DataView(r),a=new Ri;kl(h,a,n),kl(h,a,1886614376),kl(h,a,0),Cg(h,a,i),kl(h,a,s),Cg(h,a,e),!1;return o.buffer}(e))}return{aU:i,l9:s,c9:e.c9,Mx:e.Mx}}function HG(t){return{pwt:t.qx("sourceURL"),_ut:OG(t.qx("range"))}}function ZG(t,e){const i=t.qx("d"),s=t.qx("t"),n=Tc(t.qx("r"));e.push({ct:i,WO:s,wwt:n})}function XG(t){return{Qut:t.qx("index"),ywt:OG(t.qx("indexRange")),AN:t.qx("media"),bwt:OG(t.qx("mediaRange"))}}function zG(t){const e=YG(t),i=function(t){const e=t.map(XG);return e.length>0?e:void 0}(t.Wx("SegmentURL"));return ol({},e,{Awt:i,Swt:t.qx("xlink:href"),Twt:t.qx("xlink:actuate")})}function qG(t){const e=$e(t.qx("availabilityTimeComplete")),i=Tc(t.qx("availabilityTimeOffset")),s=OG(t.qx("indexRange")),n=$e(t.qx("indexRangeExact")),r=t.Wx("Initialization");if(r.length>1)throw new g("The provided MPEG-DASH document's "+t.Ux+" element can not have more than one Initialization element.");const o=1===r.length?HG(r[0]):void 0,h=FG(t.qx("presentationTimeOffset")),a=t.Wx("RepresentationIndex");if(a.length>1)throw new g("The provided MPEG-DASH document's "+t.Ux+" element can not have more than one RepresentationIndex element.");return{mwt:e,gwt:i,ywt:s,kwt:n,Ewt:o,xwt:h,Rwt:1===a.length?HG(a[0]):void 0,Iwt:LG(t.qx("timeShiftBufferDepth")),mN:Tc(t.qx("timescale"))}}function YG(t){const e=qG(t),i=t.Wx("BitstreamSwitching"),s=i.length>0?HG(i[0]):void 0,n=Tc(t.qx("duration")),r=t.Wx("SegmentTimeline");if(r.length>1)throw new g("The provided MPEG-DASH document's "+t.Ux+" element can not have more than one SegmentTimeline element.");const o=1===r.length?function(t){const e=[],i=t.Wx("S");for(const t of i)ZG(t,e);return e}(r[0]):void 0;return ol({},e,{Cwt:s,ct:n,Zot:o,Pwt:Tc(t.qx("startNumber")),Dwt:Tc(t.qx("endNumber"))})}function KG(t){return{Nwt:function(t){if(!t)return;const e=t.split(/\s/);return e.length>1?(e.length=2,e.map(Tc)):1===e.length?e.map(Tc)[0]:void 0}(t.qx("audioSamplingRate")),Jrt:t.qx("codecs"),Mwt:$e(t.qx("codingDependency")),TG:function(t){if(0!==t.length)return t.map(GG)}(t.Wx("ContentProtection")),Lwt:function(t){return t.map($G)}(t.Wx("EssentialProperty")),Bwt:function(t){return t.map(tH)}(t.Wx("SupplementalProperty")),oft:VG(t.qx("frameRate")),Ti:Tc(t.qx("height")),Owt:Tc(t.qx("maxPlayoutRate")),Fwt:Tc(t.qx("maximumSAPPeriod")),jq:t.qx("mimeType"),Vwt:t.qx("profiles"),Wwt:t.qx("sar"),Uwt:function(t){switch(t){case PG.dwt:case PG.fwt:case PG.iE:return t;default:return}}(t.qx("scanType")),Gwt:t.qx("segmentProfiles"),Hwt:Tc(t.qx("startWithSAP")),ji:Tc(t.qx("width"))}}function jG(t){const e=UG(t.Wx("BaseURL")),i=t.Wx("SegmentBase");if(i.length>1)throw new g("The provided MPEG-DASH document's "+t.Cx+" element can not have more than one SegmentBase element.");const s=1===i.length?qG(i[0]):void 0,n=function(t){const e=t.map(zG);return e.length>0?e:void 0}(t.Wx("SegmentList")),r=t.Wx("SegmentTemplate");if(r.length>1)throw new g("The provided MPEG-DASH document's "+t.Cx+" element can not have more than one SegmentTemplate element.");const o=1===r.length?function(t){return ol({},YG(t),{Zwt:t.qx("bitstreamSwitching"),Xwt:t.qx("index"),zwt:t.qx("initialization"),qwt:t.qx("media")})}(r[0]):void 0;return{Ywt:e,Kwt:s,Qwt:n,Jwt:o}}function QG(t){const e=KG(t),i=jG(t),s=Tc(t.qx("bandwidth")),n=t.qx("dependencyId"),r=t.qx("id"),o=t.qx("mediaStreamStructureId"),h=Tc(t.qx("qualityRanking"));if(t.Wx("SegmentBase").length>1)throw new g("The provided MPEG-DASH document's Representation element can not have more than one SegmentBase element.");return ol({},e,i,{bG:s,$wt:n,o:r,tyt:o,eyt:h})}function JG(t){return{c9:t.qx("schemeIdUri"),Mx:t.qx("value")}}function $G(t){return JG(t)}function tH(t){return JG(t)}function eH(t){return JG(t)}function iH(t){return JG(t)}function sH(t){var e;const i=KG(t),s=jG(t),n=function(t){return t.map(iH)}(t.Wx("Accessibility")),r=$e(t.qx("bitstreamSwitching")),o=t.qx("contentType"),h=Tc(t.qx("group")),a=Tc(t.qx("id")),u=(null==(e=t.Wx("Label")[0])?void 0:e.zx)||"",c=t.qx("lang"),l=Tc(t.qx("maxBandwidth")),d=VG(t.qx("maxFrameRate")),f=Tc(t.qx("maxHeight")),_=Tc(t.qx("maxWidth")),v=Tc(t.qx("minBandwidth")),m=VG(t.qx("minFrameRate")),p=Tc(t.qx("minHeight")),w=Tc(t.qx("minWidth")),y=t.qx("par"),b=function(t){return t.map(QG)}(t.Wx("Representation"));if(0===b.length)throw new g("The provided MPEG-DASH document has an AdaptationSet with no valid Representation's");const A=function(t){return t.map(eH)}(t.Wx("Role")),S=$e(t.qx("segmentAlignment"))||!1,T=Tc(t.qx("selectionPriority")),k=T||1,E=$e(t.qx("subsegmentAlignment"))||!1;let x;try{x=Tc(t.qx("subsegmentStartsWithSAP"))}catch(t){}return ol({},i,s,{Rdt:n,Cwt:r,Mk:o,Odt:h,o:a,Ch:u,gs:c,iyt:l,syt:d,nyt:f,ryt:_,oyt:v,hyt:m,ayt:p,uyt:w,cyt:y,Jat:b,vft:A,lyt:S,UH:k,dyt:E,fyt:x,_yt:t.qx("xlink:actuate")||"onRequest",vyt:t.qx("xlink:href")})}function nH(t){const e=FG(t.qx("presentationTime"))||vo.ZERO,i=FG(t.qx("duration")),s=Tc(t.qx("id")),n=function(t){const e=t.Xx,i={};for(let t=0;t<e.length;t++)i[e[t].l]=e[t].Mx;return i}(t),r=t.zx;return{gL:e,ct:i,o:s,Xx:n,Kk:""!==r.trim()?r:t.qx("messageData")||""}}function rH(t){return{vyt:t.qx("xlink:href"),_yt:t.qx("xlink:actuate"),c9:t.qx("schemeIdUri"),Mx:t.qx("value"),mN:Tc(t.qx("timescale")),xwt:FG(t.qx("presentationTimeOffset")),Qq:t.Wx("Event").map(nH)}}function oH(t){const e=jG(t),i=t.Wx("AssetIdentifier");if(i.length>1)throw new g("The provided MPEG-DASH document's Period element can not have more than one AssetIdentifier element.");const s=1===i.length?function(t){return JG(t)}(i[0]):void 0,n=function(t){return t.map(sH)}(t.Wx("AdaptationSet")),r=$e(t.qx("bitstreamSwitching")),o=LG(t.qx("duration")),h=function(t){return t.map(rH)}(t.Wx("EventStream")),a=t.qx("id"),u=LG(t.qx("start")),c=(t.Wx("Subset"),t.qx("xlink:href"));return ol({},e,{gft:n,myt:s,Cwt:r,ct:o,gyt:h,o:a,Sn:u,_yt:t.qx("xlink:actuate"),vyt:c})}function hH(t){const e=t.qx("schemeIdUri");if(!e)return;return{c9:e,Mx:t.qx("value")}}function aH(t,e){const i=BG(t.qx("availabilityEndTime")),s=BG(t.qx("availabilityStartTime")),n=UG(t.Wx("BaseURL")),r=t.qx("id"),o=function(t){return t.map((t=>""+t.zx))}(t.Wx("Location")),h=LG(t.qx("maxSegmentDuration")),a=LG(t.qx("maxSubsegmentDuration")),u=LG(t.qx("mediaPresentationDuration")),c=(t.Wx("Metrics"),LG(t.qx("minBufferTime")));if(!c)throw new g("The provided MPEG-DASH document's MPD element does not have the required 'minimumBufferTime' attribute.");const l=LG(t.qx("minimumUpdatePeriod")),d=function(t){return t.map((t=>oH(t)))}(t.Wx("Period"));if(!d.length)throw new g("The provided MPEG-DASH document's MPD element does not have the required 'Period' element.");const f=t.qx("profiles");if(!f)throw new g("The provided MPEG-DASH document's MPD element does not have the required 'profiles' attribute.");const _=BG(t.qx("publishTime")),v=LG(t.qx("suggestedPresentationDelay")),m=LG(t.qx("timeShiftBufferDepth")),p=function(t){switch(t){case Bs.pW:case Bs.wW:return t;default:return}}(t.qx("type")),w=function(t){const e=[];for(const i of t){const t=hH(i);t&&e.push(t)}return e}(t.Wx("UTCTiming")),y=function(t){if(0===t.length)return;const e=t[0],i=e.Wx("Latency");if(0===i.length)return;const s=function(t){const e=t[0],i=Tc(e.qx("target"));if(void 0===i)return;const s=Tc(e.qx("min")),n=Tc(e.qx("max"));return{pyt:i,cV:s,uV:n}}(i);if(void 0===s)return;const n=function(t){if(0===t.length)return;const e=t[0],i=Tc(e.qx("max")),s=Tc(e.qx("min"));return{cV:s,uV:i}}(e.Wx("PlaybackRate"));return{wyt:s,QR:n}}(t.Wx("ServiceDescription"));return{yyt:i,byt:s,Ywt:n,o:r,Ayt:o,Syt:e,Tyt:h,kyt:a,Eyt:u,xyt:c,Ryt:l,Gpt:d,Vwt:f,Iyt:_,Cyt:v,Iwt:m,Tw:p,Pyt:w,Dyt:y}}var uH=class{Nyt(t,e){return function(t,e){if(!t)throw new g("The provided MPEG-DASH document does not contain a valid MPD root element.");return aH(t,e)}(Ms.Ix(t).$x,e)}};function cH(t){return{get bandwidth(){return t.bG},get codecs(){return t.Jrt},get id(){return t.o},get uid(){return t.IC},get name(){return t.Ch},get averageBandwidth(){return t.Myt},get label(){return t.Ch},set label(e){t.Ch=hs(e)},get available(){return t.trt},get score(){return t.Lyt},addEventListener(e,i){t.bn(e,i)},removeEventListener(e,i){t.vn(e,i)}}}function Sl(t){return Jr(cH(t),{get height(){return t.Ti},get width(){return t.ji},get frameRate(){return t.oft},get firstFrame(){return t.Byt}})}function Tl(t){return Jr(cH(t),{get audioSamplingRate(){return t.Nwt}})}r(),r(),r(),r(),r(),r(),r(),r();var lH=class extends pe{constructor(t){super("update"),this.quality=t}},dH=class extends Co{get Ch(){return this.CO}set Ch(t){this.CO!==t&&(this.CO=t,this._o(new lH(this.wa)))}get Myt(){}get trt(){return this.Oyt}get Lyt(){}aW(){this.Oyt=!1,this._o(new lH(this.wa))}hW(){this.Oyt=!0,this._o(new lH(this.wa))}constructor(t,e,i,s,n){super(),this.o=t,this.bG=e,this.Jrt=i,this.Fyt=n,this.IC=mk(),this.CO=s||"",this.Oyt=!0}},fH=class extends dH{get wa(){return this.eu||(this.eu=Sl(this)),this.eu}constructor(t,e,i,s,n,r,o,h,a=0){super(t,e,i,s,n),this.oft=r,this.ji=o,this.Ti=h,this.Byt=a,this.eu=void 0}},_H=class extends dH{get wa(){return this.eu||(this.eu=Tl(this)),this.eu}constructor(t,e,i,s,n,r){super(t,e,i,s,n),this.Nwt=r,this.eu=void 0}};r(),r();var Cu=class extends Co{get Vyt(){const t=this.Wyt();return null==t?void 0:t.Sn}get Uyt(){const t=this.Wyt();return null==t?void 0:t.Tn}constructor(...t){super(...t),this.Gyt=t=>{this._o(t)}}},vH=class extends Cu{get Act(){return this.Hat}get Nwt(){var t;return null!=(t=this.Hyt.Kk.Nwt)?t:this.Act.Nwt}get bG(){return this.Hyt.Kk.bG||0}get Jrt(){const t=this.Hyt.Kk;return t.Jrt?[t.Jrt]:this.Act.Jrt}get Zyt(){const t=this.Hyt.Kk;return t.Jrt?[t.Jrt]:[]}get gp(){return this.Hyt.Kk.Jrt||this.Act.gp}get Mwt(){return this.Hyt.Kk.Mwt||this.Act.Mwt}get TG(){return this.Hyt.Kk.TG||this.Act.TG}get Mk(){return this.jq+'; codecs="'+this.gp+'"'}get Lwt(){const t=this.Hyt.Kk;return t.Lwt.length?t.Lwt:this.Act.Lwt}get wa(){return this.eu||(this.eu=function(t){return{get id(){return t.o},get type(){return t.Tw},get bandwidth(){return t.bG},get width(){return t.ji},get height(){return t.Ti},get frameRate(){var e,i;return null!=(i=null==(e=t.oft)?void 0:e._F())?i:NaN},get audioSamplingRate(){return t.Nwt}}}(this))}get oft(){var t;return null!=(t=this.Hyt.Kk.oft)?t:this.Act.oft}get Ti(){return this.Hyt.Kk.Ti||this.Act.Ti}get o(){return this.Hyt.Kk.o||""}get wdt(){return this.Xyt}set wdt(t){this.Xyt=t}get pdt(){const t=this.Hyt.zyt();if(t)return{Xu:t.Xu,_ut:t._ut,xE:this.vdt.xE}}get Owt(){return this.Hyt.Kk.Owt||this.Act.Owt||1}get Fwt(){return this.Hyt.Kk.Fwt||this.Act.Fwt}get vdt(){return this.rlt.vdt}get jq(){return this.Hyt.Kk.jq||this.Act.jq}get rlt(){return this.Act.rlt}get Vwt(){return this.Hyt.Kk.Vwt||this.Act.Vwt}get pat(){return this.qyt}get Wwt(){return this.Hyt.Kk.Wwt||this.Act.Wwt}get Uwt(){return this.Hyt.Kk.Uwt||this.Act.Uwt}get Yyt(){return this.Hyt.Yyt}get Gwt(){return this.Hyt.Kk.Gwt||this.Act.Gwt}get Zot(){return this.Hyt.Zot}get Hwt(){return this.Hyt.Kk.Hwt||this.Act.Hwt}get Tw(){const t=this.jq.split("/")[0];return"application"===t||"text"===t||wx(this.jq,this.Jrt)?ee.Tk:"video"===t?ee.mE:"audio"===t?ee.vE:"image"===t?ee.gE:ee.iE}get ji(){return this.Hyt.Kk.ji||this.Act.ji}get clt(){return this.Kyt}set clt(t){this.Kyt=t}get qdt(){return this.jyt}set qdt(t){this.jyt=t}Alt(t){const e=Yn(t)?this.Hyt.Qyt(t):this.Hyt.Alt(t);return{Xu:e.Xu,_ut:e._ut,xE:this.vdt.xE}}Jyt(){return this.Hyt.Jyt()}Wyt(){return this.Hyt.Wyt()}$yt(){return this.Hyt.$yt()}dlt(t){return this.Hyt.dlt(t)}_lt(t,e,i){return this.Hyt._lt(t,this.vdt.xE,e,i)}sdt(t){return Yn(t)?this.Zot.tbt(t,this.Hyt):this.Zot.sdt(t)}nlt(t){return Yn(t)?this.Zot.ebt(t,this.Hyt):this.Zot.nlt(t)}yn(){this.Hyt.vn(Ne.fat,this.Gyt)}constructor(t,e){if(super(),this.eu=void 0,this.Xyt=void 0,this.Kyt=!1,this.jyt=!1,this.Hat=t,this.Hyt=e,this.Hyt.bn(Ne.fat,this.Gyt),this.Tw===ee.mE){var i,s;const t=null!=(s=null==(i=this.oft)?void 0:i._F())?s:NaN;this.qyt=new fH(this.o,this.bG,this.gp,"","",t,this.ji,this.Ti)}else this.Tw===ee.vE?this.qyt=new _H(this.o,this.bG,this.gp,"","",this.Nwt):this.qyt=void 0}},mH=class extends Cu{get Rdt(){return this.Hyt.Kk.Rdt}get Nwt(){var t;return null!=(t=this.Hyt.Kk.Nwt)?t:-1}get Jrt(){if(this.Hyt.Kk.Jrt)return[this.Hyt.Kk.Jrt];{const t=[];for(const e of this.Jat)e.Zyt.length&&-1===t.indexOf(e.gp)&&t.push(e.gp);return t}}get gp(){return this.Jrt.join()}get Mwt(){return this.Hyt.Kk.Mwt}get TG(){return this.Hyt.Kk.TG}get Mk(){return this.jq+'; codecs="'+this.gp+'"'}get Lwt(){return this.Hyt.Lwt}get Bwt(){return this.Hyt.Bwt}get oft(){return this.Hyt.Kk.oft}get Odt(){return this.Hyt.Kk.Odt}get Ti(){return this.Hyt.Kk.Ti||0}get o(){return this.Hyt.Kk.o}get Ch(){return this.Hyt.Kk.Ch||""}get Owt(){return this.Hyt.Kk.Owt}get Fwt(){return this.Hyt.Kk.Fwt}get vdt(){return this.rlt.vdt}get jq(){return this.Hyt.Kk.jq||this.Gdt[0].jq}get rlt(){return this.Dpt}get Vwt(){return this.Hyt.Kk.Vwt}get Jat(){return this.Gdt}get vft(){return this.Hyt.Kk.vft||[]}get Wwt(){return this.Hyt.Kk.Wwt}get Uwt(){return this.Hyt.Kk.Uwt}get Gwt(){return this.Hyt.Kk.Gwt}get UH(){return this.Hyt.Kk.UH}get Hwt(){return this.Hyt.Kk.Hwt}get Tw(){const t=(this.Hyt.Kk.Mk||this.jq).split("/")[0];return"application"===t||"text"===t||"subtitle"===t||wx(this.jq,this.Jrt)?ee.Tk:"video"===t?ee.mE:"audio"===t?ee.vE:"image"===t?ee.gE:ee.iE}get ji(){return this.Hyt.Kk.ji||0}get Qtt(){return this.Hyt.Kk.gs||""}get uft(){return this.Vyt}get aft(){const t=this.uft,e=this.Uyt;if(void 0===t||void 0===e)return;const i=_.min(e,this.vdt.ibt);return _.max(t,i)}async ir(t,e){if(0===this.Gdt.length){const i=this.Hyt.Jat.map((i=>this.sbt(i,t,e)));this.Gdt=(await Promise.all(i)).filter(Bo)}this.nbt()}async sbt(t,e,i){const s=new vH(this,t),n=await e(s);if(J(i),n)return s}nbt(){if(!this.Gdt.length)throw new g("Detected an AdaptationSet without any supported Representations.")}Wyt(){return this.Hyt.Wyt()}$yt(){return this.Hyt.$yt()}yn(){this.Hyt.vn(Ne.fat,this.Gyt);for(const t of this.Gdt)t.yn();En(this.Gdt)}constructor(t,e){super(),this.Gdt=[],this.Dpt=t,this.Hyt=e,this.Hyt.bn(Ne.fat,this.Gyt)}};function gH(t,e){const i=[];for(const s of e)for(const e of t)i.push(Ms.Ih(e,s));return i}r(),r(),r(),r(),r(),r(),r();var Ml=class{rbt(t){const e=t-this.Dpt.Sn;if(e<0||e>=this.Dpt.ct)return;const i=this.obt();return void 0!==i&&_s(i,e,1e-5)?this.hbt():this.abt(e)}llt(t){const e=t-this.Dpt.Sn;if(!(e<0))return this.ubt(_.min(e,this.Dpt.ct))}hbt(){return this.cbt(0)}lbt(){const t=this.Dpt.ct;if(isFinite(t))return this.ubt(t)}get dbt(){return this.Dpt._bt.fbt&&void 0!==this.vbt()}Jyt(t){if(this.Dpt._bt.Tw===Bs.wW){if(this.dbt){const e=this.hbt(),i=this.vbt();if(void 0===e||void 0===i)return;return{mbt:t,gbt:e,pbt:i}}const e=this.wbt(t);if(!e)return;return{mbt:t,gbt:this.ybt(t),pbt:e}}{0;const e=this.hbt();if(e)return{mbt:t,gbt:e,pbt:this.lbt()}}}$yt(t,e){if(e){let t=this.mdt(e.gbt);const i=this.wlt(e.pbt);if(i){const e=this.gdt(i);(!t||e.getTime()<t.getTime())&&(t=e)}return t}{const e=this.hbt();if(e){const i=this.gdt(e);if(t.getTime()<i.getTime())return i}const i=this.Dpt._bt.byt;return t.getTime()<i.getTime()?i:void 0}}wbt(t){const e=(t.getTime()-this.Dpt._bt.byt.getTime())/1e3-this.Dpt.Sn+this.bbt;let i=this.ubt(Ns(e,0,this.Dpt.ct));if(!i)return;if(i=this.Abt(i,t),!i)return;let s=this.wlt(i);for(;s&&this.kdt(s,t);)i=s,s=this.wlt(i);return i}ybt(t){let e;const i=this.Sbt.Iwt;if(i){const s=(t.getTime()-this.Dpt._bt.byt.getTime())/1e3-this.Dpt.Sn-i.cwt();e=this.ubt(Ns(s,0,this.Dpt.ct)),e||(e=this.hbt())}else e=this.hbt();if(!e)return;if(e=this.Abt(e,t),!e)return;let s=this.plt(e);for(;s&&this.kdt(s,t);)e=s,s=this.plt(e);return e}Abt(t,e){let i=t;for(;i&&this.gdt(i).getTime()>e.getTime();)i=this.plt(i);if(!i)return;const s=this.mdt(i);if(s&&s.getTime()<=e.getTime()){const t=this.plt(i);for(t&&this.kdt(t,e)&&(i=t);i;){if(this.gdt(i).getTime()>e.getTime())return;if(this.kdt(i,e))break;i=this.wlt(i)}if(!i)return}return i}kdt(t,e){if(this.dbt)return!0;if(this.gdt(t).getTime()>e.getTime())return!1;const i=this.mdt(t);return!(i&&e.getTime()>=i.getTime())}Tbt(t,e){if(this.dbt)return!0;if(this.kbt(t).getTime()>e.getTime())return!1;const i=this.mdt(t);return!(i&&e.getTime()>=i.getTime())}Ebt(t,e,i){const s=io(e,this.NA)+this.Dpt.Sn;return{Qut:t,xbt:e,WO:s,ct:i,UO:s+i}}kbt(t){return this.Dpt._bt.Tw===Bs.wW?new Date(this.Dpt._bt.byt.getTime()+1e3*(t.WO+t.ct)):this.Dpt._bt.byt}gdt(t){const e=this.kbt(t);return this.Dpt._bt.Tw===Bs.wW?new Date(e.getTime()-1e3*this.bbt):e}mdt(t){let e=1/0;if(this.Dpt._bt.Tw===Bs.wW){const i=this.Sbt.Iwt;i&&(e=this.kbt(t).getTime()+1e3*t.ct+i.lwt())}const i=this.Dpt._bt.yyt;return i&&(e=_.min(e,i.getTime())),e===1/0?void 0:new Date(e)}Rbt(t,e){return t.Qut+e}get BV(){return this.Dpt.Sn-io(this.Ibt,this.NA)}get xwt(){return io(this.Ibt,this.NA)}dlt(t){return!1}_lt(t,e,i,s,n){const r=this.Cbt(t);if(!r)return Promise.reject(new g("Invalid segment"));const o=this.Pbt(r.Qut,e);return o?Promise.resolve(o):ou(this.Dbt(r.Qut,e,i,s),n)}Pbt(t,e){}Dbt(t,e,i,s){return Promise.reject(new g("Not supported"))}plt(t){const e=this.Cbt(t);if(e)return this.cbt(e.Qut-1)}wlt(t){const e=this.Cbt(t);if(e)return this.cbt(e.Qut+1)}Cbt(t){const e=this.cbt(t.Qut);if(e&&e.WO===t.WO)return e;const i=this.rbt(t.WO);return i&&i.WO===t.WO?i:void 0}Nbt(t,e){const i=this.vlt(t);if(!i||!this.dlt(i.Qut))return;const s=this.Pbt(i.Qut,e);return s?s.Nbt(t):void 0}vlt(t){return this.cbt(t.Mbt)}sdt(t){const e=this.Cbt(t);return!!e&&0===e.Qut}tbt(t,e){const i=this.Nbt(t,e);return!!i&&0===i.jut}nlt(t){const e=this.Cbt(t);if(!e)return!1;const i=this.lbt();return!!i&&e.Qut===i.Qut}ebt(t,e){const i=this.Nbt(t,e);if(!i)return!1;const s=this.lbt();if(!s||i.Mbt!==s.Qut)return!1;const n=this.Pbt(i.Mbt,e);return i.jut+1===n.V}Xw(){}constructor(t,e){this.Dpt=t,this.Sbt=e,this.NA=e.mN,this.bbt=e.gwt,this.Ibt=e.xwt}},pH=class extends Ml{cbt(t){if(t<0)return;const e=this.Lbt.multiply(t),i=io(e,this.NA),s=this.Dpt.ct;if(i>=s)return;const n=this.Bbt();if(void 0!==n){if(t>n)return;if(t===n&&isFinite(s))return this.Ebt(t,e,s-i)}return isFinite(s)&&i+this.Obt>s?this.Ebt(t,e,s-i):this.Ebt(t,e,this.Obt)}obt(){return 0}abt(t){const e=_.floor(t/this.Obt),i=this.Bbt();return void 0!==i&&e>=i?this.cbt(i):this.cbt(e)}ubt(t){if(t>=this.Dpt.ct){const t=_.ceil(this.Dpt.ct/this.Obt)-1,e=this.Bbt();return void 0!==e&&t>=e?this.cbt(e):this.cbt(t)}return this.abt(t)}Bbt(){const t=this.Sbt.Dwt;var e;if(void 0!==t)return t-(null!=(e=this.Sbt.Pwt)?e:1);const i=this.Sbt.Fbt;return void 0!==i&&i>0?i-1:void 0}vbt(){if(isFinite(this.Dpt.ct))return this.lbt()}Vbt(t,e){return this.Lbt.multiply(t.Qut+(e-1))}ir(){}constructor(t,e){super(e,t);const i=t.Wbt,s=t.ct;if(void 0===i||void 0===s)throw new g("MultipleSegmentBase does not have a segment duration specified.");this.Lbt=i,this.Obt=s}};function wH(t,e,i){const s=e.length;if(0===s)return-1;let n=0,r=s-1,o=t.Ubt(e[n]),h=t.Gbt(e[r]);for(;n<=r&&t.Hbt(o,i)<=0&&t.Hbt(i,h)<0;){const a=n+_.floor(t.Zbt(i,o,h)*(r-n)),u=e[a],c=t.Ubt(u),l=a+1<s?t.Ubt(e[a+1]):t.Gbt(u);if(t.Hbt(l,i)<=0)n=a+1,o=l;else{if(!(t.Hbt(i,c)<0))return a;r=a-1,h=c}}return-1}function yH(t,e){return wH(bH.Vg,t,e)}r(),r(),r();var bH=class t{static get Vg(){return null!=this.Qrt||(this.Qrt=new t),this.Qrt}Ubt(t){return t.WO}Gbt(t){return t.UO}Hbt(t,e){return t.compare(e)}Zbt(t,e,i){return t.subtract(e).toNumber()/i.subtract(e).toNumber()}},AH=.01,SH=class extends Ml{cbt(t){if(!(t<0))return t<this.Xbt.length?this.Xbt[t].Zut:this.zbt(t-this.Xbt.length)}obt(){if(this.Xbt.length>0)return io(this.Xbt[0].WO,this.NA)}abt(t){if(this.qbt&&io(this.qbt.WO,this.NA)<=t){const e=io(this.qbt.WO,this.NA),i=io(this.qbt.ct,this.NA),s=_.floor((t-e)/i);return this.zbt(s)}if(this.Xbt.length>0&&_s(t,io(this.Xbt[0].WO,this.NA),1e-5))return this.Xbt[0].Zut;const e=yH(this.Xbt,vo.fromNumber(t*this.NA));return e<0?void 0:this.Xbt[e].Zut}ubt(t){if(!this.qbt&&this.Xbt.length>0){const e=this.Xbt[this.Xbt.length-1];if(function(t,e,i){return Vm(t,e,i)>=0}(t,io(e.UO,this.NA),1e-5))return e.Zut}const e=this.obt();return e&&t<e?this.Xbt[0].Zut:this.abt(t)}vbt(){return isFinite(this.Dpt.ct)?this.lbt():this.cbt(this.Xbt.length-1)}Vbt(t){return this.Ybt(t)}zbt(t){if(!this.qbt)return;const e=this.qbt.WO,i=this.qbt.ct,s=e.add(i.multiply(t)),n=io(s,this.NA),r=this.Dpt.ct;if(n>=r)return;const o=this.Xbt.length+t,h=_.min(io(i,this.NA),n+r);return this.Ebt(o,s,h)}Ybt(t){return t.xbt.add(this.Ibt)}ir(){const t=this.Sbt.Kk.Zot;if(!t)throw new g("MultipleSegmentBaseTO does not have a SegmentTimeline specified.");this.Kbt(t)}Kbt(t){const e=this.Ibt;this.jbt(t,e);const i=this.Qbt(t);this.Jbt(t,e,i.$bt,i.Mbt)}jbt(t,e){const i=this.Xbt;if(0===t.length)En(i);else{const s=t[0];let n=0;const r=io(s.WO?vo.fromString(s.WO,!1).subtract(e):vo.ZERO,this.NA);for(;n<i.length&&io(i[n].WO,this.NA)<r-AH;)n++;n>0&&i.splice(0,n)}}Qbt(t){const e=this.Xbt,i=this.Cgt;let s=0,n=0;for(;s<t.length&&n<e.length;){const r=t[s].wwt||0;if(r<0)break;const o=n+r;if(o>=e.length)break;if(e[o].WO.greaterThanOrEqual(i))break;if(e[n].Zut.Qut===n)n=o+1;else for(;n<=o;)e[n].Zut.Qut=n,n++;0,s++}return{$bt:s,Mbt:n}}Jbt(t,e,i,s){const n=this.Xbt;let r,o=i,h=s;for(;o<t.length;){const i=t[o],s=vo.fromString(i.ct,!1),a=i.wwt||0;let u;if(i.WO){if(u=vo.fromString(i.WO,!1).subtract(e),h>0){const t=n[h-1];t.UO.greaterThan(u)&&(t.ct=u.subtract(t.WO),t.UO=t.WO.add(t.ct))}}else u=h>0?n[h-1].UO:vo.ZERO;if(a<0){if(o+1===t.length){r={WO:u,ct:s};break}const i=vo.fromString(t[o+1].WO,!1).subtract(e);for(;u.lessThan(i);){const t=u.add(s);this.tAt(n,h,u,s,t),u=t,h++}}else{const t=h+a;for(;h<=t;){const t=u.add(s);this.tAt(n,h,u,s,t),u=t,h++}}o++}h<n.length&&n.splice(h),n.length>0&&(this.Cgt=n[n.length-1].WO),this.qbt=r}tAt(t,e,i,s,n){if(e<t.length){const r=t[e];0,r.ct.equals(s)?r.Zut.Qut=e:t[e]={WO:i,ct:s,UO:n,Zut:this.Ebt(e,i,io(s,this.NA))}}else t.push({WO:i,ct:s,UO:n,Zut:this.Ebt(e,i,io(s,this.NA))})}constructor(t,e){super(e,t),this.Xbt=[],this.qbt=void 0,this.Cgt=vo.ZERO,this.ir()}};r();var TH=class{get Kk(){return this.kp}get gwt(){return this.kp&&void 0!==this.kp.gwt?this.kp.gwt:this.eAt?this.eAt.gwt:0}get xwt(){return this.kp&&void 0!==this.kp.xwt?this.kp.xwt:this.eAt?this.eAt.xwt:vo.ZERO}get Iwt(){return this.kp&&void 0!==this.kp.Iwt?this.kp.Iwt:this.eAt?this.eAt.Iwt:this.rlt._bt.Iwt}get mN(){return this.kp&&void 0!==this.kp.mN?this.kp.mN:this.eAt&&this.eAt.mN?this.eAt.mN:1}get ywt(){return this.kp&&void 0!==this.kp.ywt?this.kp.ywt:this.eAt?this.eAt.ywt:void 0}get Ewt(){return this.kp&&void 0!==this.kp.Ewt?this.kp.Ewt:this.eAt?this.eAt.Ewt:void 0}get Zot(){return this.iAt||(this.iAt=this.sAt()),this.iAt}sAt(){if(this.nAt=this.rAt(),this.nAt)return this.nAt;if(this.eAt)return this.eAt.Zot;throw new g("Missing media segment information.")}zyt(t){const e=this.Ewt;if(e){return{Xu:(void 0!==e.pwt?Ms.Ih(e.pwt,t.Ywt[0]):t.Ywt[0]).href,_ut:e._ut}}const i=this.ywt;if(i)return{Xu:t.Ywt[0].href,_ut:[0,i[0]-1]}}ir(t){this.kp=t,this.nAt&&this.nAt.ir()}Xw(){this.nAt&&(this.nAt.Xw(),this.nAt=void 0)}constructor(t,e,i){this.iAt=void 0,this.nAt=void 0,this.rlt=t,this.eAt=e,this.kp=i}},kH=class extends TH{get ct(){return void 0!==this.kp.ct?this.kp.ct/this.mN:this.eAt&&EH(this.eAt)?this.eAt.ct:void 0}get Wbt(){return void 0!==this.kp.ct?vo.fromNumber(this.kp.ct):this.eAt&&EH(this.eAt)?this.eAt.Wbt:void 0}get Pwt(){return void 0!==this.kp.Pwt?this.kp.Pwt:this.eAt&&EH(this.eAt)?this.eAt.Pwt:void 0}get Dwt(){return void 0!==this.kp.Dwt?this.kp.Dwt:this.eAt&&EH(this.eAt)?this.eAt.Dwt:void 0}rAt(){return void 0!==this.kp.Zot?new SH(this,this.rlt):void 0!==this.kp.ct?new pH(this,this.rlt):void 0}};function EH(t){return t instanceof kH}r();var xH=class{Vb(t){return this.oAt.replace(/\$\$|\$(RepresentationID|Number|Bandwidth|Time)(?:%0(\d+)([diuxXo]))?\$/g,((e,i,s,n)=>{if("$$"===e)return"$";const r=t[i];if(void 0===r)return e;if(void 0===s)return r.toString();let o=function(t,e){switch(e){case"d":case"i":case"u":return t.toString(10);case"x":return t.toString(16);case"X":return t.toString(16).toUpperCase();case"o":return t.toString(8);default:return}}(r,n);return void 0===o?e:(o=Jh(o,Number(s),"0"),o)}))}constructor(t){this.oAt=t}};var RH=class t extends kH{get zwt(){return this.hAt?this.hAt:this.eAt&&this.eAt instanceof t?this.eAt.zwt:void 0}get qwt(){return this.aAt?this.aAt:this.eAt&&this.eAt instanceof t?this.eAt.qwt:void 0}zyt(t){const e=this.zwt;if(!e)return super.zyt(t);const i=e.Vb({Bandwidth:t.Kk.bG,RepresentationID:t.Kk.o});return{Xu:Ms.ew(i,t.Ywt[0])}}Alt(t,e){var i;const s=null!=(i=e.Yyt.Pwt)?i:1,n=this.qwt.Vb({Bandwidth:e.Kk.bG,Number:e.Zot.Rbt(t,s),RepresentationID:e.Kk.o,Time:e.Zot.Vbt(t,s)});return{Xu:Ms.ew(n,e.Ywt[0])}}Qyt(t,e){}get Fbt(){}constructor(t,e,i){super(t,e,i),this.hAt=i.zwt?new xH(i.zwt):void 0,this.aAt=i.qwt?new xH(i.qwt):void 0}};r();var IH=class t extends kH{Alt(t,e){const i=this.Awt[t.Qut],s=e.Ywt[0];let n;return n=i.AN?Ms.Ih(i.AN,s):s,{Xu:n.href,_ut:i.bwt}}Qyt(t,e){}get Awt(){return void 0!==this.kp.Awt?this.kp.Awt:this.eAt&&this.eAt instanceof t?this.eAt.Awt:void 0}get Fbt(){var t;return null==(t=this.Awt)?void 0:t.length}};r(),r(),r(),r();var CH=class{Nbt(t){const e=this.glt(t.jut);if(e&&e.WO===t.WO)return e;const i=this.uAt(t.WO);return i&&i.WO===t.WO?i:void 0}},PH=class extends CH{get V(){return this.cAt.length}glt(t){if(t>=0&&t<this.V)return this.lAt(this.cAt[t])}uAt(t){const e=this.dAt(t);if(this.cAt.length>0){const t=this.cAt[0];if(e<=io(t.WO,this.mN))return this.lAt(t)}const i=yH(this.cAt,vo.fromNumber(e*this.mN));if(!(i<0))return this.lAt(this.cAt[i])}flt(t){const e=this.dAt(t);if(this.cAt.length>0){const t=this.cAt[this.cAt.length-1];if(e>=io(t.UO,this.mN))return this.lAt(t)}return this.uAt(t)}lAt(t){const e=io(t.WO,this.mN)-this.xwt,i=e+this.fAt,s=io(t.ct,this.mN);return{Mbt:this.Mbt,jut:t.Qut,WO:i,xbt:vo.fromNumber(e*this.mN),ct:s,UO:i+s,_At:[t.vAt,t.mAt]}}dAt(t){return t-this.fAt+this.xwt}constructor(t,e,i,s,n){super(),this.Mbt=t,this.mN=e,this.fAt=i,this.xwt=s,this.cAt=n}};r(),r(),r();var DH=class t{Jmt(){return this.SD.nc<this.Kk.byteLength}gAt(){const e=this.pAt(),i=this.wAt(),s=this.SD.nc,n=this.Kk.byteLength;let r;r=t.yAt(i)?n-s:t.bAt(i);const o=s+r<=n?r:n-s,h=E(this.Kk,this.SD,o);return new MH(e,ra(h))}pAt(){const t=this.wAt();if(t.length>7)throw new RangeError("Invalid EBML ID size");let e=0;for(let i=0;i<t.length;i++)e=256*e+t[i];return e}wAt(){const t=hc(this.Kk,this.SD.Ib());if(0===t)throw new RangeError("EBML variable sized integer is invalid");const e=8-(31-wg(t));return Ms.Up(e<=8&&e>=1,"Incorrect log2 value"),E(this.Kk,this.SD,e)}static bAt(t){if(8===t.length&&224&t[1])throw new b("EBML variable sized integer is too large");let e=0;for(let i=0;i<t.length;i++){const s=t[i];if(0===i){e=s&(1<<8-t.length)-1}else e=256*e+s}return e}static yAt(t){for(const e of NH)if(_e(t,new j(e)))return!0;return!1}constructor(t){this.Kk=t,this.SD=new Ri}},NH=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]],MH=class{AAt(){return this.SAt.byteOffset}TAt(){return new DH(this.SAt)}kAt(){const t=this.SAt.byteLength;if(t>8)throw new RangeError("EMBL integer field size is too large");if(8===t&&224&this.SAt.getUint8(0))throw new RangeError("EMBL integer field value is too large");let e=0;for(let i=0;i<t;i++){e=256*e+this.SAt.getUint8(i)}return e}SQ(){if(4===this.SAt.byteLength)return this.SAt.getFloat32(0);if(8===this.SAt.byteLength)return this.SAt.getFloat64(0);throw new RangeError("Invalid size for EMBL floating-point field")}constructor(t,e){this.id=t,this.SAt=e}};function LH(t,e){const i=function(t){const e=new DH(ra(t)),i=e.gAt();if(i.id!==OH)throw new b("Missing WebM EBML header");const s=e.gAt();if(s.id!==FH)throw new b("Missing WebM SegmentElement");const n=s.AAt(),r=function(t){const e=t.TAt();let i;for(;e.Jmt();){const t=e.gAt();if(t.id===VH){i=t;break}}if(!i)throw new b("Missing WebM InfoElement");return function(t){const e=t.TAt();let i,s=1e6;for(;e.Jmt();){const t=e.gAt();t.id===WH?s=t.kAt():t.id===UH&&(i=t.SQ())}if(void 0===i)throw new b("Missing Duration in WebM InfoElement");const n=s/1e9,r=i*n;return{timecodeScale:n,duration:r}}(i)}(s);return{segmentOffset:n,timecodeScale:r.timecodeScale,duration:r.duration}}(e),s=new DH(ra(t)).gAt();if(s.id!==GH)throw new b("Missing WebM CuesElement");const n=function(t,e,i,s){const n=[],r=t.TAt();let o,h;for(;r.Jmt();){const t=r.gAt();if(t.id!==HH)continue;const i=BH(t);if(!i)continue;const s=i.unscaledTime,a=e+i.relativeOffset;void 0!==o&&n.push({Qut:n.length,WO:o,ct:s.subtract(o),UO:s,vAt:h,mAt:a-1}),o=s,h=a}if(void 0!==o){0;const t=vo.fromNumber(s/i);n.push({Qut:n.length,WO:o,ct:t.subtract(o),UO:t,vAt:h,mAt:void 0})}return n}(s,i.segmentOffset,i.timecodeScale,i.duration);return{mN:_.round(1/i.timecodeScale),EAt:n}}function BH(t){const e=t.TAt(),i=e.gAt();if(i.id!==ZH)throw new b("Missing CueTime in WebM CuePointElement");const s=vo.fromNumber(i.kAt()),n=e.gAt();if(n.id!==XH)throw new b("Missing CueTrackPositions in WebM CuePointElement");const r=n.TAt();let o=0;for(;r.Jmt();){const t=r.gAt();if(t.id===zH){o=t.kAt();break}}return{unscaledTime:s,relativeOffset:o}}var OH=440786851,FH=408125543,VH=357149030,WH=2807729,UH=17545,GH=475249515,HH=187,ZH=179,XH=183,zH=241,qH=class extends Ml{cbt(t){if(0===t)return this.xAt}obt(){return 0}abt(t){return this.xAt}ubt(t){return this.abt(t)}vbt(){return this.xAt}Vbt(t,e){return vo.ZERO}Jyt(t){const e=this.RAt(t);return e&&{mbt:t,gbt:e,pbt:e}}RAt(t){const e=this.xAt;return this.kdt(e,t)?e:void 0}wbt(t){return this.RAt(t)}ybt(t){return this.RAt(t)}ir(){}dlt(t){return 0===t&&void 0!==this.IAt}Pbt(t,e){const i=e.Ywt[0].href;return this.CAt.get(i)}Dbt(t,e,i,s){const n=e.Ywt[0].href;let r=this.PAt.get(n);if(void 0===r){const o=e.jq,h=this.DAt.Uw;if(Gh(o))r=this.NAt(t,n,i,s,h);else{if(!ky(o))throw new A(Qa.MEDIA_NOT_SUPPORTED,"Unsupported MIME type for segment index: "+o);r=this.MAt(t,n,e,i,s,h)}this.PAt.set(n,r)}return r}async NAt(t,e,i,s,n){const r=this.IAt,o=await s.Flt(e,r,i,n),h=this.LAt(t,o);return this.CAt.set(e,h),h}LAt(t,e){const i=this.IAt,s=Mi.GD(new DataView(e),new Ri);if(s.Tw!==_t.mD)throw new g("Invalid segment index");const n=nr.aN(s.Kk),r=function(t,e){const i=[];let s=t.DL,n=e+t.NL.toNumber(),r=0;for(const e of t.LL){const t=e.xL,o=vo.fromNumber(e.ct),h=s.add(o);0===e.EL&&i.push({Qut:r++,WO:s,ct:o,UO:h,vAt:n,mAt:n+t-1}),n+=t,s=h}return i}(n,i[1]+1);return new PH(t,n.mN,this.Dpt.Sn,io(this.Ibt,this.NA),r)}async MAt(t,e,i,s,n,r){const o=i.zyt(),h=this.IAt,a=n.Flt(o.Xu,o._ut,s,r),u=n.Flt(e,h,s,r),[c,l]=await Promise.all([a,u]),d=this.BAt(t,l,c);return this.CAt.set(e,d),d}BAt(t,e,i){const s=LH(new j(e),new j(i));return new PH(t,s.mN,this.Dpt.Sn,io(this.Ibt,this.NA),s.EAt)}Xw(){super.Xw(),this.DAt.jw()}constructor(t,e){super(e,t),this.CAt=Oh(),this.PAt=Oh(),this.DAt=new da,this.IAt=t.ywt,this.xAt=this.Ebt(0,vo.ZERO,this.Dpt.ct)}},YH=class extends TH{get Pwt(){}Alt(t,e){return{Xu:e.Ywt[0].href}}Qyt(t,e){return{Xu:e.Ywt[0].href,_ut:t._At}}rAt(){return new qH(this,this.rlt)}};r();var KH=class extends pe{constructor(){super(Ne.fat)}};r();var jH=class extends Co{get Kk(){return this.kp}get Ywt(){return this.OAt}FAt(){var t,e;return null!=(e=this.Sbt)?e:null==(t=this.sx)?void 0:t.FAt()}VAt(t){const e=this.rlt,i=this.sx&&this.sx.FAt();this.kp.Jwt?this.Sbt=new RH(e,i,this.kp.Jwt):this.kp.Qwt?this.Sbt=new IH(e,i,this.kp.Qwt[0]):this.kp.Kwt?this.Sbt=new YH(e,i,this.kp.Kwt):t&&!i&&(this.Sbt=new YH(e,i,void 0))}WAt(t,e){this.kp=t,this.OAt=t.Ywt&&t.Ywt.length>0?gH(t.Ywt.map((t=>t.Xu)),e):e.slice(),this.Sbt&&(t.Jwt?this.Sbt.ir(t.Jwt):t.Qwt?this.Sbt.ir(t.Qwt[0]):t.Kwt&&this.Sbt.ir(t.Kwt))}Wyt(){var t;return null==(t=this.UAt)?void 0:t.GAt}$yt(){var t;return null==(t=this.UAt)?void 0:t.HAt}ZAt(t){const e=this.XAt,i=this.rlt.ct,s=this.UAt,n=this.zAt(t);s&&_s(i,e,1e-5)&&tZ(s,n)||(this.XAt=i,this.UAt=n,this._o(new KH))}Xw(){this.Ro(),this.Sbt&&(this.Sbt.Xw(),this.Sbt=void 0)}constructor(t,e,i){super(),this.Sbt=void 0,this.XAt=1/0,this.UAt=void 0,this.sx=e,this.WAt(t,i)}};function QH(t){let e,i;for(const i of t){const t=i.Wyt();if(t){e=t.Sn;break}}if(void 0!==e){for(let e=t.length-1;e>=0;e--){const s=t[e].Wyt();if(s){i=s.Tn;break}}return void 0!==i?{Sn:e,Tn:i}:void 0}}function JH(t){if(0===t.length)return;let e=0,i=1/0;for(const s of t){const t=s.Wyt();if(!t)return;if(e=_.max(e,t.Sn),i=_.min(i,t.Tn),e>=i)return}return{Sn:e,Tn:i}}function $H(t){let e;for(const i of t){const t=i.$yt();t&&(!e||t.getTime()<e.getTime())&&(e=t)}return e}function tZ(t,e){return function(t,e){return t&&e?t.getTime()===e.getTime():t===e}(t.HAt,e.HAt)&&function(t,e){return t&&e?_s(t.Sn,e.Sn,1e-5)&&_s(t.Tn,e.Tn,1e-5):t===e}(t.GAt,e.GAt)}var eZ=class extends Cu{get gft(){return this.qAt}get Jrt(){return this.gft.reduce(((t,e)=>{for(const i of e.Jrt)ms(t,i)||t.push(i);return t}),[])}get gp(){return this.Jrt.length>0?this.Jrt[0]:""}get Tw(){return this.qAt[0].Tw}get o(){return this.zS}get vdt(){return this.Dpt.vdt}get jq(){return this.qAt[0].jq}get rlt(){return this.Dpt}get Jat(){return on(this.gft,(t=>t.Jat))}Wyt(){return JH(this.qAt)}$yt(){let t;for(const e of this.qAt){const i=e.$yt();i&&(!t||i.getTime()<t.getTime())&&(t=i)}return t}yn(){this.Ro();for(const t of this.qAt)t.vn(Ne.fat,this.Gyt)}constructor(t,e,i){super(),this.Dpt=t,this.zS=e,this.qAt=i.slice();for(const t of i)t.bn(Ne.fat,this.Gyt)}};r();var iZ=class extends pe{constructor(){super(Ne.vat)}};function sZ(t){const e=[];for(const i of t){let t;const s=i.Odt;void 0===s||(t=Fo(e,(t=>t.o===s))),t||(t={o:s,gft:[]},e.push(t)),t.gft.push(i)}return e}r();var nZ=class extends Cu{get gft(){return this.qAt}get Ppt(){return this.YAt}get myt(){return this.Hyt.Kk.myt}get ct(){return this.Hyt.ct}get Tn(){return this.Sn+this.ct}get gyt(){return this.Hyt.Kk.gyt||[]}get o(){return this.Hyt.o}get mat(){return this.KAt}get vdt(){return this.jAt}get owt(){return this.jAt.QAt(this)}get rlt(){return this}get rwt(){return this.jAt.JAt(this)}get $At(){return this.tSt(1/0,_.min)}get eSt(){return this.tSt(0,_.max)}tSt(t,e){if(0===this.YAt.length)return;let i=t;for(const t of this.YAt)if(dT(t.Tw)){const s=t.Uyt;if(void 0===s)return;i=e(i,s)}return i}get Sn(){return this.Hyt.Sn}get xE(){return this.vdt.xE}iSt(){this.KAt||(this.KAt=!0,this._o(new iZ),this.yn())}async ir(t,e){0===this.qAt.length?(await this.sSt(this.Hyt.gft,t,e),this.nSt(this.qAt),J(e)):await this.rSt(t,e)}async sSt(t,e,i){for(const s of t){const t=new mH(this,s);try{await t.ir(e,i),this.qAt.push(t)}catch(t){th(t)}}}nSt(t){const e=sZ(t);for(const t of e){const e=new eZ(this,t.o,t.gft);this.YAt.push(e)}}async rSt(t,e){for(const i of this.qAt)await i.ir(t,e)}Wyt(){return this.Hyt.Wyt()}$yt(){return this.Hyt.$yt()}yn(){this.Ro(),this.Hyt.vn(Ne.fat,this.Gyt);for(const t of this.YAt)t.yn();for(const t of this.qAt)t.yn();En(this.qAt),En(this.YAt)}constructor(t,e){super(),this.qAt=[],this.YAt=[],this.KAt=!1,this.jAt=t,this.Hyt=e,this.Hyt.bn(Ne.fat,this.Gyt)}};r();var lt=class extends pe{constructor(){super(Ti.Gy)}};r(),r();var rZ=function(t){return t.oSt="hSt",t}({}),oZ=class extends pe{constructor(){super(rZ.oSt)}};r(),r(),r(),r();var hZ=class extends jH{get Act(){return this.Hat}get rlt(){return this.Hat.rlt}get _bt(){return this.Hat._bt}get jq(){return this.kp.jq||this.Hat.jq}get Yyt(){return this.FAt()}get Zot(){return this.Yyt.Zot}dlt(t){const e=this.jq;return!(!Gh(e)&&!ky(e))&&this.Zot.dlt(t.Qut)}_lt(t,e,i,s){return this.Zot._lt(t,this,e,i,s)}zyt(){return this.Yyt.zyt(this)}Alt(t){return this.Yyt.Alt(t,this)}Qyt(t){return this.Yyt.Qyt(t,this)}Jyt(){return this.aSt}zAt(t){const e=this.Zot,i=e.Jyt(t),s=i&&function(t,e){const{gbt:i,pbt:s,mbt:n}=t,r=i.WO;let o;const h=e.kbt(s);if(h.getTime()<=n.getTime())o=s.UO;else{const t=(h.getTime()-n.getTime())/1e3,e=_.max(s.ct-t,0);o=s.WO+e}return{Sn:r,Tn:o}}(i,e),n=this.Zot.$yt(t,i);return this.aSt=i,{mbt:t,GAt:s,HAt:n}}ir(t){this.WAt(t,this.Hat.Ywt)}constructor(t,e){super(t,e,e.Ywt),this.aSt=void 0,this.Hat=e,this.VAt(!0)}},aZ=class extends jH{get Jat(){return this.Gdt}get rlt(){return this.Dpt}get _bt(){return this.Dpt._bt}get Odt(){return this.kp.Odt}get jq(){var t;return this.kp.jq||(null==(t=this.Gdt[0])?void 0:t.Kk.jq)||""}get Lwt(){return this.Kk.Lwt}get Bwt(){return this.Kk.Bwt}ir(t){this.WAt(t,this.Dpt.Ywt);const e=t.Jat||[];if(this.Gdt.length!==e.length)throw new g("Expected "+this.Gdt.length+' representations in adaptation set "'+t.o+'", found '+e.length);for(let t=0;t<e.length;t++)this.Gdt[t].ir(e[t])}ZAt(t){for(const e of this.Gdt)e.ZAt(t);super.ZAt(t)}zAt(t){return{mbt:t,GAt:JH(this.Gdt),HAt:$H(this.Gdt)}}Xw(){for(const t of this.Gdt)t.Xw();super.Xw()}constructor(t,e){super(t,e,e.Ywt),this.Dpt=e,this.VAt(!1),this.Gdt=t.Jat.map((t=>new hZ(t,this)))}},uZ=class extends jH{get gft(){return this.qAt}get Ppt(){return this.YAt}get rlt(){return this}get _bt(){return this.uSt}get o(){return this.kp.o}get Sn(){return this.jV}get ct(){return this.MA}ir(t,e){this.WAt(t,this.uSt.Ywt),this.MA=e;const i=t.gft||[];if(this.qAt.length!==i.length)throw new g("Expected "+this.qAt.length+' adaptation sets in period "'+t.o+'", found '+i.length);for(let t=0;t<i.length;t++)this.qAt[t].ir(i[t])}ZAt(t){for(const e of this.qAt)e.ZAt(t);super.ZAt(t)}zAt(t){return{mbt:t,GAt:JH(this.qAt),HAt:$H(this.qAt)}}Xw(){for(const t of this.qAt)t.Xw();super.Xw()}constructor(t,e,i,s){super(e,void 0,t.Ywt),this.YAt=[],this.uSt=t,this.jV=i,this.MA=s,this.VAt(!1),this.qAt=(e.gft||[]).map((t=>new aZ(t,this))),this.YAt=sZ(this.qAt)}};r();var cZ=class{get cSt(){return this.lSt.wyt.cV}get dSt(){return this.lSt.wyt.uV}get fSt(){return this.lSt.wyt.pyt}get _St(){var t;return null==(t=this.lSt.QR)?void 0:t.cV}get vSt(){var t;return null==(t=this.lSt.QR)?void 0:t.cV}constructor(t){this.lSt=t}},lZ=new Date("2000-01-01"),dZ=class extends Co{get Kk(){return this.kp}get Tw(){return this.kp.Tw||Bs.pW}get byt(){return this.mSt||this.kp.byt||this.Iyt}get yyt(){return this.kp.yyt}get fbt(){var t,e;return null!=(e=null==(t=this.gSt)?void 0:t.ignoreAvailabilityWindow)&&e}get Eyt(){return this.pSt}get Ywt(){return this.OAt}get Ayt(){return this.wSt}get Gpt(){return this.ySt}get Iyt(){return this.kp.Iyt||this.Pn}get Iwt(){return this.kp.Iwt}get bSt(){return this.ASt}get SSt(){return this.Pn}get Dyt(){return this.lSt}Wyt(){var t;return null==(t=this.UAt)?void 0:t.GAt}$yt(){var t;return null==(t=this.UAt)?void 0:t.HAt}ir(t,e,i,s){var n;const r=void 0!==this.kp&&this.kp.Tw===Bs.wW;this.kp=t,this.ASt=null!=s?s:i,this.Pn=i;const o=[qb(e)];this.OAt=t.Ywt&&t.Ywt.length>0?gH(t.Ywt.map((t=>t.Xu)),o):o,this.wSt=t.Ayt&&t.Ayt.length>0?gH(t.Ayt,this.OAt):[];const h=this.wSt.map((t=>t.href)),a=e.href;ms(h,a)||(this.wSt.push(e),h.push(a));const u=this.TSt.href;ms(h,u)||(this.wSt.push(this.TSt),h.push(u)),this.pSt=null==(n=t.Eyt)?void 0:n.cwt(),t.Dyt&&(this.lSt=new cZ(t.Dyt));const c=t.Tw===Bs.wW,l=function(t,e,i){const s=[];for(let i=0;i<t.length;i++){const n=t[i];let r;if(n.Sn)r=n.Sn.cwt();else if(i>0&&t[i-1].ct){r=s[i-1]+t[i-1].ct.cwt()}else{if(0!==i||e)break;r=0}s.push(r)}const n=[];for(let e=0;e<s.length-1;e++)n.push({Kk:t[e],Sn:s[e],ct:s[e+1]-s[e]});if(s.length>0){const r=s.length-1,o=t[r],h=s[r];let a=1/0;e||(a=o.ct?o.ct.cwt():i-h),n.push({Kk:o,Sn:h,ct:a})}return n}(t.Gpt,c,this.pSt);this.kSt(l,r,c),this.ZAt(i)}kSt(t,e,i){const s=this.ySt;if(0===t.length)return void En(s);const n=t[0].Kk.o;let r=0;for(;r<s.length&&s[r].o!==n;)r++;const o=s.splice(0,r);for(const t of o)t.Xw();if(e&&!i&&s.length>0&&t.length>0){var h;const e=null!=(h=fZ(s[0].Kk))?h:H.DF;var a;const i=null!=(a=fZ(t[0].Kk))?a:H.DF;if(i.vF(e)){const n=i.kF(e);void 0!==this.pSt&&(this.pSt+=n._F());for(let e=0;e<t.length;e++){const i=t[e];if(e<s.length){const t=s[e];i.Sn=t.Sn,pZ(i.Kk,t.Kk)}e===t.length-1&&(i.ct+=n._F())}}}for(let e=0;e<t.length;e++){const i=t[e];if(e<s.length){const t=s[e];0,t.ir(i.Kk,i.ct)}else s.push(new uZ(this,i.Kk,i.Sn,i.ct))}}ZAt(t){for(const e of this.ySt)e.ZAt(t);const e=this.UAt,i=this.zAt(t);e&&tZ(e,i)||(this.UAt=i,this._o(new KH))}zAt(t){return{mbt:t,GAt:QH(this.ySt),HAt:$H(this.ySt)}}vbt(){if(0===this.ySt.length)return;const t=this.ySt[this.ySt.length-1];if(isFinite(t.ct))return;if(0===t.gft.length)return;const e=t.gft[0];if(0===e.Jat.length)return;const i=e.Jat[0].Zot,s=i.vbt();return s?{Zut:s,yyt:i.mdt(s)}:void 0}Xw(){this.Ro();for(const t of this.ySt)t.Xw()}constructor(t,e,i,s,n){if(super(),this.UAt=void 0,this.pSt=void 0,this.mSt=void 0,this.ySt=[],this.TSt=e,this.gSt=n,this.ir(t,i,s),t.Tw===Bs.wW){const t=this.vbt();t&&t.yyt&&t.yyt.getTime()<lZ.getTime()&&(this.mSt=new Date(this.Iyt.getTime()-1e3*(t.Zut.WO+t.Zut.ct)),this.ZAt(s))}}};function fZ(t){let e=mZ(t);var i,s;for(const s of null!=(i=t.gft)?i:[])e=Jk(e,_Z(s));for(const i of null!=(s=t.gyt)?s:[])e=Jk(e,gZ(i));return e}function _Z(t){let e=mZ(t);for(const i of t.Jat)e=Jk(e,vZ(i));return e}function vZ(t){return mZ(t)}function mZ(t){let e;if(void 0!==t.Jwt&&(e=Jk(e,gZ(t.Jwt))),void 0!==t.Kwt&&(e=Jk(e,gZ(t.Kwt))),void 0!==t.Qwt)for(const i of t.Qwt)e=Jk(e,gZ(i));return e}function gZ(t){var e,i;return H.IF(null!=(e=t.xwt)?e:vo.ZERO,null!=(i=t.mN)?i:1)}function pZ(t,e){if(bZ(t,e),t.Sn=e.Sn,void 0!==t.gft&&void 0!==e.gft&&t.gft.length===e.gft.length)for(let i=0;i<t.gft.length;i++)wZ(t.gft[i],e.gft[i]);if(void 0!==t.gyt&&void 0!==e.gyt&&t.gyt.length===e.gyt.length)for(let i=0;i<t.gyt.length;i++)AZ(t.gyt[i],e.gyt[i])}function wZ(t,e){if(bZ(t,e),void 0!==t.Jat&&void 0!==e.Jat&&t.Jat.length===e.Jat.length)for(let i=0;i<t.Jat.length;i++)yZ(t.Jat[i],e.Jat[i])}function yZ(t,e){bZ(t,e)}function bZ(t,e){if(void 0!==t.Jwt&&void 0!==e.Jwt&&AZ(t.Jwt,e.Jwt),void 0!==t.Kwt&&void 0!==e.Kwt&&AZ(t.Kwt,e.Kwt),void 0!==t.Qwt&&void 0!==e.Qwt&&t.Qwt.length===e.Qwt.length)for(let i=0;i<t.Qwt.length;i++)AZ(t.Qwt[i],e.Qwt[i])}function AZ(t,e){t.mN=e.mN,t.xwt=e.xwt}r();var SZ=class{async xj(t){await this.ESt(t,this.fW,this.xSt,this.RSt).catch(yu)}_dt(){return new Date(Ba()+this.ISt)}async ESt(t,e,i,s){let n;if(s&&(n=await this.CSt(e,s,i)),void 0===n){J(i);for(const s of t)if(n=await this.PSt(e,s,i),void 0!==n)break}this.ISt=void 0===n?0:n-Ba()}async PSt(t,e,i){switch(e.c9){case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2012":case"urn:mpeg:dash:utc:http-iso:2014":{const s=e.Mx;if(s)return await this.CSt(t,s,i);break}case"urn:mpeg:dash:utc:direct:2012":case"urn:mpeg:dash:utc:direct:2014":{const t=e.Mx;if(t){const e=new Date(t).getTime();if(!S(e))return e}break}default:return}}async CSt(t,e,i){try{const s=await t.Qk({Xu:e,AE:xe.GET,jk:Rr.Tk,Uw:i}),n=await s.Ck(),r=new Date(n).getTime();if(!S(r))return r}catch(t){th(t)}}constructor(t,e,i){this.fW=t,this.xSt=e,this.RSt=i,this.ISt=0}},TZ=class extends Co{get yyt(){return this.Hyt&&this.Hyt.yyt}get byt(){return this.Hyt&&this.Hyt.byt}get fbt(){return this.Hyt&&this.Hyt.fbt}get o(){return this.Hyt&&this.Hyt.Kk.o}get bSt(){var t;return null==(t=this.Hyt)?void 0:t.bSt}get DSt(){var t;return null==(t=this.Hyt)?void 0:t.SSt}get Ayt(){return this.Hyt?this.Hyt.Ayt.map((t=>t.href)):[this.NSt]}get NSt(){return this.MSt.href}get Tyt(){return this.Hyt&&this.Hyt.Kk.Tyt}get kyt(){return this.Hyt&&this.Hyt.Kk.kyt}get Eyt(){return this.Hyt&&this.Hyt.Kk.Eyt}get xyt(){return this.Hyt&&this.Hyt.Kk.xyt}get Ryt(){var t,e;const i=(null==(e=this.Hyt)||null==(t=e.Kk.Ryt)?void 0:t.lwt())||0;return _.max(i,EZ)}get qR(){return this.LSt}BSt(t){const e=this.qR;this.LSt=t,e!==this.qR&&this._o(new oZ)}get Gpt(){return this.ySt}get OSt(){return this.Tw===Bs.wW?this.ibt:this.FSt}get VSt(){const t=this.OSt;if(void 0!==t)for(const e of this.Gpt)if(e.Sn<=t&&e.Tn>t)return e}get Vwt(){return this.Hyt&&this.Hyt.Kk.Vwt}get Iyt(){return this.Hyt&&this.Hyt.Iyt}get $At(){for(let t=this.ySt.length-1;t>=0;t-=1){const e=this.ySt[t].$At;if(e)return e}}get ibt(){const t=this.$At;if(void 0===t)return;const e=t-this.WSt;return _.max(e,this.FSt)}get FSt(){for(const t of this.ySt){const e=t.Vyt;if(void 0!==e)return e}}get xE(){return Boolean(this.USt.xE)}get WSt(){var t,e;if(this.USt.GSt&&this.Tw===Bs.wW)return this.USt.GSt;const i=null==(e=this.Hyt)||null==(t=e.Kk.Cyt)?void 0:t.cwt();return void 0!==i?i:this.Tw===Bs.wW?1.5*this.xyt.cwt():0}get Iwt(){return this.Hyt&&this.Hyt.Iwt}get Tw(){return this.Hyt?this.Hyt.Tw:void 0}get Dyt(){var t;return null==(t=this.Hyt)?void 0:t.Dyt}async ir(t,e,i){const s=[],n=[],r=t.Syt?Ms.Ih(t.Syt,this.MSt):this.MSt;void 0===this.Hyt?(await this.HSt.xj(t.Pyt),this.Hyt=new dZ(t,this.MSt,r,this._dt(),this.gSt),this.Hyt.bn(Ne.fat,this.Ds)):this.Hyt.ir(t,r,this._dt(),e);const o=this.Hyt.Gpt;let h;if(0===o.length)h=this.ySt.slice(),En(this.ySt);else{const t=o[0].o;let e=0;for(;e<this.ySt.length&&this.ySt[e].o!==t;)e++;h=this.ySt.splice(0,e);for(let t=0;t<o.length;t++){const e=o[t];let r;t<this.ySt.length?r=this.ySt[t]:(r=new nZ(this,e),s.push(r)),n.push(r.ir(this.ZSt,i))}}await Promise.all(n),this.ySt.push(...s);for(const t of h)t.iSt();this._o(new lt)}_dt(){return this.HSt._dt()}JAt(t){const e=this.ySt.indexOf(t);if(e>0)return this.ySt[e-1]}QAt(t){const e=this.ySt.indexOf(t);if(e>=0&&e+1<this.ySt.length)return this.ySt[e+1]}Wyt(){return this.Hyt?this.Hyt.Wyt():void 0}$yt(){return this.Hyt&&this.Hyt.$yt()}ZAt(t){this.Hyt&&this.Hyt.ZAt(t)}yn(){this.Ro(),this.XSt=void 0,this.BSt(!1);for(const t of this.ySt)t.yn();En(this.ySt),this.Hyt&&this.Hyt.Xw()}constructor(t,e,i,s,n){super(),this.Hyt=void 0,this.LSt=!0,this.ySt=[],this.XSt=void 0,this.USt=t,this.MSt=t.VC,this.ZSt=e,this.fW=i,this.zSt=s,this.HSt=new SZ(this.fW,this.zSt,this.USt.qSt),this.gSt=n}},kZ=class{get vdt(){return this.jAt}constructor(t,e,i,s,n){this.jAt=new TZ(t,e,i,s,n)}},EZ=1e3,xZ=class{get Er(){return this.Hyt}get W(){return this.YSt||(this.YSt=this.QE(this.KSt.Uw),ah(this.YSt)),this.YSt}async QE(t){this.Hyt.vdt._o(new ao);try{await this.jSt(t),this.Hyt.vdt.BSt(!0)}catch(t){throw th(t),this.YSt=void 0,this.Hyt.vdt.BSt(!1),new g("The provided MPEG-DASH document could not be loaded - "+t.message)}this.QSt=this.JSt(this.KSt.Uw)}async JSt(t){try{for(;this.Hyt.vdt.Tw===Bs.wW;)await ou(this.$St,t)}catch(t){}}get $St(){return this.Hyt.vdt.DSt&&this.Hyt.vdt.Tw===Bs.wW?this.tTt(this.KSt.Uw):this.W}async eTt(t){J(t);const e=this.iTt();if(e>0){const i=_.min(e,2147483647);await ke(i,t)}try{await this.jSt(t),this.Hyt.vdt.BSt(!0)}catch(t){throw new g("The provided MPEG-DASH manifest could not be loaded - "+t.message)}finally{this.sTt=void 0}}iTt(){const t=this.Hyt.vdt._dt().getTime()-this.Hyt.vdt.bSt.getTime();return this.Hyt.vdt.Ryt-t}nTt(t){const e=this.Hyt.vdt.$yt();if(e){const i=e.getTime()-t.getTime();if(i>0)return i}this.Hyt.vdt.ZAt(t);const i=this.Hyt.vdt.$yt();return i?i.getTime()-t.getTime():NaN}async tTt(t){const e={stack:[],error:void 0,hasError:!1};try{null!=this.sTt||(this.sTt=this.eTt(t));const i=gs(e,da.$w([t]),!1),s=[this.sTt,this.rTt(i.Uw)].filter(Bo);await Promise.race(s).catch(yu)}catch(t){e.error=t,e.hasError=!0}finally{co(e)}}rTt(t){const e=this.Hyt.vdt._dt(),i=this.nTt(e);if(!S(i)&&!this.Er.vdt.fbt)return this.oTt(i,t)}async oTt(t,e){await ke(t,e);const i=this.Hyt.vdt._dt();this.Hyt.vdt.ZAt(i)}async hTt(t,e){const i=await this.uTt.aTt(t,{},e);return(new uH).Nyt(i.cTt,i.eE)}yn(){return this.KSt.jw(),this.QSt=void 0,this.YSt=void 0,this.sTt=void 0,this.Hyt.vdt.yn(),Promise.resolve()}constructor(t,e,i,s,n){this.KSt=new da,this.jSt=async t=>{try{const e=this.Hyt.vdt._dt(),i=await this.hTt(this.Hyt.vdt.Ayt,t);await this.Hyt.vdt.ir(i,e,t)}catch(t){throw hA(t)&&this.Hyt.vdt.BSt(!1),t}},this.uTt=s,this.Hyt=new kZ(t,e,i,this.KSt.Uw,n)}};r(),r();var RZ=class extends pe{constructor(t,e){super("jpt"),this.hwt=t,this.jdt=e}},IZ=class extends Co{get jdt(){return this.Qdt}get Tw(){return this.Sp}get Z(){return this.dC.slice()}hW(t){t&&this.Qdt!==t&&this.lTt(t)}aW(t){this.Qdt===t&&this.lTt(void 0)}lTt(t){this.Qdt=t,this._o(new RZ(this,this.Qdt))}yn(){this.Ro();for(const t of this.dC)t.Odt=void 0;En(this.dC)}constructor(t,e){super(),this.Qdt=void 0,this.Sp=t,this.dC=e;for(const t of this.dC)t.Odt=this}};r(),r(),r();var CZ=class extends pe{constructor(t,e,i){super(Ti.Py),this.currentTime=t,this.initDataType=e,this.initData=i}};function PZ(t,e,i,s,n){let r=[],o=[];for(const t of e)t.Tw===ee.vE?r=r.concat(t.Z):t.Tw===ee.mE&&(o=o.concat(t.Z));return[DZ(t,r,i,s,null==n?void 0:n.preferredAudioCodecs),NZ(t,o,i,s,null==n?void 0:n.preferredVideoCodecs)].filter(Bo)}function DZ(t,e,i,s,n){const r=Fo(s||[],(t=>t.Cat===ee.vE&&t.Rt)),o=[LZ(r,i,t),BZ(r),OZ(r),FZ(r,n),VZ(),t=>{const e=t.filter((t=>"main"===t.Lt));return e.length>0?e:t}];return MZ(e,o)}function NZ(t,e,i,s,n){const r=Fo(s||[],(t=>t.Cat===ee.mE&&t.Rt)),o=[LZ(r,i,t),FZ(r,n),VZ(),t=>{const e=t.filter((t=>"main"===t.Lt));return e.length>0?e:t}];return MZ(e,o)}function MZ(t,e){if(0===t.length)return;let i=t;for(const t of e){if(1===i.length)return i[0];i=t(i)}return i[0]}function LZ(t,e,i){return s=>{const n=t?t.Act.o:void 0;if(!Bo(n))return s;const r=null==e?void 0:e.myt,o=i.myt,h=r&&o&&r.Mx===o.Mx,a=Fo(s,(t=>t.Act.o===n));return h&&a?[a]:s}}function BZ(t){return e=>{const i=t?t.gs:"",s=e.some((t=>""!==t.gs))?e.filter((t=>""!==t.gs)):e;if(""===i)return s;const n=s.filter((t=>t.gs===i));return n.length>0?n:s}}function OZ(t){return e=>{const i=t?t.Lt:"";if(""===i)return e;const s=e.filter((t=>t.Lt===i));return s.length>0?s:e}}function FZ(t,e){return t=>{if(e&&e.length>0)for(const i of e){const e=t.filter((t=>t.NC.lC.some((t=>_u(t.Jrt,i)))));if(e.length>0)return e}return t}}function VZ(){return t=>{let e=[],i=-1/0;for(const s of t){const t=s.Act.UH;t>i?(i=t,e=[s]):t===i&&e.push(s)}return e}}r(),r();var WZ=function(t){return t.dTt="api",t.fTt="start",t}({});r();var UZ={maxRetries:3,minimumBackoff:1e3,maximumBackoff:1/0},GZ=class{_Tt(t,e,i){const s=this.edt.maxRetries===1/0?UZ:this.edt;return Ci((()=>this.vTt(t,e,i)),i,s.maxRetries,s.minimumBackoff,s.maximumBackoff)}async vTt(t,e,i){let s;for(const n of t)try{const t=new wt({Xu:n,jk:Rr.Tk,Jk:e,xE:this.mTt,AE:xe.GET,Tw:Mr.sE,kE:xu.iE,Uw:i,SE:15e3,TE:5e3}),s=await this.fW.Qk(t),r=await s.Ck(i);return{cTt:r,gTt:n,eE:s.eE}}catch(t){s=t}throw s}constructor(t,e,i=UZ){this.fW=t,this.mTt=e,this.edt=i}};r();var HZ=class{async aTt(t,e,i){let s;for(const n of this.pTt)try{return await n.aTt(t,e,i)}catch(t){th(t),s=t}throw s}constructor(t){this.pTt=t}},ZZ=class{async aTt(t,e,i){const s=await this.zut.drt(t);if(s)return{cTt:s.data,gTt:s.locationURL,eE:s.responseURL};throw new g("Manifest fetch from cache unsuccesful")}constructor(t){this.zut=t}},XZ=class{async aTt(t,e,i){return await this.wTt._Tt(t,e,i)}constructor(t){this.wTt=t}};function zZ(t,e){return new HZ([new ZZ(e),new XZ(t)])}var qZ=class{async aTt(t,e,i){const s=await this.uTt.aTt(t,e,i);return await this.yTt(s),s}async yTt(t){await this.d_.brt({key:JF(t.gTt),locationURL:Ki(t.gTt),responseURL:Ki(t.eE),data:t.cTt,references:[this.bTt.o]})}constructor(t,e,i){this.uTt=t,this.d_=e,this.bTt=i}};r();var YZ=class extends pe{constructor(){super(Ti.Xy)}};r();var un=class extends pe{constructor(){super(Ti.Zy)}};r(),r();var KZ=class extends kx{ATt(t){return t.rI=Zu.LOADED,this.tt(t),t}STt(t){for(const e of this.Z.lC)if(e.BC===t)return e}constructor(){super()}};function jZ(t,e){return""===e?t:t+" "+e}r(),r(),r();var QZ=class extends Le{get wa(){return this.eu||(this.eu=function(t){return Jr(Ut(t),{get attributes(){return t.Xx},get eventID(){var e;return""+(null!=(e=t.TTt)?e:"")}})}(this)),this.eu}nF(t){return this.U===t.U}constructor(t,e,i,s,n){super(t,e,i,!1,null==n?void 0:n.toString()),this.Xx=s,this.TTt=n}},JZ=class extends KZ{kTt(t){const e=this.lW.OI(Li.eW,"","","",void 0,Lr.EVENT_STREAM);return e.BC=t,this.ATt(e),e}ETt(t,e,i){const s=t.c9;var n;const r=null!=(n=t.Mx)?n:"";var o;const h=null!=(o=t.mN)?o:1;var a;const u=null!=(a=t.xwt)?a:vo.ZERO,c=jZ(s,r);let l=this.STt(c);l||(l=this.kTt(c));for(const s of t.Qq)if(!$Z(s,l)){const t=tX(s,h,u,e);t.UO>i&&l._W(t)}}async $n(t){await this.nr(),this.uSt=t,this.uSt.bn(Ti.Gy,this.xTt),this.xTt()}async nr(){this.uSt&&(this.uSt.vn(Ti.Gy,this.xTt),this.uSt=void 0);for(const t of this.Z.lC)this.lW.mW(t);await super.nr()}constructor(t){super(),this.uSt=void 0,this.xTt=()=>{var t,e;const i=null!=(e=null==(t=this.uSt.Wyt())?void 0:t.Sn)?e:0;if(i>0)for(const t of this.Z.lC)Vi(t,i);for(const t of this.uSt.Gpt)if(t.Tn>i)for(const e of t.gyt)this.ETt(e,t,i)},this.lW=t}};function $Z(t,e){const i=t.o;if(void 0!==i){if(Fo(e.L.lC,(e=>e.TTt===i&&e.U===t.Kk)))return!0}return!1}function tX(t,e,i,s){const n=t.o,r=t.gL.toSigned().subtract(i),o=t.ct,h=t.Kk,a=t.Xx,u=r.toNumber()/e+s.Sn,c=o?o.toNumber()/e:void 0,l=void 0!==c?u+c:s.eSt;return new QZ(u,l,h,a,n)}function eX(t,e,i,s,n){const r=[],o=Fo(i,(t=>t.c9===em));if(void 0===o)return;const h=o.Mx?function(t){const e=t.split(":",1)[0];switch(e){case"cbcs":case"cenc":return e;default:return}}(o.Mx.toLowerCase()):"cenc";if(void 0!==h){for(const t of i)if(t.c9!==em)for(const e of Am(t.c9)){const i=n&&t.l9?[t.l9]:[];r.push({cT:e,IG:i,CG:void 0,WU:void 0})}if(r.length)return{hU:t,lpt:{RTt:h,aU:o.aU},cpt:r,ITt:e===ee.vE?s.slice():[],CTt:e===ee.mE?s.slice():[],_9:!1}}}function iX(t,e){if(!t)return e;if(!e)return t;const i=[],s=Oh();var n;return sX(i,s,t.cpt),sX(i,s,e.cpt),{hU:t.hU,lpt:{RTt:t.lpt.RTt,aU:null!=(n=t.lpt.aU)?n:e.lpt.aU},cpt:i,ITt:nX(t.ITt,e.ITt,ms),CTt:nX(t.CTt,e.CTt,ms),_9:t._9||e._9||!1}}function sX(t,e,i){for(const s of i){const i=s.cT.Iw;let n;e.has(i)?(n=e.get(i),n.IG=nX(n.IG,s.IG,rX)):(n=ol({},s),t.push(n),e.set(i,n))}}function nX(t,e,i){const s=t.slice();for(const t of e)i(s,t)||s.push(t);return s}function rX(t,e){for(const i of t)if(Ph(i,e))return!0;return!1}function oX(t,e,i){let s;const n=t.TG;if(n){const r=t.jq,o=[];for(const e of t.Jrt)o.push(r+'; codecs="'+e+'"');s=eX(e||{},t.Tw,n,o,i)}for(const n of t.Jat)s=iX(s,hX(n,e,i));return s}function hX(t,e,i){return eX(e||{},t.Tw,t.TG||[],[t.Mk],i)}function aX(t){return t?t.cpt.map((e=>{const i=uX(t.hU,e.cT),s=t.lpt.RTt;return{cT:e.cT,IG:e.IG,WU:e.WU,RH:[{initDataTypes:[e.cT.xw],audioCapabilities:cX(t.ITt,s,null==i?void 0:i.audioRobustness),videoCapabilities:cX(t.CTt,s,null==i?void 0:i.videoRobustness),persistentState:null==i?void 0:i.persistentState,distinctiveIdentifier:null==i?void 0:i.distinctiveIdentifier}]}})):[]}function uX(t,e){switch(e.Tw){case ue.ww:return t.widevine;case ue.pw:return t.playready;case ue.Aw:return t.fairplay;case ue.yw:return t.clearkey}}function cX(t,e,i){if(0!==t.length)return t.map((t=>({contentType:t,encryptionScheme:e,robustness:i})))}function lX(t,e){const i=t=>{const i=e.indexOf(t.cT.Iw);return i>=0?i:e.length};return Ii(t,((t,e)=>i(t)-i(e)))}r(),r();var dX=class extends KZ{kTt(t){const e=this.lW.OI(Li.eW,t.o,"thumbnails","",!1,Lr.DEFAULT);return e.CE=bh.Qn,this.ATt(e),e}async $n(t){await this.nr(),this.uSt=t,this.uSt.bn(Ti.Gy,this.ir),this.ir()}PTt(t){this.DTt(t),this.NTt()}NTt(){const t=[];for(const e of this.Z.lC)this.MTt(e)||t.push(e);for(const e of t)this.it(e)}DTt(t){const e=[];for(const i of this.Gdt)-1===t.indexOf(i)&&e.push(i);for(const t of e)we(this.Gdt,t)}async nr(){this.uSt&&(this.uSt.vn(Ti.Gy,this.ir),this.uSt=void 0);for(const t of this.Gdt)t.vn(Ne.fat,this.LTt);this.Gdt.length=0;for(const t of this.Z.lC)this.lW.mW(t);await super.nr()}yn(){return this.LTt=void 0,super.yn()}BTt(){var t,e;const i=null!=(e=null==(t=this.uSt.Wyt())?void 0:t.Sn)?e:0;if(i>0)for(const t of this.Z.lC)Vi(t,i)}OTt(t){return this.Z.lC.some((e=>e.o===t.o))}FTt(t){return Fo(this.Z.lC,(e=>e.o===t.o))}MTt(t){return this.Gdt.some((e=>t.o===e.o))}constructor(t){super(),this.Gdt=[],this.ir=()=>{const t=[];for(const e of this.uSt.Gpt)for(const i of e.gft)if(i.Tw===ee.gE&&i.Jat.length>0){const e=i.Jat[0];t.push(e),this.OTt(e)||this.kTt(e),-1===this.Gdt.indexOf(e)&&(this.Gdt.push(e),e.bn(Ne.fat,this.LTt)),this.VTt(e)}this.PTt(t)},this.VTt=t=>{const e=this.FTt(t);e&&t&&e.CE!==bh.Mh&&(this.BTt(),function(t,e){const i=t.Zot,s=t.Jyt();if(!s)return;const n=s.gbt,r=s.pbt,o=t.ji,h=t.Ti,[a,u]=function(t){for(const e of t)if(lh(e.c9,_X)||lh(e.c9,vX)){const t=e.Mx.match(fX);if(t){const[,e,i]=t;return[Number(e),Number(i)]}}return[1,1]}(t.Lwt);let c=n;for(;c&&c.Qut<=r.Qut;){const s=t.Yyt.ct||c.ct,n=mX(e,c,t.Alt(c).Xu,o,h,a,u,s);for(const t of n)e._W(t);c=i.wlt(c)}}(t,e))},this.lW=t;const e=this;this.LTt=function(){e.VTt(this)}}},fX=/^(\d+)x(\d+)$/,_X="http://dashif.org/guidelines/thumbnail_tile",vX="http://dashif.org/thumbnail_tile";function mX(t,e,i,s,n,r,o,h){const a=[],u=e.WO,c=r*o,l=s/r,d=n/o,f=_.round(l),v=_.round(d),m=h/c;if(1===c){const e=u+m;return gX(t,u,e,i)?a:[new Le(u,e,i,!1)]}for(let s=0;s<o;s++)for(let n=0;n<r;n++){const o=u+(s*r+n)*m,h=o+m,c=i+"#xywh="+_.round(n*l)+","+_.round(s*d)+","+f+","+v;if(gX(t,o,h,c)||a.push(new Le(o,h,c,!1)),h>=e.UO)return a}return a}function gX(t,e,i,s){return t.L.lC.some((t=>t.WO===e&&t.UO===i&&t.U===s))}r(),r(),r(),r();var pX=class extends Le{get mL(){return this.WTt}get Mx(){return this.UTt}get GTt(){return this.HTt}get wa(){return this.eu||(this.eu=function(t){return Jr(Ut(t),{get schemeIDURI(){return t.mL},get value(){return t.Mx},get emsgID(){return t.GTt}})}(this)),this.eu}nF(t){return _e(this.U,t.U)}constructor(t,e,i,s,n,r){super(t,e,r,!1),this.WTt=i,this.UTt=s,this.HTt=n}},wX=class t extends KZ{Sdt(e,i,s){const n=nr.JD(ra(e));if(!n)return;const r=function(t,e){const i=[];for(const s of t)VS(s,e)&&i.push(s);return i}(n,_t.vD);if(r.length){const e=t.ZTt(n,i,s);this.XTt(r,e,s)}}XTt(t,e,i){for(const s of t){let t;t=1===s.jD?s.gL.toNumber()/s.mN+i:e+s.yL/s.mN;const n=t+s.pL/s.mN;"https://aomedia.org/emsg/ID3"===s.mL||"https://developer.apple.com/streaming/emsg-id3"===s.mL?this.zTt(s,t):this.qTt(s,t,n)}}qTt(t,e,i){const s=jZ(t.mL,t.Mx);let n=this.STt(s);n||(n=this.YTt(s),this.ATt(n)),n._W(new pX(e,i,t.mL,t.Mx,t.o,t.wL))}zTt(t,e){const i=TL(ra(t.wL));if(!i)return;const s=jZ(t.mL,t.Mx);let n=this.STt(s);n||(n=this.KTt(s),this.ATt(n));for(const t of i.N5){const i=new ML(e,t);QM(i,n.L.lC),n._W(i)}}static ZTt(t,e,i){const s=dn(t,_t.mD);return s?io(s.DL,s.mN)+i:e}YTt(t){const e=this.lW.OI(Li.eW,"","","",void 0,Lr.EMSG);return e.BC=t,e.CE=bh.LC,e}KTt(t){const e=this.lW.OI(Li.eW,"","","",void 0,Lr.ID3);return e.BC=t,e.CE=bh.LC,e}async nr(){for(const t of this.Z.lC)this.lW.mW(t);await super.nr()}constructor(t){super(),this.lW=t}},yX=class extends wX{async $n(t){await this.nr(),this.uSt=t,this.uSt.bn(Ti.Gy,this.xTt),this.xTt()}async nr(){this.uSt&&(this.uSt.vn(Ti.Gy,this.xTt),this.uSt=void 0),await super.nr()}constructor(...t){super(...t),this.xTt=()=>{var t,e;const i=null!=(e=null==(t=this.uSt.Wyt())?void 0:t.Sn)?e:0;this.nW(i)}}};r(),r();var bX=class{vrt(t,e){return this.jTt?this.zut.vrt(t,e):Promise.resolve(!1)}grt(t,e){return this.jTt?this.zut.grt(t,e):Promise.resolve(void 0)}async drt(t){const e=await this.zut.drt(t);return this.jTt=void 0!==e,e}IQ(t){return this.zut.IQ(t)}constructor(t){this.jTt=!1,this.zut=t}};r();var AX=class extends bT{jB(){var t;return null!=(t=this.YB)?t:0}ZC(){this.na.ER=1/0}QB(){return!0}constructor(t,e,i){super(t,e,i)}},SX=[Ti.qy,Ti.Ky,Ti.$y,Ti.Hy,Ti.eb],TX=[Ti.Yy,Ti.ub,Ti.Ly,Ti.Ny],kX=class t extends Co{QTt(t){return!!this.JG&&this.JG.dJ(t)}async wp(t){this.JG=await this.WB.$n(t),this.JTt(),this.$Tt(),this.JG.d4(this.ct)}tkt(t){return this.JG._J(t)}ekt(t){return this.JG.mJ(t)}async ikt(){this.skt=this.nkt,this.JG&&(await this.WB.nr(),this.JG=void 0)}a3(){this.JG.a3()}J2(){const t=this.ct;this.JG.ct<t&&this.JG.d4(t),this.JG.J2()}async rkt(t){const e=this.JG,i=[];e.h4&&i.push(sM(e.h4,t)),e.a4&&i.push(sM(e.a4,t)),await Promise.all(i)}okt(t,e,i,s,n,r){const o=this.WB,h=this.JG;return new RG(o,h,t,e,i,s,n,r,this.hkt,o,this.spt,this.edt,this.wpt,this.hH)}akt(t,e,i){return t._J(e,i,this.JG)}async ukt(t,e,i,s){const n=this.okt(this.fW,this.gZ,this.zut,this.Sc,t,s);return n.bn(Ne.vat,this.ckt),n.bn(Ti.Hy,this.Ds),await n.xj(e,i),n}lkt(t){void 0===t&&(t=!1),this.dkt.jw(),this.r8.jw(),this.fkt.jw(),this.fkt=new da,this._kt=js(this.vkt(this.mkt,this.o8,this._kt,t,this.fkt.Uw),this.fkt).catch(this.ewt)}async vkt(t,e,i,s,n){await Promise.all([t,e,i]),J(n),await ou(this.gkt.Ub,n);const r=this.pkt;await r.Xat(),this.J2(),J(n);const o=r.Cc,h=r.twt,a=r.$pt;let u=this.wkt(o,a,o,h,!1),c=this.ykt(a,u);!s&&this.QTt(c)?await this.bkt(a,u,c):(u=this.wkt(o,a,o,h,!0),c=this.ykt(a,u),await this.Akt(a,u,c,n)),J(n),this.uI?this.Rb(this.ER):this.Skt(),this.Tkt()}async bkt(t,e,i){const s=this.pkt;await this.tkt(i),this.kkt=i,await this.akt(s,t,e),await s.qat(Yu.kht)}async Akt(t,e,i,s){const n=this.pkt;this.d8(),this.Ekt();const r=this.xkt;await this.ikt(),await this.wp(i),this.kkt=i,await this.akt(n,t,e);try{const t=this.Rkt(r,!1,!0,s);ah(t),await n.qat(Yu.kht),await t}finally{this.g8(),this.Ikt()}}get ht(){return this.cO}get XG(){const t=this.xkt,e=this.Ckt,i=e.sB(t);if(-1!==i)return{Sn:e.Sn(i),Tn:e.Tn(i)}}get Ckt(){var t,e,i;const s=null!=(i=null==(t=this.pkt)?void 0:t.wR)?i:se.pB();var n;const r=null!=(n=null==(e=this.Pkt)?void 0:e.wR)?n:se.pB();return s.tB(r)}get wR(){return this.Ckt.ks()}get bR(){var t;const e=null==(t=this.Hyt)?void 0:t.vdt,i=null==e?void 0:e.byt;if(!e||!i)return;const s=i.getTime(),n=1e3*this.ER;return new Date(n+s)}set bR(t){var e;const i=null==(e=this.Hyt)?void 0:e.vdt,s=null==i?void 0:i.byt;if(!t||!i||!s)return;const n=s.getTime()/1e3,r=t.getTime()/1e3;this.Rb(r-n)}get bt(){return this.Sc}get xkt(){return void 0!==this.P9?this.P9:void 0!==this.Dkt?this.Dkt:this.WB.ER}get ER(){return this.xkt}set ER(t){this.RR(t)}RR(t,e){this.Rb(t,t===1/0)}get ct(){let t=NaN;return this.pkt&&this.pkt.Upt?t=this.pkt.Tn:this.Hyt&&void 0!==this.Hyt.vdt.Tw&&(t=this.Hyt.vdt.Eyt?this.Hyt.vdt.Eyt.cwt():1/0),t}get Tn(){return this.ct}get PR(){return this.uI?this.D9():!(!this.pkt||!this.pkt.Upt)&&this.WB.PR}D9(){return!!this.uI&&(!(!this.pkt||!this.pkt.Upt)&&this.xkt===this.pkt.Tn)}get lt(){return this.YG}get MR(){return this.KG}get OR(){}Nkt(){var t;const e=this.Mkt;if(0===e.V)return!0;var i;const s=null!=(i=null==(t=this.XG)?void 0:t.Tn)?i:this.xkt,n=e.Sn(0);return s>=n||_s(s,n,.001)}Lkt(){var t;if(!this.Hyt)return!1;if(this.Hyt.vdt.Tw!==Bs.wW)return!1;const e=null==(t=this.pkt)?void 0:t.Cc;if(e&&e.mat)return!0;const i=[];for(const t of this.Hyt.vdt.Gpt){const e=t.Vyt,s=t.eSt;void 0!==e&&void 0!==s&&i.push(e,s)}const s=new se(i).$L();return function(t,e,i){if(!e.V||!i.V)return se.pB();const s=e.Sn(0),n=e.Tn(e.V-1),r=t.jn(i).jL().jn(t).tB(e);return se.gB(r.Sn(0),r.Tn(r.V-1)).eB(r).uB(((t,e)=>t<s&&e<=n&&e-t>Si))}(this.Ckt,this.Mkt,s).V>0}get GR(){return ol({},this.nkt,{gO:gu.Vg.cG(),pO:this.Bkt,wO:{amountOfBufferedAudioSegments:this.Okt,amountOfBufferedVideoSegments:this.Fkt}})}get nkt(){return function(t,e){return{_O:t._O+e._O,vO:t.vO+e.vO,mO:t.mO+e.mO}}(this.skt,this.WB.HR())}get ZR(){return this.WB.ZR}set ZR(t){this.WB.ZR=t}get KR(){return this.M9?this.Vkt:this.pkt&&this.pkt.Upt?this.Wkt:this.Vkt}get QR(){return this.WB.QR}set QR(t){this.WB.QR=t}get tI(){let t=this.Uo;return this.pkt&&(t=t.tB(this.Ukt)),t.$L(.1).ks()}get Ukt(){return this.WB.tI}Gkt(t){this.Uo=this.Uo.tB(t)}get iI(){return this.QG}set iI(t){this.QG=t,this.Hkt()}get rI(){let t=this.WB.rI;return this.Zkt&&(t=_.max(Ht.Xn,t)),t}get Mkt(){return this.Xkt(!1)}get zkt(){return this.Xkt(!0)}get hI(){return this.Mkt.ks()}get uI(){return this.cZ||this.qkt}get qkt(){return this.WB.uI}get M4(){return this.WB.M4}get $G(){}get Ykt(){var t,e;return null!=(e=null==(t=this.Hyt)?void 0:t.vdt.Tw)?e:Bs.pW}get nt(){return this.Hl}get rt(){return this.dO}get dI(){var t;return this.Kkt||(null==(t=this.jkt())?void 0:t.Ti)||0}get vI(){var t;return this.Qkt||(null==(t=this.jkt())?void 0:t.ji)||0}get gI(){return this.WB.gI}set gI(t){this.WB.gI=Ns(t,0,1)}get yI(){return this.tH}get AI(){return!1}set AI(t){}get eH(){return this.iH}Jkt(t){t.bn(SX,this.Ds),t.bn(Ti.sb,this.$kt),t.bn(Ti.Ay,this.tEt),t.bn(yo.fa,this.eEt),t.bn(Ti.Ty,this.iEt),t.bn(Ti.Ky,this.sEt),t.bn("jpt",this.nEt),t.bn("Rpt",this.nEt)}rEt(t){t.vn(SX,this.Ds),t.vn(Ti.sb,this.$kt),t.vn(Ti.Ay,this.tEt),t.vn(yo.fa,this.eEt),t.vn(Ti.Ty,this.iEt),t.vn(Ti.Ky,this.sEt),t.vn("jpt",this.nEt),t.vn("Rpt",this.nEt)}oEt(t){t.bn(Ti.qy,this.Ds)}hEt(t){t.vn(Ti.qy,this.Ds)}jkt(){if(!this.pkt)return;const t=Fo(this.pkt.$pt,(t=>t.Cat===ee.mE));return t?t.RC:void 0}Xkt(t){var e;const i=null==(e=this.Hyt)?void 0:e.vdt;if(!i)return se.pB();const s=i.FSt;let n=t?i.$At:i.ibt;if(void 0===s||void 0===n)return se.pB();if(!t){const t=this.Ukt;t.V>0&&t.Tn(t.V-1)>n&&(n=_.min(t.Tn(t.V-1),i.$At))}const r=this.ct;return isFinite(r)&&r>n&&(n=r),se.gB(s,n).YL()}async $n(t,e){let i,s;J(e);const n=this.Hyt.vdt;try{i=n.VSt,s=n.OSt}catch(t){throw new g("Something went wrong determining the start of the provided MPEG-DASH stream")}if(!i)throw new g("Something went wrong determining the initial Period of the provided MPEG-DASH stream");if(void 0===s)throw new g("Something went wrong determining the start time of the provided MPEG-DASH stream");t.textTracks&&this.aEt(t.textTracks),this.d8();const r=this.fft(i),o=PZ(i,r,void 0,void 0,this.Lpt),h=this.wkt(i,o,i,o,!0);o.forEach((t=>t.Rt=!0));const a=this.ykt(o,h);await this.wp(a),this.kkt=a,J(e);const u=await this.ukt(i,r,o,h);J(e),this.uEt(u),this.g8(),J(e),await u.qat(),J(e),!this.cEt&&s>0&&this.Rb(s,!0,WZ.fTt),this.cZ||(this.Skt(),this.lEt())}Skt(){this.dkt.jw(),this.dkt=new da,this.mkt=js(this.dEt(this.mkt,this._kt,this.dkt.Uw),this.dkt).catch(this.ewt)}fEt(){this.dkt.jw()}async dEt(t,e,i){for(await Promise.all([t,e]),J(i);;){var s;const t=null==(s=this.pkt)?void 0:s.Cc;if(!t){0;break}if(!await this._Et(t,i)){0;break}}}async _Et(t,e){var i;J(e);const s=this.pkt;for(0;this.Hyt.vdt.Tw===Bs.wW&&void 0===(null==(i=this.QAt(t))?void 0:i.Vyt);)await ou(this.vEt.$St,e),await this.mEt();for(J(e),await this.mEt(),J(e);!s.Bpt();)await s.py(tU.Tft,e),await this.mEt();J(e),await this.mEt(),J(e);const n=this.QAt(t);return n?(this.gEt(n)?await this.pEt(n,e):await this.wEt(n,e),!0):(this.a3(),!1)}gEt(t){var e,i,s,n,r;const o=null!=(r=null==(e=this.Sc)?void 0:e.seamlessSwitchStrategy)?r:Ks.JB;if(o===Ks.$B)return!0;if(o===Ks.tO)return!1;const h=this.pkt,a=null==h?void 0:h.Cc,u=null==h?void 0:h.$pt,c=PZ(t,this.fft(t),a,u,this.Lpt),l=this.wkt(t,c,a,u,!1);if(o===Ks.CLEAR_ONLY&&((null==(i=this.pkt)?void 0:i.upt)||l)||o===Ks.SAME_DRM_ONLY&&!((null==(s=this.pkt)?void 0:s.upt)&&l||!(null==(n=this.pkt)?void 0:n.upt)&&!l))return!1;const d=this.ykt(c,l);return this.QTt(d)}yEt(){return!0}bEt(t){const e=this.AEt();for(const i of e)i!==t&&(i.CE=bh.Mh)}Tkt(){if(void 0!==this.SEt){if(this.SEt.FC){const t=Fo(this.ht.lC,(t=>t.Rt));void 0!==t&&this.SEt.gs===t.gs||(this.SEt.CE=bh.Mh)}}else this.TEt()}TEt(){if(this.AEt().length)return;const t=Fo(this.ht.lC,(t=>t.Rt));if(void 0===t)return;const e=this.nt.lC.filter((t=>t.FC));for(const i of e)if(i.gs===t.gs)return i.CE=bh.Qn,void(this.SEt=i)}AEt(){return this.nt.lC.filter((t=>t.CE===bh.Qn&&(t.Lt===Li.$V||t.Lt===Li.JV)))}kEt(t){if(t&&this.SEt){const e=function(t,e){if(""===t.gs)return;return e.filter((e=>e.gs===t.gs))[0]}(this.SEt,t.nt.lC);e&&(e.CE=bh.Qn)}}async pEt(t,e){var i,s;const n=this.pkt;let r=this.Pkt;const o=this.kkt;try{J(e);const i=n.Cc,s=n.$pt,o=this.fft(t),h=PZ(t,o,i,s,this.Lpt),a=this.wkt(t,h,i,s,!1);h.forEach((t=>t.Rt=!0));const u=this.ykt(h,a);for(0,await n.Xat(),this.J2(),J(e),r&&r.Cc===t?(this.QTt(u)&&await this.tkt(u),this.kkt=u):(r&&await r.yn(!0),this.QTt(u)&&await this.tkt(u),this.kkt=u,r=await this.ukt(t,o,h,a),this.Pkt=r,this.oEt(r),this.EEt.vC=r.nt,r.Yat(n)),await r.qat(),J(e);this.xkt<t.Sn;)await this.WB.py(Ti.hb,e);J(e),this.uEt(r)}catch(t){throw Je(t)&&(r&&await r.Xat(),o&&this.kkt!==o&&(this.QTt(o)&&await this.tkt(o),this.kkt=o)),t}(null==(s=this.Sc)||null==(i=s.dash)?void 0:i.forceSeekToSynchronize)&&await this.xEt(t,e)}async xEt(t,e){const i=Date.now()/1e3;if(void 0===this.REt)this.REt=i;else if(i-this.REt>900){this.REt=i,this.Ekt();const s=_.max(this.xkt,t.Sn);try{await this.Rkt(s,!1,!0,e)}finally{this.Ikt()}}}async wEt(t,e){for(J(e),await this.pkt.Xat(),this.J2(),await this.rkt(t.Sn),J(e),this.a3();!this.WB.PR&&this.xkt<t.Sn;)await this.WB.py([Ti.hb,Ti.Dy],e);J(e);const i=this.pkt.Cc,s=this.pkt.$pt,n=this.fft(t),r=PZ(t,n,i,s,this.Lpt),o=this.wkt(t,r,i,s,!0);r.forEach((t=>t.Rt=!0));const h=this.ykt(r,o);this.pkt&&(this.IEt.vn(No.da,this.CEt),await this.pkt.yn(),this.IEt.bn(No.da,this.CEt),this.pkt=void 0),this.Pkt&&(await this.Pkt.yn(),this.Pkt=void 0),this.Ekt(),this.d8();const a=_.max(this.xkt,t.Sn);await this.ikt(),await this.wp(h),this.kkt=h;const u=await this.ukt(t,n,r,o);this.uEt(u);try{const t={stack:[],error:void 0,hasError:!1};try{const i=this.Rkt(a,!1,!0,e);ah(i),await u.qat();const s=gs(t,da.$w([e]),!1);await Promise.race([i,u.py([tU.Tft],s.Uw)])}catch(e){t.error=e,t.hasError=!0}finally{co(t)}}finally{this.g8(),this.Ikt()}}async mEt(){const t=this.Pkt;t&&t.Cc.mat&&(await t.yn(!0),this.Pkt=void 0)}static PEt(t,e){const i=[],s=[];let n=!e.some((t=>t.vft.some((t=>"main"===t.Mx))));for(const t of e){if(-1!==i.indexOf(t))continue;const r=xX(t.Rdt.concat(t.vft),n);n=!1;const o=t.Jat.map((t=>t.pat)),h=new YW(t,o,r),a=RX(t,e);for(const t of a)h.Hdt(t),i.push(t);s.push(h)}return new IZ(t,s)}fft(e){const i=[],s=[];for(const t of e.Ppt)dT(t.Tw)&&(0===t.Jat.length?this._o(new $W("No supported representation found in the AdaptationSet with mimetype : "+t.Tw)):t.Tw===ee.vE?i.push(...t.gft):s.push(...t.gft));const n=[];return i.length>0&&n.push(t.PEt(ee.vE,i)),s.length>0&&n.push(t.PEt(ee.mE,s)),n}ykt(t,e){var i,s,n,r,o,h,a,u;const c=t.map((t=>{var e;return wW.Blt(null!=(e=t.Udt)?e:t.Jat,gT(t.Cat,this.Lpt))})).map((t=>({Mk:t.Mk}))),l=null==(s=this.Sc)||null==(i=s.dash)?void 0:i.desiredTimescale;var d;const f=(null==(n=this.Sc)?void 0:n.seamlessSwitchStrategy)!==Ks.tO&&(null==(r=this.Sc)?void 0:r.seamlessSwitchStrategy)!==Ks.CLEAR_ONLY&&(null==(o=this.Sc)?void 0:o.seamlessSwitchStrategy)!==Ks.SAME_DRM_ONLY&&(null!=(d=null==(a=this.Sc)||null==(h=a.dash)?void 0:h.needsTimescaleShifting)?d:Ms.Ys.ap),_=null==(u=this.Sc)?void 0:u.useManagedMediaSource;return{Tw:In.wW,g4:c,sH:aX(e),_9:null==e?void 0:e._9,ap:f,r3:l,C4:_}}static DEt(t,e){if(!t.length)return;let i;for(const s of t){const t=0===s.zdt.length;i=iX(i,oX(s.Act,e,t))}return(null==e?void 0:e.preferredKeySystems)&&i&&(i.cpt=lX(i.cpt,e.preferredKeySystems)),i}wkt(e,i,s,n,r){var o,h;const a=this.Sc.contentProtection;let u=t.DEt(i,a);if(void 0!==u)return u;var c;const l=null!=(c=null==(o=this.Sc)?void 0:o.seamlessSwitchStrategy)?c:Ks.JB;if(l===Ks.tO||l===Ks.CLEAR_ONLY||l===Ks.SAME_DRM_ONLY)return;const d=null==(h=this.pkt)?void 0:h.upt;if(!r&&void 0!==d){const t=!d._9;if(l===Ks.JB&&t&&!this.yEt())return;return d}const f=!r&&l===Ks.JB;return u=this.NEt(e,a,s,n,f),void 0!==u?(u._9=!0,u):void 0}NEt(e,i,s,n,r){let o=e,h=!1;for(;;){if(o=h?this.JAt(o):this.QAt(o),void 0===o){if(h)return;h=!0,o=e;continue}const a=PZ(o,this.fft(o),s,n,this.Lpt),u=t.DEt(a,i);if(r){const t=this.ykt(a,u);if(!this.QTt(t))return}if(void 0!==u)return u}}aEt(t){for(const e of t)e.src&&this.dH.cW(e);Ji(this.dH.Z)}EI(){var t;const e=this.KR;this.Vkt=!0,e||(this.M9||(this.MEt(new Bu),this.LEt()),(null==(t=this.ZG)?void 0:t.wB)&&this.ZG.RI(),this.BEt())}xI(){this.OEt||(this.OEt=new os),this.FEt();const t=this.OEt.Ub;return ah(t),t}FEt(){if(this.Vkt=!1,this.X9=!0,this.VEt=!1,this.Hkt(),this.PR){const t=this.Mkt;t.V>0&&this.Rb(t.Sn(0))}this.M9||this.q9().then(this.WEt,this.MEt),this.ckt(),this.BEt()}get Wkt(){return this.WB.KR}q9(){return this.WB.xI()}LEt(){this.WB.EI()}d8(){this.M9||(this.Vkt=this.KR,this.M9=!0,this.LEt())}g8(){this.M9&&(this.M9=!1,this.Vkt||this.q9().then(this.WEt,this.MEt),this.ckt(),this.BEt())}BEt(){const t=this.MW,e=this.KR;t!==e&&(this.MW=e,e?this._o(new ul(this.ER)):this._o(new $(this.ER)))}Rb(t,e,i){return void 0===e&&(e=!1),void 0===i&&(i=WZ.dTt),this.cEt=!0,this.dkt.jw(),this.r8.jw(),this.cZ=!0,this.P9=t,this.VEt=this.VEt&&this.D9(),this.Gkt(this.Ukt),this.UEt(new R(this.ER)),this.r8=new da,this.o8=js(this.h8(t,this.mkt,this.o8,this._kt,this.r8.Uw,e,i),this.r8).catch(this.ewt),this.o8}GEt(){this.r8.jw()}async h8(t,e,i,s,n,r,o,h){var a;void 0===r&&(r=!1),void 0===o&&(o=WZ.dTt),void 0===h&&(h=!1),null==(a=this.ZG)||a.RI();try{var u,c;0,await Promise.all([e,i,s]),J(n),await ou(this.gkt.Ub,n);const a=this.Mkt.KL(t);this.P9=a;const l=h||(null==(c=this.Sc)||null==(u=c.dash)?void 0:u.forceHardSwitchWhenSeekingBackwards)&&a<=this.ER,d=this.HEt(a),f=this.pkt;if(l||!f||!f.hI.wr(a)&&o!==WZ.fTt&&f.Cc!==d){if(d){let t=this.Pkt;if(this.d8(),f&&await f.Xat(),t&&t.Cc===d&&!l){const e=this.ykt(t.twt,t.upt);this.J2(),this.QTt(e)&&await this.tkt(e),this.kkt=e}else{t&&await t.yn(!0);const e=this.fft(d),i=null==f?void 0:f.Cc,s=null==f?void 0:f.$pt,n=PZ(d,e,i,s,this.Lpt);let r=this.wkt(d,n,i,s,!1);n.forEach((t=>t.Rt=!0));let o=this.ykt(n,r);this.gEt(d)&&!l?(this.J2(),this.QTt(o)&&await this.tkt(o)):(r=this.wkt(d,n,i,s,!0),o=this.ykt(n,r),f&&(this.IEt.vn(No.da,this.CEt),await f.yn(),this.IEt.bn(No.da,this.CEt),this.pkt=void 0),await this.ikt(),await this.wp(o)),this.kkt=o,t=await this.ukt(d,e,n,r),this.Pkt=t,this.EEt.vC=t.nt,this.oEt(t),t.Yat(this.pkt)}await t.qat(Yu.xht),this.uEt(t)}}else{0;const t=this.Pkt;if(t&&!t.Hpt){await t.Xat(),this.J2();const e=this.ykt(f.twt,f.upt);this.QTt(e)&&await this.tkt(e),this.kkt=e}}0;const _=this.Rkt(a,r,!1,n);ah(_),this.P9=void 0,await this.pkt.qat(Yu.xht),J(n),this.Skt(),await _,J(n),this.g8(),this.cZ=!1,this.ZEt(new oa(this.ER)),this.lEt()}catch(t){if(Je(t))return void 0;0}}lEt(){if(this.KR||this.uI||void 0===this.KB)return;const t=this.ER;var e,i;this.ER+this.KB-this.yI.kd.maximumOffset<t?null==(e=this.ZG)||e.Sn():null==(i=this.ZG)||i.RI()}async Rkt(t,e,i,s){let n,r,o=!0,h=t;for(;;){const a={stack:[],error:void 0,hasError:!1};try{const u=this.zkt;if(u.V>0){const e=u.KL(t);h!==e&&(u.wr(h)&&this.Hyt.vdt.Tw===Bs.wW||(h=e,o=!0))}if(o)o=!1,null==r||r.jw(),r=new da,r.Qw(s),n=js(this.XEt(h,e,i,r.Uw),r),ah(n);else if(!this.qkt&&!this.M4)break;const c=gs(a,da.$w([s]),!1);await Promise.race([n,this.py([Ti.$y,Ti.Iy],c.Uw),this.Hyt.vdt.py(Ne.fat,c.Uw)])}catch(t){a.error=t,a.hasError=!0}finally{co(a)}}}async XEt(t,e,i,s){for(this.WB.Rb(t,e,i);this.qkt||this.M4;)await this.WB.py([Ti.Qy,Ti.Vy],s)}Ekt(){void 0===this.Dkt&&(this.Dkt=this.xkt,this.WB.vn(Ti.Jy,this.UEt),this.WB.vn(Ti.Qy,this.ZEt))}Ikt(){if(void 0===this.Dkt)return;const t=this.xkt;this.Dkt=void 0,this.WB.bn(Ti.Jy,this.UEt),this.WB.bn(Ti.Qy,this.ZEt),this.xkt!==t&&this.Tc()}zEt(t){this.Uo=this.Uo.tB(t)}HEt(t){const e=this.Hyt.vdt,i=e.Gpt.filter((t=>t.ct>=.2));if(0===i.length)return;const s=i[0];if(t<=s.Sn)return s;for(const e of i)if(e.Tn>t)return e;return e.Tw!==Bs.wW?i[i.length-1]:void 0}JAt(t){let e=t.rwt;for(;e&&e.ct<.2;)e=e.rwt;return e}QAt(t){let e=t.owt;for(;e&&e.ct<.2;)e=e.owt;return e}async Ca(t,e,i){const s={stack:[],error:void 0,hasError:!1};try{var n;if(this.hH.kG(t.contentProtection),this.qEt(),this.Sc&&!Fn(this.Sc)&&await this.nr(),!t||Fn(t))return;const o=gs(s,da.$w([i]),!1);this.vW=da.$w([o.Uw]),this.Sc=t,this.YEt=e,this.Lpt=t.abr,this.wpt=t.ignoreEmbeddedTextTrackTypes;const h=zZ(new GZ(this.fW,Boolean(this.Sc.useCredentials),this.edt),this.zut);var r;if(this.BSt(!0),this.vEt=new xZ({VC:Ms.Ih(this.Sc.src),GSt:null!=(r=null==(n=this.Sc.latencyConfiguration)?void 0:n.targetOffset)?r:this.Sc.liveOffset,qSt:this.Sc.timeServer,xE:this.Sc.useCredentials},this.KEt(this.Lpt),this.fW,h,this.Sc.dash),this.Hyt=this.vEt.Er,this.Hyt.vdt.bn(Ti.Uy,this.jEt),this.Hyt.vdt.bn(Ti.Gy,this.QEt),this.Hyt.vdt.bn(rZ.oSt,this.JEt),this.Hyt.vdt.bn(Ne.fat,this.ckt),await this.$Et.$n(this.Hyt.vdt),await this.txt.$n(this.Hyt.vdt),ms(this.wpt,Lr.EMSG)||(this.spt=new yX(this.lW),this.Hl.MG(this.spt.Z),await this.spt.$n(this.Hyt.vdt)),t.latencyConfiguration){const e=t.latencyConfiguration;this.ZG=new AX(this,this.WB,e),this.ZG.Rt=!0,this.tH.Aa(this.ZG)}this.Hkt(),o.Xw()}catch(t){s.error=t,s.hasError=!0}finally{co(s)}}async ixt(){const t=this.Hyt.vdt.qR;var e,i;(this.BSt(t),t)?this.nEt():(await Promise.all([null==(e=this.pkt)?void 0:e.Xat(Yu.Ght),null==(i=this.Pkt)?void 0:i.Xat(Yu.Ght)].filter(Bo)),this.fEt(),this.GEt(),this.fkt.jw())}get qR(){return this.LSt}BSt(t){this.LSt!==t&&(this.LSt=t,this._o(t?new YZ:new un))}Hkt(){this.Hyt&&(this.sxt=this.nxt(this.sxt,this.vW.Uw).catch(this.ewt))}async nxt(t,e){t&&(await t,J(e));try{this.iI===el.JB||this.X9?await this.rxt(e):this.iI===el.eW&&await this.oxt(e)}catch(t){throw th(t),this.BH(new A(Qa.MANIFEST_LOAD_ERROR,t.message,t)),t}}async rxt(t){await this.oxt(t),this.hxt||(this.hxt=!0,this.gkt.Qw(this.$n(this.YEt,t)));try{await this.gkt.Ub}catch(t){th(t),this.BH(new A(Qa.MEDIA_DECODE_ERROR,t.message,t))}}async oxt(t){await ou(this.vEt.W,t);const e=this.Hyt.vdt;if(void 0===this.ZG&&e.Tw===Bs.wW){const t=e.Dyt,i=(null==t?void 0:t.fSt)?(null==t?void 0:t.fSt)/1e3:e.WSt,s={minimumOffset:(null==t?void 0:t.cSt)?(null==t?void 0:t.cSt)/1e3:.5*i,maximumOffset:(null==t?void 0:t.dSt)?(null==t?void 0:t.dSt)/1e3:1.5*i,targetOffset:i,forceSeekOffset:2.5*i,minimumPlaybackRate:At,maximumPlaybackRate:mt};this.ZG=new AX(this,this.WB,s),this.tH.Aa(this.ZG)}}uEt(e){const i=this.pkt;e!==i&&(this.pkt&&this.rEt(this.pkt),this.Pkt&&this.hEt(this.Pkt),i&&this.Gkt(this.Ukt),this.pkt=e,this.Pkt=i,this.Jkt(this.pkt),this.Pkt&&this.oEt(this.Pkt),this.cO.vC=e.ht,this.dO.vC=e.rt,this.kEt(e),this.IEt.vn(No.da,this.CEt),t.axt(this.IEt),this.IEt.bn(No.da,this.CEt),this.IEt.vC=e.nt,this.EEt.vC=void 0,this.TEt())}static axt(t){for(const e of t.lC)e.CE=bh.Mh}ge(){this.WB.ge()}be(){this.WB.be()}BH(t){this.YG||(ah(this.nr()),this.YG=gn(t),this.KG=t,this._o(new Na(t)))}qEt(){this.YG=void 0,this.KG=void 0}JTt(){const t=this.JG;t&&(t.a4&&(t.a4.bj=this.gZ.Dj),t.h4&&(t.h4.bj=this.gZ.Dj))}$Tt(){const t=this.JG;t&&(t.a4&&(t.a4.Ej=this.gZ.Ej),t.h4&&(t.h4.Ej=this.gZ.Ej))}determineStallJumpTarget(){if(this.pkt)return this.pkt.Bpt()&&this.ER>this.pkt.Tn-$N&&!this.pkt.Upt?this.pkt.Tn:void 0}async nr(){if(this.uxt)return this.uxt;try{this.uxt=this.cxt(),await this.uxt}finally{this.uxt=void 0}}async cxt(){this.QR=1,this.vW.jw(),this.GEt(),this.fEt(),this.fkt.jw(),this.gkt.jw(),this.cEt=!1,this.EI(),this.X9=!1,this.VEt=!1,this.cO.vC=void 0,this.dO.vC=void 0,this.IEt.vC=void 0,this.EEt.vC=void 0,this.sxt&&(await this.sxt.catch(Tt),this.sxt=void 0),await Promise.all([this.mkt,this.o8,this._kt,this.gkt.Ub.catch(Tt)]),this.pkt&&(await this.pkt.yn(!0),this.pkt=void 0),this.Pkt&&(this.hEt(this.Pkt),await this.Pkt.yn(!0),this.Pkt=void 0),await this.ikt(),this.kkt=void 0,this.SEt=void 0,this.mH.nr(),await this.$Et.nr(),await this.txt.nr(),void 0!==this.spt&&(this.Hl.FG(this.spt.Z),await this.spt.yn(),this.spt=void 0),this.lW.nr(),this.Hyt&&(this.Hyt.vdt.vn(Ti.Uy,this.jEt),this.Hyt.vdt.vn(Ti.Gy,this.QEt),this.Hyt.vdt.vn(rZ.oSt,this.JEt),await this.vEt.yn(),this.Hyt=void 0),this.Zkt=!1,this.lxt=NaN,this.dxt=0,this.fxt=0,this.Dkt=void 0,this.M9=!1,this.Uo=se.pB(),this.MW=!0,this.P9=void 0,this._xt=!1,this.cZ=!1,this.hxt=!1,this.gkt=new os,this.Bkt=0,this.Okt=0,this.Fkt=0,this.Sc=void 0,this.YEt=void 0,this.wpt=[],this.REt=void 0,this.tH.nr(),this.ZG=void 0,this.skt={_O:0,vO:0,mO:0},await this.dH.nr(),this.WB.vH(),this.vxt.nr()}async yn(){this.Ro(),this.qEt(),await this.nr(),this.Ro(),this.cO.yn(),this.dO.yn(),this.IEt.yn(),this.EEt.yn(),this.Hl.yn(),this.mH.yn(),this.mxt.Xw(),await this.$Et.yn(),await this.txt.yn(),this.lW.yn(),this.vxt.yn(),this.WB.vn(Ti.Iy,this.o7),this.WB.vn(kh.Py,this.y9),this.WB.vn(Ti.Dy,this.gxt),this.WB.vn(Ti.Jy,this.UEt),this.WB.vn(Ti.Qy,this.ZEt),this.WB.vn(Ti.jy,this.sEt),this.WB.vn(Ti.hb,this.Tc),this.WB.vn([Ti.ho,Ti.zy],this.pxt),this.WB.vn(TX,this.Ds),await this.dH.yn(),this.Hl.yn(),this.gZ.vn("yj",this.wxt),this.gZ.vn("Tj",this.yxt),this.WB.vn(yo.fa,this.bxt),this.WB.vn([Ti.Ey,Ti.Ty],this.Ds),this.WB.vn(Ti.vb,this.awt),this.WB.wH=void 0,this.hH.vn("contentProtectionsTracked",this.Axt),this.WB.T7=void 0}SI(){return this.WB.Sa}ja(){return this.WB.fH}get WR(){return!1}II(){return!1}CI(){}DI(){}NI(){}MI(){this.lkt(!0)}get KB(){var t;const e=null==(t=this.Hyt)?void 0:t.vdt;if(e&&e.Tw===Bs.wW&&e.byt)return e._dt().getTime()/1e3-e.byt.getTime()/1e3-this.ER}OI(t){const e=this.WB._H(t);return this.vxt.tt(e),e}constructor(t,e,i,s,n,r,o){super(),this.pkt=void 0,this.Pkt=void 0,this.X9=!1,this.lxt=NaN,this.YG=void 0,this.KG=void 0,this.M9=!1,this.Dkt=void 0,this.P9=void 0,this._xt=!1,this.dxt=0,this.fxt=0,this.Zkt=!1,this.vW=new da,this.gkt=new os,this.hxt=!1,this.Hyt=void 0,this.vEt=void 0,this.LSt=!0,this.Vkt=!0,this.OEt=void 0,this.Uo=se.pB(),this.QG=el.$H,this.sxt=void 0,this.MW=!0,this.Sc=void 0,this.YEt=void 0,this.Lpt=void 0,this.wpt=[],this.cZ=!1,this.dkt=new da,this.mkt=Promise.resolve(),this.r8=new da,this.o8=Promise.resolve(),this.cEt=!1,this.VEt=!1,this.fkt=new da,this._kt=Promise.resolve(),this.kkt=void 0,this.spt=void 0,this.Bkt=0,this.Okt=0,this.Fkt=0,this.iH=new Yh,this.REt=void 0,this.skt={_O:0,vO:0,mO:0},this.JG=void 0,this.ZG=void 0,this.nEt=t=>{var e,i,s;let n;"jpt"===(null==t?void 0:t.type)&&(n=t.jdt),n&&(null==(e=n.Odt)?void 0:e.Tw)===ee.vE&&(null==(s=this.bt)||null==(i=s.dash)?void 0:i.forceRecreateMediaSourceOnAudioSwitch)?this.lkt(!0):this.lkt()},this.awt=t=>{var e;null==(e=this.pkt)||e.awt(t)},this.Tc=()=>{this._o(new Al(this.ER,this.bR))},this.y9=t=>{this._o(new CZ(this.ER,t.xw,t.Eb))},this.$kt=t=>{this.Bkt+=t.pO,this._o(t)},this.tEt=t=>{const e=t.segments.filter((t=>t.jct));t.track===ee.vE?this.Okt=e.length:t.track===ee.mE&&(this.Fkt=e.length)},this.o7=()=>{const t=this.ct;S(t)||t===this.lxt||(this.lxt=t,this._o(new $s(this.lxt)))},this.pxt=()=>{this.ckt(),this.BEt()},this.gxt=t=>{this.VEt||!this.PR||this.uI||(this.VEt=!0,this._o(null!=t?t:new Xs(this.ER)))},this.QEt=t=>{this.Ds(t),this.Zkt||(this.Zkt=!0,this.mxt.Sxt())},this.jEt=()=>{this.Hyt.vdt.vn(Ti.Uy,this.jEt),this._o(new ao)},this.iEt=t=>{var e;if(t.errorObject.code===Qa.CONTENT_PROTECTION_OUTPUT_RESTRICTED&&(null==(e=this.pkt)?void 0:e.twt.every((t=>!t.qdt))))return;this.BH(t.errorObject),this._o(t)},this.eEt=t=>{this.BH(t.errorObject)},this.ewt=t=>{Je(t)||this.BH(new A(Qa.MEDIA_DECODE_ERROR,t.message,t))},this.ckt=()=>{if(!this.KR)if(this.Nkt())if(this.Lkt()){const t=this.Hyt.vdt.OSt;this.Rb(t,!0)}else;else{const t=this.Hyt.vdt.OSt;this.Rb(t,!0)}},this.UEt=t=>{this._xt=this.uI,this._o(t)},this.ZEt=t=>{const e=this._xt,i=this.uI;this._xt=i,e&&!i&&this._o(t),this.gxt()},this.sEt=()=>{const t=this.vI,e=this.dI;this.dxt===t&&this.fxt===e||(this.dxt=t,this.fxt=e,this._o(new P))},this.CEt=t=>{const e=t.Ht;e.CE===bh.Qn?(this.bEt(e),this.SEt=e):e===this.SEt&&e.CE===bh.Mh&&(this.SEt=void 0,this.TEt())},this.WEt=()=>{this.M9||this.OEt&&(this.OEt.Vb(),this.OEt=void 0)},this.MEt=t=>{this.M9||this.OEt&&(this.OEt.Wb(t),this.OEt=void 0)},this.JEt=()=>{this.ixt().catch(this.ewt)},this.bxt=t=>{this.BH(ck(t.lt))},this.wxt=()=>{this.JTt()},this.yxt=()=>{this.$Tt()},this.Axt=t=>{this.ekt(t.TG)},this.fW=t,this.zut=new bX(n),this.WB=r,this.hkt=o,this.gZ=i,this.gZ.bn("yj",this.wxt),this.gZ.bn("Tj",this.yxt),this.tH=s,this.edt=e.retryConfiguration,this.cO=new qo,this.dO=new qo,this.hH=new Xh(t),this.hH.bn("contentProtectionsTracked",this.Axt),this.WB.bn(Ti.Iy,this.o7),this.WB.bn(kh.Py,this.y9),this.WB.bn(Ti.Dy,this.gxt),this.WB.bn(Ti.Jy,this.UEt),this.WB.bn(Ti.Qy,this.ZEt),this.WB.bn(Ti.jy,this.sEt),this.WB.bn(Ti.hb,this.Tc),this.WB.bn([Ti.ho,Ti.zy],this.pxt),this.WB.bn(TX,this.Ds),this.WB.bn(yo.fa,this.bxt),this.WB.wH=this.hH,this.WB.T7=this,this.WB.bn([Ti.Ey,Ti.Ty],this.Ds),this.WB.bn(Ti.vb,this.awt),this.mxt=new EX(this,this.WB),this.mH=new q(this.mxt,!0),this.mH.bn(Zc.WL,this.ckt),this.mH.bn(no,this.Ds),this.IEt=new at,this.IEt.bn(No.da,this.CEt),this.EEt=new at,this.lW=this.Txt(),this.$Et=new JZ(this.lW),this.txt=new dX(this.lW),this.dH=new xx(this.WB,this.fW),this.vxt=new Wo,this.Hl=new Iu([this.IEt,this.$Et.Z,this.txt.Z,this.dH.Z,this.vxt])}},EX=class extends Nx{get rI(){return this.na.rI}Sxt(){this._o(new hu(this.ER,this.rI))}constructor(t,e){super(e),this.na=t}};function xX(t,e){const i=t.filter((t=>"urn:mpeg:dash:role:2011"===t.c9)).map((t=>t.Mx)).filter(Bo);return e||ms(i,"main")?ms(i,"caption")?"captions":ms(i,"subtitle")?"subtitles":ms(i,"dub")?"translation":"main":ms(i,"sign")?"sign":ms(i,"description")?"descriptions":ms(i,"commentary")?"commentary":"alternative"}function RX(t,e){var i;const s=Fo([...t.Lwt,...t.Bwt],(t=>"urn:mpeg:dash:adaptation-set-switching:2016"===t.c9));var n;const r=null!=(n=null==s||null==(i=s.Mx)?void 0:i.split(","))?n:[],o=[];for(const t of r){const i=Number(t),s=Fo(e,(t=>t.o===i));s&&o.push(s)}return o}var vn=class extends kX{TI(){if(lV(this.WB))return this.WB.TI()}get Kkt(){return lV(this.WB)?this.WB.dI:0}get Qkt(){return lV(this.WB)?this.WB.vI:0}async yn(){var t;await super.yn(),null==(t=this.kxt)||t.yn()}gEt(t){var e,i;return((null!=(i=null==(e=this.Sc)?void 0:e.seamlessSwitchStrategy)?i:Ks.JB)!==Ks.JB||!Z.Sg)&&super.gEt(t)}yEt(){return!(Z.Cm&&Z.Dm<3)&&super.yEt()}Txt(){return new Ge(this,new Kh)}KEt(t){return dV(t)}constructor(t,e,i,s,n,r,o){super(t,e,i,s,n,r,new fV(o)),this.rot=o,Z.eg&&(this.kxt=new TV(this))}},IX=class extends vn{async yn(){await super.yn(),await this.bH.yH(this.WB)}constructor(t,e,i,s,n,r,o,h){const a=new ut(r);super(t,e,i,s,n,a.OH(o),h),this.bH=a}};r(),r(),r(),r(),r();var CX=class extends wV{get Ext(){return this.sx.Ext}yR(){return super.yR().xb(this.Ext)}Pot(){return super.Pot().xb(this.Ext)}g2(t,e,i){const s=this.Ext;return super.g2(t,{wit:e.wit-s,ct:e.ct,BV:e.BV-s},i)}F2(t,e){const i=this.Ext;return super.F2(_.max(0,t-i),_.max(0,e-i))}eT(t,e,i){const s=this.Ext;return super.eT(_.max(0,t-s),_.max(0,e-s),i)}A3(t,e){const i=this.Ext;super.A3(_.max(0,t-i),_.max(0,e-i))}S3(t,e){const i=this.Ext;super.S3(_.max(0,t-i),_.max(0,e-i))}constructor(t,e){super(e),this.sx=t}},PX=class extends gV{get Ext(){return this.sx.Ext}jd(){return super.jd()+this.Ext}d4(t){super.d4(t-this.Ext)}aI(){return super.aI().xb(this.Ext)}m4(t,e,i,s){const n=this.Ext;super.m4(t-n,e-n,i,s)}Tot(t){return new CX(this,t)}constructor(t,e){super(e),this.Aot(e),this.sx=t}},DX=class extends Ja{get oot(){return this.WB}get Ext(){return this.xxt}set Ext(t){this.xxt=t}yR(){return super.yR().xb(this.xxt)}AR(){return NX(super.AR(),this.xxt)}xR(){return super.xR()+this.xxt}jd(){return super.jd()+this.xxt}eI(){return super.eI().xb(this.xxt)}aI(){return super.aI().xb(this.xxt)}Rb(t,e,i){const s=_.max(0,t-this.xxt);super.Rb(s,e,i)}zG(t){super.zG(NX(t,-this.xxt))}lI(){return this.Hl}OI(t,e,i,s,n,r,o,h){return this.lW.OI(t,e,i,s,n,r,o,h)}_H(t){return this.lW._H(t)}mW(t){this.lW.mW(t)}vH(){this.lW.nr(),super.vH()}uH(){return!1}lH(t,e,i,s,n){throw new g("Not supported")}Xw(){return this.jet.yn(),this.Ket.yn(),this.lW.yn(),this.Hl.yn(),super.Xw()}pot(t){return new PX(this,t)}got(t){return new Bn(t)}LI(t){let e;switch(t.type){case Ti.ho:e=new $(t.currentTime+this.xxt);break;case Ti.zy:e=new ul(t.currentTime+this.xxt);break;case Zc.UL:e=new ko(t.currentTime+this.xxt);break;case Ti.hb:e=new Al(t.currentTime+this.xxt,NX(t.currentProgramDateTime,this.xxt));break;case Ti.qy:e=new K(t.currentTime+this.xxt);break;case Ti.Jy:e=new R(t.currentTime+this.xxt);break;case Ti.Qy:e=new oa(t.currentTime+this.xxt);break;case Ti.Oy:e=new uM(t.currentTime+this.xxt);break;case Ti.Vy:e=new KL(t.currentTime+this.xxt);break;case Ti.Dy:e=new Xs(t.currentTime+this.xxt);break;case Ti.Yy:e=new ju(t.currentTime+this.xxt,t.playbackRate);break;case Ti.ub:e=new ns(t.currentTime+this.xxt,t.volume);break;case Ti.Iy:e=new $s(t.duration+this.xxt);break;case Zc.iC:e=new hu(t.currentTime+this.xxt,t.readyState);break;default:e=t}super.LI(e)}be(){super.be(),this.Ket.be()}ge(){super.ge(),this.Ket.ge()}constructor(t){super(t),this.xxt=0,this.lW=new Ge(this,new Kh),this.Hl=new Iu([this.lW.nt,super.lI()]),this.Ket=new dB,this.Ket.S7(this.jG.parentElement),this.jet=new DO(this.Ket.we,this.Hu,this.Hl,this.Wl,this.Sa,this.fH)}};function NX(t,e){return t?new Date(t.getTime()+1e3*e):void 0}var MX=class extends _V{OH(t){if(t===ee.mE)return new DX(super.OH(t))}async yH(t){const e=t;await e.Xw(),await super.yH(e.oot)}},LX=class extends vn{async wp(t){await super.wp(t),void 0===this.Rxt&&(this.Rxt=this.Ixt(),this.WB.Ext=this.Rxt)}Ixt(){if(this.ct===1/0){const t=this.Mkt;if(t.V>0)return _.max(0,t.Sn(0)-300)}return 0}h8(t,e,i,s,n,r,o,h){return void 0===r&&(r=!1),void 0===o&&(o=WZ.dTt),void 0===h&&(h=!1),h||(h=this.ct===1/0&&Z.Cm&&Z.Dm<3&&t<=this.ER),super.h8(t,e,i,s,n,r,o,h)}async nr(){await super.nr(),this.Rxt=void 0,this.WB.Ext=0}async yn(){await super.yn(),await this.WB.Xw(),await this.bH.yH(this.WB)}static yT(t){var e;return(!t||"google-dai"!==(null==t||null==(e=t.ssai)?void 0:e.integration))&&(Z.Cm&&Z.Dm<4)}constructor(t,e,i,s,n,r,o,h){const a=new MX(new ut(r));super(t,e,i,s,n,a.OH(o),h),this.bH=a,this.Rxt=void 0}};r(),r(),r(),r(),r();var BX=class extends Oe{get oot(){return this.WB}get dI(){return this.WB.dI}get vI(){return this.WB.vI}constructor(t){super(t)}};r(),r(),r();var OX=class extends wV{Rot(){return this.Cxt?this.Mj:super.Rot()}Iot(t){this.Cxt?this.Mj=t:super.Iot(t)}yR(){return this.Cxt?this.Pxt:super.yR()}mT(){return this.Cxt?this.MT:super.mT()}Pot(){return this.Cxt?this.Dxt:super.Pot()}Dot(){return this.Cxt?this.Pj:super.Dot()}Not(t){this.Cxt?this.Pj=t:super.Not(t)}g2(t,e,i){return this.w2((i=>this.Nxt(t,e,i)),i)}Nxt(t,e,i){return super.g2(t,e,i)}T3(){return this.w2((()=>this.Mxt()))}Mxt(){return super.T3()}A2(t,e,i){return this.w2((i=>this.Lxt(t,e,i)),i)}Lxt(t,e,i){return super.A2(t,e,i)}RJ(){return this.Cxt?this.mit:super.RJ()}a3(){this.Cxt?this.Bxt=!0:super.a3()}A3(t,e){this.Cxt?(this.Dxt=this.Dxt.tB(new se([t,e])),this.Oxt.push({Tw:"Fct",WO:t,UO:e})):this.Fxt(t,e)}Fxt(t,e){super.A3(t,e)}F2(t,e){return this.w2((()=>this.Vxt(t,e)))}Vxt(t,e){return super.F2(t,e)}S3(t,e){this.Cxt?(this.Dxt=this.Dxt.iB(new se([t,e])),this.Oxt.push({Tw:"eT",WO:t,UO:e})):this.Wxt(t,e)}Wxt(t,e){super.S3(t,e)}eT(t,e,i){return this.w2((i=>this.Uxt(t,e,i)),i)}Uxt(t,e,i){return super.eT(t,e,i)}_J(t){return this.w2((()=>this.Gxt(t)))}Gxt(t){return super._J(t)}async w2(t,e){this.q2(),this.Cxt&&(await ou(this.Cxt.Ub,e),this.q2()),J(e);try{this.t3=t(e),await this.t3}finally{this.t3=void 0}}q2(){if(this.t3)throw new g("Internal error")}async Hxt(){if(this.Cxt)throw new b("Already locked");this.Cxt=new os,this.Zxt(),this.t3&&(await this.t3.catch(Tt),this.Zxt())}Xxt(){var t;null==(t=this.Cxt)||t.Vb(),this.Cxt=void 0,this.zxt()}Zxt(){this.MT=super.mT(),this.Mj=super.Rot(),this.Pj=super.Dot(),this.Pxt=super.yR(),this.Dxt=super.Pot(),this.mit=super.RJ(),this.Bxt=!1}zxt(){this.q2(),super.Iot(this.Mj),super.Not(this.Pj);const t=this.Oxt.slice();En(this.Oxt);for(const e of t)"Fct"===e.Tw?this.Fxt(e.WO,e.UO):this.Wxt(e.WO,e.UO);this.Bxt&&super.a3(),this.Pxt.aB(super.yR())||this._o(new pe(oe.tJ))}Xw(){var t;null==(t=this.Cxt)||t.jw(),this.Cxt=void 0,super.Xw()}constructor(t){super(t),this.t3=void 0,this.Cxt=void 0,this.Mj=0,this.Pxt=se.pB(),this.Dxt=se.pB(),this.Oxt=[],this.mit=!1,this.Bxt=!1,this.Pj=0,this.MT=t.kd}},FX=class extends OX{yR(){var t,e;return super.yR().tB(null!=(e=null==(t=this.qxt)?void 0:t.wR)?e:se.pB())}Pot(){var t,e;return super.Pot().tB(null!=(e=null==(t=this.qxt)?void 0:t.w3)?e:se.pB())}Iot(t){super.Iot(t),this.qxt&&(this.qxt.Ej=t)}Not(t){super.Not(t),this.qxt&&(this.qxt.bj=t)}Fxt(t,e){super.Fxt(t,e),this.qxt&&this.qxt.A3(t,e)}Wxt(t,e){super.Wxt(t,e),this.qxt&&this.qxt.S3(t,e)}async Uxt(t,e,i){J(i);const s=[];s.push(super.Uxt(t,e,i)),this.qxt&&s.push(this.qxt.eT(t,e,i)),await Promise.all(s)}dJ(t){return!!super.dJ(t)||this.sx.Yxt(t)}Gxt(t){return super.dJ(t)?super.Gxt(t):this.sx.Kxt(t)}jxt(t){var e,i;null==(e=this.qxt)||e.vn(Vo,this.Mot),this.qxt=t,null==(i=this.qxt)||i.bn(Vo,this.Mot)}constructor(t,e){super(e),this.qxt=void 0,this.sx=t}},VX=class extends gV{dJ(t){const e=void 0!==this.u4,i=void 0!==this.c4,s=t.g4.some((t=>Cl(t.Mk,"audio"))),n=t.g4.some((t=>Cl(t.Mk,"video")));return e===s&&i===n&&(!!super.dJ(t)||(!(!this.Qxt||!this.Qxt.dJ(t))||this.sx.Jxt(t)))}async _J(t){return super.dJ(t)?await super._J(t):this.Qxt&&this.Qxt.dJ(t)?(this.$xt(),await this._J(t)):(await this.sx.tRt(t),await this._J(t))}Yxt(t){return this.dJ(this.eRt(t))}Kxt(t){return this._J(this.eRt(t))}eRt(t){const e=this.kd,i=e.g4.map((e=>Cl(t.Mk,"audio")&&Cl(e.Mk,"audio")||Cl(t.Mk,"video")&&Cl(e.Mk,"video")?t:e));return ol({},e,{g4:i})}m4(t,e,i,s){super.m4(t,e,i,s),this.Qxt&&this.Qxt.m4(t,e,i,s)}iRt(){return!this.sRt&&this.nRt}jd(){return void 0!==this.rRt?this.rRt:this.iRt()?this.MA:super.jd()}d4(t){this.MA=t,this.rRt=void 0,this.iRt()||super.d4(t)}bot(){return!this.iRt()&&super.bot()}a3(){this.rRt=_.max(WX(this.JG.h4),WX(this.JG.a4)),this.iRt()||super.a3()}J2(){this.rRt=void 0,this.iRt()||super.J2()}Tot(t){return new FX(this,t)}oRt(){this.sRt=!this.sRt}$xt(){const t=this.JG,e=this.Qxt;e&&(this.sRt=!this.sRt,this.Aot(e),this.hRt(t),this.iRt()&&this.aRt())}hRt(t){var e,i;this.Qxt=t,null==(e=this.u4)||e.jxt(null==t?void 0:t.h4),null==(i=this.c4)||i.jxt(null==t?void 0:t.a4)}uRt(t){const e=this.JG,i=this.Qxt;if(!i)return;const s=this.sRt,n=s?e:i,r=(s?i:e).wR._B(t);if(!r)return;const o=IV(n.wR,this.Pot())._B(r.Tn(0),Si);return!o||r.Tn(0)+Si>=o.Tn(0)?void 0:_.max(r.Tn(0),o.Sn(0))}cRt(t,e){if(this.nRt)return Promise.resolve();const i=this.sRt?this.Qxt:this.JG;return i?(this.nRt=!0,this.lRt((e=>{if(J(e),this.nRt)return async function(t,e,i){J(i);const s=[];t.h4&&s.push(sM(t.h4,e,i));t.a4&&s.push(sM(t.a4,e,i));await Promise.all(s),t.a3()}(i,t,e)}),e)):Promise.resolve()}aRt(){if(!this.nRt)return;const t=this.sRt?this.Qxt:this.JG;if(!t)return;var e;this.nRt=!1;const i=null!=(e=this.rRt)?e:this.MA;t.ct<i&&t.d4(i),t.J2()}dRt(t){var e;const i=null!=(e=this.rRt)?e:this.MA;t.d4(i),this.sRt?this.Aot(t):this.hRt(t)}Pot(){var t,e,i;const s=null!=(i=null==(t=this.u4)?void 0:t.w3)?i:se.pB();var n;const r=null!=(n=null==(e=this.c4)?void 0:e.w3)?n:se.pB();return s.tB(r)}async lRt(t,e){const i=[];this.u4&&i.push(this.u4.Hxt()),this.c4&&i.push(this.c4.Hxt());try{await Promise.all(i),await t(e)}finally{this.u4&&this.u4.Xxt(),this.c4&&this.c4.Xxt()}}Eot(t){t.type===oe.tJ&&this.sx.n3(),super.Eot(t)}constructor(t,e){super(e),this.Qxt=void 0,this.MA=NaN,this.sRt=!1,this.nRt=!1,this.rRt=void 0,this.Aot(e),this.sx=t}};function WX(t){if(!t)return 0;const e=t.wR;return e.V>0?e.Tn(e.V-1):0}function Vu(t){return t.kd.Tw===In.wW}r();var UX=class extends BX{get fRt(){return this._Rt}yR(){return super.yR().tB(this._Rt.wR)}jd(){if(!this.vRt){const t=this.JG;if(t&&Vu(t))return t.ct}return super.jd()}aot(){return!!super.aot()&&!(!this.vRt&&!this.RJ())}uot(){return!!super.uot()&&!(!this.vRt&&super.aot()&&!this.RJ())}RJ(){const t=this.JG;return!(!t||!Vu(t))&&t.RJ}eI(){return this.Uo.tB(this.WB.tI)}aI(){return super.aI().tB(this._Rt.hI)}oI(){return super.oI()}hot(){var t;return null!=(t=super.hot())?t:this._Rt.$G}xI(){return this.dZ=!1,super.xI()}EI(){this.dZ=!0,super.EI()}p7(){this.vRt=!0,super.p7(),this._Rt.p7()}w7(){this.vRt=!1,super.w7(),this._Rt.p7()}xR(){var t;return null!=(t=this.P9)?t:super.xR()}cI(){return void 0!==this.P9||super.cI()}Rb(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=!1),this.mRt.jw(),this.r8.jw(),this.r8=new da,this.gRt=js(this.h8(t,e,i,this.gRt,this.r8.Uw),this.r8).catch(Tt)}async h8(t,e,i,s,n){this.P9=t,this.a8=t,this._o(new R(t)),s&&await s.catch(Tt),J(n),this.JG&&Vu(this.JG)&&this.JG.aRt(),this.P9=void 0,super.Rb(t,e,i),this._Rt.Rb(t,e,i),this.pRt()}zG(t){const e=this.$G;if(!e||S(e.getTime()))return;const i=(t.getTime()-e.getTime())/1e3;this.Rb(i)}A7(){super.A7(),this._Rt.A7()}get dI(){return this.wRt.dI}get vI(){return this.wRt.vI}be(){this.hZ&&(this.hZ=!1,this.wRt.be())}ge(){this.hZ||(this.hZ=!0,this.wRt.ge())}async yRt(){var t;this.P9=void 0,this.a8=NaN,this.Uo=se.pB(),null==(t=this.bRt)||t.jw(),this.mRt.jw(),this.r8.jw(),this.gRt&&(await this.gRt.catch(Tt),this.gRt=void 0)}_ot(t){super._ot(t),this._Rt.wH=t}vot(t){super.vot(t),this._Rt.T7=t}lI(){return this.Hl}OI(t,e,i,s,n,r,o,h){return this.lW.OI(t,e,i,s,n,r,o,h)}_H(t){return this.lW._H(t)}lH(t,e,i,s,n){throw new g("Not implemented yet")}uH(){return!1}mW(t){this.lW.mW(t)}vH(){this.lW.nr(),super.vH()}async $n(t){const e=await super.$n(t);return Vu(e)&&this.pRt(),e}async nr(){await this.yRt(),await super.nr(),await this._Rt.nr()}async Xw(){await this.yRt(),this.lW.yn(),this.Hl.yn(),await super.Xw()}pot(t){return new VX(this,t)}got(t){return new Bn(t)}pRt(){this.mRt.jw(),this.mRt=new da,this.gRt=js(this.ARt(this.gRt,this.mRt.Uw),this.mRt).catch(Tt)}async ARt(t,e){if(t&&await t.catch(Tt),this.JG&&Vu(this.JG))for(;;){let t;for(J(e),this.SRt()&&this.oRt(),this.JG.aRt(),J(e);;){const i={stack:[],error:void 0,hasError:!1};try{if(J(e),this.SRt())break;if(t=this.JG.uRt(this.xR()),void 0!==t){0,this.TRt(),await this.JG.cRt(t,e),J(e),this._Rt.Rb(t);break}const s=gs(i,da.$w([e]),!1);await Promise.race([this.py(Ti.hb,s.Uw),this.kRt(s.Uw)])}catch(t){i.error=t,i.hasError=!0}finally{co(i)}}for(J(e);!this.SRt();)await this.WB.py([Ti.hb,Ti.Dy,Zc.iC],e)}}SRt(){const t=this.JG;if(void 0===t||!Vu(t))return!1;const e=this.xR(),i=this.WB.wR;if(!this.WB.PR&&i.wr(e))return!1;return!!IV(this._Rt.wR,t.Pot()).oB(e,e+Si)}oRt(){if(this.ERt)return;this.ERt=!0,this.Uo=this.eI();const t=dM(this),e=this.cI(),i=this.oI(),s=this.WB,n=this._Rt,r=this.JG;r.aRt(),r.oRt(),fM(n,t),this.yot(n),this._Rt=s,s.EI(),s.ZR=!0,this.ERt=!1;const o=this.cI();e!==o&&(o?this._o(new R(this.ER)):this._o(new oa(this.ER)));const h=this.oI();i!==h&&this._o(new hu(this.ER,h)),o||this.TRt()}TRt(){const t=this.WB,e=this.wRt;if(e===t)return;const i=this.vI,s=this.dI;this.wRt=t,this.hZ&&(e.be(),t.ge());const n=this.vI,r=this.dI;n>0&&r>0&&(i!==n||s!==r)&&this._o(new P)}Jxt(t){return void 0!==this._Rt.MJ([t])}async tRt(t){this.TRt();const e=this.JG,i=this._Rt;await i.nr();const s=await i.$n(t);e.dRt(s)}kRt(t){return this.bRt=new os,ou(this.bRt.Ub,t)}n3(){var t;null==(t=this.bRt)||t.Vb()}LI(t){t.type===Ti.Jy&&this.a8===t.currentTime||(t.type===Ti.Qy&&(this.a8=NaN,this.TRt()),t.type!==Zc.iC&&t.type!==Ti.zy&&t.type!==Ti.Dy||this.ERt||!this.SRt()?(t.type!==Ti.Dy||this.PR)&&super.LI(t):this.pRt())}constructor(t,e,i){super(t),this.vRt=!1,this.P9=void 0,this.a8=NaN,this.Uo=se.pB(),this.dZ=!0,this.ERt=!1,this.hZ=!0,this.bRt=void 0,this.gRt=void 0,this.mRt=new da,this.r8=new da,this._Rt=e,this.wRt=t,this.WB.ge(),this._Rt.be(),this.lW=new Ge(this,i),this.Hl=new Iu([this.lW.nt,super.lI()])}},GX=class extends UX{get oot(){return this.WB}get fRt(){return this._Rt}be(){super.be(),this.Ket.be()}ge(){super.ge(),this.Ket.ge()}get jG(){return this.WB.jG}get U4(){return this.WB.U4}get AI(){return this.WB.AI}set AI(t){this.WB.AI=t}S7(t){this.WB.S7(t),this._Rt.S7(t)}NI(){this.WB.NI(),this._Rt.NI()}TI(){return this.WB.TI()}ja(){return this.uO}yot(t){const e=this.SI(),i=this.TI();super.yot(t),this.uO.vC=t.fH,this.SI()!==e&&this._o(new ho),this.TI()!==i&&this._o(new ek)}Xw(){return this.uO.yn(),this.jet.yn(),this.Ket.yn(),super.Xw()}constructor(t,e){super(t,e,new Kh),this.uO=new Vh(t.fH),this.Ket=new dB,this.Ket.S7(t.jG.parentElement),this.jet=new DO(this.Ket.we,this.Hu,this.nt,this.Wl,this.Sa,this.fH)}},HX=class extends _V{OH(t){if(t===ee.mE){const e=super.OH(t),i=super.OH(t);return new GX(e,i)}return super.OH(t)}async yH(t){t instanceof GX?(await t.Xw(),await super.yH(t.oot),await super.yH(t.fRt)):await super.yH(t)}},ZX=class extends vn{async yn(){await super.yn(),await this.bH.yH(this.WB)}static yT(t){var e;return!Z.Qs&&!Z.gg&&!(t&&"google-dai"===(null==(e=t.ssai)?void 0:e.integration))}constructor(t,e,i,s,n,r,o,h){const a=new ut(new HX(r));super(t,e,i,s,n,a.OH(o),h),this.bH=a}};r(),r(),r();var XX=class extends gV{Tot(t){return new OX(t)}mT(){return this.xRt?this.MT:super.mT()}yR(){return this.xRt?this.Pxt:super.yR()}jd(){return this.xRt?this.MA:super.jd()}d4(t){this.xRt?(this.MA=t,this.RRt=!0):super.d4(t)}aI(){return this.xRt?this.IRt?this.IRt.I3():this.v4:super.aI()}m4(t,e,i,s){this.xRt?this.IRt=new JN(t,e,i,s):super.m4(t,e,i,s)}bot(){return this.xRt?this.mit&&!1!==this.Bxt:super.bot()}a3(){this.xRt?this.Bxt=!0:super.a3()}J2(){this.xRt?this.Bxt=!1:super.J2()}dJ(t){return!this.xRt&&super.dJ(t)}_J(t){return this.xRt?Promise.reject(new b("Not supported")):super._J(t)}async Hxt(){if(this.xRt)throw new b("Already locked");this.xRt=!0,this.Zxt();const t=[];this.u4&&t.push(this.u4.Hxt()),this.c4&&t.push(this.c4.Hxt()),await Promise.all(t)}Xxt(){this.xRt=!1,this.u4&&this.u4.Xxt(),this.c4&&this.c4.Xxt(),this.zxt()}Zxt(){this.MT=super.mT(),this.Pxt=super.yR(),this.MA=super.jd(),this.v4=super.aI(),this.RRt=!1,this.Bxt=void 0,this.IRt=void 0}zxt(){if(this.RRt&&(super.d4(this.MA),this.RRt=!1),void 0!==this.IRt){const t=this.IRt;super.m4(t.Sn,t.Tn,t.C3,t.P3),this.IRt=void 0}void 0!==this.Bxt&&(this.Bxt?super.a3():super.J2(),this.Bxt=void 0)}constructor(t){super(t),this.xRt=!1,this.Pxt=se.pB(),this.MA=0,this.RRt=!1,this.mit=!1,this.Bxt=void 0,this.v4=se.pB(),this.IRt=void 0,this.Aot(t),this.MT=t.kd}},zX=class extends Ja{get oot(){return this.WB}xI(){return void 0!==this.JG&&Vu(this.JG)&&this.PR&&this.Rb(0),super.xI()}Rb(t,e,i){void 0!==this.JG&&Vu(this.JG)&&this.PR&&t<this.ct&&this.CRt(),super.Rb(t,e,i)}p7(){this.PRt=!0,super.p7()}w7(){this.PRt=!1,this.DRt()||super.w7()}DRt(){return this.PRt||this.NRt}MRt(){this.NRt||(this.NRt=!0,super.p7())}LRt(){this.NRt&&(this.NRt=!1,this.DRt()||super.w7())}$n(t){this.BRt.jw();const e=this.QE(t,this.ORt);return this.FRt=e,e}async QE(t,e){return e&&await e.catch(Tt),this.LRt(),await super.$n(t)}pot(t){return new XX(t)}got(t){return new Bn(t)}nr(){this.BRt.jw();const t=this.cxt(this.ORt);return this.FRt=t,t}async cxt(t){return t&&await t.catch(Tt),this.LRt(),await super.nr()}CRt(){this.MRt(),this.BRt.jw(),this.BRt=new da,this.ORt=js(this.VRt(this.FRt,this.ORt,this.BRt.Uw),this.BRt).catch(yu)}async VRt(t,e,i){t&&await t.catch(Tt),e&&await e.catch(Tt),J(i);const s=this.JG;if(!s||!Vu(s))return;const n=s.kd;await s.Hxt(),await this.WB.nr();const r=await this.WB.$n(n);r.d4(s.ct),s.Aot(r),s.Xxt(),this.LRt()}async Xw(){this.BRt.jw(),this.ORt&&(await this.ORt.catch(Tt),this.ORt=void 0),this.DRt()&&super.w7(),await super.Xw()}constructor(...t){super(...t),this.PRt=!1,this.NRt=!1,this.FRt=void 0,this.ORt=void 0,this.BRt=new da}},qX=class extends _V{OH(t){if(t===ee.mE)return new zX(super.OH(t))}async yH(t){const e=t;await e.Xw(),await super.yH(e.oot)}static yT(){return Z.wg}};O(new class extends QF{uP(t,e,i,s,n,r,o,h){const a=new tV(To.Vg.Brt,To.Vg.Lrt,To.Vg.Mrt,To.Vg.Frt);let u;u=LX.yT(h)?LX:ZX.yT(h)?ZX:IX;let c=e;return qX.yT()&&(c=new qX(c)),new u(i,s,n,r,a,c,ee.mE,t)}WH(){return!0}constructor(...t){super(...t),this.UH=zt.vG}}),r(),r(),Dh((function(t){return class extends t{ka(){const t=this.OR.wa;return Jr(super.ka(),{get hesp(){return t}})}}}),rh.au),r(),r(),r(),r(),r();var YX=0;function KX(t,e){if(void 0===e&&(e=!0),!t)return;let i=t;return"/"===i.charAt(0)&&(i=i.substring(1)),e&&"/"!==i.charAt(i.length-1)&&(i+="/"),i}function jX(t){var e,i,s;return ol({},t,{baseUrl:KX(t.baseUrl),id:null!=(e=t.id)?e:String(YX++),timeBounds:ol({},t.timeBounds,{scale:null!=(i=t.timeBounds.timescale)?i:1e3}),currentTime:t.currentTime?{value:t.currentTime.timestamp,scale:null!=(s=t.currentTime.timescale)?s:1e3}:void 0,audio:t.audio.map(ez),video:t.video.map(sz),metadata:t.metadata.map(rz),events:t.events.map(cz)})}var QX=0;function JX(t){const e=KX(t.initPattern,!1),i=KX(t.contPattern,!1);var s;return ol({},t,{id:null!=(s=t.id)?s:String(QX++),continuationPattern:i?Sm(i,"${segmentId}","{segmentId}"):void 0,initializationPattern:e?Sm(e,"${initId}","{initId}"):void 0})}function $X(t){var e;const i=KX(t.initPattern,!1),s=KX(t.contPattern,!1);return ol({},t,{continuationPattern:s?Sm(s,"${segmentId}","{segmentId}"):void 0,initializationPattern:i?Sm(i,"${initId}","{initId}"):void 0,segmentDuration:t.segmentDuration?{value:t.segmentDuration.duration,scale:t.segmentDuration.timescale}:void 0,segments:t.segments.map(tz),activeSegment:null==(e=Fo(t.segments,(t=>t.active)))?void 0:e.id})}function tz(t){var e;return ol({},t,{timeBounds:ol({},t.timeBounds,{endTime:void 0!==t.timeBounds.duration?t.timeBounds.startTime+t.timeBounds.duration:void 0,scale:null!=(e=t.timeBounds.timescale)?e:1e3})})}function st(t){return t&&"-"===t.charAt(0)}function ez(t){let e;try{var i;e=x(null!=(i=t.channels)?i:"2")}catch(t){e=2}return st(t.contPattern)||st(t.initPattern)?function(t,e){const i=t.initPattern,s=t.contPattern;return t.initPattern=void 0,t.contPattern=void 0,ol({},JX(t),{baseUrl:KX(t.baseUrl),language:"eng",channels:e,sampleRate:t.samplerate,tracks:t.tracks.map((t=>{var e,n;return t.initPattern=null!=(e=t.initPattern)?e:i,t.contPattern=null!=(n=t.contPattern)?n:s,iz(t)}))})}(t,e):ol({},JX(t),{baseUrl:KX(t.baseUrl),language:"eng",channels:e,sampleRate:t.samplerate,tracks:t.tracks.map(iz)})}function iz(t){let e;try{var i;e=x(null!=(i=t.channels)?i:"2")}catch(t){e=2}return st(t.contPattern)||st(t.initPattern)?function(t,e){return t.contPattern=t.baseUrl+t.contPattern,t.initPattern=t.baseUrl+t.initPattern,ol({},$X(t),{baseUrl:"./",channels:e,sampleRate:t.samplerate})}(t,e):ol({},$X(t),{baseUrl:KX(t.baseUrl),channels:e,sampleRate:t.samplerate})}function sz(t){return st(t.contPattern)||st(t.initPattern)?function(t){const e=t.initPattern,i=t.contPattern;return t.initPattern=void 0,t.contPattern=void 0,ol({},JX(t),{baseUrl:KX(t.baseUrl),frameRate:t.framerate?{value:t.framerate.rate,scale:t.framerate.scale}:void 0,tracks:t.tracks.map((t=>(t.initPattern=e,t.contPattern=i,nz(t))))})}(t):ol({},JX(t),{baseUrl:KX(t.baseUrl),frameRate:t.framerate?{value:t.framerate.rate,scale:t.framerate.scale}:void 0,tracks:t.tracks.map(nz)})}function nz(t){var e,i;return st(t.contPattern)||st(t.initPattern)?function(t){var e,i;return t.contPattern=t.baseUrl+t.contPattern,t.initPattern=t.baseUrl+t.initPattern,ol({},$X(t),{baseUrl:"./",frameRate:t.framerate?{value:t.framerate.rate,scale:t.framerate.scale}:void 0,resolution:ol({},t.resolution,{sarWidth:null==(e=t.resolution.sar)?void 0:e.width,sarHeight:null==(i=t.resolution.sar)?void 0:i.height})})}(t):ol({},$X(t),{baseUrl:KX(t.baseUrl),frameRate:t.framerate?{value:t.framerate.rate,scale:t.framerate.scale}:void 0,resolution:ol({},t.resolution,{sarWidth:null==(e=t.resolution.sar)?void 0:e.width,sarHeight:null==(i=t.resolution.sar)?void 0:i.height})})}function rz(t){var e;return ol({},t,{id:null!=(e=t.id)?e:String(QX++),schemeId:"",tracks:t.tracks.map(oz)})}function oz(t){return ol({},t,{segments:t.segments.map(az)})}var hz=0;function az(t){return{id:hz++,timeBounds:ol({},t.timeBounds,{scale:t.timeBounds.timescale})}}var uz=0;function cz(t){var e,i;return ol({},t,{id:null!=(e=t.id)?e:String(uz++),timeBounds:ol({},t.timestamp,{scale:null!=(i=t.timestamp.timescale)?i:1e3})})}var lz=class{async WRt(t,e){const i={Xu:t,Uw:e},s=await this.fR.Qk(i);let n=await s.Ik(e);return function(t){const e=t;if(Yt(e.manifestVersion)&&Ga(e.manifestVersion,"alpha"))return!0;let i,s;for(const t of e.presentations){for(const e of[...t.video,...t.audio])if(e.tracks.length>0){i=e.tracks[0],s=e;break}if(Bo(i))break}return(Yt(null==s?void 0:s.initPattern)||Yt(null==i?void 0:i.initPattern))&&!Yt(null==i?void 0:i.initializationPattern)&&!Yt(null==s?void 0:s.initializationPattern)}(n)&&(n=function(t){return ol({},t,{availabilityDuration:{value:t.dvrDuration?t.dvrDuration.duration/t.dvrDuration.timescale:0},manifestVersion:"1.0.0",presentations:t.presentations.map(jX),contentBaseUrl:t.contentBaseUrl||"./"})}(n)),n}constructor(t){this.fR=t}};r();var dz=class extends Co{get wa(){return this.eu||(this.eu=oS(this)),this.eu}ZC(){return this.URt.ZC()}get WC(){return this.URt.WC}get GC(){return this.URt.GC}get HC(){return this.URt.HC}bn(t,e){this.URt.bn(t,e)}vn(t,e){this.URt.vn(t,e)}constructor(t){super(),this.URt=t}};r(),r(),r();var _r=class{get dit(){const t=1-this.GRt**this.HRt;return this.ZRt/t}gut(t,e){const i=this.GRt**t,s=e*(1-i)+i*this.ZRt;S(s)||(this.ZRt=s,this.HRt+=t)}_J(t){const e=_.exp(_.log(.5)/t);if(e===this.GRt)return;if(0===this.HRt)return void(this.GRt=e);const i=this.dit,s=1-e**this.HRt;this.ZRt=i*s,this.GRt=e}constructor(t){this.ZRt=0,this.HRt=0,this.GRt=_.exp(_.log(.5)/t)}},Ze=class t{get dit(){return this.kut()?_.max(this.XRt.dit,this.zRt.dit):this.qRt}gut(t){const e=Ms.Wg(),i=t;this.YRt&&void 0!==this.KRt&&e-this.KRt>=this.jRt&&this.nr(),this.QRt+=1,this.XRt.gut(1,i),this.zRt.gut(1,i),this.JRt.push(i),this.JRt.length>this.$Rt&&this.JRt.shift(),this.KRt=e}kut(){return void 0!==this.KRt&&Ms.Wg()-this.KRt<=this.jRt}nr(){this.XRt=new _r(this.tIt),this.zRt=new _r(this.eIt),this.QRt=0,this.JRt=[],this.KRt=void 0}constructor(e=t.iIt,i=t.sIt,s=t.Eut,n=!1){this.QRt=0,this.JRt=[],this.KRt=void 0,this.jRt=6e4,this.$Rt=10,this.tIt=e,this.eIt=i,this.qRt=s,this.YRt=n,this.XRt=new _r(e),this.zRt=new _r(i)}};Ze.iIt=2,Ze.sIt=5,Ze.Eut=.1,r();var fz=class{dj(t){for(const e of this.nIt)e.dj(t)}_j(t){for(const e of this.nIt)e._j(t)}vj(t,e){for(const i of this.nIt)i.vj(t,e)}mj(t){for(const e of this.nIt)e.mj(t)}constructor(t){this.nIt=t}};r();var _z=class{dj(t){this.rIt=t}_j(t){this.oIt.gut(t-this.rIt)}vj(t){}mj(t){}constructor(t){this.rIt=0,this.oIt=t}};r();var vz=class{_j(t){this.hIt=t}vj(t,e){this.Iut.gut(t-this.hIt,e.byteLength),this.hIt=t}mj(t){}dj(t){}constructor(t){this.hIt=0,this.Iut=t}};r();var mz=class{dj(t){}vj(t,e){const i=e.byteLength,s=this.aIt;this.aIt=i;const n=t-this.Pn;this.Pn=t,this.uIt.h$(e);const r=!this.uIt.cIt(),o=i>=this.lIt;s!==Ms.Ys.op&&r&&o&&this.Iut.gut(n,i)}_j(t){this.Pn=t}mj(t){}constructor(t,e=0){this.uIt=new gz,this.Pn=0,this.aIt=0,this.Iut=t,this.lIt=e}},gz=class extends po{cIt(){return this.dIt}h$(t){this.dIt=!1,super.h$(t)}r$(t,e){this.fIt&&this.fIt!==_t.fD||(this.dIt=!0),super.r$(t,e),this.fIt=t}g$(t){return!1}w$(t){}b$(t){}constructor(...t){super(...t),this.fIt=void 0,this.dIt=!1}};r();var pz=function(t){return t._It="sample",t}({}),wz=class extends Co{hG(){if(!this.kut())return;const t=Ms.Wg();t-this.vIt>1e3&&(this.vIt=t,gu.Vg.hG(this.dit))}constructor(...t){super(...t),this.vIt=0}};r();var yz=class extends wz{get dit(){return this.kut()?this.ZRt:this.mIt}kut(){return this.sS.length>=3}gut(t,e){if(0===t)return;const i={bG:8*e/t,gIt:e};if(this.sS.push(i),this.pIt+=i.gIt,this.sS.length>30){const t=this.sS.shift();this.pIt-=t.gIt}const s=this.sS.slice().sort(((t,e)=>t.bG-e.bG));let n=0;for(let t=0;t<s.length;t++){const e=s[t];if(n+=e.gIt/this.pIt,this.ZRt=e.bG,n>=.5)break}this.hG(),this._o(new pe(pz._It))}constructor(t){super(),this.sS=[],this.pIt=0,this.mIt=t,this.ZRt=t}};r();var xt=class t extends wz{gut(t,e){const i=8*e/t;this.XRt.gut(t,i),this.zRt.gut(t,i),this.wIt+=e,this.hG(),this._o(new pe(pz._It))}get dit(){return this.kut()?_.min(this.XRt.dit,this.zRt.dit):this.qRt}kut(){return this.wIt>=this.yIt}constructor(e=t.iIt,i=t.sIt,s=t.bIt,n=t.Eut){super(),this.wIt=0,this.yIt=s,this.XRt=new _r(e),this.zRt=new _r(i),this.qRt=n}};xt.bIt=128e3,xt.Eut=uI,xt.iIt=.5,xt.sIt=5;var bz=class{AIt(t){var e;null==(e=this.Iut)||e.vn(pz._It,this.SIt),this.Iut=new yz(t),this.Iut.bn(pz._It,this.SIt)}TIt(t){this.kIt.push(t)}EIt(t){we(this.kIt,t)}get bG(){var t,e;return null!=(e=null==(t=this.Iut)?void 0:t.dit)?e:this.xIt}get AG(){return this.RIt.dit}SG(t){if("segment"!==t.Tw)return;if("video"!==t.EE)return;const e=[new _z(this.RIt)];return this.Iut&&("stream"===t.jk&&"initialization-segment"!==t.kE?e.push(new mz(this.Iut,1e3)):e.push(new vz(this.Iut))),new fz(e)}constructor(t,e){this.kIt=[],this.SIt=()=>{for(const t of this.kIt)t()},this.xIt=t>0?t:xt.Eut,this.RIt=new Ze(Ze.iIt,Ze.sIt,e>0?e:Ze.Eut),this.AIt(this.xIt)}};r();var Az=class{IIt(t,e){const i=e-t;(!this.CIt||i<this.CIt)&&(this.CIt=i)}PIt(t,e){this.DIt=e-t}NIt(t,e){this.MIt=e-t}LIt(t,e){this.BIt=e-t}get OIt(){const t=Ws([this.MIt,this.BIt].filter(Bo),Fd);return void 0!==t?Ms.Wg()/1e3+t:void 0!==this.DIt?Ms.Wg()/1e3+this.DIt:void 0!==this.CIt?Ms.Wg()/1e3+this.CIt:void 0}FIt(t){const e=this.OIt;if(void 0!==e)return e-t}nr(){this.CIt=void 0,this.DIt=void 0,this.BIt=void 0,this.MIt=void 0}};r();var Sz=.25,Tz=400,kz={minimumOffset:.2,targetOffset:.45,maximumOffset:.7,forceSeekOffset:3,minimumPlaybackRate:At,maximumPlaybackRate:mt},Ez={minimumOffset:.4,targetOffset:.65,maximumOffset:1,forceSeekOffset:3,minimumPlaybackRate:At,maximumPlaybackRate:mt},xz={minimumOffset:.4,targetOffset:.7,maximumOffset:.9,forceSeekOffset:3,minimumPlaybackRate:At,maximumPlaybackRate:mt},Rz={minimumOffset:.2,targetOffset:.45,maximumOffset:1,forceSeekOffset:3,minimumPlaybackRate:At,maximumPlaybackRate:mt},Iz={minimumOffset:.5,targetOffset:1.125,maximumOffset:1.75,forceSeekOffset:2.55,minimumPlaybackRate:At,maximumPlaybackRate:mt};function Cz(t){if(Ms.ow.aw){const e=(Tz+250)/1e3,i=_.max(e,t.minimumOffset),s=_.max(i+Sz,t.targetOffset),n=_.max(s+Sz,t.maximumOffset);return{minimumOffset:i,targetOffset:s,maximumOffset:n,forceSeekOffset:_.max(n+Sz,t.forceSeekOffset),minimumPlaybackRate:At,maximumPlaybackRate:mt}}return t}function Pz(){let t;return t=Ms.Ys.$g?Rz:Ms.Ys.rp?Ez:Ms.Ys.np?"Android"===Ms.ow.hw?xz:kz:Iz,Ms.ow.aw?Cz(t):t}r(),r(),r();var Dz=class{VIt(t){for(const e of this.Pxt)e[1]=e[1].jn(t)}WIt(t,e){let i=!0;for(const s of this.Pxt){let n=s[1];n=n.iB(e),t===s[0]&&(n=n.tB(e),i=!1),s[1]=n.$L(1e-5)}i&&this.Pxt.push([t,e])}UIt(t){for(const e of this.Pxt)e[1]=e[1].iB(t)}GIt(t){for(let e=0;e<this.Pxt.length;e++)if(this.Pxt[e][1].wr(t))return this.Pxt[e][0]}constructor(){this.Pxt=[]}},Nz=class extends Co{get wR(){let t=se.pB();for(const[,e]of this.HIt){const i=e.wit+e.BV,s=i+e.ct;t=t.tB(se.gB(i,s))}return this.Cot.wR.tB(t)}GIt(t){return this.ZIt.GIt(t)}get XIt(){return void 0!==this.zIt}get qIt(){return this.zIt?this.zIt.Ub:Promise.resolve()}async appendStream(t,e,i){if(this.XIt)throw new g("Concurrent appends are not supported.");try{const s={stack:[],error:void 0,hasError:!1};try{const n=gs(s,da.$w([i,this.i3.Uw]),!1).Uw;this.ZIt.VIt(this.wR),this.zIt=new os;const r=QD(t).getReader();for(;;){const t=await ou(r.read(),n);if(t.done)break;const i=t.value,s={Tw:Ce.iJ,Kk:mu(i.map((t=>t.Zut)))},o={ct:Kn(i,(t=>t.ct)),wit:i[0].wvt,BV:-e.pat.YIt};await this.b2(s,o,n);const h=o.wit+o.BV,a=h+o.ct;this.ZIt.WIt(e.pat,se.gB(h,a))}}catch(t){s.error=t,s.hasError=!0}finally{co(s)}}finally{e.KIt();const t=this.zIt;this.zIt=void 0,null==t||t.Vb()}}async g2(t,e,i,s){if(this.XIt)throw new g("Concurrent appends are not supported.");try{const n={stack:[],error:void 0,hasError:!1};try{const r=gs(n,da.$w([s,this.i3.Uw]),!1).Uw;this.zIt=new os,await this.b2(t,e,r);const o=e.wit+e.BV,h=o+e.ct;this.ZIt.VIt(this.wR),this.ZIt.WIt(i,se.gB(o,h))}catch(t){n.error=t,n.hasError=!0}finally{co(n)}}finally{const t=this.zIt;this.zIt=void 0,null==t||t.Vb()}}async b2(t,e,i){this.Cot.m3===ee.mE&&this.jIt.Sdt(t.Kk,e.wit,e.wit+e.ct,e.BV,this.qyt,!1);const s=this.WB.qB.zB,n=this.Cot.wR.wr(this.WB.ER);if(s||n)return await this.QIt(i),await this.Cot.g2(t,e,i);this.HIt.push([t,e]);const r=this.HIt[0][1].wit;return this.HIt[this.HIt.length-1][1].wit-r>=.4?await this.QIt(i):void 0}async A2(t,e){if(this.XIt)throw new g("Concurrent appends are not supported.");try{const i={stack:[],error:void 0,hasError:!1};try{const s=gs(i,da.$w([e,this.i3.Uw]),!1).Uw;this.zIt=new os,await this.QIt(s),await this.Cot.A2(t,{},s),this.Cot.m3===ee.mE&&this.jIt.Got(t.Kk)}catch(t){i.error=t,i.hasError=!0}finally{co(i)}}finally{const t=this.zIt;this.zIt=void 0,null==t||t.Vb()}}async eT(t,e,i){if(this.XIt)throw new g("Concurrent appends are not supported.");try{const s={stack:[],error:void 0,hasError:!1};try{const n=gs(s,da.$w([i,this.i3.Uw]),!1).Uw;this.zIt=new os,await this.QIt(n),await this.Cot.eT(t,e,n),this.ZIt.UIt(se.gB(t,e))}catch(t){s.error=t,s.hasError=!0}finally{co(s)}}finally{const t=this.zIt;this.zIt=void 0,null==t||t.Vb()}}async cY(t){if(this.XIt)throw new g("Concurrent appends are not supported.");try{const e={stack:[],error:void 0,hasError:!1};try{const i=gs(e,da.$w([t,this.i3.Uw]),!1).Uw;this.zIt=new os,await this.QIt(i)}catch(t){e.error=t,e.hasError=!0}finally{co(e)}}finally{const t=this.zIt;this.zIt=void 0,null==t||t.Vb()}}async QIt(t){for(const[e,i]of this.HIt)await this.Cot.g2(e,i,t);En(this.HIt)}async Xw(){for(this.i3.Xw();this.XIt;)await this.qIt}constructor(t,e,i,s){super(),this.HIt=[],this.zIt=void 0,this.i3=new da,this.WB=e,this.Cot=t,this.qyt=i,this.jIt=s,this.ZIt=new Dz,this.Cot.bn(oe.tJ,this.Ds)}};r(),r();var Mz=class{async JIt(t,e){if(this.$It>=this.tCt.maxRetries)throw t;const i=this.eCt(this.$It++);await ke(i,e)}eCt(t){let e=0;return 0!==t&&(e+=_.min(this.tCt.maximumBackoff,this.tCt.minimumBackoff*2**(t-1))),e}constructor(t){this.$It=0,this.tCt=t}};r(),r();var Lz=function(t){return t.iCt="emsgdata",t}({}),Bz=class extends pe{constructor(t,e){super("emsgdata"),this.value=t,this.data=e}};r();var Oz=class{start(t){this.FQ=t}sCt(t){this.FQ.enqueue(t)}};r(),r();var pn=function(t){return t.nCt="initdata",t.MANIFEST_UPDATE="manifestupdate",t.rCt="timestamps:v1",t}({});var Fz="urn:theo:hesp:2020";function Vz(t){if(t.mL!==Fz)return;const e=t.Mx;if(e===pn.nCt){return function(t){if(!t||!V(t))return;const e=t;return!Ad(e.index)||!Ad(e.offset)||e.index<0&&e.offset<0?void 0:{Tw:"initdata",index:e.index,offset:e.offset}}(JSON.parse(Va(ra(t.wL),new Ri)))}if(e===pn.MANIFEST_UPDATE){return function(t){if(!t||!V(t))return;const e=t;return!Bo(e.url)||Yt(e.url)?{Tw:"manifestupdate",url:e.url}:void 0}(JSON.parse(Va(ra(t.wL),new Ri)))}if(e===pn.rCt){const e=ra(t.wL),i=new Ri,s=Hr(e,i).toNumber()/t.mN,n=Hr(e,i).toNumber()/1e3,r=$h(e,i)/1e3;let o;return i.nc+8<=e.byteLength&&(o={hours:$h(e,i),minutes:Ng(e,i),seconds:Ng(e,i),frames:Ei(e,i)}),{Tw:pn.rCt,oCt:s,hCt:n,aCt:r,uCt:o}}}var Wz=class extends Oz{transform(t){if(t.Tw===_t.vD)try{const e=Vz(nr.uN(t.Kk));e&&this.cCt._o(new Bz(e.Tw,e))}catch(t){false}this.sCt(t)}Xw(){this.cCt.Ro()}constructor(...t){super(...t),this.cCt=new Co}};r();var Uz=class{start(t){this.A_=new Gz(t)}transform(t){this.A_.h$(t)}flush(){this.A_.u$()}},Gz=class extends po{g$(t){return!0}w$(t){this.FQ.enqueue(t)}b$(t){}constructor(t){super(),this.FQ=t}};r(),r();var Hz=vo.fromNumber(cf);var Zz=class extends Co{async Qk(t){for(;;)try{return await this.fW.Qk(t)}catch(e){if(Je(e))throw e;await this.lCt.JIt(e,t.Uw)}}constructor(t,e){super(),this.fW=t,this.lCt=e}};function Xz(t,e,i,s,n,r,o,h){const a=new ya;return n&&a.Rk(function(t,e){return void 0===e&&(e=Hz),new ya({Range:"bytes="+t.toString()+"-"+e.toString()})}(n.start,n.end)),{Xu:t,Jk:a,xE:!1,Uw:h,Tw:Mr.nE,kE:i,EE:s,SE:r,TE:o,jk:e,PE:e===Rr.Sk}}r(),r();var zz=function(t){return t[t.INITIALIZER=0]="INITIALIZER",t[t.FRAMES=1]="FRAMES",t}({}),qz=class extends Oz{transform(t){this.dCt.push(t),t.Tw===_t.fD&&this.fCt(this.dCt.splice(0),zz.FRAMES)}fCt(t,e){const i={mN:this.NA,jq:this.dY},s=mu(t.map((t=>ua(t.Kk.Kk)))),n=Fo(t,Yz),r=nr.JD(n.Kk.Kk)[0],o={EE:this.vut,Eb:i,Zut:s,Tw:e,ct:this.jd(r)/this.NA,wvt:io(this._Ct(r),this.NA)};this.sCt(o)}jd(t){const e=t.Z[0];if(!e||0===e.hL.length)return 0;var i;const s=null!=(i=e.XD.QM)?i:0;return e.hL[0]._L.reduce(((t,e)=>{var i;return t+(null!=(i=e.ct)?i:s)}),0)}_Ct(t){var e,i;return null!=(i=null==(e=t.Z[0].aL)?void 0:e.aL)?i:vo.UZERO}constructor(t,e){super(),this.dCt=[],this.dY=t,this.vut=this.dY.match(/video/)?Qi.mE:Qi.vE,this.NA=e}};function Yz(t){return t.Tw===_t.oD}r();var Kz=class extends Co{get pat(){return this.vCt}wlt(t){return t+1}get mCt(){return!1}get gCt(){return this.pCt}get XIt(){return void 0!==this.zIt}get qIt(){return this.zIt?this.zIt.Ub:Promise.resolve()}Rb(t){this.pCt=t,this.wCt=void 0,this.yCt=void 0}bCt(){return void 0!==this.wCt}async ACt(){if(this.XIt)throw new g("Concurrent downloads are not supported.");try{this.zIt=new os;let t;if("now"===this.pCt)t=Ms.ew(this.vCt.SCt("now"),this.vCt.TCt);else{const e=this.pCt,i=0===e?1:this.vCt.kCt(e);t=Ms.ew(this.vCt.SCt(i),this.vCt.TCt)}const e=Xz(t,Rr.bk,xu.hE,this.vut,void 0,3e3,1e3,this.ECt.Uw),i=await this.xCt.Qk(e),s=await i.Dk(this.ECt.Uw),n=new j(s),{RCt:r,AN:o}=function(t){const e=Mi.OD(new FS(ra(t),new Ri)),i=Fo(e,(t=>t.Tw===_t.gD||t.Tw===_t.oD));if(void 0===i)return{RCt:t,AN:void 0};const s=si(t,0,i.nc),n=si(t,i.nc);return{RCt:s,AN:0===n.byteLength?void 0:n}}(n),h=nr.JD(ra(n));this.NA=function(t){const e=Fo(t,(t=>t.Tw===_t.gP));return e.Z[0].AN.XD.mN}(h);const a=function(t){const e=t.filter((t=>t.Tw===_t.vD)),i=e.map((t=>Vz(t))),s=Fo(i,(t=>(null==t?void 0:t.Tw)===pn.nCt));if(!s)throw new g("No init data in init response");return s}(h);let u;if(this.wCt=a.index,this.yCt=a.offset,o){u=function(t,e,i){var s;const n=Fo(t,(t=>t.Tw===_t.oD));var r;const o=io(null!=(r=null==(s=n.Z[0].aL)?void 0:s.aL)?r:vo.UZERO,i),h=n.Z[0];var a;const u=null!=(a=h.XD.QM)?a:0,c=h.hL[0],l=c._L.reduce(((t,e)=>{var i;return t+(null!=(i=e.ct)?i:u)}),0)/i;return{wit:o,ct:l,BV:e}}(nr.JD(ra(n)),-this.pat.YIt,this.NA)}return{initialization:r,data:o,metadata:u}}finally{const t=this.zIt;this.zIt=void 0,null==t||t.Vb()}}ICt(){if(this.XIt)throw new g("Concurrent downloads are not supported.");this.zIt=new os;const t=void 0!==this.yCt?vo.fromNumber(this.yCt):void 0;return Ab(this.CCt(this.wCt,t,this.ECt.Uw)).pipeThrough(new _a(new qz(this.pat.jq,this.NA))).pipeThrough(new _a(new jz(this.ECt.Uw)))}async CCt(t,e,i){const s=this.PCt(t,e,i);return(await this.xCt.Qk(s)).Nk().pipeThrough(new _a(new Uz)).pipeThrough(new _a(this.DCt))}PCt(t,e,i){const s=this.vCt.NCt(t),n=void 0!==e?{start:e,end:void 0}:void 0;return Xz(Ms.ew(s,this.vCt.TCt),Rr.Sk,xu.iE,this.vut,n,25e3,1e3,i)}KIt(){void 0!==this.wCt&&(this.wCt=this.wlt(this.wCt)),this.yCt=void 0;const t=this.zIt;this.zIt=void 0,null==t||t.Vb()}cancelDownload(){var t;this.ECt.jw(),this.ECt=new da,this.zIt=null!=(t=this.zIt)?t:new os,this.wCt=void 0,this.yCt=void 0;const e=this.zIt;this.zIt=void 0,null==e||e.Vb()}async Xw(){this.Ro(),this.DCt.Xw(),this.ECt.jw(),await this.qIt,this.wCt=void 0,this.yCt=void 0}constructor(t,e,i){super(),this.pCt="now",this.ECt=new da,this.zIt=void 0,this.vCt=t,this.lCt=new Mz(i),this.DCt=new Wz,this.DCt.cCt.bn(Lz.iCt,this.Ds),this.fW=e,this.vut=function(t){switch(t){case Qi.vE:return qh.vE;case Qi.mE:return qh.mE;default:return qh.iE}}(t.Tw),this.xCt=new Zz(this.fW,this.lCt)}};var jz=class{start(t){this.FQ=t,this.Kw.Ww(this.MCt)}flush(){this.Kw.Vw(this.MCt)}constructor(t){this.MCt=()=>{this.FQ.error(new Bu)},this.Kw=t}};function Cr(t){var e;return t.value/(null!=(e=t.scale)?e:1)}r(),r(),r(),r(),r();var Qz="{initId}",Jz=/{initId(?::0(?:\d+)d)?}/,$z=/{segmentId(?::0(?:\d+)d)?}/,tq=class{get o(){return this.zS}get bG(){return this.aG}get Myt(){return this.LCt}get Mrt(){return this.Xbt}get BCt(){return this.OCt}get FCt(){return this.VCt}get TCt(){return Ms.ew(this.WCt,this.UCt.TCt)}get Jrt(){return this.GCt}get Ch(){return this.CO}get HCt(){return this.ZCt}get XCt(){return this.zCt}get YIt(){return this.qCt}get YCt(){return this.Obt}ir(t){this.OCt=t.activeSegment,this.VCt=t.activeSequenceNumber,this.Xbt=t.segments}constructor(t,e,i){var s,n,r,o;this.Xbt=[],this.QO=t,this.KCt=i,this.zS=t.id,this.aG=t.bandwidth,this.LCt=t.averageBandwidth,this.WCt=null!=(s=t.baseUrl)?s:"",this.GCt=null!=(n=t.codecs)?n:e.codecs,this.ZCt=null!=(r=t.continuationPattern)?r:e.continuationPattern,this.zCt=null!=(o=t.initializationPattern)?o:e.initializationPattern,this.CO=t.label,this.qCt=t.mediaTimeOffset?Cr(t.mediaTimeOffset):0,this.Obt=t.segmentDuration?Cr(t.segmentDuration):0,this.ir(t)}},eq=class extends tq{get Tw(){return Qi.vE}get UCt(){return this.KCt}get jCt(){return this.QCt}get oft(){return this.JCt}get oM(){return this.gA}get jq(){return'audio/mp4; codecs="'+this.Jrt+'"'}constructor(t,e,i){var s,n,r,o;super(t,e,i),this.QCt=null!=(s=t.channels)?s:1,this.JCt=null!=(r=null!=(n=t.frameRate)?n:e.frameRate)?r:1024,this.gA=null!=(o=t.sampleRate)?o:e.sampleRate}},iq=class extends tq{get Tw(){return Qi.mE}get UCt(){return this.KCt}get $Ct(){return this.Ap}get oft(){return this.JCt}get jq(){return'video/mp4; codecs="'+this.Jrt+'"'}constructor(t,e,i){var s;super(t,e,i),this.Ap=t.resolution,this.JCt=Cr(null!=(s=t.frameRate)?s:e.frameRate)}};function sq(t,e){const i=String(e);if(t===Qz||"now"===e)return i;const s=x(t.substring(9,t.lastIndexOf("d")));return Jh(i,s,"0")}function nq(t,e){const i=String(e);if(t===Qz)return i;const s=x(t.substring(12,t.lastIndexOf("d")));return Jh(i,s,"0")}var rq=class{get xst(){return this.tPt}get o(){return this.zS}get ePt(){return this.iPt}get TCt(){return Ms.ew(this.WCt,this.xst.TCt)}get Ch(){return this.CO}get YIt(){return this.qCt}get sPt(){return this.nPt}ir(t){for(const e of this.dC){const i=Fo(t.tracks,(t=>e.o===t.id));i&&e.ir(i)}}constructor(t,e,i){var s;this.KCt=t,this.dC=i,this.tPt=e,this.zS=t.id,this.iPt=t.alignId,this.WCt=null!=(s=t.baseUrl)?s:"",this.CO=t.label,this.qCt=t.mediaTimeOffset?Cr(t.mediaTimeOffset):0,this.nPt=t.protection,this.ir(t)}},oq=class extends rq{get UCt(){return this.KCt}get Z(){return this.dC}get gs(){return this.LA}get jCt(){return this.QCt}ir(t){var e,i;super.ir(t),this.LA=t.language,this.QCt=null!=(e=t.channels)?e:1,this.dY=null!=(i=t.mimeType)?i:"audio/mp4"}constructor(t,e){const i=[];super(t,e,i);for(const e of t.tracks)i.push(new eq(e,t,this))}},hq=class extends rq{get UCt(){return this.KCt}get Z(){return this.dC}get rPt(){return this.KCt.captions}ir(t){var e;super.ir(t),this.dY=null!=(e=t.mimeType)?e:"video/mp4"}constructor(t,e){const i=[];super(t,e,i);for(const e of t.tracks)i.push(new iq(e,t,this))}},aq=class{get o(){return this.zS}get TCt(){return Ms.ew(this.WCt,this.hPt.oPt)}get aPt(){return this.uPt}get ER(){return this.uZ}get Qq(){return this.Kf}get cPt(){return this.lPt}get dPt(){return this.fPt}ir(t){var e;this.uPt=t.timeBounds,this.Kf=null!=(e=t.events)?e:[],this.uZ=t.currentTime?Cr(t.currentTime):void 0}constructor(t,e){var i,s,n;this.lPt=[],this.fPt=[],this.hPt=t,this.zS=e.id,this.WCt=null!=(i=e.baseUrl)?i:"";for(const t of null!=(s=e.audio)?s:[])this.lPt.push(new oq(t,this));for(const t of null!=(n=e.video)?n:[])this.fPt.push(new hq(t,this));this.ir(e)}},uq=class{get HC(){return this.hPt}get _Pt(){return this.vPt}get mPt(){return this.gPt}get pPt(){return this.wPt}get yPt(){return this.bPt}get APt(){return this.SPt}get a0(){return this.oA}get TPt(){return this.kPt}get oPt(){var t;return Ms.ew(null!=(t=this.EPt)?t:"",this.xPt)}get RPt(){return this.IPt}ir(t){var e;this.vPt=Cr(t.availabilityDuration),this.gPt=t.creationDate,this.wPt=t.fallbackPollRate,this.bPt=t.manifestVersion,this.oA=t.streamType,this.kPt=t.activePresentation,this.EPt=t.contentBaseUrl,this.IPt=null==(e=t.timeSource)?void 0:e.url,this.hPt=t;for(const e of t.presentations){const t=Fo(this.SPt,(t=>t.o===e.id));t?t.ir(e):this.SPt.push(new aq(this,e))}this.SPt=this.SPt.filter((e=>t.presentations.some((t=>t.id===e.o))))}constructor(t,e){this.SPt=[],this.xPt=t,this.hPt=e,this.ir(e)}};r(),r();var cq=0,lq=class extends Co{get trt(){return!0}get Myt(){return this.CPt.Myt}get bG(){return this.CPt.bG}get Jrt(){return this.CPt.Jrt}get o(){return this.CPt.o}get Ch(){var t;return null!=(t=this.CPt.Ch)?t:""}get IC(){return this.IO}get Fyt(){return this.CPt.TCt}get Lyt(){}get jq(){return this.CPt.jq}get YIt(){return this.CPt.YIt}get TCt(){return this.CPt.TCt}get Tw(){return this.CPt.Tw}kCt(t){const e=(t-this.CPt.UCt.xst.ER)*this.framesPerSecond();return _.round(this.CPt.FCt+e)}PPt(t){return t+1}SCt(t){var e;let i,s=this.CPt.XCt;for(;i=null==(e=s.match(Jz))?void 0:e.pop();)s=s.split(i).join(sq(i,t));return s+("now"===t?"?uuid="+aP():"")}NCt(t){var e;let i,s=this.CPt.HCt;for(;i=null==(e=s.match($z))?void 0:e.pop();)s=s.split(i).join(nq(i,t));return s}aW(){}hW(){}constructor(t){super(),this.IO=cq++,this.CPt=t}},dq=class extends lq{get DPt(){return this.CPt}get Nwt(){return this.CPt.oM}get Ht(){return this.QO}framesPerSecond(){return this.CPt.oM/this.CPt.oft}get wa(){return this.eu||(this.eu=Tl(this)),this.eu}constructor(t,e){super(t),this.eu=void 0,this.QO=e}},fq=class extends lq{get DPt(){return this.CPt}get Byt(){return 0}get oft(){return this.CPt.oft}get Ti(){return this.CPt.$Ct.height}get ji(){return this.CPt.$Ct.width}get $Ct(){return this.CPt.$Ct}get Ht(){return this.QO}framesPerSecond(){return this.CPt.oft}get wa(){return this.eu||(this.eu=Sl(this)),this.eu}constructor(t,e){super(t),this.eu=void 0,this.QO=e}};r();var jr=function(t){return t.NPt="alternative",t.MPt="main",t.LPt="commentary",t.BPt="",t.tW="descriptions",t.OPt="main-desc",t.FPt="translation",t}({}),_q=function(t){return t.NPt="alternative",t.MPt="main",t.LPt="commentary",t.BPt="",t.$V="captions",t.TC="sign",t.JV="subtitles",t}({}),vq=0,mq=class extends Co{get RC(){return this.VPt()}get Rt(){return this.qe}set Rt(t){this.Rt!==t&&(this.qe=t,t&&this.WPt(),this.GPt.UPt(),this._o(new bc(this)))}get wa(){return this.eu||(this.eu=yi(this)),this.eu}get Odt(){return this.HPt}get o(){return this.KCt.o}get IC(){return this.IO}get Ch(){var t;return null!=(t=this.KCt.Ch)?t:""}get CE(){return this.Rt?"enabled":"disabled"}set CE(t){"enabled"===t?this.Rt=!0:"disabled"===t&&(this.Rt=!1)}get NC(){return this.TO}get MC(){return this.Qct}set MC(t){this.Qct=t,this.GPt.UPt(),this._o(new WW(t,this))}DO(t){this.Rt=t}ZPt(t){for(const e of this.TO.lC)e===t&&this._o(new uG(e))}constructor(t,e,i,s){super(),this.TO=new gl,this.IO=vq++,this.qe=!1,this.Qct=void 0,this.KCt=e,this.GPt=i,this.HPt=new IZ(t,[]);const n=e.Z.filter((t=>!(Ms.Ys.Qs&&void 0!==s&&t.bG>s)));if(0===n.length){const t=hh(e.Z,(t=>t.bG));void 0!==t&&n.push(t)}for(const t of n)this.TO.kO(this.createQuality(t))}},gq=class extends mq{get Tw(){return Qi.vE}get Lt(){return jr.MPt}get gs(){return this.KCt.gs}get UCt(){return this.KCt}WPt(){this.GPt.XPt(this)}VPt(){const t=this.GPt.zPt;return(null==t?void 0:t.Ht)===this?t:void 0}createQuality(t){return new dq(t,this)}constructor(t,e,i){super(ee.vE,t,e,i)}},pq=class extends mq{get Tw(){return Qi.mE}get Lt(){return _q.MPt}get gs(){return""}get UCt(){return this.KCt}get rPt(){return this.KCt.rPt}WPt(){this.GPt.qPt(this)}VPt(){const t=this.GPt.YPt;return(null==t?void 0:t.Ht)===this?t:void 0}createQuality(t){return new fq(t,this)}constructor(t,e,i){super(ee.mE,t,e,i)}};function wq(t,e,i,s){if(!t)return;const n=function(t,e,i){const s=[];for(const t of e){var n;const e=null!=(n=t.mimeType)?n:"audio/mp4";var r;const i=null!=(r=t.codecs)?r:t.tracks.map((t=>t.codecs))[0];s.push(e+'; codecs="'+i+'"')}return yq(t,e,s,[],i)}(t,e?[e]:[],!s),r=function(t,e,i){const s=[];for(const t of e){var n;const e=null!=(n=t.mimeType)?n:"video/mp4";var r;const i=null!=(r=t.codecs)?r:t.tracks.map((t=>t.codecs))[0];s.push(e+'; codecs="'+i+'"')}return yq(t,e,[],s,i)}(t,i?[i]:[],!s),o=iX(n,r);return t.preferredKeySystems&&(null==o?void 0:o.cpt)&&(o.cpt=lX(o.cpt,t.preferredKeySystems)),o}function yq(t,e,i,s,n){const r=e.map((t=>t.protection)).filter(Bo);if(!r.length)return;const o=r[0].type,h=on(r,(t=>t.systems)),a=on(h,(t=>function(t,e){void 0===e&&(e=!0);const i=[],s=e?function(t){return bm.filter((e=>e.Rw===t.toLowerCase()))}(t.schemeId):function(t){return ym.filter((e=>e.Rw===t.toLowerCase()))}(t.schemeId);for(const e of s)i.push({WU:bq(t)?t.uri:void 0,cT:e,CG:void 0,IG:t.pssh?[ha(t.pssh).buffer]:[]});return i}(t,n)));return{hU:t,lpt:{RTt:o},cpt:a,ITt:i,CTt:s}}function bq(t){return t.schemeId===tm.Aw&&void 0!==t.keyFormat&&void 0!==t.keyFormatVersions}r(),r(),r();var Aq;function Sq(t){const e=t.ER,i=t.wR._B(e);return i?i.Tn(0)-e:0}Aq="Android"===Ms.ow.hw?200:300;var Tq=Ms.Ys.rp?1:.5,kq=class{Sn(){1!==this.Fa&&(this.Fa=1,this.KPt=Ms.Gp((()=>{this.jPt()}),Aq),this.QPt.TIt(this.JPt),this.WB.KR?this.$Pt.bn(Zc.UL,this.tDt):this.tDt())}RI(){0!==this.Fa&&(this.Fa=0,void 0!==this.KPt&&Ms.Hp(this.KPt),this.QPt.EIt(this.JPt),this.$Pt.vn(Zc.WL,this.eDt),this.$Pt.vn(Zc.UL,this.tDt),this.iDt=void 0,this.kB())}get sDt(){return Eq(this.nDt.zPt,this.nDt.YPt)}async jPt(){await this.rDt,this.rDt=this.oDt(),await this.rDt}hDt(t,e){const i=this.aDt(t,e),s=this.QPt.bG;for(const t of i){if(t.uDt<=s)return t}return i[i.length-1]}async oDt(){var t,e;const i=null==(t=this.nDt.zPt)?void 0:t.Ht,s=null==(e=this.nDt.YPt)?void 0:e.Ht,n=this.aDt(i,s);if(0===n.length)return void 0;const r=this.maybeSwitchToTargetQuality(n);if(r)return void await this.cDt(r);const o=this.maybeGetUpSwitch(n);o&&await this.cDt(o)}maybeSwitchToTargetQuality(t){const e=this.sDt;if(t.some((t=>xq(t,e))))return;const i=this.QPt.bG;for(const e of t){if(e.uDt<=i)return e}return t[t.length-1]}maybeGetUpSwitch(t){var e,i;const s=this.QPt.bG;var n;var r;const o=(null!=(n=null==(e=this.nDt.zPt)?void 0:e.bG)?n:0)+(null!=(r=null==(i=this.nDt.YPt)?void 0:i.bG)?r:0);let h;for(const e of t){if(e.uDt<s&&e.uDt>o){h={lDt:e,Zft:Ms.Wg()};break}}if(!this.iDt||!xq(this.iDt.lDt,null==h?void 0:h.lDt))return void(this.iDt=h);const a=Ms.Wg()-this.iDt.Zft,u=this.iDt.lDt.uDt,c=this.dDt.length>=3&&this.dDt.every((t=>t>u));if(a>1e3&&c){if(this.WB.qB.zB||Ms.Ys.$g){const t=2*this.QPt.AG;if(!(Sq(this.WB)>t))return}else{const t=_.max(2*this.QPt.AG+Tq,this.ZG.yB.minimumOffset);if(!(Sq(this.WB)>t))return void(this.fDt&&this.fDt.minimumOffset===t||(this.kB(),this.fDt={minimumOffset:t},this.ZG.AB(this.fDt)))}return this.iDt.lDt}}async cDt(t,e){void 0===e&&(e=!1),this.iDt=void 0,this.kB();const i=this.sDt;if(i._Dt===t._Dt&&i.vDt===t.vDt)return;const s=t._Dt,n=t.vDt;i.vDt&&n&&i.vDt.bG>n.bG&&e&&(this.QPt.AIt(t.uDt),this.dDt=[]),await this.nDt.mDt(n,s)}kB(){this.fDt&&(this.ZG.kB(this.fDt),this.fDt=void 0)}aDt(t,e){let i=[],s=[];var n;t&&(i=(null==(n=t.MC)?void 0:n.length)?t.MC:t.NC.lC);if(e){var r;const t=(null==(r=e.MC)?void 0:r.length)?e.MC:e.NC.lC,i=t.slice().sort(((t,e)=>t.bG-e.bG)),n=this.gDt(i);0===n.length&&t.length>0&&n.push(Ws(t,(t=>t.bG))),s=n}const o=[],h=i.length>0?i:[void 0],a=s.length>0?s:[void 0];for(const t of h)for(const e of a)o.push(Eq(t,e));return function(t){return t.sort(((t,e)=>e.uDt-t.uDt))}(o)}gDt(t){for(let e=0;e<t.length;e++){const i=t[e].$Ct;if(i.height>=this.WB.Ti&&i.width>=this.WB.ji)return t.slice(0,e+1)}return t.slice()}Xw(){this.iDt=void 0,this.$Pt.nr(),this.kB()}constructor(t,e,i,s,n){this.WB=t,this.ZG=e,this.nDt=i,this.pDt=s,this.QPt=n,this.Fa=0,this.rDt=Promise.resolve(),this.dDt=[],this.fDt=void 0,this.eDt=()=>{var t,e;if(this.pDt.uI)return;const i=null==(t=this.nDt.zPt)?void 0:t.Ht,s=null==(e=this.nDt.YPt)?void 0:e.Ht,n=Ws(this.aDt(i,s),(t=>t.uDt));n&&(ah(this.cDt(n,!0)),this.WB.qB.zB&&this.pDt.ZC())},this.tDt=()=>{this.$Pt.bn(Zc.WL,this.eDt),this.$Pt.vn(Zc.UL,this.tDt)},this.JPt=()=>{if(this.dDt.unshift(this.QPt.bG),this.dDt=this.dDt.slice(0,3),this.iDt){const t=this.iDt.lDt.uDt;this.QPt.bG<t&&(this.iDt=void 0,this.kB())}},this.$Pt=new q(this.WB)}};function Eq(t,e){var i;var s;return{_Dt:t,vDt:e,uDt:(null!=(i=null==t?void 0:t.bG)?i:0)+(null!=(s=null==e?void 0:e.bG)?s:0)}}function xq(t,e){var i,s,n,r;return void 0===t||void 0===e?t===e:(null==(i=t._Dt)?void 0:i.o)===(null==(s=e._Dt)?void 0:s.o)&&(null==(n=t.vDt)?void 0:n.o)===(null==(r=e.vDt)?void 0:r.o)&&t.uDt===e.uDt}r();var Rq=class t{static async create(e,i,s){const n=await Iq(e,i,s);return new t(n,e,i)}get mbt(){return(this.wDt.serverTimeMs+(Ms.Wg()-this.wDt.localTimeMs))/1e3}get yDt(){return(this.wDt.localTimeMs-this.wDt.serverTimeMs)/1e3}async ARt(t,e,i){for(;!i.Fw;){await ke(6e5,i);try{this.wDt=await Iq(t,e,i)}catch(t){th(t)}}}Xw(){this.GT.jw()}constructor(t,e,i){this.GT=new da,this.wDt=t,this.ARt(e,i,this.GT.Uw).catch(Tt)}};async function Iq(t,e,i){let[s,n,r]=await Cq(t,e,i);return n>20&&([s,n,r]=await Cq(t,e,i)),{localTimeMs:s,serverTimeMs:r-n/2}}async function Cq(t,e,i){const s=Ms.Wg(),n=await e.Qk({AE:xe.GET,Xu:t,Uw:i}),r=Ms.Wg()-s,o=await n.Ck(i);return[s,r,1e3*Number(o)]}var Pq=class extends pe{constructor(){super("seek")}},Dq=function(t){return t.NZ="seek",t}({}),Nq=[Ti.ho,Zc.iC,Ti.hb],Mq=class extends Co{get HC(){return this.hPt}get wR(){return this.bDt&&this.ADt?this.bDt.wR.jn(this.ADt.wR):this.bDt?this.bDt.wR:this.ADt?this.ADt.wR:se.pB()}get zPt(){return this.SDt}get YPt(){return this.TDt}get ht(){return this.cO}get rt(){return this.dO}get kDt(){return this.EDt.Ub}get W(){return this.xDt.Ub}get hI(){return this.hPt?function(t,e,i){var s;const n=null==(s=t.APt[0])?void 0:s.ER,r=t._Pt;if(void 0===n||void 0===r)return i>0&&i<cf?new se([0,i],[!0,!0]):se.pB();let o=e.OIt;if(!o){const e=BG(t.mPt).getTime()/1e3;o=n+(Date.now()/1e3-e)}return new se([o-r,o],[!0,!0])}(this.hPt,this.RDt,this.WB.ct):se.pB()}async IDt(){this.bDt&&await this.bDt.eT(0,1/0),this.ADt&&await this.ADt.eT(0,1/0)}$n(){if(!this.Sc.src)throw new A(Qa.SOURCE_INVALID,"No src property found in given source.");this.gpt||(this.gpt=this.QE(this.vW.Uw).catch(this.X6))}async QE(t){this._o(new ao);const e=this.Sc.src,i=await this.CDt.WRt(e,t);this.hPt=new uq(e,i),this.hPt.RPt&&(this.PDt=await Rq.create(this.hPt.RPt,this.fW,t)),this.DDt();const s=this.hPt.APt[this.hPt.APt.length-1];this.createTracksForPresentation(s),this.EDt.Vb(),this.UPt()}XPt(t){for(const e of this.cO.lC)e.DO(e===t)}qPt(t){for(const e of this.dO.lC)e.DO(e===t)}UPt(){const t=Fo(this.cO.lC,(t=>t.Rt)),e=Fo(this.dO.lC,(t=>t.Rt));var i;for(const t of null!=(i=null==e?void 0:e.rPt)?i:[])this.NDt.kgt({jtt:t.channel,Qtt:t.language,Ch:t.label});const s=this.gZ.hDt(t,e);ah(this.mDt(s.vDt,s._Dt))}DDt(){if(!this.hPt||"live"!==this.hPt.a0||!this.PDt)return;const t=this.hPt.APt.filter((t=>t.o===this.hPt.TPt))[0].ER,e=this.PDt.yDt+new Date(this.hPt.mPt).getTime()/1e3;this.RDt.PIt(e,t)}createTracksForPresentation(t){var e,i,s;const n=null==(e=this.Sc.hesp)?void 0:e.maxMobileBitrate;var r,o;for(const e of null!=(r=t.cPt)?r:[])this.cO.tt(new gq(e,this,n));for(const e of null!=(o=t.dPt)?o:[])this.dO.tt(new pq(e,this,n));null==(i=this.cO.fC(0))||i.DO(!0),null==(s=this.dO.fC(0))||s.DO(!0)}get WC(){return Ws([this.MDt,this.LDt].filter(Bo),(t=>t.theolive))}get BDt(){const t=this.RDt.OIt;if(void 0!==t)return t}Sn(){this.ODt=!0,this.FDt()}RI(){var t;this.ODt=!1,this.VDt().catch(this.X6),"live"===(null==(t=this.HC)?void 0:t.a0)&&(this.WDt(),this.UDt())}WDt(){this.GDt&&this.GDt.cancelDownload()}UDt(){this.HDt&&this.HDt.cancelDownload()}ZC(t){this.r8.jw(),this.r8=new da,this.o8=eg((e=>this.ZDt(t,this.o8,e)),this.r8).catch(this.X6)}async ZDt(t,e,i){if(e&&await e,await ou(this.W,i),"live"!==this.hPt.a0)throw new g("The current video source does not support Live playback.");if(J(i),await this.VDt(),J(i),this.GDt&&(this.GDt.bCt()||this.GDt.gCt!==(null!=t?t:"now"))){var s;if(this.WDt(),this.bDt){for(;this.bDt.XIt;)await ou(this.bDt.qIt,i);await this.bDt.eT(0,1/0)}null==(s=this.GDt)||s.Rb(null!=t?t:"now")}if(this.HDt&&(this.HDt.bCt()||this.HDt.gCt!==(null!=t?t:"now"))){var n;if(this.UDt(),this.ADt){for(;this.ADt.XIt;)await ou(this.ADt.qIt,i);await this.ADt.eT(0,1/0)}null==(n=this.HDt)||n.Rb(null!=t?t:"now")}this._o(new Pq),J(i),this.o8=void 0,this.FDt()}Rb(t){this.r8.jw(),this.r8=new da,this.o8=eg((e=>this.h8(t,this.o8,e)),this.r8).catch(this.X6)}async h8(t,e,i){var s,n;e&&await e,await ou(this.W,i),J(i),await this.VDt(),J(i),this.GDt&&(this.GDt.bCt()||this.GDt.gCt!==t)&&this.WDt(),this.HDt&&(this.HDt.bCt()||this.HDt.gCt!==t)&&this.UDt(),this._o(new Pq),J(i),null==(s=this.GDt)||s.Rb(t),null==(n=this.HDt)||n.Rb(t),this.o8=void 0,this.FDt()}mDt(t,e){var i,s;return(null==(i=this.GDt)?void 0:i.pat)===e&&(null==(s=this.HDt)?void 0:s.pat)===t?Promise.resolve():(this.XDt.jw(),this.XDt=new da,this.zDt=eg((i=>this.qDt(t,e,this.zDt,i)),this.XDt).catch(this.X6),this.zDt)}async qDt(t,e,i,s){i&&await i,await ou(this.EDt.Ub,s),J(s),await this.VDt(),J(s),await this.YDt(t,e),await this.KDt(t,e),J(s),this.zDt=void 0,this.FDt()}async YDt(t,e){var i,s,n;const r=null!=(n=this.BDt)?n:"now";if((null==(i=this.GDt)?void 0:i.pat)!==e){var o;const t=this.GDt&&!this.GDt.bCt(),i=null==(o=this.GDt)?void 0:o.gCt;if(this.GDt&&(await this.GDt.Xw(),this.GDt=void 0),this.bDt&&await this.bDt.qIt,e){var h,a;const s=null!=(a=null==(h=this.bDt)?void 0:h.wR)?a:se.pB(),n=t?i:s.Tn(s.V-1);this.GDt=new Kz(e,this.fW,this.edt),this.GDt.bn(Lz.iCt,(t=>this.jDt(ee.vE,t))),this.GDt.Rb(null!=n?n:r)}}if((null==(s=this.HDt)?void 0:s.pat)!==t){var u;const e=this.HDt&&!this.HDt.bCt(),i=null==(u=this.HDt)?void 0:u.gCt;if(this.HDt&&(await this.HDt.Xw(),this.HDt=void 0),this.ADt&&await this.ADt.qIt,t){var c,l;const s=null!=(l=null==(c=this.ADt)?void 0:c.wR)?l:se.pB(),n=e?i:s.Tn(s.V-1);this.HDt=new Kz(t,this.fW,this.edt),this.HDt.bn(Lz.iCt,(t=>this.jDt(ee.mE,t))),this.HDt.Rb(null!=n?n:r)}}}async KDt(t,e){const i=function(t,e,i,s,n){const r=wq(t,null==e?void 0:e.Ht.UCt.UCt,null==i?void 0:i.Ht.UCt.UCt,s),o=aX(r),h=[];e&&h.push({Mk:e.jq});i&&h.push({Mk:i.jq});return{Tw:In.wW,g4:h,sH:o,C4:n&&!s}}(this.Sc.contentProtection,e,t,this.WB.qB.zB,this.Sc.useManagedMediaSource);if(this.JG&&this.JG.dJ(i)){var s,n;const t=!(null==(s=this.GDt)?void 0:s.bCt());if(this.bDt&&t){for(;this.bDt.XIt;)await this.bDt.qIt;await this.bDt.cY()}const e=!(null==(n=this.HDt)?void 0:n.bCt());if(this.ADt&&e){for(var r,o;null==(r=this.ADt)?void 0:r.XIt;)await this.ADt.qIt;await(null==(o=this.ADt)?void 0:o.cY())}await this.JG._J(i)}else{this.WDt(),this.UDt(),this.bDt&&(await this.bDt.Xw(),this.bDt=void 0),this.ADt&&(await this.ADt.Xw(),this.ADt=void 0),this.WB.p7();try{await this.WB.nr(),this.JG=await this.WB.$n(i),this.xDt.Vb(),this.JG.h4&&this.GDt&&(this.JG.h4.bn(oe.tJ,this.Ds),this.bDt=new Nz(this.JG.h4,this.WB,e,this.NDt)),this.JG.a4&&this.HDt&&(this.JG.a4.bn(oe.tJ,this.Ds),this.ADt=new Nz(this.JG.a4,this.WB,t,this.NDt)),"live"===this.hPt.a0&&this.JG.d4(1/0)}finally{this.WB.w7()}}}FDt(){!this.ODt||this.o8||this.zDt||this.QDt||this.JDt||(this.gZ.Sn(),this.$Dt=new da,this.HDt&&this.ADt&&(this.QDt=this.tNt(this.HDt,this.ADt,this.$Dt.Uw).catch(this.X6)),this.GDt&&this.bDt&&(this.JDt=this.tNt(this.GDt,this.bDt,this.$Dt.Uw).catch(this.X6)))}async VDt(){this.gZ.RI(),this.$Dt&&(this.$Dt.jw(),this.$Dt=void 0),this.QDt&&(await this.QDt,this.QDt=void 0),this.JDt&&(await this.JDt,this.JDt=void 0)}async tNt(t,e,i){for(await this.W;t.XIt;)await ou(t.qIt,i);for(;e.XIt;)await ou(e.qIt,i);if(!t.bCt()){const i=Ms.Wg()/1e3,s="now"===t.gCt,{initialization:n,data:r,metadata:o}=await t.ACt(),h={Tw:Ce.iJ,Kk:n},a=r?{Tw:Ce.iJ,Kk:r}:void 0,u=e.wR;!Ms.Ys.ep&&!this.WB.qB.zB&&o&&u.Tn(u.V-1)>o.wit&&await e.eT(o.wit,1/0),await e.A2(h),a&&await e.g2(a,o,t.pat);const c=e.wR.iB(u);s&&c.V>0&&this.RDt.IIt(i,c.Tn(c.V-1))}for(;!t.mCt;){J(i);const s=t.ICt();await ou(e.appendStream(s,t),i)}}async Xw(){this.vW.jw(),this.gpt&&await this.gpt.catch(Tt),this.o8&&(this.r8.jw(),this.WDt(),this.UDt(),await this.o8.catch(Tt)),this.zDt&&(this.XDt.jw(),this.WDt(),this.UDt(),await this.zDt.catch(Tt)),await this.VDt(),this.GDt&&await this.GDt.Xw(),this.HDt&&await this.HDt.Xw(),this.GDt=void 0,this.HDt=void 0,this.xDt.jw(),this.EDt.jw(),this.JG&&(await this.WB.nr(),this.JG=void 0),this.bDt=void 0,this.ADt=void 0,this.WB.vn(Zc.UL,this.XB),this.WB.vn(Nq,this.updateActiveQualities),this.cO.nr(),this.SDt=void 0,this.dO.nr(),this.TDt=void 0,this.hPt=void 0,this.PDt&&(this.PDt.Xw(),this.PDt=void 0),this.ODt=!1}constructor(t,e,i,s,n,r,o,h,a,u){super(),this.ODt=!1,this.eNt=!1,this.cO=new Ke,this.dO=new Ke,this.iNt=void 0,this.SDt=void 0,this.TDt=void 0,this.EDt=new os,this.JG=void 0,this.gpt=void 0,this.xDt=new os,this.vW=new da,this.zDt=void 0,this.XDt=new da,this.o8=void 0,this.r8=new da,this.GDt=void 0,this.bDt=void 0,this.JDt=void 0,this.HDt=void 0,this.ADt=void 0,this.QDt=void 0,this.$Dt=void 0,this.XB=()=>{this.eNt=!0},this.updateActiveQualities=()=>{var t,e;const i=this.WB.ER,s=null==(t=this.bDt)?void 0:t.GIt(i),n=null==(e=this.ADt)?void 0:e.GIt(i);if(this.SDt!==s&&(this.SDt=s,s))for(const t of this.cO.lC)t.ZPt(s);if(this.TDt!==n&&(this.TDt=n,n))for(const t of this.dO.lC)t.ZPt(n)},this.jDt=(t,e)=>{const i=e.data;if(i.Tw===pn.rCt){const{hCt:e,aCt:n,oCt:r,uCt:o}=i;if(this.PDt){const i=this.PDt.mbt,s=this.WB.ER;if(this.eNt&&0!==s){const o={theolive:i-e+r-s,engine:n,distribution:i-(e+n),player:r-s};t===ee.vE?(this.LDt=o,this.RDt.LIt(this.PDt.yDt+e,r)):(this.MDt=o,this.RDt.NIt(this.PDt.yDt+e,r))}}var s;if(o)null!=this.iNt||(this.iNt=this.WB.OI(Li.eW,"timecode","timecode",void 0,!1,Lr.DEFAULT,!1,void 0)),this.iNt._W(new Le(r,r,o,!1,void 0)),Vi(this.iNt,null!=(s=this.WB.wR.Sn(0))?s:-1)}this._o(e)},this.X6=t=>{Je(t)||(this.RI(),this._o(new Na(new A(Qa.MEDIA_LOAD_ERROR,t.message))))},this.Sc=t,this.CDt=e,this.WB=i,this.fW=n,this.RDt=r,this.gZ=new kq(i,o,this,a,s),this.edt=h,this.NDt=u,this.WB.bn(Zc.UL,this.XB),this.WB.bn(Nq,this.updateActiveQualities)}};r();var Lq=class extends bT{jB(){const t=this.WB.wR;return 0===t.V?0:t.Tn(t.V-1)-this.WB.ER}ZC(){this.na.ZC()}EB(){return Cz(super.EB())}QB(){return!Ms.Ys.$g}constructor(t,e,i){super(t,e,i)}},Bq=[Ti.jy,Ti.qy,Ti.hb,Ti.Dy,Ti.Yy,Ti.ub,Ti.Iy,Ti.Ly,Ti.Ny],Oq=class extends Co{wC(){this.WB.bn(Bq,this.Ds),this.WB.bn(Zc.UL,this.IX),this.WB.bn([Ti.ho,Ti.zy],this.sNt),this.WB.bn(yo.fa,this.nNt),this.WB.bn(Ti.hb,this.pd),this.mH.bn(no,this.Ds)}gC(){this.WB.vn(Bq,this.Ds),this.WB.vn(Zc.UL,this.IX),this.WB.vn([Ti.ho,Ti.zy],this.sNt),this.WB.vn(yo.fa,this.nNt),this.WB.vn(Ti.hb,this.pd),this.mH.vn(no,this.Ds)}get ht(){return this.cO}get rt(){return this.dO}get HC(){var t,e;return null==(e=this.nDt)||null==(t=e.HC)?void 0:t.HC}get gI(){return this.WB.gI}set gI(t){this.WB.gI=t}get AI(){return!1}set AI(t){}get eH(){return this.iH}II(){return!1}SI(){return this.WB.Sa}ja(){return this.WB.fH}OI(t){return this.WB._H(t)}be(){this.WB.be()}ge(){return this.WB.ge()}NI(){}MI(){}CI(){}DI(){}get ZR(){return this.WB.ZR}set ZR(t){this.WB.ZR=t}get ER(){var t;return null!=(t=this.rNt)?t:this.WB.ER}set ER(t){this.RR(t)}RR(t,e){this.r8.jw(),this.r8=new da,this.o8=eg((e=>this.h8(t,e,this.o8)),this.r8)}get bR(){const t=this.oNt();if(t)return new Date(t.getTime()+1e3*this.ER)}set bR(t){const e=this.oNt();t&&e&&(this.ER=e.getTime()-t.getTime())}oNt(){const t=this.HC;if(!t)return;const e=new Date(t.creationDate).getTime();let i=NaN;for(const e of t.presentations)e.currentTime&&(i=e.currentTime.value/(e.currentTime.scale||1)*1e3);return S(i)?void 0:new Date(e-i)}get bt(){return this.Sc}get QR(){return this.WB.QR}set QR(t){this.WB.QR=t}get ct(){const t=this.WB.ct;return t===cf?1/0:t}get PR(){return!1}get MR(){return this.KG}get lt(){return this.YG}get OR(){return this.hNt}get WR(){return!1}get GR(){return ol({},{_O:0,vO:0,mO:0,gO:0,pO:0,wO:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}},this.WB.HR())}get qR(){return!0}get uI(){return this.cZ}get $G(){}get nt(){return this.Hl}get dI(){return this.WB.dI}get vI(){return this.WB.vI}get wR(){return this.Ckt.ks()}get Ckt(){return this.nDt?this.nDt.wR:se.pB()}get tI(){return this.WB.tI.ks()}get hI(){var t,e;return null!=(e=null==(t=this.nDt)?void 0:t.hI.ks())?e:se.pB().ks()}get KR(){return this.Xit}get GC(){return!0}get yI(){return this.pZ}get BDt(){var t;return null==(t=this.nDt)?void 0:t.BDt}get KB(){if(this.KR)return;if(!this.eNt)return;const t=this.ER,e=this.RDt.FIt(t);if(void 0===e)return;const i=this.Ckt;let s=0;if(i.V>0){const e=i.Tn(i.V-1);s=_.max(e-t,0)}return _.max(e,s)}get WC(){var t;return null==(t=this.nDt)?void 0:t.WC}get rI(){return this.WB.rI}get iI(){return this.aNt}set iI(t){this.aNt=t,this.uNt()}async uNt(){this.aNt!==el.$H&&this.nDt&&(this.nDt.$n(),this.aNt!==el.JB&&this.aNt!==el.yG||(await this.nDt.kDt,"vod"===this.nDt.HC.a0&&this.nDt.Sn()))}async Ca(t,e,i){if(J(i),await this.nr(),J(i),!FT(t))return this.KG=new A(Qa.SOURCE_INVALID,"HESP source incorrectly configured"),this.YG=gn(this.KG),this.cNt(this.KG),Promise.resolve();const s=t;this.Sc=s;const n=new lz(this.fW);this.lNt=this.dNt(t),this.ZG=new Lq(this,this.WB,this.lNt),this.ZG.Rt=!0,this.ZG.bn("latencyrecoveryseek",this.Ds),this.yI.Aa(this.ZG),this.nDt=new Mq(s,n,this.WB,this.iH,this.fW,this.RDt,this.ZG,this.edt,this,this.NDt),this.nDt.bn(Ti.Uy,this.Ds),this.nDt.bn(yo.fa,this.fNt),this.cO.vC=this.nDt.ht,this.dO.vC=this.nDt.rt,this.hH.kG(t.contentProtection),ah(this.uNt())}dNt(t){return t.latencyConfiguration?t.latencyConfiguration:Pz()}async xI(){var t;if(!this.nDt)return;this.Xit=!1,this.nDt.$n(),await this.nDt.W,this._o(new $(this.ER));const e=this.nDt.py(Dq.NZ);this.ZC(),await e,this.nDt.Sn(),await this.WB.xI(),null==(t=this.ZG)||t.Sn()}EI(){var t;this.nDt&&(this.Xit=!0,this._o(new ul(this.ER)),this.nDt.RI(),null==(t=this.ZG)||t.RI(),this.WB.EI())}ZC(){if(this.uxt)throw new g("Cannot seek while resetting");this.r8.jw(),this.r8=new da,this.o8=eg((t=>this.ZDt(this.o8,t)),this.r8)}_Nt(){var t;null==(t=this.nDt)||t.RI()}cNt(t){this._o(new Na(t)),this._Nt()}async h8(t,e,i){var s;if(this.uxt)throw new g("Cannot seek while resetting");let n=t;if(this.vNt(n),this.hI.length>0&&(n=se.Cn(this.hI).KL(n),this.vNt(n)),this.nDt){i&&(await i.catch(Tt),J(e)),(null==(s=this.ZG)?void 0:s.wB)&&this.ZG.RI();try{const t=this.WB.py(Ti.Qy,e);this.WB.Rb(n),this.nDt.Rb(n),await t}catch(t){throw th(t),this.nDt.RI(),this.mNt(),t}this.gNt()}}async ZDt(t,e){this._o(new pe("golive"));const i=this.BDt;if(this.vNt(i),this.nDt){t&&(await t.catch(Tt),J(e));try{let t,s=this.ZG.yB.targetOffset;if(await this.nDt.kDt,i&&s>=1){if(!this.ZG.QB()){s-=_.min(1,.5*s)}t=i-s}else t=this.BDt?this.BDt-.2:void 0;for(this.nDt.ZC(t);this.Ckt.V>0;)await this.nDt.py(oe.tJ,e);const n=this.Ckt;for(;0===this.Ckt.iB(n).V;)await this.nDt.py(oe.tJ,e);t=this.Ckt.Sn(this.Ckt.V-1),t=this.pNt(t),this.vNt(t);const r=this.WB.py(Ti.Qy,e);this.WB.Rb(t,!0),await r}catch(t){var s;if(Je(t))throw null==(s=this.ZG)||s.Sn(),t;throw this.nDt.RI(),await this.nDt.IDt(),this.mNt(),t}this.gNt()}}vNt(t){this.cZ=!0,this.rNt=t,this._o(new R(this.ER))}gNt(){this.cZ&&(this.rNt=void 0,this.cZ=!1,this._o(new oa(this.ER)))}mNt(){this.rNt=void 0,this.cZ=!1}pNt(t){return t}async cxt(t,e,i){var s;J(i),t&&await t.catch(Tt),e&&await e.catch(Tt),await this.NDt.nr(),null==(s=this.ZG)||s.RI(),this.nDt&&(await this.nDt.Xw(),this.nDt=void 0),J(i),await this.WB.nr(),J(i),this.WB.vH(),this.dO.nr(),this.cO.nr(),this.mNt(),this.mH.nr(),this.RDt.nr(),this.KG=void 0,this.YG=void 0,this.Xit=!0,this.eNt=!1,this.Sc=void 0,this.uxt=void 0,this.lNt=void 0}nr(){return this.r8.jw(),this.r8=new da,this.wNt.jw(),this.wNt=new da,this.uxt=this.cxt(this.o8,this.uxt,this.wNt.Uw),this.uxt}async yn(){var t,e;this.gC(),this.mH.yn(),this.Sc&&await this.nr(),this.Ro(),this.WB.wH=void 0,null==(t=this.ZG)||t.vn("latencyrecoveryseek",this.Ds),null==(e=this.ZG)||e.Xw(),await this.NDt.yn(),this.Hl.yn(),this.cO.yn(),this.dO.yn()}constructor(t,e,i,s,n){super(),this.nDt=void 0,this.cZ=!1,this.r8=new da,this.o8=void 0,this.uxt=void 0,this.wNt=new da,this.Xit=!0,this.eNt=!1,this.cO=new qo,this.dO=new qo,this.KG=void 0,this.YG=void 0,this.aNt=el.$H,this.pd=()=>{const t=this.wR;t.length>0&&this.NDt.nW(t.start(0))},this.sNt=()=>{this.WB.KR!==this.Xit&&(this.WB.KR?this.EI():this.xI().catch(Tt))},this.IX=()=>{this.eNt=!0},this.fNt=t=>{this.KG=t.errorObject,this.YG=gn(this.KG),this.cNt(this.KG)},this.nNt=t=>{this.KG=ck(t.lt),this.YG=t.lt,this.cNt(this.KG)},this.WB=t,this.mH=new q(this.WB,!0),this.fW=e,this.iH=new bz(i.Ij,i.cj.AG),this.hH=new Xh(e),this.WB.wH=this.hH,this.NDt=new xl(this.WB),this.Hl=new Iu([this.WB.nt,this.NDt.Z]),this.RDt=new Az,this.hNt=new dz(this),this.pZ=s,this.edt=n.retryConfiguration,this.wC()}},Fq=class extends Oq{_o(t){if(this.yNt){if(t.type===Ti.Qy)return void this.bNt();if(t.type===Zc.WL||t.type===Ti.Jy||t.type===Zc.UL)return void this.ANt.push(t)}super._o(t)}bNt(){this.yNt=!1,void 0!==this.SNt&&Ms.Ug(this.SNt);const t=Fo(this.ANt,(t=>t.type===Zc.UL));t&&super._o(t),En(this.ANt)}TI(){if(lV(this.WB))return this.WB.TI()}async nr(){this.TNt=!1,this.bNt(),await super.nr()}async yn(){h.removeEventListener("visibilitychange",this.kNt),this.bNt(),await super.yn(),await this.WB.Xw(),await this.bH.yH(this.ENt)}pNt(t){return Z.eg&&Z.og>=15&&Z.Kv?t+.25:t}constructor(t,e,i,s,n,r){super(t,e,i,s,r),this.TNt=!1,this.yNt=!1,this.ANt=[],this.SNt=void 0,this.kNt=()=>{const t=this.ZR||0===this.gI;"hidden"===h.visibilityState&&!this.KR&&t?(this.EI(),this.TNt=!0):"visible"===h.visibilityState&&this.TNt&&(this.yNt=!0,this.SNt=Ms.Gg((()=>{for(const t of this.ANt)super._o(t);this.SNt=void 0,this.yNt=!1}),2e3),ah(this.xI()),this.TNt=!1)},this.bH=n,this.ENt=t,Z.Bg&&h.addEventListener("visibilitychange",this.kNt)}};r();var Vq=class{get UH(){return zt.JC}async FH(t,e){return function(t){if(!t)return!1;const e=t.toLowerCase();return Cl(e,Bc.QC)||Cl(e,Bc.JC)}(t.type)}async VH(t){return hT(t)}};O(new class extends Vq{uP(t,e,i,s,n,r,o){const h=new ut(e),a=h.OH(ee.mE);return new Fq(a,i,n,r,h,s)}FH(t,e){return Ms.eR&&pb?Z.IS_IOS_CHROME||Z.Cm&&Z.Dm<6?Promise.resolve(!1):Ia(t.useManagedMediaSource)?super.FH(t,e):Promise.resolve(!1):Promise.resolve(!1)}WH(){return!1}}),r(),r();var Wq=class extends Oq{TI(){if(lV(this.WB))return this.WB.TI()}async yn(){await super.yn(),await this.bH.yH(this.WB)}constructor(t,e,i,s,n,r){super(t,e,i,s,r),this.bH=n}};Z.eg&&Z.su&&O(new class extends Vq{get UH(){return zt.wG}async FH(t,e){var i,s;if(Z.IS_IOS_CHROME)return!1;const n=await super.FH(t,e);var r;if(null==(r=null==(s=Gd())||null==(i=s.canPlayType)?void 0:i.call(s,Bc.YC))||!r||!n||!("serviceWorker"in Ll))return!1;try{const t=Ll.serviceWorker.ready;return await ng(t,1e3),!0}catch(t){return!1}}async VH(t){return!!t.fairplay&&await super.VH(t)}uP(t,e,i,s,n,r,o){if(t instanceof HTMLDivElement){const t=e.ert(ee.mE);return new Wq(t,i,n,r,e,s)}throw new A(Qa.CONFIGURATION_ERROR,"Container Div element expected.")}WH(){return!1}}),r(),r(),r(),r();var Uq="theo_live_user_id",Gq=class{incrementSequenceNumber(){this.nS+=1}get sequenceNumber(){return this.nS}constructor(t){this.externalId=t,this.id=aP(),this.userId=Hq(),this.nS=0}};function Hq(){try{const t=localStorage.getItem(Uq);if(t)return t;const e=aP();return localStorage.setItem(Uq,e),e}catch(t){return aP()}}r();var Zq=class{Sgt(t){const e=this.xNt.get(t.id);if(e)return e;const i=new Xq(t,this.fW,this.RNt);return this.xNt.set(t.id,i),i}constructor(t,e){this.fW=t,this.xNt=new Map,this.RNt=e}},Xq=class{get INt(){return Ba()-this.CNt>36e5}ir(){this.PNt=!1,this.CNt=Ba(),this.DNt=this.aTt(),this.DNt.catch((()=>this.PNt=!0))}async aTt(){const{id:t,discovery:e,devDiscovery:i}=this.zS;if(Tm(e.pathname,"manifest.json"))return function(t){return{id:{id:t.id,discovery:Ms.Ih("dev://"),devDiscovery:void 0},name:"demo",mode:"demo",status:"playing",source:{src:t.id,type:"theo.live"},customization:{autoplay:!0}}}(this.zS);let s=await this.NNt(t,e,this.MNt);if(s||void 0===i||(s=await this.NNt(t,i,this.MNt)),!s)throw new qq(t);const{mode:n,status:r,fallback:o,metadata:h}=s;if("locked"===n)throw new Yq(t);if("deleted"===r)throw new Kq(t);return{id:this.zS,name:h.name,mode:n,status:r,source:jq(s),fallback:o?await this.LNt(o,e,i,this.MNt):void 0,insights:null==h?void 0:h.insights,enhancedLogging:null==h?void 0:h.enhancedLogging,customization:null==h?void 0:h.customization,sseEndpoint:s.sseEndpoint}}async LNt(t,e,i,s){if("theo.live"!==t.type)return{src:t.src,type:t.type};let n=await this.NNt(t.src,e,s);return n||void 0===i||(n=await this.NNt(t.src,i,this.MNt)),n?jq(n):void 0}async NNt(t,e,i){try{const s=await this.fW.Qk({Xu:Ms.Ih(t,e.toString()).toString(),Jk:i});return await s.Ik()}catch(t){return}}get jtt(){return(this.PNt||this.INt)&&this.ir(),this.DNt}constructor(t,e,i){this.zS=t,this.fW=e,this.MNt=new ya,i.discoveryHeader&&this.MNt.append("x-theolive-discovery",i.discoveryHeader),this.ir()}};var zq=class extends A{constructor(t,e,i){super(t,"Could not load channel with id "+e+": "+i),this.channelId=e,this.reason=i}},qq=class extends zq{constructor(t){super(Qa.THEO_LIVE_CHANNEL_NOT_FOUND,t,"The channel could not be found")}},Yq=class extends zq{constructor(t){super(Qa.THEO_LIVE_CHANNEL_NOT_FOUND,t,"This account has been locked")}},Kq=class extends zq{constructor(t){super(Qa.THEO_LIVE_CHANNEL_NOT_FOUND,t,"The channel got deleted")}};function jq(t){var e;return{src:t.hespSrc,type:"theo.live",hlsSrc:t.hlsSrc,maxMobileBitrate:t.maxMobileBitrate,targetLatency:null==(e=t.metadata.customization)?void 0:e.targetLatency,contentProtection:t.drmConfig?Qq(t.drmConfig):void 0}}function Qq(t){const{integration:e,widevine:i,playready:s,fairplay:n}=t;return ol({integration:e},i&&{widevine:{licenseAcquisitionURL:i.licenseUrl}},s&&{playready:{licenseAcquisitionURL:s.licenseUrl}},n&&{fairplay:{licenseAcquisitionURL:n.licenseUrl,certificateURL:n.certificateUrl}})}function Jq(t,e,i){return{id:t,discovery:Ms.Ih(t,e),devDiscovery:i?Ms.Ih(t,i):void 0}}r(),r();var Sr=function(t){return t.STARTING="s",t.PLAYING="p",t.SEEKING="k",t.REBUFFERING="r",t.PAUSED="a",t.ENDED="e",t.QUIT="q",t}({}),$q=function(t){return t.MANIFEST="m",t.AUDIO="a",t.VIDEO="v",t.OTHER="o",t}({});function Wn(t){return 100*_.round(t/100)}function tY(t){const e=t.xR(),i=t.yR();for(let t=0;t<i.length;t++)if(i.start(t)<=e&&e<=i.end(t))return 1e3*(i.end(t)-e);return 0}function ft(t){return Fo(t.lC,(t=>t.Rt))}function eY(t){return t.NC.fC(0)}function iY(t){return t.NC.fC(t.NC.V-1)}r(),r();var us=class t{static starting(e,i,s){return new t(Sr.STARTING,e,i,s)}static playing(e){return new t(Sr.PLAYING,e)}static seeking(e,i){return new t(Sr.SEEKING,e,i)}static rebuffering(e,i){return new t(Sr.REBUFFERING,e,i)}static paused(e){return new t(Sr.PAUSED,e)}static ended(e){return new t(Sr.ENDED,e)}static quit(e){return new t(Sr.QUIT,e)}get ct(){return Date.now()-this.BNt}ONt(){const t=this.na.XX.cj.bG,e=this.na.yI.KB,i=tY(this.na);t>0&&void 0!==i&&void 0!==e&&(this.FNt+=1,this.VNt=this.WNt(this.VNt,i),this.UNt=this.WNt(this.UNt,1e3*this.na.yI.kd.targetOffset),this.tH=this.WNt(this.tH,1e3*e),this.GNt=this.WNt(this.GNt,t/1e3))}WNt(t,e){return t+(e-t)/this.FNt}uP(){const t={sta:this.Sp,ts:this.BNt,"theo-vt":this.HNt,"theo-at":this.ZNt,"theo-d":this.ct,"theo-r":this.lf};return this.FNt>0?ol({},t,{bl:Wn(this.VNt),tbl:Wn(this.UNt),ltc:Wn(this.tH),mtp:Wn(this.GNt),"theo-w":this.FNt}):t}XNt(){return new t(this.Sp,this.na,this.lf)}constructor(t,e,i,s){var n,r,o,h;this.BNt=Date.now(),this.VNt=0,this.UNt=0,this.tH=0,this.GNt=0,this.FNt=0,this.Sp=t,this.na=e,this.HNt=null==(r=ft(this.na.rt))||null==(n=r.RC)?void 0:n.o,this.ZNt=null==(h=ft(this.na.ht))||null==(o=h.RC)?void 0:o.o,this.lf=i,this.YG=s}},sY=class{zNt(){var t;const e=this.na.yI.KB,i=tY(this.na),s=this.na.XX.cj.bG;return nY({bl:i?Wn(i):void 0,tbl:Wn(1e3*this.na.yI.kd.targetOffset),ltc:e?Wn(e):void 0,mtp:s?Wn(s/1e3):void 0,sta:null==(t=this.qNt)?void 0:t.Sp,su:!this.eNt||void 0,"theo-sq":this.YNt.sequenceNumber})}KNt(t){var e,i;const s=function(t,e){switch(e){case $q.VIDEO:return ft(t.rt);case $q.AUDIO:return ft(t.ht)}}(this.na,t);return nY({br:(null==s||null==(e=s.RC)?void 0:e.bG)?Wn((null==s||null==(i=s.RC)?void 0:i.bG)/1e3):void 0,ot:t,tb:s?Wn(iY(s).bG/1e3):void 0,lb:s?Wn(eY(s).bG/1e3):void 0})}jNt(){return nY({"theo-cw":this.na.we.clientWidth,"theo-ch":this.na.we.clientHeight})}QNt(){var t;return nY({sf:"e",sid:this.YNt.id,st:"l",v:2,"theo-eid":null==(t=this.YNt.externalId)?void 0:t.substring(0,128),"theo-cn":this.JNt.name.substring(0,128),"theo-v":"9.3.1","theo-t":"web","theo-u":this.YNt.userId})}$Nt(){const t={"CMCD-States":btoa(JSON.stringify(this.tMt))};return this.tMt=[],t}eMt(t){this.qNt&&this.tMt.push(this.qNt.uP()),this.qNt=t}destroy(){this.iMt(),s.removeEventListener("beforeunload",this.iMt),this.na.vn(Zc.UL,this.XB),this.na.vn(Zc.WL,this.ZB),this.na.vn(Ti.zy,this.sMt),this.na.OR.vn("latencyrecoveryseek",this.nMt),this.na.OR.vn("golive",this.rMt),this.na.rt.vn(Se.VI,this.UG),this.na.ht.vn(Se.VI,this.UG),this.na.rt.lC.forEach((t=>t.vn(No.hC,this.Zr))),this.na.ht.lC.forEach((t=>t.vn(No.hC,this.Zr))),this.na.Ost.removeEventListener("intenttofallback",this.oMt),this.na.Ost.removeEventListener("publicationloadstart",this.hMt),this.na.Ost.removeEventListener("publicationoffline",this.aMt),this.na.XX.sj(this.uMt),Ms.Hp(this.cMt)}constructor(t,e,i){this.tMt=[],this.eNt=!1,this.GX=!1,this.oMt=()=>{var t;this.eMt(us.starting(this.na,"fallback",null==(t=this.na.LR())?void 0:t.message))},this.hMt=()=>{this.eMt(us.starting(this.na,"loadChannel"))},this.aMt=()=>{this.eMt(us.ended(this.na))},this.UG=t=>{t.Ht.bn(No.hC,this.Zr)},this.Zr=()=>{var t,e,i,s;const n=null==(e=ft(this.na.rt))||null==(t=e.RC)?void 0:t.o,r=null==(s=ft(this.na.ht))||null==(i=s.RC)?void 0:i.o;n&&r&&(this.qNt&&this.qNt.Sp===Sr.PLAYING&&this.qNt.HNt===n&&this.qNt.ZNt===r||this.eMt(us.playing(this.na)))},this.XB=()=>{this.eNt=!0,this.GX=!1,this.eMt(us.playing(this.na))},this.nMt=()=>{this.eNt&&!this.GX&&(this.GX=!0,this.eMt(us.seeking(this.na,"latencyRecovery")))},this.rMt=()=>{this.eNt&&!this.GX&&(this.GX=!0,this.eMt(us.seeking(this.na,"goLive")))},this.ZB=()=>{this.na.uI||this.eMt(us.rebuffering(this.na,"visible"===h.visibilityState?void 0:"invisible"))},this.sMt=()=>{this.eMt(us.paused(this.na))},this.uMt=t=>{const e=Ms.Ih(t.url),i=function(t){const{pathname:e}=t;if(Tm(e,"manifest.json"))return $q.MANIFEST;if(Ga(e,"/video/"))return $q.VIDEO;if(Ga(e,"/audio/"))return $q.AUDIO;return $q.OTHER}(e);if("o"===i)return;this.YNt.incrementSequenceNumber();let s=ol({},t.headers,{"CMCD-Request":this.zNt(),"CMCD-Object":this.KNt(i),"CMCD-Status":this.jNt(),"CMCD-Session":this.QNt()});i===$q.VIDEO&&Tm(e.pathname,".hspc")&&this.qNt&&(this.eMt(this.qNt.XNt()),s=ol({},s,this.$Nt())),t.redirect(ol({},t,{headers:s}))},this.iMt=()=>{this.qNt&&(this.tMt.push(this.qNt.uP()),this.qNt=void 0),this.tMt.push(us.quit(this.na).uP()),ah(this.na.fR.Qk({Xu:this.lMt,Jk:this.$Nt(),DE:!0}))},this.na=t,this.JNt=e,this.YNt=i,this.lMt=Ms.Ih("bye",e.source.src).href,s.addEventListener("beforeunload",this.iMt),this.na.bn(Zc.UL,this.XB),this.na.bn(Zc.WL,this.ZB),this.na.bn(Ti.zy,this.sMt),this.na.OR.bn("latencyrecoveryseek",this.nMt),this.na.OR.bn("golive",this.rMt),this.na.XX.tj(this.uMt),this.na.rt.bn(Se.VI,this.UG),this.na.ht.bn(Se.VI,this.UG),this.na.Ost.addEventListener("intenttofallback",this.oMt),this.na.Ost.addEventListener("publicationloadstart",this.hMt),this.na.Ost.addEventListener("publicationoffline",this.aMt),this.qNt=us.starting(this.na,"loadchannel"),this.cMt=Ms.Gp((()=>{var t;null==(t=this.qNt)||t.ONt()}),1e3)}};function nY(t){return w.keys(t).map((e=>function(t,e){switch(typeof e){case"boolean":return e?t:t+"=false";case"number":return t+"="+e;case"string":return t+'="'+e+'"';default:return}}(e,t[e]))).filter(Boolean).sort().join(",")}r();var rY=class extends pe{constructor(t){super("publicationloadstart"),this.publicationId=t}},oY=class extends pe{constructor(t){super("publicationoffline"),this.publicationId=t}},hY=class extends pe{constructor(t,e){super("publicationloaded"),this.publicationId=t,this.channelName=e}},aY=class extends pe{constructor(){super("intenttofallback")}},uY=class extends pe{constructor(){super("enterbadnetworkmode")}},cY=class extends pe{constructor(){super("exitbadnetworkmode")}},lY=class extends Co{get wa(){return this.eu||(this.eu=function(t){return{addEventListener(e,i){t.bn(e,i)},removeEventListener(e,i){t.vn(e,i)},get badNetworkMode(){return t.dMt},set badNetworkMode(e){t.dMt=e},preloadPublications:async e=>(await t.fMt(e)).map((t=>({name:t.name})))}}(this)),this.eu}get dMt(){return this.na.dMt}set dMt(t){this.na.dMt=t}fMt(t){return this.na.fMt(t)}constructor(t){super(),this.na=t}};var dY=8e5,fY=class extends ic{_Mt(){this.na.OR.bn("latencyrecoveryseek",this.nMt),this.na.rt.bn(Se.VI,this.UG)}vMt(){this.na.OR.vn("latencyrecoveryseek",this.nMt),this.na.rt.vn(Se.VI,this.UG)}BI(t){return this.ODt?t.type===Zc.UL?(void 0!==this.mMt?(Ms.Ug(this.mMt),this.mMt=void 0,this.eNt||this._o(new ko(this.xR()))):this._o(new ko(this.xR())),this.eNt=!0,!0):t.type===Zc.WL?(this.mMt||(this.mMt=Ms.Gg((()=>{this._o(new za(this.xR())),this.mMt=void 0}),100)),!0):"error"===t.type?(ah(this.gMt()),!0):super.BI(t):super.BI(t)}Fst(){return this.pMt.wa}get dMt(){return this.wMt}set dMt(t){this.ODt&&(t?this.yMt():this.bMt())}yMt(){if(this.wMt)return;if(this.wMt=!0,this.pMt._o(new uY),0===this.na.rt.V)return;const t=this.rt.fC(0),e=hh(t.NC.lC,(t=>t.bG));var i;(null!=(i=e.Myt)?i:e.bG)<dY?(t.MC=[e],Promise.resolve().then((()=>t.MC=t.NC.lC.slice()))):this.bMt()}bMt(){if(!this.wMt)return;if(this.wMt=!1,this.pMt._o(new cY),0===this.na.rt.V)return;const t=this.na.rt.fC(0);var e;const i=_Y(null!=(e=t.MC)?e:t.NC.lC);t.MC=i.length>0?i:_Y(t.NC.lC)}fMt(t){return Promise.all(t.map((async t=>{const e=this.AMt.Sgt(Jq(t,this.SMt.discoveryUrl,this.SMt.devDiscoveryUrl));return await ou(e.jtt,this.GT.Uw)})))}addSseEndpointToSource(t){var e;if(t&&(null==(e=this.Sc)?void 0:e.ads))for(const e of this.Sc.ads){var i;if("theoads"===e.integration)null!=(i=e).sseEndpoint||(i.sseEndpoint=t)}}async Ca(t,e){var i;this.ODt=!1;for(const s of null!=(i=null==t?void 0:t.sources)?i:[]){if(_o(s)&&s.type===Bc.tP){if(void 0===s.src)continue;this._Mt(),this.ODt=!0,this.pMt._o(new rY(s.src));const i=Jq(s.src,this.SMt.discoveryUrl,this.SMt.devDiscoveryUrl),n=this.pMt.py("publicationloaded");try{this.Sc=t,this.tZ=s,this.TMt=this.AMt.Sgt(i);const n=await this.TMt.jtt;this.addSseEndpointToSource(n.sseEndpoint);const{enhancedLogging:r}=n;(null==r?void 0:r.enabled)&&_.random()<=r.percentage&&this.na.XX.tj(this.kMt),this.SMt.analyticsEnabled&&"theo.live"===n.source.type&&(this.EMt=new sY(this,n,this.YNt)),await ou(this.xMt(this.na.SO),e)}catch(t){throw this.w9(),this.dispatchErrorEvent(t),t}return void await ou(n,e).catch(th)}if("web"===Xt.Pv&&(null==t?void 0:t.contentProtection)&&(!_o(s)||s.type!==Bc.JC)){const t=new A(Qa.CONFIGURATION_ERROR,"Content protection is not supported for this source type");throw this.dispatchErrorEvent(t),t}}return await super.Ca(t,e)}async xMt(t){if(this.w9(),!this.TMt)return;const{source:e}=await this.TMt.jtt,i=await this.RMt(e);if("live"===i)if("primary"===this.IMt)try{await this.CMt(t)}catch(e){await this.PMt(t)}else await this.PMt(t);else if("offline"===i)await this.aMt();else try{await this.CMt(t)}catch(t){await this.aMt()}}async RMt(t){try{const e=await this.na.fR.Qk({Xu:t.src});return e.Yk>=200&&e.Yk<300?"live":404===e.Yk||503===e.Yk?"offline":"error"}catch(t){return"error"}}async PMt(t){if(!this.TMt)return;const e=await this.TMt.jtt;this.IMt="primary",this.TJ(e.source,e.name,t)}async aMt(){if(!this.TMt)return;const t=await this.TMt.jtt;this.pMt._o(new oY(t.id.id)),this.DMt=Ms.Gg((()=>this.xMt(this.na.SO)),15e3)}TJ(t,e,i){var s,n,r;const o=this.TMt.zS.id;var h;const a=_c({sources:[{type:vY(t.type),src:t.src,contentProtection:t.contentProtection,useManagedMediaSource:!0,latencyConfiguration:null!=(h=null==(s=this.tZ)?void 0:s.latencyConfiguration)?h:mY(t.targetLatency),hesp:{maxMobileBitrate:t.maxMobileBitrate}},t.hlsSrc?{type:"application/x-mpegurl",src:t.hlsSrc,contentProtection:t.contentProtection}:void 0].filter(Bo),ads:this.eNt?[]:null==(n=this.Sc)?void 0:n.ads,blockContentIfAdError:null==(r=this.Sc)?void 0:r.blockContentIfAdError,streamType:"live"});a.sources[0].bypassLicense=!0,this.na.Ca(a,(new da).Uw).then((()=>{this.pMt._o(new hY(o,e)),i&&this.na.xI()})).catch(this.dispatchErrorEvent)}async CMt(t){if(this.pMt._o(new aY),!await this.NMt())throw new g("fallback not live");await this.MMt(t)}async MMt(t){var e;const i=await(null==(e=this.TMt)?void 0:e.jtt);(null==i?void 0:i.fallback)&&(this.IMt="fallback",this.TJ(i.fallback,i.name,t))}async NMt(){var t,e;const i=await(null==(t=this.TMt)?void 0:t.jtt);if(!(null==(e=this.SMt)?void 0:e.fallbackEnabled)||!(null==i?void 0:i.fallback))return!1;const s=await this.na.fR.Qk({Xu:i.fallback.src});return s.Yk>=200&&s.Yk<300}dispatchErrorEvent(t){if(t instanceof A)return this._o(new Na(t));this._o(new Na(new A(Qa.THEO_LIVE_UNKNOWN_ERROR,t.message,t)))}async w9(){await this.na.RI(),void 0!==this.DMt&&(Ms.Ug(this.DMt),this.DMt=void 0)}RI(){var t;return this.GT.jw(),this.GT=new da,this.vMt(),void 0!==this.mMt&&(Ms.Ug(this.mMt),this.mMt=void 0),this.ODt=!1,this.eNt=!1,null==(t=this.EMt)||t.destroy(),this.EMt=void 0,this.Sc=void 0,this.tZ=void 0,this.TMt=void 0,this.IMt=void 0,this.LMt=[],this.na.XX.sj(this.kMt),this.wMt&&this.bMt(),super.RI()}async yn(t){var e;this.GT.jw(),void 0!==this.mMt&&(Ms.Ug(this.mMt),this.mMt=void 0),this.Ro(),this.vMt(),null==(e=this.EMt)||e.destroy(),this.na.OR.vn("latencyrecoveryseek",this.nMt),await super.yn(t)}constructor(t,e){var i,s;super(t,e),this.ODt=!1,this.GT=new da,this.mMt=void 0,this.eNt=!1,this.LMt=[],this.wMt=!1,this.UG=t=>{const e=t.Ht;var i;e.bn(No.hC,this.Zr);const s=_Y(null!=(i=e.MC)?i:e.NC.lC);e.MC=s.length>0?s:_Y(e.NC.lC)},this.Zr=t=>{const e=t.pat;var i;(!e||(null!=(i=e.Myt)?i:e.bG)>=dY)&&this.bMt()},this.nMt=async()=>{this.yMt(),this.LMt.push(Ms.Wg()),this.LMt=this.LMt.filter((t=>Ms.Wg()-t<=3e5)),this.LMt.length>=3&&(this.LMt=[],await this.xMt(!0))},this.gMt=async()=>{if(this.TMt){if("demo"===(await this.TMt.jtt).mode){this.TMt.ir();if("playing"!==(await this.TMt.jtt).status)return void this._o(new Na(new A(Qa.THEO_LIVE_END_OF_DEMO,"This demo channel has been stopped automatically after 5 minutes")))}await this.xMt(!0)}},this.kMt=t=>{if("manifest"===t.type||"segment"===t.type||""===t.type){const e=Ms.Ih(t.url);e.searchParams.append("enhancedLogging","true"),t.redirect({url:e.toString()})}},this.pMt=new lY(this);const n=t.kd.theoLive;var r,o,h;this.SMt={sessionId:null!=(r=null==n?void 0:n.sessionId)?r:aP(),userId:null!=(o=null==n?void 0:n.userId)?o:Hq(),externalSessionId:null==n?void 0:n.externalSessionId,analyticsEnabled:!1!==(null==n?void 0:n.analyticsEnabled),fallbackEnabled:!1!==(null==n?void 0:n.fallbackEnabled),discoveryUrl:null!=(h=null==n?void 0:n.discoveryUrl)?h:"https://discovery.theo.live/channels/",devDiscoveryUrl:undefined},this.YNt=new Gq(null==(i=this.SMt)?void 0:i.externalSessionId),this.AMt=new Zq(t.fR,{discoveryHeader:null==(s=this.SMt)?void 0:s.discoveryHeader}),this.na.OR.bn("latencyrecoveryseek",this.nMt)}};function _Y(t){return t.filter((t=>{var e;return(null!=(e=t.Myt)?e:t.bG)>=dY}))}function vY(t){switch(t){case"theo.live":return"application/vnd.theo.hesp+json";case"hls":return"application/x-mpegurl";case"dash":return"application/dash+xml";default:throw new g("Unknown source type: "+t)}}function mY(t){return void 0===t?Pz():{minimumOffset:t-yT,targetOffset:t,maximumOffset:t+yT,forceSeekOffset:t+2.5,minimumPlaybackRate:At,maximumPlaybackRate:mt}}cF((t=>new fY(t)),rh.au),r(),r(),r();var gY=Zl(Yl());r(),r(),r();var pY=class extends Co{get xN(){return this.BMt}ir(t,e){this.jA=t,this.BMt=e,this.eu&&this._o(new lH(this.eu))}get wa(){var t;return null!=(t=this.eu)?t:this.eu=this.ka()}get o(){return this.jA.id}get IC(){return this.IO}get bG(){return this.jA.bitrate}get Myt(){}get Jrt(){return""}get Ch(){return""}get Fyt(){return""}get trt(){return!0}get Lyt(){}hW(){throw new g("Method not implemented.")}aW(){throw new g("Method not implemented.")}yn(){this.Ro()}constructor(t,e){super(),this.IO=mk(),this.eu=void 0,this.jA=t,this.BMt=e}},wY=class extends pY{ka(){return Sl(this)}get oft(){return 0}get ji(){return this.jA.targetWidth}get Ti(){return this.jA.targetHeight}get Byt(){return 0}constructor(t,e){super(t,e)}};r();var yY=class extends Co{get Rt(){return!0}set Rt(t){}get wa(){var t;return null!=(t=this.eu)?t:this.eu=yi(this)}DO(t){this.Rt=t}get Odt(){}get Lt(){return this.r5}get o(){return this.zS||"millitrack"}get IC(){return this.IO}get Ch(){return""}get gs(){return""}get CE(){return this.Rt?"enabled":"disabled"}set CE(t){this.DO("enabled"===t)}get RC(){}get NC(){return this.TO}get MC(){return this.OMt}set MC(t){if(this.OMt=t,this.Rt){const e=1===(null==t?void 0:t.length)?t[0].xN:void 0;this.FMt(e)}this._o(new WW(this.TO.lC.slice(),this)),((null==t?void 0:t.length)||this.TO.V)&&this._o(new uG((null==t?void 0:t[0])||this.TO.fC(0)))}get DC(){}yn(){this.Ro();for(const t of this.TO.lC)t.yn();this.TO.nr()}constructor(t,e){super(),this.IO=oi(),this.TO=new gl,this.zS=t,this.r5=e}},bY=class extends yY{ir(t){for(const e of t.active){const i=Fo(t.layers,(t=>t.encodingId===e.id)),s=Fo(this.TO.lC,(t=>t.o===e.id));s?s.ir(e,i):this.TO.kO(new wY(e,i))}this._o(new Zs(this))}get Tw(){return ee.mE}FMt(t){var e;null==(e=this.VMt)||e.WMt(t)}yn(){this.VMt=void 0,super.yn()}constructor(t,e,i){super(t,e),this.VMt=i}};r();var AY=class{ir(t){this.UMt=t}get bG(){var t,e,i,s,n;var r;return(null!=(n=null==(e=this.UMt)||null==(t=e.video.inbounds)?void 0:t.reduce(((t,e)=>t+e.bitrateBitsPerSecond),0))?n:0)+(null!=(r=null==(s=this.UMt)||null==(i=s.audio.inbounds)?void 0:i.reduce(((t,e)=>t+e.bitrateBitsPerSecond),0))?r:0)}get AG(){var t,e;return null!=(e=null==(t=this.UMt)?void 0:t.currentRoundTripTime)?e:0}SG(t){}};r(),r();var SY=class extends pY{ka(){return Tl(this)}get Nwt(){return this.GMt}constructor(t,e){super(t,e),this.GMt=0}},TY=class extends yY{ir(t){for(const e of t.active){const i=Fo(t.layers,(t=>t.encodingId===e.id)),s=Fo(this.TO.lC,(t=>t.o===e.id));s?s.ir(e,i):this.TO.kO(new SY(e,i))}this._o(new Zs(this))}get Tw(){return ee.vE}FMt(t){var e;null==(e=this.VMt)||e.HMt(t)}yn(){this.VMt=void 0,super.yn()}constructor(t,e,i){super(t,e),this.VMt=i}};r();var kY=class extends Le{ka(){return function(t){return Jr(Ut(t),{get mid(){return t.qV.mid},get uuid(){return t.qV.uuid},get timecode(){return t.qV.timecode},get unregistered(){return t.qV.unregistered}})}(this)}constructor(t,e){super(t,t,void 0,!1),this.qV=e}};r();var EY=[Ti.ho,Ti.zy,Zc.UL,Ti.hb,Ti.qy,Ti.Uy,Ti.Jy,Ti.Qy,Ti.Dy,Ti.Yy,Ti.ub,Ti.Iy,Ti.jy,Ti.Ey,Ti.Ty,Ti.Ly,Ti.Ny],xY=["active","inactive","stopped","vad","layers","migrate","viewercount"],RY=class extends Co{WMt(t){var e;null==(e=this.Nf)||e.select(t).catch(this.ewt)}HMt(t){var e;null==(e=this.Nf)||e.select(t).catch(this.ewt)}get AI(){return!1}TI(){return this.WB.TI()}get ht(){return this.cO}get wR(){return this.WB.wR.ks()}get bR(){return this.WB.bR}set bR(t){}get bt(){return this.Sc}get ER(){return this.WB.ER}set ER(t){this.RR(t)}RR(t,e){}get ct(){return this.WB.ct}get PR(){return this.WB.PR}get lt(){return this.YG}get MR(){return this.KG}get OR(){}get WR(){return this.WB.WR}get GR(){var t,e;const i=this.ZMt,s=null==i||null==(t=i.video.inbounds)?void 0:t[0],n=null==i||null==(e=i.audio.inbounds)?void 0:e[0];var r,o,h,a;return{gO:this.gZ.cj.bG,_O:null!=(r=null==s?void 0:s.framesDropped)?r:0,vO:0,mO:null!=(o=null==s?void 0:s.framesReceived)?o:0,pO:(null!=(h=null==s?void 0:s.totalBytesReceived)?h:0)+(null!=(a=null==n?void 0:n.totalBytesReceived)?a:0),wO:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}}}get ZR(){return this.WB.ZR}set ZR(t){this.WB.ZR=t}get qR(){var t,e;return null!=(e=null==(t=this.Nf)?void 0:t.isActive())&&e}get KR(){return this.WB.KR}get QR(){return 1}set QR(t){}get tI(){return this.WB.tI.ks()}get iI(){return el.$H}set iI(t){}get rI(){return this.WB.rI}get hI(){return this.WB.hI.ks()}get uI(){return this.WB.uI}get $G(){return this.WB.$G}get nt(){return this.WB.nt}get dI(){return this.WB.dI}get rt(){return this.dO}get vI(){return this.WB.vI}get gI(){return this.WB.gI}set gI(t){this.WB.gI=t}get yI(){return this.pZ}get eH(){return this.iH}get KB(){return this.pZ.KB}ge(){this.WB.ge()}be(){this.WB.be()}async xI(){this.$n(),await this.WB.xI()}EI(){this.WB.EI()}async nr(){var t;this.Sc=void 0,this.GT.jw(),null==(t=this.Nf)||t.stop(),this.Nf=void 0,this.gpt&&(await this.gpt.catch(Tt),this.gpt=void 0),this.XMt=void 0,await this.WB.nr(),this.zMt=void 0,this.qMt=0,this.WB.vH();for(const t of this.dO.lC)t.yn();this.cO.nr(),this.dO.nr()}async yn(){this.Ro(),await this.nr(),this.cO.yn(),this.dO.yn(),this.mH.yn(),this.WB.vn(EY,this.Ds),this.WB.vn(yo.fa,this.Ss),await this.mZ.yH(this.WB)}async Ca(t,e,i){J(i),this.qEt();const s=t;this.Sc=s,this.GT=new da,s.apiUrl&&gY.Director.setEndpoint(s.apiUrl);this.Nf=new gY.View(void 0,(()=>gY.Director.getSubscriber({streamName:s.src,streamAccountId:s.streamAccountId,subscriberToken:s.subscriberToken})),void 0,!0),this.YMt=ol({},s.connectOptions,{events:xY}),this.KMt()}$n(){if(void 0!==this.gpt)return;const t=this.Nf;void 0!==t&&(this.gpt=this.QE(t,this.YMt,this.GT.Uw).catch(this.ewt))}async QE(t,e,i){J(i);try{await ou(t.connect(e),i),t.webRTCPeer.initStats({autoInitStats:!0,statsIntervalMs:1e3})}catch(e){th(e),function(t){return V(t)&&"FetchError"===t.name}(e)&&400===e.status&&(Ms.Vp("[THEOplayer] Millicast connect error, reconnecting.",e),await ou(t.reconnect(),i)),this.BH(new A(Qa.NETWORK_ERROR,e.message,e))}}async jMt(t,e){J(e);try{this.WB.p7(),this.XMt=t,await this.WB.nr(),await this.WB.$n({Tw:In.pW,VC:"",PJ:t,Mk:Bc.$C,sH:[]})}finally{this.WB.w7()}}KMt(){var t;const e=this.Nf;e.on("track",(t=>this.QMt(t))),e.on("broadcastEvent",(t=>this.JMt(t))),e.webRTCPeer.on("stats",(t=>{this.ZMt=t,this.iH.ir(t)})),(null==(t=this.YMt)?void 0:t.metadata)&&e.on("metadata",(t=>this.$Mt(t)))}QMt(t){const e=this.cO.V>0,i=this.dO.V>0,s=e&&!i;if(i&&t.track.kind===ee.mE||s&&t.track.kind===ee.vE){const e=t.streams[0];if(s){const t=e.getVideoTracks().slice();for(const i of t)e.removeTrack(i)}this.jMt(e,this.GT.Uw).catch(this.ewt)}}JMt(t){switch(t.name){case"active":{this._o(new YZ);const e=t.data;for(const t of e.tracks)t.media===ee.mE?this.dO.tt(new bY(t.trackId,this.dO.V?_q.NPt:_q.MPt,this)):t.media===ee.vE&&this.cO.tt(new TY(t.trackId,this.cO.V?jr.NPt:jr.MPt,this));break}case"inactive":this._o(new un),this.dO.nr(),this.cO.nr();break;case"stopped":this._o(new un);break;case"viewercount":default:break;case"layers":{const e=t.data;if(0===this.dO.V){const t=new bY("",_q.MPt,this);t.ir(e.medias[0]),this.dO.tt(t)}else{const t=Fo(this.dO.lC,(t=>t.Lt===_q.MPt));null==t||t.ir(e.medias[0])}break}}}$Mt(t){let e=this.zMt;void 0===e&&(e=this.WB.OI(Li.eW,void 0,void 0,void 0,void 0,Lr.MILLICAST),e.CE=bh.LC,this.zMt=e);const i=this.ER,s=_.max(0,i-10);this.qMt<s&&(Vi(e,s),this.qMt=s);const n=new kY(i+.001,t);e._W(n)}BH(t){this.YG||(ah(this.nr()),this.YG=gn(t),this.KG=t,this._o(new Na(t)))}qEt(){this.YG=void 0,this.KG=void 0}II(){return!1}CI(){}DI(){}NI(){this.WB.NI()}MI(){const t=this.XMt;void 0!==t&&this.jMt(t,this.GT.Uw).catch(this.ewt)}SI(){return this.WB.Sa}ja(){return this.WB.fH}OI(t){return this.WB._H(t)}constructor(t,e,i){super(),this.mZ=t,this.gZ=e,this.pZ=i,this.GT=new da,this.gpt=void 0,this.XMt=void 0,this.dO=new Ke,this.cO=new Ke,this.qMt=0,this.iH=new AY,this.Ss=t=>{this.BH(ck(t.lt))},this.ewt=t=>{Je(t)||this.BH(new A(Qa.MEDIA_DECODE_ERROR,t.message,t))},this.WB=this.mZ.OH(ee.mE),this.mH=new q(this.WB,!0),this.WB.bn(EY,this.Ds),this.WB.bn(yo.fa,this.Ss),this.mH.bn(no,this.Ds)}};O(new class{get UH(){return zt.$C}uP(t,e,i,s,n,r,o,h){return new RY(e,n,r)}FH(t,e){return t.type===Bc.$C}async VH(t){let e=await hT(t);return e&&(e=Boolean(t.widevine||t.fairplay)),e&&!1}WH(){return!1}}),r(),r(),r(),r();var qt=function(t){return t.tLt="currentbufferingrenditionchange",t.eLt="iLt",t.sLt="nLt",t.rLt="oLt",t}({});r(),r();var IY=class{constructor(t,e){var i,s;this.Jrt=void 0,this.IC=mk(),this.hLt=e,this.Tw=t.Tw,this.aLt=t.aLt,this.uLt=t.uLt,this.cLt=t.cLt,this.l=t.l,this.gs=t.gs,this.lLt=t.lLt,this.dLt=t.dLt,this.fLt=void 0===t.Fyt,this._Lt=null!=(s=null==(i=t._Lt)?void 0:i.split(","))?s:[]}};function tt(t,e){return t.Tw===e.Tw&&(t.l===e.l||!(!t.aLt||!e.aLt))}function CY(t,e){return void 0!==t&&void 0!==e&&PY(t,e)}function PY(t,e){return t.hLt===e.hLt}function DY(t,e){return PY(t,e)&&t.lLt===e.lLt}function NY(t,e){for(const i of t)if(DY(i,e))return!0;return!1}var MY=class extends Co{get DC(){return this.vLt}get Rt(){const t=this.mLt();if(!t)return!1;for(const e of this.NC.lC)if(e.gLt===t)return!0;return!1}set Rt(t){if(t!==this.Rt)if(t){var e;let t=null==(e=this.NC.fC(0))?void 0:e.gLt;const i=this.na.pLt;for(const e of this.NC.lC)if(e.wLt===i){t=e.gLt;break}this.yLt(t)}else this.yLt(void 0)}get RC(){if(!this.Rt)return;const t=this.na.bLt;for(const e of this.NC.lC)if(NY(t,e.gLt))return e}get wa(){return this.eu||(this.eu=yi(this)),this.eu}get o(){return this.IO.toString()}get IC(){return this.IO}get Ch(){return this.CO}set Ch(t){t!==this.CO&&(this.CO=t,this._o(new Zs(this)))}get gs(){return this.LA}get CE(){return this.Rt?"enabled":"disabled"}get MC(){return this.Qct}set MC(t){let e=[];if(t){e=t.filter((t=>{const e=this.RC?XW(this.RC):void 0;return Ms.Ys.dp(e,XW(t))})).filter((e=>this.NC.EO(t)&&e.trt))}else e=this.NC.lC.filter((t=>t.trt));if(0!==e.length){if(!(t===this.Qct||this.Qct&&qm(this.Qct,e))){if(this.Qct=t?e:void 0,this.na.ALt(e.map((t=>t.wLt))),1===e.length){const t=e[0].wLt,i=this.Sp===ee.mE,s=this.gZ.Fj;ah(this.na.SLt(t,{TLt:!0,kLt:s&&i,ELt:s&&!i}))}this._o(new WW(e,this))}}else this._o(new ZW)}DO(t){this.Rt=t}yn(){this.Ro(),this.na.vn(qt.tLt,this.xLt),this.na.vn(qt.eLt,this.RLt);for(const t of this.NC.lC)t.yn();this.NC.nr()}constructor(t,e,i,s,n){var r;super(),this.Sp=t,this.na=e,this.gZ=i,this.yh=s,this.NC=n,this.Qct=void 0,this.ILt=void 0,this.CLt=()=>this._o(new Zs(this)),this.xLt=()=>{const t=this.RC;t&&this.ILt!==t&&(this.ILt=t,this._o(new uG(t)))},this.RLt=()=>{const t=this.Rt;this.PLt!==t&&(this.PLt=t,this.yh._o(new bc(this)),this._o(new bc(this)))},this.ILt=this.RC,this.PLt=this.Rt;const o=n.fC(0);var h,a;this.CO=null!=(h=null==o?void 0:o.gLt.l)?h:"",this.LA=null!=(a=null==o?void 0:o.gLt.gs)?a:"",this.vLt=null==o||null==(r=o.gLt)?void 0:r._Lt.map(WY).filter(Bo),this.IO=oi(),this.na.bn(qt.tLt,this.xLt),this.na.bn(qt.eLt,this.RLt);for(let t=0;t<this.NC.V;t++){this.NC.fC(t).bn("update",this.CLt)}}},LY=class extends MY{get Lt(){return jr.MPt}mLt(){return this.na.DLt}yLt(t){ah(this.na.NLt(t))}constructor(t,e,i,s){super(ee.vE,t,e,i,s)}},BY=class extends MY{get Lt(){return _q.MPt}mLt(){return this.na.MLt}yLt(t){ah(this.na.LLt(t))}constructor(t,e,i,s){super(ee.mE,t,e,i,s)}},OY=class extends Co{get o(){return String(this.wLt.o)}get IC(){return this.wLt.o}get bG(){return this.wLt.bG}get Myt(){return this.wLt.Myt}get Ch(){var t;return null!=(t=this.CO)?t:this.gLt.l}set Ch(t){this.Ch!==t&&(this.CO=t,this._o(new lH(this.wa)))}get Fyt(){return this.gLt.hLt.BLt()}get Lyt(){return this.wLt.Lyt}aW(){}hW(){}yn(){this.Ro()}constructor(t,e){super(),this.wLt=t,this.gLt=e,this.CO="",this.trt=!0}},FY=class extends OY{get Nwt(){return 0}get Jrt(){var t;return(null==(t=this.wLt.Jrt)?void 0:t.cPt)||""}get wa(){return this.eu||(this.eu=this.ka()),this.eu}ka(){return Tl(this)}constructor(t,e){super(t,e),this.eu=void 0}},VY=class extends OY{get Jrt(){var t;return(null==(t=this.wLt.Jrt)?void 0:t.dPt)||""}get Byt(){return this.OLt}set Byt(t){this.OLt!==t&&(this.OLt=t,this._o(new lH(this.wa)))}get oft(){var t,e;return null!=(e=null!=(t=this.JCt)?t:this.wLt.oft)?e:0}set oft(t){this.oft!==t&&(this.JCt=t,this._o(new lH(this.wa)))}get Ti(){var t,e;return null!=(e=null==(t=this.wLt.$Ct)?void 0:t.Ti)?e:0}get ji(){var t,e;return null!=(e=null==(t=this.wLt.$Ct)?void 0:t.ji)?e:0}get wa(){return this.eu||(this.eu=this.ka()),this.eu}ka(){return Sl(this)}constructor(t,e){super(t,e),this.eu=void 0,this.OLt=0,this.JCt=void 0}};function WY(t){return"public.accessibility.describes-video"===t?ln.xC:"public.accessibility.transcribes-spoken-dialog"===t?ln.TRANSCRIBES_SPOKEN_DIALOG:"public.accessibility.describes-music-and-sound"===t?ln.DESCRIBES_MUSIC_AND_SOUND:"public.accessibility.easy-to-read"===t?ln.EC:void 0}r(),r();var UY=new class{FLt(t){if(!this.Rt())return!1;const e=[];return!(e.length>0)||e.some((e=>e.toLowerCase()===t.toLowerCase()))}VLt(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];this.FLt(t)&&Ms.Fp("DEBUG "+t+" -",...i)}MN(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];this.FLt(t)&&Ms.Fp("INFO "+t+" -",...i)}WLt(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];this.FLt(t)&&Ms.Vp("WARNING "+t+" -",...i)}lt(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];this.FLt(t)&&Ms.Wp("ERROR "+t+" -",...i)}ULt(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];this.FLt(t)&&Ms.Wp("FATAL "+t+" -",...i)}constructor(){this.Rt=()=>!1}},Gt="HLSPlaylistParser",uc="Discontinuity",Ru="Buffering",GY=class{fft(){var t;const e=null==(t=this.na.Er)?void 0:t.GLt;if(!e||0===e.length)return void UY.WLt("LLHLSTrackConfigurator","The HLSModel contains no variant streams.");var i;const s=null!=(i=Fo(e,(t=>0!==t.HLt.length&&0!==t.ZLt.length)))?i:e[0],n=e.filter((t=>t!==s));for(const t of s.HLt){const e=new gl,i=[];e.kO(new FY(s,t)),i.push(t);for(const s of n)for(const n of s.HLt)if(tt(n,t)&&!NY(i,n)){e.kO(new FY(s,n)),i.push(n);break}this.XLt.tt(new LY(this.na,this.gZ,this.XLt,e))}for(const t of s.ZLt){const e=new gl,i=[];e.kO(new VY(s,t)),i.push(t);for(const s of n)for(const n of s.ZLt)if(tt(n,t)&&!NY(i,n)){e.kO(new VY(s,n)),i.push(n);break}this.zLt.tt(new BY(this.na,this.gZ,this.zLt,e))}}qLt(){this.YLt(this.XLt),this.YLt(this.zLt)}YLt(t){const e=[];for(const i of t.lC){const t=[];for(const e of i.NC.lC)ms(e.wLt.KLt,e.gLt)||t.push(e);for(const e of t)i.NC.eT(e),e.yn();0===i.NC.V&&e.push(i)}for(const i of e)t.it(i),i.yn()}jLt(t,e){const i=this.QLt(t);void 0!==i&&(i.oft=e)}JLt(t,e){const i=this.QLt(t);void 0!==i&&(i.Byt=e)}QLt(t){for(const e of this.zLt.lC){const i=Fo(e.NC.lC,(e=>e.gLt===t));if(void 0!==i)return i}}constructor(t,e,i,s){this.na=t,this.gZ=e,this.XLt=i,this.zLt=s}};r();var HY=class{get bG(){return this.Iut.dit}get AG(){return this.RIt.dit}SG(t){if("segment"!==t.Tw&&"preload-hint"!==t.Tw)return;const e=[new _z(this.RIt)];return"stream"!==t.jk||!function(t){return"segment"===t.Tw&&"initialization-segment"!==t.kE}(t)&&"preload-hint"!==t.Tw?e.push(new vz(this.Iut)):e.push(new mz(this.Iut,1e3)),new fz(e)}AIt(t){this.Iut=new xt(xt.iIt,xt.sIt,1,t)}constructor(t){const e=t.bG>0?t.bG:xt.Eut,i=t.AG>0?t.AG:Ze.Eut;this.Iut=new xt(xt.iIt,xt.sIt,1,e),this.RIt=new Ze(Ze.iIt,Ze.sIt,i)}};r();var ZY=class extends pe{constructor(t){super(qt.rLt),this.lt=t}};r();var XY=class{MJ(t,e){const i={Tw:In.wW,sH:[],g4:t.map((t=>({Mk:t}))),C4:e};return Promise.resolve(void 0!==this.Jnt.MJ([i]))}constructor(t){this.Jnt=t}};r(),r();var zY=(t,e,i,s,n)=>t.filter((t=>!!ms(s,t)||1.1*t.bG<=i.bG)),qY=(t,e,i,s,n)=>t.filter((t=>{if(ms(s,t))return!0;let r=1/0;for(const e of t.KLt){var o,h;r=_.min(r,null!=(h=null!=(o=e.hLt.$Lt)?o:e.hLt.tBt)?h:1/0)}r===1/0&&(r=1);const a=2*i.AG+t.bG*r/i.bG;return t.bG<=e.bG||n.eBt>a})),YY=(t,e,i,s,n)=>Ii(t,((t,e)=>e.bG-t.bG)),KY=(t,e,i,s,n)=>t.every((t=>t.Lyt&&!S(t.Lyt)))?Ii(t,((t,e)=>e.Lyt-t.Lyt)):t,jY=(t,e,i,s,n)=>0===s.length?t:Ii(t,((t,e)=>{const i=ms(s,t)?1:0;return(ms(s,e)?1:0)-i})),QY=(t,e,i,s,n,r)=>t.filter((t=>!t.Jrt||!e.Jrt||!(void 0!==e.Jrt.dPt&&void 0!==t.Jrt.dPt&&!_u(e.Jrt.dPt,t.Jrt.dPt)&&!r.iBt({Mk:'video/mp4; codecs="'+t.Jrt.dPt+'"'}))&&!(void 0!==e.Jrt.cPt&&void 0!==t.Jrt.cPt&&!_u(e.Jrt.cPt,t.Jrt.cPt)&&!r.sBt({Mk:'audio/mp4; codecs="'+t.Jrt.cPt+'"'})))),JY=(t,e,i,s,n)=>{if(!1===n.Dlt)return t;if(Ms.Ys.qg)return t;const r=Ms.Ys.Yg;var o;const h=(null!=(o=null==r?void 0:r.width)?o:n.ji)*xW;var a;const u=(null!=(a=null==r?void 0:r.height)?a:n.Ti)*xW;for(let e=0;e<t.length;e++){const i=t[e];if(void 0===i.$Ct)return t;const s=i.$Ct.Ti,n=i.$Ct.ji;if(s<=u&&n<=h)return t.slice(e,t.length)}return[]},$Y=(t,e,i,s,n)=>function(t,e){const i=e.Dlt;if(void 0===i&&!Ms.Ys.Qs)return t;if(!1===i)return t;for(let i=0;i<t.length;i++){const s=t[i];if(void 0===s.$Ct)return t;const n=s.$Ct.Ti,r=s.$Ct.ji;if(n===e.Ti&&r===e.ji)return t.slice(i,t.length);if(n<e.Ti||r<e.ji)return t.slice(0===i?i:i-1,t.length)}return[]}(t,n);var tK="AbrEvaluator",eK=class{get nBt(){return this.gZ.cj}rBt(t){this.m_=t}async oBt(t,e,i,s,n){return(await this.hBt(t,e,i,s,n))[0]}async hBt(t,e,i,s,n){if(0===t.length)throw new g("AbrEvaluator - Unable to select optimal variant stream from an empty list.");UY.VLt(tK,"Performing optimal variant stream selection.");const r=this.nBt;let o=t;for(const t of this.m_){const h=t(o,e,r,i,s,n);o=$c(h)?h:await h}if(0===o.length){UY.WLt(tK,"No possible variant stream remains after ABR rule evaluation. Selecting the lowest bandwidth variant stream.");return[Ws(t,(t=>t.bG))]}return o}constructor(t){this.gZ=t,this.m_=[QY,zY,qY,YY,JY,$Y,KY,jY]}};function iK(t,e){return[t,void 0!==e?t+e-1:cf]}function sK(t){return Boolean(t.AN)}function gt(t){return Boolean(t.Mrt)}r(),r(),r(),r(),r();var Qc=function(t){return t[t.vE=0]="vE",t[t.mE=1]="mE",t[t.JV=2]="JV",t[t.aBt=3]="aBt",t}({}),nK=function(t){return t[t.uBt=0]="uBt",t[t.cBt=1]="cBt",t}({}),$t=function(t){return t[t.$H=0]="$H",t[t.lBt=1]="lBt",t[t.dBt=2]="dBt",t}({}),rK=function(t){return t[t.iE=0]="iE",t[t.fBt=1]="fBt",t[t._Bt=2]="_Bt",t}({});function Fe(t){return t?t._At?t.Mx+"@"+t._At.Sn+"-"+(null!=(e=t._At.V)?e:""):""+t.Mx:"";var e}function oK(t,e){if(e===t)return!0;if(e.Mx!==t.Mx)return!1;if(!t._At)return!0;if(e._At){const i=iK(t._At.Sn,t._At.V),s=iK(e._At.Sn,e._At.V);if(i[0]<=s[0])return void 0===i[1]||void 0!==s[1]&&i[1]>=s[1]}return!1}function hK(t,e){return t===e||t.Mx===e.Mx&&(t._At&&e._At?t._At.Sn===e._At.Sn&&t._At.V===e._At.V:t._At===e._At)}function aK(t){const e=!!t.vBt||void 0;return{o:t.o,mBt:t.mBt,$G:t.$G,gBt:t.gBt,ct:t.ct,pBt:t.pBt,vBt:e,wBt:t.yBt,bBt:t.ABt,SBt:t.SBt,TBt:t.TBt}}function uK(t,e){var i,s,n;return{cPt:null!=(i=e.cPt)?i:null==t?void 0:t.cPt,dPt:null!=(s=e.dPt)?s:null==t?void 0:t.dPt,kBt:null!=(n=e.kBt)?n:null==t?void 0:t.kBt}}async function cK(t,e,i,s,n){const r=e.filter((t=>Ga(t,"audio"))),o=e.filter((t=>Ga(t,"video"))),h=[],a=i.map((t=>async function(t,e,i){if(!t.Fyt)return;if(!t.EBt)return;if(t.AE!==$t.dBt)return;const s=lK(t.EBt);if(!s)return;if(s.Iw===Ve)return{cT:s,IG:[],CG:void 0,WU:t.Fyt};if(s.Iw===lm&&t.EBt===vm)return{cT:s,IG:[],CG:t.Fyt,WU:void 0};{UY.MN("HLSDrmUtils","Fetching key uri "+t.Fyt+".");const n=await e.Qk({Xu:t.Fyt,xE:i});return{cT:s,IG:[await n.Dk()],CG:void 0,WU:void 0}}}(t,s,n)));var u;const c=function(t,e){if(0===e.length)return t;const i=t=>{const i=e.indexOf(t.cT.Iw);return i>=0?i:e.length};return Ii(t,((t,e)=>i(t)-i(e)))}((await Promise.all(a)).filter(Bo),null!=(u=null==t?void 0:t.preferredKeySystems)?u:[]);for(const e of c){const i=uX(null!=t?t:{},e.cT),s="cbcs";h.push({cT:e.cT,IG:e.IG,CG:e.CG,WU:e.WU,RH:[{initDataTypes:[e.cT.xw],audioCapabilities:cX(r,s,null==i?void 0:i.audioRobustness),videoCapabilities:cX(o,s,null==i?void 0:i.videoRobustness),persistentState:null==i?void 0:i.persistentState,distinctiveIdentifier:null==i?void 0:i.distinctiveIdentifier}]})}return h}function lK(t){return t===am?gm:t===cu?mm:t===_m?wm:t===vm?dr:void 0}function dK(t){if("#"!==t[0])throw new g("HLSPlaylistParser - Could not extract M3U8 tag or comment: "+t);return t.split(":",1)[0]}function fK(t){return"#"!==t[0]?t:t.split(":",1)[0]}function _K(t){const e=t.indexOf(":");if(-1===e||t.length<e+1)throw new g("HLSPlaylistParser - Could not extract M3U8 parameter: "+t);return t.substring(e+1)}function vK(t){const e=bu(_K(t));if(void 0===e)throw new g("HLSPlaylistParser - Could not extract M3U8 float parameter: "+t);return e}function Xe(t){const e={},i=/[:,] ?([A-Z0-9-]+)=([^",]+|"([^"]*)")/gi;let s=i.exec(t);for(;null!==s;){const n=s[1];let r;r=void 0!==s[3]?s[3]:s[2],null!==n?e[n]=r:UY.WLt(Gt,"Ignoring unparsable M3U8 attribute name: "+t+"."),s=i.exec(t)}return e}function mK(t,e){const i=Xe(t);let s,n;try{s=i.URI?Ms.ew(i.URI,e):void 0,n=function(t){switch(t){case"AUDIO":return Qc.vE;case"VIDEO":return Qc.mE;case"SUBTITLES":return Qc.JV;case"CLOSED-CAPTIONS":return Qc.aBt}throw new g("HLSPlaylistParser - Could not parse M3U8 media type: "+t+".")}(i.TYPE)}catch(e){throw new g("HLSPlaylistParser - Could not parse #EXT-X-MEDIA tag: "+t+".")}const r=i["GROUP-ID"],o=i.LANGUAGE,h=i["ASSOC-LANGUAGE"],a=i.NAME,u="YES"===i.DEFAULT;let c="YES"===i.AUTOSELECT;const l="YES"===i.FORCED,d=i["INSTREAM-ID"],f=i.CHARACTERISTICS,_=i.CHANNELS;if(r||UY.WLt(Gt,"#EXT-X-MEDIA tag has no GROUP-ID attribute: "+t+"."),o||UY.WLt(Gt,"#EXT-X-MEDIA tag has no LANGUAGE attribute: "+t+"."),a||UY.WLt(Gt,"#EXT-X-MEDIA tag has no NAME attribute: "+t+"."),n===Qc.aBt?(s&&UY.WLt(Gt,"#EXT-X-MEDIA tag of type CAPTIONS must not have a URI: "+t+"."),d?/^(CC[0-4])|(SERVICE([1-9]|[1-5][0-9]|6[0-3]))$/.test(d)||UY.WLt(Gt,"#EXT-X-MEDIA's INSTREAM-ID is invalid: "+t+"."):UY.WLt(Gt,"#EXT-X-MEDIA tag of type CAPTIONS must have an INSTREAM-ID attribute: "+t+".")):d&&UY.WLt(Gt,"#EXT-X-MEDIA tag must not have an INSTREAM-ID attribute if the TYPE is not CAPTIONS: "+t+"."),u&&!c&&(c=!0,i.AUTOSELECT&&UY.WLt(Gt,"#EXT-X-MEDIA tag with DEFAULT=YES attribute must have AUTOSELECT=YES attribute: "+t+".")),i.FORCED&&n!==Qc.JV&&UY.WLt(Gt,"#EXT-X-MEDIA tag must not have a FORCED attribute if the TYPE is not SUBTITLES: "+t+"."),void 0===r||void 0===a)throw new g("HLSPlaylistParser - Could not parse #EXT-X-MEDIA tag: "+t+".");return{xBt:h,jCt:_,_Lt:f,lLt:r,uLt:c,aLt:u,cLt:l,dLt:d,gs:o,l:a,Tw:n,Fyt:s}}function gK(t,e,i){const s=Xe(t);let n,r,o;try{n=Ms.ew(i,e),o=function(t){if(void 0===t)return;const e=t.split("x"),i=Number(e[0]),s=Number(e[1]);if(S(i)||S(s))throw new g("HLSPlaylistParser - Could not parse RESOLUTION attribute: "+t+".");return{ji:i,Ti:s}}(s.RESOLUTION),r=function(t){if(!t)return;let e,i,s;const n=t.split(",");for(const t of n){const n=t.trim();Cl(n,"mp4a")?e="mp4a.40.05"===n?"mp4a.40.5":"mp4a.40.02"===n?"mp4a.40.2":n:"ac-3"===n||"ec-3"===n||"flac"===n.toLowerCase()?e=n:Cl(n,"avc")||Cl(n,"hvc1")||Cl(n,"hev1")||Cl(n,"dvh")||Cl(n,"vp09")||Cl(n,"av01")?i=n:s=s?s+","+n:n}return{cPt:e,dPt:i,kBt:s}}(s.CODECS)}catch(e){throw new g("HLSPlaylistParser - Could not parse #EXT-X-STREAM-INF tag: "+t+".")}const h=bu(s.BANDWIDTH),a=bu(s["AVERAGE-BANDWIDTH"]),u=bu(s.SCORE),c=bu(s["FRAME-RATE"]),l=s["HDCP-LEVEL"],d=[];if(void 0!==s["ALLOWED-CPC"]){const t=s["ALLOWED-CPC"].split(",");d.push(...t.map((t=>{const e=t.split(":");return{keysystem:e[0],label:e[1]}})))}const f=s["VIDEO-RANGE"],_=s.AUDIO,v=s.VIDEO,m=s.SUBTITLES,p=s["CLOSED-CAPTIONS"];if(void 0===h?UY.WLt(Gt,"#EXT-X-STREAM-INF tag has no valid BANDWIDTH attribute: "+t+"."):void 0!==a&&a>h&&UY.WLt(Gt,"#EXT-X-STREAM-INF tag must have BANDWIDTH attribute higher or equal to AVERAGE-BANDWIDTH attribute: "+t+"."),r||UY.MN(Gt,"#EXT-X-STREAM-INF tag should have a CODECS attribute: "+t+"."),r&&r.dPt&&void 0===o&&UY.MN(Gt,"#EXT-X-STREAM-INF tag should have a valid RESOLUTION attribute if it contains video codecs: "+t+"."),void 0===l||ms(["TYPE-0","TYPE-1","NONE"],l)||UY.WLt(Gt,"#EXT-X-STREAM-INF tag has an invalid HDCP-LEVEL attribute: "+t+"."),void 0===f||ms(["SDR","PQ","HLG"],f)||UY.WLt(Gt,"#EXT-X-STREAM-INF tag has an invalid VIDEO-RANGE attribute: "+t+"."),void 0===h)throw new g("HLSPlaylistParser - Could not parse #EXT-X-STREAM-INF tag: "+t+".");return{RBt:d,IBt:_,Myt:a,bG:h,CBt:p,Jrt:r,oft:c,PBt:l,$Ct:o,Lyt:u,DBt:m,Fyt:n,NBt:v,MBt:f}}function pK(t,e){const i=Xe(t);if(!i.URI)throw new g("HLSPlaylistParser - Could not parse #EXT-X-I-FRAME-STREAM-INF tag: "+t+".");try{return gK(t,e,i.URI)}catch(e){throw new g("HLSPlaylistParser - Could not parse #EXT-X-I-FRAME-STREAM-INF tag: "+t+".")}}function bu(t){const e=Number(t);return S(e)?void 0:e}function wK(t,e){const i=Xe(t);let s,n;try{s=function(t){switch(t){case"NONE":return $t.$H;case"AES-128":return $t.lBt;case"SAMPLE-AES":return $t.dBt;case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return t}throw new g("LLHLSPlaylistParser - Could not parse M3U8 key method: "+t+".")}(i.METHOD),n=i.URI?xK(i.URI,e):void 0}catch(e){throw new g("HLSPlaylistParser - Could not parse #EXT-X-KEY tag: "+t+".")}const r=i.KEYFORMAT,o=i.IV,h=i.KEYFORMATVERSIONS;let a,u,c,l,d;if(s!==$t.$H){if(c=r||vm,"SAMPLE-AES-CENC"===s||"SAMPLE-AES-CTR"===s){if(lK(c)!==gm)throw new g("HLSPlaylistParser - #EXT-X-KEY tag with METHOD="+s+" is only compatible with Widevine.");a=$t.dBt}else a=s;u=n,l=o?$g(o):void 0,d=h?h.split("/").map((t=>Number(t))):[1]}else a=$t.$H,(n||r||h||o)&&UY.WLt(Gt,"#EXT-X-KEY tag with METHOD=NONE must not have additional attributes: "+t+".");return{AE:a,Fyt:u,LBt:l,EBt:c,BBt:d}}function yK(t){const e=_K(t);if(!e)return[void 0,""];const[i,s]=e.split(",");return[bu(i),s]}function bK(t,e){const i=t.split("@"),s=bu(i[0]),n=i.length>1?bu(i[1]):e;if(void 0===s||void 0===n)throw new g("HLSPlaylistParser - Could not parse #EXT-X-BYTERANGE tag: "+t+".");return{Sn:n,V:s}}function AK(t){if(void 0!==t)return bK(t,void 0)}function SK(t,e){return bK(_K(t),e)}function TK(t,e){const i=Xe(t);try{const t=xK(i.URI,e);return{Mx:t,_At:AK(i.BYTERANGE)}}catch(e){throw new g("HLSPlaylistParser - Could not parse #EXT-X-MAP tag: "+t+".")}}function kK(t){const e=_K(t);if(!e)throw new g("HLSPlaylistParser - Could not parse #EXT-X-PROGRAM-DATE-TIME tag: "+t+".");const i=new Date(e);if(!mf(i))throw new g("HLSPlaylistParser - Could not parse #EXT-X-PROGRAM-DATE-TIME tag: "+t+".");return i}function EK(t){const e=Xe(t),i=e["START-DATE"],s=e["END-DATE"],n=bu(e["PLANNED-DURATION"]);let r,o,h,a=bu(e.DURATION);void 0!==e["SCTE35-CMD"]&&(r=$g(e["SCTE35-CMD"]).buffer),e["SCTE35-IN"]&&(o=$g(e["SCTE35-IN"]).buffer),e["SCTE35-OUT"]&&(h=$g(e["SCTE35-OUT"]).buffer);const u="YES"===e["END-ON-NEXT"],c=function(t){const e={};for(const i of w.keys(t)){const s=t[i];void 0!==s&&Cl(i,"X-")&&(e[i]=s)}return e}(e),l=e.ID,d=e.CLASS;let f,_;if(void 0===i)UY.WLt(Gt,"Could not parse #EXT-X-DATERANGE tag without START-DATE attribute: "+i+".");else if(f=new Date(i),_=void 0!==s?new Date(s):void 0,mf(f)||UY.WLt(Gt,"Could not parse EXT-X-DATERANGE tag with invalid START-DATE attribute: "+f+"."),void 0!==a){const e=new Date(f.getTime()+1e3*a);_?_.getTime()!==e.getTime()&&(UY.WLt(Gt,"DURATION and END-DATE attributes of #EXT-X-DATERANGE tag are not aligned, updating the END-DATE: "+t+"."),_=e):_=e}else _&&(a=(f.getTime()-_.getTime())/1e3);if(u&&(e.CLASS||UY.WLt(Gt,"Could not parse #EXT-X-DATERANGE tag with END-ON-NEXT attribute without CLASS attribute: "+t+"."),e.DURATION&&UY.WLt(Gt,"Could not parse #EXT-X-DATERANGE tag with END-ON-NEXT attribute with DURATION attribute: "+t+"."),_&&UY.WLt(Gt,"Could not parse #EXT-X-DATERANGE tag with END-ON-NEXT attribute with END-DATE attribute: "+t+".")),void 0===l&&UY.WLt(Gt,"Could not parse #EXT-X-DATERANGE tag without valid ID attribute: "+t+"."),void 0===l||void 0===f)throw new g("HLSPlaylistParser - Could not parse #EXT-X-DATERANGE tag: "+t+".");return{o:l,mBt:d,$G:f,gBt:_,ct:a,pBt:n,ABt:r,TBt:o,SBt:h,vBt:u,yBt:c}}function xK(t,e){if(void 0===t)throw new g("HLSPlaylistParser - Unable to parse URL from string: "+t+".");return Ms.ew(t,e)}function RK(t,e){const i=Xe(t),s=bu(i.DURATION),n=xK(i.URI,e),r=AK(i.BYTERANGE),o="YES"===i.INDEPENDENT,h="YES"===i.GAP;if(void 0===s)throw new g("HLSPlaylistParser - Unable to parse #EXT-X-PART without valid DURATION: "+t);return{ct:s,Fyt:{Mx:n,_At:r},OBt:o,FBt:h}}function IK(t){const e=Xe(t);return{VBt:"YES"===e["CAN-BLOCK-RELOAD"],WBt:bu(e["CAN-SKIP-UNTIL"]),UBt:"YES"===e["CAN-SKIP-DATERANGES"],GBt:bu(e["HOLD-BACK"]),HBt:bu(e["PART-HOLD-BACK"])}}function CK(t,e){const i=Xe(t);if(void 0===i.URI)throw new g("HLSPlaylistParser - Could not parse #EXT-X-RENDITION-REPORT: "+t+".");const s=xK(i.URI,e),n=bu(i["LAST-MSN"]),r=bu(i["LAST-PART"]);if(void 0===n)throw new g("HLSPlaylistParser - Could not parse #EXT-X-RENDITION-REPORT: "+t+".");return{Fyt:s,ZBt:n,XBt:r}}function PK(t,e){var i;const s=Xe(t),n=bu(s["SKIPPED-SEGMENTS"]),r=null==(i=s["RECENTLY-REMOVED-DATERANGES"])?void 0:i.split("\t");if(void 0===n)throw new g("HLSPlaylistParser - Could not parse #EXT-X-SKIP tag without valid SKIPPED-SEGMENTS attribute: "+t+".");return{zBt:n,qBt:r,YBt:e}}function DK(t){const e=bu(Xe(t)["PART-TARGET"]);if(void 0===e)throw new g("HLSPlaylistParser - Could not parse #EXT-X-PART-TARGET-DURATION tag: "+t+".");return e}function NK(t){switch(_K(t)){case"VOD":return rK.fBt;case"EVENT":return rK._Bt;default:return UY.WLt(Gt,"Found #EXT-X-PLAYLIST-TYPE tag with invalid value: "+t+"."),rK.iE}}function MK(t,e){const i=Xe(t);let s,n;try{s=function(t){if(void 0===t)throw new g("HLSPlaylistParser - Could not parse PRELOAD-HINT type: "+t+".");if("MAP"===t)return nK.uBt;if("PART"===t)return nK.cBt;throw new g("HLSPlaylistParser - Could not parse PRELOAD-HINT type: "+t+".")}(i.TYPE),n=xK(i.URI,e)}catch(e){throw new g("HLSPlaylistParser - Could not parse #EXT-X-PRELOAD-HINT tag: "+t+".")}const r=bu(i["BYTERANGE-START"]),o=bu(i["BYTERANGE-LENGTH"]);let h;return void 0===r&&void 0===o||(h={Sn:r||0,V:o}),{Tw:s,Fyt:{Mx:n,_At:h}}}r(),r(),r();var LK=class t{KBt(){const t=this.jBt[this.QBt];return this.QBt+=1,t}JBt(){return this.jBt[this.QBt]}Ib(){const e=new t("");return e.QBt=0,e.jBt=this.jBt.slice(this.QBt),e}static $Bt(t){if(!t)return[];return t.split(/[\r\n]+/).map((t=>t.trim())).filter((t=>t))}constructor(e){this.QBt=0,this.jBt=t.$Bt(e)}};function BK(t,e,i){const s=t.Fyt;let n=t.jD,r=t.tOt,o=t.Sn;switch(i){case"#EXT-X-VERSION":n=function(t){const e=vK(t);return S(e)?(UY.WLt(Gt,"Playlist version is NaN: "+t+"."),1):e}(e);break;case"#EXT-X-INDEPENDENT-SEGMENTS":r=!0;break;case"#EXT-X-START":o=function(t){const e=Xe(t),i=bu(e["TIME-OFFSET"]);if(void 0===i)throw new g("HLSPlaylistParser - #EXT-X-START is missing a TIME-OFFSET: "+t+".");return{eOt:i,iOt:"YES"===e.PRECISE}}(e);break;case"#EXT-X-DEFINE":UY.WLt(Gt,"Ignoring unsupported #EXT-X-DEFINE: "+e+".");break;default:UY.MN(Gt,"Ignoring unrecognized line or comment: "+e+".")}return{Fyt:s,jD:n,tOt:r,Sn:o}}function OK(t,e){return t.map((t=>t.AE===$t.$H||t.LBt?t:ol({},t,{LBt:FK(e)})))}function FK(t){const e=new DataView(new ArrayBuffer(16)),i=new Ri;return i.xb(8),Lg(e,i,vo.fromNumber(t)),new j(e.buffer)}function VK(t,e,i){UY.MN(Gt,"Parsing M3U8 playlist at "+t+".");const s=new LK(i);if("#EXTM3U"!==s.KBt())throw new g("HLSPlaylistParser - Could not parse M3U8 playlist. Playlist does not start with #EXTM3U.");return function(t){return/^#EXT-X-(MEDIA|STREAM-INF|I-FRAME-STREAM-INF|SESSION-DATA|SESSION-KEY):/m.test(t)}(i)?function(t,e){let i;try{i=Ms.ew(t)}catch(e){throw UY.WLt(Gt,"The master playlist has no valid base URI: "+t+"."),new g("HLSPlaylistParser - Could not parse HLS master playlist: "+t)}let s={Fyt:i,tOt:void 0,Sn:void 0,jD:void 0};const n=[],r=[],o=[],h=[];for(;;){const t=e.KBt();if(!t)break;try{const a=dK(t);switch(a){case"#EXT-X-MEDIA":{const e=mK(t,i);n.push(e);break}case"#EXT-X-STREAM-INF":{const s=gK(t,i,e.KBt());r.push(s);break}case"#EXT-X-I-FRAME-STREAM-INF":{const e=pK(t,i);o.push(e);break}case"#EXT-X-SESSION-DATA":UY.WLt(Gt,"Ignoring unsupported #EXT-X-SESSION-DATA: "+t+".");break;case"#EXT-X-SESSION-KEY":{const e=wK(t,i);h.push(e);break}default:s=BK(s,t,a)}}catch(e){UY.WLt(Gt,"Ignoring unparsable line: "+t,e)}}let a=s.jD;var u;const c=null!=(u=s.tOt)&&u,l=s.Sn;return void 0===a&&(UY.WLt(Gt,"The playlist has no #EXT-X-VERSION, assuming version is 2."),a=2),a>=8&&(r.some((t=>void 0!==t.Lyt))||o.some((t=>void 0!==t.Lyt)))&&(r.some((t=>void 0===t.Lyt))||o.some((t=>void 0===t.Lyt)))&&UY.WLt(Gt,"If one master playlist variant stream has a SCORE, all variants should have it."),{Fyt:i,jD:a,tOt:c,Sn:l,sOt:o,nOt:h,AN:n,rOt:r}}(t,s):function(t,e,i){let s={Fyt:t,tOt:void 0,Sn:void 0,jD:void 0};const n=[];let r,o,h,a,u=!1,c=!1;const l=[],d=Oh();let f,_,v,m,p,w,y,b,A,S=[],T=[],k=!1,E=!1;const x=[],R=[];let I,C,P,D,N,M=0,L=!1,B=rK.iE,O=!1,F=0;try{N=Ms.ew(t)}catch(e){throw UY.WLt(Gt,"The media playlist has no valid base URI: "+t+".",e),new g("HLSPlaylistParser - Could not parse HLS media playlist.")}const V=i.Ib();for(;void 0===C||void 0===P;){const t=V.KBt();if(!t)break;try{switch(fK(t)){case"#EXT-X-MEDIA-SEQUENCE":C=vK(t);break;case"#EXT-X-DISCONTINUITY-SEQUENCE":P=vK(t)}}catch(e){UY.WLt(Gt,"Ignoring unparsable line: "+t,e)}}void 0===C&&(UY.MN(Gt,"#EXT-X-MEDIA-SEQUENCE tag is missing, assuming first segment media sequence number is 0."),C=0),void 0===P&&(UY.MN(Gt,"#EXT-X-DISCONTINUITY-SEQUENCE tag is missing, assuming first segment discontinuity sequence number is 0."),P=0);let W=C,U=P;for(;;){const t=i.KBt();if(!t)break;let e=!1;try{const i=fK(t);switch(i){case"#EXTINF":e=!0,[f,_]=yK(t);break;case"#EXT-X-BYTERANGE":e=!0,v=SK(t,M),v&&(M=v.Sn+v.V);break;case"#EXT-X-DISCONTINUITY":e=!0,k=!0,U++;break;case"#EXT-X-KEY":{var G;e=!0;const i=wK(t,N);if(i.AE===$t.$H){d.clear(),A=void 0;break}var H;const s=null!=(H=null==(G=i.EBt)?void 0:G.toString())?H:"identity";d.set(s,i),i.AE===$t.lBt&&(A=i);break}case"#EXT-X-MAP":e=!0,p=TK(t,N),w=A;break;case"#EXT-X-PROGRAM-DATE-TIME":e=!0,y=kK(t);break;case"#EXT-X-GAP":e=!0,E=!0;break;case"#EXT-X-BITRATE":e=!0,b=vK(t);break;case"#EXT-X-TARGETDURATION":r=vK(t);break;case"#EXT-X-DATERANGE":{const e=EK(t);n.push(e);break}case"#EXT-X-PART":{e=!0;const i=RK(t,N);T.push(i);break}case"#EXT-X-PRELOAD-HINT":{const e=MK(t,N);x.push(e);break}case"#EXT-X-SKIP":{l.length>0&&UY.WLt(Gt,"#EXT-X-SKIP must appear before any #EXTINF tags."),e=!0;const i=PK(t,W);F=i.zBt,D=i.qBt,W+=i.zBt;break}case"#EXT-X-SERVER-CONTROL":{const e=IK(t);u=e.VBt,o=e.WBt,c=e.UBt,h=e.GBt,a=e.HBt;break}case"#EXT-X-RENDITION-REPORT":{const e=CK(t,N);R.push(e);break}case"#EXT-X-PART-INF":I=DK(t);break;case"#EXT-X-MEDIA-SEQUENCE":e&&UY.WLt(Gt,"#EXT-X-MEDIA-SEQUENCE must appear before any media segment tags.");break;case"#EXT-X-DISCONTINUITY-SEQUENCE":e&&UY.WLt(Gt,"#EXT-X-DISCONTINUITY-SEQUENCE must appear before any media segment tags.");break;case"#EXT-X-ENDLIST":L=!0;break;case"#EXT-X-PLAYLIST-TYPE":B=NK(t);break;case"#EXT-X-I-FRAMES-ONLY":O=!0;break;default:if(Cl(i,"#"))s=BK(s,t,i);else{m=Ms.ew(t,N);const e=p?{Fyt:p,oOt:w}:void 0,i={nOt:OK(jv(d),W),qV:S,hOt:T,ct:f,oH:_,aOt:k,Fyt:{_At:v,Mx:m},uOt:e,cOt:y,FBt:E,lOt:b,YBt:W,dOt:U};l.push(i),W++,S=[],T=[],f=void 0,_=void 0,k=!1,v=void 0,m=void 0,y=void 0,E=!1,b=void 0}}}catch(e){UY.WLt(Gt,"Ignoring unparsable line: "+t,e)}}if(T.length){const t=p?{Fyt:p,oOt:A}:void 0,e={nOt:OK(jv(d),W),qV:S,hOt:T,ct:f,oH:_,aOt:k,Fyt:void 0,uOt:t,cOt:y,FBt:E,lOt:b,YBt:W,dOt:U};l.push(e)}let Z=s.jD;var X;const z=null!=(X=s.tOt)&&X,q=s.Sn;void 0===Z&&(UY.WLt(Gt,"The media playlist has no #EXT-X-VERSION tag, assuming version is 2."),Z=2),void 0===r&&UY.WLt(Gt,"Could not parse the HLS media playlist: no #EXT-X-TARGET-DURATION tag was found.");const Y=l.length,K=Y>0;K||UY.WLt(Gt,"The HLS media playlist contains no segments.");const j=K&&l[Y-1].hOt.length>0;return j&&void 0===I&&UY.WLt(Gt,"Could not parse the HLS media playlist: no #EXT-X-PART-TARGET-DURATION tag was found, but it is required when some or all segments contain parts."),j&&void 0===a&&UY.WLt(Gt,"Could not parse the HLS media playlist: The #EXT-X-SERVER-CONTROL tag has no PART-HOLDBACK attribute, but it is required when some or all segments contain parts."),{VBt:u,WBt:o,UBt:c,fOt:n,dOt:P,_Ot:L,tOt:z,GBt:h,vOt:O,YBt:C,zBt:F,HBt:a,$Lt:I,mOt:B,gOt:x,qBt:D,pOt:R,wOt:r,Mrt:l,Sn:q,Fyt:N,yOt:e,jD:Z}}(t,e,s)}r(),r();var WK=class{get Fyt(){return this.hLt.Fyt}get Jrt(){return this.GCt}set Jrt(t){this.GCt=t?GK(t):void 0,this.bOt=function(t,e){return!(void 0!==(null==t?void 0:t.cPt)&&void 0===(null==e?void 0:e.cPt)||void 0!==(null==t?void 0:t.dPt)&&void 0===(null==e?void 0:e.dPt))}(this.AOt,this.GCt)}get SOt(){return this.bOt}get KLt(){return this.TOt}get HLt(){return this.TOt.filter((t=>t.Tw===Qc.vE))}get ZLt(){return this.TOt.filter((t=>t.Tw===Qc.mE))}get kOt(){return this.TOt.filter((t=>t.Tw===Qc.JV))}get EOt(){return this.TOt.filter((t=>t.Tw===Qc.aBt))}xOt(t){for(const e of this.TOt){const i=e.hLt.xOt(t);if(void 0!==i)return i}}ROt(t){for(const e of this.TOt){const i=e.hLt.ROt(t);if(void 0!==i)return i}}IOt(t){we(this.TOt,t)}constructor(t,e,i){var s,n,r,o;this.o=UK++,this.Lyt=void 0,this.$Ct=void 0,this.Myt=void 0,this.bOt=!1,this.TOt=[],this.hLt=e,this.bG=t.bG,this.Myt=t.Myt,this.Lyt=t.Lyt,this.AOt=t.Jrt?GK(t.Jrt):void 0,this.GCt=this.AOt,this.$Ct=t.$Ct,this.oft=t.oft,this.IBt=null!=(s=t.IBt)?s:"COt"+this.o,this.NBt=null!=(n=t.NBt)?n:"POt"+this.o,this.DBt=null!=(r=t.DBt)?r:"DOt"+this.o,this.CBt=null!=(o=t.CBt)?o:"NOt"+this.o,this.TOt=i}},UK=0;function GK(t){return ol({},t,{dPt:t.dPt?Cy(t.dPt):void 0})}r(),r(),r();var HK=class{get WO(){var t;return this.jO+(null!=(t=this.MOt)?t:0)}get LOt(){return this.BOt}get OOt(){return this.FOt}get nOt(){return this.VOt.nOt}WOt(t,e,i){this.jO=t,this.BOt=e,this.FOt=i}constructor(t,e,i,s,n,r){this.wit=void 0,this.VOt=t,this.UOt=e,this.jO=i,this.BOt=s,this.FOt=n,this.ct=r.ct,this.Fyt=r.Fyt,this.OBt=r.OBt,this.FBt=r.FBt}},ZK=class{get WO(){var t;return this.jO+(null!=(t=this.GOt)?t:0)}get HOt(){return this.jO}get ct(){return this.MA}get Fyt(){return this.ZOt}get LOt(){return this.BOt}get OOt(){return this.FOt}get hOt(){return this.Av}get XOt(){return this.zOt}get UO(){var t;return this.WO+(null!=(t=this.MA)?t:this.zOt)}set MOt(t){this.GOt=t;for(const e of this.Av)e.MOt=t}get MOt(){return this.GOt}qOt(t){return this.Av[t]}YOt(t){for(let e=0;e<this.Av.length;e++){const i=this.Av[e],s=i.WO,n=s+i.ct;if(s<=t&&t<=n)return t===n&&e+1<this.Av.length?this.Av[e+1]:i}}KOt(t){for(let e=this.Av.length-1;e>=0;e--){const i=this.Av[e];if(i.WO<=t)return i}}jOt(t){let e=this.KOt(t);for(;e&&!e.OBt&&e.UOt>0;)e=this.qOt(e.UOt-1);return e}WOt(t,e,i){const s=t.hOt.length!==this.Av.length||i!==this.FOt;this.BOt=e,this.FOt=i,this.MA=t.ct,null!=this.cOt||(this.cOt=t.cOt),void 0===this.ZOt&&(this.ZOt=t.Fyt),s&&this.QOt(t.hOt)}QOt(t){this.Av.length>t.length&&(this.Av.length=t.length);let e=0;for(let i=0;i<t.length;i++){const s=t[i],n=this.BOt&&0===i,r=this.FOt&&i===t.length-1,o=this.jO+e;if(i<this.Av.length)this.Av[i].WOt(o,n,r);else{const t=new HK(this,i,o,n,r,s);t.MOt=this.GOt,this.Av.push(t)}e+=s.ct}this.zOt=e}JOt(){En(this.Av),this.zOt=0}constructor(t,e,i,s,n){this.wit=void 0,this.Av=[],this.zOt=0,this.jO=t,this.uOt=n.uOt,this.BOt=i,this.FOt=s,this.MA=n.ct,this.cOt=n.cOt,this.ZOt=n.Fyt,this.FBt=n.FBt,this.YBt=n.YBt,this.aOt=n.aOt,this.dOt=e,this.nOt=n.nOt,this.QOt(n.hOt)}};r();var XK=function(t){return t.$Ot="YES",t.tFt="v2",t}({});r();var yc=class extends ri{};r(),r(),r();var zK=class extends Le{get wa(){return this.eu||(this.eu=function(t){return Jr(Ut(t),{get content(){return t.U},get class(){return t.mBt},get startDate(){return t.$G},get endDate(){return t.gBt},get duration(){return t.ct},get plannedDuration(){return t.pBt},get endOnNext(){return t.vBt},get scte35Cmd(){return t.bBt},get scte35Out(){return t.SBt},get scte35In(){return t.TBt},get customAttributes(){return t.wBt}})}(this)),this.eu}get mBt(){return this.eFt}get $G(){return this.iFt}get gBt(){return this.sFt}get ct(){return this.MA}get pBt(){return this.nFt}get vBt(){return this.rFt}get bBt(){return this.oFt}get SBt(){return this.hFt}get TBt(){return this.aFt}get wBt(){return this.uFt}ir(t){let e=!1;var i;(void 0===this.eFt&&void 0!==t.mBt&&(e=!0,this.eFt=t.mBt),void 0===this.sFt&&void 0!==t.gBt&&(e=!0,this.sFt=t.gBt),void 0===this.MA&&void 0!==t.ct&&(e=!0,this.MA=t.ct),void 0===this.nFt&&void 0!==t.pBt&&(e=!0,this.nFt=t.pBt),!this.rFt&&t.vBt&&(e=!0,this.rFt=t.vBt),e=this.updateCustomAttributes(t,e),void 0===this.oFt&&void 0!==t.bBt&&(e=!0,this.oFt=t.bBt),void 0===this.hFt&&void 0!==t.SBt&&(e=!0,this.hFt=t.SBt),void 0===this.aFt&&void 0!==t.TBt&&(e=!0,this.aFt=t.TBt),this.cFt(),this.lFt(),this.dFt(),e)&&(this._o(new Oi(this)),null==(i=this.QO)||i._o(new ml(this)))}updateCustomAttributes(t,e){let i=e;if(t.wBt)for(const e of w.keys(t.wBt))void 0===this.uFt[e]&&(i=!0,this.uFt[e]=t.wBt[e]);return i}cFt(){this.MA&&!this.sFt&&(this.sFt=new Date(this.iFt.getTime()+Ha(this.MA)))}lFt(){this.sFt&&!this.MA&&(this.MA=gf(this.sFt.getTime()-this.iFt.getTime()))}dFt(){this.$O===1/0&&(this.sFt||this.MA)&&(this.$O=qK(this.jO,this.MA,this.iFt,this.sFt))}constructor(t,e){super(e,qK(e,t.ct,t.$G,t.gBt),void 0,!1,t.o),this.eFt=t.mBt,this.iFt=t.$G,this.sFt=t.gBt,this.MA=t.ct,this.nFt=t.pBt,this.rFt=Boolean(t.vBt),this.uFt=t.wBt||{},this.oFt=t.bBt,this.hFt=t.SBt,this.aFt=t.TBt,this.cFt(),this.lFt()}};function qK(t,e,i,s){return Bo(e)?t+e:s?t+(gf(s.getTime())-gf(i.getTime())):1/0}var YK=class extends LL{ir(t,e){KK(this,jK(t),e)}_W(t){QK(this.L.lC,t),super._W(t)}constructor(){super(void 0,void 0,Lr.DATE_RANGE)}};function KK(t,e,i){const s=t.L.lC;for(let i=s.length-1;i>=0;i--){const n=s[i],r=Fo(e,(t=>t.o===n.o));r?n.ir(r):t.sW(n)}for(const s of e){const e=s.$G;if(void 0!==e&&!t.i5(s.o)){const n=i(e),r=new zK(s,n);QK(t.L.lC,r),t._W(r)}}}function jK(t){const e=Oh(),i=[];for(const s of t)if(e.has(s.o)){const t=e.get(s.o),i=ol({},t,zA(s),{wBt:ol({},t.wBt,s.wBt)});e.set(s.o,i)}else e.set(s.o,s),i.push(s.o);return i.map((t=>e.get(t)))}function QK(t,e){const i=Hm(t,(t=>t.mBt===e.mBt));i&&i.vBt&&i.ir({o:i.o,gBt:e.$G})}var JK=String.fromCharCode(95),$K=JK+"HLS_msn",tj=JK+"HLS_part",ej=JK+"HLS_skip",ij="HLSMediaPlaylist",sj=class{get _Ot(){if(0===this.Xbt.length)return!1;return this.Xbt[this.Xbt.length-1].OOt}get ct(){return this.MA}get hI(){return this.v4}get fFt(){return this._Ft}get tBt(){return this.vFt}get $Lt(){return this.mFt}get GBt(){return this._Ot?0:this.gFt?this.gFt:this.vFt?3*this.vFt:void 0}get HBt(){var t;return null!=(t=this.pFt)?t:this.mFt?3*this.mFt:void 0}get VBt(){return this.wFt}get WBt(){return this.yFt}get UBt(){return this.bFt}get mOt(){return this.AFt}get SFt(){return void 0!==this.$Lt}get TFt(){if(this._Ot)return!0;const t=Ms.Wg()/1e3,e=this.kFt,i=this.EFt;return void 0!==e&&t-e<i}get kFt(){return this.xFt}get RFt(){if(this.IFt)return Ms.Wg()/1e3-this.IFt}get MOt(){return this.GOt}get EFt(){var t;return null!=(t=this.vFt)?t:void 0===this.xFt?5:1}get Mrt(){return this.Xbt}get fOt(){return this.CFt}get PFt(){return this.DFt}set PFt(t){this.DFt=t}get Sn(){return this.jV}get NFt(){return this.MFt}BLt(t){if(!t)return this.Fyt;const e=Ms.Ih(this.Fyt);return void 0!==t.YBt&&e.searchParams.append($K,String(t.YBt)),void 0!==t.LFt&&e.searchParams.append(tj,String(t.LFt)),void 0!==t.MD&&e.searchParams.append(ej,t.MD),e.href}aut(t){const e=this.Xbt;if(0===e.length)return;const i=t-e[0].YBt;return i<0||i>=e.length?void 0:e[i]}BFt(t){if(0===this.Xbt.length)return;const e=wH(nj.Vg,this.Xbt,t);if(!(e<0)){const i=this.Xbt[e];return t===i.UO&&e+1<this.Xbt.length?this.Xbt[e+1]:i}{const e=this.Xbt[this.Xbt.length-1];if(t===e.UO)return e}}OFt(t){if(0===this.Xbt.length)return;const e=this.Xbt[0];if(t<e.UO)return e;const i=this.Xbt[this.Xbt.length-1];return t>=i.WO?i:this.BFt(t)}xOt(t){const e=this.OFt(t);if(void 0===e)return;for(let i=e.YBt-this.Xbt[0].YBt;i>=0;i--){const e=this.Xbt[i];if(void 0!==e.cOt)return new Date(e.cOt.getTime()+1e3*(t-e.WO))}}ROt(t){let e;for(const i of this.Xbt)if(rj(i))if(void 0===e)e=i;else{if(!(i.cOt.getTime()<=t.getTime()))break;e=i}if(void 0!==e)return e.WO+(t.getTime()-e.cOt.getTime())/1e3}FFt(t){switch(t){case nK.uBt:return this.VFt;case nK.cBt:return this.WFt;default:return}}WOt(t){var e;void 0===this.vFt&&(this.vFt=null!=(e=t.wOt)?e:this.UFt(t));void 0===this.gFt&&void 0!==t.GBt&&(this.gFt=t.GBt),void 0===this.mFt&&void 0!==t.$Lt&&(this.mFt=t.$Lt),void 0===this.pFt&&void 0!==t.HBt&&(this.pFt=t.HBt),this.wFt=t.VBt,this.yFt=t.WBt,this.bFt=t.UBt,this.AFt=t.mOt,this.Kbt(t),this.GFt(t);const i=Fo(t.gOt,(t=>t.Tw===nK.uBt)),s=Fo(t.gOt,(t=>t.Tw===nK.cBt));this.VFt=i?{Fyt:i.Fyt,Tw:i.Tw,dOt:t.dOt}:void 0,this.WFt=s?{Fyt:s.Fyt,Tw:s.Tw,dOt:t.dOt}:void 0,this.xFt=Ms.Wg()/1e3;const n=this.v4.Tn(this.v4.V-1);this.HFt();const r=this.v4.Tn(this.v4.V-1);(!this.IFt||r-n>0)&&(this.IFt=this.xFt),null!=this.jV||(this.jV=t.Sn)}HFt(){this._Ft=this.ZFt(),this.v4=this.XFt(this._Ft),this.MA=this.zFt()}ZFt(){const t=this.Mrt;if(0===t.length)return se.pB();const e=t[0].WO,i=t[t.length-1].UO;return new se([e,i])}XFt(t){if(0===t.V||this._Ot)return t;const e=t.Sn(0),i=t.Tn(0)-this.GSt;return i<e?se.mB(e):new se([e,i])}get GSt(){return this._Ot?0:null!=(i=null!=(e=null!=(t=this.qFt)?t:this.HBt)?e:this.GBt)?i:0;var t,e,i}zFt(){return 0===this.Xbt.length?0:this._Ot?Kn(this.Xbt,(t=>{var e;return null!=(e=t.ct)?e:t.XOt})):1/0}UFt(t){let e;for(const i of t.Mrt)if(void 0!==i.ct){const t=_.max(1,_.round(i.ct));(void 0===e||e<t)&&(e=t)}if(void 0===e)throw new g("HLSModel - Could not determine required segment target duration.");return e}Kbt(t){if(0===t.Mrt.length)return En(this.Xbt),void this.YFt();const e=this.KFt(t);if(!e)return;let i,s,n;e.jFt>0&&this.Xbt.splice(0,e.jFt);const r=t.zBt;if(r>0){if(r>this.Xbt.length)throw new yc("New playlist skips over missing segments.");const e=this.Xbt[r-1];if(void 0===e.ct)throw new yc("New playlist skips over an incomplete segment.");i=e.HOt+e.ct,n=e.dOt-t.dOt,s=r;for(let t=0;t<r;t++)this.Xbt[t].JOt()}else i=e.QFt,n=0,s=0;for(let e=0;e<t.Mrt.length;e++,s++){const r=t.Mrt[e],o=0===e,h=t._Ot&&e===t.Mrt.length-1,a=r.ct,u=r.dOt+n;if(s<this.Xbt.length){const t=this.Xbt[s];0,t.WOt(r,o,h)}else{let t=r;if(this.Xbt.length>0&&void 0===t.uOt){t=ol({},t,{uOt:this.Xbt[this.Xbt.length-1].uOt})}const e=new ZK(i,u,o,h,t);e.MOt=this.GOt,this.Xbt.push(e)}void 0!==a&&(i+=a)}}KFt(t){if(0===this.Xbt.length)return{jFt:0,QFt:0};const e=this.Xbt[0].YBt,i=this.Xbt[this.Xbt.length-1].YBt,s=t.Mrt[0].YBt-t.zBt,n=t.Mrt[t.Mrt.length-1].YBt;let r=0,o=0;if(s<e){const i=this.Mrt[0].cOt,n=t.Mrt[0].cOt;if(!(i&&n&&i<n))return void UY.WLt(ij,"Ignoring older playlist (first media sequence number is "+s+", but previous playlist already started at "+e+")");r=this.Xbt.length,this.YFt()}else{if(n<i)return void UY.WLt(ij,"Ignoring older playlist (last media sequence number is "+n+", but previous playlist already ended at "+i+")");if(i<s){var h;o=null!=(h=function(t,e){const i=Hm(t,(t=>void 0!==t.cOt));if(void 0===i)return;const s=function(t){let e=0;for(const s of t){if(s.aOt)return;if(s.cOt)return[s,e];var i;e+=null!=(i=s.ct)?i:0}return}(e.Mrt);if(void 0===s)return;const[n,r]=s;if(i.dOt!==n.dOt)return;const o=(n.cOt.getTime()-i.cOt.getTime())/1e3;return i.HOt+o-r}(this.Xbt,t))?h:function(t,e,i){const s=t[t.length-1];var n;const r=null!=(n=s.ct)?n:_.max(i,s.XOt),o=i*(e-s.YBt-1);return s.HOt+r+o}(this.Xbt,s,this.vFt),UY.VLt(ij,"New playlist (starting at "+s+") is entirely after previous playlist (ending at "+i+"), resetting playlist and restarting at "+o+"s"),r=this.Xbt.length,this.YFt()}else{0;const t=rn(this.Xbt,(t=>t.YBt===s));0,o=this.Xbt[t].HOt,t>0&&(r=t)}}return{jFt:r,QFt:o}}GFt(t){let e=t.fOt.map(aK);if(t.UBt&&t.yOt.MD===XK.tFt&&(e=this.CFt.concat(e)),this.CFt=jK(e),t.qBt)for(const e of t.qBt){const t=rn(this.CFt,(t=>t.o===e));t>=0&&uu(this.CFt,t)}}JFt(t,e){if(this.GOt!==t){this.GOt=t;for(const t of this.Xbt)t.MOt=this.GOt;this.HFt()}this.MFt=e}YFt(){this.GOt=void 0,this.MFt=void 0}constructor(t,e,i){this.xFt=void 0,this.IFt=void 0,this.VFt=void 0,this.WFt=void 0,this.vFt=void 0,this.mFt=void 0,this.gFt=void 0,this.pFt=void 0,this.Xbt=[],this.CFt=[],this.wFt=!1,this.yFt=void 0,this.bFt=!1,this.AFt=rK.iE,this.v4=se.pB(),this._Ft=se.pB(),this.MA=void 0,this.DFt=-1/0,this.MFt=void 0,this.Fyt=t,this.jV=e,this.qFt=i}},nj=class t{static get Vg(){return null!=this.Qrt||(this.Qrt=new t),this.Qrt}Ubt(t){return t.WO}Gbt(t){return t.UO}Hbt(t,e){return Xa(t,e)}Zbt(t,e,i){return(t-e)/(i-e)}};function rj(t){return void 0!==t.cOt}function Wu(t){return void 0!==t.hOt}function oj(t){return Wu(t)?t.LOt:0===t.UOt&&t.VOt.LOt}function hj(t,e){return Wu(t)?Wu(e)?t.YBt+1===e.YBt:0===e.UOt&&hj(t,e.VOt):t.UOt===t.VOt.hOt.length-1?hj(t.VOt,e):!Wu(e)&&t.VOt===e.VOt&&t.UOt+1===e.UOt}r(),r(),r();var aj=class extends ri{get name(){return"DiscontinuityMisalignmentError"}constructor(){super("Tried to wait for multiple discontinuity mappings at the same time")}};var uj=class{$Ft(t){const e=this.tVt.get(t);return void 0!==e&&cj(e)}eVt(t){if(this.iVt()>t)return Promise.reject(new aj);const e=[];for(const s of this.sVt){var i;if(s<t)null==(i=this.tVt.get(s))||i.nVt.Wb(new aj),this.tVt.delete(s);else e.push(s)}return this.sVt=e,-1===this.sVt.indexOf(t)&&this.sVt.push(t),this.rVt(t).nVt.Ub}oVt(t){const e=this.tVt.get(t);if(!e||!cj(e))throw new g("LLHLSPlayer - Missing timestamp mapping for discontinuity #"+t);return e}hVt(t){return this.oVt(t).BV}aVt(t,e){const i=Wu(e)?e:e.VOt,s=this.oVt(i.dOt);let n=t.kO(s.BV);if(s.uVt){const t=H.vV(e.WO).kF(n);if(t.AF().vF(eE())){const e=_.round(t._F()/tE()._F());n=n.kO(tE().tV(e))}}return n}cVt(t,e){return this.aVt(t,e).kF(t)}lVt(t,e,i,s,n,r){this.dVt<t&&(this.dVt=t);const o=this.rVt(t);void 0===o.BV&&(o.fVt.some((t=>t.Cat===e))||(o.fVt.push({Cat:e,_Vt:i,vVt:s.lV(i.mN),mVt:n,uVt:r}),this.gVt(o,t)))}gVt(t,e){if(t.BV||!this.pVt(t))return;const i=function(t){return Km(t,lj)}(t.fVt);t.BV=i.vVt.kF(i._Vt),t.uVt=t.fVt.some((t=>t.uVt)),t.nVt.Vb(),En(t.fVt),we(this.sVt,e)}pVt(t){return this.wVt.length>0&&this.wVt.every((e=>t.fVt.some((t=>t.Cat===e))))}rVt(t){if(this.tVt.has(t))return this.tVt.get(t);{const e={BV:void 0,uVt:!1,nVt:new os,fVt:[]};return this.tVt.set(t,e),e}}yVt(t){this.wVt=t,this.tVt.forEach(((t,e)=>this.gVt(t,e)))}bVt(){this.dVt=-1}iVt(){return this.dVt}Xw(){this.tVt.forEach((t=>t.nVt.jw())),this.tVt.clear()}constructor(){this.wVt=[],this.tVt=ne(),this.sVt=[],this.dVt=-1}};function cj(t){return void 0!==t.BV}function lj(t,e){return-function(t,e){if(t.uVt||e.uVt)return function(t,e){let i=t.kF(e);return t.xF()||e.xF()||(i.gF(eE())?i=i.kF(tE()):i.bF(eE().TF())&&(i=i.kO(tE()))),i}(t._Vt,e._Vt).mF(H.DF);return t._Vt.mF(e._Vt)}(t,e)||function(t,e){return t.mVt===e.mVt?Pc.eh:t.mVt?Pc.Bw:Pc.Ow}(t,e)||function(t,e){return t.vVt.mF(e.vVt)}(t,e)}var dj=class{get AVt(){return this.SVt}get GLt(){return this.TVt}get LL(){return this.kVt}WOt(t,e){if(gt(t))if(0===this.TVt.length)this.EVt(t);else{if(!e)return void UY.WLt("HLSModel","No rendition was provided to update the playlist. Ignoring the update.");e.hLt.WOt(t)}else{if(0!==this.TVt.length)return void UY.WLt("HLSModel","Master playlist can only be applied once. Ignoring the update.");this.xVt(t)}}EVt(t){const e=this.RVt(t.Fyt);e.WOt(t);const i=this.IVt(Qc.vE,e),s=this.IVt(Qc.mE,e),n=new WK({Fyt:e.Fyt,bG:0,Myt:0,Lyt:NaN,Jrt:void 0,$Ct:void 0,oft:0,RBt:[],PBt:void 0,MBt:void 0,IBt:void 0,NBt:void 0,DBt:void 0,CBt:void 0},e,[i,s]);this.TVt.push(n)}xVt(t){this.SVt.push(...t.nOt);const e=this.CVt(t);for(const i of t.rOt){const s=e.filter((t=>_j(t,i)));this.PVt(i,s);const n=new WK(i,this.RVt(i.Fyt,t.Sn),s);this.TVt.push(n)}}RVt(t,e){let i=this.DVt.get(t);return void 0===i&&(i=new sj(t,e,this.qFt),this.DVt.set(t,i)),i}CVt(t){const e=[];for(const i of t.AN)if(void 0===i.Fyt){for(const s of t.rOt)if(fj(i.Tw,i.lLt,s)){const t=new IY(i,this.RVt(s.Fyt));e.push(t)}}else{const t=new IY(i,this.RVt(i.Fyt));e.push(t)}return e}IVt(t,e){return new IY({Tw:t,Fyt:void 0,lLt:"",gs:void 0,xBt:void 0,l:"",aLt:!0,uLt:!1,cLt:!1,_Lt:void 0,dLt:void 0,jCt:void 0},e)}PVt(t,e){const i=e.filter((t=>t.Tw===Qc.vE)),s=e.filter((t=>t.Tw===Qc.mE)),n=t.Jrt&&(t.Jrt.dPt||t.Jrt.cPt);if((!n||t.Jrt.dPt)&&0===s.length){const i=this.IVt(Qc.mE,this.RVt(t.Fyt));e.push(i)}if((!n||t.Jrt.cPt)&&0===i.length){const i=this.IVt(Qc.vE,this.RVt(t.Fyt));e.push(i)}t.Jrt&&t.Jrt.kBt}NVt(t){for(const e of this.TVt)for(const i of e.KLt)if(i===t)return i}MVt(t){for(const e of this.TVt)if(e===t)return e}LVt(t){for(const e of this.TVt)if(ms(e.KLt,t))return e}Xw(){En(this.TVt),En(this.SVt),this.DVt.clear(),this.kVt.Xw()}constructor(t,e){this.TVt=[],this.SVt=[],this.DVt=Oh(),this.kVt=new uj,this.BVt=t,this.qFt=e}};function fj(t,e,i){switch(t){case Qc.vE:return i.IBt===e;case Qc.mE:return i.NBt===e;case Qc.JV:return i.DBt===e;case Qc.aBt:return i.CBt===e}return!1}function _j(t,e){return fj(t.Tw,t.lLt,e)&&(!t.fLt||t.hLt.Fyt===e.Fyt)}r();var vj=class extends pe{constructor(t){super(bn.OVt),this.gLt=t}};r();var mj=class extends pe{constructor(t){super(bn.FVt),this.gLt=t}},bt="HlsModelUpdater",bn=function(t){return t.OVt="VVt",t.FVt="WVt",t}({}),gj=class extends Co{get UVt(){return this.GVt}get HVt(){return this.ZVt}get Er(){return this.Hyt}get XVt(){return this.zVt}async qVt(t){const e=this.Hyt.BVt;if(!e)throw new g("HLSModelUpdater - Could not load HLS playlist: The provided source is empty.");this._o(new ao);const i=await this.YVt(e,{},2,!0,t),s=i.hLt;if(!sK(s)&&!gt(s))throw new g("HLSModelUpdater - Could not load HLS playlist: The playlist is invalid.");sK(s)||UY.MN(bt,"Detected media playlist only HLS stream."),this.KVt(s),i.jVt&&(this.ZVt=!0,await this.QVt(t)),this.GVt=!0}async JVt(t,e,i,s){const n=this.Hyt.NVt(t);if(!n)throw new g("HLSModelUpdater - Could not load HLS playlist for rendition: the rendition does not exist on the internal model.");const r={YBt:e,LFt:i,MD:bj(n)},o=Ha(_.max(1,3*t.hLt.EFt));try{await this.$Vt(n,r,s,o)}catch(t){throw th(t),this.tWt(n),t}}eWt(t,e){const i=this.Hyt.NVt(t);if(!i)throw new g("HLSModelUpdater - Could not load HLS playlist for rendition: the rendition does not exist on the internal model.");const s={YBt:void 0,LFt:void 0,MD:bj(i)},n=Ha(_.max(1,3*t.hLt.EFt));return this.$Vt(i,s,e,n)}iWt(t,e){return this.sWt.has(t.IC)||this.sWt.set(t.IC,new os),ou(this.sWt.get(t.IC).Ub,e)}tWt(t){this._o(new mj(t))}async $Vt(t,e,i,s){const n=t.hLt.BLt(e);let r;try{r=(await this.YVt(n,e,0,this.ZVt,i,s)).hLt}catch(e){throw th(e),t.hLt.PFt=Ms.Wg(),e}if(!gt(r))throw new g("HLSModelUpdater - Could not load HLS playlist for rendition: the playlist is not a media playlist.");if(this.nWt&&t!==this.nWt&&!this.nWt.hLt.TFt)try{await this.eWt(this.nWt,i)}catch(e){th(e),this.nWt=t,this.rWt()}try{this.KVt(r,t)}catch(n){if(n instanceof yc&&void 0!==e.MD){const n=ol({},e,{MD:void 0});return this.$Vt(t,n,i,s)}throw n}this.nWt=t}async YVt(t,e,i,s,n,r){if(UY.MN(bt,"Loading HLS playlist at "+t+"."),s){const e=await this.oWt(t,n);if(void 0!==e)return{hLt:e,jVt:!0}}return{hLt:await this.hWt(t,e,i,n,r),jVt:!1}}async oWt(t,e){try{const i=await this.zut.drt([t]);if(J(e),void 0!==i)return VK(i.responseURL,{},i.data)}catch(t){th(t)}}async hWt(t,e,i,s,n){const r={Xu:t,jk:Rr.Tk,xE:this.mTt,AE:xe.GET,Tw:Mr.sE,Uw:s,SE:n},o=await Ci((()=>this.aWt(r)),s,i);return VK(o.eE,e,o.Kk)}async aWt(t){const e=await this.fW.Qk(t);return{Kk:await e.Ck(),eE:e.eE}}async QVt(t){J(t);const e=[];for(const i of this.Hyt.GLt)for(const s of i.KLt)e.push(this.uWt(s,t));await Promise.all(e)}async uWt(t,e){try{const i=await this.zut.drt([t.hLt.Fyt]);J(e),void 0===i||t.hLt.TFt||await this.eWt(t,e)}catch(t){th(t)}}rWt(){for(const t of this.Hyt.GLt)for(const e of t.KLt)e!==this.nWt&&void 0!==e.hLt.MOt&&(e.hLt.TFt?this.cWt(e):e.hLt.YFt())}cWt(t){if(0!==t.hLt.Mrt.length){if(!this.nWt)return this.nWt=t,void this.nWt.hLt.JFt(0,void 0);if(this.lWt(this.nWt),!this.lWt(t)&&void 0===t.hLt.MOt){const e=this.dWt(t,this.nWt);UY.VLt(bt,"Assuming global timeline offset of "+e+"s for rendition "+t.hLt.Fyt+"."),t.hLt.JFt(e,void 0)}}}dWt(t,e){if(pj(t)){const i=t.hLt.Mrt[0],s=e.hLt.Mrt[0];return UY.VLt(bt,"Synchronizing by start of VOD: "+s.WO+" vs "+i.WO),s.WO-i.HOt}const i=function(t,e){let i=t.length-1,s=e.length-1;for(;i>=0&&s>=0;){const n=t[i],r=e[s];if(n.dOt>r.dOt)i--;else if(n.dOt<r.dOt)s--;else if(n.aOt){if(r.aOt)return{segment:n,referenceSegment:r};s--}else i--}return}(t.hLt.Mrt,e.hLt.Mrt);if(void 0!==i){const{segment:t,referenceSegment:e}=i;return UY.VLt(bt,"Synchronizing by start of discontinuity #"+e.dOt+": "+e.WO+" vs "+t.WO),e.WO-t.HOt}const s=yj(t.hLt.Mrt);if(void 0!==s){const t=yj(e.hLt.Mrt);if(void 0!==t){UY.VLt(bt,"Synchronizing by PDT:",t.cOt.toISOString()+" vs "+s.cOt.getTime());return t.WO-s.HOt-(t.cOt.getTime()-s.cOt.getTime())/1e3}}const n=wj(e),r=wj(t);var o;const h=null!=(o=t.hLt.MOt)?o:0;return UY.VLt(bt,"Synchronizing by last segment:",n+" vs "+r),n-r+h}lWt(t){const e=this.Hyt.NVt(t);if(!e)return!1;if(pj(e))return!1;const i=function(t,e){return Hm(t,(t=>void 0!==t.wit&&e.$Ft(t.dOt)))}(e.hLt.Mrt,this.Hyt.LL);if(void 0===i)return!1;if(e.hLt.NFt===i.dOt)return!0;const s=this.Hyt.LL.aVt(i.wit,i)._F()-i.HOt;return UY.VLt(bt,"Synchronize by media timestamp: "+s+"s for rendition "+t.hLt.Fyt+"."),e.hLt.JFt(s,i.dOt),(void 0===this.nWt||void 0===this.nWt.hLt.NFt||this.nWt.hLt.NFt<i.dOt)&&(this.nWt=e),!0}KVt(t,e){var i;(this.Hyt.WOt(t,e),gt(t)&&e)&&(this.zVt=e,this.cWt(e),this._o(new vj(e)),null==(i=this.sWt.get(e.IC))||i.Vb(),this.sWt.delete(e.IC));this._o(new lt)}fWt(t,e){for(const i of this.Hyt.GLt){const s=Fo(i.ZLt,(t=>t.hLt===e));void 0!==s&&void 0!==t.dPt&&(s.Jrt=uK(s.Jrt,t));const n=Fo(i.HLt,(t=>t.hLt===e));void 0!==n&&void 0!==t.cPt&&(n.Jrt=uK(n.Jrt,t)),i.SOt||void 0===s&&void 0===n||(i.Jrt=uK(i.Jrt,t))}}_Wt(t,e){for(const i of this.Hyt.GLt){const s=Fo(i.ZLt,(t=>t.hLt===e));void 0!==s&&void 0===t.dPt&&i.IOt(s);const n=Fo(i.HLt,(t=>t.hLt===e));void 0!==n&&void 0===t.cPt&&i.IOt(n)}}Xw(){this.Ro(),this.Hyt.Xw(),this.sWt.forEach((t=>t.jw())),this.sWt.clear()}constructor(t,e,i,s,n){super(),this.fW=t,this.zut=e,this.mTt=i,this.GVt=!1,this.ZVt=!1,this.nWt=void 0,this.zVt=void 0,this.sWt=ne(),this.Hyt=new dj(s,n)}};function pj(t){return t.hLt._Ot||t.hLt.mOt===rK._Bt}function wj(t){const e=t.hLt.Mrt;return e[e.length-1].UO}function yj(t){return Hm(t,(t=>void 0!==t.cOt))}function bj(t){if(void 0!==t.hLt.WBt&&!t.hLt._Ot&&!(void 0===t.hLt.kFt||Ms.Wg()/1e3-t.hLt.kFt>=t.hLt.WBt/2))return t.hLt.UBt?XK.tFt:XK.$Ot}var Aj=class{get nt(){return this.zgt}GFt(t){if(0===t.hLt.fOt.length)return;this.vWt||(this.vWt=this.WB.OI(Li.eW,void 0,void 0,void 0,void 0,Lr.DATE_RANGE),this.zgt.tt(this.vWt));KK(this.vWt,t.hLt.fOt,(e=>{var i;return null!=(i=t.hLt.ROt(e))?i:NaN}))}constructor(t,e){this.mWt=t=>{this.GFt(t.gLt)},this.vEt=t,this.WB=e,this.zgt=new Wo,this.vEt.bn(bn.OVt,this.mWt)}};r();var Sj=class extends pe{constructor(){super(qt.tLt)}};r(),r(),r();var Tj=class{get gWt(){return this.C2}get wR(){return RV(this.Cot.wR,this.Cot.w3)}get Mrt(){return this.Xbt}get $gt(){return this.Kgt}pWt(t){var e;return null==(e=this.wWt(t))?void 0:e.gLt}yWt(t){this.C2=t,this.bWt()}Sdt(t,e,i,s,n,r){this.Xbt.push({gLt:t,Zut:e,AWt:se.gB(n,r),SWt:se.gB(i,s)}),this.bWt()}wWt(t){return Fo(this.Xbt,(e=>e.SWt.wr(t)))}aut(t){return Fo(this.Xbt,(e=>e.Zut===t))}plt(t,e){return Fo(this.Xbt,(i=>i.gLt===t&&hj(i.Zut,e)))}a3(){const t=this.wR;t.V>0&&(this.Kgt=t.Tn(t.V-1))}bWt(){const t=this.Cot.wR;this.Xbt=this.Xbt.filter((e=>0!==t.jn(e.SWt).V))}constructor(t){this.Cot=t,this.Xbt=[],this.C2=void 0,this.Kgt=void 0}},kj=class{get Tw(){return this.Sp}get TWt(){return dT(this.Sp)}get kWt(){return this.Eat}get EWt(){return this.xWt}get XIt(){return void 0!==this.RWt}get IWt(){return this.CWt}PWt(){if(this.XIt)throw new g("Cannot perform new operation while BufferAppender is still busy")}Sot(t){this.Cot!==t&&(this.PWt(),this.Cot=t,this.Eat=new Tj(t))}DWt(){return this.RWt?this.RWt.Ub:Promise.resolve()}NWt(t){const e=this.Eat.$gt;return void 0!==e&&this.MWt(t,e)}MWt(t,e){var i;const s=_.min(t,e);var n;return null!=(n=null==(i=this.Eat.wR.YL().iB(this.EWt)._B(s))?void 0:i.wr(e))&&n}LWt(t){return this.Eat.pWt(t)}jw(){this.GT.jw(),this.GT=new da}A2(t){this.PWt(),this.RWt=new os;const e=e=>{this.OWt.BWt(t),this.FWt(e)};this.S2(t,this.GT.Uw).then(e,e)}async S2(t,e){UY.VLt(Ru,"Appending initializer",Fe(t.VWt.Fyt)),await this.Cot.A2(t,e),UY.VLt(Ru,"Appended initializer",Fe(t.VWt.Fyt)),this.Eat.yWt(t)}jlt(t){this.PWt(),this.RWt=new os;const e=e=>{this.OWt.BWt(t),this.FWt(e)};this.WWt(t,this.GT.Uw).then(e,e)}async WWt(t,e){const i=t.gLt;if(void 0===i.hLt.tBt)throw new g("MediaBufferWrapper - Cannot append HLSAsset to "+this.Sp+" MediaBuffer for a HLSRendition with an undefined targetDuration.");const s=this.Eat.wR.GL,n=this.Cot.wR;UY.VLt(Ru,"Appending",Fe(t.VWt.Fyt)),await this.Cot.g2(t,e),UY.VLt(Ru,"Appended",Fe(t.VWt.Fyt),s,this.Eat.wR.GL);const r=t.WO,o=r+t.ct,h=t.VWt,a=h.WO;var u;const c=h.WO+(null!=(u=h.ct)?u:0);this.Eat.Sdt(i,h,r,o,a,c);const l=this.Cot.wR.iB(n),d=this.Eat.plt(i,h);if(this.Tw===ee.mE)if(d)if(this.UWt(d))if(0===l.V){if(void 0===this.Eat.aut(h)){const t=this.Cot.w3.jn(new se([r,o]));this.xWt=this.xWt.tB(t)}}else{const t=l.Sn(0),e=new se([t,o]);if(this.xWt=this.xWt.iB(e),t>r){const e=this.Cot.w3.jn(new se([r,t]));this.xWt=this.xWt.tB(e)}}else{const t=l.V>0&&l.Sn(0)<r?l.Sn(0):r;this.xWt=this.xWt.iB(new se([t,o]))}else if(0===l.V){const t=this.Cot.w3.jn(new se([r,o]));this.xWt=this.xWt.tB(t)}else{var f;if(t.VWt.LOt)return;const e=l.Sn(0),i=null==(f=n._B(r))?void 0:f.Tn(0),s=i&&i>r?i:r;if(e>s){const t=this.Cot.w3.jn(new se([s,l.Sn(0)]));this.xWt=this.xWt.tB(t)}}t.VWt.OOt&&this.Eat.a3()}UWt(t){const e=t.SWt,i=e.Sn(0),s=e.Tn(e.V-1),n=e.ZL(0),r=e.zL(e.V-1);return this.xWt.nB(i,s,n,r)}constructor(t,e,i,s,n){this.RWt=void 0,this.GT=new da,this.xWt=se.pB(),this.CWt=!1,this.FWt=t=>{this.RWt&&(t?hD(t)&&this.TWt?this.GWt.Oj(this.Cot.wR.vB)?this.RWt.Vb():this.RWt.Wb(t):Je(t)?this.RWt.Vb():(this.CWt=!0,this.RWt.Wb(t)):this.RWt.Vb(),this.RWt=void 0)},this.Sp=t,this.OWt=i,this.Cot=e,this.Eat=s,this.GWt=n}};r(),r();var Ej=class{async HWt(t,e,i,s){const n=await this.ZWt(e,s);return await this.XWt.HWt(t,n,i)}async ZWt(t,e){var i;if((null==(i=this.zWt)?void 0:i.Xu)!==t){UY.VLt("HLSDecryptor","Fetching new AES-128 decryption key from "+t+".");const i=await this.fW.Qk({Xu:t,jk:Rr.bk,AE:xe.GET,Uw:e,Tw:Mr.oE,kE:xu._E,xE:this.mTt}),s=await i.Dk(),n=new j(s);this.zWt={Xu:t,Kk:n}}return this.zWt.Kk}constructor(t,e,i){this.XWt=t,this.fW=e,this.mTt=i,this.zWt=void 0}};r();var xj=class{async Qk(t,e,i,s,n){const r=await this.qWt(t,e,i,Rr.bk,s,n),o=await r.Dk(n);return{httpStatusCode:r.Yk,response:new j(o)}}async YWt(t,e,i,s,n){return(await this.qWt(t,e,i,Rr.Sk,s,n)).Nk(n)}async qWt(t,e,i,s,n,r){let o;t._At&&(o=iK(t._At.Sn,t._At.V),0===o[0]&&o[1]===cf&&(o=void 0));const h=o?{Range:"bytes="+o[0]+"-"+o[1]}:void 0,a=new wt({Xu:t.Mx,jk:s,Jk:h,xE:this.mTt,AE:xe.GET,Tw:e,kE:i,EE:this.vut,PE:s===Rr.Sk,RE:n,Uw:r});try{const e=await this.zut.grt(t.Mx,o);if(J(r),void 0!==e)return null==n||n(e.buffer.byteLength,e.buffer.byteLength),new Vb({Qk:a,jk:a.jk,Kk:e.buffer})}catch(t){th(t)}return await Ci((()=>ou(this.fW.Qk(a),a.Uw)),r,this.Unt)}constructor(t,e,i,s,n=2){this.fW=t,this.zut=e,this.vut=i,this.mTt=s,this.Unt=n}};r();var Rj=class{KWt(){return this.jWt.hLt.VBt}async QWt(t,e,i){if(!this.KWt())throw new g("Could not perform blocking playlist update.");const s=this.JWt,n={YBt:t,LFt:e};return void 0!==s&&function(t,e,i){if(t.YBt===e.YBt){if(t.LFt===e.LFt)return!0;if(0===t.LFt&&void 0===e.LFt)return!0}if(t.YBt===e.YBt+1&&0===t.LFt&&void 0!==e.LFt){const t=i.aut(e.YBt);if(t&&t.Fyt&&e.LFt>=t.hOt.length)return!0}return!1}(s,n,this.jWt.hLt)||(await this.$Wt(),this.tUt(n)),this.vEt.iWt(this.jWt,i)}eUt(t){return this.tUt(),this.vEt.iWt(this.jWt,t)}tUt(t){if(!this.iUt&&!this.sUt){const e=()=>{this.iUt=void 0};this.iUt=this.nUt(t,this.rUt.Uw).then(e,e)}}async $Wt(){this.iUt&&(this.rUt.jw(),this.rUt=new da,await this.iUt.catch(Tt),this.iUt=void 0)}async nUt(t,e){let i=t;for(;;){if(J(e),this.jWt.hLt._Ot&&this.jWt.hLt.TFt)return;null!=i||(i=this.oUt()),this.JWt=i;try{if(i)await this.vEt.JVt(this.jWt,i.YBt,i.LFt,e);else{const t=Ms.Wg()-this.Pn,i=1e3*this.jWt.hLt.EFt;t<i&&await ke(i-t,e),await this.vEt.eWt(this.jWt,e)}}catch(t){throw this.JWt=void 0,th(t),this.vEt.tWt(this.jWt),t}i=void 0,this.Pn=Ms.Wg()}}oUt(){const t=this.jWt.hLt;if(!t.VBt||t._Ot||0===t.Mrt.length)return;const e=t.Mrt[t.Mrt.length-1];return e.Fyt?{YBt:e.YBt+1,LFt:t.SFt?0:void 0}:{YBt:e.YBt,LFt:e.hOt.length}}Xw(){this.sUt=!0,ah(this.$Wt())}constructor(t,e){this.iUt=void 0,this.rUt=new da,this.Pn=-1/0,this.JWt=void 0,this.sUt=!1,this.vEt=t,this.jWt=e,this.tUt()}};r();var Ij=function(t){return t[t.uBt=0]="uBt",t[t.cBt=1]="cBt",t[t.nE=2]="nE",t[t.rE=3]="rE",t}({});r(),r();var ot="AssetExtractor",Cj=class{hUt(t,e,i){let s=e;for(const e of this.aUt){if(s>=t)return!0;if(s<e.Sn)return!1;if(s<e.Tn){if(i<=e.Tn)return!0;s=e.Tn}}return s>=t}uUt(t,e){const i=[];for(let s=0;s<this.aUt.length;s+=1){const n=this.aUt[s],r=t-n.Sn,o=n.Kk.length,h=_.min(o,_.max(r,0)),a=_.max(0,e+r),u=Rc(n.Kk,h,a);u.length&&(s=this.cUt(s,n,t,h,a),i.push(u))}return i}lUt(t,e){this.aUt.push({Sn:t,Tn:t+e.length,Kk:e})}cUt(t,e,i,s,n){let r=t;this.aUt.splice(r,1),r-=1,e.Sn<i&&(r+=1,this.aUt.splice(r,0,{Sn:e.Sn,Tn:i,Kk:Rc(e.Kk,0,s)}));const o=i+n-s;return o<e.Tn&&(r+=1,this.aUt.splice(r,0,{Sn:o,Tn:e.Tn,Kk:Rc(e.Kk,n)})),r}constructor(){this.aUt=[]}},Pj=class{get dUt(){return this.fUt}async _Ut(){const t=await this.Od.read();if(t.done)throw this.fUt=1/0,new g("No more data can be read from the given stream.");return this.fUt+=t.value.length,t.value}async vUt(t){await this.Od.cancel(t)}constructor(t,e){this.fUt=e,this.Od=t.getReader()}},Dj=class{mUt(){this.gUt.Vb(),this.gUt=new os}pUt(t){const{vAt:e,mAt:i}=Mj(this.ZOt._At),s=this.wUt.uUt(e,i-e);UY.VLt(ot,"Collected "+s.length+" chunks.");for(const e of s)t.enqueue(e)}async readAndSliceOutAssetBytes(t){await this.yUt.Ub;const{vAt:e,mAt:i}=Mj(this.ZOt._At);try{for(;;){const s=this.Od.dUt,n=await this.Od._Ut(),r=n.length;UY.VLt(ot,"Read "+r+" at "+s+" for extraction of "+Fe(this.ZOt));const o=_.min(s+r,e)-s;if(!(o>0)){if(s+r<=i)return UY.VLt(ot,"Extracting the read data range for extraction of "+Fe(this.ZOt)),t.enqueue(n),this.mUt(),ah(this.readAndSliceOutAssetBytes(t));{const e=i-s,o=Rc(n,0,e),h=Rc(n,e);return o.length>0&&(UY.VLt(ot,"Extracting "+o.length+" bytes for extraction of "+Fe(this.ZOt)),t.enqueue(o)),UY.VLt(ot,"Of the read "+r+" bytes, the last "+h.length+" will be stored locally for extraction of "+Fe(this.ZOt)),this.wUt.lUt(s+e,h),UY.VLt(ot,"Extraction of "+Fe(this.ZOt)+" completed as the entire request has been fulfilled."),this.bUt(t),void(this.AUt&&(UY.VLt(ot,"Aborting stream upstream as no more bytes are needed from "+Fe(this.ZOt)+"."),await this.Od.vUt("AssetExtraction - AbortOnEnd")))}}{const e=Rc(n,0,o),i=Rc(n,o);if(UY.VLt(ot,"Of the read "+r+" bytes, the first "+o+" will be stored locally for extraction of "+Fe(this.ZOt)),this.wUt.lUt(s,e),i.length>0)return UY.VLt(ot,"Extracting "+i.length+" bytes for extraction of "+Fe(this.ZOt)),t.enqueue(i),this.mUt(),ah(this.readAndSliceOutAssetBytes(t))}}}catch(e){UY.VLt(ot,"Extraction of "+Fe(this.ZOt)+" completed as the entire source stream has been read."),this.bUt(t)}}bUt(t){t.close(),this.mUt(),this.SUt.Vb()}start(t){UY.VLt(ot,"Preparing to push all collected data to controller for extraction of "+Fe(this.ZOt)),this.pUt(t),UY.VLt(ot,"Collected data pushed to controller for extraction of "+Fe(this.ZOt));const{mAt:e}=Mj(this.ZOt._At);this.Od.dUt>=e?(UY.VLt(ot,"Extraction of "+Fe(this.ZOt)+" completed as the entire request has been fulfilled."),this.bUt(t)):(UY.VLt(ot,"Continuing read from original stream for extraction of "+Fe(this.ZOt)),ah(this.readAndSliceOutAssetBytes(t)))}get TUt(){return this.SUt.Ub}pull(){return this.yUt.Vb(),this.yUt=new os,this.gUt.Ub}constructor(t,e,i,s){this.SUt=new os,this.ZOt=t,this.Od=e,this.wUt=i,this.AUt=s,this.yUt=new os,this.gUt=new os}},Nj=class{EO(t){if(!oK(this.ZOt,t))return!1;const{vAt:e,mAt:i}=Mj(t._At);return this.wUt.hUt(this.kUt.dUt,e,i)}async cgt(t,e){void 0===e&&(e=!1);const i=this.kUt,s=this.wUt;if(UY.MN(ot,"Extracting data from "+Fe(t)+" out of "+Fe(this.ZOt)),this.EUt&&(UY.VLt(ot,"Awaiting previous extraction before extracting "+Fe(t)+" out of "+Fe(this.ZOt)),await this.EUt),!this.EO(t))throw new g("The extractor does not contain the data requested");const n=new Dj(t,i,s,e);return this.EUt=n.TUt,new _h(n)}constructor(t,e){this.ZOt=e;const{vAt:i}=Mj(this.ZOt._At);this.kUt=new Pj(t,i),this.wUt=new Cj}};function Mj(t){if(t){const e=t.Sn;return{vAt:e,mAt:void 0!==t.V?e+t.V:cf}}return{vAt:0,mAt:cf}}var Lj=class{async $n(){const t=await this.xUt.YWt(this.ZOt,Mr.rE,xu.iE,void 0,this.GT.Uw);return new Nj(t,this.ZOt)}EO(t){return oK(this.ZOt,t)}async cgt(t,e){void 0===e&&(e=!1);const i=await this.gpt;return await ou(i.cgt(t,e),this.GT.Uw)}jw(){this.gpt.catch(Tt),this.GT.jw()}constructor(t,e){this.ZOt=t,this.xUt=e,this.GT=new da,this.gpt=this.$n()}};r();var Bj=class extends pe{constructor(t){super(Hj.RUt),this.EE=t}};r();var Oj=class extends pe{constructor(t,e,i,s,n,r,o){super(Hj.IUt),this.uri=t,this.CUt=e,this.EE=i,this.mediaSequenceNumeber=s,this.mediaTrackId=n,this.PUt=r,this.httpStatusCode=o}};function Fj(t,e,i){const s=Wu(i)?i:i.VOt;if(e.$Ft(s.dOt)){if(void 0!==i.wit)return e.aVt(i.wit,i)._F();if(i!==s&&void 0!==s.wit){const t=e.aVt(s.wit,s)._F();return i.WO+(t-s.WO)}}const n=t.hLt.aut(s.YBt-1);if(void 0!==n&&e.$Ft(n.dOt)){if(n.hOt.length>0){const t=n.qOt(n.hOt.length-1);if(void 0!==t.wit){const s=e.aVt(t.wit,t)._F();return i.WO+(s-t.WO)}}if(void 0!==n.wit){const t=e.aVt(n.wit,n)._F();return i.WO+(t-n.WO)}}const r=t.hLt.aut(s.YBt+1);if(void 0!==r&&e.$Ft(r.dOt)){if(r.hOt.length>0){const t=r.qOt(0);if(void 0!==t.wit){const s=e.aVt(t.wit,t)._F();return i.WO+(s-t.WO)}}if(void 0!==r.wit){const t=e.aVt(r.wit,r)._F();return i.WO+(t-r.WO)}}return i.WO}function Vj(t){return void 0!==t.wit}function Wj(t,e,i,s){for(let n=e;n<t.length;n++){const e=t[n];if(e.dOt!==i)break;if(Vj(e)){if(s(e,n))break}}}function Uj(t,e,i,s){for(let n=e;n>=0;n--){const e=t[n];if(e.dOt!==i)break;if(Vj(e)){if(s(e,n))break}}}r();var Gj="HlsPlaylistDownloader",Hj=function(t){return t.RUt="segmentdownloadprogress",t.IUt="segmentdownloaded",t}({}),Zj=class extends Co{DUt(t){this.NUt.Xw(),this.NUt=new Rj(this.vEt,t),this.XIt?this.MUt=t:(this.jWt=t,this.LUt=0,this.BUt=void 0,this.OUt=void 0)}get XIt(){return void 0!==this.FUt}DWt(){return this.FUt?this.FUt.Ub:Promise.resolve()}VUt(){return this.OWt.VUt()}WUt(t){this.OWt.WUt(t)}jw(){var t,e,i;this.UUt.jw(),this.UUt=new da,null==(t=this.GUt)||t.jw(),this.GUt=void 0,null==(e=this.HUt)||e.jw(),null==(i=this.ZUt)||i.jw(),this.HUt=void 0,this.ZUt=void 0,this.LUt=0,this.BUt=void 0,this.OUt=void 0}Xw(){this.NUt.Xw()}get gLt(){var t;return null!=(t=this.MUt)?t:this.jWt}get mCt(){if(!this.jWt.hLt._Ot||void 0===this.BUt)return!1;const t=this.jWt.hLt.aut(this.BUt);if(!t.OOt)return!1;if(void 0!==this.OUt){if(!t.qOt(this.OUt).OOt)return!1}return!0}XUt(t){const e=this.jWt.hLt.BFt(t);if(!e)return!1;if(void 0!==this.BUt){const i=e.YBt===this.BUt;return void 0!==this.OUt?e.YOt(t)===e.qOt(this.OUt)&&i:i}return!1}zUt(t){let e;if(void 0===this.BUt||t<this.LUt-1e-6)e=this.qUt(t);else if(e=this.YUt(this.BUt,this.OUt),void 0!==e){const[i,s]=e,n=Fj(this.jWt,this.vEt.Er.LL,null!=s?s:i),r=3*this.jWt.hLt.tBt;_.abs(n-t)>=r&&(e=this.qUt(t))}else if(this.jWt.hLt._Ot){if(this.jWt.hLt.aut(this.BUt).OOt&&(e=this.qUt(t),void 0!==e&&e[0].YBt===this.BUt))return}if(e){this.LUt=t;const[i,s]=e;return 0===(null==s?void 0:s.UOt)&&void 0!==i.ct?[i,void 0]:[i,s]}}qUt(t){let e,i;const s=this.jWt.hLt.Mrt;if(0===s.length)return;const n=this.vEt.Er.LL,r=H.vV(t),o=function(t,e,i){const s=t.hLt.Mrt;if(0===s.length)return;const n=t.hLt.OFt(i._F());if(!e.$Ft(n.dOt))return;const r=n.YBt-s[0].YBt,o=n.dOt;let h,a,u,c=0;if(Uj(s,r,o,((t,e)=>(h=t,c=e,!0))),void 0===h&&(Wj(s,r+1,o,((t,e)=>(h=t,c=e,!0))),void 0===h))return;return e.aVt(h.wit,h).wF(i)?(a=h,Wj(s,c+1,o,(t=>e.aVt(t.wit,t).vF(i)?(u=t,!0):(a=t,!1)))):(u=h,Uj(s,c-1,o,(t=>e.aVt(t.wit,t).wF(i)?(a=t,!0):(u=t,!1)))),void 0!==a&&void 0!==u?[a,u]:void 0}(this.jWt,n,r);let h;if(void 0!==o){const[t,e]=o,i=n.aVt(t.wit,t),s=n.aVt(e.wit,e),a=r.kF(i)._F()/s.kF(i)._F()*(e.WO-t.WO);h=t.WO+a}else h=t;const a=s[s.length-1];return a.UO<=h?(e=a,i=a.jOt(h)):s[0].WO>h?(e=s[0],i=e.qOt(0)):(e=this.jWt.hLt.BFt(h),i=null==e?void 0:e.jOt(h)),e?[e,i]:void 0}YUt(t,e){let i,s;if(i=this.jWt.hLt.aut(t),i&&void 0!==e){if(0===i.hOt.length)return[i,void 0];s=i.qOt(e+1)}return void 0!==i&&void 0!==s||(i=this.jWt.hLt.aut(t+1),s=null==i?void 0:i.qOt(0)),i?[i,s]:void 0}PWt(){if(this.XIt)throw new g("Cannot perform new operation while PlaylistDownloader is still busy")}KUt(t){this.PWt(),this.FUt=new os,this.jUt(t,this.UUt.Uw).then(this.QUt,this.QUt)}JUt(){this.NUt.tUt()}async jUt(t,e){if(this.jWt.hLt._Ot)return;let i=this.zUt(t);for(!i&&this.NUt.KWt()&&void 0!==this.BUt&&(await this.NUt.QWt(void 0===this.OUt?this.BUt+1:this.BUt,void 0!==this.OUt?this.OUt+1:void 0,e),i=this.zUt(t)),!i&&this.NUt.KWt()&&void 0!==this.BUt&&(await this.NUt.QWt(this.BUt+1,0,e),i=this.zUt(t));!i;){UY.MN(Gj,"No next segment / part available, need to update playlist before continuing."),await this.NUt.eUt(e);const s=this.gLt.hLt.Mrt;s[0].WO>t&&(this.OUt=void 0,this.BUt=void 0);s[s.length-1].YBt<this.BUt&&(this.OUt=void 0,this.BUt=void 0),i=this.zUt(t)}}$Ut(){return this.OWt.tGt()}eGt(){this.PWt();try{const t=this.jWt.hLt.FFt(nK.uBt);t&&this.iGt(t);const e=this.jWt.hLt.FFt(nK.cBt);e&&this.sGt(e)}catch(t){throw th(t),this.jWt.hLt.PFt=Ms.Wg(),this.vEt.tWt(this.jWt),t}}iGt(t){this.ZUt&&!this.ZUt.EO(t.Fyt)&&(this.ZUt.jw(),this.ZUt=void 0),this.ZUt||(this.ZUt=new Lj(t.Fyt,this.xUt))}sGt(t){this.HUt&&!this.HUt.EO(t.Fyt)&&(this.HUt.jw(),this.HUt=void 0),this.HUt||(this.HUt=new Lj(t.Fyt,this.xUt))}hut(t,e,i){this.PWt(),UY.MN(Gj,"Starting download of segment "+Fe(t.Fyt)+" and part "+(null==e?void 0:e.UOt)),this.FUt=new os,this.nGt(t,e,i,this.UUt.Uw).catch((t=>{throw th(t),this.jWt.hLt.PFt=Ms.Wg(),this.vEt.tWt(this.jWt),t})).then(this.QUt,this.QUt)}async nGt(t,e,i,s){let n;if(t.uOt){var r,o;if(!i||!hK(i.VWt.Fyt,null==(r=t.uOt)?void 0:r.Fyt)||t.dOt!==i.dOt){var h;null==(h=this.GUt)||h.jw(),this.GUt=new os;const e=this.rGt(t.uOt,t,s).then((()=>{this.GUt=void 0}));this.GUt.Qw(e)}n=null==(o=this.GUt)?void 0:o.Ub}await this.oGt(t,e,n,s)}async rGt(t,e,i){const s=await this.hGt(t,e,i),n=s.uOt.Kk.Kk.byteLength;this.OWt.aGt(s),this._o(new Oj(s.uOt.VWt.Fyt,s.Tw,this.Sp,e.YBt,s.gLt.IC,n,s.uOt.gct)),UY.VLt(Ru,"Download initializer complete",Fe(t.Fyt))}async oGt(t,e,i,s){const n=await this.uGt(t,e,s),r=n.Zut.Kk.Kk.byteLength;var o;i&&await ou(i,s),this.OWt.aGt(n),this._o(new Oj(n.Zut.VWt.Fyt,n.Tw,this.Sp,t.YBt,n.gLt.IC,r,n.Zut.gct)),UY.VLt(Ru,"Download complete",Fe(null!=(o=null==e?void 0:e.Fyt)?o:t.Fyt))}async uGt(t,e,i){let s;if(e){if(this.HUt)if(this.HUt.EO(e.Fyt)){const t=await this.HUt.cgt(e.Fyt),n=await He(t,i),r=new j(n);s=zj(e,await this.HWt(r,e.nOt,i),200)}else this.HUt.jw(),this.HUt=void 0;s||(UY.VLt(Ru,"Start download",Fe(e.Fyt)),s=await this.cGt(e,i))}else UY.VLt(Ru,"Start download",Fe(t.Fyt)),s=await this.cut(t,i);return this.BUt=t.YBt,this.OUt=null==e?void 0:e.UOt,{Tw:"Zut",Zut:s,gLt:this.jWt,dOt:t.dOt}}async hGt(t,e,i){let s;if(this.ZUt){var n;if(this.ZUt.EO(t.Fyt)){const n=await ou(this.ZUt.cgt(t.Fyt),i),r=await He(n,i),o=new j(r);s=Xj(t,e,await this.HWt(o,t.oOt?[t.oOt]:[],i),200)}UY.MN(Gj,"MAP is required for segment, downloading MAP data."),null==(n=this.ZUt)||n.jw(),this.ZUt=void 0}return s||(UY.VLt(Ru,"Start download",Fe(t.Fyt)),s=await this.lGt(t,e,i)),{Tw:"uOt",uOt:s,gLt:this.jWt,WO:e.WO,dOt:e.dOt,nOt:e.nOt}}async lGt(t,e,i){const{response:s,httpStatusCode:n}=await this.xUt.Qk(t.Fyt,Mr.nE,xu.hE,void 0,i),r=t.oOt?[t.oOt]:[];return Xj(t,e,await this.HWt(s,r,i),n)}async cut(t,e){if(!t.Fyt)throw new g("Internal error: attempted to download an incomplete segment");let i,s;try{this.dGt(t);const n=await this.xUt.Qk(t.Fyt,Mr.nE,xu.iE,this.fGt,e);i=n.response,s=n.httpStatusCode}finally{this._Gt()}return function(t,e,i){return{Kk:{Kk:e,Tw:Ce.iJ},Tw:Ij.nE,gct:i,VWt:t,dOt:t.dOt}}(t,await this.HWt(i,t.nOt,e),s)}async cGt(t,e){let i,s;try{this.dGt(t);const n=await this.xUt.Qk(t.Fyt,Mr.nE,xu.iE,this.fGt,e);i=n.response,s=n.httpStatusCode}finally{this._Gt()}return zj(t,await this.HWt(i,t.nOt,e),s)}async HWt(t,e,i){const s=Fo(e,(t=>t.AE===$t.lBt));return s?s.Fyt&&s.LBt?await this.vGt.HWt(t,s.Fyt,s.LBt,i):(UY.lt(Gj,"Encountered an AES-128 encrypted segment for which no initialization vector could be determined."),t):t}dGt(t){var e,i,s;this.mGt=t,this.gGt=0,this.pGt=Ms.Wg(),this.wGt=0,this.yGt=null!=(s=null==(i=t.Fyt)||null==(e=i._At)?void 0:e.V)?s:0}_Gt(){this.mGt=void 0,this.gGt=0,this.pGt=0,this.wGt=0,this.yGt=0}bGt(){if(void 0!==this.mGt)return{Zut:this.mGt,AGt:this.wGt,SGt:this.yGt,TGt:Ms.Wg()-this.pGt}}kGt(t){return void 0!==this.mGt&&(0!==this.gGt&&(!(this.yGt>0&&this.wGt>=this.yGt)&&!(t-this.gGt<500)))}constructor(t,e,i,s,n,r,o,h){super(),this.MUt=void 0,this.FUt=void 0,this.mGt=void 0,this.gGt=0,this.pGt=0,this.wGt=0,this.yGt=0,this.UUt=new da,this.GUt=void 0,this.LUt=0,this.BUt=void 0,this.OUt=void 0,this.ZUt=void 0,this.HUt=void 0,this.QUt=t=>{this.MUt&&(this.jWt=this.MUt,this.MUt=void 0,this.LUt=0,this.BUt=void 0,this.OUt=void 0),this.FUt&&(t&&!Je(t)?this.FUt.Wb(t):this.FUt.Vb(),this.FUt=void 0)},this.fGt=(t,e)=>{this.wGt=t,t>0&&0===this.gGt&&(this.gGt=Ms.Wg()),void 0!==e&&(this.yGt=e),this._o(new Bj(this.Sp))},this.Sp=t,this.vEt=i,this.OWt=s,this.jWt=e,this.NUt=new Rj(i,e),this.vGt=new Ej(o,n,h),this.xUt=new xj(n,r,function(t){switch(t){case Qc.mE:return qh.mE;case Qc.vE:return qh.vE;case Qc.JV:case Qc.aBt:return qh.Tk;default:return qh.iE}}(e.Tw),h)}};function Xj(t,e,i,s){return{Kk:{Kk:i,Tw:Ce.iJ},Tw:Ij.uBt,gct:s,VWt:t,dOt:e.dOt}}function zj(t,e,i){return{Kk:{Kk:e,Tw:Ce.iJ},gct:i,Tw:Ij.cBt,VWt:t,dOt:t.VOt.dOt}}r();var qj=class{get gWt(){return this.EGt}get xGt(){const t=[];for(const i of this.RGt)if("Zut"===i.Tw){const s=i.Zut.VWt,n=Fj(i.gLt,this.kVt,s);var e;t.push({Zut:s,gLt:i.gLt,WO:n,UO:n+(null!=(e=s.ct)?e:0)})}return t}get IGt(){const t=[];return this.CGt.forEach((e=>{for(const i of e.PGt)"Zut"===i.Tw&&t.push({Zut:i.VWt,gLt:i.gLt,WO:i.WO,UO:i.WO+i.ct})})),t}aGt(t){"uOt"===t.Tw&&(this.EGt=t.uOt),this.RGt.push(t),this.DGt&&(this.DGt.Vb(),this.DGt=void 0)}VUt(){return this.RGt[0]}WUt(t){we(this.RGt,t)}tGt(){return null!=this.DGt||(this.DGt=new os),this.DGt.Ub}NGt(t){this.MGt(t.Cat).NGt(t)}LGt(t){return this.MGt(t).LGt()}BWt(t){this.MGt(t.Cat).BWt(t)}BGt(t){var e;null==(e=this.CGt.get(t))||e.Xw()}OGt(t){return this.MGt(t).OGt()}MGt(t){if(this.CGt.has(t))return this.CGt.get(t);{const e=new Yj;return this.CGt.set(t,e),e}}Fb(){this.FGt(),this.VGt()}FGt(){this.EGt=void 0,En(this.RGt)}VGt(){this.CGt.forEach((t=>t.Fb()))}Xw(){this.CGt.forEach((t=>t.Xw())),this.CGt.clear(),this.Fb(),this.DGt&&(this.DGt.jw(),this.DGt=void 0)}constructor(t){this.RGt=[],this.CGt=Oh(),this.DGt=void 0,this.EGt=void 0,this.kVt=t}},Yj=class{get PGt(){return this.WGt}NGt(t){this.WGt.push(t),this.UGt&&(this.UGt.Vb(),this.UGt=void 0)}LGt(){return this.WGt[0]}BWt(t){we(this.WGt,t)}OGt(){return null!=this.UGt||(this.UGt=new os),this.UGt.Ub}Fb(){En(this.WGt)}Xw(){this.Fb(),this.UGt&&(this.UGt.jw(),this.UGt=void 0)}constructor(){this.WGt=[],this.UGt=void 0}};r();var Kj=1e-6,jj=class{get wR(){return this.Pxt}get w3(){return this.Dxt}async A2(t,e){const i=t.Kk.Kk;if(this.GGt(i),this.HGt.Tw===Lr.TTML){this.kVt.$Ft(t.dOt)||await ou(this.kVt.eVt(t.dOt),e);const s=this.ZGt(i,t.dOt);for(const t of s)this.HGt._W(t)}}async g2(t,e){if(void 0===t.Kk)return;const i=t.WO,s=i+t.ct;this.Pxt=this.Pxt.tB(se.gB(i,s)).$L(Kj),this.A3(t.XGt,t.zGt),this.S3(i,s),this.kVt.$Ft(t.dOt)||await ou(this.kVt.eVt(t.dOt),e),this.b2(t.Kk.Kk,t.dOt,t.VWt)}b2(t,e,i){let s;this.GGt(t),s=this.HGt.Tw===Lr.WEBVTT?this.qGt(t,i):this.ZGt(t,e);for(const t of s)this.HGt._W(t)}qGt(t,e){const i=lE(t),s=i.L;var n;const r=null!=(n=i.VV)?n:{WV:H.DF,mh:H.DF};for(const t of s){const i=H.vV(t.WO).kF(r.mh).kO(r.WV),s=this.kVt.aVt(i,e)._F(),n=s+(t.UO-t.WO);t.rF(s,n)}return s}ZGt(t,e){const i=this.kVt.hVt(e)._F();return jE(t,this.HGt,{MV:0,LV:1/0,BV:i},au.APPLICATION_MP4)}GGt(t){this.HGt.Tw===Lr.DEFAULT&&(this.HGt.Tw=this.YGt(t)?Lr.WEBVTT:Lr.TTML)}YGt(t){return TE(Kg(jg(ra(t),0,_.min(t.byteLength,16)),new Ri))}A3(t,e){this.Dxt=this.Dxt.tB(se.gB(t,e)).$L(Kj)}S3(t,e){this.Dxt=this.Dxt.iB(se.gB(t,e))}constructor(t,e){this.Pxt=se.pB(),this.Dxt=se.pB(),this.HGt=t,this.kVt=e}};r(),r(),r();var Qj=class extends pe{constructor(t,e){super(St.KGt),this.gLt=t,this.Jrt=e}};r();var Jj=class extends pe{constructor(t){super(St.jGt),this.gLt=t}};r();var $j=class extends pe{constructor(t,e){super(St.QGt),this.gLt=t,this.oft=e}};r();var tQ=class extends pe{constructor(t,e){super(St.JGt),this.gLt=t,this.$Gt=e}},St=function(t){return t.KGt="tHt",t.QGt="eHt",t.JGt="iHt",t.jGt="sHt",t}({}),eQ=class extends Co{get nHt(){return this.rHt}oHt(t){for(const e of this.rHt)ms(t,e)||this.OWt.BGt(e);this.rHt=t}get XIt(){return void 0!==this.hHt}DWt(){var t,e;return null!=(e=null==(t=this.hHt)?void 0:t.Ub)?e:Promise.resolve()}PWt(){if(this.XIt)throw new g("Cannot perform new operation while transmuxer is still busy")}aHt(t,e){}uHt(t){this.PWt(),this.hHt=new os;const e=e=>{this.cHt(t,e)};this.lHt(t,this.GT.Uw).then(e,e)}dHt(t){this.PWt(),this.hHt=new os;const e=e=>{this.cHt(t,e)};this.fHt(t,this.GT.Uw).then(e,e)}cHt(t,e){this.hHt&&(!e||Je(e)||function(t){return t instanceof aj}(e)?(Je(e)||this.OWt.WUt(t),this.hHt.Vb(),this.hHt=void 0):this.hHt.Wb(e))}_Ht(t,e){this._o(new Qj(t,e))}vHt(t,e){this._o(new $j(t,e))}mHt(t,e,i){oj(e)&&this._o(new tQ(t,i))}gHt(t){this._o(new Jj(t))}NGt(t){ms(this.rHt,t.Cat)&&this.OWt.NGt(t)}pHt(t){return this.OWt.LGt(t)}BWt(t){this.OWt.BWt(t)}wHt(t){return this.OWt.OGt(t)}jw(){this.GT.jw(),this.GT=new da}constructor(t,e,i){super(),this.hHt=void 0,this.GT=new da,this.OWt=t,this.kVt=e,this.rHt=i}};function iQ(t,e){return oj(t)?0:_.min(t.WO,e)}function sQ(t,e){var i;return _.max(t.WO,e)+(null!=(i=t.ct)?i:0)}var nQ=class extends eQ{lHt(t,e){J(e);const i={Tw:"RCt",Kk:t.uOt.Kk,Cat:this.nHt[0],dOt:t.dOt,yHt:{Jrt:"",nOt:t.nOt},WO:t.WO,gLt:t.gLt,VWt:t.uOt.VWt};return this.NGt(i),Promise.resolve()}async fHt(t,e){J(e);const i=t.Zut.VWt;let s;void 0!==i.wit?(this.kVt.$Ft(t.dOt)||await ou(this.kVt.eVt(t.dOt),e),s=this.kVt.aVt(i.wit,i)._F()):s=i.WO;const n=iQ(i,s),r=sQ(i,n);var o;const h={Tw:"Zut",Kk:t.Zut.Kk,Cat:this.nHt[0],XGt:n,zGt:r,WO:s,ct:null!=(o=i.ct)?o:0,BV:0,dOt:t.dOt,gLt:t.gLt,VWt:t.Zut.VWt};this.NGt(h)}constructor(t,e,i){super(t,e,[i])}};function rQ(t,e){let i=se.pB();for(const s of t){let n=s.WO;if(s.gLt.hLt._Ot&&oj(s.Zut))n=0;else{const i=t=>s.gLt===t.gLt&&hj(t.Zut,s.Zut),r=Fo(t,i);if(void 0!==r)n=_.min(n,r.UO);else{const t=Fo(e,i);void 0!==t&&(n=_.min(n,t.SWt.Tn(0)))}}i=i.tB(se.gB(n,s.UO))}return i}r();var oQ=.001,hQ=class{get bHt(){return this.AHt}get gLt(){return this.SHt.gLt}DUt(t){this.SHt.DUt(t)}get XIt(){return this.SHt.XIt||this.THt.XIt||this.AHt.some((t=>t.XIt))}kHt(t){const e=t.slice();for(let t=this.AHt.length-1;t>=0;t--){const i=this.AHt[t];if(!i.TWt)throw new g("Invalid state");const s=rn(e,(t=>t.Tw===i.Tw));s>=0&&!i.IWt?(i.Sot(e[s]),uu(e,s)):uu(this.AHt,t)}for(const t of e){const e=new Tj(t);this.AHt.push(new kj(t.Tw,t,this.EHt,e,this))}e.length>0&&this.EHt.Fb();const i=t.map((t=>t.Tw));this.THt.oHt(i)}Oj(t){var e;const i=(null==(e=this.gZ)?void 0:e.Oj(t))||!1;return i&&(this.jw(),this.EHt.Fb()),i}xHt(t){for(const t of this.AHt)if(t.Tw!==ee.Tk||t.XIt)throw new g("Invalid state");const e=new Tj(t),i=new kj(ee.Tk,t,this.EHt,e,this);this.AHt=[i]}get gWt(){const t=this.EHt.gWt;if(t)return t;if(this.AHt.length>0){const t=this.AHt[0].kWt.gWt;if(t&&this.AHt.every((e=>e.kWt.gWt===t)))return t}}rut(){for(const t of this.AHt)t.kWt.bWt()}get RHt(){if(0===this.AHt.length)return se.pB();const t=rQ(this.EHt.xGt.concat(this.EHt.IGt),on(this.AHt,(t=>t.kWt.Mrt))).YL();let e=new se([0,1/0]);for(const t of this.AHt)e=e.jn(t.kWt.wR);for(const t of this.AHt)e=e.iB(t.EWt);return e=e.tB(t),e.$L(oQ)}get IHt(){if(0===this.AHt.length)return se.pB();const t=rQ(this.EHt.IGt,on(this.AHt,(t=>t.kWt.Mrt))).YL();let e=new se([0,1/0]);for(const t of this.AHt)e=e.jn(t.kWt.wR);return e=e.tB(t),e}zlt(t){const e=this.RHt._B(t,oQ);return e?e.Tn(e.V-1):t}XUt(t){return!!this.RHt._B(t,oQ)||this.SHt.XUt(t)}CHt(t){return this.IHt.wr(t,oQ)}PHt(t,e,i){for(const t of this.AHt){const i=t.kWt,s=i.$gt;if(void 0!==s&&e>=s&&!i.wR.YL().wr(s))return!0}return e-t<i}jw(){this.DHt(),this.NHt()}DHt(){this.SHt.jw()}NHt(){this.THt.jw(),this.bHt.forEach((t=>t.jw()))}Xw(){this.jw(),this.SHt.Xw()}constructor(t,e,i,s){this.SHt=t,this.EHt=e,this.THt=i,this.gZ=s,this.AHt=[]}};r();var aQ=class extends pe{constructor(){super(qt.sLt)}};r();var uQ=class extends pe{constructor(){super(qt.eLt)}};r(),r();var cQ="LazyMediaBuffer",lQ=class extends Co{get Mk(){return this.IT}get m3(){return this.Sp}get kd(){if(!this.Cot)throw new A(Qa.MEDIA_LOAD_ERROR,"Cannot get the configuration of an uninitialized MediaBuffer.");return this.Cot.kd}get bj(){return this.Pj}set bj(t){this.Pj=t,this.Cot&&(this.Cot.bj=t)}RJ(){return this.Cot?this.Cot.RJ():this.MHt}get wR(){return this.Cot?this.Cot.wR:se.pB()}get w3(){return this.Cot?this.Cot.w3:this.y3.FJ}get Ej(){return this.Mj}set Ej(t){this.Mj=t,this.Cot&&(this.Cot.Ej=t)}A3(t,e){UY.VLt(cQ,"Marking gap from "+t+" to "+e+"."),this.y3.WJ(t,e),this.Cot&&this.Cot.A3(t,e)}S3(t,e){UY.VLt(cQ,"Removing gap from "+t+" to "+e+"."),this.y3.UJ(t,e),this.Cot&&this.Cot.S3(t,e)}LHt(t){this.Cot=t,this.Cot.Ej=this.Mj,this.Cot.bj=this.Pj;const e=this.y3.FJ;for(let t=0;t<e.V;t++)this.Cot.A3(e.Sn(t),e.Tn(t));var i;this.MHt&&(UY.VLt(cQ,"End of stream"),null==(i=this.Cot)||i.a3());this.Cot.bn(oe.tJ,this.Ds),this.BHt.Vb(t)}OHt(t){return ou(this.BHt.Ub,t)}async g2(t,e,i){const s=await this.OHt(i);await s.g2(t,e,i)}async T3(){const t=await this.OHt();await t.T3()}async A2(t,e,i){const s=await this.OHt(i);await s.A2(t,e,i)}async eT(t,e,i){const s=await this.OHt(i);await s.eT(t,e,i)}async F2(t,e){const i=await this.OHt();await i.F2(t,e)}a3(){this.MHt=!0,this.Cot&&this.Cot.a3()}dJ(t){return!!this.Cot&&this.Cot.dJ(t)}async _J(t){const e=await this.OHt();await e._J(t)}async yn(){var t;this.Ro(),null==(t=this.Cot)||t.vn(oe.tJ,this.Ds)}constructor(t,e){super(),this.Sp=t,this.FHt=e,this.IT=void 0,this.Cot=void 0,this.BHt=new os,this.Pj=20,this.MHt=!1,this.Mj=30,this.y3=new jD}},dQ="LazyMediaSource",fQ=class{get kd(){return{Tw:In.wW,g4:[],sH:[]}}get h4(){return this.VHt}get a4(){return this.WHt}get wR(){return this.JG?this.JG.wR:se.pB()}get ct(){return this.JG?this.JG.ct:this.MA}get RJ(){return!!this.JG&&this.JG.RJ}get hI(){return this.JG?this.JG.hI:new se([0,1/0])}d4(t){this.MA=t,this.JG&&this.JG.d4(t)}a3(){this.mit=!0,this.JG&&this.JG.a3()}J2(){this.mit=!1,this.JG&&this.JG.J2()}m4(t,e,i,s){this.UHt=t,this.GHt=e,this.HHt=Boolean(i),this.ZHt=Boolean(s),this.JG&&this.JG.m4(t,e,i,s)}dJ(t){return!this.JG||this.JG.dJ(t)}async _J(t){if(!this.dJ(t))throw new g("LazyMediaSource - Unable to reconfigure MediaSource.");if(this.JG)await this.JG._J(t);else{var e,i;this.WB.p7();const s=await this.WB.$n(t);S(this.MA)||s.d4(this.MA),this.mit&&s.a3(),s.m4(this.UHt,this.GHt,this.HHt,this.ZHt),UY.VLt(dQ,"The MediaSource has been loaded."),this.XHt=!0,this.JG=s,null==(e=this.VHt)||e.LHt(this.JG.h4),null==(i=this.WHt)||i.LHt(this.JG.a4),this.zHt.Vb(s),this.WB.w7()}}mJ(t){this.JG.mJ(t)}async Xw(){this.JG&&await this.JG.Xw()}constructor(t,e,i){this.WB=t,this.VHt=void 0,this.WHt=void 0,this.zHt=new os,this.JG=void 0,this.XHt=!1,this.MA=NaN,this.mit=!1,this.UHt=0,this.GHt=1/0,this.HHt=!1,this.ZHt=!1,e&&(UY.VLt(dQ,"Created lazy media buffer for audio."),this.VHt=new lQ(ee.vE,this)),i&&(UY.VLt(dQ,"Created lazy media buffer for video."),this.WHt=new lQ(ee.mE,this))}};function _Q(t,e){return void 0===e&&(e=!1),function(i,s){void 0===s&&(s="*");let n=mQ(i,"tag");const r=mQ(null==s?"*":s,"range"),o=[];let h,a,u,c=-1;for(;++c<r.length;)if(h=r[c].toLowerCase(),e||"*"!==h){for(a=-1,u=[];++a<n.length;)if(t(n[a].toLowerCase(),h)){if(!e)return n[a];o.push(n[a])}else u.push(n[a]);n=u}return e?o:void 0}}r();_Q(((t,e)=>"*"===e||t===e||Ga(t,e+"-")),!0),_Q(((t,e)=>{const i=t.split("-"),s=e.split("-");let n=0,r=0;if("*"!==s[r]&&i[n]!==s[r])return!1;for(n++,r++;r<s.length;)if("*"!==s[r]){if(!i[n])return!1;if(i[n]!==s[r]){if(1===i[n].length)return!1;n++}else n++,r++}else r++;return!0}),!0);var vQ=_Q(((t,e)=>{let i,s=e;for(;;){if("*"===s||t===s)return!0;if(i=s.lastIndexOf("-"),i<0)return!1;"-"===s.charAt(i-2)&&(i-=2),s=s.slice(0,i)}}));function mQ(t,e){const i=t&&"string"==typeof t?[t]:t;if(!i||"object"!=typeof i||!("length"in i))throw new g("Invalid "+e+" `"+i+"`, expected non-empty string");return i}r(),r();var gQ=16384,pQ=71,wQ=188,yQ=2,bQ=3,AQ=function(t){return t[t.iE=0]="iE",t[t.jC=1]="jC",t[t.qHt=2]="qHt",t[t.YHt=3]="YHt",t}({});function SQ(t){return TQ(t)?1:function(t){return function(t){if(t.length<yQ*wQ)return-1;const e=t.length<bQ*wQ?yQ:bQ,i=_.min(1e3,t.length-e*wQ);for(let s=0;s<=i;s++){let i=!0;for(let n=0;n<e;n++)if(t[s+n*wQ]!==pQ){i=!1;break}if(i)return s}return-1}(t)>=0}(t)?2:function(t){return null!==bL(ra(t),new Ri)}(t)?3:0}function TQ(t){const e=si(t,0,_.min(t.length,gQ));return nr.tN(ra(e))}var kQ=class{get Tw(){return this.Sp}get wR(){return this.Cot.wR}get w3(){return this.Cot.w3}KHt(t){return this.Cot===t}async A2(t,e){if(this.Cot.kd.Mk!==t.yHt.Jrt){const i={Mk:t.yHt.Jrt};if(!this.Cot.dJ(i))throw new KN(this.Cot.kd.Mk,t.yHt.Jrt);await this.Cot._J(i),J(e)}await this.Cot.A2(t.Kk,{W1:t.gLt.IC},e),void 0!==this.NDt&&this.Sp===ee.mE&&TQ(t.Kk.Kk)&&this.NDt.Got(t.Kk.Kk)}async g2(t,e){J(e),UY.MN("HlsMediaBuffer","Got media data, appending to "+this.Sp+" MediaBuffer: "+Fe(t.VWt.Fyt));const i=t.XGt,s=t.zGt,n={wit:t.WO,ct:t.ct,BV:t.BV,W1:t.gLt.IC};void 0!==t.Kk&&(await this.Cot.g2(t.Kk,n,e),this.jHt(t.Kk,t)),this.QHt(i,s)}jHt(t,e){var i;if(!TQ(t.Kk))return;const s=e.WO,n=s+e.ct,r=e.BV;if(null==(i=this.spt)||i.Sdt(t.Kk,s,r),void 0!==this.NDt&&this.Sp===ee.mE){const i=e.VWt.OOt;this.NDt.Sdt(t.Kk,s,n,r,e.gLt,i)}const o=[];void 0!==this.spt&&o.push(this.spt),void 0!==this.NDt&&o.push(this.NDt),Tx(this.wR,o)}QHt(t,e){const i=this.Cot.wR,s=new se([t,e]).iB(i);for(let t=0;t<s.V;t++)this.Cot.A3(s.Sn(t),s.Tn(t));for(let t=0;t<i.V;t++)this.Cot.S3(i.Sn(t),i.Tn(t))}A3(t,e){this.Cot.A3(t,e)}S3(t,e){this.Cot.S3(t,e)}constructor(t,e,i,s){this.Sp=t,this.Cot=e,this.spt=i,this.NDt=s}};function EQ(t){if(t.Tw!==Qc.aBt||void 0===t.dLt)return;const e=t.dLt.match(/^CC([1-4])$/);if(e)return Number(e[1]);const i=t.dLt.match(/^SERVICE([\d+])$/);return i?Number(i[1]):void 0}r(),r(),r();var xQ=class{iBt(t){var e,i,s;return null==(s=null==(i=this.JG)||null==(e=i.a4)?void 0:e.dJ(t))||s}sBt(t){var e,i,s;return null==(s=null==(i=this.JG)||null==(e=i.h4)?void 0:e.dJ(t))||s}constructor(t){this.JG=t}},Aa="LLHLSPlayer",RQ=[Zc.OL,Zc.FL,Zc.VL,Zc.iC],IQ=[Ti.Yy,Ti.Ey,Ti.Ly,Ti.Ny],CQ=2e3,PQ=class extends Co{get KB(){var t;const e=[this.JHt,this.$Ht].filter(Bo);if(0===e.length||this.ct!==1/0)return;const i=null==(t=this.bR)?void 0:t.getTime();if(i){return(Date.now()-i)/1e3}let s;for(const t of e){const e=t.hLt.hI;if(0===e.V)continue;const i=e.Tn(e.V-1)+t.hLt.GSt,n=t.hLt.RFt,r=i+(null!=n?n:0)-this.ER;(!s||s<r)&&(s=r)}return s}tZt(){if(void 0===this.eZt)return!1;const t=Ms.Wg();if(!this.eZt.SHt.kGt(t))return!1;const e=this.eZt.SHt.bGt();if(void 0===e||void 0===e.Zut.ct)return!1;const i=this.ER,s=this.QR,n=this.eZt.RHt._B(i);if((void 0!==n?n.Tn(0)-i:0)>=2*e.Zut.ct*s)return!1;if(e.AGt>0&&0===e.SGt)return e.TGt>1e3*e.Zut.ct*.8;return 8*e.SGt/this.gZ.cj.bG>=1.8*e.Zut.ct}async iZt(){var t;const e=await this.oBt();if(void 0===e)return;const i=null==(t=this.eZt)?void 0:t.SHt.bGt();if(void 0===i)return;const s=this.sZt;if(i.SGt>0){if(_.max(0,i.SGt-i.AGt)<=i.SGt*(e.bG/s.bG))return}const n=e.bG<s.bG;await this.SLt(e,{TLt:n})}nZt(t){return Ws(t,(t=>t.bG))}async rZt(){let t=await this.oZt();if(0===t.length)return;const e=await this.hZt(t);e.length>0&&(t=e);const i=this.nZt(t);void 0!==i&&(await this.SLt(i,{TLt:!0}),this.iH.AIt(i.bG))}get aZt(){const t=[this.$Ht,this.JHt].filter(Bo);for(const e of t){if(!e.hLt._Ot)return!1;const t=e.hLt.Mrt,i=t[t.length-1];if(i&&i.dOt!==this.uZt)return!1}return!0}get pLt(){return this.sZt}get DLt(){return this.$Ht}get MLt(){return this.JHt}get cZt(){return this.lZt}get ht(){return this.cO}get wR(){return this.WB.wR.ks()}get bLt(){const t=[];if(this.sZt){const e=this.WB.ER;for(const i of this.dZt)for(const s of i.bHt){const i=s.LWt(e);i&&!ms(t,i)&&t.push(i)}}return t}get bR(){if(this.sZt){const t=this.WB.ER;return this.sZt.xOt(t)}}set bR(t){if(!t||!this.sZt)return;const e=this.sZt.ROt(t);void 0!==e&&this.RR(e,{fZt:!1,_Zt:!0})}get bt(){return this.vZt}get ER(){var t;return null!=(t=this.mZt)?t:this.WB.ER}set ER(t){this.RR(t)}RR(t,e){var i,s,n,r;UY.MN(Aa,"Seeking to "+t+" s.");const o={fZt:null!=(s=null==e?void 0:e.fZt)?s:t===1/0,_Zt:null==(n=null==e?void 0:e._Zt)||n,iOt:null!=(r=null==e?void 0:e.iOt)&&r};this.mZt=t,this.gZt=o,this.pZt=!0,this.cEt=!0,null==(i=this.ZG)||i.RI(),this._o(new R(t)),this.r8.jw(),this.wZt&&(Ms.Ug(this.yZt),o._Zt?this.yZt=Ms.Gg((()=>this.bZt(t,o)),50):this.bZt(t,o))}bZt(t,e){Ms.Ug(this.yZt);const i=[this.gpt,this.AZt,this.o8].filter(Bo);this.r8=new da,this.r8.Qw(this.vW.Uw),this.o8=js(this.h8(i,t,e,this.r8.Uw),this.r8).catch(this.SZt)}get ct(){var t,e,i,s,n,r,o;if(!this.aZt)return null!=(o=null!=(r=null!=(n=null==(t=this.$Ht)?void 0:t.hLt.ct)?n:null==(e=this.JHt)?void 0:e.hLt.ct)?r:null==(s=this.vEt)||null==(i=s.XVt)?void 0:i.hLt.ct)?o:[this.$Ht,this.JHt].filter(Bo).every((t=>function(t){if(void 0===t)return!1;return t.hLt.Mrt.length>0&&!t.hLt._Ot}(t)))?1/0:NaN;const h=this.WB.ct;if(S(h)){var a,u;const t=null==(u=this.vEt)||null==(a=u.XVt)?void 0:a.hLt.ct;if(void 0!==t)return t}return h}get PR(){if(!this.aZt)return!1;if(this.uI&&this.wZt){var t,e;const i=this.ER,s=null==(t=this.$Ht)?void 0:t.hLt.ct,n=null==(e=this.JHt)?void 0:e.hLt.ct;return!(void 0!==s&&i<s)&&!(void 0!==n&&i<n)}return this.WB.PR}get lt(){return this.YG}get MR(){return this.KG}get OR(){}get WR(){return!1}get GR(){return ol({},{_O:0,vO:0,mO:0,gO:0,pO:0,wO:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}},this.WB.HR(),{pO:this.Bkt,gO:this.gZ.cj.bG})}get Er(){var t;return null==(t=this.vEt)?void 0:t.Er}get ZR(){return this.WB.ZR}set ZR(t){this.WB.ZR=t}get qR(){return this.LSt}set qR(t){this.LSt!==t&&(this.LSt=t,this._o(t?new YZ:new un))}get KR(){return this.WB.KR}get QR(){return this.WB.QR}set QR(t){UY.MN(Aa,"Setting playback rate to "+t+"."),this.WB.QR=t}get tI(){return this.Ukt.ks()}get Ukt(){return this.WB.tI}get iI(){return this.QG}set iI(t){this.QG!==t&&(this.QG=t,this.TZt())}get rI(){let t=this.WB.rI;return this.Zkt&&(t=_.max(Ht.Xn,t)),t}get hI(){return this.Mkt.ks()}get Mkt(){let t=this.v4;const e=[this.$Ht,this.JHt].filter(Bo);if(t.V>0&&e.some((t=>!t.hLt._Ot))){const i=this.Ukt,s=t.Tn(t.V-1);if(i.V>0&&i.Tn(i.V-1)>s){let n=i.Tn(i.V-1);const r=MQ(e);r.V>0&&(n=_.min(n,r.Tn(r.V-1))),t=t.tB(new se([s,n]))}}return t}HFt(){let t=function(t){if(0===t.length)return se.pB();let e=new se([0,1/0]),i=0;for(const s of t){const t=s.hLt.hI;t.V>0&&(e=e.jn(t),i=_.max(i,t.Sn(0)))}if(e.V>0)return e;return se.mB(i)}([this.$Ht,this.JHt].filter(Bo));0!==t.V&&(this.JG&&this.aZt&&this.JG.ct!==1/0&&(t=new se([t.Sn(0),this.JG.ct])),this.v4=t,this.kZt&&this.spt.nW(t.Sn(0)),this.EZt&&this.NDt.nW(t.Sn(0)))}get uI(){var t;return null!=(t=this.pZt)?t:this.WB.uI}get $G(){}get nt(){return this.Hl}get rt(){return this.dO}get dI(){var t,e;return this.WB.dI||(null==(e=this.sZt)||null==(t=e.$Ct)?void 0:t.Ti)||0}get vI(){var t,e;return this.WB.vI||(null==(e=this.sZt)||null==(t=e.$Ct)?void 0:t.ji)||0}get gI(){return this.WB.gI}set gI(t){UY.MN(Aa,"Setting volume to "+t+"."),this.WB.gI=t}get yI(){return this.pZ}get AI(){return!1}set AI(t){}get eH(){return this.iH}II(){return!1}SI(){return this.WB.Sa}ja(){return this.WB.fH}OI(t){return this.WB._H(t)}be(){UY.MN(Aa,"Hiding the player."),this.WB.be()}EI(){var t;UY.MN(Aa,"Pausing the player."),this.WB.EI(),(null==(t=this.ZG)?void 0:t.wB)&&this.ZG.RI()}async xI(){this.X9=!0;const t=this.WB.xI();if(this.PR){const t=this.Mkt;t.V>0&&this.RR(t.Sn(0),{_Zt:!1})}this.wZt||await this.TZt(),this.ckt(),await t,this.lEt()}ckt(){var t;if(!this.Nkt())if(null==(t=this.pLt)?void 0:t.hLt._Ot){var e;let t=!0,i=0;const s=null==(e=this.sZt)?void 0:e.hLt.Sn;if(!this.cEt&&s&&(t=!s.iOt,i=s.eOt,i<0)){const t=this.pLt.hLt.fFt;i+=t.Tn(t.V-1)}this.bZt(i,{fZt:t})}else this.bZt(1/0,{fZt:!0});this.xZt()&&this.bZt(1/0,{fZt:!0})}Nkt(){var t;const e=this.Mkt;if(0===e.V)return!0;const i=null==(t=this.RZt)?void 0:t.sB(this.ER);return(i&&i>0?this.RZt.Tn(i):this.ER)>=e.Sn(0)}get RZt(){var t,e;const i=null==(t=this.IZt)?void 0:t.RHt,s=null==(e=this.eZt)?void 0:e.RHt;return i?s?s.jn(i):i:s}xZt(){return WQ(this.ER,this.$Ht)||WQ(this.ER,this.JHt)}qEt(){this.YG=void 0,this.KG=void 0}BH(t){this.YG||(ah(this.nr()),this.YG=gn(t),this.KG=t,this._o(new Na(t)))}ge(){UY.MN(Aa,"Showing the player."),this.WB.ge()}CI(){throw new g("Not implemented")}DI(){throw new g("Not implemented")}NI(){}MI(){this.wZt&&ah(this.CZt(this.$Ht,this.JHt,this.lZt,{MI:!0}))}async Ca(t,e,i){const s={stack:[],error:void 0,hasError:!1};try{var n;if(UY.MN(Aa,"Setting the player source to "+t.src+"."),this.qEt(),this.vZt&&!Fn(this.vZt)&&(await this.nr(),J(i)),!t.src||Fn(t))return;const o=gs(s,da.$w([i]),!1);var r;this.vW=da.$w([o.Uw]),this.hH.kG(t.contentProtection),this.vZt=t,this.PZt=t.seamlessSwitchStrategy,this.EZt=!ms(t.ignoreEmbeddedTextTrackTypes,Lr.CEA608),this.kZt=!ms(t.ignoreEmbeddedTextTrackTypes,Lr.EMSG),this.bn(qt.rLt,this.handleBufferingErrorEvent);const h=null!=(r=null==(n=t.latencyConfiguration)?void 0:n.targetOffset)?r:t.liveOffset;if(this.vEt=new gj(this.fW,this.zut,t.useCredentials,Ms.ew(t.src),h),this.vEt.bn(bn.OVt,this.mWt),this.vEt.bn(bn.FVt,this.DZt),this.vEt.bn(Ti.Uy,this.Ds),this.vEt.bn(Ti.Gy,this.Ds),t.hlsDateRange&&(this.NZt=new Aj(this.vEt,this.WB),this.Hl.MG(this.NZt.nt)),null!=this.MZt||(this.MZt=this.LZt.Ait()),e.textTracks&&this.aH(e.textTracks),t.latencyConfiguration){const e=t.latencyConfiguration;this.ZG=new AX(this,this.WB,e),this.ZG.Rt=!0,this.yI.Aa(this.ZG)}Ji(this.Hl),this.TZt(),o.Xw()}catch(t){s.error=t,s.hasError=!0}finally{co(s)}}TZt(){return this.gpt=this.BZt(this.gpt,this.vW.Uw).catch(this.ewt),this.gpt}async BZt(t,e){if(t&&(await t,J(e)),!this.vEt)return;const i=this.QG;i===el.JB||this.X9?await this.QE(e):i===el.eW&&await this.OZt(e)}async OZt(t){if(void 0===this.vEt||this.Zkt)return;if(!this.vEt.UVt){try{await this.vEt.qVt(t)}catch(t){throw th(t),this.qR=!1,new A(Qa.MANIFEST_LOAD_ERROR,"The provided HLS document could not be loaded - "+t.message,t)}this.FZt.fft()}const e=await this.VZt();this.WZt(e);const i=this.UZt(e.HLt),s=this.GZt(e.ZLt),n=this.HZt(e.kOt);if(!n){const t=LQ(e.EOt);t&&(UY.MN(Aa,"Detected initial closed caption rendition."),this.ZZt(e,t))}await this.CZt(i,s,n,{XZt:!0}),this.Zkt=!0,this.mxt.Sxt(),this.zZt()}zZt(){const t=[this.$Ht,this.JHt].filter(Bo);if(t.some((t=>t.hLt._Ot)))return;if(this.ZG)return;const e=_.max(...t.map((t=>{var e;return null!=(e=t.hLt.GSt)?e:0}))),i={minimumOffset:.66*e,maximumOffset:2*e,targetOffset:1*e,forceSeekOffset:3*e,minimumPlaybackRate:At,maximumPlaybackRate:mt};this.ZG=new AX(this,this.WB,i),this.pZ.Aa(this.ZG)}async VZt(){if(this.qZt=this.vEt.Er.GLt,!this.qZt.length)throw new A(Qa.MANIFEST_LOAD_ERROR,"LLHLSPlayer - Could not select initial variant stream: the HLS stream contains no variant streams.");let t=await this.YZt(this.qZt);if(0===t.length)throw new A(Qa.MANIFEST_LOAD_ERROR,"LLHLSPlayer - Could not select initial variant stream: the HLS stream contains no variant stream with a supported codec.");const e=await this.hZt(t);return e.length>0&&(t=e),UY.MN(Aa,"Selecting initial active variant stream."),function(t,e,i,s){void 0===s&&(s=qT.maximumBackoff);const n=function(t,e){if(void 0===e)return t;const i=e.preferredVideoCodecs,s=e.preferredAudioCodecs;if(void 0!==i){let e;for(const n of i){const i=t.filter((t=>t.Jrt&&t.Jrt.dPt&&_u(t.Jrt.dPt,n)));if(0===i.length)continue;if(void 0===s)return i;void 0===e&&(e=i);const r=BQ(i,s);if(void 0!==r)return r}if(void 0!==e)return e}if(void 0!==s){const e=BQ(t,s);if(void 0!==e)return e}return t}(t,e),r=FQ(n,s);switch(i.Sj.type){case kt.BANDWIDTH:{const t=i.Ij,e=r.filter((e=>e.bG<=t));if(e.length>0)return Ym(e,(t=>t.bG))}case kt.PERFORMANCE:return Ws(r,(t=>t.bG));case kt.QUALITY:return Ym(r,(t=>t.bG))}}(t,this.vZt.abr,this.gZ,this.edt.maximumBackoff)}UZt(t){if(this.KZt){const t=this.jZt(this.KZt);if(t)return t}return OQ(t)}GZt(t){if(this.QZt){const t=this.jZt(this.QZt);if(t)return t}return OQ(t)}HZt(t){for(const t of this.Hl.lC)t.CE===bh.Qn&&(this.JZt=this.$Zt(t));if(this.JZt){const t=this.jZt(this.JZt);if(t)return t}return LQ(t)}$Zt(t){return Fo(this.sZt.kOt,(e=>t===this.tXt.get(e.IC)))}async QE(t){this.wZt||(await this.OZt(t),J(t),this.wZt=!0,await this.CZt(this.$Ht,this.JHt,this.lZt,{XZt:!0}))}aH(t){for(const e of t)e.src&&this.dH.cW(e)}ZZt(t,e){if(!this.EZt)return;const i=function(t){const e=[];for(const i of t){const t=EQ(i);void 0!==t&&e.push({jtt:t,Qtt:i.gs||"",Ch:i.l})}return e}(t.EOt);for(const t of i)this.NDt.kgt(t);if(void 0!==e){const t=EQ(e);this.NDt.Sgt(t).CE=bh.Qn}}get dZt(){return[this.IZt,this.eZt,this.eXt].filter(Bo)}ALt(t){for(const e of t)if(!this.iXt(e))throw new g("LLHLSPlayer - Could not set an allowed variant stream that does not exists in the internal HLS model.");this.qZt=t}iXt(t){const e=this.Er;return!!e&&ms(e.GLt,t)}jZt(t){if(t&&this.sZt)return Fo(this.sZt.KLt,(e=>e===t))}WZt(t){var e;if(UY.MN(Aa,"Setting active variant stream."),this.sZt===t)return;const i=(null==(e=this.sZt)?void 0:e.DBt)!==(null==t?void 0:t.DBt);if(this.sZt&&i)for(const t of this.sZt.kOt)this.mW(t);if(this.sZt=t,this._o(new aQ),this.sEt(),t&&i)for(const e of t.kOt)this.sXt(e)}sXt(t){const e=this.WB.OI(Li.JV,void 0,t.l,t.gs,t.aLt,void 0,void 0,t._Lt.map(WY).filter(Bo));e.bn(No.da,this.onTextTrackChange),this.tXt.set(t.IC,e),this.nXt.tt(e)}mW(t){const e=this.tXt.get(t.IC);e&&(e.vn(No.da,this.onTextTrackChange),this.nXt.it(e),this.tXt.delete(t.IC),this.WB.mW(e))}async oZt(){var t;const e=null!=(t=this.qZt)?t:this.Er.GLt;if(0===e.length&&!this.qZt)return UY.MN(Aa,"The HLS stream does not contain any variant streams, skipping ABR selection."),[];if(1===e.length&&!this.qZt)return UY.MN(Aa,"The HLS stream contains only a single variant stream, skipping ABR selection."),[];const i=await this.YZt(e);if(0===i.length)return UY.WLt(Aa,"LLHLSPlayer - No variant streams with supported codecs available to perform ABR selection on."),[];const s=FQ(i,this.edt.maximumBackoff);return 0===s.length?(this.rXt||(UY.WLt(Aa,"LLHLSPlayer - No variant streams with online renditions available to perform ABR selection on."),this.oXt++,await this.hXt(i)),[]):s}async aXt(){const t=await this.oBt();if(void 0===t)return;const e=!!this.sZt&&t.bG<this.sZt.bG;await this.SLt(t,{TLt:e})}async oBt(){var t,e;const i=await this.oZt();if(0===i.length)return;const s=Sq(this.WB),n=await this.hZt(i),r={ji:this.WB.ji,Ti:this.WB.Ti,eBt:s,Dlt:null==(e=this.vZt)||null==(t=e.abr)?void 0:t.restrictToPlayerSize},o=await this.uXt.oBt(i,this.sZt,n,r,new xQ(this.JG));return!!this.sZt&&o.bG<this.sZt.bG||this.cXt(o,s)?o:void 0}cXt(t,e){var i;if(t===this.pLt)return!1;const s=this.pLt&&VQ(this.pLt,this.edt.maximumBackoff),n=VQ(t,this.edt.maximumBackoff);if(!s&&n)return!0;(!this.iDt||this.iDt.wLt.bG>t.bG)&&(this.iDt={wLt:t,Zft:Ms.Wg()});const r=Ms.Wg()-this.iDt.Zft;var o;const h=null!=(o=null==(i=this.MLt)?void 0:i.hLt.tBt)?o:1/0;return e>=_.max(h-1,5)||r>1e3}async hXt(t){this.rXt=!0;let e=!1;for(const i of t)try{const t=this.JHt?Fo(i.ZLt,(t=>tt(t,this.JHt))):void 0;if(void 0===t)continue;await this.eWt(t),t.hLt.PFt=-1/0,e=!0}catch(t){}if(e)this.oXt=0,await this.lXt();else{if(this.oXt>=this.edt.maxRetries)return void this.BH(new A(Qa.MEDIA_LOAD_ERROR,"The provided video renditions could not be loaded."));const t=_.min(this.edt.minimumBackoff*2**(this.oXt-1),this.edt.maximumBackoff);await ke(t)}this.rXt=!1,await this.aXt()}async YZt(t){let e=await Qm(t,(async t=>{var e,i,s;const n=[(null==(e=t.Jrt)?void 0:e.cPt)?'audio/mp4; codecs="'+t.Jrt.cPt+'"':void 0,(null==(i=t.Jrt)?void 0:i.dPt)?'video/mp4; codecs="'+t.Jrt.dPt+'"':void 0].filter(Bo);return 0===n.length||await this.dXt.MJ(n,null==(s=this.vZt)?void 0:s.useManagedMediaSource)}));return e.some((t=>{var e;return null==(e=t.Jrt)?void 0:e.dPt}))&&(e=e.filter((t=>!t.Jrt||t.Jrt.dPt||0!==t.ZLt.length))),e.some((t=>{var e;return null==(e=t.Jrt)?void 0:e.cPt}))&&(e=e.filter((t=>!t.Jrt||t.Jrt.cPt||0!==t.HLt.length))),e}hZt(t){return this.vEt.HVt?Qm(t,(t=>async function(t,e){for(const i of t)if(!await e(i))return!1;return!0}([OQ(t.HLt),OQ(t.ZLt),LQ(t.kOt),LQ(t.EOt)].filter(Bo),(t=>this.fXt(t))))):Promise.resolve([])}async fXt(t){if(0===t.hLt.Mrt.length)return!1;const e=t.hLt.Mrt[0];if(!e.Fyt)return!1;const i=e.Fyt,s=i._At?iK(i._At.Sn,i._At.V):void 0;try{return await this.zut.vrt(i.Mx,s)}catch(t){return!1}}async SLt(t,e){if(!this.wZt)throw new g("LLHLSPlayer - The LLHLSPlayer is not loaded.");if(!t)throw new g("LLHLSPlayer - Cannot explicitly set the active variant stream to undefined.");if(!this.iXt(t))throw new g("LLHLSPlayer - Trying to set an active variant stream that does not exists on the internal model.");if(t===this.sZt)return void UY.MN(Aa,"Trying to set the already active variant stream, ignoring.");const i=this.$Ht?Fo(t.HLt,(t=>tt(t,this.$Ht))):void 0,s=this.JHt?Fo(t.ZLt,(t=>tt(t,this.JHt))):void 0,n=this.lZt?Fo(t.kOt,(t=>tt(t,this.lZt))):void 0;this.WZt(t),this.iDt=void 0,await this.CZt(i,s,n,e)}async NLt(t){if(!this.sZt)return void(this.KZt=t);const e=this.jZt(t);if(t&&!e)throw new g("LLHLSPlayer - Trying to set an invalid rendition as the active audio rendition.");if(this.DLt===e)return;const i=Bo(e)!==Bo(this.$Ht);UY.MN(Aa,"Switching audio rendition"),await this.CZt(e,this.JHt,this.lZt,{ELt:!0,TLt:i})}async LLt(t){if(!this.sZt)return void(this.QZt=t);const e=this.jZt(t);if(t&&!e)throw new g("LLHLSPlayer - Trying to set an invalid rendition as the active video rendition.");if(this.MLt===e)return;const i=Bo(e)!==Bo(this.JHt);UY.MN(Aa,"Switching video rendition"),await this.CZt(this.$Ht,e,this.lZt,{kLt:!0,TLt:i})}async _Xt(t){if(!t)throw new g("LLHLSPlayer - Cannot explicitly set the active subtitle rendition to undefined.");if(!this.Zkt)return void(this.JZt=t);const e=this.jZt(t);if(!e)throw new g("LLHLSPlayer - Trying to set an invalid rendition as the active subtitle rendition.");UY.MN(Aa,"Switching subtitle rendition"),await this.CZt(this.$Ht,this.JHt,e)}async vXt(t,e){if(this.rXt)return;const i=0===this.rt.V;t.Tw===Qc.mE||t.Tw===Qc.vE&&i?this.qZt&&this.qZt.length<=1?(t.Tw===Qc.mE&&this.JHt!==t?await this.CZt(this.$Ht,t,this.lZt):t.Tw===Qc.vE&&i&&this.$Ht!==t&&await this.CZt(t,this.JHt,this.lZt),await this.mXt(t,e)):await this.aXt():await this.mXt(t,e)}async eWt(t,e){try{await this.vEt.eWt(t,e)}catch(i){throw th(i),(hA(i)||aA(i))&&await this.vXt(t,e),i}}async mXt(t,e){if(!ms(this.gXt,t)){this.gXt.push(t);try{const i=t.Tw===Qc.JV||t.Tw===Qc.aBt?1/0:this.edt.maxRetries;await Ci((()=>this.retryOfflineRenditionsCallback(t,e)),e,i,this.edt.minimumBackoff,this.edt.maximumBackoff)}catch(t){this.BH(new A(Qa.MEDIA_LOAD_ERROR,t.message,t))}finally{we(this.gXt,t),t.hLt.PFt===-1/0&&await this.lXt()}}}CZt(t,e,i,s){void 0===s&&(s={});const n={TLt:s.TLt||!1,ELt:s.ELt||!1,kLt:s.kLt||!1,MI:s.MI||!1,XZt:s.XZt||!1};return n.XZt||n.MI||this.$Ht!==t||this.JHt!==e||this.lZt!==i?void 0===t&&void 0===e?Promise.reject(new g("Trying to buffer no media renditions.")):(this.$Ht=t,this.JHt=e,this.lZt=i,this.HFt(),this._o(new uQ),this.r8.jw(),this.r8=new da,this.r8.Qw(this.vW.Uw),this.pXt.jw(),this.pXt=new da,this.pXt.Qw(this.vW.Uw),this.AZt=js(this.wXt([this.AZt,this.o8].filter(Bo),t,e,i,n,this.pXt.Uw),this.pXt).catch(this.SZt),this.AZt):Promise.resolve()}async yXt(t,e,i,s){var n,r;const o=[];if(o.push(this.bXt(e,s)),CY(t,e)||o.push(this.bXt(t,s)),null==(r=this.vZt)||null==(n=r.hls)?void 0:n.delaySubtitlePreload)return Promise.all(o).then((()=>this.bXt(i,s)));const h=this.bXt(i,s);return Promise.all([...o,h])}async bXt(t,e){if(t)try{await this.vEt.eWt(t,e)}catch(i){th(i),(hA(i)||aA(i))&&await this.AXt(t,e)}}async AXt(t,e){if(this.rXt)return;const i=0===this.rt.V;if(t.Tw===Qc.mE||t.Tw===Qc.vE&&i)if(this.qZt&&this.qZt.length<=1)await this.mXt(t,e);else{const t=await this.VZt();this.WZt(t);const e=this.UZt(t.HLt),i=this.GZt(t.ZLt),s=this.HZt(t.kOt);await this.CZt(e,i,s)}else await this.mXt(t,e)}async wXt(t,e,i,s,n,r){var o;if(!this.wZt)return void await this.yXt(e,i,s,r);await Promise.all(t.map((t=>t.catch(Tt)))),this.SXt(),await this.TXt(r),await this.kXt();const h=[];n.ELt&&this.JG&&this.JG.h4&&h.push(this.JG.h4.eT(0,1/0)),n.kLt&&this.JG&&this.JG.a4&&h.push(this.JG.a4.eT(0,1/0)),await Promise.all(h),J(r);const a=await this.EXt(e,i,n.MI,r);this.xXt(e,i,n.TLt||a),this.RXt(s,n.TLt),J(r);const u=[i,CY(e,i)?void 0:e,s].filter(Bo);try{await Promise.all(u.filter((t=>!t.hLt.TFt)).map((t=>{var e;return null==(e=this.vEt)?void 0:e.iWt(t,r)})))}catch(t){th(t)}if(J(r),this._4(),this.HFt(),void 0!==this.mZt)this.bZt(this.mZt,this.gZt);else if(!this.cEt&&(null==(o=this.sZt)?void 0:o.hLt.Sn)){const t=this.sZt.hLt,e=t.Sn;let i=e.eOt;if(e.eOt<0){const e=t.fFt;i+=e.Tn(e.V-1)}this.bZt(i,{fZt:!e.iOt})}else!this.cEt&&u.every((t=>!t.hLt._Ot))?this.bZt(1/0,{fZt:!0}):this.dZt.length>0&&this.IXt()}async EXt(t,e,i,s){var n,r;const o=void 0!==t&&t!==e,h=void 0!==e,a=await this.CXt(t,e,this.sZt);if(J(s),!i&&this.JG&&!a)return!1;const u=void 0!==(null==(n=this.JG)?void 0:n.h4),c=void 0!==(null==(r=this.JG)?void 0:r.a4);if(!i&&!(o!==u||h!==c)&&a&&this.JG&&this.JG.dJ(a))return await this.TXt(s),await this.JG._J(a),!0;for(const t of this.dZt)t.bHt.forEach((t=>t.jw()));this.WB.p7();try{this.JG&&await this.WB.nr(),this.JG=await this.PXt(a,o,h)}finally{this.WB.w7()}return!0}async CXt(t,e,i){var s,n;const r=i.Jrt,o=[];if(void 0!==t){var h,a;const e=null!=(a=null==(h=t.Jrt)?void 0:h.cPt)?a:null==r?void 0:r.cPt;if(!e)return;{const t='audio/mp4; codecs="'+e+'"';UY.MN(Aa,"Configuring MediaSource for initial audio rendition with codec: "+t+"."),o.push(t)}}if(void 0!==e){var u,c;const t=null!=(c=null==(u=e.Jrt)?void 0:u.dPt)?c:null==r?void 0:r.dPt;if(!t)return;{const e='video/mp4; codecs="'+t+'"';UY.MN(Aa,"Configuring MediaSource for initial video rendition with codec: "+e+"."),o.push(e)}}if(0===o.length)return void UY.WLt(Aa,"No codecs found on the active variant stream.");var l;const d=null!=(l=null==e||null==(s=e.hLt.Mrt[0])?void 0:s.nOt)?l:[];var f;const _=null!=(f=null==t||null==(n=t.hLt.Mrt[0])?void 0:n.nOt)?f:[],v=this.vEt.Er,m=await cK(this.vZt.contentProtection,o,v.AVt.concat(_).concat(d),this.fW,this.vZt.useCredentials);return{Tw:In.wW,g4:o.map((t=>({Mk:t}))),sH:m,C4:this.vZt.useManagedMediaSource}}async PXt(t,e,i){let s;return s=t?await this.WB.$n(t):new fQ(this.WB,e,i),this.JG=s,this._4(),this.JTt(),this.$Tt(),s}_4(){const t=this.JG;if(t&&S(t.ct)){var e,i,s;const n=null!=(s=null==(e=this.$Ht)?void 0:e.hLt.ct)?s:null==(i=this.JHt)?void 0:i.hLt.ct;void 0!==n&&n>0&&t.d4(n)}this.HFt()}JTt(){const t=this.JG;t&&(t.a4&&(t.a4.bj=this.gZ.Dj),t.h4&&(t.h4.bj=this.gZ.Dj))}$Tt(){const t=this.JG;t&&(t.a4&&(t.a4.Ej=this.gZ.Ej),t.h4&&(t.h4.Ej=this.gZ.Ej))}xXt(t,e,i){if(!this.JG)throw new g("Invalid state");this.JG.h4?this.u4&&this.u4.KHt(this.JG.h4)||(this.u4=new kQ(ee.vE,this.JG.h4,this.kZt?this.spt:void 0,this.EZt?this.NDt:void 0)):this.u4=void 0,this.JG.a4?this.c4&&this.c4.KHt(this.JG.a4)||(this.c4=new kQ(ee.mE,this.JG.a4,this.kZt?this.spt:void 0,this.EZt?this.NDt:void 0)):this.c4=void 0;const s=CY(t,e);if(this.c4&&e){const t=s&&this.u4?[this.c4,this.u4]:[this.c4];this.eZt?(i&&(this.eZt.jw(),this.eZt.EHt.Fb()),this.eZt.gLt!==e&&this.eZt.DUt(e)):(this.eZt=function(t,e,i,s,n,r,o,h,a,u){const c=s.Er.LL,l=new qj(c),d=new Zj(ee.mE,t,s,l,n,r,o,u),f=e.map((t=>t.Tw)),_=h.kTt(l,s.Er.LL,f),v=new hQ(d,l,_,a);return v.kHt(e),v}(e,t,this.WB,this.vEt,this.fW,this.zut,this.XWt,this.MZt,this.gZ,this.vZt.useCredentials),this.eZt.SHt.bn(Hj.RUt,this.DXt),this.eZt.SHt.bn(Hj.IUt,this.NXt),this.eZt.THt.bn(St.KGt,this.MXt),this.eZt.THt.bn(St.QGt,this.LXt),this.eZt.THt.bn(St.JGt,this.BXt),this.eZt.THt.bn(St.jGt,this.OXt)),this.eZt.kHt(t)}else{var n;null==(n=this.eZt)||n.Xw(),this.eZt=void 0}var r;this.u4&&t&&!s?(this.IZt?(i&&(this.IZt.jw(),this.IZt.EHt.Fb()),this.IZt.gLt!==t&&this.IZt.DUt(t)):(this.IZt=function(t,e,i,s,n,r,o,h,a,u){const c=s.Er.LL,l=new qj(c),d=new Zj(ee.vE,t,s,l,n,r,o,u),f=h.kTt(l,s.Er.LL,[e.Tw]),_=new hQ(d,l,f,a);return _.kHt([e]),_}(t,this.u4,this.WB,this.vEt,this.fW,this.zut,this.XWt,this.MZt,this.gZ,this.vZt.useCredentials),this.IZt.SHt.bn(Hj.IUt,this.NXt),this.IZt.THt.bn(St.KGt,this.MXt),this.IZt.THt.bn(St.jGt,this.OXt)),this.IZt.kHt([this.u4])):(null==(r=this.IZt)||r.Xw(),this.IZt=void 0);this.FXt()}RXt(t,e){if(this.eXt){this.eXt.SHt.gLt===t?e&&(this.eXt.jw(),this.eXt.EHt.Fb()):(this.eXt.Xw(),this.eXt=void 0)}if(!this.eXt&&t){const e=this.tXt.get(t.IC);e.CE=bh.Qn,this.eXt=function(t,e,i,s,n,r,o){const h=i.Er.LL,a=new jj(e,h),u=new qj(h),c=new Zj(ee.Tk,t,i,u,s,n,r,o),l=new nQ(u,h,ee.Tk),d=new hQ(c,u,l);return d.xHt(a),d}(t,e,this.vEt,this.fW,this.zut,this.XWt,this.vZt.useCredentials)}}FXt(){const t=[this.u4,this.c4].filter(Bo).map((t=>t.Tw));this.vEt.Er.LL.yVt(t)}async h8(t,e,i,s){let n;if(await Promise.all(t.map((t=>t.catch(Tt)))),J(s),await this.kXt(),J(s),this.mZt=void 0,this.pZt=void 0,this.cEt=!0,i.iOt){n=MQ([this.$Ht,this.JHt].filter(Bo))}else n=this.Mkt;const r=n.KL(e),o=this.WB.py(Ti.Qy,s);this.WB.Rb(r,i.fZt),this.wZt&&this.dZt.length>0&&(this.vEt.Er.LL.bVt(),this.VXt(this.WB.ER),this.IXt()),await o,this.lEt()}lEt(){const t=this.KB;if(this.KR||this.uI||void 0===t)return;const e=this.ER;var i,s;t+this.ER-this.yI.kd.maximumOffset<e?null==(i=this.ZG)||i.Sn():null==(s=this.ZG)||s.RI()}VXt(t){for(const e of this.dZt)e.XUt(t)||(e.DHt(),e.EHt.FGt()),e.CHt(t)||(e.NHt(),e.EHt.VGt())}SXt(){for(const t of this.dZt)t.jw()}kXt(){return Promise.all([this.VDt(),this.WXt(),this.UXt()])}IXt(){this.FDt(),this.GXt(),this.HXt()}async lXt(){this.wZt&&this.dZt.length>0&&(this.dZt.forEach((t=>t.DHt())),await this.VDt(),this.FDt(),this.dZt.forEach((t=>t.SHt.JUt())))}FDt(){if(this.ZXt)return;const t=()=>{this.ZXt=void 0};this.XXt=new da,this.XXt.Qw(this.vW.Uw),this.ZXt=js(this.tNt(this.XXt.Uw),this.XXt).catch(this.SZt).then(t,t)}async VDt(){var t;null==(t=this.XXt)||t.jw();const e=this.ZXt;this.ZXt=void 0,e&&await e}async tNt(t){J(t);const e=this.dZt;for(;;){const i={stack:[],error:void 0,hasError:!1};try{const s=[],n=this.WB.ER;for(const t of e){const e=t.SHt,i=t.zlt(n);if(e.XIt)s.push(e.DWt());else if(t.PHt(n,i,this.gZ.Dj)){const n=e.zUt(i);if(void 0===n){if(e.gLt.hLt._Ot)continue;const t=e.gLt.hLt.Mrt;t.length&&t[0].WO>i&&(this.ER=1/0),e.eGt(),e.KUt(i)}else{const[i,s]=n;e.hut(i,s,t.gWt),t.THt.aHt(i,s)}s.push(e.DWt())}}const r=gs(i,da.$w([t]),!1);if(0===s.length){e.every((t=>t.SHt.mCt))||s.push(this.WB.py(Ti.hb,r.Uw));for(const t of e)s.push(t.THt.py(St.jGt,r.Uw))}await ou(Promise.race(s),r.Uw)}catch(t){i.error=t,i.hasError=!0}finally{co(i)}}}GXt(){if(this.zXt)return;const t=()=>{this.zXt=void 0};this.qXt=new da,this.qXt.Qw(this.vW.Uw),this.zXt=js(this.YXt(this.qXt.Uw),this.qXt).catch(this.SZt).then(t,t)}async WXt(){var t;null==(t=this.qXt)||t.jw();const e=this.zXt;this.zXt=void 0,e&&await e}async YXt(t){J(t);const e=this.dZt;for(;;){const i=[];for(const t of e){const e=t.SHt,s=t.THt;if(s.XIt)i.push(s.DWt());else{const t=e.VUt();t?"Zut"===t.Tw?(s.dHt(t),i.push(s.DWt())):"uOt"===t.Tw&&(s.uHt(t),i.push(s.DWt())):i.push(e.$Ut())}}if(0===i.length)break;await ou(Promise.race(i),t)}}HXt(){if(this.KXt)return;this.jXt=new da,this.jXt.Qw(this.vW.Uw);const t=()=>{this.KXt=void 0};this.KXt=js(this.QXt(this.jXt.Uw),this.jXt).catch(this.SZt).then(t,t)}async UXt(){var t;null==(t=this.jXt)||t.jw();const e=this.KXt;this.KXt=void 0,e&&await e}async QXt(t){for(;;){const e=this.dZt;e.forEach((t=>t.rut()));const i=this.WB.ER,s=[],n=[];for(const t of e){const e=t.THt;for(const r of t.bHt){const t=r.TWt?s:n;if(r.XIt)t.push(r.DWt());else if(!r.NWt(i)){const i=e.pHt(r.Tw);i?"Zut"===i.Tw&&i.dOt===this.uZt?(r.jlt(i),t.push(r.DWt())):"RCt"===i.Tw&&i.dOt===this.uZt&&(r.A2(i),t.push(r.DWt())):n.push(e.wHt(r.Tw))}}}if(0===s.length){if(await this.JXt(e,i,t))continue}if(0===s.length&&0===n.length){e.every((t=>t.bHt.length>0&&t.bHt.every((t=>t.NWt(i)))))&&this.JG.a3();break}await ou(Promise.race([...s,...n]),t)}}async JXt(t,e,i){const s=[],n=[];for(const i of t){const t=i.zlt(e);for(const r of i.bHt){if(!r.TWt)continue;const o=i.THt.pHt(r.Tw);if(void 0!==o){if(o.dOt===this.uZt)return!1;s.push(o)}else{if(i.XIt||i.PHt(e,t,this.gZ.Dj)||!r.MWt(e,t))return!1;{const t=r.kWt.gWt;void 0!==t&&n.push(t)}}}}if(0===s.length)return!1;const r=Ym(s,(t=>t.dOt)).dOt;if(s.every((t=>"RCt"===t.Tw&&t.dOt===r))){const t=Ws(s,(t=>t.WO)).WO,e=[...s,...n],r=await this.$Xt(e);this.tzt(r)?(UY.VLt(uc,"Seamless switch from",this.JG.kd,"to",r),await this.JG._J(r),UY.VLt(uc,"Seamless switch complete.")):await this.ezt(t,r,i),this.uZt=s[0].dOt}else for(const e of t)for(const t of e.bHt){let i=e.THt.pHt(t.Tw);for(;void 0!==i&&("RCt"!==i.Tw||i.dOt!==r);)UY.VLt(uc,"Removing append for other discontinuity, expecting "+r,i),e.THt.BWt(i),i=e.THt.pHt(t.Tw)}return!0}tzt(t){return this.PZt===Ks.$B||this.PZt!==Ks.tO&&this.JG.dJ(t)}async $Xt(t){const e=t.map((t=>t.yHt.Jrt)),i=e.map((t=>({Mk:t}))),s=on(t,(t=>t.yHt.nOt));s.push(...this.vEt.Er.AVt);let n=await cK(this.vZt.contentProtection,e,s,this.fW,this.vZt.useCredentials);return 0===n.length&&this.JG&&this.JG.kd.sH.length>0&&(n=this.JG.kd.sH),{Tw:In.wW,g4:i,sH:n,C4:this.vZt.useManagedMediaSource}}async ezt(t,e,i){var s;const n=this.JG,r=n.ct,o=this.wR.length>0&&this.ER<t;if(o)try{for(UY.VLt(uc,"Marking end of stream and waiting for ended to switch discontinuity."),n.a3();!this.WB.PR&&this.WB.ER<t;)await this.WB.py([Ti.hb,Ti.Dy],i)}catch(t){throw n.J2(),n.d4(r),t}UY.VLt(uc,"Perform hard switch from",null==(s=this.JG)?void 0:s.kd,"to",e);try{this.WB.p7(),this.ER<t&&this.WB.Rb(t,!0,!0),this.c4=void 0,this.u4=void 0,this.FXt(),await this.WB.nr(),this.JG=await this.WB.$n(e),this._4(),this.JTt(),this.$Tt(),this.JG.a4&&(this.c4=new kQ(ee.mE,this.JG.a4,this.kZt?this.spt:void 0,this.EZt?this.NDt:void 0),this.c4.A3(t-1,t)),this.JG.h4&&(this.u4=new kQ(ee.vE,this.JG.h4,this.kZt?this.spt:void 0,this.EZt?this.NDt:void 0),this.u4.A3(t-1,t)),this.FXt()}finally{o&&ah(this.WB.xI()),this.WB.w7()}if(this.eZt){const t=void 0!==this.u4&&void 0===this.IZt?[this.c4,this.u4]:[this.c4];this.eZt.kHt(t)}this.IZt&&this.IZt.kHt([this.u4]),UY.VLt(uc,"Hard switch complete.")}TXt(t){return ou(Rs(on(this.dZt,(t=>t.bHt.map((t=>t.DWt()))))),t)}sEt(){const t=this.vI,e=this.dI;this.dxt===t&&this.fxt===e||(this.dxt=t,this.fxt=e,this._o(new P))}async yn(){UY.MN(Aa,"Unloading the player."),this.izt(),this.qEt(),await this.nr(),this.WB.wH=void 0,this.nXt.yn(),await this.dH.yn(),await this.spt.yn(),await this.NDt.yn(),this.cO.yn(),this.dO.yn(),this.Hl.yn(),this.szt.yn(),this.mxt.Xw(),this.XWt.Xw(),this.MZt&&(this.MZt.Xw(),this.MZt=void 0)}async nr(){UY.MN(Aa,"Resetting the player."),this.vn(qt.rLt,this.handleBufferingErrorEvent),this.uZt=-1,this.vW.jw(),this.r8.jw(),this.r8=new da,this.r8.Qw(this.vW.Uw),this.pXt.jw(),this.pXt=new da,this.pXt.Qw(this.vW.Uw);const t=[this.gpt,this.o8,this.AZt].filter(Bo);await Promise.all(t.map((t=>t.catch(Tt)))),this.gpt=void 0,this.o8=void 0,this.AZt=void 0,this.$Ht=void 0,this.JHt=void 0,this.lZt=void 0,this.qZt=void 0,this.KZt=void 0,this.QZt=void 0,this.JZt=void 0,this.KZt=void 0,this.QZt=void 0,this.JZt=void 0,this.ZG=void 0,this.pZ.nr(),this.gXt=[],this.WZt(void 0),this.SXt(),await this.kXt(),this.IZt&&(this.IZt.Xw(),this.IZt=void 0),this.eZt&&(this.eZt.Xw(),this.eZt=void 0),this.eXt&&(this.eXt.Xw(),this.eXt=void 0),this.u4=void 0,this.c4=void 0,this.JG=void 0,this.vEt&&(this.vEt.Xw(),this.vEt=void 0),this.NZt&&(this.Hl.FG(this.NZt.nt),this.NZt=void 0),await this.dH.nr(),await this.spt.nr(),await this.NDt.nr(),this.WB.vH(),await this.WB.nr(),this.vZt=void 0,this.wZt=!1,this.v4=se.pB(),this.mZt=void 0,this.lxt=void 0,this.dxt=0,this.fxt=0,this.pZt=void 0,this.cEt=!1,this.X9=!1,Ms.Ug(this.yZt),this.Zkt=!1,this.nzt=!1,this.Bkt=0,this.PZt=Ks.JB,this.szt.nr(),this.rzt(),this._o(new Ys(this.ER,this.rI))}rzt(){for(const t of this.cO.lC)t.yn();for(const t of this.dO.lC)t.yn();for(const t of this.Hl.lC)t.yn();this.cO.nr(),this.dO.nr(),this.Hl.nr(),this.tXt.clear()}ozt(){this.szt.bn(RQ,this.Ds),this.szt.bn(Zc.UL,this.XB),this.szt.bn(Zc.WL,this.hzt),this.szt.bn(Zc.BL,this.azt),this.gZ.bn("yj",this.wxt),this.gZ.bn("Tj",this.yxt),this.WB.bn(IQ,this.Ds),this.WB.bn(yo.fa,this.bxt),this.WB.bn(Ti.Ty,this.handleContentProtectionErrorEvent),this.WB.bn(Ti.Iy,this.uzt),this.WB.bn(Ti.Dy,this.Ah),this.WB.bn(Ti.zy,this.sMt),this.WB.bn(Ti.ho,this.czt),this.WB.bn(Ti.qy,this.lzt),this.WB.bn(Zc.iC,this.FW),this.WB.bn(Ti.hb,this.S6),this.WB.bn(Ti.Jy,this.Ge),this.WB.bn(Ti.Qy,this.SH),this.WB.bn(Ti.jy,this.dzt),this.WB.bn(Ti.ub,this.fzt)}izt(){this.szt.vn(RQ,this.Ds),this.szt.vn(Zc.UL,this.XB),this.szt.vn(Zc.WL,this.hzt),this.szt.vn(Zc.BL,this.azt),this.gZ.vn("yj",this.wxt),this.gZ.vn("Tj",this.yxt),this.WB.vn(IQ,this.Ds),this.WB.vn(yo.fa,this.bxt),this.WB.vn(Ti.Ty,this.handleContentProtectionErrorEvent),this.WB.vn(Ti.Iy,this.uzt),this.WB.vn(Ti.Dy,this.Ah),this.WB.vn(Ti.zy,this.sMt),this.WB.vn(Ti.ho,this.czt),this.WB.vn(Ti.qy,this.lzt),this.WB.vn(Zc.iC,this.FW),this.WB.vn(Ti.hb,this.S6),this.WB.vn(Ti.Jy,this.Ge),this.WB.vn(Ti.Qy,this.SH),this.WB.vn(Ti.jy,this.dzt),this.WB.vn(Ti.ub,this.fzt)}constructor(t,e,i,s,n,r,o,h){super(),this.gZ=i,this.pZ=s,this.XWt=n,this.LZt=r,this.tXt=ne(),this.EZt=!0,this.kZt=!0,this.wZt=!1,this.vZt=void 0,this.JG=void 0,this.gpt=void 0,this.vW=new da,this.vEt=void 0,this.KZt=void 0,this.QZt=void 0,this.JZt=void 0,this.sZt=void 0,this.$Ht=void 0,this.JHt=void 0,this.lZt=void 0,this.qZt=void 0,this.gXt=[],this.u4=void 0,this.c4=void 0,this.IZt=void 0,this.eZt=void 0,this.eXt=void 0,this.MZt=void 0,this.pXt=new da,this.AZt=void 0,this.r8=new da,this.o8=void 0,this.uZt=-1,this.XXt=void 0,this.qXt=void 0,this.jXt=void 0,this.ZXt=void 0,this.zXt=void 0,this.KXt=void 0,this.LSt=!0,this.oXt=0,this.rXt=!1,this.QG=el.$H,this.YG=void 0,this.KG=void 0,this.v4=se.pB(),this._zt=[],this.mZt=void 0,this.gZt=void 0,this.cEt=!1,this.X9=!1,this.lxt=void 0,this.dxt=0,this.fxt=0,this.pZt=void 0,this.yZt=0,this.Zkt=!1,this.nzt=!1,this.PZt=Ks.JB,this.iDt=void 0,this.vzt=void 0,this.Bkt=0,this.handleContentProtectionErrorEvent=t=>{this.YG=gn(t.errorObject),this.KG=t.errorObject,this.Ds(t)},this.handleBufferingErrorEvent=t=>{!function(t){return t instanceof KN}(t.lt)?this.BH(new A(Qa.MEDIA_LOAD_ERROR,t.lt.message,t.lt)):ah(this.CZt(this.DLt,this.MLt,this.lZt,{MI:!0}))},this.bxt=t=>{this.BH(ck(t.lt))},this.uzt=()=>{this.HFt();const t=this.ct;t!==this.lxt&&(this.lxt=t,this._o(new $s(this.lxt)))},this.Ah=()=>{this.PR&&this._o(new Xs(this.ER))},this.sMt=()=>{this._o(new ul(this.ER))},this.czt=()=>{this.ckt(),this._o(new $(this.ER))},this.XB=()=>{void 0!==this.vzt&&(Ms.Ug(this.vzt),this.vzt=void 0),this._o(new ko(this.ER))},this.lzt=()=>{this._o(new K(this.ER))},this.FW=()=>{this._o(new hu(this.ER,this.rI))},this.S6=()=>{const t=this.bLt;qm(this._zt,t)||(this._o(new Sj),this._zt=t),this._o(new Al(this.ER,this.bR))},this.DXt=Qr((t=>{t.EE===ee.mE&&this.tZt()&&ah(this.iZt())}),200),this.NXt=t=>{var e;this.Bkt+=t.PUt;const i=this.rt.V>0?t.EE===ee.mE:t.EE===ee.vE;"Zut"===t.CUt&&i&&ah(this.aXt()),this._o(new tW(function(t){if(t){if(void 0!==t._At){var e,i;const s=t._At.Sn+(null!=(i=t._At.V)?i:0);return{Xu:t.Mx,_ut:[null==(e=t._At)?void 0:e.Sn,s],xE:!0}}return{Xu:t.Mx.toString()||"",xE:!0}}return{Xu:"",xE:!0}}(t.uri),(null==(e=this.pLt)?void 0:e.bG)||0,t.mediaSequenceNumeber,t.mediaTrackId,t.EE,t.httpStatusCode,t.PUt))},this.Ge=()=>{this._o(new R(this.ER))},this.SH=()=>{this._o(new oa(this.ER))},this.dzt=()=>{this.sEt()},this.fzt=()=>{this._o(new ns(this.ER,this.gI))},this.hzt=()=>{this.WB.uI?this._o(new za(this.ER)):(null!=this.vzt||(this.vzt=Ms.Gg((()=>{this.nzt&&(this.iDt=void 0,ah(this.rZt()))}),2500)),this.ckt(),this._o(new za(this.ER)))},this.azt=()=>{this.nzt=!0,this._o(new ro(this.ER,this.rI))},this.SZt=t=>{Je(t)||hA(t)||aA(t)||(this.SXt(),ah(this.kXt()),this._o(new ZY(t)))},this.mWt=()=>{this.HFt()},this.DZt=t=>{ah(this.vXt(t.gLt,this.vW.Uw))},this.ewt=t=>{if(Je(t))return;const e=t instanceof A?t:new A(Qa.MEDIA_DECODE_ERROR,t.message,t);this.BH(e)},this.onTextTrackChange=t=>{if(!this.sZt)return;const e=t.Ht,i=this.$Zt(e);i&&(e.CE===bh.LC||e.CE===bh.Qn?(ah(this._Xt(i)),this.tXt.forEach((t=>{t!==e&&(t.CE=bh.Mh)}))):this.lZt&&this.lZt===i&&ah(this.CZt(this.$Ht,this.JHt,void 0)))},this.retryOfflineRenditionsCallback=async(t,e)=>{this.cZt!==t&&this.DLt!==t&&this.MLt!==t||(await this.vEt.eWt(t,e),t.hLt.PFt=-1/0)},this.wxt=()=>{this.JTt()},this.yxt=()=>{this.$Tt()},this.MXt=t=>{const e=this.sZt,i=null==e?void 0:e.SOt;if(this.vEt.fWt(t.Jrt,t.gLt.hLt),!i&&(this.vEt._Wt(t.Jrt,t.gLt.hLt),this.FZt.qLt(),e)){const t=void 0!==this.$Ht&&!ms(e.HLt,this.$Ht),i=void 0!==this.JHt&&!ms(e.ZLt,this.JHt);(t||i)&&this.CZt(t?void 0:this.$Ht,i?void 0:this.JHt,this.lZt).catch(Tt)}},this.LXt=t=>{this.FZt.jLt(t.gLt,t.oft)},this.BXt=t=>{this.FZt.JLt(t.gLt,t.$Gt._F())},this.OXt=t=>{this.vEt.lWt(t.gLt)},this.zut=new bX(o),this.WB=t,this.fW=e,this.iH=new HY(this.gZ.cj),this.dXt=new XY(this.WB),this.uXt=new eK(this.gZ),this.edt=h.retryConfiguration,this.cO=new Ke,this.dO=new Ke,this.FZt=new GY(this,this.gZ,this.cO,this.dO),this.nXt=new Wo,this.dH=new xx(this.WB,this.fW),this.spt=new wX(this.WB),this.NDt=new xl(this.WB),this.Hl=new Iu([this.nXt,this.dH.Z,this.spt.Z,this.NDt.Z,this.WB.nt]),this.hH=new Xh(this.fW),this.WB.wH=this.hH,this.mxt=new NQ(this,this.WB),this.szt=new q(this.mxt,!0),this.ozt()}},DQ=class{async FH(t,e){return!!zh(t.type)&&!t.useNativePlayback}async VH(t){return!!t.aes128||await hT(t,!0)}},NQ=class extends Nx{get rI(){return this.na.rI}Sxt(){this._o(new hu(this.ER,this.rI))}constructor(t,e){super(e),this.na=t}};function MQ(t){return t.reduce(((t,e)=>t.jn(e.hLt.fFt)),new se([0,1/0]))}function LQ(t){const e=Fo(t,(t=>t.aLt)),i=t.filter((t=>t.uLt)),s=Ms.cw,n=i.map((t=>t.gs)).filter(Bo),r=vQ(n,s);return r?Fo(i,(t=>t.gs===r)):e}function BQ(t,e){for(const i of e){const e=t.filter((t=>t.Jrt&&t.Jrt.cPt&&_u(t.Jrt.cPt,i)));if(0!==e.length)return e}}function OQ(t){var e;return null!=(e=LQ(t))?e:t[0]}function FQ(t,e){return t.filter((t=>VQ(t,e)))}function VQ(t,e){const i=e+CQ,s=0===t.ZLt.length||t.ZLt.some((t=>t.hLt.PFt<Ms.Wg()-i)),n=0===t.HLt.length||t.HLt.some((t=>t.hLt.PFt<Ms.Wg()-i));return s&&n}function WQ(t,e){if(!e||e.hLt._Ot)return!1;const i=e.hLt.Mrt;return 0!==i.length&&i[0].WO>t}r(),r();var UQ=class{async HWt(t,e,i){try{const s=await crypto.subtle.importKey("raw",e,{name:"AES-CBC"},!1,["decrypt"]),n=await crypto.subtle.decrypt({name:"AES-CBC",iv:i},s,t);return new j(n)}catch(t){throw new A(Qa.CONTENT_PROTECTION_INTERNAL_ERROR,"Error during AES128 decrypt.")}}Xw(){}static yT(){return"undefined"!=typeof crypto&&void 0!==crypto.subtle&&void 0!==crypto.subtle.decrypt}};r(),r(),r(),r();var jc=class extends pe{constructor(t,e){super(t),this.data=e}},GQ=["message","messageerror","error"];r();var HQ=class extends pe{constructor(t){super(yo.fa),this.error=t}},ZQ=class extends Co{get mzt(){return this.gzt.Uw.Fw}pzt(t,e){this.mzt||(void 0!==this.wzt?this.wzt.pzt(t,e):this.yzt.push({wb:t,bzt:e}))}Azt(){this.mzt||(this.gzt.jw(),En(this.yzt),void 0!==this.wzt&&this.wzt.Azt())}constructor(t){super(),this.wzt=void 0,this.yzt=[],this.Szt=t=>{if(this.mzt)t.Azt();else{this.wzt=t,this.wzt.bn(GQ,this.Ds);for(const e of this.yzt)t.pzt(e.wb,e.bzt);En(this.yzt)}},this.Tzt=t=>{if(this.mzt)return;const e=t instanceof g?t:new g("Could not create Worker.");this._o(new HQ(e)),this.Azt()},this.gzt=new da,t(this.gzt.Uw).then(this.Szt,this.Tzt)}};r(),r();var XQ=class extends Co{pzt(t,e){e?this.wzt.postMessage(t,e):this.wzt.postMessage(t)}Azt(){this.Ro(),this.wzt.removeEventListener("message",this.kzt),this.wzt.removeEventListener("messageerror",this.Ezt),this.wzt.removeEventListener("error",this.a7),this.wzt.terminate()}constructor(t,e){super(),this.kzt=t=>{this._o(new jc("message",t.data))},this.Ezt=t=>{this._o(new jc("messageerror",t.data))},this.a7=t=>{null==t.preventDefault||t.preventDefault.call(t);const e=t.error instanceof g?t.error:new g(t.message);this._o(new HQ(e)),this.Azt()},this.wzt=new Bl(t,e),this.wzt.addEventListener("message",this.kzt),this.wzt.addEventListener("messageerror",this.Ezt),this.wzt.addEventListener("error",this.a7)}};r();var zQ=0,qQ=class extends Co{pzt(t,e){e?this.xzt.contentWindow.postMessage({type:"message",data:t},"*",e):this.xzt.contentWindow.postMessage({type:"message",data:t},"*")}Azt(){var t;this.xzt.removeEventListener("load",this.Rzt),self.removeEventListener("message",this.Izt),null==(t=this.xzt.contentWindow)||t.postMessage({type:"terminate"},"*"),ze(this.xzt)}constructor(t,e){super(),this.Rzt=()=>{this.xzt.removeEventListener("load",this.Rzt),this.xzt.contentWindow.postMessage({type:"initialize",id:this.zS,script:this.Czt},"*")},this.Izt=t=>{t.origin===this.Pzt&&t.data.id===this.zS&&("initialized"===t.data.type||("error"===t.data.type?(this._o(new HQ(new g(t.data.data.message))),this.Azt()):this._o(new jc("message",t.data.data))))},this.zS=zQ++,this.Czt=t;const i=Ms.Ih("iframe.html",e);this.xzt=function(t){const e=h.createElement("iframe");return e.width="0",e.height="0",e.style.display="none",e.role="",e.src=t,h.body.appendChild(e),e}(i.href),this.Pzt=i.origin,this.xzt.addEventListener("load",this.Rzt),self.addEventListener("message",this.Izt)}};function YQ(t,e,i){const s=Ms.ew(t,e);return new ZQ((t=>async function(t,e,i,s){let n;try{return n=new XQ(t,i),await jQ(n,s),n}catch(t){null==n||n.Azt(),th(t)}if(KQ&&db){let e;try{const i=await Ms.fR.Qk({Xu:t,AE:xe.GET,jk:Rr.Tk,Uw:s});e=await i.Ck(s)}catch(t){th(t)}if(e){let t;try{const r=db([e],{type:"application/javascript"});return t=URL.createObjectURL(r),n=new XQ(t,i),await jQ(n,s),n}catch(t){null==n||n.Azt(),th(t),KQ=!1}finally{t&&URL.revokeObjectURL(t)}}}try{return n=new qQ(t,e),await jQ(n,s),n}catch(t){throw null==n||n.Azt(),t}}(s,e,i,t)))}var KQ=!0;async function jQ(t,e){const i=await t.py(["message","error"],e);if("error"===i.type)throw function(t){return new A(Qa.CONFIGURATION_ERROR,"THEOplayer workers could not be loaded. Please check the configuration of the libraryLocation.",t)}(i.error);if(!function(t){return wd(t)&&"9.3.1"===t.Dzt}(i.data))throw new A(Qa.CONFIGURATION_ERROR,"THEOplayer workers could not be loaded. Please check that the worker's version matches THEOplayer's version (9.3.1).");return i}r();var QQ=function(t){return t.Nzt="HWt",t.Mzt="vUt",t}({}),JQ=function(t){return t.Lzt="Bzt",t.Ozt="Fzt",t}({}),$Q=class{Vzt(){const t=YQ(this.Wzt,this.Uzt,{name:"THEOplayer decrypt worker"});return t.bn("message",this.Gzt),t.bn("error",this.Hzt),t}HWt(t,e,i){const s=""+ ++this.Zzt,n={Xzt:QQ.Nzt,zzt:s,qzt:t,Yzt:e,Kzt:i},r=new os;return this.jzt.set(s,r),null!=this.wzt||(this.wzt=this.Vzt()),this.wzt.pzt(n),r.Ub}Xw(t){void 0===t&&(t=new Bu),this.jzt.forEach((e=>e.Wb(t))),this.jzt.clear(),this.wzt&&(this.wzt.Azt(),this.wzt=void 0)}constructor(t){this.wzt=void 0,this.Zzt=0,this.jzt=Oh(),this.Gzt=t=>{const e=t.data,i=e.Qzt,s=this.jzt.get(i);if(s)if(this.jzt.delete(i),e.Jzt===JQ.Lzt)s.Vb(e.$zt);else if(e.Jzt===JQ.Ozt){const t=e.tqt,i=e.eqt?new g(e.eqt):void 0,n=new A(Qa.CONTENT_PROTECTION_INTERNAL_ERROR,"Error during AES128 decrypt. (code: "+t+")",i);s.Wb(n)}},this.Hzt=t=>{const e=new A(Qa.CONTENT_PROTECTION_INTERNAL_ERROR,t.error.message,t.error);this.Xw(e)},this.Uzt=t;try{this.Wzt=Ms.ew("theoplayer.d.js",t)}catch(t){throw new A(Qa.CONFIGURATION_ERROR,"Invalid player configuration: missing libraryLocation",t)}}};function tJ(t){return UQ.yT()?new UQ:new $Q(t)}function eJ(t){const e=Fo(t.boxes,sN);if(!e)return;const i=Fo(e.boxes,nN);return i?i.handlerType:void 0}function iJ(t){const e=new _y;return e.boxes.push(...t.boxes),e}function sJ(t){const e=new xc;return e.boxes.push(...t.boxes),e}r(),r(),r(),r();var nJ=8;function rJ(t,e){const i=function(t){const e=new Gw;return e.boxes.push(...t.boxes),e}(t),s=hJ(e);for(let t=0;t<i.boxes.length;t++){const n=i.boxes[t];if(n===e)i.boxes[t]=new nw(new j(e.getSize()-nJ));else if(rN(n)){const e=n,r=rn(e.boxes,(t=>t instanceof pc&&t.trackId===s));if(r>=0){const s=e.boxes[r],n=sJ(e);n.boxes[r]=new nw(new j(s.getSize()-nJ)),i.boxes[t]=n}}}return i}function oJ(t,e){const i=function(t){const e=new Jw;return e.boxes.push(...t.boxes),e}(t);for(let t=0;t<i.boxes.length;t++){const s=i.boxes[t];if(aN(s)){const n=Fo(s.boxes,uN);n&&n.trackId===e&&(i.boxes[t]=new nw(new j(s.getSize()-nJ)))}}return i}function hJ(t){return Fo(t.boxes,iN).trackId}function aJ(t,e,i,s){const n=Fo(t.boxes,uN),r=i.lV(e).GF();let o=vo.ZERO;for(const e of t.boxes){if(e instanceof wc){o=uf(e.baseMediaDecodeTime,r),e.baseMediaDecodeTime=e.baseMediaDecodeTime.subtract(o);break}if(e instanceof Xw){o=uf(vo.fromNumber(e.baseMediaDecodeTime),r),e.baseMediaDecodeTime-=o.toNumber();break}}if(o.isZero())return;const h=Fo(t.boxes,cN);if(void 0!==h&&h.samples.length>0){const t=h.samples;if(!h.flags.sampleDurationPresent){h.flags.sampleDurationPresent=!0;const e=null!=s?s:n.defaultSampleDuration;for(const i of t)i.duration=e}t[0].duration+=o.toNumber(),h.samples=t}}r();var uJ="Mp4Transmuxer",cJ=class extends eQ{lHt(t,e){J(e);const i=t.gLt,s=LN(ra(t.uOt.Kk.Kk));if(!s)throw new g("Mp4Transmuxer - Unable to parse "+i.Tw+" MP4 initializer.");this.E2=s;const n=function(t){let e,i;for(const s of t.Z)e||(e=s.h1),i||(i=s.o1);if(e||i)return{cPt:e,dPt:i,kBt:void 0};return}(s);n&&this._Ht(i,n);const r=function(t){for(const e of t.Z)if(void 0!==e.a1)return e.a1;return}(s);void 0!==r&&this.vHt(i,r);const o=function(t){var e;const i=yy(t),s=Fo(i.boxes,tN),n=s.boxes.filter(eN),r=Fo(n,(t=>eJ(t)===_w.AUDIO)),o=Fo(n,(t=>eJ(t)===_w.VIDEO)),h={cPt:{EN:r?hJ(r):void 0},dPt:{EN:o?hJ(o):void 0}},a=null==(e=Fo(s.boxes,rN))?void 0:e.boxes.filter(oN);var u,c;const l=a?{cPt:null!=(u=Fo(a,(t=>t.trackId===h.cPt.EN)))?u:void 0,dPt:null!=(c=Fo(a,(t=>t.trackId===h.dPt.EN)))?c:void 0}:void 0;var d,f;if(l&&(h.cPt.QM=null==(d=l.cPt)?void 0:d.defaultSampleDuration,h.dPt.QM=null==(f=l.dPt)?void 0:f.defaultSampleDuration),!r||!o)return{cPt:r?t:void 0,dPt:o?t:void 0,qV:h};const _=iJ(i),v=iJ(i),m=i.boxes.indexOf(s);_.boxes[m]=rJ(s,o),v.boxes[m]=rJ(s,r);const g=_.serialize().join(),p=v.serialize().join();return{cPt:g,dPt:p,qV:h}}(t.uOt.Kk.Kk);if(this.iqt=o.qV,o.dPt){const e=Fo(s.Z,(t=>t.EN===o.qV.dPt.EN)),i={Tw:"RCt",Kk:{Tw:Ce.iJ,Kk:o.dPt},Cat:ee.mE,dOt:t.dOt,yHt:{Jrt:'video/mp4; codecs="'+e.o1+'"',nOt:t.nOt},WO:t.WO,gLt:t.gLt,VWt:t.uOt.VWt};this.NGt(i)}if(o.cPt){const e=Fo(s.Z,(t=>t.EN===o.qV.cPt.EN)),i={Tw:"RCt",Kk:{Tw:Ce.iJ,Kk:o.cPt},Cat:ee.vE,dOt:t.dOt,yHt:{Jrt:'audio/mp4; codecs="'+e.h1+'"',nOt:t.nOt},WO:t.WO,gLt:t.gLt,VWt:t.uOt.VWt};this.NGt(i)}return Promise.resolve()}async fHt(t,e){J(e);const i=t.Zut.VWt;UY.MN(uJ,"Transmuxing fMP4: "+Fe(i.Fyt));const s=t.Zut.Kk,n=lJ(s.Kk,this.E2),r=hh(n.map((t=>t.pit)),Qk);if(void 0!==r&&(i.wit=r,this.gHt(t.gLt)),!this.kVt.$Ft(t.dOt)){const s=H.vV(i.WO);if(n.length>0){const e=hh(n.map((t=>t.sqt)),Qk);for(const n of this.nHt)this.kVt.lVt(t.dOt,n,e,s,dJ(i),!1);this.gHt(t.gLt)}this.kVt.$Ft(t.dOt)||await ou(this.kVt.eVt(t.dOt),e)}const o=this.kVt.hVt(t.dOt),h=i.wit?this.kVt.aVt(i.wit,i)._F():i.WO,a=iQ(i,h);var u;const c={XGt:a,zGt:sQ(i,a),WO:h,ct:null!=(u=i.ct)?u:0,BV:o._F(),dOt:t.dOt,gLt:t.gLt,VWt:t.Zut.VWt},l=function(t,e){if(void 0===e.cPt.EN)return{cPt:void 0,dPt:t};if(void 0===e.dPt.EN)return{cPt:t,dPt:void 0};const i=yy(t),s=iJ(i),n=iJ(i);for(let t=0;t<i.boxes.length;t++){const r=i.boxes[t];hN(r)&&(s.boxes[t]=oJ(r,e.dPt.EN),n.boxes[t]=oJ(r,e.cPt.EN))}const r=s.serialize().join(),o=n.serialize().join();return{cPt:r,dPt:o}}(s.Kk,this.iqt);if(l.dPt){var d;const e=this.iqt.dPt.EN,s=Fo(this.E2.Z,(t=>t.EN===e)),o=Fo(n,(t=>t.EN===e)),h=this.nqt(l.dPt,s,o,null==(d=this.iqt)?void 0:d.dPt.QM,i);this.rqt=s,this.mHt(t.gLt,i,o.pit.kF(r));const a=ol({Tw:"Zut",Kk:{Tw:Ce.iJ,Kk:h},Cat:ee.mE},c);this.NGt(a)}if(l.cPt){const t=ol({Tw:"Zut",Kk:{Tw:Ce.iJ,Kk:l.cPt},Cat:ee.vE},c);this.NGt(t)}this.oqt=i,this.hqt=n}nqt(t,e,i,s,n){if(!dJ(n))return t;if(!this.oqt||!this.rqt||!this.hqt)return t;const r=this.rqt.EN,o=Fo(this.hqt,(t=>t.EN===r)),h=this.kVt.aVt(o.aqt,this.oqt),a=this.kVt.aVt(i.pit,n).kF(h).lV(e.mN);if(a.wF(H.DF))return t;if(a.vF(H.vV(.5)))return t;const u=Wu(n)?n:n.VOt;return UY.VLt(uJ,"Stretching first video frame of segment #"+u.YBt+" to fill gap of "+a._F()+"s"),function(t,e,i,s){const n=yy(t),r=Fo(n.boxes,hN);if(r){const t=r.getSize();for(const t of r.boxes)t instanceof Eh&&aJ(t,e,i,s);const n=r.getSize();if(n!==t){const e=n-t;for(const t of r.boxes)t instanceof Eh&&lN(t,e)}}return n.serialize().join()}(t,e.mN,a,s)}constructor(...t){super(...t),this.E2=void 0,this.iqt=void 0,this.oqt=void 0,this.hqt=void 0,this.rqt=void 0}};function lJ(t,e){const i=dn(nr.JD(ra(t)),_t.oD);if(!i)throw new g("Mp4Transmuxer - Unable to parse segment or part.");return function(t,e){const i=[];for(const n of t.Z){if(!n.aL||0===n.hL.length||0===n.hL[0]._L.length)continue;const t=n.XD.EN,r=Fo(e.Z,(e=>e.EN===t));let o=0,h=1/0,a=0;const u=n.XD.QM||0;for(const t of n.hL)for(const e of t._L){const t=e.vL||0,i=o+t;var s;o+=null!=(s=e.ct)?s:u;const n=o+t;i<h&&(h=i),n>a&&(a=n)}const c=H.IF(n.aL.aL,r.mN);i.push({EN:t,sqt:c,pit:c.kO(H.CF(h,r.mN)),uqt:c.kO(H.CF(o,r.mN)),aqt:c.kO(H.CF(a,r.mN))})}return i}(i,e)}function dJ(t){return Wu(t)?t.aOt:0===t.UOt&&t.VOt.aOt}var fJ="MpegtsTransmuxer",_J=class extends cJ{lHt(t,e){return super.lHt(t,e)}aHt(t,e){if(super.aHt(t,e),this.sx.cqt())return;var i;const s=null!=(i=null==e?void 0:e.Fyt)?i:t.Fyt;if(!s)return;/\.(ts|aac|mp3)/i.test(s.Mx)&&this.sx.lqt()}dqt(t){let e;return t.gLt===this.fqt&&this._qt.has(t.dOt)?e=this._qt.get(t.dOt):(e=SQ(t.Zut.Kk.Kk),this.fqt=t.gLt,this._qt.set(t.dOt,e)),e}async fHt(t,e){J(e);const i=this.dqt(t),s=t.Zut;if(i!==AQ.qHt&&i!==AQ.YHt)return super.fHt(t,e);if(s.VWt.nOt.some(mJ))throw new A(Qa.CONTENT_PROTECTION_NOT_SUPPORTED,"SAMPLE-AES encryption is not supported for MPEG-TS or Packed Audio segments");const n=this.sx.lqt();let r;i===AQ.qHt?(UY.MN(fJ,"Transmuxing MPEG-TS: "+Fe(s.VWt.Fyt)),r=await n.vqt({data:s.Kk.Kk,metadata:this.mqt})):(UY.MN(fJ,"Transmuxing raw audio: "+Fe(s.VWt.Fyt)),r=await n.gqt({data:s.Kk.Kk,metadata:this.mqt})),J(e),this._Ht(t.gLt,{cPt:r.metadata.audio_codec,dPt:r.metadata.video_codec,kBt:void 0}),r.metadata.video_frame_rate&&this.vHt(t.gLt,r.metadata.video_frame_rate);const o=gJ(r.metadata.first_decode_timestamp),h=gJ(r.metadata.first_presentation_timestamp),a=void 0!==r.metadata.first_video_presentation_timestamp?gJ(r.metadata.first_video_presentation_timestamp):void 0;if(s.VWt.wit=h,this.gHt(t.gLt),void 0!==a&&this.mHt(t.gLt,s.VWt,function(t,e){let i=t.kF(e);return i.bF(H.DF)&&(i=i.kO(tE())),i}(a,h)),!this.kVt.$Ft(t.dOt)){const i=H.vV(s.VWt.WO);for(const e of this.nHt)this.kVt.lVt(t.dOt,e,o,i,dJ(s.VWt),!0);this.gHt(t.gLt),this.kVt.$Ft(t.dOt)||await ou(this.kVt.eVt(t.dOt),e)}const u=this.kVt.cVt(o,s.VWt);this.mqt=r.metadata;const c=this.kVt.aVt(h,s.VWt)._F(),l=iQ(s.VWt,c);var d;const f={XGt:l,zGt:sQ(s.VWt,l),WO:c,ct:null!=(d=s.VWt.ct)?d:0,BV:u._F(),dOt:t.dOt,gLt:t.gLt,VWt:s.VWt};if(void 0===r.data.audio_media&&void 0===r.data.video_media){for(const t of this.nHt){const e=ol({Tw:"Zut",Kk:void 0,Cat:t},f);this.NGt(e)}return}const _=[];if(void 0!==r.data.audio_media){if(r.data.audio_init&&(!this.pqt||this.wqt!==t.dOt||!_e(this.pqt,r.data.audio_init))){const e=this.kVt.aVt(s.VWt.wit,s.VWt)._F(),i={Tw:"RCt",Kk:{Tw:Ce.iJ,Kk:r.data.audio_init},Cat:ee.vE,dOt:t.dOt,yHt:{Jrt:'audio/mp4; codecs="'+r.metadata.audio_codec+'"',nOt:s.VWt.nOt},WO:e,gLt:t.gLt,VWt:s.VWt};this.pqt=r.data.audio_init,this.wqt=t.dOt,this.NGt(i)}const e=ol({Tw:"Zut",Kk:{Tw:Ce.iJ,Kk:r.data.audio_media},Cat:ee.vE},f);this.NGt(e)}else if(t.Zut.VWt.OOt&&ms(this.nHt,ee.vE)){const t=ol({Tw:"Zut",Kk:void 0,Cat:ee.vE},f);this.NGt(t)}if(void 0!==r.data.video_media){if(r.data.video_init&&(!this.yqt||this.bqt!==t.dOt||!_e(this.yqt,r.data.video_init))){const e=this.kVt.aVt(s.VWt.wit,s.VWt)._F(),i={Tw:"RCt",Kk:{Tw:Ce.iJ,Kk:r.data.video_init},Cat:ee.mE,dOt:t.dOt,yHt:{Jrt:'video/mp4; codecs="'+r.metadata.video_codec+'"',nOt:s.VWt.nOt},WO:e,gLt:t.gLt,VWt:s.VWt};this.yqt=r.data.video_init,this.bqt=t.dOt,this.Aqt=LN(ra(r.data.video_init)),this.NGt(i)}const e=this.Aqt.Z[0],i=lJ(r.data.video_media,this.Aqt)[0],n=this.nqt(r.data.video_media,e,i,void 0,s.VWt);this.rqt=e;const o=ol({Tw:"Zut",Kk:{Tw:Ce.iJ,Kk:n},Cat:ee.mE},f);this.NGt(o),_.push(i)}else if(t.Zut.VWt.OOt&&ms(this.nHt,ee.mE)){const t=ol({Tw:"Zut",Kk:void 0,Cat:ee.mE},f);this.NGt(t)}this.oqt=s.VWt,this.hqt=_}jw(){this.pqt=void 0,this.yqt=void 0,this.wqt=-1,this.bqt=-1,super.jw()}constructor(t,e,i,s){super(e,i,s),this.mqt=void 0,this.pqt=void 0,this.yqt=void 0,this.Aqt=void 0,this.wqt=-1,this.bqt=-1,this.fqt=void 0,this._qt=ne(),this.sx=t}},vJ=class{kTt(t,e,i){return new _J(this,t,e,i)}};function mJ(t){return t.AE===$t.dBt}function gJ(t){return H.IF(vo.fromBits(t.low,t.high),t.base)}r(),r();var pJ=function(t){return t[t.MPEGTS_TO_FMP4=0]="MPEGTS_TO_FMP4",t[t.RAW_AUDIO_TO_FMP4=1]="RAW_AUDIO_TO_FMP4",t}({}),wJ=()=>{const t=function(){if("undefined"==typeof WebAssembly)return!1;const t=Z.ym;if(t>0&&t<=56)return!1;try{return void 0!==new WebAssembly.Module(ha("AGFzbQEAAAA="))}catch(t){return!1}}();return wJ=()=>t,t};var yJ=class{vqt(t){return this.Sqt(pJ.MPEGTS_TO_FMP4,t)}gqt(t){return this.Sqt(pJ.RAW_AUDIO_TO_FMP4,t)}Vzt(){const t=YQ(this.Wzt,this.Uzt,{name:"THEOplayer transmux worker"});return t.bn("message",this.Gzt),t.bn("error",this.Hzt),t}Sqt(t,e){const i=++this.Zzt,s={type:t,id:i,input:e},n=new os;return this.jzt.set(i,n),this.wzt.pzt(s),n.Ub}Xw(t){void 0===t&&(t=new Bu),this.jzt.forEach((e=>e.Wb(t))),this.jzt.clear(),this.wzt.Azt()}constructor(t){this.Zzt=0,this.jzt=ne(),this.Gzt=t=>{const e=t.data;if(void 0!==e.requestId){const t=this.jzt.get(e.requestId);if(!t)return;this.jzt.delete(e.requestId),e.success?t.Vb(e.output):t.Wb(new A(e.errorCode,e.error))}else e.success||this.Xw(new A(e.errorCode,e.error))},this.Hzt=t=>{const e=new A(Qa.MEDIA_DECODE_ERROR,t.error.message,t.error);this.Xw(e)},this.Uzt=t;const e=wJ()?"THEOplayer.transmux.js":"THEOplayer.transmux.asmjs.js";try{this.Wzt=Ms.ew(e,t)}catch(t){throw new A(Qa.CONFIGURATION_ERROR,"Invalid player configuration: missing libraryLocation",t)}this.wzt=this.Vzt()}},bJ=class extends vJ{cqt(){return void 0!==this.wzt}lqt(){var t;return null!=(t=this.wzt)?t:this.wzt=new yJ(this.Tqt)}Xw(){this.wzt&&(this.wzt.Xw(),this.wzt=void 0)}constructor(t){super(),this.Tqt=t,this.wzt=void 0}},AJ=class{Ait(){return new bJ(this.Tqt)}constructor(t){this.Tqt=t}},SJ=class extends PQ{TI(){return this.WB.TI()}get AI(){return this.WB.AI}set AI(t){this.WB.AI=t}async yn(){var t;await super.yn(),null==(t=this.kxt)||t.yn()}constructor(t,e,i,s,n,r,o,h){super(t,e,i,s,n,r,o,h),Z.eg&&(this.kxt=new TV(this))}},TJ=class extends SJ{async yn(){await super.yn(),await this.bH.yH(this.WB)}constructor(t,e,i,s,n,r,o,h){const a=new ut(t);super(a.OH(ee.mE),e,i,s,n,r,o,h),this.bH=a}},kJ=class extends DQ{async FH(t,e){return!!Ia(t.useManagedMediaSource)&&(!(!t.useManagedMediaSource&&(Z.su||Z.Cg))&&super.FH(t,e))}async VH(t){return!(t.clearkey&&!t.fairplay&&Z.eg)&&super.VH(t)}};O(new class extends kJ{uP(t,e,i,s,n,r,o){return new TJ(e,i,n,r,tJ(s.libraryLocation),new AJ(s.libraryLocation),new tV(To.Vg.Brt,To.Vg.Lrt,To.Vg.Mrt,To.Vg.Frt),s)}WH(){return!0}constructor(...t){super(...t),this.UH=zt.YC}}),UY.Rt=()=>{var t;return Boolean(null==(t=s)?void 0:t.THEOplayerDebugLogsEnabled)},r(),r(),r(),r();var EJ=class{vrt(t,e){return Promise.resolve(!1)}grt(t,e){return Promise.resolve(void 0)}drt(t){return Promise.resolve(void 0)}IQ(t){return Promise.resolve(void 0)}},xJ=class extends Co{kqt(){var t;return null==(t=this.Eqt)?void 0:t.hLt}Sn(){ah(Ci((()=>this.xqt(this.GT.Uw)),this.GT.Uw))}async xqt(t){await this.vEt.qVt(t),this.Rqt&&(this.Iqt(this.Rqt.ji,this.Rqt.Ti),this.Rqt=void 0),this.O6=!0}Cqt(t,e){this.O6?this.Iqt(t,e):this.Rqt={ji:t,Ti:e}}Iqt(t,e){const i=this.Pqt(t,e),s=null==i?void 0:i.ZLt[0];s!==this.Eqt&&(this.Dqt(),void 0!==s&&(this.Eqt=s,this.Nqt=new Rj(this.vEt,s),this.Nqt.tUt()))}Dqt(){this.Eqt=void 0,this.Nqt&&(this.Nqt.Xw(),this.Nqt=void 0)}Pqt(t,e){const i=Fo(this.vEt.Er.GLt,(i=>void 0!==i.$Ct&&i.$Ct.ji===t&&i.$Ct.Ti===e));return null!=i?i:this.vEt.Er.GLt[0]}yn(){this.Ro(),this.GT.jw(),this.GT.Xw(),this.Dqt(),this.vEt.Xw()}constructor(t,e,i){super(),this.Eqt=void 0,this.Nqt=void 0,this.Rqt=void 0,this.GT=new da,this.Mqt=()=>{this._o(new lt)},this.Sc=t,this.vEt=new gj(i,new EJ,t.useCredentials,t.src,t.liveOffset),this.vEt.bn(Ti.Gy,this.Ds),this.O6=!1}};r();var RJ=class extends sn{get ht(){return this.b9.ht}get wR(){return this.b9.wR}get bR(){return this.b9.bR}set bR(t){this.b9.bR=t}get bt(){return this.b9.bt}get ER(){return this.b9.ER}set ER(t){this.b9.ER=t}RR(t,e){this.ER=t}get ct(){return this.b9.ct}get PR(){return this.b9.PR}get MR(){return this.b9.MR}get OR(){return this.b9.OR}get lt(){return this.b9.lt}get WR(){return this.b9.WR}get GR(){return this.b9.GR}get ZR(){return this.b9.ZR}set ZR(t){this.b9.ZR=t}get qR(){return this.b9.qR}get KR(){return this.b9.KR}get QR(){return this.b9.QR}set QR(t){this.b9.QR=t}get tI(){return this.b9.tI}get iI(){return this.b9.iI}set iI(t){this.b9.iI=t}get rI(){return this.b9.rI}get hI(){return this.b9.hI}get uI(){return this.b9.uI}get $G(){return this.b9.$G}get nt(){return this.b9.nt}get dI(){return this.b9.dI}get rt(){return this.b9.rt}get vI(){return this.b9.vI}get gI(){return this.b9.gI}set gI(t){this.b9.gI=t}get yI(){return this.b9.yI}get AI(){return this.b9.AI}set AI(t){this.b9.AI=t}get eH(){return this.b9.eH}get KB(){}II(){return this.b9.II()}SI(){return this.b9.SI()}ja(){return this.b9.ja()}OI(t){return this.b9.OI(t)}TI(){return this.b9.TI()}be(){return this.b9.be()}NI(){return this.b9.NI()}MI(){return this.b9.MI()}EI(){return this.b9.EI()}xI(){return this.b9.xI()}nr(){return this.b9.nr()}Ca(t,e,i){return this.b9.Ca(t,e,i)}ge(){return this.b9.ge()}CI(){return this.b9.CI()}DI(){return this.b9.DI()}yn(){this.Ro();for(const t of xI)this.b9.vn(t,this.Ds);return this.b9.yn()}constructor(t){super(),this.b9=t;for(const t of xI)this.b9.bn(t,this.Ds)}},IJ=class extends RJ{async Ca(t,e,i){await super.Ca(t,e,i),t.hlsDateRange&&this.Nyt(t,e)}Nyt(t,e){this.Lqt=new xJ(t,e,this.Bqt),this.Lqt.bn(Ti.Gy,this.handleManifestUpdate),this.Lqt.Sn()}nr(){return this.vWt&&(this.nt.it(this.vWt),this.b8.it(this.vWt),this.vWt.yn(),this.vWt=void 0,this.Oqt=!1),this.Lqt&&(this.Lqt.yn(),this.Lqt=void 0),this.b8.nr(),super.nr()}yn(){return this.vn(Ti.jy,this.dzt),this.Lqt&&(this.Lqt.yn(),this.Lqt=void 0),this.b8.yn(),super.yn()}constructor(t,e,i){super(t),this.Lqt=void 0,this.Oqt=!1,this.vWt=void 0,this.handleManifestUpdate=()=>{const t=this.Lqt.kqt();if(t){const e=this.$G;if(e){const i=e.getTime();let s=this.vWt;s||(s=new YK,this.vWt=s),s.ir(t.fOt,(t=>(t.getTime()-i)/1e3)),!this.Oqt&&s.L.V>0&&(this.nt.tt(s),this.b8.tt(s),this.Oqt=!0)}}},this.dzt=()=>{this.Lqt&&this.Lqt.Cqt(this.vI,this.dI)},this.Bqt=e,this.b8=new su(this),this.bn(Ti.jy,this.dzt)}};!function(t){bI.GH().HH(t)}((function(t,e,i){return new IJ(t,e,i)})),r(),r(),r(),r();var Xi=class extends ri{get name(){return"CastError"}constructor(t,e=""){super("An error occurred while casting."),this.errorCode=t,this.description=e}};async function CJ(t){NJ()||await async function(t){if(null==t?void 0:t.Fw)return Promise.reject(new Bu);const{Ub:e,Vb:i,Wb:n}=function(){let t,e;return{Ub:new Promise(((i,s)=>{t=i,e=s})),Vb:t,Wb:e}}(),r=s.__onGCastApiAvailable,o=()=>{s.__onGCastApiAvailable=r,n(new Bu)};return s.__onGCastApiAvailable=(e,h)=>{e?i():n(new g(h)),null==t||t.Vw(o),s.__onGCastApiAvailable=r,r&&r(e,h)},null==t||t.Ww(o),e}(t),DJ()||await ke(100,t),DJ()||(Ms.Vp('Detected the Chromecast library was loaded without the CAF framework. It is strongly encouraged to load it with the CAF framework by using this URL: "//www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1"'),await PJ())}var PJ=sl((()=>function(t){return new Promise(((e,i)=>{const s=h.createElement("script");s.onload=()=>e(),s.onerror=t=>i((null==t?void 0:t.error)||t),s.type="text/javascript",s.src=t,(h.head||h.documentElement).appendChild(s)}))}("//www.gstatic.com/cast/sdk/libs/sender/1.0/cast_framework.js").catch((()=>{throw new Xi("API_NOT_INITIALIZED","The Chromecast library could not be loaded successfully.")}))));function DJ(){return Boolean("undefined"!=typeof cast&&cast.framework)}function NJ(){return"undefined"!=typeof chrome&&chrome&&chrome.cast&&chrome.cast.isAvailable}function MJ(t,e,i,s){if(Bo(e))for(const i of w.keys(e)){if("type"===i||"images"===i)continue;const s=e[i];Bo(s)&&(t[i]=s)}!function(t,e,i,s){if(!Bo(i)&&!Bo(null==e?void 0:e.images))return;t.images=[],i&&t.images.push(new s.Image(i));if(null==e?void 0:e.images)if(Yt(e.images))t.images.push(new s.Image(e.images));else if($c(e.images))for(const i of e.images){let e;var n,r;if(Yt(i))e=new s.Image(i);else e=new s.Image(i.src),e.height=null!=(n=i.height)?n:null,e.width=null!=(r=i.width)?r:null;t.images.push(e)}}(t,e,i,s)}function LJ(t,e,i){return void 0===i&&(i=chrome),function(t,e,i){switch(null==t?void 0:t.type){case"movie":{const s=new i.MovieMediaMetadata;return MJ(s,t,e,i),s}case"audio":{const s=new i.MusicTrackMediaMetadata;return MJ(s,t,e,i),!Bo(s.artist)&&Bo(t.artistName)&&(s.artist=t.artistName),s}case"tv-show":{const s=new i.TvShowMediaMetadata;return MJ(s,t,e,i),!Bo(s.title)&&Bo(t.episodeTitle)&&(s.title=t.episodeTitle),!Bo(s.season)&&Bo(t.seasonNumber)&&(s.season=t.seasonNumber),!Bo(s.episode)&&Bo(t.episodeNumber)&&(s.episode=t.episodeNumber),s}default:{const s=new i.GenericMediaMetadata;return MJ(s,t,e,i),s}}}(t,e,function(t){return{GenericMediaMetadata:t.cast.media.GenericMediaMetadata,MovieMediaMetadata:t.cast.media.MovieMediaMetadata,TvShowMediaMetadata:t.cast.media.TvShowMediaMetadata,MusicTrackMediaMetadata:t.cast.media.MusicTrackMediaMetadata,Image:t.cast.Image}}(i))}function BJ(t){switch(t){case chrome.cast.ErrorCode.CANCEL:return"CANCEL";case chrome.cast.ErrorCode.TIMEOUT:return"TIMEOUT";case chrome.cast.ErrorCode.API_NOT_INITIALIZED:return"API_NOT_INITIALIZED";case chrome.cast.ErrorCode.INVALID_PARAMETER:return"INVALID_PARAMETER";case chrome.cast.ErrorCode.EXTENSION_NOT_COMPATIBLE:return"EXTENSION_NOT_COMPATIBLE";case chrome.cast.ErrorCode.EXTENSION_MISSING:return"EXTENSION_MISSING";case chrome.cast.ErrorCode.RECEIVER_UNAVAILABLE:return"RECEIVER_UNAVAILABLE";case chrome.cast.ErrorCode.SESSION_ERROR:return"SESSION_ERROR";case chrome.cast.ErrorCode.CHANNEL_ERROR:return"CHANNEL_ERROR";case chrome.cast.ErrorCode.LOAD_MEDIA_FAILED:return"LOAD_MEDIA_FAILED";default:return"CANCEL"}}function OJ(t){if(t.items&&t.items.length>0&&t.currentItemId>=0)return Fo(t.items,(e=>e.itemId===t.currentItemId))}r(),r(),r(),r(),r();var FJ="urn:x-cast:com.theoplayer.cast";r(),r();var VJ=function(t){return t.Fqt="theoplayer_receiver_info",t.Vqt="theoplayer_trackpropertychange",t.Wqt="theoplayer_propertychange",t}({});r();var WJ=function(t){return t.SKIP_AD="SKIP_AD",t}({});r();function Ir(t){h.createElement("img").src=t}r(),r(),r();var UJ=new RegExp(/^(\d\d):(\d\d):(\d\d)(?:\.(\d{3}))?$/);function GJ(t){if(!Yt(t))return;const e=t.match(UJ);return e?3600*x(e[1],10)+60*x(e[2],10)+Number(e[3])+(Number(e[4])||0)/1e3:void 0}function HJ(t){if(void 0===t)return;const e=t.match(/^([1-9]?\d|100)%$/);return e?x(e[1])/100:void 0}function pt(t,e){return"vmap"===t.type||!Bo(t.type)&&!Bo(e)}function ZJ(t,e){return"vast"===t.type||!Bo(t.type)&&Bo(e)}r(),r(),r();var XJ=class{},zJ=class extends XJ{get Uqt(){return this.Oc}Gqt(){return null!=this.Hqt||(this.Hqt=on(this.Oc,(t=>t.Gqt()))),this.Hqt}constructor(t){super(),this.Oc=t.sort(((t,e)=>t.sL-e.sL))}};r(),r();var qJ=class extends XJ{get o(){return this.Zqt}get sL(){return this.Xqt}get zqt(){return this.qqt}constructor(t,e){super(),this.Zqt=t,this.Xqt=e,this.qqt=!1}},YJ=class extends qJ{get Yqt(){return this.Kqt}get jqt(){return this.Qqt}get Jqt(){return this.$qt}get tYt(){return this.eYt}get lt(){return this.YG}Gqt(){if(void 0===this.iYt){let t,e,i,s=[];for(const n of this.Kqt)n.sYt&&(t=n.sYt),n.nYt&&(e=n.nYt),n.rYt&&(i=n.rYt),s=s.concat(n.universalAdIds);this.iYt={tYt:this.tYt,sYt:t,oYt:e,rYt:i,lt:this.lt,hYt:s}}return[this.iYt]}constructor(t,e,i,s,n,r,o){super(t,e),this.Qqt=i,this.$qt=s,this.eYt=n,this.Kqt=r,this.YG=o}};r(),r();var KJ=class{get aYt(){return this.uYt}get cYt(){return this.lYt}constructor(t,e){this.uYt=t,this.lYt=e}},jJ=class{get dYt(){return this.fYt}get _Yt(){return this.vYt}get mYt(){return this.gYt}get pYt(){return this.wYt}get sd(){return this.yYt}set sd(t){this.yYt=t}get bYt(){return this.AYt}get SYt(){return this.TYt}kYt(){this.TYt=!0}get jqt(){return this.Qqt}constructor(t,e,i,s,n,r){this.fYt=t,this.vYt=e,this.gYt=i,this.wYt=s,this.TYt=!1,this.AYt=n,this.Qqt=r}};r();var QJ=function(t){return t.EYt="all",t.xYt="any",t.$H="none",t}({});var JJ=class{get RYt(){return this.IYt}get CYt(){return this.PYt}constructor(t,e){this.IYt=t,this.PYt=e}},$J=class{get o(){return this.zS}get ji(){return this.YA}get Ti(){return this.KA}get DYt(){return this.NYt}get MYt(){return this.LYt}get BYt(){return this.OYt}get FYt(){return this.VYt}get WYt(){return this.UYt}get GYt(){return this.HYt}get ZYt(){return this.XYt}get dYt(){return this.fYt}get _Yt(){return this.vYt}get mYt(){return this.gYt}get zYt(){return this.qYt}get cYt(){return this.YYt}get KYt(){return this.jYt}constructor(t,e,i,s,n,r,o,h,a,u,c,l,d,f,_,v){this.YA=t,this.KA=e,this.zS=i,this.NYt=s,this.LYt=n,this.OYt=r,this.VYt=o,this.UYt=h,this.HYt=a,this.XYt=u,this.fYt=c,this.vYt=l,this.gYt=d,this.qYt=f,this.YYt=_,this.jYt=v}};r();var t$=class{get id(){return this.zS}get uri(){return this.ZOt}constructor(t,e){this.zS=t,this.ZOt=e}},Pr=class{get QYt(){return this.JYt}get $Yt(){return this.tKt}get eKt(){return this.iKt}get sKt(){return this.nKt}constructor(t,e,i,s){this.JYt=t,this.tKt=e,this.iKt=i,this.nKt=s}},e$=class extends qJ{get tYt(){return this.eYt}get rKt(){return this.oKt}get hKt(){return this.aKt}get Yqt(){return this.Kqt}get uKt(){return this.cKt}get lKt(){return this.dKt}get lt(){return this.YG}Gqt(){return void 0===this.oKt?[]:(null!=this.Hqt||(this.Hqt=this.oKt.Gqt().map((t=>this.fKt(t)))),this.Hqt)}fKt(t){let e,i,s;for(const t of this.Yqt)t.sYt&&(e=t.sYt),t.nYt&&(i=t.nYt),t.rYt&&(s=t.rYt);const n=t.tYt.concat(this.tYt);let r=t.sYt;if(e&&t.sYt){const i=new Pr(t.sYt._Kt.QYt,t.sYt._Kt.$Yt,t.sYt._Kt.eKt.concat(e._Kt.eKt),t.sYt._Kt.sKt.concat(e._Kt.sKt));r=t.sYt,r._Kt=i,r.cYt=r.cYt.concat(e.cYt)}let o=t.oYt;if(i&&i.aYt){var h,a;const s=[];for(const t of i.aYt)s.concat(t.pYt.eKt);const n=[];var u,c;for(const i of null!=(u=null==(h=t.oYt)?void 0:h.aYt)?u:[]){var l,d,f;const r=new Pr(i.pYt.QYt,i.pYt.$Yt,i.pYt.eKt.concat(s),(null!=(d=null==(l=t.sYt)?void 0:l._Kt.sKt)?d:[]).concat(null!=(f=null==e?void 0:e._Kt.sKt)?f:[]));n.push(new jJ(i.dYt,i._Yt,i.mYt,r,i.bYt,i.jqt))}o=new KJ(n,(null!=(c=null==(a=t.oYt)?void 0:a.cYt)?c:[]).concat(i.cYt))}let _=t.rYt;if(_){var v;let e=_.RYt;var m,g;s&&s.RYt&&(e=s.RYt),_=new JJ(e,(null!=(m=null==(v=t.rYt)?void 0:v.CYt)?m:[]).concat(null!=(g=null==s?void 0:s.CYt)?g:[]))}let p=t.lt;return this.lt&&(p=this.lt),{tYt:n,sYt:r,oYt:o,rYt:_,lt:p,hYt:t.hYt}}constructor(t,e,i,s,n,r,o,h,a){super(t,e),this.eYt=i,this.oKt=s,this.aKt=n,this.Kqt=r,this.cKt=o,this.dKt=h,this.YG=a}};r();var i$=class{get o(){return this.zS}get vKt(){return this.mKt}get gKt(){return this.pKt}get WYt(){return this.UYt}get sYt(){return this.wKt}get nYt(){return this.yKt}get rYt(){return this.bKt}get universalAdIds(){return this.AKt}constructor(t,e,i,s,n,r,o,h){this.zS=t,this.mKt=e,this.pKt=i,this.UYt=s,this.wKt=n,this.yKt=r,this.bKt=o,this.AKt=h}};r();var s$=class{get ct(){return this.SKt}get TKt(){return this.kKt}get cYt(){return this.lYt}set cYt(t){this.lYt=t}set _Kt(t){this.EKt=t}get _Kt(){return this.EKt}get xKt(){return this.RKt}set xKt(t){this.RKt=t}get IKt(){return this.TYt}get sd(){return this.yYt}set sd(t){this.yYt=t}get bYt(){return this.AYt}get jqt(){return this.Qqt}kYt(){this.TYt=!0}get CKt(){return this.PKt}set CKt(t){this.PKt=t}get DKt(){return this.NKt}constructor(t,e,i,s,n,r,o,h){this.SKt=t,this.kKt=e,this.lYt=i,this.EKt=s,this.RKt=n,this.TYt=!1,this.AYt=r,this.Qqt=o,this.NKt=h}};function re(t,e){return o$(t)&&t.getAttribute(e)||void 0}function n$(t,e){return r$(t,e,void 0,!1)}function r$(t,e,i,s){return e===(t.localName?t.localName:t.nodeName)&&(s&&i?i===t.namespaceURI:!i||!t.namespaceURI||i===t.namespaceURI)}function fs(t,e){const i=[];for(let s=0;s<t.childNodes.length;s+=1){const n=t.childNodes.item(s);o$(n)&&n$(n,e)&&i.push(n)}return i}function o$(t){return t&&1===t.nodeType}function h$(t,e){const i=(new DOMParser).parseFromString(t,e);if(!i||i.getElementsByTagName("parsererror").length>0)throw new g('Invalid document for MIME type "'+e+'"');return i}function a$(t){return t.replace(/[<>&'"]/g,(t=>{switch(t){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case"'":return"&apos;";case'"':return"&quot;";default:return t}}))}function u$(t){return"data:application/xml,"+encodeURIComponent(t)}r(),r();var sc=function(t){return t.MKt="mute",t.LKt="unmute",t.zy="pause",t.BKt="resume",t.OKt="rewind",t.FKt="skip",t.VKt="playerExpand",t.WKt="playerCollapse",t.UKt="fullscreen",t.GKt="exitFullscreen",t.HKt="expand",t.COLLAPSE="collapse",t.fTt="start",t.ZKt="firstQuartile",t.XKt="thirdQuartile",t.zKt="midpoint",t.qKt="complete",t.YKt="acceptInvitationLinear",t.KKt="acceptInvitation",t.jKt="timeSpentViewing",t.QKt="otherAdInteraction",t.qy="progress",t.JKt="creativeView",t.$Kt="adExpand",t.tjt="adCollapse",t.ejt="minimize",t.ijt="close",t.sjt="closeLinear",t.njt="overlayViewDuration",t.rjt="breakStart",t.ojt="breakEnd",t.fa="error",t}({});function c$(t){switch(t){case"breakStart":case"breakEnd":case"error":return!0;default:return!1}}var l$=["mute","unmute","pause","resume","rewind","skip","closeLinear","close","playerExpand","playerCollapse","fullscreen","exitFullscreen","expand","collapse","creativeView","start","firstQuartile","midpoint","thirdQuartile","complete","acceptInvitationLinear","acceptInvitation","timeSpentViewing","otherAdInteraction","progress"];function d$(t){return void 0!==t&&-1!==l$.indexOf(t)}var f$=["start","firstQuartile","midpoint","thirdQuartile","complete","mute","unmute","pause","resume","rewind","skip","playerExpand","playerCollapse","expand","collapse","fullscreen","exitFullscreen","creativeView","acceptInvitation","adExpand","adCollapse","minimize","close","overlayViewDuration","otherAdInteraction","progress"];function _$(t){return void 0!==t&&-1!==f$.indexOf(t)}var v$=["mute","unmute","pause","resume","rewind","skip","playerExpand","playerCollapse","creativeView"];function m$(t){return void 0!==t&&-1!==v$.indexOf(t)}function g$(t,e){if(void 0===t||""===t||void 0===e)return;let i=t.match(/^(\d+):(\d+):(\d+)$/);return i?C(i[1]||"0")+60*C(i[2]||"0")+C(i[3]||"0"):(i=t.match(/^(100|[1-9]\d|\d)%$/),i?C(i[1]||"0")*e/100:void 0)}var p$=class{get WX(){return this.hjt}get nc(){return this.ajt}get eventURL(){return this.ujt}constructor(t,e,i){this.hjt=t,this.ajt=e,this.ujt=i}};r();var w$=class{get cjt(){return this.ljt}constructor(t){this.ljt=t}},y$=class extends w${get QYt(){return this.JYt}get KYt(){return this.jYt}get djt(){return this.fjt}constructor(t,e,i,s){super(t),this.fjt=e,this.JYt=i,this.jYt=s}},b$=class extends w${constructor(t){super(t)}},A$=class extends w${constructor(t){super(t)}};r();var S$={_jt:{Gb:100,wb:"XML parsing error."},vjt:{Gb:303,wb:"Empty or invalid VAST error."},mjt:{Gb:400,wb:"General linear error"},gjt:{Gb:403,wb:"Unsupported MIME-type or missing mediafiles error"},pjt:{Gb:500,wb:"General nonlinear error"},_X:{Gb:900,wb:"Network error"}},T$=class{get wjt(){return this.yjt}bjt(t){if(!this.wjt)return;const e=this.wjt.replace(/\[ERRORCODE]/,""+t.Gb);Ir(e)}constructor(t){this.yjt=t}};r();var Wr=class extends ri{get Ajt(){return this.Sjt}get Tjt(){var t;return null!=(t=this.kjt)?t:900}constructor(t,e,i,s){super(i||e&&k$[e]||t,s),this.Sjt=t,this.kjt=e,this.v3=i}},Oo=function(t){return t.ADBLOCK="adblock",t.NETWORK="network",t.PARSING="parsing",t.PLAYBACK="playback",t.GENERAL="general",t}({}),Ls=function(t){return t[t.VAST_MALFORMED_RESPONSE=100]="VAST_MALFORMED_RESPONSE",t[t.VAST_SCHEMA_VALIDATION_ERROR=101]="VAST_SCHEMA_VALIDATION_ERROR",t[t.VAST_UNSUPPORTED_VERSION=102]="VAST_UNSUPPORTED_VERSION",t[t.VAST_TRAFFICKING_ERROR=200]="VAST_TRAFFICKING_ERROR",t[t.VAST_UNEXPECTED_LINEARITY=201]="VAST_UNEXPECTED_LINEARITY",t[t.VAST_UNEXPECTED_DURATION_ERROR=202]="VAST_UNEXPECTED_DURATION_ERROR",t[t.UNEXPECTED_SIZE=203]="UNEXPECTED_SIZE",t[t.VAST_WRAPPER_ERROR=300]="VAST_WRAPPER_ERROR",t[t.VAST_LOAD_TIMEOUT=301]="VAST_LOAD_TIMEOUT",t[t.VAST_TOO_MANY_REDIRECTS=302]="VAST_TOO_MANY_REDIRECTS",t[t.VAST_NO_ADS_AFTER_WRAPPER=303]="VAST_NO_ADS_AFTER_WRAPPER",t[t.GENERAL_LINEAR_ERROR=400]="GENERAL_LINEAR_ERROR",t[t.FILE_NOT_FOUND=401]="FILE_NOT_FOUND",t[t.VAST_MEDIA_LOAD_TIMEOUT=402]="VAST_MEDIA_LOAD_TIMEOUT",t[t.VAST_LINEAR_ASSET_MISMATCH=403]="VAST_LINEAR_ASSET_MISMATCH",t[t.VAST_PROBLEM_DISPLAYING_MEDIA_FILE=405]="VAST_PROBLEM_DISPLAYING_MEDIA_FILE",t[t.MEZZANINE_FILE_REQUIRES=406]="MEZZANINE_FILE_REQUIRES",t[t.MEZZANINE_FILE_DOWNLOADED_FIRST_TIME=407]="MEZZANINE_FILE_DOWNLOADED_FIRST_TIME",t[t.AD_IN_VAST_REJECTED=408]="AD_IN_VAST_REJECTED",t[t.INTERACTIVE_CREATIVE_NOT_EXECUTED=409]="INTERACTIVE_CREATIVE_NOT_EXECUTED",t[t.VERIFICATION_CODE_NOT_EXECUTED=410]="VERIFICATION_CODE_NOT_EXECUTED",t[t.GENERAL_NON_LINEAR_ERROR=500]="GENERAL_NON_LINEAR_ERROR",t[t.NONLINEAR_DIMENSIONS_ERROR=501]="NONLINEAR_DIMENSIONS_ERROR",t[t.OVERLAY_AD_LOADING_FAILED=502]="OVERLAY_AD_LOADING_FAILED",t[t.VAST_NONLINEAR_ASSET_MISMATCH=503]="VAST_NONLINEAR_ASSET_MISMATCH",t[t.GENERAL_COMPANION_AD_ERROR=600]="GENERAL_COMPANION_AD_ERROR",t[t.INVALID_DIMENSIONS_COMPANION_AD=601]="INVALID_DIMENSIONS_COMPANION_AD",t[t.COMPANION_REQUIRED_ERROR=602]="COMPANION_REQUIRED_ERROR",t[t.COMPANION_AD_LOADING_FAILED=603]="COMPANION_AD_LOADING_FAILED",t[t.UNABLE_TO_FIND_SUPPORTED_COMPANION=604]="UNABLE_TO_FIND_SUPPORTED_COMPANION",t[t.UNKNOWN_ERROR=900]="UNKNOWN_ERROR",t[t.GENERAL_VPAID_ERROR=901]="GENERAL_VPAID_ERROR",t[t.MALFORMED_URI=1005]="MALFORMED_URI",t[t.VAST_ASSET_NOT_FOUND=1007]="VAST_ASSET_NOT_FOUND",t[t.VAST_EMPTY_RESPONSE=1009]="VAST_EMPTY_RESPONSE",t[t.UNKNOWN_AD_RESPONSE=1010]="UNKNOWN_AD_RESPONSE",t[t.UNSUPPORTED_LOCALE=1011]="UNSUPPORTED_LOCALE",t[t.INVALID_ARGUMENTS=1101]="INVALID_ARGUMENTS",t[t.INVALID_ADX_EXTENSION=1105]="INVALID_ADX_EXTENSION",t[t.AUTOPLAY_DISALLOWED=1205]="AUTOPLAY_DISALLOWED",t}({}),k$={100:"XML parsing error.",101:"VAST schema validation error.",102:"VAST version of response not supported.",200:"Trafficking error. The video player received an ad type that it was not expecting and/or cannot display.",201:"Video player expecting different linearity.",202:"Video player expecting different duration.",203:"Video player expecting different size.",300:"General wrapper error.",301:"Timeout of VAST URI provided in wrapper element, or of VAST URI provided in a subsequent wrapper element. This includes request errors such as invalid URI, unreachable or request timeout for URI, and security or other exceptions related to requesting a VAST URI.",302:"Wrapper limit reached, as defined by the video player. Too many wrapper responses have been received with no InLine response. This can be caused by a circular loop of daisy chaining (one network bouncing to another and another).",303:"No ads VAST response after one or more wrappers. This also includes the number of empty VAST responses from fallback.",400:"General linear error. The video player is unable to display the linear ad.",401:"File not found. Unable to find Linear/MediaFile from URI.",402:"Unable to download or timeout of MediaFile URI.",403:"Could not find a media file that is supported by this video player, based on the attributes of the MediaFile element.",405:"Problem displaying a media file.",406:"A mezzanine file was required, but not provided.",407:"The mezzanine file was downloaded for the first time, so the ad did not serve. This can occur when an ad insertion is missed because the creative is being transcoded. It continues to occur until the creative is available for insertion.",408:"The ad returned in the VAST response was rejected.",409:"The interactive creative defined in the InteractiveCreativeFile node was not executed.",410:"The code referenced in the Verification node was not executed.",500:"General NonLinearAds error.",501:"Unable to display non-linear ad because creative dimensions do not align with creative display area (in other words, the creative dimension was too large). This can occur if you use CSS styles to set width and height of the video ,content element. You should instead use the width and height HTML attributes.",502:"Unable to fetch NonLinearAds/NonLinear resource.",503:"Could not find NonLinearResource with supported type. This can occur when a creative size is larger than the player size.",600:"General CompanionAds error.",601:"Unable to display companion because creative dimensions do not fit within the companion display area (in other words, space was not available).",602:"Unable to display required companion.",603:"Unable to fetch CompanionAds/Companion resource.",604:"Could not find Companion resource with supported type.",900:"VAST 2 error. Even if you request VAST 3 or your DFP network default is VAST 3, this can occur if you have a VAST redirect that returns a VAST 2 response.",901:"General VPAID error",1005:"URI malformed."};function E$(t){if(!t)return!1;switch(t.toLocaleLowerCase()){case Bc.YC:case Bc.KC:case Bc.qC:return!0;default:return!1}}function x$(t){const e=Gd();return!!(E$(t)||t&&e&&(null==e?void 0:e.canPlayType)&&e.canPlayType(t))||(I$("Invalid or unsupported MediaFile Content delivery type, skipping mediafile"),!1)}function R$(t,e){for(const i of e){new T$(i).bjt(t)}}function I$(t){0}r(),r();var C$=class{get Ejt(){return this.xjt}get Rjt(){return this.Ijt}constructor(t,e){this.xjt=t,this.Ijt=e}},P$=class t{async Cjt(e,i){if(pt(e.sources,e.timeOffset)){const s=await t.Pjt(e.sources.src,i),n=s&&s.documentElement;if(!n)throw new Wr(Oo.NETWORK,Ls.VAST_SCHEMA_VALIDATION_ERROR,"Ad source is not a valid XML document.");if(n$(n,"VMAP"))return await this.Djt(n,e,i);if(n$(n,"VAST")){const t=await this.Njt(n,i,!1);if(t){const i=new M$("",!0,!0,t);return[new kc("start",i,D$.Mjt,"",[],!1,!0,e)]}return[]}throw new Wr(Oo.GENERAL,Ls.VAST_MALFORMED_RESPONSE,"Only VMAP and VAST files are allowed as ad source.")}if(ZJ(e.sources,e.timeOffset))return[new N$(String(e.timeOffset),e,i)];throw new Wr(Oo.GENERAL,Ls.VAST_MALFORMED_RESPONSE,"Something went wrong parsing the ad source; only VMAP and VAST files are allowed as ad source.")}async Ljt(e,i,s,n){let r;void 0===n&&(n=[]);try{r=await t.Pjt(e,i)}catch(t){throw R$(t instanceof Wr&&t.Tjt===Ls.VAST_MALFORMED_RESPONSE?S$.vjt:S$._X,n),t}const o=r&&r.documentElement;if(o&&n$(o,"VAST"))return await this.Njt(o,i,s,n);o&&n$(o,"VMAP")&&vl("Received VMAP ad when expecting VAST. Please set the type of your ad source in the configuration, or make sure to not set a timeOffset for VMAP ad sources. VMAP ads have their own offsets included.")}async Bjt(t,e,i,s){var n;if(!(null==(n=t.sources)?void 0:n.src))throw new Wr(Oo.GENERAL,Ls.MALFORMED_URI,"Property src on adSource is missing.");const r=await this.Ljt(t.sources.src,s,!1),o=new M$("",!0,!0,r),h=new kc(e,o,D$.Mjt,"",[],!1,!0,t);return h.Ojt=i,h}static async requestSuccessOnly(t,e){let i;try{i=await e.Qk(t)}catch(t){throw new Wr(Oo.NETWORK,Ls.UNKNOWN_ERROR,"Something went wrong while requesting xml from server.",t)}if(!ph(i))throw new Wr(Oo.NETWORK,Ls.UNKNOWN_ERROR,"Something went wrong while requesting xml from server.");return i}static async Pjt(t,e){const i=new wt({Xu:t,jk:Rr.Tk,AE:xe.GET}),s=await this.requestSuccessOnly(i,e);try{return function(t){return h$(t,"text/xml")}(await s.Kk())}catch(t){throw new Wr(Oo.NETWORK,Ls.VAST_MALFORMED_RESPONSE,"The ad source could not be loaded.")}}async Njt(t,e,i,s){void 0===s&&(s=[]);const n=[],r=[],o=[];if(!t||!n$(t,"VAST")){if(R$(S$.vjt,s),i)throw new Wr(Oo.PARSING,Ls.VAST_NO_ADS_AFTER_WRAPPER,"No VAST element found after wrapper.");throw new Wr(Oo.PARSING,Ls.VAST_EMPTY_RESPONSE,"The VAST element was empty.")}if(0!==fs(t,"Ad").length){for(const i of fs(t,"Ad"))try{const t=await this.Fjt(i,e,s);0===t.sL?n.push(t):r.push(t)}catch(t){o.push(t)}if(0===n.length&&0===r.length&&o.length>0)throw o[0];if(1===n.length&&0===r.length)return n[0];if(0===n.length&&0!==r.length)return new zJ(r);if(n.length>0||r.length>0)return new zJ(r.concat(n))}if(0!==fs(t,"Error").length)for(const e of fs(t,"Error")){I$(S$.vjt.wb);const t=e.textContent;t&&s.push(t.trim())}if(R$(S$.vjt,s),i)throw new Wr(Oo.PARSING,Ls.VAST_NO_ADS_AFTER_WRAPPER,"No VAST element found after wrapper.");throw new Wr(Oo.PARSING,Ls.VAST_EMPTY_RESPONSE,"The VAST element was empty.")}async Djt(t,e,i){const s=[],n=fs(t,"AdBreak");for(const t of n)try{const n=await this.Vjt(t,e,i);n&&s.push(n)}catch(t){Ms.Fp(t)}return s}async Fjt(e,i,s){const n=re(e,"id")||"";let r=Tc(re(e,"sequence"));r||(r=0);const o=fs(e,"InLine"),h=fs(e,"Wrapper");if(0!==h.length)return await this.Wjt(h[0],n,r,i,s);if(0!==o.length)return t.Ujt(o[0],n,r,s);throw new Wr(Oo.PARSING,Ls.VAST_SCHEMA_VALIDATION_ERROR,"An Ad tag without a Wrapper or inline element cannot be parsed")}static Ujt(e,i,s,n){const r=fs(e,"Error")[0];let o;r&&r.textContent&&(o=r.textContent,n.push(o));const h=fs(e,"AdSystem")[0];let a,u="";h&&(u=h.textContent||u);const c=fs(e,"AdTitle")[0];c&&(a=c.textContent||void 0);const l=[];for(const t of fs(e,"Impression"))t.textContent&&l.push(t.textContent);const d=t.Gjt(fs(e,"Creatives")[0],u,n);return new YJ(i,s,u,a,l,d,new T$(o))}async Wjt(e,i,s,n,r){const o=fs(e,"Error")[0];let h="";o&&o.textContent&&(h=o.textContent,r.push(h));const a=fs(e,"AdSystem")[0];let u="";a&&(u=a.textContent||u);const c=[];for(const t of fs(e,"Impression"))t.textContent&&c.push(t.textContent);const l=fs(e,"VASTAdTagURI")[0];let d="";l&&l.textContent&&(d=l.textContent);const f=await this.Ljt(d,n,!0,r),_=fs(e,"Creatives")[0];let v=[];_&&(v=t.Hjt(_,u,r));let m=$e(re(e,"followAdditionalWrappers"));m||(m=!0);let g=$e(re(e,"allowMultipleAds"));g||(g=!0);let p=$e(re(e,"fallbackOnNoAd"));return p||(p=!1),new e$(i,s,c,f,m,v,g,p,new T$(h))}static Hjt(e,i,s){const n=[];for(const r of fs(e,"Creative")){let e=re(r,"id");e||(e="");let o=Tc(re(r,"sequence"));o||(o=0);let h=re(r,"adId");h||(h="");const a=fs(r,"Linear")[0];let u;a&&(u=t.Zjt(a,"wrapper",e,i,s));const c=fs(r,"NonLinearAds")[0];let l,d;if(c)try{d=t.Xjt(c,e,i),l=d}catch(t){}const f=fs(r,"CompanionAds")[0];let _;f&&(_=t.zjt(f)),n.push(new i$(e,h,o,"",u,l,_,[]))}return n}static Gjt(e,i,s){const n=[];for(const r of fs(e,"Creative")){let e=re(r,"id");e||(e="");let o=Tc(re(r,"sequence"));o||(o=0);let h=re(r,"adId");h||(h="");let a=re(r,"apiFramework");a||(a="");const u=fs(r,"Linear")[0];let c;if(u)try{c=t.Zjt(u,"inline",e,i,s)}catch(t){}if(0===(null==c?void 0:c.ct))throw new Wr(Oo.PARSING,Ls.VAST_UNEXPECTED_DURATION_ERROR,"The VAST response had a duration of 0 seconds, so skipping the ad(s).");const l=fs(r,"NonLinearAds")[0];let d,f;if(l)try{f=t.Xjt(l,e,i),d=f}catch(t){}const _=fs(r,"CompanionAds")[0];let v;_&&(v=t.zjt(_));const m=fs(r,"UniversalAdId"),g=t.parseUniversalAdIds(m);n.push(new i$(e,h,o,a,c,d,v,g))}return n}static Zjt(e,i,s,n,r){const o=fs(e,"Duration")[0];let h=0;if(o)h=GJ(o.textContent)||0;else if(!o&&"inline"===i)throw new Wr(Oo.PARSING,Ls.VAST_SCHEMA_VALIDATION_ERROR,"Missing duration element in inLine linear");const a=re(e,"skipoffset");let u=-1;if(a){let t=GJ(a);if(void 0===t&&a.indexOf("%")>-1){const e=_.abs(Number(a.replace(/(?![0-9])./g,"")))/100;S(e)||(t=h*e)}void 0!==t&&(u=t)}const c=fs(e,"MediaFiles")[0];let l=[],d=[];if(c&&(l=function(t,e){const i=[];for(const s of fs(t,"MediaFile")){const t=re(s,"delivery"),n=re(s,"type");if(!n){I$();continue}if(!e(n))continue;let r=Tc(re(s,"width")),o=Tc(re(s,"height"));r||(I$(),r=0),o||(I$(),o=0);const h={delivery:t,type:n,width:r,height:o,contentURL:""+s.textContent};i.push(h)}return i}(c,x$),d=function(t){const e=fs(t,"ClosedCaptionFiles");if(0===e.length)return[];const i=e[0],s=[];for(const t of fs(i,"ClosedCaptionFile")){const e=re(t,"type");e||I$();const i=re(t,"language");i||I$();const n={type:null!=e?e:"",language:null!=i?i:"",contentURL:(""+t.textContent).trim()};s.push(n)}return s}(c)),"inline"===i&&(!c||0===l.length))throw R$(S$.gjt,r),new Wr(Oo.PARSING,Ls.VAST_LINEAR_ASSET_MISMATCH,"Missing MediaFiles in linear element");const f=fs(e,"TrackingEvents")[0];let v=[];f&&(v=t.qjt(f,d$,"linear"));const m=fs(e,"VideoClicks")[0],g=t.Yjt(m);return new s$(h,l,v,g,u,s,n,d)}static Yjt(e){if(!e)return new Pr("","",[],[]);const i=fs(e,"ClickThrough")[0];let s,n="";i&&(s=i.textContent||void 0,n=re(i,"id")||"");const r=t.Kjt(fs(e,"ClickTracking")),o=t.Kjt(fs(e,"CustomClick"));return new Pr(s,n,r,o)}static Kjt(t){const e=[];for(const i of t){const t=i.textContent;if(!t)continue;const s=re(i,"id")||"";e.push(new t$(s,t))}return e}static qjt(t,e,i){const s=[];for(const n of fs(t,"Tracking")){const r=re(n,"event");if(!e(r)){I$();continue}let o="";"linear"===i&&(o=re(t,"offset")||"0");const h=n.textContent;h&&s.push(new p$(r,o,h))}return s}static Xjt(e,i,s){const n=[];for(const r of fs(e,"NonLinear")){const e=fs(r,"NonLinearClickThrough")[0];let o;e&&(o=e.textContent||void 0);const h=t.Kjt(fs(r,"NonLinearClickTracking")),a=fs(r,"StaticResource")[0];let u;if(a&&a.parentNode){const t=re(a,"creativeType"),e=a.textContent||"",i=fs(a.parentNode,"NonLinearClickThrough")[0];let s="";i&&(s=i.textContent||""),u=new y$(e,t,s,"")}const c=t.jjt(r),l=t.parseHtmlResource(r);if(!u&&!c&&!l){I$();continue}const d=new Pr(o,"",h,[]);n.push(new jJ(u,c,l,d,i,s))}if(0===n.length)throw new Wr(Oo.PARSING,Ls.VAST_SCHEMA_VALIDATION_ERROR,"nonLinearAds element found with no nonLinear elements");const r=fs(e,"TrackingEvents")[0];let o=[];return r&&(o=t.qjt(r,_$,"nonlinear")),new KJ(n,o)}static parseUniversalAdIds(t){const e=[];for(const r of t){var i;const t=null!=(i=re(r,"idRegistry"))?i:"";var s,n;const o=null!=(n=null!=(s=re(r,"idValue"))?s:r.textContent)?n:"";e.push(new C$(t,o))}return e}static zjt(e){let i=re(e,"requiredType");(function(t){switch(t){case"all":case"any":case"none":return!0;default:return!1}})(i)||(i=QJ.$H);const s=[];for(const i of fs(e,"Companion")){let e=Tc(re(i,"width")),n=Tc(re(i,"height")),r=re(i,"id"),o=Tc(re(i,"assetWidth")),h=Tc(re(i,"assetHeight")),a=Tc(re(i,"expandedWidth")),u=Tc(re(i,"rxpandedHeight")),c=re(i,"apiFramework"),l=re(i,"adSlotId"),d=Tc(re(i,"pxratio"));const f=fs(i,"AltText")[0];let _=f?f.textContent:"";e||(I$(),e=0),n||(I$(),n=0),r||(r=""),o||(o=0),h||(h=0),a||(a=0),u||(u=0),c||(c=""),l||(l=""),d||(d=1),_||(_="");const v=t.Qjt(i),m=t.jjt(i),g=t.parseHtmlResource(i),p=fs(i,"TrackingEvents")[0];let w=[];p&&(w=t.qjt(p,m$,"companion"));const y=fs(i,"CompanionClickThrough")[0];let b;y&&(b=y.textContent||void 0);const A=t.Kjt(fs(i,"CompanionClickTracking"));(v||m||g)&&s.push(new $J(e,n,r,o,h,a,u,c,l,d,v,m,g,new Pr(b,"",A,[]),w,_))}return new JJ(i,s)}static Qjt(t){const e=fs(t,"StaticResource")[0];let i;if(e&&e.parentNode){let t=re(e,"creativeType");t||(t="");const s=e.textContent,n=fs(e.parentNode,"AltText")[0],r=fs(e.parentNode,"CompanionClickThrough")[0];let o,h="";n&&(h=n.textContent||""),r&&(o=r.textContent||void 0),s&&(i=new y$(s,t,o,h))}return i}static jjt(t){const e=fs(t,"IFrameResource")[0];let i;if(e){const t=e.textContent||"";i=new b$(t)}return i}static parseHtmlResource(t){const e=fs(t,"HTMLResource")[0];let i;if(e){const t=e.textContent||"";i=new A$(t)}return i}async Vjt(e,i,s){const n=re(e,"timeOffset")||"0",r=re(e,"breakType")||D$.iE;let o=re(e,"breakId"),h=$e(re(e,"repeatAfter"));if(void 0===o&&(o=""),void 0===h&&(h=!1),!(void 0!==ja.Jjt(n)))throw new Wr(Oo.PARSING,Ls.VAST_SCHEMA_VALIDATION_ERROR,"Invalid TimeOffset type");const a=fs(e,"AdSource")[0],u=fs(e,"TrackingEvents")[0];let c=[];u&&(c=t.qjt(u,c$,"vmap"));let l=re(a,"id");l||(l="");let d=$e(re(a,"allowMultipleAds"));void 0===d&&(d=!0);let f=$e(re(a,"followRedirects"));f||(f=!0);const _=fs(a,"AdTagURI")[0];let v="";const m=fs(a,"VASTAdData")[0];if(!_||!_.textContent){if(m){if(m.firstElementChild&&r$(m.firstElementChild,"VAST")){const t=await this.Njt(m.firstElementChild,s,!1);if(t){const e=new M$(l,d,f,t);return new kc(n,e,r,o,c,h,!1,i)}return}throw new Wr(Oo.PARSING,Ls.VAST_SCHEMA_VALIDATION_ERROR,"vmap:VASTAdData does not have a VAST-structure as a child element")}throw new Wr(Oo.PARSING,Ls.VAST_SCHEMA_VALIDATION_ERROR,"Invalid AdTagURI source or invalid VASTAdData in Adbreak Element")}try{v=_.textContent;const t=tu(i);return t.sources.src=v,new N$(n,t,s)}catch(t){return}}},D$=function(t){return t.iE="",t.Mjt="linear",t.$jt="nonlinear",t.tQt="display",t}({}),ja=class{static eQt(t){switch(t){case"linear":case"nonlinear":case"display":return!0;default:return!1}}static iQt(t){}static sQt(t){if(void 0!==t)return"start"===t?0:"end"===t?-1:void 0}static nQt(t){const e=t.split(":");let i=0;return i+=3600*Number(e[0]),i+=60*Number(e[1]),i+=Number(e[2]),i}static rQt(t){if(t<=0)return"00:00:00.000";const e=_.floor(t),i=t-e;return this.oQt(e/3600,2)+":"+this.oQt(e/60%60,2)+":"+this.oQt(e%60,2)+"."+this.oQt(1e3*i,3)}static oQt(t,e){return("00"+_.floor(t)).slice(-e)}static hQt(t,e){const i=this.Jjt(t);if(0===i)switch(t){case"start":return 0;case"end":return-1}else{if(2===i)return HJ(t)*e;if(1===i)return GJ(t);if(3===i)return this.sQt(t);if(4===i){const e=Number(t);if(!S(e)&&e>=-1)return e}}}static Jjt(t){return"start"===t||"end"===t?0:void 0!==GJ(t.toString())?1:void 0!==HJ(t.toString())?2:void 0!==this.iQt(t.toString())?3:S(Number(t))?void 0:4}},kc=class{get aQt(){return this.uQt.integration}get cQt(){return this.lQt}get eOt(){return this.dQt}get xKt(){return this.RKt}set xKt(t){this.RKt=t}get cYt(){return this.YYt}get fQt(){return this._Qt}get vQt(){return this.mQt}get wnt(){return this.uQt}get gQt(){return this.Ojt.od}get W(){return!0}$n(){return Promise.resolve()}get Ojt(){return this.pQt}set Ojt(t){this.pQt=t}constructor(t,e,i,s,n,r,o,h){this.RKt=-1,this.lQt=e,this.dQt=t,this.wQt=i,this._Qt=s,this.mQt=r,this.YYt=n,this.yQt=o,this.uQt=h}},N$=class{get aQt(){return this.yYt.aQt}get cQt(){return this.yYt.cQt}get eOt(){return this.yYt.eOt}get xKt(){return this.yYt.xKt}set xKt(t){this.yYt.xKt=t}get cYt(){return this.yYt.cYt}get fQt(){return this.yYt.fQt}get vQt(){return this.yYt.vQt}get wnt(){return this.yYt.wnt}get gQt(){return this.yYt.gQt}get W(){return this.YE}$n(){var t;return null!=(t=this.bQt)?t:this.bQt=this.QE()}async QE(){const t=new P$;this.yYt=await t.Bjt(this.wnt,this.eOt,this.Ojt,this.fW),this.YE=!0}get Ojt(){return this.yYt.Ojt}set Ojt(t){this.yYt.Ojt=t}constructor(t,e,i){this.YE=!1,this.fW=i,this.yYt=new kc(t,void 0,"","",[],!1,!1,e)}},M$=class{get o(){return this.zS}get uKt(){return this.AQt}get SQt(){return this.TQt}get Uqt(){return this.kQt}constructor(t,e,i,s){this.zS=t,this.AQt=e,this.kQt=s,this.TQt=i}};function L$(t,e){let i;if(t.vastAdsRequest&&(i=function(t){if(t.adTagUrl)return t.adTagUrl;if(t.adsResponse)return u$(t.adsResponse);return}(t.vastAdsRequest)),!i){const e=function(t){const e=t.contentUrl||t.contentId;if(!e)return;const i=t.contentType||"video/mp4",s=PT(i)||zh(t.contentType)?"streaming":"progressive",n=void 0!==t.duration?"<Duration>"+ja.rQt(t.duration)+"</Duration>":"",r=void 0!==t.whenSkippable&&t.whenSkippable>=0?' skipoffset="'+ja.rQt(t.whenSkippable)+'"':"",o='<MediaFile delivery="'+s+'" type="'+i+'">'+a$(e)+"</MediaFile>",h=t.clickThroughUrl?"<VideoClicks><ClickThrough>"+a$(t.clickThroughUrl)+"</ClickThrough></VideoClicks>":"",a="<Linear"+r+">"+n+"<MediaFiles>"+o+"</MediaFiles>"+h+"</Linear>",u=t.title?"<AdTitle>"+a$(t.title)+"</AdTitle>":"";return'<VAST version="3.0"><Ad>'+u+"<InLine><Creatives><Creative>"+a+"</Creative></Creatives></InLine></Ad></VAST>"}(t);e&&(i=u$(e))}const s=t.customData;if(i){const n={integration:null==s?void 0:s.integration,sources:{src:i,type:"vast"},timeOffset:e};return n.integration&&"csai"!==n.integration&&"theo"!==n.integration||(n.skipOffset=t.whenSkippable),n}}var Pt=function(t){return t.EQt="error",t.xQt="sourceupdate",t}({}),B$=class extends pe{constructor(t){super("error"),this.lt=t}},O$=class extends pe{constructor(t,e){super("sourceupdate"),this.bt=t,this.Cc=e}},F$=class extends Co{get AN(){return this.RQt}IQt(t){this.CQt.IQt(t)}PQt(t){this.CQt.PQt(t)}DQt(t){this.CQt.DQt(t)}NQt(t){this.CQt.NQt(t)}MQt(t){this.RQt.addUpdateListener(t)}LQt(t){this.RQt.removeUpdateListener(t)}BQt(){const t=new os,e=new chrome.cast.media.GetStatusRequest;return this.RQt.getStatus(e,(()=>{t.Vb({bt:this.kR(),Cc:this.iu()})}),(e=>t.Wb(e))),t.Ub}kR(){var t;return null==(t=this.RQt.customData)?void 0:t.currentSource}iu(){var t;let e;if(null==(t=this.YNt.OQt())?void 0:t.version){var i;e=null==(i=this.RQt.customData)?void 0:i.sourceDescription}else{var s;const t=null==(s=OJ(this.RQt))?void 0:s.customData;(function(t){return V(t)&&t.theoplayer_version>=1&&Bo(t.streamStart)&&Bo(t.isLive)&&Bo(t.sourceDescription)})(t)&&(e=t.sourceDescription),e||(e=function(t){return{sources:[{src:t.contentId,type:t.contentType}],ads:V$(t)}}(this.RQt.media))}return e}EI(){const t=new chrome.cast.media.PauseRequest;this.RQt.pause(t,Tt,this.FQt)}RI(){const t=new chrome.cast.media.StopRequest;this.RQt.stop(t,Tt,this.FQt)}xI(){const t=new chrome.cast.media.PlayRequest;this.RQt.play(t,Tt,this.FQt)}Rb(t,e){const i=new chrome.cast.media.SeekRequest;return i.currentTime=t,i.resumeState=e?chrome.cast.media.ResumeState.PLAYBACK_PAUSE:chrome.cast.media.ResumeState.PLAYBACK_START,new Promise(((t,e)=>{this.RQt.seek(i,t,(t=>{var i;e(new Xi(BJ(t.code),null!=(i=t.description)?i:void 0))}))}))}$R(t){this.CQt.hit(FJ,function(t){return{type:VJ.Wqt,properties:{playbackRate:t}}}(t)).catch(this.VQt)}WQt(t){const e=new chrome.cast.media.EditTracksInfoRequest(t);this.RQt.editTracksInfo(e,Tt,this.FQt)}UQt(){return this.RQt.getEstimatedTime()}GQt(){return this.RQt.getEstimatedBreakClipTime()}HQt(){return this.RQt.getEstimatedBreakTime()}ZQt(){this.CQt.hit("urn:x-cast:com.google.cast.media",{type:WJ.SKIP_AD,requestId:this.XQt++,mediaSessionId:this.RQt.mediaSessionId}).catch(this.VQt)}yn(){this.Ro()}constructor(t,e,i){super(e),this.XQt=0,this.VQt=t=>{this._o(new B$(t))},this.FQt=t=>{var e;const i=new Xi(BJ(t.code),null!=(e=t.description)?e:void 0);this.VQt(i)},this.YNt=t,this.CQt=e,this.RQt=i}};function V$(t){return t.vmapAdsRequest&&t.vmapAdsRequest.adTagUrl?[{sources:{src:t.vmapAdsRequest.adTagUrl,type:"vmap"}}]:t.breaks&&t.breakClips?on(t.breaks,(e=>function(t,e){const i=[];if(t.isWatched)return i;for(const s of t.breakClipIds){const n=Fo(e,(t=>t.id===s));if(n){const e=L$(n,t.position);e&&i.push(e)}}return i}(e,t.breakClips))):[]}r();var W$=class{zQt(t,e){this.YNt.addMessageListener(t,e)}qQt(t,e){this.YNt.removeMessageListener(t,e)}hit(t,e){return new Promise(((i,s)=>{this.YNt.sendMessage(t,e,i,(t=>{var e;s(new Xi(BJ(t.code),null!=(e=t.description)?e:void 0))}))}))}yn(){}constructor(t){this.YNt=t}};function U$(t){return"vmap"===t||"adrule"===t}function G$(t){if(t)return Yt(t)&&""!==t?{src:hs(t),type:void 0}:function(t){return V(t)&&Boolean(t.src)}(t)&&""!==t.src?{src:hs(t.src),type:H$(t.type)}:void 0}function H$(t){if(Yt(t)){const e=t.toLowerCase();switch(e){case"vast":case"vmap":case"adrule":return e;default:return void vl("The ad source type provided in the configuration could not be recognized: '"+t+"'.")}}else t||vl("For better performance it is highly recommended to add the type to the configuration of your ad sources.")}function Ic(t){if(void 0!==t&&""!==t&&("string"==typeof t||"number"==typeof t)){switch(t){case"start":case"00:00:00":case"00:00:00.000":case"0%":case"0":return 0;case"end":case"100%":return-1}if("string"==typeof t){if(function(t){return UJ.test(t)}(t))return ja.nQt(t);if(Z$(t))return t}return Number(t)>=0?Number(t):void 0}}function Z$(t){return new RegExp(/^\d{1,2}%$/).test(t)}function X$(t){const e=[],i=(t,s)=>{if($c(s))for(let e=0,n=s.length;e<n;e++){const n=V(s[e])&&s[e]?String(e):"";i(t+"["+encodeURIComponent(n)+"]",s[e])}else if(V(s))for(const e of w.keys(s))i(t+"["+encodeURIComponent(e)+"]",s[e]);else((t,i)=>{e.push(t+"="+encodeURIComponent(null!=i?i:""))})(t,String(s))};for(const e of w.keys(t))i(encodeURIComponent(e),t[e]);return e.join("&")}r(),r(),r();var z$=function(t){return t.Fqt="receiver_info",t._Bt="event",t.YQt="propertychange",t.Vqt="trackevent",t}({}),q$=class{KQt(t){let e;try{e=JSON.parse(t)}catch(t){0}return e}IQt(t){this.jQt.push(t)}PQt(t){we(this.jQt,t)}DQt(t){this.QQt.push(t)}NQt(t){we(this.QQt,t)}JQt(t){this.$Qt=t}hit(t,e){return this.tJt.hit(t,e)}yn(){this.tJt.qQt(FJ,this.eJt),En(this.QQt),En(this.jQt),this.$Qt=void 0}constructor(t){this.jQt=[],this.QQt=[],this.eJt=(t,e)=>{const i=this.KQt(e);if(i)if(i.type===z$.YQt)for(const t of this.jQt)for(const e of w.keys(i.properties))t(e,i.properties[e]);else if(i.type===z$._Bt)for(const t of this.QQt)t(i.event);else i.type===z$.Vqt&&this.$Qt&&i.event.trackState&&this.$Qt(i.event.trackId,i.event.trackState.targetQualityIds)},this.tJt=t,this.tJt.zQt(FJ,this.eJt)}};r(),r();var Qu=function(t){return t.iJt="medialoadedchange",t.ub="volumechange",t.EQt="casterror",t.sJt="playererror",t.nJt="targetqualitychanged",t.rJt="receiverinfochanged",t}({}),Y$=class extends pe{constructor(){super("medialoadedchange")}},K$=class extends pe{constructor(t,e){super("volumechange"),this.gI=t,this.ZR=e}},j$=class extends pe{constructor(t){super("casterror"),this.lt=t}},Q$=class extends pe{constructor(t){super("playererror"),this.lt=t}},J$=class extends pe{constructor(t,e){super("targetqualitychanged"),this.EN=t,this.oJt=e}},$$=class extends pe{constructor(){super("receiverinfochanged")}},t0=class extends Co{hJt(t,e,i){this.CQt.hit(FJ,function(t,e,i){return{type:VJ.Vqt,trackID:t,trackType:e,properties:{targetQuality:i}}}(t,e,i)).catch(this.VQt)}aJt(){this.tJt.zQt(FJ,this.uJt),this.CQt.hit(FJ,{type:VJ.Fqt}).catch(Tt)}OQt(){return this.cJt}lJt(){return this.YNt.getSessionObj()}dJt(t){!this.fJt&&t&&t.idleReason!==chrome.cast.media.IdleReason.FINISHED&&(this.fJt=new F$(this,this.CQt,t),this._Jt(),this._o(new Y$),this.fJt.MQt(this.vJt))}mJt(){return this.fJt}async gJt(t){const e=function(t){const e=function(t,e,i,s){const[n,r]=function(t){for(const i of t.sources)if(Cn(i)){const t=i.src;if(t){var e;const s=null!=(e=i.type)?e:vu(t);if(e0(s))return[t,s]}}var i,s;return[null!=(i=bC(t))?i:"",null!=(s=wC(t))?s:""]}(t),o=new chrome.cast.media.MediaInfo(n,r);return o.metadata=LJ(t.metadata,t.poster),o.streamType=s,function(t,e,i){const s=[],n=[];let r,o=0,h=0;for(const t of e){const e=G$(t.sources);if(e)if(pt(e,t.timeOffset))r=new chrome.cast.media.VastAdsRequest,r.adTagUrl=e.src;else if(ZJ(e,t.timeOffset)){var a;const r=null!=(a=t.timeOffset)?a:0,c=t.skipOffset;var u;const l=null!=(u=ja.hQt(r,i))?u:0,d=void 0!==c?ja.hQt(c,i):void 0,f=new chrome.cast.media.BreakClip("bc"+h++);f.vastAdsRequest=new chrome.cast.media.VastAdsRequest,f.vastAdsRequest.adTagUrl=e.src,f.whenSkippable=d,f.customData={integration:t.integration};let _=Fo(n,(t=>t.position===l));void 0===_&&(_=new chrome.cast.media.Break("b"+o++,[],l),n.push(_)),_.breakClipIds.push(f.id),s.push(f)}else 0;else 0}t.breakClips=s,t.breaks=n,t.vmapAdsRequest=r}(o,e,i),o}(t.pJt,t.zc,t.ct,t.a0),i=new chrome.cast.media.LoadRequest(e);return i.autoplay=!0,i.currentTime=t.ER,i.customData=t.wJt,i}(t);let i;try{i=await this.YNt.loadMedia(e)}catch(t){i=t}if(i)throw new Xi(BJ(i))}zR(t){this.lJt().setReceiverMuted(t,Tt,this.yJt)}wI(t){this.lJt().setReceiverVolumeLevel(t,Tt,this.yJt)}bJt(){return this.lJt().receiver.friendlyName}yn(){this.Ro(),this.YNt.removeEventListener(cast.framework.SessionEventType.MEDIA_SESSION,this.AJt),this.lJt().removeUpdateListener(this._Jt),this.tJt.qQt(FJ,this.uJt),this.CQt.yn(),this.tJt.yn()}constructor(t){super(),this.cJt=void 0,this.VQt=t=>{this._o(new j$(t))},this.SJt=(t,e)=>{"error"===t&&this._o(new Q$(e))},this.TJt=(t,e)=>{this._o(new J$(t,e))},this.uJt=(t,e)=>{const i=JSON.parse(e);i.type===z$.Fqt&&(this.cJt=i.info,this._o(new $$))},this._Jt=()=>{const t=this.lJt(),{level:e,muted:i}=t.receiver.volume;this._o(new K$(null!=e?e:void 0,null!=i?i:void 0))},this.AJt=()=>this.dJt(this.YNt.getMediaSession()),this.vJt=t=>{var e;t||(null==(e=this.fJt)||e.LQt(this.vJt),this.fJt=void 0,this._o(new Y$))},this.yJt=t=>{var e;const i=new Xi(BJ(t.code),null!=(e=t.description)?e:void 0);this.VQt(i)},this.YNt=t,this.YNt.addEventListener(cast.framework.SessionEventType.MEDIA_SESSION,this.AJt),this.tJt=new W$(t.getSessionObj()),this.CQt=new q$(this.tJt),this.CQt.IQt(this.SJt),this.CQt.JQt(this.TJt),this.lJt().addUpdateListener(this._Jt),this._Jt(),this.aJt();const e=this.YNt.getMediaSession();e&&this.dJt(e)}};function e0(t){switch(t){case Bc.YC:case Bc.qC:case Bc.KC:case Bc.jC:return!0}return!1}var i0=function(t){return t.kJt="statechange",t}({}),s0=class extends pe{constructor(t){super("statechange"),this.Vft=t}};r(),r(),r(),r();var n0=class extends Co{Lst(){return this.Oc}yR(){return se.pB()}xR(){return this.uZ+this.EJt}Tst(){return this.xR()}AR(){}jd(){return this.MA}DR(){return this.B4}NR(){}jR(){return this.dZ}xJt(){}JR(){return this.fZ}$R(t){this.fZ!==t&&(this.fZ=t,this._o(new ju(this.na.ER,t)))}oI(){return Ht.eO}eI(){return se.pB()}aI(){return se.pB()}cI(){return!1}mR(){return this.cO}_I(){return this.dO}lI(){return this.Hl}WQt(t){}mI(){return this.RJt}fI(){return this.IJt}xI(){this.dZ=!1}EI(){this.dZ=!0}Rb(t){this.uZ=t-this.EJt}CJt(){return this.EJt}PJt(t){this.EJt=t}hnt(t){this.Oc.hnt(t)}RI(){}yn(){this.Ro(),this.cO.yn(),this.dO.yn(),this.Hl.yn(),this.Oc.yn()}constructor(t,e,i,s,n,r,o,h,a){super(),this.na=t,this.EJt=0,this.cO=new Ke,this.dO=new Ke,this.Hl=new Wo,this.Oc=new Re,this.EJt=e,this.uZ=i-e,this.MA=s,this.B4=n,this.dZ=r,this.fZ=o,this.RJt=h,this.IJt=a}};r(),r(),r(),r();var Eo=function(t){return t.DJt="ccmodechangerequest",t.NJt="cctargetqualitychangerequest",t.MJt="cctrackchangerequest",t}({}),r0=class extends pe{constructor(t,e,i){super(Eo.DJt),this.track=t,this.trackId=e,this.mode=i}};r();var o0=function(t){return t.Tk="TEXT",t.vE="AUDIO",t.mE="VIDEO",t}({}),h0=function(t){return t.JV="SUBTITLES",t.$V="CAPTIONS",t.tW="DESCRIPTIONS",t.Jn="CHAPTERS",t.eW="METADATA",t}({});function a0(t){return"AUDIO"===t.type}function u0(t){return"VIDEO"===t.type}function c0(t){return"TEXT"===t.type}var l0=class extends Co{get wa(){return this.eu||(this.eu=Qh(this)),this.eu}get Ch(){return this.CO}set Ch(t){t!==this.CO&&(this.CO=t,this._o(new Zs(this)))}get q(){return this.t5}get L(){return this.e5}get CE(){return this.Xo}set CE(t){const e=qa(t);this.Xo!==e&&(this.Xo=e,this.LJt!==e&&this._o(new r0(this,this.IC,e)),this._o(new bc(this)))}get BJt(){return this.LJt}set BJt(t){const e=qa(t),i=this.Xo!==e;this.Xo=e,this.LJt=e,i&&this._o(new bc(this))}i5(t){return Fo(this.e5.lC,(e=>e.o===t))}OC(t){this.CE=t}OJt(t){}yn(){}nr(){}constructor(t){super(),this.eu=void 0;const e=t.customData;this.IC=Number(t.trackId)||0,this.o=""+(e&&e.id||this.IC),this.CO=e&&e.label||t.name||"",this.gs=e&&e.language||t.language||"",this.BC=e&&e.inBandMetadataTrackDispatchType||"",this.Lt=e&&e.kind||function(t){switch(t){case h0.JV:return Li.JV;case h0.$V:return Li.$V;case h0.tW:return Li.tW;case h0.Jn:return Li.Jn;case h0.eW:return Li.eW}return}(t.subtype)||"subtitles",this.rI=Zu.NONE,this.Tw=e&&void 0!==e.type?function(t){return CT(t)?t:Lr.DEFAULT}(e.type):Lr.WEBVTT,this.J4=[],this.e5=new EM(this.J4),this.a5=[],this.t5=new EM(this.a5),this.Xo=qa(e&&e.mode||bh.Mh),this.LJt=this.Xo}};r(),r();var d0=class extends pe{constructor(t,e){super(Eo.MJt),this.trackId=t,this.enabled=e}};r();var f0=class extends pe{constructor(t,e){super(Eo.NJt),this.track=t,this.targetQuality=e}};r();var _0=function(t){return t.vE="audio",t.mE="video",t.Tk="text",t}({}),v0=class extends Co{get RC(){return this.Ldt}get MC(){return this.Ndt}set MC(t){this.FJt(t),this._o(new f0(this,t))}get NC(){return this.TO}get Ch(){return this.CO}set Ch(t){t!==this.CO&&(this.CO=t,this._o(new Zs(this)))}get Rt(){return this.qe}set Rt(t){this.qe!==t&&(this.qe=t,this.VJt!==t&&this._o(new d0(this.IC,t)),this._o(new bc(this)))}get WJt(){return this.VJt}set WJt(t){const e=this.qe!==t;this.qe=t,this.VJt=t,e&&this._o(new bc(this))}get wa(){return this.eu||(this.eu=yi(this)),this.eu}get CE(){return this.Rt?"enabled":"disabled"}DO(t){this.Rt=t}OJt(t){if(t.targetQualityIds){const e=[];for(const i of this.TO.lC)t.targetQualityIds.indexOf(i.o)>-1&&e.push(i);const i=e.length?e:void 0;this.FJt(i)}}FJt(t){(function(t,e){return!t&&e||t&&!e||t&&e&&!qm(t,e)})(this.Ndt,t)&&(this.Ndt=t&&this.TO.EO(t)?t:void 0,this._o(new WW(this.Ndt,this)))}unload(){for(const t of this.TO.lC)t.vn("update",this.CLt);this.TO.nr()}constructor(t){super(),this.Ldt=void 0,this.TO=new gl,this.Ndt=void 0,this.eu=void 0,this.CLt=()=>this._o(new Zs(this));const e=t.customData;if(this.IC=Number(t.trackId)||0,this.o=""+(e&&e.id||this.IC),this.CO=e&&e.label||t.name||"",this.gs=e&&e.language||t.language||"",this.Lt=e&&e.kind||"main",this.qe=e&&e.enabled,this.VJt=this.qe,a0(t)){this.m3=_0.vE;const e=t.customData&&t.customData.qualities;if(e)for(const t of e){const e=new _H(t.id,t.bandwidth,t.codecs,t.name,"",t.audioSamplingRate);e.bn("update",this.CLt),this.TO.kO(e)}}else{this.m3=_0.mE;const e=t.customData&&t.customData.qualities;if(e)for(const t of e){const e=new fH(t.id,t.bandwidth,t.codecs,t.name,"",t.frameRate,t.width,t.height);e.bn("update",this.CLt),this.TO.kO(e)}}}};r();var m0=function(t){return t.UJt="legacy",t.GJt="caf",t}({});r(),r(),r(),r();var g0=class{Bc(){if(this.HJt>=this.Oc.length)return;const t=this.Oc[this.HJt];return this.HJt+=1,t}lt(){return this.Bc()}constructor(t){this.HJt=0,this.Oc=t}};function p0(t){var e,i,s;return null!=(s=null==(i=t.cQt)||null==(e=i.Uqt)?void 0:e.Gqt())?s:[]}var w0=class{},y0=class{int(){var t;return null!=(t=this.eu)?t:this.eu=function(t){return{get ads(){return t.zc.map((t=>t.int()))},get integration(){return t.aQt},get maxDuration(){return t.ZJt},get maxRemainingDuration(){return t.XJt},get timeOffset(){return t.eOt},get customData(){return t.wJt}}}(this)}constructor(){this.eu=void 0}},b0=class{get zJt(){return this.qJt}get t(){return this.na}constructor(t,e){this.qJt=t,this.na=e}},A0=class extends y0{get Ojt(){return this.pQt}get zc(){const t=[];for(const s of this.pQt.YJt)for(const n of p0(s)){var e,i;const r=null!=(i=null==(e=n.rYt)?void 0:e.CYt)?i:[];if(n.sYt&&t.push(this.KJt(n.sYt,r,n.hYt,s.wnt)),n.oYt)for(const e of n.oYt.aYt)t.push(this.jJt(e,r,n.oYt,n.hYt,s.wnt))}return t}KJt(t,e,i,s){const n=Fo(this.QJt,(e=>e.sYt===t));if(void 0!==n)return n;const r=new E0(t,e,this,this.JJt,i,s);return this.QJt.push(r),r}jJt(t,e,i,s,n){const r=Fo(this.$Jt,(e=>e.oYt===t));if(void 0!==r)return r;const o=new k0(t,e,i,this,this.JJt,s,n);return this.$Jt.push(o),o}get aQt(){return lu.CSAI}get eOt(){const t=this.pQt.od;return t>=0?t:this.JJt.t.jd()}get XJt(){let t=0;for(const e of this.pQt.YJt)for(const i of p0(e))i.sYt&&!i.sYt.IKt&&(t+=i.sYt.ct);return this.JJt&&this.JJt.zJt&&(t+=this.JJt.zJt.ct-this.JJt.zJt.ER),t}get ZJt(){let t=0;for(const e of this.pQt.YJt)for(const i of p0(e))i.sYt&&(t+=i.sYt.ct);return t}get wJt(){}constructor(t,e){super(),this.QJt=[],this.$Jt=[],this.pQt=t,this.JJt=e}},S0={height:0,width:0,clickThrough:"",contentHTML:"",resourceURI:"",altText:""},T0=class extends w0{get sd(){return this.yYt}get wnt(){return this.uQt}get hYt(){return this.AKt}t$t(){return this.e$t}i$t(){this.e$t=!0}s$t(t){return ol({},S0,{resourceURI:t.cjt||""})}n$t(t){return ol({},S0,{contentHTML:t.cjt.trim(),type:"HTMLResource"})}r$t(t){var e,i;return ol({},S0,{clickThrough:(null==(e=t.QYt)?void 0:e.trim())||"",resourceURI:(null==(i=t.cjt)?void 0:i.trim())||"",altText:t.KYt||"",type:"StaticResource"})}o$t(t,e,i){if(!t||!e)return;const s="<img "+(i?"title='"+i+"' ":"")+"src='"+encodeURI(t)+"'>";return"<a href='"+encodeURI(e)+"' target='_blank' rel='noopener'>"+s+"</a>"}rYt(t){return t?t.map((t=>{let e;const i={adSlotId:t.GYt||"",height:t.Ti||0,width:t.ji||0};if(t.dYt){var s;const i=this.r$t(t.dYt),n=i.clickThrough||(null==(s=t.zYt)?void 0:s.QYt);e=ol({},i,{contentHTML:this.o$t(i.resourceURI,n,i.altText)||""})}else if(t.mYt)e=this.n$t(t.mYt);else{if(!t._Yt)return;e=this.s$t(t._Yt)}return Jr(e,i)})).filter((t=>void 0!==t)):[]}h$t(){return this.a$t.jqt}constructor(t,e,i,s,n,r){super(),this.e$t=!1,this.a$t=t,this.PYt=e,this.yYt=i,this.JJt=s,this.AKt=n,this.uQt=r}},k0=class extends T0{get oYt(){return this.a$t}get nYt(){return this.u$t}ka(){const t=this.yYt,e={companions:this.rYt(this.PYt),type:"nonlinear",id:this.a$t.bYt,skipOffset:this.xKt,integration:this.uQt.integration,adSystem:this.a$t.jqt,get adBreak(){return t.int()},creativeId:this.a$t.bYt,universalAdIds:this.AKt.map((t=>({adIdRegistry:t.Ejt,adIdValue:t.Rjt})))};return this.a$t._Yt?Jr(this.s$t(this.a$t._Yt),e):this.a$t.mYt?Jr(this.n$t(this.a$t.mYt),e):this.a$t.dYt?Jr(this.r$t(this.a$t.dYt),e):e}int(){var t;return null!=(t=this.eu)?t:this.eu=this.ka()}c$t(){var t,e;return null!=(e=null==(t=this.a$t.dYt)?void 0:t.cjt)?e:""}l$t(){var t,e,i;return null!=(i=null==(e=this.a$t)||null==(t=e.dYt)?void 0:t.djt)?i:""}get xKt(){const t=this.a$t.sd;return t&&t.wnt&&void 0!==t.wnt.skipOffset?ja.hQt(t.wnt.skipOffset,this.JJt.zJt.ct):(null==(e=this.a$t.sd)?void 0:e.xKt)||-1;var e}constructor(t,e,i,s,n,r,o){super(t,e,s,n,r,o),this.u$t=i}},E0=class extends T0{get sYt(){return this.a$t}ka(){var t;const e=this.yYt,i=this.a$t;return{companions:this.rYt(this.PYt),duration:i.ct,id:i.bYt,mediaFiles:i.TKt,get mediaUrl(){return i.CKt},skipOffset:this.xKt,type:"linear",integration:this.uQt.integration,adSystem:i.jqt,width:void 0,height:void 0,get adBreak(){return e.int()},clickThrough:null==(t=i._Kt)?void 0:t.QYt,creativeId:i.bYt,universalAdIds:this.AKt.map((t=>({adIdRegistry:t.Ejt,adIdValue:t.Rjt}))),closedCaptionFiles:i.DKt}}int(){var t;return null!=(t=this.eu)?t:this.eu=this.ka()}c$t(){return this.a$t.TKt.length>0?this.a$t.TKt[0].contentURL:""}l$t(){return this.a$t.TKt.length>0?this.a$t.TKt[0].type:""}get xKt(){const t=this.a$t.sd;return t&&t.wnt&&void 0!==t.wnt.skipOffset?ja.hQt(t.wnt.skipOffset,this.JJt.zJt.ct):this.a$t.xKt||-1}constructor(t,e,i,s,n,r){super(t,e,i,s,n,r)}};function x0(t){return t instanceof E0}r();var vt=function(t){return t.d$t="csai",t.f$t="google-ima",t.Kh="google-dai",t._$t="freewheel",t.v$t="mediatailor",t.Cv="chromecast",t.Hst="theoads",t}({});r();var R0=class extends Da{ka(){return new I0(this.lnt.int())}constructor(t){super("m$t",t)}},I0=class extends Ka{constructor(t){super("updatead",t)}};r();var C0=class extends Da{ka(){return new P0(this.lnt.int())}constructor(t){super("g$t",t)}},P0=class extends Ka{constructor(t){super("adloaded",t)}},D0=class extends sn{get Vc(){return void 0!==this.p$t}get ent(){return this.a$t?[this.a$t]:[]}get snt(){var t;return null!=(t=this.p$t)?t:null}get nnt(){return on(this.w$t,(t=>{const e=t.zc;if(t===this.p$t&&void 0!==this.a$t){const t=e.indexOf(this.a$t);if(t>=0)return e.slice(t+1)}return t.y$t()?[]:e}))}get rnt(){return this.w$t.filter((t=>t===this.p$t||!t.y$t()))}get wa(){var t;return null!=(t=this.eu)?t:this.eu=SF(this)}g6(t,e,i){throw new b("Scheduling ads while casting is not supported.")}MD(){this.RQt.ZQt()}ant(t){var e;null==(e=this.b$t)||e.ant(t)}ont(t,e){var i;null==(i=this.b$t)||i.ont(t,e)}A$t(t){return Fo(this.w$t,(e=>e.o===t))}S$t(t,e,i,s){const n=this.w$t,r=[];let o=!1;for(const n of t){let t=this.A$t(n.id);void 0===t&&(t=new N0(n),s.push(new EF(t))),!Bo(t.T$t)&&Bo(i)&&(t.T$t=this.k$t(t.E$t,i));const h=t.zc;t.ir(n,e,i,s);const a=t.zc;for(const t of a)ms(h,t)||(s.push(new Uu(t)),o=!0);r.push(t)}this.w$t=r,o&&s.push(new Ue);for(const t of n)ms(r,t)||s.push(new Au(t))}x$t(t,e){const i=this.p$t,s=this.a$t;let n,r;if(t){var o;const{breakId:e,breakClipId:i}=t;n=e?this.A$t(e):void 0,r=i?null==(o=this.p$t)?void 0:o.R$t(i):void 0}if(this.p$t=n,this.a$t=r,n!==i&&(void 0!==i&&(i.I$t=void 0,e.push(new Hh(i))),void 0!==n&&(n.I$t=this.RQt,e.push(new Ua(n)))),r!==s){const t=this.na.xR();void 0!==s&&e.push(new xn(s,t)),void 0!==r&&e.push(new cn(r,t))}}k$t(t,e){if(!e||!e.breaks)return;const i=Fo(e.breaks,(e=>e.id===t.id));return i}hnt(t){const e=[];for(const t of this.w$t){let i=t.zc;if(t===this.p$t&&void 0!==this.a$t){const t=i.indexOf(this.a$t);t>=0&&(i=i.slice(t))}else if(t.y$t())continue;for(const t of i){const i=t.C$t();i&&e.push(i)}}for(const i of e)t.g6(i,Ca.$st,!1)}yn(){return this.Ro(),this.RQt.LQt(this.ih),void 0!==this.p$t&&(this.p$t.I$t=void 0,this.p$t=void 0),this.a$t=void 0,En(this.w$t),Promise.resolve(void 0)}constructor(t,e,i){super(),this.w$t=[],this.p$t=void 0,this.a$t=void 0,this.eu=void 0,this.ih=t=>{var e;if(!t)return;const i=this.RQt.AN,{breakStatus:s}=i,{breakClips:n,breaks:r}=i.media,o=null==(e=OJ(i))?void 0:e.media,h=[];r&&n&&this.S$t(r,n,o,h),this.x$t(s,h);for(const t of h)this._o(t)},this.na=t,this.RQt=e,this.b$t=i,this.RQt.MQt(this.ih)}},N0=class extends y0{get E$t(){return this.P$t}get o(){return this.P$t.id}get zc(){return this.Oc}get aQt(){return vt.Cv}get ZJt(){let t=this.P$t.duration;return void 0===t&&this.Oc.length>0&&(t=Kn(this.Oc,(t=>t.ct)),S(t)&&(t=void 0)),t}get XJt(){const t=this.ZJt;if(void 0!==t&&void 0!==this.I$t){const e=this.I$t.HQt();if(void 0!==e)return _.max(0,t-e)}return t}get eOt(){return this.P$t.position}get wJt(){}y$t(){return this.P$t.isWatched}R$t(t){return Fo(this.Oc,(e=>e.o===t))}ir(t,e,i,s){const n=[];for(let r=0;r<t.breakClipIds.length;r++){const o=t.breakClipIds[r],h=Fo(e,(t=>t.id===o));if(void 0===h)continue;const a=r<this.Oc.length?this.Oc[r]:new M0(h,this);!Bo(a.D$t)&&Bo(i)&&(a.D$t=this.N$t(i,o,r)),a.ir(h,s),n.push(a)}this.P$t=t,this.Oc=n}N$t(t,e,i){if(!t||!t.breakClips)return;let s=Fo(t.breakClips,(t=>t.id===e));if(!s){var n;const e=null==(n=this.T$t)?void 0:n.breakClipIds[i];e&&(s=Fo(t.breakClips,(t=>t.id===e)))}return s}constructor(t){super(),this.T$t=void 0,this.Oc=[],this.I$t=void 0,this.P$t=t}},M0=class{get M$t(){return this.L$t}get o(){return this.L$t.id}get CYt(){return[]}get ct(){var t;return null!=(t=this.L$t.duration)?t:NaN}get TKt(){const t=this.c$t();return t?[{contentURL:t,delivery:"progressive",type:this.l$t(),width:0,height:0}]:[]}get CKt(){return this.c$t()}get xKt(){const{whenSkippable:t}=this.L$t;return void 0===t?void 0:t<0?-1:t}get QYt(){return this.L$t.clickThroughUrl}get bYt(){}get hYt(){return[]}get wJt(){}h$t(){return""}l$t(){var t;return null!=(t=this.L$t.contentType)?t:""}c$t(){var t,e;return null!=(e=null!=(t=this.L$t.contentUrl)?t:this.L$t.contentId)?e:""}ir(t,e){const i=this.o,s=this.ct,n=this.L$t.contentUrl;this.L$t=t;const r=this.o,o=this.ct,h=this.L$t.contentUrl;i===r&&(s===o||S(s)&&S(o))&&n===h||e.push(new R0(this)),S(s)&&!S(o)&&e.push(new C0(this))}C$t(){let t;return this.D$t&&(t=L$(this.D$t,this.sd.eOt)),t||(t=L$(this.L$t,this.sd.eOt)),t}int(){var t;return null!=(t=this.eu)?t:this.eu=this.ka()}ka(){const t=this;return{get companions(){return t.CYt},get duration(){return t.ct},get id(){return t.o},get mediaFiles(){return t.TKt},get mediaUrl(){return t.CKt},get closedCaptionFiles(){return[]},get skipOffset(){return t.xKt},type:"linear",integration:vt.Cv,get adSystem(){return t.h$t()},width:void 0,height:void 0,get adBreak(){return t.sd.int()},get resourceURI(){return t.c$t()},get clickThrough(){return t.QYt},get creativeId(){return t.bYt},get customData(){return t.wJt},get isSlate(){return!1},get universalAdIds(){return t.hYt.map((t=>({adIdRegistry:t.Ejt,adIdValue:t.Rjt})))}}}constructor(t,e){this.eu=void 0,this.L$t=t,this.sd=e}};r();var L0=class extends Co{get B$t(){return this.O$t}set B$t(t){this.O$t!==t&&(this.O$t=t,this.Vs.href=null!=t?t:"",t?this.hW():this.aW())}hW(){if(this.qe)return;this.qe=!0,this.Vs.style.display="",this.F$t||(this.sx.style.cursor="pointer");const t=this.F$t?this.Vs:this.sx;Ms.Ys.Qe?(t.addEventListener("touchstart",this.V$t),t.addEventListener("touchend",this.W$t)):(t.addEventListener("mousedown",this.V$t),t.addEventListener("click",this.W$t))}aW(){if(!this.qe)return;this.qe=!1,this.Vs.style.display="none",this.F$t||(this.sx.style.cursor="");const t=this.F$t?this.Vs:this.sx;Ms.Ys.Qe?(t.removeEventListener("touchstart",this.V$t),t.removeEventListener("touchend",this.W$t)):(t.removeEventListener("mousedown",this.V$t),t.removeEventListener("click",this.W$t))}Xw(){this.Ro(),this.aW(),this.sx.removeChild(this.Vs)}constructor(t,e=Ms.Ys.Qe){super(),this.qe=!1,this.V$t=t=>{t.stopPropagation(),this._o(new pe("clickstart"))},this.W$t=t=>{t.stopPropagation(),this._o(new pe("click"))},this.sx=t,this.F$t=e,this.Vs=h.createElement("a"),this.Vs.style.position="absolute",this.Vs.style.zIndex="11",this.Vs.target="zu",this.F$t?(wu(this.Vs,"learn more"),this.Vs.className="theoplayer-ad-overlay-component theoplayer-ad-touch-clickthrough",this.Vs.setAttribute("rel","noopener")):Zo(this.Vs),this.sx.appendChild(this.Vs),this.aW()}};r(),r();var B0=[1200,992,768,576],O0={1200:"theo-size-xl",992:"theo-size-l",768:"theo-size-m",576:"theo-size-s"},F0=class{U$t(t){let e=V0(t);e!==this.G$t&&(ce(this.Vs,e),Id(this.Vs,this.G$t),this.G$t=e)}yn(){this.Ku.vn(nu.mn,this.gn)}constructor(t,e){this.Vs=t,this.Ku=e,this.gn=t=>{this.U$t(t.width)},this.G$t=V0(e.Au),ce(this.Vs,this.G$t),e.bn(nu.mn,this.gn)}};function V0(t){for(let e of B0)if(t>e)return O0[e];return"theo-size-xs"}var W0=class extends Co{get we(){return this.Vs}get CE(){return this.Xo}get Ck(){return this.nd.textContent||""}set Ck(t){wu(this.nd,t)}H$t(t){"countdown"!==this.Xo&&(this.Xo="countdown",this.Z$t(),this.we.classList.remove("theoplayer-ad-skip-button"),this.we.classList.add("theoplayer-ad-skip-countdown")),this.Ck="You can skip in "+_.round(t)+" seconds"}X$t(){"skip"!==this.Xo&&(this.Xo="skip",this.Ck="Skip Ad",this.z$t(),this.we.classList.remove("theoplayer-ad-skip-countdown"),this.we.classList.add("theoplayer-ad-skip-button"))}z$t(){this.we.addEventListener("mouseup",this.q$t),this.we.addEventListener("touchend",this.q$t)}Z$t(){this.we.removeEventListener("mouseup",this.q$t),this.we.removeEventListener("touchend",this.q$t)}yn(){this.Ro(),this.Z$t(),this.Yu.yn(),ze(this.Vs),ze(this.nd),this.Y$t&&ze(this.Y$t)}constructor(t,e){super(),this.q$t=()=>{this._o(new pe("MD"))},this.Vs=h.createElement("div"),this.we.className="theoplayer-ad-overlay-component theoplayer-ad-skip theoplayer-ad-skip-countdown",this.we.style.position="absolute",this.nd=h.createElement("span"),this.we.appendChild(this.nd),e&&(this.Y$t=h.createElement("div"),this.Y$t.className="theoplayer-ad-skip-poster",this.Y$t.style.backgroundImage='url("'+Cm(e)+'")',this.we.appendChild(this.Y$t)),this.Xo="countdown",this.Yu=new F0(this.we,t)}},U0=class extends Co{K$t(){const t=this.RQt.AN.activeTrackIds;if(t){if(this.j$t()){const e=this.dO.lC.map((t=>t.o)),i=this.cO.lC.map((t=>t.o));ms(e.concat(i),"0")&&t.push(0)}z0(t,this.cO),z0(t,this.dO),function(t,e){const i=!1;for(const i of e.lC)i.BJt=ms(t,i.IC)?bh.Qn:bh.Mh}(t,this.Hl)}}Q$t(){var t;const e=null==(t=this.RQt.AN.media)?void 0:t.tracks;if(!e)return;const i=e.filter(a0),s=e.filter(u0),n=e.filter(c0);if(this.j$t()&&0===s.length&&0!==this.mI()){const t=this.J$t();s.push(t)}if(this.j$t()&&0===i.length){const t=this.$$t();i.push(t)}Z0(this.cO,i.map((t=>t.trackId))),Z0(this.dO,s.map((t=>t.trackId))),Z0(this.Hl,n.map((t=>t.trackId))),X0(i,this.cO),X0(s,this.dO),function(t,e){let i=!1;for(const s of t){let t=H0(e,s.trackId);t||(t=new l0(s),e.tt(t),i=!0)}}(n,this.Hl)}t0t(){this.dZ||(this.e0t=p(this.pd,250))}i0t(){m(this.e0t)}s0t(){this.i0t(),this.t0t()}n0t(){var t;const e=this.RQt.AN,i=e.media;var s;const n=null!=(s=null==i?void 0:i.duration)?s:NaN,r=(null==i?void 0:i.streamType)===chrome.cast.media.StreamType.LIVE||n<0,o=r?1/0:n;this.MA=o,this.r0t();const h=e.getEstimatedLiveSeekableRange(),a=null==(t=e.customData)?void 0:t.buffers;if(Bo(h)){const{start:t,end:e,isMovingWindow:i=r,isLiveDone:s=!1}=h;this.HFt(t,e,i,s)}else if(Bo(a)){const[t,e]=a.seekable;this.HFt(t,e,r,!1)}else r?this.HFt(void 0,void 0,!0,!1):this.HFt(0,o,!1,!1)}o0t(){const t=this.RQt.AN,e=function(t){return void 0!==t&&t.playerState===chrome.cast.media.PlayerState.PAUSED}(t)||G0(t);this.h0t=e,this.dZ!==e&&(this.dZ=e,this.dZ?this._o(new ul(this.xR())):this._o(new $(this.xR())))}nh(){const{playbackRate:t}=this.RQt.AN;this.a0t!==t&&(this.a0t=void 0,this.fZ!==t&&(this.fZ=t,this._o(new ju(this.xR(),t))))}u0t(){const{playerState:t}=this.RQt.AN;let e;switch(t){case chrome.cast.media.PlayerState.IDLE:e=Ht.eO;break;case chrome.cast.media.PlayerState.BUFFERING:e=Ht.Xn;break;case chrome.cast.media.PlayerState.PAUSED:case chrome.cast.media.PlayerState.PLAYING:e=Ht.sO}this.V4(e),this.c0t()}HFt(t,e,i,s){Bo(t)&&Bo(e)?this.v4=new JN(t,e,i,i&&!s):this.v4=void 0}l0t(t,e){this.IJt=null!=e?e:this.IJt,this.RJt=null!=t?t:this.RJt,this._o(new P)}Ge(t){this.d0t!==t?(this.cZ=!0,this._o(new R(this.xR()))):this.d0t=void 0}SH(){if(!this.cZ)return;this.cZ=!1;const t=this.xR();this._o(new Al(t,this.AR())),this._o(new oa(t))}Ah(){this.B4=!0,this.DR()&&this._o(new Xs(this.xR()))}r0t(){const t=this.lxt,e=this.jd();t===e||S(t)&&S(e)||(this.lxt=e,this._o(new $s(e)))}f0t(){const t=this.xR();this.cZ||this._0t===t||(this._0t=t,this._o(new Al(t,this.AR())))}xJt(){this.dZ&&(this.dZ=!1,this._o(new $(this.xR())),this.V4(Ht.eO))}Lst(){return this.Oc}yR(){return this.Pxt.xb(this.EJt)}xR(){if(this.Oc.Vc){const t=this.RQt.GQt();if(void 0!==t)return t}return this.Tst()}Tst(){return void 0!==this.v0t?this.EJt+this.v0t:this.B4?this.jd():this.EJt+this.RQt.UQt()}AR(){if(this.m0t)return new Date(this.Tst()+this.m0t)}jd(){if(this.Oc.Vc){var t;const e=null==(t=this.Oc.ent[0])?void 0:t.ct;if(void 0!==e&&!S(e))return e}return this.EJt+this.MA}NR(){return this.YG}DR(){return!this.Oc.Vc&&this.B4}jR(){return this.dZ}JR(){return this.fZ}$R(t){this.fZ!==t&&(this.a0t=this.fZ,this.fZ=t,this._o(new ju(this.xR(),t)),this.RQt.$R(t))}oI(){return this.O4}eI(){return this.Oc.Vc?se.gB(0,this.xR()):this.Uo.xb(this.EJt)}aI(){var t,e;if(this.Oc.Vc)return se.pB();let i=null!=(e=null==(t=this.v4)?void 0:t.I3().xb(this.EJt))?e:se.pB();if(i.V>0){const t=i.Tn(i.V-1);i=i.tB(se.gB(t,this.xR()))}return i}cI(){return this.cZ}mR(){return this.cO}_I(){return this.dO}lI(){return this.Hl}J$t(){return{customData:{activeQuality:{averageBandwidth:0,bandwidth:0,codecs:"",frameRate:0,height:this.fI(),id:"0",name:"",width:this.mI()},enabled:!0,id:"0",kind:"main",label:"",language:"",qualities:[],uid:0},language:"",name:"",trackContentId:"",trackContentType:"",trackId:0,type:o0.mE}}$$t(){return{customData:{activeQuality:{averageBandwidth:0,bandwidth:0,codecs:"",id:"0",name:"",audioSamplingRate:0},qualities:[],enabled:!0,id:"0",kind:"main",label:"",language:"",uid:0},language:"",name:"",trackContentId:"",trackContentType:"",trackId:0,type:o0.vE}}j$t(){var t,e;return!(void 0!==(null==(t=this.YNt.OQt())?void 0:t.version))||(null==(e=this.YNt.OQt())?void 0:e.sdkType)===m0.GJt}WQt(t){this.j$t()&&we(t,0),this.RQt.WQt(t)}mI(){return this.RJt}fI(){return this.IJt}xI(){this.dZ&&(this.dZ=!1,this.h0t=!1,this._o(new $(this.xR()))),this.RQt.xI()}EI(){this.dZ||(this.dZ=!0,this.h0t=!0,this._o(new ul(this.xR()))),this.RQt.EI()}Rb(t){if(this.Oc.Vc)return;let e=_.max(0,t-this.EJt);e=_.round(1e6*e)/1e6;const i=this.v0t;this.v0t=e,this.h0t=this.jR(),this.d0t=e,this.cZ=!0,this._o(new R(this.xR())),void 0===i&&(this.j$t()?this.g0t(e):this.h8(e))}h8(t){this.RQt.Rb(t,this.h0t).then(this.p0t(t)).catch(this.VQt)}p0t(t){return()=>{void 0!==this.v0t&&(this.v0t===t?this.v0t=void 0:this.h8(this.v0t))}}V4(t){this.O4!==t&&(this.O4=t,this._o(new hu(this.xR(),t))),void 0===this.v0t&&this.cZ&&t>=Ht.iO&&this.SH(),this.c0t()}c0t(){if(this.dZ)return void(this.w0t=!1);const t=this.O4>=Ht.sO;this.w0t!==t&&(this.w0t=t,t?this._o(new ko(this.xR())):this._o(new za(this.xR())))}y0t(){this.b0t||(this.b0t=h.createElement("div"),this.na.we.appendChild(this.b0t),this.b0t.className="theoplayer-ad-linear theoplayer-chromecast-ad",this.b0t.style.zIndex="10",Zo(this.b0t)),this.b0t.style.display=this.Oc.Vc?"":"none"}A0t(){var t;const e=null==(t=this.Oc.ent[0])?void 0:t.QYt;e&&!this.S0t?(this.S0t=new L0(this.b0t,!0),this.S0t.B$t=e,this.S0t.bn("clickstart",this.T0t)):this.S0t&&(this.S0t.B$t=e)}k0t(){var t;const e=null==(t=this.Oc.ent[0])?void 0:t.xKt;if(void 0===e||e<0)return void(this.E0t&&(this.E0t.yn(),this.E0t=void 0));if(!this.E0t){var i;const t=null==(i=this.na.Ma)?void 0:i.mi;this.E0t=new W0(this.na.Hu,t),this.b0t.appendChild(this.E0t.we),this.E0t.bn("MD",this.x0t)}const s=this.RQt.GQt();void 0!==s&&(s<e?this.E0t.H$t(e-s):this.E0t.X$t())}CJt(){return this.EJt}PJt(t){this.EJt=t}hnt(t){}RI(){this.RQt.RI()}yn(){this.Ro(),this.Oc.yn(),this.S0t&&(this.S0t.Xw(),this.S0t=void 0),this.E0t&&(this.E0t.yn(),this.E0t=void 0),this.b0t&&(ze(this.b0t),this.b0t=void 0),this.RQt.NQt(this.F3),this.RQt.PQt(this.R0t),this.RQt.LQt(this.vJt),this.RQt.vn(Pt.EQt,this.I0t),this.RQt.yn()}constructor(t,e,i,s,n){super(),this.Pxt=se.pB(),this.m0t=void 0,this.B4=!1,this.YG=void 0,this.a0t=void 0,this.O4=Ht.eO,this.w0t=!1,this.Uo=se.pB(),this.v4=void 0,this.cZ=!1,this.cO=new Ke,this.dO=new Ke,this.Hl=new Wo,this.lxt=NaN,this.v0t=void 0,this.h0t=!1,this._0t=NaN,this.d0t=void 0,this.e0t=0,this.R0t=(t,e)=>{switch(t){case"buffered":this.Pxt=new se(e),this._o(new K(this.xR()));break;case"currentProgramDateTime":this.m0t=new Date(e).getTime()-this.xR();break;case"played":this.Uo=new se(e);break;case"seekable":this.n0t();break;case"videoHeight":this.l0t(void 0,e);break;case"videoWidth":this.l0t(e,void 0)}},this.F3=t=>{switch(t.type){case Ti.Jy:this.Ge(t.currentTime);break;case Ti.Qy:this.SH();break;case Ti.Ky:this._o(new iU(t.representation,t.previousRepresentation));break;case Ti.$y:this._o(new CW(t.segmentStartTime,t.error,t.trackType,t.track,t.quality,t.retryCount));break;case Ti.Py:this._o(new CZ(t.currentTime,t.initDataType,t.initData));break;case Ti.Ty:this._o(new $n(new sr(Qa.CONTENT_PROTECTION_ERROR,t.error,void 0,t.licenseAcquisitionURL,t.status,t.statusText,t.licenseAcquisitionMessage,t.systemCode)));break;case Ti.Ey:this._o(new ie)}},this.vJt=t=>{this.n0t(),this.o0t(),this.nh(),this.u0t(),this.f0t(),this.s0t(),this.Q$t(),this.K$t(),this.y0t(),this.A0t(),this.k0t(),t||G0(this.RQt.AN)&&this.Ah()},this.pd=()=>{this.f0t(),this.k0t()},this.I0t=t=>{this._o(t)},this.g0t=Vd((t=>this.h8(t)),50),this.VQt=t=>{this.v0t=void 0,this._o(new B$(t))},this.T0t=()=>{this.EI()},this.x0t=()=>{this.Oc.MD()},this.na=t,this.YNt=i,this.RQt=s,this.Oc=new D0(t,s,e.zc),this.EJt=n.CJt(),this.MA=n.jd()-this.EJt,this.dZ=n.jR(),this.fZ=n.JR(),this.RJt=n.mI(),this.IJt=n.fI(),this.RQt.DQt(this.F3),this.RQt.IQt(this.R0t),this.RQt.MQt(this.vJt),this.RQt.bn(Pt.EQt,this.I0t),this.RQt.BQt().then((t=>{this._o(new O$(t.bt,t.Cc))}),this.VQt)}};function G0(t){return void 0!==t&&t.playerState===chrome.cast.media.PlayerState.IDLE&&t.idleReason===chrome.cast.media.IdleReason.FINISHED}function H0(t,e){for(const i of t.lC)if(i.IC===e)return i}function Z0(t,e){let i=!1;for(let s=0;s<t.V;s++){const n=t.fC(s);-1===e.indexOf(n.IC)&&(t.it(n),s--,i=!0)}return i}function X0(t,e){let i=!1;for(const s of t){let t=H0(e,s.trackId);t||(t=new v0(s),e.tt(t),i=!0)}return i}function z0(t,e){for(const i of e.lC)i.WJt=ms(t,i.IC);return!1}r();var q0=class{Dnt(t){return Promise.resolve("all")}kI(){}yn(){}};r();function Y0(t,e,i){if(S(t))return i;if(t===1/0){if("live"===i||"dvr"===i)return i;if(e&&e.length>0){if(e.end(e.length-1)-e.start(0)>60)return"dvr"}return"live"}return"vod"}var K0=[Ti.Dy,Ti.Iy,Ti.Yy,Ti.jy,Ti.zy,Ti.ho,Ti.qy,Ti.hb,Ti.Jy,Ti.Qy,Zc.WL,Zc.UL,Ti.Ky,Ti.$y,Ti.Py,Ti.Ty,Ti.Ey],j0=class extends ic{aZ(t){if(!t)return;Ai(this.tZ&&qA(this.tZ),t&&qA(t))||(this.tZ=t,this._o(new tk(t)))}C0t(t){if(!t)return;const e=_c(t,this.na.kd);Ai(this.Sc&&qA(this.Sc),e&&qA(e))||(this.Fa.PJt(0),this.Sc=e,this._o(new gF(e)),this.Fa.xJt())}P0t(t){for(const e of this.rt.lC)if(e.IC===t)return e;for(const e of this.ht.lC)if(e.IC===t)return e}get Vft(){return this.Fa}set Vft(t){const e=this.Fa;e&&(e.vn(Pt.EQt,this.I0t),e.vn(Pt.xQt,this.D0t),e.vn(K0,this.Ds),e.vn(Zc.iC,this.FW),t.PJt(e.CJt()),e.hnt(t.Lst())),this.Fa=t,this.cO.vC=t.mR(),this.dO.vC=t._I(),this.Hl.vC=t.lI(),this.Oc.vC=t.Lst(),e&&e.yn(),t.bn(Pt.EQt,this.I0t),t.bn(Pt.xQt,this.D0t),t.bn(K0,this.Ds),t.bn(Zc.iC,this.FW)}get so(){return this.eo}get zc(){return this.Lst()}Lst(){return this.Oc}Bst(){return this.pst}mR(){return this.cO}yR(){return this.Fa.yR().ks()}get N0t(){return this.M0t||this.Sc}set N0t(t){this.M0t=t}async $n(t,e){var i;t&&await this.gJt(t,null!=(i=t.ads)?i:[],t.streamType,NaN,0,null!=e?e:0)}async L0t(t){var e;const i=null!=(e=this.M0t)?e:this.Sc;if(!i)return;var s;const n=this.M0t?null!=(s=this.M0t.ads)?s:[]:this.Tnt(),r=this.na.jd(),o=this.na.aI(),h=Y0(r,o,i.streamType),a=o.length>0?o.start(0):0,u=null!=t?t:this.Tst();await this.gJt(i,n,h,r,a,u)}Tnt(){const t=new Re;return this.Oc.hnt(t),t.Tnt()}AR(){return this.Fa.AR()}kR(){return this.tZ}get ER(){return this.xR()}set ER(t){this.RR(t)}xR(){return this.Fa.xR()}Tst(){return this.Fa.Tst()}RR(t,e){this.B0t||(this.YNt.mJt()||this.B0t||!this.Sc?this.Fa.Rb(t):this.$n(this.Sc,t))}jd(){return this.Fa.jd()}DR(){return this.Fa.DR()}NR(){return this.YG}LR(){return this.KG}FR(){return this.lO}HR(){return this.na.GR}XR(){return this.lZ}zR(t){this.lZ=t,this._o(new ns(this.ER,this.gI)),this.YNt.zR(t)}jR(){return this.Fa.jR()}JR(){return this.Fa.JR()}$R(t){this.Fa.$R(t)}eI(){return this.Fa.eI().ks()}sI(){return el.JB}nI(t){}oI(){return this.Fa.oI()}aI(){return this.Fa.aI().ks()}cI(){return this.Fa.cI()}iu(){return this.Sc}async Ca(t){this.Sc=t,await this.$n(t),this.M0t=void 0,this.Fa.xJt()}lI(){return this.Hl}fI(){return this.Fa.fI()}mI(){return this.Fa.mI()}_I(){return this.dO}pI(){return this.zA}wI(t){this.zA=t,this._o(new ns(this.ER,this.gI)),this.YNt.wI(t)}get AI(){return!1}set AI(t){}TI(){}SI(){return this.ea}kI(){}xI(){this.YNt.mJt()||this.B0t||!this.Sc?this.Fa.xI():this.$n(this.Sc)}EI(){this.Fa.EI()}pr(){this.eo=!0}dr(){this.tZ=void 0,this.eo=!1}ge(){}be(){}async gJt(t,e,i,s,n,r){this.B0t=!0,this.O0t(),this.Fa.PJt(n);const o="live"===i||"dvr"===i,h=function(t,e,i){return{theoplayer_version:1,streamStart:t,isLive:e,sourceDescription:i}}(n,o,t),a={pJt:t,zc:e,ER:_.max(0,r-n),ct:s,a0:o?chrome.cast.media.StreamType.LIVE:chrome.cast.media.StreamType.BUFFERED,wJt:h};try{await this.YNt.gJt(a)}catch(t){this.F0t(t)}finally{this.B0t=!1}}V0t(){this.W0t(this.cO),this.W0t(this.dO),this.U0t(this.Hl)}W0t(t){for(const e of t.lC)this.G0t(e);t.bn(Se.VI,(t=>{this.G0t(t.Ht),this.H0t()}))}U0t(t){for(const e of t.lC)this.Z0t(e);t.bn(Se.VI,(t=>{this.Z0t(t.Ht),this.H0t()}))}G0t(t){t.bn(Eo.NJt,this.Apt),t.bn(Eo.MJt,this.X0t),t.bn(Eo.MJt,this.K$t)}Z0t(t){t.bn(Eo.DJt,this.z0t),t.bn(Eo.DJt,this.K$t)}q0t(){const t=[];for(const e of this.rt.lC)e.Rt&&t.push(e.IC);for(const e of this.ht.lC)e.Rt&&t.push(e.IC);for(const e of this.nt.lC)e.CE===bh.Qn&&t.push(e.IC);this.Fa.WQt(t)}Y0t(t,e,i){this.K0t=t,this.j0t=e,this.Q0t=i}J0t(t){var e,i;if(!t)return!1;return(null!=(i=null==(e=this.YNt.OQt())?void 0:e.version)?i:-1)>=2?t.map((t=>t.o)):[t[0].o]}$0t(t){this.t1t=t}NI(){}MI(){}OI(t){throw new g("Can't add a track while casting.")}async RI(){this.Fa.RI(),this.O0t()}O0t(){this.RW=Ht.eO,this.bW=!1,this.kW=!1,this.YG=void 0,this.KG=void 0}async yn(){this.O0t(),this.Ro(),this.Vft=this.e1t(),this.YNt.vn(Qu.EQt,this.I0t),this.YNt.vn(Qu.sJt,this.gMt),this.YNt.vn(Qu.ub,this.i1t),this.YNt.vn(Qu.iJt,this.s1t),this.YNt.vn(Qu.nJt,this.n1t),this.YNt.yn()}e1t(){return new n0(this,this.Fa.CJt(),this.Fa.xR(),this.Fa.jd(),this.Fa.DR(),this.Fa.jR(),this.Fa.JR(),this.Fa.mI(),this.Fa.fI())}constructor(t,e){super(t,!0),this.eo=!1,this.t1t=Tt,this.RW=Ht.eO,this.bW=!1,this.kW=!1,this.B0t=!1,this.M0t=void 0,this.YG=void 0,this.KG=void 0,this.cO=new qo,this.dO=new qo,this.Hl=new at,this.ea=new N,this.lO=new rS,this.pst=new q0,this.K0t=void 0,this.j0t=void 0,this.Q0t=void 0,this.i1t=t=>{var e,i;(Bo(t.gI)&&!_s(t.gI,this.zA,1e-5)||Bo(t.ZR)&&t.ZR!==this.lZ)&&(this.zA=null!=(e=t.gI)?e:this.zA,this.lZ=null!=(i=t.ZR)?i:this.lZ,this._o(new ns(this.ER,this.zA)))},this.s1t=()=>{const t=this.YNt.mJt();this.Vft=t?new U0(this,this.na,this.YNt,t,this.Fa):this.e1t()},this.D0t=t=>{this.aZ(t.bt),this.C0t(t.Cc)},this.n1t=t=>{const e=this.P0t(t.EN);if(!e)return void 0;const i={targetQualityIds:t.oJt};e.OJt(i)},this.I0t=t=>{this.F0t(t.lt)},this.F0t=t=>{this.t1t&&this.t1t(t)},this.gMt=t=>{this.YG=t.lt,this.KG=ck(this.YG),this._o(new Na(this.KG))},this.X0t=t=>{if(!t.enabled)return;const e=this.rt.lC.some((e=>e.IC===t.trackId))?this.rt:this.ht;for(const i of e.lC)i.Rt&&i.IC!==t.trackId&&(i.Rt=!1)},this.z0t=t=>{if(t.mode===bh.Qn)for(const e of this.nt.lC)e.CE===bh.Qn&&e.IC!==t.trackId&&dx(e.Lt,t.track.Lt)&&(e.CE=bh.Mh)},this.K$t=Vd((()=>{this.q0t()}),50),this.H0t=()=>{const t=[];var e;const i=null!=(e=Fo(this.ht.lC,(t=>o1(t,this.K0t))))?e:Fo(this.ht.lC,(t=>t.Rt));var s;i&&t.push(i.IC);const n=null!=(s=Fo(this.nt.lC,(t=>o1(t,this.j0t))))?s:Fo(this.nt.lC,(t=>t.CE===bh.Qn));var r;n&&t.push(n.IC);const o=null!=(r=Fo(this.rt.lC,(t=>o1(t,this.Q0t))))?r:Fo(this.rt.lC,(t=>t.Rt));o&&t.push(o.IC),0!==t.length&&this.Fa.WQt(t)},this.Apt=t=>{const e=this.J0t(t.targetQuality),i=t.track;this.YNt.hJt(i.IC,i.m3,e)},this.FW=t=>{this._o(t);const e=t.readyState;!this.bW&&this.RW===Ht.eO&&e>=Ht.Xn&&(this.bW=!0,this._o(new ZT(t.currentTime))),!this.kW&&this.RW<=Ht.Xn&&e>=Ht.iO&&(this.kW=!0,this._o(new XT(t.currentTime))),this.RW<=Ht.iO&&e>=Ht.sO&&this._o(new ro(t.currentTime)),this.RW<=Ht.sO&&e===Ht.nO&&this._o(new zT(t.currentTime)),this.RW=e},this.zA=this.na.gI,this.lZ=this.na.ZR,this.YNt=e,this.YNt.bn(Qu.EQt,this.I0t),this.YNt.bn(Qu.sJt,this.gMt),this.YNt.bn(Qu.ub,this.i1t),this.YNt.bn(Qu.iJt,this.s1t),this.YNt.bn(Qu.nJt,this.n1t),this.Oc=new MF(this),this.tZ=this.na.bt,this.Sc=this.na.iu(),this.Vft=new n0(this,0,this.na.Tst(),this.na.jd(),this.na.PR,this.na.KR,this.na.QR,this.na.vI,this.na.dI),this.V0t()}};r();var Q0=class extends Ds{ka(){return new J0(this.lt)}constructor(t){super("error"),this.lt=t}},J0=class extends pe{constructor(t){super("error"),this.error=t}};r();var $0=class extends pe{constructor(t){super("statechange"),this.state=t}};function t1(t,e){let i;return{get casting(){return t.uQ},get error(){return t.lt},get receiverName(){return t.r1t},get state(){return t.Vft},start(){t.Sn()},stop(){t.RI()},join(){t.o1t()},leave(){t.h1t()},set connectionCallback(t){null==e||e.a1t(t)},get connectionCallback(){return null==e?void 0:e.u1t()},get source(){return i||t.Cc},set source(e){i=e,t.Cc=e},addEventListener(e,i){const s=Hu(e,hs);t.bn(s,i)},removeEventListener(e,i){const s=Hu(e,hs);t.vn(s,i)}}}r();var e1=class extends sn{get uQ(){return this.Vft===Nn.CONNECTING||this.Vft===Nn.CONNECTED}get lt(){return this.YG}get wa(){return this.eu||(this.eu=t1(this,this.c1t)),this.eu}get r1t(){var t;return null==(t=this.c1t.l1t())?void 0:t.bJt()}get Cc(){return this.na?this.na.N0t:this.M0t}set Cc(t){this.M0t=t?_c(t,this.d1t.kd):void 0,this.na&&(this.na.N0t=this.M0t,this.M0t&&this.na.$n(this.M0t))}get Vft(){return this.Fa}set Vft(t){let e=t;this.f1t||e!==Nn.CONNECTING&&e!==Nn.CONNECTED||(e=Nn.AVAILABLE),this.Fa!==e&&(this.Fa=e,this._o(new $0(this.Vft)))}async _1t(){if(!this.v1t)throw new g("Chromecast must be initialized before starting a session");await this.v1t,this.c1t.l1t()||await this.c1t.m1t()}async Sn(){this.f1t=!0;try{if(this.Vft=Nn.CONNECTING,await this._1t(),await this.g1t(),this.na){const t=this.d1t.iu(),e=this.c1t.p1t(t);this.na.N0t=e?_c(e,this.d1t.kd):this.M0t,this.na.L0t()}this.Vft=Nn.CONNECTED,await this.d1t.RI()}catch(t){this.w1t(!1).catch(Tt),this.Vft=Nn.AVAILABLE,Je(t)||this.X6(t)}}async o1t(){this.f1t=!0;try{if(this.Vft=Nn.CONNECTING,await this._1t(),await this.g1t(),this.na){const t=this.d1t.iu(),e=this.c1t.y1t(t);e&&(this.na.N0t=_c(e,this.d1t.kd))}this.Vft=Nn.CONNECTED,await this.d1t.RI()}catch(t){await this.w1t(!0).catch(Tt),this.Vft=Nn.AVAILABLE,Je(t)||this.X6(t)}}async b1t(){this.c1t.l1t()&&await this.Sn()}async g1t(){null!=this.na||(this.na=this.A1t()),this.YG=void 0,this.d1t.EI(),await this.gj.S1t(this.na)}A1t(){const t=new j0(this.d1t,this.c1t.l1t());return t.$0t(this.X6),t}T1t(){this.na&&(this.na.yn(),this.na=void 0)}async w1t(t){if(this.f1t=!1,!this.na)return;const e=this.na.so,i=this.na.iu(),s=this.na.Tst();try{if(e){let e;e=t?this.c1t.k1t(i):this.c1t.E1t(i),null!=e||(e=i),await this.gj.x1t(e,e===i),this.d1t.RR(s),this.d1t.xI()}}finally{this.T1t()}}h1t(){this.uQ&&(this.c1t.R1t(!1),this.w1t(!0).catch(this.X6))}RI(){this.uQ&&(this.c1t.R1t(!0),this.w1t(!1).catch(this.X6))}yn(){this.vW.jw(),this.c1t.vn(i0.kJt,this.I1t),this.Ro(),this.T1t()}constructor(t,e,i,s){super(),this.YG=void 0,this.eu=void 0,this.na=void 0,this.Fa=Nn.UNAVAILABLE,this.f1t=!1,this.vW=new da,this.C1t=()=>{this.c1t.bn(i0.kJt,this.I1t),this.Vft=this.c1t.P1t()},this.I1t=t=>{const e=t.Vft;this.Vft=e,e!==Nn.UNAVAILABLE&&e!==Nn.AVAILABLE||this.w1t(!1).catch(this.X6)},this.M0t=void 0,this.X6=t=>{Je(t)||t instanceof Xi&&(this.YG=t,this._o(new Q0(t).wa))},this.gj=t,this.d1t=e,this.c1t=s,this.MT=i.chromecast,this.v1t=js(this.c1t.xj(this.MT,this.vW.Uw),this.vW),this.v1t.then(this.C1t).catch(this.X6)}};r();var i1=class extends sn{get uQ(){return!1}get lt(){}get r1t(){}get Cc(){}set Cc(t){}get Vft(){return Nn.UNAVAILABLE}get wa(){return this.eu||(this.eu=t1(this)),this.eu}o1t(){Ms.Vp("Joining a Chromecast session is not possible when JoinStrategy is configured to disabled")}h1t(){Ms.Vp("Leaving a Chromecast session is not possible when JoinStrategy is configured to disabled")}Sn(){Ms.Vp("Starting a Chromecast session is not possible when JoinStrategy is configured to disabled")}RI(){Ms.Vp("Stopping a Chromecast session is not possible when JoinStrategy is configured to disabled")}b1t(){return Promise.resolve()}yn(){}};function s1(t){return{bt:t.bt,ER:t.xR(),ct:t.jd(),PR:t.PR,lt:t.NR(),MR:t.LR(),ZR:t.ZR,KR:t.KR,QR:t.QR,rI:t.rI,uI:t.uI,dI:t.dI,vI:t.vI,gI:t.gI}}r(),r();var n1=class extends ic{Lst(){return this.Oc}mR(){return this.cO}get OR(){return this.FR()}FR(){return this.lO}ja(){return this.uO}lI(){return this.Hl}_I(){return this.dO}switchContexts(t){this.na=t,this.cO.vC=t.ht,this.dO.vC=t.rt,this.Hl.vC=t.nt,this.uO.vC=t.fH,this.lO.vC=t.OR,this.Oc.vC=t.zc}D1t(t){this.na!==t&&(this.iZ(),this.switchContexts(t),this.eZ())}fO(t){if(this.na===t)return;let e;this.iZ(),this.Ust&&(e=s1(this));const i=this.kR(),s=this.SI(),n=this.TI();if(this.switchContexts(t),void 0!==e){Yc(this,e,s1(this))}const r=this.kR();r!==i&&this._o(new tk(r)),this.SI()!==s&&this._o(new ho),this.TI()!==n&&this._o(new ek),this.eZ()}async yn(t){await super.yn(t),this.uO.yn(t),this.cO.yn(t),this.dO.yn(t),this.Hl.yn(t),this.lO.yn(),await this.Oc.yn(t)}constructor(t,e){super(t,e),this.cO=new qo,this.dO=new qo,this.Hl=new at,this.lO=new Xc,this.uO=new Vh(t.fH),this.cO.vC=t.ht,this.dO.vC=t.rt,this.Hl.vC=t.nt,this.lO.vC=t.OR,this.Oc=new MF(this),this.Oc.vC=t.zc}},r1=class extends n1{iu(){const t=super.iu();return!t&&this.N1t.uQ&&this.N1t.Cc?this.N1t.Cc:t}Ca(t,e){return this.Yo.Qo((e=>(this.M1t=new da,this.M1t.Qw(e),js(super.Ca(t,this.M1t.Uw),this.M1t))),e)}xI(){super.xI(),this.kd.cast.strategy!==cS.AUTO||this.N1t.uQ||this.N1t.b1t()}S1t(t){return this.Yo.Qo((e=>this.L1t(t,e)))}x1t(t,e){return void 0===t&&(t=void 0),void 0===e&&(e=!1),this.Yo.Qo((i=>this.B1t(t,e,i)))}L1t(t,e){J(e),this.O1t.zc&&this.O1t.zc.hnt(t.zc),this.F1t(),this.V1t=Fo(this.O1t.ht.lC,(t=>t.Rt)),this.SEt=Fo(this.O1t.nt.lC,(t=>"showing"===t.CE)),this.W1t=Fo(this.O1t.rt.lC,(t=>t.Rt)),this.U1t=t,this.U1t.Y0t(this.V1t,this.SEt,this.W1t),this.fO(t),this.U1t.pr()}async B1t(t,e,i){J(i);const s=this.U1t;if(void 0!==s)try{if(t){await this.O1t.RI(),J(i);const s=_c(t,this.O1t.kd);e&&(s.ads=void 0),this.M1t=new da,this.M1t.Qw(i),await js(this.O1t.Ca(s,this.M1t.Uw),this.M1t)}e&&this.O1t.zc&&s.zc.hnt(this.O1t.zc)}catch(t){yu(t)}finally{s.dr(),this.fO(this.O1t),this.V1t=Fo(this.U1t.ht.lC,(t=>t.Rt)),this.SEt=Fo(this.U1t.nt.lC,(t=>"showing"===t.CE)),this.W1t=Fo(this.U1t.rt.lC,(t=>t.Rt)),this.O1t.ht.bn(Se.VI,this.G1t),this.O1t.nt.bn(Se.VI,this.H1t),this.O1t.rt.bn(Se.VI,this.Z1t),this.O1t.bn(Zc.VL,this.F1t),this.U1t===s&&(this.U1t=void 0)}}RI(){var t;return this.V1t=void 0,this.SEt=void 0,this.W1t=void 0,this.F1t(),null==(t=this.M1t)||t.jw(),this.Yo.Qo((()=>super.RI()))}async yn(){var t;null==(t=this.M1t)||t.jw(),this.N1t.yn(),await this.x1t(),await this.Yo.yn(),await super.yn()}constructor(t,e){super(t),this.Yo=new Su,this.V1t=void 0,this.SEt=void 0,this.W1t=void 0,this.G1t=t=>{const e=t.Ht;o1(this.V1t,e)&&(e.Rt=!0)},this.H1t=t=>{const e=t.Ht;o1(this.SEt,e)&&(e.CE=bh.Qn)},this.Z1t=t=>{const e=t.Ht;o1(this.W1t,e)&&(e.Rt=!0)},this.F1t=()=>{this.O1t.ht.vn(Se.VI,this.G1t),this.O1t.nt.vn(Se.VI,this.H1t),this.O1t.rt.vn(Se.VI,this.Z1t)},this.O1t=t,this.kd.cast.strategy!==cS.DISABLED?this.N1t=new e1(this,t,this.kd.cast,e):this.N1t=new i1,this.Iz.mQ(this.N1t)}};function o1(t,e){return void 0!==t&&void 0!==e&&(t.gs===e.gs&&e.Ch===t.Ch)}r();var h1=new class extends Co{a1t(t){this.X1t=t}u1t(){return this.X1t}l1t(){return this.z1t}P1t(){switch(this.q1t.getCastState()){case cast.framework.CastState.CONNECTED:return Nn.CONNECTED;case cast.framework.CastState.CONNECTING:return Nn.CONNECTING;case cast.framework.CastState.NOT_CONNECTED:return Nn.AVAILABLE;case cast.framework.CastState.NO_DEVICES_AVAILABLE:default:return Nn.UNAVAILABLE}}async xj(t,e){await CJ(e),this.q1t=cast.framework.CastContext.getInstance(),this.q1t.addEventListener(cast.framework.CastContextEventType.CAST_STATE_CHANGED,this.gQ),this.q1t.setOptions({receiverApplicationId:t.appID,autoJoinPolicy:chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED})}async m1t(){try{const t=await this.q1t.requestSession();if(t)throw t}catch(t){throw new Xi(BJ(t))}}p1t(t){var e;return null==(e=this.X1t)?void 0:e.onStart(t)}E1t(t){var e;return null==(e=this.X1t)?void 0:e.onStop(t)}y1t(t){var e;return null==(e=this.X1t)?void 0:e.onJoin(t)}k1t(t){var e;return null==(e=this.X1t)?void 0:e.onLeave(t)}R1t(t){this.q1t.endCurrentSession(t)}constructor(...t){super(...t),this.z1t=void 0,this.X1t=void 0,this.gQ=()=>{const t=this.P1t();this.z1t=t===Nn.CONNECTED?new t0(this.q1t.getCurrentSession()):void 0,this._o(new s0(t))}}},a1=new class{get wa(){return this.eu||(this.eu=function(t){return{initialize(e){const i=t.xj(lS(e));return i.catch(Tt),i},startSession(){const e=t.m1t();return e.catch(Tt),e},endSession(){t.Y1t()}}}(this)),this.eu}async xj(t){this.v1t||(this.v1t=this.K1t(t)),await this.v1t}async K1t(t){await this.c1t.xj(t)}async m1t(){if(!this.v1t)throw new g("Chromecast must be initialized before starting a session");await this.v1t,this.c1t.l1t()||await this.c1t.m1t()}j1t(){this.c1t.R1t(!1)}Y1t(){this.c1t.R1t(!0)}constructor(t){this.v1t=void 0,this.eu=void 0,this.c1t=t}}(h1),u1={get chromecast(){return a1.wa}};cF((t=>new r1(t,h1)),rh.Zst),r(),r(),r(),r(),r(),r(),r();var c1=class{Q1t(t,e,i,s){t.xZ.forEach((t=>{if(!this.J1t(t.$1t)){const n=t.t2t(e,i,s);n&&this.e2t(n)}}))}J1t(t){return this.i2t.get(t)}e2t(t){this.i2t.set(t.s2t,t),this.n2t.set(t.s2t,t.r2t),this.o2t.ru(t.h2t)}ant(t){this.n2t.has(t.s2t)||(this.n2t.set(t.s2t,t),this.o2t.ru(t.h2t))}a2t(t){return this.n2t.forEach(t)}u2t(t){return this.i2t.forEach(t)}c2t(t){let e=!1;return this.i2t.forEach((i=>{e=i.c2t(t)||e})),e}async yn(){const t=[];this.i2t.forEach((e=>t.push(e.yn()))),this.n2t.forEach((e=>t.push(e.yn()))),await Promise.all(t),this.i2t.clear(),this.n2t.clear()}constructor(t){this.o2t=t,this.i2t=Oh(),this.n2t=Oh()}};r();var Fh=class t extends Ds{ka(){return new l1(this.Ajt,this.wb,this.Gb,this.Cc)}static l2t(e){return new t(Oo.GENERAL,e.wb,e.Tjt)}static d2t(e,i){return new t(e.Ajt,e.message,e.Tjt,i)}constructor(t,e,i,s){super("f2t"),this.Ajt=t,this.wb=e,this.Gb=i,this.Cc=s}},l1=class extends pe{constructor(t,e,i,s){super("aderror"),this.problemType=t,this.message=e,this.errorCode=i,this.source=s}},d1=class extends Ju{get _2t(){return this.v2t}get Vc(){let t=!1;return this.m2t((e=>{t=t||e.g2t})),t}get ent(){const t=[];return this.m2t((e=>{const i=e.ent;i.length&&t.push(...i)})),t}get snt(){let t=null;return this.m2t((e=>{null!=t||(t=e.snt)})),t}get nnt(){const t=[];return this.m2t((e=>{t.push(...e.nnt)})),t}get rnt(){const t=[];return this.m2t((e=>{t.push(...e.rnt)})),t}hnt(t){this.m2t((e=>{e.hnt(t)}))}get wa(){var t;return null!=(t=this.eu)?t:this.eu=SF(this)}g6(t,e,i){try{this.p2t=i;const s=yh.Vg.IZ(t);if(s.$1t===vt.Hst)return;const n=this.v2t.J1t(s.$1t);if(!n)throw new Wr(Oo.ADBLOCK,void 0,"Ads could not be loaded.");e!==Ca.tnt&&this.X9||this.y2t.w2t(n),s.g6(t,e,n,this.p2t)}catch(e){0,this._o(Fh.d2t(e,t.sources))}}MD(){this.m2t((t=>{t.MD()}))}ant(t){this.v2t.ant(t)}ont(t,e){return this.y2t.ont(t,e)}b2t(t){this.v2t.u2t((e=>{e.b2t(t)}))}c2t(t){return this.v2t.c2t(t)}m2t(t){return this.v2t.a2t(t)}kI(){this.v2t.u2t((t=>t.kI()))}async nr(){this.X9=!1;const t=[];this.v2t.u2t((e=>t.push(e.RI()))),await Promise.all(t)}async yn(){this.Ro(),await this.v2t.yn(),this.y2t.vn(Ti.ho,this.Mit),this.vn("f2t",this.A2t)}constructor(t){super(),this.p2t=!1,this.X9=!1,this.eu=void 0,this.A2t=t=>{if(!this.p2t)return;const e=new hk(ok.ADVERTISEMENT_ERROR,t.wb),i=new A(Qa.AD_BLOCKER_DETECTED,t.wb+" Turn off your AdBlocker and try again.",e);this.y2t.BH(i)},this.Mit=()=>{this.X9=!0},this.y2t=t,this.v2t=new c1(this),this.bn("f2t",this.A2t),t.bn(Ti.ho,this.Mit)}};r(),r(),r();var ys=class extends y0{get zc(){return this.Oc}get ZJt(){return this.S2t}set ZJt(t){this.S2t=t}get XJt(){return this.T2t}set XJt(t){this.T2t=t}set eOt(t){this.dQt=t}get eOt(){return this.dQt}get wJt(){return this.k2t}E2t(){this.x2t=!0}R2t(t){this.Oc.push(t),this.x2t=!1}I2t(t){we(this.Oc,t)}get tI(){return this.x2t}constructor(t){super(),this.dQt=t,this.Oc=[],this.S2t=-1,this.T2t=-1,this.k2t=void 0,this.x2t=!1}},f1=class extends ys{get aQt(){return this.C2t}get nnt(){return this.P2t}ir(t){void 0!==t.maxDuration&&(this.S2t=t.maxDuration),void 0!==t.customData&&(this.k2t=t.customData)}D2t(t){const e=this.Oc.indexOf(t);return e>=0&&e<this.Oc.length-1}R2t(t){super.R2t(t),this.P2t.push(t)}N2t(t){we(this.P2t,t)}I2t(t){super.I2t(t),we(this.P2t,t)}constructor(t,e){super(e.timeOffset),this.P2t=[],this.C2t=t,this.ir(e)}};r(),r();var Es=function(t){return t.Mjt="linear",t.M2t="nonlinear",t.iE="unknown",t}({}),_1=function(t){return t.NONE="none",t.READY="ready",t}({}),Zi=class extends w0{L2t(t,e,i,s,n,r){this.zS=t,this.YA=e,this.KA=i,this.MA=s,this.PYt=n,this.RKt=r,this.B2t="ready"}get O2t(){return this.B2t}get CYt(){return this.PYt}get ct(){return this.MA}int(){var t;return null!=(t=this.eu)?t:this.eu=this.ka()}get Ti(){return this.KA}get o(){return this.zS}get xKt(){return this.RKt}get ji(){return this.YA}get F2t(){return this.V2t}get QYt(){return this.JYt}get bYt(){return this.AYt}get hYt(){return this.AKt}get wJt(){return this.k2t}get W2t(){return this.U2t}h$t(){}l$t(){return""}c$t(){return this.G2t}constructor(t,e){super(),this.V2t=e,this.zS=void 0,this.RKt=void 0,this.YA=void 0,this.KA=void 0,this.MA=void 0,this.AKt=[],this.PYt=[],this.B2t="none",this.k2t=void 0,this.U2t=!1,this.sd=t}};function Lo(t){return{get adSystem(){return t.h$t()},get readyState(){return t.O2t},get adBreak(){return t.sd.int()},get duration(){return t.ct},get companions(){return t.CYt.map((t=>t.wa))},get resourceURI(){return t.c$t()},get clickThrough(){return t.QYt},get width(){return t.ji},get type(){return function(t){switch(t){case"linear":case"unknown":return"linear";case"nonlinear":return"nonlinear"}}(t.F2t)},get height(){return t.Ti},get id(){return t.o},get skipOffset(){return t.xKt},get integration(){return t.aQt},get creativeId(){return t.bYt},get universalAdIds(){return t.hYt},get customData(){return t.wJt},get isSlate(){return t.W2t}}}r();var v1=class{get GYt(){return this.HYt}get KYt(){return this.jYt}get H2t(){return this.Z2t}get QYt(){return this.JYt}get Ti(){return this.KA}get cjt(){return this.G2t}get ji(){return this.YA}get wa(){var t;return null!=(t=this.eu)?t:this.eu=function(t){return{get adSlotId(){return t.GYt},get altText(){return t.KYt},get contentHTML(){return t.H2t},get clickThrough(){return t.QYt},get height(){return t.Ti},get resourceURI(){return t.cjt},get width(){return t.ji}}}(this)}X2t(t){if(t.QYt&&t.cjt)return;const e=function(t){try{return h$(t,"text/html")}catch(t){return}}(t.H2t);e&&(this.JYt=m1(e,"a","href"),this.G2t=m1(e,"img","src"))}constructor(t){var e;this.eu=void 0,this.JYt=void 0,this.G2t=void 0,this.HYt=t.GYt,this.YA=t.ji,this.KA=t.Ti,this.Z2t=t.H2t,this.JYt=t.QYt,this.G2t=t.cjt,this.jYt=null!=(e=t.KYt)?e:"",this.X2t(t)}};function m1(t,e,i){const s=t.querySelector(e);return s&&s.getAttribute(i)||""}var g1=class extends Zi{get aQt(){return this.C2t}get z2t(){return this.q2t}set z2t(t){this.q2t=t}ka(){return Lo(this)}ir(t){t.id&&(this.zS=t.id),void 0!==t.skipOffset&&(this.RKt=t.skipOffset),void 0!==t.width&&(this.YA=t.width),void 0!==t.height&&(this.KA=t.height),void 0!==t.duration&&(this.MA=t.duration),void 0!==t.readyState&&(this.B2t=function(t){return"ready"===t?_1.READY:_1.NONE}(t.readyState)),void 0!==t.resourceURI&&(this.G2t=t.resourceURI),void 0!==t.clickThrough&&(this.JYt=t.clickThrough),void 0!==t.companions&&(this.PYt=[...t.companions].map(p1)),void 0!==t.creativeId&&(this.AYt=t.creativeId),void 0!==t.universalAdIds&&(this.AKt=t.universalAdIds),void 0!==t.customData&&(this.k2t=t.customData)}constructor(t,e,i){super(i,function(t){return"linear"===t?Es.Mjt:"nonlinear"===t?Es.M2t:Es.iE}(e.type)),this.q2t=0,this.C2t=t,this.ir(e)}};function p1(t){const e={GYt:t.adSlotId,KYt:t.altText,H2t:t.contentHTML,Mk:void 0,QYt:t.clickThrough,Ti:t.height,cjt:t.resourceURI,ji:t.width};return new v1(e)}r();var zo=class extends Da{ka(){return new w1(this.lnt.int(),this.Y2t)}get Y2t(){return this.K2t}constructor(t,e){super("j2t",t),this.K2t=e}},w1=class extends Ka{constructor(t,e){super("adskip",t),this.playedPercentage=e}};r();var y1=class extends mo{ka(){return new b1(this.sd.int())}constructor(t){super("Q2t",t)}},b1=class extends ss{constructor(t){super("updateadbreak",t)}};r();var A1=class extends mo{ka(){return new S1(this.sd.int())}constructor(t){super("J2t",t)}},S1=class extends ss{constructor(t){super("adbreakchange",t)}};r();var cs=class extends Da{ka(){return new T1(this.lnt.int(),this.currentTime)}constructor(t,e){super("$2t",t),this.currentTime=e}},T1=class extends Ka{constructor(t,e){super("adfirstquartile",t),this.currentTime=e}};r();var Is=class extends Da{ka(){return new k1(this.lnt.int(),this.currentTime)}constructor(t,e){super("t3t",t),this.currentTime=e}},k1=class extends Ka{constructor(t,e){super("admidpoint",t),this.currentTime=e}};r();var ks=class extends Da{ka(){return new E1(this.lnt.int(),this.currentTime)}constructor(t,e){super("e3t",t),this.currentTime=e}},E1=class extends Ka{constructor(t,e){super("adthirdquartile",t),this.ad=t,this.currentTime=e}},x1=class{get zc(){return this.Oc}get YJt(){return this.w$t}get wa(){var t;return null!=(t=this.eu)?t:this.eu=function(t){return{get integration(){return t.aQt},get ads(){return t.zc.map((t=>t.int()))},get adBreaks(){return t.YJt.map((t=>t.int()))},createAd:(e,i)=>t.i3t(e,i?t.s3t(i):void 0).int(),updateAd(e,i){t.n3t(t.r3t(e),i)},updateAdProgress(e,i){const s=Ns(Number(i),0,1);t.o3t(t.r3t(e),s)},beginAd(e){t.N2t(t.r3t(e))},endAd(e){t.h3t(t.r3t(e))},skipAd(e){t.ZQt(t.r3t(e))},removeAd(e){t.I2t(t.r3t(e))},createAdBreak:e=>t.a3t(e).int(),updateAdBreak(e,i){t.u3t(t.s3t(e),i)},removeAdBreak(e){t.c3t(t.s3t(e))},removeAllAds(){t.l3t()},error(e){t.d3t(e)},fatalError(e,i){const s=i?Number(i):void 0;t.f3t(e,s)}}}(this)}get NN(){return this.K6}set NN(t){this.K6=t}get g2t(){return this._3t.some((t=>t.F2t===Es.Mjt))}get s2t(){return this.aQt}get ent(){return this._3t}get snt(){var t;return null!=(t=this.p$t)?t:null}get nnt(){return on(this.w$t,(t=>t.nnt))}get rnt(){return this.w$t.filter((t=>!t.tI))}MD(){var t;if(0===this._3t.length)return;const e=this._3t[0];(null==(t=this.K6)?void 0:t.skipAd)?this.K6.skipAd(e.int()):this.ZQt(e)}hnt(t){}i3t(t,e){var i;const s=null!=e?e:this.v3t({timeOffset:null!=(i=t.timeOffset)?i:0}),n=new g1(this.aQt,t,s);return s.R2t(n),this.Oc.push(n),this.h2t._o(new Uu(n)),n}n3t(t,e){t.ir(e),this.h2t._o(new R0(t))}o3t(t,e){if(!ms(this._3t,t))throw new g("Cannot update ad progress on a non-started ad");const i=t.z2t,s=_.max(i,e);t.z2t=s;const n=this.y2t.xR();i<.25&&s>=.25&&this.h2t._o(new cs(t,n)),i<.5&&s>=.5&&this.h2t._o(new Is(t,n)),i<.75&&s>=.75&&this.h2t._o(new ks(t,n))}N2t(t){ms(this._3t,t)||(this._3t.push(t),t.sd.N2t(t),this.m3t(t.sd),this.h2t._o(new cn(t,this.y2t.xR())))}ZQt(t){if(!ms(this._3t,t))return;const e=t.sd.D2t(t);this.h2t._o(new zo(t,t.z2t)),this.g3t(t,e)}h3t(t){if(!ms(this._3t,t))return;const e=t.sd.D2t(t);this.h2t._o(new xn(t,this.y2t.xR())),this.g3t(t,e)}I2t(t){if(!ms(this.Oc,t))return;const e=t.sd.D2t(t);we(this.Oc,t),t.sd.I2t(t),this.h2t._o(new A1(t.sd)),this.g3t(t,e)}a3t(t){const e=new f1(this.aQt,t);return this.w$t.push(e),this.h2t._o(new EF(e)),e}u3t(t,e){t.ir(e),this.h2t._o(new y1(t))}c3t(t){if(ms(this.w$t,t)){for(const e of t.zc.slice())this.I2t(e);we(this.w$t,t),this.h2t._o(new Au(t))}}l3t(){for(const t of this.w$t.slice())this.c3t(t)}d3t(t){this.h2t._o(new Fh(Oo.GENERAL,t.message))}f3t(t,e){const i=new A(null!=e?e:Qa.AD_ERROR,t.message,t);this.y2t.BH(i)}p3t(t){return Fo(this.w$t,(e=>e.eOt===t))}v3t(t){var e;return null!=(e=this.p3t(t.timeOffset))?e:this.a3t(t)}g3t(t,e){we(this._3t,t);const i=t.sd;0!==this._3t.length||this.p$t!==i||e||(i.E2t(),this.m3t(void 0))}m3t(t){this.p$t!==t&&(void 0!==this.p$t&&this.h2t._o(new Hh(this.p$t)),this.p$t=t,void 0!==t&&this.h2t._o(new Ua(t)))}r3t(t){const e=Fo(this.Oc,(e=>e.int()===t));if(void 0===e)throw new g('Invalid ad for integration "'+this.aQt+'"');return e}s3t(t){const e=Fo(this.w$t,(e=>e.int()===t));if(void 0===e)throw new g('Invalid ad break for integration "'+this.aQt+'"');return e}async Ca(t,e){var i;if(J(e),null==(i=this.K6)?void 0:i.setSource){let e=await Promise.resolve(this.K6.setSource(t));return gC(e)&&(e=t),_c(e,this.y2t.kd)}return t}async w3t(){var t;(null==(t=this.K6)?void 0:t.resetSource)?await Promise.resolve(this.K6.resetSource()):this.l3t()}async yn(){var t;(null==(t=this.K6)?void 0:t.destroy)&&await Promise.resolve(this.K6.destroy()).catch(Tt),this.l3t(),this.m3t(void 0),this.K6=void 0,this.h2t.yn()}constructor(t,e){this.h2t=new Ju,this.Oc=[],this.w$t=[],this._3t=[],this.aQt=t,this.y2t=e}};r();var R1=class{destroy(){this.removeAdListeners()}get player(){return this.na}set player(t){this.na&&this.removeAdListeners(),this.na=t,this.addAdListeners()}get inAdBreak(){return this.y3t}addAdListeners(){var t,e;null==(t=this.na.zc)||t.bn("_nt",this.Td),null==(e=this.na.zc)||e.bn("fnt",this.Md)}removeAdListeners(){var t,e;null==(t=this.na.zc)||t.vn("_nt",this.Td),null==(e=this.na.zc)||e.vn("fnt",this.Md)}constructor(t){this.V9=void 0,this.y3t=!1,this.Td=t=>{1!==this.na.QR&&(this.V9=this.na.QR,this.na.QR=1),this.y3t=!0},this.Md=t=>{this.y3t=!1,void 0!==this.V9&&(this.na.QR=this.V9,this.V9=void 0)},this.na=t,this.addAdListeners()}},I1=class extends n1{Lst(){return this.b3t}get A3t(){return this.S3t}kI(){this.O1t.kI(),this.b3t.kI()}xI(){void 0===this.YG?(void 0!==this.T3t&&this.k3t(this.T3t),super.xI()):this._o(new Na(this.YG))}async Ca(t,e){J(e);let i=t;if(i)for(const t of this.E3t)i=await t.Ca(i,e);if(await super.Ca(i,e),J(e),null==i?void 0:i.ads){const t=Boolean(i.blockContentIfAdError);this.b3t.b2t(i.playAdsAfterTime);for(const e of i.ads)this.b3t.g6(e,Ca.tnt,t)}}async RI(){this.YG=void 0,this.TZ=void 0,await this.b3t.nr(),this.x1t(),await super.RI();for(const t of this.E3t)await t.w3t()}k3t(t){this.x3t=this.na.QR;const e=this.na.gI,i=this.na.ZR;t.wI(e),t.zR(i),this.S3t=t,this.T3t=void 0,this.fO(t)}w2t(t){void 0===this.S3t&&(this.T3t=t)}x1t(){this.T3t=void 0,void 0!==this.S3t&&(this.O1t.QR=this.x3t,this.O1t.gI=this.gI,this.O1t.ZR=this.ZR,this.fO(this.O1t),this.S3t=void 0)}NR(){var t;return null!=(t=this.TZ)?t:super.NR()}LR(){var t;return null!=(t=this.YG)?t:super.LR()}BH(t){void 0===this.LR()&&(this.YG=t,this.TZ=gn(t),this._o(new Na(t)))}BI(t){return void 0===this.S3t&&this.b3t.c2t(t)}ont(t,e){try{const i=new x1(t,this);i.NN=e(i.wa),this.b3t.ant(i),this.E3t.push(i),t!==lu.UPLYNK&&(this.R3t=new R1(this))}catch(e){this.b3t._o(new Fh(Oo.GENERAL,'Error while constructing ad integration "'+t+'": '+e+'"'))}}$R(t){var e;(null==(e=this.R3t)?void 0:e.inAdBreak)||super.$R(t)}async yn(){var t;for(const t of this.E3t)await t.yn().catch(Tt);await this.b3t.yn(),this.x1t(),null==(t=this.R3t)||t.destroy(),this.R3t=void 0,await super.yn()}constructor(t,e){super(t),this.E3t=[],this.YG=void 0,this.TZ=void 0,this.x3t=1,this.O1t=t,this.b3t=new d1(this),this.b3t._2t.Q1t(e,t,this,t.kd)}};cF((t=>new I1(t,yh.Vg)),rh.Gst),r(),r(),r();var C1=0!==Z.og?Z.og:Z.nm,P1=Z.su&&C1<12,D1=class extends ic{get ER(){return this.xR()}set ER(t){this.RR(t)}Tst(){return this.na.Tst()}get ct(){return this.jd()}get OR(){return this.lO}get hI(){return this.aI()}get yI(){return this.tH}get h2t(){return this.I3t}get ht(){return this.cO}get g2t(){return this.y2t.A3t===this}yR(){return se.pB().ks()}AR(){}SR(t){}JR(){return 1}$R(t){}eI(){return new se([0,this.ER]).ks()}cI(){return!1}lI(){return this.Hl}_I(){return this.dO}cs(){return this.SI().cs}SI(){return this.ea}Aa(){}async yn(){this.Ro(),this.cO.yn(),this.dO.yn(),this.Hl.yn(),this.I3t.yn(),this.na.vn(Ti.xy,this.Ds)}C3t(){P1&&this.P3t(),this.g2t||this.y2t.k3t(this)}x1t(){this.g2t&&(P1&&this.D3t(),Z.Cg&&this.we.querySelectorAll("video[src]").forEach((t=>{t.src=""})),Ms.Ys.cp&&this.na.MI(),this.y2t.x1t())}P3t(){this.N3t||(s.addEventListener("blur",this.M3t),s.addEventListener("focus",this.L3t),this.N3t=!0)}D3t(){s.removeEventListener("blur",this.M3t),s.removeEventListener("focus",this.L3t),this.N3t=!1}B3t(){requestAnimationFrame((()=>this.na.be()))}constructor(t,e){super(t,!0),this.y2t=e,this.N3t=!1,this.dO=new Ke,this.cO=new Ke,this.Hl=new Wo,this.lO=new rS,this.I3t=new Ju,this.ea=new N,this.tH=new _I,this.M3t=()=>{this.na.ge()},this.L3t=()=>{this.B3t()},this.na.bn(Ti.xy,this.Ds)}};r(),r();var N1=0,M1="theoplayer-wrapper",L1=class t{get O3t(){return this.F3t}get V3t(){return this.W3t}get U3t(){return 1===this.W3t.length&&U$(this.W3t[0].sources.type)}get G3t(){return this.H3t}Z3t(t){const e=this.X3t===t.timeOffset;return!this.z3t&&e}get q3t(){return this.Y3t}get K3t(){return Z$(this.j3t)&&!this.z3t}get X3t(){return this.j3t}get od(){return this.Q3t}J3t(){if(S(this.Q3t)){let t=this.X3t;if(void 0===t)return void(this.Q3t=0);if("string"==typeof t&&Z$(t)){const e=this.na.jd();S(e)||e===1/0||(t=HJ(t)*e)}S(t)||(this.Q3t=t)}}get $3t(){return this.t4t}set $3t(t){this.t4t=t}get e4t(){return this.i4t}set e4t(t){this.i4t=t,this.s4t=!1}get n4t(){return this.r4t}o4t(t){this.r4t.push(t)}h4t(){if(!this.z3t){let t,e,i=this.F3t===Ca.tnt&&void 0===this.a4t&&1===this.W3t.length;const s=this.W3t[0];if(!i&&1===this.W3t.length){const t=Ms.Ih(s.sources.src).searchParams.get("output");t&&t.toLowerCase().indexOf("vmap")>-1&&(i=!0,void 0!==this.a4t&&vl("Do not set a timeOffset for VMAP ad sources. VMAP ads have their own offsets included."))}if(U$(s.sources.type)||i)t=s.sources.src;else{if(S(this.na.jd())&&"end"===this.u4t())return;e=this.c4t()}let n=this.na.jd();(S(n)||n===1/0)&&(n=-3),this.z3t={l4t:this.na.we.offsetWidth,d4t:this.na.we.offsetHeight,f4t:this.na.we.offsetWidth,_4t:this.na.we.offsetHeight,v4t:this.mst,m4t:this.lZ,g4t:t,p4t:e,w4t:s.omidAccessModeRules,y4t:n}}return this.z3t}c4t(){return'<vmap:VMAP xmlns:vmap="http://www.iab.net/videosuite/vmap" version="1.0">'+this.W3t.map(((t,e)=>this.b4t(t.sources,e))).join("\n")+"</vmap:VMAP>"}b4t(t,e){const i=this.u4t(),s=t.src;return'<vmap:AdBreak timeOffset="'+i+'" breakType="linear,nonlinear" breakId="theoplayer-break-'+this.IC+"-"+e+'"><vmap:AdSource allowMultipleAds="true" followRedirects="true"><vmap:VASTAdData><VAST version="3.0"><Ad id="'+M1+"-"+this.IC+"-"+e+'"><Wrapper allowMultipleAds="true" followAdditionalWrappers="true"><VASTAdTagURI><![CDATA['+s+"]]></VASTAdTagURI></Wrapper></Ad></VAST></vmap:VASTAdData></vmap:AdSource></vmap:AdBreak>"}u4t(){if(0===this.X3t)return"start";if(this.X3t===1/0)return"end";const t=this.X3t;if("string"==typeof t&&Z$(t)){const e=HJ(t)*this.na.jd();return ja.rQt(e)}return ja.rQt(this.X3t||0)}A4t(t){this.W3t.push(t)}S4t(t){const e=M1+"-"+this.IC+"-";for(const i of t)if(Cl(i,e)){const t=Number(i.slice(e.length));if(!S(t)&&t>=0&&t<this.W3t.length)return t}return-1}static T4t(t){if(void 0!==t)return-1===t?1/0:t}k4t(){this.Y3t=!0}get SO(){return this.mst}set SO(t){this.mst=t}get ZR(){return this.lZ}set ZR(t){this.lZ=t}constructor(e,i,s,n){this.F3t=i,this.na=s,this.H3t=n,this.Q3t=NaN,this.t4t=!1,this.i4t=!1,this.Y3t=!1,this.r4t=[],this.mst=!1,this.lZ=!1,this.W3t=[],this.IC=++N1,this.a4t=e.timeOffset,this.j3t=t.T4t(this.a4t),this.J3t(),this.W3t.push(e)}};r();var B1=class{get E4t(){return this.x4t.E4t}get R4t(){return this.x4t.R4t}get nnt(){return this.x4t.nnt}get t(){return this.x4t.t}b2t(t){this.I4t=t}C4t(t){return!(this.E4t&&!this.E4t.q3t&&"nonlinear"!==this.R4t.F2t)||this.E4t.od>t.od&&this.E4t.od!==t.od}P4t(t){if(t.length)return t.sort(((t,e)=>t.od-e.od))[0]}D4t(){if(this.nnt.length)return this.P4t(this.N4t(this.t.xR()))}M4t(){if(!(void 0!==this.I4t&&this.I4t>=0))return this.nnt.filter((t=>!t.$3t&&0===t.od&&t!==this.E4t))[0]}N4t(t){if(!this.L4t&&(this.L4t=!this.nnt.some((t=>S(t.od))),!this.L4t))return[];const e=this.nnt.filter((e=>!e.$3t&&(e.U3t||!S(e.od)&&t<=e.od)));return void 0===this.I4t?e:e.filter((t=>t.U3t||void 0===t.X3t||t.od>this.I4t))}constructor(t){this.L4t=!1,this.x4t=t,this.I4t=void 0}},O1=function(t){return t[t.B4t=0]="B4t",t[t.O4t=1]="O4t",t[t.F4t=2]="F4t",t}({}),F1=class{kI(){this.mo=!0,this.V4t&&this.W4t()}U4t(t,e){this.G4t(t,e);const i=Fo(this.nnt,(e=>e.Z3t(t)));if(i)i.A4t(t);else{var s;const i=new L1(t,e,this.na,null==(s=t.replaceContent)||s);this.P2t.push(i),2===this.H4t&&this.Z4t.a3t(i.od,i,i.X3t),this.X4t(e,i)}}get R4t(){return this.z4t}get nnt(){return this.P2t}get t(){return this.na}get XZt(){return Boolean(this.gpt)}get H4t(){return this.q4t}Y4t(){if(we(this.nnt,this.E4t),this.E4t){for(const t of this.E4t.n4t)this.Z4t.K4t();this.E4t=void 0}}j4t(){for(const t of this.P2t)for(const e of t.n4t)this.Z4t.Q4t(e,!0);En(this.P2t)}async J4t(t){this.Y4t(),this.$4t=!0,this.E4t=t,this.t5t=t.od,this.gpt=this.e5t(t),await this.gpt,this.gpt=void 0}async e5t(t){this.i5t(t);const e=t.h4t();if(!e)return this.$4t=!1,void(this.E4t=void 0);const i=this.z4t.s5t(e);t.$3t=!0;try{await i,t.O3t===Ca.$st&&this.z4t.n5t()}catch(t){0,this.E4t=void 0,await this.W4t()}}i5t(t){this.mo?t.SO=!0:t.SO=this.y2t.SO,t.ZR=this.y2t.ZR}r5t(){var t;return null!=(t=this.o5t.M4t())?t:this.o5t.D4t()}async W4t(){if(this.E4t&&!this.E4t.q3t)return this.gpt;const t=this.r5t();t&&await this.J4t(t)}get E4t(){return this.h5t}set E4t(t){this.h5t=t}get $4t(){return this.a5t}set $4t(t){this.a5t=t}nr(){this.Y4t(),En(this.P2t),this.t5t=0,this.E4t=void 0,this.gpt=void 0,this.$4t=!1}e4t(){this.$4t=!1,this.E4t&&(this.E4t.e4t=!0)}async X4t(t,e){t===Ca.$st&&this.mo&&this.o5t.C4t(e)&&!this.XZt&&"linear"!==this.z4t.F2t&&(!this.E4t||this.E4t&&this.E4t.$3t)&&(await Promise.resolve(),await this.J4t(e))}k4t(){this.E4t&&this.E4t.k4t()}get u5t(){if(this.XZt||this.$4t)return!1;if(this.E4t&&!this.E4t.q3t)return!1;return!!this.P2t.filter((t=>this.E4t!==t)).length&&Boolean(this.r5t())}async c5t(){if(!this.u5t)return void 0;const t=this.r5t();t&&await this.J4t(t)}G4t(t,e){const i=t.sources.type,s=e===Ca.tnt&&void 0===t.timeOffset,n=U$(i)||s?1:2;n!==this.q4t&&(this.q4t=n,this.j4t(),this.z4t.zJt&&!this.XZt&&"linear"!==this.z4t.F2t&&(this.z4t.zJt.Xw(),this.E4t=void 0,this.gpt=void 0),this.t5t=0,this.V4t=!0)}b2t(t){this.o5t.b2t(t)}yn(){this.na.vn(Ti.Iy,this.qX)}constructor(t,e,i,s,n){this.q4t=0,this.gpt=void 0,this.a5t=!1,this.qX=()=>{const t=this.P2t.filter((t=>t.K3t));for(const e of t){e.J3t();const t=e.X3t;this.Z4t.l5t(t,e.od)}this.mo&&this.u5t&&this.W4t()},this.P2t=[],this.z4t=t,this.mo=!1,this.V4t=!1,this.na=e,this.y2t=i,this.E4t=void 0,this.t5t=0,this.o5t=new B1(this),this.pst=s,this.Z4t=n,this.na.bn(Ti.Iy,this.qX)}};r(),r();var ls=function(t){return t.d5t="contentResumeRequested",t.f5t="contentPauseRequested",t._5t="click",t.Iy="durationChange",t.v5t="expandedChanged",t.m5t="start",t.g5t="impression",t.DZ="pause",t.p5t="resume",t.w5t="adProgress",t.y5t="adBuffering",t.b5t="firstQuartile",t.zKt="midpoint",t.A5t="thirdQuartile",t.qKt="complete",t.S5t="userClose",t.T5t="linearChanged",t.k5t="loaded",t.E5t="adCanPlay",t.x5t="adMetadata",t.R5t="adBreakReady",t.I5t="interaction",t.C5t="allAdsCompleted",t.P5t="skip",t.D5t="skippableStateChanged",t.N5t="log",t.M5t="viewableImpression",t.L5t="volumeChange",t.B5t="mute",t}({});r();var V1=function(t){return t.O5t="adError",t}({});r();var W1=function(t){return t[t.F5t=-1]="F5t",t[t.V5t=-1]="V5t",t[t.W5t=-1]="W5t",t[t.U5t=101]="U5t",t[t.G5t=102]="G5t",t[t.H5t=200]="H5t",t[t.Z5t=201]="Z5t",t[t.X5t=202]="X5t",t[t.z5t=300]="z5t",t[t.q5t=301]="q5t",t[t.Y5t=302]="Y5t",t[t.K5t=303]="K5t",t[t.j5t=400]="j5t",t[t.Q5t=402]="Q5t",t[t.J5t=403]="J5t",t[t.$5t=405]="$5t",t[t.t6t=500]="t6t",t[t.e6t=501]="e6t",t[t.i6t=-1]="i6t",t[t.s6t=503]="s6t",t[t.n6t=602]="n6t",t[t.r6t=900]="r6t",t[t.o6t=901]="o6t",t[t.h6t=1005]="h6t",t[t.a6t=1007]="a6t",t[t.u6t=1009]="u6t",t[t.c6t=1010]="c6t",t[t.l6t=1011]="l6t",t[t.d6t=1012]="d6t",t[t.f6t=1013]="f6t",t[t._6t=1020]="_6t",t[t.v6t=1021]="v6t",t[t.m6t=1101]="m6t",t[t.g6t=1204]="g6t",t[t.p6t=1205]="p6t",t[t.w6t=1300]="w6t",t[t.y6t=-1]="y6t",t[t.b6t=-1]="b6t",t[t.A6t=-1]="A6t",t[t.S6t=-1]="S6t",t}({}),U1=function(t){return t.T6t="adLoadError",t.k6t="adPlayError",t}({});function G1(t,e){if(t===ls.w5t){const t=e;return{E6t:t.adBreakDuration,x6t:t.adPosition,ER:t.currentTime,ct:t.duration,R6t:t.totalAds}}return e}function H1(t){switch(t){case google.ima.AdError.Type.AD_LOAD:return U1.T6t;case google.ima.AdError.Type.AD_PLAY:return U1.k6t}}function Z1(t){return V(t)&&Sd(t.getVastErrorCode)}function X1(t){const e=t.getInnerError(),i=e&&Z1(e)?X1(e):void 0;return{wb:t.getMessage(),Tjt:t.getErrorCode(),I6t:t.getVastErrorCode(),Tw:H1(t.getType()),C6t:i}}function z1(t){if(Bo(t))return t}r(),r();var q1=class extends Co{P6t(t){this.z4t._o(t)}D6t(t){this.qJt=t,this.qJt.bn(V1.O5t,this.N6t),this.qJt.bn(ls.f5t,this.M6t),this.qJt.bn(ls.d5t,this.L6t),this.qJt.bn(ls.C5t,this.B6t),this.qJt.bn(ls.m5t,this.O6t),this.qJt.bn(ls.qKt,this.F6t),this.qJt.bn(ls.P5t,this.V6t),this.qJt.bn(ls.S5t,this.W6t),this.qJt.bn(ls._5t,this.U6t),this.qJt.bn(ls.E5t,this.G6t),this.qJt.bn(ls.DZ,(()=>{this.z4t.KR||(this.z4t.H6t(!0),this.z4t._o(new ul(this.z4t.ER))),this.Z6t(!0)})),this.qJt.bn(ls.p5t,(()=>{this.z4t.KR&&(this.z4t.H6t(!1),this.z4t._o(new $(this.z4t.ER)))})),this.qJt.bn(ls.B5t,(()=>{const e=t.pI();e>=0&&this.X6t(e)})),this.qJt.bn(ls.L5t,(()=>{const e=t.pI();e>=0&&this.X6t(e)})),this.qJt.bn(ls.x5t,(t=>{this.q6t.z6t(t.type)})),this.qJt.bn(ls.Iy,(t=>{t.lnt&&this.Y6t(t.lnt.ct)})),this.qJt.bn(ls.N5t,(async t=>{const e=t.K6t.adError,i=Z1(e)?X1(e):void 0;i&&(this.j6t(i)?await this.Q6t(t):this.J6t(i)?await this.$6t(i):this.t9t(i)&&this.e9t(i))})),this.qJt.bn(ls.k5t,(t=>{if(t.lnt&&(this.z4t.e4t(),this.q6t.i9t(t.lnt),this.s9t=0,t.lnt.n9t)){var e;const t=this.z4t.rI,i=Ht.eO;this.z4t.F4(i);const s=this.z4t.ER,n=this.z4t.rI;n!==t&&this.P6t(new Ys(s,n)),null==(e=this.qJt)||e.wI(this.z4t.r9t()),this.P6t(new ZT(s,i))}})),this.qJt.bn([ls.y5t,ls.g5t,ls.b5t,ls.zKt,ls.A5t],(t=>{t.lnt&&this.q6t.o9t(t.lnt,t.type,this.z4t.ER)})),this.qJt.bn(ls.b5t,this.h9t),this.qJt.bn(ls.w5t,this.a9t)}async switchToPlayerIfNoNextAd(){if(this.qJt){const t=this.qJt.u9t();t&&this.c9t(t)||(this.z4t.u5t()?await this.z4t.c5t():(this.z4t.l9t(),this.na.KR&&!this.na.PR&&this.na.xI()))}else if(this.z4t.u5t())await this.z4t.c5t();else{const t=this.z4t.KR;this.z4t.l9t(),t||this.na.xI()}}c9t(t){const e=t.d9t,i=null==e?void 0:e.R6t;return(null==e?void 0:e.x6t)!==i}Hp(){this.z4t.Nc&&(m(this.z4t.Nc),this.z4t.Nc=null)}t9t(t){return t.Tw===U1.T6t}J6t(t){return t.Tw===U1.k6t}j6t(t){return t.Tjt===W1.u6t}async $6t(t){var e;this.e9t(t);const i=[W1.j5t,W1.o6t,W1.v6t,W1.p6t];var s;this.z4t.bnt||ms(i,t.Tjt)||ms(i,null==(e=t.C6t)?void 0:e.Tjt)||(this.z4t.f9t.$4t=!1,null==(s=this.z4t.f9t.E4t)||s.k4t(),await this.switchToPlayerIfNoNextAd())}e9t(t){this.z4t.d3t(t)}async _9t(){this.q6t.K4t(),this.z4t.k4t(),"nonlinear"===this.z4t.F2t&&(this.q6t.v9t(-1,!1),this.z4t.m9t(void 0)),"nonlinear"!==this.z4t.F2t&&"none"!==this.z4t.F2t||this.z4t.u5t()&&await this.z4t.c5t(),this.z4t.g9t(),this.z4t.g2t?this.z4t.x1t():this.p9t()&&this.na._o(new Xs(this.na.xR()))}p9t(){return this.z4t.w9t&&!this.z4t.y9t&&this.na.PR}setCountdownTimer(){this.Hp(),this.z4t.Nc=p((()=>this.Z6t()),250)}async Q6t(t){void 0!==t.lnt&&(this.z4t.f9t.$4t=!1,this.z4t.k4t(),this.z4t.u5t()?await this.z4t.c5t():this.z4t.H6t(!0))}Y6t(t){this.z4t.ct!==t&&t>=0&&(this.z4t.d4(t),this.P6t(new $s(this.z4t.ct)))}X6t(t){this.z4t.r9t()!==t&&(0===t?this.z4t.b9t(t,!0,!1):this.z4t.b9t(t,!1,!1))}async A9t(){this.z4t.S9t&&void 0!==this.na.NR()&&(this.T9t=new da,await js(this.na.Ca(this.na.iu(),this.T9t.Uw),this.T9t),this.k9t&&this.na.RR(this.k9t),this.k9t=void 0)}Z6t(t){if(this.qJt){const t=this.qJt.E9t();t>this.z4t.ct&&this.Y6t(_.round(t))}const e=this.z4t.ER;(t||!this.z4t.KR&&e!==this.z4t.x9t)&&(this.z4t._o(new Al(e,void 0)),this.z4t.x9t=e)}nr(){this.T9t&&(this.T9t.jw(),this.T9t=void 0),this.R9t=!1,this.s9t=0}yn(){this.nr(),this.Ro()}constructor(t,e,i){super(),this.z4t=t,this.na=e,this.q6t=i,this.R9t=!1,this.T9t=void 0,this.k9t=void 0,this.s9t=0,this.h9t=t=>{if(!t.lnt||!t.lnt.d9t)return;const e=t.lnt.d9t;this.q6t.u3t(e.eOt,e.R6t,e.ZJt)},this.a9t=t=>{var e,i,s;if(this.s9t>=5)return;this.s9t++;const n=t.K6t;if(!function(t){return V(t)&&void 0!==t.E6t&&void 0!==t.R6t}(n))return;const r=null==(s=this.qJt)||null==(i=s.u9t())||null==(e=i.d9t)?void 0:e.eOt;void 0!==r&&this.q6t.u3t(r,n.R6t,n.E6t)},this.N6t=async t=>{t.K6t.I9t&&await this.$6t(t.K6t.I9t)},this.B6t=async()=>{this.R9t=!0,this.z4t.k4t(),await this.L6t()},this.O6t=t=>{if(!t.lnt)return;const e=t.lnt;this.z4t.m9t(e),this.z4t.ge(),this.z4t.C9t(),this.z4t.P9t=!0,this.q6t.D9t(e);const i=e.ct;if(this.Y6t(i),e.n9t){const t=this.z4t.ER,e=this.z4t.rI;this.z4t.F4(Ht.sO),this.P6t(new XT(t,e)),this.P6t(new ro(t,e)),this.P6t(new zT(t,e)),this.z4t.KR||this.P6t(new ko(this.z4t.ER)),this.setCountdownTimer(),this.Z6t(!0)}else this.z4t.x1t(),this.na.ge(),this.z4t.KR||this.na.xI()},this.F6t=t=>{var e;if(!t.lnt)return;const i=t.lnt;if(this.Hp(),this.q6t.v9t(this.z4t.ct,i.n9t),this.z4t.rI!==Ht.eO){const t=Ht.eO;this.z4t.F4(t);const e=this.z4t.ER;this.P6t(new Ys(e,t))}this.Y6t(NaN),this.z4t.P9t=!1,null==(e=this.qJt)||e.wI(this.z4t.r9t())},this.V6t=t=>{t.lnt&&(this.F6t(t),this.q6t.V6t(t.lnt,this.z4t.ER,this.z4t.ct))},this.W6t=t=>{t.lnt&&(this.q6t.v9t(-1,t.lnt.n9t),this.z4t.k4t(),!t.lnt.n9t&&this.z4t.u5t()&&this.z4t.c5t())},this.U6t=t=>{t.lnt&&(t.lnt.n9t?this.z4t.EI():this.na.EI())},this.G6t=()=>{var t;(this.z4t.P9t=!0,this.z4t.N9t)&&(null==(t=this.qJt)||t.EI(),this.z4t.N9t=!1)},this.M6t=t=>{var e;if(!t.lnt)return;this.z4t.S9t&&(this.k9t=this.na.xR(),this.na.NI(),this.na.AI=!0),this.z4t.M9t=!0;const i=t.lnt;this.q6t.Td(i);const s=i.ct;this.z4t.m9t(i),this.Y6t(s),this.z4t.H6t(!1),this.z4t.ge(),this.z4t.C3t(),this.z4t.S9t||this.na.be(),this.na.EI(),this.z4t.L9t(i);0===(null==(e=i.d9t)?void 0:e.eOt)||this.z4t._o(new za(this.z4t.ER))},this.L6t=async t=>{const e=null==t?void 0:t.lnt;this.z4t.M9t=!1,"linear"===this.z4t.F2t&&this.q6t.Md(),e&&e.ct>=0&&this.Y6t(e.ct),this.na.jd()===1/0&&this.z4t.B9t(),this.z4t.P9t=!1,this.R9t&&await this._9t(),this.z4t.H6t(!0);try{await this.A9t()}catch(t){return void(Je(t)||this._o(new HQ(t)))}if(this.z4t.x1t(),this.z4t.be(),this.na.PR||this.na.xI(),e&&this.z4t.m9t(e),this.z4t.w9t){if(this.z4t.S9t){var i;const t=this.na.TI(),e=null==(i=this.na.bt)?void 0:i.src;t&&e&&(t.src=e)}this.z4t.y9t=!0}this.na.AI=!1,this.z4t.u5t()&&await this.z4t.c5t()}}};r(),r();var Y1=class extends ys{get aQt(){return vt.f$t}constructor(t,e,i){super(t),this.O9t=e,this.F9t=i}};r(),r(),r();var K1=class extends Zi{set V9t(t){this.W9t=t}get V9t(){return this.W9t}get aQt(){return vt.Kh}h$t(){var t;return null==(t=this.U9t)?void 0:t.jqt}get G9t(){var t;return null==(t=this.U9t)?void 0:t.WYt}get bYt(){var t;return null==(t=this.U9t)?void 0:t.bYt}get VN(){var t;return null==(t=this.U9t)?void 0:t.VN}get oH(){var t;return null==(t=this.U9t)?void 0:t.oH}get H9t(){var t,e;return null!=(e=null==(t=this.U9t)?void 0:t.H9t)?e:[]}get Z9t(){var t,e;return null!=(e=null==(t=this.U9t)?void 0:t.Z9t)?e:[]}get X9t(){var t,e;return null!=(e=null==(t=this.U9t)?void 0:t.X9t)?e:[]}ka(){return function(t,e){return Jr(t,{bitrate:0,contentType:void 0,mediaUrl:void 0,traffickingParameters:void 0,traffickingParametersString:void 0,universalAdIds:[],get description(){return e.VN},get apiFramework(){return e.G9t},get creativeId(){return e.bYt},get title(){return e.oH},get wrapperAdIds(){return e.H9t},get wrapperAdSystems(){return e.Z9t},get wrapperCreativeIds(){return e.X9t}})}(Lo(this),this)}z9t(t){this.U9t=t;const e=j1(t);this.L2t(t.vKt,t.q9t,t.Y9t,t.ct,e,-1)}constructor(t,e){super(t,e),this.W9t=0,this.U9t=void 0}};function j1(t){return t.rYt.map((t=>new v1(t)))}var Q1=class extends Zi{ka(){return function(t,e){return Jr(t,{get adSystem(){return e.h$t()},get apiFramework(){return e.G9t},get bitrate(){return e.K9t},get contentType(){return e.Mk},get creativeId(){return e.bYt},get description(){return e.VN},get mediaUrl(){return e.CKt},get title(){return e.oH},get traffickingParameters(){return e.j9t},get traffickingParametersString(){return e.Q9t},get wrapperAdIds(){return e.H9t},get wrapperAdSystems(){return e.Z9t},get wrapperCreativeIds(){return e.X9t},get universalAdIds(){return e.hYt}})}(Lo(this),this)}z9t(t){this.U9t=t,this.L2t(t.vKt,t.q9t,t.Y9t,t.ct,j1(t),t.J9t),this.V2t=t.n9t?Es.Mjt:Es.M2t}get aQt(){return vt.f$t}h$t(){return this.U9t?Nc(this.U9t.jqt):void 0}get G9t(){return this.U9t?Nc(this.U9t.WYt):void 0}get K9t(){return this.U9t?this.U9t.$9t:0}get Mk(){return this.U9t?Nc(this.U9t.Mk):void 0}get bYt(){return this.U9t?Nc(this.U9t.bYt):void 0}get t8t(){return this.U9t?Nc(this.U9t.t8t):void 0}get VN(){var t;return null==(t=this.U9t)?void 0:t.VN}get CKt(){var t;const e=null==(t=this.U9t)?void 0:t.CKt;return Bo(e)?e:this.PKt}set CKt(t){this.PKt=t}get oH(){var t;return null==(t=this.U9t)?void 0:t.oH}get j9t(){return this.U9t?Nc(this.U9t.j9t):void 0}get Q9t(){return this.U9t?Nc(this.U9t.Q9t):void 0}get H9t(){var t,e;return null!=(e=null==(t=this.U9t)?void 0:t.H9t)?e:[]}get Z9t(){var t,e;return null!=(e=null==(t=this.U9t)?void 0:t.Z9t)?e:[]}get X9t(){var t,e;return null!=(e=null==(t=this.U9t)?void 0:t.X9t)?e:[]}get hYt(){var t,e;return null!=(e=null==(t=this.U9t)?void 0:t.hYt.map((t=>({adIdRegistry:t.e8t,adIdValue:t.i8t}))))?e:[]}constructor(t){super(t,Es.iE),this.U9t=void 0,this.PKt=void 0}};function Nc(t){return null===t?void 0:t}r(),r();var J1=class{get h2t(){return this.q6t.h2t}get s2t(){return this.s8t}get g2t(){return this.q6t.g2t}get snt(){var t;return null!=(t=this.q6t.snt)?t:null}get ent(){const t=this.q6t.n8t;return t?[t]:[]}get nnt(){return this.q6t.nnt}get rnt(){return this.q6t.rnt}hnt(t){this.q6t.hnt(t)}MD(){this.q6t.MD()}yn(){return Promise.resolve()}constructor(t,e){this.q6t=t,this.s8t=e}},$1=class{get r8t(){return this.o8t}get h2t(){return this.I3t}get g2t(){return this.h8t}get n8t(){return this.a$t}get snt(){return this.p$t}get nnt(){return on(this.w$t,(t=>{if(t.tI)return[];const e=t.zc;if(t===this.p$t&&void 0!==this.a$t){const t=e.indexOf(this.a$t);if(t>=0)return e.slice(t+1)}return e}))}get rnt(){return this.w$t.filter((t=>!t.tI))}constructor(t,e){this.I3t=t,this.w$t=[],this.h8t=!1,this.o8t=new J1(this,e)}};r();var t2=class extends Da{ka(){return new e2(this.lnt.int())}constructor(t){super("a8t",t)}},e2=class extends Ka{constructor(t){super("adimpression",t)}};r();var i2=class extends Ds{ka(){return new s2(this.lnt.int())}constructor(t){super("u8t"),this.lnt=t}},s2=class extends pe{constructor(t){super("adbuffering"),this.ad=t}};r();var n2=class extends Ds{ka(){return new r2}constructor(){super("c8t")}},r2=class extends pe{constructor(){super("admetadata")}},o2=class t extends $1{l8t(t,e){for(let i=0;i<t;i++){const t=new Q1(e);e.R2t(t),this.h2t._o(new Uu(t))}}a3t(t,e,i){let s=t;s===1/0&&(s=-1);const n=new Y1(s,i,e);this.w$t.push(n),e.o4t(n),this.h2t._o(new EF(n))}l5t(t,e){for(const i of this.w$t)S(i.eOt)&&i.O9t===t&&(i.eOt=e,this.h2t._o(new y1(i)))}Q4t(t,e){void 0===e&&(e=!1),e&&we(this.w$t,t),this.h2t._o(new Au(t))}K4t(){if(this.snt){this.Q4t(this.snt,!0);const t=Boolean(this.a$t&&this.a$t.F2t===Es.Mjt);this.d8t(void 0,t)}}n3t(t,e){const i=e.d9t;if(!i)return;const s=i.x6t-1,n=t.zc[s];return n.z9t(e),this.h2t._o(new R0(n)),n.sd.ZJt=i.ZJt,n}get g2t(){return this.f8t.g2t}_8t(t){if(!ms(this.v8t,t)){if(t){if(this.a$t===t)return;this.a$t=t;for(const e of this.m8t)this.z6t(e,t,this.f8t.ER)}else{if(!this.a$t)return;const t=new xn(this.a$t,this.a$t.sd.eOt);this.v8t.push(this.a$t),this.a$t=void 0,this.I3t._o(t)}En(this.m8t)}}d8t(t,e){if(t){var i;if((null==(i=this.snt)?void 0:i.eOt)===t.eOt)return;this.p$t=t,e&&this.h2t._o(new Ua(this.p$t))}else{if(!this.p$t)return;const t=new Hh(this.p$t);this.p$t=void 0,En(this.v8t),e&&this.I3t._o(t)}}g8t(t){return this.w$t.filter((e=>_s(e.eOt,t,.01)))[0]}static p8t(t,e){if(e.d9t)return t.zc[e.d9t.x6t-1]}Td(t){if(!t.d9t)return;const e=t.d9t,i=this.g8t(e.eOt);i&&(En(this.m8t),this.d8t(i,t.n9t))}Md(){this.snt&&this.h2t._o(new Hh(this.snt)),En(this.m8t),this.K4t()}D9t(e){if(!this.p$t&&e.d9t){const t=this.g8t(e.d9t.eOt);this.d8t(t,e.n9t)}if(this.p$t){const i=t.p8t(this.p$t,e);if(!i)return;this.n3t(this.p$t,e);const s=e.CKt;Bo(s)&&!Bo(i.CKt)&&(i.CKt=s,this.h2t._o(new R0(i))),this._8t(i),this.h2t._o(new cn(this.a$t,i.sd.eOt))}else 0}v9t(t,e){if(this._8t(void 0),!e&&this.snt){const t=this.snt;this.d8t(void 0,!1),this.Q4t(t)}}i9t(t){const e=t.d9t;if(!e)return;const i=this.g8t(e.eOt);if(!i)return;this.u3t(e.eOt,e.R6t,e.ZJt);const s=this.n3t(i,t);s&&this.h2t._o(new C0(s))}u3t(t,e,i){const s=this.g8t(t);if(!s)return;const n=s.zc.length;if(e>n){const t=e-n;this.l8t(t,s),s.ZJt=i,this.h2t._o(new y1(s))}}V6t(e,i,s){if(!this.p$t)return;const n=t.p8t(this.p$t,e);if(n){const t=i/s;this.h2t._o(new zo(n,t))}}o9t(e,i,s){if(!this.p$t)return;let n=this.a$t;if(!n){const s=t.p8t(this.p$t,e);if(!s||ms(this.v8t,s))return void this.m8t.push(i);n=s,this.n3t(this.p$t,e),this._8t(n)}this.z6t(i,n,s)}z6t(t,e,i){t===ls.x5t?this.h2t._o(new n2):t===ls.g5t&&e?this.h2t._o(new t2(e)):t===ls.y5t&&e?this.h2t._o(new i2(e)):t===ls.b5t&&e&&i?this.h2t._o(new cs(e,i)):t===ls.zKt&&e&&i?this.h2t._o(new Is(e,i)):t===ls.A5t&&e&&i&&this.h2t._o(new ks(e,i))}MD(){this.f8t.MD()}hnt(t){this.f8t.hnt(t)}nr(){const t=Boolean(this.a$t&&this.a$t.F2t===Es.Mjt);this._8t(void 0),this.d8t(void 0,t);for(const t of this.w$t)this.Q4t(t);En(this.w$t),En(this.m8t),En(this.v8t)}yn(){this.nr()}constructor(t,e){super(t,vt.f$t),this.f8t=e,this.m8t=[],this.v8t=[]}};function h2(t){const e=s.google.ima.settings;t.ads&&t.ads.vpaidMode&&s.google.ima.settings.setVpaidMode(function(t){const e=s.google.ima.ImaSdkSettings.VpaidMode;switch(t){case jn.ENABLED:return e.ENABLED;case jn.INSECURE:return e.INSECURE;case jn.DISABLED:default:return e.DISABLED}}(t.ads.vpaidMode)),e.setPlayerVersion("9.3.1"),e.setPlayerType("THEOplayer"),e.setAutoPlayAdBreaks(!0),e.setDisableCustomPlaybackForIOS10Plus(!a2(t));const i=function(t){var e,i,s;const n=null==(i=t.ads)||null==(e=i.googleIma)?void 0:e.language;if(void 0!==n)return n;const r=null==(s=t.ui)?void 0:s.language;if(Yt(r))return r;return}(t);i&&e.setLocale(i)}function a2(t){return Z.su&&t.allowNativeFullscreen}r();var u2=class t extends D1{get r2t(){return this.Z4t.r8t}get w8t(){return this.Z4t}get f9t(){return this.x4t}get S9t(){return a2(this.xQ)}y8t(t,e,i){e===Ca.tnt&&void 0!==i&&(this.p2t=i),this.x4t.U4t(t,e)}static get s2t(){return vt.f$t}get s2t(){return t.s2t}get b8t(){return this.xQ.ads.preload===IT.MIDROLL_AND_POSTROLL}hnt(t){const e=this.A8t();for(const i of e)pt(i.sources,i.timeOffset)||t.g6(i,Ca.$st,!1)}A8t(){const t=[],{ent:e,nnt:i}=this.r2t,s=[];for(const n of e.concat(i)){const e=n.sd.F9t;if(ms(s,e.IC))continue;const i=e.S4t(n.H9t);i>=0?t.push(...e.V3t.slice(i)):t.push(...e.V3t),s.push(e.IC)}for(const e of this.x4t.nnt)e.$3t||t.push(...e.V3t);return jm(t)}set F2t(t){this.V2t=t}get F2t(){return this.V2t}get zJt(){return this.qJt}set zJt(t){this.qJt=t,this.S8t=!1}xR(){if(!this.zJt)return 0;const t=this.zJt.E9t();return S(this.ct)||t<0?0:this.ct-t}RR(t,e){}jd(){return this.MA||NaN}d4(t){this.MA=t}XR(){return this.na.ZR}zR(t){this.b9t(this.gI,t,!0)}jR(){return this.dZ}H6t(t){this.dZ=t}get P9t(){return this.T8t}set P9t(t){this.T8t=t}get bnt(){return this.p2t}get w9t(){return this.k8t}get N9t(){return this.E8t}set N9t(t){this.E8t=t}get y9t(){return this.x8t}set y9t(t){this.x8t=t}fI(){var t,e,i;return null!=(i=null==(e=this.zJt)||null==(t=e.u9t())?void 0:t.Y9t)?i:0}mI(){var t,e,i;return null!=(i=null==(e=this.zJt)||null==(t=e.u9t())?void 0:t.q9t)?i:0}pR(){return[]}b2t(t){this.I4t=t,this.x4t.b2t(t)}n5t(){!this.S8t&&this.zJt&&(this.zJt.Sn(),this.S8t=!0)}m9t(t){this.F2t=t?t.n9t?"linear":"nonlinear":"none"}aI(){return se.pB().ks()}pI(){return this.na.gI}wI(t){this.b9t(t,this.ZR,!0)}r9t(){return this.na.ZR?0:this.na.gI}b9t(t,e,i){const s=this.na.gI!==t||this.na.ZR!==e;s&&(this.na.gI=t,this.na.ZR=e),this.zJt&&i&&this.zJt.wI(this.r9t()),s&&this._o(new ns(this.ER,this.gI))}DR(){return!1}NR(){if(this.R8t&&this.p2t)return this.R8t}LR(){if(this.I8t&&this.p2t)return this.I8t}oI(){return this.O4}F4(t){this.O4=t,this._o(new hu(this.ER,t))}get M9t(){return this.C8t}set M9t(t){this.C8t=t}kI(){this.na.vn(Ti.ho,this.P8t),this.mo||(this.mo=!0,this.x4t.kI(),this.C9t())}async xI(){if(this.D8t)return;this.N8t.jw(),this.N8t=new da;const t=this.KR;this.H6t(!1),this._o(new $(this.ER)),this.M8t()||(this.S9t||this.na.be(),this._o(new za(this.ER))),this.P9t||(this.N9t=!1);const e=Boolean(this.zJt);this.D8t=this.x4t.W4t();try{await this.D8t}finally{this.D8t=void 0}try{J(this.N8t.Uw)}catch(t){return}if(this.mo||this.P8t(),!this.R8t||!this.p2t)if(this.zJt){if(t)if(e)try{J(this.N8t.Uw),this.zJt.L8t(),this._o(new ko(this.ER))}catch(t){return}else this.n5t()}else this.p2t||(this.x1t(),this.y2t.xI())}EI(){var t;this.KR||(this.H6t(!0),this._o(new ul(this.ER))),this.N8t.jw(),this.P9t?null==(t=this.zJt)||t.EI():this.N9t=!0}MD(){var t;null==(t=this.zJt)||t.MD()}g9t(){this.zJt&&(this.O8t.B8t(),this.zJt.RI(),this.zJt.Xw(),this.zJt=void 0,this.F2t="none",this.S8t=!1)}async RI(){var t;this.x9t=0,this.x4t.nr(),this.N8t.jw(),this.H6t(!0),this.k8t=!1,this.x8t=!1,this.P9t=!1,this.Z4t.nr(),this.g9t(),this.l9t(),null==(t=this.F8t)||t.nr(),this.N9t=!1,this.O8t.Xw()}ge(){this.V8t.ge(),this.S9t&&this.na.ge()}be(){this.V8t.be()}W8t(){return Boolean(this.zJt)&&ms(this.zJt.U8t(),-1)&&!this.k8t}e4t(){this.x4t.e4t()}u5t(){return this.x4t.u5t}k4t(){this.x4t.k4t()}c5t(){return this.x4t.c5t()}c2t(t){if(this.W8t()){if(t.type===Ti.zy&&this.na.PR)return!0;if(t.type===Ti.Dy)return this.k8t=!0,this.O8t.B8t(),!0}return!1}M8t(){return Boolean(this.zJt&&this.zJt.u9t())}async s5t(t){try{this.g9t();const e=this.G8t();this.V8t.xj(),this.zJt=await this.O8t.s5t(t,this.F8t,e),this.H8t(this.zJt)}catch(t){this.Z8t.$6t(t)}}H8t(t){if(t.wI(this.r9t()),this.x4t.H4t===O1.O4t){const e=t.U8t();if(e.length)for(const t of e)this.Z4t.a3t(t,this.x4t.E4t);else this.Z4t.a3t(this.x4t.E4t.od,this.x4t.E4t)}this.Z8t.nr(),this.Z8t.D6t(t)}TI(){if(this.qJt&&this.S9t&&this.M8t())return this.na.TI()}SI(){return this.S9t&&this.g2t?this.na.Sa:super.SI()}G8t(){const t=!!(this.x4t.H4t===O1.O4t)&&this.b8t;let e,i;void 0!==this.xQ.ads.googleIma.uiElements?e=this.xQ.ads.googleIma.uiElements:this.xQ.ads.showCountdown||(e=[]),void 0!==this.xQ.ads.allowedMimeTypes&&(i=this.xQ.ads.allowedMimeTypes);return{X8t:i,z8t:e,q8t:t,K9t:this.xQ.ads.googleIma.bitrate,Y8t:void 0,K8t:this.I4t}}C9t(){if(this.qJt){const t=this.G8t();this.qJt.j8t(t)}}d3t(t){this.R8t=new hk(ok.ADVERTISEMENT_ERROR,t.wb),this.I8t=new A(Qa.AD_ERROR,"There was a problem playing ads.",this.R8t),this.h2t._o(Fh.l2t(t))}l9t(){this.g2t&&(this.na.ge(),this.x1t(),this.be())}B9t(){var t;if(this.na.xR()===1/0||0===this.na.aI().length)return;(null==(t=this.x4t.E4t)?void 0:t.G3t)&&-1!==this.Q8t&&(this.na.RR(this.na.xR()+this.Q8t),this.Q8t=-1)}L9t(t){var e,i;this.Q8t=null!=(i=null==(e=t.d9t)?void 0:e.ZJt)?i:-1}x1t(){super.x1t(),this.na.ge(),this.S9t&&!this.na.PR&&this.na.xI()}B3t(){this.S9t||super.B3t()}async yn(){this.Z8t.vn(yo.fa,this.J8t),await super.yn(),this.g9t(),this.O8t.vn("$8t",this.t7t),this.O8t.Xw(),this.V8t.Xw(),this.x4t.yn(),this.Z8t.yn()}constructor(t,e,i,s,n,r,o){super(t,e),this.mo=!1,this.p2t=!1,this.R8t=void 0,this.I8t=void 0,this.Q8t=-1,this.V2t="none",this.C8t=!1,this.S8t=!1,this.N8t=new da,this.T8t=!1,this.E8t=!1,this.t7t=t=>{this.h2t._o(t)},this.J8t=t=>{this.R8t=new hk(ok.ADVERTISEMENT_ERROR,"Error while recovering from failed IMA ad.",t.error.message),this.I8t=ck(this.R8t)},this.x9t=NaN,this.P8t=()=>{this.mo||this.kI()},this.xQ=i,this.dZ=!0,this.MA=NaN,this.O4=Ht.eO,this.k8t=!1,this.x8t=!1,this.Z4t=new o2(this.h2t,this),this.Z8t=new q1(this,this.na,this.Z4t),this.Z8t.bn(yo.fa,this.J8t),this.na.bn(Ti.ho,this.P8t),this.x4t=new F1(this,this.na,this.y2t,s,this.Z4t),this.F8t=o,this.O8t=r,this.V8t=n,this.be(),this.O8t.bn("$8t",this.t7t)}};r();var c2=class{registerWebImaAdPlayerConstructor(t){this.e7t=t}createAdPlayer(t,e,i){return l2()&&this.e7t?this.e7t(t,e,i):void 0}};function l2(){if(Boolean(s.google&&s.google.ima)){return!(1===w.keys(s.google.ima).length&&s.google.ima.dai)}return!1}c2.Vg=new c2;var d2=class{get $1t(){return u2.s2t}CZ(t){return t&&t.integration===lu.GOOGLE_IMA}t2t(t,e,i){return c2.Vg.createAdPlayer(t,e,i)}g6(t,e,i,s){i.y8t(t,e,s)}qz(t){const e=G$(t.sources);if(!e)return;const i={integration:lu.GOOGLE_IMA,sources:e,omidAccessModeRules:z1(t.omidAccessModeRules)},s=Ic(t.timeOffset);return void 0!==s&&(i.timeOffset=s),i}};yh.Vg.PZ(new d2),r(),r(),r(),r();var f2=class extends Ds{ka(){return new _2}constructor(){super("g$t")}},_2=class extends pe{constructor(){super("adloaded")}},Uc=-1,v2=class{get YJt(){return this.w$t}get i7t(){return this.s7t}get Qut(){return this.Rp}get n7t(){return this.j3t}get r7t(){return this.o7t}get od(){if(S(this.h7t)){const t=ja.hQt(this.j3t,this.JJt.t.jd());void 0===t||S(t)||(this.h7t=t)}return this.h7t}a7t(){return this.Rp<this.w$t.length}Bc(){let t;return this.Rp<this.w$t.length&&(t=this.w$t[this.Rp],this.Rp++),t}u7t(t){t.Ojt=this,this.w$t.push(t)}async c7t(t){let e=!1;for(const i of this.w$t)try{await i.$n(),e=!0}catch(e){0,we(this.w$t,i);const s=i.wnt.sources,n="string"==typeof s?s:s.src;t._o(Fh.d2t(e,n))}return this.o7t=!0,e}i$t(){this.e$t=!0}t$t(){return this.e$t}l7t(){return this.w$t.some((t=>p0(t).some((t=>t.sYt))))}constructor(t,e){this.w$t=[],this.e$t=!1,this.j3t=t,this.Rp=0,this.JJt=e,this.h7t=NaN,this.o7t=!1,this.s7t=new A0(this,this.JJt)}},m2=class t extends sn{get d7t(){let t=0;for(const e of this.f7t)e.t$t()||(t+=1);return t}_7t(){this.m7t.v7t()}Sn(){this.Mo(),this.g7t.bn("mnt",this.m7t.p7t)}Tn(){this.Fo(),this.g7t.vn("mnt",this.m7t.p7t),this.s4=this.jO,this.m7t.nr();for(const t of this.f7t)t.i$t();En(this.f7t)}Mo(){this.w7t||(this.na.bn(Ti.hb,this.y7t),this.w7t=!0)}Fo(){this.w7t&&(this.na.vn(Ti.hb,this.y7t),this.w7t=!1)}get nnt(){return this.f7t}b7t(){return this.A7t(new Al(Uc,void 0))}S7t(t){return this.T7t(t,0,0).length>0}k7t(t,e){let i,s=0;for(const n of this.f7t){if(n.t$t())continue;const r=n.od;r>=t&&r<=e&&r>=s&&!S(r)&&(i=n,s=i.od)}return i}E7t(t){return this.A7t(new Al(t,void 0))}x7t(){if(!this.R7t&&void 0!==this.I4t){this.R7t=!this.f7t.some((t=>S(t.od)));for(const t of this.f7t)t.od!==Uc&&t.od<=this.I4t&&!t.t$t()&&t.i$t()}}I7t(t){for(const e of t)e.i$t();this.S3t.C7t(t),0===this.d7t&&this.Fo()}T7t(t,e,i){return this.f7t.filter((s=>{if(s.t$t())return!1;const n=s.od;return this.P7t(n,t)||this.D7t(n,t,e,i)}))}P7t(t,e){switch(e){case 0:return 0===t;case Uc:return t===Uc;default:return!1}}D7t(t,e,i,s){if(t<0)return!1;const n=t-e;return-1!==n&&n<=i&&n>=-s}N7t(e){if(e&&e.length>0){for(const i of e){const e=t.T4t(i.eOt);let s=this.egt(i);-1===s&&(this.R7t=void 0===this.I4t,this.f7t.push(new v2(e,this.M7t)),s=this.f7t.length-1);this.f7t[s].u7t(i)}this.Mo()}}static T4t(t){switch(t){case"start":case"00:00:00":case"00:00:00.000":case"0%":case"0":return"0";case"end":case"100%":return"-1";default:return t}}egt(e){const i=t.T4t(e.eOt);return rn(this.f7t,(e=>i===t.T4t(e.n7t)))}L7t(t){we(this.f7t,t)}b2t(t){this.I4t=t,this.R7t=void 0===t}constructor(t,e,i,s){super(),this.R7t=!1,this.y7t=t=>ah(this.A7t(t)),this.A7t=async t=>{this.x7t();const e=t.currentTime,i=t.currentTime!==Uc?this.k7t(this.s4,t.currentTime):this.T7t(t.currentTime,0,0)[0];let s,n;const r=this.na.jd()-10;if(n=this.S7t(Uc)&&_.ceil(e)===_.ceil(r)?this.T7t(Uc,10,0).filter((t=>!t.r7t)):this.T7t(e,10,0).filter((t=>!t.r7t)),n.length){const t=(await Promise.all(n.map((t=>t.c7t(this.g7t))))).some((t=>!0===t));t&&this._o(new f2),(!t||!this.m7t.B7t||n[0].od<this.m7t.B7t.od)&&(s=n[0])}i&&(i!==this.m7t.B7t&&(s=i),this.I7t([i])),s&&(this.m7t.p7t(),this.m7t.B7t=s,await this.m7t.v7t()),S(this.na.jd())||(this.s4=t.currentTime)},this.na=t,this.S3t=e,this.M7t=new b0(this.S3t,this.na),this.I4t=void 0,this.R7t=!1,t.jd()!==1/0?this.jO=0:this.jO=t.xR(),this.s4=this.jO,this.f7t=[],this.g7t=i,this.m7t=s,this.w7t=!1}};r(),r();var g2=class extends sn{get O7t(){return this.b0t}get h2t(){return this.I3t}F7t(){this.V7t(),this.W7t(),this.YG=void 0}U7t(t){this.G7t=this.G7t.concat(t)}H7t(t){this.Z7t=this.Z7t.concat(t)}W7t(){this.G7t=[]}V7t(){this.Z7t=[]}X7t(t){for(const e of this.G7t)e.WX===t&&Ir(e.eventURL)}ge(){this.O7t.style.display=""}be(){this.O7t.style.display="none"}yn(){this.Ro(),this.I3t.Ro(),ze(this.b0t)}constructor(t,e){super(),this.Z7t=[],this.G7t=[],this.YG=void 0,this.I3t=new sn,this.z7t=t=>{t.stopPropagation(),this.q7t()},this.q7t=()=>{for(const t of this.Z7t)for(const e of t.eKt)Ir(e.uri)},this.b0t=h.createElement("div"),this.b0t.style.display="none",this.Y7t=t,this.K7t=e}};function p2(t,e){let i=e;if(!function(t){return"ui"in t}(t))return i;const s=t.ui.language;let n;if(Yt(s)){const e=t.ui.languages;if(!e)return i;n=e[s]}else n=s;return n&&n[e]&&(i=n[e]),i}r(),r();var w2={[Bc.qC]:1,[Bc.YC]:2,[Bc.KC]:2};function y2(t,e){const i=e?e.map((t=>t.toLowerCase())):e;return Ii(t.filter((t=>{const e=t.type.toLowerCase();return!!$c(i)&&-1!==i.indexOf(e)&&E$(e)})),((t,e)=>w2[t.type]-w2[e.type])).map(b2)}function b2(t){return Vc({src:t.contentURL,type:t.type,isAdvertisement:!0})}function A2(t,e){return gW(S2(t),S2(e))}function S2(t){return{Ti:t.height,ji:t.width}}function T2(t,e,i,s){const n=function(t,e,i,s){let n,r=1/0;const o=t.filter((t=>!E$(t.type))).filter((t=>void 0===s||-1!==s.indexOf(t.type)));if(o.length){for(const t of o){const s=(_.abs(t.width/e-1)+_.abs(t.height/i-1))/2;s<r&&(r=s,n=t)}return n||o.sort(A2)[0]}}(t.TKt,e.width,e.height,i),r=y2(t.TKt,i);if(n){const t=b2(n);t&&r.push(t)}var o;r.length>0&&(t.CKt=null==(o=r[0].src)?void 0:o.trim());return _c({sources:r},s)}var k2=class extends g2{get j7t(){return this.Q7t}get ER(){return this.J7t.ER}get ct(){let t=this.J7t.ct;return S(t)&&this.wKt&&(t=this.wKt.ct||0),t}get PR(){return this.J7t.PR}get ZR(){return this.J7t.ZR}set ZR(t){this.J7t.ZR=t,t?this.X7t(sc.MKt):this.X7t(sc.LKt)}get KR(){return this.J7t.KR}get rI(){return this.J7t.rI}get gI(){return this.J7t.gI}set gI(t){this.J7t.gI=t}get dI(){return this.J7t.dI}get vI(){return this.J7t.vI}get $7t(){return this.tte}xI(){this.J7t.KR&&(this.J7t.xI(),this._o(new $(this.ER)),this.Q7t&&this.X7t(sc.BKt),this.Q7t=!0)}EI(){this.J7t.KR||(this.J7t.EI(),this._o(new ul(this.ER)),this.X7t(sc.zy))}async RI(){var t;null==(t=this.GT)||t.jw(),this.GT=void 0,this.be(),this.Q7t=!1,this.ete=!0,this.ite(),this.ste(),await this.nte()}rte(t){void 0===t&&(t=!0),this.Q7t=!1,t&&this.X7t(sc.qKt),this.be(),this.K7t()}ote(){var t;const e=null==(t=this.S3t.Ma)?void 0:t.mi,i=new W0(this.Ku,e);return this.O7t.appendChild(i.we),i.bn("MD",this.hte),i}ate(){this.wKt&&this.wKt._Kt.QYt&&(this.S0t=new L0(this.O7t),this.S0t.B$t=this.wKt._Kt.QYt,this.S0t.bn("clickstart",this.ute),this.S0t.bn("click",this.q7t))}cte(t,e){for(const i of this.G7t)if(i.WX===sc.qy){const s=g$(i.nc,e);void 0!==s&&this.s4<s&&s<=t&&Ir(i.eventURL)}}async dte(){if(!this.wKt||!this.fte)return;const t=T2(this.wKt,this.fte,this.MT.ads.allowedMimeTypes,this.MT);if(!t.sources.length)return await this.J7t.nr(),this.Y7t(""),void this.wKt.kYt();this.GT=new da,this.ete=!0,await js(this.J7t.Ca(t,this.GT.Uw),this.GT),this.J7t.ge(),this.wKt.kYt(),this.ate()}async _te(t,e,i){this.tte=t,this.wKt=t.sYt,this.J7t.bn(Ti.hb,this.vte),this.J7t.bn(Ti.Iy,this.mte),this.J7t.bn(Ti.ub,this.pte),this.J7t.bn(no,this.Ds),this.wKt.cYt&&0!==this.wKt.cYt.length&&this.U7t(this.wKt.cYt),this.wKt._Kt&&this.H7t(this.wKt._Kt),this.YG=e,this.fte=i,0!==this.wKt.TKt.length&&(this.J7t.bn(yo.fa,this.wte),await this.dte(),this.J7t.bn(Ti.Dy,this.yte),this.J7t.bn(Ti.hb,this.bte),this.J7t.bn(Zc.UL,this.Ate),this.J7t.bn(Ti.jy,this.Ds))}ZQt(){this.j7t&&this.Ste&&this.hte()}get Ste(){return this.wKt&&-1!==this.wKt.xKt&&this.J7t.ER>=this.wKt.xKt}Tte(){this.X7t(sc.fTt),this.tte&&this.h2t._o(new cn(this.tte,this.ER))}async nte(){this.J7t.vn(yo.fa,this.wte),this.J7t.vn(Ti.Dy,this.yte),this.J7t.vn(Ti.hb,this.bte),this.J7t.vn(Zc.UL,this.Ds),this.J7t.vn(Zc.UL,this.Ate),this.J7t.vn(Ti.jy,this.Ds),this.J7t.vn(Ti.hb,this.vte),this.J7t.vn(Ti.Iy,this.mte),this.J7t.vn(Ti.ub,this.pte),this.J7t.vn(no,this.Ds),this.tte&&(this.tte.i$t(),this.h2t._o(new xn(this.tte,this.ER))),this.kte(),this.F7t(),this.ite(),this.ste(),this.tte=void 0,this.wKt=void 0,this.fte=void 0,await this.J7t.nr(),this.J7t.be(),this.O7t.style.cursor="",this.Ete=0,this.s4=-1,this.xte&&(this.Rte.nte(),this.xte=!1)}kte(){this.S0t&&(this.S0t.Xw(),this.S0t=void 0)}ste(){this.Ite&&(ze(this.Ite),this.Ite=void 0)}ite(){this.E0t&&(this.E0t.yn(),this.E0t=void 0)}Cte(){this.xte=!0}Pte(){var t;this.Ite||(this.Ite=h.createElement("div"),this.Ite.className="theoplayer-ad-overlay-component theo-ad-remaining-container",this.O7t.appendChild(this.Ite));const e=null==(t=this.tte)?void 0:t.sd;if(!e)return;const i=e.zc.filter(x0);let s=p2(this.MT,"The content will play in")+" "+_.round(e.XJt)+" "+p2(this.MT,"seconds");if(i.length>1){const t=i.filter((t=>t.t$t())).length;s+=". "+p2(this.MT,"Ad")+" "+(t+1)+"/"+i.length}wu(this.Ite,s)}constructor(t,e,i,s,n,r,o){super(t,e),this.Rte=i,this.MT=s,this.S3t=n,this.Ku=r,this.J7t=o,this.Q7t=!1,this.Ete=0,this.s4=-1,this.GT=new da,this.ete=!0,this.yte=()=>{this.rte()},this.Ate=()=>{this.GT=void 0,this.Q7t||(this.Tte(),this.Q7t=!0),this.ete&&(this.ete=!1,this.S3t._7t()),this.O7t.style.display="block",this.J7t.vn(Zc.UL,this.Ate),this.Q7t=!0},this.bte=()=>{const t=this.ER,e=this.ct,i=t/e;(0===this.Ete&&i>=.25?(this.X7t(sc.ZKt),this.Ete=1):1===this.Ete&&i>=.5?(this.X7t(sc.zKt),this.Ete=2):2===this.Ete&&i>=.75&&(this.X7t(sc.XKt),this.Ete=3),this.cte(t,e),this.Pte(),this.s4=t,this.wKt)&&(-1!==this.wKt.xKt&&this.wKt.xKt<this.wKt.ct&&(null!=this.E0t||(this.E0t=this.ote()),this.ER<this.wKt.xKt?this.E0t.H$t(this.wKt.xKt-this.ER):this.E0t.X$t()))},this.wte=()=>{var t,e;this.GT=void 0,this.J7t.vn(yo.fa,this.wte),this.ete=!0,null==(t=this.YG)||t.bjt(S$.mjt),this.Q7t=!1,this.J7t.be();const i=(null==(e=this.J7t.bt)?void 0:e.src)||"";this.Y7t(i)},this.vte=()=>{this.Ds(new Al(this.ER,void 0))},this.mte=()=>{this.Ds(new $s(this.ct))},this.pte=()=>{this.Ds(new ns(this.ER,this.gI))},this.ute=()=>{this.S3t.EI()},this.hte=()=>{this.tte&&(this.X7t(sc.FKt),this.h2t._o(new zo(this.tte,this.ER/this.ct)),this.rte(!1))},this.O7t.className="theoplayer-ad-linear",this.O7t.style.zIndex="10",Zo(this.O7t),this.J7t.be(),this.xte=!1}};r(),r();var E2=class t extends Co{get we(){return this.Vs}z$t(){this.we.addEventListener("mouseup",this.q$t),this.we.addEventListener("touchend",this.q$t),this.we.addEventListener("mousedown",this.Dte)}Z$t(){this.we.removeEventListener("mouseup",this.q$t),this.we.removeEventListener("touchend",this.q$t),this.we.removeEventListener("mousedown",this.Dte)}static mr(){const t=h.createElement("div");return t.className="theoplayer-ad-nonlinear-close",t.style.position="absolute",t.style.right="0",t.style.top="0",t.style.cursor="pointer",t.style.fontSize="1.7em",t.style.lineHeight="0.75em",t}yn(){this.Z$t(),ze(this.Vs)}constructor(){super(),this.q$t=t=>{this._o(new pe("MD")),this.Dte(t)},this.Dte=t=>{t.stopPropagation()},this.Vs=t.mr(),this.z$t()}},x2=class extends g2{get Nte(){return this.Mte}get Lte(){return this.pu}F7t(){super.F7t(),this.O7t&&Sh(this.O7t)}async _te(t,e,i){this.u$t&&this.nte(),this.Mte=t,this.u$t=t.nYt,0!==this.u$t.cYt.length&&this.U7t(this.u$t.cYt),this.YG=e,0!==this.u$t.aYt.length&&(this.H7t(this.u$t.aYt[0].pYt),this.O7t.addEventListener("error",this.Bte),this.O7t.addEventListener("load",this.Ote),await this.dte(),this.Fte())}ZQt(){var t;if(void 0!==this.Vte)return;const e=null==(t=this.u$t)?void 0:t.aYt[0];e&&e.sd&&-1!==e.sd.xKt&&(this.X7t(sc.FKt),this.h2t._o(new zo(this.Mte,0)),this.Wte())}Tte(){void 0!==this.Mte&&this.h2t._o(new cn(this.Mte,this.S3t.ER))}RI(){this.nte(),this.Mte=void 0,this.u$t=void 0}nte(){this.Ute(),void 0!==this.Mte&&(this.Mte.i$t(),this.h2t._o(new xn(this.Mte,this.S3t.ER))),this.F7t(),this.Gte(),void 0!==this.Vte&&(v(this.Vte),this.Vte=void 0)}Ute(){this.O7t.removeEventListener("load",this.Ote),this.O7t.removeEventListener("error",this.Bte)}async dte(){const t=h.createElement("div");t.className="theoplayer-ad-nonlinear-content",t.style.position="relative",t.style.display="inline-block";const e=this.u$t.aYt[0],i=h.createElement("a");if(e.pYt.QYt&&(i.href=e.pYt.QYt,i.target="zu",i.setAttribute("rel","noopener")),e._Yt){const t=e._Yt,s=h.createElement("iframe");s.src=t.cjt,i.appendChild(s)}else if(e.dYt){const t=e.dYt,s=h.createElement("img");s.src=t.cjt,i.appendChild(s)}else if(e.mYt){const t=e.mYt,s=h.createElement("iframe");s.src=t.cjt,i.appendChild(s)}e.kYt(),i.addEventListener("mousedown",this.z7t),i.addEventListener("touchend",this.z7t),this.O7t.firstChild&&(Sh(this.O7t),this.nte()),t.appendChild(i),this.O7t.appendChild(t),this.ge()}Fte(){var t;if(!this.u$t)return;const e=null==(t=this.u$t.aYt[0].sd)?void 0:t.xKt;void 0!==e&&-1!==e&&(this.Vte=s.setTimeout(this.Hte,1e3*e))}Gte(){this.pu&&(this.pu.vn("MD",this.Zte),this.pu.yn()),this.pu=void 0}get Xte(){return this.S3t.zte()}constructor(t,e,i){super(t,e),this.Ote=()=>{this.Ute(),this.X7t(sc.JKt),this.K7t()},this.Bte=t=>{var e,i;this.Ute(),null==(e=this.YG)||e.bjt(S$.pjt);const s=null==(i=this.u$t)?void 0:i.aYt[0];var n,r;const o=null!=(r=null!=(n=null==s?void 0:s._Yt)?n:null==s?void 0:s.dYt)?r:null==s?void 0:s.mYt;var h;this.Y7t(null!=(h=null==o?void 0:o.cjt)?h:"")},this.Wte=()=>{this.be(),Sh(this.O7t),this.K7t(),this.Mte=void 0,this.u$t=void 0},this.Hte=()=>{this.pu||(this.Vte=void 0,this.pu=new E2,this.O7t.children[0].appendChild(this.pu.we),this.pu.bn("MD",this.Zte))},this.Zte=()=>{this.X7t(sc.FKt),this.ZQt()},this.O7t.className="theoplayer-ad-nonlinear",this.O7t.style.position="absolute",this.O7t.style.width="100%",this.O7t.style.bottom="3em",this.O7t.style.zIndex="10",this.O7t.style.textAlign="center",this.S3t=i}};r();var R2=class{static async qte(t,e,i){let s=[],n=t.shift();for(;n;){try{const t=await(new P$).Cjt(n,e);s=s.concat(t)}catch(t){0;const e=Fh.d2t(t,n.sources.src);i._o(e)}n=t.shift()}return s}};r(),r(),r();var I2=class extends Ds{ka(){return new C2}constructor(){super("wat")}},C2=class extends pe{constructor(){super("statechange")}};r();var Wt=function(t){return t.IDLE="idle",t.LOADING="loading",t.DONE="done",t.ERROR="error",t.EVICTED="evicted",t}({});r(),r();var P2=class{get Zu(){return this.tc}get V(){return this.tc.length}get wa(){return this.eu||(this.eu=this.ka()),this.eu}fC(t){return this.tc[t]}kO(t){this.tc.push(t),this.eu&&this.eu.push(t.wa),this.Yte(t)}Kte(t){for(const e of t)this.kO(e)}jte(t,e){e>=0&&e<=this.tc.length&&(this.tc.splice(e,0,t),this.eu&&this.eu.splice(e,0,t.wa),this.Yte(t))}EO(t){return ms(this.tc,t)}eT(t){this.Qte(this.tc.indexOf(t))}Qte(t){if(!(t>=0&&t<this.tc.length))return;const e=this.tc[t];uu(this.tc,t),this.eu&&uu(this.eu,t),this.Jte(e)}Fb(){const t=this.tc.slice();En(this.tc),this.eu&&En(this.eu);for(const e of t)this.Jte(e)}constructor(){this.tc=[],this.eu=void 0}},D2=class extends P2{ka(){return function(t){const e=function(t){const e=t.Zu.map((t=>t.wa));return e.item=e=>{const i=0|e,s=t.fC(i);return s&&s.wa||void 0},e}(t),i=new rt(t,e);return e.addEventListener=(t,e)=>{i.bn(t,e)},e.removeEventListener=(t,e)=>{i.vn(t,e)},e}(this)}bn(t,e){this.$te.bn(t,e)}oy(t){this.$te.oy(t)}Ro(){this.$te.Ro()}_o(t){this.$te._o(t)}vn(t,e){this.$te.vn(t,e)}vy(t){this.$te.vy(t)}gy(t){this.$te.gy(t)}py(t,e){return this.$te.py(t,e)}constructor(...t){super(...t),this.$te=new sn,this.Ds=t=>{this._o(t)}}};r();var N2=class extends pe{constructor(t){super("addtask"),this.task=t}},M2=class extends Ds{ka(){return new N2(this.eee.wa)}constructor(t){super("iee"),this.eee=t}};r();var L2=class extends pe{constructor(t){super("removetask"),this.task=t}},B2=class extends Ds{ka(){return new L2(this.task.wa)}constructor(t){super("see"),this.task=t}},O2=class extends D2{Yte(t){this._o(new M2(t))}Jte(t){this._o(new B2(t))}constructor(){super()}},Ft=class extends Co{async kI(){await this.nee(),this.Iat("initialised")}async nee(){try{await this.ree()}catch(t){0}}async ree(){const t=await this.d_.Trt();for(const e of t){const t=this.hee.oee(e.id,e.sourceDescription,e.parameters,this.aee);this.uee(t),this.HT.kO(t),await t.cee}}get Yk(){return this.Rat}Iat(t){this.Rat=t,this._o(new I2)}get lee(){return this.HT}oee(t,e,i){void 0===i&&(i="persistent");const s=this.hee.dee(t,e,i);return this.fee(s,i),this.HT.kO(s),this.uee(s),s}async fee(t,e){try{await this._ee(t,e)}catch(t){throw g("Unable to persist task - "+t)}}async _ee(t,e){await this.d_.brt({key:t.o,id:t.o,sourceDescription:t.Cc,parameters:t.pT},e)}uee(t){t.bn("wat",(()=>{t.Yk===Wt.EVICTED&&this.HT.eT(t)}))}constructor(t,e,i){super(),this.Rat="uninitialised",this.HT=new O2,this.hee=e,this.aee=i,this.d_=t,this.kI()}};r(),r(),r(),r();var F2=class{get vB(){return this.vee}get mee(){return this.gee}get pee(){return this.wee.vB}get yee(){let t=0,e=0;return this.TO.forEach((i=>{t+=i.timeRanges.vB,e+=i.totalQualityDurationToCache})),0===e?0:_.min(1,t/e)}get wee(){return this.bee}sF(t){return!!Ai(this.TO,t.TO)&&(!!_f(this.gee,t.gee)&&(!!_f(this.vB,t.vB)&&(!!_f(this.pee,t.pee)&&this.wee.aB(t.wee))))}constructor(t,e,i){if(this.gee=t,this.TO=e,this.vee=i,0===this.TO.size)this.bee=se.pB();else{let t=new se([-1/0,1/0]);this.TO.forEach((e=>{t=t.jn(e.timeRanges)})),this.bee=t}}};F2.QUALITY_TIME_RANGES_NULL_OBJECT=Oh(),F2.CACHE_PROGRESSION_NULL_OBJECT=new F2(0,F2.QUALITY_TIME_RANGES_NULL_OBJECT,NaN),F2.Aee=F2.CACHE_PROGRESSION_NULL_OBJECT,r(),r(),r(),r();var V2=class extends pe{constructor(){super("progress")}},W2=class extends Ds{ka(){return new V2}constructor(){super("z2t")}};r(),r();var U2=class extends ri{get name(){return"See"}constructor(t,e){super(t,e)}};r(),r(),r();var G2=function(t){return t[t.qC=0]="qC",t[t.YC=1]="YC",t}({});async function H2(t,e,i){const s=[];for(const n of t.Ppt)s.push(Z2(n,e,i));return{Tee:await Promise.all(s)}}async function Z2(t,e,i){const s=[];for(const n of t.gft)X2(n)||s.push(Y2(n,e,i));return{Z:await Promise.all(s),Tw:t.Tw}}function X2(t){return t.Jat.every(q2)}var z2=1;function q2(t){return t.Owt!==z2&&Boolean(t.Owt)}async function Y2(t,e,i){const s=[];for(const e of t.Jat)q2(e)||s.push(K2(e,i));const n=await Promise.all(s),r=t.Jrt[0],o=t.TG,h=o?function(t,e){const i=[],s=function(t){return t?Ga(t,"avc")?au.VIDEO_H264:Ga(t,"hev")||Ga(t,"hvc")||Ga(t,"hvt")||Ga(t,"lhv")||Ga(t,"lhe")||Ga(t,"lht")?au.VIDEO_H265:Ga(t,"mp4")?au.VIDEO_MP4:Ga(t,"mpeg2")?au.VIDEO_MPEG2:Ga(t,"mpeg")?au.VIDEO_MPEG:au.VIDEO_UNKNOWN:au.VIDEO_UNKNOWN}(t);for(const t of e){const e=t.c9.split(":").pop(),n=t.l9;i.push({mimeType:s,uuid:e,data:n})}const n=G2.qC,r=im;return{type:n,schemeType:r,schemeDatas:i}}(r,o):void 0,a=oX(t,e,!0);return{NC:n,gs:t.Qtt,Tw:t.Tw,sH:h,upt:a}}async function K2(t,e){const i={stack:[],error:void 0,hasError:!1};try{const r=gs(i,new da,!1),o=await async function(t,e,i){const s=[],n=t.Zot;t.pdt&&s.push({WO:0,ct:0,kee:t.pdt});const r=n.hbt();let o=r;for(;o;){if(t.dlt(o)){const n=await t._lt(o,e,i);for(let e=0;e<n.V;e++)s.push(j2(n.glt(e),t))}else s.push(j2(o,t));o=n.wlt(o)}const h=n.lbt(),a=h.UO-r.WO;return{ct:a,Mrt:s}}(t,e,r.Uw),h={o:Q2(t),LL:o,bG:t.bG,gp:t.gp,Ti:t.Ti,Tw:t.Tw,ji:t.ji};switch(t.Tw){case ee.Tk:break;case ee.mE:var s,n;h.oft=null!=(n=null==(s=t.oft)?void 0:s._F())?n:NaN;break;case ee.vE:h.audioSamplingRate=t.Nwt}return h}catch(t){i.error=t,i.hasError=!0}finally{co(i)}}function j2(t,e){return{WO:t.WO,ct:t.ct,kee:e.Alt(t)}}function Q2(t){return t.rlt.Sn+"-"+(""+t.o)}function J2(t,e){const i=function(t){const e=function(t){const e=Oh();for(const i of t){let t=e.get(i.lLt);t||(t={Tw:i.Tw,AN:[]},e.set(i.lLt,t)),t.AN.push(i)}return e}(t),i=ne();return e.forEach((t=>{for(const e of t.AN){let s=i.get(t.Tw);s||(s=Oh(),i.set(t.Tw,s));let n=s.get(e.l);n||(n=[],s.set(e.l,n)),n.push(e)}})),i}(t);return function(t,e){const i=ne();return t.forEach(((t,s)=>{const n=Oh();t.forEach(((t,i)=>{const r=[];for(const i of t){const t=$2(i,s,e);r.push(t)}n.set(i,r)})),i.set(s,n)})),i}(i,e)}function $2(t,e,i){const s=t.lLt,n={gLt:t,GLt:[]};for(const t of i)fj(e,s,t)&&n.GLt.push(t);return n}async function t3(t,e){const i=await e.aTt([t],{});return VK(i.eE,{},i.cTt)}async function e3(t,e){return sK(t)?async function(t,e){const i=J2(t.AN,t.rOt),s=await async function(t,e){const i=[],s=t.entries();for(let t=s.next();!t.done;t=s.next()){const[s,n]=t.value,r=await n3(n,s,e);i.push(r)}return i}(i,e),n=await async function(t,e){const i=[];for(const h of t){var s,n;const t=await a3(h.Fyt,e);var r,o;t.bG=h.bG,t.gp=h.Jrt?s3(h.Jrt):"",t.Ti=null!=(r=null==(s=h.$Ct)?void 0:s.Ti)?r:0,t.ji=null!=(o=null==(n=h.$Ct)?void 0:n.ji)?o:0,i.push(t)}return{Tw:ee.iE,Z:[{gs:uU,Tw:ee.iE,NC:i}]}}(t.rOt,e);return s.push(n),{ct:i3(s),Eee:[t.Fyt],Gpt:[{Tee:s}]}}(t,e):function(t){const e=u3(t);return{ct:e.ct,Eee:[t.Fyt],Gpt:[{Tee:[{Tw:ee.iE,Z:[{Tw:ee.iE,gs:uU,NC:[{o:t.Fyt,LL:e,bG:0,gp:"",Ti:0,Tw:ee.iE,ji:0}]}]}]}]}}(t)}function i3(t){let e=-1/0;for(const i of t)for(const t of i.Z)e=_.max(e,...t.NC.map((t=>t.LL.ct)));return e}function s3(t){return[t.cPt,t.dPt,t.kBt].filter(Bo).join(",")}async function n3(t,e,i){const s=[],n=t.entries();for(let t=n.next();!t.done;t=n.next()){const[,e]=t.value,n=await r3(e,i);s.push(n)}return{Tw:o3(e),Z:s}}async function r3(t,e){const i=[],s=t[0].gLt;for(const s of t){const t=await h3(s,e);i.push(t)}return{gs:s.gs||uU,Tw:o3(s.Tw),NC:i}}function o3(t){switch(t){case Qc.vE:return ee.vE;case Qc.mE:return ee.mE;case Qc.JV:case Qc.aBt:return ee.Tk;default:return ee.iE}}function h3(t,e){const i=function(t){const e=t.gLt.Fyt,i=t.GLt.map((t=>t.Fyt));return e||(i.length?i[0]:void 0)}(t);return a3(i,e)}async function a3(t,e){let i={ct:0,Mrt:[]};if(t){const s=await t3(t,e);gt(s)&&(i=u3(s))}return{o:t||"default",xee:t,LL:i,bG:0,gp:"",Ti:0,Tw:ee.iE,ji:0}}function u3(t){const e=[];let i,s=0;for(const n of t.Mrt){const t=s;!n.uOt||void 0!==i&&hK(n.uOt.Fyt,i)||(e.push(c3(n.uOt,t)),i=n.uOt.Fyt),e.push(l3(n,t)),s+=n.ct}return{ct:s,Mrt:e}}function c3(t,e){return{WO:e,ct:0,kee:d3(t.Fyt)}}function l3(t,e){return{WO:e,ct:t.ct,kee:d3(t.Fyt)}}function d3(t){return{Xu:t.Mx,_ut:t._At?[t._At.Sn,t._At.Sn+t._At.V]:void 0,xE:!1}}r(),r();var f3=class{async Ree(t){if(!t.src)throw new g("Invalid typed source");const e=t.type;if(zh(e))return await this.Iee(t);if(NT(e))return await this.Cee(t);throw new g("Unexpected source type")}async Iee(t){try{const e=await t3(t.src,this.uTt);return await e3(e,this.uTt)}catch(t){throw new g("Unable to fetch HLS manifest")}}async Cee(t){try{const e=new xZ({VC:Ms.Ih(t.src),GSt:t.liveOffset,qSt:t.timeServer,xE:t.useCredentials},this.Pee,Ch.LE,this.uTt,t.dash);return await e.W,await async function(t,e,i){const s=[];for(const n of t.Gpt)s.push(H2(n,e,i));const n=await Promise.all(s);return{ct:t.Eyt.cwt(),Eee:[t.NSt],Gpt:n}}(e.Er.vdt,t.contentProtection,this.blt)}catch(t){throw new g("Unable to fetch DASH manifest")}}constructor(t,e,i){this.uTt=t,this.blt=e,this.Pee=i}};r();var _3=class{Dee(){const t=new os;return this.Nee.push(t),this.Mee(),t.Ub}async Lee(t,e){try{await t}finally{this.Bee-=1,this.Mee(),0===this.Nee.length&&0===this.Bee&&e.Vb(!0)}}Mee(){if(this.Nee.length>0&&this.Bee<this.Oee){this.Nee.shift().Vb(),this.Bee+=1}}constructor(t){this.Nee=[],this.Bee=0,this.Oee=t}};var v3=class extends Co{get cee(){return this.kI()}async kI(){const t=new f3(this.uTt,this.blt,this.Pee);this.hPt=await t.Ree(this.Fee);const e=function(t,e){if(Yt(t)){if(Ga(t,"%"))return C(t)/100*e;throw new g("Unexpected - Invalid string supplied as amount to cache.")}return e<t?e:t}(this.bTt.pT.amount,this.hPt.ct);let i;this.vee=e;const s=JF(this.hPt.Eee[0]),n=(await this.Nrt.Lrt.Ert(s,"manifestURL")).filter((t=>ms(t.references,this.bTt.o))),r=[],o=this.bTt.pT.bandwidth;for(const t of this.hPt.Gpt)for(const e of t.Tee)for(const t of g3(e,this.bTt.pT.preferredTrackSelection))for(const e of w3(t.NC,o))r.push(e);this.Vee=_.ceil(r.map((t=>t.bG*function(t,e){let i=0;for(const s of t.LL.Mrt.map((t=>t.ct)))if(i+=s,i>=e)return i;return i}(t,e)/8)).reduce(((t,e)=>t+e),0));const h=Oh();if(n&&0!==n.length){const t=n.reduce(((t,e)=>t+e.byteSize),0);for(const t of n){const e=t.qualityId,i=new se(t.startsAndEnds);if(h.has(e))h.get(e).timeRanges=h.get(e).timeRanges.tB(i).$L(5e-4);else{const t=Fo(r,(t=>t.o===e));var a;const s=_.min(this.vee,null!=(a=null==t?void 0:t.LL.ct)?a:1/0);h.set(e,{timeRanges:i,totalQualityDurationToCache:s})}}i=new F2(t,h,this.vee)}else{for(const t of r)h.set(t.o,{timeRanges:se.pB(),totalQualityDurationToCache:_.min(t.LL.ct,this.vee)});i=new F2(0,h,this.vee)}this.Wee=i}get Uee(){return this.Vee}get Wee(){return this.Gee}set Wee(t){this.Gee.sF(t)||(this.Gee=t,t.sF(F2.Aee)||this._o(new W2))}async pi(t){await this.mo,await this.Hee(this.hPt,t)}async Hee(t,e){if(!t.Eee)throw new g("Unexpected - manifest is missing locations");await this.Zee();const i=[];for(const s of t.Gpt)i.push(this.Xee(s,t.Eee[0],e));return Rs(i)}async Zee(){const t=await this.zee.Trt();for(const e of t){const t=await this.Nrt.Brt.Lb(e.key);if(t)await m3(t,this.bTt.o,this.Nrt.Brt,this.aee);else try{await this.Nrt.Brt.brt(e,this.aee)}catch(t){throw new U2("Unable to store manifest with url: "+e.locationURL,t)}}await this.zee.Rrt()}Xee(t,e,i){const s=[];for(const n of t.Tee){const t=g3(n,this.bTt.pT.preferredTrackSelection);for(const n of t)s.push(this.qee(n,e,i))}return Rs(s)}async qee(t,e,i){const s=this.bTt.pT.bandwidth,n=w3(t.NC,s);t.Tw===ee.mE&&t.upt&&t.upt.hU.widevine&&"persistent"===t.upt.hU.widevine.licenseType&&(await this.Yee(t.upt),J(i));const r=[];for(const t of n)r.push(this.Kee(t,e,i));return Rs(r)}async Kee(t,e,i){J(i);const s=t.LL.Mrt[0].WO+this.vee,n=[];let r=!1;for(const o of t.LL.Mrt){if(o.WO>=s||this.stopIfFailed(r))break;await this.jee(i),await this.Qee.Dee(),n.push(this.Qee.Lee(this.Jee(o,t,e),this.$ee).catch((t=>(r=!0,Promise.reject(t)))))}return Rs(n)}async jee(t){if(null==t?void 0:t.Fw)throw await this.$ee.Ub,new Bu}async tie(){return await this.mo.catch(Tt),this.hPt}Yee(t){return Promise.resolve()}eie(){return Ms.Vp("License renewal unsupported in this SDK."),Promise.resolve()}async Jee(t,e,i){const s=this.Nrt.Lrt,n=$F(t.kee.Xu,t.kee._ut),r=await s.Lb(n);if(r)await m3(r,this.bTt.o,s,this.aee),this.iie(r,!1);else try{const s=await this.sie(t.kee),{segmentMetadataEntry:n,segmentEntry:r}=this.nie(t,e,i,s);await this.Nrt.Drt((async t=>{await t.Lrt.brt(n,this.aee),await t.Mrt.brt(r,this.aee)})),this.iie(n,!0)}catch(e){throw new U2("Unable to store segment with url: "+t.kee.Xu,e)}}async sie(t){const e=await this.Sct.hut(t,{mut:this.DEFAULT_CACHING_SEGMENT_TIMEOUT,TE:this.DEFAULT_CACHING_SEGMENT_CONNECTION_TIMEOUT});return await this.Tct(e)}async Tct(t){return{buffer:await t.Dk()}}nie(t,e,i,s){const n=$F(t.kee.Xu,t.kee._ut),r=t.WO,o=t.ct,h=this.rie(s);return{segmentMetadataEntry:{key:n,segmentURLsegmentByteRange:n,manifestURL:JF(i),qualityId:e.o,byteSize:h,startsAndEnds:new se([r,r+o]).GL,references:[this.bTt.o]},segmentEntry:{key:n,segmentURLsegmentByteRange:n,manifestURL:JF(i),data:s,references:[this.bTt.o]}}}rie(t){return t.buffer.byteLength}iie(t,e){const i=t.qualityId,s=this.Gee,n=s.TO;n.get(i).timeRanges=n.get(i).timeRanges.tB(new se(t.startsAndEnds)).$L(5e-4),this.Wee=new F2(e?s.mee+t.byteSize:s.mee,n,this.vee)}stopIfFailed(t){return!1}constructor(t,e,i,s,n,r,o,h){super(),this.DEFAULT_CACHING_SEGMENT_TIMEOUT=3e4,this.DEFAULT_CACHING_SEGMENT_CONNECTION_TIMEOUT=0,this.$ee=new os,this.Gee=F2.Aee,this.bTt=t,this.Nrt=e,this.uTt=i,this.zee=s,this.Sct=n,this.blt=r,this.Pee=h,this.aee=o,this.Vee=-1;const a=this.bTt.Cc.sources[0];this.Fee=a,this.mo=this.kI(),this.Qee=new _3(this.bTt.pT.parallelTasksThreshold)}};async function m3(t,e,i,s){ms(t.references,e)||(t.references.push(e),await i.brt(t,s))}function g3(t,e){switch(t.Tw){case ee.vE:return p3(t.Z,e.audioTrackSelection);case ee.Tk:return p3(t.Z,e.textTrackSelection);default:return p3(t.Z,[])}}function p3(t,e){if(0===e.length)return t.length?[t[0]]:[];const i=[];for(const s of t)e.indexOf(s.gs)>-1&&i.push(s);return i}function w3(t,e){if(!t.length)return[];const i=[...t].sort(pW),s=i.filter((t=>t.bG<=e));return s.length>0?[s.pop()]:[i.shift()]}var y3=class{async oie(){await this.Nrt.Drt((async t=>{await this.hie(t),await this.aie(t),await this.uie(t),await this.cie(t)}))}async hie(t){const e=t.Ort,i=this.bTt.o;await e.eT(i)}async aie(t){const e=t.Lrt,i=t.Mrt,s=this.bTt.Cc.sources[0];if(!Cn(s))return;const n=JF(s.src),r=(await e.Ert(n,"manifestURL")).filter((t=>ms(t.references,this.bTt.o)));for(const t of r)we(t.references,this.bTt.o),0===t.references.length?(await e.eT(t.key),await i.eT(t.key)):await e.brt(t)}async uie(t){const e=t.Brt,i=this.lie(),s=(await e.frt(i)).filter((t=>ms(t.references,this.bTt.o)));for(const t of s)we(t.references,this.bTt.o),0===t.references.length?await e.eT(t.key):await e.brt(t)}lie(){if(!this.hPt)return[];const t=this.bTt.Cc.sources[0];if(!Cn(t))return[];const e=JF(t.src),i=function(t){if(!t)return[];const e=[];for(const i of t.Gpt)for(const t of i.Tee)for(const i of t.Z)for(const t of i.NC)t.xee&&e.push(t.xee);return function(t){return t.reduce(((t,e)=>(t.indexOf(e)<0&&t.push(e),t)),[])}(e)}(this.hPt).map((t=>({src:t}))).map((t=>JF(t.src)));return[e,...i]}async cie(t){const e=t.Frt,i=(await e.Trt()).filter((t=>ms(t.references,this.bTt.o)));for(const t of i)we(t.references,this.bTt.o),0===t.references.length?(await e.eT(t.key),this.die(t)):await e.brt(t)}die(t){}constructor(t,e,i){this.bTt=t,this.Nrt=e,this.hPt=i}},b3=new class{Ait(t,e,i){return new y3(t,e,i)}};r(),r();var A3=class{get wa(){return this.eu||(this.eu=function(t){return{renew(e){t.fie(e)}}}(this)),this.eu}fie(t){this._ie(t)}async _ie(t){try{await this.mie.eie(t)}catch(t){0,this.sx.Iat(Wt.ERROR)}}constructor(t,e){this.sx=t,this.mie=e}},S3=class extends sn{get cee(){return this.mie.cee}get wa(){return this.eu||(this.eu=function(t){let e,i={get id(){return t.o},get status(){return t.Yk},get source(){return t.Cc},get parameters(){return t.pT},get duration(){return t.ct},get cached(){return t.gie.ks()},get secondsCached(){return t.pie},get percentageCached(){return t.wie},get bytes(){return t.yie},get bytesCached(){return t.bie},get license(){return t.eY.wa},start(){t.Sn()},pause(){t.EI()},remove(){t.eT()},addEventListener(t,i){e.bn(t,i)},removeEventListener(t,i){e.vn(t,i)}};return e=new gD(t,["z2t","wat"],i),i}(this)),this.eu}get o(){return this.zS}get eY(){return this.Aie}get Yk(){return this.Rat}Iat(t){this.Rat!==t&&(this.Rat=t,this._o(new I2))}get Cc(){return this.Sc}get pT(){return this.Sie}get ct(){return this.mie.Wee.vB}get gie(){return this.mie.Wee.wee}get pie(){return this.mie.Wee.pee}get wie(){return this.mie.Wee.yee}get yie(){return this.mie.Uee}get bie(){return this.mie.Wee.mee}Sn(){this.Rat===Wt.EVICTED||this.Rat===Wt.DONE||this.Tie()}async Tie(){try{this.Iat(Wt.LOADING);const t=new da;this.kie=t,await this.mie.pi(t.Uw),this.Iat(Wt.DONE)}catch(t){Je(t)?this.Iat(Wt.IDLE):this.Iat(Wt.ERROR)}finally{this.kie.Xw()}}EI(){this.kie.jw()}eT(){this.Yk===Wt.LOADING?(this.bn("wat",this.evictOnLoading),this.EI()):this.Eie()}async Eie(){try{const t=await this.mie.tie();await b3.Ait(this,this.Nrt,t).oie(),this.mie.Wee=F2.Aee,this.Iat(Wt.EVICTED)}catch(t){0,this.Iat(Wt.ERROR)}}constructor(t,e,i,s,n,r){super(),this.kie=new da,this.evictOnLoading=()=>{this.vn("wat",this.evictOnLoading),this.Eie()},this.zS=t,this.Sc=e,this.Sie=i,this.Nrt=s,this.mie=n.Ait(this,this.Nrt,r),this.Aie=new A3(this,this.mie),this.Rat=1===this.mie.Wee.yee?Wt.DONE:Wt.IDLE,this.mie.bn("z2t",(t=>{this.Ds(t),1===this.wie&&this.Iat(Wt.DONE)}));const o=new Date,h=this.Sie.expirationDate.getTime()-o.getTime();(function(t){return t<2147483647})(h)&&u((()=>this.Eie()),h)}};var T3=class{dee(t,e,i){const s=ae();return this.oee(s,t,e,i)}oee(t,e,i,s){return new S3(t,e,i,this.Nrt,this.xie,s)}constructor(t,e){this.Nrt=t,this.xie=e}};r();var k3=30,E3=5;function x3(t){if(!t)throw new g("Unexpected - The cache parameters are undefined");const e=function(t){if(Yt(t)&&!Ga(t,"%"))return x(t);return t}(t.amount);!function(t){if(function(t){return Yt(t)&&Ga(t,"%")}(t)){const e=C(t);if(S(e)||e<0||e>100)throw new g("The amount as percentage must be between 0 and 100 percent.")}if(!Yt(t)&&S(t))throw new g("The amount must be a number or a string")}(e);const i=function(t){if(!t)return function(){const t=new Date;return t.setMinutes(t.getMinutes()+k3),t}();return t}(t.expirationDate);!function(t){if(t&&!function(t){return!t||bd(t)&&t>new Date}(t))throw new g("Invalid expiration date for the cache parameters")}(i);const s=function(t){if(void 0===t)return 1/0;return t}(t.bandwidth);!function(t){if(S(t)||t<0)throw new g("The bandwidth must be between zero and infinity.")}(s);const n=function(t){if(!t)return E3;if(S(t))throw new g("The amount must be a number");return t}(t.numberOfParallelTasks);return{amount:e,expirationDate:i,bandwidth:s,parallelTasksThreshold:n,preferredTrackSelection:{audioTrackSelection:[],textTrackSelection:[]}}}var R3=class{set B7t(t){this.Rie=t,this.Iie=0,this.Cie=0,this.Pie=void 0}get B7t(){return this.Rie}r5t(){if(!this.Rie)return;const t=this.Rie.YJt;for(;this.Iie<t.length;){const e=t[this.Iie];for(void 0===this.Pie&&(this.Pie=p0(e),this.Cie=0);this.Cie<this.Pie.length;){const t=this.Pie[this.Cie];if(this.Cie++,void 0!==t.sYt)return t.sYt}this.Iie++,this.Pie=void 0}}nr(){for(this.B7t=void 0,this.GT.jw(),this.GT=new da;this.Die.length;)this.p7t()}Nie(t){return new Ft(this.Nrt.Ort,t,"temporary")}async BZt(t){const e=y2(t.TKt,this.xQ.ads.allowedMimeTypes);if(!e.length)return;const i=await kI.Vg.JH(e,_c({sources:e}));if(!i.t.WH())return;this.mie||(this.mie=new this.xie(this.fW));const s=this.Nrt,n=new T3(s,this.mie),r=this.Nie(n).oee(_c({sources:i.Cc}),x3({amount:10,bandwidth:gu.Vg.cG()||this.gZ.Ij}),"temporary");this.Die.push(r);const o=this.mie.Ait(r,s,"temporary");this.GT.jw(),this.GT=new da,js(o.pi(this.GT.Uw),this.GT).then(Tt),this.Mie(o,t)}constructor(t,e,i,s){this.Die=[],this.Iie=0,this.Cie=0,this.v7t=async()=>{const t=this.r5t();t&&await this.BZt(t)},this.p7t=()=>{const t=this.Die.shift();null==t||t.eT()},this.Mie=async(t,e)=>{let i=!1;for(;!i;)await t.py("z2t"),i=1===t.Wee.yee;e.ct<5&&this.v7t()},this.xQ=t,this.fW=e,this.GT=new da,this.xie=i,this.gZ=s,this.Nrt=new hV}};r(),r();var I3={key:"",segmentURLsegmentByteRange:"",manifestURL:"",qualityId:"",byteSize:0,startsAndEnds:new se([0,0]).GL,references:[]},C3={key:"",segmentURLsegmentByteRange:"",manifestURL:"",data:""},P3=class t extends EW{async Flt(t,e,i,s){try{return await super.Flt(t,e,i,s)}catch(t){th(t)}const n=await this.Lie.Flt(t,e,i,s);return await this.Bie(t,e,n),n}async Bie(e,i,s){if(void 0===this.Oie)return;const n=this.Nrt.Lrt,r=$F(e,i),o=await n.Lb(r);if(o)await m3(o,this.Oie,n,this.aee);else try{const e={buffer:s},{segmentMetadataEntry:i,segmentEntry:n}=t.nie(r,e,this.Oie);await this.Nrt.Drt((async t=>{await t.Lrt.brt(i,this.aee),await t.Mrt.brt(n,this.aee)}))}catch(t){throw new U2("Unable to store segment with url: "+e,t)}}static nie(t,e,i){return{segmentMetadataEntry:ol({},I3,{key:t,segmentURLsegmentByteRange:t,references:[i]}),segmentEntry:ol({},C3,{key:t,segmentURLsegmentByteRange:t,data:e,references:[i]})}}constructor(t,e,i,s,n){super(t),this.Lie=new kW(e),this.Nrt=i,this.Oie=s,this.aee=n}};var D3=class{Ait(t,e,i){void 0===i&&(i="persistent");const s=t.Cc.sources[0];if(MT(s))throw new g("Caching THEOlive sources is not supported");const n=Boolean(s.useCredentials),r=new NV(this.fW,qh.iE),o=new GZ(this.fW,n),h=new tV(e.Brt,e.Lrt,e.Mrt,e.Frt),a=function(t,e,i,s,n){return new P3(e,t,i,s,n)}(this.fW,h,e,t.o,i),u=new oV,c=new qZ(zZ(o,h),u,t);return this.Fie(t,e,c,u,r,a,i)}constructor(t){this.fW=t}},N3=class extends D3{Fie(t,e,i,s,n,r,o){return new v3(t,e,i,s,n,r,o,dV())}},M3=N3,L3=class t extends D1{get r2t(){return this}static get s2t(){return vt.d$t}get s2t(){return t.s2t}y8t(t,e,i){e===Ca.$st&&this.X9?ah(this.s5t([t])):this.Vie.push(t)}xR(){return this.Wie.j7t?this.Wie.ER:this.Tst()}RR(t,e){}jd(){return this.Wie.ct}DR(){return this.Wie.PR}NR(){}LR(){}XR(){return this.Wie.ZR}zR(t){this.ZR!==t&&(this.Wie.ZR=t,this._o(new ns(this.ER,this.gI)))}jR(){return this.Wie.KR}oI(){return this.Wie.rI}aI(){return se.pB().ks()}fI(){return this.Wie.dI}mI(){return this.Wie.vI}pI(){return this.Wie.gI}wI(t){this.gI!==t&&(this.Wie.gI=t,this._o(new ns(this.ER,this.gI)))}async xI(){if(this.Uie)return;this._o(new $(this.ER)),this.Gie(),this.Vie.length&&(this.Uie=this.s5t(this.Vie),await this.Uie,this.Uie=void 0),await this.Hie.E7t(this.na.xR());const t=this.Zie;4!==t&&1!==t&&5!==t||(!this.p$t&&this.Xie.length?this.zie():this.p$t?(this.qie=!0,this.Wie.xI()):(this.x1t(),this.na.xI()),this.Zie=3)}EI(){3===this.Zie&&(this.Wie.EI(),this.Zie=4)}_7t(){this.Hie._7t()}Sn(){this.Zie=1,this.Hie.Sn()}async RI(){this.Hie&&(this.Hie.Tn(),this.Yie(!1),this.Rte.RI(),this.Zie=5,this.p$t&&(this.Hie.L7t(this.p$t.Ojt),this.p$t=void 0)),this.X9=!1,this.qie=!1,En(this.Xie),this.g2t&&(this.x1t(),this.na.ge()),En(this.Vie),await this.Wie.RI(),await this.J7t.nr()}MD(){this.Wie.ZQt(),this.Rte.ZQt()}kI(){this.J7t.kI(),this.Gie()}c2t(t){return!(t.type!==Ti.Dy||!this.Hie||!this.Hie.S7t(-1))&&(this.Hie.b7t().then(Tt),!0)}ge(){void 0!==this.Wie.$7t&&(this.J7t.ge(),this.Wie.ge()),void 0!==this.Rte.Nte&&this.Rte.ge()}be(){this.J7t.be(),this.Wie.be(),this.Rte.be()}async s5t(t){const e=await R2.qte(t,this.fW,this.h2t);if(!e.length){const t="Ads could not be loaded.";return this.h2t._o(Fh.d2t(new Wr(Oo.ADBLOCK,Ls.FILE_NOT_FOUND),t)),void(this.X9&&!this.p$t&&0===this.Xie.length&&this.Kie())}this.Hie.N7t(e),this.h2t._o(new Ue),this.g2t||this.na.KR||this.Hie.E7t(this.na.xR()),0!==this.Zie&&5!==this.Zie||this.Sn()}C7t(t){this.Xie.push(...t);for(const e of t)this.X9&&!this.g2t&&this.zie()}async zie(){if(2!==this.Zie&&!this.jie){0,this.jie=!0,this.Zie=2;const t=this.p$t;this.Qie(),this.p$t?(await this.p$t.Ojt.c7t(this.h2t),this.Jie()||(this.jie=!1),this.h2t._o(new A1(this.$ie(this.p$t))),await this.tse()):((null==t?void 0:t.Ojt.l7t())&&this.h2t._o(new Hh(this.$ie(t))),this.jie=!1,this.Zie=1,this.Kie())}}Kie(){this.x1t(),this.na.ge(),this.na.PR?this.na._o(new Xs(this.na.xR())):this.na.xI()}Qie(){let t;if(this.p$t&&this.Jie())t=this.p$t.Ojt;else{if(0===this.Xie.length)return;t=this.Xie.shift()}if(!t)return;const e=t.Bc();e?this.p$t=e:(this.p$t&&(this.Hie.L7t(this.p$t.Ojt),this.p$t=void 0),this.p$t=void 0)}async tse(){const t=this.p$t?function(t){var e,i;const s=null==(i=t.cQt)||null==(e=i.Uqt)?void 0:e.Gqt();return void 0===s?void 0:new g0(s)}(this.p$t):void 0;if(t){if(!this.p$t)return;this.ese=t,this.ise(this.p$t.cYt),this.sse(sc.rjt);const e=this.ese.Bc();this.p$t.Ojt.l7t()&&(this.Rte.nte(),1===this.p$t.Ojt.Qut&&this.h2t._o(new Ua(this.$ie(this.p$t)))),await this._te(e)}else this.Zie=1,this.jie=!1,this.p$t=void 0,this.zie()}async _te(t){if(t){var e;let s=Bo(t.sYt),n=Bo(t.oYt);var i;const r=null!=(i=null==(e=t.rYt)?void 0:e.CYt)?i:[],o=r.length>0,h=this.p$t,a=this.$ie(h);if(t.sYt){if(t.sYt.sd=h,void 0!==h.wnt.skipOffset){const e=ja.hQt(h.wnt.skipOffset,t.sYt.ct);void 0!==e&&e<t.sYt.ct&&(t.sYt.xKt=e)}const e=a.KJt(t.sYt,r,t.hYt,h.wnt);this.Rte.nte(),this.C3t(),await this.Wie._te(e,t.lt,{width:this.na.we.offsetWidth,height:this.na.we.offsetHeight}),s=!0}if(t.oYt){const e=t.oYt.aYt[0];if(e.sd=h,void 0!==h.wnt.skipOffset){const t=ja.hQt(h.wnt.skipOffset,this.na.jd());t&&(e.sd.xKt=t)}const i=s?[]:r,o=a.jJt(e,i,t.oYt,t.hYt,h.wnt);s&&this.Wie.Cte(),await this.Rte._te(o,t.lt,{width:this.na.we.offsetWidth,height:this.na.we.offsetHeight}),n=!0}if(s){this.Zie=3,this.Wie.ge();const t=0===a.eOt;this.qie=t,this.J7t.EI(),this.Wie.xI(),this.na.EI(),this.na.be(),this.C3t(),this.Wie.Tte()}n&&(this.Zie=3,this.Rte.ge(),this.Rte.Tte()),(s||n||o)&&this.nse(t.tYt),s||n||await this.rse(),!s&&n&&(this.Jie()||this.Xie.length>0?this.zie():(this.Kie(),this.p$t=h))}else null===t?await this.rse():this.Yie(!0)}rse(){const t=this.ese;return this._te(t&&t.Bc())}Yie(t){this.sse(sc.ojt),this.ose(),this.Zie=1;const e=void 0!==this.p$t&&this.p$t.Ojt.a7t();if(this.jie=!1,e)t&&(this.Zie=1,this.zie());else{if(!this.g2t)return;this.na.ge(),!this.na.PR&&t&&this.na.xI(),this.x1t()}}x1t(){this.hse(),super.x1t()}hse(){if(this.na.PR&&(this.Zie=5),this.p$t){const t=this.p$t.Ojt;t.l7t()&&this.h2t._o(new Hh(this.$ie(this.p$t))),this.Hie.L7t(t),this.p$t=void 0}}ise(t){this.ase=this.ase.concat(t)}ose(){this.ase=[]}use(t){this.na.we.appendChild(t)}sse(t){for(const e of this.ase)e.WX===t&&Ir(e.eventURL)}nse(t){this.Wie.X7t(sc.JKt);for(const e of t)Ir(e)}get snt(){return this.p$t?this.$ie(this.p$t):null}get ent(){return this.p$t?[this.Wie.$7t,this.Rte.Nte].filter(Bo):[]}get nnt(){const t=this.Xie.concat(this.Hie.nnt.filter((t=>!t.t$t())));return on(t,(t=>t.i7t.zc.filter((t=>!t.t$t()))))}get rnt(){return this.Hie.nnt.map((t=>t.i7t))}hnt(t){const e=this.A8t();for(const i of e)pt(i.sources,i.timeOffset)||t.g6(i,Ca.$st,!1)}A8t(){const t=[];for(const e of this.ent.concat(this.nnt))t.push(e.wnt);const e=this.Xie.concat(this.Hie.nnt.filter((t=>!t.t$t())));for(const i of e)for(const e of i.YJt)e.W||t.push(e.wnt);return t.push(...this.Vie),jm(t)}Jie(){return!!this.p$t&&p0(this.p$t).some((t=>t.sYt))}$ie(t){return t.Ojt.i7t}zte(){return this.cse}TI(){return this.J7t.TI()}pR(){return this.J7t.pR()}b2t(t){this.Hie.b2t(t)}async yn(){await super.yn(),this.na.vn(Ti.ho,this.Gie),this.h2t.bK(this.Wie.h2t),this.h2t.bK(this.Rte.h2t),this.h2t.bK(this.Hie),this.Wie.yn(),this.Rte.yn(),await this.J7t.yn()}constructor(t,e,i,s,n,r){super(t,e),this.Xie=[],this.Zie=0,this.ase=[],this.jie=!1,this.X9=!1,this.qie=!0,this.Vie=[],this.lse=t=>{t.type===Ti.ho&&this.qie?this.qie=!1:this._o(t)},this.Gie=()=>{this.X9=!0},this.dse=async()=>(this.Zie=1,await this.Wie.nte(),this._te(this.ese.Bc())),this.fse=async t=>{const e=new Wr(Oo.PLAYBACK,Ls.GENERAL_LINEAR_ERROR,"There was a problem playing a linear ad.");return this.h2t._o(Fh.d2t(e,t)),await this.Wie.nte(),this._te(this.ese.Bc())},this._se=()=>(this.Rte.nte(),this._te(this.ese.Bc())),this.vse=t=>{const e=new Wr(Oo.PLAYBACK,Ls.GENERAL_NON_LINEAR_ERROR,"There was a problem playing a non linear ad.");return this.h2t._o(Fh.d2t(e,t)),this.Rte.nte(),this._te(this.ese.Bc())},this.fW=r,this.J7t=i,this.Rte=new x2(this.vse,this._se,this),this.Wie=new k2(this.fse,this.dse,this.Rte,s,this,t.Hu,i),this.use(this.Rte.O7t),this.use(this.Wie.O7t);const o=new R3(s,r,N3,n);this.Hie=new m2(this.na,this,this.h2t,o),this.Wie.oy(this.lse),this.Rte.oy(this.Ds),this.h2t.ru(this.Wie.h2t),this.h2t.ru(this.Rte.h2t),this.h2t.ru(this.Hie),this.cse=new b0(this,this.na),this.Hu.bn(nu.mn,this.Ds),this.na.bn(Ti.ho,this.Gie)}};yh.Vg.PZ(new class{get $1t(){return L3.s2t}CZ(t){return t&&("string"!=typeof t.integration||t.integration===lu.DEFAULT||t.integration===lu.CSAI||t.integration===lu.THEO)}t2t(t,e,i){const s=new NI(t.we,i,t.fR,t.vst,t.yI,t.yst,t.Wl);return new L3(t,e,s,i,t.vst,t.fR)}g6(t,e,i,s){i.y8t(t,e,s)}qz(t){const e=G$(t.sources);if(!e)return;const i={integration:lu.CSAI,sources:e};"vast"===i.sources.type&&void 0===t.timeOffset?t.timeOffset=0:"vmap"===i.sources.type&&void 0!==t.timeOffset&&vl("Do not set timeOffset for VMAP ad sources. VMAP ads have their own offsets included.");const s=Ic(t.timeOffset);void 0!==s&&(i.timeOffset=s);const n=Ic(t.skipOffset);return void 0!==n&&(i.skipOffset=n),i}}),r(),r();var B3=class{xj(){var t;this.O6||(null==(t=this.V8t)||t.initialize(),this.O6=!0)}get O7t(){return this.b0t}get gse(){return this.pse.offsetHeight}get wse(){return this.pse.offsetWidth}get yse(){return this.V8t}bse(t){"linear"===t?this.b0t.style.marginTop="0px":"nonlinear"===t&&(this.b0t.style.marginTop="-45px")}ge(){this.b0t.style.opacity="1",this.b0t.style.pointerEvents=""}be(){this.b0t.style.opacity="0",this.b0t.style.pointerEvents="none"}Xw(){var t;null==(t=this.V8t)||t.destroy(),this.V8t=void 0}constructor(t,e){this.V8t=void 0,this.O6=!1,this.Het=t;const i=h.createElement("div");i.className="theoplayer-ima-wrapper",Zo(i),i.style.zIndex="10",Z.Qs&&function(t,e){t.addEventListener(e,Pd)}(i,"mousedown"),e.appendChild(i);const s=h.createElement("div");s.className="theoplayer-ima",s.style.height="100%",this.pse=s,i.appendChild(s),this.b0t=i,this.V8t=new google.ima.AdDisplayContainer(this.pse,this.Het)}};r(),r(),r();var O3=class{get vKt(){return this.Ase.getAdId()}get d9t(){const t=this.Ase.getAdPodInfo();if(void 0!==t)try{return{x6t:t.getAdPosition(),ZJt:t.getMaxDuration(),Sse:t.getPodIndex(),eOt:t.getTimeOffset(),R6t:t.getTotalAds(),Tse:t.getIsBumper()}}catch(t){return}}get jqt(){return this.Ase.getAdSystem()}get kse(){return this.Ase.getAdvertiserName()}get WYt(){var t;return null!=(t=this.Ase.getApiFramework())?t:void 0}get rYt(){return this.PYt.map((t=>({GYt:t.getAdSlotId(),Mk:t.getContentType(),H2t:t.getContent(),Ti:t.getHeight(),ji:t.getWidth()})))}get Mk(){var t;return null!=(t=this.Ase.getContentType())?t:void 0}get bYt(){return this.Ase.getCreativeId()}get t8t(){return this.Ase.getCreativeAdId()}get Ese(){return this.Ase.getDealId()}get VN(){return this.Ase.getDescription()}get ct(){return this.Ase.getDuration()}get ji(){return this.Ase.getWidth()}get Ti(){return this.Ase.getHeight()}get CKt(){var t;return null!=(t=this.Ase.getMediaUrl())?t:void 0}get xse(){return this.Ase.getMinSuggestedDuration()}get J9t(){return this.Ase.getSkipTimeOffset()}get Rse(){return this.Ase.getSurveyUrl()}get oH(){return this.Ase.getTitle()}get j9t(){return this.Ase.getTraffickingParameters()}get Q9t(){return this.Ase.getTraffickingParametersString()}get hYt(){return this.Ase.getUniversalAdIds().map((t=>({e8t:t.getAdIdRegistry(),i8t:t.getAdIdValue()})))}get z8t(){return this.Ase.getUiElements()}get $9t(){return this.Ase.getVastMediaBitrate()}get Y9t(){return this.Ase.getVastMediaHeight()}get q9t(){return this.Ase.getVastMediaWidth()}get H9t(){return this.Ase.getWrapperAdIds()}get Z9t(){return this.Ase.getWrapperAdSystems()}get X9t(){return this.Ase.getWrapperCreativeIds()}get n9t(){return this.Ase.isLinear()}constructor(t){this.Ase=t;const e=new google.ima.CompanionAdSelectionSettings;e.resourceType=google.ima.CompanionAdSelectionSettings.ResourceType.ALL,e.creativeType=google.ima.CompanionAdSelectionSettings.CreativeType.ALL,e.sizeCriteria=google.ima.CompanionAdSelectionSettings.SizeCriteria.IGNORE,this.PYt=t.getCompanionAds(0,0,e)}};function F3(){return[google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,google.ima.AdEvent.Type.CLICK,google.ima.AdEvent.Type.DURATION_CHANGE,google.ima.AdEvent.Type.EXPANDED_CHANGED,google.ima.AdEvent.Type.STARTED,google.ima.AdEvent.Type.IMPRESSION,google.ima.AdEvent.Type.PAUSED,google.ima.AdEvent.Type.RESUMED,google.ima.AdEvent.Type.AD_PROGRESS,google.ima.AdEvent.Type.AD_BUFFERING,google.ima.AdEvent.Type.FIRST_QUARTILE,google.ima.AdEvent.Type.MIDPOINT,google.ima.AdEvent.Type.THIRD_QUARTILE,google.ima.AdEvent.Type.COMPLETE,google.ima.AdEvent.Type.USER_CLOSE,google.ima.AdEvent.Type.LINEAR_CHANGED,google.ima.AdEvent.Type.LOADED,google.ima.AdEvent.Type.AD_CAN_PLAY,google.ima.AdEvent.Type.AD_METADATA,google.ima.AdEvent.Type.AD_BREAK_READY,google.ima.AdEvent.Type.INTERACTION,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,google.ima.AdEvent.Type.SKIPPED,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,google.ima.AdEvent.Type.LOG,google.ima.AdEvent.Type.VIEWABLE_IMPRESSION,google.ima.AdEvent.Type.VOLUME_CHANGED,google.ima.AdEvent.Type.VOLUME_MUTED]}var V3=class extends Co{wI(t){var e;null==(e=this.qJt)||e.setVolume(t)}pI(){return this.qJt.getVolume()}E9t(){return this.qJt.getRemainingTime()}Xw(){En(this.Oc),this.Ku.vn(nu.mn,this.Ise),this.qJt.removeEventListener(google.ima.AdEvent.Type.LOADED,this.Cse),this.qJt.removeEventListener(F3(),this.forwardAdEventListener),this.qJt.removeEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.forwardAdErrorEventListener),this.qJt.destroy()}Sn(){this.qJt.start()}L8t(){this.qJt.resume()}EI(){this.qJt.pause()}MD(){this.qJt.skip()}RI(){this.qJt.stop()}u9t(){const t=this.qJt.getCurrentAd();if(t)return this.Pse(t)}U8t(){return this.qJt.getCuePoints()}Pse(t){let e=Fo(this.Oc,(e=>e.Ase===t));return e||(e=new O3(t),this.Oc.push(e)),e}j8t(t){this.qJt.updateAdsRenderingSettings(H3(t))}constructor(t,e,i){super(),this.Oc=[],this.Cse=t=>{t.getAd().isLinear()?this.V8t.bse("linear"):this.V8t.bse("nonlinear")},this.Ise=()=>{this.qJt.resize(this.V8t.wse,this.V8t.gse,google.ima.ViewMode.NORMAL)},this.forwardAdEventListener=t=>{const e=t.getAd(),i=function(t){return{[google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED]:ls.d5t,[google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED]:ls.f5t,[google.ima.AdEvent.Type.CLICK]:ls._5t,[google.ima.AdEvent.Type.DURATION_CHANGE]:ls.Iy,[google.ima.AdEvent.Type.EXPANDED_CHANGED]:ls.v5t,[google.ima.AdEvent.Type.STARTED]:ls.m5t,[google.ima.AdEvent.Type.IMPRESSION]:ls.g5t,[google.ima.AdEvent.Type.PAUSED]:ls.DZ,[google.ima.AdEvent.Type.RESUMED]:ls.p5t,[google.ima.AdEvent.Type.AD_PROGRESS]:ls.w5t,[google.ima.AdEvent.Type.AD_BUFFERING]:ls.y5t,[google.ima.AdEvent.Type.FIRST_QUARTILE]:ls.b5t,[google.ima.AdEvent.Type.MIDPOINT]:ls.zKt,[google.ima.AdEvent.Type.THIRD_QUARTILE]:ls.A5t,[google.ima.AdEvent.Type.COMPLETE]:ls.qKt,[google.ima.AdEvent.Type.USER_CLOSE]:ls.S5t,[google.ima.AdEvent.Type.LINEAR_CHANGED]:ls.T5t,[google.ima.AdEvent.Type.LOADED]:ls.k5t,[google.ima.AdEvent.Type.AD_CAN_PLAY]:ls.E5t,[google.ima.AdEvent.Type.AD_METADATA]:ls.x5t,[google.ima.AdEvent.Type.AD_BREAK_READY]:ls.R5t,[google.ima.AdEvent.Type.INTERACTION]:ls.I5t,[google.ima.AdEvent.Type.ALL_ADS_COMPLETED]:ls.C5t,[google.ima.AdEvent.Type.SKIPPED]:ls.P5t,[google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED]:ls.D5t,[google.ima.AdEvent.Type.LOG]:ls.N5t,[google.ima.AdEvent.Type.VIEWABLE_IMPRESSION]:ls.M5t,[google.ima.AdEvent.Type.VOLUME_CHANGED]:ls.L5t,[google.ima.AdEvent.Type.VOLUME_MUTED]:ls.B5t}[t]}(t.type),s={type:i,date:new Date,lnt:e?this.Pse(e):void 0,K6t:G1(i,t.getAdData())};this._o(s)},this.forwardAdErrorEventListener=t=>{this._o({date:new Date,lnt:void 0,type:V1.O5t,K6t:{I9t:X1(t.getError())}})},this.qJt=t,this.V8t=e,this.Ku=i,this.Ku.bn(nu.mn,this.Ise),this.qJt.init(this.V8t.wse,this.V8t.gse,google.ima.ViewMode.NORMAL),this.qJt.addEventListener(google.ima.AdEvent.Type.LOADED,this.Cse),this.qJt.addEventListener(F3(),this.forwardAdEventListener),this.qJt.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.forwardAdErrorEventListener)}};r();var W3=class extends Ds{get Dse(){return this.Nse}get O7t(){return this.b0t}ka(){return new U3(this.Nse)}constructor(t,e){super("$8t"),this.Nse=t,this.b0t=e}},U3=class extends pe{get adsManager(){return this.Nse}constructor(t){super("adsmanagerloaded"),this.Nse=t}},G3=class extends Co{B8t(){var t;null==(t=this.O8t)||t.contentComplete()}async s5t(t,e,i){if(this.Mse)throw new g("Only one ImaAdsRequest can be made at a time.");if(!this.Lse.yse)throw new g("AdDisplayContainer is not initialized.");this.O8t=new google.ima.AdsLoader(this.Lse.yse),this.O8t.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoadedListener),this.O8t.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdsManagerErrorListener),this.Mse=new os,this.Bse=e,this.Ose=i;const s=new google.ima.AdsRequest;return t.g4t?s.adTagUrl=t.g4t:t.p4t&&(s.adsResponse=t.p4t),s.linearAdSlotWidth=t.l4t,s.linearAdSlotHeight=t.d4t,s.nonLinearAdSlotWidth=t.f4t,s.nonLinearAdSlotHeight=t._4t,s.contentDuration=t.y4t,s.setAdWillAutoPlay(t.v4t),s.setAdWillPlayMuted(t.m4t),t.w4t&&(s.omidAccessModeRules=t.w4t),this.O8t.requestAds(s),this.Mse.Ub}Xw(){var t;void 0!==this.O8t&&(this.O8t.removeEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoadedListener),this.O8t.removeEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdsManagerErrorListener),this.O8t.destroy(),this.O8t=void 0),null==(t=this.Mse)||t.Wb("AdsLoader destroyed"),this.Mse=void 0}constructor(t,e){super(),this.onAdsManagerLoadedListener=t=>{if(this.Bse&&this.Ose&&this.Mse){var e;const i=H3(this.Ose),s=this.Bse,n=t.getAdsManager({get currentTime(){return s.ER},get duration(){return s.ct}},i),r=new V3(n,this.Lse,this.Ku);this._o(new W3(n,this.Lse.O7t)),null==(e=this.Mse)||e.Vb(r),this.Mse=void 0}},this.onAdsManagerErrorListener=t=>{var e;const i={wb:t.getError().getMessage(),I6t:t.getError().getVastErrorCode(),Tjt:t.getError().getErrorCode(),Tw:H1(t.getError().getType()),C6t:void 0};null==(e=this.Mse)||e.Wb(i),this.Mse=void 0},this.Ku=e,this.Lse=t}};function H3(t){const e=new google.ima.AdsRenderingSettings;return e.enablePreloading=t.q8t,t.z8t&&(e.uiElements=t.z8t),e.mimeTypes=t.X8t,void 0!==t.K8t&&(e.playAdsAfterTime=t.K8t),void 0!==t.Y8t&&(e.loadVideoTimeout=t.Y8t),void 0!==t.K9t&&(e.bitrate=t.K9t),void 0!==t.K8t&&(e.playAdsAfterTime=t.K8t),e.restoreCustomPlaybackStateOnAdBreakComplete=!0,e}r();var Z3=class extends Co{get ER(){return this.na.uI?this.Fse:this.na.xR()}get ct(){return this.na.jd()}get ZR(){return this.na.ZR}get gI(){return this.na.gI}nr(){this.Fse=0}constructor(t){super(),this.na=t,this.Fse=this.na.xR(),this.na.bn(Ti.hb,(()=>{this.na.uI||(this.Fse=this.na.xR()),this._o(new Al(this.ER,void 0))}))}};c2.Vg.registerWebImaAdPlayerConstructor((function(t,e,i){h2(i);const s=a2(i)?t.TI():void 0,n=new B3(s,t.we),r=new G3(n,t.Hu),o=new Z3(t);return new u2(t,e,i,t.gst,n,r,o)})),r(),r(),r();var kn=class extends ic{get Vse(){return this.na===this.Dst?this.S3t:this.Dst}pr(t,e,i,s,n){this.na===this.S3t&&this.S3t.Wse(),(n||!s.KR||s.PR)&&this.na.xI()}RR(t,e){}SR(t){}Use(t,e){const i=t-this.S3t.Gse;return super.RR(i,e)}Hse(t){return super.SR(t)}kR(){return this.Dst.bt}iu(){return this.Dst.iu()}jd(){return this.Dst.jd()}aI(){const t=se.Cn(this.Dst.aI()).xb(this.S3t.Gse);if(this.Zse())return t.ks();const e=se.Cn(this.S3t.aI());let i=e;return g5(this.Dst)||(i=t.tB(e)),i=i.jn(se.gB(0,this.xR())),i.ks()}xR(){return this.Xse(super.xR())}Xse(t){return this.na===this.S3t?this.S3t.zse+t:this.S3t.Gse+t}AR(){return this.qse(super.xR())}qse(t){return this.na===this.S3t&&this.Yse?new Date(this.Yse.getTime()+1e3*t):this.Dst.bR}yR(){const t=se.Cn(this.Dst.yR()).xb(this.S3t.Gse);if(this.Zse())return t.ks();const e=se.Cn(this.S3t.yR());if(t.Tn(t.V-1)<e.Sn(0))return e.ks();return t.tB(e).ks()}BI(t){switch(t.type){case Ti.hb:return this._o(new Al(this.Xse(t.currentTime),t.currentProgramDateTime)),!0;case Ti.qy:return this._o(new K(this.Xse(t.currentTime))),!0;case Ti.ho:return this._o(new $(this.Xse(t.currentTime))),!0;case Ti.zy:return this._o(new ul(this.Xse(t.currentTime))),!0;case Ti.Dy:return this._o(new Xs(this.Xse(t.currentTime))),!0;case Ti.Jy:return this._o(new R(this.Xse(t.currentTime))),!0;case Ti.Qy:return this._o(new oa(this.Xse(t.currentTime))),!0;case Ti.Yy:return this._o(new ju(this.Xse(t.currentTime),t.playbackRate)),!0;case Ti.ub:return this.Kse?(this._o(new ns(this.Xse(t.currentTime),t.volume)),!0):(this.Kse=!0,!0);case Ti.Cy:return this._o(new Ys(this.Xse(t.currentTime),t.readyState)),!0;case Zc.BL:return this._o(new ro(this.Xse(t.currentTime),t.readyState)),!0;case Zc.OL:return this._o(new zT(this.Xse(t.currentTime),t.readyState)),!0;case Zc.FL:return this._o(new XT(this.Xse(t.currentTime),t.readyState)),!0;case Zc.VL:return this._o(new ZT(this.Xse(t.currentTime),t.readyState)),!0;case Zc.iC:return this._o(new hu(this.Xse(t.currentTime),t.readyState)),!0;case Zc.WL:return this._o(new za(this.Xse(t.currentTime))),!0;case Zc.UL:return this._o(new ko(this.Xse(t.currentTime))),!0;case Ti.Py:return this._o(new CZ(this.Xse(t.currentTime),t.initDataType,t.initData)),!0}return super.BI(t)}async yn(){await super.yn(!0)}constructor(t,e,i){super(i),this.Kse=!0,this.Dst=t,this.S3t=e,this.Yse=t.bR}};function X3(t,e){e.ZR=t.ZR,e.gI=t.gI,e.QR=t.QR}r();var z3=class extends kn{pr(t,e,i,s,n){super.pr(t,e,i,s,n),this.Vse.EI();this.jse(e,i).style.flex="1"}dr(t,e,i){this.jse(e,i).style.flex="0"}constructor(t,e,i){super(t,e,i)}},q3=class extends z3{Zse(){return!0}jse(t,e){return t}Qse(t,e){return e}RR(t,e){return super.Use(t,e)}SR(t){return super.Hse(t)}constructor(t,e){super(t,e,t)}},Y3=class extends kn{Zse(){return!1}pr(t,e,i,s,n){super.pr(t,e,i,s,n),this.Kse=!1,this.na.Jse(),e.style.flex="1"}dr(t,e,i){this.na.$se(),e.style.flex="0"}jd(){return this.na.jd()}constructor(t,e){super(t,e,e)}},K3=class extends z3{Zse(){return!1}jse(t,e){return e}Qse(t,e){return t}pr(t,e,i,s,n){super.pr(t,e,i,s,n);for(const t of[e,i])t.style.transition=""}dr(t,e,i){super.dr(t,e,i)}constructor(t,e){super(t,e,e)}};r(),r();var j3=class extends Ds{ka(){return new Q3(this.interstitial.int())}constructor(t){super("tne"),this.interstitial=t}},Q3=class extends pe{constructor(t){super("interstitialupdate"),this.interstitial=t}},Qe=function(t){return t.SINGLE="SINGLE",t.DOUBLE="DOUBLE",t.LSHAPE_AD="LSHAPE_AD",t.LSHAPE_CONTENT="LSHAPE_CONTENT",t}({}),J3=class extends Co{get ene(){var t,e;const i=null!=(e=null!=(t=this.ine)?t:this.MA)?e:this.nFt;return void 0!==i?this.WO+i:this.$O?this.$O:void 0}get ct(){const t=this.ene;return void 0===t?void 0:t-this.WO}get z2t(){var t;return null!=(t=this.q2t)?t:0}sne(t){if(!this.ct)return;const e=(t-(this.WO+this.nne))/this.ct;e<this.z2t||(this.q2t=_.min(e,1),1===this.q2t&&(this.tI=!0))}ir(t){var e,i,s,n;this.MA=null!=(e=t.ct)?e:this.MA,this.$O=null!=(i=t.UO)?i:this.$O,this.ine=null!=(s=t.rne)?s:this.ine,this.nne=null!=(n=t.hne)?n:this.nne,this.ane(),this._o(new j3(this))}ane(){void 0===this.MA&&void 0!==this.$O?this.MA=this.$O-this.WO:void 0===this.$O&&void 0!==this.MA&&(this.$O=this.WO+this.MA)}constructor(t){super(),this.nne=0,this.tI=!1,this.o=t.o,this.WO=t.WO,this.$O=t.UO,this.nFt=t.pBt,this.MA=t.ct,this.ine=t.rne,this.wvt=t.wvt,this.une=t.une,this.ane()}};r();var $3=class extends kn{Zse(){return!0}pr(t,e,i,s,n){super.pr(t,e,i,s,n),X3(this.na,this.Vse),this.Vse.ZR=!0,t.style.backgroundImage="url('"+this.cne+"')",t.style.backgroundSize="contain",t.style.backgroundPosition="center",this.lne=this.Dst.nt.lC.filter((t=>t.CE===bh.Qn));for(const t of this.lne)t.CE=bh.Mh;for(const t of[e,i])t.style.flex="1",t.style.borderWidth="20px",t.style.transition=["flex","border-width","transform"].map((t=>t+" 1s ease-in-out")).join(", ")}dr(t,e,i){for(const t of[e,i])t.style.flex="0",t.style.borderWidth="0px";var s;for(const t of null!=(s=this.lne)?s:[])t.CE=bh.Qn;this.lne=void 0}NR(){return this.Dst.NR()||this.S3t.NR()}LR(){return this.Dst.LR()||this.S3t.LR()}oI(){return _.min(this.Dst.rI,this.S3t.rI)}xI(){this.Dst.xI(),this.S3t.xI()}EI(){this.Dst.EI(),this.S3t.EI()}constructor(t,e,i){super(t,e,e),this.lne=void 0,this.cne=i}};r();var t4=class extends kn{pr(t,e,i,s,n){super.pr(t,e,i,s,n);this.Qse(e,i).style.visibility="hidden",this.Vse.EI(),t.style.backgroundImage="url('"+this.cne+"')",t.style.backgroundSize="contain",t.style.backgroundPosition="center";const r=this.jse(e,i);r.style.flex="1",r.style.transform="\n          translate(-50%, -50%)\n          scale(calc(43/60))\n          translate(calc(50% + 100%/30), calc(50% + 100%/30))\n        ";for(const t of[e,i])t.style.transition=["flex","border-width","transform"].map((t=>t+" 1s ease-in-out")).join(", ")}dr(t,e,i){const s=this.jse(e,i);s.style.flex="0",s.style.transform="";this.Qse(e,i).style.visibility=""}constructor(t,e,i,s){super(t,e,i),this.cne=s}},e4=class extends t4{Zse(){return!0}jse(t,e){return t}Qse(t,e){return e}constructor(t,e,i){super(t,e,t,i)}},i4=class extends t4{Zse(){return!1}jse(t,e){return e}Qse(t,e){return t}constructor(t,e,i){super(t,e,e,i)}};r();function s4(t){const e=t.style;e.position="relative",e.backgroundColor="transparent",e.backgroundRepeat="no-repeat",e.backgroundAttachment="scroll",e.border="0 solid transparent",e.borderWidth="0px",e.flex="0"}function n4(t){const e=t.style;e.display="",e.backgroundColor="",e.backgroundRepeat="",e.backgroundAttachment="",e.border="",e.borderWidth="",e.flex="",e.transform="",e.transition="",e.backgroundImage="",e.backgroundSize="",e.backgroundPosition="",e.alignItems="",e.position=""}function r4(t){return!Cl(t.Fyt,"theo-ads://dai.break")}r(),r(),r();var o4=class extends ic{},h4=class extends o4{pr(t,e){t.style.flex="1"}dr(t){t.style.flex="0"}constructor(t){super(t)}};r();var a4=class extends o4{pr(t,e){e.style.backgroundImage="url('"+this.cne+"')",e.style.backgroundSize="contain",e.style.backgroundPosition="center",t.style.flex="1",t.style.transition=["flex","border-width","transform"].map((t=>t+" 1s ease-in-out")).join(", "),t.style.transform="\n          translate(-50%, -50%)\n          scale(calc(43/60))\n          translate(calc(50% + 100%/30), calc(50% + 100%/30))\n        "}dr(t){t.style.flex="0",t.style.transform=""}constructor(t,e){super(t),this.cne=e}};r();var u4=class extends Ds{ka(){return new c4(this.interstitial.int())}constructor(t){super("dne"),this.interstitial=t}},c4=class extends pe{constructor(t){super("interstitialbegin"),this.interstitial=t}};function l4(t){return{get id(){return t.o},get duration(){return t.ct},get startTime(){return t.WO},get type(){return"adbreak"},get layout(){return function(t){switch(t){case Qe.SINGLE:return"single";case Qe.DOUBLE:return"double";case Qe.LSHAPE_CONTENT:case Qe.LSHAPE_AD:return"l-shape"}}(t.fne)},get ads(){return t.zc.map((t=>t.int()))},get backdropUri(){return t._ne}}}r(),r(),r(),r();var d4=function(t){return t.image="image",t}({}),f4=function(t){return t.png="png",t.svg="svg",t}({}),_4=class extends J3{get Tw(){return"overlay"}get QYt(){return this.vne}get mne(){return this.gne}ir(t){var e,i;this.gne=null!=(e=t.imageUrl)?e:this.gne,this.vne=null!=(i=t.clickThrough)?i:this.vne,super.ir(t)}int(){var t;return null!=(t=this.eu)?t:this.eu=function(t){return{get type(){return"overlay"},get id(){return t.o},get duration(){return t.ct},get startTime(){return t.WO},get clickThrough(){return t.QYt},get imageUrl(){return t.mne},get position(){return function(t){return{get top(){return t.M7},get bottom(){return t.N7},get left(){return t.D7},get right(){return t.P7}}}(t.fo)},get size(){return function(t){return{get width(){return t.ji},get height(){return t.Ti}}}(t.Nb)}}}(this)}constructor(t){super(t),this.pne=t.Tw,this.fo=t.fo,this.Nb=t.Nb,this.wne=t.wne,this.yne=t.yne,this.cjt=t.cjt,this.vne=t.bne}};r();var v4=class extends J3{get Tw(){return"adbreak"}get zc(){return this.Oc}ir(t){var e;t.ad&&this.Oc.push(t.ad),this._ne=null!=(e=t.backdropUri)?e:this._ne,super.ir(t)}int(){var t;return null!=(t=this.eu)?t:this.eu=l4(this)}constructor(t){super(t),this.Oc=[],this.Fyt=t.Fyt,this.fne=t.fne||Qe.SINGLE,this.Ane=t.Ane,this.Sne=t.Sne,this._ne=t.Tne,this.kne=t.kne}},m4="com.theoplayer.theoads.interstitial",g4="com.theoplayer.theoads.overlay",p4=class{get Ene(){return this.xne}Rne(t){this.Ine=new EventSource(t),this.Ine.addEventListener("adbreak",this.Cne),this.Ine.addEventListener("streaminfo",this.Pne)}Dne(t){if(!ms(this.Nne,t)){this.Nne.push(t);for(const e of t.lC)this.Mne(e);t.bn(Se.VI,this.qn),t.bn(Se.UI,this.zn)}}Lne(t){if(ms(this.Nne,t)){we(this.Nne,t),t.vn(Se.VI,this.qn),t.vn(Se.UI,this.zn);for(const e of t.lC)this.Bne(e)}}Mne(t){!this.One&&function(t){return t.Lt===Li.eW&&t.Tw===Lr.DATE_RANGE}(t)&&this.Fne!==t?this.Vne(t):this.One&&function(t){return t.Lt===Li.eW&&t.Tw===Lr.ID3}(t)&&this.Wne!==t&&this.Une(t)}Bne(t){this.Fne===t?this.Vne(void 0):this.Wne===t&&this.Une(void 0)}Vne(t){const e=this.Fne;if(void 0!==e){if(e.L)for(const t of e.L.lC)this.Gne(t);e.vn(No.HI,this.Hne),e.vn(No.qI,this.Zne),e.vn(No.KI,this.Xne),e.vn(No.XI,this.zne),e.CE=bh.LC}if(this.Fne=t,void 0!==t){if(t.L)for(const e of t.L.lC)this.qne(e);t.bn(No.HI,this.Hne),t.bn(No.qI,this.Zne),t.bn(No.KI,this.Xne),t.bn(No.XI,this.zne),t.CE=bh.LC}}Une(t){const e=this.Wne;if(void 0!==e){if(e.L)for(const t of e.L.lC)this.Gne(t);e.vn(No.HI,this.Yne),e.vn(No.KI,this.Xne),e.vn(No.XI,this.zne),e.CE=bh.LC}if(this.Wne=t,void 0!==t){if(t.L)for(const e of t.L.lC)this.Kne(e);t.bn(No.HI,this.Yne),t.bn(No.KI,this.Xne),t.bn(No.XI,this.zne),t.CE=bh.LC}}jne(t){try{var e,i;const s=JSON.parse(t.data),n=s.networkCode,r=null==(e=s.assetKeys)?void 0:e[0];this.Jne.Qne(n,r),null==(i=this.Ine)||i.removeEventListener("streaminfo",this.Pne)}catch(t){Ms.Wp("Error parsing the Server sent stream info",t)}}$ne(t){const e=this.Jne.bR;if(void 0!==e)try{const n=JSON.parse(t.data);var i;const r=null!=(i=n.podDuration)?i:n.adBreakDuration;if(void 0===r)return void Ms.Wp("Tried to schedule an ad break without knowing the duration");const o=(Date.parse(n.startDate)-e.getTime())/1e3;if(o<=-r)return;const h="theo-ads://dai.break/?d="+r,a=this.Jne.xR()+o,u=n.networkCode,c=n.assetKey,l=n.podId?x(n.podId):void 0;var s;const d=new v4({o:n.id,WO:a,Fyt:null!=(s=n.assetURI)?s:h,fne:this.tre||Qe[n.layout],Ane:u,Sne:c,pBt:r,une:l,Tne:n.backdropURI,wvt:n.startPTS,kne:n.eabnVersion});this.ere(d,void 0)}catch(t){Ms.Wp("Error parsing the Server sent event",t)}else Ms.Wp("Tried to schedule an ad break without knowing the Program Date Time of the player")}qne(t){if((t.mBt===m4||t.mBt===g4)&&t.wBt["X-ASSET-URI"])switch(t.mBt){case g4:try{var e;const i=atob(t.wBt["X-COM-THEOPLAYER-THEOADS-OVERLAY-PROPERTIES"]),s=JSON.parse(i),n=d4[s.type],r=this.Jne.ire(t.WO),o=isFinite(t.UO)?this.Jne.ire(t.UO):void 0,h=new _4({o:t.o,Tw:n||d4.image,WO:r,UO:o,ct:t.ct,pBt:t.pBt,fo:y4(s.position),Nb:b4(s.size),wne:s.opacity,yne:w4(s.gamProperties),cjt:null==(e=s.resourceURI)?void 0:e.map((t=>function(t){const e=f4[t.type];let i=t.default;Z.Qs&&t.phone?i=t.phone:Z.gg&&t.tv&&(i=t.tv);return{Tw:e,Fyt:i}}(t))),bne:s.clickThroughURI});this.ere(h,t)}catch(t){Ms.Wp(t)}break;case m4:{const e=t.wBt["X-RESUME-OFFSET"],n=this.sre||t.wBt["X-ASSET-URI"],r=Ms.Ih(n);var i;const o=null!=(i=r.searchParams.get("n"))?i:void 0;var s;const h=null!=(s=r.searchParams.get("k"))?s:void 0,a=this.Jne.ire(t.WO),u=isFinite(t.UO)?this.Jne.ire(t.UO):void 0;let c;(function(t){return Cl(t,"theo-ads://dai.break")})(n)&&(c=function(t){const e=t.split("?")[1],i={},s=new URLSearchParams(e);return i.d=Number(s.get("d"))||void 0,i.k=s.get("k")||void 0,i.n=s.get("n")||void 0,i.p=Number(s.get("p"))||void 0,i}(n));const l=new v4({o:t.o,WO:a,Fyt:n,fne:this.tre||Qe[t.wBt["X-COM-THEOPLAYER-THEOADS-LAYOUT"]]||Qe.SINGLE,Ane:o,Sne:h,Tne:t.wBt["X-COM-THEOPLAYER-THEOADS-BACKDROP"],UO:u,ct:t.ct,pBt:t.pBt,une:null==c?void 0:c.p,rne:void 0!==e?Number(e):void 0});this.ere(l,t),this.nre=l}}}Kne(t){const e=t.U;if(!function(t){return"GEO"===t.id||"GEOB"===t.id}(e)||!function(t){return"Anvatos"===t.description&&"application/json"===t.mimeType}(e))return;const i=Va(new DataView(e.data),new Ri),s=new gv(i),n=s.get("type");if("cue"===n){let e=Number(s.get("duration"))/1e3||void 0;const i=new gv(s.get("payload")),n=Number(i.get("dur"))||void 0,r=Number(i.get("s_bd"))||void 0;if(void 0!==n?e=n:void 0!==r&&(e=r/10),!e)return void 0;const o="theo-ads://dai.break/?d="+e,h=Number(s.get("pts"))||void 0,a=this.Jne.ire(t.WO),u=new v4({o:this.sre||t.o,WO:a,Fyt:o,fne:this.tre||Qe.SINGLE,pBt:e,wvt:h});this.ere(u,t)}else if("cue_end"===n){const e=this.nre;e&&e.ir({ct:this.Jne.ire(t.WO)-e.WO})}}rre(t){const e=this.ore.get(t.IC);e&&this.Jne.hre(e.WO)}are(t){for(const e of this.xne)if(t.o===e.o&&t.Tw===e.Tw)return!0;return!1}ure(t){const e=[],i=this.Jne.aI().start(0);for(const s of this.lre)if(s.ene<i)e.push(s);else if(t.o===s.o&&t.Tw===s.Tw)return!0;for(const t of e)we(this.lre,t);return!1}ere(t,e){var i;const s=t.WO+(null!=(i=t.ct)?i:1/0);this.are(t)||this.ure(t)||this.Jne.xR()>=s||(this.xne.push(t),e?this.ore.set(e.IC,t):this.lre.push(t),this.Jne.ere(t))}dre(t){const e=this.ore.get(t.IC);if(void 0===e)return;const i=t.wBt["X-RESUME-OFFSET"],s=isFinite(t.UO)?this.Jne.ire(t.UO):void 0;e.ir({ct:t.ct,UO:s,rne:void 0!==i?Number(i):void 0})}Gne(t){this._re(t)}_re(t){void 0!==this.ore.get(t.IC)&&this.ore.delete(t.IC)}vre(t){t.forEach((t=>this.mre(t)))}mre(t){we(this.xne,t)}nr(){var t,e,i;this.nre=void 0,this.Vne(void 0),this.Une(void 0);for(const t of this.Nne.slice())this.Lne(t);En(this.Nne),En(this.xne),En(this.lre),this.ore.clear(),null==(t=this.Ine)||t.removeEventListener("adbreak",this.Cne),null==(e=this.Ine)||e.removeEventListener("streaminfo",this.Pne),null==(i=this.Ine)||i.close(),this.Ine=void 0}yn(){this.nr()}constructor(t){this.One=!1,this.xne=[],this.lre=[],this.ore=ne(),this.Nne=[],this.qn=t=>{this.Mne(t.Ht)},this.zn=t=>{this.Bne(t.Ht)},this.Hne=t=>{this.qne(t.FO)},this.Yne=t=>{this.Kne(t.FO)},this.Xne=t=>{this.rre(t.FO)},this.zne=t=>{this.Gne(t.FO)},this.Zne=t=>{this.dre(t.FO)},this.Cne=t=>{this.$ne(t)},this.Pne=t=>{this.jne(t)},this.Jne=t}};function w4(t){if(!t)return;let e=t.sz.default;return Z.Qs&&t.sz.phone?e=t.sz.phone:Z.gg&&t.sz.tv&&(e=t.sz.tv),{wre:t.iu,yre:e}}function y4(t){let e,i,s,n;return t.top&&t.top>=0&&t.top<=100?e=t.top:t.bottom&&t.bottom>=0&&t.bottom<=100?i=t.bottom:e=10,t.left&&t.left>=0&&t.left<=100?s=t.left:t.right&&t.right>=0&&t.right<=100?n=t.right:s=10,{M7:e,N7:i,D7:s,P7:n}}function b4(t){let e,i;return e=t.width&&t.width>=0&&t.width<=100?t.width:10,i=t.height&&t.height>=0&&t.height<=100?t.height:10,{ji:e,Ti:i}}r();var A4=class extends Co{get Are(){return this.na.Are.map((t=>t.int()))}get Sre(){return this.na.Sre.map((t=>t.int()))}Tre(t){this.na.kre(t)}get wa(){var t;return null!=(t=this.eu)?t:this.eu=function(t){return{get currentInterstitials(){return t.Are},get scheduledInterstitials(){return t.Sre},replaceAdTagParameters(e){t.Tre(e)},addEventListener(e,i){t.bn(e,i)},removeEventListener(e,i){t.vn(e,i)}}}(this)}constructor(t){super(),this.na=t}};r(),r();var Ho=Promise;r();var S4=class extends ys{Ere(t){this.Oc.push(t)}get tI(){return this.xre.tI}get aQt(){return vt.Hst}get ZJt(){var t;return null!=(t=this.xre.ct)?t:-1}get eOt(){return this.xre.WO}get wJt(){}get Rre(){return this.xre}constructor(t){var e;super(t.WO),this.xre=t,this.XJt=null!=(e=this.xre.ct)?e:-1}},T4=function(t){return t[t.GOOGLE=0]="GOOGLE",t[t.DEFAULT=1]="DEFAULT",t}({}),k4=class extends Co{get YJt(){return this.w$t}get Ire(){return this.Cre}get snt(){return this.p$t}get n8t(){return this.a$t}Pre(){this.Dre()}ere(t){const e=new S4(t);this.w$t.push(e)}mre(t){const e=this.p3t(t);we(this.w$t,e)}p3t(t){return Fo(this.w$t,(e=>e.Rre===t))}Nre(){this.S3t.bn(Ti.Uy,this.Mre),this.S3t.bn(Zc.OL,this.Lre),this.S3t.bn(Ti.Dy,this.Bre),this.S3t.bn(Ti.hb,this.S6)}Dre(){this.S3t.vn(Ti.Uy,this.Mre),this.S3t.vn(Zc.OL,this.Lre),this.S3t.vn(Ti.Dy,this.Bre),this.S3t.vn(Ti.hb,this.S6)}pd(t){var e;null==(e=this.Cre)||e.sne(this.Xse(t.currentTime))}async Ore(t,e,i,s){const n={stack:[],error:void 0,hasError:!1};try{var r;this.Nre(),null==(r=this.vW)||r.jw();const o=gs(n,da.$w([e]),!1);this.vW=o;const h=o.Uw;return J(h),await this.S3t.Ca(_c(t),h),Z.su&&Z.eg&&(this.S3t.xI(),this.S3t.EI()),i&&this.S3t.RR(i),s&&this.S3t.xI(),await Ho.race([this.py("aderror",h).then(Ho.reject),this.py("adloaded",h).then((()=>Ho.resolve()))])}catch(t){n.error=t,n.hasError=!0}finally{co(n)}}Md(t){this.Cre&&(this.Cre.sne(t),this.Cre.tI=!0,this.mre(this.Cre),this.Cre=void 0),this.a$t&&(this.I3t._o(new xn(this.a$t,t)),this.a$t=void 0),this.p$t&&(this.I3t._o(new Hh(this.p$t)),this.p$t=void 0),this.Dre()}Xse(t){var e,i;return(null!=(i=null==(e=this.Cre)?void 0:e.WO)?i:0)+t}async nr(){var t;null==(t=this.vW)||t.jw(),this.vW=void 0,this.Dre(),this.w$t=[],this.a$t=void 0,this.p$t=void 0,this.Cre=void 0}async yn(){await this.nr(),await this.Fre.yn()}constructor(t,e,i){super(),this.I3t=new Ju,this.w$t=[],this.S6=t=>{this.pd(t)},this.Bre=()=>{this.Dre()},this.Mre=()=>{this._o(new pe("adloading"))},this.Lre=()=>{this._o(new pe("adloaded"))},this.S3t=t,this.Fre=e,this.w$t=i,this.Fre.Vre(this),this.I3t=e.h2t}};r();var E4=class{Vre(t){this.Wre=t}get h2t(){return this.I3t}get g2t(){var t;return void 0!==(null==(t=this.Wre)?void 0:t.snt)}get s2t(){return vt.Hst}get ent(){var t;return(null==(t=this.Wre)?void 0:t.n8t)?[this.Wre.n8t]:[]}get snt(){var t,e;return null!=(e=null==(t=this.Wre)?void 0:t.snt)?e:null}get nnt(){return this.Wre?on(this.Wre.YJt,(t=>{var e;const i=t.zc;if(t===(null==(e=this.Wre)?void 0:e.snt)&&void 0!==this.Wre.n8t){const t=i.indexOf(this.Wre.n8t);if(t>=0)return i.slice(t+1)}return t.tI?[]:i})):[]}get rnt(){return this.Wre?this.Wre.YJt.filter((t=>{var e;return t===(null==(e=this.Wre)?void 0:e.snt)||!t.tI})):[]}MD(){}hnt(t){}yn(){return this.Wre=void 0,Promise.resolve()}constructor(){this.I3t=new Ju}};r(),r(),r(),r();var x4=class extends Zi{ka(){return Lo(this)}get aQt(){return vt.Hst}constructor(t){super(t,function(t){return t===Qe.LSHAPE_CONTENT?Es.M2t:Es.Mjt}(t.Rre.fne)),t.Ere(this)}};var R4=class extends x4{h$t(){return this.Ure.getAdSystem()}c$t(){return this.sd.Rre.Fyt}get o(){return this.Ure.getAdId()}get ct(){return this.Ure.getDuration()}get QYt(){var t,e;return null==(e=this.Ure)||null==(t=e.ad)?void 0:t.clickThroughUrl}get bYt(){return this.Ure.getCreativeId()}get xKt(){return this.Ure.getSkipTimeOffset()}constructor(t,e){super(t),this.Ure=e}};r();var I4=class extends x4{constructor(t){super(t),this.U2t=!0,this.MA=t.XJt}};r(),r();var C4=class extends pe{constructor(t,e,i){super(t,new Date),this.Gre=e,this.lnt=i}},rs=function(t){return t.LOADED="DAILoaded",t.AD_BREAK_STARTED="DAIAdBreakStarted",t.AD_BREAK_ENDED="DAIAdBreakEnded",t.AD_PERIOD_STARTED="DAIAdPeriodStarted",t.AD_PERIOD_ENDED="DAIAdPeriodEnded",t.AD_PROGRESS="DAIAdProgress",t.CUEPOINTS_CHANGED="DAICuePointsChanged",t.CLICK="DAIClick",t.ERROR="DAIError",t.STARTED="DAIStarted",t.FIRST_QUARTILE="DAIFirstQuartile",t.MIDPOINT="DAIMidpoint",t.STREAM_INITIALIZED="DAIStreamInitialized",t.THIRD_QUARTILE="DAIThirdQuartile",t.COMPLETE="DAIComplete",t}({}),P4=class extends C4{constructor(t,e){super("DAILoaded",t,e)}},D4=class extends C4{constructor(t,e){super("DAIAdBreakStarted",t,e)}},N4=class extends C4{constructor(t,e){super("DAIAdBreakEnded",t,e)}},M4=class extends C4{constructor(t,e){super("DAIAdProgress",t,e)}},L4=class extends C4{constructor(t,e){super("DAICuePointsChanged",t,e)}},B4=class extends C4{constructor(t,e){super("DAIClick",t,e)}},O4=class extends C4{constructor(t,e){super("DAIError",t,e)}},F4=class extends C4{constructor(t,e){super("DAIStarted",t,e)}},V4=class extends C4{constructor(t,e){super("DAIFirstQuartile",t,e)}},W4=class extends C4{constructor(t,e){super("DAIMidpoint",t,e)}},U4=class extends C4{constructor(t,e){super("DAIStreamInitialized",t,e)}},G4=class extends C4{constructor(t,e){super("DAIThirdQuartile",t,e)}},H4=class extends C4{constructor(t,e){super("DAIComplete",t,e)}};var Z4=class extends Co{replaceAdTagParameters(t){return this.Hre.replaceAdTagParameters(null!=t?t:null)}Zre(t){return this.Hre.contentTimeForStreamTime(t)}Xre(t){return this.Hre.streamTimeForContentTime(t)}YWt(t,e){const i=function(t){return"vod"===t.availabilityType?new s.google.ima.dai.api.VODStreamRequest(ol({},X4(t),{contentSourceId:t.contentSourceID,videoId:t.videoID})):new s.google.ima.dai.api.LiveStreamRequest(ol({},X4(t),{assetKey:t.assetKey}))}(t);t.enableNonce&&(i.enableNonce=!0),this.Hre.requestStream(i)}nr(){this.zre(!1),this.Hre.reset()}yn(){this.Ro();const t=google.ima.dai.api.StreamEvent.Type;this.Hre.removeEventListener(t.AD_BREAK_STARTED,this.qre),this.Hre.removeEventListener(t.AD_PROGRESS,this.Yre),this.Hre.removeEventListener(t.CLICK,this.q$t),this.Hre.removeEventListener(t.COMPLETE,this.Kre),this.Hre.removeEventListener(t.CUEPOINTS_CHANGED,this.jre),this.Hre.removeEventListener(t.ERROR,this.Ss),this.Hre.removeEventListener(t.FIRST_QUARTILE,this.Qre),this.Hre.removeEventListener(t.LOADED,this.Jre),this.Hre.removeEventListener(t.MIDPOINT,this.$re),this.Hre.removeEventListener(t.STARTED,this.toe),this.Hre.removeEventListener(t.STREAM_INITIALIZED,this.eoe),this.Hre.removeEventListener(t.THIRD_QUARTILE,this.ioe),this.Hre.removeEventListener(t.AD_BREAK_ENDED,this.soe),this.nr(),this.noe&&ze(this.noe)}roe(t){this.Hre.onTimedMetadata(t)}ooe(t,e,i){this.Hre.processMetadata(t,e,i)}hoe(t){const e=this.Hre.previousCuePointForStreamTime(t);if(e)return{UO:e.end,WO:e.start,tI:e.played}}aoe(t,e){const i=this.hoe(t);if(!i)return;const s=t>e&&i.UO>e,n=i.UO>t&&i.WO<=t;return i.tI||!s&&!n?void 0:i.WO}zre(t){this.S0t&&(this.S0t.style.display=t?"block":"none")}constructor(t,e,i){super(),this.Hre=t,this.S0t=e,this.noe=i,this.qre=t=>{this.zre(!0);const e=z4(t),i=Y4(t);this._o(new D4(e,i))},this.soe=t=>{this.zre(!1);const e=z4(t),i=Y4(t);this._o(new N4(e,i))},this.Yre=t=>{const e=z4(t),i=Y4(t);this._o(new M4(e,i))},this.q$t=t=>{const e=z4(t),i=Y4(t);this._o(new B4(e,i))},this.Kre=t=>{const e=z4(t),i=Y4(t);this._o(new H4(e,i))},this.jre=t=>{const e=z4(t),i=Y4(t);this._o(new L4(e,i))},this.Ss=t=>{const e=z4(t),i=Y4(t);this._o(new O4(e,i))},this.Qre=t=>{const e=z4(t),i=Y4(t);this._o(new V4(e,i))},this.Jre=t=>{const e=z4(t),i=Y4(t);this._o(new P4(e,i))},this.$re=t=>{const e=z4(t),i=Y4(t);this._o(new W4(e,i))},this.toe=t=>{const e=z4(t),i=Y4(t);this._o(new F4(e,i))},this.eoe=t=>{const e=z4(t),i=Y4(t);this._o(new U4(e,i))},this.ioe=t=>{const e=z4(t),i=Y4(t);this._o(new G4(e,i))},this.S0t&&(this.S0t.style.display="none",this.Hre.setClickElement(this.S0t));const s=google.ima.dai.api.StreamEvent.Type;this.Hre.addEventListener(s.AD_BREAK_STARTED,this.qre),this.Hre.addEventListener(s.AD_PROGRESS,this.Yre),this.Hre.addEventListener(s.CLICK,this.q$t),this.Hre.addEventListener(s.COMPLETE,this.Kre),this.Hre.addEventListener(s.CUEPOINTS_CHANGED,this.jre),this.Hre.addEventListener(s.ERROR,this.Ss),this.Hre.addEventListener(s.FIRST_QUARTILE,this.Qre),this.Hre.addEventListener(s.LOADED,this.Jre),this.Hre.addEventListener(s.MIDPOINT,this.$re),this.Hre.addEventListener(s.STARTED,this.toe),this.Hre.addEventListener(s.STREAM_INITIALIZED,this.eoe),this.Hre.addEventListener(s.THIRD_QUARTILE,this.ioe),this.Hre.addEventListener(s.AD_BREAK_ENDED,this.soe)}};function X4(t){const e=google.ima.dai.api.StreamRequest.StreamFormat;var i;return{apiKey:t.apiKey,authToken:t.authToken,format:"dash"===t.format?e.DASH:e.HLS,networkCode:t.networkCode,streamActivityMonitorId:t.streamActivityMonitorID,adTagParameters:t.adTagParameters,omidAccessModeRules:null!=(i=z1(t.omidAccessModeRules))?i:{}}}function z4(t){const e=t.getStreamData(),i=e.adProgressData;let s;i&&(s={E6t:i.adBreakDuration,uoe:i.duration,x6t:i.adPosition,ER:i.currentTime,ct:i.duration,R6t:i.totalAds});return{coe:s,loe:(e.cuepoints||[]).map((t=>({WO:t.start,UO:t.end,tI:t.played}))),doe:e.errorMessage||void 0,foe:e.manifestFormat||void 0,_oe:e.streamId||void 0,voe:(e.subtitles||[]).map((t=>({moe:t.webvtt,goe:t.ttml,gs:t.language}))),Xu:e.url}}function q4(t){return{GYt:t.getAdSlotId(),H2t:t.getContent(),Mk:t.getContentType(),Ti:t.getHeight(),ji:t.getWidth()}}function Y4(t){const e=t.getAd();if(!e)return;const i=e.getAdPodInfo(),s=e.getCompanionAds().map(q4);return{vKt:e.getAdId(),d9t:{x6t:i.getAdPosition(),ZJt:i.getMaxDuration(),Sse:i.getPodIndex(),eOt:i.getTimeOffset(),R6t:i.getTotalAds()},jqt:e.getAdSystem(),kse:e.getAdvertiserName(),WYt:e.getApiFramework(),rYt:s,bYt:e.getCreativeId(),t8t:e.getCreativeAdId(),Ese:e.getDealId(),VN:e.getDescription(),ct:e.getDuration(),oH:e.getTitle(),poe:e.getUniversalAdIdRegistry(),woe:e.getUniversalAdIdValue(),Y9t:e.getVastMediaHeight(),q9t:e.getVastMediaWidth(),H9t:e.getWrapperAdIds(),Z9t:e.getWrapperAdSystems(),X9t:e.getWrapperCreativeIds()}}function K4(){const t=h.body.lastElementChild;if(t instanceof HTMLIFrameElement&&"Advertisement"===t.title)return t}var j4="ott_placement",Q4="theoads_slot",J4="urn:google:dai:2018",$4=class extends k4{get yoe(){return T4.GOOGLE}async boe(t,e,i,s){t&&e&&(t!==this.Aoe||e!==this.Soe)?await this._J(t,e,i,s):i!==this.Toe&&this.kre(i)}async _J(t,e,i,n){if(void 0===this.Hre){var r,o;if(void 0===(null==(o=s.google)||null==(r=o.ima)?void 0:r.dai))throw new g("IMA DAI SDK missing for THEOads");this.Hre=new google.ima.dai.api.StreamManager(this.S3t.we.querySelector("video"),this.koe)}this.Aoe=t,this.Soe=e,this.Toe=i;const h=this.Hre;this.Eoe(),h.reset();const a=new google.ima.dai.api.PodStreamRequest;a.networkCode=this.Aoe,a.customAssetKey=this.Soe,a.adTagParameters=this.Toe,this.xoe&&(a.streamActivityMonitorId=this.xoe),a.format="hls";const u=this.Roe([google.ima.dai.api.StreamEvent.Type.STREAM_INITIALIZED,google.ima.dai.api.StreamEvent.Type.ERROR]).then((t=>{if(t.type===google.ima.dai.api.StreamEvent.Type.ERROR)throw new g("DAI stream request failed");this.Ioe=t.getStreamData(),this.Coe()}));this.Hre.requestStream(a),this.Poe=ou(u,n),await this.Poe}Roe(t,e){return new Ho(((i,s)=>{if(e&&e.Fw)return s(new Bu);const n=t=>{o(),i(t)},r=()=>{o(),s(new Bu)},o=()=>{for(const e of t){var i;null==(i=this.Hre)||i.removeEventListener(e,n)}e&&e.Vw(r)};for(const e of t){var h;null==(h=this.Hre)||h.addEventListener(e,n)}e&&e.Ww(r)}))}kre(t){var e;this.Toe=t,this.Doe=!this.Toe[j4],null==(e=this.Hre)||e.replaceAdTagParameters(t)}async Noe(t){var e,i;return(null==(e=this.Cre)?void 0:e.une)&&!S(this.Cre.une)?this.Cre.une:this.Moe&&(null==(i=this.Cre)?void 0:i.wvt)?await Ci((()=>this.Loe()),t,4,500,5e3):void 0}async Loe(){const t=this.Moe+"/"+this.Aoe+"/"+this.Soe+"/"+this.Cre.wvt+".json",e=new wt({Xu:t,jk:Rr.Ak,AE:xe.GET,SE:1e3});let i;try{i=await this.S3t.fR.Qk(e)}catch(t){throw new Wr(Oo.NETWORK,Ls.UNKNOWN_AD_RESPONSE,"The ad's PodId could not be loaded.")}if(!ph(i))throw new Wr(Oo.NETWORK,Ls.UNKNOWN_ERROR,"Something went wrong while requesting JSON from server.");const s=await i.Kk();if(s)return s.podid}async Boe(t,e,i,s){void 0===s&&(s=!1);const n=await this.Ooe(t,e,i);return this.Ore({sources:{src:n}},i,void 0,s)}async Ooe(t,e,i){var s;this.Cre=t;const n=t.Ane,r=t.Sne;!function(t,e,i){const s=new gv(t.cust_params);s.set(Q4,function(t){switch(t){case Qe.DOUBLE:return"double";case Qe.SINGLE:return"single";case Qe.LSHAPE_AD:case Qe.LSHAPE_CONTENT:return"l-shape"}}(e)),t.cust_params=s.toString(),i&&(t[j4]=function(t){switch(t){case Qe.DOUBLE:return"3";case Qe.SINGLE:return"99";case Qe.LSHAPE_AD:case Qe.LSHAPE_CONTENT:return"4"}}(e))}(this.Toe,t.fne,this.Doe),await this.boe(n,r,this.Toe,i);const o=Ms.Ih(t.Fyt),h=Number(o.searchParams.get("d")),a=_.floor(1e3*_.min(h,t.ene-e)),u=await this.Noe(i);if(!u)throw new g("Something went wrong with retrieving the PodID from the server.");(null==(s=this.Ioe)?void 0:s.streamId)&&await this.Poe;const c=Ms.Ih("https://dai.google.com/linear/pods/v1/hls/network/"+this.Aoe+"/custom_asset/"+this.Soe);return"V2"===t.kne?c.pathname+="/ad_break_id/"+u+".m3u8":c.pathname+="/pod/"+u+".m3u8",c.searchParams.set("stream_id",this.Ioe.streamId),c.searchParams.set("pd",String(a)),c.toString()}Nre(){this.S3t.bn(Ti.Dy,this.Foe),this.S3t.nt.bn(Se.VI,this.qn),super.Nre()}Dre(){super.Dre(),this.S3t.vn(Ti.Dy,this.Foe),this.S3t.nt.vn(Se.VI,this.qn)}Coe(){this.Hre&&(this.Hre.addEventListener(google.ima.dai.api.StreamEvent.Type.ERROR,this.Voe),this.Hre.addEventListener(google.ima.dai.api.StreamEvent.Type.CLICK,this.Voe),this.Hre.addEventListener(google.ima.dai.api.StreamEvent.Type.STARTED,this.Voe),this.Hre.addEventListener(google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,this.Voe),this.Hre.addEventListener(google.ima.dai.api.StreamEvent.Type.MIDPOINT,this.Voe),this.Hre.addEventListener(google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,this.Voe),this.Hre.addEventListener(google.ima.dai.api.StreamEvent.Type.COMPLETE,this.Voe),this.Hre.addEventListener(google.ima.dai.api.StreamEvent.Type.AD_PERIOD_STARTED,this.Voe),this.Hre.addEventListener(google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,this.Voe),this.Hre.addEventListener(google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,this.Voe),this.Hre.addEventListener(google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,this.Voe),this.Hre.addEventListener(google.ima.dai.api.StreamEvent.Type.RESUMED,this.Voe))}Eoe(){this.Hre&&(this.Hre.removeEventListener(google.ima.dai.api.StreamEvent.Type.ERROR,this.Voe),this.Hre.removeEventListener(google.ima.dai.api.StreamEvent.Type.CLICK,this.Voe),this.Hre.removeEventListener(google.ima.dai.api.StreamEvent.Type.STARTED,this.Voe),this.Hre.removeEventListener(google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,this.Voe),this.Hre.removeEventListener(google.ima.dai.api.StreamEvent.Type.MIDPOINT,this.Voe),this.Hre.removeEventListener(google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,this.Voe),this.Hre.removeEventListener(google.ima.dai.api.StreamEvent.Type.COMPLETE,this.Voe),this.Hre.removeEventListener(google.ima.dai.api.StreamEvent.Type.AD_PERIOD_STARTED,this.Voe),this.Hre.removeEventListener(google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,this.Voe),this.Hre.removeEventListener(google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,this.Voe),this.Hre.removeEventListener(google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,this.Voe),this.Hre.removeEventListener(google.ima.dai.api.StreamEvent.Type.RESUMED,this.Voe))}Md(t){super.Md(t),this.Woe=void 0}async nr(){var t;await super.nr(),this.Eoe(),null==(t=this.Hre)||t.reset(),this.Hre=void 0,this.Ioe=void 0,this.Poe=void 0,this.xoe=void 0,this.Soe=void 0,this.Aoe=void 0,this.Doe=!0;const e=K4();void 0!==e&&ze(e)}async yn(){var t;await super.yn(),null==(t=this.Uoe)||t.yn()}constructor(t,e,i,s,n,r,o){super(t,e,s),this.Doe=!0,this.Foe=()=>{this.Md(this.Xse(this.S3t.xR()))},this.qn=t=>{const e=t.Ht;if(e.Lt===Li.eW&&!(e.Tw!==Lr.ID3&&e.Tw!==Lr.EVENT_STREAM||e.Tw===Lr.EVENT_STREAM&&e.BC!==J4)){if(e.bn(No.HI,this.Goe),e.bn(No.XI,this.zne),e.L)for(const t of e.L.lC)this.Goe(new Ps(t));e.CE=bh.LC,this.Uoe=e}},this.Goe=t=>{t.FO.bn(Ct.rO,this.Hoe)},this.zne=t=>{t.FO.vn(Ct.rO,this.Hoe)},this.Hoe=t=>{var e,i;if(this.Ioe)if((null==(e=this.Uoe)?void 0:e.Tw)===Lr.ID3){const e=t.FO.U;var s;if(VL(e))if(this.Woe!==e.text)this.Woe=e.text,null==(s=this.Hre)||s.processMetadata("ID3",e.text,t.FO.WO)}else if((null==(i=this.Uoe)?void 0:i.Tw)===Lr.EVENT_STREAM){var n;const e=t.FO.U;null==(n=this.Hre)||n.processMetadata(J4,e,t.FO.WO)}},this.Voe=t=>{switch(this.p$t&&(this.p$t.XJt=this.S3t.jd()-this.S3t.xR()),t.type){case google.ima.dai.api.StreamEvent.Type.ERROR:this.I3t._o(new Fh(Oo.GENERAL));break;case google.ima.dai.api.StreamEvent.Type.AD_PERIOD_STARTED:this.p$t=this.p3t(this.Cre),this.I3t._o(new Ua(this.p$t)),this.Zoe=Ms.Gg(this.Xoe,250);break;case google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED:Ms.Ug(this.Zoe);break;case google.ima.dai.api.StreamEvent.Type.STARTED:{var e;const i=t.getAd();this.a$t=new R4(this.p$t,i),null==(e=this.Cre)||e.ir({ad:this.a$t}),this.I3t._o(new cn(this.a$t,this.Xse(this.S3t.xR())));break}case google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE:this.I3t._o(new cs(this.a$t,this.Xse(this.S3t.xR())));break;case google.ima.dai.api.StreamEvent.Type.MIDPOINT:this.I3t._o(new Is(this.a$t,this.Xse(this.S3t.xR())));break;case google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE:this.I3t._o(new ks(this.a$t,this.Xse(this.S3t.xR())));break;case google.ima.dai.api.StreamEvent.Type.COMPLETE:this.I3t._o(new xn(this.a$t,this.Xse(this.S3t.xR()))),this.a$t=void 0;break;case google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED:if(!this.p$t)break;this.p$t.XJt>1&&this.Xoe()}},this.Xoe=()=>{var t;this.a$t=new I4(this.p$t),null==(t=this.Cre)||t.ir({ad:this.a$t}),this.I3t._o(new cn(this.a$t,this.Xse(this.S3t.xR())))},this.koe=i,this.Toe=null!=n?n:{},this.Doe=!this.Toe[j4],this.xoe=r,this.Moe=o}};var t5=class{get Are(){return this.zoe}get qoe(){return this.Yoe}get Koe(){return this.Toe}set Koe(t){this.Toe=t}async joe(t){this.zoe.push(t),this.Yoe.style.display="";const e=h.createElement("div");e.className="theoplayer-theoads-overlay",e.style.display="",this.Qoe.set(t.o,e);const i=h.createElement("a"),s=await this.Joe(t);if(s.clickThroughURI&&(this.Yoe.style.zIndex="11",i.href=s.clickThroughURI,i.target="zu",i.setAttribute("rel","noopener"),i.addEventListener("mousedown",this.z7t),i.addEventListener("touchend",this.z7t)),t.pne===d4.image&&(i.style.backgroundImage="url("+s.resourceURI+")",i.style.backgroundSize="contain",i.style.backgroundPosition="center",i.style.backgroundRepeat="no-repeat",s.impressionURI)){const t=h.createElement("img");t.src=s.impressionURI,t.style.display="none",i.appendChild(t)}Zo(i),e.appendChild(i),e.style.cssText=this.$oe(t),this.Yoe.appendChild(e)}the(t){const e=this.Qoe.get(t.o);e&&(this.Yoe.contains(e)&&this.Yoe.removeChild(e),this.Qoe.delete(t.o),0===this.Qoe.size&&(this.Yoe.style.display="none"),we(this.zoe,t))}ehe(){this.Qoe.forEach(((t,e)=>{this.Yoe.contains(t)&&this.Yoe.removeChild(t)})),this.Qoe.clear(),this.zoe=[]}$oe(t){const e=t.fo;let i=0,s=1;if(this.Yoe.clientWidth>0&&this.Yoe.clientHeight>0){const t=this.na.vI/this.na.dI,e=this.qoe.clientWidth,n=this.qoe.clientHeight,r=e/t,o=(n-r)/2;i=0===n?0:_.floor(o/n*100),s=0===n?1:_.floor(100*(1-(n-r)/n))/100}let n="position:absolute;zIndex:10;";if(e.D7&&(n+="left:"+e.D7+"%;"),e.P7&&(n+="right:"+e.P7+"%;"),e.M7){n+="top:"+(e.M7*s+i)+"%;"}if(e.N7){n+="bottom:"+(e.N7*s+i)+"%;"}const r=t.Nb;return r.ji&&(n+="width:"+r.ji+"%;"),r.Ti&&(n+="height:"+r.Ti*s+"%;"),t.wne&&t.wne>0&&t.wne<=100&&(n+="opacity:"+t.wne/100+";"),n}async ihe(t){if(!t)return;const e=this.she(t);return e?await this.nhe(e,this.fW):void 0}async Joe(t){const e={resourceURI:""},i=await this.ihe(t.yne);if(i)e.resourceURI=i.image,e.impressionURI=i.impression;else if(t.cjt){const i=Fo(t.cjt,(t=>t.Tw===f4.svg));i&&(e.resourceURI=i.Fyt);const s=Fo(t.cjt,(t=>t.Tw===f4.png));s&&(e.resourceURI=s.Fyt)}var s;return e.clickThroughURI=null!=(s=null==i?void 0:i.clickThrough)?s:t.QYt,t.ir({imageUrl:e.resourceURI,clickThrough:e.clickThroughURI}),e}she(t){const e=new gv(this.Toe);return e.set("iu",t.wre),e.set("sz",t.yre),e.set("c",String(this.rhe)),e.get(j4)||e.set(j4,"5"),"https://securepubads.g.doubleclick.net/gampad/adx?"+e.toString()}async nhe(t,e){const i=new wt({Xu:t,jk:Rr.Ak,AE:xe.GET});try{const t=await e.Qk(i);return await t.Kk()}catch(t){throw new Wr(Oo.NETWORK,Ls.UNKNOWN_AD_RESPONSE,"The ad source could not be loaded.",t)}}nr(){this.ehe(),this.Yoe.style.display="none"}constructor(t,e,i){this.zoe=[],this.Qoe=Oh(),this.rhe=(new Date).getTime(),this.ohe=()=>{this.zoe.forEach((t=>{this.Qoe.get(t.o).style.cssText=this.$oe(t)}))},this.z7t=t=>{t.stopPropagation()},this.na=t,this.na.bn(nu.mn,this.ohe);const s=h.createElement("div");s.style.display="none",s.className="theoads-image-overlays-container",e.appendChild(s),Zo(s),this.Yoe=s,this.hhe=i,this.fW=Ms.fR}};r();function e5(t){return t&&t.integration===lu.THEOADS}yh.Vg.PZ(new class{get $1t(){return vt.Hst}CZ(t){return e5(t)}t2t(t,e,i){}g6(t,e,i,s){}qz(t){const e={integration:lu.THEOADS,adTagParameters:V(t.adTagParameters)?t.adTagParameters:{},useId3:Boolean(t.useId3)};return Yt(t.networkCode)&&(e.networkCode=hs(t.networkCode)),Yt(t.customAssetKey)&&(e.customAssetKey=hs(t.customAssetKey)),Yt(t.backdropDoubleBox)&&(e.backdropDoubleBox=hs(t.backdropDoubleBox)),Yt(t.backdropLShape)&&(e.backdropLShape=hs(t.backdropLShape)),Yt(t.overrideLayout)&&(e.overrideLayout=function(t){switch(t){case"single":case"l-shape":case"double":case"single-if-mobile":return t;default:return}}(t.overrideLayout)),Yt(t.overrideAdSrc)&&(e.overrideAdSrc=hs(t.overrideAdSrc)),Yt(t.retrievePodIdURI)&&(e.retrievePodIdURI=hs(t.retrievePodIdURI)),Yt(t.sseEndpoint)&&(e.sseEndpoint=hs(t.sseEndpoint)),Yt(t.streamActivityMonitorId)&&(e.streamActivityMonitorId=hs(t.streamActivityMonitorId)),e}}),r();var i5=class extends pe{constructor(t){super("addinterstitial"),this.interstitial=t}};r();var s5=class extends Ds{ka(){return new n5(this.interstitial.int())}constructor(t){super("ahe"),this.interstitial=t}},n5=class extends pe{constructor(t){super("interstitialend"),this.interstitial=t}};r();var r5=class extends Ds{ka(){return new o5(this.interstitial.int(),this.wb)}constructor(t,e){super("uhe"),this.interstitial=t,this.wb=e}},o5=class extends pe{constructor(t,e){super("interstitialerror"),this.interstitial=t,this.message=e}};r(),r();var h5=class extends x4{constructor(t,e){super(t),this.MA=_.min(e,this.sd.ZJt)}},a5=class extends k4{get yoe(){return T4.DEFAULT}boe(t,e,i,s){return Ho.resolve()}_J(t,e,i,s){return Ho.resolve()}kre(t){}Boe(t,e,i,s){let n;if(void 0===s&&(s=!1),this.Cre=t,t.WO<e){const i=_.min(t.ct,t.ene-e);n=t.ct-i,t.ir({ct:i,hne:n})}return this.Ore({sources:{src:t.Fyt}},i,n,s)}async Ooe(t,e,i){return this.Cre=t,t.Fyt}Nre(){super.Nre(),this.S3t.bn(Zc.UL,this.dhe),this.S3t.bn(Ti.Dy,this.s7),this.S3t.bn(yo.fa,this.Hzt)}Dre(){this.S3t.vn(Zc.UL,this.dhe),this.S3t.vn(Ti.Dy,this.s7),this.S3t.vn(yo.fa,this.Hzt),super.Dre()}pd(t){var e;const i=this.Xse(t.currentTime),s=this.Cre.z2t;this.Cre.sne(i);const n=this.Cre.z2t;s<.25&&n>=.25?this.I3t._o(new cs(this.a$t,i)):s<.5&&n>.5?this.I3t._o(new Is(this.a$t,i)):s<.75&&n>=.75?this.I3t._o(new ks(this.a$t,i)):(null==(e=this.Cre)?void 0:e.tI)&&this.Md(i)}Md(t){super.Md(t),this.X9=!1}async nr(){await super.nr(),this.X9=!1}constructor(...t){super(...t),this.X9=!1,this.Hzt=()=>{this._o(new Fh(Oo.GENERAL))},this.dhe=t=>{!this.X9&&this.Cre&&(this.X9=!0,this.p$t=this.p3t(this.Cre),this.a$t=new h5(this.p$t,this.S3t.jd()),this.Cre.ir({ad:this.n8t}),this.I3t._o(new Ua(this.p$t)),this.I3t._o(new cn(this.a$t,this.Xse(t.currentTime))))},this.s7=t=>{this.Md(this.Xse(t.currentTime))}}},u5="theo-ads-sgai-container",c5=class extends n1{get Are(){var t;return[null==(t=this.Wre)?void 0:t.Ire,...this.fhe.Are].filter(Bo)}get Sre(){return this._he.Ene}Lst(){return this.Dst.zc}Wst(){return this.vhe.wa}get Koe(){var t,e,i;return null!=(i=null!=(e=this.Toe)?e:null==(t=this.mhe)?void 0:t.adTagParameters)?i:{}}IR(){return this.Vs}Mst(){return this.Dst.vst}NR(){var t;return null!=(t=this.TZ)?t:super.NR()}LR(){var t;return null!=(t=this.YG)?t:super.LR()}kI(){this.Dst.kI()}ire(t){return t}async Ca(t,e){if(await super.Ca(t,e),void 0===t||void 0===t.ads)return;const i=Fo(t.ads,e5);if(void 0===i)return;this.ghe(),this.phe(),this.whe(),this.mhe=i,this.yhe=i.backdropLShape,this.fhe.Koe=i.adTagParameters,this.Dst.bn(Zc.VL,this.bhe),this.Dst.bn(Zc.FL,this.Sd),this.Ahe(),this._he.tre=function(t){switch(t){case"single":return Qe.SINGLE;case"l-shape":return Qe.LSHAPE_AD;case"double":return Qe.DOUBLE;case"single-if-mobile":return Z.Qs?Qe.SINGLE:void 0;default:return}}(this.mhe.overrideLayout),this._he.sre=this.mhe.overrideAdSrc,this._he.One=this.mhe.useId3;const s=void 0===i.networkCode||void 0===i.customAssetKey;await this.She(s)}phe(){ce(this.Vs,u5),Td(this.Vs,this.khe),Zo(this.khe),this.Vs.appendChild(this.khe)}Ehe(){Id(this.Vs,u5),Td(this.khe,this.Vs),Md(this.khe),ze(this.khe)}async She(t){var e,i,s;const n=this.J1t(),r=this.xhe();var o;const h=null!=(o=null==(e=this.Wre)?void 0:e.YJt)?o:[];var a;t&&(null==(i=this.Wre)?void 0:i.yoe)!==T4.DEFAULT&&(await(null==(a=this.Wre)?void 0:a.nr()),this.Wre=new a5(n,this.hhe,h));if(!t&&(null==(s=this.Wre)?void 0:s.yoe)!==T4.GOOGLE){var u,c,l,d,f,_,v,m,g;await(null==(u=this.Wre)?void 0:u.nr()),this.Wre=new $4(n,this.hhe,r,h,this.Koe,null==(c=this.mhe)?void 0:c.streamActivityMonitorId,null==(l=this.mhe)?void 0:l.retrievePodIdURI);const t=null!=(g=null==(d=this.Rhe)?void 0:d.Ane)?g:null==(f=this.mhe)?void 0:f.networkCode;var p;const e=null!=(p=null==(_=this.Rhe)?void 0:_.Sne)?p:null==(v=this.mhe)?void 0:v.customAssetKey;await(null==(m=this.Wre)?void 0:m.boe(t,e,this.Koe))}}async Qne(t,e){var i,s;this.Rhe||void 0===t||void 0===e||((null==(i=this.Wre)?void 0:i.yoe)!==T4.GOOGLE&&await this.She(!1),await(null==(s=this.Wre)?void 0:s.boe(t,e,this.Koe)))}BH(t){void 0===this.LR()&&(this.YG=t,this.TZ=gn(t),this._o(new Na(t)))}Ahe(){this.Dst.bn(Ti.hb,this.Ihe),this.Dst.bn(Ti.Jy,this.CX),this.Dst.bn(Ti.qy,this.RE)}Che(){this.Dst.vn(Ti.hb,this.Ihe),this.Dst.vn(Ti.Jy,this.CX),this.Dst.vn(Ti.qy,this.RE)}Phe(){this.hhe.h2t.bn("fnt",this.Dhe)}Nhe(){this.hhe.h2t.vn("fnt",this.Dhe)}x1t(){this.Mhe()}async Lhe(){this.Mhe()}Mhe(){const t=this.na.dI,e=this.na.vI;t===this.Bhe&&e===this.Ohe||(this.Bhe=t,this.Ohe=e,this._o(new P))}ere(t){var e;l5(t)&&(null==(e=this.Wre)||e.ere(t),this.hre(this.xR()));t.bn("tne",this.Fhe),this.vhe._o(new i5(t.int()))}mre(t){var e;(this._he.mre(t),l5(t))?null==(e=this.Wre)||e.mre(t):d5(t)&&(this.fhe.the(t),this.Vhe.delete(t.o));t.vn("tne",this.Fhe),this.vhe._o(new s5(t).wa)}hre(t){this.Whe(t),this.Uhe()}Whe(t){this.Ghe(t),this.Hhe(t),this.Zhe(t)}Ghe(t){let e;const i=[];for(const s of this._he.Ene.filter(l5)){if(s.tI){i.push(s);continue}const n=s.ene;void 0!==n&&t>=n?(s.tI=!0,i.push(s)):void 0!==e&&e.WO<s.WO||(e=s)}for(const t of i)this.mre(t);this.Rhe!==e&&(this.Rhe=e,this.Xhe())}Xhe(){var t,e;null==(t=this.Wre)||t.Pre(),null==(e=this.zhe)||e.jw(),this.qhe=void 0,this.Yhe=void 0}Hhe(t){if(void 0===this.Rhe||void 0!==this.qhe||this.Khe)return;let e=!1;const i=se.Cn(this.Dst.yR())._B(t);if(void 0!==i&&(e=i.Tn(0)>=this.Rhe.WO),l5(this.Rhe)){const i=this.Rhe,s=i.ene,n=t>=i.WO&&(void 0===s||t<s);(e||n)&&(this.zhe=new da,this.qhe=js(this.Boe(i,t,this.zhe.Uw),this.zhe).catch((t=>{Je(t)||(this.vhe._o(new r5(i,"Could not load the ad break.").wa),i.tI=!0,this.Rhe=void 0)})))}}Zhe(t){if(void 0===this.Rhe||void 0!==this.Yhe||this.Khe)return;const e=this.Rhe.ene;var i;t>=this.Rhe.WO&&(void 0===e||t<e)&&(this.Yhe=null==(i=this.qhe)?void 0:i.then((()=>this.Lhe())))}kre(t){var e,i,s;this.Toe=t,null==(i=this.Wre)||i.kre(null!=(s=null!=t?t:null==(e=this.mhe)?void 0:e.adTagParameters)?s:{}),this.fhe.Koe=t}Uhe(){const t=this.xR(),e=[];this.Vhe.forEach((i=>{t>=i.WO&&(void 0===i.ene||t<i.ene)||e.push(i)})),e.forEach((t=>this.mre(t)));for(const e of this._he.Ene.filter(d5)){const i=e.ene;if(void 0!==i&&t>=i)continue;const s=e.WO,n=e.WO+e.ct;t>=s&&t<=n&&!this.Vhe.has(e.o)&&(this.fhe.joe(e).catch((t=>{this.vhe._o(new r5(e,"Could not load the overlay.").wa)})),this.vhe._o(new u4(e).wa),this.Vhe.set(e.o,e))}}async RI(){var t,e;this.YG=void 0,this.TZ=void 0,this.mhe=void 0,this.jhe=!0,this.Qhe=NaN,this.Ohe=NaN,this.Bhe=NaN,this.Rhe=void 0,null==(t=this.zhe)||t.jw(),this.qhe=void 0,this.Yhe=void 0,await(null==(e=this.Wre)?void 0:e.nr()),this.Wre=void 0,this._he.nr(),this.fhe.nr(),this.Vhe.clear(),this.Dst.vn(Zc.VL,this.bhe),this.Dst.vn(Zc.FL,this.Sd),this.Che(),this.Nhe(),this.Ehe(),this.Xhe(),await super.RI()}async yn(){var t;await this.RI().catch(Tt),this._he.yn(),await(null==(t=this.Wre)?void 0:t.yn()),await super.yn()}BI(t){switch(t.type){case Ti.Uy:case Ti.xy:case Zc.VL:return!this.jhe;case Zc.FL:return!this.jhe||(this.jhe=!1,!1);case Ti.Iy:{const t=this.jd();return t!==this.Qhe&&(this.Qhe=t,this._o(new $s(t))),!0}case Ti.jy:return this.Mhe(),!0}return super.BI(t)}constructor(t){var e;super(t),this.YG=void 0,this.TZ=void 0,this.Vhe=Oh(),this.jhe=!0,this.Qhe=NaN,this.Ohe=NaN,this.Bhe=NaN,this.Khe=!1,this.Sd=()=>{this.Dst.vn(Zc.FL,this.bhe),this._he.Dne(this.na.nt)},this.ghe=async()=>{try{await this.kst.Aq([BC.THEOADS])}catch(t){await this.RI().catch(Tt),this.BH(zy(t,Qa.LICENSE_INVALID_FEATURE))}},this.bhe=()=>{var t;this.Dst.vn(Zc.VL,this.bhe),(null==(t=this.mhe)?void 0:t.sseEndpoint)&&this._he.Rne(this.mhe.sseEndpoint)},this.Ihe=()=>{this.Whe(this.xR()),this.Uhe()},this.CX=()=>{this.Whe(this.xR()),this.Uhe()},this.RE=()=>{this.Hhe(this.xR())},this.Dhe=()=>{this.x1t()},this.Fhe=t=>{this.vhe._o(t.wa)},this.Dst=t,this.Vs=t.we,this.khe=function(){const t=h.createElement("div");return ce(t,"theo-ads-sgai-content-player"),t}(),this.vhe=new A4(this),this.hhe=new E4,null==(e=this.Dst.zc)||e.ant(this.hhe),this._he=new p4(this),this.fhe=new t5(this,this.khe,this.hhe)}};function l5(t){return"adbreak"===t.Tw}function d5(t){return"overlay"===t.Tw}var f5=class extends c5{jd(){var t;return null!=(t=this.MA)?t:super.jd()}iu(){var t;return null!=(t=this.Sc)?t:super.iu()}xR(){return this.ire(super.xR())}yR(){const t=super.yR();return se.Cn(t).xb(this.Jhe).ks()}aI(){const t=super.aI();return se.Cn(t).xb(this.Jhe).ks()}ire(t){return t+this.Jhe}async Ca(t,e){await super.Ca(t,e),this.mhe&&(this.Sc=t,this.$he=new h4(this.Dst),this.$he.pr(this.Dst.we,this.Dst.we.parentElement),this.fO(this.$he))}whe(){}Ahe(){super.Ahe(),this.Dst.bn(Ti.Iy,this.uzt),this.Dst.bn(Zc.UL,this.LW)}Che(){super.Che(),this.Dst.vn(Ti.Iy,this.uzt),this.Dst.vn(Zc.UL,this.LW)}J1t(){return this.Dst}xhe(){return this.khe}RR(t,e){this.tae=!0,super.RR(t,e)}Phe(){super.Phe(),this.Dst.bn(Ti.Dy,this.Dhe)}Nhe(){super.Nhe(),this.Dst.vn(Ti.Dy,this.Dhe)}xI(){super.xI(),this._o(new $(this.xR())),this.eae=!0,this.iae=!1}EI(){this.iae=!0,super.EI()}async Boe(t,e,i){var s;const n=r4(t);await this.She(n),this.sae=await(null==(s=this.Wre)?void 0:s.Ooe(t,e,i));const r=new T3(this.Nrt,this.nae),o=new Ft(this.Nrt.Ort,r,"temporary");this.rae=o.oee(_c(_c({sources:{src:this.sae}})),x3({amount:30,bandwidth:gu.Vg.cG()||this.vst.Ij}),"temporary"),this.oae.jw(),this.oae=new da;const h=this.nae.Ait(this.rae,this.Nrt,"temporary");await h.pi(this.oae.Uw)}async Lhe(){var t,e,i;if(void 0===this.Rhe||void 0===this.sae)return;this.Che(),null==(t=this.zhe)||t.jw(),this.zhe=new da;const s=r4(this.Rhe);return await this.She(s),this.hae=this.Dst.bR,null==(e=this.$he)||e.dr(this.Dst.we),this.aae=!0,this.Jhe=this.xR(),this.Dst.bn(Zc.FL,this.uae),this.Dst.bn(Zc.UL,this.LW),this.vhe._o(new u4(this.Rhe).wa),await(null==(i=this.Wre)?void 0:i.Ore({sources:{src:this.sae}},this.zhe.Uw,void 0,!0)),this.$he=this.cae(this.Rhe.fne,this.yhe),this.D1t(this.$he),this.$he.pr(this.we,this.Dst.we.parentElement),this.Phe(),this.Khe=!0,this.lae=!1,super.Lhe()}cae(t,e){switch(t){case Qe.LSHAPE_AD:return new a4(this.Dst,e);case Qe.SINGLE:default:return new h4(this.Dst)}}async x1t(){var t,e;this.Rhe&&(this.hae=this.hae?new Date(Number(this.hae)+1e3*this.Rhe.ct):void 0,null==(t=this.rae)||t.eT(),this.rae=void 0,this.Rhe=void 0,this.Nhe(),this.aae=!0,this.Jhe=this.xR(),this._he.Lne(this.Dst.nt),this.Dst.bn(Zc.FL,this.uae),this.Dst.bn(Zc.FL,this.Sd),this.Dst.bn(Zc.UL,this.LW),await this.Dst.Ca(this.Sc,(new da).Uw),null==(e=this.$he)||e.dr(this.Dst.we),this.$he=new h4(this.Dst),this.$he.pr(this.Dst.we,this.Dst.we.parentElement),this.D1t(this.$he),this.Dst.xI(),this.lae=!0,this.Khe=!1,this.Ahe(),super.x1t())}async RI(){var t;this.$he=void 0,this.MA=void 0,this.Jhe=0,this.sae=void 0,this.hae=void 0,this.lae=!0,this.aae=!1,this.eae=!0,this.iae=!0,this.oae.jw(),this.oae=new da,null==(t=this.rae)||t.eT(),this.rae=void 0,this.Dst.vn(Zc.FL,this.uae),await super.RI()}BI(t){if(void 0!==this.$he)switch(t.type){case Ti.ho:return!0;case Ti.zy:if(!this.iae)return!0;this.iae=!1;break;case Zc.UL:if(!this.eae)return!0;this.eae=!1;break;case Zc.WL:if(this.aae)return!0;this.eae=!0;break;case Ti.Qy:if(this.aae&&!this.tae)return!0;this.tae=!1;break;case Ti.Jy:if(this.aae&&!this.tae)return!0;break;case Ti.Dy:if(!this.lae)return!0}return super.BI(t)}constructor(t){super(t),this.Jhe=0,this.aae=!0,this.tae=!1,this.oae=new da,this.eae=!0,this.iae=!0,this.lae=!0,this.uzt=t=>{this.MA=t.duration},this.LW=()=>{this.Dst.vn(Zc.UL,this.LW),this.aae=!1},this.uae=()=>{this.Dst.vn(Zc.FL,this.uae),this.hae&&(this.Dst.bR=this.hae,this.hae=void 0),this.Dst.xR()>0&&(this.Jhe-=this.Dst.xR())},this.Nrt=To.Vg,this.nae=new N3(Ms.fR)}};r();var _5=class extends n1{get zse(){return this.dae}get Gse(){return this.fae}Wse(){this.dae=this.Dst.xR()+this.fae}Jse(){var t;if(void 0!==this._ae)return;const e=this.vae;this.vae=void 0,null==(t=this.mae)||t.jw(),g5(this.Dst)&&(this.gae=new da,this._ae=js(this.pae(e,this.gae.Uw),this.gae).catch(yu))}$se(){var t;const e=this._ae;this._ae=void 0,null==(t=this.gae)||t.jw(),this.mae=new da,this.vae=js(this.wae(e,this.mae.Uw),this.mae).catch(yu)}ja(){return this.Dst.fH}yae(){this.bae={source:this.Dst.iu(),duration:this.Dst.jd(),currentTime:this.Dst.xR(),preload:this.Dst.iI,autoplay:this.Dst.SO}}async Aae(t){this.Dst.iI=el.JB,this.Dst.SO=!1,this.S3t.ZR=!0;const e=this.S3t.iu();await this.Dst.Ca(e,t),this.Dst.RR(this.S3t.xR())}async Sae(t){this.bae&&(this.Dst.iI=this.bae.preload,this.Dst.SO=this.bae.autoplay,await this.Dst.Ca(this.bae.source,t),this.bae=void 0)}async pae(t,e){await(null==t?void 0:t.catch(Tt)),this.yae(),this.Tae=this.Dst.bR,await this.Dst.RI(),await this.Aae(e),this.D1t(this.Dst),this.Dst.xI()}async wae(t,e){await(null==t?void 0:t.catch(Tt)),this.kae=this.S3t.xR(),this.fae=this.kae+this.zse,await this.Dst.RI(),await this.S3t.RI(),await this.Sae(e),this.D1t(this.S3t),this.Dst.bn(Zc.VL,this.Eae),this.Dst.xI()}iu(){return this.bae?this.bae.source:super.iu()}jd(){return this.bae?this.bae.duration:super.jd()}aI(){const t=super.aI();return se.Cn(t).xb(this.zse).ks()}yR(){const t=super.yR();return se.Cn(t).xb(this.zse).ks()}nr(){this.fae=0,this.dae=0,this.kae=0,this.Tae=void 0,this.Dst.vn(Zc.VL,this.Eae)}async yn(){this.nr(),await super.yn()}constructor(t,e){super(e),this.dae=0,this.fae=0,this.kae=0,this.Eae=()=>{if(this.Dst.vn(Zc.VL,this.Eae),this.Tae){const t=this.Tae;t.setSeconds(this.Tae.getSeconds()+this.kae),this.Dst.bR=t,this.Tae=void 0}this.fae-=this.Dst.xR()},this.Dst=t,this.S3t=e}};r();var v5=class extends ic{Ca(t,e){var i;return void 0!==Fo(null!=(i=null==t?void 0:t.ads)?i:[],e5)?Promise.reject(new A(Qa.CONFIGURATION_ERROR,"THEOads must be enabled in the player configuration.")):super.Ca(t,e)}},m5=class extends c5{xae(){this.Dst.xst.bn("presentationmodechange",this.Rae)}Iae(){this.Dst.xst.vn("presentationmodechange",this.Rae)}zR(t){t||this.KR||this.kI(),super.zR(t)}get xst(){return this.Dst.xst}async Ca(t,e){await super.Ca(t,e),this.mhe&&(this.Cae=this.mhe.backdropDoubleBox,this.Pae(),this.Dae(new q3(this.Dst,this.S3t),!1,!0))}whe(){const t=new I1(new oF(this.Nae,this.na.kd,new jC),yh.Vg);t.iI=el.JB,t.SO=!1,this.S3t=new _5(this.Dst,t)}phe(){super.phe(),this.Nae=function(){const t=h.createElement("div");return ce(t,"theo-ads-sgai-ad-player"),t}(),Zo(this.Nae),this.Vs.appendChild(this.Nae),this.koe=function(t){const e=h.createElement("div");return ce(e,"theo-ads-sgai-ima-container"),function(t){t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%"}(e),t.appendChild(e),e}(this.Nae)}Ehe(){super.Ehe(),this.Nae&&(Md(this.Nae),ze(this.Nae),this.Nae=void 0)}Dae(t,e,i){var s;void 0!==this.Mae&&(this.Mae.dr(this.we,this.khe,this.Nae),this.Mae.yn());const n=null!=(s=this.Mae)?s:this,r=null!=t?t:this.Dst;X3(n,r),null==t||t.pr(this.we,this.khe,this.Nae,n,e),this.Mae=t,i?this.fO(r):this.D1t(r)}Pae(){this.Lae||(this.Lae=!0,Md(this.khe),Md(this.Nae),s4(this.Vs),s4(this.khe),s4(this.Nae),function(t){const e=t.style;e.display="flex",e.alignItems="center"}(this.Vs))}Bae(){this.Lae&&(this.Lae=!1,n4(this.Vs),n4(this.khe),n4(this.Nae),Zo(this.khe),Zo(this.Nae))}J1t(){return this.S3t}xhe(){return this.koe}kI(){var t;super.kI(),null==(t=this.S3t)||t.kI()}RR(t,e){this.Oae=!0,super.RR(t,e)}ire(t){var e,i;return t+(null!=(i=null==(e=this.S3t)?void 0:e.Gse)?i:0)}Phe(){var t,e;super.Phe(),null==(t=this.S3t)||t.bn(Ti.qy,this.Fae),null==(e=this.S3t)||e.bn(Ti.Dy,this.Dhe),this.Dst.bn(Ti.Gy,this.Vae)}Nhe(){var t,e;super.Nhe(),null==(t=this.S3t)||t.vn(Ti.qy,this.Fae),null==(e=this.S3t)||e.vn(Ti.Dy,this.Dhe),this.Dst.vn(Ti.Gy,this.Vae)}Wae(){var t,e;const i=null==(t=this.Rhe)?void 0:t.ene;if(void 0===i||(null==(e=this.Mae)?void 0:e.Zse())||_s(this.Dst.xR(),i,.001))return;const s=se.Cn(this.S3t.yR()),n=this.S3t.aI(),r=_.min(n.end(n.length-1),i);s.YL().wr(r)&&this.Dst.RR(i,{iOt:!0})}async Boe(t,e,i){var s;const n=r4(t);await this.She(n),await(null==(s=this.Wre)?void 0:s.Boe(t,e,i))}async Lhe(){const t=this.Rhe;if(void 0===t)return;const e=t.fne,i=this.cae(e,t);var s;(this.Che(),Z.eg&&Z.og>=16&&Z.og<18)&&(null==(s=this.S3t)||s.RR(this.S3t.xR()));return Z.Xv&&!i.Zse()&&(n4(this.khe),Zo(this.khe)),this.Dae(i,this.eae,!1),this.vhe._o(new u4(t).wa),this.Phe(),this.Khe=!0,this.Uae=!1,this.Yhe=void 0,super.Lhe()}cae(t,e){if(g5(this.Dst))return new Y3(this.Dst,this.S3t);switch(t){case Qe.DOUBLE:return e._ne||e.ir({backdropUri:this.Cae}),new $3(this.Dst,this.S3t,e._ne);case Qe.LSHAPE_AD:return e._ne||e.ir({backdropUri:this.yhe}),new i4(this.Dst,this.S3t,e._ne);case Qe.LSHAPE_CONTENT:return e._ne||e.ir({backdropUri:this.yhe}),new e4(this.Dst,this.S3t,e._ne);case Qe.SINGLE:default:return new K3(this.Dst,this.S3t)}}x1t(){var t,e;if(void 0===this.Rhe)return;this.Nhe(),Z.Xv&&(Md(this.khe),s4(this.khe)),function(t){return t instanceof Y3}(this.Mae)&&(this._he.Lne(this.Dst.nt),this.Dst.bn(Zc.FL,this.Sd));const i=null==(t=this.Mae)?void 0:t.Zse();this.Dae(new q3(this.Dst,this.S3t),!0,!1),i||(this.Oae=!1,this.Dst.RR(this.Rhe.ene,{iOt:!0})),null==(e=this.S3t)||e.RI(),this.Ahe(),this.Khe=!1,this.Uae=!1,this.Rhe=void 0,super.x1t()}async RI(){var t;this.eae=!0,this.Oae=!0,this.Uae=!0,this.Khe=!1,this.Dae(void 0,!1,!0),this.Bae(),await(null==(t=this.S3t)?void 0:t.yn()),this.S3t=void 0,this.koe=void 0,await super.RI()}async yn(){var t;this.Iae(),await(null==(t=this.S3t)?void 0:t.yn()),await super.yn()}BI(t){if(void 0!==this.Mae)switch(t.type){case Ti.ho:if(!this.Uae)return this.Uae=!0,!0;this.eae=!0;break;case Ti.zy:if(this.PR&&this.Khe)return!0;break;case Zc.UL:if(!this.eae)return!0;this.eae=!1;break;case Zc.WL:this.eae=!0;break;case Ti.Jy:if(!this.Oae)return!0;break;case Ti.Qy:if(!this.Oae)return this.Oae=!0,!0}return super.BI(t)}constructor(t){super(t),this.Uae=!0,this.eae=!0,this.Oae=!0,this.Lae=!1,this.Rae=t=>{if(this.Mae&&!function(t){return t instanceof Y3}(this.Mae)&&this.S3t&&this.Khe)switch(t.presentationMode){case"native-picture-in-picture":this.Dae(new Y3(this.Dst,this.S3t),!1,!1);break;case"fullscreen":a2(this.kd)&&this.Dae(new Y3(this.Dst,this.S3t),!1,!1);break}},this.Fae=t=>{g5(this.Dst)||this.Wae()},this.Vae=t=>{g5(this.Dst)||this.Wae()},this.xae()}};function g5(t){const e=t.xst.Ho()===Nu.FULLSCREEN&&a2(t.kd);return t.fH.hO||e}cF((t=>t.kd.ads.theoads?Z.Cm||Z.Mm||Z.Wm?new f5(t):new m5(t):new v5(t)),rh.Hst),r(),r(),r(),r(),r();var p5=class extends Co{get wa(){return this.eu||(this.eu=function(t){return{get casting(){return t.uQ},get state(){return t.Vft},start(){t.CI()},stop(){t.DI()},addEventListener(e,i){const s=Hu(e,hs);t.bn(s,i)},removeEventListener(e,i){const s=Hu(e,hs);t.vn(s,i)}}}(this)),this.eu}constructor(...t){super(...t),this.eu=void 0}},w5=class extends p5{get uQ(){return this.Vft===Nn.CONNECTED}get Vft(){return this.Fa}Gae(){this.Hae(),this.Qgt.bn(Ti.uo,this.Zae),this.Da(Nn.AVAILABLE)}Hae(){this.na&&this.na.vn(Ti.wy,this.handleAirplayChangedEvent),this.Xae?this.na=this.gj:this.na=this.zae,this.na.bn(Ti.wy,this.handleAirplayChangedEvent)}get Xae(){return this.gj.II()}async qae(){if(this.na){if(this.Xae){if(!this.na.KR){const t=new Promise((t=>u(t,800))),e=this.na.py(Ti.zy,this.Yae.Uw);await Promise.race([e,t])}this.na.xI()}else{this.Kae=this.gj.ER,this.jae=this.gj.bR,this.zae.bn(Ti.hb,this.handleAirplayPlayerTimeUpdate),this.Qae=this.gj.vC,this.gj.vC=this.zae,this.Qae.EI(),this.Qae.be(),this.zae.ge(),this.zae.ZR=this.Qae.ZR,this.zae.QR=this.Qae.QR,this.zae.gI=this.Qae.gI;const t=this.zae.py(Ti.Qy);this.zae.ER=this.Qae.ER,await t,this.zae.xI(),this.zae.ZR=this.Qae.ZR,this.zae.QR=this.Qae.QR,this.zae.gI=this.Qae.gI}this.Da(Nn.CONNECTED)}}Jae(){if(this.Qae){this.zae.vn(Ti.hb,this.handleAirplayPlayerTimeUpdate),this.Qae.ZR=this.zae.ZR,this.Qae.QR=this.zae.QR,this.Qae.gI=this.zae.gI;Z.eg&&!Z.su&&this.gj.ct===1/0?this.jae?this.Qae.bR=this.jae:this.Qae.ER=1/0:this.Qae.ER=this.Kae,this.jae=void 0,this.Kae=void 0,this.Qae.ge(),this.zae.be(),this.zae.KR||this.Qae.xI(),this.gj.vC=this.Qae,this.zae.nr(),this.Qae=void 0}else this.na&&(this.na.ER=this.na.ER+1e-4);this.Da(Nn.AVAILABLE)}preloadPlayer(t){if(J(t),this.na.rI<Ht.Xn){const e=this.na.py(Zc.VL,t);return this.na.iI=el.eW,e}return Promise.resolve()}Da(t){t!==this.Fa&&(this.Fa=t,this._o(new $0(this.Fa)))}CI(){let t;this.Qgt.kI(),this.Yae.jw(),this.Yae=new da,t=this.Xae?this.$ae(this.Yae.Uw):this.tue(this.Yae.Uw),ah(js(t,this.Yae))}async $ae(t){await this.preloadPlayer(t),this.gj.CI()}async tue(t){try{await this.zae.nr();const e=this.gj.iu();if(void 0===e)throw new g("Not possible to start Airplay without a source");await this.zae.Ca(e,t);const i=this.zae.py(Zc.UL,t);this.zae.xI(),await ng(i,3e3),this.zae.EI(),J(t),this.zae.CI()}catch(t){if(Je(t))return;0}}DI(){this.na.DI()}yn(){var t;this.Ro(),this.Qgt.vn(Ti.uo,this.Zae),this.Yae.jw(),this.gj.AO(this.zae),null==(t=this.zae)||t.yn()}constructor(t,e,i){super(),this.Fa=Nn.UNAVAILABLE,this.Yae=new da,this.Zae=()=>{var t;const e=null==(t=this.gj.iu())?void 0:t.sources.filter(_o);(null==e?void 0:e.some(gI))?this.Da(Nn.AVAILABLE):this.Da(Nn.UNAVAILABLE)},this.handleAirplayChangedEvent=()=>{this.na&&this.na.WR?this.qae():this.Vft===Nn.CONNECTED&&this.Jae()},this.handleAirplayPlayerTimeUpdate=t=>{this.Kae=t.currentTime,this.jae=this.gj.bR},this.Qgt=t,this.gj=e,this.zae=i,this.zae.be(),e.bO(i),this.Gae()}};r();var y5=class extends p5{get uQ(){return!1}get Vft(){return Nn.UNAVAILABLE}CI(){}DI(){}};r();var b5=class extends sn{MI(){this.eue.MI()}OI(t){throw new g("Can't add a track while using AirPlay.")}get ht(){return this.eue.ht}get wR(){return this.eue.wR}get bt(){return this.tZ}get ER(){return this.eue.ER}set ER(t){this.RR(t)}RR(t,e){this.eue.RR(t,e)}get bR(){return this.eue.bR}get ct(){return this.eue.ct}get we(){return this.Vs}get PR(){return this.eue.PR}get lt(){return this.eue.lt}get MR(){return this.eue.MR}get OR(){return this.eue.OR}get WR(){return this.eue.WR}get AI(){return this.eue.AI}get yI(){return this.eue.yI}get GR(){return this.eue.GR}get ZR(){return this.eue.ZR}set ZR(t){this.eue.ZR=t}get qR(){return this.eue.qR}get KR(){return this.eue.KR}get QR(){return this.eue.QR}set QR(t){this.eue.QR=t}get tI(){return this.eue.tI}get iI(){return this.eue.iI}set iI(t){this.eue.iI=t}get rI(){return this.eue.rI}get hI(){return this.eue.hI}get uI(){return this.eue.uI}II(){return this.eue.II()}CI(){this.eue.CI()}DI(){this.eue.DI()}get nt(){return this.eue.nt}get dI(){return this.eue.dI}get vI(){return this.eue.vI}get rt(){return this.eue.rt}get gI(){return this.eue.gI}set gI(t){this.eue.gI=t}xI(){ah(this.eue.xI())}EI(){this.eue.EI()}async RI(){}iu(){return this.Sc}async Ca(t,e){let i;if(J(e),this.Sc=t,Fn(t.sources))i=Vc({src:""});else{const e=t.sources.filter(_o);for(const t of e)if(gI(t)){i=t;break}}if(!i)throw new g("Unsupported source.");await this.eue.Ca(i,t,e),this.aZ(i)}aZ(t){this.tZ!==t&&(this.tZ=t,this._o(new tk(t)))}TI(){return this.eue.TI()}pR(){return[]}kI(){this.iue.vZ()}pr(t){JT(this,t)}dr(){}LI(t){return!1}NI(){this.eue.NI()}async nr(){this.tZ=void 0,this.Sc=void 0,await this.eue.nr()}ge(){this.eue.ge()}be(){this.eue.be()}SI(){return this.eue.SI()}ja(){return this.eue.ja()}async yn(){this.Ro(),this.iue.yn(),await this.eue.yn(),this.cO.yn(),this.dO.yn(),this.Hl.yn()}constructor(t,e,i,s,n,r,o){super(),this.tZ=void 0,this.Sc=void 0,this.cO=new qo,this.dO=new qo,this.Hl=new at,this.Vs=t,this.iue=new Ao(r,o,1,[ee.mE]),this.iue.AZ(t),this.eue=new mI(t,this.iue,e,i,s,n),this.eue.oy(this.Ds),this.cO.vC=this.eue.ht,this.dO.vC=this.eue.rt,this.Hl.vC=this.eue.nt}},A5=class extends ic{async yn(){this.sue.yn(),await super.yn()}constructor(t){super(t);const e=new b5(this.Ta.we,this.fR,this.kd,this.vst,this.yI,this.yst,this.Wl);this.sue=new w5(this,this.Ta,e),this.Iz._Q(this.sue),this.bn(Ti.xy,(()=>{this.sue.Hae()}))}};cF((t=>Ms.Ys.jg?new A5(t):(t.Iz._Q(new y5),t)),rh.Zst),r(),r();var S5="VPAID";function T5(t){return"spotx"===t.integration}yh.Vg.PZ(new class t{get $1t(){return this.nue.$1t}CZ(t){return T5(t)}t2t(e,i,s){return s.ads||(s.ads=UT({})),s.ads.vpaidMode=s.ads.vpaidMode||t.rue(),this.nue.t2t(e,i,s)}g6(e,i,s,n){!function(t){if(!T5(t))throw new g("Unknown ad integration: "+t.integration)}(e);const r=t.oue(e,s.we);this.nue.g6(r,i,s,n)}qz(t){const e=tu(t);if(!S(e.id))return e.queryParameters||(e.queryParameters={}),e.custom&&(e.queryParameters.custom?vl('"custom" parameter is redefined in queryParameters! Please use "queryParameters.custom" only!'):(e.queryParameters.custom=e.custom,delete e.custom)),e.app&&(e.queryParameters.app?vl('"app" parameter is redefined in queryParameters! Please use "queryParameters.app" only!'):(e.queryParameters.app=e.app,delete e.app)),e.device&&(e.queryParameters.device?vl('"device" parameter is redefined in queryParameters! Please use "queryParameters.device" only!'):(e.queryParameters.device=e.device,delete e.device)),e.user&&(e.queryParameters.user?vl('"user" parameter is redefined in queryParameters! Please use "queryParameters.user" only!'):(e.queryParameters.user=e.user,delete e.user)),e.ipAddress&&(e.queryParameters.ip_addr?vl('"ipAddress" parameter is redefined in queryParameters! Please use "queryParameters.ip_addr" or "ipAddress" only!'):(e.queryParameters.ip_addr=e.ipAddress,delete e.ipAddress)),e.maximumAdDuration&&(e.queryParameters.VMaxd?vl('"maximumAdDuration" parameter is redefined in queryParameters! Please use "queryParameters.VMaxd" or "maximumAdDuration" only!'):(e.queryParameters.VMaxd=e.maximumAdDuration,delete e.maximumAdDuration)),e}static oue(e,i){return{integration:lu.SPOTX,sources:{src:t.hue(e,s.location.href,i.offsetWidth,i.offsetHeight,Z.Cg)}}}static hue(e,i,s,n,r){if(e.sources)return e.sources;let o=n,h=s;r&&0===h&&(h=320,o=180);const a={custom_skin:1,player_width:h,player_height:o};e.cacheBuster&&(a.cb=_.random()),t.aue(i)&&(a.content_page_url=i);const u=ol({},a,e.queryParameters);return u[S5]||u.VPI||(u[S5]="js"),"https://search.spotxchange.com/vast/2.0/"+e.id+"?"+t.uue(u)}static aue(t){return Cl(t,"http://")||Cl(t,"https://")}static uue(t){return X$(t)}static rue(){return Z.Gm?jn.ENABLED:jn.INSECURE}constructor(){this.nue=new d2}}),r(),r(),r(),r();var k5=_.PI/180,E5=180/_.PI,x5=class{Bb(t,e){return this.x=t,this.y=e,this}p_t(t){return this.x=t.x,this.y=t.y,this}lue(t){return this.Bb(t[0],t[1])}due(){const t=new Float32Array(2);return t[0]=this.x,t[1]=this.y,t}fue(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}constructor(t,e){this.x=t||0,this.y=e||0}},Xu=class{Bb(t,e,i){return this.x=t,this.y=e,this.z=i,this}p_t(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}lue(t){return this.Bb(t[0],t[1],t[2])}due(){const t=new Float32Array(3);return t[0]=this.x,t[1]=this.y,t[2]=this.z,t}V(){return _.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}_ue(){const t=this.V();if(0!==t){const e=1/t;this.vue(e)}else this.x=0,this.y=0,this.z=0;return this}vue(t){this.x*=t,this.y*=t,this.z*=t}mue(t){const e=this.x,i=this.y,s=this.z,n=t.x,r=t.y,o=t.z,h=t.w,a=h*e+r*s-o*i,u=h*i+o*e-n*s,c=h*s+n*i-r*e,l=-n*e-r*i-o*s;return this.x=a*h+l*-n+u*-o-c*-r,this.y=u*h+l*-r+c*-n-a*-o,this.z=c*h+l*-o+a*-r-u*-n,this}gue(t){return this.x*t.x+this.y*t.y+this.z*t.z}pue(t,e){const i=t.x,s=t.y,n=t.z,r=e.x,o=e.y,h=e.z;return this.x=s*h-n*o,this.y=n*r-i*h,this.z=i*o-s*r,this}constructor(t,e,i){this.x=t||0,this.y=e||0,this.z=i||0}},Xo=class{Bb(t,e,i,s){return this.x=t,this.y=e,this.z=i,this.w=s,this}p_t(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this}lue(t){return this.Bb(t[0],t[1],t[2],t[3])}due(){const t=new Float32Array(4);return t[0]=this.x,t[1]=this.y,t[2]=this.z,t[3]=this.w,t}gue(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}tV(t){return this.wue(this,t)}wue(t,e){const i=t.x,s=t.y,n=t.z,r=t.w,o=e.x,h=e.y,a=e.z,u=e.w;return this.x=i*u+r*o+s*a-n*h,this.y=s*u+r*h+n*o-i*a,this.z=n*u+r*a+i*h-s*o,this.w=r*u-i*o-s*h-n*a,this}yue(){return this.x*=-1,this.y*=-1,this.z*=-1,this._ue(),this}bue(){const t=this.x,e=this.y,i=this.z,s=this.w,n=t*e+i*s;let r,o,h;if(n>.499)r=2*_.atan2(t,s),o=_.PI/2,h=0;else if(n<-.499)r=-2*_.atan2(t,s),o=-_.PI/2,h=0;else{const a=t*t,u=e*e,c=i*i;r=_.atan2(2*e*s-2*t*i,1-2*u-2*c),o=_.asin(2*n),h=_.atan2(2*t*s-2*e*i,1-2*a-2*c)}return new R5(r,h,o)}_ue(){let t=_.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===t?(this.x=0,this.y=0,this.z=0,this.w=1):(t=1/t,this.x=this.x*t,this.y=this.y*t,this.z=this.z*t,this.w=this.w*t),this}constructor(t,e,i,s){this.x=t||0,this.y=e||0,this.z=i||0,this.w=void 0!==s?s:1}},R5=class{Bb(t,e,i){return this.Aue=t,this.Sue=e,this.Tue=i,this}p_t(t){return this.Bb(t.Aue,t.Sue,t.Tue)}kO(t){return this.Aue+=t.Aue,this.Sue+=t.Sue,this.Tue+=t.Tue,this}kF(t){return this.Aue-=t.Aue,this.Sue-=t.Sue,this.Tue-=t.Tue,this}kue(){const t=this.Aue,e=this.Tue,i=this.Sue,s=_.cos(t/2),n=_.cos(e/2),r=_.cos(i/2),o=_.sin(t/2),h=_.sin(e/2),a=_.sin(i/2),u=s*n,c=o*h;return new Xo(u*a+c*r,o*n*r+s*h*a,s*h*r-o*n*a,u*r-c*a)}constructor(t,e,i){this.Aue=t||0,this.Sue=e||0,this.Tue=i||0}};r();var I5=["Eue","wat","xue","error"];r();var C5=function(t){return t.Rs="unavailable",t.Rue="available",t.Xa="presenting",t}({});r();var P5=class{hW(){this.qe||(this.qe=!0,this.Vs.addEventListener("mousedown",this.Iue),this.Vs.addEventListener("touchstart",this.Cue),s.addEventListener("mousemove",this.ar),s.addEventListener("touchmove",this.Pue),s.addEventListener("mouseup",this.Due),s.addEventListener("touchend",this.Nue),this.Mue(s))}aW(){this.qe&&(this.qe=!1,this.Vs.removeEventListener("mousedown",this.Iue),this.Vs.removeEventListener("touchstart",this.Cue),s.removeEventListener("mousemove",this.ar),s.removeEventListener("touchmove",this.Pue),s.removeEventListener("mouseup",this.Due),s.removeEventListener("touchend",this.Nue),this.Lue(s))}Mue(t){if(function(t){try{return Boolean(t)&&t===t.top}catch(t){return!1}}(t));else if(Od(t))try{t.parent.addEventListener("mouseup",this.Due),this.Mue(t.parent)}catch(e){t.document.documentElement.addEventListener("mouseleave",this.Bue)}}Lue(t){if(t.document.documentElement.removeEventListener("mouseleave",this.Bue),Od(t))try{t.parent.removeEventListener("mouseup",this.Due),this.Lue(t.parent)}catch(t){}}Oue(){this.Fue=!1}Vue(){const t=this.Uue.Wue;t.yaw+=2*_.PI*this.Gue.x*.4/this.Vs.clientWidth,t.pitch+=2*_.PI*this.Gue.y*.5/this.Vs.clientHeight,t.pitch=Ns(t.pitch,-_.PI/2,_.PI/2),this.Uue.Wue=t}Hue(){return(h.pointerLockElement||h.mozPointerLockElement||h.webkitPointerLockElement)===this.Vs}yn(){this.aW()}constructor(t,e){this.qe=!1,this.Zue=new x5,this.Xue=new x5,this.Gue=new x5,this.Fue=!1,this.Iue=t=>{this.Zue.Bb(t.clientX,t.clientY),this.Fue=!0,t.preventDefault(),t.stopPropagation()},this.Cue=t=>{t.touches&&1===t.touches.length&&(this.Zue.Bb(t.touches[0].pageX,t.touches[0].pageY),this.Fue=!0,t.preventDefault())},this.ar=t=>{if(this.Fue||this.Hue()){if(this.Hue()){const e=t.movementX||t.mozMovementX||0,i=t.movementY||t.mozMovementY||0;this.Xue.Bb(this.Zue.x-e,this.Zue.y-i)}else this.Xue.Bb(t.clientX,t.clientY);this.Gue.fue(this.Xue,this.Zue),this.Zue.p_t(this.Xue),this.Vue()}},this.Pue=t=>{this.Fue&&(this.Xue.Bb(t.touches[0].pageX,t.touches[0].pageY),this.Gue.fue(this.Xue,this.Zue),this.Zue.p_t(this.Xue),this.Vue())},this.Due=()=>{this.Oue()},this.Nue=()=>{this.Oue()},this.Bue=()=>{this.Oue()},this.Uue=t,this.Vs=e}};r();var D5=class extends Ds{ka(){return new N5}constructor(){super("xue")}},N5=class extends pe{constructor(){super("stereochange")}};r();var M5=class{zue(t){t.clearColor(...this.HQ),t.clear(t.COLOR_BUFFER_BIT)}Yue(t,e){t.clearDepth(1),t.enable(t.DEPTH_TEST),t.depthFunc(t.LEQUAL),t.clear(t.DEPTH_BUFFER_BIT),this.Kue.forEach((i=>{i.Yue(t,e)}))}jue(t){this.Kue.push(t)}Que(){this.Kue=[]}constructor(){this.HQ=[0,0,0,1],this.Kue=[]}};r(),r(),r();var L5=class{Jue(t,e,i){const s=t.createBuffer();return null===s?(vl("Failed to create buffer."),null):(t.bindBuffer(e,s),t.bufferData(e,i,t.STATIC_DRAW),s)}constructor(t,e,i,s,n){this.$ue=t,this.zb=this.Jue(t,e,i),this.tce=s,this.Sp=n,this.ece=!1,this.sce=0,this.rc=0}},B5=class extends L5{hW(t){if(null===this.zb)return void vl("Attempted to enable buffer that failed to initialize.");if(null===t)return void vl("Attempted to enable attribute without location.");const e=this.$ue;e.bindBuffer(e.ARRAY_BUFFER,this.zb),e.vertexAttribPointer(t,this.tce,this.Sp,this.ece,this.sce,this.rc),e.enableVertexAttribArray(t)}aW(t){t&&this.$ue.disableVertexAttribArray(t)}constructor(t,e,i){super(t,t.ARRAY_BUFFER,e,i,t.FLOAT)}};var O5=class extends L5{nce(){const t=this.$ue;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.zb),t.drawElements(t.TRIANGLES,this.rce,this.Sp,this.rc)}constructor(t,e){super(t,t.ELEMENT_ARRAY_BUFFER,e,1,t.UNSIGNED_SHORT),this.rce=e.length}};r();var F5=function(t){return t.VertexPos="aVertexPosition",t.VertexUV="aVertexUV",t.VertexColor="aVertexColor",t}({}),Ko=function(t){return t.ProjectionMat="uProjectionMatrix",t.ModelViewMat="uModelViewMatrix",t.Texture="uTexture",t}({}),V5=function(t){return t.Normal="vNormal",t.Color="vColor",t.UV="vUV",t}({}),W5=class{oce(t,e,i){const s=this.hce(t,t.VERTEX_SHADER,e),n=this.hce(t,t.FRAGMENT_SHADER,i);if(null===s||null===n)return vl("Failed to create vertex or fragment shader."),null;const r=t.createProgram();return null===r?(vl("Failed to create shader program"),null):(t.attachShader(r,s),t.attachShader(r,n),t.linkProgram(r),t.getProgramParameter(r,t.LINK_STATUS)?r:(vl("Failed to initialize shader program"),null))}hce(t,e,i){const s=t.createShader(e);if(null===s)return vl("failed to create shader."),null;if(t.shaderSource(s,i),t.compileShader(s),!t.getShaderParameter(s,t.COMPILE_STATUS)){const e=t.getShaderInfoLog(s);return vl("Failed to compile shader with error: "+e),t.deleteShader(s),null}return s}ace(){return this.uce}cce(t){const e=this.uce;if(null===e)return vl("Attempted to retrieve attribute location when shader program was not initialized"),null;const i=this.$ue.getAttribLocation(e,t);return-1===i?null:i}lce(t){const e=this.uce;if(null===e)return vl("Attempted to retrieve uniform location when shader program was not initialized"),null;const i=this.$ue.getUniformLocation(e,t);return null===i&&Xf("Attempted to retrieve nonexistent uniform: "+t),i}constructor(t,e,i){this.$ue=t,this.uce=this.oce(this.$ue,e,i)}},U5=class{dce(){const t=this.fce.length,e=_.max(...this._ce);return e>=t?(Xf("Created geometry where largest index ("+e+") is larger than/equal to attribute array size ("+t+")"),!1):(e<t-1&&vl("Created geometry where largest index ("+e+") is smaller than attribute buffer - 1 ("+(t-1)+") resulting in unused vertices"),!this.vce||this.vce.length===t||(Xf("Created geometry where position ("+t+") and uv ("+this.vce.length+") buffers have different length."),!1))}mce(t,e){if(!this.dce())throw new g("Failed to validate buffers for WebGLGeometry.");const i=function(t,e){const i=[];return e.forEach((t=>{i.push(t.x,t.y,t.z)})),new B5(t,new Float32Array(i),3)}(t,this.fce),s=function(t,e){return new O5(t,new Uint16Array(e))}(t,this._ce),n=function(t,e){const i=[];return e.forEach((t=>{i.push(t.x,t.y)})),new B5(t,new Float32Array(i),2)}(t,this.vce);return new G5(i,s,n,e)}constructor(t,e,i){this.fce=t,this._ce=e,this.vce=i}},G5=class{gce(){this.fce.hW(this.pce),null!==this.wce&&this.vce.hW(this.wce)}yce(){this.fce.aW(this.pce),null!==this.wce&&this.vce.aW(this.wce)}Yue(){this._ce.nce()}constructor(t,e,i,s){this.fce=t;const n=s.cce(F5.VertexPos);if(null===n)throw new g("Failed to get position attribute location.");this.pce=n,this.vce=i,this.wce=s.cce(F5.VertexUV),this._ce=e}},H5=class extends U5{constructor(t=1,e=32,i=16,s=0,n=2*_.PI,r=0,o=_.PI){let h=0;const a=_.min(r+o,_.PI),u=[],c=[],l=[],d=[];for(let u=0;u<=i;u++){const f=[],v=u/i;let m=0;0===u&&0===r?m=.5/e:u===i&&a===_.PI&&(m=-.5/e);for(let i=0;i<=e;i++){const a=i/e,u=-t*_.cos(s+a*n)*_.sin(r+v*o),d=t*_.cos(r+v*o),g=t*_.sin(s+a*n)*_.sin(r+v*o);c.push(new Xu(u,d,g)),l.push(new x5(a+m,1-v)),f.push(h++)}d.push(f)}for(let t=0;t<i;t++)for(let s=0;s<e;s++){const e=d[t][s+1],n=d[t][s],o=d[t+1][s],h=d[t+1][s+1];(0!==t||r>0)&&u.push(e,n,h),(t!==i-1||a<_.PI)&&u.push(n,o,h)}super(c,u,l)}};r(),r();var Z5=[0,0,0,255,0,0,0,255,0,0,0,255,0,0,0,255],X5=class{bce(){const t=this.$ue;t.activeTexture(this.Ace),t.bindTexture(t.TEXTURE_2D,this.Sce)}pr(){const t=this.$ue;t.activeTexture(this.Ace),t.bindTexture(t.TEXTURE_2D,this.Sce),t.uniform1i(this.Tce,0)}kce(t){const e=this.$ue;e.bindTexture(e.TEXTURE_2D,this.Sce),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0),e.texImage2D(e.TEXTURE_2D,this.W1,this.Ece,this.xce,this.Rce,t),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1)}Ice(t){const e=this.$ue;e.bindTexture(e.TEXTURE_2D,this.Sce),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0),t.Rst.AY(e,e.TEXTURE_2D,this.W1,this.Ece,this.xce,this.Rce),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1)}constructor(t,e){if(this.$ue=t,this.Sce=t.createTexture(),null===this.Sce)throw new g("Failed to create texture");const i=e.lce(Ko.Texture);if(null===i)throw new g("Failed to get texture location.");this.Tce=i,t.bindTexture(t.TEXTURE_2D,this.Sce),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),this.Ace=t.TEXTURE0,this.W1=0,this.Ece=t.RGBA,this.xce=t.RGBA,this.Rce=t.UNSIGNED_BYTE,t.texImage2D(t.TEXTURE_2D,this.W1,this.Ece,2,2,0,this.xce,this.Rce,new j(Z5))}},z5="\n    attribute vec4 "+F5.VertexPos+";\n    attribute vec2 "+F5.VertexUV+";\n\n    uniform mat4 "+Ko.ModelViewMat+";\n    uniform mat4 "+Ko.ProjectionMat+";\n    \n    varying mediump vec2 "+V5.UV+";\n    \n    void main() {\n      gl_Position = "+Ko.ProjectionMat+" * "+Ko.ModelViewMat+" * "+F5.VertexPos+";\n      "+V5.UV+" = "+F5.VertexUV+";\n    }\n",q5="\n    varying mediump vec2 "+V5.UV+";\n    \n    uniform sampler2D "+Ko.Texture+";\n\n    void main() {\n      gl_FragColor = texture2D("+Ko.Texture+", "+V5.UV+");\n    }\n",Y5=class{ace(){return this.uce}hW(){this.$ue.useProgram(this.uce.ace()),this.Sce.pr()}Cce(t){this.Sce.kce(t)}Pce(t){this.Sce.Ice(t)}constructor(t){this.$ue=t,this.uce=new W5(t,z5,q5),this.Sce=new X5(t,this.uce)}};r(),r();var K5=Zl(Kl()),j5=Zl(Ql()),Q5=(Zl(Jl()),Zl($l())),J5=(Zl(td()),Zl(ed())),$5=Zl(id()),t6=Zl(sd()),e6=Zl(nd()),i6=Zl(rd()),s6=class{Yue(t,e){if(this.Dce(e.Nce)){this.Mce.gce(),this.Lce.hW();const i=this.Bce,s=e.Oce,n=(0,$5.default)(s,s,i);t.uniformMatrix4fv(this.Fce,!1,n);const r=e.Vce;t.uniformMatrix4fv(this.Wce,!1,r),this.Mce.Yue(),this.Mce.yce()}}Dce(t){return"none"===this.Nce||"right"!==t&&"left"===this.Nce||"right"===t&&"right"===this.Nce}get Bce(){const t=(0,K5.default)(),e=this.fo;return(0,i6.default)(t,t,e.due()),(0,e6.default)(t,t,this.Uce.x,new Float32Array([1,0,0])),(0,e6.default)(t,t,this.Uce.y,new Float32Array([0,1,0])),(0,e6.default)(t,t,this.Uce.z,new Float32Array([0,0,1])),t}constructor(t,e,i,s){this.fo=new Xu,this.Uce=new Xu,this.Nce="none",this.Lce=i;const n=i.ace();this.Mce=e.mce(t,n),s&&(this.Nce=s);const r=n.lce(Ko.ModelViewMat);if(null===r)throw new g("Failed to get model view matrix location.");this.Fce=r;const o=n.lce(Ko.ProjectionMat);if(null===o)throw new g("Failed to get projection matrix location.");this.Wce=o}};r();var n6=class{Gce(){const t=(0,K5.default)();return(0,t6.default)(t,this.Hce,this.Zce,this.Xce,this.zce)}qce(){this.Yce=this.Gce()}get Vce(){return new Float32Array(this.Yce)}set Vce(t){this.Yce=t}Kce(){const t=(0,K5.default)(),e=(0,Q5.default)((0,K5.default)(),this.jce.due()),i=(0,j5.default)((0,K5.default)(),this.Qce.due());return(0,$5.default)(t,e,i),(0,J5.default)(t,t),t}Jce(){this.$ce=this.Kce()}get Oce(){return new Float32Array(this.$ce)}tle(){this.Jce(),this.qce()}nr(){this.jce=new Xu,this.Uce=new Xo,this.tle()}ele(t){const e=this.Qce.bue();e.kO(t),this.Uce=e.kue()}sle(t){this.Uce=t.kue()}get nle(){return this.Hce}set nle(t){this.Hce=t,this.qce()}get rle(){return this.Zce}set rle(t){this.Zce=t,this.qce()}get fo(){return(new Xu).p_t(this.jce)}set fo(t){this.jce=t,this.Jce()}get Uce(){return(new Xo).p_t(this.Qce)}set Uce(t){this.Qce=t,this.Jce()}constructor(t){this.Hce=72*_.PI/180,this.Zce=1.77,this.Xce=.1,this.zce=100,this.Nce="none",this.jce=new Xu,this.Qce=new Xo,this.Yce=this.Gce(),this.$ce=this.Kce(),t&&(this.Nce=t)}};r();var r6=class extends Ds{ka(){return new o6}constructor(){super("Eue")}},o6=class extends pe{constructor(){super("directionchange")}},h6=1e-4,a6=class extends Co{ole(){Ll.xr?(Ll.xr.addEventListener("devicechange",this.hle),this.hle()):this.cNt("Your browser does not support WebXR",Qa.VR_PLATFORM_UNSUPPORTED)}ale(){this.na.Sa.bn(nh.da,this.gn),this.na.bn(nu.mn,this.gn),this.na.bn(Ti.uo,this.co),this.na.bn(Ti.Qy,this.PX)}ule(){var t;this.cle||(this.cle=h.createElement("canvas"),this.cle.className="theoplayer-vr",this.cle.style.zIndex="2",this.cle.style.background="black",this.cle.style.display="none",this.na.we.appendChild(this.cle),Zo(this.cle));const e=null!=(t=this.cle.getContext("webgl2"))?t:this.cle.getContext("webgl");e?(this.$ue=e,this.lle=new P5(this,this.cle)):this.cNt("Your browser does not support WebGL",Qa.VR_PLATFORM_UNSUPPORTED)}async dle(){if(!Ll.xr)return this.fle=!1,void(this._le=!1);await Promise.all([Ll.xr.isSessionSupported("inline").then((t=>{this.fle=t})).catch((t=>{this.fle=!1,this.cNt("exception when calling xr.isSessionSupported for inline session: "+t,Qa.VR_PRESENTATION_ERROR)})),Ll.xr.isSessionSupported("immersive-vr").then((t=>{this._le=t})).catch((t=>{this._le=!1,this.cNt("exception when calling xr.isSessionSupported for immersive-vr session: "+t,Qa.VR_PRESENTATION_ERROR)}))])}vle(){this.mle&&(this.ple(this.wle,this.yle),this.ble())}ple(t,e){const i=this.$ue;if(!i||t===fC.NONE)return;let s,n;this.Ale.Que(),t===fC.PM360?(s=2*_.PI,n=-_.PI/2):(s=_.PI,n=-_.PI);const r=new H5(16,60,40,0,s),o=[],h=[];for(let t=0;t<r.vce.length;t++){const i=r.vce[t];switch(e){case dC.NONE:o.push(i),h.push(i);break;case dC.VERTICAL:o.push(new x5(i.x,.5*i.y)),h.push(new x5(i.x,.5*i.y+.5));break;case dC.HORIZONTAL:o.push(new x5(.5*i.x,i.y)),h.push(new x5(.5*i.x+.5,i.y))}}r.fce.forEach((t=>{t.x*=-1}));const a=new U5(r.fce,r._ce,o),u=new U5(r.fce,r._ce,h);this.Sle=new Y5(i);const c=new s6(i,a,this.Sle,"left");c.Uce.y=n,this.Ale.jue(c);const l=new s6(i,u,this.Sle,"right");l.Uce.y=n,this.Ale.jue(l)}ble(){this.$ue&&(this.cle.style.display="block",this.Tle(),this.na.vn(Ti.ho,this.kle),this.fle&&(this.na.KR?this.na.bn(Ti.ho,this.kle):this.kle()))}Ele(){this.xle(),this.na.vn(Ti.ho,this.kle),this.cle&&(this.cle.style.display="none")}Rle(){this.Ile(),this.Cle()}async Ple(){if(!this.Dle&&this.fle)try{const t=await ou(Ll.xr.requestSession("inline"),this.vW.Uw);let e;e=Z.Qs?Z.pm?"viewer":"local":"viewer";const i=await t.requestReferenceSpace(e);t.addEventListener("end",this.Ile),this.Nle=i,this.Dle=t,this.lle.hW(),this.Mle(),await t.updateRenderState({baseLayer:new XRWebGLLayer(t,this.$ue),inlineVerticalFieldOfView:this.Hce*k5})}catch(t){this.Ile(),this.cNt(t,Qa.VR_PRESENTATION_ERROR)}}Ile(){this.Dle&&(this.xle(),this.lle.aW(),this.Dle.removeEventListener("end",this.Ile),this.Dle.end().catch(Tt),this.Dle=null,this.Tle())}async Lle(){if(!this.Ble&&this._le){this.xle();try{const t=await ou(Ll.xr.requestSession("immersive-vr"),this.vW.Uw),e=await t.requestReferenceSpace("local");t.addEventListener("end",this.Cle),this.Ole=e,this.Ble=t,await this.Fle(),this.Mle()}catch(t){this.Cle(),this.cNt(t,Qa.VR_PRESENTATION_ERROR)}}}async Fle(){const t=this.$ue,e=this.Ble;this.cle&&t&&e&&!this.Vle&&(this.cle.addEventListener("webglcontextlost",(t=>{t.preventDefault()})),this.cle.addEventListener("webglcontextrestored",(()=>{this.ple(this.wle,this.yle)})),this.Vle=!0,await t.makeXRCompatible(),await e.updateRenderState({baseLayer:new XRWebGLLayer(e,t)}))}Tle(){if(!this.Ble&&this.$ue){const t=this.$ue,e=this.cle.clientWidth,i=this.cle.clientHeight;if(0===e||0===i)return;const s=Ms.Ys.Kg;this.cle.width=e*s,this.cle.height=i*s,t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight)}}Mle(){null===this.Wle&&(this.Ule(),this.Gle?this.Wle=this.Gle.requestAnimationFrame(this.Hle):this.Zle())}xle(){null!==this.Wle&&(this.Zle(),this.Gle&&this.Gle.cancelAnimationFrame(this.Wle),this.Wle=null)}Ule(){if(null!==this.Xle)return;const t=this.na.TI();if(void 0===t||!(t instanceof HTMLVideoElement))return void 0;if("function"!=typeof t.requestVideoFrameCallback)return;const e=()=>{this.Sle.Pce(this.na),this.Xle=t.requestVideoFrameCallback(e)};this.zle=t,this.Xle=t.requestVideoFrameCallback(e)}Zle(){var t,e;null!==this.Xle&&(null==(e=this.zle)||null==(t=e.cancelVideoFrameCallback)||t.call(e,this.Xle),this.zle=null,this.Xle=null)}qle(){return!!this.Yle||(Z.su?this.Kle&&this.jle:this.Kle)}Qle(){const t=DeviceMotionEvent.requestPermission;"function"==typeof t&&t().then((t=>{this.jle="granted"===t}))}Jle(){return(!this.KR()||Boolean(this.$le))&&this.tde()}KR(){return this.na.KR}tde(){return this.na.rI>=2}get ede(){return this.ide}set ede(t){const e=this.Vft;this.ide=t,this.Vft!==e&&this._o(new I2)}get mle(){return this.wle!==fC.NONE}get wle(){return this.sde}set wle(t){const e=this.Vft;this.sde=t,this.Vft!==e&&this._o(new I2)}get _le(){return this.rde}set _le(t){const e=this.rde;this.rde=t,this.rde!==e&&this._o(new I2)}get ode(){return this._le}get Gle(){return this.Ble||this.Dle}get Ble(){return this.Yle}set Ble(t){const e=this.Vft;this.Yle=t,this.Vft!==e&&this._o(new I2)}get hde(){return this.Ole||this.Nle}get ade(){const t=this.ude.bue();return{yaw:t.Aue*E5,pitch:t.Sue*E5,roll:t.Tue*E5}}set ade(t){const e=u6(t&&t.pitch||0)*k5,i=u6(t&&t.roll||0)*k5,s=u6(t&&t.yaw||0)*k5,n=new R5(s,e,i),r=this.ude.bue(),o=this.cde.bue();this.ude=n.kue(),this.cde=n.kF(r).kO(o).kue()}get Wue(){const t=this.cde.bue();return{yaw:t.Aue,pitch:t.Sue,roll:t.Tue}}set Wue(t){const e=c6(t&&t.pitch||0),i=c6(t&&t.roll||0),s=c6(t&&t.yaw||0),n=new R5(s,e,i);this.cde=n.kue()}get Vft(){return this.ede?this.Ble?C5.Xa:C5.Rue:C5.Rs}get lde(){return null!==this.Ble}set lde(t){const e=this.lde;t&&this._le?this.Lle():this.Cle(),this.lde!==e&&this._o(new D5)}get dde(){return this.Kle}set dde(t){null===this.Yle&&(this.Kle=t,t&&Z.su&&this.Qle())}get fde(){return this.Hce}set fde(t){t&&t>=0&&t<=180&&(this.Hce=t,null!==this.Dle&&this.Dle.updateRenderState({inlineVerticalFieldOfView:this.Hce*k5}))}cNt(t,e){this._o(new Na(new A(e,t)))}_de(){const t=this.na.iu();return t&&t.vr}yn(){this.vW.jw(),this.Rle(),this.Ro(),this.cle&&(ze(this.cle),this.cle=void 0),this.$ue=void 0,this.lle&&(this.lle.yn(),this.lle=void 0),this.na=void 0}constructor(t){super(),this.vW=new da,this.fle=!1,this.rde=!1,this.ude=new Xo,this.vde=new Xo,this.cde=new Xo,this.Hce=74,this.Kle=!1,this.MT=void 0,this.yle=dC.NONE,this.ide=!1,this.sde=fC.NONE,this.Ale=new M5,this.Dle=null,this.Yle=null,this.Nle=null,this.Ole=null,this.Vle=!1,this.Wle=null,this.zle=null,this.Xle=null,this.$le=0,this.jle=!1,this.hle=()=>{const t=this.fle;this.dle().then((()=>{this.fle?t||this.Dle||this.Yle||this.vle():this.cNt("Inline session not available. Panorama functionality will not work.",Qa.VR_PRESENTATION_ERROR)}))},this.co=()=>{var t;this.Ele(),this.Rle(),null==(t=Ll.xr)||t.removeEventListener("devicechange",this.hle);const e=this._de();this.MT=e,this.ede=Bo(e),this.yle=(null==e?void 0:e.stereoMode)||dC.NONE,this.wle=(null==e?void 0:e.panoramaMode)||fC.NONE,e&&(this.ule(),this.vle(),this.ole())},this.kle=()=>{this.Ple()},this.Cle=()=>{this.Ble&&(this.xle(),this.Ble.removeEventListener("end",this.Cle),this.Ble.end().catch(Tt),this.Ble=null,this.Ole=null,this.Vle=!1,this.Dle?this.Mle():this.Ple())},this.gn=()=>{this.Tle()},this.Hle=(t,e)=>{if(!this.$ue)return;const i=this.$ue,s=this.Gle;if(null===this.Xle&&this.Jle()&&(this.Sle.Pce(this.na),this.$le>0&&(this.$le-=1)),null===s||void 0===e)return void 0;this.Wle=s.requestAnimationFrame(this.Hle);const n=s.renderState.baseLayer,r=e.getViewerPose(this.hde);if(void 0===n||void 0===r)return void 0;i.bindFramebuffer(i.FRAMEBUFFER,n.framebuffer);let o=new R5,h=0;for(const t of r.views){const e=new n6(t.eye);if(e.Vce=t.projectionMatrix,this.qle()){let i;if(Z.Qs&&Z.pm&&null===this.Yle){if(i=t.transform.inverse.orientation,0===i.x&&0===i.y&&0===i.z&&1===i.w)return}else i=t.transform.orientation;e.Uce=new Xo(i.x,i.y,i.z,i.w)}this.Dle&&e.ele(this.cde.bue()),o=o.kO(e.Uce.bue()),h+=1;const s=n.getViewport(t);s&&i.viewport(s.x,s.y,s.width,s.height),this.Ale.Yue(i,e)}const a=new R5(o.Aue/h,o.Sue/h,o.Tue);this.ude=a.kue(),function(t,e){const i=t.gue(e);return 1-i*i<h6}(this.ude,this.vde)||(this.vde.p_t(this.ude),this._o(new r6))},this.PX=()=>{this.$le=5},this.na=t,this.wa=function(t){let e,i={get stereo(){return t.lde},set stereo(e){t.lde=e},get useDeviceMotionControls(){return t.dde},set useDeviceMotionControls(e){t.dde=e},get direction(){return t.ade},set direction(e){t.ade=e},get verticalFOV(){return t.fde},set verticalFOV(e){t.fde=e},get canPresentVR(){return t.ode},get state(){return t.Vft},addEventListener(t,i){e.bn(t,i)},removeEventListener(t,i){e.vn(t,i)}};return e=new gD(t,I5,i),i}(this),this.ale()}};function u6(t){return df(t+180,360)-180}function c6(t){return df(t+_.PI,2*_.PI)-_.PI}Dh((function(t){return class extends t{ka(){return Jr(super.ka(),{vr:this.Uue.wa})}yn(){this.Uue.yn(),super.yn()}constructor(t,e){super(t,e),this.Uue=new a6(this)}}}),rh.au),r(),r();var l6=class extends sn{get wa(){return this.eu||(this.eu=function(t){let e,i={get status(){return t.Yk},get tasks(){return t.lee},get network(){return t.XX.wa},createTask:(e,i)=>t.mde(e,i),addEventListener(t,i){e.bn(t,i)},removeEventListener(t,i){e.vn(t,i)}};return e=new rt(t,i),i}(this)),this.eu}get Yk(){return this.gde.Yk}get lee(){return this.gde.lee.wa}get XX(){return this.Ast}mde(t,e,i){let s,n;if(void 0===i&&(i="persistent"),!t)throw new g("Unexpected - The source description is undefined");if(s=_c(t),n=x3(e),gC(s))throw new g("Invalid source description");return this.gde.oee(s,n).wa}constructor(t,e){super(),this.gde=t,this.Ast=e,this.gde.bn("wat",this.Ds)}};var d6=function(){const t=new iD(Ms.fR,!1),e=To.Vg,i=new M3(t),s=new T3(e,i),n=new nD(t),r=new Ft(e.Ort,s,"persistent");return new l6(r,n)}().wa;function f6(t,e){if("function"==typeof t.getAll){return _6(void 0===e?t.getAll():t.getAll(e))}return function(t){let e=new os,i=[];return t.onsuccess=()=>{let s=t.result;s&&s.value?(i.push(s.value),s.continue()):e.Vb(i),Tt()},t.onerror=()=>{e.Wb(t.error),Tt()},e.Ub}(void 0===e?t.openCursor():t.openCursor(e))}function _6(t){return new Promise(((e,i)=>{t.onsuccess=()=>{e(t.result),Tt()},t.onerror=()=>{i(t.error),Tt()}}))}r(),r(),r(),r(),r(),r();var v6=class{jw(){if(this.so)try{this.Drt.abort(),this.so=!1}catch(t){}}constructor(t){this.Drt=t,this.so=!0,this.Ub=new Promise(((t,e)=>{this.Drt.oncomplete=()=>{this.so=!1,t(),Tt()},this.Drt.onerror=()=>{this.so&&(this.so=!1,e(this.Drt.error||new g("Transaction error")),Tt())},this.Drt.onabort=()=>{this.so=!1,e(new g("Transaction aborted")),Tt()}}))}};async function m6(t,e,i){const s=new v6(t);try{const[t]=await Promise.all([e(i),s.Ub]);return t}catch(t){if(!s.so)throw new U2("IDBTransaction committed prematurely",t);throw t}finally{s.jw()}}var g6=class{get l(){return this.sx.l}yrt(t){return Promise.resolve("persistent"===t)}brt(t,e){if(void 0===e&&(e="persistent"),"persistent"!==e)return Promise.reject(rV(e));return _6(this.pde(Ya.Wrt).put(t))}async Art(t,e){if(void 0===e&&(e="persistent"),"persistent"!==e)return Promise.reject(rV(e));for(const i of t)await this.brt(i,e)}async Mb(t){return Boolean(await this.Lb(t))}Lb(t){return _6(this.pde(Ya.Vrt).get(t))}Srt(t,e){return _6(this.pde(Ya.Vrt).index(e).get(t))}async frt(t){const e=[];for(let i of t){const t=await this.Lb(i);t&&e.push(t)}return e}Trt(){return f6(this.pde(Ya.Vrt))}krt(t){return f6(this.pde(Ya.Vrt),t)}Ert(t,e){return f6(this.pde(Ya.Vrt).index(e),t)}eT(t){return _6(this.pde(Ya.Wrt).delete(t))}async xrt(t){for(const e of t)await this.eT(e)}Rrt(){return _6(this.pde(Ya.Wrt).clear())}pde(t){if(!this.wde)throw new g("Lock was released");if(!function(t,e){return t===Ya.Vrt&&e===Ya.Vrt||e===Ya.Wrt}(t,this.wde.mode))throw new g("Incompatible transaction mode: "+this.wde.mode+", expected "+t);return this.wde.objectStore(this.l)}yde(){this.sx.bde(this),this.wde=void 0}constructor(t,e){this.sx=t,this.wde=e}};var _n=class{yrt(t){return Promise.resolve("persistent"===t)}brt(t,e){return void 0===e&&(e="persistent"),"persistent"!==e?Promise.reject(rV(e)):this.Drt(Ya.Wrt,(e=>e.brt(t)))}Art(t,e){return void 0===e&&(e="persistent"),"persistent"!==e?Promise.reject(rV(e)):this.Drt(Ya.Wrt,(e=>e.Art(t)))}Mb(t){return this.Drt(Ya.Vrt,(e=>e.Mb(t)))}Lb(t){return this.Drt(Ya.Vrt,(e=>e.Lb(t)))}Srt(t,e){return this.Drt(Ya.Vrt,(i=>i.Srt(t,e)))}frt(t){return this.Drt(Ya.Vrt,(e=>e.frt(t)))}Trt(){return this.Drt(Ya.Vrt,(t=>t.Trt()))}krt(t){return this.Drt(Ya.Vrt,(e=>e.krt(t)))}Ert(t,e){return this.Drt(Ya.Vrt,(i=>i.Ert(t,e)))}eT(t){return this.Drt(Ya.Wrt,(e=>e.eT(t)))}xrt(t){return this.Drt(Ya.Wrt,(e=>e.xrt(t)))}Rrt(){return this.Drt(Ya.Wrt,(t=>t.Rrt()))}Hxt(t){return this.Ade(),this.Cxt=new g6(this,t),this.Cxt}Ade(){if(void 0!==this.Cxt)throw new g("Already locked")}bde(t){if(this.Cxt!==t)throw new g("Incorrect lock");this.Cxt=void 0}Qo(t){return this.Yo.Qo(t)}Drt(t,e){return this.Qo((()=>this.Sde(t,e)))}async Sde(t,e){this.Ade();const i=this.Tde.transaction(this.l,t),s=this.Hxt(i);try{return await m6(i,e,s)}finally{s.yde()}}kde(t){this.Ade();const e=this.Tde.transaction(this.l,t);return this.Hxt(e)}static Ede(t,e){let i;const s=new Promise((t=>{i=t})),n=t.reduce(((t,e)=>t.then((()=>{let t;const i=new Promise((e=>{t=e}));return e.Qo((()=>(t(),s))).catch(Tt),i}))),Promise.resolve());return i(n.then(e)),s}constructor(t,e){this.Cxt=void 0,this.Yo=new Su,this.Tde=t,this.l=e}};r(),r(),r(),r(),r();var p6={jD:17,xde:async t=>{const{transaction:e,database:i}=t,s=e.objectStoreNames;if(s&&s.length)for(let t=0;t<s.length;t++)i.deleteObjectStore(s[t]);i.createObjectStore(S6,{keyPath:"id"}),i.createObjectStore(T6,{keyPath:"key"}),i.createObjectStore(k6,{keyPath:"key"});i.createObjectStore(E6,{keyPath:"segmentURLsegmentByteRange"}).createIndex("manifestURL","manifestURL");i.createObjectStore(x6,{keyPath:"segmentURLsegmentByteRange"}).createIndex("manifestURL","manifestURL")}},w6=class{async Rde(t){for(const e of this.Ide)this.Cde<e.jD&&await e.xde(t)}constructor(t){this.Cde=t}},y6=class extends w6{get Ide(){return[p6]}},b6=new class{Pde(t){this.Dde=t}Ait(t){return this.Dde(t)}constructor(){this.Dde=t=>new y6(t)}},A6=18,S6="cachingTask",T6="licences",k6="manifest",E6="segment",x6="segmentMetadata";async function R6(){!function(){if("undefined"==typeof indexedDB)throw new g("Indexed database unavailable")}();const t=indexedDB.open("theoplayer-cache-database",A6);return t.addEventListener("upgradeneeded",I6),await _6(t)}async function I6(t){const e=t.oldVersion<=A6?t.oldVersion:-1,i=t.target,s=i.result,n=i.transaction,r=b6.Ait(e),o={database:s,transaction:n};await m6(n,(t=>r.Rde(t)),o)}var C6=class{static get Vg(){return this.Qrt||(this.Qrt=R6()),this.Qrt}};C6.Qrt=void 0,r();var P6=class{Drt(t){return t(this)}yde(){this.Lrt.yde(),this.Mrt.yde(),this.Brt.yde(),this.Ort.yde(),this.Frt.yde()}constructor(t,e){this.Lrt=t.Lrt.Hxt(e),this.Mrt=t.Mrt.Hxt(e),this.Brt=t.Brt.Hxt(e),this.Ort=t.Ort.Hxt(e),this.Frt=t.Frt.Hxt(e)}};To.Pa(class t{static async Ait(){const e=await C6.Vg;return new t(e)}Drt(t){const e=this.allCollections;return _n.Ede(e,(()=>this.Sde(e,t)))}async Sde(t,e){const i=t.map((t=>t.l)),s=this.Tde.transaction(i,Ya.Wrt),n=new P6(this,s);try{return await m6(s,e,n)}finally{n.yde()}}get allCollections(){return[this.Mrt,this.Lrt,this.Brt,this.Ort,this.Frt]}constructor(t){this.Tde=t,this.Lrt=new _n(t,x6),this.Mrt=new _n(t,E6),this.Brt=new _n(t,k6),this.Ort=new _n(t,S6),this.Frt=new _n(t,T6)}}.Ait),r(),r(),r();var D6=class{Nde(t){const e=this.gj.pR(),i=t.createGain();for(const s of e){t.createMediaElementSource(s).connect(i)}return i}get wa(){return this.eu||(this.eu=this.ka()),this.eu}ka(){const t=this;return{createAudioSourceNode:e=>t.Nde(e)}}constructor(t){this.eu=void 0,this.gj=t}};Dh((function(t){return class extends t{ka(){const t=this.Mde.wa;return Jr(super.ka(),{get audio(){return t}})}constructor(t,e){super(t,e),this.Mde=new D6(this.Ta)}}}),rh.au),r(),r();Dh((function(t){return class e extends t{Ca(t){const i=e.Lde(this.kd.analytics),s=e.Lde(t?t.analytics:void 0);i||s?this.Bde(ol({},i,s)):this.Ode&&this.Ode.disable(),super.Ca(t)}Bde(t){if(this.Ode)this.Ode.enable(),this.Ode.setOptions(t);else{const e=s.youbora;if(!e)throw new g("Youbora JavaScript library not loaded.");if(!e.adapters.TheoPlayer2)throw new g("TheoPlayer2 adapter not available on Youbora JavasScript library");const i=new e.Plugin(t);i.setAdapter(new e.adapters.TheoPlayer2(this.wa)),this.zc&&e.adapters.TheoPlayer2.NativeAdsAdapter&&i.setAdsAdapter(new e.adapters.TheoPlayer2.NativeAdsAdapter(this.wa)),this.Ode=i}}static Lde(t){if(t){const e=t.filter((t=>"youbora"===t.integration));if(0===e.length)return;if(e.length>1)throw new g("Only one youbora analytics configuration expected");const i=e[0],{integration:s}=i;return IS(i,["integration"])}}yn(){this.Ode&&this.Ode.disable(),super.yn()}constructor(t,e){super(t,e)}}}),rh.Xst),r(),r(),r();var N6=1,M6=0,L6=1e3,B6=class t extends NA{Fde(){const t=this.ct===1/0,e=t?N6:M6,i=t?-1:this.ct,s=on(this.na.rt.lC,this.Vde);this.Wde.setPresentationInformation(new this.Ude(e,i,s))}Vde(t){const e=t.NC.lC,i=[];for(let t=0;t<e.length;t++){const s=e[t];s.ji&&s.Ti&&i.push({trackIdx:t,bitrate:s.bG,width:s.ji,height:s.Ti,codecIdentifier:s.Jrt})}return i}Gde(){return this.na.xR()*L6}get ct(){return this.na.jd()*L6}get Hde(){return this.Zde}get Xde(){return this.zde}set Xde(t){this.zde=t,t&&this.Wde.reportPlayerState(t)}set qde(t){this.Yde=t}Kde(){return p((()=>{this.jde(),this.Qde()}),t.Jde)}_Mt(){this.na.zc&&(this.na.zc.bn("vnt",this.$de),this.na.zc.bn("mnt",this.tfe),this.na.zc.bn("f2t",this.efe),this.na.zc.bn("j2t",this.ife)),this.na.bn(Ti.Dy,this.Foe),this.na.bn(yo.fa,this.X6),this.na.bn(Ti.zy,this.sfe),this.na.bn(Ti.ho,this.kle),this.na.bn(Zc.UL,this.IX),this.na.bn(Ti.jy,this.WY),this.na.bn(Ti.Qy,this.PX),this.na.bn(Zc.WL,this.xX),this.na.bn(Ti.eb,this.nfe)}vMt(){this.na.zc&&(this.na.zc.vn("vnt",this.$de),this.na.zc.vn("mnt",this.tfe),this.na.zc.vn("f2t",this.efe),this.na.zc.vn("j2t",this.ife)),this.na.vn(Ti.Dy,this.Foe),this.na.vn(yo.fa,this.X6),this.na.vn(Ti.zy,this.sfe),this.na.vn(Ti.ho,this.kle),this.na.vn(Zc.UL,this.IX),this.na.vn(Ti.jy,this.WY),this.na.vn(Ti.Qy,this.PX),this.na.vn(Zc.WL,this.xX),this.na.vn(Ti.eb,this.nfe)}yn(){m(this.rfe),this.vMt()}constructor(t,e,i,s=MMPlayerState,n=MMAdState,r=MMPresentationInfo){super(),this.na=t,this.MT=e,this.Wde=i,this.ofe=s,this.hfe=n,this.Ude=r,this.afe=!0,this.Zde=!1,this.Yde=void 0,this.zde=void 0,this.ufe=void 0,this.$de=t=>{const e=t.lnt;e.c$t();var i;i=e.int().duration;const s="linear"===e.int().type;e.l$t(),e.h$t();s&&(this.Zde=!0),this.qde=this.hfe.AD_IMPRESSION,this.qde=this.hfe.AD_STARTED},this.tfe=t=>{this.Zde=!1,this.qde=this.hfe.AD_COMPLETED},this.efe=t=>{t.Ajt===Oo.ADBLOCK?this.qde=this.hfe.AD_BLOCKED:this.qde=this.hfe.AD_ERROR},this.ife=()=>{this.qde=this.hfe.AD_SKIPPED},this.nfe=t=>{var e,i,s,n;t.EE===ee.mE&&(this.ufe&&t.Az!==this.ufe&&this.Wde.reportABRSwitch(this.ufe,t.Az),this.ufe=t.Az,this.Wde.reportChunkRequest(new MMChunkInformation(t.EN,t.Az,t.sL,t.Jut.Xu,void 0,void 0,null!=(s=null==(e=t.Jut._ut)?void 0:e[0])?s:0,null!=(n=null==(i=t.Jut._ut)?void 0:i[1])?n:-1)))},this.Foe=t=>{this.Xde=this.ofe.STOPPED,this._o(t)},this.X6=t=>{this.Xde=this.ofe.ERROR,this.Wde.reportError(t.error,this.Gde())},this.sfe=()=>{this.Hde?this.qde=this.hfe.AD_PAUSED:this.Xde=this.ofe.PAUSED},this.kle=()=>{this.Hde&&(this.qde=this.hfe.AD_PLAY)},this.IX=()=>{this.Hde?(this.Yde===this.hfe.AD_PAUSED&&(this.qde=this.hfe.AD_RESUMED),this.qde=this.hfe.AD_PLAYING):(this.afe&&(this.afe=!1,this.Fde(),this.Xde=this.ofe.STARTED),this.Xde!==this.ofe.PAUSED&&this.Xde!==this.ofe.BUFFERING||(this.Xde=this.ofe.RESUMED))},this.WY=()=>{this.Wde.reportPresentationSize(this.na.vI,this.na.dI)},this.PX=t=>{this.Hde||this.Xde!==this.ofe.PAUSED||this.Wde.reportPlayerSeekCompleted(t.currentTime*L6)},this.xX=()=>{this.Hde||(this.Xde=this.ofe.BUFFERING)},this.Qde=()=>{this.Wde.reportDownloadRate(_.floor(gu.Vg.cG()))},this.jde=()=>{this.Hde||this.Wde.reportPlaybackPosition(this.Gde())},this.Xde=this.ofe.INITIALIZED,this._Mt(),this.rfe=this.Kde()}};B6.Jde=2e3,Dh((function(t){return class extends t{yn(){super.yn(),this.cfe()}constructor(t,e){super(t,e),this.lfe=void 0,this.dfe=void 0,this.ffe=()=>{this.dfe=void 0,this.cfe();const t=super.iu();t&&(this.dfe=function(t,e){const i=function(t,e){if(t&&t.analytics)for(const e of t.analytics)if("smartsight"===e.integration)return e;if(e&&e.analytics)for(const t of e.analytics)if("smartsight"===t.integration)return t;return}(t,e);if(!i)return;return i}(t,this.kd)),this._fe()},this._fe=()=>{if(!this.lfe&&this.dfe&&this.bt&&this.bt.src&&!this.KR){const t=MMSmartStreaming.getInstance();!function(t,e,i){t.registerMMSmartStreaming(i.playerName,i.customerID,i.subscriberID,i.domainName),t.reportComponent("THEOSDK"),t.reportPlayerInfo("THEOplayer","THEOplayer","9.3.1"),t.reportDeviceInfo(void 0,void 0,void 0,void 0,void 0,s.innerWidth,s.innerHeight),t.initializeSession("QBRModeDisabled",e,i.metaURL,i.assetID)}(t,this.bt.src,this.dfe),this.lfe=new B6(this,this.dfe,t),this.lfe.bn("ended",this.cfe)}},this.cfe=()=>{this.lfe&&(this.lfe.yn(),this.lfe=void 0)},this.bn(Ti.uo,this.ffe),this.bn(Ti.xy,this._fe),this.bn(Ti.ho,this._fe)}}}),rh.Xst),r(),r();var O6=String.fromCharCode(95);var F6=class t{get wa(){return this.eu||(this.eu=function(t){return{get adsManager(){return t.adsManager},get ids(){return t.ids},get adContainer(){return t.adContainer},get imaSDK(){return t.imaSDK},get sendEvent(){return t.sendEvent},set sendEvent(e){t.sendEvent=e}}}(this)),this.eu}get id(){return this.zS}get adsManager(){return this.Nse}get ids(){return this.u_}get adContainer(){return this.b0t}get sendEvent(){return this.vfe}set sendEvent(t){for(let t of this.mfe)this.Nse.removeEventListener(t.type,t.listener);this.mfe=[],this.vfe=t,this.gfe()}get imaSDK(){return!0}pfe(){for(let t in google.ima.AdEvent.Type){const e=google.ima.AdEvent.Type[t];this.Nse.addEventListener(e,this.wfe),this.mfe.push({type:e,listener:this.wfe})}}yfe(){En(this.mfe);for(let t in google.ima.AdEvent.Type){const e=google.ima.AdEvent.Type[t];this.Nse.removeEventListener(e,this.wfe)}}bfe(t){this.Kf.push({type:t.type,adVolume:this.adsManager.getVolume()})}gfe(){null==this.vfe||this.vfe.call(this,this.Kf),this.Kf=[]}static Afe(e){return t.Sfe[e]||e}constructor(e,i,s,n){this.wfe=e=>{this.bfe({type:t.Afe(e.type)})},this.zS=e,this.Nse=i,this.u_=s,this.b0t=n,this.mfe=[],this.Kf=[]}};F6.Sfe={loaded:"AdLoaded",impression:"AdImpression",start:"AdVideoStart",firstQuartile:"AdVideoFirstQuartile",midpoint:"AdVideoMidpoint",thirdQuartile:"AdVideoThirdQuartile",complete:"AdVideoComplete",pause:"AdPaused",skip:"AdSkipped",volumeChange:"AdVolumeChange"};var V6=class{Tfe(t,e){this.kfe=h.createElement("script"),this.kfe.id=t.id,this.kfe.type="text/javascript",t.adContainer.appendChild(this.kfe),this.kfe.src="https://z.moatads.com/"+e+"/moatvideo.js#"+t.id,this.Efe=t.id,s[this.Efe]=t.wa}xfe(){this.kfe&&ze(this.kfe),this.Efe&&(s[this.Efe]=void 0)}constructor(){this.kfe=void 0,this.Efe=void 0}};Dh((function(t){return class e extends t{Ca(t){var i,s,n;this.Rfe(),null==(i=this.Ife)||i.removeEventListener(google.ima.AdEvent.Type.COMPLETE,this.Cfe),null==(s=this.Ife)||s.removeEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.Rfe),null==(n=this.Ife)||n.removeEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.Pfe),this.Ife=void 0,this.b0t=void 0,super.Ca(t);const r=t&&t.analytics;this.Dfe=e.Nfe(r);this.zc&&this.Dfe&&l2()&&this.Mfe()}yn(){var t,e,i;this.Rfe(),null==(t=this.Ife)||t.removeEventListener(google.ima.AdEvent.Type.COMPLETE,this.Cfe),null==(e=this.Ife)||e.removeEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.Rfe),null==(i=this.Ife)||i.removeEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.Pfe),this.Ife=void 0,this.b0t=void 0,this.zc&&this.zc.vn("$8t",this.t7t),super.yn()}Mfe(){this.zc&&this.zc.bn("$8t",this.t7t)}Lfe(t,e,i){const s=O6+"moatApi"+_.floor(1e8*_.random());this.Bfe=new F6(s,t,e,i),this.Bfe.pfe(),this.Ofe.Tfe(this.Bfe,this.Dfe.partnerCode)}static Nfe(t){if(t){const e=t.filter((t=>"moat"===t.integration));if(0===e.length)return;if(e.length>1)throw new g("Only one Moat analytics configuration expected");return e[0]}}constructor(t,e){super(t,e),this.Dfe=void 0,this.Bfe=void 0,this.Ife=void 0,this.b0t=void 0,this.Pfe=()=>{this.Lfe(this.Ife,{partnerCode:this.Dfe.partnerCode,viewMode:google.ima.ViewMode.NORMAL},this.b0t)},this.t7t=t=>{this.Ife=t.Dse,this.b0t=t.O7t,this.Rfe(),this.Ife.addEventListener(google.ima.AdEvent.Type.COMPLETE,this.Cfe),this.Ife.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.Rfe),this.Ife.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.Pfe)},this.Cfe=t=>{const e=t.getAd().getAdPodInfo();e.getAdPosition()<e.getTotalAds()&&(this.Rfe(),this.Pfe())},this.Rfe=()=>{this.Bfe&&(this.Bfe.yfe(),this.Bfe=void 0),this.Ofe.xfe()},this.Ofe=new V6}}}),rh.Xst),r(),r(),r(),r();var W6="theo-dai-clickthrough",U6="urn:google:dai:2018",G6=class{get wa(){const t=this,e=this.Ffe;return{contentTimeForStreamTime:e=>t.Hre?t.Hre.Zre(e):e,streamTimeForContentTime:e=>t.Hre?t.Hre.Xre(e):e,replaceAdTagParameters(e){t.Hre&&t.Hre.replaceAdTagParameters(e)},get snapback(){return t.Vfe},set snapback(e){t.Vfe=e},get sourceTransformer(){return e.Wfe},set sourceTransformer(t){e.Wfe=t}}}RR(t){this.r8.jw(),this.r8=new da;ah(js(this.Use(t,this.r8.Uw),this.r8))}async Use(t,e){if(J(e),!this.Ufe||!this.Hre)return this.na.Gfe(t);if(this.Ufe.snt&&!this.Hfe)return;const i=this.na.xR();if(this.Vfe){const s=this.Hre.aoe(t,i);if(s){this.na.Gfe(s),await this.Hre.py(rs.AD_BREAK_ENDED,e);if(this.Hre.hoe(t).UO>t)return}}this.na.Gfe(t)}aI(){const t=this.Ufe&&this.Ufe.snt;if(t){const e=se.Cn(this.na.Zfe()),i=t.eOt,s=i+t.ZJt,n=new se([i,s]);return e.jn(n).ks()}return this.na.Zfe()}async Rnt(t,e){if(!t)return this.na.Xfe(t,e);let i=t;try{this.na.nt.bn(Se.VI,this.zfe),i=await this.Ffe.qfe(t,e),this.Ufe&&this.Hre&&(this.Yfe=!0)}catch(t){if(th(t),t.code===ok.LICENSE_INVALID)return;const e=new A(Qa.SOURCE_NOT_SUPPORTED,"Something went wrong while setting up a Google DAI stream.",t);throw this.YG=gn(e),this.KG=e,this.na._o(new Na(e)),e}await this.na.Xfe(i,e)}nr(){if(this.Yfe){if(this.na.nt.vn(Se.VI,this.zfe),this.Uoe){this.Uoe.vn(No.HI,this.Kfe);for(const t of this.Uoe.L.lC)t.vn(Ct.rO,this.jfe);this.Uoe=void 0}this.YG=void 0,this.KG=void 0,this.r8.jw(),this.Ufe&&this.Ufe.nr(),this.Hre&&this.Hre.nr(),this.Yfe=!1}}get lt(){return this.YG||this.na.Qfe()}get MR(){return this.KG||this.na.Jfe()}yn(){this.nr(),this.na.$fe(),this.Hre&&this.Hre.yn()}constructor(t,e,i,s,n){this.Uoe=void 0,this.YG=void 0,this.KG=void 0,this.r8=new da,this.Yfe=!1,this.Vfe=!0,this.zfe=t=>{const e=t.Ht;e.Lt===Li.eW&&(e.Tw===Lr.ID3||e.Tw===Lr.EVENT_STREAM&&e.BC===U6)&&(e.CE=bh.LC,this.Uoe=e,e.bn(No.HI,this.Kfe))},this.Kfe=t=>{t.FO.bn(Ct.rO,this.jfe)},this.jfe=t=>{var e,i;if(this.Hre)if((null==(e=this.Uoe)?void 0:e.Tw)===Lr.ID3){const e=t.FO.U;"TXXX"===e.id&&this.Hre.roe({TXXX:e.text})}else if((null==(i=this.Uoe)?void 0:i.Tw)===Lr.EVENT_STREAM){const e=t.FO.U;this.Hre.ooe(U6,e,t.oV)}},this.na=t,this.Hre=e,this.Ufe=i,this.Ffe=s,this.Hfe=n,i&&e&&this.na.zc&&this.na.zc.ant(i.r8t)}};r(),r();var H6=class extends ys{get t_e(){return this.e_e}get aQt(){return vt.Kh}constructor(t,e,i,s=!0){super(i),this.e_e=s,this.S2t=t,this.T2t=e}},Z6=class extends $1{i_e(){const t=[rs.STARTED,rs.FIRST_QUARTILE,rs.MIDPOINT,rs.THIRD_QUARTILE,rs.COMPLETE];this.Hre.bn(t,this.s_e),this.Hre.bn(rs.AD_BREAK_ENDED,this.soe),this.Hre.bn(rs.AD_PROGRESS,this.Yre),this.Hre.bn(rs.CUEPOINTS_CHANGED,this.jre)}get g2t(){return this.h8t}get h2t(){return this.I3t}n_e(t){let e=t.d9t.eOt,i=this.p$t||this.findAdBreakWithPredicate(e,(t=>!t.tI));if(!i){const s=t.d9t.ZJt;e=this.na.xR(),i=new H6(s,s,e,!1),i.E2t(),this.w$t.push(i)}return i}r_e(t){switch(t){case rs.STARTED:this.h8t=!0;break;case rs.AD_BREAK_ENDED:this.h8t=!1}}o_e(t,e,i){if(e)switch(t){case rs.STARTED:case rs.FIRST_QUARTILE:case rs.MIDPOINT:case rs.THIRD_QUARTILE:case rs.COMPLETE:this.h2t._o(new Ua(this.p$t))}if(i)switch(t){case rs.STARTED:case rs.FIRST_QUARTILE:case rs.MIDPOINT:case rs.THIRD_QUARTILE:case rs.COMPLETE:this.h2t._o(new cn(this.a$t,this.a$t.V9t))}switch(t){case rs.COMPLETE:this.h2t._o(new xn(this.a$t,this.n8t.V9t));break;case rs.AD_BREAK_ENDED:this.h2t._o(new Hh(this.snt))}switch(t){case rs.FIRST_QUARTILE:this.h2t._o(new cs(this.a$t,this.n8t.V9t));break;case rs.MIDPOINT:this.h2t._o(new Is(this.a$t,this.n8t.V9t));break;case rs.THIRD_QUARTILE:this.h2t._o(new ks(this.a$t,this.n8t.V9t))}}h_e(t){const e=t.lnt,i=this.n_e(e),s=function(t,e){if(t.zc.length)return!1;for(let i=0;i<e;i++){const e=new K1(t,Es.Mjt);t.R2t(e)}return!0}(i,e.d9t.R6t),n=function(t,e){const i=e.d9t.x6t-1;return t.zc[i]}(i,e),r=function(t,e){return t.O2t!==_1.READY&&(t.z9t(e),!0)}(n,e);this.a$t=n,this.p$t=i,i.E2t(),this.o_e(t.type,s,r)}a_e(t){for(const e of this.w$t)if(gh(t,e.eOt))return e}findAdBreakWithPredicate(t,e){for(const i of this.w$t)if(gh(i.eOt,t)&&e(i))return i}get u_e(){const t=this.findAdBreakWithPredicate(0,(t=>t.t_e));let e=0;return t&&(e=t.ZJt),e}c_e(t,e){let i;for(const s of this.w$t)s.eOt>=t&&s.eOt<=e&&!s.tI&&(!i||s.eOt>=i.eOt)&&(i=s);return i}MD(){}hnt(t){}nr(){this.a$t&&(this.h2t._o(new xn(this.a$t,this.a$t.V9t)),this.a$t=void 0),this.p$t&&(this.h2t._o(new Hh(this.p$t)),this.p$t=void 0),this.h8t=!1,En(this.w$t)}yn(){this.nr(),this.h2t.yn()}constructor(t,e){super(new Ju,vt.Kh),this.Hre=t,this.na=e,this.Yre=t=>{const e=this.p$t;if(!e||!this.a$t)return;const i=t.Gre.coe;this.a$t.V9t=i.ER,function(t,e){const i=e.x6t,s=e.E6t,n=e.ER,r=Kn(t.zc.slice(0,i-1),(t=>{var e;return null!=(e=t.ct)?e:0}));t.XJt=s-n-r}(e,i)},this.jre=t=>{const e=t.Gre.loe;if(e)for(const t of e)if(!this.a_e(t.WO)){const e=t.UO-t.WO,i=new H6(e,e,t.WO,!0);this.w$t.push(i)}},this.s_e=t=>{this.r_e(t.type),this.h_e(t)},this.soe=t=>{this.h8t=!1,this.a$t=void 0;const e=this.snt;e&&(e.XJt=0,this.o_e(t.type,!1,!1),this.p$t=void 0)},this.i_e()}};function X6(t){if(t.sources)if($c(t.sources)){for(const e of t.sources)if(qc(e))return!0}else if(V(t.sources))return qc(t.sources);return!1}r();var z6=class{async qfe(t,e){const i=[],s=[];for(const e of t.sources)if(qc(e)){if(!this.Hre)continue;i.push(e)}else s.push(e);if(0===i.length)return t;let n,r;for(;void 0===n&&0!==i.length;){const{Cc:o}=await kI.Vg.JH(i,t),h=o;J(e);try{n=await this.l_e(h,e),s.push(n)}catch(t){th(t),r=t,we(i,h)}}if(0!==t.sources.length&&0===s.length)throw new g("Fatal: unable to play DAI streams.");return r&&vl(r.message),ol({},t,{sources:s})}async l_e(t,e){if(!this.Hre)throw new g("Could not find Google\u2019s IMA DAI HTML5 SDK, all DAI sources will be ignored.");const i=this.Hre.py(rs.LOADED,e),s=this.Hre.py(rs.ERROR,e),n=t.type===Bc.qC?"dash":"hls";this.Hre.YWt(ol({},t.ssai,{format:n}));const r=await Promise.race([i,s]);if(r.type===rs.LOADED){const e=t.type===Bc.qC?Bc.qC:Bc.KC;return Vc(ol({},t,{src:this.Wfe?await this.Wfe(r.Gre.Xu||""):r.Gre.Xu,type:e}))}throw g(r.Gre.doe)}constructor(t){this.Hre=t,this.Wfe=t=>t}};Dh(function(t){return e=>class extends e{ka(){const t=super.ka(),e=t.ads;if(e){const t=this.d_e.wa;Jr(e,{get dai(){return t}})}return t}get Xl(){return this.f_e}Gfe(t){super.RR(t)}RR(t,e){this.d_e.RR(t)}Zfe(){return super.aI()}aI(){return this.d_e.aI()}Ca(t){return this.d_e.nr(),super.Ca(t)}async Xfe(t,e){return super.Rnt(t,e)}async Rnt(t,e){return this.d_e.Rnt(t,e)}Qfe(){return super.NR()}Jfe(){return super.LR()}NR(){return this.d_e.lt}LR(){return this.d_e.MR}$fe(){super.yn()}yn(){this.d_e.yn(),this.S0t&&(ze(this.S0t),this.S0t.removeEventListener("keydown",this.__e),this.S0t.removeEventListener("click",this.__e),this.S0t=void 0),this.v_e&&(ze(this.v_e),this.v_e=void 0)}constructor(e,i){super(e,i),this.f_e=!1,this.__e=t=>{13===t.which&&this.S0t.click(),this.EI()};const s=this.TI(),n=i.ads.googleIma.useAdUiElementForSsai;var r;const o=null!=(r=i.ads.googleIma.allowSeekingForGoogleDai)&&r;let a,u;try{var c;n?(this.v_e=h.createElement("div"),Zo(this.v_e),this.v_e.className="theo-dai-ad-ui"):(this.S0t=h.createElement("button"),this.S0t.className=W6),a=t(s,this.S0t,this.v_e),u=new Z6(a,this);const e=null!=(c=this.S0t)?c:this.v_e;e&&this.we.appendChild(e),this.f_e=!0}catch(t){this.S0t=void 0,this.v_e=void 0}const l=new z6(a);this.d_e=new G6(this,a,u,l,o),this.S0t&&(this.S0t.addEventListener("keydown",this.__e),this.S0t.addEventListener("click",this.__e))}}}((function(t,e,i){if(!(s.google&&s.google.ima&&V(s.google.ima.dai)))throw new g("Could not find Google\u2019s IMA DAI HTML5 SDK, all DAI sources will be ignored.");const n=K4(),r=new google.ima.dai.api.StreamManager(t,i),o=K4();return new Z4(r,e,o&&o!==n?o:void 0)})),rh.Gst),r(),r(),r();var q6=class{get m_e(){return void 0===this.g_e?0:(performance.now()-this.g_e)/1e3}p_e(t){this.w_e=t,this.b_e.y_e(t),this.na.bn(Ti.ho,this.kle),this.na.bn(Ti.Dy,this.Foe),this.na.bn(Ti.hb,this.Ihe),this.na.bn(yo.fa,this.X6),this.na.bn(Zc.WL,this.A_e),this.na.bn([Zc.BL,Zc.OL,Zc.UL],this.S_e),this.na.bn(Ti.Iy,this.T_e),xo.yY(this.iMt)}k_e(){this.na.vn(Ti.ho,this.kle),this.na.vn(Ti.Dy,this.Foe),this.na.vn(Ti.hb,this.Ihe),this.na.vn(yo.fa,this.X6),this.na.vn(Zc.WL,this.A_e),this.na.vn([Zc.BL,Zc.OL,Zc.UL],this.S_e),this.na.vn(Ti.Iy,this.T_e),xo.mY(this.iMt),this.E_e||(this.b_e.x_e(this.R_e),this.b_e.I_e()),this.C_e&&this.P_e(),this.w_e=void 0,this.D_e=!1,this.E_e=!1,this.R_e=-1/0,En(this.N_e)}M_e(){this.D_e&&this.b_e.L_e(),this.g_e=performance.now(),this.B_e=p(this.O_e,6e4)}P_e(){this.b_e.F_e(this.m_e),this.C_e=!1,this.g_e=void 0,this.B_e&&(m(this.B_e),this.B_e=void 0)}V_e(){if(S(this.na.jd()))return;const t=10*function(t,e){return _.floor(t/e)}(this.na.xR()/this.na.jd()*100,10);ms(this.N_e,t)||(this.N_e.push(t),this.b_e.W_e(t))}constructor(t,e){this.na=t,this.b_e=e,this.D_e=!1,this.E_e=!1,this.N_e=[],this.R_e=-1/0,this.C_e=!1,this.kle=()=>{this.D_e||(this.b_e.U_e(),this.C_e&&this.b_e.L_e(),this.D_e=!0)},this.Foe=()=>{this.b_e.G_e(),this.E_e=!0},this.Ihe=()=>{this.R_e<this.na.xR()&&(this.R_e=this.na.xR()),this.V_e()},this.A_e=()=>{this.D_e&&(this.H_e=performance.now(),this.b_e.Z_e(this.na.xR()))},this.S_e=()=>{this.H_e&&(this.b_e.X_e((performance.now()-this.H_e)/1e3),this.H_e=void 0)},this.X6=()=>{this.R_e<this.na.xR()&&(this.R_e=this.na.xR()),this.b_e.Znt(this.na.NR().message)},this.T_e=()=>{const t=this.na.jd()===1/0;t&&!this.C_e&&(this.C_e=t,this.M_e())},this.iMt=()=>{this.b_e.x_e(this.R_e),this.b_e.z_e()},this.O_e=()=>{void 0!==this.g_e&&this.b_e.q_e(this.m_e)}}};r();var Y6=class{y_e(t){this.Y_e(["setDocumentTitle",t.itemTitle]),this.Y_e(["setCustomUrl","https://content.streamone.net/embed/cust=Xo9oT45EptMG/account="+t.accountID+"/item="+t.itemID]),this.Y_e(["trackPageView"])}U_e(){this.K_e("item first play","viewing","1")}I_e(){this.K_e("item skipped","skipped","1")}W_e(t){this.K_e("item progress","percent",""+t)}z_e(){this.K_e("item abandoned","window closed","1")}x_e(t){this.K_e("item time","watched",""+t)}G_e(){this.K_e("item finished","ended","1")}Z_e(t){this.K_e("buffering started","timestamp",""+t)}X_e(t){this.K_e("buffering ended","duration",""+t)}Znt(t){this.K_e("error","message",""+t)}L_e(){this.K_e("livestream first play","viewing","1")}q_e(t){this.K_e("livestream progress","duration",""+t)}F_e(t){this.K_e("livestream time","watched",""+t)}K_e(t,e,i){this.Y_e(["trackEvent","Video",t,e,i])}Y_e(t){const e="undefined"!=typeof _paq?_paq:void 0;e?e.push(t):console.warn("The Piwik library required for the StreamOne pre-integration was not found. Make sure it is loaded before instantiating THEOplayer.")}};r();var K6=class{get j_e(){if(!this.Q_e)return;const t=this.na.xR()/this.Q_e;return _.floor(4*t)+1}get J_e(){return void 0!==this.Q_e}p_e(){this.Oc.bn("vnt",this.$de),this.Oc.bn("mnt",this.tfe),this.Oc.bn("j2t",this.ife),this.Oc.bn("f2t",this.efe),this.na.bn(Ti.hb,this.Ihe),xo.yY(this.iMt)}k_e(){this.Oc.vn("vnt",this.$de),this.Oc.vn("mnt",this.tfe),this.Oc.vn("j2t",this.ife),this.Oc.vn("f2t",this.efe),this.na.vn(Ti.hb,this.Ihe),En(this.$_e),xo.mY(this.iMt),this.Q_e=void 0}constructor(t,e,i){this.na=t,this.Oc=e,this.b_e=i,this.$_e=[],this.$de=()=>{this.Q_e=this.na.jd(),this.b_e.tve(this.Q_e)},this.tfe=()=>{this.Q_e&&(this.b_e.eve(this.Q_e),En(this.$_e),this.Q_e=void 0)},this.ife=t=>{if(!this.Q_e)return;const e=this.Q_e-this.Q_e*t.Y2t;this.b_e.ive(e),this.Q_e=void 0},this.efe=()=>{this.Q_e=this.na.jd(),this.b_e.sve()},this.Ihe=()=>{const t=this.j_e;if(this.J_e&&t&&!ms(this.$_e,t)){switch(t){case 1:this.b_e.nve();break;case 2:this.b_e.rve();break;case 3:this.b_e.ove();break;case 4:this.b_e.hve()}this.$_e.push(t)}},this.iMt=()=>{this.b_e.uve()}}};r();var j6=class{tve(t){this.b_e.K_e("ad start","duration",""+t)}eve(t){this.b_e.K_e("ad finished","duration",""+t)}ive(t){this.b_e.K_e("ad skipped","remaining time",""+t)}sve(){this.b_e.K_e("ad blocker","detected","1")}nve(){this.b_e.K_e("ad progress","firstQuartile","")}rve(){this.b_e.K_e("ad progress","secondQuartile","")}ove(){this.b_e.K_e("ad progress","thirdQuartile","")}hve(){this.b_e.K_e("ad progress","fourthQuartile","")}uve(){this.b_e.K_e("ad abandoned","window closed","1")}constructor(t){this.b_e=t}};function Q6(t){return t&&"streamone"===t.integration}Dh((function(t){return class extends t{yn(){this.vn(Ti.uo,this.co),this.cve&&(this.lve&&this.lve.k_e(),this.dve&&this.dve.k_e(),this.cve=!1),super.yn()}constructor(t,e){super(t,e),this.cve=!1,this.co=()=>{this.cve&&(this.lve.k_e(),this.dve&&this.dve.k_e());const t=this.iu();if(this.cve=!1,!t)return;const e=function(t){if(t.analytics)for(let e of t.analytics)if(Q6(e))return e}(t);e&&(this.cve=!0,this.lve.p_e(e),this.dve&&this.dve.p_e())};const i=new Y6;if(this.lve=new q6(this,i),this.zc){const t=new j6(i);this.dve=new K6(this,this.zc,t)}this.bn(Ti.uo,this.co)}}}),rh.Xst),r(),r(),r(),r(),r(),r();var J6=class extends wV{async A2(t,e,i){const s=await $6(t);await super.A2(s,e,i),this.fve(s,e)}async g2(t,e,i){const s=await $6(t);await super.g2(s,e,i),this.fve(s,e)}fve(t,e){const i=this.vve._ve;if(void 0===i)return;const s=e.W1;let n;if(this.mve!==s&&(this.mve=s,i.setLevelSwitching(s),i.setContainerFormat(2)),function(t){return Sa.call(t,"wit")}(e)){const t=e.wit,r=e.wit+e.ct;n=e.BV,i.newPts(t,r,"video",s)}else 0;i.appendBuffer(t.Kk,"video",s,n)}async eT(t,e,i){var s;await super.eT(t,e,i),null==(s=this.vve._ve)||s.flushBuffer(t,e)}constructor(t,e){super(t),this.vve=e,this.mve=void 0}};async function $6(t){switch(t.Tw){case Ce.iJ:return t;case Ce.Sk:{const e=await He(t.Kk);return{Tw:Ce.iJ,Kk:new j(e)}}case Ce.sJ:throw new g("Opaque initialization segments are not supported on web.")}}var t9=class extends gV{Tot(t){return t.m3===ee.mE?new J6(t,this.vve):new wV(t)}constructor(t,e){super(t),this.vve=e,this.Aot(t)}},e9=class extends Ja{get _ve(){return this.gve}pve(){this.gve=new LCEVCdec.LCEVCdec(this.WB.jG,this.wve,{})}ge(){super.ge(),this.yve()}be(){super.be(),this.wve.style.display="none"}nr(){return this.wve.style.display="none",void 0!==this.gve&&(this.gve.close(),this.pve()),super.nr()}Xw(){return this.bve=!0,void 0!==this.gve&&(this.gve.close(),this.gve=void 0),ze(this.wve),super.Xw()}BH(t){this._o(new yM(new hk(ok.ABORTED,t)))}yve(){this.WB.jG.style.display="none",this.wve.style.display="block"}get oot(){return this.WB}pot(t){return new t9(t,this)}got(t){return new Bn(t)}constructor(t){super(t),this.bve=!1,this.Ave=t=>{this.bve||(t||this.BH("LCEVC SDK failed to initialize."),this.pve())},this.Sve=()=>{this.bve||this.BH("LCEVC SDK failed to initialize.")},this.wve=h.createElement("canvas"),Zo(this.wve),this.wve.style.display="none";const e=t.jG;var i;e.parentElement.insertBefore(this.wve,null!=(i=e.nextSibling)?i:null),LCEVCdec.ready.then(this.Ave,this.Sve)}},i9=class extends _V{OH(t){if(t===ee.mE)return this.Tve=new e9(super.OH(t)),this.Tve}async yH(t){this.Tve=void 0;const e=t;await e.Xw(),await super.yH(e.oot)}get kve(){return this.Tve}},s9=class extends vn{async yn(){for(const t of this.dO.lC)t.vn(No.hC,this.Eve);this.rt.vn(Se.VI,this.xve),this.rt.vn(Se.UI,this.Rve),await super.yn(),await this.WB.Xw(),await this.bH.yH(this.WB)}constructor(t,e,i,s,n,r,o,h){const a=new i9(r),u=new ut(a);super(t,e,i,s,n,u.OH(o),h),this.xve=t=>{t.Ht.bn(No.hC,this.Eve)},this.Rve=t=>{t.Ht.vn(No.hC,this.Eve)},this.Eve=t=>{var e;const i=null==(e=this.Ive.kve)?void 0:e._ve,s=t.pat.IC;null==i||i.setCurrentLevel(s)},this.bH=u,this.Ive=a,this.dO.bn(Se.VI,this.xve),this.dO.bn(Se.UI,this.Rve)}};O(new class extends QF{uP(t,e,i,s,n,r,o){const h=new tV(To.Vg.Brt,To.Vg.Lrt,To.Vg.Mrt,To.Vg.Frt);let a=e;return qX.yT()&&(a=new qX(a)),new s9(i,s,n,r,h,a,ee.mE,t)}async FH(t){if(!t.lcevc)return!1;if(!await super.FH(t))return!1;if(void 0===s.LCEVCdec)throw new A(Qa.CONFIGURATION_ERROR,"LCEVC SDK is not loaded.");return!0}WH(){return!1}constructor(...t){super(...t),this.UH=zt.dG}}),r();var n9=class extends SJ{async yn(){for(const t of this.dO.lC)t.vn(No.hC,this.Eve);this.rt.vn(Se.VI,this.xve),this.rt.vn(Se.UI,this.Rve),await super.yn(),await this.bH.yH(this.WB)}constructor(t,e,i,s,n,r,o,h){const a=new i9(t),u=new ut(a);super(u.OH(ee.mE),e,i,s,n,r,o,h),this.xve=t=>{t.Ht.bn(No.hC,this.Eve)},this.Rve=t=>{t.Ht.vn(No.hC,this.Eve)},this.Eve=t=>{var e;const i=null==(e=this.Ive.kve)?void 0:e._ve,s=t.pat.gLt.IC;null==i||i.setCurrentLevel(s)},this.bH=u,this.Ive=a,this.dO.bn(Se.VI,this.xve),this.dO.bn(Se.UI,this.Rve)}};O(new class extends kJ{uP(t,e,i,s,n,r,o){return new n9(e,i,n,r,tJ(s.libraryLocation),new AJ(s.libraryLocation),new tV(To.Vg.Brt,To.Vg.Lrt,To.Vg.Mrt,To.Vg.Frt),s)}async FH(t,e){if(!t.lcevc)return!1;if(!await super.FH(t,e))return!1;if(void 0===s.LCEVCdec)throw new A(Qa.CONFIGURATION_ERROR,"LCEVC SDK is not loaded.");return!0}WH(){return!1}constructor(...t){super(...t),this.UH=zt.mG}}),r(),r(),r(),r();var r9=function(t){return t.Cve="nr",t.Pve="Dve",t}({}),o9="freewheel-nonlinear-ad",h9=[Ti.Iy,Ti.hb,Ti.ub,Ti.zy,Zc.UL,Ti.ho],a9=class t extends D1{kI(){this.bH.vZ()}Nve(){this.Mve.bn("_nt",this.Lve),this.Mve.bn(["vnt","mnt"],this.Bve),this.Mve.bn("fnt",this.Kie)}Ove(){this.Mve.vn("_nt",this.Lve),this.Mve.vn(["vnt","mnt"],this.Bve),this.Mve.vn("fnt",this.Kie)}Fve(){this.h2t.ru(this.Mve.Vve)}Wve(){this.Mve.Uve.bn(h9,this.Ds)}Gve(){this.Mve.Uve.vn(h9,this.Ds)}get r2t(){return this}static get s2t(){return vt._$t}get s2t(){return t.s2t}get snt(){var t;return null!=(t=this.Mve.Vve.snt)?t:null}get ent(){const t=this.Mve.Vve.n8t;return t?[t]:[]}hnt(t){}xR(){return this.Mve.Uve.ER}RR(t,e){}jd(){return this.Mve.Uve.ct}DR(){return this.Mve.Uve.PR}NR(){return this.YG}LR(){return this.KG}fI(){return 0}mI(){return 0}pI(){return this.Mve.Uve.gI}wI(t){this.Mve.Uve.gI=t}XR(){return this.Mve.Uve.ZR}zR(t){this.Mve.Uve.ZR=t}oI(){return this.Mve.Uve.rI}get nnt(){return this.Mve.Vve.nnt}get rnt(){return this.Mve.Vve.rnt}aI(){return this.Mve.Uve.hI}jR(){return this.Mve.Uve.KR}c2t(t){if(this.g2t||this.Mve.c2t(t),this.Mve.Hve){if(t.type===Ti.zy&&this.na.PR)return!0;if(t.type===Ti.Dy)return this.Mve.Xve.Zve(),!0}return!1}be(){this.Mve.be()}EI(){this.KR||this.Mve.Uve.EI()}async zve(){if(!this.Mve.qve)try{await this.Mve.s5t()}catch(t){this.Yve(t,Oo.GENERAL)}}async Kve(){if(this.Mve.Uve.jve)return this.Mve.Uve.xI(),!1;if(this.Mve.Qve)try{await this.Mve.Xve.Jve()}catch(t){this.Yve(t,Oo.PLAYBACK)}return!0}get $ve(){return Bo(this.NR())}Yve(t,e){t.name!==r9.Cve&&this.h2t._o(new Fh(e,"Ads could not be loaded."))}async xI(){if(this.KR&&this._o(new $(this.ER)),await this.zve(),this.$ve)return;const t=await this.Kve();!this.$ve&&t&&this.Kie()}y8t(t,e,i){e===Ca.tnt&&this.Mve.y8t(t)}ge(){this.Mve.ge()}MD(){this.Mve.Uve.MD()}TI(){return this.Het}pR(){return this.bH.yZ.map((t=>t.jG))}b2t(t){}async yn(){await this.RI(),this.Mve.yn(),await this.bH.yH(this.WB),this.Ove(),this.Gve(),this.h2t.bK(this.Mve.Vve)}async RI(){this.Mve.nr(),this.g2t&&(this.na.ge(),this.x1t(),this.be())}constructor(t,e,i,s,n){super(t,e),this.YG=void 0,this.KG=void 0,this.Bve=t=>{const e=t.lnt,i="vnt"===t.type;if(e.F2t===Es.M2t){const t=this.na.we.classList;i?t.add(o9):t.remove(o9)}i?this.ge():this.be()},this.Lve=()=>{this.C3t(),this.na.EI(),this.na.be()},this.Kie=()=>{this.Mve.qve&&(this.na.PR||this.na.xI(),this.be(),this.na.ge(),this.x1t())},this.Mve=s,this.bH=i,this.WB=n,this.Het=n.jG,this.Het.controls=!1,this.Nve(),this.Fve(),this.Wve()}};r(),r(),r();var u9=class extends ys{get tme(){return this.eme}get ime(){return this.zc[this.nme]}set rme(t){this.nme=t}get rme(){return this.nme}get F2t(){return this.V2t}get aQt(){return vt._$t}constructor(t,e,i,s){super(i),this.eme=s,this.nme=0,this.V2t=l9(s),this.S2t=t,this.T2t=e}};r();var c9=class extends Zi{get ome(){return this.hme}set ome(t){this.hme!==t&&(this.hme=t)}get Ti(){return this.sd.tme.getHeight()}get ji(){return this.sd.tme.getWidth()}get QYt(){return this.ome.getEventCallbackUrls(tv.freewheel.SDK.EVENT_AD_CLICK,tv.freewheel.SDK.EVENT_TYPE_CLICK)[0]}get aQt(){return vt._$t}ka(){return Lo(this)}constructor(t,e,i){super(t,e),this.hme=i}};function l9(t){return t.getTimePositionClass()===tv.freewheel.SDK.TIME_POSITION_CLASS_OVERLAY?Es.M2t:Es.Mjt}var d9=class t extends sn{async ame(t,e){this.ume=t,this.cme=e,this.lme(t),await e,this.dme()}get fme(){return this._me}get vme(){return this.mme}get gme(){return this.pme}get snt(){return this.p$t}get n8t(){return this.a$t}get nnt(){const t=[];if(this.p$t){const e=this.p$t.rme;e>=0&&t.push(...this.p$t.zc.slice(e+1))}for(const e of this.wme)t.push(...e.zc);return t}get rnt(){return this.wme}dme(){this.yme()}lme(t){t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_STARTED,this.bme),t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,this.Ame),t.addEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION,this.Sme),t.addEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION_END,this.Tme),t.addEventListener(tv.freewheel.SDK.EVENT_AD,this.kme)}Eme(){this.ume&&(this.ume.removeEventListener(tv.freewheel.SDK.EVENT_SLOT_STARTED,this.bme),this.ume.removeEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,this.Ame),this.ume.removeEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION,this.Sme),this.ume.removeEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION_END,this.Tme),this.ume.removeEventListener(tv.freewheel.SDK.EVENT_AD,this.kme))}yme(){this._me=this.xme(this.Rme),this.mme=this.xme(this.Ime).concat(this.xme(this.Cme)),this.pme=this.xme(this.Pme),this.wme=this._me.concat(this.mme).concat(this.pme)}xme(t){if(!this.ume)return[];const e=this.ume.getSlotsByTimePositionClass(t);return this.Dme(e)}Nme(t){if(!this.p$t)return void 0;const e=t.getSlot().getAdInstances().indexOf(t);-1!==e&&(this.p$t.rme=e);const i=this.p$t.ime;return i&&(i.ome=t),i}Mme(t){return Fo(this.wme,(e=>e.tme===t))}Dme(e){return e.map((e=>{const i=e.getTotalDuration(),s=t.Lme(e);return new u9(i,i,s,e)}))}static Bme(t,e){const i=t.getAdInstances(),s=[];for(const t of i){const i=l9(t.getSlot()),n=new c9(e,i,t),r=[];n.L2t(t.getAdId(),t.getSlot().getWidth(),t.getSlot().getHeight(),t.getDuration(),r,0),e.R2t(n),s.push(n)}return s}x0t(){const t=this.n8t;t&&this._o(new zo(t,this.Ome()))}Fme(){const t=this.n8t;t&&(this._o(new xn(t,t.ome.getPlayheadTime())),this.a$t=void 0)}Vme(t){const e=this.snt;e&&(e.XJt=function(t,e,i){void 0===i&&(i=0);let s=0;const n=t.zc.length;for(let r=e;r<n;r++){const n=t.zc[r],o=n.ct;if(n){let t=o;r===e&&(t=Ns(o-i,0,o)),s+=t}}return s}(e,e.rme,t))}static Lme(t){return t.getTimePositionClass()===tv.freewheel.SDK.TIME_POSITION_CLASS_POSTROLL?-1:t.getTimePosition()}Ome(){const t=this.n8t;if(!t)return 0;const e=t.ome;return e.getPlayheadTime()/e.getDuration()}Wme(t){we(this.wme,t),we(this._me,t),we(this.mme,t),we(this.pme,t)}nr(){this.Eme(),this._me.length=0,this.mme.length=0,this.pme.length=0,this.wme.length=0,this.a$t=void 0,this.p$t=void 0,this.ume=void 0,this.cme=void 0}yn(){this.nr(),this.Ro()}constructor(e,i){super(),this.Vs=e,this.$T=i,this.Rme=tv.freewheel.SDK.TIME_POSITION_CLASS_PREROLL,this.Ime=tv.freewheel.SDK.TIME_POSITION_CLASS_MIDROLL,this.Pme=tv.freewheel.SDK.TIME_POSITION_CLASS_POSTROLL,this.Cme=tv.freewheel.SDK.TIME_POSITION_CLASS_OVERLAY,this._me=[],this.mme=[],this.pme=[],this.wme=[],this.bme=e=>{const i=e.slot,s=this.Mme(i);s&&(t.Bme(i,s),this.p$t=s,s.E2t(),this.Wme(s),s.F2t===Es.Mjt&&this._o(new Ua(s)))},this.Ame=()=>{const t=this.snt;t&&t.F2t===Es.Mjt&&(this._o(new Hh(t)),this.$T.src=""),this.p$t=void 0},this.Sme=t=>{const e=this.Nme(t.adInstance);e&&(this._o(new cn(e,e.ome.getPlayheadTime())),this.a$t=e),t.adInstance.getEventCallbackUrls(tv.freewheel.SDK.EVENT_AD_CLICK,tv.freewheel.SDK.EVENT_TYPE_CLICK).length>0&&(this.Vs.style.cursor="pointer",this.Vs.addEventListener("click",this.Ume))},this.Tme=()=>{this.Vs.style.cursor="",this.Vs.removeEventListener("click",this.Ume)},this.Ume=()=>{this.n8t&&this.n8t.ome.getRendererController().processEvent({name:tv.freewheel.SDK.EVENT_AD_CLICK})},this.kme=t=>{switch(t.subType){case tv.freewheel.SDK.EVENT_AD_COMPLETE:this.Fme();break;case tv.freewheel.SDK.EVENT_AD_SKIPPED:this.x0t(),this.Fme()}}}};r();var f9=class t extends sn{Gme(){if(this.Zgt){this.Zgt.setAdVolume(_9(this.ZR,this.gI))}}Hme(t){this.Zgt=t,this.lme(t)}lme(t){t.addEventListener(tv.freewheel.SDK.EVENT_AD,this.Zme),t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_STARTED,this.Xme),t.addEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION,this.zme),t.addEventListener(tv.freewheel.SDK.EVENT_AD_COMPLETE,this.qme),t.addEventListener(tv.freewheel.SDK.EVENT_CONTENT_VIDEO_PAUSE_REQUEST,this.Yme),t.addEventListener(tv.freewheel.SDK.EVENT_CONTENT_VIDEO_RESUME_REQUEST,this.Kme)}jme(){const t=this.Zgt;t&&(t.removeEventListener(tv.freewheel.SDK.EVENT_AD,this.Zme),t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_STARTED,this.Xme),t.removeEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION,this.zme),t.removeEventListener(tv.freewheel.SDK.EVENT_AD_COMPLETE,this.qme),t.removeEventListener(tv.freewheel.SDK.EVENT_CONTENT_VIDEO_PAUSE_REQUEST,this.Yme),t.removeEventListener(tv.freewheel.SDK.EVENT_CONTENT_VIDEO_RESUME_REQUEST,this.Kme))}xI(){this.Hyt.snt&&(this.Hyt.snt.tme.resume(),this.KR=!1)}EI(){this.Hyt.snt&&(this.Hyt.snt.tme.pause(),this.KR=!0)}get ER(){const t=this.Hyt.n8t;return t&&(this.ER=t.ome.getPlayheadTime()),this.uZ}set ER(t){this.uZ=t}get ct(){return this.MA}get jve(){return!!this.Hyt&&void 0!==this.Hyt.snt}get KR(){return this.dZ}set KR(t){this.dZ=t}get gI(){return this.zA}set gI(t){this.Zgt&&this.Zgt.setAdVolume(t),this.zA=t}get ZR(){return this.Zgt&&(this.Qme=0===this.Zgt.getAdVolume()),this.Qme}set ZR(t){this.Zgt&&this.Zgt.setAdVolume(_9(t,this.gI)),this.Qme=t}get hI(){return this.v4}get PR(){return this.B4}set PR(t){this.B4=t}get rI(){return this.O4}static Jme(t){switch(t){case"pause":return tv.freewheel.SDK.VIDEO_STATE_PAUSED;case"playing":return tv.freewheel.SDK.VIDEO_STATE_PLAYING;case"ended":return tv.freewheel.SDK.VIDEO_STATE_COMPLETED;case"stop":return tv.freewheel.SDK.VIDEO_STATE_STOPPED}}$me(e){const i=t.Jme(e);this.Zgt&&i&&this.Zgt.setVideoState(i)}MD(){const t=this.Hyt.n8t;t&&t.ome.skip()}nr(){if(this.jme(),this.Zgt){this.$me("stop"),this.Zgt.setVideoState(tv.freewheel.SDK.VIDEO_STATE_STOPPED);const t=this.Zgt.getTemporalSlots();for(const e of t)e.stop();this.Zgt.dispose(),this.Zgt=void 0}this.MA=NaN,this.PR=!1,this.O4=Ht.eO,this.ER=0,this.tge=0,this.KR=!0,void 0!==this.ege&&(m(this.ege),this.ege=void 0)}yn(){this.nr(),this.Ro(),this.Hyt.vn("_nt",this.Td),this.Ku.vn(nu.mn,this.Xme),this.b0t.removeEventListener("click",this.ige)}constructor(t,e,i,s){super(),this.na=t,this.Ku=e,this.Hyt=i,this.b0t=s,this.v4=se.pB().ks(),this.dZ=!0,this.MA=NaN,this.Qme=!1,this.B4=!1,this.O4=Ht.eO,this.uZ=0,this.tge=0,this.Zme=t=>{switch(t.subType){case tv.freewheel.SDK.EVENT_AD_PAUSE:(function(t){if(!t)return!0;const e=t.ome,i=e.getPlayheadTime(),s=e.getDuration();return i>=s||gh(s,i)})(this.Hyt.n8t)||(this.KR=!0,this._o(new ul(this.ER)));break;case tv.freewheel.SDK.EVENT_AD_RESUME:this.KR=!1,this._o(new ko(this.ER));break;case tv.freewheel.SDK.EVENT_AD_VOLUME_CHANGE:if(this.Zgt){const t=this.Zgt.getAdVolume();0===t?this.Qme=!0:this.zA=t,this._o(new ns(this.ER,this.gI))}}},this.zme=()=>{this.PR=!1;const t=this.KR;if(this.KR=!1,t&&(this._o(new $(this.ER)),this._o(new ko(this.ER))),this.O4=Ht.sO,this.ER=0,!this.Hyt.n8t)return;const e=this.Hyt.n8t.ome;this.MA=e.getDuration(),this._o(new $s(this.MA)),this.ege=p((()=>{if(!this.jve)return void this.Hp();this.Hyt.Vme(this.ER);const t=e.getPlayheadTime();_s(t,this.tge,.001)||this._o(new Al(t,void 0)),this.tge=t}),250),this.Zgt&&this.Zgt.setAdVolume(_9(this.ZR,this.gI))},this.ige=()=>{const t=this.Hyt.n8t;t&&(t.F2t===Es.M2t?this.na.EI():this.KR||this.EI())},this.Hp=()=>{m(this.ege),this.ege=void 0},this.qme=()=>{this.Hp(),this.PR=!0},this.Yme=()=>{this.$me("pause")},this.Kme=()=>{this.$me("playing")},this.Td=t=>{t.sd.F2t===Es.Mjt&&(this.KR=!1)},this.Xme=()=>{this.Zgt&&this.Zgt.resize(this.Ku.Au,this.Ku.Eu)},this.zA=t.gI,i.bn("_nt",this.Td),this.Ku.bn(nu.mn,this.Xme),this.b0t.addEventListener("click",this.ige)}};function _9(t,e){return t?0:e}r(),r();var v9=class extends ri{get name(){return r9.Pve}constructor(){super("A FreeWheel Ad Error occurred")}};r();var m9=class extends ri{get name(){return r9.Cve}constructor(){super("A FreeWheel Reset Error Occurred")}},g9=0;var p9=class{sge(t,e,i){t.setNetwork(e.networkId),t.setServer(e.adServerUrl);const s=this.Zgt;if(s.setProfile(e.profile),e.assetId&&e.assetDuration&&s.setVideoAsset(e.assetId,e.assetDuration),e.siteSectionId&&s.setSiteSection(e.siteSectionId),s.registerVideoDisplayBase(i),e.cuePoints&&e.cuePoints.length)for(const t of e.cuePoints)s.addTemporalSlot("cue-"+ ++g9,t.adUnit,t.timeOffset);const n=e.customData;if(V(n)){const t=w.keys(n);for(const e of t){const t=n[e];s.addKeyValue(e,t)}}}async nge(){this.Zgt.submitRequest(),await this.rge.Ub}nr(){this.Zgt.removeEventListener(tv.freewheel.SDK.EVENT_REQUEST_COMPLETE,this.oge),this.rge.Wb(new m9)}constructor(t,e,i,s){this.Zgt=e,this.oge=t=>{this.Zgt.removeEventListener(tv.freewheel.SDK.EVENT_REQUEST_COMPLETE,this.oge),t.success?this.rge.Vb(void 0):this.rge.Wb(new v9)},this.sge(t,i,s),e.addEventListener(tv.freewheel.SDK.EVENT_REQUEST_COMPLETE,this.oge),this.rge=new os}};r(),r();var w9=class{hge(){this.ume.removeEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,this.Ame),this.ume.removeEventListener(tv.freewheel.SDK.EVENT_ERROR,this.Ame)}get age(){return this.Kw.Ub}vUt(){this.hge(),this.Kw.Wb(new m9)}constructor(t){this.ume=t,this.Ame=t=>{this.hge(),this.Kw.Vb(void 0)},this.$6t=t=>{this.hge(),this.Kw.Wb(new v9)},this.Kw=new os,t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,this.Ame),t.addEventListener(tv.freewheel.SDK.EVENT_ERROR,this.$6t)}},y9=class{bO(t){this.ume=t}Jve(){return this.uge(this.cge.fme)}Zve(){this.uge(this.cge.gme)}async uge(t){if(this.ume)for(;t.length>0;){this.lge=new w9(this.ume);const e=this.lge.age,i=this.cge.snt;i&&i.F2t===Es.M2t&&i.tme.stop();t.shift().tme.play();try{await e}finally{this.lge=void 0}}}nr(){this.lge&&(this.lge.vUt(),this.lge=void 0),this.dge=0}yn(){this.na.vn(Ti.hb,this.fge)}constructor(t,e){this.na=t,this.cge=e,this.dge=0,this.fge=()=>{const t=this.na.xR();for(const e of this.cge.vme){const i=new se([this.dge,t],[!0,!0]),s=e.tme.getTimePosition();if(i.wr(s))switch(e.tme.getTimePositionClass()){case tv.freewheel.SDK.TIME_POSITION_CLASS_MIDROLL:this.uge([e]);break;case tv.freewheel.SDK.TIME_POSITION_CLASS_OVERLAY:e.tme.play(),e.tme.setVisible(!0)}}this.dge=t},t.bn(Ti.hb,this.fge)}},b9=0,A9=class t extends Ju{static createUniqueDisplayBaseId(){return"theo-freewheel-"+ ++b9}get Hve(){return 0!==this.Vve.gme.length}get Qve(){return 0!==this.Vve.fme.length}async s5t(){if(!this.uQt)throw new g("Invalid state");const t=this._ge,e=t.newContext();e.setParameter(tv.freewheel.SDK.PARAMETER_RENDERER_VIDEO_DISPLAY_CONTROLS_WHEN_PAUSE,!1,tv.freewheel.SDK.PARAMETER_LEVEL_GLOBAL),e.setParameter(tv.freewheel.SDK.PARAMETER_EXTENSION_CONTENT_VIDEO_ENABLED,!1,tv.freewheel.SDK.PARAMETER_LEVEL_GLOBAL);const i=new p9(t,e,this.uQt,this.vge),s=this.Vve.ame(e,i.nge());this.mge.bO(e),this.Uve.Hme(e),this.gge=i;try{await s}finally{this.Uve.Gme(),this.pge=!0}}get Uve(){return this.q6t}get Vve(){return this.wge}get qve(){return this.pge}static yge(t,e,i){const s=h.createElement("div");return s.id=i,s.className="theo-freewheel",e.classList.add("theo-freewheel-video"),s.appendChild(e),t.appendChild(s),s}get Xve(){return this.mge}c2t(t){this.Uve.$me(t.type)}ge(){this.b0t.style.display="block",this.$T.style.display="block"}be(){this.b0t.style.display="none",this.$T.style.display="none"}y8t(t){this.uQt=t}nr(){this.pge=!1,this.uQt=void 0,this.Vve.nr(),this.mge.nr(),this.gge&&(this.gge.nr(),this.gge=void 0),this.Uve.nr(),this.$T.src=""}yn(){this.nr(),this.q6t.yn(),this.mge.yn(),this.Vve.yn(),this.b0t.remove(),ze(this.b0t)}constructor(e,i,n){super(),this.na=e,this.$T=i,this.pge=!1,this.vge=t.createUniqueDisplayBaseId(),this.b0t=t.yge(e.we,i,this.vge),this._ge=new s.tv.freewheel.SDK.AdManager,this.wge=new d9(this.b0t,this.$T),this.mge=new y9(this.na,this.Vve),this.ru(this.Vve),this.q6t=new f9(e,n,this.Vve,this.b0t)}};function S9(t){if(s.tv)switch(t){case"preroll":return tv.freewheel.SDK.ADUNIT_PREROLL;case"midroll":return tv.freewheel.SDK.ADUNIT_MIDROLL;case"postroll":return tv.freewheel.SDK.ADUNIT_POSTROLL;case"overlay":return tv.freewheel.SDK.ADUNIT_OVERLAY}}function T9(t,e,i){if(void 0!==e&&S(e)||e<0||e===1/0)return NaN;switch(t){case"preroll":return 0;case"postroll":return i}return Ic(e)}yh.Vg.PZ(new class{get $1t(){return vt._$t}CZ(t){return t.integration===lu.FREEWHEEL}t2t(t,e,i){if(!Boolean(s.tv&&s.tv.freewheel&&s.tv.freewheel.SDK&&s.tv.freewheel.SDK.AdManager))return;const n=new Ao(t.Hu,t.Wl,1,[ee.mE]);n.AZ(t.we);const r=n.OH(ee.mE),o=new A9(t,r.jG,t.Hu);return new a9(t,e,n,o,r)}qz(t){const e=tu(t);$c(e.cuePoints)||(e.cuePoints=[]);const i=[],s=t.assetDuration||0;for(const t of e.cuePoints){const e=T9(t.adUnit,t.timeOffset,s),n=S9(t.adUnit);!S(e)&&Yt(n)?(t.adUnit=n,t.timeOffset=e,i.push(t)):Ms.Vp("Invalid adUnit/timeOffset combination. Cue was removed.")}return e.cuePoints=i,e}g6(t,e,i,s){i.y8t(t,e,s)}}),r(),r(),r(),r(),r();var k9=self.theoplayerDeviceMetadata;function ta(t){return t.navigator&&t.navigator.userAgent||""}r(),r(),r(),r();var E9={"Windows 10":/(Windows 10.0|Windows NT 10.0)/i,"Windows 8.1":/(Windows 8.1|Windows NT 6.3)/i,"Windows 8":/(Windows 8|Windows NT 6.2)/i,"Windows 7":/(Windows 7|Windows NT 6.1)/i,"Windows Vista":/Windows NT 6.0/i,"Windows Server 2003":/Windows NT 5.2/i,"Windows XP":/(Windows NT 5.1|Windows XP)/i,"Windows Phone":/Windows Phone/i,Android:/Android/i,Linux:/(Linux(?!.*Ubuntu)|X11)/,Ubuntu:/Ubuntu/i,iOS:/(iPhone|iPad|iPod)/i,"Mac OS X":/Mac OS X/i,"Mac OS":/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/i,"Chrome OS":/CrOS/i};function tn(t,e){const i=E9[e];return!!i&&Boolean(ta(t).match(i))}function x9(t){return tn(t,"Android")}function R9(t){return tn(t,"Windows Phone")}function I9(t){return tn(t,"iOS")&&!R9(t)}function C9(t){return tn(t,"Ubuntu")}var Ac=/Windows (NT|Phone) ([0-9.]+)/i,P9=/Mac.*?(OS |OS X )(\d+(([_.])\d+)?(([_.])\d+)?)/i,D9={"Windows 10":Ac,"Windows 8.1":Ac,"Windows 8":Ac,"Windows 7":Ac,"Windows Vista":Ac,"Windows Server 2003":Ac,"Windows XP":Ac,"Windows Phone":/Windows Phone ([0-9.]+)/i,Android:/Android (\d+(([_.])\d+)?(([_.])\d+)?)/i,Linux:void 0,Ubuntu:void 0,iOS:/(iPad|iPhone|iPod).*?(OS |os |OS_)(\d+(([_.])\d+)?(([_.])\d+)?)/i,"Mac OS X":P9,"Mac OS":P9,"Chrome OS":void 0};function N9(t,e){const i=D9[e];return i?ta(t).match(i):null}function M9(t){return t.split(/[_.]/).map((t=>x(t,10)))}function L9(t){if(function(t){return Boolean(ta(t).match(/Windows/i))}(t)){if(function(t){return tn(t,"Windows 10")}(t))return"Windows 10";if(R9(t))return"Windows Phone";if(function(t){return tn(t,"Windows 8.1")}(t))return"Windows 8.1";if(function(t){return tn(t,"Windows 8")}(t))return"Windows 8";if(function(t){return tn(t,"Windows 7")}(t))return"Windows 7";if(function(t){return tn(t,"Windows Vista")}(t))return"Windows Vista";if(function(t){return tn(t,"Windows Server 2003")}(t))return"Windows Server 2003";if(function(t){return tn(t,"Windows XP")}(t))return"Windows XP"}else{if(x9(t))return"Android";if(I9(t))return"iOS";if(function(t){return tn(t,"Mac OS X")}(t))return"Mac OS X";if(function(t){return tn(t,"Mac OS")}(t))return"Mac OS";if(C9(t))return"Ubuntu";if(function(t){return tn(t,"Chrome OS")}(t))return"Chrome OS";if(function(t){return tn(t,"Linux")&&!C9(t)}(t))return"Linux"}}function B9(t,e){const i=function(t){const e=N9(t,"Windows 10");return e&&e.length>2?M9(e[2]):void 0}(t),s=function(t){const e=N9(t,"Mac OS X");return e&&e.length>2?M9(e[2]):void 0}(t),n=function(t){const e=N9(t,"Android");return e&&e.length>1?M9(e[1]):void 0}(t),r=function(t){const e=N9(t,"iOS");return e&&e.length>3?M9(e[3]):void 0}(t),o=function(t){const e=N9(t,"Chrome OS");return e&&e.length>0?M9(e[0]):void 0}(t);return i?i.length>e?i[e]:void 0:s?s.length>e?s[e]:void 0:n?n.length>e?n[e]:void 0:r?r.length>e?r[e]:void 0:o&&o.length>e?o[e]:void 0}function O9(t){const e=function(t){return B9(t,0)}(t),i=function(t){return B9(t,1)}(t),s=function(t){return B9(t,2)}(t);if(void 0!==e)return void 0===i?""+e:void 0===s?e+"."+i:e+"."+i+"."+s}var F9={Chrome:/Chrome/i,"Chrome Mobile":void 0,"Chrome iOS":/CriOS/i,Chromium:/Chromium/i,HeadlessChrome:/HeadlessChrome/i,Firefox:/Firefox/i,Seamonkey:/Seamonkey/i,"Firefox iOS":/FxiOS/i,Safari:/Safari/i,Edge:/Edge\/\d+/i,"Edge Chromium":/Edg\/\d+/i,IE:/Trident/i,Opera:/Opera|OPR/i,Vivaldi:/Vivaldi/i,"Android Browser":void 0};function V9(t,e){const i=F9[e];return!!i&&Boolean(ta(t).match(i))}function W9(t){return Boolean(ta(t).match(/Mobi/i))}function U9(t){return Boolean(t.chrome&&t.navigator&&t.navigator.vendor&&/google/i.test(t.navigator.vendor))||G9(t)}function G9(t){return V9(t,"Chrome iOS")}function H9(t){return V9(t,"Firefox")&&!X9(t)}function Z9(t){return V9(t,"Firefox Mobile")&&!X9(t)&&W9(t)}function X9(t){return V9(t,"Seamonkey")}function z9(t){return V9(t,"Firefox iOS")&&!X9(t)}function q9(t){return V9(t,"Safari")&&!V9(t,"Chrome")&&!Z.Hv}function Y9(t){return Boolean(i8(t))}function K9(t){return V9(t,"Edge")}function j9(t){return V9(t,"Edge Chromium")}function Q9(t){return V9(t,"IE")}function J9(t){return V9(t,"Vivaldi")}var $9=/chrome\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/i,t8={Chrome:$9,"Chrome Mobile":$9,"Chrome iOS":/CriOS\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/i,Chromium:$9,HeadlessChrome:$9,Firefox:/Firefox\/([0-9.]+)/i,"Firefox iOS":/FxiOS\/([0-9.]+)/i,Safari:/(Version)\/((\d+)\.(\d+)(?:\.(\d+))?).*Safari/,"Safari Mobile":void 0,Edge:/Edge\/(\d+)/i,"Edge Chromium":/Edg\/(\d+)/i,"Edge Mobile":void 0,IE:/(MSIE |Trident.*?rv:)(\d+)/i,Opera:/(OPR\/(\d+\.\d+))|(Opera(?=.*Version\/((\d+)\.(\d+))))/i,"Opera Mobile":void 0,Vivaldi:/Vivaldi\/((\d+)\.(\d+)\.(\d+)(?:\.(\d+))?)/i,"Android Browser":void 0};function e8(t,e){const i=t8[e];return i?ta(t).match(i):null}function i8(t){return e8(t,"Opera")}function s8(t){const e=function(t){return e8(t,"Firefox")}(t);return e?C(e[1]):0}function n8(t){const e=function(t){return e8(t,"Firefox iOS")}(t);return e?C(e[1].split(".")[0]):0}function r8(t){const e=function(t){return e8(t,"Safari")}(t);return e?C(e[2].split(".")[0]):0}function o8(t){const e=function(t){return e8(t,"Edge")}(t);return e?C(e[1]):0}function h8(t){const e=function(t){return e8(t,"Edge Chromium")}(t);return e?C(e[1]):0}function a8(t){const e=function(t){return e8(t,"IE")}(t);return e?C(e[2]):0}function u8(t){const e=function(t){return e8(t,"Vivaldi")}(t);return e?C(e[1]):0}function c8(t){if(x9(t))return U9(t)?"Chrome Mobile":H9(t)||Z9(t)?"Firefox Mobile":K9(t)?"Edge Mobile":Y9(t)?"Opera Mobile":"Android Browser";if(I9(t)){if(U9(t)||G9(t))return"Chrome iOS";if(H9(t)||z9(t))return"Firefox iOS";if(K9(t))return"Edge Mobile";if(q9(t)||function(t){return q9(t)&&W9(t)}(t))return"Safari Mobile";if(Y9(t))return"Opera Mobile"}return function(t){return V9(t,"Chromium")}(t)?"Chromium":function(t){return V9(t,"HeadlessChrome")}(t)?"HeadlessChrome":U9(t)?"Chrome":H9(t)?"Firefox":q9(t)?"Safari":K9(t)?"Edge":j9(t)?"Edge Chromium":Q9(t)?"IE":Y9(t)?"Opera":J9(t)?"Vivaldi":void 0}function l8(t){return J9(t)?u8(t):G9(t)?Number(function(t){const e=t8["Chrome iOS"];return e&&e.exec(ta(t))||[]}(t)[1]):U9(t)?Number(function(t){const e=t8.Chrome;return e&&e.exec(ta(t))||[]}(t)[1]):H9(t)||Z9(t)?s8(t):z9(t)?n8(t):q9(t)?r8(t):K9(t)?o8(t):j9(t)?h8(t):Q9(t)?a8(t):Y9(t)?function(t){const e=i8(t);return e&&e[0].indexOf("Opera")>-1?C(e[5]):e?C(e[2].split(".")[0]):0}(t):void 0}var d8=function(t){return t.bge="pc",t.Age="console",t.Sge="settop",t.Tge="mobile",t.kge="tablet",t.Ege="smarttv",t.xge="searchbot",t}({});function f8(t){const e=ta(t);return e.match(/CrKey|Roku|AFTS|AppleTV|Nexus Player/i)?"settop":e.match(/Xbox|Playstation|Wii|Nintendo/i)?"console":/(iPad|Tablet|(Android(?!.*Mobi))|(Windows(?!.*Phone)(.*Touch))|Kindle|Playbook|Silk|(Puffin(?!.*(IP|AP|WP))))/i.test(e)?"tablet":/Mobi/.test(e)?"mobile":e.match(/GoogleTV|SmartTV|SMART-TV|Internet TV|NetCast|NETTV|boxee|Kylo|DLNADOC|hbbtv|CE-HTML/i)?"smarttv":e.match(/(nuhk|Googlebot|bingbot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/i)?"searchbot":function(t){return Boolean(c8(t))}(t)?"pc":void 0}var _8=class{zz(t){this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_ID,t.deviceID||function(){let t=cb.Lb("deviceId");if(t)return t;let e=aC();return cb.Bb("deviceId",e),e}()),this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.PLAYER,"THEOplayer"),this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.PLAYER_VERSION,"9.3.1"),this.Rge(t),this.Ige(),this.Cge(t),this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.EMPCLIENT_INTEGRATION_VERSION,"3.0"),this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.EMPCLIENT_INTEGRATION_BUILDDATE,"2023-04-17 12:00:00"),t.application&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.APPLICATION,t.application),t.applicationVersion&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.APPLICATION_VERSION,t.applicationVersion),t.userAccountID&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.USER_ACCOUNT_ID,t.userAccountID);const e=t.connectionType;e?this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DATA_CONNECTION_TYPE,e):(this.Pge(),Ll.connection&&Ll.connection.addEventListener&&Ll.connection.addEventListener("change",this.Pge))}Rge(t){this.Dge(t);const e=t.deviceManufacturer||k9&&k9.manufacturer;e&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_MANUFACTURER,e);const i=t.deviceModel||k9&&k9.model;i&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_MODEL,i)}Dge(t){const e=t.deviceType||function(){const t=f8(self);switch(t){case d8.Age:return"game-console";case d8.Ege:return"tv";case d8.Sge:return"media-streamer";default:return t}}();e&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_TYPE,e)}Ige(){const t=c8(self);t&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_BROWSER,t);const e=l8(self);void 0!==e&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_BROWSER_VERSION,e.toString())}Cge(t){const e=t.deviceOs||L9(self);e&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_OS,e);const i=t.deviceOsVersion||O9(self);i&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_OS_VERSION,i.toString())}yn(){Ll.connection&&Ll.connection.removeEventListener&&Ll.connection.removeEventListener("change",this.Pge)}constructor(t,e){this.empClient=t,this.agama=e,this.Pge=()=>{const t=Ms.dR;switch(t){case"wifi":this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DATA_CONNECTION_TYPE,"wlan");break;case"ethernet":this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DATA_CONNECTION_TYPE,t);break;case"cellular":const e=function(t){switch(t){case"3g":return"mobile/3G";case"4g":return"mobile/4G";default:return}}(Ms.lR);e&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DATA_CONNECTION_TYPE,e)}}}};Dh(function(t){return e=>class extends e{RR(t,e){this.Nge&&this.Nge.DX(),super.RR(t)}yn(){this.Nge&&this.Nge.yn(),super.yn()}constructor(e,i){super(e,i),this.bX=new t,this.Nge=new cC(this,this.bX,i)}}}(class extends $I{kI(t){this.Mge=t,this.Lge&&(this.bX=function(t,e){const i=function(t,e){switch(e){case"info":return t.LogLevel.INFO;case"debug":return t.LogLevel.DEBUG;case"warning":return t.LogLevel.WARNING;case"error":return t.LogLevel.ERROR;default:return t.LogLevel.FATAL}}(e,t.logLevel);e.setLogLevel(i);const s=new e.EMPClient(t.config);return function(t,e){return t.setExternalConfig(e.config),t}(s,t)}(t,this.Lge),this.bX&&(this.Bge=new _8(this.bX,this.Lge),this.mo=!0))}Xz(){return this.Lge||console.warn("Please load the Agama Library (empclient.min.js) in order to use the integration"),!!this.Lge}Gz(){return this.mo}bz(t,e){if(this.bX&&this.Lge)switch(t){case YI.HZ:this.bX.setMeasurement(this.Lge.Measurement.BUFFER_LENGTH,e);break;case YI.ZZ:this.bX.setMeasurement(this.Lge.Measurement.BYTES_RECEIVED,e);break;case YI.zZ:this.bX.setMeasurement(this.Lge.Measurement.SEGMENT_PROFILE_BITRATE,e);break;case YI.qZ:this.bX.setMeasurement(this.Lge.Measurement.VIDEO_PROFILE_BITRATE,e);break;case YI.XZ:this.bX.setMeasurement(this.Lge.Measurement.SEGMENT_READ_BITRATE,e);break;case YI.FZ:this.bX.setMeasurement(this.Lge.Measurement.HTTP_REQUEST_STATUS_CODE_1XX,e);break;case YI.VZ:this.bX.setMeasurement(this.Lge.Measurement.HTTP_REQUEST_STATUS_CODE_2XX,e);break;case YI.WZ:this.bX.setMeasurement(this.Lge.Measurement.HTTP_REQUEST_STATUS_CODE_3XX,e);break;case YI.UZ:this.bX.setMeasurement(this.Lge.Measurement.HTTP_REQUEST_STATUS_CODE_4XX,e);break;case YI.GZ:this.bX.setMeasurement(this.Lge.Measurement.HTTP_REQUEST_STATUS_CODE_5XX,e);break;case YI.KZ:this.bX.setMeasurement(this.Lge.Measurement.PLAYBACK_POSITION,e);break;case YI.jZ:this.bX.setMeasurement(this.Lge.Measurement.NUMBER_OF_FRAMES_DECODED,e);break;case YI.YZ:this.bX.setMeasurement(this.Lge.Measurement.NUMBER_OF_FRAMES_DROPPED,e)}}QX(t,e){if(this.bX&&this.Lge)switch(t){case KI.eX:this.bX.setSessionMetadata(this.Lge.SessionMetadata.ASSET_DURATION,e);break;case KI.tX:this.bX.setSessionMetadata(this.Lge.SessionMetadata.MANIFEST_URI,e);break;case KI.iX:this.bX.setSessionMetadata(this.Lge.SessionMetadata.NUMBER_OF_CONTENT_PROFILES,e);break;case KI.rX:this.bX.setSessionMetadata(this.Lge.SessionMetadata.SERVICE_NAME,e);break;case KI.sX:this.bX.setSessionMetadata(this.Lge.SessionMetadata.CDN,e);break;case KI.nX:this.bX.setSessionMetadata(this.Lge.SessionMetadata.CONTENT_TITLE,e);break;case KI.oX:this.bX.setSessionMetadata(this.Lge.SessionMetadata.CONTENT_TYPE,e);break;case KI.hX:this.bX.setSessionMetadata(this.Lge.SessionMetadata.CONTENT_DESCRIPTION,e)}}zz(){this.Bge&&this.Mge&&this.Bge.zz(this.Mge)}Zz(t,e){this.Lge&&this.bX&&(this.xz(),function(t,e,i,s){const n=uC(t,i,s);e.abrSession(n,t.ViewState.INITIAL_BUFFERING)}(this.Lge,this.bX,t,e),this.Oge=!0)}yn(){this.Bge&&this.Bge.yn(),this.Fge(jI.aX),this.bX=void 0}OX(t){this.Vge(t)}WX(t,e){this.bX&&this.bX.event(t.code,e)}xz(){this.bX&&this.Oge&&(this.bX.exitSession(),this.Oge=!1)}Fge(t){if(this.bX&&this.Lge&&(this.xz(),t===jI.aX))this.bX.shutdown(this.Lge.ShutdownType.NORMAL_SHUTDOWN)}FX(t,e,i){this.Vge(t,e,i)}Vge(t,e,i){if(this.bX&&this.Lge)switch(t){case Ae.UL:this.Wge(this.Lge.ViewState.PLAYING,e,i);break;case Ae.LZ:this.Wge(this.Lge.ViewState.FAILED,e,i);break;case Ae.BZ:this.Wge(this.Lge.ViewState.INITIAL_BUFFERING,e,i);break;case Ae.DZ:this.Wge(this.Lge.ViewState.PAUSED,e,i);break;case Ae.NZ:this.Wge(this.Lge.ViewState.SEEK,e,i);break;case Ae.MZ:this.Wge(this.Lge.ViewState.STALLED,e,i);break;case Ae.OZ:this.Wge(this.Lge.ViewState.NO_ACCESS,e,i)}}Wge(t,e,i){if(this.bX)if(e){const s=function(t){return t||""}(i);this.bX.viewStateExtended(t,e.code,s)}else this.bX.viewStateChanged(t)}constructor(){super(),this.mo=!1,this.Oge=!1,this.Lge=s.Agama}}),rh.Xst),r(),r(),r(),r(),r();var v8=function(t){return t.PLAY_ALL="play-all",t.PLAY_NONE="play-none",t.PLAY_LAST="play-last",t}({});r();var wn=function(t){return t.VOD="vod",t.LIVE="live",t}({}),m8=class{get wa(){return this.Uge.wa}get lt(){return this.YG}get MR(){return this.KG}Gge(t){this.YG=gn(t),this.KG=t,this.na._o(new Na(t))}Ca(t){this.Hge.resetSource(),this.Zge.Fb(),this.Xge=!1,this.na.zge(t)}async Rnt(t,e){if(this.qge.nr(),this.Xge=!1,!t||!function(t){return t.sources.some((t=>t.integration===ET.UPLYNK))}(t))return await this.na.Yge(t,e);try{this.Kge=await this.jge.qfe(t),await this.na.Yge(this.Kge,e)}catch(t){this.Gge(new A(Qa.MANIFEST_LOAD_ERROR,t.message,t))}}yn(){this.r8.jw(),this.Qge.jw(),this.na.vn(Ti.xy,this.Jge),this.na.vn(Ti.ho,this.kle),this.na.vn(Ti.hb,this.Ihe),this.na.vn(Ti.Dy,this.Foe),this.na.vn(Zc.FL,this.Sd);for(const t of this.Hge.YJt.Zu)t.vn("$ge",this.tpe),t.vn("_nt",this.epe),t.vn("fnt",this.ipe);this.Hge.YJt.vn("cnt",this.spe),this.Hge.YJt.vn("unt",this.npe),this.Hge.destroy(),this.S0t&&(this.S0t.Xw(),this.S0t=void 0),this.Xge=!1}async fetchAssetInfo(t){if(t&&t.integrationData)try{const e=await this.rpe.aTt(t.integrationData.source.prefix,t.integrationData.source.id,this.Qge.Uw,t.integrationData.preplayResponse.sid);this.Uge.ope(e),this.Zge.hpe(e,this.Hge.YJt.Zu)}catch(t){0}}ape(t){this.Hge.upe(t),this.Hge.ent.forEach((e=>e.cpe(t))),this.Hge.lpe(this.na.aI()),this.A0t()}RR(t){if(this.Hge.snt)return;this.r8.jw(),this.r8=new da;ah(js(this.Use(t,this.r8.Uw),this.r8))}async Use(t,e){if(J(e),t<this.na.xR())return void this.dpe(t);let i=[];switch(this.Hge.fpe){case v8.PLAY_ALL:i=this.Hge._pe(this.na.xR(),t),await this.vpe(t,i,e);break;case v8.PLAY_LAST:const s=this.Hge._pe(this.na.xR(),t).pop();i=s?[s]:[],await this.vpe(t,i,e);break;case v8.PLAY_NONE:this.mpe(t)}}dpe(t){const e=Fo(this.Hge.YJt.Zu,(e=>e._ut.wr(t)));e?this.na.gpe(e.WO):this.na.gpe(t)}mpe(t){const e=this.Hge._pe(this.na.xR(),t).pop();e&&e._ut.wr(t)?this.na.gpe(e.UO):this.na.gpe(t)}async vpe(t,e,i){for(const t of e)await this.ppe(t,i);const s=e[e.length-1];s&&s._ut.wr(t)?this.na.xR()<t&&this.na.gpe(s.UO):this.na.gpe(t)}async ppe(t,e){t.vn("$ge",this.tpe);const i=Promise.race([t.py("fnt",e),t.py("$ge",e)]);this.ape(this.na.xR()),t.so||this.na.gpe(t.WO),await i,t.bn("$ge",this.tpe)}A0t(){const t=Fo(this.Hge.ent,(t=>t.wpe.length>0));if(t){const e=t.wpe[0];this.S0t||(this.S0t=new L0(this.na.we),this.S0t.bn("clickstart",this.ype)),this.S0t.B$t=e}else this.S0t&&(this.S0t.Xw(),this.S0t=void 0)}constructor(t,e,i,s,n,r,o){this.na=t,this.qge=e,this.jge=i,this.Hge=s,this.Uge=n,this.rpe=r,this.Zge=o,this.YG=void 0,this.KG=void 0,this.r8=new da,this.Qge=new da,this.bpe=void 0,this.Xge=!1,this.S0t=void 0,this.Jge=t=>{const e=t.currentSource;if(!e||!e.integrationData)return;const{preplayResponse:i,source:s}=e.integrationData;this.Uge.Ape(i),i&&i.type===wn.VOD&&i.ads&&this.Hge.hpe(i.ads),this.qge.Spe=e.integrationData,s.assetInfo&&ah(this.fetchAssetInfo(e))},this.kle=()=>{this.Xge=!0},this.Ihe=()=>{this.Xge&&this.ape(this.na.xR())},this.Foe=()=>{this.Xge&&(this.ape(1/0),this.Xge=!1)},this.Sd=()=>{ah(this.qge.Sn())},this.tpe=t=>{this.r8.jw(),this.r8=new da;ah(js(this.Use(t.sd.UO,this.r8.Uw),this.r8))},this.epe=()=>{1!==this.na.QR&&(this.bpe=this.na.QR,this.na.QR=1)},this.ipe=()=>{void 0!==this.bpe&&(this.na.QR=this.bpe,this.bpe=void 0)},this.spe=t=>{t.sd.bn("$ge",this.tpe),t.sd.bn("_nt",this.epe),t.sd.bn("fnt",this.ipe)},this.npe=t=>{t.sd.vn("$ge",this.tpe),t.sd.vn("_nt",this.epe),t.sd.vn("fnt",this.ipe)},this.ype=()=>{this.na.EI()},this.na.bn(Ti.xy,this.Jge),this.na.bn(Ti.ho,this.kle),this.na.bn(Ti.hb,this.Ihe),this.na.bn(Ti.Dy,this.Foe),this.na.bn(Zc.FL,this.Sd),this.Hge.YJt.bn("cnt",this.spe),this.Hge.YJt.bn("unt",this.npe)}};r(),r();var g8=qe({breaksIndex:dl,adsIndex:dl,startTime:dl,endTime:dl}),p8=qe({index:dl,timeOffset:dl}),w8=qe({duration:dl,apiFramework:Me(rl,DR),creative:rl,mimeType:rl,width:dl,height:dl,companions:tc(function(t){return new GR(t)}((()=>w8))),extensions:Me(xh,tc(PR)),fw_parameters:Me(xh,UR(rl)),events:UR(tc(rl))}),y8=qe({type:OR(["linear","nonlinear"]),position:OR(["preroll","midroll","postroll","pause","overlay",""]),timeOffset:dl,duration:dl,ads:tc(w8),events:UR(tc(rl))}),b8=qe({breaks:tc(y8),breakOffsets:Me(xh,tc(p8)),placeholderOffsets:Me(xh,tc(g8))}),A8=qe({required:Me(xh,CR),fairplayCertificateURL:Me(xh,rl),widevineLicenseURL:Me(xh,rl),playreadyLicenseURL:Me(xh,rl)}),S8={type:OR(LR(wn)),playURL:rl,prefix:rl,sid:rl,drm:Me(xh,A8)},T8=qe(ol({},S8,{type:OR([wn.VOD]),ads:b8,interstitialURL:Me(rl,DR,xh)})),k8=Me(T8,qe(ol({},S8,{type:OR([wn.LIVE])})));r();var E8=rl,x8=qe({userId:rl,externalId:Me(rl,tc(rl))}),R8=class{async aTt(t){try{return this.Tpe(t)}catch(t){throw t}}async Tpe(t){const e=await async function(t){const e=t.prefix,i=I8[t.assetType],s=function(t){if(tc(E8).GU(t))return 1===t.length?t[0]:t.join(",")+"/multiple";if(E8.GU(t))return t;if(x8.GU(t)&&$c(t.externalId))return 1===t.externalId.length?"ext/"+t.userId+"/"+t.externalId[0]:"ext/"+t.userId+"/"+t.externalId.join(",")+"/multiple";if(x8.GU(t))return"ext/"+t.userId+"/"+t.externalId;throw new b("Invalid asset id")}(t.id),n=await async function(t){if(t&&await Ms.qp())return{rmt:"fps",manifest:"m3u8"};if(t&&await Ms.Kp())return{rmt:"wv",manifest:"mpd"};if(t&&await Ms.Yp())return{rmt:"pr",manifest:"mpd"};return{}}(t.contentProtected),r=function(t,e){const i=C8(t,e);return i?{"ad.cping":"1","ad.pingf":String(i)}:{}}(t.assetType,t.ping);let o={};$c(t.preplayParameters)?t.preplayParameters.forEach((t=>{o[t[0]]=t[1]})):o=t.preplayParameters;const h=e+"/preplay/"+i+s+".json";return Gb(h,ol({v:"2"},o,n,r,o))}(t),i=this.fW.Qk({AE:xe.GET,Xu:e,jk:Rr.Ak}),s=await i,n=ol({},await s.Kk(),{type:t.assetType===qn.ASSET?wn.VOD:wn.LIVE});return k8.GU(n)||k8.ZU(n,"PreplayResponse"),n}constructor(t){this.fW=t}},I8={[qn.ASSET]:"",[qn.CHANNEL]:"channel/",[qn.EVENT]:"event/"};function C8(t,e){const i=t!==qn.ASSET;return(!i&&e.adImpressions?1:0)+(!i&&e.freeWheelVideoViews?2:0)+(i&&e.linearAdData?4:0)}r(),r();var P8=qe({ad_id:rl,apiFramework:Me(DR,rl),companions:tc(PR),creative:rl,duration:dl,mimeType:rl,height:dl,width:dl,extensions:Me(xh,tc(PR)),fw_parameters:Me(xh,UR(rl))}),D8=qe({breakId:rl,ads:tc(P8),type:OR(["linear","nonlinear"]),position:OR(["preroll","midroll","postroll","pause","overlay",""]),timeOffset:dl,duration:dl,height:Me(xh,dl),width:Me(xh,dl),events:UR(tc(rl))}),N8=qe({breaks:tc(D8)}),M8=qe({next_time:dl,ads:Me(xh,N8),extensions:Me(xh,tc(PR)),error:Me(xh,rl),currentBreakEnd:Me(xh,dl)}),L8=function(t){return t.fTt="start",t.NZ="seek",t}({}),B8=class{async aTt(t,e){try{return this.Tpe(t,e)}catch(t){throw t}}async Tpe(t,e){const i=function(t){const e={v:"3",pt:String(t.currentTime)};(function(t){return void 0!==t.seekTime})(t)&&t.hasFreeWheelVideoViews&&(e.ft=String(t.seekTime));t.event&&(e.ev=t.event);return Gb(t.zonePrefix+"/session/ping/"+t.sessionId+".json",ol({},e))}(t),s=this.fW.Qk({AE:xe.GET,Xu:i,jk:Rr.Ak,Uw:e}),n=await s,r=await n.Kk();return M8.GU(r)||M8.ZU(r,"PingResponse"),r}constructor(t){this.fW=t}};r(),r();var O8=class extends Ds{get zE(){return this.qE}ka(){return new F8(this.qE)}constructor(t){super("kpe"),this.qE=t}},F8=class extends pe{constructor(t){super("pingresponse"),this.response=t}};r();var V8=class extends Ds{get lt(){return this.YG}ka(){return new W8(this.YG)}constructor(t){super("Epe"),this.YG=t}},W8=class extends pe{constructor(t){super("pingerror"),this.error=t}},U8=class extends Co{set Spe(t){this.xpe=t}get Rpe(){return this.Ipe}async Sn(){const t=this.xpe;if(!t)return;0!==C8(t.source.assetType,t.source.ping)&&(this.Ipe=this.na.aI().start(0),await this.Cpe(L8.fTt),this.na.bn("timeupdate",this.Ppe),this.na.bn("seeking",this.Dpe))}async Cpe(t,e){const i=this.xpe.preplayResponse,s={};if(S(this.Ipe))return void 0;if(Bo(this.Npe)&&gh(this.Npe,this.na.xR()-this.Ipe))return;void 0!==e&&(s.seekTime=e),void 0!==t&&(s.event=t);let n,r=this.na.xR()-this.Ipe;t===L8.fTt?r=0:t!==L8.NZ&&this.Mpe&&(r=_.min(r,this.Mpe)),this.Npe=r;try{var o;const t=await this.Lpe.aTt(ol({zonePrefix:i.prefix,sessionId:i.sid,currentTime:r,hasFreeWheelVideoViews:null==(o=this.xpe)?void 0:o.source.ping.freeWheelVideoViews},s),this.GT.Uw);this._o(new O8(t)),this.Mpe=-1!==t.next_time?t.next_time:void 0,n=t.error}catch(t){Je(t)||(n=t.message)}finally{n&&this._o(new V8(n))}}nr(){this.Mpe=void 0,this.xpe=void 0,this.Ipe=NaN,this.Bpe=!1,this.Ope=NaN,this.Npe=void 0,this.na.vn("seeking",this.Dpe),this.na.vn("timeupdate",this.Ppe),this.Fpe()}Fpe(){this.GT.jw(),this.GT=new da}yn(){this.nr()}constructor(t,e){super(),this.Lpe=t,this.na=e,this.Ipe=NaN,this.Mpe=void 0,this.Bpe=!1,this.Ope=NaN,this.GT=new da,this.Npe=void 0,this.Ppe=async()=>{const t=this.na.xR();if(this.Ope=t,this.Bpe||pd(this.Mpe)||S(this.Ipe))return;this.Ipe+this.Mpe<=t&&(this.Bpe=!0,await this.Cpe(),this.Bpe=!1)},this.Dpe=()=>{if(this.na.xR()===this.Ipe)return;this.Bpe&&this.Fpe(),this.Ope=this.na.xR();const t=this.Ope-(this.Ipe||0);S(t)?ah(this.Cpe(L8.NZ,0)):ah(this.Cpe(L8.NZ,t))}}};r();var G8=class{async qfe(t){const e=[];for(const i of t.sources)if(Kc(i))try{const s=Z8({source:i,preplayResponse:await this.Vpe.aTt(i)},t,this.xQ);s.src&&(s.src=Gb(s.src,i.playbackUrlParameters)),e.push(s)}catch(t){0}else e.push(i);if(0!==t.sources.length&&0===e.length)throw new g("Fatal: unable to play UplynkSources.");return ol({},t,{sources:e})}constructor(t,e){this.Vpe=t,this.xQ=e}};function H8(t){return!!t.sources&&($c(t.sources)?t.sources.some(Kc):Kc(t.sources))}function Z8(t,e,i){const s=t.preplayResponse;let n;t.source.contentProtected&&s.drm&&(n={integration:"uplynk"},s.drm.fairplayCertificateURL&&(n.fairplay={certificateURL:s.drm.fairplayCertificateURL}),s.drm.widevineLicenseURL&&(n.widevine={licenseAcquisitionURL:s.drm.widevineLicenseURL}),s.drm.playreadyLicenseURL&&(n.playready={licenseAcquisitionURL:s.drm.playreadyLicenseURL}));const r=Vc({src:s.playURL,contentProtection:n,useNativePlayback:t.source.useNativePlayback,hls:t.source.hls,dash:t.source.dash,seamlessSwitchStrategy:t.source.seamlessSwitchStrategy},e,i);return r.integrationData=t,r}r(),r(),r();var X8=class extends Ds{ka(){return new z8(this.sd.wa)}constructor(t,e){super("_nt"),this.sd=t,this.oV=e}},z8=class extends pe{constructor(t){super("adbreakbegin"),this.adBreak=t}};r();var q8=class extends Ds{ka(){return new Y8(this.sd.wa)}constructor(t,e){super("fnt"),this.sd=t,this.oV=e}},Y8=class extends pe{constructor(t){super("adbreakend"),this.adBreak=t}};r();var K8=class extends Ds{ka(){return new j8(this.sd.wa)}constructor(t){super("$ge"),this.sd=t}},j8=class extends pe{constructor(t){super("adbreakskip"),this.adBreak=t}};r(),r();var Q8=class extends Ds{ka(){return new J8(this.sd.wa)}constructor(t){super("Q2t"),this.sd=t}},J8=class extends pe{constructor(t){super("updateadbreak"),this.adBreak=t}},$8=class extends sn{get wa(){return this.eu||(this.eu=function(t){let e;const i={get startTime(){return t.WO},get endTime(){return t.UO},get duration(){return t.ct},get ads(){return t.zc.wa},get skipOffset(){return t.xKt},set skipOffset(e){t.xKt=e},addEventListener(t,i){e.bn(t,i)},removeEventListener(t,i){e.vn(t,i)}};return e=new rt(t,i),i}(this)),this.eu}get WO(){return this.jO}get UO(){return this.MA?this.jO+this.MA:void 0}Wpe(t){this.MA=t-this.WO;for(const e of this.zc.Zu)e.WO>t&&this.zc.eT(e);this._o(new Q8(this))}get ct(){return this.MA}get _ut(){const t=this.UO;return Bo(t)?new se([this.WO,t]):se.pB()}get zc(){return this.Oc}get Upe(){return this.Gpe}get so(){return this.eo}get xKt(){return this.C_e?-1:this.RKt}set xKt(t){this.C_e||(this.RKt=t)}Bct(t){return t>=this.WO&&(pd(this.ct)||t<=this.WO+this.ct)}Hpe(t){return-1!==this.xKt&&(!!Bo(this.UO)&&t-this.WO>=this.xKt)}MD(){this.Oc.Zu.forEach((t=>t.MD())),this._o(new K8(this))}Zpe(t){const e=Bo(this.UO)&&t>=this.UO,i=this.WO<=t&&!e&&!this.so,s=this.so&&this.UO&&t>=this.UO;i&&(this.eo=!0,this._o(new X8(this,this.WO))),this.Oc.Zu.forEach((e=>e.Zpe(t))),s&&(this.Gpe=!0,this.eo=!1,this._o(new q8(this,this.UO)))}constructor(t,e,i,s,n){super(),this.jO=t,this.MA=e,this.Oc=i,this.C_e=s,this.eo=!1,this.Gpe=!1,this.RKt=n}};r(),r();var t7=class extends Ds{ka(){return new e7(this.lnt.wa)}constructor(t,e){super("vnt"),this.lnt=t,this.oV=e}},e7=class extends pe{constructor(t){super("adbegin"),this.ad=t}};r();var i7=class extends Ds{ka(){return new s7(this.lnt.wa)}constructor(t,e){super("mnt"),this.lnt=t,this.oV=e}},s7=class extends pe{constructor(t){super("adend"),this.ad=t}};r(),r();var n7=class extends Ds{ka(){return new r7(this.lnt.wa)}constructor(t){super("Xpe"),this.lnt=t}},r7=class extends pe{constructor(t){super("removead"),this.ad=t}},o7=class extends D2{Yte(t){}Jte(t){this._o(new n7(t))}constructor(){super()}};r();var h7=class extends Ds{ka(){return new a7(this.lnt.wa)}constructor(t){super("$2t"),this.lnt=t}},a7=class extends pe{constructor(t){super("adfirstquartile"),this.ad=t}},u7=class extends Ds{ka(){return new c7(this.lnt.wa)}constructor(t){super("t3t"),this.lnt=t}},c7=class extends pe{constructor(t){super("admidpoint"),this.ad=t}},l7=class extends Ds{ka(){return new d7(this.lnt.wa)}constructor(t){super("e3t"),this.lnt=t}},d7=class extends pe{constructor(t){super("adthirdquartile"),this.ad=t}},f7=class extends Ds{ka(){return new _7(this.lnt.wa)}constructor(t){super("zpe"),this.lnt=t}},_7=class extends pe{constructor(t){super("adcomplete"),this.ad=t}};r();var v7=class t extends sn{static qpe(e,i){return new t(e,i.duration,i.apiFramework||"",i.creative,i.mimeType,i.width,i.height,i.companions.map((i=>t.qpe(e,i))),i.extensions,i.fw_parameters,i.events,void 0)}static Ype(e,i){return new t(e,i.duration,i.apiFramework||"",i.creative,i.mimeType,i.width,i.height,i.companions.map((i=>t.Ype(e,i))),i.extensions,i.fw_parameters,void 0,i.ad_id)}get wa(){return this.eu||(this.eu=function(t){let e;const i={get apiFramework(){return t.WYt},get companions(){return t.CYt.wa},get creative(){return t.Kpe},get duration(){return t.ct},get endTime(){return t.UO},get events(){return t.Qq},get extensions(){return t.jpe},get freeWheelParameters(){return t.Qpe},get height(){return t.Ti},get mimeType(){return t.jq},get startTime(){return t.WO},get width(){return t.ji},addEventListener(t,i){e.bn(t,i)},removeEventListener(t,i){e.vn(t,i)}};return e=new rt(t,i),i}(this)),this.eu}get WO(){return this.jO}get UO(){return this.jO+this.MA}get ct(){return this.MA}get WYt(){return this.UYt}get Kpe(){return this.Jpe}get jq(){return this.dY}get ji(){return this.YA}get Ti(){return this.KA}get Qq(){return this.Kf}get CYt(){return this.PYt}get jpe(){return this.$pe}get Qpe(){return this.twe}get so(){return this.eo}get wpe(){var t;return null!=(t=this.Kf.clickthroughs)?t:[]}Zpe(t){const e=this.WO<=t&&t<this.UO,i=e&&!this.so,s=!e&&this.so;i&&(this.iwe=!1,this.nwe=!1,this.rwe=!1,this.owe=!1,this.eo=!0,this._o(new t7(this,this.WO))),s&&(this.eo=!1,this._o(new i7(this,this.UO)))}cpe(t){const e=(t-this.WO)/this.ct;!this.iwe&&e>=.25&&(this.iwe=!0,this._o(new h7(this))),!this.nwe&&e>=.5&&(this.nwe=!0,this._o(new u7(this))),!this.rwe&&e>=.75&&(this.rwe=!0,this._o(new l7(this))),!this.owe&&e>=.9999&&(this.owe=!0,this._o(new f7(this)))}MD(){this.iwe=!0,this.nwe=!0,this.rwe=!0,this.owe=!0}yn(){this.vn("vnt",this.hwe),this.vn("mnt",this.awe)}constructor(t,e,i,s,n,r,o,h,a=[],u={},c={},l){super(),this.jO=t,this.MA=e,this.UYt=i,this.Jpe=s,this.dY=n,this.YA=r,this.KA=o,this.$pe=a,this.twe=u,this.Kf=c,this.mKt=l,this.PYt=new o7,this.eo=!1,this.iwe=!1,this.nwe=!1,this.rwe=!1,this.owe=!1,this.hwe=()=>this.cpe(this.jO),this.awe=()=>this.cpe(this.UO),this.PYt.Kte(h),this.bn("vnt",this.hwe),this.bn("mnt",this.awe)}};r(),r();var m7=class extends Ds{ka(){return new g7(this.sd.wa)}constructor(t){super("cnt"),this.sd=t}},g7=class extends pe{constructor(t){super("addadbreak"),this.adBreak=t}};r();var p7=class extends Ds{ka(){return new w7(this.sd.wa)}constructor(t){super("unt"),this.sd=t}},w7=class extends pe{constructor(t){super("removeadbreak"),this.adBreak=t}},y7=class extends D2{Yte(t){this._o(new m7(t))}Jte(t){this._o(new p7(t))}constructor(){super()}},b7=class{get wa(){return this.eu||(this.eu=function(t){return{get adBreaks(){return t.YJt.wa},get currentAdBreak(){if(t.snt)return t.snt.wa},get currentAds(){return t.snt?t.snt.zc.wa:(new o7).wa},skip(){t.MD()}}}(this)),this.eu}get YJt(){return this.w$t}get snt(){return Fo(this.w$t.Zu,(t=>t.so))}get ent(){return this.snt?this.snt.zc.Zu.filter((t=>t.so)):[]}get uwe(){if(0===this.YJt.V||0===this.na.aI().length)return;const t=this.na.aI().end(this.na.aI().length-1);return Fo(this.YJt.Zu,(e=>e.Bct(t)))}get fpe(){return this.cwe}lpe(t){if(0===t.length)return;const e=se.Cn(t);for(const t of this.w$t.Zu.slice())Bo(t.UO)&&e.Sn(0)>t.UO&&this.w$t.eT(t)}hpe(t){const e=!function(t){return Bo(t.breakOffsets)}(t),i=e?this.qge.Rpe:0;for(const s of t.breaks){if(0===s.ads.length)continue;let t=s.timeOffset+i;const n=new o7;let r=0;for(const i of s.ads){const s=e?v7.Ype(t,i):v7.qpe(t,i);n.kO(s),t+=s.ct,r+=s.ct}const o=s.timeOffset+i,h=e?void 0:s.duration,a=new $8(o,h,n,e,this.lwe);e&&this.dwe.push({yYt:a,ZRt:o+r}),this.w$t.kO(a)}}fwe(t){const e=this.uwe;e&&e.Wpe(t+this.qge.Rpe)}upe(t){this._we=t,this.w$t.Zu.forEach((e=>e.Zpe(t)))}MD(){const t=this._we,e=this.snt;t&&e&&e.Hpe(t)&&e.MD()}skipAd(t){this.MD()}_pe(t,e){let i=[];for(const s of this.YJt.Zu)!s.Upe&&s.WO>=t&&s.WO<e&&i.push(s);return i}destroy(){this.na.vn("timeupdate",this.vwe),this.qge.vn("kpe",this.mwe)}resetSource(){var t;for(const t of this.YJt.Zu){for(const e of t.zc.Zu)e.Ro();t.Ro()}this.YJt.Fb(),null==(t=this.gwe)||t.removeAllAds(),this._we=void 0,this.dwe=[]}pwe(t){return Fo(this.gwe.ads,(e=>e.creativeId===t.Kpe))}constructor(t,e,i,s){var n;this.dwe=[],this.gwe=void 0,this.wwe=t=>(this.gwe=t,this),this.mwe=t=>{t.zE.ads&&this.hpe(t.zE.ads),t.zE.currentBreakEnd&&this.fwe(t.zE.currentBreakEnd)},this.vwe=t=>{if(0===this.dwe.length||0===this.na.aI().length)return;const e=this.na.aI().end(this.na.aI().length-1);for(const t of this.dwe.slice())Bo(t.yYt.ct)?we(this.dwe,t):t.ZRt<e&&(t.yYt.Wpe(t.ZRt),we(this.dwe,t))},this._d=t=>{var e;const i=null==(e=this.gwe)?void 0:e.createAdBreak({timeOffset:t.sd.WO,maxDuration:t.sd.ct,customData:t.sd});t.sd.bn("$ge",this.ywe);for(const e of t.sd.zc.Zu){var s,n;const r={type:"linear",timeOffset:e.WO,duration:e.ct,creativeId:e.Kpe,skipOffset:t.sd.xKt,clickThrough:null==(s=e.wpe)?void 0:s[0],customData:e};null==(n=this.gwe)||n.createAd(r,i),e.bn("vnt",this.D9t),e.bn("mnt",this.bwe),e.bn("$2t",this.Awe),e.bn("t3t",this.Swe),e.bn("e3t",this.Twe),e.bn("zpe",this.Fme)}},this.ywe=t=>{for(const s of t.sd.zc.Zu){const t=this.pwe(s);var e,i;if(t)null==(e=this.gwe)||e.beginAd(t),null==(i=this.gwe)||i.skipAd(t)}},this.xd=t=>{for(const e of t.sd.zc.Zu)e.Ro();t.sd.Ro()},this.D9t=t=>{const e=this.pwe(t.lnt);var i;e&&(null==(i=this.gwe)||i.beginAd(e))},this.bwe=t=>{const e=this.pwe(t.lnt);var i;e&&(null==(i=this.gwe)||i.endAd(e))},this.Awe=t=>{const e=this.pwe(t.lnt);var i;e&&(null==(i=this.gwe)||i.updateAdProgress(e,.25))},this.Swe=t=>{const e=this.pwe(t.lnt);var i;e&&(null==(i=this.gwe)||i.updateAdProgress(e,.5))},this.Twe=t=>{const e=this.pwe(t.lnt);var i;e&&(null==(i=this.gwe)||i.updateAdProgress(e,.75))},this.Fme=t=>{const e=this.pwe(t.lnt);var i;e&&(null==(i=this.gwe)||i.updateAdProgress(e,1))},this.na=t,this.qge=e,this.w$t=new y7,this.w$t.bn("cnt",this._d),this.w$t.bn("unt",this.xd),this.lwe=i,this.cwe=s,t.bn("timeupdate",this.vwe),this.qge.bn("kpe",this.mwe),null==(n=this.na.zc)||n.ont(lu.UPLYNK,this.wwe)}};r(),r(),r();var A7=function(t){return t[t.NOT_AVAILABLE=-1]="NOT_AVAILABLE",t[t.NOT_APPLICABLE=0]="NOT_APPLICABLE",t[t.G=1]="G",t[t.PG=2]="PG",t[t.PG_13=3]="PG_13",t[t.R=4]="R",t[t.NC_17=5]="NC_17",t[t.X=6]="X",t[t.NOT_RATED=7]="NOT_RATED",t}({}),S7=function(t){return t[t.NOT_AVAILABLE=-1]="NOT_AVAILABLE",t[t.NOT_APPLICABLE=0]="NOT_APPLICABLE",t[t.TV_Y=1]="TV_Y",t[t.TV_Y7=2]="TV_Y7",t[t.TV_G=3]="TV_G",t[t.TV_PG=4]="TV_PG",t[t.TV_14=5]="TV_14",t[t.TV_MA=6]="TV_MA",t[t.NOT_RATED=7]="NOT_RATED",t}({}),T7=class t{static kwe(e,i,s){const n=new xg(e.rating_flags);return new t(i,s,e.duration,Boolean(e.audio_only),e.boundary_details,Boolean(e.error),e.tv_rating,e.max_slice,e.thumb_prefix,e.slice_dur,e.movie_rating,e.owner,e.meta,e.rates,e.thumbs,e.poster_url,e.default_poster_url,e.desc,n.Cb(1),n.Cb(2),n.Cb(4),n.Cb(8),e.external_id,Boolean(e.is_ad),e.asset)}get wa(){return this.eu||(this.eu=function(t){return{startTime:t.WO,endTime:t.UO,duration:t.ct,audioOnly:t.xwe,boundaryDetails:t.Rwe,error:t.lt,tvRating:t.Iwe,maxSlice:t.Cwe,thumbPrefix:t.Pwe,sliceDuration:t.Dwe,movieRating:t.Nwe,ownerId:t.Mwe,metadata:t.qV,rates:t.Lwe,thumbnailResolutions:t.Bwe,posterUrl:t.Owe,defaultPosterUrl:t.Fwe,description:t.VN,hasAdultLanguage:t.Vwe,hasSexualSituations:t.Wwe,hasViolence:t.Uwe,hasDrugSituations:t.Gwe,externalId:t.Hwe,isAd:t.Zwe,assetId:t.Xwe}}(this)),this.eu}constructor(t,e,i,s,n,r,o,h,a,u,c,l,d,f,_,v,m,g,p,w,y,b,A,S,T){this.WO=t,this.UO=e,this.ct=i,this.xwe=s,this.Rwe=n,this.lt=r,this.Iwe=o,this.Cwe=h,this.Pwe=a,this.Dwe=u,this.Nwe=c,this.Mwe=l,this.qV=d,this.Lwe=f,this.Bwe=_,this.Owe=v,this.Fwe=m,this.VN=g,this.Vwe=p,this.Wwe=w,this.Uwe=y,this.Gwe=b,this.Hwe=A,this.Zwe=S,this.Xwe=T}};var k7=qe({duration:dl,offset:dl}),E7=qe({c3:k7}),x7=qe({c7:k7}),R7=qe({halftime:k7}),I7=OR(LR(S7)),C7=OR(LR(A7)),P7=qe({width:Me(xh,dl),prefix:rl,bw:dl,bh:dl,height:Me(xh,dl)}),D7=qe({audio_only:dl,boundary_details:Me(xh,tc(Me(E7,x7,R7))),error:dl,tv_rating:I7,max_slice:dl,thumb_prefix:rl,slice_dur:dl,movie_rating:C7,owner:rl,meta:PR,rates:tc(dl),thumbs:tc(P7),poster_url:rl,duration:dl,default_poster_url:rl,desc:rl,rating_flags:dl,external_id:rl,is_ad:dl,asset:rl}),N7=class{async aTt(t,e,i,s){const n=function(t,e,i){if(E8.GU(e))return[M7(t,e,i)];if(tc(E8).GU(e))return e.map((e=>M7(t,e,i)));if(x8.GU(e)){return($c(e.externalId)?e.externalId:[e.externalId]).map((s=>M7(t,"ext/"+e.userId+"/"+s,i)))}throw new b("Invalid asset id")}(t,e,s),r=n.map((t=>Ci((()=>this.Tpe(t)),i)));return(await Promise.all(r)).filter(Bo)}async Tpe(t){const e=this.fW.Qk({AE:xe.GET,Xu:t,jk:Rr.Ak}),i=await e,s=await i.Kk();return D7.GU(s)||D7.ZU(s,"AssetInfoResponse"),s}constructor(t){this.fW=t}};function M7(t,e,i){return i?t+"/player/assetinfo/"+e+".json?pbs="+i:t+"/player/assetinfo/"+e+".json"}r(),r();var L7=class extends Ds{ka(){return new B7(this.ld.wa)}constructor(t){super("zwe"),this.ld=t}},B7=class extends pe{constructor(t){super("removeasset"),this.asset=t}};r();var O7=class extends Ds{ka(){return new F7(this.ld.wa)}constructor(t){super("qwe"),this.ld=t}},F7=class extends pe{constructor(t){super("addasset"),this.asset=t}},V7=class extends D2{hpe(t,e){let i,s=0;for(const n of t){i=s+n.duration;for(const t of e)s<=t.WO&&t.WO<i&&(i+=t.ct||0);this.kO(T7.kwe(n,s,i)),s=i}}Yte(t){this._o(new O7(t))}Jte(t){this._o(new L7(t))}constructor(){super()}};r(),r();var W7=class extends Ds{ka(){return new U7(this.zE)}constructor(t){super("Ywe"),this.zE=t}},U7=class extends pe{constructor(t){super("preplayresponse"),this.response=t}};r();var G7=class extends Ds{ka(){return new H7(this.zE)}constructor(t){super("Kwe"),this.zE=t}},H7=class extends pe{constructor(t){super("assetinforesponse"),this.response=t}},Z7=class extends sn{Ape(t){t&&this._o(new W7(tu(t)))}ope(t){t.forEach((t=>this._o(new G7(t))))}get wa(){return this.eu||(this.eu=this.ka()),this.eu}ka(){let t;const e=this,i={get ads(){return e.Hge.wa},get assets(){return e.Zge.wa},addEventListener(e,i){t.bn(e,i)},removeEventListener(e,i){t.vn(e,i)}};return t=new rt(e,i),i}constructor(t,e,i){super(),this.Hge=t,this.Zge=e,this.qge=i,i.bn("kpe",this.Ds),i.bn("Epe",this.Ds)}},X7=class{jwe(t,e){const i=new R8(t.fR),s=new B8(t.fR),n=function(t){if(t.uplynk&&Bo(t.uplynk.defaultSkipOffset))return function(t){return Ad(t)?t:-1}(t.uplynk.defaultSkipOffset);return-1}(e),r=function(t){var e,i;const s=null!=(i=null==(e=t.uplynk)?void 0:e.onSeekOverAd)?i:void 0;return function(t){if(!t)return"play-none";switch(t.toLowerCase()){case"play-all":return"play-all";case"play-none":default:return"play-none";case"play-last":return"play-last"}}(s)}(e),o=new U8(s,t),h=new G8(i,e),a=new b7(t,o,n,r),u=new N7(t.fR),c=new V7,l=new Z7(a,c,o);return new m8(t,o,h,a,l,u,c)}};Dh((function(t){return class extends t{zge(t){super.Ca(t)}Yge(t,e){return super.Rnt(t,e)}gpe(t){super.RR(t)}NR(){var t;return null!=(t=this.Qwe.lt)?t:super.NR()}LR(){var t;return null!=(t=this.Qwe.MR)?t:super.LR()}RR(t,e){this.Qwe.RR(t)}Ca(t){this.Qwe.Ca(t)}Rnt(t,e){return this.Qwe.Rnt(t,e)}ka(){const t=this.Qwe.wa;return Jr(super.ka(),{get uplynk(){return t}})}yn(){this.Qwe.yn(),super.yn()}constructor(t,e){super(t,e),this.Qwe=(new X7).jwe(this,e)}}}),rh.Gst),r(),r(),r(),r();var z7=function(t){return t.CREATIVE_VIEW="creativeView",t.START="start",t.FIRST_QUARTILE="firstQuartile",t.MID_POINT="midpoint",t.THIRD_QUARTILE="thirdQuartile",t.COMPLETE="complete",t.MUTE="mute",t.UNMUTE="unmute",t.PAUSE="pause",t.REWIND="rewind",t.RESUME="resume",t.FULL_SCREEN="fullscreen",t.EXIT_FULL_SCREEN="exitFullscreen",t.EXPAND="expand",t.COLLAPSE="collapse",t.ACCEPT_INVITATION_LINEAR="acceptInvitationLinear",t.ACCEPT_INVITATION="acceptInvitation",t.CLOSE_LINEAR="closeLinear",t.CLOSE="close",t.SKIP="skip",t.SKIP_SHOWN="skipShown",t.PROGRESS="progress",t.ENGAGED_VIEW="engagedView",t.IMPRESSION="impression",t.ERROR="error",t}({});r();var q7=class extends Zi{ka(){return Lo(this)}get aQt(){return vt.v$t}get WO(){return this.jO}get cYt(){return this.YYt}constructor(t,e,i,s){super(t,e),this.YYt=s,this.jO=i}};r();var Y7=class extends ys{get cOt(){return this.Jwe}get aQt(){return vt.v$t}constructor(t,e,i){if(super(e),this.S2t=t,this.T2t=t,i){const t=new Date(i);mf(t)&&(this.Jwe=t)}}},K7=class{wC(){this.na.bn(Zc.UL,this.XB),this.na.bn(Ti.zy,this.sMt),this.na.bn(Ti.ho,this.czt),this.na.bn(Ti.Jy,this.Ge),this.na.bn(Ti.Dy,this.Ah),this.na.bn(Ti.hb,this.pd),this.na.bn(Ti.ub,this.i1t),this.na.bn(UP.MODE_CHANGE,this.$we)}gC(){this.na.vn(Zc.UL,this.XB),this.na.vn(Ti.zy,this.sMt),this.na.vn(Ti.ho,this.czt),this.na.vn(Ti.Jy,this.Ge),this.na.vn(Ti.Dy,this.Ah),this.na.vn(Ti.hb,this.pd),this.na.vn(Ti.ub,this.i1t),this.na.vn(UP.MODE_CHANGE,this.$we)}get tye(){return this.iye}get ent(){const t=this.tye;if(!t)return[];const e=[],i=this.sye();for(const s of t.zc)i>=s.WO&&this.dge<=s.WO+s.ct&&e.push(s);return e}sye(){return this.na.xR()-this.nye}rye(){if(this.oye)return;if(this.na.jd()!==1/0)return void(0===this.aye.length&&(this.oye=this.uye()));const t=()=>{var t;null==(t=this.cye)||t.Xw(),this.cye=void 0,this.oye=void 0};this.cye=new da,this.oye=this.lye(this.cye.Uw).catch(this.X6).then(t,t)}async dye(){const t=_.min(1e3*2**this.fye,3e4);try{var e;await ke(t,null==(e=this.cye)?void 0:e.Uw),this.fye++}catch(t){if(Je(t))return void(this.fye=0)}this.rye()}async lye(t){for(;J(t),!this.na.KR;){const e=Ms.Wg()-this._ye;if(e>1e4)await this.uye(t),this._ye=Ms.Wg(),this.fye=0;else{const i=1e4-e;await ke(i,t)}}}vye(t){const e=t.cOt;if(e&&this.na.bR&&0===this.nye&&!this.mye&&0!==_.floor(this.na.aI().start(0))){const i=(this.na.bR.getTime()-e.getTime())/1e3,s=this.na.xR()-t.eOt;this.nye=s-i}}async uye(t){try{const e=await this.na.fR.Qk({Xu:this.gye}),i=await e.Ik(t);if(0===i.avails.length)return void(0!==this.aye.length&&(this.aye=[]));if(i.avails.length===this.aye.length&&i.avails[0].startTimeInSeconds===this.aye[0].eOt)return void this.vye(this.aye[0]);const s=[];for(const t of i.avails){const e=new Y7(t.durationInSeconds,t.startTimeInSeconds,t.availProgramDateTime);for(const i of t.ads){const t=new q7(e,Es.Mjt,i.startTimeInSeconds,i.trackingEvents);t.L2t(i.adId,i.width,i.height,i.durationInSeconds,[],i.skipoffset),e.R2t(t)}s.push(e),this.vye(e)}this.aye=Ii(s,((t,e)=>t.eOt-e.eOt))}catch(t){throw th(t),new g("Failed to poll MediaTailor tracking events")}}pye(){var t;null==(t=this.cye)||t.jw(),this.cye=void 0,this.oye=void 0,this._ye=-1/0}wye(){if(0===this.aye.length)return;const t=this.aye[this.aye.length-1],e=this.sye();if(t.eOt+t.ZJt<this.dge){var i;this.iye&&(null==(i=this.na.zc)||i._o(new Hh(this.iye)),this.iye=void 0)}else{for(const t of this.aye){const i=t.eOt;if(!(i+t.ZJt<this.dge)&&(i<=e&&i+t.ZJt>this.dge)){var s;if(this.tye===t)return;return this.iye=t,void(null==(s=this.na.zc)||s._o(new Ua(this.iye)))}}var n;if(this.iye)null==(n=this.na.zc)||n._o(new Hh(this.iye)),this.iye=void 0}}yye(){const t=this.ent;if(0===t.length)return;let e=[];for(const i of t){const t=i.cYt.filter((t=>ms(this.Aye,t.eventType)));e=e.concat(t)}for(const t of e)this.Sye(t.startTimeInSeconds)&&(t.eventType===z7.COMPLETE&&this.Tye(z7.ENGAGED_VIEW),this.kye(t))}Eye(t,e){return e.cYt.filter((e=>lh(e.eventType,t)))[0]}Tye(t){const e=this.ent;if(0===e.length)return;const i=this.Eye(t,e[0]);i&&this.kye(i)}kye(t){this.o_e(t.eventType);for(const e of t.beaconUrls){const t={AE:xe.GET,Xu:e,Lk:"",jk:Rr.Ak};0,ah(this.xye(t))}}o_e(t){let e;const i=this.ent;switch(t){case z7.START:e=new cn(i[i.length-1],this.na.xR());break;case z7.COMPLETE:e=new xn(i[0],this.na.xR());break;case z7.FIRST_QUARTILE:e=new cs(i[0],this.na.xR());break;case z7.MID_POINT:e=new Is(i[0],this.na.xR());break;case z7.THIRD_QUARTILE:e=new ks(i[0],this.na.xR())}var s;void 0!==e&&(null==(s=this.na.zc)||s._o(e))}async xye(t){const e=await this.na.fR.Qk(t);e.Yk}Sye(t){const e=this.sye();return t>=this.dge&&t<e}yn(){this.gC(),this.pye(),this.dge=-1}constructor(t,e,i){this._ye=-1/0,this.iye=void 0,this.nye=0,this.aye=[],this.Qme=!1,this.aK=!1,this.dge=-1,this.cye=void 0,this.oye=void 0,this.fye=0,this.XB=()=>{this.rye()},this.czt=()=>{this.Tye(z7.RESUME)},this.sMt=()=>{this.pye(),this.Tye(z7.PAUSE)},this.Ge=()=>{this.pye(),this.dge=-1},this.Ah=()=>{this.pye()},this.pd=()=>{-1===this.dge&&(this.dge=this.sye()),this.wye(),this.yye(),this.dge=this.sye()},this.i1t=()=>{if(this.Qme!==this.na.ZR){this.Qme=this.na.ZR;const t=this.Qme?z7.MUTE:z7.UNMUTE;this.Tye(t)}},this.$we=()=>{if(this.aK!==this.na.cs()){this.aK=this.na.cs();const t=this.aK?z7.FULL_SCREEN:z7.EXIT_FULL_SCREEN;this.Tye(t)}},this.X6=t=>{Je(t)||(this.Tye(z7.ERROR),ah(this.dye()))},this.Aye=[z7.START,z7.FIRST_QUARTILE,z7.MID_POINT,z7.THIRD_QUARTILE,z7.COMPLETE,z7.IMPRESSION,z7.CREATIVE_VIEW],this.na=t,this.gye=e,this.mye=i,this.wC()}};Dh((function(t){return class extends t{Ca(t){return this.Rye&&(this.Rye.yn(),this.Rye=void 0,this.qEt()),super.Ca(t)}async Rnt(t,e){if(!t||!function(t){return t.sources.some((t=>t.integration===ET.MEDIATAILOR))}(t))return super.Rnt(t,e);try{const i=await this.Iye(t,e);this.Cye=new R1(this),await super.Rnt(i,e)}catch(t){this.BH(new A(Qa.MANIFEST_LOAD_ERROR,t.message,t))}}$R(t){var e;(null==(e=this.Cye)?void 0:e.inAdBreak)||super.$R(t)}RR(t,e){var i;(null==(i=this.Rye)?void 0:i.tye)||super.RR(t,e)}NR(){var t;return null!=(t=this.YG)?t:super.NR()}LR(){var t;return null!=(t=this.KG)?t:super.LR()}BH(t){this.YG=gn(t),this.KG=t,this._o(new Na(t))}qEt(){this.YG=void 0,this.KG=void 0}async Iye(t,e){let i=[];for(const s of t.sources){if(!LT(s)){i.push(s);continue}const t=s;if(!t.src){i.push(s);continue}const n=await this.Pye(t,e);J(e);const r=ol({},t,{integration:void 0,src:n});i.push(r)}const s=tu(t);return s.sources=i,s}async Pye(t,e){const i=t.src||"",s=i.match(/.+?(?=\/v1\/)/);if(!s)throw new g("Could not find MediaTailor session initialization url");const n=s[0],r=Ga(i,"?ads."),o=r?{Xu:i,jk:Rr.Ak}:{Xu:i,AE:xe.POST,Lk:JSON.stringify({adParams:t.adParams}),jk:Rr.Ak},h=await Ci((()=>this.Dye(o,e)),e);let a;try{if(a=n+h.manifestUrl,!r){const t=n+h.trackingUrl,e=PT(a);this.Rye=new K7(this,t,e)}}catch(t){throw new g("Something went wrong parsing the MediaTailor session initialization response")}return a}async Dye(t,e){try{const i=await this.fR.Qk(t);return await i.Ik(e)}catch(t){throw th(t),new g("Failed to initialize MediaTailor session manifest")}}yn(){var t;this.Rye&&(this.Rye.yn(),this.Rye=void 0),this.qEt(),null==(t=this.Cye)||t.destroy(),this.Cye=void 0,super.yn()}constructor(t,e){super(t,e),this.Rye=void 0,this.YG=void 0,this.KG=void 0,this.Cye=void 0}}}),rh.Xst),r(),r(),r(),r(),r();var sa=function(t){return t[t.Nye=0]="Nye",t[t.UL=1]="UL",t[t.DZ=2]="DZ",t[t.Mye=3]="Mye",t[t.Lye=4]="Lye",t[t.Bye=5]="Bye",t[t.fa=6]="fa",t}({});r();var j7=class extends Co{get RC(){}get Rt(){return this.qe}set Rt(t){this.DO(t)}get wa(){var t;return null!=(t=this.eu)?t:this.eu=yi(this)}get o(){return String(this.lu.componentTag)||"hbbtvaudiotrack"}get Lt(){return this.r5}get Ch(){return this.CO}get gs(){return""}get CE(){return this.Rt?"enabled":"disabled"}set CE(t){this.DO("enabled"===t)}get NC(){return this.TO}get MC(){}set MC(t){}get IC(){return this.IO}DO(t){this.qe=t,t?this.VMt.Oye(this.lu):this.VMt.Fye(this.lu)}constructor(t,e,i,s,n=!1){super(),this.IO=oi(),this.TO=new gl,this.lu=t,this.CO=e,this.r5=i,this.qe=n,this.VMt=s}};r(),r(),r();var Q7=function(t){return t.pw="urn:dvb:casystemid:19219",t.ww="urn:dvb:casystemid:19156",t}({}),J7=function(t){return t.pw="application/vnd.ms-playready.initiator+xml",t.ww="application/widevine+xml",t}({});function $7(t,e,i){switch(t){case"urn:dvb:casystemid:19219":return function(t){return'<?xml version="1.0" encoding="utf-8"?><PlayReadyInitiator xmlns="http://schemas.microsoft.com/DRM/2007/03/protocols/"><LicenseServerUriOverride><LA_URL>'+(null!=t?t:"")+"</LA_URL></LicenseServerUriOverride></PlayReadyInitiator>"}(e);case"urn:dvb:casystemid:19156":if(!i)throw new g("Content URL is needed for Widevine license request");return function(t,e){return'<?xml version="1.0" encoding="utf-8"?><WidevineCredentialsInfo xmlns="http://www.smarttv-alliance.org/DRM/widevine/2012/protocols/"><ContentURL>'+a$(null!=e?e:"")+"</ContentURL><DeviceID></DeviceID><StreamID></StreamID><ClientIP></ClientIP><DRMServerURL>"+a$(null!=t?t:"")+"</DRMServerURL><DRMAckServerURL></DRMAckServerURL><DRMHeartBeatURL></DRMHeartBeatURL><DRMHeartBeatPeriod></DRMHeartBeatPeriod><UserData></UserData><Portal></Portal><StoreFront></StoreFront><BandwidthCheckURL></BandwidthCheckURL><BandwidthCheckInterval></BandwidthCheckInterval></WidevineCredentialsInfo>"}(e,i);default:throw new g("DRM key system is not supported")}}var ttt=class extends Ee{Vye(t){this.Wye(),this.Cu=t}async Uye(t){if(!t.sH.length)return void this.Wye();if(!this.Cu)throw new g("The OIPF DRM agent has to be attached to the DOM");let e;this.Gye||(this.Gye=h.createElement("object"),this.Gye.type="application/oipfDrmAgent",this.Cu.appendChild(this.Gye),this.Gye.onDRMMessageResult=this.Hye,this.Gye.onDRMRightsError=this.Zye,this.Xye=h.createElement("object"),this.Xye.type="application/oipfCapabilities",this.Cu.appendChild(this.Xye));for(const i of t.sH){let s,n,r;if(i.cT===mm)s=Q7.pw,n=J7.pw,r=$7(Q7.pw,i.CG);else{if(i.cT!==gm)continue;s=Q7.ww,n=J7.ww,r=$7(Q7.ww,i.CG,t.VC)}try{return await this.hit(n,r,s),void this._o(new ie)}catch(t){e=t}}e&&this._o(new $n(e))}Xw(){return this.zye=void 0,this.Cu=void 0,super.Xw()}hit(t,e,i){var s,n;return this.zye=new os,this.qye=null==(n=this.Gye)||null==(s=n.sendDRMMessage)?void 0:s.call(n,t,e,i),this.qye||null==this.zye.Wb||this.zye.Wb.call(this.zye,new sr(Qa.CONTENT_PROTECTION_INTERNAL_ERROR,"No DRM message returned by OIPF DRM agent")),this.zye.Ub}Yye(t){switch(t){case 5:return Qa.CONTENT_PROTECTION_NOT_SUPPORTED;case 2:case 1:case 3:case 4:case 6:return Qa.CONTENT_PROTECTION_INTERNAL_ERROR;default:return Qa.CONTENT_PROTECTION_ERROR}}Kye(t){switch(t){case 2:return"The DRM agent was unable to complete the request";case 3:return"The specified MIME type is unknown for the specified DRM system";case 4:return"User consent is needed for that action";case 5:return"The specified DRM System is unknown";case 6:return"The license message has the wrong format";default:return"Unspecified error occurred"}}jye(t){return 0===t?Qa.CONTENT_PROTECTION_LICENSE_ERROR:1===t?Qa.CONTENT_PROTECTION_LICENSE_INVALID:Qa.CONTENT_PROTECTION_ERROR}Qye(t){switch(t){case 0:return"No license, consumption of the content is blocked";case 1:return"Invalid license, consumption of the content is blocked";case 2:return"Valid license, consumption of the content is unblocked";default:return"Unknown error occurred"}}Wye(){this.Gye&&(ze(this.Gye),this.Gye=void 0),this.Xye&&(ze(this.Xye),this.Xye=void 0)}async d9(t,e,i){}constructor(...t){super(...t),this.Gye=void 0,this.Xye=void 0,this.Cu=void 0,this.qye=void 0,this.zye=void 0,this.Hye=(t,e,i)=>{var s,n,r,o;if(0===i)return void(null==(o=this.zye)||null==(r=o.Vb)||r.call(o,t));const h=this.Yye(i),a=this.Kye(i),u=new sr(h,a);null==(n=this.zye)||null==(s=n.Wb)||s.call(n,u)},this.Zye=(t,e,i,s)=>{const n=this.jye(t),r=this.Qye(t),o=new sr(n,r);this._o(new $n(o))}}};r();var ett=class{get hI(){return se.gB(0,this.WB.ct)}get iI(){return el.$H}set iI(t){}get kd(){return this.MT}dJ(t){return!1}_J(t){return Ho.resolve(void 0)}async Uye(t){await this.vJ.Uye(this.MT)}Xw(){return Ho.resolve(void 0)}constructor(t,e,i){this.MT=t,this.WB=e,this.vJ=i}},itt=class extends Co{get wR(){return se.pB()}get bR(){}get $G(){}get Hu(){return this.Ku}get hI(){var t,e;return null!=(e=null==(t=this.JG)?void 0:t.hI)?e:se.pB()}get uI(){return this.cZ}get X4(){return!1}get WR(){return!1}get qB(){return ol({},GD)}get lt(){return this.YG}get U4(){return!1}get Sa(){return this.ea}get y7(){return!0}get M4(){return!1}get AI(){return!0}set AI(t){}get Wl(){return this.wZ}get nt(){return this.y8}get G9(){return this.hZ}get fH(){return this.ta}S7(t){this.vJ.Vye(t),this.Ket.S7(t)}MJ(t){for(const e of t)if(e.Tw===In.pW)return e}async $n(t){if(this.JG)throw new g("Already loaded a media source");if(t.Tw===In.pW)return this.JG=new ett(t,this,this.vJ),await this.JG.Uye(t),this.JG;throw new g("Unsupported media source configuration for HbbTV")}async Jye(t){await this.$ye()}async xI(){await this.$ye()}zG(t){}async nr(){this.JG=void 0,this.tbe=void 0}async Xw(){await this.nr(),this.Hl.yn(),this.y8.yn(),this.Ket.yn(),this.jet.yn(),this.vJ.vn(Du,this.Ds),await this.vJ.Xw()}ge(){this.hZ=!0,this.Ket.ge()}be(){this.hZ=!1,this.Ket.be()}uH(){return!1}lH(t,e,i,s,n){throw new g("Adding native sideloaded text tracks is not supported on HbbTV")}p7(){}w7(){}A7(){}HR(){return{_O:0,vO:0,mO:0}}NI(){}_H(t){throw new g("Adding custom text tracks is not supported on HbbTV")}TI(){}OI(t,e,i,s,n,r,o,h,a){const u=new Yi(t,e,i,s,n,r,o,a,h);return this.Hl.tt(u),this.b8.tt(u),u}vH(){for(const t of this.Hl.lC.slice())t.yn();this.Hl.nr()}mW(t){this.Hl.it(t),this.b8.it(t)}ebe(){const t=h.getElementsByTagName("object");for(let e=0;e<t.length;e++){const i=t.item(e);if("video/broadcast"===i.type){const t=i;return t.onPlayStateChange=this.ibe,0===t.playState&&(null==t.bindToCurrentChannel||t.bindToCurrentChannel.call(t)),t}}}$ye(){var t,e;if(!this.sbe||3===this.sbe.playState||0===this.sbe.playState)return Promise.resolve("");if(null==(t=this.tbe)?void 0:t.Ub)return null==(e=this.tbe)?void 0:e.Ub;this.tbe=new os;try{null==this.sbe.stop||this.sbe.stop.call(this.sbe)}catch(t){Ms.Wp("Unable to stop broadcast for HbbTV",t),this.tbe.Wb(new g("Unable to stop broadcast for HbbTV"))}return this.tbe.Ub}constructor(t,e){super(),this.Ku=t,this.wZ=e,this.ea=new N,this.ta=new CI,this.Hl=new Wo,this.JG=void 0,this.cZ=!1,this.YG=void 0,this.RW=Ht.eO,this.hZ=!0,this.tbe=void 0,this.ibe=()=>{var t,e,i,s;(null==(t=this.sbe)?void 0:t.playState)&&((null==(e=this.tbe)?void 0:e.Ub)||2!==this.sbe.playState||this.$ye().catch(Tt),3===this.sbe.playState&&(null==(s=this.tbe)||null==(i=s.Vb)||i.call(s,String(this.sbe.playState)),this.tbe=void 0))},this.vJ=new ttt(this),this.vJ.bn(Du,this.Ds),this.y8=new Iu([this.Hl]),this.b8=new su(this),this.Ket=new dB,this.jet=new DO(this.Ket.we,this.Hu,this.nt,this.Wl,this.Sa,this.fH),this.sbe=this.ebe(),this.$ye().catch(Tt)}},stt=class extends itt{get jG(){}get ht(){return this.cO}get rt(){return this.dO}get QR(){return this.fZ}set QR(t){this.fZ=t,this.KR||this.nbe.play(t)}get ZR(){return this.nbe.muted}set ZR(t){this.nbe.muted=t}get gI(){var t,e;return(null!=(e=null!=(t=this.nbe.volume)?t:null==this.nbe.getVolume?void 0:this.nbe.getVolume.call(this.nbe))?e:100)/100}set gI(t){null==this.nbe.setVolume||this.nbe.setVolume.call(this.nbe,100*t)}get ER(){return this.nbe.playPosition?this.nbe.playPosition/1e3:0}get ct(){return!this.nbe.playTime||this.nbe.playTime<0?1/0:this.nbe.playTime/1e3}get PR(){return this.nbe.playState===sa.Bye}get Ti(){return this.nbe.offsetHeight*Ms.Ys.Kg}get ji(){return this.nbe.offsetWidth*Ms.Ys.Kg}get KR(){return this.nbe.playState===sa.DZ}get tI(){return se.pB()}get rI(){return this.O4}get dI(){return 0}get vI(){return 0}S7(t){super.S7(t),t.appendChild(this.nbe)}async $n(t){if(t.Tw===In.pW){const e=await super.$n(t);return await this.Jye(t),this.nbe.onPlayStateChange=this.rbe,e}throw new g("Unsupported media source configuration for HbbTV")}async Jye(t){this.nbe.type=vu(t.VC),this.nbe.data=t.VC,await super.Jye(t)}async xI(){await super.xI(),this.nbe.play(this.fZ),this._o(new $(this.ER))}EI(){this.nbe.play(0),this._o(new ul(this.ER))}Rb(t,e,i){this.nbe.seek(1e3*t),this.cZ=!0,this._o(new R(this.ER))}async nr(){void 0!==this.JG&&this.nbe.stop(),this.obe&&(Ms.Hp(this.obe),this.obe=void 0),await super.nr(),Sh(this.nbe),this.nbe.data&&this.nbe.removeAttribute("data"),this.cO.nr(),this.dO.nr()}async Xw(){await super.Xw(),ze(this.nbe)}ge(){super.ge(),this.nbe.style.display="block"}be(){super.be(),this.nbe.style.display="none"}Oye(t){const e=this.hbe(t);if(!e)throw new g("Selected track does not exist on HbbTV");null==this.nbe.selectComponent||this.nbe.selectComponent.call(this.nbe,e)}Fye(t){const e=this.hbe(t);if(!e)throw new g("Selected track does not exist on HbbTV");null==this.nbe.unselectComponent||this.nbe.unselectComponent.call(this.nbe,e)}hbe(t){var e;const i=null!=(e=null==this.nbe.getComponents?void 0:this.nbe.getComponents.call(this.nbe,t.type))?e:this.abe();return this.ube(i,t)}cbe(t){var e;const i=null!=(e=null==this.nbe.getCurrentActiveComponents?void 0:this.nbe.getCurrentActiveComponents.call(this.nbe,1))?e:this.abe();this.cO.nr();for(let e=0;e<t.length;e++){const s=t.item(e);this.cO.tt(new j7(s,s.language,this.cO.V?jr.NPt:jr.MPt,this,this.lbe(i,s)))}}dbe(t){var e;const i=null!=(e=null==this.nbe.getCurrentActiveComponents?void 0:this.nbe.getCurrentActiveComponents.call(this.nbe,0))?e:this.abe();this.dO.nr();for(let e=0;e<t.length;e++){const s=t.item(e);this.dO.tt(new j7(s,String(s.aspectRatio),this.dO.V?_q.NPt:_q.MPt,this,this.lbe(i,s)))}}abe(){return{length:0,item:t=>{}}}lbe(t,e){return void 0!==this.ube(t,e)}ube(t,e){for(let i=0;i<t.length;i++){const s=t.item(i);if(this.fbe(s,e))return s}}fbe(t,e){return t.pid===e.pid&&t.componentTag===e.componentTag&&t.type===e.type&&t.encoding===e.encoding&&t.encrypted===e.encrypted}_be(t){switch(t){case 0:return ok.SRC_NOT_SUPPORTED;case 1:case 5:case 6:return ok.NETWORK;default:return ok.DECODE}}constructor(t,e,i){super(e,i),this.nbe=t,this.fZ=1,this.cO=new Ke,this.dO=new Ke,this.O4=Ht.eO,this.vbe=void 0,this.obe=void 0,this.rbe=()=>{if(!this.nbe.playState)return;this.RW=this.O4,this.mbe=this.gbe,this.gbe=this.nbe.playState;const t=this.ct;switch(t!==this.vbe&&(this._o(new $s(t)),this.vbe=t),this.obe&&this.gbe!==sa.UL&&(Ms.Hp(this.obe),this.obe=void 0),this.gbe){case sa.Mye:this.O4=Ht.eO;break;case sa.Lye:if(this.mbe===sa.Mye){var e;const t=null!=(e=null==this.nbe.getComponents?void 0:this.nbe.getComponents.call(this.nbe,1))?e:this.abe();var i;const s=null!=(i=null==this.nbe.getComponents?void 0:this.nbe.getComponents.call(this.nbe,0))?i:this.abe();if(0===t.length&&0===s.length)break;this.cbe(t),this.dbe(s)}this.O4=Ht.Xn;break;case sa.UL:this.cZ&&(this.cZ=!1,this._o(new oa(this.ER))),this._o(new ko(this.ER)),this.O4=Ht.sO,this.obe=Ms.Gp(this.pbe,250);break;case sa.fa:this.O4=Ht.eO,this._o(new yM(new hk(this._be(this.nbe.error))));break;case sa.Bye:this._o(new Xs(this.ER));case sa.DZ:case sa.Nye:}this.O4!==this.RW&&this._o(new hu(this.ER,this.O4))},this.pbe=()=>{this._o(new Al(this.ER,void 0))}}};r();var ntt=class extends itt{get jG(){return this.$T}get ht(){return this.cO}get rt(){return this.dO}get QR(){return this.$T.playbackRate}set QR(t){this.$T.playbackRate=t}get ZR(){return this.$T.muted}set ZR(t){this.$T.muted=t}get gI(){return this.$T.volume}set gI(t){this.$T.volume=t}get ER(){return this.$T.currentTime}get ct(){return this.$T.duration}get PR(){return this.$T.ended}get Ti(){return this.$T.offsetHeight*Ms.Ys.Kg}get ji(){return this.$T.offsetWidth*Ms.Ys.Kg}get KR(){return this.$T.paused}get tI(){return se.Cn(this.$T.played)}get rI(){return this.B9.rI}get dI(){return this.$T.videoHeight}get vI(){return this.$T.videoWidth}S7(t){super.S7(t),t.appendChild(this.$T)}async $n(t){if(t.Tw===In.pW){const e=await super.$n(t);return await this.Jye(t),e}throw new g("Unsupported media source configuration for HbbTV")}async Jye(t){switch(t.rH){case Ih.XC:case Ih.zC:this.$T.setAttribute("crossorigin",t.rH);break;case Ih.wE:default:this.$T.removeAttribute("crossorigin")}void 0!==t.iI?this.$T.preload=t.iI:this.$T.preload=el.yG,void 0!==t.oH?this.$T.title=t.oH:Ld(this.$T);const e=this.QR;this.$T.src=t.VC,this.QR=e,await super.Jye(t)}async xI(){await super.xI(),await this.$T.play()}EI(){this.$T.pause()}Rb(t,e,i){e&&this.$T.fastSeek?this.$T.fastSeek(t):this.$T.currentTime=t,this.cZ=!0,this._o(new R(this.ER))}async nr(){await super.nr(),Sh(this.$T),this.$T.src&&this.$T.removeAttribute("src"),this.cO.nr(),this.dO.nr()}async Xw(){await super.Xw(),this.Q9.Xw(),this.B9.Xw(),this.q8(),this.pH(),ze(this.$T)}ge(){super.ge(),this.$T.style.display="block",this.$T.style.height="100%",this.$T.style.width="100%"}be(){super.be(),this.$T.style.display="none"}Z8(){this.jG.addEventListener("play",this.BW),this.jG.addEventListener("pause",this.OW),this.jG.addEventListener("timeupdate",this.Tc),this.jG.addEventListener("progress",this.wbe),this.jG.addEventListener("loadstart",this.Ts),this.jG.addEventListener("ended",this.Mc),this.jG.addEventListener("ratechange",this.ybe),this.jG.addEventListener("volumechange",this.fzt),this.jG.addEventListener("durationchange",this.uzt),this.jG.addEventListener("loadedmetadata",this.bbe),this.jG.addEventListener("emptied",this.Abe),this.jG.addEventListener("seeked",this.Sbe),this.jG.addEventListener("seeking",this.Tbe),this.jG.addEventListener("error",this.kbe),Nm()&&this.jG.addEventListener("encrypted",this.y9)}q8(){this.jG.removeEventListener("play",this.BW),this.jG.removeEventListener("pause",this.OW),this.jG.removeEventListener("timeupdate",this.Tc),this.jG.removeEventListener("progress",this.wbe),this.jG.removeEventListener("loadstart",this.Ts),this.jG.removeEventListener("ended",this.Mc),this.jG.removeEventListener("ratechange",this.ybe),this.jG.removeEventListener("volumechange",this.fzt),this.jG.removeEventListener("durationchange",this.uzt),this.jG.removeEventListener("loadedmetadata",this.bbe),this.jG.removeEventListener("emptied",this.Abe),this.jG.removeEventListener("seeked",this.Sbe),this.jG.removeEventListener("seeking",this.Tbe),this.jG.removeEventListener("error",this.kbe),this.jG.removeEventListener("encrypted",this.y9)}BH(t){this.YG=t,this._o(new yM(this.YG))}IH(){const t=this.$T.audioTracks,e=this.$T.videoTracks;t&&(t.addEventListener("addtrack",this.Ebe),t.addEventListener("removetrack",this.xbe),t.addEventListener("change",this.Rbe)),e&&(e.addEventListener("addtrack",this.Ibe),e.addEventListener("removetrack",this.Cbe),e.addEventListener("change",this.Pbe))}pH(){const t=this.$T.audioTracks,e=this.$T.videoTracks;t&&(t.removeEventListener("addtrack",this.Ebe),t.removeEventListener("removetrack",this.xbe),t.removeEventListener("change",this.Rbe)),e&&(e.removeEventListener("addtrack",this.Ibe),e.removeEventListener("removetrack",this.Cbe),e.removeEventListener("change",this.Pbe))}ah(t){for(let e=0;e<t.V;e++){t.fC(e).MO()}}constructor(t,e,i){super(e,i),this.$T=t,this.cO=new Ke,this.dO=new Ke,this.Dbe=void 0,this.BW=()=>{this._o(new $(this.ER))},this.OW=()=>{this._o(new ul(this.ER))},this.Tc=()=>{const t=this.ER,e=this.uI,i=void 0!==this.Dbe,s=i&&this.Dbe!==t;(e||!i||s)&&(this._o(new Al(t,void 0)),this.Dbe=t)},this.wbe=()=>{this._o(new K(this.ER))},this.Ts=()=>{this._o(new ao)},this.Mc=()=>{this._o(new Xs(this.ER))},this.ybe=()=>{this._o(new ju(this.ER,this.QR))},this.fzt=()=>{this._o(new ns(this.ER,this.gI))},this.uzt=()=>{this._o(new $s(this.ct))},this.bbe=()=>{},this.Abe=()=>{},this.Sbe=()=>{this.cZ&&(this.cZ=!1),this._o(new oa(this.ER))},this.Tbe=()=>{this._o(new R(this.ER))},this.FW=t=>{this.RW!==t.readyState&&(this.RW=t.readyState,this._o(t))},this.LW=()=>{this._o(new ko(this.ER))},this.kbe=()=>{if(null!==this.$T.error){const e=this.$T.error;var t;this.BH(new hk(null!=(t=e.code)?t:ok.DECODE,e.message||"Error decoding media",void 0,e.msExtendedCode))}},this.y9=t=>{this._o(new cg(t.initDataType,t.initData||new ArrayBuffer(0)))},this.Ibe=t=>{const e=this.$T.videoTracks;if(e)for(let t=0;t<e.length;t++){const i=e[t];wI(this.dO,i)||this.dO.tt(new Ak(i))}},this.Cbe=t=>{const e=[],i=this.$T.videoTracks;if(i){for(const t of this.dO.lC)yI(i,t.PO)||e.push(t);for(const t of e)this.dO.it(t)}},this.Pbe=t=>{this.ah(this.dO)},this.Ebe=t=>{const e=this.$T.audioTracks;if(e)for(let t=0;t<e.length;t++){const i=e[t];wI(this.cO,i)||this.cO.tt(new yk(i))}},this.xbe=t=>{const e=[],i=this.$T.audioTracks;if(i){for(const t of this.cO.lC)yI(i,t.PO)||e.push(t);for(const t of e)this.cO.it(t)}},this.Rbe=t=>{this.ah(this.cO)},this.B9=new jL(this),this.B9.bn(Zc.iC,this.FW),this.B9.A9(new Za(this)),this.Q9=new wM(this),this.Q9.bn(Zc.UL,this.LW),this.Z8(),this.IH()}},rtt=[Ti.ho,Ti.zy,Zc.UL,Ti.Jy,Ti.Qy,Ti.Dy,Ti.Iy,Ti.Ey,Ti.Ty,Ti.hb,Ti.qy,Ti.Uy,Ti.Yy,Ti.ub,Ti.jy,Ti.Ly,Ti.Ny],ott=class extends Co{get ht(){return this.WB.ht}get wR(){return this.WB.wR.ks()}get KB(){}get bR(){return this.WB.bR}set bR(t){t&&this.WB.zG(t)}get bt(){return this.Sc}get ER(){return this.WB.ER}set ER(t){this.WB.Rb(t)}get eH(){return this.iH}get ct(){return this.WB.ct}get PR(){return this.WB.PR}get MR(){return this.KG}get lt(){return this.YG}get OR(){}get WR(){return!1}get AI(){return this.WB.AI}set AI(t){this.WB.AI=t}get yI(){return this.pZ}get GR(){return ol({},{_O:0,vO:0,mO:0,gO:0,pO:0,wO:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}},this.WB.HR())}get ZR(){return this.WB.ZR}set ZR(t){this.WB.ZR=t}get qR(){return!0}get KR(){return this.WB.KR}get QR(){return this.WB.QR}set QR(t){this.WB.QR=t}get tI(){return this.WB.tI.ks()}get iI(){return this.QG}set iI(t){this.QG=t,this.JG&&(this.JG.iI=t)}get rI(){return this.WB.rI}get hI(){return this.WB.hI.ks()}get uI(){return this.WB.uI}get $G(){return this.WB.$G}get nt(){return this.Hl}get dI(){return this.WB.dI}get rt(){return this.WB.rt}get vI(){return this.WB.vI}get gI(){return this.WB.gI}set gI(t){this.WB.gI=t}OI(t){return this.WB._H(t)}II(){return!1}SI(){return this.WB.Sa}TI(){}be(){this.WB.be()}NI(){this.WB.NI()}EI(){this.WB.EI()}async xI(){await this.WB.xI()}MI(){throw new g("Recreate media source is not supported on HbbTV")}RR(t,e){this.WB.Rb(t)}async Ca(t,e,i){var s;J(i),this.Sc=t;const n={Tw:In.pW,VC:t.src,Mk:t.type,sH:this.nH(t),iI:this.QG,rH:t.crossOrigin,oH:null==(s=e.metadata)?void 0:s.title};this.JG=await this.WB.$n(n),e.textTracks&&this.aH(e.textTracks),Ji(this.nt)}ge(){this.WB.ge()}CI(){}DI(){}ja(){return this.WB.fH}async nr(){this.Sc=void 0,this.YG=void 0,this.KG=void 0,this.JG=void 0,await this.dH.nr(),this.WB.vH(),await this.WB.nr()}async yn(){await this.nr(),this.mH.yn(),this.WB.vn(rtt,this.Ds),this.WB.vn(yo.fa,this.kH),await this.WB.Xw(),this.pn.yn(),this.Hl.yn(),await this.dH.yn()}BH(t,e){this.YG||(this.YG=e,this.KG=t,this._o(new Na(t)))}aH(t){for(const e of t)void 0!==e.src&&this.dH.cW(e)}nH(t){if(!t.contentProtection)return[];const e=[];return t.contentProtection.widevine&&e.push({cT:gm,CG:t.contentProtection.widevine.licenseAcquisitionURL,RH:[]}),t.contentProtection.playready&&e.push({cT:mm,CG:t.contentProtection.playready.licenseAcquisitionURL,RH:[]}),this.Nbe(e,t.contentProtection.preferredKeySystems)}Nbe(t,e){if(void 0===e||0===e.length)return t;const i=t=>{const i=e.indexOf(t.cT.Iw);return i>=0?i:e.length};return Ii(t,((t,e)=>i(t)-i(e)))}constructor(t,e,i,s){super(),this.JG=void 0,this.iH=new Yh,this.Sc=void 0,this.YG=void 0,this.KG=void 0,this.QG=el.$H,this.kH=t=>{const e=t.lt,i=e.code,s=new A(lk(i),"Something went wrong during HbbTV playback.",e),n=gn(s);this.BH(s,n)},this.pn=new MP(t),this.pn.kn(),this.WB=Hd()?new ntt(h.createElement(ee.mE),this.pn,s):new stt(h.createElement("object"),this.pn,s),this.WB.S7(t),this.WB.bn(rtt,this.Ds),this.WB.bn(yo.fa,this.kH),this.mH=new q(this.WB,!0),this.mH.bn(no,this.Ds),this.dH=new xx(this.WB,e),this.Hl=new Iu([this.WB.nt,this.dH.Z]),this.pZ=i}};O(new class{uP(t,e,i,s,n,r,o,h){return new ott(t,i,r,o)}FH(t,e){var i;return!(!Z.Bm||t.type!==Bc.jC&&!NT(t.type)&&!zh(t.type))&&!(Hd()&&!(null==(i=t.contentProtection)?void 0:i.useOipfDrmAgent)&&(!t.contentProtection||Nm()))}async VH(t){return!!await hT(t,!0)}WH(){return!1}constructor(){this.UH=zt.lG}});export{Po as a,Et as b,r as c,Z as d,Bo as e,$c as f,V as g,Yt as h,ze as i,kd as j,Rd as k,ce as l,Id as m,Cd as n,Zo as o,Ld as p,Bd as q,Ms as r,Tt as s,Qr as t,Ns as u,Cf as v,Pf as w,Zv as x,ol as y,Ga as z,Cm as A,Ii as B,Pc as C,Xa as D,Fo as E,we as F,ms as G,En as H,J as I,ah as J,Co as K,pe as L,Ti as M,Qa as N,Ye as O,HA as P,Jr as Q,Ai as R,ZA as S,Fu as T,eo as U,uk as V,Zu as W,Dn as X,bh as Y,Li as Z,dx as _,_x as $,Ht as aa,za as ba,rh as ca,Dh as da,dF as ea,se as fa,BT as ga,Ys as ha,$s as ia,Nu as ja,jT as ka,$T as la,nh as ma,Nn as na,pC as oa,it as pa,nu as qa,SP as ra,CP as sa,MP as ta,LP as ua,uo as va,OP as wa,UP as xa,GP as ya,HP as za,zP as Aa,ao as Ba,bB as Ca,AB as Da,SB as Ea,kB as Fa,EB as Ga,xB as Ha,$B as Ia,tO as Ja,eO as Ka,iO as La,wu as Ma,sF as Na,nF as Oa,vF as Pa,FF as Qa,VF as Ra,WF as Sa,UF as Ta,XF as Ua,zF as Va,qF as Wa,uU as Xa,cU as Ya,vt as Za,F0 as _a,Y0 as $a,u1 as ab,C5 as bb,d6 as cb,W6 as db,X6 as eb,H8 as fb};